# StackOverflow 问答 12565000-12565999

# java - Axis2 实现和存根生成问题

> ID：12565000
> 
> 赞同：0
> 
> 时间：2012-09-24T12:25:10.877
> 
> 标签：java, apache, wsdl, axis2, wsdl2java

我正在使用 wsdl2java 来生成服务。生成的参数如下：

```
-p com.dummy.tst.service -u -f -sp -s -b -ssi -d xmlbeans -uri /some/path/service.wsdl -ss -g -sd -o /some/path/gen 
```

生成后，我有一个 services.xml 文件，其行如下

```
<parameter name="ServiceClass">com.dummy.tst.service.TestSoapBindingImpl</parameter> 
```

然后在 gen 目录中，我有 TestSoapBindingImpl.java 和方法列表，但每个方法定义如下

```
throw new  java.lang.UnsupportedOperationException("Please implement " + this.getClass().getName() + "#myMethod"); 
```

还有一个 TestSoapBindingStub.java 文件，它实际上包含实现的方法。在轴 1 中只有一个包含方法描述和实现的文件，在轴 2 中我有 2 个文件。

我应该如何处理这些文件？Impl 文件，即指定为默认服务方法容器（在 services.xml 中）仅包含假人，因此我不能使用已部署的服务，并且在 services.xml 中将 TestSoapBindingImpl 替换为 TestSoapBindingStub 也不会导致预期的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:30:51.800

`TestSoapBindingStub.java`是给客户的。它包含在远程系统上调用 Web 服务的代码。

在服务端，每次收到请求时，Axis2 都会创建一个类型`services.xml`为 ServiceClass 的对象。然后它将使用客户端提供的对象在 ServiceClass 对象中调用请求的函数。

使用 wsdl2java 生成的代码，对服务的每次调用都会创建一个类型为 的对象`om.dummy.tst.service.TestSoapBindingImpl`，正如您所指出的，每次调用都会引发异常。有两种方法可以提供工作服务。

1.  您可以使用`TestSoapBindingImpl.java`您拥有的文件作为起点。从每个函数中删除该`throws`行，并在每个函数体中填写您在请求进入时实际要执行的代码。

2.  或者，您可以将`services.xml`其用作起点。定义一个您自己的类作为服务类。将引用替换为`com.dummy.tst.service.TestSoapBindingImpl`对您自己的服务类名称的引用。wsdl2java 可能生成了一个名为类似的文件`TestSoapBindingSkeleton.java`，它定义了服务类应该实现的接口。您的自定义服务类应实现此接口。

我一直在从事的项目使用方法#2。我们编写自己的服务类来实现骨架接口。将服务打包到 AAR 文件中时，您会将文件包含`services.xml`在 AAR 中。我们的打包规则对生成的内容执行文本替换，`services.xml`以使用我们的服务类的名称更新 ServiceClass。

# coffeescript - 带推导式的计算

> ID：12565001
> 
> 赞同：0
> 
> 时间：2012-09-24T12:25:15.100
> 
> 标签：coffeescript

假设我有以下内容：

```
scoringObject = 
  a : -1
  b : 0
  c : 1
  d : 2

resultsArray = ['a','c','b','b','c','c','d'] 
```

使用 Coffescript，我如何计算 aggregateScore（示例中为 +4）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:38:32.650

由于您的示例没有多大意义，我将假设您拥有的是：

```
resultsArray = ['a','c','b','b','c','c','d'] 
```

从`scoringObject`你的帖子。然后你可以这样计算：

```
aggregateScore = 0
aggregateScore += scoringObject[k] for k in resultsArray
# => 4 
```

如果我假设错误，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:36:07.030

如果您不介意使用 ECMAScript 5 中的功能，[`Array::reduce`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)可以非常简洁地表达这种事情：

```
aggregateScore = resultsArray.reduce ((sum, x) -> sum + scoringObject[x]), 0 
```

（感觉的参数顺序`reduce`挺可惜的，初始值应该是第一个，reducing函数在最后一个）

Underscore.js[提供](http://underscorejs.org/#reduce)了一个跨浏览器的 reduce 实现:)

# java - 运行：java.sql.SQLException：[Microsoft][ODBC Driver Manager] 无效的连接字符串属性

> ID：12565005
> 
> 赞同：0
> 
> 时间：2012-09-24T12:25:19.010
> 
> 标签：java

下面是我拥有的示例代码，它运行良好，但在我的笔记本电脑上使用*Windows 7 家庭高级版 64 位时却*不行。我收到以下错误：

```
run:
java.sql.SQLException: [Microsoft][ODBC Driver Manager] Invalid connection string attribute 
```

我正在使用*NetBeans*。

```
package javaapplication1;

import static java.lang.System.*;
import java.sql.*;

public class DBDemo1
{
    public static void main(String[] args)
    {
        try
        {
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            String sourceURL = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)}DBQ=UserDB.mdb;";
            Connection userDB = DriverManager.getConnection(sourceURL, "admin", "");
            Statement myStatement = userDB.createStatement();
            String writeString = "INSERT INTO Users(Firstname, Surname, Id) VALUES('Fred', 'Bloggs', 'bf01')";
            myStatement.executeUpdate(writeString);

            ResultSet results = myStatement.executeQuery("SELECT Firstname, Surname, Id FROM Users ORDER BY Id");

            while (results.next())
            {
                out.print(results.getString(1) + " ");
                out.print(results.getString(2) + " ");
                out.println(results.getString(3));
            }
            results.close();
        }
        //The following exceptions MUST be caught
        catch(ClassNotFoundException cnfe)
        {
            out.println(cnfe);
        }
        catch(SQLException sqle)
        {
            out.println(sqle);
        }
    }
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:33:42.657

您`sourceURL`缺少分号`;`：

```
String sourceURL = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ=UserDB.mdb;";
                                                                      ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:34:46.943

尝试这个：

```
String sourceURL = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)}DBQ=UserDB.mdb;DriverID=22"; 
```

# windows - Windows XP 是否具有等效于 VAX/VMS 安装的共享映像？

> ID：12565008
> 
> 赞同：0
> 
> 时间：2012-09-24T12:25:29.040
> 
> 标签：windows, windows-xp, executable

早在我在 VAX/VMS 上开发时，它有一个名为“已安装共享图像”的功能，如果一个人期望一个可执行程序将由多个用户同时运行，那么可以调用 INSTALL 实用程序：

$安装

安装> 添加一个_PROGRAM.EXE/SHARE

安装>退出

/SHARE 标志具有将代码从数据中分离出来的效果，以便 ONES_PROGRAM.EXE 的并发用户都将共享代码（当然是只读的）但每个人都有自己的数据副本（在读写基础）。这种技术/功能节省了数兆字节的内存（这在当时是必要的），因为无论并发用户的数量如何，只需将程序代码的一个副本驻留在 VAX 内存中。

Windows XP 有类似的东西吗？我不知道控制面板的“添加程序/功能”是否等效（我认为是，但我不确定）

非常感谢任何信息

理查德

ps INSTALL 还会共享库和程序，以防您好奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:17:39.827

Windows 虚拟内存管理器会自动为您执行此操作。只要模块可以在每个进程中加载​​到相同的地址，代码的物理内存将在加载该模块的每个进程之间共享。这适用于所有模块、库以及可执行文件。

这是通过链接器将代码段标记为可共享来实现的。因此，链接器将代码段标记为可共享，否则将数据段标记为可共享。

最重要的是，您不必做任何明确的事情来实现这一点。

# asp.net-mvc - 脚本块不包含在 ajax 响应中

> ID：12565010
> 
> 赞同：1
> 
> 时间：2012-09-24T12:25:38.127
> 
> 标签：asp.net-mvc, asp.net-ajax

在我的应用程序中，我有一个用于所有视图的通用布局，从一个视图（Index.cshtml）我用来`Ajax.BeginForm`显示另一个视图作为响应，代码是

`@using (Ajax.BeginForm("Edit", "Home", new AjaxOptions { UpdateTargetId = "content",InsertionMode=InsertionMode.Replace }))`

现在我的问题是作为响应，编辑视图按预期呈现，但编辑视图中的脚本块不包括在内，因此不执行 javascript。

`@model Test.Models.CARE`
`@{`
`ViewBag.Title = "Edit";`
`}`
`<script>`
`function s() {`
`alert("hi");`
`}`
`</script>`
`<h2 style="padding: 0px; margin-top: 0px;"> Edit</h2>`
`@using (Html.BeginForm("SaveForConfirmation", "Home"))`
`{`

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:28:13.167

将 javascript 代码放在视图中是不好的做法，更不用说部分视图了。因此，我建议您在单独的 javascript 文件中的单独函数中将此 javascript 代码外部化。

然后您可以订阅`OnSuccess`Ajax.BeginForm 助手的事件：

```
@using (Ajax.BeginForm("Edit", "Home", new AjaxOptions { OnSuccess = "editSuccess", UpdateTargetId = "content", InsertionMode = InsertionMode.Replace }))
{
    ...    
} 
```

然后在**单独**的javascript 文件中定义`editSuccess`函数：

 **```
function editSuccess(result) {
    alert('hi');
} 
```

现在在您的部分视图中，您应该只保留部分标记中应该包含的内容。摆脱任何`<script>`标签，你不需要它们。您不需要任何内联脚本。它们只会增加您网页的大小并浪费带宽，因为它们无法被浏览器缓存：；

```
@model Test.Models.CARE
<h2 style="padding: 0px; margin-top: 0px;">Edit</h2>
@using (Html.BeginForm("SaveForConfirmation", "Home"))
{
    ...
} 
```

* * *

更新：

如果您有一些编写不佳的 javascript 依赖于部分内部的 ViewBag 之类的废话，那么您可以从 OnSuccess 回调中调用相应的函数：

```
@using (Ajax.BeginForm("Edit", "Home", new AjaxOptions { OnSuccess = "s", UpdateTargetId = "content", InsertionMode = InsertionMode.Replace }))
{
    ...    
} 
```

请注意我是如何定义您在部分中定义的函数`OnSuccess = "s"`在哪里`s`以及在这种情况下将被调用的函数。但我再次重申，这是一种错误的方法，只有在您没有时间正确重构代码时才应使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:19:48.523

终于实现了所需的功能。

我就是这样做的

查看（从哪里拨打电话）

```
<input type="submit" value="Create" />
@using (Ajax.BeginForm("Edit", "Home", new AjaxOptions {OnSuccess="DisableControls()",
InsertionMode= InsertionMode.Replace,UpdateTargetId="DivToUpdate" })) 
```

控制器

```
[HttpPost]
    public ActionResult Edit(FormCollection fc)
    {
        if (fc.Keys[0].ToString().TrimEnd() == "Display")
        {
            TempData["readonly"] = "readonly";
        }
        else
            TempData["readonly"] = ""; 
```

被调用的部分视图

```
@model TestApp.Models.CUSTOMER
@{
    ViewBag.Title = "Edit";
}
<script>
function s() {
    var readonly="@TempData["readonly"].ToString()";
    if(readonly=="readonly")
       { 
       $('input[type="text"],select').attr('readonly','readonly');         
       $("#Save").remove();
       }
}
</script>
<h2 style="padding: 0px; margin-top: 0px;">
Edit</h2>
@using (Html.BeginForm("Save", "Home"))
{

@Html.ValidationSummary()

<fieldset>
    <legend>CUSTOMER</legend>
    <table style="margin: 0px auto;">
        <tr>
            <td> 
```

现在在诊断上一次失败尝试的原因时，我`alert()`在脚本中写了一个以查看脚本是否正在执行。

```
<script>
   function s() {
       var readonly="@TempData["readonly"].ToString()";var s="hi"+ prompt("name","");
       alert(s);
       if(readonly=="readonly")
          { //To make all text boxes and dropdown readonly
            $('input[type="text"],select').attr('readonly','readonly');         
            $("#Save").remove();//To Remove the save button
          }
       }
</script> 
```

在进一步查找萤火虫时，我可以看到响应包含脚本

```
<script>
function s() {
    var readonly="readonly";var s="hi"+ prompt("sdfs","kakaji");
    alert(s );
    if(readonly=="readonly")
       { 
       $('input[type="text"],select').attr('readonly','readonly');         
       $("#Save").remove();
       }
}
</script>
<form action="/Grid/Save" method="post"><div class="validation-summary-valid" data-valmsg-summary="true">  
<ul><li style="display:none"></li></ul>
</div>
<fieldset>
    <legend>CUSTOMER</legend>
    <table style="margin: 0px auto;">
        <tr>
            <td>
                <div class="editor-label"> 
```

但是发现生成的页面不包含我在[这里找到原因的脚本](https://stackoverflow.com/questions/5787280/does-jquery-remove-script-tags-returned-by-ajax-requests)

因此，这解决了我的问题，并给了我一个原因，即为什么我无法从 Ajax 响应中看到或观看我的脚本标签。**

# android - 如何使用多个地理点绘制路线？

> ID：12565013
> 
> 赞同：1
> 
> 时间：2012-09-24T12:25:43.847
> 
> 标签：android, google-maps

我正在为 Map 活动实现一个 android 应用程序。

我正在使用位置侦听器来获取位置更新。更新位置后，我将这些更新的纬度和经度值保存在数据库中。

我可以使用源纬度、经度和目的地纬度、经度值绘制从源到目的地的路线路径。但是一次使用数据库的多个纬度和经度值我想绘制路线路径。我正在使用我的**RoutePath.java**类来绘制**多个纬度和经度**的路线路径。使用这些纬度和经度列表我能够绘制路径，但它显示点对点直线而不显示路径路径。见下图...

![在此处输入图像描述](../Images/347538c5549ff702ed50c117a5d182ba.png)

如果您仔细观察，有些点在路线上，有些点在路线之外。再次查看下图，完全缩放...

![在此处输入图像描述](../Images/a4d713b3678c0ba27ee89f43cb70b549.png)

如果有人知道此问题的解决方案，请帮助我...

**路由路径.java：**

```
public class RoutePath extends Overlay {

    private int _pathColor;
    private final List<GeoPoint> _points;
    private boolean _drawStartEnd;

    public RoutePath(List<GeoPoint> points) {
        this(points, Color.RED, true);
    }

    public RoutePath(List<GeoPoint> points, int pathColor,
            boolean drawStartEnd) {
        _points = points;
        _pathColor = pathColor;
        _drawStartEnd = drawStartEnd;
    }

    private void drawOval(Canvas canvas, Paint paint, Point point) {
        Paint ovalPaint = new Paint(paint);
        ovalPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        ovalPaint.setStrokeWidth(2);
        int _radius = 6;
        RectF oval = new RectF(point.x - _radius, point.y - _radius, point.x
                + _radius, point.y + _radius);
        canvas.drawOval(oval, ovalPaint);
    }

    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {
        Projection projection = mapView.getProjection();
        if (shadow == false && _points != null) {
            Point startPoint = null, endPoint = null;
            Path path = new Path();
            // We are creating the path
            for (int i = 0; i < _points.size(); i++) {
                GeoPoint gPointA = _points.get(i);
                Point pointA = new Point();
                projection.toPixels(gPointA, pointA);
                if (i == 0) { // This is the start point
                    startPoint = pointA;
                    path.moveTo(pointA.x, pointA.y);
                } else {
                    if (i == _points.size() - 1)// This is the end point
                        endPoint = pointA;
                    path.lineTo(pointA.x, pointA.y);
                }
            }

            Paint paint = new Paint();
            paint.setAntiAlias(true);
            paint.setColor(_pathColor);
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeWidth(5);
            paint.setAlpha(90);
            if (getDrawStartEnd()) {
                if (startPoint != null) {
                    drawOval(canvas, paint, startPoint);
                }
                if (endPoint != null) {
                    drawOval(canvas, paint, endPoint);
                }
            }
            if (!path.isEmpty())
                canvas.drawPath(path, paint);
        }
        return super.draw(canvas, mapView, shadow, when);
    }

    public boolean getDrawStartEnd() {
        return _drawStartEnd;
    }

    public void setDrawStartEnd(boolean markStartEnd) {
        _drawStartEnd = markStartEnd;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T09:40:36.827

你得到了直线，因为 GeoPoints 只是......意味着如果你有一个完整的路线路径，那么它将根据你的 Geopoints 显示......这一切都取决于 GeoPoints。！

# c# - 复选框类型转换

> ID：12565028
> 
> 赞同：0
> 
> 时间：2012-09-24T12:26:53.410
> 
> 标签：c#, asp.net

我正在使用带有 C# 的 Visual Studio 2010。

我有一个问题，在我的一个 ascx 页面上，我创建了一个这样的复选框列：

```
<asp:TemplateField ItemStyle-HorizontalAlign="left" HeaderStyle-HorizontalAlign="Left" HeaderText="Beetald">
    <HeaderTemplate>
        <input type="checkbox" id="selectallTeachers" class="selectallTeachers" onclick="javasctipt:SelectheaderCheckboxesTeacher();" />
    </HeaderTemplate>
    <ItemTemplate>
        <input type="checkbox" id="chkPaid" class="caseTeacher" name="caseTeacher" runat="server" />
    </ItemTemplate>
</asp:TemplateField> 
```

我创建了这样的javascript：

```
<script type="text/javascript">
    // Select/Deselect checkboxes based on header checkbox
    function SelectheaderCheckboxesTeacher() {
        if ($("#selectallTeachers").val() == 'on') {
            $('.caseTeacher').attr('checked', 'checked');
            $("#selectallTeachers").val('off');
        }
        else if ($("#selectallTeachers").val() == 'off') {
            $('.caseTeacher').removeAttr("checked");
            $("#selectallTeachers").val('on');
        }

        $(".caseTeacher").click(function () {
            if ($(".caseTeacher").length == $(".caseTeacher:checked").length) {
                $("#selectallTeachers").attr("checked", "checked");
                $("#selectallTeachers").val('off');
            } else {
                $("#selectallTeachers").removeAttr("checked");
                $("#selectallTeachers").val('on');
            }
        });
    }
    // if all checkbox are selected, check the selectallTeachers checkbox
    // and viceversa   
</script> 
```

对于一个buttonclick事件，我写了这个：

```
protected void btnDeleteSelectedMessages_Click(object sender, EventArgs e)
{
    if (currentGridView == null)
        setCurrentGridView();

    //controleer voor elke rij welke checkbox is geselecteerd
    foreach (GridViewRow row in currentGridView.Rows)
    {
        CheckBox cb = (CheckBox)row.FindControl("chkPaid");
        Guid messageID = (Guid)currentGridView.DataKeys[row.DataItemIndex].Value;

        //als de checkbox is geselecteerd het bericht verwijderen
        if (cb != null && cb.Checked)
        {
            if (currentGridView.ID.Equals("Messages"))
                b.BussinesMessageReceiver.DeleteMessageReceiver(messageID, MessageBoxPerson);
            else if (currentGridView.ID.Equals("MessagesSent"))
                b.BussinesMessage.DeleteMessageSender(messageID);
            else //MessagesDeleted
                b.BussinesMessage.DeleteMessage(messageID, (Page.Server.MapPath("~/Upload/") + messageID));
            continue;
        }
    }
    btnDeleteSelectedMessages.Enabled = false;
    selectLocation.Visible = false;
    clearSelectedMessageSession();

    //Update the GridView
    BindGridView();
} 
```

它显示在线错误

```
CheckBox cb = (CheckBox)row.FindControl("chkPaid"); 
```

因为我是通过输入类型而不是直接通过复选框创建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:30:39.817

一个`input type="checkbox"`不是一个[`CheckBox`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkbox.aspx)。因此，您应该将其转换为[`HtmlInputCheckBox`](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlinputcheckbox%28v=vs.80%29.aspx)（或使用 a `CheckBox`）。

```
var cb = (HtmlInputCheckBox)row.FindControl("chkPaid"); 
```

# android - AChartEngine 的 Android 问题：在边距中设置图像

> ID：12565030
> 
> 赞同：2
> 
> 时间：2012-09-24T12:26:55.370
> 
> 标签：android, achartengine

是否可以将图像设置为背景边距？我通常使用`mRenderer.setMarginsColor(Color.argb(0x00, 0x01, 0x01, 0x01))` 但我想设置图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:35:40.367

您不能在 AChartEngine 中将图像设置为背景，因为它是开箱即用的。我认为这没有任何价值。

# java - Java 中的引用到底是什么？

> ID：12565037
> 
> 赞同：14
> 
> 时间：2012-09-24T12:27:29.713
> 
> 标签：java, reference

Java 中的引用到底是什么？是内存地址吗？Java 引用是否等同于取消引用的 C++ 指针？

换句话说，给定以下内容：

```
Object o1 = new Object();
Object o2 = new Object();

o1 == o2 
```

上述比较是否等同于比较 C++ 中的两个指针？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-24T12:30:35.717

`o1 == o2`几乎等同于比较 C/C++ 中的两个指针，是的。

但是 Java 中的引用和 C/C++ 中的指针之间有两个非常重要的区别：

*   Java 引用不能做指针运算：你不能给一个引用“加 3”，你*只能*让它指向另一个（已知的）对象
*   Java 引用是严格类型的：您不能“重新解释”位于引用另一端的内容，*除非*您将其重新解释*为该对象实际是*的类型。

还有一个关于“引用”这个词的简短说明：C++ 的引用与 C 中的指针和 Java 中的引用完全不同（但我对 C++ 的了解不够多，无法告诉你细节）。

有关此问题的详细讨论，请参阅[有关programmers.SE 的相关问题](https://softwareengineering.stackexchange.com/questions/141834/how-is-a-java-reference-different-from-a-c-pointer)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T12:31:56.527

> Java 中的引用到底是什么？

它是对象的索引。它可以被认为是一个指针，但不同之处在于它

*   可以随时更改。
*   并不总是与内存地址有直接关系。
*   在 64 位 JVM 中通常是 32 位。
*   您无法重新解释引用所指的内容。您只能更改引用本身的类型。

> 上述比较是否等同于比较 C++ 中的两个指针？

是的。

* * *

On Compresses Oops 允许 64 位 JVM 起诉 32 位引用。

[Java HotSpot™ 虚拟机性能增强 - Compressed Oops](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html#compressedOop)

[Hotspot JVM 中的压缩 oops](https://wikis.oracle.com/display/HotSpotInternals/CompressedOops)

[IBM V6 - 使用压缩引用更有效地使用堆](http://publib.boulder.ibm.com/infocenter/javasdk/v6r0/index.jsp?topic=/com.ibm.java.doc.user.lnx.60/user/garbage_compressed_refs.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-24T12:30:26.447

是的，引用基本上与指针相同。顺便说一句，如果你在一个空引用上调用一个方法，你会得到……一个 NullPointerException。

请注意，它不一定是内存地址。给定的对象可以在程序执行期间存储在其他地方，并且仍然保持相同的引用。但是你不需要关心，因为 Java 中不存在指针算法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T12:32:39.707

引用是 Java 中指向内存地址的“指针”，尽管 Java 消除了对指针的直接操作，这与 C++ 不同。Java 中的对象永远不会传递给方法或由方法返回，它始终是被传递的引用。

# grails - 单个用户的多个角色

> ID：12565041
> 
> 赞同：0
> 
> 时间：2012-09-24T12:28:00.833
> 
> 标签：grails, spring-security, roles

以下代码为单个用户添加多个角色，还应注意，这仅适用于单个会话，因为我们尝试在每次启动应用程序时定义角色和用户，以防止由此导致的任何崩溃添加对数据库的检查并创建角色和用户（如果它们不存在）。

```
import trippinspring.*

class BootStrap {

def init = { servletContext ->

  def adminRole = new SpringRole(authority: 'ROLE_ADMIN').save(flush: true)
  def userRole = new SpringRole(authority: 'ROLE_USER').save(flush: true)

  def testUser = new SpringUser(username: 'me', enabled: true, password: 'password')
  testUser.save(flush: true)

if (!testUser.authorities.contains(adminRole)) {
new SpringUserSpringRole(springUser: testUser, springRole: adminRole).save(flush: true,failOnError: true)
}

if (!testUser.authorities.contains(userRole)) {
new SpringUserSpringRole(springUser: testUser, springRole: userRole).save(flush: true,failOnError: true)
}
}
} 
```

大部分代码是对 Aram Arabyan 答案的直接引用，Ian Roberts 评论了一些修复以使用我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:41:31.030

```
 if (!testUser.authorities.contains(adminRole)) {
    new SpringUserSpringRole(user: testUser, role: adminRole).save(flush: true,failOnError: true)
  }

 if (!testUser.authorities.contains(userRole)) {
    new SpringUserSpringRole(user: testUser, role: userRole).save(flush: true,failOnError: true)
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T21:25:05.990

只是一个建议，也许您应该尝试为您的角色创建层次结构，而不是为单个用户添加两个角色： [请参阅 doc](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/14%20Hierarchical%20Roles.html)。

# html - PDF 无法在 Chrome 中下载

> ID：12565047
> 
> 赞同：4
> 
> 时间：2012-09-24T12:28:18.150
> 
> 标签：html, .htaccess, google-chrome

我已将以下页面[单击此处](http://www.fluotics.com/new/index.php/support-page)集成到表达式引擎中。如上面的链接所示，只有某些 PDF 会在 chrome 中下载，而使用 Firefox 的用户可以下载页面上的所有 PDF。我一直在搜索各种表达式引擎论坛并遵循指令，例如禁用我的 XSS 过滤器并重新上传我的所有 PDF。我也在运行这个最新版本的 EE，并且我尝试下载从超级管理员帐户注销的 PDF。

我不确定这是浏览器问题还是表达式引擎问题，以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:34:10.287

看起来您将这些作为 type 交付`application/octet-stream`。然后，您首先需要将它们作为`application/pdf`. 将此添加到您的 .htaccess 中（如果您无权访问您的 Apache 配置或无法重新加载您的 Apache 配置）：

```
AddType application/pdf .pdf 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T18:04:55.950

这显然是 chrome 的常见问题。但是，由于 chrome 是最新的 HTML5，我们可以使用闪亮的新`download`属性！

`<a href="http://www.domain.com/painful.pdf">Broken</a>`
`<a href="http://www.domain.com/painful.pdf" download="notsopainful">Works</a>`

# sql - 为什么 10/NULL 评估为空？

> ID：12565050
> 
> 赞同：4
> 
> 时间：2012-09-24T12:28:22.240
> 
> 标签：sql, rdbms

在 SQL 中，为什么 10/NULL 评估为 NULL（或未知）？例子 ：

```
if((10/NULL) is NULL)
    DBMS_OUTPUT.PUT_LINE("Null."); 
```

然而，`1 = NULL`作为一个比较被认为是错误的。不应该 10/NULL 也被视为 FALSE 吗？

我指的只是 SQL。特别不是任何 DBMS。它可能是重复的，但我不知道在搜索这个查询时要输入什么关键字。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T12:36:00.923

> *不应该将 10/NULL 也视为 FALSE 吗？*

没有为什么：

> *任何包含 null 的算术表达式的计算结果**始终为 null**。例如，null 添加到 10 为 null。事实上，当给定一个空操作数时，所有运算符（连接除外）都返回空。*

强调我的，取自 Oracle 手册：[http ://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements005.htm#i59110](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements005.htm#i59110)

这是 SQL 标准所要求的。

**编辑**，因为问题一般是针对 RDBMS 的：

## SQL 服务器

> *当 SET ANSI_NULLS 为 ON 时，具有一个或两个 NULL 表达式的运算符返回 UNKNOWN*

[链接到手册](http://msdn.microsoft.com/en-us/library/aa276846%28v=sql.80%29.aspx)：

## MySQL

> *除非特定函数或运算符的文档中另有说明，否则包含 NULL 的表达式始终生成 NULL 值*

[链接到手册](http://dev.mysql.com/doc/refman/5.5/en/functions.html)

## DB2

> *如果任一操作数可以为空，则结果可以为空，如果任一操作数为空，则结果为空值*

[链接到手册](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0000736.html)：

## PostgreSQL

不幸的是，我在 PostgreSQL 手册中找不到这样一个明确的声明，尽管我确信它的行为是一样的。

* * *

警告：*“（连接除外）”*仅是 Oracle 的非标准异常。（空字符串和 NULL 在 Oracle 中几乎相同）。连接空值在所有其他 DBMS 中给出空值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:30:27.947

1 = null 不为 null。它实际上是未知的。以及任何其他空操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T12:32:11.753

相等谓词的`1 = NULL`计算结果为 NULL。但`NULL`在布尔比较中被认为是错误的。

如果您执行类似`NOT( 1 = NULL )`,`1 = NULL`评估为`NULL`,`NOT( NULL )`评估为`NULL`等的操作，则整个条件最终评估为假。

Oracle 在其文档中有一节介绍[在比较和条件语句中处理 NULL 值](http://docs.oracle.com/cd/B10501_01/appdev.920/a96624/02_funds.htm#4107)——其他数据库将以非常相似的方式处理事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T12:39:17.227

10/something 表示您正在计算 10 中将有多少“某物”，在这种情况下，您正在计算 10 中将有多少“无” - 那是无穷大，未知.. 1 = NULL 是错误的，因为一个不等于没有

NULLIF 函数接受两个参数。如果第一个参数等于第二个参数，NULLIF 返回 Null。否则，返回第一个参数的值。NULLIF（值 1，值 2）

NVL NVL 函数接受两个参数。它返回第一个非 NULL 参数，如果所有参数都为 NULL，则返回 NULL。

还要检查这个条件结果：

这个“null 等于 UNKNOWN 真值”命题在 SQL 3VL 中引入了不一致。一个主要问题是它与 null 的基本属性（传播属性）相矛盾。根据定义，空值通过所有 SQL 表达式传播。布尔真值不具有此属性。考虑 SQL:1999 中的以下场景，其中两个布尔真值组合成一个复合谓词。根据 SQL 3VL 的规则，如本文前面所示的 3VL 真值表所示，以下语句成立：

（对或未知）→ 对

（假和未知）→假

但是，由于 null 传播，将 null 视为 UNKNOWN 会导致 SQL 3VL 中出现以下逻辑不一致：

（真或空）→空（=未知）

（假和空）→空（=未知）

SQL:1999 标准没有定义如何处理这种不一致，结果可能因实现而异。由于这些不一致和缺乏供应商的支持，SQL 布尔数据类型没有得到广泛接受。大多数 SQL DBMS 平台现在都为存储布尔类型数据提供了自己的特定于平台的建议。请注意，在 SQL 的 PostgreSQL 实现中，null 值用于表示所有 UNKNOWN 结果，并且会发生以下评估：

（真或空）→真

（假和空）→假

（假或空）是空→真

（真和空）是空→真

# google-maps - 在 Google Maps API v3 中同时使用标记和折线（包括自动居中和自动缩放）

> ID：12565051
> 
> 赞同：2
> 
> 时间：2012-09-24T12:28:24.683
> 
> 标签：google-maps, google-maps-api-3

我一直在尝试使用 Google Maps API v3 获得一个显示标记和折线加入标记的地图。由于需要向地图添加自动缩放和居中（这是有效的），代码变得复杂。

我遇到的问题是标记显示，但我显示折线的尝试失败了。我发现的例子要么做一个，要么做另一个，或者不使用自动缩放和自动居中。

我在[http://jsfiddle.net/AgZCm/2/](http://jsfiddle.net/AgZCm/2/)有一个代码示例。

我已经注释掉了我认为应该激活折线的代码。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:36:16.163

请参阅要完成的这些更改：

在循环之前声明：

`var latlngbounds = new google.maps.LatLngBounds( );`

将其包含在 for 循环中

`latlngbounds.extend( PitStops[ i ].latlng );`

这在循环之后：

`map.fitBounds( latlngbounds );`

并删除第二个 for 循环

像这样的东西：

```
var latlngbounds = new google.maps.LatLngBounds( );
for ( var i = 0; i < PitStops.length; i++ ) 
{
    new google.maps.Marker( {
        position: PitStops[ i ].latlng,
        map: map,
        title: PitStops[ i ].name
        } );
     path.push(PitStops[ i ].latlng);
     latlngbounds.extend( PitStops[ i ].latlng );
}
map.fitBounds( latlngbounds );
google.maps.event.addDomListener( window, 'load', initialize ); 
```

# php - 使用标签时的 PHP 邮件发送

> ID：12565052
> 
> 赞同：-2
> 
> 时间：2012-09-24T12:28:40.223
> 
> 标签：php, newline, sendmail

使用标签时的 PHP 邮件发送问题，它没有换行。这是我的代码有同样的问题

```
$subject = 'Watch Out Our Colorful Web Design Presentation';
$headers = "From: " . $email . " \r\n";
$headers .= "Reply-To: ". $email . "\r\n";
$headers .= "Bcc: test@test.com\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

$message = "Watch Out Our Colorful Web Design Presentation.\r\n";
$message .= "<a href='http://www.stackoverflow.com'>CLICK HERE</a>\r\n";
mail($to, $subject, $message, $headers); 
```

邮件发送成功，但在 \r\n 中出现问题。它不需要换行。我也试过 br 标签。但它进入垃圾邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:33:25.043

```
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

您正在发送 HTML 电子邮件。这意味着您应该使用 HTML 而不是换行符。为避免将您的电子邮件放入垃圾文件夹，您应该阅读[有关该主题的许多 Stackoverflow 主题中的](https://stackoverflow.com/search?q=mail%20php%20junk)一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T12:34:59.767

您必须`<br>`为新行使用标签。

您不能`\n`用于 html 打印的换行符。

[https://bugs.php.net/bug.php?id=9542](https://bugs.php.net/bug.php?id=9542)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T14:17:41.513

`<br />`正如其他人所说，如果您发送电子邮件时需要使用 HTML 换行符`Content-Type: text/html`。换行符/回车符将在消息源中被解释为换行符，但它们可能不会呈现为 HTML。

从 PHP 发送电子邮件时，我总是建议使用电子邮件类而不是 PHP 的本机邮件函数。

我倾向于使用[SwiftMailer](http://swiftmailer.org)。它的优点是所有邮件标头都经过清理和转义，以避免标头注入漏洞，这些漏洞可能会通过您的脚本引发垃圾邮件。此外，使用各种电子邮件传输更容易。还有一个很棒的装饰器插件，它可以发送数千条带有自定义字符串的消息，对于执行“亲爱的 {first_name} {surname}”或自定义取消订阅/跟踪链接等操作很有用。

这是 SwiftMailer 的一些示例代码，以防您有兴趣...

```
// START SWIFTMAILER
require_once($swiftmailer_path);
$swift_transport = Swift_SendmailTransport::newInstance($sendmail_cmd);
$swift = Swift_Mailer::newInstance($swift_transport);
$swift_msg = Swift_Message::newInstance($swift_transport);
$swift_msg->setMaxLineLength(150);
$swift_msg->setFrom( array('NoReply@domain.com' => 'MyWebsiteName'));
$swift_msg->addTo($user);
$swift_msg->setSubject($subject);
$swift_msg->setBody($msg_html, 'text/html');
$swift_msg->addPart($msg_txt, 'text/plain');

// SEND E-MAIL
if ($swift_result = $swift->send($swift_msg)) {
    // SENT SUCCESSFULLY
} else {
    // ERROR - E-MAIL NOT SENT
}
```

# vba - 确定并列出给定范围内的所有值，并在一个单元格中以逗号分隔值的形式列出

> ID：12565056
> 
> 赞同：0
> 
> 时间：2012-09-24T12:28:48.510
> 
> 标签：vba, excel, excel-2007

我正在尝试找到一种方法来列出给定年份范围内的唯一值，并将结果在一个单元格中作为逗号分隔值列出。在下面的示例中，A 列包含我拥有的数据，B 列是所需的结果。

```
A栏| B栏
2007-2010 | 2007、2008、2009、2010
1999-2001 | 1999,2000,2001
```

我正在考虑的方向是找到两个数字之间的差异，并根据差异从第一个数字填充系列。然后用逗号分隔符连接一个单元格中的值。因此，基于此，这是我目前所拥有的：

```
LR = ActiveSheet.Range("A" & Rows.Count).End(xlUp).Row
    Range("B1").Select
    ActiveCell.FormulaR1C1 = "=RIGHT(RC[-1],4)-LEFT(RC[-1],4)"
    Range("B1").Select
    Selection.AutoFill Destination:=Range("B1:B" & LR), Type:=xlFillDefault
    Range("C1").Select
    ActiveCell.FormulaR1C1 = "=LEFT(RC[-2],4)"
    Range("C1").Select
    Selection.AutoFill Destination:=Range("C1:C" & LR), Type:=xlFillDefault 
```

我不喜欢这种方法，所以请随意引导我走向不同的方向。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:57:20.370

像这样的直接VBA答案。将 rStart 更改为数据的第一个单元格：

```
Sub SplitYears()
Dim rStart As Range, lRow As Long, lYear1 As Long, lYear2 As Long

    Set rStart = Sheet3.Range("A1")
    lRow = 0

    Do While rStart.Offset(lRow, 0).Value <> ""
' Get start and end year
        lYear1 = CLng(Left(rStart.Offset(lRow, 0).Value, 4))
        lYear2 = CLng(Right(rStart.Offset(lRow, 0).Value, 4))
        With rStart.Offset(lRow, 1)
            .ClearContents
            .NumberFormat = "@"
' Append each year with comma
            Do While lYear1 <= lYear2
                .Value = .Value & lYear1 & ","
                lYear1 = lYear1 + 1
            Loop
' Lose final comma
            .Value = Left(.Value, Len(.Value) - 1)
        End With

        lRow = lRow + 1
    Loop
End Sub 
```

# jsp - 我可以使用 media='none' 隐藏显示标签中的列吗

> ID：12565060
> 
> 赞同：4
> 
> 时间：2012-09-24T12:28:56.613
> 
> 标签：jsp, displaytag

我可以使用隐藏标签中的列`media='none'`吗？由于使用显示标签另一列中隐藏列的值作为超链接的参数，是否会因此产生任何其他后果。

我成功隐藏了该列，但得到了以下结果：服务器日志中的警告

> W org.displaytag.tags.ColumnTag setMedia 属性“媒体”的值无法识别 value="none"

我尝试使用隐藏的类，但它没有锻炼，所以我继续使用媒体，因为没有，它起作用了。

* * *

```
 <table border="1"  width="100%"   align="center" cellpadding="0" cellspacing="1"    class="table_main">

<display:table name="requestScope.ITIReportForm.rprtData" id="table" export="true" sort="list" requestURI="/itireport.do"   pagesize="20" align="center"  class="table_main" width="100%">

<display:column width="5%"  align="center" media="html" titleKey="" headerClass="table_header" title="Request No">
<a href="/apeweb/homesubmit.do?method=showRequest&requestNo=<%=((ITIReportVO)table).getReqNo()%>&reqStatus=<%=((ITIReportVO)table).getStatusreq()%>&reqType=<%=((ITIReportVO)table).getTypeofrequest()%>"><%=((ITIReportVO)table).getReqNo()%></a>
</display:column>

<display:column width="5%"  align="center" class="hidden" media="Excel" title="Request No" headerClass="table_header" >
<%=((ITIReportVO)table).getReqNo()%>
</display:column>
<display:column  class="hidden" property="statusreq" title="Status" headerClass="table_header" width="16%" align="center" media ="none"/>
<display:column  class="label_text" property="typeofrequest" title="Req Type" headerClass="table_header" width="10%" align="center"/>
<display:column  class="label_text" property="cdsID" title="CDSID" headerClass="table_header" width="6%" align="center"/>
<display:column  class="label_text" property="ll6CdsID" title="LL6 CDSID" headerClass="table_header" width="6%" align="center"/>
<display:column  class="label_text" property="requestStatus" title="Request Status" headerClass="table_header" width="6%" align="center"/>
<display:column  class="label_text" property="creationDate" title="Creation Date" headerClass="table_header" width="6%" align="center"/>
<display:column  class="label_text" property="assgnITI" title="Assigned to ITI" headerClass="table_header" width="6%" align="center"/>
<display:column  class="label_text" property="assgnAsstAdm" title="Assigned to Asset Admin" headerClass="table_header" width="6%" align="center"/>
<display:column  class="label_text" property="assgnHlpDsk" title="Assigned to Help Desk" headerClass="table_header" width="6%" align="center"/>
<display:column  class="label_text" property="closdDate" title="Closed Date"  headerClass="table_header" width="6%" align="center"/>
<display:setProperty name="export.xls.filename" value="rprtData.xls"/>
<display:setProperty name="css.tr.even" value="row1" />
<display:setProperty name="css.tr.odd" value="row2" />
<display:setProperty name="paging.banner.placement" value="bottom" />
<display:setProperty name="basic.msg.empty_list"  value="No Records Found" />

 </display:table>
</table> 
```

* * *

@ alfasin ...这是我的代码...我尝试使用隐藏的类，但它没有锻炼，所以我继续使用媒体，因为没有并且它有效。

```
 <table border="1"  width="100%"   align="center" cellpadding="0" cellspacing="1"    class="table_main">

<display:table name="requestScope.ITIReportForm.rprtData" id="table" export="true" sort="list" requestURI="/itireport.do"   pagesize="20" align="center"  class="table_main" width="100%">

<display:column width="5%"  align="center" media="html" titleKey="" headerClass="table_header" title="Request No">
<a href="/apeweb/homesubmit.do?method=showRequest&requestNo=<%=((ITIReportVO)table).getReqNo()%>&reqStatus=<%=((ITIReportVO)table).getStatusreq()%>&reqType=<%=((ITIReportVO)table).getTypeofrequest()%>"><%=((ITIReportVO)table).getReqNo()%></a>
</display:column>

<display:column width="5%"  align="center" class="hidden" media="Excel" title="Request No" headerClass="table_header" >
<%=((ITIReportVO)table).getReqNo()%>
</display:column>
<display:column  class="hidden" property="statusreq" title="Status" headerClass="table_header" width="16%" align="center" media ="none"/>
<display:column  class="label_text" property="typeofrequest" title="Req Type" headerClass="table_header" width="10%" align="center"/>
<display:column  class="label_text" property="cdsID" title="CDSID" headerClass="table_header" width="6%" align="center"/>
<display:column  class="label_text" property="ll6CdsID" title="LL6 CDSID" headerClass="table_header" width="6%" align="center"/>
<display:column  class="label_text" property="requestStatus" title="Request Status" headerClass="table_header" width="6%" align="center"/>
<display:column  class="label_text" property="creationDate" title="Creation Date" headerClass="table_header" width="6%" align="center"/>
<display:column  class="label_text" property="assgnITI" title="Assigned to ITI" headerClass="table_header" width="6%" align="center"/>
<display:column  class="label_text" property="assgnAsstAdm" title="Assigned to Asset Admin" headerClass="table_header" width="6%" align="center"/>
<display:column  class="label_text" property="assgnHlpDsk" title="Assigned to Help Desk" headerClass="table_header" width="6%" align="center"/>
<display:column  class="label_text" property="closdDate" title="Closed Date"  headerClass="table_header" width="6%" align="center"/>
<display:setProperty name="export.xls.filename" value="rprtData.xls"/>
<display:setProperty name="css.tr.even" value="row1" />
<display:setProperty name="css.tr.odd" value="row2" />
<display:setProperty name="paging.banner.placement" value="bottom" />
<display:setProperty name="basic.msg.empty_list"  value="No Records Found" />

 </display:table>
</table> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-08T10:36:27.077

`media='none'`与 相同`media='abc'`。

> **将“abc”（或任何字符串）查找为 [mymedia] 的**原因****

 **你应该使用

```
<display:column property="index" title="" class="hidden" headerClass="hidden" /> 
```

并在您的`CSS`文件中。

```
.hidden {
 display: none;
} 
```**

# web-services - 基于hibernate的多实例服务集群

> ID：12565070
> 
> 赞同：1
> 
> 时间：2012-09-24T12:29:57.413
> 
> 标签：web-services, hibernate, caching, hazelcast

我已经开发了服务使用休眠与数据库对话，其实例在多个服务器上运行，而在另一端我有随机请求服务实例的 Web 应用程序。在实际运行中，由于服务实例中存在陈旧的缓存实体，我面临着问题。

是否有任何框架可以帮助我在服务中同步休眠缓存。我尝试使用 Hazelcast，但无济于事！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:38:23.980

可能这是您的解决方案：

[http://ehcache.org/documentation/user-guide/rmi-replicated-caching](http://ehcache.org/documentation/user-guide/rmi-replicated-caching)

# android - 在android中将手机号码插入和检索到数据库中

> ID：12565079
> 
> 赞同：0
> 
> 时间：2012-09-24T12:30:37.940
> 
> 标签：android, database

```
 n1 = (EditText) findViewById(R.id.num1);
    int no1 = Integer.parseInt(n1.getText().toString());
    n2 = (EditText) findViewById(R.id.num2);
    int no2 = Integer.parseInt(n2.getText().toString());
    message = (EditText) findViewById(R.id.message);
    String msg = message.getText().toString();
    settings.execSQL("CREATE TABLE IF NOT EXISTS settingtb(mob1 LONG,mob2 LONG,time VARCHAR,message VARCHAR(1000));");
    settings.execSQL("INSERT INTO settingtb VALUES('" + no1 + "','" + no2
            + "'," + time + ",'" + msg + "');"); 
```

如果 mob1，mob2 值小于 10 个值，则将数据插入数据库，如果超过 9 个值，则会出现 numberformat 异常

这是我的日志猫

```
09-24 18:16:23.594: E/AndroidRuntime(1656): FATAL EXCEPTION: main
09-24 18:16:23.594: E/AndroidRuntime(1656): java.lang.NumberFormatException: Invalid int: "7842334531"
09-24 18:16:23.594: E/AndroidRuntime(1656):     at java.lang.Integer.invalidInt(Integer.java:138)
09-24 18:16:23.594: E/AndroidRuntime(1656):     at java.lang.Integer.parse(Integer.java:378)
09-24 18:16:23.594: E/AndroidRuntime(1656):     at java.lang.Integer.parseInt(Integer.java:366)
09-24 18:16:23.594: E/AndroidRuntime(1656):     at java.lang.Integer.parseInt(Integer.java:332)
09-24 18:16:23.594: E/AndroidRuntime(1656):     at com.example.esha.settings.calltable(settings.java:87)
09-24 18:16:23.594: E/AndroidRuntime(1656):     at com.example.esha.settings$1.onClick(settings.java:76)
09-24 18:16:23.594: E/AndroidRuntime(1656):     at android.view.View.performClick(View.java:4084)
09-24 18:16:23.594: E/AndroidRuntime(1656):     at android.view.View$PerformClick.run(View.java:16966)
09-24 18:16:23.594: E/AndroidRuntime(1656):     at android.os.Handler.handleCallback(Handler.java:615)
09-24 18:16:23.594: E/AndroidRuntime(1656):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-24 18:16:23.594: E/AndroidRuntime(1656):     at android.os.Looper.loop(Looper.java:137)
09-24 18:16:23.594: E/AndroidRuntime(1656):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-24 18:16:23.594: E/AndroidRuntime(1656):     at java.lang.reflect.Method.invokeNative(Native Method)
09-24 18:16:23.594: E/AndroidRuntime(1656):     at java.lang.reflect.Method.invoke(Method.java:511)
09-24 18:16:23.594: E/AndroidRuntime(1656):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-24 18:16:23.594: E/AndroidRuntime(1656):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-24 18:16:23.594: E/AndroidRuntime(1656):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:45:19.370

您需要将这个整数变量更改为 long ，如下所示，

```
long no2 = Long.parseLong(n2.getText().toString().trim()); 
```

您以错误的方式插入值，您在 mob1 和 mob2 字段中插入字符串值，将其转换为数字，如下所示，

```
settings.execSQL("INSERT INTO settingtb VALUES(" + no1 + "," + no2
            + "," + time + ",'" + msg + "');"); 
```

`'`插入数值时无需添加。

同样，当您获取值时，您做错了，您正在访问整数变量中的所有内容??? 按如下方式更改，

```
c.moveToFirst();  
     if(c!=null)
     {
      do{
        long c1 = c.getColumnIndex("mob1");
        long c2 = c.getColumnIndex("mob2");
        String c3 = c.getColumnIndex("time");
        String c4 = c.getColumnIndex("message");

        s1 = c.getString(c1);
        s2 = c.getString(c2);
        s3 = c.getString(c3);
        s4 = c.getString(c4); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:33:49.797

非常简单..实际上只需使用 Double 数据类型而不是 long

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:34:07.367

您的异常是否出现在这一行：“s3 = Integer.parseInt(c.getString(c3));”？

您可能超出了**int**范围：-2,147,483,648 到 2,147,483,647。尝试使用**long**来存储电话号码。

**编辑**：

替换这一行：

```
s3 = Integer.parseInt(c.getString(c3)); 
```

有了这个：

```
long s3Long = Integer.parseInt(c.getString(c3)); 
```

# java - 在没有 ConcurrentModificationException 的情况下处理 List 上的并发修改

> ID：12565087
> 
> 赞同：1
> 
> 时间：2012-09-24T12:31:08.010
> 
> 标签：java, list, java.util.concurrent

我有一个有状态的 EJB，它调用 Web 解析页面的 EJB 无状态方法。

这是我的有状态代码：

```
@Override
public void parse() {
    while(true) {
        if(false == _activeMode) {
            break;
        }
        for(String url : _urls){
            if(false == _activeMode) {
                break;
            }
            for(String prioritaryUrl : _prioritaryUrls) {
                if(false == _activeMode)
                    break;
                boursoramaStateless.parseUrl(prioritaryUrl);
            }

            boursoramaStateless.parseUrl(url);
        }
    }
} 
```

这里没问题。

我有一些异步调用（使用 JMS）添加到我的 _urls 变量（列表）中一些值。目标是在我的无限循环中解析新的 url。

当我尝试通过 JMS onMessage 方法在我的列表中添加新 url 时收到 ConcurrentModificationException 但它似乎正在工作，因为这个新 url 已被解析。

当我尝试包装同步块时：

```
while(true){
    synchronized(_url){
        // code...
    }
} 
```

我的新网址永远不会被解析，我希望在 for() 循环完成后被解析......

所以我的问题是：在没有 ConcurrentModificationException 的情况下，如何在循环内访问 List 时修改它？

我只想让 2 个线程在没有同步块的情况下同时修改一些共享资源......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:37:24.107

你可能想要一个[`CopyOnWriteArrayList`](http://docs.oracle.com/javase/6/docs/api/index.html?java/util/concurrent/CopyOnWriteArrayList.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:43:07.737

首先，忘记`synchronized`运行 Java EE 容器的时间。它困扰容器以优化线程利用率，并且在集群环境中不起作用。

其次，您的设计似乎是错误的。您不应该使用 JMS 更新 bean 的私有字段。这件事造成`ConcurrentModificationException`。您可能应该修改 bean 以从数据库中检索集合，并修改您的 MDB 以将 URL 存储到数据库中。

其他对您来说更容易的解决方案如下。检索当前存在的 URL 并将它们复制到其他集合。然后遍历这个集合。当全局集合通过 JMS 更新时，更新在复制的集合中不可见，因此不会抛出异常：

```
while(true) {
    for (String url : copyUrls(_prioritaryUrls)) {
       // deal with url
    }
}

private List<String> copyUrls(List<Stirng> urls) {
    return new ArrayList<String>(urls); // this create copy of the source list
}

//........
public void onMessage(Message message) {
    _prioritaryUrls.add(((TextMessage)message).getText());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:54:20.227

`For (String s : urls)`在内部使用迭代器。迭代器检查并发修改，以便明确定义其行为。

您可以使用`for(int i= ...`循环。这样，不会引发异常，并且如果仅将元素添加到列表的末尾，您仍然可以获得一致的快照（列表在迭代期间的某个时间存在）。如果列表中的元素被移动，您可能会丢失条目。

如果要使用`synchronised`，则需要在两端同步，但那样会丢失并发读取。

如果您想要并发访问和一致的快照，您可以使用[`java.util.concurrent`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/package-summary.html)包中的任何集合。 `CopyOnWriteArrayList`已经提到过。其他有趣的是`LinkedBlockingQueue`and `ArrayBlockingQueue`( `Collection`s but not `List`s) 但仅此而已。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T13:14:54.647

好的，谢谢你们。

所以我做了一些修改。

1) 添加迭代器并离开同步块（在 parse() 函数内部和 addUrl() 函数周围，它将新 url 添加到我的列表）-> 它的工作就像一个魅力，没有 ConcurrentModificationException 启动

2) 添加迭代器并移除同步块 --> ConcurrentModificationException 仍在启动...

现在，我将阅读有关您的答案的更多信息并测试您的解决方案。

再次感谢你们

# python - python: win32print.AddPrinter: 将打印机添加到远程计算机

> ID：12565088
> 
> 赞同：2
> 
> 时间：2012-09-24T12:31:10.863
> 
> 标签：python, winapi

我收到错误

```
pywintypes.error: (1801, 'AddPrinter', 'The printer name is invalid.') 
```

我的意图是将网络打印机添加到最终用户计算机...这是我的定义

```
import win32print

def AddPrinter(computer, printer):
    pHandle = win32print.OpenPrinter(printer) #int
    print "%s = %s"%(printer, pHandle)

    pInfo = win32print.GetPrinter(pHandle,2) #dict
    print pInfo

    win32print.ClosePrinter(pHandle)    

    win32print.AddPrinter(computer, 2, pInfo)

if __name__=='__main__':
    computer = 'remote-pc'
    printer = r'\\printserver\printer1'
    AddPrinter(computer, printer) 
```

这是怎么回事...它必须是一个有效的打印机名称，因为它成功地拉动了手柄并给了我它想要的 pInfo 字典...令人沮丧...我不想制作任何批处理文件！

感谢您提供的任何帮助。

追溯：

```
 \\cheops1\4EPrint1 = <PyPrinterHANDLE:4704604>
    {'Status': 0, 'UntilTime': 0, 'pDriverName': 'HP Universal Printing PCL 5 (v5.0)', 'cJobs': 0, 'pSepFile': '', 'AveragePPM': 0, 'pPortName': 'IP_10.10.185.5', 'pParameters': '', 'pPrintProcessor': 'hpcpp091', 'Attributes': 8728, 'Priority': 1, 'pPrinterName': '\\\\cheops1\\4EPRINT1', 'DefaultPriority': 0, 'StartTime': 0, 'pDatatype': 'RAW', 'pDevMode': <PyDEVMODEA object at 0x01B92958>, 'pLocation': '10.10.185.5', 'pShareName': '4EPRINT1', 'pServerName': '\\\\cheops1', 'pSecurityDescriptor': <PySECURITY_DESCRIPTOR object at 0x01C74560>, 'pComment': 'Rm 4053, 4E Main Desk Laser, Laserjet 4100 MFP, LNWID - 711096'}
    Traceback (most recent call last):
        File "D:\workspace\Clinical Applications\EPIC\EPIC_Values.py", line 183, in <module>
            AddPrinter(computer, printer)
        File "D:\workspace\Clinical Applications\EPIC\EPIC_Values.py", line 161, in AddPrinter
            win32print.AddPrinter(computer, 2, pInfo)
    pywintypes.error: (1801, 'AddPrinter', 'The printer name is invalid.') 
```

# magento-1.6 - 添加新用户并管理他的角色

> ID：12565091
> 
> 赞同：0
> 
> 时间：2012-09-24T12:31:22.420
> 
> 标签：magento-1.6

如果我想添加访问 Magneto 的新用户，我如何授予他们访问某些菜单的权限，例如 Catalog 、 system ...等，而他们没有访问其他人，我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:33:11.087

I had solved this issue from System > permission > users , role and I followed all steps and solved my issue

# networking - 如果必须不填写服务器 ID，客户端如何单播 RENEW DHCP 请求？

> ID：12565095
> 
> 赞同：2
> 
> 时间：2012-09-24T12:31:37.603
> 
> 标签：networking, network-programming, dhcp

当客户端尝试更新它的租用时间时，如果根据[RFC2131 4.3.2 不得填写服务器 ID，它如何单播到服务器](http://www.freesoft.org/CIE/RFC/2131/24.htm)

" RENEWING 状态下生成的 DHCPREQUEST：'server identifier' 不得填写，'requested IP address' 选项不得填写，'ciaddr' 必须填写客户端的 IP 地址。在这种情况下，客户端已完全配置, 并且正在尝试延长其租期。此消息将是单播的，因此在其传输过程中不会涉及中继代理。因为没有填写 'giaddr'，所以 DHCP 服务器将信任 'ciaddr' 中的值，并使用它在回复客户时。

客户可以选择在 T1 之前更新或延长其租约。服务器可以选择不延长租约（作为网络管理员的策略决定），但无论如何都应该返回 DHCPACK 消息。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:54:16.240

`siaddr`，“服务器标识符”字段，位于 DHCP 消息中，使用 UDP 发送出去，在 IP 标头中有自己的目标 IP 地址字段，因此客户端将更新数据包单播到服务器的已知 IP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-10T19:13:02.460

即使不能设置“服务器标识符”，客户端也可以通过单播发送更新 DHCP 请求消息，因为发送数据包不需要“服务器标识符”。当使用单播发送数据包时，您只需要指定目标 IP 地址，在这种情况下，DHCP 服务器的 IP 地址和此信息客户端从初始化阶段就知道。

“Server Identifier”实际上是一个选项54，“DHCP Option 54 - DHCP Server Identifier”用于选择DHCP服务器，以防多个DHCP服务器在初始化阶段以DHCP OFFER消息响应DHCP DISCOPVER消息。这就是为什么必须在 SELECTING 阶段指定它，但它不是必需的，或者实际上不能在 RENEWING 和 REBINDING 阶段设置，因为客户端已经知道它选择了哪个 DHCP 服务器。

“服务器标识符”不是 DHCP 消息的“siaddr”字段。“Siaddr”不是选项之一，而是仅由DHCP Server填写的DHCP报文中的一个标准字段。“服务器标识符”和“siaddr”都具有 DHCP 服务器的 IP 地址值，我相信这一事实使您认为它们用于发送 DHCP 消息。但是，它们在发送和转发数据包期间不使用，仅使用 IP 标头内的目标 IP 地址。

“Server Identifier”和“siaddr”实际上都是用来找出DHCP服务器的IP地址，然后通过单播将DHCP请求消息直接发送到DHCP服务器。

# iis - 使用 IIS URL 重写添加 url 段

> ID：12565097
> 
> 赞同：2
> 
> 时间：2012-09-24T12:31:42.547
> 
> 标签：iis, url-rewriting, web-config

是否可以使用 url 重写在 url 中添加一个段，例如：添加版本号

例如，原始输入 url 应该类似于：`http://host.com/**v2**/categories/5`并且我希望将其重写为`http://host.com/categories/5`

我们有一个额外的重写规则将 .svc 段添加到 url，所以 web.config 重写部分看起来像这样：

```
<rewrite>
      <rules>
        <rule name="Remove version segment from the Url" stopProcessing="false">
          <match url="^v2(.*)$" />
          <action type="Rewrite" url="{R:0}" appendQueryString="true" />
        </rule>
        <rule name="Add ServiceHost.svc to the Url" stopProcessing="false">
          <match url="^(.*)$" />
          <action type="Rewrite" url="ServiceHost.svc/{R:0}" appendQueryString="true" />
        </rule>
      </rules>
    </rewrite> 
```

# python - Python：如何检查字符串是否是有效的 IRI？

> ID：12565098
> 
> 赞同：14
> 
> 时间：2012-09-24T12:31:42.360
> 
> 标签：python, url, python-2.7, urlparse

是否有检查[IRI](http://en.wikipedia.org/wiki/Internationalized_Resource_Identifier)的标准功能，以检查我可以使用的 URL：

```
parts = urlparse.urlsplit(url)  
    if not parts.scheme or not parts.netloc:  
        '''apparently not an url''' 
```

我使用包含 Unicode 字符的 URL 尝试了上述操作：

```
import urlparse
url = "http://fdasdf.fdsfîășîs.fss/ăîăî"
parts = urlparse.urlsplit(url)
if not parts.scheme or not parts.netloc:  
    print "not an url"
else:
    print "yes an url" 
```

我得到的是`yes an url`。这是否意味着我可以很好地测试有效的 IRI？还有其他方法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-24T12:46:49.833

使用`urlparse`不足以测试有效的 IRI。

请改用该[`rfc3987`软件包](http://pypi.python.org/pypi/rfc3987)：

```
from rfc3987 import parse

parse('http://fdasdf.fdsfîășîs.fss/ăîăî', rule='IRI') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:41:03.390

[urlparse 实现中](http://hg.python.org/cpython/file/2.7/Lib/urlparse.py)唯一对字符集敏感的代码要求该方案应仅包含 ASCII 字母、数字和 [+-.] 字符；否则它是完全不可知的，因此可以很好地处理非 ASCII 字符。

由于这是[未记录的行为](http://docs.python.org/library/urlparse.html)，因此您有责任检查它是否继续存在（在您的项目中进行测试），但我不认为它会被更改以破坏 IRI。

urllib 提供了[引用函数](http://docs.python.org/library/urllib.html?highlight=urllib#utility-functions)来将 IRI 转换为/从 ASCII URI，尽管它们仍然没有在文档中明确提及 IRI，并且在某些情况下它们被破坏了：[Is there a unicode-ready alternative I can use for urllib.quote and urllib .unquote 在 Python 2.6.5 中？](https://stackoverflow.com/questions/5557849/is-there-a-unicode-ready-substitute-i-can-use-for-urllib-quote-and-urllib-unquot)

# ios - iOS 6 中自动布局的动态大小

> ID：12565101
> 
> 赞同：3
> 
> 时间：2012-09-24T12:32:03.530
> 
> 标签：ios, autolayout

我想要一个视图，其大小（在本例中为高度）取决于屏幕大小，以用一个 xib 覆盖 iPhone4/iPhone6 的屏幕。所以可以说我拿了一个 ListView 并且我不想让它全屏显示，但我在上面和下面有固定的空间。那么它的高度应该是：

```
screen_height - (space_above + space_below) 
```

在 Interface Builder 中，我可以设置两个垂直空间约束，然后甚至删除 ListView 的高度约束，因此它的高度由父视图和这两个空间约束确定。

在模拟指标中设置 Freeform 后，我可以拖动以更改根视图的大小并查看约束是否正常工作（ListView 正确调整大小）。

**问题：**

但是，如果我在模拟器中运行该应用程序，那么一切都将固定在 Interface Builder 中的最后一个位置。我错过了什么阻止布局根据其约束工作？

如果我将模拟指标更改为 Retina 3.5 或 4，Xcode 会删除我的约束并返回到固定大小的约束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:56:13.997

你想要这个吗？

![自动布局纵向](../Images/9017eff0aab10613143aac715d42634a.png)

![自动布局景观](../Images/f859b3cd0bb467cd47686d423f7a371f.png)

如果是，则放大图像并从那里遵循约束。当您使用自动布局时，它太有趣了，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:07:18.327

问题是根视图（其他假设）不占用屏幕大小。

也许不是最好的解决方案：

`[self.view setFrame:CGRectMake(0, 0, [UIScreen mainScreen].bounds.size.width, [UIScreen mainScreen].bounds.size.height)];`

但它使视图具有正确的大小并让约束起作用。

# jquery - 添加和删 除类适用于空白链接，但不适用于页面链接

> ID：12565102
> 
> 赞同：0
> 
> 时间：2012-09-24T12:32:03.107
> 
> 标签：jquery

我真的是 jquery 的菜鸟，但我几乎不遗余力地通过阅读由 Stackoverflow 有价值的用户创建的旧帖子来解决它。我的问题是我尝试添加类 onclick 事件。它仅在我将超链接链接设置为空白（＃）时才起作用，`<a href="#">test</a>`但如果我将超链接状态设置为`<a href="product.php"`然后它会删除并添加类一段时间，并且在当前页面打开后，它会自动删除活动类并将其设置为以前的. :(我的js代码..

```
$('ul#menu li a').click(function() {
    $('ul#menu li a').removeClass('active');
    $(this).toggleClass('active');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:22:14.563

您面临的问题是加载 example.com/product.php 后，**活动**类不会保留在相应的锚标记中，因为加载时 javascript 不会将状态旧页面带到新页面。你可以通过两种方式做到这一点

1.  您可以禁用页面加载并留在同一页面。

    ```
    $('ul#menu li a').click(function(e) {
        e.preventDefault();//this will stop the current event which is your page load
        $('ul#menu li a.active').removeClass('active');//this will remove the active class from only a tag having active as class
        $(this).toggleClass('active');
    }); 
    ```

2.  页面加载后找出您所在的页面并为相应的 a 标签设置活动类

    ```
    (function($){
         //highlight the current tab
         var l = window.location.pathname,
         str = l.slice(l.lastIndexOf('/')+1,l.length);

        $('ul#menu li a.active').removeClass('active');//remove active from home page link
        $('#menu').find('a[href="'+str+'"]').addClass('active');
    })(jQuery); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:18:33.447

这对我有用。

```
var url = window.location.href;
  url = url.substr(url.lastIndexOf("/") + 1);
  $("#menu").find("a[href='" + url + "']").addClass("active"); 
```

只需将脚本包含到每个页面，它就会添加`active`类以反映当前位置。无需切换任何东西。

我**猜**为什么您的代码不起作用：您单击一个链接，一切可能都有效，除了链接指向不同的页面并且您的 jQuery 函数被“重新加载”并且不再单击任何内容。如果您正在尝试实施一页网站，请参见例如：

*   [http://www.queness.com/post/328/a-simple-ajax-driven-website-with-jqueryphp](http://www.queness.com/post/328/a-simple-ajax-driven-website-with-jqueryphp)
*   [http://cmpolis.github.com/Pagify/#about](http://cmpolis.github.com/Pagify/#about)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:36:42.373

尝试单独使用以下，并删除`$('ul#menu li a').removeClass('active');`

```
$('ul#menu li a').click(function(){
    $(this).toggleClass('active');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T12:37:02.607

你应该只使用`$(this).toggle('active')`，你不需要前面的语句

# android - 登录应用后谷歌地图无法使用

> ID：12565105
> 
> 赞同：0
> 
> 时间：2012-09-24T12:32:08.257
> 
> 标签：android, android-maps, google-play, android-keystore

我构建并签署了我的 android 应用程序。现在我在 google play 上发布，但是当我在 google play 上安装时，google maps 不起作用。我读了一些关于这个问题的文章，但我没有解决它。

签约后能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:34:57.383

我不知道这是否仍然是一个问题。但是对于不同的密钥库，您需要不同的 API 密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:41:05.820

我遇到了同样的问题，但使用的是 Facebook。您必须使用您的密钥库发布密钥对您的应用程序进行签名，因为您的先前密钥是一个调试密钥，并且在发布应用程序后它不起作用。

# python - django - 允许用户在数据库中设置一些东西

> ID：12565109
> 
> 赞同：0
> 
> 时间：2012-09-24T12:32:19.193
> 
> 标签：python, mysql, database, django, model

我想让用户通过单击国家标志来更改网站的语言。

在我的 models.py 文件中，我有：

```
class RegularUser(models.Model):
    (...)
    language = models.CharField(max_length = 10, null=True, blank=True, choices=[(a, _(b)) for (a,b) in settings.LANGUAGES], verbose_name=_("Language")) 
```

我还在那里做了一个功能：

```
def set_language(self, new_lang):
    lllang = self.language
    lllang = new_lang 
```

在我的 html 文件中，我有：

```
function setLang(lang){
  language = document.getElementById("language")
  lang_form = document.getElementById("language_form")
  language.value= lang
  lang_form.submit()          
  {{request.user.get_profile.set_language(lang) }}                      
} 
```

此功能设置为某个按钮为“onclick”。
这应该做两件事：
1.立即更改语言（已完成）
2.更改数据库中的uset语言，所以下次我们登录时 - 它将是我们现在设置的（它不起作用:( ) 我收到这样的错误：

```
 TemplateSyntaxError at /

   Could not parse the remainder: '("lang")' from 'request.user.get_profile.set_language("lang")' 
```

只是告诉 - 如果我会说：

```
 {{request.user.get_profile.get_language}} 
```

然后我得到我的语言的代码，所以没关系。来自 models.py 的 get_language 函数：

```
def get_language(self):
    if self.language:
        return self.language
    elif self.location and self.location.country:
        return self.location.country.iso.lower()[:2]
    else:
        return None 
```

嗯……有什么帮助吗？我只是以错误的方式给出“lang”，还是我在 Django 中没有得到任何东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:38:55.177

在 Django 模板中，您不能调用带有参数的 Python 函数。请参阅[https://docs.djangoproject.com/en/1.4/topics/templates/#variables](https://docs.djangoproject.com/en/1.4/topics/templates/#variables)。这就是为什么您在编写时没有收到错误消息的原因`{{request.user.get_profile.get_language}}`（实际上，您的函数是在没有参数的情况下调用的，并且产生的异常被 Django 吞没了）。

此外，您不能`lang`在服务器端的 Python 函数中使用作为客户端 JavaScript 函数参数的参数。尝试使用 AJAX 调用该函数 - 您需要为此添加另一个视图函数，我强烈建议您不要使用纯 JavaScript，而是使用 jQuery 之类的库。

对于您的实际问题（让用户设置他的首选语言），[Django 的国际化包](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/)中已经[有一个功能](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#the-set-language-redirect-view)。

# java - 我无法通过 Java 中的套接字发送对象

> ID：12565110
> 
> 赞同：0
> 
> 时间：2012-09-24T12:32:24.027
> 
> 标签：java, sockets, bytearray, objectoutputstream, objectinputstream

我有这个问题，我无法弄清楚什么是错的。我在整个互联网上进行了搜索，但没有成功。

所以，我必须通过 Java 中的套接字发送一个对象，但我不知道该怎么做。我尝试了很多方法。我序列化了对象，我尝试直接写对象。但似乎没有任何效果。

细节是我有一个并行运行的聊天。有时当我打开 ObjectOutputStream 或 ObjectInputStream 时，我会陷入死锁。我想你们可以帮助我。

这是一个客户端连接到服务器的刽子手游戏，服务器应该向客户端发送一个随机单词，这是一个对象。

服务器：

```
 try{
            socketConexao = socketRecepcao.accept();

    toClient = new DataOutputStream(socketConexao.getOutputStream());
    fromClient = new BufferedReader(new InputStreamReader(socketConexao.getInputStream()));

            //starts the chat
    Thread chat = new Thread(this);
    chat.start();

    }catch(IOException e){}

           //i dont really know how to send the object

    try{
        byte[] bytes = serialize(palavraSorteada);
        toClient.write(bytes);
    } catch (IOException e){
        e.printStackTrace();
    } 
```

客户：

```
 socketCliente = new Socket(ip, port);

    toServer = new DataOutputStream(socketCliente.getOutputStream());
    fromServer = new BufferedReader(new InputStreamReader(socketCliente.getInputStream()));

            // starts the chat
    Thread chat = new Thread(this);
    chat.start();

    }catch(IOException e){System.exit (0);}

            // and dont really know how to receive the object

    try{
        ObjectInputStream os = new ObjectInputStream(socket.getInputStream());
        palavraSorteada = (Palavra) os.readObject();
        os.close();
    }catch(Exception e){
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:46:03.170

这里的问题应该很明显（根据您的描述）：您使用*一个*通信渠道发送*两种*不同类型的数据。由于接收端无法预测它会收到什么，您需要添加信息接下来会发生什么，因此接收端知道该做什么。

并且可能没有人会费心去弄清楚你的代码片段到底在做什么，将绒毛减少到你想要询问的内容，或者甚至更好地制作一个可以证明问题的*一类*可复制和可粘贴的可运行示例（尽可能短）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:46:03.417

In Server, split class Server in Server (accepts connections) and ServerConnection (separate thread). Place variables toClient and fromClient into ServerConnection. Now you spoil that variables when new client connects.

In Client, no need to start new Thread.

# java - 由于添加函数导致的 Java 堆空间错误

> ID：12565111
> 
> 赞同：2
> 
> 时间：2012-09-24T12:32:27.197
> 
> 标签：java, jsf, tomcat, jsf-2

每当我从 xhtml 页面调用 getFriendList 函数时，我都会遇到异常。该页面继续加载，然后我停止浏览器。我得到了给定的堆栈跟踪。它告诉我第 78 行有一个错误`friends.add(friend);`。我认为我的语法有问题。如果有人指出错误会很有帮助。

1）这是我的 FriendBean，它是请求范围的。

```
package com.bean;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import javax.faces.context.FacesContext;
import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;
import javax.persistence.Query;
import javax.servlet.http.HttpSession;
import com.entity.Friend;
import com.entity.User;

public class FriendBean {

    Friend friend;
    private EntityManager em;
    public FriendBean(){
        friend = new Friend();
        EntityManagerFactory emf=Persistence.createEntityManagerFactory("FreeBird");
         em =emf.createEntityManager();
    }
    public Friend getFriend() {
        return friend;
    }
    public void setFriend(Friend friend) {
        this.friend = friend;
    }
    public List<Friend> getFriendRequestList(){
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext().getSession(true);
        User user=(User) session.getAttribute("userdet");
        Query query = em.createQuery("SELECT f FROM Friend f WHERE f.email='"+user.getEmail()+"' AND f.status=0",Friend.class);
          List<Friend> results =query.getResultList();
          return results;

    }
    public String friendAccept(String friendRequestId){

        System.out.println("friend accept called...");
        Friend f=em.find(Friend.class,Integer.parseInt(friendRequestId));
        f.setStatus(1);
        em.getTransaction().begin();
        em.persist(f);
        em.getTransaction().commit();
        Friend viceversa=new Friend();
        viceversa.setEmail(f.getFriendEmail());
        viceversa.setFriendEmail(f.getEmail());
        viceversa.setStatus(1);
        em.getTransaction().begin();
        em.persist(viceversa);
        em.getTransaction().commit();
        return "success";

    }
    public String friendReject(String friendRequestId){
        System.out.println("friend reject called..");
        Friend f = em.find(Friend.class,Integer.parseInt(friendRequestId));
        em.getTransaction().begin();
        em.remove(f);
        em.getTransaction().commit();
        return "success";
    }
    public List<User> getFriendList(){

        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext().getSession(true);
        User user=(User) session.getAttribute("userdet");
        Query query = em.createQuery("SELECT f FROM Friend f WHERE f.email='"+user.getEmail()+"' AND f.status=1",Friend.class);
         List<Friend> results =query.getResultList();
         ArrayList<User> friends = new ArrayList<User>();

         while(results.listIterator().hasNext()){
             User friend =em.find(User.class,results.listIterator().next().getFriendEmail());
             friends.add(friend);
         }
          return friends;

    }
} 
```

2）这是我得到的例外。

```
SEVERE: Error Rendering View[/Home.xhtml]
javax.el.ELException: /Home.xhtml @146,59 value="#{friendBean.friendList}": java.lang.OutOfMemoryError: Java heap space
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:114)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIData.getValue(UIData.java:731)
    at javax.faces.component.UIData.getDataModel(UIData.java:1798)
    at javax.faces.component.UIData.setRowIndexWithoutRowStatePreserved(UIData.java:484)
    at javax.faces.component.UIData.setRowIndex(UIData.java:473)
    at com.sun.faces.renderkit.html_basic.TableRenderer.encodeBegin(TableRenderer.java:81)
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:820)
    at javax.faces.component.UIData.encodeBegin(UIData.java:1118)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1755)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2245)
    at java.util.Arrays.copyOf(Arrays.java:2219)
    at java.util.ArrayList.grow(ArrayList.java:213)
    at java.util.ArrayList.ensureCapacityInternal(ArrayList.java:187)
    at java.util.ArrayList.add(ArrayList.java:411)
    at com.bean.FriendBean.getFriendList(FriendBean.java:78)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:363)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:138)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:183)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIData.getValue(UIData.java:731)
    at javax.faces.component.UIData.getDataModel(UIData.java:1798)
    at javax.faces.component.UIData.setRowIndexWithoutRowStatePreserved(UIData.java:484)
    at javax.faces.component.UIData.setRowIndex(UIData.java:473)
    at com.sun.faces.renderkit.html_basic.TableRenderer.encodeBegin(TableRenderer.java:81)
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:820)
    at javax.faces.component.UIData.encodeBegin(UIData.java:1118)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1755)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)

WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2245)
    at java.util.Arrays.copyOf(Arrays.java:2219)
    at java.util.ArrayList.grow(ArrayList.java:213)
    at java.util.ArrayList.ensureCapacityInternal(ArrayList.java:187)
    at java.util.ArrayList.add(ArrayList.java:411)
    at com.bean.FriendBean.getFriendList(FriendBean.java:78)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:363)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:138)
    at com.sun.el.parser.AstValue.getValue(AstValue.java:183)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:224)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182)
    at javax.faces.component.UIData.getValue(UIData.java:731)
    at javax.faces.component.UIData.getDataModel(UIData.java:1798)
    at javax.faces.component.UIData.setRowIndexWithoutRowStatePreserved(UIData.java:484)
    at javax.faces.component.UIData.setRowIndex(UIData.java:473)
    at com.sun.faces.renderkit.html_basic.TableRenderer.encodeBegin(TableRenderer.java:81)
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:820)
    at javax.faces.component.UIData.encodeBegin(UIData.java:1118)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1755)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1760)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:402)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T13:36:33.827

您显然遇到了一个问题，即您的 Tomcat 服务器实例没有为 JVM 堆空间分配足够的内存。当分配的堆空间被完全消耗时，将抛出 OutOfMemoryError。

您可以通过 Tomcat Windows 应用程序分配更多，也可以在 catalina.bat 或 catalina.sh 中设置

例子：

> 设置 CATALINA_OPTS=-Xms512m -Xmx512m

# c++ - 如何破解 C++ 接受函数？

> ID：12565112
> 
> 赞同：6
> 
> 时间：2012-09-24T12:32:28.993
> 
> 标签：c++, sockets

在进行套接字编程时，使用多线程，

如果线程在接受函数上被阻塞，

并且主线程正在尝试关闭该进程，

如何打破接受功能以安全地 pthread_join？

我对如何通过将自身连接到自己的端口以破坏接受功能来做到这一点的记忆模糊。

任何解决方案将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:21:54.237

一些选择：

a) 使用非阻塞

b) 使用 AcceptEx() 等待额外的信号，(Windows)

c) 关闭来自另一个线程的侦听套接字以使 Accept() 返回错误/异常。

d) 从另一个线程打开一个临时本地连接以使 Accept() 与临时连接一起返回

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:36:52.787

根据您的系统，如果可用，我将使用一个`select`函数来等待服务器套接字进行读取，表明套接字正在尝试连接。可以将等待连接的时间量设置/调整为每次您想要等待客户端连接的时间（无穷大，到秒，到 0，这将只是检查并返回）。需要检查返回状态以查看是否已达到时间限制（没有套接字正在尝试连接），或者是否有东西等待服务（您的服务器套接字表明有一个客户端想要连接）。`accept`然后，您可以根据返回的状态 执行知道有一个要连接的套接字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T12:45:17.840

典型的方法是**不**使用`accept()`，除非有什么可以接受的！做到这一点的方法是`poll()`在一个循环中使用适当的超时时间到相应的套接字。循环检查是否因为设置了适当的同步标志而退出。

另一种方法是向阻塞线程发送信号，例如，使用`pthread_kill()`. `accept()`这会通过适当的错误指示摆脱阻塞。同样，下一步是检查一些标志以查看线程是否要退出。不过，我的偏好是第一种方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-14T21:28:26.237

如果可用，我会在循环中使用带有超时的**选择**函数来实现此功能。

**正如格伦建议的那样**

具有超时值的 select 函数将等待套接字连接一段时间。如果套接字尝试连接，则可以在此期间接受它。通过使用超时循环此选择，可以检查新连接，直到满足中断条件。

这是一个例子：

```
std::atomic<bool> stopThread;
void theThread ( std::atomic<bool> & quit )
{
    struct timeval tv;
    int activity;
    ...
    while(!quit) 
    {
        // reset the time value for select timeout
        tv.tv_sec = 0;
        tv.tv_usec = 1000000;
        ...

        //wait for an activity on one of the sockets
        activity = select( max_sd + 1 , &readfds , NULL , NULL , &tv);

        if ((activity < 0) && (errno!=EINTR)) 
        {
            printf("select error");
        }

        if (FD_ISSET(master_socket, &readfds)) 
        {
            if ((new_socket = accept(master_socket, (struct sockaddr *)&address, (socklen_t*)&addrlen))<0)
            {
                perror("accept");
                exit(EXIT_FAILURE);
            }
       ...
    }
}

int main(int argc, char** argv)
{
...
stopThread = false;
std::thread foo(theThread, std::ref(stopThread));
...    

stopThread = true;
foo.join();
return 0; 
```

}

一个更完整的“选择”示例[http://www.binarytides.com](http://www.binarytides.com/multiple-socket-connections-fdset-select-linux/)

我对 C++ 很陌生，所以我确信我的代码和答案可以改进。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T12:34:51.920

听起来您正在寻找的是这样的：您设置了一个特殊的标志变量，该变量对于侦听/接受套接字是已知的，然后让主线程打开与侦听/接受套接字的连接。监听/接受套接字/线程每次接受连接时都必须检查标志，以便知道何时关闭。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-24T12:51:19.240

通常，如果您想进行多线程网络，您将在建立连接（或准备建立连接）后生成一个线程。如果你想降低开销，线程池并不难实现。

# javascript - 为什么要在 _.each 循环重新加载循环上获取集合？

> ID：12565127
> 
> 赞同：0
> 
> 时间：2012-09-24T12:33:56.433
> 
> 标签：javascript, backbone.js, underscore.js

我在咖啡脚本中有这段代码：

```
render: (collectionName)=>
  console.log "I am rendering"
  @buildBreadcrumb(collectionName) 

buildBreadcrumb: (collectionName) ->
  i=0
  _.each @urlParts, (url_part) =>
      i++
      console.log('value of i : ',i)
      collection = @getCollection(collectionName)
      if (collection.length == 0)
        collection.fetch({
          success: (collection) =>
            @render()
        })
      else
        @appendBreadcrumb() 
```

而且我不明白为什么有时我的输出为：

```
I am rendering 
value of i : 1
value of i : 2
value of i : 3
/* STRANGE START HERE */
value of i : 2
value of i : 3 
```

如果我在获取成功时删除 @render()，这个问题就会消失。就像 _each 循环又开始了……**但是为什么呢？**

如果我将@render 放在“完成”回调上，一切正常。

```
render: (route)=>
  console.log "I am rendering"
  @buildBreadcrumb() 

buildBreadcrumb: ->
  i=0
  _.each @urlParts, (url_part) =>
      i++
      console.log('value of i : ',i)
      collection = Proscale.Collections.getCollection(collectionName)
      collection.fetch({
        complete: (collection) =>
          @render()
      }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:50:08.727

试试这个，

```
render: ()=>
  console.log "I am rendering"
  @buildBreadcrumb(collectionName) 

buildBreadcrumb: (collectionName) ->
  i=0
  _.each @urlParts, (url_part) =>
      i++
      console.log('value of i : ',i)
      collection = @getCollection(collectionName)
      collection.fetch({
        success: (collection) =>
          @doSomething(collection)
      })

doSomething : (collection) -> 
```

# mysql - MySQL 服务器作为从服务器启动

> ID：12565131
> 
> 赞同：0
> 
> 时间：2012-09-24T12:34:09.923
> 
> 标签：mysql, replication, database-replication

我可以在 MySQL 服务器作为从属服务器启动时使用它进行复制吗？我可以更新和删除数据库中的行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:11:13.630

是的你可以。您可以更新、删除、更改表和许多其他事情。但是，如果您的复制不是 master-master，您的更改不会同步回来。

# c# - 失去焦点并更新源

> ID：12565134
> 
> 赞同：0
> 
> 时间：2012-09-24T12:34:23.077
> 
> 标签：c#, wpf, mvvm, focus

我有一个 MainView 和一个 ChildView 以及一个 MainViewModel 和一个 ChildViewModel。

在我的 MainView 上，我有一个 SaveButton，它通过命令绑定到 VM。

单击该按钮时，ChildView 上的文本框应失去焦点并更新其 VM。

我怎样才能做到这一点？

```
 <DataGridTemplateColumn  Header="FOR [percent]" Width="*" >
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Knowles_ShiftreportEditor_Controls:NumberTextbox  Text="{Binding ForValue, Mode=TwoWay, UpdateSourceTrigger=LostFocus}" AllowsDecimal="True"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:49:53.587

我对按钮 IsDefault=true 或 Keybinding 有同样的问题。我所做的是在我的 app.xaml.cs OnStartup() 中注册一个事件处理程序

```
 protected override void OnStartup(StartupEventArgs e)
    {
        EventManager.RegisterClassHandler(
            typeof(Button), 
            ButtonBase.ClickEvent, 
            new RoutedEventHandler(
                (sender, args) =>
                    {
                        if (sender != null && sender is Button)
                        {
                            (sender as Button).Focus();
                        }
                    }));

     } 
```

现在焦点设置在按钮上，文本框绑定按预期工作。

# c# - 使用代码生成对简单的有限状态机进行单元测试有多有效/危险？

> ID：12565137
> 
> 赞同：1
> 
> 时间：2012-09-24T12:34:30.517
> 
> 标签：c#, .net, unit-testing, code-generation

在当前的一个项目中，我正在与一个坚持认为代码生成对单元测试有害的客户打交道。他们团队中的一些技术/评估人员是非常有经验的开发人员，所以这让我感到惊讶。如此之多，以至于在看到他们的个人资料后，我正在就一个我不会质疑的主题（即自动化）征求社区意见。

标题是指用于创建单元测试的代码生成。根据场景，可以在不同程度上做到这一点。我自己编写了这个特定的库，并认为它在分支、复杂性、可维护性等方面非常简单。下面列出了一个摘要来说明这一点。

有问题的库是一个通用的有限状态机，它使用两个枚举来确定可能的`states`和`commands`. 命令用于指定抽象事务，而明确的任意状态也可以在没有命令的情况下请求，只要它是合法的。状态示例包括 Processing、Cancelled、WaitingForUserInput 等。命令示例包括 WakeUp、Sleep、StartProcessing 等。

声明如下：

```
// Both [TState] and [TCommand] will ALWAYS be enumerations.
public abstract class StateMachineBase<TState, TCommand>: IDisposable
{
    public delegate void DelegateStart (StateMachineBase<TState, TCommand> sender, EventArgs e);
    public delegate void DelegateStop (StateMachineBase<TState, TCommand> sender, EventArgs e);
    public delegate void DelegateTransitionRequest (StateMachineBase<TState, TCommand> sender, TransitionRequestEventArgs<TState, TCommand> e);
    public delegate void DelegateTransitionComplete (StateMachineBase<TState, TCommand> sender, TransitionCompletedEventArgs<TState, TCommand> e);

    public event DelegateStart OnStart = null;
    public event DelegateStop OnStop = null;
    public event DelegateTransitionRequest OnTransitionRequest = null;
    public event DelegateTransitionComplete OnTransitionComplete = null;

    private readonly object _SyncRoot = new object(); // Thread safety.
    public bool Running { get; private set; }
    public TState State { get; private set; }
    private TCommand Command { get; set; }
    private List<Transition<TState, TCommand>> AllowedTransitions { get; set; }

    // Will not work if the machine is running.
    protected void AddTransition (TState from, TState to, TCommand command) { ... }
    public void Start () { ... }
    public void Stop () { ... }
    public bool CanTransit (TState state) { ... }
    public bool CanTransit (TCommand command) { ... }
    public bool Request (TState state) { ... }
    public bool Request (TCommand command) { ... }
} 
```

我确实意识到在某些情况下，使用代码生成可能会破坏编写单元测试的目的，但我相信许多开发人员确实在特定场景中使用它。我想，如果我自己编写了库，我应该能够正确地进行单元测试，无论是手动还是反射。

问题是，在这种情况下使用代码生成是否明智？如果没有，我会忽略哪些意外后果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T03:09:48.923

我非常坚信代码生成对于创建测试套件基础设施是有意义的，但对业务逻辑却不是。基础设施（您在上面的示例中有一个示例）必须以某种方式实现，但是应该由人（最好是知道自己在做什么的人）来决定测试用例的数量，测试的目的每个测试用例最后执行测试用例逻辑。

我会和你的同事谈谈，了解他们对不可协商的基础设施代码和测试用例作者的东西之间的分歧的看法。您应该能够通过使用前者的代码生成和手动编码后者来销售它们。

# php - 新域的 Magento 多站点 404 问题

> ID：12565138
> 
> 赞同：1
> 
> 时间：2012-09-24T12:34:32.407
> 
> 标签：php, magento

我试图设置新域`Magento Multisite`

我已经在`.htaccees`和/或管理方面创建了修改我还创建了商店/网站和查看我还创建了根类别

但它显示 `404 not found`错误页面

虽然我尝试[访​​问 http://kutchibandhani.com/](http://kutchibandhani.com/)任何解决方案

我的 .htaccess 代码如下

```
SetEnvIf Host www\.kutchibandhani\.com MAGE_RUN_CODE=bandhani
SetEnvIf Host www\.kutchibandhani\.com MAGE_RUN_TYPE=bandhani
SetEnvIf Host ^kutchibandhani\.com MAGE_RUN_CODE=bandhani
SetEnvIf Host ^kutchibandhani\.com MAGE_RUN_TYPE=bandhani 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T05:20:00.870

[Magento Wiki](http://www.magentocommerce.com/wiki/4_-_themes_and_template_customization/navigation/multiple-website-setup)描述了如何在 Magento 中使用多个网站。对于 .htaccess 一个可能的解决方案是

```
SetEnvIf Host .*site.* MAGE_RUN_CODE=example
SetEnvIf Host .*site.* MAGE_RUN_TYPE=website # 'website' or 'store' 
```

用 .htaccess 文件中的 'MAGE_RUN_TYPE=website' 或 'MAGE_RUN_TYPE=store' 替换类型 'MAGE_RUN_TYPE=bandhani'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T10:14:15.793

1.MAGE_RUN_TYPE= 应该是网站或商店。

2.MAGE_RUN_CODE = "base" 或某个值，例如 "german"

在您的 index.php for store 中，您要检查这些值并检查它们是否正确。

# javascript - 请求来自 JavaScript 时限制对 Web 服务器 IP 的访问

> ID：12565152
> 
> 赞同：1
> 
> 时间：2012-09-24T12:35:17.803
> 
> 标签：javascript, security, jquery-mobile, iis-6, ip-address

我的应用程序具有以下架构：

jQueryMobile web 应用程序 --> 获取 JSON ---> 用 C# 创建的 REST API

我已将 REST API 代码放在 IIS 6 中的虚拟目录中。移动站点代码在网站的根目录中运行……所以大致的文件结构是这样的：

```
网吧/

    /index.html
    我的javascript.js

    /restapi/
      网络配置
      全球.asax
      bin/(一堆 Dlls...)

```

服务器位于具有以下 IP 转换（不是真实 IP...）的网络后面，例如：

```
Web 服务器外部 IP：121.131.141.50（带有 URL http://mysite.com/）
内部IP：10.210.2.5
子网：255.255.255.0

```

我尝试`restapi`通过 IP 限制对文件夹的访问，因为我希望它只能从 Web 服务器访问。我尝试了 IIS 方法并设置了目录安全设置，还尝试了使用`ServiceAuthorizationManager`类检查 Http 请求中的请求 IP 的方法。
两种方法都给了我相同的结果：通过 Fiddler 限制和测试实际服务调用没有问题，以证明除了 Web 服务器 IP：10.210.2.5 之外的任何 IP 都会抛出 401。我还能够从网络服务器执行它（这是所需的设置）。

但是，一旦移动网站 javascript 调用它，我就会得到未经授权的 401。由于 Javascript 代码是客户端，restapi 假定调用来自客户端的 IP 地址，这当然是被阻止的。

有没有一种简洁的方法来检查调用是否来自 JavaScript 所在的 IP？

还是有更好的方法来处理整个事情？！:-/ 有没有办法让 web 应用程序特别允许访问`restapi`虚拟目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:59:54.113

回到基础，您的设置如下所示：

```
client    <---->    web server
           HTTP 
```

Web 服务器托管客户端可以通过 HTTP 协议从外部请求的文件。Web 服务器也是您过滤传入请求的地方：

```
client    <---->    | web server
           HTTP     |
                 IP filter 
```

如果您说您希望 REST 服务只能“在同一台服务器上”访问，这意味着：

```
client    <---->    web server
           HTTP     ^    |
                    |    |
                    +----+
                     REST 
```

但是，如果服务器只是与自己对话，那么您实际上并不需要一个成熟的 REST 接口。我猜您的实际意思是从服务器下载 HTML 和 Javascript 的客户端可能会通过 REST 从服务器请求其他数据。

```
client    <---->    web server
           HTTP

          <-------
        HTML, JS files

       -------->
           AJAX 
```

但正如您所见，它的工作方式是客户端从服务器下载 Javascript 文件并在本地执行该 Javascript，然后将 AJAX 请求发送回服务器。请求将始终来自客户端。他们必须。发出这些请求的 Javascript 代码最初来自哪里并不重要。它可以是来自您的服务器的脚本，也可以是用户手动输入的。AJAX 请求是 HTTP 请求，与其他任何 HTTP 请求一样。无论您是否使您的 REST 服务可以从外部访问，您都无法通过生成请求的代码进行过滤。

如果您想让 API 不公开，则需要进行身份验证，以便只有注册用户才能访问它。不过，这并没有降低 API 本身的可公开访问性。

# iphone - 支持 iOS 6 和 armv6

> ID：12565157
> 
> 赞同：4
> 
> 时间：2012-09-24T12:35:57.710
> 
> 标签：iphone, objective-c, ios6

我正在为 iOS6 构建我的应用程序，并且我想支持 armv6，所以我在架构和有效架构中添加了 armv6。现在应用程序在**apple llvm 4.1**上构建时出现很多错误，但它在**llvm gcc 4.2**上编译。当我使用 llvm gcc 4.2 构建一个 Adhoc 应用程序时，它不会安装在 iphone 3GS 和 ipod 3G 上。

* * *

这是可能的，因为**kenji**[在接受的答案](https://stackoverflow.com/questions/12619124/how-to-support-both-armv6-and-armv7s-for-release-build-in-xcode-4-5/12836808#12836808)中给出了一个链接

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T12:38:56.150

Xcode 4.5 删除了对构建 armv6 二进制文件的支持。

您不能只将 armv6 添加到构建设置中，因为不存在构建它的支持。

**编辑添加**

由于在评论中要求 - 对此的确认来自[Xcode 4.5 发行说明](http://developer.apple.com/library/ios/#releasenotes/DeveloperTools/RN-Xcode/_index.html)

![在此处输入图像描述](../Images/3a95cc6904b12e5b58b1674952fe85ec.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T21:59:28.880

我在 4.4.1 中有同样的错误信息。通过将部署目标从 4.0 更改为 4.3 并从架构中删除 armv6 解决了问题。

# design-patterns - 用于在不同“类型”之间转换值列表的模式

> ID：12565161
> 
> 赞同：2
> 
> 时间：2012-09-24T12:36:13.963
> 
> 标签：design-patterns

我正在制作一个能够在某些类型的数据（坐标点）之间进行转换的程序。我用户输入他们正在输入的数据类型、他们想要的数据类型和点列表。所以，我必须遍历列表来解析和验证数据。然后进行适当的转换。

目前我有 4 种可能接受的类型（将来可能会添加更多），每种类型的坐标点都有其代表类，但不是每个类都可以转换为另一个类，有时需要做一些额外的事情。此外，任何数据都可以转换为任何其他类型。

目前，我只有一堆条件语句来实现、解析、验证和转换。我想以一种高效和模块化的方式来实现这一点，这样我将来就可以轻松地添加更多的转换类型。我只是认为拥有一堆条件语句不是一种模块化的方式，所以我正在寻找一种设计模式或方法来组织我的代码，以便将来易于修改。任何帮助都深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:42:10.777

检查[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)。简而言之，您将拥有一个公共接口，许多类（每种数据格式一个）将实现该接口。当用户选择其中一种类型时，您可以查找它（例如在字典中）并实例化正确的类来处理数据。

# sqlalchemy - 返回导致递归的乘法属性

> ID：12565163
> 
> 赞同：1
> 
> 时间：2012-09-24T12:36:22.313
> 
> 标签：sqlalchemy

我有以下情况：

```
class MyClass (object):
    @property
    def _value(self):
        return self.value * 5

mapper(MyClass, myTableMetadata, properties = {
    "value": synonym("_value", map_column=False)
}) 
```

我完全知道为什么这会导致递归，但是有没有办法从类中`self.value`显式访问属性，而不是通过映射器？

# sql - 如何通过 SQL xp_CMDShell 执行 SVN 更新命令

> ID：12565164
> 
> 赞同：0
> 
> 时间：2012-09-24T12:36:24.853
> 
> 标签：sql, svn, xp-cmdshell

我已经在我的机器上安装了 Tortoise SVN，我想使用 SVN UPDATE 命令用 SVN 更新我的本地副本。我正在使用 SQL 脚本

```
 EXEC master..xp_CMDShell 'svn update D:\SVN_WorkingFolder' 
```

此脚本未执行。我可以知道我在哪里工作吗？

提前谢谢你们。库玛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:32:08.857

由于访问网络的权限不足，脚本执行过程将无法完成。我们不会收到任何错误消息或输出重定向。

授予权限的步骤：服务--> SQLServer2005--> 属性--> 登录--> 此帐户--> 提供本地用户凭据。现在重新启动 SQL 服务器，然后执行上面的 SVN 更新命令它会工作。即使我们可以执行批处理文件来完成这项工作。

# multithreading - 在 Google Appengine 中启用线程安全有哪些相关问题？

> ID：12565172
> 
> 赞同：2
> 
> 时间：2012-09-24T12:36:53.857
> 
> 标签：multithreading, google-app-engine, thread-safety

这将是一个自我回答的问题，但我认为这样一个特定的问题（和答案）可能对其他人有用......

使用 appengine-web.xml 中的元素在 Google App Engine (GAE/J) 中启用多线程相关的潜在问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:38:16.477

我已经为我正在进行的一个项目查看了这个，并且我在这里写下了我在分析中发现的内容：http: [//devcon5.blogspot.com](http://devcon5.blogspot.com)

我非常感谢我应该涵盖的任何评论或其他问题。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:54:55.743

需要提到的一件重要的事情是，在实例的加载请求期间，其他线程不会处理其他请求。只有在第一个请求完全完成后，实例才会进入多线程模式。这在部署后加载初始实例时尤其明显（或在所有实例在没有空闲实例的情况下死亡）。

这将影响使用 URLFetch 调用同一应用程序中的其他 servlet 的应用程序。第一个请求将首先尝试调用同一个实例，但该实例尚未处理该调用。超时后，调度程序将启动第二个实例，然后处理请求。（延迟之上的延迟......）

# java - Java：如何使用 Java 的 Jsoup 库提取 HTML 文件中图像的链接

> ID：12565173
> 
> 赞同：0
> 
> 时间：2012-09-24T12:36:53.997
> 
> 标签：java, image, jsoup

我有一个 HTML 文件，我想使用 Jsoup 读取并将结果导出到 Excel 工作表。在这个过程中，我想提取 HTML 文件中存在的所有图像的链接（src）。

这是我用来做同样事情的代码片段：

```
File myhtml = new File("D:\\Projects\\Java\\report.html");
            //get the string from the file myhtml
            String str = getFileString(myhtml);

            //getting the links to the images as in the html file
            Document doc = Jsoup.parseBodyFragment(str);
            Elements media = doc.select("[src]");

            //System.out.println(media.size());
            for(Element imageLink:media)
            {

                if(imageLink.tagName().equals("img"))
                    //storing the local link to image as global variable in imlink
                    P1.imlink = imageLink.attr("src").toString();
System.out.println(P1.imlink);
            }

        } 
```

我想要链接的 HTML 文件中有两个图像。但是，我编写的代码仅显示文件中存在的第一个图像的链接。请帮我找出我的代码中的错误！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:45:17.903

```
 //Dom ex............

  import org.w3c.tidy.*;

  import java.io.*;

  import java.net.*;

  import org.w3c.dom.*;

  import java.util.*;

  public class demo

  {

  public static void main(String arg[])

  {

  try

  {

  InputStream input = new URL("http://www.southreels.com").openStream();

  Document document = new Tidy().parseDOM(input, null);

  NodeList imgs = document.getElementsByTagName("img");

  List<String> srcs = new ArrayList<String>();

  for (int i = 0; i < imgs.getLength(); i++) {

  srcs.add(imgs.item(i).getAttributes().getNamedItem("src").getNodeValue());

  }

  int i=0;

  for (String src: srcs) {

  System.out.println(i+"  "+src);

  i++;

  String file =System.getProperty("user.dir")+System.getProperty("file.separator");

  URL server = new URL(src);

  HttpURLConnection connection = (HttpURLConnection)server.openConnection();

  InputStream is = connection.getInputStream();

   OutputStream os = new FileOutputStream(file+"demo"+i+".jpg");

   byte[] buffer = new byte[1024];

  int byteReaded = is.read(buffer);

  while(byteReaded != -1)

  {

  os.write(buffer,0,byteReaded);

  byteReaded = is.read(buffer);

  }

   os.close();

  }

  }

   catch(Exception e)

  {

  }

  }

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:20:20.690

在这里试试这个：

```
File f = new File("D:\\Projects\\Java\\report.html");

Document doc = Jsoup.parse(f, null, ""); // set proper Charset (2nd param) and BaseUri (3rd param) here
Elements elements = doc.select("img[src]");

for( Element element : elements )
{
    // Do something with your links here ...
    System.out.println(element.attr("src"));
} 
```

顺便提一句。也许您的问题是将链接存储到全局变量中的部分。每次运行循环时都会覆盖它。更好的解决方案是将链接存储到列表中或在第一次点击后离开循环。

# jquery-ui - 如何在jqGrid中实现自定义分组

> ID：12565174
> 
> 赞同：1
> 
> 时间：2012-09-24T12:36:55.383
> 
> 标签：jquery-ui, jqgrid, jqgrid-asp.net, jqgrid-formatter

我是 jqGrid 的初学者，我为实现分组编写此代码

```
$(function () {
            var mydata = [
                          { id: "11", invdate: "2007-10-01", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00" },
                          { id: "12", invdate: "2007-10-02", name: "test2", note: "note2", amount: "300.00", tax: "20.00", total: "320.00" },
                          { id: "13", invdate: "2007-09-01", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" },
                          { id: "14", invdate: "2007-10-04", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00" },
                          { id: "15", invdate: "2007-10-05", name: "test2", note: "note2", amount: "300.00", tax: "20.00", total: "320.00" },
                          { id: "16", invdate: "2007-09-06", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" },
                          { id: "17", invdate: "2007-10-04", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00" }, 
                          { id: "18", invdate: "2007-10-03", name: "test2", note: "note2", amount: "300.00", tax: "20.00", total: "320.00" },
                          { id: "19", invdate: "2007-09-01", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" },
                          { id: "21", invdate: "2007-10-01", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00" },
                          { id: "22", invdate: "2007-10-02", name: "test2", note: "note2", amount: "300.00", tax: "20.00", total: "320.00" },
                          { id: "23", invdate: "2007-09-01", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" }, 
                          { id: "24", invdate: "2007-10-04", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00" },
                          { id: "25", invdate: "2007-10-05", name: "test2", note: "note2", amount: "300.00", tax: "20.00", total: "320.00" },
                          { id: "26", invdate: "2007-09-06", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00" },
                          { id: "27", invdate: "2007-10-04", name: "test", note: "note", amount: "200.00", tax: "10.00", total: "210.00" },
                          { id: "28", invdate: "2007-10-03", name: "test2", note: "note2", amount: "300.00", tax: "20.00", total: "320.00" },
                          { id: "29", invdate: "2007-09-01", name: "test3", note: "note3", amount: "400.00", tax: "30.00", total: "430.00"}];
            jQuery("#list48").jqGrid({
                data: mydata,
                datatype: "local",
                height: 'auto',
                rowNum: 30,
                rowList: [10, 20, 30],
                colNames: ['Inv No', 'Date', 'Client', 'Amount', 'Tax', 'Total', 'Notes'],
                colModel: [
                    { name: 'id', index: 'id', width: 60, sorttype: "int" },
                    { name: 'invdate', index: 'invdate', width: 90, sorttype: "date", formatter: "date" },
                    { name: 'name', index: 'name', width: 100, editable: true },
                    { name: 'amount', index: 'amount', width: 80, align: "right", sorttype: "float", formatter: "number", editable: true },
                    { name: 'tax', index: 'tax', width: 80, align: "right", sorttype: "float", editable: true },
                    { name: 'total', index: 'total', width: 80, align: "right", sorttype: "float" },
                    { name: 'note', index: 'note', width: 150, sortable: false}],
                pager: "#plist48",
                viewrecords: true,
                sortname: 'name',
                grouping: true,
                groupingView: { groupField: ['name'] },
                caption: "Grouping Array Data" });

        }); 
```

并创建这个网格 ![在此处输入图像描述](../Images/0f2ee6988d692a6316f78e8fb9f4fe2c.png)

我想设置 Grouping Dynamicaly.Such 用户拖动标题列并在该网格 Grop 之后的顶部框中放置这样的图片 ![在此处输入图像描述](../Images/bc29af4d9461d660debec0390f454f52.png) 请帮助我实现这个 senaryo。谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T12:01:42.963

在 jqGrid 方面，您需要使用`groupingRemove`和`groupingGroupBy`方法来更改分组动态，您可以在[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3agrouping)中阅读更多关于它们的信息。

对于 UI 部分，您应该查看以下交互：

*   [可拖动](http://jqueryui.com/demos/draggable/)
*   [可丢弃](http://jqueryui.com/demos/droppable/)
*   [可排序](http://jqueryui.com/demos/sortable/)

**Droppable**中的*购物车*示例应该可以很好地概述如何处理该主题。

 **现在，在了解了所有理论信息之后，我在 jsFiddle 上为您创建了一个示例：[jqGrid 动态拖放分组](http://jsfiddle.net/tpeczek/vRtKS/)。它需要一些样式才能完全符合您的要求，但它应该能让您了解所有内部结构。如果您需要对代码进行一些评论，请告诉我 - 我可以稍后添加。**

# ios6 - iOS 6 横向和纵 向

> ID：12565188
> 
> 赞同：4
> 
> 时间：2012-09-24T12:37:52.073
> 
> 标签：ios6, device-orientation, xcode4.5

我有一张表，其中包含来自 plist 文件的大量内容，单击它们中的每一个都会将您带到一个新视图，即 xib。

我在那个 .xib 中有 2 个视图，一个用于纵向，一个用于横向

在我的 h 文件中，我有这个：

```
IBOutlet UIView *portraitView;  
IBOutlet UIView *landscapeView;

@property (nonatomic, retain) IBOutlet UIView *portraitView;  
@property (nonatomic, retain) IBOutlet UIView *landscapeView; 
```

在我的 m 文件中：

```
[super viewDidLoad];  
    // Do any additional setup after loading the view from its nib.

    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:) name:@"UIDeviceOrientationDidChangeNotification" object:nil];

}

- (void) orientationChanged:(id)object
{
    UIInterfaceOrientation interfaceOrientation = [[object object] orientation];

if (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)  
    {  
        self.view = self.portraitView;  
    }  
    else
    {  
        self.view = self.landscapeView;  
    }  
}

- (void)viewDidUnload
{

    [super viewDidUnload];  
    // Release any retained subviews of the main view.  
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation   
{  
    if (UIInterfaceOrientationIsPortrait(interfaceOrientation)) {  

       self.view = portraitView;
    } else if (UIInterfaceOrientationIsLandscape(interfaceOrientation)) {

       self.view = landscapeView;  
    }  
    return YES;

}

@end 
```

一切都在 iOS 5 中完美运行，在需要时显示横向或纵向。

现在随着 iOS 6 的更新，一切都变得一团糟。

如果我在表格（纵向）视图中并单击一个项目，它以纵向显示正确，如果我旋转到横向，该视图也显示正确的视图，但在横向，如果我回到表格并选择另一个项目，它显示纵向视图而不是横向视图。

如果我做同样的事情但开始横向，它会显示纵向。

所以，现在方向对任何事情都不起作用。

我使用故事板的其他视图也是如此。它们是纵向的并且总是这样显示，现在它们旋转、缩小所有内容并将我的应用程序作为垃圾。

1-我怎样才能修复.xib方向的东西？
2-如何修复故事板方向？（它们是静态的，现在一切都在旋转（根本没有代码））

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-09T12:07:08.220

我想我有一个解决办法。它很丑，但它正在工作......对于 iOS6，Apple 现在建议使用 2 个不同的 XIB 文件在纵向和横向视图之间切换。

但是，如果您想通过在 2 个 UIView IBOutlet 之间“切换”来使用 iOS 5.0 中允许的先前方法，您可以尝试我的丑陋工作解决方案。这个想法是根据方向旋转视图。

1）在您的viewDidLoad中，订阅方向通知：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:) name:@"UIDeviceOrientationDidChangeNotification" object:nil];
 } 
```

2）添加通知调用的方法：

```
-(void)orientationChanged:(NSNotification *)object{
    NSLog(@"orientation change");
    UIDeviceOrientation deviceOrientation = [[object object] orientation];
    if(deviceOrientation == UIInterfaceOrientationPortrait || deviceOrientation == UIInterfaceOrientationPortraitUpsideDown){
        self.view = self.potraitView;
        if(deviceOrientation ==UIInterfaceOrientationPortraitUpsideDown){
            NSLog(@"Changed Orientation To PortraitUpsideDown");
            [self portraitUpsideDownOrientation];
        }else{
            NSLog(@"Changed Orientation To Portrait");
            [self portraitOrientation];
        }
    }else{
        self.view = self.landscapeView;
        if(deviceOrientation ==UIInterfaceOrientationLandscapeLeft){
            NSLog(@"Changed Orientation To Landscape left");
            [self landscapeLeftOrientation];
        }else{
            NSLog(@"Changed Orientation To Landscape right");
            [self landscapeRightOrientation];
        }

    }
} 
```

3）最后，为每个方向添加旋转方法：

```
-(void)landscapeLeftOrientation{

    // Rotates the view.
    CGAffineTransform transform = CGAffineTransformMakeRotation(-(3.14159/2));
    self.view.transform = transform;
    // Repositions and resizes the view.
    CGRect contentRect = CGRectMake(0, 0, 480, 320);
    self.view.bounds = contentRect;
}
-(void)landscapeRightOrientation{

    // Rotates the view.
    CGAffineTransform transform = CGAffineTransformMakeRotation(3.14159/2);
    self.view.transform = transform;
    // Repositions and resizes the view.
    CGRect contentRect = CGRectMake(0, 0, 480, 320);
    self.view.bounds = contentRect;
}
-(void)portraitOrientation{

    // Rotates the view.
    CGAffineTransform transform = CGAffineTransformMakeRotation(0);
    self.view.transform = transform;
    // Repositions and resizes the view.
    CGRect contentRect = CGRectMake(0, 0, 320, 480);
    self.view.bounds = contentRect;
}
-(void)portraitUpsideDownOrientation{

    // Rotates the view.
    CGAffineTransform transform = CGAffineTransformMakeRotation(3.14159);
    self.view.transform = transform;
    // Repositions and resizes the view.
    CGRect contentRect = CGRectMake(0, 0, 320, 480);
    self.view.bounds = contentRect;
} 
```

我建议您制作一个自定义 UIViewController 类并从该类继承以节省冗余代码。如果你想同时支持 ios5 和 ios6 的解决方案，你可以使用 #endif 宏在你的控制器中包含这两个代码。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T09:46:08.963

无需发送和接收通知：

在您的 appdelegate.m 中，使用以下方法

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window 
```

总是调用来检查窗口的方向，所以一个简单的方法是在你的 appdelegate.m 中有下面描述的代码

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{

    NSUInteger orientations = UIInterfaceOrientationMaskPortrait;

    if(self.window.rootViewController){
        UIViewController *presentedViewController ;
        if ([self.window.rootViewController isKindOfClass:([UINavigationController class])])
        {
            presentedViewController = [[(UINavigationController *)self.window.rootViewController viewControllers] lastObject];
        }
        else if ([self.window.rootViewController isKindOfClass:[UITabBarController class]]){
            UITabBarController *controller = (UITabBarController*)self.window.rootViewController;

            id selectedController =  [controller presentedViewController];

            if (!selectedController) {
                selectedController = [controller selectedViewController];
            }

                if ([selectedController isKindOfClass:([UINavigationController class])])
                {
                    presentedViewController = [[(UINavigationController *)selectedController viewControllers] lastObject];
                }
                else{
                    presentedViewController = selectedController;
                }
        }
        else
        {
            presentedViewController = self.window.rootViewController;
        }

        if ([presentedViewController respondsToSelector:@selector(supportedInterfaceOrientations)]) {
            orientations = [presentedViewController supportedInterfaceOrientations];
        }
    }

    return orientations;
} 
```

并实施

```
- (NSUInteger)supportedInterfaceOrientations 
```

在各自的视图控制器中

```
- (NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskPortrait; //Or anyother orientation of your choice
} 
```

并针对方向变化执行突然动作，请执行以下方法

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T10:10:52.413

答案已经很晚了，但我仍然认为我应该与您分享以防万一，

我有同样的问题。

**shouldAutorotateToInterfaceOrientation**从 iOS 6 开始被弃用。

您需要将此方法与新的**supportedInterfaceOrientations**和**shouldAutorotate**方法并行。

这非常重要，您需要确保在应用程序委托的**applicationDidFinishLaunching**方法中设置**根控制器，****而不是简单地将视图控制器的视图**（或导航控制器或 tabBar 控制器，取决于您使用的内容）**作为子视图添加到窗户。**

# browser - 在网络上部署 javafx

> ID：12565189
> 
> 赞同：0
> 
> 时间：2012-09-24T12:37:52.420
> 
> 标签：browser, deployment, web, embed, javafx

我想为我的团队构建一组工具，它们将作为 JavaFX 应用程序的一部分，在 SCENE BUILDER 的帮助下为其构建 GUI。我已经看到了所有可用的东西，但是我需要一个示例，如何将这种类型的应用程序嵌入到可以以某种方式调用它的服务器上。请帮助提供示例和链接。我想让它看起来像这个。[http://download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html](http://download.oracle.com/otndocs/products/javafx/2.2/samples/Ensemble/index.html)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:49:48.743

将 NetBeans JavaFX 项目构建或[JavaFX 打包工具部署命令](http://docs.oracle.com/javafx/2/deployment/jfxpub-deployment.htm)输出的 jar、jnlp 和 html 文件的副本放置到 Web 服务器的目录中，然后在浏览器中访问 html 文件。

例如，假设您调用了应用程序 MyPowerApp 并且 netbeans 输出 MyPowerApp.html，并且您希望将其部署到本地 Tomcat 服务器：

1.  下载并安装[Tomcat 的副本](http://tomcat.apache.org/download-70.cgi)
2.  将jar、jnlp和html文件复制到tomcat的webapps/ROOT目录下。
3.  启动tomcat。
4.  通过访问您的应用`http://localhost:8080/MyPowerApp.html` 程序小程序将自动启动，您可以单击链接通过 WebStart 启动应用程序。

要更新应用程序，只需在 NetBeans 中重建它，将其复制到 tomcat webapps/ROOT 目录并刷新浏览器链接（无需重新启动 Tomcat）。

在实践中，您将希望修改 html 而不是使用生成的 html 将 applet 或 WebStart 链接嵌入您网站的某处（您不需要像 Netbeans 生成的示例那样在单个页面中同时使用两种执行模式）。

如果您的应用程序需要 jnlp 应用程序沙箱之外的权限，您可能需要对其进行[签名。](http://docs.oracle.com/javafx/2/deployment/packaging.htm#BABJGFBH)

要让应用程序填充像 Ensemble 这样的浏览器窗口，需要将其高度和宽度设置为 100%，并且将 HTML 页面模板修改为没有任何页边距（查看 Ensemble 页面上的源代码以获取示例）。

您可以将 fxml 包含在您的应用程序 jar 中并从那里加载它，或者您可以相对于您的应用程序部署目录将其从服务器加载。

[上面的信息是我关于将 JavaFX Web 应用程序部署到服务器](http://docs.oracle.com/javafx/2/deployment/packaging.htm#BABJGFBH)的论坛答案的变体。

有关更多信息，请参阅 JavaFX 部署指南和 Ensemble 示例应用程序源。

*   [部署指南](http://docs.oracle.com/javafx/2/deployment/jfxpub-deployment.htm)
*   [部署快速入门](http://docs.oracle.com/javafx/2/get_started/basic_deployment.htm)
*   [集成示例应用程序](http://www.oracle.com/technetwork/java/javafx/samples/index.html)
*   [JavaFX 演示和示例链接中的 JavaFX 示例应用程序源](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

# javascript - 手动或以编程方式单击时与 prop('checked') 不一致

> ID：12565193
> 
> 赞同：3
> 
> 时间：2012-09-24T12:38:06.570
> 
> 标签：javascript, jquery, checkbox

我遇到了一个问题`jQuery 1.7.2/1.8.2`（没有测试早期版本），`prop('checked')`似乎返回了不一致的值。

我有 2 个未选中的复选框：

```
<input id="input1" type="checkbox"/>
<input id="input2" type="checkbox"/>​ 
```

当我打电话`$('#input1').click()`时`ready`，`prop('checked')`给我`false`。当我手动单击时，`#input2`我得到`true`. [我已经创建了一个`jsFiddle`显示问题](http://jsfiddle.net/eza2Y/3/)。

我希望该`prop('checked')`方法在事件处理程序中以一致的方式返回数据`click`，无论这是如何触发的，但似乎并非如此。

**我错过了什么吗？这是一个已知的错误？无论是如何触发的，是否有一种解决方法可以`.prop('checked')`在处理程序中保持一致的数据？`click`**

PS：我已经用`FF 15.0.1`, `Chrome 21.0.1180`,进行了测试`jQuery 1.7.2 and 1.8.2`。无论我使用`.click(`还是`.on('click'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:43:26.197

行为不一致的原因是`.click()`与实际单击元素之间的差异。实际上单击它会更改`checked`状态，而`.click()`仅执行 jQuery 绑定的处理程序。

所以点击元素会改变它是否被选中，然后告诉你新的状态，而使用触发机制只会告诉你以前存在的状态。

# nsis - 在 NSIS 中，如何创建包含图像的自定义页面？

> ID：12565202
> 
> 赞同：2
> 
> 时间：2012-09-24T12:38:29.003
> 
> 标签：nsis

我正在尝试将自定义页面添加到 NSIS 安装中，该页面将包含标题和图像。我正在使用现代用户界面。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:58:09.837

你应该使用 nsDialogs 插件来创建自定义页面，它有[帮助宏来加载位图](http://nsis.sourceforge.net/Docs/nsDialogs/Readme.html#mref-setimage)和图标......

# ios - 使用 CATransform3DMakeRotation 平滑水平翻转

> ID：12565204
> 
> 赞同：3
> 
> 时间：2012-09-24T12:38:38.647
> 
> 标签：ios, core-animation

我设置了以下动画以在不同大小的视图之间旋转。随着新的、更高的视图进入视野，动画的中点似乎闪烁。我能做些什么来平滑过渡。

```
newView.layer.transform = CATransform3DMakeRotation(M_PI_2, 0.0, 1.0, 0.0);

[UIView animateWithDuration:0.5
                          delay:0
                        options:UIViewAnimationOptionCurveLinear
                     animations:^{oldView.layer.transform = CATransform3DMakeRotation(M_PI_2, 0.0, -1.0, 0.0);}
                     completion:^(BOOL finished) {

                         [oldView removeFromSuperview];
                         [UIView animateWithDuration:0.5
                                               delay:0
                                             options:UIViewAnimationOptionCurveLinear
                                          animations:^{newView.layer.transform = CATransform3DMakeRotation(M_PI_2, 0.0, 0.0, 0.0);}
                                          completion:nil];

    }]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-19T02:48:04.890

多亏了这个线程才能使这个工作，所以我想我会使用 m34 矩阵分享我的 to-from 3D 变换。

![在此处输入图像描述](../Images/9eb7372819ba1477a3da9c60b4ed533c.png)

```
 UIView *toView = // show this
    UIView *fromView = // hide this one

    // set up from
    CATransform3D fromViewRotationPerspectiveTrans = CATransform3DIdentity;
    fromViewRotationPerspectiveTrans.m34 = -0.003; // 3D ish effect
    fromViewRotationPerspectiveTrans = CATransform3DRotate(fromViewRotationPerspectiveTrans, M_PI_2, 0.0f, -1.0f, 0.0f);

    // set up to
    CATransform3D toViewRotationPerspectiveTrans = CATransform3DIdentity;
    toViewRotationPerspectiveTrans.m34 = -0.003;
    toViewRotationPerspectiveTrans = CATransform3DRotate(toViewRotationPerspectiveTrans, M_PI_2, 0.0f, 1.0f, 0.0f);

    toView.layer.transform = toViewRotationPerspectiveTrans;

    [UIView animateWithDuration:1.0
                          delay:0
                        options:UIViewAnimationOptionCurveLinear
                     animations:^{fromView.layer.transform = fromViewRotationPerspectiveTrans; }
                     completion:^(BOOL finished) {

                         [fromView removeFromSuperview];
                         [UIView animateWithDuration:1.0
                                               delay:0
                                             options:UIViewAnimationOptionCurveLinear
                                          animations:^{toView.layer.transform = CATransform3DMakeRotation(M_PI_2, 0.0, 0.0, 0.0);}
                                          completion:nil];

                     }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T12:25:39.867

我到了一半，但是缺少的部分，设置[转换矩阵的 m34 单元格值，起到](https://stackoverflow.com/questions/347721/how-do-i-apply-a-perspective-transform-to-a-uiview)了作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-27T01:55:34.410

正如大卫指出的那样，您的代码编写起来没有意义。您将 newView 的最终旋转设置为围绕任何内容旋转，这可能等同于单位矩阵，但我不确定。

这是我会尝试的（我很累，所以让我们看看我是否可以连贯地解释这个......）

作为动画步骤 1，将 oldView 从 0 设置为 pi/2。在开始第二个动画之前将 newView 设置为 -pi/2（反之旋转 90 度。）

在完成方法中，移除旧视图并启动动画以将新视图的旋转设置回零。这将导致新视图看起来像是在继续以 180 度翻转的方式翻转。

这是棘手的部分。计算新旧视图之间的大小差异（水平和垂直）。与旋转一起添加（连接）一个缩放变换，这样当旋转的第一部分完成时，它被缩放到新旧大小的平均值。伪代码可能如下所示：

```
//Scale to apply to oldView for the first part of the animation:
scale height  = ((oldView.size.height+newView.size.height)/2) / oldView.size.height
scale width  = ((oldView.size.width+newView.size.width)/2) / oldView.size.width

/*
Before beginning the second part of the animation, rotate newView to -pi/2, 
and scale it by an amount that makes it the same size that oldView will be 
at the end of the first animation (the average of the sizes of both views)
*/

newView scale height  = ((oldView.size.height+newView.size.height)/2) / 
  newView.size.height
newView scale width  = ((oldView.size.width+newView.size.width)/2) / 
  newView.size.width 
```

在完成块中，从它的超级视图中删除 oldView，并将 newView 动画化回身份转换。

如果我的方法是正确的，在第一个动画结束时，oldView 应该缩放到 oldView 和 newView 大小之间的一半大小。

在第一个动画的完成块中触发的第二个动画将从 newView 开始，其大小与第一个动画结束时 oldView 缩放到的大小相同。第二个动画将以新视图旋转到位并缩小到其原始大小而结束。

# node.js - Node.js http.request 失败并显示 [错误：getaddrinfo EADDRINFO]

> ID：12565209
> 
> 赞同：6
> 
> 时间：2012-09-24T12:38:51.483
> 
> 标签：node.js, httprequest, getaddrinfo

我有 node.js 服务器，它就像一个代理。它通过执行 http.request 接收请求并将它们转发到另一个域上的 Web 服务。

请求选项通常类似于：

```
{
  "host": "some.domain",
  "port": 443,
  "path": "/paht/item/id",
  "method": "POST",
  "headers": {
    "Host": "some.domain",
    "Content-Type": "application/json; charset=utf-8",
    "Content-Length": 100
  }
} 
```

最近，我注意到一些请求失败了`[Error: getaddrinfo EADDRINFO]`，但不是全部。

有谁知道是什么`EADDRINFO`意思，以及所谓的原因是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T13:21:53.037

`EAADRINFO`是在无法找到 IP 地址的情况下查找主机名的 IP 地址时可能发生的错误类型。所以这里可能意味着`"some.domain"`请求的值无法解析为 IP 地址。

# python - `try`s 中的几个`with`s

> ID：12565216
> 
> 赞同：17
> 
> 时间：2012-09-24T12:39:54.147
> 
> 标签：python, exception, nested, try-except

我有几个可能的文件可以保存我的数据；它们可以以不同的方式压缩，所以要打开它们我需要使用`file()`,`gzip.GzipFile()`和其他也返回一个文件对象（支持`with`接口）。

我想尝试每一个，直到一个成功打开，所以我可以做类似的事情

```
try:
  with gzip.GzipFile(fn + '.gz') as f:
    result = process(f)
except (IOError, MaybeSomeGzipExceptions):
  try:
    with xCompressLib.xCompressFile(fn + '.x') as f:
      result = process(f)
  except (IOError, MaybeSomeXCompressExceptions):
    try:
      with file(fn) as f:
        result = process(f)
    except IOError:
      result = "some default value" 
```

如果我有几十种可能的压缩变体，这显然是不可行的。（嵌套会越来越深，代码总是看起来非常相似。）

有没有更好的方法来拼写这个？

编辑：如果可能的话，我也想`process(f)`退出 try/except 以避免意外捕获`process(f)`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T12:43:30.650

是的，您可以将所有变体放在一个列表中并尝试它们，直到其中一个起作用，从而取消嵌套您的代码：

```
def process_gzip(fn):
    with gzip.GzipFile(fn + '.gz') as f:
        return process(f)

def process_xlib(fn):
    with xCompressLib.xCompressFile(fn + '.x') as f:
        return process(f)

def process_builtin(fn):
    with file(fn) as f:
        return process(f)

process_funcs = [process_gzip, process_xlib, process_builtin]

#processing code:

for process_f in process_funcs:
    try:
        result = process_f(fn)
        break
    except IOError:
        #error reading the file, keep going
        continue
    except:
        #processing error, re-raise the exception
        raise 
```

或者，为了减少代码量，您可以创建一个 process_func 工厂，因为它们都具有相同的形式：

```
def make_process_func(constructor, filename_transform):
    with constructor(filename_transform) as f:
        return process(f)

process_funcs = [
    make_process_func(gzip.GzipFile, lambda fn: fn + '.gz'),
    make_process_func(xCompressLib.xCompressFile, lambda fn: fn + '.x'),
    make_process_func(file, lambda fn: fn),
] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-24T13:38:35.683

我会写一个自定义上下文管理器：

```
from contextlib import contextmanager

filetypes = [('.gz', gzip.GzipFile, (IOError, MaybeSomeGzipExceptions)), 
             ('.x', xCompressLib.xCompressFile, (IOError, MaybeSomeXCompressExceptions))]

@contextmanager
def open_compressed(fn):
    f = None
    try:
        for ext, cls, exs in filetypes:
            try:
                f = cls(fn + ext)
            except exs:
                pass
            else:
                break
        yield f
    finally:
        if f is not None:
            f.close()

with open_compressed(fn) as f:
    result = "some default value" if f is None else process(f) 
```

或者可能只是一个返回上下文管理器的函数：

```
filetypes = [('.gz', gzip.GzipFile, (IOError, MaybeSomeGzipExceptions)), 
             ('.x', xCompressLib.xCompressFile, (IOError, MaybeSomeXCompressExceptions))]

class UnknownCompressionFormat(Exception):
    pass

def open_compressed(fn):
    for ext, cls, exs in filetypes:
        try:
            return cls(fn + ext)
        except exs:
            pass
    raise UnknownCompressionFormat

try:
    with open_compressed(fn) as f:
        result = process(f)
except UnknownCompressionFormat:
    result = "some default value" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-24T12:48:03.820

这会起作用吗：

```
extensions = [('.gz', gzip.GzipFile, (IOError, MaybeSomeGzipExceptions)), 
              ('.x', xCompressLib.xCompressFile, (IOError, MaybeSomeXCompressExceptions))] # and other such entries
processed = False
for ext, (compressor, errors) in extensions.iteritems():
    try:
        with compressor(fn+ext) as f:
            try:
                result = process(f)
                processed = True
                break
            except:
                raise
    except errors:
        pass
if not processed:
    result = "some default value" 
```

希望有帮助

# ruby-on-rails - Activeadmin 可按多列排序

> ID：12565219
> 
> 赞同：3
> 
> 时间：2012-09-24T12:40:28.847
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, gem, activeadmin

是否有可能`activeadmin`使用多列对表格进行排序？

我发现了一个[问题](https://github.com/gregbell/active_admin/issues/909)，说现在不可能。但我想知道是否有人实现了这样的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T18:33:51.860

我遇到了同样的问题。从[源代码](https://github.com/gregbell/active_admin/blob/master/lib/active_admin/resource_controller/collection.rb#L43-L56)来看，不支持此功能

```
 def sort_order(chain)
      params[:order] ||= active_admin_config.sort_order
      if params[:order] && params[:order] =~ /^([\w\_\.]+)_(desc|asc)$/
        column = $1
        order  = $2
        table  = active_admin_config.resource_table_name
        table_column = (column =~ /\./) ? column :
          "#{table}.#{active_admin_config.resource_quoted_column_name(column)}"

        chain.reorder("#{table_column} #{order}")
      else
        chain # just return the chain
      end
    end 
```

但是[有](https://github.com/gregbell/active_admin/pull/1766#issuecomment-10450799)猴子补丁解决方案。

# android - View #getWidth() 和 getMeasuredWidth() 的区别

> ID：12565233
> 
> 赞同：0
> 
> 时间：2012-09-24T12:41:34.743
> 
> 标签：android, android-layout

> **可能重复：**
> [Android SDK 中的 getWidth/heigth() 和 getMeasuredWidth/Heigth() 有什么区别？](https://stackoverflow.com/questions/8657540/what-is-the-difference-between-getwidth-heigth-and-getmeasuredwidth-heigth-i)

哪个函数将在所有情况下检索视图的实际宽度？这两者有什么区别？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:53:29.940

gewidth() 用于获取已绘制的视图的宽度（view.getwidth() 或 view.getheight()）。但是， getMeasureWidth() 用于获取尚未绘制的视图宽度。比如 getmeasuredwidth() 和 getmeasureheight()。示例：首先调用 measure view.measure(0,0) 然后你可以将它与 getmeasuredwidth() 和 getmeasureheight() 一起使用

# java - 如何在不使用库函数的情况下将字符串转换为数字

> ID：12565237
> 
> 赞同：9
> 
> 时间：2012-09-24T12:41:52.307
> 
> 标签：java

假设我想创建一个将数字作为字符串并返回其数字形式的方法。喜欢

```
getNumber("123456");

public int getNumber(String number) {

    //No library function should used. Means i can't do Integer.parseInteger(number).

} //end of getNumber() 
```

我该如何实现该方法，例如

```
public int getNumber(String number) {

    for (int i=0; i<number.length; i++) {

    char c = number.getCharacter(i);
    ///How can i proceed further

    } //end of for()

} //end of getNumber() 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-24T12:53:23.237

在不使用库函数的情况下，`'0'`从每个数字字符中减去该字符以获得其`int`值，然后通过将当前总和乘以 10 来建立数字，然后再添加下一个数字的`ìnt`值。

### 爪哇 7

```
public static int getNumber(String number) {
    int result = 0;
    for (int i = 0; i < number.length(); i++) {
        result = result * 10 + number.charAt(i) - '0';
    }
    return result;
} 
```

### 爪哇 8

```
public static int getNumber(String number) {
    return number.chars().reduce(0, (a, b) -> 10 * a + b - '0');
} 
```

这主要是因为字符`0-9`具有连续的 ascii 值，因此从其中减去`'0'`任何一个都会为您提供与 character 的偏移量`'0'`，这当然是字符的数字等价物。

* * *

免责声明：此代码不处理负数、算术溢出或错误输入。

您可能希望增强代码以满足这些要求。实现这样的功能将是有益的，尤其是考虑到这显然是家庭作业。

* * *

下面是一些测试代码：

```
public static void main(String[] args) {
    System.out.println(getNumber("12345"));
} 
```

输出：

```
12345 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-09-24T12:45:04.243

使用`Integer.parseInt(str)`. 类`Long`, `Short`,`Double`也有类似的方法。

# ruby-on-rails - rake 任务的性能问题：添加工人 dyno 会解决问题吗？

> ID：12565240
> 
> 赞同：1
> 
> 时间：2012-09-24T12:41:55.567
> 
> 标签：ruby-on-rails, heroku, rake-task, mailer

在我们的应用程序中，我们使用 rake 任务向大约 11 000 个用户发送邮件。每个电子邮件发送都作为延迟作业执行，如下所示。

```
@Users.each do |a|
    a.delay.send_email(body,text)
end 
```

两周前它工作得很好，但突然变慢了。意味着它将在一天内发送所有电子邮件，但目前需要时间。

我们试图关注这个性能问题，但到目前为止找不到任何东西。1.我们调查了代码，尝试了单个延迟作业。注释掉从 db 等获取的部分。但它是在同一时间做的 2\. 尝试了注释掉的电子邮件发送部分。但是执行延迟作业所花费的时间是相同的。

后来注意到heroku工作进程dyno。我们目前已经购买了 1 个 Worker 和 2 个 Web。这就是它延迟的原因。如果是这样，它以前是如何工作的？添加更多工人会提高性能吗？

# javascript - Javascript裁剪功能不显示图像

> ID：12565241
> 
> 赞同：0
> 
> 时间：2012-09-24T12:41:59.177
> 
> 标签：javascript

首先，我对javascript很陌生。我正在尝试开发一个 javascript 函数，它获取图像并返回该图像的裁剪版本。通过在谷歌上环顾四周，我发现我可能需要以某种方式使用画布来完成这项任务。但这是否意味着我必须在我的页面上显示图像？

我还查看了具有类似功能的不同 javascript 图像处理库，例如 Pixastic 的 Crop，但我不知道如何使用它来解决我的特定问题。所以现在我向你们寻求帮助。请指导我正确的方向！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:51:03.450

Pixastic 的 Crop 解决方案似乎很容易实现并使用画布。只要您不需要支持 Internet Explorer 7 或 8，它就可以完成这项工作。

否则，您可以简单地使用 CSS`overflow:hidden;` 进行客户端裁剪。

Pixastic 解决方案：[http](http://www.pixastic.com/lib/docs/actions/crop/) ://www.pixastic.com/lib/docs/actions/crop/ ，查看示例代码选项卡。

这是 Pixastic 和 CSS 解决方案的一个工作示例：http: [//jsfiddle.net/EB6P7/1/](http://jsfiddle.net/EB6P7/1/)

我使用了 Pixastic 的 jQuery 插件。

--

如果您不需要将图像保存在服务器端，我建议使用 CSS 解决方案，因为它不依赖 Javascript 并且可以实现与 Pixastic 相同的结果。

如果你有什么不明白的地方，可以问我，因为我不知道你的 HTML/CSS 水平。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:48:46.347

好吧，如果您的问题只是裁剪而不是保存裁剪的图像，我想说的最简单的解决方案是使用 CSS 将图像定位在 div 内并仅显示裁剪区域。

如果你想保存，那么我希望你需要在服务器端使用一些库来裁剪和保存

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:50:46.210

也许 CSS Clipping 功能是适合您的解决方案？

```
#someImage
{
 clip:rect(50px 100px 130px auto);
} 
```

# qt4 - 如何使“qmake -project”忽略指定的文件/目录

> ID：12565244
> 
> 赞同：3
> 
> 时间：2012-09-24T12:42:01.837
> 
> 标签：qt4, qmake

如何指定 qmake (v2.01a) 在生成项目文件时忽略某些文件/目录？

类似问题的解决方案，例如[此处](https://stackoverflow.com/questions/2682164/how-do-i-specify-in-qmake-4-5s-pro-file-that-i-want-to-ignore-a-library-in-msv)，建议编辑 .pro 文件。我希望根据我指定的忽略生成 .pro 文件，这样我就不必编辑它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-30T14:47:59.777

我不确定你问题的第二部分到底是什么意思。但是，我仍然会尝试回答第一部分：

只需添加一个

```
HEADERS -= myClass.h
SOURCES -= myClass.cpp 
```

在项目文件的末尾。这将再次排除这些文件，即使它们已自动添加到`HEADER += [...]`-part。

现在是您问题的第二部分：您的意思是使用其他工具自动生成项目文件吗？那么在最后添加这两行应该很容易。或者您是否正在寻找一些 GUI 按钮来“忽略”某些文件？那么你运气不好（好吧，你可以右键单击文件并选择“删除”（不要选中“从磁盘删除”），它们将被“忽略” - 但我认为这不是你的意思？）。顺便说一句：如果您只是害怕手动触摸项目文件：您迟早需要手动修改它，所以现在最好开始手动编辑它而不是试图绕过这一步 - 你不能永远逃跑;）

无论如何，[qMake 变量参考](http://qt-project.org/doc/qt-5/qmake-variable-reference.html)是一个很好的起点，使用 Qt 的每个人都应该为该页面添加书签:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T14:33:55.737

查看[用于制作项目的 Qmake 文档](http://qt-project.org/doc/qt-4.8/qmake-running.html#project-mode-options)，您希望使用这些选项`-nopwd`，然后显式传递要从中创建项目的文件/目录。

# django - 在模板中显示 Django URL 列表

> ID：12565245
> 
> 赞同：0
> 
> 时间：2012-09-24T12:42:04.910
> 
> 标签：django, list, django-templates

所以我有这样的网址：

```
example.com?category=Home&category=Test 
```

我知道在视图中我可以像这样阅读这个列表：

```
catlist = request.GET.getlist('category') 
```

但是我怎样才能在模板中阅读这个列表呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:07:01.580

从您的角度来看，您需要将其传递给可以将其用作列表的模板。

例如

视图.py

```
def myview(request):
    catlist = request.GET.getlist('category')
    #do something
    ....
    # pass catlist to template and may be some other variables
    ctx = { 'catlist': catlist}
    return render_to_response('mytemplate.html', ctx,
                context_instance = RequestContext(request)) 
```

我的模板.html

```
{% for cat in catlist %}
    <p> {{cat}} </p>
 {%endfor%} 
```

# openssl - 将 SSL 结构传递给线程

> ID：12565248
> 
> 赞同：0
> 
> 时间：2012-09-24T12:42:17.110
> 
> 标签：openssl

我正在尝试将 ssl 结构传递给线程，但无法使用以下代码实现相同的目的，

```
 if(SSL_set_fd(ssl, client_s)<0)
    printf("\n error in assigning socket to SSL:");
else
    printf("\n The socket has been assigned to SSL Structure");

    pthread_create (                    /* Create a child thread        */
               &threads,                /* Thread ID (system assigned)  */    
               &attr,                   /* Default thread attributes    */
               my_thread,               /* Thread routine               */
               &ssl);    

}

void *my_thread(void * arg)
{
SSL *ssl1;
ssl1 = *(SSL)arg;
int i=1,err,fh,ret;//i
unsigned int buf_len; 
```

我得到的错误如下：

错误：请求转换为非标量类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:04:48.457

据我所知，你总是得到一个指向 SSL 结构的指针，所以这里是你更正的代码：

```
pthread_create (                    /* Create a child thread        */
           &threads,                /* Thread ID (system assigned)  */    
           &attr,                   /* Default thread attributes    */
           my_thread,               /* Thread routine               */
           ssl); 
```

在你的线程函数里面：

```
void *my_thread(void * arg)
{
    SSL *ssl1;
    ssl1 = (SSL*)arg; 
```

您试图在“pthread_create”调用中传递“指向指针的指针”，而在“my_thread”中进行转换也是不正确的。

# c# - Excel 互操作 DLL 的 Clickonce 异常

> ID：12565250
> 
> 赞同：3
> 
> 时间：2012-09-24T12:42:20.323
> 
> 标签：c#, deployment, clickonce, excel-interop

我们正在创建一个通过 Office 2007 PIA 使用 Excel 互操作的软件项目（VS 2010、.NET 3.5 SP1）。我们正在将其部署到 Internet 以进行 clickonce 安装。在大多数情况下，它工作得很好。但是最近一位客户在安装它时遇到了问题（请参阅下面的日志文件）。

据我在互联网上阅读时发现，它可能在某种程度上与另一个应用程序注册的 PIA 有关。

任何人都可以提供一些有用的提示（也许还有一些关于这个主题的阅读来源）？

非常感谢！

```
PLATFORM VERSION INFO
    Windows             : 6.1.7601.65536 (Win32NT)
    Common Language Runtime     : 4.0.30319.269
    System.Deployment.dll       : 4.0.30319.1 (RTMRel.030319-0100)
    clr.dll             : 4.0.30319.269 (RTMGDR.030319-2600)
    dfdll.dll           : 4.0.30319.1 (RTMRel.030319-0100)
    dfshim.dll          : 4.0.31106.0 (Main.031106-0000)

SOURCES
    Deployment url          : http://***/***.application
                        Server      : Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
    Deployment Provider url     : http://***/***.application
                        Server      : Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0
    Application url         : http://***/***.manifest
                        Server      : Windows-Azure-Blob/1.0 Microsoft-HTTPAPI/2.0

IDENTITIES
    Deployment Identity     : ***, Version=1.1.0.893, Culture=neutral, PublicKeyToken=b5867eb738db6c5c, processorArchitecture=msil
    Application Identity        : ***, Version=1.1.0.893, Culture=neutral, PublicKeyToken=b5867eb738db6c5c, processorArchitecture=msil, type=win32

APPLICATION SUMMARY
    * Installable application.

ERROR SUMMARY
    Below is a summary of the errors, details of these errors are listed later in the log.
    * Activation of http://***/***.application resulted in exception. Following failure messages were detected:
        + Exception occurred loading manifest from file Microsoft.Office.Interop.Excel.dll: the manifest may not be valid or the file could not be opened. 
        + File Microsoft.Office.Interop.Excel.dll is not a valid Portable Executable (PE) file.
        + File {0} is not a valid Portable Executable (PE) file.

COMPONENT STORE TRANSACTION FAILURE SUMMARY
    No transaction error was detected.

WARNINGS
    There were no warnings during this operation.

OPERATION PROGRESS STATUS
    * [9/20/2012 2:44:56 PM] : Activation of http://***/***.application has started.
    * [9/20/2012 2:44:57 PM] : Processing of deployment manifest has successfully completed.
    * [9/20/2012 2:44:57 PM] : Installation of the application has started.
    * [9/20/2012 2:44:58 PM] : Processing of application manifest has successfully completed.
    * [9/20/2012 2:45:00 PM] : Found compatible runtime version 2.0.50727.
    * [9/20/2012 2:45:00 PM] : Detecting dependent assembly Sentinel.v3.5Client, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=msil using Sentinel.v3.5Client, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=msil.
    * [9/20/2012 2:45:00 PM] : Detecting dependent assembly System.Data.Entity, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, processorArchitecture=msil using System.Data.Entity, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, processorArchitecture=msil.
    * [9/20/2012 2:45:00 PM] : Detecting dependent assembly WindowsBase, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=msil using WindowsBase, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=msil.
    * [9/20/2012 2:45:00 PM] : Detecting dependent assembly System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, processorArchitecture=msil using System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, processorArchitecture=msil.
    * [9/20/2012 2:45:00 PM] : Detecting dependent assembly System.Data.Entity, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, processorArchitecture=msil using System.Data.Entity, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, processorArchitecture=msil.
    * [9/20/2012 2:45:00 PM] : Request of trust and detection of platform is complete.

ERROR DETAILS
    Following errors were detected during this operation.
    * [9/20/2012 2:45:34 PM] System.Deployment.Application.InvalidDeploymentException (ManifestLoad)
        - Exception occurred loading manifest from file Microsoft.Office.Interop.Excel.dll: the manifest may not be valid or the file could not be opened. 
        - Source: System.Deployment
        - Stack trace:
            at System.Deployment.Application.Manifest.AssemblyManifest.ManifestLoadExceptionHelper(Exception exception, String filePath)
            at System.Deployment.Application.Manifest.AssemblyManifest.LoadFromInternalManifestFile(String filePath)
            at System.Deployment.Application.DownloadManager.ProcessDownloadedFile(Object sender, DownloadEventArgs e)
            at System.Deployment.Application.FileDownloader.DownloadModifiedEventHandler.Invoke(Object sender, DownloadEventArgs e)
            at System.Deployment.Application.SystemNetDownloader.DownloadSingleFile(DownloadQueueItem next)
            at System.Deployment.Application.SystemNetDownloader.DownloadAllFiles()
            at System.Deployment.Application.FileDownloader.Download(SubscriptionState subState)
            at System.Deployment.Application.DownloadManager.DownloadDependencies(SubscriptionState subState, AssemblyManifest deployManifest, AssemblyManifest appManifest, Uri sourceUriBase, String targetDirectory, String group, IDownloadNotification notification, DownloadOptions options)
            at System.Deployment.Application.ApplicationActivator.DownloadApplication(SubscriptionState subState, ActivationDescription actDesc, Int64 transactionId, TempDirectory& downloadTemp)
            at System.Deployment.Application.ApplicationActivator.InstallApplication(SubscriptionState& subState, ActivationDescription actDesc)
            at System.Deployment.Application.ApplicationActivator.PerformDeploymentActivation(Uri activationUri, Boolean isShortcut, String textualSubId, String deploymentProviderUrlFromExtension, BrowserSettings browserSettings, String& errorPageUrl)
            at System.Deployment.Application.ApplicationActivator.ActivateDeploymentWorker(Object state)
        --- Inner Exception ---
        System.IO.IOException
        - File Microsoft.Office.Interop.Excel.dll is not a valid Portable Executable (PE) file.
        - Source: System.Deployment
        - Stack trace:
            at System.Deployment.Application.PEStream.ConstructFromFile(String filePath, Boolean partialConstruct)
            at System.Deployment.Application.Manifest.AssemblyManifest.LoadFromInternalManifestFile(String filePath)
        --- Inner Exception ---
        System.ComponentModel.Win32Exception
        - File {0} is not a valid Portable Executable (PE) file.
        - Source: System.Deployment
        - Stack trace:
            at System.Deployment.Application.PEStream.DosHeader..ctor(FileStream file)
            at System.Deployment.Application.PEStream.ConstructPEImage(FileStream file, Boolean partialConstruct)
            at System.Deployment.Application.PEStream.ConstructFromFile(String filePath, Boolean partialConstruct)

COMPONENT STORE TRANSACTION DETAILS
    No transaction information is available. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T16:37:46.267

我们有一个与我们自己的 ClickOnce 应用程序几乎相同的日志文件，尽管它在下载第一个文件时失败（ClickOnce 似乎按字母顺序下载文件）。我们让用户将部署应用程序的域列入白名单，问题得到解决。

[https://answers.atlassian.com/questions/154127/sourcetree-for-windows-install](https://answers.atlassian.com/questions/154127/sourcetree-for-windows-install)。

在我的商店，ClickOnce 通常用于超级锁定的 IT 环境（工厂的机器只有我们的软件可用，用户甚至无法将文件保存到他们的桌面），因此将网站列入白名单可以解决一系列问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-18T12:33:33.157

在这里复活一个死去的人，但由于我刚刚在一次部署中遇到了同样的事情，我也会加上我的 5 美分。

我的部署日志的输出与您的基本相同：

```
 * Activation of //***//.application resulted in exception. Following failure messages were detected:
    + Exception occurred loading manifest from file DevExpress.Utils.v17.1.UI.dll: the manifest may not be valid or the file could not be opened. 
    + File DevExpress.Utils.v17.1.UI.dll is not a valid Portable Executable (PE) file.
    + PE file does not have enough data. 
```

我删除了对有问题的 dll 的引用，重新添加并再次发布。这为我解决了这个问题。

# c# - 在 C# 中从 IEnumerable 类型转换为 ObservableCollection

> ID：12565252
> 
> 赞同：0
> 
> 时间：2012-09-24T12:42:25.550
> 
> 标签：c#, linq, casting, lambda

我想获得所有有效投标的地方。我尝试了这个，但我得到了空值。

```
testObservableList = testObservableList.Where(
                         x => x.IsActiveForBid) as ObservableCollection<Places>; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:44:50.167

试试这个。

```
testObservableList = 
new ObservableCollection(testObservableList.Where(x => x.IsActiveForBid)); 
```

这将制作当前 IEnumerable 的浅表副本并将其转换为 ObservableCollection

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T12:45:50.177

而an`ObservableCollection<T>`是`IEnumerable<T>`相反的不成立。尝试构造函数：

```
new ObservableCollection<SometypeType>(
              testObservableList.Where(x => x.IsActiveForBid)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T12:46:03.990

试试这个：

```
ObservableCollection coll1 = new ObservableCollection(testObservableList.Where(x => x.IsActiveForBid); 
```

我想这会做到的。

# java - 如何在 3rd 方 jar 上调试 log4j（代码不可用）？

> ID：12565254
> 
> 赞同：0
> 
> 时间：2012-09-24T12:42:52.790
> 
> 标签：java, log4j

我使用第三方软件。供应商说他们使用 log4j 来记录消息。

我配置了我的 log4j.properties，我可以从我的应用程序中看到信息，但从他们的应用程序中看不到信息。

例如，我将根类别更改为 INFO 或 ERROR 或 DEBUG。

问题是我该如何调试？

我已经完全控制了源代码，但没有他们的 jar ？

任何建议...

特别是我可以对 JVM 进行运行时调用来告诉我为什么它没有记录他们的包？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:44:23.667

将此行添加到您的命令行：-Dlog4j.debug=true。

它将在系统中显示 log4j 是如何初始化的。

# asp.net-mvc-3 - 按角色列出的用户列表，使用fretje MvcMembership

> ID：12565256
> 
> 赞同：0
> 
> 时间：2012-09-24T12:43:01.310
> 
> 标签：asp.net-mvc-3

所以我一直在干预这个 MvcMembership 入门套件，到目前为止，这是我遇到的唯一麻烦的部分......

基本上，此成员资格用于`_userService`收集有关将用户分类为`IPagedList`s 的数据。

用户服务：

```
public interface IUserService
{
    int TotalUsers { get; }
    int UsersOnline{ get; }
    IPagedList<MembershipUser> FindAll(int pageIndex, int pageSize);
    IPagedList<MembershipUser> FindByEmail(string emailAddressToMatch, int pageIndex, int pageSize);
    IPagedList<MembershipUser> FindByUserName(string userNameToMatch, int pageIndex, int pageSize);
    MembershipUser Get(string userName);
    MembershipUser Get(object providerUserKey);
    void Update(MembershipUser user);
    void Delete(MembershipUser user);
    void Delete(MembershipUser user, bool deleteAllRelatedData);
    MembershipUser Touch(MembershipUser user);
    MembershipUser Touch(string userName);
    MembershipUser Touch(object providerUserKey);
    MembershipUser Create(string username, string password, string email, string passwordQuestion, string passwordAnswer);
} 
```

在控制器中，它创建了一个只读实例`private readonly IUserService _userService;` ，使用它将数据收集到 ViewModel 中：

```
public class IndexViewModel
{
    public IPagedList<MembershipUser> Users { get; set; }
    public IEnumerable<string> Roles { get; set; }
} 
```

然后填充它并将填充的数据传递给查看。

```
return View(new IndexViewModel
                {
                    Users = _userService.FindAll(index ?? 0, PageSize),
                    Roles = _rolesService.FindAll()
                }); 
```

现在我想要的是过滤与当前用户具有相同角色的用户。我必须扮演一个字符串，但没有什么可以将它与使用 Linq 进行比较，当我尝试制作新的 ViewModel 并使用`IEnumerable<User>`然后在那里获取所需的数据时，我会遇到各种错误......请帮助，我真的被卡住了。 ..

**更新**

```
public ViewResult Index(int? index)
{
    if (Roles.IsUserInRole("SUPER ADMIN GROUP"))
    {    
        return View(new IndexViewModel
                        {
                            Users = _userService.FindAll(index ?? 0, PageSize),
                            Roles = _rolesService.FindAll()
                        });
    else if (Roles.IsUserInRole("Group Admin"))
    {
        string[] roles = Roles.GetRolesForUser();
        return View(new IndexViewModel
                        {
                            Users = (IPagedList<MembershipUser>)_userService.FindAll(index ?? 0, PageSize).Where(x => _rolesService.FindByUserName(x.UserName).SequenceEqual(roles)),
                            Roles = roles
                        });
    }

    return View();
} 
```

这是我的`Index`方法。基本上，我试图将组管理员的可访问性限制为共享他其他角色的用户。例如，组管理员具有“组管理员”和“测试”角色，他将能够看到所有具有“测试”角色的用户。

正确获取用户角色并不是什么大问题。我只是希望这部分正确......如果可能的话......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:54:17.527

您是否尝试过使用 LINQ 仅保留与当前用户具有相同角色的用户：

```
string[] roles = Roles.GetRolesForUser();
return View(new IndexViewModel
{
    Users = _userService
        .FindAll(index ?? 0, PageSize)
        .Where(
            x => _rolesService.GetRolesForUser(x.UserName).SequenceEqual(roles)
        ),
    Roles = roles
}); 
```

# python - 在 Python 中重复一行

> ID：12565259
> 
> 赞同：-1
> 
> 时间：2012-09-24T12:43:14.993
> 
> 标签：python, printing, repeat

我一直试图弄清楚如何重复一个简单的“打印”，但无济于事。我想知道我应该使用什么命令以及如何使用该命令。我没有任何代码，因为我对它很生气，所以我删除了文件......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:56:10.820

假设 Python 2：

```
repeats = int(raw_input("How many repetitions? "))
for i in range(repeats):
    print "I will read a Python tutorial!" 
```

# xcode - Xcode 4 总是显示“正在扫描工作副本”，不断重新下载库

> ID：12565261
> 
> 赞同：1
> 
> 时间：2012-09-24T12:43:21.603
> 
> 标签：xcode, cmake, xcode4.5

*注意我已经阅读了其他几个问题，但仍然感到困惑*

**首先：**我全新安装了 XCode 4.5，并用它打开并构建了 CMake 生成的 .xcodeproj。事情建立得很好，但正如许多其他问题所提到的，它不断地显示一个@Scanning for working copies”进度条。

我没有分发或打包任何应用程序或类似的东西，也没有设置 SCM。

**其次：** 每次我启动 Xcode 4.5 时，它都会开始下载：

*   Xcode 4.5 开发者库
*   OS X 10.8 核心库
*   iOS 6.0 库

我已经等它完成了几次，但下一次它仍然会再次完成。它似乎并没有阻止我能够构建，这里发生了什么？

不知道它是否相关，但我之前从快照中收到警告说我无权访问它想要保存到的位置（在 XCode.app dir IIRC 内）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:04:51.447

您可以从首选项 > 下载手动停止下载这些库。此外，请确保未选中“自动检查并安装更新”。

# java - JUnit-Test 在类测试和项目测试之间有所不同

> ID：12565266
> 
> 赞同：0
> 
> 时间：2012-09-24T12:43:36.333
> 
> 标签：java, spring, hibernate, junit, hsqldb

我在我的 Java 应用程序中遇到了一个与单元测试相关的奇怪错误。

在单元测试期间，我使用预先填充了自定义数据的内存 HSQLDB（通过自动触发的插入脚本）和 Hibernate 作为 ORM 来访问它。

问题如下，如果我在单个类（即：TestDummyClass.java）上启动单元测试，则**在每个方法 test 之后**（从原始插入脚本）重新创建 db 。

如果我在包含多个测试类的整个项目（src/test）上启动单元测试，则数据库会在每个测试类的开头初始化，而不是在每个测试方法上初始化。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:com/wizche/app-context-test.xml" })
public class TestDummyClass {
.....
} 
```

这意味着，例如，如果在 TestDummyClass 中我在某些测试方法中更改了数据库（即创建一个新对象），那么新对象将保留在同一类中的以下测试方法中。因此，如果我在项目或单个类上启动它，断言应该会有所不同！

有人可以解释一下为什么会这样吗？如何决定何时恢复 clean-db？

注意：我正在使用 SpringJUnit4ClassRunner 和整个测试项目的自定义上下文配置（其中没有与单元测试相关的参数）。NB2：我在 SpringEclipse 中直接启动 JUnit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:05:05.077

原因是，如果您使用 SpringJUnit4ClassRunner，如果您对多个测试使用完全相同的位置，它往往会缓存应用程序上下文 - 这种缓存是跨套件的，因此如果您在单个套件中执行项目中的所有测试，并使用跨多个测试的相同应用程序上下文位置，您很可能会获得缓存的上下文 - 如果您在上下文中修改 bean，这也将反映其他测试。

解决方法是向`@DirtiesContext`测试类或测试方法添加注释

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:56:18.930

Eclipse 在单个 JVM 中运行单元测试，因此理论上即使在单个类上运行，您也应该看到与从 src/test 运行相同的行为。我在想运行你所有的测试你更有可能看到问题。当您进行单个类测试时，是什么让您确保在每个方法之后重新创建数据库 - 只是想确保这是准确的？

[在查看此链接](https://stackoverflow.com/questions/2890259/running-each-junit-test-in-a-separate-jvm-in-eclipse)之前已经提出了类似的问题。这会很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:20:31.680

我建议使用[DBUnit](http://www.dbunit.org/)来协助构建和拆除您的数据库。它提供了动态执行此操作的方法，并与所有主要的数据库提供程序进行交互。

# c# - C#比较2个字符串，排序，放入数组

> ID：12565269
> 
> 赞同：2
> 
> 时间：2012-09-24T12:43:46.103
> 
> 标签：c#, arrays, string, compare, bubble-sort

嗨，我现在更好地提出了我的问题。

在 foreach 命令中，我获取数组中的临时（保存变量）值。我保存在 temp 中的值来自 datagridview 单元格。

在下一步中，在 for 命令中，我想比较 2 个字符串，即字符串和下一个字符串，如果第一个字符串大于第二个字符串，我想更改它们的位置。但是有一个问题，他们不改变位置，他们甚至得到一个空值，我不明白为什么他们得到一个空值。

我认为由于 foreach 命令，它们得到了一个空值，索引 [i] 保持不变，但是如果我输入 i = i+1，则该命令将超出范围。

谢谢

森克 妮可

```
foreach (DataGridViewRow row in dataGridView1.Rows)     
{
    if (row.Cells[i].Value == null)
    {
        //MessageBox.Show("This row is empty");
        break;
    }
    if (row.Cells[i].Value != null)
    {
        temp = row.Cells[i].Value.ToString();
        UnsortArray[i] = temp;
        i = i + 1;

    }
}

for (int a = 0; a < MaxZeilen; a++)
{
    if (i < MaxZeilen)
    {
        *if (String.Compare(UnsortArray[a], UnsortArray[a + 1]) > 0) 
        {
            UnsortArray[a] = temp;
            UnsortArray[a + 1] = temp2;
            temp = UnsortArray[a + 1];
            temp2 = UnsortArray[a];
        }*
    }
}

for (int i = 0; i < MaxZeilen; i++)
{
    UnsortArray[i] = SortArray[i];
    MessageBox.Show(UnsortArray[i]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:46:16.233

你倒退了，在分配临时变量之前将数组分配给临时变量：

```
UnsortArray[a] = temp;
UnsortArray[a + 1] = temp2;
temp = UnsortArray[a + 1];
temp2 = UnsortArray[a]; 
```

尝试：

```
temp = UnsortArray[a + 1];
temp2 = UnsortArray[a];
UnsortArray[a] = temp;
UnsortArray[a + 1] = temp2; 
```

而你在这里又做了一次`UnsortArray[i] = SortArray[i];`。我想你的意思是`SortArray[i] = UnsortArray[i];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:02:50.147

将其替换为以下代码块

```
int i= 0;
foreach (DataGridViewRow row in dataGridView1.Rows)     
{
    if (row != null)
    {
        temp = row.ToString();
        UnsortArray[i] = temp;
        i = i + 1;
    }
}

for (int a = 0; a < MaxZeilen; a++)
{
    if (String.Compare(UnsortArray[a], UnsortArray[a + 1]) > 0) 
    {
        temp = UnsortArray[a + 1];             
        UnsortArray[a + 1] = UnsortArray[a];
        UnsortArray[a] = temp;
    }
}
for (int i = 0; i < MaxZeilen; i++)
{
    MessageBox.Show(UnsortArray[i]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T13:04:42.017

```
 temp = UnsortArray[a + 1];    

    UnsortArray[a + 1] = UnsortArray[a];

    UnsortArray[a] = temp; 
```

代替

```
 UnsortArray[a] = temp;

          UnsortArray[a + 1] = temp2;

          temp = UnsortArray[a + 1];

          temp2 = UnsortArray[a]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T13:10:56.077

为什么使用数组而不是 List ？

[本页](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)介绍排序列表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T13:23:23.850

这是对您的代码的一些改进。您在顶部有一个错误，可能导致无限循环，只需使用 Array.Sort 方法。如果您希望它以不同的方式排序，请添加一个 IComparable 接口。

```
foreach (DataGridViewRow row in dataGridView1.Rows)     
{
     if (row.Cells[i].Value == null)
     {
          //MessageBox.Show("This row is empty");
          i++;
          break;
     }
     else (row.Cells[i].Value != null)
     {
          UnsortArray[i] = row.Cells[i].Value.ToString();
          i++;
     }
}  

Array.Sort(UnsortArray);
SortArray = UnsortArray; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-24T13:44:59.170

```
 List<String> itemList = new List<string>();
    foreach (DataGridViewRow row in dataGridView1.Rows)
    {
        if (row.Cells[0].Value = null)
        {
            itemList.Add(row.Cells[0].Value.ToString());
        }
    }

    itemList.Sort();
    string[] SortedArray = itemList.ToArray();

    for (int j = 0; j < SortedArray.Length; j++)
    {
        MessageBox.Show(SortedArray[j]);
    } 
```

如果此代码不起作用，则添加

```
foreach(string item in itemList)
{
    MessageBox.Show(item);
} 
```

在第一个 foreach 循环之后并检查值

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-25T06:21:32.990

```
int MaxArrayCount = 0; 
foreach(DataGridViewRow row in dataGridView1.Rows)    
{ 
MaxArrayCount += row.Cells.Count;
 }
 string[] UnsortArray= new string[MaxArrayCount];

int cnt = 0;
foreach (DataGridViewRow row in dataGridView1.Rows)
                {
                    for (int i = 0; i < row.Cells.Count; i++ )
                    {
                        if (row.Cells[i].Value != null)
                        {
                            temp = row.Cells[i].Value.ToString();

                            UnsortArray[cnt] = temp;

                            cnt++;
                        } 
                    }

                }

for (int b = 1; b < UnsortArray.Count; b++)
{    
  for (int a = 0; a < UnsortArray.Count - 1; a++)   
     {    

    if (String.Compare(UnsortArray[a], UnsortArray[a + 1]) > 0)
     {

      temp = UnsortArray[a + 1];

      UnsortArray[a + 1] = UnsortArray[a];

      UnsortArray[a] = temp;

    }    
  }    
}

for (int i = 0; i < MaxZeilen; i++)
{
MessageBox.Show(UnsortArray[i]);
} 
```

# vb.net - 居中自定义标签文本

> ID：12565271
> 
> 赞同：2
> 
> 时间：2012-09-24T12:44:11.017
> 
> 标签：vb.net

当标签被禁用时，我正在使用自定义标签来启用前景色（通过使用以下）

例如，当 autosize 关闭并且文本对齐设置为 TopCenter 时，如何将文本居中作为标准标签的中心？我已经使用对齐选项尝试了 StringFormat ，但这并没有与中心对齐。

```
 Protected Overrides Sub OnPaint(e As PaintEventArgs)
        Dim LabelBrush As New SolidBrush(Me.ForeColor)

        Dim SF As New StringFormat

        SF.FormatFlags = StringFormatFlags.NoWrap
        SF.Alignment = StringAlignment.Center
        SF.LineAlignment = StringAlignment.Center

        LabelBrush.Color = DisabledColor_Dark

        e.Graphics.DrawString(Me.Text, Me.Font, LabelBrush, Padding.Left, Padding.Right, SF)

        LabelBrush.Dispose()
        LabelBrush = Nothing
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:08:23.630

使用这些填充变量时，DrawString 调用看起来不正确。

试试这个：

```
e.Graphics.DrawString(Me.Text, Me.Font, LabelBrush, Me.ClientRectangle, SF) 
```

至于匹配 TopCenter 的 ContentAlignment 等，您必须根据您希望文本的显示方式相应地更改 Alignment 和 LineAlignment 属性。

另外，考虑使用`TextRenderer`而不是`e.Graphics.DrawString()`. 更好的输出。

```
TextRenderer.DrawText(e.Graphics, Me.Text, Me.Font, Me.ClientRectangle, _
                      DisabledColor_Dark, Color.Empty, _
                      TextFormatFlags.HorizontalCenter Or _
                      TextFormatFlags.VerticalCenter) 
```

# ios - 取消订阅 Apple 推送通知服务

> ID：12565273
> 
> 赞同：2
> 
> 时间：2012-09-24T12:44:18.610
> 
> 标签：ios, apple-push-notifications

我正在开发一个 iOS 应用程序，使用户能够观察技术设备并在出现问题时得到通知。

到目前为止我所知道的：

1.  我的应用从 APN 请求令牌。
2.  我的应用程序将此令牌发送到我的服务器。
3.  如果发生事件，我的服务器会通知 APN。
4.  APNs 将消息推送到设备上。

我想知道的：

*   我读到令牌可能会更改，因此我需要在每次应用启动时请求它。这是真的？
*   如果我不时获得新令牌，我必须不时在我的服务器上注册以确保它使用当前令牌。如果令牌更改以允许我的服务器删除旧令牌，我是否必须存储并手动发送旧令牌和新令牌？
*   如何检测到用户删除了应用程序以删除服务器上的设备？

在我的例子中，最高优先级是让服务器知道哪些设备注册了该服务。旧设备（即旧令牌）需要立即移除。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:56:41.687

您应该在每次应用启动时注册远程通知并将令牌发送到您的服务器。

要检查用户是否删除了应用程序或禁用通知，您必须检查反馈服务。在此页面上查找它：

[https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/BinaryProviderAPI.html#//apple_ref/doc/uid/TP40008194-CH13-SW1](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/BinaryProviderAPI.html#//apple_ref/doc/uid/TP40008194-CH13-SW1)

注意：APNs 监控提供商在检查反馈服务方面的努力，并避免向设备上不存在的应用程序发送推送通知。

# tinymce - TinyMCE 表列属性

> ID：12565274
> 
> 赞同：3
> 
> 时间：2012-09-24T12:44:22.367
> 
> 标签：tinymce

TinyMCE 编辑器似乎缺乏将表格单元格属性应用到整个表格列的能力（这比应用到整行要简单得多——该功能就在那里）。

有没有可行的解决方案（补丁，插件..）？

# php - 如何在输入文本字段中只允许阿拉伯字符？

> ID：12565277
> 
> 赞同：2
> 
> 时间：2012-09-24T12:44:30.347
> 
> 标签：php, regex, arabic

我已经在这里搜索并找到了与此帖子相关的类似帖子，但我还没有找到解决方案。

我试过这个：

```
$text = "الحمد لله رب العالمين hello";

echo $is_arabic = preg_match('/\p{Arabic}/u', $text); 
```

我添加了 unicode 标志，但如果我添加任何英文字符，它会返回 true ！有什么解决办法吗？

有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T12:56:28.223

使用 unicode 标志：

```
$text = "الحمد لله رب العالمين";
echo $is_arabic = preg_match('/\p{Arabic}/u', $text);
                                   here __^ 
```

如果您只想匹配阿拉伯语，您应该这样做：

```
echo $is_arabic = preg_match('/^[\s\p{Arabic}]+$/u', $text); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T12:50:44.883

更新：我发现我对不支持的类显然是错误的（尽管文档中说“PCRE 不支持“Greek”或“InMusicalSymbols”等扩展属性”但[http://php.net/manual上的评论/en/regexp.reference.unicode.php#102756](http://php.net/manual/en/regexp.reference.unicode.php#102756)说它们受支持），所以我猜 M42 是更好的答案。但是，它们可以通过以下范围完成：

```
$text = "الحمد لله رب العالمين";

echo $is_arabic = 
preg_match('/^[\s\x{0600}-\x{06FF}\x{0750}-\x{077F}\x{08A0}-\x{08FF}\x{FB50}-\x{FDFF}\x{FE70}-\x{FEFF}\x{10E60}\x{10E60}—\x{10E7F}\x{1EE00}—\x{1EEFF}]+$/u', $text); 
```

# apache-flex - 带有 flex 移动设备的相机叠加层

> ID：12565278
> 
> 赞同：2
> 
> 时间：2012-09-24T12:44:34.660
> 
> 标签：apache-flex, mobile, air, camera, flash-builder

我想是否可以使用 flex 移动框架在相机上覆盖蒙版。我需要使用要在其上显示建筑物的相机开发一个跨平台（android/iOS）应用程序。所以我知道原生 iOS 和 android 代码是可能的。但我想用 flex mobile 来做。

你知道它是否只有可能吗？

非常感谢。

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T08:28:05.437

Using Adobe Air's camera class, you cannot manipulate the picture this way. You can change quality, sizing, frame rate etc., but cannot manipulate the image so it will show additional data except data received from the device.

# php - 单击“查看完整个人资料”链接时如何传入“ID”

> ID：12565279
> 
> 赞同：1
> 
> 时间：2012-09-24T12:44:35.840
> 
> 标签：php, sql

我正在开发一些功能，其中执行了初始搜索，正在显示配置文件详细信息的子集。这工作正常。

然后有一个名为“查看完整配置文件”的链接，如果单击该链接应返回整个配置文件。

我已经使用硬编码的 id 进行了这项工作，但不确定如何从信息子集中传入配置文件的 id？

我实际上不知道该值（配置文件的 id）当前是否可供我访问，以便在有意义的情况下传递它？

在个人资料详细信息的子集中，我包含了一个隐藏字段，其中包含我想传入的 id，但我不确定这是否可以使用？

相关代码贴在下面。

子集配置文件.HTML.PHP

```
 <div id="Profile" class="Profile"  >

    <h1 class="margin-top">Search Results</h1>

    <?php if (isset($results)): ?>

    <?php foreach ($results as $result): ?>

    <ol class="coach-display">
    <li class="left image">
      <img src="<?php if (!empty($result['filename'])) echo('?action=view&id=' . $result['id']); else echo "/img/profile_coming_soon.jpg" ?>" width="80" height="80" />
      </li>
    <li class="listleft">First Name:</li>
    <li><?php htmlout($result['firstname']); ?></li>

    <li class="listleft">Last Name:</li>
    <li><?php htmlout($result['lastname']); ?></li>

    <li class="listleft">Constituency:</li>
    <li><?php htmlout($result['constituency']); ?></li>

    <li class="listleft">Qualifications:</li>
    <li><?php htmlout($result['qualifications']); ?></li>

    </ol>

    <input type="hidden" name="id" value="<?php htmlout($result['id']); ?>">

    <a href="?more">View full profile</a>

    <?php endforeach; ?>

    <?php endif; ?>

    </div> 
```

索引.PHP

```
 if (isset($_GET['more']))
    {
        try
        {

        $sql = "SELECT id, firstname, lastname, area, county, constituency, qualifications, bio, monday, tuesday, wednesday, thursday, friday, saturday, sunday,
                filename, mimetype
                FROM pt
                WHERE id = 6";
        $s = $pdo->query($sql);
        }
        catch (PDOException $e)
        {
            $error = 'Error fetching pt details.' . $e->getMessage();;
            include 'profiles.html.php';
            exit();
        } 
```

您可以在 INDEX.PHP 中看到我已将值硬编码为 6。这是我需要动态的值，具体取决于先前查看的配置文件子集。

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:48:28.130

有很多方法可以做到这一点，但最简单的可能是在 url 中传递 id：

```
<a href="?more&id=<?php htmlout($result['id']); ?>">View full profile</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:47:37.323

改变

```
<a href="?more">View full profile</a> 
```

至

```
<a href="?more&id=<?php htmlout($result['id']); ?>">View full profile</a> 
```

`$_GET['id']`现在您可以使用..获取 id 值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:52:22.780

我假设 ID 也将来自 GET 参数。

```
if (isset($_GET['more']))
    {
        try
        {

        $sql = "SELECT id, firstname, lastname, area, county, constituency, qualifications, bio, monday, tuesday, wednesday, thursday, friday, saturday, sunday,
                filename, mimetype
                FROM pt
                WHERE id = ?";
        $sth = $pdo->prepare( $sql );
        $sth->execute(array( $_GET['id'] ));
        $s= $sth->fetchAll();
        } 
```

注意到我使用了不同的 PDO 函数。您需要变量绑定来避免 SQL 注入（或良好的过滤）。

更多详情请访问[http://php.net/manual/en/pdo.prepare.php](http://php.net/manual/en/pdo.prepare.php)

附言。尝试抽象您的输入。切勿在您的逻辑中直接使用 $_GET、$_POST、$_COOKIE 等。

# perl - 有没有理由在 Perl 包中包含 shebang 行？

> ID：12565284
> 
> 赞同：7
> 
> 时间：2012-09-24T12:44:54.647
> 
> 标签：perl, module

我意识到我应该只在我们想直接在 shell 中运行的脚本中包含 shebang 行。我也没有看到我在本地安装的任何大模块包中包含 shebang 行。

但是，我仍然很好奇人们是否会出于我尚未意识到的其他原因将其包含在内。或者，如果可能有类似（例如）〜'历史'的理由来包含它。还是应该永远不要将shebang行包含在.pm文件（句号）中，以免我的房子爆炸？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T12:48:54.403

不会。shebang 将文件标记为可执行文件，而模块通常不可执行。

一般来说，有例外。Python 有一个习惯用法来检测当前文件是否是由解释器调用的文件，并且相当多的模块在独立调用时使用它来运行它们的单元测试。这在 Perl 社区中并不常见，您在 CPAN 上的模块中捆绑了额外的单元测试文件。

因此，即使考虑到这种可能的例外情况，我也不认为在不打算直接执行的模块文件中包含 shebang 是一种好的风格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T12:54:21.723

简短的回答是否定的，但没有正确或错误的答案。

shebang 的目的是让操作系统知道解释器在哪里。不需要将它添加到任何 Perl 文件（脚本或模块）中。在 Windows 下，它无论如何都会被忽略**。

更具体地说，在大多数情况下，没有理由将其添加到模块中，除非出于某种原因您想直接执行该模块。无论如何，Perl 模块实际上只是一个 Perl 脚本，顶部有一个“包”命令。

无论哪种方式，如果它在那里，它不会受到伤害，但在大多数情况下它没有意义。

** 无论 Perl 是如何启动的，它总是会在 shebang 中查找命令行开关。这甚至适用于 Windows，操作系统不查找 shebang 行，但当 Perl 扫描文件时它会查找。请参阅[http://perldoc.perl.org/perlrun.html](http://perldoc.perl.org/perlrun.html)。

# jquery - jQuery - 我看不到任何错误

> ID：12565288
> 
> 赞同：2
> 
> 时间：2012-09-24T12:45:07.987
> 
> 标签：jquery

`<select>`我必须在某些标签中选择正确的选项。我有一个数组，其中键是标签的数量，值是我必须选择的选项的值属性。

**这是我的代码：**

```
//array ids contains values of option to select.
//.ingredients is class of <select> tags

var i=0;

$('.ingredients').each(function() {

$(this).find('option[value="' + ids[i] + '"]').attr("selected","selected");
i++                  
}); 
```

对于`<select class='ingredients>`选择正确选项字段的每个选项。ids 数组的键表示`<select>`标签的数量。这就是我想做的。

谁能告诉我错误是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:48:13.333

你忘了一个“;” 在`i++`...之后

您可以使用`index`with`each()`而不是使用“i”变量：

```
$('.ingredients').each(function(index) {
  $(this).find('option[value="' + ids[index] + '"]').attr("selected","selected");
}); 
```

此外，在选项上设置选定的属性比您最初想象的要复杂一些，因为如果选择元素的类型为“select-one”，它会影响其他元素。这是 jQuery Form 插件中提供的一个小插件，用于处理选择/取消选择选项以及复选框和单选。像这样使用它：

只需将其放在代码中的某个位置：

```
$.fn.selected = function(select) {
    if (select == undefined) select = true;
    return this.each(function() {
        var t = this.type;
        if (t == 'checkbox' || t == 'radio')
            this.checked = select;
        else if (this.tagName.toLowerCase() == 'option') {
            var $sel = $(this).parent('select');
            if (select && $sel[0] && $sel[0].type == 'select-one') {
                // deselect all other options
                $sel.find('option').selected(false);
            }
            this.selected = select;
        }
    });
}; 
```

然后尝试用这个替换你首先给出的代码：

```
$('.ingredients').each(function(index) {
  $(this).find('option[value="' + ids[index] + '"]').selected(true);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:50:36.313

而不是`.attr("selected", "selected")`，尝试`.prop("selected", true)`

[更新]

实际上，我认为代码没有任何问题。这是工作。我认为问题出在您的 HTML 上。您是否在 DOM Ready 事件之前执行代码？

见[http://jsfiddle.net/VPcMx/](http://jsfiddle.net/VPcMx/)

尝试

```
 $(function(){
    $('.ingredients').each(function(i) {

        $(this).find('option[value="' + ids[i] + '"]').prop("selected", true);
        i++                  
    });
}); 
```

# javascript - jQuery 选择器上下文：this 或 $(this)

> ID：12565289
> 
> 赞同：4
> 
> 时间：2012-09-24T12:45:11.433
> 
> 标签：javascript, jquery, this

将上下文传递给选择器时，传递`this`还是传递更好`$(this)`？我尝试了后者，它奏效了；[医生](http://api.jquery.com/jQuery/)提到了前者。

```
$('.link').on('click', function () {
  $('.element', this).addClass('something');
  // or, $('.element, $(this)).addClass('something'); ?
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:47:56.620

采用：

```
$(this).find('.element').addClass('something'); 
```

`$('.element', this)`会变成`$(this).find('.element')`内部的。

# javascript - ios Safari 6 中的 Ajax 发布请求不起作用

> ID：12565294
> 
> 赞同：5
> 
> 时间：2012-09-24T12:45:27.043
> 
> 标签：javascript, ios, ajax, mobile-safari, ios6

升级到iOS6.0 版本后，ajax 登录页面停止工作。看起来 jquery $.ajax 发出的 ajax 发布请求即使在添加随机查询字符串参数并将 Cache-control 设置为“no-cache”（这些在网上找到作为缓存问题的解决方案）之后也被缓​​存在 safari 中。第一次登录尝试工作正常，但在第二次登录请求浏览器注销后，不会从服务器获得任何响应正文。只有标题。

这同样适用于 IOS 6 GM 和 5 版本以及所有桌面浏览器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T12:52:20.123

[我刚刚在ars technica](http://arstechnica.com/apple/2012/09/developers-claim-safari-in-ios-6-breaks-web-apps-with-aggressive-caching/)阅读了这篇似乎与您的问题有关的文章。这似乎是苹果在 iOS6 中对 Safari 的“过度优化”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T22:38:08.810

此处还详细介绍了该主题： [iOS 6 上的 Safari 是否缓存 $.ajax 结果？](https://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results)

但是，还有一个注意事项，上述内容未涵盖。

关于 WCF 有一个有用的评论，它也适用于 ASP.NET MVC 应用程序的 SetCacheability。我建议这些调用仅限于非 GET 请求，以避免失去 GET 缓存的好处。

由于多种原因，我使用了一个 Controller 基类，我的所有控制器都从该基类继承，这很好，因为我的 Initialize 覆盖可以处理设置我的缓存标头。

```
public class SmartController : Controller
{
    ...
    public HttpContextBase Context { get; set; }

    protected override void Initialize(System.Web.Routing.RequestContext requestContext)
    {
        Context = requestContext.HttpContext;

        if (Context.Request.RequestType != "GET")
        {
            Context.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        }

        base.Initialize(requestContext);
        ...
    }
...
} 
```

# actionscript-3 - 基于Flash的桌面游戏。EXE 还是 AIR？

> ID：12565296
> 
> 赞同：1
> 
> 时间：2012-09-24T12:45:41.067
> 
> 标签：actionscript-3, flash, apache-flex

我对此表示怀疑。EXE 还是 AIR 更适合基于 Flash 的桌面游戏？我赞成 AIR 解决方案，因为它看起来更安全且独立于平台（Win 和 MAC 两者）。但是当我搜索谷歌时，游戏通常是EXE格式的。我想请教专家对此的意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T13:57:10.183

AIR 和 EXE 不是相互排斥的。

使用 AIR over Flash 可以让您访问 Flash 没有的其他 API。您可以使用 AIR 强制运行时创建 EXE。

选择将游戏部署为 EXE 文件还是 AIR 文件取决于您的情况。将其作为 AIR 文件分发的主要优点是文件大小会更小，因为 AIR 运行时将是独立的。但是，我通常更喜欢 EXE 而不是 AIR，即使它会导致文件更大，因为告诉用户安装熟悉的 EXE 而不是然后下载一些第三方运行时的 AIR 文件更容易。

如果您决定部署为 EXE，您有两个选择 - Flash 投影仪或 AIR 强制运行时。如上所述，AIR 让您可以访问其他 API，因此一般来说这将是更好的选择。此外，AIR 使您能够部署到多个平台，包括 Mac OS X、iOS、Android 和 BlackBerry PlayBook。据我所知，您只能为 Windows 和 Mac 创建 Flash 投影仪。

Flash 投影仪可能是更好选择的一种情况是，如果您希望将游戏部署为 Flash 网页游戏和桌面游戏。在这种情况下，使用 Flash 投影仪可确保两者之间的 API 对等，而使用 AIR 可能会导致使用仅限桌面的 API，然后您必须从 Flash 版本中删除这些 API。

# c# - caliburn micro 中的属性绑定

> ID：12565297
> 
> 赞同：1
> 
> 时间：2012-09-24T12:45:43.197
> 
> 标签：c#, wpf, caliburn.micro

我在视图上有一个图像，我想在 ViewModel 上创建一个可以绑定到其中的属性。问题是我不知道应该在 ViewModel 上创建什么类型的对象。我可以创建一个文本对象。我希望能够做到这些：

1.  设置图像的源属性（来自应用程序资源的图像）
2.  可以在运行时更改和调整图像大小。
3.  将图像源设置为来自硬盘的图像。

我应该只在 ViewModel 上创建一个对象，还是可以创建多个对象并且每个对象都绑定到图像控制的一个参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:53:08.793

为每个不同的数据创建一个属性，并绑定到它。它可以是原始类型，如`string`or `int`，也可以是包装这些值的自定义类。如果您选择该字母选项，您还需要确保绑定到您创建的自定义对象上的正确属性。

# java - 如何在并发客户端之间广播消息？

> ID：12565298
> 
> 赞同：0
> 
> 时间：2012-09-24T12:45:48.703
> 
> 标签：java, concurrency, broadcast, broadcasting

我有许多并发客户端——即线程同时运行和做某事。每个客户端都实现了某个事件总线的侦听器。来自该总线的消息可以到达一个或多个客户端。我的任务是将该消息广播给所有客户。

这个任务看起来很简单，但我找不到在某种程度上不难看的解决方案。

(1) 直截了当的解决方案：

```
void onMessageArrived(Message message) {
   broadcast(message);
} 
```

*   不好，因为每条消息都会被广播多次，因为多个客户端可以接收该消息，因此可以运行多个 onMessageArrived 处理程序。

(2) 我们可以将广播的消息存储在某个列表中：

```
void onMessageArrived(Message message) {
 if (alreadyBroadcastedConcurrentMap.putIfAbsent(message)==null) {
     broadcast(message);
 }
} 
```

*   这解决了前面提到的问题，但是许多客户端会重复将已经存在的消息放入该列表的无用操作。

但是可能有更好的选择吗？

爪哇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:52:10.720

问题在于您首先会收到多条消息。理论上，如果您应该收到 5 个广播请求，那么按照您的事件系统的工作方式应该会发生 5 个广播。简单地说，*如果这不是你想要的，那么你不应该使用这种模式。*

如果接收多条消息不是您可以控制的，那么至少，传递消息的接收者应该注意重复的消息并忽略它们，而不是将它们传递给其他线程。

简而言之，线程只做它被告知的事情。它不必担心另一个线程的状态，因此您应该在将消息传递给您的线程之前切换模式或拦截消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:05:27.213

您的设计包含缺陷，或者解释不当。您想向所有客户端广播，或向选定列表多播。指定一些收件人然后让每个收件人负责将其交付给所有其他客户端，手动处理重复和竞争是没有意义的。只需让所有客户端都听总线，可能会忽略消息。

我会介绍一个新的中央`Broadcaster`

```
public class Broadcaster {

  List<Client> clients;

  public void broadcast(Message msg) {
    for (Client client: clients)
      if (!msg.from().equals(client))
        msg.send(client);
  }
} 
```

显然每个客户端都必须注册到这个*广播域*

```
public class Client {

  private Broadcaster broadcaster;

  public void join(Broadcaster broadcaster) {
    this.broadcaster = broadcaster;
    broadcaster.announce(this);
  }

} 
```

并且忘记多次交付。如果客户端数量很大并且您有其他非常严格的要求 - 我认为您没有，您可以更进一步并使用多个广播域来模拟 LAN

# java - 如何在freemarker中检查空列表

> ID：12565300
> 
> 赞同：37
> 
> 时间：2012-09-24T12:45:53.383
> 
> 标签：java, null, freemarker

假设我的 java 代码有`List<String> listS =null`，我将它传递给我的模板文件。

现在我想确认一下`if list has some data then only do something`。

我努力了

```
<#if listS = null>
AND
<#if !listS>
AND
<#if listS?size=0> 
```

但这些似乎都不起作用。我的java代码有一些逻辑；通过它，如果某些条件为真，那么我`new`将其`listS`填充并填充它。

因此，我需要知道`listS`在我的模板文件中是否已填充或仅为空。

我该怎么做呢？谢谢。

编辑：另外，我有一个结构列表，每个都包含这个列表，（填充与否是一个不同的问题），并且我正在传递整个结构列表，因此将布尔值与我的列表一起传递给模板文件结构是不可能的，因为我必须在每个列表中进行遍历，并且我想在模板文件本身中进行遍历。

编辑 2：对于那些知道什么是 Java null 的人，FreeMarker 2.3.x 将它们视为缺失值。简单地说，模板语言不知道 null 的概念。例如，如果您有一个具有 maidenName 属性的 bean，并且该属性的值为 null，那么就模板而言，这与根本没有此类属性相同（假设您没有将 FreeMarker 配置为使用一些极端的对象包装器，即）。返回 null 的方法调用的结果也被视为缺失变量（再次假设您使用一些常用的对象包装器）。在常见问题解答中查看更多信息。

[自由标记手册](http://freemarker.sourceforge.net/docs/dgui_template_exp.html)

但是如果可以的话，我仍然没有得到如何让它工作的答案。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-24T13:04:47.577

使用[`has_content`](http://freemarker.sourceforge.net/docs/ref_builtins_expert.html#ref_builtin_has_content)内置：

```
<#if list5?has_content> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-04T18:34:24.193

您还可以使用[缺失值测试运算符](http://freemarker.sourceforge.net/docs/dgui_template_exp.html#dgui_template_exp_missing_test)，例如：

```
<#if listS??>
    <#list listS.stuff as stuff>
        ${stuff.value}
    </#list>
</#if> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-02-16T03:11:54.627

```
<#list myList![] as element>
   <#--  do something per element -->
</#list> 
```

如果列表为空或为空，则结果将为空。

# android - 可以使用gcm在android设备之间发送和接收消息吗？

> ID：12565301
> 
> 赞同：3
> 
> 时间：2012-09-24T12:45:54.980
> 
> 标签：android, zend-framework, curl, google-cloud-messaging

我有两个运行 gcm 客户端应用程序的 android 设备。我得到了两个设备的注册 ID。我还有一个服务器 API 密钥。现在的问题是，使用使用 cUrl 或 Zend 框架的简单 php 代码，我可以将消息从 Web 服务器发送到我的一个机器人（当然我也可以广播）。但是，有了这个，有没有办法将字符串从一个设备发送到另一个设备？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:51:44.597

[从我的书中](http://commonsware.com/Android/)引用自己的话：

> 您可能很想在没有自己的服务器的情况下使用 GCM 进行点对点消息传递。实际上，每个 Android 应用程序都是它自己的服务器，使用您可能在 Android 应用程序内的 Web 应用程序中使用的相同 JAR 向其他方发送消息。例如，您可以在没有专用聊天服务器的情况下实现聊天系统。
> 
> 这里的危险在于，这需要将您的 API 密钥嵌入到您的 Android 应用程序中。任何拥有该 API 密钥的人都完全有能力从您那里伪造消息。您可以对该 API 密钥设置的 IP 地址限制不太可能有帮助，因为您的合法使用可能来自任何 IP 地址，而不仅仅是某个单一服务器。由于在 APK 文件中找到魔法字符串对于那些有倾向的人来说并不难，因此将您的 API 密钥放入 APK 文件是一个危险的举动。

因此，您将需要自己的一些服务器作为中间人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T12:53:46.380

您可以做的一件事是使用消息和其他 Android 设备的注册 ID 向您的 Web 服务器发出 POST 请求，但这会有点麻烦，因为您必须想办法检索注册 ID来自您的网络服务器的其他 Android 设备。

我建议研究 XMPP，因为该协议是从头开始构建的，是一个广泛的消息传递协议。我很确定你会找到好的 XMPP 服务器框架来实现你的功能。

# c# - 是否可以移动 到一个单独的文件？

> ID：12565306
> 
> 赞同：2
> 
> 时间：2012-09-24T12:46:09.370
> 
> 标签：c#, wpf, xaml, resources, mainwindow

我在窗口资源中有几个动画作为故事板。

**有没有办法将它们移动到单独的文件并仍然可以访问它们？如果是，请告诉我如何。**

*为了清楚起见，我想将以下生成的代码从我的 MainWindow.xaml 文件移动到一个单独的文件中，这样我就可以保持代码的整洁和有条理：*

```
<Window.Resources>
        <Storyboard x:Key="sbShowWindow">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" Storyboard.TargetName="layoutRoot">
                <EasingDoubleKeyFrame KeyTime="0" Value="0.874">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" Storyboard.TargetName="layoutRoot">
                <EasingDoubleKeyFrame KeyTime="0" Value="0.874">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="layoutRoot">
                <EasingDoubleKeyFrame KeyTime="0" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)" Storyboard.TargetName="layoutRoot">
                <EasingDoubleKeyFrame KeyTime="0" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseInOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="layoutRoot">
                <EasingDoubleKeyFrame KeyTime="0" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseIn"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0.595">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseIn"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="1">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseIn"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Key="sbHideWindow">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" Storyboard.TargetName="layoutRoot">
                <EasingDoubleKeyFrame KeyTime="0" Value="1">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0.874">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)" Storyboard.TargetName="layoutRoot">
                <EasingDoubleKeyFrame KeyTime="0" Value="1">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0.874">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)" Storyboard.TargetName="layoutRoot">
                <EasingDoubleKeyFrame KeyTime="0" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)" Storyboard.TargetName="layoutRoot">
                <EasingDoubleKeyFrame KeyTime="0" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CircleEase EasingMode="EaseOut"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="layoutRoot">
                <EasingDoubleKeyFrame KeyTime="0" Value="1">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CubicEase EasingMode="EaseIn"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="0.245">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CubicEase EasingMode="EaseIn"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
                <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0">
                    <EasingDoubleKeyFrame.EasingFunction>
                        <CubicEase EasingMode="EaseIn"/>
                    </EasingDoubleKeyFrame.EasingFunction>
                </EasingDoubleKeyFrame>
            </DoubleAnimationUsingKeyFrames>
        </Storyboard>
    </Window.Resources> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T13:08:19.283

您可以将此代码放入单独的资源字典中，可以在同一个程序集中，也可以在另一个程序集中。然后，您只需将该字典添加到窗口资源的合并字典集合中：

```
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="pack://application:,,,/YourAssembly;component/Folder/YourResourceDictionary.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Window.Resources> 
```

这是包 URI 的[语法](https://docs.microsoft.com/en-us/dotnet/framework/wpf/app-development/pack-uris-in-wpf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:53:36.190

一种解决方案是将它们作为资源放入 App.xaml 中。这样，您将拥有可以在全球范围内访问的资源。

另一种方法（我更喜欢）是在单独的资源字典中定义与资源相关的事物，并将其加载到 Application_StartUp 事件的代码中。在选择要加载的资源文件时，它给了我更大的灵活性。

一些示例代码：

```
 var basicUriString   = String.Format("/{0}.Base;component/Basic.xaml", skinName);

        try
        {
            var uri = new Uri(basicUriString, UriKind.RelativeOrAbsolute);
            newDict = new ResourceDictionary { Source = uri };
            if (!Application.Current.Resources.MergedDictionaries.Any(dic => dic.Source.OriginalString.Contains(basicUriString)))
            {
                Application.Current.Resources.MergedDictionaries.Add(newDict);
            }
        }
        catch (Exception e)
        {
            // log error
        } 
```

此方法将资源字典添加到应用程序资源，假设存在一个名为 {skinName}.Base 的程序集，我将其作为方法参数传入。

# webdav - 将 WebDAV ContentClass、OutlookMes sageClass 和其他属性映射到 EWS 托管 API

> ID：12565313
> 
> 赞同：1
> 
> 时间：2012-09-24T12:46:48.227
> 
> 标签：webdav, exchangewebservices, exchange-server-2010, ews-managed-api

我正在从 WebDAV 迁移到 Exchange 2010 中的 EWS 托管 API，并且在属性映射方面遇到了一些问题。

在 WebDAV 中，我有一个自定义的 .Net 包装器，并用它创建了这样的 where 条件：

```
Where w = new Where();
w.Add(new WhereCondition(Properties.ContentClass, Enums.ComparisonOperatorsEnum.NotEquals, "urn:content-classes:message"));
w.Add(new WhereCondition(Properties.OutlookMessageClass, Enums.ComparisonOperatorsEnum.Like, "IPM.Schedule.Meeting.Resp.%")); 
```

包装器只是在幕后创建正确的 WebDAV 搜索 SQL 语句。

Properties.ContentClass 等于 WebDAV XML 模式中的 DAV:contentclass，我已经将它映射到 EWS 中的 Item.ItemClass。至少我希望这能映射到它。

Properties.OutlookMes​​sageClass 等于WebDAV XML 架构中的[http://schemas.microsoft.com/exchange/outlookmessageclass](http://schemas.microsoft.com/exchange/outlookmessageclass)。但我还没有找到任何可以映射到该属性的 EWS 属性。

某处是否有已知的映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:43:53.483

经过大量搜索，联系了一些 Exchange MVP 甚至是 Microsoft 人员，答案始终是：
没有映射，重新设计应用程序。

# qt - Qt QWizard如何去除字幕区域

> ID：12565314
> 
> 赞同：1
> 
> 时间：2012-09-24T12:46:47.797
> 
> 标签：qt

我需要从 QWizard 页面中删除字幕区域。请告诉我有没有办法做到这一点？

谢谢，巴斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:03:15.697

使用`QWizard::IgnoreSubTitles`选项：

```
wizard->setOption(QWizard::IgnoreSubTitles, true); 
```

# android - 使用 onFling 和 ViewPager

> ID：12565317
> 
> 赞同：5
> 
> 时间：2012-09-24T12:47:09.873
> 
> 标签：android, android-viewpager, onfling

我正在尝试为水平导航实现 ViewPager，并为垂直导航实现 GestureDetector 的 onFling。ViewPager 没问题，但是 onFling 不行。编码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.test_flipper);
    cxt = this;

    viewPageAdapter = new MyPagerAdapter();
    viewPager = (ViewPager) findViewById(R.id.mypager);
    viewPager.setAdapter(viewPageAdapter);

    viewFlipper = (ViewFlipper)findViewById(R.id.flipper);
    slideLeftIn = AnimationUtils.loadAnimation(this, R.anim.slide_left_in);
    slideLeftOut = AnimationUtils.loadAnimation(this, R.anim.slide_left_out);
    slideRightIn = AnimationUtils.loadAnimation(this, R.anim.slide_right_in);
    slideRightOut = AnimationUtils.loadAnimation(this, R.anim.slide_right_out);

    gestureDetector = new GestureDetector(new VerticalGesture());

    gestureListener = new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if (gestureDetector.onTouchEvent(event)) {
                return true;
            }
            return false;
        }
    };      

}

public boolean onTouchEvent(MotionEvent event) {
    if (gestureDetector.onTouchEvent(event))
        return true;
    else
        return false;
} 
```

和 onFling 工具：

```
 public  class VerticalGesture extends GestureDetector.SimpleOnGestureListener{

    private static final float SWIPE_MAX_OFF_PATH = 200;
    private static final float MIN_DISTANCE_SWIPE = 10;
    private static final float MIN_VELOCITY = 10;

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
        try {
            if (Math.abs(e1.getX() - e2.getX()) > SWIPE_MAX_OFF_PATH)
                return false;
            // top to down swipe
            if(e1.getY() - e2.getY() > MIN_DISTANCE_SWIPE && Math.abs(velocityY) > MIN_VELOCITY) {
                viewFlipper.setInAnimation(slideLeftIn);
                viewFlipper.setOutAnimation(slideLeftOut);
                viewFlipper.showNext();
            }  else if (e2.getY() - e1.getY() > MIN_DISTANCE_SWIPE && Math.abs(velocityY) > MIN_VELOCITY) {
                viewFlipper.setInAnimation(slideRightIn);
                viewFlipper.setOutAnimation(slideRightOut);
                viewFlipper.showPrevious();
            }
        } catch (Exception e) {
            // nothing
        }
        return false;
    }

    @Override
    public boolean onDown(MotionEvent e) {
        return true;        
    }
} 
```

PagerAdapter 类：

```
public class MyPagerAdapter extends PagerAdapter{

    @Override
    public int getCount() {
        return NUM_MAX_VIEWS;
    }

    @Override
    public Object instantiateItem(View collection, int position) {
        TextView tv = new TextView(cxt);
        tv.setText("Dashboard " + position);
        tv.setTextColor(Color.WHITE);
        tv.setTextSize(30);

        ((ViewPager) collection).addView(tv,0);

        return tv;
    }

    @Override
    public void destroyItem(View collection, int position, Object view) {
        ((ViewPager) collection).removeView((TextView) view);
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view==((TextView)object);
    }

    @Override
    public void finishUpdate(View arg0) {}

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1) {}

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate(View arg0) {}

} 
```

欢迎任何指南或资源。谢谢

# java - 在java中验证zip文件

> ID：12565323
> 
> 赞同：-4
> 
> 时间：2012-09-24T12:47:21.900
> 
> 标签：java, validation, zip

我已经使用 Java 中的 zip4j 压缩了一个包含文件和文件夹的文件夹。我想验证创建的 zip -

*   压缩前选择的文件数？
*   压缩过程中文件是否没有损坏？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:51:04.147

我要做的是将文件夹提取到不同的位置，使用标准 POSIX`find`和`cmp`命令来比较原始目录和提取目录中的相应文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:06:39.067

请通读此片段。 [http://www.java-examples.com/get-crc-32-checksum-zip-entry-example](http://www.java-examples.com/get-crc-32-checksum-zip-entry-example)

您可以捕获对文件进行无效检查的执行。

看下面的片段

```
while(e.hasMoreElements())
{
    ZipEntry entry = (ZipEntry)e.nextElement();

    /*
     * To get CRC-32 checksum of an entry, use
     *
     * long getCrc()
     * method of Java ZipEntry class.
     *
     * This method returns the CRC checksum for a particular
     * zip entry, or -1 if not known.
     */                            

    String entryName = entry.getName();
    long crc = entry.getCrc();

    System.out.print(entryName);
    System.out.print("\t\t\t\t" + crc);
    System.out.print("\n");
} 
```

您可以使用此代码并插入一个静态计数器来计算 zip 中的文件。将此代码耦合到您的压缩逻辑应该可以正常工作。

# php - Wampserver cakephp 1.3 严格标准错误

> ID：12565328
> 
> 赞同：1
> 
> 时间：2012-09-24T12:47:52.097
> 
> 标签：php, cakephp, error-handling, wamp

我现在对我的新 Wampserver 越来越疯狂。我切换到一台新计算机并安装了 Wamp 并将我的 cakephp 1.3 文件夹移动到该`C:\wamp\www`文件夹​​，我得到的只是这个错误：

![我的错误信息](../Images/582c8ed9cd44b2ea68019b3f14f3d15b.png)

以下是我知道的一些事实和我已经尝试过的东西：

*   这是一个现有项目，我不能只使用 CakePHP 2，因为它可能会破坏代码
*   我已经`error_reporting`在**正确** `php.ini`的文件中编辑了。我已经尝试了所有关于`E_ALL & ~E_DEPRECATED & ~E_STRICT`
*   更改`php.ini`文件时，我已经完成了从重新启动 Windows 到重新启动 Wampserver 的所有操作

有谁知道我错过了什么？浏览 20 个指南和答案，谁应该解决问题但没有解决，这令人沮丧。

错误仍然存​​在，网站的其余部分按预期工作。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T13:04:51.490

升级到最新的 1.3 稳定版（1.3.15），内部已经设置好了`error_reporting(E_ALL & ~E_DEPRECATED & ~E_STRICT);`。

编辑：为了进一步澄清，您必须使用较旧的 1.3 版本，该版本设置`error_reporting(E_ALL & ~E_DEPRECATED);`在核心中，从而覆盖您在 php.ini 中设置的报告级别

# php - PHP表不会显示

> ID：12565331
> 
> 赞同：0
> 
> 时间：2012-09-24T12:47:59.770
> 
> 标签：php, html

我正在尝试在 PHP 中输​​出一个表，但由于某种原因，它没有显示我的语法有错误，如果有人可以提供帮助，我不明白它会很棒：

```
<div id="Body1">
<?php
  echo " <table width="800" border="0" align="center"> ";
  echo " <tr> <td height="106" id="main" style="background-image: url(img/bk01.jpg); background-repeat: x;"> </td> </tr> ";
  echo " <tr> <td >   </td> </tr> ";
  echo " <tr><td height="606" id="main" style="background-image: url(img/bk02.jpg); background-repeat: x;" >";  include 'menu.php' echo"</td> </tr> ";
  echo " <tr> <td ></td></tr> ";
  echo" <tr><td height="49" id="Footer" style="background-image: url(img/bk03.gif); background-repeat: x;"> &nbsp; </td> </tr> ";
  echo"</table>";
?>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:49:28.877

将“回声内”的“”更改为“。

例如

```
<?php echo " <table width='800' border='0' align='center'>";?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T12:50:30.667

在 PHP 中使用`""`和使用时请小心。`''`

您的代码应该是这样的：

```
<?php echo " <table width='800' border='0' align='center'> "; OR 
<?php echo ' <table width="800" border="0" align="center"> '; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T12:50:00.813

将双引号更改为单引号作为包装器：

```
<div id="Body1">
<?php
  echo ' <table width="800" border="0" align="center"> ';
  echo ' <tr> <td height="106" id="main" style="background-image: url(img/bk01.jpg); background-repeat: x;"> </td> </tr> ';
  echo ' <tr> <td >   </td> </tr> ';
  echo ' <tr><td height="606" id="main" style="background-image: url(img/bk02.jpg); background-repeat: x;" >';
  include 'menu.php';
  echo '</td> </tr> ';
  echo ' <tr> <td ></td></tr> ';
  echo '<tr><td height="49" id="Footer" style="background-image: url(img/bk03.gif); background-repeat: x;"> &nbsp; </td> </tr> ';
  echo '</table>';
?>
</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T12:52:52.230

`''`如果没有任何 php 变量并使用 html，则使用in echo，这样您就不需要转义`"`in html 标签`href=\"#\"`或使用 like`echo '<a href="#">'.$link.'</a>';`

像回声'';

并使用`""`是否有带有 html 标记的 php 变量

喜欢`echo "<a href=\"#\">{$link}</a>";`或喜欢`echo "<a href=\"#\">".$link."</a>";`

所以正确的将是

```
 echo ' <table width="800" border="0" align="center"> ';
  echo ' <tr> <td height="106" id="main" style="background-image: url(img/bk01.jpg); background-repeat: x;"> </td> </tr> ';
  echo ' <tr> <td >   </td> </tr> ';
  echo ' <tr><td height="606" id="main" style="background-image: url(img/bk02.jpg); background-repeat: x;" >';  

  include 'menu.php' ;

  echo '</td> </tr> ';
  echo ' <tr> <td ></td></tr> ';
  echo' <tr><td height="49" id="Footer" style="background-image: url(img/bk03.gif); background-repeat: x;"> &nbsp; </td> </tr> ';
  echo'</table>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T12:50:11.893

您需要转义引号，或使用单引号和双引号的组合。

例如。

```
echo " <table width='800' border='0' align='center'> "; 
```

或者

```
echo " <table width=\"800\" border=\"0\" align=\"center\"> "; 
```

# jasper-reports - 如何为报告中的图像设置完整的 url 路径

> ID：12565337
> 
> 赞同：0
> 
> 时间：2012-09-24T12:48:13.973
> 
> 标签：jasper-reports, jasperserver

我在“hostname2”上安装了 Jasperserver，“hostname1”位于 CMS。

我在“hostname1”上运行了一个报告，其中 html 图像链接看起来像`/images/img_****`但没有显示。相反，它们应该是这样的：`http://"hostname2"/images/img_****`.

主要的是他们有正确的图片链接......以前有人遇到过这种问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:50:14.540

如果您的图像放置在 .jasper（存在已编译的 jrxml 文件）的同一目录中，那么，

```
<imageExpression class="java.lang.String"><![CDATA["image_name.jpg"]]></imageExpression> 
```

# java - 在 @Lob 字段中搜索 IndexOutOfBound

> ID：12565339
> 
> 赞同：2
> 
> 时间：2012-09-24T12:48:33.093
> 
> 标签：java, hibernate, hsqldb

`@Lob`在字段中进行搜索查询时，我遇到了奇怪的行为。

我将 HSQLDB 和 Hibernate 与 JPA2 一起使用。

查询是：（`@NamedQuery(name = "URL.findByPathAndDomain", query = "select u from URL u where u.path = :path and u.domain.domain = :domain")`顺便`path`说一下，是@lob 字段）。

我在DAO中实现了这样的方法：

```
public URL findByPathAndDomain(String path, String domain) {
        URL url = null;
        TypedQuery<URL> query = em().createNamedQuery("URL.findByPathAndDomain", URL.class);
        query.setParameter("path", path);
        query.setParameter("domain", domain);
        try {
            url = query.getSingleResult();
        } catch (NoResultException e) {
            logger.error(e.getMessage());
        }
        return url;
    } 
```

我得到了这个例外：

```
Caused by: org.hibernate.exception.GenericJDBCException: java.lang.NullPointerException java.lang.NullPointerException
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:54)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy45.executeQuery(Unknown Source)
    at org.hibernate.loader.Loader.getResultSet(Loader.java:1897)
    at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1698)
    at org.hibernate.loader.Loader.doQuery(Loader.java:832)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:293)
    at org.hibernate.loader.Loader.doList(Loader.java:2382)
    at org.hibernate.loader.Loader.doList(Loader.java:2368)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2198)
    at org.hibernate.loader.Loader.list(Loader.java:2193)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:470)
    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:355)
    at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:195)
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1248)
    at org.hibernate.internal.QueryImpl.list(QueryImpl.java:101)
    at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:285)
    ... 10 more 
```

如果我删除`@Lob`注释，一切都会好起来的。它是 HSQLDB 错误、Hibernate 错误还是什么？

编辑：我将 PU 更改为使用 MySQL 而不是 HSQLDB，它像老板一样工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:04:10.117

NPE 发生在 Hibernate 的 StandardSQLExceptionConverter 中。去年发现并报告了类似的 NPE。我记得在某些情况下，当数据库无法进行转换时，Hibernate 的错误报告被破坏并导致 NPE。

Best course of action is to use a large VARCHAR field instead of LOB.

# variables - Jasper ireport：子报告的顺序

> ID：12565340
> 
> 赞同：0
> 
> 时间：2012-09-24T12:48:35.413
> 
> 标签：variables, jasper-reports, ireport, subreport

我想知道 Jasper/ireport 如何处理子报告。

我必须从第一个子报告返回结果并将其传递给第二个。

现在变量为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:00:28.017

您可以在主报告的子报告标记中指定 datasourceExpression 中的对象（bean）。

例如：

```
<dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{patientBean})]]></dataSourceExpression> 
```

如果您仍然感到困惑，请详细说明您的问题，以便我可以为您提供更清晰的解决方案。

# javascript - 在 Javascript 中，我怎样才能以这种格式 yyyymmdd 获取今天的日期

> ID：12565349
> 
> 赞同：0
> 
> 时间：2012-09-24T12:48:58.950
> 
> 标签：javascript, date

就像我需要以 20120924 (yyyymmdd) 之类的格式获取今天的日期。我怎样才能在 javascript 中获取它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:01:13.317

您可以向日期原型添加一个方法，这样您就可以在任何日期对象上使用它：

```
Date.prototype.toMyString = function () {

    function padZero(obj) {
          obj = obj + '';
          if (obj.length == 1)
              obj = "0" + obj
          return obj;
    }

    var output = "";
    output += this.getFullYear();
    output += padZero(this.getMonth()+1);
    output += padZero(this.getDate());

    return output; 
}

var d = new Date();
alert(d.toMyString());  // Today

var otherDate = new Date(2012,0,1);
alert(otherDate.toMyString());​  //Jan 1 2012 
```

小提琴：http: [//jsfiddle.net/johnkoer/4rk7K/10/](http://jsfiddle.net/johnkoer/4rk7K/10/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-12T14:31:02.787

这对我有用。

```
var rDate = (new Date()).toISOString().slice(0, 10).replace(/-/g, ""); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T12:57:08.540

试试这个。

```
​var date = new Date();
var year = date.getFullYear().toString();
var month = date.getMonth().toString();
var day = date.getDate().toString();

if (parseInt(month) < 10) month = "0" + month;
if (parseInt(day) < 10) day = "0" + day;

var parsedDate = year + month + day; 
```

（编辑）通过使日期等于一个月中的一天而不是一周中的一天来改进此功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-03T06:01:26.580

怎么样

```
date = new Date().toJSON().substr(0,10).split("-")
date = date[0] + date[1] + date[2] 
```

编辑：
这将返回 UTC 日期，而不是本地日期...

对于本地日期，您可以使用：

```
date = new Date().toLocaleDateString().split("/");  // "M/D/YYYY"
date[0] = date[0].length == 1 ? "0" + date[0] : date[0];
date[1] = date[1].length == 1 ? "0" + date[1] : date[1];
date = date[2] + date[0] + date[1]; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-24T12:52:26.110

```
var d = new Date();
var curr_date = d.getDate();
var curr_month = d.getMonth();
var curr_year = d.getFullYear();
document.write(curr_year + curr_month + curr_date); 
```

那应该给出正确的日期:)

# android - 由于每帧都调用 GC Malloc，Camera.Preview 回调效率低吗？

> ID：12565350
> 
> 赞同：1
> 
> 时间：2012-09-24T12:49:00.660
> 
> 标签：android, garbage-collection, android-camera

当 Camera.preview 回调运行时，每帧都会调用 GC Malloc。我假设这会增加我的帧速率的缓慢性。

有人对减少这些电话的方法有任何建议吗？我尝试在 google 群组上进行搜索，但似乎没有太多回应，所以我想从在其应用程序中构建和使用相机预览的人那里获取信息。

当调用 GC Malloc 时，似乎每次都使用一条新数据来保存一个帧。这可以预定义吗？- 这是 callbackwithBuffer 做的吗？我在解决这个问题时遇到了麻烦，并且无法正确地使用缓冲区实现回调，因此对于如何做到这一点的任何帮助将不胜感激。

也有人可以完全解释相机预览运行时帧在内存中发生的情况。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:54:25.363

您遇到的问题是旧版本的 android 内存分配和垃圾收集在短时间内导致性能瓶颈的问题。

可以在这里找到解释： [http ://code.google.com/p/android/issues/detail?id=2794](http://code.google.com/p/android/issues/detail?id=2794)

您的问题可以通过使用一些隐藏的方法来解决。但是，您需要使用反射来公开它们（错误链接有更多示例）。

如果我没记错的话，这个问题已经在 Froyo 中修复了。

# numpy - 在 Mac OSX Lion 上安装 scipy 时遇到问题

> ID：12565351
> 
> 赞同：0
> 
> 时间：2012-09-24T12:49:06.270
> 
> 标签：numpy, python-2.7, scipy

我已经用 brew 安装了新的 python-2.7.2 实例。从 pip 安装 numpy，然后从源安装。我不断得到

numpy.distutils.npy_pkg_config.PkgNotFound：找不到文件['/usr/local/Cellar/python/2.7.2/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ numpy/core/lib/npy-pkg-config/npymath.ini']

当我尝试从源代码或通过 pip 安装 scipy 时，它让我发疯。

Scipy 的二进制安装程序告诉我，python 2.7 是必需的，而我没有（我安装了 2 个版本）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T07:32:44.237

环保署的分发挽救了这一天。

# continuous-integration - jenkins - 重启后的混合构建历史

> ID：12565353
> 
> 赞同：5
> 
> 时间：2012-09-24T12:49:07.070
> 
> 标签：continuous-integration, jenkins, hudson

我们在同一个 git 存储库上有不同的 Jenkins-Jobs 和不同的工件。几周后一切正常。

但是，由于我们重新启动了服务器以进行更新，每个构建历史都向我们显示了相同的信息……而且我们的仪表板显示了错误的作业构建号。

[http://www.picfront.org/d/8OC6](http://www.picfront.org/d/8OC6)（由于声誉限制无法发布图片）

就像您可以看到每个作业仍然具有内部版本号 107，但只有主要作业在此编号，其他作业在 30 到 50 左右……因此，关于内部版本的每个信息都有点不正确。

信息：

*   构建系统：Jenkins 1.477 Win XP 32 位 Java 7
*   同一个 git-repository 上的 5 个作业
*   构建一个 Eclipse 应用程序和一个 Andorid 应用程序

[编辑]

我还在 Jenkins-Log 中遇到了一些错误-

```
24.09.2012 13:29:03 hudson.model.RunMap load
WARNUNG: multiple runs claiming to be #41; using run from C:\Jenkins... 
```

[编辑2]

我发现当我添加一个新的 FreeStyle 作业时，它还会在重新启动后显示其他作业的完整历史记录。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T18:35:08.280

解决方案是在 jenkins 的全局配置中设置一个参数化路径，用于保存构建。你可以在下面找到这个值

**管理 Jenkins --> 配置页面 --> 高级配置 --> 构建路径**

在我的情况下，我配置了一个绝对路径，因此每个构建都保存在一个目录中。重新启动后，每个作业都会检查此文件夹并声明构建。

现在我有：**${ITEM_ROOTDIR}/builds**

所以每个作业都有自己的构建目录，问题就消失了。

*来源：[https ://groups.google.com/forum/?fromgroups=#!topic/jenkinsci-users/SgSJKBJIClg](https://groups.google.com/forum/?fromgroups=#!topic/jenkinsci-users/SgSJKBJIClg)*

# azure - 虚拟机网络

> ID：12565354
> 
> 赞同：2
> 
> 时间：2012-09-24T12:49:15.353
> 
> 标签：azure

在新门户中，我创建了几个新的虚拟机。在部署期间，我可以选择创建独立机器或连接到另一台机器。但是无论我做出什么选择，机器之间都没有连接。

是否可以将它们连接到同一个 VMnwetwork/VLAN？

我想在它们相互通信的设置中测试两台服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:00:14.577

是的，您有两个选择：

*   [创建虚拟网络](https://www.windowsazure.com/en-us/manage/services/networking/add-a-vm-to-a-virtual-network/)
*   [在现有的云服务中添加虚拟机](https://www.windowsazure.com/en-us/manage/windows/how-to-guides/connect-to-a-cloud-service/)（主要用于负载均衡）

请注意，如果不打开 Windows 防火墙上的端口，ping 可能无法正常工作（[来源](http://blogs.biztalk360.com/windows-azure-virtual-machines-virtual-network-may-not-ping-automatically/)）

# javascript - 未捕获的类型错误无法读取未定义的属性“事件”

> ID：12565356
> 
> 赞同：2
> 
> 时间：2012-09-24T12:49:23.950
> 
> 标签：javascript, jquery, html, jquery-mobile

我正在尝试创建一个简单的应用程序，将输入的值写入控制台上的表单：

HTML：

```
<input type="email" name="email-address" value="" id="email-address" />

<label for="password">Password</label>
<input type="password" name="password" value="" id="password" />

<input type="submit" name="submit" class="btn" value="Login" onclick="login_existing_submit()" id="register-submit" /> 
```

Javascript：

```
function login_existing_submit() {
    console.log(document.getElementById("email-address").value);            
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:52:36.337

试试这个

```
onclick="login_existing_submit();" 
```

并将此 onclick 事件更好地分配给按钮而不是提交（不确定，但它的 gud）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:07:25.783

如果这是表格，你就有麻烦了。因为在这种情况下，onclick 处理程序被调用，但表单也被提交。从您的代码来看，似乎没有问题。

我也做了一个[小提琴](http://jsfiddle.net/2T3XH/1/)。

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2012-09-24T12:53:08.407

您不能在 ID 中使用连字符。

```
<input type="email" name="email-address" value="" id="emailaddress" />

function login_existing_submit() 
{
    console.log(document.getElementById("emailaddress").value);            
} 
```

[工作小提琴。](http://jsfiddle.net/drAUB/)

# java - java - 如何在java swing中的jtextarea顶部插入或追加新行？

> ID：12565358
> 
> 赞同：6
> 
> 时间：2012-09-24T12:49:36.180
> 
> 标签：java, swing, append, jtextarea

java - 如何在java swing中的jtextarea顶部插入或追加新行？ **我想附加 jtextarea 并在 jtextarea 顶部添加新行，请帮助我如何做到这一点。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T12:51:38.733

你可以这样做：

```
textArea.setText("The new text\n" + textArea.getText()); 
```

或者，更好的解决方案是：

```
try {
  textArea.getDocument().insertString(0, "The new text\n", null);
} catch (BadLocationException e) {
  e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T13:01:53.770

[`Document`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Document.html)您最好的选择是直接修改`JTextArea`.

这是一个小演示：

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Date;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;
import javax.swing.text.BadLocationException;

public class TestTextArea {

    private void initUI() {
        JFrame frame = new JFrame("test");
        final JTextArea textarea = new JTextArea(24, 80);
        JButton addText = new JButton("Add line");
        addText.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                try {
                    textarea.getDocument().insertString(0, "New line entered on " + new Date() + "\n", null);
                } catch (BadLocationException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }
            }
        });
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new JScrollPane(textarea));
        frame.add(addText, BorderLayout.SOUTH);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTextArea().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T12:51:24.537

`textArea.setText("this is new line" + "\n" + textArea.getText())`

# java - 使用 mysql 驱动程序的 solr 索引性能

> ID：12565359
> 
> 赞同：0
> 
> 时间：2012-09-24T12:49:41.360
> 
> 标签：java, solr, lucene

所以，使用 solr 4.0

我有一个相当直接的实体设置，有 1 个子实体（1:N 关系）

要导入的数据位于 mysql 服务器上

主表约3000万条记录子表约500万条记录（大部分父实体没有子实体，其余一般只有一个1）

我遇到了相当糟糕的索引（导入）性能。每秒大约 80 个实体（文档）。所以要索引这张表，理论上需要几天时间。

现在从我所看到的 solr 报告来看，例如，如果我告诉它索引前 1000 个实体，它实际上会向 sql 发出 1000 多个查询。我也尝试过为数据源设置 batchSize 属性，但没有成功......只有 -1 有效（否则内存不足异常）。

真的不知道我能做些什么来优化这个，mysql没有合适的数据导入器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:12:18.370

您可以使用[CachedSqlEntityProcessor](http://wiki.apache.org/solr/DataImportHandler#CachedSqlEntityProcessor)以便至少缓存子实体查询...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:13:40.710

认为 cachedEntity 方法在另一个问题上帮助了我，我发现使用嵌套实体通常不仅仅是可行的。

为每个“根”实体触发子实体查询的逻辑永远不会起作用。

我已经将我的语句重写为 SQL JOIN，它将根实体和子实体作为单行获取并相应地映射到字段，性能显着提高。

# sql-server - 过程 SQL Server 中的 WSO2 数据 DelegatingResultSet.isClosed

> ID：12565360
> 
> 赞同：0
> 
> 时间：2012-09-24T12:49:43.290
> 
> 标签：sql-server, wso2

我在使用 wso2 数据版本 2.6.3 时遇到问题，无法在 sql server 中执行过程：我的配置：

```
<data name="TestDS">         
    <config id="ds_test">                  
  <property name="org.wso2.ws.dataservice.driver">net.sourceforge.jtds.jdbc.Driver</property>                  
  <property name="org.wso2.ws.dataservice.protocol">jdbc:jtds:sqlserver://172.16.16.16:1433/db_stores;instance=sql1</property>                  
  <property name="org.wso2.ws.dataservice.user">storeuser</property>                  
  <property name="org.wso2.ws.dataservice.password">3st0re123</property>                  
  <property name="org.wso2.ws.dataservice.autocommit"></property>         
</config>         
<query id="qrySearchTest" useConfig="ds_test">                  
  <sql>exec USP_PesquisaSistema  @SIS_CRIPTOGRAFIA_PASSAPORTE =:chave</sql>                  
  <result element="sistemas" rowName="sistema" defaultNamespace="http://store.test.org.br">                           
     <element name="codigoSistema" column="SIS_IDF" xsdType="xs:integer" />                           
     <element name="siglaSistema" column="SIS_SIGLA" xsdType="xs:string" />                           
     <element name="nomeSistema" column="SIS_NOME" xsdType="xs:string" />                  
  </result>                  
  <param name="chave" sqlType="STRING" ordinal="1" />         
</query>         
    <operation name="SearchTest">                  
      <call-query href="qrySearchTest">                           
         <with-param name="chave" query-param="chave" />                  
      </call-query>         
    </operation>
</data> 
```

和错误**java.lang.AbstractMethodError**：

```
TID: [0] [WSO2 Data Services Server] [2012-09-24 09:44:32,762] ERROR org.apache.axis2.transport.http.AxisServlet} - {org.apache.axis2.transport.http.AxisServlet} java.lang.AbstractMethodError

    at org.apache.commons.dbcp.DelegatingResultSet.isClosed(DelegatingResultSet.java:688)
    at org.apache.commons.dbcp.DelegatingResultSet.isClosed(DelegatingResultSet.java:688)
    at org.wso2.carbon.dataservices.core.description.query.SQLQuery.processStoredProcQuery(SQLQuery.java:904)
    at org.wso2.carbon.dataservices.core.description.query.SQLQuery.runQuery(SQLQuery.java:2071)
    at org.wso2.carbon.dataservices.core.description.query.Query.execute(Query.java:252)
    at org.wso2.carbon.dataservices.core.engine.CallQuery.execute(CallQuery.java:185)
    at org.wso2.carbon.dataservices.core.engine.CallQueryGroup.execute(CallQueryGroup.java:110)
    at org.wso2.carbon.dataservices.core.description.operation.Operation.execute(Operation.java:71)
    at org.wso2.carbon.dataservices.core.engine.DataService.invoke(DataService.java:592)
    at org.wso2.carbon.dataservices.core.engine.DSOMDataSource.execute(DSOMDataSource.java:99)
    at org.wso2.carbon.dataservices.core.engine.DSOMDataSource.serialize(DSOMDataSource.java:110)
    at org.wso2.carbon.dataservices.core.engine.DSOMDataSource.getReader(DSOMDataSource.java:116)
    at org.apache.axiom.om.impl.llom.OMSourcedElementImpl.getDirectReader(OMSourcedElementImpl.java:225)
    at org.apache.axiom.om.impl.llom.OMSourcedElementImpl.forceExpand(OMSourcedElementImpl.java:254)
    at org.apache.axiom.om.impl.llom.OMSourcedElementImpl.getFirstOMChild(OMSourcedElementImpl.java:867)
    at org.apache.axiom.om.impl.OMNavigator._getFirstChild(OMNavigator.java:196)
    at org.apache.axiom.om.impl.OMNavigator.updateNextNode(OMNavigator.java:140) .....
    ...... 
```

在 2.5.1 版本中有效。如果我粘贴没有 SP 的 sql 查询，则可以。

可以帮我 ？感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T12:12:16.303

您收到此错误是因为在 DSS 2.6.3 中，您需要一个 JDBC4 驱动程序，它只有 ResultSet.isClosed() 方法..所以基本上下载 SQL Server JDBC4 驱动程序 (sqljdbc4) 并尝试看看。此外，在 DSS 3.0.0（即将发布）中，已通过将 ResultSet.isClosed 设为可选来修复它。

干杯，安佳娜。

# azure - Enterprise Library 5.0 配置控制台不包含自动缩放设置

> ID：12565361
> 
> 赞同：0
> 
> 时间：2012-09-24T12:49:50.390
> 
> 标签：azure, enterprise-library, autoscaling, wasabi

我将**Windows 7**和**Visual Studio 2012**与**Enterprise Library 5.0**一起使用。到目前为止，一切正常。我在没有 NuGet 的情况下安装了企业库，因为我们对 NuGet 的体验非常糟糕，并希望避免使用它。

我正在开发一个 Windows Azure 应用程序并想使用 Autoscale Block。下载 EnterpriseLibrary 的 Windows Azure 集成二进制文件并将其解压缩到“ *C:\Program Files (x86)\Microsoft Enterprise Library\bin* ”文件夹后，配置控制台不会显示 Autoscale Settings 块。

有谁知道我在这里是否缺少另一个安装步骤？我希望能够使用配置工具配置 app.config 文件，而不是手动完成所有操作。

最好的祝愿，克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:23:14.750

这是你需要做的：

1.  安装最新版本：[Microsoft Enterprise Library 5.0 Optional Update 1](http://www.microsoft.com/en-us/download/details.aspx?id=6836)（只是为了确定）
2.  下载 Windows Azure 集成包：[适用于 Windows Azure 的 Microsoft Enterprise Library 5.0 集成包](http://www.microsoft.com/en-us/download/details.aspx?id=28189)
3.  当您“安装”集成包时，它会要求您将其提取到某个地方。选择解压到EL Bin文件夹：**C:\Program Files (x86)\Microsoft Enterprise Library 5.0\Bin**
4.  右键单击您的 web/app.config 并选择**Edit Enterprise Library V5 Configuration**。您应该在块下看到“**添加自动缩放设置”。**

# java - 将小消息实时分发给大量客户端的 Netty 选项？

> ID：12565362
> 
> 赞同：1
> 
> 时间：2012-09-24T12:49:52.540
> 
> 标签：java, real-time, netty, out-of-memory

我正在设计一个（近乎）实时的 Netty 服务器，用于将大量非常小的消息分发给 Internet 上的大量客户端。在内部，尽可能快地进行测试，我发现我可以毫不费力地处理 10k 个客户端，但是现在我们正在尝试通过互联网，延迟、带宽等变化非常大，我们遇到了可怕的 outOfMemory问题，即使有 2 GB 的 RAM。

我尝试了各种解决方法（将套接字堆栈大小设置得更小，设置高低水位标记，取消太旧的东西），它们有一点帮助，但它们似乎只有一点点帮助。有什么好的方法可以优化 Netty 以在没有明显延迟的情况下发送大量的小消息？此外，大部分消息仅包含一种消息，如果它没有到达，我并不特别在意。我会使用 UDP，但因为我们不控制客户端，所以这不太可能。是否可以单独为此类消息设置单独的超时而不影响其他消息？

您能提供的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:36:15.163

You don't say whether the subscription stream is constant or bursty. You also don't say whether there is a minimum number of messages / second the client must support.

Given that I don't know anything about Redis, are any of the following practical?

*   For the messages you don't care about, if channel.isWritable() == false, discard immediately. Unfortunately I don't know of a way to cancel messages that are in Netty's send buffer. You wouldn't be able to cancel messages that have been passed to the TCP send buffer anyway so it's not really something to rely on.
*   Slow reception from the subscription to the rate of the slowest client.
*   Determine which clients can't keep up (maybe use the write timeout handler) and move them to a separate subscription which can be slowed down. Duplicate the published messages to both subscriptions.
*   Can you split the messages to send to the clients across different subscriptions. If a client can't keep up unsubscribe it from the unimportant messages.

If your average send rate is higher than the client can support over time then there isn't really a solution other than negotiating a change in requirements to reduce the maximum allowable throughput.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:02:03.710

您可能想研究[负载平衡](https://en.wikipedia.org/wiki/Load_balancing_%28computing%29)方法。它用于使用硬件和软件在分布式系统中分配工作负载。适合您系统的详细信息取决于几个因素，包括硬件升级等。当然，2GB 的 RAM 对于服务器 10k 用户来说相当小，您需要增加此限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:56:53.347

通常，如果看到 outOfMemory，您可以使用线程转储工具来转储线程。或者使用 jvirtualvm 和 jconsole 之类的东西来找出哪个类没有被 GC 并继续吃掉你的记忆。2Gigs 对于现在的 64 位机器来说并不大。试着把这个数字变大到 3 或 4 G 左右，看看你是否没有遇到 OOM。如果您发现可以在 LAN 中轻松处理 10k 连接，请尝试在您的 netty 处理程序中添加一个小延迟。检查会发生什么。

# excel - 有没有办法选择第一个空单元格上方的公式并向下粘贴直到最后一个完整单元格？

> ID：12565364
> 
> 赞同：0
> 
> 时间：2012-09-24T12:49:56.463
> 
> 标签：excel, vba

在这个公式中：

```
With Intersect(wsDAO.UsedRange, wsDAO.Columns("R"))
            .AutoFilter 1, "<>Same"
            With Intersect(.Offset(2).EntireRow, .Parent.Range("B:O"))
                .Copy wsDAR.Cells(Rows.Count, "B").End(xlUp).Offset(1)
                .EntireRow.Delete
            End With
            .AutoFilter
        End With 
```

它允许我从 R 列中的 wsDAO 中获取单元格，除了单词“Same”之外的任何其他单词都会将副本放到另一个页面 'wsDAR' 并删除原始页面。

我想做什么，我不知道从哪里开始，但我在想的是使用脚本的这一部分：

```
lastrow = wsDAO.Range("A" & Rows.Count).End(xlUp).Row

With Intersect(.Offset(2).EntireRow, .Parent.Range("B"))
     .Copy wsDAO.Cells(Rows.Count, "B").End(xlUp).Offset(1)
End With 
```

并在上面公式中有一个单元格的地方使用它，并将其复制到最后一行包含数据。

我只是不知道从哪里开始，我想如果我从另一个单元格复制数据但那将不起作用，因为“.Copy”会覆盖任何保存的内容。

有人可以帮我弄这个吗？我知道我距离解决我的问题还有几行，但我似乎无法解决这个问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T17:17:43.537

从您的示例文件中，您希望将 I1 中的公式复制到 I 列中的任何空单元格中。以下代码行应执行此操作：

```
lastrow = wsDAO.Cells(Rows.Count, "I").End(xlUp).Row

wsDAO.Range("I1:I" & lastrow).SpecialCells(xlCellTypeBlanks).FormulaR1C1 _
    = wsDAO.Cells(1, "I").FormulaR1C1 
```

# javascript - KnockoutJS - 不能将“切片”与 ko.computed 对象一起使用

> ID：12565373
> 
> 赞同：3
> 
> 时间：2012-09-24T12:50:11.823
> 
> 标签：javascript, jquery, pagination, knockout.js

我正在尝试使用 knockoutjs-2.1.0 创建分页，但出现以下错误：

> 未捕获的类型错误：对象函数 h(){if(0return i||e(),aULa(h),k} 没有方法“切片”

我已经将问题缩小到这个：显然淘汰不喜欢在使用 ko.computed 创建的对象上调用“切片”方法。我的计算类型是这样的：

```
this.contactsToShow = ko.computed(function() {
// Represents a filtered list of contacts
// i.e., only those matching the "typeToShow" condition
var desiredType = this.typeToShow();
if (desiredType == "all") {
return this.allContacts();
}
return ko.utils.arrayFilter(this.allContacts(), function(aContact) {
return aContact.contactType == desiredType;
});
}, this); 
```

当我设置“showCurrentPage”属性时，它会抛出一个错误，这里：

```
contactListView.showCurrentPage = ko.dependentObservable(function() {
if (this.currentPage() > this.totalPages()) {
    this.currentPage(this.totalPages() - 1);
}
var startIndex = this.pageSize() * this.currentPage();
return this.contactsToShow.slice(startIndex, startIndex + this.pageSize());
}, contactListView); 
```

但是，如果我在设置 showCurrentPage（allContacts 数组）时使用原始的 observableArray，它就可以工作。

你可以在这里找到 jsfiddle：http: [//jsfiddle.net/mzalen/S74rJ/12/](http://jsfiddle.net/mzalen/S74rJ/12/)

我真的很感激关于这个问题的任何建议，因为它让我发疯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:55:36.623

Knockout 的常见错误：`this.contactsToShow`在您的示例中成为函数，您必须将其作为函数调用：

```
return this.contactsToShow().slice(startIndex, startIndex + this.pageSize()); 
```

# php - 可以在视图中创建与控制器相同的表单元素

> ID：12565374
> 
> 赞同：0
> 
> 时间：2012-09-24T12:50:15.607
> 
> 标签：php, zend-framework, zend-form, zend-form-element

创建如下表单元素的第一种方法 -

*在控制器中

```
 $email = new Zend_Form_Element_Text('email');

    $email->setLabel('Email address')

          ->addFilter('StringToLower')

          ->setRequired(true)

          ->addValidator('NotEmpty', true)

          ->addValidator('EmailAddress'); 
```

创建如下表单元素的第二种方法 -

*在视图中

```
echo $this->formText('email',$this->data['email'],array('size'=>'20', 'class'=>'input_min_max')); 
```

是否可以在第 2 种方法中创建与第一种方法相同的元素，例如添加 addFilter、addValidator 等。setLabel 不是必需的，因为我们在元素之前添加了标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:55:34.517

是的，有可能，您可以在视图中执行此代码：

```
$email = new Zend_Form_Element_Text('email');
$email->setLabel('Email address')
      ->addFilter('StringToLower')
      ->setRequired(true)
      ->addValidator('NotEmpty', true)
      ->addValidator('EmailAddress'); 
```

但是你**不应该**因为它违反了 MVC 模式。或者也许你可以更好地解释你想做什么......也许我不明白......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:49:33.417

不确定为什么要在视图中插入表单元素。如果这是为了样式，您可以使用视图脚本作为装饰器。

表格 ：

```
 $email = new Zend_Form_Element_Text('email');

 $email->setLabel('Email address')

      ->addFilter('StringToLower')

      ->setRequired(true)

      ->addValidator('NotEmpty', true)
      -> setDecorators(array(array('ViewScript', array('viewScript' => 'index/myform.phtml'))))

      ->addValidator('EmailAddress'); 
```

这将调用视图脚本“myform.phtml”来装饰元素，您可以在其中添加其余的标记来装饰元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:58:13.660

我很确定你不能用你的第二种方法创建一个元素，但是还有另一种方法可以通过分解来创建它，在你的情况下你可以这样做：

```
$formText = createElement('email',$this->data['email'],array('size'=>'20', 'class'=>'input_min_max)->setRequired(true)->addValidator('whatever'); 
```

希望这能回答你的问题。

# php - 如何查找和转换使用大括号 {site_name} 的字符串，例如在 HTML 文本区域输出中？

> ID：12565375
> 
> 赞同：0
> 
> 时间：2012-09-24T12:50:16.070
> 
> 标签：php

我正在我的应用程序中设计一个邮件模板编辑器。我需要一个想法来找到特定变量的出现，以便能够在我的代码中使用 preg_replace 或 preg_match 转换它们。

例如，我的模板如下所示：（仅示例）这是从 textarea 变量返回的内容。

```
<p>Thank you for your order at <a href="{site_url}" style="color:#ea6ea0">{site_name}</a>.</p> 
```

在此示例中，我想将 {site_url} 替换为 PHP 中的特定变量或代码，因为我无法将 PHP 直接解析到 textarea 中。

希望我的问题很清楚，任何帮助表示赞赏。

**编辑：我的问题清楚吗？我需要使用我自己的 php 代码替换 {} 字符串。php代码不能直接在textarea中使用。这就是为什么我需要找到一个模板系统来替换预定义的变量 {... } 但在解释模板时使用 php 转换它们。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:52:28.660

你的意思是这样的吗？

```
<p>Thank you for your order at <a href="<?=$site_url?>" style="color:#ea6ea0"><?=$site_name?></a>.</p> 
```

或者

```
<p>Thank you for your order at <a href="<?php echo $site_url?>" style="color:#ea6ea0"><?php echo $site_name?></a>.</p> 
```

**编辑：**

啊，你的意思是这样的吗：

```
$html = '<p>Thank you for your order at <a href="{site_url}" style="color:#ea6ea0">{site_name}</a>.</p>';

$php_variables_array = array(
  "site_url" => "http://www.google.co.uk",
  "site_name" => "Google",
);

foreach ($php_variables_array as $key => $value)
{
  $html = str_replace("{" . $key . "}", $value, $html);
}

echo $html; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T12:55:48.527

```
 <a href="<?php echo $site_url;?>" style="color:#ea6ea0"><?php echo $site_name;?></a> 
```

# c# - 单声道中的多维数组索引错误

> ID：12565376
> 
> 赞同：2
> 
> 时间：2012-09-24T12:50:18.793
> 
> 标签：c#, multidimensional-array, mono

当我在 debian 上使用 mono 2.10.8.1 来编译下面的代码时，运行它会给出一个 while`System.IndexOutOfRangeException`在调试模式下编译它不会，而且它不应该给出任何错误。这是一个已知的错误？

```
using System;

namespace CompilerBug
{
    public class NotMain
    {
        public static void Main (string[] a)
        {
            bool[,] test = new bool[201,201];
            int x,y;
            for(x=-100;x<100;x++) for(y=-100;y<100;y++){
                test[x+100,y+100] = true;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T09:01:23.150

显然不是已知的错误，因此将其报告给单声道。

链接到错误报告以供进一步参考：[bugzilla.xamarin.com/...](https://bugzilla.xamarin.com/show_bug.cgi?id=7438 "Bugzilla 报告页面")

# xhtml - xhtml 添加实体

> ID：12565382
> 
> 赞同：2
> 
> 时间：2012-09-24T12:50:42.617
> 
> 标签：xhtml, doctype, xml-entities

我有一个以 xhtml 形式提供的网站（带有标题和文档类型）。我从服务器获取数据，这些数据有时包含一些`&nbsp;`实体，当我尝试设置包含此内容的字符串时会导致错误 via `innerHTML`。我如何发现我可以在服务器端替换所有这些项目，但我想知道的是：

我也可以将此实体添加到 doctype 声明中，而不是在服务器上替换它吗？

**编辑：**

换句话说，为什么会这样：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"
[
    <!ENTITY nbsp  "&#160;">
]> 
```

只是不工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T23:08:41.887

**更新 2：**

从[http://www.w3.org/TR/2008/WD-html5-20080610/dom.html#innerhtml1](http://www.w3.org/TR/2008/WD-html5-20080610/dom.html#innerhtml1)（关于设置的第二部分），XHTML 的算法似乎没有提到它是否知道 DOCTYPE 信息，尽管它至少知道命名空间。（注意我切换到更简单但符合标准的 XHTML5 DOCTYPE。）

我认为您可能会提供以下测试用例并将其报告为错误，或者将其提交到 WhatWG 邮件列表中，因为我认为该行为至少应该是规范的（除非它是，我只是没有看到它）：

```
<!DOCTYPE html [
    <!ENTITY nbsp "&#160;">
]>
<html xmlns="http://www.w3.org/1999/xhtml">
<div id="a">old&nbsp;text</div>
<script><![CDATA[
document.getElementById('a').innerHTML = 'new&nbsp;text';
]]></script>
</html> 
```

同时，如果你不想在服务器上替换，你可以使用下面这样的黑客`DOMParser()`：

```
<!DOCTYPE html [
    <!ENTITY nbsp "&#160;">
]>
<html xmlns="http://www.w3.org/1999/xhtml">
<div id="a">old&nbsp;text</div>
<script><![CDATA[

document.getElementById('a').innerHTML = new DOMParser().parseFromString(
    '<!DOCTYPE html [<!ENTITY nbsp "&#160;">]>'+
    '<html xmlns="http://www.w3.org/1999/xhtml">'+
      'new&nbsp;text'+
    '</html>',
    'application/xhtml+xml'
  ).documentElement.innerHTML;

]]></script>
</html> 
```

# android - 如何显示文本右对齐

> ID：12565385
> 
> 赞同：0
> 
> 时间：2012-09-24T12:50:47.017
> 
> 标签：android

这是我的文本视图代码，从左边开始，但我想留下对齐文本，我该怎么做？名字有多长它从右对齐

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="40dp"
    android:background="#000000"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/lblUnabletoProceed"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="150dip"
        android:textColor="#FFCC00"                
        android:text="" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:08:38.630

在linearLayout中使用`android:gravity="right"`or `android:layout_gravity="right"`，最好使用Relativelayout。在相对布局使用 `android:layout_alignParentRight="true"`中，用于边距 `android:layout_marginRight="5dp"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:01:17.073

用于对齐

`android:gravity="right"`

并用于边距/填充

`android:paddingRight=16dip`

这将使您对齐右侧和间距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:52:21.807

尝试这个：

```
android:gravity="right" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T12:51:45.850

```
<TextView
        android:id="@+id/lblUnabletoProceed"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="150dip"
        android:textColor="#FFCC00"
        android:gravity="right"
        android:paddingRight="8dip"
        android:text="" /> 
```

# javascript - 在jquery中将json文件的一部分作为变量返回

> ID：12565386
> 
> 赞同：2
> 
> 时间：2012-09-24T12:50:46.963
> 
> 标签：javascript, jquery, json

我正在尝试为从 sitecore 创建的 json 文件中查找关键字的网站创建词汇表工具提示。我需要从 json 文件中获取“文本：”部分，然后在我的 jquery 中创建一个变量，以便它们是找到并用适当的标签包装的关键字。我让它工作到可以让控制台记录我的 json 文件中有 2 个条目的地步，仅此而已。

这是我的示例 json 代码：

```
[{"Id":"ef339eaa-78e1-4f9e-911e- 096a1920f0b6","Name":"Glossary","DisplayName":"Glossary","TemplateId":"b27d2588-3d02-4f5f-8064-2ee3b7b8eb39","TemplateName":"Glossary","Url":"/Global-Content/Glossary/Glossary","Version":1,"Created":"\/Date(1343987220000)\/","CreatedBy":"sitecore\\rgoodman","Revision":"ae8b3ae0-d0ca-4c4a-9f27-a542a31ab233","Updated":"\/Date(1348137810133)\/","UpdatedBy":"sitecore\\admin","Text":"Glossary","Content":"A bit of test content for the glossary"},{"Id":"3fa51ad4-cfb6-4ff1-a9b5-5276914b2c23","Name":"Abraham","DisplayName":"Abraham","TemplateId":"b27d2588-3d02-4f5f-8064-2ee3b7b8eb39","TemplateName":"Glossary","Url":"/Global-Content/Glossary/A/Abraham","Version":1,"Created":"\/Date(1348148640000)\/","CreatedBy":"sitecore\\admin","Revision":"231284ec-9fb9-4502-ad79-a5806479ecba","Updated":"\/Date(1348148779656)\/","UpdatedBy":"sitecore\\admin","Text":"Abraham","Content":"This is a lincoln person"}] 
```

但我想这没有任何用处，因为它只是我想要返回的“文本：”部分。

这是我的jQuery：

```
function getData(url) {
var data;
    $.ajax({
        async: false,
        url: '/_assets/js/glossary.json',
        dataType: 'json',
        success: function(data.Text){
           data.Text = response;
        }
        return(response);
    });
}

function HighlightKeywords(keywords)
{         
var el = $("body");
$(keywords).each(function()
{
    var pattern = new RegExp("(" +this+ ")", ["gi"]);
    var rs = "<mark href='#' class='tooltip'>$1</mark>";
    el.html(el.html().replace(pattern, rs));
});
}        

HighlightKeywords(data.Text); 
```

本质上，我需要返回数据位于 HighlightKerywords 函数上的 json 的“文本：”位。我哪里错了？

任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:00:55.263

您的函数的语法格式不正确。您的返回必须进入同步示例中的成功函数内部，而不是随机放置在 ajax 对象中。

```
function getData() {
    $.ajax({
        async: false,
        url: '/_assets/js/glossary.json',
        dataType: 'json',
        success: function(data){
           //HighlightKeywords(data.Text);
           //or
           return(data.Text);
        }

    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:01:10.080

Ajax 是异步通信，您不能将其响应插入到全局变量中并期望能够使用它。

您需要在 success 函数中对 data.text 进行所有工作。

```
success: function(response){
           HighlightKeywords(response.Text);
        } 
```

# c# - UTC时间转换

> ID：12565387
> 
> 赞同：0
> 
> 时间：2012-09-24T12:51:02.720
> 
> 标签：c#, .net, c#-4.0

我正在尝试使用需要 UTC 日期的 Web 服务。所以我发现：

```
private static string GetDate(DateTime DateTime)
{
    DateTime UtcDateTime = TimeZoneInfo.ConvertTimeToUtc(DateTime);
    return XmlConvert.ToString(UtcDateTime, XmlDateTimeSerializationMode.Utc);
} 
```

如果我做：

```
DateTime DT1 = new DateTime(2012, 3, 25);
DateTime DT2 = new DateTime(2012, 3, 26);
string s1 = GetDate(DT1);
string s2 = GetDate(DT2); 
```

s1 包含：

```
2012-03-25T00:00:00Z 
```

和 s2 包含：

```
2012-03-25T23:00:00Z 
```

为什么 s2 不包含：

```
2012-03-26T00:00:00Z 
```

? 谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:57:39.743

伦敦[时区](http://www.timeanddate.com/worldclock/timezone.html?n=136)在 3 月 25 日凌晨 1 点（当地时间）进行了夏令时转换，从 UTC+0 变为 UTC+1。因此，英国当地时间 3 月 26 日的午夜恰好是 UTC 时间的 2012-03-25 23:00:00。这几乎肯定是问题的原因。

你应该弄清楚你*真正*想要的值代表什么。不幸`DateTime`的是，就清晰度而言，它不能很好地帮助您。您可能需要*考虑*使用我的[Noda Time](http://noda-time.googlecode.com)库 - 或者如果您不这样做，至少在类似的[概念](http://noda-time.googlecode.com/hg/docs/userguide/concepts.html)中记录您的代码。（听起来您正在尝试将 a`LocalDate`转换为`Instant`，为了做到这一点，您需要弄清楚您真正指的是哪个时区。）

您完全有可能*逃脱*：

```
DateTime DT1 = new DateTime(2012, 3, 25, 0, 0, 0, DateTimeKind.Utc);
DateTime DT2 = new DateTime(2012, 3, 26, 0, 0, 0, DateTimeKind.Utc); 
```

# android - 以编程方式安装 Android 应用程序

> ID：12565391
> 
> 赞同：2
> 
> 时间：2012-09-24T12:51:11.483
> 
> 标签：android, apk

我有以下问题：

如[Android: install .apk programmatically](https://stackoverflow.com/questions/4967669/android-install-apk-programmatically)中所述，我在 Android 设备上成功安装了一个 APK 文件。不幸的是，我遇到的问题是，当我尝试安装第二个 APK 文件时，收到消息：未安装软件包。

在调试器中，我看到：

> 资产路径/sdcard/myAPK.apk

既不是目录也不是文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:59:22.580

这可能会帮助您：

```
protected void installApkfile(String apkFileName) {
    // TODO Auto-generated method stub
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setDataAndType(Uri.fromFile(
               new File(Environment.getExternalStorageDirectory() + "/download/"
               + apkFileName)), "application/vnd.android.package-archive");
    startActivityForResult(intent,0);
} 
```

这里我的 .apk 文件位于 sd 卡下载文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:53:51.977

如果通过“资产路径”你真的意味着 APK 被打包为资产，那将不起作用。APK 必须是文件系统上的实际文件，并且资产仍打包在其托管 APK 内。请参阅：[我们可以从 ContentProvider 安装 APK 吗？](https://stackoverflow.com/questions/9637629/can-we-install-an-apk-from-a-contentprovider)

# c++ - 如何为泛型类型的向量声明迭代器？

> ID：12565393
> 
> 赞同：2
> 
> 时间：2012-09-24T12:51:16.047
> 
> 标签：c++

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

我在为泛型类型的向量声明迭代器时遇到问题。代码如下：

```
 template <class T> void print(const vector<T>& V )
    {
      vector<T>::const_iterator i;
    } 
```

以下返回预期的错误；于我之前'。如果我特别说明不会有错误`vector<int>::const_iterator i;`

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T12:52:44.953

`const_iterator`在这种情况下是一个从属名称，因为它依赖于`T`. 除非您使用`typename`关键字明确限定类型，否则假定不命名类型。

```
template <class T> void print(const vector<T>& V )
{
  typename vector<T>::const_iterator i;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:53:22.737

你需要这样做：

```
 template <class T> void print(const vector<T>& V )
    {
      //T is a dependant type so needs typename
      typename vector<T>::const_iterator i;
    } 
```

# android - 如何为 Py4A 构建 numpy？

> ID：12565396
> 
> 赞同：6
> 
> 时间：2012-09-24T12:51:22.377
> 
> 标签：android, python, numpy

正如您已经了解的那样，我无法将 numpy 构建为 Py4A 的模块。 [这是](http://code.google.com/p/python-for-android/wiki/BuildingModules)一个指令，但我仍然无法做到。我安装了[Toolchain](http://code.google.com/p/python-for-android/wiki/Toolchain_Installation)，因为我下载了 Android NDK 并输入了这 3 个 bash 命令。

这是 numpy 文件夹的[屏幕截图](http://s61.radikal.ru/i173/1209/2c/fcfb8b61fa2e.png)。我不知道下一步该做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T04:34:56.463

如果您安装了 py4a 模块，则添加

```
from py4a import patch_distutils
patch_distutils() 
```

，`setup.py`添加`setup.cfg`和现在：

```
python setup.py configure
python setup.py build 
```

# twitter-bootstrap - Bootstrap Timepicker 初始化时间更改

> ID：12565399
> 
> 赞同：4
> 
> 时间：2012-09-24T12:51:28.123
> 
> 标签：twitter-bootstrap, timepicker

如何在 Bootstrap Timepicker 中动态更改初始化时间？

[http://jdewit.github.com/bootstrap-timepicker/](http://jdewit.github.com/bootstrap-timepicker/)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T13:24:41.367

如果您不想使用`current`时间（默认情况下），您可以使用初始化选项：

```
$('someSelector').timepicker({defaultTime: '11:42 PM'}); 
```

或者您可以使用输入的 value 属性（这简化了几个时间选择器的初始化）：

```
<input type="text" class="myClass input-small" value="12:42 PM"> 
```

```
$('.myClass').timepicker({defaultTime: 'value'}); 
```

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/qW2wL/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T01:04:34.053

我是时间选择器的作者。

默认时间的“值”选项已被弃用。您有多种方法可以将默认时间设置为特定值

设置值属性

```
<div class="bootstrap-timepicker">
    <input id="timepicker" type="text" value="12:45 AM"/>
</div> 
```

或设置数据属性覆盖配置选项

```
<div class="bootstrap-timepicker">
    <input id="timepicker" type="text" data-default-value="12:45 AM"/>
</div> 
```

或在初始化

```
$('#timepicker').timepicker({
    defaultValue: '12:45 AM'
}); 
```

或调用 setTime 方法

```
$('#timepicker').timepicker();
$('#timepicker').timepicker('setTime', '12:45'); 
```

如果您有任何问题，只需在 github 上打开一个问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-23T10:22:22.550

解决方案是：

```
var time = '@Model.MarketTime.ToString("h:mm tt")'

        $('#timepicker-default').timepicker('setTime', time); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T17:28:31.273

```
<div class="input-append bootstrap-timepicker span8"><input id="timeinput" type="text" class="timepicker-2 input-small" value="current"><span class="add-on"><i class="icon-time"></i></span></div> 
```

这对我行得通...

# iphone - iOS6 中的 UIPageViewController

> ID：12565400
> 
> 赞同：20
> 
> 时间：2012-09-24T12:51:34.733
> 
> 标签：iphone, ios, objective-c, uipageviewcontroller

在 iOS6 中的 viewControllerAfterViewController 和 viewControllerBeforeViewController 方法**中**，**如果**我返回 nil（当我在第一页或最后一页时阻止页面导航），应用程序崩溃并出现以下异常：

'提供的视图控制器数量 (0) 与请求的转换所需的数量 (1) 不匹配'

在 iOS5 中一切正常。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-24T22:10:06.670

我遇到过同样的问题。我发现原因是替换 UIPageViewController 的 UIPanGestureRecognizer 上的委托，这确实是不行的。平移手势识别器正在调用一个未记录的方法 _gestureRecognizerShouldBegin:（注意前导下划线），UIPageViewController 实现并显然依赖于它才能正常工作（阅读：不崩溃）。我最终在我的类中实现了 respondsToSelector: 和 forwardingTargetForSelector: ，它使用 UIPageViewController 将未记录的委托方法传递给 UIPageViewController 而不具体命名它（并且几乎肯定会为我赢得应用商店审查拒绝）。

```
-(BOOL)respondsToSelector:(SEL)aSelector {
    if ([super respondsToSelector:aSelector])
        return YES;
    else if ([self.pageViewController respondsToSelector:aSelector])
        return YES;
    else
        return NO;
}

- (id)forwardingTargetForSelector:(SEL)aSelector {
    if ([super respondsToSelector:aSelector]) {
        return nil;
    } else if ([self.pageViewController respondsToSelector:aSelector]) {
        return self.pageViewController;
    }
    return nil;
} 
```

我的长期解决方案是重新使用 UIPageViewController，这样我就不需要替换手势识别器代表了。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-08T06:47:56.483

啊，想知道为什么没有人指出这个错误，我花了将近 2 个晚上才找到解决方案。

旧代码（iOS 5.1）：当在第一页和最后一页返回 nil 时，您会遇到应用程序崩溃。它在 iOS 5.1 中运行良好，但在 iOS 6 中不会。

```
- (UIViewController *)pageViewController:
(UIPageViewController *)pageViewController viewControllerBeforeViewController:
(UIViewController *)viewController
{
    for (UIGestureRecognizer *recognizer in pageController.gestureRecognizers) {
        if ([recognizer isKindOfClass:[UITapGestureRecognizer class]]) {
            recognizer.enabled = NO;
        }
    }
    NSUInteger index = [self indexOfViewController:
                        (MainViewController *)viewController];
    if ((index == 0) || (index == NSNotFound)) {
        return nil;
    }

    index--;
    return [self viewControllerAtIndex:index];
}
- (UIViewController *)pageViewController:
(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
    for (UIGestureRecognizer *recognizer in pageController.gestureRecognizers) {
        if ([recognizer isKindOfClass:[UITapGestureRecognizer class]]) {
            recognizer.enabled = NO;
        }
    }
    NSUInteger index = [self indexOfViewController:
                        (MainViewController *)viewController];
    if (index == NSNotFound) {
        return nil;
    }
} 
```

SOLUTION(iOS 6) : 将手势效果添加到超级视图后，只需调用名为 -(BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer 的委托。我所做的很简单，计算用户翻动第一页和最后一页的速度（我的意思是使用手势识别器），我拒绝滑动。您只需粘贴以下代码，您就完成了!.

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer
{
    if (pageNum==0) {

        if ([(UIPanGestureRecognizer*)gestureRecognizer isKindOfClass:[UIPanGestureRecognizer class]] &&
            [(UIPanGestureRecognizer*)gestureRecognizer velocityInView:gestureRecognizer.view].x > 0.0f) {
            //NSLog(@"Swiping to left on 1st page is denied");
            return NO;
        }
        if ([(UITapGestureRecognizer*)gestureRecognizer isKindOfClass:[UITapGestureRecognizer class]] &&
            [(UITapGestureRecognizer*)gestureRecognizer locationInView:gestureRecognizer.view].x < self.view.frame.size.width/2) {
         //NSLog(@"tapping to left on 1st page is denied");
            return NO;
        }
    }

    else if(pageNum ==totalNoOfFiles-1)
    {

        if ([(UIPanGestureRecognizer*)gestureRecognizer isKindOfClass:[UIPanGestureRecognizer class]] &&
            [(UIPanGestureRecognizer*)gestureRecognizer velocityInView:gestureRecognizer.view].x < 0.0f) {
            //NSLog(@"Swiping to right on 1st page is denied");
            return NO;
        }
        if ([(UITapGestureRecognizer*)gestureRecognizer isKindOfClass:[UITapGestureRecognizer class]] &&
            [(UITapGestureRecognizer*)gestureRecognizer locationInView:gestureRecognizer.view].x > self.view.frame.size.width/2) {
          //NSLog(@"Tapping to right on 1st page is denied");
            return NO;
        }
    }

    return YES;
}

- (UIViewController *)pageViewController:(UIPageViewController*) pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
 {
  int index = [self indexOfViewController:(ChildViewController *)viewController];
                index--;

    return [self viewControllerAtIndex:index];
}

- (UIViewController *)pageViewController:
(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
    int index = [self indexOfViewController:(ChildViewController *)viewController];

            index++;
     return [self viewControllerAtIndex:index];
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-17T16:39:44.390

这已经得到了很好的讨论，但我还有一件事要补充。考虑一下*为什么要将*手势识别器的委托设置为 self。就我而言，这是因为在某些情况下，我想阻止手势识别器识别，代表的`gestureRecognizerShouldBegin:`.

`gestureRecognizerShouldBegin:`但是在出现这个问题的 iOS 6 中，通过在 UIView 上实现，有一种全新的方法可以做到这一点。（这是 iOS 6 中新增的 UIView 实例方法。）

因此，我能够完全完成我之前完成的工作，而无需更改手势识别器的委托。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T17:18:49.720

我遇到了 UIPageViewController 与 iOS6 崩溃并出现相同错误的问题（“提供的视图控制器的数量 (0) 与请求的转换所需的数量 (1) 不匹配”）。

上述解决方案都不适合我，但我最终发现将以下行从移动`viewDidLoad`到`viewDidAppear`修复它。

```
self.view.gestureRecognizers = self.pageViewController.gestureRecognizers; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-24T16:39:52.570

这里完全一样的问题。

我所做的是一个修补程序，它只是返回 before/afterViewController 的克隆而不是 nil，即

```
// viewController = before/afterViewController
NSUInteger index = [self indexOfViewController:viewController];

// NOTE: return nil crashes in iOS6
return [self viewControllerAtIndex:index storyboard:viewController.storyboard]; 
```

这意味着您可以永远翻页，但我别无选择......总是欢迎更好的解决方案。

# c++ - 只调用其他类成员的类成员？

> ID：12565410
> 
> 赞同：3
> 
> 时间：2012-09-24T12:52:18.533
> 
> 标签：c++

给定：

```
#include <stdio.h>

class A
{
  friend class B;
 private:
  void func();
} GlobalA;

void A::func()
{
  printf("A::func()");
}

class B
{
 public:
  void func();
};

void B::func()
{
  GlobalA.func();
}

int main()
{
  B b;
  b.func();
  getchar();
} 
```

所以真的`B::func()`只是打电话`A::func()`，有没有更好的方法来做到这一点？还是编译器在编译`A::func()`时直接调用。

约束： `class A`创建线程并被多个其他类使用。它是一个管理套接字/管道的全局 IO 类，所以我不相信任何类型的继承都会顺利进行。

*注意：如果这是一个 google-able 问题，请让我知道，因为我没有搜索什么。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:02:49.767

事实上 B.func() 做了一些更微妙的事情：

它不调用 A::func 而是调用 GlobalA.func() ， GlobalA 是类 A 的一个实例。

所以这里 GlobalA 是一个单例（但以单个全局实例的非常“原始”的方式表示）

因此，无论您创建多少个 B 实例，它们都将始终调用同一个 A 实例 (GlobalA)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:57:12.433

这是一个常见的模式：即*桥*。根据我的经验，它总是内联的（至少从 4.3 版开始是 g++）。

请参阅 Flexo 的答案，对`A`成员函数的调用确实内联在您发布的示例代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:02:42.277

查看编译器生成的程序集（我使用的是 GCC 4.7 -O3）：

为了`A::func()`

```
_ZN1A4funcEv:
.LFB31:
    .cfi_startproc
    subl    $28, %esp
    .cfi_def_cfa_offset 32
    movl    $.LC0, 4(%esp)
    movl    $1, (%esp)
    call    __printf_chk
    addl    $28, %esp
    .cfi_def_cfa_offset 4
    ret
    .cfi_endproc 
```

并且`B::func()`：

```
_ZN1B4funcEv:
.LFB32:
    .cfi_startproc
    subl    $28, %esp
    .cfi_def_cfa_offset 32
    movl    $.LC0, 4(%esp)
    movl    $1, (%esp)
    call    __printf_chk
    addl    $28, %esp
    .cfi_def_cfa_offset 4
    ret
    .cfi_endproc 
```

它们是相同的——编译器在幕后免费为你做了聪明的事情。在这种情况下，您的示例都在同一个翻译单元中，这使得编译器决定是否值得这样做是微不足道的。（在某些情况下，它很可能不值得，编译器将有一套很好的启发式方法来帮助它找出最适合任何给定目标的方法）。

如果他们在不同的翻译单元中，这将变得相当困难。一些编译器仍将管理相同的优化，但不是全部。当然，您可以通过定义类似这样的函数来确保它在每种情况下都保留在同一个翻译单元中，这样`inline`您就可以在头文件中指定它们。

这个故事的寓意是不要为微小的细节而烦恼——编写有意义且可维护的代码要重要*得多*。

# mysql - Mysql子查询

> ID：12565413
> 
> 赞同：1
> 
> 时间：2012-09-24T12:52:22.450
> 
> 标签：mysql

我需要帮助来编写子查询。

我有一个文章表，其中包含有特色和非特色文章的类别。

我想挑选特定类别的 4 篇最新专题文章，无论类别如何，它们都不属于前 6 名最新专题文章。这就是我所做的

```
select title 
from node 
where nid NOT IN(select nid from node order by date limit 6) 
order by date 
limit 4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:59:00.553

我记得，子查询`LIMIT`中尚不支持。`IN()`相反，您需要`LEFT JOIN`针对子查询并在子查询中查找`NULL`s：

```
SELECT title
FROM 
  node
  LEFT JOIN ( SELECT nid FROM node ORDER BY date LIMIT 6 ) nids ON node.nid = nids.nid
WHERE 
  nids.nid IS NULL
  AND node.category = 'some category'
ORDER BY date
LIMIT 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:56:31.717

假设有点在这里，但你的意思是这样的？

```
select title 
from node 
where nid NOT IN(select nid from node where featured = 1 order by date desc limit 6) 
and featured = 1
and category = ...
order by date desc
limit 4 
```

# javascript - 使用 JavaScript 使用 Web 服务（返回数据集）

> ID：12565419
> 
> 赞同：0
> 
> 时间：2012-09-24T12:52:38.390
> 
> 标签：javascript, web-services, ado.net, dataset

我使用以下代码使用 Javascript 使用 WebService .NET：

```
// This is where you can place your Javascript code
// var xmlHTTP;

function MButton1Click(event) {
testarTexto();
}

function WebSvc()   // Class Signature
   {
       WebSvc.prototype.CallWebService = function(url, soapXml, callback)
       {

           var xmlDoc = null;

           if (window.XMLHttpRequest)
           {
               xmlDoc = new XMLHttpRequest(); //Newer browsers
           }
           else if (window.ActiveXObject) //IE 5, 6
           {
               xmlDoc = new ActiveXObject("Microsoft.XMLHTTP");
           }

           if (xmlDoc)
           {
               var self = this;
               xmlDoc.onreadystatechange = function() { self.StateChange(xmlDoc, callback); };

               xmlDoc.open("POST", url, true);
               xmlDoc.setRequestHeader("Content-Type", "text/xml");
               xmlDoc.setRequestHeader("Content-Length", soapXml.length);
               xmlDoc.send(soapXml);
           }
    else
           {
               if (callback)
               {
                   callback(false, "unable to create XMLHttpRequest object");
               }
           }
       };

       WebSvc.prototype.StateChange = function(xmlDoc, callback)
       {
 if (xmlDoc.readyState === 4)
           {
               var text = "";

               if (xmlDoc.status === 200)
               {
                   text = xmlDoc.responseText;
               }

               // Perform callback with data if callback function signature was provided,
               if (callback !== null)
               {
                   callback(xmlDoc.status === 200, text);
               }
           }
       };
   }

   function createSoapHeader(message)
   {
        var soap = "<?xml version=\"1.0\" encoding=\"utf-8\"?>";
   soap = soap + "<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">";
   soap = soap + "  <soap:Body>";
   soap = soap + "    <TesteDeTexto xmlns=\"http://tempuri.org/\">";
   soap = soap + "      <pTexto>" + message + "</pTexto>";
   soap = soap + "    </TesteDeTexto>";
   soap = soap + "  </soap:Body>";
   soap = soap + "</soap:Envelope>";
       return soap;
   }

   function callComplete(result, data)
   {
       if (result)
       {
         //alert(getTagValue(data, "TesteDeTextoResult"));
           document.getElementById('MTextArea1').value = getTagValue(data, "TesteDeTextoResult");
       }
       else
       {
           alert("Error occurred calling web service.\n" + result + "\n" +data);
       }
   }
   function testarTexto()
   {

       var soap = createSoapHeader("TESTE");
       //document.getElementById('texto').value = soap;
//     alert(soap);

       var webServiceCall = new WebSvc();

       webServiceCall.CallWebService("http://localhost/WebService/Test.asmx", soap, callComplete);
   }

   function getTagValue(inputStr, tagName)
   {

       var stag = "<" + tagName + ">";
       var etag = "<" + "/" + tagName + ">";

       var startPos = inputStr.indexOf(stag, 0);
       if (startPos >= 0)
       {
           var endPos = inputStr.indexOf(etag, startPos);
           if (endPos > startPos)
           {
               startPos = startPos + stag.length;
               return inputStr.substring(startPos, endPos);
           }
       }

       return "";
   } 
```

但它仅适用于返回字符串作为结果的方法。当我需要返回一个数据集时，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:18:52.993

只需使用 jQuery ^^ 你会发现许多不同的处理程序用于不同的返回类型。数据集可以用 JSON 或 XML 编码，由 jQuery 自动传输到 JS 数据结构中。此外，JS 代码看起来更干净，因为 jQuery 带有一堆[AJAX 方法](http://api.jquery.com/jQuery.ajax/)。要将 xml 响应转换为 JS 数据结构，只需在 jQuery 请求中设置`dataType`为。`xml`例如：

```
jQuery.ajax('url/to/your/WS', {
   dataType: "xml",
   data: {
      postParam1 : "foo"
   },
   success: function(data) {
      alert(data.find("MyNode"));
   }
}); 
```

可以在[这里](http://www.switchonthecode.com/tutorials/xml-parsing-with-jquery)找到如何在 JS 中使用已解析的 xml 响应。

# mysql - substring_index 函数不存在错误

> ID：12565421
> 
> 赞同：0
> 
> 时间：2012-09-24T12:52:51.203
> 
> 标签：mysql, rows

我有一个名为“数据”的表，其中存储了用户的电子邮件地址和城市，我想找到最受欢迎的电子邮件域。我使用以下查询来查找具有最大值的行。我的桌子的例子：

```
Email           Name        City
dsmks@gmail.com     John    California
sak@gmail.com       Leo sydney
dsnk@gmail.com      Ross    NY
askd@yahoo.com      Ronny   Canberra
ajs@yahoo.com       Monty   London
kasl@yahoo.com      Jim washington
uy@hotmail.com      Finn    Las vegas 
```

我已经使用这个查询计算了答案

```
 select  x.city, x.No_of_People from (select e.city, count(e.city) as No_of_People from data e group by  e.city) x
where  x.No_of_People = (select max(x2.No_of_People) from (select e2.city, count(e2.city) as No_of_People from data e2 group by         e2.city) x2) 
```

但我不想使用限制，因为它不会返回多行。所以我使用这个[答案使用了以下查询](https://stackoverflow.com/questions/12543723/selecting-multiple-maximum-rows)

```
 select
  x.substring_index (email,'@',-1),
  x.No_of_Users
from
  (select
    e.substring_index (email,'@',-1), 
    count(e.substring_index (email,'@',-1)) as No_of_Users
  from
    data e
  group by 
    e.substring_index (email,'@',-1)) x
where
  x.No_of_Users = 
    (select
      max(x2.No_of_Users)
    from
      (select
         e2.substring_index (email,'@',-1),
         count(e2.substring_index (email,'@',-1)) as No_of_Users
      from
         data e2
      group by 
        e2.substring_index (email,'@',-1)) x2) 
```

我正在使用的查询给出了这个错误“FUNCTION e2.substring_index 不存在”。帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:16:17.097

使用该函数的语法错误。别名出现在列上，而不是函数上。例如，您的最后一个子查询应使用以下语法：

```
 from (select substring_index(e2.email,'@',-1) as strind,
               count(substring_index(e2.email,'@',-1)) as No_of_Users
        from data e2
        group by substring_index (e2.email,'@',-1)
       ) x2 
```

我还命名了第一列，因此您可以根据需要在子查询之外引用它。

要计算字符串中出现的次数，请使用以下技巧：

```
(length(e2.email) - length(replace(e2.email, '@', '')) as numAmpersands 
```

# silverlight - 如何通过替换代理保存原始图像？

> ID：12565424
> 
> 赞同：0
> 
> 时间：2012-09-24T12:52:56.440
> 
> 标签：silverlight, windows-phone-7, windows-phone-7.1

我正在做一个照片编辑器应用程序。我知道我们可以使用画布（任何 UIElement）创建 jpeg 我在编辑模式下拍摄代理（较小尺寸）图像。我不知道如何通过替换代理而不在屏幕上渲染原始图像来保存原始图像。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T03:40:30.137

*   在保存之前将画布大小更改为原始宽度高度
*   说 canvas.updatelayout()
*   将 UIElement 转换为可写位图
*   将图像缩小到之前的宽度和高度

# javascript - 为什么 location.href() 不起作用？

> ID：12565425
> 
> 赞同：0
> 
> 时间：2012-09-24T12:53:00.677
> 
> 标签：javascript, location-href

我只希望新页面出现在`iframe`当前页面上，而不是加载一个全新的页面。

这是我的代码：

```
function salabim(id){
    var gotoo;

    var objid = document.getElementById("pgMaster");

    new Effect.Shake(id);
    return false;

    gotoo=id+".html";
    objid.src=gotoo;
    location.href(gotoo);
} 
```

这在任何浏览器中都不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:55:33.457

移动`return false;`到最后，`location.href`像这样使用：

```
location.href = gotoo; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T12:55:22.200

`location.href`是属性而不是函数，请`location.href = url`改用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T12:56:15.077

我认为正确的语法是：

```
location.href = gotoo; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T12:57:25.627

在您`false`对`location.href`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T12:55:23.697

您的函数中间有 a `return false;`，因此不会执行该 return 语句之后的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T13:10:25.013

利用

```
window.location.href = "YourURL"; 
```

# sql - 使用来自 Sql 的 @tpv 执行过程

> ID：12565428
> 
> 赞同：0
> 
> 时间：2012-09-24T12:53:15.940
> 
> 标签：sql, procedure

我想从 sql 执行我的过程，但我不知道如何。这是我的代码：

```
CREATE TYPE [dbo].[ListCrc32] AS TABLE(
    [crc32] [int] NULL
)
GO

CREATE procedure [dbo].[UpdateAdsList]
@tvp ListCrc32 readonly
as
 update tb
 set a_update=CONVERT(date,GETDATE(),101)
 from Ads tb
 join @tvp t on t.crc32 = a_crc32 
```

我想从 sql 执行 proc，但我不知道如何创建 UpdateAdsList 的对象类型，并将其发送到过程到 - @tvp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:55:00.807

简单的 ..

```
declare @ ListCrc32

insert into @ (crc32)
select ... put here what you need to insert with.

exec UpdateAdsList @ 
```

或者为了不造成混淆，您可以声明 @varname 并将其插入并使用它调用。

# c# - 新的 PathGeometry() 抛出 TypeInitializationException？

> ID：12565429
> 
> 赞同：0
> 
> 时间：2012-09-24T12:53:19.233
> 
> 标签：c#, wpf, pathgeometry

我有一个程序在后台线程中进行一些几何分析。

通常这工作得很好，但令人惊讶的是，当我尝试在我的开发计算机上创建 PathGeometry 时出现异常：

所以在简单的代码上：

```
PathGeometry geometry = new PathGeometry(); 
```

我得到一个 System.TypeInitializationException {"Der Typeninitialisierer für \"System.Windows.Media.PathGeometry\" hat eine Ausnahme verursacht."}
堆栈跟踪是：

```
bei System.Windows.Media.PathGeometry..ctor()
bei Bsoft.ilka.AlkisLeser.AlkisDatei.GetPosition(XElement xe) in AlkisDatei.cs:Zeile 267. 
```

此异常包含 InnerException System.ComponentModel.Win32Exception {"Ungültiges Fensterhandle"} InnerException 的堆栈跟踪是：

```
bei MS.Win32.UnsafeNativeMethods.GetWindowLongWndProc(HandleRef hWnd)
bei MS.Win32.HwndSubclass.UnhookWindowProc(Boolean force)
bei MS.Win32.HwndSubclass.Dispose()
bei MS.Win32.HwndWrapper..ctor(Int32 classStyle, Int32 style, Int32 exStyle, Int32 x, Int32 y, Int32 width, Int32 height, String name, IntPtr parent, HwndWrapperHook[] hooks)
bei System.Windows.Threading.Dispatcher..ctor()
bei System.Windows.Threading.Dispatcher.get_CurrentDispatcher()
bei System.Windows.DependencyObject..ctor()
bei System.Windows.Media.PathFigureCollection.get_Empty()
bei System.Windows.Media.PathGeometry..cctor() 
```

奇怪的事情：可执行文件确实可以在其他计算机上运行。

问题是什么？为什么 PathGeometry 构造函数会尝试访问某些窗口句柄？我该如何解决这个问题？

我正在使用 .NET 框架 4.0，并且代码在 VS2010 和 VS2012 上都会抛出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:26:34.970

当本机 CreateWindowEx() api 函数调用失败时，您将获得此堆栈跟踪。它失败的原因很少，但有一个。您的程序很可能遭受了句柄泄漏，消耗了 10,000 个窗口句柄。此时 Windows 拒绝让您创建更多内容。

使用 Taskmgr.exe 的“进程”选项卡进行诊断。查看 + 选择列，勾选用户对象。还要勾选句柄和 GDI 对象，以防万一。观察您的过程的显示值。USER Objects 的稳步攀升价值意味着厄运。找到泄漏的原因可能有点困难。当然考虑一个内存分析器。任意注释掉代码块。如果您在 Taskmgr.exe 中没有看到泄漏，则说明有某种其他进程在干扰您的进程。任意将他们一一杀死以找到麻烦制造者。

最后但同样重要的是，看到一个工作线程创建一个窗口是一个麻烦的秘诀。我对 PathGeometry 知之甚少，但它肯定不像那种可以在工人身上正常工作的类。

# html - 如果一个元素*没有*有某个类，我该如何应用 CSS？

> ID：12565444
> 
> 赞同：-2
> 
> 时间：2012-09-24T12:53:58.233
> 
> 标签：html, css, web-applications

我在一个 div 中有一系列 div。我想对所有这些应用一个 CSS 规则，然后使用类对其中一个应用另一个 CSS 规则。这是我现在的风格：

```
.singleTiddler div { display:none; }
.singleTiddler div.singleTiddlervisible { display:block; } 
```

Chrome 的问题在于它在检查器中显示为使用 display:block，但没有显示任何内容。有趣的是，当我在检查器中将鼠标悬停在它上面时，它就在那里，但它没有高度。

```
<div id="tiddlerDisplay" class="singleTiddler">
    <div class="singleTiddlervisible">
        <div>Hi</div><div>There</div><div>We</div>
        <div>Like</div><div>Divs</div>
    </div>
    <div>
        <div>Hi</div><div>There</div><div>We</div>
        <div>Like</div><div>Divs</div>
    </div>
    <div>
        <div>Hi</div><div>There</div><div>We</div>
        <div>Like</div><div>Divs</div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:53:58.233

一个主要问题是这`.singleTiddler div`将适用于所有级别的所有 div。如果下面有 div，它们也会被隐藏。覆盖 css 将仅适用于具有 class 的 div `singleTiddlervisible`，因此仅显示根 div。改用子选择器：

```
.singleTiddler > div { display:none; }
.singleTiddler > div.singleTiddlervisible { display:block; } 
```

# flash - 调用按钮时不断收到类型错误#1010

> ID：12565446
> 
> 赞同：1
> 
> 时间：2012-09-24T12:54:14.650
> 
> 标签：flash, actionscript

这是代码

```
package
{
import flash.display.MovieClip;
import flash.events.MouseEvent;

public class Main extends MovieClip
{
    var startPage:StartPage;
    var hillPage:HillPage;
    var pondPage:PondPage;

    public function Main()
    {
        startPage = new StartPage;
        hillPage = new HillPage;
        pondPage = new PondPage;
        addChild(startPage);

        //Add event listeners
        startPage.hillButton.addEventListener(MouseEvent.CLICK, onHillButtonClick);
        startPage.pondButton.addEventListener(MouseEvent.CLICK, onPondButtonClick);
        hillPage.backToStartButton.addEventListener(MouseEvent.CLICK, onBackButtonClick_Hill);
        pondPage.backToStartButton.addEventListener(MouseEvent.CLICK, onBackButtonClick_Pond);
    }
    //Event handlers
    function onHillButtonClick(event:MouseEvent):void
    {
        addChild(hillPage);
        removeChild(startPage);
    }
    function onPondButtonClick(event:MouseEvent):void
    {
        addChild(pondPage);
        removeChild(startPage);
    }
    function onBackButtonClick_Hill(event:MouseEvent):void
    {
        addChild(startPage);
        removeChild(hillPage);
    }
    function onBackButtonClick_Pond(event:MouseEvent):void
    {
        addChild(startPage);
        removeChild(pondPage);
    }
}
} 
```

所以我可以很好地访问 HillButton 和 PondButton 但 backToStartButton 似乎向我抛出了未定义的术语，我们将不胜感激

如果您想查看代码和 fla 文件，请单击[此处](https://www.dropbox.com/sh/oo9f9qrzdd03jn5/SklbDjlTTJ)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:58:24.580

```
function onBackButtonClick_Hill(event:MouseEvent):void
{
    addChild(startPage);
    removeChild(hillPage);
} 
```

在此函数中，您调用`removeChild(hillPage)`，但`hillPage`不是您`Main`班级的孩子。将此页面添加为孩子，或尝试类似`if(this.contains(hillPage)) removeChild(hillPage);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T16:09:33.840

您正在引用 hillPage.backToStartButton 和 potPage.backToStartButton 但浏览库中的这些项目，似乎您没有为这些按钮提供实例名称，从而导致未定义的错误。您还创建了在这种情况下不需要的 AS 链接，因为这些项目不是动态创建的，也不是实现自定义类。似乎您在混淆事物：AS 链接不用于通过代码引用实例。

所以要让事情在您的特定情况下工作：删除库中的 as 链接名称，通过单击这些项目内的后退按钮并设置它们的实例名称，然后您的代码将使用该名称引用该按钮来编辑 hillPage 和 PondPage。

# excel - Excel，每 60 次删除第 n 行

> ID：12565449
> 
> 赞同：1
> 
> 时间：2012-09-24T12:54:18.627
> 
> 标签：excel, vba

我对传感器有巨大的 excel 数据性能。数据包括时间序列！并且每 5 秒记录一次。一般来说，我`17281 rows`的数据只有一天的记录。我需要可视化数据，但是每 5 秒的记录太清晰了，所以我想将时间序列从每 5 秒扩展到每 5 分钟！

我试图通过删除多余的行来做到这一点......

每一个`5 minutes = 60 "5 second"`

所以我需要删除`60 row`并保留`61th`，然后删除下一个 60 并保留第 121 个，依此类推...

我尝试使用VB代码方法，但我做不到！！！

请任何人都可以提供帮助:(

这是我录制的宏，当我尝试做前几行时......我希望它可以给出问题的一些清晰图像......

* * *

```
Sub MacroDeleteTest1()
'
' MacroDeleteTest1 Macro
'

'
    Rows("2:2").Select
    ActiveWindow.SmallScroll Down:=31
    Rows("2:60").Select
    Selection.Delete Shift:=xlUp
    Rows("3:3").Select
    ActiveWindow.SmallScroll Down:=34
    Rows("3:61").Select
    Selection.Delete Shift:=xlUp
    Rows("4:4").Select
    ActiveWindow.SmallScroll Down:=33
    Rows("4:62").Select
    Selection.Delete Shift:=xlUp
    Rows("5:5").Select
    ActiveWindow.SmallScroll Down:=35
    Rows("5:63").Select
    Selection.Delete Shift:=xlUp
    Rows("6:6").Select
    ActiveWindow.SmallScroll Down:=34
    Rows("6:64").Select
    Selection.Delete Shift:=xlUp
    Rows("7:7").Select
End Sub 
```

* * *

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:04:43.167

像这样的东西。将范围 rStart 设置为数据的第一个单元格。

```
Sub delete60()

Dim rStart As Range
Const cCOLF As Long = 5    ' Offset across of column F

    Set rStart = Sheet1.Range("A1")

    Do While rStart.Offset(1, 0).Value <> ""
        With Range(rStart.Offset(1, cCOLF), rStart.Offset(59, cCOLF))
            rStart.Offset(0, cCOLF).Value = Evaluate("SUM(" & .Address & ")")
            .EntireRow.Delete
        End With
        Set rStart = rStart.Offset(1, 0)
    Loop

End Sub 
```

# facebook-graph-api - 查找谁公开共享链接并查找谁转发了给定链接

> ID：12565452
> 
> 赞同：3
> 
> 时间：2012-09-24T12:54:19.907
> 
> 标签：facebook-graph-api, facebook-fql, sharing

关于跟踪共享链接的两个问题：

1.  我有一个 URL，我想获取该 URL 的**公共**共享列表。我发现这在stackoverflow上被回答了几次，声称这是不可能的，但我不明白为什么不允许这样做。如果我可以查询给定搜索关键字的公开帖子，例如：[https://graph.facebook.com/search?q=watermelon&type=post](https://graph.facebook.com/search?q=watermelon&type=post)，那么为什么我不能使用 URL 作为我的搜索查询？或者有没有办法做到这一点，我只是以某种方式错过了？

2.  假设我在“链接”FQL 表中有一个共享 URL 的 link_id。我怎样才能找到该链接的转发？（尽可能在 Facebook 网站上。）

为了在上述两个问题之间找到中间立场，我尝试执行这个 FQL 查询：

```
SELECT link_id, owner, title FROM link WHERE url="<url>" AND (
    owner = me() OR owner IN (SELECT uid2 FROM friend WHERE uid1 = me())
) 
```

但这失败了，出现错误：

```
<error_response xmlns="http://api.facebook.com/1.0/">
    <error_code>1</error_code>
    <error_msg>An unknown error occurred</error_msg>
</error_response> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T10:21:59.683

1.  我认为在对链接表进行 FQL 查询时不可能基于 URL 进行搜索，因为 url 列不可索引。[可索引列在Facebook FQL 链接参考](https://developers.facebook.com/docs/reference/fql/link "Facebook FQL 链接参考")上标有星号。

2.  因为唯一可索引的列是 link_id 和 owner_id，我认为您不能在此表上使用 FQL 来解决您的问题。您可能会将所有可用链接加载到您的应用程序中，然后通过它们进行解析，但是该 API 调用可能需要很长时间。

如果您只想搜索公共帖子，您可以尝试将 url 直接放入公共图搜索的查询区域。例如，如果我想搜索对 www.google.com 的引用：

> 获取[https://graph.facebook.com/search?q=www.google.com&type=post](https://graph.facebook.com/search?q=www.google.com&type=post)

# django - 我需要通过正则表达式标记格式字符串

> ID：12565454
> 
> 赞同：0
> 
> 时间：2012-09-24T12:54:24.157
> 
> 标签：django, django-templates

在我的数据库中，我有一个 MacAddress 字段，它是一个简单的字符串，例如`1234567890AB`. 在我的模板中，我需要将此字段呈现为类似`12:34:56:78:90:AB`.

我曾尝试使用“加入”标签，但找不到任何解决方案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:59:58.893

您可以为此编写[**自定义模板标签**](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)

```
def split_len(seq, length):
    return ":".join([seq[i:i+length] for i in range(0, len(seq), length)])

split_len("1234567890AB", 2) 
```

# php - 如何从给定的周数显示格式化的工作日

> ID：12565455
> 
> 赞同：-2
> 
> 时间：2012-09-24T12:54:27.610
> 
> 标签：php, strtotime

我使用下面的 php 从给定的周数和年份获取工作日：

```
$week_number = 42; 
$year = 2014; 
for($day = 1; $day<=7; $day++)
   {
     echo date('m/d/Y',strtotime($year."W".          $week_number.$day));
  } 
```

输出看起来像这样：

```
 10/13/2014
   10/14/2014
   10/15/2014
   10/16/2014
   10/17/2014
   10/18/2014
   10/19/2014 
```

我怎样才能让它看起来像这样：

```
 Oct 13 - Oct 19. 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T12:58:18.073

```
<?php

$week_number = 42; 
$year = 2014; 
echo date('M d',strtotime($year."W".$week_number . 1)) . " - " . date('M d',strtotime($year."W".$week_number . 7)).".";
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T12:57:52.940

```
$week_number = 42; 
$year = 2014; 

$week_number = ($week_number < 10) ? '0'.$week_number : $week_number;
echo date('M d',strtotime($year.'W'.$week_number.'1')).' - '.date('M d',strtotime($year.'W'.$week_number.'7')).'.';

// remember that $week_number must be prefixed with 0 if week number is lower than 10 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T12:58:53.850

然后使用

```
date("F j, D");for your date function 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T12:57:54.780

您可以使用`strftime`

这是链接[http://php.net/manual/en/function.strftime.php](http://php.net/manual/en/function.strftime.php)

# magento - magento数据库中的重复条目问题

> ID：12565457
> 
> 赞同：0
> 
> 时间：2012-09-24T12:54:32.430
> 
> 标签：magento

第 1893 行的错误 1062 (23000)：键 'UNQ_CAT_PRD_ENTT_DTIME_ENTT_ID_ATTR_ID_STORE_ID' 的重复条目 '179-81-0'

可能您遇到了与我类似的问题。如果我取值 '179-81-0'

我确定 179 是产品 ID，但不确定其他 -81-0。此外，在其他线程中，建议从表中删除该行，但不知道 100% 我在做什么，只是删除将是愚蠢的行为行。我需要知道它到底是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:35:49.513

This key is defined by table `catalog_product_entity_datetime` as follows:

```
UNIQUE KEY `UNQ_CAT_PRD_ENTT_DTIME_ENTT_ID_ATTR_ID_STORE_ID` (
    `entity_id`,
    `attribute_id`,
    `store_id`
) 
```

Hence, 179-81-0 means:

*   `catalog_product_entity.entity_id` = 179
*   `eav.attribute.attribute_id` = 81
*   `core_store.store_id` = 0

# c++ - 比较给定宽度和高度的纵横比

> ID：12565459
> 
> 赞同：1
> 
> 时间：2012-09-24T12:54:35.930
> 
> 标签：c++, aspect-ratio

给定屏幕尺寸列表，我如何检测哪些屏幕尺寸是 4:3 16:9 纵横比？我可以使用宽度/高度来获得它，但对于 16:9 尺寸，我有时会得到 1.778，有时会因为舍入误差而得到 1.777778。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T12:56:16.747

检查是否`4 * height == 3 * width`或`16 * height == 9 * width`。

记住*有理数*的定义：它是整数对 ( *m* , *n* )*的*等价类*，*当*且**仅*当*n* ' *m*  =  *n* *m* '  .

 **** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T13:06:01.993

您可以强制舍入始终相同，然后您可以比较这些值：

```
float ratio = (int)((width / height) * 100); 
```

16:9 总是 177 和 4:3 总是 133

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:59:13.147

与一些 epsilon 接近度进行比较。

应该是这样的：

```
double epsilon = 0.01;
if(math.abs(screen1.height/screen1.width - screen2.height/screen2.width) < epsilon)
{
//equal ratios
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T12:59:22.430

您必须使用 epsilon 值进行比较。你可以看看：[http ://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm](http://www.cygnus-software.com/papers/comparingfloats/comparingfloats.htm)***

# android - 如何在android中以编程方式将铃声添加到本机应用程序联系人

> ID：12565460
> 
> 赞同：4
> 
> 时间：2012-09-24T12:54:45.857
> 
> 标签：android, contacts, android-contacts, ringtone

我知道如何使用[How to add new contacts in android 以](https://stackoverflow.com/questions/4744187/how-to-add-new-contacts-in-android)编程方式为本机应用程序创建带有姓名、手机号码、电子邮件 ID 的联系人。但我不知道如何用铃声创建联系人。请帮我。提前致谢

将联系人添加到本机应用程序后，我得到了添加铃声的解决方案：

```
String select = "(" + ContactsContract.Contacts.DISPLAY_NAME + " == \"" +first_name+ "\" )"; 

Cursor c1 = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, 
CONTACTS_SUMMARY_PROJECTION, select, null, ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC");

startManagingCursor(c1);

int id=0;

if (c1.moveToNext()) {

id = new Integer(c1.getString(0)).intValue();

Toast.makeText(getApplicationContext(), "CONTACT ID: "+id+"", Toast.LENGTH_LONG).show(); 

} 

ContentResolver cr = getContentResolver(); 

cr.query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null);

ContentValues values=new ContentValues(); values.put(ContactsContract.Contacts.CUSTOM_RINGTONE, newgroup_ringtone); 
cr.update(ContactsContract.Contacts.CONTENT_URI, values, Contacts._ID + "=" + id, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:29:04.610

为什么不先添加联系人，然后检索该联系人并使用以下代码使用铃声更新联系人：

```
ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
ops.add(ContentProviderOperation.newUpdate(ContactsContract.Contacts.CONTENT_URI)
        .withSelection(ContactsContract.Contacts._ID + " = ?", new String[] {id})
        .withValue(ContactsContract.Contacts.STARRED, starred)
        .withValue(ContactsContract.Contacts.SEND_TO_VOICEMAIL, sendToVoicemail)
        .withValue(ContactsContract.Contacts.CUSTOM_RINGTONE, ringtone)
        .build());

try {
    resolver.applyBatch(ContactsContract.AUTHORITY, ops);
} 
```

# javascript - Jinja2 和 HTML div 标签

> ID：12565461
> 
> 赞同：3
> 
> 时间：2012-09-24T12:54:50.900
> 
> 标签：javascript, python, html, jinja2

我有一个 html 文件，我在 python 中使用 jinja2 渲染它，其中有一些 div 部分，如

```
<div id="imdb">
{{imdb_output}}
</div> 
```

现在，即使 imdb_output 变量的值从 python 文件中的函数返回 None ，正如预期的那样，HTML 仍然显示 div 部分，虽然没有内容，但有它的 css！

**但是，如果 imdb_output 没有要显示的值，**我需要怎么做才能使空的 div 部分也不会出现？我需要添加一些JS吗？

**请帮忙！**

这是问题的屏幕截图：- [http://imgur.com/qVfk2](http://imgur.com/qVfk2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:02:33.527

用这个

```
{% if imdb_output %}
    <div id="imdb">
        {{imdb_output}}
    </div>
{% endif %} 
```

您应该阅读[模板设计者的 jinja2 文档](http://jinja.pocoo.org/docs/templates/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T13:02:48.463

只需检查 imdb_output 是否为空：

```
{% if imdb_output %}
  <div id="imdb">
    {{imdb_output}}
  </div>
{% endif %} 
```

# embedded - 复制嵌入式设备的操作系统指纹

> ID：12565465
> 
> 赞同：2
> 
> 时间：2012-09-24T12:55:16.077
> 
> 标签：embedded, emulation, fingerprint

我正在为包含网络服务器的闭源嵌入式设备开发一个模拟器。我正在使用 Python 在嵌入式 angstrom linux 2.6.34 中构建模拟器，到目前为止，我已经在功能上实现了网络服务器，以至于它在视觉上与浏览器中的原始设备相同。现在，我试图让它看起来与 Nmap 操作系统和服务扫描相同，但事实证明这要困难得多。

Nmap 扫描最初被证明非常不同（源设备没有完全匹配，我的模拟器死机为 Linux 2.6.32 - 2.6.39）。在关闭模拟器上的服务和关闭端口等明显的事情之后，我开始比较来自源设备的wireshark数据包，包括IP和TCP标头，以及嵌入式设备，以确定我需要进行哪些协议级别的更改。使用 Linux 中的 sysctl.config 文件，TCP 窗口缩放等一些参数很容易，但其他一些参数则更难。例如，当数据包在源设备上被分段时，PSH 标志设置在 TCP 标头中，而不是在我的设备上，这对于“最随意的观察者”来说也是一个明显的区别。这里的目标不是简单地混淆我的设备，

在我的探索中，我遇到了几个看起来很有希望的解决方案，但是当我知道那里有更简单的解决方案时 ，我害怕在*应该可行的解决方案上浪费更多时间。*

这是我尝试过的事情的列表，以及是什么促使我研究另一种方法。他们中的大多数人的问题是缺乏文档。如果有人知道一种特定的方法应该可以工作，并且可以向我指出体面的文档来帮助我进行配置，我将不胜感激。作为一个懒惰的工程师，我正在寻找最简单的解决方案。我不怕 C，但如果有程序或模块，我可以通过 python 启动或接口，我更喜欢那样。

*   IP 个性：仅适用于 2.4 内核，而且我的模拟器（作为嵌入式 ARM 架构）没有可用的移植内核，可以追溯到那么远。

*   Ethercap 过滤器：让这些在我的模拟器上工作（安装在模拟器上，而不是 mitm）用于传出数据包，但不适用于 TCP 和 IP 标头，据我所知，您只能更改数据包中的数据字段，这是不够的. 手册页给人的印象是它可以工作，但没有发现有人使用它来更改标题，这让我认为它无法完成。

*   Divert Sockets：尽管显然是为 2.6 内核设计的补丁，但仍无法使其正常工作。这与 IPtables 一起创建过滤器，您可以在其中修改传出数据包（标头和所有），然后再通过防火墙。我找不到足够的文档来整理这些部分。

*   TAP/TUN：根据我目前所了解到的，这个基于软件的网络接口应该可以工作，但我不相信这是最简单的方法。我看到的示例是针对 <2.6.36 内核的，因为“后来的内核行为不同”，其中包括我的模拟器版本。

*   libpcap：我相信 lippacp 只给你原始数据包，你不能修改数据包。我相信我可以复制数据包，杀死它们，修改副本，然后将它们发送回去，但同样，我认为还有一种更简单的方法。

*   使用用户态 TCP/IP 堆栈：找不到很好的文档或示例来说明如何使用，例如 Linux 2.4.34 中的 lwIP 堆栈，并禁用本机内核堆栈。

*   打开内核并使用本机 TCP/IP 堆栈进行处理：我知道这*会*起作用，但我担心更改-编译-测试的开发周期会花费时间，更不用说在 .c 文件中解析指针混乱了. 我从来没有这样做过，我不知道在哪里编译整个内核或特定模块，或者如何使用 openembedded 为我的 ARM 设备编译。我知道还有其他方法可以做到这一点，所以当我还有很多工作要做时，我很担心花时间学习如何打开内核。

在所有这些中，我已经用尽了 ettercap 并将插座转移到最远的地方，因为我认为它们会是最简单的。有任何这些（或其他）任意调整标题的例子吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T06:10:48.667

在最近的内核中，您可以使用 NFQUEUE 修改数据包而无需任何内核补丁。用户空间部分甚至还有 python 绑定。您可以在此处查看：[https](https://www.wzdftpd.net/redmine/projects/nfqueue-bindings/wiki/Examples) ://www.wzdftpd.net/redmine/projects/nfqueue-bindings/wiki/Examples，其中包括一个重写数据包的 rewrite.py 示例。

对于 iptables 部分，您需要这样的规则：

iptables -A OUTPUT -p tcp -m tcp --sport 80 -j NFQUEUE --queue-num 0

其中最后的参数是队列号，它必须与代码中的那个匹配。

如果简单的数据包编辑还不够，您还可以尝试 lwIP。Linux 中 Tap 设备上的 lwIP 开箱即用。为此，请同时获取 lwIP 和 contrib 包。然后在 contrib/ports/unix/proj/unixsim 中有一个例子，它使用 lwIP 来实现一些东西，包括通过 tap 设备的 web 服务器。

从实际网络接口访问 lwIP 堆栈的最简单方法是为 tap 设备设置 NAT，并将端口从实际接口转发到 tap 接口。不过，这仍然会涉及内核，因此它可能会比您想要的更多。一些可能的选项可以将其与 NFQUEUE 结合或修改 lwIP 以使用原始套接字而不是分接接口（我认为它不是开箱即用的）。

有关 nmap 指纹如何工作的信息，您可以查看此处： http: [//nmap.org/book/osdetect-methods.html](http://nmap.org/book/osdetect-methods.html)。要从 nmap 获取原始指纹，请使用“-vv”选项。此外，您可能希望使用最新版本的 nmap，因为它将具有最新的指纹识别。

# oracle - 对于 Oracle XML 表，XQuery 选择是否使用 XmlIndexes？

> ID：12565466
> 
> 赞同：1
> 
> 时间：2012-09-24T12:55:15.867
> 
> 标签：oracle, xquery, xmltype, xmltable, xmlindex

我正在尝试从在 oracle 中存储为二进制 xml 的一些结构化 xml 中检索密钥和父密钥。我尝试过创建非结构化索引以及带有结构化组件的索引。对 XMLTABLE() 执行 SELECT 时，结构化组件工作正常，但我无法使用 XMLTable 检索父节点的值。因此，我尝试使用以下 Xquery 来检索父值，但这根本不使用索引。这种查询方式是否支持使用 XmlIndexes？我在文档中找不到任何说这两种方式的东西。

```
SELECT y.*
FROM xml_data x, XMLTABLE(xmlnamespaces( DEFAULT 'namespace'),
'for $i in /foo/bar
   return element r {
      $i/someKey
     ,element parentKey { $i/../someKey }   
 }'
PASSING x.import_xml
COLUMNS
   someKey VARCHAR2(100) PATH 'someKey'
  ,parentKey VARCHAR2(100) PATH 'parentKey'
) y 
```

谢谢，汤姆

# java - Intellij 属性文件的透明转换

> ID：12565474
> 
> 赞同：1
> 
> 时间：2012-09-24T12:55:38.903
> 
> 标签：java, internationalization, intellij-idea

我一直`Transparent Native to ASCII conversion`在 Intellij Idea IDE 上使用设置，没有问题。当我现在回到项目并在 i18n 文本文件 (messages.properties) 上进行另一项更改时，我会收到有关指标的大量更改的通知，这会告诉我在最近提交到 SVN 后我更改了哪些行。

更改出现在第一次触摸文件时，更改出现在斯堪的纳维亚字母（å、ä、ö）上。

变化是这样的：

```
 old value = \u00f6
    new value = ö 
```

我在每一个扫描字母上都看到了这种变化。在颠覆历史上，与当前版本相比，任何过去版本之间都有相同的变化。有趣的是，我刚刚离开这个项目几个月，回来时问题就出现了。

与此同时，我在我自己公司以外的另一家公司担任顾问，他们在那里也有同样的问题没有解决。他们因此在 Windows 文本编辑器上编辑 i18n 文件，但这对我没有帮助，因为我在 gedit 也看到了 \u00f6 的东西。我没有 Windows 编辑器，因为这是 Linux 机器。

那么，知道 Intellij idea 发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:33:57.027

您没有指定您的 IntelliJ IDEA 版本，但[类似问题已](http://youtrack.jetbrains.com/issue/IDEA-24267)在 IDEA 11 中修复。

# jquery - 我的 jquery 插件和 setInterval - 动画只运行 1 帧

> ID：12565480
> 
> 赞同：0
> 
> 时间：2012-09-24T12:55:49.637
> 
> 标签：jquery, animation, jquery-plugins, setinterval

我需要在悬停时为精灵设置动画，就是这样！我尝试了一些插件，但决定自己编写。这里是：

```
 (function($) {
    function animate(opts, t) {
        if (opts.bgpos === opts.width * opts.frames) {
            t.css('background-position-x', '0px');
        } else {
            opts.bgpos = opts.bgpos + opts.width;
            t.css('background-position-x', opts.bgpos + 'px');
        }
    }
    $.fn.spin = function(options) {
        var t = $(this);
        var opts = $.extend({}, $.fn.spin.defaults, options);
        var frames = t.data('frames');
        var bgpos = parseInt(t.css('background-position-x'),10);
        opts = $.extend({
            'frames': frames,
            'bgpos': bgpos
        }, opts);
        setInterval(animate(opts, t), 1000 / opts.fps);
    };
    $.fn.spin.defaults = {
        fps: 7,
        width: 236
    };
})(jQuery); 
```

【之所以叫旋转，是因为精灵动画是旋转的】

我这样称呼它：

```
$('article.post').on({
    mouseenter: function() {
        var t = $(this);
        t.children('div.filmstrip').spin();
    }
}); 
```

然而，动画每次悬停只移动一帧。根据我的发现，这是因为我在 setInterval 中使用了函数调用而不是引用。如果我删除 ()，我可以创建 setInterval 循环，但是我的动画函数在没有变量的情况下失败。

如何使用 setInterval 将我的 $(this) & options 放入我的动画函数中？或者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:59:54.983

您将方法的结果*传递*`animate`给`setInterval`-我猜您每次都想实际调用该函数。

只需将您的函数调用包装在一个匿名函数中：

```
setInterval(function(){ animate(opts, t) }, 1000 / opts.fps); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:04:21.003

[`window.setInterval()`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)需要一个 类型的参数`function`，但您提供 的返回值`animate`，即`undefined`.

当你写

```
setInterval(animate(opts, t), 1000 / opts.fps); 
```

你告诉 JS 引擎`animate(opts, t)`立即执行，然后调用`setInterval`返回的值，在这种情况下是`undefined`，因为你的函数没有明确返回任何东西。所以就像发生了以下事情：

```
var animated = animate(opts, t); //animated == undefined
setInterval(animated, 1000/opts.fps); 
```

因此，您没有安排任何事情。您可能想要使用函数文字

```
setInterval(function() {animate(opts, t);}, 1000 / opts.fps); 
```

使关闭

```
function() {
  animate(opts, t);
} 
```

被传递给`setInterval`并被安排在以后执行。

# asp.net - 在没有（或使用虚拟）角色提供者的情况下启用角色

> ID：12565482
> 
> 赞同：3
> 
> 时间：2012-09-24T12:55:51.583
> 
> 标签：asp.net, .net, authorization, roleprovider, asp.net-roles

我正在关注[这篇文章](http://support.microsoft.com/default.aspx?scid=kb;en-us;311495)，其中描述了如何在使用表单身份验证登录时为用户分配角色：

```
public void Application_AuthenticateRequest( Object src , EventArgs e )
{
   if (!(HttpContext.Current.User == null))
   {
      if (HttpContext.Current.User.Identity.AuthenticationType == "Forms" )
      {
      System.Web.Security.FormsIdentity id;
      id = (System.Web.Security.FormsIdentity)HttpContext.Current.User.Identity;
      String[] myRoles = new String[2];
      myRoles[0] = "Manager";
      myRoles[1] = "Admin";
      HttpContext.Current.User = new System.Security.Principal.GenericPrincipal(id,myRoles);
      }
   }
} 
```

我将角色逻辑放在事件处理程序中，所以我基本上不需要角色提供者。尽管如此，为了运行它，我似乎必须在`web.config`. 可悲的是，如果我只是说：

```
<roleManager enabled="true"/> 
```

它会导致与 SQL 服务器连接失败相关的运行时错误，就像我选择`AspNetSqlRoleProvider`角色提供者一样。

我应该怎么做才能让角色以这种方式工作？我如何选择不使用角色提供者，或者我应该如何实现一个虚拟角色提供者（如果有任何意义）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:09:34.153

您不需要`roleManager`在 web.config 中启用 - 毕竟，在角色管理器出现之前，人们曾经在 .NET 1.x 中使用角色。

为您做的一件`roleManager`您在代码中没有做的事情被设置`Thread.CurrentPrincipal`为`HttpContext.Current.User`. 如果你依赖这个（例如使用`PrincipalPermissionAttribute`），那么你需要添加这个：

```
Thread.CurrentPrincipal = HttpContext.Current.User; 
```

否则，我希望它会起作用：您看到什么症状让您认为它不起作用？

至于实现一个 dummy `RoleProvider`，这很容易：例如看到[这个 MSDN 文章](http://msdn.microsoft.com/en-us/library/8fw7xh74(v=vs.100).aspx)。

你只需要实现`GetRolesForUser`and`IsInRole`方法；其他方法可以简单地抛出`NotSupportedException`。

# android - 使用.net webservice在android中的GCM推送通知

> ID：12565483
> 
> 赞同：1
> 
> 时间：2012-09-24T12:55:52.897
> 
> 标签：android, google-cloud-messaging

我的服务器端代码在 .net WCF 中。如何在我的 android java 代码中实现 GCM。

我已经用 Jsp servlet 尝试过使用它的 GCm.Jar 文件。所以想用 .net 来做。请帮我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:19:47.173

你可以查看这个帖子：

[HttpClient 连接到 Https 服务器](https://stackoverflow.com/questions/12534697/httpclient-connecting-to-https-server/12534921#comment16895699_12534921)

它实现了如何向 .Net WCF 服务发出 Json 请求。

希望对您有所帮助，如果您需要进一步的帮助，我可以发布一些代码。

# asp.net-mvc - 将活动目录组与 Windows 身份验证 aspnet mvc 3 集成

> ID：12565486
> 
> 赞同：1
> 
> 时间：2012-09-24T12:56:09.377
> 
> 标签：asp.net-mvc, active-directory, iis-7.5, windows-authentication, windows-server-2008-r2

我在 mvc 3 应用程序中使用 Windows 身份验证，我只想让我的活动目录中的一些组访问这个应用程序。我没有在我的控制器中使用 [Authorize] 属性，只是我的 web.config 配置。

这就是我设置 web.config 的方式：

```
 <system.web>
    <authentication mode="Windows" />
    <authorization>
    <allow roles="EUsers" />
        <deny users="*" />
    </authorization>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <security>
        <authorization>
            <add accessType="Allow" roles="EUsers" />
            <add accessType="Deny" users="*" />
        </authorization>
    </security>
  </system.webServer> 
```

我还在我的 IIS 授权部分启用了 Windows 身份验证和 ASP.NET 模拟。我正在尝试使用我的用户（并且我是 EUUsers 的成员）访问该应用程序，但它总是提示我输入用户名和密码。我是不是忘记了什么？难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:00:34.003

> 我没有在我的控制器中使用 [Authorize] 属性，只是我的 web.config 配置。

那简直是错误的。在 ASp.NET MVC 应用程序中，您不应使用 web.config 来控制授权。您应该使用该`[Authorize]`属性。所以：

```
[Authorize(Roles = "EUsers")] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T18:27:23.233

我在评论部分看到它仍然无法正常工作。我相信这可能是“拒绝”被明确分配给用户=“*”和权限优先规则的结果

以下是解决权限冲突的一些规则：

“拒绝”权限通常优先于“允许”权限。直接应用于对象的权限（显式权限）优先于从父级（例如从组）继承的权限。从近亲继承的权限优先于从远亲继承的权限。因此，从对象的父文件夹继承的权限优先于从对象的“祖父”文件夹继承的权限，依此类推。来自同一级别的不同用户组的权限（直接设置或继承，以及“拒绝”或“允许”）是累积的。因此，如果用户是两个组的成员，其中一个具有“读取”的“允许”权限，另一个具有“允许” “Write”，用户将同时拥有读和写权限——当然，这取决于上面的其他规则。尽管拒绝权限通常优先于允许权限，但情况并非总是如此。明确的“允许”权限可以优先于继承的“拒绝”权限。

权限的优先级层次结构可以总结如下，列表顶部列出了更高优先级的权限：

1.  明确拒绝
2.  显式允许
3.  继承拒绝
4.  继承允许

# jquery - Vaadin - 加载页面前执行的 JS

> ID：12565489
> 
> 赞同：0
> 
> 时间：2012-09-24T12:56:15.330
> 
> 标签：jquery, vaadin

我正在尝试在 Vaadin 6.x 中添加 jquery，但 vaadin 在加载页面之前正在执行 js，因此无法识别 jquery 标签并且不会在页面上加载。

我正在执行 jquery 函数，如下所示

```
public void attach()
 getApplication().getMainWindow().executeJavaScript("alert('attached');$('a.media').media();"); 
```

但是alert语句和jquery函数在加载页面之前执行，所以jquery组件加载失败。

如果我`setTimeout()`以 2-3 秒的延迟在 javascript 中执行此脚本，则 jquery 可以正常工作。

有谁知道如何在 vaadin 中获取事件，该事件准确地说明 vaadin 加载页面的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:14:59.563

使用 jQuery，您可以使用：

```
$(function() {
    // Insert your code here
}); 
```

这个使用`.ready()`函数。它将在文档完全加载后执行。

[请参阅参考资料](http://api.jquery.com/ready/)

# azure - 如何知道我的 Azure 角色实例 VM 是否已重新启动？

> ID：12565490
> 
> 赞同：5
> 
> 时间：2012-09-24T12:56:14.313
> 
> 标签：azure, azure-web-roles

我有一个 Azure Web 角色。有时它会由于异常或由于操作系统更新而被回收。这将包括或不包括 VM 重新启动。我想知道VM是重新启动还是只是主机进程`WaIISHost.exe`重新启动。

我如何找到最简单的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T09:03:16.267

在任何机器（VM、RDP 等）上，您都可以执行命令提示符

```
net statistics server | more 
```

这将返回机器的统计信息并有一个时间戳（Statistics since），可以作为机器最后一次开机的时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T23:12:29.113

启用 RDP 访问并登录到 Azure VM 后，您可以通过多种方式找到它。此外，在给定情况下，VM 回收和角色回收可能是两个独立的事件，并且角色回收可能不需要 VM 回收。

如果您的角色主机进程（即 WaIISHost.exe）有任何异常，事件日志将包含有关此异常的条目，并且角色将重新启动（或根据异常保持重新启动）。如果 VM 由于计划内或计划外更新而重新启动，则角色主机进程将优雅地关闭，并且不会记录有关角色主机进程的任何异常。

此外，如果您检查角色主机进程启动时间（使用 ProcessExplorer）并检查系统正常运行时间以查看差异，则应该存在显着的时间差异来解释角色何时重新启动以及 VM 何时运行。

最后，如果您查看位于 C:\log 文件夹中的最新 waappagent.log（检查日期/时间以选择最新）并搜索基于角色 deployementID 的状态，该状态将显示角色状态更改时是否存在特定于崩溃的日志。您可能需要洗牌很多东西才能弄清楚。这是另一种挖掘代理特定日志以确定是否存在导致问题的角色主机进程问题的粗略方法。

# resize - 在 jtable 单元格中调整组件大小

> ID：12565499
> 
> 赞同：0
> 
> 时间：2012-09-24T12:56:36.497
> 
> 标签：resize, jtable, components, cell, renderer

我正在尝试调整 jtable 单元格内的滑块大小。但是在调整列标题的大小时，我确实传入了相关代码（第一列的方法 getTableCellRendererComponent），但没有任何反应（滑块没有调整大小？？）。

下面是我的渲染器的代码：

```
public class NavigationDataModelRenderer extends JLabel implements TableCellRenderer {

    private JSlider slider = null;
public NavigationDataModelRenderer()
{
    super();
}

public NavigationDataModelRenderer(int tolerance) 
{
    super();
    slider = new JSlider(tolerance * -3,tolerance *3);
    slider.setPaintTicks(true);
    slider.setMajorTickSpacing(tolerance);
    slider.setUI(new SpreadSliderUI(slider));
}

@Override
public Component getTableCellRendererComponent(JTable table, Object value,boolean isSelected, boolean hasFocus, int row, int column) 
{
    Component comp = null;
    if (table.getModel()!= null && table.getModel() instanceof NavigationDataModel)
    {
        NavigationDataModel model = (NavigationDataModel) table.getModel();
        Object o = table.getModel().getValueAt(row, column);
        this.setText(o.toString());

        if (column == 1)
        {//slider
            if (model.getList() != null && model.getList().get(0)!= null && model.getList().get(row) != null)
            {
                slider.setValue((Integer)o);
            }
            comp = slider;

            slider.setSize(table.getCellRect(row, column, false).getSize());
        }
        else if (column == 2)
        {
            if (((Integer)o) ==  Integer.MAX_VALUE)
            {
                this.setText("Invalid");
            }
        }
        else
        {
            comp = this;
        }
    }
    return comp;
} 
```

}

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:14:59.267

我遇到这个问题是因为我为我的滑块使用了 BasicSliderUI。现在在我的渲染器中，每次输入 getTableCellRendererComponent(...) 并调整滑块大小时，我都会为滑块设置一个新的 BasicSliderUI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-07T05:54:31.780

```
 public class GrowingCellRenderer extends DefaultTableCellRenderer
    {

     @Override
      public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus,
          int row, int column)
      {
        Component renderer = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);

        //renderer.setBackground(Color.red);
        renderer.setSize(getMinimumSize());
        table.setRowHeight(row, renderer.getHeight());
        return renderer;
      }
    }

public static void main(String[] args)
{
  GrowingCellRenderer testInstance = new GrowingCellRenderer();
  final Date dateProjectStart = new Date();  //Start the "project" today
  final JTable jtab = new JTable(TableTools.createTestData(dateProjectStart));
  jtab.setDefaultRenderer(String.class, testInstance);

} 
```

# python - 使用python查找重复文件

> ID：12565500
> 
> 赞同：1
> 
> 时间：2012-09-24T12:56:37.113
> 
> 标签：python, file, duplicates, directory, web-crawler

我正在尝试编写一个 Python 脚本，该脚本将爬过一个目录并找到所有重复的文件并报告重复项。解决这个问题最好的办法是什么？

```
import os, sys

def crawlDirectories(directoryToCrawl):
    crawledDirectory = [os.path.join(path, subname) for path, dirnames, filenames in os.walk(directoryToCrawl) for subname in dirnames + filenames]
    return crawledDirectory

#print 'Files crawled',crawlDirectories(sys.argv[1])

directoriesWithSize = {}
def getByteSize(crawledDirectory):
    for eachFile in crawledDirectory:
        size = os.path.getsize(eachFile)
        directoriesWithSize[eachFile] = size
    return directoriesWithSize

getByteSize(crawlDirectories(sys.argv[1]))

#print directoriesWithSize.values()

duplicateItems = {}

def compareSizes(dictionaryDirectoryWithSizes):
    for key,value in dictionaryDirectoryWithSizes.items():
        if directoriesWithSize.values().count(value) > 1:
            duplicateItems[key] = value

compareSizes(directoriesWithSize)

#print directoriesWithSize.values().count(27085)

compareSizes(directoriesWithSize)

print duplicateItems 
```

为什么这会抛出这个错误？

```
Traceback (most recent call last):
  File "main.py", line 16, in <module>
    getByteSize(crawlDirectories(sys.argv[1]))
  File "main.py", line 12, in getByteSize
    size = os.path.getsize(eachFile)
  File     "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/genericpath.py", line 49, in getsize
OSError: [Errno 2] No such file or directory:        '../Library/Containers/com.apple.ImageKit.RecentPictureService/Data/Documents/iChats' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:03:03.987

在我看来，您的`crawledDirectory`功能太复杂了：

```
def crawlDirectories(directoryToCrawl):
    output = []
    for path, dirnames, filenames in os.walk(directoryToCrawl):
        for fname in filenames:
            output.append(os.path.join(path,fname))
    return output 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:06:40.003

我建议尝试：

```
def crawlDirectories(directoryToCrawl):
    crawledDirectory = [os.path.realpath(os.path.join(p, f)) 
                                         for (p, d, f) in os.walk(directoryToCrawl)]
return crawledDirectory 
```

也就是说，在爬网中使用规范路径而不是相对路径。

# php - 在 zend 框架中更新数据库详细信息的位置

> ID：12565501
> 
> 赞同：2
> 
> 时间：2012-09-24T12:56:39.807
> 
> 标签：php, zend-framework

我想更新使用 zend 框架开发网站的数据库详细信息。我不知道我需要在哪里将数据库详细信息更新为框架的新内容。

当我们将所有文件从集中式服务器移动到本地服务器（如 Intranet websource）时，还需要有关要进行哪些更改的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:00:27.653

数据库详细信息通常在 application.ini 配置文件中提供：“resources.db.params.<a param>”，例如：resources.db.params.dbname = “mydatabase” [编辑] 这个配置文件可以在应用程序/配置/文件夹

但它可以在任何地方提供，具体取决于开发人员的口味和遵循最佳实践的意愿......您应该使用关键字“dbname”进行大量搜索，然后您会找到它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:05:05.650

你的问题真的很模糊。如果您使用的是 ZF 1.12：

您可以像这样在 application.ini 中设置数据库配置：

```
resources.db.adapter = "pdo_mysql"
resources.db.params.host = "localhost"
resources.db.params.username = "foo"
resources.db.params.password = "secret"
resources.db.params.dbname = "bar" 
```

此外，您可以选择将环境变量设置为生产/开发并使用不同的配置。

```
[production : bootstrap]
    resources.db.adapter = "pdo_mysql"
    resources.db.params.host = "localhost"
    resources.db.params.username = "foo"
    resources.db.params.password = "secret"
    resources.db.params.dbname = "bar"

[development : bootstrap]
    resources.db.adapter = "pdo_mysql"
    resources.db.params.host = "localhost"
    resources.db.params.username = "foo"
    resources.db.params.password = "another_secret"
    resources.db.params.dbname = "bar" 
```

# c++ - 提升 asio tcp 服务器

> ID：12565507
> 
> 赞同：2
> 
> 时间：2012-09-24T12:57:07.520
> 
> 标签：c++, sockets, boost, boost-asio

我目前一直在尝试使用 boost。当我尝试制作一个简单的多线程回显服务器时，它在收到错误代码 3 时退出。我已经多次查看文档但仍然没有运气。我知道这可能是我忽略的非常简单的事情。我在winsock方面有不错的经验，但我想学习boost库。

这是我取出的失败的代码

```
typedef boost::shared_ptr<tcp::socket> socket_ptr;
boost::asio::io_service io;
boost::array<char, 512> buf;

void startserver ( std::string host, std::string port )
{
    tcp::acceptor a (io, tcp::endpoint(tcp::v4(), atoi(port.c_str())));
    for(;;)
    {
        socket_ptr sock (new tcp::socket(io));
        a.accept(*sock);
        std::cout << sock->remote_endpoint() << std::endl;
        boost::thread t (boost::bind(session, sock));
     }
}

void session ( socket_ptr sock ) 
{
    sock->send(boost::asio::buffer("welcome"),0,er);
    size_t len;
    for(;;)
    {
        len = sock->receive(boost::asio::buffer(buf));

        sock->send(boost::asio::buffer(buf,len),0,er);
    } 
```

}

我可以用 netcat 很好地连接到它，它会收到欢迎消息，但是当它收到它时就崩溃了。我尝试在每个错误上使用 boost::system::error_code 来捕获错误，但没有返回任何内容

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T13:10:37.187

有太多的问题。检查 asio 文档以获取正确的示例。一些问题：

1.  创建`boost::thread`对象`t`，然后立即退出范围。这会分离线程，现在无法控制；或者，正如**Joachim Pileborg**所提到的，它可以终止（我对 boost::threads 不是很熟悉，所以如果我错了，请纠正我）。
2.  在此之后你开始新的接受者。每个侦听端口应该只保留 1 个接受器。
3.  根本没有必要为此创建线程，它是 ASIO，使用异步；）
4.  `receive`不等待数据，它只是获取 ASIO 已经拥有的数据包数据（在这种情况下不是真的）

检查 boost 站点上的示例，我认为您的情况[阻止了 tcp echo 服务器](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/example/echo/blocking_tcp_echo_server.cpp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:11:38.613

这很可能是因为线程超出了范围。从[`boost::thread`析构函数](http://www.boost.org/doc/libs/1_51_0/doc/html/thread/thread_management.html#thread.thread_management.thread.destructor)的手册页：

> 如果线程是可连接的，则调用 std::terminate。销毁 *this。

这意味着当线程启动时，它*可能会*在线程再次获得控制权之前运行一段时间，`startserver`并且线程对象被破坏并且您的线程被终止。

# java - Java KeyPress 箭头键触发数字键盘键

> ID：12565510
> 
> 赞同：4
> 
> 时间：2012-09-24T12:57:17.167
> 
> 标签：java, keyevent

当`Robot.keyPress`用于 KeyEvent`VK_UP`时，触发小键盘键而不是普通的箭头键。我正在尝试编写一个可用于游戏等的键盘模拟器。使用 TrackMania 进行测试我注意到它不会触发普通键，而是小键盘上的键。

如何使用 keyPress 触发普通键？

检查[API](http://docs.oracle.com/javase/6/docs/api/java/awt/event/KeyEvent.html#VK_UP)，它应该是非数字键盘的箭头键。它不是。

```
Robot r = new Robot();
r.keyPress(KeyEvent.VK_UP); 
```

这将生成小键盘向上键。

如果这不能在 Java 中完成，是否有任何语言允许它？

# java - 为tomcat应用程序运行classmexer？

> ID：12565512
> 
> 赞同：0
> 
> 时间：2012-09-24T12:57:19.593
> 
> 标签：java, tomcat6, javaagents, transactionmanager

我正在尝试将 classmexer-0.3.jar 与 tomcat 一起使用来获取我的 Web 应用程序的对象大小。但是，当调用该方法时，我收到以下错误消息：

```
java.lang.NoClassDefFoundError: Ljavax/transaction/TransactionManager;
        java.lang.Class.getDeclaredFields0(Native Method)
        java.lang.Class.privateGetDeclaredFields(Class.java:2308)
        java.lang.Class.getDeclaredFields(Class.java:1760)
        com.javamex.classmexer.MemoryUtil.deepMemoryUsageOf0(MemoryUtil.java:197)
        com.javamex.classmexer.MemoryUtil.deepMemoryUsageOf(MemoryUtil.java:104)
        com.javamex.classmexer.MemoryUtil.deepMemoryUsageOf(MemoryUtil.java:80) 
```

我能做些什么来解决这个问题？我假设我需要一个带有 TransactionManager 类的 jar，但我不知道是哪一个。

我的项目是在 Eclipse 中使用 Maven 构建的，用于开发并从带有 Jenkins 的 unix 服务器运行。

干杯，

阿列克谢蓝。

编辑：现在看起来正在为更基本的对象工作，这表明设置是正确的。我认为问题是在调用 MemoryUtil.deepMemoryUsageOf(Obj) 时引起的，其中 obj 包含 Google LoadingCache。看来我可能错过了一些来源，关于该来源的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:36:33.343

使用此服务： http: [//findjar.com/class/javax/transaction/TransactionManager.html](http://findjar.com/class/javax/transaction/TransactionManager.html)

这对于查找依赖项非常有帮助。

# postgresql - 无法在 Windows 中将 sql 文件导入 PostgreSql

> ID：12565513
> 
> 赞同：1
> 
> 时间：2012-09-24T12:57:22.373
> 
> 标签：postgresql

我尝试使用导入 sql 文件

psql.exe -U postgres -d 开发“d:\myprojects\ruby\HelloWorld\db\data.sql”。

我收到一条消息“额外的命令行争论 d:\myprojects\ruby\HelloWorld\db\data.sql 被忽略”

对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T13:27:55.320

[任何一个](http://www.postgresql.org/docs/current/static/app-psql.html)

`psql.exe -U postgres -d development < "d:\myprojects\ruby\HelloWorld\db\data.sql"`

或者

`psql.exe -U postgres -d development -f "d:\myprojects\ruby\HelloWorld\db\data.sql"`

# objective-c - 在 iOS 中创建包含行和列的表格

> ID：12565515
> 
> 赞同：5
> 
> 时间：2012-09-24T12:57:26.670
> 
> 标签：objective-c, ios5, uitableview, uibutton

我想在 iOS 中创建一个包含一些行和列的表。我们还可以选择在表格中添加金额。示例表的屏幕截图如下： ![在此处输入图像描述](../Images/0447a763d00158e0b9317c34dcd5552d.png)

单元格需要是可编辑的。有没有办法使用 iOS 中的默认 UITableView 来实现这一点。或者使用按钮或文本字段等创建它是否很好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T22:15:57.667

这不是一个简单的解决方案，但您可以`UITableView`在表格视图（垂直）的每个单元格内使用旋转（水平），就像 Pulse 应用程序一样。仅使用标签可以轻松管理，但如果您计划处理选择行、排序等事件，“excel”外观可能会更难。

这是关于如何使用水平表的两部分教程（http://www.raywenderlich.com/）：

[第 1](http://www.raywenderlich.com/4680/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-1)部分-[第 2 部分](http://www.raywenderlich.com/4723/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:02:02.553

在 ios6 中，您可以使用 a`UICollectionView`和 a`UICollectionViewFlowLayout`来归档它。A 的`UICollectionView`工作方式与 a 非常相似`UITableView`，但可以让您更好地控制单元格的显示和对齐方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T22:58:40.027

如果您仍在寻找选项，GitHub 上有一个支持 iOS 4.3+ 的开源解决方案。我实际上并没有使用它，但它看起来像 UICollectionView 之类的作品。

[PSTCollectionView](https://github.com/steipete/PSTCollectionView)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-03T06:48:21.980

我使用 tableview 和 scrollview 创建了一个与此类似的表结构。认为这可能对您有所帮助

您可以在此处获取示例项目

[https://drive.google.com/folderview?id=0B-brvnZfBXwTU21VbmNNcnRSU2M&usp=sharing](https://drive.google.com/folderview?id=0B-brvnZfBXwTU21VbmNNcnRSU2M&usp=sharing)

# sql-server-2008 - 如何检索char列的最大出现值

> ID：12565516
> 
> 赞同：-4
> 
> 时间：2012-09-24T12:57:38.183
> 
> 标签：sql-server-2008

我在获得列的最大出现次数时遇到问题

```
 matnum   uom  amount
-------------------------------------
1234    EA   10
1234    CS   10
1234    EA    20
1235    CS   10
1235    CS    20 
```

* * *

我的输出选择应该是

```
 matnum   uom  SUM(amount)
-------------------------------------
1234   EA (because EA occured Twice)    40
1235   CS                               30 
```

* * *

请提供一个选择查询以获得所需的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:07:07.183

我在这里假设一些关于你想要什么的事情，但是：

```
SELECT A.matnum, B.uom, C.s AS [SUM(amount)]
FROM yourtable A
INNER JOIN (
    SELECT matnum, uom, 
        ROW_NUMBER() OVER (PARTITION BY matnum ORDER BY COUNT(*) DESC) AS rnm
    FROM yourtable
    GROUP BY matnum, uom
) B ON A.matnum = B.matnum AND B.rnm = 1
INNER JOIN (
    SELECT matnum, SUM(amount) AS s 
    FROM yourtable 
    GROUP BY matnum
) C ON A.matnum = C.matnum
GROUP BY A.matnum, B.uom, C.s 
```

[SQL小提琴](http://sqlfiddle.com/#!3/d1c54/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:59:41.287

```
select matnum, 
       uom, 
       SUM(amount) as sum_amount
from your_table
group by matnum, uom 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:59:45.707

```
select max(matnum) as matnum,max(uom) as uom,SUM(amount)
from yourtable
group by matnum,uom 
```

# asp.net - 同步创建多个订阅 sqlcereplication

> ID：12565528
> 
> 赞同：0
> 
> 时间：2012-09-24T12:58:17.170
> 
> 标签：asp.net, web-services, sql-server-2008-r2, sql-server-ce, merge-replication

我目前正在开发数据库和 sql server 数据库 android (sqlite) 之间的桥梁。

为此，我使用 Web 服务和过滤复制与存储在服务器 IIS 7 上的 sqlce 数据库。为此，我在我的电脑上使用了 IIS Express。在我的电脑上一切正常，但是在部署时，复制的数据库会为每个同步创建一个新订阅（而在 IIS Express 上同步工作而不创建新订阅），没有抛出异常，什么都没有。

我不明白为什么 IIS 7 或 IIS Express 以不同的方式同步数据库。

问题原因的一个想法？

我使用Sql replication ce 3.5 sp2，Sql server 2008 R2 作为母数据库，IIS7。

我试图： - 用网络服务器上的一个小软件复制母数据库，它可以工作。- 使用“SqlCeReplication.loadproperties”查找我的sqlce数据库参数，避免创建新订阅，不起作用。

其他细节：-当它第一次不同步时，webservices 不做“repl.AddSubscription(AddOption.CreateDatabase)”，我已经检查过了。

这是用于同步的代码：

```
' Define the server, publication, and database names.
Dim repl As SqlCeReplication = Nothing
Try
    repl = New SqlCeReplication
    repl.Publisher = PublisherName
    repl.PublisherLogin = login
    repl.PublisherPassword = password
    repl.PublisherSecurityMode = SecurityType.DBAuthentication
    repl.PublisherDatabase = My.Settings.DBName
    repl.Publication = PublicationName
    repl.InternetUrl = "https://iis.mydomain.com:444/sql/sqlcesa35.dll"
    repl.InternetLogin = "sync"
    repl.InternetPassword = "dfssd"
    repl.Subscriber = "MobileApp - " & login
    repl.SubscriberConnectionString = "Data Source=" & My.Settings.folderDB + "\" + subscriptionName + ".sdf"
    If Not File.Exists(My.Settings.dossierBDD + "\" + subscriptionName + ".sdf") Then
        repl.AddSubscription(AddOption.CreateDatabase)
    End If
    repl.Synchronize()
Catch err As SqlCeException
Finally
    repl.Dispose()
    repl = Nothing
End Try 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T13:33:14.120

我自己找到了答案……我真的不知道为什么，但是如果你想在 sqlce 上进行合并复制，你需要让 IIS 网站“加载用户配置文件”（在应用程序池上），否则订阅是每次创建...

# php - PHP 搜索 url 请求

> ID：12565532
> 
> 赞同：3
> 
> 时间：2012-09-24T12:58:32.977
> 
> 标签：php, url, request

我需要一些帮助，例如 index.php，并且我需要使它像这样。有人访问：

```
index.php?search=blbla 
include search.php
else
include home.php 
```

我需要一个建议谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:00:30.307

试试这个

```
if (isset($_GET['search'])) include('search.php');
else include('home.php'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:01:36.607

```
$sq = $_GET['search']; //$_GET['']
if (isset($sq) && $sq != '') {
include('search.php');
} else {
include('home.php');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T13:01:41.170

好吧，您可以使用[`isset()`](http://php.net/manual/en/function.isset.php)来查看变量是否已设置。例如

```
if(isset($_GET['search'])){
    include "search.php";
}
else {
    include "home.php";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T13:01:35.860

```
<?php

//if($_GET['search'] > ""){ // this will likely cause an error
if(isset($_GET['search']) && trim($_GET['search']) > ""){ // this is better
   include ('search.php');
}else{
   include ('home.php');
}

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T13:01:39.037

像这样使用它

```
if (isset($_GET['search']))
  include 'search.php';
else
 include 'home.php'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T13:03:53.760

我个人更喜欢检查是否`$_GET`设置了 a 以及它是否实际上等于这样的东西：

```
if(isset($_GET['search']) && strlen(trim($_GET['search'])) > 0): include 'search.php'; 
else: include 'home.php'; 
```

这将避免放入`$_GET`变量但没有实际设置它的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T13:58:08.573

使用时[`isset()`](http://uk.php.net/manual/en/function.isset.php)您需要注意，使用这样的空 GET 变量`script.php?foo=`将`isset($_GET['foo'])`返回**TRUE**
Foo 已设置但没有值。

因此，如果您想确保 GET 变量具有您可能想要[`strlen()`](http://uk.php.net/manual/en/function.strlen.php)结合使用的值[`trim()`](http://uk.php.net/manual/en/function.trim.php)...

```
if (strlen(trim($_GET['search'])) > 0) {
    include('search.php');
} else {
    include('home.php');
}
```

此外，您可能想使用[`require()`](http://uk.php.net/manual/en/function.require.php)而不是[`include()`](http://uk.php.net/manual/en/function.include.php). 如果 search.php 不能是“必需的”，则会生成一个 PHP 致命错误，如果 search.php 不能被“包含”，则只有一个 PHP 警告。

# asynchronous - Blob.UploadAsync 方法上的 StorageClientException

> ID：12565533
> 
> 赞同：1
> 
> 时间：2012-09-24T12:58:36.253
> 
> 标签：asynchronous, azure, azure-blob-storage

我已经实现了以下异步 blob 上传方法来上传多个块。

```
 var container = GetContainer(containerName);

        var blob = container.GetBlockBlobReference(blobName);

        String[] base64EncodedBlockIds = new String[10];// 10- number of Blocks

        //To upload the blocks in parallel - 10 parallel blocks
        ParallelLoopResult parallelLoopResult = Parallel.For(0,10, i =>
            {
                String base64EncodedBlockId = Convert.ToBase64String(System.BitConverter.GetBytes(i));                                 
                byte[] bytesMemoryStream = GetBytesFromStream(stream);
                using (MemoryStream memoryStream = new MemoryStream(bytesMemoryStream))
                {
                    blob.PutBlock(base64EncodedBlockId, memoryStream, null);// throws an exception "The value for one of the HTTP headers is not in the correct format"

                }
                base64EncodedBlockIds[i] = base64EncodedBlockId;
            });
        blob.PutBlockList(base64EncodedBlockIds); 
```

它会引发异常“其中一个 HTTP 标头的值格式不正确”。

需要您的投入

问候， 维维克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T22:33:32.347

blob 中的 BlockID 必须具有相同的长度（字符数）。BlockID“10”比其他的长，这可能是你问题的根源。

一种解决方案是将 BlockID 零填充到相同的长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T12:05:10.043

在我的情况下，出现“HTTP 标头之一的值格式不正确”错误是因为我试图写一个空块（`memoryStream`有 0 个字节）。PutBlock 失败，因为标头中的内容长度为 0。

# ios - 核心数据继承与无继承

> ID：12565534
> 
> 赞同：2
> 
> 时间：2012-09-24T12:58:39.273
> 
> 标签：ios, core-data, nsmanagedobject, nsmanagedobjectcontext

我在核心数据方面遇到了一些问题，所以我希望有人能够帮助我:)

第一个问题，我有一个看起来像这样的数据模型：

```
 Entity P (A) <----> Entity R
  / | \
 / /\ \ 
/ / | \ \
C D E F G 
```

我的所有实体都继承自同一个实体“P”，因为它们需要一个公共属性和一个公共关系（“A”和“R”）

我遇到的问题是，当您使用继承时，核心数据使用只为所有实体生成一个 sqlite 表。在我的情况下，这意味着我的数据库将只有 1 个表用于所有数据。我做了一些研究，发现它会产生性能问题（此外，我所有的实体属性都是瞬态的，并且在 willSave 期间，它们的值被聚合+加密到存储在“A”中的一个 NSData 中，所以我将无法使用谓词进行过滤并提高 SELECT 性能）。所以我决定删除“P”，并将“A”添加到“C”，“D”......，“G”中。问题出在“R”上，因为之前我只有一个反向关系，现在我每次创建一种新实体时都需要创建一个。所以我想删除所有的反向关系，是否可以？有时我需要使用 nil 上下文创建托管对象，然后我将它们插入上下文中，这可能就是为什么如果我在插入 MOC 之前设置非逆关系，核心数据不会自动设置逆关系？无论如何，我从不需要逆，所以即使我收到警告，我也可以避免定义它们吗？

第二个问题，在特定情况下，我需要在 MOC 保存期间创建一个新的“R”并将其分配给“C”、“D”、..、“G”。所以我想使用 willSave 但是，我不知道创建的实体是否会被保存。如果 MOC 对“insertedObjects”/“updatedObjects”/“deletedObjects”进行简单循环，并且对于它调用 willSave 的每个对象，执行保存，然后调用 didSave，这意味着我要修改数组它正在迭代，然后它应该崩溃吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:29:12.150

核心数据不是你的 sql 表的包装器。它处理对象图及其持久性。SQLite 存储只是持久化它的一种方式。检查一下。 [防止核心数据将实体合并到一个表中](https://stackoverflow.com/questions/5276369/prevent-core-data-from-combining-entities-into-one-table)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-23T19:08:05.633

正如你和我都独立地发现了艰难的道路，对相互继承的实体要非常非常小心。我也发现 Core Data 倾向于制作一个包含基本实体的所有字段以及从它派生的所有实体的巨型表，因此任何给定的实体都包含从其最远祖先向下的每个潜在实体的字段。非常非常缓慢且昂贵。

我强烈建议只让实体类本身相互继承，并在所有实体中镜像基类的属性，而不在托管对象模型本身中进行任何实际继承。

# jquery - 提交表单后查找 iframe 的内容

> ID：12565535
> 
> 赞同：0
> 
> 时间：2012-09-24T12:58:41.437
> 
> 标签：jquery, html

我有一个 Iframe，其来源是来自同一服务器的 html 页面（无法访问）。它实际上是一个表单，当用户提交详细信息时它会被提交。我收到一条成功消息。“项目创建成功”和确定按钮。我的要求是，如果结果是成功，那么我应该关闭 iframe 并加载页面。

我试图在 iframe 加载事件中获取 iframe 的内容，并发现它是这样的：

var input = $(".myframe").contents().find('项目创建成功');

这不起作用...但是获取包含所有文本框、按钮等的表单的内容（在提交状态之前）。

我想获取提交页面的内容。

有人可以帮帮我吗...

谢谢，露丝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:10:44.500

我认为您需要访问 iframe 的原始数据，然后查看它是否与您的关键字匹配

我会这样做：

```
if ($('.myiframe').html().match(/Project Created Successfully/).length) {
    alert('Positive result');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:14:57.333

尝试使用 iframe 的加载事件：

```
$("iframe").load(function(){
  var response = this.document.getElementsByTagName("body").innerHTML;
  alert(response);
}); 
```

# facebook - 使用图形 api 的 200 权限错误

> ID：12565540
> 
> 赞同：0
> 
> 时间：2012-09-24T12:59:05.567
> 
> 标签：facebook, facebook-graph-api

在我的网页中获取我的帖子后，如果用户登录，他可以添加喜欢/评论到该帖子问题如果任何用户尝试添加喜欢或评论，则会出现错误

200 权限错误

如果我使用我的用户名和密码登录，我可以点赞或添加评论！

我通过以下方式发送：

```
jQuery.post('https://graph.facebook.com/'+comm_id+'/likes/',{
                            access_token : "<?php echo $access_token ?>"

                        }); 
```

代码 ：

```
$facebook = new Facebook(array(
            'appId' => '',
            'secret' => '',
            'cookie' => true,
        ));
$user = $facebook->getUser();
if ($user) {  
    if (session_id()) {

    } else {
        session_start();
    }

    $access_token = $facebook->getAccessToken();
    //check permissions list
    $permissions_list = $facebook->api(
            '/me/permissions', 'GET', array(
        'access_token' => $access_token
            )
    );

    //check if the permissions we need have been allowed by the user
    //if not then redirect them again to facebook's permissions page
    $permissions_needed = array('publish_stream', 'read_stream', 'manage_pages');
    foreach ($permissions_needed as $perm) {
        if (!isset($permissions_list['data'][0][$perm]) || $permissions_list['data'][0][$perm] != 1) {
            $login_url_params = array(
                'scope' => 'publish_stream,read_stream,manage_pages',
                 'fbconnect' =>  1,
        'display'   =>  "page",
                'redirect_uri' => 'http://localhost/fb/index.php',
            );
            $login_url = $facebook->getLoginUrl($login_url_params);
            header("Location: {$login_url}");
            exit();
        }
    }
}else {
    //if not, let's redirect to the ALLOW page so we can get access
    //Create a login URL using the Facebook library's getLoginUrl() method
    $login_url_params = array(
        'scope' => 'publish_stream,read_stream,manage_pages',
                'fbconnect' =>  1,
        'display'   =>  "page",
        'redirect_uri'=>'http://localhost/fb/index.php',
    );
    $login_url = $facebook->getLoginUrl($login_url_params);

    //redirect to the login URL on facebook
    header("Location: {$login_url}");
    exit();
}

$logoutUrl = $facebook->getLogoutUrl(); 
```

哪个访问令牌用于用户已登录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:01:04.673

确保您拥有`publish_stream`任何您希望能够为其创建帖子的用户的权限。请记住，创建评论仍然是创建内容。

`publish_stream`在[Facebook 的权限文档](https://developers.facebook.com/docs/authentication/permissions/)中查看权限

> 使您的应用能够向用户的信息流和用户朋友的信息流发布内容、评论和点赞。这是一个超集发布权限，其中还包括 publish_actions。但是，请注意 Facebook 推荐用户发起的共享模式。请阅读平台政策以确保您了解如何正确使用此权限。请注意，您无需请求 publish_stream 权限即可使用 Feed Dialog、Requests Dialog 或 Send Dialog。

# javascript - 调整页面内容的大小以适合一个打印页面

> ID：12565541
> 
> 赞同：17
> 
> 时间：2012-09-24T12:59:08.463
> 
> 标签：javascript, css, web-applications

这个问题 IMO 与 CSS 更相关，但我愿意接受任何解决方案。我正在尝试打印一个以 px 定义高度的网页（我也尝试过 %）。现在在 Safari 和 IE 8 及更高版本中发生了什么，页面内容不会在一页上打印。

**当前设置**

```
div.parent-container{  
    height: 900px;  
}  

div.parent-container div.child-containers{  
    height:100%;  
} 
```

**发生了什么**

它将在 FF 的一页上打印所有内容，但在 IE 和 Safari 中，内容将分成两页，这对我的用户来说是个问题。我必须告诉他们设置 page-margins: 0.3 这绝对不是一种有效的方法。

**我做了什么**

我尝试了不同的@page 和特定于浏览器的黑客来使其工作，但它并没有证明是富有成效的，或者对我来说似乎效率不高（从来不是定制浏览器黑客的粉丝）。

**我想要的是**

使页面内容打印在一页上的 CSS/JS 解决方案可能类似于“缩小以适应”。

谢谢，拉希

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:19:40.340

打印设备通常以物理尺寸（英寸、厘米、英尺等）来测量它们的内容。像素宽度取决于显示器分辨率，因此不能依赖于每个输出设备。

如果您的页面以您喜欢的方式打印很重要，那么您很可能需要一个专为打印而设计的 CSS 文件——使用英寸、厘米或任何您喜欢的格式。

看看这个[以前的帖子](https://stackoverflow.com/questions/2452713/suggestions-for-debugging-print-stylesheets/5087220#5087220)——我认为它会有所帮助。

# jquery - Magento：在表单中使用'validate-ajax'？

> ID：12565545
> 
> 赞同：1
> 
> 时间：2012-09-24T12:59:14.033
> 
> 标签：jquery, validation, magento

我有一个带有验证码的自定义表单。Captcha 不是模块/插件，它只是我编写的自定义。我想使用带有 validate.js / varien form.js 的 ajax（没有页面刷新）来验证验证码，这是 magento 默认验证器。我用validation.add() 编写了jQuery.ajax 功能。我的问题是，validator() 没有等待 ajax 响应（真/假），它的状态为“未定义”并显示错误。

我在下面粘贴了我的代码：

```
Validation.add('validate-captcha', 'Please enter correct captcha', function (v) {
  var cp = isValidCaptcha();
  return cp;
});

function isValidCaptcha(){
  var captcha_value = jQuery("#security_code").val();
  var a = 0;
  jQuery.ajax({
    type: "POST",
    url: "<?php echo $this->getUrl('tqr/index/chkcaptcha'); ?>",
    asynchronous:true,
    data: { security_code1: captcha_value },
    dataType: "html",
    success: function(data){
      if( data == 1 ){
        a = 1;
      } else {
        a = 2;
      }                 
    }

  });

  if( a == 1 ){
   return true;
  } else if ( a == 2  ){
    return false;
  }

} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:41:51.220

基本上你的问题是，据我了解，你的 Validate 函数不会等待`isValidCaptcha()`.

为了创建 2 个函数`firstFunction`并`secondFunction`相互等待，您必须按以下方式调用它们：

```
firstFunction(function(){
    secondFunction();
}); 
```

此外，您还必须为第一个函数定义回调：

```
function firstFunction(callback){
    // do stuff here
    callback();
}

function secondFunction(){
     // do ajax call here
} 
```

您`firstFunction`是验证者，而您的`secondFunction`是`isValidCaptcha()`进行 AJAX 调用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T05:28:43.727

当 AJAX 响应返回并且原型验证器将运行时触发提交。

# php - 在插件系统中包含插件文件的正确方法是什么

> ID：12565546
> 
> 赞同：4
> 
> 时间：2012-09-24T12:59:17.917
> 
> 标签：php, plugins, include

我已经创建了一个插件系统，并且我已经在该系统中创建了所有内容，除了如何包含插件文件来执行它。

我试图创建一个方法，它正在包含插件文件来执行它。

**-- 首先 -- ：**
获取所有插件文件的方法，以`index`表示插件主文件的单词开头（ig index-pluginName.php），并将路径和文件名添加到数组中。

```
public function getPluginFiles($plugin_folder) {
  $dir = opendir($plugin_folder);
  while ($files = readdir($dir)) {
     if ($files == '.' || $files == '..')
        continue;

     if (is_dir($plugin_folder.'/'.$files))
        $this->getPluginFiles($plugin_folder.'/'.$files);

     if (preg_match('/^[index]+/i', $files)) {
        $this->plugins_path[$plugin_folder.'/'.$files] = $files;
     }
  }
  closedir($dir);       
} 
```

**-- 其次 -- :**
包含所有要执行的插件主文件的方法，该方法从之前创建的数组中获取插件文件的路径和名称。

```
public function includePlugFiles() {
   $this->getPluginFiles($this->plugin_folder);
   foreach ($this->plugins_path as $dir=>$file) {
     include_once (dirname($dir)."/".$file);
   }
} 
```

另请参阅插件文件中存在的代码示例：

```
function test() {
    echo " This is first plugin <br/>";
}

$plugin->addHook('top', test); // parameters(top=position, test=callback) 
```

现在，当我创建对象的一个​​实例时，它就是这种形式。

```
$plugin = new plugin;
$plugin->includePlugFiles(); 
```

但毕竟这一切，显示错误信息

`Fatal error: Call to a member function addHook() on a non-object in .... projects\plugins\index-test.php on line 7`

这是第 7 行的代码：

```
$plugin->addHook('top', test); // parameters(top=position, test=callback) 
```

我知道问题的发生是因为不会创建对象。问题是无法在每个主插件文件中创建对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:53:11.427

这可能不是最干净的解决方案，但`$plugin`您也可以这样做：

```
$this->addHook('top', test); 
```

或者，您可以在方法内显式创建引用`includePlugFiles()`：

```
public function includePlugFiles()
{
     $plugin = $this;

     $this->getPluginFiles($this->plugin_folder);
     foreach ($this->plugins_path as $dir=>$file) {
         include_once (dirname($dir)."/".$file);
     }
} 
```

# java - Java 16bit CRC 数据包验证

> ID：12565547
> 
> 赞同：1
> 
> 时间：2012-09-24T12:59:18.767
> 
> 标签：java, validation, crc, crc16

我有一个通过 GPRS 从设备接收的 Avl 数据包。

协议手册说数据包的最后 4 个字节有 16 位 CRC，并给出了 CRC 计算的源代码：

```
public static int getCrc16(Byte[] buffer) {
    return getCrc16(buffer, 0, buffer.length, 0xA001, 0);
    }

public synchronized static int getCrc16(Byte[] buffer, int offset, int bufLen, int polynom, int preset) {
    preset &= 0xFFFF;
    polynom &= 0xFFFF;
    int crc = preset;
    for (int i = 0; i < bufLen; i++) {
        int data = buffer[i + offset] & 0xFF;
        crc ^= data;
        for (int j = 0; j < 8; j++) {
            if ((crc & 0x0001) != 0) {
                crc = (crc >> 1) ^ polynom;
            } else {
                crc = crc >> 1;
            }
        }
    }
    return crc & 0xFFFF;
} 
```

所以我得到了数据包发送给我的 CRC 编号，然后我为存储数据包的字节数组调用 getCrc16，然后比较这两个数字对吗？

这是我在程序中使用的代码：

```
public static String toBinaryString(byte n) {
    StringBuilder sb = new StringBuilder("00000000");
    for (int bit = 0; bit < 8; bit++) {
        if (((n >> bit) & 1) > 0) {
            sb.setCharAt(7 - bit, '1');
        }
    }
    return sb.toString();
}

    int CalculatedCRC = getCrc16(AvlPacket);
    System.out.println("Calculated CRC= " + CalculatedCRC);

    int index = (AvlPacket.length)-4;
    String BinaryRecievedCRC = "";

    for (int j = 0; j < 4; j++) {
        BinaryRecievedCRC+= toBinaryString(AvlPacket[index]);
        index+=1;
    }

    int RecievedCRC = Integer.parseInt(BinaryRecievedCRC, 2);
    System.out.println("Recieved CRC= " + RecievedCRC); 
```

toBinaryString() 将一个字节转换为它的二进制文件并将其放入一个字符串中！

所以我通过手册中给我的 getCrc16() 来计算 CRC。然后在数据包结束前获取 4 个字节的索引，这样我就可以读取最后 4 个字节并获得与数据包一起发送的 CRC！

for 循环获取每个最后一个字节，并使用 toBinaryString() 将所有这些字节以二进制形式组合成一个字符串！所以我得到了类似 0000000000000000101011011101001 的内容（手册指出前两个字节始终为零，因为它是 16 位 CRC）

所以我只是将二进制字符串解析为有符号整数并比较两个 CRC……！

然而我得到的结果如下：

计算出的 CRC= 21395 -----收到的 CRC= 30416

或者

计算的 CRC= 56084 -----收到的 CRC= 10504

我已经测试了很多数据包，它们不可能都丢失数据。我也在解析数据，所以我知道我得到的数据是正确的！

我在这一切中缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:28:36.707

文档措辞（或您对它的理解）可能有问题。如果数据包中有 16 位 CRC，它很可能占用*两个*字节，而不是*四个*（二进制形式）。如果它是十进制，那么即使是四个字节也不够（您需要 5 个 didgt 将其存储为无符号十进制字符串）。

您的代码显示您进行了转换（但我看不出它应该进行什么样的转换）：

```
BinaryRecievedCRC+= toBinaryString(AvlPacket[index]); 
```

我希望 CRC 以二进制形式存储在数据中，所以我假设您唯一需要弄清楚的是使用了哪种字节序以及 CRC 存储在数据中的什么位置。

编辑：从您的评论来看，您需要像这样提取 CRC：

```
public int getCRC(byte[] data, int index) {
    return ((data[index] & 0xFF) << 8)) | (data[index + 1] & 0xFF);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T01:54:55.883

> 所以我得到了数据包发送给我的 CRC 编号，然后我为存储数据包的字节数组调用 getCrc16，然后比较这两个数字对吗？

错误的。您计算整个消息*的 CRC，包括 CRC 字节，*结果应该为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T10:28:00.833

问题解决了！

问题是数据包在进入数据部分之前还有 8 个其他字节！因此，在计算 CRC 之前，我必须排除前 8 个字节以及发送的 CRC 的最后 4 个字节！

现在数字一致并且上面的代码是正确的，除了getCrc16函数中的for循环从i = 8开始（以便跳过不属于数据部分的数据包的前8个字节！）

谢谢大家的时间！

# seo - Google Analytics 跟踪一个子目录，该子目录本身由 DNS 中的一个单独域指向

> ID：12565549
> 
> 赞同：2
> 
> 时间：2012-09-24T12:59:19.877
> 
> 标签：seo, google-analytics

我有一个域 www.xyz.com 指向的现有网站。我们现在正在为此 www.xyz.com/ab/ 创建一个新的子站点。我们购买了另一个区域域 www.abc.rg，我们希望将此域指向 /ab/ 子文件夹。查询是：

1.  如果我想在 DNS 级别执行此操作，是否会成为 SEO 方面的问题？
2.  如果我这样做了，我该如何添加谷歌跟踪呢？我想继续使用我对 www.xyz.com 的现有跟踪，并为 www.abc.rg 单独提供报告。

# c++ - 关于使用 boost::variant 重新加载运算符的编译错误

> ID：12565553
> 
> 赞同：1
> 
> 时间：2012-09-24T12:59:36.703
> 
> 标签：c++, boost, boost-variant

我正在尝试学习 boost.variant。但是，我从书中复制的代码不会通过编译：

```
class var_print : public boost::static_visitor<void>    
{
public:
    template<typename T>    
    void operator()(T &i) {  
        i *= 2;   
        cout<<i<<endl;  
    }
}; 
```

这是我尝试使用它的方式。

```
 typedef boost::variant<int,double,string> var_t;
    var_t v(1); //v->int 
    boost::apply_visitor(var_print(),v); 
```

编译器生成以下错误：

错误：'i *= 2' 中的 'operator*=' 不匹配

这让我感到困惑，因为模板函数将在调用它时确定参数的类型，并且 int 应该定义运算符 *=。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T13:04:20.130

您需要有一个单独`operator()`的 for`std::string&`因为没有`*=`为 定义运算符`std::string`。

此外，您的操作员必须被标记`const`，因为您将临时访问者实例传递给`apply_visitor`.

# powershell - TFS 为发布创建构建脚本

> ID：12565562
> 
> 赞同：-1
> 
> 时间：2012-09-24T12:59:59.387
> 
> 标签：powershell, tfs

我希望能够设置一个半自动构建脚本来检查从我们的 TFS 服务器到非通用文件夹的特定提交，然后导致代码被构建和打包以启用发布。

我了解如何使用命令行，并且可以很好地编写脚本，但它如何创建一个不会干扰机器上现有工作区的临时工作区以将代码签入。

我将不得不研究如何从命令行构建解决方案，但这可能没有那么难......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:29:27.810

您可以使用命令行工具`tf.exe`创建一个新的工作区，例如：

```
tf workspace /new workspace_name`;username /collection:http://myserver:8080/tfs/DefaultCollection 
```

您可以在创建新工作区时使用模板获取工作文件夹映射。见上的`/template`参数`tf workspace`。或者，您可以使用该`tf workfold /map`命令为新工作区创建工作文件夹映射。完成后，使用`tf workspace /delete`删除工作区。

# git - Git只忽略推送

> ID：12565565
> 
> 赞同：10
> 
> 时间：2012-09-24T13:00:18.930
> 
> 标签：git

git 有没有办法忽略对文件的本地更改，但继续将其跟踪到远程仓库中？我不想获取但不推送文件。

就我而言，我希望 .project eclipse 文件第一次在“主”存储库中提交，但开发团队不必推送 eclipse 插件所做的更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:04:59.173

虽然不是官方方式，但这是我们使用的工作流程：

`.example`重命名并在文件名末尾添加 add 。

将实际文件名添加到您的`.gitignore`文件中（并提交`.gitignore`文件）。

在本地，将文件复制到具有实际文件名的副本（现在被忽略）。

# linux - 我不明白高内存的概念，我想

> ID：12565567
> 
> 赞同：2
> 
> 时间：2012-09-24T13:00:24.693
> 
> 标签：linux, memory, memory-management, kernel

我收集了这么多。

“高端内存是不存在逻辑地址的内存，因为它超出了为内核虚拟地址预留的地址范围。”

在我看来，创建到高内存的映射会产生开销。高内存是机器物理内存中的一个设置区域吗？它通常在哪里开始和结束？

最重要的是 - 为什么要拥有它？为什么不在 1 GB 中使用映射/内核代码拆分正常的 3 GB/1 GB？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T13:49:01.543

可用内存可能比 CPU 当前能够处理的内存更多。对于只能根据映射表寻址内存子集的用户态进程，存在相同的限制。以 PAE 扩展为例，您最多可以拥有 64GB 的 RAM，但内核或任何进程最多只能访问 4GB 的内存。

# android - 我能否在 Google Chrome 中以与在移动网络浏览器中显示相同的方式查看流畅的布局网页？

> ID：12565570
> 
> 赞同：0
> 
> 时间：2012-09-24T13:00:31.760
> 
> 标签：android, google-chrome, mobile, webkit, mobile-safari

我的问题假设我知道设备的分辨率和 dpi 以及我的显示器分辨率和 dpi。此外，网页布局是流畅的（根据 w3c 的建议，一切都以 em 的百分比表示）。例如，假设在移动设备中我的屏幕为 480x320，dpi 为 192。我的显示器的 dpi 为 96，这是否意味着如果我将桌面设置为在移动浏览器中看到的内容相同Chrome 的尺寸为 960x640？如果不是，我应该考虑哪些因素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:14:46.427

您可以在 Chrome 开发者工具中更改 User-Agent 字符串并模拟不同的移动分辨率。

打开开发者工具`F12`，点击右下角的齿轮图标，打开**用户代理**选项卡。

硬件像素和归一化光学像素之间存在差异，但这是一个复杂的问题。我建议在[QuirksMode](http://www.quirksmode.org/blog/archives/2010/04/a_pixel_is_not.html "QuirksMode：一个像素不是一个像素不是一个像素")或[A list apart](http://www.alistapart.com/articles/a-pixel-identity-crisis/ "分开的清单：像素身份危机")上阅读更多相关信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:09:17.817

不会。如果您将 chrome 的尺寸设置为 480x320，您将看到与在手机上看到的相同的内容。无论您是在手机上还是在台式电脑上查看像素，像素都是相同的。

DPI 数字只是告诉您设备的分辨率。例如，您的计算机每英寸有 96 个像素，而您的手机有 192 个像素。因此，480*320 在您的计算机上将比在手机屏幕上占用更大的物理区域，尽管输出将（应该*）完全相同。

*如果您使用任何脚本/代码来检查用户代理并根据它是否是手机/浏览器/上网本/其他任何东西来改变输出，那么您需要考虑到这一点。您可以获得“欺骗”用户代理的 chrome 插件，让您可以像查看移动设备一样查看网站。如果你只是在字面上使用聪明的 CSS 和流畅的布局，那么你应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:13:39.483

是的，您可以，
只需点击`Ctrl++`您就会看到不同之处，缩小使用`Ctrl--`，来到原始状态新闻`Ctrl+0`。你也可以`Resize the window manually`，这也会改变流体布局。

# java - 关于在链表中添加两个节点的 add 方法的初学者 java 代码

> ID：12565586
> 
> 赞同：1
> 
> 时间：2012-09-24T13:01:32.137
> 
> 标签：java, linked-list, nodes

我目前在尝试理解链表时遇到了麻烦。我有一些使用节点的代码，并被要求使用迭代方法在整数参数中指定的索引位置创建一个新节点，其中存储了字符串参数。索引位置的旧节点应该跟在新插入的节点之后。

这些是字段：

```
 // a string that contains the full name on the filesystem of an image file.
private String imageName;

// a reference to the next ImageNode in the linked list.
private ImageNode next;

//temporary node created to start the set of nodes
private ImageNode temp = this; 
```

这是我到目前为止编写的代码：注意 getNext() 返回下一个节点。

```
private void addIter(String imageFileStr, int pos) {

    int count = 0;
    while(temp.getNext() != null){
        temp = temp.getNext();
        count++;

        if(count == pos){
          temp.getNext() = ???
        }

    }
} 
```

这是添加两个节点的正确方法吗？如果是这样，则当前仅当需要将节点添加到当前节点集的末尾时才有效。我将如何修改代码，以便它允许我在集合中间添加一个节点并让旧节点按照上面的说明跟随它（“索引位置的旧节点现在应该跟随新插入的节点。”）？

最后，我如何创建一个等于 addIter 输入的变量 (x)，以便我可以设置 temp.getNext() = x？（目前在代码中用问号表示）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:10:50.273

假设您有节点 A、B、C 并希望在 pos 3 处插入一个新节点 (D)。您需要遍历列表直到节点 2，即 B。然后将链接保存到 B 之后的节点进入一个临时变量，比如 TempC: `Node TempC = B.getNext()`。之后，您将 TempC 设置为要插入的节点之后的下一个节点：`D.setNext(TempC)`。然后在:之后设置`D`为下一个节点。结果集将是：`B``B.setNext(D)``A, B, D, C`

PS这里我假设第一个节点是1，而不是0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:12:59.110

如果没有看到更多的实现，就不可能完全回答这个问题，但这里有几件事：

1.  `temp.getNext() = ???`没有意义，您不能分配给函数调用。您将需要添加一个`setNext(ImageNode node)`将下一个节点设置为给定值的方法。

2.  在您的`add`方法中，您需要使用输入字符串创建一个新节点（让我们调用它`newNode`，找到当前所在的节点`pos`（让我们调用它`existingNode`），然后您需要做几件事：

    *   设置`newNode.next`为当前之后的节点`existingNode`（或者`null`如果它是列表的末尾）
    *   设置`existingNode.next`为`newNode`。

这可能最终看起来像这样：

```
public void add(String item, int pos) {
    if (pos > length) {
         // Probably just throw an out of bounds exception
    }

    Node existingNode = head;
    for (int i = 0; i < pos; i++)
         existingNode = existingNode.getNext();

    Node newNode = new Node(item);
    newNode.setNext(existingNode.getNext());
    existingNode.setNext(newNode);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-24T13:08:41.390

您肯定需要创建一个新对象并将数据保存到其中。新对象必须指向您要添加它的下一个节点，然后 temp 必须指向该对象。

# java - Java 是否具有类似于 C++ STL 中的多集数据结构？

> ID：12565587
> 
> 赞同：34
> 
> 时间：2012-09-24T13:01:34.067
> 
> 标签：java, data-structures

我需要一个像 STL 多重集一样工作的数据结构，但 Java 中的 TreeSet 不允许重复元素。Java中是否有任何内置的数据结构相当于multiset？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-12-01T13:43:33.690

使用`Map<E, Integer>`where Integer is count 是 Multiset 的一个很好的替代品，它也不需要任何第三方库。

**更新：**如果您真的想将对象存储两次，请使用带有 Map 之类的 List `Map<E, List<E>>`。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-24T13:09:15.620

标准 Java 库中没有 Multiset。您应该使用包含 Multiset 类的 Google Guava 框架。 [看](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multiset)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-02T22:47:36.863

[算法第 4 版](http://algs4.cs.princeton.edu/code/)有一个[`Bag`](http://algs4.cs.princeton.edu/13stacks/Bag.java.html)实现，可在本书的网站上找到。您也可以在线查看[javadoc](http://algs4.cs.princeton.edu/code/javadoc/Bag.html)。

> Bag 类表示通用项目的包（或多组）。它支持以任意顺序插入和迭代项目。

如果您只需要查看源代码，您可能只想看看源代码`Bag`，但是其中还有很多其他有趣的东西`algs4.jar`，所以值得一看。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T13:12:58.050

[Apache Commons Collections](http://commons.apache.org/collections/)具有[`Bag`](http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/Bag.html)和[`SortedBag`](http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/SortedBag.html)接口。听起来[`TreeBag`](http://commons.apache.org/proper/commons-collections/javadocs/api-release/org/apache/commons/collections4/bag/TreeBag.html)可能满足您的需求，但有很多实现可供选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-13T02:44:53.223

您可以使用 PriorityQueue 元素按其自然顺序排序，或者如果您提供一个，则按比较器排序，并且允许重复。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-18T18:49:49.593

从 1.8 开始，Map 允许你这样做：

```
 map.computeIfAbsent(key, k -> new HashSet<V>()).add(v); 
```

每个值都被添加到一个集合中，该集合是按需创建的。

您可能还需要更改 remove() 。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-01-17T18:15:23.713

```
TreeSet<Integer> set = new TreeSet<>();
TreeSet<Integer> multiset = new TreeSet<>((i, j) -> i < j ? 1 : -1); 
```

只需制作 1 != 1!

# php - 将变量从 PHP 传递到 javascript 的最佳方法

> ID：12565595
> 
> 赞同：1
> 
> 时间：2012-09-24T13:01:57.823
> 
> 标签：php, javascript

> **可能重复：**
> [将 PHP 变量传递给 Javascript 的最佳方法是什么？](https://stackoverflow.com/questions/2766041/whats-the-best-way-to-pass-a-php-variable-to-javascript)

我必须做一个简单而安全的自动处理从 PHP 到 JavaScript 的变量传递的函数。目前将变量的值存储在一个类变量数组中，然后这个想法是在 Javascript 中提取，但是很多人质疑我（技术上）最好的方法是什么。

我也遇到了几个问题，特别是当复杂移动到带有重音符号、特殊符号或符号作为引号或单引号的 Javascript 数组或字符串时，包括函数 json_decode 在使用带有换行符和回车的链时出现的问题。（您得到无效的 JSON，我不得不在 PHP 中执行清理功能以避免使用这些字符传递变量，但有时我需要这样做）

我在网上搜索了很多，我找到了很多答案，但没有一个可以说服以上问题。

一个例子：

PHP方法（太简单了）：

```
 var JsVars;
   public function saveJsVar($key, $value) {
      $this->JsVars[$key] = $value; //Possible need to clean certain characters like /n /r
   } 
```

“javascript部分”

```
<script>
   var SistemVars = SistemVars || {};
   <?php foreach ($JSVARS as $k => $var) { ?>
   SistemVars.<?=$k?> = '' || '<?php echo $var ?>'; // Dont work with arrays only plain
   <?php } ?>
</script> 
```

另外一个选项：

```
<script>
   var SistemVars = SistemVars || {};
   SistemVars = <?=json_encode($JSVARS)?> // Object, with plain and array BUT problems with certain characters.
</script> 
```

它的想法是使用 PHP (saveJsVar) 来保存普通变量和数组，并在 JavaScript 中设置 SistemVars 对象中的 var 以像 alert(SistemVars.ParamOne) 一样使用它；

根据您的经验，您认为最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:04:36.027

第二个选项是更好的方法，因为它使用`foreach`循环保存。此外，json_encode 是为此目的而制作的，所以为什么不使用它:) 仅供参考，`<?= ...?>`不再使用 PHP 的[短标签 PHP 短标签可以使用吗？](https://stackoverflow.com/questions/200640/are-php-short-tags-acceptable-to-use)

```
 <script>
  var SistemVars = SistemVars || {};
  SistemVars = <?=json_encode($JSVARS)?> // Object, with plain and array BUT problems with certain characters.
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:08:15.487

我喜欢使用隐藏的输入元素并通过 jQuery 使用/访问它们的值。这样做可以让你的 js 保持干净——里面没有 PHP 代码。如果您想将所有 JS 代码导出到外部文件中 - 这就是方式。

# objective-c - 由于 NSMaxRange(indexRange) <= [self.dataSource numberOfRecordsForPlot:self] 而无法绘制

> ID：12565597
> 
> 赞同：3
> 
> 时间：2012-09-24T13:01:59.743
> 
> 标签：objective-c, ios, ipad, core-plot

我在使用 core-plot 库时遇到问题，如果我尝试添加一个点，我会收到错误消息。我不知道如何解决这个问题。

以下是未完成的块：

```
-(void)addNewData:(NSArray*)data{} 
```

谁能帮我解决这个问题，谢谢。

我的错误：

```
I get the following error:
2012-09-24 14:51:09.790 sense_01[6719:907] ACC Connect
2012-09-24 14:51:15.270 sense_01[6719:907] *** Assertion failure in -[CPTScatterPlot reloadDataInIndexRange:], /Users/eskroch/Projects/Core Plot/framework/Source/CPTPlot.m:442
2012-09-24 14:51:15.272 sense_01[6719:907] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid parameter not satisfying: NSMaxRange(indexRange) <= [self.dataSource numberOfRecordsForPlot:self]'
*** First throw call stack:
(0x394702a3 0x31d8f97f 0x3947015d 0x383da2af 0xaba75 0xaeccb 0xabcbb 0xaefeb 0xa7235 0xa360f 0x363df0ad 0x363df05f 0x363df03d 0x363de8f3 0x363dede9 0x363075f9 0x362f4809 0x362f4123 0x352f15a3 0x352f11d3 0x39445173 0x39445117 0x39443f99 0x393b6ebd 0x393b6d49 0x352f02eb 0x36348301 0xa2795 0xa2730)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

我的代码：

```
//
//  SingleSensorViewController.m
//  sense_01
//
//  Created by Morten Ydefeldt on 9/21/12.
//  Copyright (c) 2012 ydefeldt. All rights reserved.
//

#import "SingleSensorViewController.h"

@interface SingleSensorViewController ()

@end

@implementation SingleSensorViewController

@synthesize plot,graphView,label,SingleGraphView,portNumberForGraph,plotValues,plotLine;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

        SingleGraphView = self.view;
        CATransition *transition = [CATransition animation];
        transition.duration = .5;
        transition.type = kCATransitionMoveIn; //choose your animation
        transition.subtype = kCATransitionFromTop;
        [SingleGraphView.layer addAnimation:transition forKey:nil];
        plotLine = [plot plotWithIdentifier:@"1"];

    }
    return self;
}

-(void)addNewData:(NSArray*)data{

    plotValues = [NSMutableArray arrayWithArray:data];
    int i = [plotValues count];
    [plotLine insertDataAtIndex:[plotValues count]-1 numberOfRecords:1];
    NSLog(@"DONE");
}

-(void)pointReceived:(NSNumber *) point{

    NSLog(@"some number");

}

-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot{

    return [plotValues count];
}

-(NSNumber *)numberForPlot:(CPTPlot*)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index{

    if (fieldEnum == CPTScatterPlotFieldX){
        return [NSNumber numberWithInt:[plotValues count]];

    }else{
        //return [plotValues objectAtIndex:plotValues.count-1];
        return [NSNumber numberWithInt:[plotValues count]];

    }

}

-(id)getView{
    return SingleGraphView;
}

//-(CGPoint)plotSpace:(CPTPlotSpace *)space willDisplaceBy:(CGPoint)proposedDisplacementVector
//{
//    NSLog(@"PLOT SPACE");
//
//return CGPointMake(proposedDisplacementVector.x, proposedDisplacementVector.y);
//
//}
//
//-(CPTPlotRange *)plotSpace:(CPTPlotSpace *)space willChangePlotRangeTo:(CPTPlotRange *)newRange forCoordinate:(CPTCoordinate)coordinate
//{
//    
//    
//    
//    //    if (coordinate == CPTCoordinateY) {
//    //        newRange = ((CPTXYPlotSpace*)space).yRange;
//    //    }
//    NSLog(@"NEW RANGE");
//    return newRange;
//    
//    
//}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    plot = [[CPTXYGraph alloc] initWithFrame:CGRectMake(100, 10, 800, 180)];
    //CPTGraphHostingView *layerHostingView = [[CPTGraphHostingView alloc] initWithFrame:CGRectMake(100, 10, 800, 180)];
    graphView.collapsesLayers = NO;
    graphView.hostedGraph = plot;

    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace* )plot.defaultPlotSpace;
    plotSpace.allowsUserInteraction = YES;
    plotSpace.delegate = self;
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation: CPTDecimalFromDouble(0.0) length: CPTDecimalFromDouble(20.0)];
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation: CPTDecimalFromDouble(0.0) length: CPTDecimalFromDouble(50.0)];

    CPTScatterPlot *line = [[CPTScatterPlot alloc]init];
    CPTMutableLineStyle *lineStyle = [CPTMutableLineStyle lineStyle];

    //Fill colors
    float c= 0.2;
    plot.fill = [CPTFill fillWithColor:[CPTColor colorWithComponentRed:c green:c blue:c alpha:0]];
    plot.plotAreaFrame.fill = [CPTFill fillWithColor:[CPTColor colorWithComponentRed:c green:c blue:c alpha:0.3]];
    plot.plotAreaFrame.borderLineStyle = nil;

    //Plot border
    lineStyle.lineColor = [CPTColor grayColor];
    lineStyle.lineWidth = 1.2;
    //plot.borderLineStyle = lineStyle;

    //Plot padding
    plot.paddingBottom = 5;
    plot.paddingLeft = 5;
    plot.paddingRight = 5;
    plot.paddingTop = 5;

    //axis range
    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)plot.axisSet;
    CPTXYAxis *y = axisSet.yAxis;
    CPTXYAxis *x = axisSet.xAxis;
    x.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0.0");
    y.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0.0");

    y.labelingPolicy = CPTAxisLabelingPolicyAutomatic;
    x.labelingPolicy = CPTAxisLabelingPolicyAutomatic;

    x.axisConstraints = [CPTConstraints constraintWithLowerOffset:15.0];
    y.axisConstraints = [CPTConstraints constraintWithLowerOffset:35.0];

    y.minorTickLength = 0;
    y.majorTickLength = 0;
    x.minorTickLength = 0;
    x.majorTickLength = 0;

    //axis theming
    c = 0.4;
    lineStyle.lineColor = [CPTColor colorWithComponentRed:c green:c blue:c alpha:1];
    lineStyle.lineWidth = 0.7f;
    y.axisLineStyle = lineStyle;
    x.axisLineStyle = lineStyle;

    //label theming
    CPTMutableTextStyle *textStyle = [CPTMutableTextStyle textStyle];
    textStyle.color = [CPTColor whiteColor];
    textStyle.fontName = @"Helvetica-Bold";
    x.labelTextStyle = textStyle;
    y.labelTextStyle = textStyle;

    //grid theming
    c = 0.3;
    lineStyle.lineColor = [CPTColor colorWithComponentRed:c green:c blue:c alpha:1];
    lineStyle.lineWidth = 0.1f;
    x.minorGridLineStyle = lineStyle;
    y.minorGridLineStyle = lineStyle;

    //curve theming
    lineStyle.miterLimit = 1.0f;
    lineStyle.lineWidth = 1.5f;
    lineStyle.lineColor = [CPTColor whiteColor];
    line.dataLineStyle = lineStyle;
    line.identifier = @"1";
    line.dataSource = self;

    //plotsymbol
    CPTPlotSymbol *plotSymbol = [CPTPlotSymbol ellipsePlotSymbol];
    CPTGradient *blueGradient = [CPTGradient gradientWithBeginningColor:[CPTColor colorWithComponentRed:62.0f/255.0f green:112.0/255.0f blue:184.0f/255.0f alpha:1] endingColor:[CPTColor colorWithComponentRed:43.0f/255.0f green:63.0/255.0f blue:153.0f/255.0f alpha:1]];
    lineStyle.lineColor = [CPTColor whiteColor];
    lineStyle.lineWidth = 1.0f;
    plotSymbol.lineStyle = lineStyle;
    plotSymbol.fill = [CPTFill fillWithGradient:blueGradient];
    plotSymbol.size = CGSizeMake(11.0, 11.0);
    line.plotSymbol = plotSymbol;

    line.delegate = self;
    line.plotSymbolMarginForHitDetection = 5.0f;

    [plot addPlot:line];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewDidUnload {
    [self setGraphView:nil];
    [self setLabel:nil];
    [self setIconimage:nil];
    [super viewDidUnload];

}

- (IBAction)addPoint:(id)sender {
    NSLog(@"ADD POINT");
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T00:57:25.897

1.  由于您要替换整个数据数组，因此请使用该`-reloadData`方法而不是`- insertDataAtIndex:numberOfRecords:`. 当您需要将数据点添加到现有数据集时，您可以插入数据。

2.  您需要保留`plotValues`数组。否则，当 Core Plot 尝试读取它时，数​​组可能会被释放，你会得到垃圾数据或崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T01:42:45.083

我发现导致这个问题的问题是，当我尝试在图表上添加一个点时，视图不是必需的，所以如果我包括

```
[self addNewData:[NSArray arrayWithObject:@"23"]]; 
```

在 viewdidload 的末尾添加了点，一切正常！

# vb.net - 创建设备时出错 (D3DERR_NOTAVAILABLE)

> ID：12565599
> 
> 赞同：0
> 
> 时间：2012-09-24T13:02:08.850
> 
> 标签：vb.net, graphics, directx, direct3d, slimdx

我正在尝试将 SlimDX 设备创建教程从 DX11 转换为 DX9。这是一个非常简单的教程，您可以在其中创建一个窗口，添加一个 dx9 设备并用纯色填充屏幕。但是，`D3DERR_NOTAVAILABLE`当我尝试创建设备时出现错误。所有代码似乎都有意义，并且看起来与示例中使用的 C# 代码非常相似。有任何想法吗？注意：我创建了一个类的实例并在另一个类中`BaseDisplay`调用该方法。`InitSlimDX`

```
Imports SlimDX.Windows
Imports SlimDX.Direct3D9
Imports SlimDX
Imports Device = SlimDX.Direct3D9.Device
Imports Resource = SlimDX.Direct3D9.Resource
Imports System.Windows.Forms.ThreadExceptionDialog
Imports System.IO

Public Class BaseDisplay
    Inherits RenderForm

'SlimDX Class Vars
Protected device As Device = Nothing
Protected backBuffer As Surface
Protected presentParams As PresentParameters

Public Sub New()
    Show()
End Sub

Public Sub InitSlimDX()
    Dim d3d As Direct3D = New Direct3D()
    Dim primaryAdaptor As AdapterInformation = d3d.Adapters().First()

    presentParams = New PresentParameters()
    With presentParams
        .BackBufferWidth = Me.ClientSize.Width
        .BackBufferHeight = Me.ClientSize.Height
    End With

    Me.device = New Device(d3d, primaryAdaptor.Adapter, DeviceType.Hardware, Me.Handle, CreateFlags.HardwareVertexProcessing, presentParams)
    Me.device.BeginScene()
    backBuffer = device.GetBackBuffer(0, 0)
    Me.device.ColorFill(backBuffer, New Color4(Color.CornflowerBlue))
    Me.device.EndScene()
    Me.device.Present()
End Sub

Public Overloads Sub Dispose()
    device.Dispose()
    MyBase.Dispose()
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:32:26.860

我弄清楚我的问题是什么。早些时候，我在 DirectX 控制面板中弄乱了我的 DX9 设置，出于某种原因，我启用了禁用硬件加速的“仅软件”设置。禁用此选项可解决此问题。

# string - 通过列表操作/清除变量：Mathematica

> ID：12565600
> 
> 赞同：1
> 
> 时间：2012-09-24T13:02:32.973
> 
> 标签：string, list, variables, scope, wolfram-mathematica

我的问题（在**Mathematica**中）是指在特定数组中给出的变量并以下列方式操作它们（例如）：

**输入**：vars={x,y,z}, system=some ODE like x^2+3*x*y+...etc（注意我实际上并没有创建变量 xy 和 z）

**目标**：

为列表“var”中的变量赋值，目的是将这些值输入到 ODE 系统中。然后，一旦我完成，清除数组 vars 中变量的值，使其处于其原始形式 {x,y,z} （而不是像 {x,1,3} where y=1 and z =3)。我想通过引用 vars 的位置元素来做到这一点（我的目标是不知道 x、y 和 z 是实际变量）。

原因：我正在尝试编写一个程序，该程序可以具有用户定义的任意数量的变量和 ODE。由于变量的数量和用于它们的实际字母是未知的，因此有必要对数组本身进行操作。

**试图：**

固定数量的变量很容易。对于任意情况，我尝试了模块和块，但没有成功。考虑以下代码：

`Clear[x,y,z,vars,svars]`

`vars={x,y,z}`

`svars=Map[ToString,vars]`

`Module[{vars=vars,svars=svars},`

`Symbol[svars[[1]]]//Evaluate=1`

`]`

然后 vars={1,y,z} 而不是 {x,y,z} 运行后。我已经用列表、原子等进行了函数式编程。因此对我来说 vars 之后发生更改是有意义的，因为我更改了 x 而不是 vars。但是，我无法在变量列表中获得“x”以保持本地化。当然，我可以输入“x”本身，但这是特定于这个特定情况的。我更喜欢这样写：

`Clear[x,y,z,vars,svars]`

`vars={x,y,z}`

`svars=Map[ToString,vars]`

`Module[{vars=vars,svars=svars, vars[[1]]},`

`Symbol[svars[[1]]]//Evaluate=1`

`]`

这当然不起作用，因为 vars[[1]] 不是符号或对符号的赋值。

**其他可能性：** 我找到了一个函数

`assignToName[name_String, value_] :=` `ToExpression[name, InputForm, Function[var, var = value, HoldAll]]`

这看起来很有希望。基本上 name_String 是变量的名称，而 value 是它的新值。我试图这样做：

`vars={x,y,z}` `svars=Map[ToString,vars]` `vars[[1]]=//Evaluate=1` `assignToName[svars[[1]],svars[[1]]]`

但随后类似的东西`D[x^2, vars[[1]]]` 不起作用（x 不是有效变量）。

如果我错过了什么，或者如果我走错了路，我愿意尝试其他事情。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:11:58.023

我不能说我很好地遵循了您的思路，因此这些片段可能会帮助您回答自己的问题，而不是连贯且完整的答案。但是要回答您的最后一个“问题”，我认为您可能会走错路。

顺便说一句，请注意评估表达式

```
vars = {x,y,z} 
```

实际上确实定义了这三个变量，尽管它没有为它们定义任何重写规则（例如值）。

给定一个多项式`poly`，您可以使用函数提取其中的变量，`Variables[poly]`例如

```
Variables[x^2+3*x*y] 
```

应该返回

```
{x,y} 
```

请注意，我写的是“应该”而不是“确实”，因为我在这台机器上没有 Mathematica，所以我的语法可能有点不靠谱。另请注意，您的示例 ODE 与此无关，但令我震惊的是，您可能可以编写一个包装器来将 ODE 操作为`Variables`可以从中提取变量的形式。Mathematica 提供了许多其他函数，用于分离表达式并重新组装它们，遵循`Variables`. 它通常也允许使用在表达式上定义的函数`Lists`与其他头部，所以它总是值得尝试一下。

有几种广泛适用的方法可以避免在 Mathematica 中设置变量值。例如，你可以写

```
x^2+3*x*y/.{x->2,y->3} 
```

这将评估为

```
22 
```

`x`但不为和设置值`y`。这是一个非常简单的示例，使用（组）替换规则将值临时分配给变量

避免为变量设置值的另一种方法是使用`Modules`或`Blocks`两者都定义自己的上下文来定义函数。该文档将告诉您有关这两者的所有信息以及它们之间的区别。

我不禁想到你所有的聪明技巧都在使用`Symbol`,`ToExpression`并且`ToString`有点离题。花一些时间熟悉 Mathematica 的内置功能，然后再进一步走这条路线，您可能会发现您不需要这样做。

最后，用任何语言写出诸如

```
vars=vars,svars=svars 
```

会导致疯狂。它可能在语法上是正确的，你甚至可以在你第一次编写这样的代码时解密语义，但在一周的时间里，你会因为写它而诅咒年轻的自己。

# cordova - phonegap 中的插件是什么以及如何使用它？

> ID：12565602
> 
> 赞同：0
> 
> 时间：2012-09-24T13:02:36.630
> 
> 标签：cordova, phonegap-plugins

我是 Phonegap 的新手，我对 phonegap 插件以及如何在 android 中使用它的插件感到困惑？

任何人都知道这...提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:23:55.920

> PhoneGap/Cordova 插件在支持PhoneGap/Cordova 应用程序的WebView 和运行PhoneGap/Cordova 应用程序的本机平台之间架起了一些功能。插件由跨所有平台使用的单个 JavaScript 接口和遵循 JavaScript 将调用的特定于平台的插件接口的本机实现组成。应该注意的是，所有核心 PhoneGap/Cordova API 都是使用这种精确的架构实现的。

有关更多信息，请查看[插件开发指南](http://docs.phonegap.com/en/2.0.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)和我们[的插件库](https://github.com/phonegap/phonegap-plugins)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:25:02.823

插件是一个软件，它可以做一些开箱即用的 phonegap 实现不能做的事情。

*   用 javascript（利用 phonegap 的 exec 函数）**和**本机代码编写，因此插件始终是平台特定的
*   通常插件有自己的文档说明如何使用它们。在android中，您通常将一个或多个`.java`文件添加到您的`src`文件夹中，`.jar`档案，您将其添加到您的`libs`文件夹中（并将其添加到构建路径-在eclipse中或终端中通过`abd-update-project`）和一个`.js`文件到您的`/assets/www`文件夹。这个 javascript 文件还包含插件的 api。
*   有时插件由整个 java 库组成或需要自己的活动，因此有时要使用插件，您必须在`manifest.xml`.

可以在[github上找到 android 插件列表](https://github.com/phonegap/phonegap-plugins/tree/master/Android)

# c++ - 测试文件夹可读性/可写性的正确方法

> ID：12565603
> 
> 赞同：6
> 
> 时间：2012-09-24T13:02:38.883
> 
> 标签：c++, linux, unit-testing

我编写了一个函数来测试文件夹的可读性/可写性。

对于单元测试，我需要生成不同的案例：

*   包含可读写文件的文件夹
*   具有可读文件的文件夹（不可写）
*   一个不可写且不可读的文件夹。

到目前为止，这是我来到的函数的代码：

```
void FileUtils::checkPath(std::string path, bool &readable, bool &writable)
{
   namespace bf = boost::filesystem;
   std::string filePath = path + "/test.txt";

   // remove a possibly existing test file
   remove(filePath.c_str());

   // check that the path exists
   if(!bf::is_directory(path))
   {
      readable = writable = false;
      return;
   }

   // try to write in the location
   std::ofstream outfile (filePath.c_str());
   outfile << "I can write!" << std::endl;
   outfile.close();

   if(!outfile.fail() && !outfile.bad())
   {
      writable = true;
   }

   // look for a file to read
   std::ifstream::pos_type size;
   char * memblock;
   for (bf::recursive_directory_iterator it(path); it != bf::recursive_directory_iterator(); ++it)
   {
      if (!is_directory(*it))
      {
         std::string sFilePath = it->path().string();
         std::ifstream file(sFilePath.c_str(), std::ios::in|std::ios::binary|std::ios::ate);
         if (file.is_open())
         {
           size = file.tellg();
           if(size > 0)
           {
              memblock = new char [1];
              file.seekg (0, std::ios::beg);
              file.read (memblock, 1);
              file.close();
              delete[] memblock;
              if(!file.fail() && !file.bad())
              {
                 readable = true;
              }
              break;
           }
         }
         else
         {
            // there is a non readable file in the folder
            // readable = false;
            break;
         }
      }
   }

   // delete the test file
   remove(filePath.c_str());
} 
```

现在进行测试（通过 Google 测试完成）：

```
TEST_F(FileUtilsTest, shouldCheckPath)
{
   // given an existing folder
   namespace fs = boost::filesystem;
   fs::create_directory("/tmp/to_be_deleted");

   bool readable = false, writable = false;

   FileUtils::checkPath("/tmp/to_be_deleted",readable, writable);

   fs::boost::filesystem::remove_all("/tmp/to_be_deleted");

   EXPECT_TRUE(readable && writable);
} 
```

当我走得更远时，我会为其他情况添加更多内容。

现在游戏开放以提出更好的解决方案:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T13:59:00.023

检查权限的万无一失的方法是逐字检查文件模式。在目录权限的情况下，“可读”和“可写”的含义可能令人惊讶：

*   读取 - 允许您列出目录的内容
*   写入 - 允许您从目录中创建、重命名、删除文件，本质上是修改内容列表（也需要执行）
*   执行 - 允许您访问（读取和写入）和更改目录中文件的属性

所以如果你有一个只设置了执行位的目录，你仍然可以读写里面的文件。通过关闭执行位，您可以禁用对文件的访问。就包含的文件而言，您可以从目录权限中找出最多的是：

*   `--x`或`r-x`：可以读取和写入现有文件
*   `-wx`或`rwx`：可以读取和写入现有文件，可以创建、重命名和删除文件
*   否则：您根本无法访问这些文件

要确定文件是否可读但不可写（反之亦然），您需要检查文件本身的权限。该目录只能告诉您文件是否可以正常访问。

您可以使用[stat()](http://linux.die.net/man/2/stat) ~~或[access()](http://linux.die.net/man/2/access)~~（请参阅 BЈовић 的评论）来找出文件或目录的权限。由于您已经在使用 boost，您还可以使用[boost::filesystem::status()](http://www.boost.org/doc/libs/1_51_0/libs/filesystem/doc/reference.html#status)，它只是包装了 stat()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-15T03:28:55.860

为了可移植和正确，测试文件/目录的可读性/可写性的唯一方法是对其进行读/写。权限模型可能非常复杂且不可移植（例如 ACL），因此您不能简单地检查父目录的权限。此外，检查，然后尝试写入是一种竞争条件，因为权限可能会在检查和写入之间发生变化。

相反，如果您想要的是写入成功的*可能性很高*，例如，如果您让用户为您的应用程序选择一个临时文件夹，则只需尝试写入一个文件，然后将其删除。这让您知道*在用户选择*时目录是可写的。

为了保持稳健，始终假设文件系统操作将失败并进行设计，以便当它们失败时，会发生一些合乎逻辑的事情而不是崩溃。特别是，设计一个系统，以便用户可以找出权限错误的位置——因为权限设置错误的方式有很多种，有用的错误消息会大有帮助。

# asp.net-mvc-3 - 没有外键的一对或零对多关系

> ID：12565606
> 
> 赞同：0
> 
> 时间：2012-09-24T13:02:45.720
> 
> 标签：asp.net-mvc-3, entity-framework, c#-4.0, ef-code-first

我需要配置与以下类的关系：用户有或没有个人资料。结构：用户：用户 ID、用户名、密码配置文件：用户 ID、全名、地址、电话

```
public class User
{
    #region Feilds
    public int UserID { get; set; }
    public string Email { get; set; }
    public string Password { get; set; }
    #endregion

    public virtual Profile Profile { get; set; }
}

public class Profile
{
    #region Fields
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Phone { get; set; }
    public string Address { get; set; }
    #endregion

    public virtual User User { get; set; }
} 
```

**配置：**

```
public class UserConfiguration : EntityTypeConfiguration<User>
{
    public UserConfiguration()
        : base()
    {
        // Primary Key
        this.HasKey(p => p.UserID);

        //Foreign Key
        this.HasOptional(p => p.Profile).
            WithMany().
            HasForeignKey(p => p.UserID);
    }
} 
```

**错误：**

System.Data.Edm.EdmEntityType: : EntityType 'Profile' 没有定义键。定义此 EntityType 的键。System.Data.Edm.EdmEntitySet: EntityType: EntitySet “Profiles” 基于没有定义键的“Profile”类型。

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:10:32.050

实体框架中的每个实体都必须定义主键。您的个人资料实体看起来应该摆脱当前的错误：

```
public class Profile
{
    #region Fields
    public int Id {get;set;}
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Phone { get; set; }
    public string Address { get; set; }
    #endregion

    public virtual User User { get; set; }
} 
```

# python - 代码通过html模板直接返回python

> ID：12565612
> 
> 赞同：0
> 
> 时间：2012-09-24T13:02:59.850
> 
> 标签：python, html

[这个问题从这个链接的问题开始](https://stackoverflow.com/questions/12557733/if-conditionals-produce-html-302)

我认为问题出在模板中`unexpected.html`（下文详述）。python 代码工作正常，但是当用户提供 a`number`然后单击提交按钮时，python 代码接受该值，并且无论采用哪个`if`子句分支，浏览器中的结果视图**都是**`unexpected.html`python代码的底部。

为什么浏览器不只停留在`unexpected.html`模板上？

下面首先是python代码。

```
class MainPage(BaseHandler):

    def get(self):
    self.render_template('index.html', { })

    def post(self):
    number = self.request.get('number')
    hiddennumber = self.request.get('hiddennumber')
    for i in ["a"]:
        if int(number) < int(hiddennumber):
        reason='< was in that time slot already: '
        trans = Trans(key_name='reason')
        trans.reason=reason
        trans.name=number
        trans.put()
        template_values = {'trans':trans}
        path = os.path.join(TEMPLATE_DIR, 'unexpected.html')
        self.response.out.write(template.render(path, template_values))
        elif int(number) > int(hiddennumber):
        reason='> was in that time slot already: '
        trans = Trans(key_name='reason')
        trans.reason=reason
        trans.name=number
        trans.put()
        template_values = {'trans':trans}
        path = os.path.join(TEMPLATE_DIR, 'unexpected.html')
        self.response.out.write(template.render(path, template_values))
        else:
        pass
    self.response.out.write('''
        <html>
          <body>
            <form method="post">
              <p>Name: <input type="text" name="name" /></p>
              <p>Favorite foods:</p>
              <select name="favorite_foods" multiple size="4">
                <option value="apples">Apples</option>
                <option value="bananas">Bananas</option>
                <option value="carrots">Carrots</option>
                <option value="durians">Durians</option>
              </select>
              <p>Birth year: <input type="text" name="birth_year" /></p>
              <p><input type="submit" /></p>
            </form>
          </body>
        </html>
        ''')

class Unexpected(BaseHandler):

    def get(self):
        trans=Trans.get_by_key_name('reason')
        template_values = {'trans':trans}
        path = os.path.join(TEMPLATE_DIR, 'unexpected.html')
        self.response.out.write(template.render(path, template_values))

    def post(self):
        day=self.request.get('day')
        return webapp2.redirect("/")

app = webapp2.WSGIApplication([
        ('/', MainPage), 
        ('/unexpected', Unexpected)
        ],
        debug=True) 
```

接下来是模板`unexpected.html`。

```
{% extends "base.html" %}
{% block content %}

<form action="" method="post" >
<input type="hidden" name="day" value="{{ day }}"/>
This unexpected result occurred: <emph style="font-weight: bold">{{ trans.reason }}</emph>
<br /><br />
<div id="inputdata">
<label>Click the "Ok" button to go back to the previous page so you can edit your entry.
</label>
<input type="submit" value="submit" />
</div>
</form>
<button onclick="window.history.back()">Ok</button>

{% endblock content %} 
```

`index.html`最后，为了更完整，我将其包括在内。

```
{% extends "base.html" %}
{% block content %}
<center>
   </h1>
  </center>
<form action="" method="post">
<input type="hidden" name="hiddennumber"  value="10">
<label>Location/Venue name (no spaces and case counts)</label>
<input type="textbox" name="number" size="30" value=""></input><br/>
  <input type="submit" value=submit />
</form>

{% endblock content %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:19:45.163

您无法摆脱我所看到的执行流程，并且嵌入的 HTML 将在测试之后进行，因此没有理由不执行。最快的解决方案`return`就是完成后：

```
self.response.out.write(template.render(path, template_values))
return
... 
```

通常，您在该结构中也有很多重复的逻辑：应该合并，然后可以通过使该结构更像是一个调度程序，在单独的函数中具有适当的显示逻辑，从而进一步重构代码以使其更具可读性。

# asp-classic - 使用 asp (vbscript) 为裁剪脚本查找图像大小。

> ID：12565613
> 
> 赞同：0
> 
> 时间：2012-09-24T13:03:01.470
> 
> 标签：asp-classic, vbscript

我写了一个基本的裁剪脚本。在 VB 脚本中。如下：

```
<%Set Jpeg = Server.CreateObject("Persits.Jpeg")
getsec = DateDiff("s","01/01/04",now())
filename = "screenshots/"&getsec&".png"
imgfile = request("imgfile")
Jpeg.Open Server.MapPath(imgfile)
Jpeg.Crop 0, 38, 320, 460
Jpeg.Canvas.DrawPNG 0, 0,  Server.MapPath("watermark.png")
Jpeg.PNGOutput = True
Jpeg.Save Server.MapPath(filename)
%>
<%=filename%> 
```

然而，而不是硬编码这些变量：

```
Jpeg.Crop 0, 38, 320, 460 
```

我想在裁剪之前使用 vbscript 找出图像大小，这样如果上传不同的图像大小，脚本可以更加灵活。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T15:50:10.363

您的`Jpeg`对象（ASPJpeg 实例）具有调用方法后可访问`.OriginalWidth`的`.OriginalHeight`属性。`.Open`你可以使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:14:06.240

一种选择是使用 loadpicture 函数。（另见[http://www.w3schools.com/vbscript/func_loadpicture.asp](http://www.w3schools.com/vbscript/func_loadpicture.asp)）

要获取像素，您可以使用以下命令：

```
Dim sPath
sPath = "C:\myPicture.jpg"
dim iWidth, iHeight
dim oFs, oImg
Set oFs= CreateObject("Scripting.FileSystemObject")
Set oImg = loadpicture(sPath)
iWidth = round(oImg.width / 26.4583)
iHeight = round(oImg.height / 26.4583)
Set oImg = Nothing 
```

# python - Lists Python中的黑名单，同时从网页中获取数据

> ID：12565617
> 
> 赞同：0
> 
> 时间：2012-09-24T13:03:03.690
> 
> 标签：python, list, blacklist

基本上，我创建了一个非常混乱的代码来从 bing 搜索查询中获取链接。我面临的问题是我收到了太多与 bing 相关的链接。

我已经尝试使用此当前代码来删除这些，但我更喜欢黑名单。

这是我的代码：

```
import re, urllib
class MyOpener(urllib.FancyURLopener):
    version = 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.15) Gecko/20110303 Firefox/3.6.15'
myopener = MyOpener()
dork = raw_input("Dork:")
pagevar = ['1','11','23','34','45','46','47','58','69']
for page in pagevar:
    bingdork = "http://www.bing.com/search?q=" + str(dork) + "&first=" + str(page)
    bingdork.replace(" ", "+")
    links = re.findall('''href=["'](.[^"']+)["']''', myopener.open(bingdork).read(), re.I)
    toremove = []
    for i in links:
        if "bing.com" in i:
            toremove.append(i)
        elif "wlflag.ico" in i:
            toremove.append(i)
        elif "/account/web?sh=" in i:
            toremove.append(i)
        elif "/?FORM" in i:
            toremove.append(i)
        elif "javascript:void(0);" in i:
            toremove.append(i)
        elif "javascript:" in i:
            toremove.append(i)
        elif "go.microsoft.com/fwlink" in i:
            toremove.append(i)
        elif "g.msn.com" in i:
            toremove.append(i)
        elif "onlinehelp.microsoft.com" in i:
            toremove.append(i)
        elif "feedback.discoverbing.com" in i:
            toremove.append(i)
        elif "/account/web?sh=" in i:
            toremove.append(i)
        elif "/?scope=web" in i:
            toremove.append(i)
        elif "/explore?q=" in i:
            toremove.append(i)
        elif "https://feedback.discoverbing.com" in i:
            toremove.append(i)
        elif "/images/" in i:
            toremove.append(i)
        elif "/videos/" in i:
            toremove.append(i)
        elif "/maps/" in i:
            toremove.append(i)
        elif "/news/" in i:
            toremove.append(i)
            for i in toremove:
                links.remove(i)
                for i in links:
                    print i 
```

假设我输入：Dork:cfm id

我会得到的结果是：

[http://pastebin.com/eGgUKYwV](http://pastebin.com/eGgUKYwV)

我想要的结果是：

[http://pastebin.com/Xi28BzXs](http://pastebin.com/Xi28BzXs)

我想删除以下内容：

```
/search?q=cfm+id&amp;lf=1&amp;qpvt=cfm+id
/account/web?sh=5&amp;ru=%2fsearch%3fq%3dcfm%2520id%26first%3d69&amp;qpvt=cfm+id
/search?q=cfm+id&amp;rf=1&amp;qpvt=cfm+id
/search?q=cfm+id&amp;first=69&amp;format=rss
/search?q=cfm+id&amp;first=69&amp;format=rss
/?FORM=Z9FD1
javascript:void(0);
/account/general?ru=http%3a%2f%2fwww.bing.com%2fsearch%3fq%3dcfm+id%26first%3d69&amp;FORM=SEFD
/?scope=web&amp;FORM=HDRSC1
/images/search?q=cfm+id&amp;FORM=HDRSC2
/videos/search?q=cfm+id&amp;FORM=HDRSC3 
```

基本上，我需要一个过滤器，它允许我只从 bing 中获取 VALID 链接，并从 bings 端删除所有废话。

非常感谢， BK PS 对不起，如果我的解释不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:25:16.057

您是否尝试过使用 beautifulsoup、lxml 或 html5lib（首选 lxml.etree）进行 css/xpath 查询的 html 解析路由，伪代码：

```
html = htmlparse.parse(open(url))
hrefs = []

for a in html.xpath('//a'):
    if a['href'].startswith('http://') or a['href'].startswith('https://'):
       hrefs.append(a['href']) 
```

当然这是伪代码，你应该适应你是否使用[beautifulsoup](http://www.crummy.com/software/BeautifulSoup/)，[lxml](http://lxml.de/lxmlhtml.html)或[html5lib](http://www.crummy.com/software/BeautifulSoup/)

如果您正在寻找的更像是根据白名单清理/清理页面 html，您可能会喜欢使用[CleanText](https://github.com/amirouche/Cleantext)，可以进一步自定义该程序以使用正则表达式过滤属性，但这留作练习；）

# android - Android 显卡：性能低下

> ID：12565620
> 
> 赞同：0
> 
> 时间：2012-09-24T13:03:15.370
> 
> 标签：android, performance, graphics, ondraw

我正在制作自定义滑动控件。就像一个音量轮，所以一些值会根据旋转方向增加或减少。我对此有两个问题：

1.  性能真的很低
2.  垃圾收集器多次触发。

好吧，我确定我做错了什么，所以请给我一盏灯。

我正在使用 2.1 (eclaire) SDK 上的 Android 图形。

这是从我的活动中调用的视图代码：

```
public class DrawingView extends View {

private Paint p;
Bitmap bitmap;
Context mContext;
Canvas canvas;
private float sweepAngle;
private int _height;
private int _width;
private float lastAngle;
private int percent;

public DrawingView(Context context) {
    super(context);
    WindowManager wm = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
    Display display = wm.getDefaultDisplay();
    this.set_Width(display.getWidth());
    this.set_Height(display.getHeight());
    this.setSweepAngle(10);
    mContext = context;
    p = new Paint();
    p.setAntiAlias(true);

}

protected int getAngleFromLocation(Point location){
    int finalAngle = (int) (Math.atan2(location.y - 200, location.x - 200) * (180 / Math.PI));
    return finalAngle;
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    bitmap = Bitmap.createBitmap(canvas.getWidth(), canvas.getHeight(),Bitmap.Config.ARGB_8888);
    this.canvas = new Canvas(bitmap);
    RectF rectF = new RectF();
    rectF.set(20, 20, this.get_Widtt() - this.get_Widtt()/10, this.get_Widtt() - this.get_Widtt()/10);
    canvas.drawArc(rectF, 180, this.getSweepAngle(), true, p);
    //invalidate();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    double increment = 3.6;
    Point touchLocation = new Point();
    touchLocation.x = (int)event.getX();
    touchLocation.y = (int)event.getY();
    canvas.drawBitmap(bitmap = Bitmap.createBitmap(canvas.getWidth(),canvas.getHeight(),Bitmap.Config.ARGB_8888),event.getX(), event.getY(),null );
    switch (event.getAction())
    { 
        case MotionEvent.ACTION_DOWN: 
            lastAngle = this.getAngleFromLocation(touchLocation);
            System.out.println("ACTION_DOWN");
            break;

        case MotionEvent.ACTION_MOVE:
            System.out.println("ACTION_MOVE");
            int currentAngle = this.getAngleFromLocation(touchLocation);
            System.out.println("CURRENT ANGLE: " + currentAngle); 
            if (currentAngle > lastAngle || (currentAngle == 1 && lastAngle == 359)) {
                percent += increment;
            } else if (currentAngle < lastAngle) {
                percent -= increment;
            }
            if (percent > 360) {
                percent = 360;
            } else if (percent < 0) {
                percent = 0;
            }
            lastAngle = currentAngle;
             this.setSweepAngle(percent);
             //Write the label
             //int realPercent = percent*100/360;
            System.out.println("PERCENT: "+percent); 
            break;

        case MotionEvent.ACTION_UP:
            break;
    }
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:18:30.997

无需在每一帧上创建一个新的位图。事实上，你应该尽量避免在 onDraw() 中分配任何对象。

试试这个：

```
private RectF mRectF = new RectF();

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawColor(Color.BLACK);
    mRectF.set(20, 20, this.get_Widtt() - this.get_Widtt() / 10, this.get_Widtt() - this.get_Widtt() / 10);
    canvas.drawArc(rectF, 180, this.getSweepAngle(), true, p);
} 
```

同时删除 onTouchEvent 中对 canvas.drawBitmap() 的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:19:14.663

很可能是位图/画布的创建花费了这么长时间并且触发了 GC 这么多。`onDraw()`您希望在特别是期间尽可能少地创建对象，而且`onTouchEvent()`也是如此。有什么理由不能将它移到一个单独的方法中，该方法被调用一次并在每帧重用相同的位图？看起来您传递给的值`createBitmap()`是静态的，所以它不应该是一个问题。

# python - 列出和附加元素

> ID：12565626
> 
> 赞同：2
> 
> 时间：2012-09-24T13:03:44.617
> 
> 标签：python

在这段代码中发生了一些奇怪的事情——至少对我来说是这样。

我有一个从 WS 方法中回忆的函数。我的功能是这样的：

```
try:       
    tipo = d['id_tipo_offerta']
    params = OFFERTA_MAP_DICT[tipo]
    params.append('days_constraints')
except Exception, s:
    self.log_int_raise("core.struttura._parseDictOfferta(): 1 Error=%s", RED(s)) 
```

省略的内容`OFFERTA_MAP_DICT`（在这种特定情况下是一个空列表）我想知道为什么，如果我第一次调用这个函数，值`params`将会是`['days_constraints']`，而每隔一次我仍然记得这个函数，params 的值将`['days_constraints','days_constraints',....,'days_constraints']`与*n*元素，其中*n*是我回忆这个函数的次数。

我的第一个作业是通过引用完成的吗？

**编辑**：

这些是我的地图

```
OFFERTA_MAP_DICT= {
        ID_OFFERTA_SCONTOCAMERA:    ID_OFFERTA_SCONTOCAMERA_KEYS,
        ID_OFFERTA_BEFOREDATE:      ID_OFFERTA_BEFOREDATE_KEYS,
        ID_OFFERTA_BEFORENDAYS:     ID_OFFERTA_BEFORENDAYS_KEYS,
        ID_OFFERTA_XFORY:           ID_OFFERTA_XFORY_KEYS,
        ID_OFFERTA_SCALARE:         ID_OFFERTA_SCALARE_KEYS,
        ID_OFFERTA_PACCHETTI:       ID_OFFERTA_PACCHETTI_KEYS,
        ID_OFFERTA_LAST_MINUTE:     ID_OFFERTA_LAST_MINUTE_KEYS,
        ID_OFFERTA_ADVANCE:         ID_OFFERTA_ADVANCE_KEYS
        }

OFFERTA_ROOM_MAP_DICT= {
        ID_OFFERTA_SCONTOCAMERA:    ['id_tipo_sconto', 'valore_sconto', 'id_tipo_prezzo'],
        ID_OFFERTA_BEFOREDATE:      ['id_tipo_sconto', 'valore_sconto', 'id_tipo_prezzo'],
        ID_OFFERTA_BEFORENDAYS:     ['id_tipo_sconto', 'valore_sconto', 'id_tipo_prezzo'],
        ID_OFFERTA_XFORY:           [],
        ID_OFFERTA_SCALARE:         [],
        ID_OFFERTA_PACCHETTI:       ['prezzo'],
        ID_OFFERTA_LAST_MINUTE:     ['id_tipo_sconto', 'valore_sconto', 'id_tipo_prezzo']
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:10:44.383

分配*总是*通过引用完成。如果要制作列表的（浅）副本，请对其进行切片。

```
lnew = lold[:] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:10:26.213

该语句`params = OFFERTA_MAP_DICT[tipo]`分配`OFFERTA_MAP_DICT[tipo]`给变量名称`params`......它*不会*复制它。作为`OFFERTA_MAP_DICT[tipo]`一个列表，`params`现在只指向同一个列表。

因此，当您这样做时`params.append('days_constraints')`，您将附加到列表中`OFFERTA_MAP_DICT[tipo]`……因此，当您下次进入此代码块时，`OFFERTA_MAP_DICT[tipo]`已经附加了“days_constraints”，然后您再次附加，等等。

[您可以使用复制](http://docs.python.org/library/copy.html)模块执行复制（或深复制），但根据您`params`以后使用的方式，我怀疑可能有更好的方法来解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:11:54.193

很难真正掌握代码中发生的事情。但是，当您这样做时：

```
params = OFFERTA_MAP_DICT[tipo] 
```

`params`是对*存储*在`OFFERTA_MAP_DICT`. 当您附加到该列表时，您还会看到该更改反映在其中，`OFFERTA_MAP_DICT`因为它们共享一个参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T13:12:51.000

`params`是每次调用函数时对同一个列表的引用，这与`OFFERTA_MAP_DICT[tipo]`. 因此，您每次都重复将该文本附加到同一个列表中。

Python 中的所有分配都分配引用。可以通过以下几种方式复制列表：

```
params = OFFERTA_MAP_DICT[tipo][:]       # take slice of whole list
params = list(OFFERTA_MAP_DICT[tipo])    # construct new list
params = copy(OFFERTA_MAP_DICT[tipo])    # from copy import copy 
```

# playframework - Play Framework 消息中的 html 标记

> ID：12565632
> 
> 赞同：5
> 
> 时间：2012-09-24T13:04:11.570
> 
> 标签：playframework, playframework-2.0

我在 Play 中使用国际化消息文件。在我的 messages.en 文件中，我有：

```
support.msg=Click here to contact <a href="support.html">support</a> 
```

但这会输出为

```
&lt;a href=&quot;support.html&quot;&gt;support&lt;/a&gt; 
```

是否可以在 messages.en 文件中转义 html，以便它们“按原样”输出

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-24T13:07:05.840

默认情况下，播放！自动转义视图中使用的字符串。如果您想输出原始文本（包括 HTML），请将变量包装在`Html()`.

[文档中的示例](http://www.playframework.org/documentation/2.0/ScalaTemplates)：

```
<p>
  @Html(article.content)    
</p> 
```

# asp.net - 使用 UpdatePanel.Update() 并且没有结果

> ID：12565633
> 
> 赞同：0
> 
> 时间：2012-09-24T13:04:12.907
> 
> 标签：asp.net, ajax, jquery-mobile, asp.net-ajax, updatepanel

我有一个包含 jquery mobile 的 aspx 网页，我不知道为什么，每当我在代码中调用**UpdatePanel.Update()**时，都会出现一个白页！当然页面不是空的，因为当我查看源代码（ctrl+u）时，所有内容都可用。奇怪的是页面中的一个调用，2个ajax请求提交，所以两个不同的响应接收到两个不同的post参数。第一个请求中的帖子是这样的：

ScriptManager：UpdatePanel1|grdRequests$ctl03$btnCancel __ASYNCPOST：true __EVENTARGUMENT：无 __EVENTTARGET：无 __EVENTVALIDATION：此处的值 __LASTFOCUS：无
__VIEWSTATE 此处的值

和响应是这样的：

1|#| |4|5451|更新面板|更新面板1|

但是在第二个请求中没有 ScriptManager 和 ASYNCPOST 参数，作为响应，只有旧内容看不到更多数据。任何的想法？

**客户端：**

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="ConfOne.aspx.cs" Inherits="ConfDC"%>
<!DOCTYPE html> 
<html> 
    <head> 
    <meta name="viewport" content="width=device-width, initial-scale=1" /> 

    <link rel="stylesheet" href="jquery.mobile-1.1.1.min.css" />
    <script src="jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="jquery.mobile-1.1.1.min.js" type="text/javascript"></script>
</head> 
<body> 
<form id="form1" runat="server" dir="rtl" defaultbutton="btnpage" name="form1">
    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode = "Conditional">
    <ContentTemplate>
    <table>
        <tr>
            <td>
                <asp:Button runat="server" ID="btnpage" Width="1px" Height="1px"  Visible="false"/>
                 <asp:ScriptManager ID="ScriptManager" runat="server"></asp:ScriptManager>
            </td>
        </tr>
    </table>
<div id="mcnt">
    <div data-role="page">
    <div data-role="content" style="padding: 10px; text-align: center;">

        <asp:GridView ID="tbls runat="server" AutoGenerateColumns="False" Width="100%"
            CssClass="mGrid" PagerStyle-CssClass="pgr" AlternatingRowStyle-CssClass="alt"
            CellPadding="1" CellSpacing="1" AllowPaging="True" DataKeyNames="Id" OnRowCommand="tbls_RowCommand"
            OnPageIndexChanging="tbls_PageIndexChanging">
            <Columns>
                <asp:TemplateField HeaderText="Amount">
                    <ItemTemplate>
                        <asp:Label ID="lblAmount" runat="server" Text='<%# Bind("Amount") %>'></asp:Label>
                    </ItemTemplate>
                    <ItemStyle/>
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:Button Text="Decline" ID="btnCancel" CommandName="CancelRequest" runat="server"
                            CommandArgument='<%# DataBinder.Eval(Container, "DataItem.id") %>' />
                    </ItemTemplate>
                    <HeaderStyle HorizontalAlign="Center" />
                    <ItemStyle HorizontalAlign="Center" />
                </asp:TemplateField>
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:Button Text="Accept" ID="btnConfirm" CommandName="ConfirmRequest" runat="server"
                            OnClientClick="return confirm('Are you sure?');"
                            CommandArgument='<%# DataBinder.Eval(Container, "DataItem.id") %>' />
                    </ItemTemplate>
                    <HeaderStyle HorizontalAlign="Center" />
                    <ItemStyle HorizontalAlign="Center" />
                </asp:TemplateField>
            </Columns>
            <PagerStyle CssClass="pgr"></PagerStyle>
            <AlternatingRowStyle CssClass="alt"></AlternatingRowStyle>
        </asp:GridView>
        </div>
        <div id="rsnCnt">                     
        <asp:Panel ID="pnlReasons" Width="100%" runat="server" Visible="false">
             <fieldset>
                <asp:TextBox runat="server" ID="txtReasons" CssClass="TextArea" Height="70px" Width="100%"
                                TextMode="MultiLine"></asp:TextBox>
                <asp:Label ID="lblError" runat="server" ForeColor="Red"></asp:Label>
                <div id="btnActionCnt">
                    <div style="float:right;">
                        <asp:Button type="button" runat="server" ID="btnCancelRequest" Width="100px" class="groovybutton2"
                                Text="OK " OnClientClick="return confirm('are you sure?');" />
                    </div>
                     <div style="float:left;"> 
                    <asp:Button type="button" runat="server" ID="btnCancel" class="groovybutton2" Text="NOT OK"
                        onmouseover="" onmouseout=""
                        OnClick="btnCancel_Click" Height="25px" Width="100px" />        
                    </div>
                </div>
            </fieldset>
        </asp:Panel>
    </div>
    </div>
</div>   
     </ContentTemplate>
    </asp:UpdatePanel>
    </form>
</body>
</html> 
```

**服务器端：**

```
protected void tbls_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "CancelRequest")
    {
        pnlReasons.Visible = true;
        UpdatePanel1.Update();

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:06:34.970

你在哪里绑定你的gridview ..你需要绑定它

```
private void Page_Load()
{
    if (!IsPostBack)
    {
        // Need to Bind your grid here
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T12:19:03.327

我不知道为什么，但是当我删除更新面板时工作正常。

# oracle - 迁移 6i 到 10g Oracle 报告

> ID：12565634
> 
> 赞同：3
> 
> 时间：2012-09-24T13:04:17.157
> 
> 标签：oracle, oracle10g, oraclereports

从 6i 迁移到 10g 时，我遇到了报告问题。一切正常，除非从另一个报表打开一个报表。我收到一个错误-

> REP-56107：命令行中作业类型报告的环境 id myenv 无效

当我尝试从另一个报告中打开报告时，我只会收到此错误。我的 Oracle 版本是 Oracle 10.2.0.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:59:44.390

我认为您的文件中的`defaultEnvId`属性`environment`设置不正确。`server_name.conf`通常`defaultEnvId`看起来像下面这样 -

```
<engine id="rwEng" initEngine="1" minEngine="0" maxEngine="10" engLife="50" maxIdle="30" defaultEnvId="JP"/> 
```

并且连续地定义为-

```
<environment id="JP">
  <envVariable name="NLS_LANG" value="Japanese_Japan.JA16SJIS"/>
  <envVariable name="NLS_CURRENCY" value="¥"/>
  <envVariable name="DISPLAY" value="MyServer.MyCompany.com:0.0"/>
</environment> 
```

我假设你的文件有`defaultEnvID="myenv"`and `<environment id="myenv">`。检查此项以确保它指向正确的环境。确保`defaultEnvId`in`engine`定义与定义匹配`environment`。另外，请记住，这是一个可选设置，因此您可能需要也可能不需要。有关详细信息，请参阅[此](http://docs.oracle.com/cd/B13597_05/bf.904/b13673/pbr_conf.htm)。

# iphone - 如何将图像从一个按钮拖到 iPhone 中的另一个按钮？

> ID：12565637
> 
> 赞同：2
> 
> 时间：2012-09-24T13:04:21.270
> 
> 标签：iphone, ios, image, button, drag

目前我在 iPhone 应用程序中工作，使用两个按钮，然后我设置了 button1 和 button2 的图像，然后我尝试将图像从 button1 拖到 button2，可以这样做吗？请帮我

提前致谢

```
 button1 = [UIButton buttonWithType:UIButtonTypeCustom];
[button1 setImage:[UIImage imageNamed:@"hearta.png"] forState:UIControlStateNormal];
button1.frame=CGRectMake(10, 60, 50, 50);
[button1 addTarget:self action:@selector(Button1Method) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:button1];  

button2 = [UIButton buttonWithType:UIButtonTypeCustom];
[button2 setImage:[UIImage imageNamed:@"club4.png"] forState:UIControlStateNormal];
button2.frame=CGRectMake(61, 60, 50, 50);
[button2 addTarget:self action:@selector(Button2Method) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:button2] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:11:25.273

您可以从[这个演示](https://nodeload.github.com/radhar/HGKDragAndDropRecycleBin/zipball/master)项目中获得参考。

这是很不错的。

还有另一个[链接在这里](http://www.radulucaciu.ro/wp-content/uploads/2011/09/ImageDrag.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:09:56.157

有不止一种方法可以做到这一点......

1.  您可以`UIImageView`在 button1 的单击事件或操作上创建一个，并使用动画将该图像拖动到 button2`imageview.image`与 button2 的 image 相等的位置，并排将原始 imageview 设置为 nil，以便您可以显示它消失在 button2 中。

2.  此外，您也可以`UIImageViews`直接使用按钮而不是按钮，并在那里的点击方法上制作和动画效果。

# iphone - 如何在iOS中提取字符串中两个分隔符之间的文本？

> ID：12565643
> 
> 赞同：0
> 
> 时间：2012-09-24T13:04:43.880
> 
> 标签：iphone, objective-c, ios

我有以下字符串，如何提取位于两个分隔符之间的文本：

`some text to be extracted`：

```
text text text text

= = = = = = = = = = = = =

some text to be extracted

= = = = = = = = = = = = =

text text text text 
```

我还希望将两个定界符与文本一起返回。如何用 Objective-C 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-16T10:14:20.533

这是一种方法。

您必须找到分隔符字符串所在的所有范围。

然后你取 2 x 2 的范围来提取它们之间的字符串：

```
 NSString *str = @"text text text text --- some text to be extracted... --- text text text text";

    NSString *myDelimiterString = @"---";

    NSMutableArray *arrayOfRangeForOccurrences = [[NSMutableArray alloc] init];
    NSUInteger length = [str length];
    NSRange range = NSMakeRange(0, length);
    while(range.location != NSNotFound)
    {
        range = [str rangeOfString:myDelimiterString options:0 range:range];
        if(range.location != NSNotFound)
        {    
            [arrayOfRangeForOccurrences addObject:[NSValue valueWithRange:range]];
            range = NSMakeRange(range.location + range.length, length - (range.location + range.length));
        }
    }

    //at least 2 delimiters have been found, we can extract a string
    if (arrayOfRangeForOccurrences.count >= 2) {
        //Extracting first text :
        NSRange firstRangeForDelimiter = [[arrayOfRangeForOccurrences objectAtIndex:0] rangeValue];
        NSRange secondRangeForDelimiter = [[arrayOfRangeForOccurrences objectAtIndex:1]rangeValue];

        NSRange rSub = NSMakeRange(firstRangeForDelimiter.location + firstRangeForDelimiter.length, secondRangeForDelimiter.location - firstRangeForDelimiter.location - firstRangeForDelimiter.length);
        NSString *myExtractedText = [str substringWithRange:rSub];
        NSLog(@"myExtractedText is : %@", myExtractedText);
    } else {
        NSLog(@"No pair of delimiter found");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:08:51.700

你可以使用类似下面的代码行，

```
NSArray *arrChars = [@"Your,String,for,test" componentsSeparatedByString:@","]; 
```

因此，您将获得由 , 分隔的部分字符串。

希望这可以帮助您实现您想要的。

# javascript - 处理在 Div 标签运行时添加的按钮的单击事件

> ID：12565644
> 
> 赞同：0
> 
> 时间：2012-09-24T13:04:46.503
> 
> 标签：javascript, asp.net-mvc-3

我通过重建它再次提出这个问题......因为我仍然没有任何解决方案......

我正在开发 MVC 3 应用程序并使用剃刀语法。

在这个应用程序中，我提供评论功能。

我已经提供了添加评论的功能，并将其保存在数据库中。

当用户单击删除按钮时，它将消息显示为“已单击”。

当用户加载实体时，先前添加的评论会显示在带有删除按钮的页面上，当用户单击该按钮时，会出现“单击”消息。

![在此处输入图像描述](../Images/05bc72670f72f6f57508d02bef1cf024.png)

现在，当用户添加新评论时，它会成功保存在数据库中，并与删除按钮一起出现在页面上。

现在，当用户单击删除按钮 msg 不会出现时...（我在从 DB 加载新评论时附加了 Div 标签）

我认为，有一个关于追加的问题，意味着以前的评论删除按钮效果很好，但是当我使用追加添加按钮时它不会工作......

这是部分视图中的代码，它在 DB 中添加评论并再次获取最新评论以查看以显示它。

```
 <script src="../../Scripts/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">
    $(document).ready(function () {
        $('#AddCommentButton').click(function () 

        {
        var comment1 = $('#Comment').val();
        if (comment1 == '') {
            alert('Please enter a comment');
            return;
        }

            $.ajax({

                type: 'post',
                url: '/Comment/SaveComments',
                dataType: 'json',

                data:
                { 

                 'comments' : $('#Comment').val(), 
                 'EType' : @Html.Raw(Json.Encode(ViewBag.EType)), 
                  'EId' : @Html.Raw(Json.Encode(ViewBag.EId))

                },
                success: function (data) {

                                   $("p.p12").append('<button type="button" id=' + data.Id  + ' class="deleteComment2">Delete</button></div>')

                }

            });
        });
    });
</script> 
```

我使用下面的代码，当我点击删除按钮时......

```
<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">

    $('.deleteComment').live('click', function () {
        alert('Clicked');
    });

</script> 
```

现在，问题的总结是我附加了 div 并在该 div 中添加了一个按钮，我试图获取该按钮的单击事件，但我无法获取该事件。

*当按钮在 Div 标记中添加运行时时，任何人都可以提供处理按钮单击事件的简单代码。*

这是新代码，我已经在页面中添加了您的代码，但它仍然无法正常工作。

```
<script src="../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-1.8.0.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.min.js" type="text/javascript"></script>

@model  IEnumerable<CRMEntities.Comment>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

 <!DOCTYPE html>

<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">

   $(document).on('click', '.deleteComment', function() 
   {
    alert('comment deleted');    
});

$(document).ready(function () {
alert("Doc loaded");

});
​

</script>

<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function () {
        $('#AddCommentButton').click(function () {

            $('#comments22').append('<input type="button" class="deleteComment" value="Delete" /><br/>');
            $('#comments22').append('<input type="button" class="deleteComment" value="Delete" /><br/>');
            $('#comments22').append('<input type="button" class="deleteComment" value="Delete" /><br/>');
            $('#comments22').append('<input type="button" class="deleteComment" value="Delete" /><br/>');
        });
    });
</script>

<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $(".ShowComments").click(function () {
            $(".ParentBlock").slideToggle("slow");

        });
    });
</script>

</head>
<body>

@{

     <div class="ParentBlock">

    @foreach (var item in Model)
    {
        <div class="OwnerClass" id="OwnerName">

         <span class="EmpName"> @Html.ActionLink(item.Owner.FullName, "Details", "EMployee", new { id = item.OwnerId }, new { @style = "color:#1A6690;" })</span>

           @Html.DisplayFor(ModelItem => item.CommentDateTime)

          <span class="EmpName"><button type="button" id = "@item.Id" class="deleteComment">Delete</button></span>

          <span class="EmpName"> @Html.ActionLink("Delete", "Delete", "Comment", new { id = item.Id }, new { @style = "color:#1A6690;" })</span>

        <p class="CommentP">
           @Html.DisplayFor(ModelItem => item.CommentText)
        </p>

        <br />
            <a class="Delete222" style="cursor:move;display:none;">DeleteNew</a>
        <br />

        </div>

    }

     <p class="p12">

      </p>

</div>

      <p id="ClassPara" class="ShowComments" onclick="chkToggle()">Show All Comments</p>

}

   @Html.TextArea("Comment", "", 5, 80, "asdsd")

    <input type="button" value="Add Comment" id="AddCommentButton"/>                         
    <input type="button" value="Clear" onclick="clearText()"/>                    

    <br />

    <div id="comments22">
    <input type="button" class="deleteComment" value="Delete" /><br/>
    <input type="button" class="deleteComment" value="Delete" /><br/>    
    <input type="button" class="deleteComment" value="Delete" /><br/>

</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:01:30.250

您打算在页面中包含多少次 jQuery？1 应该足够了。您似乎已将其包含在 3 个不同的地方。`<html>`此外，如果元素完全错误，您似乎已将脚本放在外面。

只需要包含一项：

```
<script src="@Url.Content("~/Scripts/jquery-1.8.0.min.js")" type="text/javascript"></script> 
```

另外你应该使用该`.on()`方法生动地订阅删除按钮的点击事件：

```
$(document).on('click', '.deleteComment', function () {
    alert('Clicked');
}); 
```

最后但并非最不重要的一点是，您似乎在元素`runat="server"`上使用了该属性。`<head>`那是 Razor，而不是 WebForms - 忘记那些属性。

所以让我为你清理这段代码，因为它完全是一团糟：

```
@model IEnumerable<CRMEntities.Comment>
@{ 
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
    </head>
<body>
    <div class="ParentBlock">
        @foreach (var item in Model)
        {
            <div class="OwnerClass" id="OwnerName">
                <span class="EmpName"> 
                    @Html.ActionLink(
                        item.Owner.FullName, 
                        "Details", 
                        "EMployee", 
                        new { id = item.OwnerId }, 
                        new { @style = "color:#1A6690;" }
                    )
                </span>

                @Html.DisplayFor(ModelItem => item.CommentDateTime)

                <span class="EmpName">
                    <button type="button" id = "@item.Id" class="deleteComment">Delete</button>
                </span>

                <span class="EmpName"> 
                    @Html.ActionLink(
                        "Delete", 
                        "Delete", 
                        "Comment", 
                        new { id = item.Id }, 
                        new { @style = "color:#1A6690;" }
                    )
                </span>

                <p class="CommentP">
                   @Html.DisplayFor(ModelItem => item.CommentText)
                </p>

                <br />
                <a class="Delete222" style="cursor:move;display:none;">DeleteNew</a>
                <br />
            </div>
        }
        <p class="p12"></p>
    </div>

    <p id="ClassPara" class="ShowComments" onclick="chkToggle()">Show All Comments</p>

    @Html.TextArea("Comment", "", 5, 80, "asdsd")

    <input type="button" value="Add Comment" id="AddCommentButton"/>                         
    <input type="button" value="Clear" onclick="clearText()"/>                    

    <br />

    <div id="comments22">
        <input type="button" class="deleteComment" value="Delete" /><br/>
        <input type="button" class="deleteComment" value="Delete" /><br/>    
        <input type="button" class="deleteComment" value="Delete" /><br/>
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <!-- or use your own jQuery version locally: -->
    @*<script type="text/javascript" src="@Url.Content("~/scripts/jquery-1.8.1.js")"></script>*@
    <script type="text/javascript">
        $(document).on('click', '.deleteComment', function () {
            alert('comment deleted');
        });

        $('.ShowComments').click(function () {
            $('.ParentBlock').slideToggle('slow');
        });

        $('#AddCommentButton').click(function () {
            $('#comments22').append('<input type="button" class="deleteComment" value="Delete" /><br/>');
            $('#comments22').append('<input type="button" class="deleteComment" value="Delete" /><br/>');
            $('#comments22').append('<input type="button" class="deleteComment" value="Delete" /><br/>');
            $('#comments22').append('<input type="button" class="deleteComment" value="Delete" /><br/>');
        });
    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T07:06:37.263

当用户单击删除按钮时，您可以显示您的删除消息，如下所示

在我的应用程序中，当用户单击删除按钮链接时，此 div 打开以获取确认消息。

```
<div id="dialog-confirm" title="Delete Country">
    <p>
        Are you soure you wont to delete this record ?</p>
</div>

<script type="text/javascript">
    $(function () {
        $(".lnkDelete").button();
        $(".lnkDelete").button();
        $("#dialog-confirm").dialog({
            autoOpen: false,
            model: true,
            width: 300,
            resizable: false,
            height: 200
        });

        $(".lnkDelete").click(function (e) {
            e.preventDefault();
            var targeturl = $(this).attr("href");

            $("#dialog-confirm").dialog({
                buttons: {
                    "Confirm": function () {
                        window.location.href = targeturl;
                    },
                    "Cancel": function () {
                        $(this).dialog("close");
                    }
                }
            });
            $("#dialog-confirm").dialog("open");
        });
    });
</script> 
```

在视图中

```
@foreach (var item in Model)
    {
        <tr>                
            <td>
                @Html.ActionLink("Edit", "Edit", new { id = item.ID }) |
                @Html.ActionLink("Details", "Details", new { id = item.ID }) |
                @Html.ActionLink("Delete", "Delete", new { id = item.ID }, new { @Class = "lnkDelete" })                    
            </td>
        </tr>
    } 
```

我想这会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:11:30.597

如果您使用的是 1.7 或更高版本的 jQuery，那么您应该使用 .on()

```
$('body').on('.deleteComment', 'click', function () {
    alert('Clicked');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T07:02:51.747

您正在将事件添加到文档就绪事件中。但是元素不可用，然后附加事件。

您需要确保在创建元素后添加事件......所以在成功回调函数中添加......

否则创建的元素将不会与事件处理程序关联...

```
 success: function(data) {
    $("p.p12").append('<button type="button" id=' + data.Id + ' class="deleteComment2">Delete</button></div>');

   // Add the event to the Delete button when created...
    $('#' + data.Id).on('click', function() {
        alert('Clicked');
    });
}​ 
```

# c++ - c++中的命令行解析器

> ID：12565648
> 
> 赞同：0
> 
> 时间：2012-09-24T13:04:56.307
> 
> 标签：c++, parsing, command-line, console

我有下一个代码：

```
#include "CmdLine.h"

void main(int argc, TCHAR **argv)
{

  CCmdLine cmdLine;

  // parse argc,argv 
  if (cmdLine.SplitLine(argc, argv) < 1)
  {
     // no switches were given on the command line, abort
     ASSERT(0);
     exit(-1);
  }

  // test for the 'help' case
  if (cmdLine.HasSwitch("-h"))
  {
     show_help();
     exit(0);
  }

  // get the required arguments
  StringType p1_1, p1_2, p2_1;
  try
  {  
     // if any of these fail, we'll end up in the catch() block
     p1_1 = cmdLine.GetArgument("-p1", 0);
     p1_2 = cmdLine.GetArgument("-p1", 1);
     p2_1 = cmdLine.GetArgument("-p2", 0);

  }
  catch (...)
  {
     // one of the required arguments was missing, abort
     ASSERT(0);
     exit(-1);
  }

  // get the optional parameters

  // convert to an int, default to '100'
  int iOpt1Val =    atoi(cmdLine.GetSafeArgument("-opt1", 0, 100));

  // since opt2 has no arguments, just test for the presence of
  // the '-opt2' switch
  bool bOptVal2 =   cmdLine.HasSwitch("-opt2");

  .... and so on.... 
```

}

我已经实现了 CCmdLine 类，这个 main 是如何使用它的一个例子。我很难理解如何获取输入值。我试图从控制台使用 scanf 读取它们，但 argc 不会增加并导致读取错误。

我是 C++ 的初学者，我想知道谁让这个代码工作。

谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:08:50.707

`Argc`并且`argv` *只*包含程序启动时传递的参数。因此，如果您使用 , 执行它`myapp.exe option1 option2 option3`，`argv`那么您将拥有：

*   我的应用程序`//<--argv[0]`
*   选项1`//<--argv[1]`
*   选项2`//<--argv[2]`
*   选项3`//<--argv[3]`

简而言之，当程序启动时，main 的参数被初始化以满足以下条件：

*   `argc`大于零。
*   `argv[argc]`是一个空指针。
*   `argv[0]`通过 to`argv[argc-1]`是指向表示实际参数的字符串的指针。
*   `argv[0]`将是包含程序名称的字符串，如果不可用，则为空字符串。的其余元素`argv`表示提供给程序的参数。

[例如，您可以在此处](http://publications.gbdirect.co.uk/c_book/chapter10/arguments_to_main.html)找到更多信息。

以后读取输入的所有尝试（使用`cin`或`scanf`其他）都不会将输入的值保存到`argv`，您需要自己处理输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:08:08.310

在运行程序时从命令行传递输入值，例如

```
program_name.exe arg1 arg2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:08:56.397

这很容易：

```
void main(int argc, char **argv)
{
    std::string arg1(argv[0]);
    std::string arg2(argv[1]);
} 
```

# javascript - 无法计算ajax响应文本

> ID：12565655
> 
> 赞同：0
> 
> 时间：2012-09-24T13:05:10.530
> 
> 标签：javascript, html, ajax, web-applications

我是 Web 开发的新手，正在尝试编写简单的代码来使用 JavaScript 和 AJAX 更改 HTML 元素的可见性，但我的代码不起作用。

我正在运行的 PHP 脚本很简单：

```
 <?php
     echo TRUE;
    ?> 
```

JavaScript 代码是：

```
function getuname() {
  //create_xmlhttpobj();
  var userName = document.getElementById('uName');

  var url = "http://localhost/test.php";
  //script that returns whether username exisits or not

  request.open("GET", url, true);
  request.send(null);
  request.onreadystatechange = updatepage();
  //alert(userName.value);
}

function updatepage() {
  //alert(request.readyState);
  alert(request.readyState);
  //alert(request.responseText);
  if (request.readyState == 4) {
    alert('here123');
    togvis();
  }
} 
```

该语句`alert(request.responseText);`显示一个空白警报框。

有人可以告诉我我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:05:38.300

您正在调用函数`updatepage`，而不是分配它。

```
request.onreadystatechange = updatepage(); 
```

需要是

```
request.onreadystatechange = updatepage; 
```

# macos - 如何制作一个可以在终端（OSX）中用作参数/执行程序的程序？

> ID：12565657
> 
> 赞同：0
> 
> 时间：2012-09-24T13:05:25.190
> 
> 标签：macos, terminal

您安装在计算机上的某些程序在您安装它们（节点、python 等）时会从终端变为可执行文件。如何使可执行文件成为命令行参数？

对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:07:45.837

您必须确保您的程序（或命令行工具）安装在您的“ `$PATH`”环境变量找到的目录中。

[SuperUser 站点](https://superuser.com/questions/69130/where-does-path-get-set-in-os-x-10-6-snow-leopard)有许多问题向您展示如何修改 $PATH 以便可以从终端命令行轻松运行您想要“安装”的任何工具。

# linux - 使用动态 CPU 缩放时获取实际 CPU 速度

> ID：12565658
> 
> 赞同：2
> 
> 时间：2012-09-24T13:05:29.973
> 
> 标签：linux, bash

在使用动态 CPU 频率时，我需要一种方法来获得实际的 CPU（硬件）速度（maxspeed）。缩放。读取 /proc/cpuinfo 不起作用，因为它显示了缩放的当前步骤。此外，CPU 缩放中的最小-最大频率是可配置的，因此读取“/sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq”不会这样做，我需要一个可靠的方法。

示例：我的模型显示“Intel(R) ****** CPU 3.66GHz”，但可以配置频率缩放的最小值-最大值（比如 500MHZ 到 2.3GHZ）。如何获得 3.66GHZ 值？

# javascript - 模板内的操作试图在视图中查找功能，而不是使用路由定义

> ID：12565660
> 
> 赞同：0
> 
> 时间：2012-09-24T13:05:36.573
> 
> 标签：javascript, ember.js

我正在尝试按照[http://emberjs.com/guides/outlets/#toc_transitions-and-urls](http://emberjs.com/guides/outlets/#toc_transitions-and-urls)上的指南让 ember 路由工作 我在 1.0.pre

但是，我在模板栏中定义操作时遇到了困难。

当我尝试从模板栏中单击“阅读文章”时发生错误，它试图在我的视图中找到一个 showPost 函数，而不是使用路由器，我应该使用什么目标作为**目标**？我是否也正确设置了上下文？

**错误：断言失败：目标 <(Ember.View 的子类):ember337> 没有动作 showPost**

**编辑：** 有错误的项目在 [https://github.com/newtonianb/todomvc/tree/master/dependency-examples/emberjs_require](https://github.com/newtonianb/todomvc/tree/master/dependency-examples/emberjs_require)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:47:34.937

当您的视图没有控制器和路由器来发送操作时，就会发生这种情况。您可以通过访问路由器来验证您的视图控制器和路由器是否`controller`存在`controller.target`。

实际上，查看您的代码，我不希望路由器存在，因为您正在手动创建控制器。控制器需要了解路由器，以便向其发送事件。

```
controller.connectOutlet({
  viewClass: PostsView,
  controller: PostsController.create(), // no target!
  context: context
}) 
```

默认情况下，Ember 会在您的应用程序初始化时为您连接所有这些。这是您的控制器实例化的地方。

实际上，将上面的内容更改为类似的内容应该可以解决您的问题。

```
controller.connectOutlet({
  viewClass: PostsView,
  controller: router.get('postsController'), // this guy has target
  context: context
}) 
```

如果这仍然不起作用，请您发布一个 jsfiddle，以便我们一起编辑它。

# php - 如何创建下载链接来下载文件而不是重定向到浏览器？

> ID：12565683
> 
> 赞同：4
> 
> 时间：2012-09-24T13:07:17.163
> 
> 标签：php, html

我正在尝试放置一个链接以从服务器下载 pdf，而不是重定向浏览器以在另一个页面中打开 pdf。我在许多网站上都看到过这样的选项，但无法获取代码。大多数人都说应该只使用 php，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T13:10:58.627

使用以下代码将其重定向到 php 页面：

```
$path_to_file = '/var/www/somefile.pdf'; //Path to file you want downloaded
$file_name = "somefile.pdf"; //Name of file for download
header('Pragma: public');   // required
header('Expires: 0');    // no cache
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header("Content-Type: application/octet-stream");
header('Content-Disposition: attachment; filename="'.$file_name.'"');
header('Content-Transfer-Encoding: binary');
readfile($path_to_file);
die(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T13:09:19.773

或者您可以将其包含在`.htaccess`

```
<FilesMatch "\.(?i:pdf)$">
  ForceType application/octet-stream
  Header set Content-Disposition attachment
</FilesMatch> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:11:59.640

来自 php

```
 header("Content-Type: application/octet-stream");
    header("Content-Disposition:attachment;filename=myfile.pdf"); 
```

然后是文件内容

或来自 Apache

```
<FilesMatch "\.(?i:pdf)$">
  ForceType application/octet-stream
  Header set Content-Disposition attachment
</FilesMatch> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T13:10:12.590

您有时可以更改 http 标头：

```
header("Content-Type: application/force-download");
header("Content-Disposition: attachment; filename=\"lol.pdf\""); 
```

像这样。但是出于安全原因，某些浏览器实际上会阻止此操作。

### 编辑

因为我意识到它并不清楚。这些标头将从另一个页面发送，该页面实际读取文件并将其与这些标头一起发送到浏览器。

然后，该链接会将其`href`属性指向该 PHP 页面，该页面读取文件并发送标头。

# ios - 无法为 armv6 构建 RestKit

> ID：12565686
> 
> 赞同：2
> 
> 时间：2012-09-24T13:07:25.013
> 
> 标签：ios, xcode, restkit, armv6

我经常收到这样的警告：

```
warning: no rule to process file '$(PROJECT_DIR)/Vendor/YAJL/NSBundle+YAJL.m' of type sourcecode.c.objc for architecture armv6 
warning: no rule to process file '$(PROJECT_DIR)/Vendor/YAJL/NSObject+YAJL.m' of type sourcecode.c.objc for architecture armv6 
warning: no rule to process file '$(PROJECT_DIR)/Vendor/YAJL/yajl-1.0.9/src/yajl.c' of type sourcecode.c.c for architecture armv6 
warning: no rule to process file '$(PROJECT_DIR)/Vendor/YAJL/yajl-1.0.9/src/yajl_alloc.c' of type sourcecode.c.c for architecture armv6
.... 
```

尝试在 Architectures 构建选项中使用“armv6”标志编译 RestKit。由于编译器找不到编译文件的规则，它根本不编译它们，所以我无法在设备上安装应用程序，因为它说它找不到编译的库。我尝试了在互联网上找到的不同方法，但它们仍然不起作用。谁能解释这个问题的核心以及为什么会发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T20:02:44.987

你在运行 Xcode 4.5 吗？4.5 版已放弃对 armv6 的支持

# php - joomla模块中的图像路径

> ID：12565689
> 
> 赞同：0
> 
> 时间：2012-09-24T13:07:30.020
> 
> 标签：php, css, joomla

我在 joomla 2.5 中的 default.php 文件中创建了一个模块我正在使用此代码来调用图像

```
 <img src="/home_interior/templates/business13/images/img1.jpg" alt="" /> 
```

图像存储在此位置

```
 wamp\www\home_interior\templates\business13\images 
```

但在前端图像没有显示，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:19:59.777

首先，如果您正在创建一个模块，它应该位于`joomla_root/modules/mod_yourname/`. 如果是这样，链接到位于模板文件夹中的图像似乎很奇怪。该模块应提供自己的图像，最好位于`joomla_root/media/mod_yourname/images/`.

现在，要编写该图像元素，我建议您使用[JHTML::image](http://docs.joomla.org/JHtml%3a%3aimage/11.1)。

```
public static function image (
    $file
    $alt
    $attribs=null
    $relative=false
    $path_only=false
) 
```

例子：

```
<?php
echo JHTML::image('templates/business13/images/img1.jpg', 'Alt text');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:34:07.080

为此，您可以`JURI::root`像这样在前端显示您的图像。

```
<img src="<?php echo JURI::root().'templates/business13/images/img1.jpg';?>" alt="" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:47:15.477

您应该使用`JURI::root()`来定义适用于本地主机和在线的根目录，如下所示：

```
<img src="<?php echo JURI::root(). 'templates/business13/images/img1.jpg' ; ?>" alt="Image 1" /> 
```

`alt=""`注意：您还应该在 HTML 标准中添加文本。

# c# - 如何对预期无法编译负面测试的 C# 代码进行单元测试？

> ID：12565690
> 
> 赞同：4
> 
> 时间：2012-09-24T13:07:31.763
> 
> 标签：c#, unit-testing, compilation, strong-typing

我们的目的是生成一个字符串输出，该输出需要遵守一组特定的语法规则。我创建了一个对象模型，以便通过 C# 的强类型强制执行该语法，以防止生成无效输出的可能性。

我可以创建积极的测试，即有效的 C# 生成有效的输出。我无法做的是运行否定测试，即确保尝试生成无效输出会在编译时引发错误。

显式示例：

```
namespace Abstract
{
    public interface FooType { }
    public interface FooString : FooType { }
} 
```

```
public interface Integer : Abstract.FooType { }    
public interface SingleLine : Abstract.FooString { }
public interface MultiLine : Abstract.FooString { }

public class Bar<T>
    where T : Abstract.FooType
{
    public Bar(string s) {
        // do stuff with s and T, where T is SingleLine or MultiLine
    }

    public Bar(int i) {
        // do stuff with i and T, where T is Integer
    }
}

public static class Foo
{
    public static Bar<T> Bar<T>(int i) where T : Integer {
        return new Bar<T>(i);
    }

    public static Bar<SingleLine> Bar(string s) {
        return new Bar<SingleLine>(s);
    }

    public static Bar<T> Bar<T>(string s) where T : Abstract.FooString {
        return new Bar<T>(s);
    }
} 
```

所有这些只是为了让我能做到：

```
Foo.Bar<SingleLine>("some string");  // ok
Foo.Bar("another string");           // ok
Foo.Bar<MultiLine>("more\nstrings"); // still ok
Foo.Bar<Integer>(24)                 // also ok

// How to test these lines for compilation failure?
Foo.Bar<Integer>("no good");
Foo.Bar<MultiLine>(-1); 
```

万一这很重要，我正在使用 VS2012 Express for Desktop。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T13:53:14.663

我会高度怀疑这样做的代码。但是，如果您想创建一个单元测试以确保有人没有更改代码以允许类以某种方式工作（即在以某种方式使用时停止出​​现编译错误，您可以在此使用 CodeDOM方式：

```
CSharpCodeProvider codeProvider = new CSharpCodeProvider();
ICodeCompiler icc = codeProvider.CreateCompiler();
CompilerParameters parameters = new CompilerParameters();
parameters.ReferencedAssemblies.Add("mydll.dll");

parameters.GenerateExecutable = false;

CompilerResults results = 
    icc.CompileAssemblyFromSource(parameters, 
        String.Format(@"using System;

namespace Testing
{{
    class Program
    {{
        static void Main(string[] args)
        {{
            {0}
            Console.ReadLine();
        }}
    }}
}}
", "Foo.Bar<Integer>("no good");"));
Assert.AreNotEqual(0, results.Errors.Count); 
```

您基本上创建了一个提供程序，告诉它您要引用特定的 DLL（大概在哪里），然后创建您要测试`Foo`的代码（文本-注意我将大括号加倍，因为它们是 中的分隔符），包装`String.Format`在一个类中（包括`Main`如果你正在生成一个 exe）然后编译文本。`Errors`您可以验证集合是否发生错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T13:32:16.613

当然可以，只需制作您希望编译失败的代码片段（作为字符串，或将 .cs 文件加载到字符串中）并使用[CodeDom](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)在其上调用 C# 编译器。然后您的测试只需要检查编译器是否失败，如果您喜欢检查行号错误消息等...是否正确。

当然，这是一个相当大的努力——你需要评估这真的会给你带来多少收益。如果您正在开发其他开发人员将要使用的某种 API，并且这是一个重要的功能，将来可能会因一些细微的变化而无意中破坏，那么您可能需要对此进行单元测试。否则，这可能需要付出很多努力才能获得很少的回报（IMO）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:30:39.850

您可能已经注意到，要运行单元测试，必须成功编译其代码，所以这有点像鸡蛋问题。

您可以通过使用反射调用 API 来解决此问题。如果您以不兼容的方式调用类型（例如，当您使用类型约束时），CLR 将引发异常。

另一种选择是在单元测试中使用一段文本来使用[Code Dom （或仅触发 csc.exe）。](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)您可以通过让编译失败来使您的测试通过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T13:58:39.613

[罗斯林](http://www.microsoft.com/en-us/download/details.aspx?id=34685)会让你做这样的事情。它可能会内置到 .net 5 或 C# 6 或其他东西中。它本质上等同于代码 dom。

# jquery - 简单滚动内容 id 不显示 iframe 内容

> ID：12565692
> 
> 赞同：0
> 
> 时间：2012-09-24T13:07:43.947
> 
> 标签：jquery, html, css, jquery-plugins

我只是将滚动 jquery 插件应用到 ul 选项卡以进行滚动。滚动工作正常。但是滚动条内容没有显示 iframe 标签。html代码如下：

```
<ul id="scroller">
  <p> some text </p>
 <iframe id="myyoutube" width="210px"  height="200px" src="http://www.youtube.com/embed/tRrHM16jjog" frameborder="0" allowfullscreen=""></iframe>
 </ul> 
```

任何人都可以建议在滚动条内容 ID 中显示 iframe 标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:15:56.503

试试这个代码：

```
<script type="text/javascript">
(function($) {
    $(function() {
        $("#scroller").simplyScroll({});
    });
})(jQuery);
</script>

<div id="scroller">
  <ul>  
    <li><p> some text </p></li>
    <li><iframe id="myyoutube" width="210px"  height="200px" src="http://www.youtube.com/embed/tRrHM16jjog" frameborder="0" allowfullscreen=""></iframe>   </li>
  </ul>
</div> 
```

这对我来说很好

# ios-simulator - Xcode 4.5 iOS 6.0 模拟器方向不起作用

> ID：12565693
> 
> 赞同：1
> 
> 时间：2012-09-24T13:07:44.013
> 
> 标签：ios-simulator, orientation, xcode4.5

我已经将我的 Xcode 更新到 4.5，我已经实现了如下的定位方法

```
 -(BOOL)shouldAutorotate{

    return YES;

  }

-(NSUInteger)supportedInterfaceOrientations{

    return UIInterfaceOrientationMaskAll;
} 
```

我在 willRotateToInterfaceOrientation 方法中设置按钮、标签、图像的框架大小

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{

  if ([[UIDevice currentDevice] orientation] == UIDeviceOrientationPortrait )||
        ([[UIDevice currentDevice] orientation] == UIDeviceOrientationPortraitUpsideDown ))
  {

    // set frame sizes for portait

   }

  else if(( [[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeLeft )||
            ([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeRight ))

  {

    // set frame sizes for landscape

   }

} 
```

但有时旋转模拟器时不会调用此方法，有时模拟器在从另一个 viewController 导航时没有检测到方向。我检查了 info.plist 文件 - 很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:59:06.207

Apple 不会在 IOS 6.0 中调用 shouldAutorotatetoInterfaceOrientation 调用，除非您告诉主窗口将其发送到哪个视图控制器。

通过将 window.rootViewController 设置为我的应用程序的顶级视图控制器，我可以在我的应用程序中进行旋转

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
   ...
   window.rootViewController = topLevelViewController;
   ...
} 
```

我的应用程序的 iPhone 版本只支持两个纵向，所以我的顶级 iPhone 视图控制器需要一个新方法：

```
- (NSUInteger)supportedInterfaceOrientations 
{
  return  UIInterfaceOrientationMaskPortrait |  
          UIInterfaceOrientationMaskPortraitUpsideDown;
} 
```

这是关于[Buzz Touch](http://www.buzztouch.com/forum/thread.php?tid=41ED2FC151397D4AD4A5A60&currentPage=1)的讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T13:29:19.053

Apple 已弃用 ios6 中的 shouldautorate 方法，改为使用这些方法

```
- (BOOL)shouldAutorotate NS_AVAILABLE_IOS(6_0);
- (NSUInteger)supportedInterfaceOrientations NS_AVAILABLE_IOS(6_0);
// Returns interface orientation masks.
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation NS_AVAILABLE_IOS(6_0); 
```

# c# - <> 与 64BaseString 相互转换时 Xml 丢失

> ID：12565694
> 
> 赞同：1
> 
> 时间：2012-09-24T13:07:44.180
> 
> 标签：c#, .net, xml, encryption

我有这个简单的 XML 文件

```
<Root>
    <Licence Name="My name" Age="23"/>
</Root> 
```

在我的加密和解密过程中，我正在使用`ToBase64String()`和`FromBase64String()`方法，但它无法正常工作，当我尝试解密文件时，**<>**女巫限制我的**许可证**元素丢失了。这是加密和解密后的结果：

```
<Root>&lt;Licence Name="My name" Age="23" /&gt;</Root> 
```

这是我的代码

```
//Encrypt
private void bnEncrypt_Click(object sender, EventArgs e)
{
        var xDoc = XElement.Load(@"C:\Opticien\Lic.xml");
        var data = xDoc.Element("Licence").ToString();

        var dataByte = Encoding.UTF8.GetBytes(data);
        var dataEncrypted = Convert.ToBase64String(dataByte);

        xDoc.SetValue(dataEncrypted);
        xDoc.Save(@"C:\Opticien\Lic.xml");
        memoEdit1.Text = xDoc.ToString();
}

//Decrypt
private void bnDecrypt_Click(object sender, EventArgs e)
{
        var xDoc = XElement.Load(@"C:\Opticien\Lic.xml");
        var data = xDoc.Value;

        var dataByte = Convert.FromBase64String(data);
        var dataDecrypted = Encoding.UTF8.GetString(dataByte);

        xDoc.SetValue(dataDecrypted);
        xDoc.Save(@"C:\Opticien\Lic.xml");
        memoEdit1.Text = xDoc.ToString();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:10:31.217

您正在使用 SetValue `xDoc.SetValue(dataDecrypted);`。这将设置`<Root>`节点的文本，转义任何特殊字符，如“<”和“>”字符。

相反，使用[XElement.Parse()](http://msdn.microsoft.com/en-us/library/bb468714.aspx)根据解码（而不是解密）字符串创建新的 XElement。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:13:55.133

而不是`xDoc.SetValue(dataDecrypted);`您需要使用此代码：

```
xDoc.FirstNode.ReplaceWith(XElement.Parse(dataDecrypted)); 
```

# java - 如果元素是可空的，如何检查 JIBX

> ID：12565698
> 
> 赞同：0
> 
> 时间：2012-09-24T13:07:56.120
> 
> 标签：java, jibx

我有 xsd 架构：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema
  targetNamespace="urn:v1"
  xmlns="urn:v1"
  xmlns:reg="urn:v1"
  xmlns:xop="http://www.w3.org/2004/08/xop/include"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  elementFormDefault="qualified"
  attributeFormDefault="unqualified"
  version="1.1.1">

  <xs:simpleType name="ItemType">    
    <xs:restriction base="xs:string">

    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="ListItemType">   
    <xs:list itemType="ItemType"/>
  </xs:simpleType>

  <xs:complexType name="Element">    
    <xs:sequence>
      <xs:element name="SubElement">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="SubSubElement" type="ListItemType" nillable="true" minOccurs="0"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>  
</xs:schema> 
```

和 JIBX 生成的 java 类：

```
public class Element
{
    private java.util.List<String> subElements = new java.util.ArrayList<String>();

    /** 
     * Get the list of 'SubSubElement' element items.
     * 
     * @return list
     */
    public java.util.List<String> getSubElements() {
        return subElements;
    }

    /** 
     * Set the list of 'SubSubElement' element items.
     * 
     * @param list
     */
    public void setSubElements(java.util.List<String> list) {
        subElements = list;
    }

    /** 
     * Serializer for 'SubSubElement' element list.
     * 
     * @param values
     * @return text
     */
    public static String serializeSubElements(java.util.List<String> values) {
        if (values == null) {
            return null;
        } else {
            java.lang.StringBuffer buff = new java.lang.StringBuffer();
            for (java.util.Iterator<String> iter = values.iterator(); iter
                    .hasNext();) {
                if (buff.length() > 0) {
                    buff.append(' ');
                }
                String value = iter.next();
                buff.append(value);
            }
            return buff.toString();
        }
    }

    /** 
     * Deserializer for 'SubSubElement' element list.
     * 
     * @param text
     * @return values
     * @throws org.jibx.runtime.JiBXException on conversion error
     */
    public static java.util.List<String> deserializeSubElements(String text)
            throws org.jibx.runtime.JiBXException {
        org.jibx.runtime.IListItemDeserializer ldser = new org.jibx.runtime.IListItemDeserializer() {
            public java.lang.Object deserialize(String text) {
                return text;
            }
        };
        return (java.util.List<String>) org.jibx.runtime.Utility
                .deserializeList(text, ldser);
    }
} 
```

我如何检查元素是否可空？我在 xsd 中有：nillable="true"

更新：

好的一些没有列表的esier xsd：

```
<xs:schema targetNamespace="urn:v1" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.1.1" xmlns="urn:v1" xmlns:reg="urn:v1" xmlns:xop="http://www.w3.org/2004/08/xop/include" xmlns:xs="http://www.w3.org/2001/XMLSchema">
   <xs:complexType name="Element">
         <xs:sequence minOccurs="0">
            <xs:element name="SubElement" type="type1" nillable="true" minOccurs="0"/>
         </xs:sequence>
   </xs:complexType>

    <xs:simpleType name="type1">        
        <xs:restriction base="xs:string" />
    </xs:simpleType>

</xs:schema>

public class Element
{
    private String subElement;

    /** 
     * Get the 'SubElement' element value.
     * 
     * @return value
     */
    public String getSubElement() {
        return subElement;
    }

    /** 
     * Set the 'SubElement' element value.
     * 
     * @param subElement
     */
    public void setSubElement(String subElement) {
        this.subElement = subElement;
    }
} 
```

再次不可空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:46:13.073

你在这里`xs:element name="SubSubElement" type="ListItemType" nillable="true" minOccurs="0"`翻译成`java.util.List<String> getSubElements()`.

结果列表中的每个空值都对应`<SubSubElement xsi:nil="true"/>`于 xml 数据。

没有其他实用的方法可以让空值出现在列表中。

因此，在这种情况下，检查列表项是否为 null 似乎就足够了。

请参阅[http://www.ibm.com/developerworks/xml/library/ws-tip-null/index.html#N10142](http://www.ibm.com/developerworks/xml/library/ws-tip-null/index.html#N10142)。

**更新**

JiBX 文档[状态](http://jibx.sourceforge.net/schema.html)

> JiBX 1.0 不支持也用于实例文档的 xsi:nil 属性。JiBX 1.1 使用[对象属性](http://jibx.sourceforge.net/details/binding-attributes.html#object)组中的可空属性添加了对此功能的支持。

进而

> 此属性只能用于绑定到元素名称的对象。

因此，使用映射到 . 绝对不可能进行所需的检查`java.util.List<String> getSubElements()`。

您可以将映射更改为`java.util.List<SubElement> getSubElements()`. `<SubSubElement/>`然后将映射到空`SubElement`实例。

对所有 JiBX 源进行快速全文搜索并没有显示任何关于 nil 检查可能性的概念。似乎 JiBX 支持`nillable`仅限于特殊的编组规则。`nillable`假设仅支持元素绑定映射是有意义的。

**示例 xsd**

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema
  targetNamespace="urn:v1"
  xmlns="urn:v1"
  xmlns:reg="urn:v1"
  xmlns:xop="http://www.w3.org/2004/08/xop/include"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  elementFormDefault="qualified"
  attributeFormDefault="unqualified"
  version="1.1.1">

  <xs:complexType name="SubElement">    
    <xs:simpleContent>
      <xs:extension base="xs:string">
      </xs:extension>
    </xs:simpleContent>    
  </xs:complexType>
  <xs:simpleType name="SubElementList">   
    <xs:list itemType="SubElement"/>
  </xs:simpleType>
  <xs:complexType name="Element">    
    <xs:sequence>
      <xs:element name="SubElement">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="SubSubElement" type="SubElementList" nillable="true" minOccurs="0"/>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>  
</xs:schema> 
```

# c# - 验证动态 texbox 和标签

> ID：12565707
> 
> 赞同：0
> 
> 时间：2012-09-24T13:08:22.340
> 
> 标签：c#, asp.net, validation, dynamic

好吧，所以我完全不知道如何做到这一点。我需要做的是使用正则表达式验证文本框的某些字段和所有字段的必填字段。我已经设置好了，所以当用户单击按钮时，每次都会显示一组新的输入字段，这样如果他们有多个工作经验，他们就可以无限地输入。我试过的代码不起作用。还可能要注意，由于遇到此问题，到目前为止我只完成了地址一。一旦我弄清楚了，我就可以做剩下的了。

**ASP.net 代码只是一个按钮。**

**C#代码：**

```
protected void Page_Load(object sender, EventArgs e)
{
    // Add any controls that have been previously added dynamically

    for (int i = 0; i < TotalNumberAdded; ++i)
    {
        addcontrolsemployment(i + 1);
    }

}

private void addcontrolsemployment(int controlNumber)
    {

        var newPanel = new Panel();

        var employerLabel = new Label();
        var addressLabel = new Label();
        var phoneLabel = new Label();
        var fromDateLabel = new Label();
        var toDateLabel = new Label();
        var supervisorLabel = new Label();
        var jobTitleLabel = new Label();
        var dutiesLabel = new Label();
        var hoursLabel = new Label();
        var wageLabel = new Label();
        var leavingLabel = new Label();

        var employerTextbox = new TextBox();
        var addressTextbox = new TextBox();
        var phoneTextbox = new TextBox();
        var fromDateTextbox = new TextBox();
        var toDateTextbox = new TextBox();
        var supervisorTextbox = new TextBox();
        var jobTitleTextbox = new TextBox();
        var dutiesTextbox = new TextBox();
        var hoursTextbox = new TextBox();
        var wageTextbox = new TextBox();
        var leavingTextbox = new TextBox();

        // textbox needs a unique id to maintain state information
        employerTextbox.ID = "EmployerTextBox_" + controlNumber;
        addressTextbox.ID = "AddressTextbox_" + controlNumber;
        phoneTextbox.ID = "phoneTextbox_" + controlNumber;
        fromDateTextbox.ID = "fromDateTextbox_" + controlNumber;
        toDateTextbox.ID = "toDateTextbox_" + controlNumber;
        supervisorTextbox.ID = "supervisorTextbox_" + controlNumber;
        jobTitleTextbox.ID = "jobTitleTexbox_" + controlNumber;
        dutiesTextbox.ID = "dutiesTextbox_" + controlNumber;
        dutiesTextbox.Width = 250;
        hoursTextbox.ID = "hoursTexbox_" + controlNumber;
        wageTextbox.ID = "wageTexbox_" + controlNumber;
        leavingTextbox.ID = "leavingTexbox_" + controlNumber;
        leavingTextbox.Width = 250;
        //Label text
        employerLabel.Text = "Employer: ";
        addressLabel.Text = "Address: ";
        phoneLabel.Text = "Phone #: ";
        toDateLabel.Text = "To Date: ";
        fromDateLabel.Text = "From Date: ";
        supervisorLabel.Text = "Supervisor: ";
        jobTitleLabel.Text = "Job Title: ";
        dutiesLabel.Text = "Major Duties: ";
        hoursLabel.Text = "Hours Per Week:";
        wageLabel.Text = "Final Wage: $";
        leavingLabel.Text = "Reason for Leaving: ";

        //Regular Expression and Required field validators
        var addressRegEx = new RegularExpressionValidator();
        var addressRequired = new RequiredFieldValidator();
        addressRequired.Text = "Address is Required";
        addressRequired.ErrorMessage = " Please Enter less than 50 characters for address";
        addressRequired.ID = "addressRequired" + controlNumber; addressRequired.ControlToValidate = addressTextbox.Text;
        addressRegEx.ValidationExpression = ".{0,50}"; 
        addressRegEx.ControlToValidate = addressTextbox.Text;

        // add the label and textbox to the panel, then add the panel to the form
        newPanel.Controls.Add(new LiteralControl("<table><tr>"));
        newPanel.Controls.Add(new LiteralControl("<br />"));
        newPanel.Controls.Add(new LiteralControl("<td class='title-text'  >"));
        newPanel.Controls.Add(employerLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'width='180px'>"));
        newPanel.Controls.Add(employerTextbox);
        newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text' >"));
        newPanel.Controls.Add(addressLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(addressTextbox); newPanel.Controls.Add(addressRegEx); newPanel.Controls.Add(addressRequired);
        newPanel.Controls.Add(new LiteralControl("</td>"));

        newPanel.Controls.Add(new LiteralControl("<td class='title-text'>"));
        newPanel.Controls.Add(phoneLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(phoneTextbox);
        newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text'>"));
        newPanel.Controls.Add(fromDateLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(fromDateTextbox);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(toDateLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(toDateTextbox);
        newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text'>"));
        newPanel.Controls.Add(supervisorLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(supervisorTextbox);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(jobTitleLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(jobTitleTextbox);
        newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text'>"));
        newPanel.Controls.Add(dutiesLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text' colspan='2'>"));
        newPanel.Controls.Add(dutiesTextbox);

        newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text'>"));
        newPanel.Controls.Add(hoursLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(hoursTextbox);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(wageLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
        newPanel.Controls.Add(wageTextbox);
        newPanel.Controls.Add(new LiteralControl("</td></tr><tr><td class='title-text'>"));
        newPanel.Controls.Add(leavingLabel);
        newPanel.Controls.Add(new LiteralControl("</td><td class='title-text' colspan='2'>"));
        newPanel.Controls.Add(leavingTextbox);
        newPanel.Controls.Add(new LiteralControl("</td></tr></table>"));
        form1.Controls.Add(newPanel);

    }

    protected int TotalNumberAdded
    {
        get { return (int)(ViewState["TotalNumberAdded"] ?? 0); }
        set { ViewState["TotalNumberAdded"] = value; }
    }
    protected void Button1_Click(object sender, EventArgs e)
    {

        // Increase the number added and add the new label and textbox
        TotalNumberAdded++;
        addcontrolsemployment(TotalNumberAdded);

    } 
```

更新：我遇到的一个主要问题是我希望它在显示下一个表单之前验证按钮单击。但我不能通过对象，我可能很笨，但我不知道该怎么做。就像我在 ASP.net 页面中拥有对象一样，这不会有问题，但因为我是在 c# 代码中创建这些对象，所以我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:28:54.167

我的建议是为您要检查的每个控件分配一个唯一的**名称。**

在 PostBack 中，您应该能够[通过 Request.Form](https://stackoverflow.com/questions/564289/read-post-data-submitted-to-asp-net-form)系统地检查这些内容。

另一种方法是逐个添加条目，仅提供一个带有“添加”按钮的输入面板。当用户添加一个条目时，它会被发送到服务器，验证并保存在 Session 中，然后将保存的条目显示给用户。

这种方法使验证变得容易得多，但显然您有更多往返服务器的次数。Ajax 可以帮助减少这里的开销。

# xquery - 如何有效地从对许多大型文档的搜索中返回两个索引元素？

> ID：12565717
> 
> 赞同：0
> 
> 时间：2012-09-24T13:08:52.123
> 
> 标签：xquery, marklogic

我有一个 marklogic (4.2) 数据库，其中包含数以万计的大型、复杂（有些较小，但大的是 10MB+）文档，这些文档正在使用相当复杂的、以编程方式构建的 search:search 调用进行搜索. 在正常使用中，使用分页一次返回几个结果，并生成匹配的片段，它工作正常。现在，其中一位客户端开发人员需要一次返回该查询的*所有*结果，即使在他构建了一个返回数据库中所有文档的查询的情况下也是如此。不过，他并不关心比赛的大部分内容。只有几个 ID 元素（一个数字和一个自由文本），它们都被索引，并且它们总是在文档中的相同 xpath 中。

问题是，我无法想出一种有效的方法来查询这么大的数据集中的两个元素。它总是需要加载整个文档，而查询只是在长草中消失了几万次，并且基本上永远不会返回。

我尝试在其中一个元素上使用元素值词典，并通过搜索过滤。这很快就会返回，但有几个缺点： * 它返回误报。这不一定会破坏交易，但不是最理想的。* 它只获取其中一个元素；一旦我尝试迭代该列表并获取他感兴趣的另一个元素，不出所料地需要永远（因为我们要为每次匹配加载整个文档。）

我想知道是否声明一个包含这两个元素的字段可能会有所帮助（我可以使用词典来获取其中一个值，然后在该字段中查找它，而不是加载整个文档来获取一个 ID，）但我以前从未使用过字段，而且看起来它们总是单词查询，而不是元素查询，这对于我需要用它们做的事情来说听起来并不理想。

我还认为可能在文档中创建一个新元素，其中包含两个 ID 的编码形式，这将允许我创建一个包含两者的索引，然后使用我上面提到的词典方法将其缩小到至少匹配的文档未过滤的搜索。不过，这感觉像是一种非常老套的方法。

我真正在寻找的是一种方式来表达“这是一个搜索，这里是我感兴趣的（索引）元素，现在获取它们的值以匹配文档”。有没有办法做到这一点？

我觉得答案是“不”，但值得一问。

如果没有，是否有人对哪些替代方法可能最有效提出建议？

谢谢。

* * *

# 文档格式示例：

```
<doc:entity>
  <doc:metadata>
    <doc:sap-metadata>
      <doc:info>
        <doc:id>12345678</doc:id>
        <doc:number>AS-1990 13:45</doc:number>
        <!-- more document info here -->
      </doc:info>
    </doc:sap-metadata>
  </doc:metadata>
  <doc:content>
    <!-- a lot of text content here... -->
  </doc:content>
</doc:entity> 
```

# 搜索代码（初剪）：

搜索代码一点也不聪明。只是一个标准的搜索：带有搜索词的搜索调用和（至少一个约束 - 为了清楚起见，我坚持简单的情况）：

```
search:search(fn:concat("relevant:1 ", $search-term), $search-options) 
```

`$search-term`是用户提供的明文搜索。`$search-options`是相当多的xml，但我不认为包含任何异国情调；只是一堆约束和方面定义和自定义片段，由以下生成：

```
declare function func:do-snippet(
  $result as node(),
  $ctsquery as schema-element(cts:query),
  $options as element(search:transform-results)?
) as element(search:snippet)
{
  element search:snippet{
    element search:match {
      fn:doc(xdmp:node-uri($result))/doc:entity/doc:metadata/doc:sap-metadata/doc:info/doc:id,
      fn:doc(xdmp:node-uri($result))/doc:entity/doc:metadata/doc:sap-metadata/doc:info/doc:number
    }
  }
}; 
```

# 搜索代码（第二切）：

这个是使用 id 上的 element-value-lexicon 生成与搜索词匹配的 ID 列表（显然未过滤），然后使用该 id 查询文档编号：

```
let $query := ...
let $options := ...
for $id in cts:element-values(fn:QName("http://my.document.namespace", "id"), (), (), cts:query(search:parse($query, $options)))
  return element document {
    attribute id {$id},
    attribute number {
      cts:element-values(fn:QName("http://my.document/namespace", "number"), (), (), cts:element-value-query(fn:QName("http://my.document.namespace", "id"), $id ))
    }} 
```

第一个`cts:element-values`调用返回很好而且很快，但是迭代响应并`cts:element-values`为每个响应做另一个真的很慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:27:25.117

您可以尝试几种方法：流式传输结果、共现和编码的词典值。

您已经接触过编码的词典值，我认为这将是最有效的方法。它可能感觉像是一种 hack，但它在道德上等同于基于函数的索引。它应该可以很好地扩展。

还使用范围索引和词典函数将是`cts:element-value-co-occurrences`. 这不会像编码值那样缩放，但它的前期工作较少。一定要考虑“地图”选项：[http ://docs.marklogic.com/cts:element-value-co-occurrences](http://docs.marklogic.com/cts:element-value-co-occurrences)

最后，您可以简单地给开发人员他想要的东西。用于`search:parse`正常解析查询，或使用`cts:query`构造函数构建它。然后调用`cts:search`以获取匹配的节点并返回它们。结果会很大，但这是不可避免的。您可能会遇到`XDMP-EXPNTREECACHEFULL`错误：查看[http://blakeley.com/blogofile/2012/03/19/let-free-style-and-streaming/](http://blakeley.com/blogofile/2012/03/19/let-free-style-and-streaming/)以了解其中的一种方法。它可能需要在双方进行一些棘手的编码，但这可以让您返回任意大的结果序列。

# codeigniter - CodeIgniter - 如何在助手中访问 base_url()？

> ID：12565720
> 
> 赞同：3
> 
> 时间：2012-09-24T13:08:59.760
> 
> 标签：codeigniter

我正在扩展 URL 助手（MY_url_helper）。如何在我的辅助函数中访问 base_url()？我实际上覆盖了base_url()，所以我需要调用原始的base_url。

**编辑1：**

这不起作用：

```
$CI =& get_instance();
$CI->load->helper('url');
$base_url = $CI->base_url(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:38:01.787

不幸的是，内置帮助函数是在全局 php 命名空间中定义的，一旦定义了一个名称的函数，`base_url`您将无法定义另一个具有相同名称的函数，因此您无法`base_url`从原始助手加载原始函数“其他地方”并使用它。

出于这个原因，CI 的内置帮助文件在 if 块中定义函数，如下所示：

```
if ( ! function_exists('FUNCTION_NAME'))
// ...
} 
```

因此，即使您在覆盖的版本中加载原始帮助文件，它也不会产生致命错误，但也不会做任何有意义的事情。

在您的具体情况下，base_url 的实现基本上是：

```
return get_instance()->config->base_url($uri); 
```

您可以将其提升到覆盖的`base_url`.

# google-tv - 可以更改鼠标指针吗？

> ID：12565722
> 
> 赞同：2
> 
> 时间：2012-09-24T13:09:08.003
> 
> 标签：google-tv

是否可以更改鼠标指针的外观？（即显示等待符号）

问候

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:44:03.697

Android SDK 不提供任何选项来执行此操作。

# coldfusion - 使用包含文件的函数会使coldfusion 忘记导入。这是正常的吗？

> ID：12565731
> 
> 赞同：5
> 
> 时间：2012-09-24T13:09:47.177
> 
> 标签：coldfusion, coldfusion-9, coldfusion-10, cfimport

我注意到，当我调用以前包含的 (cfinclude) .cfm 文件的函数时，此时发生的所有冷融合导入 (cfimport) 都被遗忘了。就像你没有导入任何东西一样。我发现了这种非常奇怪的行为，因此我将其隔离，但结果保持不变，即使在冷融合 10 中也是如此。

我的设置：

/例子

*   函数.cfm
*   索引.cfm
*   /组件
    *   我的CFC.cfc

函数.cfm：

```
`<cfscript>`
  function test(){
    return "test";
  }
`</cfscript>` 
```

组件/MyCFC.cfc：

```
component  output="false"{} 
```

索引.cfm：

```
`<cfscript>`
  include "functions.cfm";
  import components.MyCFC;

  foo = test();
  bar = new MyCFC();
`</cfscript>` 
```

此代码将引发冷融合错误：“找不到 ColdFusion 组件或接口 MyCFC”。当`foo = test();`被删除或放置在 之后`bar = new MyCFC();`，代码运行得很好。

导入是放在包含之前还是之后都没有关系。每当调用包含的函数时，都会忘记导入。

这是一个错误还是应该以这种方式表现？

在coldfusion 9,0,0,251028和coldfusion 10,282462中测试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:05:01.260

因为我做了很多导入，我最近遇到了一些奇怪的行为，并报告它做 CF9-bugbase： [https ://bugbase.adobe.com/index.cfm?event=bug&id=3288035](https://bugbase.adobe.com/index.cfm?event=bug&id=3288035)

ColdFusion 仅解析当前文件的导入，每当您调用不同的文件时，就像“执行上下文”切换到带有导入的文件一样。因此，在您执行*new* ColdFusion 的情况下，会在*functions.cfm*中查找导入。然后，当您调用当前文件的方法时，它会切换回来并找到导入。

如果我是对的，如果您`bar = new MyCFC();`在导入后直接执行，您的代码应该可以工作。*或者，您可以在index.cfm*中定义另一个方法并在创建类之前调用​​它。

要解决该错误，您需要确保在“上下文切换”发生之前解决导入（在对象生命周期中首次使用时）。所以`new MyCFC();`在外部方法之前调用。

@Adobe：解决这个问题会很好；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T14:55:28.723

我和@PeterBoughton 在一起，这听起来像是一个错误。我也找不到类似的错误报告，所以我会继续提交它。同时，如果您取消“导入”，您应该仍然可以使用以下方式引用 CFC：

```
bar = new components.MyCFC(); 
```

很棒的收获！

# xcode - mac代码错误

> ID：12565732
> 
> 赞同：-1
> 
> 时间：2012-09-24T13:09:49.577
> 
> 标签：xcode, macos, compiler-construction

我发现 MAC 代码中的这个链接错误找不到显示它们的原因:(。

请帮忙。

```
NetworkHandler::HandleSipPacket(char*, int) in networkhandler.o
  "MsSipAgent::BuildSessionProgressToInvite(std::string const&)", referenced from:
      NetworkHandler::HandleSipPacket(char*, int) in networkhandler.o
  "MsSipAgent::Build200OkResponseToInvite(std::string const&, std::string const&)", referenced from:
      NetworkHandler::HandleSipPacket(char*, int) in networkhandler.o
  "MsSipAgent::BuildDeclineMessageToInvite()", referenced from:
      NetworkHandler::HandleSipPacket(char*, int) in networkhandler.o
  "MsSipAgent::BuildAckMessageForFinalResponse()", referenced from:
      NetworkHandler::HandleSipPacket(char*, int) in networkhandler.o
  "MsSipAgent::BuildReInviteRequest(std::string&)", referenced from:
      NetworkHandler::SendReinvite() in networkhandler.o
  "MsSipAgent::BuildByeRequestToInvite()", referenced from:
      NetworkHandler::Hangup() in networkhandler.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

特别请帮助我理解这一行：

> ld：未找到体系结构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:18:06.347

该行是之前报告的问题的摘要。链接器找不到属于名为 的类的许多函数`MsSipAgent`。据推测，这是您应该在项目中构建的一些 C++ 东西（或作为库添加）。

# r - 如何从R中的结构对象中提取数值

> ID：12565733
> 
> 赞同：6
> 
> 时间：2012-09-24T13:09:53.413
> 
> 标签：r, structure, numeric, names

我需要从一个变量中提取数值，该变量是一个结合了数值和名称的结构

```
structure(c(-1.14332132657709, -1.1433213265771, -1.20580568266868, 
-1.75735158849487, -1.35614113300058), .Names = c("carbon", 
"nanotubes", "potential", "neuron", "cell", "adhesion")) 
```

最后我想要一个只有这些信息的向量

```
c(-1.14332132657709, -1.1433213265771, -1.20580568266868, 
-1.75735158849487, -1.35614113300058) 
```

我该怎么做？非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T13:19:33.363

两者都`as.numeric()`这样`unname()`做：

```
R> structure(c(-1.14332132657709, -1.1433213265771, -1.20580568266868,
+              -1.75735158849487, -1.35614113300058, NA),
+            .Names = c("carbon", "nanotubes", "potential", 
+            "neuron", "cell", "adhesion"))
   carbon nanotubes potential    neuron      cell  adhesion 
 -1.14332  -1.14332  -1.20581  -1.75735  -1.35614        NA 
R> foo
   carbon nanotubes potential    neuron      cell  adhesion 
 -1.14332  -1.14332  -1.20581  -1.75735  -1.35614        NA 
R>
R> as.numeric(foo)            ## still my 'default' approach
[1] -1.14332 -1.14332 -1.20581 -1.75735 -1.35614       NA
R>
R> unname(foo)                ## maybe preferable though
[1] -1.14332 -1.14332 -1.20581 -1.75735 -1.35614       NA
R> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:16:46.223

```
myVec <- structure(c(-1.14332132657709, -1.1433213265771, -1.20580568266868, 
  -1.75735158849487, -1.35614113300058), .Names = c("carbon", 
  "nanotubes", "potential", "neuron", "cell"))

as.numeric(myVec)
# [1] -1.143321 -1.143321 -1.205806 -1.757352 -1.356141 
```

或者

```
names(myVec) <- NULL 
```

**编辑：**

`unname`因为原子向量只是`names(obj) <- NULL`有一些多余的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T13:20:04.663

怎么样`unname`？

```
> myVec <- structure(c(-1.14332132657709, -1.1433213265771, -1.20580568266868, 
  -1.75735158849487, -1.35614113300058), .Names = c("carbon", 
  "nanotubes", "potential", "neuron", "cell"))

+ + > > unname(myVec)
[1] -1.143321 -1.143321 -1.205806 -1.757352 -1.356141 
```

# c# - 使用 Protobuf .net 反序列化单个结构字段

> ID：12565734
> 
> 赞同：4
> 
> 时间：2012-09-24T13:09:54.353
> 
> 标签：c#, protobuf-net

我有一个关于使用 Protobuf .Net 进行反序列化的问题。我正在尝试用它替换 XMLSerializer，但我找不到从文件中反序列化单个字段的方法。
如果文件被修改，我需要信息，这是保存结构中的字段之一。

甚至可能吗？如果是，我可以寻求帮助吗？

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T13:54:09.767

在大多数情况下，坦率地说，你可以反序列化整个事情——它会很快，等等。但是，如果你*真的*想限制它，有几个选项。

最简单的方法是*创建一个较小的模型*，上面只包含您想要的信息。所以：如果您的原始模型上有 46 个字段，其中 5 个是集合等 - 但您只想要`Version`字段 12 中的字段，那么：

```
[ProtoContract]
public class InsertNameHere {
    [ProtoMember(12)]
    public int Version {get;set;}
} 
```

现在反序列*化*：

```
var obj = Serializer.Deserialize<InsertNameHere>(source);
int version = obj.Version; 
```

这将起作用，因为 protobuf-net 是基于*合同*的；它不必是完全相同的类型，只要它看起来足够接近即可。但是，更高级的方法是使用`ProtoReader`：

```
int version = 0;
using (var reader = new ProtoReader(source, RuntimeTypeModel.Default, null))
{
    int field;
    bool keepReading = true;
    while ((field = reader.ReadFieldHeader()) > 0 && keepReading)
    {   
        switch (field)
        {
            case 12:
                version = reader.ReadInt32();
                // STOP LOOPING (leaves the stream partly-read)
                keepReading = false;
                break; 
            default:
                reader.SkipField();
                break;
        }
    }
} 
```

您可能想要使用上述内容的原因是它可以*更早地停止查找*- 即，一旦我们找到我们的字段 12，我们就可以在不处理文件的其余部分的情况下杀死阅读器。通常，如果我们知道数据很大并且我们不想要太多数据，我只会使用第二种方法。

*从技术上讲*， protobuf 是一种可附加格式，有一个小问题，所以*理论上*文件末尾可能还有另一个“字段 12”。按照规范，它是“最后的价值获胜”，所以上面的短路*可以*（理论上）给你一个不同的答案。然而！这是非常不可能的，您通常会*知道*您是否正在利用附加消息。这根本不适用于大多数人。

# python - scipy 函数总是返回一个 numpy 数组

> ID：12565735
> 
> 赞同：1
> 
> 时间：2012-09-24T13:09:54.560
> 
> 标签：python, numpy, scipy, duck-typing, dynamic-typing

我遇到了一个 scipy 函数，无论传递给它什么，它似乎都会返回一个 numpy 数组。在我的应用程序中，我只需要能够传递标量和列表，因此唯一的“问题”是当我将标量传递给函数时，会返回一个包含一个元素的数组（当我期望一个标量时）。我应该忽略这种行为，还是修改函数以确保在传递标量时返回标量？

示例代码：

```
#! /usr/bin/env python

import scipy
import scipy.optimize
from numpy import cos

# This a some function we want to compute the inverse of
def f(x):
    y = x + 2*cos(x)
    return y

# Given y, this returns x such that f(x)=y
def f_inverse(y):

    # This will be zero if f(x)=y
    def minimize_this(x):
        return y-f(x)

    # A guess for the solution is required
    x_guess = y
    x_optimized = scipy.optimize.fsolve(minimize_this, x_guess) # THE PROBLEM COMES FROM HERE
    return x_optimized

# If I call f_inverse with a list, a numpy array is returned
print f_inverse([1.0, 2.0, 3.0])
print type( f_inverse([1.0, 2.0, 3.0]) )

# If I call f_inverse with a tuple, a numpy array is returned
print f_inverse((1.0, 2.0, 3.0))
print type( f_inverse((1.0, 2.0, 3.0)) )

# If I call f_inverse with a scalar, a numpy array is returned
print f_inverse(1.0)
print type( f_inverse(1.0) )

# This is the behaviour I expected (scalar passed, scalar returned).
# Adding [0] on the return value is a hackey solution (then thing would break if a list were actually passed).
print f_inverse(1.0)[0] # <- bad solution
print type( f_inverse(1.0)[0] ) 
```

在我的系统上，这个输出是：

```
[ 2.23872989  1.10914418  4.1187546 ]
<type 'numpy.ndarray'>
[ 2.23872989  1.10914418  4.1187546 ]
<type 'numpy.ndarray'>
[ 2.23872989]
<type 'numpy.ndarray'>
2.23872989209
<type 'numpy.float64'> 
```

我正在使用 MacPorts 提供的 SciPy 0.10.1 和 Python 2.7.3。

**解决方案**

阅读下面的答案后，我选择了以下解决方案。将返回行替换为`f_inverse`：

```
if(type(y).__module__ == np.__name__):
    return x_optimized
else:
    return type(y)(x_optimized) 
```

这里`return type(y)(x_optimized)`导致返回类型与调用函数的类型相同。不幸的是，如果 y 是 numpy 类型，则这不起作用，因此`if(type(y).__module__ == np.__name__)`用于[使用此处提出的想法检测 numpy 类型](https://stackoverflow.com/questions/12569452/how-to-identify-numpy-types-in-python/12569453#12569453)并将它们从类型转换中排除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:21:05.523

实现的第一行`scipy.optimize.fsolve`是：

`x0 = array(x0, ndmin=1)`

这意味着您的标量将变成一个 1 元素序列，而您的 1 元素序列将基本保持不变。

它似乎工作的事实是一个实现细节，我会重构您的代码以不允许将标量发送到`fsolve`. 我知道这似乎违背了鸭子类型，但是该函数要求一个`ndarray`用于该参数的参数，因此您应该尊重接口对实现更改的鲁棒性。但是，我没有看到有条件地使用`x_guess = array(y, ndmin=1)`for 将标量转换为`ndarray`包装函数中的任何问题，并在必要时将结果转换回标量。

这是`fsolve`函数文档字符串的相关部分：

> ```
> def fsolve(func, x0, args=(), fprime=None, full_output=0,
>            col_deriv=0, xtol=1.49012e-8, maxfev=0, band=None,
>            epsfcn=0.0, factor=100, diag=None):
>     """
>     Find the roots of a function.
> 
>     Return the roots of the (non-linear) equations defined by
>     ``func(x) = 0`` given a starting estimate.
> 
>     Parameters
>     ----------
>     func : callable f(x, *args)
>         A function that takes at least one (possibly vector) argument.
>     x0 : ndarray
>         The starting estimate for the roots of ``func(x) = 0``.
> 
>     ----SNIP----
> 
>     Returns
>     -------
>     x : ndarray
>         The solution (or the result of the last iteration for
>         an unsuccessful call).
> 
>     ----SNIP---- 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T15:04:51.357

以下是如何将 Numpy 数组转换为列表以及将 Numpy 标量转换为 Python 标量的方法：

```
>>> x = np.float32(42)
>>> type(x)
<type 'numpy.float32'>
>>> x.tolist()
42.0 
```

换句话说，该`tolist`方法`np.ndarray`专门处理标量。

这仍然会给您留下单元素列表，但这些列表很容易以通常的方式处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T14:19:34.417

我猜wims的回答确实已经说得很清楚了，但这也许会使差异更加清晰。

numpy 返回的标量`array[0]`应该（几乎？）与标准 python 浮点数完全兼容：

```
a = np.ones(2, dtype=float)
isinstance(a[0], float) == True # even this is true. 
```

在大多数情况下，1 大小的数组已经兼容标量和列表，尽管例如它是一个可变对象，而浮点不是：

```
a = np.ones(1, dtype=float)
import math
math.exp(a) # works
# it is not isinstance though
isinstance(a, float) == False
# The 1-sized array works sometimes more like number:
bool(np.zeros(1)) == bool(np.asscalar(np.zeros(1)))
# While lists would be always True if they have more then one element.
bool([0]) != bool(np.zeros(1))

# And being in place might create confusion:
a = np.ones(1); c = a; c += 3
b = 1.; c = b; c += 3
a != b 
```

因此，如果用户不应该知道它，我认为第一个很好，第二个很危险。

您还可以使用`np.asscalar(result)`将大小为 1 的数组（任何维度）转换为正确的 python 标量：

在[29]中：类型（np.asscalar（a[0]））在[29]中：浮点数

如果您想确保不应该了解 numpy 的用户不会感到意外，那么如果传入了标量，您至少必须获取 0 的元素。如果用户应该知道 numpy，那么文档就是可能一样好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T14:29:40.933

正如@wim 指出的那样，`fsolve`将您的标量转换为 a `ndarray`of shape`(1,)`并返回一个 shape 数组`(1,)`。

如果您真的想获得一个标量作为输出，您可以尝试将以下内容放在函数的末尾：

```
if solution.size == 1:
    return solution.item()
return solution 
```

（该`item`方法复制一个数组元素并返回一个标准 Python 标量）

# c# - 将基类转换为派生类

> ID：12565736
> 
> 赞同：146
> 
> 时间：2012-09-24T13:09:54.810
> 
> 标签：c#, inheritance, casting, downcast

在 C# 中是否可以将基类对象显式转换为其派生类之一？目前认为我必须为我的派生类创建一个构造函数，该构造函数接受基类对象作为参数并复制属性值。我真的不喜欢这个想法，所以如果可能的话，我想避免它。

这似乎不应该工作（对象被实例化为新基，因此不应为派生类的额外成员分配内存）但 C# 似乎允许我这样做：

```
class BaseClass
{
  ... some stuff ...
}

class DerivedClass : BaseClass
{
    public bool MyDerivedProperty{ get; set; }
}

static void Main(string[] args)
{
    BaseClass myBaseObject = new BaseClass();
    DerivedClass myDerivedObject = myBaseObject as DerivedClass;

    myDerivedObject.MyDerivedProperty = true;
} 
```

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-09-24T13:14:01.043

不，没有像你说的那样转换类的内置方法。最简单的方法是按照您的建议进行操作：创建一个`DerivedClass(BaseClass)`构造函数。其他选项基本上会出现以自动将属性从基础复制到派生实例，例如使用反射。

`as`正如我确定您已经看到的那样，您使用发布的代码将编译，但在您运行它时会抛出空引用异常，因为`myBaseObject as DerivedClass`将评估为`null`，因为它不是`DerivedClass`.

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-01-07T20:39:43.143

那是不可能的。但你可以使用像[AutoMapper这样的对象映射器](http://automapper.org/)

**编辑**

我想推荐一个更简单的对象映射器：[TinyMapper](http://tinymapper.net/)。AutoMapper 现在使用起来非常复杂。我不再使用它了。TinyMapper 涵盖了大多数用例，并且更加简单和超级快速。

例子：

```
//In app startup
TinyMapper.Bind<Person, PersonDto>();

//Usage
var personDto = TinyMapper.Map<PersonDto>(person); 
```

* * *

AutoMapper（我认为是旧版本）的示例，供那些仍然想使用它的人使用：

```
class A
{
    public int IntProp { get; set; }
}
class B
{
    public int IntProp { get; set; }
    public string StrProp { get; set; }
} 
```

在 global.asax 或应用程序启动中：

```
AutoMapper.Mapper.CreateMap<A, B>(); 
```

用法：

```
var b = AutoMapper.Mapper.Map<B>(a); 
```

它可以通过流畅的 API 进行配置。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-09-10T17:50:41.313

我找到了一种解决方案，并不是说它是最好的，但我觉得它很干净，不需要对我的代码进行任何重大更改。我的代码看起来和你的很相似，直到我意识到它不起作用。

**我的基类**

```
public class MyBaseClass
{
   public string BaseProperty1 { get; set; }
   public string BaseProperty2 { get; set; }
   public string BaseProperty3 { get; set; }
   public string BaseProperty4 { get; set; }
   public string BaseProperty5 { get; set; }
} 
```

**我的派生类**

```
public class MyDerivedClass : MyBaseClass
{
   public string DerivedProperty1 { get; set; }
   public string DerivedProperty2 { get; set; }
   public string DerivedProperty3 { get; set; }
} 
```

**上一个获取填充基类的方法**

```
public MyBaseClass GetPopulatedBaseClass()
{
   var myBaseClass = new MyBaseClass();

   myBaseClass.BaseProperty1 = "Something"
   myBaseClass.BaseProperty2 = "Something else"
   myBaseClass.BaseProperty3 = "Something more"
   //etc...

   return myBaseClass;
} 
```

**在我尝试这个之前，这给了我一个无法投射的错误**

```
public MyDerivedClass GetPopulatedDerivedClass()
{
   var newDerivedClass = (MyDerivedClass)GetPopulatedBaseClass();

   newDerivedClass.UniqueProperty1 = "Some One";
   newDerivedClass.UniqueProperty2 = "Some Thing";
   newDerivedClass.UniqueProperty3 = "Some Thing Else";

   return newDerivedClass;
} 
```

我如下更改了我的代码，现在它似乎可以工作并且更有意义：

**老的**

```
public MyBaseClass GetPopulatedBaseClass()
{
   var myBaseClass = new MyBaseClass();

   myBaseClass.BaseProperty1 = "Something"
   myBaseClass.BaseProperty2 = "Something else"
   myBaseClass.BaseProperty3 = "Something more"
   //etc...

   return myBaseClass;
} 
```

**新的**

```
public void FillBaseClass(MyBaseClass myBaseClass)
{
   myBaseClass.BaseProperty1 = "Something"
   myBaseClass.BaseProperty2 = "Something else"
   myBaseClass.BaseProperty3 = "Something more"
   //etc...
} 
```

**老的**

```
public MyDerivedClass GetPopulatedDerivedClass()
{
   var newDerivedClass = (MyDerivedClass)GetPopulatedBaseClass();

   newDerivedClass.UniqueProperty1 = "Some One";
   newDerivedClass.UniqueProperty2 = "Some Thing";
   newDerivedClass.UniqueProperty3 = "Some Thing Else";

   return newDerivedClass;
} 
```

**新的**

```
public MyDerivedClass GetPopulatedDerivedClass()
{
   var newDerivedClass = new MyDerivedClass();

   FillBaseClass(newDerivedClass);

   newDerivedClass.UniqueProperty1 = "Some One";
   newDerivedClass.UniqueProperty2 = "Some Thing";
   newDerivedClass.UniqueProperty3 = "Some Thing Else";

   return newDerivedClass;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-24T13:16:35.020

您可以自己实现转换，但我不建议这样做。如果您想这样做以扩展现有对象的功能，请查看[装饰器模式。](https://www.dofactory.com/net/decorator-design-pattern)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T13:14:38.457

不，没有内置的转换。您需要创建一个构造函数，就像您提到的那样，或者其他一些转换方法。

此外，由于 BaseClass 不是 DerivedClass，因此 myDerivedObject 将为 null，并且上面的最后一行将引发 null ref 异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T13:15:23.307

不，这是不可能的。唯一可能的方法是

```
static void Main(string[] args)
{
    BaseClass myBaseObject = new DerivedClass();
    DerivedClass myDerivedObject = myBaseObject as DerivedClass;

    myDerivedObject.MyDerivedProperty = true;
} 
```

# php - 一个页面上有多个 AJAX RSS 阅读器？

> ID：12565739
> 
> 赞同：2
> 
> 时间：2012-09-24T13:09:57.257
> 
> 标签：php, ajax, rss

我以前没有在这里发过帖子，但我在发帖前尝试做一些研究，以免浪费任何人的时间，但我没有发现有人发过类似的问题。

我在一个页面上获取两个 RSS 提要时遇到了这个问题，我编辑了[http://www.w3schools.com/php/php_ajax_rss_reader.asp](http://www.w3schools.com/php/php_ajax_rss_reader.asp)示例。基本上当我从 html onload="runscripts();" 函数：showRSS('Google'); rssevents('事件'); 只有其中一个填充 DIV。我确实让它在我身边工作，但偶尔一个提要会填充另一个 DIV，即使变量完全不同。

本质上，我将代码加倍并创建了不同的变量，以便希望我的单个页面上有两个 rss 提要？但它不起作用。

欢迎任何帮助:) 甚至为我指明正确的方向！干杯:)

继承人的代码：

body on load 调用两个函数：

```
function runscripts(){  
        showRSS('Google');
        rssevents('events');        
} 
```

Javascript 标头：

```
function showRSS(str)
    {
    if (str.length==0)
      { 
      document.getElementById("rssOutput").innerHTML="";
      return;
      }
    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }

    if(str=='Google')
    {
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("rssOutput").innerHTML=xmlhttp.responseText;
        }
      }
      xmlhttp.open("GET","getrss.php?q="+str,true);
      xmlhttp.send();
    }

    else{
        xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("upcomingevents").innerHTML=xmlhttp.responseText;
        }
      }
        xmlhttp.open("GET","getrssEvents.php?q="+str,true);
        xmlhttp.send();
    }

    }
    function rssevents(str)
    {
    if (str.length==0)
      { 
      document.getElementById("upcomingevents").innerHTML="";
      return;
      }

    if (window.XMLHttpRequest)
      {// code for IE7+, Firefox, Chrome, Opera, Safari
      xmlhttp=new XMLHttpRequest();
      }
    else
      {// code for IE6, IE5
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
      }

    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("upcomingevents").innerHTML=xmlhttp.responseText;
        }
      }

    xmlhttp.open("GET","getrssEvents.php?q="+str,true);
    xmlhttp.send();
    } 
```

php代码：

getrss.php：

```
<?php
//get the q parameter from URL
$q=$_GET["q"];

//find out which feed was selected
if($q=="Google")
  {
  $xml=("http://news.google.com/news?ned=us&topic=h&output=rss");
  }
elseif($q=="MSNBC")
  {
  $xml=("http://rss.msnbc.msn.com/id/3032091/device/rss/rss.xml");
  }

$xmlDoc = new DOMDocument();
$xmlDoc->load($xml);

//get elements from "<channel>"
$channel=$xmlDoc->getElementsByTagName('channel')->item(0);
$channel_title = $channel->getElementsByTagName('title')
->item(1)->childNodes->item(1)->nodeValue;
$channel_link = $channel->getElementsByTagName('link')
->item(1)->childNodes->item(1)->nodeValue;
$channel_desc = $channel->getElementsByTagName('description')
->item(1)->childNodes->item(1)->nodeValue;

//get and output "<item>" elements
$x=$xmlDoc->getElementsByTagName('item');
$k=4;
$findme = '<img src';

for ($i=1; $i<=$k; $i++)
  {
  $item_title=$x->item($i)->getElementsByTagName('title')
  ->item(0)->childNodes->item(0)->nodeValue;
  $item_link=$x->item($i)->getElementsByTagName('link')
  ->item(0)->childNodes->item(0)->nodeValue;
  $item_desc=$x->item($i)->getElementsByTagName('description')
  ->item(0)->childNodes->item(0)->nodeValue;

  $pos = strpos($item_desc,$findme);

  if($pos==false)
  {
      $k=$k+1;
  }
  else{
  echo ("<p><div class='rsstitle' style='height:120px;'><div class='rsstable2'>" . $item_desc); 
  echo ("</div><div class='rsstable'><a href='" . $item_link . "' target='_blank'>" . $item_title . "</a></div></div><p/>");
  }

  }
?> 
```

getrssEvents.php：

```
<?php
//get the q parameter from URL
$q=$_GET["q"];

//find out which feed was selected
if($q=="Google")
  {
  $xml=("http://news.google.com/news?ned=us&topic=h&output=rss");
  }
elseif($q=="events")
  {
  $xml=("http://groupspaces.com/LoughboroughFinanceSociety/api/events?alt=rss");
  }

$xmlDoc2 = new DOMDocument();
$xmlDoc2->load($xml);

//get elements from "<channel>"
$channel=$xmlDoc2->getElementsByTagName('channel')->item(0);
$channel_title = $channel->getElementsByTagName('title')
->item(0)->childNodes->item(0)->nodeValue;
$channel_link = $channel->getElementsByTagName('summary')
->item(0)->childNodes->item(0)->nodeValue;
//$channel_desc = $channel->getElementsByTagName('gs:location')
//->item(0)->childNodes->item(0)->nodeValue;

//get and output "<item>" elements
$x=$xmlDoc2->getElementsByTagName('item');
for ($i=0; $i<=2; $i++)
  {
  $item_title=$x->item($i)->getElementsByTagName('title')
  ->item(0)->childNodes->item(0)->nodeValue;
  $item_link=$x->item($i)->getElementsByTagName('summary')
  ->item(0)->childNodes->item(0)->nodeValue;
  //$item_desc=$x->item($i)->getElementsByTagName('gs')
  ///->item(0)->childNodes->item(0)->nodeValue;

  //echo ("<div class='rsstitle'>" . $item_desc);   
  //echo ("<a  href='" . $item_link . "'>" . $item_title . "</a></div><p/>");
    echo(" <div class='rssevents'><div class='rsseventtitle'> ".$item_title."</div>". $item_link."</div>");

  }
?> 
```

为任何帮助而欢呼。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:16:11.483

使用 AJAX 函数时，需要将顺序代码（可能是另一个 AJAX 函数）放在第一个 AJAX 函数的回调中。这可确保在第一个调用完成后进行第二次调用。否则，顺序代码可能会在第一个 AJAX 函数完成之前执行。

# ios - NSURLConnection 在 iOS 6 上超时，但在 iOS 5 上没有

> ID：12565740
> 
> 赞同：4
> 
> 时间：2012-09-24T13:10:02.223
> 
> 标签：ios, ios6

我有一个使用 NSURLConnection 并且在 iOS 5 上运行良好的应用程序，现在相同的代码在 iOS 6 中会立即超时。

知道 5.1 和 6.0 的两个版本之间可能发生了什么变化吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T15:30:15.733

在 iOS 5.1 和之前的版本中，在构造请求正文时设置的超时间隔由于一个原因而被忽略。

iOS 6 似乎注意到并且对超时间隔更精确，所以只需确保将间隔设置为足够大的值，以便有时间完成请求。

```
NSMutableURLRequest *request=[[NSMutableURLRequest alloc]
                              initWithURL:[NSURL URLWithString: url]
                              cachePolicy:NSURLRequestReloadIgnoringCacheData
                              timeoutInterval:60.0]; 
```

# php - 从 php 到 c++ 的加密和解密

> ID：12565742
> 
> 赞同：1
> 
> 时间：2012-09-24T13:10:04.340
> 
> 标签：php, c++, web-services, encryption

我需要一种从 PHP 到 C++ 的加密和解密方法，反之亦然。

例如，我需要将加密的 ID 从 PHP Web 服务发送到 C++ 应用程序，然后在 C++ 中解密，反之亦然。

另一个问题：有什么方法可以保护来自和传入 Web 服务的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:50:18.970

答案取决于您需要防御什么样的威胁以及您的资源是什么。正如您的问题所暗示的那样，您在密码学领域不是很了解，您应该考虑使用众所周知的解决方案，而不是尝试自己发明和/或实施一些密码解决方案。构建防水密码系统有许多微妙的事情，不建议在没有深入研究的情况下构建一个。

如果您想在通过网络传输数据时防止有人窃听或更改数据，请考虑使用 SSL/TLS 来保护整个网络连接。在 C 端，您可以使用任何允许 HTTPS 连接的 HTTP 库。我可能会向您推荐[libCURL](http://curl.haxx.se/libcurl/)。如果您已经在使用 Qt 之类的框架，则可能有 API 可以发出该 HTTPS 请求。在 PHP 方面，您需要设置服务器以通过 https 提供此脚本（或整个服务）。请参阅您的服务器文档以了解它是如何完成的。

对于服务器端，您需要一个证书。如果您只有自己的软件可以连接到该 https 服务器，那么使用您自己的自签名 CA 的证书就足够了。在 Windows 和 POSIX 系统上创建一个会有点不同，但互联网上有很多 HowTos。当您在 C 代码中提出请求时，请务必将此 CA 证书设置为唯一受信任的证书。如果您还希望其他软件（例如通用浏览器）连接到您的 https 服务，则必须从任何公认的 CA 购买 SSL 证书。

相反，如果您想在双方都使用一些对称密码，那将对密钥交换、已知的明文攻击、消息身份验证等问题提出严重的问题。我可以在那里为您提供建议，但是对于您将要构建的系统的性质和局限性的知识将是必不可少的。

# qt - Qt Symbian 音频电平

> ID：12565748
> 
> 赞同：4
> 
> 时间：2012-09-24T13:10:33.183
> 
> 标签：qt, audio, symbian, qml, volume

如何获得 Symbian 设备的当前系统音频级别，因为我希望应用程序的音量级别与本地音乐播放器的音量级别相同。

有任何想法吗？

PS。我正在使用 Qt Game Enabler 来播放声音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:47:48.523

我不认为用于 Symbian 的 Qt 提供任何 API 来控制音量级别。您将不得不潜入 Symbian C++ 的世界。

你应该看看这个：

[以编程方式更改电话 ( symbian ) 扬声器音量](https://stackoverflow.com/questions/891504/programmatically-change-phone-symbian-speaker-volume)

# asp.net-mvc - 这些类型的MVC路由怎么做？

> ID：12565749
> 
> 赞同：2
> 
> 时间：2012-09-24T13:10:34.120
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我注册了两条路线：

```
//News page routing with optional news article ID
routes.MapRoute(
name: "News",
url: "news/{id}",
defaults: new { controller = "News", action = "Index", id = UrlParameter.Optional }
); 
```

默认链接（无 id）生成为：`@Html.ActionLink("News", "Index", "News")`

和

```
//User page routing with User ID
routes.MapRoute(
name: "Profile",
url: "{id}/{controller}/{action}",
defaults: new { controller = "Account", action = "Index", id = UrlParameter.Optional }
); 
```

链接生成为：

```
[a href="@Url.Action("Index", "Account", new RouteValueDictionary(new { id = "test-user-id" }))"]Me[/a] 
```

到目前为止一切都很好，我的新闻链接创建为域/新闻并且有效，我的链接创建为域/测试用户 ID 并且也有效。

但是一旦我访问 Me 链接，News 链接就变成了 domain/news/test-user-id，这不是我想要的。如何使用 mvc 路由“分离”新闻 id 和用户 id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T01:12:19.683

在新闻链接中，您的网址首先具有控制器，然后是操作。

您应该在 Me 链接中遵循相同的模式。IE

{控制器}/{动作}/{id}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T01:52:19.813

我不太确定为什么会发生这种情况，但我对路由有一些建议。首先，对于用户路由，删除`UrlParameter.Optional`, 因为它实际上不是可选的。此外，从 URL 模板中删除`{controller}`and `{action}`，因为它们不是必需的。

```
//User page routing with User ID
routes.MapRoute(
    name: "Profile",
    url: "{id}",
    defaults: new { controller = "Account", action = "Index" }
); 
```

其次，使用`@Url.RouteUrl`代替`@Url.Action`配置文件链接，因为它更精确地针对路由规则。

**新闻**：

```
@Html.RouteLink("News", "News") 
```

**简介**：

```
@Url.RouteUrl("Profile", new { id = "test-user-id" }) 
```

# node.js - node+mongo，除非在本地主机上，否则无法插入到 mongo

> ID：12565751
> 
> 赞同：2
> 
> 时间：2012-09-24T13:10:38.743
> 
> 标签：node.js, mongodb, appfog

**出于某种原因，当我在本地**运行时，以下内容会插入到远程 mongo 服务器，但是当我在我的**appfog**服务器上运行时，它不会插入。

```
function record_visit(req, res){
    res.write("<br/>Connecting to "+mongourl+"<br/>");
    mongo.connect(mongourl, function(err, conn){
        res.write("<br/>mongo.connect success. Err = "+err+"<br/>");
        conn.collection('ips', function(err, coll){
            res.write("<br/>conn.collection called on collection ips, err = "+err+"<br/>");
            object_to_insert = { 'ip': req.connection.remoteAddress, 'ts': new Date() };
            coll.insert( object_to_insert, {safe:true}, function(err){
                res.write("Inserted in collection 'ips' Err= "+err);
                res.end('<br/>Done\n');
            });
        });
    });
} 
```

我的输出是：

```
Connecting to [correct authenticated url to mongo here]

mongo.connect success. Err = null

conn.collection called on collection ips, err = null
Inserted in collection 'ips' Err= null
Done 
```

我需要在某处指定一些权限吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T09:35:59.997

you can try to use the --bind_ip arg on mongod to bind the server to the actual ip of the machine. Default behavior is listening to all local ip's but that might no mean its bound to the real ip of the server.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T19:43:13.503

您可能无法连接到 AppFog 上的 mongo 服务有几个原因。以下是有关如何开始在 AppFog 上使用 Mongo 的文档网址：

[http://docs.appfog.com/services/mongodb](http://docs.appfog.com/services/mongodb)

如果该文档不起作用，您可以通过 support@appfog.com 直接联系他们的支持，或者您可以直接从他们活跃的 google 组中的客户那里获得反馈：[https ://groups.google.com/forum/#!forum /appfog-用户](https://groups.google.com/forum/#!forum/appfog-users)

# vb.net - UpdatePanel.Update() 方法不会更新 UpdatePanel 控件的内容？

> ID：12565765
> 
> 赞同：1
> 
> 时间：2012-09-24T13:11:10.423
> 
> 标签：vb.net, updatepanel

我这里有一些相当简单的代码，但我一生都无法弄清楚它为什么不起作用。

我有一个名为的页面`Update.aspx`，其中包含以下 HTML：

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>

<div>
    Non Panel <%= Date.Now.ToLongTimeString%>
</div>
<asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers="False" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:Label ID="lbl" runat="server">Updates in 5</asp:Label>
    </ContentTemplate>
</asp:UpdatePanel> 
```

后面的代码如下所示：

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim t As New Timers.Timer
        t.Interval = 5000
        AddHandler t.Elapsed, AddressOf raiseupdate
        t.Start()
    End Sub

    Private Sub raiseupdate(ByVal sender As Object, ByVal e As System.EventArgs)
        sender.stop()
        lbl.Text = Date.Now.ToLongTimeString
        UpdatePanel1.Update()
    End Sub 
```

这就是我期望发生的事情：该页面在更新面板中显示“Updates in 5”字样。计时器经过，调用`raiseupdate()`方法，并调用更新面板`update()`方法，刷新更新面板的内容。

实际发生的情况是：计时器已过，`update()`已到达更新面板方法行，但数据似乎从未返回到页面。也就是说，“Updates in 5”永远不会替换为当前时间。

所以我想我对这个方法的实际作用遇到了某种基本的误解`update()`，但我不知道我哪里出错了。我能做些什么来完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:36:43.427

看起来有两个更新。一个来自更新面板，一个来自计时器，正在弄乱您的代码。

相反，您可以使用 ajax Timer 并将其添加为 AsyncPostBack 触发器。这应该为您完成工作..

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>

<div>
    Non Panel <%= Date.Now.ToLongTimeString%>
</div>
<asp:Timer ID="Timer1" OnTick="Timer1_Tick" runat="server" Interval="5000" />

<asp:UpdatePanel ID="UpdatePanel1" runat="server" ChildrenAsTriggers="False" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:Label ID="lbl" runat="server">Updates in 5</asp:Label>
    </ContentTemplate>
   <Triggers>
     <asp:AsyncPostBackTrigger ControlID="Timer1" />
  </Triggers>
</asp:UpdatePanel> 
```

您的 VB 代码将如下所示

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

End Sub

Private Sub Timer1_Tick(ByVal sender As Object, ByVal e As System.EventArgs)
     lbl.Text = Date.Now.ToLongTimeString

End Sub 
```

如果这不起作用，您可以在 Timer_tick 事件中手动调用 Update()

# ios - NSMutableArray 深度保存

> ID：12565775
> 
> 赞同：-1
> 
> 时间：2012-09-24T13:11:51.627
> 
> 标签：ios

我的应用程序模型由一个 NSMutableArray 组成，其中包含一些其他 NSMutableArrays，每个 NSMutableArrays 都包含一定数量的 NSDictionaries，有没有办法在不使用核心数据的情况下深入存储主数组（我的意思是存储它及其所有内容），因为此刻我还是不知道怎么用？目前我知道如何使用 NSUserDefaults，有没有办法使用 NSUserDefaults 深度保存数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:19:45.660

如果数组及其所有内容（包括字典）仅包含[与属性列表](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/Introduction/Introduction.html)兼容的对象，则可以将其放入`NSUserDefaults`.

属性列表兼容的类是：

*   `NSString`
*   `NSDate`
*   `NSData`
*   `NSNumber`
*   `NSValue`
*   `NSArray`
*   `NSDictionary`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:20:27.737

尝试任[一 NSUserDefaults](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:rootArray forKey:@"myKey"];

...

NSArray *savedArray = [defaults objectForKey:@"myKey"]; 
```

如果您的数据很小，或者如果数据较大，则为[NSCoding](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)

```
// To save to disk
[NSKeyedArchiver archiveRootObject:rootArray toFile:@"filePath"];

// To load from disk
NSArray *savedArray = [NSKeyedUnarchiver unarchiveObjectWithFile:@"filePath"]; 
```

或者你可以看看 sqlite3 C 包装器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:21:06.207

To follow from Nikolai's answer - if you are putting your own custom objects into the arrays and dictionaries make sure that they can be serialized.

You can read more about it in the [Archives and Serialization Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Archiving/Archiving.html)

# azure-configuration - EF 连接字符串的 Web 角色配置

> ID：12565778
> 
> 赞同：1
> 
> 时间：2012-09-24T13:11:59.907
> 
> 标签：azure-configuration

我听到很多人谈论在角色配置设置 (.cscfg) 中存储 EF 连接字符串。EF 连接字符串只能作为纯字符串存储在那里，因为“连接字符串”选项用于存储连接。

在我的项目 EF 中，连接字符串不能是纯字符串。目前还不能选择放置更多字符串并将其组合成正确的连接字符串。更何况如果微软想让我们在配置设置中使用数据库连接字符串，为什么在.cscfg中没有选项呢？

这不是证明 .cscfg 不能替代 .config 吗？

# mysql - 合并行以及在同一查询中获取其他数据

> ID：12565780
> 
> 赞同：0
> 
> 时间：2012-09-24T13:12:02.370
> 
> 标签：mysql, database, database-design

好的，抱歉，如果我之前不清楚

以下是我的数据库中的表之一

```
col1 col2  type  
  1     2    3  
  2     1    4  
  1     3    0   
  1     4    0 
```

现在我加入自己，我正试图得到这样的结果

```
 1 - 2 - 3 
  1 - 3 - 0 
  1 - 4 - 0 
```

但不能。

如果在表中是否有任何数据恰好是这样的

```
Col1    Col2 
 1   -  2  
 2   -  1 
```

然后结果应该只包含一行 1-2 或 2-1，这将根据类型决定 - 以具有较小类型值的行为准。

自从过去两个小时以来，我一直在尝试加入，但不能完全在一个查询中完成。

我可以使用内部查询，但是，我想探索或可能的解决方案，然后只有在最后才使用内部查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:17:02.387

看起来非常类似于 [How to get all the distinct combination of 2 columns in MySQL](https://stackoverflow.com/questions/12560525/how-to-get-all-the-distinct-combinations-of-2-columns-in-mysql/12560670#12560670)

我的解决方案是：

```
select t1.col1, t1.col2, t1.type
from table t1 join table 
           t2 on t1.col1 = t2.col2 and t1.col2 = t2.col1 and t1.col1 < t2.col1

union

select t1.col1, t1.col2, t1.type
from table t1
where not exists (select 1 from table where col1 = t1.col2 and col2 = t1.col1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:18:54.567

如果我理解正确，您正在寻找的内容根本不需要加入。无论顺序如何，您都需要 col1 和 col2 中的不同对以及类型。这是一个聚合，以及其他一些操作：

```
select mincol, maxcol, type
from (select (case when col1 < col2 then col1 else col2 end) as mincol,
             (case when col1 < col2 then col1 else col2 end) as maxcol,
             type
      from t
     )
group by mincol, maxcol, type
order by 1, 2, 3 
```

基于最小类型约束，您似乎想要的是对此的一个小变化：

```
select mincol, maxcol, min(type) as type
from (select (case when col1 < col2 then col1 else col2 end) as mincol,
             (case when col1 < col2 then col1 else col2 end) as maxcol,
             type
      from t
     )
group by mincol, maxcol
order by 1, 2 
```

# java - 在 AChartEngine 中将堆积条形图转换为堆积 100 条形图

> ID：12565781
> 
> 赞同：0
> 
> 时间：2012-09-24T13:12:10.937
> 
> 标签：java, android, bar-chart, achartengine

我正在开发一个使用 AChartEngine 作为图表库的 android 应用程序。它在演示中提供堆叠条形图（垂直条），我希望它转换为堆叠 100 条形图（垂直条）。如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:27:11.243

AChartEngine 不提供开箱即用的 Stacked 100 条形图功能。

但是，您可以将数据推送到它，以便获得所需的外观。这个想法是，您添加的最后一个系列必须使所有值都等于最大值。

# openssl - com.sun.identity.authentication.spi.AuthLoginException(1)：处理 XML 请求时发生错误

> ID：12565783
> 
> 赞同：1
> 
> 时间：2012-09-24T13:12:15.523
> 
> 标签：openssl, openam

我正在使用以下代码登录到 openam 服务器：

```
 AuthContext lc = new AuthContext("/","https://server.ensarm.com:8443/openam/namingservice");
        AuthContext.IndexType indexType = AuthContext.IndexType.MODULE_INSTANCE;
        lc.login(indexType, "DataStore"); 
```

但在 lc.login(indexType, "DataStore") 得到这个异常：

```
com.sun.identity.authentication.spi.AuthLoginException(1):Error occurred while processing XML request.
java.lang.reflect.InvocationTargetException(2):null
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.sun.identity.authentication.AuthContext.processRequest(AuthContext.java:2000)
    at com.sun.identity.authentication.AuthContext.runRemoteLogin(AuthContext.java:999)
    at com.sun.identity.authentication.AuthContext.runLogin(AuthContext.java:764)
    at com.sun.identity.authentication.AuthContext.login(AuthContext.java:655)
    at com.sun.identity.authentication.AuthContext.login(AuthContext.java:598)
    at com.sun.identity.authentication.AuthContext.login(AuthContext.java:401)
    at com.ensarm.openam.server.GreetingServiceImpl.getAuthContext(GreetingServiceImpl.java:107)
    at com.ensarm.openam.server.GreetingServiceImpl.greetServer(GreetingServiceImpl.java:66)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
Caused by: java.lang.NullPointerException
    at com.sun.identity.protocol.https.Https.init(Https.java:63)
    at com.sun.identity.protocol.https.Handler.<init>(Handler.java:65)
    ... 39 more 
```

我的应用程序中有 amconfig.properties 文件，也在系统变量中。但不明白那里缺少什么。

# sql - 从表中同时选择 MIN 和 MAX 比预期的要慢

> ID：12565790
> 
> 赞同：27
> 
> 时间：2012-09-24T13:12:38.067
> 
> 标签：sql, oracle, oracle11g, oracle11gr2

我有一个`MYTABLE`带有日期列的表，`SDATE`它是表的主键，并且上面有一个唯一索引。

当我运行此查询时：

```
SELECT MIN(SDATE) FROM MYTABLE 
```

它立即给出答案。同样的情况发生在：

```
SELECT MAX(SDATE) FROM MYTABLE 
```

但是，如果我一起查询：

```
SELECT MIN(SDATE), MAX(SDATE) FROM MYTABLE 
```

执行需要更多时间。我分析了计划，发现当查询 min 或 max 之一时，它使用 INDEX FULL SCAN(MIN/MAX) 但是当同时查询两者时，它会执行 FULL TABLE SCAN。

为什么？

**测试数据：**

版本`11g`

```
create table MYTABLE
(
  SDATE  DATE not null,
  CELL   VARCHAR2(10),
  data NUMBER
)
tablespace CHIPS
  pctfree 10
  pctused 40
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    minextents 1
    maxextents unlimited
  );

alter table MYTABLE
  add constraint PK_SDATE primary key (SDATE)
  using index 
  tablespace SYSTEM
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    minextents 1
    maxextents unlimited
  ); 
```

负载表：

```
declare 
  i integer;
begin
  for i in 0 .. 100000 loop
     insert into MYTABLE(sdate, cell, data)
     values(sysdate - i/24, 'T' || i, i);     
     commit;
  end loop;
end; 
```

收集统计数据：

```
begin
  dbms_stats.gather_table_stats(tabname => 'MYTABLE', ownname => 'SYS');
end; 
```

计划1：

![在此处输入图像描述](../Images/46e24838c89886446f21436202eb25c8.png)

计划2：

![在此处输入图像描述](../Images/37264c100f0dc1aa7dd084d10e4579fd.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T13:33:43.960

索引全扫描只能访问索引的一侧。当你在做

```
SELECT MIN(SDATE), MAX(SDATE) FROM MYTABLE 
```

您要求访问 2 个方面。因此，如果您想要最小和最大列值，索引全扫描是不可行的。

您可以在[此处](http://richardfoote.wordpress.com/category/index-full-scan-minmax/)找到更详细的分析。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T14:16:58.310

解释计划是不同的：一个`MIN`or`MAX`将产生 a`INDEX FULL SCAN (MIN/MAX)`而当两个存在时，您将得到一个`INDEX FULL SCAN`or a [`FAST FULL INDEX SCAN`](http://docs.oracle.com/cd/E11882_01/server.112/e25789/indexiot.htm#sthref320)。

为了理解差异，我们必须寻找对 a 的描述[`FULL INDEX SCAN`](http://docs.oracle.com/cd/E11882_01/server.112/e25789/indexiot.htm#CNCPT88838)：

> 在全索引扫描中，数据库按顺序读取整个索引。

换句话说，如果索引在一个`VARCHAR2`字段上，Oracle 将获取索引的第一个块，该块将包含例如以字母“A”开头的所有条目，并将按字母顺序逐块读取所有条目，直到最后一个条目（ “A”到“Z”）。Oracle 可以这样处理，因为条目是在二叉树索引中排序的。

当您`INDEX FULL SCAN (MIN/MAX)`在解释计划中看到时，这是优化的结果，该优化使用了这样一个事实：由于条目已排序，如果您只对`MIN`. 如果您对`MAX`唯一感兴趣，Oracle 可以使用相同的访问路径，但这次从最后一个条目开始，从“Z”向后读取到“A”。

到目前为止，a`FULL INDEX SCAN`只有一个方向（向前或向后）并且不能同时从两端开始，这就是为什么当您同时要求最小值和最大值时，您会得到一种效率较低的访问方法。

正如其他答案所建议的那样，如果查询需要关键的效率，您可以通过在两个不同的查询中搜索最小值和最大值来运行自己的优化。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-25T14:49:22.117

尝试不要在一个查询中选择索引的两个边缘，以不同的方式访问查询，如下所示：

```
select max_date, min_date
from (select max(sdate) max_date from mytable),
       (select min(sdate) min_date from mytable) 
```

将导致优化器在嵌套循环中访问 INDEX_FULL_SCAN(MIN/MAX) 中的索引（在我们的例子中，两次）。

![在此处输入图像描述](../Images/fd99c73fb52bddcd25f9d8b0bf6271bd.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T13:26:27.700

我不得不说我在 11.2 中没有看到相同的行为

如果我按如下方式设置测试用例并根据文森特的评论从 10k 更新到 1m 行

```
set linesize 130
set pagesize 0
create table mytable ( sdate date );

Table created.

insert into mytable
 select sysdate - level
   from dual
connect by level <= 1000000;
commit;

1000000 rows created.

Commit complete.

alter table mytable add constraint pk_mytable primary key ( sdate ) using index;

Table altered.

begin
dbms_stats.gather_table_stats( user, 'MYTABLE' 
                             , estimate_percent => 100
                             , cascade => true
                               );
end;
/

PL/SQL procedure successfully completed. 
```

然后，执行您的查询，我得到*几乎*相同的解释计划（注意不同类型的 INDEX FULL SCAN）

```
explain plan for select min(sdate) from mytable;

Explained.

select * from table(dbms_xplan.display);
Plan hash value: 3877058912

-----------------------------------------------------------------------------------------
| Id  | Operation          | Name   | Rows  | Bytes | Cost (%CPU)| Time |
-----------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT       |        |     1 |     8 |     1   (0)| 00:00:01 |
|   1 |  SORT AGGREGATE        |        |     1 |     8 |        |      |
|   2 |   INDEX FULL SCAN (MIN/MAX)| PK_MYTABLE |     1 |     8 |     1   (0)| 00:00:01 |
-----------------------------------------------------------------------------------------

9 rows selected.

explain plan for select min(sdate), max(sdate) from mytable;

Explained.

select * from table(dbms_xplan.display);
Plan hash value: 3812733167

-------------------------------------------------------------------------------
| Id  | Operation    | Name       | Rows  | Bytes | Cost (%CPU)| Time     |
-------------------------------------------------------------------------------
|   0 | SELECT STATEMENT |        |     1 |     8 |   252   (0)| 00:00:04 |
|   1 |  SORT AGGREGATE  |        |     1 |     8 |        |          |
|   2 |   INDEX FULL SCAN| PK_MYTABLE |  1000K|  7812K|   252   (0)| 00:00:04 |
-------------------------------------------------------------------------------

9 rows selected. 
```

引用我之前的回答：

> 查询不使用索引的两个最常见原因是：
> 
> 1.  进行全表扫描更快。
> 2.  统计不佳。

除非您没有在问题中发布某些内容，否则我的直接回答是您没有在此表上收集统计信息，您没有以足够高的估计百分比收集它们，或者您使用过[`analyze`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_4005.htm#SQLRF01105)，这对成本*没有*帮助基于优化器，不像[`dbms_stats.gather_table_stats`](http://docs.oracle.com/cd/E11882_01/server.112/e25494/general002.htm#ADMIN11525).

从以下文档中引用`analyze`：

> 对于大多数统计信息的收集，请使用 DBMS_STATS 包，它可以让您并行收集统计信息，收集分区对象的全局统计信息，并以其他方式微调您的统计信息收集。有关 DBMS_STATS 包的更多信息，请参阅 Oracle 数据库 PL/SQL 包和类型参考。
> 
> 使用 ANALYZE 语句（而不是 DBMS_STATS）进行与基于成本的优化器无关的统计信息收集：

# c# - 创建和流式传输图像存档 zip 文件以供下载 C#

> ID：12565794
> 
> 赞同：2
> 
> 时间：2012-09-24T13:12:52.263
> 
> 标签：c#, asp.net-mvc-3, zip, dotnetzip

我在 MVC3 中使用心爱的 DotNetZip 归档库动态生成一个 Zip 文件，其中包含来自存储在数据库中的二进制文件的 .png 图像。然后我将生成的 Zip 文件流式传输给用户下载。（我在保存到数据库之前验证图像数据，因此您可以假设所有图像数据都是有效的）。

```
public ActionResult PictureExport()
      {
           IEnumerable<UserPicture> userPictures = db.UserPicture.ToList();
           //"db" is a DataContext and UserPicture is the model used for uploaded pictures.
           DateTime today = DateTime.Now;
           string fileName = "attachment;filename=AllUploadedPicturesAsOf:" + today.ToString() + ".zip";
           this.Response.Clear();
           this.Response.ContentType = "application/zip";
           this.Response.AddHeader("Content-Disposition", fileName);

           using (ZipFile zipFile = new ZipFile())
             {
               using (MemoryStream stream = new MemoryStream())
                {
                 foreach (UserPicture userPicture in userPictures)
                  {
                     stream.Seek(0, SeekOrigin.Begin);
                     string pictureName = userPicture.Name+ ".png";
                     using (MemoryStream tempstream = new MemoryStream())
                     {
                        Image userImage = //method that returns Drawing.Image from byte[];
                        userImage.Save(tempstream, ImageFormat.Png);
                        tempstream.Seek(0, SeekOrigin.Begin);
                        stream.Seek(0, SeekOrigin.Begin);
                        tempstream.WriteTo(stream);
                     }

                     zipFile.AddEntry(pictureName, stream);
                 }

                zipFile.Save(Response.OutputStream);
              }

           }

        this.Response.End();
        return RedirectToAction("Home");
      } 
```

此代码适用于上传和导出一 (1) 个图像。但是，在将多张图像上传到数据库并尝试将它们全部导出后，生成的 Zip 文件将仅包含最近上传的图像的数据。所有其他图像名称将出现在 zip 文件中，但它们的文件大小将为 0，并且它们只是空文件。

我猜我的问题与 MemoryStreams （或者我遗漏了一些简单的东西）有关，但据我通过单步执行代码可以看出，图像正在从数据库中提取并被添加到zip文件成功...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T14:32:32.057

您对 stream.Seek(0, SeekOrigin.Begin) 的调用导致每次迭代都会用最新的图像数据覆盖流的内容。试试这个：

```
using (ZipFile zipFile = new ZipFile())
{
    foreach (var userPicture in userPictures)
    {
        string pictureName = userPicture.Name + ".png";
        using (MemoryStream tempstream = new MemoryStream())
        {
            Image userImage = //method that returns Drawing.Image from byte[];   
            userImage.Save(tempstream, ImageFormat.Png);  
            tempstream.Seek(0, SeekOrigin.Begin);
            byte[] imageData = new byte[tempstream.Length];
            tempstream.Read(imageData, 0, imageData.Length);
            zipFile.AddEntry(pictureName, imageData);
        }
    }

    zipFile.Save(Response.OutputStream);
} 
```

# wpf - 带圆角的 WPF 复选框

> ID：12565795
> 
> 赞同：1
> 
> 时间：2012-09-24T13:12:54.183
> 
> 标签：wpf, checkbox

是否可以通过修改自定义样式将 WPF 复选框设置为圆角？如果是这样，这是如何完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:23:52.183

是的。这是可能的。

如果您看[这里](http://msdn.microsoft.com/en-us/library/ms752319.aspx)，您可以获得现有复选框的完整样式，并且边框似乎不是由装饰器绘制的。因此，只需以您的风格更改此部分并应用它。

```
<Border x:Name="Border"
                Width="13"
                Height="13"
 <!--Here-->        CornerRadius="0"
                BorderThickness="1">
          <Border.BorderBrush> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:21:30.883

我知道的最好的方法

```
<CheckBox Content="CheckBox" HorizontalAlignment="Left" Height="20" Margin="134,143,0,0" VerticalAlignment="Top" Width="176" Style="{DynamicResource CheckBoxStyle1}"/> 
```

资源词典

```
<ResourceDictionary
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero">
<Style x:Key="CheckBoxStyle1" TargetType="{x:Type CheckBox}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type CheckBox}">
                <BulletDecorator Background="Transparent" SnapsToDevicePixels="true">
                    <BulletDecorator.Bullet>
                        <Border Background="#FFAEB3B9" BorderThickness="2" CornerRadius="10">
                            <Microsoft_Windows_Themes:BulletChrome IsChecked="{TemplateBinding IsChecked}" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderPressed="{TemplateBinding IsPressed}"/>
                        </Border>
                    </BulletDecorator.Bullet>
                    <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                </BulletDecorator>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>
</ResourceDictionary> 
```

# jquery - 没有价值使用 jQuery 创建后，我正在通过 jQuery 和给定数组创建一个选择元素。我可以看到选项并选择它们，但选择区域中没有活动/选定值，它只是空白。这是我使用的代码： output = ''; 输出 += '<select id="testSelect">'; for (var i=0; i' ID：12565799 赞同：2 时间：2012-09-24T13:13:09.970 标签：jquery, select, selected 回答 #1 赞同：1 时间：2012-09-24T13:15:31.013 尝试替换您的以下行： output += '>'+widgetareas[i]; 对于这个： output += '&gt;'+widgetareas[i]; 因为浏览器在解析另一个标签内的结束标签时会感到困惑，所以最好使用字符的等效&gt;实体>。 回答 #2 赞同：1 时间：2012-09-24T13:25:53.187 在我看来，乱用原始 HTML 是一场灾难。 另一个不太容易出现问题的选项是创建 jQuery 对象： var ddl = $("<select>").attr("id", "testSelect"); for (var i=0; i<widgetareas.length; i++) { ddl.append($("<option>").prop("value", widgetareas[i]).text(widgetareas[i])); } $(target).append(ddl);​ 现场测试用例。 回答 #3 赞同：0 时间：2012-09-24T13:19:22.040 试试这样 output = ''; output += '<select id="testSelect">'; for (var i=0; i<widgetareas.length; i++) { output += '<option id="MyId" value="'+widgetareas[i]+'">'; output += widgetareas[i]; output += '</option>'; } output += '</select>'; $(target).append(output);</select>

# ios - iOS中PDF的缩放参数

> ID：12565801
> 
> 赞同：0
> 
> 时间：2012-09-24T13:13:27.750
> 
> 标签：ios, pdf

当我在 iOS 中放大 pdf 文件时，我希望检索某些参数以供使用。我是否有可能获得触摸以启动缩放的点？我还可以检索缩放比例吗？我需要使用这些参数的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:21:01.527

您不是很清楚，但似乎您需要以下内容。

把它放在视图的 viewDidLoad 方法中：

```
UIPinchGestureRecognizer *pinchGesture = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(handlePinchGesture:)];

[self addGestureRecognizer:pinchGesture];
[pinchGesture release]; 
```

然后在调用该方法时使用该信息（在视图中的某处添加此信息）：

```
- (IBAction)handlePinchGesture:(UIGestureRecognizer *)sender {
    float scale = [pinch scale];
    CGPoint pinchlocation = [pinch locationInView:self];
} 
```

您显然可以更改捏回调方法的名称

# zimbra - 如何使用 zimbra 的 javascript API 保存联系人？

> ID：12565803
> 
> 赞同：0
> 
> 时间：2012-09-24T13:13:45.113
> 
> 标签：zimbra

我设法使用 Zimbra 的 Javascript API 在 Zimbra 的 UI 的联系人工具栏中添加了一个按钮。有没有办法再次使用 javascript API 保存当前正在编辑的联系人？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T12:08:04.423

有一个解决方法就是抓住保存按钮并模拟点击它。

```
SugarBee.prototype.saveContactAndSendToSugar = function (toolbar,controller,ev) {
    [...code...]
    var save_button = toolbar.getButton("SAVE");
    save_button._emulateSingleClick();
    [...code...]

} 
```

# android - 移动搜索栏上的图像显示黑色

> ID：12565812
> 
> 赞同：2
> 
> 时间：2012-09-24T13:14:22.013
> 
> 标签：android, android-emulator

我在图像视图中显示图像并应用一些滤色器，这是我的代码

```
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_2);

    SeekBarTxt=(TextView)findViewById(R.id.value_txt);
    iv=(ImageView)findViewById(R.id.img_vw1);

    sb_red = (SeekBar)findViewById(R.id.seek_bar1);
    sb_green = (SeekBar)findViewById(R.id.seek_bar_green);
    sb_blue = (SeekBar)findViewById(R.id.seek_bar_blue);

    sb_red.setOnSeekBarChangeListener(colorBarChangeListener);
    sb_green.setOnSeekBarChangeListener(colorBarChangeListener);
    sb_blue.setOnSeekBarChangeListener(colorBarChangeListener);

    setColorFilter(iv);
}

OnSeekBarChangeListener colorBarChangeListener=new OnSeekBarChangeListener() {

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub
        seekBar.setSecondaryProgress(seekBar.getProgress());
        //SeekBarTxt.setText("ended tracking touch");
    }

    @Override  
    public void onStartTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub
        //SeekBarTxt.setText("starting to track touch");                
    }

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress,
            boolean fromUser) {
        // TODO Auto-generated method stub
        //SeekBarTxt.setText(Integer.toString(progress)+"%");       
        setColorFilter(iv);  
    }
};

private void setColorFilter(ImageView iv)  
{       

    float redValue,greenValue,blueValue;

    if(sb_red.getProgress()!=0 || sb_green.getProgress()!=0 || sb_blue.getProgress()!=0)
    {       
        redValue = ((float)sb_red.getProgress())/255;  
        greenValue = ((float)sb_green.getProgress())/255;   
        blueValue = ((float)sb_blue.getProgress())/255;  
    }
    else
    {
        redValue = 1;  
        greenValue = 1;  
        blueValue = 1;  
    }

     float[] colorMatrix = { 
               redValue, 0, 0, 0, 0,  //red
               0, greenValue, 0, 0, 0, //green
               0, 0, blueValue, 0, 0,  //blue
               0, 0, 0, 1, 0    //alpha    
         }; 

    SeekBarTxt.setText(redValue+"%");
    ColorFilter colorFilter = new ColorMatrixColorFilter(colorMatrix);

    iv.setColorFilter(colorFilter);
} 
```

现在我的问题是当我滑动搜索栏的小图像立即变黑时，我想在图像上慢慢地应用颜色效果。我怎么能做到这一点。

请帮忙！

# c# - 通过 gsm 调制解调器在 asp.net 中发送短信

> ID：12565818
> 
> 赞同：4
> 
> 时间：2012-09-24T13:14:47.283
> 
> 标签：c#, asp.net, sms, gsm

我开发了一个 asp.net 应用程序，根据浏览器中的 URL 从 gsm 调制解调器向目标发送短信我使用了由 codeproject [http://www.codeproject.com/articles/20420/how-to-send-and开发的库-receive-sms-using-gsm-modem](http://www.codeproject.com/articles/20420/how-to-send-and-receive-sms-using-gsm-modem)

但是当我同时请求两个浏览器时遇到问题，我想让我的代码检测到调制解调器当时被另一个进程使用这是我的代码：

```
DeviceConnection deviceConnection = new DeviceConnection();
        protected void Page_Load(object sender, EventArgs e)
        {
            try
            {
                if (Request.QueryString["destination"] != null && Request.QueryString["text"] != null)
                {
                    deviceConnection.setBaudRate(9600);
                    deviceConnection.setPort(12);
                    deviceConnection.setTimeout(200);             
                    SendSms sendSms = new SendSms(deviceConnection);
                    if (deviceConnection.getConnectionStatus())
                    {

                        sendSms.strReciverNo = Request.QueryString["destination"];
                        sendSms.strTextMessage = Request.QueryString["text"];

                        if (sendSms.sendSms())
                        {
                            Response.Write("Mesage successfuly sent to " + Request.QueryString["destination"]);   
                        }
                        else
                        {
                            Response.Write("Message was not sent");
                        }
                    }
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine("Index "+ex.StackTrace);
            }
        } 
```

这是 SendSms 类：

```
 class SendSms
    {
        DeviceConnection deviceConnection;
        public SendSms(DeviceConnection deviceConnection)
        {
            this.deviceConnection = deviceConnection;
        }
        private string reciverNo;
        private string textMessage;
        private delegate void SetTextCallback(string text);
        public string strReciverNo
        {
            set
            {
                this.reciverNo = value;
            }
            get
            {
                return this.reciverNo;
            }
        }
        public string strTextMessage
        {
            set
            {
                this.textMessage = value;
            }
            get
            {
                return this.textMessage;
            }
        }

        public bool sendSms()
        {
            try
            {
                CommSetting.Comm_Port = deviceConnection.getPort();//GsmCommMain.DefaultPortNumber;
                CommSetting.Comm_BaudRate = deviceConnection.getBaudRate();
                CommSetting.Comm_TimeOut = deviceConnection.getTimeout();//GsmCommMain.DefaultTimeout;

                CommSetting.comm = new GsmCommMain(deviceConnection.getPort()
                    , deviceConnection.getBaudRate(), deviceConnection.getTimeout());
                //    CommSetting.comm.PhoneConnected += new EventHandler(comm_PhoneConnected);
                if (!CommSetting.comm.IsOpen())
                {
                    CommSetting.comm.Open();
                }
                SmsSubmitPdu smsSubmitPdu = new SmsSubmitPdu(strTextMessage, strReciverNo, "");
                smsSubmitPdu.RequestStatusReport = true;
                CommSetting.comm.SendMessage(smsSubmitPdu);
                CommSetting.comm.Close();
                return true;
            }
            catch (Exception exception)
            {
                Console.WriteLine("sendSms " + exception.StackTrace);
                CommSetting.comm.Close();
                return false;
            }
        }
        public void recive(object sender, EventArgs e)
        {
            Console.WriteLine("Message received successfuly");
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:09:24.097

我不确定 ASP 是如何工作的，但如果每个进程共享相同的内存空间，则可以使用静态锁来确保单一访问。总之值得一试。

```
private static readonly object CommLock = new object();

public bool sendSms() 
{ 
  lock(CommLock) //second request should wait here until first request finishes
  {
    //all the same comm code from sendSms as before
  }            
} 
```

我同意 Dai 的全局互斥锁理念作为一种改进，请参阅[What is a good pattern for using a Global Mutex in C#?](https://stackoverflow.com/questions/229565/what-is-a-good-pattern-for-using-a-global-mutex-in-c)

# jquery - 对话气泡的两次点击事件

> ID：12565819
> 
> 赞同：5
> 
> 时间：2012-09-24T13:14:50.547
> 
> 标签：jquery, click

我对 jQuery 和点击功能有疑问。[我想从“ http://gdakram.github.com/JQuery-Tooltip-Plugin](http://gdakram.github.com/JQuery-Tooltip-Plugin) ”编辑一个语音气泡插件。在这里您可以看到，如果您将鼠标悬停在按钮上，它会打开一个对话气泡。我想要这个功能点击，而不是鼠标悬停。我的问题是，这个脚本对我来说太复杂了……这是网站的一部分（js-data）：

```
(function($) {

$.fn.tooltip = function(settings) {
// Configuration setup
config = { 
'dialog_content_selector' : 'div.tooltip_description',
'animation_distance' : 50,
'opacity' : 0.85,*/
'arrow_left_offset' : 70,
'arrow_top_offset' : 50,
'arrow_height' : 20,
'arrow_width' : 20,
'animation_duration_ms' : 300,
**'event_in':'click',** 
'hover_delay' : 0,
**'event_out': 'click',** 
}; 
```

事件输入和事件输出不能一起工作......有什么想法，我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:38:12.420

这很粗糙，但应该可以——构建你自己的“切换”方法：

```
 config = { 
       'dialog_content_selector' : 'div.tooltip_description',
       'animation_distance' : 50,
       'opacity' : 0.85,
       'arrow_left_offset' : 70,
       'arrow_top_offset' : 50,
       'arrow_height' : 20,
       'arrow_width' : 20,
       'animation_duration_ms' : 300,
       '_event_' : 'click' 

      //'event_in':'mouseover',
      //'event_out':'mouseout',
      //'hover_delay' : 0
    }; 

   if (settings) $.extend(config, settings);

 /**
  * Apply interaction to all the matching elements
  **/

 this.each(function() {

     toggleTip(this);   

 });

 /**
  * Positions the dialog box based on the target
  * element's location
  **/

 function toggleTip(tip) {  

    var count = 1;

    $(tip).bind(config._event_, function(e){

        e.stopPropagation();

        _hide(tip);

            count++ % 2 ? _show(tip) : _hide(tip);

     });

   }; 
```

为了让它真正有效，您需要重新考虑 _show() 和 _hide() 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T14:02:15.160

»'event_in':'mouseover', 'event_out':'click'« 看起来很漂亮，但并不完美......它在我可以用点击事件关闭它之前出现......这有点......“丑陋”......对这种情况感到抱歉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:37:57.820

在此，他们编写代码以使用鼠标悬停和鼠标移出来显示和隐藏工具提示，因此单击不起作用，请尝试使用

```
click for tooltip show 
mousemove for tooltip hide

(function($) {

    $.fn.tooltip = function(settings) {
    // Configuration setup
    config = { 
    'dialog_content_selector' : 'div.tooltip_description',
    'animation_distance' : 50,
    'opacity' : 0.85,*/
    'arrow_left_offset' : 70,
    'arrow_top_offset' : 50,
    'arrow_height' : 20,
    'arrow_width' : 20,
    'animation_duration_ms' : 300,
    'event_in':'click',
    'event_out':'mousemove'
    }; 
```

event_out 可能是`'mousemove'`或'`mouseleave'`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T09:08:43.607

```
 if (settings) $.extend(config, settings);

     /**
      * Apply interaction to all the matching elements
      **/
     this.each(function() {
       var hoverTimer;
       $(this).bind(config.event_in,function(){
        _hide(this);
         var ele = this;
         hoverTimer = setTimeout(function() { _show(ele); }, config.hover_delay)
       })
       .bind(config.event_out,function(){
         clearTimeout(hoverTimer);
         _hide(this);
       })
     }); 
```

# c# - 处理不同类型的对象

> ID：12565827
> 
> 赞同：0
> 
> 时间：2012-09-24T13:15:13.510
> 
> 标签：c#, c#-4.0

我曾经处理过以下类型的元素：

```
SqlConnection
SqlDataAdapter
DataSet etc. 
```

但我不确定是否需要处理以下类型的对象：

```
 string[] str = ;
    ArrayList etc.

Object of some class 
```

如果需要..请告诉我这样处理是否可以

```
If(str != null)
{
  str = null;
} 
```

请建议我是否有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T13:15:49.500

不，只有实现[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)接口的对象需要被确定性地处理掉。理想情况下，您应该将它们包装起来，而不是手动[`using statement`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)调用该方法：`.Dispose`

```
using (var conn = new SqlConnection(ConnectionString))
using (var cmd = conn.CreateCommand())
{
    conn.Open();
    cmd.CommandText = "SELECT foo FROM bar";
    using (var reader = cmd.ExecuteCommand())
    {
        while (reader.Read())
        {
            // TODO: consume your resultset
        }
    }
} 
```

或流：

```
using (var stream = new MemoryStream())
{
    ...
} 
```

或文件：

```
using (var file = File.OpenRead())
{
    ...
} 
```

或读者：

```
using (var reader = XmlReader.Create("foo.xml"))
{
    ...
} 
```

`IDisposable`当对象持有对需要释放的非托管对象的引用并且 CLRT 无法自动跟踪和释放这些非托管资源时，该模式在 .NET 中使用。在这种情况下，由开发人员在完成使用它们后立即确定性地处理它们（`using statements`如前所示将它们包装起来）。对于没有实现 IDisposable 接口的所有其他对象，您应该将内存管理留给 CLR 和 Grbage 收集器，它们将跟踪它们并在没有更多引用指向它们时自动释放它们持有的内存。作为开发人员，您不必担心。

所以这是经验法则：

> 当您实例化某个变量时，如果此变量实现 IDisposable 则将其包装在 using 语句中，如果没有，则将其留给垃圾收集器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:18:02.277

### 设置为`null`

您正在做`str`的不是处置它；`null`您只是通过分配一个值来“失去对它的引用” 。这可能会使您的代码未使用该对象，并让 GC 更快地收集其内存。显然，它只对长寿命对象中的字段有意义，因为一旦使用它们的方法返回，局部变量就会使它们的值不使用。

一个例子：如果你有一个对象的字段包含一个字符串数组，并且你确定在对象的生命周期内不需要再次访问这个数组，你可以设置这个数组，`null`以便 GC 可以在收集对象本身之前回收数组（及其项）使用的内存。

### 处置

“正确”处理仅对实现 的对象执行[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)，这意味着分配非内存资源的对象，例如操作系统句柄。

# solr - solrCloud 和 group.query

> ID：12565831
> 
> 赞同：2
> 
> 时间：2012-09-24T13:15:26.783
> 
> 标签：solr, grouping, fieldcollapsing, solrcloud

今天我建立了一个具有 3 个节点、3 个分片和 3 个复制的 Solr 云系统。之后，我切换了应用程序以使用新的 SolrCloud 系统而不是旧的（单个实例）。

虽然大多数功能都可以正常工作，但我发现字段折叠（或分组）存在问题。

查看 Solr 文档，我没有找到有关 solrCloud 和字段崩溃问题的任何信息。

在发现使用该功能时，与一个`group.field=`工作的分组同时会`group.query=`产生一个错误。

例如 `http://localhost:9080/solr/archive/select/?group.limit=10&rows=10&group.query=car&group=true`

结果是：

```
<lst name="error">
 <str name="trace">java.lang.NullPointerException
at org.apache.solr.search.grouping.distributed.shardresultserializer.TopGroupsResultTransformer.transformToNative(TopGroupsResultTransformer.java:110)
at org.apache.solr.search.grouping.distributed.responseprocessor.TopGroupsShardResponseProcessor.process(TopGroupsShardResponseProcessor.java:80)
at org.apache.solr.handler.component.QueryComponent.handleGroupedResponses(QueryComponent.java:620)
at org.apache.solr.handler.component.QueryComponent.handleResponses(QueryComponent.java:603)
at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:309)
at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
at org.apache.solr.core.SolrCore.execute(SolrCore.java:1656)
at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:454)
at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:275)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Thread.java:736)
 </str>
 <int name="code">500</int>
</lst> 
```

这是 Solr 4 Beta 中的已知错误吗？或者`group.field=`SolrCloud 不支持？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:16:46.833

看起来它正在下一个版本的 Solr 中修复

[https://issues.apache.org/jira/browse/SOLR-4150](https://issues.apache.org/jira/browse/SOLR-4150)

# iphone - UIView animateWithDuration 只动画一次

> ID：12565842
> 
> 赞同：2
> 
> 时间：2012-09-24T13:16:17.097
> 
> 标签：iphone, ios, animation, uiimageview

我设置了一个动画块，在用户执行搜索时开始。搜索完成后会推送一个新视图。这工作正常，直到用户选择后退按钮并再次尝试搜索，现在动画没有开始。

```
[UIView animateWithDuration:0.25
                      delay:0.0
                    options:(UIViewAnimationOptionRepeat | UIViewAnimationOptionCurveLinear)
                 animations:^{

                     _collectionImage.transform = CGAffineTransformMakeRotation(M_PI);

                 }
                 completion:^(BOOL finished){
                     NSLog(@"Done!");
                 }]; 
```

在任何人询问之前，动画只是一个旋转的圆盘，并且在推送视图加载时调用完成块。对于为什么它不会在多次搜索中产生动画的任何帮助，我们将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T13:35:55.543

你好，这是你的问题...

您将仿射值 x 更改为 y

所以现在你的变换值是 y 然后你又等于 y =y

那么它是如何工作的......

最初您需要存储变换值，然后在完成动画后对其进行动画处理，您需要恢复该值

`viewDidLoad`这样做：

```
initalTransform=_collectionImage.transform;

[UIView animateWithDuration:0.25
                      delay:0.0
                    options:(UIViewAnimationOptionRepeat | UIViewAnimationOptionCurveLinear)
                 animations:^{

                     _collectionImage.transform = CGAffineTransformMakeRotation(M_PI);

                 }
                 completion:^(BOOL finished){
                     NSLog(@"Done!");
_collectionImage.transform=initalTransform;
                 }]; 
```

试试这个......这是一个你需要作为你的逻辑来实现的想法......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:26:56.127

使用`CGAffineTransformRotate(<#CGAffineTransform t#>, <#CGFloat angle#>)` 你必须从当前变换开始旋转

# javascript - 点击 div 下的 div

> ID：12565843
> 
> 赞同：0
> 
> 时间：2012-09-24T13:16:17.330
> 
> 标签：javascript, jquery

我有情况：

```
<div id="main">
  <div id="a"></div>
  <div id="b"></div>
</div> 
```

在我的网页上，元素`B`位于`A`. 如何仅将 click 绑定到 B 元素之上的那些 A 元素？例如：

```
$('#main, #main > #b').click(function(){
  //something
}); 
```

**EDIT2：**当我单击父 div 或“b”元素时，此代码是可以的，但是当我单击上面的“A”元素时没有任何反应。

一般来说，我只想点击 B 元素，但是当 A 元素高于 BI 时，我想触发事件。谢谢！

**编辑：**不幸的是我无法修改 HTML 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:55:30.560

看看这个，当我在你的问题中留下评论时，我制作了一个脚本来向你展示我使用 jquery 库的意思，例如，[这里是链接](http://jsbin.com/ufuwek/1/)

HTML：

```
<div id="main">
  <div id="a">A</div>
  <div id="b">B</div>
</div> 
```

CSS：

```
#main div{width:100px;height:100px;display:block;position:absolute;margin:10px;top:0;left:0;line-height:100px;text-align:center;}
#main #a{background:#DDD;top:5px;left:5px;}
#main #b{background:#999;color:#FFF;} 
```

jquery脚本：

```
//onHover B do the next...
$('#b').hover(function(){

  // actual B element move below
  $(this).css('zIndex', -1);

});
//onHover A do the next...
$('#a').hover(function(){
  // nothing on hover
},function(){
  // but onHoverOut do next...
  $('#b').css('zIndex', 'auto');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:19:21.137

我不知道你*为什么*要这样做，但尽管如此……</p>

```
$('#a').click(function(e) {
    e.preventDefault();
    $('#b').click();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:33:08.907

也许这就是您正在寻找的：

HTML：

```
<div id="main">
  <div id="a">A</div>
  <div id="b">B</div>
  <div id="c">C</div>
</div>​ 
```

jQuery：

```
$(document).ready(function() {
    $("#main div").each(function() {

        // bind each div to the click event
        $(this).click(function() {
            alert("hah!");
        });

        // if we have reached "b", stop binding events to any following divs
        if ($(this).attr('id') == "b") {
          return false;
        }

    });
}); 
```

JSFiddle在这里：http: [//jsfiddle.net/U6J8c/](http://jsfiddle.net/U6J8c/)

# java - 下载由 java web 服务 (POST) 流式传输的 pdf

> ID：12565845
> 
> 赞同：3
> 
> 时间：2012-09-24T13:16:29.297
> 
> 标签：java, jquery, web-services, post

我有一个通过 POST 方法调用的网络服务：

```
 @Path("/ficheAction/")
  @POST
  @Consumes({ MediaType.APPLICATION_JSON })
  @Produces("application/pdf")
  public Response ficheAction(final ParamSyntheseFicheActionDto paramSyntheseFicheAction) throws EngineException {
  [...]
     return Response.ok(output.toByteArray(), "application/pdf")
        .header("content-disposition", "attachment; filename = " + name + ".pdf").build();
  } 
```

此网络服务使用我的 js 中的参数（Json）：

```
 [...]    
  $.ajax({
        url : webServiceUrl,
        // 
        type : "POST",
        // Content type to send to the server
        contentType : "application/json; charset=utf-8",
        data : pData,
        dataType : "json",
        success : pCallback,
        cache : false,
    }); 
```

网络服务接缝工作，但在客户端，导航器不打开文件（pdf）。

我用 GET 而不是 POST（简化属性）进行了测试，它可以工作，但不能在 POST 中......当我在 chrome 调试中查看 web 服务的响应时，我可以看到有一个以开头的响应"%PDF-1.5"...但是下载没有开始...

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-23T09:30:44.320

您应该使用 GET 方法。

要下载文件，不要使用 ajax，只需通过简单链接调用您的 Web 服务。

```
<a href="http://your-server.com/ficheAction">Download</a> 
```

或者使用那个简单的 js 脚本：

```
window.open("http://your-server.com/ficheAction"); 
```

# asp.net - 日期选择器 Ajax 中断

> ID：12565848
> 
> 赞同：-1
> 
> 时间：2012-09-24T13:16:37.877
> 
> 标签：asp.net, ajax, datepicker, actionresult

我有一个 jQuery datepicker 可以工作，除非 updateTable 中的 Ajax 完成。日历单元格中的数字消失并且阻止选择单元格。无论 updateTable 的结果是什么，都会发生这种情况。问题是什么？

```
<head>

<script type="text/javascript">

    $(document).ready(function () {

        initDatepicker();

        $("#btn").live('click', function (event) {

              $.ajax({
                url: '@Url.Action("Add")',
                type: 'POST',
                contentType: 'application/json',
                success: function (result) {
                        updateTable();
                }
            });
        });

  });

  function initDatepicker () {               
      $('.datepicker').datepicker();   
  };

  function updateTable() {          
        $.ajax({
            url: '@Url.Action("UpdateTable")',
            type: 'POST',
            contentType: 'application/json',
            success: function (result) {
                $("#table").append(result);
            },
        });
    };

</script>

</head>

<body>
      <div>
        @RenderBody()
      </div>

      <div id="table">
      </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:21:13.443

您必须在更新 Ajax 之后重新初始化日期选择器，因为您更改了 DOM 结构并且之前的结构不再有效。因此，`initDatepicker();`在您将表更新为之后再次调用：

```
 function updateTable() {          
        $.ajax({
            url: '@Url.Action("UpdateTable")',
            type: 'POST',
            contentType: 'application/json',
            success: function (result) {
                $("#table").append(result);
                // here call again the init
                initDatepicker();    
            },
        });
    }; 
```

# javascript - 如何优化在canvas JS上绘制大量元素？

> ID：12565850
> 
> 赞同：1
> 
> 时间：2012-09-24T13:16:39.517
> 
> 标签：javascript, canvas, html5-canvas

我有很多元素和mousemove方法，在选择项目时是重绘画布的。

```
function redraw(ctx) { // ctx - canvas context
    if (!needRedraw) 
        return;
    ctx.save();
    ctx.clearRect(0, 0, w, h);
    drawItems(ctx);
    ctx.restore();
}

function drawItems(ctx) {
    var l = nodes.length(); // array of elements for drawing (from 100 to 100000)
    for(var i = 0; i < l; i++) {
        var item = nodes[i];
        ctx.beginPath();
        ctx.strokeStyle = colors(item.type);
        ctx.fillStyle = fill(item);
        ctx.arc(item.x, item.y, item.r, 0, Math.PI * 2, true);
        ctx.fill();
        ctx.stroke();
        ctx.closePath();
    }
} 
```

如何优化这个过程，因为它贯穿了这个非常昂贵的所有元素？可以使用异步方法，但我不明白如何应用他？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T16:02:44.743

您对 的调用`save`，`restore`并且`closePath`在编写时不执行任何操作。删除它们。

`save`并`restore`复制所有画布状态，如果曾经使用过，应该很少使用。在完美的性能世界中，您需要使用它们的唯一原因是重置剪辑区域。

绘制一条且只有一条路径，并在最后只填充（和描边）一次。

像这样：

```
function redraw(ctx) { // ctx - canvas context
    if (!needRedraw) 
        return;
    ctx.clearRect(0, 0, w, h);
    drawItems(ctx);
}

function drawItems(ctx) {
    var l = nodes.length(); // array of elements for drawing (from 100 to 100000)
    ctx.beginPath(); //outside of loop!
    for(var i = 0; i < l; i++) {
        var item = nodes[i];
        ctx.moveTo(item.x+item.r,item.y); // set up subpath to be at the right point
        ctx.arc(item.x, item.y, item.r, 0, Math.PI * 2, true);
    }
    ctx.fill();     //outside of loop!
    ctx.stroke();   //outside of loop!
} 
```

根据您正在做的事情，很可能会有更多优化，但这应该会有所帮助！

希望你的项目进展顺利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T13:20:03.523

有[一篇](http://www.html5rocks.com/en/tutorials/canvas/performance/)关于优化画布操作的好文章，其中许多可能适用于您。

可能最容易开始的是将`beginPath()`and`closePath()`调用移出循环，而是`moveTo()`在段之间使用，以及将画布从屏幕上绘制出来，然后将其复制到显示画布上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T21:11:20.233

您还可以反转您的循环，假设可以以相反的顺序绘制所有内容，因为 jsperf 显示这更快。while 循环甚至更快。

**例子**

```
var i = nodes.length();
while (i--) {
    // ...do stuff...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-25T02:08:07.313

另一个性能提示：缓存您的 Math.PI * 2 结果。

事实上，javascript 是`PI`从一个对象中获取，然后将其相乘。该值始终相同，因此只需添加一个常量

**例子**

```
const PI_TIMES_TWO = 6.28; //or whatever degree of accuracy you want.

...

ctx.arc(item.x, item.y, item.r, 0, PI_TIMES_TWO, true); 
```

# css - 将文本与图像对齐 (CSS)

> ID：12565853
> 
> 赞同：4
> 
> 时间：2012-09-24T13:16:46.333
> 
> 标签：css, alignment

现在怎么样了：http: [//jsfiddle.net/cSazm/](http://jsfiddle.net/cSazm/)

我希望它是怎样的：http: [//jsfiddle.net/mhprg/](http://jsfiddle.net/mhprg/)

第二个变体的问题是我不知道图像的确切大小，所以固定的 CSS 边距不起作用:( 还有一个额外丑陋的 div ..

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T13:46:32.507

您可以浮动图像，然后将其设置`div`为表格单元格，它将自动拉伸到可用宽度的 100%。

**HTML：**

```
<img src="http://lorempixel.com/g/80/80/" alt="" /><div>Text</div> 
```

**CSS：**

```
div{
    display:table-cell;
}    

img{
    float:left;
} 
```

↪[在 JSFiddle 查看这个例子](http://jsfiddle.net/cSazm/16/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T13:48:38.197

您可以使用[“shrinkwrap”方法](http://www.css-lab.com/lab-work/auto-width/shrink-wrap-col.html)来包含文本并防止其在图像下方流动：

[http://jsfiddle.net/cSazm/5/](http://jsfiddle.net/cSazm/5/)

（只需添加`overflow:hidden`到您的文本 div）

然而，这并不能解决额外的 div 问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T13:27:29.457

您需要在文本上添加宽度（您应该将其放入 ap 标签或您喜欢的任何内容中）。然后你可以将 p 向左浮动。

这并不理想，并且基于可能不适用于您想要构建的大局，但这是最好的方式。尤其是看到左浮动是为了使诸如图像与文本内联的对象而构建的，因此本质上您是在尝试覆盖css不太友好的规范！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-24T18:01:54.513

如果您的图像浮动（在本例中为左侧），则适用`overflow:hidden;`于您的文本 div。所以你的CSS应该是：

```
image{
  float: left;
  width: 50px;
  height: 50px;
}

text-div{
  overflow: hidden;
} 
```

无论图像/文本大小如何，您的内容都不会使用这种技术流到图像下方。

为了了解更多信息，Nicole Sullivan 写了一篇很棒的博客文章：http: [//www.stubbornella.org/content/2009/07/23/overflow-a-secret-benefit/](http://www.stubbornella.org/content/2009/07/23/overflow-a-secret-benefit/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T13:21:05.740

很简单，像这样设置图像的右边距：

```
img {
    float: left;
    margin-right: 10px;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-24T13:35:06.957

固定图像宽度

```
<img src="http://lorempixel.com/g/80/80/"  width="42" /> 
```

现在将您的文本添加到 div 或 p 等标签中

```
 <div class="text">
    Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam liber tempor cum soluta nobis eleifend option congue nihil imperdiet doming id quod mazim placerat facer possim assum.
      </div> 
```

将标签嵌套在单个 div 中。现在只需将文本边距分配为图像的宽度

```
.text{
    margin-left: 42px;
} 
```

因为我在上面设置了图像 42 的宽度。

# unix - grep 一些空间的东西 ()

> ID：12565855
> 
> 赞同：0
> 
> 时间：2012-09-24T13:16:56.880
> 
> 标签：unix, grep

我想为我的菜鸟问题提前道歉，但我想在 c 文件中查找函数标题。所以我试图grep换行符“^”然后是一些空格“ *”然后是一些字符“。* ”然后是一些空格“ *”然后是一些字符数“。* ”然后是一些空格数“ *”然后“（ " 然后是一些字符 ".* " 然后是 ")"。

我试过`grep -E /^( *.*)\2 *\(.*\)/ *.c` 了

```
grep -E /^ *.* *.* *\(.* *.*\*\)/ *.c
                int foo (int bar, double cow) 
```

但我认为 ( 和 ) 不受支持。我得到的比我想要的更多。我怎样才能 grep 像上面的功能标题等等。同样，我对上述 grep 的问题是我得到了许多结果，并且我得到了其中没有 () 的东西。我只想要功能标题。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:24:04.363

试试这个：`egrep '^[ \t]*[^ \t]*[ \t]*[^ \t]*[ \t]*[(][^ \t]*[)]' *.c`

顺便说一句：我不鼓励使用空格的快捷方式，因为它是特定于实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:39:24.903

这对您的要求有用吗？

```
grep -P "^\s*[\w ]+\([^\)]*\)" 
```

# java - 如何在亚马逊 s3 上使用预签名的 url 进行复制？

> ID：12565860
> 
> 赞同：3
> 
> 时间：2012-09-24T13:17:13.553
> 
> 标签：java, amazon-s3, amazon-web-services

我想为 S3-Copy 操作创建预签名 URL。我知道 URL S3-Put 的预签名，但不知道如何为 S3-Copy 创建它。

参考： [http ://docs.amazonwebservices.com/AmazonS3/latest/dev/PresignedUrlUploadObjectDotNetSDK.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/PresignedUrlUploadObjectDotNetSDK.html)

我的要求是我想创建一个签名的 URL，它允许目标服务访问源服务对象并将其复制到目标存储桶。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:27:05.790

可能不是您想听到的答案，但适用于 Java 的 AWS 开发工具包不支持此功能。您只能生成预签名 URL 来获取或放置对象。

原则上，您可以预先签署任何操作，但它会很快变得复杂。例如，复制对象操作需要必须签名的特定标头，因此预签名 URL 和最终访问该 URL 的服务都需要提前就这些标头达成一致。

# arrays - 在 Ada 中，是否可以在数组初始化中使用“其他”来获取不同的值？

> ID：12565861
> 
> 赞同：1
> 
> 时间：2012-09-24T13:17:25.367
> 
> 标签：arrays, initialization, ada

我想知道是否可以初始化这个数组：

```
Type Some is array (1..5) of Integer;

SomeArray : Some := ( 1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5 ); 
```

以某种不同的方式，像这样：

```
SomeArray : Some := ( others => n ); 
```

是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:31:18.447

除了“Some”现在是 Ada 2012 中的保留字之外，您可以完全按照您的描述初始化那种数组。例如：

```
with Text_IO; use Text_IO;

procedure Agg_Init_Test is

   type Some_Type is array (1.. 5) of Integer;

   N : constant := 4;

   Data : Some_Type := (others => N);

   procedure Init_To (N : Integer) is
   begin
      Data := (others => N);
   end Init_To;

   procedure Init_Data (Data : out Some_Type; N : Integer) is
   begin
      Data := (others => N);
   end Init_Data;

   function Inc (Val : in out Integer) return Integer is
   begin
      Val := Val + 1;
      return Val;
   end Inc;

   procedure Init_Seq(Data : out Some_Type; Start : Integer) is
      N : Integer := Start;
   begin
      Data := (others => Inc(N));
   end Init_Seq;

begin
   Init_To(42);
   Init_Data(Data, 2012);
   Init_Seq(Data, 0);
   for I of Data loop
      Put_Line(Integer'Image(I));
   end loop;
end Agg_Init_Test; 
```

# ruby-on-rails - 如何解决迁移中模型的名称？

> ID：12565863
> 
> 赞同：4
> 
> 时间：2012-09-24T13:17:28.593
> 
> 标签：ruby-on-rails, database, activerecord, migration

[Rails 迁移指南](http://guides.rubyonrails.org/migrations.html)建议您在迁移中创建一个人造模型，如果您需要对数据库中的数据进行操作，例如：

```
class AddFuzzToProduct < ActiveRecord::Migration
  class Product < ActiveRecord::Base
  end

  def change
    add_column :products, :fuzz, :string
    Product.reset_column_information
    Product.all.each do |product|
      product.update_attributes!(:fuzz => 'fuzzy')
    end
  end
end 
```

问题是，在`AddFuzzToProduct`类中，产品模型的名称将是`AddFuzzToProduct::Product`. 我有以下情况：

```
class RemoveFirstNameFromStudentProfile < ActiveRecord::Migration

  class StudentProfile < ActiveRecord::Base
    has_one :user,:as => :profile
  end

  class User < ActiveRecord::Base
    belongs_to :profile,:polymorphic => true,:dependent => :destroy
  end

  def up
    StudentProfile.all.each do |student|
       # I need to do some work on the user object as well as on the student object
       user = student.user
       ... # do some stuff on the user object
    end
  end

end 
```

问题是，在`each`学生资料的块内，用户是零。激活记录器后，我可以看到 Rails 正在尝试执行以下查询：

```
 RemoveFirstNameFromStudentProfile::User Load (0.8ms)  SELECT "users".* FROM "users" WHERE "users"."profile_id" = 30 AND "users"."profile_type" = 'RemoveFirstNameFromStudentProfile::StudentProfile' LIMIT 1 
```

当然，这可以通过将`User`and`StudentProfile`向上移动一级来解决，例如：

```
 class StudentProfile < ActiveRecord::Base
    has_one :user,:as => :profile
  end

  class User < ActiveRecord::Base
    belongs_to :profile,:polymorphic => true,:dependent => :destroy
  end

  class RemoveFirstNameFromStudentProfile < ActiveRecord::Migration
    def up
      StudentProfile.all.each do |student|
        ...
      end
    end
  end 
```

我的问题是：将人造模型的定义移到迁移声明之外会对我造成任何问题吗？我在这里缺少什么吗？为什么 Rails 团队的人在迁移类中声明它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T04:03:19.883

使用 Ruby，您始终可以通过在类或模块前面加上`::`.

您的示例迁移如下所示：

```
class AddFuzzToProduct < ActiveRecord::Migration
  class ::Product < ActiveRecord::Base
  end

  ...
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T12:26:17.723

不，它不会对您造成任何问题，因为您没有添加任何新列并对其进行更新。

Rails 团队已在迁移中声明它，因为他们正在添加一个新列然后对其进行更新，但如果 Model 在外部并且它将尝试验证该列是不可能的，因为它不存在，它只是在迁移中添加的。由于这个原因，他们在迁移中创建了本地模型，只是为了更多阅读在迁移中[使用模型](http://guides.rubyonrails.org/migrations.html#using-models-in-your-migrations)

# qt - 继承 QListWidgetItem 和重载 operator<。如何确保 QListWidget 正确排序？

> ID：12565865
> 
> 赞同：1
> 
> 时间：2012-09-24T13:17:42.603
> 
> 标签：qt, sorting, inheritance, operator-overloading

我创建了一个名为 PageRangeListWidgetItem 的新类，它继承自 QListWidgetItem

```
class PageRangeListWidgetItem : public QListWidgetItem
{
    ...
    private:
        int start, end;

        bool operator<(const PageRangeListWidgetItem &other) const {
            if (start == other.start)
                return end < other.end;
            return start < other.start;
        }
}; 
```

这些项目正在通过用户输入添加到 QListWidget 中。QListWidget 只包含这些 PageRangeListWidgetItem，所以我希望通过调用 QListWidget 的 sortItems() 函数，它会使用重载的 operator< 根据我的喜好对项目进行排序，但不幸的是它没有，它继续对就好像它包含纯 QListWidgetItems 一样列出。

我怎样才能改变这种行为？我必须创建一个自定义 QListWidget 类还是有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:33:42.757

Qt 框架调用的`<`函数是

```
virtual bool operator<(const QListWidgetItem &other) const 
```

`PageRangeListWidgetItem`您定义的那个与此函数签名（而不是）不匹配`QListWidgetItem`，因此不会覆盖虚函数并且不会被调用。

您需要编写一个`<`函数，该函数接受 a`QListWidgetItem`并使用该对象进行排序，而不是您的自定义对象。

# android - 软键盘覆盖

> ID：12565867
> 
> 赞同：1
> 
> 时间：2012-09-24T13:17:52.510
> 
> 标签：android, android-layout, android-softkeyboard, soft-keyboard

有谁知道如何在键盘上添加覆盖面板/布局。我尝试了几种使用 Sample 软键盘的方法，但没有取得多大成功。一直在阅读并尝试应用这些：

-[将一个活动覆盖在另一个活动上或将一个视图覆盖在另一个活动上](https://stackoverflow.com/questions/7878235/overlay-an-activity-on-another-activity-or-overlay-a-view-over-another)

- [Android 将视图覆盖在所有内容之上？](https://stackoverflow.com/questions/7519160/android-overlay-a-view-ontop-of-everything)

- [Android - 将视图动态添加到视图中](https://stackoverflow.com/questions/6216547/android-dynamically-add-views-into-view)

我想这些在实现活动而不是像键盘这样的服务时起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T02:41:35.473

将您的布​​局放在 scrolllistciew 中，然后在您的活动清单声明中使用 android:windowSoftInputMode="adjustResize|stateHidden"

# ruby-datamapper - Datamapper - 在 :destroy 回调被调用两次之前？

> ID：12565868
> 
> 赞同：1
> 
> 时间：2012-09-24T13:17:59.263
> 
> 标签：ruby-datamapper

出于某种原因，当我对我的 DataMapper 模型之一的实例调用 destroy 时，“before :destroy”回调被执行了两次，导致错误。有问题的模型与另一个模型有一个 belongs_to 关联，该模型在父端有一个 :destroy 约束。谁能明白为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-06T13:17:28.100

很高兴看到一些最小的示例代码给你一些更具体的建议。

由于我在寻找`self.save`在`before :save`回调中调用的方法时发现了这篇文章，许多可能的解释之一是你有一个`before :destroy`正在调用的回调`self.destroy`......

# orchardcms - Orchard cms - 自定义表单 - 自定义 css 以进行放置

> ID：12565869
> 
> 赞同：0
> 
> 时间：2012-09-24T13:18:01.777
> 
> 标签：orchardcms

我刚刚进入果园 cms，我想设置一个自定义表单来获取一些用户详细信息。

我有一个作为小部件工作的表单，它可以很好地回发，但我很难自定义布局。

我可以弄清楚如何向上或向下更改字段的位置，但我想并排放置一些字段而不是彼此堆叠，但是每个字段都包含在它自己的标签中，这个标签没有 id或与之关联的类名，因此我无法调整每个单独的字段 css 属性。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:54:04.973

据我了解，您可以访问表单小部件模板，在这种情况下：

最好的方法是向字段添加一个类，以便您可以使用 css 定位元素。

```
@Html.TextBoxFor(m => m.Field, new { @class = "custom-class"}) 
```

@class 将自定义类添加到生成此的输入元素：

```
<input class="custom-class" id="Field.Id" name="Field.Title" type="text" value=""> 
```

# android - 即使值为空，Sqlite 查询也会返回 0

> ID：12565875
> 
> 赞同：7
> 
> 时间：2012-09-24T13:18:26.410
> 
> 标签：android, sqlite

以下是我用来获取与我的 sqlite db 表中的特定字段相对应的 int 值的查询。

```
"SELECT conn_status FROM profiles WHERE devID = '" + id+"'" 
```

如果没有为与提供的 devID 对应的“conn_status”保存值，则表中的现有值将为空。我从 java 中检索数据，如下所示：

```
c.getInt(c.getColumnIndex("conn_status")) 
```

这里的问题是，对于给定的 query ，即使字段中存在的值为 null，c.getInt 也会返回 0。如何修改此查询，使其返回不同的值而不是 0，例如 5，如果值为空。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-24T13:23:00.420

您可以使用该`isNull()`功能。这是一个例子：

```
static int getInt(String columnName)
{
    if(c.isNull(c.getColumnIndex(columnName)))
        return -1;
    return c.getInt(c.getColumnIndex(columnName));
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-24T15:18:08.210

在 SQLite 中，您可以使用该[`IFNULL`](http://www.sqlite.org/lang_corefunc.html#ifnull)函数来替换`NULL`值：

```
SELECT IFNULL(conn_status, 5) FROM profiles WHERE devID = ? 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T13:23:38.250

`int`在 Java 中是原始数据类型，不能是`null`. 因此，如果您的 getInt 没有返回值，您将得到 0。Integer 对象可能为空，因此如果您的逻辑要求您检查空值而不是 0，您可能需要考虑使用 Integer 而不是 int

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-24T12:06:01.890

如果列具有空值，则您想要任何不同的值，例如 5，然后尝试以下代码。

```
Cursor c = db.rawQuery("SELECT conn_status FROM profiles WHERE devID = '" + id+"'");

    if(c.getCount>0){
    int number = c.getInt(c.getColumnIndex(conn_status));
    return number;
    }else{
    return 5;
    } 
```

如果 cursor.getCount() 返回一些东西意味着查询工作和数据库没有空值。如果返回相反的意思是查询不起作用并且数据库对于相应的查询具有空值。所以尝试一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-13T19:41:49.227

在 Android 中使用 Integer 对象而不是 int 原始，Integer 可以为空，原始 int 导致异常。在模型中验证值是否为空或处理内容。

```
/**
 * Return real integer of value or null
 * @param column_name Name of column in result
 */
public Integer getInt(String column_name){
    try{
        if(cursor.isNull(cursor.getColumnIndex(column_name)))
            return null;
        return cursor.getInt(cursor.getColumnIndex(column_name));
    }catch(Exception e){
        e.printStackTrace();
        Log.e("sqlite_exception", "column " + column_name + " not exists. " + e.getMessage());
        return null;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-24T07:39:29.740

您可以通过调用 getType() 来判断该列是否为空。

```
Integer locationInfoId;

if (cursor.getType(columnIndex) == Cursor.FIELD_TYPE_NULL){
    locationInfoId = null;
} else {
    locationInfoId = cursor.getInt(columnIndex);
}

columnIndex++; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-22T21:40:58.333

我遇到了同样的问题，即在调用中*`NULL`*返回`0`了一个所谓的值`c.getInt(index)`。

事实证明，我的数据库*的文本值为* `null`. 也就是说，不是 0 字节值，而是*`NULL`*4 个字符`'n' 'u' 'l' 'l'`。这很令人困惑，因为`null`看起来是正确的。直到我用 SQLite 数据库浏览器检查了数据库，我才发现它。

当我替换这些文本值时，事情按预期工作。

我知道这是一个老问题，但希望这会为其他人节省一些故障排除时间。

# c# - C#解锁工作站

> ID：12565878
> 
> 赞同：4
> 
> 时间：2012-09-24T13:18:34.383
> 
> 标签：c#, windows, authentication

对于我想要制作的 usb-smartstick 应用程序，我需要能够在 C# 中解锁锁定的工作站。当我插入具有唯一 ID 的 USB 时，我想解锁 ws。最好的方法是什么？

我的目标是类似 Rohos Logon Key 之类的应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T13:42:00.323

据我了解，为了实现这一点，您需要替换/挂钩到处理登录的 Windows 组件的实现。据我所知，没有其他方法可以实现您的要求 - 用户在登录之前需要输入安全注意序列 (SAS) 的原因是为了防止恶意软件欺骗登录对话框。如果任何旧程序可以执行您的要求，那么这就是恶意软件可以利用的东西。

根据您所针对的 Windows 版本，有两种不同的方法来执行此操作。

**对于 Windows XP 及更早版本**

为此，您需要编写自己的 GINA（Microsoft 图形标识和验证）替换。仅供参考，在 .Net 中实现这样的 dll 可能是个坏主意（请参阅[A GINA replacement in a .NET language?](https://stackoverflow.com/questions/1917790/a-gina-replacement-in-a-net-language)）。这也是相当先进的东西，引用以下链接文章之一

> 更换 GINA 是一项不可掉以轻心的先进技术。只有在别无选择时才应该这样做（例如，如果您正在实施 Windows 不支持的新登录机制）。

有关 GINA 的更多信息，请查看以下链接

*   [以编程方式解锁 Windows 工作站](https://stackoverflow.com/questions/174225/unlock-windows-workstation-programatically)
*   [自定义 GINA，第 1 部分](http://msdn.microsoft.com/en-gb/magazine/cc163803.aspx)
*   [自定义 GINA，第 2 部分](http://msdn.microsoft.com/en-us/magazine/cc163786.aspx)
*   [锁定 Windows 桌面](http://www.codeproject.com/Articles/7392/Lock-Windows-Desktop)
*   [Aucun](http://www.paralint.com/projects/aucun/)（替代 GINA 项目）
*   [Microsoft 图形标识和身份验证 (GINA) (MSDN)](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756900.aspx)
*   [替换微软图形标识和认证动态链接库的要点](http://technet.microsoft.com/en-us/library/bb742447.aspx)

**Vista 及更高版本**

在 Windows Vista 和更高版本上， [GINA 已被 Credential Providers 取代](http://support.microsoft.com/kb/925520/EN-US)，因此您需要实现[ICredentialProviderCredential 接口](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776029%28v=vs.85%29.aspx)。虽然这是一个 COM 接口，但再次用 .Net 语言实现它是个坏主意。

可以在以下链接中找到更多详细信息

*   [Winlogon 和凭据提供程序](http://msdn.microsoft.com/en-us/library/windows/desktop/bb648647%28v=vs.85%29.aspx)
*   [使用 Windows Vista 的凭据提供程序创建自定义登录体验](http://msdn.microsoft.com/en-gb/magazine/cc163489.aspx)
*   [如何在 Windows Vista 中构建自定义登录 UI](http://blogs.msdn.com/b/securitytools/archive/2009/07/30/how-to-build-custom-logon-ui-s-in-windows-vista.aspx)
*   [使用 C# 和 YubiKey 添加 winlogon 登录方法](https://stackoverflow.com/questions/3549605/add-winlogon-login-method-using-c-sharp-and-yubikey)
*   [凭据提供程序示例](http://www.microsoft.com/en-us/download/details.aspx?id=5372)

# javascript - 从javascript获取默认打印机名称？

> ID：12565880
> 
> 赞同：1
> 
> 时间：2012-09-24T13:18:39.873
> 
> 标签：javascript, zebra-printers

是否可以从 javascript 中获取默认打印机的名称？如果默认打印机不符合我的应用程序要求，我只需要打印机的名称并显示一个对话框，要求用户手动更改他的默认打印机。我使用普通的 javascript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:21:02.183

在“普通”javascript 中，这是不可能的。如果您使用一些与 HTML5 相关的 API，请在您的问题中添加更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:25:07.233

这是不可能的。

相关：[从页面禁用浏览器打印选项（页眉、页脚、边距）？](https://stackoverflow.com/questions/1960939/disabling-browser-print-options-headers-footers-margins-from-page)

您当然可以使用`@media print { ... }`样式表或元素`media='print'`更改打印页面的布局。`link`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:37:30.103

您可以使用 Flash 或 Java 小程序或 silverlight 来识别默认打印机名称。它仅在客户端具有这些插件时才有效。

或者，您可以使用*ActiveXObject()*访问它。但要注意：*它的 IE 特定*。这取决于您网站的用户。甚至 VBScript 也适用于 IE 浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-07T07:27:01.613

```
var oShell = new ActiveXObject("WScript.Shell");
sRegVal = 'HKEY_CURRENT_USER\\Software\\Microsoft\\Windows NT\\CurrentVersion\\Windows\\Device';

var sName = oShell.RegRead(sRegVal) 
```

来自：[codeproject：如何使用 javascript 获取客户端打印机名称](http://www.codeproject.com/Questions/104211/How-to-get-the-client-printer-name-using-JavaScrip)

# sql-server - 远程现有数据库上的实体框架

> ID：12565885
> 
> 赞同：1
> 
> 时间：2012-09-24T13:18:57.407
> 
> 标签：sql-server, asp.net-mvc-3, entity-framework

我正在尝试上传一个使用 EF 4 Code First 的 MVC 项目。

我偶然发现了我只能通过管理控制台创建数据库的问题，而 EF 严格要求自己创建数据库。

如何让 EF 使用我为它创建的（已经存在但为空的）数据库？连接字符串是正确的，它可以连接，但我得到这个错误：

```
Model compatibility cannot be checked because the database does not contain
model metadata. Model compatibility can only be checked for databases created
using Code First or Code First Migrations. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:12:32.690

当您将 DropCreateDatabaseIfModelChanges 作为初始化程序时，EF 检查模型是否有更改的方式是查看保存在数据库中的模型元数据并查看是否有任何更改。由于之前创建的数据库中没有这样的元数据（因为它是在没有 EF 的情况下创建的），所以它没有可比较的东西，因此给了你这个错误。

为避免继续出现此问题（并且不必使用控制台），请使用不同的初始化程序，例如 EF 4.3 的 MigrateDatabaseToLatestVersion。我用我的项目的现有数据库做到了这一点，它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:27:53.590

好的，我使用 NuGet 让它像这样工作：

```
PM> add-migration Initial 
```

然后我`AutomaticMigrationsEnabled = false;`在`Configuration.cs`. 然后：

```
PM> Update-Database 
```

它毫无怨言地完成了工作。然后我再次运行该应用程序，它工作。

# c - 使用c语言的算术表达式树

> ID：12565887
> 
> 赞同：0
> 
> 时间：2012-09-24T13:19:11.760
> 
> 标签：c, binary-tree, expression-trees

我需要弄清楚如何创建算术表达式树。

我可以只使用一组数字来创建简单的二叉树。下面有一个代码示例：

这是我的树的简单节点。

```
typedef struct _node {
    int key;
    struct _node *left, *right;
} node; 
```

这就是我向二叉树添加新节点的方式：

```
node* add_tree(node *root, int val) {    
    if(NULL == root) {
        root = crnode(val);
    }    
    if (val < root->key) {
        if (NULL == root->left) {
            root->left = crnode(val);
        }
        else {
            add_tree(root->left, val);
        }
    }

    if (val > root->key) {
        if (NULL == root->right) {
            root->right = crnode(val);
        }
        else {
            add_tree(root->right, val);
        }
    }    
    return root;
} 
```

这是我向树中添加新数字的主要功能和步骤：

```
int main(int argc, const char * argv[])
    {    
        node *tree = add_tree(NULL, 5);
        tree = add_tree(tree, 6);
        tree = add_tree(tree, 7);
        tree = add_tree(tree, 3);
        return 0;
    } 
```

我的问题是：如何转换这段代码，我不仅可以使用数字，还可以使用运算符（例如 + - / *）。

例如，我需要将表达式 5 * (10 - 5) + 6 * 4 转换为树。我怎样才能做到？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T13:52:56.033

表达式中的节点是以下两种情况之一：运算符或值。所以你需要划定。有几种方法可以做到这一点，但由于这是家庭作业，我倾向于有点谨慎，让你使用迄今为止学到的编程概念来解决一些问题。

所以我决定通过展示如果你的节点工作时你的树可能会是什么样子来帮助你：

```
 +
     / \
    /   \
   /     \
  *       *
 / \     / \
5   -   6   4
   / \
  10  5 
```

您可能想放弃“构建树”的概念，而将其视为“构建表达式”。这可能是阻碍你前进的原因。您最终可能会得到一些像这样使用的函数：

```
node *expr = subtract(value(10), value(5)); 
```

这构建了树的一部分。看看发生了什么？=)

# ios - iOS - 创建一个依赖于标准框架的静态库

> ID：12565893
> 
> 赞同：3
> 
> 时间：2012-09-24T13:19:25.737
> 
> 标签：ios, static-libraries

我正在为依赖于内置安全框架的 iOS 6 创建一个静态库，但在让它工作时遇到了一些问题。当我构建包含安全框架的库时，一切都按预期构建。但是，当我通过一个新的 Workspace 项目将我的静态库拉入我的测试应用程序所在的 Workspace 并尝试构建包含该库的应用程序时，我遇到了一些构建错误。我已经追踪到由测试应用程序找不到安全框架引起的构建错误。我已将静态库目标添加到我的测试应用程序中，并像在其他库上一样设置标题搜索路径，但仍然出现相同的错误。所以我的问题是，如果你在静态库中包含一个框架，比如安全框架，

谢谢大家！

编辑：另外，我可能会补充一点，我试图在我的测试应用程序中包含安全框架并且错误消失了。所以我知道这与没有通过库链接有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:23:57.733

Xcode 不链接依赖项，因此如果一个项目使用您的框架，并且您的框架具有依赖项，那么该项目也需要包含依赖项

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:25:01.010

不要在你的静态库中包含其他库 - 如果两个静态库定义相同的符号，它可能会引起各种麻烦（如[这个谷歌搜索](https://www.google.co.uk/search?q=duplicate%20symbol%20static%20library)所示：）

你应该只在你的最终应用程序中包含安全框架，并且应该将你的静态库记录为对安全框架的依赖。

是的，这有点混乱，如果您要构建大量静态库，我敢肯定那里有库依赖框架，但如果它只有几个，那么这可能是最好的方法。

* * *

编辑阅读@wattson12 的答案后，我只真正涵盖了静态链接的依赖项，而不是框架:( 他的回答更好地涵盖了您的情况。

# apache - Apache vhosts 配置 RewriteCond 以忽略部分 URL

> ID：12565894
> 
> 赞同：0
> 
> 时间：2012-09-24T13:19:28.877
> 
> 标签：apache, .htaccess, redirect, vhosts, apache-config

我正在尝试使用 Apache vhosts 配置控制我网站上的重定向。

我有两个字母的区域设置，例如`/fr`, `/de`, `/es`，我目前正在忽略它，您将从下面的 vhosts 文件中看到。但是，我也有一个 301 永久重定向设置来重定向 /cm （和`/fr/cm`，`/es/cm`等等）到另一个页面 - 这是在我的后端系统中控制的。

复杂之处在于，当我添加被 RewriteCond 捕获的行时，`RewriteCond %{REQUEST_URI} !^/cm`然后我根本无法访问`/fr`,`/de`等*，*因为它们似乎陷入了循环并转到：然后是 HTTP 500 内部服务器错误。`/es`*`www.ayrshireminis.com/fr/fr/fr/fr/fr/fr/fr/fr`*

 *我如何更改 RewriteCond 以允许：

*   /pa（这将被重定向到 /minis，但它在数据库中控制，需要保持为有效 URL）
*   /fr（地区）
*   /fr/pa
*   /es/pa

等等

```
 # ----------------------------------------------------------------------
    # REGION SPECIFIC REDIRECTIONS
    # Below will remove region specific part of URL and load content from main UK site
    # ----------------------------------------------------------------------
    RewriteCond             %{REQUEST_URI}                  ^/([a-z]{2})$                   [OR]
    RewriteCond             %{REQUEST_URI}                  ^/([a-z]{2}/)(.*)$
    RewriteCond             %{REQUEST_URI}                  !^/cm
    RewriteRule             ^([a-z]{2}/|[a-z]{2})(.*)$      /$2                                             [L,QSA]

    # For VirtualDocumentRoot development instance configurations
    RewriteRule ^([^.]+)$ /index.php?url=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T01:31:06.660

我想我在这里看到了你的麻烦。您问题的格式似乎掩盖了第一行`[OR]` 末尾的和RewriteRule 本身的 。`RewriteCond``[L,QSA]`

这是我建议您尝试的方法：

```
RewriteCond %{REQUEST_URI} !^/cm
RewriteCond %{REQUEST_URI} ^/([a-z]{2})/?(.*)$
RewriteRule .*   $2 [L,QSA] 
```

我更喜欢使用“守护者”模式来丢弃任何从一开始就不会触及的东西。您列出的指令的逻辑似乎存在错误。前两个指令似乎是说“如果 REQUEST_URI**仅以**两个字符开头，**或者**它仅以两个字符开头，有一个“/”，然后直到最后，**然后**继续处理。

如果 REQUEST_URI 是“/fr”，它将匹配`RewriteCond`您在问题中包含的第一个指令。但如果它确实符合这个，那么它会做什么呢？如果您要重写第二个括号分组，并且如果模式没有检测到第二个括号分组，那么如果没有要重定向的内容，如何进行任何重定向？然后，该请求将在您的配置中进一步传递给后续的重写规则。

我也觉得`RewriteRule`可能不好。在您**当前**的指令中，您可能应该拥有：

```
RewriteRule ^/([a-z]{2}/|[a-z]{2})(.*)$ /$2 [L,QSA] 
```

您可能应该添加前导“/”字符，否则“$2”可能会匹配整个 REQUEST_URI。REQUEST_URI 应始终以“/”开头。

您可能已经尝试过，但建议您启用更详细的日志记录，`tail`当您将模式输入浏览器并点击该站点时，该日志文件以查看模式是否匹配。我目前使用这个：

```
RewriteEngine On
RewriteLog /usr/local/apache2/logs/rewrite.log
RewriteLogLevel 3 
```

我无法解释为什么您最终会进入重定向循环，因为`[L]`应该防止这种情况发生。我能想到的唯一一件事是，如果您的应用程序的其他方面，在这些指令之外，涉及重定向，它们可能会以某种方式引发这种行为，并将请求反馈给 Apache。更详细的日志记录可能有助于隔离它，再加上您的 access_log。*

# c# - BindingSource 取消添加新

> ID：12565895
> 
> 赞同：2
> 
> 时间：2012-09-24T13:19:29.203
> 
> 标签：c#, .net, datagridview, bindingsource

是否可以取消在`BindingSource.AddingNew`事件处理程序中添加项目？

当用户单击我的“添加新”按钮时`BindingNavigator`，我正在打开一个对话框，该对话框可能会或可能不会返回有效文件。现在，我有这样的事情：

```
void bindingSource_AddingNew(object sender, AddingNewEventArgs e)
{
    using (var dialog = new OpenFileDialog())
    {
        var result = dialog.ShowDialog();

        // user canceled?
        if (result == DialogResult.Cancel)
            return;

        // TryLoad will return null on failure
        var data = TryLoad(dialog.FileName);

        // only add the item to the grid if not null
        if (data != null)
            e.NewObject = data;
    }
} 
```

即使我没有`e.NewObject`在处理程序中设置值，DataGridView 中也会出现一个新的（“空”）项。

是否可以取消添加项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T13:25:52.163

如果您的 BindingSource 实现了[ICancelAddNew](http://msdn.microsoft.com/en-us/library/system.componentmodel.icanceladdnew.aspx)接口，您应该能够在新添加的对象上调用 CancelNew 来恢复它。我不建议在 AddNew 的事件处理程序中尝试此操作。通过使用此接口，您的项目仍将添加到列表中，但处于挂起状态，其中 EndNew() 将提交事务，而 CancelNew() 将恢复事务。看起来[BindingList](http://msdn.microsoft.com/en-us/library/ms132679.aspx)实现了 ICancelNew 并允许您执行以下操作：

```
public void MyFunctionWhereIAddNew()
{
    var item  = _myBindingSource.AddNew();

    item.SetSomeParams(...);

    if(item.CheckItemForSuccess() != true)
    {
        _myBindingSource.CancelNew(_myBindingSource.IndexOf(item));
    }
} 
```

如果您想获得有关如何实施自己的 ICancelNew 的链接，请查看[此旧博客文章](http://www.teamjohnston.net/blogs/jesse/2006/12/default.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T21:15:18.923

一个简单的解决方案：

1.  清除“属性”窗口中的 BindingNavigator“AddNewItem”属性，使其不会触发 bindingsource AddNewItem。
2.  在 bindingNavigator 中双击加号，为加号按钮生成 Click 事件并手动控制添加新项的过程，如下所示：

    ```
    private void bindingNavigatorAddNewItem_Click(object sender, EventArgs e)
    {
        using (var dialog = new OpenFileDialog())
        {
            if (dialog.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            {
                var data = TryLoad(dialog.FileName); ;

                if (data != null)
                {
                    myBindingSource.Add(data);
                }
            }
        }
    } 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-09T11:13:16.050

一个简单的解决方案在我将它变成任何类似产品之前肯定需要添加一些内容是取消绑定导航器*AddNew*点击事件中的编辑。

您确实需要在 bindingSource_AddingNew(..) 中设置一个布尔值，以指示您是否要取消编辑。

```

private void bindingNavigatorAddNewItem_Click(object sender, EventArgs e)
{       
    如果（取消编辑）
        bindingSource.CancelEdit();
}

```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T09:12:26.937

这是可能的，但以一种**非常**丑陋的方式。您必须覆盖的添加按钮的单击事件`BindingNavigator`。下面提供的解决方案测试和工作，但显然不适合任何生产系统。我在生产系统中有一个这样的代码来重新排序事件处理程序。我不喜欢它，但它有效。

```
public partial class Form1 : Form
{
    public MethodInfo refreshMethod;
    public Form1()
    {
        InitializeComponent();

        // Build Data
        var list = new List<MyData>
            {
                new MyData {Id = 1, Str = "1"},
                new MyData {Id = 2, Str = "2"}
            };

        //Bind Data
        bindingSource1.DataSource = list;
        dataGridView1.DataSource = bindingSource1;
        bindingNavigator1.BindingSource = bindingSource1;

        // get event handler storage property
        var eventsProperty = bindingNavigator1.AddNewItem.GetType().GetProperty(
            "Events",
            BindingFlags.FlattenHierarchy | BindingFlags.NonPublic | BindingFlags.Instance
            );

        // get key for click event
        var clickField = bindingNavigator1.AddNewItem.GetType().GetField(
            "EventClick",
            BindingFlags.FlattenHierarchy | BindingFlags.NonPublic | BindingFlags.Static
            );

        var clickKey = clickField.GetValue(null);

        // find refresh method
        refreshMethod = bindingNavigator1.GetType().GetMethod(
            "RefreshItemsInternal",
            BindingFlags.FlattenHierarchy | BindingFlags.NonPublic | BindingFlags.Instance
            );

        // get storage instance
        var handlers = (EventHandlerList)eventsProperty.GetValue(bindingNavigator1.AddNewItem, null);
        // find click event handlers
        var clickEventHandlers = handlers[clickKey];

        // remove current handlers
        var handlerInvocationList = clickEventHandlers.GetInvocationList();
        for (int index = 0; index < handlerInvocationList.Length; index++)
            handlers.RemoveHandler(clickKey, handlerInvocationList[index]);

        // attach our new handler
        handlers.AddHandler(clickKey, new EventHandler(NewAddNewHandler));
    }

    private void NewAddNewHandler(object sender, EventArgs e)
    {
        if (bindingNavigator1.Validate() && null != bindingNavigator1.BindingSource)
        {
            var result = MessageBox.Show("Add new?", "Are you..", MessageBoxButtons.YesNo) == DialogResult.Yes;

            if (!result)
                return;

            bindingNavigator1.BindingSource.AddNew();
            refreshMethod.Invoke(bindingNavigator1, null);
        }
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T15:20:40.813

你能用按钮处理添加吗？如果是这样，您可以设置按钮单击事件以在调用 DataGridView 的 Add 方法之前检查所有参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-25T11:14:12.860

我的建议是重写从 BindingSource 继承的类中的 AddNew 方法。

```
public override object AddNew() {
{
  if (CreateNewItem( out newItem))
  {
    base.Add(newItem);
    return newItem;
  }
  return null;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-28T13:35:00.010

如果您正在显示一个对话框表单，用于从某个数据源的表中添加或编辑数据，您可以随时简单地使用`BindingSource.CancelEdit()`函数来取消添加新行并使用`BindingSource.EndEdit()`来接受和结束编辑输入的有效上传数据例如，在您的数据库上，在添加/编辑对话框表单中使用这些代码行（其文本框绑定到 contactsBindingSource）：

```
Private Sub btnOK_Click(sender As Object, e As EventArgs) Handles btnOK.Click
    contactsBindingSource.EndEdit()
    contactsTableAdapter.Update(contactsTable)
    contactsTable = contactsTableAdapter.GetData()
End Sub

Private Sub btnCancel_Click(sender As Object, e As EventArgs) Handles btnCancel.Click
    contactsBindingSource.CancelEdit()
    contactsTable = contactsTableAdapter.GetData()
End Sub 
```

# iphone - MKMapView clipsToBounds 在 iOS 6 上不起作用

> ID：12565896
> 
> 赞同：2
> 
> 时间：2012-09-24T13:19:32.027
> 
> 标签：iphone, objective-c, ios, mkmapview, ios6

我`MKMapView`在底部有一个透明工具栏。为了显示`mapView`我`clipsToBounds`禁用的工具栏后面：

```
self.mapView.clipsToBounds = NO; 
```

这曾经可以正常工作，但在 iOS 6 中就不行了。无论如何，地图剪辑（叠加不是顺便说一句）。

如果我放大`frame`我`mapView`的，工具栏会隐藏地图的“法律”链接。

有什么建议吗？

谢谢，乔臣

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:25:56.377

我找到了一个解决方案：合法视图是mapView的直接子视图。所以我可以把它往上挪一点。

```
UIView *legalView = nil;
for (UIView *subview in self.mapView.subviews) {
    if ([subview isKindOfClass:[UILabel class]]) { 
        // Legal label iOS 6
        legalView = subview;
    } else if ([subview isKindOfClass:[UIImageView class]]) {
        // google image iOS 5 and lower
        legalView = subview;
    }
}
legalView.frame = ... 
```

# javascript - 将所有类型为 1 的 xml 节点插入到带有 javascript 的变量中

> ID：12565899
> 
> 赞同：1
> 
> 时间：2012-09-24T13:19:41.510
> 
> 标签：javascript, xml

我有以下内容：

```
root = xmlDoc.documentElement;

for (i=0; i<root.childNodes.length; i++) {              

if (root.childNodes[i].nodeType==1){ // FILTERING NODE TYPE
myvar = root.childNodes.length;
alert (myvar.length);
}
} 
```

长度返回 7 - 这反映了所有节点类型（未过滤）。

我想要的是： myvar 应该只包含类型 1 的节点元素

我怎样才能做到这一点？

谢谢，L。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:21:18.983

使用 parseFloat 函数获取 int val 到 cpmpare

```
root = xmlDoc.documentElement;

for (i=0; i<root.childNodes.length; i++) {              

  if (parseFloat(root.childNodes[i].nodeType)==1){ // FILTERING NODE TYPE
     myvar = root.childNodes.length;
     alert (myvar.length);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:29:19.503

我不确定这是否真的符合您的目的，但它应该有效。

```
root = xmlDoc.documentElement;
var children = root.childNodes;
for (i=0; i<children.length; i++)
  if (children[i].nodeType==1) // FILTERING for element NODE TYPE
    alert(children[i]).length); 
```

让我知道您真正想要做什么，以便我可以编辑此答案以使其更适合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:30:09.687

您的代码将始终返回数组的长度，而不管它包含的节点类型如何。如果要获取等于1的节点类型数，可以使用下面的代码：

```
root = xmlDoc.documentElement;
var counter = 0;
for (i=0; i<root.childNodes.length; i++) {              
   if (root.childNodes[i].nodeType == 1){
      counter++;
   }
}
alert (counter); 
```

# php - 在magento中添加评论以订购

> ID：12565904
> 
> 赞同：3
> 
> 时间：2012-09-24T13:19:57.533
> 
> 标签：php, magento

我正在研究magento。我想添加一个功能，当用户下订单时，会在订单的历史评论中添加评论。我已经浏览了代码并知道该功能

```
 public function addStatusHistoryComment($comment, $status = false) 
```

在 order.php 中用于添加注释。我想在用户下订单时访问它。那么我该怎么做呢？有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T14:44:00.597

*与 Magento 中的任何东西一样，有很多方法。*

首先，您需要编写一个模块。在该模块中，您可以侦听结帐成功事件 - checkout_onepage_controller_success_action。使用模块 etc/config.xml 执行此操作，例如：

```
 <events>
        <checkout_onepage_controller_success_action>
            <observers>
                <whatever>
                    <type>singleton</type>
                    <class>whatever/observer</class>
                    <method>checkout_onepage_controller_success_action</method>
                </whatever>
            </observers>
        </checkout_onepage_controller_success_action>
    </events> 
```

在您的观察者中，您加载最后一个订单，将您的评论附加到它，然后您保存您的订单。您描述的方法将完美运行。您还可以处理订单状态，这样做可以让您在需要时向客户发送电子邮件：

```
public function checkout_onepage_controller_success_action($observer) {
    $orderIds=$observer->getData('order_ids');
    foreach ($orderIds as $orderId) {
        $order = new Mage_Sales_Model_Order();
        $order->load($orderId);

        ... Do Something!

        $order->setState('processing', 'invoiced', 'Hello World!');
        $order->save();
    } 
```

我希望这会有所帮助！

# mongodb - Spring数据MongoDb抛出错误连接被拒绝

> ID：12565910
> 
> 赞同：2
> 
> 时间：2012-09-24T13:20:10.747
> 
> 标签：mongodb, spring-data-mongodb

使用 Spring Data 连接到 mongodb 时出现以下错误：

```
java.io.IOException: couldn't connect to [/127.0.0.1:27017] bc:java.net.ConnectException: Connection refused: connect
at com.mongodb.DBPort._open(DBPort.java:228)
at com.mongodb.DBPort.go(DBPort.java:112)
at com.mongodb.DBPort.call(DBPort.java:79)
at com.mongodb.DBTCPConnector.call(DBTCPConnector.java:218)
at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:305)
at com.mongodb.DB.getCollectionNames(DB.java:284)
at org.springframework.data.mongodb.core.MongoTemplate$14.doInDB( 
```

请找到我的配置：

```
@Configuration
public class AppConfig {

public @Bean MongoOperations mongoTemplate(Mongo mongo) {
    MongoTemplate mongoTemplate = new MongoTemplate(mongo, "mydb");
    return mongoTemplate;
}

/*
 * Factory bean that creates the Mongo instance
 */
public @Bean MongoFactoryBean mongo() {
    MongoFactoryBean mongo = new MongoFactoryBean();
    mongo.setHost("10.6.120.180");
    mongo.setPort(27017);
    return mongo;
}

/*
 * Use this post processor to translate any MongoExceptions thrown in @Repository annotated classes
 */
public @Bean PersistenceExceptionTranslationPostProcessor persistenceExceptionTranslationPostProcessor() {
    return new PersistenceExceptionTranslationPostProcessor();
} 
```

}

Mongo-context-test.xml

```
 <mongo:db-factory dbname="mydb"/>
    <bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
    <constructor-arg ref="mongoDbFactory"/>
</bean> 
```

我是 Spring Data 和 MongoDB 的新手。请指教，为什么我会收到这个错误？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T14:26:38.157

您确定正在使用您的 AppConfig 类吗？

正如我在评论中提到的，您收到的错误表明您的程序正在尝试连接到服务器上的 MongoDB，`127.0.0.1`而您发布的 AppConfig 类清楚地表明您想要连接到 IP 地址`10.6.120.180`。

如果您以某种方式获取包含`mongo.setHost("localhost")`在[Github](https://github.com/SpringSource/spring-data-document-examples/blob/master/mongodb-hello/src/main/java/org/springframework/data/mongodb/examples/hello/AppConfig.java)上发布的示例代码中的 AppConfig 类，则可能会发生这种情况。

**更新：**根据 OP 的评论，`mongoTemplate`in的类引用`Mongo-context-test.xml`指向 Spring Framework 的默认`MongoTemplate`类。

根据 SpringSource 文档[Introduction to MongoTemplate](http://static.springsource.org/spring-data/data-document/docs/1.0.0.M2/reference/html/#d0e927)使用可以使用 Java 创建和注册 MongoTemplate 的实例**或**使用 Spring 的 XML`<beans/>`模式配置 MongoTemplate。

显然，使用`<beans/>`模式优先于您在 Java 中的实现。如果您使用 `<beans/>`架构，那么您需要使用`<mongo:mongo host="localhost" port="27017"/>`OP 在他的评论中指出的指定您的主机和端口要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T08:31:49.693

如果您打算使用自定义名称定义自己的配置 bean，则可以通过执行以下操作排除 Spring 的自动配置类：

```
@EnableAutoConfiguration(exclude={MongoAutoConfiguration.class, MongoDataAutoConfiguration.class}) 
```

或者

```
@SpringBootApplication(exclude={MongoAutoConfiguration.class, MongoDataAutoConfiguration.class}) 
```

**请记住：**当使用带有排除列表的 EnableAutoConfiguration/SpringBootApplication 时，请确保没有其他使用 EnableAutoConfiguration 或 SpringBootApplication 注释的类。

资料来源：[如何在 spring-boot 中禁用 spring-data-mongodb 自动配置](https://stackoverflow.com/questions/28747909/how-to-disable-spring-data-mongodb-autoconfiguration-in-spring-boot)

# php - PHP中的自定义语音识别

> ID：12565911
> 
> 赞同：1
> 
> 时间：2012-09-24T13:20:11.603
> 
> 标签：php, speech-recognition, speech-to-text

我是 PHP 的高级开发人员。我想用 PHP 但不是用英语制作一个自定义语音识别应用程序，我想用旁遮普语制作它。你能告诉我从哪里开始吗？你会遵循什么方法？文本应用程序有很多英语语音，但我想制作旁遮普语之一。这是我的母语梦想项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:07:08.887

通常对于 PHP，我会想到 Web 应用程序。语音识别的挑战是如何在网络上捕捉语音。有一些机制可以做到这一点。Chrome 支持文本输入的语音识别。请参阅[http://slides.html5rocks.com/#speech-input](http://slides.html5rocks.com/#speech-input)和[http://www.filosophy.org/2011/03/talking-to-the-web-the-basics-of-html5-speech-input/](http://www.filosophy.org/2011/03/talking-to-the-web-the-basics-of-html5-speech-input/) .

这些使用以下标签进行语音识别：

```
<input type=”text” speech x-webkit-speech /> 
```

我相信 Chrome 是目前唯一支持此功能的浏览器。有关更多信息，请参阅[在线语音到文本转换 php、javascript 或 flash](https://stackoverflow.com/questions/8693641/speech-to-text-conversion-php-javascript-or-flash-online)。对于其他浏览器，人们在网页中使用 Flash 或 Java 来捕获语音并将其发送到语音引擎进行处理。

要支持像旁遮普语这样的特定语言，您必须研究可用的各种语音引擎。我不知道目前有什么支持旁遮普语的，但是为了更好地了解不同的语音技术[文本到语音（语音生成）和语音到文本（语音识别）API？](https://stackoverflow.com/questions/6348770/text-to-speech-voice-generation-and-speech-to-text-voice-recognition-apis)可能是一个很好的起点。

# windows-phone-7 - 图钉点击事件

> ID：12565912
> 
> 赞同：1
> 
> 时间：2012-09-24T13:20:13.417
> 
> 标签：windows-phone-7, silverlight-4.0, bing-maps, pushpin

我有一组图钉，我已经为 foreach 中的所有图钉添加了点击事件。现在我需要找出点击了哪个图钉，以便相应地执行操作。下面是我的示例代码。

```
 private void setpins()
 {
            Pushpin pin = null;    

            lstpin.Add(new clsPushpin() { stores = "chennai", _loc= new locations() { lat = 13.04, longd = 80.17 } });
            lstpin.Add(new clsPushpin() { stores = "Karur", _loc = new locations() { lat = 10.58, longd = 78.07 } });
            lstpin.Add(new clsPushpin() { stores = "coimbatore", _loc = new locations() { lat = 11.00, longd = 77.00 } });

            foreach (clsPushpin cls in lstpin)
            {
                pin = new Pushpin();
                GeoCoordinate geo = new GeoCoordinate(cls._loc.lat, cls._loc.longd);
                pin.Location = geo;
                pin.Background = new SolidColorBrush(new Color() { A = 255, R = 0, G = 100, B = 120 });
                pin.Foreground = new SolidColorBrush(Colors.White);
                mymap.Children.Add(pin);
                pin.MouseLeftButtonUp += new MouseButtonEventHandler(pushpintap);
            }
            mymap.Center = pin.Location;
            mymap.SetView(pin.Location, 5.0);
  }

  private void pushpintap(object sender, MouseButtonEventArgs e)    
  {
      //Messagebox are what ever    
      MessageBox.Show("My lat long is:"+lat,+long);    
  } 
```

使用上面的代码片段，最后一个图钉的值被保存。但我想找到被选中通知/弹出相应的确切引脚。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T11:53:04.877

您可以执行以下操作：

将 clsPushpin 对象存储在 Pushpin Tag 属性中。

在图钉单击事件中，将 sender.tag 转换为 clsPushpin 对象以获取该图钉的数据。

```
 foreach (clsPushpin cls in lstpin)
        {
            pin = new Pushpin();
            GeoCoordinate geo = new GeoCoordinate(cls._loc.lat, cls._loc.longd);
            pin.Location = geo;
            pin.Background = new SolidColorBrush(new Color() { A = 255, R = 0, G = 100, B = 120 });
            pin.Foreground = new SolidColorBrush(Colors.White);
            mymap.Children.Add(pin);
            pin.MouseLeftButtonUp += new MouseButtonEventHandler(pushpintap);
            pin.Tag = cls;
        } 
```

然后在您的 pushpintap 事件处理程序中执行以下操作：

```
 private void pushpintap(object sender, MouseButtonEventArgs e)    
  {
  //Messagebox are what ever    
    clsPushpin cls = sender.tag as clsPushpin;

    MessageBox.Show("My lat long is:"+cls.lat.ToString()+","+cls.long.ToString());    
  } 
```

您可能应该使用数据绑定将数据绑定到图钉集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T22:10:21.513

您应该`sender`在`pushpintap`事件中查询以找出被点击的引脚的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T23:28:39.313

我遇到了类似的问题，正在寻找解决方案，我找到了您的问题。我所做的是定义一个`MouseButtonEventHandler`动态创建的方法。例如，如果您想显示有关每个`cls`对象的信息，您可以定义下一个方法：

```
 public MouseButtonEventHandler getHandler(clsPushpin cls)
    {
        return delegate(object sender, MouseButtonEventArgs e)
            {
                MessageBox.Show(cls.stores+" at "+cls._loc.lat+","+cls._loc.longd);
            };
    } 
```

并在每次创建/添加时调用它`Pushpin`：

```
pin.MouseLeftButtonUp += getHandler(cls); 
```

【我试过不定义`getHandler`方法就直接做（也就是`pin.MouseLeftButtonUp += delegate(...`：）还是不行】

# django - Django：从特定索引过滤查询

> ID：12565913
> 
> 赞同：0
> 
> 时间：2012-09-24T13:20:18.480
> 
> 标签：django

我浏览了 Django 查询集，我发现了很多方法来限制 django 中的查询集

但现在我正在为我的问题寻找解决方案

假设如果我想过滤从 id 10 到最后的数据

```
get_meetings = Meeting.objects.all()  # will return the all meeting from 0 to last 
```

我想要从索引 10 到最后的所有会议的详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:21:58.167

您只需使用标准的 Python 切片语法。

```
Meeting.objects.all()[10:] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:54:59.513

一种解决方案可能是

```
Meeting.objects.filter(id__gte=10) 
```

# integration - 仅集成 Alfresco 的 DM（文档管理）

> ID：12565914
> 
> 赞同：0
> 
> 时间：2012-09-24T13:20:21.137
> 
> 标签：integration, alfresco, dm

仅集成 Alfresco 的 DM（文档管理）

我有一个问题，我们正在为 Alfresco 与我们的应用程序集成进行 POC（概念证明），我们将仅将 Alfresco 用于文档管理目的，仅用于其他目的。

我们将为 Alfresco DM 开发我们自己的 UI，因此我们将与 Alfresco Foundation API 连接/集成。

所以谁能告诉我这是否可以直接从 Alfresco 获取 DM 用于嵌入式 Alfresco 部署/集成，或者（更难的方式）删除/注释除 DM 相关的所有 Spring bean 及其从配置 xml 文件中的引用。

我们为什么要这样做是 ---> Alfresco 中的非 DM 相关实现及其依赖 jar 使我们的应用程序的 EAR 大小超过 200MB，这不仅会影响 maven 编译和构建总代码以及未来代码的开发和发布JBoss 中 EAR 的时间在 15 -20 分钟范围内。

如果有人以前尝试过这个，请提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:32:24.093

几年前，我尝试将其[`FirstFoundationClient`](http://svn.alfresco.com/repos/alfresco-open-mirror/alfresco/HEAD/root/projects/sdk/samples/FirstFoundationClient/)作为 Maven 项目进行引导。虽然确实可以将其拉下来并且只选择您需要的工件（尽管不要期望将整个尺寸减少到 1/10），但它不如它的`ant`对应物那么直接。

我建议您查看 Maven 对 Alfresco[项目](http://code.google.com/p/maven-alfresco-archetypes/)的支持并为您的项目派生 POM 结构。

我将从`FirstFoundationClient`引导您的构建配置开始，因为它实际上只依赖于核心服务。

# liferay - 如何使用自定义权限修改 Liferay 的 Book Portlet？

> ID：12565915
> 
> 赞同：0
> 
> 时间：2012-09-24T13:20:25.283
> 
> 标签：liferay, portlet, liferay-6

我正在使用 liferay 6 CE 并成功集成了 book-portlet 及其工作正常。

现在我想修改这个 book-portlet 以在没有用户权限时隐藏`submit`和按钮。`reset`

我已经使用以下代码更改了`view.jsp`and `display_action.jsp`：

我的`display_action.jsp`：

```
<%@ include file="/init.jsp"%>

<%
ResultRow row = (ResultRow)request.getAttribute(WebKeys.SEARCH_CONTAINER_RESULT_ROW);
Books book = (Books)row.getObject();
long groupId = themeDisplay.getLayout().getGroupId();
String name = Books.class.getName();
String bookId = String.valueOf(book.getPrimaryKey());
%>

<c:if
    test="<%= permissionChecker.hasPermission(groupId, name,bookId,\"DELETE\") %>">
    <portlet:actionURL name="deleteBooks" var="deleteURL">
        <portlet:param name="bookId" value="<%=bookId%>" />
    </portlet:actionURL>
    <liferay-ui:icon image="delete" url="<%=deleteURL.toString() %>" />
</c:if>
<c:if
    test="<%= permissionChecker.hasPermission(groupId, name,bookId,\"ADD_BOOKS\") %>">
    <portlet:actionURL name="addBook" var="addBookURL">
        <portlet:param name="bookId" value="<%=bookId%>" />
    </portlet:actionURL>
    <aui:fieldset>
        <aui:button-row>
        <p>
            <aui:button class="aui-button-input" type="submit" value="Submit" />
            <aui:button class="aui-button-input" type="reset" value="Reset" />
        </p>
        </aui:button-row>
    </aui:fieldset>
</c:if> 
```

我的`view.jsp`文件如下：

```
<%@ include file="/init.jsp"%>
<%
Books book = (Books) request.getAttribute("book");
if (book == null) {
    book = new BooksImpl();
    Calendar now = CalendarFactoryUtil.getCalendar();
    now.set(1970, 1, 1);
    book.setDateOfPurchase(now.getTime());
}
%>

<liferay-portlet:actionURL name="addBook" var="addBookURL"></liferay-portlet:actionURL>
<liferay-ui:success key="book-added" message="book-added" />
<liferay-ui:success key="book-deleted" message="book-deleted" />
<liferay-ui:error key="error-deleting" message="error-deleting" />
<liferay-ui:error key="error-while-adding" message="error-while-adding" />

<aui:form action="<%=addBookURL.toString() %>" method="post" name="fm">    
    <aui:fieldset>
        <liferay-ui:error key="title-required" message="title-required" />
        <p>
            <aui:input name="title" label="Title" type="text"
                value="<%=book.getTitle() %>"></aui:input>
        </p>
        <liferay-ui:error key="author-required" message="author-required" />
        <p>
            <aui:input name="author" label="Author" type="text"
                value="<%=book.getAuthor() %>"></aui:input>
        </p>
        <liferay-ui:error key="pages-required" message="pages-required" />
        <liferay-ui:error key="pages-cannot-be-zero"
            message="pages-cannot-be-zero" />
        <p>
            <aui:input name="pages" label="Pages" type="text"
                value="<%=String.valueOf(book.getPages()) %>"></aui:input>
        </p>
        <liferay-ui:error key="dop-required" message="dop-required" />
        <p>
            <%
            Calendar dop = CalendarFactoryUtil.getCalendar();
            dop.setTime(book.getDateOfPurchase());
            %>
            <aui:input model="<%=Books.class %>" bean="<%=book%>"
                label="Date of Purchase" name="dateOfPurchase" value="<%= dop %>" />

        </p>
            </aui:fieldset>
</aui:form>

<liferay-ui:search-container emptyResultsMessage="no-books" delta="5">
    <liferay-ui:search-container-results>
        <%
        List<Books> tempResults = (List<Books>) BooksActionUtil
                        .getAllBooks(themeDisplay.getCompanyId());

        results = ListUtil.subList(tempResults,
                searchContainer.getStart(),
                searchContainer.getEnd());
        total = tempResults.size();

        pageContext.setAttribute("results", results);
        pageContext.setAttribute("total", total);
        %>
    </liferay-ui:search-container-results>

    <liferay-ui:search-container-row
        className="com.books.database.model.Books" keyProperty="bookId"
        modelVar="book1">

        <liferay-ui:search-container-column-text name="Title" property="title" />
        <liferay-ui:search-container-column-text name="Author"
            property="author" />
        <liferay-ui:search-container-column-text name="Pages" property="pages" />
        <liferay-ui:search-container-column-text name="Date of Purchase"
            property="dateOfPurchase" />
        <%
        long groupId = themeDisplay.getLayout().getGroupId();
        String name = Books.class.getName();
        String bookId = String.valueOf(book.getPrimaryKey());
        %>
        <c:if
            test="<%= permissionChecker.hasPermission(groupId, name,bookId,\"DELETE\") %>">
            <liferay-ui:search-container-column-jsp name="Delete"
                path="/jsps/display_actions.jsp" align="right" />
        </c:if>
        <c:if
            test="<%= permissionChecker.hasPermission(groupId, name,bookId,\"ADD_BOOKS\") %>">
            <liferay-ui:search-container-column-jsp name="addBook"
                path="/jsps/display_actions.jsp" align="right" />
        </c:if>

    </liferay-ui:search-container-row>

    <liferay-ui:search-iterator />

</liferay-ui:search-container> 
```

我面临的问题是当用户有权在每一行`ADD_BOOKS`显示我`submit`和`reset`按钮时。

我只是一个新手，通过谷歌搜索我已经成功地根据用户角色隐藏和显示按钮，但现在我面临这个小问题。

谁能指导我如何将这些按钮限制为一次。

# ruby-on-rails - 将资源显示页面路由到通用 url

> ID：12565920
> 
> 赞同：0
> 
> 时间：2012-09-24T13:20:56.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3

一旦登录到我的应用程序，我就会将用户发送到标准`users#show`页面。

```
def show
  @user = User.find(params[:id])
end 
```

但不是显示的 URL，`/users/50`我希望它只显示一个通用的`/welcome`. 我仍然需要访问视图中的用户数据，以便可以使用`<%= @user.name %>`.

那是直截了当的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:00:55.453

当然，这很简单。如果`@user`是登录用户，那么您必须在某处存储会话 cookie。只需使用它来设置用户。假设您的会话 cookie 存储了用户名，您将拥有如下内容：

```
def welcome
  @user = User.find_by_name(session[:user])
  # other controller code
end 
```

通常你不会像这样直接处理会话cookie，而是设置`current_user`并`ApplicationController`引用它。A`before_filter`是设置它的好方法，因此`current_user`在所有控制器中都可用：

```
before_filter :initialize_user

def initialize_user
   @current_user = User.find_by_name(session[:user]) if session[:user]
end 
```

然后你可以`@user`这样设置：

```
def welcome
  @user = current_user
  # other controller code
end 
```

还有其他方法可以做到这一点，但无论您做什么，都需要在某处设置会话 cookie 才能使其正常工作（因为没有关于用户的信息存储在欢迎 url 中）。

# node.js - 意外令牌非法 - response.write() 错误

> ID：12565931
> 
> 赞同：3
> 
> 时间：2012-09-24T13:21:23.163
> 
> 标签：node.js

作为一个类的 node.js 介绍，我使用它来编写一个处理简单登录/注销/用户 ID 系统的 cgi 脚本。但是我遇到了一个问题，因为我尝试使用该方法将 HTML 传递给客户端，但在开始字符串的引号上`response.write()`收到错误消息：`Unexpected Token ILLEGAL`

```
var response = require('HTTP');
login = inputReader('QUERY_STRING');

if (login === "false" || login === "logout") {
response.writeHead(200, {'Content-Type': 'text/html'});
response.write(
  " <!doctype html>
    <head>
      <title>Session Makes</title>
      <meta name='Author' content='Sam Judson'>
      <meta name='Contact' content='sjudson@marlboro.org'>
      <link rel='stylesheet' href='SessionMaker.css'>
    </head>
        <body>
          <h1>The way is shut.</h1>
          <form action='' method='put'>
            <input type='text' name='login'>
            <input type='submit' name='login' value='Login'>
            </form>
        </body>
        </html> "
);
}; 
```

错误在第 7 行开始的引号处引发。我已经尝试了所有我能做的事情（使用单引号而不是双引号、嵌套引号、删除引号、将字符串放在括号内等），但似乎什么也没有去工作。奇怪的是，我在网站上看到了许多与我正在尝试做的事情完全相同的例子，但没有这样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:53:45.300

似乎您的字符串格式错误，在 javascript 中，如果不转义换行符或在行上添加字符串，则无法将字符串继续到新行。

这将引发错误：

```
 var str = "Starting string
  trying to continue"; 
```

使用转义

```
 var str = "Starting string\
  trying to continue"; 
```

使用添加

```
 var str = "Starting string" +
  "trying to continue"; 
```

# php - 孩子如何在 SQL 中分辨出哪个父母是自己的？

> ID：12565932
> 
> 赞同：2
> 
> 时间：2012-09-24T13:21:25.317
> 
> 标签：php, sql, parent-child

我有一个关于之前已回答的帖子的快速问题。我会在那里张贴我，但由于它已经得到答复，我认为它已存档或在 SO 的年鉴中的某个地方。

关于下面帖子的选择答案，我如何创建我的数据库以便它可以确定孩子的特定父母？

即在下面的链接中，回答者使用了将“0”分配给家庭，将“1”分配给家具、花园和“2”分配给草坪护理的示例。因此，如果我要单击草坪护理，数据库如何知道父母是“花园”而不是“家具”，因为他们的父母 ID 都是 1？

[如何为我正在制作的产品目录创建目录？](https://stackoverflow.com/questions/12556657/how-do-i-create-a-directory-for-a-product-catalogue-im-making)

数据库表如下所示：

```
Categories
id | parent_id | name
1  | 0         | Home
2  | 1         | Garden
3  | 1         | Furniture
4  | 1         | Plumbing
5  | 2         | Lawn Care 
```

这将等同于如下的层次结构：

*   家
    *   花园
        *   草坪护理
    *   家具
    *   水暖

# php - Magento 1.7 - 如何扩展核心控制器

> ID：12565937
> 
> 赞同：4
> 
> 时间：2012-09-24T13:21:49.360
> 
> 标签：php, magento

我正在尝试使用此设置扩展 OnepageController：

应用程序/etc/modules/Custom_Checkout.xml

```
<config>
    <modules>
        <Custom_Checkout>
            <active>true</active>
            <codePool>local</codePool>
        </Custom_Checkout>
    </modules>
</config> 
```

应用程序/本地/自定义/结帐/etc/config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
    <modules>
        <Custom_Checkout>
            <version>0.0.1</version>
        </Custom_Checkout>
    </modules>
    <frontend>
        <routers>
            <checkout>
                <args>
                    <modules>
                        <custom_checkout before="Mage_Checkout">Custom_Checkout</custom_checkout>
                    </modules>
                </args>
            </checkout>
        </routers>
    </frontend>
</config> 
```

app/local/Custom/Checkout/controllers/OnepageController.php

```
require_once("Mage/Checkout/controllers/OnepageController.php");

class Custom_Checkout_OnepageController extends Mage_Checkout_OnepageController
{

    public function indexAction()
    {
    echo "Index overidden";
    }

} 
```

我见过这些： [扩展 magento 核心控制器 (Checkout/OnepageController)](https://stackoverflow.com/questions/7918499/extend-magento-core-controller-checkout-onepagecontroller)

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/0__-_module_development_in_magento/how_to_overload_a_controller](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/how_to_overload_a_controller)

加上一些我无法发布的内容，但上述方法似乎都不起作用。它只是不会覆盖控制器。

关于为什么这不被覆盖的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T22:53:34.267

不幸的是，这里有无数可能出错的地方，并且您的帖子中没有足够的信息来追踪它们。这是一个调试技巧，而不是答案。看一下`_validateControllerClassName`功能。

```
protected function _validateControllerClassName($realModule, $controller)
{
    $controllerFileName = $this->getControllerFileName($realModule, $controller);
    if (!$this->validateControllerFileName($controllerFileName)) {
        return false;
    }

    $controllerClassName = $this->getControllerClassName($realModule, $controller);
    if (!$controllerClassName) {
        return false;
    }

    // include controller file if needed
    if (!$this->_includeControllerClass($controllerFileName, $controllerClassName)) {
        return false;
    }

    return $controllerClassName;
} 
```

每个`return false`状态都是 Magento 可能决定不使用您的控制器类进行请求的状态。尝试在 if 语句的内部和外部添加一些日志记录`var_dump`或, `$controllerFileName`。`$controllerClassName`这通常足以指出文件路径名或类中的小错误（大小写、缺少字符等）来确定您的模块。

如果你没有看到任何与 相关的信息`Custom_Checkout`，这意味着 Magento 看不到你的模块，你应该开始调试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T20:08:22.727

我认为解决方案是有正确的案例。代替：

```
<custom_checkout before="Mage_Checkout">Custom_Checkout</custom_checkout> 
```

它应该拼写：

```
<Custom_Checkout before="Mage_Checkout">Custom_Checkout</Custom_Checkout> 
```

# installation - 安装文件后出现 NSIS 组件页面？

> ID：12565938
> 
> 赞同：0
> 
> 时间：2012-09-24T13:21:51.980
> 
> 标签：installation, components, nsis, sections

我的 NSIS 安装程序遇到了这个非常奇怪的问题，它显示组件页面/部分，在安装完所有内容之后？

我没有在我的另一个安装程序上得到这个，我无法弄清楚似乎是什么导致了这个..

Y。

编辑：

代码：

```
; Script generated by the HM NIS Edit Script Wizard.

; HM NIS Edit Wizard helper defines
!define PRODUCT_NAME "SnapShot BK"
!define PRODUCT_VERSION "1.0.4"
!define PRODUCT_PUBLISHER "DataAccess Europe"
!define PRODUCT_WEB_SITE "http://www.dataaccess.eu/"
!define PRODUCT_DIR_REGKEY "Software\Microsoft\Windows\CurrentVersion\App Paths\snapshotbk.exe"
!define PRODUCT_UNINST_KEY "Software\Microsoft\Windows\CurrentVersion\Uninstall\${PRODUCT_NAME}"
!define PRODUCT_UNINST_ROOT_KEY "HKLM"

; MUI 1.67 compatible ------
!include "MUI.nsh"
!include "Sections.nsh"

; MUI Settings
!define MUI_ABORTWARNING
!define MUI_ICON "C:\Documents and Settings\Yoshi\Desktop\Snapshot BK Installer\Files\snapshot.ico"
!define MUI_UNICON "C:\Documents and Settings\Yoshi\Desktop\Snapshot BK Installer\Files\snapshot.ico"

; Welcome page
!insertmacro MUI_PAGE_WELCOME

; License page
!define MUI_LICENSEPAGE_CHECKBOX
!insertmacro MUI_PAGE_LICENSE "C:\Documents and Settings\Yoshi\Desktop\Snapshot BK Installer\License Agreement.txt"

; Directory page
!insertmacro MUI_PAGE_DIRECTORY

;Variable for the icons_group
var ICONS_GROUP

;Start menu page
!define MUI_STARTMENUPAGE_NODISABLE
!define MUI_STARTMENUPAGE_DEFAULTFOLDER "SnapShot BK"
!define MUI_STARTMENUPAGE_REGISTRY_ROOT "${PRODUCT_UNINST_ROOT_KEY}"
!define MUI_STARTMENUPAGE_REGISTRY_KEY "${PRODUCT_UNINST_KEY}"
!define MUI_STARTMENUPAGE_REGISTRY_VALUENAME "${PRODUCT_STARTMENU_REGVAL}"
!insertmacro MUI_PAGE_STARTMENU Application $ICONS_GROUP

; Instfiles page
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_PAGE_COMPONENTS

; Finish page
!define MUI_FINISHPAGE_RUN "$INSTDIR\snapshotbk.exe"
!define MUI_FINISHPAGE_SHOWREADME "$INSTDIR\readme.txt"
!insertmacro MUI_PAGE_FINISH

; Uninstaller pages
!insertmacro MUI_UNPAGE_INSTFILES
!insertmacro MUI_UNPAGE_COMPONENTS

; Language files
!insertmacro MUI_LANGUAGE "English"

; MUI end ------

page components
page instfiles

Name "${PRODUCT_NAME} ${PRODUCT_VERSION}"
OutFile "C:\Documents and Settings\Yoshi\Desktop\Snapshot BK Installer\Setup.exe"
InstallDir "C:\Appl\SnapShot BK"
InstallDirRegKey HKLM "${PRODUCT_DIR_REGKEY}" ""
ShowInstDetails show
ShowUnInstDetails show

Section  "SnapShot BK AES" SEC01
  SetOutPath "$INSTDIR"
  SetOverwrite ifnewer
  File "C:\Documents and Settings\Yoshi\Desktop\Snapshot BK Installer\Files\snapshotbk.exe"
  CreateDirectory "$SMPROGRAMS\SnapShot BK"
  CreateShortCut "$SMPROGRAMS\SnapShot BK\Snapshot BK.lnk" "$INSTDIR\snapshotbk.exe"
  CreateShortCut "$DESKTOP\Snapshot BK.lnk" "$INSTDIR\snapshotbk.exe"
  File "C:\Documents and Settings\Yoshi\Desktop\Snapshot BK Installer\Files\snapshot.ico"
  File "C:\Documents and Settings\Yoshi\Desktop\Snapshot BK Installer\Files\settings.sts"
  File "C:\Documents and Settings\Yoshi\Desktop\Snapshot BK Installer\Files\readme.txt"
  File "C:\Documents and Settings\Yoshi\Desktop\Snapshot BK Installer\Files\Exclude.txt"
  File "C:\Documents and Settings\Yoshi\Desktop\Snapshot BK Installer\Files\AES\AESauth.sts"
SectionEnd

Section  "SnapShot BK RC4" SEC02
  SetOutPath "$INSTDIR"
  SetOverwrite ifnewer
  File "C:\Documents and Settings\Yoshi\Desktop\Snapshot BK Installer\Files\snapshotbk.exe"
  CreateDirectory "$SMPROGRAMS\SnapShot BK"
  CreateShortCut "$SMPROGRAMS\SnapShot BK\Snapshot BK.lnk" "$INSTDIR\snapshotbk.exe"
  CreateShortCut "$DESKTOP\Snapshot BK.lnk" "$INSTDIR\snapshotbk.exe"
  File "C:\Documents and Settings\Yoshi\Desktop\Snapshot BK Installer\Files\snapshot.ico"
  File "C:\Documents and Settings\Yoshi\Desktop\Snapshot BK Installer\Files\settings.sts"
  File "C:\Documents and Settings\Yoshi\Desktop\Snapshot BK Installer\Files\readme.txt"
  File "C:\Documents and Settings\Yoshi\Desktop\Snapshot BK Installer\Files\Exclude.txt"
  File "C:\Documents and Settings\Yoshi\Desktop\Snapshot BK Installer\Files\RC4\RC4auth.sts"
SectionEnd

Section -AdditionalIcons
  CreateShortCut "$SMPROGRAMS\SnapShot BK\Uninstall.lnk" "$INSTDIR\uninst.exe"
SectionEnd

Section -Post
  WriteUninstaller "$INSTDIR\uninst.exe"
  WriteRegStr HKLM "${PRODUCT_DIR_REGKEY}" "" "$INSTDIR\snapshotbk.exe"
  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}" "DisplayName" "$(^Name)"
  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}" "UninstallString" "$INSTDIR\uninst.exe"
  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}" "DisplayIcon" "$INSTDIR\snapshotbk.exe"
  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}" "DisplayVersion" "${PRODUCT_VERSION}"
  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}" "URLInfoAbout" "${PRODUCT_WEB_SITE}"
  WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}" "Publisher" "${PRODUCT_PUBLISHER}"
SectionEnd

Function un.onUninstSuccess
  HideWindow
  MessageBox MB_ICONINFORMATION|MB_OK "$(^Name) was successfully removed from your computer."
FunctionEnd

Function un.onInit
  MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2 "Are you sure you want to completely remove $(^Name) and all of its components?" IDYES +2
  Abort
FunctionEnd

Section "Un.SnapShot BK AES" SE01
  Delete "$INSTDIR\uninst.exe"
  Delete "$INSTDIR\Exclude.txt"
  Delete "$INSTDIR\readme.txt"
  Delete "$INSTDIR\settings.sts"
  Delete "$INSTDIR\snapshot.ico"
  Delete "$INSTDIR\snapshotbk.exe"
  Delete "$INSTDIR\AESauth.sts"
  Delete "$INSTDIR\Exclude.txt"
  Delete "$INSTDIR\readme.txt"
  Delete "$INSTDIR\settings.sts"
  Delete "$INSTDIR\snapshot.ico"
  Delete "$INSTDIR\snapshotbk.exe"

  Delete "$SMPROGRAMS\SnapShot BK\Uninstall.lnk"
  Delete "$DESKTOP\Snapshot BK.lnk"
  Delete "$SMPROGRAMS\SnapShot BK\Snapshot BK.lnk"

  RMDir "$SMPROGRAMS\SnapShot BK"
  RMDir "$INSTDIR"

  DeleteRegKey ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}"
  DeleteRegKey HKLM "${PRODUCT_DIR_REGKEY}"
  SetAutoClose true
SectionEnd

Section "Un.SnapShot BK RC4" SE02
  Delete "$INSTDIR\uninst.exe"
  Delete "$INSTDIR\Exclude.txt"
  Delete "$INSTDIR\readme.txt"
  Delete "$INSTDIR\settings.sts"
  Delete "$INSTDIR\snapshot.ico"
  Delete "$INSTDIR\snapshotbk.exe"
  Delete "$INSTDIR\RC4auth.sts"
  Delete "$INSTDIR\Exclude.txt"
  Delete "$INSTDIR\readme.txt"
  Delete "$INSTDIR\settings.sts"
  Delete "$INSTDIR\snapshot.ico"
  Delete "$INSTDIR\snapshotbk.exe"

  Delete "$SMPROGRAMS\SnapShot BK\Uninstall.lnk"
  Delete "$DESKTOP\Snapshot BK.lnk"
  Delete "$SMPROGRAMS\SnapShot BK\Snapshot BK.lnk"

  RMDir "$SMPROGRAMS\SnapShot BK"
  RMDir "$INSTDIR"

  DeleteRegKey ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}"
  DeleteRegKey HKLM "${PRODUCT_DIR_REGKEY}"
  SetAutoClose true
SectionEnd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:32:38.913

`Page`页面按语句或`!insertmacro MUI_PAGE_xx`列出的顺序显示

您放错了组件页面：

```
; Instfiles page
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_PAGE_COMPONENTS 
```

在文件安装过程之后，将出现此处用于选择组件的页面。

# c# - 无法在实体上设置字段/属性

> ID：12565943
> 
> 赞同：0
> 
> 时间：2012-09-24T13:22:04.457
> 
> 标签：c#, entity-framework

我一直在从事 DDD 模式中的实体框架项目。我不使用实体的默认自定义工具，我有一个存储库和一些模型类。

我的实体框架中有 3 个表：

1.  类别
2.  类别内容
3.  内容

类别与`categoryContent`内容具有`categoryContent`一对多的关系。（我在这里没有使用多对多，因为我在 CategoryContent 表中有一些属性）

当我在 MVC 中发送对列表的请求`CategoryContent`并显示 content.Title 时，我看到了这个错误：

`Unable to set field/property CategoryContents on entity type System.Data.Entity.DynamicProxies.Content_731FEFC3E064D6098DC133918117C2359E2F308D2EB1E5D8D986538641AAB7CD.`

但是当我跟踪时，程序没有任何问题并返回数据并显示。

我使用消息系统（服务项目中的请求和响应消息）。

此代码是返回列表的方法`contentcategory`。

```
 public IEnumerable<CategoryContent> GetContents(int categoryID)
    {
        Query query = new Query();
        OrderByClause order = new OrderByClause();
        order.PropertyName = "ID";
        order.Desc = true;
        query.OrderByProperty = order;
        query.Add(new Criterion("CategoryID", categoryID, CriteriaOperator.Equal));

        return  categoryContentRepository.FindBy(query);
    } 
```

categoryContentRepository 是 Repository 项目中 CategoryContentRepository 类的一个对象，用于管理数据库。

在 MVC 控制器中：

```
public ActionResult Content(int id)
    {
        var contentService = ServiceFactory.CreatContentService();
        var response = contentService.GetContents(id).ToList();

        return PartialView("_Content", response);
    } 
```

在视图中（_content.cshtml）：

```
@model List<Plus.Model.CategoryContent>

@foreach (var item in Model)
{
    @Html.ActionLink(item.Content.Title, "Amir")
} 
```

模型类：

```
public class Category: ValidationBase, IAggregateRoot
{
    public int ID { get; set; }

    [NotNullOrEmpty()]
    public string Name { get; set; }

    [NotNullOrEmpty()]
    public int Ordering { get; set; }

    public int? ParentID { get; set; }
public Guid ModifiedBy { get; set; }
public DateTime ModifiedOn { get; set; }
public string ModifiedReason { get; set; }
public bool Deleted { get; set; }
public bool Active { get; set; }

    public virtual Category Parent { get; set; }
    public virtual IList<Category> Childeren { get; set; }
    public virtual IList<CategoryContent> CategoryContents { get; set; }
}

public class CategoryContent : ModelBase, IAggregateRoot
{
    public int ID { get; set; }
    public int ContentID { get; set; }
    public int CategoryID { get; set; }

    public virtual Content Content { get; set; }
    public virtual Category Category { get; set; }
}

public class Content: ModelBase, IAggregateRoot
{
    public int ID { get; set; }
    public string Title { get; set; }
    public string Intro { get; set; }
    public int? ParentID { get; set; }
    public bool IsSeries { get; set; }
    public byte LikeVoteStatus { get; set; }

    public virtual IList<SubContent> SubContents { get; set; }
    public virtual Content Parent { get; set; }
    public virtual IList<Content> Childeren { get; set; }
    public virtual CategoryContent CategoryContents { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-25T11:37:06.773

内容模型的代码有一个错误：

```
public virtual CategoryContent CategoryContents { get; set; } 
```

正确的代码是：

```
public virtual IList<CategoryContent> CategoryContents { get; set; } 
```

# php - 我的本地主机变成了 localhost.com

> ID：12565945
> 
> 赞同：-3
> 
> 时间：2012-09-24T13:22:06.427
> 
> 标签：php, joomla, xampp, jomsocial

我正在使用[XAMPP](http://www.apachefriends.org/en/xampp.html)本地服务器。

我的本地主机变成了 localhost.com。当我在浏览器中为 ex (localhost/projects/test) 运行我的 localhost 时，url 变为 www.localhost.com/projects/test。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T22:30:09.313

如果您在运行 Mac Mountain Lion 操作系统 (10.8) 的计算机上工作，Apple 对该版本的操作系统进行了更改，导致某些问题出现，您需要更改计算机的某些设置才能使 localhost 正常工作适当地。[此页面](http://www.codepotato.co.uk/2012/07/25/enabling-localhost-on-os-x-mountain-lion/)提供了有关如何使 localhost 再次工作的很好的演练。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:23:37.377

尝试`http://localhost/...`而不是简单的`localhost/...`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:24:43.953

尝试`http://localhost/`有时网络浏览器会尝试比用户更聪明。

# iphone - 如何在没有故事板和基于页面的 xcode 中创建一个简单的基于导航的应用程序？

> ID：12565947
> 
> 赞同：-1
> 
> 时间：2012-09-24T13:22:09.187
> 
> 标签：iphone, ios, xcode

谁能给我一个例子，在 xcode 5.1 中创建最简单的基于导航的应用程序，而不使用故事板和基于页面的应用程序。我尝试了很多来找到它，但它在 xcode 4 中可用的每个地方。我想在基于单视图的应用程序中执行此任务。感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T05:00:32.313

我找到了我自己的问题的解决方案。在 ios 5.1 中，使用主从应用程序。**取消选中**情节提要和相关的复选框。将有一个简单的表格视图应用程序可供使用。根据您的要求修改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:16:43.997

在您必须取消选中 Use storyboards on project creation time 复选框之前，此链接将对您有所帮助

![在此处输入图像描述](../Images/eacfe0ce1dd8439430e8ce25fd37b317.png)
[http://www.ralfebert.de/tutorials/iosdev/navigationcontroller/](http://www.ralfebert.de/tutorials/iosdev/navigationcontroller/)

# sql-server - SQL Server 同服务器多连接请求

> ID：12565951
> 
> 赞同：0
> 
> 时间：2012-09-24T13:22:37.720
> 
> 标签：sql-server, request, database-connection

是否可以在 SQL Server 上包含`user id`和`password`在同一个请求中？

我想比较同一服务器中两个数据库的结果，但权限不同。

```
SELECT *
FROM 
(SELECT textField
FROM databaseONE.dbo.someTable 
) AS OLDVALUE

WHERE (textField) NOT IN 

(SELECT equivalentTextField
FROM databaseTWO.[dbo].otherTable
) 
```

如何添加`[user id = user1 | password = password1]`for`databaseONE`和`user id = [user2 | password = password2]`for`databaseTWO`

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:26:41.617

我认为这里有两个合理的选择：

1) 创建一个对两个数据库都具有权限的用户，并使用该用户执行此查询。

2) 如果 1 不合适，让调用程序进行两次调用，使用各自的凭据集对每个数据库进行一次调用，然后在调用应用程序中比较结果。

# android - 如何曲线布局角落？

> ID：12565952
> 
> 赞同：2
> 
> 时间：2012-09-24T13:22:41.400
> 
> 标签：android

这是我的嵌套布局如何将其角更改为曲线？图像 url 1 是我想做曲线的示例，它实现了 inblack berry 图像 url 2 是我的 android 代码我如何像这样的曲线布局？url1 是[http://imgur.com/dFUVF](http://imgur.com/dFUVF) url 2 是 [http://imgur.com/UMffI](http://imgur.com/UMffI)

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="500dp"

    android:background="#D3D3D3"
    android:orientation="vertical"
    android:paddingLeft="3dip"
    android:paddingRight="3dip"
    >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="120dp"

        android:background="#333333"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btnMiniStatement"
            style="@style/HomeButton"
            android:layout_width="wrap_content"
            android:drawableTop="@drawable/home_button1"
            android:onClick="onClickFeature"
            android:text="MINI STATEMENT" />

        <Button
            android:id="@+id/btnBalanceInquiry"
            style="@style/HomeButton"
            android:layout_width="wrap_content"
            android:drawableTop="@drawable/home_button2"
            android:onClick="onClickFeature"
            android:text="Balance Inquiry" />

        <Button
            android:id="@+id/btnUtilityBalanceInquiry"
            style="@style/HomeButton"
            android:layout_width="wrap_content"
            android:drawableTop="@drawable/home_button3"
            android:onClick="onClickFeature"
            android:text="Utility Balance Inquiry" />
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T13:30:16.507

在`res/drawable`创建一个新文件（例如curved_bg.xml）。在那个文件里放：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid android:color="#333333" />

    <corners android:radius="5dp" />

    <stroke
        android:width="1dp"
        android:color="#ffffff" />

</shape> 
```

在您的布局文件中将其设置为您内部的背景`LinearLayout`

```
android:background="@drawable/curved_bg" 
```

# javascript - 压缩 javascript

> ID：12565954
> 
> 赞同：1
> 
> 时间：2012-09-24T13:22:50.010
> 
> 标签：javascript

我根本不是一个 Javascript 程序员，但我已经找到了一种创建选项卡区域的方法（即，单击选项卡会显示不同的 DIV 内容），但我的代码看起来非常庞大。想知道是否有人可以启发我如何压缩它。

这是HTML：

```
<aside id="sb-popular">
  <p class="sb-popular-nav">
    <a id="sbpt1" class="current" href="javascript:showdiv('sbp-latest'); hidediv('sbp-commented'); hidediv('sbp-popular'); hidediv('sbp-views'); tabset('sbpt1'); taboff('sbpt2'); taboff('sbpt3'); taboff('sbpt4');">Latest</a>
    <a id="sbpt2" href="javascript:showdiv('sbp-commented'); hidediv('sbp-latest'); hidediv('sbp-popular'); hidediv('sbp-views'); tabset('sbpt2'); taboff('sbpt1'); taboff('sbpt3'); taboff('sbpt4');">Commented</a>
    <a id="sbpt3" href="javascript:showdiv('sbp-popular'); hidediv('sbp-commented'); hidediv('sbp-latest'); hidediv('sbp-views'); tabset('sbpt3'); taboff('sbpt1'); taboff('sbpt2'); taboff('sbpt4');">Popular</a>
    <a id="sbpt4" href="javascript:showdiv('sbp-views'); hidediv('sbp-commented'); hidediv('sbp-popular'); hidediv('sbp-latest'); tabset('sbpt4'); taboff('sbpt2'); taboff('sbpt3'); taboff('sbpt1');">Views</a>
  </p>
  <div id="sbp-latest">
    Content here
  </div>
  <div id="sbp-commented">
    Content here
  </div>
  <div id="sbp-popular">
    Content here
  </div>
  <div id="sbp-views">
    Content here
  </div>
</aside> 
```

如您所见，javascript 有点笨拙。这是我的 JS。

```
function hidediv(d) { document.getElementById(d).style.display = "none"; }
function showdiv(d) { document.getElementById(d).style.display = "block"; }
function tabset(d) { document.getElementById(d).style.color = "white";}
function taboff(d) { document.getElementById(d).style.color = "black";} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:32:54.687

1) It is not considered good practice to call javascript in the href. Instead use onclick and return false:

```
function showDiv() {
  .
  .
  .
  return false
} 
```

using

```
<a href="#" onclick="return showDiv('....')" 
```

2) you can assign the onclick in the head using

```
window.onload=function() {
  var links = document.getElementById('sb-popular').document.getElementsByTagName('a');
  for (...)  {
    links[i].onclick=function() {
      ..
      ..
      ..
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:26:20.650

首先，您需要考虑创建一个将隐藏所有选项卡的初始化函数

并显示默认选项卡。

然后在每个显示功能中，您需要将显示的选项卡隐藏然后显示

您单击的选项卡。

你的开始很好，继续前进！

# android - 将空字段与字符串进行比较？

> ID：12565955
> 
> 赞同：1
> 
> 时间：2012-09-24T13:22:50.587
> 
> 标签：android, string, compare

我使用光标从数据库表中获取某个值。它从类型为“TEXT”的列中取出。这个想法是该列的标准值是空白的，但是当单击某个按钮时，查询会为其添加“true”。

```
String var = c.getString(1); //use cursor to get value 
```

但是当我想用它来比较一个字符串时，fe

```
if(var.equals("true")) {
//do something crazy
} 
```

我在数据库中没有填写任何内容的项目上收到错误消息。只有实际填写“true”的字段不会出错。我试过 c.getString(1).toString(); 但这并不能解决问题……有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:25:02.767

这样做：

```
if(var != null && !var.equals("")) 
```

这样你就可以同时控制空字符串和空字符串..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:25:53.160

检查应该如下所示

```
if("true".equals(var)) { 
```

这样你就不会得到`NullPointerException`

正如[Cursor#getString](http://developer.android.com/reference/android/database/Cursor.html#getString%28int%29) Javadoc中所建议的那样

> **当列值为 null**或列类型不是字符串类型时，结果以及此方法是否引发异常是实现定义的。

在检查数据库中的值之前，您应该使用[Cursor#isNull](http://developer.android.com/reference/android/database/Cursor.html#isNull%28int%29)或[Cursor#moveToFirst 。](http://developer.android.com/reference/android/database/Cursor.html#moveToFirst%28%29)

```
 if(!c.isNull(1))
 //Get Value here

Or 

if(c.moveToFirst())
 //get value here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T13:26:32.950

```
if("true".equals(var)) {
  //do something crazy
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T13:27:26.413

您的问题不在于选角（您应该阅读 LogCat）。您应该首先检查游标是否包含数据，然后再获取它：

```
String var = "";    
if (c.moveToFirst())
var = c.getString(1); 
```

然后做你的检查。

```
if(var.equals("true")) { //do something crazy } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T13:28:04.813

```
 firstly check the 
 if(var.trim.equals("")) {
    //do your task
 } 
```

# android - ListView：添加一个项目，然后使用后退按钮返回刷新的列表

> ID：12565958
> 
> 赞同：-1
> 
> 时间：2012-09-24T13:23:06.907
> 
> 标签：android

我的安卓应用有问题。

我有一个`ListView`，它`ListView`从数据库中获取数据，然后通过`SimpleCursorAdapter`.

现在我有一个按钮可以向数据库添加一个新条目，然后启动一个新意图，我创建一个新项目并将其添加到数据库中。添加后，我转到一个新页面。

现在我想要以下内容：

当我进入新页面时，我按下后退按钮，我不想被转发到创建新项目页面，我想跳过它直接回到`ListView`. 另一个问题是`ListView`应该显示新条目。它应该以某种方式刷新。

如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:30:32.410

1.  当您创建新的 Intent 以将项目添加到数据库时，请确保您设置`Intent.FLAG_ACTIVITY_NO_HISTORY`了新的 Intent 不会保留在历史堆栈中，例如：`myIntent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY)`

2.  当适配器基础数据发生更改并且您希望更改反映在 ListView 中时，请调用适配器`notifyDataSetChanged()`方法（在您的情况下，单击后退按钮），例如：`myAdapter.notifyDataSetChanged()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:29:28.983

首先，使用 启动您的活动（向数据库添加新元素）`startActivityForResult()`，因此当该活动完成时（例如通过按下后退按钮），`onActivityResult()`将在调用活动（具有列表的活动）上调用回调。在此方法中，再次运行填充列表的查询，`SimpleCursorAdapter`使用结果光标创建一个新的，并通过`setAdapter()`.

# sql-server-2005 - 从 SSIS 执行 SQL 任务返回整数值

> ID：12565964
> 
> 赞同：4
> 
> 时间：2012-09-24T13:23:20.280
> 
> 标签：sql-server-2005, ssis, parameter-passing

我正在使用 SQL Server 2005 Business Intelligence Studio 并努力从一个非常简单的执行 SQL 任务中返回一个整数值。对于一个非常简单的测试，我将 SQL 语句编写为：

```
Select 35 As 'TotalRecords'
```

然后，我将 ResultSet 指定为

```
ResultName = TotalRecords and
VariableName = User::TotalRecords 
```

当我执行这个时，语句被执行，但变量没有更新的值。但是，它具有我在变量定义时指定的默认值。

日期变量的返回有效，但整数变量无效。指定的类型`User::TotalRecords`是包范围内的 Int32。

感谢您的任何提示

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-24T15:30:13.830

结果名称的值不正确。尝试使用基于序数（位置）的方法。

OLE 或 ADO.NET 执行 SQL 任务的基本设置

![在此处输入图像描述](../Images/92118ddfe4f45d130e7b0f4cc6c01afa.png)

在这里，我为结果集中的第零列指定了 0 的序数。

![在此处输入图像描述](../Images/5388085359133ce71ef04f054c6467d1.png)

在这里，您可以看到原始变量及其值（-1、-2）以及两者的运行时值 35。

![在此处输入图像描述](../Images/b763ccf13988c58825a42a6b7af2d20d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:56:17.543

一旦你的包完成，你的变量就会回到它们的默认状态。如果您使用断点或 msgbox，您会看到在执行期间您的变量确实具有该值。

# jquery - 从 Action 进行完全重定向

> ID：12565966
> 
> 赞同：2
> 
> 时间：2012-09-24T13:23:32.180
> 
> 标签：jquery, ajax, asp.net-mvc

在我的 ASP.NET MVC 3 应用程序中，我有一个通过 jQuery 触发的操作`AJAX POST request`。在这个动作中，我检查了一些带有属性的数据库数据，如果它通过了验证，我返回一个在 jQuery 请求回调中`PartialView`视图上的 div 内设置的结果。`success`我想要做的是，如果它没有通过验证，则将用户完全重定向到我的应用程序中的另一个页面。

我知道我可以通过 Javascript 通过将值传递给视图并在那里进行额外检查来做到这一点，但我想知道它是否可以在服务器端完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:26:36.867

在您的控制器操作中，您可以返回 a`PartialView`或`JsonResult`指向控制器操作以重定向到：

```
public ActionResult SomeAction()
{
    if (HasPassedValidation)
    {
         // everything went fine => let's return a partial view
         // that will be updated
         return PartialView();
    }

    // something went wrong with the validation => 
    // we return a JsonResult pointing to the controller
    // action we want to redirect to
    var result = new 
    { 
        redirectTo = Url.Action("SomeOtherAction", "SomeController") 
    };

    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

然后在你的 AJAX 调用测试的成功回调中，在这种情况下你是并采取相应的步骤：

```
success: function(result) {
    if (result.redirectTo) {
        // the controller action returned a JSON result => there was an error
        // => let's redirect
        window.location.href = result.redirectTo;
    } else {
        // everything went fine => let's update the DOM with the partial
        $('#results').html(result);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:27:17.487

MVC 中的 AJAX 表单控件不执行完全重定向。但是，HTML 可以。（虽然这确实意味着你失去了异步行为）。

# c - 信号量函数

> ID：12565967
> 
> 赞同：0
> 
> 时间：2012-09-24T13:23:34.780
> 
> 标签：c, winapi

梦梦，

我需要 MS Visual C (6.0) 等效函数“DosEnterCritSec()”和“DosExitCritSec()”，它保证没有两个线程同时执行封闭的代码。

有人可以指出我正确的方向吗？

非常感谢，彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:26:00.100

EnterCriticalSection() / LeaveCriticalSection()

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682608(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682608(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:28:07.030

是的，您将寻找关键部分。

在某个地方，通常在启动期间，您需要初始化：

```
CRITICAL_SECTION mutex;
InitializeCriticalSection(&mutex); 
```

然后在您的重入代码中：

```
EnterCriticalSection(&mutex);
/* Do some thread-safe stuff */
LeaveCriticalSection(&mutex); 
```

作为奖励，如果您在同一个线程中多次输入同一个关键部分，您不会将自己锁定（只要您离开它的次数相同）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T13:25:40.170

我不熟悉，`DoesEnterCritSec()`但`DosExitCritSec()`基于：

> 没有两个线程同时执行封闭的代码。

您可以使用[`EnterCriticalSection()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682608%28v=vs.85%29.aspx)和[`LeaveCriticalSection()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684169%28v=vs.85%29.aspx)。每个线程必须使用相同的 a 实例`CRITICAL_SECTION`。

有关示例，请参阅[使用关键部分。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686908%28v=vs.85%29.aspx)

# java - Java EE DAO / DTO（数据传输对象）设计模式

> ID：12565973
> 
> 赞同：5
> 
> 时间：2012-09-24T13:23:52.447
> 
> 标签：java, design-patterns, jakarta-ee, dao, dto

目前我正在为我的工作项目使用 struts2 框架，在设计我的 DAO 类时，我有一个问题要改进设计模式。

在我的搜索功能上，我有 3 种搜索

1.  用一个参数搜索，另一个，
2.  使用多个参数搜索，
3.  无参数搜索。

我的问题是，执行 DAO 方法的最佳方法是什么？

在我的 struts2 方法中，我有

```
public String execute() {

    //assuming these are passed in from JSP
    if ("searchByAnId".equals(paramSearch))
    {
        List<DTO> datalist = this.someDao.implementList(theIdParam);

    } else if("searchByAnOtherParam".equals(paramSearch))
    {
        List<DTO> datalist = this.someDao.implementAnotherList(param1, param2, param3, param4)
        // more params
    } else
    {
        List<DTO> datalist = this.someDao.implementListAll();
    }       

    return "success";
} 
```

我正在阅读诸如工厂方法、装饰器方法、观察者方法之类的设计模式，但我不确定哪一个是最合适的（或其他没有 3rd 方插件的）适合这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T12:01:40.627

我通常倾向于创建一个基本的 dao 接口，其中定义了所有域实体共有的方法，例如：

```
// marker interface
public interface DomainEntity extends Serializable { }

// common dao methods
public interface DAO<T extends DomainEntity> {
  public T findById(Long id);
  public List<T> findAll();
  public T save(T entity);
  public boolean update(T entity);
  public boolean delete(T entity);
} 
```

然后根据我的要求提供一个或多个实现：

```
// implementation of common dao methods using JPA
public class JpaDAO<T> implements DAO<T> {

    private EntityManager em;

    public JpaDao(EntityManager em) { this.em = em; }

   // Default implementations using JPA...
}

// implementation of common dao methods using JDBC
public class JdbcDAO<T> implements DAO<T> {

  private Connection conn;

  public JdbcDao(Connection conn) { this.conn = conn; }

  // Default implementations using JDBC
} 
```

现在，假设我有以下人员类：

```
public class Person implements DomainEntity {
  private Long id;
  private String firstName;
  private String lastName;

  // getters/setters...
} 
```

我首先定义了一个通用的 PersonDAO 接口，如下所示：

```
public interface PersonDAO implements DAO<Person> {
  public List<Person> findByFirstName(String name);
  public List<Person> findByLastName(String name);
} 
```

请注意，在我上面的特定实体 dao 接口中，我只包含了特定于我的域实体的额外方法。通用方法由超级接口继承，并使用泛型参数化为我的域实体。

现在剩下的最后一件事是定义我的实体特定方法的不同实现，如下所示：

```
package mypackage.daos.jpa;

public class PersonDAOImpl extends JpaDAO<Person> implements PersonDAO {
   // here i implement only the entity specific dao methods 
   // defined in the last interface.
} 
```

如果我还需要提供替代的 DAO 实现（比如基于 jdbc 而不是 JPA），它就像创建第二个类一样简单（最好在单独的包中）：

```
package mypackage.daos.jdbc;

public class PersonDAOImpl extends JdbcDAO<Person> implements PersonDAO {
  // again i only implement the entity specific DAO methods since
  // defaults have been implemented in the super class...
} 
```

这样做的好处是您可以在没有调用代码的情况下切换实现以受到影响：

```
// a service class that uses my dao
public class PersonService {

  private PersonDAO dao;

  public PersonService(PersonDAO dao) { this.dao = dao }

  public void doSomethingUseful() {
     // use the dao here...
  }
} 
```

通常，正确的 dao 实现（jdbc 或 jpa）将在服务创建期间通过构造函数注入。当然，如果您愿意，您只能有一个实现（即 jpa）。

# linux - 使用 zmv 重命名多个文件，但不重命名目录

> ID：12565974
> 
> 赞同：1
> 
> 时间：2012-09-24T13:23:54.567
> 
> 标签：linux, debian, rename, zsh

我想重命名多个文件（添加扩展名）..我可以使用 zsh 的 zmv

```
autoload zmv
zmv -n '(**/)(*)' '$1$2.myextension' 
```

但这也会重命名当前目录中的所有目录...我能做些什么来只重命名文件（递归）并避免重命名目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:36:13.063

从[这里](http://strcat.de/zsh/#zmv)：

```
# Rename names of all files under the current Dir to lower case, but keep Dir names as-is. 
  $ zmv -Qv '(**/)(*)(.D)' '$1${(L)2}' 
```

所以我认为这`(.D)`就是你所需要的。“句点”表示匹配常规文件（不是目录）并`D`启用该`GLOB_DOTS`选项。

# junit - 如何在 MysqlConnectionPoolDataSource 上获取 getPooledConnection()

> ID：12565976
> 
> 赞同：0
> 
> 时间：2012-09-24T13:23:54.553
> 
> 标签：junit, junit4

我有一堂课，我想要池连接。我创建了`MysqlConnectionPoolDataSource`对象，我正在调用这样的`getPooledConnection()`方法

```
MysqlConnectionPoolDataSource datasource;
PooledConnection pconn=null;
pconn = dataSource.getPooledConnection(); 
```

当我运行测试类时，我无法得到蚂蚁的东西， `pconn = dataSource.getPooledConnection();`那`dataSource.getPooledConnection()`什么也没返回。如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:00:45.157

由于您使用`MysqlConnectionPoolDataSource`的是测试而不是 Java EE 容器，因此您需要配置该对象。至少我看起来你需要打电话`setUrl()`，`setUser()`并且`setPassword()`

# jquery - 使用 FireFox 使用 jquery 和 http 处理程序时找不到文件

> ID：12565979
> 
> 赞同：0
> 
> 时间：2012-09-24T13:24:06.107
> 
> 标签：jquery, asp.net, ihttphandler

下面的代码用于将文件复制到目录中，但我继续收到异常“C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\10.0\abc.jpg”文件未找到错误。感谢您的任何帮助或想法。我在 Windows 7 机器上使用 VS2010、jQuery 1.8.1 (min)、IIS 7。我的 webconfig 和元素中都有 FileUpload.ashx。

**此问题仅在使用 FireFox 时发生。**

HTML 标记

```
 var FileName = null;     

$.ajax({ type: "POST",
            url: "FileUpload.ashx",
            data: { FileName: FileName },
            async: true,
            success: function (data) {
                alert("Success");
                }
            },
            error: function (data) {
                alert("Error");
            }
        });
    });

   function setFileName(e) {
        FileName = e.value;         
    } 
```

FileUpload 背后的代码

```
public void ProcessRequest(HttpContext context)
    {

        try
        {

            String FileID = Guid.NewGuid().ToString();

            String sDirectory = "~/UploadedFiles/";
            String sFileName = context.Request["FileName"];
            String sUploadPath = String.Format("{0}/{1}", sDirectory, sFileName);
            sUploadPath = context.Server.MapPath(sUploadPath);

            string FileName = context.Request["FileName"];
            FileInfo fn = new FileInfo(FileName);

            fn.CopyTo(sUploadPath + FileID + "_" + fn.Name);

     }

     catch (Exception ex)
         {
    string message = ex.Message;
         }

      } 
```

# iphone - 将文本保存到 sqlite3

> ID：12565980
> 
> 赞同：0
> 
> 时间：2012-09-24T13:24:16.480
> 
> 标签：iphone, objective-c

我想使用以下代码将一些文本保存到我的数据库中。但我无法让它工作......通常这是将 smt 存储到数据库中的方式......

```
-(void)saveToDB
{
NSFileManager *fileMgr = [NSFileManager defaultManager];
NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"datenbankSpeed"];
BOOL success = [fileMgr fileExistsAtPath:dbPath];
if(!success)
{
    NSLog(@"Cannot locate database file '%@'.", dbPath);
}
if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
{
    NSLog(@"An error has occured: %s", sqlite3_errmsg(db));

}

if (sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK)
{

    NSString *insertSQL = [NSString stringWithFormat:@"INSERT INTO DATEN(typ, date, download, upload, ping, comment) VALUES (\"%@\", \"%@\", \"%@\",\"%@\", \"%@\",\"%@\")", @"1", @"24.09.2012", topDownloadLabel.text, topUploadLabel.text, pingLabel.text, @"Comment"];

    const char *insert_stmt = [insertSQL UTF8String];
    printf("%s\n", insert_stmt);
    NSLog(@"%@", [NSString stringWithUTF8String:insert_stmt]);

    if (sqlite3_prepare_v2(db, insert_stmt, -1, &sqlStatement, NULL) == SQLITE_OK)
    {
        if (sqlite3_step(sqlStatement) == SQLITE_DONE)
        {
            UIAlertView *didFailWithErrorMessage = [[UIAlertView alloc] initWithTitle: @"NSURLConnection " message: @"All good"  delegate: self cancelButtonTitle: @"Ok" otherButtonTitles: nil];
            [didFailWithErrorMessage show];
            [didFailWithErrorMessage release];
        }
        else
        {
            UIAlertView *didFailWithErrorMessage = [[UIAlertView alloc] initWithTitle: @"NSURLConnection " message: @"nada"  delegate: self cancelButtonTitle: @"Ok" otherButtonTitles: nil];
            [didFailWithErrorMessage show];
            [didFailWithErrorMessage release];
        }

    }
            sqlite3_finalize(sqlStatement);
    sqlite3_close(db);
}
} 
```

但由于某种原因，它只适用于模拟器！但在我的手机上它不起作用......它总是在这里进入 ELSE：

```
if (sqlite3_step(sqlStatement) == SQLITE_DONE) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:33:24.273

我无法找到问题，但是我有一些建议，

不确定这是否是您的主要问题，**但看起来您正在修改您的数据库**，这太糟糕了。例如，当您发布更新时，捆绑包将被删除/替换。

当您的应用程序启动时，您应该在文档目录中查找数据库，如果它不存在（这不是您第一次启动），您将默认数据库从捆绑包复制到 docs 目录。

**代码：**

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {

    [self copyDatabaseIfNeeded];

    // Configure and show the window
    [window addSubview:[navigationController view]];
    [window makeKeyAndVisible];
}

- (void) copyDatabaseIfNeeded {

    //Using NSFileManager we can perform many file system operations.
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;
    NSString *dbPath = [self getDBPath];
    BOOL success = [fileManager fileExistsAtPath:dbPath]; 

    if(!success) {

        NSString *defaultDBPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@\"datenbankSpeed.sqlite\"];
        success = [fileManager copyItemAtPath:defaultDBPath toPath:dbPath error:&error];
        NSLog(@\"Database file copied from bundle to %@\", dbPath);

        if (!success) 
            NSAssert1(0, @\"Failed to create writable database file with message '%@'.\", [error localizedDescription]);
    } else {

        NSLog(@\"Database file found at path %@\", dbPath);

    }
} 
```

**设备区分大小写**。**iPhone设备关心字符串的大小写**，

例如“database.sqlite”和“DataBase.sqlite”对于设备来说是不同的文件，但对于模拟器来说是相同的文件。所以请检查你的查询或代码字符串情况。

您还可以在控制台中记录 insertSQL，从控制台复制它并打开 Bundle sqlite 文件并使用执行部分执行查询。看看发生了什么:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:33:57.890

主包在设备上是只读的。尝试将您的数据库文件移动到文档目录或您可以写入的其他位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:54:59.807

试试这样

```
 sqlite3_stmt *stmt;

            int x;
            char *update = "insert into meetingPhoneAlarm values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);";
            x = sqlite3_prepare_v2(database, update, -1, &stmt, nil);
            NSLog(@"x=%d",x);

            if (x == SQLITE_OK) 
            { 
                sqlite3_bind_text(stmt, 1, NULL,-1, NULL);  
                sqlite3_bind_text(stmt, 2, [txt_subject.text UTF8String],-1, NULL);
                sqlite3_bind_text(stmt, 3, [txt_location.text UTF8String],-1, NULL);
                sqlite3_bind_text(stmt, 4, [txt_meetwith.text UTF8String],-1, NULL);
                sqlite3_bind_text(stmt, 5, [btn_partyDate.titleLabel.text UTF8String],-1, NULL);
                sqlite3_bind_text(stmt, 6, [btn_partyTime.titleLabel.text UTF8String],-1, NULL);
                sqlite3_bind_text(stmt, 7, [txt_notes.text UTF8String],-1, NULL);
                sqlite3_bind_text(stmt, 8, [btn_snooze.titleLabel.text UTF8String],-1, NULL);
                sqlite3_bind_text(stmt, 9, [string_ascending UTF8String],-1, NULL);
                sqlite3_bind_text(stmt, 10, [string_volume UTF8String],-1, NULL);
                sqlite3_bind_text(stmt, 11, [string_alarmsound UTF8String],-1, NULL);
                sqlite3_bind_text(stmt, 12,[btn_alarmDate.titleLabel.text UTF8String],-1, NULL);
                sqlite3_bind_text(stmt, 13,[btn_AMPM.titleLabel.text UTF8String],-1, NULL);
                sqlite3_bind_text(stmt, 14,[string_vibration UTF8String],-1, NULL);
                sqlite3_bind_text(stmt, 15,[string_repeatOption UTF8String],-1, NULL);

            }       
            if (sqlite3_step(stmt) != SQLITE_DONE){}
            //  NSLog(@"Error: %@",errorMsg); 
            sqlite3_finalize(stmt); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-25T09:50:59.490

好的，将数据库移动到文档目录就可以了！多谢你们...

# php - setlocale 和 strftime 不翻译月份

> ID：12565981
> 
> 赞同：10
> 
> 时间：2012-09-24T13:24:20.773
> 
> 标签：php, date, localization, locale

我的代码：

```
setlocale(LC_TIME, 'ca_ES');
echo strftime("%#d %B", strtotime($ticket->date_created)); 
```

输出类似：

```
28 August 
```

而不是我的期望：

```
28 Agost 
```

我期待“Agost”，因为那是加泰罗尼亚语（通过 设置`setlocale()`）。

这是如何`setlocale`和`strftime`应该工作的？

仅供参考：我的本地开发机器是 Windows 7，设置为区域设置：en-PH

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-24T13:37:13.407

Windows 上的语言环境名称不同。看起来它默认为英语。

尝试全长名称（您可以尝试几个，它会选择第一个找到的）：

```
setlocale(LC_TIME, 'ca_ES', 'Catalan_Spain', 'Catalan'); 
```

您可以查看此表，这可能会有所帮助：[http ://docs.moodle.org/dev/Table_of_locales](http://docs.moodle.org/dev/Table_of_locales)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-08-24T06:17:43.227

您需要在服务器中安装所需的语言环境。

1.  通过 SSH 连接到您的服务器
2.  检查安装了哪些语言环境：`locale -a`
3.  如果您的语言环境不存在，请安装它：`sudo locale-gen ca_ES`
4.  更新服务器中的语言环境：`sudo update-locale`
5.  重新启动 apache 以使更改生效：`sudo service apache2 restart`

这就对了！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-09T14:05:03.190

在 Ubuntu 14.04`setlocale(LC_TIME, 'de_DE.UTF8');`上，我获得了德国月份格式/名称：)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-17T13:55:37.767

在 Debian 9`setlocale(LC_TIME, 'fr_FR.UTF8');`上，我得到了很好的法语格式的日/月显示。确保按以下顺序安装语言环境：

> apt-get 安装语言环境
> 
> dpkg-重新配置语言环境

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-24T13:35:09.633

`strftime`给出日期格式的本地化版本。如果您确实得到了意想不到的结果，很可能您所期望的本地化版本不在您的系统上。

我没有使用 Windows 的经验，但在我的 Debian Linux 服务器上，我必须安装我想要的本地化字符串。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-06T10:14:08.040

`strftime`对于所有像我这样由于服务器限制而仍然无法发挥作用的人......虽然不完美，但它确实有效。

```
$months[1] = "gennaio";
$months[2] = "febbraio";
$months[3] = "marzo";
$months[4] = "aprile";
$months[5] = "maggio";
$months[6] = "giugno";
$months[7] = "luglio";
$months[8] = "agosto";
$months[9] = "settembre";
$months[10] = "ottobre";
$months[11] = "novembre";
$months[12] = "dicembre";

// giorni
$weekdays[0] = "domenica";
$weekdays[1] = "luned&igrave;";
$weekdays[2] = "marted&igrave;";
$weekdays[3] = "mercoled&igrave;";
$weekdays[4] = "gioved&igrave;";
$weekdays[5] = "venerd&igrave;";
$weekdays[6] = "sabato";

function strftimeIta($format, $timestamp){

    global $weekdays, $months;

    preg_match_all('/%([a-zA-Z])/', $format, $results);

    $originals = $results[0];
    $factors = $results[1];

    foreach($factors as $key=>$factor){
        switch($factor){
            case 'a':
                /*** Abbreviated textual representation of the day ***/
                $n = date('w', $timestamp); // number of the weekday (0 for sunday, 6 for saturday);
                $replace = ucfirst($weekdays[$n]);
                $replace = substr($replace, 0, 3);
                break;
            case 'A':
                /*** Full textual representation of the day ***/
                $n = date('w', $timestamp); // number of the weekday (0 for sunday, 6 for saturday);
                $replace = ucfirst($weekdays[$n]);
                break;
            case 'h':
            case 'b':
                /*** Abbreviated month name ***/
                $n = date('n', $timestamp); // Numeric representation of a month, without leading zeros
                $replace = ucfirst($months[$n]);
                $replace = substr($replace, 0, 3);
                break;
            case 'B':
                /*** Full month name ***/
                $n = date('n', $timestamp); // Numeric representation of a month, without leading zeros
                $replace = ucfirst($months[$n]);
                break;
            default:
                /*** Use standard strftime function ***/
                $replace = strftime("%".$factor, $timestamp);
                break;
        }
        $search = $originals[$key];
        $format = str_replace($search, $replace, $format);
    }
    return $format;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-15T11:54:22.793

我知道这是一个老问题，但我想我还是会做出贡献。

如果您可以通过 SSH 连接到您正在使用的服务器，请编写：`locale -a`然后您可以看到可用的语言环境。如果您的语言未列出，则需要安装它。

对我来说，我看到了我正在寻找的那个：`nb_NO.utf8`在列表中，所以我完全按照它的写法写了它：`setlocale( LC_ALL, 'nb_NO.utf8' )`这对我有用。

# jakarta-ee - 在单个 tomcat 7 上托管多个网站

> ID：12565991
> 
> 赞同：0
> 
> 时间：2012-09-24T13:24:57.537
> 
> 标签：jakarta-ee, tomcat6, tomcat7, ubuntu-11.04

我在云服务器上托管了一个域。比如说 o.com

现在我想将 a.com 和 b.com 添加到同一个云服务器，为此，我在 server.xml 中添加了主机条目，如下所示，

```
<Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true">

        <!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.authenticator.SingleSignOn" />
        -->

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html
             Note: The pattern used is equivalent to using pattern="common" -->
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
               prefix="localhost_access_log." suffix=".txt"
               pattern="%h %l %u %t &quot;%r&quot; %s %b" />

      </Host>
  <Host name="a.com" appBase="webapps_a"></Host>
 <Host name="b.com" appBase="webapps_b"></Host> 
```

（注意，本地主机是原始条目）

但是，问题是，它们都指向 o.com 而不是它们各自的域/webapp 目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:53:52.107

您可以在 tomcat 前面使用 Apache HTTP 服务器来做到这一点。在 Apache2 中，您可以在 enabled-sites 文件夹中定义不同的服务器处理对不同 URL 的请求，然后通过反向代理链接到在单个 tomcat 实例上运行的不同应用程序。

# c# - 如何使控制台应用程序显示为“无响应”？

> ID：12565993
> 
> 赞同：5
> 
> 时间：2012-09-24T13:24:58.953
> 
> 标签：c#, console-application

对于测试，使程序出现*“无响应”*的最简单方法是什么？中断 Windows 消息或将其置于无限循环中？

我尝试了一个简单的循环，例如

```
while(true) 
```

但这不起作用。测试应用程序是一个 C# 控制台应用程序。它在控制台中运行的事实是否使它“更具响应性”？也许添加的控制台处理的某些部分使其始终响应？

**更新：**

将其更改为一个简单的 Winform 应用程序，将其放入无限循环中。工作就像一个魅力。感谢服务。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T13:40:50.627

从 Windows 任务管理器的角度来看，控制台应用程序永远不会“无响应”。实际上，任务管理器并没有运行您的程序，它正在运行一个正在运行您的程序的 shell (cmd.exe)，并且该 shell 的编写方式是即使您的程序没有响应，它也会始终响应。如果您不是通过 shell 运行程序而是直接启动它，那么程序将不会有任何 UI 并且它不会是任务管理器中的“应用程序”（这意味着它不会出现在“应用程序”选项卡），它只是一个过程。

如果您只需要从任务管理器的角度模拟任何“无响应”程序，您应该制作一个简单的 winforms 应用程序并将其置于无限循环中。如果有某种晦涩的方法使程序从控制台应用程序显示为“无响应”，那么至少它会比任何标准桌面 GUI 类型更难。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T13:25:55.953

你可以做一个`Thread.Sleep(X)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T13:26:17.077

使程序无限期“不响应”的最简单方法是使用无限循环：

```
while(true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T13:27:10.263

在 UI 主题上做任何工作（对于 UI 应用程序）

```
Thread.Sleep  

  While (true) 
```

这可能会让您更深入地了解您试图完成的工作（[.net 控制台应用程序在连续打印出大量字符时停止响应](https://stackoverflow.com/questions/912373/net-console-app-stop-responding-when-printing-out-lots-of-chars-in-a-row)）

# symfony - Symfony2 应用程序自动注销定义了多个角色的用户

> ID：12565998
> 
> 赞同：0
> 
> 时间：2012-09-24T13:25:04.487
> 
> 标签：symfony, roles

我有一个 Symfony2 应用程序，它使用角色来管理授权。当我使用只有一个角色与他关联的用户登录时，一切正常，但是当我尝试使用具有多个角色的用户时，应用程序会自动将他注销。

我真的不知道要提供什么代码示例，所以欢迎提出任何问题或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T13:38:03.903

你为什么不定义**ROLE HIERARCHY**？所以你只能拥有1个角色，但在其下堆叠角色的权限。

就像是 ：

`security.yml`：

```
role_hierarchy:
    ROLE_SUPER_ADMIN: ROLE_ADMIN
    ROLE_ADMIN:       ROLE_MANAGER
    ROLE_MANAGER:     ROLE_USER 
```

将`ROLE_SUPER_ADMIN`具有（管理员/经理/用户）下的所有角色。

分层角色的文档在这里：[http ://symfony.com/doc/current/book/security.html#hierarchical-roles](http://symfony.com/doc/current/book/security.html#hierarchical-roles)