# StackOverflow 问答 13003000-13003999

# ios - 使用 jsonkit 将 JSonString 反序列化为 NSArray

> ID：13003000
> 
> 赞同：0
> 
> 时间：2012-10-21T22:53:24.937
> 
> 标签：ios, nsarray, json, jsonkit

我如何反序列化这个**JSON**字符串以`NSSArray`使用 jsonkit。

```
[{"answer": "AAA", "questionId": "1"}, {"answer": "BBB", "questionId": "2"}, ...] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:04:58.553

这样的事情应该这样做：

```
 NSDictionary *jsonDictionary = [jsonString objectFromJSONString];
 NSArray *jsonValues = [jsonDictionary allValues]; 
```

# php - 图像无法显示，因为它包含错误 php

> ID：13003001
> 
> 赞同：-1
> 
> 时间：2012-10-21T22:53:53.213
> 
> 标签：php, gd

> **可能重复：**
> [html 是否可以与 php 中的动态生成图像一起使用？](https://stackoverflow.com/questions/7886064/does-html-can-be-use-with-dynamic-generated-images-in-php)

我正在尝试在 php 中生成验证码。我相信我的代码是正确的，但我无法在浏览器上获取图像..这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<body>
<?php header('Content-type: image/png');?>
<?php session_start();
$md5 = md5(microtime() * time() );
$string = substr($md5, -5);
$captcha = imagecreatefrompng("./captcha.png");
$black = imagecolorallocate($captcha, 0, 0, 0);
$line = imagecolorallocate($captcha,233,239,239);
imageline($captcha,0,0,39,29,$line);
imageline($captcha,40,0,64,29,$line);
$_SESSION['key'] = md5($string);
imagestring($captcha, 5, 20, 10, $string, $black);
imagepng($captcha);?> 
</body>
</html> 
```

png 图像与此代码位于同一文件夹中。在 php 中启用了 GD 选项..我一无所知..任何帮助表示赞赏...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:07:14.730

`<?php header('Content-type: image/png');?>`在设置或之前你不能输出任何东西`session_start();`

您需要创建一个处理图像的图像脚本，然后在您的 html 中链接到该脚本

示例：验证码.php

```
<?php 
session_start();
header('Content-type: image/png');
$md5 = md5(microtime() * time() );
$string = substr($md5, -5);
$captcha = imagecreatefrompng("./captcha.png");
$black = imagecolorallocate($captcha, 0, 0, 0);
$line = imagecolorallocate($captcha,233,239,239);
imageline($captcha,0,0,39,29,$line);
imageline($captcha,40,0,64,29,$line);
$_SESSION['key'] = md5($string);
imagestring($captcha, 5, 20, 10, $string, $black);
imagepng($captcha);
?> 
```

你的 HTML

```
<?php session_start(); ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>
<body>
<img src="captcha.php"/>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:08:38.003

我猜这是您的验证码图像的来源（例如“image.php”文件），它是从其他地方加载的（例如从“captcha.php”和`<img src="image.php" />`）。您可能还必须包含`session_start()`在“captcha.php”文件中。

从您发布的代码中，只需删除所有 HTML。

此外，作为一项规则，*在您准备好之前永远不要发送 Image 内容类型*（如果合适，请先检查错误）。

```
<?php
    session_start();
    $md5 = md5(microtime() * time() );
    $string = substr($md5, -5);
    $captcha = imagecreatefrompng("./captcha.png");
    $black = imagecolorallocate($captcha, 0, 0, 0);
    $line = imagecolorallocate($captcha,233,239,239);
    imageline($captcha,0,0,39,29,$line);
    imageline($captcha,40,0,64,29,$line);
    $_SESSION['key'] = md5($string);
    imagestring($captcha, 5, 20, 10, $string, $black);
    Header('Content-type: image/png');
    imagepng($captcha);
?> 
```

**注意**：您正在运行 MD5 字符串的 MD5。那是对的吗？为什么不使用`uniqid()`而不是`md5(microtime() * time() )`，并存储`$md5`在`_SESSION`？

# ckeditor - 如何删除 CKEditor 按钮属性上下文菜单项

> ID：13003006
> 
> 赞同：1
> 
> 时间：2012-10-21T22:54:34.210
> 
> 标签：ckeditor

我有一个插件，我通过 insertHtml 向编辑器添加一个按钮：

```
editor.insertHtml('<input type = "button" value = "my button" />'); 
```

当您右键单击按钮时，您会在上下文菜单中看到“按钮属性”选项。我无法弄清楚如何通过 removeMenuItem() 删除该项目。我可以通过 removeMenuItem('paste') 从菜单中删除粘贴选项，但 removeMenuItem('Button Properties') 不起作用。有人对此有经验吗？

这是版本 3.6.5

# python - 我在这个功能上做错了什么？

> ID：13003007
> 
> 赞同：-1
> 
> 时间：2012-10-21T22:54:43.790
> 
> 标签：python

我不知道我做了什么——这是错误的。有人能帮我吗？

```
def insert_sequence(dna1, dna2, number):

    '''(str, str, int) -> str
    Return the DNA sequence obtained by inserting the second DNA sequence
    at the given index. (You can assume that the index is valid.)  

    >>> insert_sequence('CCGG', 'AT', 2)
    'CCATGG'
    >>> insert_sequence('TTGC', 'GG', 2)
    'TTGGGC'
    '''
    index = 0
    result = '';
    for string in dna1:
        if index == number:
            result = result + dna2

            result = result + string
            index += 1

            print(result) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:21:19.603

其他答案中已经有正确的工作功能（特别是 Rakesh Pandit 的评论和 JeffS 的答案），但您的实际问题是“为什么我的原始功能不起作用”。

我复制了您的功能的工作版本，评论如下：

```
def insert_sequence(dna1, dna2, number):

    index = 0
    result = ''

    for character in dna1:
        if index == number:
            result = result + dna2
        result = result + character
        index += 1
    print(result) 
```

Python 考虑缩进，所以你应该只在事情的末尾打印，外部循环和 ifs。当您“增加”结果时，您只能在函数的“if”内执行此操作，而实际上您应该增加“对于 dna1 中的每个字符”，并且只有当/“if index == number”时才应该放在中间里面的字符串。

我相信您对 Python 或一般编程非常陌生，可能来自生物学背景，但您真的不应该像其他人所展示的那样通过迭代来完成这种类型的字符串操作。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T23:08:22.887

你需要一个`if-else`循环：

```
def insert_sequence(dna1, dna2, number):

    result = '';

    #you can use enumerate() to keep track of index you're on

    for ind,x in enumerate(dna1): 
        if ind == number:            #if index is equal to number then do this
            result = result + dna2 +x
        else:                        #otherwise do this   
            result = result + x 

    print(result)

insert_sequence('CCGG', 'AT', 2)
insert_sequence('TTGC', 'GG', 2) 
```

**输出：**

```
CCATGG
TTGGGC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T23:02:05.560

这是一个解决方案：

```
def insert_sequence(dna1, dna2, number):

    '''(str, str, int) -> str
    Return the DNA sequence obtained by inserting the second DNA sequence
    at the given index. (You can assume that the index is valid.)  

    >>> insert_sequence('CCGG', 'AT', 2)
    'CCATGG'
    >>> insert_sequence('TTGC', 'GG', 2)
    'TTGGGC'
    '''

    return dna1[:number] + dna2 + dna1[number:] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T23:09:18.970

如果索引不在插入点，你什么也不做，包括增加索引。您的代码需要一个 else 并且您还过早地打印：

```
def insert_sequence(dna1, dna2, number):
    index = 0
    result = '';
    for char in dna1:
        if index == number:
            result = result + dna2
            result = result + char
            index += len(dna2) + 1
        else:
            result = result + char
            index += 1
    print(result) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T23:02:01.127

您永远不会将字符串分开，因此您将始终将 dna2 添加到 dna1。

你可能想要`return dna1[:number] + dna2 + dna1[number:]`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-21T23:25:26.177

所犯错误：a) 参数索引初始化为 0。b)“for sting in dia1:”应该是“for dia1_position in range(len(dia1)):”c) 打印结果缩进错误，功能不只是应该打印。它应该返回结果。d) 现在不需要增加索引。

答案已经有了。上面简要列出了所犯的错误。我猜您没有看到任何错误，因为您从未调用过该函数。第一个错误应该是未定义的“数字”（不再是因为问题已更新且参数已定义数字）。

# javascript - 如何根据名称 Javascript/Mootools 查找输入类型

> ID：13003010
> 
> 赞同：0
> 
> 时间：2012-10-21T22:55:07.970
> 
> 标签：javascript, forms, mootools

我有一个通过 Ajax 向数据库提交值并且工作正常的表单，但我还需要为用户提供选项以将表单重置为其默认值，以防他们出错。

默认值作为 json 对象存储在 javascript 变量中

```
{"field_name1":"2","field_name3":"3","field_name3":"1000"... 
```

我遇到的问题是表单有多种输入类型，textarea，select，radio，我需要根据对象键找出它们是什么，查找名称和返回类型，所以我可以做一些事情，比如如果radio set check check等等

我试过

```
Object.each(dafaultValues, function(value, key){
 var filed_name = MyForm.elements[''+key+''];
 console.log(filed_name.type);

}); 
```

问题在于无线电类型具有相同的名称但不同的 ID

```
<input type="radio" name="field_name5" id="field_name51" value="1">
<input type="radio" name="field_name5" id="field_name52" value="1" checked="checked"> 
```

我最终遇到了js错误

未捕获的类型错误：无法读取未定义的属性“类型”

那么在我做之前找出输入类型的最佳方法是什么

```
if(field.type ='radio'){

//set checked checked..
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:42:57.970

看看这个例子。我只是把它放在一起很脏，但你会明白的；）

HTML：

```
<form id="test">
    <input type="radio" name="abc" value="1"/>
    <input type="radio" name="abc" value="2"/>
    <input type="radio" name="abc" value="3"/>
    <input type="text" name="def" value="change" />
</form>​ 
```

JS：

```
var values = {
    'abc': '2',
    'def': 'original'
};
var els = $('test').getElements('[name="abc"], input');
els.each(function(el) {
    var defaultVal = values[el.get('name')],
        type = el.get('type');

    if (typeof defaultVal != 'undefined') {
        return;
    }

    if (type == "radio") {
        if (el.get('value') == defaultVal) {
            el.set('checked', 'checked');
        } else {
            el.erase('checked');
        }
    }

   if (type == "text") {
       el.set('value', defaultVal);
   }
}); 
```

# php - AJAX 完整响应

> ID：13003013
> 
> 赞同：0
> 
> 时间：2012-10-21T22:55:35.493
> 
> 标签：php, jquery, html, ajax, fieldset

我的网站上有密码更改功能，现在一切都完成了，除了我想显示成功或失败消息。所以这是我的html：

```
<form id="change_Pass" action="" method="post">
    //stuff
</form>
<fieldset id="response_field_pass" style="display:none;"><p style="color:black;"></p></fieldset> 
```

还有我的jQuery：

```
$('#change_Pass').submit(function() {
    if(pass_val.form()) { 
        $.ajax({
            type: "POST",
            url: "script.php", 
            complete: function(data) {
                $('#response_field_pass').show();
                $('#response_field_pass >p').text(data);
                if(data) alert("success");
                else alert("fail");
            }
        });
    }
    return false;
}); 
```

当成功时，php 脚本会回显`true`，`false`我会收到一个显示成功的警报框。这是伟大的。但是字段集没有显示，应该在`<p>`. 它基本上只是跳过：

```
$('#response_field_pass').show();
$('#response_field_pass >p').text(data); 
```

并转到警报。任何想法为什么它没有取消隐藏字段集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:00:08.943

我怀疑它是否跳过了你提到的那几行。很可能字段集中的段落没有任何内容可显示，因为`complete`处理程序的第一个参数是`jqXHR`对象，而不是您从服务器接收的数据。为了解决问题，我建议您改用[`success`](http://api.jquery.com/jQuery.ajax/)处理程序：

```
$.ajax({
    type: "POST",
    url: "script.php",
    success: function(data) {
        // ...
    }
}); 
```

`success`函数的第一个参数`data`是从服务器返回的。

要处理可能的请求错误，您可以使用`error`handler. 它接收三个参数：`jqXHR`对象、描述发生的错误类型的字符串和可选的异常对象（如果发生）。

# android - Jersey 客户端 + 多部分表单数据 + MessageBodyWriter 问题

> ID：13003016
> 
> 赞同：0
> 
> 时间：2012-10-21T22:55:53.670
> 
> 标签：android, jersey, jax-rs, multipartform-data

我在使用 Android 上的 Jersey 客户端 API 的 Multipart-form-data POST 请求时遇到问题。我一直在关注网络上的各种示例，它们在实现方面都非常相似。

```
Client client = createClientInstance();
WebResource r = client.resource(BASEURL).path("DataUpload");
ClientResponse post;
try {
    FormDataMultiPart multiPart = new FormDataMultiPart();
    multiPart.field("account", account);
    multiPart.field("checksum", checksum);
    multiPart.bodyPart(new FileDataBodyPart("file", file, MediaType.APPLICATION_OCTET_STREAM_TYPE));
    post = r.type(MediaType.MULTIPART_FORM_DATA)
        .accept(MediaType.TEXT_PLAIN)
        .post(ClientResponse.class, multiPart);

} catch (ClientHandlerException e) {
    Log.e(TAG, e.getLocalizedMessage());
} finally {
    client.destroy();
} 
```

当我在设备上执行此代码时，出现异常：

```
javax.ws.rs.WebApplicationException: java.lang.IllegalArgumentException: No MessageBodyWriter for body part of type 'java.io.File' and media type 'application/octet-stream' 
```

我认为 Jersey 应该在没有任何额外配置的情况下处理 File 对象。删除 bodypart 行将允许 Jersey 提出请求，但这消除了这一点。

我的构建路径上有这些库（使用 Maven 引入）：

*   jersey-client-1.14
*   jersey-core-1.14
*   jersey-multipart-1.14
*   mimepull-1-6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:23:52.657

我可以建议尝试两件事：

1.  从 FileDataBodyPart 构造中删除 MIME 类型，以查看 Jersey 是否可以找到它很高兴默认为的 MIME 类型：

    `multiPart.bodyPart(new FileDataBodyPart("file", file, MediaType.APPLICATION_OCTET_STREAM_TYPE));`

2.  告诉您的客户端配置有关多部分正文编写器的信息（大概在您的`createClientInstance()`方法中）：

    ```
    com.sun.jersey.api.client.config.ClientConfig config = new com.sun.jersey.api.client.config.DefaultClientConfig();
    config.getClasses().add(MultiPartWriter.class);
    client = Client.create(config); 
    ```

希望有帮助。

# r - 宽计数数据帧到高指示器数据帧

> ID：13003018
> 
> 赞同：1
> 
> 时间：2012-10-21T22:56:01.380
> 
> 标签：r, dataframe

这不是一个复杂的问题，而且我有一个解决方案，但我无法摆脱有更好方法的感觉：

我有一个按类别记录成功和机会的 data.frame，如下所示：

```
testFrame <- data.frame(successes = c(100, 150, 18),
                        opportunities = c(215, 194, 40),
                        category = LETTERS[1:3])
testFrame$category <- as.character(testFrame$category) 
```

我想将其转换为“高”data.frame，其中一列 1 和 0 表示成功/失败，第二列带有类别标签。我可以使用以下代码执行此操作：

```
tallFrame <- lapply(1:nrow(testFrame), function(rr){
  cbind(rep(c(1, 0), c(testFrame[rr, "successes"], testFrame[rr, "opportunities"]-testFrame[rr, "successes"])), testFrame[rr, "category"])
  })
tallFrame <- data.frame(do.call(rbind, tallFrame)) 
```

结果`tallFrame`是一个矩阵，然后我可以毫无问题地将其转换为 data.frame，但这似乎是一个简单任务的大量代码。当然，有一种方法可以更高效地执行此操作，也许使用`plyr`or `reshape`，或者我只是在寻找一些代码高尔夫。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T23:13:24.163

确实有人想知道为什么您需要这样做，但无论如何...

使用的`base`解决方案`rep`

```
with(testFrame, data.frame(category = rep(category, opportunities), 
    indicator =  unlist(mapply(rep, times = c(successes,  opportunities-successes), 
      MoreArgs = list(x = c(0,1)))))) 
```

一个`data.table`解决方案（编码优雅（可能是编码高尔夫的竞争对手）

```
library(data.table)
DT <- data.table(testFrame)
DT[,list(indicator = rep(c(0,1), c(successes,  opportunities-successes))), by = category] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T23:28:38.203

这是`plyr`您正在寻找的解决方案：

```
ddply(testFrame, .(category), function(x) {
     data.frame(raw = c(rep(1,x$success), rep(0, x$opportunities - x$success)), 
        category = x$category)
    }) 
```

# php - php HH:MM 格式的小时和分钟时差，用于 d/m/Y - h:ia

> ID：13003021
> 
> 赞同：-1
> 
> 时间：2012-10-21T22:56:03.907
> 
> 标签：php, datetime, datediff

> **可能重复：**
> [获取 HH:MM 格式 php 的时间差异](https://stackoverflow.com/questions/13002723/get-difference-in-time-in-hhmm-format-php)

我的时间格式是 d/m/Y - h:ia

示例输出为 21/10/2012 - 03:49pm

我正在使用此代码来计算 $from 和 $to 之间的差异

```
 $to = strtotime("21/10/2012 - 10:30pm");
 $from = strtotime("22/10/2012 - 8:30am");
 $stat = date("H\h:i\m", abs($to - $from)); 
```

但我总是得到不正确的值

对于上面的示例，我得到了 16h:00m 的输出，但它应该是 10h:00m

有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:21:07.687

这种格式不正确，[strtotime](http://www.php.net/manual/en/function.strtotime.php)无法识别（请参阅第三个注释）我怀疑您的时区是 GMT-8 并且您将始终从这种格式的日期中获得 16 小时。

您必须手动将此日期转换为 php 识别的格式才能进行一些计算

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T01:50:08.077

登出：

> if(function_exists('date_default_timezone_set')) date_default_timezone_set('America/New_York');
> 
> ```
> $from = $_SESSION['loginT'];
> $to = date('m/d/Y  h:i A');
> $diff_seconds  = strtotime($to) - strtotime($from);
> $stat = floor($diff_seconds/3600).'H:'.floor(($diff_seconds%3600)/60).'M'; 
> ```

从登录：

```
$_SESSION['loginT'] = date('m/d/Y  h:i A'); 
```

样本输出：

```
21/10/2012 - 06:37pm    21/11/2012 - 06:07pm        23H:30M 
```

# fluent-nhibernate - 根据子类型映射到不同的视图

> ID：13003025
> 
> 赞同：0
> 
> 时间：2012-10-21T22:56:24.180
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

所以我有一种情况，我有共同的基本类型，但我需要根据子类型映射到不同的视图。

看起来我可以使用通用映射类来处理继承

[http://geekswithblogs.net/nharrison/archive/2010/07/09/inheriting-a-class-map-in-fluent-nhibernate.aspx](http://geekswithblogs.net/nharrison/archive/2010/07/09/inheriting-a-class-map-in-fluent-nhibernate.aspx)

但是我如何根据子类型有条件地映射到不同的视图？我看到一个 EntityType 属性，但它说它已过时，将在下一个版本中设为私有。

作为一个例子，我有一个 ContactInfo 的基类是联系人类型之间的标准，但值来自不同的地方，具体取决于联系人类型，我将通过 sql 视图处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T05:39:17.877

使用任何映射引用的实体来自不同的表

```
class ContactInfo
{
    public virtual long Id { get; set; }
    public virtual ContactDetails Details { get; set; }
}

public ContactInfoMap
{
    ...
    ReferencesAny(x => x.Details)
        .EntityIdentifierColumn("details_id")
        .EntityTypeColumn("contactType")
        .IdentityType<long>()
        .AddMetaValue<FooContactDetails>("1")
        .AddMetaValue<BarContactDetails>("4");
} 
```

# python - MySQL 连接器

> ID：13003026
> 
> 赞同：0
> 
> 时间：2012-10-21T22:56:32.370
> 
> 标签：python, mysql, mysql-connector-python

我正在尝试构建一个工具，其中一个步骤是连接到 MySQL 数据库。

只是我对 ODBC 很困惑。如果我想通过python构建跨平台连接器，我应该使用python连接器还是ODBC连接器？

我知道 JDBC，但 ODBC 代表开放式数据库连接。它看起来更兼容。

谁能帮我澄清一下？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:17:11.410

Python 有自己的[DB API v2.0](http://www.python.org/dev/peps/pep-0249/)抽象层来连接数据库（它的用途与 ODBC 或 JDBC 相同，但用于 Python）。您应该使用符合[DB API v2.0的](http://www.python.org/dev/peps/pep-0249/)[oursql](http://packages.python.org/oursql/)、[MySQLdb](http://mysql-python.sourceforge.net/)或[PyMySQL](http://www.pymysql.org/)包之一从 Python 连接到 MySQL。所有这些包都是跨平台的，可以在 Linux、Windows 和 MacOS X 上[运行。oursql](http://packages.python.org/oursql/)和[MySQLdb](http://mysql-python.sourceforge.net/)是 libmysql 的包装器，[PyMySQL](http://www.pymysql.org/)是纯 Python 实现。

请注意，有提供 ODBC 连接的[DB API v2.0](http://www.python.org/dev/peps/pep-0249/)实现（如[pyodbc](http://code.google.com/p/pyodbc/)），因此从概念上讲，您可以通过 ODBC 连接到 MySQL，但由于额外的抽象层，这将比上述“本机”驱动程序性能差。

# android - 如何在 doInBackground 方法中执行 gui 操作？

> ID：13003029
> 
> 赞同：0
> 
> 时间：2012-10-21T22:56:55.783
> 
> 标签：android, user-interface, android-asynctask

我的应用程序读取用户选择的包含地址的文件，然后在完成地理编码后显示在 mapview 上。为了避免挂起应用程序，导入和地理编码在 AsyncTask 中完成。

```
public class LoadOverlayAsync extends AsyncTask<Uri, Integer, StopsOverlay> {

    Context context;
    MapView mapView;
    Drawable drawable;

    public LoadOverlayAsync(Context con, MapView mv, Drawable dw)
    {
        context = con;
        mapView = mv;
        drawable = dw;
    }

    protected StopsOverlay doInBackground(Uri... uris)
    {
        StringBuilder text = new StringBuilder();
        StopsOverlay stopsOverlay = new StopsOverlay(drawable, context);
        Geocoder geo = new Geocoder(context, Locale.US);

        try
        {   
            File file = new File(new URI(uris[0].toString()));

            BufferedReader br = new BufferedReader(new FileReader(file));
            String line;

            while ((line = br.readLine()) != null)
            {
                StopOverlay stopOverlay = null;
                String[] tempLine = line.split("~");
                List<Address> results = geo.getFromLocationName(tempLine[4] + " " + tempLine[5] + " " + tempLine[7] + " " + tempLine[8], 10);

                if (results.size() > 0)
                {
                    Toast progressToast = Toast.makeText(context, "More than one yo", 1000);
                    progressToast.show();
                }
                else if (results.size() == 1)
                {
                    Address addr = results.get(0);
                    GeoPoint mPoint = new GeoPoint((int)(addr.getLatitude() * 1E6), (int)(addr.getLongitude() * 1E6));
                    stopOverlay = new StopOverlay(mPoint, tempLine);
                }

                if (stopOverlay != null)
                {
                    stopsOverlay.addOverlay(stopOverlay);
                }
                //List<Address> results = geo.getFromLocationName(locationName, maxResults)

            }

        } catch (URISyntaxException e) {
            showErrorToast(e.toString());
            //e.printStackTrace();
        } catch (FileNotFoundException e) {
            showErrorToast(e.toString());
            //e.printStackTrace();
        } catch (IOException e) {
            showErrorToast(e.toString());
            //e.printStackTrace();
        }
        return stopsOverlay;
    }

    protected void onProgressUpdate(Integer... progress)
    {
        Toast progressToast = Toast.makeText(context, "Loaded " + progress.toString(), 1000);
        progressToast.show();
    }

    protected void onPostExecute(StopsOverlay so)
    {
        //mapView.getOverlays().add(so);
        Toast progressToast = Toast.makeText(context, "Done geocoding", 1000);
        progressToast.show();
    }

    protected void showErrorToast(String msg)
    {
        Toast Newtoast = Toast.makeText(context, msg, 10000);
        Newtoast.show();
    }
} 
```

但是如果地理编码失败，我想要一个对话框弹出来让用户编辑地址。这需要在 doInBackground 中调用 gui 方法。什么是一个好的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:00:32.930

您必须在 onPostExecute 方法中处理它。也许将它设计为 onPostExecute 的 null 参数表明它失败了，所以在这种情况下会弹出对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:11:45.133

如果您不想更改 StopsOverlay 的 Result 类型，那么您可以在 doInBackground 中设置一些成员字段，然后在 onPostExecute 中检查这些成员字段并在此时显示您的错误 UI。

请注意，这是安全的，并且根据[AsyncTask 文档](http://developer.android.com/reference/android/os/AsyncTask.html)推荐：

> AsyncTask 保证所有回调调用都以这样一种方式同步，即以下操作在没有显式同步的情况下是安全的。
> 
> 在 doInBackground(Params...) 中设置成员字段，并在 onProgressUpdate(Progress...) 和 onPostExecute(Result) 中引用它们。

例如，您可以声明一个字段：

```
private boolean mTooManyResults = false; 
```

然后更改它，以便在 中`doInBackground`，您有如下代码：

```
if (results.size() > 0)
{
    mTooManyResults = true;
} 
```

然后在`onPostExecute`：

```
if (mTooManyResults)
{
    // notify user about error
    Toast progressToast = Toast.makeText(context, "More than one yo", 1000);
    progressToast.show();
} else
{
    // notify user about success
    Toast progressToast = Toast.makeText(context, "Done geocoding", 1000);
    progressToast.show();
} 
```

# vb.net - 如何使用 vb.net 在富文本框中打开文件和查看？

> ID：13003035
> 
> 赞同：1
> 
> 时间：2012-10-21T22:57:51.793
> 
> 标签：vb.net

您好我正在尝试在富文本框中打开和查看文件文本。这是我所拥有的，请让我知道我做错了什么？

```
Private Sub loadButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles loadButton.Click

    ' Displays an OpenFileDialog so the user can select a Cursor.
    Dim openFileDialog1 As New OpenFileDialog()
    openFileDialog1.Filter = "Cursor Files|*.txt"
    openFileDialog1.Title = "Select a Cursor File"

    If openFileDialog1.ShowDialog() = System.Windows.Forms.DialogResult.OK Then
        ' Assign the cursor in the Stream to the Form's Cursor property.
        Me.mainRTBox = New Text(openFileDialog1.OpenFile())
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:49:52.473

您遇到的问题是您根本没有读取文件，并且您没有将文件的内容正确分配给 RichTextBox。

具体来说，你有这个代码：

`Me.mainRTBox = New Text(openFileDialog1.OpenFile())`

.. 应该：

`Me.mainRTBox.Text = FileIO.FileSystem.ReadAllText(openFileDialog1.FileName)`

此代码将起作用：

```
Public Class Form1

    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        ' Displays an OpenFileDialog so the user can select a Cursor.
        Dim openFileDialog1 As New OpenFileDialog()
        openFileDialog1.Filter = "Cursor Files|*.cur"
        openFileDialog1.Title = "Select a Cursor File"

        If openFileDialog1.ShowDialog() = System.Windows.Forms.DialogResult.OK Then
            ' Assign the cursor in the Stream to the Form's Cursor property.

            Dim extension = openFileDialog1.FileName.Substring(openFileDialog1.FileName.LastIndexOf("."))

            If extension Is "cur" Then
                Me.mainRTBox.Text = FileIO.FileSystem.ReadAllText(openFileDialog1.FileName)
            End If

        End If
    End Sub
End Class 
```

编辑：我更新了代码，以便检查用户是否确实打开了 Cur（光标）文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-23T14:11:39.067

RichTextBoxes 具有用于查看 RTF 文件和 TXT 文件的内置功能。

RTF 文件的代码：

```
RichTextBox1.LoadFile("YOUR DIRECTORY", RichTextBoxStreamType.RichText) 
```

TXT 文件的代码：

```
RichTextBox1.LoadFile("YOUR DIRECTORY", RichTextBoxStreamType.PlainText) 
```

希望能帮助到你

-nfell2009

# javascript - 在 AJAX 应用程序中重写 URL

> ID：13003036
> 
> 赞同：0
> 
> 时间：2012-10-21T22:58:05.260
> 
> 标签：javascript, jquery, url, web

我正在制作一个简单的在线申请。我有一个带有几个按钮和一个“div”的导航栏，所有新内容都将被动态加载到其中，即当我单击“关于”时，它会将页面部分加载到“div”中，而无需重新加载整个页面。加载（）函数。问题是：如果我需要给我网站的文档部分的链接，或者用户想要存储这种链接，浏览我的网站时不会重写 url。当用户存储默认链接时，它将始终将他链接到默认的“主页”部分。

如何重写 URL，最正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:09:41.987

据我说，适当的方法是更新 URL 的哈希值。例如 example.com/#About 等。人们可以为这些添加书签。当您读取 URL 中的哈希标记并加载相应页面时，您必须小心进行 AJAX 调用。

我要做的是对[hashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)事件而不是单击进行 ajax 调用。从 IE8 到所有现代浏览器都支持此事件。如果你想支持 IE7，请使用 Ben Alman 的[hashchange 插件](http://benalman.com/projects/jquery-hashchange-plugin/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T23:02:15.360

作为选项，您可以使用`location.hash`.
例如，用户点击`<a href="#about">About</a>`
，您正在加载“关于”页面的内容。浏览器地址栏中的 URL 也将更改为`http://mysite.com/hello.jsp#about`.

所以现在用户可以复制这个 URL 并访问它。

然后在`$(document).ready()`你可以检查`location.hash`，找到其中的`'#about'`锚点，然后加载适当的内容。

* * *

另一种选择是使用[Backbone.js](http://backbonejs.org/)或您喜欢的任何其他 JavaScript MVC 框架，这将帮助您构建富客户端应用程序并为您处理这些事情。

# tracking - 尽管有相同的来源政策，cookie 如何跟踪用户？

> ID：13003037
> 
> 赞同：7
> 
> 时间：2012-10-21T22:58:25.943
> 
> 标签：tracking, privacy

此处的文章讨论了政治运动使用的策略。 [http://www.nytimes.com/2012/10/14/us/politics/campaigns-mine-personal-lives-to-get-out-vote.html](http://www.nytimes.com/2012/10/14/us/politics/campaigns-mine-personal-lives-to-get-out-vote.html)

引用有问题的部分：

> 这些活动在选民的电脑上植入了一种名为 cookie 的软件，以查看他们是否经常访问福音派或色情网站，以获取有关他们道德观点的线索。访问宗教网站的选民在返回 mittromney.com 或 barackobama.com 时可能会收到对宗教友好的信息。

这怎么可能？我认为所有现代浏览器都具有相同的来源策略安全性，其中网站 A 无权访问有关其他网站 B、网站 C 等的任何信息。

这篇文章听起来像是用户在浏览：

```
1\. presidentialcandidate.com
2\. website2.com
3\. website3.com
4\. website4.com
5\. presidentialcandidate.com 
```

访问 #1 的 cookie 如何跟踪用户历史并在访问 #5 中显示？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T17:46:25.000

It's true that browsers commonly won't accept or send cookies set for a different domain than the request itself. While actual implementations vary, one straightforward technique is using *third-party cookies*. If `website2.com`, `website3.com` and `website4.com` all embed resources from `presidentialcandidate.com` -- for example, an advertisement in an iframe, or a 1x1 pixel image -- and the user's browser accepts and sends third-party cookies, then `presidentialcandidate.com` can learn, through setting and retrieving of the cookie and HTTP referer headers, that the visitor has previously visited those sites.

[RFC 6265](https://www.rfc-editor.org/rfc/rfc6265#section-7.1) discusses the privacy implications of third-party cookies in greater detail.

It may not always be resources from `presidentialcandidate.com` that are enabling this process. For example, some services use *cookie syncing* to align cookie identifiers between services ([a description of cookie syncing in one scenario](http://www.adopsinsider.com/ad-exchanges/ssp-to-dsp-cookie-synching-explained/)).

# haskell - Haskell，参数化数据类型转换为字符串

> ID：13003039
> 
> 赞同：1
> 
> 时间：2012-10-21T22:59:06.363
> 
> 标签：haskell, functional-programming

这是我的数据类型：

```
data Foo a =  Value Integer
           |Boo a 
```

我有一个将 Foo 数据类型转换为字符串的函数：

```
showFoo::Show a=> Foo a -> String
showFoo (Value n) = show n
showFoo (Boo a) = show a 
```

例如：showFoo (Value 10) 变为："10"，但对于 showFoo(Boo "S")，它变为："\"S\"" 但我只需要 "S"。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T00:39:26.497

这归结为`show`字符串的行为。 `show`旨在提供机器可读的输出，它不是一个漂亮的打印机，所以它在所有字符串周围放置逗号。这样，它就可以区分读取它们的时间`10`和时间。`"10"`

您的`showFoo`功能显然不是为`show`家庭设计的，因为它消除了`Value`and`Boo`标签，所以 using`show`并不是您真正的意思。

可能的解决方案：

1.  让步，全力以赴，推导出来`Show`。
2.  如果`a`始终是字符串，请更改您的数据类型并且不要使用`show`.
3.  进一步了解类型类并定义您自己的`Showish`类。使用`-XFlexibleInstances`and`-XOverlappingInstances`覆盖 String 的实例，不要使用引号。
4.  通过使用破解它`init.tail.show $ a`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T23:02:44.970

这只是您使用 GHCi 的结果，它显示了以前的结果。在已编译的程序中尝试此操作或尝试运行（在 GHCi 中）`putStrLn (showFoo (Boo "S"))`，您将看到调用`show`字符串会产生一组引号。

# vb.net - 仅当我在 VB.NET 中调试时如何执行断点？

> ID：13003040
> 
> 赞同：1
> 
> 时间：2012-10-21T22:59:33.170
> 
> 标签：vb.net, forms, debugging

我只想在直接处理代码时在代码中执行断点。我尝试了这个解决方案，但它没有按预期工作：

```
<Conditional("DEBUG")>
Public Sub Breakpoint()
    #If DEBUG Then
        System.Diagnostics.Debugger.Break()
    #End If
End Sub 
```

我如何识别问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T23:35:38.290

利用：

```
If System.Diagnostics.Debugger.IsAttached Then
    System.Diagnostics.Debugger.Break()
End If 
```

# anchor - href="#" 转到页面顶部 - 阻止？

> ID：13003044
> 
> 赞同：61
> 
> 时间：2012-10-21T23:00:18.530
> 
> 标签：anchor, href, hashtag

我有一个带有一些 jQuery 函数的页面。页面上的 HTML 如下所示：

```
<a href="#" class="service">Open</a> 
```

当我单击“打开”按钮时，一个隐藏的面板会滑出。jQuery 本身运行良好，但是当我单击按钮时，它也会将我带到页面顶部。

这是默认行为吗？如何防止每个`href="#"`人将我带到页面顶部。

注意：我可以添加 id 并告诉 href 指向该 ID。由于各种原因（包括添加不必要的代码），我不想这样做。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2016-03-29T17:33:09.393

```
<a href="#!" class="service">Open</a> 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2012-10-21T23:02:36.707

在您的事件处理程序中，添加`e.preventDefault();`（假设`e`是保存事件的变量的名称）：

```
$('.service').click(function(e) {
    e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-10-21T23:06:36.970

```
<a href="#" onclick="return false;" class="service">Open</a> 
```

**或者**

```
$(document).ready(function()
{ 
   var a = $(".service");
   a.click(function()
   {

       return false;

   });
}); 
```

**或者**

```
$(document).ready(function()
{ 
   var a = $(".service");
   a.click(function(e)
   {

       e.preventDefault();

   });
}); 
```

**或者**

```
<a href="#" onclick="event.preventDefault();" class="service">Open</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-29T06:53:16.727

```
$('service').click(function() {
<your code>
return false;
}); 
```

`return false`覆盖“a”标签的标准行为，并在单击时停止浏览器返回页面顶部。

# regex - dart 是否支持 perl 样式的正则表达式和匹配运算符语法？

> ID：13003045
> 
> 赞同：2
> 
> 时间：2012-10-21T23:00:18.903
> 
> 标签：regex, dart

你能写出类似的东西吗：

```
string =~ /^.s*(.\S+)/;
print "First word is '$1'"; 
```

飞镖的语法是什么？还是必须使用原始对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T05:45:17.713

Dart 中没有正则表达式文字和匹配运算符。所以是的，您必须使用 RegExp 对象及其兄弟对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T23:53:04.850

我不确定飞镖。但从这里

[http://www.dartlang.org/docs/dart-up-and-running/ch03.html#ch03-strings-and-regular-expressions](http://www.dartlang.org/docs/dart-up-and-running/ch03.html#ch03-strings-and-regular-expressions)

看起来语法与任何其他语言相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-24T08:08:35.787

Dart 没有文字正则表达式语法：

```
/foo\s*\(bar\)/ 
```

但它确实有原始字符串，你应该使用它们：

```
new RegExp(r"foo\s*\(bar\)"); 
```

如果没有原始字符串，您将不得不将反斜杠加倍，并且（如果您记得这样做）您将拥有：

```
new RegExp("foo\\s*\\(bar\\)"); 
```

# javascript - 如何使用 jquery 获取 textarea 内的文本并显示在 html 上？

> ID：13003046
> 
> 赞同：1
> 
> 时间：2012-10-21T23:00:27.140
> 
> 标签：javascript, jquery

> **可能重复：**
> [jQuery 获取 textarea 文本](https://stackoverflow.com/questions/144810/jquery-get-textarea-text)

所以我有一个接受用户输入的文本区域。如何在文本区域内获取文本并将其放入我的`<div id="prev">`内部`<p>`标签中？我试过用这个：

```
function displayCustom() {
    var customText = $('textarea#custom').val();
    $('prev p').text(customText);   //<-- this doesnt work
    //alert(text); <-- if i try using this it works
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:05:39.297

您应该使用`#`ID 选择器：

```
$('#prev p').text(customText); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-21T23:04:06.453

你可以像这样在里面附加你的文本`<p>`：

```
 var customText = $('#custom').val();
 $('#prev').append('<p>'+customText+'</p>'); 
```

# sencha-touch-2 - Sencha touch 2，使用 xtemplate 打印嵌套的 JSON 数组

> ID：13003048
> 
> 赞同：0
> 
> 时间：2012-10-21T23:00:55.537
> 
> 标签：sencha-touch-2

我正在开发一个简单的电影列表应用程序。我正在使用烂番茄 api。以下是 json ：

```
电影”： [{
                "id": "771310572",
                "title": "云图集",
                “年”：2012，
                “mpaa_rating”：“R”，
                “运行时”：163，
                “发布日期”： {
                        《剧场》：《2012-10-26》
                },
                “收视率”：{
                        "critics_rating": "新鲜",
                        “critics_score”：80，
                        “观众评分”：98
                },
                “概要”：“Cloud Atlas 探索了个人生活的行为和后果如何在过去、现在和未来相互影响。随着一个灵魂从杀手变成英雄，动作、神秘和浪漫在故事中戏剧性地交织在一起一个善举跨越几个世纪，在遥远的未来激发一场革命。随着故事随着时间的推移，每个成员都扮演多个角色。--(C) Warner Bros.",
                “海报”： {
                        "缩略图": "http://content6.flixster.com/movie/11/16/71/11167192_mob.jpg",
                        “个人资料”：“http://content6.flixster.com/movie/11/16/71/11167192_pro.jpg”，
                        “详细”：“http://content6.flixster.com/movie/11/16/71/11167192_det.jpg”，
                        “原文”：“http://content6.flixster.com/movie/11/16/71/11167192_ori.jpg”
                },
                “abridged_cast”：[{
                        “名称”：“汤姆汉克斯”，
                        “id”：“162655641”，
                        “字符”：[“Dermot 'Duster' Hoggins”、“Dr. Henry Goose”、“Isaac Sachs”、“Valleysman Zachry”]
                }, {
                        “名称”：“哈莉·贝瑞”，
                        "id": "162652386",
                        “字符”：[“Jocasta Ayrs”、“Luisa Rey”、“Meronym”]
                }, {
                        “名称”：“吉姆布罗德本特”，
                        "id": "162653369",
                        “字符”：[“Vyvyan Ayrs”]
                }, {
                        "name": "雨果织布",
                        “id”：“162709905”，
                        “characters”：[“Bill Smoke”、“Nurse Noakes”、“Old Georgie”]
                }, {
                        “名称”：“吉姆斯特吉斯”，
                        "id": "563717190",
                        “字符”：[“亚当尤因”，“海珠林”]
                }]

```

我能够获得显示电影列表和 ontap 电影列表项的第一个列表视图，我能够加载下一个视图以显示电影详细信息。

我被困在 xtemplate 中显示 abridged_cast 。如果我使用 {abridged_cast} 页面显示对象，对象。

我找不到任何可以从此数组中提取值并显示的函数。如何在模板中显示数组内容？

谢谢。

# python - 如何从 DataFrame 图中排除几列？

> ID：13003051
> 
> 赞同：36
> 
> 时间：2012-10-21T23:01:04.740
> 
> 标签：python, pandas

我有一个大约 25 列的 DataFrame，其中有几列包含不适合绘图的数据。DataFrame.hist() 对这些抛出错误。如何指定这些列应从绘图中排除？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-08-22T05:41:13.047

请注意，对@Chang She 的回复进行了修改，从 pandas 0.16 开始，该`-`运算符计划弃用。`difference()`鼓励使用该方法。

```
exclude = ['bad col1', 'bad col2']
df.loc[:, df.columns.difference(exclude)].hist() 
```

* * *

[弃用](https://pandas.pydata.org/pandas-docs/version/0.17.0/dsintro.html#data-alignment-and-arithmetic)更新：

> ```
> df - df['A'] 
> ```
> 
> 现在已弃用，将在未来的版本中删除。复制此行为的首选方法是
> 
> ```
> df.sub(df['A'], axis=0) 
> ```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-20T03:24:33.310

我想你可以：

```
df.drop(['bad col1', 'bad col2', 'bad col3', ...], axis=1).hist() 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-22T00:15:38.187

我们可以使这更容易（我创建了一个[github 问题](https://github.com/pydata/pandas/issues/2099)），但现在您可以选择要绘制的列：

```
df.ix[:, df.columns - to_exclude].hist() 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-19T22:39:39.510

我通常会做以下事情：

```
columns = [column for column in df.columns if df[column].dtype == 'float64']
df = df[columns] 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-02-25T15:42:32.383

按照官方[文档](http://pandas.pydata.org/pandas-docs/version/0.15.2/10min.html)，您可以使用 loc

```
df.loc[:,['A','B']] 
```

例如，您只获得“A”和“B”列。通过这种方式，您可以选择要绘制的列。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-18T15:48:55.867

刚刚怎么样

```
df_new = df[df.columns -[cols_to_exclude]]
df_new.plot() 
```

# php - PHP转义字符串疯狂

> ID：13003052
> 
> 赞同：-1
> 
> 时间：2012-10-21T23:01:31.250
> 
> 标签：php, mysql, mysql-real-escape-string

PHP 手册和用户反馈都让我感到困惑。我正在尝试修复其他人的代码，他求助于将所有表单数据转换为 ASCII 代码并返回。

这是一种逃避一切的粗略方式，但很难维护，并且数据库看起来像一堆逗号分隔的数字，而不是可查询的数据库。在 php 中肯定有一种可靠的方式来存储表单值并在没有太多扭曲的情况下检索它。各种`escape`和`unescape`功能似乎并没有逃脱一切。

您还需要检查并设置它，但确保未设置其他内容。是什么赋予了？简单地说，表单字段中的任何内容都必须可靠地写入 MySQL 列，并且易于检索回 PHP 并在 mysql 中查询。该表格在 Intranet 上，数据可能包含所有正常的键盘输入，包括美元符号、百分号、斜线和撇号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:04:36.067

1.  如果您使用的是过时版本的 PHP：升级 PHP 或迁移到具有更新 PHP 的更好的主机。做不到这一点：在你的 PHP 设置中禁用魔术引号。做不到这一点：[检测和撤消魔术引号](https://stackoverflow.com/questions/370292/work-around-magic-quotes-or-just-make-sure-theyre-off)。魔术引号是一个糟糕的主意，已从 PHP 中删除。
2.  将数据插入数据库时​​，使用[准备好的语句和参数化查询](https://stackoverflow.com/a/60496/19068)
3.  将数据插入 HTML 时，[转义特殊字符](http://php.net/htmlspecialchars)（确保正确设置了引号选项，以正确设置您在属性值周围的引号类型，默认值仅适用于`value="<?php echo ... ?>"`而不是在您使用时才安全`'`）。对于更复杂的场景，请参阅[OWASP XSS（跨站点脚本）预防备忘单](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)。

# java - 关于显示列表和多边形面

> ID：13003053
> 
> 赞同：0
> 
> 时间：2012-10-21T23:01:48.427
> 
> 标签：java, jogl

有关所讨论代码的参考，请参阅： [Github 上的 StrixaGL 库](https://github.com/NicholasRoge/StrixaGL/tree/master/src)

* * *

我的图书馆目前有两个关键问题，我不明白发生了什么，希望你们能帮助我。首先，使用不带纹理的显示列表（参见 com.strixa.gl.Strixa3DElement#draw 方法）效果很好。并且在不使用显示列表的情况下使用纹理也可以很好地工作。我不确定的是，当同时使用它们时。如果两者都使用，JVM 在第 145 行崩溃[，](https://github.com/NicholasRoge/StrixaGL/blob/master/src/com/strixa/gl/StrixaMaterial.java)并出现以下错误：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000000007173ffe0, pid=5104, tid=7284
#
# JRE version: 7.0_05-b05
# Java VM: Java HotSpot(TM) 64-Bit Server VM (23.1-b03 mixed mode windows-amd64 compressed oops)
# Problematic frame:
# C  [atio6axx.dll+0x129ffe0]  atiPS+0xd8010
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of   Windows
#
# An error report file with more information is saved as:
# D:\User Data\My Documents\Eclipse Workspace\git\firepenguindiscopanda\fpdp_applet\bin\hs_err_pid5104.log
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
# 
```

如果您愿意，我也可以提供故障转储。我以前从来没有处理过 JVM 崩溃，所以除了原生 OpenGL dll 崩溃导致 JVM 崩溃之外，我对可能发生的事情一无所知。

其次，当我绘制纹理时（通过禁用代码的显示列表部分），纹理绘制在多边形的错误面上。我尝试将 GL2#glFrontFace 与 GL2#GL_CW 和 GL2#GL_CCW 一起使用来更改缠绕顺序，但是这些都不起作用，并且纹理仍然绘制在（从我的角度来看）背面。然后我尝试手动反转添加点的顺序。那也无济于事。因此，这也会影响照明，因为绘制的任何对象都将从内部而不是外部照明。

可能有人知道这里发生了什么吗？

* * *

**更新**

* * *

首先，这是对正在发生的事情的更清晰定义的图像：

![在此处输入图像描述](../Images/2b456c9830faa56880136262d9ae8cf4.png)

（前墙（最靠近观察者的墙），用红色勾勒出来，看似不可见。但后墙完全不透明。在这种情况下，我什至添加了表面法线，以便面应该是正确的。不是仅此而已，但我已启用照明并将立方体设置为蓝色。可悲的是，这不是我所看到的。也许这会让某人更深入地了解我的问题。

此外，如果您对我正在加载的内容感到好奇，以下是 OBJ 文件的内容：

```
# Blender v2.63 (sub 0) OBJ File: ''
# www.blender.org
mtllib pony.mtl
o Cube
v -1.000000 -1.000000 1.000000
v -1.000000 -1.000000 -1.000000
v 1.000000 -1.000000 -1.000000
v 1.000000 -1.000000 1.000000
v -1.000000 1.000000 0.999999
v -0.999999 1.000000 -1.000001
v 1.000000 1.000000 -1.000000
v 1.000000 1.000000 1.000000
vn -0.000000 -1.000000 0.000000
vn 0.000000 1.000000 -0.000000
vn -1.000000 0.000000 -0.000000
vn 0.000000 -0.000000 -1.000000
vn 1.000000 -0.000000 0.000000
vn -0.000000 0.000000 1.000000
usemtl Material
s off
f 1//1 2//1 3//1 4//1
f 5//2 8//2 7//2 6//2
f 1//3 5//3 6//3 2//3
f 2//4 6//4 7//4 3//4
f 3//5 7//5 8//5 4//5
f 5//6 1//6 4//6 8//6 
```

以及MTL文件的内容：

```
# Blender MTL File: 'None'
# Material Count: 1
newmtl Material
Ns 96.078431
Ka 0.000000 0.000000 0.000000
Kd 0.000000 0.011431 0.640000
Ks 1.000000 1.000000 1.000000
Ni 1.000000
d 1.000000
illum 2 
```

其次，回应olamedia：Here is the dump: [link because of character limit](http://pastebin.com/dsg8XX9Y)

* * *

**更新[1]**

* * *

通过反转 gluPerspective 上的“近”和“远”参数，修复了多边形绘制不正确的问题。现在的主要问题是崩溃，以及它发生的原因。

* * *

**更新[2]**

* * *

修复了驱动程序崩溃的问题。如果我移动代码以将纹理从显示列表中加载出来，它就可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:33:31.893

显示列表只是一个指令列表。

编辑：在这里发布 hs_err_pid5104.log。因为它包含真正的错误消息。

GL 崩溃是因为（我想）你正在为 jogl 使用调试标志。如果没有标志，所有 gl 错误都将被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T23:28:03.630

看起来这是 ATI 驱动程序中的崩溃。说明是`atio6axx.dll`。尝试的标准方法是将您的驱动程序更新到您可以找到的最新版本。

看起来不正确的纹理几乎总是由于纹理坐标不是您认为的那样。目前尚不清楚“多边形的错误面”是什么意思。张贴图片向我们展示您的意思。

**海报添加后添加**

正如我们所讨论的，这是一个剔除问题。当近和远翻转时，法线的 Z 分量会反转，剔除也会反转。正面被剔除，背面被保留。这正是你的照片所显示的。

您发布的完整转储清楚地表明崩溃发生在驱动程序的显示列表渲染代码中，它永远不会崩溃。也就是说，这是一个驱动程序错误。在其他机器上尝试您的小程序，看看它是否可以运行。

否则，您必须先发布代码，然后我们才能提供进一步帮助。虽然驱动程序不应该崩溃，但如果调用显示列表记录或播放代码有问题，则更有可能崩溃。

# c++ - 为什么在使用 pthread_join 时会出现分段错误？

> ID：13003058
> 
> 赞同：0
> 
> 时间：2012-10-21T23:02:13.580
> 
> 标签：c++, multithreading, pointers, pthreads, segmentation-fault

这是我拥有的代码，它使用 g++ 编译和运行，但出现分段错误。我知道它发生在 pthread_join 语句周围，但我不知道为什么。

```
#include <iostream>
#include <stdio.h>
#include <fstream>
#include <pthread.h>
#include <stdlib.h>
#include <sstream>

using namespace std;

struct data{
    string filename;
    int x;
    int y;
};

void *threadFunction(void *input){
    data *file = (data *) input;
    string filename = file->filename;
    ifstream myFile;
    int xCount = 0;
    int yCount = 0;
    myFile.open(filename.c_str());
    string line;
    while(myFile >> line){
        if(line == "X"){
            xCount++;
        }else if(line == "Y"){
            yCount++;
        }
    }
    file->x = xCount;
    file->y = yCount;
    return (void *) file;
}

int main(){
    pthread_t myThreads[20];
    data *myData = new data[20];

    for(int i = 0; i < 20; i++){
        ostringstream names;
        names << "/filepath/input" << i+1 << ".txt";
        myData[i].filename = names.str();
        myData[i].x = 0;
        myData[i].y = 0;
    }
    for(int i = 0; i < 20; i++){
        int check = pthread_create(&myThreads[i], NULL, threadFunction, (void *) &myData[i]);
        if(check != 0){
            cout << "Error Creating Thread\n";
            exit(-1);
        }
    }

    int xCount = 0;
    int yCount = 0;

    for(int i = 0; i < 20; i++){
        data* returnedItem;
        pthread_join(myThreads[i], (void**) returnedItem);
        xCount += returnedItem->x;
        yCount += returnedItem->y;
    }

    cout << "Total X: " << xCount << "\n";
    cout << "Total Y: " << yCount << "\n";

} 
```

我没有从我的 threadFunction 正确调用 return 吗？我一直在尝试很多不同的事情，但我仍然不知道发生了什么......任何帮助将不胜感激！（我打开的文本文件每行包含一个 X 或 Y。我的目标是计算 20 个文本文件中 X 和 Y 的总数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:09:02.423

```
pthread_join(myThreads[i], (void**) returnedItem); 
```

应该

```
pthread_join(myThreads[i], (void**) &returnedItem); 
```

您要求 join 将 的值设置为您的线程函数返回的`returnedItem`任何值......`void*`所以您需要*提供*.`returnedItem`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:09:26.890

to 的第二个参数`pthread_join()`是`void**`将结果存储到其中的 a。但是，您正在传递一个随机值。这应该看起来像这样：

```
void* result;
pthread_join(myThread[i], &result);
data* returnedItem = static_cast<data*>(result); 
```

当然，这假设 a`data*`确实返回了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T23:12:25.100

的第二个参数`pthread_join`将用于返回，返回线程的值，所以在里面的某个地方`pthread_join`我们有一个调用的代码`*secondArgument = thread_return_value`，但让我们看看你在这里做什么：

```
// You are not initializing returnedItem, so it contain some garbage value
// For example 0x12345678
data* returnedItem;
// Now you cast that garbage to (void**), and pthread_join will call
// *(0x12345678) = thread_return_value that will cause segmentation fault
pthread_join(myThreads[i], (void**) returnedItem); 
```

但是您希望将返回值复制到`returnedItem`，对吗？如果您的回答是肯定的，您应该传递 to 的地址，`returnedItem`以便`pthread_join`它可以将其复制到那里。因此，将您的电话更改为：

```
pthread_join(myThreads[i], (void**) &returnedItem); 
```

# javascript - jQuery在keydown后等待keyup

> ID：13003070
> 
> 赞同：0
> 
> 时间：2012-10-21T23:03:39.313
> 
> 标签：javascript, jquery, keydown, keyup

我想在按下键后触发一个事件，仅在释放向下箭头键后触发一个不同的事件，如下所示：

```
$('body').keydown(function (e)
{
    if(e.keyCode==40)
    {
        //do something
    }
    $('body').keyup(function (d)
    {
        if(d.keyCode==40)
        {
            //do something else
        }
    }
} 
```

此代码仅部分起作用。按住向下箭头键会连续触发 keydown。

我有一个 setInterval，当我按住箭头键时，我正在改变它的刷新率。不幸的是 setTimeOut 在这种情况下不是一个选项。

所以我的代码看起来像这样：

```
 clearInterval(interval);
        refresh = 100;
        interval(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:10:57.767

```
$('body').keydown(function (e) {
    if(e.keyCode==40) {
        //do something
    }
    return false;
})
.keyup(function(e) {
    if(e.keyCode==40) {
        //do something else
    }
    return false;
});

$('body').on('keyup', function (e) {
    if(e.keyCode==40) {
        //do something
    }
    // after first keyup set to handle next keydown only once:
    $(this).one('keydown', function(e) {
        if(e.keyCode==40) {
            //do something else
        }
    });
}); 
```

如果您需要准确**触发**事件而**不是**像您的示例中那样处理，那么您需要使用[`$.trigger()`](http://api.jquery.com/trigger/)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T23:16:29.540

如果您只想在按键保持按下状态时执行某些操作，只需跟踪该操作：

```
var arrowKeyDown = false;

$('body').keydown(function(e) {
    if (e.which == 40 && !arrowKeyDown) {
        arrowKeyDown = true;
        // ...
    }
});

$('body').keyup(function(e) {
    if (e.which == 40) {
        arrowKeyDown = false;
    }
}); 
```

演示：http: [//jsfiddle.net/utfwQ/](http://jsfiddle.net/utfwQ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T23:12:58.857

```
$('body').keydown(function (e)
{
    console.log('down');
}​).keyup(function(e){console.log('up')});​​​​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T23:17:47.290

如果你真的需要在完成后删除 keyup 监听器， [http://jsfiddle.net/CgmCT/](http://jsfiddle.net/CgmCT/)

```
document.body.addEventListener('keydown', function (e) {
    if(e.keyCode === 40){
        console.log('key 40 down');
        // key down code
        document.body.addEventListener('keyup', function listener(d){
            if(d.keyCode === 40){
                document.body.removeEventListener('keyup', listener, true);
                console.log('key 40 up');
                // key up code
            }
        }, true);
    }
}, true);​ 
```

# apache-flex - Flex 4 状态之间转换的简单方法

> ID：13003071
> 
> 赞同：0
> 
> 时间：2012-10-21T23:03:53.800
> 
> 标签：apache-flex, flex4, transitions

有没有一种简单的方法，只使用 MXML，在添加和删除元素的状态之间转换。

例如：

```
<s:Group includeIn="state1"/>
<s:Group includeIn="state2"/> 
```

例如，MXML 转换能否将 state1 滑出和 state2 滑入？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T22:42:46.040

除了上面发布的链接之外，还有一种将单个转换应​​用于多个目标的方法：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" 
        xmlns:views="views.*"  >

    <s:states>
        <s:State name="home"/>
        <s:State name="help"/>
        <s:State name="instructions"/>
        <s:State name="settings"/>
        <s:State name="feedback"/>
    </s:states>

    <s:transitions>
        <s:Transition fromState="*" toState="*" >
            <s:Sequence >
                <s:Wipe direction="right" duration="350" target="{this}"/>
            </s:Sequence>
        </s:Transition>
    </s:transitions>

    <views:Home         id="home"       includeIn="home"            width="100%" height="100%" ownerComponent="{this}"/>
    <views:Help         id="help"       includeIn="help"            width="100%" height="100%" ownerComponent="{this}" />
    <views:Instructions id="instructions"   includeIn="instructions"    width="100%" height="100%" ownerComponent="{this}" />
    <views:Settings     id="settings"   includeIn="settings"        width="100%" height="100%" ownerComponent="{this}" />
    <views:Feedback     id="feedback"   includeIn="feedback"        width="100%" height="100%" ownerComponent="{this}" />

</s:Group> 
```

前一个过渡创建了从一个方向到另一个方向的擦除。

下一个过渡从一个视图淡入另一个视图：

```
<s:transitions>
    <s:Transition fromState="*" toState="home" >
        <s:Sequence >
            <s:Fade target="{this}" alphaFrom="1" alphaTo="0"/>
            <s:RemoveAction targets="{[home,help,instructions,settings,feedback]}"/>
            <s:AddAction target="{home}"/>
            <s:Fade target="{this}" alphaFrom="0" alphaTo="1"/>
        </s:Sequence>
    </s:Transition>
</s:transitions> 
```

下一个将一个视图滑入，同时将其余部分滑出：

```
<s:transitions>
    <s:Transition fromState="*" toState="home" >
        <s:Sequence duration="1000" >
            <s:Parallel>
                <s:Move applyChangesPostLayout="true" targets="{notHomeTargets}" xFrom="0" xTo="{-width}"/>
                <s:AddAction target="{home}" />
                <s:Move applyChangesPostLayout="true" target="{home}" xFrom="{width}" xTo="0"/>
            </s:Parallel>
            <s:RemoveAction targets="{targets}" />
        </s:Sequence>
    </s:Transition>
</s:transitions> 
```

您必须使用最后一个示例为每个州创建一个。

# c++ - 如何将用户输入添加到数组或删除它？C++

> ID：13003079
> 
> 赞同：3
> 
> 时间：2012-10-21T23:04:53.490
> 
> 标签：c++, arrays

假设我得到用户输入。如果他们输入的内容尚未在数组中（如何检查数组？），请将其添加到数组中。反之亦然，如何在给定用户输入的情况下从数组中删除某些内容。

例子：

```
string teams[] = {"St. Louis,","Dallas","Chicago,","Atlanta,"};

cout <<"What is the name of the city you want to add?" << endl;
    cin >> add_city;

 cout <<"What is the name of the city you want to remove?" << endl;
    cin >> remove_city; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T23:12:54.083

内置数组的大小是不可变的：您既不能删除元素，也不能添加任何元素。我建议使用 a `std::vector<std::string>`，而不是：向罐中添加元素`std::vector<T>`，例如，使用`push_back()`. 要删除一个元素，您将定位一个元素，例如，使用`std::find()`，然后使用`erase()`删除它。

如果您需要使用内置数组（尽管我看不出有什么好的理由），您可以使用在堆上分配一个数组`new std::string[size]`并保持其大小，在适当的时候使用`delete[] array;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:12:14.187

要将信息添加到数组中，您可以执行以下操作：

```
for (int i = 0; i < 10; i++)
{
    std::cout << "Please enter the city's name: " << std::endl;
    std::getline(cin, myArray[i]);
} 
```

我不确定从数组中删除某些内容是什么意思。您想将元素的值设置为 0，这将导致类似 {"City 1", "City 2", 0, "City 3}。或者您想从数组中删除它并移动其他元素填充它的空间，这将导致类似{“City 1”，“City 2”，“City 3”}？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T23:29:40.967

使用数组，您可以使用 char* 处理空数组单元，例如“EMPTY”。要查找您在数组中搜索的项目，并找到“替换”或添加它。

```
const char * Empty = "EMPTY";
cout << "Please enter a city you want to add:"
cin >> city;
for(int i = 0; i < Arr_Size; i++) //variable to represent size of array
{
    if(Arr[i] == Empty) //check for any empty cells you want to add
    {
       //replace cell
    }
    else if(i == Arr_Size-1) //if on last loop
       cout << "Could not find empty cell, sorry!";
} 
```

至于删除一个单元格：

```
cout << "Please enter the name of the city you would like to remove: ";
cin >> CityRemove;

for(int i = 0; i < Arr_Size; i++)
{
    if(Arr[i] == CityRemove)
    {
        Arr[i] = Empty;             //previous constant to represent your "empty" cell
    }
    else if(i == Arr_Size - 1)    //on last loop, tell the user you could not find it.
    {
        cout << "Could not find the city to remove, sorry!";
    }
} 
```

在跳过“空”单元格时打印数组//打印数组

```
for(int i = 0; i < Arr_Size; i++)
{
    if(Arr[i] != Empty)             //if the cell isnt 'empty'
    {
        cout << Arr[i] << endl;
    }
} 
```

但我确实同意使用矢量将是一种更有效的方法，这只是一种让你思考的创造性方法。

# scheme - 简单方案，对列表中的所有元素进行平方

> ID：13003081
> 
> 赞同：2
> 
> 时间：2012-10-21T23:05:00.160
> 
> 标签：scheme

好的，我是 Scheme 的新手，我以为我理解它，但对这个问题感到困惑。我想对列表的所有元素进行平方。因此，(mapsq '(1 2 3)) 返回 (list 1 4 9)。

我的代码：

```
(define mapsq
  (lambda (ls)
    (cond ((null? ls) 0)
          (else (cons (car ls) (car ls))
                (mapsq (cdr ls))))))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T23:32:03.023

在实际（非学术）环境中，可以使用以下`map`过程轻松解决此问题：

```
(define mapsq
  (lambda (ls)
    (map (lambda (x) (* x x))
         ls))) 
```

当然，如果这是家庭作业并且您需要从头开始实施解决方案，那么我不应该提供答案。最好自己找出解决方案，填空：

```
(define mapsq
  (lambda (ls)
    (cond ((null? ls)               ; If the list is empty
           <???>)                   ; ... then return the empty list.
          (else                     ; Otherwise
           (cons (* <???> <???>)    ; ... square the first element in the list
                 (mapsq <???>)))))) ; ... and advance the recursion. 
```

您的解决方案中有两个问题：首先，基本情况不应该返回`0`- 如果我们正在构建一个列表作为答案，那么您必须返回空列表。其次，在递归步骤中，您实际上并没有对列表中的当前元素进行平方 - 为此只需将其与`*`运算符相乘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T18:57:20.757

```
(define (mapsq xs)
  (map * xs xs))

> (mapsq '(1 2 3 4 5))
'(1 4 9 16 25) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T23:29:37.957

你可以这样写：

```
(define (mapsq xs)
  (define (square x) (* x x))
  (map square xs)) 
```

或这个：

```
(define (mapsq xs)
  (map (lambda (x) (* x x)) xs)) 
```

或者可能是这样的：

```
(define (mapsq xs)
  (let loop ((xs xs) (sqs '()))
    (if (null? xs)
        (reverse sqs)
        (loop (cdr xs) (cons (* (car xs) (car xs)) sqs))))) 
```

甚至像这样：

```
(define (mapsq xs)
  (if (null? xs)
      '()
      (cons (* (car xs) (car xs)) (mapsq (cdr xs))))) 
```

我的偏好将是第一个选择。第二个选项较短，但辅助功能使第一个选项更易于阅读。我可能不会使用第三个或第四个选项。

顺便说一句，laser_wizard 的解决方案也不起作用。

我注意到你是新来的。如果您喜欢某个答案，请单击答案旁边的向上箭头，以便给出答案的人获得积分；这个标记还让读者社区知道答案中有一些有价值的东西。一旦您确信答案是正确的，请单击答案旁边的复选标记；这也给给出答案的人加分，更重要的是让其他读者知道你认为这个答案最正确地解决了你的问题。

# matlab - 这个 MATLAB 代码有什么问题？

> ID：13003084
> 
> 赞同：3
> 
> 时间：2012-10-21T23:05:43.350
> 
> 标签：matlab, concatenation, dimensions

我正在尝试在 MATLAB 中进行以下操作，

```
global a b c d e f g h l;
A=[1 3;3 2];
B=[a 0;0 b];
C=[d 0;e f];
Ctranspose=transpose(C);
D=[sqrt(d) 0;0 sqrt(f)];
E=Ctranspose/D;
Etranspose=transpose(E);
K=A+E;
M=E*D*Etranspose;

for a=1:10
  for b=1:10
    if  K==M
      print(a);
      print(b);
      print(d);
      print(e);
      print(f);
    end
  end
end 
```

我收到以下错误：

一个）

> ```
> Error using  + 
> Matrix dimensions must agree.
> 
> Error in trial (line 6)
> K=A+B 
> ```

b)

> ```
> Error using vertcat
> CAT arguments dimensions are not consistent.
> 
> Error in trial (line 5)
> C=[d 0;e f]; 
> ```

这里有什么问题？

（请注意，我是 MATLAB 新手）

谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-22T07:04:01.543

哎哟! 哎哟！让我直接跳进去打断你，然后再继续沿着这条路走下去！

我知道您不是程序员，但在生活中的某个时刻（显然，这是您的！），您必须面对事实并成为一名程序员，无论多么短暂。所以要知道，编程并不是一门真正的科学，它是一门艺术，是一种工艺，如果你愿意的话，而且很容易出错。还要知道，在您之前有数以百万计的程序员为您铺平了道路，并发现了哪些方法最有效，哪些方法会导致某些灾难。

我将描述您的代码中存在的其中六个“通向某些末日的道路”。

**首先**是使用`global`. ***不要使用全局变量！！***当然，它们适用于小而简单的事情，但更好、更易于管理、更耐用、更健壮、更不容易出错的传递数据的方法是*手动*进行。根据经验，创建所有顶级函数时，尽可能少地依赖其他函数/变量。这是因为全局变量在程序的状态和函数的输出之间创建了紧密的耦合，这使得重现任何错误变得困难，如果不是不可能的话，并且调试（实际上是任何程序员花费他/她大部分时间的）一个完整的噩梦. 此外，除了运行的功能之外的任何功能都可以更改它们，因此

```
function testMe
    global a;
    a = 5*rand;
    someFunction;
    b = 4*a; % ERROR! or...will it? 

function someFunction
    global a;
    a = a/5;
    if a < 0.5
        someOtherFunction; end

function someOtherFunction;
    global a;
    a = {'my string'}; 
```

*有时会*工作，*有时会*失败。可能发生的更糟糕的事情的一个例子：

```
function testMe
    global a, b;
    a = 5; b = 6;
    result = someCalculation;
    result = a*b*result;

function someFunction
    global a;
    a = sin(pi/rand); % INTENTIONAL

    % do LOTS of stuff here

    for a = 1:10 % OOPS! unintentional use of variable name
        % do stuff
        if (some weird condition)
            break; end
    end 
```

不会有错误，没有警告，什么都没有，但你的结果仍然是垃圾。随着你的函数变大（通常它们会变大），这个错误变得越来越*难*找到。花几天时间来发现这种错误并不少见。

在您的代码中，您还可以更改全局变量`a`和`b`循环内部。这意味着任何使用`a`and的函数/脚本，在这个完成*后被*`b`调用，都会看到and 。现在假设你*在*这些循环中调用了一个函数，它改变了. -loop的下一次迭代的值是多少？假设你也得到错误的结果。您将如何发现该错误？*`a=10``b=10`*`a``a``a`**

 **出于显而易见的原因，这样的代码通常被称为“意大利面条代码”。也许它会起作用，并且易于编码，但最终它总是会大大减慢您的速度（更不用说继承您的代码的人了）。

防止大部分情况发生的更好方法是在更大的容器中收集数据，并明确地传递它们。假设我们使用 a`struct`作为数据`a-l`：

```
data = struct(...
    'a', a,...
    'b', b,...
    'c', c,...
    'd', d,...
    'e', e,...
    'f', f,...
    'g', g,...
    'h', h,...
    'l', l); 
```

这样你就可以说

```
result = myFunction(data); 
```

访问内部数据`myFunction`是这样的：`data.a`获取 的值`a`或`data.f`的值`f`等。说`data.k = 5;`in`myFunction` *不会改变*,`result`或传递给函数的原始`data`值 - 您已经打破了紧密耦合并防止了所有上述问题。

在 Matlab 命令窗口中键入`help struct`或`help cell`以了解这些类型的通用容器。

**列表中的第二个**是使用变量 name `l`。这有点傻，我可以简短地说：不要那样做:) 与大多数人（甚至一些程序员）所相信的相反，你只*写*了一行代码，但你*读*了数百甚至数千次。最好的做法是让*阅读*尽可能简单，而不是*写作*。`l`只是看起来像，`1`不是吗？错误`k=1`vs比vs`k=l`更难发现。`k=m``k=1`

**名单上的**第三个**`transpose`是关键字。这有点冗长，不是吗？在数学中，您将使用 A ^T，这比一直写完整定义更容易理解：**

 **B = { A [ij] ➝ A [ji] ∀ i < m ⋏ j < n

你通常只是说 B = A ^T。在 Matlab 中也一样。矩阵的`transpose`可以这样完成：

```
Actrans = A' ; % conjugate transpose
Atrans  = A.'; % regular transpose 
```

这将您的代码减少到不那么冗长

```
A = [1 3;3 2];
B = [a 0;0 b];
C = [d 0;e f];    
D = [sqrt(d) 0;0 sqrt(f)];
E = C.'/D;    
K = A+E;
M = E*D*E.'; 
```

**排在第四**位的是平等`K==M`。因为它在这里，`K`并且`M`是*矩阵*。表达式`K==M`是*按元素计算的*，原因在你以后的编程生涯中会变得很明显:) 这意味着这`K==M`将再次是一个矩阵，大小与`K`and相同`M`，包含如果和中的`0`对应元素不相等，以及如果这些元素是平等的。那么，-statement 将如何处理这样的矩阵呢？在 Matlab 中，只要第*一个*元素为真（在我看来，它应该抛出一个错误，但是哦，好吧）。`K``M``1``if``true`

 *这显然不是你想要的。我认为你想要的是两个矩阵中的*所有*元素都是平等的。最好使用这个：

```
if all( abs(K(:)-M(:)) < eps ) 
```

其中`(:)`-notation 表示矩阵`K`并且`M`应该在比较之前扩展为列向量。这是因为`all()`在一个维度上起作用，所以`all(K==M)`仍然是一个矩阵（实际上*是*向量，但对于同一事物的特殊情况，这是一个不同的名称）。请注意，我没有使用相等 ( `==`)，而是检查它们的差异是否小于某个微小值 ( `eps`)。这是因为在浮点运算（所有计算机都使用）中，乘法和平方根之类的运算通常会受到舍入误差和近似/插值误差之类的影响。*平等*是一个非常艰难的要求，太难以评估`true`在大多数情况下，它在数学上应该。*您可以通过将两者的差异*与与舍入误差 ( ) 相关的微小值进行比较来防止这种检测相等性的失败`eps`。

**列表中的第五个**是你打印东西的方式。该`print`声明本身会向系统的默认打印机发送一个数字，你知道，如果今天感觉要合作，那台喜怒无常的机器会吐出带有墨水的纸 :) 现在，我假设你*试图*在屏幕。像你开始显示事物的方式那样做并不是最好的方式：你会得到这个未命名的非结构化值列表的十几倍：

```
1     % which would be the value of 'a'
1     % which would be the value of 'b'
3     % which would be the value of 'd'
4     % which would be the value of 'e'
5     % which would be the value of 'f'
... 
```

只看到出现的值会使阅读和解释正在发生的事情变得相当乏味。最好使用更具描述性的东西：

```
if all( abs(K(:)-M(:)) < eps )

    % option 1
    a
    b
    d   % NOTE: not terminating with semicolon
    e
    f

    % option 2
    fprintf(...
        'a: %d\n, b: %d\n, d: %d\n, e: %d\n, f: %d\n\n', a,b,d,e,f); 

end 
```

选项 1 只会显示

```
a = 
    1
b = 
    1
etc. 
```

这至少还显示了变量的名称及其值。选项 2 更好：

```
a: 1
b: 1
d: 3
e: 4
f: 5

a: 1
b: 2
d: 3
e: 4
f: 5

etc. 
```

（顺便说一句，循环中的值`a,b,d,e,f` *永远不会改变*，那么为什么要首先显示它们呢？）

**列表中的第六**个（也是最后一个！）是特定于 Matlab 的一个：`for`-loops。Matlab 是一种解释型、基于矩阵的语言。它的矩阵性质只是意味着每个变量本质上都是一个矩阵。解释意味着您的代码不会*直接*被计算机的处理器看到，它必须经过一系列解释和翻译才能计算出任何东西。这枚硬币有两个面：

*   它可以加快速度（比如编码，或者做一些“琐碎”的事情，比如求解线性系统、FFT、矩阵比较等）
*   它可以减慢速度（比如重复执行语句，比如在循环中）

考虑到性能，`for`-loop 在 Matlab 中因使操作变得爬行而臭名昭著。在 Matlab 中采用的方法通常是*矢量化*代码，例如，使用所有变量都是矩阵的事实，并对其使用矩阵/张量运算而不是循环。在大多数编程语言中，这不是一种非常常见的方法（在不习惯它的程序员中，你会看到很多强烈的、激烈的抵制），但在数学环境中，它很有意义。在诉诸 for 循环之前，始终尝试使用矩阵/张量运算作为第一道攻击线（Matlab 有***很多，请注意！）。***

所以，*这*就是你的代码的问题:) 哦，是的，正如 Andreas Hangauer 已经提到的，将引用`a`through的语句`l`以及所有需要重新计算的语句放在循环中，你会没事的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T23:29:12.793

您没有指定值`a b c d e f g h l`是什么，而是指定它们是全局变量。

a) 第一个错误：假设第 6 行出现错误，它要么是标量，`a`要么`b`不是标量。

b) 第二个错误：（错误在第 4 行而不是第 5 行）。这里又是一个`d`, `e`or`f`不是一个标量。这里发生的是，`d`可能`e`是标量，但`f`不是，f 是向量或矩阵。因此矩阵的第一行与第二行的长度不同，因此存在误差。

`for`循环的目的是什么？仅当和的`M==K`所有元素都相等时才会返回 true ，但第二行和第一列中的元素永远不会相同。如果不知何故和是相同的矩阵，那么代码将只打印,和的所有值组合。（注意和在循环中重新定义。）`M``K``M``K``d``e``f``a``b``a``b``for`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-21T23:35:06.297

您必须更改程序的顺序。

```
d = 4567; % some value necessary
e = 1234; % some value necessary
f = 4567; % some value necessary
for a=1:10
 for b=1:10

    A=[1 3;3 2];
    B=[a 0;0 b];
    C=[d 0;e f];
    Ctranspose=transpose(C);
    D=[sqrt(d) 0;0 sqrt(f)];
    E=Ctranspose/D;
    Etranspose=transpose(E);
    K=A+E;
    M=E*D*Etranspose;

   if  K==M
     print(a);
     print(b);
     print(d);
     print(e);
     print(f);

   end
 end
end 
```

您似乎没有正确理解编程语言的基本概念。在编程语言中（与数学符号不同），语句是顺序执行的命令，一个接一个。执行该命令时，计算中所需的所有值都必须可用，因此更新的执行顺序对于预期操作是必要的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T14:26:35.287

除了这里提到的所有内容，请妥善格式化代码（注意：下面的代码是 OP 的代码，所以它在编程上是错误的）：

```
global a b c d e f g h l;
A = [1 3; 3 2];
B = [a 0; 0 b];
C = [d 0; e f];
Ctranspose = transpose(C);
D = [sqrt(d) 0; 0 sqrt(f)];
E = Ctranspose / D;
Etranspose = transpose(E);
K = A + E;
M = E * D * Etranspose;

for a = 1:10
    for b = 1:10
        if  K == M
            print(a);
            print(b);
            print(d);
            print(e);
            print(f);
        end
    end
end 
```

*这可以节省您阅读*代码时的时间和精神资源，这实际上比*编写*代码要花费更多的时间。*****

# python - Pygame 第一个游戏问题

> ID：13003087
> 
> 赞同：3
> 
> 时间：2012-10-21T23:06:07.473
> 
> 标签：python, pygame

我是 Python 和 Pygame 的新手，我开始制作一个简单的游戏，在飞越敌人的玩家下方射击，以测试我学到的东西。当它运行时，我只是收到错误消息，说它不需要字符串。如下：

```
bgi="bg.png"     #BACKGROUND IMAGE
pi="man.png"     #PLAYER IMAGE
proji="proj.png" #PROJECTILE IMAGE

import pygame, sys            #Import
from pygame.locals import *   #Import

pygame.init() #Initialize

screen=pygame.display.set_mode((1000,600),0,32) #Display

background=pygame.image.load(bgi).convert() #Background
player=pygame.image.load(pi).convert_alpha() #Player

proji2=pygame.transform.rotate(proji, 180) #Rotate

x=0       #variables
y=0
mx=0
mv=0
projiy=0
player.pos=(x,y)

while True:                                   #Loop
    for event in pygame.event.get():
        if event.type==QUIT: #X Clicked
            pygame.quit()
            sys.exit()

        if event.type==KEYDOWN: #Key Press
            if event.key==K_a:
                mx=-1
            elif event.key==K_d:
                mx=+1
            elif event.key==K_s:
                screen.blit(proji2, player.pos)
                my=+1

        if event.type==KEYUP: #Key Release
            if event.key==K_a:
                mx=0
            elif event.key==K_d:
                mx=0
            elif event.key==K_s:
                my=0

    x+=mx
    projiy+=mv

    screen.blit(background, (0,0))  #Display
    screen.blit(player, (x,y))

    pygame.display.update()    #Update 
```

谁能帮我找出错误并向我解释为什么他们错了？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:09:56.563

看起来您忘记将“proj.png”转换为表面。它仍然是您从未实际打开过的文件的字符串名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T14:47:19.740

将前三行代码替换为以下内容：

```
bgi=pygame.image.load("bg.png").convert_alpha()
pi=pygame.image.load("man.png").convert_alpha()
proji=pygame.image.load("proj.png").convert_alpha() 
```

您不能在屏幕上显示字符串，只能在表面上显示。你需要使用 pygame.image.load 把它变成一个表面。将 .convert_alpha() 添加到末尾会大大提高帧速率，但不是绝对必需的，但强烈建议这样做。

玩得开心 Pygaming！

# opencv - Kinect SDK 深度数据 (C++) 到 OpenCV？

> ID：13003090
> 
> 赞同：5
> 
> 时间：2012-10-21T23:06:37.717
> 
> 标签：opencv, kinect, kinect-sdk

我一直在使用 Kinect SDK (1.6) DepthBasicsD2D C++ 示例从 kinect 获取深度帧，并希望在 OpenCV 中使用数据执行 blob 检测。

我已经使用示例配置了 OpenCV，并且还了解了示例的基本工作。

但不知何故，任何地方都没有帮助，而且很难弄清楚如何从 Kinect 获取像素数据并传递给 OpenCV 的 IplImage/cv::Mat 结构。

对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T19:42:51.893

这可以帮助您将 kinect 颜色和深度图像以及深度图像转换为 OpenCV 表示：

```
// get a CV_8U matrix from a Kinect depth frame 
cv::Mat * GetDepthImage(USHORT * depthData, int width, int height) 
{
    const int imageSize = width * height; 
    cv::Mat * out = new cv::Mat(height, width, CV_8U) ;
    // map the values to the depth range
    for (int i = 0; i < imageSize; i++)
    {
        // get the lower 8 bits
        USHORT depth =  depthData[i];   
        if (depth >= kLower && depth <= kUpper) 
        {
            float y = c * (depth - kLower); 
            out->at<byte>(i) = (byte) y; 
        }
        else
        {
            out->at<byte>(i) = 0; 
        }
    }
    return out; 
};

// get a CV_8UC4 (RGB) Matrix from Kinect RGB frame
cv::Mat * GetColorImage(unsigned char * bytes, int width, int height)
{
    const unsigned int img_size = width * height * 4; 
    cv::Mat * out = new cv::Mat(height, width, CV_8UC4);

    // copy data
    memcpy(out->data, bytes, img_size); 

    return out; 
} 
```

# python - 在 Python 中定义自定义异常

> ID：13003093
> 
> 赞同：0
> 
> 时间：2012-10-21T23:08:03.760
> 
> 标签：python, exception-handling

这个问题是参考的：

[在没有 PyLint 抱怨的情况下在 Python 中定义异常的“正确”方法](https://stackoverflow.com/questions/2901000/the-correct-way-to-define-an-exception-in-python-without-pylint-complaining)

就干净的代码而言，看起来定义异常的理想方法是：

```
class MyException(Exception):
    pass 
```

但是，如引用的问题中所述，这会导致运行时警告：

```
DeprecationWarning: BaseException.message has been deprecated as of Python 2.6 
```

接受的答案似乎是定义消息方法：

```
class MyException(Exception):
    def __init__(self, message):
        super(MyException, self).__init__(message)
        self.message = message 
```

除了 4 行更杂乱且可读性较差之外，最大的问题是您必须重复输入新异常 ( `MyException`) 的名称两次。

我不经常在 Python 中使用类，所以如果我在这里偏离基础，请原谅我，但处理这个问题的更好方法是使用非折旧`.message`方法定义您自己的基本异常，因为 Python 似乎有使用来自的问题`BaseException`？::

```
# Do this only once:
class MyBaseException(Exception):
    def __init__(self, message):
        super(MyBaseException, self).__init__(message)
        self.message = message

# Whenever you want to define a new exception:
class NewException(MyBaseException):
    pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:14:43.667

似乎在您使用**MyException.message**的代码中的某处 您可以将其更改为

```
try: 
   <some code>
except MyException as msg:
    <handle> 
```

# iphone - 线程崩溃问题

> ID：13003098
> 
> 赞同：1
> 
> 时间：2012-10-21T23:08:34.963
> 
> 标签：iphone, objective-c, ios, ipad

我有一个我无法破译的崩溃日志：

![在此处输入图像描述](../Images/83e59df718bb4211bb4e2d7e014c68c8.png)

如果我不得不猜测这必须让我在后台线程上进行 UI 升级。谁能启发我或者可能给我更多关于这个崩溃日志意味着什么的线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:11:56.090

是的。看起来您尝试在后台线程上更新 webview，要检查是否是这种情况，请找到要更新 UIWebView 的任何位置并将这行代码放入。

```
NSLog(@"[%@ %@] Is Main Thread? %@",NSStringFromClass([self class]), NSStringFromSelector(_cmd),[NSThread isMainThread]?@"YES":@"NO"); 
```

它将打印类、函数的名称以及您是否在主线程上。

如果你不在主线程上，那么你可以做一个简单的 if(!mainthread) 然后 performSelectorOnMainThread 在主线程上执行相关代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:28:52.170

如果您不使用 ARC，首先要做的是确保对代码运行分析（产品 > 分析）。我猜问题是你有一些引用计数，而后台线程正在尝试使用已经发布的东西。

# java - 蚀。我可以删除 Java 类构造函数以便 Eclipse 自动重构吗？

> ID：13003101
> 
> 赞同：1
> 
> 时间：2012-10-21T23:08:52.840
> 
> 标签：java, eclipse

我有一个类的空构造函数。我想删除构造函数，但是有很多地方我有这样的东西：

`Klass my_klass = new Klass("");`

如果可以的话，我想删除构造函数并让 Eclipse 自动重构。结果将如下所示：

`Klass my_klass = new Klass();`

Eclipse 有各种不错的重构特性。有这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:27:47.777

*   右键单击要删除的构造函数 -> 重构 -> 更改方法签名。
*   删除您想要的参数（所有这些都在您的情况下），然后您的 Eclipse 将自动更改您对该构造函数的所有调用。如果您已经有一个默认构造函数，它会抱怨；只需按确定，它会给你一个编译错误，因为你有两个具有相同参数的构造函数，
*   进行合并或删除旧的，您将获得所需的结果。

# twitter-bootstrap - 带有组合框（或任何下拉菜单）的引导导航栏搜索字段

> ID：13003108
> 
> 赞同：0
> 
> 时间：2012-10-21T23:09:29.890
> 
> 标签：twitter-bootstrap

我正在使用 Bootstrap v2.0.2 。下面是我为我的网站构建的导航栏

![在此处输入图像描述](../Images/1399b298637a7db748907c520aabff06.png) 搜索包含三个字段

```
1) Combo box or any drop down 
2) search input text field 
3) Search icon ( click-able ) 
```

. 这是上面屏幕截图的小提琴（请在Firefox中打开它）

[http://jsfiddle.net/krg78/1/](http://jsfiddle.net/krg78/1/)

有什么方法可以让组合框看起来像文本输入的一部分（现在两个看起来不同的字段）并代替 Search2 显示可以点击的搜索图标（就像在 facebook 中一样）？

如果我使用下面的行，我只是用空白字段代替 icon 。

```
<span class='add-on' style="float: right"> <i class="icon-search"></i> </span> 
```

谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:27:57.967

检查[http://jsfiddle.net/krg78/2/](http://jsfiddle.net/krg78/2/)

您可以通过添加相对于组合框的位置并将其移动到输入中，使组合框看起来像文本输入的一部分：

```
.navbar-search select {
  position: relative;
  left: 84px;
}

.navbar-search input {
  padding-left: 84px;
} 
```

# ruby-on-rails - Facebooker 未在服务器上登录（在本地工作）

> ID：13003117
> 
> 赞同：0
> 
> 时间：2012-10-21T23:11:11.270
> 
> 标签：ruby-on-rails, facebooker

我的 facebooker.yml 文件中有这些设置：

```
app_id: <app id>
secret: <secret>
api_key: <same as app id>
canvas_page_name:
callback_url: http://beta.mydomain.com:80/
pretty_errors: true
set_asset_host_to_callback_url: true 
```

当我尝试使用 FB 登录时，我得到 FB 登录弹出窗口，它在后台登录到 FB，但我的应用程序没有登录。同样的事情在本地使用`callback_url: http://localhost:3000`. 有任何想法吗？

*更新：也在* `callback_url: http://localhost:80` *服务器上尝试过，但没有成功*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:42:49.617

这听起来很愚蠢：FB App 设置中的站点 URL 是 localhost:3000。我需要设置正确的域。虽然它现在不能在本地主机上工作，但这是另一个问题......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T00:21:45.783

当您在 Facebook 上注册您的应用程序时。你把什么地址作为你的回调网址？

# audio - 使用 ffmpeg 从 28 分钟的视频中复制 5 秒

> ID：13003122
> 
> 赞同：3
> 
> 时间：2012-10-21T23:12:02.663
> 
> 标签：audio, video, ffmpeg, copy

如何使用 ffmpeg（来自 Windows 的命令行）尝试复制 5 秒的 mkv 视频？

这是我尝试过的：

```
ffmpeg -ss 00:15:00 -i myVideo.mkv" -t 5 c:v copy c:a copy output.mkv 
```

我收到此错误：

```
[NULL @ 0000000004909a60] Unable to find a suitable output format for 'c:v'
c:v: Invalid argument 
```

以下是视频中的信息：

```
Input #0, matroska,webm, from 'Title 01_02.mkv':
  Duration: 00:28:18.57, start: 0.000000, bitrate: 10183 kb/s
    Stream #0:0: Video: h264 (Constrained Baseline), yuv420p, 1920x1080 [SAR 1:1 DAR 16:9], 23.98 fps, 23.98 tbr, 1k tbn
, 48 tbc (default)
    Stream #0:1: Audio: mp3, 44100 Hz, stereo, s16, 128 kb/s (default) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T00:39:37.543

你忘记了`-`for 一些选项，而你有一个多余的`"`. 你的命令应该是：

```
ffmpeg -ss 00:15:00 -i myVideo.mkv -t 5 -c:v copy -c:a copy output.mkv 
```

这可以稍微缩短为：

```
ffmpeg -ss 00:15:00 -i myVideo.mkv -t 5 -c copy -map 0 output.mkv 
```

请注意，行为的`-ss`变化取决于其位置（输入选项与输出选项）。有关这方面的更多信息，请参阅以下答案：

*   [ffmpeg从指定时间段缓慢转换视频](https://stackoverflow.com/a/12208967/1109017)
*   [从命令行准确剪切视频文件](https://superuser.com/a/458804/110524)

* * *

请记住，ffmpeg 使用问题更适合 superuser.com，因为 SO 是特定于编程的。我不会通过回答来帮助这种常见情况，但是（正确）回答的问题总比没有好。

# javascript - 控制时间 通过 Javascript 播放和停止

> ID：13003125
> 
> 赞同：1
> 
> 时间：2012-10-21T23:12:19.473
> 
> 标签：javascript, html, audio

我试图在 html 中制作几个音频元素，当我通过 javascript 告诉它们播放音乐时。

这是我的html：

```
<div id="pixelbutton" onClick="musicplay1()"> </div>

<audio id="song1" src="audio/ruins.wav" autostart=false hidden=true> </audio> 
```

还有我的 Javascript：

```
function musicplay1() {
var song1 = document.getElementById("song1");
song1.setAttribute('autostart', 'true');
} 
```

音频是有充分理由的，所以请不要说“天哪，真的！？你在网页上放声音？这真的很烦人。” 评论。

问题是：如何在 javascript 中创建一个函数来控制我的 html 音频标签何时播放？

我对 JavaScript 比较陌生，因此感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:21:26.897

您还没有提出问题，但我可以看到一些需要改进的地方：

*   `autostart`和`hidden`是布尔属性，但这并不意味着您应该将它们视为布尔变量。如果该属性存在，则将其视为开启，否则视为关闭。没有属性`hidden`-只有设置`<audio>`了属性时才会显示元素`controls`。此外，您应该告诉浏览器您正在使用什么类型的音频。所以，你的音频标签应该是：

```
<audio id="song1" src="audio/ruins.wav" type="audio/x-wav" /> 
```

*   创建仅适用于一个实例的函数是一种不好的做法。您最好将其`1`作为参数传递，因此您将拥有：

```
<div id="pixelbutton" onClick="musicplay(1);"> </div> 
```

*   仅设置`autostart`属性可能不会使其自动启动。相反，请使用该`.play()`方法。有了这一点和上述观点，您将获得：

```
function musicplay(id) {
    document.getElementById('song'+id).play();
} 
```

*   最后，除非自从我上次检查以来情况发生了变化，否则只有 IE 和 Firefox 支持 WAV，Chrome 不支持。

希望这可以帮助。

# jquery - 为什么 jQuery 隐藏不立即（页面加载延迟）

> ID：13003128
> 
> 赞同：1
> 
> 时间：2012-10-21T23:12:28.953
> 
> 标签：jquery, hide, delay

# 是）我有的：

我正在使用 jQuery 隐藏无序列表中的最后几个列表项。

# 我的问题：

列表项出现在页面上，直到页面加载并且 jQuery 启动（这是不可取的）。

**编辑：我无法编辑 HTML。由于我不能有选择地添加类，因此我不能依赖纯 CSS。我正在使用 jQuery 选择器来定位最后两个列表项。**

# 我的代码：

无论我使用 hide() 函数还是 addclass() + display:none，我都会遇到同样的问题。

```
<ul id="some_menu">
    <li><a href="#">Enkidu</a></li>
    <li><a href="#">Gilgamesh</a></li>
    <li><a href="#">Epic</a></li>
    <li><a href="#">Sumeria</a></li>
    <li><a href="#">Anunnaki</a></li>
</ul>

<script type="text/javascript">
    jQuery(document).ready(function() {
        //jQuery('ul#some_menu li:gt(2)').addClass("hide_menu_link");
        jQuery('ul#some_menu li:gt(2)').hide();
    });
</script>

<style type="text/css">
    .hide_menu_link{
        display:none;
    }
</style> 
```

这是 JSFIDDLE 上的代码，尽管它没有重现问题：http: [//jsfiddle.net/dominornovus/pB8Mb/2/](http://jsfiddle.net/dominornovus/pB8Mb/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T23:18:57.327

通过使用`jQuery(document).ready`，您告诉 jQuery 在执行之前等待文档准备好。因此，它确实会等待页面准备好（加载），然后再采取行动。

就像其他人说的那样，如果您希望某些项目在页面开始时隐藏而另一些项目可用，您应该反转逻辑，从隐藏的所有内容开始，然后在文档准备好时显示您想要显示的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T23:14:44.970

如果您希望在加载时隐藏这些元素，则需要使用 CSS 来隐藏它们。等到页面加载完毕后再开始使用 javascript 操作它通常是一个好主意，否则您尝试隐藏的元素可能尚未加载。

根据您的要求，您可以通过多种方式使用 CSS 隐藏它们。

`display: none;`当您调用时，jQuery 将其设置为内联样式`.hide()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T23:16:05.940

问题是因为 jQuery 是客户端执行的，所以，首先代码来自服务器并显示给你的浏览器，在加载 DOM 并准备好 jQuery 之后将执行，所以它总是这样，除非您将其隐藏在服务器端语言中或使用 css 规则。

# iphone - 此代码适用于 iPhone 吗？

> ID：13003129
> 
> 赞同：-1
> 
> 时间：2012-10-21T23:12:52.013
> 
> 标签：iphone, ios

> **可能重复：**
> [如何以编程方式拨打电话？](https://stackoverflow.com/questions/4582327/how-to-make-a-call-programmatically)

我想知道这段代码是否可以在 iPhone 上运行，我无法测试它，因为我只有 ipodtouch 和模拟器。这就是代码中的全部内容。此外，是否有任何规则或指导方针反对这一点，如果它不起作用，我是否需要添加一条消息？感谢我收到的任何回复。

```
 -(IBAction)callPhone:(id)sender {
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel:2135554321"]];
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:20:25.003

可能重复：

[iPhone：拨打电话](https://stackoverflow.com/questions/1239328/iphone-make-a-call)

看来，您必须将代码更改为

```
-(IBAction)callPhone:(id)sender {
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel://2135554321"]];
  } 
```

# java - 带有选择器的 FrameLayout 前景

> ID：13003141
> 
> 赞同：6
> 
> 时间：2012-10-21T23:14:56.503
> 
> 标签：java, android, user-interface

我有一个 FrameLayout，我想通过选择器为其应用前景可绘制对象，我正在尝试实现“drawSelectorOnTop”，但对于一个简单的布局

现在当用户按下“state_pressed”时选择器不适用

这是我的代码：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:foreground="@drawable/cell_background_selector" >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"

        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#282828"
        android:paddingBottom="5dp" >
..
......
........
</RelativeLayout>
</FrameLayout> 
```

这是我的选择器代码：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:drawable="@drawable/video_blank" android:state_pressed="true"/>
     <item android:drawable="@drawable/fav_show"/>
</selector> 
```

两个图像都存在，但 FrameLayout 始终将正常状态可绘制应用为前景

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T16:44:30.703

老问题，但是当我遇到类似问题时，它是谷歌上的第一个热门话题。

您是否为 FrameLayout 设置了 OnClick 侦听器？如果不是，则永远不会使用按下状态。

# ruby-on-rails - Rails：如何分别循环遍历 flash 错误和 flash 通知？

> ID：13003142
> 
> 赞同：1
> 
> 时间：2012-10-21T23:15:00.923
> 
> 标签：ruby-on-rails

我正在尝试以不同于我的闪光通知（绿色背景）的方式设置我的闪光错误（红色背景）的样式。但是，我正在尝试在 application.html.erb 的布局中执行此操作，以便我可以一次处理所有闪存，因此不会有任何实例变量。但是，我很难找到正确的变量。这是我当前的 application.html.erb：

```
<!DOCTYPE html>
<html>
<head>
  <title><%= complete_title(yield(:title)) %></title>
  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>
</head>
<body class="clearfix">
    <div class="bigwrapper">

    <%= render 'layouts/header' %>

    #I want to figure out how to split this part up into flash[:notice].each and flash[:error].each so I can style them separately
    <% flash.each do |key, value| %>
        <%= content_tag(:div, value, class: "alert alert-#{key}") %>
    <% end %>

        <%= yield %>

    <%= render 'layouts/footer' %>
    </div>
</body>
</html> 
```

这是我使用 flash[:error] 的示例会话控制器

```
class SessionsController < ApplicationController

def new
end

def create
    user = User.find_by_email(params[:session][:email])
    if user && (!params[:session][:email].blank?) && user.authenticate(params[:session][:password])
    if params[:remember_me]
      cookies.permanent[:remember_token] = user.remember_token
    else
      cookies[:remember_token] = user.remember_token
    end
      sign_in user
      redirect_to user_path(user)
    else
      flash.now[:error] = "Invalid email and/or password."
      render 'new'
    end
end

def destroy
    sign_out
    redirect_to root_url
end 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:54:55.740

究竟是什么问题？您已经可以单独设置它们的样式，因为您正在构建具有不同类名的 flash div，具体取决于 flash 类型：

```
class: "alert alert-#{key}" 
```

只需添加一些CSS：

```
.alert-error { background: red; }
.alert-notice { background: green; } 
```

# javascript - Jquery 循环插件 - 一个脚本中带有循环插件的多个 div？

> ID：13003143
> 
> 赞同：0
> 
> 时间：2012-10-21T23:15:07.143
> 
> 标签：javascript, html, jquery-cycle

我是 jquery/javascript 的新手，需要帮助！

我想在多个 div 中使用循环插件，每个 div 中有不同的图像。每个 div 大小相同，每个图像大小相同。

到目前为止，我使用的代码显示了第一个 div 中的所有图像，但是当我单击我的徽标（链接到 index.html）时，所有图像突然出现在适当的位置并使用循环插件。

这就是我脑子里的东西

```
<script type="text/javascript" src="js/jquery-1.3.js"></script>
        <script type="text/javascript" src="js/jquery.cycle.all.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $('#box1').cycle({ 
                        fx:     'fade', 
                       speed:   300, 
                       timeout: 0, 
                       next:   '#box1', 
                       pause:   1  
                });
            });

            $(document).ready(function(){
                $('#box2').cycle({ 
                        fx:     'fade', 
                       speed:   300, 
                       timeout: 0, 
                       next:   '#box2', 
                       pause:   1  
                });
            });

            $(document).ready(function(){
                $('#box3').cycle({ 
                        fx:     'fade', 
                       speed:   300, 
                       timeout: 0, 
                       next:   '#box3', 
                       pause:   1  
                });
            });
        </script> 
```

身体...

```
<div id="container">

            <div id="box1" class="box">
            <img src="images/car.jpg" alt="images/car.jpg"/>
            <img src="images/van.jpg" alt="images/van.jpg"/>
            </div>

            <div id="box2" class="box">
            <img src="images/bottle.jpg" alt="images/bottle.jpg"/>
            <img src="images/pattern.jpg" alt="images/pattern.jpg"/>
            </div>

            <div id="box3" class="box">
            <img src="images/car.jpg" alt="images/car.jpg"/>
            <img src="images/van.jpg" alt="images/van.jpg"/>
            </div>
    </div> 
```

在 css 中，容器是 position: absolute;

我确信有一个简单的解决方案，但我搜索了 stackoverflow 和其他网站无济于事。任何帮助是极大的赞赏！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:54:02.163

我做了这个例子：

[http://jsfiddle.net/oceog/YHLz2/11/](http://jsfiddle.net/oceog/YHLz2/11/)

```
$(function() {
    $('.box').each(function() {
        var $this = $(this);
        $this.cycle({
            fx: 'fade',
            speed: 300,
            timeout: 0,
            next: $this,
            pause: 1
        });
    });
});​ 
```

它按预期工作，你的也是。可能是你使用太旧的 jquery 吗？（当前为 1.8）

如果答案不适合您的问题，您能否编辑 jsfiddle 以显示问题所在？

* * *

*   **当我加载页面时**
*   **当我点击我的标志时**，链接到 index.html

我认为**当您加载页面时，**您加载的不是 index.html，而是 index.htm 或 index.php 或其他内容，请检查您的站点目录

*jsfiddle 应该重复您的问题，而不仅仅是显示您的结构*

*如果您的网站在互联网上 - 给我链接，我会检查*

* * *

尝试将您的代码更改为以下内容：

```
 $(document).load(function() {
    $('.box').each(function() {
        var $this = $(this);
        $this.cycle({
            fx: 'fade',
            speed: 300,
            timeout: 0,
            next: $this,
            pause: 1
        });
    });
});​ 
```

# c# - 多线程更新数组

> ID：13003145
> 
> 赞同：1
> 
> 时间：2012-10-21T23:15:23.507
> 
> 标签：c#, multithreading, .net-3.5

我试图在我的应用程序中实现多线程，这会进行大量的浮点数计算（神经网络）。

我编写了在该函数之外进行必要计算和更新数组的函数。我实际的单线程代码如下所示（为了更好理解而进行了简化）：

```
class MyClass
{
    // this array after all calculations should contain 
    // result of only one calculation, 
    // that returned smallest value in one of array fields 
    // (smallest neural network error)
    float[] bestResult;

    // runs calculations on all "sets of data"
    public void findBestResult(void)
    {
        foreach (something...) // data rows from database cached in one array
        {
            calculate(x[]);
        }
    }

    // calculates one "set of data"
    public void calculateAndUpdateResultIfBetter(float[] inputData)
    {

        if (bestResult[0] > calculatedData[0])
             bestResult = calculatedData; // update only if condition is true
    }

} 
```

我是低级程序员，我不知道如何使用高级（？）.NET 线程技术，使用 Synchronize 等。我知道如何为某事创建一个额外的线程并使用委托更新表单上的一些控件。

我不知道如何使用 2-8 个线程做完全相同的事情并相互竞争。

问题 1 是 - 你能帮我解决这个问题吗？我不知道如何开始。由 Niko Drašković 解决

编辑：问题 2 是 - lock() 方法会锁定我的数组以进行读写吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T23:21:39.343

您使用该`lock`语句来防止不同的线程同时运行相同的代码。您需要一个引用来用作锁的标识符。创建一个仅用于锁定的简单对象是很常见的：

```
float[] bestResult;
object sync = new Object(); 
```

然后围绕访问您使用的数组的代码`lock`：

```
lock (sync) {
  if (bestResult[0] > calculatedData[0]) {
    bestResult = calculatedData;
  }
} 
```

您可能希望每个线程首先计算它可以在它负责的数据中看到的最佳值，然后组合这些最佳值。如果您过于频繁地运行锁定代码，您将使线程相互等待，从而失去很多首先运行单独线程的理由。

# java - 获取在 jsp 上输入的值到动作类

> ID：13003147
> 
> 赞同：2
> 
> 时间：2012-10-21T23:15:45.443
> 
> 标签：java, jsp, input, struts, action

当我在 jsp 中键入新内容然后将列表提交给 actionclass 时，如何获取该值？目前，我可以从 jsp 提交到动作类并查看我在动作中创建的新列表。但我希望能够检索我在 jsp 中键入的值。

员工对象类：

```
public class Employee {
    String empid;
    String empname;

        public String getEmpid() {
            return empid;
        }

        public void setEmpid(String empid) {
            this.empid = empid;
        }

        public String getEmpname() {
            return empname;
        }

        public void setEmpname(String empname) {
            this.empname = empname;
        }

        public Employee(String empid, String empname) {
            this.empid = empid;
            this.empname = empname;
        }

    } 
```

员工 JSP：

```
<%@page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-    8859-1"%>
    <%@ include file="../imports.jsp" %>  
     @page import="java.util.List"%>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title> Struts Logic Iterate Tag</title>
</head>
<body bgcolor="#ffcc66">
<html:form action="/logiciterate" styleId="LogicIterateForm" method="post"> 

    <h1>Struts logic:iterate tag </h1>
      <table style="font-weight:bold">
        <tr><td>Employee ID</td>
        <td>Employee Name</td></tr>

    <logic:iterate name="LogicIterateForm" property="emp" id="employee">
            <tr>
                    <td><html:text name="employee" value="${employee.empid}"          property="empid"
                            indexed="true" /></td>
                    <td><html:text name="employee" value="${employee.empname}"
                            property="empname" indexed="true" /></td>
            </tr>
    </logic:iterate> 
```

```
 <input type="submit"  id="submit" value="Submit"   title="Submit" name="Submit"   > 
```

```
 </html:form>
</body> 
```

动作类：

```
 public class LogicIterateAction extends org.apache.struts.action.Action {

private final static String SUCCESS = "success";

public ActionForward execute(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {

   if(request.getParameter("Submit") == null) {          

                                LogicIterateForm formBean=(LogicIterateForm)form;
                               ArrayList<Employee> list = new ArrayList<Employee>();
                                list.add(new Employee("11A0","Jack"));
                                list.add(new Employee("11A1","Sam"));
                                list.add(new Employee("11A2","Joe"));
                                list.add(new Employee("11A3","John"));
                                formBean.setEmp(list);
                                    return mapping.findForward(SUCCESS);

}

else{

     LogicIterateForm formBean=(LogicIterateForm)form;
      ArrayList<Employee> list2 = new ArrayList<Employee>();
                list2.add(new Employee("673","Queenie"));
                list2.add(new Employee("123","Wally"));
                list2.add(new Employee("345","Spike"));
                list2.add(new Employee("564","Red"));
                formBean.setEmp(list2);

     return mapping.findForward(SUCCESS);

}

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:51:20.500

这一步如何...在动作类中编写消息..示例--
request.setAttribute("message", "User deleted successfully");

Step2...在jsp页面中gettng msg..示例-- <%= request.getAttribute("message") %>

你在找这个吗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T19:56:34.947

使用下面的示例。

在 JSP 中：

```
<logic:iterate name="monthlyGainLossForm" property="ptcList" id="productTaxCat">
    <html:hidden name="productTaxCat" property="ptcId" indexed="true" />
    <html:hidden name="productTaxCat" property="ptcName" indexed="true" />
    <html:hidden name="productTaxCat" property="ptcActive" indexed="true" />
    <mf:tr>
        <mf:td><bean:write name="productTaxCat" property="ptcName"/></mf:td>
        <mf:td><bean:write name="productTaxCat" property="ptcActive"/></mf:td>
        <mf:td><html:checkbox name="productTaxCat" property="msaPtcLtcGLType" styleClass="input" indexed="true"/></mf:td>
        <mf:td><html:text name="productTaxCat" property="msaPtcLtcGLAmt" styleClass="label" style="width:100px;vertical-align:middle;" disabled="true" indexed="true"/></mf:td>
        <mf:td><html:checkbox name="productTaxCat" property="msaMthlyStcGLType" styleClass="input" indexed="true"/></mf:td>
        <mf:td><html:text name="productTaxCat" property="msaMthlyStcGLAmt" disabled="true" styleClass="label" style="width:100px;vertical-align:middle;" indexed="true"/></mf:td>
        <mf:td><html:checkbox name="productTaxCat" property="nonMsaPtcGLType" styleClass="input" indexed="true"/></mf:td>
        <mf:td><html:text name="productTaxCat" property="nonMsaPtcGLAmt" disabled="true" styleClass="label" style="width:100px;vertical-align:middle;" indexed="true"/></mf:td>
        <mf:td><html:checkbox name="productTaxCat" property="nonMsaStcGLType" styleClass="input" indexed="true"/></mf:td>
        <mf:td><html:text name="productTaxCat" property="nonMsaStcGLAmt" disabled="true" styleClass="label" style="width:100px;vertical-align:middle;" indexed="true"/></mf:td>
    </mf:tr>
</logic:iterate> 
```

在行动：

```
for(int m = 0; m < monthGainLossForm.getPtcList().size(); m++) {
    ProductTaxCat prodTaxCat = (ProductTaxCat)monthGainLossForm.getPtcList().get(m);

    if(prodTaxCat.getMsaMthlyStcGLType()) {
        selectedPtcTypeCounter++;
    }

    if(prodTaxCat.getMsaPtcLtcGLType()) {
        selectedPtcTypeCounter++;
    }

    if(prodTaxCat.getNonMsaPtcGLType()) {
        selectedPtcTypeCounter++;
    }

    if(prodTaxCat.getNonMsaStcGLType()) {
        selectedPtcTypeCounter++;
    }
} 
```

# iphone - MFMailComposeViewController 和 UITextField 类

> ID：13003149
> 
> 赞同：0
> 
> 时间：2012-10-21T23:15:50.617
> 
> 标签：iphone, objective-c, ios

我有 UITextField 类别。使用此类别 MFMailComposeViewController 将不起作用，当我呈现 MFMailComposeViewController 并出现错误时它会崩溃

```
Terminating app due to uncaught exception 'CALayerInvalidGeometry', reason: 'CALayer position contains NaN: [nan 24.5]' 
```

* * *

```
@implementation UITextField (SomeCategory)

- (CGRect)textRectForBounds:(CGRect)bounds {
    return CGRectInset( bounds , 30 , 5);
}
- (CGRect)editingRectForBounds:(CGRect)bounds {
    return CGRectInset( bounds , 30 , 5);
}

@end 
```

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:38:33.583

尝试：

```
- (CGRect)textRectForBounds:(CGRect)bounds {
    if (CGRectIsNull(bounds) || CGRectIsInfinite(bounds)) {
        return bounds;
    }
    return CGRectInset( bounds , 30 , 5);
} 
```

你的第二个功能也是如此。

不过，您应该重命名函数，以免它们与现有方法或子类冲突，而不是使用类别。

# haskell - 为什么我会收到无法推断 (Ord a) 错误？

> ID：13003150
> 
> 赞同：8
> 
> 时间：2012-10-21T23:15:52.043
> 
> 标签：haskell

我试图找到元素总和最小的列表。：

```
shortest :: (Num a) => [[a]] -> [a]
shortest [] = []
shortest (x:xs) = if sum x < sum (shortest xs) then x else shortest xs 
```

这给了我以下错误：

> ```
> Could not deduce (Ord a) arising from a use of `<'
> from the context (Eq a)
>   bound by the type signature for shortest :: Eq a => [[a]] -> [a]
>   at code.hs:(8,1)-(9,71)
> Possible fix:
>   add (Ord a) to the context of
>     the type signature for shortest :: Eq a => [[a]] -> [a]
> In the expression: sum x < sum (shortest xs)
> In the expression:
>   if sum x < sum (shortest xs) then x else shortest xs
> In an equation for `shortest':
>     shortest (x : xs)
>       = if sum x < sum (shortest xs) then x else shortest xs 
> ```

为什么函数不进行类型检查？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-21T23:30:06.973

此代码中涉及两个类型类：`Num`和`Ord`. 请注意，类型可以是成员`Num`而不是成员`Ord`，反之亦然。

的类型`sum`是`Num a => [a] -> a`所以输入元素`shortest`需要是 的成员`Num`。您还可以在代码中执行以下操作：

```
sum x < sum (shortest xs) 
```

这意味着您`<`在`a`s 上使用运算符，但在您的类型签名中，您没有要求`a`s 是`Ord`定义的实例`<`：

```
class Eq a => Ord a where
  compare :: a -> a -> Ordering
  (<) :: a -> a -> Bool
  ... 
```

因此，您需要将该要求添加到您的类型签名中：

```
shortest :: (Ord a, Num a) => [[a]] -> [a] 
```

或者你可以省略类型签名。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-21T23:22:01.373

`Num`不包括`Ord`，因此您缺少类型签名中的`Ord`约束。`a`它应该是

```
shortest :: (Num a, Ord a) => [[a]] -> [a] 
```

您可以删除类型签名，GHC 会为您推断。

# android - 具有多个视图的片段，“屏幕”

> ID：13003154
> 
> 赞同：0
> 
> 时间：2012-10-21T23:16:13.533
> 
> 标签：android, android-layout, android-fragments

我一直在寻找一种方法来使用带有自己“屏幕”的片段。

我的场景：

*   FragmentActivity -> 布局：带有这些选项卡的选项卡主机：主页 | 网络 | 饲料

*   HomeFragment -> 布局：有 2 个按钮，我需要为这些按钮创建一个屏幕，但我不知道该怎么做，也许隐藏正在显示的元素并仅在“按钮屏幕”上显示我需要的元素

*   NetworkFragment -> 布局：n 个按钮和 n 个屏幕

*   FeedsFragment -> 布局：n 个按钮和 n 个屏幕

选项卡主机工作正常，我可以在选项卡（片段）之间切换，但是在片段屏幕上时，我需要单击该按钮并显示片段选项卡屏幕以外的其他屏幕。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T01:11:19.793

您要使用的是[FrameLayout](http://developer.android.com/reference/android/widget/FrameLayout.html)。这将使您拥有一堆视图。它的部分文档内容如下：

> 子视图绘制在堆栈中，最近添加的子视图在顶部。

这在 Android 框架中经常用于执行诸如显示空视图或列表视图之类的任务，如下面的代码片段所示。此代码段可以显示 ListView 或 TextView。

```
 <FrameLayout
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="1" >
    <!-- Here is the list. Since we are using a ListActivity, we
         have to call it "@android:id/list" so ListActivity will
         find it -->
    <ListView android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:drawSelectorOnTop="false"/>

    <!-- Here is the view to show if the list is emtpy -->
    <TextView android:id="@android:id/empty"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:text="No items."/>

</FrameLayout> 
```

请注意，第一个元素在底部，最后一个元素在底部，在膨胀布局之后。在这个特定的示例中，这意味着 TextView 将是唯一可见的，因为它匹配父项（即填充父项。）

如果要使另一个视图可见，则可以使另一个视图不可见：

```
findViewById(android.R.id.empty).setVisible(View.INVISIBLE); 
```

如果您有多个视图（称为屏幕），只需遍历它们并将您不想显示的视图设置为不可见，以便显示您想要显示的视图。

请注意，如果您想变得更漂亮，您可以对片段执行相同的技术。有一篇很好的关于这方面的 Android 培训文章，名为[Building a Flexible UI](http://developer.android.com/training/basics/fragments/fragment-ui.html)。它仍然使用 FrameLayout，但它使用 Fragment 事务。但它可能不适用于您的特定情况，因为片段不能包含其他片段并且您已经依赖 TabHost 中的多个片段，所以从上面更简单的 FrameLayout 方法开始。

# python - 使用python的hello world上的语法错误

> ID：13003155
> 
> 赞同：0
> 
> 时间：2012-10-21T23:16:24.083
> 
> 标签：python

以下 hello world 示例给了我一个错误，任何帮助都会很有用

```
print("Hello","World", sep="***")

File "basicio.py", line 9
    print("Hello","World", sep="***")
                              ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T23:18:15.393

您正在使用 Python2 并编写 Python3 语法。

只需键入`print "hello, world"`

或`python3`根据您的提示使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T23:19:05.980

`print()`适用于 python 3.x，要使其在 python 2.x 中工作，您需要先导入它：

```
In [3]: from __future__ import print_function

In [4]: print("Hello","World", sep="***")
Hello***World 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-21T23:17:57.507

您正在 python 2 解释器中运行 python 3 代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T23:17:44.103

您的语法对 Python 2.x 无效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-07T09:20:24.303

python中有两个独立的东西：语句和函数。在 python 2 中，print 是一个语句。从 python 3 开始，他们将 print 变成了一个函数，并允许它接受诸如“ *sep* ”之类的参数。您使用的是 python 2，因此如果您***必须***使用此额外功能，请升级到 python 3。

有关打印更改的更多信息，请查看[此](https://stackoverflow.com/questions/1077347/hello-world-in-python)内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-21T23:19:06.723

也许您正在使用 Python 2？这是 Python 3 的语法。

# javascript - jQuery/.NET/User Controls：一页上的两个控件，X的Callback从Y的调用中调用

> ID：13003156
> 
> 赞同：0
> 
> 时间：2012-10-21T23:16:24.633
> 
> 标签：javascript, jquery, .net

我一定遗漏了一些东西，因为我有另一个以相同方式构建的控件，但没有这个问题。我有一个通过 .NET 的 registerClientScriptInclude 注册的 jQuery 网格控件。两个网格上的所有内容都正常工作，但我正在调用 Datatables KeyTable 库中的一个函数，当用户通过网格键入并到达表格行的最末端时，该函数会强制页面更改，将它们移动到下一页。

当我注册这些控件时，它看起来像这样：

```
var lookupGrid = registerGrid('pageContent_tbl1',...)
var lookupGrid2 = registerGrid('pageContent_tbl2',...) 
```

网格代码在一个嵌入资源的 JS 文件中：

```
var registerGrid = function (table, ...) {
  grid = {
    "oTable": $("#" + table).dataTable({
        "bProcessing": true,
         ...
    }),
"focusPostDraw": function (position) {
            var drawCB = function () {
                if (position === 'top') {
                    keys.fnSetPosition($('#' + table + " tbody tr:first td.canEdit:first ")[0].cellIndex, 0);
                    keys.fnRemoveFocus($('#' + table + " tbody tr:last td.canEdit:last "));
                } else if (position === 'bottom') {
                    var oSettings = inlineGrid.oTable.fnSettings();
                    keys.fnSetPosition($('#' + table + " tbody tr:last td.canEdit:last ")[0].cellIndex, oSettings._iDisplayLength - 1);
                    keys.fnRemoveFocus($('#' + table + " tbody tr:first td.canEdit:first "));
                } else {
                    // Do Nothing
                }
                grid.setInlineGridHandler(function () { });
            };
            grid.setInlineGridHandler(drawCB);
        }
    };
return grid;
} 
```

当我调用 focusPostDraw 时，一切看起来都很棒，但是当我调用时：

```
grid.setInlineGridHandler(drawCB); 
```

网格变量实际上是指向网格的lookupGrid2 实例，而不是lookupGrid。奇怪的是，表变量被设置为lookupGrid 的表变量的ID。到底是怎么回事？有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:29:10.853

声明范围内的变量。您的 js 文件应包含：

```
 var registerGrid = function (table, ...) {
  var grid = {
    "oTable": $("#" + table).dataTable({
        "bProcessing": true,
         ...
    }),
"focusPostDraw": function (position) {
            var drawCB = function () {
                if (position === 'top') {
                    keys.fnSetPosition($('#' + table + " tbody tr:first td.canEdit:first ")[0].cellIndex, 0);
                    keys.fnRemoveFocus($('#' + table + " tbody tr:last td.canEdit:last "));
                } else if (position === 'bottom') {
                    var oSettings = inlineGrid.oTable.fnSettings();
                    keys.fnSetPosition($('#' + table + " tbody tr:last td.canEdit:last ")[0].cellIndex, oSettings._iDisplayLength - 1);
                    keys.fnRemoveFocus($('#' + table + " tbody tr:first td.canEdit:first "));
                } else {
                    // Do Nothing
                }
                grid.setInlineGridHandler(function () { });
            };
            grid.setInlineGridHandler(drawCB);
        }
    };
return grid;
} 
```

除非你这样做，否则你的`grid`引用将是一个未定义的 document.window-level 变量，名为`grid`. 第二次运行该函数时，您将覆盖该变量以及对它的引用。

# objective-c - 作为变量（实例）的objective-c协议

> ID：13003162
> 
> 赞同：2
> 
> 时间：2012-10-21T23:17:38.587
> 
> 标签：objective-c

我是objective-c的新手，我仍然不清楚以下是可能的

1.  是否可以实例化协议？
2.  如果可以实例化一个协议，我该如何实现所需的方法？

**编辑：**

这就是我使用和实现协议的方式：

```
@protocol myProtocol <NSObject>

@required
    - (void)doneAction:(NSDate *)dateSelected;
@end

@interface datePickerView : UIView

@property (strong, nonatomic) UIDatePicker *datePicker;
@property (strong, nonatomic) UIButton *doneButton;
@property (strong, nonatomic) NSObject<myProtocol> *datePickerProtocol;

- (id)initWithDetails:(UIDatePicker *)datePick doneBtn:(UIButton *)doneBtn;
- (void)show;
@end 
```

这是“datePickerView”的实现

```
@synthesize datePicker = _datePicker;
@synthesize doneButton = _doneButton;
@synthesize datePickerProtocol = _datePickerProtocol;

- (id)initWithDetails:(UIDatePicker *)datePick doneBtn:(UIButton *)doneBtn
{
    _datePicker = datePick;
    _doneButton = doneBtn;
    [_doneButton addTarget:self action:@selector(doneButtonClicked) forControlEvents:UIControlEventTouchUpInside];

    [self addSubview:_datePicker];
    [self addSubview:_doneButton];
}

- (void)doneButtonClicked
{
    /** Code to hide the view goes here **/
    if (_datePickerProtocol != nil)
        [_datePickerProtocol doneAction:_datePicker.date];
} 
```

这是使用“datePickerView”的类

```
/** .h file **/
@interface myController : UITableViewController <myProtocol>
{
}

@property (strong, nonatomic) IBOutlet UIDatePicker *datePicker;
@property (strong, nonatomic) IBOutlet UIButton *datePickDone;
/** More definitions goes here **/

/** .m file **/
@synthesize datePicker = _datePicker;
@synthesize datePickDone = _datePickDone;
/** More code goes here **/

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *selectedCell = [self.tableView cellForRowAtIndexPath:indexPath];
    if ((![selectedCell.reuseIdentifier isEqualToString:@"dateAppliedCellIdentifier"]) &&
        (![selectedCell.reuseIdentifier isEqualToString:@"closingDateCellIdentifier"]))
        return;

    if (_datePicker.superview == nil)
    {
        datePickerView = [[datePickerView alloc] initWithDetails:_datePicker     doneBtn:_datePickDone];

        [self.view.window addSubview: datePickerView];
    }
    /**
        THIS IS WHERE I WANT TO PASS AN INSTANCE OF THE PROTOCOL (BUT AS ADVISED,
        IT IS NOT POSSIBLE) DEPENDING ON WHICH CELL WAS TAPPED. THE REASON I WANT
        PASS AN INSTANCE OF THE PROTOCOL INSTEAD OF "SELF" IS BECAUSE I WANT
        TO AVOID DOING MULTIPLE "IF" STATEMENTS INSIDE
        "(void)doneAction:(NSDate *)dateSelected" METHOD. I WOULD LIKE TO DO THE IFs
        HERE AND PASS THE CORRECT INSTANCE OF THE PROTOCOL DEPENDING ON WHICH CELL
        WAS TAPPED. EACH INSTANCE OF THE PROTOCOLS HAVE DIFFERENT IMPLEMENTATIONS OF
        "doneAction".
    **/
    [datePickerView setDatePickerProtocol:self];
    [datePickerView show];
}

//implementation of the protocol method
- (void)doneAction:(NSDate *)dateSelected
{
    //IF STATEMENTS GOES HERE DEPENDING ON WHICH CELL WAS TAPPED
    NSLog(@"Done action is called!");
} 
```

请参阅我对代码的评论，在此行上方 [datePickerView setDatePickerProtocol:self]。由于我无法实例化协议并分配给变量，除了从控制器实现“myProtocol”并在“doneAction”方法中执行多个 IF 语句之外，是否有替代或更好的方法来实现我的目标？

根据答案，我似乎需要定义实现“myProtocol”的类并创建这些类的实例并传递给“datePickerView setDatePickerProtocol”。我的理解正确还是这样做合理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T23:23:56.227

没有协议不能从它们创建实例，如果可以的话，它们只是类。协议只是定义一组任何类都可以实现的方法的一种方式，这样您就不必使用继承来让两个不同的类具有相同的方法。子类化您共享的类会打扰父类的接口和实现，有时在类之间共享接口而不共享任何实现是有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T23:41:39.413

协议只是一个接口——没有实现。所以即使你*可以*实例化一个协议（你不能），你仍然需要一些方法来提供协议接口的实现。

协议的全部意义在于它只允许您指定*接口*，并且任何类都可以实现该协议。例如，iOS 中的 MapKit 框架提供了`MKAnnotation`协议，该协议定义了地图注释对象的接口。你可以`MKAnnotation`在任何你喜欢的类中实现。如果你在你`MKAnnotation`的某个类中采用，你基本上是在保证该类提供某些方法，即`-coordinate`、`-setCoordinate:`、`-title`和`-subtitle`。做到这一点的能力在像 Objective-C 这样的单继承语言中很重要——这意味着你可以创建*任何*你喜欢的类作为注解，你不必对某些提供的注解类进行子类化。

您的`datePickerProtocol`属性指向一个实现的对象`myProtocol`，而不是它自身的一个实例`myProtocol`（同样，这没有意义）。如果这真的是你想要的，那么你做得很好......你可以声明一个指向实现`someProtocol`为的对象的指针`id<someProtocol>`or `NSObject<someProtocol>*`。

或者，如果您想引用实际协议本身而不是实现该协议的对象，您可以这样做。Objective-C 提供了与`Protocol`type 类似的`Class`类型：就像任何给定的类都是 type 的对象一样`Class`，任何给定的协议都是 type 的对象`Protocol`。您可以使用该`@protocol`指令来获取特定协议的协议对象。[Objective-C 运行时参考](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html#//apple_ref/doc/uid/TP30001163-CH15-TPXREF149)中有更多信息。

# c++ - C++：响应 Windows 注销的清理操作

> ID：13003165
> 
> 赞同：3
> 
> 时间：2012-10-21T23:17:51.073
> 
> 标签：c++, windows, logoff

我想捕捉 Windows 注销事件，以便进行一些清理。我的`WindowProc`样子是这样的：

```
switch (uMsg){
case WM_ENDSESSION:
case WM_DESTROY:
    PostQuitMessage(0);
    return 0;
// other messages
}
return DefWindowProc(hwnd, uMsg, wParam, lParam); 
```

消息循环`WinMain`如下所示：

```
for(;;){
    bool bTerminate = false;
    while(PeekMessage(&msg, NULL, 0, 0, PM_REMOVE)){
        if(msg.message == WM_QUIT){
            bTerminate = true;
        }
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    if(bTerminate){
        break;
    }
    // do other stuff
    Sleep(10);
}
FILE * fout;
fopen_s(&fout, "C:\\success.txt", "w"); // simulating cleanup actions
fclose(fout);
ExitProcess(0); 
```

预期的机制就是这样`WindowProc`做`PostQuitMessage`，导致主消息循环接收`WM_QUIT`、中断循环并将程序发送到清理。当我退出程序（因此发送`WM_DESTROY`）时，程序会创建`success.txt`，但是当程序运行并且我注销（发送`WM_ENDSESSION`）时，它不会。

我也看过`WM_QUERYENDSESSION`，但[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376890%28v=vs.85%29.aspx)说“每个应用程序都应该在收到此消息后立即返回`TRUE`或`FALSE`立即返回，并将任何清理操作推迟到收到`WM_ENDSESSION`消息为止。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T23:36:21.683

`WM_ENDSESSION`处理实际上并没有让您的应用程序有机会退出消息循环。`WM_ENDSESSION`您应该假设系统在发送消息后调用 TerminateProcess 。

因此，您的应用程序需要执行的任何清理工作都应该在从窗口过程返回之前完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T12:28:51.473

在 Windows UI 应用程序中，您可以使用： 您可以从此[msdn 链接](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376889%28v=vs.85%29.aspx) 获得更多帮助。`LRESULT CMainDlg::WindowProc(UINT message, WPARAM wParam, LPARAM lParam)
{ if(message == WM_ENDSESSION) { if(lParam == ENDSESSION_LOGOFF) { /*Handle event*/ } } return CDialogEx::WindowProc(message, wParam, lParam); }`

# excel - Matlab XlsRead - 这是风格不佳的代码吗？

> ID：13003170
> 
> 赞同：2
> 
> 时间：2012-10-21T23:18:12.280
> 
> 标签：excel, matlab

我正在尝试读取 Excel 电子表格，其中第一列具有键，以下列具有值到结构中，键作为字段名称，值作为值。我想出了以下代码，但感觉不是很matlab-y - 我觉得应该有一种方法可以在 O(1) 时间内完成此操作，而不是 O(n)。

```
[num,txt,~]=xlsread('whatever.xls','Rate');
txt=cell2mat(txt);
for i = 1:size(txt)
    rates.(txt(i,:))=num(i,:)
end 
```

有什么更合适的方法来解决这个问题？我在家里工作，我只有 Octave，所以 importdata 超出了解决方案的范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:12:38.777

在这种情况下，您可以使用“struct”命令创建具有各种字段名称和值的结构。最困难的部分通常是以正确的顺序获取单元格输入......幸运的是，xlsread （几乎）为您提供所需的东西。我现在假设您的 excel 文件如下所示：

```
字段 1 字段 2 字段 3
1 2 3

```

如果是这样的话，那么：

```
[~,~,raw] = xlsread('C:\...\xlsx');
myStruct = struct(raw{:}); 
```

将工作。这就是单元阵列扩展的魔力。查看“struct”的帮助和“cell”的帮助。这也很好：

[http://blogs.mathworks.com/loren/2009/10/21/dealing-with-cells/](http://blogs.mathworks.com/loren/2009/10/21/dealing-with-cells/)

最后一点，Brian L 在上面是正确的；MATLAB one-liner 可能看起来很酷，但不能“保证”比相应的 for 循环更快。

鉴于阅读您的代码的人在 99% 的情况下都无法理解上面的示例，因此您的 for 循环示例就可以了。

# php - php。上传 .gif 文件到服务器

> ID：13003174
> 
> 赞同：0
> 
> 时间：2012-10-21T23:19:03.227
> 
> 标签：php

我的任务要求我让用户将 .gif 文件扩展名上传到文件夹，并在上传后显示它们。

我得到了表单和处理页面，但我似乎无法让它们工作。我将目录的权限设置为 rwxrwxrwx 以对其进行测试。

上传文件代码：

```
<html>
  <head>
<title>Assignment 7 Part II -- Art Gallery</title>
  </head>
  <body>
    <form method="post" action="a7a2.php" enctype="multipart/form-data">
    <input type="hidden" name="MAX_FILE_SIZE" value="50000">
    Your file: <input type="file" name="uploadFile" /><br />
    <input type="submit" value="Upload it">
  </form>
</body>
</html> 
```

代码：

```
<html>
      <head>
        <title>Assignment 7 Part II -- Art Gallery Results</title>
      </head>
      <body>

      <?php
      $uploadDir = 'images/';
      $uploadFileDir = $uploadDir . basename($_FILES['uploadFile']['name']);                                                   
      if(isset($_FILES['uploadFile'])) {
          if($_FILES['uploadFile']['error'] != UPLOAD_ERR_OK ||
          $_FILES['uploadFile']['mime'] != "image/gif") {
          print "<p>File not uploaded successfully!</p>";
          print "<p>Please make sure the file has the correct file extension: .gif</p>"; 
          print "<p><a href='a7p2.php'>Try uploading again</a>";
          var_dump($_FILES['uploadFile']['error']);
          die;
          } else {
          move_uploaded_file($_FILES['uploadFile']['name'], $uploadFileDir) or die("Can't move file to $uploadFileDir");   
          print "<p>Success!</p>";
          }
      }

      $uploadedFiles = glob("/students/ryan/php/images/*.gif");
      if($uploadedFiles != false) {
          print "<p>Here are pictures from the art gallery: </p>";
          foreach($uploadedFiles as $file) {
          $url = "http://hills.ccsf.edu/~ryan/images/" . substr($file, strrpos($file, '/') + 1);
          print "<p><img src=\"$url\"></p>";
          }
      } else {
          print "There are no pictures in the art gallery";
      }
      ?>

      </body>
    </html> 
```

或相同的代码，链接到下面的代码：

[http://pastebin.com/JNxwy323](http://pastebin.com/JNxwy323)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T23:26:53.527

依赖浏览器告诉您文件的 MIME 类型是不安全的。相反，您应该检查文件是否是它应该是的。在这种情况下：

```
if( !@imagecreatefromgif($_FILES['uploadFile']['tmp_name'])) {
    // file is not a valid GIF image
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-25T20:24:56.290

您需要为 move_uploaded_file 使用 tmp_name 而不是 name

```
 move_uploaded_file($_FILES['uploadFile']['tmp_name'], $uploadFileDir) or die("Can't move file to $uploadFileDir"); 
```

也代替 $_FILES['uploadFile']['mime'] != "image/gif") {

它应该是 $_FILES['uploadFile']['type'] != "image/gif") {

# macos - 用于代码学习的优秀开源 Mac OSX 应用程序？

> ID：13003177
> 
> 赞同：2
> 
> 时间：2012-10-21T23:19:08.170
> 
> 标签：macos, cocoa

我正在重写我的 Mac OSX 应用程序（其中充满了意大利面条式代码），但在此之前，我想花点时间研究一下现有的 Mac OSX 应用程序。

github.com 或其他地方有什么好的东西可以让我学习好的编码约定吗？

具体来说，我正在寻找可用于 CoreData、NSOutlineView、Bindings 等的 Mac 应用程序。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T23:53:21.403

一些地方可以开始：

*   [Apple 开发者网站上的示例代码](https://developer.apple.com/library/mac/navigation/index.html#topic=Sample+Code&section=Resource+Types)
*   从开源程序中查找源代码。这是来自 opensourcemac.org和另一个来自[Mac.AppStorm](http://mac.appstorm.net/roundups/utilities-roundups/30-great-open-source-mac-apps/)[的开源程序列表](http://opensourcemac.org/)。[Adium](http://trac.adium.im/)、[Cyber​​duck](http://trac.cyberduck.ch/)、[Vienna](http://www.vienna-rss.org/?page_id=16)、[Transmission](https://trac.transmissionbt.com/)是我用过的一些可靠的应用程序（不过，不确定它们是否利用了你提到的所有功能）。

# javascript - 并非 Async.js 系列中的每个函数都执行

> ID：13003178
> 
> 赞同：0
> 
> 时间：2012-10-21T23:19:11.797
> 
> 标签：javascript, node-async

我正在尝试使用[Async.js](https://github.com/caolan/async)来触发一系列异步函数。下面是我的代码。只有前两个函数执行。系列中的第三个和第四个函数不执行。我已经将思考的功能简化为最基本的可能。但他们仍然没有执行。有人可以告诉我我做错了什么吗？

```
async.series([
        guessCollection.find( { user: user, imageFileName: imageFileName } ).count( function(err, number) {
        count = number;
        console.log(count);
        }),

        guessCollection.find( { user: user, imageFileName: imageFileName, correct: '1' } ).count( function(err, number) {
        correct = number;
        console.log(correct);
        }),

        function(){
            console.log("this text never doesn't get logged");
        },
        function() {
            console.log("neither does this text");

        }
    ]); 
```

编辑---正如下面的答案所建议的，我做了前两个适当的功能。然而，现在只执行该系列中的第一个函数。函数 2-4 不会被调用。我认为这段代码肯定还有其他问题。

```
async.series([
        function(){
        guessCollection.find( { user: user, imageFileName: imageFileName } ).count( function(err, number) {
        count = number;
        console.log(count);
        })
    },
        function(){
        guessCollection.find( { user: user, imageFileName: imageFileName, correct: '1' } ).count( function(err, number) {
        correct = number;
        console.log(correct);
        })
    },

        function(){
            console.log("this text never doesn't get logged");

        },
        function() {
            console.log("neither does this text");

        }
    ]); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T23:32:26.017

take a look to this code, it output only 1 2 3, because 3rd function not call the callback function, so series stops here. [http://jsfiddle.net/oceog/9PgTS/](http://jsfiddle.net/oceog/9PgTS/)

```
​async.series([
    function (c) {
        console.log(1);
        c(null);
    },        
    function (c) {
        console.log(2);
        c(null);
    },        
    function (c) {
        console.log(3);
//        c(null);
    },        
    function (c) {
        console.log(4);
        c(null);
    },        
    ]);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T23:24:55.943

You are supposed to provide `async.series` only with functions. The first items in the array are not functions. You need to wrap these calls in ones.

```
async.series([
  function () {
    collection.find().count(function () { … });
  },
  function () {
    collection.find().count(function () { … });
  },
  function () {
    console.log();
  },
  function () {
    console.log();
  }
]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T23:24:42.377

The first two items in the collection don't look like functions, it looks like you're invoking the first two functions immediately - or does count() return a function?

If you are invoking them, and not passing functions to async that's why it's choking before getting to the last two items.

# android - 从 android 应用程序中运行 Android 测试

> ID：13003180
> 
> 赞同：0
> 
> 时间：2012-10-21T23:19:17.033
> 
> 标签：android, testing, junit

是否可以从 android 应用程序中运行 Android JUnit 测试？例如，我可以用一个按钮制作一个 Activity。单击该按钮时，应用程序会运行一个打包在其中的测试，然后将测试结果打印到屏幕上。我将如何去做这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:01:49.703

帖子[http://dtmilano.blogspot.ca/2011/09/android-testing-running-tests-from-code.html](http://dtmilano.blogspot.ca/2011/09/android-testing-running-tests-from-code.html)准确地解释了你想要做什么。

这个想法是从要用作启动器的 Activity中使用[startIntrumentation() 。](http://developer.android.com/reference/android/content/Context.html#startInstrumentation%28android.content.ComponentName,%20java.lang.String,%20android.os.Bundle%29)要获得结果，您可以阅读 logcat。在我的 OSCON 2012 演示文稿的源代码中有一个显示这两个步骤的示例，可在[github](https://github.com/dtmilano/I2AT-OSCON-2012/blob/master/TemperatureConverter-OSCON-2012/tests/src/com/dtmilano/i2at/tc/test/TemperatureConverterTestsActivity.java)获得。

# ios - 有没有办法以编程方式打开 iOS 中的“shift”（大写）键？

> ID：13003188
> 
> 赞同：1
> 
> 时间：2012-10-21T23:20:52.607
> 
> 标签：ios, uitextview, capitalization

我有一个 UITextView，我会自动在里面写上日期。然后我想让光标在日期之后，按下 shift（大写）按钮，这样用户就可以开始输入，第一个字母将大写。

这可能吗？我怎样才能做到这一点？

感谢帮助！谢谢，R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:23:23.713

只需自动转换 ascii 值即可。

[http://www.asciitable.com/](http://www.asciitable.com/)

我认为您必须减去 32 才能从“a”变为“A”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-19T07:49:37.093

对于多语言支持并确保您不会错过任何用例，您可能希望使用一种允许您遵循键盘内置功能的技术。

您可以通过临时设置`autocapitalizationType`为`.allCharacters`（可选在子类中）来做到这一点：

```
if (autocapitalizationType == .allCharacters) {
    autocapitalizationType = .sentences
    autocorrectionType = .yes
    reloadInputViews()
} 
```

看看他[的帖子](https://stackoverflow.com/a/68436829/1231948)。

# php - 如何实现303重定向？

> ID：13003192
> 
> 赞同：3
> 
> 时间：2012-10-21T23:21:22.260
> 
> 标签：php, redirect, http-headers

我想知道如何实现 303 重定向来显示`post`数据。

例子：

```
I send the form.

Redirect

Page displays the info I just posted. (Eg: Name, email). 
```

我认为它是通过参数完成的，比如`/index.php?name=TheName&email=theEmail`但我不确定，因为我试图找到一些解释它的好文章但找不到。

非常感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-21T23:25:52.277

在 PHP 中，您可以使用以下命令执行 303 重定向 `header()`：

```
header("HTTP/1.1 303 See Other");
header("Location: http://$_SERVER['HTTP_HOST']/new/location/here"); 
```

您可能面临的问题是在重定向后保留表单信息。一种解决方案可能是使用[PHP 会话变量](http://www.php.net/manual/en/session.examples.basic.php)来存储表单数据。

您可以使用参数重定向以传递提交的数据，但这不是我认为的“干净”解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T23:28:38.977

您可以通过其他方式执行此操作，而不是在 url 中传递参数。

1.  发送表格。
2.  检查有效值后，将结果存储在数据库中，会话像往常一样。
3.  重定向
4.  从数据库或会话中检索。
5.  **在输出上使用[htmlentities() 。](http://php.net/manual/en/function.htmlentities.php)**

# mongodb - MongoDB评论系统Slug，它是干什么用的？

> ID：13003194
> 
> 赞同：10
> 
> 时间：2012-10-21T23:21:36.910
> 
> 标签：mongodb, slug

我正在阅读有关如何[在此处](http://docs.mongodb.org/manual/use-cases/storing-comments/)为评论系统建模数据库的 MongoDB 教程。一份评论文件包含以下信息：

```
{
    _id: ObjectId(...),
    discussion_id: ObjectId(...),
    parent_id: ObjectId(...),
    slug: '34db/8bda'
    full_slug: '2012.02.08.12.21.08:34db/2012.02.09.22.19.16:8bda',
    posted: ISODateTime(...),
    author: {
              id: ObjectId(...),
              name: 'Rick'
             },
    text: 'This is so bogus ... '
} 
```

我似乎无法理解的是`slug`and`full_slug`的用途，无法从文档中理解。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-21T23:34:58.313

在我看来，它看起来像是某种获取评论的 URL 快捷方式，例如，当您键入时： `http://site.com/34db/8bda`它会为您带来评论本身，`full-slug`用于按评论发布时间对评论进行排序和排序。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-01-30T12:33:08.353

基本上，slug 只不过是“使用人类可读的关键字识别”对象的“URL 的一部分”（参见[维基百科“语义 URL”](https://en.wikipedia.org/wiki/Semantic_URL)）

在[MongoDB 用例文档“Storing Comments”](https://docs.mongodb.org/ecosystem/use-cases/storing-comments/)中，每个评论都有一个独特的短“slug part”，可以被认为是一种替代的、独立于数据库的 ID。然后通过将所有评论的所有 slug 部分与讨论线程层次结构链接起来来构建评论文档的`slug`字段，以形成实际评论的路径。基本上，它也可以通过加入由斜线分隔的所有（父）注释的 ID 的字符串表示来构建。但它会更长，更不可读，并且在某种程度上更依赖于底层的 MongoDB 数据库。

该`full_slug`字段的形成`slug`方式如上所述，但每个 slug 部分都以创建其相关评论的日期和时间为前缀。这似乎是必要的或至少有利于一次按讨论线程和日期执行排序查询。该`full_slug`字段仅用于执行按讨论线程和日期排序的查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-20T17:05:41.560

一件事就像上面的答案。但我认为他们还有另一种用法。

对于需要线程评论（如回复评论）的评论系统，您需要这个“slug”东西才能按“full_slug”对检索到的评论进行排序。

产生一组按线程顺序排序的评论。在前端，您可以使用不同的缩进显示它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-21T01:35:08.637

slug 是人类可读的唯一标识符，用于标识资源，而不是像 id 这样的人类可读性较差的标识符。当你想引用一个项目时，你会使用 slug，同时保留一眼就能看到项目是什么的能力。然后在 URL 中使用这些标识符。

# variables - 在mathematica中分配变量

> ID：13003196
> 
> 赞同：0
> 
> 时间：2012-10-21T23:21:45.567
> 
> 标签：variables, wolfram-mathematica

在我的 matematica 模块中分配变量以解决我的 PD 函数时，我可以寻求一些帮助吗？

```
 PD[a_,l_]:= Module[(a=[x1,y1,P],l=[x2,y2]; PD.=P./(4*pi*((x2-x1)^2)+(y2-y1)^2))] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:03:21.667

就像是 ：

```
pd[a_, l_] :=  a[[3]]/(4 Pi ((l[[1]] - a[[1]])^2 + (l[[2]] - a[[2]])^2))

pd[{1, 2, 3}, {4, 5}]
(* 1/(24 \[Pi]) *) 
```

您可能还想重新定义您的论点；例如 ：

```
pd2[r1_, r2_, p_] = p/(4 Pi EuclideanDistance[r1, r2]^2);

pd2[{1, 2}, {4, 5}, 3]
(* 1/(24 \[Pi]) *) 
```

# java - Azure Bing API 代码 Java 慢

> ID：13003201
> 
> 赞同：1
> 
> 时间：2012-10-21T23:22:28.760
> 
> 标签：java, search, azure, odata, bing-api

我正在尝试 Azure Bing 搜索 API（仅适用于 url 链接），想知道是否有人可以帮助改进我的 java，以便不需要 1.5 到 2.5 秒即可获得 API 返回。

我想我已经找到了瓶颈，但不知道如何解决它。

具体来说，在提供了我的搜索词和 accountKey 之后，我设置了一个 URLConnection。到目前为止，应用程序运行——而且速度很快——但是我没有得到任何回报。为此，我创建了一个 InputStream 并运行一个 while 循环以将所有字符添加到 StringBuilder。这是显着降低速度的部分。

有没有比我正在做的更快的方法来获取搜索结果？我没有尝试使用 json 或 Bing 的选项来获取 tarball 的结果，但不确定这些是否会显着改变这一点。

详细信息——操作系统（我在基本的 CentOS 机器和 Windows 7 机器上进行了尝试——两者都使用 eclipse 中的控制台来查看结果）。Myspeedtest.net 显示 12Mbps 下降和 1Mbps 上升。

```
public static void api(String st) throws IOException{
        String bingUrl = "https://api.datamarket.azure.com/Bing/Search/Web?Query=%27"+st+"%27";

        String accountKey = "ASDFASDFASDFASDFASDFASDF=";
        byte[] accountKeyBytes = Base64.encodeBase64((accountKey + ":" + accountKey).getBytes());
        String accountKeyEnc = new String(accountKeyBytes);

        URL url = new URL(bingUrl);
        URLConnection urlConnection = url.openConnection();
        urlConnection.setRequestProperty("Authorization", "Basic " + accountKeyEnc);     
        //FROM HERE DOWN IS WHAT SEEMS TO TAKE FOREVER. 
        InputStream is = urlConnection.getInputStream();
        InputStreamReader isr = new InputStreamReader(is);

        int numCharsRead;
        char[] charArray = new char[1024];
        StringBuilder sb = new StringBuilder();
        while ((numCharsRead = isr.read(charArray)) > 0) {
            sb.append(charArray, 0, numCharsRead);
        }

        System.out.println(sb.toString());
    } 
```

编辑 #### 编辑 ### 编辑 ##### 编辑

我刚刚尝试了另一种使用 json 和 Apache httpclient 的方法。同样，这也很好用，但**速度很慢**。也许是 Msft 的服务？

```
package com.search;

import org.apache.commons.codec.binary.Base64;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;

public class BingAPI2 {
public static void getBing() throws Exception {

        HttpClient httpclient = new DefaultHttpClient();

        try {
            String accountKey = "ASDFASDFASDFASDFASDFASDFASDF=";
            byte[] accountKeyBytes = Base64.encodeBase64((accountKey + ":" + accountKey).getBytes());
            String accountKeyEnc = new String(accountKeyBytes);

            HttpGet httpget = new HttpGet("https://api.datamarket.azure.com/Data.ashx/Bing/Search/Web?Query=%27Datamarket%27&$top=10&$format=Json");
            httpget.setHeader("Authorization", "Basic <"+accountKeyEnc+">");

            System.out.println("executing request " + httpget.getURI());

            // Create a response handler
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            String responseBody = httpclient.execute(httpget, responseHandler);
            System.out.println("----------------------------------------");
            System.out.println(responseBody);
            System.out.println("----------------------------------------");

        } finally {
            // When HttpClient instance is no longer needed,
            // shut down the connection manager to ensure
            // immediate deallocation of all system resources
            httpclient.getConnectionManager().shutdown();
        }
    }

} 
```

# python - 蟒蛇南！=南

> ID：13003202
> 
> 赞同：6
> 
> 时间：2012-10-21T23:22:47.833
> 
> 标签：python, math, nan

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> x = float('nan')
>>> id(x) == id(x)
True
>>> x == x
False 
```

我对如何`nan != nan`使用 python 很感兴趣。为了澄清起见，我知道`nan`根据定义应该表现得像那样，我问的是*为什么*而不是为什么。这是在哪里实施的？是否还有其他类似行为的对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T23:24:02.960

Not A Number (NaN) 不等于任何东西。要检测它，请使用`math.isnan`. 像这样的对象很容易定义：

```
class A(object):
    def __eq__(self, other):
        return False

    def __ne__(self, other):
        return True 
```

原因很简单。CPython 遵循 IEEE 754 浮点数学标准。NaN 是一个浮点值，IEEE 754 规定它不等于任何其他浮点值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T23:29:22.310

实现浮点运算的机器代码使用 NaN 处理运算结果。对于 x86 处理器系列，这通常是使用 x87 协处理器指令来实现的，尽管对于早期的 x86 处理器，x87 协处理器并不总是存在，编译器通常会提供仿真代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-21T23:38:48.623

对于您问题的“位置”部分，请查看 Python 2.7.3 源代码树中 Objects/floatobject.c 中的第 391 行。简要讨论了 NaN == NaN 的行为，实现如下。

对于其他表现出类似行为的情况，这当然是可能的。但是，我还没有对图书馆进行详尽的搜索，所以我无法给出明确的答案。

# c - 你如何为一个 fork 和 execs 的程序组织文件系统？

> ID：13003204
> 
> 赞同：0
> 
> 时间：2012-10-21T23:23:19.783
> 
> 标签：c, file, exec, fork, main

我正在开发一个 C 项目，其目标是使用多个进程对文件进行排序。该文件被提供给第一个程序，即“根”进程，但随后根分叉和执行到“拆分”进程，然后分叉和执行到“排序”进程。基本上是用于排序的进程的二叉树。

我的问题是如何在文件系统中组织所有这些程序。我需要3个主要方法对吗？因为当您执行时，主要方法运行正确吗？如果是这样，所有 3 个程序不能在同一个文件夹中并一起编译，对吗？我必须有3个不同的make文件？

我需要这样的东西吗：主文件夹

根文件夹--拆分器文件夹--排序器文件夹

这是我拥有的第一个涉及多个进程的操作系统项目。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:35:53.053

您仍然可以在同一个文件夹中拥有三个可执行文件，它们都使用相同的 makefile 编译。只是以不同的方式命名它们。

示例生成文件：

```
CC = gcc
CFLAGS = -Wall
LDFLAGS =

TARGET1 = program1
TARGET2 = program2
TARGET3 = program3
ALL_TARGETS = $(TARGET1) $(TARGET2) $(TARGET3)

all: $(ALL_TARGETS)

$(TARGET1): program1.o
    $(CC) $(LDFLAGS) -o $@ $<

$(TARGET2): program2.o
    $(CC) $(LDFLAGS) -o $@ $<

$(TARGET3): program3.o
    $(CC) $(LDFLAGS) -o $@ $<

.c.o:
    $(CC) $(CFLAGS) -c -o $@ $< 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:30:31.430

您可以拥有一个可执行文件，在每次调用 fork() 之后，它可以判断它是父级还是子级，并执行相应的代码。

# android - 连接到现有的 SQLite 数据库

> ID：13003205
> 
> 赞同：0
> 
> 时间：2012-10-21T23:23:22.447
> 
> 标签：android, sqlite, android-sqlite

我正在尝试与本教程中的相同： [http](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/) ://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/ 但我面临一些困难。这是我的课：

```
public class TechAgrumeSQLiteHelper extends SQLiteOpenHelper {    

      //The Android's default system path of your application database.
    private static String DB_PATH = "/data/data/test.test.test/databases/";

    private static String DB_NAME = "Player_Club";

    private SQLiteDatabase myDataBase; 

    private final Context myContext;
    private static final String TABLE_PLAYERS = "Player";
    private static final int DATABASE_VERSION = 3;
    // Contacts Table Columns names
    private static final String KEY_CODE = "_id";
    private static final String KEY_NOM = "nom_Player";
    private static final String KEY_SURNOM = "surnom_Player";
    private static final String KEY_AGE = "age_Player";

    /**
     * Constructor
     * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
     * @param context
     */
    public TechAgrumeSQLiteHelper(Context context) {

        super(context, DB_NAME, null, 1);
        this.myContext = context;
        Log.d("I'm here: ","I'm here!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
        boolean dbExist = checkDataBase();
        if(dbExist){
            //do nothing - database already exist
            Log.d("Copy BD","database already exists!!!!!!!!!!!!!!!!!!!!!!!!!!!!!");
        }else{

            //By calling this method and empty database will be created into the default system path
               //of your application so we are gonna be able to overwrite that database with our database.
            this.getReadableDatabase();

            try {

                copyDataBase();
                        Log.d("Copy BD","Datbase copied!!!!!!!!!!!!!!!!!!!!!!!!!!!");

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }
    }   

  /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException{

    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){

        SQLiteDatabase checkDB = null;

        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){

            //database does't exist yet.

        }

        if(checkDB != null){

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException{

        //Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }

    @Override
    public synchronized void close() {

            if(myDataBase != null)
                myDataBase.close();

            super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

        // Add your public helper methods to access and get content from the database.
       // You could return cursors by doing "return myDataBase.query(....)" so it'd be easy
       // to you to create adapters for your views.

        void addPlayer(Player player) {
            SQLiteDatabase db = this.getWritableDatabase();
            ContentValues values = new ContentValues();
            values.put(KEY_NOM, player.getNom_Player()); // Contact Name
            values.put(KEY_SURNOM, player.getSurnom_Player()); // Contact Phone
            values.put(KEY_AGE, player.getAge_Player()); // Contact Phone

            // Inserting Row
            db.insert(TABLE_PLAYERS, null, values);
            db.close(); // Closing database connection
        }

        public List<Player> getAllPlayers() {
            List<Player> playerList = new ArrayList<Player>();
            // Select All Query
            String selectQuery = "SELECT  * FROM " + TABLE_PLAYERS;

            SQLiteDatabase db = this.getWritableDatabase();
            Cursor cursor = db.rawQuery(selectQuery, null);

            // looping through all rows and adding to list
            if (cursor.moveToFirst()) {
                do {
                    Player player = new Player();
                    player.setCode_Player(Integer.parseInt(cursor.getString(0)));
                    player.setNom_Player(cursor.getString(1));
                    player.setSurnom_Player(cursor.getString(2));
                    player.setAge_Player(Integer.parseInt(cursor.getString(3)));
                    // Adding contact to list
                    playerList.add(player);
                } while (cursor.moveToNext());
            }

            // return contact list
            return playerList;
        }

} 
```

这是 MainActivity 类：

```
public class MainActivity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TechAgrumeSQLiteHelper db=new TechAgrumeSQLiteHelper(this);
    //this.deleteDatabase("Player_Club.db");
    // Inserting Contacts
        Log.d("Insert: ", "Inserting ................................................");
        db.addPlayer(new Player("nom1", "prénom1",25));
        db.addPlayer(new Player("nom2", "prénom2",24));
        db.addPlayer(new Player("nom3", "prénom3",26));
        db.addPlayer(new Player("nom4", "prénom4",16));

        // Reading all contacts
        Log.d("Reading: ", "Reading all contacts..");
        List<Player> player = db.getAllPlayers();       

        for (Player cn : player) {
            String log = "Id: "+cn.getCode_Player()+" ,Name: " + cn.getNom_Player() + " ,Phone: " + cn.getSurnom_Player()+"  ,Age: "+cn.getAge_Player();
                // Writing Contacts to log
        Log.d("Name: ", log);}}
} 
```

它给了我这个错误：

```
D/I'm here:   ( 6548): I'm here!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
D/KeyguardViewMediator(  216): setHidden false
D/Copy BD( 6548): database already exists!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
D/Insert: ( 6548): Inserting ................................................
I/SqliteDatabaseCpp( 6548): sqlite returned: error code = 1, msg = no such table: Player, db=/data/data/test.test.test/databases/webview.db
E/SQLiteDatabase( 6548): Error during inserting
E/SQLiteDatabase( 6548): android.database.sqlite.SQLiteException: no such table: Player: , while compiling: INSERT INTO Player(surnom_Player,nom_Player,age_Player) VALUES (?,?,?) 
```

我去看看 Player_Club.db 是否真的存在：

```
 adb shell
    shell@android:/ $ run-as test.test.test
    run-as test.test.test
    <a href="mailto:shell@android:/data/data/test.test.test">shell@android:/data/data/test.test.test</a> $ cd /data/data/test.test.test/databases
    .test.test/databases                                                          <
    <a href="mailto:shell@android:/data/data/test.test.test">shell@android:/data/data/test.test.test</a>/databases $ ls
    ls
   Player_Club.db
   webview.db
   webview.db-shm
   webview.db-wal 
```

从这些行我可以看出数据库确实存在，所以我不知道它为什么要在 webview.db 上寻找 Player 表？

# html - CSS滚动只溢出div，而不是页面

> ID：13003215
> 
> 赞同：0
> 
> 时间：2012-10-21T23:24:06.120
> 
> 标签：html, css

我有一个 DIV，`overflow:scroll`当我滚动 div 并到达底部时，它开始滚动主页。

我希望它**不**滚动主页 - 只是 div。

这可能吗？

[http://i.stack.imgur.com/Owuu0.png](http://i.stack.imgur.com/Owuu0.png)

图片显示了我不想发生的事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T17:49:11.203

我为 jQuery 编写了这个小插件，并且正在使用它一段时间。它做你想做的事，但不是在 CSS 中。无论如何，也许这是一个解决方案：

```
(function($) {
    $.fn.privateScroll = function() {
        if ( this.length === 0 ) {
            return this;
        }
        this.bind('DOMMouseScroll mousewheel', function(e) {
                var delta = 0;
                if (typeof e.originalEvent.wheelDeltaY !== 'undefined') { // chrome, safari, opera
                    delta = e.originalEvent.wheelDeltaY;
                } else if (typeof e.originalEvent.wheelDelta !== 'undefined') { // ie
                    delta = e.originalEvent.wheelDelta;
                } else if (typeof e.originalEvent.detail != 'undefined') { // ff
                    delta = e.originalEvent.detail * -20;
                }
                if ( delta !== 0 ) {
                    $(this).scrollTop($(this).scrollTop() - delta );
                    e.preventDefault();
                    return false;
                }
        });
        return this;
    };
})(jQuery); 
```

像这样使用：

```
jQuery('SELECTOR').privateScroll(); 
```

更新：使用同事代码更新以适用于所有浏览器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T08:28:50.997

检查以下站点以供参考：

[http://manos.malihu.gr/tuts/custom-scrollbar-plugin/complete_examples.html](http://manos.malihu.gr/tuts/custom-scrollbar-plugin/complete_examples.html)

[http://manos.malihu.gr/tuts/custom-scrollbar-plugin/nested_scrollbars_demo.html](http://manos.malihu.gr/tuts/custom-scrollbar-plugin/nested_scrollbars_demo.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T23:31:40.637

尝试使用`overflow: auto`而不是滚动，看看是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T00:04:32.130

我还没有测试过这个，但我相信你可以使用这个 jquery 代码来解决这个问题。

```
$(document).ready(function() {
   $('INNER DIV SELECTOR').hover(function() {
      $('INNER DIV SELECTOR').scroll(function(e) {
         e.stopPropagation();
      });
   });
}); 
```

# bash - 在 bash 脚本中查找该月的最后一个星期六

> ID：13003217
> 
> 赞同：3
> 
> 时间：2012-10-21T23:24:31.707
> 
> 标签：bash, shell

我正在制作一个备份脚本，我需要在其中找到每个月的最后一个星期六。

我尝试了不同的方法来寻找这一天本身，这本身就非常有效。

问题是，当我尝试将它们放入我的脚本时，我总是得到错误代码 `./test.sh: line 13: [: 29: integer expression expected`。

这是我的代码：

```
#!/bin/bash

LASTSAT=$(ncal | grep Sa | awk '{print$(NF-0)}')
SATURDAY="6"

DAY=$(date +"%u")
DATE=$(date +"%d")

echo "$DAY"
echo "$DATE"
echo "$LASTSAT"

if [ $DATE -eq $LASTSAT  ]
then
 echo "sista lördagen..."
fi 
```

我得到了将 if 语句更改为`[ "$DATE" = "$LASTSAT" ]` 删除错误本身的提示，但脚本会以某种方式不等于 27 到 27（以本月为例）。

我还尝试了另一种方法来查找最后一个星期六`LASTSAT=$(cal|awk '{if(NF==7){SAT=$7}};END{print SAT}')`，但如果我使用 -eq 并且使用 " with = 不等于 27 到 27，它会返回完全相同的错误。

我很困惑，没有想法，我在互联网上搜索并复制了其他人使用的确切线路，但结果都是一样的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T00:38:54.047

在测试期间，我更改了目标日期和一些变量名称，但以下脚本适用于该月的倒数第二个星期日。与您的脚本相关的关键更改是将`-h`开关添加到`ncal`，以关闭当天的突出显示。打印字段时突出显示字符显然会出现`awk`，但在执行 s 时不可见`echo`。请注意，您可以通过匹配删除`grep`after 。`ncal``awk`

```
#!/bin/bash

DoDay=$(ncal -h |awk '/Su/ {print $(NF-1)}')
Datum=$(date +%d)
echo $Datum Datum
echo $DoDay DoDay

if [[ $Datum == $DoDay ]]
then
    echo "sista lördagen..."
else
    echo "doh"
fi 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T11:20:36.660

您可以使用该命令轻松获取该月的最后一个星期六，该命令以格式`date`输出数据。`strftime()`但是`date`' 的语法将取决于您的操作系统。

**在 FreeBSD 或 OSX**中，有一个`-v`选项可以“调整”日期，让您有很多控制权：

```
[ghoti@pc ~]$ date -v+1m -v1d -v6w '+%a %d %b %Y'
Sat 03 Nov 2012
[ghoti@pc ~]$ date -v+1m -v1d -v6w -v-1w '+%a %d %b %Y'
Sat 27 Oct 2012 
```

这里的想法是我们将向前移动 1 个月 ( `+1m`)，回到本月的第一天 ( `1d`)，然后移动到一周的第 6 天，即星期六 ( `6w`)。出于演示目的，第一行显示下个月的第一个星期六，第二行显示*一周前*( `-v-1w`) 的日期。

或者，如果您想在 bash 脚本中添加一些数学运算，您可以执行以下操作：

```
#!/usr/local/bin/bash

# Get day-of-the-week for the first-of-the-month:    
firstofmonth=$(date -j -v+1m -v1d '+%u')
     #                   ^
     #                   +  This is the relative month to current.

# Subtract this from 7 to find the date of the month
firstsaturday=$((7 - $firstofmonth))

# 7 days before that will be the last Saturday of the previous month
lastsaturday=$(date -j -v+1m -v${firstsaturday}d -v-7d '+%Y-%m-%d') 
```

使用该`-v`选项，1 是一月，2 是二月，等等。或者它可以是相对的，正如我在这里展示的那样，下个月 +1，上个月 -1，等等。

* * *

**在 Linux**中， date 使用`-d`解释日期文本描述的选项。所以：

```
#!/bin/bash

firstofmonth=$(date -d '+1 months' '+%Y%m01')
firstsaturday=$(date -d "$firstofmonth" '+%Y-%m')-$(( 7 - $(date -d "$firstofmonth" '+%u') ))
lastsaturday=$(date -d "$firstsaturday -7 days" '+%d') 
```

**请注意，如果您使用的是 cron**，则可以简化此操作。您知道最后一个星期六将在该月的最后 7 天之内，因此我们可以首先使用 cron 将事情限制在星期六，然后在脚本中检查该月的最后一个。这将在每个星期六*运行*该脚本，但它不会执行任何操作，除非它应该执行。例如，cron 选项卡是

```
#  ↙ "0 0"=midnight
0 0 * * 0 /path/to/script.sh
#        ↖ 0=Sunday 
```

并`script.sh`开始：

```
#!/bin/bash

if [[ $(date '+%d' -lt $(date -d "$(date -d '+1 month' '+%Y%m01') -7 days" '+%d') ]]; then
  exit
fi 
```

您也可以将此测试放在 crontab 中，尽管它看起来有点难看，因为您需要转义百分号：

```
0 0 * * 0 \
  test $(date '+\%d') -ge $(date -d "$(date -d '+1 month' '+\%Y\%m01') -7 days" '+\%d') \
    && /path/to/command 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T00:58:38.350

这是使用以下方式打印每个月最后一个星期六的一种方法`date`：

```
for i in {1..12}; do
    for j in {1..7}; do
        date=$(date -d "$i/1 + 1 month - $j day" +"%w %F")
        # day of week (1..7); 1 is Monday
        if [ ${date:0:1} -eq 6 ]; then
            echo ${date:2}
        fi
    done
done 
```

结果：

```
2012-01-28
2012-02-25
2012-03-31
2012-04-28
2012-05-26
2012-06-30
2012-07-28
2012-08-25
2012-09-29
2012-10-27
2012-11-24
2012-12-29 
```

如果您只想查找当月的最后一个星期六，请尝试：

```
for j in {1..7}; do
    month=$(date +"%m")
    date=$(date -d "$month/1 + 1 month - $j day" +"%w %F")
    # day of week (1..7); 1 is Monday
    if [ ${date:0:1} -eq 6 ]; then
        echo ${date:2}
    fi
done 
```

结果：

```
2012-10-27 
```

请注意，您可以通过更改`%F`为必须提供的任何格式`date`来更改上述脚本中这些结果的输出格式。见`man date`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T03:30:32.117

这个怎么样：

```
last_saturday () 
{ 
    local Format;
    if [[ $1 =~ ^\+.* ]]; then
        Format=$1;
        shift;
    fi;
    local FirstOfNext="${1:-$(date +%B)} 1 $2 + 1 month";
    date $Format -d "$FirstOfNext - 1 day - 
                     $(($(date +%u -d "$FirstOfNext") % 7)) day"
} 
```

例如：

```
$ last_saturday
Sat Oct 27 00:00:00 PET 2012
$ last_saturday November
Sat Nov 24 00:00:00 PET 2012
$ last_saturday June
Sat Jun 23 00:00:00 PET 2012
$ last_saturday June 2013
Sat Jun 29 00:00:00 PET 2013
$ last_saturday +%Y-%m-%d June 2013
2013-06-29 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T00:09:50.383

该脚本在我的系统（Ubuntu - Bash $）上运行良好。如果那天不是最后一个星期六，我刚刚修改了脚本以打印“！sista lördagen ...”，这是输出：
$sh abc.sh
7
21
27
!sista lordagen ...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-21T14:00:33.953

```
#!/bin/bash
set -e

if [ "$#" -ne 2 ]; then
    echo "Usage: weekDayOfMonth.sh [weekOfMonth 1..4] [DayOfWeek where Sun=1]"
    exit 2;
fi

weekOfMonth=$1
dayOfWeek=$2 #starts with Sun(=1)

echo "weekOfMonth: $weekOfMonth";
echo "dayOfWeek: $dayOfWeek";

# cal starts with Sun, 3rd column is for Tue, 2nd row is 2nd Tue of month:
# Sun=1, dayIdx=0
# Mon=2, dayIdx=3
# Tue=3, dayIdx=6
# Wed=4, dayIdx=9
dayIdx=$(((dayOfWeek-1)*3))
expectedDayOfMonth=$(cal -s | sed "s/^.\{$dayIdx\}\(.\{3\}\).*$/\1/" | sed 's/^[ ]//g' | grep -o '[0-9]*' | head -$weekOfMonth | tail -1)
todaysDay=$(date +%d | sed 's/^0*//')

echo "expectedDayOfMonth: $expectedDayOfMonth";
echo "todaysDay: $todaysDay";

if [ ${expectedDayOfMonth} -ne ${todaysDay} ]; then
       echo "Today is NOT requested day of month, exiting with error code.";    
       exit 1;
fi 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-21T12:41:44.630

这是解决方案

```
if  [[ $(date +"%a") = "Sat" ]] && [[$(date -d "+7 days" +%m) != $(date +%m)]]
then
  echo "Last saturday of month"
fi 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-07-27T15:32:42.147

这个怎么样：

```
if [ `date +%u` = 7 ] && [ `date +%m` != `date -d +week +%m` ]; then
  echo "sista lördagen..."
fi 
```

...或简单地通过 crontab：

```
0 0 * * 0 [ `date +\%m` != `date -d +week +\%m` ] && /path/to/backup.sh 
```

# windows - 使用脚本杀死 cmd 或 shell 中的进程

> ID：13003220
> 
> 赞同：4
> 
> 时间：2012-10-21T23:24:46.843
> 
> 标签：windows, shell, process, batch-file, cmd

如何在 Windows 中使用 shell 或命令行脚本来检查某些进程的状态，即。Tomcat服务器，如果它存在，它会杀死它吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-21T23:37:28.810

在窗口中，您可以`.bat`使用以下内容制作文件：

```
TASKKILL /F /IM "program_name.exe" 
```

将 program_name 替换为您要杀死的程序。这是一篇不错的文章[`TASKKILL`](http://www.tothepc.com/archives/kill-windows-process-with-taskkill-command/)

或者，如果它只是 tomcat，你可以运行[`shutdown.bat`](http://tomcat.apache.org/tomcat-3.3-doc/tomcat-ug.html#tomcat_scripts)......如果`TOMCAT_HOME`没有设置，只需从 tomcat 主目录运行它。

# plone - 我运行 bin/buildout 来安装 Plone 并遇到了几十个语法错误，然后失败了——但是为什么？

> ID：13003221
> 
> 赞同：1
> 
> 时间：2012-10-21T23:24:48.593
> 
> 标签：plone, buildout

我正在按照《Professional Plone 4 Development》一书开头的说明设置开发环境。我采取了以下步骤。

首先，我创建了一个名为 virtualenv`pln`的项目目录，也称为`pln`

其次，我将 PIL 安装到`pln`virtualenv 中。

第三，我创建了一个`buildout.cfg`包含以下内容的文件：

```
[buildout]
extends = http://dist.plone.org/release/4.2/versions.cfg
parts = instance
[instance]
recipe = plone.recipe.zope2instance
user = admin:admin
eggs = Plone 
```

四、我`bootstrap.py`从[http://svn.plone.org/svn/plone/buildouts/plone-coredev/branches/4.2/bootstrap.py下载](http://svn.plone.org/svn/plone/buildouts/plone-coredev/branches/4.2/bootstrap.py)

第五，我运行了命令`python bootstrap.py --distribute`，它给出了以下输出：

```
Downloading http://pypi.python.org/packages/source/d/distribute/distribute-0.6.29.tar.gz
Extracting in /var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmpwMBNe9
Now working in /var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmpwMBNe9/distribute-0.6.29
Building a Distribute egg in /var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmpKSPdWX
/var/folders/xk/5xt9s5vd4bqd731qdkmxkxyr0000gn/T/tmpKSPdWX/distribute-0.6.29-py2.7.egg
Creating directory '/Users/Jon/dev/pln/bin'.
Creating directory '/Users/Jon/dev/pln/parts'.
Creating directory '/Users/Jon/dev/pln/eggs'.
Creating directory '/Users/Jon/dev/pln/develop-eggs'.
Generated script '/Users/Jon/dev/pln/bin/buildout'. 
```

第六，从项目目录中运行命令`bin/buildout`。有一段时间似乎一切正常，但随后我开始收到大量类似于以下的错误消息：

```
SyntaxError: ("'return' outside function", ('build/bdist.macosx-10.8-x86_64/egg/Products/kupu/plone/kupu_plone_layer/convertContentForKupu.py', 23, None, 'return str(content)\n'))

SyntaxError: ("'return' outside function", ('/Users/Jon/dev/pln/eggs/tmpEwAZSu/Products.CMFPlone-4.2.0.1-py2.7.egg/Products/CMFPlone/skins/plone_scripts/redirectToReferrer.py', 18, None, 'return request.RESPONSE.redirect(target_url)\n'))

SyntaxError: ("'return' outside function", ('build/bdist.macosx-10.8-x86_64/egg/Products/Archetypes/skins/archetypes/unicodeTestIn.py', 11, None, 'return 0\n')) 
```

最后，运行`bin/buildout`失败并出现以下错误：

```
While: Installing instance.
Getting distribution for 'plone.outputfilters==1.3'.

An internal error occured due to a bug in either zc.buildout or in a
recipe being used:
Traceback (most recent call last):
File "/Users/Jon/dev/pln/eggs/zc.buildout-1.4.4-py2.7.egg/zc/buildout/buildout.py", line 1683, in main
    getattr(buildout, command)(args)
File "/Users/Jon/dev/pln/eggs/zc.buildout-1.4.4-py2.7.egg/zc/buildout/buildout.py", line 555, in install
    installed_files = self[part]._call(recipe.install)

[about 50 lines of stack trace admitted for brevity...]

File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py", line 365, in _read_status
line = self.fp.readline()
File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 447, in readline
data = self._sock.recv(self._rbufsize)

error: [Errno 54] Connection reset by peer 
```

为什么连接在最后被对等方重置？这是哪个对等方，我如何控制这样的错误？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:58:14.330

从“Professional Plone 4 Development”一书中，我得到了为什么会出现语法错误的答案：

> 当 Setuptools/Distribute 尝试预编译某些 Python 脚本时，您可能还会看到一些关于“语法错误”的警告。您可以放心地忽略这些。发布它们是因为，这些脚本不是普通的 Python 模块，而是旨在在 Zope 不受信任的脚本环境中执行的脚本。
> 
> *   马丁·阿斯佩利 (2011-08-26)。Professional Plone 4 Development（第 38 页）。包出版。Kindle版。

但是，我仍然不确定为什么会`bin/buildout`失败。我刚刚再次尝试一切新鲜的，我得到了这个错误：

```
尽管：
  安装。
  获取部分实例。
  初始化节实例。
  安装配方 plone.recipe.zope2instance。
  获取 'docutils==0.9.1' 的分发版。

由于 zc.buildout 或
正在使用的配方：
回溯（最近一次通话最后）：
  文件“/Users/Jon/dev/pl/eggs/zc.buildout-1.4.4-py2.7.egg/zc/buildout/buildout.py”，第 1683 行，在 main
    getattr（构建，命令）（参数）
  安装中的文件“/Users/Jon/dev/pl/eggs/zc.buildout-1.4.4-py2.7.egg/zc/buildout/buildout.py”，第 439 行
    [self[part]['recipe'] for part in install_parts]

** 为简洁起见，省略了 50 条左右的堆栈跟踪行 **

  _read_status 中的文件“/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/httplib.py”，第 365 行
    line = self.fp.readline()
  文件“/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py”，第 447 行，在 readline
    数据 = self._sock.recv(self._rbufsize)
超时：超时

```

编辑：好的，我发现整个事情都不适用于 Plone 4.2。只需将所有内容改为 4.1，它`bin/buildout`就会完成而不会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T15:11:22.263

在我看来，您使用的是系统 python 而不是 virtualenv python。您是否使用您的 virtualenv python 来引导您的构建？

您刚刚提到运行“python bootstrap.py”。因此，除非您运行“source MyVirtualEnvDir/bin/activate”，否则您会调用系统 python。如果您使用 pip 或 easyinstall 在系统 python 中安装了模块，那么其中一些模块可能会与您的构建冲突并导致一些奇怪的错误。

顺便说一句，正如其他人指出的那样，超时也可能是由服务器或网络错误引起的。

为什么不能只使用统一安装程序？它是最容易使用的，您仍然可以使用它来尝试 Martin 书中建议的活动。

# function - 可以在 OCaml 中连接函数吗？

> ID：13003223
> 
> 赞同：2
> 
> 时间：2012-10-21T23:24:55.190
> 
> 标签：function, ocaml

出于示例的目的，我们假设一切都是整数。另外，我知道编译器会因为这些函数不能解决所有情况而生气。

假设我有这两个功能：

```
let f1 = function 
    | a -> b;;

let f2 = function
    | c -> d;; 
```

有什么办法可以让我做到这一点：

```
 | a -> b;;
    | c -> d;; 
```

通过将 f1 和 f2 放在一起（以类似于连接 2 个列表的方式）而不明确地将它们硬编码在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:54:14.480

```
let concat_funs f1 f2 x =
  try f1 x
  with Match_failure _ -> f2 x 
```

它是关联的，但不是可交换的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T00:36:22.227

对于家庭作业，我认为规则是您应该展示一些您尝试过的代码并说出似乎出了什么问题。否则很难在不解决问题的情况下发表评论。

但是，我认为`f1`和`f2`都是部分的事实可能是一个很大的提示，假设我了解您正在寻找的内容（一个高阶函数，可以对类似于`f1`and的任何两个函数执行此操作`f2`）。

# c++ - 有没有办法通过原型将类型 int 更改为 char 类型？

> ID：13003225
> 
> 赞同：1
> 
> 时间：2012-10-21T23:25:15.103
> 
> 标签：c++

我正在做一个项目。这是单独文件中的函数声明。

```
void PrintLines(int characterValue, int characterCount, int lineCount) 
```

当我在我的主文件中进行原型制作时，我使用：

```
void PrintLines(char characterValue, int characterCount, int lineCount); 
```

这不会编译。有什么方法可以在不更改第一个 int 类型（在另一个文件中？

我想我必须打字。只需要弄清楚如何。

基本上，代码必须是

```
 void PrintLines(int characterValue, int characterCount, int lineCount) 
```

对于文件 1 和

```
 void PrintLines(char characterValue, int characterCount, int lineCount); 
```

为主要。我可能需要将 ASCII 转换为字符...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:28:34.550

您可以像这样重载函数，但是这两个函数具有不同的签名，即在链接期间它会失败。我不确定你试图实现什么，但它可能会委托：

```
void PrintLines(char cv, int cc, int lc) {
    PrintLines(int(cv), cc, lc);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:31:38.217

如果您想传递 a`char`而不是 an`int`作为第一个参数，那么只需这样做。例子：

```
int x, y;
char c;
// ...
PrintLines(c, x, y); 
```

`char`可以`int`在 C++ 中隐式转换为。`int`如果您愿意，也可以进行手动转换：

```
PrintLines(static_cast<int>(c), x, y); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T00:20:58.997

所以我想通了。

cout << (char) 字符值；

在具有该功能的文件中。

我的 A 得 65，所以我把它改回 A。

# facebook - 使用 FQL 识别照片是私密的朋友

> ID：13003227
> 
> 赞同：1
> 
> 时间：2012-10-21T23:25:39.387
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我的应用需要向拥有可见照片的用户朋友推荐（隐私设置允许他们至少对朋友可见的照片）。我试图过滤掉没有向朋友公开照片的用户。我知道隐私表可以识别特定对象 ID 的隐私设置

SELECT 值，描述来自隐私 WHERE id = 10150146071791729

我如何为所有用户的照片执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T23:49:42.587

您似乎无法直接获得此结果。您可能需要进行批量查询，首先获取用户朋友上传的所有专辑ID -

```
select aid, owner from album where owner in (select uid2 from friend where uid1 = me()) 
```

然后通过您在上面粘贴的查询运行帮助并消除设置为私有的查询。

# javascript - 在打开和关闭列表之间切换

> ID：13003232
> 
> 赞同：1
> 
> 时间：2012-10-21T23:27:02.957
> 
> 标签：javascript, jquery

我有以下代码用于常见问题列表之类的。当用户单击按钮时，信息会向下滑动以显示内容。然后他们可以单击相同的按钮来关闭内容。

由于我在此页面上有多个列表，我想要的是，如果一个列表已打开并且用户单击另一个列表将其打开，则打开的列表将关闭，而另一个列表将打开。这样用户就没有一英里长的滚动条。

这是我的代码：

***JS***

```
$('.service').live('click',function(){
  $(this).parent().children().toggle();  //swaps the display:none between the two spans
  $(this).parent().parent().find('.content').slideToggle();  //swap the display of the main content with slide action
 });

$('.service').click(function(e) {
  e.preventDefault(); //Prevents link from taking them to top of page
}); 
```

***HTML***

```
<div class="service-container">
 <div class='service-title'>
  <a href="#" class="service fancy_button"><span style="background-color: #0f071e;"><i class="icon-plus"></i> Open</span></a>
  <a href="#" class="service fancy_button" style="display:none;"><span style="background-color: #666;"><i class="icon-minus"></i> Close</span></a>
  </div>
   <div class='content' style='display:none;'>
      <p>My Content</p>
   </div>
</div> 
```

如果有更好的方法，我不介意重写代码。

想法：

![截屏](../Images/a90291417ae4051cad8eddbdf88dcf06.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:32:22.460

主要是我建议你不要使用`live()`方法，因为它已被弃用。相反，您可以通过[`on()`](http://api.jquery.com/on/)以下方式使用方法：

```
$(".service-title").on("click", ".service", function(e) {
    $(this).siblings().andSelf().toggle()
        .parent().siblings(".content").slideToggle();

    e.preventDefault();
}); 
```

**演示：http:** [//jsfiddle.net/bnT6Q/](http://jsfiddle.net/bnT6Q/)

为了使当前打开的其他打开的容器关闭，我们可以稍微改写一下代码：

```
$(".service-title").on("click", ".service", function(e) {
    $(".service-container")
        .has($(".content:visible").add(this))
        .find(".service").toggle().end()
        .find(".content").slideToggle();

    e.preventDefault();
});​ 
```

**演示：http:** [//jsfiddle.net/bnT6Q/1/](http://jsfiddle.net/bnT6Q/1/)

# javascript - 当按钮高亮时，我需要暂停对计算器显示屏的输入。无法弄清楚为什么我的 setTimeout() 不起作用。

> ID：13003235
> 
> 赞同：0
> 
> 时间：2012-10-21T23:27:26.750
> 
> 标签：javascript

```
<html>
<head>
    <title> Buttons</title>
 <style type="text/css">

.intro{background-color:;}
.duction{background-color:blue;}
</style>

</head>
<body>
<form name="calculator">
<input type="text"  name="display" length="50" width="100">
<div>
<input type= "button" value="7" class="intro" id="seven" onclick="one(7)">
<input type= "button" value="8" class="intro" id="eight" onclick="one(8)">
<input type= "button" value="9" class="intro" id="nine" onclick="one(9)">
<input type= "button" value="+" class="intro" id="plus" onclick="one('+')">
<input type= "button" value="-" class="intro" id="minus" onclick="one('-')">
<div>
<input type= "button" value="4" class="intro" id="four" onclick="one(4)">
<input type= "button" value="5" class="intro" id="five" onclick="one(5)">
<input type= "button" value="6" class="intro" id="six" onclick="one(6)">
<input type= "button" value="x" class="intro" id="multiply" onclick="one('*')">
<input type= "button" value="/" class="intro" id="divide" onclick="one('/')">
<div>
<input type= "button" value="1" class="intro" id="one" onclick="one(1)">
<input type= "button" value="2" class="intro" id="two" onclick="one(2)">
<input type= "button" value="3" class="intro" id="three" onclick="one(3)">
<input type= "button" value="=" class="intro" id="equal" onclick="Evaluate()">
<div>
<input type= "button" value="0" class="intro" id="zero" onclick="one(0)">
<input type= "button" value="." class="intro" id="decimal" onclick="one('.')">
<input type= "button" value="c" class="intro" id="clear" onclick="clearDigit()">
</form>

<script type="text/javascript" src="C:\Users\LS\Desktop\QBJS\button.js">

</script>
</body>
</html>

var timer;
var object;
var thing;
var digit="";
var result;
var first;
var that;
var hilighted; 
```

这个函数应该暂停输入到 calc。突出显示按钮时显示。当没有按钮高亮时，它会在显示屏上添加数字。在我添加 if 语句之前，我的计时器正在工作，我无法弄清楚需要更改什么以适应 if 语句。

```
function one(event)
{

if (thing.className=="duction")
  {alert("x");}
else {
clearTimeout(timer);
timer=setTimeout(function(){AddDigit(event);},200);};

}

function AddDigit(x)
{

   if (typeof parseInt(x, 10) === "number" ) 

    {document.calculator.display.value+=x;}
   else 

    {document.calculator.display.value+=digit + x;}
 }

 function Evaluate()
 {
  result=eval(document.calculator.display.value);
 document.calculator.display.value = result;
 }

 document.ondblclick=function(button)
 {
   clearTimeout(timer);

 thing=button.target;

 thing.value;

 if(thing.className=="intro")
  {thing.className="duction";}

 else if(thing.className=="duction")
  {thing.className="intro";}    
}

function clearDigit()
{
document.calculator.display.value="";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:08:02.070

在函数中，您使用作为事件的参数`one`进行调用。`AddDigit`在`AddDigit`您使用`parseInt`将返回的对象上`NaN`。可能您想要的是将数字发送到`AddDigi`t 因此更改您的调用函数`one`以发送适当的值。

# objective-c - 在核心图形中将文本上下颠倒

> ID：13003239
> 
> 赞同：0
> 
> 时间：2012-10-21T23:27:42.550
> 
> 标签：objective-c, ios, core-graphics, quartz-graphics, drawrect

我正在通过以下方式在核心图形中绘制文本

```
- (void)drawRect:(CGRect)rect {
    CGContextTranslateCTM(context, 20, 150);
    CGContextScaleCTM(context, 1, 1);

    // Draw the text using the MyDrawText function
    myDrawText(context, viewBounds);

}
void myDrawText (CGContextRef myContext, CGRect contextRect) 
{
    CGFloat w, h;
    w = contextRect.size.width;
    h = contextRect.size.height;

    CGAffineTransform myTextTransform;
    CGContextSelectFont (myContext, 
                         "Helvetica-Bold",
                         h/12,
                         kCGEncodingMacRoman);
    CGContextSetCharacterSpacing (myContext, .5); 
    CGContextSetTextDrawingMode (myContext, kCGTextFill); 

    CGContextSetRGBFillColor (myContext, 1, 1, 1, 1); 
    myTextTransform =  CGAffineTransformMakeRotation  (0); 
    CGContextSetTextMatrix (myContext, myTextTransform); 
    CGContextShowTextAtPoint (myContext, 115, 0, "Successful", 10); 
} 
```

运行它后，我得到的文本是上下颠倒的，如下所示 ![在此处输入图像描述](../Images/ce412cfab20c4dacb89834a14e0bf9c7.png)

为什么绘图后文字是上下颠倒的

请就这个问题给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:30:47.533

`CGContextSetTextMatrix (myContext, myTextTransform);`

您需要更改这条线，以便垂直缩放它 -1 并垂直偏移它的高度而不是标识。

编辑：对不起，不是那条线，您需要翻转图形上下文，然后将该线更改为 CGAffineTransformIdentity。任何关于 Core Text 的教程都会包含正确绘制文本所需的线条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T02:00:17.377

这是翻转它的方法。只需将 2 行添加到您的 drawRect

```
- (void)drawRect:(CGRect)rect {
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextTranslateCTM(context, 20, 150);
CGContextScaleCTM(context, 1, 1);
CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, 0);
CGContextConcatCTM(context, flipVertical);

// Draw the text using the MyDrawText function
myDrawText(context, self.bounds);

} 
```

# asp.net-mvc - 将 MVC4 部署到 Azurewebsites 时未创建数据表

> ID：13003241
> 
> 赞同：0
> 
> 时间：2012-10-21T23:27:43.223
> 
> 标签：asp.net-mvc, entity-framework, azure, ef-code-first, unit-of-work

因此，在数小时后弄清楚为什么在部署到 azure 时没有创建我的数据库表（使用 mvc4 代码优先实体框架），我终于明白这是我设置后端的方式。我有我的通用存储库、工作单元、数据上下文等。（这不会导致问题）。导致我的数据表（500 服务器错误）无法创建的是我的 UnitOfWorkFilter。当我应用它时它不起作用，当我拿走它时它起作用。所以我的问题是有人知道为什么会导致这个问题，以及我可以做些什么来解决这个问题，因为我想继续使用我的过滤器。

这是我的工作单元过滤器：

```
 public class UnitOfWorkFilter : System.Web.Mvc.ActionFilterAttribute
    {

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {

        var unitOfWork = DependencyResolver.Current.GetService<IUnitOfWork>();

        unitOfWork.Begin();
    }

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        var unitOfWork = DependencyResolver.Current.GetService<IUnitOfWork>();
        if (filterContext.Exception != null)
        {
            unitOfWork.Rollback();
            return;
        }
        try
        {
            unitOfWork.Commit();
        }
        catch
        {
            unitOfWork.Rollback();
            throw;
        }
        finally
        {
            unitOfWork.Dispose();
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T06:34:50.317

添加 Trace 语句，以便您可以查看 Azure 中发生的情况。使用以下代码设置 Trace：

```
private void ConfigDiagnostics()
{
    DiagnosticMonitorConfiguration config = 
        DiagnosticMonitor.GetDefaultInitialConfiguration();
    config.ConfigurationChangePollInterval = TimeSpan.FromMinutes(1d);
    config.Logs.BufferQuotaInMB = 500;
    config.Logs.ScheduledTransferLogLevelFilter = LogLevel.Verbose;
    config.Logs.ScheduledTransferPeriod = TimeSpan.FromMinutes(1d);

    DiagnosticMonitor.Start(
        "Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString", 
        config);
} 
```

# python - Python套接字客户端无法重新连接

> ID：13003243
> 
> 赞同：1
> 
> 时间：2012-10-21T23:27:49.450
> 
> 标签：python, sockets

我有两个按钮。连接和断开连接。当第一次按下连接时，客户端成功连接到服务器（localhost：4106），当按下断开连接时，客户端断开连接。我的问题是，当我再次按“连接”时，客户端将不会重新连接到服务器，并且我收到一条错误消息：http: [//i.imgur.com/dkvos.png](http://i.imgur.com/dkvos.png)

我认为这是因为套接字连接不能被重用？有解决方法吗？谢谢

```
#!/usr/bin/python          

import socket               
import Tkinter
import tkMessageBox

top = Tkinter.Tk()

s = socket.socket()       
host = '127.0.0.1' 
port = 4106              

def connect():
    s.connect((host, port))

def disconnect():
    s.close()

ConnectBtn = Tkinter.Button(top, text ="Connect", command = connect)

DisconnectBtn = Tkinter.Button(top, text ="Disconnect", command = disconnect)

ConnectBtn.pack()
DisconnectBtn.pack()

top.mainloop() 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-05-12T08:06:03.750

我不知道如何在 python 中重写此代码 tcl/tk，但可以作为解决方案的良好开端。[这是 Scott Nichols 共享的代码](http://wiki.tcl.tk/12379)。此代码显示了如果连接丢失，客户端将如何自动重新连接到服务器。

我成功使用此代码自动重新连接到服务器：

```
def open_connection():
    data0=''

    try:
        # Create a TCP/IP socket
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)

        # Connect the socket to the port where the server is listening
        server_address = ('192.168.0.100', 8000)
        sock.settimeout(10)     # TimeOut 5 secunde

        while True:

            try:
                sock.connect(server_address)
                message = 'new connection'
                sock.sendall(message)

                # Look for the response
                amount_received = 0
                data0=sock.recv(1024)
                amount_received = len(data0)
                return

            finally:
                wNET = 0
                pass

    except:
        sock.close()
        time.sleep(60)
        del data0 
```

# mysql - 选择不等于零的最小列

> ID：13003251
> 
> 赞同：0
> 
> 时间：2012-10-21T23:28:58.597
> 
> 标签：mysql

我们在一个表中有 2 列，并且想要 SELECT 两者中较小的大部分（除非它等于 0，那么我们想要非零列）。

有没有办法做到这一点，同时保持一个简单的 SELECT 语句？

我们想要的是： `SELECT LEAST(col1, col2) FROM myTable` 除非 col2 为 0，在这种情况下我们想要 col1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:32:15.480

```
SELECT LEAST(
         IF(col1, col1, col2),
         IF(col2, col2, col1)
       )
FROM   myTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T23:33:09.483

```
SELECT
    CASE
        WHEN col1 = 0 THEN col2
        WHEN col2 = 0 THEN col1
        ELSE LEAST(col1, col2)
    END AS MinCol
FROM myTable 
```

# c - 返回未初始化的结构位置

> ID：13003257
> 
> 赞同：0
> 
> 时间：2012-10-21T23:29:45.990
> 
> 标签：c, struct, tree, malloc

如果我有某种树，并且我需要在该树中找到一个基本上为空的特定节点（结构尚未初始化/malloc'ed）。

如果我想返回那个非常具体的未初始化结构位置以便能够对其进行初始化，则类似于：

```
if (parentNode->childNode == NULL)
    return parentNode->childNode; 
```

工作？或者它会返回NULL吗？我需要返回父节点吗？

我遇到的问题是这个特定节点可能是多个不同结构类型的子节点。我不确定如何在 C 中克服这个问题，因为它不支持泛型。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:34:31.200

你不能返回NULL。它不会是一个可识别的位置。

但是，您可以做的是：

*   `malloc`找到它的节点并返回 malloc 返回的指针，
*   您可以`return &(parentNode->childNode)`（指向 childNode 指针的指针）函数的调用者可以使用它来将其设置为新节点，或者
*   `return parentNode`

我看不出仿制药如何缓解这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:36:52.087

您可以返回它`parentNode`并在`child`其他地方对其进行初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T23:41:58.673

您可以返回 NULL，但这没有任何意义。您可以返回指向值为 NULL 的指针的指针*：*

```
typedef struct link {
        struct link *next;
        } LL;

LL **getTailPP(LL **ppHead)
{
    for( ; *ppHead; ppHead = &(*ppHead)->next ) {;}
    return ppHead;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T23:43:38.830

如果子节点还没有初始化，那么你不能返回一个指向它的指针......你怎么能返回一个指向还不存在的东西的指针？

您需要做的是返回一个指向父节点指针的指针，然后可以将其更改为指向为子节点新分配的内存。

# regex - 正则表达式：一个参数和几个参数

> ID：13003268
> 
> 赞同：0
> 
> 时间：2012-10-21T23:32:14.613
> 
> 标签：regex, bison, flex-lexer

请您解释一下，我怎样才能制作匹配`(arg1)`, `(arg1, arg2)`,`(arg1, arg2, xarg, zarg)`等的正则表达式。每个名称都是一个始终以 symbol 开头的 ASCII 字符串`[A-Za-z]`。这是我尝试过的`"("[A-Za-z][a-z0-9]*(,)?([A-Za-z][a-z0-9]*)?")"`：谢谢！

注意：正则表达式必须在`flex`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:39:34.523

类似的东西？

```
>>> import re
>>> s = '''Could you explain, please, how can I make regex that will match (arg1), (arg1, arg2), (arg1, arg2, xarg, zarg), etc. Every name is an ASCII string which always starts with symbol [A-Za-z]. Here is what I've tried: "("[A-Za-z][a-z0-9]*(,)?([A-Za-z][a-z0-9]*)?")". Thanks!'''
>>> re.findall(r'\([A-Za-z]?arg[0-9]?(?:, [A-Za-z]?arg[0-9]?)*\)', s)
['(arg1)', '(arg1, arg2)', '(arg1, arg2, xarg, zarg)'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T03:00:17.803

我不确定 flex 是否是正确的工具，因为您通常会使用它将这样的输入分隔成单独的标记。但是，这当然是可能的：

```
"("[[:alpha:]][[:alnum:]]*(,[[:alpha:]][[:alnum:]]*)*")" 
```

那会匹配`(arg1)` `(arg1,arg2)`，但不会匹配`( arg1 )`or `(arg1, arg2)`。如果你想忽略所有地方的空格，它会变得有点冗长。

如果您使用 lex 定义，这类事情的可读性会更高：

```
ID      [[:alpha:]][[:alnum:]]*

%%

"("{ID}(","{ID})*")" 
```

或者，使用空间匹配：

```
/* Make sure you're in the C locale when you compile. Or adjust
 * the definition accordingly. Perhaps you wanted to allow other 
 * characters in IDs.
 */
ID      [[:alpha:]][[:alnum:]]*
/* OWS = Optional White Space.*/
/* Flex defines blank as "space or tab" */
OWS     [[:blank:]]*
COMMA   {OWS}","{OWS}
OPEN    "("{OWS}
CLOSE   {OWS}")"

%%

{OPEN}{ID}({COMMA}{ID})*{CLOSE}  { /* Got a parenthesized list of ids */ 
```

最后说明：这也不匹配`()`；必须至少有一个 id。如果您也想包含它，您可以将括号之间的部分设为可选：

```
{OPEN}({ID}({COMMA}{ID})*)?{CLOSE}  { /* Got a parenthesized        */
                                      /* possibly empty list of ids */ 
```

# jquery - jquery slideUp / slideDown奇怪的行为

> ID：13003273
> 
> 赞同：1
> 
> 时间：2012-10-21T23:33:06.067
> 
> 标签：jquery, slidedown, slideup

我在使用 mouseover 和 mouseout jquery 事件时遇到了我的代码问题。我试过使用 hover() 函数，但是奇怪的行为是一样的，基本上发生的事情是我第一次将鼠标放在 div 上它触发两个事件，然后向下滑动并立即向上滑动我使用的 div 作为菜单的背景，我想要的是保持向下滑动的 div 冻结，直到用户将指针移出...我感谢您提供的任何帮助...这是我的代码，提前致谢

```
$(document).ready(function(){
    $(".slidingDivB").hide();
    $(".show_hideB").show();        

    $('.show_hideB').mouseenter(function(){
        $(".slidingDivB").slideDown();
    });

    $('.show_hideB').mouseout(function(){
        $(".slidingDivB").slideUp();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:47:40.367

[Mouseout](http://api.jquery.com/mouseout/)与[mouseover](http://api.jquery.com/mouseover/)一起使用，[mouseenter](http://api.jquery.com/mouseenter/)与[mouseleave](http://api.jquery.com/mouseleave/)一起使用。尝试用 mouseleave 替换 mouseout。

另外，如果您希望我们更具体，请发布 jsfiddle。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T23:56:15.407

尝试`toggle`或`slideToggle`为 mouseenter。

```
$(document).ready(function(){

    $(".slidingDivB").hide();
    $(".show_hideB").show();    

    $('.show_hideB').mouseenter(function(){
        $(".slidingDivB").slideToggle();
    });

}); 
```

[**JS 小提琴演示**](http://jsfiddle.net/neo108/yNRMd/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:50:30.147

好的，这是您可以看到问题的链接 [http://porotoestudio.com/a/ana/nmd/espiritu.html](http://porotoestudio.com/a/ana/nmd/espiritu.html)

我想做的是创建一个导航栏，所有元素都必须动画，porblem 与背景，slideDivB 在 show_hideB 后面，动画有效，但问题是当我试图移动时在栏周围和元素上方，SlidingDivB 开始疯狂地显示和隐藏，我需要它保持静止并在我浏览元素时显示......

这是html代码

```
<html>
<!--Comienza Botonera-->

<div id="botonera" class="escondido">

<div id="activa-botonera" class="show_hideB"></div>
<div id="fondo-botonera" class="slidingDivB"></div>

    <div id="botonera_nivel1" class="typeface-js" style="font-family:GreyscaleBasic">
    <a href="espiritu.html"><p>espíritu</p></a>
    <p>&nbsp;</p>
    <a href="#" class="show_hideS"><p>soluciones</p></a>
    <p>&nbsp;</p>
    <a href="#" class="show_hideP"><p>proyectos</p></a>
    <p>&nbsp;</p>    
    <a href="#" class="show_hideE"><p>estructura</p></a>
    <p>&nbsp;</p>
    <a href="#"><p>con-texto</p></a>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <p>&nbsp;</p>
    <a href="contactos.html"><p>contactos</p></a>
  </div>

    <div id="botonera_proyectos" class="slidingDivP">
      <div class="typeface-js" style="font-family:GreyscaleBasic">
        <a href="proyectos_arq.html">proyectos arquitectónicos</a>
        <p>&nbsp;</p>
        <a href="proyectos_urb.html">planes y proyectos urbanos</a><br />
        <p>&nbsp;</p>
        <a href="arquit_pai.html">arquitectura del paisaje</a><br />
        <p>&nbsp;</p>
        <a href="arquit_int.html">arquitectura  interior</a><br />
        <p>&nbsp;</p>
        <a href="arquit_trans.html">arquitectura del transporte</a><br />
      </div>
     <div id="proyectos_flecha"class="typeface-js" style="font-family:GreyscaleBasic">></div>
    </div>

    <div id="botonera_soluciones" class="slidingDivS">
      <div class="typeface-js" style="font-family:GreyscaleBasic">
      <a href="soluciones_arq.html">proyectos arquitectónicos</a><br />
      <p>&nbsp;</p>
      <a href="soluciones_urb.html">planes y proyectos urbanos</a><br />
      <p>&nbsp;</p>
      <a href="soluciones_pai.html">arquitectura del paisaje</a><br />
      <p>&nbsp;</p>
      <a href="soluciones_int.html">arquitectura  interior</a><br />
      <p>&nbsp;</p>
      <a href="soluciones_trans.html">arquitectura del transporte</a>
      <br />
      </div>
     <div id="soluciones_flecha" class="typeface-js" style="font-family:GreyscaleBasic">></div>
    </div>

    <div id="botonera_estructura" class="slidingDivE">
      <div class="typeface-js" style="font-family:GreyscaleBasic">
      <a href="somos-historia.html">somos / historia</a><br />
      <p>&nbsp;</p>
      <a href="mision-vision.html">misión / visión</a><br />
      <p>&nbsp;</p>
      <a href="#" class="show_hideQ">equipo</a><br />
      <br />
      </div>
     <div id="estructura_flecha" class="typeface-js" style="font-family:GreyscaleBasic">></div>
    </div>

    <div id="botonera_equipo" class="slidingDivQ">
      <div class="typeface-js" style="font-family:GreyscaleBasic">
      <a href="gobierno.html">gobierno NMD</a><br />
      <p>&nbsp;</p>
      <a href="clientes.html">clientes</a><br />
      <p>&nbsp;</p>
      <a href="fichas.html">fichas</a><br />
      <br />
      </div>
     <div id="equipo_flecha" class="typeface-js" style="font-family:GreyscaleBasic">></div>
    </div>

</div>

<!--Termina Botonera-->
</html> 
```

这又是 wole 导航栏的脚本

```
<script type="text/javascript">

$(document).ready(function(){

        $(".slidingDivP").hide();
        $(".show_hideP").show();

    $('.show_hideP').mouseover(function(){
    $(".slidingDivP").slideToggle();
    $(".slidingDivS").hide();
    $(".slidingDivE").hide();
    $(".slidingDivQ").hide();
    }); 
});

$(document).ready(function(){

        $(".slidingDivS").hide();
        $(".show_hideS").show();

    $('.show_hideS').mouseover(function(){
    $(".slidingDivS").slideToggle();
    $(".slidingDivP").hide();
    $(".slidingDivE").hide();
    $(".slidingDivQ").hide();
    });

});

$(document).ready(function(){

        $(".slidingDivE").hide();
        $(".show_hideE").show();

    $('.show_hideE').mouseover(function(){
    $(".slidingDivE").slideToggle();
    $(".slidingDivP").hide();
    $(".slidingDivS").hide();
    $(".slidingDivQ").hide();
    });

});

$(document).ready(function(){

        $(".slidingDivQ").hide();
        $(".show_hideQ").show();

    $('.show_hideQ').mouseover(function(){
    $(".slidingDivQ").slideToggle();
    $(".slidingDivP").hide();
    $(".slidingDivS").hide();
    });

});

$(document).ready(function(){

        $(".slidingDivB").hide();
        $(".show_hideB").show();    

    $('.show_hideB').mouseenter(function(){
    $(".slidingDivB").slideDown();
    });

    $('.show_hideB').mouseleave(function(){
    $(".slidingDivB").slideUp();
    });

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T00:01:49.167

您的两个元素或 div 是否一个接一个地放置？如果是这样，这是正常行为：当您的鼠标进入 div 2（触发滑动效果）时，它会显示 div 1，但与此同时，它会使 div 2 向下滑动，使其远离您的指针并触发“ mouseout”事件（这反过来又触发了 slideUp...）。

你想创造什么？手风琴效应？您应该将“show_hideB”放置在您的页面中，以使“slidingDivB”的 slideUp/slideDown 不会使其移动，否则，您应该改变您的方法，并可能绑定到 click 事件。（点击 show_hideB 会触发滑动效果，当 divB 移动时，它实际上会触发 mouseout 事件，你不会有任何问题......）

如果您需要更准确的建议，请给我们您的 HTML 代码

# c - 函数中的 malloc() 结构，结束程序之前的 free()

> ID：13003275
> 
> 赞同：0
> 
> 时间：2012-10-21T23:33:10.527
> 
> 标签：c, pointers, malloc, valgrind

我正在学习 C 的基础知识，现在正在使用 malloc()。假设我有一个函数，它要求用户输入，用所述数据填充一个结构，并将该结构保存在一个数组中（全部通过主函数的引用传递）。

我通过 Valgrind 运行程序，我得到了“仍然可以访问”的字节（应该没问题吧？不认为是泄漏），但是保存的任何数据都会丢失块。

程序完成运行后，我将如何释放该内存？此外，我在代码中有一些 (2) 问题只是为了澄清一些事情，如果有人可以向我解释，我将不胜感激。

这是一些类似于我正在尝试做的代码：

我声明了以下结构：

```
struct Person {
  char name[MAX_INPUT];
  int age;
}; 
```

我正在编写一个这样的函数：

```
int function2(struct Person *list, int *index) {
  struct Person *prsn = malloc(sizeof(struct Person)); 
  // !Why do we sometimes cast the malloc or not? 
  // I sometimes get errors when I do, sometimes when I don't, 
  // while the surrounding code is pretty much the same.
  assert(prsn != NULL);

  // User input code goes here ... 

  // Now to save the Person created
  strcpy(prsn->name, nameInput);
  prsn->age = ageInput;
  list[(*index)++] = *prsn; 
  // !Why use the dereferencing *prsn here? 
  // why not directly prsn? Or is that saving the memory address and not very useful.

  return 0;
} 
```

这是我的主要功能：

```
int main(int argc, char *argv[]) { 
  struct Person personList[MAX_SIZE];
  int index;

  function2(personList, &index);

  // Before closing, I want to free any mallocs I have done here. free()

  return 0;
} 
```

Valgrind 报告：

```
LEAK SUMMARY:
==1766==    definitely lost: 44 bytes in 1 blocks
==1766==    indirectly lost: 0 bytes in 0 blocks
==1766==      possibly lost: 0 bytes in 0 blocks
==1766==    still reachable: 10,355 bytes in 34 blocks
==1766==         suppressed: 0 bytes in 0 blocks 
```

先感谢您。

编辑：修复了function2参数，返回和其他东西。我很抱歉，写它是为了说明我关于释放内存的主要问题。感谢您的更正提示，但真正的代码实际上是正确编译的。

Edit2：在建议使用 free() 的 main 末尾添加一个简单循环后，我收到以下错误。

```
==2216== LEAK SUMMARY:
==2216==    definitely lost: 44 bytes in 1 blocks
==2216==    indirectly lost: 0 bytes in 0 blocks
==2216==      possibly lost: 0 bytes in 0 blocks
==2216==    still reachable: 10,355 bytes in 34 blocks
==2216==         suppressed: 0 bytes in 0 blocks
==2216== 
==2216== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 0 from 0)
==2216== 
==2216== 1 errors in context 1 of 2:
==2216== Invalid free() / delete / delete[] / realloc()
==2216==    at 0x563A: free (in /usr/local/Cellar/valgrind/3.8.1/lib/valgrind/vgpreload_memcheck-amd64-darwin.so)
==2216==    by 0x10000194E: main (in ./test.out)
==2216==  Address 0x7fff5fbf9dd0 is on thread 1's stack
==2216== 
==2216== ERROR SUMMARY: 2 errors from 2 contexts (suppressed: 0 from 0) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T00:13:33.970

## 代码分析

让我们一次剖析一下：

```
int function2(struct Person *list) { 
```

正如[Iserni](https://stackoverflow.com/users/1428679/lserni)在他的[回答](https://stackoverflow.com/questions/13003275/malloc-struct-in-a-function-free-before-ending-program/13003302#13003302)中指出的那样，这个定义与您对该函数的调用不一致。我总体上同意他对现有代码的更正（但我将建议尽快对其进行修改）：

```
int function2(struct Person *list, int *index)

  struct Person *prsn = malloc(sizeof(struct Person)); 
  // !Why do we sometimes cast the malloc or not? 
  // I sometimes get errors when I do, sometimes when I don't, 
  // while the surrounding code is pretty much the same. 
```

这取决于您使用的是 C 还是 C++；在 C++ 中，你必须从`malloc()`（如果你使用`malloc()`的话；你通常不应该在 C++ 中）转换返回值。在 C 中，强制转换是可选的。有一种观点认为，省略演员表会揭示插入演员表可以隐藏的错误。我不同意。我相信`malloc()`应该通过`<stdlib.h>`声明，如果范围内没有声明，编译器应该发出警告，如果范围内有声明，则强制转换无法掩盖罪过。另一个可能的问题是您将指针分配给非指针；这也是编译器应该抱怨的错误。

```
 assert(prsn != NULL); 
```

这通常不被认为是处理内存分配错误的明智的长期方法。

```
 // User input code goes here ... 

  // Now to save the Person created
  strcpy(prsn->name, nameInput);
  prsn->age = ageInput;
  list[(*index)++] = *prsn; 
  // !Why use the dereferencing *prsn here? 
```

因为：

*   `list`是一个`struct Person *`。
*   因此`list[i]`是 a `struct Person`（尽管您拼写`i`为`(*index)++`）。
*   因此，您必须为其分配一个`struct Person`。
*   `prsn`是一个`struct Person *`。
*   因此`*prsn`也是一个`struct Person`。
*   因此，分配是“正确的”。
*   它也给你泄漏。
*   您已经用 的内容覆盖了`list[i]`的内容`*prsn`。
*   您还没有将指针保存到`prsn`任何地方。
*   因此，当您从函数返回时会泄漏内存。

解决这个问题所需的手术是不可忽略的：

```
int function2(struct Person **item)
...
*item = prsn; 
```

你必须修改电话；我会在解剖时回到那个`main()`。

```
 // why not directly prsn? Or is that saving the memory address and not very useful.
} 
```

您的函数被声明为返回 an`int`但您显示 no `return`。如果您不打算返回值，请将函数声明为`void`，尤其是当您要像代码中`main()`那样忽略返回值时。

您的最后一条评论主要包含在上面的讨论中；保存内存地址对于阻止泄漏至关重要，因此非常有用。

> 这是我的主要功能：

```
int main(int argc, char *argv[]) { 
  struct Person personList[MAX_SIZE];
  int index; 
```

使用未初始化的变量是个坏消息。它充其量只是意外归零。您不能将随机值用作数组索引；显式初始化它。此外，我们将需要一个指针数组，而不是结构数组：

```
 struct Person *personList[MAX_SIZE];
  int index = 0;

  ...other code...

  function2(personList, &index); 
```

使用修改后的功能：

```
 function2(&personList[index++]); 
```

这是可取的；这意味着`function2()`不需要知道数组；您只需将分配的内存指针应分配到的指针的地址传递给它。这减少了`main()`函数 和之间的耦合`function2()`，从而使代码更简单。

```
 // Before closing, I want to free any mallocs I have done here. free() 
```

所以你写：

```
 for (int i = 0; i < index; i++)
      free(personList[i]); 
```

这将释放所有分配的内存。

```
 return 0;
} 
```

我喜欢在 结尾处看到一个明确的回报`main()`，尽管 C99 说它不是 100% 必要的。

确保您在编译时启用了足够多的警告。如果您使用的是 GCC，那么`gcc -Wall`应该是您运行时使用的最低编译警告级别（并且当您这样做时，您的代码中应该没有警告）。我会发出更严格的警告：`gcc -std=c99 -Wall -Wextra -Wmissing-prototypes -Wold-style-definition -Wstrict-prototypes -Wshadow`通常。您需要包含`-O3`（或某种程度的优化）以获得一些警告。关于原型的东西反映了对我使用的旧代码库的偏执，该代码库周围仍然有 K&R 函数定义。

* * *

## 回复评论

> 当我查看您的详细信息并尝试时，第一个问题是：结构数组和指针数组之间是否存在内存影响？

是的，但可能不是你想的那样。如果您使用结构数组，则无需为结构动态分配内存，因为编译器已经为您分配了它们。由于练习的目的是使用指针和`malloc()`，因此最好使用指针。就空间而言，指针数组使用的总内存会稍多一些（但泄漏的内存会更少）。

> 我正在尝试更改我的代码以使用指针数组。但是使用`function2(personList, &index);`to call `function2`now 给了我以下警告`incompatible pointer types passing 'struct Person *[512]' to parameter of type 'struct Person *'`：如果我在主要问题中编写额外的代码来详细说明，可以吗？作为说明，我试图尽可能多地引用变量，以免程序暂时将数据从函数复制到函数。

如果您没有进行所有更改，则编译器是正确的。使用两个参数的代码在函数之间复制的数据比使用一个参数的代码多。

### 版本 1

以下程序使用建议的单参数`function2()`来减少`main()`函数 和之间的耦合`function2()`，从而简化两者。

此代码在 Mac OS X 10.7.5 上的 GCC 4.7.1 下使用命令行编译时没有警告：

```
 gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes \
        -Wold-style-definition mem.c -o mem 
```

在 下运行时`valgrind`，它不会出现内存泄漏。

```
#include <assert.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

enum { MAX_INPUT = 28 };
enum { MAX_SIZE  = 3  };

struct Person
{
  char name[MAX_INPUT];
  int age;
};

static void function2(struct Person **list)
{
    struct Person *prsn = malloc(sizeof(struct Person)); 
    assert(prsn != NULL);

    char *nameInput = "This is my name";
    int ageInput = 29;    // Again!

    strcpy(prsn->name, nameInput);
    prsn->age = ageInput;
    *list = prsn;
}

int main(void)
{
    struct Person *personList[MAX_SIZE];
    int index = 0;

    function2(&personList[index++]);
    function2(&personList[index++]);
    function2(&personList[index++]);

    for (int i = 0; i < index; i++)
        free(personList[i]);

    return 0;
} 
```

### 版本 2

这保留了两个参数的版本，`function2()`并让它自己进行计数`main()`。该程序还可以干净地编译并在`valgrind`.

```
#include <assert.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

enum { MAX_INPUT = 28 };
enum { MAX_SIZE  = 3  };

struct Person
{
  char name[MAX_INPUT];
  int age;
};

static void function2(struct Person **list, int *index)
{
    struct Person *prsn = malloc(sizeof(struct Person)); 
    assert(prsn != NULL);

    char *nameInput = "This is my name";
    int ageInput = 29;    // Again!

    strcpy(prsn->name, nameInput);
    prsn->age = ageInput;
    list[(*index)++] = prsn;
}

int main(void)
{
    struct Person *personList[MAX_SIZE];
    int index = 0;

    function2(personList, &index);
    function2(personList, &index);
    function2(personList, &index);

    for (int i = 0; i < index; i++)
        free(personList[i]);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T23:36:49.170

我认为你`function2`是真的

```
int function2(struct Person *list, int *index) 
```

你会在那里保存你的 malloc'ed 指针

```
list[(*index)++] = prsn; 
```

然后`main`你会释放列表

```
while(index)
    free(list[--index]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-15T08:15:10.320

在面向对象的编程语言中，对象数组实际上只是指向对象的指针数组。因此，如果一个指针占用 4 个字节，而一个对象占用 5 个字节，则 10 个对象的数组实际上将是 4*10 字节长（加上开销）。

```
MyClass[] my_variable = new MyClass[10]; // this will allocate 10*pointersize bytes, plus overhead, you still need to allocate more space for the objects themselves 
```

在 C 中，结构数组是结构数组。如果一个结构占用 8 个字节，那么包含 10 个结构的数组占用 80 个字节。您无需分配更多空间。它已经在那里了。

```
struct data_t my_variable[10]; // this will allocate 10*sizeof(data_t) bytes 
```

所以简单的答案是：

```
int function2(struct Person *list, int *index) {
  char* nameInput;
  // User input code goes here ...
  // IMPORTANT: the user input code must allocate the space for nameInput
  // if it doesn't, then a copy of the buffer must be made
  // instead of the direct assignment below

  // the memory for this instance of the person was already created when the
  // array was created, so just save the values

  list[*index].name = nameInput;
  list[*index].age = ageInput;
  *index += 1; 

  return 0;
} 
```

当您的代码执行此行时：

```
list[(*index)++] = *prsn; 
```

它实际上是复制 8 个字节（在 32 位机器上，sizeof(int) + sizeof(char*)），因为我认为您注意到您的评论“//！为什么在这里使用取消引用 *prsn？”

用 malloc 分配的内存地址不会在该行中复制，但内存的内容是。这就是为什么它是内存泄漏，当函数退出时地址会丢失，因为它从未被放入数组中。

# java - 两个实体之间的 JPA OneToOne 和 ManyToMany

> ID：13003277
> 
> 赞同：-1
> 
> 时间：2012-10-21T23:33:38.653
> 
> 标签：java, jpa, playframework

我之前问了一个问题，但认为还不够清楚，我将进一步详细说明代码。
我有一个教师实体和部门实体
许多教师属于一个部门，
一个部门有一名教师负责部门。
这是我实施它的方式。

```
@Entity
public class Teacher extends Model {
@Required
public String surname;

@Required
public String othernames;

    ... 

@OneToOne(mappedBy = "deptHead")
public Department headedBy = new Department();

@ManyToOne(cascade=CascadeType.ALL)
public Department dept = new Department();

... 
} 
```

和部门实体

```
@Entity
public class Department extends Model {
@Required
public String deptName; 

@OneToMany(mappedBy="dept")
public List<Teacher> teachers = new ArrayList<Teacher>();

@OneToOne
public Teacher deptHead = new Teacher();

    ...

} 
```

我收到以下错误

```
 @6c4nj8nmg
    Internal Server Error (500) for request GET /

    JPA error
    A JPA error occurred (Unable to build EntityManagerFactory): could not instantiate   test objectmodels.Department

    play.exceptions.JPAException: Unable to build EntityManagerFactory
    at play.db.jpa.JPAPlugin.onApplicationStart(JPAPlugin.java:269)
    at play.plugins.PluginCollection.onApplicationStart(PluginCollection.java:525)
    at play.Play.start(Play.java:526)
    at play.Play.detectChanges(Play.java:630)
    at play.Invoker$Invocation.init(Invoker.java:198)
    at Invocation.HTTP Request(Play!)
    Caused by: org.hibernate.InstantiationException: could not instantiate test objectmodels.Department
    at org.hibernate.engine.UnsavedValueFactory.instantiate(UnsavedValueFactory.java:48)
    at org.hibernate.engine.UnsavedValueFactory.getUnsavedIdentifierValue(UnsavedValueFactory.java:67)
    at org.hibernate.tuple.PropertyFactory.buildIdentifierProperty(PropertyFactory.java:67)
    at org.hibernate.tuple.entity.EntityMetamodel.<init>(EntityMetamodel.java:135)
    at org.hibernate.persister.entity.AbstractEntityPersister.<init>(AbstractEntityPersister.java:485)
    at org.hibernate.persister.entity.SingleTableEntityPersister.<init>(SingleTableEntityPersister.java:133)
    at org.hibernate.persister.PersisterFactory.createClassPersister(PersisterFactory.java:84)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:286)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1872)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:906)
    at play.db.jpa.JPAPlugin.onApplicationStart(JPAPlugin.java:267)
    ... 5 more
    Caused by: java.lang.reflect.InvocationTargetException
    at  org.hibernate.engine.UnsavedValueFactory.instantiate(UnsavedValueFactory.java:45)
    ... 15 more
     Caused by: java.lang.StackOverflowError
    at java.lang.Class.searchMethods(Unknown Source)
    at java.lang.Class.getMethod0(Unknown Source)
    at java.lang.Class.getMethod(Unknown Source)
    at      play.classloading.enhancers.PropertiesEnhancer$FieldAccessor.invokeWriteProperty(PropertiesEnhancer.java:268)
    at models.Department.<init>(Department.java:23)
    at models.Teacher.<init>(Teacher.java:47)
    at models.Department.<init>(Department.java:26)
    ... 
```

在这些方面需要帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T01:12:20.323

这不是 JPA 问题，而是由`Teacher`/的递归实例化引起的`Department`。

当您创建或要求 JPA 创建 的实例时`Teacher`，`Teacher`尝试实例化 a `Department`（实例化 a `Teacher`...）到无穷大。

因此，您会在`StackOverflowError`该堆栈跟踪的末尾看到一个错误。

从类定义中删除`= new Teacher()`and`= new Department()`表达式；在创建它们时依赖并使用适当的 setter 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T09:15:06.383

我删除了 Teacher 和 Department 之间的 @oneToOne 关系，并创建了一个名为 DepartmentHeads 的新实体，现在一切正常。
这是结果。

```
@Entity
public class Teacher extends Model {
    @Required
    public String surname;

    @Required
    public String othernames;

    ... 

    @ManyToOne(cascade=CascadeType.ALL)
    public Department dept = new Department();

    ... 
}

@Entity
public class Department extends Model {
    @Required
    public String deptName; 

    @OneToMany(mappedBy="dept")
    public List<Teacher> teachers = new ArrayList<Teacher>();

    ...

}

@Entity
public class DepartmentHead extends Model{
    @OneToOne
    public Teacher teacher = new Teacher();

    @OneToOne
    public Department dept = new Department();  
} 
```

现在一切正常。

# php - 在 PHP 中运行 JQuery

> ID：13003279
> 
> 赞同：-1
> 
> 时间：2012-10-21T23:33:58.797
> 
> 标签：php, jquery, html

我有一个 PHP 文件，它在 JQuery TAB 中输出一些信息。

PHP 文件

```
$output2 .='<div class="demo">';
$output2 .='<div id="tabs">';
$output2 .='<ul>';
$output2 .='<li><a href="#tabs-1">Option 1</a></li>';
$output2 .='<li><a href="#tabs-2">Option 2</a></li>';
$output2 .='</ul>';
$output2 .='<div id="tabs-1">';
$output2 .='<p>1st text.</p>';
$output2 .='</div>';
$output2 .='<div id="tabs-2">';
$output2 .='<p>2nd text.</p>';
$output2 .='</div>';
$output2 .='</div>';
$output2 .='</div>'; 
```

HTML 文件

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0
Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />

<link rel="stylesheet" href="themes/base/jquery.ui.all.css">
<script src="jquery-1.8.0.js"></script>
<script src="ui/jquery.ui.core.js"></script>
<script src="ui/jquery.ui.widget.js"></script>
<script src="ui/jquery.ui.tabs.js"></script>
<link rel="stylesheet" href="css/demos.css">    
<script>
$(function() {
    $( "#tabs" ).tabs();
});
</script>

</head>

<body>
<?php echo $output2; ?>
</body>
</html> 
```

当我运行 php 时，一切都没有 jquery 函数。如果我直接在 HTML 文件中运行脚本，运行完美

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-18T23:37:16.293

以下脚本

```
<script>
    $(function() {
        $( "#tabs" ).tabs();
    });
</script> 
```

找到标签的最终输出并将其应用到文档中，但是，您在 php 输出实际“输出”之前调用此函数，因此不应用所有 jquery 事件，您可以通过放置“标签”函数来解决此问题在那个回声之后。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-21T23:44:02.850

我认为这将解决它：

```
$(document).ready(function() {

    $(function() {
        $( "#tabs" ).tabs();        
    });    
}); 
```

为了更快的页面加载 - 把它放在底部。

# java - 从 Java 中的另一个线程更新 JTextField

> ID：13003280
> 
> 赞同：3
> 
> 时间：2012-10-21T23:33:59.170
> 
> 标签：java, multithreading, swing, user-interface, client

我正在制作一个游戏客户端/服务器，并且我有一个新线程更新客户端 GUI（使用 Swing）上的一些信息。我正在尝试使用 SwingUtilities，但它不起作用。另外，我听说 SwingUtilities 每次使用它时都会创建一个新线程，所以我也在寻找一种新方法（我有 10 个左右的 JTextField 需要更新）。有没有办法在不使用 SwingUtilities 的情况下做到这一点？这是我现在所拥有的。

```
SwingUtilities.invokeLater(    
        new Runnable() {    
           public void run()    
           {    
              Client.status.setText("status = "+status); 
           }    
        }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T04:20:04.583

有趣的是，就在最近我遇到了一个类似的问题，所以为了解决这个问题，我使用了[SwingUtilities.invokeAndWait(Runnable runnable)](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeAndWait%28java.lang.Runnable%29)，这就是使我创建的[SSCCE](http://sscce.org/)按预期工作的原因，尽管如果我将所有调用更改为**[invokeAndWait()](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeAndWait%28java.lang.Runnable%29)**使用**[invokeLater()](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)**，可以清楚地看到两者之间的区别。

Java Doc 的引用说：

```
Causes doRun.run() to be executed synchronously on the AWT event dispatching thread. 
This call blocks until all pending AWT events have been processed and 
(then) doRun.run() returns. This method should be used when an application thread 
needs to update the GUI. 
```

这是我作为[SSCCE](http://sscce.org/)制作的一个小程序，用于表示冒泡排序动画：

```
import javax.swing.*;

public class BubbleSortFrame extends JFrame
{
    private BubbleSortView contentPane;

    private void displayGUI()
    {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        contentPane = new BubbleSortView();
        setContentPane(contentPane);
        pack();
        setLocationByPlatform(true);
        setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new BubbleSortFrame().displayGUI();
            }
        });
    }
} 
```

* * *

```
import java.awt.*;
import java.awt.event.*;
import java.lang.reflect.InvocationTargetException;
import javax.swing.*;

public class BubbleSortView extends JPanel
{
    private JLabel sizeLabel;
    private JTextField sizeField;
    private JTextField[] vField;
    private JLabel[] vLabel;
    private JButton startButton, createButton;
    private int size;
    private JPanel createPanel, animationPanel;

    private BubbleSort bubbleSort;

    public BubbleSortView()
    {
        size = 5;
        displayAndCreateGUI();
    }

    private void displayAndCreateGUI()
    {
        setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        setOpaque(true);
        setBackground(Color.WHITE);
        JPanel basePanel = new JPanel();
        basePanel.setLayout(new GridLayout(2, 1, 5, 5));
        basePanel.setOpaque(true);
        basePanel.setBackground(Color.WHITE);

        JPanel topPanel = new JPanel();
        topPanel.setOpaque(true);
        topPanel.setBackground(Color.WHITE);
        topPanel.setBorder(
            BorderFactory.createTitledBorder("Input : "));
        topPanel.setLayout(new GridLayout(2, 1, 5, 5)); 
        /*
         * This will act as the area
         * for taking the input for
         * number of elements in an Array.
         */
        JPanel sizePanel = new JPanel();
        sizePanel.setOpaque(true);
        sizePanel.setBackground(Color.WHITE);
        sizeLabel = new JLabel("Enter Number of Elements : ");
        sizeField = new JTextField(10);
        createButton = new JButton("CREATE");

        /*
         * This will act as the area
         * where we will specify the values
         * for each index in an Array.
         */
        createPanel = new JPanel();
        createPanel.setOpaque(true);
        createPanel.setBackground(Color.WHITE);
        createPanel.setBorder(
            BorderFactory.createTitledBorder("Please Enter values for an Array : "));
        createPanel.setVisible(false);      

        animationPanel = new JPanel();
        animationPanel.setOpaque(true);
        animationPanel.setBackground(Color.WHITE);
        animationPanel.setBorder(
            BorderFactory.createTitledBorder("Animation : "));
        animationPanel.setVisible(false);   

        createButton.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent ae)
            {
                if (sizeField.getDocument().getLength() > 0)
                {
                    size = Integer.parseInt(sizeField.getText());
                    vField = new JTextField[size];
                    createPanel.setVisible(true);
                    for (int i = 0; i < size; i++)
                    {
                        vField[i] = new JTextField(5);
                        /*
                         * Adding the Listener to the
                         * last JTextField on the Right 
                         * Side.
                         */
                        if (i == (size - 1)) 
                        {
                            vField[i].addActionListener(new ActionListener()
                            {
                                @Override
                                public void actionPerformed(ActionEvent ae)
                                {
                                    animationPanel.setLayout(
                                            new GridLayout(1, size, 2, 2));
                                    animationPanel.setVisible(true);
                                    vLabel = new JLabel[size];
                                    for (int i = 0; i < size; i++)
                                    {
                                        vLabel[i] = new JLabel(
                                            vField[i].getText(), JLabel.CENTER);
                                        vLabel[i].setOpaque(true);
                                        vLabel[i].setBackground(Color.YELLOW);
                                        vLabel[i].setForeground(Color.RED);
                                        animationPanel.add(vLabel[i]);
                                    }
                                    animationPanel.revalidate();
                                    animationPanel.repaint();
                                    bubbleSort = new BubbleSort(vLabel, size);
                                    Thread t = new Thread(bubbleSort);
                                    t.start();
                                }
                            });
                        }
                        createPanel.add(vField[i]);
                    }
                    createPanel.revalidate();
                    createPanel.repaint();
                    createButton.setEnabled(false);
                }
                else
                    size = 5;
            }
        });
        sizePanel.add(sizeLabel);
        sizePanel.add(sizeField);
        sizePanel.add(createButton);

        /*
         * Initializing JTextField Array
         * so that it can be first presented
         * to the USER to take input for
         * 5 values.
         */
        //for (int i = 0; i < size; i++)
        //  vField[i] = new JTextField(5);
        topPanel.add(sizePanel);
        topPanel.add(createPanel);
        basePanel.add(topPanel);
        basePanel.add(animationPanel);
        add(basePanel);
    }

    private class BubbleSort implements Runnable
    {
        private int[] arr;
        private JLabel[] vLabel;
        private int size;
        private int pass;

        public BubbleSort(JLabel[] label, int size)
        {
            vLabel = label;
            this.size = size;
            pass = 1;
            for (int i = 0; i < size; i++)
                System.out.print("" + vLabel[i].getText() + "\t");
            System.out.println("");
        }

        @Override
        public void run()
        {
            try
            {
                bubbleSorting();
            }
            catch (InvocationTargetException ite)
            {
                ite.printStackTrace();
            }
            catch(InterruptedException ie)
            {
                ie.printStackTrace();
            }
        }

        private void bubbleSorting() 
            throws InterruptedException, InvocationTargetException
        {
            while (pass < size)
            {
                for (int i = 0; i < (size - pass); i++)
                {
                    final int j = i;
                    SwingUtilities.invokeAndWait(new Runnable()
                    {
                        @Override
                        public void run()
                        {
                            vLabel[j].setBackground(Color.RED);
                            vLabel[j].setForeground(Color.WHITE);
                            vLabel[j + 1].setBackground(Color.RED);
                            vLabel[j + 1].setForeground(Color.WHITE);
                        }
                    });
                    try
                    {
                        Thread.sleep(1500);
                    }
                    catch(InterruptedException ie)
                    {
                        ie.printStackTrace();
                    }
                    int left = Integer.parseInt(vLabel[i].getText());
                    int right = Integer.parseInt(vLabel[i + 1].getText());
                    if (left > right)
                    {
                        String temp = vLabel[i].getText();
                        vLabel[i].setText(vLabel[i + 1].getText());
                        vLabel[i + 1].setText(temp);
                    }
                    SwingUtilities.invokeAndWait(new Runnable()
                    {
                        @Override
                        public void run()
                        {
                            vLabel[j].setBackground(Color.YELLOW);
                            vLabel[j].setForeground(Color.RED);
                            vLabel[j + 1].setBackground(Color.YELLOW);
                            vLabel[j + 1].setForeground(Color.RED);
                        }
                    });
                }
                System.out.println("Pass : " + pass + "\tSize : " + size);  
                SwingUtilities.invokeAndWait(new Runnable()
                {
                    @Override
                    public void run()
                    {
                        vLabel[size - pass].setBackground(Color.GREEN);
                        vLabel[size - pass].setForeground(Color.BLUE);
                    }
                });
                pass++;
            }
            SwingUtilities.invokeAndWait(new Runnable()
            {
                @Override
                public void run()
                {
                    vLabel[0].setBackground(Color.GREEN);
                    vLabel[0].setForeground(Color.BLUE);
                }
            });
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T23:59:40.680

我不知道您从哪里听说过“ *SwingUtilities 创建一个新线程*”，但我认为您要么误解了，要么被错误地告知。 `SwingUtilities.invokeLater`将`Runnable`放在事件调度程序队列的末尾。然后队列在它自己的线程上下文中（及时）处理这个事件，调用`Run`，没有为这个进程创建“新”线程。

至于你的问题。

您可能需要`validate()`（并且可能`repaint()`）调用字段父容器以鼓励它更新；）

不，没有任何其他方法可以跨线程同步 UI，这就是`SwingUtilities`

# apache - Apache multipart POST“传递请求正文失败”

> ID：13003282
> 
> 赞同：10
> 
> 时间：2012-10-21T23:34:06.737
> 
> 标签：apache, https, jetty, multipart, mod-proxy

我们的 Web 服务器（配置为 ssl -> apache -> jetty）出现问题，随机拒绝分段上传 POST 请求，错误代码为 400 Bad Request。apache 错误日志（信息级别）显示以下两个错误：

```
[info] [client x1.y1.z1.w1] (70007)The timeout specified has expired: SSL input filter read failed.
[error] proxy: pass request body failed to x.y.z.w:8087 from x1.y1.z1.w1
[info] [client x1.y1.z1.w1] Connection closed to child 74 with standard shutdown 
```

或者

```
[info] [client x2.y2.z2.w2] (70014)End of file found: SSL input filter read failed.
[error] proxy: pass request body failed to x.y.z.w:8087 from x2.y2.z2.w2
[info] [client x2.y2.z2.w2] Connection closed to child 209 with standard shutdown 
```

这两种情况都来自客户端的 400 错误请求。有时我们的码头服务器甚至没有看到请求意味着它在 apache 端被拒绝，有时它开始处理它只是被拒绝（这在我们的 UploadFilter 中表现为 MultipartException）

我们设置了 mod_proxy 以使用回退负载平衡方案，但日志显示尚未触发回退，导致我相信这不是问题的原因。

我尝试设置 SetEnv proxy-sendcl 1 但这并没有改变任何东西。

上传请求约为 1mb。只有这些多部分文件 POST 请求失败，我们有多个 GET 请求同时进入，它们总是按预期工作。

如果有人可以分享任何意见或建议，我将非常感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-08T13:41:25.877

如果您使用一些启用了 ajp 的后端服务器，例如 Tomcat，您可以尝试使用 mod_proxy_ajp 而不是 mod_proxy_http。我在一个繁重的上传应用程序上遇到了类似的问题，我通过更改来修复它

```
ProxyPass /myapp http://localhost:8080/myapp
ProxyPassReverse /myapp http://localhost:8080/myapp 
```

经过

```
ProxyPass /myapp ajp://localhost:8009/myapp
ProxyPassReverse /myapp ajp://localhost:8009/myapp 
```

当然，还需要在 tomcat 端启用 ajp 连接器。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:55:06.883

请检查这个：[https ://issues.apache.org/bugzilla/show_bug.cgi?id=44592](https://issues.apache.org/bugzilla/show_bug.cgi?id=44592)

该问题可能是由 HTTP 保持连接（KeepAliveTimeout 指令）导致与慢速客户端建立的连接（tcp 延迟、缓慢的请求正文创建等）造成的。

尝试在您的 apache conf 中提高 KeepAliveTimeout，但不要将其保持得太高以避免杀死您的服务器 (DOS)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-11T20:52:18.793

[您可能会因为 Apache尝试在传递整个 POST 正文之前缓冲整个 POST 正文](https://blog.ionelmc.ro/2018/03/25/proxy-issues-with-apache/)而导致超时而看到这一点。

启用`proxy-sendcl`可能会加剧这种情况，因为这可能会迫使 Apache 将一个大的 POST 假脱机到磁盘，只是为了在[“原始正文是使用分块编码发送（并且很大）”](https://httpd.apache.org/docs/2.4/mod/mod_proxy.html#request-bodies)时计算 Content-Length 。

为避免这种情况，请设置环境变量`proxy-sendchunked`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-08T13:46:48.403

解决上传的主要问题后，我仍然收到一些奇怪的日志，例如：

```
[reqtimeout:info] [pid 18164:tid 140462752990976] [client 201.76.162.37:41473] AH01382: Request header read timeout 
```

通过增加 mod_reqtimeout 的限制，改变`RequestReadTimeout`参数的值，我能够大大降低它发生的频率。您可以更改默认值或在`VirtualHost`.

# java - 如何将当前页面源保存在不同的名称和文件夹中

> ID：13003283
> 
> 赞同：0
> 
> 时间：2012-10-21T23:34:09.760
> 
> 标签：java, selenium, selenium-webdriver

我想使用 getPageSource() 方法将当前页面源以不同的名称保存在指定文件夹中。例如，将当前页面源保存为 C:/Holiday 文件夹下的 Hawai.htm。

大多数参考资料（包括可用的 Java 文档）仅涉及 getPageSource() ，但没有什么特别不是在这种情况下需要的内容。

我在 Windows 平台上使用 Selenium Webdriver 2 Java (JDK 7)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T05:24:10.790

getPageSource() 将返回一个包含整个页面源的字符串。

在 WebDriver 中没有可用的文件操作。为了将该字符串（页面源）写入所需位置的单独文件，您应该使用某种编程语言。

```
class FileWrite 
{
 public static void main(String args[])
  {
  try{
  // Create file 
  FileWriter fstream = new FileWriter("C://Holiday//Hawai.htm");
  BufferedWriter out = new BufferedWriter(fstream);
  out.write(driver.getPageSource());
  //Close the output stream
  out.close();
  }catch (Exception e){//Catch exception if any
  System.err.println("Error: " + e.getMessage());
  }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T11:29:27.337

根据文档，`getPageSource()`如果页面已被 JavaScript 修改，则可能（取决于浏览器）不会返回正确的内容。如果你有 jQuery，你可以使用：

```
try (FileWriter fstream = new FileWriter("C://Holiday//Hawai.htm");
     BufferedWriter out = new BufferedWriter(fstream)) {
    String content = (String)((JavascriptExecutor)driver).executeScript("return $('html').html();"));
    out.write(content);
} 
catch (Exception e) {...} 
```

# python - 在 Python 中为 JSON 连接 Base64 字符串和普通字符串

> ID：13003284
> 
> 赞同：0
> 
> 时间：2012-10-21T23:34:17.580
> 
> 标签：python, json, base64

我需要使用 python 将存储在 ubunutu 服务器上的数据库中的图像作为二进制文件发送。

我已经成功地将文件从二进制转换为 Base64 编码的字符串。但是，我不确定如何将此编码字符串附加到 Python 中的默认字符串。例如

```
"Text" + ": " + base64.b64encode("text") 
```

有什么建议或建议吗？

更新：

它会产生此错误：

> TypeError：无法连接 'str' 和 'builtin_function_or_method' 对象”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:38:39.477

如果你只想要 JSON 输出，你可以这样做：

```
return '{"image": "' +base64.b64encode("text") + '"}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:44:47.873

```
import json

json.dumps({'image_base64':  
    base64.b64encode(file(image_filename).read())}) 
```

有库时不要手动构建 json。

# ruby - 编码::UndefinedConversionError

> ID：13003287
> 
> 赞同：41
> 
> 时间：2012-10-21T23:34:52.493
> 
> 标签：ruby, encoding, sinatra, sequel

`Encoding::UndefinedConversionError - "\xC2" from ASCII-8BIT to UTF-8`每次尝试将哈希转换为 JSON 字符串时，我都会得到一个。我尝试了使用`[.encode | .force_encoding](["UTF-8" | "ASCII-8BIT" ])`，链接`.encode`，`.force_encoding`向后，切换参数，但似乎没有任何效果，所以我发现了这样的错误：

```
begin
  menu.to_json
rescue Encoding::UndefinedConversionError
  puts $!.error_char.dump
  p $!.error_char.encoding
end 
```

其中 menu 是续集的 dataset.to_hash，内容来自 MySQL 数据库，utf8_general_ci 编码并返回：

> "\xC2"
> 
> <#Encoding:ASCII-8BIT>

无论我使用什么`.encode`，编码都不会改变。`.force_encoding`我什至试图在`.gsub!(/\\\xC2/)`没有运气的情况下更换字符串。

有任何想法吗？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-01-03T06:21:26.817

```
menu.to_s.encode('UTF-8', invalid: :replace, undef: :replace, replace: '?') 
```

这工作得很好，我不得不替换一些额外的字符，但没有更多的错误。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-10-22T09:31:33.777

你对“\xC2”有什么期望？大概是一个`Â`

使用 ASCII-8BIT 你有二进制数据，而 ruby​​ 无法决定应该是什么。

您必须首先使用 设置编码`force_encoding`。

您可以尝试以下代码：

```
Encoding.list.each{|enc|
  begin
    print "%-10s\t" % [enc]
    print "\t\xC2".force_encoding(enc)
    print "\t\xC2".force_encoding(enc).encode('utf-8')
  rescue => err
    print "\t#{err}"
  end
  print "\n"
} 
```

结果是“\xC2”的不同编码中的可能值。

结果可能取决于您的输出格式，但我认为您可以很好地猜测您拥有哪种编码。

当您定义所需的编码（可能是 cp1251）时，您可以

```
menu.force_encoding('cp1252').to_json 
```

另见 Kashyaps 评论。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-30T21:11:20.960

如果你不在乎失去奇怪的角色，你可以把它们吹走：

```
str.force_encoding("ASCII-8BIT").encode('UTF-8', undef: :replace, replace: '') 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-09-20T15:47:57.430

您自动接受的解决方案不起作用，实际上没有错误，但它**不是 JSON。**

我使用 oj gem 解决了这个问题，它现在可以找到了。它也比标准 JSON 库更快。

写作：

```
 menu_json = Oj.dump menu 
```

阅读 ：

```
 menu2 = Oj.load menu_json 
```

[https://github.com/ohler55/oj](https://github.com/ohler55/oj)了解更多详情。我希望它会有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-29T12:38:33.450

如果您知道要替换哪些字符， :fallback 选项会很有用

```
"Text ".encode("ASCII", "UTF-8", fallback: {"" => ":)"})
#=> hello :) 
```

来自文档：

> 通过给定对象设置未定义字符的替换字符串。对象应该是 Hash、Proc、Method 或具有 [] 方法的对象。它的键是在当前转码器的源编码中编码的未定义字符。它的值可以是任何编码，直到它可以转换为转码器的目标编码。

# java - 重试打开目录中的文件

> ID：13003288
> 
> 赞同：0
> 
> 时间：2012-10-21T23:34:52.493
> 
> 标签：java, datetime, try-catch

我正在尝试使用以下代码打开某个目录中的文件。文件的名称是按日期分配的，但缺少某些日期。我想遍历日期以获取文件并让代码在每次找不到文件时返回 1 天，直到最终找到一个文件（`currentdate`是一个全局变量，奇怪的 xml 元素是因为我正在使用处理） .

我认为代码应该做的是：

1.  尝试打开具有给定日期的文件。
2.  出错时，它会捕获并获取新日期。
3.  重复该过程，直到找到有效日期。
4.  当找到有效日期时，它会转到 is 所在的行`break`并退出循环。

但由于某种原因，它会做一些奇怪的事情，比如 EDIT # 有时它会跳得太多，尤其是在第一个月附近 # 我的逻辑是否因为某种原因不起作用？谢谢

```
String strdate=getdatestring(counter);
int counter=0;
while(true){
      try{
        xmldata = new XMLElement(this, "dir/" + strdate + "_filename.xml" ); 
        break;
      }catch(NullPointerException e){
        counter +=1;
        strdate=getdatestring(counter);
      }}

String getdatestring(int counter) {
Date firstdate=new Date();
int daystosum=0;
String strcurrentdate="";

if(keyPressed && key=='7'){
  daystosum=-7;
}
daystosum=daystosum-counter;

Calendar c=Calendar.getInstance();
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");

try{
firstdate=formatter.parse("2012-04-13");//first day of the database
}catch(ParseException e){
  println(e);
}
c.setTime(currentdate);
c.add(Calendar.DATE,daystosum);
currentdate=c.getTime();
if(currentdate.before(firstdate)){
  currentdate=firstdate;
}
strcurrentdate=formatter.format(currentdate);

return strcurrentdate;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:46:36.070

我相信一旦你这样做了，

```
 daystosum=daystosum-counter; 
```

您需要将计数器重置为

```
 counter = 0; 
```

否则下一次它将减去更大的数字，例如开始，比如`daystosum`是 0 和`counter`5，在 之后`daystosum=daystosum-counter;`，`daystosum`将变为`-5`。再次进入 while 循环，找不到文件，然后 count 将增加到 6。在这种情况下，您将获得``daystosum=daystosum-counter;`as `-5-6 = -11`，但您希望它移至`-6`. 重置计数器应该可以解决您的问题。

另一方面，我认为您可以列出`file.listFiles()`父目录中使用的文件并对文件名执行搜索。在这种情况下，您不会尝试一次又一次地打开文件。

# networking - 如何判断是否连接到网站

> ID：13003289
> 
> 赞同：-1
> 
> 时间：2012-10-21T23:34:52.897
> 
> 标签：networking, cross-browser, platform-independent

是否有一种操作系统和浏览器中立的方式来判断某人是否连接到给定的网站？Netstat 似乎不起作用，因为它只显示到路由器的连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:36:17.627

HTTP 是一种无状态协议。没有“连接”到网站这样的事情。如果您询问底层 TCP 连接，*仍然*不能保证该连接在 HTTP 请求中保持打开状态。

# android - 如何检查文件是否可以被android应用程序删除？

> ID：13003291
> 
> 赞同：0
> 
> 时间：2012-10-21T23:35:03.667
> 
> 标签：android

我如何知道我的 android 应用程序是否可以删除文件？

我正在编写一个 android 应用程序和一个 web 应用程序，它允许我的客户查看和删除他们的文件。但我不会让客户端查看不可删除的文件。

喜欢

```
if(isFileCanBeDeleted("filename.ext"))
{
  //save the filename and path to server
}
else
{
   //the file is cannot be deleted, this filename will not be saved online
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-22T00:55:21.670

您可以通过执行shell命令来尝试，

```
Runtime.getRuntime().exec("test -e " + "/path/to/file.txt"); 
```

但是，您需要检查 API 引用是否可用，具体取决于 API 级别或 root/非 root 电话。

# php - 使用 php 替换 youtube URL 来解析消息以获取 youtube 视频 ID

> ID：13003296
> 
> 赞同：-3
> 
> 时间：2012-10-21T23:36:07.467
> 
> 标签：php, regex, parsing, youtube, preg-replace

> **可能重复：**
> [使用 preg_match 解析 youtube 视频 ID](https://stackoverflow.com/questions/2936467/parse-youtube-video-id-using-preg-match)

```
$message = "this is an youtube video http://www.youtube.com/watch?v=w6yF_UV1n1o&feature=fvst i want only the id";

$message = preg_replace('%(?:youtube(?:-nocookie)?\.com/(?:[^/]+/.+/|(?:v|e(?:mbed)?)/|.*[?&]v=)|youtu\.be/)([^"&?/ ]{11})%i', '\\1', $message);

print $message; 
```

以上印...

```
this is an youtube video http://www.w6yF_UV1n1o&feature=fvst i want only the id 
```

我想要的是：

```
this is an youtube video w6yF_UV1n1o i want only the id 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:45:51.543

首先，您将匹配一个有效的 URL，然后从该 URL 中提取一个有效的 YouTube ID，然后将找到的原始 URL 替换为匹配的 ID（如果找到了一个有效的 ID）：

```
<?php

$message = "
    this is a youtube video http://www.youtube.com/watch?v=w6yF_UV1n1o&feature=fvst i want only the id
    this is not a youtube video http://google.com do nothing
    this is an youtube video http://www.youtube.com/watch?v=w6yF_UV1n1o&feature=fvst i want only the id
";

preg_match_all('#\b(([\w-]+://?|www[.])[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))#', $message, $matches);

if (isset($matches[0]))
{
    foreach ($matches[0] AS $url)
    {
        if (preg_match('%(?:youtube(?:-nocookie)?\.com/(?:[^/]+/.+/|(?:v|e(?:mbed)?)/|.*[?&]v=)|youtu\.be/)([^"&?/ ]{11})%i', $url, $matches))
            $message = str_replace($url, $matches[1], $message);
    }
}

echo $message; 
```

资料来源：[http](http://daringfireball.net/2009/11/liberal_regex_for_matching_urls) ://daringfireball.net/2009/11/liberal_regex_for_matching_urls & [https://stackoverflow.com/a/6382259/1748964](https://stackoverflow.com/a/6382259/1748964)

# serial-port - 使用以太网时无法获得串行输出

> ID：13003299
> 
> 赞同：0
> 
> 时间：2012-10-21T23:36:21.067
> 
> 标签：serial-port, arduino, ethernet

我开始尝试使用 Arduino 以太网扩展[板](http://www.arduino.cc/en/Main/ArduinoShields)并毫不费力地让它工作。但是，当我尝试通过板的硬件串行端口进行调试时，我什么也得不到，虽然程序仍然运行，我知道它应该给我一些东西，但它没有。说实话，我不知道发生了什么。我该如何解决这个问题？

PS 我正在使用 Arduino IDE 中包含的示例草图之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:20:18.580

Arduino 以太网板不等同于 Arduino Uno + Etherent shield。在 Arduino 以太网板上没有 USB 转串口芯片。

来自官方[Arduino 以太网板页面](http://arduino.cc/en/Main/ArduinoBoardEthernet)

> 以太网与其他板卡的不同之处在于它没有板载 USB 转串口驱动芯片，但具有 Wiznet 以太网接口。

所以我认为你不能在串行监视器中打印任何值。

**更新**：

您需要一个外部 FTDI 适配器，例如[http://arduino.cc/en/Main/USBSerial](http://arduino.cc/en/Main/USBSerial)才能使 Arduino 和您的计算机之间的串行通信正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:52:07.480

以太网屏蔽不使用 RX 和 TX 引脚 (0,1)，我之前个人使用过与屏蔽的串行通信。

所以它肯定与你的代码有关。你可以发布你的代码吗？

你还把任何东西连接到数字引脚 0 和 1 上吗？

# linux - 使用 shell 命令的返回值作为 shell 脚本中的值？

> ID：13003300
> 
> 赞同：7
> 
> 时间：2012-10-21T23:36:30.007
> 
> 标签：linux, shell

> **可能重复：**
> [将多行输出捕获到 bash 变量](https://stackoverflow.com/questions/613572/capturing-multiple-line-output-to-a-bash-variable)

例如，我想运行 ls 命令并将返回列表作为保存在 shell 脚本中的数组中的值。

就像是

跑

```
#ls
fileA
fileB
fileC 
```

将此返回列表保存在一个保存数组的变量中

```
variable A = ["fileA","fileB","fileC"]; 
```

由于我不知道如何编写 shell 脚本，因此我无法给出代码的确切符号。等我学会了，我会的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T23:45:22.397

```
#!/bin/bash
variableA=$(ls)
echo $variableA 
```

假设你有这应该是你的 shell 脚本`bash`

然后，您需要做的就是`chmod +x shell_script`使其可执行。

如果你使用`ls > contents.file`的结果`ls`被保存到一个名为`contents.file`. 请记住，在追加到最后一行`>`时重写整个文件。`>>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T23:41:51.383

```
variableA=$(ls)
echo "$variableA" 
```

# mysql - 下面的mysqli更新语句是否正确

> ID：13003305
> 
> 赞同：-1
> 
> 时间：2012-10-21T23:36:58.747
> 
> 标签：mysql, mysqli

我在下面有一个 mysql UPDATE 查询：

```
$createDate = mktime(0,0,0,10,21,date("Y"));
$selectedDate =  date('d-m-Y', ($createDate));
    $sql = mysql_query("UPDATE Session SET Active = 0 WHERE DATE_FORMAT(SessionDate,'%Y-%m-%d' ) <= '".$selectedDate."'"); 
```

我想更改它以便可以使用 mysqli，我想知道下面的代码是否正确，我正在使用 CRON，但我无法确定它是否工作，所以我想知道下面的代码是否完全正确：

```
$createDate = mktime(0,0,0,10,21,date("Y"));
$selectedDate =  date('d-m-Y', ($createDate));
$sql = "UPDATE Session SET Active = ? WHERE DATE_FORMAT(SessionDate,'%Y-%m-%d' ) <= '".?."'";                                           
                    $update = $mysqli->prepare($sql);
                    $update->bind_param("is", 0, $selectedDate);
                    $update->execute(); 
```

上面的代码正确吗？我不确定是否是第二个？是正确的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:49:44.470

准备好的语句中的占位符不被引用，您可以将该语句简化为

```
"UPDATE Session SET Active = ? WHERE DATE_FORMAT(SessionDate,'%Y-%m-%d' ) <= ?" 
```

但是你的以下陈述让我担心：

> 我正在使用 CRON，但我无法确定它是否有效

您应该始终编写测试用例（小型独立程序）来测试程序的功能，并针对测试表或测试数据库运行它。投入在测试上的时间总会得到回报。有很多关于测试和 php 的材料，例如[这里，关于使用 php 进行单元测试](http://devzone.zend.com/1115/an-introduction-to-the-art-of-unit-testing-in-php/)

# apache - .htaccess 将查询字符串重写为路径

> ID：13003319
> 
> 赞同：12
> 
> 时间：2012-10-21T23:41:51.520
> 
> 标签：apache, .htaccess, mod-rewrite

我已经搜索了这个问题，但我只遇到了非常具体的答案，这些答案似乎很难适应我的特定需求。

假设我试图重写的 URL 是这样的：

```
http://www.example.org/test.php?whatever=something 
```

我想重写它，使它看起来像这样：

```
http://www.example.org/test/something 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-22T00:00:00.743

为了路由像`/test/something`内部重写这样的请求以便提供内容`/test.php?whatever=something`，您将在文档根目录的 htaccess 文件中使用这些规则：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?test/(.*?)/?$ /test.php?whatever=$1 [L] 
```

为了将查询字符串 URL 重定向到更好看的 URL：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /test\.php\?whatever=([^\&\ ]+)
RewriteRule ^/?test\.php$ /test/%1? [L,R=301] 
```

# java - JavaFX如何改变阶段

> ID：13003323
> 
> 赞同：13
> 
> 时间：2012-10-21T23:42:30.337
> 
> 标签：java, netbeans, javafx, scene, scenebuilder

我正在使用带有 Scene Builder 1.0 的 Netbeans 7.2 来开发 JavaFX 应用程序。我已经设置了我的主屏幕，我想要它，所以我点击一个按钮，它会关闭主窗口并打开另一个。主 Stage 对象位于主类中，但控制器类是独立的，由于它不是静态的并且在不同的类中，因此无法访问它。如何更改场景或舞台？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-22T00:28:20.817

[下载 JavaFX 示例](http://www.oracle.com/technetwork/java/javase/overview/javafx-samples-2158687.html)找到项目 FXML-LoginDemo ，这就是您所需要的。为了快速参考，我在这里复制粘贴主要的 java 类；）

```
/*
 * Copyright (c) 2008, 2011 Oracle and/or its affiliates.
 * All rights reserved. Use is subject to license terms.
 *
 * This file is available and licensed under the following license:
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 *  - Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *  - Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in
 *    the documentation and/or other materials provided with the distribution.
 *  - Neither the name of Oracle Corporation nor the names of its
 *    contributors may be used to endorse or promote products derived
 *    from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
package demo;

import demo.model.User;
import demo.security.Authenticator;
import java.util.logging.Level;
import java.util.logging.Logger;
import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.fxml.JavaFXBuilderFactory;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;

/**
 * Main Application. This class handles navigation and user session.
 */
public class App extends Application {
    private Stage stage;
    private User loggedUser;

    private static App instance;

    public App() {
        instance = this;
    }

    public static App getInstance() {
        return instance;
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        launch(args);
    }

    @Override public void start(Stage primaryStage) {
        try {
            stage = primaryStage;
            gotoLogin();
            primaryStage.show();
        } catch (Exception ex) {
            Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public User getLoggedUser() {
        return loggedUser;
    }

    public boolean userLogging(String userId, String password){
        if (Authenticator.validate(userId, password)) {
            loggedUser = User.of(userId);
            gotoProfile();
            return true;
        } else {
            return false;
        }
    }

    public void userLogout(){
        loggedUser = null;
        gotoLogin();
    }

    private void gotoProfile() {
        try {
            replaceSceneContent("profile.fxml");
        } catch (Exception ex) {
            Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    private void gotoLogin() {
        try {
            replaceSceneContent("login.fxml");
        } catch (Exception ex) {
            Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    private Parent replaceSceneContent(String fxml) throws Exception {
        Parent page = (Parent) FXMLLoader.load(App.class.getResource(fxml), null, new JavaFXBuilderFactory());
        Scene scene = stage.getScene();
        if (scene == null) {
            scene = new Scene(page, 700, 450);
            scene.getStylesheets().add(App.class.getResource("demo.css").toExternalForm());
            stage.setScene(scene);
        } else {
            stage.getScene().setRoot(page);
        }
        stage.sizeToScene();
        return page;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-16T07:55:06.033

我可能在这里说类似的话，但这就是我的做法：

（在此示例中，我正在从 Login.fxml 转换为 Home.fxml）。

在 LoginController.fxml 类中，我创建了以下方法：

```
@FXML
private void login(javafx.event.ActionEvent event) throws IOException
{
    if(pwf1.getText().equals("dolphin"))
    {
            Parent blah = FXMLLoader.load(getClass().getResource("Home.fxml"));
            Scene scene = new Scene(blah);
            Stage appStage = (Stage) ((Node) event.getSource()).getScene().getWindow();
            appStage.setScene(scene);
            appStage.show();
    }
    else
    {
            label1.setText("Password is incorrect. Please Try Again");
    }
} 
```

就是这样。;)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-13T06:58:39.560

你也可以这样做：

以这种方式修改你的controller.java

```
Stage thisStage;

public void setStage (Stage stage){
    thisStage = stage;
}

public void showStage(){
    thisStage.setTitle("Titel in der MainController.java geändert");
    thisStage.show();
} 
```

重要的是不要在初始化方法中使用 thisStage。

以这种方式修改您的 Mainclass：

```
@Override
public void start(Stage stage) throws Exception {
    URL location = getClass().getResource("Main.fxml");
    FXMLLoader fxmlLoader = new FXMLLoader();
    fxmlLoader.setLocation(location);
    fxmlLoader.setBuilderFactory(new JavaFXBuilderFactory());
    Parent root = (Parent) fxmlLoader.load(location.openStream());
    Scene scene = new Scene(root);
    stage.setScene(scene);
    MainController mainController = fxmlLoader.getController();
    mainController.setStage(stage);
    mainController.showStage();
} 
```

[您可以在此处](http://jacktoolsnet.de/myfaq/images/JavaFX/projekte/controllerwithstage.zip)下载示例项目 (netbeans) 。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-19T10:41:44.043

根据您的问题，最近我正在为 JavaFX 开发一个 iOS 等效 NavigationController，使用推送和关闭视图的最简单的想法。

让我与社区分享代码：[https ://github.com/jalopezsuarez/javafx-screens](https://github.com/jalopezsuarez/javafx-screens)

这个想法是有一个非常简单的环境来帮助您在屏幕之间切换。

希望它可以帮助你。

# python - python基本语法布尔比较

> ID：13003324
> 
> 赞同：0
> 
> 时间：2012-10-21T23:42:41.567
> 
> 标签：python, python-2.7

我对以下代码有疑问

```
 smaller={}
 for( dest in a[neigbour].keys())

    if(dest in smaller.keys() == False):
        print 'false'
    } 
```

我无法打印此代码`false`..我做错了吗？我想知道我是否在做正确的事情来检查声明`dest in smaller.keys() == False`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T23:45:44.660

的对立面`dest in smaller.keys()`是`dest not in smaller.keys()`。无需比较`False`or `True`：

```
if (dest not in smaller.keys()): 
```

`in`和文档`not in`：[http ://docs.python.org/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange](http://docs.python.org/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T23:46:15.220

你的 Python 语法很混乱。一方面，您需要一个`:`after语句，并且在 Python 中`for`的循环周围使用大括号通常不是惯用的。`for`此外，通常我们使用，而不是`False`与 with进行比较：`==``not`

```
smaller = {}
for dest in a[neighbour].keys():
    if dest not in smaller.keys():
        print('false') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T09:20:37.200

除了您得到的其他答案外，代码还可以写成：

```
for key in a[neighbour].viewkeys() - smaller.viewkeys():
    print key, 'not found' 
```

它利用了类似的行为来轻松地在not in 中`.viewkeys`创建一组所有键，然后对其进行循环。`a[neighbour]``b`

# ios - 支持 XML 上的表情符号

> ID：13003328
> 
> 赞同：3
> 
> 时间：2012-10-21T23:43:06.103
> 
> 标签：ios, xml, emoji

好吧，我正在创建一个聊天应用程序，但检索模式是 xml，如果有人发送表情符号，则 xml 无法识别它，它显示为“？” 符号我希望有人能帮我解决这个问题：）谢谢圣地亚哥

# php - php调整图像大小然后将其切成碎片并显示它，不起作用

> ID：13003332
> 
> 赞同：0
> 
> 时间：2012-10-21T23:43:44.053
> 
> 标签：php, image

我正在制作一个有趣的网站，但我似乎无法弄清楚为什么这段代码不起作用：

```
// error control
ini_set('display_errors', 'On');
error_reporting(E_ALL | E_STRICT);
// loading in the image.
$img = imagecreatefromjpeg(".\image\ons\Ons-foto\mayor.jpg");

if($img != null){
    $width = imagesx($img);
    $heigth = imagesy($img);
    $calw = 134*7;
    $calh = 122*7;
    $newimg = null;
    if($width != null && $heigth != null){

        // a check to see if the image is the right size

        if($width > $calw || $width < $calh || $heigth < $calh || $heigth > $calh)
        {
        // here i save the resized image into the variable $newimg

        imagecopyresized($newimg, $img, 0,0,0,0, $calw, $calh, $width, $heigth);
        } else {
        $newimg = $img;
        }
        $tempimg = null;
        // a nested loop to automatically cut the image into pieces

        for($w = 0; $w < $calw; $w+134){
            for($h = 0; $h < $calh; $h+122){
                // taking a piece of the image and save it into $tempimg

                imagecopy($tempimg, $newimg, 0, 0, $w, $h, 134, 122);

                // showing the image on screen
                echo '<div class="blokken" style="margin: 1px;">';
                imagejpeg($tempimg);             
                echo '</div>';
            }
        }
    }
} 
```

我想做的是：

1.  加载图像并将其调整为正确的大小。
2.  把它切成小块
3.  一块一块地展示它，它们之间有一点空间（我在 .css 文件中这样做，因此是 div 标签）

这些是我得到的错误：

```
Warning: imagecopyresized(): supplied argument is not a valid Image resource in root\ons.php on line 52

Warning: imagecopy(): supplied argument is not a valid Image resource in root\ons.php on line 63

Warning: imagejpeg(): supplied argument is not a valid Image resource in root\ons.php on line 67

Warning: imagecopy(): supplied argument is not a valid Image resource in root\ons.php on line 63 
```

* * *

我认为这些函数可能需要图像的路径，因此我还尝试制作调整大小的图像以及被剪切以保存在此地图中的图像 .\image\ons\Ons-foto\ 但这并没有工作。它没有保存图像，也没有将它们加载回以在屏幕上显示它们。

它也可能是 imagecreatefromjpeg() 没有输出我认为它输出和保存的内容，`$img`但`fopen()`也没有工作并且给出了同样的错误，所以我无法弄清楚

有人可以看看这个并告诉我为什么它不起作用吗？给那些做的人，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T23:46:09.187

您需要先创建`$newimg`并`$tempimg`复制到其中。所有其他错误都来自这个问题。

# mysql - 子查询只返回一个值

> ID：13003333
> 
> 赞同：1
> 
> 时间：2012-10-21T23:43:45.887
> 
> 标签：mysql, sql

我有这个查询。

```
SELECT 
  d.gid, d.channel_id
FROM channels, (
  SELECT 
      gigs.id as gid, gigs.channel_id
    FROM gigs
    ORDER BY gigs.id DESC
    LIMIT 1
) as d
WHERE d.channel_id = channels.id
LIMIT 10 
```

我希望`gid`每个都得到一个`channels.id`，但它只返回一列。这是为什么？

演出桌

```
+---------+------------+
| id      | channel_id |
+---------+------------+
| 150661  | 6          |
| 745797  | 6          |
| 483996  | 6          |
| 3407209 | 6          |
| 1175022 | 5          |
| 3238459 | 6          |
| 711413  | 5          |
| 524758  | 5          |
| 154764  | 5          |
| 1594779 | 5          |
| 1659091 | 2          |
| 1086768 | 6          |
| 1161320 | 8          |
| 467394  | 5          |
| 2877040 | 8          |
| 2705821 | 6          |
| 1881747 | 5          |
| 901902  | 1          |
| 143322  | 6          |
| 671658  | 1          |
+---------+------------+ 
```

频道表

```
+----+
| id |
+----+
| 1  |
| 2  |
| 3  |
| 4  |
| 5  |
| 6  |
| 7  |
| 8  |
| 9  |
| 10 |
+----+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:46:45.343

试试这个，

```
SELECT  a.id, b.max_ID
FROM    channels a
        INNER JOIN
        (
            SELECT channel_ID, MAX(id) max_ID
            FROM gigs
            GROUP BY channel_ID
        ) b ON a.id = b.channel_ID 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/5f2e1/1)

基本上，我曾经`INNER JOIN`只显示`channels`表中至少有记录的`gigs`表中的 id。如果即使`gigs`表上没有匹配项也要显示列表，那么您应该使用`LEFT JOIN`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-22T00:11:34.970

```
SELECT id, (SELECT id FROM Gigs WHERE channel_id = c.id ORDER BY id DESC LIMIT 1) As GigID

FROM channels c 
```

# iphone - 保存到 Plist 时防止重复

> ID：13003337
> 
> 赞同：0
> 
> 时间：2012-10-21T23:44:43.870
> 
> 标签：iphone, objective-c, ios

我设法成功地将数据保存到 plist（在本例中为书签列表），但我似乎无法弄清楚如何防止用户两次保存相同的数据。我正在使用“moveRowAtIndexPath”重新排序书签。当列表中有重复项时，会在排序过程中导致崩溃。这是我的代码：

```
- (IBAction)addBookmarkButtonClicked:(id)sender {

NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsPath = [paths objectAtIndex:0];
NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"Bookmarks.plist"];
NSMutableArray *bookmarksArray = [NSMutableArray arrayWithContentsOfFile:plistPath];

if (nil == bookmarksArray) {
    bookmarksArray = [[NSMutableArray alloc] initWithCapacity:0];
}

NSMutableDictionary *array = [[NSMutableDictionary alloc]init];

[array setObject:gameName.text.self forKey:@"gameName"];
[array setObject:gameRating.text.self forKey:@"gameRating"];

[bookmarksArray addObject:array];
[bookmarksArray writeToFile:plistPath atomically: TRUE];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:10:19.857

在将项目添加到 BookmarksArray 之前，您应该检查它是否已经存在。您可以通过遍历 BookmarksArray 中的所有项目并将每个项目的键与您尝试添加的新值进行比较来做到这一点。例子：

```
BOOL itemExist, sameName, sameRating;
itemExist=NO;
sameName=NO;
sameRating=NO;

For (int i=0, i<[bookmarksArray count], i++) {
    If ([gameName.text isEqualToString:[[bookmarksArray itemAtIndex:i] itemForKey:gameName]]) {
        sameName=YES;
    }
    If ([gameRating.text isEqualToString:[[bookmarksArray itemAtIndex:i] itemForKey:gameRating]]) {
        sameRating=YES;
    }
    if (sameName && sameRating) itemExist=YES;
    sameName=NO;
    sameRating=NO;
}

if (!itemExist) { 
   //item can be added
} 
```

# bash - 如何编写一个重复 Java 程序特定次数的 shell 脚本？

> ID：13003339
> 
> 赞同：2
> 
> 时间：2012-10-21T23:45:05.263
> 
> 标签：bash, shell

本质上，我正在寻找编写一个 shell 脚本，可能使用一个 for 循环，这将允许我多次重复程序调用而不必手动执行（我不知道如何解释这一点，但我想在 cmd 窗口中多次执行 java TestFile.java 命令，无需手动执行）。

我正在尝试用 bash 为 UNIX shell 编写它，如果这有帮助的话。

我的程序输出一组数字，我想查看这些数字来分析最终行为，因此我需要对许多不同的输入执行许多测试，并且我想简化流程。我对 shell 脚本有相当基本的了解——我今天尝试自学，但我无法真正理解 for 循环的语法或如何编写 .java 文件调用的语法，但我可以编写它们在 shell 脚本中有一点帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T23:49:26.070

这将做：

```
#!/bin/bash

javac Testfile.java # compile the program

for((i=1;i<=50;i++))
do
echo "Output of Iteration $i" >> outfile
java Testfile >> outfile
done 
```

这将编译您的 java 程序并运行 50 次并将输出存储在一个名为`outfile`. 同样，您可以将 50 更改为所需的迭代次数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T23:50:47.280

```
#!/bin/bash

for i in {1..10}
do

#insert file run command here

done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T23:54:02.620

```
#!/bin/bash

LOOPS=50
for i IN {1 .. LOOPS} 
do
   java TestFile >> out.log
done 
```

# php - 是否会编译错误“if”语句之后的代码

> ID：13003340
> 
> 赞同：1
> 
> 时间：2012-10-21T23:45:12.593
> 
> 标签：php, performance

如果我有这样的代码

```
if($abc==true) {
   //code code code
} else {
   // other code, other code
} 
```

那么是否`$abc`会`true`编译“其他代码”？

那么，如果有很多“代码”性能明智，这是否无关紧要？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T23:48:08.563

PHP 在运行时是经过解析的（因此是“编译的”）。无论可达性如何，所有代码都会被处理。例如：

```
<?php
echo "Hello, World!";
exit;
DERP!!
?> 
```

将失败并返回解析错误而不是打印“Hello, World!”，即使永远无法访问 derp。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T23:51:23.020

是的，它将被编译（实际上是读取、标记和解析）；PHP 无法知道`$abc`在运行时将采用什么值。

您可以通过在 IF 中使用 include() 来稍微减少负载（但前提是它确实是很多代码！）：

```
 if (condition)
 {
     include('true.php');
 }
 else
 {
     include('false.php');
 } 
```

但请注意，这样您将加载*两个*文件而不是一个。通常，额外文件的开销使游戏不值得付出努力。

但是，如果 IF 确实有很多很多代码，那么将其分成几个文件可能是维护方面的好主意。重构以从程序流中删除 IF 会更好！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T23:51:26.267

虽然整个代码在运行时被“解析”为错误，但代码流只会在那个“if”点朝一个方向流动，因此基本上不存在速度性能问题。

这真的不值得担心，特别是因为诸如“if”之类的流控制语句可能是编程中最重要的元素。真的，没有他们你就过不下去。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T23:57:13.567

您担心哪些性能问题？PHP 是一种解释性语言，这意味着您的文件在每次请求时都会被解析、标记和执行。无论如何，都需要对整个文件进行语法错误分析和标记化。执行什么取决于您的控制流语句，例如您的示例中的**if**。

如果您担心额外的解析，您可以根据控制流语句的结果重构代码以包含另一个文件。

```
$x = 1;
if($x === 1) {
    include_once './myFile.php';
}
else {
    // Something Else.
} 
```

虽然我真的想不出一个与性能相关的重要原因，为什么你会想要这样做。

# c++ - 处理 c++ wxWidgets EVT_MAXIMIZE 宏

> ID：13003341
> 
> 赞同：0
> 
> 时间：2012-10-21T23:45:18.980
> 
> 标签：c++, wxwidgets

我有一个（也许）简单的问题。我想在用户单击“最大化”后调整我的程序窗口的大小，因为我想将数据调整到窗口，而不留下“灰色补丁”（希望它确实有意义，哈哈，因为我来自意大利我'我不确定是不是）。问题是如果我尝试显示一条简单的消息，它就不会出现。这是我认为您需要查看我的课程的一段代码（cpp 文件）

```
void EBCFrame::OnMaximize(wxMaximizeEvent& event)
{
//    _window->Fit();
    wxMessageBox(_T("maximize test"));
}

// Event table for EBCFrame
BEGIN_EVENT_TABLE(EBCFrame, wxFrame)
    ...
    EVT_MAXIMIZE(EBCFrame::OnMaximize)
END_EVENT_TABLE() 
```

这是头文件

```
class EBCFrame : public wxFrame
{
    public:
        // Constructor
        EBCFrame(const wxString& title);
        // Event handlers
        .....
        void OnMaximize(wxMaximizeEvent& event);

    private:
        // This class handles events
        DECLARE_EVENT_TABLE()

        wxScrolledWindow* _window;
        ....
}; 
```

如果这还不够并且您需要完整的代码，我深表歉意；在这种情况下，我会在再次阅读此问题后立即提供。谢谢您的支持！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:34:41.373

从您之前的问题代码来看：[wxWidgets: can't inherit from wxListCtrl](https://stackoverflow.com/questions/12997366/wxwidgets-cant-inherit-from-wxlistctrl) ;

您似乎将 wxScrolledWindow 用于不需要的 wxListCtrl（wxListCtrl 已经管理其内容的滚动） 如果是这种情况，请从代码中删除 wxScolledWindow。

如果 wxListCtrl (EBCList) 是框架 (EBCFrame) 中唯一的客户端窗口，wxWidgets 会自动调整它的大小。

如果您同时在框架中添加了更多小部件，您可能需要查看 sizer 类来组成您的布局（例如 wxBoxSizer）。

# c# - 如何通过连接到电脑的手机从.Net应用程序发送短信

> ID：13003343
> 
> 赞同：2
> 
> 时间：2012-10-21T23:45:38.487
> 
> 标签：c#, android, iphone, .net, sms

我们有一个旧的 .Net 应用程序，它可以从连接的手机发送/接收短信，目前它使用旧的诺基亚 5110 手机发送/接收短信。它使用第三方 FBus dll 与手机通信。我们希望摆脱旧手机并使用一些最新的手机（即 Android/iPhone/WindowsPhone 等）。

我用谷歌搜索了很多，但每篇文章都建议使用某种短信网关并向其发送电子邮件以发送短信。但我们的要求是，将手机与 pc 连接并使用某种 api 通过 .Net 发送/接收短信。网上也有很多帖子建议为手机创建一个应用程序，这不是我们想要的。

任何人都可以建议一些api，我们可以将手机与电脑连接，我们可以以某种方式与手机通信。

提前致谢。

# entity-framework - 添加包含第一个对象的对象时，如何防止 EF 插入数据库中已存在的对象？

> ID：13003345
> 
> 赞同：2
> 
> 时间：2012-10-21T23:45:38.287
> 
> 标签：entity-framework, insert, ef-code-first

这是不言自明的。我有一个包含另一个的类让我们称它们为主题和教室

```
public class Subject
{
   public Classroom Class {get; set;}
} 
```

我正在使用无状态外观，这意味着我的 DbContext 在恢复对象后立即被处理，并被创建用于存储新对象。它不应该知道 Classroom 不是一个新对象，因为它的 ID 已经在数据库中了吗？使用调试器，我可以在调用 SaveChanges 方法之前跟踪到该点，而 Classroom.id 是我在数据库中拥有的那个。有什么问题？EF 添加了一个新的 Classroom，其属性与之前的完全相同，但有一个新的 PK。我在这里做错了什么？

这是用于一般 CRUD 操作的代码（它们在我的 DbContext 中）更新和删除都可以正常工作：

```
 public void Update(DbSet MySet, object Obj)
    {
        MySet.Attach(Obj);
        var Entry = this.Entry(Obj);
        Entry.State = EntityState.Modified;
        this.SaveChanges();
    }

    public void Insert(DbSet MySet, object Obj)
    {
        MySet.Add(Obj);
        this.SaveChanges();
    }

    public void Delete(DbSet MySet, object Obj)
    {
        MySet.Attach(Obj);
        var Entry = this.Entry(Obj);
        Entry.State = EntityState.Deleted;
        this.SaveChanges();
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T01:19:47.880

如果没有看到关于如何更新或创建`Subject`实体的实际代码，很难说。但是，您可能没有附加教室，因此 EF 假设实体是新的，而实际上并非如此。

```
 using (Model m = new Model())
     {
        m.Subject.Add(subject);
        m.Classrooms.Attach(subject.Class);
        m.SaveChanges();           
     } 
```

即使 PK 是相同的，如果不附加到上下文，EF 也无法弄清楚你的意图是什么。显式附加实体会告诉您的上下文您想要什么。

# python - 在 Python 中定义类方法的多种方法？

> ID：13003358
> 
> 赞同：4
> 
> 时间：2012-10-21T23:47:05.947
> 
> 标签：python, class, methods

在 Dive Into Python 中，Mark Pilgrim 说：

> 在定义你的类方法时，你*必须*明确地将 self 作为每个方法的第一个参数

然后他在代码中给出了几个例子：

```
def clear(self): self.data.clear()
def copy(self):
    if self.__class__ is UserDict:
        return UserDict(self.data)
    import copy
    return copy.copy(self) 
```

在网上浏览一些 Python 代码时，我遇到了`@classmethod`装饰器。一个例子是：

```
class Logger:
    @classmethod
    def debug(msg):
        print "DEBUG: " + msg 
```

（注意函数中没有`self`参数`debug`）

`self`使用作为第一个参数和使用`@classmethod`装饰器定义类方法有什么区别吗？如果不是，那么定义类方法的一种方法是否比另一种更常用/更受欢迎？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T23:51:51.897

`@classmethod`与定义实例方法不同。定义的函数`@classmethod`接收*类*作为第一个参数，而不是接收特定*实例*的实例方法。[有关更多信息，请参阅此处](http://docs.python.org/library/functions.html#classmethod)的 Python 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:55:16.780

self 不是，也永远不会是隐含的。

“自我不会变得含蓄。

让自我明确是一件好事。它通过消除关于变量如何解析的歧义来使代码清晰。它还使函数和方法之间的差异变小。”

[http://www.python.org/dev/peps/pep-3099/](http://www.python.org/dev/peps/pep-3099/)

# python - 计算python文件中每个类的代码行数？

> ID：13003359
> 
> 赞同：2
> 
> 时间：2012-10-21T23:47:05.643
> 
> 标签：python, inspect, lines-of-code

我正在尝试在 python 文件中查找类中的代码行数。我使用 len(inspect.getsourcelines(b)[0]) 返回文件中每个类的代码行数但是除了代码行之外，它还计算注释和文档字符串的问题..有没有办法丢弃注释和文档字符串？

```
import inspect
import foo

for a,b in inspect.getmembers(foo): 
    if inspect.isclass(b):
        print(a)
        print(len(inspect.getsourcelines(b)[0])) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T00:57:31.343

您可能只需要自己从`getsourcelines`. 如果您忽略多行注释，这仅意味着检查第一个非空白字符是否为`#`. 对于使用三引号的多行注释，您可以执行类似的操作，同时跟踪您是否在注释块中。

# jquery - 具有自动高度的 CSS3 翻转卡

> ID：13003360
> 
> 赞同：5
> 
> 时间：2012-10-21T23:47:27.900
> 
> 标签：jquery, css, height

我正在使用教程使用 CSS3 和 jQuery 创建翻转卡片效果，我在让高度调整到内容长度时遇到问题，同时它仍然在水平中心翻转。

**[小提琴。](http://jsfiddle.net/GDdtS/1100/)**

代码：

```
<div class="flip"> 
    <div class="card"> 
        <div class="face front"> 
            Front<br> Other text.<br> Other text.<br> Other text.<br> Other text.
        </div> 

        <div class="face back"> 
            Back
        </div> 
    </div> 
</div> 
```

* * *

```
body {
 background: #ccc;   
}
.flip {
  -webkit-perspective: 800;
   width: 400px;
   height: 200px;
    position: relative;
    margin: 50px auto;
}
.flip .card.flipped {
  -webkit-transform: rotatex(-180deg);
}
.flip .card {
  width: 100%;
  height: 100%;
  -webkit-transform-style: preserve-3d;
  -webkit-transition: 0.5s;
}
.flip .card .face {
  width: 100%;
  height: 100%;
  position: absolute;
  -webkit-backface-visibility: hidden ;
  z-index: 2;
    font-family: Georgia;
    font-size: 3em;
    text-align: center;
}
.flip .card .front {
  position: absolute;
  z-index: 1;
    background: black;
    color: white;
    cursor: pointer;
}
.flip .card .back {
  -webkit-transform: rotatex(-180deg);
    background: blue;
    background: white;
    color: black;
    cursor: pointer;
}​ 
```

* * *

```
$('.flip').click(function(){
    $(this).find('.card').addClass('flipped').mouseleave(function(){
        $(this).removeClass('flipped');
    });
    return false;
});​ 
```

​</p>

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-12-14T12:05:55.530

您可以通过使 .back 位置为绝对位置和 100% 高度来欺骗它。并保留 .front 相对位置。

```
.front  {position: relative;}
.back       {position: absolute; top: 0; left: 0; width: 100%; height: 100%;} 
```

注意，在某些情况下可能有用：在后面添加 2 个附加元素，用于页眉和页脚，并将页脚位置设为绝对位置并将其设置为底部 0。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T01:00:40.453

这是关于**[jsFiddle](http://jsfiddle.net/EVsR5/2/)**的有效解决方案。

JS：

```
$('.flip').click(function(){
    $(this).find('.card').addClass('flipped');
    return false;
}).mouseleave(function () {
    $('.flip > .card').removeClass('flipped');
});

var frontHeight = $('.front').outerHeight();
var backHeight = $('.back').outerHeight();

if (frontHeight > backHeight) {
    $('.flip, .back').height(frontHeight);
}
else if (frontHeight > backHeight) {
    $('.flip, .front').height(backHeight);
}
else {
    $('.flip').height(backHeight);
} 
```

定义的高度是不灵活的，所以你看到的就是你定义的。由于高度不会保持不变，因此正面或背面需要具有与最高元素匹配的定义高度。在示例中，`.front`较高，因此`.back`更新为具有相同的高度，从而可以在中心实现垂直翻转效果。

在您的示例中，`mouseleave`事件可以在动画期间触发元素。我假设您不希望这种情况发生，所以我更新了`.flipped`离开卡片时要移除的逻辑，它在整个动画中保持其高度。我还清理了 CSS 以减少冗余。希望这可以帮助！

# ruby - 操作 Ruby 哈希

> ID：13003361
> 
> 赞同：3
> 
> 时间：2012-10-21T23:47:33.253
> 
> 标签：ruby, hash, key

使用 Ruby 我需要将其转换为...

```
{"30"=>["Morgan", ["lib1", "lib2"]], 
 "31"=>["Morgan", ["lib9", "lib2", "lib3"]], 
 "32"=>["Gary", ["lib1", "lib2"]], 
 "33"=>["Morgan", ["lib1"]], 
 "34"=>["Morgan", []], 
 "35"=>["Morgan", []], 
 "36"=>["Morgan", ["lib3", "lib2"]], 
 "37"=>["jim", ["lib1"]]} 
```

进入这个...

```
{"Morgan"=>[30,31,33,34,35,36], 
 "Gary"=>[32], []=>[34,35], 
 "jim"=>[37]} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T00:19:40.410

```
input.each_with_object(Hash.new{|h,k|h[k]=[]}) do |(k,v),res|
  (v.last.empty? ? res[[]] : res[v.first]) << k.to_i
end

=> {"Morgan"=>[30, 31, 33, 36], "Gary"=>[32], []=>[34, 35], "jim"=>[37]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T00:14:43.563

```
A = {"30"=>["Morgan", ["lib1", "lib2"]], 
 "31"=>["Morgan", ["lib9", "lib2", "lib3"]], 
 "32"=>["Gary", ["lib1", "lib2"]], 
 "33"=>["Morgan", ["lib1"]], 
 "34"=>["Morgan", []], 
 "35"=>["Morgan", []], 
 "36"=>["Morgan", ["lib3", "lib2"]], 
 "37"=>["jim", ["lib1"]]}

B = Hash.new;
A.each do |k,i|
    if !B[i[0]].kind_of?(Array)
        B[i[0]] = Array.new;
    end
    B[i[0]]<<k
    puts "#{k} #{i[0]}"

end

B.each do |k,i|
    puts "#{k} #{i}"
end 
```

作为示例代码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T00:08:41.473

```
newhash={}    
hash.inver­t.each {|k,v­| newha­sh[k.first­].concat [v] } 
```

该`invert`方法对您想要做的事情很有用。但我看不出值的“lib”部分与转换有何关系。请说清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T00:08:45.520

```
def convert(input)          
    output = {}                     
    noLibKey = []                   
    input.each do |key, value|      
            number = key.to_i               
            name = value[0]                 
            libs = value[1]                 
            if libs.empty?                  
                    output[noLibKey] ||= []         
                    output[noLibKey] << number      
            end                             
            output[name] ||= []             
            output[name] << number          
    end                             
    return output                   
end 
```

# matlab - 在 MATLAB 的终端仿真模式下打印透明图形

> ID：13003364
> 
> 赞同：1
> 
> 时间：2012-10-21T23:47:42.920
> 
> 标签：matlab, matlab-figure

是否可以？下面的代码说明了我想要做什么：

```
xdata = [0 1 2];
ydata = [0 1 0];
h = patch(xdata,ydata,'w');
set(h, 'FaceAlpha', 0.2);
print -dpng myfig 
```

如果我使用选项启动 MATLAB`-nodisplay`并运行上面的代码，MATLAB 只会给我一个核心转储。我认为 MATLAB 的行为应该比没有进一步解释的崩溃好一点，但我知道这是因为 opengl 和 zbuffer 渲染器在终端仿真模式下都不可用。

我通过以格式绘制透明数字来解决这个问题，`.svg`但这对我来说不是一个理想的解决方案。我的 MATLAB 脚本正在生成带有许多嵌入式图形的 HTML 报告，并且大多数浏览器在呈现包含多个（相对复杂的）.svg 图像的页面时性能很差。那么，有人知道更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:58:25.310

`.svg`此问题的间接解决方案是使用[plot2svg()](http://www.mathworks.com/matlabcentral/fileexchange/7401)将透明图形打印到文件中，然后使用[Inkscape](http://inkscape.org/)将`.svg`文件转换为`.png`或[Inkscape](http://inkscape.org/)`.pdf`支持的任何其他格式。Inkscape 提供了非常好的[命令行支持](http://inkscape.org/doc/inkscape-man.html)，因此您可以轻松地从 MATLAB 编写整个过程的脚本。Inkscape 适用于 Windows、Linux 和 Mac OS X。

# arrays - 为什么 lisp 中列表的排序比数组快？

> ID：13003366
> 
> 赞同：1
> 
> 时间：2012-10-21T23:47:54.530
> 
> 标签：arrays, list, lisp

我认为在顺序处理序列时我应该更喜欢列表，如果我需要随机访问元素，我更喜欢数组。

所以，我写了几行代码来确认我的想法。首先，我写了一个函数来测试多点。它显示它在列表中运行得更快。

但后来我尝试了排序功能。由于排序函数需要随机访问元素，我希望它在数组中运行得更快。但结果适得其反。

```
(defun test-performance-map-mapcar ()
  (let* ((lst (generate-random 1000000))
     (arr (lst-to-arr lst)))
    (time (atom (sort lst #'>)))
    (time (atom (sort arr #'>))))) 
```

那么，是排序函数应用某种算法来适应列表还是列表真的比lisp中的数组更有效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:33:25.527

我无法重现它。

在 LispWorks 中，对随机数向量进行排序比对随机数列表进行排序要快。

```
(defun test ()
  (let* ((list (loop repeat 10000000 collect (random 1000000)))
         (vector (coerce list 'vector)))
    (time (sort list #'>))
    (time (sort vector #'>))
    (values))) 
```

例子：

```
CL-USER 9 > (test)
Timing the evaluation of (SORT LIST (FUNCTION >))

User time    =        8.697
System time  =        0.027
Elapsed time =        8.626
Allocation   = 170168 bytes
145 Page faults
Timing the evaluation of (SORT VECTOR (FUNCTION >))

User time    =        5.951
System time  =        0.018
Elapsed time =        5.904
Allocation   = 120512 bytes
86 Page faults 
```

向量为 5.951 秒，而列表为 8.697 秒。

在 Common Lisp 中，一维数组就是向量。`SORT`也不适用于其他多维数组。

```
CL-USER 10 > (vector 'a 'b 'c)
#(A B C)

CL-USER 11 > (describe *)

#(A B C) is a (SIMPLE-VECTOR 3)
0      A
1      B
2      C

CL-USER 12 > (arrayp **)
T

CL-USER 13 > (typep (vector 'a 'b 'c) '(array symbol (3)))
T 
```

因此，三个符号的向量也是一个长度为 3 且元素类型为 3 的一维数组`SYMBOL`。

对于我的示例（带有 Intel i7 处理器的 Apple Macbook Air）：

```
Implementation   | faster | seconds
-----------------+--------+--------
LispWorks 64bit  | vector |  5.951
Clozure CL 64bit | vector |  6.727
SBCL 1.1 64bit   | list   |  8.890
CLISP            | list   | 42.968 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T01:13:49.073

除了已经说过的关于数组与列表的内容之外，没有“最快”排序算法之类的东西。这最终取决于您要对哪些数据进行排序。一些算法在包含相似值的集合上表现更好，而另一些算法在包含接近排序值的集合上表现更好。

在实践中，可能存在其他复杂情况，例如在排序期间创建的额外 cons 或在数组排序期间分配的额外内存。需要调用 GC 的东西，这绝对可以扭转潮流。

每当您遇到需要排序的特定实际问题时，您都需要考虑具体情况以及您将处理的数据类型。例如，在渲染动画时对 3 维空间中的 Z 顶点进行排序可能最受益于对链表和几乎排序的数据进行操作的算法，气象研究数据的排序可能会受益于最能处理的算法以前未排序的主要是唯一数据。一些特定的软件可以进行向量化插入排序，这将比每个操作算法的任何单个值快很多倍，依此类推。

对一组随机数进行排序通常不能很好地表明您的代码将如何处理实际数据。

# c# - 如何使用延迟执行进行测试？

> ID：13003377
> 
> 赞同：1
> 
> 时间：2012-10-21T23:49:47.580
> 
> 标签：c#, unit-testing

我的班级有一个`IEnumerable<IDomainInterface>`传递，我想测试是否为每个项目调用了特定方法：

```
// in class
var result = _items.SelectMany (x => x.Get (something));

// in test
domainInterfaceMock.Expect(x => x.Get (something)); 
```

只有当我附加`ToArray()`到`SelectMany()`语句时，测试才会通过......

我应该如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:04:47.333

这是因为 Get() 仅在评估 LINQ 表达式时调用（即迭代）。如果您在班级中的方法正在调用 Get() 它必须做的不仅仅是

```
var result = _items.SelectMany (x => x.Get (something)); 
```

...因为这本身不会导致对 Get() 的任何调用。您应该修改测试以反映这一点。

**更新：** 您正在测试该方法，因此您应该模拟该方法的输入并将它们传递给实际方法，并测试对这些输入和结果的期望。如果该方法评估 LINQ 表达式本身，那么您会发现它调用 Get()，但是如果它不评估 LINQ 表达式本身，那么您通过强制使用 .ToArray() 进行评估是在做正确的事情。

更准确地说，通过调用 .ToArray() 您试图证明该方法的返回值是您所期望的，但要直接执行此操作，您必须分析返回的表达式。如果您要证明的唯一事实是表达式为其所有成员调用 Get() ，那么您所做的就是实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T23:58:21.210

如果 x 是可模拟的（即它是一个接口或抽象类），那么您可以验证对于您创建的每个模拟的 x 实例，调用 Get() 方法。

# javascript - 将字符串传递给格式化 JSON jquery 的函数

> ID：13003381
> 
> 赞同：0
> 
> 时间：2012-10-21T23:50:04.707
> 
> 标签：javascript, jquery, json

我觉得这很简单，但是，我很难让它吐出**undefined以外的任何东西**

我希望能够获取将字符串传递给函数的 JSON 对象。这可以通过如下功能实现吗？

```
var dashboardData= {
"Dashboard": 
{
    "Total_Downloads":95,
    "Unique_Downloads":30,
    "Campaign_Threshold":1000,
    "Downloads_By_Date":[
        {"Downloads":6,"Date":"9/6/2012 12:00:00 AM"},
        {"Downloads":2,"Date":"9/7/2012 12:00:00 AM"},
        {"Downloads":9,"Date":"9/20/2012 12:00:00 AM"},
        {"Downloads":2,"Date":"9/22/2012 12:00:00 AM"},
        {"Downloads":6,"Date":"9/23/2012 12:00:00 AM"},
        {"Downloads":10,"Date":"9/24/2012 12:00:00 AM"},
        {"Downloads":1,"Date":"9/26/2012 12:00:00 AM"},
        {"Downloads":1,"Date":"9/29/2012 12:00:00 AM"},
        {"Downloads":3,"Date":"10/2/2012 12:00:00 AM"},
        {"Downloads":4,"Date":"10/5/2012 12:00:00 AM"},
        {"Downloads":1,"Date":"10/6/2012 12:00:00 AM"},
        {"Downloads":2,"Date":"10/8/2012 12:00:00 AM"},
        {"Downloads":4,"Date":"10/9/2012 12:00:00 AM"},
        {"Downloads":3,"Date":"10/10/2012 12:00:00 AM"},
        {"Downloads":1,"Date":"10/12/2012 12:00:00 AM"},
        {"Downloads":27,"Date":"10/16/2012 12:00:00 AM"},
        {"Downloads":2,"Date":"10/17/2012 12:00:00 AM"},
        {"Downloads":1,"Date":"10/19/2012 12:00:00 AM"},
        {"Downloads":1,"Date":"10/20/2012 12:00:00 AM"},
        {"Downloads":9,"Date":"10/21/2012 12:00:00 AM"}
    ],
  }
};

        function formatJSON(source, key1, key2) {

            var i, l,
                dest = [],
                row;

            for(i = 0, l = source.length; i < l; i++) {
                row = source[i];      

                 dest.push('[' + row.key1, row.key2 + ']');

            }

            return '[' + dest + ']';

        }

var downloads= formatJSON(dashboardData.Dashboard.Downloads_By_Date,'Downloads','Date');     

var output="<ul>";
output+="<li>" + dashboardData.Dashboard.Total_Downloads + "</li>";

output+="</ul>";
document.getElementById("placeholder").innerHTML=downloads; 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T00:22:48.303

[`JSON.stringify`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)本身有一些格式化选项。例如，您可以通过将“4”作为第三个参数将其缩进 4 个空格：[Demo at jsfiddle.net](http://jsfiddle.net/sja4p/2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T00:23:01.910

您要求的是行对象的 key1 和 key2 属性，而不是键所代表的属性。

dest.push('[' + row[key1] + ',' + row[key2] + ']');

# python - 如何使用 python 包装器在 opencv 中正确使用网络摄像头？

> ID：13003382
> 
> 赞同：0
> 
> 时间：2012-10-21T23:50:30.517
> 
> 标签：python, opencv

目前，我有这个工作示例：

```
import cv

capture = cv.CaptureFromCAM(0)

cv.NamedWindow('image')

while True:

    frame = cv.QueryFrame(capture)
    cv.ShowImage('image', frame)

    k = cv.WaitKey(10)

    if k % 256 == 27:
        break

cv.DestroyWindow('image'); 
```

但是，资源没有正确释放。这篇[文章](https://stackoverflow.com/a/6974470/1094999)建议使用`del(capture)`，但是，在[这个](https://stackoverflow.com/a/9770328/1094999)其他建议使用`cvReleaseCapute`（但我找不到那个功能）。

释放捕获的正确方法是什么？

这是我的opencv版本：

```
In [4]: from cv2 import __version__
In [5]: __version__
Out[5]: '$Rev: 4557 $' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:10:04.870

使用`cv2.VideoCapture`and `capture.release()`(`cv2`代替`cv`)

```
import cv2, cv

capture = cv2.VideoCapture(0)   

flag, im_array = capture.read()

image = cv.fromarray(im_array)

cv.SaveImage('output.jpeg', image)

capture.release()                   # release it 
```

# javascript - 如何根据另一个属性更改特定位置的 JSON 对象？

> ID：13003383
> 
> 赞同：2
> 
> 时间：2012-10-21T23:50:43.353
> 
> 标签：javascript, jquery, json

```
{
  "employees": [
    { "firstName":"John" , "lastName":"Doe" }, 
    { "firstName":"Anna" , "lastName":"Smith" }, 
    { "firstName":"Peter" , "lastName":"Jones" }
  ]
} 
```

我们如何更改约翰的姓氏？（不知道是Doe）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T23:58:19.353

您可以使用`$.each`实用程序功能：

```
$.each(obj.employees, function(i, v){
   if (v.firstName === 'John') {  
       v.lastName = 'newValue'
       // return false
   }
}) 
```

[http://jsfiddle.net/g7tzK/](http://jsfiddle.net/g7tzK/)

* * *

您也可以使用本机`for`循环。

```
for (var i = 0; i < obj.employees.length; i++) {
   if (obj.employees[i].firstName === 'John') {
      obj.employees[i].lastName = 'newValue';
      return false;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T00:12:19.187

不需要 jQuery：

```
for(var i in obj.employees)
{
    if(obj.employees[i].firstName == 'John')
    {
            obj.employees[i].lastName = "newValue";
    }
} 
```

# ios - UIActionSheet 调用了两次？

> ID：13003384
> 
> 赞同：1
> 
> 时间：2012-10-21T23:50:46.300
> 
> 标签：ios, uiactionsheet

我的应用程序只是像这样调用一个 UIActionSheet：

```
UIActionSheet *dataCopySheet = [[UIActionSheet alloc] initWithTitle:@"Copy Element     Information" delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Name", @"Melting Point", @"Boiling Point", @"Atomic Mass", @"Density", @"Discovery Info", @"Save Image", nil];
[dataCopySheet showInView:detailView]; 
```

出于某种原因，由此显示了两个 UIActionSheets（一个出现在另一个之上）。难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T01:08:24.037

好的，想通了...我从 UILongPressGestureRecognizer 调用了操作表，它被调用了两次。我将其更改为 UITapGestureRecognizer，现在它只调用一次，效果很好。UILongPressGestureRecognizer 的奇怪问题。

# objective-c - 如何通过编写 Objective-C 代码来动态更改 Interface Builder xib 文件？

> ID：13003387
> 
> 赞同：1
> 
> 时间：2012-10-21T23:50:55.640
> 
> 标签：objective-c, ios, xcode, interface-builder, xib

今天我正在为 iOS 编写我的第一个“Hello World”应用程序。我想知道如何`.xib`以类似于 Android`XML`布局文件的方式以编程方式操作文件`XAML`？我还希望 Interface Builder 动态显示更改。例如，我有一个`.xib`文件`"LoginPageView.xib"`，其中有我通过`Interface Builder`构造函数添加的按钮和其他控件，然后我将其连接到文件中`.xib`的私有。现在我想以编程方式添加一个新按钮：或者我想更改按钮的背景等等。`class extension``"LoginPageViewController"``.m``UIButton *button = [[UIButton alloc] initWithCGRect:...];`

我知道的唯一方法是在方法中实现它，`viewDidLoad`但如果我这样做，我的更改将仅在程序运行时显示，我希望 Interface Builder 在编译之前动态显示这些更改。所以问题是 Xcode IDE 中是否有某种方法可以实现这一点并说明如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T00:02:55.427

简短的回答是否定的，这是不可能的。长答案是，您可以通过对 .xib 文件格式（即 XML）进行逆向工程并弄清楚如何自己编写来实现这样的事情。这将比它的价值更麻烦。

# javascript - 我有一个无效的 json 错误

> ID：13003393
> 
> 赞同：0
> 
> 时间：2012-10-21T23:51:38.573
> 
> 标签：javascript, ajax, json

代码 ：

```
var data = $.parseJSON(data); 
```

错误信息 ：

```
Uncaught Invalid JSON: {times: [{'9:30am','10:00am','10:30am','11:00am','11:30am','12:00pm','12:30pm','1:00pm','1:30pm','2:00pm','2:30pm','3:00pm','3:30pm','4:00pm','4:30pm','5:00pm'}]} 
```

我试图在 Ajax 解析为 json，

那么我不明白为什么会出现这个错误。

请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T23:53:26.817

删除`{}`数组内容周围的，并在字符串周围使用双引号。你的 JSON 应该是：

```
{"times":["9:30am","10:00am"......]} 
```

# jquery - 使用带有 onClick 功能的无限滚动时遇到问题

> ID：13003394
> 
> 赞同：1
> 
> 时间：2012-10-21T23:51:44.900
> 
> 标签：jquery, jquery-masonry

对不起我的英语不好。我有无限滚动保罗爱尔兰插件与砖石大卫德桑德罗斯插件一起使用。在我想在容器的每个元素上添加一些 onclick 函数之前，Everyting 运行良好。我的问题是 onclick 功能重复它自我购买 x，其中 x 是加载购买滚动的页面数。我想我的问题是无限滚动回调。

这是运行不佳的点击功能

```
container.find('.appende_playlist').click(function(){
     if (test_click == 0){                       
                var framesrc = $(this).parent().find('iframe:first').attr('src');
                var framesrc2 = framesrc.replace('artwork=false','artwork=true');           
                $('.playlist_players').append("<iframe src="+framesrc2+">");
                test_click++;
                alert('if');                
                }
                else{               
                alert('else');
                }
                }); 
```

就像我说的那样，当我到达第 3d 或第 4 页时，错误就开始了，这里是大厅页面

```
 jQuery(function($){
 var test_click = 0;
 var container = $('.conteneur');

    $(window).load(function(){
    container.imagesLoaded(function(){
    container.masonry({
    isAnimated:true, 
    isFitWidth:true,
    isResizable:true,     
    itemSelector: '.blog-block2',
    columnWidth: function( containerWidth ) {
    return containerWidth / 3;            
        }
      });
    });   
   $('body').scrollTo( '1px', 250 );
         }); 
```

```
 container.infinitescroll({
        navSelector  : '.pager',  
        nextSelector : '.pager a', 
        itemSelector : '.conteneur', 
        bufferPX: 20,
            loading: {
            finishedMsg: '<i>Vous êtes arrivé au bout de Lazyshake! Suivez nous sur facebook.</i>',
        msgText: '<em>Chargement des prochains articles</em>',
        animate: true,  
        img: 'http://i.imgur.com/zfnOQ.gif'         

}}, 
```

```
// Le Callback Masonry
    function( newElements ) {        
        var $newElems = $( newElements ).css({ opacity: 0 });       
        $newElems.imagesLoaded(function(){
                  $newElems.animate({ opacity: 1 });
                  container.masonry( 'appended', $newElems, true );
                var bloc = container.find('.blog-block2:first'); 
                var cssi = {width:bloc.width()};
                var cssf = null;             
                    container.find('a.thumb').click(function(e){                
                        var elem = $(this); 
                        var cls = elem.attr('href').replace('#','');

                    var fold = container.find('.unfold').removeClass('unfold').css(cssi).css('height','auto'); 
                    fold.stop();
                    var unfold = elem.parent().parent().parent().addClass('unfold').css(cssf).css('width','618'); 
                    container.masonry('reload'); 

                        if(cssf == null){
                            cssf = {
                                width : '618',
                                height: 'auto'
                            };

                        }               
                        unfold.css(cssi).animate(cssf);
                        setTimeout(function() {
                            var eTop = $('.unfold').offset().top- $(window).scrollTop();
                                        //console.log(eTop);
                                 if (eTop <= 250){
                                    $.scrollTo('.unfold', 400, {offset: {top:-150} });
                                 }
                                 else
                                 {
                                    $.scrollTo('.unfold', 400, {offset: {top:-90} });
                                 }
                        },500); 
                         e.preventDefault(); 
    });}); 
```

这是我在[http://www.lazyshake.com](http://www.lazyshake.com)上工作的网站。该功能是第一次单击图像后出现的“添加播放列表按钮”。

希望有人可以帮助我，因为我实际上失去了 3 天：s

# c# - 为什么 VB.net 和 C# 的行为不同？

> ID：13003401
> 
> 赞同：2
> 
> 时间：2012-10-21T23:52:36.250
> 
> 标签：c#, vb.net

至于我可以告诉以下两个示例在功能方面是相同的。

C＃

```
namespace ConsoleApplication4
{
 class Program
 {
  static void Main(string[] args)
  {
   var x = new Example(12);
   var y = new Example(34);
   var z = Example.Examples.One;
  }
 }
 class Example
 {
  public static class Examples
  {
   public static readonly Example Zero = new Example(0);
   public static readonly Example One = new Example(1);
  }
  public readonly Double Value;
  public Example(Double Value)
  {
   this.Value = Value;
  }
  public static Example Add(Example x, Example y)
  {
   return new Example(x.Value + y.Value);
  }
 }
} 
```

VB.net

```
Option Strict On
Module Module1

    Sub Main()

    Dim x=New Example(12)
    Dim y = New Example(34)
    Dim z=  Example.Examples.One
    End Sub

End Module

Public Class Example

  Public  Class Examples
    Public Shared ReadOnly Zero As Example
    Public Shared ReadOnly One As Example
    Public Shared ReadOnly Two As Example
    Public Shared ReadOnly MinusOne As Example
    Shared Sub new()
      Zero=New Example(0)
      One= New Example(1)
      Two = New Example(2)
      MinusOne = New Example(-1)
    End Sub
  End Class
  Public ReadOnly Value As Double
  Public Sub New(Value As Double)
    Me.Value=Value
  End Sub
  Public Shared Function Add(x As Example,y As Example) As Example
    Return New Example(x.Value+y.Value)
  End Function
End Class 
```

那么为什么我在点之后只得到 C# 中的实例方法（见下文）

```
z = Example.Examples.One. 
```

在 VB.net 中

```
Dim z = Example.Examples.One. 
```

我也得到`Examples`

到底是怎么回事？为什么有区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T23:57:24.563

出于兼容性原因，VB.Net 允许您通过实例限定符访问`Shared`( ) 方法。 不要这样做；这令人困惑。`static`

# javascript - JS中的数学运算

> ID：13003404
> 
> 赞同：0
> 
> 时间：2012-10-21T23:53:05.553
> 
> 标签：javascript, math, operation

我的代码是用来计算抵押贷款的

```
var LA = 100000;
var RA=0.07;
var YA=30;

var R = ( RA / 12);
var r = (1 + R);
var Yr = (YA * 12);
var pay = (LA * Math.exp(r,Yr)*R)/(Math.pow(r,Yr)-1); 
```

返回 224.12 美元

这是错误的，它需要支付 665.30 美元 = [ LA * r^Yr * R ] / [ r ^Yr - 1]

例如：

30 年抵押贷款 100,000 美元，利率 7% (0.07)

0.07 / 12 = 0.00583（这是 R）

30 * 12 = 360（这是 Yr）

1 + 0.00583 = 1.00583（这是 r）

付款 = [ $100,000 * (1.00583)^360 * 0.00583 ] / [ (1.00583)^360 - 1 ]

每月付款为 665.30 美元

有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T23:58:10.403

使用正确的函数：`Math.pow`而不是`Math.exp`.

此外，虽然方括号会起作用，但这只是因为 JavaScript 将数组转换为字符串，然后转换为数字。请改用括号。

# android - 映射 Android 应用程序的按钮

> ID：13003406
> 
> 赞同：1
> 
> 时间：2012-10-21T23:53:23.023
> 
> 标签：android, button, maps

我显然是应用程序开发的新手，但基本上我想做的是制作一个简单的应用程序，它有一个名为“查看地图”的按钮，按下时会打开谷歌地图。

到目前为止，我已经编写了一个带有“查看地图”按钮的应用程序，该按钮在按下时仅在按钮下方返回一些文本，如下所示。

![在此处输入图像描述](../Images/d8d8754159f287d21c448fc34a3645cc.png)

我还制作了另一个应用程序，它使用 Google Developers 的[教程](https://developers.google.com/maps/documentation/android/hello-mapview)在应用程序打开时显示 Google 地图。

当我尝试将这两个应用程序结合在一起时，我的问题就出现了。它不是在打开时仅显示按钮，而是在主屏幕中同时显示按钮和地图，如下所示：

![在此处输入图像描述](../Images/abce2448893ee0023a08cf338873bb01.png)

按下按钮时什么也不做。

我尝试做的是使用 OnClickListener 在按下按钮时加载地图，但这显然不起作用。我认为它与我的 activity_main 类有一些非常基本的关系，但我需要帮助对其进行整理，以便在加载应用程序时不会立即创建地图。

我的 activity_main 类如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<com.google.android.maps.MapView
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:apiKey="**My Key**"
    android:clickable="true"
    android:enabled="true" />

<Button
    android:id="@+id/buttonMap"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="View Map" />
</RelativeLayout> 
```

我的 MainActivity 类看起来像这样：

```
public class MainActivity extends MapActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button buttonMap = (Button) findViewById(R.id.buttonMap);
        buttonMap.setOnClickListener(mapListener);
    }

    private OnClickListener mapListener = new OnClickListener() {
        public void onClick(View v) {
            MapView mapView = (MapView) findViewById(R.id.mapView);
            mapView.setBuiltInZoomControls(true);
        }
   };

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
} 
```

任何帮助表示赞赏，欢呼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:12:56.070

好的，我认为您需要将 MainActivity 用于按钮，然后设置按钮的 OnClickListener 以触发另一个将扩展 MapActivity 的 Activity。然后，您的 MainActivity 将仅扩展 Activity。这是您的“mapListener”应包含的内容：

```
Intent i = new Intent(ctx, MyMapView.class);
// i.putExtra("key", "value"); // use this to give extra data to the new Activity
startActivity(i); 
```

在 MainActivity 中将 ctx 定义为实例变量（即在任何函数之外）并将其设置为“this”：

```
Context ctx = this; 
```

在 mapListener 中，“this”是 OnClickListener 对象本身，而不是 Activity，因此在“new Intent()”中使用“this”会导致错误。由于 mapListener 存在于 Activity 内部，因此“ctx”可以正常显示，其含义不会改变。

“mapListener.onClick”中的所有内容都应该进入新地图活动的 onCreate() 方法。

# sql - Excel VBA - 内部连接问题

> ID：13003411
> 
> 赞同：0
> 
> 时间：2012-10-21T23:54:00.517
> 
> 标签：sql, ms-access, excel, vba

我用于访问 Access 数据库中的数据的 Inner Join 语句存在问题。我期望发生的是，我遍历了每个产品的记录集。当产品订购不止一次时，我不会将其添加到 Excel 表中，而是增加订购的数量和总成本。

我遇到的问题是，它不是按照我上面描述的方式工作，而是在每次订购时将产品添加到 Excel 表中。我发现它正在按照我的代码中未包含的订购顺序（按他们的 OrderID）打印产品。

有什么帮助吗？

这是代码：

```
Public Sub WorksheetLoop()

Dim cn As New ADODB.Connection
Dim rs As New ADODB.Recordset
Dim stDB As String, stSQL As String, stSQLTwo As String, stProvider As String
Dim sheetName As String, stProdName As String
Dim suppNum As Integer, prodNum As Integer
Dim WS_Count As Integer
Dim I As Integer

suppNum = 1
prodNum = 1

stDB = "Data Source= " & ThisWorkbook.Path & "\obsDatabase.accdb"
stProvider = "Microsoft.ACE.OLEDB.12.0"

'Opening connection to database
With cn

    .ConnectionString = stDB
    .Provider = stProvider
    .Open

End With

' Set WS_Count equal to the number of worksheets in the active
' workbook.
WS_Count = ActiveWorkbook.Worksheets.Count

' Begin the loop.
For I = 2 To WS_Count

    ActiveWorkbook.Worksheets(I).Range("A1") = "Company Name - " + ActiveWorkbook.Worksheets(I).Name + ""
    ActiveWorkbook.Worksheets(I).Range("A2") = "Item Number"
    ActiveWorkbook.Worksheets(I).Range("B2") = "Description"
    ActiveWorkbook.Worksheets(I).Range("C2") = "Unit"
    ActiveWorkbook.Worksheets(I).Range("D2") = "Cost Per Unit"
    ActiveWorkbook.Worksheets(I).Range("E2") = "Quantity"
    ActiveWorkbook.Worksheets(I).Range("F2") = "Total Cost"
    ActiveWorkbook.Worksheets(I).Range("G2") = "Amount Remaining"

    'Function to retrieve info!

    stSQL = "SELECT Products.ProductID, Products.ProductName, Products.ProductDescription, Products.ProductUnit, LineItems.UnitPrice, LineItems.Quantity, LineItems.TotalPrice " & _
    "FROM Products INNER JOIN LineItems ON LineItems.ProductID = Products.ProductID WHERE Products.SupplierID = " & suppNum & " "
    rs.Open stSQL, cn

    With rs

        Do Until .EOF

            If ActiveWorkbook.Worksheets(I).Range("A65536").End(xlUp) = rs.Fields("ProductName") Then

                If ActiveWorkbook.Worksheets(I).Range("D65536").End(xlUp) = rs.Fields("UnitPrice") Then

                    ActiveWorkbook.Worksheets(I).Range("E65536").End(xlUp) = ActiveWorkbook.Worksheets(I).Range("E65536").End(xlUp) + rs.Fields("Quantity")
                    ActiveWorkbook.Worksheets(I).Range("F65536").End(xlUp) = ActiveWorkbook.Worksheets(I).Range("F65536").End(xlUp) + rs.Fields("TotalPrice")

                End If

            Else

                ActiveWorkbook.Worksheets(I).Range("A65536").End(xlUp).Offset(1, 0) = rs.Fields("ProductName")
                ActiveWorkbook.Worksheets(I).Range("B65536").End(xlUp).Offset(1, 0) = rs.Fields("ProductDescription")
                ActiveWorkbook.Worksheets(I).Range("C65536").End(xlUp).Offset(1, 0) = rs.Fields("ProductUnit")
                ActiveWorkbook.Worksheets(I).Range("D65536").End(xlUp).Offset(1, 0) = rs.Fields("UnitPrice")
                ActiveWorkbook.Worksheets(I).Range("E65536").End(xlUp).Offset(1, 0) = rs.Fields("Quantity")
                ActiveWorkbook.Worksheets(I).Range("F65536").End(xlUp).Offset(1, 0) = rs.Fields("TotalPrice")

            End If
            rs.MoveNext

        Loop

    End With

    rs.Close
    suppNum = suppNum + 1

    ActiveWorkbook.Worksheets(I).Columns("A:A").EntireColumn.AutoFit
    ActiveWorkbook.Worksheets(I).Columns("B:B").EntireColumn.AutoFit
    ActiveWorkbook.Worksheets(I).Columns("C:C").EntireColumn.AutoFit
    ActiveWorkbook.Worksheets(I).Columns("D:D").EntireColumn.AutoFit
    ActiveWorkbook.Worksheets(I).Columns("E:E").EntireColumn.AutoFit
    ActiveWorkbook.Worksheets(I).Columns("F:F").EntireColumn.AutoFit
    ActiveWorkbook.Worksheets(I).Columns("G:G").EntireColumn.AutoFit

Next I

cn.Close

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:10:53.267

我不确定我是否错过了重点。但是你能澄清你的最终目标吗？是否必须通过 Excel VBA 完成？

如果您要实现的是每个供应商订单的选项卡，每个产品有一行并且该产品的总数量，那么我会考虑在数据库本身中创建一个查询并传递供应商 id 参数和任何其他参数到查询。然后查询可以处理产品和数量的分组和计数，因为这将是一个聚合查询。

通过这种方式，您可以在每个选项卡上进行可刷新的查询，并写入 VBA 以单独或一起刷新它们，以符合您的需要。

我总是尽量避免复杂的 VBA 编码，因为它在最好的时候是错误的，并且一旦分发就变得难以维护。

另一种选择是将所有产品数据拉到另一个选项卡中，您可以通过 VBA 隐藏该选项卡并使用 SUMPRODUCT 等公式在各个选项卡上显示信息。或者使用组合样式框来选择您的供应商并动态更改结果集。

正如我在开始时所说的那样，我可能会错过重点，但如果没有，并且您需要有关我的选择的帮助，请告诉我，如果我愿意，请澄清您的问题。

对于您的 INNER JOIN 问题，您需要使用聚合查询而不是直接选择。这是因为您的数据库（我假设）可以有一个供应商可以多次订购相同的产品（一对多关系），根据您提供的内容，您在 LineItems 表中有一个数量列，所以我假设重复的产品ID 来自同一供应商的两个或多个单独的订单。这是一个查询示例，还可以考虑给表名加上别名，这样可以更轻松地跟踪代码。

```
SELECT 
 p.ProductID
,p.ProductName
,p.ProductDescription
,p.ProductUnit
,SUM(l.UnitPrice)
,SUM(l.Quantity)
,SUM(l.TotalPrice)
FROM Products p
INNER JOIN LineItems l
ON l.ProductID = p.ProductID 
WHERE p.SupplierID = 1
GROUP BY 
 p.ProductID
,p.ProductName
,p.ProductDescription
,p.ProductUnit 
```

问候凯文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T02:59:16.800

您只是将当前产品名称与添加到工作表的最后一行进行比较，但 SQL 查询中的任何内容都不会强制对结果进行任何排序。

如果数据是这样返回的，那就没问题了：

```
ProductName, Quantity

foo, 7
foo, 4
bar, 3 
```

但如果数据是这样返回的，那就不行了：

```
ProductName, Quantity

foo, 7
bar, 3
foo, 4 
```

您可以使用 ORDER BY 子句并使用当前的宏，但是正如其他人指出的那样，您可以使用 SQL 来组合数据，这应该是一个更简单的解决方案

# sql - 具有 AS 别名的不明确列引用

> ID：13003414
> 
> 赞同：5
> 
> 时间：2012-10-21T23:54:05.827
> 
> 标签：sql, postgresql, alias, ambiguous

我不确定在使用别名时如何解决不明确的列引用。

想象一下两个表，`a`它们`b`都有一`name`列。如果我加入这两个表并为结果设置别名，我不知道如何引用这`name`两个表的列。我已经尝试了一些变体，但它们都不起作用：

### 尝试 1

```
SELECT a.name, b.name
FROM (a INNER JOIN b ON a.id = b.id) AS x 
```

这不起作用`a`并且`b`超出范围。

### 尝试 2

```
SELECT x.a.name, x.b.name
FROM (a INNER JOIN b ON a.id = b.id) AS x 
```

SQL 语法不是这样工作的。

### 尝试 3

```
SELECT x.name, x.name
FROM (a INNER JOIN b ON a.id = b.id) AS x 
```

这简直是​​模棱两可！

我完全没有想法 - 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T23:55:26.533

不要用括号括起来，因为`(a INNER JOIN b ON a.id = b.id)`它不是一个完整的查询。

```
SELECT  a.name AS A_Name, 
        b.name AS B_Name
FROM    a INNER JOIN b 
           ON a.id = b.id 
```

或者（*假设*）如果你有更长的表名并且你想让它变短，

```
SELECT  a.name AS A_Name, 
        b.name AS B_Name
FROM    longTableNameA a 
        INNER JOIN longTableNameB b 
           ON a.id = b.id 
```

# java - Markdown 算法：# 后跟 enter 的序列不应该返回任何内容

> ID：13003421
> 
> 赞同：0
> 
> 时间：2012-10-21T23:55:33.927
> 
> 标签：java, markdown

所以现在我有这个方法：

```
public static String convert(String str) {

    if (str.equals("# "))
    System.out.println(" ");

Pattern pattern = Pattern.compile("(#+[^#]+)");
Matcher matcher = pattern.matcher(str);

while (matcher.find()) {
    String str1 = matcher.group(1);
    int n = str1.length() - str1.replaceFirst("#+", "").length();
System.out.println("<h" + n + ">" + str1.substring(n) + "</h" + n + ">");
}

return ("");
} 
```

当我输入 ###Le Monde # 时，它会给出 < h3>Le Monde </h3> < h1> </h1>。我希望它忽略“le monde”之后的#。基本上，我希望算法忽略一系列 # 后跟空格或返回键。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:03:52.350

在获得下一个匹配项 (str1) 后添加另一行，因此：

```
String str1 = matcher.group(1);
if(str1.replaceFirst("#+", "").length() == 0 || str1.replaceFirst("#+", "").matches("[\\s]+")) continue; 
```

这将忽略任何空格匹配。

# ios - 更改 iOS leftBarButtonItem 上的字体？

> ID：13003422
> 
> 赞同：2
> 
> 时间：2012-10-21T23:55:59.403
> 
> 标签：ios, fonts, uinavigationbar, uinavigationitem

外观协议仅更改导航栏标题的字体。

iOS 5

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T00:10:05.233

您必须为 UINavigationBar 树使用 UIBarButtonItem 的外观协议：

```
UIBarButtonItem *barButtonItemProxy = [UIBarButtonItem appearanceWhenContainedIn:
    [UINavigationBar class], [UINavigationController class], nil];

NSDictionary *textAttributes = @{
    UITextAttributeFont : [UIFont boldSystemFontOfSize:12.0f],
    UITextAttributeTextColor : [UIColor whiteColor],
    UITextAttributeTextShadowColor : [UIColor blackColor],
    UITextAttributeTextShadowOffset : [NSValue valueWithUIOffset:UIOffsetMake(0.0f, -1.0f)]
};
[barButtonItemProxy setTitleTextAttributes:textAttributes forState:UIControlStateNormal]; 
```

# ruby-on-rails - Rails：控制器中的 AJAX + 销毁操作不起作用？

> ID：13003426
> 
> 赞同：0
> 
> 时间：2012-10-21T23:56:16.053
> 
> 标签：ruby-on-rails

嗨，我目前正在制作一个包含用户、相册和照片的应用程序。当我上传图片时，我设法让 AJAX 为创建操作工作，但我无法让 AJAX 为删除工作。相反，它会将我重定向到图片的空白显示页面。谁能给我一些指导？

照片控制器：

```
def destroy
  @user = User.find(params[:user_id])
  @album = @user.albums.find(params[:album_id])
  @photo = @album.photos.find(params[:id])
  # @photo.destroy
  flash[:success] = "Photo successfully deleted."
  respond_to do |format|
    if @photo.destroy
      format.js
      # format.json { render json: @photo, status: :created, location: @photo}
      # redirect_to user_album_path(@user, @album)
    end
  end
end 
```

destroy.js.erb （我应该有这个权利？）

```
$('.destroypicswrapper').remove(".<%= @photo.avatar.url %>"); 
```

_photodestroy.html.erb 部分：

```
<div class="picthumb <%= photo.avatar.url %>">
    <%= link_to image_tag(photo.avatar.url ? photo.avatar.url(:small) : @album.name), root_url %>
    <br>
    <%= link_to "Delete", user_album_photo_path(@user, @album, photo), :remote => true, method: :delete, data: { confirm: "Are you sure? "} %>
</div> 
```

最后是最初发生删除的 albums/edit.html.erb 页面：

```
<% provide(:title, "Edit album") %>

<%= render 'form' %>

<div class="destroypicswrapper">
    <% if @album.photos.any? %>
        <%= render :partial => 'photodestroy', :collection => @album.photos, :as => :photo %>
    <% end %> 
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:29:31.943

我认为您不想将图像的完整 url 呈现为 div 类。另外，您的 Jquery 是错误的。尝试这样的事情：

销毁.js.erb

```
$('.destroypicswrapper > #photo_<%= @photo.id %>').remove(); 
```

将您的 _photodestroy.html.erb 调整为：

```
<div class="picthumb" id="photo_<%= photo.id %>"> 
```

# javascript - 如何在不更改页面的情况下更改内容（非散列 URL）？

> ID：13003429
> 
> 赞同：1
> 
> 时间：2012-10-21T23:56:59.280
> 
> 标签：javascript, ajax, url, navigation

我知道如何使用 AJAX 和远程加载内容来更改页面的内容。不过，看看[UStream 的新布局](http://ustream.tv)。点击任何视频，不仅内容会发生变化而不改变页面本身……而且整个 URL 也会发生变化。这是怎么做到的？

我知道如何使用 URL 中的主题标签，并使用 JavaScript 来检测位置的哈希值何时发生变化。例如，`site.com/#!/profile`对`site.com/#!/settings`。`#!`远程加载零件后的任何值。

但 UStream 根本不使用井号。这是如何实现的？什么伏都教在这里工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T23:58:09.073

您看到的是[HTML5 History API](http://diveintohtml5.info/history.html)。

# python - 文件爬虫 OSError

> ID：13003439
> 
> 赞同：1
> 
> 时间：2012-10-21T23:58:31.870
> 
> 标签：python, recursion, python-3.x

我希望它递归调用手动输入的文件中列出的下一个文件。它是文件中列出的第一个单词。

当前的错误消息是：

```
OSError: [Errno 22] Invalid argument: 'file1.txt\n'. 
```

这是我当前的代码：

```
import os
def crawl(fname):
infile = open(fname, 'r')
if os.stat(fname)[6]==0:
    return "Visiting {}".format(fname)
    infile.close()
else:
    print ("Visiting {}".format(fname))
    lines = infile.read().splitlines()
    nextfile = lines[0].strip()
    for line in lines:
        crawl(nextfile) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:17:49.650

我很确定问题是您在从第一个文件中读取的文件名末尾有一个换行符。`strip`您可以通过使用删除换行符的方法轻松修复它：

```
nextfile = lines[0].strip() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T00:18:06.843

尝试：

```
import os
def crawl(fname):
    with open(fname, "r") as infile:
        print("Visiting {}".format(fname))
        if os.stat(fname).st_size:
            lines = infile.read().splitlines()
            for line in lines:
                crawl(line) 
```

# android - 查询 Android SQLite 数据库时数据无效

> ID：13003441
> 
> 赞同：0
> 
> 时间：2012-10-21T23:59:13.673
> 
> 标签：android, sqlite

我有一个 SQLite 数据库，其值如下：

```
_id, airportcode, lat, lan
1, AUS, 31.0672, 97.8289
... 
```

当我在 SQLiteDatabase Browser 中打开数据库并运行时：

```
SELECT DISTINCT _id, airportcode, lat, lon FROM latlon WHERE airportcode="AUS" 
```

它返回：

```
 1, AUS, 31.0672, 97.8289 
```

在我的 Android 应用程序中，我有这个：

```
 public LatLonResult getLatLonFor(String airportCode){

    Cursor mCursor = myDataBase.query(
            true, DB_TABLE,
            new String[] {KEY_ID, KEY_AIRPORTCODE, KEY_LAT, KEY_LON},
            String.format("%s=\"%s\"", KEY_AIRPORTCODE, airportCode),
            null, null, null, null, null);

    LatLonResult result = null;
    if (mCursor != null) {
        mCursor.moveToFirst();

        result = new LatLonResult();
        result.setAirportCode(mCursor.getString(
                mCursor.getColumnIndexOrThrow(KEY_AIRPORTCODE)));

        result.setLat(mCursor.getDouble(
                mCursor.getColumnIndexOrThrow(KEY_LAT)));

        result.setLat(mCursor.getDouble(
                mCursor.getColumnIndexOrThrow(KEY_LON)));
    }

    return result;
} 
```

LatLonResult 只是 getter/setter。

但是，当我运行前面的代码时，结果具有以下值：

```
result.getAirportCode: AUS
result.getLat: 97.67
result.getLon: null 
```

纬度值错误，经度为空。

我在这里做任何明显错误的事情吗？如果没有，我还可以提供哪些其他信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:15:45.983

在列出的代码中，您有：

```
 result.setLat(mCursor.getDouble(
            mCursor.getColumnIndexOrThrow(KEY_LAT)));

    result.setLat(mCursor.getDouble( //second call to setLat
            mCursor.getColumnIndexOrThrow(KEY_LON))); 
```

我认为这应该是

```
 result.setLat(mCursor.getDouble(
            mCursor.getColumnIndexOrThrow(KEY_LAT)));

    result.setLon(mCursor.getDouble(
            mCursor.getColumnIndexOrThrow(KEY_LON))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T00:06:28.403

问题可能是列索引并不总是与您的 select 语句的顺序相同。从游标中提取数据时，您应该调用[getColumnIndex](http://developer.android.com/reference/android/database/Cursor.html#getColumnIndex%28java.lang.String%29)并将返回值传递给 getDouble 调用。

# javascript - 为什么 data-url 设置后返回未定义？

> ID：13003445
> 
> 赞同：1
> 
> 时间：2012-10-21T23:59:46.980
> 
> 标签：javascript, jquery

任何人都知道为什么我在这里设置后无法立即检索我的变量？将其分配给锚点的 data-url 属性。

```
 var myUrl = 'http://www.google.com/';

    alert('set: ' + myUrl);

    $("#tweet-link").attr('data-url', myUrl);

    alert('get: ' + $("#tweet-link").attr('data-url')); // 'get: undefined' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:20:40.340

所有可能的原因已在此处作为注释提及：未执行`$(document).ready()`或`id`错误或标记根本不存在。

当 DOM 结构未准备好时，jQuery 不会保存数据，因为元素仍然不存在。jQuery 不会显示错误，因为会假定没有选择任何项目。

```
$(function() {
  ...your code here...
}); 
```

只需添加该数据也可以使用`$("#tweet-link").data('url')`.

不需要投票......只需在答案中压缩已经完成的评论。

# php - switfmailer 发送日期

> ID：13003446
> 
> 赞同：0
> 
> 时间：2012-10-21T23:59:47.533
> 
> 标签：php, symfony

您可以在特定日期使用 SwiftMailer 发送电子邮件吗？

我有一个数据库，用于保存客户的生日，并想向他们发送问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:48:37.117

创建一个[控制台命令](http://symfony.com/doc/master/cookbook/console/console_command.html)，从数据库中获取今天过生日的用户，遍历结果集并向他们每个人发送一封电子邮件。然后设置 cron 每天调用一次此命令。

# c++ - 带指针的字符串反转 C++

> ID：13003448
> 
> 赞同：6
> 
> 时间：2012-10-22T00:00:04.407
> 
> 标签：c++, string, pointers, char, reverse

> **可能重复：**
> [为什么在写入字符串时会出现分段错误？](https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string)

我想编写一个简单的 C++ 函数，它仅通过指针算术来反转 `string`/ `char[]`。我理解这个概念并且已经输入了代码。

我有以下 .cpp 文件：

```
#include <iostream>
using std::cout;
using std::endl;

void reverse(char* target) //Requirements specify to have this argument
{
    cout << "Before :" << target << endl; // Print out the word to be reversed
    if(strlen(target) > 1) // Check incase no word or 1 letter word is placed
    {
        char* firstChar = &target[0]; // First Char of char array
        char* lastChar = &target[strlen(target) - 1]; //Last Char of char array
        char temp; // Temp char to swap
        while(firstChar < lastChar) // File the first char position is below the last char position
        {
            temp = *firstChar; // Temp gets the firstChar
            *firstChar = *lastChar; // firstChar now gets lastChar
            *lastChar = temp; // lastChar now gets temp (firstChar)
            firstChar++; // Move position of firstChar up one
            lastChar--; // Move position of lastChar down one and repeat loop
        }
    }
    cout << "After :" << target << endl; // Print out end result.
}

void main()
{
    reverse("Test"); //Expect output to be 'tseT'
} 
```

我已经多次进入调试器，但每次它都会`temp = *firstChar`在 while 循环中崩溃。它在这里冻结并导致程序停止运行并且无法完成。有什么我只是忽略了，或者有什么更深层次的东西为什么我不能这样做。

**编辑：**有一个 else 条件，但为了简洁起见，我将其删除。它是在`if`声明之后，它只是提示这个词是 1 个字符或没有输入任何词。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T00:10:08.353

问题不在于`reverse`函数，而在于调用代码。

```
reverse("Test"); 
```

字符串文字是只读的，试图修改一个会导致未定义的行为。注意编译器警告（如果没有得到任何警告，请调高警告级别）。上面的行应该生成有关从不推荐的转换`const char *`到`char *`正在执行的警告。

要修复代码：

```
int main() // <-- note the return type, int NOT void!
{
  char str[] = "Test";
  reverse( str );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T01:16:46.787

此代码将反转它两次。将循环除以二。

# wifi - 如何查看来自wifi捕获的数据？

> ID：13003449
> 
> 赞同：2
> 
> 时间：2012-10-22T00:00:13.820
> 
> 标签：wifi, wireshark, packet, wpa

我在我的家庭网络上运行 wireshark 来学习一些东西。我的网络是 wpa 并且我知道密钥，是否可以重建以太网数据包？

我知道在您连接到 wpa 后，会协商一个新密钥，我假设这是 ssl 或类似的东西，它使用公钥机制，所以我看不到它，但我想确定一下。如果它不是公钥机制并且我捕获了握手，我可以看到其余的吗？

如果网络是未加密的开放网络，我能否重建通信？

另外，我在监控模式下运行wireshark，以便获得原始wifi数据包。我是否需要担心频道或者它是否可以通过无线方式捕获所有 wifi。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:55:54.933

> 我是否需要担心频道或者它是否可以通过无线方式捕获所有 wifi。

是的，您必须将适配器上的通道设置为您期望流量的通道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T01:25:16.973

为此，您必须在自己的软件（密码/解密程序）中实现路由器的固件。您可能感兴趣的软件是 CommView 和 aircrack-ng。

# facebook - 延迟请求打开图形权限。

> ID：13003450
> 
> 赞同：0
> 
> 时间：2012-10-22T00:00:23.237
> 
> 标签：facebook, facebook-opengraph

我有一个应用程序从未请求开放图形权限张贴到墙上。
但是现在我正在集成开放图并意识到我需要请求`publish actions`.

![在此处输入图像描述](../Images/ce908ceeffcf0992a6c202d4100f233c.png)

现在，如果我将`public actions`权限添加到应用程序，facebook 如何向没有此权限的现有用户请求它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T07:13:51.730

`publish_actions`当您现有的用户返回时，如果他已经给出了其余所需的权限，它将只请求许可。

# c - 初始化互斥锁时，在简单的生产者消费者示例中出错

> ID：13003452
> 
> 赞同：1
> 
> 时间：2012-10-22T00:01:01.600
> 
> 标签：c, pthreads, posix, mutex, semaphore

> **可能重复：**
> [C++ 成员函数中的 PTHREAD_MUTEX_INITIALIZER 无法编译？](https://stackoverflow.com/questions/11666718/pthread-mutex-initializer-inside-c-member-function-cannot-compile)

我正在尝试使用 POSIX 线程和信号量来实现生产者/消费者问题，但我面临以下错误：

```
sema.c: In function ‘initialize_variables’:
sema.c:55:8: error: expected expression before ‘{’ token 
```

我检查了我的代码，但看不到该错误的归属。

这是代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>
#include <semaphore.h>

#define BUFFER_SIZE 10
#define TRUE 1

pthread_mutex_t mutex;

sem_t full, empty;

int buffer[BUFFER_SIZE];

int counter;

void* producer(void*);
void* consumer(void*);

int insert_item(void);
int remove_item(void);

void initialize_variables();

int main(int argc, char *argv[]) {

    int number_Pro;
    int number_Cons;
    int i;

    if(argc!=3){
        printf("Not enough parameters\n");
        exit(0);
    }

    number_Pro = atoi(argv[1]);
    number_Cons = atoi(argv[2]);

    pthread_t t_array_Pro[number_Pro];
    pthread_t t_array_Cons[number_Cons];

    initialize_variables();

    for(i=0; i<number_Pro; i++)
        pthread_create(&t_array_Pro[i],NULL,producer,NULL);

    for(i=0; i<number_Cons; i++)
        pthread_create(&t_array_Cons[i],NULL,consumer,NULL);

    return 0;
}

void initialize_variables(){

    mutex=PTHREAD_MUTEX_INITIALIZER;

    sem_init(&full,0,0);
    sem_init(&empty,0,BUFFER_SIZE);

    counter = 0;
}

void* producer(void* arg){

    while(TRUE){

        sem_wait(&empty);

        phtread_mutex_lock(&mutex);

            if(insert_item())
                printf("Error in Producer\n");

            else
                printf("Producer produced a new item\n");

        pthread_mutex_unlock(&mutex);

        sem_post(&full);
    }
}

void* consumer(void* arg){

    while(TRUE){

        sem_wait(&full);

        phtread_mutex_lock(&mutex);

            if(remove_item())
                printf("Error in Consumer\n");

            else
                printf("Consumer consumed an item from the buffer\n");

        pthread_mutex_unlock(&mutex);

        sem_post(&empty);
    }
}

int insert_item(void){

    if(counter < BUFFER_SIZE){

        buffer[counter]=1;
        counter++;
        return 0;
    }

    else
        return -1;
}

int remove_item(void){

    if(counter > 0){

        buffer[counter]=0;
        counter--;
        return 0;
    }

    else
        return -1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:11:33.163

必须评估 PTHREAD_MUTEX_INITIALIZER 宏并在编译时上下文中进行分配。在其定义点初始化您的互斥锁，或使用`pthread_mutex_init`.

特别是，该行：

```
mutex=PTHREAD_MUTEX_INITIALIZER; 
```

被解析为*赋值表达式*，它期望在它的右侧有某些类型的表达式（你可以通过 C 语法，它实际上很容易理解）。`PTHREAD_MUTEX_INITIALIZER`宏通常扩展为[ `{ initializer-list }`1]。C 文法规定括号中的类型名称必须出现在这样的初始化列表之前，我们的初始语句才有效。

当然，您可以通过使用强制转换表达式来解决这个问题，但这会导致`pthread_mutex_t`对象状态无效（如果我正确阅读 POSIX 标准，则会导致未定义的行为）。

[1] ..例如`{ { 0, 0, 0, 0, 0, 0, { 0, 0 } } }`在我的系统上。

# c# - 为什么我的 NHibernate 更新不起作用？

> ID：13003455
> 
> 赞同：2
> 
> 时间：2012-10-22T00:02:05.427
> 
> 标签：c#, sql-server-2008, nhibernate, asp.net-web-api, autofac

我目前正在使用 ASP.NET Web Api 以及 NHibernate 和 Autofac ...我遇到了一个问题，即我的更新没有提交到数据库。每次执行如下操作时，我都使用 ActionFilterAttribute 打开和关闭事务：

```
private ISessionFactory SessionFactory { get; set; }

public TransactionAttribute()
{
    SessionFactory = WebApiApplication.SessionFactory;
}

public override void OnActionExecuting(System.Web.Http.Controllers.HttpActionContext actionContext)
{
    var session = SessionFactory.OpenSession();
    CurrentSessionContext.Bind(session);
    session.BeginTransaction();
}

public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
{
    var session = SessionFactory.GetCurrentSession();
    var transcation = session.Transaction;
    if (transcation != null && transcation.IsActive)
    {
        transcation.Commit();
    }
    session = CurrentSessionContext.Unbind(SessionFactory);
    session.Close();
} 
```

这适用于我的存储库中的添加、读取和删除功能。不幸的是，我的更新似乎不起作用（尽管我已经尝试了几种方法）：

```
public bool Update(Client client)
{
    var result = Get(client.ClientID);

    if (result == null)
    {
        return false;
    }

    result.Name = client.Name;
    result.Acronym = client.Acronym;
    result.Website = client.Website;

    return true;
} 
```

根据我所读到的，如果在事务期间修改对象，则无需手动调用 Update 或 SaveOrUpdate，因为 NHibernate 会跟踪并在事务提交时执行。

为什么我的更新功能不能正常工作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:54:40.727

我自己解决了这个问题——基本上我正在创建 2 个会话（一个在我的 TranscationAttribute 中，一个由于 DI 进入我的存储库）。它创建两个的原因在 OnActionExecuting 语句中非常明确......我没有检查当前是否有任何会话工厂绑定到 CurrentSessionContext。这是我正在使用的新代码：

```
 public override void OnActionExecuting(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        if (!CurrentSessionContext.HasBind(SessionFactory))
        {
            CurrentSessionContext.Bind(SessionFactory.OpenSession());
        }

        var session = SessionFactory.GetCurrentSession();
        session.BeginTransaction();
    } 
```

实现此代码后我遇到的问题是逻辑不健全..当会话被 DI 到我的存储库 ISession 中时，它没有被自动绑定。我的解决方案是将它绑定到我的存储库的构造函数中，如下所示：

```
 public ClientRepository(ISession session) 
    {
        if (session == null) throw new ArgumentNullException("nhSession");
        this._session = session;
        CurrentSessionContext.Bind(_session);
    } 
```

但是我不能 100% 确定这对于许多同时的 HTTP 请求是否安全......除非有人在这里为我提供答案，否则将把这个问题带到代码审查中！

谢谢！

# c - 在函数声明中将指针声明为参数的 3 种方法是什么？

> ID：13003461
> 
> 赞同：0
> 
> 时间：2012-10-22T00:03:25.437
> 
> 标签：c

我发现并理解了这种方法：

```
void PrintString(char *String_Ptr)
{
    //Print String
} 
```

我找不到任何其他方法将指针声明为函数声明中的参数。

我被引导相信还有其他方法可以从家庭作业问题中做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:31:46.113

除了问题中提到的之外，还有一些可能性。

以下内容与问题中的版本完全相同，尽管具有欺骗性的语法表明这`String_Ptr`是一个数组。不是，它是一个指针：

```
void PrintString(char String_Ptr[])
{
    printf("%s\n", String_Ptr);
} 
```

如果您知道要传递给 的字符数组（例如 10 个字符）的长度`PrintString()`，还可以将指针传递给这样的数组：

```
void PrintArray10(char (*Array_Ptr)[10])
{
    printf("%s\n", *Array_Ptr); // assuming the array is '\0'-terminated
}

int main(void)
{
    char a[10] = "Blah!";
    PrintString(a); // first 2 methods
    PrintArray10(&a); // 3rd method
    return 0;
} 
```

您还可以使用以下命令伪装指针`typedef`：

```
typedef char* pchar;

void PrintString(pchar String_Ptr)
{
    printf("%s\n", String_Ptr);
}

typedef char (*pchararr10)[10];

void PrintArray10(pchararr10 Array_Ptr)
{
    printf("%s\n", *Array_Ptr); // assuming the array is '\0'-terminated
} 
```

# c++ - 回文函数（字符串、堆栈、队列）

> ID：13003464
> 
> 赞同：1
> 
> 时间：2012-10-22T00:03:50.323
> 
> 标签：c++, string, function, stack, queue

我正在尝试创建一个回文函数。我必须取一个字符串并将其放入队列、堆栈中。然后比较它们，看看它们是否是回文。在我的函数中，我删除了空格，将所有字母转换为小写，现在我尝试比较 STACK 和 QUEUE 以查看给定的单词是否是回文。但我不能这样做，因为错误消息“无法将 void 类型的值分配给字符类型的实体。” 如果可能的话，请告诉我我做错了什么？

```
enter bool isPalindrome(string s){
//lowers all letters to lower case so it will not be case sensetive
for (int i = 0; i < s.length(); i ++)
    s[i] = tolower(s[i]);

 //removes white space from the word that is being checked
char c;
int i = 0;
while (s[i])
{
    c=s[i];
    if (isspace(c)) c='\n';
    putchar (c);
    i++;
}

queue<string> q1;
stack<string> s1;
for (int k = 0; k < s.size(); k++) 
    if (isalpha(s[k]))
        q1.push(s);

for (int u = 0; u < s.size(); u++)
    if (isalpha(s[u]))
        s1.push(s);
char e;
char d;
while (q1.size() > 0 )
     e = q1.pop();
     d = s1.pop();
    if (e != d)
        return false;
    else
    return true;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T00:14:31.240

`pop()`返回`void`，因此您的错误。您应该首先从容器中获取值，然后从容器中获取值`pop`。请注意，您应该使用`top`for`std::stack`和`front`or `back`for`std::queue`

```
e = q1.front();
q1.pop();
d = s1.top();
s1.pop(); 
```

**编辑**：我忽略的另一个问题是您将整个字符串存储在队列（和堆栈）中并试图将它们弹出到字符中。所以你可能想要做的是：

```
std::queue<char>
std::stack<char>
for (int k = 0; k < s.size(); k++) 
    if (isalpha(s[k]))
        q1.push(s[k]);

for (int u = 0; u < s.size(); u++)
    if (isalpha(s[u]))
        s1.push(s[u]); 
```

堆栈也是如此。

**EDIT2**： 另一个缺失的位是在最后`while`。循环周围应该有括号，并且`return true`语句应该在循环之后：

```
while (q1.size() > 0 ) {
    e = q1.front();
    q1.pop();
    d = s1.top();
    s1.pop();
    if (e != d)
        return false;
}
return true; 
```

# assembly - 关于testl的汇编指令

> ID：13003467
> 
> 赞同：0
> 
> 时间：2012-10-22T00:04:14.783
> 
> 标签：assembly, x86

我正在阅读 CSAPP 程序的第 3 章机器级表示。

```
testl S2, S1 
```

以上指令基于S2&S1。所以 `testl %eax, %eax`看%eax是负数、零还是正数。我不明白这个用法。请给我一些解释，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T00:17:58.663

TEST 指令与 AND 指令相同，只是它不存储结果。它只修改标志。它修改以下标志：符号、奇偶校验、零、进位（始终为 0）和溢出（始终为 0）。

```
testl %eax, %eax
jz    zeroLabel     ; jump if EAX is zero
js    negLabel      ; jump if EAX is negative
jns   posLabel      ; jump if EAX is positive 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T00:06:43.707

只是设置一个标志，使用后使用的以下指令通常是检查标志的条件跳转。针对自身测试寄存器只是设置 cpu 标志（如您提到的 neg，零，pos）。

测试指令执行 S1 AND S2，所以本质上 EAX AND EAX 就是 EAX。

# eclipse - 移动了我的 mingw 安装 - 现在 eclipse cdt 无法解析包含

> ID：13003472
> 
> 赞同：5
> 
> 时间：2012-10-22T00:05:05.157
> 
> 标签：eclipse, mingw, eclipse-cdt

我去了`Project->Properties->C/C++ General->Paths and Symbols`，确实路径是我旧的 mingwin 安装的路径。我的问题是：有没有一种简单的方法可以告诉 eclipse 重置工具链 -*不是针对每个项目的工作区*？当然，当我在我的 PATH 中安装了已经有 mingwin 的 CDT 时，我没有手动配置任何东西，我现在想避免它

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T20:22:31.923

[在这里](https://stackoverflow.com/a/8805675/281545)找到了答案。转到`Project > properties > C/C++ General > Paths and Symbols > GNU C++`- 您会注意到指向旧安装的路径。清除它们，`Project > properties > C/C++ Build > Discovery Options > GCC C++ Compiler`然后按*立即清除已发现条目*标签`Clear`的自动发现路径和符号框中的按钮。

 *重建你的项目。

适用于 Eclipse Juno。

如果有人可以解释如何不是基于每个项目而是针对整个工作区（清理设置）来解释如何做到这一点，那将不胜感激（并被接受）。路径是硬编码在`${workspace_loc}\.metadata\.plugins\org.eclipse.cdt.make.core\<project_name>.sc`文件中的——通常的史诗般的混乱，eclipse 首选项分散在各处——grr。我原来的问题的答案是搜索和替换那里的路径（而且只有那里？）？

**编辑：**值得注意的是`Project > Index`菜单中的项目-也许是做同样事情的更合适的方式？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-01T15:45:07.060

8.1 版 (Eclipse Juno) 中的设置已更改，并且可以为所有项目全局设置。至少他们是这么宣传的。

在中，然后`Window > Preferences > C/C++ > Build > Settings`选择和。在我的版本（CDT 8.2，Eclipse Kepler）中，项目特定设置不再存在。`CDT GCC Built-in Compiler Settings MinGW``Clear Entries``Reset``Discovery Options`

关于这个的一些链接：

1.  [http://wiki.eclipse.org/CDT/User/NewIn81#Scanner_Discovery](http://wiki.eclipse.org/CDT/User/NewIn81#Scanner_Discovery)
2.  [http://wiki.eclipse.org/CDT/User/FAQ#What_is_a_Scanner_Discovery.3F](http://wiki.eclipse.org/CDT/User/FAQ#What_is_a_Scanner_Discovery.3F)

在我的具体情况下，它确实有效，但不适用于所有内容，而不是最重要的`Path and Symbols`设置。我不得不手动编辑`<project_name>.sc`工作区中的文件。

希望这对其他人有帮助。

马特*

# php - PHP数组不起作用，多个

> ID：13003473
> 
> 赞同：0
> 
> 时间：2012-10-22T00:05:15.173
> 
> 标签：php, arrays

这是我的代码：

```
function prepare_machine($variables)
{
        foreach ($variables AS $varname => $vartype)
        {
                if (isset($_REQUEST[$varname]))
                {
                        $value = $_REQUEST[$varname];
                        return do_clean($value, $vartype);
                }
                else
                        exit;
        }
} 
```

它是这样调用的：

```
prepare_machine(array('order_by_time' => TYPE_BOOLEAN));
```

这一切都很好，但是如果你在数组中有多个东西，例如；

```
prepare_machine(array('order_by_time' => TYPE_BOOLEAN, 'order_by_date' => TYPE_BOOLEAN));
```

它只会对第一个做任何事情。

任何人都可以看到我的代码有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:10:10.990

`return ...`当您在内部循环中找到匹配项时，您正在执行此操作。这就是为什么它只处理一个。

此外，您应该使用`array_key_exists($varname, $_REQUEST)`，因为如果为 null`isset($_REQUEST[$varname])`将失败。`$_REQUEST[$varname]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T00:10:36.657

`return`返回你给它的任何东西，并退出函数。您需要以某种方式更改您的函数，以便它仅`return`在处理所有变量之后。

# javascript - MDN绑定为什么调用apply时concat参数

> ID：13003475
> 
> 赞同：5
> 
> 时间：2012-10-22T00:05:24.707
> 
> 标签：javascript, bind, apply

MDN 为那些没有原生绑定方法的浏览器指定了一个 polyfill 绑定方法：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

此代码具有以下行：

```
aArgs.concat(Array.prototype.slice.call(arguments)) 
```

它作为 args 传递给函数的 apply 方法：

```
fToBind.apply(this instanceof fNOP && oThis
                             ? this
                             : oThis,
                           aArgs.concat(Array.prototype.slice.call(arguments))); 
```

但是，这一行实际上重复了参数，因此如果我将绑定方法称为：

```
fnX.bind({value: 666}, 1, 2, 3) 
```

传递给 fnX 的参数是：

```
[1, 2, 3, Object, 1, 2, 3] 
```

运行以下示例并查看控制台输出[http://jsfiddle.net/dtbkq/](http://jsfiddle.net/dtbkq/)

但是 fnX 报告的参数是 [1, 2, 3] 是正确的。有人可以解释为什么在传递给应用调用时参数重复但没有出现在函数参数变量中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T00:11:38.963

那里有两种不同的`arguments`情况。每次调用一个函数时，除其他外，一个`arguments`对象被设置为所有传递的参数（如果`arguments`被访问）。

首先提到的`arguments`是 的参数`bind()`，它们将成为初始参数。

第二次提到的是在绑定代理函数上调用的下一组参数。因为`arguments`name 会影响其父级`arguments`（以及`this`需要分离的上下文），所以它们存储在 name 下`aArgs`。

这允许部分函数应用（有时称为*currying*）。

```
var numberBases = parseInt.bind(null, "110");

console.log(numberBases(10));
console.log(numberBases(8));
console.log(numberBases(2)); 
```

[js小提琴](http://jsfiddle.net/C9RkH/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T00:13:36.860

如果您改为检查`aArgs.concat(Array.prototype.slice.call(arguments))`from inside 的值，`fBound`您会看到您的期望。关键是参数是指在已经绑定的函数上调用的附加参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T00:13:05.297

不，当您从 登录时`x`，*`x() arguments:`*是*`[1, 2, 3]`*。

从`bind2`你`console.log(aArgs.concat(Array.prototype.slice.call(arguments)));`，在哪里`aArgs = Array.prototype.slice.call(arguments, 1)`。那么还有什么比*`[1, 2, 3, {value: 666}, 1, 2, 3]`*你期望的？那些不是[`arguments`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)传递给 fnX 的，而是那些传递给 bind:`[{value: 666}, 1, 2, 3]`的。

在绑定函数内部，`aArgs`变量仍然包含`[1, 2, 3]`，而`arguments`now 是空的——你确实调用了`x()`.

# android - 在图库中找不到图像

> ID：13003477
> 
> 赞同：2
> 
> 时间：2012-10-22T00:06:16.313
> 
> 标签：android, android-emulator, android-gallery

我需要测试一个需要从 Android JellyBean Emulator 库中挑选一些图像的功能。

所以我使用模拟器自己的浏览器从互联网上下载了一些图像（这太慢了）。

图像出现在下载的文件中，但不在模拟器库中。

在 GingerBread 模拟器中，当我从浏览器下载图像时，这些图像会自动出现在图库中。

我怎么能强迫模拟器找到图像？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T00:17:36.823

在旧模拟器中启用了媒体扫描仪，由于需要大量资源，新版本默认禁用了媒体扫描仪。

如果您想查看图库中的图像，请在 Jelly Bean Emulator 的主菜单中输入：

DevTools->Media Provider 并点击*“Scan SD Card”*。

通过这种方式，您应该可以看到图库中的图像

如果没有，可能保存的图像没有正确位于 SD 卡中，

- 使用 DDMS（你可以在 Android\android-sdk\tools 文件夹中找到它

- 单击设备菜单并选择文件资源管理器

-转到 mnt\sdcard

-单击“将文件推送到设备”按钮以上传图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T00:18:35.673

如果我纠正了，你想在模拟器的画廊里放一些图片。我认为您可以在 DDMS 文件浏览器中上传图片文件，或使用“adb push”命令。

# xna - 动画精灵时的每像素碰撞

> ID：13003482
> 
> 赞同：0
> 
> 时间：2012-10-22T00:07:49.163
> 
> 标签：xna, jquery-animate, pixel

这就是我用来检测碰撞的方法。

```
 public static bool IntersectPixels(Rectangle rectangleA, Color[] dataA, Rectangle rectangleB, Color[] dataB)
    {
        int top = Math.Max(rectangleA.Top, rectangleB.Top);
        int bottom = Math.Min(rectangleA.Bottom, rectangleB.Bottom);
        int left = Math.Max(rectangleA.Left, rectangleB.Left);
        int right = Math.Min(rectangleA.Right, rectangleB.Right);
        for (int y = top; y < bottom; y++)
        {
            for (int x = left; x < right; x++)
            {
                Color colorA = dataA[(x - rectangleA.Left) + (y - rectangleA.Top) * rectangleA.Width];
                Color colorB = dataB[(x - rectangleB.Left) + (y - rectangleB.Top) * rectangleB.Width];
                if (colorA.A != 0 && colorB.A != 0)
                {
                    return true;
                }
            }
        }
        return false;
    }: 
```

在我想为东西制作动画之前，它工作得很好。所以我有一个大约 12 帧的纹理精灵。我需要做的是获取每一帧的颜色数据数组。这就是我获取颜色数据数组的方式：

```
 Color[] playerColorArray = new Color[playerColorArray.X * playerColorArray.Y];
 PlayerTexture.GetData(playerColorArray);
 CData = playerColorArray; 
```

现在我的猜测是每次帧更改时我都必须更新纹理数据有没有办法只从每个帧中获取颜色数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:19:11.087

您可以获得完整精灵表纹理的数组，并且仅使用当前帧。

假设您有一个精灵表，并且`stride`是一个像素到它下面的像素的偏移量。这可以是精灵表的宽度。此外，您还有`x0`当前`y0`帧第一个像素的位置。然后你只需要修改索引计算：

```
int posXInFrame = (x - rectangleA.Left);
int posYInFrame = (y - rectangleA.Top);
Color colorA = dataA[(posXInFrame + x0) + (posYInFrame + y0) * stride]; 
```

可能，您已经在其他地方进行了计算，并且可以将这些值传递给函数`x0`。`y0`

# symfony - Symfony 2 会话标头已经发送？

> ID：13003486
> 
> 赞同：0
> 
> 时间：2012-10-22T00:08:17.137
> 
> 标签：symfony

我试图像这样开始（或访问）一个会话：

```
 $session = new Session();
    echo $session->getId(); 
```

根据文档，这应该是我所需要的，因为会话会自动启动（http://symfony.com/doc/master/components/http_foundation/sessions.html）：

```
While it is recommended to explicitly start a session, a sessions will actually start 
on demand, that is, if any session request is made to read/write session data. 
```

不过，我得到了错误

```
Failed to start the session because headers have already been sent. 
```

这是调用服务的原始控制器：

```
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Bundle\FrameworkBundle\Routing\Router;
use Symfony\Component\HttpFoundation\Response;

        $auth = $this->get('authentication');
        $user_id = $auth->getUserId(); 
```

然后是 getUserId 函数：

```
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpFoundation\Session\Session;

public function getUserId() {
    $session = new Session();
    echo $session->getId(); 
```

如果我将 getUserId 更改为如下所示：

```
public function getUserId() {
    $session = $this->getRequest()->getSession();
    echo $session->getId(); 
```

我得到错误：

```
Call to a member function get() on a non-object 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:44:50.780

您正在查看独立组件“HTTP Foundation”的文档。这意味着当您使用全栈框架 symfony2 时，您必须非常小心适用的内容。

Symfony2 已经处理了请求/响应和会话，因此您不需要创建任何 Session 对象。[您可以在普通文档 Chapter Controller](http://symfony.com/doc/master/book/controller.html#managing-the-session)中阅读有关如何使用会话的信息。

要访问控制器中的会话，您只需要

```
$session = $this->getRequest()->getSession(); 
```

如果要访问服务中的会话，则需要将服务“请求”作为 service.yml 中的依赖项传递，然后通过

```
$session = $request->getSession(); 
```

如果你不习惯，[Service Container](http://symfony.com/doc/current/book/service_container.html) Chapter有一些描述。

# php - 如何找到关联数组中的最小数字

> ID：13003487
> 
> 赞同：-2
> 
> 时间：2012-10-22T00:08:36.420
> 
> 标签：php, arrays, integer, associative-array, min

这就是问题：

我有以下数组（来自`$wpdb->get_results()`）：

```
array(6) {
    [0]=> array(1) {
        [0]=> string(7) "1102006"
    }
    [1]=> array(1) {
        [0]=> string(7) "1102006"
    }
    [2]=> array(1) {
        [0]=> string(7) "8092007"
    }
    [3]=> array(1) {
        [0]=> string(8) "23062012"
    }
    [4]=> array(1) {
        [0]=> string(8) "29072000"
    }
    [5]=> array(1) {
        [0]=> string(8) "30082008"
    }
} 
```

我想从 10,000 中找到不在此数组中的最小整数。在这种情况下，答案将是 10,000，因为 10,000 不在数组中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:48:29.273

这就是我解释你的问题的方式。

从 10000 开始，找到不在数据数组中的第一个可用数字。

```
<?php

$data = array(
    array('1102006'),
    array('1102006'),
    array('8092007'),
    array('23062012'),
    array('29072000'),
    array('30082008')
);

// flatten the array to a single dimension
function flatten(&$v) { $v = $v[0]; }

array_walk($data, 'flatten');

// minimum number
$num = 10000;

// while a value has not been found
while (!isset($value))
{
    // check if the current number is in our data (exclusion list)
    if (array_search($num, $data) === false)
        $value = $num;

    // increment for our next search
    $num++;
}

echo $value; 
```

如果您刚好在该数组中的最小值之后，请在上一个答案中展平数组并使用`min`：

```
echo min($data); 
```

# python - 双变量 if 语句不起作用

> ID：13003493
> 
> 赞同：2
> 
> 时间：2012-10-22T00:09:57.903
> 
> 标签：python, variables, if-statement, double, inequalities

我正在制作一个双变量 if 语句，但它一直返回错误。我不知道出了什么问题：

```
variable = float(0)

for index in range(10):

    variable = variable + float(2)

    if x <= float(variable/3) and > float(variable-2.0/3):
        # do something

    else:
        pass 
```

或类似的东西。这是基本结构。为什么每当我尝试运行它时，它总是以红色突出显示 >？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T00:17:30.163

Python 也支持正则不等式，所以你可以这样写：

```
if variable - 2.0 / 3 < x <= variable / 3:
    # ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T00:15:05.887

你想做类似的事情

```
if ((x <= float(variable/3)) and (x > float(variable-2.0/3))):
       # do something

 else:
       pass 
```

换句话说， and 的每一边都必须是一个独立的布尔表达式。我不确定你是否需要所有的括号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T00:15:30.790

在 if 块中的第二个条件之前，您似乎缺少一个变量或常量。这可能是您遇到错误的原因之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T00:18:11.880

此代码工作正常：

```
index=0 
```

`x=0`
`variable = float(0)`
`for index in range(10):`
`variable=variable + float(2)`

```
if x <= float(variable/3) and x> float(variable-2.0/3):
    print 'Doesn\'t Matter'
else:
    print 'pass' 
```

# matlab - 在 matlab 中使用“quad”函数时出错 - 集成功率以获得能量

> ID：13003498
> 
> 赞同：0
> 
> 时间：2012-10-22T00:10:37.403
> 
> 标签：matlab, integral, integrate

我正在计算电容器电压和电流。现在我也想确定能量。能量只是力量的积分，但是我无法整合我的幂函数：

```
I_C=exp(-alpha*t).*(x5(1)*cos(omega_d*t)+x5(2)*sin(omega_d*t));
V_C=exp(-alpha*t).*(x6(1)*cos(omega_d*t)+x6(2)*sin(omega_d*t))+V_In; 
Pow_C=V_C.*I_C;
Pow_C_Function=@(t)Pow_C;
Energy_C=quad(Pow_C,0,tf) 
```

我收到错误：被积函数必须返回与输入向量长度相同的输出向量。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:21:52.270

好吧，您已经将`I_C`and定义`V_C`为两个*矩阵*，而不是两个*函数*。修复很简单：

```
I_C   = @(t) exp(-alpha*t).*(x5(1)*cos(omega_d*t)+x5(2)*sin(omega_d*t));
V_C   = @(t) exp(-alpha*t).*(x6(1)*cos(omega_d*t)+x6(2)*sin(omega_d*t))+V_In; 
Energy_C = quad(@(t)V_C(t).*I_C(t), 0,tf); 
```

另外，请查看`quadgk`or `quadl`，或者如果您使用的是 Matlab R2012a 或更新版本，则`integral`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T02:05:47.340

您应该将 I_C、V_C 和 Pow_C 定义为函数（就像您为 Pow_C_Function 所做的那样）。目前它们只是变量。

# java - 需要 java actionlisteners 建议，Jmenuitems

> ID：13003501
> 
> 赞同：0
> 
> 时间：2012-10-22T00:11:27.717
> 
> 标签：java, actionlistener, jmenuitem

> “首先，为每个 JMenuItem 对象添加 ActionListener。例如，当您从菜单中选择“Square”时，附加到“Square”菜单项的 ActionListener 必须创建您的“Square”类的实例。这些 ActionListener 将在 MyFrame 类的构造函数中添加为代码。”

有人可以指导我如何做到这一点吗？

一旦选择了正方形，我需要使用我的 Jslider 来了解正方形的面积，（假设 jslider 值是正方形的一侧）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:22:37.720

看起来这看起来像是家庭作业，我不会给你细节，而只是一个指南......

按照您的说明，您首先需要创建一个类，并按照[http://docs.oracle.com/javase/6/docs/api/java](http://docs.oracle.com/javase/6/docs/api/java/awt/event/ActionListener.html)`implements ActionListener`上的文档中的描述实现“actionPerformed()”方法[/awt/event/ActionListener.html](http://docs.oracle.com/javase/6/docs/api/java/awt/event/ActionListener.html)

然后你被指示这应该检测点击了什么，然后创建适当的`Object`. 所以，根据你的问题的 Square 指令，你的`actionPerformed()`方法会做这样的事情......

```
JMenuItem clickedMenu = (JMenuItem)e.getSource();
if (clickedMenu.getText().equals("Square")){
    Square square = new Square();
} 
```

您需要`if-else`为不同的菜单项添加额外的语句。

最后，它说你需要将`ActionListener`s 添加到你的`MyFrame`类中，所以它应该是这样的......

```
JMenuItem menuItem = new JMenuItem("Square");
menuItem.addActionListener(new MyActionListener()); 
```

只需一次按照您的说明进行操作即可。如果您在任何时候遇到困难，请尝试参考 Java API 文档，或在 StackOverflow 上搜索帮助。

# gimp - Gimp：如何创建

> ID：13003506
> 
> 赞同：0
> 
> 时间：2012-10-22T00:12:30.897
> 
> 标签：gimp

我正在 gimp 中进行网站设计。我真的很喜欢爱荷华大学统计网站 (http://www.stat.uiowa.edu/) 上的数字和数学方程式。我想创建这样的东西，也许做手绘方程式和数字并扫描它。

一旦我有了合适的图像，我怎么能把它变成一个透明的图像，我可以覆盖在标题上（在 gimp 中）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-20T11:06:57.817

我会扫描一些图表和手写的数学方程式。然后我会从gimp打开它。完成后，您可以转到 --> colors 并使用 Desaturate。您可以从那里使用任何方法。只有 3 个。看看哪一个在你的照片上看起来最好看。得到黑白照片后，转到颜色并选择--> 色调分离并使用它，级别设置为 2。在此之后，您转到--> 图层--> 透明度并选择颜色到 Alpha。选择白色以去除背景。在此之后将您的图像保存为 . .png 文件。您应该扫描可能的黑白图像。您可以在白纸上写一些图表，而无需打印一些图表和数学方程式。如果您有扫描仪，您还可以将设置设置为仅扫描两种颜色，然后您不必使用去饱和度。我希望这能帮到您。

# php - 这是正常的吗？

> ID：13003507
> 
> 赞同：0
> 
> 时间：2012-10-22T00:13:05.343
> 
> 标签：php, class, static, late-static-binding

我不明白这个后期静态绑定是如何工作的。

```
abstract class A{

  final public static function doprint(){
    print get_called_class() . '<br>';
  }

  public static function wrapper(){
    self::doprint();
    static::doprint();
  }

}

class A2 extends A{}    

A2::wrapper(); 
```

get_call_class() 在这两种情况下都会打印 A2，即使我用 self 调用了 doprint 方法。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:20:29.817

我想`get_called_class()`告诉你哪个类被调用了，它的输出是正确的。

后期静态绑定允许`self`上下文冒泡，因此定义更高的方法可以对被调用方法的对象进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T00:29:48.340

**get_call_class()**总是返回你实际调用的类。你打电话给**A2::**所以它是 A2。

在我的网站上有一个**LSB 单例抽象类**的教程。我没有在这里链接，因为总是有一个僵尸义务警员来了，甚至不看就删除了链接。*但在我的描述中。*

LSB 的问题是 A 中的方法可以调用 B 中的方法，而 B 中的方法可以调用 A 中的方法。**看这个例子：**

```
header('Content-Type: text/plain'); // Pretty text output
// LSB Parent
class A {
    // NOLSB: Will call Current Class method
    static public function TriggerSelf() {
        self::OverrideMe();
    }
    // LSB: Will call Inheriting Class method (or Current if none Inherits)
    static public function TriggerStatic() {
        static::OverrideMe();
    }
    // Method to Override
    static public function OverrideMe() {
        echo 'A here', PHP_EOL;
    }
}

// LSB Child
class B extends A {
    // Override by LSB
    static public function OverrideMe() {
        echo 'B here', PHP_EOL;
    }
}

A::TriggerSelf(); // <- NO LSB
A::TriggerStatic(); // <- LSB (but not inheritance)

B::TriggerSelf(); // <- NO LSB
B::TriggerStatic(); // <- LSB (with inheritance, so it works) 
```

了解**B::TriggerStatic()**如何允许 A 调用 B 方法，而**B::TriggerSelf()**调用 A 方法。**那是LSB。**父类静态方法可以调用子类静态方法。这几乎是静态摘要:)

*研究这个例子，它会很有意义。*

# eclipse - Eclipse Juno 和 Retina 分辨率

> ID：13003511
> 
> 赞同：20
> 
> 时间：2012-10-22T00:13:26.173
> 
> 标签：eclipse, retina-display, eclipse-juno

是否有可能以视网膜分辨率显示 Eclipse Juno？我能够为以前版本的 Eclipse 编辑 info.plist，但这不适用于 Juno ...

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-10-23T15:13:07.797

使用文本编辑器打开并在**之前**`<Installation Directory>/Eclipse.app/Contents/Info.plist`添加以下内容： **`</dict>`**

 **`<key>NSHighResolutionCapable</key>
<true/>`

如果你`Info.plist`用 Xcode 打开文件，它应该是这样的：

![启用高分辨率后的 Info.plist 文件](../Images/d714e7748d392e8c37822ce47b6a0bc5.png)

现在制作 Eclipse 应用程序的副本 ( `Eclipse.app`)。您可以将其复制到它已经存在的目录中；这一步只是为了让操作系统重新加载`Info.plist`文件中的更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-30T16:28:49.780

`Info.plist`使用 lsregister 命令在终端中强制更新：

```
/System/Library/Frameworks/CoreServices.framework/Frameworks/LaunchServices.framework/Support/lsregister -v -f /Applications/eclipse/Eclipse.app 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T13:55:43.410

有一个名为 Retinizer 的应用程序可以将应用程序转换为 Retina 模式。更轻松。只对字体有效。

[http://retinizer.mikelpr.com](http://retinizer.mikelpr.com)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-23T05:57:50.727

在 plist 中将 High Resolution Capable 更新为 Yes 后，制作应用程序的副本。**

# c# - 实体框架和改变视图？

> ID：13003514
> 
> 赞同：0
> 
> 时间：2012-10-22T00:14:24.490
> 
> 标签：c#, entity-framework

我们有一个客户给了我们一些用 VB6 编写的代码，并将被转换为 .Net 4.0。他们的数据库只能说是一场灾难。但是，我们不允许更改它。所以我们正在这个不稳定的数据库之上构建一个应用程序。

他们所做的一件事是（等待它），根据用户选择哪些列应在网格中显示来创建视图。

例如，联系人屏幕列出了所有联系人。他们有一个屏幕，可以读取数据库，从视图中获取字段，然后向用户显示可能的列列表。然后用户选择一些（姓氏、名字、出生日期）。

然后代码会创建一个新视图（或覆盖现有视图）

> 'SELECT Surname, Firstname, DOB' from AnotherView WHERE ID=:ID'

（另一个视图是一个包含连接等的大视图......）

然后，每次查看屏幕时，它都会使用该视图。

所以，观点发生了变化。

我们正在使用实体框架。是否可以处理动态视图？我们在演示文稿中使用 Linq（我知道，我知道....）来挖掘数据。那么我们能否以某种方式使用 Linq 从视图中选择 *，然后呈现网格？但是，如果视图发生变化，我们需要重新生成 EF 模型，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:05:44.760

简单的回答：不要对这些查询使用 EF。EF 模型是在设计时创建的，在运行时更改它意味着很多问题，不值得。使用 EF 直接执行您的动态 SQL。

# c++ - 将函数应用于数组中的每个元素

> ID：13003517
> 
> 赞同：2
> 
> 时间：2012-10-22T00:15:02.790
> 
> 标签：c++, arrays, function, std

我正在编写一个 C++ 程序，它从文本文件中读取双精度列表并将它们存储在一个数组中。我想将一个函数一个一个地应用于数组中的每个双精度并测试结果。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T00:18:43.283

这取决于，如果您想存储调用的结果以供以后使用并且还需要原始值，请使用`std::transform`. 如果您只想了解是否所有应用程序都返回 true 使用 `std::all_of`，如果您的功能正在变异使用`std::for_each`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T00:20:03.940

把事情简单化：

```
std::vector<double> v;

// populate v

for (auto d : v) { auto res = do_something_with(d); verify(res); } 
```

# c++ - Linux和Windows下混合cin和getline

> ID：13003521
> 
> 赞同：2
> 
> 时间：2012-10-22T00:15:11.430
> 
> 标签：c++, windows, linux, getline, cin

我知道混合 cin 和 getline 的常见问题。我相信这是不同的。

这是程序：

```
#include <iostream>
#include <cstdio>
#include <string>
using namespace std;

int main() {
  int a;
  string line;
  cin >> a;
  printf("A is '%d'\n", a);
  getline(cin, line);
  printf("Line is '%s'\n", line.c_str());
  cout << cin.fail() << cin.eof() << cin.bad() << endl;
} 
```

我还有一个使用 istream::getline 编写的版本。我相信这里给出的所有输入案例的结果都是相同的。

```
a.out < test1
A is '1'
'ine is ' abc 2
000

a.out < test2
A is '1'
Line is ' abc 2'
000 
```

其中 test1 是`$'1 abc 2\r\n'`（9 个字节），而 test2 是`$'1 abc 2\n'`（8 个字节）。

我没有在 Windows 下明确完成这些测试，但我有一种预感，即输出是“如预期的那样”，即与测试 2 的输出相同。

我的问题是：解释测试1的输出。例如：为什么printf输出损坏；是否存在与行尾解释相关的可移植性问题；如何以最小的逻辑变化来修复代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T00:28:47.903

在 Linux 下，从输入流`getline`中删除。`\n`但是，它不会删除`\r`.

*回车*( `\r`)将光标**返回**到当前行的开头。所以在`printf`调用中，当 STDOUT 光标看到`\r`. 它打印的下一个字符是`'`，它将覆盖行上的第一个字符 (the `L`)。

当文件中没有时，您不会看到此行为`\r`。

解决此问题的简单方法：`\r`在 Linux 和 Unix 下运行时手动检查。

# data-annotations - DataAnnotation [Key] 使一个字段只读，还有其他的吗？

> ID：13003527
> 
> 赞同：2
> 
> 时间：2012-10-22T00:16:18.270
> 
> 标签：data-annotations, silverlight-5.0

当我在 DataForm 或 DataGrid 中使用它时，Key DataAnnotation 使字段表现为 ReadOnly，因为它表示 DataBase 键，但如果我只想将它设为只读，因为它是一个计算字段呢？

**除了 Key 之外，是否还有另一个 DataAnnotation 可以使字段在 DataForm 中表现为只读？**

[![窗户](../Images/843bf1195a8660377b23171df07fd40a.png)](https://i.stack.imgur.com/yM6Ht.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:23:54.027

尝试使用 [可编辑](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.editableattribute.aspx)注释，将 AllowEdit 设置为 false。

```
[System.ComponentModel.DataAnnotations.Editable(AllowEdit = false)] 
```

# java - 刷新过时的 Eclipse 警告

> ID：13003534
> 
> 赞同：0
> 
> 时间：2012-10-22T00:17:40.383
> 
> 标签：java, eclipse, refresh, warnings

我的 Java 代码中有一个已修复的警告。但是，它仍保留在“问题”视图中。我不知道如何让 eclipse 刷新它。它甚至突出显示了错误的行（它是未经检查的强制转换，它显示在方法标题行上）

我正在使用 eclipse 3.7.2 和 android 开发工具包，并且在工作区中安装了 git 插件，尽管这个项目不是一个 android 项目。

该项目没有与之关联的构建器；我正在命令行构建。我已经清理并重建了所有东西并刷新了项目。

我还尝试删除 org.eclipse.jdt.core 和 org.eclipse.core.resources/.projects//.indexes，并且尝试关闭并重新打开该项目。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:42:57.557

即使它不是 Android 项目，问题视图的“源”列是否会针对此警告显示“Android lint”？如果是这样，请将 Android 开发工具插件升级到当前版本。在 ADT 20.0.2 中修复了一个错误，该错误即使在修复它们之后也会保持过时的 Java 警告/错误处于活动状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T14:40:53.017

请参阅原始请求者在[如何更新 Eclipse 中的警告的评论中提出的建议？](https://stackoverflow.com/questions/17194026/how-to-update-warnings-in-eclipse)

“查看‘问题’视图并手动删除警告。”

一旦“卡住”警告被删除，正常的 Eclipse 服务应该会恢复。

# xml - 仅当信息存在时才打印节点的值

> ID：13003541
> 
> 赞同：3
> 
> 时间：2012-10-22T00:18:33.303
> 
> 标签：xml, xpath

我希望仅在节点中具有值的情况下打印出客户的选项。我可以访问信息并将其打印出来，但是，由于 while 循环，它会打印出每个帐户下的信息。任何帮助或提示将不胜感激，谢谢。

这是访问xml的代码：

```
XPathNodeIterator ItemOptionsIter;
String ItemsearchStringOptions = "Order/Items/Item/CustomerOptions";
ItemOptionsIter = nav.Select(ItemsearchStringOptions);

if (ItemIter.Current.SelectSingleNode("CustomerOptions") != null)
{
    while (ItemOptionsIter.MoveNext())
    {
        XPathNodeIterator ItemOptions = ItemOptionsIter.Current.SelectChildren(XPathNodeType.Element);
        if (ItemOptions.Current.HasChildren)
        {
            txtItemInfo.Text = txtItemInfo.Text + "Size: " + ItemOptions.Current.SelectSingleNode("Size") + Environment.NewLine;
            txtItemInfo.Text = txtItemInfo.Text + "Color: " + ItemOptions.Current.SelectSingleNode("Color") + Environment.NewLine;
            txtItemInfo.Text = txtItemInfo.Text + "-------------------------------------------------" + Environment.NewLine;
        }
    }
} 
```

这是xml文件：

```
<Item>
    <PartNo>JETSWEATER</PartNo>
    <Description>N.Y. Jets Sweatshirt</Description>
    <UnitPrice>10.50</UnitPrice>
    <Quantity>2</Quantity>
    <TotalCost>21.00</TotalCost>
    <CustomerOptions>
        <Size>M</Size>
        <Color>Green</Color>
    </CustomerOptions>
</Item>
<Item>
    <PartNo>JETSSWEATER</PartNo>
    <Description>N.Y. Jets Sweatshirt</Description>
    <UnitPrice>7.50</UnitPrice>
    <Quantity>3</Quantity>
    <TotalCost>22.50</TotalCost>
    <CustomerOptions>
        <Size>S</Size>
        <Color>White</Color>
    </CustomerOptions>
</Item>
<Item>
    <PartNo>JETSFLAG</PartNo>
    <Description>N.Y. Jets Flag for display</Description>
    <UnitPrice>5.00</UnitPrice>
    <Quantity>1</Quantity>
    <TotalCost>5.00</TotalCost>
    <CustomerOptions/>
</Item> 
```

最后是我的输出示例：

```
零件编号：喷气式针织衫
描述：NY Jets 运动衫
单价：10.50
数量：2
总成本：21.00
-------------------------------------------------
尺码：M
颜色：绿色
-------------------------------------------------
尺寸：S
白颜色
-------------------------------------------------
零件编号：喷气式针织衫
描述：NY Jets 运动衫
单价：7.50
数量：3
总成本：22.50
-------------------------------------------------
尺码：M
颜色：绿色
-------------------------------------------------
尺寸：S
白颜色
-------------------------------------------------
零件编号：JETSFLAG
描述：用于展示的纽约喷气机队旗帜
单价：5.00
数量：1
总成本：5.00
-------------------------------------------------
尺码：M
颜色：绿色
-------------------------------------------------
尺寸：S
白颜色
-------------------------------------------------

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:02:37.587

我会说构建您的主循环以遍历 Item 节点并打印出它们的值，然后在您将打印出选项的地方执行以下操作：

```
XPathNodeIterator options = item.SelectNodes("CustomerOptions/*[. != '']");
if(options.Count != 0)
{
  XPathNavigator size = item.SelectSingleNode("CustomerOptions/Size[. != '']");
  if(size != null)
  {
    txtItemInfo.Text = txtItemInfo.Text + "Size: " + size.Value + Environment.NewLine;            
  }
  // Then do the same for color

  txtItemInfo.Text = txtItemInfo.Text + "-------------------------------------------------" + Environment.NewLine;
} 
```

# c# - asp.net C# 变量

> ID：13003545
> 
> 赞同：0
> 
> 时间：2012-10-22T00:19:05.200
> 
> 标签：c#, asp.net

这可能非常简单，如果我看起来完全愚蠢，我很抱歉，但是......

我正在为一个类编写我的第一个 asp.net 网页，我已经习惯了 PHP

在 PHP 中，当您在一个代码块中创建变量时，您可以在所有其他代码块中使用它（只要它已经被初始化）

这是我的意思的一个例子：

```
<?php $myVariable = "Hello World!" ?> 
```

（稍后在代码中：）

```
<?php echo $myVariable; ?> 
```

并且在 PHP 中可以正常工作

现在，据我所知，asp中的等价物是：

```
<% String myVariable = "Hello World!"; %> 
```

但是当我尝试在**另一个**代码块中使用它时，变量 myVariable 不可访问

难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T00:26:04.983

这里的问题是变量的范围。我建议您在[http://www.informit.com/articles/article.aspx?p=25467&seqNum=5上阅读这篇文章](http://www.informit.com/articles/article.aspx?p=25467&seqNum=5)

**更新**

```
<%@ Page Language="C#" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<script runat="server">
    string myVariable = "This is a variable";
</script>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <%=myVariable %>
    </div>
    </form>
</body>
</html> 
```

# devise - 如何使用 Devise 将用户名列入黑名单？

> ID：13003546
> 
> 赞同：4
> 
> 时间：2012-10-22T00:19:07.230
> 
> 标签：devise, registration, blacklist

我有设计设置允许使用电子邮件或用户名登录。使用您的用户名，您可以拥有一个虚 URL，如下所示`vanity.com/username`：因此，我的用户模型具有`attr_accessible :username`和`attr_accessor :login`.

为了防止用户名与未来的功能发生冲突，我想对某些用户名实施黑名单。您可以[在此处查看 GitHub 使用的一个很好的示例列表](http://www.quora.com/How-do-sites-prevent-vanity-URLs-from-colliding-with-future-features)。

我是 Devise 的新手，并且已经在他们的 wiki 中搜索了操作方法，以查看该用例或类似内容是否包含在其中。似乎不是。

**如何将某些用户名列入黑名单以在 Devise 中注册？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T02:04:10.517

有一种比修改 Devise 的控制器更简单的方法。

在`User`模型中，我所要做的就是：

```
validates :username, :exclusion => %w(about blog ...) 
```

太简单了。

# android - 如何使 android Phonegap 可用于平板电脑？

> ID：13003547
> 
> 赞同：1
> 
> 时间：2012-10-22T00:19:10.070
> 
> 标签：android, cordova, jquery-mobile

我刚刚使用 Phonegap 创建了一个 Android 应用程序并将其部署到商店。它只是显示网站的内容。我遇到的问题是这个应用程序只对移动设备可见，而不是平板电脑，即使在清单文件中包含它之后：

```
<compatible-screens>
  <!-- all small size screens -->
  <screen android:screenSize="small" android:screenDensity="ldpi" />
  <screen android:screenSize="small" android:screenDensity="mdpi" />
  <screen android:screenSize="small" android:screenDensity="hdpi" />
  <screen android:screenSize="small" android:screenDensity="xhdpi" />
  <!-- all normal size screens -->
  <screen android:screenSize="normal" android:screenDensity="ldpi" />
  <screen android:screenSize="normal" android:screenDensity="mdpi" />
  <screen android:screenSize="normal" android:screenDensity="hdpi" />
  <screen android:screenSize="normal" android:screenDensity="xhdpi" />
  <screen android:screenSize="large" android:screenDensity="ldpi" />
  <screen android:screenSize="large" android:screenDensity="mdpi" />
  <screen android:screenSize="large" android:screenDensity="hdpi" />
  <screen android:screenSize="large" android:screenDensity="xhdpi" />
  <screen android:screenSize="xlarge" android:screenDensity="ldpi" />
  <screen android:screenSize="xlarge" android:screenDensity="mdpi" />
  <screen android:screenSize="xlarge" android:screenDensity="hdpi" />
  <screen android:screenSize="xlarge" android:screenDensity="xhdpi" />
</compatible-screens> 
```

我不知道该怎么办。我正在测试的平板电脑是 Acer A100 7"，运行 Android 版本 4.0.3。

**更新**

这是清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.rakoty.rakoty"
  android:versionCode="1"
  android:versionName="1.0">
  <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
  <supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:resizeable="true"
    android:anyDensity="true" />
  <uses-permission android:name="android.permission.VIBRATE" />
  <uses-permission android:name="android.permission.VIBRATE" />
  <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
  <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
  <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
  <uses-permission android:name="android.permission.READ_PHONE_STATE" />
  <uses-permission android:name="android.permission.INTERNET" />
  <uses-permission android:name="android.permission.RECEIVE_SMS" />
  <uses-permission android:name="android.permission.RECORD_AUDIO" />
  <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
  <uses-permission android:name="android.permission.READ_CONTACTS" />
  <uses-permission android:name="android.permission.WRITE_CONTACTS" />
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
  <uses-permission android:name="android.permission.GET_ACCOUNTS" />
  <uses-permission android:name="android.permission.BROADCAST_STICKY" />
  <uses-permission android:name="android.permission.BROADCAST_STICKY" />
  <compatible-screens>
    <!-- the screen part from above -->
  </compatible-screens>
  <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
      android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale"
      android:name=".MainActivity"
      android:label="@string/title_activity_main" >
      <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
      </intent-filter>
    </activity>
 </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T01:00:17.300

根据我在 Play 商店中看到的内容，您`RECORD_AUDIO`在清单中拥有权限。默认情况下，这意味着设备必须有麦克风，而某些平板电脑则没有。考虑添加：

```
<uses-feature android:name="android.hardware.microphone" android:required="false" /> 
```

同样，您拥有`RECEIVE_SMS`权限，默认情况下要求设备具有电话功能，而大多数平板电脑没有。请考虑添加：

```
<uses-feature android:name="android.hardware.telephony" android:required="false" /> 
```

等等。

我建议您将您的权限与文档中的说明进行比较，以查看您可能需要添加的其他内容：http: [//developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions)

# jquery - wordpress中的jquery冲突

> ID：13003548
> 
> 赞同：0
> 
> 时间：2012-10-22T00:19:23.413
> 
> 标签：jquery, wordpress, conflict

> **可能重复：**
> [Wordpress Jquery 与插件冲突](https://stackoverflow.com/questions/4845483/wordpress-jquery-confliction-with-plugin)

我有冲突，我知道是什么原因造成的，但经过长时间的研究，不知道如何解决。我的网站使用 coda 滑块作为滑块，但是当我使用插件 WPreviews 时，它会导致滑块停止......

所以，很明显，经过研究，臭名昭著的 $ jquery 与插件冲突，但在我的其他网站上足够有趣，我使用相同的插件没有问题。

任何帮助将不胜感激，并为帮助我解决问题的人提供免费贴花。

非常感谢您的考虑和帮助。

# ruby-on-rails - 访问控制 Rails 应用程序中的不同页面？

> ID：13003550
> 
> 赞同：0
> 
> 时间：2012-10-22T00:19:41.567
> 
> 标签：ruby-on-rails, ldap

我有一个需要进行访问控制的 Rails 应用程序。（有些页面可以被所有人访问，有些页面只能被某些 LDAP 组的人访问，等等。） 处理这种访问控制的最佳方式是什么？

一种方法是`before_filter`在我的所有控制器中为每个操作检查用户是否属于授权执行该操作的 LDAP 组。（但这似乎很混乱。）有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:41:06.087

您应该使用授权机制来做这种事情。

CanCan 真的很流行，也很简单：[https ://github.com/ryanb/cancan](https://github.com/ryanb/cancan)

您可以在此处找到其他用于处理授权的 gem：[https ://www.ruby-toolbox.com/categories/rails_authorization](https://www.ruby-toolbox.com/categories/rails_authorization)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T00:49:02.483

如果您是 Ruby On Rails 的新手，我强烈建议您阅读[这本书。](http://ruby.railstutorial.org/)讨论您需要什么的部分[在这里](http://ruby.railstutorial.org/chapters/user-microposts#sec-access_control)。

据我所知，之前的过滤器工作得很好，而且并不混乱，因为它是在页面的控制器中处理的。

# android - Cordova-2.1.0 捕获并上传照片到服务器

> ID：13003552
> 
> 赞同：1
> 
> 时间：2012-10-22T00:19:49.960
> 
> 标签：android, cordova, cordova-2.0.0

我是新来的，上周有一个问题：

我在 phonegap(cordova2.1.0) 中制作了一个应用程序，代码如下：

```
<script type="text/javascript" charset="utf-8">

var deviceReady = false;

/**
 * Take picture with camera
 */
function takePicture() {
    navigator.camera.getPicture(
        function(uri) {
            var img = document.getElementById('camera_image');
            img.style.visibility = "visible";
            img.style.display = "block";
            img.src = uri;
            document.getElementById('camera_status').innerHTML = "Success";
        },
        function(e) {
            console.log("Error getting picture: " + e);
            document.getElementById('camera_status').innerHTML = "Error getting picture.";
        },
        { quality: 50, destinationType: navigator.camera.DestinationType.FILE_URI});
};

/**
 * Select picture from library
 */
function selectPicture() {
    navigator.camera.getPicture(
        function(uri) {
            var img = document.getElementById('camera_image');
            img.style.visibility = "visible";
            img.style.display = "block";
            img.src = uri;
            document.getElementById('camera_status').innerHTML = "Success";
        },
        function(e) {
            console.log("Error getting picture: " + e);
            document.getElementById('camera_status').innerHTML = "Error getting picture.";
        },
        { quality: 50, destinationType: navigator.camera.DestinationType.FILE_URI, sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY});
};

/**
 * Upload current picture
 */
function uploadPicture() {

    // Get URI of picture to upload
    var img = document.getElementById('camera_image');
    var imageURI = img.src;
    if (!imageURI || (img.style.display == "none")) {
        document.getElementById('camera_status').innerHTML = "Take picture or select picture from library first.";
        return;
    }

    // Verify server has been entered
    server = document.getElementById('serverUrl').value;
    if (server) {

        // Specify transfer options
        var options = new FileUploadOptions();
        options.fileKey="file";
        options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
        options.mimeType="image/jpeg";
        options.chunkedMode = false;

        // Transfer picture to server
        var ft = new FileTransfer();
        ft.upload(imageURI, server, function(r) {
            document.getElementById('camera_status').innerHTML = "Upload successful: "+r.bytesSent+" bytes uploaded.";              
        }, function(error) {
            document.getElementById('camera_status').innerHTML = "Upload failed: Code = "+error.code;               
        }, options);
    }
}

/**
 * View pictures uploaded to the server
 */
function viewUploadedPictures() {

    // Get server URL
    server = document.getElementById('serverUrl').value;
    if (server) {

        // Get HTML that lists all pictures on server using XHR 
        var xmlhttp = new XMLHttpRequest();

        // Callback function when XMLHttpRequest is ready
        xmlhttp.onreadystatechange=function(){
            if(xmlhttp.readyState === 4){

                // HTML is returned, which has pictures to display
                if (xmlhttp.status === 200) {
                    document.getElementById('server_images').innerHTML = xmlhttp.responseText;
                }

                // If error
                else {
                    document.getElementById('server_images').innerHTML = "Error retrieving pictures from server.";
                }
            }
        };
        xmlhttp.open("GET", server , true);
        xmlhttp.send();         
    }   
}

/**
 * Function called when page has finished loading.
 */
function init() {
    document.addEventListener("deviceready", function() {deviceReady = true;}, false);
    window.setTimeout(function() {
        if (!deviceReady) {
            alert("Error: PhoneGap did not initialize.  Demo will not run correctly.");
        }
    },2000);
} 
```

HTML 代码：

**图片：**

```
 <input type="button" onclick="takePicture();" value="Take Picture" /><br/>
    <input type="button" onclick="selectPicture();" value="Select Picture from Library" /><br/>
    <input type="button" onclick="uploadPicture();" value="Upload Picture" />
</div>
<br/> 
```

好吧：这段代码的一部分不是我的。

问题

没有错误警报

警报说一切都已完成。图片上传和字节

在我的 msql 中，图像没有扩展名（.jpg）只有名称

在图像文件夹中没有上传任何内容

我把所有东西都列入白名单，

有人可以帮助我吗？我不知道还能做什么。。

提前致谢

顺便说一句，在 Eclipse 日志中，一切都显示正常，在 android 2.3 实际手机中也是一样，但图像不存在..

# ruby-on-rails - rails autosave => true with new record

> ID：13003553
> 
> 赞同：0
> 
> 时间：2012-10-22T00:20:01.067
> 
> 标签：ruby-on-rails, model

我有一个用户模型，它与一个用户上下文模型有一个 has_one，自动保存关系。

我创建了一个新的 User 模型和一个新的 UserContext 模型，如下所示：

```
u = User.new
u.user_context = UserContext.new
u.save 
```

我收到一个验证错误说：

user_context.user_id 不能为空。user_id 为 nil，因为我有一个新的用户记录，它还没有 ID。

我认为 rails 正在尝试先保存 user_context，然后再保存用户。我如何以最优雅的方式解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-04T01:50:03.190

晚了 2 年，但我想我会添加这个，以防将来有人遇到这个问题

```
u = User.new
u.user_context = UserContext.new(user: u)
u.save 
```

# c# - C# - 如何从路径中提取文件名和扩展名？

> ID：13003555
> 
> 赞同：34
> 
> 时间：2012-10-22T00:20:02.703
> 
> 标签：c#, file, path

所以，说我有

```
string path = "C:\\Program Files\\Program\\File.exe"; 
```

我如何只获得“File.exe”？我在想一些分裂的东西（见下文），但我试过的东西不起作用......

这是我的代码。

```
 List<string> procs = new List<string>(); //Used to check if designated process is already running
        foreach (Process prcs in Process.GetProcesses())
            procs.Add(prcs.ProcessName); //Add each process to the list
        foreach (string l in File.ReadAllLines("MultiStart.txt")) //Get list of processes (full path)
            if (!l.StartsWith("//")) //Check if it's commented out
                if (!procs.Contains(l.Split('\\')[l.Split('\\').Length - 1])) //Check if process is already running
                    Process.Start(l); 
```

我可能只是一个菜鸟。._.

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-10-22T00:26:35.317

`System.IO`有不同的类来处理文件和目录。在它们之间，最有用的一种是`Path`它有很多用于处理文件和文件夹的静态辅助方法：

```
Path.GetExtension(yourPath); // returns .exe
Path.GetFileNameWithoutExtension(yourPath); // returns File
Path.GetFileName(yourPath); // returns File.exe
Path.GetDirectoryName(yourPath); // returns C:\Program Files\Program 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-22T00:20:31.333

你正在寻找`Path.GetFileName(string)`.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-02-10T13:32:19.850

通过最后一个字符搜索，您可以获得正确的结果。

```
string path = "C:\\Program Files\\Program\\fatih.gurdal.docx";
string fileName = path.Substring(path.LastIndexOf(((char)92))+ 1);
int index = fileName.LastIndexOf('.');
string onyName= fileName.Substring(0, index);
string fileExtension = fileName.Substring(index + 1);
Console.WriteLine("Full File Name: "+fileName);
Console.WriteLine("Full File Ony Name: "+onyName);
Console.WriteLine("Full File Extension: "+fileExtension); 
```

输出：

> 完整文件名：fatih.gurdal.docx
> 
> 完整文件名称：fatih.gurdal
> 
> 完整文件扩展名：docx

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-03T10:07:45.220

这对我来说可以删除 .extension 之前的任何 .sometext

```
//Remove all extensions "any .sometext.extension" from the file name
var newFileName= Path.GetFileNameWithoutExtension(fileName);
//Combine the the new file name with its actual extension "last .extension"
var fileNameWithExtension = newFileName+ "." + fileName.Split('.')[fileName.Split('.').Length - 1]; 
```

# javascript - 为什么我的 JavaScript 中出现“未定义悬停”错误？

> ID：13003557
> 
> 赞同：0
> 
> 时间：2012-10-22T00:20:30.697
> 
> 标签：javascript, hover

这是怎么回事？它说“悬停未定义”，但在我的 jsFiddle 中，代码工作正常：

```
<a href="#" onmouseover="hover(1);">click</a>
<div id="1"></div>

<script type="text/javscript">
function hover(x) {
    var id = x;
    var hoverBubble = document.getElementById(id);
    hoverBubble.innerHTML = "hello";
}
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T00:25:14.977

```
<script type="text/javscript"> 
```

那是拼写错误。它应该是`javascript`

```
<script type="text/javascript"> 
```

# mongodb - 无法修复 PHP 致命错误：找不到类“MongoPool”

> ID：13003559
> 
> 赞同：0
> 
> 时间：2012-10-22T00:20:32.587
> 
> 标签：mongodb, nginx, php

不幸的是，我无法修复`Class 'MongoPool' not found`错误。重新检查了配置中的所有内容，对我来说一切看起来都很正常 :( 已经花了 4 个小时了 :(

我正在使用：

*   Ubuntu 12.04
*   nginx 1.1.19
*   php 5.3.10-1ubuntu3.4 作为 nginx 的 php-fpm 扩展
*   mongodb驱动1.3.0RC1-dev

配置信息：

*   我的 phpinfo() 输出在**[这里](http://fiddle.jshell.net/jMHq8/show/)**
*   nginx.conf 在**[这里](http://pastebin.com/raw.php?i=npRWDgzJ)**
*   fastcgi_params 在**[这里](http://pastebin.com/raw.php?i=tWDMLTZL)**
*   php.ini 在**[这里](http://pastebin.com/ba4gQnwS)**
*   php-fpm.conf 在**[这里](http://pastebin.com/30fmqAvQ)**

php 文件夹中的 mongo.ini 是这个

```
extension=mongo.so
mongo.native_long = true
mongo.utf8 = 1 
```

/etc/php5/fpm/pool.d/www.conf 也很短

```
[www]

user = www-data
group = www-data
listen = /var/run/php-fpm.sock
pm = dynamic
pm.max_children = 10
pm.start_servers = 4
pm.min_spare_servers = 2
pm.max_spare_servers = 6
access.log = /var/www/log/$pool.access.log
;chroot = /var/www/
chdir = / 
```

你能看看我的配置并帮助我吗？

测试页是这个

```
<?php
MongoPool::setSize(2);
?> 
```

nginx服务器的配置是

```
server {
    root /usr/share/nginx/www;
    index index.php index.html index.htm;

    server_name localhost 192.168.1.149;

    location / {
        try_files $uri $uri/ /index.html;
    }

    location /doc/ {
        alias /usr/share/doc/;
        autoindex on;
        allow 127.0.0.1;
        deny all;
    }

        location ~ \.php$ {
                try_files $uri =404;
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
                fastcgi_pass unix:/var/run/php-fpm.sock;
                fastcgi_index index.php;
                include fastcgi_params;
        }
} 
```

来自 nginx 的日志片段

```
2012/10/21 06:35:48 [error] 21418#0: *1 FastCGI sent in stderr: "PHP message: PHP Fatal error:  Class 'MongoPool' not found in /usr/share/nginx/www/test2.php on line 2
PHP message: PHP Stack trace:
PHP message: PHP   1\. {main}() /usr/share/nginx/www/test2.php:0" while reading response header from upstream, client: 192.168.1.2, server: localhost, request: "GET /test2.php HTTP/1.1", upstream: "fastcgi://unix:/var/run/php-fpm.sock:", host: "192.168.1.149" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:49:07.497

正如用户**[eicto 所](https://stackoverflow.com/users/815386/eicto)**暗示的那样，MongoDb Driver for PHP 的创建者在大约 2 个月前从驱动程序的主干版本中删除了此类（请参阅**[此提交](https://github.com/mongodb/mongo-php-driver/commit/91c4f710f630829f054712046fd5b17103f83152)**）。

> 我们将添加回 MongoPool 和其他几种方法以实现向后兼容性，但它们不会做任何事情，只会发出 E_DEPRECATED 警告

使用开发版本时要小心。

# .htaccess - htaccess 301 将旧页面动态重定向到新页面

> ID：13003561
> 
> 赞同：1
> 
> 时间：2012-10-22T00:20:49.473
> 
> 标签：.htaccess, redirect, http-status-code-301

我已经更改了我的地址并使它们成为 sef，但是我的一些链接是旧的，其中一些是由人们共享的，如果他们尝试进入那里，他们会看到 500 内部服务器错误，正如你可以想象的那样，我需要要将它们重定向到新网址，我知道如何静态重定向，但不知道如何动态重定向

例如，我的旧链接是：mywebsite.com/profile/1，我的新链接是 mywebsite.com/profile/1/johnny-walker

如果有人试图查看我的旧链接，我希望他们重定向到我的新链接

我的旧规则是：

```
RewriteRule ^profile/(.*)/?$ profile.php?id=$1 [L] 
```

我的新规则是：

```
RewriteRule ^profile/([0-9]*)/(.*)/?$  profile.php?id=$1&slug=$2 [QSA,L] 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:18:58.667

> 那是那个家伙的名字，它来自数据库，我用get exc调用它，当用户注册时，它会自动创建，我只是写它作为示例

我的意思是，在你拥有的只是`1`（id）之前。从那个id，你怎么得到蛞蝓？如果您可以从数据库中获取它，那么您需要保留这两个规则（进行一些小的更改）：

```
RewriteRule ^profile/([0-9]+)/([^/]+)/? profile.php?id=$1&slug=$2 [QSA,L]
RewriteRule ^profile/([0-9]+)/? profile.php?id=$1 [L] 
```

然后在`profile.php`您需要执行以下操作：

1.  在文件的开头，检查是否有`$_GET['slug']`值，如果有，则正常服务器启动页面
2.  如果没有 slug 值，那么您需要获取`$_GET['id']`（清理的）值并从数据库中检索 slug
3.  使用该`header()`函数，创建一个重定向：

    ```
    header('HTTP/1.1 301 Moved Permanently');
    header('Location: /profile/' . $id . '/' . $slug);
    exit(); 
    ```

    其中`$id`是 id，`$slug`是数据库中的 slug 值。

这样当有人请求时`http://mywebsite.com/profile/1`，重写规则会将其发送到**profile.php**，就像之前可以制作规范 URL 并进行重定向一样。

# android - Android Install to Tablet 放置所有活动的图标

> ID：13003564
> 
> 赞同：0
> 
> 时间：2012-10-22T00:21:18.607
> 
> 标签：android, eclipse, icons, installation

**设置：** 使用 Eclipse 开发 API 16 Android 应用程序并在测试时安装在平板电脑上。

**问题：** 每次我使用 Eclipse 安装应用程序并在实际平板电脑上运行它时，它都会为从主仪表板可见的应用程序中的每个活动创建一个应用程序图标，无论它是否被调用。

**问题：**

1.  为什么会这样？
2.  我该如何阻止它？
3.  松散相关的问题 - 我看到很多人都在寻找一种简单的方法来制作一个简单的可安装文件，以将应用程序放到平板电脑上。我考虑过使用签名的应用程序包和 SD 卡中的第三方应用程序安装程序。有没有其他建议的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:32:08.577

> 为什么会这样？

如果我们不得不猜测，那是因为您在清单中的所有这些活动上都有`MAIN`/ 。`LAUNCHER` `<intent-filter>`

> 我该如何阻止它？

仅将其`<intent-filter>`放在应该出现在启动器中的活动（或活动）上。

> 我见过很多人在寻找一种简单的方法来制作一个简单的可安装文件，以便将应用程序放到平板电脑上。

我不知道您认为“简单的可安装文件”是什么。

> 我考虑过使用签名的应用程序包和 SD 卡中的第三方应用程序安装程序。

我不知道您认为“第三方应用程序安装程序”是什么。

# javascript - 通过单击一个切换图像

> ID：13003565
> 
> 赞同：0
> 
> 时间：2012-10-22T00:21:27.337
> 
> 标签：javascript, html

我有很多缩略图，当我点击一个时，会显示原始的大图。它将替换 elementId“main”位置的默认图像“manifier.jpg”。我的代码：

```
<img src="magnifier.jpg" name="main" id="main">
<br>
<br> 

 <a href="IMG_0554.JPG" onclick="swap(this); return false;"><img src="tn_IMG_0554.JPG"></a> 
 <a href="IMG_0566.JPG" onclick="swap(this); return false;"><img src="tn_IMG_0566.JPG"></a> 
 <a href="IMG_0570.JPG" onclick="swap(this); return false;"><img src="tn_IMG_0570.JPG"></a> 
```

和

```
<script type="text/javascript"> 
     function swap(image) { 
         document.getElementById("main").src = image.href; 
     } 
 </script> 
```

它完美地工作。我的问题，如果我按照这些步骤。

*   1) 单击缩略图。
*   2) 显示更大的图像。
*   3) 点击大图。

    我希望显示默认图像。

如何更改代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:34:22.657

只需为主 img 添加一个 onclick 事件并将其重置回 magnifier.jpg

```
<img id="main" name="main" onclick="this.src='magnifier.jpg'; return false;"> 
```

# xcode - Xcode不断崩溃

> ID：13003566
> 
> 赞同：1
> 
> 时间：2012-10-22T00:21:35.620
> 
> 标签：xcode, crash, osx-mountain-lion

我刚开始为 iOS 编程。我尝试为一个简单的计算器添加一个输入按钮并更改其大小，但 Xcode 不断崩溃。这是报告：

```
Process:         Xcode [406]
Path:            /Applications/Xcode.app/Contents/MacOS/Xcode
Identifier:      com.apple.dt.Xcode
Version:         4.5.1 (1842)

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000

Application Specific Information:
ProductBuildVersion: 4G1004
ASSERTION FAILURE in /SourceCache/IDEInterfaceBuilderCocoaTouch/IDEInterfaceBuilderCocoaTouch-1929/IBPlugin/Utilities/IBObjectMarshalling.m:651
Details:  Failed to arbitrate IBNSLayoutConstraint, IBUIButton, IBUILabel, IBUIView, and IBUIViewController.

Interface Builder encountered an error communicating with the iOS Simulator. If you choose to file a crash report or radar for this issue, please check Console.app for crash reports for "Interface Builder Cocoa Touch Tool" and include their content in your crash report.

Exception name: IBAssertionFailure
Exception reason: ASSERTION FAILURE: 
Reason:     All views needing candidate constraints have already had constraints generated. This most likely indicates a bug involving layout of the following views:
    Layout engine frame ({{20, 20}, {282, 36}}) of <UILabel: 0x81f5560; frame = (20 20; 281 36); text = '0'; clipsToBounds = YES; opaque = NO; autoresize = TM+BM; userInteractionEnabled = NO; layer = <CALayer: 0x815cdd0>> does not match canvas frame ({{20, 20}, {281, 36}}) 
```

我已经尝试过重新安装 Xcode 并重置 iOS 模拟器。我有山狮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:26:28.673

试试这个步骤：

> 1）右键单击导航器中的情节提要
> 
> 2）点击显示文件检查器
> 
> 3）取消选中“使用自动布局”

希望这可以帮助

# facebook - Foursquare API - 当“连接的应用程序”使用 facebook 登录时访问foursquare 令牌

> ID：13003568
> 
> 赞同：0
> 
> 时间：2012-10-22T00:21:39.410
> 
> 标签：facebook, api, foursquare

我们正在构建一个四方连接的应用程序，使用 Facebook 进行登录。在这种情况下，我们的服务器是否有办法查看特定于我们应用程序的 Foursquare 访问令牌，以便我们可以将该令牌与针对 facebook 验证的用户帐户相关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:01:35.450

无法为您的应用获取所有访问令牌的列表。当用户使用 Foursquare 授权您的应用程序时，您应该存储他们的 OAuth 访问令牌，以便您可以代表他们发出请求。您将按照类似的流程向 Facebook 进行身份验证。您的应用需要维护其 Foursquare 令牌和 Facebook 令牌之间的关联。

如果您丢失了 Foursquare 访问令牌，您可以将用户发送到foursquare.com/oauth2/authenticate，如此页面（https://developer.foursquare.com/overview/auth），您的应用将收到另一个 OAuth用户的令牌，就像他们最初授权应用程序时所做的那样。

# model-view-controller - Zend Framework 不存在的控制器重定向到主页？

> ID：13003571
> 
> 赞同：1
> 
> 时间：2012-10-22T00:21:55.157
> 
> 标签：model-view-controller, zend-framework, frameworks, controller

当我输入无效的 url（不存在的控制器）时，它会显示主页而不是返回 404 Page Not Found 页面。有谁知道可能的原因？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T14:51:35.657

嗨，我遇到了同样的问题，我现在知道如何解决它：

在引导程序中有以下初始化

```
function _initModules()
    {
        $this->bootstrap('frontController') ;
        $front = $this->getResource('frontController') ;
        $front->addModuleDirectory(APPLICATION_PATH . "/modules");
        $front->setParam("useDefaultControllerAlways", false);
    } 
```

设置 'useDefault....' 将在 404 发生时使用默认控制器。

您还应该确保您的错误控制器设置正确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:13:09.903

检查是否在引导程序中注册了任何插件，是否配置为捕获异常或设置任何 ACL 机制。
还要检查错误控制器。可能在那里实现了一些转发方法。

# mysql - 在 SQL 中获取每一天的数据

> ID：13003572
> 
> 赞同：0
> 
> 时间：2012-10-22T00:22:04.363
> 
> 标签：mysql, sql, date

我目前有以下 SQL 语句

MySQL 查询：

```
SELECT
    c.day,
    COUNT(*)
FROM
    calendar c
JOIN
    visitors d
ON  DAYOFMONTH(d.created) = c.day
WHERE
    c.day BETWEEN DAYOFMONTH('2012-10-01') AND DAYOFMONTH('2012-10-31')
AND
    site_id = 16
GROUP BY
    DAYOFMONTH(d.created)
ORDER BY
    DAYOFMONTH(d.created) 
```

我的表：

```
Calendar

id  | day
---------
1   | 1
2   | 2
3   | 3
...
31  | 31

Visitors

id  | site_id | created
-----------------------------------
1   | 16      | 2012-10-18 11:14:39
2   | 16      | 2012-10-18 11:15:17
3   | 11      | 2012-10-18 11:49:14
4   | 11      | 2012-10-18 11:49:43
5   | 16      | 2012-10-19 11:54:37
6   | 1       | 2012-10-19 05:56:31
7   | 2       | 2012-10-19 05:57:56 
```

[我已经按照这个答案](https://stackoverflow.com/a/2274867/37532)的规定创建了表格和日历，但我似乎仍然得到了相同的信息。我只得到我有数据的日期。

```
day    |   COUNT(*)
---------------------
18     |   2
19     |   1 
```

我还需要检索`0`没有数据的日期。

更新：

```
I tried this:
SELECT *
FROM calendar c
LEFT JOIN visitors d
ON  DAYOFMONTH(d.created) = c.day 
```

和

```
SELECT *
FROM calendar c
LEFT JOIN visitors d
ON  DAYOFMONTH(d.created) = c.day
WHERE  site_id = 16 
```

我可以确认那`site_id = 16`肯定是杀死结果的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:23:30.103

使用`LEFT JOIN`而不是`INNER JOIN`

```
SELECT ...
FROM   calendar c 
       LEFT JOIN  visitors d
         ON DAYOFMONTH(d.created) = c.day
WHERE... 
```

`INNER JOIN`仅检索在另一个表上具有至少一个匹配项的行，同时检索在*左侧*`LEFT JOIN`表上定义的所有行，无论它在其他表上是否有匹配项。

 ***更新 1**

```
SELECT  c.day,
        COUNT(*)
FROM    calendar c
        LEFT JOIN
        (
            SELECT *
            FROM   visitors
            WHERE  site_id = 16
        ) d ON  DAYOFMONTH(d.created) = c.day
WHERE c.day BETWEEN DAYOFMONTH('2012-10-01') AND DAYOFMONTH('2012-10-31')
GROUP BY DAYOFMONTH(c.day)
ORDER BY DAYOFMONTH(c.day) 
```

**[索普奥巴泽更新](https://stackoverflow.com/users/37532/thorpe-obazee)

```
SELECT  c.day,
        COUNT(site_id)
FROM    calendar c
        LEFT JOIN
        (
            SELECT *
            FROM   visitors
            WHERE  site_id = 16
        ) d ON  DAYOFMONTH(d.created) = c.day
WHERE c.day BETWEEN DAYOFMONTH('2012-10-01') AND DAYOFMONTH('2012-10-31')
GROUP BY c.day
ORDER BY c.day 
```

我们不能使用`COUNT(*)`，因为它会`1`每天返回。我们也不应该在 and 中使用`DAYOFMONTH`on c.day，`GROUP BY`因为`ORDER BY`它已经是我们需要的了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T00:36:17.883

正如最后一张海报所说，使用 LEFT JOIN 但用于澄清。

想象一下您的日历表是​​左表，访问者表是右表

使用 INNER JOIN

```
FROM Calendar c
INNER JOIN Visitors v
ON c.Date = v.Date 
```

左侧和右侧都必须匹配。

使用左连接

```
FROM Calendar c
LEFT JOIN Visitors v
ON c.Date = v.Date 
```

您将返回 LEFT 表（日历）中的所有记录，并且仅返回与 RIGHT 表（访问者）匹配的记录，对于没有任何匹配访问者数据的所有日历日期，您将保留 NULL（当然，除非您处理这个像COALESCE这样的东西）

右连接

```
FROM Calendar c
RIGHT JOIN Visitors v
ON c.Date = v.Date 
```

您将返回右表（访问者）中的所有记录，并且仅返回与左表（日历）匹配的记录，对于未找到匹配项的列值，您将获得 NULLS，这将捕获您拥有访问者数据的任何记录，甚至如果日期不在日历表中。

希望有帮助。

凯文

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T01:27:10.733

回答这个问题的另一个建议是移动

```
WHERE site_id = 16 
```

进入 JOIN，例如，

```
SELECT
 c.[Day]
,COUNT(v.[id])
FROM TestDB.dbo.Calendar c
LEFT JOIN TestDB.dbo.Visitor v
ON c.[Day] = DATEPART(d,v.Created)
AND v.[SiteID] = 16
GROUP BY c.[Day]
ORDER BY c.[Day] 
```

我个人不喜欢使用派生表，因为我已经看到使用更本机连接的性能要好得多，但是，我通常处理具有数百万行的数据集。*

# core-data - UI 冻结与神奇的记录

> ID：13003573
> 
> 赞同：1
> 
> 时间：2012-10-22T00:22:10.237
> 
> 标签：core-data, freeze, magicalrecord, background-thread

您好，我是 Riccardo，我是一名独立开发者！

我开始用objective-c编程的次数并不多，而且我还是个新手！:D

我开始学习 Core Data，一切都很顺利，直到我遇到并发！使用 Core Data，我的应用程序在保存操作期间继续阻塞，所以我用谷歌搜索了带有背景上下文的核心数据，我找到了 Magical Record。

使用 Magical Record，我大大降低了代码的复杂性 :) 但是我还有一个问题，我阅读了有关 Magical Record 的所有内容，我尝试使用不同的方法修复它，但 UI 冻结仍然存在 :( 所以我没有知道如何解决它...

尽管我认为所有方法都存在问题（查看冻结 UI），但列出的 4 种方法中有 3 种非常快，因此无法察觉。唯一存在巨大问题并且您实际上可以注意到冻结的方法是这个 -->

*   (void) persistAppsFromArray: (NSArray *) arrayOfApps inResearch: (NSDictionary *) info;

我使用一个数组来创建所有应用程序对象，并在我将这些应用程序关联到研究之后（在获取研究后，我使用字典创建谓词）。

这是我的代码。它实际上是一个管理核心数据的整个类。我不在调用这些方法的类中使用队列或线程，所以我认为这里有一些需要修复的地方：-/

我提前谢谢你 ：）

```
#import "CoreDataHelper.h"
#import "CoreData+MagicalRecord.h"

@implementation CoreDataHelper

#pragma mark - Research creator helper

+ (ResearchType *) fetchResearchWithDictionary: (NSDictionary *) info {

// Fetch
// predicates for fetch
NSPredicate * predicateCategory = [NSPredicate predicateWithFormat:@"researchCategory = %@" , [info objectForKey: @"Category"]];
NSPredicate * predicateType = [NSPredicate predicateWithFormat:@"researchType = %@" , [info objectForKey: @"Type"]];
 NSPredicate * predicatePrefix = [NSPredicate predicateWithFormat:@"researchPrefix = %@" , [info objectForKey: @"Prefix"]];

 NSArray * predicates = [NSArray arrayWithObjects: predicateCategory, predicateType, predicatePrefix, nil];

        // create the composite predicate
        NSPredicate * predicateComposito = [NSCompoundPredicate andPredicateWithSubpredicates:predicates];

    // obtain the result
    // Passo la ricerca al brain
   return [ResearchType MR_findFirstWithPredicate: predicateComposito];
} 
```

* * *

```
 + (void)updateResearchWithDictionary:(NSDictionary *) info withCompletionBlock:(completion_block)updatedResearch {

    // Get the context
    NSManagedObjectContext *localContext    = [NSManagedObjectContext MR_context];

    // predicates
    NSPredicate * predicateCategory = [NSPredicate predicateWithFormat:@"researchCategory = %@" , [info objectForKey: @"Category"]];
    NSPredicate * predicateType = [NSPredicate predicateWithFormat:@"researchType = %@" , [info objectForKey: @"Type"]];
    NSPredicate * predicatePrefix = [NSPredicate predicateWithFormat:@"researchPrefix = %@" , [info objectForKey: @"Prefix"]];

    NSArray * predicates = [NSArray arrayWithObjects: predicateCategory, predicateType, predicatePrefix, nil];

    // composite predicate
    NSPredicate * predicateComposito = [NSCompoundPredicate andPredicateWithSubpredicates:predicates];

// create research object 
    ResearchType *research = [ResearchType MR_findFirstWithPredicate: predicateComposito inContext:localContext];

// new properties
    research.researchDate      = [info objectForKey:@"Research Date"];
    research.researchLimit     = [info objectForKey:@"Limit"];
    //research.apps              =  nil;

  [localContext MR_saveInBackgroundCompletion:^{

      updatedResearch(research);

  }];
 } 
```

* * *

```
 + (void) persistResearchWithDictionary: (NSDictionary *) info withCompletionBlock:(completion_block)savedResearch {

// Get the context
NSManagedObjectContext *localContext    = [NSManagedObjectContext MR_context];

// Create a new Person in the current thread context
ResearchType * research   = [ResearchType MR_createInContext:localContext];

// Set properties
research.researchCategory    = [info objectForKey:   @"Category"];
research.researchPrefix      = [info objectForKey:   @"Prefix"];
research.researchCategoryUrl = [info objectForKey:   @"Category Code Url"];
research.researchType        = [info objectForKey:   @"Type"];

research.researchCountry     = [info objectForKey:   @"Country"];
research.researchCountryCode = [info objectForKey:   @"Country Code"];
research.researchDate        = [info objectForKey:   @"Research Date"];
research.researchDevice      = [info objectForKey:   @"Device"];
research.researchLimit       = [info objectForKey:   @"Limit"];

// Save changes
 [localContext MR_saveInBackgroundCompletion:^{

   savedResearch(research);
 }];

 } 
```

* * *

```
 + (void) persistAppsFromArray: (NSArray *) arrayOfApps inResearch: (NSDictionary *) info  {

// Get the local context
    NSManagedObjectContext *localContext    = [NSManagedObjectContext MR_context];

 [localContext MR_saveInBackgroundCompletion:^{

     // predicates
     NSPredicate * predicateCategory = [NSPredicate predicateWithFormat:@"researchCategory = %@" , [info objectForKey: @"Category"]];
     NSPredicate * predicateType = [NSPredicate predicateWithFormat:@"researchType = %@" , [info objectForKey: @"Type"]];
     NSPredicate * predicatePrefix = [NSPredicate predicateWithFormat:@"researchPrefix = %@" , [info objectForKey: @"Prefix"]];

     NSArray * predicates = [NSArray arrayWithObjects: predicateCategory, predicateType, predicatePrefix, nil];

     // Composite predicate
     NSPredicate * predicateComposito = [NSCompoundPredicate andPredicateWithSubpredicates:predicates];

     ResearchType * researchBgContext = [ResearchType MR_findFirstWithPredicate: predicateComposito];

     for (NSDictionary * info in arrayOfApps) {

         AppInDb * app             = [AppInDb MR_createEntity];

         app.appName                  = [info objectForKey: @"App Name"];
         app.appItunesLink            = [info objectForKey: @"iTunes Link"];
         app.appBundleID              = [info objectForKey: @"Bundle ID"];
         app.appID                    = [info objectForKey: @"ID"];
         app.appPriceLabel            = [info objectForKey: @"Price Label"];
         app.appReleaseDate           = [info objectForKey: @"Release Date String"];
         app.appIconImageLink         = [info objectForKey: @"Image Link 100"];
         app.appDeveloperPageLink     = [info objectForKey: @"Developer Page Link"];
         app.appDeveloper             = [info objectForKey: @"Developer"];
         app.appRights                = [info objectForKey: @"Rights"];
         app.appDescription           = [info objectForKey: @"App Description"];
         app.appCategory              = [info objectForKey: @"App Category"];
         app.appCategoryNumber        = [info objectForKey: @"Category Number For Url"];

         // adding app to the related research (one to many relationship)
         [researchBgContext addAppsObject:app];

           }
       }];

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T01:11:52.493

试试这个方法：

[MagicalRecord saveInBackgroundWithBlock:^(NSManagedObjectContext *localContext)block { }];

您可以使用许多其他方法，但这应该会给您一个良好的开端。MagicalRecord 将为您创建上下文，一切都发生在后台线程上。它还将自动保存到父上下文。

我推荐阅读这篇很棒的文章：[Core Data and Threads, without the Headache](http://www.cimgf.com/2011/05/04/core-data-and-threads-without-the-headache/) by Saul Mora，他是 MagicalRecord 背后的人。这是一本很棒的读物，它告诉您 MagicalRecord 的许多优点。

祝你好运！

# python - 如何根据名称将文本文件中的单词添加到字典中？

> ID：13003575
> 
> 赞同：3
> 
> 时间：2012-10-22T00:22:45.727
> 
> 标签：python, file, list, dictionary

所以我有一个文本文件，其中包含罗密欧与朱丽叶戏剧第一幕的剧本，我想计算某人说了多少次单词。

这是文本： http: [//pastebin.com/X0gaxAPK](http://pastebin.com/X0gaxAPK)

文中有 3 个人在讲话：Gregory、Sampson 和 Abraham。

基本上我想为三个演讲者中的每一个制作 3 个不同的词典（如果这是最好的方法吗？）。用人们分别说的单词填充字典，然后计算他们在整个脚本中说出每个单词的次数。

我该怎么做呢？我想我可以算出字数，但是对于如何区分谁说什么并将其放入每个人的 3 个不同的字典中，我有点困惑。

我的输出应该是这样的（这是不正确的，但一个例子）：

```
Gregory - 
25: the
15: a
5: from
3: while
1: hello
etc 
```

其中数字是文件中所说的单词的频率。

现在，我编写了读取文本文件、去除标点符号并将文本编译成列表的代码。我也不想使用任何外部模块，我想用老式的方式来学习，谢谢。

您不必发布确切的代码，只需解释我需要做什么，希望我能弄清楚。我正在使用 Python 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:08:57.533

```
import collections
import string
c = collections.defaultdict(collections.Counter)
speaker = None

with open('/tmp/spam.txt') as f:
  for line in f:
    if not line.strip():
      # we're on an empty line, the last guy has finished blabbing
      speaker = None
      continue
    if line.count(' ') == 0 and line.strip().endswith(':'):
      # a new guy is talking now, you might want to refine this event
      speaker = line.strip()[:-1]
      continue
    c[speaker].update(x.strip(string.punctuation).lower() for x in line.split()) 
```

示例输出：

```
In [1]: run /tmp/spam.py

In [2]: c.keys()
Out[2]: [None, 'Abraham', 'Gregory', 'Sampson']

In [3]: c['Gregory'].most_common(10)
Out[3]: 
[('the', 7),
 ('thou', 6),
 ('to', 6),
 ('of', 4),
 ('and', 4),
 ('art', 3),
 ('is', 3),
 ('it', 3),
 ('no', 3),
 ('i', 3)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T00:34:35.413

你不想马上去掉标点符号。新行前面的冒号告诉您一个人的报价从哪里开始和结束。这很重要，因此您知道将给定引号中的单词附加到哪个字典。您可能需要某种 if-else 附加到不同的字典，具体取决于当前说话的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T01:11:49.817

这是一个幼稚的实现：

```
from collections import defaultdict

import nltk

def is_dialogue(line):
    # Add more rules to check if the 
    # line is a dialogue or not
    if len(line) > 0 and line.find('[') == -1 and line.find(']') == -1:
        return True

def get_dialogues(filename, people_list):
    dialogues = defaultdict(list)
    people_list = map(lambda x: x+':', people_list)
    current_person = None
    with open(filename) as fin:
        for line in fin:
            current_line = line.strip().replace('\n','')
            if  current_line in people_list:
                current_person = current_line
            if (current_person is not None) and (current_line != current_person) and is_dialogue(current_line):
                dialogues[current_person].append(current_line)
    return dialogues

def get_word_counts(dialogues):
    word_counts = defaultdict(dict)
    for (person, dialogue_list) in dialogues.items():
        word_count = defaultdict(int)
        for dialogue in dialogue_list:
            for word in nltk.tokenize.word_tokenize(dialogue):
                word_count[word] += 1
        word_counts[person] = word_count
    return word_counts

if __name__ == '__main__':
    dialogues = get_dialogues('script.txt', ['Sampson', 'Gregory', 'Abraham'])
    word_counts = get_word_counts(dialogues)
    print word_counts 
```

# java - 检查父节点是否包含哈希标签-跨域

> ID：13003578
> 
> 赞同：0
> 
> 时间：2012-10-22T00:23:08.993
> 
> 标签：java, javascript

嗨，是否可以检查父 URL 是否包含哈希标签而不会获得“权限被拒绝”。检查发生在子框架不同的域中。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:30:49.460

不可以。如果没有使用跨域消息传递的合作域，您将无法从一个域访问来自不同域的不同框架并查看它的 URL 或哈希标记。

[您可以在此处查看](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)同源限制的说明。

如果两个框架（在不同的域上）正在合作，您可以使用`window.postMessage()`现代浏览器中的两个框架进行通信。

# iphone - 如何检查 CSV 文件中列的内容？

> ID：13003579
> 
> 赞同：1
> 
> 时间：2012-10-22T00:23:11.207
> 
> 标签：iphone, objective-c, ios

我正在开发一个小应用程序，用户通过 iTunes 将 csv 文件上传到应用程序中的文档文件夹。我正在使用以下代码，但它只检查第一行的第一列。它不检查第二行列。我的 csv 文件每个包含 2 行和 4 列。第一列是一个数字。用户将在文本框中键入此号码并单击按钮以检查该号码是否在 csv 文件中。以下功能是我正在使用的功能

```
-(void)CheckEntry //this function checks the example.csv file
{
    NSArray *DocumentPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *DocumentDirectory = [DocumentPath objectAtIndex:0];

    NSString *FullPath = [DocumentDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"example.csv"]];

    NSString * pstrCSVFile= [NSString stringWithContentsOfFile:FullPath encoding:NSASCIIStringEncoding error:NULL];

    NSArray * paRowsOfCSVFile= [pstrCSVFile componentsSeparatedByString:@"\r\n"];

    NSArray *paColumnsOfRow;
    NSString *pstrFirstColumn;
    for(NSString * pstrRow in paRowsOfCSVFile)
    {
        paColumnsOfRow= [pstrRow componentsSeparatedByString:@","];
        pstrFirstColumn= [paColumnsOfRow objectAtIndex:0];

        if([pstrFirstColumn localizedCaseInsensitiveCompare:GWIDText.text] == NSOrderedSame)
        {
            NSString *msg = [NSString stringWithFormat:@"The record was found"];
            UIAlertView *alertingFileName = [[UIAlertView alloc]initWithTitle:msg message:msg delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [alertingFileName show];
        }
        else
        {
            NSString *msg = [NSString stringWithFormat:@"Not Found"];
            UIAlertView *alertingFileName = [[UIAlertView alloc]initWithTitle:msg message:msg delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [alertingFileName show];
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:07:05.100

您正在尝试在循环内显示警报视图。因此，您最终会尝试显示与行数一样多的警报视图。这不太可能是你想要的。你的要求不清楚。你想检查所有行的所有列，只检查所有行的第一列，还是简单地找到第一个匹配项并停止？

在循环之前创建一个 BOOL 变量。类似的东西`BOOL found = NO;`。然后在循环中，找到匹配项时将变量设置为 YES。然后，在循环之后，根据`found`变量显示适当的警报。确切的解决方案实际上取决于您在这里的真实意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:15:17.333

尝试使用 componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet] 而不是 componentsSeparatedByString: 看看是否有帮助。

# python - 帕斯卡三角形/线

> ID：13003580
> 
> 赞同：-1
> 
> 时间：2012-10-22T00:23:26.127
> 
> 标签：python, recursion

我正在为作业编写代码，它需要输出帕斯卡三角形的值，而不是三角形的值。例如我输入

```
pascalLine(2) 
```

它输出：

```
[1,2,1] 
```

并为：

```
pascalLine(4) 
```

它输出：

```
[1,4,6,4,1] 
```

我目前有这段代码，我相信它远未完成，因为它输出一个三角形。

```
def pascalLine(n):
  for rownum in range (n):
      newValue=1
      PrintingList = list()
      for iteration in range (rownum):
          newValue = newValue * ( rownum-iteration ) * 1 / ( iteration + 1 )
          PrintingList.append(int(newValue))
      print(PrintingList)
  print() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T00:37:43.423

假设您计算行的原始代码`n`是正确的，您可以摆脱外部循环：

```
def pascalLine(n):
    newValue=1
    row = [newValue]
    for i in range (n):
        newValue = (newValue * (n-i)) / ( i + 1 )
        row.append(newValue)

    print(row)
    print() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T00:45:49.240

您可以使用这个简单的算法来计算任意行，而不必计算整个三角形：

```
def pascal_row(n):
    row = [1]

    for col in range(1, n):
        row.append(row[-1] * (n - col) / col)

    return row 
```

# linux - freeglut 是 Linux 上的标准 OpenGL 窗口管理器吗？

> ID：13003588
> 
> 赞同：0
> 
> 时间：2012-10-22T00:24:56.467
> 
> 标签：linux, opengl, porting

我将把我用 Java 编写的 Java OpenGL 游戏引擎移植到 Linux 上的 C 语言。

我的主要问题是在 Linux 中用于 OpenGL 应用程序的**事实上的窗口管理实用程序是什么？**是`freeglut`吗？

如果`freeglut`不是最常用的；那么最常用的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:34:23.147

在任何平台上都没有“事实上的”OpenGL 窗口管理实用程序。FreeGLUT 是常用的，但这并不意味着什么。重要的是你用它*做*什么。

一般来说，FreeGLUT 不适合“严肃”的应用程序。它用于独立的演示、教程等。虽然有 API 可以让您控制主循环，但默认 API（99.9% 的示例代码将使用的 API）让 FreeGLUT 管理主循环。对于大多数涉及时间压力或某种动画的游戏，这通常是不可接受的。

您可能能够让您的代码在 FreeGLUT 下运行（尽管没有理由它也不能只是 Java 代码），或者您可能不会。但也请注意，FreeGLUT 没有很好的输入例程（至少，不是用于游戏），并且它的声音功能为零。

# iphone - 应用程序终止segue？

> ID：13003589
> 
> 赞同：0
> 
> 时间：2012-10-22T00:25:00.557
> 
> 标签：iphone, segue, xcode4.5, uistoryboardsegue

我有一个带有大约 10 个 veiw 控制器和一个登录视图控制器的故事板应用程序，一旦应用程序关闭或终止，我如何从 10 个视图中的任何一个中转到登录视图（设置为初始视图）？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T21:06:26.303

编辑并重新开始。我想念这个问题。

你有两个选择

**选项 1**：进入前景时更改视图。这是重新加载情节提要的示例

```
- (void)applicationWillEnterForeground:(UIApplication*)application {
    UIStoryboard* storyBoard = [UIStoryboard storyboardWithName:@"storyBoardName" bundle:[NSBundle mainBundle]];
    self.window.rootViewController = [storyBoard instantiateInitialViewController];
} 
```

**选项 2**：当有人离开时重新加载你的洞应用程序

在 info plist 中将**“应用程序不在后台运行”**设置为**YES**

在 xCode 中，您可以通过选择左侧的项目、目标，然后选择 info 选项卡来完成此操作

# sql - SQL：基于 1 个字段不同

> ID：13003591
> 
> 赞同：0
> 
> 时间：2012-10-22T00:26:03.720
> 
> 标签：sql, sqlite, distinct

我有一个包含重复城市名称的数据集。我希望得到所有的记录，如果城市是重复的，那么就得到第一个：

```
1  London  Fred
2  Paris   Sally
3  London  Marce 
```

我想要这个返回：

```
1  London  Fred
2  Paris   Sally 
```

我正在使用 SQLite，但这并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T00:30:30.720

```
SELECT a.*
FROM tableName a
(
    SELECT countryName, MIN(id) minID
    FROM tableName
    GROUP BY countryName
) b ON a.id = b.minID 
         -- AND a.countryName = b.countryName 
```

# php - Joomla 2.5 - 希望根据类别将信息附加到某些文章 URL

> ID：13003593
> 
> 赞同：0
> 
> 时间：2012-10-22T00:26:06.403
> 
> 标签：php, url, joomla2.5

我有一个正在构建的站点，其中有一个用于播客/广播节目剧集的模块。如果您通过主导航正常进入该页面，它将加载最新的节目。不过，如果您单击其中一个文章链接，我希望播放器加载特定的节目。所以每篇文章都链接到特定的节目，如果你点击它，我想通过 URL 传递 ID 信息。像 ?podcast_id=2 这样的东西附加到 URL 的末尾。有人有想法吗？我试图弄乱 K2，看看我是否能在那里找到合适的东西，但它与我的 Disqus 插件冲突。

我还想在文章创建中添加一个字段来输入节目的ID。对此的想法也将不胜感激。

链接如下：

[http://www.grindhardnetwork.com/grind_hard_site/radio-show-2.html](http://www.grindhardnetwork.com/grind_hard_site/radio-show-2.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:31:16.553

我打算推荐 K2 plus K2 BNR 内容，这样您就可以将播客放在模块位置。这将使它很容易做到，可能值得研究解决冲突并以这种方式进行。

如果没有，那么您可以将自定义字段添加到您的 Joomla 文章中，然后使用替代布局来显示播客。

添加自定义字段 - [http://docs.joomla.org/Adding_custom_fields_to_the_article_component](http://docs.joomla.org/Adding_custom_fields_to_the_article_component)

替代布局 - [http://docs.joomla.org/Layout_Overrides_in_Joomla_1.6#Introduction_to_Alternative_Layout_Feature_in_Version_1.6](http://docs.joomla.org/Layout_Overrides_in_Joomla_1.6#Introduction_to_Alternative_Layout_Feature_in_Version_1.6)

# java - 为许多类干净地添加一些功能

> ID：13003594
> 
> 赞同：3
> 
> 时间：2012-10-22T00:26:09.803
> 
> 标签：java, swing, user-interface

在我正在处理的 Java 项目中，我使用 GridBagLayout 来布置我的 UI。UI 中的每个组件都与一个 x 和 y 坐标相关联，GridBagConstraints 使用该坐标将组件放置在 UI 中。

我有一个 addAt(component, x, y, constraints) 方法，它将给定组件放置在 UI 中的坐标 (x,y) 处。

而不是执行以下操作来设置我的 UI：

```
addAt(component1, 3, 1, constraints);
addAt(component2, 3, 2, constraints);
addAt(component3, 3, 3, constraints);
addAt(component4, 3, 4, constraints); 
```

我想将每个组件的坐标存储在对象本身中，这会给我：

```
addAt(component1, constraints);
addAt(component2, constraints);
addAt(component3, constraints);
addAt(component4, constraints); 
```

我目前这样做的方法是覆盖我正在使用的所有 JComponents 的基类，并使用方法 getXCoord() 和 getYCoord() 实现接口。

我已经看到 JComponents 有 getX() 和 getY() 方法，但是这些方法的目的与我想要的不同。

所以基本上，我的问题是，鉴于上述信息，是否有比创建每个单独 JComponent 的覆盖版本更清洁的方法来实现此功能？如果我在这里遗漏了一些明显的东西，我深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T01:34:48.290

您可以使用中介或`get/putClientProperty`方法来存储组件和坐标之间的关联，并查询它以检索`addAt`方法上的坐标。

你的坐标可以是这样的：

```
class Coordinates {
  private final int x;
  private final int y;
  public Coordinates(int x, int y) {
    this.x = x;
    this.y = y;
  }
  public int getX() { return x; }
  public int getY() { return y; }
} 
```

你在你的`addAt`：

```
private void addAt(JComponent component, GridBagConstraints constraints) {
  Coordinates coordinates = (Coordinates)component.getClientProperty("coords");
  int x = coordinates.getX();
  int y = coordinates.getY();

  // place it in the grid...
} 
```

例如，您可以像这样创建关联：

```
public void setUpComponentsCoordinates() {
  component1.putClientProperty("coords", new Coordinates(3, 1));
  component2.putClientProperty("coords", new Coordinates(3, 2));
  component3.putClientProperty("coords", new Coordinates(3, 3));
  component4.putClientProperty("coords", new Coordinates(3, 4));
} 
```

# scala - 如何使用 Scala Breeze 对向量执行逐元素标量操作？

> ID：13003596
> 
> 赞同：5
> 
> 时间：2012-10-22T00:26:46.107
> 
> 标签：scala, scala-breeze, scalala

使用 Scalala，可以使用标量操作数对 Vector 执行元素操作。假设您有一个介于 0 和 1 之间的随机数向量，并且您想从 1 中减去每个值：

```
import breeze.linalg._

val x = DenseVector.rand(5)
val y = 1d :- x  //DOESN'T COMPILE: "value :- is not a member of Double" 
```

与 Scalala 不同，Breeze 无法使用这种方法进行编译。您可以通过生成向量来解决此问题，但似乎应该有更好的方法。

```
val y = DenseVector.ones[Double](x.size) :- x 
```

另一种解决方法是使用更易读的 mapValues 方法：

```
val y = x mapValues { 1 - _ } 
```

使用 Breeze 完成此任务的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-07-07T13:05:05.743

这是一个古老的问题，并且已经过时了。目前，使用breeze`1.0`和scala`2.11`现在支持这种语法：

```
import breeze.linalg._

val x = DenseVector.rand(5)
val y = 1d :- x 
```

输出：

```
import breeze.linalg._
x: breeze.linalg.DenseVector[Double] = DenseVector(0.8274425487378012, 0.11585689753323769, 0.9691257294006741, 0.15061939654911782, 0.8337942418593918)
warning: there was one deprecation warning; re-run with -deprecation for details
y: breeze.linalg.DenseVector[Double] = DenseVector(0.1725574512621988, 0.8841431024667623, 0.030874270599325904, 0.8493806034508822, 0.16620575814060823) 
```

# java - for循环可以使用随机数吗？

> ID：13003599
> 
> 赞同：0
> 
> 时间：2012-10-22T00:28:00.073
> 
> 标签：java, loops, for-loop

这是我第一次尝试打印出一组 50 个范围为 -20 到 20 的随机整数。

```
int set1 = (int)(Math.random() * (40) + (-20) );
Scanner input = new Scanner(System.in);
for ( int set2 =1; set2 < 20 ; set2 = set1 )
    System.out.print(set2); 
```

谁能帮助我了解我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T00:40:18.823

这就是要走的路：

```
for (int i = 0; i < 50; i++) {
    int random = (int)(Math.random() * (40) + (-20) );
    System.out.print(random);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T00:34:21.073

for 循环应该由声明、条件和增量组成。如果你有最后一部分，`set2 += set1`那么它会起作用......

您可能希望使用 for 循环运行 50 次

```
for(int i = 0; i < 50; i ++){
    //generate random number here, print here
    int random = (int)(Math.random() * (40) + (-20) );
    System.out.print(random);
} 
```

在每个循环中，您都会生成一个新数字...

# c# - Visual Studio 2010 项目到 Visual Studio 2012

> ID：13003603
> 
> 赞同：5
> 
> 时间：2012-10-22T00:28:23.530
> 
> 标签：c#, c++, wpf, visual-studio-2010, visual-studio

我的朋友刚刚给我发了一个 VS2010 项目，其中包含 2 个解决方案：一个带有一个 CPP 文件，另一个带有 C# WPF 项目（一个 XAML 和一个 CS）的解决方案。使用 VS2010 在他的计算机上一切正常。当他构建并执行项目时，XAML 主窗口按预期显示。

当我尝试在我的计算机上对 VS2012 执行相同操作时，构建项目没有问题。但是，当我运行它时，什么也没有发生。我在 C# 代码中添加了一些断点，我意识到代码可以运行，但窗口从未出现。因此，一旦代码执行完毕，应用程序就会退出，而不是在 XAML 界面中等待用户输入。

我以前从未遇到过这个问题，通常从 VS2010 到 VS2012 效果很好。在这里，一切似乎都正常工作......除了现在在运行项目时显示的 XAML 窗口，这很烦人。

有没有人知道那里发生了什么？我可能在这里遗漏了一些真正重要的东西，但我没有看到解决方案或项目属性中的任何设置实际上可以帮助我确保在我启动项目时运行 XAML 窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:20:44.847

需要注意的一件事是 4.5 编译器更改了 foreach 循环中 lambda 的语义，因此您的应用程序可能会遇到这种情况。见这里：[https ://connect.microsoft.com/VisualStudio/feedback/details/732657/c-5-compiler-doesnt-respect-the-semantics-of-the-foreach-range-variable-when-langversion-5](https://connect.microsoft.com/VisualStudio/feedback/details/732657/c-5-compiler-doesnt-respect-the-semantics-of-the-foreach-range-variable-when-langversion-5)

基本上，如果你有这样的事情：

```
List<Action<int>> actions = new List<Action<int>>();
foreach (var x in new[] { 10, 20, 30 })
{
   actions.Add(() => Console.WriteLine("x = {0}", x);
}

actions.ForEach(a => a()); 
```

根据是用 4.0 还是 4.5 编译的，会给出不同的结果。我们有点绊倒了，因为我们的构建机器仍然是 4.0，我们将开发机器升级到 VS 2012。

# iphone - 使用情节提要时如何更改按钮的 autoResizingMask？

> ID：13003604
> 
> 赞同：0
> 
> 时间：2012-10-22T00:28:38.770
> 
> 标签：iphone, objective-c

很抱歉这个新手问题，我对此很陌生（并且只是通过 iTunes 中的斯坦福讲座）。当我更改它们的标题时，我试图停止调整按钮的大小。freenode 上的某个人告诉我，我应该：

> button.autoresizingMask = UIViewAutoResisingFlexibleWidth;

如何将代码添加到视图中？我尝试单击“显示版本编辑器”，但它显示了 XML（并且更改它没有做任何事情）。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:58:30.210

```
view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

# android - 向 chartengine 折线图添加后退按钮

> ID：13003605
> 
> 赞同：0
> 
> 时间：2012-10-22T00:28:40.997
> 
> 标签：android, button, graph, achartengine

我正在尝试向 achartengine 生成的图形添加一个按钮。代码运行良好并显示图形，但未创建按钮。有什么建议么？

```
public class GraphActivity extends Activity {

public Intent getIntent(final Context context){
    Button buttonDone = new Button (context);
    buttonDone.setText("Done");
    buttonDone.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent done = new Intent(context, MainActivity.class);
            startActivity(done);
        }
    });

    int[] x= {1,2,3,4,5,6,7,8,9,10};
    int[]y={30, 34, 45, 77, 89,100, 110, 120, 130, 150};

    TimeSeries series = new TimeSeries ("LineGraph");
    for (int i=0; i<x.length;i++){
        series.add(x[i], y[i]);
    }

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    dataset.addSeries(series);

    XYMultipleSeriesRenderer mrenderer = new XYMultipleSeriesRenderer();
    XYSeriesRenderer renderer = new XYSeriesRenderer();
    mrenderer.addSeriesRenderer(renderer);
    Intent gintent = ChartFactory.getLineChartIntent(context, dataset, mrenderer, "LineGraph");
    return gintent;

} 
```

}

# titanium - 钛 touchstart，touchend 在视图之间移动时不进行

> ID：13003607
> 
> 赞同：0
> 
> 时间：2012-10-22T00:28:52.303
> 
> 标签：titanium

所以我使用的是钛，并且在视图之间移动时 touchstart 事件似乎没有触发。

举个例子，假设我的页面上有一个按钮。该按钮有一个 touchstart 事件，例如，使它变大两倍。现在，如果我直接触摸按钮，那么万岁！按钮是两倍大。

但是，如果我触摸屏幕上的其他位置（例如在背景上），然后将手指拖到按钮上，那么按钮不会变大。事实上，什么也没有发生。

钛处理视图之间的触摸事件的方式是否存在问题？我是否打算设置或重置一些值以使其发生？

干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:55:08.383

I wouldn't have thought touchstart would have worked that way myself. Touchstart to me would be the location that I initially started touching. If you are dragging down to the button, I would expect that to be a drag event at that point and the touchstart was already over. Have you tried handling the touchmove event as well?

# javascript - HTML 按钮功能

> ID：13003610
> 
> 赞同：0
> 
> 时间：2012-10-22T00:29:40.977
> 
> 标签：javascript, html, function, button, repeat

我知道如何在 HTML 中创建一个按钮，但是我将如何创建一个 JavaScript 函数，当按下该按钮时它会不断创建多个按钮并不断将它们添加到屏幕上？

```
 <script>
    function repeats() {
            ?
    }
   </script
   <input id ="addsubmit"  type="submit" value= "Submit" style = "margin-top: 25px;">
   </input> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:44:10.240

给你 - 请让我知道这是你要求的:-)

```
<html>
<head>
<script language="javascript">
    function repeats() {
        document.getElementById('buttons').innerHTML += '<input id ="addsubmit" onclick="repeats()";  type="submit" value= "Submit" style = "margin-top: 25px;">';
    }
</script>
</head>

<body>
 <input id ="addsubmit" onclick="repeats()";  type="submit" value= "Submit" style = "margin-top: 25px;">
     </input>
     <div  id="buttons">buttons here: </div>
</body>
</html> 
```

# mysql - NewSQL 一降一换？

> ID：13003613
> 
> 赞同：0
> 
> 时间：2012-10-22T00:30:04.197
> 
> 标签：mysql, oracle, nosql

最近一直在研究和阅读 NewSQL 的实现，例如 ScaleDB、Clusterix、VoltDB 等……根据这个术语，它是一个可扩展的关系数据库，并支持类似于 MySQL/Oracle 的 SQL 语言。

这是否意味着它是 MySQL/Oracle 的替代品？复杂的查询呢？

它似乎很有希望，并且将自己宣传为替代品，其中有多少实际上是事实。我的猜测是，与 NoSQL 类似，这将位于 Oracle 等传统 RDBMS 系统的前面，仅提供高事务数据，但仍依赖更稳定的后端系统来维护/保存数据？

对此主题的见解和想法将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T23:17:08.057

有两种类型的 NewSQL 数据库：

1) 从头开始​​开发**符合 SQL 的数据库，以克服 RDBMS 可扩展性挑战，同时保留 ACID 等优点，具有即时一致性和数据持久性。**为了促进更快的部署，一些解决方案具有 MySQL 仿真功能，可以用作直接替代品，以获得即时的可扩展性优势、高可用性以及将多个 MySQL 数据库整合到一个更易于管理的系统中。

2) 增强现有 RDBMS（如 MySQL）以更好地扩展或复制的 RDBMS**附加组件。**您通常会运行多个 MySQL 服务器，并且附加组件会将它们连接成一个性能更好的更大整体。

Clustrix 和 VoltDB 属于第一类。ScaleDB 进入第二个。查看每个客户案例研究，以更好地了解这些解决方案如何替代或增强现有 RDBMS 部署。最好的是，这些解决方案提供了关系数据库的优势，同时像 NoSQL 一样可扩展 - 无需重写应用程序。

# c# - 视图中具有自定义模型属性的 MVC3 默认成员属性（使用 ModelView？）

> ID：13003615
> 
> 赞同：4
> 
> 时间：2012-10-22T00:30:20.493
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor

我已经开始学习 MVC3 开发并且遇到了一些绊脚石。在我的项目中，我将默认的 aspnet_ 成员表移到了单独的 SQL Server 2008 Express 数据库中。然后我添加了自己的表格来保存额外的配置文件数据。我现在想构建一个视图，其中将列出用户名（来自 aspnet_Users）、电子邮件地址（来自 aspnet_Membership）、名字和姓氏（来自自定义构建表 UserDetails，用户 ID 为 PK 和 FK 到 aspnet_Users）和用户角色（ aspnet_UsersInRoles 和 aspnet_Roles）。

到目前为止，要从我的数据库中读取和写入，我已经为每个自定义构建的表构建了模型，其中包含一个 dbcontext 类：

```
 public class UserDetail
{

    [Key]
    public Guid UserId { get; set; }

    public string FirstName { get; set; }

    public string LastName { get; set; }

    public string Address { get; set; }

    public string City { get; set; }

    public string State { get; set; }

    public string Zip { get; set; }

    public string Phone { get; set; }

    public DateTime DateUpdated { get; set; }
}

public class UserLinkToken
{
    [Key]
    public Guid UserId { get; set; }

    public string LinkToken { get; set; }

    public DateTime DateUpdated { get; set; }
}

public class ProShotDB : DbContext
{
    public DbSet<UserDetail> UserDetails { get; set; }
    public DbSet<UserLinkToken> UserLinkTokens { get; set; }
} 
```

我不得不为我的应用程序命名我的表“UserDetails”和“UserLinkTokens”来编写和更新我的数据库，当模型和 dbcontext 的名称与我的数据库和表名不匹配时，应用程序最终会创建另一个数据库表并在那里写入数据。

据我所知，发送一个对象以查看aspnet_表中的属性和我的自定义表中的属性，我将想要构建一个ModelView。在阅读了大量模型视图示例后，我仍然不清楚它应该如何查找我的应用程序。

有人可以给我一个模型视图的例子，我可以用它来显示数据行列表并更新模型视图中给定用户 ID 引用的所有相应表列吗？

例如，假设我只想查看所有 FirstNames（UserDetails 表）及其相应的电子邮件（aspnet_Membership）。

我的最终目标是一个视图，它将显示具有分配角色的用户。列出的每个用户都有一个链接，该链接将指向一个控制器，如果他们当前不属于该角色，则该控制器会将他们分配为管理员，如果他们当前是管理员，则删除管理员角色。

抱歉，如果此类问题之前已在其他问题中回答过。我读过不少，觉得他们应该回答了我的问题，但似乎没有一个完全匹配。我的困惑很可能源于没有完全理解我的应用程序是如何连接到我的数据库的。我有点理解我的模型代表表的一行数据，dbcontext 采用一组这些数据行模型并将其连接到数据库中的表 (dbset<(datarow/model object)> (table of datarows /一组模型对象））。由于我没有看到 aspnet_ 表/模型对象的 dbcontext 类，因此我对如何检索、更新或写入这些表中的数据没有很好的概念。

感谢您帮助消除我对它如何工作的无知或给我一个如何完成我需要的简单示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T02:22:25.860

首先，它被称为 View Model，而不是 ModelView。视图模型只是一个为视图目的而定制的类。它通常只包含该视图所需的数据，并包含诸如数据注释之类的东西来处理验证和表示。

因此，您只需创建一个模型，其中包含您希望在视图中显示的所有数据。这就是构建视图模型的全部内容。

所以你的视图模型只是

```
public class MyViewModel {
    public string FirstName {get;set;}
    public string Email {get;set;}        
} 
```

然后在您看来，您只需执行以下操作：

```
@model MyViewModel

@using(Html.BeginForm()) {
    @Html.EditorForModel()
    <input type="submit" />
} 
```

在您的控制器中（或者更好的是，在业务层中）您只需执行查询以检索用户名和电子邮件，然后将查询结果中的值复制到视图模型中。

当您更新数据时，您执行相反的操作。这确实是一个太大的概念，但无法在这样的帖子中讨论。您应该真正查看示例代码，例如 MVC Music Store 或 Nerd Dinner。

重要的事情要记住。会员资格是与您的其他表格完全分开的系统。您必须单独检索它们，并单独更新它们。使用 Membership API 更新会员电子邮件或其他详细信息，并使用您自己的表格更新您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:41:02.247

好吧，我决定我真正需要的只是会员资格，所以我放弃了尝试包括名字和姓氏。

**我的视图模型：**

```
namespace Pro_Shot_Portal.ViewModels
{
    public class SetAdminViewModel
    {
        public string UserName { get; set; }
        public string Email { get; set; }
        public string[] Role { get; set; }
    }
} 
```

**我的控制器：**

```
 [Authorize(Roles = "Administrator")]
    public ActionResult SetRoles()
    {

        var model = Membership
            .GetAllUsers()
            .Cast<MembershipUser>()
            .Select(x => new SetAdminViewModel
                {
                    UserName = x.UserName,
                    Email = x.Email,
                    Role = Roles.GetRolesForUser(x.UserName)
                });
        return View(model);
    }

    [Authorize(Roles = "Administrator")]
    public ActionResult AddAdmin(string username)
    {
        Roles.AddUserToRole(username, "Administrator");

        return RedirectToAction("SetRoles", "Account");
    }

    [Authorize(Roles = "Administrator")]
    public ActionResult RemoveAdmin(string username)
    {
        Roles.RemoveUserFromRole(username, "Administrator");

        return RedirectToAction("SetRoles", "Account");
    } 
```

**我的观点：**

```
@model IEnumerable<Pro_Shot_Portal.ViewModels.SetAdminViewModel>

@{
    ViewBag.Title = "Set Roles";
}

<h2>Index</h2>

<table>
    <tr>
    <td>UserName</td>
    <td>Email</td>
    <td>Roles</td>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.UserName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Email)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Role)
        </td>

        <td>
            @if (@Html.DisplayFor(modelItem => item.Role).ToString() == "Administrator")
            {
                @Html.ActionLink("Remove Admin", "RemoveAdmin", new { username = item.UserName })
            }
            else
            {
                @Html.ActionLink("Add Admin", "AddAdmin", new { username = item.UserName })
            }
        </td>
    </tr>
}

</table> 
```

这看起来对我有用。

感谢您帮助我走上正确的道路 Mystere。另外，如果我的代码看起来有问题，请告诉我。

# php - Magento 与 nopCommerce

> ID：13003620
> 
> 赞同：5
> 
> 时间：2012-10-22T00:31:30.850
> 
> 标签：php, asp.net-mvc, magento, e-commerce, nopcommerce

这个问题可能是主观的，但我希望你通读它并帮助我得出结论。

我是一名 ASP.NET 开发人员。

我最近接触了一家销售产品的大公司，想开一家在线购物中心。

我们想使用（至少在开始时）一个开源项目。我们正在考虑[nopCommerce](http://www.nopcommerce.com)或[Magento](http://www.magentocommerce.com/)。

显然，从个人的角度来看，我宁愿 nopCommerce，因为它在我的母语 ASP.NET MVC 中，PHP 对我来说完全陌生（我也喜欢分层应用程序，我认为 ASP.NET MVC 分层比 PHP 更好，这当然可以只是BS，无论如何）。无论如何，为了公司（我应该是开发人员），Magento 比 nopCommerce 好吗？如果是的话，是不是更好，值得我学习 PHP 并开发它。

我们可以聘请 PHP 开发人员来完成这项工作，但我是公司的合伙人，我们确实希望我应该对代码拥有个人控制权（该网站还将提供除购物网站之外的其他服务）。

我很感激 nopCommerce 和 Magento 的任何比较，欢迎任何链接和文章。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T02:06:04.477

这就是我处理这种情况的方法：

1.  我会得到所有功能和要求的列表，然后查看 Magento 和 nopCommerce 以了解这些功能/要求中有多少已经内置以及需要定制多少。

2.  然后做一些研究，看看是否有任何免费/付费扩展提供所需的附加功能。

3.  下载并设置两者的开发环境，然后尝试从您的列表中完成一个更简单的自定义，看看需要多长时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T00:42:04.310

Joomla 和 nopCommerce 是两个不同的东西。Joomla 是一个内容管理系统 (CMS)，而 nopCommerce 是一个开源电子商务系统。

使用 Joomla，您不必学习 PHP，除非您想开发自己的扩展，因为[JED](http://extensions.joomla.org/)站点包含超过 10,000 个免费和商业扩展，这很可能不是必需的。[使用 Joomla，您可以简单地使用诸如VirtueMart](http://extensions.joomla.org/extensions/e-commerce/shopping-cart/129)或[HikaShop 之](http://extensions.joomla.org/extensions/e-commerce/shopping-cart/14275)类的电子商务扩展程序，它们都非常受欢迎并且具有许多功能。我从来没有研究过 nopCommerce，但是使用 Joomla 可以很容易地建立一个网站，我强烈推荐任何电子商务网站。

# c# - C# 获取/读取使用的 DLL 导入

> ID：13003621
> 
> 赞同：3
> 
> 时间：2012-10-22T00:31:37.027
> 
> 标签：c#, dll, import, get

1.  嘿，我的问题很简单，但我找不到办法做到这一点。

我尝试做的是：我尝试从 EXE 或 DLL 获取所有 DLL 导入和使用的函数。

因此，假设我使用以下内容制作了一个程序： SendMessage (DLL Import) 然后代码将设法读取它。

并返回：

**DLL：** user32.dll

**功能：**发送消息

我尝试过使用：Assembly。但是没有运气从中获得正确的数据。

（我确实看过：[如何在 C# 中以编程方式读取本机 DLL 导入？](https://stackoverflow.com/questions/4571088/how-to-programatically-read-native-dll-imports-in-c) 但也没有让它在那里工作，我得到了 1 个导入，但仅此而已）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T00:40:04.207

[DUMPBIN](http://support.microsoft.com/kb/177429)程序检查 DLL PE 标头并让您确定此信息。

我不知道任何 C# 包装器，但这些文章应该向您展示如何检查标头并自己转储导出

*   [深入了解 Win32 可移植可执行文件格式](http://msdn.microsoft.com/en-us/magazine/cc301805.aspx)
*   [窥视 PE：Win32 可移植可执行文件格式之旅](http://msdn.microsoft.com/en-us/library/ms809762.aspx)

作为一个横向的想法 - 为什么不*`dumpbin.exe /exports`*使用 .net System.Process 调用包装并解析结果？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T00:58:20.893

纯粹的反射方法

```
 static void Main(string[] args)
    {
        DumpExports(typeof (string).Assembly);
    }

    public static void DumpExports( Assembly assembly)
    {

        Dictionary<Type, List<MethodInfo>> exports = assembly.GetTypes()
            .SelectMany(type => type.GetMethods(BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Static)
                                    .Where(method => method.GetCustomAttributes(typeof (DllImportAttribute), false).Length > 0))
            .GroupBy(method => method.DeclaringType)
            .ToDictionary( item => item.Key, item => item.ToList())
            ;

        foreach( var item in exports )
        {
            Console.WriteLine(item.Key.FullName);

            foreach( var method in  item.Value )
            {
                DllImportAttribute attr = method.GetCustomAttributes(typeof (DllImportAttribute), false)[0] as DllImportAttribute;
                Console.WriteLine("\tDLL: {0}, Function: {1}", attr.Value, method.Name);
            }
        }
    } 
```

# ios - uidatepicker [__NSDate date]：发送到实例的无法识别的选择器

> ID：13003623
> 
> 赞同：0
> 
> 时间：2012-10-22T00:31:43.197
> 
> 标签：ios, xcode4, nsdate, uidatepicker, nsdatepicker

当我尝试从日期选择器获取日期时，我正在使用 uidatepicker 并抛出异常。

.h 文件：

```
#import <UIKit/UIKit.h>

@protocol TimeDelegate <NSObject>
- (void)returnTime:(NSDate *)item;

@end

@interface TimeController : UIViewController <UIPickerViewDelegate>
{
    UIDatePicker *timePicker;
}
@property (nonatomic, weak) id <TimeDelegate> delegate;
@property (nonatomic, retain) IBOutlet UIDatePicker *timePicker;
@property (nonatomic, retain) NSDate *activityTime;
@end 
```

.m 文件

```
#import "TimeController.h"

@implementation TimeController

@synthesize timePicker;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    self.timePicker  = [NSDate date];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(void) viewDidDisappear:(BOOL)animated
{
    NSLog(@"%@", self.activityTime);
    //NSDate *itemToPassBack = [self.timePicker date];
    [self.delegate returnTime:self.activityTime];
}

- (IBAction)SelectTime:(id)sender {
    self.activityTime = [timePicker date];
}

@end 
```

当我单击选择或导航返回时会发生错误。最初我认为日期选择器在 viewdiddisappear 期间不可用并引发异常。选择按钮的行为也相同，这让我怀疑是否还有其他问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:34:21.240

在`viewDidLoad`中，这一行：

```
self.timePicker  = [NSDate date]; 
```

将`NSDate`对象分配给`timePicker`（声明为`UIDatePicker`对象）。

后来，代码尝试通过调用实例方法来获取日期选择器的当前日期值，`date`并且（幸运的是）失败了，`unrecognized selector`因为`NSDate`（`timePicker`现在指向的）没有这样的实例方法。

你真正想做的`viewDidLoad`是：

```
self.timePicker.date  = [NSDate date]; 
```

将`date`属性设置*在* `timePicker`.

# php - pdo 准备好的语句不起作用

> ID：13003624
> 
> 赞同：0
> 
> 时间：2012-10-22T00:31:45.470
> 
> 标签：php, mysql, syntax, pdo

我正在从 mysql_connect 切换到 pdo 并且无法继续。这是我的代码：

```
//get the row sk
$sk = strtok($string, "_");
//get the column name (the rest of the $string)
$column_name = substr($string, strpos($string, "_") + 1);
//get the value
$value = $_SESSION['save_arr'][$string];
echo "{$column_name} {$value} {$sk}</br>";
$sql = "update tbl_brand set ?=? where brand_sk=?";
$q = $pdo_conn->prepare($sql);
$q->execute(array($column_name, $value, $sk)); 
```

如果我硬编码一些值，那么它工作正常

```
$sql = "update tbl_brand set name_long='name' where brand_sk='1'"; 
```

我确定这只是一个语法问题，但我看不到它。我正在处理这个例子[http://www.phpeveryday.com/articles/PDO-Error-Handling-P552.html](http://www.phpeveryday.com/articles/PDO-Error-Handling-P552.html)

回声的结果是这样的：

name_long National Autjho Glass 2

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T00:32:41.457

列名不能绑定到准备好的语句中的动态值。只能绑定字符串和整数等常量。因此，您的 sql 应该在准备好之前包含列名：

```
$sql = "update tbl_brand set `$column` = ? where brand_sk = ?"; 
```

您需要确保在将 $column 值嵌入到 sql 语句之前对其进行了正确的清理。

在 mysql 中，您可以像这样转义列标识符：

```
$column = str_replace("`", "``", $column); 
```

# ruby-on-rails - Rails：rails form_for 标签的自定义文本

> ID：13003626
> 
> 赞同：111
> 
> 时间：2012-10-22T00:32:02.200
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, form-for

我想在以下位置显示标签`form_for`：

```
<div class="field">
  <%= f.label :name %><br />
  <%= f.text_field :name %>
</div> 
```

这会生成标签“姓名”，但我希望它是“您的姓名”。我怎样才能改变它？

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2012-10-22T00:37:37.533

helper的第二个参数`label`将允许您设置自定义文本。

```
<%= f.label :name, 'Your Name' %> 
```

使用[Ruby on Rails 文档](http://api.rubyonrails.org/)查找辅助方法。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2014-05-17T17:27:05.907

您可以通过 i18n 指定自定义标签文本。在`config/locales/en.yml`中，并假设您的用户模型名为`user`，您可以添加以下内容：

```
helpers:
    label:
      user:
        name: Your Name 
```

这将允许您继续使用

```
<%= f.label :name %> 
```

无需硬编码`Your Name`。

有关 i18n 的更多信息，请参阅[此](http://guides.rubyonrails.org/i18n.html)。文档上的`label`参考[this](http://apidock.com/rails/ActionView/Helpers/FormHelper/label)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-02T11:50:48.577

### i18n 与 rails 5.2.2 完美结合。

翻译*设计*表单或其他表单上的**标签**、**占位符**和**按钮。**

 *```
<%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>
   <div class="mt-3">
     <label class="float-left"> <%= f.label t(:email) %> </label>
       <%= f.email_field :email, class: 'form-control', placeholder: t('.emailholder') %>
   </div>
   <div class="mt-3">
     <label class="float-left"> <%= f.label t(:password) %> </label>
       <%= f.password_field :password, class: 'form-control', placeholder: t('.passholder') %>
   </div>

   <div class="button">
     <%= f.button t('.signinbtn'), class: "" %>
   </div>
<% end %> 
```

本地文件：config/locales/en.yml

```
en:
  activerecord:
    ....others

  #Found in Views/devise/seasions/new <form> <*label*>
  email: "Email"
  password: "Password"

  #Views/devise <form> <placeholder & buttom>
  devise: #if your using devise forms
    #seasions/new.html.erb
    new:
      emailholder: "enter email here"
      passholder: "enter password"
      signinbtn: "SignIn"

  ....others 
```*

# javascript - 如何通过点击 Google Maps API V3 在两个地图之间切换？

> ID：13003631
> 
> 赞同：0
> 
> 时间：2012-10-22T00:32:46.067
> 
> 标签：javascript, html, google-maps-api-3

我有一张带有两个标记的地图，一个距离很远，为了不缩放太远，我需要为全尺寸的地图制作一个页面，我想在地图之间动态更改，这样用户就不必切换到一个额外的窗口以查看其他位置。这是我想如何做到这一点的图像。我非常感谢所有人的帮助和经验。

这是js代码。

```
(function() {

window.onload = function() {

    // Creating a new map
    var map = new google.maps.Map(document.getElementById("map"), {
      center: new google.maps.LatLng(10.2000, -84.4000),
      disableDefaultUI: false,
      scrollwheel: false,
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    // Creating the JSON data
    var json = [
        {
            "title": "map 1",
            "lat": 9.93379260367826,
            "lng": -84.22572178326419,
            "description": "<br><br><strong>map 1</strong>Description<br><br>"
        },
        {
            "title": "map 2",
            "lat": 10.575049399803566,
            "lng": -85.58282425643927,
            "description": "<br><br><strong>map 2</strong>Description<br><br>"
        },
    ]

    // Creating a global infoWindow object that will be reused by all markers
    var infoWindow = new google.maps.InfoWindow();

    // Looping through the JSON data
    for (var i = 0, length = json.length; i < length; i++) {
        var data = json[i],
            latLng = new google.maps.LatLng(data.lat, data.lng);

        // Creating a marker and putting it on the map
        var marker = new google.maps.Marker({
            position: latLng,
            map: map,
            title: data.title,
            icon: 'style/images/mapMarker.png'
        });

        // Creating a closure to retain the correct data, notice how I pass the current data in the loop into the closure (marker, data)
        (function(marker, data) {

            // Attaching a click event to the current marker
            google.maps.event.addListener(marker, "click", function(e) {
                infoWindow.setContent(data.description);
                infoWindow.open(map, marker);
            });

        })(marker, data);

    }

}
    })(); 
```

![单击时，两个全窗口大小的地图会相互更改。](../Images/6a0117085dba14adbff9a9a9348dbe81.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:15:52.220

有两个选项卡或链接，当单击它们时调用一个 JavaScript 函数，该函数只需`map.setCenter();`根据需要处理标记 1 或标记 2 的坐标。

# ios - 无缘无故从获取的结果中删除托管对象

> ID：13003633
> 
> 赞同：0
> 
> 时间：2012-10-22T00:33:33.800
> 
> 标签：ios, core-data, nsmanagedobject, nsfetchrequest, nsfetchedresultscontroller

我有一个奇怪的问题，我无法弄清楚。我有一个相当典型的从 SQLite 存储中获取对象的`UIViewController`a`UITableView`和a 。`NSFetchedResultsController`提取工作正常，表格工作正常，具有典型的`NSFetchedResultsController`样板：

```
-(void)controllerWillChangeContent:(NSFetchedResultsController *)controller{

    [self.tableView beginUpdates];
}
-(void)controller:(NSFetchedResultsController *)controller didChangeSection:(id<NSFetchedResultsSectionInfo>)sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type{

    if(type==NSFetchedResultsChangeInsert){
        [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
    } else if(type==NSFetchedResultsChangeDelete){
        [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
    }

}
-(void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath{

    UITableView *tV = self.tableView;
    if(type==NSFetchedResultsChangeInsert){
        [tV insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
    } else if(type==NSFetchedResultsChangeDelete){
        [tV deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    } else if(type==NSFetchedResultsChangeUpdate){
        [self configureCell:[tV cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
    } else if(type==NSFetchedResultsChangeMove){
        [tV deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [tV insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
    }

}
-(void)controllerDidChangeContent:(NSFetchedResultsController *)controller{
    [self.tableView endUpdates];
} 
```

我遇到的问题是任何关系为 nil 的对象（即使关系属性不涉及谓词或排序描述符中的获取请求）在任何时候从获取的结果中消失（`controller:didChangeObject:`被调用`NSFetchedResultsChangeDelete`）以任何方式更新（例如更改不相关的属性）。如果我重新执行提取，该对象将返回。

即使我在 fetch 请求中不使用谓词，也会发生这种情况。

有人知道这里会发生什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T00:02:00.487

我可以通过更改我的 NSFetchedResultsController 上的 sectionNameKeyPath 来解决这个问题。如果您的 sectionNameKeyPath 属性是可选的关系属性，请尝试删除或更改它。

如果您实际上想使用该属性来分隔各个部分，则可能需要使用“虚拟”对象来表示 nil。（这实际上意味着如果您将其用于您的部分，则该属性不能是可选的。）

# javascript - 如何渲染一个html文件

> ID：13003634
> 
> 赞同：0
> 
> 时间：2012-10-22T00:33:52.473
> 
> 标签：javascript, html

我是 javascript 和编码 html 的新手。我正在做一个附带项目，但我被困住了。我有一个包含图像的 html 文件（我们称之为 file1），我想在另一个名为 file2 的 html 文件中呈现 file1。通过渲染，我的意思是在 file2 中显示 file1 中包含的图像。我研究并发现了使用 dataURIs 之类的东西，并阅读了很多关于它的内容，但它没有用。我在网上找到了一个编码器，它将我的 file1 编码为 base 64 并将其插入到我的页面中，如下所示：

```
<img src="data:text/html;base64,PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KPHRpdGxlPk1hdGhKYXggTGF0ZXggRGlzcGxheSBUZXN0IFBhZ2U8L3RpdGxlPgoKPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iaHR0cHM6Ly9jMzI4NzQwLnNzbC5jZjEucmFja2Nkbi5jb20vbWF0aGpheC9sYXRlc3QvTWF0aEpheC5qcz9jb25maWc9VGVYLUFNUy1NTUxfU1ZHIj4KPC9zY3JpcHQ+CjwvaGVhZD4KPGJvZHk+ClxbKHRhbih4KSoyeCszKV4yICogXGludCAoeCkgZHhcXQoKPC9ib2R5Pgo8L2h0bWw+Cg==" width="400" height="100" alt="Slide 2"> 
```

它没有用，我不知道为什么。有谁知道任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:10:36.920

正如 sachleen 所说，您的 base64 解码为 HTML 页面，而不是图像。并且该 HTML 页面不包含任何位图图像（该`<img>`标签仅适用于 jpg、png 和 gif 等位图图像；网页永远不是图像）：

```
<!DOCTYPE html>
<html>
<head>
<title>MathJax Latex Display Test Page</title>

<script type="text/javascript" src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG">
</script>
</head>
<body>
\[(tan(x)*2x+3)^2 * \int (x) dx\]

</body>
</html> 
```

这是生成 SVG（矢量）图像的 JavaScript 代码。将相同的`<script>`标签添加到另一个文件的内部`<head>`，并在适当的地方添加正文。它适用于file1，因此它也应该适用于file2。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-22T01:34:50.607

这有什么问题（在file2中）

1.  `require(file1)`
2.  `preg_match($pattern, $file1, $result)`
3.  `<img src="$result" />`

# php - 联系表格输入过滤

> ID：13003636
> 
> 赞同：0
> 
> 时间：2012-10-22T00:34:08.663
> 
> 标签：php, forms, xss, contact

通过我的联系表检查，我发现了跨站点脚本漏洞，但没有足够的知识来解决这个问题。

受影响的参数：name 使用的向量：">alert(document.cookie) 发现模式：\">alert(document.cookie) 完整攻击：/http://############## ###/contact.php [name=\">alert(document.cookie) &email= &message=]

受影响的参数：电子邮件 使用的向量：">alert(document.cookie) 发现模式：\">alert(document.cookie) 完整攻击：/http://############## ###/contact.php [name= &email=\">alert(document.cookie) &message=]

受影响的参数：消息 使用的向量：">alert(document.cookie) 发现模式：\">alert(document.cookie) 完整攻击：/http://############## ###/contact.php [name= &email= &message=\">alert(document.cookie)]

我当前的表单代码如下所示

```
<?php 
if (isset($_POST['submit'])) { 
    $error = ""; 

    if (!empty($_POST['name'])) { 
        $name = $_POST['name']; 
        if (!preg_match('/^[a-zA-Z0-9]+$/i', $name)){  
            $error .= "The name you entered is not valid. <br/>"; 
        } 
    } else { 
        $error .= "You didn't type in your name. <br />"; 
    } 

    if (!empty($_POST['email'])) { 
        $email = $_POST['email']; 
        if (!preg_match("/^[_a-z0-9]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", $email)){  
            $error .= "The e-mail address you entered is not valid. <br/>"; 
        } 
    } else { 
        $error .= "You didn't type in an e-mail address. <br />"; 
    } 

    if (!empty($_POST['messagesubject'])) { 
        $messagesubject = $_POST['messagesubject']; 
    } else { 
        $error .= "You didn't type in a subject. <br />"; 
    } 

    if (!empty($_POST['message'])) { 
        $message = $_POST['message']; 
    } else { 
        $error .= "You didn't type in a message. <br />"; 
    } 

    if(($_POST['code']) == $_SESSION['code']) {  
        $code = $_POST['code']; 
    } else {  
        $error .= "The captcha code you entered does not match. Please try again. <br />";     
    } 

    if (empty($error)) { 
        $from = 'From: ' . $name . ' <' . $email . '>'; 
        $to = "aaron@fosternetwork.co.uk"; 
        $subject = strip_tags("CWS - Contact Us - \n" . $messagesubject); 
        $content = strip_tags("Name: " . $name . "\nSubject: " . $messagesubject . "\nMessage: \n" . $message); 
        $success = "<h2>Thank you! <span>Your message has been sent!</span></h2>"; 
        mail($to,$subject,$content,$from); 
        $emailSent = true; 
    } 
} 
?> 
```

形式

```
<form action="contact.php" method="post"> 

    <label>Name:</label> 
    <input type="text" name="name" value="<?php if ($_POST['name']) { echo $_POST['name']; } ?>" /> 

    <label>Email:</label> 
    <input type="text" name="email" value="<?php if ($_POST['email']) { echo $_POST['email']; } ?>" /> 

    <label>Subject:</label> 
    <input type="text" name="messagesubject" value="<?php if ($_POST['messagesubject']) { echo $_POST['messagesubject']; } ?>" /> 

    <label>Message:</label><br /> 
    <textarea name="message" rows="20" cols="20"><?php if ($_POST['message']) { echo $_POST['message']; } ?></textarea> 

    <label>Please input the following code: <img src="captcha.php"></label> 
    <input type="text" name="code"> <br />  

    <button type="submit" class="colorButton" name="submit" value="Send message">Send Message</button> 

</form> 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:31:13.930

您的 HTML 生成存在缺陷：

```
 value="<?php if ($_POST['name']) { echo $_POST['name']; } ?>" 
```

您应该始终转义输出变量，即：

```
 value="<?php if ($_POST['name']) { echo htmlspecialchars($_POST['name']); } ?>" 
```

另见：[`htmlspecialchars()`](http://www.php.net/htmlspecialchars)或[`htmlentities()`](http://www.php.net/htmlentities)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T01:46:57.433

您应该使用一些良好的编程实践，例如：

初始化你的变量，这样，你总是有一些东西要打印，调试你会得到很多简单但令人讨厌的错误

```
$name = false;
$email = false;
$message = false;
$messagesubject = false; 
```

如果您正在获取新值，请修改您的数据，例如从 $_POST 您的情况。如果您这样做，如果特定字段没有数据，您的脚本可以避免一些工作，而且您可以更轻松地控制脚本流和数据验证。

```
if ( isset( $_POST['name'] ) !== false ) {
    // validate the content
    $name = process_you_choose_to_clean( $_POST['name'] );
}
if ( isset( $_POST['email'] ) !== false ) {
    // validate the content
    $name = process_you_choose_to_clean( $_POST['email'] );
}
if ( isset( $_POST['message'] ) !== false ) {
    // validate the content
    $name = process_you_choose_to_clean( $_POST['message'] );
}
if ( isset( $_POST['messagesubject'] ) !== false ) {
    // validate the content
    $name = process_you_choose_to_clean( $_POST['messagesubject'] );
} 
```

尽量避免在你的 html 部分中出现混乱的代码，如果你处理了我之前提到的事情，这样的事情就可以完美地工作

```
<input type="text" name="name" value="<?php { echo( $name ); } ?>" /> 
```

关于消毒，请考虑提到的选项，并使用PHP的[filter_var选项](http://be.php.net/manual/en/function.filter-var.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T01:25:22.887

永远不要相信用户输入，有些人可以插入可能会损害您的系统或类似的东西的 javascript 代码，这就是为什么您容易受到跨站点脚本的攻击，清理使用此功能发布的输入：

```
function xss_protect($data, $strip_tags = false, $allowed_tags = "\"\'") { 
if($strip_tags) {
    $data = strip_tags($data, $allowed_tags . "<b>");
}

if(stripos($data, "script") !== false) { 
    $result = str_replace("script","scr<b></b>ipt", htmlentities($data, ENT_QUOTES,"UTF-8")); 
} else { 
    $result = htmlentities($data, ENT_QUOTES, "UTF-8"); 
} 

return $result;
} 
```

要使用该功能，例如使用：

```
$code = xss_protect($_POST['code']); 
```

# javascript - 使用 document.write 异步加载 javascript

> ID：13003644
> 
> 赞同：12
> 
> 时间：2012-10-22T00:35:23.483
> 
> 标签：javascript, google-maps-api-3, asynchronous

我正在尝试异步 google map api javascript。

所以，正常的脚本标签有效`<script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>`

但是，以下异步版本没有。

```
(function () {
    var gmap = document.createElement('script'); gmap.type = 'text/javascript'; gmap.async = true;
    gmap.src = 'https://maps.googleapis.com/maps/api/js?sensor=false';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gmap, s);
})(); 
```

经过一些断点+检查操作后，我发现该行在异步模式下无法正常运行。

```
document.write('<' + 'script src="' + src + '"' + 
' type="text/javascript"><' + '/script>'); 
```

同步模式下的文档对象是“HTMLDocument”，但异步模式下是“#document”。加载页面后，文档对象发生了一些事情。想法？

干杯。

**更新：**这个问题更多是关于为什么 document.write 没有被触发而不是异步加载谷歌地图 api。如果你在这一行设置断点，你可以看到 document.write 函数存在。这与 document.write 是本机的事实有什么关系吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T00:47:57.820

`document.write`不能从异步脚本中调用，因为它与文档分离，因此您的 JS 解析器不知道将它放在哪里。充其量，浏览器会忽略它。在最坏的情况下，它可能会覆盖当前文档的顶部（例如在文档完成加载后调用 document.write）。

不幸的是，唯一的答案是重写脚本，对于 google api，这可能不是一个可行的选择。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-24T16:03:59.867

我在异步加载亚马逊广告时遇到了一个非常相似的问题。`document.write`通过更改其行为（`$`在本例中是指 jQuery） ，我能够在我的应用程序中针对这些情况进行近似：

```
document.write = function(content) {
  if (document.currentScript) {
    var src = document.currentScript.src
        .replace(/\#.*$/, '')
        .replace(/\?.*$/, '')
        .replace(/^.*\/\//, '');
    setTimeout(function() {
      var script = $('script').filter(function() {
        var scriptSrc = $(this).attr('src');
        return scriptSrc && scriptSrc.indexOf(src) !== -1;
      });
      $('<div></div>')
          .addClass('doc-write')
          .html(content)
          .insertAfter(script);
    }, 0);
  } else {
    HTMLDocument.prototype.write.apply(document, arguments);
  }
}; 
```

这种方法可以改进，但它足以满足我的需求。希望你会发现它很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T02:16:52.867

当您`callback`在 script-URL 中使用参数时，脚本不会使用`write()`，您将能够异步加载 API。

请参阅：[https ://developers.google.com/maps/documentation/javascript/tutorial?hl=en#asynch](https://developers.google.com/maps/documentation/javascript/tutorial?hl=en#asynch)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T07:16:16.907

不要使用`document.write()`，原因由市场和莫勒博士解释。改为使用`appendChild()`，如[**Google 的异步加载示例中**](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple-async)所做的那样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-14T11:07:24.720

在这里添加评论，因为我在这个问题上遇到了一些困难。异步加载脚本时（例如通过单击按钮），请确保您**完全**按照[网站](https://developers.google.com/maps/documentation/javascript/tutorial?hl=en#asynch)上的说明进行操作。

`document.write`当我没有给出回调值时，我首先得到了错误。在给出回调之后，我得到了`window.initialize`错误，因为...... duh......我的代码中没有初始化函数。我将其更改为我的函数名称（类似于 loadMap）并开始工作。

老实说，只需从网站复制代码，它应该可以工作。替换`window.onload`为触发上述功能所需的任何内容。

# c++ - std::function 作为自定义流操纵器

> ID：13003645
> 
> 赞同：10
> 
> 时间：2012-10-22T00:35:36.093
> 
> 标签：c++, lambda, c++11, iostream, manipulators

我正在尝试使用 C++11 功能使自定义流操纵器更易于创建。我可以将 lambda 函数用作操纵器，但不能使用`std::function<ostream&(ostream&)>`.

这是代码，归结为：

```
#include <iostream>
#include <functional>
using namespace std;

auto lambdaManip = [] (ostream& stream) -> ostream& {
    stream << "Hello world" << endl;
};
function<ostream& (ostream&)> functionManip = [] (ostream& stream) -> ostream& {
    stream << "Hello world" << endl;
};

int main (int argc, char** argv) {
    cout << lambdaManip;    // OK
    cout << functionManip;  // Compiler error
} 
```

第二条`cout`语句失败并显示以下内容：

```
g++-4 src/Solve.cpp -c -g -std=c++0x -o src/Solve.o -I/home/ekrohne/minisat
src/Solve.cpp: In function 'int main(int, char**)':
src/Solve.cpp:24:11: error: cannot bind 'std::ostream' lvalue to 'std::basic_ostream<char>&&'
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/ostream:579:5: error:   initializing argument 1 of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&&, const _Tp&) [with _CharT = char, _Traits = std::char_traits<char>, _Tp = std::function<std::basic_ostream<char>&(std::basic_ostream<char>&)>]' 
```

为什么会失败？我正在使用 cygwin gcc 4.5.3。

虽然我在问，但`std::function`由于效率问题，我并不热衷于在任何地方使用。但我确实希望编写返回 lambda 函数的函数，并且不知道如何在没有`std::function`. 例如，像下面这样的东西会很棒

```
auto getAdditionFunctor();

auto getAdditionFunctor() {
    return [] (int x, int y) { return x + y };
}; 
```

...但显然不起作用。是否有另一种有效的语法？我无法想象它会是什么，所以我可能会被困住`std::function`。

如果我对第二个问题有解决方案，那么第一个问题将毫无意义。

* * *

谢谢你。

定义`operator<<(ostream&, std::function<ostream&(ostream&)>`帮助。我误读了一个网页，并认为`ostream`它足够聪明，可以将任意对象`operator()`视为操纵器。我错了。此外，`lambda`正如我被告知的那样，我构建的简单函数可能只是被编译成一个普通的旧函数。事实上，如果我使用变量捕获来确保它`lambda`不是一个简单的函数，那么编译器就会失败。此外，`operator()`已定义的对象（默认情况下）不被视为操纵器：

```
class Manipulator {
    ostream& operator()(ostream& stream) const {
        return stream << "Hello world" << endl;
    };
} classManip;

function<ostream& (ostream&)> functionManip = [] (ostream& stream) -> ostream& {
    return stream << "Hello world" << endl;
};

int main (int argc, char** argv) {
    const string str = "Hello world"; 
    auto lambdaManip = [&] (ostream& stream) -> ostream& {
        return stream << str << endl;     
    };

    cout << classManip;     // Compiler error
    cout << lambdaManip;    // Compiler error
    cout << functionManip;  // Compiler error
} 
```

* * *

进一步更新：事实证明，比以下解决方案更强大的解决方案可以通过以下方式完成：

```
// Tell ostreams to interpret std::function as a
// manipulator, wherever it sees one.
inline ostream& operator<<(
        ostream& stream, 
        const function<ostream& (ostream&)>& manipulator) {
    return manipulator( stream );
} 
```

此代码有一个额外的`const`. 我发现这试图在我的项目中实际实施解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T00:59:09.660

如果您查看`operator<<`for `ostream`，则采取`std::function`- 并没有超载，这基本上就是您在这里尝试做的事情`cout << functionManip`。要解决此问题，请自行定义重载：

```
ostream& operator<<(ostream& os, std::function<ostream& (ostream&)>& s)
{
    return s(os);
} 
```

或者将`stream`作为参数传递给函数：

```
functionManip(std::cout); 
```

至于为什么`lambda`起作用，鉴于 a 的返回类型`lambda`未定义，并且使用函数指针存在重载：

```
ostream& operator<< (ostream& ( *pf )(ostream&)); 
```

lambda 可能使用 aa 结构包装所有内容，并定义`operator()`在这种情况下哪个将完全像函数指针一样工作。这对我来说是最有可能的解释，如果我错了，希望有人能纠正我。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T01:00:45.290

这不是错误的原因，但由于您已经定义了两者`lambdaManip`并且`functionManip`具有返回类型`ostream&`，我相信您忘记添加`return stream;`两者。

* * *

调用`cout << functionManip`失败，因为没有`operator<<(ostream&, std::function<ostream&(ostream&)>`定义。添加一个，调用将成功。

```
ostream& operator<<(ostream& stream, function<ostream& (ostream&)>& func) {
  return func( stream );
} 
```

或者，您可以调用`functionManip`为

```
functionManip( cout ); 
```

这将在不添加`operator<<`定义的情况下工作。

* * *

至于你关于返回 lambda 的问题，由于返回的 lambda`getAdditionFunctor`是一个无捕获的 lambda，它可以隐式转换为函数指针。

```
typedef int(*addition_ptr)(int,int);
addition_ptr getAdditionFunctor()
{
  return [] (int x, int y) -> int { return x + y; };
}

auto adder = getAdditionFunctor();
adder(10,20); // Outputs 30 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-20T23:57:37.747

以前的答案正确地使用了最先进的技术，但是如果您要在代码中*大量*使用`std::function`s 和/或 lambdas 作为流操纵器，那么您可能只想在全局代码库中添加以下函数模板定义范围：

```
template<class M>
auto operator<< (std::ostream& os, const M& m) -> decltype(m(os))
{
    return m(os);
} 
```

那里的尾随返回类型使用[表达式 SFINAE](http://en.cppreference.com/w/cpp/language/sfinae#Expression_SFINAE)，所以这个特定`operator<<`的重载甚至不会参与重载决议，除非`m(os)`是一个格式良好的表达式。（这就是你想要的。）

然后你甚至可以做类似的事情

```
template<class T>
auto commaize(const T& t)
{
    return [&t](std::ostream& os) -> std::ostream& {
        return os << t << ", ";
    };
}

int main()
{
    std::cout << commaize("hello") << commaize("darling") << std::endl;
} 
```

（请注意上面的代码中完全没有任何`std::function`对象！尽量避免将 lambdas 填充到`std::function`对象中，除非你绝对必须这样做，因为构造一个`std::function`对象可能很昂贵；它甚至可能涉及内存分配。）

C++17 将这个`operator<<`重载添加到标准库是有意义的，但我目前不知道该领域的任何具体建议。

# asp.net - 我应该如何组织我的 ASP.NET Web API 解决方案？

> ID：13003652
> 
> 赞同：2
> 
> 时间：2012-10-22T00:37:36.940
> 
> 标签：asp.net, asp.net-web-api

我正在开始一个新的 ASP.NET Web API 项目。我承认，我从来都不擅长在我的解决方案中组织我的项目。我想在这方面做得更好，因此提出了这个问题。

首先，我计划使用的命名约定是我在多个地方（博客、MSDN 等）找到的，其中包括 CompanyName.ProductName.Component。

我的困惑在于解决方案中的项目。我有服务工作的概念证明，但一切都在一个项目中。它可以工作，但由于各种原因这很糟糕，我想分离组件。该项目使用 EF、数据存储库接口、测试项目、业务对象和我的 Web API 控制器。我应该如何组织我的解决方案和各种项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T03:14:38.857

对于这个问题，没有一个万能的答案。但是，这是我的默认设置：

![在此处输入图像描述](../Images/5743ed4842affee1edf2b707f53eff60.png)

**一些附加说明：**

虽然 web、core 和 data 的项目名称是 [productName].[layer]，但我将默认命名空间和程序集名称更改为 [company].[product].[layer]。我没有完全限定，所以我可以降低路径长度（一旦你在路径中达到 256 个字符，构建就会抱怨）。

模型项目通常也有其他文件夹，例如\validation、\exceptions 等……但我只是想说明一下，我通常将数据访问接口放在模型类旁边。

我不会更改测试项目的默认命名空间或程序集名称，因为它们对于解决方案之外的任何东西都不重要。

话虽如此，如果我的 API 非常简单（只有几个控制器），我可能会选择一个 API 项目和一个测试项目。如果这样做，我会在 API 下为每个逻辑层（核心、数据等）添加文件夹。

# php - PHP中的可变长度sprintf

> ID：13003654
> 
> 赞同：0
> 
> 时间：2012-10-22T00:37:54.707
> 
> 标签：php, function, native

我正在尝试使用[sprintf](http://id.php.net/sprintf)使 PHP 变长。这是我使用的代码：

```
<?php
echo sprinf ("%*s | %*s | %*s | %*s\r\n%*s | %*s | %*s | %*s\r\n",
6,"Monkey", 7,"Cats", 7,"Giraffe", 6,"Goat",
6,"Goat", 7,"Giraffe", 7,"Cats", 6,"Monkey")
?> 
```

预期的：

```
Monkey | Cats    | Giraffe | Goat
Goat   | Giraffe | Cats    | Monkey 
```

结果：

```
s | s | s | s
s | s | s | s 
```

所以，我做了我自己的功能：

```
<?php
function _sp($p,$str){
    $pAkhir=$p-strlen($str);
    if($pAkhir<0)$pAkhir=0;
    $pStr=null;for($i=0;$i<$pAkhir;$i++)$pStr.=chr(32);
    return $str.$pStr;
}
?> 
```

因此：

```
<?php
echo sprintf ("%s | %s | %s | %s\r\n%s | %s | %s | %s\r\n",
_sp(6,"Monkey"),_sp(7,"Cats"),_sp(7,"Giraffe"),_sp(6,"Goat"),
_sp(6,"Goat"),_sp("Giraffe"),_sp(7,"Cats"),_sp(6,"Monkey"))
?> 
```

有没有更有效的方法，使用原生 PHP 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T08:48:59.020

我认为@zerkms 的答案适合表示：[str_pad()](http://id.php.net/str_pad)。这比编写新函数更有效。

# sql - SQL GROUP BY 和 COUNT 条件

> ID：13003656
> 
> 赞同：6
> 
> 时间：2012-10-22T00:38:05.517
> 
> 标签：sql

我有以下 SQL 表达式：

```
select id, count(oID) from MyTable group by oID; 
```

我得到类似的东西

```
+-------+---------------+
| id    | count(oID)    |
+-------+---------------+
|   002 |             6 |
|   104 |             1 |
|   101 |             1 |
|   908 |             1 |
+-------+---------------+ 
```

现在我想拉出`count(oID)`1 所在的行（选择 id）。我怎样才能在一个 SQL 语句中做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-22T00:39:29.647

使用`HAVING`子句过滤聚合列。

```
SELECT   id, count(oID) 
FROM     MyTable 
GROUP BY oID 
HAVING   count(oID) = 1 
```

**更新 1**

将结果包装在子查询中

```
SELECT a.*
FROM tableName a INNER JOIN
    (
        SELECT   id 
        FROM     MyTable 
        GROUP BY id  
        HAVING   count(oID) = 1
    ) b ON a.ID = b.ID 
```

# android - 自定义 View 启动 Activity 的结果

> ID：13003658
> 
> 赞同：1
> 
> 时间：2012-10-22T00:38:17.593
> 
> 标签：android, android-intent

我有一个习惯`View`，当被触摸时，会启动一个`Activity`. 我希望这个习惯`View`遵循正确的面向对象的方法，所以我希望它独立于任何`Activity`可能显示`View`.

回顾一下： `Activity`1 包含 custom `View`。自定义`View`启动`Activity`2。

到目前为止，一切都很好。我可以`getContext()`从我的内部调用`View`来启动`Activity`2。它看起来像这样：

```
Context con = getContext();
Intent launcher = new Intent(con, TimeWizard.class);
((Activity) con).startActivityForResult(launcher, LAUNCH_TIME); 
```

正如第三行所暗示的，我想得到 that 的返回`Activity`，但它最终以`Activity`1's结束`onActivityResult()`。这意味着`Activity`1 现在需要了解该 custom 的内部运作`View`，这并不理想——在某些情况下甚至是不可接受的。

所以我想做的是`View`启动`Activity`2，然后直接得到结果。有没有办法做到这一点？我觉得我必须在这里错过明显的答案。我的解决方法是使用`Activity`1`onActivityResult()`将结果传递回`View`. 它很实用，但非常混乱。

# java - java和swi prolog之间的连接

> ID：13003661
> 
> 赞同：4
> 
> 时间：2012-10-22T00:38:59.520
> 
> 标签：java, prolog, connect, jpl

我正在尝试从 java 运行 swi prolog
我正在使用 eclipse 并且我已将 jpl.jar 插入到项目中（属性->库->添加外部 jar）并且当我尝试运行程序时（它是 jpl 的示例所以它应该可以工作..）我收到一个错误：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no jpl in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1758)
    at java.lang.Runtime.loadLibrary0(Runtime.java:823)
    at java.lang.System.loadLibrary(System.java:1045)
    at jpl.JPL.loadNativeLibrary(JPL.java:100)
    at jpl.fli.Prolog.<clinit>(Prolog.java:85)
    at jpl.Query.open(Query.java:286)
    at jpl.Util.textToTerm(Util.java:162)
    at jpl.Query.<init>(Query.java:198)
    at faf.Main.main(Main.java:10) <br> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-23T21:58:42.263

我今天在 Debian 上遇到了这个问题，我的解决方案与 Felix Dobslaw 的类似。因为我在别处找不到它，所以我今天将发布我如何解决它。

我的 SWI-Prolog 和 JPL 是通过 apt-get 安装的。根据您的环境更改路径文件夹。

*   将**libswipl.so**从复制`/usr/lib`到`usr/lib/swi-prolog/lib/amd64`

    ( `sudo cp <probably-user-lib>/libswipl.so <installation-folder-swi>/lib/<architeture>`)

*   添加`-Djava.library.path="/usr/lib/swi-prolog/lib/amd64"`为 VM 选项

    （项目属性 -> 运行 -> VM 选项）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T03:55:52.950

应该有一个 jpl dll 左右，这取决于你的平台。您应该让它在 %PATH% 中的某个地方可以访问，或者使用`-Djava.library.path=<path to jpl.dll>`java 属性指定它的位置。

阅读有关[JPL 安装的更多信息](http://www.swi-prolog.org/packages/jpl/installation.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T17:16:13.567

我有同样的问题。这在 Ubuntu 上帮助了我：

1）将 jpl jar 的本机库位置指向您保存“libswipl.so”的文件夹（我通过项目的“Java 构建路径”设置执行此操作）。对我来说就是：

/usr/lib/swipl-6.2.6/lib/x86_64-linux

2) 将保存“libjava.so”的文件夹添加到 LD_LIBRARY_PATH 变量中（我在环境选项卡下的运行配置中执行此操作）。对我来说就是：

/usr/lib/jvm/java-6-openjdk/jre/lib/amd64

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-20T11:46:41.917

Eclipse Neon 和自制软件的解决方案：

```
brew update
brew install swi-prolog --with-jpl 
```

在设置为 VM-Arg 的 Eclipse 运行/调试配置中：

```
-Djava.library.path=/usr/local/Cellar/swi-prolog/7.4.2/libexec/lib/swipl-7.4.2/lib/x86_64-darwin16.6.0 
```

实际路径可能会有所不同。

# ruby - 在 Ruby 中使用 require 的最佳实践是什么？

> ID：13003662
> 
> 赞同：12
> 
> 时间：2012-10-22T00:39:05.277
> 
> 标签：ruby, dependencies, require

某些模型需要先加载其他模型。但是每个需要的文件只需要加载一次。

管理此问题的最佳方法是什么？将所有要求行放在一个文件中（如 init.rb），还是将要求文件放在每个模型文件的顶部？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T00:45:12.190

让我们评估每个选项：

1.  > 将所有需要的行放在一个文件中（如 init.rb）

    这意味着每个单独的文件将不那么混乱，因为`require`s 都将在一个地方。但是，它们的写入顺序可能会发生，因此您最终会在此文件中有效地手动进行依赖关系解析。

2.  > 在每个模型文件的顶部需要文件

    每个文件都会有更多的内容，但您不必担心排序，因为每个文件都明确需要它需要的依赖项。`require`多次调用同一个文件没有效果。

    这也意味着您可以只需要部分代码，这对库很有用；例如`require active_support/core_ext/date/calculations`，仅获取外部应用程序需要的库的一部分。

在这两个中，我会选择第二个。它更干净，需要更少的思考，并使您的代码更加模块化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T00:41:51.813

对于每个文件，`require`在该文件中包含它所依赖的所有文件。与其他文件重复并没有害处，因为每个文件只需要一次。这就是该`require`方法的目的。

# jquery - 使用jquery在下拉菜单更改时通知

> ID：13003672
> 
> 赞同：1
> 
> 时间：2012-10-22T00:40:04.877
> 
> 标签：jquery

所以我用它来访问我的下拉菜单，但它不起作用。

我试图弄清楚当用户更改更改时它应该提醒的选择。你能帮我解决这个问题吗？

这是我的html：

我的代码如下：

```
function alert() {
    ('#pay select').change(function() {
        alert('change');
    })
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T00:42:40.270

你错过了`$`/ `jQuery`：

```
 ('#pay select').change(function(){
//-^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T00:48:36.633

您需要添加*美元符号*以表明您正在调用 jQuery。您可能也不想在函数中调用它——而是在头部的*ready函数中调用它——这样的事情应该可以工作：*

```
...

<head>
   $(document).ready(function () {
      $('#pay select').change(function() {
         alert("Changed!");
      });
   });

... 
```

# java - Java server-client TCP，在服务器中查找最小数量

> ID：13003677
> 
> 赞同：-1
> 
> 时间：2012-10-22T00:41:29.283
> 
> 标签：java, client-server

任务： 1\. 我将在客户 printwriter **min(2,3,4,5,6)中写**

> 1.  此 msz 转到服务器缓冲读取器。

1.  服务器需要回答最小数量并打印。

如何处理这个 **min(parameters)**，服务器将其读取为字符串。

要找到最小值，我必须将此**min(param.)**转换为服务器中的真实数组列表。

下面给出了我如何完成日期的服务器代码，希望以类似的格式回答。

```
if (msgFromClient != null && msgFromClient.equalsIgnoreCase("DATE()")) { 
                    OutputStream clientOut = client.getOutputStream(); 
                    PrintWriter pw = new PrintWriter(clientOut, true); 
                    DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd");
                    Date date = new Date();
                    System.out.println(dateFormat.format(date));
                    String ansMsg = dateFormat.format(date); 
                    pw.println(ansMsg);
                } 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:33:25.037

你已经回答了你自己的问题......

1.  将 转换`String`为基于数组的`Object`
2.  找到最小值
3.  将答案返回为`String`

如果您需要帮助，请先尝试一下，发布您的答案，然后我们将能够帮助纠正任何问题。我们不会为你做作业。

# java - 列表方法返回集

> ID：13003681
> 
> 赞同：0
> 
> 时间：2012-10-22T00:42:04.010
> 
> 标签：java

我需要一些帮助来创建一个小方法，它将一个列表作为参数并搜索另一个列表，如果它与我们传递的参数匹配，那么该方法将返回一组匹配的条目。

任何输入将不胜感激。我是这个论坛的新手。如果我没有在正确的类别中发布，那么对不起，请引导我到正确的地方。

getPopularNames（流行）；

这是我的代码：

```
public List filterNames(List namesList){
    Set namesToExclude = new HashSet();
    List popular = new ArrayList();

    for (int i = 0; i < namesList.size(); i++){
        NamesList criteria = new (NamesList) namesList.get(i);
        criteria.setPopularExclusionSet(popularExclusionSet);
        popular.add(criteria);
    }
        getPopularNames(popular);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:53:59.903

我不确定你到底想要达到什么目标，但我认为你想要这样的东西：

```
Set<String> names;
Set<String> popularNames;
...
names.retainAll(popularNames); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T00:48:04.097

如果`getPopularNames(popular)`返回一个列表，那么你只需要`return`在你的方法中有一个语句，

```
return getPopularNames(popular); 
```

# dapper - 如何在第三个库中的 SqlMapper GridReader 之后自动关闭 SqlConnection

> ID：13003685
> 
> 赞同：1
> 
> 时间：2012-10-22T00:42:56.217
> 
> 标签：dapper

这是我自己的助手的代码片段，但它有一些错误。

```
 /// <summary>
  /// Execute a command that returns multiple result sets, and access each in turn
  /// </summary>
  public static  SqlMapper.GridReader QueryMultiple(string sql, dynamic param = null, string connectionName = null)
  {

      using (SqlConnection connection = GetOpenConnection(connectionName))

      { return connection.QueryMultiple(sql, param);}

  } 
```

QueryMultiple 由外部程序手动调用和关闭。不久之后，SqlConnection 应该会自动关闭，如何包装我的助手？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T13:33:01.643

奇怪的是，这里的一个选择可能是：不要给它一个开放的连接。这还没有部署到 nuget，但是如果你从 github 拉取版本，它实际上现在需要更多地控制连接，如果需要的话。所有主要方法（`Query[<T>]`, `QueryMultiple`, `Execute`）现在都可以在关闭的连接中正常工作，并在可能的情况下再次关闭它。因此，如果您有：

```
return GetClosedConnection(connectionName).QueryMultiple(sql, param); 
```

`GridReader`然后它会在到达数据末尾时自动关闭。请注意，我已经对其进行了重新构造，以确保我们`Dispose()`在离开该方法时没有连接。

# jquery - jQuery添加变量的总数

> ID：13003688
> 
> 赞同：-1
> 
> 时间：2012-10-22T00:43:41.973
> 
> 标签：jquery, variables, add

这对我来说很奇怪。一些小的语法错误或其他东西。只需将两个变量的值相加并将它们附加到第三个变量。

```
var total = 0;

input.each(function(){

    var thiis = $(this),
        cost  = thiis.attr('data-cost');

    if (thiis.prop('checked')){

        total = total + cost;
    } else {

        total = total - cost;
    }
} 
```

因此，如果`cost = 5`和 输入等于 5。相反，我得到.`checked``total``05`

* * *

更新：

Word 是这些值不是整数，所以它们是附加的。不必做一些花哨的字符串整数翻转，有没有办法让我从一开始就将数据属性作为整数获取？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T00:47:24.380

如果在某处将这些变量转换为字符串，则需要进行整数转换，这就是结果不正确的原因。

你可以做`total += parseInt(each);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T00:49:13.093

必须将其中一个（或两个）值分配为字符串。如果您经常看到这种情况，您可以通过（强制）转换为数字来避免它：

```
function add(){
  var total = 0;
  for (var a = 0; a < arguments.length; a++){
    var n = new Number(arguments[a]);
    //console.log(arguments[a] + '=' + n);
    if (isNaN(n)){
      throw "Argument " + a + " is not a number.";
    }
    total += n;
  }
  return total;
}

add('1', 2, 3.5); 
```

这是解决实际问题的方法（如果这些是实际数字，您需要了解为什么它们是字符串），但这将为您提供预期的结果：

```
total = add(total,each); 
```

# vb.net - 将列表传递给方法并将其循环以获取值

> ID：13003689
> 
> 赞同：-1
> 
> 时间：2012-10-22T00:44:02.270
> 
> 标签：vb.net, oop

我需要将一个强类型的类集合 List 传递给一个函数，并且需要遍历该类集合的属性，并且需要检查这些属性值字符串是否包含任何非法 XML 字符。请给我一个示例如何处理上述情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:31:23.227

有很多方法可以做到这一点

要么使用对象列表——</p>

```
Dim T As List(Of mClass) = New List(Of mClass)
MyFunction(T)

Dim T2 As List(Of mClass2) = New List(Of mClass2)
MyFunction(T2)

Private Sub MyFunction(ByVal myList As List(Of Object))
    For Each MyCls In myList
        If TypeOf MyCls Is mClass Then
            Dim cInst As mClass = DirectCast(MyCls, mClass)
            cInst.P = 
        ElseIf TypeOf MyCls Is mClass2 Then
            Dim cInst As mClass2 = DirectCast(MyCls, mClass2)
            cInst.A = 
        End If
    Next
End Sub 
```

或者只是将列表作为对象传递-

```
Dim T As List(Of mClass) = New List(Of mClass)
MyFunction(T)

Dim T2 As List(Of mClass2) = New List(Of mClass2)
MyFunction(T2)

Private Sub MyFunction(ByVal myList As Object)
    If TypeOf myList Is List(Of mClass) Then
        Dim cInst As List(Of mClass) = DirectCast(myList, List(Of mClass))
        For Each MyCls As mClass In cInst
            MyCls.P = 
        Next
    ElseIf TypeOf myList Is List(Of mClass2) Then
        Dim cInst As List(Of mClass2) = DirectCast(myList, List(Of mClass2))
        For Each MyCls As mClass2 In cInst
            MyCls.A = 
        Next
    End If
End Sub 
```

这可能会有所帮助的另一件事如果您愿意，您可以为 Para 定义变量数据类型

```
Dim T As Integer
Dim T2 As String
MyFunction(Of Integer)(T)
MyFunction(Of String)(T2)

Private Sub MyFunction(Of AnyNameForType)(ByVal myList As AnyNameForType)

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:31:26.030

```
Dim T As List(Of mClass) = New List(Of mClass)
myfunction(T)

Private Function MyFunction(ByVal myList As List(Of mClass))
    For Each MyCls As mClass In myList
        MyCls.mProperty = 
    Next
End Function 
```

# ruby - 如何使用 Ruby 自动将行添加到融合表（尤其是带有地理/地图信息的表）？

> ID：13003690
> 
> 赞同：2
> 
> 时间：2012-10-22T00:44:06.640
> 
> 标签：ruby, google-fusion-tables

[PriceOfWeed.com](http://priceofweed.com)是一个网站，用户可以在其中提交他们为大麻支付的费用。如果你点击一个州，你可以看到有多少用户提交了他们的交易，以及支付的平均价格。

这是我假设它的工作原理：

1.  用户使用网站顶部的表格提交他们支付的金额。
2.  该价格被插入到网站所有者的 Fusion Table 中。
3.  融合表地图现在反映了更新的信息。

我想了解的是这个过程如何在 Ruby 中工作——特别是第 2 步。我想使用 Fusion Tables 和 Ruby 制作一张带有动态更新数据的酷地图，但我还没有找到简单的说明/如何做到这一点的例子。

有谁知道我如何使用 Ruby 自动将行添加到我自己的 Fusion Table 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:50:27.020

我使用了[fusion_tables](https://github.com/tokumine/fusion_tables) gem 来使用 Google Fusion Tables 来生成美国各州和各县的地图信息。

使用起来非常简单。README.md[文件](https://github.com/tokumine/fusion_tables/blob/master/README.md)解释了使用融合表所涉及的步骤。

以下是整体结构的工作原理： 1\. 创建基本融合表以存储所需数据。2.将其与包含地理信息（州/县等）的公开可用融合表合并，并创建地图视图。3\. 使用基于 fusion_tables gem 的 ruby​​ 代码，将记录插入到基本融合表中。地图将使用新信息进行更新。

插入记录的代码如下：

```
require 'fusion_tables'

# Connect to service    
@ft = GData::Client::FusionTables.new      
@ft.clientlogin(username, password) # Make sure this user has read/write access to the Fusion Table.

tables = @ft.show_tables
required_table = tables.select{ |t| t.name == "Base_table" } # assuming the base table name is "Base_table"

data = [ { "column_1" => <First Column 1 data>, "column_2" = <First column 2 data>...},
         { "column_1" => <Second Column 1 data>, "column_2" = <Second column 2 data>...},
         ...
       ]

 required_table.insert data 
```

# facebook-graph-api - 在没有测试服务器的情况下提交 Facebook 打开图形操作

> ID：13003695
> 
> 赞同：0
> 
> 时间：2012-10-22T00:44:35.530
> 
> 标签：facebook-graph-api, submit, action

我为我的 facebook 应用程序创建了 2 个打开图形操作。提交过程似乎假设我有一个单独的测试服务器要提交进行测试。但是，就我而言，我们在一些本地机器上进行所有测试，然后拥有我们的真实服务器。在这种情况下有什么技巧可以提交动作吗？如果我按原样移动我的代码，用户将在操作被批准时收到错误 - 对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T07:21:15.130

您应该在语句中保留 Open graph 相关调用`try catch`，以免用户遇到错误。在获得批准之前，它不会为用户发布活动，一旦获得批准，它将开始为所有用户工作。

# android - 列表片段中的图像

> ID：13003696
> 
> 赞同：0
> 
> 时间：2012-10-22T00:44:37.050
> 
> 标签：android, fragment

我需要做什么来创建一个看起来像这样的 ListFragment 而不仅仅是在其中包含文本：

```
----------------------------------
|       |                        |
|       |                        |
| Image |      Text              |
|       |                        |
|       |                        |    
---------------------------------- 
```

我只是用文本填充 ListFragment 没有问题，但我将如何在其中添加该图像和文本？任何人都知道任何可以帮助我的参考资料或例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T13:22:11.083

在这里找到了我想要的东西：[http](http://www.javasrilankansupport.com/2012/05/android-listview-example-with-image-and.html) ://www.javasrilankansupport.com/2012/05/android-listview-example-with-image-and.html 。

最后代替：

```
ArrayList<ListDetails> image_details = GetSearchResults();
final ListView lv1 = (ListView) findViewById(R.id.listV_main);
lv1.setAdapter(new ItemListBaseAdapter(getActivity(), image_details)); 
```

我刚刚与其他类一起用于我的 ListFragment：

```
ArrayList<ListDetails> image_details = GetSearchResults();
setListAdapter(new ListDetailsBaseAdapter(getActivity(), image_details)); 
```

# java - 展开文件名，重新插入到属性对象中

> ID：13003697
> 
> 赞同：3
> 
> 时间：2012-10-22T00:44:53.047
> 
> 标签：java, javascript, jsp

```
<%! FxDataModel FxDataModel = null;
    public void jspInit() {
    Properties fxProp = new Properties();

    ServletContext ctx = getServletContext();
    String path = ctx.getRealPath("/WEB-INF/fxRates.csv");
    fxProp.getProperty(path);
    try{
       FileInputStream fis = new FileInputStream( ctx.getRealPath( ctx.getInitParameter( FxDataModel.FX_PRP_FILE_NAME ) ) );
       // Now that you have fis you can load properties.
       fxProp.load( fis );
       // Now, you are done with fis so close it
       fis.close();
    }catch ( IOException e ) {}
    FxDataModel = new FxDataModel( fxProp );
}
%> 
```

在 NetBeans 中查看我的代码，一切似乎都很好。但是，当我运行它时，我得到一个 HTTP 状态 500 错误。当我问我的教授如何解决它时，他告诉我，

> “显然，fxRates.csv 不是因为您未能使用 getRealPath 将文件名扩展为绝对路径并将其重新插入到属性对象 fxProp 中。”

我不完全确定我必须添加项目中的哪些其他代码，但我感觉错误存在于本节中。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T16:20:07.020

Properties api 的工作方式类似于 map

```
Properties p = new Properties()  
p.put('something','thisandthat') 
p.get('something') 
```

使用 put 添加或更新属性并获取检索。不知道你想做什么

# knockout.js - 组合字符串文字和对象值时出现 Knockout.js attr 错误

> ID：13003704
> 
> 赞同：14
> 
> 时间：2012-10-22T00:46:08.350
> 
> 标签：knockout.js

使用 Knockout 工作一个新项目，基本文档似乎没有解释如下案例。使用以下 attr 调用；产生了不正确的href： **“api/degrees/function c(){if(0”)**

```
<a data-bind="attr: { href: '/api/degrees/' + fieldId }"> 
```

尽管以下内容正确生成了 fieldId 值

```
<a data-bind="attr: { href: fieldId }"> 
```

是成功组合基本 url 字符串和 JS 对象值以使用 Knockout 计算值的唯一方法吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-22T00:50:10.477

尝试：

```
<a data-bind="attr: { href: '/api/degrees/' + fieldId() }"> 
```

# c - C shell 中的错误文件描述符问题

> ID：13003705
> 
> 赞同：1
> 
> 时间：2012-10-22T00:46:37.633
> 
> 标签：c, file, shell, file-descriptor

我正在为家庭作业编写自己的外壳，并且遇到了这个问题：

每当我输入将输出重定向到文件的命令时（即 ls -al > output.txt），我的 shell 应该处理该命令并重定向输出。但是，我不断收到此消息：`ls: write error: Bad file descriptor`

我在其他一些论坛上看到它可能与超出内存量有关，但我不明白这可能是什么问题。这是我的一些代码（如果您需要更多代码以了解清楚，请随时询问）：

```
loc[0] = argv[0];                 //used for execution

while(argv[count] != 0){                    //loop through commands
    if(strcmp(argv[count], "<") == 0)    //and test for certain flags
        inFlag = 1;
    else if(strcmp(argv[count], ">") == 0){
        argv[count] = argv[count+1] = 0;
        outFlag = 1;
    }
    else if(strcmp(argv[count], "&") == 0)
        bgFlag == 1;
    else if(strcmp(argv[count], "|") == 0){
        argv[count] = 0;
        loc[pipes+1] = argv[count+1];
        pipes++;
    }
        count++;
}

for(k = 0; k <= pipes; k++){
    if(j < pipes){
        pipe(r_tube);
        j++;
    }

    pid = fork();

    if(pid > 0){
        if(j > 0){
            close(l_tube[0]);
            close(l_tube[1]);
        }
        l_tube[0] = r_tube[0];
        l_tube[1] = r_tube[1];
    }
    else if(pid == 0){
        if((k == 0) && (inFlag == 1)){
            int n = open("input.txt", "r");
            close (0);
            dup (n);
            close (n);
        }
        else if((k > 0) && (k < pipes)){

        }
        else if((k == pipes) && (outFlag == 1)){   //<-----issue
            int out = open("output.txt", 0666);
            close (1);
            dup (out);
            close (out);
        }
        else if(k == pipes){

        }
        execvp(argv[loc[k]], &argv[loc[k]]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T03:32:20.717

int open(const char *pathname, int flags, ... /* mode_t mode */);

您需要一个访问模式以确定您要对文件执行的操作。例如（O_WRONLY - 只写或 O_RDONLY - 只读）...顺便说一句，这比这 2 个要多得多。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T01:00:27.723

试试这个：

```
count = 0;

loc[0] = argv[0];                 //used for execution

count++;
pipes++;

char* outFile = NULL;
char* inFile = NULL;

while(argv[count] != 0)
{ 
    if(strcmp(argv[count], "<") == 0)
    { 
        inFile = strdup(argv[count+1]);
        inFlag = 1;
        count++;
    }
    else if(strcmp(argv[count], ">") == 0)
    {
        outFile = strdup(argv[count+1]);
        outFlag = 1;
        count++;
    }
    else if(strcmp(argv[count], "&") == 0)
    {
        bgFlag == 1;
    }
    else if(strcmp(argv[count], "|") == 0)
    {
        argv[count] = 0;
        loc[pipes] = argv[count+1];
        pipes++;
    }

    count++;
}

int current_out = STDOUT_FILENO;
int current_in = STDIN_FILENO;
int next_in = STDIN_FILENO;

for(k = 0; k <= pipes; k++)
{
    int cur_pipes[2];

    int last_out = current_out;
    int last_in = current_in;

    if(k < pipes)
    {
        pipe(cur_pipes);
        current_out = cur_pipes[1];
        current_in = next_in;
        next_in = cur_pipes[0];
    }

    else if (k == pipes)
    {
        current_out = STDOUT_FILENO;
        current_in = next_in;
    }

    pid = fork();

    if(pid > 0)
    {
        if(k > 0)
        {
            close(last_out);
            close(last_in);
        }
    }
    else if(pid == 0)
    {
        if((k == 0) && (inFlag == 1))
        {
            int n = open(inFile, O_RDONLY);
            if (n == -1) 
            {
                printf("Could not open input file!\n");
                exit(1);
            }
            current_in = n;
        }

        if((k == pipes) && (outFlag == 1))
        {
            int n = open(outFile, O_WRONLY | O_CREAT, 0666);
            if (n == -1) {
                printf("Could not open output file!\n");
                exit(1);
            }

            current_out = n;
        }       

        if (current_in != STDIN_FILENO)
        {
            close (STDIN_FILENO);
            dup (current_in);
            close (current_in);
        }

        if(current_out != STDOUT_FILENO)
        {
            close(STDOUT_FILENO);
            dup(current_out);
            close(current_out);
        }

        execvp(argv[loc[k]], &argv[loc[k]]);
    }
} 
```

# python - 我如何把它变成一个 numpy 矩阵？

> ID：13003706
> 
> 赞同：4
> 
> 时间：2012-10-22T00:46:41.797
> 
> 标签：python, matrix, numpy

如何将数组`a = [[[[1, 2, 3, 4], [5, 6, 7, 8]], [[9, 10, 11, 12], [13, 14, 15, 16]]]]`转换为形式的 numpy 矩阵

```
[[1,2,3,4],
[5,6,7,8],
[9,10,11,12],
[13,14,15,16]] 
```

? 我试过`np.bmat(a)`无济于事。当我这样做时，我得到一个 2x6 矩阵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T01:00:06.520

用于`np.array`构造数组，然后`reshape`将其塑造成正确的形状：

```
>>> np.array([[[[1, 2, 3, 4], [5, 6, 7, 8]], [[9, 10, 11, 12], [13, 14, 15, 16]]]]).reshape((4,4))
array([[ 1,  2,  3,  4],
       [ 5,  6,  7,  8],
       [ 9, 10, 11, 12],
       [13, 14, 15, 16]]) 
```

# visual-c++ - C++/CLI 多个错误

> ID：13003709
> 
> 赞同：2
> 
> 时间：2012-10-22T00:47:28.700
> 
> 标签：visual-c++

在构建这项学校作业时，我遇到了多个令人困惑的错误，并希望就可能出现的问题提供一些指导。我通常不会这样写，但我在尝试调试时将所有内容都放入一个文件中。使用 Visual Studios Express 2012。我在构建时遇到了 30 多个错误，所以我确信有一些基本的东西我只是忽略了。只是一个建议，不要找人做我的功课。谢谢

```
#include "stdafx.h"
#include <Windows.h>
#include <iostream>
#include "MessageDisplayClass.h"
#include "LogMessageClass.h"
#include "TimerEventArgs.h"

using namespace System;

ref class CustomTimerClass
{

private:
static bool stopFlag = false;

// create instance of TimerEventArgs
TimerEventArgs^ timerEvent;

public:
CustomTimerClass(void)
{
}
delegate void CustomTimerClass::TimerAlarmHandler(/*Object^ sender, TimerEventArgs^ args*/);
event CustomTimerClass::TimerAlarmHandler^ OnTimerAlarm;

property bool StopFlag
{
    bool get(void)
    {
        return stopFlag;
    }

    void set(bool b)
    {
        stopFlag = b;
    }
}

void run()
{
    Sleep(1000);
    raiseTimerAlarm();
}

void OnStart()
{
    // create instances of DisplayMessageClass and LogMessageClass classes
    DisplayMessageClass^ messageDisplayer = gcnew DisplayMessageClass(this);
    LogMessageClass^ messageLogger = gcnew LogMessageClass(this);

    // display and log messages concerning this event
    messageDisplayer->displayMessage(this, timerEvent);
    messageLogger->logMessage(this, timerEvent);
}

void raiseTimerAlarm()
{
    // create instance of TimerEventArgs and get time of instance creation
    timerEvent = gcnew TimerEventArgs();
    String^ eventTime = timerEvent->EventTime;

    // tie this instance of CustomTimerClass to OnTimerAlarm event and start event
    this->OnTimerAlarm += gcnew TimerAlarmHandler(this, &CustomTimerClass::OnStart);
    OnTimerAlarm();
}
};

ref class MainProgram
{
int main(array<System::String ^> ^args)
{
    CustomTimerClass^ timerClass = gcnew CustomTimerClass();
    DisplayMessageClass^ messageClass = gcnew DisplayMessageClass();
    LogMessageClass^ logerClass = gcnew LogMessageClass();
    timerClass->run();
    return 0;
}
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:50:54.027

为了其他人（其他新手）的利益：事实证明，我怀疑问题在于某些类彼此“#include”是问题所在。使用前向声明，再加上必须完全创建一个单独的类来充当变量存储处理程序，是解决我的问题的方法。

以下是给我带来最大问题的两个类，已更正以正常运行：

```
/*
CustomTimerClass.h
*/

#include "StdAfx.h"
#include "LogMessageClass.h"
#include "MessageDisplayClass.h"
#include "TimerEventArgs.h"
#include "Variables.h"

//ref class MessageDisplayClass;
//ref class Variables;

using namespace System;

ref class CustomTimerClass
{

private:
static bool stopFlag = false;

// create instance of TimerEventArgs
TimerEventArgs^ timerEvent;

// create instance of MessageDisplayClass and LogMessageClass
MessageDisplayClass^ messageDisplayer;
LogMessageClass^ messageLogger;

Variables^ flagVariable;

public:
CustomTimerClass(void)
{
}

delegate void CustomTimerClass::TimerAlarmHandler();
event CustomTimerClass::TimerAlarmHandler^ OnTimerAlarm;

property bool StopFlag
{
    bool get(void)
    {
        return stopFlag;
    }

    void set(bool b)
    {
        stopFlag = flagVariable->Flag;
    }
}

void run()
{
    Sleep(1000);
    raiseTimerAlarm();
}

void OnStart()
{
    // create instances of DisplayMessageClass and LogMessageClass classes
    messageDisplayer = gcnew MessageDisplayClass(this, flagVariable);
    messageLogger = gcnew LogMessageClass(this);

    // display and log messages concerning this event
    messageDisplayer->displayMessage(this, timerEvent);
    messageLogger->logMessage(this, timerEvent);
}

void raiseTimerAlarm()
{
    // create instance of TimerEventArgs and get time of instance creation
    timerEvent = gcnew TimerEventArgs();
    String^ eventTime = timerEvent->EventTime;

    // tie this instance of CustomTimerClass to OnTimerAlarm event and start event
    this->OnTimerAlarm += gcnew TimerAlarmHandler(this, &CustomTimerClass::OnStart);
    OnTimerAlarm();
}
};

/*
MessageDisplayClass serves to display a message that 
represents the time at which the TimerEventArgs class is 
instantiated.  This time is returned through a function
of TimerEventArgs class.
*/

#pragma once

#include "stdafx.h"
#include <iostream>
#include "TimerEventArgs.h"
#include "Variables.h"

using namespace System;

ref class CustomTimerClass; // FORWARD DECLARATION HERE  CAN
                        // ONLY BE USED FOR REFERENCE.  CANNOT
                        // BE USED WHEN METHODS OF THE     CLASS
                        // ARE CALLED

ref class MessageDisplayClass
{

private:
CustomTimerClass^ customTimerRef;

// Variables CLASS CREATED SOLELY TO ACT AS GO-BETWEEN BETWEEN
// MessageDisplayClass and CustomTimerClass
Variables^ variableRef;         

static int counter;
public:

// constructor
MessageDisplayClass(CustomTimerClass^ CustomTimerClassInput, Variables^ variableReference)
{
    customTimerRef = CustomTimerClassInput;
    variableRef = gcnew Variables (CustomTimerClassInput); 
}

void displayMessage(Object^ sender, TimerEventArgs^ timer)
{
    counter ++;
    if (counter > 0)
    {
        variableRef->Flag = true;
        Console::WriteLine("Message:  an event occured at time stamp: " + timer->EventTime);
    }
}
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T01:54:43.120

除了错误的声明顺序之外，问题似乎是编译器无法识别 ^ 位，这表明您没有编译为 C++/CLI。右键单击**解决方案资源管理器**中的项目并转到**Configuration Properties -> General**，并确保**Common Language Runtime Support**设置为**Common Language Runtime Support (/clr)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T01:09:12.197

在您尝试使用各种类时，编译器还不知道它们。将您的`main()`函数移动到文件的末尾。或者更好的是，将您的类定义拆分到它们自己的头文件中，然后将它们包含在您的主源文件中。

还有其他相关的问题。例如，您试图`TimerEventArgs`在编译器知道之前使用该类。因此，您需要将类定义向上移动。这就是为什么最好将每个类放在自己的头文件中，然后在需要的地方包含它。虽然这不是绝对不必要的，但如果您以正确的顺序声明/定义所有内容。

# hibernate - 从 Tomcat 7.0.23 升级到 7.0.27 的 JNDI 数据源错误

> ID：13003711
> 
> 赞同：0
> 
> 时间：2012-10-22T00:47:58.723
> 
> 标签：hibernate, datasource, tomcat7, jndi

我正在尝试从 Tomcat 7.0.23 升级到 7.0.27（实际上正在运行 Liferay）。尝试通过 Hibernate 访问数据源时出现以下异常：

```
16:28:27,694 ERROR [http-bio-8080-exec-1][DatasourceConnectionProvider:110] Could not find datasource: java:/comp/env/jdbc/MySqlDS
javax.naming.NameNotFoundException: Name [java:/comp/env/jdbc/MySqlDS] is not bound in this Context. Unable to find [java:].
    at org.apache.naming.NamingContext.lookup(NamingContext.java:820)
    at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
    at org.apache.naming.SelectorContext.lookup(SelectorContext.java:158)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at org.hibernate.connection.DatasourceConnectionProvider.configure(DatasourceConnectionProvider.java:75)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:143)
    at org.hibernate.connection.ConnectionProviderFactory.newConnectionProvider(ConnectionProviderFactory.java:84)
    at org.hibernate.cfg.SettingsFactory.createConnectionProvider(SettingsFactory.java:459)
    at org.hibernate.cfg.SettingsFactory.buildSettings(SettingsFactory.java:90)
    at org.hibernate.cfg.Configuration.buildSettingsInternal(Configuration.java:2863)
    at org.hibernate.cfg.Configuration.buildSettings(Configuration.java:2859)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1870)
[...] 
```

完全相同的代码在 7.0.23 中运行良好（我可以在任一实例中删除 WAR 文件）。

这是我的 $CATALINA_HOME/conf/context.xml 文件（已删除评论）：

```
<?xml version='1.0' encoding='utf-8'?>
<!-- The contents of this file will be loaded for each web application -->
<Context>

    <!-- Default set of monitored resources -->
    <WatchedResource>WEB-INF/web.xml</WatchedResource>

  <Resource name="jdbc/MySqlDS" auth="Container"
            type="javax.sql.DataSource"
            driverClassName="com.mysql.jdbc.Driver"
            username="xxx"
            password="xxx"
            url="jdbc:mysql://localhost:3306/xx?useUnicode=true&amp;characterEncoding=UTF-8&amp;relaxAutoCommit=true"
            maxActive="200" maxIdle="30" maxWait="10000"
            minIdle="3"
            testWhileIdle="true" testOnBorrow="true"
            timeBetweenEvictionRunsMillis="120000"
            minEvictableIdleTimeMillis="600000"
            validationQuery="select 1"
        />
</Context> 
```

来自应用程序的 web.xml：

```
<?xml version="1.0"?>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <servlet>
        <servlet-name>HibernateServlet</servlet-name>
        <servlet-class>com.liferay.samplehibernate.servlet.HibernateServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>HibernateServlet</servlet-name>
        <url-pattern>/servlet/*</url-pattern>
    </servlet-mapping>
    <jsp-config>
        <taglib>
            <taglib-uri>http://java.sun.com/portlet_2_0</taglib-uri>
            <taglib-location>
                /WEB-INF/tld/liferay-portlet.tld
            </taglib-location>
        </taglib>
    </jsp-config>
    <resource-ref>
            <description>data source</description>
            <res-ref-name>jdbc/MySqlDS</res-ref-name>
            <res-type>javax.sql.DataSource</res-type>
            <res-auth>Container</res-auth>
    </resource-ref>
</web-app> 
```

最后是 hibernate.cfg.xml 文件：

```
<?xml version="1.0"?>
    <!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN"     "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <property name="current_session_context_class">thread</property>

        <!-- Mappings -->
        <property name="connection.datasource">java:/comp/env/jdbc/MySqlDS</property>
        <property name="dialect">
            org.hibernate.dialect.MySQLDialect
        </property>

        <mapping
            resource="com/liferay/samplehibernate/model/FoodItem.hbm.xml" />
    </session-factory>
</hibernate-configuration> 
```

关于我所缺少的任何建议？谢谢。

# android - Android XML 资源格式/结构

> ID：13003715
> 
> 赞同：1
> 
> 时间：2012-10-22T00:48:26.353
> 
> 标签：android, xml

如何正确编写对象具有主ID且子对象具有子ID的android xml资源

我有很好的例子来解释我的问题。示例是用 Plist 编写的（iOS 的修改 xml 版本）：

```
<plist version="1.0">
<dict>
<key>223</key>----main key/ID
<dict>
<key>name</key>----sub-key/ID
  <string>Bill</string>
<key>uzvards</key>
  <string>Gates</string>
<key>adress</key>
  <string>Broadway</string> 
```

所以我需要这种用android XML编写的数据结构。我猜应该在 Values 文件夹中创建 xml 文件并使用资源类型！？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:37:40.680

在查看 Plist 之后，我认为我的评论是一个合适的答案。在您的实际代码中，您将希望使用[hashmap 之](http://developer.android.com/reference/java/util/HashMap.html)类的东西来存储您的数据。根据您的需要，有很多方法可以设置它，但您可以创建一个新的 hashmap

```
HashMap<String, String> myMap = new Hash<String, String>(); 
```

然后使用 put(key, value) 将内容添加到您可能从 TextView 获得并可以显示在 EditText 中的地图中。您还可以使用 ArrayList 和许多其他方法，具体取决于您想要完成的任务。或者HashMaps里面的HashMaps。注意：如果您想保持地图的顺序，您将需要使用链接的哈希图 res 目录是您存储布局 (UI) 的 XML 的位置。我的评论链接应该很好地解释了这一点。希望这可以帮助。

# regex - 如何为此目的编写正则表达式？

> ID：13003716
> 
> 赞同：-3
> 
> 时间：2012-10-22T00:48:26.103
> 
> 标签：regex, html-parsing

我想写一个正则表达式来解析这个网页（查看源：http://www.imdb.com/search/title?title=spiderman&title_type=feature）。基本上我想提取 和 之间的所有`<tr class=".+">`部分`</tr>`。该网页是来自 imdb(http://www.imdb.com/search/title?title=spiderman&title_type=feature) 的电影列表，这里的每个部分都表示一部电影。我尝试了正则表达式

```
<tr class=".+">(.+\n)+</tr> 
```

但是，它不起作用。另外，我不允许使用 DOM。有没有人有什么建议？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:51:54.140

我强烈建议您使用适当的解析器。但这是您的案例的正则表达式。

```
<tr class="(.+)">([\s\S]+?)</tr> 
```

# c# - 正则表达式非贪婪匹配

> ID：13003721
> 
> 赞同：1
> 
> 时间：2012-10-22T00:49:15.980
> 
> 标签：c#, regex

如果我有以下简化字符串：

```
 string331-itemR-icon253,string131-itemA-icon453,
string12131-itemB-icon4535,string22-itemC-icon443 
```

如何仅使用正则表达式获得以下内容？

```
string12131-itemB-icon4535, 
```

所有数字都是未知的。唯一已知的部分是 itemA、itemB、itemC、string 和 icon

我已经尝试过`string.+?itemB.+?,`，但它也从第一次出现`string`而不是与 itemB 相邻的那个开始出现

我也尝试过`[^icon]`在不同位置使用 itemB 之前，但无法让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T00:53:56.087

试试这个：

```
string[^,]+itemB[^,]+, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T00:56:24.587

试试这个正则表达式

```
 string\d+-itemB-icon\d+, 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T01:14:54.267

使用一组受限字符而不是通配符的给定解决方案是最简单的，但要在一般问题上获得更多信息：您得到了正确的非贪婪量词部分，但非贪婪并不会阻止匹配器作为许多字符，因为它需要找到一个匹配。您可能正在寻找*[原子组](http://www.regular-expressions.info/atomic.html)*运算符，`(?>group).`一旦组匹配某些内容，如果匹配器需要回溯，它将被原子处理。

```
(?>string.+?item)B.+?, 
```

在您的示例中，组匹配`string331-item`，但`B`不匹配`R`，因此整个组被扔掉，搜索移至下一个`string`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T01:01:36.010

您没有提到逗号分隔项目作为已知部分，但在示例正则表达式中使用它，所以我认为它可以在解决方案中使用。尝试将逗号排除为字符集，而不是与“.”匹配。

# android - 为什么我在模拟器上运行android应用后eclipse突然开始运行缓慢？

> ID：13003723
> 
> 赞同：-2
> 
> 时间：2012-10-22T00:49:35.867
> 
> 标签：android, eclipse

任何有类似问题的人请把你的经验与这个问题联系起来。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:03:35.243

如果您想运行得更快，您的系统需要至少 4GB 的 RAM。如果您使用的是 1GB RAM，请按照此操作

转到 AVD Manager -> 选择 Emulator 并选择 Edit Options 给 SdCard 大小 125 并重新启动您的模拟器。

# curl - 卷曲不适用于子域

> ID：13003726
> 
> 赞同：2
> 
> 时间：2012-10-22T00:50:24.313
> 
> 标签：curl

这是我现在得到的代码（更改了域名和子域名）：

```
<?php
$agent = "Mozilla/5.0 (X11; U; Linux i686; en-US) AppleWebKit/534.16 (KHTML, like Gecko) Chrome/10.0.648.204 Safari/534.16";
$headers = "Expect:";
$postdata = "username=test&password=test&ref=".base64_encode(md5(time().".com"))."&session=s".md5(time());
$login="http://subdomain.mydomain.com/login.php";
$grab="http://subdomain.mydomain.com/index.php";
function login($url,$data){
        $fp = fopen("cookie.txt", "w");
        fclose($fp);
        $login = curl_init();
        curl_setopt($login, CURLOPT_COOKIEJAR, "cookie.txt");
        curl_setopt($login, CURLOPT_COOKIEFILE, "cookie.txt");
        curl_setopt($login, CURLOPT_TIMEOUT, 40000);
        curl_setopt($login, CURLOPT_RETURNTRANSFER, TRUE);
        curl_setopt($login, CURLOPT_URL, $url);
        curl_setopt($login, CURLOPT_USERAGENT, $agent);
        curl_setopt($login, CURLOPT_COOKIESESSION, true);
        curl_setopt($login, CURLOPT_FOLLOWLOCATION, TRUE);
        curl_setopt($login, CURLOPT_POST, TRUE);
        curl_setopt($login, CURLOPT_POSTFIELDS, $data);
        ob_start();
        return curl_exec ($login);
        ob_end_clean();
        curl_close ($login);
unset($login);
}                                
function grab_page($site){
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
        curl_setopt($ch, CURLOPT_USERAGENT, $agent);
        curl_setopt($ch, CURLOPT_TIMEOUT, 40000);
        curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
        curl_setopt($login, CURLOPT_COOKIESESSION, true);
        curl_setopt($ch, CURLOPT_URL, $site);
        ob_start();
        return curl_exec ($ch);
        ob_end_clean();
        curl_close ($ch);
}
function grab_subpage($site){
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
        curl_setopt($ch, CURLOPT_USERAGENT, $agent);
        curl_setopt($ch, CURLOPT_TIMEOUT, 40000);
        curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
        curl_setopt($login, CURLOPT_COOKIESESSION, true);
        curl_setopt($ch, CURLOPT_URL, $site);
        ob_start();
        return curl_exec ($ch);
        ob_end_clean();
        curl_close ($ch);
}
function post_data($site,$data){
        $datapost = curl_init();
        curl_setopt($datapost, CURLOPT_URL, $site);
        curl_setopt($datapost, CURLOPT_TIMEOUT, 40000);
        curl_setopt($datapost, CURLOPT_HEADER, TRUE);
        curl_setopt($datapost, CURLOPT_HTTPHEADER, $headers);
        curl_setopt($datapost, CURLOPT_USERAGENT, $agent);
        curl_setopt($datapost, CURLOPT_POST, TRUE);
        curl_setopt($datapost, CURLOPT_POSTFIELDS, $data);
        curl_setopt($datapost, CURLOPT_COOKIEFILE, "cookie.txt");
        ob_start();
        return curl_exec ($datapost);
        ob_end_clean();
        curl_close ($datapost);
        unset($datapost);
}
login($login, $postdata);
echo grab_page($grab);
?> 
```

好的，所以...如果我从[http://subdomain.mydomain.com/](http://subdomain.mydomain.com/)导航任何页面，此代码工作正常，但如果我尝试从[http://anothersubdomain.mydomain.com/](http://anothersubdomain.mydomain.com/)获取页面，它会下降并显示给我一个白页。var_dump(grab_page($grab)); 回应我 string(0) "" 。我无法弄清楚问题是什么以及为什么我无法访问该页面。我现在正在谷歌搜索一个星期，尝试了很多方法，但没有任何效果，也许你们可以帮助我......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:51:18.680

检查 cookie 文件，如果它有任何保存的 cookie，因为[CURLOPT_COOKIEJAR](http://lt1.php.net/manual/en/function.curl-setopt.php)应该在您关闭句柄时保存 cookie。

在您的登录功能中更改此代码：

```
 ob_start();
    return curl_exec ($ch);
    ob_end_clean();
    curl_close ($ch); 
```

至：

```
$response_data = curl_exec($ch);
curl_close($ch);
return $response_data; 
```

# c++ - 编写我自己的内存管理器类，覆盖 new 和 delete 运算符

> ID：13003735
> 
> 赞同：3
> 
> 时间：2012-10-22T00:53:04.677
> 
> 标签：c++

我被分配了创建自己的内存管理器课程的任务，但我真的不知道从哪里开始。我的指示是；

```
//1> write a memman allocation function
//2> insure the alloce functions returns unused addresses
//3> once all memman memmory is used up, subsequent alloces return NULL
//4> enable freeing of memory and subsequent reuse of those free'd regions 
```

我已经尝试过寻找有关处理内存分配的任何指南，但我并没有太成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T01:03:35.137

这是一个非常非常天真的想法，可以帮助您入门：

```
char arena[1000000];
char * current = arena;

void * memman(std::size_t n)
{
    char * p = current;
    current += 16 * ((n + 15) / 16);   // or whatever your alignment

    return p;
} 
```

所有内存都是静态分配的，因此您不需要任何库调用来获取初始内存块。我们确保只返回具有最大对齐的指针（这里硬编码为 16，尽管这应该是一个常量，如`sizeof(std::maxalign_t)`）。此版本不允许任何回收，并且缺少溢出检查。

对于回收，您可以尝试编写一个*free list*。

作为一个细微的变化，您可以使您的数组成为`maxalign_t`s 的数组，这将稍微简化步进逻辑。或者您可以将其设为一个数组`uintptr_t`并将内存本身用作空闲列表。

# javascript - 等待执行代码，直到 AJAX 调用图像渲染之后

> ID：13003736
> 
> 赞同：0
> 
> 时间：2012-10-22T00:53:05.963
> 
> 标签：javascript, ajax

我正在尝试运行一些代码，以在加载并填充来自 AJAX 调用的图像后获取 div 的宽度和高度。

在放置图像之前，div 为 0x0，因此在几乎破坏所有内容之前检查尺寸。

我试过 .load() （不起作用，因为这是一个 AJAX 调用）。我还尝试了[imagesLoaded](https://github.com/desandro/imagesloaded#readme) js 插件。这是我现在所拥有的：

```
alert('outside;')
function startBubbles(){
    alert('inside');
    var space = new DisplaySpace($('#bubbleWrap').height(), $('#bubbleWrap').width());
    var count = 1;
    alert(space.getHeight());
    var delay = (function(){
      var timer = 0;
      return function(afterResize, ms){
        clearTimeout (timer);
        timer = setTimeout(afterResize, ms);
      };
    })();

    var spawnInterval = self.setInterval(function(){
        var aBubble = new Bubble(count, space);
        count++
        aBubble.spawnimate(aBubble);
        setTimeout(function() {aBubble.popBubble(aBubble)},Math.floor((Math.random()*30000)+10000));
    }, 500);
}); 
```

我的警报在图像可见之前全部触发，然后我的“空间”对象的高度和宽度仍然为 0。

bubbleWrap 是加载区域内的一个 div，其中包含相关图像。我意识到在大多数情况下我可能只能在这里手动延迟来解决问题 - 但这似乎不是最佳选择。我错过了什么？

我现在正在实现这个特定状态的负载，如下所示：

```
History.Adapter.bind(window,'popstate',function(){ 
                var state = History.getState(); 
                state = 'target='+state.data.state;
                $.get('contents.php', state, function(data){
                    if(state == 'target=bubbles'){
                        $('#loading_zone').html(data).waitForImages(startBubbles());
                    }
                    else{
                        $('#loading_zone').html(data);
                    }

                });
        }); 
```

不幸的是，在页面重新加载时，高度最终只有 10。不过，当我离开并返回时，一切似乎都很棒。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T00:57:16.507

我有一个[插件](https://github.com/alexanderdickson/waitForImages)可以很好地做到这一点。

只需在注入新 HTML 后调用它。

```
// Assume this function is the callback to the *success*.
function(html) {
    $("#target").html(html).waitForImages(function() {
        // All descendent images have now loaded, and the 
        // containing div will have the correct dimensions.
    });
}; 
```

# c# - 如何检查文件路径是否有效

> ID：13003737
> 
> 赞同：0
> 
> 时间：2012-10-22T00:53:19.833
> 
> 标签：c#

我在注册表中有一个字符串，它可以指向一个`.exe`，`.txt`以及某些命令行参数，例如：

```
C:\\PAthtoTheExe\program1.exe -arg1 -arg2 
```

如何确定“program1.exe”是否是有效的可执行文件，即它指向现有文件的 IE？（如果用户卸载应用程序，这可能会被删除，例如：）

我不喜欢解析参数的想法，因为现在，路径可以指向 a `.exe`or`.txt`或 a `.url`。如果不这样做，我将不得不投入很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T00:54:16.477

有个

```
File.Exists( path ); 
```

`true`如果文件名存在则返回的方法。但是，它不会告诉您文件是否包含有效的可执行文件。

您可以使用将路径与其他参数分开

```
string tokens[] = registry_value.Split( ' ' ); 
```

然后将第一个令牌传递给`File.Exists()`

# ruby-on-rails - 使用 FactoryGirl 创建具有所需关联的对象

> ID：13003738
> 
> 赞同：4
> 
> 时间：2012-10-22T00:53:39.957
> 
> 标签：ruby-on-rails, rspec, factory-bot

我正在寻找有关在处理具有许多必需关联对象的对象时如何有效使用 ruby​​ gem 'FactoryGirl' 的建议。

例如，假设我的班级之间有以下关系。

```
class A < ActiveRecord
  has_many B
end

class B < ActiveRecord
  belongs_to A
  has_many C
end

class C < ActiveRecord
  belongs_to B
end 
```

现在，如果我想为我的 C 控制器编写测试用例，我必须创建这个链中的所有对象。现在，这就是我在我的工厂所做的。但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T17:02:53.473

如果你的工厂是这样设置的：

```
FactoryGirl.define do
  factory :library do
    name "Chicago Public Library"
    street_address "123 Morgan St."
  end

  factory :book do
    title "A Great Book"
    author "Mandy Yeats"
    association :library
  end

  factory :page do
    page_number 123
    association :book
  end
end 
```

每当您在测试中创建 :page 的实例时，FactoryGirl 也会创建 :book 和 :library 的实例。您无需先创建图书馆和书籍。如果你创建一个 :book，一个 :library 也会被创建用于测试。您可以像这样在测试中使用这些实例：

```
page.book.library.name       # after using FactoryGirl.create(:page)
page.book.author

book.library.street_address  # after using FactoryGirl.create(:book) 
```

这是我发现的最直接的方法。

# asp.net - 自动生成链接列表

> ID：13003739
> 
> 赞同：2
> 
> 时间：2012-10-22T00:53:43.570
> 
> 标签：asp.net, dynamic, methods, hyperlink

好的，所以我试图在使用`foreach`and 循环生成的页面中创建一个链接列表，只要列表中有对象。这是我用来生成链接的代码：

```
protected void Page_Init(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            if (Session["mamlist"] != null)
            {
                mamlist = (List<mammifere>)Session["mamlist"];

                int i = 0;
                foreach (mammifere l in mamlist)
                {
                    mamol.InnerHtml += ("<li><a onClick='select("+i+");' >" + l.Nom + "</a></li>");
                    i++;
                }
            }
        }
    } 
```

出于某种原因，这些链接无法点击。我明白了：

![链接截图](../Images/b2467da7d815394d7f6bd0d0bc6ed177.png)

如何创建不指向另一个页面但在`C#`页面代码中启动方法的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:14:58.910

您可以[`LinkButton`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.aspx)在 ASPX 代码中创建调用子例程/方法的控件：

示例代码：

```
<%@ Page Language="C#" AutoEventWireup="True" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>LinkButton Example</title>
<script language="C#" runat="server">

      void LinkButton_Click(Object sender, EventArgs e) 
      {
         Label1.Text="You clicked the link button";
      }

   </script>

</head>
<body>

   <form id="form1" runat="server">

      <h3>LinkButton Example</h3>

      <asp:LinkButton id="LinkButton1" 
           Text="Click Me" 
           Font-Names="Verdana" 
           Font-Size="14pt" 
           OnClick="LinkButton_Click" 
           runat="server"/>

      <br />

      <asp:Label id="Label1" runat="server" />

   </form>

</body>
</html> 
```

在您的特定情况下，[`ContentPlaceHolder`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.contentplaceholder.aspx)在您的母版页中添加一个：

```
<asp:contentplaceholder id="ContentPlaceHolder1" runat="server" /> 
```

在您希望链接出现的页面中，您可以添加一个[`Content`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.content.aspx)控件，如下所示：

```
<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">

</asp:Content> 
```

然后`foreach`链接你想要的，这样做：

```
foreach (mammifere l in mamlist)
{
    LinkButton linkButton = new LinkButton();

    linkButton.Text = l.Nom;

    linkButton.OnClick= "LinkButton_Click";

    linkButton.ID = l.Nom;     

    Content1.Controls.Add(linkButton);
} 
```

# windows-7 - 缺少 linux/if.h

> ID：13003743
> 
> 赞同：0
> 
> 时间：2012-10-22T00:54:25.043
> 
> 标签：windows-7, cygwin

您好，我在使用 cygwin 尝试制作时遇到此错误，

这是我的makefile

```
flags=-g

all: icmptx

icmptx: it.o icmptx.o tun_dev.o
    gcc $(flags) -o icmptx icmptx.o it.o tun_dev.o

it.o: it.c
    gcc $(flags) -c it.c

icmptx.o: icmptx.c
    gcc $(flags) -c icmptx.c

tun_dev.o: tun_dev.c
    gcc $(flags) -c tun_dev.c

clean:
    rm -f tun_dev.o it.o icmptx.o icmptx 
```

错误是

```
$ make
gcc -g -c tun_dev.c
tun_dev.c:35:22: fatal error: linux/if.h: No such file or directory
compilation terminated.
Makefile:15: recipe for target `tun_dev.o' failed
make: *** [tun_dev.o] Error 1 
```

这是我的 tun_dev.c 文件

```
/*  

 */

/*
 * tun_dev.c,v 1.1.2.4 2001/09/13 05:02:22 maxk Exp
 */ 

/* #include "config.h" */

#include <unistd.h>
#include <fcntl.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <syslog.h>
#include <errno.h>

#include <sys/ioctl.h>
#include <sys/socket.h>
#include <linux/if.h>

#include "vtun.h"
#include "lib.h"

/* 
 * Allocate TUN device, returns opened fd. 
 * Stores dev name in the first arg(must be large enough).
 */  
int tun_open_old(char *dev)
{
    char tunname[14];
    int i, fd;

    if( *dev ) {
       sprintf(tunname, "/dev/%s", dev);
       return open(tunname, O_RDWR);
    }

    for(i=0; i < 255; i++){
       sprintf(tunname, "/dev/tun%d", i);
       /* Open device */
       if( (fd=open(tunname, O_RDWR)) > 0 ){
          sprintf(dev, "tun%d", i);
          return fd;
       }
    }
    return -1;
}

#include <linux/if_tun.h>

/* pre 2.4.6 compatibility */
#define OTUNSETNOCSUM  (('T'<< 8) | 200) 
#define OTUNSETDEBUG   (('T'<< 8) | 201) 
#define OTUNSETIFF     (('T'<< 8) | 202) 
#define OTUNSETPERSIST (('T'<< 8) | 203) 
#define OTUNSETOWNER   (('T'<< 8) | 204)

int tun_open(char *dev)
{
    struct ifreq ifr;
    int fd;

    if ((fd = open("/dev/net/tun", O_RDWR)) < 0)
       return tun_open_old(dev);

    memset(&ifr, 0, sizeof(ifr));
    ifr.ifr_flags = IFF_TUN | IFF_NO_PI;
    if (*dev)
       strncpy(ifr.ifr_name, dev, IFNAMSIZ);

    if (ioctl(fd, TUNSETIFF, (void *) &ifr) < 0) {
       if (errno == EBADFD) {
      /* Try old ioctl */
      if (ioctl(fd, OTUNSETIFF, (void *) &ifr) < 0) 
         goto failed;
       } else
          goto failed;
    } 

    strcpy(dev, ifr.ifr_name);
    return fd;

failed:
    close(fd);
    return -1;
}

int tun_close(int fd, char *dev)
{
    return close(fd);
}

/* Read/write frames from TUN device */
int tun_write(int fd, char *buf, int len)
{
    return write(fd, buf, len);
}

int tun_read(int fd, char *buf, int len)
{
    return read(fd, buf, len);
} 
```

任何想法，谷歌什么也没显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T00:57:53.043

尝试：

```
#include <net/if.h> 
```

反而。

# matlab - 如何在matlab中编写一个函数，该函数将显示不重复的灰度图像的像素

> ID：13003747
> 
> 赞同：1
> 
> 时间：2012-10-22T00:55:54.127
> 
> 标签：matlab

嗨，我正在尝试实现具有以下步骤的霍夫曼代码：

霍夫曼编解码算法的发展

步骤 1- 将图像读取到 mat lab 的工作区。
Step2-将给定的彩色图像转换为灰度图像。

Step3- 调用一个函数来查找符号（即不重复的像素值）。

Step4-调用一个函数来计算每个符号的概率。

Step5-将符号的概率按降序排列，合并较低的概率，继续此步骤，直到只剩下两个概率，并根据以下规则分配代码：概率最高的符号将具有较短的代码长度。

Step6-执行进一步的霍夫曼编码，即将码字映射到相应的符号将产生压缩数据。

Step7- 重建原始图像，即通过使用霍夫曼解码完成解压缩。

Step8- 生成与编码树等效的树。

Step9- 读取输入字符并留到表 II 中，直到到达表 II 中的最后一个元素。

Step10 - 输出叶子中的字符编码并返回根，并继续步骤9，直到对应符号的所有编码都已知。

我已经实现了第 1 步和第 2 步。在第 3 步中，我能够使用函数 impixelregion 显示图像的像素；但我无法找到如何编写一个函数来显示不重复的像素值......请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:28:24.743

请参阅[imhist](http://www.mathworks.com/help/images/ref/imhist.html)即使用 imhist(I,256)，其中 I 是您的灰度图像。

# go - Number of elements in a channel

> ID：13003749
> 
> 赞同：107
> 
> 时间：2012-10-22T00:56:06.010
> 
> 标签：go

Using a buffered channel, how do measure how many elements are in the channel? For example, I'm creating and sending on a channel like this:

```
send_ch := make(chan []byte, 100)
// code
send_ch <- msg 
```

I want to measure how many **msgs** are in the channel **send_ch**.

I'm aware that due to concurrency the measurement won't be exact, as pre-emption could occur between measurement and action (eg discussed in this video [Google I/O 2012 - Go Concurrency Patterns](http://www.youtube.com/watch?v=f6kdp27TYZs)). I'll be using this for flow control between producers and consumers ie once I've passed through a high watermark, changing some behaviour until I pass back through a low watermark.

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2012-10-22T01:10:00.407

[http://golang.org/pkg/builtin/#len](http://golang.org/pkg/builtin/#len)

> **func len(v Type) int**
> The len built-in function returns the length of v, according to its type:
> 
> *   Array: the number of elements in v.
> *   Pointer to array: the number of elements in *v (even if v is nil).
> *   Slice, or map: the number of elements in v; if v is nil, len(v) is zero.
> *   String: the number of bytes in v.
> *   Channel: the number of elements queued (unread) in the channel buffer; if v is nil, len(v) is zero.

```
package main

import "fmt"

func main() {
        c := make(chan int, 100)
        for i := 0; i < 34; i++ {
                c <- 0
        }
        fmt.Println(len(c))
} 
```

will output:

```
34 
```

# css - Twitter Bootstrap: responsive navbar has gap on the right

> ID：13003751
> 
> 赞同：3
> 
> 时间：2012-10-22T00:56:36.123
> 
> 标签：css, twitter-bootstrap

I'm trying to implement a responsive navbar. It seems to work, but when the screen gets smaller, there appears a gap on the right side. See screen shot:

![enter image description here](../Images/09684f2fd71be7a529defc4f1668a64a.png)

I haven't written any CSS. All of this is pure Bootstrap still.

**Update 1: jsFiddle**

[http://jsfiddle.net/BaR3q/](http://jsfiddle.net/BaR3q/) - It's doing it on JSFiddle, too. So either I did something wrong (likely) or Twitter messed up (unlikely). `what to do?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:12:09.753

There is nothing in the markup that specifies that the elements should expand to fill the viewport. Adding `body { width: 100%}` will take care of it, or optionally overriding the width of the `navbar` to be `auto`.

Twitter Bootstrap is intended to be scaffolding and components rather than an out of the box solution, so this is likely one of those things that needs to be specified. The `static` version of the navbar is likely written so that it can be easily used in containers other than the `body` and this happens to fall in the 20% of situations where it needs a nudge.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T02:11:30.417

A few potential reasons come to mind, but as others have pointed out it's difficult to say without seeing code. I'll add, though, that I understand how tough it can be to share enough of your code for something like this without giving too much away. So here are some questions (and for this specific issue, you shouldn't use `.container-fluid` as previously suggested. that probably won't work anyway, and if it does it's only masking a problem that might compound):

*   did you change any responsive styles? If so, did you change the width, padding, or margins on `.container`?
*   Did you apply a width or margin to the `.navbar` itself somewhere in the responsive styles? This seems a likely cause to me.
*   What about `<body>`, did you set padding on that?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T00:43:54.710

I solved this problem by adding (either) one of the following meta tags:

```
<meta name="viewport" content="initial-scale=1">

<meta name="viewport" content="user-scalable = no"> 
```

# ruby - 在 Ruby 中，如何将 tar 归档流直接提取到文件系统？

> ID：13003760
> 
> 赞同：0
> 
> 时间：2012-10-22T00:58:03.667
> 
> 标签：ruby, archive, tar

我正在使用 Grit (Ruby gem) 加载 git repo，将给定的提交提取到文件夹，然后用它“做点什么”。Grit 支持带有[archive_tar](http://grit.rubyforge.org/classes/Grit/Repo.html#M000239)的 git 存档，它返回一个“包含 tar 存档的字符串”。如果可能的话，我想使用 Ruby libs / gems 将它提取到文件系统（不是直接系统调用），并避免先将数据保存到存档然后提取它（真的在这里寻找一个高效的单线）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T02:38:05.430

假设“包含 tar 存档的字符串”等价于

`File.open("Downloads.tar", "rb") {|a| a.read }`

我可以使用 fileutils、stringio 和 minitar gem 来完成这项工作。首先你需要安装 minitar，它应该很简单

```
gem install minitar 
```

由于 minitar 不支持使用流的常规解包，我们将创建自己的基本解包方法。

```
require 'archive/tar/minitar'
require 'stringio'
require 'fileutils'

def unpack_tar(directory, string)
  FileUtils.mkdir_p(directory) if !File.exist?(directory)
  stringio = StringIO.new(string)
  input = Archive::Tar::Minitar::Input.new(stringio)
  input.each {|entry|
    input.extract_entry(directory, entry)
  }
end

unpack_tar("./test", File.open("Downloads.tar", "rb") {|a| a.read }) 
```

当然用`archive_tar`Grit gem 的功能替换整个 File.open 部分。当然，这一切都是假设第一个假设，尽管我确信这个方法可以很容易地适应任何`archive_tar`实际返回的情况。

# relational-algebra - 关系代数 - 列出不在项目中工作的员工的姓名 1

> ID：13003766
> 
> 赞同：3
> 
> 时间：2012-10-22T00:58:38.467
> 
> 标签：relational-algebra

我有以下表格：

```
Employee
|name|employee_cod|

Project
|name|project_cod|

Work
|employee_cod|project_cod| 
```

那么，如何列出不工作的员工的姓名，例如在 project_cod = 1 的项目中，使用关系代数？

以下不起作用：

```
π(employee.name(σ work.project_cod != 1 (Employee ∞ Work ∞ Project) 
```

因为如果我在工作表中有以下数据：

```
| employee_cod | project_cod |
-------1--------------1-------
-------1--------------2-------
-------1--------------3-------
-------2--------------2------- 
```

这`σ work.project_cod != 1`将导致：

```
| employee_cod | project_cod |
-------1--------------2-------
-------1--------------3-------
-------2--------------2------- 
```

但是code = 1的员工不应该被退回，因为它参与了项目1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T17:21:33.430

**您首先找到从事**该项目的所有员工。那些不是由关系差异（减）运算符产生的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T05:01:26.337

谢谢你的提示 Tegiri。
解决方案是：

```
π name (Employee) - ( π name (σ project_cod = 1 (Employee ∞ Work))) 
```

# jsf-2 - 如何使用 JSF2 和 Servlet 3 跟踪登录用户

> ID：13003768
> 
> 赞同：0
> 
> 时间：2012-10-22T00:58:39.513
> 
> 标签：jsf-2, servlet-3.0

我有一个使用表单身份验证的 JSF 登录页面。我通过调用 HttpServletRequest.login(username, password) 登录用户。注销是通过首先调用 ExternalContext.invalidateSession() 然后为当前用户调用 HttpServletRequest.logout() 来完成的。

我的计划是通过在用户登录时添加到列表中并在用户注销时从列表中删除来跟踪应用程序范围列表中的登录用户。

我对这种方法有两个担忧：

1.  如果已经登录的用户在没有先注销的情况下尝试再次登录，我想使现有会话无效并进行一些清理。如何访问给定登录用户的会话？我还可以使用此功能强制注销某些用户。

2.  如果会话过期（例如超时），我想从登录用户列表中删除用户。如何监听会话到期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T02:26:31.727

1.  自己维护一个`Map<User, HttpSession> logins`应用范围。在登录过程中，检查是否`logins.put(user, session)`没有返回`null`，然后将其无效。

2.  让`User`实施`HttpSessionBindingListener`并`valueUnbound()`相应地实施，以便它执行`logins.remove(this)`. 或者，如果您无法控制`User`，则`HttpSessionListener#sessionDestroyed()`改为实施以执行删除。

* * *

**与具体问题无关**`HttpServletRequest#logout()`，如果您已经使会话无效，则无需调用。无论如何，用户都与会话相关联。

# join - 将具有重叠列名的 Pandas 加入多个数据框？

> ID：13003769
> 
> 赞同：12
> 
> 时间：2012-10-22T00:59:03.013
> 
> 标签：join, merge, pandas

我有多个（超过 2 个）要合并的数据框。它们都共享相同的值列：

```
In [431]: [x.head() for x in data]
Out[431]: 
[                     AvgStatisticData
DateTime                             
2012-10-14 14:00:00         39.335996
2012-10-14 15:00:00         40.210110
2012-10-14 16:00:00         48.282816
2012-10-14 17:00:00         40.593039
2012-10-14 18:00:00         40.952014,
                      AvgStatisticData
DateTime                             
2012-10-14 14:00:00         47.854712
2012-10-14 15:00:00         55.041512
2012-10-14 16:00:00         55.488026
2012-10-14 17:00:00         51.688483
2012-10-14 18:00:00         57.916672,
                      AvgStatisticData
DateTime                             
2012-10-14 14:00:00         54.171233
2012-10-14 15:00:00         48.718387
2012-10-14 16:00:00         59.978616
2012-10-14 17:00:00         50.984514
2012-10-14 18:00:00         54.924745,
                      AvgStatisticData
DateTime                             
2012-10-14 14:00:00         65.813114
2012-10-14 15:00:00         71.397868
2012-10-14 16:00:00         76.213973
2012-10-14 17:00:00         72.729002
2012-10-14 18:00:00         73.196415,
....etc 
```

我读到 join 可以处理多个数据帧，但是我得到：

```
In [432]: data[0].join(data[1:])
...
Exception: Indexes have overlapping values: ['AvgStatisticData'] 
```

我尝试过`rsuffix=["%i" % (i) for i in range(len(data))]`加入但仍然遇到同样的错误。我可以通过`data`以列名不重叠的方式构建列表来解决此问题，但也许有更好的方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-22T09:54:30.100

```
In [65]: pd.concat(data, axis=1)
Out[65]:
                     AvgStatisticData  AvgStatisticData  AvgStatisticData  AvgStatisticData
2012-10-14 14:00:00         39.335996         47.854712         54.171233         65.813114
2012-10-14 15:00:00         40.210110         55.041512         48.718387         71.397868
2012-10-14 16:00:00         48.282816         55.488026         59.978616         76.213973
2012-10-14 17:00:00         40.593039         51.688483         50.984514         72.729002
2012-10-14 18:00:00         40.952014         57.916672         54.924745         73.196415 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T01:54:35.647

我会尝试`pandas.merge`使用该`suffixes=`选项。

```
import pandas as pd
import datetime as dt

df_1 = pd.DataFrame({'x' : [dt.datetime(2012,10,21) + dt.timedelta(n) for n in range(10)], 'y' : range(10)})
df_2 = pd.DataFrame({'x' : [dt.datetime(2012,10,21) + dt.timedelta(n) for n in range(10)], 'y' : range(10)})
df = pd.merge(df_1, df_2, on='x', suffixes=['_1', '_2']) 
```

我有兴趣看看专家是否有更算法的方法来合并数据框列表。

# mysql - 使用嵌套的 MySQL 查询从一个表中打印所有行

> ID：13003772
> 
> 赞同：0
> 
> 时间：2012-10-22T00:59:23.140
> 
> 标签：mysql, left-join

我有一个 MySQL 查询，我想通过要求在结果中打印出 client.client_name 的所有值来增强它，即使该表中的每一行都没有找到值。当前表格显示：

```
client.client_name
Client A
Client B
Client C 
```

当前的 MySQL 查询如下：

```
 SELECT X.expr1 AS 'Project Name', SUM(X.expr2) AS 'Total Hours Logged', X.expr3 - sum(X.expr2) AS 'Monthly Hours Remaining', X.expr4 AS 'Last Day', DATEDIFF(X.expr4 , curdate()) AS 'Days Remaining'
FROM 
(SELECT 
    client.client_name AS expr1
    , sum(time_records.value) AS expr2
    , client.monthly_hours AS expr3
FROM project_objects
  INNER JOIN projects
    ON projects.id = project_objects.project_id
  INNER JOIN time_records
    ON time_records.parent_id = project_objects.id
  LEFT JOIN client  
  ON project_objects.project_id = client.project_id 
  WHERE time_records.parent_type = 'Task' 
  AND client.start_day_of_month < dayofmonth(curdate())
  AND time_records.state = 3
  GROUP BY client.client_name

  UNION

  SELECT 
    client.client_name AS expr1
    , sum(time_records.value) as expr2
    , client.monthly_hours AS expr3
  FROM projects
  INNER JOIN time_records
    ON projects.id = time_records.parent_id
  LEFT JOIN client  
   ON projects.id = client.project_id 
  WHERE time_records.parent_type = 'Project'
  AND client.start_day_of_month < dayofmonth(curdate())
  AND time_records.state = 3
  GROUP BY client.client_name
) X
GROUP BY X.expr1
ORDER BY DATEDIFF(X.expr4 , curdate() 
```

正如您从上面的查询中看到的那样——我为客户端表添加了一个左连接，但是它不会导致打印出所有客户端记录——它只打印那些有 time_records 可用的记录。我认为这与嵌套或我编写连接的顺序有关，但似乎无法弄清楚。如果您有任何想法，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:33:01.327

请尝试如下顺序：

```
FROM client LEFT JOIN project_objects 
    ON project_objects.project_id = client.project_id 
```

在此处查看最终解决方案的 SQLFiddle：[http ://sqlfiddle.com/#!2/30362/16](http://sqlfiddle.com/#!2/30362/16)

# javascript - JavaScript for 循环阻止继续，直到上传完成

> ID：13003774
> 
> 赞同：0
> 
> 时间：2012-10-22T00:59:45.743
> 
> 标签：javascript, jquery, for-loop, jquery-forms-plugin

要上传多个文件，我使用 JavaScript 循环文件。要上传文件，我使用 jQuery 表单插件[http://archive.plugins.jquery.com/project/form](http://archive.plugins.jquery.com/project/form)

现在，当循环运行时，它会立即运行到循环结束，并一次性上传所有文件。

有没有办法让循环在每次上传期间推迟？

这是我使用的循环示例（实际代码很大）

```
for(i=0;i<=num;i++)
{
    if(go1){
        <?php //if 1 upload only, hide add and upload button ?>
        $('#ad,#ok').hide();
        var z=i;
        $('#up'+i).ajaxSubmit({
            dataType:"json",
            beforeSubmit:function(before){
                $('#loadingsignup').show;
                $("#resultsignup").empty().hide();
            },
            success:function(retour){
                res=retour;
                if(num<1){  <?php // only one upload, redirect if uploaded correct, reintroduce upload button if error ?>
                    if(res.ok=="ok"){
                        window.location.replace('<?php echo $config['baseurl']; ?>/player/'+res.aid);
                    }else{
                        $('#rs'+z).append('<div class="pasgood">'+res.err+'</div>').show();
                        $('#ad,#ok').show();
                    }
                }
            }
        }); 

    }
} 
```

我真的需要循环一次通过上传一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:17:05.017

不，循环是同步的，而上传是异步的。如果您希望上传一个接一个地发生，您将需要从第一个的成功回调中触发第二个等。

```
function upload(i, suc, err) {
    if (i > num)
        return suc();
    $('#up'+i).ajaxSubmit({
        dataType:"json",
        beforeSubmit:function(before){
            $('#loadingsignup').show();
            $("#resultsignup").empty().hide();
        },
        success:function(res){
            if(res.ok=="ok"){
                $('#ad,#ok').show();
                upload(i+1, suc, err); // next one
            } else {
                $('#rs'+i).append('<div class="pasgood">'+res.err+'</div>').show();
                err(res.err); // or continue with the rest?
            }
        },
        error: err
    });
}
upload(0, function allDone(){
    window.location.replace('<?php echo $config['baseurl']; ?>/player/');
}, function somethingWrong(){ … }); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T01:04:21.483

用作参数`async: false`。`$.ajax()`这将避免一次发送文件，`$.ajax`将等到请求执行完成，然后循环将继续到下一个项目。

DOCS：默认情况下，所有请求都是异步发送的（即默认设置为true）。如果您需要同步请求，请将此选项设置为 false。跨域请求和 dataType: "jsonp" 请求不支持同步操作。请注意，同步请求可能会暂时锁定浏览器，从而在请求处于活动状态时禁用任何操作。从 jQuery 1.8 开始，不推荐在 jqXHR ($.Deferred) 中使用 async: false ；您必须使用完成/成功/错误回调。

但无论如何，您需要同步执行。

# silverlight - Silverlight 下载项目文件

> ID：13003777
> 
> 赞同：0
> 
> 时间：2012-10-22T01:00:23.840
> 
> 标签：silverlight, silverlight-4.0, silverlight-3.0

我有一系列文件（word、pdf 等）存储在我的应用程序中，其想法是允许最终用户根据自己的选择下载这些文件。这是如何在 Silverlight 中完成的？我尝试使用 SaveFileDialog 但我一定没有正确执行。谢谢！

# android - 数据库在真正的 android 设备上重置所有内容

> ID：13003787
> 
> 赞同：0
> 
> 时间：2012-10-22T01:02:20.680
> 
> 标签：android, android-sqlite

我试图弄清楚我的代码有什么问题，我在网上复制了完全相同的代码并小心地将其替换为我自己的变量，它仍然无法正常工作，我挠头..今天早上我开始意识到我的错误！因为数据库存在于我真正的android设备中，所以我不能简单地修改表的列和值！实际上我的代码没有错！

但我也不想卸载并重新启动我的应用程序，这让我很生气，有什么解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:15:22.870

在您的设备上转到设置 > 应用程序 > 您的应用程序... 单击清除数据。这将删除您的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:22:33.097

1.  转到设置 -> 应用程序 -> 管理应用程序。
2.  查找您的应用程序并单击它
3.  点击清除数据。

# ios - clang：错误：链接器命令在设置 cocoapods 环境时失败，退出代码为 1（使用 -v 查看调用）

> ID：13003792
> 
> 赞同：1
> 
> 时间：2012-10-22T01:03:48.193
> 
> 标签：ios, xcode, cocoapods

我正在为 iOS 项目设置 cocoapods 依赖项管理工具，在构建我的项目时出现此错误：

```
ld: library not found for -lPods
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我正在使用`Xcode 4.5`和`Mac OS X Lion 10.7.4`。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:42:33.483

还不能发表评论，所以发布作为答案。

了解更多关于您在 XCode 中设置 cocoapods、库设置以及这是您是否是第一次使用 cocoapods 或者问题是否突然开始的信息会有所帮助。试着让我们对你目前的情况有一个很好的了解。

暂时，谷歌搜索一下弹出了这个网址：[https ://github.com/CocoaPods/CocoaPods/issues/155](https://github.com/CocoaPods/CocoaPods/issues/155)

您可能会发现它很有帮助，特别是底部附近的帖子：

> 在我的环境中，问题是 Pods 项目没有名为 ADHOC 的目标（根据主项目）。我复制了 Pods 发布目标，称为 ADHOC，将操作系统部署目标更改为我的要求（5.0），然后一切正常。

# c# - monotouch 的 sqlite 驱动程序在哪里？

> ID：13003796
> 
> 赞同：0
> 
> 时间：2012-10-22T01:04:30.677
> 
> 标签：c#, ios, sqlite, xamarin.ios, sqlite-net

在 sqlite-net [github 页面上](https://github.com/praeclarum/sqlite-net)，表示除了这个库之外，我还需要编译好的 sqlite2 二进制文件：

> [除了sqlite2 库的编译形式](http://www.sqlite.org/download.html)之外的 0 依赖项。

我检查了该页面，但无法确定应该使用哪些二进制文件才能通过 MonoTouch 在 IOS 上使用它；说明清楚地表明，这个特定的用例实际上是这个项目的起源，所以必须支持这一点。

有谁知道我应该在 IOS 上使用哪些二进制文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T10:57:35.480

对于 iOS 上的 sqlite-net，你不需要任何东西。它使用 p/invoke 调用并且 iOS 支持 SQLite，因此它可以开箱即用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T06:33:00.610

`Sqlite`- 嗯，`Sqlite3`- 是 MonoTouch 的一部分。在您的项目中，您需要参考`Mono.Data.Sqlite`. 在 MonoDevelop 的项目中右键单击“References”，然后选择“Edit References”。

![参考](../Images/4112f0abb5ff4dc5883369a7ced2c38e.png)

# c# - 获取实体框架连接字符串

> ID：13003797
> 
> 赞同：47
> 
> 时间：2012-10-22T01:05:50.353
> 
> 标签：c#, entity-framework

我们使用 Entity Framework 5，但还需要使用来自应用程序的普通数据库连接来执行我们需要执行的一些自定义 SQL。

因此，我正在创建一个处理此连接的 DatabaseAccess 类。有没有办法通过检查实体框架连接字符串来填充连接字符串？

所以：

```
SqlConnection cnn;
connetionString = "Data Source=ServerName;Initial Catalog=DatabaseName;User ID=UserName;Password=Password" 
```

我可以通过检查实体框架来构建它吗？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-10-22T01:53:39.990

您可以使用以下命令获取 EF 使用的连接字符串：

```
MyDbContext.Database.Connection.ConnectionString 
```

或者正如标记所说，您可以使用 sqlconnection 初始化上下文

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2016-04-13T14:45:23.450

以下是在 EF 5、EF 6 和 EF Core 1/EF 7 中获取连接字符串的方法。

```
//Entity Framework 5
myContext.Database.Connection.ConnectionString
//Entity Framework 6
myContext.Database.Connection.ConnectionString
//Entity Framework Core 1
myContext.Database.GetDbConnection().ConnectionString 
```

有关更多详细信息，请参阅 - [http://nodogmablog.bryanhogan.net/2016/04/entity-framework-checking-the-connection-string-of-your-context/](http://nodogmablog.bryanhogan.net/2016/04/entity-framework-checking-the-connection-string-of-your-context/)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-02-25T16:44:32.050

是的你可以。

请参阅[此处](https://stackoverflow.com/questions/12946099/keyword-not-supported-metadata-with-sql-connection-in-entityt-framework-wit?answertab=votes#tab-top)了解 3 个选项。

1 - 为每个使用单独的连接字符串

2 - 从你的实体对象中提取它（这是我认为你想要的）

3 - 使用实体对象执行您的自定义 SQL

这里是如何做nr 2：

```
using System.Data.EntityClient;
using System.Data.SqlClient;
...
private string GetADOConnectionString()
{
    SalesSyncEntities ctx = new SalesSyncEntities(); //create your entity object here
    EntityConnection ec = (EntityConnection)ctx.Connection;
    SqlConnection sc = (SqlConnection)ec.StoreConnection; //get the SQLConnection that your entity object would use
    string adoConnStr = sc.ConnectionString;
    return adoConnStr;
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-02-18T14:13:42.107

即使在 EF3 中，您也可以使用 EntityConnectionStringBuilder。

```
EntityConnectionStringBuilder conn = 
    new EntityConnectionStringBuilder(DBEntities.dbConnection);
SqlConnection s = new SqlConnection(conn.ProviderConnectionString); 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-10-22T01:23:38.717

您的意思是，您可以在 EF DbContext 中使用 SqlConnection 吗？

DbContext 类有一个[构造函数](http://msdn.microsoft.com/en-us/library/gg696604%28v=vs.103%29.aspx)，您可以在其中传入一个 SqlConnection，然后告诉 EF 它是否拥有它。

```
var YourContext = new YourContext(SqlConnection, true); 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2019-09-24T06:02:56.707

//实体框架5

```
myContext.Database.Connection.ConnectionString 
```

//实体框架6

```
myContext.Database.Connection.ConnectionString 
```

//实体框架核心1

```
myContext.Database.GetDbConnection().ConnectionString 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-10-10T16:47:35.233

我也有这个问题，要解决这个问题，你可以这样做：

```
 SqlConnection con = context.Database.Connection as SqlConnection;
        SqlCommand command = new SqlCommand(sql, con);
        con.Open();

        SqlDataReader reader = command.ExecuteReader();
        while (reader.HasRows)
        {
            while (reader.Read())
            {
                //read your fields
            }

            reader.NextResult();
        }

        con.Close(); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-02-22T12:24:08.107

希望能帮助到你..

```
 private readonly ApplicationDbContext _applicationDbContext;
    string connectionString = string.Empty;

    public CommonService(ApplicationDbContext applicationDbContext)
    {
        _applicationDbContext = applicationDbContext;
        connectionString = _applicationDbContext.Database.GetDbConnection().ConnectionString;
    } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-05-29T20:43:44.920

这是获取连接字符串的通用方法：

```
 public string GetConnString<T>(T ent)
            where T : ObjectContext
        {
            EntityConnection ec = (EntityConnection)ent.Connection;
            SqlConnection sc = (SqlConnection)ec.StoreConnection;
            return sc.ConnectionString;
        } 
```

然后使用它是：

```
 MyEntities ent = new MyEntities();
 String ConnString = GetConnString(ent); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-10-03T07:12:00.177

在我的情况下，我只需要执行一个更新语句，所以我使用了以下构造

```
_db.Database.ExecuteSqlCommand($"update ChiusureTurni set esportato = 1 where idChiusuraTurni = {idChiusura}"); 
```

where _db is my db context in this case I took advatage of transaction management

# php - 需要帮助 sql "LIKE" 运算符

> ID：13003798
> 
> 赞同：-1
> 
> 时间：2012-10-22T01:05:51.063
> 
> 标签：php, mysql

我网站上的用户可以添加他们的朋友。我尝试这样做的方式是当他们添加一个新朋友时它会更新“朋友”列，所以..如果用户“bobby”已经有朋友叫 tom 和 Joe，并且他们想添加另一个朋友“bob”它会更新该列，使其现在看起来像“汤姆、乔、鲍勃等..”所以..我的问题是这些朋友中的每一个在一个名为`items`他们的信息年龄、城市等的表中都有数据。当鲍比点击按钮“显示（）”我需要它来检索“鲍比”朋友列中的每个朋友及其信息。所以这就是我所在的地方。

```
$show = mysql_query("SELECT `friends` FROM `Friends` WHERE`Username`='".$_SESSION['Username']."' ") or die(mysql_error());
$showw = mysql_fetch_object($show) or die(mysql_error());
$yup = mysql_query("SELECT * FROM `items` WHERE Username LIKE '%".($showw->friends)."%' ") or die(mysql_error()); 
```

它不会返回任何数据，因为我想不出一种方法来对名称进行排序。我可以告诉它在每个逗号后获取每个名称吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:32:11.153

首先，您**应该**有一个单独的表来将朋友映射到特定用户。如果你按照现在的方式继续下去，你将面临很多麻烦。

无论如何，即使不建议这样做，在您的情况下，

```
$show = mysql_query("SELECT `friends` FROM `Friends` WHERE`Username`='".$_SESSION['Username']."' ") or die(mysql_error());
$showw = mysql_fetch_object($show) or die(mysql_error());

$friends = "'" . str_replace(", ", "', '", $showw->friends) . "'";
$yup = mysql_query("SELECT * FROM `items` WHERE Username IN (". $friends .") ") or die(mysql_error()); 
```

`IN`将过滤匹配所有逗号分隔的值。

PS：请考虑使用 PDO 或任何其他数据库库，因为`mysql_*`函数在下一个版本中将被弃用 :)

# jquery - 图像滑块不适用于 ajax 内容加载器

> ID：13003799
> 
> 赞同：0
> 
> 时间：2012-10-22T01:05:51.773
> 
> 标签：jquery, ajax

当与我的 ajax 内容加载器结合使用时，我的图像滑块不起作用，但单独的滑块确实起作用。当我在我的网站上尝试时，图像滑块仅在我刷新页面时才有效。任何想法为什么这些不一起工作？

```
$(document).ready(function() {

//menu loader
$('.n3').click(function() {
  $('#secNav').toggle();
  return false;
});
$('.n1 a, .n2 a, .n4 a').click(function() {
  $('#secNav').hide();
});

//content loader in portfolio div      
var hash = window.location.hash.substr(1);
var href = $('.n1 a, .n2 a, .n4 a, #secNav a').each(function(){
    var href = $(this).attr('href');
    if(hash==href.substr(0,href.length-5)){
        var toLoad = hash+'.html #portfolio';
        $('#portfolio').load(toLoad)
    }                                           
});

$('.n1 a, .n2 a, .n4 a, #secNav a').click(function(){

var toLoad = $(this).attr('href')+' #portfolio';
$('#portfolio').fadeOut("fast",loadContent);
window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5);
function loadContent() {
    $('#portfolio').load(toLoad,'',showNewContent())
}
function showNewContent() {
    $('#portfolio').fadeIn("1000");
}
return false;
});

//active link diff color

    $("#nav a").click( function() { 
              $("#nav a").css("color", "#000");
              $(this).css("color", "#85f1f5");
            });

$("#secNav a").click( function() { 
              $("#secNav a").css("color", "#000");
              $(this).css("color", "#ff2712");
            });

$("#nav a").click( function() { 
              $("#secNav a").css("color", "#000");
            });

//end of doc ready
});

//image slider

$(window).load(function(){

// We are listening to the window.load event, so we can be sure
// that the images in the slideshow are loaded properly.

// Testing whether the current browser supports the canvas element:
var supportCanvas = 'getContext' in document.createElement('canvas');

// The canvas manipulations of the images are CPU intensive,
// this is why we are using setTimeout to make them asynchronous
// and improve the responsiveness of the page.

var slides = $('#slideshow li'),
    current = 0,
    slideshow = {width:0,height:0};

setTimeout(function(){

    window.console && window.console.time && console.time('Generated In');

    if(supportCanvas){
        $('#slideshow img').each(function(){

            if(!slideshow.width){
                // Taking the dimensions of the first image:
                slideshow.width = this.width;
                slideshow.height = this.height;
            }

            // Rendering the modified versions of the images:
            createCanvasOverlay(this);
        });
    }

    window.console && window.console.timeEnd && console.timeEnd('Generated In');

    $('#slideshow .arrow').click(function(){
        var li          = slides.eq(current),
            canvas      = li.find('canvas'),
            nextIndex   = 0;

        // Depending on whether this is the next or previous
        // arrow, calculate the index of the next slide accordingly.

        if($(this).hasClass('next')){
            nextIndex = current >= slides.length-1 ? 0 : current+1;
        }
        else {
            nextIndex = current <= 0 ? slides.length-1 : current-1;
        }

        var next = slides.eq(nextIndex);

        if(supportCanvas){

            // This browser supports canvas, fade it into view:

            canvas.fadeIn(function(){

                // Show the next slide below the current one:
                next.show();
                current = nextIndex;

                // Fade the current slide out of view:
                li.fadeOut(function(){
                    li.removeClass('slideActive');
                    canvas.hide();
                    next.addClass('slideActive');
                });
            });
        }
        else {

            // This browser does not support canvas.
            // Use the plain version of the slideshow.
            current=nextIndex;
            next.addClass('slideActive').show();
            li.removeClass('slideActive').hide();
        }
    });

},100);

// This function takes an image and renders
// a version of it similar to the Overlay blending
// mode in Photoshop. 
// **NOTE: REMOVED COLOR CHANGES

function createCanvasOverlay(image){

    var canvas          = document.createElement('canvas'),
        canvasContext   = canvas.getContext("2d");

    // Make it the same size as the image
    canvas.width = slideshow.width;
    canvas.height = slideshow.height;

    // Drawing the default version of the image on the canvas:
    canvasContext.drawImage(image,0,0);

    // Taking the image data and storing it in the imageData array:
    var imageData   = canvasContext.getImageData(0,0,canvas.width,canvas.height),
        data        = imageData.data;

    // Putting the modified imageData back to the canvas.
    canvasContext.putImageData(imageData,0,0);

    // Inserting the canvas in the DOM, before the image:
    image.parentNode.insertBefore(canvas,image);
}

//end of window load    
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:28:36.693

如果您用 ajax 将一个滑块元素替换为一个新元素，则必须重新初始化滑块代码才能在新的 html 上工作

伪代码示例

```
$('#sliderWrapper').load(  url, function(){

   /* new html exists, run all pertinent slider code*/
}) 
```

如果您删除了所有不相关的代码（如导航代码等）以理清与您的特定问题相关的内容，这将有很大帮助。目前还不清楚哪些部分与滑块相关

还要确保您没有再次加载 jQuery 并清除原始 jQuery 对象

# c++ - 我将如何实施这样的锦标赛？C++

> ID：13003803
> 
> 赞同：0
> 
> 时间：2012-10-22T01:07:10.283
> 
> 标签：c++

我有一个 16 的数组（下面的示例）。比赛的每场比赛都包括展示两家餐厅，提示选择他最喜欢的一家，并从比赛中移除输掉的餐厅。它就像一个支架系统；即，在所有其他餐厅也出现在该轮比赛中之前，餐厅不会再次出现在另一场比赛中）。所以从 8 场比赛开始，然后是 4 场，然后是 2 场。除非餐厅数量等于 16，否则不要让比赛开始。我对 C++ 还是很陌生。有人有我应该看的不错的大纲或建议/路径吗？

```
string restaurants[] = {"Texas Roadhouse,","On The Border,","Olive Garden,","Panda Express,","Cracker Barrel,","IHOP,","Panda Express,","Pei Wei"}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:42:46.400

我只是要编写代码的要点，请进一步探索您希望如何实现它。

```
 //assume arr is the array of 16 and length =16 initially
  while(length >0)
    {
    for(i=0;i<length; i=i+2)
     {
      int first= rand % (16-i);

      int second=rand % (16-i);
        while(first==second)
         second=rand%16;

      int chosen=choose_restaurant(arr,first,second,length);
      //return either first or second, depending on what is chosen

      if(chosen ==first)
        remove_restaurant(arr,second,length);
      else
        remove_restaurant(arr,first,length);

     }
   length=length/2;
  }

//the remove_restaurant function must move the removed restaurant from the array
//And move the selected restaurant to the end 
```

# objective-c - xcode 崩溃后，某些按钮的标题为空或被部分截断

> ID：13003804
> 
> 赞同：3
> 
> 时间：2012-10-22T01:07:17.193
> 
> 标签：objective-c, ios, xcode

这似乎是[XCode 4 的部分转发：一些按钮标题在 iOS 模拟中不可见，](https://stackoverflow.com/questions/12759798/xcode-4-some-button-titles-not-visible-in-ios-simulation)但他们的问题没有得到回答。

请温柔一点，我对此很陌生。

我已经按照 stamford 讲座系列实现了一个基于堆栈的计算器程序，但我的一些按钮在模拟器中显示为空或半截断。每次我运行 sim 时，相同的按钮都会执行此操作，但如果我在其周围移动任何按钮，则会更改受影响的按钮。通常是最底层的。

这里的第一个示例：http: [//i.imgur.com/YpC1f.png](https://i.imgur.com/YpC1f.png) - 看看底部的按钮如何显示不正确？如果我让这些按钮中的任何一个更高，它将显示没有标题，但所有其他四个按钮都会正确显示。

我认为它可能太靠近底部，或者那些按钮坏了，或类似的。所以我删除了整个底行，缩小了所有内容，然后重新创建了这些按钮，现在我得到了四个带有空白标题和两个被截断的按钮：http: [//i.imgur.com/kM1Rb.png](https://i.imgur.com/kM1Rb.png)

请注意，按钮仍然按预期工作，只是显示不正确。

难道我做错了什么？任何建议表示赞赏。

编辑：来自控制器的完整代码：

```
#import "CalculatorViewController.h"
#import "CalculatorBrain.h"

@interface CalculatorViewController()
@property (nonatomic) BOOL userIsInTheMiddleOfEnteringANumber;
@property (nonatomic, strong) CalculatorBrain *brain;
- (void)updateStackDisplay:(NSString *)value;
@end

@implementation CalculatorViewController

@synthesize display = _display;
@synthesize stackDisplay = _stackDisplay;
@synthesize userIsInTheMiddleOfEnteringANumber = _userIsInTheMiddleOfEnteringANumber;
@synthesize brain = _brain;

- (CalculatorBrain *)brain {
    if (!_brain) _brain = [[CalculatorBrain alloc] init];
    return _brain;
}

- (void)updateStackDisplay:(NSString *)value {
    // if there's nothing sent so far, just initialise it
    if (self.stackDisplay.text.length == 0) {
        self.stackDisplay.text = value;
        return;
    }
    // This part is a little confusing. Extra assignment asked for = to be added to the end of the stack label if an operation was pressed.
    // Here I check for = at the end of the label and remove it so it's only displayed once. If "=" is being passed (done by the operation itself), it will be added back on right at the end of this function.
    if ([self.stackDisplay.text rangeOfString:@"="].location == (self.stackDisplay.text.length - 1)) {
        // .location starts at zero, .length doesn't.
        self.stackDisplay.text = [self.stackDisplay.text substringToIndex:[self.stackDisplay.text length]-1];
    }       
    // If we add a space after remove the = we'll end up with double space. Hence the else if, not if.
    else if (!self.userIsInTheMiddleOfEnteringANumber) {
        self.stackDisplay.text = [self.stackDisplay.text stringByAppendingString:@" "];
    }
    self.stackDisplay.text = [self.stackDisplay.text stringByAppendingString:value];
}

- (IBAction)digitPressed:(UIButton *)sender {
    NSString *digit = sender.currentTitle;
    if ([digit isEqualToString:@"."]) {
        if ([self.display.text rangeOfString:@"."].location != NSNotFound) {
            return;
        }
        else {
            if (!self.userIsInTheMiddleOfEnteringANumber) digit = @"0.";
        }
    }
    [self updateStackDisplay:digit];
    if (self.userIsInTheMiddleOfEnteringANumber) {
        self.display.text = [self.display.text stringByAppendingString:digit];
    }
    else {  
        self.display.text = digit;
        self.userIsInTheMiddleOfEnteringANumber = YES;
    }
}

- (IBAction)operationPressed:(UIButton *)sender {
    if (self.userIsInTheMiddleOfEnteringANumber) [self enterPressed];
    [self updateStackDisplay:sender.currentTitle];
    [self updateStackDisplay:@"="];
    double result = [self.brain performOperation:sender.currentTitle];
    NSString *resultString = [NSString stringWithFormat:@"%g", result];
    self.display.text = resultString;
}

- (IBAction)enterPressed {
    if (self.userIsInTheMiddleOfEnteringANumber) {
        self.userIsInTheMiddleOfEnteringANumber = NO;
    }
    [self.brain pushOperand:[self.display.text doubleValue]];
}

- (IBAction)clearPressed {
    self.stackDisplay.text = @"";
    [self.brain clearStack];
    self.userIsInTheMiddleOfEnteringANumber = NO;
    self.display.text = @"0";
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T18:13:25.087

我得到了一个可能类似的错误，其中一些 UIButtons 有空文本，尽管通过输出 titleLabel.text 得到了正确的文本值。我删除了按钮并将它们添加到与故事板中之前相同的内容。然后它起作用了。

# mysql - 如何将 CSV 列表加入表格列

> ID：13003805
> 
> 赞同：0
> 
> 时间：2012-10-22T01:07:23.400
> 
> 标签：mysql, sql, join

我有一张这样的桌子：

```
CREATE TABLE `my_table` (
    `id` INT(10) AUTO_INCREMENT,
    `code` VARCHAR(50),
    `new_table_id` INT(10)
    PRIMARY KEY (`id`)
) 
```

我有一个 CSV 代码值列表，如下所示：

```
'23000005619',
'23000019479',
'23000019759',
'23000030169',
'23000032629' 
```

我想加入这个列表`my_table`。`code`列，以便我可以找到`my_table`. `new_table_id`所以我可以把它加入到另一张桌子上。

我最初的想法是这样的（但显然在语法上不正确）：

```
SELECT *
FROM my_table mt,
(
  SELECT
    '23000005619',
    '23000019479',
    '23000019759',
    '23000030169',
    '23000032629'
) as ml
WHERE mt.`code` = m1.xx 
```

任何帮助将不胜感激。谢谢

**更新**

我想尽可能避免使用临时表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:45:23.913

我想我让自己的生活变得更加艰难——这就是我所需要的：

```
SELECT mt.code, mt.new_table_id
FROM my_table mt
WHERE mt.code IN
(
  '23000005619',
  '23000019479',
  '23000019759',
  '23000030169',
  '23000032629'
) 
```

我可能会说我想要一个加入而实际上不需要加入而让人们失望。

# c# - Activator.CreateInstance 导致 nunit 锁定，从而阻止了 Visual Studio 的构建

> ID：13003806
> 
> 赞同：2
> 
> 时间：2012-10-22T01:07:24.527
> 
> 标签：c#, visual-studio-2010, activator

在我运行运行可疑代码的测试之后；在 Nunit（或更具体地说是 nunit-agent.exe）结束之前，我无法在 Visual Studio 中重建程序集。

错误是：

```
Could not copy "C:\path\MyTests\MyTests.dll" to "bin\Debug\MyTests.dll". 
    Exceeded retry count of 10.
Unable to copy file "C:\path\MyTests\Debug\MyTests.dll" 
    to "bin\Debug\MyTests.dll". The process cannot access the file 
    'bin\Debug\MyTests.dll' because it is being used by another process. 
```

当前的解决方法是关闭 nunit，重建然后重新打开 nunit（然后进行测试）。*痛苦*

**红鲱鱼认为这是卷影复制问题或 nunit 项目中的项目基本路径设置。不是这些。就是这个代码。**

```
AppDomain dom = AppDomain.CreateDomain("some");
string fullPath = Assembly.GetExecutingAssembly().CodeBase
                  .Replace("file:///", "").Replace("/", "\\");
AssemblyName assemblyName = new AssemblyName();
assemblyName.CodeBase = fullPath;
Assembly assembly = dom.Load(assemblyName);
Type type = assembly.GetType("ClassName");

IMyInterface obj = Activator.CreateInstance(type) as IMyInterface;

obj.ActionMessage(param1, param2); 
```

我认为这是一个处置问题，所以我实现了 IDisposable 并将所需的代码添加到类“ClassName”中。不工作。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:08:22.553

解决方案是执行

```
AppDomain.Unload(dom); 
```

完整方法：

```
public static object InstObject(Assembly ass, string className)
{
    AppDomain dom = null;
    try
    {
        Evidence evidence = new Evidence(AppDomain.CurrentDomain.Evidence);

        string fullPath = ass.CodeBase.Replace("file:///", "").Replace("/", "\\");
        AssemblyName assemblyName = new AssemblyName();
        assemblyName.CodeBase = fullPath;
        dom = AppDomain.CreateDomain("TestDomain", evidence, 
                 AppDomain.CurrentDomain.BaseDirectory, 
                 System.IO.Path.GetFullPath(fullPath), true);

        Assembly assembly = dom.Load(assemblyName);
        Type type = assembly.GetType(className);

        object obj = Activator.CreateInstance(type);

        return obj;
    }
    finally
    {
        if (dom != null) AppDomain.Unload(dom);
    }
} 
```

# cloudinary - 将大图像批量上传到 cloudinary

> ID：13003807
> 
> 赞同：4
> 
> 时间：2012-10-22T01:07:34.210
> 
> 标签：cloudinary

有没有办法将图片批量上传到我的云帐户？

我希望一次导入 100 张 3MB 的图像。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T14:15:02.590

您可以使用 Cloudinary 的上传 API 来一张一张上传图片。[这是 Python 中的示例上传代码](https://github.com/cloudinary/pycloudinary#upload)。如果您的图像已经在公共位置，您可以指定远程 HTTP URL 作为`file`参数，而不是发送实际图像的数据。这允许更快的上传。如果您的图像位于 Amazon S3 存储桶中，Cloudinary 可以直接从 S3 获取图像，以达到更高的上传性能。

您还可以并行使用多个进程运行上传代码，以便同时快速上传多个文件。在我们的 Ruby on Rails 客户端库中，我们包含[了一个迁移工具](http://cloudinary.com/documentation/rails_integration#migration)。

目前 Cloudinary 没有专门的 API 方法用于批量上传图片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-25T21:03:29.807

最简单的方法是使用远程 API - 只需将 url 引用传递给帐户，Cloudinary 就会连接到图像并将其下载到您的帐户中。

[http://cloudinary.com/documentation/upload_images#remote_upload](http://cloudinary.com/documentation/upload_images#remote_upload)

# javascript - JavaScript 添加小数而不使用 toFixed() 方法

> ID：13003808
> 
> 赞同：0
> 
> 时间：2012-10-22T01:07:46.017
> 
> 标签：javascript, integer, decimal

我有一些值被 PHP 附加了 00 的美分。我需要为它们添加一个小数点。

```
val = 10000 (needs to turn into 100.00);

val.toFixed(2) = 10000.00 (no bueno);

val.magic() = 100.00 (perf!) 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T01:09:58.443

```
(val/100).toFixed(2) = 100.00; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T03:45:21.420

如果你有一个以美​​分为单位的字符串值，可以使用一个简单的正则表达式来插入小数点：

```
function addPoint(s) {
  return s.replace(/(\d\d)$/,'.$1');
}

var s = '1000';
alert(addPoint(s)); // 10.00 
```

# c# - 页面未在 wph 应用程序中正确加载

> ID：13003814
> 
> 赞同：0
> 
> 时间：2012-10-22T01:08:54.913
> 
> 标签：c#, windows-phone-7, xaml

我有一个应用程序，并在我的 page1 中为我的 Windows Phone 应用程序创建了一个 RichTextBox。UI 在设计框中显示我想要的方式，但是当我尝试运行应用程序时，出现错误“EventHandler 'PhoneApplicationPage_Loaded' not found on class 'PhoneApp1.Page1'”

我根本不明白发生了什么，我想也许我应该在编码cs部分处理richtextbox的实际显示，在该部分我处理按钮单击以进入该页面。当我在网上查看时，我看到的只是如何使用richtextbox，就像我在我的 xaml 文件中所做的那样。任何想法这个错误是什么意思？

这是我的 xaml 和 cs 文件中的代码：

```
namespace PhoneApp1
{
public partial class Page1 : PhoneApplicationPage
{
    public Page1()
    {
        InitializeComponent();
    }
}
} 
```

而cs对应的xaml是：

```
 Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <RichTextBox VerticalAlignment="Top">
            <Paragraph>
                <Bold FontSize="32">Great Stuff</Bold>
            </Paragraph>
            <Paragraph>
            Great Stuff
                <LineBreak></LineBreak>
            </Paragraph>
            <Paragraph> 
                <Bold FontSize="32">More Stuff</Bold>
            </Paragraph>
            <Paragraph>
               More Stuff
                <LineBreak></LineBreak>
            </Paragraph>
            <Paragraph>
                <Bold FontSize="32">Some Stuff</Bold>
            </Paragraph>
            <Paragraph>
                Some Stuff
            </Paragraph>
        </RichTextBox>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:41:14.020

你的代码没有问题。

search your solution , does a event "PhoneApplicationPage_Loaded" exist?

# wordpress - Wordpress 主题开发快速入门

> ID：13003816
> 
> 赞同：1
> 
> 时间：2012-10-22T01:09:07.240
> 
> 标签：wordpress, wordpress-theming

我试图寻找一个快速而肮脏的 wordpress 主题开发教程入门。现在我知道如何自己去发现东西了，我在开始 wordpress 开发时正在寻找“程序员的十大常见问题解答”。（例如，打开调试以及调试选项所在的位置），如何最好地设置您的开发环境。

我能找到的只是详细的或太低级别或太高级别的指南。来自创建自定义的类似 wordpress 的应用程序的背景让我感到沮丧。

所以也许有人可以列出我需要的几件事。我不需要知道 wordpress 是如何工作的，什么是数据库、小部件或页面。

我专门寻找的问题： 1\. 如何让 wordpress 监视主题文件夹以了解我的 IDE 中的更改（我真的不敢相信有人会通过 wordpress 管理主题编辑器进行开发......没有撤消历史记录！）。在我重新安装主题之前，更改文件似乎不会生效。调试模式需要是真的吗？

1.  任何链接的浓缩版本：[http](http://codex.wordpress.org/Theme_Development) ://codex.wordpress.org/Theme_Development或类似的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T15:46:32.390

WordPress 使用文件层次结构来确定最终显示给用户的内容。对于初学者来说，创建 WordPress 主题所需的只是 a`style.css`和`index.php`.

`style.css`为了使其成为有效的 WordPress 主题，您必须输入以下内容：

```
/*
Theme Name: Your theme name
Theme URI: http://www.example.com/
Description: Describe your theme.
Author: Your name or company
Author URI: http://www.example.com/
Version: 1.0
Tags: black, blue, white, two-columns, fixed-width, custom-header, custom-background, threaded-comments, sticky-post, translation-ready, microformats, rtl-language-support, editor-style, custom-menu (optional)

License:
License URI:

General comments (optional).
*/ 
```

您真正需要包含的只是主题的唯一名称，WordPress 会识别它并将其列在您的其他主题中。即使这样可行，我还是建议尽可能多地包含信息。

`index.php`无论用户要求的内容类型如何，只需两个文件，就会为每个页面视图运行。您可以通过添加文件来扩展此功能，例如`page.php`显示所有页面、`single.php`以不同方式显示单个帖子等等。

我强烈建议您熟悉 WordPress Codex。这是一个很好的起点： [http ://codex.wordpress.org/Template_Hierarchy](http://codex.wordpress.org/Template_Hierarchy)

下图解释了层次结构和最终提供的文件。我有时会拿来做参考，没必要完全背下来。

![在此处输入图像描述](../Images/9f289b96d8ec536fbf5f7b085be68319.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T01:17:15.157

您需要熟悉基本的 wordpress 功能，如 the_permalink、the_title、the_content 等。这些很容易记住，如果您不想要任何开箱即用的功能并且您更加注意，您可以随时参考 wordpress.org 文档设计

如果您打算将主题提交给 wordpress.org，而不是打开调试计划并在开始[http://codex.wordpress.org/Theme_Review之前阅读此内容](http://codex.wordpress.org/Theme_Review)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T22:52:55.243

初学者的主题开发可以通过基于现有主题（例如二十二主题）来简化。我在这里写了一篇博客文章[http://johnadavies.me/2013/09/19/wordpress-child-theme-development/](http://johnadavies.me/2013/09/19/wordpress-child-theme-development/) John

# c# - 如何在 XML 中的元素中检索元素的值

> ID：13003820
> 
> 赞同：0
> 
> 时间：2012-10-22T01:09:50.373
> 
> 标签：c#, xml, linq

我有以下 XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Project>
<Site Address="0" Connect="COM1,9600">
</Site>
</Project> 
```

我试图获得“连接”的价值

我有这个代码：

```
var doc = XDocument.Load(xml);
var q = from x in doc.Root.Elements()
        where x.Name.LocalName == "Connect"
        select x;
ClientTB.Text = q.FirstOrDefault().ToString(); 
```

但是当我运行它时，我得到错误对象引用未设置为对象的实例。

如果我将 where 语句更改为：

```
 where x.Name.LocalName == "Site" 
```

然后我的文字包含`<Site Address="0" Connect="COM1,9600"></Site>`

我需要做什么才能获得 Connect 的价值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T01:19:44.517

```
var q = from x in doc.Root.Elements()
        where x.Name.LocalName == "Site"
        select x.Attribute("Connect"); 
```

选择

```
 var q = from x in doc.Descendants("Site").Attributes("Connect")
         select x; 
```

# java - 使用 PrintWriter 没有输出到文件

> ID：13003822
> 
> 赞同：2
> 
> 时间：2012-10-22T01:09:59.267
> 
> 标签：java, printwriter

我没有编译错误，但我的代码没有向保存的文件输出任何内容。代码确实创建了文件，但它们是空的。有人看到我做错了吗？

```
public class CellAutomataTest {
  public static void main(String[] args)
  {
    int rule = 120;//Integer.parseInt(args[0]);
    int numGen = 5;//Integer.parseInt(args[1]);
    String fileStem = "ca";//args[2];
    int width = 400;//Integer.parseInt(args[3]);
    int height = 400;//Integer.parseInt(args[4]);

    CellAutomata test = new CellAutomata(numGen, rule);

    PrintWriter writer = null;
    try {
        writer = new PrintWriter(new FileWriter(fileStem + ".js"));
    } catch (IOException ex) {
        Logger.getLogger(CellAutomataTest.class.getName()).log(Level.SEVERE, null, ex);
    }
    PrintWriter writer2 = null;
    try {
        writer2 = new PrintWriter(new FileWriter(fileStem + ".html"));
    } catch (IOException ex) {
        Logger.getLogger(CellAutomataTest.class.getName()).log(Level.SEVERE, null, ex);
    }

    writer.println("function draw() {");
    writer.println("var canvas = document.getElementById('CellAutomata');");
    writer.println("if (canvas && canvas.getContext) {");
    writer.println("var context = canvas.getContext('2d');");

    test.simulate(writer, width, height);

    writer2.println("<html>");
    writer2.println("<head>");
    writer2.println("<script src=\"" + fileStem + ".js></script>");
    writer2.println("<style type=\"text/css\">");
    writer2.println("canvas { border: 1px solid black; }");
    writer2.println("</style> </head>");
    writer2.println("<body onload=\"draw();\">");
    writer2.println("<h1>Cellular Automata with Rule " + rule + "</h1>");
    writer2.println("<canvas id=\"CellAutomata\" width=\"" + width + "\" height=\"" + height + "\">");
    writer2.println("<p>Your browser doesn't support canvas.</p>");
    writer2.println("</canvas> </body> </html>");
  }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T01:13:09.597

你需要使用：

```
writer2.flush();
writer2.close(); 
```

实际保存文件。

# ruby - 修改多次出现的哈希

> ID：13003824
> 
> 赞同：0
> 
> 时间：2012-10-22T01:10:30.937
> 
> 标签：ruby, hash, mutable

`a`是一个哈希。`s`是一个数组，我想在其中`a`迭代地推送哈希。这个想法是独立地保留每个迭代推送的哈希值。这是我尝试过的。

```
a = {:a=> 1, :b=>2}

s = []
s << a
s << a     # => [{:b=>2, :a=>1}, {:b=>2, :a=>1}]
a[:b] = 3
s          # => [{:b=>3, :a=>1}, {:b=>3, :a=>1}]

t = []
t.push(a)    # => [{:b=>3, :a=>1}]
t.push(a)    # => [{:b=>3, :a=>1}, {:b=>3, :a=>1}]
a[:b] = 4
t            # => [{:b=>4, :a=>1}, {:b=>4, :a=>1}] 
```

以上并没有给我解决方案：更改`a`会更改先前推送的数组内元素中的值。推`a`到`s`两次后，我`a[:b]`从`2`变为`3`，所有元素都反映了变化。请对此提出建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T01:17:44.140

每次添加时使用[dup](http://ruby-doc.org/core-1.9.3/Object.html#method-i-dup)`s`

```
s << a.dup 
```

该`dup`方法将创建哈希的浅表副本。

更新：

如果浅拷贝不满足要求，则使用 Marshaling

```
s << Marshal.load( Marshal.dump(a) ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T01:16:03.403

采用

```
s << Hash[a] 
```

这将复制哈希并允许您更改原始内容。

# vim - 如何在插入模式下映射 Ctrl-B 以删除光标下的字符？

> ID：13003826
> 
> 赞同：2
> 
> 时间：2012-10-22T01:10:41.107
> 
> 标签：vim

我试过了

```
:inoremap ^b <Del>
:inoremap ^b Del
:imap ^b <Del>
:imap ^b Del 
```

他们似乎都插入了一个`^B`字符。

我在 Windows 7x64 上使用 gVim7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:24:56.553

您的控制字符格式不是 vim 所期望的。您想`<C-x>`在映射中使用控制字符。

```
:inoremap <C-b> <Del> 
```

正如您当前的映射所代表的那样，vim 是映射`^`，后跟`Shift`+`b`到`Del`。

# javascript - 带参数的Javascript回调函数

> ID：13003828
> 
> 赞同：19
> 
> 时间：2012-10-22T01:11:00.890
> 
> 标签：javascript, callback

这个问题看起来像是重复的，因为标题几乎是重复的。但是，我的问题似乎更简单，我找不到答案。

我有一个执行另一个回调函数的 Javascript 函数，它的工作原理是这样的：

```
<script type='text/javascript'>
firstfunction(callbackfunction);
</script> 
```

其中回调函数定义为：

```
callbackfunction(response) {
    if (response=='loggedin'){
    // ... do stuff
}} 
```

但我希望它是这样的：

```
callbackfunction(response, param) {
    if (response=='loggedin'){
    // ... do stuff with param
}} 
```

我的问题是，这样传递参数是否有效：

```
<script type='text/javascript'>
firstfunction(callbackfunction(param));
</script> 
```

还是我做错了？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-22T01:57:31.380

在直接回答您的问题时，这不起作用：

```
 firstfunction(callbackfunction(param)); 
```

这将`callbackfunction`立即执行并将执行它的返回值作为参数传递给它，`firstfunction`这不太可能是你想要的。

* * *

从您的问题中不清楚您是否应该更改`firstfunction()`为在调用回调时传递两个参数，`callbackfunction()`或者您是否应该创建一个匿名函数来调用带有参数的回调函数。

这两个选项如下所示：

```
function firstfunction(callback) {
    // code here
    callback(arg1, arg2);
}

firstfunction(callbackfunction); 
```

或者

```
function firstfunction(callback) {
    // code here
    callback();
}

firstfunction(function() {
    callbackfunction(xxx, yyy);
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-22T01:16:05.723

使用匿名函数：

```
function foo( callback ) {
  callback();
}

function baz( param ) {
  console.log( param );
}

foo( function(){ baz('param') }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T02:17:32.083

调用函数时添加参数。 [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)

xdaz 已经回答了简单的版本。这是一个带有可变数量参数的示例。

```
function someObject(){
        this.callbacks=new Array();
        this.addCallback=function(cb){
            this.callbacks[this.callbacks.length]=cb
        }
        this.callCallbacks=function(){
            //var arr=arguments; this does not seem to work
            //arr[arr.length]="param2";
            var arr = new Array();
            for(i in arguments){
                arr[i]=arguments[i];
            }
            arr[arr.length]="another param";
            i=0;
            for(i in this.callbacks){
                this.callbacks[i].apply(null,arr);
                //this.callbacks[i].apply(this,arr);
                //this is a ref to currrent object
            }
        }
        this.callCallbacksSimple=function(arg){
            for(i in this.callbacks){
                this.callbacks[i](arg,"simple parameter");
            }

        }
}
function callbackFunction(){
    for(i in arguments){
        console.log("Received argument: " + arguments[i]);
    }
}
var ObjectInstance=new someObject();
ObjectInstance.addCallback(callbackFunction);
ObjectInstance.callCallbacks("call callbacks");
ObjectInstance.callCallbacksSimple("call callbacks"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T01:15:55.647

`function`是关键字，不能用作函数名。

假设您的函数名称是`foo`，那么您可以执行以下操作：

```
var param = 'what ever';
foo(function(response) {
  callbackfunction(response, param);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-20T09:23:20.273

**我想这就是你要找的。**

假设您正在使用 jQuery ajax 做某事，并且您将其传递给命名回调。这里我们有一个 onError 回调，您可以使用它来记录或处理应用程序中的错误。它符合 jQuery Ajax 错误回调签名，除了您可能想在后面添加的额外参数

```
function onError(jqXHR, textStatus, errorThrown, yourOwnVariableThing) {
    console.error('Something went wrong with ' + yourOwnVariableThing);
} 
```

这是您的函数将被调用的地方 - 但您需要一个额外的参数

```
$.ajax("/api/getSomeData/")
 .done(onDone)
 .fail(onError) 
 .always(onComplete); 
```

所以这就是您可以添加额外参数的方法

```
$.ajax("/api/getSomeData/")
  .done(onDone)
  .fail(onError.bind(this, arguments[0], arguments[1], arguments[2], 'Moo Moo'); 
  .always(onComplete); 
```

`arguments`是 JavaScript 中的一个数组，其中包含传递给函数的所有参数，因此您只需将这些参数传递给回调。

[论据](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Functions/arguments)

[绑定](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind)

# php - 带有 JavaScript Extjs 的 PHP 文件

> ID：13003831
> 
> 赞同：-1
> 
> 时间：2012-10-22T01:11:28.467
> 
> 标签：php, javascript, extjs, syntax-error, xmlexception

这里是一个新手程序员的菜鸟问题。

我正在尝试在 .php 文件中执行 javascript，在我的索引中包含以下行：

```
<script type="text/javascript" src="/js/basic.php"></script> 
```

在我的 basic.php 中：

```
<?php Header("content-type: text/javascript"); ?>
<script>
    Ext.Loader.setConfig({
        enabled: true,
        disableCaching: false,
        paths: {
            "Extensible": "/js/extensible/src",
            "Schedule.Calendar.data": "/js/data",
            "Schedule.Calendar.listeners":"/js/listeners",
            "Schedule.Calendar.override":"/js/override",
            "Schedule.Calendar.panels": "/js/panels"
        }
    });
</script> 
```

它不断发送错误消息：

> SyntaxError: XML 表达式中缺少 }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:15:33.820

该`basic.php`文件应该只输出纯 JavaScript。标签是 HTML ，`<script>`不需要。

# php - 简单、轻量、易学的 PHP 电子商务包

> ID：13003832
> 
> 赞同：0
> 
> 时间：2012-10-22T01:11:43.747
> 
> 标签：php, e-commerce, shopping-cart, checkout

我希望有一个电子商务解决方案，管理员可以在其中添加类别、在类别中添加产品、购物车、结帐（使用贝宝）。

我知道 Magento 很好地支持这一点，但我们现在的开发时间框架很短（1-2 周），因此我们需要一些更简单、更轻量级的东西，以便我们可以快速学习并快速定制它。

我想听听你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:20:18.970

结帐[OSCommerce](http://www.oscommerce.com/)。它拥有广泛且不断增长的社区支持。

根据他们的网站，到目前为止，他们拥有[12,819](http://shops.oscommerce.com/) 家直播商店和 6997 个附加组件。

[您可以在此处](http://www.oscommerce.com/solutions/downloads)下载源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T01:14:02.873

[OpenCart](http://www.opencart.com/)可能适合您，或者，只是在内部开发它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T01:14:33.760

[Drupal Commerce Kickstart 2.0](http://drupal.org/project/commerce_kickstart)真的很棒！

# r - 从大型`sapply`中的错误中解救出来

> ID：13003834
> 
> 赞同：11
> 
> 时间：2012-10-22T01:11:49.880
> 
> 标签：r, error-handling

这个问题可能会或可能不会受到我失去整个 3 小时地理编码运行的启发，因为其中一个值返回了错误。提示遗憾（向下）投票。

基本上在由`sapply`. 我继续了`options(error=recover)`，但尽管浏览了我可用的每个级别，但我找不到任何地方将（数千次成功）调用 FUN 的结果存储在内存中。

我在浏览时发现的一些对象在我尝试检查它们时出错，声称这些引用不再有效。不幸的是，我丢失了特定的错误消息。

这是一个简单的示例，虽然它没有复制参考错误（我怀疑这与消失的环境有关并且可能无关紧要），但确实表明我看不到保存已处理数据的方法。

有这样的技术吗？

请注意，我已经意识到我的错误并插入了比以前更强大的错误处理 via `try`，但我正在寻找一种**事后**而不是事前恢复内容的方法。

**测试功能**

```
sapply( seq(10), function(x) {
  if(x==5) stop("Error!")
  return( "important data" )
} ) 
```

**互动探索**

```
> sapply( seq(10), function(x) {
+   if(x==5) stop("Error!")
+   return( "important data" )
+ } )
Error in FUN(1:10[[5L]], ...) : Error!

Enter a frame number, or 0 to exit   

1: sapply(seq(10), function(x) {
    if (x == 5) 
        stop("Error!")
    return("important data")
})
2: lapply(X = X, FUN = FUN, ...)
3: FUN(1:10[[5]], ...)

Selection: 3
Called from: FUN(1:10[[5L]], ...)
Browse[1]> ls()
[1] "x"
Browse[1]> x
[1] 5
Browse[1]> 
Enter a frame number, or 0 to exit   

1: sapply(seq(10), function(x) {
    if (x == 5) 
        stop("Error!")
    return("important data")
})
2: lapply(X = X, FUN = FUN, ...)
3: FUN(1:10[[5]], ...)

Selection: 2
Called from: lapply(X = X, FUN = FUN, ...)
Browse[1]> ls()
[1] "FUN" "X"  
Browse[1]> X
 [1]  1  2  3  4  5  6  7  8  9 10
Browse[1]> FUN
function(x) {
  if(x==5) stop("Error!")
  return( "important data" )
}
Browse[1]> 
Enter a frame number, or 0 to exit   

1: sapply(seq(10), function(x) {
    if (x == 5) 
        stop("Error!")
    return("important data")
})
2: lapply(X = X, FUN = FUN, ...)
3: FUN(1:10[[5]], ...)

Selection: 1
Called from: sapply(seq(10), function(x) {
    if (x == 5) 
        stop("Error!")
    return("important data")
})
Browse[1]> ls()
[1] "FUN"       "simplify"  "USE.NAMES" "X"        
Browse[1]> X
 [1]  1  2  3  4  5  6  7  8  9 10
Browse[1]> USE.NAMES
[1] TRUE
Browse[1]> simplify
[1] TRUE
Browse[1]> FUN
function(x) {
  if(x==5) stop("Error!")
  return( "important data" )
}
Browser[1]> Q 
```

需要明确的是，我希望找到的是向量：

```
[1] "important data" "important data" "important data" "important data" 
```

也就是说，到此为止已经完成的内部循环的结果。

**编辑：使用 C 代码更新**

里面`.Internal(lapply())`是[以下代码](https://github.com/wch/r-source/blob/trunk/src/main/apply.c#L45)：

```
PROTECT(ans = allocVector(VECSXP, n));
...
for(i = 0; i < n; i++) {
   ...
   tmp = eval(R_fcall, rho);
   ...
   SET_VECTOR_ELT(ans, i, tmp);
} 
```

`ans`当任何呼叫`lapply`失败时，我想知道。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T11:35:13.477

我很难理解为什么`try()`这里不是要走的路？如果由于`sapply()`某种原因失败了，那么你

1.  想要很好地处理失败
2.  从那里继续

为什么您希望整个数据分析/处理步骤仅因错误而停止？这似乎是你所提议的。与其尝试恢复已经完成的工作，不如编写代码使其继续运行，记录发生的错误，同时优雅地进入流程的下一步。

这有点令人费解，因为您给出的示例是人为的（如果您知道什么会导致错误，您可以在没有 的情况下处理该错误`try()`），但请耐心等待：

```
foo <- function(x) {
    res <- try({
        if(x==5) {
            stop("Error!")
        } else {
            "important data"
        }
    })
    if(inherits(res, "try-error"))
        res <- "error occurred"
    res
}

> sapply( seq(10), foo)
Error in try({ : Error!
 [1] "important data" "important data" "important data" "important data"
 [5] "error occurred" "important data" "important data" "important data"
 [9] "important data" "important data" 
```

在后台运行需要数周才能在我的工作站上完成的作业后，我很快学会了`try()`围绕单个语句而不是大块代码编写大量调用，这样一旦发生错误，我就可以快速退出迭代/步骤对正在运行的工作影响最小；换句话说，如果一个特定的 R 调用失败，我返回的东西可以`sapply()`很好地插入（或任何函数）返回的对象中。

对于更复杂的事情，我可能会使用`lapply()`：

```
foo2 <- function(x) {
    res <- try({
        if(x==5) {
            stop("Error!")
        } else {
            lm(rnorm(10) ~ runif(10))
        }
    })
    if(inherits(res, "try-error"))
        res <- "error occurred"
    res
}

out <- lapply(seq(10), foo2)
str(out, max = 1) 
```

因为您将需要列表，而不是尝试将更复杂的对象简化为简单的东西：

```
>     out <- lapply(seq(10), foo2)
Error in try({ : Error!
> str(out, max = 1)
List of 10
 $ :List of 12
  ..- attr(*, "class")= chr "lm"
 $ :List of 12
  ..- attr(*, "class")= chr "lm"
 $ :List of 12
  ..- attr(*, "class")= chr "lm"
 $ :List of 12
  ..- attr(*, "class")= chr "lm"
 $ : chr "error occurred"
 $ :List of 12
  ..- attr(*, "class")= chr "lm"
 $ :List of 12
  ..- attr(*, "class")= chr "lm"
 $ :List of 12
  ..- attr(*, "class")= chr "lm"
 $ :List of 12
  ..- attr(*, "class")= chr "lm"
 $ :List of 12
  ..- attr(*, "class")= chr "lm" 
```

也就是说，我可能会通过一个`for()`循环来完成此操作，在我迭代时填写一个预先分配的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T02:26:08.603

也许我不明白，这肯定会减慢您的速度，但是每次全局分配呢？

```
safety <- vector()
sapply( seq(10), function(x) {
  if(x==5) stop("Error!")
  assign('safety', c(safety, x), envir = .GlobalEnv)
  return( "important data" )
} ) 
```

产量：

```
> safety <- vector()
> sapply( seq(10), function(x) {
+   if(x==5) stop("Error!")
+   assign('safety', c(safety, x), envir = .GlobalEnv)
+   return( "important data" )
+ } )
Error in FUN(1:10[[5L]], ...) : Error!
> safety
[1] 1 2 3 4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T01:30:05.023

您从未将中间值分配给任何东西。我不明白你为什么认为应该有任何神圣的内脏。您需要以某种方式记录值：

```
 res <- sapply( seq(10), function(x) { z <- x
                                   on.exit(res <<- x);
                                   if(x==5) stop("Error!")
 } )
Error in FUN(1:10[[5L]], ...) : Error!
 res
#[1] 5 
```

此`on.exit`方法在`?par`页面上进行了说明，作为在绘图出错时恢复标准设置的一种方法。（我无法让它与`on.exit(res <- x)`.

# python - 我可以向量化这个二维数组索引，其中第二维取决于第一维的值吗？

> ID：13003839
> 
> 赞同：1
> 
> 时间：2012-10-22T01:12:33.160
> 
> 标签：python, multidimensional-array, numpy

在下面的示例中，我有一个 2D 数组，该数组具有一些被移动和填充的真实结果。移位取决于行（填充用于根据 numpy 的要求使数组成为矩形）。是否可以在没有 Python 循环的情况下提取真实结果？

```
import numpy as np

# results are 'shifted' where the shift depends on the row
shifts = np.array([0, 8, 4, 2], dtype=int)
max_shift = shifts.max()
n = len(shifts)

t = 10 # length of the real results we care about

a = np.empty((n, t + max_shift), dtype=int)
b = np.empty((n, t), dtype=int)

for i in range(n):
    a[i] = np.concatenate([[0] * shifts[i],               # shift
                           (i+1) * np.arange(1, t+1),     # real data
                           [0] * (max_shift - shifts[i])  # padding
                           ])
print "shifted and padded\n", a

# I'd like to remove this Python loop if possible
for i in range(n):
    b[i] = a[i, shifts[i]:shifts[i] + t]

print "real data\n", b 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:46:43.773

您可以使用两个数组来获取数据：

```
a[np.arange(4)[:, None], shifts[:, None] + np.arange(10)] 
```

或者：

```
i, j = np.ogrid[:4, :10]
a[i, shifts[:, None]+j] 
```

这在 NumPy 文档中称为高级索引。

# php - 使用 jQuery 选择器指定多个对象

> ID：13003842
> 
> 赞同：0
> 
> 时间：2012-10-22T01:13:22.077
> 
> 标签：php, jquery, ajax, jquery-selectors

我有一个导航栏，它由 php 生成的 html 组成，如下所示：

```
<ul>
<div class="container"><button type="button" name="1" class="delButton" alt="Delete"></button></div>
<a href="/" alt="Home">Home</a>
<div class="container"><button type="button" name="2" class="delButton" alt="Delete"></button></div>
<a href="/" alt="Events">Events</a>
<div class="container"><button type="button" name="3" class="delButton" alt="Delete"></button></div>
<a href="/" alt="Calendar">Calendar</a>
<div class="container"><button type="button" name="4" class="delButton" alt="Delete"></button></div>
<a href="/" alt="About Us">About Us</a>
</ul> 
```

每组由一个删除按钮和一个链接组成。根据 mySQL 数据库，按钮的 name 属性包含其后链接的唯一 ID。

当单击相应的删除按钮时，我正在使用以下 jQuery 代码删除链接。请注意，我使用的是自定义 ajax() 方法，而不是 jQuery 的 ajax 方法。

```
$('.container button').click(function() {
     if (confirm('Are you sure you wish to remove this link?'))
        ajax('POST', '/deletelink.php', 'id='+this.name, function(xmlhttp) {
           $('.nav ul').load('/getnav.php');
        });
}); 
```

当我单击任何一个删除按钮时，上面的代码按预期工作，并删除了相应的链接。但是，如果在删除一个链接后我尝试单击另一个删除按钮，则没有任何反应。确认（）警报框甚至没有出现。这表明没有为第二次删除尝试输入 click() 函数。

我对此的解释是，一旦函数第一次执行，它会将选择器解析为被单击的特定按钮；这意味着随后单击不同的“.container 按钮”将对此功能无效。

我的评估是否正确？如果是这样，有什么方法可以阻止函数将选择器解析为特定对象？如果没有，是否有任何替代方法可以让我对我现在设置的所有删除按钮使用一个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:16:58.177

当您`getnav.php`再次加载时，您的点击处理程序将被覆盖。您可以使用以下构造：

```
$(document).on('click', '.container button', function() {
    // click handler code here
} 
```

您还应该能够缩小选择器的范围：

```
$('.nav ul').on('click', '.container button', function() {
    // click handler code here
} 
```

这将单击处理程序绑定到`<ul>`自身上，然后使用`.container button`选择器来确定将单击事件“发送”到的位置。

也可以看看：[`.on()`](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T01:19:47.583

在删除后加载内容后，您将不得不再次绑定事件。最好的方法是使用 jQuery `on`。它会自动找到添加到 DOM 中与您的选择器匹配的新元素并将它们绑定到事件

[http://api.jquery.com/on/](http://api.jquery.com/on/)

改用这个

```
$('.nav ul').on('click', '.container button', function() { 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T01:18:08.363

如果该栏是 PHP 生成的，则您始终可以在循环期间将 onclick 转储到输出中。就像是：

```
onclick = "deleteLine('<?=$id?>'); void(0); return false;" 
```

然后，您可以将*.click*函数更改为名为 deleteLine 的函数，例如：

```
function deleteLine(id) { 
```

我意识到这不是一个了不起的解决方案，但它应该可以完成工作。

# python - Python复杂的字典排序

> ID：13003848
> 
> 赞同：2
> 
> 时间：2012-10-22T01:14:33.650
> 
> 标签：python, python-2.7

我有一本字典，其中每个键都保存一个列表作为值。每个列表都有一个或多个元组，里面有 2 个项目，一个整数，一个字符串。

例子：

```
my_dict = {'dict_key_1': [(100, 'string_x1234'), (95, 'string_rtx3') ..],
           'dict_key_2': [(26, 'string_abc3'), (321, 'string_432fd'), ...],
           'dict_key_3': [(32, 'string_232df']} 
```

我正在遍历这本字典，同时通过列表中的项目进行操作。

但是，在两次迭代中，我必须让字典按列表中任何元组的第一项的最大值排序。

所以在那种情况下，由于**321**是最高的，我会首先得到**dict_key_2**，它的项目将从第一个项目的元组开始列出**321**，然后是**26**等等。

我对第二次迭代（对元组列表进行排序）很好：

```
sorted(data[k], reverse = True) 
```

但是我目前无法根据字典键所持有的列表中任何元组的最大值对主字典进行排序。我目前有：

```
for k in sorted(data, key=lambda k: sorted(data[k])[0][0]): 
```

但是，它不起作用。但是当我在迭代时尝试打印`sorted(data[k])[0][0])`时，它确实给出了第一个元组 [0] 的第一个值 [0]，在它对该列表中所有元组的第一个值进行排序之后（`data[k]`）

我究竟做错了什么？如何根据需要对这本字典进行排序？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:32:43.400

如果您不介意对 dict 中的列表进行排序，我建议您分两次执行此操作：

```
for L in my_dict.itervalues():
  L.sort(reverse=True)

import collections
my_sorted_dict = collections.OrderedDict((k, my_dict[k]) for k in sorted(my_dict, key=my_dict.get, reverse=True)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T01:46:56.750

以下代码段将为您提供一个新的排序字典：

```
from collections import OrderedDict

my_dict = {'dict_key_1': [(100, 'string_x1234'), (95, 'string_rtx3')],
           'dict_key_2': [(26, 'string_abc3'), (321, 'string_432fd')],
           'dict_key_3': [(32, 'string_232df')]}

sorted_my_dict = OrderedDict(sorted(my_dict.iteritems(),
                                    key=lambda (k, v): max(v),
                                    reverse=True)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T01:27:32.937

使用`max`：

```
for k in sorted(data, key=lambda k: max(data[k]), reverse=True): 
```

# scheme - 小阴谋家和球拍

> ID：13003850
> 
> 赞同：26
> 
> 时间：2012-10-22T01:14:56.070
> 
> 标签：scheme, racket, the-little-schemer

我开始阅读 Little Schemer，现在我们有 Racket，而不是 PLT Scheme。我想知道 Racket 是否适合做书中的练习，还是我需要另一个真正的 Scheme 编译器。在我忘记告诉你之前，我的操作系统是 Windows x64。

这本书、语言和范式足够复杂，我很想避免与编译器打交道。

提前非常感谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-22T01:39:03.990

DrRacket 是 DrScheme 的 (r) 演变；DrRacket 非常适合“The Little Schemer”中的练习。只是不要忘记：

1.  在`Language`对话框中，选择“使用源中声明的语言”
2.  写`#lang racket`在您创建的每个文件的顶部
3.  `atom?`如本书开头所述，在每个文件中实现谓词
4.  如果要重新实现现有过程，请在单独的选项卡或窗口中执行此操作，因为尝试在编辑窗口中重写过程会导致`duplicate definition for identifier`错误。如有必要，使用多个文件来保存过程定义

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-19T18:24:01.130

你真的只需要这个`atom?`功能。本书前言中的描述基本上是：

```
(define (atom? x)
  (and (not (pair? x)) (not (null? x)))) 
```

如前所述，它应该满足这个测试：

```
(atom? '()) ;=> #f 
```

[请注意， Racklog](http://docs.racket-lang.org/racklog/index.html)中还有一个定义*不能满足该测试*。

更详细的讨论`atom?`是[here](https://stackoverflow.com/questions/5404707/check-if-an-argument-is-a-list-or-an-atom)。

尽管本书建议实施`add1`and `sub1`，但 Racket*确实*已经提供了它们。

顺便说一句，我使用[Vim 来编辑 Racket](https://stackoverflow.com/a/31999765/326516)，但[其他一些编辑器也可以](http://docs.racket-lang.org/guide/other-editors.html)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-11T12:58:56.810

我有这本书的作者当教授。他现在自己使用 Racket，但他使用 Emacs 作为文本编辑器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T01:18:47.047

球拍/方案是可互换的。你应该能够用它来回答任何练习。祝你好运。

另外，我建议下载 Dr. Racket 作为您的翻译。

# web-audio-api - 使用 HTML5 Web Audio Api 进行音频录制

> ID：13003852
> 
> 赞同：2
> 
> 时间：2012-10-22T01:15:10.487
> 
> 标签：web-audio-api

有谁知道 Web Audio API 是否能够保存使用 WebAudioContext 播放的音频？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-22T21:11:42.670

我实际上编写了一个名为[RecorderJS](https://github.com/mattdiamond/Recorderjs)的小实用程序，它可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T16:39:47.640

录制 API 有一个 W3C 规范[http://www.w3.org/TR/mediastream-recording/](http://www.w3.org/TR/mediastream-recording/)，但目前它只在 Firefox 中实现。

客户端只有 ScriptProcessorNode hack（这是 Record.js 的基础）。

或者，对于某些用例，使用 WebRTC 将音频流式传输到服务器并使用 Libjingle 编写服务器端记录器可能是有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:54:44.147

Chrome 中至少有一个 startRendering 功能（没有检查过 Safari）。我认为它正在进行一些返工，因此未包含在规范中，但可能会在稍后阶段添加（或不添加）。如果您想查看当前的实现，请查看[Is there a way to use the Web Audio API to sample audio than real-time？](https://stackoverflow.com/questions/8074152/is-there-a-way-to-use-the-web-audio-api-to-sample-audio-faster-than-real-time)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-25T01:11:23.827

这个库工作正常，仅网络音频 api（意味着没有 ie 用户）： [https ://github.com/higuma/web-audio-recorder-js](https://github.com/higuma/web-audio-recorder-js)

但我们现在可以公平地使用它： [http ://caniuse.com/#feat=audio-api](http://caniuse.com/#feat=audio-api)

无论如何，就像您说的那样，您的声音已经在音频上下文中，所以我认为您正在寻找如何使用 AudioDestinationNode，即网络音频 api 的最终节点。只要您可以通过普通的 html 音频播放器播放音频，您就会在右键单击时获得录音功能，就像 playDataUri 一样。您需要为播放器添加“控件”属性，或者您可以制作带有下载属性的特殊链接。我对 Mdn 脚本做了一个小改进，将数据发送给玩家，它应该给你一个好主意：

```
 ```
 var audioCtx = new AudioContext();
    var source = audioCtx.createMediaElementSource(myMediaElement);
        myMediaElement = document.createElement("audio");
        myMediaElement.setAttribute("autoplay", true);
        myMediaElement.setAttribute("src", uri);
        myMediaElement.setAttribute("controls", "controls");
        document.getElementById('player').appendChild(myMediaElement);
    source.connect(audioCtx.destination);
``` 
```

> AudioDestinationNode 接口表示给定上下文中音频图的最终目的地——通常是设备的扬声器。当与 OfflineAudioContext 一起使用时，它也可以是“记录”音频数据的节点。

[https://developer.mozilla.org/en-US/docs/Web/API/AudioDestinationNode](https://developer.mozilla.org/en-US/docs/Web/API/AudioDestinationNode)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-20T16:48:09.140

最简单的方法是创建一个流

```
 var dest = audioCtx.createMediaStreamDestination();
 var options = {
 audioBitsPerSecond : 320000,
 sampleSize: 16,
 channelCount: 2,
 mimeType : 'audio/ogg'
     }
  var mediaRecorder = new       MediaRecorder(dest.stream, options);
  var chunks = [];
var isrecording = "Not Recording";

function rec(){

mediaRecorder.start();// start record
dataavailable = true;
isrecording = mediaRecorder.state;
} 
```

你可以在这里查看我的 soundrec 应用程序的示例。虽然它也是一个完整的多段压缩器和 5 段段落。哦，如果你查看我的链接。最重要的事情是 ondataavailable 方法。保存为 blob 也有点超前。Ps 如果有人想帮助我在 chrome 上使用这个功能，请给我发一封电子邮件。谢谢。它目前仅适用于 Firefox。 [多频段压缩器](https://shamanicraft.com/MBCsoundrecho.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-20T20:47:31.230

现在可以在最新的浏览器中使用它，它称为[媒体记录](https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder)器，您可以在此处找到更多[信息](https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder_API/Using_the_MediaRecorder_API)

# c++ - 实现重载运算符“+”时出错

> ID：13003860
> 
> 赞同：1
> 
> 时间：2012-10-22T01:16:34.527
> 
> 标签：c++, operator-overloading

我有`MyClass`一个链接列表，我已经覆盖了 operator+：

```
MyNode
{
   int value;
   MyNode* link;
} 
```

```
MyClass
{
   MyNode* first;
   MyNode* current;
   MyNode* last;
   int count;
} 
```

```
MyClass MyClass::operator+(MyClass* operand)
{
   MyClass sum;
   for(int i = 0; i < count; i++)
   {
      MyNode* newNode
      newNode->value = value + operand->value;
      sum->insert(newNode);
   }
   return sum;   
} 
```

当我尝试在我的主要功能中实现这一点时：

```
MyClass* a = new MyClass();
MyClass* b = new MyClass();
MyClass* c;

c = a + b; 
```

编译器抛出错误：“无法添加两个指针”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T01:20:38.673

你来自 Java 背景吗？您不需要`new`创建对象：

试试这个：

```
MyClass MyClass::operator+(const MyClass& operand)
{
   MyClass result;

   // Perform addition ...

   return result;  
}

MyClass a;
MyClass b;
MyClass c;

c = a + b; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T22:44:33.007

两个问题。首先，您的运营商的签名错误。`operator+`应该将 const 引用作为参数并返回一个 const 值。因此：

```
const MyClass MyClass::operator+(const MyClass& operand) 
```

其次，您试图添加指针本身而不是它们指向的对象。所以你需要：

```
*c = *a + *b; 
```

为了 100% 正确，操作符本身应该被声明为一个`const`函数：

```
 const MyClass MyClass::operator+(const MyClass& operand) const 
```

# android - Android如何从当前布局去新布局android？

> ID：13003868
> 
> 赞同：0
> 
> 时间：2012-10-22T01:17:55.063
> 
> 标签：android, android-layout

这是我的代码。我应该更改或添加什么以转到另一个布局？我正在做 QR 码扫描仪，当它扫描时，如果代码为“1234”，它将转到新的布局名称为 abcd.xml。

```
package wj.com;

import android.app.Activity;
import android.content.Intent;
import android.content.res.ColorStateList;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

public class OCTotActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}
public void onClick (View view){
    IntentIntegrator integrator = new IntentIntegrator(this);
    integrator.initiateScan();
}
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
      IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
      if (scanResult != null) {
        // handle scan result
          String barcode;

          barcode = scanResult.getContents();{
              if (barcode.equals("1234")){
                  setContentView(R.layout.abcd);
              }

              }

          EditText etBarcode = (EditText) findViewById(R.id.etBarcode);

          etBarcode.setText(barcode);
      }

 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:35:10.123

最简单的方法是将 main 和 abcd 都嵌套在[FrameLayout](http://developer.android.com/reference/android/widget/FrameLayout.html)中。FrameLayout 是一堆子视图，一次可以显示其中一个。

> 子视图绘制在堆栈中，最近添加的子视图在顶部。

这是一个布局的示例部分，它将利用 FrameLayout 并重用您现有的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/container"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <include android:id="@+id/main" layout="@layout/main" />
    <include android:id="@+id/abcd" layout="@layout/abcd" />
</FrameLayout> 
```

然后在 onCreate 中，找到 abcd 并将其可见性设置为 View.INVISIBLE：

```
findViewById(R.id.abcd).setVisibility(View.INVISIBLE); 
```

当您的条形码等于 1234 时，请执行以下操作：

```
// Show the abcd layout
findViewById(R.id.abcd).setVisibility(View.VISIBLE);
// Hide the main layout
findViewById(R.id.main).setVisibility(View.INVISIBLE); 
```

# java - 如何获取 sun.misc.Unsafe 的实例？

> ID：13003871
> 
> 赞同：17
> 
> 时间：2012-10-22T01:18:12.680
> 
> 标签：java, unsafe

如何获取不安全类的实例？

我总是得到安全异常。我列出了 OpenJDK 6 实现的代码。我想弄乱`sun.misc.Unsafe`提供给我的功能，但我总是最终得到`SecurityException("Unsafe")`.

```
public static Unsafe getUnsafe() {
    Class cc = sun.reflect.Reflection.getCallerClass(2);
    if (cc.getClassLoader() != null)
        throw new SecurityException("Unsafe");
    return theUnsafe;
} 
```

（请不要试图告诉我使用这个类有多不安全。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-01-03T21:32:56.553

从 [baeldung.com](https://www.baeldung.com/java-unsafe)，我们可以使用反射获取实例：

```
 Field f =Unsafe.class.getDeclaredField("theUnsafe");
   f.setAccessible(true);
   unsafe = (Unsafe) f.get(null); 
```

编辑

下面引用这段代码所属项目的描述。

“所有这些示例和代码片段的实现都可以在 GitHub 上找到——这是一个 Maven 项目，所以它应该很容易导入和运行。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-05T23:46:02.227

如果你使用 Spring，你可以使用它的类`UnsafeUtils`

在`org.springframework.objenesis.instantiator.util.UnsafeUtils`

```
public final class UnsafeUtils {
    private static final Unsafe unsafe;

    private UnsafeUtils() {
    }

    public static Unsafe getUnsafe() {
        return unsafe;
    }

    static {
        Field f;
        try {
            f = Unsafe.class.getDeclaredField("theUnsafe");
        } catch (NoSuchFieldException var3) {
            throw new ObjenesisException(var3);
        }

        f.setAccessible(true);

        try {
            unsafe = (Unsafe)f.get((Object)null);
        } catch (IllegalAccessException var2) {
            throw new ObjenesisException(var2);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-26T06:26:36.553

您可以在以下位置找到另一种方法：

[http://mishadoff.com/blog/java-magic-part-4-sun-dot-misc-dot-unsafe/](http://mishadoff.com/blog/java-magic-part-4-sun-dot-misc-dot-unsafe/)

在不安全的源代码中，您可以找到：

```
@CallerSensitive
public static Unsafe getUnsafe() {
    Class<?> caller = Reflection.getCallerClass();
    if (!VM.isSystemDomainLoader(caller.getClassLoader()))
        throw new SecurityException("Unsafe");
    return theUnsafe;
} 
```

您可以使用 Xbootclasspath 将您的类或 jar 添加到引导类路径，如下所示：

```
java -Xbootclasspath:/usr/jdk1.7.0/jre/lib/rt.jar:. com.mishadoff.magic.UnsafeClient 
```

# android - 您如何向 Google Play 请求下载统计信息

> ID：13003878
> 
> 赞同：2
> 
> 时间：2012-10-22T01:19:22.010
> 
> 标签：android, download, statistics, google-play

根据此处的对话：[是否有 API 可以在 Google Play 上获取销售报告？](https://stackoverflow.com/questions/11141764/is-there-an-api-to-get-sales-report-on-google-play)

可能有一种方法可以向 google play 发出 HTTPS 请求 (?) 以编程方式检索下载统计信息。我正在尝试设置一个每天运行的程序并将此信息下载为 csv 文件。

有没有人有如何提出请求和提供身份验证的示例？

基本上我想下载 Andlytics 在 csv 中提供的信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T22:05:47.303

没有 API。好消息是，现在所有人都可以使用的新 Google Play 控制台界面允许以 CSV 格式导出所有统计信息。

只是为了好玩，这里有一些其他的建议：

Andlytics 应用程序只是模拟浏览器并解析 JSON AJAX 请求。它是开源的，你可以在这里找到所有的代码（Java）[https://github.com/AndlyticsProject/andlytics](https://github.com/AndlyticsProject/andlytics)

您还可以使用 Rails 和 Selenium 做一个基本的控制台刮板：

```
module Console
  require 'selenium-webdriver'

  def self.user_stats email, password
    login email, password
    stats = extract_stats
    extract_packages.each_with_index do |package, i|
      download = stats[i*2]
      install = stats[i*2+1]
      puts "#{package} - Downloaded #{download} / Installed #{install}"
    end
    quit
  end

  def self.init
    @driver.quit if @driver
    @driver = Selenium::WebDriver.for :firefox
  end

  def self.quit
    @driver.quit if @driver
  end

  def self.login email, password
    init
    @driver.navigate.to "https://market.android.com/publish/Home"
    element = @driver.find_element(:name, 'Email')
    element.send_keys email
    element = @driver.find_element(:name, 'Passwd')
    element.send_keys password
    element.submit
    sleep 10
  end

  def self.extract_packages
    packages = []
    @driver.find_elements(:xpath, '//div[@class="listingRow"]/table/tbody/tr/td/div/a').each do |e|
      if m = e.attribute('href').match(/^https\:\/\/market\.android\.com\/publish\/Home#ViewCommentPlace\:p\=(.*)$/)
        packages << m[1]
      end
    end
    packages
  end

  def self.extract_stats
    stats = []
    @driver.find_elements(:xpath, '//div[@class="listingRow"]/div/div/span').each do |e|
      if m = e.text.match(/^([0-9,\. ]+).*$/)
        stats << m[1].gsub(/[^\d]/, "")
      end
    end
    stats
  end

end 
```

只需添加 CSV/db 的内容和一个 cronjob，它应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-18T09:08:14.700

现在有一种方法可以轻松地从 Play 商店获取所有统计信息。在开发者控制台上，单击报告 > 统计信息，您应该会看到所有报告（csv 格式）。它们都存储在 Google Cloud Storage 上，因此您可以通过编程方式将它们全部下载。

# delphi - Delphi XE2：InputQuery显示框宽度过大

> ID：13003879
> 
> 赞同：0
> 
> 时间：2012-10-22T01:19:34.837
> 
> 标签：delphi, vcl

尝试使用多行提示符时：即

```
sPrompt := 'some text' + #13#10#10 + 'some more info...' + #13#10 +
           'Blah, Blah' + #13#10#10 + 'What is your input?'; 
```

InputQuery 函数将字符串作为字符串数组，它根据数组中最长的字符串计算Form 的MaxWidth。

在上面的示例中，InputQuery 表单是根据字符串的长度计算的，大约为 50 个字符。虽然最长的线路只是其中的一小部分。

结果是一个非常宽的 InputQuery 框，其中显示了很多空白空间。看起来不是很专业。

当我尝试创建一个字符串数组来保存每一行时：

```
var saPrompt: array of string;
    sInputString: String;
Begin
   SetLength(saPrompt,4);
   saPrompt[0] := 'some text' + #13#10#10;
   saPrompt[1] := 'some more info...' + #13#10;
   saPrompt[2] := 'Blah, Blah' + #13#10#10;
   saPrompt[3] := 'What is your input?';
   sInputString := '???';

   If InputQuery('I Need Input?',saPrompt,sInputString) then 
```

由于不存在用于获取 InputQuery 函数的这些参数的重载函数，我无法编译。我查看了 Vcl.Dialogs 单元中的 Overload InputQuery 函数，但无法使其工作。

有谁知道使用带有多行提示的 InputQuery 函数的正确语法？

我正在使用 Embarcadero RAD Studio XE2 - Delphi

提前感谢任何“有用”的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:31:01.640

```
function GetPassword:string;
var 
  saPrompt,saVal: array of string;
begin
 SetLength(saPrompt,1);
 saPrompt[0] := #30'Enter password';
 SetLength(saVal,1);
 saVal[0] := '??????';
 if InputQuery('Password',saPrompt,saVal) 
    then result:=saVal[0] else return:='';
end; 
```

此代码适用于 Delphi XE2。以前的版本没试过。我会认为这是不言自明的（如果您有一些 Delphi 经验）。干杯克里斯托夫

# unix - Extract texts from a single file and writing those texts to multiple files

> ID：13003880
> 
> 赞同：-1
> 
> 时间：2012-10-22T01:19:43.090
> 
> 标签：unix, sed, awk

I'm trying to achieve the following.

1.  Find first '**(**' symbol (always located at the start of a new line) in a text file and make the hostname that follows a variable such as '**(host**' becomes '**host**'.

2.  Copy text between first instance of '**=-=-=**' delimiter and second instance of the same delimiter ('**=-=-=**') to a new file whose name is the variable in item 1 such as **host-messages.txt**

3.  Copy text between second instance of '**=-=-=**' delimiter and third instance of the same delimiter to a new file whose name is the variable in item 1 such as **host-df.txt**

4.  Copy text between third instance of '**=-=-=**' delimiter and subsequent next instance of a '**(**' on the first character of a new line such as the next instance of a '**(hostname**',to a new file whose name is the variable in item such as **host-dfa.txt**

5.  Repeat steps 1 through 4 until end of file and no more '**(host**' are found.

Anyway what I'm trying to achieve is extract data such as:

```
(hostname1 : 056603) Â 1    
=-=-=
TEXT
TEXT
TEXT
=-=-=
TEXT2
TEXT2
TEXT2
=-=-=
TEXT3
TEXT3
TEXT3
(hostname2
=-=-=
etc... 
```

Newly created files should be hostname1-messages.txt, hostname1-df.txt and hostname1-dfa.txt.

The best I've come up with so far is

```
awk '/=-=-=/{x="F"++i;next}{print > x;}' test.txt 
```

but it's not working.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:27:08.423

Post some sample input and expected output to help us help you but something like this is what you want (untested, obviously):

```
awk '
BEGIN{ sfx[1]="-messages.txt"; sfx[2]="-df.txt"; sfx[3]="-dfa.txt" }
sub(/^\(/,"") { host=$0; nr=0; next }
/=-=-=/ { nr++; next }
{ print > host sfx[nr] }
' file 
```

# php - Codeigniter 数据库 Where 有多个子句和另一个 where

> ID：13003885
> 
> 赞同：1
> 
> 时间：2012-10-22T01:19:49.963
> 
> 标签：php, mysql, codeigniter, activerecord

所以我承认这个标题有点令人困惑，我很抱歉，因为我不知道该怎么做，所以对那里的建议持开放态度。无论如何，关于实际问题。我有一个查询，大部分情况下都可以正常工作，但是我仍然会产生一些错误的结果。也是可以理解的。因为这就是形成查询的方式。对许多ands和许多ors松散地串在一起。我需要做的是在其中包含一组 where 子句，`( )`然后在另一个中包含一个`and`then 剩余的子句集，`( )`我不知道这对任何人是否有意义。

基本上，如果我直接手动输入查询，它看起来像..

```
select * from my_table
where (cond1 = this and cond2 = that) 
and (cond2 != something or cond3 > other) 
```

不太确定如何使用 codeigniter 的活动记录来实现这一点。我目前拥有的是。

```
$this->db->select('user_event_invite.*, game_bridge.*, user_event.*, user_event.location as bizfo')
->from('user_event')
->join('game_bridge', 'user_event.gID = game_bridge.gID')
->join('user_event_invite', 'user_event_invite.eID = user_event.eID')
->where('user_event_invite.friendID', $mID)
->where('user_event.isactive', 0)
->where('user_event_invite.isactive', 0)
->where('user_event.ends >=', $this->genfunc->unixToMySQL(time()))
->where('user_event.ends !=', '0000-00-00 00:00:00')
->or_where('yes > ', 0)
->or_where('no > ', 0)
->or_where('maybe > ', 0); 
```

但我最终想要的是一组中的所有这些特定条款..

```
->where('user_event_invite.friendID', $mID)
->where('user_event.isactive', 0)
->where('user_event_invite.isactive', 0)
->where('user_event.ends >=', $this->genfunc->unixToMySQL(time()))
->where('user_event.ends !=', '0000-00-00 00:00:00') 
```

然后将该组与和 AND 组合到另一个组。

```
->or_where('yes > ', 0)
->or_where('no > ', 0)
->or_where('maybe > ', 0); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T02:49:57.290

因此，CodeIgniter 不支持“包装”您的 OR 和 AND SQL 语句，至少不使用它的抽象层。CodeIgniter 不建议混合使用 OR 和 AND 语句。

您可以尝试了解您执行的查询`$this->db->last_query()`

你也可以试试这个子查询库，看看它是否可以帮助你： http: [//labs.nticompassinc.com/CodeIgniter-Subqueries/](http://labs.nticompassinc.com/CodeIgniter-Subqueries/)

或者您可能只需要在您的情况下使用一些 RAW SQL。

# c++ - 文件流问题

> ID：13003886
> 
> 赞同：1
> 
> 时间：2012-10-22T01:19:57.433
> 
> 标签：c++, visual-c++

在 2010 Visual C++ Express 中，我正在使用...

```
ifstream inFile("inputfile.dat");
double number;
while(inFile >> number)
{
cout << number << endl;
} 
```

...将存储在文件中的 8 个数字读入程序中，并在监视器上显示。它根据需要正确显示它们，但我需要将每个单独的数字存储为已经指定的双精度数。从上到下，

1.  客户 1 的身份证明#
2.  平衡
3.  未付款项
4.  已进行的购买

那么其他 4 个数字对于不同的客户来说都是一样的。我尝试了很多不同的方法来做到这一点，但每种方法都有：

```
"Run-Time Check Failure #3 - The variable 'variableName' is 
 being used without being initialized." 
```

几乎所有变量都会发生这种情况。我已经搜索了任何可以帮助我解决此问题的方法，但似乎找不到可以在我需要的范围内帮助我的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:27:43.580

假设您真的想将这些存储在 8 个不同的变量中，而不是某些聚合数据类型中：

```
std::ifstream inFile("inputfile.dat");
double number;

    if(inFile >> cust1id >> cust1bal >> cust1pay >> cust1purch >> 
                 cust2id >> cust2bal >> cust2pay >> cust2purch) {
      std::cout << 
        "Customer 1's Identification #: " << cust1id << "\n" <<
        "Balance: " < cust1bal << "\n" <<
        "Payments outstanding: " << cust1pay << "\n" <<
        "Purchases that have been made: " << cust1purch << 
        "Customer 2's Identification #: " << cust2id << "\n" <<
        "Balance: " < cust2bal << "\n" <<
        "Payments outstanding: " << cust2pay << "\n" <<
        "Purchases that have been made: " << cust2purch << "\n"; 
     } 
```

# javascript - Bootstrap Typeahead 转义？

> ID：13003892
> 
> 赞同：3
> 
> 时间：2012-10-22T01:20:40.390
> 
> 标签：javascript, jquery, twitter-bootstrap, bootstrap-typeahead, typeahead

所以我使用 Bootstrap typeahead 插件来显示类列表。它适用于大多数课程，但如果您单击驾驶员教育的下拉菜单，输入字段中的文本将显示为“驾驶员教育”。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:42:07.490

这是因为您将源数组定义为数据属性，因此使用 HTML 实体进行解释。反对时，当在JavaScript处理程序特殊字符中定义选项时，`'`当列表下拉列表下拉列表和之后在输入字段中单击时，将显示正常：

没有数据属性的 HTML：

```
<input type="text" data-provide="typeahead" id="stackoverflow"> 
```

jquery 构造函数：

```
$("#stackoverflow").typeahead({
   "source" : ["Driver's Education", "Toys'r'us Education"] //and so on
   //(,) rest of options, if any
}); 
```

# global-variables - 使用带有本地宏的 do-file

> ID：13003894
> 
> 赞同：1
> 
> 时间：2012-10-22T01:20:45.543
> 
> 标签：global-variables, stata, local-variables, stata-macros

`do`使用带有本地宏的文件时，我在 Stata 中收到以下错误：

```
clear 
capture log close

sysuse auto,clear 
log using stata,text replace

local varlist  price mpg rep78 weight length
reg 'varlist'
local close 
```

输出

```
local varlist  price mpg rep78 weight length

reg 'varlist'
invalid name 
```

我知道这是一个非常微不足道的问题，但我不确定这个错误来自哪里。

请注意，当我使用全局宏时，我没有收到错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T01:34:00.810

要取消注册本地宏，左引号应该是反引号。试试下面的。

```
regress `varlist' 
```

在大多数键盘上，反引号与波浪号（即~）位于同一键上。

# emacs - 在 org 模式下将内联代码导出为 html

> ID：13003895
> 
> 赞同：7
> 
> 时间：2012-10-22T01:20:51.957
> 
> 标签：emacs, org-mode

我在 org-mode 中想要的就像 Markdown 语言中的内联代码块语法`X <- 3`。我搜索并尝试（[参考](http://orgmode.org/manual/Structure-of-code-blocks.html)）：

```
src_R{X <- 3} 
```

inline 在 org-mode 中，但导出到 html (with `C-c``C-e``h`) 没有显示内联代码。其他代码块之类的`#+begin_src R`东西工作正常，但无论如何在导出时都会出现警告消息：

```
htmlize.el 1.34 or later is needed for source code formatting [14 times] 
```

这可能是原因吗？

更新：

感谢@LeVieuxGildas 的意见，我现在安装并加载了最新`htmlize.el`版本 1.43，并且在导出时没有收到任何错误消息。但仍然导出 html 不能显示内联代码部分。

系统：OS X 10.8.2；emacs mac 端口[https://github.com/railwaycat/emacs-mac-port](https://github.com/railwaycat/emacs-mac-port)；内置组织模式

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-29T22:10:56.473

我想我们在这里谈论两件事。如果您只想像 Markdown 中的反引号一样“显示代码”，请用等号包围您的内联代码，如下所示：

```
Write messages in JavaScript using: =console.log(x, y)= 
```

但是，使用`src_XYZ{abc}`尝试将其评估为代码并返回结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-08T16:43:03.027

快速而肮脏的解决方案是修改之前内联代码中的标头参数。

```
src_R[:exports code]{X <- 3} 
```

在我看来，内联代码比`=code=`或`~code~`因为如果您将 org 文件输出为 Latex 文件，它可以突出显示语法。

# objective-c - 操纵日期

> ID：13003897
> 
> 赞同：1
> 
> 时间：2012-10-22T01:21:16.053
> 
> 标签：objective-c, ios, nsdate

我是 iOS 新手，在编写方法时遵循 iOS 模式时遇到了一些麻烦。我试图找到一种使用objective-c在日期中增加值的简单方法。

考虑：

```
NSInteger incrementType = 1; // from 1 to 4, days, weeks, months, year
NSInteger incrementSize = 20 // the increment size
NSDate* date = ... // some date

    +(NSDate*)somename:(NSInteger)incrementSize type:(NSInteger)incrementType current:(NSDate*)date {

        NSCalendar* gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

        NSDateComponents* ateComponents = [[NSDateComponents alloc] init];
       // switch    
       [weekdayComponents setMonth:incrementSize];

        NSDate* newDate = [gregorian dateByAddingComponents:dateComponents toDate:date options:0];

        return newDate;

    } 
```

问题：

1.  我不确定逻辑是否正确。我在stackoverflow中找到了一段代码，我正在尝试修改它。
2.  如何为 incrementType 参数编写枚举？
3.  什么是好的方法签名？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T01:48:38.430

我之前也遇到过同样的挑战，我创建了一个简单的`NSDate`类别（使用 ARC）：

NSDate+Utils.h：

```
@interface NSDate (Utils)

-(NSDate *)addDays:(NSInteger)days weeks:(NSInteger)weeks months:(NSInteger)months years:(NSInteger)years;

@end 
```

NSDate+Utils.m:

```
#import "NSDate+Utils.h"

@implementation NSDate (Utils)

-(NSDate *)addDays:(NSInteger)days weeks:(NSInteger)weeks months:(NSInteger)months years:(NSInteger)years {
    NSDateComponents *offsetComponents = [[NSDateComponents alloc] init];
    [offsetComponents setDay:days];
    [offsetComponents setWeek:weeks];
    [offsetComponents setMonth:months];
    [offsetComponents setYear:years];
    NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    return [calendar dateByAddingComponents:offsetComponents toDate:self options:0];
}

@end 
```

我还创建了许多简单的方法，它们都调用了上面的方法（未使用的组件为零）。他们的签名是：

```
-(NSDate *)addDays:(NSInteger)days;
-(NSDate *)addWeeks:(NSInteger)weeks;
-(NSDate *)addMonths:(NSInteger)months;
-(NSDate *)addYears:(NSInteger)years; 
```

`addDays`是这样的：

```
-(NSDate *)addDays:(NSInteger)days {
  return [self addDays:days weeks:0 months:0 years:0];
} 
```

特别是，这些方法消除了`incrementType`枚举的需要。

# android - 启动一个新的活动 - android

> ID：13003898
> 
> 赞同：2
> 
> 时间：2012-10-22T01:21:36.077
> 
> 标签：android, undefined

我是Java和android编程的新手......这是我的问题，再次不确定我提供的信息是否足够。我想要做的是创建一个简单的两个活动应用程序......所以我有主要活动，用户点击一个按钮并启动一个新活动，设置一个新的布局。

我查看了以下两个网站：

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

[http://www.vogella.com/articles/Android/article.html#fragments_tutorial](http://www.vogella.com/articles/Android/article.html#fragments_tutorial)

两者都非常有用，但是当我尝试实施时遇到了问题。

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final Button buttonLoadProfile = (Button) findViewById(R.id.buttonLoadProfile);
    buttonLoadProfile.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent profileIntent = new Intent();
            profileIntent.setClass(getActivity(),LoadProfile.class);
//              setContentView(R.layout.profile_layout);
        }
    });
} 
```

我得到的错误是“方法 getActivity() 未定义新 View.OnClickListener(){} 类型”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T02:04:59.907

利用

```
 Intent profileIntent = new Intent( MainActivity.this, LoadProfile.class );
    startActivity(profileIntent); 
```

这将从内部解决封闭类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T01:27:43.160

您无法调用`getActivity()`新`View.OnClickListener()`接口，因为它没有其中描述的方法。而是执行以下操作：

```
Intent profileIntent = new Intent(this, LoadProfile.class); 
```

并添加：

```
startActivity(profileIntent); 
```

总结一下变化：

```
public void onClick(View v) {
            Intent profileIntent = new Intent(this, LoadProfile.class);
            startActivity(profileIntent);

        } 
```

# jquery - 如何让每个 Joomla 注册用户使用 jQuery 设置单独的可排序顺序？

> ID：13003901
> 
> 赞同：0
> 
> 时间：2012-10-22T01:21:47.130
> 
> 标签：jquery, jquery-ui-sortable, joomla2.5

[我计划使用http://jqueryui.com/sortable/#portlets](http://jqueryui.com/sortable/#portlets)在页面上创建一组可排序区域，并且理想情况下希望每个用户自定义顺序，然后在他们访问该站点时为他们保留原位。

创建可排序区域和要拖放到其中的项目非常容易。

我将如何完成保存订单以使其对每个用户都是唯一的？

我正在使用 Joomla 2.5，顺便说一句。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:26:15.150

查看序列化方法：[http ://api.jqueryui.com/sortable/#method-serialize](http://api.jqueryui.com/sortable/#method-serialize)

这将允许您获取并保存当前的排序顺序。

# wpf - DataGrid 中粗体更改的单元格

> ID：13003902
> 
> 赞同：1
> 
> 时间：2012-10-22T01:21:52.590
> 
> 标签：wpf, mvvm, wpfdatagrid, eventtrigger

`DataGrid`当数据源更新时，我想加粗更改的单元格。我发现这`<EventTrigger RoutedEvent="Binding.TargetUpdated">`是我需要的事件。但是，我无法`Storyboard`使用该`FontWeight`物业。

这是我正在尝试的：

```
<EventTrigger RoutedEvent="Binding.TargetUpdated">
    <BeginStoryboard>
        <Storyboard>
            <Int32Animation Duration="00:00:05" 
                Storyboard.TargetProperty="(Int32)(DataGridCell.FontWeight)"  
                From="400" To="700" />
        </Storyboard>
    </BeginStoryboard>
</EventTrigger> 
```

有人可以推荐如何修复上述问题或提出新的更聪明的方法来粗体更改单元格`DataGrid`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T07:41:19.950

这对我有用...

我有资源...

```
 <Style TargetType="TextBlock" x:Key="ElementStyle">
       <Style.Triggers>
           <EventTrigger RoutedEvent="Binding.TargetUpdated">
                <BeginStoryboard>
                   <Storyboard>
                      <ObjectAnimationUsingKeyFrames
                          Duration="00:00:01"
                          Storyboard.TargetProperty="(TextElement.FontWeight)">
                             <DiscreteObjectKeyFrame 
                                KeyTime="00:00:00" 
                                Value="{x:Static FontWeights.Thin}" />
                             <DiscreteObjectKeyFrame 
                                KeyTime="00:00:00.5" 
                                Value="{x:Static FontWeights.Heavy}" />
                             <DiscreteObjectKeyFrame 
                                KeyTime="00:00:01" 
                                Value="{x:Static FontWeights.UltraBold}" />
                           </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                     </BeginStoryboard>                                
               </EventTrigger>
         </Style.Triggers>
  </Style> 
```

将此分配给相关列，

```
 <toolkit:DataGridTextColumn 
        Binding="{Binding Quantity, NotifyOnTargetUpdated=True}" 
                          ElementStyle="{StaticResource ElementStyle}" /> 
```

**编辑**

因为上面的代码使默认值也加粗，我们有另一种方法来做到这一点，其中只有用户完成的更新才会触发单元格中的加粗。

**风格**

```
 <Style TargetType="Controls:DataGridCell" 
   BasedOn="{StaticResource {x:Type Controls:DataGridCell}}" 
   x:Key="CellBoldStyle">
<Style.Triggers>
    <EventTrigger RoutedEvent="Binding.SourceUpdated">
    <BeginStoryboard>
        <Storyboard>
        <ObjectAnimationUsingKeyFrames
            Duration="00:00:01"                                 Storyboard.TargetProperty
                                    ="(TextBlock.FontWeight)">
            <DiscreteObjectKeyFrame KeyTime="00:00:00.5" 
                                Value="{x:Static FontWeights.Normal}" />
            <DiscreteObjectKeyFrame KeyTime="00:00:01" 
                                Value="{x:Static FontWeights.Bold}" />
        </ObjectAnimationUsingKeyFrames>
        </Storyboard>
    </BeginStoryboard>
    </EventTrigger>
</Style.Triggers>
  </Style> 
```

**柱子**

```
 <Controls:DataGridTextColumn 
             Binding="{Binding Side, Mode=TwoWay, 
                               NotifyOnTargetUpdated=True, 
                               NotifyOnSourceUpdated=True}" 
             CellStyle="{StaticResource CellBoldStyle}" /> 
```

**限制**

1.  当您将虚拟化单元格滚动出滚动视图时，它们会失去粗体突出显示的效果。
2.  甚至您的 TextBox 也显示 Bold value 。（我不知道这是否对你有限制！）

# c# - 尝试使用 LINQ 在一系列 SQL LIKE 语句上模拟 SQL IN 语句

> ID：13003905
> 
> 赞同：1
> 
> 时间：2012-10-22T01:22:38.083
> 
> 标签：c#, sql, linq, union, concat

我正在尝试使用 LINQ (C#) 在一系列 SQL LIKE 语句上模拟 SQL IN 语句。我从一个`IQueryable<user>`尚未“过滤”的名为 Query 的对象开始。我刚开始在 Stack Overflow 上发帖，所以请耐心等待我 :)...

```
ObjectQuery<user> Context = this.Context.users;
IQueryable<user> Query = (IQueryable<user>)Context;
// create a BLANK clone of the FULL list (Query)
var QueryFinal = Query.Where(i => i.ID == 0);
foreach (String Item in userFilter.Name.Contains)
{
    // based on the FULL list (Query) return all records that apply to this item & then append results to the final list
    QueryFinal = QueryFinal.Concat(Query.Where(i => i.Name.Contains(Item)));
}
return QueryFinal.ToList(); 
```

我认为在每次迭代中，在 Query.Where 语句上返回的结果集将被附加到 QueryFinal 列表中，它确实如此，但由于某种原因，在每次后续迭代中，它似乎覆盖了所有先前的记录应该在最终列表中“保存以供保管”。我也尝试过使用 .Union 但仍然不是我希望的结果。它似乎返回的只是最后一个结果集，而不是所有附加的结果集。有人发现我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:36:08.047

由于延迟执行，当您调用 时`QueryFinal.ToList();`，它将使用最后一个值- 这是在循环`Item`中执行此类查询时非常常见的问题。`foreach`

在您的情况下，这样的事情可能会有所帮助：

```
foreach (String Item in userFilter.Name.Contains) 
{ 
    string currentItem = Item;
    // based on the FULL list (Query) return all records that apply to this item & then append results to the final list 
    QueryFinal = QueryFinal.Concat(Query.Where(i => i.Name.Contains(currentItem))); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T01:31:35.727

尝试这个：

```
var query = this.Context.users.Where(u => 
    userFilter.Name.Contains.Any(c => u.Name.Contains(c))
    ); 
```

# iphone - iPhone SDK 录制视频然后通过电子邮件发送

> ID：13003906
> 
> 赞同：1
> 
> 时间：2012-10-22T01:22:54.200
> 
> 标签：iphone, ios, video, sdk, record

我想知道是否有人可以告诉我如何录制视频并将其作为附件添加到 IOS 中的邮件作曲家。越具体越好。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:13:14.530

检查此线程以编程方式捕获视频 [有关如何在 iOs 4 中录制视频的基本描述](https://stackoverflow.com/questions/3173822/basic-description-on-how-to-record-video-in-ios-4)

查看有关 iOS 邮件编写器的本教程 [http://www.iostipsandtricks.com/using-apples-mail-composer/](http://www.iostipsandtricks.com/using-apples-mail-composer/)

Mail Composer 仅支持图片作为直接附件，其他格式需要添加为 nsdata

[在目标 c 中将文件作为附件发送](https://stackoverflow.com/questions/4302403/how-can-send-a-file-as-attachment-in-objective-c)

PS：如果你在没有谷歌搜索的情况下提问，人们可能会否决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T10:48:09.413

.h file

```
#import <MessageUI/MessageUI.h>
#import <MessageUI/MFMailComposeViewController.h>
#import <MobileCoreServices/MobileCoreServices.h>
#import <MediaPlayer/MediaPlayer.h>

@interface ViewController : UIViewController <MFMailComposeViewControllerDelegate, UIImagePickerControllerDelegate, UINavigationControllerDelegate>
{
    UIImagePickerController *imagePicker;
    NSURL *videoURL;
}

-(IBAction)submitVideo; 
```

.m file

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //set image picker
    imagePicker = [[UIImagePickerController alloc]init];
    NSArray *mediaTypes = [UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerSourceTypeCamera];
    imagePicker.mediaTypes = [mediaTypes filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"(SELF contains %@)", @"movie"]];
    imagePicker.delegate = self;
    imagePicker.videoMaximumDuration = 60.0;
    imagePicker.allowsEditing = YES;
    [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
}

-(IBAction)submitVideo
{
    [self presentViewController:imagePicker animated:YES completion:nil];
}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    videoURL = [info objectForKey:UIImagePickerControllerMediaURL];
    NSLog(@"movie captured %@", info);

    [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(sendMail) userInfo:nil repeats:NO];
    [self dismissViewControllerAnimated:YES completion:nil];
}

-(void)sendMail
{
    if ([MFMailComposeViewController canSendMail]) 
    {        
        MFMailComposeViewController *mail = [[MFMailComposeViewController alloc] init];
        mail.mailComposeDelegate = self;
        [mail addAttachmentData:[NSData dataWithContentsOfURL:videoURL] mimeType:@"video/MOV" fileName:@"Video.MOV"];
        [mail setSubject:@"video"];
        [mail setMessageBody:@"body" isHTML:YES];
        [mail setToRecipients:[NSArray arrayWithObject:@"myemail@jhd.com"]];
        [self presentViewController:mail animated:YES completion:nil];
    }else {
        NSLog(@"Device is unable to send the request in its current state.");
    }
} 
```

# arraylist - 基于数组的列表的插入操作分析（游标实现）

> ID：13003907
> 
> 赞同：0
> 
> 时间：2012-10-22T01:22:55.587
> 
> 标签：arraylist, big-o

因此，我正在为明天的算法分析考试而学习，并且正在阅读讲师的笔记和示例。只有一件事我不明白，就是这个问题：

> 问题：在基于数组的列表（游标实现）中的给定元素之后插入一个元素需要最坏的情况时间：
> 
> 答案：O(1)

就个人而言，我认为最坏的情况是光标位于列表的开头，因此在插入新元素之前必须将数组中的 N-1 项复制到下一个位置，因此它是 O(N)在最坏的情况下运行。

但是，当被问到这是不是笔误时，教练说不是。

这背后的原因是什么？对于所有未来的回答者，感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T01:39:36.283

假设我们必须插入元素“a”。好吧，它说**给定**一个元素，我们称之为'b'。这意味着您知道下一个元素是什么，我们称之为“c”。所以你所要做的就是将'a'的'next'元素设置为'c'。然后设置'b'的下一个元素等于'a'。此过程适用于任何元素。所以操作是常数时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T01:40:54.370

您可以使用数组来实现本质上是一个链表，其中数组中的每个元素都包含一个指向下一个元素索引的指针。

```
struct Element
{
    string item;
    int next;
} 
```

给定元素 A，您​​可以在恒定时间内在 A 之后插入一个新元素 B。

```
int indexOfA = ..
int indexOfB = (next free index)
B.next = A.next;
A.next = indexOfB; 
```

# html - 如何在列表项周围创建像边框一样的价格标签

> ID：13003909
> 
> 赞同：2
> 
> 时间：2012-10-22T01:23:32.840
> 
> 标签：html, css, styles, html-lists

如何在列表项的左侧创建带有自定义边框的边框？

像这样：

[http://www.dar-ling.com.php53-12.dfw1-1.websitetestlink.com/wp-content/themes/darling/img/filters.png](http://www.dar-ling.com.php53-12.dfw1-1.websitetestlink.com/wp-content/themes/darling/img/filters.png)

我考虑过使用 css 3 角度....但我无法实现内圆或孔...有边框...而且它可能比以某种方式使用图像更乏味。

我现在正在考虑用背景图像来做这件事......并且已经关闭了左侧的边框，并试图让一个图形将自己定位在项目的左边缘，但没有运气。我的项目都有不同的长度，它们在水平滑块中浮动左侧项目，使其更加复杂。

我还需要不同的悬停和活动样式，如图所示。

最后，我需要提供一个圆形或椭圆形，它可以保存与类别中项目数量相关的数字，并将其附加到样式列表项框的右上角。

这是我到目前为止的进展：

HTML：

```
<div class="filters">
                <div class="filters-inner">
                      <ul id="filters-slider" class="filters-list">
                    <li><a href="#">Darling</a></li>
                    <li><a href="#">Online Audience</a></li>
                    <li><a href="#">Digital Strategy</a></li>
                    <li><a href="#">Creative</a></li>
                    <li><a href="#">Mobile</a></li>
                    <li><a href="#">eCommerce</a></li>
                    <li><a href="#">Social Media</a></li>
                    <li><a href="#">Search</a></li>
                    <li><a href="#">Advertising</a></li>
                    <li><a href="#">Ramblings</a></li>
                    <li><a href="#">Ideas</a></li>
                    <li><a href="#">Newy New</a></li>
                    <li><a href="#">Freshy Fresh</a></li>
                    <li><a href="#">Search</a></li>
                    <li><a href="#">Advertising</a></li>
                    <li><a href="#">Ramblings</a></li>
                    <li><a href="#">Ideas</a></li>
                    <li><a href="#">Newy New</a></li>
                    <li><a href="#">Freshy Fresh</a></li>

                </ul>
          </div>
</div> 
```

CSS：

```
.filters {
background-color: #fff;
padding-top: 3px;
padding-bottom: 5px;
width: 1145px;
height: 45px;
float: left;
-webkit-box-shadow: inset 0 1px 0 rgba(0, 0, 0, 0.1), 0 -1px 10px rgba(0, 0, 0, 0.1);
  -moz-box-shadow: inset 0 1px 0 rgba(0, 0, 0, 0.1), 0 -1px 10px rgba(0, 0, 0, 0.1);
  box-shadow: inset 0 1px 0 rgba(0, 0, 0, 0.1), 0 -1px 10px rgba(0, 0, 0, 0.1);

}
 .filters-inner {
width: 1140px;
margin-right: auto;
margin-left: auto;
font-size: 11px;
overflow: hidden;
color: #999;
    -webkit-border-radius: 0;
      -moz-border-radius: 0;
      border-radius: 0;

 }
ul.filters-list {
text-align: center;
white-space: nowrap;
display: inline-block;
padding-top: 10px;
}
ul.filters-list li {
float: left;
list-style-type: none;
padding-top: 2px;
padding-right: 20px;
padding-bottom: 2px;
padding-left:20px;
background-color: #fff;
margin-right: 10px;
margin-left: 10px;
border-top-width: 1px;
border-right-width: 1px;
border-bottom-width: 1px;
border-left-width: 1px;
border-top-style: solid;
border-right-style: solid;
border-bottom-style: solid;
border-left-style: none;
border-top-color: #CCC;
border-right-color: #CCC;
border-bottom-color: #CCC;
border-left-color: #CCC;
background-image: transparent url(http://www.dar-ling.com.php53-12.dfw1-1.websitetestlink.com/wp-content/themes/darling/img/leftside_tag_up.png);
background-repeat: no-repeat;
background-position: left center;
}
ul.filters-list li:hover {
background-color: #ECECEC;
background: transparent url(http://www.dar-ling.com.php53-12.dfw1-1.websitetestlink.com/wp-content/themes/darling/img/leftside_tag_hover.png) no-repeat left center;
}ul.filters-list li a {
color: #666666;
font-weight: bold;
}
ul.filters-list li a:hover {
text-decoration: none;
}

div.sample {
padding-top: 200px;
} 
```

​</p>

有谁知道如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T03:35:32.013

这是一个适用于背景图像精灵的解决方案。简而言之，我将标签用于整个“价格标签”形状（用户更容易点击），并为悬停/活动状态使用背景冲刺。我还将“数量”数字包装在跨度标签中。

解决方案示例：http: [//jsfiddle.net/alexroper/zhrwA/34/](http://jsfiddle.net/alexroper/zhrwA/34/)

这是“价格标签”列表的 HTML：

```
<ul id="filters-slider" class="filters-list">
  <li><a href="#">Darling</a> <span class="tag-qty">103</span></li>
  <li class="active"><a href="#">Online Audience</a> <span class="tag-qty">9</span</li>
  <li><a href="#">Digital Strategy</a> <span class="tag-qty">20</span></li>
</ul> 
```

以下是构建“价格标签”的样式：

```
ul.filters-list {
  text-align: center;
  white-space: nowrap;
  display: inline-block;
  padding-top: 10px;
}
ul.filters-list > li {
  color: #666666;
  font-weight: bold;
  float: left;
  list-style-type: none;
  line-height: 26px;
  margin-right: 10px;
  margin-left: 10px;
  position: relative;
}
ul.filters-list > li > a {
  color: #666666;
  padding: 0 18px 0 24px;
  background: url('https://www.dropbox.com/s/n8e74eikwf82vks/tag_sprite.png?raw=1') 0 0 no-repeat;
  border-right: 1px solid #ccc;
  display: block;
}
ul.filters-list > li > a:hover,
ul.filters-list > li.active > a {
  text-decoration:none;
  background-position: 0 -30px;
} 
```

这些样式创建了“数量”数字：

```
.filters-list .tag-qty {
  position: absolute;
  top: -8px;
  right: -9px;
  border: 1px solid #bbb;
  line-height: 16px;
  display: inline-block;
  padding: 0 5px;
  background: #fff;
  -webkit-border-radius: 9px;
          border-radius: 9px;
     -moz-background-clip: padding; 
  -webkit-background-clip: padding-box; 
          background-clip: padding-box;
  -webkit-box-shadow: 0px 0px 3px 0px #ccc;
          box-shadow: 0px 0px 3px 0px #ccc;
}
.filters-list .active .tag-qty {
  background:#ebebeb;
} 
```

# javascript - Three.js Collada 示例：“空文件或不存在文件”

> ID：13003911
> 
> 赞同：0
> 
> 时间：2012-10-22T01:23:42.017
> 
> 标签：javascript, webgl, three.js

我试图让 Three.js Collada 加载器示例工作。我运行一个本地 http 服务器，因此我能够为纹理和模型加载图像，并且我已经能够运行所有其他示例，包括 .obj 加载器和搅拌机场景。问题是当我运行 collada loader 示例时，我收到一个错误：“ColladaLoader: Empty or non-existing file (./models/collada/pump/pump.dae)”

有没有其他人看过这个？有解决方法吗？谢谢！

编辑：我检查了文件是否存在，我尝试将它们移动到所有可能的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T18:35:48.773

我似乎使用的是旧版本的 three.js 库。尝试更新到当前版本 r.52。

这是解决此问题的拉取请求：[https ://github.com/mrdoob/three.js/pull/2451](https://github.com/mrdoob/three.js/pull/2451)

# python - 如何将多个项目设置为 GtkSelection 以进行 Treeview 拖放

> ID：13003915
> 
> 赞同：1
> 
> 时间：2012-10-22T01:24:53.107
> 
> 标签：python, drag-and-drop, gtk, gtk3, gtktreeview

我当前的项目使用 a`Gtk.TreeView`来显示 a 的内容，`ListView`每行有四个字段，两个字符串，an`int`和 a `boolean`。我正在尝试在 TreeView 中实现行的拖放重新排列。我不想简单地`TreeView.set_reorderable(True)`用于内置拖放，因为我想对模型中数据的插入和删除有一些控制，并且能够实现拖放操作的撤消/重做。我正在使用 Python 3.2 和 PyGObject 3。

我现在遇到的问题是弄清楚如何在我的`drag_data_get`方法中使用两个字符串设置选择数据对象，一个 int 和一个`bool`组成要拖放的行。我能够找到的所有示例代码都涉及带有单个列的树视图，其中字符串值被设置到选择中，如下所示：

```
def drag_data_get_data(self, treeview, context, selection, target_id, etime):
    treeselection = treeview.get_selection()
    model, iter = treeselection.get_selected()
    data = bytes(model.get_value(iter, 0), "utf-8")
    selection.set(selection.get_target(), 8, data) 
```

我用我的 TreeView 行之一中的数据设置选择对象的所有努力都失败了。我的模型中的`int`and`bool`值不能像字符串值一样编码，而且我找不到任何关于如何将多列 TreeView 行的所有值设置为单个选择对象的示例。谁能指出一些相关的例子或文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:55:16.923

您可以将 4 个值的元组编码为单个字符串。一个简单的方法是为此使用`json`：

```
import json
data = ["string", "string2", True, 20]
string_variable = json.dumps(data)
#
# now pass string_variable through drag and drop
#
returned = json.loads(string_variable) 
```

如果您不能选择导入，您也可以使用自己的编码方案`json`。

请仔细检查您以这种方式获得的数据。如果你不这样做，一些特制的字符串（比如说从另一个程序传递过来的）可能会使你的程序崩溃或更糟。

# bash - 使用 cut 通过用户输入剪切字段

> ID：13003919
> 
> 赞同：0
> 
> 时间：2012-10-22T01:25:21.607
> 
> 标签：bash, shell

我需要创建一个 bash 脚本，该脚本将从用户（输入）请求的数据文件中剪切一列。脚本需要提示一个字段，该字段将成为一个变量，用于剪切请求的字段。这是我尝试过的脚本之一：

```
$x = cut -c example_list
echo -n "What column would you like to cut: "
set x = $< 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:37:44.663

您可以使用以下方式获取用户输入`read`：

```
echo -n "What column would you like to cut: "
read col
cut -f $col ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T01:41:50.497

你可以使用`awk`脚本。它比`cut`. 像这样跑`awk -f script.awk file.txt`

内容`script.awk`：

```
BEGIN {
    printf "Enter a column: "
    getline col < "-"
}

{
    print $col
} 
```

或者，这是单线：

```
awk 'BEGIN { printf "Enter a column: "; getline col < "-" } { print $col }' file.txt 
```

# matlab - 带空格的右填充字符串 Matlab

> ID：13003921
> 
> 赞同：2
> 
> 时间：2012-10-22T01:25:24.527
> 
> 标签：matlab, padding

所以下面的代码可以用空格填充一个字符串，保持 max_len 的最大长度（包括空格和字符串）。

```
max_len = 20; 

spacing_arg = ['% ', max_len,'s'];

padded_string = sprintf(spacing_arg, str); 
```

现在如何使用正确的填充有效地做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T01:32:11.123

你是这个意思吗？

```
max_len = 20; 
spacing_arg = ['%-', num2str(max_len),'s'];
padded_string = sprintf(spacing_arg, str); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T01:34:56.770

```
max_len = 20;
padded_str = repmat(' ',1, max_len);
padded_str(1:min(20,length(str))) = str(1:min(20,length(str))); 
```

# python - 在文件中查找字谜

> ID：13003922
> 
> 赞同：0
> 
> 时间：2012-10-22T01:25:45.803
> 
> 标签：python, anagram

我想要一个程序在文件中查找字谜。例如：

```
>>>anagram('words.txt', 'top')
top
pot 
```

该文件将包含一长串没有空格的单词。

```
tapmatlamebrainfamelookcookkoolkoocnamemane 
```

这是我当前的代码：

```
def anagrams(filename, word):
    infile = open(filename, 'r')
    if not word:
        return ['']
    ret = []
    for i, d in enumerate(word):
        perms = anagrams(word[:i] + word[i+1:])
        for perm in perms:
            ret.append(d + perm)
    for i in ret:
        if i in infile:
            print (i)
        else:
            pass 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T01:35:20.940

这应该做我认为你想要它做的事情

```
def anagram(filepath, word):
    with open(filepath) as f:
        text = ''.join(line.strip() for line in file)
    for i in xrange(len(text)-len(word):
        prop = text[i:i+len(word)]
        if all(char in word for char in prop) and all(prop.count(char) == prop.count(word) for char in prop):
            print prop 
```

请注意，如果您的文件只有两个单词“hi”和“there”作为“hithere”，并且您查找“ith”的字谜，`"hit"`将被打印

# java - 可以在构造函数完成之前设置对象的引用吗？

> ID：13003924
> 
> 赞同：3
> 
> 时间：2012-10-22T01:26:04.667
> 
> 标签：java, constructor, thread-safety, jsr

JMM（Java 内存模型）可以自由地重新排序语句。

当然，这在处理多线程环境时尤其棘手。

JMM 规则明确指出`volatile`，`final`变量总是在构造函数完成之前完全初始化，并且当且仅当引用没有从构造函数中“逃脱”时。

这意味着任何并发线程都不会看到“正常”变量（非`final`和非）是最新的。`volatile`

乍一看，我的问题可能看起来很愚蠢，但实际上并非如此：

**是否在构造函数完成后**设置了任何对象的引用（完成并不意味着已经完成所有变量的初始化，而只是到达“构造函数”过程的结尾）？是否有任何 JSR 断言它的规则？或者它是否存在一个例外情况，在构造函数完成**之前**，任何引用都可以发送回客户端？

事实上，如果语句重新排序被认为如此自由，它也可能意味着对象的引用“发生在”构造函数的发送完成。因此，我们会遇到相同的“`this`逃跑”案例来避免。

简而言之，在构造函数完成后是否总是发送引用？

***搜索 JLS 后：***唯一与返回对象引用有关的地方是：（摘录[JSR-12.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)）

> 就在对新创建对象的引用作为结果返回之前，使用以下过程处理指示的构造函数以初始化新对象：

与 JMM 无关……因此可以确保构造函数完成总是在传递引用之前发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T01:58:21.157

在线程的上下文中，将设置引用。但是，JMM 允许在一个线程中设置共享变量，但尚未同步到另一个线程。

volatile 和 final 通过保证对变量的读取和写入的线程间同步来保证这一点。

# delphi - 备忘录并创建文件和文件夹？

> ID：13003927
> 
> 赞同：1
> 
> 时间：2012-10-22T01:26:20.293
> 
> 标签：delphi, tmemo

我是 Delphi 的新手，我是法国用户，很抱歉我的英语不好......

所以可以*创建一个用***TMemo**编写的文件吗？

```
test.txt
dir1/dir2/text.txt
dir3/ 
```

我的 TMemo 有 3 行，所以我想取第一行并在当前目录中创建文件*test.txt ..*

```
2nd line: create a folder

3rd line: create a folder again+files.txt

etc ... 
```

我想使用 mkdir 或 ForceDirectories 来创建目录和文件？ETC...

所以我的结论是自动化它。

你能帮帮我吗？

一个小图像，所以你可以看到：

![自动创建文件和文件夹](../Images/93e4b0c62b5c32bfef48dc55c1e5a986.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T06:05:29.123

使用 Program 和 ButtonClick 事件如果我正确理解了这个问题，这将

1.  在应用程序目录中创建一个空文本文件，其文件名与备注行 1 一致
2.  根据备忘录第 2 行和编辑在“基本目录”中创建文件夹
3.  在“基本目录”中再次按照备忘录第 3 行创建一个文件夹并清空 TextFile

![基本应用示例](../Images/2a5a1da1b39ccdb950a84cbbe996c4e0.png)

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Path: String;
  F: TextFile;
begin
  // Create File in current directory
  Path := ExtractFilePath(ParamStr(0)) + Memo1.Lines.Strings[0];
  if not FileExists(Path) then
  begin
    AssignFile(F, Path);
    Rewrite(F);
    //Writeln(F, 'text to write to file');
    CloseFile(F);
  end;

  // Create Directories
 Path := IncludeTrailingPathDelimiter(edPath.Text) + Memo1.Lines.Strings[1];
  if not DirectoryExists(Path) then
    ForceDirectories(Path);

  // Create Directory and File
  Path := IncludeTrailingPathDelimiter(edPath.Text) + Memo1.Lines.Strings[2];
  if not DirectoryExists(ExtractFilePath(Path)) then
    ForceDirectories(ExtractFilePath(Path));
      if not FileExists(Path) then
      begin
        AssignFile(F, Path);
        Rewrite(F);
        //Writeln(F, 'text to write to file');
        CloseFile(F);
      end;
end; 
```

显然需要更多的错误检查来确定路径是否有效以及创建的文件/目录等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:57:32.637

编辑：浏览器中的代码所以不知道它是否有效，但确实是一件简单的事情。

如果您想在保存数据之前显示数据，则应该只使用 TMemo，因为可视化控件的任务是显示某些内容。但是，如果您只想使用 TMemo 的 Items 属性来收集字符串，然后将它们保存到文件中，您应该使用 TStringList 代替：

```
var
  i: Integer;
  sl: TStringList;
begin
  sl := TStringList.Create;
  try       
    for i := 0 to Memo1.Lines.Count-1 do
      sl.Add(Memo1.Lines[i]); 
    sl.SaveToFile(sl[1]);
  finally
    sl.free;
  end;
end; 
```

您可能还喜欢这个帖子：[http ://www.tek-tips.com/viewthread.cfm?qid=678231](http://www.tek-tips.com/viewthread.cfm?qid=678231)

编辑2：

```
Memo1.Lines.SaveToFile(edit1.text + Memo1.Lines[0]); 
```

假设 Edit Control 名为 Edit1 并具有您的基本路径，并且 TMemo 的第一行具有文件名。您需要的另一位是一个`Event`，我的意思是如果您双击您的 TMemo 实例，它将是启动级联以保存文件的事件。

如您所见，它非常简单，还有其他方法，例如 SaveDialog 可以使它更容易。但希望这能回答你的问题。

# ruby-on-rails - Rails：如何将操作限制为仅限某些用户？

> ID：13003932
> 
> 赞同：0
> 
> 时间：2012-10-22T01:27:18.583
> 
> 标签：ruby-on-rails

我目前正在做一个上传图片的项目。有用户、相册和图片。我添加了一个友谊模型，这样人们就可以像社交网络一样互相交朋友。但是，我注意到我`<% if current_user.friends.include?(@user) %>`在视图中放了很多东西来检查我正在显示的页面的用户是否是登录客户端的朋友，因此允许他们拥有某些权限和表单等。是否有比用 if/else 语句污染我的观点更好的方法或地方吗？另外，我觉得我的方法不是很安全，因为有人总是可以手动输入 url 并弄乱他们不应该输入的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T02:32:50.913

您需要一个授权框架，例如[CanCan](https://github.com/ryanb/cancan)。

在功能文件中，您可以配置用户`can`，例如，查看某些内容或编辑某些其他内容，前提是该用户是所有者的朋友。然后在视图或控制器中，您只需检查用户是否有权执行适当的操作。

有关根据模型的详细信息设置能力的具体细节（即所有者是否是当前用户的朋友），请转到[此文档](https://github.com/ryanb/cancan/wiki/defining-abilities)并查找“条件哈希”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T02:47:45.357

考虑使用诸如[镶嵌访问](https://github.com/mosaicxm/mosaic-access)gem 之类的东西，它允许您将控制器和当前登录用户的特定操作列入白名单/黑名单。

# android - 将变量插入sql值

> ID：13003937
> 
> 赞同：0
> 
> 时间：2012-10-22T01:27:48.290
> 
> 标签：android, sqlite

```
String ans1= "Apple";

myDb.execSQL("INSERT INTO " +
               TABLE_NAME + " Values (ans1);"); 
```

它只是不这样工作..为什么？我需要一种简单的方法来做到这一点，我不想使用让像我这样的初学者感到困惑的课程，可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T01:35:05.177

试试这个例子：

```
public long insertValue(String value1, String value2) {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_VALUE1, value1);
        initialValues.put(KEY_VALUE2, value2);

        return mDb.insert(DATABASE_TABLE, null, initialValues);
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T01:39:08.237

您的插入语句应类似于

```
"INSERT INTO " + TABLE_NAME + " VALUES ('" + ans1 + "');" 
```

请注意包裹 ans1 的单引号，如果要将字符串值插入 SQL 表，则应将其包裹在单引号中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T01:50:00.850

您正在将变量的值插入到表中，因此您必须使用`"`（双床）变量 ANS，如下所示，

```
String ans1= "Apple";

myDb.execSQL("INSERT INTO " + TABLE_NAME + " Values ( '" + ans1 + "' );"); 
```

这与您没有在`"`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T01:32:29.843

值应该类似于

值（“+ans1+”）；

观察 ans1 在引号内。

注意：原始 sql 语句容易受到 sql 注入攻击。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T01:38:12.120

要将变量的 VALUE 注入 sql 语句，您需要在变量 + 变量之前结束引号 + 再次打开引号。对于字符串值，您还需要在变量周围添加单引号。

```
myDb.execSQL("INSERT INTO " +
           TABLE_NAME + " Values ('" + ans1 + "');"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-21T23:42:43.820

对我来说，我想使用从数据库中选择最后插入 id，然后将新数据插入数据库，选择查询用于该功能

```
pagesClass.getLastID('users', function(err, id){var id = id} 
```

或者您可以使用函数返回的直接 id

```
User.createUser = function (result){
var pagesClass = new PagesClass();
pagesClass.getLastID('users', function(err, id){
    conn.query("INSERT INTO users(id, name, email, password) VALUE('"+id+"', 'djsk"+id+"', 'yes@gmail.com"+id+"', 'bercove') ", function (err, res){
        if(err)
            result(null, err);
        else
            result(null, res);
    });
});
}; 
```

那些 id 到 name 列和 email 列显示了您如何也可以将变量添加到其他列

# jquery - 单页动态内容替换站点——如何单独突出当前内容链接？

> ID：13003939
> 
> 赞同：1
> 
> 时间：2012-10-22T01:28:10.577
> 
> 标签：jquery, css, navigation, highlight, current-page

我有一个单页站点，当我单击菜单时，内容将通过 jquery 替换。虽然这些项目没有链接到不同的页面，只是不同的 div，但我希望菜单像常规网站菜单一样具有 3 种活动状态：非活动、悬停和“当前内容”（如当前/活动页面，但它赢了'实际上并没有链接到另一个页面）。

我希望每个单独的链接在单击并处于“当前内容”状态时与其悬停颜色相匹配。（现在我只有一个将任何“当前”链接变为红色的 jquery 片段......如果可能的话，我想要更多控制）我希望这是有道理的......下面的代码！

HTML

```
<div id="sidebar">
    <nav>
    <ul id="nav">
        <li id="home"><a id="showdiv1">Home</a></li>
        <li id="about"><a id="showdiv2">About</a></li>
        <li id="demoReel"><a id="showdiv3">Demo Reel</a></li>
        <li id="contact"><a id="showdiv4">Contact</a></li>
    </ul><!-- /#nav -->
    </nav>
</div><!-- /#sidebar -->

<div id="content">
        <div id="div1">Blah blah!</div>
        <div id="div2" style="display:none;">Blardy blah!</div>
        <div id="div3" style="display:none;">Moo!</div>
        <div id="div4" style="display:none;">Shmeee!</div>
</div><!-- /#content --> 
```

CSS

```
#sidebar {
float:right;
width:30%;
}

    ul#nav li#home a:hover { color:red;}

    ul#nav li#about a:hover { color:green; }

    ul#nav li#demoReel a:hover { color:blue; }

    ul#nav li#contact a:hover { color:yellow; }

    .active a { color:red; }

#content {
    float:left;
    width:60%;
} 
```

jQuery

```
$(function() {

//Highlight active navigation link
$("ul").delegate("li", "click", function() {
    $(this).addClass("active").siblings().removeClass("active");
});

//Fade-in/hide selected navigation link
$('#showdiv1').click(function() {
    $('div[id^=div]').hide();
    $('#div1').fadeIn();
});
$('#showdiv2').click(function() {
    $('div[id^=div]').hide();
    $('#div2').fadeIn();
});

$('#showdiv3').click(function() {
    $('div[id^=div]').hide();
    $('#div3').fadeIn();
});

$('#showdiv4').click(function() {
    $('div[id^=div]').hide();
    $('#div4').fadeIn();
});

}) 
```

我想指出，我对这些东西很陌生，完全是自学的，所以请原谅错误。更重要的是，提前非常感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:39:18.823

而不仅仅是

```
.active a { color:red; } 
```

尝试更换

```
ul#nav li#home a:hover { color:red;}
ul#nav li#about a:hover { color:green; }
ul#nav li#demoReel a:hover { color:blue; }
ul#nav li#contact a:hover { color:yellow; } 
```

和

```
ul#nav li#home a:hover, ul#nav li#home.active a { color:red;}
ul#nav li#about a:hover, ul#nav li#about.active a { color:green; }
ul#nav li#demoReel a:hover, ul#nav li#demoReel.active a { color:blue; }
ul#nav li#contact a:hover, ul#nav li#contact.active a { color:yellow; } 
```

这样，每个链接在悬停时*或*其父“活动”时都会获得其特殊颜色。

# spring - 使用 javax.validation 进行复杂的 Spring 表单验证

> ID：13003940
> 
> 赞同：0
> 
> 时间：2012-10-22T01:28:27.853
> 
> 标签：spring, validation, spring-mvc, bean-validation

我想要完成的是：

验证 bean 支持的表单，例如使用以下类

```
public class PersonForm {

    @NotNull
    String name;

    List<Long> interests;

    // This attribute is not filled out in the form
    List<Interest> realInterests;
} 
```

因此，“姓名”和“兴趣”来自网络表单。“名称”有一些约束（NotNull），使用@Valid 可以完成它应该做的事情。

“interests”是一个兴趣 ID 列表。

在对“名称”进行初步验证后，我填写了 List 集合。

```
@CustomValidInterest
public class Interest {

    Long id;
    String name;
    boolean available;

} 
```

我想在之后验证这个结构。“@CustomValidInterest”是一个自定义验证注解。我可以使用验证组进行两阶段验证。

问题是，如果某些“兴趣”对象无效，我想将错误消息与“兴趣”字段（List< Long > 类型）相关联，因此当我检索表单错误时，错误与正确的字段相关联。

也许我试图以错误的方式使用验证。我试图避免进行大量手动填充错误的程序比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T06:20:01.453

回答我自己的问题，这是可以使用[PropertyEditors](http://static.springsource.org/spring/docs/2.0.x/reference/validation.html)实现的。表单可能会返回一个 List< Long >，但表单对象只能有一个 List < Interest >，它是使用所述属性映射器构建的。之后，该列表上的 @Valid 应该验证“兴趣”强制执行的任何约束。

# c++ - 在 G++ 4.7 的内联函数中定义时找不到 Lambda

> ID：13003941
> 
> 赞同：32
> 
> 时间：2012-10-22T01:28:31.567
> 
> 标签：c++, c++11, gcc4.7

我在头文件中定义了以下函数（它所在的库旨在仅作为头文件）：

```
typedef bool (*FieldComparer)(const std::string&, const std::string&);

inline FieldComparer
GetComparer(const std::string& query, string& separator)
{
    if (query.find('=') != std::string::npos) {
        separator = "=";
        return [](const string& s1, const string& s2) { return s1 == s2; };
    }
    else if (query.find('^') != string::npos) {
        separator = "^";
        return [](const string& s1, const string& s2) { return boost::starts_with(s1, s2); };
    }
    else if (query.find('*') != string::npos) {
        separator = "*";
        return [](const string& s1, const string& s2) { return boost::contains(s1, s2); };
    }
    else if (query.find('!') != string::npos) {
        separator = "!";
        return [](const string& s1, const string& s2) { return s1 != s2; };
    }
    else
        throw std::invalid_argument("Search: could not find operator in query string.");
}

template <class Description>
inline void
Search(Table<Description>& table, const std::string& query,
        std::function<void(const std::string&)> callback, int begin, int limit)
{
    string separator;
    auto comparer = GetComparer(query, separator);

    ... do stuff with comparer ...
} 
```

我正在尝试编译一个包含此文件的小型简单程序，但在链接时我得到了对所有 lambda 的未定义引用。当我说简单时，有一个 CPP 可以编译但无法链接。这是第一个错误：

```
obj/sample.o: In function `DataModel::GetComparer(std::string const&, std::string&)::{lambda(std::string const&, std::string const&)#1}::operator bool (*)(std::string const&, std::string const&)() const':
/home/julien/workspace_dma/src/DataModel/Search.h:23: undefined reference to `DataModel::GetComparer(std::string const&, std::string&)::{lambda(std::string const&, std::string const&)#1}::_FUN(std::string const&, std::string const&)' 
```

自从我升级到 GCC 4.7.2 以来，它一直在发生，它曾经在 GCC 4.6.2 中运行良好（Ubuntu 版本以防万一）。虽然我知道解决问题的解决方法，但我想知道我做错了什么或没有正确理解。由于lambas 在内联函数内部，因此它们应该在使用该函数的任何翻译单元中定义。

- 编辑 -

还有一点值得注意：示例程序中没有使用`Search`and函数。`GetComparer`

`Search`用于`Table<Description>`（我无法发布完整课程）的成员函数：

```
template <class Description>
void Table<Description>::Search(const std::string& query,
        std::function<void(const std::string&)> callback, int begin, int count)
{
    DataModel::Search(*this, query, callback, begin, count);
} 
```

但两者都不是从 sample.cpp 文件中调用的。该文件测试其他`Table`不相关的功能。如果我在成员中评论调用，代码会编译并链接。（我需要成员函数，它是虚拟的，它是上述类型擦除类的一部分`Table`）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T19:19:25.497

已向 GCC 团队提交了一份[错误报告，其中一位开发人员已](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=55015)[在 trunk 上确认了该问题](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=55015#c3)。

同时，正如 LucDanton 在聊天中指出的那样，声明函数`static`将解决问题。

# python - 在 Python 中循环遍历图像的每个像素的更快方法？

> ID：13003949
> 
> 赞同：14
> 
> 时间：2012-10-22T01:30:15.053
> 
> 标签：python, image, loops, time, numpy

我需要遍历 2560x2160 2D numpy 数组（图像）的每个像素。我的问题的简化版本如下：

```
import time
import numpy as np

t = time.clock()
limit = 9000
for (x,y), pixel in np.ndenumerate(image):
    if( pixel > limit )
        pass
tt = time.clock()
print tt-t 
```

在我的电脑上完成这需要大约 30 秒的时间。（Core i7，8GB ram）有没有更快的方法来使用内部“if”语句来执行这个循环？我只对超过一定限制的像素感兴趣，但我确实需要它们的 (x,y) 索引和值。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-22T01:31:53.480

使用布尔矩阵：

```
x, y = (image > limit).nonzero()
vals = image[x, y] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T02:02:09.930

首先，尝试使用vectorize计算：

```
i, j = np.where(image > limit) 
```

如果您的问题不能通过矢量化计算来解决，您可以加速 for 循环：

```
for i in xrange(image.shape[0]):
    for j in xrange(image.shape[1]):
        pixel = image.item(i, j)
        if pixel > limit:
            pass 
```

或者：

```
from itertools import product
h, w = image.shape
for pos in product(range(h), range(w)):
    pixel = image.item(pos)
    if pixel > limit:
        pass 
```

numpy.ndenumerate 很慢，通过使用普通的 for 循环并通过`item`方法从数组中获取值，您可以将循环速度提高 4 倍。

如果您需要更快的速度，请尝试使用 Cython，它将使您的代码与 C 代码一样快。

# c# - .NET 中的 XmlDocument.LoadXml() 是否有 Java 等效项？

> ID：13003950
> 
> 赞同：4
> 
> 时间：2012-10-22T01:30:18.890
> 
> 标签：c#, java, .net, xml, xmldocument

在`.NET`C# 中，当尝试将 a 加载`string`到中时`xml`，您需要使用`XmlDocument`type from`System.Xml`并执行以下操作：

**例如：**

```
string xmlStr = "<name>Oscar</name>";
XmlDocument doc = new XmlDocument();
doc.LoadXml(xmlStr);
Console.Write(doc.OuterXml); 
```

这看起来很简单，但我该怎么做`Java`呢？是否可以像上面那样直接、简短和简单地加载 a`string`并避免为此实施其他方法？`xml`

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T02:13:20.910

试试这个：

```
DocumentBuilderFactory documentBuildFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder doccumentBuilder = documentBuildFactory.newDocumentBuilder();
Document document = 
 doccumentBuilder.parse(new ByteArrayInputStream("<name>Oscar</name>".getBytes())); 
```

您可以通过以下方式遍历`Oscar`：

```
String nodeText = document.getChildNodes().item(0).getTextContent() ;         
System.out.println(nodeText); 
```

要转换回来：

```
TransformerFactory tFactory =  TransformerFactory.newInstance();
Transformer transformer = tFactory.newTransformer();
DOMSource domSource = new DOMSource(document);
//to print the string in sysout, System.out
StreamResult streamResult = new StreamResult(System.out);
transformer.transform(domSource, streamResult ); 
```

要以字符串形式获取结果：

```
DOMSource source = new DOMSource(document);
ByteArrayOutputStream outStream = new ByteArrayOutputStream();
StreamResult result = new StreamResult(outStream);
transformer.transform(source, result);
String resultString = new String( outStream.toByteArray());
System.out.println(resultString); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T07:50:19.150

您可以选择 Java 中的树模型 - DOM、XOM、JDOM、DOM4J。许多人（包括上面的 Singh）默认使用 DOM，因为它包含在 JDK 中，但它可能是最糟糕的，主要是因为它是最古老的（它是在命名空间出现之前发明的），而且它也试图这样做很多（HTML、事件处理等，以及 XML）。我建议使用 JDOM2。如果您查看 Javadoc 以找到从输入流构建 JDOM2 文档的方法，应该不难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T01:45:31.630

Java 有大量用于处理 XML 的库。除了标准 Java 安装中包含的许多使用 XML 的类之外，还有许多其他可用的开源库。这里有几个选项。查看文档，看看哪一个满足您的需求：

[XStream 库](http://xstream.codehaus.org/)非常快速且易于使用。我已经将它用于 XML 序列化，我对此非常满意。如果您不想使用外部库，请尝试[此处演示的](http://www.developerfusion.com/code/2064/a-simple-way-to-read-an-xml-file-in-java/)[javax.xml.parsers.DocumentBuilder](http://docs.oracle.com/javase/7/docs/api/javax/xml/parsers/DocumentBuilder.html)类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T02:05:30.170

如果要在 Java 中解析字符串`str`，`Document`可以执行以下操作：

```
 DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = dbf.newDocumentBuilder();
        InputStream is = new ByteArrayInputStream(str.getBytes("UTF-8"));
        return docBuilder.parse(is); 
```

# c# - C# 解析 XML 和 XElement

> ID：13003952
> 
> 赞同：1
> 
> 时间：2012-10-22T01:31:02.357
> 
> 标签：c#, xml

我有这个代码。这里还有一个 XML 示例。对于任何混淆，我深表歉意

```
<object type="node" >
    <property name="id" value="1" />
    <property name="name" value="ossvc06_node1" />
      <property name="port_id" value="50050768014062AC" />
      <property name="port_status" value="active" />
      <property name="port_speed" value="4Gb" />
  <property name="port_id" value="50050768013062AC" />
  <property name="port_status" value="active" />
  <property name="port_speed" value="4Gb" />
  <property name="port_id" value="50050768011062AC" />
 <property name="port_status" value="active" />
 <property name="port_speed" value="4Gb" />
 <property name="port_id" value="50050768012062AC" />
 <property name="port_status" value="active" />
 <property name="port_speed" value="4Gb" />
 <property name="hardware" value="8G4" />
 <property name="iscsi_name" value="iqn.1986-03.com.ibm:2145.ossvc06.ossvc06node1" />
 <property name="iscsi_alias" value="" />
 <property name="failover_active" value="no" />
 <property name="failover_name" value="ossvc06_node2" />
 <property name="failover_iscsi_name" value="iqn.1986-       .com.ibm:2145.ossvc06.ossvc06node2" />
 <property name="failover_iscsi_alias" value="" />
 <property name="front_panel_id" value="115286" />
</object> 
```

在输入文件中有两个“节点”类型的对象，每个对象都有不同的属性标签值。

在这段代码中，我在传入的 XML 中查找所有类型为“node”的对象。其中有 2 个。'var nodes' 语句计算正确。在调试器中，我可以看到两个 XElement，它们的类型和元素列表中的元素似乎是正确的。但是，获取元素并将它们分配给列表的语句具有来自 XML 中“节点”类型的两个对象的 ChildElements，我不知道为什么。

```
//load the input file
 XDocument xdoc = XDocument.Load(_InputFile);

//get the object of type 'node'

//this code gives the results expected
// in the debugger each XElement appears to have the proper value and childElements
var nodes = from node in xdoc.Descendants("object")
                        where node.Attribute("type").Value == "node"
                        select node;

foreach (XElement nodelement  in nodes)
{  

    // problem happens here, the child elements from both  nodes get assigned to the list 
    List<XElement> nodeles = nodelement.Elements().ToList();
    Node node = NodeFactory(nodelement);

    // now assign the node to the correct IO group
    var iogrp = SVCClusters[0].IOGroups.Where(io => io.Name == node.IOGroupName);
    if (iogrp.FirstOrDefault().FirstNode == null) { iogrp.FirstOrDefault().FirstNode = node; }
    else { iogrp.FirstOrDefault().SecondNode = node; }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:46:40.957

你能在控制台应用程序中运行它并告诉我你得到了什么吗

```
 static void Main(string[] args)
    {
        XDocument xdoc = XDocument.Parse("<root><object type=\"node\" ><property name=\"id\" value=\"1\" /><property name=\"name\" value=\"ossvc06_node1\" /></object><object type=\"node\" ><property name=\"id\" value=\"2\" /><property name=\"name\" value=\"ossvc06_node2\" /></object></root>");

        var nodes = xdoc.Descendants("object").Where(node => node.Attribute("type").Value == "node").ToList();

        foreach (XElement nodelement in nodes)
        {
            List<XElement> nodeles = nodelement.Elements().ToList();

            foreach (var node in nodeles)
                Console.WriteLine(node);
        }
    } 
```

您应该有 4 行输出到控制台

编辑 - -

最初的问题是使用了 XPath 表达式“//property[@name='port_id']”。这从文档根目录查询，而不是从当前节点查询。

将 XPath 更改为 "property[@name='port_id'] 或 ".//property[@name='port_id']"

# c++ - 期望“{”错误？连同预期的未指定 ID 错误？

> ID：13003954
> 
> 赞同：-1
> 
> 时间：2012-10-22T01:31:34.603
> 
> 标签：c++

好的，我知道这比您想要的要多，但我确实无法在以下代码中找到问题

```
#include <iostream>
using namespace std ;

int main(void)
{
   int score1, score2;

   PrintInfo() ;

   score1 = GetScore(); //  Call function GetScore, to obtain a value for score1.

   if (RangeError()) ;  //  IF score1 is out of range, print an error message.
   {
       cout << "Sorry you entered an invalid score." << endl ;
   }
   else  // THIS IS LINE 46, THIS IS THE ELSE IT IS TALKING ABOUT
   {
       score2 = Getscore ; // Call GetScore a second time, to obtain a value for score2.

       if (RangeError ()); // IF score2 is out of range, print an error message.
       {
           cout << "Sorry you entered an invalid score." << endl ;
       }
       else  // ELSE, using a call to function maximum within a cout
       {     // statement, print the maximum score.
           cout << maximum() << endl ;
       }
   }

    return 0;
} 
```

那里有很多，我知道，但主要问题似乎在我的第二个问题上。无论出于何种原因，我不断收到以下错误：

lab05a.cpp:46: 错误：在 'else' 之前需要 `}'

lab05a.cpp：在全球范围内：

lab05a.cpp:46: 错误: 'else' 之前的预期 unqualified-id

我知道这与括号有关，但我找不到任何问题！另外：对于缺少行号，我深表歉意，我们没有使用允许它们的编辑器。我本可以添加它们，但是为了简洁起见，我删除了很多不相关的文本，并且添加它们不会为错误提供正确的行号。因此，我将显示第 46 行的位置。我删除了大部分声明，因为问题似乎并不在于其中。请帮助我，这是我第一次遇到无法靠自己解决的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:32:49.877

```
if (RangeError()) ;
{ 
```

应该

```
if (RangeError())
{ 
```

# php - 类属性作为类名

> ID：13003965
> 
> 赞同：0
> 
> 时间：2012-10-22T01:33:36.880
> 
> 标签：php, class, properties, static

```
$this->property = 'SomeClass';

$x = new $this->property();     // works
$x = $this->property::create(); // fails (parse error) 
```

这是PHP中的错误吗？

可以使用属性调用静态方法，而不将值分配给新变量，而是使用该变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:37:26.960

利用`call_user_func`

```
$x = call_user_func(array($this->property, 'create')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T02:15:55.267

它已经作为一个错误输入了几个月并且仍处于打开状态，所以我会选择是。

[https://bugs.php.net/bug.php?id=61397](https://bugs.php.net/bug.php?id=61397)

相似地，

[https://bugs.php.net/bug.php?id=54095](https://bugs.php.net/bug.php?id=54095)

# ruby-on-rails - RoR 2.3.11 和 Rspec 1.2.9 ...向现有项目添加测试：测试存在但它们被忽略

> ID：13003967
> 
> 赞同：0
> 
> 时间：2012-10-22T01:33:39.883
> 
> 标签：ruby-on-rails, rspec, rspec-rails

嘿，这就是我所在的地方：

```
$ spec spec/

Finished in 0.002031 seconds

0 examples, 0 failures 
```

然而。我已经完成了我编写的前几个测试并将它们放在 /spec/controllers/citations_controller_spec.rb

并在上面的规范中添加了一个 puts 来验证它实际上是在使用：

```
spec spec/ 
```

这是 citations_controller_spec.rb 的内容（它有现有的测试）：

```
require 'spec_helper'

describe CitationsController do
  describe "GET 'home'" do
    it "should be successful" do
      get 'home'
      response.should be_success
    end
    it "should have the right title" do
      get 'home'
      response.should have_tag("title",
                               "Ruby on Rails Tutorial Sample App | Home")
    end
  end

  describe "GET 'contact'" do
    it "should be successful" do
      get 'contact'
      response.should be_success
    end
    it "should have the right title" do
      get 'contact'
      response.should have_tag("title",
                               "Ruby on Rails Tutorial Sample App | Contact")
    end
  end

  describe "GET 'about'" do
    it "should be successful" do
      get 'about'
      response.should be_success
    end
    it "should have the right title" do
      get 'about'
      response.should have_tag("title",
                               "Ruby on Rails Tutorial Sample App | About")
    end
  end
end 
```

但如第一个代码位所示......

```
0 examples, 0 failures 
```

..所以有人碰巧知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T04:13:39.690

尝试

```
spec spec/controllers/citations_controller_spec.rb 
```

运行一个测试文件。或者

```
rake test 
```

运行所有测试。您现在看到任何测试点或示例吗？

# c - UART DMA Tx/Rx 架构

> ID：13003971
> 
> 赞同：2
> 
> 时间：2012-10-22T01:34:35.973
> 
> 标签：c, embedded, serial-port, dma, uart

> **可能重复：**
> [UART ISR Tx Rx 架构](https://stackoverflow.com/questions/13520272/uart-isr-tx-rx-architecture)

我现在正在使用 TI micro，它包括一个 DMA UART 驱动程序和一个支持并行任务的操作系统。UART驱动的功能包括：

*   静态无效 HalUARTInitDMA(void);
*   静态无效 HalUARTOpenDMA(halUARTCfg_t *config);
*   静态 uint16 HalUARTReadDMA(uint8 *buf, uint16 len);
*   静态 uint16 HalUARTWriteDMA(uint8 *buf, uint16 len);
*   静态无效 HalUARTPollDMA(void);
*   静态 uint16 HalUARTRxAvailDMA(void);
*   静态无效 HalUARTSuspendDMA(void);
*   静态无效 HalUARTResumeDMA(void);

我正在尝试与另一个外围设备通信，该外围设备接受以回车符终止的消息，然后以回车符响应消息。

我很好奇构建这种类型的通信状态机的最佳方法是什么。我的问题是为 UART 端口设计回调函数，使其...

1.  不会挂起系统等待响应。（某种超时）
2.  如果响应被读取得太快，它会将响应连接在一起
3.  回车将表示消息的结束

基本理论是这样的：

```
//send messsage to peripheral
HalUARTWriteDMA("tx\r",4);

//wait a little bit for the device to process the message

//start reading from the peripheral    
do {
    //how many bytes are at the RX port?
    int len = HalUARTRxAvailDMA();

    //Read those bytes
    HalUARTReadDMA(msg, len);

    //append the rx msg to the buffer
    strcat(rxbuf, msg)

    //does the response contain a CR?
} while(strchr(rxbuf, 0x0D)); 
```

这个想法有几个明显的缺陷。我希望有人可以就如何进行这种类型的交流分享一些想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:35:25.293

如果您打算阻止等待消息的线程，那么您所描述的设计存在一个直接问题 - 这是使用可变大小的消息和 a`CR`作为分隔符。

我想这`HalUARTReadDMA()`旨在阻止调用线程，直到`len`收到字节，因此您显然无法可靠地使用它来阻止可变长度消息。

代码看起来像（做一些假设）：

```
while (1) 
{
    static const size_t bufferSize = sizeof(Message_t);
    uint8_t buffer[bufferSize];

    // blocks until message received 
    unsigned len = HalUARTReadDMA(buffer, bufferSize);

    if (len == bufferSize)
        processMessage(buffer);
} 
```

对于不涉及轮询的 DMA 使用可变大小消息的问题，没有特别好的或可靠的解决方案 - 除非 DMA 控制器可以为您检测消息结束分隔符。
如果您无法更改消息格式，则最好使用中断驱动的 IO，在该 IO 中阻止接收单个消息字节 - 特别是在数据速率相对较低的 UART 的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:20:57.417

除非您的 DMA 驱动程序具有接受缓冲区指针队列的功能，可以在接收到 CR 时生成中断并自行移动到下一个缓冲区指针，否则您将陷入迭代 rx 数据，寻找铬。

如果您必须迭代数据，您也可以在“经典”ISR 中执行此操作，从 rx FIFO 中逐个获取字符并将它们推入缓冲区，直到收到 CR。

然后，您可以将缓冲区指针排队到一个合适的循环队列中，从另一个“空”缓冲区的循环池队列中获取另一个缓冲区以获取下一条消息，发出信号量，以便将要处理消息的线程运行并退出通过操作系统从您的 ISR 中获取，以便立即执行重新安排。

rx 线程可以使消息出列、处理它，然后将其重新排队到池队列以供 ISR 重用。

使用 strchr() 连续搜索完整缓冲区以查找 CR 可能不是特别有效或容易 - CR 可能位于 DMA 缓冲区的中间，并且您需要自己参与挖掘部分缓冲区的数据复制。

.

# python - 在字符串中找到大写字母。没有循环。只有 if 语句和字符串方法 python

> ID：13003975
> 
> 赞同：-2
> 
> 时间：2012-10-22T01:34:54.747
> 
> 标签：python, string

标题中的问题。我必须能够确定 raw_input 语句中是否有大写字母。我不能使用循环。只是 if 和字符串方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T01:57:40.133

没有循环 - 使用递归

```
has_capital = lambda s:s[0].isupper() or has_capital(s[1:]) if s else False 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T01:36:56.253

如果您将仅包含小写字母的字符串转换为小写，它将匹配自身。因此，以下将为您提供大写字符串的 TRUE。

```
mystring.lower() != mystring 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T02:01:28.530

使用集合交集运算符

```
import string
if set(raw_input()) & set(string.ascii_uppercase):
  # hello 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T01:52:45.123

```
filter(lambda x:x.isupper(),my_string) 
```

尽管引擎盖过滤器将是一个循环结构

也许……或者

```
set(my_string) - set(my_string.lower()) 
```

转换为 set 也循环遍历 my_string 中的所有字母（至少我认为）

# scrollbar - BorderContainer 内 titlePane 上的 Dojo 滚动条

> ID：13003995
> 
> 赞同：1
> 
> 时间：2012-10-22T01:37:45.497
> 
> 标签：scrollbar, dojo

我在borderContainer 中有一个titlePane，我试图让titlePane 在其中有一个滚动条。当您拖动拆分器以使 titlePane 更小时，滚动条会出现，但滚动条会从底部滑落（看起来它与 titlePane 标题的偏移高度相同）。有没有办法让整个滚动条都在视图中？

```
<body class="claro">
<div id="container" data-dojo-type="dijit.layout.BorderContainer" >
    <div id="center" data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region: 'center', layoutPriority: 1">
            center
        </div>
        <div id="bottom" data-dojo-type="dijit.layout.ContentPane" data-dojo-props="region: 'bottom', splitter: 'true'">
             <div class="titlePane" data-dojo-type="dijit.TitlePane" data-dojo-props="title: 'tilepane'">
                 <p>content</p>
                 <p>content</p>
                 <p>content</p>
                 <p>content</p>
                 <p>content</p>
                 <p>content</p>
                 <p>content</p>
                 <p>content</p>
            </div>
    </div> 
 </div>    
</body> 
```

​</p>

这是CSS

```
html, body {
    width: 100%;
    height: 100%;
    margin: 0;
    overflow: hidden;
}

#container {
    width: 100%;
    height: 100%;
}
#bottom {
     padding: 0;
     height: 100px;
}    
.claro .dijitTitlePaneContentOuter {
    height:100%;
    overflow:auto;
} 
```

这是一个工作示例[http://jsfiddle.net/mMTdU/1/](http://jsfiddle.net/mMTdU/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T04:35:33.720

我能够解决这个问题，所以希望如果其他人遇到类似问题会有所帮助。您可以轻松地扩展该类并覆盖由borderContainer 调用的resize 函数。

```
dojo.addOnLoad(init);

function init() {
    dojo.safeMixin(dijit.byId("titlePane"), {
        resize: function() {
            this.inherited(arguments);

            this.hideNode.style.height = (dojo.marginBox(this.domNode).h - dojo.marginBox(this.titleBarNode).h).toString() + "px";
        }
    });

    // set initial height
    var titlePane = dijit.byId("titlePane");
    titlePane.hideNode.style.height = (dojo.marginBox(titlePane.domNode).h - dojo.marginBox(titlePane.titleBarNode).h).toString() + "px";
}​ 
```

我们需要计算和设置 titlePane 中内容 div 的高度，而不是仅仅给它一个 100% 的高度。您可以在更新的 jsfiddle 链接[http://jsfiddle.net/mMTdU/2/中看到它正在工作](http://jsfiddle.net/mMTdU/2/)

# java - LWJGL 游戏没有正确结束

> ID：13003996
> 
> 赞同：5
> 
> 时间：2012-10-22T01:37:52.713
> 
> 标签：java, opengl, lwjgl

我目前对 LWJGL 有一个简单的问题。如果我要运行我的游戏，它实际上会正确运行所有内容并且似乎正确关闭，但是当我查看任务管理器时，我注意到我的游戏在关闭后占用了 25% 的 CPU（大约 2-实际运行时为 3%），我想我可能在结束应用程序时遗漏了一些东西。

我的主要功能代码：

```
public static void main(String[] args){
    try {
        init();
    }catch(LWJGLException e){
        System.out.println("LWJGLException\n");
        e.printStackTrace();
    }
    try{
        gameLoop();
    }catch(Exception ex){
        ex.printStackTrace();
    }finally{
        cleanup();
    }
} 
```

清理：

```
public static void cleanup(){
    System.out.println("Running cleanup code.");
    Display.destroy();
    System.exit(0);
} 
```

它确实设法读取“运行清理代码”。我的问题是我不知道是否需要做其他事情来清除所有进程。这个游戏也是使用单线程的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:34:53.250

我认为您的代码完全没有问题。如果您的问题是我认为的问题，您将无法立即解决它。

以下是您应该问自己的一些基本问题。您使用的是什么操作系统？您的 Java 版本和/或 LWJGL 版本是什么？（更新它们可能会有所帮助）您是否听说过/或玩过名为 Minecraft 的游戏？如果您使用的是 Linux 并且在关闭 Minecraft 时看到了这个，那么这可能是您遇到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T11:26:31.647

我在 64 位 Windows 上遇到了同样的问题。发生运行时异常（或任何其他未捕获的异常）时，应用程序尚未关闭。可能原因是在一个独立线程中引发了一个异常，该异常影响了关闭显示窗口，但所有其他线程仍在工作。我想出了蛮力解决方案：覆盖 Thread 方法。

```
 Thread.setDefaultUncaughtExceptionHandler(new UncaughtExceptionHandler() {
         @Override
         public void uncaughtException (Thread thread, final Throwable ex) {
            ex.printStackTrace();
            Display.destroy();
            System.exit(0);
         }});

    new LwjglApplication(new StartScreen(application), cfg); 
```

# php - 内省用户生成的 PHP 代码

> ID：13003997
> 
> 赞同：0
> 
> 时间：2012-10-22T01:38:01.900
> 
> 标签：php, emulation, eval

我正在开发一个测试用户对 PHP 知识的应用程序。用户将输入代码并提交它，应用程序将检查它是否有错误。这不仅包括解析和运行时错误，还包括对问题的响应的适当性。

我能想到的最好方法是在用户代码上运行 eval() 并检查结果，即如果要求用户创建一个包含三个给定水果的数组，然后他输入：

```
$fruits = array (
'orange',
'banana'
); 
```

我希望能够查看该数组并确定其大小不是 3 并在测验中给出反馈。

这是一个非常简单的例子，但它是一般的想法。

不用说在表单上接受任意 PHP 代码并无条件地运行 eval() 的想法是纯粹的自杀，但它似乎比在文本上运行一堆正则表达式来检查其有效性更有意义。那将是一个不完美的解决方案。

我想知道我是否可以做些什么来真正收紧事情，以免人们将恶意代码放入答案中。我注意到 PHP 安全模式现已绝迹，但有什么类似的吗？我基本上只需要一个 PHP 模拟器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T01:45:11.740

我认为，PECL 扩展[runkit](http://php.net/runkit)可以满足您的需求。