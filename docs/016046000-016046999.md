# StackOverflow 问答 16046000-16046999

# php - PHP SQL 查询的案例与 MySQL 数据库的案例不同。不能使用 lower_case_table_names = 1

> ID：16046000
> 
> 赞同：0
> 
> 时间：2013-04-16T20:01:10.343
> 
> 标签：php, mysql, linux

我在 Windows 上的 WAMP 服务器上用 PHP 编写的网站存在问题，问题是，它现在正在部署在 Linux 服务器上。该网站非常大，我已经以这种方式完成了所有大写的所有查询：

```
"SELECT COLUMN FROM TABLE" 
```

并且数据库中的大多数表/列都使用不同的大小写（例如，列）。

我无法使用`lower_case_table_name=1`，因为服务器上还有其他 PHP 网站会受到负面影响。有没有办法让我将所有数据库的表和列都转换为大写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:12:08.857

你已经更改了名称，`columns`如果`tables`你的数据库不是那么大，你可以试试这个

```
select concat('rename table ', column_name, ' to ' , lower(column_name) , ';') 
from information_schema.columns where table_schema = 'your_schema_name'; 
```

并重命名或更改以`case`获得更多帮助[查看](http://dev.mysql.com/doc/refman/5.0/en/identifier-case-sensitivity.html)和[lower_case_table_names](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_lower_case_table_names)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:03:00.780

ALTER TABLE yourtablename 重命名为 YOURTABLENAME；

# ajax - 页面加载后 JSF2 ajax 调用

> ID：16046005
> 
> 赞同：1
> 
> 时间：2013-04-16T20:01:27.203
> 
> 标签：ajax, jsf-2

我们是weblogic10.3.7中的JSF2。

我们需要在页面加载完成后自动触发 ajax 调用。

可能这可以从 javascript document.ready 函数触发。

有什么更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:44:51.200

看看 PrimeFaces 的[RemoteCommand](http://www.primefaces.org/showcase/ui/ajax/remoteCommand.xhtml)。你可以`RemoteCommand`在你的`document.ready`函数中调用它来执行一些 bean 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:39:37.980

尝试以下不包含任何外部库的代码。

xhtml代码：

```
<script type="text/javascript">
        var startCalls=false;
        $(document).ready(function (){
            clickButton();
            startCalls=true;            
        })
        function clickButton(){
            document.getElementById('btn_test').click();
        }
    </script>
    <h:commandButton id="btn_test" value="Test"
                     actionListener="#{testBean.increaseCount}"
                     style="display: none">
        <f:ajax execute="btn_test" render="pnl_update_area"/>

    </h:commandButton>
    <h:panelGroup id="pnl_update_area">
        This is called #{testBean.clickCount} times
        <script type="text/javascript">
            if(startCalls){

                setTimeout('clickButton()',200);                
            }
        </script>
    </h:panelGroup> 
```

JSF 代码：

```
Integer clickCount=1;

public Integer getClickCount() {
    return clickCount;
}

public void setClickCount(Integer clickCount) {
    this.clickCount = clickCount;
}

public void increaseCount(ActionEvent event) {
    clickCount++;
} 
```

# android - 哪些 android 版本允许用户设置精细的开发者选项？

> ID：16046007
> 
> 赞同：0
> 
> 时间：2013-04-16T20:01:47.270
> 
> 标签：android, android-activity

我可以看到 4.2.x 允许用户修改开发人员选项。除其他外，他可以选中“不保留活动”选项。

第一个为用户提供此功能的 Android 版本是什么？

谷歌搜索是徒劳的。似乎所有热门都与解锁 Android 4.2.x 中的开发人员选项有关，并且没有提及之前的版本。

# java - 如果它在评论或字符串中，知道如何“不”计算集合中的关键字吗？

> ID：16046008
> 
> 赞同：1
> 
> 时间：2013-04-16T20:01:48.250
> 
> 标签：java

我需要让这个程序计算 .java 源代码文件中的关键字（它确实如此），但它还需要分解任何注释或字符串中的关键字。任何帮助将不胜感激。！！！

```
import java.util.*;

import java.io.*;

public class CountKeywords {

public static void main(String[] args) throws Exception {

Scanner input = new Scanner(System.in);
System.out.print("Enter a Java source file: ");
String filename = input.nextLine();

File file = new File(filename);
if (file.exists()) {
  System.out.println("The number of keywords in " + filename
    + " is " + countKeywords(file));
}
else {
  System.out.println("File " + filename + " does not exist");
}
}

public static int countKeywords(File file) throws Exception {

// Array of all Java keywords + true, false and null

String[] keywordString = {"abstract", "assert", "boolean",
    "break", "byte", "case", "catch", "char", "class", "const",
    "continue", "default", "do", "double", "else", "enum",
    "extends", "for", "final", "finally", "float", "goto",
    "if", "implements", "import", "instanceof", "int",
    "interface", "long", "native", "new", "package", "private",
    "protected", "public", "return", "short", "static",
    "strictfp", "super", "switch", "synchronized", "this",
    "throw", "throws", "transient", "try", "void", "volatile",
    "while", "true", "false", "null"};

Set<String> keywordSet =
  new HashSet<String>(Arrays.asList(keywordString));
int count = 0;

Scanner input = new Scanner(file);

while (input.hasNext()) {
  String word = input.next();
  if (keywordSet.contains(word))
    count++;
}

return count;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:04:44.193

**回答**

不要重新发明轮子。尝试那里的众多 java 代码解析器之一。像[https://code.google.com/p/javaparser/](https://code.google.com/p/javaparser/)

否则你需要实现一个完整的解析器。

**为什么？**

除非你理解解析，否则你会错过一些东西。例如，让我们看看这个算法，看看它是否有效。

1.  忽略“和”之间的所有代码。
2.  忽略 /* 和 */ 之间的所有代码
3.  忽略//后一行的所有代码

看起来很容易？然后你会遇到 "hello \"world"。好吧好吧。我们将考虑转义字符串。

将 1 更改为忽略 " 和 " 之间的所有代码，但忽略字符串中的 \"。

好的，这可以工作......直到 "hello \\"; private String.....好吧，我们只需要考虑......

这就是您滚动自己的解析器时发生的情况。您通常通过反复试验来完成，而不是查看整个解析语法并正确执行。使用来自已阅读该语言的整个 BNF 并构建了一个经过良好测试的解析器的解析器。从长远来看，它会拯救你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:18:06.647

我要做的是`skip()`在每个标记之后使用该方法来告诉它跳过注释和字符串。一个可能的模式是：

`(/\*.*\*/)|(//.*?\n)|("([^"]|\\")*")`

当您将反斜杠和引号转换为要传递给的字符串时，您必须确保正确转义它`Pattern`。

请注意，这仍然无法正确解析所有 Java，因为您很可能没有考虑到您可以使用没有空格的标记 ( `true|false`) 或 Unicode 转义码 ( `\u002a\u002f`)。

# c# - C#，在teamcity构建后部署windows任务和服务

> ID：16046015
> 
> 赞同：1
> 
> 时间：2013-04-16T20:02:07.767
> 
> 标签：c#, deployment, windows-services, scheduled-tasks, teamcity

我们有一个由多个项目组成的解决方案。有些项目是 windows 任务，有些是 windows 服务，有些是在远程服务器上运行的 mvc 网站。在这台服务器上，我们目前正在将 TeamCity 实现为 CI 服务器，以自动化我们的构建和部署。到目前为止，这些项目都部署在同一台服务器上。构建、测试步骤等工作正常，但我不确定如何部署任务和服务。所有关于这个主题的教程（至少我见过的）都只涉及网站的部署。

最明显的方法是运行一个powershell脚本的构建后步骤，该脚本正在卸载当前正在运行的windows服务，删除旧服务，复制新的dll并再次启动服务。Windows 任务文件可以简单地直接替换为新版本。

但是，我不喜欢这个解决方案，感觉很生硬，如果部署服务器是远程的，可能很难实现。

有没有人对如何进行部署有更好的建议？

祝你今天过得愉快！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:09:41.523

尝试查看 Octopus depoy：[http](http://octopusdeploy.com/) ://octopusdeploy.com/ 。您可以轻松地将其与 TeamCity 集成。它具有明星/停止服务的能力等等。此外，它使用 nuget 包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:54:51.683

您也可以通过 Web 部署工具部署 windows 服务。您所要做的就是使用（卸载/安装和启动/停止服务）和（部署服务）提供程序创建`manifest.xml`文件。`runCommand``dirPath`

我的清单文件也部署了数据库和网站，如下所示：

```
<sitemanifest>
  <dbDacFx path='$dbSource' />
  <runCommand path='$presync' waitInterval='30000'/>
  <dirPath path='$winSource' />
  <runCommand path='$postsync' waitInterval='30000'/>
  <IisApp path='$webSource' managedRuntimeVersion='v4.0'/>
  <setAcl path='$webSource' setAclResourceType='Directory'/>
  <setAcl path='$webSource' setAclResourceType='Directory' setAclUser='anonymousAuthenticationUser'/>
</sitemanifest> 
```

它是由 Psake 中的构建脚本生成的，但您可以按照自己的意愿进行操作。

我写了两篇关于这个主题的博客，但都是捷克语的。

*   [一切都在一个包装中](http://rarous.net/weblog/441-jeden-balicek-na-vsechno.aspx)
*   [包参数化](http://rarous.net/weblog/442-parametrizace-balicku.aspx)

希望，有东西可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T02:42:05.200

Inedo 的 BuildMaster[可以使用](http://inedo.com/buildmaster)[BuildMaster TeamCity Extension](http://inedo.com/support/kb/1031/integrating-jetbrains-teamcity-with-buildmaster)在 TeamCity 停止的地方继续工作。有一个免费版本可能会满足您的要求。

当我们使用 BuildMaster 构建/部署 BuildMaster 时（在构建安装程序之前），我们必须解决自己的问题，如果您查看 BuildMaster 详细信息（Inedo.com > Support > Specifications > BuildMaster，您可以准确地看到我们如何停止/部署/启动 Windows 服务。

# java - 如何在 WEKA API 中查看所有分类实例

> ID：16046023
> 
> 赞同：0
> 
> 时间：2013-04-16T20:02:41.687
> 
> 标签：java, classification, weka, prediction

我想查看我的分类实例。

我试过这样的事情：

```
for(int i = 0; i < dataSet.size(); i++) {
    double pred = nowy.classifyInstance(dataSet.instance(i));
    double actual = dataSet.instance(i).classValue();
    double[] dist = nowy.distributionForInstance(dataSet.instance(i));

    if (pred != actual)
    {
        System.out.print((i+1));
        System.out.print(" - ");
        System.out.print(dataSet.instance(i).toString(dataSet.classIndex()));
        System.out.print(" - ");
        System.out.print(dataSet.classAttribute().value((int) pred));
        System.out.print(" - ");

        if (pred != dataSet.instance(i).classValue())
            System.out.print("no");
        else
            System.out.print("yes");
        System.out.println();

    }

} 
```

但它似乎效果不佳，因为正确/错误分类的实例数量与统计输出不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T05:54:34.027

您还可以使用 WEKA API 中提供的评估类一次性测试所有实例。

```
Instances trainData = ds.getDataset(); //get training dataset

SMO sm = new SMO(); //build classifier

sm.buildClassifier(data); //train classifier

Instances testData = ds.getDataSet(); //now get the test set

Evaluation eval = new Evaluation(data); //for recording results

eval.evaluateModel(sm, testData);

System.out.println(eval.toMatrixString()); //gives the confusion matrix for predictions 
```

# python - Python/Django 检查对象是否在 2 个列表中

> ID：16046027
> 
> 赞同：0
> 
> 时间：2013-04-16T20:03:01.977
> 
> 标签：python, django, django-views, django-templates

配置文件有标签。我正在渲染`profile_tags`和的列表`top_tags`。我将如何检查 top_tags 中的每个标签是否在 profile_tags 中？

我在我的观点中尝试过的：

```
has_tag = False
profile_tags = profile.tags.all()
top_tags = Tag.objects.all()
for top in top_tags:
    if top in profile_tags:
        has_tag = True 
```

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:05:34.363

你可以做：

```
has_tag = set(list(top_tags)).issubset(list(profile_tags)) 
```

这为您提供了布尔标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:09:08.083

将它们都转换为集合并检查 set of 是否是 set of`top_tags`的**子**集`profile_tags`：

```
In [14]: profile_tags=[1,2,3,4]

In [15]: top_tags=[1,2,3]

In [16]: s1=set(profile_tags)

In [17]: s2=set(top_tags)

In [18]: s2.issubset(s1)
Out[18]: True 
```

# asp.net - 为独立的 ASPX 页指定 .NET Framework 版本

> ID：16046031
> 
> 赞同：0
> 
> 时间：2013-04-16T20:03:07.487
> 
> 标签：asp.net, version

目标 .NET Framework 版本是否可以不在 web.config 中设置，而是直接在以下页面中设置？：

```
<%@ Page Language="C#" Debug="true" %>

<%@ Import Namespace="System.Net" %>
<%@ Import Namespace="System.IO" %>
..............

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<script runat="server">
.......
</script>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
........
</head>
<body>
.........
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:04:05.747

不，版本还与 IIS 中的应用程序池相关联，该应用程序池设置在 IIS 中的***应用程序***级别，而不是页面级别。

# html - 如果屏幕宽度低于指定量，如何响应式修剪 div 的左侧和右侧？

> ID：16046034
> 
> 赞同：0
> 
> 时间：2013-04-16T20:03:22.147
> 
> 标签：html, css, responsive-design

我正在寻找修剪 div 的左侧和右侧，假设它是一个 500px x 500px 方形 div，当您缩放浏览器时。本质上，它应该在您缩放时在左侧和右侧平等地修剪这个 div当浏览器小于 1300px 时，它应该开始出现。

```
<div class="trim-my-left-and-right"></div>

.trim-my-left-and-right {
    width: 500px;
    height: 500px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:14:09.130

我不确定您所说的“修剪左侧和右侧”是什么意思。`body`但是您可以通过根据标签或其他容器的宽度设置百分比宽度来创建响应式宽度。`min-width`如果您想将其保持在特定宽度以上，您可以应用属性。但是，您可能需要调查`min-width`和的浏览器兼容性`max-width`。

```
div#container {
  position:relative;
  width:100%;
  height:100%;
  padding:0px;
  max-width:700px;
  margin:0px auto;
  background-color:#AAA;
}

.trim-my-left-and-right {
  position:relative;
  width:50%;
  height: 500px;
  background-color:#000;
  margin:0px auto;
} 
```

[http://jsfiddle.net/9ypKp/](http://jsfiddle.net/9ypKp/)

# c# - 如何从父属性设置触发器以设置子属性

> ID：16046036
> 
> 赞同：1
> 
> 时间：2013-04-16T20:03:23.520
> 
> 标签：c#, .net, wpf, .net-4.0, datatrigger

我一直在这个数据触发器上转圈，所以它不起作用......

我有一个带有默认阴影边框的按钮。但是，我想创建一个 dep 属性来切换它。然而，我从来没有达到设置效果的地步。

```
<Style x:Key="RoundedButton" TargetType="{x:Type Button}">
<Setter Property="Template">
 <Setter.Value>
  <ControlTemplate TargetType="ctrls:RoundedButton">
   <Grid>
    <Border>
     <Border.Style>
      <Style TargetType="ctrls:RoundedButton">
       <Style.Triggers>
        <Trigger Property="IsDropShadowVisible" Value="True">
         <Setter Property="Effect">
          <Setter.Value>
           <DropShadowEffect ShadowDepth="1"/>
          </Setter.Value>
         </Setter>
        </Trigger>
       </Style.Triggers>
      </Style>
     </Border.Style> 
```

这是基于一个按钮，但实现为自定义用户控件...这是遗留代码...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:28:15.360

我在这里的作品在新的 WPF 窗口中执行此操作。除了您在此处看到的之外，没有其他代码隐藏。

```
<Window.Resources>
    <Style TargetType="{x:Type local:ShadowButton}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:ShadowButton}">
                    <Button Name="Button"></Button>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsDropShadowVisible" Value="True">
                            <Setter TargetName="Button" Property="Effect">
                                <Setter.Value>
                                    <DropShadowEffect ShadowDepth="1"/>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>

<!-- snip code -->

<local:ShadowButton Height="10" Width="10" IsDropShadowVisible="true"/> 
```

代码隐藏：

```
public class ShadowButton : Button
{
    public DependencyProperty IsDropShadowVisibleProperty =
        DependencyProperty.Register("IsDropShadowVisible", typeof(Boolean), typeof(ShadowButton), new PropertyMetadata(false));
    public Boolean IsDropShadowVisible
    {
        get { return (Boolean)GetValue(IsDropShadowVisibleProperty); }
        set { SetValue(IsDropShadowVisibleProperty, value); }
    }
} 
```

# ssh - 使用多个帐户的 OpenShift rhc 设置

> ID：16046038
> 
> 赞同：95
> 
> 时间：2013-04-16T20:03:28.260
> 
> 标签：ssh, installation, openshift, ssh-keys, openshift-client-tools

我在 Openshift 平台上有两个帐户。如何设置我的计算机以便我可以使用它们来管理它们`rhc`？我在命令行参数中找不到任何相关选项。

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2013-04-16T21:37:02.333

命令行`rhc`工具带有全局选项`-l, --rhlogin LOGIN`。你有两个选择：

1.  `-l`在每个命令中使用标志来指定登录名：

    ```
    rhc app create <appname> <cartridge> [-l <login1/login2>] 
    ```

2.  `rhc setup -l LOGIN`在会话之间运行。完成从一个帐户管理应用程序后，您可以通过运行来结束它的会话`rhc account logout`。

    ```
    rhc setup -l <login1> # First account's login
    rhc app create <appname> <cartridge>
    rhc logout
    rhc setup -l <login2> # Second account's login
    rhc app create <appname> <cartridge>
    rhc logout 
    ```

当您可以`rhc setup`命令时，用户名信息将存储在`.openshift/express.conf`文件中；因此，当您想切换帐户时需要再次运行它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-17T16:48:21.120

命令行还支持`--conf`- 您传递文件的位置。您始终可以通过 shell 脚本为命令设置别名。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-24T12:39:22.043

相当老的问题，但我使用了另一种似乎更舒服的解决方案（至少对我来说） - 环境变量`OPENSHIFT_CONFIG`。

`OPENSHIFT_CONFIG`环境变量可[用于](https://lists.openshift.redhat.com/openshift-archives/dev/2013-May/msg00024.html)覆盖 OpenShift 配置名称（默认为“express”）。设置时，使用 rhc 执行的操作指的是`~/.openshift/${OPENSHIFT_CONFIG}.conf`（而不是`~/.openshift/express.conf`）。

要切换到另一个 OpenShift 帐户，可以使用以下命令（Bash）：

```
export OPENSHIFT_CONFIG=thenewone 
rhc apps    //apps on the new account

...
unset OPENSHIFT_CONFIG
rhc apps    //apps on the default account 
```

已使用 rhc 1.37.1 进行验证，但应适用于 2013 年 5 月之后发布的任何版本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-24T18:28:57.633

`rhc setup`首次运行该命令时，将`~/.openshift/express.conf`创建该文件，其中包含初始服务器配置的设置。当您添加另一台服务器或使用该选项`rhc setup`再次运行该命令时，将创建该文件，其中包含每个服务器的设置。您可以编辑此文件以对服务器配置进行任何更改，这优先于初始文件。`--server``~/.openshift/servers.yml``~/.openshift/express.conf`

```
rhc server use server.name.example.co
rhc server use Server_Nickname 
```

更多信息[在这里](https://access.redhat.com/documentation/en-US/OpenShift_Online/2.0/html/User_Guide/chap-Multiple_OpenShift_Servers.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-01T11:39:43.970

您可以使用该命令配置多个帐户`server add`，然后您可以使用`--server`选项在所有后续命令中提供服务器昵称。例如：

```
rhc server add -l <first_account> --nickname srv1 <first-server>
rhc server add -l <second_account> --nickname srv2 <second-server> 
```

您可以添加选项，例如`-p, --use-authorized-tokens`禁止提示密码和令牌生成。`--insecured`如果需要也可以

```
rhc server use srv1
rhc server use srv2 
```

上面的命令执行某种初始化。完成上述两个步骤后，您就可以使用多个帐户了。

现在在您的`rhc`命令中，您需要指定应该使用哪个服务器。例如：

```
rhc app-show -n <domain> <app> --server srv1 
```

上面的命令将显示应用程序的详细信息`srv1`。因为`srv2`你可以运行

```
rhc app-show -n <domain> <app> --server srv2 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-06T10:09:34.933

使用`rhc setup -l <login>`. 这`login`是您注册的 OpenShift 帐户的`email address`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-25T11:34:52.860

在 Windows 上，像我一样运行这些命令并做出响应（用`<`和表示`>`）：

```
rhc setup -l login@domain.mail.com 
```

```
Enter the server hostname: <openshift.redhat.com>
Password: <**********><Press Enter>
Generate a token now? (yes|no) y<Press Enter>
Generating an authorization token for this client ... lasts about 1 month
Saving configuration to C:\Users\UserName\.openshift\express.conf ... done 
```

您的私有 SSH 密钥文件应设置为仅供您自己阅读。要进行此更改，请运行：

```
chmod 600 C:\Users\<Your Username>\.ssh\id_rsa 
```

您的客户端工具现在已配置。

然后，您可以长时间使用控制台命令，并为您的 OpenShift 登录生成令牌。

# javascript - 由于未启用 javascript，爬网网站失败

> ID：16046041
> 
> 赞同：0
> 
> 时间：2013-04-16T20:03:40.793
> 
> 标签：javascript, web-crawler

我使用 Abot 进行爬行，

我想抓取一个似乎阻止任何未启用 javascript 的请求的网站，它是一个 php 页面，我得到一个“请激活 javascript 以查看此站点”。而不是真实的网站

页面如何知道是否启用了 javascript？（在你看来——你认为我能克服这个问题吗？）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:06:38.447

除非您使用启用了 javascript 的客户端抓取该站点，否则您将不走运。

# javascript - 将空跨度作为元素的第一个子元素

> ID：16046046
> 
> 赞同：0
> 
> 时间：2013-04-16T20:03:58.500
> 
> 标签：javascript, dom, expression

当下面的脚本执行时，它应该插入一个空的 span 元素作为“my_list li”列表项中的第一个子元素......

```
*+html .my_list li{
    *zoom:expression(this.runtimeStyle.zoom=\"1\",
    this.insertBefore(document.createElement(\"span\") ).className=\"span\")
} 
```

但是，当我在 Internet Explorer 中检查输出时，它仍然看起来好像元素已附加到元素的末尾。

这是表达式之前的内容：

```
<li>Some element</li> 
```

这是表达式执行后我想要实现的目标：

```
<li><span class="span"></span>Some element</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:24:11.517

我会用 jQuery 做这个 jQuery $("span").addClass("span");

# django - 为什么这个 django 模板标签无法显示？

> ID：16046052
> 
> 赞同：0
> 
> 时间：2013-04-16T20:04:21.517
> 
> 标签：django, django-templates

我有一个位于 catalog/templatetags/catalog_tags.py 的模板标签，它看起来像这样：

```
register = template.Library()

@register.inclusion_tag("tags/navigation.html")
def nav_links():
    flatpage_list = FlatPage.objects.all()
    return {'flatpage_list': flatpage_list } 
```

我有一个 catalog.html，它有`{% load catalog_tags %}`, 来加载那个标签，后面跟着一个包含标签用于我的导航，`{% include "tags/navigation.html" %}`.

navigation.html 包含以下内容：

```
{% with flatpage_list as pages %}
{% for page in pages %}
    <a href="{{ page.url }}">{{ page.title }}</a>
{% endfor %}
{% endwith %} 
```

但是 flat_pages 列表没有出现在我的导航部分中。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:12:40.003

如果我理解正确，根据您当前的状态，您在`catalog.html`模板中有类似的内容：

```
{% load catalog_tags %}
 .....
{%  include "tags/navigation.html" %} 
```

这段代码所做的只是*呈现*“tags/navigation.html”模板，仅此而已。因此，您的自定义模板标签根本不会被击中。要修复它，您应该替换`include`为`nav_links`：

```
{% load catalog_tags %}
 .....
{% nav_links %} 
```

请参阅[Django 文档](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#howto-custom-template-tags-inclusion-tags)以供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:17:41.193

不确定这是否只是复制粘贴错误但未`return {'flatpage_list': flatpage_list`正确关闭`return {'flatpage_list': flatpage_list}`

这也可能更适合[上下文处理器](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-TEMPLATE_CONTEXT_PROCESSORS)吗？

* * *

编辑：阅读其他答案后，我意识到您正在尝试做什么，当您使用`{% include ... %}`标签时，您似乎只想填充`flatpage_list`

# c# - 使用 .NET 在服务器端生成 Flash 对象

> ID：16046055
> 
> 赞同：5
> 
> 时间：2013-04-16T20:04:36.583
> 
> 标签：c#, asp.net, actionscript-3, flex4

如何使用 .NET 在服务器端创建一组 Flash 对象（例如按钮），然后将它们作为二进制文件流式传输？

本质上，我想减少客户端从基本原语创建对象所花费的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T12:24:13.513

这可以通过 Flash Remoting 完成。过去我使用过 FluorineFX ( [fluorinefx.com](http://www.fluorinefx.com/) )，但很久没有更新了。

您可能还想了解 WebORB for .NET ( [http://www.themidnightcoders.com/products/weborb-for-net/overview.html](http://www.themidnightcoders.com/products/weborb-for-net/overview.html) )，它是 Flash Remoting 的另一种解决方案。与 FluorineFX 不同，WebORB 仍受支持。但是，完整版的 WebORB 不是免费的，除非您与其中一位销售人员交谈，否则他们似乎不会告诉您它的成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:33:03.803

`Flex Compiler`可以从文件创建 SWF 代码，`.as`但您需要将它安装在您的服务器上。然后可以将 SWF 压缩为二进制文件，因此它应该适合您的需要。

下一步是将生成的 SWF 的 URL 在`<embed>`代码中或通过`ExternalInterface`. 然而...

我建议不要试图重新发明轮子。如果您希望 SWF 具有更小的大小和缓存支持，更简单的方法是将二进制配置文件（使用`<embed>`/ `ExternalInterface`）发送到 SWF 应用程序，该文件是 gzip 压缩的 JSON 或 XML，具有根据其数据生成所需 UI 的功能。您可以使用 Flash、Flex 或 OpenSource 组件（例如 MinimalComps） - 甚至可以编写自己的组件以在您想要的大小中完全拥有您想要的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T00:36:41.630

检查此链接：[AS3 向 ASP 传递和获取数据](https://stackoverflow.com/questions/1624136/as3-passing-and-getting-data-to-asp?rq=1)

它告诉您可以通过 URLLoader 将数据传递到 ASP.NET 服务器。'您可以在 processASP 方法中将响应读取为 e.target.data。'

同样从页面：URLLoader也可以用来发送数据到asp页面（服务器）。

```
var ldr:URLLoader = new URLLoader();
var data:URLVariables = new URLVariables();
data.something = "someData";
data.somethingElse = "moreData";
var request:URLRequest = new URLRequest("url.asp");
request.data = data;
request.method = URLRequestMethod.POST;//or GET
ldr.addEventListener(Event.COMPLETE, onLoad);
//listen for other events
ldr.load(request); 
```

不过，服务器必须是一个实时流媒体页面。

# c++ - Add information from multiple files into one file C++

> ID：16046063
> 
> 赞同：1
> 
> 时间：2013-04-16T20:04:53.987
> 
> 标签：c++, file, copy

I am trying to add the contents of multiple files over to another file, but I am having trouble. It seems that every time I add the contents of one file, it overwrites the contents of the last file I added. Here is my code:

```
 cout << "Enter Directory Location" << endl;
  string name;
  getline(cin, name);
  cout << "Directory: " << name << " Used" << endl;
  name += "/title";   

  int x = 1;  // I am assuming that the file number will simply start at 1
  int y;
  cout << "Enter Number of Files" << endl;
  cin >> y;  

  while(x <= y)
  {
        stringstream sstm;
    sstm << name << x;
    name = sstm.str();
    name += ".png";
    ifstream binfile(name.c_str(),ios::in | ios::binary);

        myfile << binfile.rdbuf();
    x++;    
  } 
```

As always, I appreciate any help!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T20:22:40.280

You must use `ios::app` to configure the file stream in "append" mode.

```
using namespace std;
ofstream foo ("foo.bin", ios::out | ios::app | ios::binary); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:30:13.213

is it append needed in binfile, I think the problem is in the myfile, i dont see any declaration here, but I suppose it is ofstream, and there should be ios::append

# c# - sql错误未返回给调用者

> ID：16046065
> 
> 赞同：3
> 
> 时间：2013-04-16T20:04:58.923
> 
> 标签：c#, sql-server-2008-r2, try-catch, raiserror

我是这个论坛的新手，但请多多包涵。我有 ac# Windows 表单，上面有两个复选框，一个称为 chkThrowError，另一个称为 chkDivideError，两者均未选中。这些控件纯粹是为了控制存储过程的执行。我有一个带有以下代码的命令按钮：

```
private void cmdError_Click(object sender, EventArgs e)
    {
        int ThrowError = 0;
        int DividByZero = 0;
        if (chkThrowError.Checked)
        {
            ThrowError = 1;
        }
        if (chkDivideError.Checked)
        {
            DividByZero = 1;
        }
        try
        {
            clsBBFinances.TestError(ThrowError,DividByZero);
            MessageBox.Show("Everything is Hunkey Dorey");

        }
        catch (Exception Ex)
        {
            MessageBox.Show(Ex.Message);
        }
    } 
```

clsBBFinances 是我的业务对象，TestError 例程如下：

```
public static void TestError(int ThrowError, int ThrowDivideError)
    {
        System.Data.SqlClient.SqlDataReader objRs = null;
        string strsql = "";
        bool Success = true;
        string ErrMsg = "";
        int intCount = 0;
        try
        {
            strsql = strsql + "Exec ";
            strsql = strsql + "TestError " + ThrowError.ToString() + " , " + ThrowDivideError.ToString();
            objRs = clsBBFinances.TheDatabase.ExecuteReadOnly(strsql);
            while (objRs.Read())
            {
                intCount++;
                object xxx = objRs[0];

            }
            Success = true;
            ErrMsg = "";
            //intCount = objRs.RecordsAffected;

        }
        catch (Exception ex)
        {
            ErrMsg = ex.Message;
            intCount = 0;
            Success = false;
            throw ex;
        }
        finally
        {
            if (objRs != null)
            {
                if (!objRs.IsClosed)
                {
                    objRs.Close();
                }
            }
        }

    } 
```

请假设语法正确并且我有一个有效的 SQL 连接 (sql2008(R2))

这基本上调用了以下存储过程：

```
Create PROCEDURE TestError 
(@ThrowError int=0
 ,@ThrowDivideError int= 0
 )
AS
BEGIN

SET NOCOUNT ON;
Declare @x int
Declare @y int

Declare @ErrorNumber int
Declare @ErrorMessage varchar(2000)
Declare @ErrorSeverity int
Declare @ErrorState int
Begin Try

    If isnull(@ThrowError,0) <>   0
    Begin
            RaisError ('Forced Error Raised',16,1)
            Return
    End
    If isnull(@ThrowDivideError,0) <>0
    Begin
          set @x = 5
          Set @y =0
          Select @x/@y as z
    End

End Try
Begin catch
    Select @ErrorNumber = Error_Number()
           ,@ErrorMessage = 'Test Error ' + Error_message()
           ,@Errorseverity= Error_Severity()
           ,@ErrorState = Error_State()

    RaisError (@Errormessage, @ErrorSeverity, @ErrorState)
    --THROW 51000, @Errormessage, @ErrorState;
    Return

End Catch
Select * from   information_Schema.tables

END
GO 
```

基本上，我根据传入的参数引发了一个错误。如果我的第一个参数不为零，我会引发一个自定义错误，如果第一个是 0，第二个是非零，那么我执行除以零来生成我系统错误。如果两者都为零，我会从 Information_Schema.tables 中进行简单的选择，只是为了完成它。存储过程的目的是调用 MY 错误和系统错误。

当我调用该过程并且我的第一个参数设置为 1 时，会引发我的自定义错误，该错误会通过 SQl catch 块并随后被困在我的 c# 中的 catch 块中。

但是，当我在第二个参数设置为 1 的情况下执行它时，除以零错误被捕获在 SQL catch 块中，但它没有被 c# 中的 catch 块捕获。代码继续，好像没有发生错误一样。

我希望能够捕捉到第二个错误。有谁知道如何。请随意粘贴上面的代码并自己尝试。

强制错误我收到消息`Test Error Forced Error Raised`。

除以零我得到消息`Everything is Hunkey Dorey`，事实并非如此。

请帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T20:29:54.883

您正在使用 SqlDataReader，它一次只读取一个结果集。异常发生在第二个结果集中。因此，您必须使用 NextResult() 将阅读器移至第二个结果集。然后你遇到了异常......

```
 var connection = new SqlConnection("Data Source=xxx;Initial Catalog=Test;User Id=xxx;Password=xxx");
        connection.Open();

        try
        {
            SqlCommand command = new SqlCommand();
            command.Connection = connection;
            command.CommandType = CommandType.StoredProcedure;
            command.CommandText = "TestError";
            command.Parameters.AddWithValue("@ThrowDivideError", 1);
            var reader = command.ExecuteReader(CommandBehavior.CloseConnection);
            reader.Read();
            reader.NextResult();
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }

        Console.ReadLine(); 
```

# three.js - Three.js Y坐标可以向下而不是向上吗？

> ID：16046068
> 
> 赞同：2
> 
> 时间：2013-04-16T20:05:11.017
> 
> 标签：three.js

有没有一种简单的方法可以更改 Three.js 坐标系，使 Y 值随着屏幕向下而不是向上移动而增加？

我必须编写一些适用于 SVG 和 Three.js 的代码。如果我不需要一直翻转 Y 坐标就好了。（并且代码已经在 SVG 中工作，所以我更愿意坚持 SVG 的递增 Y 均值向下约定。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:07:49.577

没有。three.js 基于右手坐标系。如果正-y 在“向下”方向，则坐标系将是左手坐标系。

您将不得不继续在应用程序层进行调整。

三.js r.57

# java - 如果在不使用锁定的情况下并发运行的进程不存在文件，如何安全地创建文件？

> ID：16046073
> 
> 赞同：2
> 
> 时间：2013-04-16T20:05:21.343
> 
> 标签：java, concurrency, parallel-processing, locking, nio

假设两个（或更多）并发运行的 Java 进程需要检查文件是否存在，如果不存在则创建它，然后在运行过程中可能从该文件中读取。我们希望保护自己免受多个写入器进程相互干扰和/或读取器进程读取文件的不完整或不一致版本的可能性。

我们目前正在做的仲裁这种情况是使用Java NIO FileLocks。一个进程设法在要创建的文件上获取排他锁`FileChannel.tryLock()`并创建它，而其他并发运行的进程无法获取锁并回退到使用该文件的内存版本进行运行。

然而，锁定给我们的计算场带来了各种问题，因此我们正在探索替代方案。所以我的问题是：**有没有办法在不使用文件锁的情况下安全地做到这一点？**

例如，进程是否可以在发现文件不存在时写入独立的临时文件，然后在写入临时文件后或多或少“原子地”将临时文件移动到位？在这种情况下，我们可能最终会得到多个写入器进程，但如果从文件中读取的任何进程总是读取一个或另一个版本，而不是两个或多个版本的混合，那将是可以的。但是，我认为并非所有操作系统都保证如果您打开文件以供读取，即使在读取过程中被覆盖，您也会继续从文件的原始版本读取。

我们欢迎所有的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:09:19.270

> 假设两个（或更多）并发运行的 Java 进程需要检查文件是否存在，如果不存在则创建它，然后在运行过程中可能从该文件中读取。

我不太了解问题的创建和阅读部分。如果您希望确保您有一个唯一的文件，那么您可以使用[`new File(...).createNewFile()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#createNewFile%28%29)并检查以确保它返回`true`. 引用 Javadocs：

> 当且仅当具有此名称的文件尚不存在时，以原子方式创建以此抽象路径名命名的新的空文件。检查文件是否存在以及如果文件不存在则创建文件是单个操作，相对于可能影响文件的所有其他文件系统活动而言是原子操作。

这将为您提供一个只有该进程（或线程）才能“拥有”的唯一文件。但是，我不确定您打算如何让作者知道要写入哪个文件。

如果您正在谈论创建一个您*编写*的唯一文件，然后将其移至写入目录以供使用，那么上述内容应该可以工作。完成后，您还需要在写入目录中创建一个唯一名称。

您可以使用以下内容：

```
private File getUniqueFile(File dir, String prefix) {
    long suffix = System.currentTimeMillis();
    while (true) {
        File file = new File(dir, prefix + suffix);
        // try creating this file, if true then it is unique
        if (file.createNewFile()) {
           return file;
        }
        // someone already has that suffix so ++ and try again
        suffix++;
    }
} 
```

作为替代方案，您还可以使用`UUID.randomUUID()`或生成唯一名称的东西创建唯一文件名。

# android - 无法在选项菜单中显示图标

> ID：16046074
> 
> 赞同：0
> 
> 时间：2013-04-16T20:05:29.163
> 
> 标签：android, eclipse, icons, oncreateoptionsmenu

大家好，我真的很沮丧，这就是我想要的

![](https://i.stack.imgur.com/fQ4bM.png)

但无论我做什么，我都无法将我的图标绑定到我的选项菜单。我努力了

```
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    menu.add(1, 1, 0, "Blu-Ray").setIcon(R.drawable.ic_launcher);
     menu.add(1, 2, 1, "DVD").setIcon(R.drawable.ic_launcher);
     menu.add(1, 3, 2, "Hard Disk").setIcon(R.drawable.ic_launcher);
     menu.add(1, 4, 3, "Sites").setIcon(R.drawable.ic_launcher);
     menu.add(1, 5, 4, "USB").setIcon(R.drawable.ic_launcher);
 return true;
} 
```

但没有运气

然后我尝试转到我的菜单然后 main.xml 并做了

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/action_settings"
    android:icon="@drawable/ic_launcher"
    android:showAsAction="never"
    android:title="Lolly"/> 
```

在我的课堂上我做到了

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:12:52.640

> 无法在选项菜单中显示图标

请注意，从 Android 3.0 开始，不再有“选项菜单”。有动作栏溢出。“选项菜单”仍用于某些方法名称（例如，`onCreateOptionsMenu()`）以实现向后兼容性，但“选项菜单”本身是 Android 1.x/2.x 构造。

> 大家好，我真的很沮丧，这就是我想要的

那不是选项菜单，也不是操作栏溢出。这是该应用程序的开发人员独立创建的一些 UI。

> 但是我无论做什么我都无法将我的图标绑定到我的选项菜单

操作栏溢出没有图标。旧的选项菜单有图标，但呈现与屏幕截图中描述的不同。

> 我想实现如上的布局

欢迎您自己为此创建一些 UI。或者，您可以坚持使用标准操作栏/选项菜单方法，以便您的应用程序的行为与用户设备上的其他应用程序一致。

# sql-server - 从多个表中选择计数并将它们全部返回一行 - SQL Server

> ID：16046079
> 
> 赞同：0
> 
> 时间：2013-04-16T20:05:40.217
> 
> 标签：sql-server

所以我要解决的问题是我有 8 个表，其中包含数据。第 9 个表，每个表都有一个字段，我想存储前 8 个表中的每一个的计数。我能够返回计数，但是不是每个字段一个计数，我有 8 行只是填充第一个字段。8 个表名中的每一个都是第 9 个表中的一个字段名。这是我的代码：

```
SELECT COUNT(SubID) as Sent_Members FROM Sent_Members
UNION ALL
SELECT COUNT(SubID) as Sent_Shoppers FROM Sent_Shoppers
UNION ALL
SELECT COUNT(SubID) as Open_Members FROM Open_Members
UNION ALL
SELECT COUNT(SubID) as Open_Shoppers FROM Open_Shoppers
UNION ALL
SELECT COUNT(SubID) as Click_Members FROM Click_Members
UNION ALL
SELECT COUNT(SubID) as Click_Shoppers FROM Click_Shoppers
UNION ALL
SELECT COUNT(SubID) as Unique_Click_Members FROM Unique_Click_Members
UNION ALL
SELECT COUNT(SubID) as Unique_Click_Shoppers FROM Unique_Click_Shoppers 
```

我猜我应该使用一些东西而不是 Union，但我不确定那会是什么.. 谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:21:47.337

这看起来更丑陋，但它比执行 8 个子查询并在每个子查询中进行完整的表扫描效率高数百倍。

```
;WITH r AS
(
  SELECT t.name, rc = SUM(p.rows)
   FROM sys.tables AS t
   INNER JOIN sys.partitions AS p
   ON t.[object_id] = p.[object_id]
   WHERE p.index_id IN (0,1)
   AND t.name IN 
   (
    N'Sent_Members',
    N'Sent_Shoppers',
    N'Open_Members',
    N'Open_Shoppers',
    N'Click_Members',
    N'Click_Shoppers',
    N'Unique_Click_Members',
    N'Unique_Click_Shoppers'
   )
   GROUP BY t.name
)
SELECT * FROM r 
PIVOT (MAX(rc) FOR name IN 
(
 [Sent_Members],
 [Sent_Shoppers],
 [Open_Members],
 [Open_Shoppers],
 [Click_Members],
 [Click_Shoppers],
 [Unique_Click_Members],
 [Unique_Click_Shoppers]
) AS p; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T20:10:52.810

干得好：

```
INSERT INTO [Table9]
SELECT 
    (SELECT COUNT(*) FROM Sent_Members) AS Sent_Members,
    (SELECT COUNT(*) FROM Sent_Shoppers) AS Sent_Shoppers,
    (SELECT COUNT(*) FROM Open_Members) AS Open_Members,
    (SELECT COUNT(*) FROM Open_Shoppers) AS Open_Shoppers,
    (SELECT COUNT(*) FROM Click_Members) AS Click_Members,
    (SELECT COUNT(*) FROM Click_Shoppers) AS Click_Shoppers,
    (SELECT COUNT(*) FROM Unique_Click_Members) AS Unique_Click_Members,
    (SELECT COUNT(*) FROM Unique_Click_Shoppers) AS Unique_Click_Shoppers 
```

# html - 离线收藏 - Meteor 0.6

> ID：16046080
> 
> 赞同：3
> 
> 时间：2013-04-16T20:05:51.300
> 
> 标签：html, meteor, offline

The smart package `appcache` allow us to improve the load time of Meteor applications by keeping in the browser *static ressources* defined in the manifest.

But that's not enough to run the app offline, we need to have offline database/collections as well.

Today, what are the best strategies to use offline minimongo? What is planned (or not) in the future?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-24T10:49:02.200

当有很多离线时，Meteor（尽管如此出色）是正确的工具吗？[SyncIt](https://github.com/forbesmyester/SyncIt)是“在本地编辑然后应用到服务器”库之一，但它首先被认为是离线的。披露：我写的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:48:04.863

目前，这些集合没有离线保存。Meteor 需要能够在离线和在线集合之间进行同步，以及离线保存集合的能力。虽然它还没有[在路线图上，](http://trello.com/board/meteor-roadmap/508721606e02bb9d570016ae)但希望它仍然在核心开发人员的脑海中。

希望他们看到这个问题并提出来

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-10T02:30:17.520

[我通过链接 Meteor 的离线数据包](https://github.com/awwx/meteor-offline-data)来回答我自己的问题，Andrew Wilcox 也是该`appcache`包的作者。

# ruby - 用于一级子文件夹的 ruby glob

> ID：16046087
> 
> 赞同：1
> 
> 时间：2013-04-16T20:05:56.763
> 
> 标签：ruby, compass-sass

如何编写仅在一级子文件夹时才匹配文件的 glob？我有这样的结构：`src/items/item-name/file.ext`

我需要一个只匹配这些文件的 glob，而不是`src/items/item-name/subfolder/file.ext`. 我尝试使用`src/blocks/*/*.*`，但它仍然会查看子文件夹。

我正在尝试为 Compass 设置手表动作，我必须用 ruby​​ 来做。我不熟悉它，也找不到自己的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:29:21.457

`*.*`在 Ruby 中，您可以在以下所有子文件夹中捕获所有遵循该模式的文件`src/items`：

```
Dir.glob('src/items/*/*.*').select({ |f| File.file?(f) }).each do|file|
  puts file
end 
```

它不会深入挖掘（如果你不使用`**`它就不会递归地执行它），并且它只考虑文件`File.file?`（如果子文件夹名称与模式匹配`*.*`）。

# android - java.lang.ClassCastException with android on loaders/asynctaskloader

> ID：16046091
> 
> 赞同：0
> 
> 时间：2013-04-16T20:06:32.443
> 
> 标签：android, android-asynctask, loader

制作一个 twitter 安卓应用。试图使 OAuth 工作。我在尝试初始化消费者时收到 java.lang.ClassCastException。

这是我的主要活动以及 asynctaskloader 类：

```
public class MainActivity extends FragmentActivity implements LoaderManager.LoaderCallbacks{

final String TAG = getClass().getName();

private OAuthConsumer consumer;
private OAuthProvider provider;
private String token;
private String secret;
private getCommonsHttpOAuthConsumer consumerLoader;

Activity context;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button signInButton = (Button) findViewById(R.id.signInButton);

    signInButton.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            sign_in();
        }
    });     
}

public void sign_in()
{
    try {

        Log.i(TAG, "test");

        this.consumer = (OAuthConsumer) getSupportLoaderManager().initLoader(0, null, this); //here's the error

        Log.i(TAG, "test2");
    } catch (Exception e) {
        Log.e(TAG, "Error creating consumer / provider",e);
    }       
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public android.support.v4.content.Loader onCreateLoader(int id, Bundle arg1) {
    context = this;

    consumerLoader = new getCommonsHttpOAuthConsumer(context);
    return consumerLoader;
}

@Override
public void onLoadFinished(android.support.v4.content.Loader arg0,
        Object arg1) {
    // TODO Auto-generated method stub

}

@Override
public void onLoaderReset(android.support.v4.content.Loader arg0) {
    // TODO Auto-generated method stub

}

}

class getCommonsHttpOAuthConsumer extends AsyncTaskLoader<OAuthConsumer>{

public getCommonsHttpOAuthConsumer(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

@Override
public OAuthConsumer loadInBackground() {
    // TODO Auto-generated method stub

    return new CommonsHttpOAuthConsumer(Constants.CONSUMER_KEY, Constants.CONSUMER_SECRET);
}

} 
```

这是我的日志：

```
04-16 15:34:57.819: I/com.example.twittertestnewapi.MainActivity(28164): test
04-16 15:34:57.819: E/com.example.twittertestnewapi.MainActivity(28164): Error creating consumer / provider
04-16 15:34:57.819: E/com.example.twittertestnewapi.MainActivity(28164): java.lang.ClassCastException: com.example.twittertestnewapi.getCommonsHttpOAuthConsumer cannot be cast to oauth.signpost.OAuthConsumer
04-16 15:34:57.819: E/com.example.twittertestnewapi.MainActivity(28164):    at com.example.twittertestnewapi.MainActivity.sign_in(MainActivity.java:68)
04-16 15:34:57.819: E/com.example.twittertestnewapi.MainActivity(28164):    at com.example.twittertestnewapi.MainActivity$1.onClick(MainActivity.java:56)
04-16 15:34:57.819: E/com.example.twittertestnewapi.MainActivity(28164):    at android.view.View.performClick(View.java:4204)
04-16 15:34:57.819: E/com.example.twittertestnewapi.MainActivity(28164):    at android.view.View$PerformClick.run(View.java:17355)
04-16 15:34:57.819: E/com.example.twittertestnewapi.MainActivity(28164):    at android.os.Handler.handleCallback(Handler.java:725)
04-16 15:34:57.819: E/com.example.twittertestnewapi.MainActivity(28164):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-16 15:34:57.819: E/com.example.twittertestnewapi.MainActivity(28164):    at android.os.Looper.loop(Looper.java:137)
04-16 15:34:57.819: E/com.example.twittertestnewapi.MainActivity(28164):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-16 15:34:57.819: E/com.example.twittertestnewapi.MainActivity(28164):    at java.lang.reflect.Method.invokeNative(Native Method)
04-16 15:34:57.819: E/com.example.twittertestnewapi.MainActivity(28164):    at java.lang.reflect.Method.invoke(Method.java:511)
04-16 15:34:57.819: E/com.example.twittertestnewapi.MainActivity(28164):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-16 15:34:57.819: E/com.example.twittertestnewapi.MainActivity(28164):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-16 15:34:57.819: E/com.example.twittertestnewapi.MainActivity(28164):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T12:16:45.870

确保您的 OAuthConsumer 类实现了 Loader 回调接口。

# java - java：当前上下文中未知的变量？打开新的 JFrame 并调用子类时失去价值

> ID：16046093
> 
> 赞同：1
> 
> 时间：2013-04-16T20:06:34.167
> 
> 标签：java, variables

基本上，我有一个在主类中公开的集合，当我调用子类时，集合大小变为 0，并且在调试时，它说该变量在当前上下文中未知，可能是什么问题？这是一个课程，所以我真的不想粘贴代码，但如果需要，我会给出更多解释。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:27:30.980

我通过将集合更改为静态解决了我的问题，这在从 JFrame 调用方法时帮助了我，因为我不需要创建新实例，我认为创建新实例会导致集合变得未知。

# iis - MS Server 2008 R2 上的 ColdFusion 5

> ID：16046095
> 
> 赞同：1
> 
> 时间：2013-04-16T20:06:38.697
> 
> 标签：iis, coldfusion, windows-server-2008

需要查看 ColdFusion 5 是否可以在 MS Server 2008 R2 上运行。

在具有 ColdFusion 5（是 5）并希望将其移动到具有 2008 R2 和 IIs 7.5 的 MS 服务器的客户端站点上。与所有 ColdFusion 一样，它上面的一个应用程序正在消失。所以他们不想投资升级。根本不是他们的选择，他们已经明确表示。

2008 R2 问题：CF 5 是 32 位的，我无法安装。有没有办法做到这一点？

IIS 7.5 我读过一些文章，CF 5 可以在 IIS 7.5 上运行并打开兼容模式。我不认为这将是一个大障碍。

另一种方法是保留在它所在的服务器上，但出于某种原因，这是最后一种选择。

因此，在大多数情况下，我正在寻找有关在 MS Server 2008 R2 上运行 CF 5 的建议。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T01:13:32.190

我手头没有 Windows Server 2008，但我能够在 Windows 7 64 位上安装 ColdFusion 5 几乎没有问题，所以你应该继续尝试一下（这在这些情况）。

我已经在我的博客上为您[完整地记录了我的安装经验](http://adamcameroncoldfusion.blogspot.co.uk/2013/04/installing-coldfusion-5-yeah-thats-not.html)（以防有任何帮助）。在这里发帖太长了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T07:20:49.977

只是想，斯科特。如果不支付升级到仍然受支持（并且安全且不稳定）的 ColdFusion 版本的原因是许可成本，那么您是否考虑过 Railo 而不是 ColdFusion？该软件本身是免费的，但显然您必须对不再有效的 CFML 进行一些重新编码。这并不多，但最近的 CFML 实现 - 总体上 - 比旧版本更不容忍狡猾的代码。

采用这种方法的好处是您将运行仍在维护的软件，并且就安全问题而言是最新的。老实说，我认为运行如此过时的面向外部的软件是一种疏忽。您的客户是否意识到这里的潜在风险？

也许这不是一个选择，但也许是，所以我想我会建议它。

# java - 读取从 AJAX 发送到 java servlet 的 jquery 数据

> ID：16046097
> 
> 赞同：1
> 
> 时间：2013-04-16T20:06:56.773
> 
> 标签：java, javascript, jquery, ajax, servlets

这是触发 Servlet 'CalculateLace' 的 AJAX 代码

```
laceTd.dblclick(function() {
    var jsonObj= { jsonObj: [ {"rowID": $(nRow).attr('id')}  ]};                                    
    $.ajax({
        data: JSON.stringify(jsonObj),
        contentType: "application/json; charset=utf-8",
        traditional: true,
        url: "CalculateLace"
    });
}); 
```

这是我的 Java Servlet 代码：

```
protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
      String id = req.getParameter("rowId");
      //do something
} 
```

但我一直将 String id 设为 null。我也试过

```
String id = req.getParameter("id"); 
```

但无济于事。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:17:25.583

试试这个方法——

```
var jsonObj= {"rowId": $(nRow).attr('id')}; 
```

[并以这种方式在您的 servlet 中获取 rowID - 您可以在JSON.org](http://json.org/java/)获取库来解析您的 json

```
req.getParameter("rowId"); 
```

# xsl-fo - 删除表中未使用的空格-XSLT/XSL-FO

> ID：16046100
> 
> 赞同：0
> 
> 时间：2013-04-16T20:07:16.800
> 
> 标签：xsl-fo, apache-fop

我使用 Apache FOP 在 PDF 中创建了表格。

但是表格单元格中的文本（表格标题和内容）在文本周围有空白/空白，因此会占用大量空间。

PDF 有 120 个字符的限制，因此无法显示所有文本。

请建议如何定义表格列的宽度以仅包含文本并且没有任何空白/未使用

该表是动态创建的

# java - Linux从java中查找命令不起作用

> ID：16046101
> 
> 赞同：0
> 
> 时间：2013-04-16T20:07:21.060
> 
> 标签：java, linux, process

谁能帮我让这段代码在linux中工作

```
 public static void main(String[] args) throws Exception,{   
    String s ="find . -exec ls -al {} \\;";
    Process exec = Runtime
            .getRuntime()
            .exec(s);
    exec.waitFor();
System.out.println(s);
    if (exec.getErrorStream().available() != 0) {
        BufferedInputStream bf = new BufferedInputStream(
                exec.getErrorStream());
        DataInputStream din = new DataInputStream(bf);
        System.out.println(din.readLine());
    }

    System.out.println(exec.exitValue());
} 
```

我得到以下输出。

```
find . -exec ls -al {} \;
find: missing argument to `-exec'
1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:16:37.913

尝试使用这个：

```
String[] params = {"find", ".", "-exec", "ls", "-al", "{}", ";"}; 
```

而不是您的普通字符串命令。

不过要小心：输出很重（我用 /dev/. 测试过），waitFor 方法可能会导致 I/O 缓冲区爆裂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:59:32.270

反斜杠太多

```
find . -exec ls -al {} ';' 
```

# requirejs - SPA 使用 BundleConfig 和 Require.js

> ID：16046104
> 
> 赞同：1
> 
> 时间：2013-04-16T20:07:29.890
> 
> 标签：requirejs, bundle, amd, single-page-application

对于在 SPA 中一起使用 BundleConfig 和 Require.js 的任何合理解释，我将不胜感激。在启动应用程序时，如何选择 BundleConfig 应该加载哪些脚本？哪些脚本不应在 BundleConfig 中调用并通过 AMD 选择性加载？一旦被 BundleConfig 加载，是否必须在 require.js 的 DEFINE 语句中再次调用它们？

尽我所能搜索，我根本找不到这一切的简单解释。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:32:38.407

BundleConfig 将帮助您在 1 次行程中将捆绑包中的所有脚本一起发送到客户端。这减轻了 require.js 的负担或工作。我经常为 3rd 方脚本执行此操作，因为无论如何我很可能立即需要它们所有客户端。

然后我可以选择使用 require.js 根据需要加载我的脚本（因此是 AMD），或者也可以预先捆绑它们。

不过，Require 不只是异步加载内容。它还处理依赖关系解析。对我来说，这是更重要的部分。它确保在我使用模块 A 之前，如果它依赖于 B，它依赖于 C，它依赖于 D，它首先被解决。所以它们被加载并以正确的顺序运行。

因此，无论您是否使用捆绑，require.js 依赖方面都非常有价值。

# javascript - iframe 使用 Javascript 改变大小

> ID：16046105
> 
> 赞同：0
> 
> 时间：2013-04-16T20:07:45.360
> 
> 标签：javascript, html

我需要改变`iframe`尺寸。这是我的html代码

```
<iframe id="stream" width="720" height="433" src="#HiddedIt" style="border:0;outline:0" frameborder="0" scrolling="no"></iframe> 
```

这是我的 Javascript：

```
if (window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth < 1100){
    document.getElementById("stream").width = "485px";
    document.getElementById("stream").height = "295px";
} 
```

当用户的分辨率低于 1100 时，它不会改变 iframe 的大小。你能告诉我哪里做错了吗？谢谢你。

`if`正在工作，但`iframe`' 的大小没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:21:42.823

我认为您的问题是 Javascript 出现在`<iframe>`HTML 之前。浏览器按顺序解析 HTML。

在没有看到您的实际文档的情况下，我只能想象您在 中调用 Javascript`<head>`并`<iframe>`在`<body>`.

这样做的问题是，当 Javascript`<head>`被执行时，还没有`<iframe>`创建，所以没有对象可以改变！

`<body>`一种解决方案是在创建之后调用您的 Javascript `<iframe>`。或者，您可以在创建`window.onload`后使用运行脚本`iframe`：

```
window.onload = function () {
    if (
        window.innerWidth < 1100 || 
        document.documentElement.clientWidth < 1100 || 
        document.body.clientWidth < 1100
    ){
        alert("Yes");
        document.getElementById("stream").width = "485px";
        document.getElementById("stream").height = "295px";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:40:01.523

您可以使用 Javascript 的 JQuery 库以编程方式调整 IFRAME 的大小。

在下面的代码中，值“#iframe”将是您的 IFRAME 的 ID。然后您可以插入仅设置 IFRAME 的 CSS 高度的高度值。

```
$("#iframe").css("height", "50px"); 
```

您可以使用 .css 设置任何 CSS 值。

# highcharts - 在折线图的 x 轴上显示年份

> ID：16046109
> 
> 赞同：0
> 
> 时间：2013-04-16T20:08:05.860
> 
> 标签：highcharts

这是图表目前的样子：

[http://jsfiddle.net/VunVq/1/](http://jsfiddle.net/VunVq/1/)

在 x 轴上而不是显示完整日期，我只想显示年份。

例如 2008 2009 2010

工具提示应该显示完整的日期。

```
xAxis: {
            categories: ['2008-03-31', '2009-03-31', '2010-03-31']
        }, 
```

我阅读了 api 参考，但无法弄清楚如何在 x 轴上仅显示年份，可能是因为它已经过了我的就寝时间并且我的大脑无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T03:35:52.103

使用`label's` `formatter`回调 JavaScript 函数来格式化标签。

```
 xAxis: {
            categories: ['2008-03-31', '2009-03-31', '2010-03-31'],
            labels: {
                formatter: function () {
                    return this.value.split('-')[0];
                }
            }
        } 
```

**[演示](http://jsfiddle.net/maheshsapkal/DHPZY/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:49:18.403

您还可以将类型 xaxis 设置为日期时间 ( [http://api.highcharts.com/highcharts#xAxis.type](http://api.highcharts.com/highcharts#xAxis.type) ) 并使用 pointStart() / pointInterval 进行系列。

# matlab - MATLAB 子矩阵

> ID：16046111
> 
> 赞同：1
> 
> 时间：2013-04-16T20:08:11.680
> 
> 标签：matlab, projection, submatrix

MATLAB问题：

我有一个三维数组 A(2,2,2)。我想定义一个2x2数组作为A的子数组，如下：

B = A(1,:,:)。

也就是说，我们只是在第一个组件上进行投影。但是 matlab 现在会将这个 2x2 矩阵视为 1x2x2 数组，所以我不能做某些事情（比如乘以另一个 2x2 矩阵）。

如何将 B 作为 A 的 2x2 子数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:14:05.490

如果你想一栋摩天大楼，你`A(1,:,:)`就是把一楼拆掉，这个操作不可避免地发生在第三维。

您可以使用[`reshape()`](http://www.mathworks.co.uk/help/matlab/ref/reshape.html),[`squeeze()`](http://www.mathworks.co.uk/help/matlab/ref/squeeze.html)或[`permute()`](http://www.mathworks.co.uk/help/matlab/ref/permute.html)摆脱单件维度：

```
reshape(A(1,:,:),2,2)
squeeze(A(1,:,:))
permute(A(1,:,:),[2,3,1]) 
```

`squeeze()`几乎所有工作都靠自己完成，但它不是内置函数，实际上使用`reshape()`. 其他两种选择预计会更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T20:16:24.963

您想使用[`squeeze`](http://www.mathworks.nl/help/matlab/ref/squeeze.html)删除单件维度的功能：

```
B = squeeze(A(1,:,:)) 
```

# pdf-rendering - android项目中编译的MuPDF库集成

> ID：16046113
> 
> 赞同：1
> 
> 时间：2013-04-16T20:08:32.060
> 
> 标签：pdf-rendering

我已经编译了 mupdf 库，但是当我将它集成到我现有的 android 项目中以呈现 PDF 时，它给了我以下错误：

```
java.lang.ExceptionInInitializerError 
```

我已按照以下步骤进行集成：

步骤在这里解释：http: [//pastebin.com/YzHUhzE7](http://pastebin.com/YzHUhzE7)

当我在 mupdf 测试项目中更改包名称时，本机代码会被修改，并且会出现上述问题。因此，如果有人知道如何将 MuPDF 集成到我的项目中编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:06:36.577

最后，我将编译好的 mupdf 库集成到我的项目中。

我遵循以下步骤：将库导入我的项目后，在 jni 上运行 ndk-build。它将建立图书馆。现在 ExpetionInitializationError 已解决。现在应用程序正在设备上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-11T15:07:11.313

您可以在此链接中找到答案[http://www.chinabtp.com/android-pdf-viewer-library-or-mupdf-library-tutorials/](http://www.chinabtp.com/android-pdf-viewer-library-or-mupdf-library-tutorials/)

这是说明：

```
Building a MuPDF lib on windows with Cygwin and android-ndk

Download MuPDF 1.3 Source from https://code.google.com/p/mupdf/downloads/list unzip to folder c:/mupdf-1.3-source

Install Cygwin: Download and run Run setup-x86.exe from http://cygwin.com/install.html when installing cygwin, make sure you selected make packages and C++ compilers

Make generate. open cygwin terminal, run

cd /cygdrive/
cd c/mupdf-1.3-source
make generate

Install android-ndk: download android-ndk-r9d-windows-x86.zip and unzip it to

c:/android-ndk-r9d

Build mupdf lib: on windows cmd console:

    preparation:

    cd c:/mupdf-1.3-source/platform/android
    copy local.properties.sample local.properties

    edit local.properties, uncomment

    #sdk.dir=C:\\Program Files (x86)\\Android\\android-sdk

    and change to

    sdk.dir=REAL andforid-sdk Folder

    build: while still on c:/mupdf-1.3-source/platform/android, run:

    /android-ndk-r9d/ndk-build

    Upon the completion of the build, a folder named libs will be created under

    c:/mupdf-1.3-source/platform/android

Create android apk. Open eclipse, create a new android project from existing code, browse to c:/mupdf-1.3-source/platform/android, now you can create a mupdf apk. 
```

# node.js - JSHTML post express node.js

> ID：16046114
> 
> 赞同：0
> 
> 时间：2013-04-16T20:08:32.087
> 
> 标签：node.js, view

我还没有找到任何关于如何使用 JSHTML express 处理发布请求的教程或信息。

任何人都可以分享一些使用 JSHTML express 处理发布请求的代码示例，或者有关 JSHTML 的任何更多信息吗？

到现在我只发现了这个：[jshtml on github](https://github.com/elmerbulthuis/jshtml)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:51:43.617

好的，我找到了解决方案。假设我们有这样的 Restaurant_new.jshtml 文件

```
<form method="POST" action="/restaurant/new">
    <label>Name</label>
    <input type="text" name="name"/>
    <label>description</label>
    <input type="text" name="desc" />
    <label>latitude</label>
    <input type="text" name="latitude" />
    <label>longitude</label>
    <input type="text" name="longitude" />
    <input type="submit" value="Submit">
</form> 
```

我们通过 app.js 中的代码行来处理这个 post 请求

```
app.post('/restaurant/new', function(req, res){
    restaurantProvider.save({
        name: req.param('name'), //dodaj pola
        desc: req.param('desc'),
        latitude:req.param('latitude'),
        longitude:req.param('longitude')

    }, function( error, docs) {
        res.redirect('/')
    });
}); 
```

这是所有的了。

# visual-studio-2012 - SharePoint 2013：自动托管或提供程序应用程序的模板项目没有 TokenHelper 并且设置不正确

> ID：16046115
> 
> 赞同：0
> 
> 时间：2013-04-16T20:08:33.540
> 
> 标签：visual-studio-2012, sharepoint-2013, office365

当我将新项目添加到我的解决方案时，选择 SharePoint 2013 应用程序，然后选择自动托管或提供程序托管并创建它，创建的 Web 项目完全为空，并且项目设置不正确。

Web 项目没有 TokenHelper，没有页面，没有 jQuery，也没有 CSOM 引用。]

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:08:33.540

如果您以这种方式在解决方案子文件夹中创建新应用程序，就会发生这种情况。

在解决方案的“根”中创建项目，它会起作用 - 然后您可以根据需要将其移动到文件夹中。

# sql - 在 sql 中以“55”开头并希望将它们分组为 1 行的列中的数字总和

> ID：16046122
> 
> 赞同：1
> 
> 时间：2013-04-16T20:09:09.100
> 
> 标签：sql, group-by, row

我想要以“55”开头的列中的所有数字的总和，并希望将它们组合在 1 行中。因此，该列中以 55 开头的所有数字都应分组为 1 行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:15:00.633

```
SELECT SUM(Column_NAME), SUBSTRING(CAST(COLUMN_NAME AS VARCHAR(MAX)), 0, 2)
FROM TABLE
GROUP BY SUM(Column_NAME), SUBSTRING(CAST(COLUMN_NAME AS VARCHAR(MAX)), 0, 2) 
```

# ruby-on-rails - Rails 迁移——rake db:status 说迁移已关闭，但数据库已经迁移？

> ID：16046126
> 
> 赞同：2
> 
> 时间：2013-04-16T20:09:37.913
> 
> 标签：ruby-on-rails, postgresql, migration, rake

我有一个本地 PSQL 数据库设置，并且在使 rake db:migrate 正常运行时遇到问题。例如，我的数据库已经将其 high_school 列名更改为 high_school_name，但 rake db:migrate 失败，状态显示如下：

```
up     20130307043554  Adding seo tables
up     20130307185401  Create admin notes
up     20130307185402  Move admin notes to comments
up     20130308160956  Add active flad to users
up     20130308214928  Add column public to users table
up     20130325203837  Add duration to videos
up     20130326171803  Update duration of videos
down    20130410145000  Fix high school name
up     20130410145028  Add high school id to users
up     20130410161705  Convert units for stats
up     20130410164209  ********** NO FILE **********
up     20130416142844  Add column coach id to users 
```

为什么迁移顺序中间的迁移失败/被读取为“关闭”？这是错误：

```
Migrating to AddingSeoTables (20130307043554)
Migrating to CreateAdminNotes (20130307185401)
Migrating to MoveAdminNotesToComments (20130307185402)
Migrating to AddActiveFladToUsers (20130308160956)
Migrating to AddColumnPublicToUsersTable (20130308214928)
Migrating to AddDurationToVideos (20130325203837)
Migrating to UpdateDurationOfVideos (20130326171803)
Migrating to FixHighSchoolName (20130410145000)
(0.1ms)  BEGIN
==  FixHighSchoolName: migrating ==============================================
-- rename_column(:users, :high_school, :high_school_name)
(0.4ms)  ALTER TABLE "users" RENAME COLUMN "high_school" TO "high_school_name"
PG::Error: ERROR:  column "high_school" does not exist
: ALTER TABLE "users" RENAME COLUMN "high_school" TO "high_school_name"
(0.1ms)  ROLLBACK
rake aborted!
An error has occurred, this and all later migrations canceled:

PG::Error: ERROR:  column "high_school" does not exist
: ALTER TABLE "users" RENAME COLUMN "high_school" TO "high_school_name" 
```

显然，存在架构问题或其他问题。Schema 是通过远程分支跟踪的，所以我不知道问题出在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:18:04.463

我怀疑 down 无法正确处理列重命名更改，除非只是添加或删除列。

您可能希望考虑的一种选择实际上是使用 SQL 更改名称。例如，如果要更改`high_school`为的迁移`high_school_name`失败并且数据库本身当前具有`high_school_name`，则将其（在 SQL 中）重命名为`high_school`，然后尝试运行迁移。这可能是您的一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:18:35.557

在重命名列的行的末尾添加 resque nil

# delphi - 当客户端崩溃连接时如何释放服务器 DCOM 中的引用

> ID：16046130
> 
> 赞同：2
> 
> 时间：2013-04-16T20:09:48.643
> 
> 标签：delphi, com, client-server, distributed-computing

在客户端/服务器环境中，服务器实现了 COM 接口，在某些情况下连接由于某种原因丢失（客户端崩溃），但它在服务器上保持活动的线程实例，消耗内存，直到应用程序运行定稿。有什么方法可以销毁服务器不活动的实例？

服务器使用`TRemoteDataModule`和客户端`TDComConnection`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:16:36.250

[DCOM 垃圾收集](http://www.microsoft.com/msj/0398/dcom.aspx)会自动执行此操作。每隔 120 秒错过 3 次 ping 后，连接将被清理。

所以你无事可做。您可以坐下来让系统完成工作。

# breeze - 微风似乎在每个查询都加载元数据

> ID：16046135
> 
> 赞同：2
> 
> 时间：2013-04-16T20:09:57.377
> 
> 标签：breeze

考虑下面的代码片段... WebApi 控制器元数据方法在下面的 executeQuery 中被调用两次... 为什么？

谢谢，特拉维斯

```
 var manager = (typeof options.breezeController !== 'undefined') ? options.breezeController : Mosaic.Global.defaultBreezeManager();

        var query = breeze.EntityQuery
            .from("GetColonies")
            //.select("VIVLINE_GUID, VIVLINE_NAME") 
            .orderBy("VIVLINE_NAME");

        manager.executeQuery(query);

        manager.executeQuery(query)
            .then((data) => {
                this.viewModel.items.removeAll;
                this.prepData(data.results);
                this.viewModel.setSelectedValue(selectedModel);
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:49:54.967

Breeze 在每次查询之前检查客户端上是否存在给定服务的元数据。如果元数据不存在，那么它将在执行查询之前要求它。

我猜你的情况是两个查询都在返回元数据之前开始。这将导致多次获取元数据。但是，一旦它成功了，您就不应该看到任何进一步的请求。

一个建议是在任何查询之前强制加载元数据，即

```
 manager.fetchMetadata().then(function() {
    manager.executeQuery(query1);

    manager.executeQuery(query2);
  } 
```

# ruby-on-rails - 如何定义嵌套在 ActiveRecord 映射块中的类型的轮胎属性？

> ID：16046141
> 
> 赞同：0
> 
> 时间：2013-04-16T20:10:15.257
> 
> 标签：ruby-on-rails, elasticsearch, tire

我有一个 Rails 应用程序，其中一个主题可以被各种用户关注。我希望能够找到与名称匹配的主题，然后是特定用户。仅使用 Tire`query`语句，没有`filter`.

为此，我打算使用[带有嵌套查询的布尔查询](http://karmi.github.io/tire/#section-Nested_Documents_and_Queries)。

这是我的主题模型：

```
class Topic < ActiveRecord::Base
  include Tire::Model::Search
  include Tire::Model::Callbacks

  mapping do
    indexes :name
    indexes :follower_ids, type: 'nested', as: "indexed_follower_ids", id: 'integer'
  end
  def indexed_follower_ids
    followers.pluck(:id).map { |id| {id: id} }.to_json
  end

  attr_accessible :name

end 
```

跟随模型包含

```
after_save :update_topic_index
def update_topic_index
  topic.tire.update_index
end 
```

不幸的是，在我的数据库中植入了几条记录后，没有任何索引。例如，如果我创建以下记录：

```
User.create! name: "user0"
Topic.create! name: "topic0"
Follow.create! user: User.first, topic: Topic.first 
```

我在 ElasticSearch 服务器日志中看到以下错误：

```
[2013-04-16 15:07:28,564][INFO ][cluster.metadata         ] [Sligguth] [topics] creating index, cause [api], shards [5]/[1], mappings [topic]
[2013-04-16 15:07:28,690][DEBUG][action.index             ] [Sligguth] [topics][2], node[UdT6jTecRNuzdRkxkX2uUA], [P], s[STARTED]: Failed to execute [index {[topics][topic][1], source[{"name":"topic0","follower_ids":"[]"}]}]
org.elasticsearch.index.mapper.MapperParsingException: object mapping for [topic] tried to parse as object, but got EOF, has a concrete value been provided to it?
at org.elasticsearch.index.mapper.object.ObjectMapper.parse(ObjectMapper.java:457)
at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:494)
at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:438)
at org.elasticsearch.index.shard.service.InternalIndexShard.prepareIndex(InternalIndexShard.java:308)
at org.elasticsearch.action.index.TransportIndexAction.shardOperationOnPrimary(TransportIndexAction.java:202)
at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:532)
at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:430)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680)
[2013-04-16 15:07:28,709][DEBUG][action.index             ] [Sligguth] [topics][2], node[UdT6jTecRNuzdRkxkX2uUA], [P], s[STARTED]: Failed to execute [index {[topics][topic][1], source[{"name":"topic0","follower_ids":"[{\"key_id\":1}]"}]}]
org.elasticsearch.index.mapper.MapperParsingException: object mapping for [topic] tried to parse as object, but got EOF, has a concrete value been provided to it?
at org.elasticsearch.index.mapper.object.ObjectMapper.parse(ObjectMapper.java:457)
at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:494)
at org.elasticsearch.index.mapper.DocumentMapper.parse(DocumentMapper.java:438)
at org.elasticsearch.index.shard.service.InternalIndexShard.prepareIndex(InternalIndexShard.java:308)
at org.elasticsearch.action.index.TransportIndexAction.shardOperationOnPrimary(TransportIndexAction.java:202)
at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction.performOnPrimary(TransportShardReplicationOperationAction.java:532)
at org.elasticsearch.action.support.replication.TransportShardReplicationOperationAction$AsyncShardOperationAction$1.run(TransportShardReplicationOperationAction.java:430)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680) 
```

知道为什么 ElasticSearch 在索引我的嵌套时失败了`follower_ids`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T20:00:31.673

我想这是因为您没有在其中存储实际的嵌套对象，而是在存储一个数组。只需将 follower_ids 的类型更改为 string 就可以了。

编辑：刚刚看到上面的线程，查询follower_ids时，使用过滤器而不是在布尔值中指定术语查询，看看它是如何工作的

# c# - 下载数据时在 MonoTouch 中显示微调器

> ID：16046144
> 
> 赞同：0
> 
> 时间：2013-04-16T20:10:19.270
> 
> 标签：c#, iphone, ios, xamarin.ios, xamarin

因此，在我的应用程序中，我有一个按钮可以与从 Internet 下载一些数据并对其进行过滤的库进行对话。当应用程序执行此操作时，屏幕会冻结，并且在用户看来就像应用程序崩溃了一样。但事实并非如此，因为它正在下载数据。

这是我的代码：

```
GetDetailsBtn.TouchUpInside += (sender, e) => {

    var defaults = NSUserDefaults.StandardUserDefaults;

    if (RefNr.Text != string.Empty && RefNr.Text != null) {

        FilteredDataRef = _FetchingData.getTrackTraceData (defaults.StringForKey ("SecurityToken"), RefNr.Text);

        if (FilteredDataRef == null) {
            UIAlertView InvalidAlert = new UIAlertView ("Reference number invalid", "The reference number that you have entered is not linked to the current security code. You can change your security code in the settings.", null, "OK", null);
            InvalidAlert.Show ();

        } else {
            FilteredDataReceived = _FetchingData.FilteringOnReceived (FilteredDataRef);

            FilteredDataPlanned = _FetchingData.FilteringOnPlanned (FilteredDataRef);

            FilteredDataLoadingETA = _FetchingData.FilteringOnLoadingETA (FilteredDataRef);

            FilteredDataLoadingFinal = _FetchingData.FilteringOnLoadingFinal (FilteredDataRef);

            FilteredDataUnloadingETA = _FetchingData.FilteringOnUnloadingETA (FilteredDataRef);

            FilteredDataUnloadingFinal = _FetchingData.FilteringOnUnloadingFinal (FilteredDataRef);   

            this.PerformSegue (MoveToTrackTraceDetailsSegue, this);

            //foreach (string s in FilteredDataPlanned)
            //    Console.WriteLine (s);

        }

    } else {
        UIAlertView InvalidAlert = new UIAlertView ("Reference number cannot be empty", "You did not provide a reference number. We need your reference number to trace identify the shipment you would like to trace.", null, "OK", null);
        InvalidAlert.Show ();
    }
}; 
```

数据下载：

```
public IEnumerable<string> getTrackTraceData (string securityCode, string referenceNumber)
{
    WebRequest request = WebRequest.Create ("http://plex.janssen1877.com/app/life/" + securityCode);

    HttpWebResponse response = (HttpWebResponse)request.GetResponse ();

    Stream dataStream = response.GetResponseStream ();

    StreamReader reader = new StreamReader (dataStream);

    string FetchedData = reader.ReadToEnd ();

    reader.Close ();

    dataStream.Close ();

    response.Close ();

    var FetchingDataItems = FetchedData.Split (new char[] { '\n' });

    if (FetchingDataItems != null) {
        var filteredResult = FetchingDataItems.Where (x => x.Contains (referenceNumber));

        return filteredResult;
    } else {
        return null;
    }
} 
```

现在我想使用一个名为`BTProgressHUD`. 这只是一个花哨的微调器。我认为，如果我将按钮操作放在`BTProgressHUD.show();`按钮操作的顶部和`BTProgressHUD.Dismiss();`按钮上，它将在加载开始时显示并在加载完成时关闭。

不是这种情况。它在新的视图控制器中显示得非常快，并在一秒钟内再次消失。我究竟做错了什么？

编辑例如：

```
public IEnumerable<string> getTrackTraceData (string securityCode, string referenceNumber)
        {

            string url = string.Format ("http://plex.janssen1877.com/app/life/" + securityCode);

            HttpWebRequest HttpRequest = (HttpWebRequest)WebRequest.Create (url);

            string FetchedData = new StreamReader (HttpRequest.GetResponse ().GetResponseStream ()).ReadToEnd ();

            var FetchingDataItems = FetchedData.Split (new char[] { '\n' });

            if (FetchingDataItems != null) {
                var filteredResult = FetchingDataItems.Where (x => x.Contains (referenceNumber));

                return filteredResult;
            } else {
                return null;
            }

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:59:51.540

弗洛里安，

根据 .NET 文档和[HttpWebRequest GetResponse。如何等待响应？](https://stackoverflow.com/questions/10727515/httpwebrequest-getresponse-how-to-wait-for-that-response)您需要以异步方式执行下载（可能还有解析）。

您的实际应用程序的行为是正确的。当您在主线程中执行同步请求时，您会冻结应用程序，因此 UI 元素不会更新。主线程以串行方式处理执行。

为避免这种情况，您有两种不同的解决方案。一方面，您需要转向异步请求。另一方面，您可以使用同步请求创建后台线程（不同的执行路径）。我更喜欢前者。因此，例如，在启动异步请求后，显示指示器。完成后（在回调中），关闭指示器并执行 segue。

例如，您可以按照以下关于如何实现此目的的讨论：[如何异步使用 HttpWebRequest (.NET)？](https://stackoverflow.com/questions/202481/how-to-use-httpwebrequest-net-asynchronously).

要了解主线程（和运行循环）是如何工作的，我建议阅读有关[NSRunLoop 的弹簧棒](http://bynomial.com/blog/?p=15)。

希望有帮助。

**编辑**

您应该使用如下模式（来源[How to use HttpWebRequest (.NET) asynchronously?](https://stackoverflow.com/questions/202481/how-to-use-httpwebrequest-net-asynchronously)）：

```
HttpWebRequest webRequest;

void StartWebRequest()
{
    webRequest.BeginGetResponse(new AsyncCallback(FinishWebRequest), null);
}

void FinishWebRequest(IAsyncResult result)
{
    webRequest.EndGetResponse(result);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T21:06:55.797

听起来您正试图在与 UI 相同的线程中执行所有这些操作，这就是为什么您的应用程序冻结并等待处理完成而不显示任何内容的原因。我会在某种后台工作人员中执行此下载操作。然后我不确定在 Mono 中，但在前后访问主线程并显示和关闭您的加载组件。

# string - 检查 List 中的值是否是 String 的一部分

> ID：16046146
> 
> 赞同：49
> 
> 时间：2013-04-16T20:10:27.993
> 
> 标签：string, scala, list

我有一个这样的字符串：

```
val a = "some random test message" 
```

我有一个这样的列表：

```
val keys = List("hi","random","test") 
```

现在，我想检查字符串是否`a`包含来自`keys`. 我们如何使用 Scala 的内置库函数来做到这一点？

（我知道拆分`a`到 List 的方式，然后用`keys`list 进行检查，然后找到解决方案。但我正在寻找一种更简单地使用标准库函数来解决它的方法。）

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-04-16T20:13:49.120

像这样的东西？

```
keys.exists(a.contains(_)) 
```

或者更惯用的说法

```
keys.exists(a.contains) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-17T18:29:51.013

简单的情况是测试子字符串包含（如`rarry`'s answer 中所述），例如

```
keys.exists(a.contains(_)) 
```

你没有说你是否真的想找到整个单词匹配。由于`rarry`' 的答案假设你没有，这里有一个假设你这样做的替代方案。

```
val a = "some random test message"
val words = a.split(" ")
val keys = Set("hi","random","test") // could be a List (see below)
words.exists(keys contains _) 
```

请记住，键*列表*仅对小列表有效。对于列表，该`contains`方法通常线性扫描整个列表，直到找到匹配项或到达末尾。

对于大量项目，集合不仅更可取，而且更真实地表示信息。集合通常通过哈希码等进行优化，因此需要较少的线性搜索 - 或者根本不需要。

# android - 如何在片段内的 TextView 中显示文本

> ID：16046149
> 
> 赞同：0
> 
> 时间：2013-04-16T20:10:32.183
> 
> 标签：android, textview, fragment

对我来说似乎是一个简单的问题，但我无法弄清楚。我的片段中有这段代码：

```
myTextView.setText("Test"); 
```

但是，此代码会阻止我的应用程序，我不确定为什么。也许这与 Views 有冲突，但我仍然不明白为什么它不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:17:24.957

你是怎么设置内容的？

编辑了我的答案:) 试试这个

```
 @Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container,
      Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.xmlName,
        container, false);
    TextView tv= (TextView) **view**.findViewById(R.id.textViewName);
    tv.setText("yourText"); 
    return view;
  } 
```

这是片段的教程：[片段教程](http://www.vogella.com/articles/AndroidFragments/article.html)

# module - 带有 require 的 Lua 模块调用返回布尔值

> ID：16046151
> 
> 赞同：1
> 
> 时间：2013-04-16T20:10:39.763
> 
> 标签：module, lua, require

我写了下一个lua模块：

```
 --mod.lua
    local M = {}        
    function M.bar()
    print "bar"
    end
    return M 
```

我正在尝试在另一个lua脚本上使用它：

```
 --main.lua
    function Main(context)
    local mod = require 'mod'
    mod.bar()
    end 
```

但我收到错误：“尝试索引？（布尔值）”行“mod.bar（）”如果我在标题上使用模块（...，package.seeall），则会获得相同的结果模组.lua。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:14:38.673

感谢WB，我的“mod.lua”在另一条路上。很抱歉浪费您的时间。

# php - strip_tags 截断 JSON

> ID：16046153
> 
> 赞同：1
> 
> 时间：2013-04-16T20:10:42.373
> 
> 标签：php, json, string, strip-tags, truncated

我有一个这样的 JSON 响应：

```
 {
  "id":"2461",
  "name":"GEORGIA INSTITUTE OF <leo_highlight style=border-bottom: 2px solid rgb(255, 255, 150); background-c",
  "logo":"",
  "address":null,
  "city":null,
  "state":null,
  "campus_uri":"{{PATH}}2461\/"
 },
 ....
 .... 
```

当我这样做`strip_tgs`时，整个 JSON 字符串在`name`上面的标签处被截断。JSON 字符串如下所示。

```
{"id":"2461","name":"GEORGIA INSTITUTE OF 
```

这条线以下的一切都消失了。这是一个巨大的 JSON。但它在这里被截断。关于做什么的任何想法？我需要去掉所有的 HTML 标签。

**更新：** 添加更多细节......

我得到的这个 JSON 字符串来自对查询结果数组的编码。因此，我从 MySQL 查询中获取数组，并对其进行编码`json_encode`并尝试对其进行编码`strip_tags`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:14:53.530

```
$array = json_decode($json, true);
array_walk_recursive($array, function (&$val) { $val = strip_tags($val); });
$json = json_encode($json); 
```

很简单......解码它，遍历并编码它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:14:20.943

解码 JSON 对象后去除标签。您可能会以一种懒惰的方式（即在需要时）执行此操作，而不是遍历每个项目，并在所有字段上剥离标签。

# php - 使用 css 渐变的 Dompdf 不起作用

> ID：16046158
> 
> 赞同：0
> 
> 时间：2013-04-16T20:11:02.000
> 
> 标签：php, pdf, dompdf, css

当我从我拥有的 HTML 页面生成 PDF 文件时，我似乎无法让背景颜色渐变工作。我一直在使用以下代码进行测试，这些代码是从微软的生成器程序中获得的

```
/* IE10 Consumer Preview */ 
background-image: -ms-linear-gradient(bottom, #FFFFFF 0%, #00A3EF 100%);

/* Mozilla Firefox */ 
background-image: -moz-linear-gradient(bottom, #FFFFFF 0%, #00A3EF 100%);

/* Opera */ 
background-image: -o-linear-gradient(bottom, #FFFFFF 0%, #00A3EF 100%);

/* Webkit (Safari/Chrome 10) */ 
background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #FFFFFF), color-stop(1, #00A3EF));

/* Webkit (Chrome 11+) */ 
background-image: -webkit-linear-gradient(bottom, #FFFFFF 0%, #00A3EF 100%);

/* W3C Markup, IE10 Release Preview */ 
background-image: linear-gradient(to top, #FFFFFF 0%, #00A3EF 100%); 
```

这在浏览器中查看页面时效果很好，但是当生成 PDF 时，背景颜色只是白色。查看 Dompdf 的兼容性，没有提到不支持，[https://code.google.com/p/dompdf/wiki/CSSCompatibility](https://code.google.com/p/dompdf/wiki/CSSCompatibility)

有谁知道如何让渐变色背景在 Dompdf 中工作？谢谢！

# sql - SQL 多条命令

> ID：16046161
> 
> 赞同：1
> 
> 时间：2013-04-16T20:11:17.030
> 
> 标签：sql, atomic

我正在用 C# 编写一个方法，它执行多个 SQL 命令并返回一个布尔值，以确定插入是否成功。我的问题是我想将此命令作为“全有或全无”命令执行。这意味着如果我想执行 3 个不同的命令并且第三个命令未正确执行，则前两个命令的更改不会提交。请问如何在 SQLServer 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:19:06.220

如果要从 C# 执行三个命令：

```
SqlTransaction tran = connection.BeginTransaction();
try
{
   ...exec first command and get result...
   ...exec second commmand and get result...
   ...exec third command and get result...
   if (!firstResult || !secondResult || !thirdResult)
      throw new Exception();

   tran.Commit();
}
catch
{
   tran.Rollback();
} 
```

如果要通过调用存储过程在 SQL Server 中执行这三个命令，则使用：

```
BEGIN TRANSACTION

cmd1
cmd2
cmd3

IF @Success = 1 THEN
  COMMIT TRANSATION
ELSE
  ROLLBACK TRANSACTION 
```

您还可以在 SQL 中使用 try..catch 块来捕获异常并在发生错误时回滚事务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:19:53.357

您正在搜索一个事务，它将许多 SQL 查询（通常是 INSERTS、UPDATES 或 DELETES）组合到一个工作单元中，您应该用 BEGIN TRAN（在开头）和 COMMIT TRAN（在结尾）包围您的查询。 [SQL 服务器事务](https://stackoverflow.com/questions/3913806/sql-server-transaction)

# visual-studio-2008 - DevC++ 使此代码崩溃，但 Visual Studio 2008 运行没有问题。为什么？

> ID：16046162
> 
> 赞同：0
> 
> 时间：2013-04-16T20:11:20.013
> 
> 标签：visual-studio-2008, dev-c++

当我在 DevC++（使用 TDM-GCC 4.6.1.64 编译器的版本 4.9.9.2 Orwell Update 5.3.0.3）中运行以下代码时，它可以工作到简单游戏的 3 次迭代，但在第 3 次或第 4 次迭代后 CPU 使用率立即达到 90%崩溃。甚至控制台也被终止，但在 Windows 任务列表中可以看到下面的程序 exe。我必须手动删除它，Windows CPU 才能恢复到 3% 的水平。

但是当我在 Windows Visual Studio 2008 Professional 中运行此代码时，它运行良好。你知道这是什么原因吗？（我的电脑是Windows 7 64位机器）

我真的很喜欢 DevC++，我想使用它。我只是不喜欢 Visual Studio。但是，如果它经常导致程序崩溃（也许代码是错误的，我不知道，但这段代码在 Visual Studio 中有效？？）我必须从现在开始使用 Visual Studio。

请回复。也许我的 DevC++ 有缺陷？

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

void game(void);

int main(void) {

srand(time(NULL));
game();

return 0;

}

void game(void){

int choice=1;
while(choice!=0){

                int number1,number2,resultStudent,result,aha;

                number1=1+rand()%9;
                number2=1+rand()%9;
                result=number1*number2;

                printf("How much is %d times %d ?",number1,number2);
                scanf("%d",&resultStudent);

                    while (resultStudent!=result) {

                        printf("No. Please try again.");
                        scanf("%d",&resultStudent);

                    }

                printf("Very Good\n");
                printf("Do you wanna play again?(0 for Exit):  ");
                scanf("%d",&aha);

                choice=aha;

                printf("Hmm you wanna play again...\n");

}

printf("Program is terminated.");

} 
```

# python - 如何将列表列表写入python中的文件？

> ID：16046165
> 
> 赞同：0
> 
> 时间：2013-04-16T20:11:26.700
> 
> 标签：python, list

我的代码是这样的。我正在尝试将数字列表进行基数排序到列表列表中，然后将该列表列表写入文件，每个单独的列表位于不同的行上。如果我尝试使用`f.write`，它会给我一个字符缓冲区预期的错误。

```
from math import log

b = open("radix.in.txt").readlines()
a = [int(i) for i in b]

f = open("radix.out.txt", "w")
def getIndex(num, base, digit_num):
    return (num // base ** digit_num) % base  

def newLists(base):
    return [ [] for i in range(base) ]  

def order(q, base, digit_num):
    placehold = newLists(base)
    for num in a:
        placehold[getIndex(num, base, digit_num)].append(num)  
    return placehold

def radixSort(a, base):
    passes = 3
    new_list = a
    for digit_num in range(passes):
    new_list = order(new_list, base, digit_num)
    list_c = [str(i) for i in new_list]
    print list_c

radixSort(a, 10) 
```

在打印 list_c 之后放入 f.write(list_c) 会给出这个回溯

```
Traceback (most recent call last):
  File "C:\Users\Nolan Caldwell\Desktop\HW5.py", line 29, in <module>
    radixSort(a, 10)
  File "C:\Users\Nolan Caldwell\Desktop\HW5.py", line 26, in radixSort
    f.write(list_c)
TypeError: expected a character buffer object 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:19:08.200

`list_c` is a `list`-of-`str`. To convert that to a single `str`, use `str.join()`:

```
f.write('\n'.join(list_c)+'\n') 
```

Or, if you prefer, you can write each `str` individually:

```
for s in list_c:
  f.write(s+'\n') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:35:29.737

正如其他人指出的那样，您需要以某种方式序列化数据，然后才能将其写入文件。您可以腌制、json 编码、xml 编码、将其粘贴到 sqlite 之类的数据库中、逐行编写、放入 CSV 文件等......“最好”的方法（没有最好的）取决于什么您打算稍后处理该文件。人们需要阅读它吗？非python程序需要读吗？它是否大到足以关注它占用的空间量？

如果您只想保存整数列表并希望它在许多编程语言中可读，我喜欢 json

```
import json
(... your other stuff here...)
new_list = order(new_list, base, digit_num)
json.dump(new_list, open('myfile.json', 'w')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T20:26:31.470

听起来这是一个使用`csv`模块的好机会。

```
import csv
with open('numbers.csv', 'wb') as csvfile:
    writer = csv.writer(csvfile)
    for lst in list_of_lists:
        writer.writerow(lst) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T20:15:55.483

将其转换为字符串并在读取时使用 literal_eval 将其作为数组获取

```
f=open('file.txt','w')
a=[[1,2],[3,4],[4,5]]
b=str(a)
f.write(b) 
```

当你阅读时，

```
import ast
f=open('file.txt','r')
a=f.read()
b=ast.literal_eval(a) 
```

因为该`write()`函数只能处理字符串。或者将列表列表转换为字符串并使用 write。

# java - 为什么我们必须为 JTable 使用 TableModel？

> ID：16046166
> 
> 赞同：4
> 
> 时间：2013-04-16T20:11:28.243
> 
> 标签：java, swing, jtable, tablemodel

如果我想`JTable`在 Java 中使用 a 在我看来是为了添加行并从按钮后面进行更改，所以我总是必须使用 a `TableModel`（这可能是默认的或您自己创建的）但我的问题是：为什么我们必须使用这个吗？我在我看到的任何帖子中都找不到这个。有人可以解释这是如何工作的以及为什么有必要吗？以及为什么我们不能只在`JTable`没有模型的情况下添加行。

在我看来，如果您只想显示一些记录，但在创建时您不知道所有行，那么只需执行类似 a`table.add()`添加行之类的操作会更容易。您可以在没有附加模型的情况下创建包含内部数据的表。那么为什么不添加数据呢？

或者我只是错了，你可以在没有模型的情况下添加数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T22:03:56.453

`TableModel`接口定义了（视图）呈现其内容（模型）所需的*最少*方法。是一个提供事件管道的抽象实现，只留下[三个](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html)必须重写的*方法。*继续包含一个内部数据模型，该模型基于更改该内部模型的便捷方法。有关比较和这些对比[示例](https://stackoverflow.com/a/13628183/230513)，请参阅[*创建表模型*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)。`JTable``AbstractTableModel`*`DefaultTableModel``Vector`[](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)*

# assembly - 有人可以引导我完成这段代码（程序集）吗？

> ID：16046169
> 
> 赞同：0
> 
> 时间：2013-04-16T20:11:32.777
> 
> 标签：assembly, microcontroller, msp430

我正在玩一个 MSP430 微控制器，我试图了解如何让不同的物理组件相互通信。在这种情况下，我有代码（来自朋友），它使用 DIP 开关打开 7 段 LED 显示屏的不同段。我正在尝试通读这段代码并了解它是如何工作的，以及哪些寄存器在起作用。

```
; Author:
; Date:
; Title:
;
#include "msp430.h"                     ; #define controlled include file
;
; This is a basic template for the MSP430(G2231).
; The I2C.r43 library should be linked into this build to resolve references
; to the subroutines defined as EXTERN below.
;
RESET   EQU     0FFFEh
RAM     EQU     00200h
FLASH   EQU     0F800h
;
; The possible "Address" values to be passed into the subroutines below.
;
I2C_0   EQU     00000000b   // A2-A0: 000 ;Switches
I2C_1   EQU     00000010b   // A2-A0: 001
I2C_2   EQU     00000100b   // A2-A0: 010
I2C_3   EQU     00000110b   // A2-A0: 011 ;LEDs
I2C_4   EQU     00001000b   // A2-A0: 100
I2C_5   EQU     00001010b   // A2-A0: 101
I2C_6   EQU     00001100b   // A2-A0: 110
I2C_7   EQU     00001110b   // A2-A0: 111
;
; Routines below come from external I2C module
;
; No parameters
        EXTERN  InitI2C  
; Address in R12 (just A3-A1 required) - A2-A0 pins left-shifted one
; On return:  R12 = 1 if A part exists, R12 = 2 if _ part exists, R12 = 0 if no device
        EXTERN  ChkI2C        
; Address in R12 (just A3-A1 required) - A2-A0 pins left-shifted one
; Data to output in R13
        EXTERN  OutI2C        
; Address in R12 (just A3-A1 required) - A2-A0 pins left-shifted one
; Data received in R12 on return
        EXTERN  InI2C

        PUBLIC  main

        ORG     RESET
        DC16    init                    ; Set reset vector to 'init' label

        ORG     RAM

        ; <declare any global variables here>

        ORG     FLASH

init:   mov     #0280h, SP              ; Set up stack pointer
        mov     #WDTPW+WDTHOLD,&WDTCTL  ; Stop watchdog timer

main:   ; <insert additional program code here>

      mov.w #0x5A80, &WDTCTL
      call #InitI2C
      clr.w R12
      call #InI2C
      mov.w R12, R13
      mov.w #0x6, R12
      call #OutI2C
      jmp main 

        END 
```

我很难理解代码的各个部分。例如：

我们真的需要这条线：

```
mov.w #0x5A80, &WDTCTL 
```

主要？`6`搬进去怎么`R13`样？为什么是它`6`而不是任何其他数字？我也觉得主要部分可以比现在简化很多。

如果有人可以帮助我完成这段代码？我会很感激的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:25:22.313

有一些东西从 I2C 读入 R12，它被移到 R13 并从寄存器 R13 发送到输出 I2C（它在其他地方定义的子程序中完成 - EXTERN）。

不知道为什么在主循环Init，但也许有人会说。

数字 6 是 I2C 模块的寻址，如注释中所述。

如果您还有其他问题，请直接询问。

# c# - C# 指针偏移 > 255 - ProcessMemoryReader

> ID：16046171
> 
> 赞同：4
> 
> 时间：2013-04-16T20:11:35.963
> 
> 标签：c#, pointers, offset, readprocessmemory

我知道有很多教程向您展示如何使用“ProcessMemoryReader”功能。但这个问题似乎是独一无二的或尚未解决。

很长一段时间以来，我一直在研究其他人的代码以找到一种使用多个偏移量的方法。而且我认为使用多个偏移量对我来说是个问题，但我认为这是一个问题，因为我的偏移量值大于 255。

我试图从中获取内存值的游戏称为“突击魔方”。因为我不确定我是否得到了正确的偏移值，所以我用谷歌搜索了其他人的结果。它们似乎完全相同： [http](http://cheatengine.org/tables/moreinfo.php?tid=1142) ://cheatengine.org/tables/moreinfo.php?tid= 1142（如果您没有安装作弊引擎，您可以使用记事本查看 .ct 文件。）

这是我的代码，使用`ProcessMemoryReader.cs`.

```
private void timer1_Tick(object sender, EventArgs e)
{
int bytesread;
int pointerbase;
byte[] memory;
Process[] myprocess = Process.GetProcessesByName("ac_client");
if (myprocess.Length != 0)
{
preader.ReadProcess = myprocess[0];
preader.OpenProcess();

//Ammo
memory = preader.ReadProcessMemory((IntPtr)0x4DF73C, 4, out bytesread);
pointerbase = BitConverter.ToInt32(memory, 0);
pointerbase += 0x00; //0 // 14 // 378

byte[] memory1 = preader.ReadProcessMemory((IntPtr)pointerbase, 4, out bytesread);
int pointerbase1 = BitConverter.ToInt32(memory1, 0);
pointerbase1 += 0x14; //0 // 14 // 378

byte[] memory2 = preader.ReadProcessMemory((IntPtr)pointerbase1, 4, out bytesread);
int pointerbase2 = BitConverter.ToInt32(memory2, 0);
pointerbase2 += 0x378; //00 // 14 // 378

byte[] memory3 = preader.ReadProcessMemory((IntPtr)pointerbase2, 4, out bytesread);
int valueis = BitConverter.ToInt32(memory3, 0);
label1.Text = valueis.ToString();
} 
```

尽管使用单个指针，该过程可以正常工作，例如：

```
 //HP
 memory = preader.ReadProcessMemory((IntPtr)0x4DF73C, 4, out bytesread);
 pointerbase = BitConverter.ToInt32(memory, 0);
 pointerbase += 0xf4;

 byte[] memory1 = preader.ReadProcessMemory((IntPtr)pointerbase, 4, out bytesread);
 int valueis = BitConverter.ToInt32(memory1, 0);
 label2.Text = valueis.ToString(); 
```

这样就可以了，这里发生的事情非常简单，但是我不知道如何读取具有多个偏移量的弹药代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:10:30.333

我不熟悉 CheatEngine 和它的表格格式，但我没有得到它指向您正在使用的内存地址的印象。

您在 处读取了 4 个字节`0x4DF73C`，用作下一次读取的新内存地址。这重复了几次。基本上，您正在从指向指针的指针读取信息。你确定这是预期的吗？

没有任何理由认为大于 255 的偏移值会成为问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-20T01:46:22.930

使用 FindDMAAddy 为您遍历指针链，这是一个工作示例，请确保您以管理员身份运行：

```
public static IntPtr FindDMAAddy(IntPtr hProc, IntPtr ptr, int[] offsets)
{
    var buffer = new byte[IntPtr.Size];

    foreach (int i in offsets)
    {
        ReadProcessMemory(hProc, ptr, buffer, buffer.Length, out
        var read);
        ptr = (IntPtr.Size == 4) ? IntPtr.Add(new IntPtr(BitConverter.ToInt32(buffer, 0)), i) : ptr = IntPtr.Add(new IntPtr(BitConverter.ToInt64(buffer, 0)), i);
    }
    return ptr;
}

var modBase = GetModuleBaseAddress(proc.Id, "ac_client.exe");

var ammoAddr = FindDMAAddy(hProc, (IntPtr)(modBase + 0x10f4f4), new int[] { 0x374, 0x14, 0 });

Console.WriteLine("Ammo address " + "0x" + ammoAddr.ToString("X"));

int newAmmo = 1337;

byte[] buffer = new byte[4];

ReadProcessMemory(proc.Handle, ammoAddr, buffer, 4, out _);

Console.WriteLine("Ammo value " + BitConverter.ToInt32(buffer, 0).ToString());

WriteProcessMemory(hProc, ammoAddr, newAmmo, 4, out _); 
```

# perl - 如何针对 POE EasyDBI 编写测试？

> ID：16046175
> 
> 赞同：2
> 
> 时间：2013-04-16T20:11:47.140
> 
> 标签：perl, poe

我正在寻找一些想法或技术来编写针对使用`EasyDBI session`访问数据的代码的测试`mysql`。我不想`EasyDBI session`知道被测试，所以我希望找到一种方法来模拟 a`DSN`或类似的东西。但是，我不清楚我该怎么做。

有人以前/解决过这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:25:05.113

我最终使用了相当不错的 DBD:Mock。当我设置我的 easy dbi 组件时，我使用 DBD:Mock: 作为 dsn。然后在选项中我传递了我想要返回的结果集。

```
my @result_set = (list of stuff);

my $eDBI = POE::Component::EasyDBI->spawn(
    alias               => 'eDBI',
    dsn                 => "DBI:Mock:",
    username            => "",
    password            => "",
    options             => { 
        AutoCommit => 0, 
        mock_add_resultset => \@result_set,
    },
    no_connect_failures => 1,
    reconnect_wait      => 2,
    max_retries   => 5,
    connect_error => [ $alias, "dbi_failure", 5 ],
    connected => [ $alias, "dbi_connected" ],
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:23:32.257

也许`Test::Database::Tutorial`/`Test::Database`这就是你需要的。或者您从您的`__DATA__`with创建测试数据库`:cache:`

# android - Android 应用程序启动时的冗长操作

> ID：16046176
> 
> 赞同：0
> 
> 时间：2013-04-16T20:11:53.800
> 
> 标签：android

我正在为 Android 编写一个应用程序，它应该在启动后立即从服务器获取一些数据。

在应用程序启动和服务器响应（或超时，如果服务器关闭）之间，应用程序应该显示“等待”动画。

此后，应该显示正常面板（如果服务器响应）或显示错误对话框（如果服务器没有响应）。

把这个逻辑放在什么地方？

`MainActivity.onCreate`还是其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:17:16.397

如果您希望仅在应用程序第一次启动时加载数据，那么`onCreate()`是正确的地方。如果您想在每次应用程序成为焦点（即前景）时重新加载，那么`onResume()`就是正确的位置。查看有关[活动生命周期](http://developer.android.com/reference/android/app/Activity.html)的文档以获取详细信息。

您需要查看[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)或[`Loader`](http://developer.android.com/reference/android/content/Loader.html)+[`AsyncTaskLoader`](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)以了解在后台执行某些操作的正确模式，然后使用结果更新 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T02:21:48.857

正如杰弗里最初建议的那样，您必须确定何时要连接到服务器？根据这一点，您应该在`onCreate`或中连接到服务器`onResume`。

现在您必须记住一件事，您不能在 manin GUI 线程中执行繁重的任务。否则很有可能`ANR`。所以你必须在不同的线程中实现这个特性。为此，您可以使用不同`Thread`的`Handler`或`AsyncTask`。[你可以在这里](http://developer.android.com/training/articles/perf-anr.html)找到一个不错的文档

我认为使用 AsyncTask 是一个合适的情况。所以这是一个 AsyncTask 的例子

```
private class ServerCommunication extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        // show the connecting screen
        // or you can do this before calling asyncTask
    }

    @Override
    protected Void doInBackground(Void... params) {
        // communicate with server
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        // show the second screeen
    }

} 
```

并使用

```
 ServerCommunication pcd = new ServerCommunication();
    pcd.execute(); 
```

这只是为了建议结构。您绝对可以使用必要的参数或其他方法。

# c# - 如何处理许多可能的值来进行查询？

> ID：16046178
> 
> 赞同：2
> 
> 时间：2013-04-16T20:12:03.180
> 
> 标签：c#, asp.net-mvc

我正在构建一个 MVC 应用程序，用户可以在其中使用大量过滤器来获得他想要的东西。

以下是基于控制器方法的这些过滤器的概述：

```
//
// GET: /Card/SearchIndex
public ActionResult SearchIndex(string objName, string objType, string objCostSymbol, string objCost, string powerSymbol,
                                        string powerValue, string ratingSymbol, string ratingValue, string ownerName, string objSet, 
                                        string objRarity, string addCostValue, int? objNumber,
                                        string addCostValue2, string addCostValue3, string addCostValue4, string addCostValue5, string addCostValue6,
                                        bool? blueColor, bool? redColor, bool? yellowColor, bool? purpleColor, bool? greyColor, bool? blackColor,
                                        bool? musicColor, bool? allColor)
        {
             // MORE CODE HERE...
        } 
```

我想知道如何处理所有这些过滤器的最佳方法，以及如何根据给定的参数获取 objInfo 列表。请记住，某些值可能为空。到目前为止，我所做的只是加载“所有”我可以的 objInfo，然后通过删除不需要的项目对它们进行排序，这在我的意义上是“不聪明的”，但我是 MVC 应用程序的新手，我我试图找到一种更好的方法来做到这一点。

**编辑**

这是生成数据的视图：

```
@using System.Web.Mvc.Html
@model PagedList.IPagedList<MvcApp.Models.ObjInfo>

@{
    ViewBag.Title = "SearchIndex";
}

<h2>Objects Management</h2>

<p>
    @Html.ActionLink("Create New Obj", "Create")
    @using (Html.BeginForm()){
        <p>
            <label>
                Obj Colors : Check a box to search for a color.
            </label>
            All: @Html.CheckBox("allColor", true)<br/>
            Blue: @Html.CheckBox("blueColor", true)
            Red: @Html.CheckBox("redColor", true)
            Yellow: @Html.CheckBox("yellowColor", true) <br/>
            Purple: @Html.CheckBox("purpleColor", true)
            Grey: @Html.CheckBox("greyColor", true)
            Black: @Html.CheckBox("blackColor", true)
            Music: @Html.CheckBox("musicColor", true)
        </p>
        <p>
            <label>
                Obj Values: Select a value in the list below.
            </label>
            Obj Number: <input type="number" min="0" max="9999" name="cardNumber" value="int" style="width: 70px"/><br/>
            Additional Cost (contains): @Html.DropDownList("addCost", String.Empty) + @Html.DropDownList("addCost2", String.Empty)
            + @Html.DropDownList("addCost3", String.Empty) + @Html.DropDownList("addCost4", String.Empty)
            + @Html.DropDownList("addCost5", String.Empty) + @Html.DropDownList("addCost6", String.Empty)  <br/>
            Cost: @Html.DropDownList("objCostSymbol", "=") @Html.DropDownList("objCost", String.Empty)<br />
            Power: @Html.DropDownList("powerSymbol", "=") @Html.DropDownList("powerValue", String.Empty)<br/>
            Rating: @Html.DropDownList("ratingSymbol", "=") @Html.DropDownList("ratingValue", String.Empty)<br />
            <label>
                Obj Text: Write a name, part of a name, or a word.
            </label>
            Obj Name: @Html.TextBox("objName") <br/>
            Owner: @Html.TextBox("ownerName") <br />
            <label>
                Obj Categories: Select a category in the list below.
            </label>
            Type: @Html.DropDownList("objType","All") <br/>
            Obj Set: @Html.DropDownList("objSet", "All") <br/>
            Rarity: @Html.DropDownList("objRarity", "All")<br />
            <div class="float-right">
                <input type="submit" value="Filter" name="submitbutton">
            </div>
        </p>
    }
</p>
<span style="color:red; font-size: 1.7em; font-style: italic;">@ViewData["ErrorMessage"]</span>
<table>
    <tr>
        <th>Obj Name</th>
        <th>Obj Number</th>
        <th>Obj Color</th>
        <th>Additional Cost</th>
        <th>Cost</th>
        <th>Obj Type</th>
        <th>@Html.ActionLink("Power", "SearchIndex", new {sortOrder=ViewBag.PowerSortParm})</th>
        <th>@Html.ActionLink("Rating", "SearchIndex", new {sortOrder=ViewBag.RatingSortParm})</th>
        <th>Rarity</th>
        <th>Obj Set Name</th>
        <th>Owner Name</th>
        <th></th>
    </tr>

    @foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.m_ObjName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.m_ObjNumber)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.m_ObjColor)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.m_ObjAddCost)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.m_ObjCost)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.m_ObjType)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.m_ObjPower)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.m_ObjRating)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.m_ObjRarity)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.m_ObjSet.m_ObjSetName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.m_ObjOwner)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id=item.m_ObjID }) |
                @Html.ActionLink("Details", "Details", new { id=item.m_ObjID }) |
                @Html.ActionLink("Delete", "Delete", new { id=item.m_ObjID })
            </td>
        </tr>
    }
</table>

<div>
    Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)
    of @Model.PageCount

    @if (Model.HasPreviousPage)
    {
        @Html.ActionLink("<<", "SearchIndex", new {page = 1, sortOrder = ViewBag.CurrentSort})
        @Html.Raw(" ")
        @Html.ActionLink("< Prev", "SearchIndex", new {page = Model.PageNumber - 1, sortOrder = ViewBag.CurrentSort})
    }
    else
    {
        @:<<
        @Html.Raw(" ");
        @:< Prev
    }

    @if (Model.HasNextPage)
    {
        @Html.ActionLink("Next >", "SearchIndex", new {page = Model.PageNumber + 1, sortOrder = ViewBag.CurrentSort})
        @Html.Raw(" ")
        @Html.ActionLink(">>", "SearchIndex", new {page = Model.PageCount, sortOrder = ViewBag.CurrentSort})
    }
    else
    {
        @:Next >
        @Html.Raw(" ")
        @:>>
    }
</div> 
```

任何建议都会帮助我做得更好，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:19:03.783

Ho do you normally face this in JavaScript ? You would create an `option` object, like

```
var op = {
   cardName : "..",
   cardType : "" ,
    ...
} 
```

and pass it to a function. Correct ?

The same do in `C#` too. Define a, say, `Conditions` class, like

```
public class Conditions {
    public string CardName {get;set;}
    public string CardType {get;set;}
    .. 
} 
```

and pass it to your function, which controls the values of the properties of that type to act accordingly after.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:10:39.410

你为什么不使用`ModelBinder`. 我认为这对您的情况非常有用。请看下面：

_ 我有一个`Model`：

```
public class Employee
{
   public string Id { get; set; }
   public string FirstName { get; set; }
   public string LastName { get; set; }
   public DateTime BirthDate { get; set; }
   public Address HomeAddress { get; set; }
} 
```

和：`ModelBinder`_`Employee`

```
public class EmployeeBinder : IModelBinder {
        public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext) {
            var emp = new Employee {
                                       Id = controllerContext.HttpContext.Request.Form["Id"],
                                       FirstName = controllerContext.HttpContext.Request.Form["FirstName"],
                                       LastName = controllerContext.HttpContext.Request.Form["LastName"],
                                       BirthDate = new DateTime(int.Parse(controllerContext.HttpContext.Request.Form["year"]),
                                           int.Parse(controllerContext.HttpContext.Request.Form["month"]),
                                           int.Parse(controllerContext.HttpContext.Request.Form["day"]))
                                   };

            return emp;
        }
    } 
```

然后`Controller`：

```
public ActionResult Example(Employee emp) {
            return View(emp);
} 
```

网址：`http://localhost:1034/Home/Example?Id=1&LastName=lazycatit`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T22:08:40.463

这是您处理问题的一种方法。

首先，使用您的搜索参数创建一个 ViewModel。

```
public class FilterViewModel
{
    public string ObjName { get; set; }
    public string ObjType { get; set; }
    public string OtherType { get; set; }
} 
```

在您的控制器中，将其传递给视图。

```
public virtual ActionResult SearchResults()
{
    return View(new FilterViewModel());
} 
```

在您的 SearchResults.cshtml 中，您需要将模型编码为 json，然后使用 ajax 调用来过滤您的结果。假设有一个带有 btnFilterResults id 的按钮。这将使用 ajax 从部分视图（应该是您的表）加载结果。

```
<script type="text/javascript">
     var dataViewModel = @Html.Raw(Json.Encode(Model));

    $("#btnFilterResults").click(function () {
        dataViewModel.ObjName = $("#objName").val(); //Make sure the ids corresponde to your html. 
        dataViewModel.ObjType = $("#objType").val();
        dataViewModel.OtherType = $("#otherType").val();

        $.ajax({
           url: "@Url.Action(MVC.ControllerName.GetSearchResults())",
           data: { viewModel: JSON.stringify(dataViewModel) },
           success: function(data) {
               $("#tableDiv").empty(); //
               $("#tableDiv").html(data);
           }
        });
    });
</script> 
```

最后，在您的控制器中，您可以获得结果：

```
[HttpGet]
public virtual ActionResult LoadTableReporteGeneral(string viewModel)
{
    var filterOptions = JsonConvert.DeserializeObject<FilterViewModel>(viewModel);
    var query = from t in db.YourTableName
                select t;
     //This returns an IQueryable with all of your data, no filtering yet.

     //Start filtering.
     if(!String.IsNullOrEmpty(filterOptions.ObjName))
     {
         query = query.Where(x => x.ObjName == filterOptions.ObjName);
     }  
     if(!String.IsNullOrEmpty(filterOptions.ObjType ))
     {
         query = query.Where(x => x.ObjType == filterOptions.ObjType );
     }  
     //and so on. 
     //Finally return a partial view with your table. 
     return PartialView(MVC.Shared.Views._YourTableName, query);
} 
```

注意：我使用的是 T4MVC 和 Json.Net 包。

希望这可以帮助。

# java - 更改 jtable 中的默认行颜色

> ID：16046187
> 
> 赞同：0
> 
> 时间：2013-04-16T20:12:40.133
> 
> 标签：java, swing, jtable, nimbus

我正在使用 swing 开发一个简单的 java 应用程序。我使用`JTable`元素。问题是，默认情况下，表格行是白色和灰色的，就像这篇文章[Setting color in a row of a Jtable 中一样](https://stackoverflow.com/questions/9805447/setting-color-in-a-row-of-a-jtable)。我想让它们颜色相同，例如所有行都是白色的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:23:23.600

您可以像这样覆盖 JTable 的 prepareRenderer 方法

```
JTable table = new JTable(...)
{
    public Component prepareRenderer(
        TableCellRenderer renderer, int row, int column)
    {
        Component c = super.prepareRenderer(renderer, row, column);
        c.setBackground(Color.WHITE);
        return c;
    }
}; 
```

或者，您可以创建自己的 TableCellRenderer，它执行相同的操作（选择要渲染的背景颜色），但在单元级别上，并将该渲染器用于每个列。

# prolog - Prolog在列表错误中找到最小值

> ID：16046192
> 
> 赞同：1
> 
> 时间：2013-04-16T20:13:03.387
> 
> 标签：prolog, shortest-path, gnu-prolog

我试图让我的代码工作，但不知何故我陷入了一个问题，我是个新手。这是我的代码。

```
 dist(valmiera, riga, 107).
%dist(riga, valmiera, 107).
dist(cesis, riga, 70).
dist(valmiera, rujiena,  50).
dist(rujiena, valka, 30).
dist(valmiera, strenci, 200).
dist(strenci, valka, 30).
dist(valmiera, cesis, 40).
dist(liepaja, saldus, 100).
dist(saldus, riga, 200).
dist(liepaja, jelgava, 270).
dist(jelgava, riga, 50).

path(A,B,C,[A,B]):- dist(A,B,C).
path(A,B,D,[A|As]):- dist(A,W,C), path(W,B,E,As), D is C+E.
%, findMin(YList, E), path(A,B,X,E),!.
shortestPath(A,B,X,E):-findall(Y,path(A,B,S,Y),YList), findMin(YList, E), path(A,B,X,E),!.

findMin([],fail).
findMin([H],E):-E=H,!.
findMin([H,V],E):-H<V, E=H,!; V<H, E=V, !; H=:=V, E=H, !.
findMin([H|T],E):-findMin(T,U), H<U, E=H,!;findMin(T,U), U<H, E=U,!;findMin(T,U), U=:=H, E=U,!. 
```

但是当我调用 findMin() 我得到这个错误

未捕获的异常：error(type_error(evaluable,'.'/2),(<)/2)

我真的卡住了，不知道该怎么办。任何帮助将不胜感激。

应用程序的目的是通过调用 shortestPath() 获得最短路径，路径在 dist (a,b,distance)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T04:05:14.483

例外是因为您尝试比较的术语是列表。

```
[liepaja,saldus,riga]<[liepaja,jelgava,riga] ? 
```

一种表达：

```
Term1 < Term2 
```

如果成功

```
eval(Term1) < eval(Term2) 
```

因此，Term1 和 Term2 必须是可评估的项（例如，(1+1)<(2+2)）。

尝试更改 shortestPath/4 正文：

```
shortestPath(A,B,X,E):-
   findall(couple(W,P),path(A,B,W,P),WP_List),
   findMin(WP_List, couple(Weight,ShortestPath)),... 
```

通过这种方式，您有一个情侣列表（重量，路径），在 findMin 中您可以获得每个路径的重量。

# sql-server - 使用 MSSQL 计算 id 的唯一出现次数

> ID：16046195
> 
> 赞同：1
> 
> 时间：2013-04-16T20:13:17.383
> 
> 标签：sql-server, ms-access

我正在尝试计算每年唯一出现的教师。我确信结果不是唯一的。

我的查询

```
SELECT DISTINCT count (tblTeachers.TeacherID) AS uniqueTeacherCount, tblSchoolYears.SchoolYear

FROM tblTeachers INNER JOIN tblTeacher_Building 
.
.

GROUP BY tblSchoolYears.SchoolYear
ORDER BY tblSchoolYears.SchoolYear DESC; 
```

结果（计算 TeacherID 的重复项）

![在此处输入图像描述](https://i.stack.imgur.com/cSpja.png)

我也试过

```
SELECT COUNT(DISTINCT tblTeachers.TeacherID) AS uniqueTeacherCount, tblSchoolYears.SchoolYear

FROM tblTeachers INNER JOIN tblTeacher_Building 
.
.

GROUP BY tblSchoolYears.SchoolYear
ORDER BY tblSchoolYears.SchoolYear DESC; 
```

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:20:50.580

```
Select Count(TeacherID) AS uniqueTeacherCount,SchoolYear
from
(
SELECT DISTINCT tblTeachers.TeacherID, tblSchoolYears.SchoolYear
FROM tblTeachers INNER JOIN tblTeacher_Building 
.
.
) hlp
GROUP BY SchoolYear
ORDER BY SchoolYear DESC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:24:42.070

你很近。我想这就是你要找的：

```
SELECT COUNT(*)
FROM
(
SELECT DISTINCT count (tblTeachers.TeacherID) AS uniqueTeacherCount, tblSchoolYears.SchoolYear ...
) 
```

# bash - 从行号 grep 中提取最小值和最大值

> ID：16046197
> 
> 赞同：2
> 
> 时间：2013-04-16T20:13:40.843
> 
> 标签：bash

目前，我在 bash 脚本中有一个命令，该命令对文本文件中的给定字符串进行 greps 并仅使用 sed ...

```
grep -n "<string>" file.txt | sed -n 's/^\([0-9]*\).*/\1/p' 
```

grep 可以找到多个匹配项，因此打印多个行号。从这个命令的输出中，我想提取最小值和最大值，并将它们分配给相应的 bash 变量。我怎样才能最好地修改我现有的命令或添加新命令来完成这个？如果需要使用 awk 或 sed，我倾向于使用 sed。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:18:41.480

You can get the minimum and maximum with this:

```
grep -n "<string>" input | sed -n -e 's/^\([0-9]*\).*/\1/' -e '1p;$p' 
```

You can also read them into an array:

```
F=($(grep -n "<string>" input | sed -n -e 's/^\([0-9]*\).*/\1/' -e '1p;$p'))
echo ${F[0]} # min
echo ${F[1]} # max 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T20:18:13.913

```
grep -n "<string>" file.txt | sed -n -e '1s/^\([0-9]*\).*/\1/p' -e '$s/^\([0-9]*\).*/\1/p' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T20:34:56.463

这就是我的做法，因为`grep -n 'pattern' file`以格式打印输出`line number:line contents`......

```
 minval=$(grep -n '<string>' input | cut -d':' -f1 | sort -n | head -1)
    maxval=$(grep -n '<string>' input | cut -d':' -f1 | sort -n | tail -1) 
```

该`cut -d':' -f1`命令在冒号周围拆分`grep`输出并仅拉出第一个字段（行号），`sort -n`按升序对数字行号进行排序（它们已经在其中，但确保它是一个很好的做法），`head -1`然后`tail -1`删除排序列表中的第一个和最后一个值，即最小值和最大值，并将它们分别分配给变量`$minval`和`$maxval`。

希望这可以帮助！

编辑：原来你不能按照我最初的方式去做，因为回显一个换行符分隔值的列表显然会将它们连接成一行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T20:25:27.677

```
grep .... |awk -F: '!f{print $1;f=1} END{print $1}' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T21:18:40.407

它可以通过一个过程来完成。像这样：

```
awk '/expression/{if(!n)print NR;n=NR} END {print n}' file.txt 
```

然后您可以分配给一个数组（按照 perreal 的建议）。或者您可以修改此脚本并使用 eval 分配给变量

```
eval $(awk '/expression/{if(!n)print "A="NR;n=NR} END {print "B="n}' file.txt)
echo $A
echo $B 
```

输出（`file.txt`包含三行`expression`）

```
1
3 
```

# java - 如果类具有参数化构造函数，为什么Java不提供默认构造函数？

> ID：16046200
> 
> 赞同：8
> 
> 时间：2013-04-16T20:13:57.917
> 
> 标签：java, constructor

如果类具有参数化构造函数，为什么Java不提供默认构造函数？考虑以下示例

```
class A {
    int a;

    public A() {
    }

    public A(int val) {
        a = val;
    }
} 
```

这里我明确需要添加默认构造函数。有什么理由，为什么Java不为具有参数化构造函数的类提供默认构造函数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T20:19:44.157

原因与安全性和界面的结合有关。编译器不应该给你没有明确定义的方法。如果您不指定任何构造函数，则一个例外是方便的无参数构造函数。如果您确实指定了构造函数，编译器会假定您不想要任何其他构造函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T20:33:24.423

因为如果编译器不会自动为每个类提供 arg 构造函数，它将破坏类设计。考虑 Scanner 类。它的构造函数很少，您可以在其中指定要从何处读取数据。如果编译器也不会添加 arg 构造函数，那么在调用 Scanner 的一种方法以从使用此构造函数初始化的对象中读取数据后，将引发异常，因为不会指定数据源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T20:36:53.903

在某些情况下，不希望使用默认构造函数。该语言必须提供一些方法来告诉编译器不要生成它。使用除了显式构造函数之外的其他指示符会导致问题，例如在禁用默认值时需要指定构造函数。

当前的安排通过确保在禁用默认值时有另一个构造函数来消除该问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-16T20:15:16.643

如果您的类没有定义任何构造函数，Java 将为您提供默认构造函数。

如果您定义了**任何**构造函数（即使是没有任何参数的构造函数），编译器也不会再给您一个。

它是这样工作的，因为它是这样指定的。[您可以在语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.9)中阅读更多相关信息

# javascript - TinyMCE 自定义“文件”菜单栏

> ID：16046208
> 
> 赞同：19
> 
> 时间：2013-04-16T20:14:20.897
> 
> 标签：javascript, css, tinymce

有没有办法在 TinyMCE 4.0 中自定义（添加和删除选项等）菜单栏？我无法找到有关编辑器特定部分的任何文档。下图展示了我正在谈论的部分。![在此处输入图像描述](https://i.stack.imgur.com/m3w10.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-20T11:37:34.387

第 4 版是一次重大改写，文档有一段时间不同步。

通过实验，我发现可以单独启用/禁用下拉菜单或禁用整个菜单栏。

仅启用特定的下拉菜单：

```
tinymce.init({
    selector: "textarea",
    menubar: "edit format"
}); 
```

禁用菜单栏：

```
tinymce.init({
    selector: "textarea",
    menubar: false
}); 
```

[菜单栏配置文档](https://www.tinymce.com/docs/configure/editor-appearance/#menubar)现已添加到 TinyMCE 站点。

此外，如果您想完全自定义整个菜单，请查看[菜单配置文档](http://www.tinymce.com/wiki.php/Configuration:menu)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-24T17:58:09.507

我最终通过调整传递给的设置对象中的`menu`和`toolbar`属性来自定义菜单栏和工具栏`tinymce.init()`：

```
// ...
  menu : {
    edit: { title: 'Edit', items: 'undo redo  | cut copy paste selectall | searchreplace' },
    insert: { title: 'Insert', items: 'link charmap' },
    format: { title: 'Format', items: 'bold italic underline strikethrough superscript subscript | removeformat' },
    table: { title: 'Table', items: 'inserttable tableprops deletetable | cell row column' }
  },
  toolbar: 'undo redo | bold italic underline | link hr | alignleft aligncenter alignright | blockquote bullist numlist outdent indent | code',
// ... 
```

我通过在源代码中四处寻找`.addMenuItem(`和找到了每个菜单/按钮的术语`.addButton(`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-08T12:41:04.717

在**TinyMCE 4.x**版本中，“ [**code**](http://www.tinymce.com/wiki.php/Plugin%3acode) ”插件用于显示/编辑编辑器内容的 HTML 代码。

要[控制](http://www.tinymce.com/wiki.php/Controls)工具栏，最高 4.0.6 版本，[`theme_advanced_button<1-n>`](http://www.tinymce.com/wiki.php/Configuration3x%3atheme_advanced_buttons_1_n)使用选项，但高于 4.0.6 版本，**[`toolbar`](http://www.tinymce.com/wiki.php/Configuration%3atoolbar)**或[**`toolbar<1-N>`**](http://www.tinymce.com/wiki.php/Configuration%3atoolbar%3CN%3E)使用选项。

通过将**“ `code`”**插件添加到工具栏选项，**“工具”**菜单将与**“源代码”**子菜单一起添加（作为按钮**“ `<>`”**（图标））。

```
tinyMCE.init({
    // ......
    // ......
    plugins: "searchreplace code",

    toolbar1: "separator forecolor backcolor code",
    toolbar2: "<<<some buttons list>>>",
    toolbar3: "<<<some buttons list>>>",
    toolbar4: "<<<some buttons list>>>",
}); 
```

# ios - 有没有办法拦截 UIWebView dataDetectorType 操作表？

> ID：16046210
> 
> 赞同：0
> 
> 时间：2013-04-16T20:14:25.640
> 
> 标签：ios, uiwebview

有没有人知道一种方法来覆盖在 UIWebViews dataDetectorTypes 中创建的链接的默认行为？它们会导致系统操作表弹出，并且似乎不使用任何应用程序级别的调用，例如 UIApplication openURL 或 UIWebViewDelegate 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T15:04:11.200

与 WWDC 实验室的 Apple 工程师交谈，他们被告知目前没有钩子可以做到这一点。我们最终在 html 正文文本上手动运行 NSDataDetectors 并插入我们自己的自定义锚标记，然后在 webViewWillLoad... 委托消息中检测这些标记。

# python - 在 Python 中绘制未填充的正方形和三角形

> ID：16046211
> 
> 赞同：0
> 
> 时间：2013-04-16T20:14:26.750
> 
> 标签：python, for-loop, python-3.x

我有绘制实心正方形的代码：

```
for i in range(0,n):
    print(n*"*") 
```

哪个打印（显然取决于 n 的值）：

```
****
****
****
**** 
```

还有一个实心三角形：

```
for i in range(1,n+1):
    print((n-(n-i)) * "*") 
```

哪个打印（也取决于 n）：

```
*
**
***
**** 
```

但我不确定如何调整这些来绘制这样的正方形：

```
****
*  *
*  *
**** 
```

或者像这样的三角形：

```
*
**
* *
*  *
*   *
*    *
*     *
******** 
```

这样每个缺失的星号都被替换为空白字符（即空格）与主要上下文无关。我只需要能够根据用户的输入来绘制这四样东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:25:21.350

对于广场：

```
import sys

for i in range(n):
    for j in range(n):
        if i == 0 or j == 0 or i == n - 1 or j == n - 1:
            sys.stdout.write("*")
        else:
            sys.stdout.write(" ")
    print("") 
```

n = 5 的输出：

```
*****
*   *
*   *
*   *
***** 
```

对于三角形：

```
import sys

for i in range(n):
    for j in range(i+1):
        if j == 0 or j == i or i == n - 1:
            sys.stdout.write("*")
        else:
            sys.stdout.write(" ")
    print("") 
```

n = 5 的输出：

```
*
**
* *
*  *
***** 
```

请注意，我使用 sys.stdout.write 而不是 print 以避免额外的空格或换行符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T20:23:53.410

这是三角形的解决方案，它有点棘手，您可以自己找出矩形。

```
>>> for i in range(0,n+2):
        if i in [0,n+1]:
                print (i+1)*"*"
        else:
                print("*" + (" "*(n-1-(n-i))) + "*")

*
**
* *
*  *
*   *
*    *
******* 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T20:29:52.430

对于三角形：

```
In [26]: def hollow_tri(n):
   ....:     print "*"
   ....:     for i in xrange(2,n):
   ....:         print "*{0}*".format(" "*(i-2))
   ....:     print "*"*n
   ....:     

In [27]: hollow_tri(8)
*
**
* *
*  *
*   *
*    *
*     *
********

In [28]: hollow_tri(4)
*
**
* *
**** 
```

对于广场：

```
In [29]: def hollow_square(n):
    print "*"*n
    for i in xrange(2,n):
        print "*{0}*".format(" "*(n-2))
    print "*"*n
   ....:     

In [30]: hollow_square(4)
****
*  *
*  *
****

In [31]: hollow_square(8)
********
*      *
*      *
*      *
*      *
*      *
*      *
******** 
```

# c++ - 有效管理 Eclipse/CDT 构建配置有哪些好的选择？

> ID：16046214
> 
> 赞同：2
> 
> 时间：2013-04-16T20:14:43.283
> 
> 标签：c++, eclipse, project-management, eclipse-cdt, buildconfiguration

我们的目标是利用嵌入式 ARM/Linux 平台中的软件重用。我们的一些硬件平台专为满足客户的特定需求而设计。当然，应用程序也会以各种方式进行定制。

虽然它不是 Android 产品，但与我们的产品相比它太大了，它确实做了一个很好的类比，除了始终基于 Linux 之外，UI 有不同的外观和感觉，有不同的手机，有不同的CPU，不同的无线电有不同的固件等。所以有很多配置需要管理。并且配置是一个稀疏矩阵，因为并非所有组合都存在。

持续集成在未来也并非完全不可能。

因此，在不久的将来，终点似乎是：

1.  我们希望继续开发并在任何地方应用的一组核心库。类继承提供定制。所以有一个应用程序类型的构建配置。

2.  少数定制的 ARM/Linux 硬件平台。似乎我们的图书馆的 BSP/board 类 HAL 是要走的路。这意味着选择正确的硬件/板的构建配置。

3.  少数与硬件/板匹配的协处理器固件，但我们库的 API 是相同的。所以有一个取决于固件的构建配置。

4.  少数不同外观和感觉/应用程序的实现。这是另一个构建配置。

不用说，有许多包含路径、#define 和文件排除来使所有这些工作。

如您所见，如果我们想要在工作空间中收集 Eclipse/CDT 项目，允许我们在同一环境中一次构建所有这些变体，那么在 Eclipse/CDT 中有很多配置需要创建和管理。如果 GUI 是唯一的管理方式，则需要大量的鼠标点击。在那之后，没有简单的方法来验证所有配置是否正确设置，而无需更多的鼠标点击。没有仪表板视图。是否有基于文本编辑器的方法来管理所有这些？

我确实试着做我的功课。我了解“路径和符号”选项卡中有“导入设置...”和“导出设置...”按钮。但它一次只为一个项目做一个配置。看起来不是很系统，很容易漏掉一些东西。

我也直接查看了 .cprojects，但我担心如果我犯了错误，Eclipse 会默默地做意想不到的事情，并且会付出很大的努力来修复。

各位高手有没有更好的建议？

# asp.net - Web.config 重写映射

> ID：16046220
> 
> 赞同：5
> 
> 时间：2013-04-16T20:15:04.003
> 
> 标签：asp.net, redirect

我正在尝试为当前站点的主页和各个页面重写一些规则，以将人们指向一个新站点，如下所示；

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rewriteMaps>
                <rewriteMap name="Redirects">
                    <add key="/" value="http://www.domain2.co.uk" />
                    <add key="/contact-us/" value="http://www.domain2.co.uk/contact-us/" />
                </rewriteMap>
            </rewriteMaps>
        </rewrite>
        <httpErrors errorMode="DetailedLocalOnly" />
    </system.webServer>
</configuration> 
```

重定向似乎没有做任何事情。:( 有人能告诉我我的语法是否正确吗？

谢谢你。

# vb.net - 如何获得课程的限定词

> ID：16046224
> 
> 赞同：0
> 
> 时间：2013-04-16T20:15:13.973
> 
> 标签：vb.net, class

我有以下代码来根据类名创建我的一个类的实例。

```
'Get a System.Type corresponding to the name of the parent class  
Dim tt As Type = Type.GetType(item.ParentClass)
'Create an instance of the specified type using the types default constructor
Dim theObject As Object = Activator.CreateInstance(tt) 
```

如果我有完整的课程，这很好用，`MainClassName.Namespace.ClassName` 但如果我尝试用 just 来做到这一点，就`ClassName`等于 `tt`没有。

有没有办法使用`ClassName`和获取完全限定名称，如`MainClassName.Namespace.ClassName`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:36:02.610

您需要使用[Type.AssemblyQualifiedName](http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx)，如下所示：

```
'part 1 of your code - store class name in a universal format
Dim className As String = GetType(item.ParentClass).AssemblyQualifiedName

'part 2 of your code - use a previously stored class name to create instance
Dim tt As Type = Type.GetType(className)
Dim theObject As Object = Activator.CreateInstance(tt) 
```

归功于 SO 上的这个[答案](https://stackoverflow.com/a/5282678/897326)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:56:48.307

> 有没有办法使用`ClassName`和获取完全限定名称，如`MainClassName.Namespace.ClassName`

不，这在逻辑上是行不通的。考虑以下情况：您有两个类，`Foo.X`并且`Bar.X`. 因此，仅指定`X`是模棱两可的。事实上，这首先是命名空间和完全限定名称背后的动机。

即使有可能（例如通过返回候选类型*列表*），这也是不切实际的，因为它需要运行时遍历所有引用程序集加载的整个类列表。这可能是一个*巨大*的数字，即使只加载了基本框架。`GetType`效率会非常低。

# ios - NSURLCredentialPersistenceForSession：这里的会话是什么意思？

> ID：16046225
> 
> 赞同：3
> 
> 时间：2013-04-16T20:15:15.253
> 
> 标签：ios, objective-c

我注意到您可以使用会话持久性制作凭据。在这种情况下，这意味着什么？我看不出这是如何关联或连接到网络服务器会话的。

iOS应用程序中是否有单独的会话概念，因为我不明白如果您将此类凭据添加到存储中会发生什么。

我看到这个的原因是永久凭证在添加到 NSURLCredentialStorage 时是共享的。我对任何随机应用程序都能够访问我客户的凭据的想法不满意。同时，我不想让用户每次启动应用程序时都输入凭据，我希望它们在注销或凭据更改之前可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:19:09.183

A session in this case is until the App that placed the credential in the store exits. It's not guaranteed to stay the whole time, and I'm unclear on whether it is persistent across backgrounding on iOS, but it definitely does not persist across application exits, and is not tied to a single connection lifetime. Of course, this is all experimental knowledge, as the documentation only states that it isn't stored in the shared space.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-24T10:02:27.300

*   会话是指您的应用程序实例。凭据存储在您的应用程序全局命名空间中。
*   再次关闭并重新启动应用程序，您可能找不到存储的凭据。

请参阅[此处](https://github.com/thatzprem/AuthenticationChallenge-Example.git "鼠标悬停时出现此文本")发布的示例代码！

希望这可以帮助。

# php - 如何在for循环后将另一行添加到PHP中的数组中

> ID：16046231
> 
> 赞同：-1
> 
> 时间：2013-04-16T20:15:24.703
> 
> 标签：php, arrays

嘿伙计们，我有以下几点：

```
for($i; $i< count($nontimedif); $i++){      
    $data[$i] = array(
      "Driver Chose Non-Compliance:" => $nontimedif[$i] . ", 
      " . $nonfirstname[$i]. ", 
      " . $nonlastname[$i]. ", 
      " . $nonemail[$i]. ", 
      " . .......
    );
} 
```

所以在运行之后我想添加一些新行，因为这比传输到 .csv 文件中。那么我该如何在最后添加呢？

我如何制作 .csv 文件：

```
function cleanData(&$str)
  {
   // escape tab characters
    $str = preg_replace("/\t/", "\\t", $str);

    // escape new lines
    $str = preg_replace("/\r?\n/", "\\n", $str);

    // convert 't' and 'f' to boolean values
    if($str == 't') $str = 'TRUE';
    if($str == 'f') $str = 'FALSE';

    // force certain number/date formats to be imported as strings
    if(preg_match("/^0/", $str) || preg_match("/^\+?\d{8,}$/", $str) || preg_match("/^\d{4}.\d{1,2}.\d{1,2}/", $str)) {
      $str = "'$str";
    }

    // escape fields that include double quotes
    if(strstr($str, '"')) $str = '"' . str_replace('"', '""', $str) . '"';

  }

// filename for download
  $filename = "website_data_" . date('Ymd') . ".xls";

  header("Content-Disposition: attachment; filename=\"$filename\"");
  header("Content-Type: application/vnd.ms-excel");

  $flag = false;
  foreach($data as $row) {
    if(!$flag) {
      // display field/column names as first row
      echo implode("\t", array_keys($row)) . "\r\n";
      $flag = true;
    }
     array_walk($row, 'cleanData');
    echo implode("\t", array_values($row)) . "\r\n";
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T20:16:24.723

```
$data[] = array( 'Key:' => 'Whatever you want to add'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T20:33:34.933

使用 array_push

```
$additionalRow = array( 'Whatever'.'whatever'.$somethingelse);
array_push($data, $additionalRow); 
```

或者，您可以这样做：

```
$headers = array_keys($data);
$lastKey = array_pop($data);
$lastKey++;
$data[$lastKey] - $additionalRow; 
```

祝你好运！希望这有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T20:31:07.750

对于这种密钥未知的情况，array_push 可能是一个很好的解决方案。你可以检查这个 [http://php.net/manual/en/function.array-push.php](http://php.net/manual/en/function.array-push.php)

# java - 记住我功能+其他安全问题

> ID：16046233
> 
> 赞同：1
> 
> 时间：2013-04-16T20:15:36.720
> 
> 标签：java, spring-security, shiro

我想为登录用户实现一个简单的记住我，这样他们在关闭浏览器后将保持登录状态。所以我正在考虑创建一个 cookie，其中包含由 UUID.randomUUID 生成的唯一密钥，并在服务器端将其映射到用户名。

这足够安全吗？有哪些风险？我应该采取预防措施来防止黑客尝试随机密钥吗？

我正在考虑使用 spring security 或 apache shiro 之类的身份验证框架，但我找不到它们给我的任何好处（我不需要复杂的访问控制，只需要用户注册/登录）。我是否遗漏了一些在安全方面至关重要的东西？

**更新**

我想我的问题实际上是：像 spring 和 shiro 这样的框架是否做了一些更复杂的事情来记住我产生我可能无法匹配的安全性的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:28:25.037

Spring security 提供声明式安全性。我假设您正在为您的应用程序使用 spring 框架。Spring 安全性和 Spring 框架通常提供了灵活性，直到您需要它时才会意识到。我曾经遇到过需要意外定制的情况，我很感谢 Spring。

Spring security 允许您轻松插入身份验证模型 - 基于 DB、基于 LDAP 等。如果您想使用默认登录页面，它提供默认登录页面，根据访问的 URL 提供到登录页面的重定向，并允许用户继续访问该 URL身份验证完成以及更多的事情，这减少了要编写的样板代码的数量。它还提供了记住我的实现。[http://static.springsource.org/spring-security/site/docs/3.0.x/reference/remember-me.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/remember-me.html)。但是，需要详细考虑安全隐患。

Spring security 本身不会为记住我提供更好的实现。但是，我认为可以考虑它提供的其他优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:40:25.423

让我们从“记住我功能如何工作？”的答案开始。spring-security 和 shiro 都有类似的记住我服务实现。他们将加密的主题保存在 cookie 中，然后从该 cookie 验证用户。这意味着服务器使用标头向客户端发送响应`Set-Cookie:<character sequence>`，然后客户端使用标头发送请求`Cookie:<character sequence>`。

现在让我们假设我们要登录某人的帐户：

1.  我们可以使用受害者的计算机。（因此，如果用户通过记住我服务进行身份验证，则永远不要执行高度敏感的操作）。当会话未完成（浏览器打开）并且受害者去吃午饭时，这也可以应用于用户名密码身份验证。
2.  我们可以分析 http 流量以检索 Cookie 标头，然后使用此标头登录。（因此您可以使用 https 来防止流量分析）。这也可以应用于用户名密码认证。
3.  我们可以尝试随机密钥（您可以结合一些复杂的主题编码算法使用一些蛮力过滤器）。这也可以应用于用户名密码认证。

结论：如果用户通过记住我服务进行身份验证，切勿执行高度敏感的操作。如果需要，请使用 https。使用蛮力防御。想想加密。

# vb.net - 在结构组中创建变量的列表（Of）或索引

> ID：16046235
> 
> 赞同：0
> 
> 时间：2013-04-16T20:15:55.093
> 
> 标签：vb.net, dynamic

`Player1HandGroup(Number).QuantityInteger`是玩家在我的游戏中拥有的每张特定卡片的卡片数量。

`Player1handgroup`有28个索引。游戏有5名玩家。

目前我有

```
Player1HandGroup(Number).QuantityInteger
Player1HandGroup(Number).QuantityInteger2
Player1HandGroup(Number).QuantityInteger3
Player1HandGroup(Number).QuantityInteger4
Player1HandGroup(Number).QuantityInteger5 
```

代表游戏中的每个玩家。

每次与不同的播放器打交道时，我都必须经常重复相同的代码，以便它与正确的播放器一起使用。

我想知道是否可以为 Quantity 整数添加一个索引，或者在表示每个玩家的数量整数的末尾动态添加一个数字，以便我可以清理我的代码。

```
Structure Group
        Public CardNameString, CardType As String
        Public QuantityInteger2, QuantityInteger3, QuantityInteger4, QuantityInteger5, DamageInteger, ID, HitPoints As Integer
        Public QuantityInteger() As Integer
    End Structure

Private Sub LunchMoneyMainForm_load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

DeckGroup(0).QuantityInteger(0) = 4
    DeckGroup(1).QuantityInteger(0) = 1
    DeckGroup(2).QuantityInteger(0) = 4
    DeckGroup(3).QuantityInteger(0) = 4
    DeckGroup(4).QuantityInteger(0) = 4
    DeckGroup(5).QuantityInteger(0) = 4
    DeckGroup(6).QuantityInteger(0) = 4
    DeckGroup(7).QuantityInteger(0) = 4
    DeckGroup(8).QuantityInteger(0) = 1
    DeckGroup(9).QuantityInteger(0) = 1
    DeckGroup(10).QuantityInteger(0) = 1
    DeckGroup(11).QuantityInteger(0) = 1
    DeckGroup(12).QuantityInteger(0) = 8
    DeckGroup(13).QuantityInteger(0) = 4
    DeckGroup(14).QuantityInteger(0) = 10
    DeckGroup(15).QuantityInteger(0) = 1
    DeckGroup(16).QuantityInteger(0) = 4
    DeckGroup(17).QuantityInteger(0) = 8
    DeckGroup(18).QuantityInteger(0) = 4
    DeckGroup(19).QuantityInteger(0) = 8
    DeckGroup(20).QuantityInteger(0) = 1
    DeckGroup(21).QuantityInteger(0) = 4
    DeckGroup(22).QuantityInteger(0) = 4
    DeckGroup(23).QuantityInteger(0) = 4
    DeckGroup(24).QuantityInteger(0) = 4
    DeckGroup(25).QuantityInteger(0) = 4
    DeckGroup(26).QuantityInteger(0) = 4
    DeckGroup(27).QuantityInteger(0) = 1

 Private Sub StartButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles StartButton.Click

For StartHands = 0 To 4
            Call RandomNumberGenerator()
            'Cardslots Player1
            If CardTypeArray(StartHands) = "" Then
                If DeckGroup(Number).QuantityInteger(0) > 0 Then
                    DeckGroup(Number).QuantityInteger(0) -= 1
                    Player1HandGroup(Number).QuantityInteger(0) += 1
                    CardCheckBoxArray(StartHands).Text = Player1HandGroup(Number).CardNameString
                    CardTypeArray(StartHands) = Player1HandGroup(Number).CardType
                    Me.NumberArray(StartHands) = Number
                Else
                    'Recall Procedure if Generated Random Number is not allowed due to QuantityInteger <= 0
                    Call StartButton_Click(sender, e)
                End If
            End If
        Next StartHands 
```

这些是与此相关的主要代码片段。我包括了事件过程部分，以显示每个部分属于哪些过程。

# ruby - 是否可以使用 MagLev for ruby 构建生产 Web 应用程序？

> ID：16046238
> 
> 赞同：14
> 
> 时间：2013-04-16T20:16:06.460
> 
> 标签：ruby, web-applications, maglev

总的来说，我是 Rails 和 ruby​​ 的粉丝，可能会着手为金融机构构建企业应用程序。我真的很喜欢磁悬浮的想法，不知道是否值得考虑。我没有找到太多关于磁悬浮是否在野外生产中使用的信息，更不用说用于高安全性目的了。

是否有人使用 MagLev 成功部署了关键任务应用程序？如果是这样，您能否提供有关您的体验的详细信息，并可能命名该应用程序？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-17T02:18:38.383

TL;DR：我们即将在 MagLev 上发布一个生产应用程序。你应该等一下。

我为篇幅道歉；我对此有很多不连贯的想法，我仍在尝试连接。

我的团队即将在 MagLev 上启动第一个生产应用程序。这是一条崎岖不平的道路，但我们非常有信心最终证明这是一个正确的决定。我在今年的一些会议上谈论我们的经验，我很高兴能更详细地谈论它，但这里有一个（长）概述。

您可能已经知道，GemStone 拥有支持金融行业公司的悠久而自豪的历史。我们主要是一家 Ruby 商店，我们开发金融应用程序。我们关心我们的数据，因此 GemStone 对我们来说是一个显而易见的选择。MagLev 允许我们使用我们现有的 Ruby 知识和大部分代码，并将我们的数据存储在 GemStone 中。这是（表面上）完美的婚姻。

我们选择从一个小型应用程序开始，它对我们的用户来说是新的，并且将是最容易和最低风险的移动。我们选择了与我们的托管结账平台相关联的发票展示应用程序。能够简单地持久化对象而不用担心映射或转换，这使得开发变得非常快速和愉快，并且我们已经避免了许多与 ORM 和持久性相关的问题。我们计划继续将我们现有的其余应用程序迁移到 MagLev。

也就是说，除非满足以下所有条件，否则您可能应该等待：

1.  您是（或与）Ruby 专家一起工作，他们对语言及其实现非常熟悉，可以调查和修复实现细节，其中许多是用 Smalltalk 编写的。

2.  您是（或与）一起了解在 Smalltalk 中工作的细微差别的开发人员，但通常是基于图像的环境。

3.  您能够非常熟悉 GemStone/S 平台、语言、部署机制和工具。

4.  如果你碰壁了，你准备放弃一切并在 Smalltalk 中重新编写你的应用程序。（我承认：我希望 MagLev 有时会完全倒下，只是为了找个借口。）

我们经常遇到一些问题。因为，对我们来说，以上所有内容都是正确的，所以我们继续前进。我们经常解决以下每个“问题”。有时每天。

1.  回溯几乎不可能单独阅读，当您遇到许多异常时，您必须使用 GemStone Smalltalk 的命令行调试器。这里有相当长的学习曲线。

2.  Ruby 库的兼容性...比您希望的要少。基本上，您可以指望用纯 Ruby 编写的大多数东西都没有问题。基本上任何使用没有 ffi 的 C 扩展的东西都被淘汰了。这是数量惊人的东西。可笑地过度使用元编程的库使 MagLev 感到困惑。这是 Rails 领域的很多事情。

3.  代码重新加载和迁移是手动的。当您更改磁盘上持久对象的类定义时，您必须管理加载新代码并手动迁移现有的持久实例。

综上所述，对我们帮助最大的是，我是大多数（所有？）在 GemStone 了解 MagLev 的人的朋友。他们对我们来说太棒了。HPI 的学生在修复错误和帮助我们解决问题方面也做出了宝贵的贡献。

关于我的团队，因为我拥有的团队基本上是使这成为可能的原因。我们是四个开发人员。我们每个人都有十多年的经验（我认为我们实际上都超过了 12-15 岁）。我们中的一些人（至少我）有十多年的 Ruby 经验。我们在使用 Smalltalk 方面拥有不同程度的经验，尽管我们都没有发布过可以从中获利的生产应用程序。我活跃于 Ruby 和 Smalltalk 社区（并且正在从前者“过渡”到后者）。

我们的经历有点艰难，但大多是愉快的。如果我当时知道我现在知道的，我会再做一次。我希望我们在这方面的工作将帮助其他人在未来做同样的事情。我认为 MagLev 是未来有价值的工具。

# elasticsearch - ElasticSearch terms_stats 查询 - 从结果中排除术语

> ID：16046240
> 
> 赞同：0
> 
> 时间：2013-04-16T20:16:10.297
> 
> 标签：elasticsearch, facets

**我目前有一个术语方面，它使用排除**选项从其结果中排除某些术语。我对 term_stats 方面进行了相同的尝试，但没有丢弃相同的结果。

我查看了 Elasticsearch 文档（[http://www.elasticsearch.org/guide/reference/api/search/facets/terms-stats-facet/](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-stats-facet/)），发现 term_stats 方面似乎没有排除选项. 因为我并不总是相信我对 elasticsearch 文档的完整解释，所以我想看看是否有人找到了解决方法（除了在客户端处理结果之外）。

这个方面没有按预期工作：

```
"keywords_bad":{
  "terms_stats":{
    "size":100,
    "value_field":"retweet_count",
    "exclude":["http","consected"],
    "order":"total",
    "key_field":"text"
  }
} 
```

而这个方面按预期工作：

```
"keywords_good":{    
  "terms":{
    "size":100,
    "exclude":["http","consected"],
    "order":"count",
    "field":"text"
  }
} 
```

任何合理的建议将不胜感激，因为这似乎有点不一致。

**更新**

根据 imotov 接受的答案，我在 GitHub 上创建了一个问题，网址为[https://github.com/elasticsearch/elasticsearch/issues/2916](https://github.com/elasticsearch/elasticsearch/issues/2916)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T21:15:53.307

terms_stats 方面目前不支持排除。我建议在 github 上创建一个问题，要求添加它。

# java - java.util.ArrayList 中的泛型

> ID：16046242
> 
> 赞同：3
> 
> 时间：2013-04-16T20:16:20.723
> 
> 标签：java, generics, arraylist

我打开了 java.util.ArrayList 源代码，但我无法理解一件事：如果 ArrayList 参数化，为什么 elementData[] 数组是 Object 类型？

```
public class ArrayList<E> extends ... {
  .........
  private transient Object[] elementData;
  .........
  public boolean add(E e) {/*More code*/}
} 
```

**问题**：为什么不将 elementData 定义为：

```
private transient E[] elementData 
```

*有什么优点和缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:56:09.633

每次创建原始类型的列表时，例如：

> 列表`<MyObject>`列表 = 新的 ArrayList `<MyObject>`();

构造函数将所有数据转换为必须是 Object[] 数组的数组，在：

> public ArrayList(Collection `<? extends E>`c) { elementData = c.toArray(); ...

我认为这是因为 ArrayList 可以在没有原始类型的情况下进行初始化，例如：

> 列表列表 = 新的 ArrayList();

```
 list.add(new String("VALUE"));
    list.add(new Integer("1"));

    for (Object c : list) {
        System.out.println(c.toString());
    } 
```

你可以在里面放不止一种类型的对象。

此外，ArrayList 使用

> Arrays.copyOf(elementData, size);

管理一些操作，这将返回一个 Object[]。

你也可以像保罗所说的那样看看[这里](https://stackoverflow.com/questions/2770321/what-is-a-raw-type-and-why-shouldnt-we-use-it)和[这里。](https://stackoverflow.com/questions/13776576/why-arraylist-implementation-uses-object)

# javascript - getElementByClassName 不返回结果

> ID：16046246
> 
> 赞同：2
> 
> 时间：2013-04-16T20:16:27.860
> 
> 标签：javascript

我`getElementByClassName()`没有返回任何结果，我将它设置为`getElementById()`，但我不能使用 ，`Id`因为相同的函数需要应用于七个链接。我已经填写了[jsFiddle上的所有信息](http://jsfiddle.net/ew9Ve/2/)

javascript看起来像：

```
var myBoxWidth = 0;
var myBoxWidth2 = 0;

// show
function show() {
    var myBox = document.getElementByClassName('box');  
    var myContent = document.getElementByClassName('content');
    myContent.style.display = 'inline';
    myBox.style.width = myBoxWidth + '%';  
    if(myBoxWidth < 80) {  
        myBoxWidth += 20;
        setTimeout(show,55);
    }
}

// hide
function hide() {
    var myBox = document.getElementByClassName('box');
    var myContent = document.getElementByClassName('content');
    myContent.style.display = 'none';
    var currentWidthVal = parseInt(myBox.style.width,10);
    if(myBoxWidth2 < currentWidthVal) {  
        setTimeout(hide,55);
        myBox.style.width = currentWidthVal =  currentWidthVal - 20 + '%';
        myBoxWidth = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T20:17:46.593

没有这样`getElementByClassName()`的。尝试[getElementsByClassName()](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)

## 更新

`document.getElementsByClassName('..')`在编写代码时返回一组元素，期望它将返回单个元素。你可以把那部分改成

```
var myContent = document.getElementsByClassName('content');

var num = myContent.length;

for(var x=0; x < num; x++){
    myContent[x].style.display = 'block'; //or whatever style you've in your original code 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:21:04.460

它是 getElementsByClassName 而不是 getElementByClassName。我还建议使用 jQuery 或某种 js 框架。

# maven - 将一个jar文件拆分成两个不同的jar文件

> ID：16046250
> 
> 赞同：2
> 
> 时间：2013-04-16T20:16:52.043
> 
> 标签：maven, maven-2

我正在尝试将我的 jar 文件拆分为两个不同的 jar 文件。例如，如果我有一个 jar 文件，其中包含：

源代码

-com

--myExample

- -包裹

----java类

----接口

显现

行家

-pom.xml

清单文件

“-”代表文件夹的层次结构

我想将接口放在不同的 jar 文件中，其余的放在不同的 jar 文件中。然后将两个 jar 合并到一个 zip 文件中。我怎样才能在 Maven 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:54:43.303

你为什么要这样做？我问是因为它不是安德拉斯提到的“Maven 方式”。并且 Maven 不会让以 Maven 方式以外的方式做事变得容易。

如果您绝对大多数人这样做，[Sonatype 将描述如何](http://www.sonatype.com/people/2010/01/how-to-create-two-jars-from-one-project-and-why-you-shouldnt/). 你注意到他们还说你不应该这样做。

你真的应该分成两个项目。

# javascript - JavaScript - 如何从 url 解析哈希参数？

> ID：16046252
> 
> 赞同：0
> 
> 时间：2013-04-16T20:17:02.040
> 
> 标签：javascript

如何使用 js 获取 URL 哈希的一部分？

这是我所拥有的：

`something.html?il=#/new/product/123`

我需要将“123”作为变量......

***没有库，请纯javascript。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:36:47.027

这是一些可以帮助您的Javascript。只需从 getQuerystringNameValue() 函数获取返回值并使用 $("#textboxID").val(returnValue); 将其分配给文本框。

```
alert("name1" + " = " + getQuerystringNameValue("name1"));
alert("name2" + " = " + getQuerystringNameValue("name2"));
alert("name3" + " = " + getQuerystringNameValue("name3"));

function getQuerystringNameValue(name)
{
    // For example... passing a name parameter of "name1" will return a value of "100", etc.
    // page.htm?name1=100&name2=101&name3=102

    var winURL = window.location.href;
    var queryStringArray = winURL.split("?");
    var queryStringParamArray = queryStringArray[1].split("&");
    var nameValue = null;

    for ( var i=0; i<queryStringParamArray.length; i++ )
    {           
        queryStringNameValueArray = queryStringParamArray[i].split("=");

        if ( name == queryStringNameValueArray[0] )
        {
            nameValue = queryStringNameValueArray[1];
        }                       
    }

    return nameValue;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T20:19:55.407

您需要哈希，而不是查询字符串。# 之后的任何内容都称为 url 的哈希值。

您可以使用 document.location.hash 并解析该字符串

```
var id = document.location.hash.split("/"); //convert the hash into an array, splitting with "/"
id = id.pop(); //pop will get the last item on the array 
```

无论这种方法多么易读和容易，假设您正在搜索的字符串始终是数组中的最后一个字符串是不安全的。您可以使用正则表达式来进一步缩小机会

```
var hash = document.location.hash,
    re = /\/new\/product\/(d+)/,
    id = hash.match(re);// for some reason this matches both the full string and the number
id = id.pop(); // so I must do this again 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T20:18:36.907

在 JavaScript 中，`document.location.search`包含查询参数。您可以使用[正则表达式](http://www.regular-expressions.info)来解析出您需要的部分。但是，在您示例中的 URL 中，它不是查询字符串，而是在`document.location.hash`.

# windows-7 - Autohotkey，如何使用带有#L 的快捷方式而不锁定屏幕？

> ID：16046253
> 
> 赞同：0
> 
> 时间：2013-04-16T20:17:14.760
> 
> 标签：windows-7, keyboard-shortcuts, autohotkey

我正在从 linux 迁移到 windows，而 autohotkey 正在挽救我的生命。我遇到的一件事是功能：

如果我按下 HJKL（vim 键）并按下左标志（windows）键，我想模拟箭头键。

我的自动热键脚本中有这个：

```
LWin::Send {LWin}
<#h::Send {left}
<#j::Send {down}
<#k::Send {up}
<#l::Send {right}
; tried to use "lWIn & l", "$<#l", "$LWin & $l"... 
```

一切正常，除了标志+ L。我的意思是，它有效，因为我得到了一个左键按下事件就好了。但屏幕也会锁定。

手册说`$`避免了原始的关键事件，但它仍然锁定屏幕。

有没有希望解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:29:18.290

您必须在注册表中禁用这个：警告实际路径可能取决于版本

```
RegWrite, REG_DWORD, HKEY_CURRENT_USER, Software\Microsoft\Windows\CurrentVersion\Policies\System, DisableLockWorkstation, 1 
```

这是另一篇文章：http: [//www.howtogeek.com/howto/windows-vista/disableenable-lock-workstation-functionality-windows-l/](http://www.howtogeek.com/howto/windows-vista/disableenable-lock-workstation-functionality-windows-l/)

# xcode - 在 WebView iOS App 的 Preferences Bundle 中存储用户名？

> ID：16046256
> 
> 赞同：0
> 
> 时间：2013-04-16T20:17:19.863
> 
> 标签：xcode, uiwebview, nsuserdefaults, preferences

有没有办法创建一个设置/首选项包，将表单的用户名存储在 UIWebView 中？

在我的应用程序中，我使用需要用户名和密码的 UIWebView。我不想存储密码，只存储用户名 - 用户应该能够在首选项中设置他的用户名，然后在 UIWebView 显示时自动加载。

我知道这与 NSUserDefaults 有关，但我似乎无法正确实现它。如果有帮助，我知道表单字段的名称吗？

这是我需要用户能够在首选项中输入标准用户名的 URL，这些用户名在应用程序启动时加载： http: [//stanley.djk.dk](http://stanley.djk.dk)

我不想使用钥匙串方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T03:17:17.427

流程应如下所示：

1.  用户使用您提供的一些 UI 设置他的 [用户名]
2.  [用户名] 使用 UserDefaults 存储，就像您建议的那样
3.  最后，用户想要访问网页，所以你在 webview 中打开它
4.  页面完全加载后，您从 userdefaults 中读取先前存储的 [username] 并使用 UIWebView 的方法将其注入到 webview 中：

    stringByEvaluatingJavaScriptFromString:

对于该特定网站，您应该运行此脚本：

```
document.getElementById("modlgn-username").set("value", "[username]") 
```

# javascript - MQTT 主题和唯一性问题

> ID：16046259
> 
> 赞同：0
> 
> 时间：2013-04-16T20:17:23.513
> 
> 标签：javascript, regex, node.js, mqtt

我正在对 MQTT 进行一些试验，但我遇到了一些奇怪的问题。这可能是由于我的特定设置，但我想我还是会问。

我使用 Node.JS 和 mqttjs 作为代理。我还在使用用 Java 编写的 IBM ia92 测试客户端。

当我订阅一个主题`/system/app`，然后我向`/system/appp`我的客户发布一条消息时，我会收到这条消息，尽管主题名称不一样。请注意，如果我发布到`/system/ap`我不会收到消息。当然发布`/system/app`工作正常。

这是否意味着 MQTT “自动填充”到类似的东西，或者这是客户端/代理中的错误？我知道`+`和`#`通配符，但我不知道这个“功能/错误”。

我正在使用的经纪人可以在这里找到：

[https://github.com/adamvr/MQTT.js/blob/master/examples/server/orig.js](https://github.com/adamvr/MQTT.js/blob/master/examples/server/orig.js)

它在第 23 行有一些奇怪的正则表达式，我试图弄清楚为什么需要它以及它的作用。如果这不是功能，也许它可能是导致错误的原因？如果有人对此有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:26:48.260

我对 MQTT 一无所知，但“错误”似乎是由于正则表达式未锚定这一事实引起的，因此如果可以在针对它进行测试的主题名称中找到订阅主题名称，则匹配将成功（在第`test`40 行）。

如果您`$`通过将第 23 行从

```
 , reg = new RegExp(topic.replace('+', '[^\/]+').replace('#', '.+$')); 
```

至

```
 , reg = new RegExp(topic.replace('+', '[^\/]+').replace('#', '.+') + '$'); 
```

它可能会阻止这种行为。

我建议您在 github 存储库中将其作为问题打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T22:40:18.723

同意我会在 mqtt.js 跟踪器上提出问题。

我还建议在 MQTT Google Group 上询问此类协议规范问题，并针对 rsmb 和 mosquitto 代理测试相同的东西，它们或多或少是参考实现。

FWIW，IA92 确实（真的）过时且过时，并且许可证也有问题。如果您想要一个用于 MQTT 的 Java 客户端，请查看 Eclipse Paho，它是当前的参考实现。

# grails - AWS Elastic Beanstalk 问题：RDS 连接错误：用户“sa”的访问被拒绝

> ID：16046262
> 
> 赞同：1
> 
> 时间：2013-04-16T20:17:30.650
> 
> 标签：grails, jdbc, amazon-web-services, amazon-elastic-beanstalk

这是我第一次使用任何与 AWS 相关的东西。

我有一个包含 Grails 2.1.1 应用程序的战争。DataSource.groovy 被编译为使用

```
url = System.getProperty("JDBC_CONNECTION_STRING") 
```

检索数据库连接字符串的方法。

在我的 EC2 环境配置中，在 Container 选项卡下，我有以下 JDBC_CONNECTION_STRING 值，其中包含我的 RDS 实例的正确详细信息：

> jdbc:mysql://aatxmz44i5auf0.cqp6ibnaxohn.eu-west-1.rds.amazonaws.com/ebdb?user=myusername&password=mypassword

请注意，“mysername”不等于“sa”。

应用程序启动后，快照日志返回堆栈跟踪错误，根本原因如下：

```
Caused by: java.sql.SQLException: Access denied for user 'sa'@'ip-10-226-5-172.eu-west-1.compute.internal' (using password: YES)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:951)
    at ... 
```

关于为什么我指定的 JDBC 连接 URL 不起作用的任何想法。我使用这些说明来配置和部署我的应用程序。

非常感谢所有帮助。

多诺万

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T11:38:26.160

排除法。您是否尝试过从 EC2 终端连接到 RDS？

mysql -h aatxmz44i5auf0.cqp6ibnaxohn.eu-west-1.rds.amazonaws.com -u myusername -p

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:57:06.693

您需要根据[Amazon 文档创建 RDS 数据库安全组。](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_WorkingWithSecurityGroups.html)正确配置的组将允许您从 Grails 服务器通过 mysql 或 telnet 访问 RDS 实例：

```
mysql -h <rds_endpoint> -umy_username -pmy_password 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-08T16:00:32.910

我有同样的问题。对我来说，问题是密码中的特殊字符。对于测试，请尝试更新密码并从中跳过所有特殊字符。之后它应该可以正常工作。我能够用这个解决方案解决它。

# node.js - 如何在 Node.js 中编码decoded-html？

> ID：16046264
> 
> 赞同：0
> 
> 时间：2013-04-16T20:17:34.193
> 
> 标签：node.js, express, pug, html-encode

我正在玩 Node.js 并已连接到我的 mysql 数据库并正在获取一些博客记录，但内容是在数据库中解码的 html。我似乎无法编码。我已经在控制器中尝试过（我正在使用 express），并且正在玉视图中尝试它。实际上，我对最佳实践一无所知，但无论如何都在破解某些东西。一些帮助将不胜感激。

**在我的 index.jade 中：**

```
var StringDecoder = require('string_decoder').StringDecoder;
var decoder = new StringDecoder('utf8');

extends layout 
```

问题出在 Jade 的某个地方（但在哪里？）：

从控制器：

```
 res.render('index', { title: '<i>Express</i>', bloglist : rows }); 
```

html 标签显示不正确：

```
<i>Express</i>

block content
  h1= title
  p Welcome to #{title}

     div
      for blog in bloglist
        h3 #{blog.Title}
         p #{decoder.write(blog.Text)} 
```

# excel - Delete cells without shifting them up

> ID：16046268
> 
> 赞同：2
> 
> 时间：2013-04-16T20:17:49.333
> 
> 标签：excel, delete-row, shift, vba

I have vba macro to delete a selection of cells. Its shifting the cells up automatically after deleting them. I don't want the cells to be shifted up, as I have a chart below the cells and everything gets disturbed if they are shifted.

Here is the code I am using to delete cells

```
ActiveSheet.UsedRange.Select
ActiveSheet.Range("C2:H8").Select
Selection.Delete 
```

Let me know how can I delete them without shifting up.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:30:50.967

如果我理解正确，我认为使用 ClearContents 而不是 Delete 应该提供您正在寻找的功能。

[http://msdn.microsoft.com/en-us/library/office/aa223828%28v=office.11​​%29.aspx](http://msdn.microsoft.com/en-us/library/office/aa223828%28v=office.11%29.aspx)

或者，您可以指定您希望单元格如何移动，如果这更适合您尝试执行的操作：

来自： http: [//msdn.microsoft.com/en-us/library/office/aa223863%28v=office.11​​%29.aspx](http://msdn.microsoft.com/en-us/library/office/aa223863%28v=office.11%29.aspx)

> 表达式.删除（Shift）
> 
> 表达式 必需。返回 Range 对象的表达式。
> 
> 移位可选变体。仅用于 Range 对象。指定如何移动单元格以替换已删除的单元格。可以是以下 XlDeleteShiftDirection 常量之一：xlShiftToLeft 或 xlShiftUp。如果省略此参数，Microsoft Excel 将根据范围的形状来决定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T20:32:27.740

你可以使用

```
ActiveSheet.Range("C2:H8").ClearContents 
```

这将清空内容而不移动任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T20:31:51.927

您是否只考虑过 ClearContents？

```
ActiveSheet.Range("C2:H8").ClearContents 
```

如果合并单元格有问题，请尝试：

```
ActiveSheet.Range("C2:H8").Value = "" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-22T14:00:24.097

在我的情况下，很容易使用 Delete 而不会干扰行序列，只需从最底线开始循环到所选范围的标题：

```
Cells(rw, 4).Activate
For i = rw To 1 Step -1
   Set Clr = Cells(i, 4)
   If Not Clr.Text Like "R*" Then
    Clr.EntireRow.Delete Shift:=xlUp

   End If
Next i 
```

# java - 使用 Gradle 防止第 3 方库位于编译类路径中

> ID：16046273
> 
> 赞同：2
> 
> 时间：2013-04-16T20:17:57.310
> 
> 标签：java, dependencies, gradle, dependency-management

我有一个多项目 Gradle 构建。我有`Sub-Project-A`这取决于`Sub-Project-B`。`Sub-Project-B`编译时依赖于`SLF4J`. 我**不**希望`Sub-Project-A`能够针对任何`SLF4J`库进行编译，但在运行时我确实希望`Sub-Project-B`代码能够运行。

我认为我可以做的是将编译时依赖项添加到 Sub-Project-B 然后添加：

```
configurations {
  compile.exclude group: 'org.slf4j'
} 
```

到子项目-A。这确实阻止了任何代码针对 slf4j API 进行编译，但它也阻止了 slf4j 库位于 Sub-Project-A 运行时，因此一旦`Sub-Project-B`访问来自的代码，我就会得到 ClassNotFoundException。

由于这很难开始工作，我认为我一定做错了什么，但这并不像是一个不合理的设置。我只希望我的构建中的一个子项目能够在编译时访问第 3 方库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T12:13:30.363

我认为您需要排除它，然后重新包含它。我看不出有任何方法可以一步完成。

作为对[erdi 解决方案](https://stackoverflow.com/a/16081953/116639)的轻微修改，您可以在 A 的运行时配置中重新包含 B 的整个依赖项：

```
dependencies {
    compile(project(':A')) {
        exclude group: 'org.slf4j'
    }
    runtime project(':A')
} 
```

那是少一点重复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T11:40:03.110

在定义对 Sub-Project-B 的依赖项时，您可能应该排除 slf4j 依赖项，然后将 slf4j 依赖项添加到运行时配置：

```
dependencies {
    compile(project(':Sub-Project-B')) {
        exclude group: 'org.slf4j'
    }
    runtime 'org.slf4j:...:...'
} 
```

# vba - 通过 Excel VBA 创建相关矩阵

> ID：16046274
> 
> 赞同：3
> 
> 时间：2013-04-16T20:17:58.763
> 
> 标签：vba, excel, correlation

通过 Excel VBA 创建相关矩阵的最佳方法是什么？我的数据有 45 列（最终可能会改变）和 12000 行（也可以改变）。我打算只使用`correl`工作表上的函数，但就像我说的，我的列和行可能会随着时间而改变。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:27:15.840

```
 Application.Run "ATPVBAEN.XLAM!Mcorrel", ActiveSheet.Range("$C$3:$F$6"), _
    ActiveSheet.Range("$C$10"), "K", False //"K" might be "C"=column 
```

要运行它，您必须首先启用数据分析工具包（包）。您可以通过 UI、选项卡 Data Analysis->correlation matrix 使用它

这里：

```
"$C$3:$F$6" - input (square matrix)
$C$10 - output cell
"K" (or "C") - group by columns
false - labels=no 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-11T13:42:36.333

我在网上搜索了 VBA 相关矩阵代码，但没有找到任何实质内容。自己做了一些编码，它并不漂亮，但它确实完成了工作。此代码将在最后一个数据系列的右侧创建一个矩阵。

```
Sub CorrelationMatrix()

Dim y As Range
Dim z As Range

funds = Application.Workbooks("VBAcorrelation").Worksheets("Sheet1").Cells(1,       Columns.Count).End(xlToLeft).Column
rader = 0
For x = 1 To funds
        nyrad = Cells(Rows.Count, x).End(xlUp).Row
        If nyrad > rader Then
        rader = Cells(Rows.Count, x).End(xlUp).Row
    End If
Next x

p = 1
u = 2

For h = 1 To funds
For u = 1 To funds

        Set y = ActiveSheet.Range(Cells(2, h), Cells(rader, h))
        Set z = ActiveSheet.Range(Cells(2, u), Cells(rader, u))

  Correl = WorksheetFunction.Correl(y, z)

 Worksheets("Sheet1").Cells(h + 1, funds + u + 3).Select
 ActiveCell = Correl

 Next u
 Next h

MsgBox "Done with Matrix"
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-02T09:00:55.227

这对函数以矩阵形式为您提供结果（选择它应该出现的范围，引入公式，然后按 F2，然后按 Ctrl+shift+enter 以查看值）。复制两者并粘贴到 VBA 编辑器上。

```
'function to create a correlation matrix given the data
Function CorrMatriz(Mat_data As Variant)
Dim i As Integer, j As Integer, corr As Variant, M1 As Variant, M2 As Variant
ReDim corr(1 To Mat_data.Columns.Count, 1 To Mat_data.Columns.Count)

ReDim M1(1 To Mat_data.Rows.Count, 1 To 1)
ReDim M2(1 To Mat_data.Rows.Count, 1 To 1)

For i = 1 To Mat_data.Columns.Count
    M1 = ExtraeMatriz(Mat_data, i)
    For j = 1 To Mat_data.Columns.Count
        M2 = ExtraeMatriz(Mat_data, j)
        corr(i, j) = Application.Correl(M1, M2)
    Next j
Next i
CorrMatriz = corr
End Function`

' function to extract one column
enter code here
Function ExtraeMatriz(Matriz As Variant, columna As Integer)
Dim i As Integer, data_final As Variant
ReDim data_final(1 To Matriz.Rows.Count, 1)
For i = 1 To Matriz.Rows.Count
    data_final(i, 1) = Matriz(i, columna)
Next i
ExtraeMatriz = data_final
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-07T17:29:39.240

它工作正常：

```
Option base 1  
      Function MCorrelation(rango As Range) As Variant
        Dim x As Variant, y As Variant, s As Integer, t As Integer, c() As Variant
        ReDim c(rango.Columns.Count, rango.Columns.Count)
        For i = 1 To rango.Columns.Count Step 1
         For j = 1 To i Step 1
        c(i, j) = Application.Correl(Application.Index(rango, , i), Application.Index(rango, , j))
         Next j
        Next i
         MCorrelation = c
        End Function 
```

# vb.net - Can you make a value stick throughout multiple solutions?

> ID：16046275
> 
> 赞同：0
> 
> 时间：2013-04-16T20:18:03.600
> 
> 标签：vb.net, winforms, variables

I'm going to do my best to describe my current situation, so bear with me.

In my application, there's many solutions that reference the same class to grab information from the database. They all use the same call to the class throughout the multiple solutions, is there any way I could have that value that it's checking for in the multiple solutions stick and only get called once in the class and have all solutions use the value instead of calling the class and running through the logic to find the value?

I just feel there's a lot of wasted time having to call the same class to get the same value that hasn't changed over and over again and is only getting re-run to get the value because different solutions are calling it. I'm not sure what to even look up to try to research this on what I could do to keep the value available throughout all solutions accessing it.

If you understood my problem, please provide some insight, or if it made no sense I'll try to re-clarify.

Thanks!!!

# magento - Join productname on external table Magento

> ID：16046279
> 
> 赞同：1
> 
> 时间：2013-04-16T20:18:24.010
> 
> 标签：magento, magento-1.7

May be this question was already asked..But I didn't like the answers. I wanna to join the product Name starting from my custom resource collection. My custom resource collection has a field called product_id. How can I do this ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-25T13:59:27.840

首先将产品实体集合加入您的自定义集合（我想通过 product_id），然后将产品名称加入它，如下所示：

$collection 是您的自定义集合对象，例如： $collection = Mage::getResourceModel('custom/model_collection');

```
$prodNameAttrId = Mage::getModel('eav/entity_attribute')
->loadByCode('4', 'name')
->getAttributeId();

$collection->getSelect()
->joinLeft(
    array('prod' => 'catalog_product_entity'), 
    'prod.entity_id = main_table.product_id',
    array('sku')
)
->joinLeft(
    array('cpev' => 'catalog_product_entity_varchar'), 
    'cpev.entity_id = prod.entity_id AND cpev.attribute_id='.$prodNameAttrId.'', 
    array('name' => 'value')
); 
```

把这个写出来，但这至少应该让你开始。祝您好运！

# c# - 使用下拉选择值从字符串转换日期和/或时间时转换失败

> ID：16046280
> 
> 赞同：0
> 
> 时间：2013-04-16T20:18:26.110
> 
> 标签：c#, asp.net, sql

我有三个从 sql 数据库（一列）中检索信息的下拉菜单。When a user select WorkShopName from the first drop down, the second drop down shows available dates for it, and when the date is selected the user can choose the location from the third drop down. 我正在尝试将下拉列表中的选定信息插入到 sql 数据库中的另一列。当我单击按钮注册时，我有“从字符串转换日期和/或时间时转换失败”。我尝试插入 DateTime.Now 而不是 Date Drop Down 的 Selected Value 但错误是相同的。有人可以帮忙吗？谢谢

以下是下拉菜单：

```
<asp:Label runat="server" 
            Text="Please select work shop you would like to register for:"></asp:Label>
    </td>
    <td>
        <asp:DropDownList ID="ddlWorkShopName"  AutoPostBack="true"  runat="server" 
            DataSourceID="workshopName" DataTextField="WorkshopName" 
            DataValueField="WorkshopName">
        </asp:DropDownList>

        <asp:SqlDataSource ID="workshopName" runat="server" 
            ConnectionString="<%$ ConnectionStrings:WildLife_EducationConnectionString %>" 
            SelectCommand="SELECT DISTINCT [WorkshopName] FROM [tblWorkshop]">
        </asp:SqlDataSource>

    </td>
</tr>
<tr>
    <td>
        <asp:Label ID = "lblChoseWDate" runat="server" Text="Please chose workshop date:"></asp:Label>
    </td>
    <td>
        <asp:DropDownList ID="ddlChoseWDate" DataTextFormatString="{0:yyyy-MM-dd}" 
            AutoPostBack="True" runat="server" DataSourceID="WorkshopDate2" 
            DataTextField="WorkshopBeginingDate" DataValueField="WorkshopBeginingDate">
        </asp:DropDownList>

        <asp:SqlDataSource ID="WorkshopDate2" runat="server"
            ConnectionString="<%$ ConnectionStrings:WildLife_EducationConnectionString %>" 

            SelectCommand="SELECT DISTINCT ([WorkshopBeginingDate]) FROM [tblWorkshop] WHERE ([WorkshopName] = @WorkshopName)">
            <SelectParameters>
                <asp:ControlParameter ControlID="ddlWorkShopName" Name="WorkshopName" 
                    PropertyName="SelectedValue" Type="String" />
            </SelectParameters>
        </asp:SqlDataSource>

    </td>
</tr>
<tr>
    <td>
        <asp:Label ID="lblChoseWLoc" runat="server" Text="Please chose workshop location:"></asp:Label>
    </td>
    <td>
        <asp:DropDownList ID="ddlChoseWorkShopLoc" runat="server" 
            DataSourceID="WorkshopLocation2" DataTextField="WorkshopLocation" 
            DataValueField="WorkshopLocation">
        </asp:DropDownList>
        <asp:SqlDataSource ID="WorkshopLocation2" runat="server" 
            ConnectionString="<%$ ConnectionStrings:WildLife_EducationConnectionString %>" 
            SelectCommand="SELECT [WorkshopLocation] FROM [tblWorkshop] WHERE (([WorkshopBeginingDate] = @WorkshopBeginingDate) AND ([WorkshopName] = @WorkshopName))">
            <SelectParameters>
                <asp:ControlParameter ControlID="ddlChoseWDate" Type="String" 
                    Name="WorkshopBeginingDate" PropertyName="SelectedValue" />
                <asp:ControlParameter ControlID="ddlWorkShopName" Name="WorkshopName" 
                    PropertyName="SelectedValue" Type="String" />
            </SelectParameters>
        </asp:SqlDataSource>
    </td>
</tr>

<td>
    <asp:Button ID="btnRegister" runat="server" onclick="btnRegister_Click" 
        Text="Register" />
</td> 
```

按钮寄存器的代码后面：

```
SqlParameter workshopDate = new SqlParameter("@WorkshopDate", SqlDbType.DateTime);
    workshopDate.Value = ddlChoseWDate.SelectedValue;

using (SqlConnection conn2 = new SqlConnection(@"Data Source=CIS489_3\WILDLIFE;Initial Catalog=WildLife_Education;Integrated Security=True;"))
{
    SqlCommand CmdSql2 = new SqlCommand
    ("INSERT INTO [tblUserWorkshop] ([UserID],[WorkshopName],[WorkshopDate],[WorkshopLocation]) VALUES (@WorkshopName, @WorkshopDate, @WorkshopLocation, @UserID)", conn2);
    conn2.Open();

    CmdSql2.Parameters.AddWithValue("@UserID", userId.ToString());
    CmdSql2.Parameters.AddWithValue("@WorkshopName", ddlWorkShopName.SelectedValue);
    CmdSql2.Parameters.AddWithValue("@WorkshopDate",workshopDate.Value);
    CmdSql2.Parameters.AddWithValue("@WorkshopLocation", ddlChoseWorkShopLoc.SelectedValue);
CmdSql2.ExecuteNonQuery();
conn2.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T21:03:48.053

我很确定这必须按照给定的确切顺序。

错误的：

```
("INSERT INTO [tblUserWorkshop] ([UserID],[WorkshopName],[WorkshopDate],[WorkshopLocation]) VALUES (@WorkshopName, @WorkshopDate, @WorkshopLocation, @UserID)", conn2); 
```

正确的：

```
("INSERT INTO [tblUserWorkshop] ([UserID],[WorkshopName],[WorkshopDate],[WorkshopLocation]) VALUES (@UserID, @WorkshopName, @WorkshopDate, @WorkshopLocation )", conn2); 
```

最后有用户 ID，但应该在前面。

几乎您应该将插入和值指定为相同的顺序。您当前正在尝试将 WorkShopLocation 转换为 DateTime。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:01:39.510

尝试这个：

```
CmdSql2.Parameters.Add("@WorkshopDate", SqlDbType.VarChar).Value = workshopDate.Text; 
```

# if-statement - 更改列文本（水晶）

> ID：16046282
> 
> 赞同：0
> 
> 时间：2013-04-16T20:18:27.297
> 
> 标签：if-statement, crystal-reports

我对 Crystal 很陌生，如果模型类似于 FT-T*，用户希望我将列文本更改为郁金香。我认为这将是一件相当容易的事情，并尝试了一些不同的公式，但可以让它们起作用。你能告诉我我的公式做错了什么或者我需要改用什么公式吗？谢谢。

```
IIF({v_FrameDepartment.cftliner} Like 'FT-T*' THEN {v_FrameDepartment.cftliner} = 'Tulip' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:20:45.633

您可以`LEFT({v_FrameDepartment.cftliner}, 4)`在公式中使用来检查匹配：

```
IIF(LEFT({v_FrameDepartment.cftliner}, 4) = "FT-T", "Tulip", 
    {v_FrameDepartment.cftliner}) 
```

自从我使用 CR 以来已经有一段时间了，所以我不记得`LEFT`如果您指定的长度大于字符串的长度是否会引发错误。如果是这样，只需检查`{v_FrameDepartment.cftliner}`first 的长度。

# netty - Netty 4 code to run blocking operations in thread pool

> ID：16046283
> 
> 赞同：4
> 
> 时间：2013-04-16T20:18:29.767
> 
> 标签：netty

The documentation doesn't give any details on the different types of executors available. What I want is to have an executor that's based on a configurable thread pool, much like the MemoryAwareThreadPoolExecutor that was in netty 3.

How would I do that?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T08:25:23.850

当您将处理程序添加到管道时，您可以`EventExecutorGroup`与处理程序一起指定：

```
EventExecutorGroup executor = new DefaultEventExecutorGroup(...);
...

ChannelPipeline p = ch.pipeline();
p.addLast(executor, new MyHandler()); 
```

`EventExecutorGroup`类似于，`OrderedMemoryAwareThreadPoolExecutor`除了它不强制任何内存约束。您必须实现自己的处理程序来强制执行内存约束 -`MemoryAwareThreadPoolExecutor`效率不高并且经常出现性能问题。

没有替代品，`MemoryAwareThreadPoolExecutor`因为 Netty 4 中的所有处理程序方法都是针对同一连接按顺序调用的。如果您想要无序执行，则必须将任务交给`java.util.concurrent.Executor`. 这个决定是有意的 - 否则处理程序实现不能对线程安全进行任何消耗。

# ruby-on-rails - rails-bootstrap-toggle-buttons in simple_form bootstrap not working

> ID：16046290
> 
> 赞同：0
> 
> 时间：2013-04-16T20:18:46.183
> 
> 标签：ruby-on-rails, twitter-bootstrap, simple-form

please forgive my newbieness here - I am trying to get the gem rails-bootstrap-toggle-buttons to work in the rails app. I searched all over and can't figured it out. I have tried wrappers, but can't get it to work. Any help would be appreciated!!

link to gem: [https://github.com/caarlos0/rails-bootstrap-toggle-buttons](https://github.com/caarlos0/rails-bootstrap-toggle-buttons)

link to gem source: [https://github.com/nostalgiaz/bootstrap-switch](https://github.com/nostalgiaz/bootstrap-switch)

I am trying to produce this:

```
<div class="switch" data-on="primary" data-off="info">
    <input type="checkbox" checked />
</div> 
```

the code works great in the site but when I try to add it to simple_form then it goes down hill.

using Simple_forms :

= f.input :home_address

I had added :id=>"checkbox" and I have read the docs on the gem's site but I am very new at this and after 4 hours I am still not getting it Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:57:35.013

请注意，您的代码中必须具有`<div>`with`data`属性。如果您只是放置简单的旧`simple_form`代码，例如`f.input`，它只会创建输入，而不是`<div>`包含重要内容的包装。

# directx - DirectX 计算着色器是否支持共享内存中的二维数组？

> ID：16046293
> 
> 赞同：2
> 
> 时间：2013-04-16T20:18:55.677
> 
> 标签：directx, compute-shader, directcompute

我想`groupshared`在 DirectX 计算着色器中使用内存来减少全局内存带宽并希望提高性能。我的输入数据是 a `Texture2D`，我可以使用 2D 索引访问它，如下所示：

```
Input[threadID.xy] 
```

我想有一个共享内存的二维数组来缓存输入数据的一部分，所以我尝试了明显的：

```
groupshared float SharedInput[32, 32]; 
```

它不会编译。错误消息说`syntax error: unexpected token ','`。

有没有办法拥有一个二维共享内存数组？如果不是，那么处理存储在 1D 共享内存数组中的 2D 数据的好技术是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:35:28.923

`groupshared`数组不能用多维索引来索引。您可以获得的最接近的是一个数组数组，其中每个维度都独立索引。

```
groupshared float SharedInput[32][32]; 
```

它不如多维索引好，但至少您不必手动计算线性索引。

# webcam - How to get webcam images?

> ID：16046294
> 
> 赞同：1
> 
> 时间：2013-04-16T20:18:58.360
> 
> 标签：webcam

I'm working with C++, on Windows Vista, with the IDE--Code:Blocks.

I have attempted to get images using OpenCV, however it does not support my camera types for some reason and is super complicated to integrate different versions of it to see if they work as there are almost no tutorials on the web for this "that actually work".

Is there a simple way to get a snapshot from a camera? Why is it that my Skype is compatible with almost any webcam but OpenCV isn't?

I downloaded DirectX, but I need Visual Studio for it. Should I purchase Visual Studio and ditch Codeblocks?

Thank you!!!!!

# jetty - how to tell Jetty which is the default web application

> ID：16046301
> 
> 赞同：2
> 
> 时间：2013-04-16T20:19:18.660
> 
> 标签：jetty

so I have a web application deployed on Jetty. Lets say the war file is hello.war. For me to access the web app on my own machine I need to go to `http://127.0.0.1/hello` but I want that web application to "listen" to `http://127.0.0.1` without putting Apache in front of Jetty.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T20:33:10.143

你想要做的是为你`hello.war`的*根上下文路径*服务。（*上下文路径*是分配给您的 Web 应用程序的路径。根上下文路径是上下文路径`"/"`）

您有多种方法可以实现这一目标。

1.  将您的战争名称从更改`hello.war`为`root.war`（这让[自动部署知道您想要做什么](http://www.eclipse.org/jetty/documentation/current/automatic-webapp-deployment.html)）

2.  **或**将展开的 webapp 目录的名称从 更改`${jetty.home}/webapps/hello`为`${jetty.home}/webapps/ROOT`（同样，[自动部署将知道如何](http://www.eclipse.org/jetty/documentation/current/automatic-webapp-deployment.html)处理这个特殊的命名目录）

3.  **或**设置一个[可部署的描述符 XML 文件](http://www.eclipse.org/jetty/documentation/current/configuring-specific-webapp-deployment.html)，其中配置了基于上下文的部署将使用的“contextPath”。

可部署描述符 XML 文件的示例：

```
<?xml version="1.0"  encoding="ISO-8859-1"?>
<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN"
   "http://www.eclipse.org/jetty/configure_9_0.dtd">

<Configure class="org.eclipse.jetty.webapp.WebAppContext">
  <Set name="contextPath">/</Set>
  <Set name="war">/home/user/code/hello.war</Set>
</Configure> 
```

# web-services - com.ctc.wstx.exc.WstxUnexpectedCharException：意外字符

> ID：16046314
> 
> 赞同：0
> 
> 时间：2013-04-16T20:20:10.460
> 
> 标签：web-services, weblogic, axis, stax

在客户端存根中处理 Axis 2 Web 服务时，我正在运行以下异常。该问题仅发生在 WebLogic Server 上。服务（aar 文件）在 Tomcat Server 上的开发中工作正常，但在 WebLogic Server 上的生产中抛出以下错误。服务是使用 Axis 2.0 版本 1.6.2 构建的。我不确定为什么它们在 Tomcat 上运行良好，但在 WebLogic 版本 10.3.5 上运行时出现问题。这曾经在 Axis 2.0 V 1.4 上正常工作。

myClientClass.java 上的异常：

`org.apache.axis2.AxisFault: com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character ':' (code 58) excepted space, or '>' or "/>" at javax.xml.stream.SerializableLocation@89d089d`

我在 WebLogic 启动日志中看到以下警告。

`[WARN] Weblogic's StAX implementation is unsupported and some Axiom features will not work as expected! Please use Woodstox instead.`

我在网上找到了一些我需要使用 Woodstox 的参考资料。所以，我将以下内容添加到`webLogicStart.sh`

```
-Djavax.xml.stream.XMLInputFactory=com.ctc.wstx.stax.WstxInputFactory
-Djavax.xml.stream.XMLOutputFactory=com.ctc.wstx.stax.WstxOutputFactory
-Djavax.xml.stream.XMLEventFactory=com.ctc.wstx.stax.WstxEventFactory 
```

以及调用 Web 服务之前的 stubClass。

```
 _operationClient.getOptions().setProperty("javax.xml.stream.XMLInputFactory",   
                  "com.ctc.wstx.stax.WstxInputFactory");   
          _operationClient.getOptions().setProperty("javax.xml.stream.XMLOutputFactory",   
                  "com.ctc.wstx.stax.WstxOutputFactory");   
          _operationClient.getOptions().setProperty("javax.xml.stream.XMLEventFactory",   
                  "com.ctc.wstx.stax.WstxEventFactory"); 
```

下面是 weblogic-application.xml。

```
 <wls:package-name>com.ctc.wstx.*</wls:package-name>
    <wls:package-name>javax.xml.*</wls:package-name>
    <wls:package-name>org.apache.*</wls:package-name> 
```

我仍然遇到同样的问题。对此的任何帮助都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T10:20:23.457

我有同样的错误。我用 wsdl2java 创建了轴客户端。检查您的 jdk 编译和运行时版本，它们必须相同。我使用 1.5 和 javaee5.0 解决了它。还可以在 www.findjar.com 上检查与 axis2 的任何依赖关系。

希望能帮助到你

卢卡

# c - 如何从 c (linux) 中的非文本文件中读取？

> ID：16046319
> 
> 赞同：3
> 
> 时间：2013-04-16T20:20:47.307
> 
> 标签：c, linux

我正在尝试通过 UDP 套接字发送文件（一次一个块）。它适用于 .txt 文件，但是当我尝试从 .jpg/.rar 读取时，即使文件 >2mb ，它也只能读取几个字节（比我“要求”的要少）。

我尝试使用 open/pread（我也尝试使用 lseek 和 read）和 fopen（在二进制模式下）/fread/fseek，我得到了相同的结果（即对于 2mb .jpg 文件，我得到这个输出“从偏移量读取 10 0”）。请告诉我我做错了什么。

这是负责从文件中读取块的代码：

```
void * work(void * p){
...
int psize=100;
int file;
//FILE *file;

//open the file
file=open(wArg.req.fileName, O_RDONLY);
//file=fopen(wArg.req.fileName, "rb");

//read the file chunk from the offset
buff=(void *) malloc(psize);
n=pread(file, buff, psize, wArg.req.offset);
//fseek(file,wArg.req.offset, SEEK_SET);
//fread(buff, 1, psize, file);
if(n<0){
    perror("read");
    exit(1);
}

printf("read %d from offset %d\n", (int)strlen(buff),wArg.req.offset);

n=sendto(wArg.sock, buff, psize, 0, (struct sockaddr*)&caddr, sizeof(struct sockaddr_in));
printf("sent %d\n", (int)strlen(buff));

close(file); 
//fclose(file);
...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:24:56.587

二进制文件可以包含`NULL`-bytes，`strlen`找到这样的 -byte 后将停止计数`NULL`。使用的返回值`pread`找出`buff`er 的大小。

所有`str`* 函数都需要 C 字符串，它必须以-byte*结尾*`NULL`并且不能将它们放在“中间”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T20:25:00.633

你不能拿`strlen (buff)`，因为`buff`是二进制数据。当您这样做`pread`时，您捕获的返回值`n`包含读取的字节数。您应该使用它而不是`psize`in `sendto`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:47:00.173

pread() 从文件描述符文件中偏移偏移量（从文件开头）读取最多 count 个字节到缓冲区中，从 buf 开始。文件偏移量没有改变。由于它是一个二进制文件，所以 strlen 不能在这里工作......所以使用 pread 并初始化 psize 以返回 pread() 的值。

# java - 将内容加载到 Primefaces 计划中

> ID：16046329
> 
> 赞同：0
> 
> 时间：2013-04-16T20:21:11.620
> 
> 标签：java, jsf, primefaces

我想要一个时间表，所有用户都可以互相留下“公开”消息。这是我的日程安排的 xhtml

```
<ui:define name="content">
    <div id="dashboardMain">
        <h:form id="form">  

            <p:growl id="messages" showDetail="true" />  

            <p:schedule id="schedule" value="#{scheduleManager.eventModel}" widgetVar="myschedule" aspectRatio="2" showWeekends="false" rightHeaderTemplate="false">  
                <p:ajax event="dateSelect" listener="#{scheduleManager.onDateSelect}" update="eventDetails" oncomplete="eventDialog.show()" />  
                <p:ajax event="eventSelect" listener="#{scheduleManager.onEventSelect}" update="eventDetails" oncomplete="eventDialog.show()" />  
            </p:schedule>  

            <p:dialog widgetVar="eventDialog" header="#{msg['title.eventDetails']}" showEffect="clip" hideEffect="clip">  
                <h:panelGrid id="eventDetails">
                    <p:row>  
                        <p:inputTextarea id="title" value="#{scheduleManager.event.title}" required="true" cols="40" rows="5" maxlength="100"/>
                    </p:row>  

                    <p:row>
                    <p:commandButton id="addButton" value="Save" process="@form" actionListener="#{scheduleManager.addEvent}" oncomplete="myschedule.update();eventDialog.hide();"/>  
                    <p:commandButton id="deleteButton" value="Delete" process="@form" actionListener="#{scheduleManager.deleteEvent}" oncomplete="myschedule.update();eventDialog.hide();"/>
                    </p:row>  
                </h:panelGrid>  
            </p:dialog>  
        </h:form>  
    </div>
</ui:define> 
```

这是每次有人在计划中添加新消息时保存在数据库中的实体消息

```
@Entity(name = "schedule_message")
public class ScheduleMessage {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "schedule_message_id")
    private Integer scheduleMessageId;

    @Column(name = "start_date")
    private Date startDate;

    @Column(name = "end_date")
    private Date endDate;

    @Column
    private String message;

    public Integer getScheduleMessageId() {
        return scheduleMessageId;
    }

    public void setScheduleMessageId(Integer schedulerMessageId) {
        this.scheduleMessageId = schedulerMessageId;
    }

    public Date getStartDate() {
        return startDate;
    }

    public void setStartDate(Date startDate) {
        this.startDate = startDate;
    }

    public Date getEndDate() {
        return endDate;
    }

    public void setEndDate(Date endDate) {
        this.endDate = endDate;
    }

    public String getMessage() {
        return message;
    }

    public void setMessage(String message) {
        this.message = message;
    }
} 
```

消息存储良好。问题是我不知道如何加载它们。现在，我的问题是：如何加载所有 scheduleMessages（每个都包含 id、startDate、endDate 和实际消息）并将它们显示在 p:schedule 中？

# inno-setup - InnoSetup，如何更改 RichEditorViewer 的颜色

> ID：16046330
> 
> 赞同：0
> 
> 时间：2013-04-16T20:21:12.460
> 
> 标签：inno-setup, pascal, pascalscript

我需要更改`RichEditorViewer`默认页面的字体颜色属性，但找不到控件名称或属性名称，我需要帮助...

的`RichEditorViewer`（`InfoBeforePage`我需要更改字体颜色）：

![设置屏幕截图](https://i.stack.imgur.com/cIqv9.jpg)

这是我正在使用的代码：

```
const
  Custom_Height = 570;
  Custom_ProgressBar_Height = 30;
  Page_Color = $7b2b68;
  Page_Color_Alternative1 = clblack;
  Page_Color_Alternative2 = clwhite;
  Font_Color = $fffbff;

var
  DefaultTop,
  DefaultLeft,
  DefaultHeight,
  DefaultBackTop,
  DefaultNextTop,
  DefaultCancelTop,
  DefaultBevelTop,
  DefaultOuterHeight: Integer;

procedure InitializeWizard();
begin

  DefaultTop := WizardForm.Top;
  DefaultLeft := WizardForm.Left;
  DefaultHeight := WizardForm.Height;
  DefaultBackTop := WizardForm.BackButton.Top;
  DefaultNextTop := WizardForm.NextButton.Top;
  DefaultCancelTop := WizardForm.CancelButton.Top;
  DefaultBevelTop := WizardForm.Bevel.Top;
  DefaultOuterHeight := WizardForm.OuterNotebook.Height;

  // Pages (Size)
  WizardForm.Height := Custom_Height;
  WizardForm.InnerPage.Height := WizardForm.InnerPage.Height + (Custom_Height - DefaultHeight);
  WizardForm.LicensePage.Height := WizardForm.LicensePage.Height + (Custom_Height - DefaultHeight);

  // Pages (Color)
  WizardForm.color := Page_Color_Alternative1;
  WizardForm.FinishedPage.Color  := Page_Color;
  WizardForm.InfoAfterPage.Color := Page_Color;
  WizardForm.InfoBeforePage.Color := Page_Color;
  WizardForm.InnerPage.Color := Page_Color;
  WizardForm.InstallingPage.color := Page_Color;
  WizardForm.LicensePage.Color := Page_Color;
  WizardForm.PasswordPage.color := Page_Color;
  WizardForm.PreparingPage.color := Page_Color;
  WizardForm.ReadyPage.Color := Page_Color;
  WizardForm.SelectComponentsPage.Color  := Page_Color;
  WizardForm.SelectDirPage.Color  := Page_Color;
  WizardForm.SelectProgramGroupPage.color := Page_Color;
  WizardForm.SelectTasksPage.color := Page_Color;
  WizardForm.UserInfoPage.color := Page_Color;
  WizardForm.WelcomePage.color := Page_Color;

  // Controls (Size)
  WizardForm.InfoAfterMemo.Height := (Custom_Height - (DefaultHeight / 2));
  WizardForm.InfoBeforeMemo.Height := (Custom_Height - (DefaultHeight / 2));
  WizardForm.InnerNotebook.Height :=  WizardForm.InnerNotebook.Height + (Custom_Height - DefaultHeight);
  WizardForm.LicenseMemo.Height := WizardForm.LicenseMemo.Height + (Custom_Height - DefaultHeight);
  WizardForm.OuterNotebook.Height := WizardForm.OuterNotebook.Height + (Custom_Height - DefaultHeight);
  WizardForm.ProgressGauge.Height := Custom_ProgressBar_Height
  WizardForm.ReadyMemo.Height := (Custom_Height - (DefaultHeight / 2));
  WizardForm.Taskslist.Height := (Custom_Height - (DefaultHeight / 2));
  WizardForm.WizardBitmapImage.Height := (Custom_Height - (DefaultHeight - DefaultBevelTop));
  WizardForm.WizardBitmapImage2.Height  := (Custom_Height - (DefaultHeight - DefaultBevelTop));

  // Controls (Location)
  WizardForm.BackButton.Top := DefaultBackTop + (Custom_Height - DefaultHeight);
  WizardForm.Bevel.Top := DefaultBevelTop + (Custom_Height - DefaultHeight);
  WizardForm.CancelButton.Top := DefaultCancelTop + (Custom_Height - DefaultHeight);
  WizardForm.LicenseAcceptedRadio.Top := WizardForm.LicenseAcceptedRadio.Top + (Custom_Height - DefaultHeight);
  WizardForm.LicenseNotAcceptedRadio.Top := WizardForm.LicenseNotAcceptedRadio.Top + (Custom_Height - DefaultHeight);
  WizardForm.NextButton.Top := DefaultNextTop + (Custom_Height - DefaultHeight);
  WizardForm.Top := DefaultTop - (Custom_Height - DefaultHeight) div 2;
  //WizardForm.ProgressGauge.Top := (DefaultHeight / 2)

  // Controls (Back Color)
  WizardForm.DirEdit.Color  := Page_Color_Alternative2;
  WizardForm.GroupEdit.Color  := Page_Color_Alternative2;
  WizardForm.InfoAfterMemo.Color := Page_Color_Alternative2;
  WizardForm.InfoBeforeMemo.Color := Page_Color_Alternative2;
  WizardForm.LicenseMemo.Color := Page_Color_Alternative2;
  WizardForm.MainPanel.Color := Page_Color;
  WizardForm.PasswordEdit.Color  := Page_Color_Alternative2;
  WizardForm.ReadyMemo.Color := Page_Color_Alternative2;
  WizardForm.Taskslist.Color := Page_Color;
  WizardForm.UserInfoNameEdit.Color  := Page_Color_Alternative2;
  WizardForm.UserInfoOrgEdit.Color  := Page_Color_Alternative2;
  WizardForm.UserInfoSerialEdit.Color  := Page_Color_Alternative2;

  // Controls (Font Color)
  WizardForm.FinishedHeadingLabel.font.color  := Font_Color;
  WizardForm.InfoafterMemo.font.Color  := Font_Color;
  WizardForm.FinishedLabel.font.color  := Font_Color;
  WizardForm.DirEdit.font.Color  := Page_Color_Alternative1;
  WizardForm.Font.color := Font_Color;
  WizardForm.GroupEdit.font.Color  := Page_Color_Alternative1;
  WizardForm.InfoBeforeMemo.font.Color  := Page_Color_Alternative1;
  WizardForm.LicenseMemo.font.Color  := Page_Color_Alternative1;
  WizardForm.MainPanel.font.Color := Font_Color;
  WizardForm.PageDescriptionLabel.font.color  := Font_Color;
  WizardForm.PageNameLabel.font.color  := Font_Color;
  WizardForm.PasswordEdit.font.Color  := Page_Color_Alternative1;
  WizardForm.Taskslist.font.Color  := Font_Color;
  WizardForm.UserInfoNameEdit.font.Color  := Page_Color_Alternative1;
  WizardForm.UserInfoOrgEdit.font.Color  := Page_Color_Alternative1;
  WizardForm.UserInfoSerialEdit.font.Color  := Page_Color_Alternative1;
  WizardForm.WelcomeLabel1.font.color  := Font_Color;
  WizardForm.WelcomeLabel2.font.color  := Font_Color;
  WizardForm.ReadyMemo.font.Color := Page_Color_Alternative1;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T14:50:35.833

您可能正在寻找**InfoBeforeMemo**：位于**InfoBeforePage页面上的 TRichEditViewer 组件**

此页面 (NewNotebookPage) 是 TWizardForm (TSetupForm) 的财产。

开始了：

```
TRichEditViewer = class(TMemo)
  property RTFText: AnsiString; write;
  property UseRichEdit: Boolean; read write;
end; 
```

因此，您需要更改纯 AnsiString 的属性**RTFText 。**

这意味着它是纯文本，没有“字体”或类似属性。RTF 文本是特殊格式的简单文本，如下所示：

> {\rtf1\ansi{\fonttbl\f0\fswiss Helvetica;}\f0\pard 这是一些 {\b 粗体} 文本。\par }

因此，如果您需要更改字体，您需要手动解析它 - 例如，将*fswiss Helvetica*更改为您想要的字体并将所有内容保存回来。

更多关于 RTF 的信息：[http ://en.wikipedia.org/wiki/Rich_Text_Format](http://en.wikipedia.org/wiki/Rich_Text_Format)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T05:21:21.483

这是更改了许多属性的简单 RTF 文档：

![](https://i.stack.imgur.com/f4gVe.jpg)

这是适当的代码：

> {\rtf1\ansi\ansicpg1250\deff0\deflang1051{\fonttbl{\f0\fnil\fcharset0 Calibri;}{\f1\fnil\fcharset0 Times New Roman;}} {\colortbl;\red0\green77\blue187;\red255 \green0\blue0;} {*\generator Msftedit 5.41.21.2510;}\viewkind4\uc1\pard\sa200\sl276\slmult1\lang9\f0\fs22 你好。这是 \cf1 蓝色文本\cf0 。\cf2 这个文本是 red\cf0 。这是 \i italic \i0 & \b bold\b0 .\par \f1 即使将字体更改为 Times 也是可能的。\fs44 此文本大小为 22。\f0\fs22\par \par \par }

使用标志**\cfX**您的文本**\cf0**可以更改颜色，其中 X 是您想要的颜色编号。

颜色保存在文档头部的 colortbl 中（作为 RGB 值，缺少黑色）：

```
{\colortbl;\red0\green77\blue187;\red255\green0\blue0;} 
```

所以黑色 = cf0，蓝色 = cf1，红色 = cf2 等等。

要评估新文本，只需将新文本分配给 RTFText 变量：

```
WizardForm.InfoBeforeMemo.RTFText := '{\rtf1\ansi\ansicpg1250\deff0\deflang1051{\fonttbl{\f0\fnil\fcharset0 Calibri;}{\f1\fnil\fcharset0 Times New Roman;}}
{\colortbl ;\red0\green77\blue187;\red255\green0\blue0;}
{\*\generator Msftedit 5.41.21.2510;}\viewkind4\uc1\pard\sa200\sl276\slmult1\lang9\f0\fs22 Hello. This is \cf2 blue text\cf0 . \cf2 And this text is red\cf0 . This is \i italic \i0 & \b bold\b0 .\par
\f1 Even changing font to Times is possible. \fs44 This text is 22 size.\f0\fs22\par
\par
\par
}'; 
```

在上面的示例中，我将蓝色文本的颜色更改为红色。

# javascript - JQuery 主题问题

> ID：16046332
> 
> 赞同：0
> 
> 时间：2013-04-16T20:21:17.540
> 
> 标签：javascript, jquery, html, jquery-ui

好的，所以我正在尝试安装 UI 主题，但图像未显示。图像文件夹与 .css 处于同一级别，代码如下：

```
$(document).ready(function () {
    $("#datepicker").datepicker();
}); 
```

```
<p>Date: <input id="datepicker" type="text"></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:34:29.763

进入调用图像的 jquery-ui-1.8.custom.css 文件并将“../”放在路径前面。它不起作用把这个“../../”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:37:50.770

尝试

```
<link rel="Stylesheet" href="css/dot-luv/jquery-ui-1.8.custom.css" /> 
```

验证网址图片

# visual-studio-2010 - VS 2010 mkdir 错误

> ID：16046333
> 
> 赞同：0
> 
> 时间：2013-04-16T20:21:23.610
> 
> 标签：visual-studio-2010, visual-studio, tfs, tfsbuild

尝试在 Visual Studio 2010 中运行 TFS 构建并收到以下错误消息：

[构建路径]\BuildType\TFSBuild.proj (470)：命令“如果不存在 \[构建服务器]\[构建路径]\sources mkdir \[构建服务器]\[构建路径]\sources”退出，代码为 1 .

构建日志显示以下内容：

任务 "Exec" (TaskId:14) 如果不存在 \[Build server]\[Build path]\sources mkdir \[Build server][Build path]\sources (TaskId:14) 访问被拒绝。（任务编号：14）

运行构建和构建服务器的服务帐户对正在写入的所有目录具有完全权限。此外，它是当前在另一个 TFS 环境中成功运行构建的帐户。 **还有其他地方需要设置或更改权限吗？**

提前感谢您的任何提示或建议！

# php - 用户登录的php md5密码

> ID：16046334
> 
> 赞同：0
> 
> 时间：2013-04-16T20:21:28.310
> 
> 标签：php, mysql

我似乎已经尝试了各种方法来让我的登录正常工作，但是当我尝试登录时，它会在用户密码处停止并且从不获取它。我在我的寄存器中使用 sha1 并且在插入数据库时​​工作正常。

```
$username = $_POST['username'];
$password = md5($_POST['password']);

$result = mysql_query("SELECT * FROM users WHERE username = '$username' ");

while ($row = mysql_fetch_array($result))
{
    if($username == $row['username'] )
    {
        if( $password == $row['password'])
        {
            header("location: profile.php");
        }
        else    
            echo 'pass problem';
    }
    else

        echo 'username issue ';

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:23:17.130

这么多问题...

1.  `md5`不安全。使用盐+密钥+密码。
2.  `mysql_`功能已弃用。使用`mysqli_`或`PDO`
3.  没有卫生。使用准备好的语句和绑定参数。
4.  不要`SELECT *`。只获取您需要的列。
5.  添加一个`LIMIT`你想返回多少个结果
6.  *单个*结果不需要`while`循环。
**   密码是如何存储在数据库中的？显然，`md5`'d 密码与您的列不匹配。*

 ***实际问题**

如果用户的密码存储为`sha1`然后与`md5`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:30:46.537

我建议使用 PHPass 库来保护您的密码，因为 md5 和 shai 以及其他加密算法并不安全。

PHPass 负责

1.  加密。
2.  盐。
3.  拉伸。

而且那个方法还没有被破解（暴力破解不能算PHPass的破解）。

你可以从这里得到它：[http ://www.openwall.com/phpass/](http://www.openwall.com/phpass/)

一旦你设置了代码，它就很容易散列：

```
$hash = PasswordHash($iteration_count_log2, $portable_hashes) 
```

然后您可以从数据库中获取存储的哈希，并通过函数将登录密码哈希与现有哈希匹配

```
$auth = CheckPassword($incomingPasswordNotHashed, $hashFromDatabase); 
```

我喜欢通过做这样的事情来做一个哈希来使它更简单：

```
// Usage:   $hash = PHPhass($password);
// Pre:     $password is of type string,
//          indicating the password which
//          the user want's to hash.
// Post:    $hash is the hashed password.
function PHPhass($password)
{
    $unHashed = $password;
    require '../phpass/PasswordHash.php';
    header('Content-type: text/plain');
    $t_hasher = new PasswordHash(12, FALSE); // Define the iterations once.
    $hash = $t_hasher->HashPassword($unHashed);
    unset($t_hasher);
    return $hash;
} 
```

并这样做以匹配哈希和非哈希密码：

```
// Usage:   $check = PHPhassMatch($password, $hash)
// Pre:     $password is of type string,
//          indicating a user's passwordd
//          $hash is a hashed password.
// Post:    $check is true if $password's hash
//          value is equal to $hash.
function PHPhassMatch($password, $hash)
{
    $unHashed = $password;
    $theHashed = $hash;
    require '../phpass/PasswordHash.php';
    header('Content-type: text/plain');
    $t_hasher = new PasswordHash(8, FALSE);
    $check = $t_hasher->CheckPassword($unHashed, $theHashed);
    unset($t_hasher);
    return $check;
} 
```

此外，就像 Fresh 提到的：

*   不要使用 mysql_*，因为它已被弃用，我建议使用 PDO 或 mysqli。
*   使用准备好的语句来防止 sql 注入。
*   不要假设已发布的变量已发布，请使用 isset() 检查它们是否存在

您提到了shai1，您确定数据库中的密码不是sha1，而是与md5匹配吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T20:33:03.837

如果您使用 sha1 插入新密码，您也必须在密码比较时使用 sha1。如果将 md5 字符串与 sha1 字符串进行比较，则它不起作用。所以你必须这样做：

```
$password = sha1($_POST['password']); 
```*

# c# - C# Json.Net 序列化具有虚拟属性的实体

> ID：16046338
> 
> 赞同：4
> 
> 时间：2013-04-16T20:21:42.773
> 
> 标签：c#, asp.net-web-api, json.net

我正在尝试使用虚拟导航属性序列化复杂对象。出于某种原因，当我尝试使用 WebApi（从控制器返回它）或`JsonConvert.Serialize(myObject)`我的所有虚拟属性都为 null 来序列化这个对象时。当我检查我的对象时，我可以看到所有这些都是代理对象。出于某种原因，json.net 不能很好地处理这些代理对象。如何获取要序列化的虚拟属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T21:30:44.447

正如评论中提到的，问题在于尝试序列化延迟加载的实体框架属性并不能像那样工作。如果所有代理链接都被链接起来，您最终可以通过一个简单的调用来序列化整个数据库。

所以在序列化时，任何没有被显式加载的东西都会被赋予一个空值。每当您尝试加载代理对象时，都会进行数据库调用（每个对象一次）。

您可以通过多种不同的方式解决此问题。假设您有以下实体对象：

```
public class Person
{
    public int ID
    public string PersonName
    public Address PersonAddress
}

public class Address
{
    public int ID
    public string AddressLine
} 
```

假设您像这样加载实体：

```
Person myPerson = ObjectContext.CreateObjectSet<Person>.Where(p => p.ID == 1); 
```

你可以这样做（不是很推荐，因为它会创建两个单独的数据库调用）：

```
Person myPerson = ObjectContext.CreateObjectSet<Person>.Where(p => p.ID == 1);
var x = myPerson.Address; 
```

更好的方法是：

```
Person myPerson = ObjectContext.CreateObjectSet<Person>
.Include("PersonAddress")
.Where(p => p.ID == 1); 
```

这将避免您的相关对象完全被延迟加载。

**巨大的警告**

如果您尝试执行任何嵌套的预加载（假设您有一个`AddressCountry`对象，并且您想通过将 include 更改为 be 来预加载`.Include("PersonAddress.AddressCountry")`），可能会出现严重的性能问题，尤其是在您拥有大型数据集的情况下。

# email - 无需 Exchange 从外部源向 Sharepoint 2010 发送电子邮件

> ID：16046343
> 
> 赞同：1
> 
> 时间：2013-04-16T20:21:47.997
> 
> 标签：email, sharepoint, iis, sharepoint-2010, smtp

哇，

什么话题。

好的，我们有一个共享点服务器（启用了 SMTP 服务），它当前可以接受来自本地网络上的电子邮件客户端的电子邮件，服务器地址为 smtp 出站服务器设置。

我现在如何启用来自外部的电子邮件以在不交换的情况下访问同一个投递文件夹？我的直觉是在公共网关上打开端口 25 并在 DNS 托管配置上添加 MX 记录。

以下是我不想执行的 Exchange 设置步骤：[http ://www.managedcompany.com/FAQRetrieve.aspx?ID=35747](http://www.managedcompany.com/FAQRetrieve.aspx?ID=35747)

想法？

# javascript - 是否会为每个 HTML id 自动创建一个 JavaScript 对象？

> ID：16046344
> 
> 赞同：2
> 
> 时间：2013-04-16T20:21:51.040
> 
> 标签：javascript

我正在上一门 JavaScript 课程，我的一个学生想出了一个奇怪的语法，但我不明白为什么。我了解它的作用，但想知道以这种方式做出反应是否是 JavaScript 标准的一部分，或者它是否是 Firefox 的“故障”。问题只是让一个段落变成绿色或红色，具体取决于鼠标是否在另一个段落上。他的回答是：

```
 <p id ="p1">a text</p>
 <p onmouseover = "p1.style.color = 'red';"
    onmouseout = "p1.style.color = 'green';">another text</p> 
```

我觉得奇怪的是“p1.style”部分。p1是什么？我明白这是`<p id="p1">`. 但是 JavaScript 会自动为每个 ID 创建一个对象吗？

# java - 数组列表的索引超出范围（java）

> ID：16046346
> 
> 赞同：0
> 
> 时间：2013-04-16T20:21:57.367
> 
> 标签：java, arrays, arraylist, range

这是一个家庭作业。我正在尝试制作一个程序，在文本文件中搜索特定单词，然后打印出单词的频率。

```
public class WordFreq extends Echo{

ArrayList<WordCount>array1=new ArrayList<WordCount>();
String[] words;
int wordsTotal=0;

public WordFreq(String f, String x) throws IOException
{
  super(f);
  words=x.toLowerCase().split(" ");
}

public void processLine(String line){ 
  String[] lines=line.toLowerCase().split(" ");
  wordsTotal=wordsTotal+lines.length;
  for(int j=0; j<lines.length; j++){
    WordCount alpha=new WordCount(lines[j]);
    alpha.incCount();
    array1.add(alpha);}
  for(int x=0; x<array1.size(); x++){
    for(int y=0; y<array1.size(); y++){
      if(array1.get(x).equals(array1.get(y))&&(x!=y)){
        for(int i = 0; i< array1.get(y).getCount(); i++){
          array1.get(x).incCount();
        }
        array1.remove(y);
      }
    }
  }

}

public void reportFrequencies(){
  for(int i = 0; i<array1.size();i++){
    // System.out.println(array1.get(i).getWord()+" "+array1.get(i).getCount());
  }
  int currentWord=0;
  for(int x=0; x<words.length; x++){
    for(int y=0; y<array1.size(); y++){
      if(words[x].equals(array1.get(y).getWord())){
        currentWord=array1.get(y).getCount();}}
    System.out.print(words[x]+" ");
    System.out.printf("%.4f",(double)currentWord/wordsTotal);
  }
} 
```

}

这是我的主要方法：

```
public class FreqStudy{
  public static void main(String[] args) throws IOException
  {
    Scanner scan = new Scanner(System.in);
    System.out.println("enter file name");
    String fileName = scan.next();
    Scanner scan2 = new Scanner(System.in);
    System.out.println("enter words to search for");
    System.out.println("enter lower case, separated by spaces");
    String wordString = scan2.nextLine();
    WordFreq f = new WordFreq(fileName,wordString);
    f.readLines();
    f.reportFrequencies();
  }
} 
```

我正在使用简·奥斯汀 (Jane Austen) 所著的《艾玛》一书的 .txt 文件。这是我在运行程序并尝试搜索单词时收到的错误消息：

```
java.lang.IndexOutOfBoundsException: Index: 906, Size: 906
at java.util.ArrayList.RangeCheck(ArrayList.java:547)
at java.util.ArrayList.get(ArrayList.java:322)
at WordFreq.processLine(WordFreq.java:26)
at Echo.readLines(Echo.java:16)
at FreqStudy.main(FreqStudy.java:15)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at edu.rice.cs.drjava.model.compiler.JavacCompiler.runCommand(JavacCompiler.java:272)" 
```

以下是 Echo 和 WordCount 的代码：

```
public class WordCount{

private String word;
private int count;

public WordCount(String w){
word = w;
count = 0;
}

public String getWord(){
return word;}

public int getCount(){
return count;}

public void incCount(){count++;}

public String toString() {
return(word +  " --- " + count);
}

public boolean equals(Object other){
WordCount i = (WordCount)other;
return (this.word.equals(i.word));
}
} 
```

回声：

```
import java.util.Scanner;
import java.io.*;

public class Echo{
String fileName; // external file name
Scanner scan; // Scanner object for reading from external file

public Echo(String f) throws IOException
{
fileName = f;
scan = new Scanner(new FileReader(fileName));
}

public void readLines(){ // reads lines, hands each to processLine
while(scan.hasNext()){
  processLine(scan.nextLine());
}
scan.close();
}

public void processLine(String line){ // does the real processing work
System.out.println(line);
}
} 
```

我的代码的第 26 行是：

```
for(int i = 0; i< array1.get(y).getCount(); i++) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T22:51:51.740

如果您想更改您正在迭代的对象，我建议您使用[Iterator](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html)。

您可以`ArrayList`通过执行以下操作获取迭代器：

`Iterator<WordCount> iterator = array1.iterator();`

这可能会解决您的问题并简化您的代码。请务必使用：

`iterator.remove()`而不是`array1.remove(index)`等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:34:48.120

我认为您的问题是您使用`array1.size()`for 您的边界但在 for 循环中您正在从`array1`. 所以你的 y 计数器在增加，而你的边界总是在减少。在循环中的特定点，这种增量/减量将导致一种情况，`Y`当`array1.size`您尝试执行时，`get(y)`您将超出范围。

尝试类似的东西

```
int size = array1.size();  //outside the for loops
....
for(int y=0; y<size; y++){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T20:33:12.673

在您的嵌套`for`循环中，您`array1`在操作`array1`. 在迭代时不要改变你用来迭代的任何东西。您可能会考虑复制`array1`以进行迭代。

```
for(int x=0; x<array1.size(); x++){
    for(int y=0; y<array1.size(); y++){
        if(array1.get(x).equals(array1.get(y))&&(x!=y)){
            for(int i = 0; i< array1.get(y).getCount(); i++){
                 array1.get(x).incCount();
            }
            array1.remove(y); // NO NO NO
        }
    }
} 
```

# php - 验证登录后将来自 Sql 查询的用户信息存储在 php 会话数组中

> ID：16046352
> 
> 赞同：0
> 
> 时间：2013-04-16T20:22:07.203
> 
> 标签：php, sql, session, login

我有一个简单的登录表单，在用户输入用户名和密码后，它会将用户发送到下面的页面。此页面验证用户名和密码是否正确，然后将它们发送到站点。除了我尝试在会话中存储“userid”的部分之外，这一切都有效。我想存储用户 ID，以便我可以运行查询并使用用户的相关信息填充站点的其余部分。您可能会说，我对此仍然很陌生，因此我们将不胜感激。

```
<?php 
session_start();

if($_SERVER['REQUEST_METHOD']=='POST'){

    try{
        $con = new PDO('mysql:host=localhost;dbname=DBNAME','USERNAME','PASSWORD');
        $con->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $con->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    }catch (Exception $e){
        die('Cannot connect to database. Details:'.$e->getMessage());
    }
    $query = $con->prepare("SELECT 1 FROM userprofile WHERE username=:username && password=:password");

    $query->bindParam(":username", $_POST['myusername']);
    $query->bindParam(":password", $_POST['mypassword']);
    $query->execute();

    $result = $query->fetchAll(PDO::FETCH_ASSOC);

    if(!empty($result)){
        $_SESSION['loggedin']=1;
        $_SESSION['myusername']=$_POST['myusername'];
        $_SESSION['userid'] = ("SELECT id FROM userprofile WHERE username=:username && password=:password");

        exit(header('Location: index.php'));
    }else{
        exit(header('Location: login.php'));
    }

}else{
    exit(header('Location: login.php'));
}
?> 
```

另一个简单的问题：将我的数据库名称、用户名和密码存储在此页面上是否安全？即使这只是一个与服务器对话并且从未显示的页面，有人可以访问此信息并登录到我的数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:32:31.897

问题是什么，会话没有被存储？例如，尝试回显 $_SESSION['myusername']，或使用 Firebug 查看存储的值（如果有）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:34:13.597

您正在尝试直接从查询结果中为会话变量赋值。你不能这样做，因为运行你的查询返回一个数组，而不是一个简单的字符串。

尝试这个：

```
print_r($result); 
```

您应该会看到查询返回的值的数组，然后您可以找到您要查找的值并将其分配给会话变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T20:38:13.127

您应该只在第一个查询中获取用户信息，而不是使用第二个查询或在会话中存储它的查询：

```
$query = $con->prepare("SELECT id FROM userprofile WHERE username=:username AND password=:password LIMIT 1");

$query->bindParam(":username", $_POST['myusername']);
$query->bindParam(":password", $_POST['mypassword']);
$query->execute();

$result = $query->fetch(PDO::FETCH_ASSOC);
$query->closeCursor();

if(!empty($result)){
    $_SESSION['loggedin']=1;
    $_SESSION['myusername']=$_POST['myusername'];
    $_SESSION['userid'] = $result['id'];

    exit(header('Location: index.php'));
}else{
    exit(header('Location: login.php'));
} 
```

此外，您发布的代码会让我相信您将密码直接存储在数据库中。你不应该这样做，你应该[用盐对它们进行散列](http://php.net/manual/en/faq.passwords.php)并比较登录的散列。

# vb.net - vb.net dateandtime 从现在开始获取小时

> ID：16046354
> 
> 赞同：0
> 
> 时间：2013-04-16T20:22:16.010
> 
> 标签：vb.net, datetime, datetime-format

我希望只得到开始时间。

例子：

如果它是**下午 1:26**，我需要它说**1:00 PM**。

同样，如果是**1:59 PM** ，我也需要它说**1:00 PM**。

我似乎找不到一些可以做到这一点的代码？

为了在上面执行此操作，我需要在下面的代码中包含什么？

```
Dim tmpTime As DateTime = Format(Now, "h:mm tt")

MsgBox(tmpTime.Subtract(Format(Now, "mm"))) 
```

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:27:09.127

就这样新建一个DateTime

```
Dim tmpTime As DateTime = new DateTime(1,1,1,DateTime.Now.Hour, 0, 0) 
```

或这个

```
Dim tmpTime = DateTime.Now.AddMinutes(-DateTime.Now.Minute)
tmpTime = tmpTime.AddSeconds(-tmpTime.Second) 
```

现在到显示的时间你只是一个格式问题

```
Console.WriteLine(tmpTime.ToString("h:mm tt")) 
```

# html - 如何在上下文中设置已访问和未访问链接的样式？

> ID：16046358
> 
> 赞同：0
> 
> 时间：2013-04-16T20:22:31.387
> 
> 标签：html, css, pseudo-class

以下

```
#navigation  li  a{
    :link, :visited {
        text-transform: capitalize;
    }
} 
```

不适合我。

下面的代码有效，但包含重复

```
#navigation  li  a:link {
    text-transform: capitalize;
}

#navigation  li  a:visited {
    text-transform: capitalize;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:24:46.143

要将样式应用于多个选择器，您可以使用逗号分隔选择器来对它们进行分组。

```
#navigation  li  a:link,
#navigation  li  a:visited {
    text-transform: capitalize;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:26:05.967

标准 CSS 不支持您拥有的嵌套元素。为此，您需要使用[SCSS](http://sass-lang.com/)或[LESS](http://lesscss.org/)之类的东西。

这适用于标准 CSS 但是......

```
#navigation  li  a:link,
#navigation  li  a:visited {
    text-transform: capitalize;
} 
```

# mysql - 插入视图时的默认值

> ID：16046359
> 
> 赞同：2
> 
> 时间：2013-04-16T20:22:34.893
> 
> 标签：mysql, views

我有以下观点 [canadian_users]：

```
SELECT id, name, email
FROM users
WHERE country_id = 3; 
```

它适用于选择数据。我想知道的是，如何使插入视图的数据*默认*为`country_id = 3`？

例如，当我现在插入视图时，`country_id`是`NULL`

```
INSERT INTO canadian_users (name, email) VALUES ("bob", "foo@bar.com");
=> 
  name: bob
  email: foo@bar.com
  country_id: NULL 
```

`country_id`有没有办法让它**默认**为`3`？

```
INSERT INTO canadian_users (name, email) VALUES ("bob", "foo@bar.com");
=> 
  name: bob
  email: foo@bar.com
  country_id: 3 
```

我不想**在**表格上将列的默认值设置为 3 `users`。会有类似的看法。

此外，我的整个情况都被截断以提出一个整洁的 SO 问题。是的，观点是必要的，而且我不太可能`country_id`在我的`INSERT`陈述中实际设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T15:44:12.587

我不认为这是可能的。我能想到的唯一选择是调用存储过程/函数而不是`INSERT`语句。就像是：

```
CREATE PROCEDURE insert_canadian_user( name VARCHAR(20), email VARCHAR(20) )
BEGIN
    INSERT INTO users
    VALUE (name, email, country_id);
END 
```

但是，我很难相信您不能在`country_id`您的`INSERT`陈述中添加 。我想您的应用程序有一个例程，该例程基本上选择要访问的视图，大概基于您的用户所在的国家/地区（例如，当用户登录时）。然后你可以存储相应`country_id`的。

# dvcs - 通过慢速 Internet 连接使用 git 或 Mercurial

> ID：16046360
> 
> 赞同：0
> 
> 时间：2013-04-16T20:22:38.043
> 
> 标签：dvcs

我在一个由大约 8 名软件开发人员组成的团队中工作。主要团队位于互联网连接速度非常慢的国家。我们目前正在使用托管在主团队的服务器上的 SVN。我们的存储库大约 5gb，无法通过我们的互联网连接全部传输。我们希望开发人员可以远程工作，并希望转换为 Git 或 Mercurial。一旦我们为每个远程开发人员获得了存储库的副本，我们如何让每个人保持同步以及需要多少带宽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T22:57:54.897

git/hg 的带宽应该比 svn 轻，因为它只会在您更新分支后才拉取增量。

[https://softwareengineering.stackexchange.com/questions/139181/is-switching-from-a-cvcs-to-a-dvcs-a-considerable-bandwidth-save](https://softwareengineering.stackexchange.com/questions/139181/is-switching-from-a-cvcs-to-a-dvcs-a-considerable-bandwidth-save)有一些很棒的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T07:56:44.857

我认为要考虑的一个关键点是，对于 CVCS，每个开发人员都别无选择，只能联系中央服务器。使用 DVCS，一名开发人员可以通过慢速链接拉/推更改，其他所有人都可以从中拉/推。好吧，我说的是“一个开发者”，但它实际上是一个被他们视为本地大师的单一仓库。

DVCS 允许您创建更灵活的工作实践，以解决您遇到的任何地理或后勤问题。

# javascript - 以编程方式触发剪切/复制/粘贴

> ID：16046361
> 
> 赞同：2
> 
> 时间：2013-04-16T20:22:38.487
> 
> 标签：javascript, html, tinymce, copy-paste, mailto

我正在使用 TinyMCE 插件为用户提供一种输入 HTML 内容的方法，并将其保存到数据库中。在某些情况下，我想通过单击按钮将此内容移植到默认电子邮件客户端。

因为这是 HTML 内容，所以我不能使用`mailto`，因为它唯一支持的 MIME 类型是`text/plain`.

我的下一个最佳选择是为用户快速复制/粘贴——也许，只需单击一个按钮。TinyMCE 确实将此作为工具栏选项之一，但单击它后，我会看到以下消息：

> 您的浏览器目前不支持，请改用键盘快捷键。

我正在使用最新版本的 Chrome。

有没有办法让我自己使用 JavaScript 来实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:38:35.700

我确实想回答并让您知道在其他带有 Flash 的浏览器上也是可能的。您必须使用闪存来执行此操作。您将需要创建自己的按钮而不是默认的复制/剪切按钮，并将其作为 Flash 复制/剪切应用程序。使用 Flash 复制/剪切的示例（[http://active.tutsplus.com/tutorials/actionscript/quick-tip-create-a-copy-to-clipboard-button-in-flash/](http://active.tutsplus.com/tutorials/actionscript/quick-tip-create-a-copy-to-clipboard-button-in-flash/)）

注意：如果您确实为 tinyMCE 实现此功能，我建议将其发布给他们的开发团队以供添加。

# html - 阻止用户在我们网站上观看 YouTube 视频时被带离我们的网站

> ID：16046363
> 
> 赞同：0
> 
> 时间：2013-04-16T20:22:42.797
> 
> 标签：html, iframe, youtube

我想阻止用户在查看嵌入在我们网站上的 YouTube 视频时被带离我们的网站。

我们正在使用 YouTube iframe 来显示视频。

这是我们正在使用的标记：

```
<iframe 
   width="560" 
   height="315" 
   src="http://www.youtube.com/embed/kffGRSuNlYA?modestbranding=1&rel=0&showinfo=0" 
      frameborder="0" 
      allowfullscreen="">
</iframe> 
```

使用上面显示的标记，用户可以被引导到我们的 YouTube 频道。我们希望用户在查看我们使用 iframe 嵌入的视频时留在我们的网站上。

我们不介意视频中出现 YouTube 徽标。

我可以添加其他属性或参数来让用户留在我们的网站上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:36:28.533

小心不要公开违反他们的服务[条款](https://developers.google.com/youtube/terms)。谷歌员工确实关注 StackOverflow。他们可以找到您的网站并确保 YouTube 视频永远不会在其中播放。

对于 youtube，您可以付费删除广告。也许，他们的品牌也可以做同样的事情（尽管我怀疑，网络公司可以非常保护他们的品牌）。

# javascript - Access-Control-Allow-Origin 不允许来源 http://localhost

> ID：16046364
> 
> 赞同：13
> 
> 时间：2013-04-16T20:22:57.950
> 
> 标签：javascript, node.js, backbone.js, cors

我正在尝试从backbone.js 获取到我的node.js 服务器。但是，我在控制台中收到以下错误：

`Origin http://localhost is not allowed by Access-Control-Allow-Origin.`

我将以下内容添加到我的 node.js 服务器：

```
var allowCrossDomain = function(req, res, next) {
    res.header('Access-Control-Allow-Origin', "http://localhost");
    res.header('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE');
    res.header('Access-Control-Allow-Headers', 'Content-Type');
};

app.configure(function() {
    app.use(allowCrossDomain);
}); 
```

但它仍然返回相同的错误。但是，即使这确实有效，它似乎也不是理想的解决方案，因为我希望来自世界各地的用户能够发送请求。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-16T20:46:57.297

如果您希望每个人都能够访问 Node 应用程序，请尝试使用

```
res.header('Access-Control-Allow-Origin', "*") 
```

这将允许来自任何来源的请求。[CORS 启用](http://enable-cors.org/)站点有很多关于不同的 Access-Control-Allow 标头以及如何使用它们的信息。

如果您使用的是 Chrome，请查看有关 localhost 和 Access-Control-Allow-Origin[的](https://code.google.com/p/chromium/issues/detail?id=67743)错误错误。这里还有另一个[StackOverflow 问题](https://stackoverflow.com/questions/10883211/deadly-cors-when-http-localhost-is-the-origin)详细说明了该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:42:44.110

如果您正在对您的 localhost 进行 fetch 调用，我猜它是由 node.js 在与您的主干代码相同的目录中运行的，那么它很可能会打开`http://localhost:3000`或类似的东西。这应该是你的模型：

```
var model = Backbone.Model.extend({
    url: '/item'
}); 
```

在你的 node.js 中，你现在必须接受这样的调用：

```
app.get('/item', function(req, res){
    res.send('some info here');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-13T08:53:38.077

有 2 个调用需要设置正确的标头。最初有一个预检检查，所以你需要类似...

```
app.get('/item', item.list);
app.options('/item', item.preflight); 
```

然后具有以下功能...

```
exports.list = function (req, res) {
Items.allItems(function (err, items) {
    ...
        res.header('Access-Control-Allow-Origin', "*");     // TODO - Make this more secure!!
        res.header('Access-Control-Allow-Methods', 'GET,PUT,POST');
        res.header('Access-Control-Allow-Headers', 'Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept');
        res.send(items);
      }
   );
}; 
```

以及飞行前检查

```
exports.preflight = function (req, res) {
Items.allItems(function (err, items) {
        res.header('Access-Control-Allow-Origin', "*");     // TODO - Make this more secure!!
        res.header('Access-Control-Allow-Methods', 'GET,PUT,POST');
        res.header('Access-Control-Allow-Headers', 'Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept');
        res.send(200);
    }
  );
}; 
```

如果需要，您可以将 res.header() 代码合并到一个函数中。

同样如上所述，小心使用 res.header('Access-Control-Allow-Origin', "*") 这意味着任何人都可以访问您的网站！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-22T15:14:18.363

通过 localhost 你必须使用`null`原点。我建议您创建一个允许的主机列表并检查请求的`Host`标头。如果它包含在列表中，则通过 localhost 发回一个

```
res.header('Access-Control-Allow-Origin', "null"); 
```

通过任何其他域

```
res.header('Access-Control-Allow-Origin', hostSentByTheRequestHeader); 
```

如果它不包含在列表中，则发回服务器主机名，因此浏览器将隐藏这些请求的响应。

这更加安全，因为通过允许来源*和允许凭据，每个人都将能够例如窃取登录用户的个人资料数据等......

所以总结一下这样的事情：

```
if (reqHost in allowedHosts)
    if (reqHost == "http://localhost")
        res.header('Access-Control-Allow-Origin', "null");
    else
        res.header('Access-Control-Allow-Origin', reqHost);
else
    res.header('Access-Control-Allow-Origin', serverHost); 
```

如果您想允许多个其他域访问您的页面，这是最安全的解决方案。（我想你可以弄清楚如何通过 node.js 获取主机请求标头和服务器主机。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-07T08:15:29.163

这种方法解决了我的问题以允许多个域

```
app.use(function(req, res, next) {
      var allowedOrigins = ['http://127.0.0.1:8020', 'http://localhost:8020', 'http://127.0.0.1:9000', 'http://localhost:9000'];
      var origin = req.headers.origin;
      if(allowedOrigins.indexOf(origin) > -1){
           res.setHeader('Access-Control-Allow-Origin', origin);
      }
      //res.header('Access-Control-Allow-Origin', 'http://127.0.0.1:8020');
      res.header('Access-Control-Allow-Methods', 'GET, OPTIONS');
      res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization');
      res.header('Access-Control-Allow-Credentials', true);
      return next();
    }); 
```

# vba - 如何在 excel 2007 中使用 VBA 重命名范围

> ID：16046365
> 
> 赞同：1
> 
> 时间：2013-04-16T20:23:06.440
> 
> 标签：vba, excel, excel-2007

我在 PHP 和 Java 方面有 8 年以上的专业编程经验，但在 VBA 方面没有。马上学习。

我正在尝试制作家庭预算表（仅用于 VBA 学习目的）。为此，我已经完成了以下操作

```
* In new excel (2007) file, rename sheet 1 as 'Forms' And Sheet2 as 'CatAcc'
* In sheet 'CatAcc', I'm using (planning) column A for categories and B for Account
* Row 1 is heading (A1 = "Categories", B1="Account"
* Using forms sheet (cell C2) & VBA button, I want to add a new category,
  sort it alphabetically and then rename range to add newly added row. 
```

我为此编写了以下代码（记录 testmacro 以检查如何命名范围）

```
Sub AddCat_Click()
    'Copy data as last row
    Worksheets("CatAcc").Cells(Rows.Count, "A").End(xlUp).Offset(1).Value = Worksheets("Forms").Cells(2, "C").Value

    'Find total Rows in categories
    Dim totalRows
    totalRows = Worksheets("CatAcc").Range("A2").End(xlDown).Row

    'Define Range
    Dim rng
    rng = "A2:A" & totalRows
    'MsgBox rng

    'Select the range - Getting error in following line.
    Worksheets("CatAcc").Range(rng).Select

    'Name the range
    ActiveWorkbook.Names.Add Name:="categories", RefersToR1C1:="=CatAcc!R2C1:R3C1"

    'Sort range alphabetically

    'Apply range as drop-down options
End Sub
Sub testmacro()
    Range("A2:A3").Select
    ActiveWorkbook.Names.Add Name:="categories", RefersToR1C1:= _
        "=CatAcc!R2C1:R3C1"
End Sub 
```

选择范围时，出现以下错误

```
Run-time error '1004'
Select method of Range class failed 
```

我无法理解该错误的含义以及为什么我只是通过添加工作表名称来得到它。

同样，以下行是什么意思？那里发生了什么？我无法理解 R2C1:R3C2 的含义。当我将 A2:A3 单元格命名为“类别”时，此值来自录制的宏

```
ActiveWorkbook.Names.Add Name:="categories", RefersToR1C1:="=CatAcc!R2C1:R3C1" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:29:43.970

您不需要选择范围`Range("A2:A3").Select`。`"=CatAcc!R2C1:R3C1"`下一行中的自动处理它。

**解释**

"=CatAcc!R2C1:R3C1"

1.  CatAcc 是范围所在的工作表
2.  R2C1 表示第 2 行第 1 行，不过是 A2
3.  同样，R3C1 是第 3 行第 1 行，不过是 A3

所以上面也可以写成

```
ActiveWorkbook.Names.Add NAME:="categories", RefersTo:="=CatAcc!$A$2:$A$3" 
```

# php - 仅重定向到 index.html 一次

> ID：16046372
> 
> 赞同：2
> 
> 时间：2013-04-16T20:23:18.067
> 
> 标签：php, wordpress, redirect

我对 php 非常陌生，正在编写一个脚本，该脚本将用户访问的 url (myurl.com) 重定向到 myurl.com/index.html (使用 Wordpress 并添加临时登录页面)，并从在那里，您将能够访问一个不相关的链接，然后可以选择继续访问 myurl.com 并像往常一样访问 Wordpress 网站。到目前为止，这就是我所拥有的。

```
isset($_GET['home'])?$home=1:header("Location:http://myurl.com/index.html"); 
```

但当然，当您从重定向继续后访问 myurl.com 时，这仍然是重定向。任何帮助/建议都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:36:13.987

您正在检查`home`但没有设置`home`循环。

您可以将`home`变量与 URL 请求一起传递 - 如果这不适用于您的情况，请告诉我：

```
if (!isset($_GET['home'])) {
    header("Location: http://myurl.com/index.html?home=1");
} else {
    // Home is already set dont redirect
} 
```

# php - 多个 $_POST 变量？

> ID：16046373
> 
> 赞同：0
> 
> 时间：2013-04-16T20:23:19.780
> 
> 标签：php, mysql

我在这里做错了什么？

```
// INSERT: if we have a name to add...
if($_POST['email'] &  $_POST['job_id'] ) {
   // little bit of cleaning...
   $email = mysql_real_escape_string($_POST['email']);
   $job_id = mysql_real_escape_string($_POST['job_id']);
   // insert new name into table
   $sql = "INSERT INTO job_applications (id, email, job_id) VALUES ('','$email,'$job_id')";
   $result = mysql_query($sql, $conn) or trigger_error("SQL", E_USER_ERROR);
} // end if 
```

我正在使用 '&' 但没有运气，变量中是否包含某种语法？一次只想“if($_POST[])”超过一个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:26:00.070

您正在使用 & 而不是 &&。**&&**是逻辑与，请参见[http://php.net/manual/en/language.operators.logical.php](http://php.net/manual/en/language.operators.logical.php)， **&**是按位运算，这不是您在[http://www.php 中寻找的内容。网络/手册/en/language.operators.bitwise.php](http://www.php.net/manual/en/language.operators.bitwise.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:26:05.867

尝试改变

```
$sql = "INSERT INTO job_applications (id, email, job_id) VALUES ('','$email,'$job_id')"; 
```

为了

```
$sql = "INSERT INTO job_applications (id, email, job_id) VALUES ('', '$email','$job_id')"; 
```

有一个错误报价。

而且，它`&&`和不是`&`

`&&`= 和

`||`= 或

并使用 PDO 更新自己，更安全、**更酷**。

正如@S.Visser 所说，PDO 有一些很酷的东西，比如：准备好的语句、占位符，而且它对 SQL 注入更安全。

使用起来并不难：

```
// Connect to MySQL Server
$user = "test";
$pass = "test";
$dbh = new PDO('mysql:host=127.0.0.1;dbname=test', $user, $pass);
// Prepare some statement
$stmt = $dbh->prepare("SELECT * FROM test WHERE `email` = :email"); 
```

绑定一些参数，参数通常用`:`参数名称前表示。像： `:email`, `:name`, `:pass`, `:user`, 等等... [`PDOStatement::bindParam`](http://www.php.net/manual/pt_BR/pdostatement.bindparam.php)还包含第三个参数，它是值类型。值类型用 PDO 常量表示，可以在此处找到： [http](http://www.php.net/manual/pt_BR/pdo.constants.php) ://www.php.net/manual/pt_BR/pdo.constants.php 这些常量看起来`PDO::PARAM_*` [`PDOStatement::bindParam`](http://www.php.net/manual/pt_BR/pdostatement.bindparam.php)也可以执行[mysql_real_escape_string](http://php.net/manual/pt_BR/function.mysql-real-escape-string.php)工作，并在需要时引用该值。

```
$stmt->bindParam(':email', 'email@example.com');
// Execute the statement
$stmt->execute();
// Fetch the result
$result = $stmt->fetchAll(PDO::FETCH_ASSOC);
// Show result array with print_r
print_r($result); 
```

好吧，就是这样，对不起英语，我是巴西人：P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T20:24:25.107

您应该使用`&&`而不仅仅是`&`. 这样可以确保两个条件都满足。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T20:27:31.613

**在 if 语句中复制过去的代码。**

```
if(isset($_POST['email']) && isset($_POST['job_id'])) { 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T20:30:09.863

> TS：一次只想“if($_POST[])”多于一个值？

有一种方法可以通过 $_POST[''] 循环，因为它是一个数组。但是您需要小心并检查每个用户输入！

```
foreach ($_POST as $key => $post) {
  if(empty($post) {
   echo $key ." is empty";
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T20:34:42.307

除了逻辑运算符（`&&`vs `&`），你最好使用：

```
if ( isset($_POST['email']) && isset($_POST['job_id']) ) 
```

否则您的服务器可能会产生警告并记录它，这将影响性能。

# matlab - 使用 ODE 进行 MATLAB GUI 编程

> ID：16046374
> 
> 赞同：0
> 
> 时间：2013-04-16T20:23:21.947
> 
> 标签：matlab, function, user-interface, matlab-guide, ode

我是编程新手，我必须使用常微分方程 (ODE) 创建一个 matlab gui 代码，然后绘制所述方程。我遇到的问题是 ode 的函数在一个 .m 文件中定义并在另一个 .m 文件中调用的格式，如下所示：

```
% First part
% This is the ode .m file
function dydt=project(t,y)
 dydt=zeros(3,1);
 y(1);
 y(2);
 y(3);
 dydt(1) = (some math);
 dydt(2) = (some math);
 dydt(3) = (some math);
end

% Second part
% This is a call for the ode function defined in the above .m file
% This can be in another .m file or called from command window
[t,y]=ode45('project',[0 10],[9.8 6591 61.3]); 
```

我的代码要求我创建一个 gui，它会在 gui 程序启动后立即初始化 ode 函数（第一部分），然后将接受初始条件并在按下按钮后立即计算对函数的调用（第二部分）。

我的问题是：我必须调用 .m 文件还是有办法将上述 ode 函数编码到 gui 代码中？如何将第二部分输入到 gui 代码中？

感谢所有做出贡献的人。

编辑：下面的代码是 GUI 的 GUIDE 代码，您可以随意测试它并确认错误。

```
function varargout = reaction_kinetics(varargin)
% REACTION_KINETICS MATLAB code for reaction_kinetics.fig
%REACTION_KINETICS, by itself, creates a new REACTION_KINETICS or raises the existing
%      singleton*.
%
%H = REACTION_KINETICS returns the handle to a new REACTION_KINETICS or the handle to
%      the existing singleton*.
%
%REACTION_KINETICS('CALLBACK',hObject,eventData,handles,...) calls the local
%      function named CALLBACK in REACTION_KINETICS.M with the given input arguments.
%
%REACTION_KINETICS('Property','Value',...) creates a new REACTION_KINETICS or raises   
%the existing singleton*.  Starting from the left, property value pairs are
%      applied to the GUI before reaction_kinetics_OpeningFcn gets called.  An
%      unrecognized property name or invalid value makes property application
%      stop.  All inputs are passed to reaction_kinetics_OpeningFcn via varargin.
%
%      *See GUI Options on GUIDE's Tools menu.  Choose "GUI allows only one
%      instance to run (singleton)".
%
% See also: GUIDE, GUIDATA, GUIHANDLES

% Edit the above text to modify the response to help reaction_kinetics

% Last Modified by GUIDE v2.5 16-Apr-2013 18:44:46

% Begin initialization code - DO NOT EDIT
gui_Singleton = 1;
gui_State = struct('gui_Name',       mfilename, ...
                   'gui_Singleton',  gui_Singleton, ...
                   'gui_OpeningFcn', @reaction_kinetics_OpeningFcn, ...
                   'gui_OutputFcn',  @reaction_kinetics_OutputFcn, ...
                   'gui_LayoutFcn',  [] , ...
                   'gui_Callback',   []);
if nargin && ischar(varargin{1})
    gui_State.gui_Callback = str2func(varargin{1});
end

if nargout
    [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
else
    gui_mainfcn(gui_State, varargin{:});
end
% End initialization code - DO NOT EDIT

% --- Executes just before reaction_kinetics is made visible.
function reaction_kinetics_OpeningFcn(hObject, eventdata, handles, varargin)
% This function has no output args, see OutputFcn.
% hObject    handle to figure
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
% varargin   command line arguments to reaction_kinetics (see VARARGIN)

% Perform first set of ODE's
function dydt=project(t,y)
dydt=zeros(3,1);
glc=y(1);
gsh=y(2);
gsg=y(3);
dydt(1)= (-5400*((924*glc)-(gsh/5600)))/((22*300)+(glc*300)+924*22*(1+(glc/22)+(gsh/30)));
dydt(2)=(5400*((924*glc)-(gsh/5600)))/((22*300)+(glc*300)+924*22*(1+(glc/22)+(gsh/30)))-(150*gsh/(150+gsh))-(1100*(gsh^3)/((3000^3)+(gsh^3)))-((2*4500*.01*gsh)/((1330+gsh)*(0.09+0.01)))+((2*8925*gsg*50)/((107+gsg)*(10.4+50)))-0.002*gsh;
dydt(3)=(4500*.01*gsh)/((1330+gsh)*(0.09+0.01))- ((8925*gsg*50)/((107+gsg)*(10.4+50)))-((40*gsg)/(1250+gsg))-((4025*gsg)/(7100+gsg))-0.1*gsg;
end

handles.project=project;
handles.current_data=handles.project;

% Choose default command line output for reaction_kinetics
handles.output = hObject;

% Update handles structure
guidata(hObject, handles);

% UIWAIT makes reaction_kinetics wait for user response (see UIRESUME)
% uiwait(handles.figure1);

% --- Outputs from this function are returned to the command line.
function varargout = reaction_kinetics_OutputFcn(hObject, eventdata, handles) 
% varargout  cell array for returning output args (see VARARGOUT);
% hObject    handle to figure
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Get default command line output from handles structure
varargout{1} = handles.output;

% --- Executes on selection change in popupmenu2.
function popupmenu2_Callback(hObject, eventdata, handles)
% hObject    handle to popupmenu2 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: contents = cellstr(get(hObject,'String')) returns popupmenu2 contents as cell array
%        contents{get(hObject,'Value')} returns selected item from popupmenu2

val=get(hObject,'Value');
str=get(hObject,'String');
switch str{val}
    case 'GSH Half Life' % User selects GSH Half Life
        handles.current_data=handles.plot(t,y);
    case 'GSH v Glc' % User selects GSH v Glc
        handles.current_data=handles.plot(y(2),y(1));
    case 'GSH v GSSG' % User selects GSH v GSSG
        handles.current_data=handles.plot(y(2),y(3));
end
guidata(hObject,handles);

% --- Executes during object creation, after setting all properties.
function popupmenu2_CreateFcn(hObject, eventdata, handles)
% hObject    handle to popupmenu2 (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: popupmenu controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end

% --- Executes on button press in plot_button.
function plot_button_Callback(hObject, eventdata, handles)
% hObject    handle to plot_button (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Plot using the popup menu
plot(handles.current_data);

function gsh_value_Callback(hObject, eventdata, handles)
% hObject    handle to gsh_value (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of gsh_value as text
%        str2double(get(hObject,'String')) returns contents of gsh_value as a double

% Convert string to numeric value for gsh_value
gsh_ivalue = str2double(get(hObject,'string'));
if isnan(gsh_ivalue)
  errordlg('You must enter a numeric value','Bad Input','modal')
  uicontrol(hObject)
    return
end

% --- Executes during object creation, after setting all properties.
function gsh_value_CreateFcn(hObject, eventdata, handles)
% hObject    handle to gsh_value (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end

function gssg_value_Callback(hObject, eventdata, handles)
% hObject    handle to gssg_value (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of gssg_value as text
%        str2double(get(hObject,'String')) returns contents of gssg_value as a double

gssg_ivalue = str2double(get(hObject,'string'));
if isnan(gssg_ivalue)
  errordlg('You must enter a numeric value','Bad Input','modal')
  uicontrol(hObject)
    return
end

% --- Executes during object creation, after setting all properties.
function gssg_value_CreateFcn(hObject, eventdata, handles)
% hObject    handle to gssg_value (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end

function glc_value_Callback(hObject, eventdata, handles)
% hObject    handle to glc_value (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Hints: get(hObject,'String') returns contents of glc_value as text
%        str2double(get(hObject,'String')) returns contents of glc_value as a double

glc_ivalue = str2double(get(hObject,'string'));
if isnan(glc_ivalue)
  errordlg('You must enter a numeric value','Bad Input','modal')
  uicontrol(hObject)
    return
end

% --- Executes during object creation, after setting all properties.
function glc_value_CreateFcn(hObject, eventdata, handles)
% hObject    handle to glc_value (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    empty - handles not created until after all CreateFcns called

% Hint: edit controls usually have a white background on Windows.
%       See ISPC and COMPUTER.
if ispc && isequal(get(hObject,'BackgroundColor'), get(0,'defaultUicontrolBackgroundColor'))
    set(hObject,'BackgroundColor','white');
end

% --- Executes on button press in calculate_button.
function calculate_button_Callback(hObject, eventdata, handles)
% hObject    handle to calculate_button (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Calculate the ode
[t,y]=ode45('project',[0 10],[glc_ivalue gsh_ivalue gssg_ivalue]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:32:48.050

Matlab GUI 是事件驱动的，这意味着做事意味着设置[图形对象](http://www.mathworks.nl/help/matlab/ref/uicontrol.html)的回调， 例如`uicontrol`使用样式`pushbutton`（例如）来实现或调用您的自定义代码。这意味着：每次您单击按钮时，您的自定义代码都会运行。

# javascript - 刷新选择菜单-TypeError：无法读取未定义的属性“jQuery19105462655627634376”

> ID：16046384
> 
> 赞同：2
> 
> 时间：2013-04-16T20:23:53.720
> 
> 标签：javascript, jquery, typeerror, jquery-mobile

给定功能：

```
function pintarTipologias() {
console.log("pintarTipologias");
$('#comboTipologias').selectmenu();
var tipologias = JSON.parse(localStorage.getItem("tipologias"));
if (tipologias != null && tipologias.length > 0) {
    tipologias.forEach(function(tipologia, posicion) {
        $("#comboTipologias").append('<option value=' + tipologia.id +  '>' + tipologia.denominacion + '</option>');
    });
}
$('#comboTipologias').selectmenu();
$('#comboTipologias').selectmenu("refresh");
} 
```

最后一行产生以下错误：

> TypeError：无法读取未定义的属性“jQuery19105462655627634376”

我在 Chrome 控制台中写道：

```
$('#comboTipologias').selectmenu("refresh");
TypeError: Cannot read property 'jQuery19105462655627634376' of undefined
$('#comboTipologias').selectmenu();
[<select id=​"comboTipologias" name=​"comboTipologias" data-mini=​"true" data-native-menu=​"false" multiple=​"multiple" tabindex=​"-1">​…​&lt;/select>​]
$('#comboTipologias').selectmenu("refresh");
[<select id=​"comboTipologias" name=​"comboTipologias" data-mini=​"true" data-native-menu=​"false" multiple=​"multiple" tabindex=​"-1">​…​&lt;/select>​] 
```

我不明白

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:04:21.210

尝试这个：

```
$('#comboTipologias').selectmenu('refresh', true); 
```

# javascript - jQuery ajax beforeSend

> ID：16046387
> 
> 赞同：27
> 
> 时间：2013-04-16T20:24:05.890
> 
> 标签：javascript, jquery, jquery-blockui

我有一个简单的 AJAX 调用，它在`beforeSend`和 上执行一个函数`complete`。他们执行得很好，但是`beforeSend`“似乎”直到成功之后才执行。

上面`beforeSend`有“请稍候”通知。如果我在函数之后休息一下`beforeSend`那么它将显示该通知，然后成功。如果没有断点，那么它将坐在那里并在等待响应时思考，然后我的请等待通知将在成功命中后出现几分之一秒。

所需的功能是在发送请求后立即显示通知，以便在等待响应时显示。

```
 $.ajax({
            type : 'POST',
            url : url,
            async : false,
            data : postData,
            beforeSend : function (){
                $.blockUI({
                    fadeIn : 0,
                    fadeOut : 0,
                    showOverlay : false
                });
            },
            success : function (returnData) {
                //stuff
            },
            error : function (xhr, textStatus, errorThrown) {
                //other stuff
            },
            complete : function (){
                $.unblockUI();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-16T21:04:49.677

Your problem is the `async:false` flag. Besides the fact that it is bad practice (and really only makes sense in a very limited number of cases), it actually messes with the order of execution of the rest of the code. Here is why:

It seems that somewhere in the `blockUI` code they are setting a `setTimeout`. As a result, the `blockUI` code waits a very short amount of time. Since the next instruction in the queue is the `ajax()` call, the `blockUI` execution gets placed right behind that. And since you are using `async:false`, it has to wait until the complete `ajax` call is completed before it can be run.

In detail, here is what happens:

*   You call `blockUI`
*   `blockUI` has a setTimeout and gets executed after the timeout is done (even if the timeout length is 0, the next line, `ajax()` will be run first)
*   `ajax()` is called with `async:false`, which means JS stops everything until the request returns
*   `ajax()` returns successfully and JS execution can continue
*   the setTimeout inside `blockUI` code is probably over, so it will be executed next
*   it looks like `blockUI` runs as part of `success`, but in reality, it has just been queued up because of a timeout

If you would NOT use `async:false`, the execution would go as followed:

*   You call `blockUI`
*   `blockUI` has a setTimeout and gets executed after the timeout is done (even if the timeout length is 0, the next line, `ajax()` will be run first)
*   `ajax()` is called and sends of a request to the server.
*   while it is connecting to the server, normal JS execution continues
*   the setTimeout inside `blockUI` code is probably over, so it will be executed next
*   the `blockUI` text shows up
*   unless there is more JS code somewhere, JS execution is done until the AJAX `success` and `complete` callbacks are executed

Here are some jsFiddle examples to demonstrate the problem:

[Example 1](http://jsfiddle.net/sSzjR/1/): This is the situation you are experiencing. The `blockUI` text doesn't show until after the `ajax` call executes.

[Example 2](http://jsfiddle.net/sSzjR/2/): This is the exact same situation as yours, but with an `alert` before the `ajax` call. Because there is an `alert`, the timeout inside `blockUI` places the appearance of the `blockUI` text after the `alert` instead of after the `ajax`.

[Example 3](http://jsfiddle.net/sSzjR/3/): This is how it is supposed to work without `async:false`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T20:28:32.113

这很可能是因为`async : false`. 由于您的调用是同步的，因此在您开始调用该`$.ajax()`函数后，在收到响应之前什么都不会发生，并且就您的代码而言，接下来的事情将是`success`处理程序

为了让它工作，你可以做这样的事情

```
$.blockUI({
        fadeIn : 0,
        fadeOut : 0,
        showOverlay : false
});
// and here goes your synchronous ajax call
$.ajax({
            type : 'POST',
            url : url,
            async : false,
            data : postData,
            success : function (returnData) {
                //stuff
            },
            error : function (xhr, textStatus, errorThrown) {
                //other stuff
            },
            complete : function (){
                $.unblockUI();
            }
     }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T22:35:31.167

```
$.blockUI({
        fadeIn : 0,
        fadeOut : 0,
        showOverlay : false
});
setTimeout(function() {
     $.ajax({
            type : 'POST',
            url : url,
            async : false,
            data : postData,
            success : function (returnData) {
                //stuff
            },
            error : function (xhr, textStatus, errorThrown) {
                //other stuff
            }
     });
},100);
$.unblockUI(); 
```

[http://bugs.jquery.com/ticket/7464](http://bugs.jquery.com/ticket/7464)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-21T20:40:53.563

另一种方法可能是重载 $.ajax 函数

```
$.orig_ajax = $.ajax;

$.ajax = function() {
    var settings = {async: true};
    if (2 == arguments.length && 'string' == typeof arguments[0] && 'object' == typeof arguments[1])
        settings = arguments[1];
    else if (arguments.length && 'object' == typeof arguments[0])
        settings = arguments[0];

    if (!settings.async && 'function' == typeof settings.beforeSend) {
        var args = arguments;

        settings.beforeSend();
        var dfd = $.Deferred();
        setTimeout(function() {
            $.orig_ajax.apply($, args).then(dfd.resolve)
                                      .fail(dfd.reject);
        } ,100);
        return dfd.promise();
    } else
        return $.orig_ajax.apply($, arguments);
}; 
```

不完美（因为不同的延迟对象），但可能会有所帮助..

# android - 如何将电子邮件附件加载到我的应用程序？

> ID：16046392
> 
> 赞同：0
> 
> 时间：2013-04-16T20:24:38.830
> 
> 标签：android, android-intent, android-activity

我正在开发一个 Android 应用程序。

我已经在 Manifest.xml 中添加了一些设置，如下所示。

```
<intent-filter>
     <action android:name="android.intent.action.VIEW" />
     <category android:name="android.intent.category.DEFAULT" />
     <data android:mimeType="application/pdf" />
     <data android:mimeType="text/html" />
     <data android:mimeType="text/htm" />
</intent-filter> 
```

然后，用户可以选择我的应用程序来打开附件。

问题是在那之后我能做什么？如何访问该文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:27:23.093

您将在声明此过滤器的活动中收到一个意图。然后，获取您正在打开的文件的 URI：

```
Intent intent = getIntent();
Uri uri = intent.getData(); 
```

这个 URI 可能会指向一个 PDF 文件。你可以像这样阅读这个文件：

```
ContentResolver cr = getContentResolver();
InputStream is = cr.openInputStream(uri); 
```

如果您对直接访问文件感兴趣，我建议您从输入流中编写自己的文件，因为此 uri 可能不一定解析为真实文件，如果是，您可能无权读取它。这是一个关于这个案例的问题，它提供了进一步的解释：

[从捕获的 DownloadManager 意图中检索文件路径](https://stackoverflow.com/questions/14364091/retrieve-file-path-from-caught-downloadmanager-intent)

# html - 如何使屏幕按窗口大小排列

> ID：16046396
> 
> 赞同：-1
> 
> 时间：2013-04-16T20:24:46.850
> 
> 标签：html, css

我正在做一个项目。我有一个带有两个水平 DIV 的屏幕。要求是当窗口大小超过 800px 时，两个 div 都将可见。如果低于 800px，则只有 1 个 div 可见。怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:40:44.160

使用 CSS 使用媒体查询，其中 hdiv1 和 hdiv2 是 DIV Id。

```
#hdiv1 {
    display: block;
    }
#hdiv2 {
    display: block;
    }

/* Media Queries */
@media screen and (max-width: 800px) {

#hdiv1 {
    display: none;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:45:46.687

它可能可以使用 jQuery 来完成。

```
window.onresize = function(event) {  
if ( $(window).width() > 800){ 
    $( "YourDiv" ).show(); 
    $( "YourDiv" ).show(); 
} 

if ( $(window).width() < 800 ){ 
    $( "YourDiv" ).hide();
}

} 
```

或者您可以添加/删除用于显示的 css 从隐藏到可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T20:39:06.777

在 CSS3 中结合使用媒体查询和 display:none 属性。

检查这个jsfiddle [http://jsfiddle.net/XuS4g/](http://jsfiddle.net/XuS4g/)

```
#first,#second{
   height:400px;
    background:red;
    display:block;
    float:left;
}
#first{
    width:70%;
}
#second{
    width:200px;
    background:blue;
}

@media screen and (max-width:800px){
    #second{
        display:none;
    }
} 
```

# mysql - 搜索标题在带有 MySQL 的 Windows 上的 OSQA 不起作用 - 如何解决？

> ID：16046398
> 
> 赞同：0
> 
> 时间：2013-04-16T20:24:54.453
> 
> 标签：mysql, full-text-search, osqa

使用 IIS 和 MySQL 安装 OSQA 后，标签搜索有效，但问题搜索无效。所有结果显示为空白。

我通读了[这篇](http://meta.osqa.net/questions/84/why-search-does-not-search-in-question-body)文章和[这篇](http://meta.osqa.net/questions/10378/why-does-question-search-on-my-osqa-instance-not-work)文章，但没有看到实际的解决方案。如果我错过了，有人可以澄清或提供解决方案吗？

我还发现[这篇文章](http://meta.osqa.net/questions/6132/mysql-full-text-search)引用了[这个链接](http://svn.osqa.net/browse/OSQA/osqa/trunk/forum_modules/mysqlfulltext/fts_install.sql?r=HEAD)来下载 MySQL 模块以启用 FTS，但是该链接会导致服务器错误。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:44:13.793

我添加了 fts_install.sql 的内容（只需搜索该文件）（如下）。不得不对`INSERT`语句进行一些小的修改，但似乎有效：

```
ALTER TABLE osqa634.forum_mysqlftsindex CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci;

delimiter |

CREATE TRIGGER osqa634.fts_on_insert AFTER INSERT ON osqa634.forum_node
  FOR EACH ROW
  BEGIN
    INSERT INTO osqa634.forum_mysqlftsindex 
    SET node_id=NEW.id, 
        title=UPPER(NEW.title), 
        body=UPPER(NEW.body), 
        tagnames=UPPER(NEW.tagnames); 
  END;
|

delimiter |

CREATE TRIGGER osqa634.fts_on_update AFTER UPDATE ON forum_node
  FOR EACH ROW
  BEGIN
    UPDATE osqa634.forum_mysqlftsindex 
    SET title = UPPER(NEW.title), 
    body = UPPER(NEW.body), 
    tagnames = UPPER(NEW.tagnames) 
    WHERE node_id = NEW.id;
  END;

|

INSERT INTO osqa634.forum_mysqlftsindex (node_id, title, body, tagnames) 
SELECT id, UPPER(title), UPPER(body), UPPER(tagnames) FROM osqa634.forum_node; 
```

似乎可以解决问题。

# html - 为什么 :empty 返回链接和图像？

> ID：16046405
> 
> 赞同：-2
> 
> 时间：2013-04-16T20:25:15.113
> 
> 标签：html, css

为什么`:empty`返回链接和图像？

我认为通过 :empty 选择器返回图像和链接没有任何意义，因为只有这些标签的属性很重要。

[这个链接](http://www.w3.org/TR/selectors/#empty-pseudo)说 :empty 伪类表示一个根本没有子元素的元素。

这是最新标准中定义的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:37:57.793

**如果**:empty 伪类表示一个根本没有子元素的元素**并且**选择`:empty`器不表示特定`img`元素，**那么**该特定`img`元素至少有一个子元素。

这是简单的演绎推理。

根据 HTML 标准为始终为空的元素添加例外会使该规则更加复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:40:23.180

`:empty`正如您所说，确实选择了所有没有任何子元素的元素（实际上是所有没有任何内容的元素）。

我想你是在问“为什么需要选择`<link>`和`<image>`”。

好吧，首先，`:empty`它只是一个按一定规则选择的选择器。如果`:empty`省略一些元素而只显示一些元素，会不会更令人困惑？使用内置异常会不一致且难以处理。

（话虽如此，我仍然会关注您对为什么`<link>`还选择该元素的问题。上述推理在某种程度上仍然适用，但显然`<link>`不是预期的选择......）

# css - 背景图片边框怎么去掉

> ID：16046410
> 
> 赞同：1
> 
> 时间：2013-04-16T20:25:32.647
> 
> 标签：css

我不想要背景图像周围的边框，但它周围有一条白色细线，我该如何删除它。

我试过`border:0;`但没有用。这是我所拥有的：

```
td.header
{
    background-color: #003;
    background-image: url(header2.jpg);
    margin: 0px;
    padding: 0px;
    left: 0px;
    top: 0px;
    right: 0px;
    bottom: 0px;
    height: 162px;
    width: 1000px;
} 
```

我应该在其中添加什么以使其不显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:27:17.313

添加这个：

```
table {
border-collapse: collapse;
border-spacing: 0;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T20:28:58.343

也许`border: none;`可以代替？

[http://www.w3.org/TR/CSS2/box.html#border-properties](http://www.w3.org/TR/CSS2/box.html#border-properties)

# c# - 如何选择下拉列表值？

> ID：16046416
> 
> 赞同：-2
> 
> 时间：2013-04-16T20:26:04.367
> 
> 标签：c#, asp.net, html, parsing, post

我有两个页面“first.aspx”和“second.aspx”。

在“first.aspx”中

```
<form name="frm" method="post" action="second.aspx">
 <select name="ApiasDDL">
  <option value="36">Option 1</option>
  <option value="63">Option 2</option>
 </select>

 <input name="num" id="num_id" type="text" >
 <input name="ResultBtn" type="submit" class="button"">
</form> 
```

我正在`POST`向“second.aspx”发出请求。我的代码是..

```
//my postvars
byte[]  buffer = Encoding.ASCII.GetBytes("num=123"); //here i want to select 
                                                     //dropdownlist value=36 also

HttpWebRequest WebReq = 
(HttpWebRequest)WebRequest.Create("second.aspx");

WebReq.Method = "POST";
....
.... 
```

如何选择下拉`value=36`列表`my postvars`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:34:30.040

您的 POST 数据需要如下所示：

`"ApiasDDL=36&num=123&ResultBtn=Submit"`

如果您想查看浏览器将发送哪些 POST 数据，最简单的方法是：

1.  打开谷歌浏览器
2.  按 F12 调出开发者工具
3.  单击“网络”选项卡
4.  填写页面上的表格，然后点击“提交”
5.  在开发人员工具的“网络”选项卡上，您可以检查请求详细信息

（您也可以使用 Fiddler 之类的工具或其他一些工具）

# html - 在视图内渲染子视图会创建一个额外的 div

> ID：16046423
> 
> 赞同：0
> 
> 时间：2013-04-16T20:26:26.113
> 
> 标签：html, templates, backbone.js, underscore.js, backbone-views

我有一个主干视图，称为容器

```
ContainerView = Backbone.View.extend({
    template: _.template($('#containerTmpl').html()),
    //this.$el.append(subview.render().el);
} 
```

然后有一个子视图

```
PictureView = Backbone.View.extend({
    template: _.template($('#photoTmpl').html())
} 
```

我的模板如下所示：

```
<script type="text/template" id="containerTmpl">
  <div id="container">
  </div>
</script>

<script type="text/template" id="photoTmpl">
  <div class="photo-container">
    <img src="<?- url ?>" alt="" />
  </div>
</script> 
```

当它实际呈现在页面上时，我看到创建了**一个额外的 Div**，我的结构如下所示：

```
<div id="container">
    <div>     <!--Where is this extra div coming from??? -->      
        <div class="photo-container">
            <img/>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:23:40.323

如果您不想将所有内容保存在 div 元素下，则必须声明每个视图的 tagName。

对不起，我会纠正这个。应该是这样的：

就像是：

```
Picture = Backbone.View.extend({
    template: _.template($('#photoTmpl').html()),
    tagName: 'div',
    className: 'photo-container'
}); 
```

和模板

```
<script type="text/template" id="photoTmpl">
    <img src="<?- url ?>" alt="" />
</script> 
```

希望能帮助到你

# c - Getchar，在 C 中切换

> ID：16046441
> 
> 赞同：0
> 
> 时间：2013-04-16T20:27:43.720
> 
> 标签：c, getchar

我正在尝试将数字添加到“putchar”部分，但由于 getchar 一次抓取一个字符，“hi”的输出变为`1 h 2 i`

```
int linecount = 1;
int numberflag = 1;

while (1){
  int input = getchar(); // use int to make sure var input is big enough to hold EOF plus any other char

  switch (input) {
    case EOF:
      exit(-1);

    default:
      if (numberflag){
        printf("\t%d\t", linecount);
        linecount++;
      }
      putchar(input);
      break;
  }
} 
```

所有帮助将不胜感激。我正在尝试输出：

```
1 hi 
2 hello 
```

并不是

```
hi 1
hello 2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:51:14.510

这似乎有效：

```
#include <stdio.h>

int main(void)
{
    int linecount = 1;
    int numberflag = 1;
    int sol = 1;
    int c;

    while ((c = getchar()) != EOF)
    {
        if (numberflag && sol)
        {
            printf("\t%d\t", linecount++);
            sol = 0;
        }
        if (c == '\n')
            sol = 1;
        putchar(c);
    }
    return 0;
} 
```

在自己的源代码上运行时的输出 ( `./sol < sol.c`)：

```
 1       #include <stdio.h>
        2
        3       int main(void)
        4       {
        5           int linecount = 1;
        6           int numberflag = 1;
        7           int sol = 1;
        8           int c;
        9
        10          while ((c = getchar()) != EOF)
        11          {
        12              if (numberflag && sol)
        13              {
        14                  printf("\t%d\t", linecount++);
        15                  sol = 0;
        16              }
        17              if (c == '\n')
        18                  sol = 1;
        19              putchar(c);
        20          }
        21          return 0;
        22      } 
```

# symfony-2.2 - symfony2 addValidator

> ID：16046442
> 
> 赞同：1
> 
> 时间：2013-04-16T20:27:49.163
> 
> 标签：symfony-2.2

我已经阅读了如何根据另一个字段的值来验证字段的值。但所有这些都在使用函数“isValid()”的 symfony2.1 中。那不是我的情况，因为我使用的是“validate()”函数。

这是我的代码：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{ 
    $builder->add('type'); 
    $builder->addValidator(new CallbackValidator(function(FormInterface $form){            

        $validator = new IntegerValidator();                
        $validator->validate($description->getData(),new Integer());

    }));        
} 
```

但是，当我提交时，我总是收到此错误：

```
Call to a member function addViolation() on a non-object in ..\IntegerValidator.php 
```

这些是我的两个班级的代码。

```
class IntegerValidator extends ConstraintValidator{
    public function validate($value, Constraint $constraint)
    {
        if (!preg_match('/^[0-9]+$/', $value, $matches)) {
            $this->context->addViolation($constraint->message, array('%string%' => $value));
        }
    }
} 
```

这是我的约束类

```
/**
 * @Annotation
 */
class Integer extends Constraint{
    public $message = 'The string "%string%" contains an illegal character: it can only be an integer.';
} 
```

我怎么能实现这个？非常感谢你的帮助。

# grails - Grails Logback 插件 - 如何将标准输出和堆栈跟踪分成 2 个单独的日志文件？

> ID：16046443
> 
> 赞同：0
> 
> 时间：2013-04-16T20:27:51.857
> 
> 标签：grails, logback

使用 Log4j，我们能够配置两个名为“stdout”和“stacktrace”的附加程序，并将日志重定向到两个不同的文件。但是，似乎只有 stdout 可以使用 Logback 插件。有谁知道如何使用 Logback 让 stacktrace 正常工作？

例如（我也在 grails 邮件列表中发布了这个，但还没有收到任何回复）：

```
logback = { 
   appenders { 
      rollingFile name: 'stdout', file: '/tmp/rolling.log', 
                  encoder: pattern(pattern: '%-4relative [%thread] %-5level %logger{35} - %msg%n'), 
                  triggeringPolicy: new  SizeBasedTriggeringPolicy(maxFileSize: 10*1024*1024), 
                  rollingPolicy: new FixedWindowRollingPolicy(fileNamePattern: '/tmp/rolling.%i.log.gz') 

      rollingFile name: 'stacktrace', file: '/tmp/rollingstacktrace.log', 
                  encoder: pattern(pattern: '%-4relative [%thread] %-5level %logger{35} - %msg%n'), 
                  triggeringPolicy: new SizeBasedTriggeringPolicy(maxFileSize: 10*1024*1024), 
                  rollingPolicy: new FixedWindowRollingPolicy(fileNamePattern: '/tmp/rollingstacktrace.%i.log.gz') 
   } 

   //other logging code goes here................... 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:05:51.933

这对我有用。您是否缺少进口商品？

```
import ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy
import ch.qos.logback.core.rolling.FixedWindowRollingPolicy 
```

# d3.js - d3 鱼眼未定义

> ID：16046446
> 
> 赞同：0
> 
> 时间：2013-04-16T20:28:08.033
> 
> 标签：d3.js

我正在尝试使用 d3 鱼眼插件。

但是，我收到此错误：d3.fisheye 未定义

这很奇怪。

```
//initialize fisheye
    var fisheye = d3.fisheye.circular()
        .radius(200)
        .distortion(2);

    this.chart.on("mousemove", function() {
      fisheye.focus(d3.mouse(this));
    }); 
```

我认为这可能是因为我使用的是 d3.v2，但我将其更新为 d3.v3，但我仍然遇到同样的问题。它甚至在那个文件中。我确实看到一个 fisheye.js 漂浮在： [https](https://github.com/d3/d3-plugins/tree/master/fisheye) ://github.com/d3/d3-plugins/tree/master/fisheye 我也有点困惑，因为 API 文档中绝对没有提到鱼眼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:44:00.703

Fisheye 是一个插件，您还需要包含文件`fisheye.js`和 d3 库。

# android - 以编程方式分配进度条样式 Android

> ID：16046448
> 
> 赞同：1
> 
> 时间：2013-04-16T20:28:09.933
> 
> 标签：android, xamarin.android, xamarin

我正在以编程方式生成滚动条，并且我已经定义了一种更改颜色的样式，所以我的问题自然是：如何设置滚动条的滚动条样式？

```
ProgressBar progressBar = new ProgressBar(this, null, Android.Resource.Attribute.ProgressBarStyleHorizontal);
// I tried ProgressBar progressBar = new ProgressBar(this, null, Android.Resource.Drawable.myprogressbar); but it doesn't work
    progressBar.Progress = 25;
    linearLayout.AddView(progressBar); 
```

我的风格之路是`android:attr/progressBarStyleHorizontal`这样的，我怎么能做到这一点？

XML 代码（必须以编程方式生成）是：

```
<ProgressBar
        style="?android:attr/progressBarStyleHorizontal"
        android:progressDrawable="@drawable/myprogressbar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/progressBar1"
        android:progress="50"
        android:startColor="#ffffff"
        android:endColor="#ff1997e1" /> 
```

**编辑：**

我放：

```
ProgressBar progressBar = new ProgressBar(this, null, Resource.Drawable.myprogressbar); 
```

但现在应用程序上没有显示栏:-(

**编辑：**

我也测试了该代码，但什么也没有出现：

```
var progressBar = new ProgressBar(this, null, Resource.Drawable.myprogressbar)
                {
                    Progress = 25,
                    LayoutParameters = new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FillParent, ViewGroup.LayoutParams.WrapContent),
                };                
                linearLayout.AddView(progressBar); 
```

当我尝试使用以下方法在创建进度条后设置progressdrawable时：

```
progressBar.ProgressDrawable = Resource.Drawable.myprogressbar; 
```

我有：

> 无法将类型“int”隐式转换为“Android.Graphics.Drawables.Drawable”。存在显式转换（您是否缺少演员表？）

**最终编辑：**

这是我的最后一个代码：

```
// progressbar with custom style (Resources/Drawable/myprogress.xml)
                    ProgressBar progressBar = new ProgressBar(this, null, Android.Resource.Attribute.ProgressBarStyleHorizontal)
                    {LayoutParameters = new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FillParent, ViewGroup.LayoutParams.WrapContent)};
                    progressBar.ProgressDrawable = Resources.GetDrawable(Resource.Drawable.myprogressbar);
                    // Compute for the percent of this usage (to assign it to the progressbar)
             progressBar.Progress = 33;
                    linearLayout.AddView(progressBar); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:34:54.243

您`ProgressBar`的未显示，因为您忘记设置`LayoutParameters`. 以下代码适用于我。我尝试了各种`ProgressBar`风格。

```
var myLinearLayout = FindViewById<LinearLayout>(Resource.Id.myLinearLayout);

var progressBar = new ProgressBar(this, null, Android.Resource.Attribute.ProgressBarStyleLarge)
    {
        Progress = 25,
        LayoutParameters =
            new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FillParent, ViewGroup.LayoutParams.WrapContent)
    };

myLinearLayout.AddView(progressBar); 
```

**编辑：** 要将你自己的传递`Drawable`给你，`progressBar.ProgressDrawable`你需要先加载它，就像你得到的错误所示。

```
progressBar.ProgressDrawable = Resources.GetDrawable(Resource.Drawable.myprogressbar); 
```

# c# - 在项目创建期间，不能在“主页 URL”字段中将 localhot 作为域名

> ID：16046449
> 
> 赞同：1
> 
> 时间：2013-04-16T20:28:14.090
> 
> 标签：c#, asp.net, api, yahoo-api, import-contacts

我想检索雅虎联系人，因此为此我尝试创建用于在`Yahoo Contact API`页面中获取应用程序密钥的项目。但面临以下问题。

> 在为“Yahoo Contact API”创建项目期间，无法在“主页 URL”字段中将 localhost 作为域名（这不是错误消息，此字段需要有效的域名而不是 localhost）

我已经搜索了所有内容，但可以找到任何解决方案。

以下是项目创建网址。您需要登录才能查看此页面

[https://developer.apps.yahoo.com/dashboard/createKey.html](https://developer.apps.yahoo.com/dashboard/createKey.html)

[http://developer.yahoo.com/social/contacts/](http://developer.yahoo.com/social/contacts/)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:43:19.400

听起来我在注册 Twitter 应用程序密钥时遇到了类似的错误。您可以尝试输入一个正确的域名，任何都可以，然后在 Windows 中修改您的主机文件以将该域名映射到 127.0.0.1。

# java - RequestBuilder.sendRequest 没有从 GWT 教程中获取我的 JSON

> ID：16046453
> 
> 赞同：0
> 
> 时间：2013-04-16T20:28:24.040
> 
> 标签：java, gwt

我正在做关于检索 JSON 数据的 GWT 教程（[https://developers.google.com/web-toolkit/doc/latest/tutorial/JSON](https://developers.google.com/web-toolkit/doc/latest/tutorial/JSON)）。我的代码没有按应有的方式更新，在调试时我发现我的代码从未进入 onResponseReceived 回调方法。

这是我在这部分使用的代码，大部分是从教程中复制的。

```
// Send request to server and catch any errors.
    RequestBuilder builder = new RequestBuilder(RequestBuilder.GET, url);

    try {
        Request request = builder.sendRequest(null, new RequestCallback() {
            public void onError(Request request, Throwable exception) {
                displayError("Couldn't retrieve JSON");
            }

            public void onResponseReceived(Request request, Response response) {
                if (200 == response.getStatusCode()) {
                    updateTable(asArrayOfStockData(response.getText()));
                } else {
                    displayError("Couldn't retrieve JSON (" + response.getStatusText()
                            + ")");
                }
            }
        });
        System.out.println(request.toString());
    } catch (RequestException e) {
        displayError("Couldn't retrieve JSON");
    }
    catch (Exception e) {
        System.out.println(e.getMessage());
    } 
```

我添加了 catch(Exception e) 以查看是否有其他异常破坏了我的代码，但事实并非如此。我还做了 request.toString() 以确保请求对象实际上是被创建的，当我这样做时，我得到一个带有 MemID 或任何 HEX 数字的字符串。

我一直在尝试找出问题所在，但无法弄清楚，因此非常欢迎任何提示或想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:53:26.960

由于您没有解释您遇到的确切问题，因此很难告诉您确切的答案。所以首先用[萤火虫](http://getfirebug.com/network)（萤火虫和网络监控）检查它。下一个建议是，您使用的是 GET 方法，因此只需将带有一些值的 URL 输入到名为`q`地址栏的参数中，然后按 Enter，放置断点或查看本地服务器上的日志。并且还要确保你的 web.xml 中的 servlet-mapping 是正确的。

# sql - SQL查询将日期时间更改为时间

> ID：16046455
> 
> 赞同：-5
> 
> 时间：2013-04-16T20:28:28.770
> 
> 标签：sql

我只需要获取 datetime 变量的时间部分，而无需将其设为文本文件，因此没有 varchar

有没有办法在没有 varchar 转换的情况下从“1/2/2013 9:11:02”中只获得 9:11:02？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:31:09.733

为mysql尝试这种格式

```
SELECT DATE_FORMAT(tstamp,'%r') AS stamp from table name 
```

例如

```
mysql> select * from test;
+---------------------+
| stamp               |
+---------------------+
| 2013-10-10 09:10:11 |
+---------------------+
1 row in set (0.00 sec)

mysql> SELECT DATE_FORMAT(stamp,'%r') AS stamp from test;
+-------------+
| stamp       |
+-------------+
| 09:10:11 AM |
+-------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:32:36.090

像这样的东西

```
SELECT
CONVERT(VARCHAR(8),GETDATE(),108) AS Time, 
```

或者

```
SELECT
CONVERT(TIME,GETDATE()) AS TIME 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T20:34:13.337

如果您使用的是 MSSQL，它仍然是转换为 varchar，但它是数据表示......

```
SELECT CONVERT(varchar, GETDATE(), 8) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T20:35:47.927

```
select CAST('1/2/2013 9:11:02' as TIME) 
```

这将为您提供尾随“.00 ...”的时间

# ruby-on-rails - sphinx search 安装在 root 下，我如何更改所有者？

> ID：16046457
> 
> 赞同：0
> 
> 时间：2013-04-16T20:28:46.850
> 
> 标签：ruby-on-rails, sphinx, thinking-sphinx

我按照本教程进行操作：

> [http://www.andrehonsberg.com/article/install-sphinxsearch-205-in-ubuntu-1204-server](http://www.andrehonsberg.com/article/install-sphinxsearch-205-in-ubuntu-1204-server)

并在 ec2 上的 ubuntu 12 上安装了 sphinx，问题是我的 rails 应用程序在名为“ubuntu”的用户下运行，并且在我的

> 搜索日志

文件我看到警告说它无法访问 *.spl 文件。

```
FATAL: failed to open     /home/ubuntu/sites/app/shared/db/sphinx/production/group.tmp.spl: Permission denied,   will not index. Try --rotate option. 
```

我该如何更改它，以便所有 sphinx 都将在 ubuntu 用户而不是 root 下运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T04:35:09.063

使用 root 安装 Sphinx 很好，但您需要确保以`ubuntu`用户身份运行所有 Thinking Sphinx rake 任务。

我建议停止您的 Sphinx 守护程序（如果它正在运行），然后删除索引文件，然后`ts:rebuild`通过用户运行 rake 任务`ubuntu`以确保新的索引文件和守护程序设置了正确的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T22:20:03.747

我认为问题可能出现在开头（在教程中）`sudo su`，您以 root 身份登录；您应该仅使用 sudo 安装在 EC2 中。

一年半前，我在 EC2 中安装了 Sphinx，但我从未使用过`sudo su`. 我建议您卸载 Sphinx 并重新安装：

1.  获取焦油
2.  配置源代码：`./configure –prefix=/usr/local`
3.  跑：`make`
4.  跑：`sudo make install`

此外，您应该尝试使用 Solr 的 Sunspot（我从 Sphinx 迁移到 Solr，出于多种原因，我认为它更好，有很多基准测试）。希望能帮助到你。

# vb.net - 我怎样才能用最少的代码实现这一点？

> ID：16046464
> 
> 赞同：1
> 
> 时间：2013-04-16T20:29:03.180
> 
> 标签：vb.net, parsing

我目前有一个包含 10 个字符的变量，可以是 1 也可以是 0，每个字符都代表一个权限密钥。

现在，由于我的程序中也嵌入了 UAC 面板，我希望能够通过基于该键启用/禁用功能来控制谁可以做什么。

键的一个例子是：`1011001101`.

我用来更改人们的键的控件是一个包含 10 个复选框的列表。

例如`1000000000`，只会控制 UAC，所有其他功能都可以通过选中 UAC 中相应的复选框并更新密钥来启用。

当我选择不同的用户时，我应该如何处理基于权限键自动填充复选框的问题？

注意：这是 UAC 面板现在外观的屏幕截图，只是为了让您了解我的表单是如何设置的。

![UAC面板](https://i.stack.imgur.com/X1QLM.png)

**编辑：**只是想我应该给你们一个清楚的例子来说明我正在尝试做什么，所以我编写了这段庞大的代码，我知道它会起作用，但实际使用它会对性能造成太大影响在我的程序中是这样的：

```
If Mid(pkeys, 1, 1) = "1" Then
            chkUAC.Checked = True
        End If
        If Mid(pkeys, 2, 1) = "1" Then
            chkPInv.Checked = True
        End If
        If Mid(pkeys, 3, 1) = "1" Then
            chkVInv.Checked = True
        End If
        If Mid(pkeys, 4, 1) = "1" Then
            chkCheck.Checked = True
        End If
        If Mid(pkeys, 5, 1) = "1" Then
            chkPMap.Checked = True
        End If
        If Mid(pkeys, 6, 1) = "1" Then
            chkVMap.Checked = True
        End If
        If Mid(pkeys, 7, 1) = "1" Then
            chkTele.Checked = True
        End If
        If Mid(pkeys, 8, 1) = "1" Then
            chkHeal.Checked = True
        End If
        If Mid(pkeys, 9, 1) = "1" Then
            chkDart.Checked = True
        End If
        If Mid(pkeys, 10, 1) = "1" Then
            chkWhiteList.Checked = True
        End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:48:01.223

这听起来很像按位比较，但使用的是字符串而不是整数。如果仍然可能，我建议切换到整数，以便您可以使用二元运算符进行检查。

取而代之的是整数 717，而不是“1011001101”。如果您想对照“1000000000”（整数 512）检查它，您可以简单地进行如下检查：

```
' iPerm = 717, iUACMask = 512
chkUAC.Checked = CBool(iPerm And iUACMask) 
```

如果 iPerm 包含 iUACMask，则表达式将计算为非零值，结果为 True。如果不匹配，则返回 0。

如果不再可能更改为整数，则可以对其进行即时转换。显然，性能会比使用整数开始时更差，但取决于使用情况，这可能不是问题。

```
' strPerm = "1011001101", strUACMask = "1000000000"
chkUAC.Checked = CBool(Convert.ToInt32(strPerm, 2) And Convert.ToInt32(strUACMask, 2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:41:29.620

我会`List(Of CheckBox)`按照您在权限密钥中拥有位的顺序创建一个对每个权限复选框的引用。

然后，当您的`OnSelectedIndexChanged`事件被触发时，您获取所选用户的权限密钥并将其转换为 char 数组。

然后在迭代索引值的同时遍历该 char 数组，以便您可以将`cbList[index].checked`等于设置为当前 char 的布尔值。

* * *

它会是这样的：

您将声明列表：

```
Dim cbList = New List(Of CheckBox) 
```

你会在某个地方初始化它：

```
With cbList

    .Add(chkUAC)
    .Add(chkPInv)
    .Add(chkVInv)
    .Add(chkCheck)
    .Add(chkPMap)
    .Add(chkVMap)
    .Add(chkTele)
    .Add(chkHeal)
    .Add(chkDart)
    .Add(chkWhiteList)

End With 
```

然后您将循环并分配索引更改：

```
Protected Sub ddlUser_SelectedIndexChanged(sender As Object, e As EventArgs) Handles ddlUser.SelectedIndexChanged

    Dim i = 0

    For Each c In ddlUser.SelectedValue.ToCharArray

        cbList(i).Checked = c = "1"
        i += 1

    Next

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T23:11:21.517

只需更改此代码

```
For x = 0 To 9
  If pkeys(x) = "1" Then
    cbList(x).Checked = True
  Else
    cbList(x).Checked = False
  End If
Next 
```

到这个代码

```
For x = 0 To 9
  cbList(x).Checked = (pkeys(x) = "1")
Next 
```

# python - 具有数据验证或“删除重复”类型功能的 ArcPY 插入光标

> ID：16046466
> 
> 赞同：1
> 
> 时间：2013-04-16T20:29:07.693
> 
> 标签：python, arcpy

我正在寻找使用 ArcPy 构建脚本/GP 工具，该工具允许用户提交要加载到现有要素类中的表（本质上是追加/插入类型的操作。但是，我希望对表进行“审查” ' 首先针对重复项：在这种情况下，重复项由多个字段的串联定义以创建唯一 ID。

在这里进行初步搜索时，这非常接近： [Removing duplicates before inserting into database](https://stackoverflow.com/questions/9231575/removing-duplicates-before-inserting-into-database)

目标可能是一个 SQL 表，但建议的解决方案都指的是 SQL 中的查询。我的解决方案需要基于 Web 并且我最熟悉 Python。有没有办法通过 ArcPy/Python 公开上述链接中建议的底层数据库查询/约束/索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:02:07.740

这个问题有点模糊。您需要确保将表格数据添加到要素类是有意义的，但有多种方法可以解决此问题。我假设您使用的是 10.x ArcGIS（即 arcpy，而不是 gp）。

您可以使用

```
arcpy.Frequency_analysis(in_table, out_table, frequency_fields;frequency_fields..., {summary_fields;summary_fields...}) 
```

然后查看是否有任何频率超过 1 的记录，可能使用类似：

```
arcpy.MakeTableView_management(out_table, 'out_tableTV', '"FREQUENCY" > 1')
numEvents=int(arcpy.GetCount_management('out_tableTV'))
if numEvents > 0:
    print 'duplicates' 
```

或者，您可以将值提取到 python 列表对象，从中创建一个集合（消除重复项），然后比较列表和集合对象。

```
>>> x=[1,2,1]
>>> type(x)
<type 'list'>
>>> y=set(x)
>>> type(y)
<type 'set'>
>>> y
set([1, 2])
>>> if x!=y:
...     print 'duplicates exist'
...     
duplicates exist 
```

# php - 交互式单页应用程序

> ID：16046471
> 
> 赞同：3
> 
> 时间：2013-04-16T20:29:30.133
> 
> 标签：php, ajax, node.js

我正计划开发我的第一个 SPA 作为实验。我有一个可以在单个页面中工作的交互式论坛平台的想法。包括通知和所有这些花哨的功能。

多年来，我在服务器端使用 PHP 和 AJAX 开发了许多 Web 应用程序。问题是，这如何应用于我的情况（或类似情况）？用户必须登录，并且他应该会收到考虑到内容的更新（新回复、新主题和列表经过）。我考虑了标准，即请求-响应，正如我所看到的，这里不是这种情况。

用户和服务器之间的连接必须是持久的。如果我要制作一个长轮询 ajax 应用程序，那么我为什么要考虑单页应用程序？服务器必须保留已连接用户的列表并向他们推送更新（如 node.js、socket.io 等）。这些技术在 Web 开发领域似乎是新的。

我的问题是什么标准？Twitter 是如何做到的，Facebook 是如何做到的，Gmail 是如何做到的等等……我考虑了诸如 Knockout.js、Sammy.js、Backbone、Underscore 之类的技术。这些很棒，我可以处理它们。服务器呢？那么著名的“实时”网络呢？

上述示例的任何策略建议都是有用的并被接受。

提前感谢您甚至费心阅读本文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:57:55.987

如果您要询问同时存储状态的实时应用程序的标准是什么，那么没有标准。有很多方法可以“给猫剥皮”。

无论您使用 AJAX 长轮询还是 websockets，Socket.io 在准系统端都会抽象出来。（不支持 websockets 的浏览器会自动切换到 AJAX 长轮询）

“请求/响应”模型不是通过 http，而是通过使用事件和侦听器的 pub/sub 模型的 websockets。例如，服务器端的监听器会在其 twitter api 连接中检测到一条新推文，并通过 websockets 为客户端套接字监听器广播一个事件，然后客户端套接字监听器将使用接收到的新信息实时更新 DOM websockets.......这种与事件和侦听器的套接字通信是双向的。我会粘贴一些代码，但我不在我的机器上，上面有我的套接字代码，只需在谷歌上搜索任何使用 express 的 socket.io 都会告诉你绳索。

编辑：“标准方式”是服务器端的 Socket.io/Express，客户端的 Backbone/Socket.io。

Fog Creek 对 Trello 实时堆栈的出色架构描述：http: [//blog.fogcreek.com/the-trello-tech-stack/](http://blog.fogcreek.com/the-trello-tech-stack/)

# c# - 防止重复号码并要求用户重新输入

> ID：16046472
> 
> 赞同：0
> 
> 时间：2013-04-16T20:29:33.293
> 
> 标签：c#, arrays

我的一切运行良好，但我正在寻找一种方法来提示用户是否输入了重复的订单号并让他们重新输入新的订单号。现在它只接受重复项并且不显示我想要的错误消息。我创建了两个类`Order`作为基础，和`ShippedOrder`. 这是我在`Order`课堂上使用的 equals 方法。

```
 public override bool Equals(Object e)
    {
        bool equal;
        Order temp = (Order)e;
        if (orderNumber == temp.orderNumber)
            equal = true;
        else
            equal = false;
        return equal; 
```

这是我在主要方法中的内容。如果有帮助，我可以发布所有内容。我再次寻求帮助以找到一种方法来防止用户输入相同的两个订单号。

```
static void Main(string[] args)
    {

        double sum = 0;
        ShippedOrder[] orderArray = new ShippedOrder[5];
        ShippedOrder[] check = new ShippedOrder[5];
        bool wrong = true;
        for (int x = 0; x < orderArray.Length; ++x)
        {

            orderArray[x] = new ShippedOrder();

            Console.Write("Enter order number: ");
            orderArray[x].orderNumber = Convert.ToInt32(Console.ReadLine());

            for (int y = 0; y < x; ++y)
            {
                check[y] = new ShippedOrder();
                if (orderArray[x].Equals(check[y]))
                    wrong = false;
                    while (!wrong)
                    {
  Console.WriteLine("Sorry, the order number {0} is a duplicate. \nPlease reenter {1}", 
  orderArray[x], check[y]);
                        for (y = 0; y < x; ++y)
                        {
                        if (orderArray[x].Equals(check[y]))
                            wrong = false;
                        }
                        check[y] = orderArray[x];
                    }
            }

            Console.Write("Enter cusomer name: ");
            orderArray[x].customerName = Console.ReadLine();

            Console.Write("Enter quanity: ");
            orderArray[x].quanityOrdered = Convert.ToInt32(Console.ReadLine()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:35:23.890

我会用 LINQ 来做这件事，这就是它真正发光的地方（如果这个代码不是每秒调用千次）

```
var arrayExpectedCount = 5;
var orderArray = new List<ShippedOrder>(); //define array of orders to generate
var check = new List<ShippedOrder>();      //array of orders already shipped,already present
...... 
//infinit interation
while(true) {
   var orderNumber = Convert.ToInt32(Console.ReadLine());
   if(!check.Exist(o=>o.orderNumber == orderNumber)
   {
      //create a new order and push it to the orderArray 
   }

   //break condition of the infinit loop
   if(orderArray.Count == arrayExpectedCount)
       break;

} 
```

如果这不是您要的，请澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:41:12.063

```
List<ShippedOrder> orderArray = new List<ShippedOrder>();
do {
    int newOrderNum = 0;
    // Retrieve first attempt
    Console.Write("Enter order number: ");
    newOrderNUm = Conver.ToInt32(ConsoleReadLine());
    // Check if any of the orders in orderArray have the same order number
    while(orderArray.Any(a=>a.orderNumber == newOrderNum) {
        Console.Write("Sorry, the order number is a duplicate. Please enter re-enter the order number: ");
        newOrderNum = Conver.ToInt32(ConsoleReadLine());
    };
    orderArray.Add(new ShippedOrder() {
        orderNumber = newOrderNum,
    };
} while(orderArray.Length < 5); 
```

# android - 测试运行失败：仪器运行因“java.lang.ClassNotFoundException”而失败

> ID：16046474
> 
> 赞同：25
> 
> 时间：2013-04-16T20:29:44.723
> 
> 标签：android, eclipse, android-testing

这是我第一次设置一个Android测试项目来测试一个Android项目。

我创建了一个非常基本的测试用例，我试图运行它，但是我没有运行。我得到一个`Test run failed: Instrumentation run failed due to 'java.lang.ClassNotFoundException'`.

我会更多地解决这个问题，但是我没有得到更多信息，例如它试图找到哪个类等。关于如何从错误中获取更多信息的任何想法？我应该查看的任何公共区域，或者我忽略的任何可能需要配置的区域？

以下是来自控制台的信息：

```
[2013-04-16 13:21:49 - XyzProgramTest] Android Launch!
[2013-04-16 13:21:49 - XyzProgramTest] adb is running normally.
[2013-04-16 13:21:49 - XyzProgramTest] Performing android.test.InstrumentationTestRunner JUnit launch
[2013-04-16 13:21:49 - XyzProgramTest] Automatic Target Mode: launching new emulator with compatible AVD 'GalaxyNexusAPI_17'
[2013-04-16 13:21:49 - XyzProgramTest] Launching a new emulator with Virtual Device 'GalaxyNexusAPI_17'
[2013-04-16 13:21:53 - Emulator] extension WGL_ARB_make_current_read was not found
[2013-04-16 13:21:53 - Emulator] extension WGL_EXT_swap_control was not found
[2013-04-16 13:21:53 - Emulator] Failed to create pbuf surface for FB 0x3004
[2013-04-16 13:21:53 - Emulator] emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
[2013-04-16 13:21:54 - XyzProgramTest] New emulator found: emulator-5554
[2013-04-16 13:21:54 - XyzProgramTest] Waiting for HOME ('android.process.acore') to be launched...
[2013-04-16 13:22:55 - XyzProgramTest] HOME is up on device 'emulator-5554'
[2013-04-16 13:22:55 - XyzProgramTest] Uploading XyzProgramTest.apk onto device 'emulator-5554'
[2013-04-16 13:22:55 - XyzProgramTest] Installing XyzProgramTest.apk...
[2013-04-16 13:23:57 - XyzProgramTest] Success!
[2013-04-16 13:23:57 - XyzProgramTest] Project dependency found, installing: XyzProgram
[2013-04-16 13:23:57 - XyzProgram] Uploading XyzProgram.apk onto device 'emulator-5554'
[2013-04-16 13:23:58 - XyzProgram] Installing XyzProgram.apk...
[2013-04-16 13:24:05 - XyzProgram] Success!
[2013-04-16 13:24:05 - XyzProgramTest] Launching instrumentation android.test.InstrumentationTestRunner on emulator-5554
[2013-04-16 13:24:07 - XyzProgramTest] Test run failed: Instrumentation run failed due to 'java.lang.ClassNotFoundException' 
```

## 补充说明

在我的 Android 测试项目中，我创建了一个简单的测试，其中包含一个与我尝试在我的 Android 项目中测试的类匹配的包。所以像`com.company.android.projectname`. 我已经在 Android 测试项目`manifest`文件的`instrumentation`部分中指定了这一点。

```
<instrumentation
    android:name="android.test.InstrumentationTestRunner"
    android:targetPackage="com.company.android.projectname" /> 
```

当我更改它以匹配它时，我收到一个新错误，上面写着`Test run failed: Unable to find instrumentation target package: com.company.android.projectname`

我不是 100% 确定`targetPackage`应该是什么，以及我是否需要为每个要测试的包使用多个仪器等。当我将它设置为时`com.company.android`，我得到`java.lang.ClassNotFoundException`.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2018-10-28T09:10:38.310

我已经升级到 androidx 库并开始收到此错误。

为了解决这个问题，在 build.gradle 我改变了这一行：

```
testInstrumentationRunner 'android.support.test.runner.AndroidJUnitRunner' 
```

至

```
testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-30T04:34:01.780

仅供参考，我遇到了这个，不得不添加

`<uses-library android:name="android.test.runner"/>`

在我的`<application/>`标签内

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-05-13T11:51:52.570

就我而言，我试图在 Jelly Bean 模拟器上运行测试。Android 仪器似乎不支持 Jelly Bean。我可以在棒棒糖上运行测试。

您也可能无法通过发布构建类型运行 android 测试。确保调试构建类型处于活动状态。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-16T23:06:53.690

找出我的问题并发布答案以用于文档目的......

我的问题的根源是两件事：

1.  我做了一些重构，改变了我的 `android.app.Application`班级和活动的位置。这使得我的主程序无法运行，因为我需要更新我的清单 `android project`。
2.  在我的 android 项目中对清单进行更新后，我必须在我的中进行一些更新`android test project`以指向扩展类的更新位置`android.app.Application`。

之后，做了一些清洁并再次测试，一切都很好。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-03-11T17:21:20.890

我得到了同样的错误，因为我忘了添加`androidx.test:runner`测试依赖项。

```
androidTestImplementation "androidx.test:runner:1.2.0" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-31T09:27:18.833

我今天遇到了这个问题，我采用了位于“${sdk.dir}/tools/ant/”目录中的android-specific ant **build.xml** ，在命令行中执行所有测试用例，但是STDOUT报告错误对我和你一样：

```
vinceMacBook ~/dev/aSQLite+-android/tests$ ant clean uninstall debug install test
...
test:
     [echo] Running tests ...
     [exec] INSTRUMENTATION_RESULT: shortMsg=java.lang.ClassNotFoundException
     [exec] INSTRUMENTATION_RESULT: longMsg=java.lang.ClassNotFoundException:
        android.test.InstrumentationTestRunner
     [exec] INSTRUMENTATION_CODE: 0 
```

我花了一些时间来解决这个问题，我在根模块中找到了主要原因`AndroidManifest.xml`，我认为**应用程序**元素不需要配置，所以我在**清单**元素中省略了它，这导致了我的问题。

我不确定您是否与我共享相同的结构，所以我在这里发布我的项目结构，以及密钥文件的内容，希望可以帮助某人。

```
vinceMacBook ~/dev/aSQLite+-android$ tree
.
├── AndroidManifest.xml
│       <?xml version="1.0" encoding="utf-8"?>
│       <manifest
│           xmlns:android="http://schemas.android.com/apk/res/android"
│           package="com.vincestyling.asqliteplus"
│           android:versionCode="1"
│           android:versionName="0.1">
│
│           <uses-sdk android:minSdkVersion="8" />
│           
│           <!-- important configuration, cannot be omit even if nothing to say. -->
│           <application />
│
│       </manifest>
│
├── build.xml
│       unchanged, generated by "android create project <project_name>" command.
│
├── project.properties
│       unchanged, generated by "android create project <project_name>" command.
│
├── src
│   └── com
│       └── vincestyling
│           └── asqliteplus
│               ├── DBOperator.java
│               ├── DBOverseer.java
│               └── the library source code lie here...
│
└── tests
    ├── AndroidManifest.xml
    │       <?xml version="1.0" encoding="utf-8"?>
    │       <manifest
    │           xmlns:android="http://schemas.android.com/apk/res/android"
    │           package="com.vincestyling.asqliteplus.tests">
    │
    │           <application>
    │               <uses-library android:name="android.test.runner"/>
    │           </application>
    │
    │           <instrumentation
    │               android:name="android.test.InstrumentationTestRunner"
    │               android:targetPackage="com.vincestyling.asqliteplus"/>
    │
    │       </manifest>
    │
    ├── ant.properties
    │       # [Comments], [Comments], [Comments] which generated by command.
    │       # [Comments], [Comments], [Comments] which generated by command.
    │       # [Comments], [Comments], [Comments] which generated by command.
    │
    │       # important configuration, point to the root library module.
    │       tested.project.dir=../
    │
    ├── build.xml
    │       unchanged, generated by "android create test-project <project_name>" command.
    │
    └── src
        └── com
            └── vincestyling
                └── asqliteplus
                    ├── BaseDBTest.java
                    ├── QueryStatementTest.java
                    └── the test source code lie here... 
```

我的项目结构遵循谷歌建议我们做的[Android Test Projects](http://developer.android.com/tools/testing/testing_android.html#TestProjects)的描述，由承载核心逻辑的根库模块和根模块内部的测试模块组成。以上是项目中的关键资源，但不全是文件，等我放出项目链接就放在这里。

------------ 2014-01-06 更新 --------------

目前，我的项目已经发布在我的 github 上：[aSQLitePlus-android](https://github.com/vince-styling/aSQLitePlus-android)，有兴趣的可以查看详情。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-29T15:25:18.507

合并后我遇到了这个问题，其中 build.gradle 指定了错误的测试包，因为我一直在使用默认值。

通过简单地从 build.gradle 中删除这些行，它能够在默认包中找到必要的类，即`src/androidTest`.

```
sourceSets {
    instrumentTest.setRoot('src/instrumentTest')
}
//removed this to use the default androidTest source set. 
```

这可能不是确切的解决方案，但希望能引导某人朝着正确的方向前进。

# django - Django 模型：可空字段

> ID：16046478
> 
> 赞同：51
> 
> 时间：2013-04-16T20:30:07.660
> 
> 标签：django, postgresql, model, null

我正在做一个 django 项目，我需要一个 DateField 有时为空。我的模型如下所示：

```
#models.py
end = models.DateField(default=None, blank=True) 
```

但是当我运行`python manage.py sql myapp`sql 语句时，总是以

```
CREATE TABLE "myapp_date" (
"end" date NOT NULL
); 
```

因此，我的字段不可为空，我不明白我应该怎么做才能做到这一点。任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-04-16T20:31:14.657

你应该使用

```
end = models.DateField(default=None, blank=True, null=True) 
```

基本上`blank`允许您向它传递一个空值，但`null`告诉数据库接受空值。

# json - 让 jQuery.ajax 与我的 jsonp 网络服务配合得很好

> ID：16046483
> 
> 赞同：0
> 
> 时间：2013-04-16T20:30:22.560
> 
> 标签：json, jquery, jsonp, jax-ws

我很难`$.ajax`使用我的网络服务。

我有一个我用 Java 编写的网络服务（我对 Java 很烂），它需要像这样的 url`example.com/webservice/somestuff/callback`

并返回 JSONP`callback({"success":true})`

我的 jquery 类似于：

```
$.ajax({
    type: "GET", dataType: "jsonp",
    url: '//example.com/someStuff', 
}).done(doSomething) 
```

问题是，jQuery 所做的所有让 JSONP 工作的好东西都把我搞砸了。它附加了一个查询字符串（即`?callback=jQuery19786...`），我的服务只需要一个常规路径参数。

如果我能以某种方式说服 jQuery 去做`example.com/webservice/somestuff/jQuery19786...`那将是理想的。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:35:25.420

只需放置`??`您希望放置回调的位置。

```
$.ajax({
    type: "GET", dataType: "jsonp",
    url: '//example.com/someStuff/??', 
}).done(doSomething) 
```

另一种方法是在 jQuery 修改它之后使用 beforeSend 选项来操作 url：

```
$.ajax({
    url: "//example.com/foo/bar/?callback=?",
    dataType: "jsonp",
    cache: true,
    beforeSend: function(jqXHR,options){        
        options.url = options.url.replace(/\?callback\=/,"");
        //console.log(options.url);
        //return false;
    }
}); 
```

# math - 确定 (n-1)+(n-1) 的大哦

> ID：16046484
> 
> 赞同：2
> 
> 时间：2013-04-16T20:30:35.037
> 
> 标签：math, big-o

我一直试图弄清楚这种特殊的复杂性计算，但我读到的关于这种复杂性的所有内容都告诉我它是大 O(2^n) 类型，但是如果我在代码中添加一个计数器并检查有多少它按给定的 n 迭代的次数似乎遵循 4^n 的曲线。也许我只是误解了，因为我放了一个计数++；范围内。

这不是大 O(2^n) 类型的吗？

```
 public int test(int n) 
   {    
   if (n == 0)
   return 0;
   else
   return test(n-1) + test(n-1);
    } 
```

我将不胜感激任何提示或解释！我对这种复杂性计算完全陌生，这个让我偏离了轨道。

//问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:35:41.777

```
int test(int n)
{
    printf("%d\n", n);

    if (n == 0) {
        return 0;
    }
    else {
        return test(n - 1) + test(n - 1);
    }
} 
```

在函数的顶部有一个打印输出，运行`test(8)`并计算每个打印的次数`n`会产生这个输出，它清楚地显示了 2 ^(*n*)的增长。

```
$ ./test | sort | uniq -c
    256 0
    128 1
     64 2
     32 3
     16 4
      8 5
      4 6
      2 7
      1 8 
```

（`uniq -c`计算每行出现的次数。`0`打印 256 次、`1`128 次等）

也许你的意思是你得到的结果是 O(2 ^(*n* +1) )，而不是 O(4 ^(*n*) )？如果你把所有这些数字加起来，你会得到 511，对于*n* =8，它是 2 ^(*n* +1) -1。

如果这就是你的意思，那很好。O(2 ^(*n* +1) ) = O(2⋅2 ^(*n*) ) = O(2 ^(*n*) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:43:45.117

这个函数的复杂度`T(n)`可以很容易地证明等于`c + 2*T(n-1)`。由给出的复发

```
T(0) = 0
T(n) = c + 2*T(n-1) 
```

有它的解决方案 c*(2^n - 1) 或类似的东西。它是 O(2^n)。

现在，如果您将函数的输入大小设为`m = lg n`，这在这种情况下可能是可以接受的（要表示的位数`n`，真实输入大小），那么这实际上是一种`O(m^4)`算法......因为 O(n ^2) = O(m^4)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T20:36:13.783

令 x(n) 为 的总调用次数`test`。

```
x(0) = 1

x(n) = 2 * x(n - 1) = 2 * 2 * x(n-2) = 2 * 2 * ... * 2 
```

总共有 n 个二 - 因此有 2^n 个调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T20:39:59.703

首先：'else' 语句已过时，因为如果 if 计算结果为 true，则 if 已经返回。

关于主题：每次迭代都会分叉 2 次不同的迭代，它们本身会分叉 2 次迭代，等等。因此，对于 n=1，函数被调用 2 次，加上原始调用。对于 n=2，它被称为 4+1 次，然后是 8+1，然后是 16+1 等等。因此复杂度显然是 2^n，因为常数被指数抵消了。

我怀疑您的计数器在两次通话之间没有正确重置。

# javascript - 在 Javascript 中创建数组结构

> ID：16046496
> 
> 赞同：0
> 
> 时间：2013-04-16T20:31:13.277
> 
> 标签：javascript

我有一个名为 jsonAllSignOffs 的变量，它由 .NET JSON 服务创建并发送到客户端。它本质上是一个包含各种数组的结构。这些数组的值是这样排列的，如果你取每个数组的第 n 个元素，所有这些都将是第 n 个 Sign Off 的收集属性。显然，包含这些属性的 Sign Off 对象列表会更好，但不幸的是，这是一个遗留应用程序，以这种方式更改其架构超出了范围。

我要做的是创建一个名为 jsonUserSignOffs 的变量，它本质上是具有所有相同属性的 jsonAllSignOffs 的子集。但是 jsonAllSignOffs 不是我可以实例化的类型。我认为声明一个变量并通过分配给它们来假设属性会“构建”对象，但显然情况并非如此。

```
var jsonUserSignOffs;
jsonUserSignOffs.isAuthor = jsonAllSignOffs.isAuthor; //error jsonUserSignOffs is undefined 
```

由于 javascript 不支持类并且对变量非常宽松，我认为创建像 jsonAllSignOffs 这样的结构的唯一方法是声明变量并将值分配给它的属性。我知道这些属性没有在任何地方定义，但我认为为它们分配值会同时实例化它们。我来自 C# 背景，我会使用一个类。Javascript对我来说不太熟悉，我不清楚如何进行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T21:35:57.020

试试这个

```
var jsonUserSignOffs = {}; //creates an empty object using object literal notation
jsonUserSignOffs.isAuthor = jsonAllSignOffs.isAuthor; 
```

或者：

```
var jsonUserSignOffs = {
    isAuthor: jsonAllSignOffs.isAuthor
}; 
```

# jsf - Richfaces 4 Rich:tabPanel switchType="client" 异常

> ID：16046498
> 
> 赞同：1
> 
> 时间：2013-04-16T20:31:17.297
> 
> 标签：jsf, jsf-2, richfaces

我想使用richfaces 4 rich:tabPanel，我有这个代码：

```
<rich:tabPanel id="tabMenu" switchType="client">
                <rich:tab id="overview" header="Overview">
                </rich:tab>
                <rich:tab id="results" header="Results">
                </rich:tab>
            </rich:tabPanel> 
```

当我尝试使用 tabMenu 访问页面时，出现此异常：

```
java.lang.IllegalArgumentException: Cannot convert client of type class java.lang.String to class org.richfaces.component.SwitchType
    at com.sun.el.lang.ELSupport.coerceToType(ELSupport.java:329) 
```

如果我删除 switchType 属性，代码工作正常

我怀疑这可能是一个依赖问题，这些是我拥有的依赖：

```
richfaces-components-ui 4.1.0 Final
richfaces-core-impl 4.1.0 Final 
```

知道为什么我会得到这个异常

# sql-server-2012 - 无法连接到 sql server 命名实例：错误 26

> ID：16046499
> 
> 赞同：0
> 
> 时间：2013-04-16T20:31:21.873
> 
> 标签：sql-server-2012

简要介绍一下，我创建了 2 个 VM；两个虚拟机都具有相同的硬件和软件配置。他们正在运行 Windows Server 2012。

已在其上安装 SQL Server 2012；两个安装都有 2 个命名实例；像

VM1 有 SQLmaster VM2 有 SQLSlave

现在，当我尝试从 VM1 连接到 VM2 中的实例时，出现错误：26

> “SQL 网络接口，错误：26 - 查找指定的服务器/实例时出错”

尝试了以下博客中提到的解决方案/建议，但没有运气。

[http://blogs.msdn.com/b/sql_protocols/archive/2007/05/13/sql-network-interfaces-error-26-error-locating-server-instance-specified.aspx](http://blogs.msdn.com/b/sql_protocols/archive/2007/05/13/sql-network-interfaces-error-26-error-locating-server-instance-specified.aspx)

[http://social.msdn.microsoft.com/Forums/en-US/sqlsetupandupgrade/thread/69b8e727-eb51-4de1-b298-b3ff316bd071/](http://social.msdn.microsoft.com/Forums/en-US/sqlsetupandupgrade/thread/69b8e727-eb51-4de1-b298-b3ff316bd071/)

任何想法，我怎样才能摆脱这个。

**注意：**我实际上是在尝试在此服务器上配置“sqlserver 2012 alwayson”，但被卡在这里。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:06:07.073

好吧，在拍摄了一段时间后，我找到了解决方案。下面是......希望有人会得到帮助。

**解析度：**

> 打开你的网络配置（你可以使用命令`ncpa.cpl`）
> 
> 点击属性
> 
> 点击 IPV4 连接
> 
> 在常规选项卡上 -> 将首选 DNS 连接从默认 (127.0.0.1) 更改为域控制器的确切 IP 地址。

# php - PHP无法从查询中回显值

> ID：16046502
> 
> 赞同：0
> 
> 时间：2013-04-16T20:31:46.063
> 
> 标签：php, indexing, mysqli, echo, undefined

这是我的登录功能中的一个简短代码。我在尝试从特定用户获取 id 并将其索引到新会话时遇到问题。代码已注释，希望你们能帮助我。

```
$email = mysql_real_escape_string($_POST['email']);
$password = md5(mysql_real_escape_string($_POST['password']));

include_once("include/connection.php");

$query = "SELECT email,password,id FROM user WHERE email ='".$email."' AND password='".$password."'";
$result = mysqli_query($ligaBD,$query);
$value= mysqli_fetch_array($result);

echo $value['id']; // On this line i get the exact id that i want but if i try to echo this inside "if(mysqli_num_rows($result) == 1) { }"  its like the value variable does not exist

if(mysqli_num_rows($result) == 1) {
    session_start();
    echo $value['id']=$_SESSION['id'];exit; // Getting this error -> "Notice: Undefined index: id" 
    header("Location: ./cpanel/#welcome");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:40:57.497

要解决您的问题：

```
echo $value['id']=$_SESSION['id'] 
```

不正确，这就是您收到错误的原因。您将 $value['id'] 的值分配给未定义的 $_SESSION['id'] ，因为您还没有给它一个合适的值。

你应该做

```
$_SESSION['id'] = $valud['id'];
echo $S_SESSION['id']; 
```

问题是：会话不存在，您没有按应有的方式分配值。

您还应该使用 isset() 来确保会话确实存在。

还要确保您在脚本顶部启动了会话

```
session_start(); 
```

现在有点题外话：

不要使用 md5，它不安全。

你应该使用也正在做

```
require_once("include/connection.php"); 
```

对于您不想丢失的可执行脚本。

您的代码对 SQL 注入开放，您必须使用准备好的语句来防止 sql 注入。

“但是 mysql_real_escape_string() 还不够吗”？不，这不对。

关于如何使用 PDO 和准备好的语句，我已经做出了很多答案，但是您可以轻松地在 google 上搜索它，也适用于 mysqli。

既然我已经回答了您的问题，请在此处查看我对 PHPhass 的回答以及如何轻松使用它而不是 md5：[php md5 password for user login](https://stackoverflow.com/questions/16046334/php-md5-password-for-user-login/16046488#16046488)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:38:00.183

那是因为您尚未设置**$_SESSION['id']**，据我所知，您需要将其设置为**$value['id']**的值（您不能将变量设置为那不存在）。

```
echo $_SESSION['id']=$value['id']; 
```

# asp.net - 有没有办法在 Visual Studio 2012 中将对象保存到磁盘？

> ID：16046504
> 
> 赞同：5
> 
> 时间：2013-04-16T20:32:10.877
> 
> 标签：asp.net, debugging, visual-studio-2012

我正在寻找一个错误，如果我可以将我的本地窗口对象的内容转储到一个文件中，这样我就可以在 Notepad++ 中将它与另一个正常工作的对象记录进行比较，这将非常有帮助。问题是这样的：我们不确定代码中是否存在错误或记录中是否存在差异。

有没有办法将对象/变量保存到磁盘？

我找到[了这个](http://visualstudiogallery.msdn.microsoft.com/4f15c2aa-58f1-4323-b0f5-a2663142cd51)扩展，但遗憾的是它只适用于 VS 2010，而我有 2012。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T20:35:06.667

您可以使用[**ObjectDumper**](https://github.com/thomasgalliker/ObjectDumper)扩展。它也可用作 NuGet 包。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-21T07:18:43.757

我参加聚会有点晚了，但我创建了一个名为 Object Exporter 的 Visual Studio 扩展，它完全符合您的要求。它会将调试窗口（目前仅限于本地窗口）中的任何对象导出为 JSON、XML 或 CSharp 对象初始化代码。

这是扩展：[**Visual Studio Marketplace > 对象资源管理器**](https://marketplace.visualstudio.com/items?itemName=OmarElabd.ObjectExporter)

这是随附的博客文章：[**从 Visual Studio 调试器导出对象**](https://www.omarelabd.net/exporting-objects-from-the-visual-studio-debugger/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T23:00:47.713

作者可以在 [http://barad-dur.nl/net/export-locals/](http://barad-dur.nl/net/export-locals/)下载 Export Locals 扩展的[源代码](http://barad-dur.nl/wp-content/uploads/2011/05/ExportLocals.zip)，因此您应该能够轻松地将其转换为 VS2012。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-19T15:10:33.543

我在 OzCode 工作。它是 Visual Studio 的调试扩展，我们一直在开发将实例导出为 XML、json 或 C# 代码以供未来版本使用的功能。[您可以从Visual Studio 的市场](https://marketplace.visualstudio.com/items?itemName=CodeValueLtd.OzCode)
下载抢先体验预览版。这是一个商业级解决方案，可以快速导出大量数据。

[![选择电子报告格式](https://i.stack.imgur.com/5i0oy.gif)](https://i.stack.imgur.com/5i0oy.gif)

我建议您尝试一下 - 一旦您使用*Export*安装 OzCode ，只需打开 DataTip 窗口并选择“Export”即可。

[![导出图像](https://i.stack.imgur.com/DXRRY.gif)](https://i.stack.imgur.com/DXRRY.gif)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T23:04:18.367

我用 Log4Net 和 ObjectDumper 做了一些实验来转储对象。

查看我的博文：[使用 Log4Net 记录完整对象](http://completedevelopment.blogspot.com/2012/12/logging-complete-objects-with-log4net.html)

基本上你创建自己的 IObjectRenderer，配置它，然后你可以简单地 log.Debug(yourObject)

```
 public class Log4NetObjectLogger : IObjectRenderer
    {
        public void RenderObject(RendererMap rendererMap, object obj, TextWriter writer)
        {
            var ex = obj as Exception;

            //if its not an exception, dump it. If it's an exception, log extended details.
            if (ex == null)
            {
                //by default log up to 10 levels deep.
                ObjectDumper.Write(obj,10,writer);
            }
            else
            {
                while (ex != null)
                {
                    RenderException(ex, writer);
                    ex = ex.InnerException;
                }
            }
        }

        private void RenderException(Exception ex, TextWriter writer)
        {
            writer.WriteLine(string.Format("Type: {0}", ex.GetType().FullName));
            writer.WriteLine(string.Format("Message: {0}", ex.Message));
            writer.WriteLine(string.Format("Source: {0}", ex.Source));
            writer.WriteLine(string.Format("TargetSite: {0}", ex.TargetSite));
            RenderExceptionData(ex, writer);
            writer.WriteLine(string.Format("StackTrace: {0}", ex.StackTrace));
        }

        private void RenderExceptionData(Exception ex, TextWriter writer)
        {
            foreach (DictionaryEntry entry in ex.Data)
            {
                writer.WriteLine(string.Format("{0}: {1}", entry.Key, entry.Value));
            }
        }
    } 

```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T20:36:40.467

尝试打开即时窗口并输入对象名称。它将打印出简单的属性及其值。但是，它不能很好地处理作为对象的属性。

或者，您可以使用 JSON 序列化程序对其进行序列化并在调试控制台中打印出来。

# sql-server - Where子句优化

> ID：16046507
> 
> 赞同：2
> 
> 时间：2013-04-16T20:32:20.730
> 
> 标签：sql-server, tsql

我正在尝试优化 where 子句。它反复运行，我试图让查询更快地完成，但 or 语句显着减慢了它的速度。如果你们能帮上忙，那就太好了！

```
WHERE 
((Date1 >= @startdate
    AND Date1 <= @enddate
    AND @RunBy = 0) 
OR (date2 BETWEEN @startdate AND @enddate
    AND @RunBy = 1
    AND date2 BETWEEN @startdate AND @enddate)
OR (date3 BETWEEN @startdate AND @enddate
    AND @RunBy = 2)
OR (date4 >= @startdate
    AND date4 <= @enddate
    AND @RunBy = 3)) 
```

我试图放入一个案例或如果，但它只是不适合我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:59:10.640

您的 where 子句可以重写为：

```
WHERE CASE @RunBy
  WHEN 0 THEN Date1
  WHEN 1 THEN Date2
  WHEN 2 THEN Date3
  WHEN 3 THEN Date4
END BETWEEN @startdate AND @enddate 
```

这应该会加快速度，因为您正在最大限度地减少正在执行的比较次数。

它也更容易阅读和理解，这是好的编程的本质，而且看起来也很酷！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T21:03:12.357

如果您期望不同的执行计划，则必须使用不同的查询文本。如果 date1、date2、date3 和 date4 上有索引，它们将不会与您当前的“多面”查询一起使用。根据您期望使用的执行计划分成 4 个查询。

```
IF @RunBy = 0
BEGIN
  SELECT...
  FROM ...
  WHERE date1 ...
END
ELSE IF @RunBy = 1
BEGIN
  SELECT ...
  FROM ...
  WHERE date2 ...
END
ELSE IF... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T21:04:33.253

Something like this?

```
where case @RunBy
      when 1 then Date1
      when 2 then Date2
      when 3 then Date3
      when 4 then Date4
      else        null
      end between @startDate and @endDate 
```

That won't necessarily improve your query plan, as I don't believe the optimizer will be able to use any indices on your `Date1-4` columns, since `case` is a function: indices can't be applied to function expressions.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T20:35:58.580

比较您将 OR“更改”为 UNION ALL 的查询的性能，例如：而不是

```
WHERE (A = @A)
OR (B = @B) 
```

尝试

```
SELECT ...
FROM ...
WHERE A=@A

UNION ALL 

SELECT ...
FROM ...
WHERE B=@B 
```

值得一试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T20:56:04.940

我看到 date2 部分中有一个条件重复。

```
OR (date2 BETWEEN @startdate AND @enddate
AND @RunBy = 1 AND date2 BETWEEN @startdate AND @enddate) 
```

您可以坚持使用其中一种语法 - 使用 BETWEEN 或 >= 和 <= 组合。不要认为它会导致性能差异。

# hadoop - Hadoop 如何将程序和数据放在一起？

> ID：16046508
> 
> 赞同：-1
> 
> 时间：2013-04-16T20:32:22.427
> 
> 标签：hadoop, mapreduce

我是新的 Hadoop。我一直在阅读有关 Hadoop 的文档，但总是对这个问题感到困惑。Hadoop 如何关联程序和数据。Hadoop 将数据放入 HDFS，并创建副本。用户是否可以控制哪个节点保存哪些数据？（即使他/她可以，用户是否需要关心这个？）当一个mapreduce程序启动时，Hadoop是如何将程序和数据放在一起的？它应该尽量避免节点之间的任何不必要的数据传输。那么它是否将程序（例如映射器）加载到包含数据的节点？如果是这种情况，如果一个映射器的输入数据太大以至于存储在多个节点上怎么办？Hadoop 对所有这些节点上的映射器是否智能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:45:35.843

1.  不，用户无法真正控制数据的存储位置。
2.  不，用户也不应该关心。
3.  Hadoop 选择最接近映射器的数据节点，顺序为 localhost -> 相同机架 -> 数据中心。
4.  是的，它首先**尝试**从本地主机获取数据。
5.  这取决于，您应该阅读“输入拆分”和“HDFS 块”的含义。HDFS 上的单个文件可以拆分为多个 HDFS 块，因此驻留在多个数据节点上。根据定义，映射器的输入是**相互独立的**，因此，即使文件在中间被拆分并且几个映射器占用了其中的一部分（假设，例如，它在换行符处拆分），程序也应该产生相同的输出。Hadoop 尝试获取靠近映射器位置的数据*块，这可能意味着文件或文件的一部分。*由于 HDFS 被复制，来自大量不同文件的块可以驻留在映射器的数据节点上，因此它有一个很好的选择。
6.  见第 5 条，但几乎是的——Hadoop 运行映射器的“接近”数据，或者至少尝试这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T21:43:46.893

我这边几分钱：1-数据和程序之间的关系意味着处理发生在存在要处理的数据的机器上（除了几个例外情况）。

2-根据默认行为，用户无法控制（也不必担心）块放置。它由嵌入在 NameNode 代码中的算法自动完成，称为“块放置策略”。但是，如果您对默认的块放置不满意并且喜欢冒险，那么您绝对可以使用块放置策略（Hadoop 1.2.0 及更高版本）。有关这方面的详细信息，您可以访问此[链接](https://issues.apache.org/jira/browse/HDFS-385)

3- Hadoop 尽最大努力避免数据移动，它通过在已经存在数据的机器上启动映射器来做到这一点。但也有一些例外，正如我在第一点中提到的。如果映射器必须处理的数据块（称为拆分）大于 HDFS 块大小，则该拆分的剩余部分将从一个节点移动到应该运行映射器的另一个节点（这回答了您的倒数第二个问题）。

4- 第二种情况，当数据移动发生时，当有要处理的数据的机器没有可用的 CPU 插槽来启动映射器时，就会出现这种情况。在这种情况下，不是不必要地等待，而是将数据块移动到附近有可用映射器插槽的节点（但这两种情况很少发生）。

MapReduce 框架尽最大努力维护数据局部性并使计算尽可能高效。

# mysql - 用于连接的 MySQL 全局触发器

> ID：16046510
> 
> 赞同：1
> 
> 时间：2013-04-16T20:32:30.807
> 
> 标签：mysql, database, rdbms, mysql-workbench

是否可以创建一个触发器来侦听一个数据库连接/实例（所有模式）的任何插入或更新？

这是我的商业案例：

*   我在一台 MySQL 服务器上有多个模式。
*   这些模式中的每一个都有多个表。
*   所有表都有一个“lastChanged”日期时间列。
*   每当在该表上发生更新或插入时，我都需要更新该表中的“lastChanged”列。

总而言之，我正在寻找是否可以创建一个全局规则来实现它，因此我不需要在每个模式中为每个表创建触发器。

我对触发器没有太多经验，因此，如果您将触发器以外的其他东西视为捕获这些事件并更新相应表中的行的答案，那也是一个绝妙的答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:25:04.707

你不能用一个触发器来做到这一点。

但是，如果您将`lastChanged`列从更改为[`DATETIME`，`TIMESTAMP`](https://dev.mysql.com/doc/refman/5.5/en/datetime.html)则可以使用该`DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP`功能在任何插入或更新时自动设置值。

一个权衡是`TIMESTAMP`数据类型只能支持从 1970 到 2038 的值，因此如果您需要存储该范围之外的值，则不能使用它。

由于您希望使其尽可能简单，并且您说所有表都已经有一个名为 的列`lastChanged`，您可以考虑使用`information_schema`来生成您需要的 alter table 语句，然后一次执行它们。

像这样的东西：

```
select concat('alter table ',
   t.table_schema,
   '.',
   t.table_name,
   ' modify column ',
   c.column_name,
   ' timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP;') as ddl
into outfile '/tmp/lastChanged.sql'
from information_schema.columns c
  inner join information_schema.tables t 
    on t.table_schema = c.table_schema and t.table_name = c.table_name
where c.table_schema = database()
and c.data_type = 'datetime'
and c.column_name = 'lastChanged'
and t.table_type = 'base table';

\. /tmp/lastChanged.sql 
```

# java - JPA @OneToMany 结果为空

> ID：16046513
> 
> 赞同：0
> 
> 时间：2013-04-16T20:32:44.207
> 
> 标签：java, mysql, jpa, eclipselink

我正在尝试通过 JPA 访问 MySQL 数据库，但结果始终为空。

```
public class Part {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private long id;
    ...
    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "owner", referencedColumnName = "id")
    private Owner owner;
    ...
}

public class Owner {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private long id;
    ...
    @OneToMany(mappedBy = "owner")
    private Set<Part> parts;
    ... 
} 
```

每当我尝试将部件连接到所有者时，结果集都是空的。打电话后，例如。size() 方法，它仍然是空的。

```
List<Owner> owners = em.createQuery("...", Owner.class).getResultList();

for (Owner o : owners) {
    System.out.print(o + ": ");
    Set<Part> parts = o.getParts();
    parts.size()
} 
```

这里的零件集总是空的。在数据库中它似乎已连接，但我无法从中获得任何结果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:06:24.610

我的猜测是，在创建对象时，您并没有增加关系的双方。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Relationships#Object_corruption.2C_one_side_of_the_relationship_is_not_updated_after_updating_the_other_side](http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Object_corruption.2C_one_side_of_the_relationship_is_not_updated_after_updating_the_other_side)

# javascript - 将 Math.min() 应用于空列表会产生 -Infinity 而不是 0

> ID：16046517
> 
> 赞同：6
> 
> 时间：2013-04-16T20:32:50.023
> 
> 标签：javascript, forms

我开发了一个代码，其中添加值，最后根据您在表单中选择的项目减去最小值。代码工作正常，但是当您取消选择所有项目而不是显示 0 时会出现问题，而是显示 -Infinity。我该如何处理这个脚本来强制它显示 0 而不是 -Infinity？

```
// All selected prices are stored on a array
var prices = [];

// A function to remove a item from an array
function remove(array, item) {
    for (var i = 0, len = array.length; i < len; i++) {
        if (array[i] == item) {
            array.splice(i, 1);
            return true;
        }
    }
    return false;
}

function calculateSectedDues(checkbox, amount) {
    // We add or remove the price as necesary

    if (checkbox.checked) {
        prices.push(amount);
    } else {
        remove(prices, amount);
    }

    // We sum all the prices
    var total = 0;
    for (var i = 0, len = prices.length; i < len; i++)
        total += prices[i];

    // We get the lower one
    var min = Math.min.apply(Math, prices);

    // And substract it
    total -= min;

    // Please, don't access the DOM elements this way, use document.getElementById instead
    document.grad_enroll_form.total.value = total;

}

</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T20:39:05.243

`Math.min()`没有参数返回`Infinity`，当你调用`Math.min.apply(Math, prices)`一个空`prices`数组时会发生这种情况。

为什么不只检测`Infinity`最小值的存在并将其重置为零？

```
// We get the lower one
var min = Math.min.apply(Math, prices);

// ** test for Infinity **
if(min == Infinity) { min = 0; }

// And substract it
total -= min; 
```

或者确保`prices`至少有一个元素：

```
// fill the empty array with a zero
if(prices.length == 0) prices.push(0);

// We get the lower one
var min = Math.min.apply(Math, prices); 
```

# ruby-on-rails-3 - Can can has_many through 解释帮助急需

> ID：16046518
> 
> 赞同：0
> 
> 时间：2013-04-16T20:32:52.930
> 
> 标签：ruby-on-rails-3, cancan, has-many-through

亲爱的所有人（尤其是 Ryan，感谢您所做的出色工作），我对一些可能真的很愚蠢的事情完全发疯了，但对于我的一生，我无法用我的大脑来解决它。

我正在尝试使用 Can Can 进行授权，并且我在除此之外的所有内容上都正确设置了它（这是我的问题，在一个特定的事情上，显然工作正常，但我不确定我是否做得对或不是 - 实际上我认为我无法证明它不能正常工作）。

让我们看看我是否能够清楚地解释我在做什么：

我有两个模型（用户和相册），它们通过第三个模型共享连接：

# (A) 用户模型

```
has_many :albums, :dependent => :destroy # ownership
has_many :shares, :foreign_key => "shared_user_id" #, :dependent => :destroy
has_many :shared_albums, :through => :shares 
```

# (B) 专辑型号

```
belongs_to :user
has_many :shares, :foreign_key => "shared_album_id", :dependent => :destroy
has_many :shared_users, :through => :shares 
```

# (C) 共享模式

```
belongs_to :shared_user, :foreign_key => "shared_user_id", :class_name => "User"
belongs_to :shared_album, :foreign_key => "shared_album_id", :class_name => "Album" 
```

现在，在我的能力课程中，我想做的是限制特定用户在 (C) 共享模型上可以执行的操作。

在我的应用程序中，用户可以创建一个相册，然后他可以将其他用户添加到该相册（此用户是唯一可以访问特定相册的用户）。此外，相册中的每个用户也可以添加新用户。

所有这些都是为相册中的用户提供创建共享的能力（共享模型将用户和相册模型相关联）。

现在最大的问题是，我如何限制添加（创建）共享到特定相册的能力，仅限于属于该相册一部分的用户（通过共享）？

例如，如果我有：

users => id (1,2,3,4) [我的应用中总共有 4 个用户）

专辑 => id (45,32) [我的应用中总共有 2 张专辑）

分享 => (album 45 => [user (1,2,3)] ; album 32 => [users(1,4)]) [我的应用中共有 5 个分享]

我怎么能在能力类中说，在专辑 32（例如）上，只有用户 1 和 4 可以添加（创建）新共享（添加新用户），而用户 2 或 3 他们不能？

我已经限制了用户 2 和 3 访问资源专辑 32 的能力（我在专辑类级别上这样做了），但我想确保无论出于何种原因，创建用户的能力也受到限制。

到目前为止，我的能力课程中拥有的是：

```
def initialize(user)

  (A) ALBUM LEVEL

     # (1) Every User can create Album, without restrictions
     can :create, Album   

     # (2) Only the user that own the Album can manage it
     can :manage, Album, :user_id => user.id 

     # (3) The Album can be read by all the users that are part of that specific album
     can :read, Album, :shares => {:shared_user_id => user.id}

     # (4) The Album can be read by every user if the privacy attribute is false
     can :read, Album, :privacy_setting => false

  (B) SHARE LEVEL

     # (1) Only the user that own the Album can manage all the shares for the album
     can :manage, Share, :shared_album => {:user_id => user.id}

     # (2) The other users (in the album), can just manage themself (their share)
     can :manage, Share, :shared_user_id => user.id

     # (3) The Share in the album can be read by every user if privacy is false (just read)
     can [:read], Share, :shared_album => {:privacy_setting => false}
     cannot [:create,:destroy,:delete], Share, :shared_album => {:privacy_setting => false}

 #### (X) CRUCIAL POINT CREATE NEW SHARE
     can :create, Share, :shared_album => {:shared_users => {:id => user.id}}

 end 
```

(X)CRUCIAL POINT 中的条件是否是正确的条件，只允许已经是相册一部分的用户向相册添加新用户？？？

这完全让我发疯。

感谢大家，特别是感谢谁能让我对这一切有更多的了解。

最好的迪努斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:34:22.037

你的能力.rb 对我来说似乎很好。

您的关键点执行以下操作：

如果该共享存在共享相册，并且当前用户包含在该共享相册的 shared_users 中，则用户可以创建共享。

不过要记住一件事。由于您在授权时检查共享的shared_album，因此您必须在尝试授权之前先设置它。

例如：

```
@share = @albums.shares.build
authorize :create, @share 
```

上面的示例将设置`shared_album_id`共享的，以便您可以对其进行授权。

```
@share = Share.new
authorize :create, @share 
```

这不起作用，因为共享还没有相册。

希望这可以帮助。

# singularitygs - 无论源顺序如何，独立地跳过网格中的完整列跨行

> ID：16046520
> 
> 赞同：1
> 
> 时间：2013-04-16T20:32:54.920
> 
> 标签：singularitygs

我使用singularitygs 作为我的网格系统，我真的很喜欢灵活性，但我遇到了一个相当独特的情况，我不确定singularity（或任何其他网格系统）是否可以解决

我有一行跨越整个列宽，它分解了文档的标题部分和内容部分。在较大的布局中，有一个元素 div.b 位于 div.a 旁边的完整列栏上方。但是在中等大小的布局及以下，该元素低于整个跨度行。这是源顺序和所需的输出，为简单起见，使用 10 列布局显示。

**源顺序**

```
div.a
div.b
div.c
div.d
div.e
div.f
div.g
div.h 
```

**大布局** ![网格中的大布局](https://i.stack.imgur.com/8kZib.png)

**中等布局** ![在此处输入图像描述](https://i.stack.imgur.com/ujG4w.png)

提前感谢网格系统的创建者的任何帮助和++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:58:28.390

有趣的用例。老实说，在 CSS 网格布局出现之前，这将是相当困难的。虽然 Singularity 可以水平处理任何订单，但像“D”和“G”堆叠这样的垂直重新排序将会很棘手。可能会巧妙地使用浮点数来完成这项工作，但它可能会比纯 Singularity 魔法更多地手动操作元素。

# ios - resignFirstResponder 更改帧值

> ID：16046523
> 
> 赞同：0
> 
> 时间：2013-04-16T20:33:02.787
> 
> 标签：ios, objective-c, resignfirstresponder

我有`LoginViewController`两个文本字段和一个按钮。我使用了故事板，所以这些不是以编程方式创建的。他们在彼此之下。

这是.h文件

```
@interface LoginViewController : UIViewController <UITextFieldDelegate>
@property (weak, nonatomic) IBOutlet UITextField *pw1;
@property (weak, nonatomic) IBOutlet UITextField *pw2;
@property (weak, nonatomic) IBOutlet UIButton *loginBtn;
- (IBAction)loginBtnPressed:(id)sender;
- (IBAction)singleTapRecognized:(id)sender;
@end 
```

仅在第`pw2`一次运行时显示，当用户创建新密码并在`pw2`. 否则它是隐藏的。在这种情况下，我将按钮向上移动以使按钮更靠近`pw1`.

```
 CGSize size = self.pw2.frame.size;
    CGRect rect = self.loginBtn.frame;
    CGRect newFrame = CGRectMake(rect.origin.x, rect.origin.y-size.height, rect.size.width,rect.size.height);
    [self.loginBtn setFrame:newFrame]; 
```

到目前为止，一切都很好。到目前为止，所有工作都按预期进行。但现在.....

*   当我`pw1`留空时，程序会检查该字段，检测到它是空的，隐藏键盘并显示一个`UIAlertView`. 这工作正常。
*   当我输入一些不正确的字符时，程序几乎相同，但将按钮向下移动到其原始位置。
*   当某些字符输入并点击视图中的任意位置时，行为相同

我发现，这只发生在我隐藏键盘时。否则，按钮将按预期保持在其“向上”位置。

这是我的键盘隐藏：

```
-(void) hideKeyboard {
    if (self.pw1.isFirstResponder)
        [self.pw1 resignFirstResponder];
    else if (self.pw2.isFirstResponder)
        [self.pw2 resignFirstResponder];
} 
```

任何想法会发生什么？

对不起我的英语。英语不是我的母语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:57:51.383

我想和你分享我的解决方案。我确信有一种更优雅的编码方式，但这个更适合我。

我在 .h 文件中添加了属性来保存按钮的新约束。

```
@property NSLayoutConstraint *loginButtonVerticalSpace; 
```

然后我添加一个例程来查找情节提要中定义的“旧”约束。

```
-(NSLayoutConstraint *) findButtonConstraintForItem:(id) item
                                         secondItem:(id) secondItem     //may be nil
                                     firstAttribute:(NSLayoutAttribute)firstAttribute
                                    secondAttribute:(NSLayoutAttribute)secondAttribute
    {
        NSArray *cons = self.view.constraints;

        for (NSLayoutConstraint *ns in cons) {
        if (ns.firstItem==item)
        {
           if (ns.firstAttribute==firstAttribute)
           {
               if (secondItem==nil)
                   return ns;
               if (ns.secondItem==secondItem && ns.secondAttribute==secondAttribute)
                   return ns;
           }
        }

    }
    return nil;
} 
```

至少我将“moveButton”方法更改为以下内容：

```
- (void) moveButtonUp{
    NSLayoutConstraint *consOld = [self findButtonConstraintForItem:self.loginBtn
                                                         secondItem:self.pw1
                                                     firstAttribute:NSLayoutAttributeTop
                                                    secondAttribute:NSLayoutAttributeBottom];
    if (!consOld)   // should not happen
        return;

    if (self.loginButtonVerticalSpace)   // work already done
        return;

    CGSize size = self.pw2.frame.size;

    self.loginButtonVerticalSpace =[NSLayoutConstraint
                                   constraintWithItem:self.loginBtn
                                             attribute:NSLayoutAttributeTop
                                             relatedBy:NSLayoutRelationEqual
                                               toItem:self.pw1
                                             attribute:NSLayoutAttributeBottom
                                            multiplier:1.0
                                              constant:consOld.constant-size.height];

    self.loginButtonVerticalSpace.priority=1000;
    [self.view addConstraint:self.loginButtonVerticalSpace];
    [self.view removeConstraint:consOld];
} 
```

十分感谢大家....

# php - 从 XML 获取多个结果（然后根据关键字匹配丢弃某些结果）

> ID：16046530
> 
> 赞同：0
> 
> 时间：2013-04-16T20:33:33.443
> 
> 标签：php, xml

新手 PHP 程序员在这里*（如果我什至可以这样称呼自己）*。我目前正在研究一种循环遍历 XML 文档的方法，以获取不包含特定关键字的子对象的每个实例，然后显示结果。我能够做到上述，但只能使用找到的第一个子对象。

示例如下...

**示例 XML** *可能有多个以下实例，我试图`<title>`从每个实例中获取不包含单词“Flood”或短语“没有活动的监视、警告或建议”的子元素。*

```
<entry>
  <id>http://alerts.weather.gov/cap/wwaatmget.php?x=OHC095&amp;y=0</id>
  <updated>2013-04-16T20:00:01+00:00</updated>
  <author>
  <name>w-nws.webmaster@noaa.gov</name>
  </author>
  <title>There are no active watches, warnings or advisories</title>
  <link href='http://alerts.weather.gov/cap/wwaatmget.php?x=OHC095&amp;y=0'/>
</entry> 
```

**变量**

```
//Lucas Co. Weather
$xml_string = file_get_contents("../../cache/weather_alerts-lucas.xml");
$weather_alerts_lucas = simplexml_load_string($xml_string);
$lucas_alert = ($weather_alerts_lucas->entry->title);
$no_alert =('There are no active watches, warnings or advisories'); 
```

**显示结果** *第一个 if 语句确定是否应该有滚动条，第二个 if 语句确定是否应该显示特定县的信息（有多个县，但为了简单起见，我在这里只显示一个）。*

```
if ("$lucas_alert"=="$no_alert" || fnmatch("*Flood*", $lucas_alert))
    {
      //Do Nothing. 
      } else {  
        echo "<div id='emergency_bar'>";
        echo "<span class='scroll_font' ... ...'>"; 
          if ("$lucas_alert"=="$no_alert" || fnmatch("*Flood*", $lucas_alert))
              { 
                //Do Nothing.   
                  } else {
                    echo "Lucas Co. - " . $lucas_alert . " // ";
                  }
        echo "</span>";
        echo "</div>";
      } 
```

如果我按照上面发布的方式进行操作，它只会抓取第一个结果，即使它抓取了多个实例，`<title>`如果其中一个实例中包含“洪水”一词，它也不会显示任何内容。

提前致谢。我不是在找人为我写代码，只是一些方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:44:56.113

```
$xml = simplexml_load_string($x); // XML in $x
$no = "There are no active watches, warnings or advisories";

foreach ($xml->xpath("//title") as $title) {

    if ($title <> $no && strpos($title,"Flood") === false) echo "$title<br />";

} 
```

看到它工作：[http ://codepad.viper-7.com/JVOoke](http://codepad.viper-7.com/JVOoke)

# javascript - _(variable_name) 在 javascript 中是什么意思？

> ID：16046532
> 
> 赞同：28
> 
> 时间：2013-04-16T20:33:38.980
> 
> 标签：javascript

我遇到了以下javascript代码：

```
this.removeEdge = function(source, target) {
  if(!_states[source]) return;

  var children = _states[source].children,
      index = _(children).indexOf(target);
  if(index !== -1) children.splice(index, 1);
}; 
```

_(children) 是什么意思？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-16T20:36:25.520

`_`是 JavaScript 中的有效变量标识符，理论上可以引用*任何*. 使用`_(...)`with function 语法意味着这`_`是一个函数。

也就是说，[underscore.js](http://underscorejs.org/)库通常使用它，但是如果您正在查看缩小的代码，它很可能被用作另一个单字符变量名以节省文件大小。

* * *

在您提供的示例中，似乎 underscore.js 被用作`children`集合，因此该[`indexOf`函数](http://underscorejs.org/#indexOf)可以应用于集合。这类似于调用：

```
_.indexOf(children, target); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-08-13T00:34:18.823

来寻找答案并设法找到一个。_(variable) 语句在变量周围加上下划线。根据“面向对象和功能样式”部分中的[此链接，](http://htmlpreview.github.io/?https://raw.github.com/jashkenas/underscore/0.4.0/index.html)

```
index = _(children).indexOf(target); 
```

相当于

```
index = _.indexOf(children, target); 
```

第一个是用面向对象的风格编写的，它允许函数链接。他们的例子如下：

```
_(lyrics).chain()
  .map(function(line) { return line.words.split(' '); })
  .flatten()
  .reduce({}, function(counts, word) { 
    counts[word] = (counts[word] || 0) + 1; 
```

这些函数中的每一个都返回包装歌词的下划线函数，允许对歌词变量进行链式操作。

下划线变更日志：

0.4.0 — 2009 年 11 月 7 日：现在可以以面向对象的方式调用所有下划线函数，如下所示：_([1, 2, 3]).map(...);。Marc-André Cournoyer 提供的原始补丁。包装的对象可以通过多个方法调用链接起来。添加了一个函数方法，提供了下划线中所有函数的排序列表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-07-23T09:25:13.567

```
class Book {
  constructor(author) {
    this._author = author;
} 
```

约定在私有变量的名称前加上下划线 (_)。但是，实践本身并没有将变量设为私有。

# breeze - 使用 Breezejs 时有什么可用于限制扩展的使用，这样的用户无法访问敏感数据

> ID：16046537
> 
> 赞同：2
> 
> 时间：2013-04-16T20:33:52.653
> 
> 标签：breeze

基本上这是作为相关帖子之一出现的：

[使用breezejs 在javascript 中查询信息不是很危险吗？](https://stackoverflow.com/questions/13670948/isnt-it-dangerous-to-have-query-information-in-javascript-using-breezejs)

我的第一个问题是关于某人的，但是接受那里的回答，如果有人有关于如何限制客户可见范围的示例或教程，我将不胜感激。

我从 Knockout/Breeze 模板开始，并根据我正在做的事情对其进行了更改。坐在一个几乎完成的项目上，有一个问题。安全。我已经修复了身份验证，并且正在努力进行授权，并试图弄清楚如何确保人们无法获得不打算让他们看到的东西。

我将第一层固定在根模型上，即成员只能看到他创建的或公开的东西。但是用户可能会使用扩展来获取 Object.Member.Identities 的查询。这意味着他获得了公共对象的所有身份。

是否有任何教程可以帮助我限制用户可能查询的内容。？我应该用 ObjectDto 包装返回的对象，并且在创建它时我可以验证它不包含敏感信息吗？

很好，这取决于我如何做，但有些教程会很好用一些指针。

### 代码

控制器

```
 public IQueryable<Project> Projects()
    {

        //var q = Request.GetQueryNameValuePairs().FirstOrDefault(k=>k.Key.ToLower()=="$expand").Value;
       // if (!ClaimsAuthorization.CheckAccess("Projects", q))
          //  throw new WebException("HET");// UnauthorizedAccessException("You requested something you do not have permission too");// HttpResponseException(HttpStatusCode.MethodNotAllowed);

        return _repository.Projects;
    } 
```

_存储库

```
 public DbQuery<Project> Projects
    {
        get
        {

            var memberid = User.FindFirst("MemberId");
            if (memberid == null)
                return (DbQuery<Project>)(Context.Projects.Where(p=>p.IsPublic));

            var id =  int.Parse(memberid.Value);
            return ((DbQuery<Project>)Context.Projects.Where(p => p.CreatedByMemberId == id || p.IsPublic));
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T09:01:57.297

查看将 Web API 的`[Queryable(AllowedQueryOptions=...)]`属性应用于方法或执行一些等效的限制性操作。如果您经常这样做，您可以`QueryableAttribute`根据需要进行子类化。请参阅涵盖这些场景[**的 Web API 文档。**](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/supporting-odata-query-options)

关闭控制器的一个或所有查询方法上可用的选项非常容易。

还要记住，您可以从您的操作方法内部访问请求查询字符串。您可以快速检查“$expand”和“$select”并抛出您自己的异常。阻止已知导航路径的扩展并不难（您可以创建白名单和黑名单）。最后，作为最后一道防线，您可以使用 Web API 操作过滤器或自定义 JSON 格式化程序来过滤类型、属性和值。

在数据隐藏/过滤中使用授权的更大问题是我们将很快讨论的问题。简而言之：“在你真正担心的地方，使用 DTO”。

# ios - 这些日期是什么类型的？

> ID：16046541
> 
> 赞同：2
> 
> 时间：2013-04-16T20:34:04.633
> 
> 标签：ios, date, format

我有一个具有这种格式日期的 plist：

```
Mar 11, 2013 10:16:31 AM 
```

在我的控制台中显示为

```
2013-03-11 16:16:31 +0000 
```

而 web 服务正在返回控制台中的内容，如下所示：

```
2013-03-01T18:21:45.231Z 
```

如何将我的 plist 日期修复为与 Web 服务相同的格式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T21:16:17.463

关于您的三种日期格式：

1.  第一个只是当您`NSDate`在 Xcode 中查看 plist 时的日期格式，这是当前语言环境中人类可读的日期（但如果您在文本编辑器中查看 plist，您会看到它实际上是用`@"yyyy'-'MM'-'dd'T'HH':'mm':'ss'Z'"`格式编写的）。

2.  第二个是`description`方法 a的默认格式`NSDate`（例如你`NSLog`a `NSDate`）。

3.  第三种是[RFC 3339](http://www.ietf.org/rfc/rfc3339.txt) / [ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)格式（只有几分之一秒），通常用于 Web 服务。

请参阅 Apple 的[技术问答 QA1480](https://developer.apple.com/library/ios/#qa/qa1480/_index.html)。

顺便说一句，该技术说明不包括毫秒，因此您可能想要使用类似的东西`@"yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'SSS'Z'"`，例如：

```
NSDate *date = [NSDate date];
NSLocale *enUSPOSIXLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.locale = enUSPOSIXLocale;
formatter.dateFormat = @"yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'SSS'Z'";
formatter.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:0];
NSString *dateString = [formatter stringFromDate:date];
NSLog(@"%@", dateString); 
```

如果您想将日期作为 RFC 3339/ISO 8601 格式的字符串存储在 plist 中（或者，如果您需要将 a 转换`NSDate`为字符串以传输到您的 Web 服务），您可以使用它。如上所述，默认的 plist 格式不会为`NSDate`对象保留几分之一秒，因此如果这很关键，将日期存储为上述代码生成的字符串可能会很有用。

此日期格式化程序可用于将日期转换为字符串（使用`stringFromDate`），以及将正确格式化的字符串转换为`NSDate`对象（使用`dateFromString`）。

# php - 搜索时我的表格似乎重叠

> ID：16046543
> 
> 赞同：-1
> 
> 时间：2013-04-16T20:34:07.053
> 
> 标签：php, html

我为我的网页制作了一个搜索功能，但我的表格似乎重叠了。这是当我搜索出现在三行中的单词“server”时表格的样子

![图片](https://I.stack.imgur.com/MhZDF.jpg)

如果您看到我的结果，标题会重复和重叠。

这是我的代码，我真的不知道我是否犯了错误。

```
<?php
include 'includes/connect.php';
$query = $_GET['query'];
$min_length = 3;
if (strlen($query) >= $min_length) {

    $query = htmlspecialchars($query);
    $query = mysql_real_escape_string($query);

    $raw_results = mysql_query("SELECT * FROM aggrement
                WHERE (`id` LIKE '%" . $query . "%') OR(`description` LIKE '%" . $query . "%') OR (`start_date` LIKE '%" . $query . "%') OR (`end_date` LIKE '%" . $query . "%') OR (`balance` LIKE '%" . $query . "%') OR (`tax_value` LIKE '%" . $query . "%') OR (`amount_paid` LIKE '%" . $query . "%') OR (`hosting_name` LIKE '%" . $query . "%') OR (`domain_name` LIKE '%" . $query . "%') OR (`first_name` LIKE '%" . $query . "%') OR (`last_name` LIKE '%" . $query . "%')") or die(mysql_error());

    if (mysql_num_rows($raw_results) > 0) {
        echo "<table>";
        // echo your header row here
        while ($results = mysql_fetch_array($raw_results)) {

            echo "<tr>
          <th>Id</th>
          <th><a href='viewaggrement.php?sort=description'>Description</th>
          <th><a href='viewaggrement.php?sort=start_date'>Start Date</th>
          <th><a href='viewaggrement.php?sort=end_date'>End Date</th>
          <th><a href='viewaggrement.php?sort=balance'>Balance</th>
          <th><a href='viewaggrement.php?sort=tax_value'>Tax </th>
          <th><a href='viewaggrement.php?sort=amount_paid'>Amount Paid</th>
         <th><a href='viewaggrement.php?sort=domain_name'>Domain Name</th>
         <th><a href='viewaggrement.php?sort=hosting_name'>Hosting Name</th>
        <th><a href='viewaggrement.php?sort=first_name'>First Name</th>
        <th><a href='viewaggrement.php?sort=last_name'>Last Name</th>
        <th>Edit</th>
        <th>Delete</th>
        </tr>";

            echo "<tr>";
            echo "<td>" . $results['id'] . "</td>";
            echo "<td>" . $results['description'] . "</td>";
            echo "<td>" . $results['start_date'] . "</td>";
            echo "<td>" . $results['end_date'] . "</td>";
            echo "<td>" . $results['balance'] . "</td>";
            echo "<td>" . $results['tax_value'] . "</td>";
            echo "<td>" . $results['amount_paid'] . "</td>";
            echo "<td>" . $results['hosting_name'] . "</td>";
            echo "<td>" . $results['domain_name'] . "</td>";
            echo "<td>" . $results['first_name'] . "</td>";
            echo "<td>" . $results['last_name'] . "</td>";
            echo '<td><b><a href="editaggrement.php?id=' . $results['id'] . '"><img src="images/icons/glyphicons_030_pencil.png" /></a></b></td>';
            echo '<td><b><a href="deleteaggrement.php?id=' . $results['id'] . '"><img src="images/icons/glyphicons_016_bin.png" /></a></b></td>';
            echo "</tr>";
        }
        echo "</table>";
    } else {
        echo "No results";
    }

} else {
    echo "Minimum length is " . $min_length;
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:39:20.080

更改以下内容：

```
while($results = mysql_fetch_array($raw_results)) {

     echo "<tr>
  <th>Id</th>
  <th><a href='viewaggrement.php?sort=description'>Description</th>
  <th><a href='viewaggrement.php?sort=start_date'>Start Date</th>
  <th><a href='viewaggrement.php?sort=end_date'>End Date</th>
  <th><a href='viewaggrement.php?sort=balance'>Balance</th>
  <th><a href='viewaggrement.php?sort=tax_value'>Tax </th>
  <th><a href='viewaggrement.php?sort=amount_paid'>Amount Paid</th>
 <th><a href='viewaggrement.php?sort=domain_name'>Domain Name</th>
 <th><a href='viewaggrement.php?sort=hosting_name'>Hosting Name</th>
<th><a href='viewaggrement.php?sort=first_name'>First Name</th>
<th><a href='viewaggrement.php?sort=last_name'>Last Name</th>
<th>Edit</th>
<th>Delete</th>
</tr>"; 
```

至

```
echo "<tr>
  <th>Id</th>
  <th><a href='viewaggrement.php?sort=description'>Description</th>
  <th><a href='viewaggrement.php?sort=start_date'>Start Date</th>
  <th><a href='viewaggrement.php?sort=end_date'>End Date</th>
  <th><a href='viewaggrement.php?sort=balance'>Balance</th>
  <th><a href='viewaggrement.php?sort=tax_value'>Tax </th>
  <th><a href='viewaggrement.php?sort=amount_paid'>Amount Paid</th>
 <th><a href='viewaggrement.php?sort=domain_name'>Domain Name</th>
 <th><a href='viewaggrement.php?sort=hosting_name'>Hosting Name</th>
<th><a href='viewaggrement.php?sort=first_name'>First Name</th>
<th><a href='viewaggrement.php?sort=last_name'>Last Name</th>
<th>Edit</th>
<th>Delete</th>
</tr>";
while($results = mysql_fetch_array($raw_results)) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:38:30.687

```
 echo "<tr>
  <th>Id</th>
  <th><a href='viewaggrement.php?sort=description'>Description</th>
  <th><a href='viewaggrement.php?sort=start_date'>Start Date</th>
  <th><a href='viewaggrement.php?sort=end_date'>End Date</th>
  <th><a href='viewaggrement.php?sort=balance'>Balance</th>
  <th><a href='viewaggrement.php?sort=tax_value'>Tax </th>
  <th><a href='viewaggrement.php?sort=amount_paid'>Amount Paid</th>
 <th><a href='viewaggrement.php?sort=domain_name'>Domain Name</th>
 <th><a href='viewaggrement.php?sort=hosting_name'>Hosting Name</th>
<th><a href='viewaggrement.php?sort=first_name'>First Name</th>
<th><a href='viewaggrement.php?sort=last_name'>Last Name</th>
<th>Edit</th>
<th>Delete</th>
</tr>"; 
```

将该块移动到您的 while 循环上方。

# java - Java swing 禁用窗口

> ID：16046544
> 
> 赞同：0
> 
> 时间：2013-04-16T20:34:07.653
> 
> 标签：java, swing

我想在我的 Swing 应用程序中禁用窗口，这是一张图片来说明我的意思： ![在此处输入图像描述](https://i.stack.imgur.com/a9ORg.png)

我的绘画技巧很差，但我希望你能理解我，结果应该是这样的： ![在此处输入图像描述](https://i.stack.imgur.com/tEhiW.png)

边界不是问题，因为很容易编辑它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:36:37.787

您需要将框架设置为未装饰：

```
frame.setUndecorated(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T20:36:00.277

你应该试试`frame.setundecorated(true);`

# c# - Trackback 控制颜色的 Alpha 值

> ID：16046545
> 
> 赞同：0
> 
> 时间：2013-04-16T20:34:07.553
> 
> 标签：c#, winforms, colors, alpha, trackbar

我有一个文本框，我使用它的背景颜色作为颜色预览，以及一个控制该颜色 alpha 的轨迹栏。我正在使用以下代码：

```
private void trackAlpha_ValueChanged(object sender, EventArgs e) {
    colorPreview.BackColor = Color.FromArgb(trackAlpha.Value, colorDialog.Color.R, colorDialog.Color.G, colorDialog.Color.B);
} 
```

事实证明，滚动 alpha 对预览没有任何影响。

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:52:54.087

WinForms`Control`确实支持 alpha 通道，但默认情况下不支持。对于您想要具有半透明背景颜色的控件，您必须调用该[`SetStyle`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.setstyle.aspx)方法：

```
this.SetStyle(ControlStyles.SupportsTransparentBackColor, true); 
```

该方法受到保护，因此您必须从所需的控件继承并在构造函数或其他东西中调用它。该控件将`colorPreview`是所指的任何内容。

# iphone - 寻找移动精灵和移动瓦片地图之间的碰撞

> ID：16046546
> 
> 赞同：2
> 
> 时间：2013-04-16T20:34:08.113
> 
> 标签：iphone, cocos2d-iphone, layer

嗨，我在 cocos2d 中开发了一款基于瓷砖地图的游戏。在这个我需要找到移动精灵和瓦片地图层之间的碰撞。我遵循了 raywindlich 教程。我在游戏中缩放了瓷砖地图。IE。`tilemap.scale=0.5;`

请帮我找到精灵与地图层的碰撞。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:13:52.990

这是我用来获取给定图层和屏幕上的点的图块 ID 的函数。它牢记设备比例因子。

```
- (int) getTileGIDMap:(CCTMXTiledMap *) map atLayer:(NSString *) layer andPosition:(CGPoint) position {
    int GID = 0;

    CCTMXLayer *mapLayer1 = [map layerNamed:layer];
    int mapX = position.x * CC_CONTENT_SCALE_FACTOR() / (mapLayer1.mapTileSize.width);
    int mapY = mapLayer1.layerSize.height - (position.y - map.position.y) * CC_CONTENT_SCALE_FACTOR() / mapLayer1.mapTileSize.height;

    if (mapX >= 0 && mapY >= 0 && mapY < map.mapSize.height) {
        GID = [mapLayer1 tileGIDAt:ccp(mapX, mapY)];
    }

    return GID;
} 
```

希望能帮助到你

# javascript - 如何动态移动到新创建的 ?

> ID：16046551
> 
> 赞同：0
> 
> 时间：2013-04-16T20:34:27.727
> 
> 标签：javascript, jquery, jsf

我有以下 HTML 结构：

```
<table id="j_idt28:innerContent" class="innerContent">
    <tbody>
      <tr>
      <tr>
      <tr>
      <tr>
      .......
      <tr>
      <tr>
    </tbody>
</table> 
```

使用已解析的 XML 响应填充标签。

我通常有 20 个左右的 tr 标签。我希望在第 4、8、12 等标签之后创建一个并将 4 个标签插入其中。

到目前为止，这是我的 jquery：

```
var i = 1;
var j = 2;
var margin = 0;
var max = $('.innerContent tr').length;
  for(i = 1; i<=max; i++)
  {
  var child1 =  i - 3;
  var child2 =  i - 2;
  var child3 =  i - 1;
  var hotel1 =  $('.innerContent tr:nth-child('+child1+')');
  var hotel2 =  $('.innerContent tr:nth-child('+child2+')');
  var hotel3 =  $('.innerContent tr:nth-child('+child3+')');
  var hotel4 =  $('.innerContent tr:nth-child('+i+')');
    if(i%4 == 0)
    {
    $('.innerContent tbody').prepend('<div class="line_wrapper"></div>');
    $('.line_wrapper').append(hotel1,hotel2,hotel3,hotel4);
}
  }
  for(j =2; j<=max ;j++)
  {
  var hotel =  $('.innerContent tr:nth-child('+j+')');
    margin = margin + 280;
    hotel.css('margin-left',margin+'px');
    //$('.line_wrapper').append(hotel);
  } 
```

这并不像我预期的那样工作。我想添加 div 以便我使用引导流体布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:58:11.747

您可以使用每个：

```
$('#mytable tr').each(function (i) {
    i%4?$(this).prev('div').append(this):$(this).wrap('<div/>');
}); 
```

# matlab - Matlab矢量化

> ID：16046556
> 
> 赞同：0
> 
> 时间：2013-04-16T20:34:45.240
> 
> 标签：matlab, vectorization

我一直在尝试为 matlab 向量化这个函数：

```
function [Q,R]=gramSchmidtMod(A)

n=size(A,1);
R=zeros(n);
for j=1:n
    R(j,j)=norm(A(:,j));
    Q(:,j)=A(:,j)/R(j,j);
    for i=j+1:n
        R(j,i)=Q(:,j)'*A(:,i);
        A(:,i)=A(:,i)-Q(:,j)*R(j,i);
    end

end 
```

结尾

我试过了：

```
j=1:n
    R(j,j)=norm(A(:,j));
    Q(:,j)=A(:,j)/R(j,j);
     i=j+1:n
        R(j,i)=Q(:,j)'*A(:,i);
        A(:,i)=A(:,i)-Q(:,j)*R(j,i); 
```

但这与使用两个 for 循环时的顺序不同。有谁可以帮我离开这里吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:13:47.470

Why won't you just use

```
[Q,R]=qr(A) 
```

# python - Python：检查一个值是否是某个对象

> ID：16046563
> 
> 赞同：0
> 
> 时间：2013-04-16T20:35:02.130
> 
> 标签：python, object, types, instanceof

我知道`isinstance()`方法，它可以用来检查一个值是否是某种类型。例如，

```
num = 3
print isinstance(num, int) 
```

给我们`True`。

我现在有一个定制的对象，叫做`Project`. `Project`有一些特定的属性。我的一种方法使用 a`Project`作为参数，我想验证输入参数确实是 type `Project`。同样的方法会奏效吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:36:33.933

是的，即使是自定义类，也是查看是否是 实例[`isinstance(obj, Project)`](http://docs.python.org/2/library/functions.html#isinstance)的正确方法。`obj``Project``Project`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:37:07.927

是的。

```
class A:
    pass

print(isinstance(A(), A)) 
```

打印“真”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T20:40:10.303

该功能运行良好。

```
class A:
    #some code

X=A()
if(isinstance(X, A)):
    print "hello" 
```

印刷`hello`

# android - AisleFinder Supermarket API 的替代方案

> ID：16046566
> 
> 赞同：3
> 
> 时间：2013-04-16T20:35:06.823
> 
> 标签：android, ios, web-services, api

AisleFinder 的 Supermarket API 是否有替代品？我一直在移动应用程序中使用它，并确定它并不足以满足我的要求。它包含每个产品的过道信息，但这些信息几乎永远不会正确，并且每次搜索都会返回太多不相关的项目。

我正在寻找包含（希望）过道信息并按层次结构排列项目的替代来源。例如，我希望搜索“*水果*”来表示实际**水果**，可能是**苹果**或**橙子**，而不是“*格柏毕业生纯净水水果飞溅*”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T22:33:22.570

我是 AisleFinder 的创始人柯蒂斯。很遗憾听到我们不满足您的需求，但也许我们的朋友可以：我喜欢的有[Scandit](http://www.scandit.com)、Pushpins、[Scan.me](http://www.Scan.me)，Greg London 也有一个您可能喜欢的数据集。

另一方面，您正在寻找“类别”，而不是单个产品，这可能是您的第一个问题。

很少有这些数据的提供者实际上允许“完整”类别的类别数据转储（如果你这样做了，你就不需要它们）

# javascript - Jquery 的第 n 个子选择器的语法错误

> ID：16046569
> 
> 赞同：0
> 
> 时间：2013-04-16T20:35:21.450
> 
> 标签：javascript, jquery, jquery-selectors

我正在尝试使用 jquery 将一系列 HTML 无序列表更改为表。

这是 HTML 的样子：

```
<div class="FindByCategory">
    <ul>
         <li>list item</li>
         <li>list item</li>
    </ul>
    <ul>
         <li>list item</li>
    </ul>
    <ul>
         <li>list item</li>
         <li>list item</li>
    </ul>
</div> 
```

我想把它变成这样的东西：

```
<div class="FindByCategory">
    <table>
        <tr>
            <td>list item</td>
            <td>list item</td>
        </tr>
        <tr>
             <td>list item</td>
             <td>list item</td>
        </tr>
        <tr>
            <td>list item</td>
            <td>list item</td>
        </tr>
</div> 
```

我使用的方法是先创建和填充表格，然后隐藏无序列表。我遇到的问题是 nth:child 选择器。我在控制台上收到错误消息“语法错误，无法识别的表达式：ul:nth-child”。该页面使用 jQuery 1.6.4

这是我的代码：

```
$('.FindByCategory').prepend('<table />'); 
var numberOfRows = $('.FindByCategory ul').length;
for(var i=0; i <= numberOfRows ; i++ ){
    $('.FindByCategory table').append('<tr>');
    var numberOfColumns = $('.FindByCategory ul:nth-child(i) li').length;
    for(var j = 0; j<= numberOfRows ; j++){
        var liHTMLContents = $('.FindByCategory ul:nth-child(i+1) li:nth-child(j+1)').text();
        $('.FindByCategory table tr:nth-child(i+1)').append('<td>' + liHTMLContents + '</td>');
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:36:19.927

您可能想使用 的值`i`，而不是字符串`"i"`：

```
var numberOfColumns = $('.FindByCategory ul:nth-child('+i+') li').length; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:36:38.160

你需要这样的东西

```
 $('.FindByCategory ul:nth-child('+i+') li').length; 
```

其他线路也一样。

```
for(var j = 0; j<= numberOfRows ; j++){
   var liHTMLContents = $('.FindByCategory ul:nth-child('+(i+1)+') li:nth-child('+(j+1)+')').text();
   $('.FindByCategory table tr:nth-child('+(i+1)+')').append('<td>' + liHTMLContents + '</td>');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T20:37:03.303

以下

```
$('.FindByCategory ul:nth-child(i) li').length; 
```

应该

```
$('.FindByCategory ul:nth-child(' + i + ') li').length; 
```

# java - 如何使用 mouseListener 打开新的 JFrame

> ID：16046571
> 
> 赞同：0
> 
> 时间：2013-04-16T20:35:23.597
> 
> 标签：java, swing, jframe, awt, mouselistener

我正在尝试向我的程序添加一个侦听器，当单击面板时，它将打开一个新的 JFrame。例如 jpanel4 是面板标签消息。当我单击 jpanel4 时，我希望它打开 SendMessages JFrame，它是 SendMessages 类。

关于我需要走的方向有什么见解吗？这种方法甚至可行吗？

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public abstract class UserProfile  extends javax.swing.JFrame implements MouseListener {

/**
 * Creates new form NewJFrame
 */
public UserProfile() {
    initComponents();
}

@SuppressWarnings("unchecked")

private void initComponents() {

    jPanel1 = new javax.swing.JPanel();
    jScrollPane1 = new javax.swing.JScrollPane();
    jTextArea1 = new javax.swing.JTextArea();
    jLabel1 = new javax.swing.JLabel();
    jScrollPane2 = new javax.swing.JScrollPane();
    jTextArea2 = new javax.swing.JTextArea();
    jPanel2 = new javax.swing.JPanel();
    jPanel3 = new javax.swing.JPanel();
    jLabel2 = new javax.swing.JLabel();
      //message panel
    jPanel4 = new javax.swing.JPanel();
    jLabel3 = new javax.swing.JLabel();
    jPanel5 = new javax.swing.JPanel();
    jLabel4 = new javax.swing.JLabel();
    jPanel6 = new javax.swing.JPanel();
    jLabel5 = new javax.swing.JLabel();
    jPanel7 = new javax.swing.JPanel();
    jLabel6 = new javax.swing.JLabel();
    jLabel8 = new javax.swing.JLabel();
    jPanel4.addMouseListener(this);      

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jTextArea1.setColumns(20);
    jTextArea1.setRows(5);
    jScrollPane1.setViewportView(jTextArea1);

    jLabel1.setText("Bio");

    jTextArea2.setColumns(20);
    jTextArea2.setRows(5);
    jScrollPane2.setViewportView(jTextArea2);

      // Read the image file into an ImageIcon object.
       ImageIcon penguinsImage = new ImageIcon("C:/Users/Public/Pictures/Sample     Pictures/penguins.jpg");
        //penguinsImage.setPreferredSize(new Dimension(60, 60) );

     // Display the image in the label.
     jLabel8.setIcon(penguinsImage);
                    jLabel8.revalidate();
     // Remove the text from the label.
     jLabel8.setText(null);

     // jPanel2.setPreferredSize(new java.awt.Dimension(100, 100));
      javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
    jPanel2.setLayout(jPanel2Layout);
    jPanel2Layout.setHorizontalGroup(
      jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
      .addComponent(jLabel8)

        );  
    jPanel2Layout.setVerticalGroup(
        jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
             .addComponent(jLabel8)
        .addGap(0, 100, Short.MAX_VALUE)
    );

    jLabel2.setText("Home");

    javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
    jPanel3.setLayout(jPanel3Layout);
    jPanel3Layout.setHorizontalGroup(
        jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel3Layout.createSequentialGroup()
            .addGap(24, 24, 24)
            .addComponent(jLabel2)
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
    );
    jPanel3Layout.setVerticalGroup(
        jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel3Layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel2)
            .addContainerGap(40, Short.MAX_VALUE))
    );

    jLabel3.setText("Messages");

    javax.swing.GroupLayout jPanel4Layout = new javax.swing.GroupLayout(jPanel4);
    jPanel4.setLayout(jPanel4Layout);
    jPanel4Layout.setHorizontalGroup(
        jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel4Layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel3)
            .addContainerGap(19, Short.MAX_VALUE))
    );
    jPanel4Layout.setVerticalGroup(
        jPanel4Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel4Layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel3)
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
    );

    jLabel4.setText("Events");

    javax.swing.GroupLayout jPanel5Layout = new javax.swing.GroupLayout(jPanel5);
    jPanel5.setLayout(jPanel5Layout);
    jPanel5Layout.setHorizontalGroup(
        jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel5Layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel4)
            .addContainerGap(19, Short.MAX_VALUE))
    );
    jPanel5Layout.setVerticalGroup(
        jPanel5Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel5Layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel4)
            .addContainerGap(48, Short.MAX_VALUE))
    );

    jLabel5.setText("Groups");

    javax.swing.GroupLayout jPanel6Layout = new javax.swing.GroupLayout(jPanel6);
    jPanel6.setLayout(jPanel6Layout);
    jPanel6Layout.setHorizontalGroup(
        jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel6Layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel5)
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
    );
    jPanel6Layout.setVerticalGroup(
        jPanel6Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel6Layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel5)
            .addContainerGap(36, Short.MAX_VALUE))
    );

    jLabel6.setText("Subscriptions");

    javax.swing.GroupLayout jPanel7Layout = new javax.swing.GroupLayout(jPanel7);
    jPanel7.setLayout(jPanel7Layout);
    jPanel7Layout.setHorizontalGroup(
        jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel7Layout.createSequentialGroup()
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jLabel6)
            .addContainerGap())
    );
    jPanel7Layout.setVerticalGroup(

            jPanel7Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup
            (jPanel7Layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel6)
            .addContainerGap(36, Short.MAX_VALUE))
    );

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addContainerGap()
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jScrollPane1)
                .addGroup(jPanel1Layout.createSequentialGroup()
                    .addComponent(jLabel1)
                    .addGap(0, 0, Short.MAX_VALUE)))
            .addContainerGap())
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
            .addGap(36, 36, 36)
            .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(43, 43, 43))
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jPanel4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jPanel5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jPanel6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jPanel7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addGap(0, 22, Short.MAX_VALUE))
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jPanel3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jPanel4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addComponent(jPanel5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jPanel6, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jPanel7, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 33, Short.MAX_VALUE)
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jPanel2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(18, 18, 18)
            .addComponent(jLabel1)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
    );

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jPanel1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
    );

    pack();
}
 // panel 4 listener
       private abstract class jPanel4Listener implements MouseListener
 {
    public static void mouseClicked(MouseEvent e)
    {
     // opens the send message frame.
     SendMessage.setVisible(true); 

    }
 }

  public static void main(String args[])
  {

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new UserProfile().setVisible(true);
        }
    });
}
// Variables declaration - do not modify                     
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel2;
private javax.swing.JLabel jLabel3;
private javax.swing.JLabel jLabel4;
private javax.swing.JLabel jLabel5;
private javax.swing.JLabel jLabel6;
 private javax.swing.JLabel jLabel8;
private javax.swing.JPanel jPanel1;
private javax.swing.JPanel jPanel2;
private javax.swing.JPanel jPanel3;
private javax.swing.JPanel jPanel4;
private javax.swing.JPanel jPanel5;
private javax.swing.JPanel jPanel6;
private javax.swing.JPanel jPanel7;
 private javax.swing.JPanel jPanel8;
private javax.swing.JScrollPane jScrollPane1;
private javax.swing.JScrollPane jScrollPane2;
private javax.swing.JTextArea jTextArea1;
private javax.swing.JTextArea jTextArea2;
// End of variables declaration                   
} 
```

这就是我最终使用的。

```
 private class menuBarListener  implements MouseListener
  {
  public void mouseClicked(MouseEvent e)
  {
    String c = e.getComponent().getName();

    if (c.equals("MessagePanel"))
    {
     // opens the send message frame. //dispose(); closes the current frame
       SendMessage s = new SendMessage();
          dispose ();
     s.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:52:43.487

查看[How to mouse listeners](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)，但基本上

```
jpanel4.addMouseListener(new MouseAdapter() { 
    public void mouseClicked(MouseEvent evt) { 
        //...
    }
}); 
```

# tfsbuild - TFS 2010 构建控制器和构建代理可以在 Server 2012 上运行吗？

> ID：16046580
> 
> 赞同：1
> 
> 时间：2013-04-16T20:35:44.987
> 
> 标签：tfsbuild, windows-server-2012

我们的 TFS 2010 构建控制器和构建代理（很遗憾）位于我们的开发应用服务器上，我们计划将其从 Windows Server 2008 R2 升级到 Server 2012。但是，我们没有立即升级到 TFS 2012 的计划。Windows Server 2012 是 TFS Build 2010 组件支持的操作系统吗？我认为很容易找到答案，但到目前为止我找到的所有链接都在谈论针对 TFS 2012 运行 TFS Build 2010 组件，这不是我们的方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:55:16.013

Windows Server 2012 不支持 TFS 2010。您可以在此处找到操作系统兼容性的官方列表：http: [//msdn.microsoft.com/en-ca/library/vstudio/dd578592 (v=vs.100).aspx](http://msdn.microsoft.com/en-ca/library/vstudio/dd578592(v=vs.100).aspx)

# google-chrome-extension - Chrome 扩展：将消息从后台脚本发送到*所有*选项卡

> ID：16046585
> 
> 赞同：26
> 
> 时间：2013-04-16T20:35:55.957
> 
> 标签：google-chrome-extension

有没有办法让后台脚本通知*所有*当前打开的选项卡（即它们的内容脚本）发生了事件。

基本上类似于以下内容

```
chrome.tabs.sendMessage("*", {foo: "bar"}) 
```

我怀疑我可以在后台脚本上维护一个打开的选项卡列表，如果可能的话，并使用它。但是有没有更简单的方法？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-16T20:39:01.677

不支持通配符。访问所有选项卡的唯一方法是[查询](https://developer.chrome.com/docs/extensions/reference/tabs/#method-query)所有现有选项卡，并使用[`chrome.tabs.sendMessage`](https://developer.chrome.com/docs/extensions/reference/tabs/#method-sendMessage).

```
chrome.tabs.query({}, function(tabs) {
    var message = {foo: bar};
    for (var i=0; i<tabs.length; ++i) {
        chrome.tabs.sendMessage(tabs[i].id, message);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-23T16:50:02.480

取自 Rob W 的示例。这可能会好一点：

```
chrome.tabs.query({}, (tabs) => tabs.forEach( tab => chrome.tabs.sendMessage(tab.id, message) ) ); 
```

# erlang - Erlang 带守卫的基本递归

> ID：16046586
> 
> 赞同：0
> 
> 时间：2013-04-16T20:35:57.630
> 
> 标签：erlang

我正在尝试创建一个非常简单的递归函数来删除具有用户从列表中决定的特定值的所有元素。

在 haskell 中，我会使用警卫并执行以下操作：

```
deleteAll_rec _ [] = []
deleteAll_rec del (x:xs) | del==x = deleteAll_rec del xs
                         | otherwise = x:deleteAll_rec del xs 
```

我正在尝试编写一个等效的 Erlang，但是，我不确定如何处理这种`otherwise`情况：

```
deleteAll_rec(_, []) -> [];
deleteAll_rec(DEL, [X|XS]) when DEL =:= X -> deleteAll_rec(DEL, XS). 
```

我想知道是否有人可以证明如何做到这一点？

提前谢谢了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T20:57:46.767

*else*成为 Erlang 中的一个单独的子句：

```
delete_all_rec(_, []) -> [];
delete_all_rec(Del, [Del|Xs]) ->
    delete_all_rec(Del, Xs);
delete_all_rec(Del, [X|Xs]) ->
    [X|delete_all_rec(Del, Xs)]. 
```

另一种方法是使用`if`like：

```
delete_all_rec(_, []) -> [];
delete_all_rec(Del, [X|Xs]) ->
    if Del =:= X ->
            delete_all_rec(Del, Xs);
        true ->
            [X|delete_all_rec(Del, Xs)]
    end. 
```

结果代码是相同的，但我认为第一个版本看起来更好。在此示例中，无论您将终止案例放在首位还是放在最后都无关紧要，我更喜欢将其放在最后。

# sql-server - 使用一个 id 从一列中减去前两行

> ID：16046591
> 
> 赞同：0
> 
> 时间：2013-04-16T20:36:06.007
> 
> 标签：sql-server, rows, subtraction

有谁知道如何仅使用一个 id 从一列中减去前两行？这是我的示例查询：

```
SELECT top 2 a.consumption,
             coalesce(a.consumption -
                     (SELECT b.consumption
                      FROM tbl_t_billing b
                      WHERE b.id = a.id + 1), a.consumption) AS diff
FROM tbl_t_billing a
WHERE a.customerId = '5'
ORDER BY a.dateCreated DESC 
```

我想知道如何使用 customerId #5 从消费列中的一个 id 获取前 2 行之间的差异。我已经尝试过，但我无法获得正确的查询。有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:15:54.583

```
declare @tbl_t_billing table(consumption int, customerId int, datecreated datetime)
insert into @tbl_t_billing
    values
        (10,5,'20100101'),
        (7,5,'20000101'),
        (9,4,'20100101'),
        (5,4,'20000101'),
        (8,3,'20100101'),
        (3,3,'20000101'),
        (7,2,'20100101'),
        (3,2,'20000101'),
        (4,1,'20100101'),
        (2,1,'20000101')

-- get the difference between the last two consumption values for each customerId
select
    customerId,
    sum(consumption) diff 
from(
    select
        customerId,
        consumption *
            case row_number() over(partition by customerId order by datecreated desc)
                when 1 then 1 when 2 then -1
            end consumption
    from @tbl_t_billing
    ) t
group by customerId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:42:20.947

尝试这个：

```
;with cte as
(
select consumption, customerId, 
row_number() over (partiton by customerid order by datecreated desc) rn
from tbl_t_billing  where customerId = '5'
)

select a.customerId, a.consumption, 
coalesce((a.consumption - b.consumption), a.consumption) consumption_diff
from cte a left outer join cte b on a.rn + 1 = b.rn
where a.rn = 1 
```

# database - 架构设计：您如何整合“总体”？

> ID：16046592
> 
> 赞同：0
> 
> 时间：2013-04-16T20:36:05.863
> 
> 标签：database, postgresql, database-design, schema

我目前正在为我的项目建立一个评分表。

每个项目都有一个分数，因此数据库（postgres）可以按分数对项目进行排序并将它们返回给用户。

目前，该产品的总分由以下公式确定：

*   新鲜度分数（由流程A计算）
*   人气分数（由流程B计算）
*   相关性分数（由流程 C 计算）

> 总计 = 0.5 * 新鲜度 + 0.25 * 流行度 + 0.25 * 相关度

流程 A、B、C 将运行几个小时并生成 (item_id, score, type)，其中 type 可以是“新鲜”、“流行”或“相关”。

请注意，我必须保留这些值，因为它们是由不同的过程产生的。

我需要做什么才能执行`SELECT * FROM items JOIN scores ON items.id == scores.item_id ORDER BY <total_score ??> DESC LIMIT 10 OFFSET 0;`

**编辑**

`type = total`一个明显的答案是为所有项目生成另一个进程。这行得通，但这很麻烦，因为其中任何一个分数的每一次变化都需要更新总分。此外，它几乎可以将我的数据存储量从 25% 增加到 100%。我不认为这是一个最佳解决方案，因为整合它需要相当多的维护。

**更新**

这是我的分数表：

```
 Column     |            Type             |                         Modifiers                         | Storage  | Description
---------------+-----------------------------+-----------------------------------------------------------+----------+-------------
 created_at    | timestamp without time zone |                                                           | plain    |
 updated_at    | timestamp without time zone |                                                           | plain    |
 id            | integer                     | not null default                             | plain    |
 score         | double precision            | not null                                                  | plain    |
 type          | character varying           | not null                                                  | extended | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:49:02.777

按总分的表达式排序，分别连接到每个分数行，以便可以在计算中使用所有分数类型。

```
SELECT * FROM items
LEFT JOIN scores f ON items.id = f.item_id and type = 'freshness'
LEFT JOIN scores p ON items.id = p.item_id and type = 'popularity'
LEFT JOIN scores r ON items.id = r.item_id and type = 'relevance'
ORDER BY 
    0.5 * COALESCE(f.score, 0) +
    0.25 * COALESCE((p.score, 0) +
    0.25 * COALESCE(r.score) DESC
LIMIT 10 OFFSET 0 
```

无需存储总数。

注意使用`LEFT JOIN`，这意味着仍然会返回没有特定分数类型的项目。对于任何缺失的分数类型，我曾经`COALESCE()`给零分。

您可能认为这会导致性能问题，但我对此表示怀疑。在考虑存储总数之前尝试一下，看看它的性能如何，这只是出于性能原因，因此是“早期优化”的情况 - 要避免的反模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T21:09:28.250

这是使用虚拟列的另一种很酷的方法，如下[所述](http://momjian.us/main/blogs/pgblog/2013.html#April_1_2013)：

首先，创建一个视图来汇总每个项目的分数：

```
CREATE OR REPLACE VIEW vw_scores_rollup AS
SELECT id,
  SUM(CASE WHEN type = 'freshness' THEN score ELSE 0 END) AS freshness,
  SUM(CASE WHEN type = 'popularity' THEN score ELSE 0 END) AS popularity,
  SUM(CASE WHEN type = 'relevance' THEN score ELSE 0 END) AS relevance
FROM scores
GROUP BY id; 
```

接下来，此函数将源表/视图作为参数。

```
CREATE OR REPLACE FUNCTION total(vw_scores_rollup) RETURNS numeric AS
$BODY$
  SELECT 0.5 * COALESCE($1.freshness, 0) + 0.25 * COALESCE($1.popularity, 0) + 0.25 * COALESCE($1.relevance, 0);
$BODY$
  LANGUAGE sql; 
```

访问：

```
SELECT *, s.total
FROM items i
JOIN vw_scores_rollup s USING (id)
ORDER BY s.total DESC
LIMIT 10 OFFSET 0; 
```

这是一个巧妙的技巧，并提供了一种直接访问总数的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T00:40:49.303

干得好...

```
SELECT item_id, SUM(S) TOTAL
FROM (
  SELECT item_id, 0.5 * score S
      FROM scores
      WHERE type = 'freshness'
  UNION ALL
  SELECT item_id, 0.25 * score
      FROM scores
      WHERE type IN ('popularity', 'relevance')
) Q1
GROUP BY item_id
ORDER BY TOTAL DESC; 
```

[[SQL 小提琴]](http://sqlfiddle.com/#!12/a18c4/7)

这将为您提供项目 ID 和相关的总分（按从高到低排序）。

`items`如有必要，您可以轻松地将其加入表格，限制到前 10 名等...

* * *

另一种可能...

```
SELECT
    item_id,
    SUM (
        CASE type
            WHEN 'freshness' THEN 0.5
            WHEN 'popularity' THEN 0.25
            WHEN 'relevance' THEN 0.25
        END
        * score
    ) TOTAL
FROM scores
GROUP BY item_id
ORDER BY TOTAL DESC; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:58:21.533

无需多次连接。加入前只需聚合。

```
select i.*, s.total
from
    items i
    inner join
    (
        select
            id,
                coalesce(sum((type = 'fresh')::integer * score * 0.5), 0)
                + coalesce(sum((type = 'popularity')::integer * score * 0.25), 0)
                + coalesce(sum((type = 'relevance')::integer * score * 0.25), 0)
            total
        from scores
        group by id
    ) s on i.id = s.id
order by s.total desc
limit 10 
```

# java - 矩形面向对象开发——Equals()方法

> ID：16046604
> 
> 赞同：3
> 
> 时间：2013-04-16T20:36:39.083
> 
> 标签：java, oop, class, equals

在这里需要一些帮助。致力于“类和面向对象的开发”，并且可以在我的逻辑和代码方面为教科书中的问题提供一些帮助。

**问题：**我被要求修改我之前的 Rectangle 类示例以覆盖 equals() 和 toString() 方法。当两个矩形都具有相同的长度和宽度时，它们是相等的。

**我的方法：**我试图改变它来做到这一点，然后决定按区域比较会更容易，而不是按宽度和长度进行比较，所以下面是我到目前为止的内容。让我知道您是否有任何想法可以提供帮助。前面有一个 equals() 方法的示例，它比较了圆的半径，但在比较 2 个不同的事物时没有帮助。先谢谢大家！如果您想知道为什么它们都不是自己的单独文件，我还没有在本章中到达那里，所以我知道有很多要看;P

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package chapter8javaExamples;

/**
 *
 * @author Eric
 */
public class Rectangle {
    private double length, width;

/**
 * constructor
 * pre: none
 * post: A rectangle class is created. 
 */
public Rectangle() {
    length = 2;   //default length
    width = 4;    //default width
}

/**
 * constructor
 * pre: none
 * post: A rectangle object is created with length and width.
 */
public Rectangle (double l, double w) {
    length = l;
    width = w;

}

/**
 * Changes the length of the rectangle
 * pre: none
 * post: Length has been changed.
 */
public void setLength (double newLength) {
    length = newLength;
}

/**
 * Changes the width of the rectangle.
 * pre: none
 * post: Width has been changed.
 */
public void setWidth (double newWidth) {
    width = newWidth;
}

/**
 * Returns the length of the rectangle.
 * pre: none
 * post: The length of the rectangle has been returned. 
 */
public double getLength() {
    return(length);
}

/**
 * Returns the width of the rectangle.
 * pre: none
 * post: The width of the rectangle has been returned.
 */
public double getWidth() {
    return(width);
}

/**
 * Returns the area of rectangle
 * pre: none
 * post: The area of the rectangle is returned
 */
public double area() {
    double triArea;

    triArea = length * width;
    return(triArea);
}

/**
 * Returns the perimeter of the rectangle
 * pre: none
 * post: The perimeter of the rectangle is returned
 */
public double perimeter() {
    double triPer;

    triPer = length + width + length + width;
    return(triPer);
}

/**
 * Displays the formula for area of a rectangle.
 * pre: none
 * post: The formula is displayed.
 */
public static void displayAreaFormula(){
    System.out.println("The formula for the area of a rectangle is a=l*w");
}

/**
 * Determines if the object is equal to another
 * Circle object.
 * pre: c is a Circle object.
 * post: true has been returned if the objects have
 * the same radii, false otherwise.
 */
public boolean equals(Object r) {
    Rectangle testObj = (Rectangle) r;
    Rectangle testObj2 = (Rectangle) r2;

    if (testObj.getArea() == area && testObj2.getArea == area()) {
        return(true);
    } else {
        return(false);
    }
}

/**
 * Returns a String that represents the Circle object.
 * pre: none
 * post: A string representing the Circle object has
 * been returned.
 */
public String toString(){
    String rectangleString;

    rectangleString = "Rectangle has the Area " + length*width;
    return(rectangleString);
}

/**
 * 
 * @param args 
 */
    public static void main(String [] args){
    Rectangle spot = new Rectangle();
    Rectangle spot2 = new Rectangle(5, 9);

    System.out.println("Area is: " + spot.area());
    System.out.println("Perimeter: " + spot.perimeter());
    Rectangle.displayAreaFormula();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:44:48.507

您的 equals 方法应始终具有以下结构：

```
public boolean equals(Object r) {
    if(r == null || !r instanceof Rectangle) return false;
    // rest of the code
} 
```

这是因为您不想对空引用执行操作（这会引发错误），并且无论如何`this`都不能等于。`null`其次：如果 r 不是 rectangle 类的实例，我们可以在必须执行其他操作之前退出，因为 Rectangle 不等于 String 或 Circle。

现在，回答你的问题：如果你想纯粹通过宽度和长度来检查相等性，我会写这样的方法：

```
public boolean equals(Object r) {
    if(r == null || !r instanceof Rectangle) return false;
    if(length == r.length && width == w.width) return true;
    return false;
} 
```

这比较了宽度和长度。如果它们都相等，则两个矩形相等。您正在比较该区域，但这可能会产生误报。举个例子：

```
Rectangle r1;
Rectangle r2;

r1.width = 10;
r1.length = 5;

r2.width = 5;
r2.length = 10; 
```

您的代码会产生积极的影响，而这些矩形的方向不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T20:40:57.567

我不认为在该`equals`方法中比较区域是一个好主意，因为 2x8 的矩形将等于 4x4 的矩形，因为两个区域都是 16。这与您的要求相矛盾：

> 当两个矩形都具有相同的长度和宽度时，它们是相等的。

在这里，您的`r2`变量未定义。但除此之外，该`equals`方法不应该比较其他两个对象，它应该将`this`对象与另一个对象进行比较。

`true`如果`r`对象是 a`Rectangle`并且此矩形的长度与另一个矩形的长度匹配并且此矩形的宽度与另一个矩形的宽度匹配，则您应该返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T20:43:21.293

当两个矩形的长度和宽度都相同时，它们相等。

以下这些矩形是否相同？

![100x100](https://i.stack.imgur.com/LOa9b.gif)

和

![200x50](https://i.stack.imgur.com/c1aIN.gif)

嘿！两者的面积是一样的吧？

所以简而言之，不，您可以`&&`查看两者的长度和宽度是否相等，或者您可以比较`.toString()`两个矩形的 s 以查看它们是否准确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T20:46:29.810

添加到其他答案（先阅读那些）

如果您正在比较“物理”对象（例如一块木头），那么您可能还想比较长度与宽度以及宽度与长度。对于两个相同的对象，用户输入的方向可能会有所不同。在阅读您的要求时考虑这一点。

# visual-studio-2012 - 无法加载 TFS 代码分析规则

> ID：16046610
> 
> 赞同：1
> 
> 时间：2013-04-16T20:36:57.773
> 
> 标签：visual-studio-2012, tfs

设置：

a) TFS 2012 团队项目配置了代码分析（Microsoft 托管推荐规则）以在签入时运行。

b) VS 2012 解决方案，其项目位于 TFS 中的 Team Project 文件夹结构下（根目录下的几个级别）。

c) 解决方案中的所有项目都配置为在构建时运行“Microsoft 托管推荐规则”

我在尝试签入 VS 解决方案时收到以下错误：“无法加载下面列出的一个或多个代码分析规则。要通过此团队项目的代码分析策略，必须在项目上运行所有策略规则没有小瓶”

这是此处报告的相同[错误](http://social.msdn.microsoft.com/Forums/en-US/vstscode/thread/7437a090-d712-472f-a9ad-93d9f02b2db8/)，但解决方案不明显。我在 64 位 Win 7 上运行，并且已验证规则集文件存在于我的本地计算机上的“C:\Program Files (x86)\Microsoft Visual Studio 11.0\Team Tools\Static Analysis Tools\Rule Sets”

我错过了什么？TFS 服务器上是否需要任何设置/安装？

# android - 存储 Android 应用布尔值

> ID：16046613
> 
> 赞同：0
> 
> 时间：2013-04-16T20:37:06.243
> 
> 标签：android, boolean

我正在使用经过训练阶段的人工神经网络开发应用程序，一旦完成，我会将布尔值设置为 True。我需要存储这个布尔值，以便下次打开应用程序时检查布尔值是否为真，如果是训练阶段则不会进入。

谁能告诉我该怎么做？由于时间有限，我真的很感谢您的帮助！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:42:12.377

您想使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)。它是使用键/值对来存储数据的永久存储。我可以举个例子，但是关于 SO 的内容很多。

[文档示例](http://developer.android.com/guide/topics/data/data-storage.html#pref)

[所以例子](https://stackoverflow.com/questions/4124713/shared-preference-android)

# sharepoint - 批量文件上传会创建除最后一个文件之外的所有文件的多个版本

> ID：16046614
> 
> 赞同：1
> 
> 时间：2013-04-16T20:37:06.980
> 
> 标签：sharepoint, sharepoint-2010, document-library, sharepointdocumentlibrary, splistitem

我在这里有一个有趣的（无论如何对我来说很好）问题。我正在将基于代码的文档批量上传到 SharePoint 库中。不同的是，上传后需要在项目属性中维护文件的最后修改日期。

文件详细信息由 csv 文件确定，该文件包含路径和需要附加到库项目的元数据，因为库基于具有元数据字段的自定义内容类型。

我遇到的问题是修改日期仅与上传的最后一个文件一起维护。所有其他文件均指示上传时间。我做了更多的挖掘并打开了版本控制。事实证明，我上传的文件被多次修改，因为它们应用了多个次要版本，而最终上传的文件只有一个。例如。我正在上传 6 个文件来测试这个过程。上载的最后一个文件位于版本 .1，其他文件的版本范围从版本 .6 到 .8 到 .12。您可以看到的所有文件在上传时的初始设置中都有正确的修改日期，但立即发生更改，修改了日期并增加了新的修改日期。

![在此处输入图像描述](https://i.stack.imgur.com/SiBkZ.jpg)

版本历史： ![在此处输入图像描述](https://i.stack.imgur.com/8miNg.jpg)

我尝试了使用以下方法的日期：

`spFile.Item.UpdateOverwriteVersion()` `item.Update()`（当作为列表而不是从文件对象访问项目时 `spFile.Item.SystemUpdate(false)`

这些更新似乎都没有如我所愿。

```
 Try
        Using site As SPSite = New SPSite(siteURL)
            Using Web As SPWeb = site.OpenWeb()
                Dim itemList As SPList = Web.Lists("DM Import Test")
                For Each item As SPListItem In itemList.Items
                    If item.Name = importFile.fileName Then
                        item(SPBuiltInFieldId.Modified) = importFile.modifiedDate
                        item.Update()
                    End If
                Next

            End Using
        End Using 
```

importFile 只是一个具有我需要的属性的自定义对象。

请让我知道您是否遇到过此问题以及您是否碰巧有解决方案。

我还尝试使用以下方法构建条目： `spFile = uploadFolder.Files.Add(Path.GetFileName(importFile.FullPath), fileStream, createdBy, modifiedBy, created, modified)`

uploadFolder 是库的文件夹对象。

谢谢你。

# python - 调试器中的 python 交互式控制台不是“交互式的”

> ID：16046617
> 
> 赞同：0
> 
> 时间：2013-04-16T20:37:17.277
> 
> 标签：python, eclipse, debugging, console, pydev

我正在使用 Eclipse 1.5 运行 Pydev 2.7.3。我正在尝试将交互式控制台与调试器一起使用（即我想做的是在文件中插入一个断点，将文件运行到该断点，然后在交互式调试器中处理一些东西）。似乎我正在尝试做的事情完全符合这一点：http: [//pydev.org/manual_adv_debug_console.html](http://pydev.org/manual_adv_debug_console.html)

但是交互式控制台不做任何事情。它打印“pydev debugger：starting”，以及我文件中断点之前的任何打印，但是当我尝试键入命令并执行它们时，它没有响应。它只是前进一行，当我按 Enter 键时什么也不做。

这是怎么回事？或者我怎样才能开始深入了解这里发生了什么？

编辑要清楚，我正在寻找这里描述的那种功能： [跳转到 Python 交互式会话中间程序？](https://stackoverflow.com/questions/925832/jump-into-a-python-interactive-session-mid-program?rq=1) [在 Eclipse 中使用 Pydev 的交互式控制台？](https://stackoverflow.com/questions/271625/interactive-console-using-pydev-in-eclipse?rq=1)

但是出现的“交互式”控制台（如这些问题的答案所示）不是交互式的。

编辑：问题似乎已经解决。除了重启，没有其他解释。

# vb.net - 在 Excel Workbook.BeforePrint 事件中检测打印机

> ID：16046618
> 
> 赞同：3
> 
> 时间：2013-04-16T20:37:17.307
> 
> 标签：vb.net, excel, events, vba

在 Excel 中处理 Workbook.BeforePrint 事件时，有没有办法确定目标打印机？我知道事件处理程序签名允许取消事件，如此[处](http://msdn.microsoft.com/en-us/library/office/ff195836.aspx)所述，但我想取消所有打印事件，除非打印机是 PDF 打印机。

我发现的边缘情况是，如果用户选择“另存为”或“导出”来创建 PDF，它会使用 PDF 打印机驱动程序执行保存或导出并触发事件处理程序，但不会更新哪个这样做时，打印机被设置为应用程序的活动打印机。是否有不同的方法来检测目标打印机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:21:49.403

这可能会奏效。

```
Private mbSaving As Boolean

Private Sub Workbook_AfterSave(ByVal Success As Boolean)

    mbSaving = False

End Sub

Private Sub Workbook_BeforePrint(Cancel As Boolean)

    If InStr(1, Application.ActivePrinter, "PDF") = 0 And Not mbSaving Then
        Cancel = True
    End If

    mbSaving = False

End Sub

Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)

    mbSaving = True

End Sub 
```

Workbook_AfterSave 在另存为 PDF 时不会触发。我认为这是一个奇怪的事件顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:40:23.443

**VBA-Excel**

```
Debug.Print Application.ActivePrinter 
```

# c# - 在同一事件处理程序中更新两个视图 UI 元素会产生不稳定的结果

> ID：16046619
> 
> 赞同：0
> 
> 时间：2013-04-16T20:37:21.257
> 
> 标签：c#, wpf, multithreading

我有一个小程序，它只不过是一个运行和更新视图的秒表。每 8 秒秒表也会在该视图上增加一个计数器。所以在 0、8、16、24 秒等...计数器是 1、2、3、4 等。

在我看来，在 XAML 中，我有几个项目，其中一个是用于保存我的秒表的 TextBlock，另一个是另一个用于显示“8 秒过去”的次数的 TextBlock。

```
<StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Left" >
    <Label Content="Run Time:" FontSize="16" FontWeight="Bold" Margin="10,0,0,0"/>
    <TextBlock Name="ClockTextBlock" Text="00:00:00:00" FontSize="16" Foreground="Red" Margin="5" FontWeight="Bold"/>
</StackPanel>
<StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
    <Label Content="Sample Count:" FontSize="16" FontWeight="Bold" Margin="10,0,0,0"/>
    <TextBlock Text="0" Name="SampleCountDigit" Foreground="Red" FontSize="16" FontWeight="Bold" Margin="5"/>
</StackPanel> 
```

此 xaml 文件背后的代码包含用于设置调度计时器的代码，该计时器将创建我的秒表。

```
public partial class StopWatchView: UserControl
{
    private DispatcherTimer dt = new DispatcherTimer();
    private Stopwatch stopWatch = new Stopwatch();

    private string _currentTime = string.Empty;
    private int _sampleCount = 0;

    public StopWatchView()
    {
        InitializeComponent();

        dt.Tick += new EventHandler(dt_Tick);
        dt.Interval = new TimeSpan(0, 0, 0, 0, 1);
    }

    private void dt_Tick(object sender, EventArgs e)
    {
        if (stopWatch.IsRunning)
        {
            TimeSpan ts = stopWatch.Elapsed;

            _currentTime = String.Format("{0:00}:{1:00}:{2:00}.{3:00}", ts.Hours, ts.Minutes, ts.Seconds,
                                        ts.Milliseconds/10);

            ClockTextBlock.Text = _currentTime;

            if (ts.Seconds%8 == 0)
            {
                _sampleCount++;
                SampleCountDigit.Text = _sampleCount.ToString();
            }
        }
    }

    private void StartButton_Click(object sender, RoutedEventArgs e)
    {
        ClockTextBlock.Foreground = Brushes.Green;
        stopWatch.Start();
        dt.Start();
    } 
```

**问题**

该代码适用于更新我的秒表，使其看起来和行为就像秒表一样。每次`dt_tick()`调用和`if(stopWatch.IsRunning)`评估为真时，视图都会顺利更新。我遇到问题的地方是当为真时`_sampleCount`增加。`if(ts.Seconds%8 == 0)`我不知道它是否是一种竞争条件（因为我仍在学习线程），但`TextBox="SampleCountDigit"`更新迅速且不规律，而不是应有的 8 秒间隔。老实说，根据我对线程的了解，我不明白为什么会发生这种情况，或者当这两个成员变量（_sampleCount 和 _currentTime）都在 dt_Tick() 事件处理程序代码中更新时，为什么会成为竞争条件。

为什么会发生这种情况，我该怎么做才能更新我的 SampleCountDigit（视图），以便每 8 秒更新一次？是否应该围绕此元素的更新编写一个新线程？

**编辑**为了更好地了解问题的行为，当我在代码上设置断点时，`SampleCountDigit.Text = _sampleCount.ToString();`在 8、16、24 秒等处完全停止......并且我视图上的 SampleDigitCounter 此后会正确更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:53:33.887

问题是因为您已将计时器间隔指定为 1 毫秒。所以`dt_tick()`每秒可能被调用多达 1000 次，在此期间 的值`ts.Second`不会改变。这将导致 _sampleCount 每 8 秒最多增加 1000。

实际上，dt_tick 将以较低的速率被调用，这取决于 DispatcherTimer 的功能和机器的速度。

您可能需要修改您的代码，例如：

```
int _lastSeconds = -1;

private void dt_Tick(object sender, EventArgs e)
{
    if (stopWatch.IsRunning)
    {
        ...

        if (ts.Seconds != _lastSeconds && ts.Seconds%8 == 0)
        {
            _lastSeconds = ts.Seconds;
            _sampleCount++;
            SampleCountDigit.Text = _sampleCount.ToString();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:59:59.623

您的直觉认为这不是线程问题是正确的，因为您在同一个方法中修改两个变量，因此在同一个线程上。

您的问题实际上很简单。我认为您的 dt_tick() 方法每秒被调用一次以上。现在，如果您碰巧在同一秒内触发了该事件两次或三次，并且该特定秒“ts.Seconds”恰好是 8 的倍数，您将增加您的计数器三次。

您在这里遇到的另一个小问题是您使用的是“ts.Seconds”而不是“ts.TotalSeconds”，我们将在下面的解决方案中看到它的影响。

解决此问题的最佳方法是使用 ts.TotalSeconds 获取自秒表启动以来的绝对秒数，并在每次更新计数器时跟踪该值。然后你可以比较上次更新时间和现在，看看是否已经过了 8 秒。使用 ts.TotalSeconds 而不是 ts.Seconds 很重要，因为 ts.Seconds 只是“秒针”，并且只能在 0..59 范围内移动，因此如果您使用 ts.TotalSeconds，您可能会遇到一些奇怪的事情，例如时间倒退等用它。

```
// Outside your dt_tick()
double lastIncrementTime = 0.0d;

// Inside your dt_tick(), just after ClockTextBlock.Text = _currentTime;
if (ts.TotalSeconds - lastIncrementTime >= 8.0d)
{
    // increment counter etc, then...
    lastIncrementTime = ts.TotalSeconds;
} 
```

这样，无论您多频繁地运行代码，您实际上都是在检查自上次增加计数器以来是否经过了 8 秒，而不是检查秒针上的当前值是否是 8 的倍数.

希望有帮助。

# javascript - 正则表达式计算正则表达式中捕获组的数量

> ID：16046620
> 
> 赞同：20
> 
> 时间：2013-04-16T20:37:31.270
> 
> 标签：javascript, regex

我需要一个检查任意正则表达式（作为字符串）的正则表达式，返回捕获组的数量。到目前为止，我已经...

```
arbitrary_regex.toString().match(/\((|[^?].*?)\)/g).length 
```

这适用于某些情况，其中假设任何以问号开头的组都是非捕获的。它还计算空组。

它不适用于字符类中包含的括号、转义括号以及可能的其他一些情况。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-16T20:55:39.407

修改您的正则表达式，使其匹配一个空字符串，然后匹配一个空字符串并查看它返回多少组：

```
var num_groups = (new RegExp(regex.toString() + '|')).exec('').length - 1; 
```

示例：http: [//jsfiddle.net/EEn6G/](http://jsfiddle.net/EEn6G/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T21:14:18.723

公认的答案是您应该在任何生产系统中使用的答案。但是，如果您想使用正则表达式来解决这个问题，您可以如下所示进行。它假设您想要组数的正则表达式是正确的。

请注意，组的数量只是`(`正则表达式中非文字的数量。我们将采取的策略不是匹配所有正确的`(`，而是将它们之间的所有不正确的东西**分开**。

```
re.toString().split(/(\(\?|\\\[|\[(?:\\\]|.)*?\]|\\\(|[^(])+/g).length - 1 
```

[您可以在www.debuggex.com](http://www.debuggex.com/?re=%28%5C%28%5C%3F%7C%5C%5C%5C%5B%7C%5C%5B%28%3F%3A%5C%5C%5C%5D%7C.%29%2A%3F%5C%5D%7C%5C%5C%5C%28%7C%5B%5E%28%5D%29%2B&flags=&str=%28asdf%28asdf%28%5Bas%5C%5Ddf%28%29%28%5D%29%28asd%28asdf%29%29%29%29%28asdf%29%5C%28asdf%28%3F%3Dasdf%29%5C%5Basdf%28%5Cads%5C%5D%5C%28%29%28%29)上查看它的工作原理。

# jquery - 将 json 传递给 webmethod 时出错

> ID：16046621
> 
> 赞同：0
> 
> 时间：2013-04-16T20:37:35.347
> 
> 标签：jquery, ajax, json, webmethod

我在将 json 传递给 webmethod 服务器端时出错，webmethod 需要一个字符串。我认为错误是因为我试图在 json 中转换一个数组

```
function Salvar() {
  var arrayCursos = [];
  $("#dvCursos :checkbox").each(function(index) {
      if (this.checked) {
          var item = {
              idCurso: this.value,
              permi: "1"
          };
          arrayCursos.push(item);
      } else {
          var item = {
              idCurso: this.value,
              permi: "0"
          };
          arrayCursos.push(item);
      }
  });
   var jsonText = JSON.stringify({ jsonCursos: arrayCursos });
  $.ajax({
      type: "POST",
      url: "usuario-curso.aspx/Salvar",
      data : jsonText,
      async: false,
      contentType: 'application/json;charset=utf-8',
      success: function() {

      },
      error: function(status, ajaxOption, ex) {
          alert(ex);
      }
  }); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-02T20:02:34.840

如果您的 webmethod 需要一个字符串，您需要告诉服务器更改您的 contentType

```
 function Salvar() {
    var arrayCursos = [];
    $("#dvCursos :checkbox").each(function(index) {
        if (this.checked) {
            var item = {
                idCurso: this.value,
                permi: "1"
            };
            arrayCursos.push(item);
        } else {
            var item = {
                idCurso: this.value,
                permi: "0"
            };
            arrayCursos.push(item);
        }
    });
    var jsonText = JSON.stringify({ jsonCursos: arrayCursos });
    $.ajax({
        type: "POST",
        url: "usuario-curso.aspx/Salvar",
        data : jsonText,
        async: false,
        contentType: 'text/html;charset=utf-8',
        success: function() {
        // some code here
        },
        error: function(status, ajaxOption, ex) {
            alert(ex);
        }
    });
} 
```

# iphone - CCSprite 没有出现

> ID：16046622
> 
> 赞同：0
> 
> 时间：2013-04-16T20:37:39.480
> 
> 标签：iphone, ios, cocos2d-iphone, ccsprite

我正在尝试学习 Objective-C 以及如何使用 cocos2d 为 iOS 做一些简单的动画。

我正在使用本教程并让动画工作，但我想将代码从主类中取出并将其放入单独的类中。（[http://www.raywenderlich.com/32045/how-to-use-animations-and-sprite-sheets-in-cocos2d-2-x](http://www.raywenderlich.com/32045/how-to-use-animations-and-sprite-sheets-in-cocos2d-2-x)）

所以我创建了一个名为 Pet 的新类，它扩展了 CCNode（这是接口）：

```
@interface Pet : CCNode {
    BOOL moving;
    int touchCount;
}

@property (nonatomic, assign) CCAction *walkAction;
@property (nonatomic, assign) CCAction *cuteAction;
@property (nonatomic, assign) CCAction *moveAction;
@property (nonatomic, assign) CCSprite *sprite;

- (id) initPetWithName:(NSString *)name xPosition:(int)x yPosition:(int)y;
- (BOOL) isTouchedByPoint:(CGPoint)point;
- (void) moveToPoint:(CGPoint)point;

@end 
```

它有一个 CCSprite 对象，在 init 中初始化：

```
self.sprite = [CCSprite spriteWithSpriteFrameName:[NSString stringWithFormat:@"%@_%d.png", name, 4]]; 
```

初始化没有错误，但它没有显示在屏幕上。

CCLayer 类在它的 init 方法中有这个：

```
-(id) init {
    if((self = [super init])) {
        CGSize winSize = [[CCDirector sharedDirector] winSize];

        self.pet = [[Pet alloc] initPetWithName:@"Waffles"
                xPosition:winSize.width/2 yPosition:winSize.height/2];
        [self addChild:self.pet];
        self.isTouchEnabled = YES;
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:36:46.157

我看不到您将精灵添加为孩子的位置。可能是这样吗？

我曾经写过一篇[文章，解释了奇怪地缺失节点的许多潜在原因。](http://www.learn-cocos2d.com/2012/09/reasons-node-show/)

# c++ - 如何在map c++ 中注册成员函数

> ID：16046623
> 
> 赞同：1
> 
> 时间：2013-04-16T20:37:42.003
> 
> 标签：c++, boost, listener, containers

我正在尝试创建一个地图来保存可以注册和触发的功能。为了正确编译，我似乎无法获得正确的绑定/函数/指针语法。

这是我所拥有的：我尝试了 boost::bind 和 boost:

```
#include <cstdlib>
#include <iostream>
#include <boost/bind/bind.hpp>
#include <boost/function.hpp>
#include <map>

using namespace std;

typedef const std::string& listenArg;
typedef void (*Actions)(listenArg str);

std::multimap<int, Actions> functions;

// fire in the hole!

void fire(int methods, listenArg arg0) {
    std::multimap<int, Actions>::iterator function = functions.find(methods);

    typedef std::pair<int, Actions> pear;

    for (function = functions.begin(); function != functions.end(); ++function) {
        (*(function->second))(arg0);
    }
}

void listen1(listenArg arg0) {
    std::cout << "listen1 called with " << arg0 << std::endl;
}

class RegisteringClass {
public:
    RegisteringClass();
    virtual ~RegisteringClass();

    void callMeBaby(listenArg str) {
        std::cout << "baby, i was called with " << str << std::endl;
    }
};

int main(int argc, char** argv) {
    const int key = 111;

    functions.insert(make_pair<int, Actions>(key, listen1));
    fire(key, "test");

    // make a registeringClass
    RegisteringClass reg;

    // register call me baby
    boost::function<void (listenArg) >
            fx(boost::bind(&RegisteringClass::callMeBaby, reg, _1));
    //std::bind(&RegisteringClass::callMeBaby, reg, _1);
    functions.insert(
            make_pair<int, Actions> (key, fx));

    // fire
    fire(key, "test2");
    return 0;
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:41:48.340

```
typedef boost::function < void (listenArg) > Actions; 
```

应该用来代替函数指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T20:41:43.230

问题是您告诉编译器这`Actions`是一个非成员函数指针，然后您尝试将 a`boost::function`放入该类型的变量中。它们是两种完全不相关的类型，这样的分配不可能发生。您需要将`Actions`typedef`boost::function<void (listenArg)>`改为 a 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T20:43:59.670

你可以使用`boost::function`模板

```
#include <cstdlib>
#include <iostream>
#include <boost/bind/bind.hpp>
#include <boost/function.hpp>
#include <map>

using namespace std;

typedef const std::string& listenArg;

typedef boost::function < void (listenArg) > Actions;
std::multimap<int, Actions> functions; 
```

# bash - 重新格式化文本文件

> ID：16046624
> 
> 赞同：0
> 
> 时间：2013-04-16T20:37:43.717
> 
> 标签：bash, cmd, cygwin

我一直在寻找现有的答案，但不知所措。

我需要一个纯文本文件：

1 - 将小数四舍五入到十分位

2 - 最后一组数字需要四个字符长，使用零填充

3 - 删除句点 - 找到 sed 解决方案

4 - 删除空格 - 找到 sed 解决方案

这是我正在使用的文件的示例

```
5.41   3.08  795
4.82   2.69   19
3.60   2.83    8
4.24   3.10 1559 
```

需要改为：

```
54310795
48270019
36280008
42311559 
```

谢谢 - 安迪

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:53:10.427

您可以使用 awk 一次性完成：

```
 awk '{$0=sprintf("%.1f%.1f%04d", $1,$2,$3);gsub(/\./,"")}1' file 
```

测试：

```
kent$  cat file
5.41   3.08  795
4.82   2.69   19
3.60   2.83    8
4.24   3.10 1559

kent$  awk '{$0=sprintf("%.1f%.1f%04d", $1,$2,$3);gsub(/\./,"")}1' file
54310795
48270019
36280008
42311559 
```

# c++ - C++，将 MySQL 与 Visual Studio 2010 链接

> ID：16046626
> 
> 赞同：1
> 
> 时间：2013-04-16T20:37:52.927
> 
> 标签：c++, mysql, visual-studio-2010

我正在尝试制作一个可以与 MySQL 连接的 C++ 应用程序。我在链接方面遇到了一些麻烦。Visual Studio 2010 找不到 MySQL 函数。

我录制了一个视频，您可以在其中看到我的设置。你可以在[这里](http://www.youtube.com/watch?v=YzFUmdvu0ro)找到它。因为我无法让它工作，所以我添加了一些设置，希望 Visual Studio 可以找到这些功能。

我得到的错误是：

```
error LNK2001: unresolved external symbol _mysql_init@4 
```

即使我遵循 MySQL[文档](http://dev.mysql.com/doc/refman/5.6/en/connector-cpp-apps-windows-visual-studio.html)，我也无法工作。我使用 MySQL 安装程序进行了完整的 MySQL 安装。我在我的项目中添加了以下内容；库、库位置、包含路径、预处理器设置。

我在整个网站上搜索了示例，但没有一个有用的答案。

这是链接器命令行：

```
/OUT:"c:\users\eigenaar\documents\visual studio 2010\Projects\MysqlTest\Release\MysqlTest.exe" /INCREMENTAL:NO /NOLOGO /LIBPATH:"C:\Program Files\MySQL\Connector C++ 1.1.2\lib\opt" /LIBPATH:"C:\Program Files\MySQL\MySQL Server 5.6\lib" "mysqlcppconn-static.lib" "libmysql.lib" "mysqlclient.lib" /MANIFEST /ManifestFile:"Release\MysqlTest.exe.intermediate.manifest" /ALLOWISOLATION /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG /PDB:"c:\users\eigenaar\documents\visual studio 2010\Projects\MysqlTest\Release\MysqlTest.pdb" /SUBSYSTEM:CONSOLE /OPT:REF /OPT:ICF /PGD:"c:\users\eigenaar\documents\visual studio 2010\Projects\MysqlTest\Release\MysqlTest.pgd" /LTCG /TLBID:1 /DYNAMICBASE /NXCOMPAT /MACHINE:X86 /ERRORREPORT:QUEUE 
```

# .net - Oracle.DataAccess.dll 版本

> ID：16046633
> 
> 赞同：0
> 
> 时间：2013-04-16T20:38:28.733
> 
> 标签：.net, oracle11g

我正在开发一个使用独立客户端 DLL 连接到 Oracle 11g 数据库的 .NET 应用程序。我在 DLL 版本控制方面遇到了一些困难。我正在使用的客户端 DLL 如下：

```
ociw32.dll
oci.dll
ocijdbc11.dll
orannzsbb11.dll
oraocci11.dll
oraociicus11.dll 
```

我的问题是，Oracle.DataAccess.dll 版本是否重要，还是让列出的 DLL 的版本正确更重要？

# ios - 如何添加返回按钮以返回上一个 MonoTouch 故事板视图？

> ID：16046644
> 
> 赞同：1
> 
> 时间：2013-04-16T20:39:06.320
> 
> 标签：ios, ipad, xamarin.ios, storyboard, monodevelop

在我的 Xamarin Studio C# MonoTouch 故事板中，我有几个视图，每个视图都有一个按钮来执行普通视图调用“超声波”的模态序列。

如何将返回按钮添加到将返回到上一个视图的超声视图？

我将每个视图按模态排列到超声视图。
我添加了连接到方法 button_ultrasound_back 的超声返回按钮，但没有任何反应：

Ultrasound_Controller.m - (IBAction)button_ultrasound_back:(id)sender { [self.navigationController popViewControllerAnimated:YES];
}

当我尝试将 popViewControllerAnimated 线移动到 Ultrasound_Controller.cs 中时，“self”会导致错误。

而且，如果我将序列从其他视图更改为超声视图，从模态到推送，那么超声视图会使应用程序崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T04:23:38.910

您需要使用与模态相对应的 push segue。Push 要求您有一个 UINavigationController 并且您首先将视图设置为其初始视图控制器。一旦你完成了这个后退按钮，你就不需要自己编写代码了。

[这是故事板的一个很好的介绍。](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)它是 Obj-C，但很容易理解。

# java - 是否可以在没有 JDK 的情况下在 Windows 上使用 eclipse？

> ID：16046646
> 
> 赞同：5
> 
> 时间：2013-04-16T20:39:13.397
> 
> 标签：java, eclipse

我想在我的学校笔记本电脑上使用 Eclipse，但是，我的学校不允许我安装 JDK。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T20:44:22.150

您可以从 USB 密钥运行 Eclipse 和 JDK，甚至无需安装它们。您可以编辑 eclipse.ini 文件以指向密钥上的 JDK，如[相关问题](https://stackoverflow.com/questions/15913515/is-there-a-way-to-install-java-7-onto-a-usb-and-use-that-for-projects-in-eclipse)所示。您甚至不必更改环境变量。

请注意，这也适用于其他基于 RCP 的应用程序，这就是我在某些公司的受限计算机上部署 RCP 应用程序的方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T20:46:10.043

您可以将 Eclipse 安装到您的学校计算机上的原因可能是因为 Eclipse 只是他们让您提取的一个 zip 文件。无法将 JDK 安装到学校计算机上的原因可能是因为 JDK 有一个正式的“安装程序”，它需要管理权限才能运行。但是，Eclipse 不需要正式“安装”JDK 即可使用它。将 JDK 文件夹复制到要运行 Eclipse 的计算机上就足够了。因此，找到一台可以安装 JDK 的计算机并将其安装在那里。然后将 JDK 文件夹从该计算机复制到您的学校计算机。

在开始之前，请确保您下载的 JDK 与您下载的 Eclipse 版本具有相同的[位数。](http://en.wiktionary.org/wiki/bitness)64 位 Eclipse 需要 64 位 JDK。32 位 Eclipse 需要 32 位 JDK。

复制

```
C:\Program Files\Java\jdkX.x.x_xx 
```

到学校计算机硬盘上的某个位置。然后编辑（使用文本编辑器）eclipse.ini。eclipse.ini 文件与 eclipse.exe 位于同一目录中。添加两行：

```
-vm
C:/path/to/the/jdk/folder/on/the/school/computer/jdkX.x.x_xx/bin/javaw.exe 
```

显然，将*C:/path/to/the/jdk/folder/on/the/school/computer/*替换为您将 JDK 复制到的实际位置。

# jquery - 将 Jquery 手风琴扩展到表的行

> ID：16046654
> 
> 赞同：2
> 
> 时间：2013-04-16T20:39:34.473
> 
> 标签：jquery, html-table, accordion

我有一张带有可折叠行的表格。请[在这里查看](http://jsfiddle.net/soumyazyx/8Xyjy/10/)

我只想使用 Jquery UI 手风琴，如此[处所示](http://jqueryui.com/accordion/)

我正在尝试将手风琴应用于以下结构：

```
<table>
    <tbody class="category">
        <tr><td>Category - 1</td></tr>
    </tbody>
    <tbody class="subcategory">
        <tr><td>Sub Cateogry 1.1</td></tr>
        <tr><td>Sub Cateogry 1.2</td></tr>
    </tbody>
    <tbody class="category">
       <tr><td>Category - 2</td></tr>
    </tbody>
    <tbody class="subcategory">
       <tr><td>Sub Cateogry 2.1</td></tr>
    </tbody>
</table> 
```

我知道有序列表最适合这种结构。但是由于一些限制，需要使用表。

请建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T20:52:02.210

使用手风琴的[header](http://api.jqueryui.com/accordion/#option-header)选项：

```
$(document).ready(function () {
    $('table').accordion({header: '.category' });
}); 
```

[https://jsfiddle.net/c1j7xbkp/](https://jsfiddle.net/c1j7xbkp/)

# pdf - 在 PDF 中插入 PDF（不合并文件）

> ID：16046656
> 
> 赞同：3
> 
> 时间：2013-04-16T20:39:43.063
> 
> 标签：pdf, itextsharp

我想在另一个缩放的 PDF 页面中插入一个 PDF 页面。我想为此使用 iTextSharp。

我有一个可以导出为单页 PDF 文件的矢量图。我想将此文件添加到其他 PDF 文档的页面中，就像我将图像添加到 PDF 文档一样。

这可能吗？

这样做的目的是保留放大而不损失质量的能力。

使用 PDF 矢量再现矢量绘图非常困难，因为它是一个极其复杂的绘图。

将矢量绘图导出为高分辨率图像不是一种选择，因为我必须在单个 PDF 文档中使用其中的很多。最终的 PDF 会非常大，而且它的书写速度太慢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T22:24:59.550

尽管有几种方法可以做到这一点，但这相对容易做到。如果您正在创建一个新文档，其中包含其他文档而没有其他文档，那么最容易使用的可能是`PdfWriter.GetImportedPage(PdfReader, Int)`. 这会给你一个`PdfImportedPage`（继承自`PdfTemplate`）。一旦你有了它，你可以使用`PdfWriter.DirectContent.AddTemplate(PdfImportedPage, Matrix)`.

有几个重载，`AddTemplate()`但最简单的一个（至少对我而言）是需要一个`System.Drawing.Drawing2D.Matrix`. 如果您使用它，您可以轻松缩放和转换（更改 x，y），而无需考虑“矩阵”术语。

下面是显示这一点的示例代码。`using`它以 iTextSharp 5.4.0 为目标，但如果您删除这些语句，它应该与 4.1.6 几乎相同。它首先创建一个包含 12 页随机背景颜色的示例 PDF。然后它会创建第二个文档，并将第一个 PDF 中的每一页都按 50% 比例添加，以便 4 个旧页面适合 1 个新页面。有关详细信息，请参阅代码注释。此代码假定所有页面的大小相同，如果您的情况不同，您可能需要执行进一步的计算。

```
//Test files that we'll be creating
var file1 = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "File1.pdf");
var file2 = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "File2.pdf");

//For test purposes we'll fill the pages with a random background color
var R = new Random();

//Standard PDF creation, nothing special here
using (var fs = new FileStream(file1, FileMode.Create, FileAccess.Write, FileShare.None)) {
    using (var doc = new Document()) {
        using (var writer = PdfWriter.GetInstance(doc, fs)) {
            doc.Open();

            //Create 12 pages with text on each one
            for (int i = 1; i <= 12; i++) {
                doc.NewPage();

                //For test purposes fill the page with a random background color
                var cb = writer.DirectContentUnder;
                cb.SaveState();
                cb.SetColorFill(new BaseColor(R.Next(0, 256), R.Next(0, 256), R.Next(0, 256)));
                cb.Rectangle(0, 0, doc.PageSize.Width, doc.PageSize.Height);
                cb.Fill();
                cb.RestoreState();

                //Add some text to the page
                doc.Add(new Paragraph("This is page " + i.ToString()));
            }
            doc.Close();
        }
    }
}

//Create our combined file
using (var fs = new FileStream(file2, FileMode.Create, FileAccess.Write, FileShare.None)) {
    using (var doc = new Document()) {
        using (var writer = PdfWriter.GetInstance(doc, fs)) {

            //Bind a reader to the file that we created above
            using (var reader = new PdfReader(file1)) {
                doc.Open();

                //Get the number of pages in the original file
                int pageCount = reader.NumberOfPages;

                //Loop through each page
                for (int i = 0; i < pageCount; i++) {
                    //We're putting four original pages on one new page so add a new page every four pages
                    if (i % 4 == 0) {
                        doc.NewPage();
                    }

                    //Get a page from the reader (remember that PdfReader pages are one-based)
                    var imp = writer.GetImportedPage(reader, (i + 1));
                    //A transform matrix is an easier way of dealing with changing dimension and coordinates on an rectangle
                    var tm = new System.Drawing.Drawing2D.Matrix();

                    //Scale the image by half
                    tm.Scale(0.5f, 0.5f);

                    //PDF coordinates put 0,0 in the bottom left corner.
                    if (i % 4 == 0) {
                        tm.Translate(0, doc.PageSize.Height);                   //The first item on the page needs to be moved up "one square"
                    } else if (i % 4 == 1) {
                        tm.Translate(doc.PageSize.Width, doc.PageSize.Height);  //The second needs to be moved up and over
                    } else if (i % 4 == 2) {
                                                                                //Nothing needs to be done for the third
                    } else if (i % 4 == 3) {
                        tm.Translate(doc.PageSize.Width, 0);                    //The fourth needs to be moved over
                    }

                    //Add our imported page using the matrix that we set above
                    writer.DirectContent.AddTemplate(imp,tm);

                }

                doc.Close();
            }
        }
    }
} 
```

# android - 有问题的 uid 不同的 android

> ID：16046661
> 
> 赞同：0
> 
> 时间：2013-04-16T20:39:58.357
> 
> 标签：android

我正在为一个库制作一个应用程序，我需要访问一个远程数据库，我遇到了这段代码的问题：

```
llave = accountm.getUserData (mAccounts [i], accountm.KEY_USERDATA); 
```

我在循环中增加了变量 i 的这一行，当我的程序到达这一行时出现错误并且我的应用程序意外退出。在 eclipse 的 logcat 中，我的 uid 是不同的。

下面是整个函数的代码：

```
public ArrayList<Grabar> getItems(Context ctx, URL url)throws IOException {

        try {
            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            xr.setContentHandler(this);

        URLConnection conn = url.openConnection();
        InputSource is;

        // Build the baseURL in-case we're given relative links in our RSS feed
        baseURL = url.getProtocol() + "://" + url.getHost();
        if ( url.getPort() > 0 )
            baseURL += ":" + url.getPort();         
            AccountManager accountm = AccountManager.get(ctx);
            //Account[] mAccounts = accountm.getAccountsByType("nz.net.catalyst.KiritakiKoha.account");
            Account[] mAccounts = accountm.getAccounts();
            String llave;
            for (int i=0; i < mAccounts.length; i++) {

                    llave=accountm.getUserData(mAccounts[i], accountm.KEY_USERDATA);

                    System.out.println(mAccounts[i]);

                    if ( llave.length() > 0 ) {
                        conn.setRequestProperty("Cookie", llave);
                        break;
                    }
            }

            is = new InputSource(conn.getInputStream());
            xr.parse(is);
            return Grabars;

    } catch (IOException e) {
            Log.e(TAG, "getItems: IOException: " + e.toString());
            throw new IOException("Connection failed.");
    } catch (SAXException e) {
            Log.e(TAG, "getItems: SAXException: " + e.toString());
    } catch (ParserConfigurationException e) {
            Log.e(TAG, "getItems: ParserConfigurationException: " + e.toString());
    }

    return Grabars;
} 
```

# ruby-on-rails - Ruby on Rails 应用程序调试和开发

> ID：16046664
> 
> 赞同：0
> 
> 时间：2013-04-16T20:40:06.303
> 
> 标签：ruby-on-rails, ruby, debugging, rubymine

我在 Ruby on Rails 中已经有一段时间了。现在我从 GitHub 克隆了一个非常好的项目，我想用 RubyMines 调试它。

有人可以建议我如何进一步进行吗？我从控制器开始吗？或模型？还是 Route.rb 文件？

我想彻底了解该应用程序并使用新的 GUI 开发下一个版本。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:51:18.993

当我熟悉 Rails 项目时，我通常会在控制器上设置断点，并在请求到达控制器时逐步执行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T03:38:23.817

在模型、控制器或视图中的任意位置设置断点。然后只需运行调试器并在浏览器中转到应用程序。每当应用程序遇到您设置断点的代码部分时，它就会停止，然后您可以返回到 RubyMine 并进行相应的调试。这真是一个很棒的功能。

如果您有任何问题，请告诉我。

# javascript - 谷歌分析代码清空自身

> ID：16046666
> 
> 赞同：1
> 
> 时间：2013-04-16T20:40:07.910
> 
> 标签：javascript, google-analytics

我正在尝试在我的网站上实施谷歌分析。我已经粘贴了他们的代码，其中包含这样的功能：

```
(function() {  
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

但是当我将它上传到我的网站时，它看起来像这样：

```
(function() )(); 
```

我通过将代码更改为：

```
<script src="http://www.google-analytics.com/ga.js" async type="text/javascript"></script>
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-39971460-1']);
  _gaq.push(['_trackPageview']);
</script> 
```

这是一个很好的解决方案吗？有什么风险吗？
而实际的问题——为什么这个函数会变空？

谢谢

# android - 如何使用 RoboGuice 将依赖项注入 Robolectric 测试类

> ID：16046669
> 
> 赞同：3
> 
> 时间：2013-04-16T20:40:13.923
> 
> 标签：android, robolectric, roboguice

我想开始在我的 Android 应用程序中使用 Robolectric 和 RoboGuice。虽然我使用 Robolectric 取得了令人满意的进展，但我仍然无法使用 RoboGuice。我创建了一个小型 Android 应用程序进行实验。它只是一个Activity，注入一个Button并设置它的OnClickListener。在相关的测试类中，我想注入这个活动，以便能够测试按钮。我尝试了很多我在互联网上找到的东西，但这些都不起作用，所以我在这里试一试。这是一些代码：

MainActivity.java：

```
package com.example.TrialApp;

import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import roboguice.activity.RoboActivity;
import roboguice.inject.InjectView;

public class MainActivity extends RoboActivity implements View.OnClickListener {

    @InjectView(R.id.main_LoginButton) private Button loginButton;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        loginButton.setOnClickListener(this);
    }

    @Override
    public void onClick(View view) {
        SharedPreferences.Editor editor;
        if (view.getId() == R.id.main_Login_Button)
            Log.i("Login-Button pressed... ", "");
    }
} 
```

CustomRobolectricTestRunner.java：

```
package com.example.TrialApp;

import com.xtremelabs.robolectric.RobolectricTestRunner;
import org.junit.runners.model.InitializationError;

import java.io.File;
public class CustomRobolectricTestRunner extends RobolectricTestRunner {
    public CustomRobolectricTestRunner(Class testClass) throws InitializationError {
        // defaults to "AndroidManifest.xml", "res" in the current directory
        super(testClass, new File("TrialApp"));
    }
} 
```

MainActivity_Test.java：

```
package com.example.TrialApp;

import com.google.inject.Inject;
import com.xtremelabs.robolectric.Robolectric;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;

import static org.junit.Assert.assertNotNull;

@RunWith(CustomRobolectricTestRunner.class)
public class MainActivity_Test {

    @Inject MainActivity mainActivity;
    @Inject ClassWithoutAName classWithoutAName;

    @Before
    public void setUp() {

    }

    @Test
    public void mainActivityShouldNotBeNull() {
        assertNotNull(mainActivity);
    }

    @Test
    public void classWithoutANameShouldNotBeNull() {
        assertNotNull(classWithoutAName);
    }
} 
```

classWithoutAName 只是一个没有内容的非活动类。我添加只是为了注入一个非活动类。

运行 Test-Class 两个测试都失败，出现以下错误：

```
java.lang.AssertionError
at com.example.TrialApp.MainActivity_Test.mainActivityShouldNotBeNull(MainActivity_Test.java:33) <8 internal calls>
at com.xtremelabs.robolectric.RobolectricTestRunner$1.evaluate(RobolectricTestRunner.java:288) <16 internal calls> 
```

和

```
java.lang.AssertionError
at com.example.TrialApp.MainActivity_Test.classWithoutANameShouldNotBeNull(MainActivity_Test.java:38) <8 internal calls>
at com.xtremelabs.robolectric.RobolectricTestRunner$1.evaluate(RobolectricTestRunner.java:288) <16 internal calls> 
```

显然缺少了什么。在 MainActivity 中注入工作正常，并且应用程序正在运行。
为什么在 Robolectric-Testclass 中注入依赖项的相同模式不起作用？缺少的链接在哪里？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:07:11.053

在阅读了更多文章和线程后，我找到了部分解决方案。我还没有找到在测试类中注入 UI 元素的方法，但我发现了如何在测试类中注入非 UI 元素。诀窍是实现扩展 AbstractModule 的“RobolectricTestModule”。在 roboguice.xml 中声明的模块中进行的绑定不存在于测试环境中，因此我们需要在此额外模块中声明测试环境的绑定。在自定义的 Testrunner 中，我们将 DefaultRoboModule 替换为新的 RobolectricTestModule。
ClassWithoutAName.java：

```
package com.example.TrialApp;

public class ClassWithoutAName {

    private String string;

    public ClassWithoutAName(String string) {
        this.string = string;
    }

    public String getString() {
        return string;
    }
} 
```

ClassWithoutANameProvider.java

```
package com.example.TrialApp.GuiceModules;

import com.example.TrialApp.ClassWithoutAName;
import com.google.inject.Provider;

public class ClassWithoutANameProvider implements Provider<ClassWithoutAName> {
    @Override
    public ClassWithoutAName get() {
        return new ClassWithoutAName("testString");
    }
} 
```

ClassWithOutANameModule.java

```
package com.example.TrialApp.GuiceModules;

import com.example.TrialApp.ClassWithoutAName;
import com.google.inject.AbstractModule;

public class ClassWithOutANameModule extends AbstractModule {
    @Override
    protected void configure() {
        bind(ClassWithoutAName.class).toProvider(ClassWithoutANameProvider.class);
    }
} 
```

RobolectricTestModule.java

```
package com.example.TrialApp.GuiceModules;

import com.example.TrialApp.WeirdThings;
import com.google.inject.AbstractModule;

public class RobolectricTestModule extends AbstractModule {
    @Override
    protected void configure() {
        bind(ClassWithoutAName.class).toProvider(ClassWithoutANameProvider.class);
    }
} 
```

CustomRobolectricTestRunner.java

```
package com.example.TrialApp;

import android.app.Application;
import com.example.TrialApp.GuiceModules.RobolectricTestModule;
import com.xtremelabs.robolectric.Robolectric;
import com.xtremelabs.robolectric.RobolectricTestRunner;
import org.junit.runners.model.InitializationError;
import roboguice.RoboGuice;

import java.io.File;

public class CustomRobolectricTestRunner extends RobolectricTestRunner {

    public CustomRobolectricTestRunner(Class testClass) throws InitializationError {
       // defaults to "AndroidManifest.xml", "res" in the current directory
        super(testClass, new File("TrialApp"));
    }

    @Override
    public void prepareTest(Object test) {
        Application application = (Application) Robolectric.application;

        RoboGuice.setBaseApplicationInjector(application, RoboGuice.DEFAULT_STAGE,
                RoboGuice.newDefaultRoboModule(application), new RobolectricTestModule());

        RoboGuice.getInjector(application).injectMembers(test);
    }
} 
```

非 UI 元素就是这样。

# java - 在运行时在消息驱动 Bean 中添加手动映射名称

> ID：16046677
> 
> 赞同：1
> 
> 时间：2013-04-16T20:40:29.287
> 
> 标签：java, message-queue, ejb-3.1, message-driven-bean, glassfish-esb

我需要制作简单的消息驱动 Bean，它将监听动态添加的队列位置。我尝试了几种方法来实现这一点，但都没有奏效。我有使用 esb 和 java 消息队列的应用程序，并且我试图在运行时从配置文件中读取队列位置，从而告诉我的消息驱动 bean 要监听的队列是什么。我也不确定这是可能的。

我也试过实现message listener，但是因为要使用ejb模块，而且ejb模块不支持main方法，需要自己的容器（比如messagedriven bean），不知道用什么代替main方法达到相同的目标。我无法使用会话 bean，因为我需要在客户端和服务之间实现异步通信。

我也尝试过使用客户端应用程序（虽然它不是选项之一），但是 maven 项目不支持在 netbeans 中对此类应用程序进行调试和运行功能。

有谁知道这个问题的任何解决方案，或者至少有一些想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:36:02.513

这可能不是最好的解决方案，但可以使用 Stateful Session Bean 异步接收和处理 JMS 消息，如下所示：

```
package com.example.statefuljms;

import javax.annotation.Resource;
import javax.ejb.Local;
import javax.ejb.Stateful;
import javax.jms.ConnectionFactory;
import javax.jms.JMSException;
import javax.jms.Message;
import javax.jms.MessageListener;
import javax.jms.Queue;
import javax.jms.QueueConnection;
import javax.jms.QueueReceiver;
import javax.jms.QueueSession;
import javax.jms.Session;
import javax.jms.TextMessage;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;

@Stateful
@Local(MessageReceiverLocal.class)
public class MessageReceiver implements MessageReceiverLocal, MessageListener {
    @Resource(mappedName = "ConnectionFactory")
    private ConnectionFactory connectionFactory;

    private QueueConnection connection;

    @Override
    public void start(String queueName) throws JMSException, NamingException {
        Context initialContext = new InitialContext();

        connection = (QueueConnection) connectionFactory.createConnection();
        QueueSession session = (QueueSession) connection.createSession(false,
                Session.AUTO_ACKNOWLEDGE);
        Queue queue = (Queue) initialContext.lookup(queueName);
        QueueReceiver receiver = session.createReceiver(queue);
        receiver.setMessageListener(this);
        connection.start();
    }

    @Remove
    @Override
    public void stop() throws JMSException {
        connection.stop();
        connection.close();
    }

    @Override
    public void onMessage(Message message) {
        // handle message here
    }

} 
```

使用单例进行测试：

```
package com.example.statefuljms;

import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;
import javax.ejb.EJB;
import javax.ejb.Singleton;
import javax.ejb.Startup;
import javax.jms.JMSException;
import javax.naming.NamingException;

@Startup
@Singleton
public class Test {
    @EJB
    private MessageReceiverLocal messageReceiver;

    @PostConstruct
    public void run() {
        messageReceiver.start("/queue/myQueue");
    }

    @PreDestroy
    public void cleanup() {
        messageReceiver.stop();
    }
} 
```

# reporting-services - 如何关联两个字段

> ID：16046678
> 
> 赞同：0
> 
> 时间：2013-04-16T20:40:30.137
> 
> 标签：reporting-services, ssrs-2008

我有一个看起来像这样的报告：

![在此处输入图像描述](https://i.stack.imgur.com/b0cO6.png)

如您所见，有黄色/橙色括号。

我相信我需要括号来涵盖这样的两个领域：

![在此处输入图像描述](https://i.stack.imgur.com/u0Z6t.png)

因为这两个字段之间存在 1:1 的关系，我希望它们像这样显示：

```
Field1
Field2
Field1
Field2 
```

**我怎么能像这样将它们联系在一起？**

目前它以这种方式报告：

```
Field1
Field1
Field1
Field2
Field2
Field2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:48:37.637

右键单击详细信息行。插入行 -> 组内 - 上面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T20:50:30.757

我可能会这样做，因为它可能比陷入已经发生的错误更简单：

1.  添加新的详细信息行
2.  验证数据集中每个数据行的每个详细信息行返回数据
3.  添加一个分组，看看是否有效。

如果这不起作用，抱歉之前从未尝试过，那么我将创建一个子报表来进行分组并采用组级别的参数，然后是一个占两行的子报表。我以前做过：）

# ruby-on-rails - Rails - 带有标志的连接器模型，条件不保存？

> ID：16046685
> 
> 赞同：0
> 
> 时间：2013-04-16T20:41:05.243
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

这是我的模型：

团队：

```
class Team < ActiveRecord::Base

  has_many :team_users

  has_many :users, through: :team_users

  has_many :admins, through: :team_users,
                    foreign_key: :user_id,
                    class_name: 'User',
                    source: :user,
                    conditions: ["team_users.is_admin = ?", true]
end 
```

用户：

```
class User < ActiveRecord::Base

  has_many :team_users

  has_many :teams, through: :team_users

  has_many :administered_teams, through: :team_users,
                                foreign_key: :user_id,
                                class_name: 'Team',
                                source: :team,
                                conditions: ["team_users.is_admin = ?", true]

end 
```

团队用户：

```
# == Schema Information
#
# Table name: team_users
#
#  id       :integer          not null, primary key
#  team_id  :integer
#  user_id  :integer
#  is_admin :boolean
#

class TeamUser < ActiveRecord::Base
  belongs_to :team
  belongs_to :user

  # Validations
  validates_presence_of :team
  validates_presence_of :user

  attr_accessible :is_admin

end 
```

所以本质上`team.users`是`team.admins`通过同一张表连接的。请注意，要成为 a `team.admin`，您必须是`team.user`.

我的问题是，`is_admin`当我追加到时如何自动保存在 joiner-model 中`team.admins`？IE：

```
irb(main):001:0> user = User.find(1)
irb(main):002:0> team = Team.create
irb(main):003:0> team.admins << user
irb(main):004:0> team.users.count
              => 1
irb(main):005:0> team.admins.count
              => 0

irb(main):007:0> y team.team_users
               - !ruby/object:TeamUser
                 attributes:
                   id: 307
                   team_id: 210
                   user_id: 1
                   is_admin: 
                     => nil 
```

我记得模糊地看到某个地方自动设置了 has_many 条件。但我不确定木匠模型是否属于这种情况？或者也许我做错了并且有更好的实现？

## 更新

这个问题似乎与这个问题非常[相似](https://stackoverflow.com/questions/3081764/rails-has-many-through-and-setting-property-on-join-model)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:59:39.453

**更新**

根据您在对另一个答案的评论中链接到的问题中给出的建议，[如果](https://stackoverflow.com/questions/16046685/rails-joiner-model-with-a-flag-condition-not-saving/16046970#comment-22936571)[您](https://stackoverflow.com/questions/3081764/rails-has-many-through-and-setting-property-on-join-model)将条件哈希分配给连接模型而不是 has_many_through 关联，则可以解决此问题：

```
class Team < ActiveRecord::Base
  # standard join model
  has_many :team_users

  # join model with conditions
  has_many :team_admins, class_name: 'TeamUser', conditions: {is_admin: true}

  # uses standard join association
  has_many :users, through: team_users

  # uses the conditional join association
  has_many :admins, through: team_admins, source: user
end

team.admins << user
team.admins.count
=> 1 
```

**原始答案**

不要通过`admins`has-many-through 关联追加。而是像这样附加：

```
team.team_users << TeamUser.new(user: user, is_admin: true) 
```

或者你可以只使用魔法`create_`助手方法：

```
team.create_team_users(user: user, is_admin: true) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T03:41:58.643

尝试将条件选项从 SQL 片段更改为哈希。

来自 Rails 的 API 文档：

> 如果使用哈希，则从关联中创建的记录是有范围的。 将使用或`has_many :posts, :conditions => {:published => true}`创建已发布的帖子。`@blog.posts.create``@blog.posts.build`

在您的情况下，它将变为：

```
has_many :administered_teams, through: :team_users,
                              foreign_key: :user_id,
                              class_name: 'Team',
                              source: :team,
                              conditions: { team_users: { is_admin: true }} 
```

# c# - 在类中动态添加打印功能

> ID：16046689
> 
> 赞同：0
> 
> 时间：2013-04-16T20:41:16.647
> 
> 标签：c#, .net, wpf, mef

我正在开发发票应用程序。

我`MEF`过去采用模块化方法。

我创建了一个用于将文档打印到打印机的打印模块（插件）。

现在，我的问题是

一旦用户添加（保存）一个销售，就有一个名为销售的类。我需要检查是否安装了打印模块，如果是，那么我需要使用该模块将此销售传递给打印机。

我没有得到，我怎么能做到这一点。

我的想法是，我将`[Import(typeof(IPrint))]`在我的销售类中用作属性，如果我对这个属性有一些价值，那么我会将文档发送到打印机。

有没有更好的方法来满足这个要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:19:42.940

我不确定你是如何实现你的课程的。尝试这样的事情：

```
//in your Metadata you should have bool FireOnSave
public class Sales
{
    IEnumerable<Lazy<T, TMetadata>> myPlugins;
    private static CompositionContainer _container;
    static Sales()
    {
        var catalog = new AggregateCatalog();
        var d = new DirectoryInfo(".\\");
        catalog.Catalogs.Add(new DirectoryCatalog(d.FullName));
        _container = new CompositionContainer(catalog);
    }

    void ImportPlugins()
    {
         myPlugins = _container.GetExports<T, TMetadata>();
    }

    public void Save()
    {
        //do your saving work here
        fire_plugins();
    }

    private void fire_plugins()
    {
        foreach (var m in myPlugins)
        {
            if (m.Metadata.FireOnSave)
                m.Value.Invoke();
        }
    }
} 
```

如果您有任何问题，请告诉我。

# css - CSS3 变换 Translate3D IE10

> ID：16046692
> 
> 赞同：2
> 
> 时间：2013-04-16T20:41:30.397
> 
> 标签：css, transform, internet-explorer-10, translate3d

根据 IE 10 支持的技术，我想要完成的工作应该可以工作，但我无法弄清楚发生了什么。在 firefox 和 chrome 中，它的工作方式与它应该的一样，但在 IE10 中，它的渲染不正确。

我已经用尽了 IE 的支持文档，就像我说的那样，这应该可以工作。

这是 JS Fiddle [JSFiddle]：http: [//jsfiddle.net/qzDV3/1/](http://jsfiddle.net/qzDV3/1/)

```
body
{
    background-color:Blue;
    overflow:hidden;
}
#tumble
{
    position:absolute;
    top:70%;
    left:5%;
    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
    transform-style: preserve-3d;
    -webkit-transition: all 1s;
    -moz-transition: all 1s;
    transition: all 1s;
}
#tumble.tumble
{
    left:100%;
    top:85%;
    -webkit-transform:rotate3d(1, -1, 1, 256deg);
    -moz-transform:rotate3d(1, -1, 1, 256deg);
    transform:rotate3d(1, -1, 1, 256deg);
}
.box
{
    position:absolute;
    top:0%;
    left:0%;
    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
    transform-style: preserve-3d;
    -webkit-transform:rotate3d(1, 1, 1, -30deg);
    -moz-transform:rotate3d(1, 1, 1, -30deg);
    transform:rotate3d(1, 1, 1, -30deg);
    -webkit-transition: all .5s;
    -moz-transition: all .5s;
    transition: all .5s;
}
.box.rotate
{
    -webkit-transform:rotate3d(1, -1, 1, 256deg);
    -moz-transform:rotate3d(1, -1, 1, 256deg);
    transform:rotate3d(1, -1, 1, 256deg);
}
.front, .back
{
    top:0;
    left:0;
}
.front
{
    -webkit-transform: translate3d(0,0,100px);
    -moz-transform: translate3d(0,0,100px);
    transform: translate3d(0,0,100px);
}
.back
{
    -webkit-transform: translate3d(0,0,-100px);
    -moz-transform: translate3d(0,0,-100px);
    transform: translate3d(0,0,-100px);
}
.left, .right
{
    top:0;
    -webkit-transform: rotateY(90deg);
    -moz-transform: rotateY(90deg);
    transform: rotateY(90deg);
}
.left
{
    left:-100px;
}
.right
{
    left:100px;
}
.front, .back, .left, .right, .bottom
{
    position:absolute;
    border:2px solid #CF985D;
    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
    transform-style: preserve-3d;
    background-image:url(SRC/Images/cardboard_texture_02.jpg);
    width:200px;
    height:200px;
}
.bottom
{
    top:100px;
    -webkit-transform: rotateX(90deg);
    -moz-transform: rotateX(90deg);
    transform: rotateX(90deg);
}
.top1, .top2
{
    position:absolute;
    border:2px solid #CF985D;
    background-image:url(SRC/Images/cardboard_texture_02.jpg);
    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
    transform-style: preserve-3d;
}
.top1, .top2
{
    top:0px;
    left:0;
    width:100px;
    height:200px;
}
.top2
{
    right:0;
}
.outer1, .outer2
{
    position:absolute;
    width:200px;
    height:200px;
    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
    transform-style: preserve-3d;
}
.outer1
{
    -webkit-transition: all 1s;
    -moz-transition: all 1s;
    transition: all 1s;
    -webkit-transform: rotateX(90deg);
    -moz-transform: rotateX(90deg);
    transform: rotateX(90deg);
}
.outer2
{
    -webkit-transition: all 2s bounce;
    -moz-transition: all 2s bounce;
    transition: all 2s bounce;
    -webkit-transform: rotateX(90deg) rotateY(180deg);
    -moz-transform: rotateX(90deg) rotateY(180deg);
    transform: rotateX(90deg) rotateY(180deg);
}
.outer1:hover
{
    -webkit-transform: rotateX(90deg) rotateY(180deg);
    -moz-transform: rotateX(90deg) rotateY(180deg);
    transform: rotateX(90deg) rotateY(180deg);
}
.outer2:hover
{
    -webkit-transform: rotateX(90deg) rotateY(0deg);
    -moz-transform: rotateX(90deg) rotateY(0deg);
    transform: rotateX(90deg) rotateY(0deg);
}
.outer1
{
    left:-100px;
    top:-100px;
}
.outer2
{
    right:-300px;
    top:-100px;
}
.outer1.close
{
    -webkit-transform: rotateX(90deg) rotateY(180deg);
    -moz-transform: rotateX(90deg) rotateY(180deg);
    transform: rotateX(90deg) rotateY(180deg);
}
.outer2.close
{
    -webkit-transform: rotateX(90deg) rotateY(0deg);
    -moz-transform: rotateX(90deg) rotateY(0deg);
    transform: rotateX(90deg) rotateY(0deg);
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:46:06.290

IE10 不支持 transform-style 的 preserve-3d 选项。

[CSS3 - 3D 翻转动画 - IE10 transform-origin: preserve-3d workaround](https://stackoverflow.com/questions/13474210/css3-3d-flip-animation-ie10-transform-origin-preserve-3d-workaround)

[为什么 IE10 不显示嵌套的 CSS3 3D 转换元素？](https://stackoverflow.com/questions/12609646/why-doesnt-ie10-display-nested-css3-3d-transformed-elements)

# c# - ASP.NET 使用 C# 代码终止所有打开的 SQL Server 连接

> ID：16046693
> 
> 赞同：0
> 
> 时间：2013-04-16T20:41:32.427
> 
> 标签：c#, asp.net, sql-server, connection-pooling

有什么方法可以杀死后面的 ASP.NET 代码中所有打开的 SQL Server 连接？我为什么要这样做？因为一些团队开发人员忘记关闭他们的连接，我讨厌提醒他们。

```
SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
SqlDataAdapter adapter = new SqlDataAdapter();
SqlCommand SqlCommand = new SqlCommand();
connection.Open(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T20:51:24.220

杀死所有打开的连接将是非常糟糕的：您不知道这些连接在像 asp.net 这样的多线程代码中在做什么。直接回答：不，除非您手动跟踪所有连接，否则这是不可能的——但是花在跟踪它们上的任何时间都最好花在解决潜在问题上。

此处最合适的选项是`using`围绕您对连接的使用添加语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-19T16:00:38.287

我同意应该从根本上解决问题，因此 C# 代码必须正确处理它们，但以防您冒着降低活动生产服务器的风险，就像我的情况一样。

我发现我可以使用 SQL 脚本来关闭空闲 200 多分钟以来的所有连接，而对设计不良的软件基本上没有影响/问题。

我没有从程序中调用它，而是将下面的代码放在 SQL Server 代理作业的 STEP 中，因此它会定期从 SQL 服务器本身运行。

就我而言，我想确保不删除某些连接，即来自精心设计的软件或来自 SQL Server 代理本身的连接。所有这些“NEVER TOUCH”连接都由之后的 where 条件标识

```
DELETE FROM #Who2 
```

最终，一旦通过在该删除中使用 ProgramName NOT IN ('YOURAPPNAME') 在连接字符串上正确设置了 applicationName，您就可以轻松地排除除来自 C# 应用程序的连接之外的所有连接

```
DECLARE @Now DATETIME
DECLARE @Cmd nvarchar(200)
DECLARE @SpId int
DECLARE @logn nvarchar(30)
DECLARE @pgm nvarchar(max)
SET @Now = GetDate()
CREATE TABLE #Who2(
    [SPID] int, 
    [Status] SysName NULL,
    [Login] SysName NULL, 
    [HostName] SysName NULL,
    [BlkBy] SysName NULL,
    [DBName] SysName NULL,
    [Command] SysName NULL,
    [CPUTime] int NULL,
    [DiskIO] int NULL,
    [LastBatch] SysName NULL,
    [ProgramName] SysName NULL,
    [SPID2] int NULL,
    [RequestId] int NULL)     
INSERT #Who2 exec sp_Who2

DELETE FROM #Who2
    WHERE Login IN ( 'sa' , 'visora' )
    OR HostName='.' 
    OR ProgramName IN ('Java_Orbiter' , 'Tomcat7_Jsipert2')
    OR DBName in ('msdb')

ALTER TABLE #Who2
        ADD LastDate DateTime
IF Month(@Now)=1 And Day(@Now)=1
BEGIN
    UPDATE #Who2
        SET LastDate=
            CASE WHEN LastBatch Like '12%'
                THEN Cast( Substring(LastBatch,1,5)+ '/'+ 
                            Cast(Year(@now)-1 As varchar(4)) +' '+ 
                            Substring(LastBatch,7,8) as DateTime)
            ELSE
                           Cast( Substring(LastBatch,1,5)+ '/'+ 
                           Cast(Year(@now) As varchar(4))+' ' + 
                          Substring(LastBatch,7,8) as DateTime)
            END    
END    
ELSE
BEGIN
    UPDATE #Who2
        SET LastDate=Cast( Substring(LastBatch,1,5)+ '/'+ 
                Cast(Year(@now) As varchar(4))+' ' + 
                Substring(LastBatch,7,8) as DateTime)
END
DECLARE Hit_List CURSOR FOR 
SELECT SPID, login, ProgramName FROM #Who2 Where Abs(DateDiff(mi,LastDate,@Now)) > 200
OPEN Hit_List
FETCH NEXT FROM Hit_List into @SpId, @logn, @pgm
WHILE @@FETCH_STATUS=0
BEGIN
    SET @Cmd='KILL '+Cast(@SpId as nvarchar(11))+' /* '+@logn +' / ''' + @pgm + ''' */ '
    EXEC(@Cmd)
    PRINT @Cmd
    FETCH NEXT FROM Hit_List into @SpId, @logn, @pgm
END
CLOSE Hit_List
DEALLOCATE Hit_List
DROP TABLE #Who2
GO 
```

# r - data.table bug, causing a segfault in R

> ID：16046696
> 
> 赞同：8
> 
> 时间：2013-04-16T20:41:42.350
> 
> 标签：r, data.table

The following code segfaults my `R 2.15.0`, running `data.table 1.8.9`.

```
library(data.table)
d = data.table(date = c(1,2,3,4,5), value = c(1,2,3,4,5))

# works as expected
d[-5][, mean(value), by = list(I(as.integer((date+1)/2)))]

# crashes R
d[-5, mean(value), by = list(I(as.integer((date+1)/2)))] 
```

And on a related note, the following two commands have very different outputs:

```
d[-5][, value, by = list(I(as.integer((date+1)/2)))]
#    I value
# 1: 1     1
# 2: 1     2
# 3: 2     3
# 4: 2     4

d[-5, value, by = list(I(as.integer((date+1)/2)))]
#    I         value
# 1: 1 2.121996e-314
# 2: 1 2.470328e-323
# 3: 2 3.920509e-316
# 4: 2 2.470328e-323 
```

Simpler command crashing my `R` from the comments:

```
d[-5, value, by = date] 
```

As Ricardo points out, it's the combination of negative indexing and `by` that creates the problem.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T19:33:37.527

One hypothesis is that the problem is related to the following lines in `[.data.table`:

```
o__ = if (length(o__)) irows[o__]
              else irows 
```

`o__` eventually gets passed to the C code (dogroups.C) as `-5` in this case. One could imagine this causing issues with pointer arithmetic leading to segfaults and/or erroneous values.

A potential workaround would be to use `data.table`'s not-join syntax:

```
d[!5, mean(value), by = list(I(as.integer((date+1)/2)))] 
```

which passes through some different logic on the way to C:

```
if (notjoin) {
            ... Omitted for brevity ...
            i = irows = if (length(irows)) seq_len(nrow(x))[-irows] else NULL
        } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-08T12:24:49.703

### UPDATE: This has been fixed in v1.8.11\. From [NEWS](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable) :

> Crash or incorrect aggregate results with negative indexing in i is fixed, [#2697](https://r-forge.r-project.org/tracker/?func=detail&group_id=240&aid=2697&atid=975). Thanks to Eduard Antonyan (eddi) for reporting. Tests added.

# kendo-ui - 如何将 Kendo UI HTML 助手添加到我的 ASP.net MVC 4 项目？

> ID：16046697
> 
> 赞同：3
> 
> 时间：2013-04-16T20:41:42.570
> 
> 标签：kendo-ui, kendo-asp.net-mvc

简单的问题：我已经在我的工作站上安装了 Telerik DevCraft Ultimate。我查看了显示使用 Kendo UI HTML 帮助程序的示例。

我要向我的项目添加什么参考才能使用它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T00:23:12.567

配置您的 ASP.NET MVC 布局页面以包含 Kendo UI Web JavaScript 和 CSS 文件：

```
 <link rel="stylesheet" href="@Url.Content("~/Content/kendo.common.min.css")">
 <link rel="stylesheet" href="@Url.Content("~/Content/kendo.default.min.css")">
 <script src="@Url.Content("~/Scripts/jquery.min.js")"></script>
 <script src="@Url.Content("~/Scripts/kendo.web.min.js")"></script>
 <script src="@Url.Content("~/Scripts/kendo.aspnetmvc.min.js")"></script> 
```

将对 Kendo.Mvc.UI 命名空间的引用添加到您的 web.config。然后 Kendo HtmlHelper 扩展将在您的视图中可用。将命名空间添加到 web.config 后重建项目（Visual Studio 需要为 Kendo.Mvc.UI 显示智能感知）。

```
<system.web.webPages.razor>
     <pages pageBaseType="System.Web.Mvc.WebViewPage">
         <namespaces>
             <add namespace="System.Web.Mvc" />
             <add namespace="System.Web.Mvc.Ajax" />
             <add namespace="System.Web.Mvc.Html" />
             <add namespace="System.Web.Routing" />
             <add namespace="Kendo.Mvc.UI" />
         </namespaces>
     </pages>
 </system.web.webPages.razor> 
```

使用任何 Kendo UI HtmlHelper 扩展

```
@(Html.Kendo().DatePicker().Name("Birthday")) 
```

更多详细信息，请访问[http ://docs.kendoui.c​​om/getting-started/using-kendo-with/aspnet-mvc/introduction](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/introduction)

# hash - SHA-3 变体是如何命名的？

> ID：16046705
> 
> 赞同：2
> 
> 时间：2013-04-16T20:42:09.797
> 
> 标签：hash, sha

我们应该如何简洁地引用特定宽度的 SHA-3 变体？不幸的是，如果将 SHA-2 命名应用于 SHA-3，则该先例会模棱两可。具体来说，我们有 SHA-0 和 SHA-1（160 位），然后是 SHA-2（224、256、384 或 512 位），其中 SHA-224、SHA-256、SHA-384 和 SHA-512请参阅 SHA-2 变体。SHA-3 支持与 SHA-2 相同的位数，但需要不同的命名约定来区分 SHA-2 和 SHA-3。SHA-3-224、SHA-3-256、SHA-3-384 和 SHA-3-512 似乎是合理的（如果笨拙的话），但我找不到任何类型的既定命名约定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-12T17:32:06.800

我相信他们已经定稿如下

“SHA3-224”、“SHA3-256”、“SHA3-386”、“SHA3-512”

[SHA-3 标准：基于排列的散列和可扩展输出函数](http://csrc.nist.gov/groups/ST/toolkit/examples.html#aHashing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T21:06:23.947

There is no convention yet. Even the standard itself is not published AFAIK.

I'd use `SHA3-256` etc. (like `MD6-256`).

Same naming scheme is also [used](http://grepcode.com/file/repo1.maven.org/maven2/org.bouncycastle/bcprov-jdk15on/1.48/org/bouncycastle/crypto/digests/SHA3Digest.java#119) in BouncyCastle library.

As for `SHA-3-256` and friends, I personally don't like the idea of using the same char `-` in algorithm name and as property separator. If you necessarily need to keep the dash in algorithm name, I'd go with `SHA-3/256` -- similar scheme is used in cipher transformation naming in [JCA](http://docs.oracle.com/javase/7/docs/technotes/guides/security/crypto/CryptoSpec.html#trans).

# c# - C# 创建一个列表来保存基类的任何派生子类

> ID：16046711
> 
> 赞同：4
> 
> 时间：2013-04-16T20:42:32.283
> 
> 标签：c#, inheritance

所以我希望设置一个抽象基类来派生子类。所有的工作都将在孩子们身上进行，但我希望孩子们能够相互参考。

这是一些伪代码：

```
public abstract class BaseClass<T> : SomeOtherClass {

    public List<BaseClass> listOfChildren;

    protected T thisChild;

    public void DoMoreStuff(){
        Debug.Log("Doing more stuff");
    }

    protected virtual void DoSomething(int i){
        listOfChildren[i].DoMoreStuff();
    }
}

public class FirstChildClass : BaseClass<FirstChildClass> {

    FirstChildClass<T>(){
        thisChild = this;
    }

    public void FirstClassStuff(){
        Debug.Log("first class stuff");
    }

}
public class SecondChildClass : BaseClass<SecondChildClass> {

    public void SecondClassStuff(){
        Debug.Log("second class stuff");
    }
} 
```

我将如何制作一个通用列表来接受任何子类？

我是否需要使用 T 对 listOfChildren 进行类型转换才能使用 DoMoreStuff()？

就其本身而言，此设置是否存在其他固有问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T21:04:41.260

我认为您使解决方案过于复杂。如果您不想在每个节点中存储任何数据 - 尝试在没有泛型的情况下解决这个问题。我将为您提供所需行为的简单直接的实现作为起点。

```
public abstract class BaseClass  {

    private IList<BaseClass> children = new List<BaseClass>();

    public void AddChild(BaseClass child)
    {
        this.children.Add(child);
    }

    protected virtual void DoMoreStuff(){
        Debug.Write("Doing more stuff");
    }

    public void DoSomething(int i){
        children[i].DoMoreStuff();
    }
}

public class FirstChildClass : BaseClass {

    protected override void DoMoreStuff(){
        Debug.Write("first class more stuff");
    }

}

public class SecondChildClass : BaseClass {

    protected override void DoMoreStuff(){
        Debug.Write("second class more stuff");
    }
} 
```

现在你可以

```
var root = new FirstChildClass();

root.AddChild(new FirstChildClass());
root.AddChild(new SecondChildClass());
root.AddChild(new FirstChildClass());

root.DoSomething(1); //will print second class more stuff
root.DoSomething(0); //will print first class more stuff 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T21:04:01.357

您需要将子**类**和子**数据**分开。子类简单地从其父类继承，为数据提供更详细的结构（例如`Animal`和`Dog`）。另一方面，子数据意味着数据所*代表*的任何内容都彼此相关（例如`Receipt`和`ReceiptLineItem`）。

通常，两者不会重叠。该类`Receipt`看起来与`ReceiptLineItem`该类完全不同，并且 the`Receipt`和 a`ExternalPurchaseOrder`彼此没有任何关系，尽管它们都继承了它们的结构`Purchase`。当它们重叠时，你就有了一个树形结构。A`Product`可以由更多`Product`的 s 组成，每个 s 又可以由更多`Product`的 s 组成。

* * *

假设您正在寻找第一种继承类型（类结构），这是我重写代码的方式：

```
public abstract class BaseClass : SomeOtherClass {

    public static List<BaseClass> listOfChildren = new List<BaseClass>();

    public void DoMoreStuff(){
        Debug.Log("Doing more stuff");
    }

    protected virtual void DoSomething(int i){
        listOfChildren[i].DoMoreStuff();
    }
}

public class FirstChildClass : BaseClass {

    FirstChildClass(){
       // Set some things unique to this class
    }

    public void FirstClassStuff(){
        Debug.Log("first class stuff");
    }

}
public class SecondChildClass : BaseClass<SecondChildClass> {

    public void SecondClassStuff(){
        Debug.Log("second class stuff");
    }
} 
```

然后，您可以访问主列表作为`BaseClass.listOfChildren`. 如果您希望所有孩子自动注册自己，您可以将其添加到`BaseClass`构造函数中：

```
protected BaseClass()
{
   listOfChildren.Add(this);
} 
```

# excel - Excel 2010 - 具有覆盖字段的值小计

> ID：16046713
> 
> 赞同：1
> 
> 时间：2013-04-16T20:42:40.613
> 
> 标签：excel, excel-formula, excel-2010, subtotal, vba

我有一个需要计算值总和的 excel 表。值可以在两个字段之一中，如果在第二个字段中，我想忽略第一个字段。

```
Row1: Default value | Override Value

Row2:       1       | 2

Row 3:      4       | no value entered

Row 4:      0       | 6

Subtotal of Values=12 
```

如果填充了覆盖值，则在小计中包括该数字，而不是默认值。如果未填充覆盖值，则在小计中包含默认值。

我需要使用 Subtotal 109，因为我有有时隐藏的字段。

是否可以直接在 excel 电子表格中使用公式而不**使用 VBA 代码**来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:13:32.000

要考虑隐藏字段，也可以试试这个：

```
=SUMPRODUCT(SUBTOTAL(109,OFFSET(A1,ROW(A1:A3)-ROW(A1),B1:B3<>""))) 
```

（例如隐藏第二行给出 8）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:50:38.997

像这样？

```
=SUMIF(B1:B3,"",A1:A3) + SUMIF(B1:B3,"<>",B1:B3) 
```

![在此处输入图像描述](https://i.stack.imgur.com/Riv5W.png)

# php - 使用定义函数的 PHP 文本格式化

> ID：16046721
> 
> 赞同：-1
> 
> 时间：2013-04-16T20:43:08.143
> 
> 标签：php

我需要使用定义显示一些文本，但文本包含换行符。当我输入文本作为参数时，它不会与换行符一起显示。有没有什么办法解决这一问题？

define('TEXT_INFORMATION', '文本位置');

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:46:45.437

**使用 nl2br** ( [http://php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php) )

它将换行符 (\n, \r, \n\r, \r\n) 替换为换行符 ( `<br />`)

```
/* Little Example */
define('TEXT_INFORMATION', 'Line 1
Line 2
Line 3');

echo nl2br(TEXT_INFORMATION); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:46:48.793

你可以使用这样的东西：

```
define('TEXT_INFORMATION', nl2br(<<<EOD
This is a text
with multiple lines
EOD
)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T20:46:52.717

为了让 PHP 识别转义字符，您需要使用双引号：-

```
define('TEXT_INFORMATION', "Place for text<br/>\n");
echo TEXT_INFORMATION; 
```

有关使用转义序列的更多信息，请参阅[手册](http://php.net/manual/en/language.types.string.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T20:47:13.813

尝试

> define("TEXT_INFORMATION", "文本位置\n");

[http://www.trans4mind.com/personal_development/phpTutorial/quotes.htm](http://www.trans4mind.com/personal_development/phpTutorial/quotes.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T20:47:36.470

如果要插入换行符，可以使用 \r 和 \n（和 \r\n）。虽然我认为你必须使用 "" 来表示 \r 和 \n 才能工作。您还可以使用 nl2br 将换行符转换为
标签。

# ruby - 如何从哈希中仅提取时间项？

> ID：16046722
> 
> 赞同：4
> 
> 时间：2013-04-16T20:43:10.180
> 
> 标签：ruby

我有一个像下面这样的哈希：

```
{"19th Apr, 2013" => :a, "20th Apr, 2013" => :b,"Tomorrow" => :c,"5:00 PM" => :d,"09:25 PM" => :e} 
```

我想要输出：

作为`{"5:00 PM" => :d,"09:25 PM" => :e}`

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T21:13:04.343

```
t = {"19th Apr, 2013" => :a, "20th Apr, 2013" => :b,"Tomorrow" => :c,"5:00 PM" => :d,"09:25 PM" => :e}

t.select { |k,v| Time.strptime(k,"%H:%M %P") rescue false }

#=>  {"5:00 PM"=>:d, "09:25 PM"=>:e} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:48:45.240

```
hash = {"19th Apr, 2013" => :a, "20th Apr, 2013" => :b,"Tomorrow" => :c,"5:00 PM" => :d,"09:25 PM" => :e}

hash.select { |k, v| k.match /\d{1,2}:\d{2} [AP]M/ } 
```

给你：

`{"5:00 PM"=>:d, "09:25 PM"=>:e}`

就“完美”正则表达式而言，请检查其他答案评论中的正则表达式战争；）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-16T20:45:18.560

更一般的方法：

```
 hash = {"19th Apr, 2013" => :a, "20th Apr, 2013" => :b,"Tomorrow" => :c,"5:00 PM" => :d,"09:25 PM" => :e , "23:23" => :f}

 hash.delete_if{|k,v| k !~ /\d{1,2}:\d\d/}
  => {"5:00 PM"=>:d, "09:25 PM"=>:e, "23:23" => :f} 
```

笔记：

*   这也允许 24 小时格式时间
*   这也处理小时只是一位数的情况

如果您不想处理 24 小时格式，请使用：

```
 hash = {"19th Apr, 2013" => :a, "20th Apr, 2013" => :b,"Tomorrow" => :c,"5:00 PM" => :d,"09:25 PM" => :e , "23:23" => :f}

 hash.delete_if{|k,v| k !~ /\d{1,2}:\d\d/ [AaPp][Mm]} # am AM pm PM
  => {"5:00 PM"=>:d, "09:25 PM"=>:e} 
```

# r - R中速率变量的回归

> ID：16046726
> 
> 赞同：5
> 
> 时间：2013-04-16T20:43:11.560
> 
> 标签：r, regression, glm, poisson

我的任务是开发一个回归模型来观察不同项目的学生注册情况。这是一个非常好的、干净的数据集，其中注册数很好地遵循泊松分布。我在 R 中拟合了一个模型（同时使用 GLM 和零膨胀泊松。）得到的残差似乎是合理的。

但是，然后我被指示将学生人数更改为“率”，计算为学生/学校人口（每所学校都有自己的人口。））现在这不再是计数变量，而是介于 0 和 1 之间的比例. 这被认为是一个程序中的“入学比例”。

这个“比率”（学生/人口）不再是泊松，但也肯定不正常。所以，我对适当的分布以及表示它的后续模型有点迷茫。

对数正态分布似乎很适合这个速率参数，但是我有很多 0 值，所以它实际上并不适合。

关于这个新参数的最佳分布形式的任何建议，以及如何在 R 中对其建模？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T22:44:25.523

正如评论中所建议的，您可以保留泊松模型并使用偏移量进行操作：

```
glm(response~predictor1+predictor2+predictor3+ ... + offset(log(population),
     family=poisson,data=...) 
```

或者您可以使用二项式 GLM，或者

```
glm(cbind(response,pop_size-response) ~ predictor1 + ... , family=binomial,
        data=...) 
```

或者

```
glm(response/pop_size ~ predictor1 + ... , family=binomial,
        weights=pop_size,
        data=...) 
```

后一种形式有时更方便，尽管使用较少。请注意，通常从 Poisson 切换到二项式会将链接函数从 log 更改为 logit，尽管您可以根据需要使用`family=binomial(link="log"))`。

使用 Poisson + offset 组合来模拟零通胀可能更容易（我不确定`pscl`最常见的 ZIP 方法包是否可以处理偏移，但我认为可以），这将比零更常见-膨胀的二项式模型。

我认为`glmmADMB`会做一个零膨胀的二项式模型，但我还没有测试过。

# java - 如何在 RAM 中使用 Java 程序中的所有文件？

> ID：16046730
> 
> 赞同：0
> 
> 时间：2013-04-16T20:43:25.363
> 
> 标签：java, jvm, jvm-arguments

有没有办法让 Java 应用程序中使用的所有文件都在 RAM 中？我不需要文件同步，只需在第一次打开文件时将文件放入 RAM 中，每次写入都会写入 RAM，每次读取都会从 RAM 中读取。基本上，我需要重新定义 Java 中的标准文件行为。有什么帮助吗？

这仅用于单元测试，我的测试需要大量文件操作（大约 15% 的时间），我想尝试一些新的东西。在一个完美的世界中，这应该在不更改我的原始代码的情况下完成（AspectJ 方面或 JVM 参数会很棒）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:52:54.423

您可以使用文件流将文件的所有字节加载到 RAM 中。
只需使用 a`byte[]`加载所有文件，然后将其关闭并访问数组。

# android - 带有颜色层的位图

> ID：16046740
> 
> 赞同：0
> 
> 时间：2013-04-16T20:44:16.103
> 
> 标签：android, colors, bitmap, layer, colorfilter

我有一个 ImageView，我在其中放置了一个位图（左），有时我想看到带有半透明蓝色层的位图（右）。我尝试使用 ColorFilter（LightingColorFilter 和 PorterDuffColorFilter），但我得到深蓝色，如何使用 ColorFilter 或其他任何东西来做到这一点？

![在此处输入图像描述](https://i.stack.imgur.com/i3Te0.jpg)

谢谢。

编辑（我试过这个和其他变种）

```
 //ColorFilter filter = new PorterDuffColorFilter(color.wather, PorterDuff.Mode.DST_OVER);
 ColorFilter filter = new LightingColorFilter(color.mul, color.wather);
 // mul = 0xFFFFFFFF and wather = 0x7000FFFF

 BitmapScaler scaler = new BitmapScaler();
 imagen.setImageBitmap(scaler.getScaled());
 imagen.setColorFilter(filter); 
```

我尝试了不同的 mul，添加值并总是得到这个： ![在此处输入图像描述](https://i.stack.imgur.com/8woPK.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:15:56.873

我已经找到 mul，添加值，color.xml 有问题，因为我使用 ID 号而不是颜色 RGB 号，大错特错。透明度（Alpha）被忽略，但我可以获得降低附加值强度的效果。

```
 int mul = 0xFFFFFF;
    int add = 0x005050;
filter = new LightingColorFilter(mul, add); 
```

感谢 Elior 的帮助。

# python - 如何将 Tkinter 按钮状态从禁用更改为正常？

> ID：16046743
> 
> 赞同：41
> 
> 时间：2013-04-16T20:44:21.457
> 
> 标签：python, button, tkinter, state

当某些事件发生时，我需要将 a 的状态更改为`Button`to `DISABLED`。`NORMAL`

该按钮当前使用以下代码在 DISABLED 状态下创建：

```
self.x = Button(self.dialog, text="Download", state=DISABLED,
                command=self.download).pack(side=LEFT) 
```

我怎样才能将状态更改为`NORMAL`？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-04-16T20:45:59.443

您只需将`state`按钮设置`self.x`为`normal`：

```
self.x['state'] = 'normal' 
```

或者

```
self.x.config(state="normal") 
```

此代码将进入将导致 Button 启用的事件的回调中。

* * *

此外，正确的代码应该是：

```
self.x = Button(self.dialog, text="Download", state=DISABLED, command=self.download)
self.x.pack(side=LEFT) 
```

返回中的方法`pack`，您将其分配给. 您实际上想将返回值分配给，然后在下一行中使用。`Button(...).pack()``None``self.x``Button(...)``self.x``self.x.pack()`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-21T09:26:36.957

我认为更改小部件选项的快速方法是使用该`configure`方法。

在您的情况下，它看起来像这样：

```
self.x.configure(state=NORMAL) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-24T04:33:39.310

这对我有用。我不确定为什么语法不同，但是尝试激活、非活动、停用、禁用等的每种组合都非常令人沮丧。在小写大写的引号中，在括号中的括号中的引号中等等。好吧，这里是出于某种原因，对我来说获胜的组合..与其他人不同？

```
import tkinter

class App(object):
    def __init__(self):
        self.tree = None
        self._setup_widgets()

    def _setup_widgets(self):
        butts = tkinter.Button(text = "add line", state="disabled")
        butts.grid()

def main():  
    root = tkinter.Tk()
    app = App()
    root.mainloop()

if __name__ == "__main__":
    main() 
```

# c - C 帮助：MSVC 调试器收到“错误读取字符串字符”错误...但只是有时

> ID：16046749
> 
> 赞同：0
> 
> 时间：2013-04-16T20:45:13.523
> 
> 标签：c, string, compiler-errors

我正在制作一个 5 张牌扑克游戏，但在调试器中运行程序时不断出现错误。

我通过调试器运行了这段代码 8 次，其中我得到了 5 次错误——没有更改任何代码。什么可能导致它仅有时不正确地读取字符串？请帮我弄清楚。

必要代码：

-初始化

```
char *suit[4] = {"Hearts", "Diamonds", "Clubs", "Spades"};
char *face[13] = {"Ace", "Two", "Three", "Four", "Five", "Six", "Seven", 
"Eight", "Nine", "Ten", "Jack", "Queen", "King"};
Card p1_hand[5] = {{0,0,0}}; 
```

- main 中的函数调用

```
print_hand(face, suit, p1_hand); 
```

-头文件中的函数 // Card struct

```
typedef struct card
{
int card_number;
int face_index;
int suit_index;
} Card;

void print_hand (char *face[4], char *suit[13], Card p1_hand[5]); 
```

-函数本身

```
void print_hand (char *face[], char *suit[], Card p1_hand[5])
{
int i = 0, j = 0, k = 0;

printf("You're hand:\n");
for(i = 0; i < 5; i++)
{
    j = p1_hand[i].face_index;
    k = p1_hand[i].suit_index;
    printf("%d: %5s of %-8s\n", (i+1), face[j], suit[k]);
}
} 
```

我在第一个 printf 之前放置了一个调试器停止点，有时我会从中得到它

*   `face 0x0040fb5c {0x0000000a Error reading characters of string.}`

但其他时候我得到这个......根本不改变代码

*   `face 0x002afe40 {0x013a787c "Ace"}` （哪个是对的）

请帮我解决这个问题！这让我疯狂。

**编辑** **我的代码**

**主程序**

```
#include "poker.h"

int main (void)
{
//initialize arrays
char *suit[4] = {"Hearts", "Diamonds", "Clubs", "Spades"};
char *face[13] = {"Ace", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", 
"Nine", "Ten", "Jack", "Queen", "King"};
int deck[4][13] = {0};
int num_face_player_1[13] = {0}, num_face_dealer[13] = {0};
int num_suit_player_1[4] = {0}, num_suit_dealer[4] = {0};

//Players' hands
Card p1_hand[5] = {{0,0,0}}, dealer_hand[5] = {{0,0,0}};

//Other
int count = 0;
int menu = 0, choice_menu = 0;
int invalid = 0;

srand ((unsigned) time (NULL));

//MENU
do //menu loop
{
    menu = print_menu ();
    choice_menu = 4; //so its not 0;
    choice_menu = menu_choice (menu);
} while (choice_menu ==0);
if (choice_menu == 2) //closes the game
{
    return 0;
}

system ("cls");
shuffle (deck);
deal (deck, p1_hand);

do //checks to make sure the dealer doesnt have any of the same cards
{
    deal (deck, dealer_hand);
    invalid = 0;
    for(count = 0; count < 5; count++)
    {
        if ((dealer_hand[count].card_number == p1_hand[count].card_number) && (dealer_hand[count].face_index == p1_hand[count].face_index) && (dealer_hand[count].suit_index == p1_hand[count].suit_index))
        {
            invalid = 1;
        }
    }
} while (invalid == 1);

for(count = 0; count < 4; count++)
{
    printf("%s\n", *suit[count]);
}
for(count = 0; count < 13; count++)
{
    printf("%s\n", *face[count]);
}
print_hand(face, suit, p1_hand);

//these populate the number of facecards / suits arrays in order to see what hand you got
pop_num_faces(num_face_player_1, p1_hand);
pop_num_faces(num_face_dealer, dealer_hand);
pop_num_suit(num_suit_player_1, p1_hand);
pop_num_suit(num_suit_dealer, dealer_hand);

return 0;
} 
```

**扑克.h**

```
#ifndef POKER_H
#define POKER_H

#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <conio.h>
#include <dos.h>

typedef struct card
{
    int card_number;
    int face_index;
    int suit_index;
} Card;

int print_menu (void);
int menu_choice (int menu_choice);
void press_any_key (void);
void shuffle (int wDeck[4][13]);
void deal(const int wDeck[][13], Card p_hand[5]);
void pop_num_faces (int num_faces[], Card hand[5]);
void pop_num_suit (int num_suit[4], Card hand[5]);
void print_hand (char *face[4], char *suit[13], Card p1_hand[5]);
void check_hand(Card p1_hand[5], int num_suit[], int num_faces[]);

#endif 
```

**扑克.c**

```
#include "poker.h"

//prints menu
int print_menu (void)

//decides what to do with the menu choice
int menu_choice (int menu_choice)
//Shuffles the deck
void shuffle (int wDeck[4][13])
{
int row = 0;
int column = 0;
int card = 0;

for (card = 1; card <= 52; card++)
{
    do
    {
        row = rand () % 4;
        column = rand () % 13;
    } while (wDeck[row][column] != 0);

    wDeck[row][column] = card;
}
}

//deals the deck to the player
void deal(const int wDeck[][13], Card p_hand[5])
{
int row = 0;
int column = 0;
int card = 0;
int index = 0;

for(card = 1; card < 52; card++)
{
    for (row = 0; row <4; row++)
    {
        for (column = 0; column < 13; column++)
        {
            if(wDeck[row][column] == card)
            {
                p_hand[index].card_number = card;
                p_hand[index].face_index = column;
                p_hand[index].suit_index = row;
            }
        }   
    }
    index++;
}
}

//populates num faces
void pop_num_faces (int num_faces[], Card hand[5])
{
int i = 0;

//program keeps populating num_faces with random numbers, so i have to  re-initialize here
    num_faces[0] = 0;
    num_faces[1] = 0;
    num_faces[2] = 0;
    num_faces[3] = 0;
    num_faces[4] = 0;
    num_faces[5] = 0;
    num_faces[6] = 0;
    num_faces[7] = 0;
    num_faces[8] = 0;
    num_faces[9] = 0;
    num_faces[10] = 0;
    num_faces[11] = 0;
    num_faces[12] = 0;

for(i = 0; i < 5; i++)
{
    switch(hand[i].face_index)
    {
    case 0: num_faces[0] ++;
        break;
    case 1: num_faces[1] ++;
        break;
    case 2: num_faces[2] ++;
        break;
    case 3: num_faces[3] ++;
        break;
    case 4: num_faces[4] ++;
        break;
    case 5: num_faces[5] ++;
        break;
    case 6: num_faces[6] ++;
        break;
    case 7: num_faces[7] ++;
        break;
    case 8: num_faces[8] ++;
        break;
    case 9: num_faces[9] ++;
        break;
    case 10: num_faces[10] ++;
        break;
    case 11: num_faces[11] ++;
        break;
    case 12: num_faces[12] ++;
        break;
    }
}
}

//populates num_suit
void pop_num_suit (int num_suit[4], Card hand[5])
{
int i = 0;
num_suit[0] = 0;
num_suit[1] = 0;
num_suit[2] = 0;
num_suit[3] = 0;

for(i = 0; i < 5; i++)
{
    switch(hand[i].suit_index)
    {
    case 0: num_suit[0] ++;
        break;
    case 1: num_suit[1] ++;
        break;
    case 2: num_suit[2] ++;
        break;
    case 3: num_suit[3] ++;
        break;
    }
}
}

void print_hand (char *face[4], char *suit[13], Card p1_hand[5])
{
printf("You're hand:\n");
for(i = 0; i < 5; i++)
{
    j = p1_hand[i].face_index;
    k = p1_hand[i].suit_index;
    printf("--DEBUG--: %d %d %d\n", p1_hand[i].card_number, j, k);
    printf("%d: %5s of %-8s\n", (i+1), face[j], suit[k]);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T23:16:17.967

问题出在`deal()`功能上。这是它的调试版本：

```
void deal(int wDeck[][13], Card p_hand[5])
{
    int row = 0;
    int column = 0;
    int card = 0;
    int index = 0;

    for (card = 1; card < 52; card++)
    {
        for (row = 0; row < 4; row++)
        {
            for (column = 0; column < 13; column++)
            {
                if (wDeck[row][column] == card)
                {
                    p_hand[index].card_number = card;
                    p_hand[index].face_index = column;
                    p_hand[index].suit_index = row;
                    printf("Assign %d\n", index);
                }
            }
        }
        index++;
        printf("Index: %d\n", index);
    }
} 
```

运行时，`index`从 1 变为 52；可惜`p_hand`数组只有 5 个元素！并且`Assign`被多次打印。您的数组索引已经严重失控。

* * *

顺便说一句，你太喜欢开关了。这个：

```
void pop_num_suit (int num_suit[4], Card hand[5])
{
    int i = 0;
    num_suit[0] = 0;
    num_suit[1] = 0;
    num_suit[2] = 0;
    num_suit[3] = 0;

    for(i = 0; i < 5; i++)
    {
        switch(hand[i].suit_index)
        {
        case 0: num_suit[0] ++;
            break;
        case 1: num_suit[1] ++;
            break;
        case 2: num_suit[2] ++;
            break;
        case 3: num_suit[3] ++;
            break;
        }
    }
} 
```

应该：

```
void pop_num_suit(int num_suit[4], Card hand[5])
{
    int i;
    for (i = 0; i < 4; i++)
        num_suit[i] = 0;
    for (i = 0; i < 5; i++)
        num_suit[hand[i].suit_index]++;
} 
```

节省的空间`pop_num_faces()`更加引人注目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:10:47.850

It's a bit big for a comment, hence a CW answer.

```
void print_hand(char *face[], char *suit[], Card p1_hand[5])
{
    printf("Your hand:\n");
    for (int i = 0; i < 5; i++)
    {
        int j = p1_hand[i].face_index;
        int k = p1_hand[i].suit_index;
        printf("--DEBUG--: %d %d %d\n", p1_hand[i].card_number, j, k);
        printf("%d: %5s of %-8s\n", (i+1), face[j], suit[k]);
    }
} 
```

This prints the data from each entry of `p1_hand` before trying to use that data. This may tell you something about what's going on. You could add assertions as an alternative, or addition:

```
 assert(j >= 0 && j < 13);
        assert(k >= 0 && j < 4); 
```

* * *

### SSCCE Code

This is more nearly an SSCCE — just over 100 lines of code that crash on Unix in the same general way it was crashing on Windows, in the `print_hand()` function.

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

typedef struct card
{
    int card_number;
    int face_index;
    int suit_index;
} Card;

void shuffle(int wDeck[4][13]);
void deal(int wDeck[][13], Card p_hand[5]);
void print_hand(char *face[4], char *suit[13], Card p1_hand[5]);

static void print_deck(int deck[4][13]);

int main (void)
{
    char *suit[4] = {"Hearts", "Diamonds", "Clubs", "Spades"};
    char *face[13] = {"Ace", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight",
        "Nine", "Ten", "Jack", "Queen", "King"};
    int deck[4][13] = { { 0 } };
    Card p1_hand[5] = {{0,0,0}};

    srand ((unsigned) time (NULL));

    printf("Shuffle\n");
    shuffle(deck);
    print_deck(deck);

    printf("Deal player\n");
    deal(deck, p1_hand);

    printf("Print player's hand\n");
    print_hand(face, suit, p1_hand);

    return 0;
}

static void print_deck(int deck[4][13])
{
    for (int x = 0; x < 4; x++)
    {
        for (int z = 0; z < 13; z++)
            printf(" %2d", deck[x][z]);
        putchar('\n');
    }
}

void shuffle(int wDeck[4][13])
{
    int row = 0;
    int column = 0;
    int card = 0;

    for (card = 1; card <= 52; card++)
    {
        do
        {
            row = rand () % 4;
            column = rand () % 13;
        } while (wDeck[row][column] != 0);

        wDeck[row][column] = card;
    }
}

void deal(int wDeck[][13], Card p_hand[5])
{
    int row = 0;
    int column = 0;
    int card = 0;
    int index = 0;

    for (card = 1; card < 52; card++)
    {
        for (row = 0; row <4; row++)
        {
            for (column = 0; column < 13; column++)
            {
                if (wDeck[row][column] == card)
                {
                    p_hand[index].card_number = card;
                    p_hand[index].face_index = column;
                    p_hand[index].suit_index = row;
                }
            }
        }
        index++;
    }
}

void print_hand(char *face[4], char *suit[13], Card p1_hand[5])
{
    int i = 0, j = 0, k = 0;

    printf("Your hand:\n");
    for (i = 0; i < 5; i++)
    {
        j = p1_hand[i].face_index;
        k = p1_hand[i].suit_index;
        printf("--DEBUG--: %d %d %d\n", p1_hand[i].card_number, j, k);
        printf("%d: %5s of %-8s\n", (i+1), face[j], suit[k]);
    }
} 
```

The good news is that the `shuffle()` function appears to be OK.

# git - 无法禁用 git log-in shell 以防止 shell 访问

> ID：16046757
> 
> 赞同：2
> 
> 时间：2013-04-16T20:45:32.523
> 
> 标签：git, raspberry-pi, gitolite

我已经在我的树莓派（Debian，wheezy）上设置了 git+gitolite 我有一个 git 用户，想通过禁用它的登录 shell 来增加一些额外的安全性。根据那里的文件，它应该是一帆风顺的，所以我做到了；

```
sudo usermod -s /usr/bin/git-shell git 
```

我将 /usr/bin/git-shells 添加到我的 /etc/shells 文件中。但是，当我运行 git clone 或 ssh -vT git@myhost 时，我得到的错误是

```
fatal: unrecognized command '/home/git/bin/gitolite-shell MYUSERNAME' 
```

我还将 shell 更改为 gitolite-shell，但这给了我一个错误，指出“-c”是一个无法识别的命令。

这是其他人经历过并可以提供帮助的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:15:05.047

我给自己的答案是删除 git 用户的密码

```
sudo passwd -d git 
```

从而禁用登录。这似乎按预期工作。

# eclipse - * 在 Eclipse 中的 svn 版本图中的节点中标记

> ID：16046758
> 
> 赞同：0
> 
> 时间：2013-04-16T20:45:35.430
> 
> 标签：eclipse, svn, subclipse

谁能解释一下节点上*符号的含义及其用法。我在进行合并操作后看到了这一点。

如果有人需要，Stackoverflow 不允许为我发布图片，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:00:05.310

我认为它显示了您创建的标签或分支中包含的修订版。例如，我有一个修订版为 3*、10、13、32*、34* 的文件，并且我从我的主干创建了 3 个标签。这些标签是使用修订版 8、33 和 35 创建的。

所以修订版 3 包含在我使用修订版 8 创建的标签中，修订版 32 包含在我的标签中，修订版 33 等等。

修订版 10 和 13 未标有 *，因为标有更高的修订版 32。

由于这个事实，我认为它与标签和/或分支的创建有关。

我希望你能理解我的解释...

# controller - Sencha Touch 2.1 在Controller中通过Ref获取视图

> ID：16046767
> 
> 赞同：2
> 
> 时间：2013-04-16T20:46:18.280
> 
> 标签：controller, ref, sencha-touch-2.1

尝试以编程方式将视图推送到视口上的主导航视图中时，出现以下错误：

Uncaught TypeError: Object [object Object] has no method 'getMainPanel' 当调用 MainController.js 文件中的以下行时：

```
var mainnav = this.getMainPanel(); 
```

我只是想通过 xtype 获取导航视图的引用，以便我可以根据数据调用是否返回数据来执行 mainnav.push('viewName')。数据和数据调用工作正常，我可以手动将所需的视图添加到主视图端口，使导航视图毫无价值，这不是我的意图。

我尝试通过 xtype、'MainPanel' 以及分配和 id、id: 'MainPanel' 添加“Ref”，并在控制器中尝试：

```
refs: {
      mainPanel: 'MainPanel'
} 
```

并按 ID：

参考：{主面板：'#MainPanel'}

没关系，错误是一样的。

作为参考，我尝试遵循以下资源中描述的情况：

[http://docs.sencha.com/touch/2.1.1/#!/guide/controllers](http://docs.sencha.com/touch/2.1.1/#!/guide/controllers)

[http://docs.sencha.com/touch/2.0.2/#!/api/Ext.ComponentQuery](http://docs.sencha.com/touch/2.0.2/#!/api/Ext.ComponentQuery)

[http://www.sencha.com/forum/showthread.php?179143-View-reference-getter-undefined](http://www.sencha.com/forum/showthread.php?179143-View-reference-getter-undefined)

[Sencha Touch 2 - 无法从控制器获取参考视图](https://stackoverflow.com/questions/10865519/sencha-touch-2-unable-to-get-ref-view-from-controller)

[Sencha Touch 2.0 Controller refs 属性不起作用？](https://stackoverflow.com/questions/9621029/sencha-touch-2-0-controller-refs-attribute-not-working)

[Sencha Touch 2.0 和navigation.View - MVC](https://stackoverflow.com/questions/10339458/sencha-touch-2-0-and-navigation-view-mvc)

这是我的代码：

应用程序.js

```
Ext.application({
name: 'AddCharSheet',
views: ['Main'],
models: ['CharacterSelectModel'],
stores: ['CharacterSelectStore'],
controllers: ['MainController'],

launch: function(){
    Ext.Viewport.add({
        xtype: 'MainPanel'
    });
}
}); 
```

主.js

```
 Ext.define('AddCharSheet.view.Main', {
    extend: 'Ext.navigation.View',
    requires: ['AddCharSheet.view.CharacterSelect', 'AddCharSheet.view.AddNewCharacter', 'Ext.Toolbar', 'Ext.Panel'],
    xtype: 'MainPanel',
    config: {

    }
    }); 
```

主控制器.js

```
Ext.define('AddCharSheet.controller.MainController',{
Extend: 'Ext.app.Controller',

config: {
    stores: ['AddCharSheet.store.CharacterSelectStore'],
    models: ['AddCharSheet.model.CharacterSelectModel'],
    views: ['AddCharSheet.view.AddNewCharacter', 'AddCharSheet.view.CharacterSelect'],

    refs: {
        mainPanel: 'MainPanel'
    },
    control: {

    },
    launch: function() {
    }
},

init: function(){
    var chs = Ext.getStore('charSelStore');
    var mainnav = this.getMainPanel();
    chs.load({
        callback: function(recs, operation){
            if(this.getCount() > 0){
                mainnav.push('CharList');
            }
            else{
                mainnav.push('NewCharacter');
            }
        }
    });
}
}); 
```

更新 Main.js 并更新 MainController.js

主.js

```
Ext.define('AddCharSheet.view.Main', {
    extend: 'Ext.navigation.View',
    requires: ['AddCharSheet.view.CharacterSelect', 'AddCharSheet.view.AddNewCharacter', 'Ext.Toolbar', 'Ext.Panel'],
    xtype: 'MainPanel',
    config: {
        itemId: 'mainpanel'
    }
}); 
```

主控制器.js

```
Ext.define('AddCharSheet.controller.MainController',{
    Extend: 'Ext.app.Controller',

    config: {
        stores: ['AddCharSheet.store.CharacterSelectStore'],
        models: ['AddCharSheet.model.CharacterSelectModel'],
        views: ['AddCharSheet.view.AddNewCharacter', 'AddCharSheet.view.CharacterSelect'],

        refs: {
            mainPanel: {
                autoCreate: true,
                selector: '#mainpanel',
                xtype: 'MainPanel'
            }
        },
        control: {

        },
        launch: function() {
        }
    },

    init: function(){
        var chs = Ext.getStore('charSelStore');
        var mainnav = this.getMainPanel();
        chs.load({
            callback: function(recs, operation){
                if(this.getCount() > 0){
                    mainnav.push({xtype: 'CharList'});
                }
                else{
                    mainnav.push({ xtype: 'NewCharacter'});
                }
            }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:20:32.433

您想将`itemId`配置分配给您的`Main`视图。所以：

```
Ext.define('AddCharSheet.view.Main', {
    extend: 'Ext.navigation.View',
    requires: ['AddCharSheet.view.CharacterSelect', 'AddCharSheet.view.AddNewCharacter',        'Ext.Toolbar', 'Ext.Panel'],
    xtype: 'MainPanel',
    config: {
        ...,
        itemId: 'mainpanel',
        ...
    }
}); 
```

然后在您的控制器中，您`Main`通过`ref`. 所以：

```
Ext.define('AddCharSheet.controller.MainController',{
    Extend: 'Ext.app.Controller',

    config: {
        stores: ['AddCharSheet.store.CharacterSelectStore'],
        models: ['AddCharSheet.model.CharacterSelectModel'],
        views: ['AddCharSheet.view.AddNewCharacter', 'AddCharSheet.view.CharacterSelect'],

        refs: {
            mainPanel : {
                autoCreate: true,
                selector: '#mainpanel',
                xtype: 'MainPanel'
            },
        },
        control: {

        },
        launch: function() {

        }
},

init: function(){
    var chs = Ext.getStore('charSelStore');
    var mainnav = this.getMainPanel();
    chs.load({
        callback: function(recs, operation){
            if(this.getCount() > 0){
                mainnav.push('CharList');
            }
            else{
                mainnav.push('NewCharacter');
            }
        }
    });
}

}); 
```

现在你应该可以做`var mainnav = this.getMainPanel();`

此外，您推动新观点的方式也是错误的。`String`当您应该推动a 时，您正在通过 a `Object`。检查[文档](http://docs.sencha.com/touch/2.1.1/#!/api/Ext.navigation.View-method-push)。

所以在你的情况下，你可能想要这样做：

```
mainnav.push({  
    xtype:'CharList'
}); 
```

和

```
mainnav.push({  
    xtype:'NewCharacter'
}); 
```

假设`CharList`和`NewCharacter`是`xtypes`各自观点的。

**编辑：** 好的，如果您仍然遇到同样的问题，可能是因为您在`init`函数中执行此操作。尝试将您的逻辑移至`launch`函数。事实证明，该`init`函数在应用程序启动之前被调用。[http://docs.sencha.com/touch/2.1.1/#!/api/Ext.app.Controller-cfg-init](http://docs.sencha.com/touch/2.1.1/#!/api/Ext.app.Controller-cfg-init)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T14:11:49.617

实际上，当您 `mainnav = this.getMainPanel();`在函数 init() 内部调用时，尚未创建 MainPanel 视图，这就是您未定义的原因，请尝试使用单击处理程序执行此操作，您将看到这将起作用，因为所有视图都将在点击的那一刻。

尝试这样的事情：

```
Ext.define('IT.controller.UserController', {
    extend: 'Ext.app.Controller',
    views: [
        'user.authentication'
    ],
    refs: [
        {
            ref: 'Authentication',
            selector: 'Authentication',
        }
    ],
    init: function() {
        console.log('Initialized Users');
        var me = this;
        me.control(
            {
                '#login-user-btn': {
                    click: me.handleLoginUser
                }
            }
            );
        },
    handleLoginUser: function(button, e) {
        alert('Ok');
        //var form= button.up('form').getForm();
        var form = this.getAuthentication();
        alert(form);
    }
}) 
```

# java - java - 坐标成数组

> ID：16046768
> 
> 赞同：0
> 
> 时间：2013-04-16T20:46:29.717
> 
> 标签：java

我试图弄清楚如何将这些矩形坐标放入一个数组中（使用循环），但我无法让它们正确。数组中的值默认为“false”。例如，如果坐标为 0，则 24 blockCoords[0][1] 应该为“true”。对不起我的英语，我不是母语：P

```
boolean[ ][ ] blockCoords = new boolean[20][10];//the array

//added the code to create the array
  private void createArray() {
        for(int i=0;i<20;i++) {
             for(int j=0;j<10;j++) {
                  blockCoords[i][j]=false;
          }
      }
  }
//b is the block
int y1 = b.getY();//get the coordinates of the top of a block
int y2 = b.getHeight();//the height of a block
int x1 = b.getX();
int x2 = b.getWidth();
int numHorizontal = 10-((240-x2)/24);//calculates how many blocks there are - 24 is the width and the height of a block - 240/480 are the dimensions
int numVertical = 20-((480-y2)/24);
int col=10-((240-x1)/24);//in which column does the block's coordinates start in
int row=((480-y1)/24)-1;// same for the row 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:57:25.000

如果我正确理解您的问题：

```
for(int i = row; i < numVertical; i++){
    for(int j = col; j < numHorizontal; j++){
        blockCoords[i][j] = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:52:32.947

您永远不会为数组 blockCoords 分配任何值，因此它永远不会假定除 false 之外的任何其他值。我怀疑您打算使用 x 和 y 坐标为数组分配值。

# python - 脚本删除 C:\Windows\CSC\v2.0.6\namespace

> ID：16046771
> 
> 赞同：-4
> 
> 时间：2013-04-16T20:46:47.223
> 
> 标签：python, windows

我正在尝试创建一个 Python 脚本来删除`C:\Windows\CSC\v2.0.6\namespace` 我需要一个想法下的所有内容。要在命令行中执行此操作，我必须先转到 cmd，然后再`psexec -s cmd`转到 `C:\Windows\CSC\v2.0.6\namespace`rd *那里的任何文件夹。我想要创建一个脚本以删除所有..任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:52:26.043

此代码应删除目录中的所有文件或目录：

```
import os, shutil
folder = "C:\Windows\CSC\v2.0.6\namespace"
for item in os.listdir(folder):
    path = os.path.join(folder, item)
    try:
        os.unlink(path) # delete if the item is a file
    except Exception as e:
        shutil.rmtree(path) # delete if the item is a folder 
```

之前已经[回答](https://stackoverflow.com/questions/185936/delete-folder-contents-in-python)了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:53:07.470

一个[简单的谷歌搜索](http://www.tutorialspoint.com/python/python_files_io.htm)和一些修改：

```
import os
mainPath = "C:\Windows\CSC\v2.0.6\namespace"
files = os.listdir(mainPath)
for f in files:
    os.remove('{}/{}'.format(mainPath, f)) 
```

如果你想递归地找到所有文件然后删除它们（这是我昨天写的一个小脚本）：

```
import os, os.path
def getAllFiles(mainPath):
    subPaths = os.listdir(mainPath)
    for path in subPaths:
        pathDir = '{}\{}'.format(mainPath, path)
        if os.path.isdir(pathDir):
            paths.extend(getAllFiles(pathDir, paths))
        else:
                paths.append(pathDir)
    return paths 
```

那么你可以这样做：

```
files = getAllFiles(mainPath)
for f in files:
    os.remove(f) 
```

`MemoryError`注意：如果子文件夹太多（它会创建很多递归节点），递归算法会变得有点慢（并且可能会提高 a ）。

为避免这种情况，您可以将递归函数用作辅助函数，由主迭代函数调用：

```
def getDirs(path):
    sub = os.listdir(path)
    paths = []
    for p in sub:
        pDir = '{}\{}'.format(path, p)
        if os.path.isdir(pDir):
            paths.extend(getAllFiles(pDir, paths)) # getAllFiles is the same as above
        else:
            paths.append(pDir)
    return paths 
```

但是，对于非常大的子文件夹，它会变得很慢。对我来说，完成`C:\Python27\Lib`大约需要 6-7 秒（它里面有大约 5k+ 个文件，还有很多很多子文件夹）。

# r - 将 t.test 结果输出到 R 中的数据框

> ID：16046775
> 
> 赞同：3
> 
> 时间：2013-04-16T20:47:00.903
> 
> 标签：r

我有一个数据框，其中包含与组相关的个人的值。我想确定那些平均值大于平均值加上整个数据集的一个标准差的组。为此，我正在计算整个数据帧的平均值和标准差，然后运行成对 t 检验以与每个组的平均值进行比较。我在输出结果时遇到了麻烦。

```
> head(df)

  individual  group  value
1 11559638    75     0.371
2 11559641    75     0.367
3 11559648    75     0.410
4 11559650    75     0.417
5 11559652    75     0.440
6 11559654    75     0.395

> allvalues <- data.frame(mean=rep(mean(df$value), length(df$individual)), sd=rep(sd(df$value),  length(df$individual)))

> valueplus <- with(df, by(df, df$individual, function(x) t.test(allvalues$mean + allvalues$sd, df$value, data=x)))

> tmpplus

-------------------------------------------------------------------------- 
df$individuals: 10
NULL
-------------------------------------------------------------------------- 
df$individuals: 20
NULL
-------------------------------------------------------------------------- 
df$individuals: 21

    Welch Two Sample t-test

data:  allvalues$mean + allvalues$sd and df$value 
t = 84.5217, df = 4999, p-value < 2.2e-16
alternative hypothesis: true difference in means is not equal to 0 
95 percent confidence interval:
 0.04676957 0.04899068 
sample estimates:
mean of x mean of y 
0.4719964 0.4241162 
```

如何将结果放入数据框中？我希望输出看起来像这样：

```
 groups  t        df     p-value  mean.x    mean.y
    1 10      NULL     NULL   NULL     NULL      NULL
    2 20      NULL     NULL   NULL     NULL      NULL 
    3 21      84.5217  4999   2.2e-16  0.4719964 0.4241162 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-05-31T19:53:10.117

从纯粹的编程角度来看，您是在询问如何将输出`t.test`转换为`data.frame`. 尝试以下，使用`mtcars`：

```
library(broom)
tidy(t.test(mtcars$mpg))
  estimate statistic      p.value parameter conf.low conf.high
1 20.09062  18.85693 1.526151e-18        31 17.91768  22.26357 
```

或者对于多个组：

```
library(dplyr)
mtcars %>% group_by(vs) %>% do(tidy(t.test(.$mpg)))
# A tibble: 2 x 9
# Groups:   vs [2]
     vs estimate statistic  p.value parameter conf.low conf.high method            alternative
  <dbl>    <dbl>     <dbl>    <dbl>     <dbl>    <dbl>     <dbl> <chr>             <chr>      
1     0     16.6      18.3 1.32e-12        17     14.7      18.5 One Sample t-test two.sided  
2     1     24.6      17.1 2.75e-10        13     21.5      27.7 One Sample t-test two.sided 
```

不用说，您需要调整代码以适合您的特定设置。

# vb.net - 如何在 Mono 中读取和写入文件

> ID：16046776
> 
> 赞同：1
> 
> 时间：2013-04-16T20:47:07.077
> 
> 标签：vb.net, mono, .net

我在 Ubuntu 12.10 上使用 Mono。我的应用程序需要读取和写入文本文档并检查是否存在特定文件。我无法确定 Mono 是否支持此功能，但以下代码会导致应用程序根本无法运行。

```
Dim objReader As New System.IO.StreamReader(Application.StartupPath + "\Data\programdata.txt")

Do While objReader.Peek() <> -1

    Form1.ListBox1.Items.Add(objReader.ReadLine())

Loop 
```

编辑：已解决，我只是忘了使用正斜杠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T02:38:08.950

Linux 使用正斜杠作为路径分隔符，而我在 Windows 上使用反斜杠。这导致应用程序在 Mono for Linux 上崩溃。当更改为正斜杠时，应用程序运行良好。

# jquery - 检测音频文件何时播放或结束

> ID：16046780
> 
> 赞同：0
> 
> 时间：2013-04-16T20:47:17.177
> 
> 标签：jquery, html, audio

我已经问过一个与此非常相似的问题，但我无法让建议的代码工作。jQuery是：

```
 jQuery("span").click(function (event) {
    var elementID = event.target.id;
    var oggVar = ("audio/"+elementID +".ogg");
    var audioElement = document.createElement("audio");
    audioElement.setAttribute("src", oggVar); 
    audioElement.play(); 
  }); 
```

这可以正常工作，问题是即使正在播放另一个音频文件也可以正常工作。我想防止这种情况发生，以便在播放另一个音频文件时不会运行音频文件。很抱歉不得不重新审视这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:01:52.697

之前已经回答过这个问题，但让我试一试。您将要检查是否正在播放任何音频剪辑。我不认为有一种内置的 isPlaying 逻辑，但我知道您可以使用事件侦听器。

```
var audioIsPlaying = false;

jQuery("span").click(function (event) {
    if(audioIsPlaying != true) {
        var elementID = event.target.id;
        var oggVar = ("audio/"+elementID +".ogg");
        var audioElement = document.createElement("audio");
        audioElement.setAttribute("src", oggVar); 
        audioElement.play();
        audioIsPlaying = true;
        audioElement.addEventListener("ended", function() {
            audioIsPlaying = false;    
        });
    } else {
        //still playing
    }
}); 
```

# php - 这个变量 $q 是什么？

> ID：16046781
> 
> 赞同：-5
> 
> 时间：2013-04-16T20:47:23.563
> 
> 标签：php, database

```
$sql="SELECT * FROM user WHERE id = '".$q."'"; 
```

围绕变量的这些周期有什么作用？我是php新手，请原谅我的无知。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:48:41.217

这称为字符串连接。`$q`是一个变量。

> ```
> <?php
> $q = 1;
> $sql="SELECT * FROM user WHERE id = '".$q."'";
> // now $sql is SELECT * FROM user WHERE id = '1'
> ?> 
> ```

[见手册](http://php.net/manual/en/language.operators.string.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:49:11.953

很难说出 $q 的真正含义，但这些点用于字符串连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T20:49:13.140

`$q`是（应该是）一些先前定义的变量。

句点是运算符。它们连接表达式的不同部分`"SELECT * FROM user WHERE id = '"`：`$q`和`"'"`。

例如，如果`$q`现在是 1，则生成的字符串将是：

```
SELECT * FROM user WHERE id = '1' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T20:49:44.797

`$q`只是在代码中某个点定义的变量。

句点用于将变量连接（连接）到字符串上，但在这种情况下，由于使用双引号，它们不是必需的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T20:50:29.063

点（句点）连接字符串。变量 $q 是它在代码中某处分配的任何内容。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T20:50:39.203

$q 可以是任何内容，具体取决于上下文。如果您使用的是系统，$q 很可能实际上是 $_GET['q']。句点用于连接字符串。在其他语言中，这通常看起来像 "this is " + value + " :D" 而在 PHP 中看起来像 "this is " 。价值 。“：D”

# actionscript-3 - 有没有办法在 Flash Builder 中生成真正的随机数？

> ID：16046782
> 
> 赞同：2
> 
> 时间：2013-04-16T20:47:25.343
> 
> 标签：actionscript-3, flash, flash-builder

我有一个项目，它生成用于从测试库中选择项目的随机数字符串。我注意到某些项目的选择率过高，因此我决定检查 Math.Random 的“随机性”。以下代码生成随机排序的数字 0 到 n-1 列表。然后它计算第一项为 0、1、2、...、n-1 的次数。您可以使用水平滑块更改生成的样本数。我产生的结果似乎表明随机数根本不是随机的 例如，如果我选择 100 个六位数字符串的样本，我得到以下分布，表明 0 和 5 的表示率大大低于：11,23， 15,18,24,9 这种模式在我重新运行模拟时成立。我' 我检查了我的代码，但非常感谢其他人对此准确性的见解。我听说 AS3 不会产生真正的随机数，但它们真的会这么糟糕吗？

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" minWidth="955" minHeight="600" >
    <mx:Script>
        <![CDATA[
            import mx.events.ListEvent;
            private var startingArray:Array = [];
            private var questionsArray:Array;
            private var countArray:Array;
            private var randomNumbers:int = 3;
            private function calculate():void{
                countArray = [0,0,0,0,0,0,0,0,0,0];
                for( var i:int = 0; i < slider.value; i++){
                    questionsArray = [];//Reset the list of questions
                    createRandomListOfQuestions(randomNumbers);
                }
                result.text = String(countArray);
            }
            public function createRandomListOfQuestions(_numQuestions:int):void{
                //Create an array containing the sequence of test questions
                var numQuestions:int=_numQuestions;
                //Reset the array
                startingArray=[];//Contains a randomized question order
                for (var i:int=0;i<numQuestions; i++){//Create an array of question numbers starting at 1
                    var count:int = 0
                    startingArray.push(i);
                }
                    //splice() removes one or more elements from an array and returns the deleted elements, 
                    //here only one (as specified in the second argument)
                while (startingArray.length > 0) {//Create a randomized list (questionsArray) from startingArray 
                    var val:int =startingArray.splice(Math.round(Math.random() * (startingArray.length - 1)), 1)
                    questionsArray.push(val);
                    if(count == 0){
                        countArray[val] += 1
                        count++
                    }
                }
                questionsArrayText.text += String(questionsArray) + "\r";
            }

            private function changeEvt(event:Event):void {
                randomNumbers = event.currentTarget.selectedItem.data
            }

        ]]>
    </mx:Script>
    <mx:VBox horizontalCenter="0" verticalCenter="0">
        <mx:Text x="487" y="261" text="{}" width="500" id="result"/>
        <mx:ComboBox  change="changeEvt(event)" >
            <mx:ArrayCollection>
                <mx:Object label="Three" data="3"/>
                <mx:Object label="Four" data="4"/>
                <mx:Object label="Five" data="5"/>
                <mx:Object label="Six" data="6"/>
                <mx:Object label="Seven" data="7"/>
                <mx:Object label="Eight" data="8"/>
                <mx:Object label="Nine" data="9"/>
                <mx:Object label="Ten" data="10"/>
            </mx:ArrayCollection>
        </mx:ComboBox>
        <mx:Button label="New list"  click="calculate()"/>
        <mx:HSlider  id="slider" value="5"  minimum="5" maximum="100"  snapInterval="1" />
        <mx:Label text="Random Numbers: {Math.round(slider.value) }"/>
    </mx:VBox>
    <mx:Text  id="questionsArrayText"  horizontalCenter="0" verticalCenter="0"/>
</mx:Application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T05:01:40.270

有许多自定义随机数生成的实现可用；但是，ActionScript`Math.random()`会在给定大量样本的情况下产生预期的分布。

下面是通过`Math.random()`生成 0 到 100 之间的数字进行的分布。纵轴显示了生成该值的次数。

### 1,000,000 个样本

> ![1000000 个样本](https://i.stack.imgur.com/miAzr.png)

### 100,000 个样本

> ![100000 个样本](https://i.stack.imgur.com/qgjwX.png)

### 10,000 个样本

> ![10000 个样本](https://i.stack.imgur.com/DWGbI.png)

### 1,000 个样本

> ![1000 个样本](https://i.stack.imgur.com/6tqEK.png)

### 100 个样品

> ![100 个样本](https://i.stack.imgur.com/ohuIc.png)

生成和可视化示例的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               creationComplete="creationCompleteHandler(event)">

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayList;
            import mx.events.FlexEvent;

            [Bindable]
            protected var data:ArrayList = new ArrayList();

            protected function creationCompleteHandler(event:FlexEvent):void
            {
                var i:uint = 0;
                var set:Dictionary = new Dictionary();
                const ITERATIONS:uint = 100;

                for (i = 0; i < 100; i++)
                {
                    set[i] = {value: i, count: 0};
                }

                for (i = 0; i < ITERATIONS; i++)
                {
                    var n:uint = Math.random() * 100;
                    set[n].count++;
                }

                for (i = 0; i < 100; i++)
                {
                    data.addItem({value: set[i].value, count: set[i].count});
                }
            }
        ]]>
    </fx:Script>

    <fx:Declarations>
        <mx:SolidColor id="areaFill"
                       color="0x123456"
                       alpha=".3" />
        <mx:SolidColorStroke id="areaStroke"
                             color="0x123456" />
    </fx:Declarations>

    <mx:AreaChart height="100%"
                  width="100%"
                  paddingLeft="5"
                  paddingRight="5"
                  showDataTips="true"
                  dataProvider="{data}">

        <mx:verticalAxis>
            <mx:LinearAxis title="count" />
        </mx:verticalAxis>

        <mx:horizontalAxis>
            <mx:CategoryAxis categoryField="value"
                             title="value" />
        </mx:horizontalAxis>

        <mx:series>
            <mx:AreaSeries yField="count"
                           areaStroke="{areaStroke}"
                           areaFill="{areaFill}">
            </mx:AreaSeries>
        </mx:series>

    </mx:AreaChart>

</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T04:04:38.850

您可以调用 random.org，但您必须等到网站使用事件侦听器返回。

```
function getRandomNum(min, max) {
    var randTextURLRequest:URLRequest = new URLRequest("http://www.random.org/integers/?num=1&min=" + min + "&max=" + max + "&col=1&base=10&format=plain&rnd=new");
    var randTextLoader:URLLoader = new URLLoader();
    randTextLoader.addEventListener(Event.COMPLETE, randCompleteHandler);
    randTextLoader.load(randTextURLRequest);
}

function randCompleteHandler(e:Event)
{
    var randVal = Number(randTextLoader.data);
    trace("Number " + randVal + " selected");
}

// You may then type in your code getRandomNum(1, 100) 
```

# pyephem - Pyephem：在历元计算中没有正确应用岁差？

> ID：16046786
> 
> 赞同：1
> 
> 时间：2013-04-16T20:47:34.853
> 
> 标签：pyephem

我最近下载了 pyephem。我非常喜欢用户界面。

然而，我从中得到了非常不稳定的结果，特别是当我试图获得过去某个时候恒星偏角的估计值时。我完全使用了与[http://rhodesmill.org/brandon/projects/pyephem-manual.html#FixedObjects,Precession,andEpochs](http://rhodesmill.org/brandon/projects/pyephem-manual.html#FixedObjects,Precession,andEpochs)中描述的 Thuban/Polaris 示例相关的代码，我得到了完全不同的结果。我想知道是否需要在我的脚本中添加其他内容才能使事情正常进行，或者 pyephem 中是否存在新错误。

我的脚本如下所示：

```
import ephem
import ephem.stars

polaris = ephem.readdb("Polaris,f|M|F7,2:31:48.704,89:15:50.72,2.02,2000")
polaris.compute()    

thuban = ephem.readdb("Thuban,f|V|A0,14:4:23.3,64:22:33,3.65,2000")
thuban.compute()

print 'my result for current polaris dec',polaris.dec
print 'webpage result                    89:15:50.73\n'

print 'my result for current thuban dec',thuban.dec
print 'webpage result                   64:22:32.99\n'

polaris.compute(epoch='-2800')
print 'my result for polaris dec in -2800',polaris.dec
print 'webpage result                     63:33:17.63\n'

thuban.compute(epoch='-2800')
print 'my result for thuban dec in -2800',thuban.dec
print 'webpage result                    89:54:34.97\n' 
```

运行它会产生以下输出。我可以理解为什么前两个比较略有不同（网页上的示例是在最近创建的），但是您可以看到两个星的当前日期和纪元 -2800 之间的偏角没有变化，但是在网页上的示例在两个时期之间，两颗恒星的赤纬变化很大：

```
my result for current polaris dec 89:19:19.5
webpage result                    89:15:50.73

my result for current thuban dec 64:18:39.5
webpage result                   64:22:32.99

my result for polaris dec in -2800 89:19:19.5
webpage result                     63:33:17.63

my result for thuban dec in -2800 64:18:39.5
webpage result                    89:54:34.97 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:32:58.147

该`.dec`属性以多种方式自动调整，这会干扰教程试图显示岁差如何工作，所以——如果你仔细查看教程的代码——我想你会发现它总是要求`.a_dec`“天文偏角” ”北极星和图班。如果您通过添加到属性名称的前面来对上面自己的代码进行轻微的拼写更正`a_`，那么我想您会发现您的打印答案与教程中打印的答案一致！

# c - MPI：如何将多个处理器中的子阵列连接成一个更大的单个阵列

> ID：16046792
> 
> 赞同：4
> 
> 时间：2013-04-16T20:48:05.440
> 
> 标签：c, mpi

我在 C 中使用 MPI。我能够将数组的一部分分配给不同的处理器。不同的处理器完成了我想要的所有操作。现在，我想将所有处理器中的所有子阵列组合成一个大阵列。例如，如果不同的处理器具有如下子阵列：

```
Processor 1:
0 1 1 0
0 0 1 0

Processor 2:
0 0 1 0
1 1 0 1

Processor 3:
1 1 0 0
1 1 1 1

... 
```

我希望能够将所有子数组组合或“连接”在一起。例如，我希望大数组是：

```
0 1 1 0
0 0 1 0
0 0 1 0
1 1 0 1
1 1 0 0 
1 1 1 1
... 
```

我试图使用 MPI_Reduce 但我找不到一个操作来做我想做的事。我可以使用另一种 MPI 方法来实现我正在寻找的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:28:22.017

您正在寻找 MPI_Gather：

> > 每个进程（包括根进程）将其发送缓冲区的内容发送到根进程。根进程接收消息并按等级顺序存储它们。

有关文档和示例，请参见[此处](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Gather.html)和[此处](http://mpi.deino.net/mpi_functions/MPI_Gather.html)。[MPI 2.2 标准](http://www.mpi-forum.org/docs/mpi-2.2/mpi22-report.pdf)中的第 5.5 节也有示例。

# validation - 在不关闭验证的情况下正确验证 mvc razor 表单中的输入

> ID：16046793
> 
> 赞同：0
> 
> 时间：2013-04-16T20:48:07.253
> 
> 标签：validation, razor, html-validation

我在 razor (mvc 3) 中有一个 ajax 表单，这个表单在一个 html 输入中包含一个变量。

如果我在输入中输入一些字符，例如“<”或“>”，那么 POST 会抛出一个潜在危险的 request.form 异常，因为客户端在该输入上放置的字符是可以的。

我读到过，每个人都说你必须`[ValidateInput(false)]`在控制器操作或`[AllowHtml]`模型属性上关闭验证，甚至在 web.config 中关闭。

所以..也许我错了，但我不太喜欢“关闭验证”的东西。有没有办法在不关闭验证的情况下做到这一点？我的意思是，控制用户输入可能会清理输入？

# signalr - 如何删除 signalR 异常的日志记录？

> ID：16046804
> 
> 赞同：1
> 
> 时间：2013-04-16T20:48:47.420
> 
> 标签：signalr, elmah

我有一个项目 mvc4 Web 应用程序。它是一个聊天应用程序，用户经过身份验证可以在私人房间聊天，但不能针对公共聊天进行身份验证。我的项目中有 elmah.axd 包来记录所有错误，它会记录“连接 ID 的格式不正确”。每次用户验证登录和登录时，signalR 都会出错。有没有办法抓住它而不记录它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:54:32.383

您将 Elmah 标记为错误报告工具，因此：

[https://code.google.com/p/elmah/wiki/ErrorFiltering](https://code.google.com/p/elmah/wiki/ErrorFiltering)

要以编程方式添加异常过滤器，请将以下内容放入 Global.asax 文件（或代码隐藏文件）中：

```
// Don't forget to reference the Elmah assembly and import its namespace.

void ErrorLog_Filtering(object sender, ExceptionFilterEventArgs e)
{
    if (e.Exception.GetBaseException() is HttpRequestValidationException)
        e.Dismiss();
} 
```

# python - 如何从 python 调用 shell 脚本函数/变量？

> ID：16046806
> 
> 赞同：6
> 
> 时间：2013-04-16T20:49:01.303
> 
> 标签：python, bash

有什么方法可以调用 shell 脚本并使用 python 脚本中定义的函数/变量？

脚本是 unix_shell.sh

```
#!/bin/bash
function foo
{
...
} 
```

是否可以从 python 调用此函数 foo ？

解决方案：

1.  对于函数：将 Shell 函数转换为 python 函数
2.  对于 shell 局部变量（未导出），在 shell 中运行此命令，在调用 python 脚本之前：
    export $(set | tr '\n' ' ')

3.  对于shell全局变量（从shell导出），在python中可以：import os print os.environ["VAR1"]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T21:06:21.557

是的，与从另一个 bash 脚本中调用它的方式类似：

```
import subprocess
subprocess.check_output(['bash', '-c', 'source unix_shell.sh && foo']) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-11T15:34:53.703

这可以通过子流程来完成。（至少这是我在搜索这个时想要做的）

像这样：

```
output = subprocess.check_output(['bash', '-c', 'source utility_functions.sh; get_new_value 5']) 
```

其中 utility_functions.sh 看起来像这样：

```
#!/bin/bash
function get_new_value
{
    let "new_value=$1 * $1"
    echo $new_value
} 
```

这是它在行动中的样子......

```
>>> import subprocess
>>> output = subprocess.check_output(['bash', '-c', 'source utility_functions.sh; get_new_value 5'])
>>> print(output)
b'25\n' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T20:50:55.033

不，那是不可能的。您可以*执行*一个 shell 脚本，在命令行上传递参数，它可以打印出数据，您可以从 Python 中解析这些数据。

但这并不是真正*调用*该函数。那仍然使用选项执行 bash 并在 stdio 上获取字符串。

这可能会做你想要的。但这可能不是正确的方法。Bash 不能做很多 Python 做不到的事情。而是在 Python 中实现该函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-21T04:17:53.147

在[上述答案](https://stackoverflow.com/a/16047082/9157799)和[这个答案](https://stackoverflow.com/a/57910989/9157799)的帮助下，我想出了这个：

```
import subprocess
command = 'bash -c "source ~/.fileContainingTheFunction && theFunction"'
stdout = subprocess.getoutput(command)
print(stdout) 
```

我在 Ubuntu 18.04 LTS 中使用 Python 3.6.5。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T21:34:47.897

我对python不太了解，但是如果你`export -f foo`在shell脚本函数定义之后使用，那么如果你启动一个sub bash，这个函数就可以被调用。如果没有`export`，您需要像`. script.sh`在 python 中启动的 sub bash 内一样运行 shell 脚本，但它将运行其中的所有内容并定义所有函数和所有变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-26T16:25:37.780

您可以将每个函数分离到它们自己的 bash 文件中。然后使用 Python 将正确的参数传递给每个单独的 bash 文件。

这可能比自己在 Python 中重写 bash 函数更容易。

然后，您可以使用调用这些函数

```
import subprocess
subprocess.call(['bash', 'function1.sh'])
subprocess.call(['bash', 'function2.sh'])
# etc. etc. 
```

您也可以使用 subprocess 来传递参数。

# wcf - 如何允许所有操作和命名空间

> ID：16046818
> 
> 赞同：0
> 
> 时间：2013-04-16T20:50:01.463
> 
> 标签：wcf

我是 WCF 新手，但对 C# 和 .Net 并不陌生。我正在使用 Visual Studio 2008 和 .Net 3.5。

我正在尝试构建一个可以接收任何入站请求 XML 和任何命名空间的 Web 服务。它的行为就像一个透明的接收器，只是接收入站请求 XML。

一旦我收到请求，我将把它传递给一些自定义的 .Net C# 项目，以调用 MQPUT 到 IBM MQ 系列。

现在我有 WCF Web 服务应用程序接收一个称为 RunTest() 的通用入站操作。我将 WSDL 使用到 SoapUI 中，构建了一个示例请求和断点，它可以工作。但是，当我尝试传递我们公司的请求 XML 时，它并没有落在断点上。

这是ServiceContract和Operation：

```
[ServiceContract(Name="IService1",Namespace="cfg-env=http://www.co.com/schemas/cfg-     env/")]
//[ServiceContract]
public interface IService1
{

[OperationContract]
void RunTest();

[OperationContract]
void CFX(); 
```

以下是操作方法：

```
public void RunTest()
{  <<<it does break here using the request from the WSDL
string serviceName;
string queueManager;
string queue;
string requestMessage;

//Capture the Service Name
serviceName = "";

//Save the QueueManager
queueManager = "";

//Save the Request Queue
queue = "";

//Save the Message
requestMessage = "";

//Call MQ Put
Engine eng = new Engine();
try
{
eng.Put(serviceName, queue, requestMessage, queueManager);            
} 
```

我需要做的主要事情是接收入站 XML，查询它以获取一些信息，然后调用此方法在 MQ 上执行 MQPUT 功能。

入站命名空间看起来像上面的，但我想确保我可以接收和询问任何可能是命名空间限定的 XPATH。如果必须，我可以专门使用 cfg-env 命名空间前缀，因为我们的服务确实使用它作为标准。

在 VS 2008 WCF 中这样做的主要障碍是什么？如果您有任何链接，请尽可能传递它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:27:52.833

我相信您将 OperationContract 属性上的 name 属性指定为“*”以接受所有请求。要使参数本身与架构无关，它应该是 System.ServiceModel.Channels.Message 类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T15:03:22.847

您正在构建的是“WCF 路由器”。

最新的 .NET 版本中包含一个可配置的[路由服务](http://msdn.microsoft.com/en-us/library/ee517421.aspx)。

如果路由服务不能满足您的需求，则可以构建自己的路由器，但当需要安全消息时会变得非常复杂。这组 MSDN 文章是最好的资源。他们回答了您的问题，即如何让服务接受任何消息，然后继续解决和安全问题。

[构建 WCF 路由器，第 1 部分](http://msdn.microsoft.com/en-us/magazine/cc500646.aspx)

[构建 WCF 路由器，第 2 部分](http://msdn.microsoft.com/en-us/magazine/cc546553.aspx)

# r - 如果小于行标准差，则将行值更改为零

> ID：16046820
> 
> 赞同：4
> 
> 时间：2013-04-16T20:50:04.773
> 
> 标签：r, rows, standard-deviation

如果它们小于该行的标准偏差，我想将一行的所有值更改为零。

```
set.seed(007)
X <- data.frame(matrix(sample(c(5:50), 100, replace=TRUE), ncol=10))

   X1 X2 X3 X4 X5 X6 X7 X8 X9 X10
1  37 10 43 45 11 17 39 13 13  44
2  10 24 32 16  7 50 41 47  9  39
3  23 49 46 35 16 30 22 10 11  46
4  41 46 19 28 47 39 27 40 49  13
5  29 23 49 10 50 17 42 43  7  31
6  31 26 11 36 35 43 45 29 33   9
7  21 12  5 21 29 12 31 30  7  30
8  32 24  8 43  9 17 35 44 41   8
9  20 44 39  8 40 17 27 45 14  37
10 50  8  5 48 27 15 15 12 30  15 
```

下面的几行似乎可以完成这项工作，但在我的实际用例中速度非常慢，而且我有点不确定 sapply 返回的是什么......

```
Y <- t(sapply(1:nrow(X), function(i) 
      sapply(1:ncol(X), function(j) 
        ifelse(X[i,][[j]] < sd(X[i,]), 0, X[i,][[j]]))))

      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
 [1,]   37    0   43   45    0   17   39    0    0    44
 [2,]    0   24   32    0    0   50   41   47    0    39
 [3,]   23   49   46   35   16   30   22    0    0    46
 [4,]   41   46   19   28   47   39   27   40   49    13
 [5,]   29   23   49    0   50   17   42   43    0    31
 [6,]   31   26    0   36   35   43   45   29   33     0
 [7,]   21   12    0   21   29   12   31   30    0    30
 [8,]   32   24    0   43    0   17   35   44   41     0
 [9,]   20   44   39    0   40   17   27   45   14    37
[10,]   50    0    0   48   27    0    0    0   30     0 
```

什么是更快更有效的方法？

**更新**非常感谢大家的快速有效的回答！

以下是它们的堆叠方式...

```
set.seed(007)
size <- 1e5
X <- matrix(sample(c(5:50), size, replace=TRUE), ncol=size/2)

library(microbenchmark)    
results <- microbenchmark(
  X[ sweep(X, 1, apply(X,1,sd) ) < 0 ] <- 0,
  X[t(apply(X, 1, function(x) x - sd(x) < 0))] <- 0,
  sapply(X, function(x) ifelse(x < sd(x), 0, x)),
  times = 100L)
print(results)
Unit: milliseconds
                                              expr         min          lq     median         uq        max neval
          X[sweep(X, 1, apply(X, 1, sd)) < 0] <- 0    7.966167   10.869785   12.38399   15.00107   45.41557   100
 X[t(apply(X, 1, function(x) x - sd(x) < 0))] <- 0    7.344227    9.675577   11.22283   14.34280   53.70728   100
    sapply(X, function(x) ifelse(x < sd(x), 0, x)) 3028.336236 3221.325598 3302.16115 3466.66875 4539.88358   100
# plot
if (require("ggplot2")) {
  plt <- ggplot2::qplot(y=time, data=results, colour=expr)
  plt <- plt + ggplot2::scale_y_log10()
  print(plt)
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/zdGOB.png)

看起来 Arun 的答案是最快的（正如 Arun 指出的那样）。然而，DWin 的打字少了 8 个字符，并且以使用奇异的（对我而言）`sweep`功能而著称。

一个小的娱乐更新，Arun 的方法明显更快（t = 2.0112，df = 191.985，p 值 = 0.04571），或者，如果您愿意，Arun 函数的平均速度比 DWin 的平均速度快得多（使用[这个强大的贝叶斯估计方法](http://www.indiana.edu/~kruschke/BEST/)，第 1 组 = DWin，第 2 组 = Arun，尽管 Arun 的时序不太适合 t-dist）：

![在此处输入图像描述](https://i.stack.imgur.com/wI3dH.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T20:54:57.343

这个怎么样？

```
X[t(apply(X, 1, function(x) x - sd(x) < 0))] <- 0
#    X1 X2 X3 X4 X5 X6 X7 X8 X9 X10
# 1  50  0 34 36 41 31  0 18 45  20
# 2  23 15 18 17 22 38 28 32 45   0
# 3   0 40 50  0 39 40 40 43 16  46
# 4   0  0 46  0 25 33 36 33 39   0
# 5  16 25 50 22 46 38 30  0 22  38
# 6  41  0  0 43 19 22 35 31  0  31
# 7  20 30 33 27  0 12 26 25  0  29
# 8  49  0 27 41 42  0 27 25 40  21
# 9   0 50 49 43 46 22 20 33 21  42
# 10 26 19 21 26 49 17 24 47 24  13 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T21:12:49.000

我怀疑这比 apply 解决方案要慢，但是由于不需要添加 data.frame 步骤以及 apply.data.frame 非常慢的事实，我可能仍然“赢”或“保持平衡”至少直到其他参赛者认为我使用了矩阵对象。

```
set.seed(007)
X <- matrix(sample(c(5:50), 100, replace=TRUE), ncol=10)
X[ sweep(X, 1, apply(X,1,sd) ) < 0 ] <- 0 
```

请注意，理查多和我都得到了与 OP 相同的不同起点，尽管我认为如果他想要行操作，他需要转置：

```
> X
   X1 X2 X3 X4 X5 X6 X7 X8 X9 X10
1  50  0 34 36 41 31  0 18 45  20
2  23 15 18 17 22 38 28 32 45   0
3   0 40 50  0 39 40 40 43 16  46
4   0  0 46  0 25 33 36 33 39   0
5  16 25 50 22 46 38 30  0 22  38
6  41  0  0 43 19 22 35 31  0  31
7  20 30 33 27  0 12 26 25  0  29
8  49  0 27 41 42  0 27 25 40  21
9   0 50 49 43 46 22 20 33 21  42
10 26 19 21 26 49 17 24 47 24  13 
```

补充说明：我正在使用 rowMeans 函数，看看我是否可以想出一个向量化的替代方案来代替 sd() 的 apply(X,1,sd) 版本：

```
sqrt(rowSums((X[1:10, ]-rowMeans(X))^2)/9) 
```

所以：

```
 sdbyrow <- function(mat) sqrt(rowSums((mat-rowMeans(mat))^2)/(ncol(mat)-1) )
 all.equal(apply(X,1,sd), sdbyrow(X) )
#[1] TRUE 
```

# amazon-sns - 添加 HTTP SNS 订阅后，SQS 中的现有消息会发生什么情况？

> ID：16046821
> 
> 赞同：0
> 
> 时间：2013-04-16T20:50:06.520
> 
> 标签：amazon-sns

我有一个现有的 SQS，其中包含 X 条消息。我为它添加了新的 SNS HTTP 订阅。我的 HTTP 服务会接收队列中的所有现有消息吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:58:04.867

不仅新消息被发送。

# c++ - 整数或向量数组？

> ID：16046823
> 
> 赞同：2
> 
> 时间：2013-04-16T20:50:19.107
> 
> 标签：c++

我正在尝试存储一些每次都会更改的元素，但我不知道哪个

方法更好，为什么。我正在考虑两种方法，1）声明 int 和循环数组或

使用向量的。

哪种方式更好，为什么？

声明 int 数组是否有任何未来的内存问题作为泄漏？

下面的代码显示了我正在谈论的两种方式：

1)

```
#include <iostream>
#include <vector>

int main()
{

     int x[5];

     x[0] = 10;
     x[1] = 20;
     x[2] = 30;
     x[3] = 40;
     x[4] = 50;

for(unsigned int i = 0;i<=sizeof(x[5]); i++)
    {

     std:: cout << "x[" << i << "] = "<< x[i] << std::endl;

}

system("pause");

    return 0;
} 
```

2)

```
#include <iostream>
#include <vector>

int main()
{

    std::vector<int> x;

    x.push_back(10);
    x.push_back(20);
    x.push_back(30);
    x.push_back(40);
    x.push_back(50);

for(unsigned int i = 0;i<=x.size()-1; i++)
    {

     std:: cout << "x[" << i << "] = "<< x[i] << std::endl;

}

system("pause");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T20:52:37.530

如果这就是您所要做的，并且您的数组将始终具有在编译时已知的大小，那么您不需要`std::vector`.

另一方面，在 C++11 中，您可以使用`std::array`而不是普通的 C 数组（`std::array`是 C 数组的零开销、更安全且功能更强大的包装器）：

```
#include <iostream>
#include <array>

int main()
{
     std::array<int, 5> x = { 10, 20, 30, 40, 50 };
     for (unsigned int i = 0; i < x.size(); i++)
     //                           ^^^^^^^^
     {
         std:: cout << "x[" << i << "] = "<< x[i] << std::endl;
     }
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/3kW04t%24446)。请注意，它`std::array`提供了一个`size()`成员函数，您可能希望使用它来代替`sizeof`运算符。

此外，由于`std::array`它是一个标准的序列容器，您可以通过这种方式遍历其元素：

```
 std::size_t i = 0;
 for (auto e : x)
 {
     std:: cout << "x[" << i++ << "] = "<< e << std::endl; 
 } 
```

这是一个[活生生的例子](http://liveworkspace.org/code/3kW04t%24447)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T20:57:21.093

如果在编译时知道大小，请使用`std::array`. 如果没有，请使用`std::vector`. 在任何一种情况下，都使用迭代器来查看元素：

```
typedef std::array<int> my_container_type;
typedef my_container::iterator iterator;
my_container_type my_container = { whatever };

for (iterator it = my_container.begin(); it != my_container.end(); ++it)
    std::cout << "x[" << (it - my_container.begin()) << "] = " << *it << '\n'; 
```

通过使用迭代器，您可以大大降低意外使用循环限制的风险，例如`sizeof(x[5])`，这是无稽之谈。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T20:55:18.833

两者都不是“更好”。它们都针对完全不同的用例。

如果您在编译时知道数组大小并且 100% 确定它永远不会改变，那么当然，请使用普通的旧数组。它的开销更少，编译器甚至可以通过发现任何读取边界之外的尝试来帮助您进行静态分析。

另一方面，如果您不确定数组的一侧（即您将从文件或用户读取输入），则使用`std::vector`. 它可以增长到任何大小以满足您的需求。

# java - 制作一个 java swing frame 可移动和 setUndecorated

> ID：16046824
> 
> 赞同：12
> 
> 时间：2013-04-16T20:50:22.410
> 
> 标签：java, swing

我创建了一个没有标题栏的框架，为此我使用了 setUndecorated(true); 方法，但之后框架由于某种原因变得不可移动。

我怎样才能使我的框架可移动并仍然隐藏我的标题栏？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-16T20:57:50.133

以下代码将创建一个没有标题栏的 JFrame，您仍然可以移动它：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

public class FrameDragListenerExample {

    public static void main(String[] args) {
        Runnable runnable = new Runnable() {
            public void run() {
                final JFrame frame = new JFrame("Hello");

                frame.setUndecorated(true);
                frame.setBounds(0, 0, 400, 400);

                JPanel contentPane = new JPanel(new BorderLayout());
                JLabel label = new JLabel("Click anywhere in the Jframe and drag");
                label.setFont(label.getFont().deriveFont(16f));
                label.setBorder(BorderFactory.createEmptyBorder(100, 100, 100, 100));
                contentPane.add(label);
                frame.setContentPane(contentPane);

                FrameDragListener frameDragListener = new FrameDragListener(frame);
                frame.addMouseListener(frameDragListener);
                frame.addMouseMotionListener(frameDragListener);

                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        };
        SwingUtilities.invokeLater(runnable);
    }

    public static class FrameDragListener extends MouseAdapter {

        private final JFrame frame;
        private Point mouseDownCompCoords = null;

        public FrameDragListener(JFrame frame) {
            this.frame = frame;
        }

        public void mouseReleased(MouseEvent e) {
            mouseDownCompCoords = null;
        }

        public void mousePressed(MouseEvent e) {
            mouseDownCompCoords = e.getPoint();
        }

        public void mouseDragged(MouseEvent e) {
            Point currCoords = e.getLocationOnScreen();
            frame.setLocation(currCoords.x - mouseDownCompCoords.x, currCoords.y - mouseDownCompCoords.y);
        }
    }
} 
```

您仍然可以通过拖动框架的主体来拖动它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T20:55:47.477

也许这会帮助你 [移动窗口](http://tips4java.wordpress.com/2009/06/14/moving-windows/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-06T08:41:25.440

我为你封装了一个扩展`JFrame`类，我称之为`MoveaFrame`，你只需要在实践中“扩展MoveaFrame”即可：

只需将以下代码复制到您的项目中，并扩展它，您就可以使您的 Frame 窗口可拖动！

`MoveJFrame`像 extend a 一样扩展，`JFrame`你可以直接拖动你的窗口：

```
public class ContactUi extends MoveJFrame implements  Runnable { 
```

类`MoveJFrame` 代码，只需复制它并像 extend 一样扩展它`JFrame`：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.io.IOException;

public class MoveJFrame extends JFrame {

    public MoveJFrame() {

        this.setUndecorated(true);

        FrameDragListener frameDragListener = new FrameDragListener(this);
        this.addMouseListener(frameDragListener);
        this.addMouseMotionListener(frameDragListener);

        this.pack();
        this.setLocationRelativeTo(null);
        this.setVisible(true);

    }

    public static void main(String[] args) throws IOException {
        new MoveJFrame();
    }

    public static class FrameDragListener extends MouseAdapter {

        private final JFrame frame;
        private Point mouseDownCompCoords = null;

        public FrameDragListener(JFrame frame) {
            this.frame = frame;
        }

        public void mouseReleased(MouseEvent e) {
            mouseDownCompCoords = null;
        }

        public void mousePressed(MouseEvent e) {
            mouseDownCompCoords = e.getPoint();
        }

        public void mouseDragged(MouseEvent e) {
            Point currCoords = e.getLocationOnScreen();
            frame.setLocation(currCoords.x - mouseDownCompCoords.x, currCoords.y - mouseDownCompCoords.y);
        }
    }
} 
```

# javascript - 数学地板（） | 0

> ID：16046825
> 
> 赞同：9
> 
> 时间：2013-04-16T20:50:22.857
> 
> 标签：javascript, math

我经常在 JavaScript 中看到这个：

```
var val = (myvar / myothervar) | 0; 
```

据我了解，这是在 JavaScript 中设置值的众多快捷方式之一（如`~~`、 和`>> 0`等）。但是，我最近在看一段代码，它做到了这一点：

```
var val = Math.floor(myvar/ myothervar)|0; 
```

他们使用`Math.floor()`，然后也用`0`. 作者这样做了很多次，所以这不仅仅是他们做了一次的错字。两者都做你有什么收获？

对于好奇，我所指的代码可以在[这里找到](https://github.com/chrisdickinson/collide-2d-tilemap/blob/5842f95f5d22fb3ce4741d1189cc7881510226d5/index.js#L35)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T20:52:01.713

你可能没有想到：

*   `Math.floor(NaN) == NaN`（好吧，不是真的，但是`Math.floor(NaN)`）`NaN`
*   `Math.floor(NaN) | 0 == 0`

也适用于`Infinity`

正如@apsillers 所指出的，这可能是为了消除`Infinity`s：

```
var x = 1;
console.log(Math.floor(1 / x));      // 1
console.log(Math.floor(1 / x) | 0);  // 1
x = 0;
console.log(Math.floor(1 / x));      // Infinity
console.log(Math.floor(1 / x) | 0);  // 0 
```

# php - 使用 PHP foreach 函数创建表

> ID：16046828
> 
> 赞同：1
> 
> 时间：2013-04-16T20:50:27.963
> 
> 标签：php, arrays, foreach, html-table

我在一个名为数据库编程的课程中。我们得到了一个数据集并将其放入我们的服务器中。现在我必须使用一个 jquery 插件来帮助可视化该数据。我正在使用 Graph Us 插件并尝试使用“填写”选项。

我的教授帮助我创建了这个函数：

```
<?php
include 'connect.php';
$country_query = "SELECT DISTINCT Country FROM FemaleMaleRatioNew";
$result = mysqli_query($sql_link, $country_query);
$new_row = array();
while ($row = mysqli_fetch_assoc($result)) {
    $country = $row['Country']; 
    $query = sprintf("SELECT Year, Value FROM FemaleMaleRatioNew WHERE Country =     '%s'", $country);  
    $country_result = mysqli_query($sql_link, $query);
    while ($country_row = mysqli_fetch_assoc($country_result) ) {
        $new_row[$country][] = array('year' => $country_row['Year'],
                            'value'=> $country_row['Value']
                            );

    }
}   

//print_r($new_row);

?> 
```

这`print_r($new_row);`确保它有效并且确实有效，它会在激活时打印出数组。

然后他指导我创建这样的表：

```
 <body>  

    <table id="demo">

    <?php  foreach($new_row as $row):?> 

            <tr>
                <td><?=$row['year'];?></td>
                <td><?=$row['country'];?></td>
            </tr>
    <?php endforeach;?>

    </table>

<script type="text/javascript">
$(document).ready(function() {

// Here we're "graphing up" only the cells with the "data" class
$('#demo td').graphup({
    // Define any options here
    colorMap: 'heatmap',
    painter: 'fill',
    // ...
});

});
</script>
</body> 
```

我还需要做什么才能让桌子正常工作？我似乎无法弄清楚。它所做的只是空白。

很抱歉，如果这个问题的措辞不正确，或者我对任何事情都不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T20:57:22.613

您的 $new_row 变量中的每个国家/地区都有多行。您必须先遍历国家/地区，然后遍历各个数据行：

```
<?php  foreach($new_row as $country => $rows): ?>
  <?php  foreach($rows as $row): ?>
        <tr>
            <td><?=$country;?></td>
            <td><?=$row['Year'];?></td>
            <td><?=$row['Value'];?></td>
        </tr>
  <?php endforeach;?>
<?php endforeach;?> 
```

另请注意，您需要冒号 ':' 而不是分号 ';' 声明后`foreach`。此处描述了此语法（鲜为人知）：http: [//php.net/manual/en/control-structures.alternative-syntax.php](http://php.net/manual/en/control-structures.alternative-syntax.php)

如果您想显示每个国家/地区的某种聚合（例如总和）并且您想在 PHP（而不是 MySQL）中计算它，您可以这样做：

```
<?php foreach($new_row as $country => $rows): 
  $sum = 0;
  foreach($rows as $row): 
    $sum += $row['Value'];
  endforeach;
?>
        <tr>
            <td><?=$country;?></td>
            <td><?=$sum;?></td>
        </tr>
<?php endforeach;?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T20:55:49.643

您应该使用单个 JOINed 查询来执行此操作，但您可能还没有在课堂上得到它。既然是作业，我不会给你明确的答案，但这是伪代码：

```
$countries = SELECT DISTINCT Country FROM YourTable;
while($country_row = fetch_row($countries)) {
   echo $country_row['Country'];
   echo <table>;
   $status = SELECT Year, Value FROM YourTable WHERE Country=$country_row['Country'];
   while($stats_row = fetch_row($status) {
        echo <tr><td>$stats_row['Year']</td><td>$stats_row['Value']}</td>
   }
   echo </table>
} 
```

# java - 策略模式重用数据创建报告

> ID：16046830
> 
> 赞同：0
> 
> 时间：2013-04-16T20:50:30.590
> 
> 标签：java, c++, design-patterns, flyweight-pattern

我正在实现一个将使用不同组件的报告，即有些组件具有页眉、页脚表。另一个有标题、标题、表格、图表。我使用与策略模式类似的模式实现了这一点。我可以使用相同的类报告生成报告，并定义一个接口组件（onDraw）。每个组件都实现了 Table、Graph 等...

但是对于内存消耗和良好的软件设计，如果在每个具有相同数据的报告上使用它们，我不想创建重复的表和标题。是否有一种模式可用于将绘制的表格和标题从一个报告中保存下来并重新用于另一个报告？我一直在研究飞重模式。或者在课堂报告中使用静态变量。问题是当我想在报告类上使用不同的数据时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:13:38.053

我假设通过问这个问题存在运行时未知数，这些未知数会阻止您提前确定哪些项目在报告中是相同的。否则，您可以直接引用相同的实例。

缓存“等效”实例的享元式工厂可以帮助减少内存占用。每个`ReportComponent`都需要某种参数对象来封装其特定的数据字段并实现`equals()`以定义“等效”的含义。

```
public class ReportComponentFactory {

    private final Map<String, ReportComponent> headerCache = 
        new HashMap<String, ReportComponent>();
    private final Map<GraphParameters, ReportComponent> graphCache = 
        new HashMap<GraphParameters, ReportComponent>();

    public ReportComponent buildHeader(String headerText){
        if (this.headerCache.containsKey(headerText)){
            return this.headerCache.get(headerText);
        }
        Header newHeader = new Header(headerText);
        this.headerCache.put(headerText, newHeader);
        return newHeader;
    }

    public ReportComponent buildGraph(GraphParameters parameters){
        if (this.graphCache.containsKey(parameters)){
            return this.graphCache.get(parameters);
        }
        Graph newGraph = new Graph(parameters);
        this.graphCache.put(newGraph);
        return newGraph;
    }

    ...
} 
```

请注意，实例化参数对象将需要一些临时内存消耗，但它们应该很容易被垃圾收集。

# svn - 如何使用钩子设置和操作自定义 svn 修订属性

> ID：16046835
> 
> 赞同：3
> 
> 时间：2013-04-16T20:50:47.590
> 
> 标签：svn, post-commit, svn-hooks

我想配置以下内容：

1.  当开发人员从他们的 SVN 客户端签入代码时，挂钩应验证它是否设置了修订属性“CodeReview”以及该属性的值（如果已设置）。
2.  如果未设置，则添加修订属性并将其值设置为“未完成”
3.  代码审查完成后，将属性值更新为“完成”。

我在步骤 1 本身收到错误。我尝试通过添加一个预提交挂钩来检查是否设置了修订属性。我无法在预提交挂钩中执行此操作。我写了一个`pre-commit.BAT`文件并使用 svn propget 如下：

> "C:\Program Files\Subversion\bin\svn.exe" propget "CodeReview" -t %TXN% %REPOS% >property FIND "%property%" "C:\repos\hooks\requiredproperties.txt">Null
> If %ERRORLEVEL% EQU 0 转到 OK1

这会产生错误——抱怨 -t。

谁能帮我写三个步骤的脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T22:48:02.717

我有一个[预提交钩子](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook)，可以确保在文件提交时在文件上设置属性，并且这些属性设置为特定属性。

这将确保在提交文件时在文件上设置属性。**但是**，有几个问题：

文件属性像文件一样被修订。如果我在我的文件中设置属性`CodeReview`=`Done`在修订版 14 上，它将被设置为`CodeReview`=`Done`当下一个人将他们的更改提交到 Subversion 时。不完全是你想要的。

没有一种简单的方法可以查询文件属性以查看哪些具有值，`Done`哪些没有。

我谦虚地提出建议：你正走向一个受伤的世界。相反，将[Jenkins](http://jenkins-ci.org)设置为持续构建服务器。每次有人在 Subversion 中提交更改时，Jenkins 都会启动一个*构建*，记录更改的内容和更改者。然后，您无需将单个文件标记为正在*审查*或未*审查*，而是验证发生在整个变更集上的 Jenkins 构建（无论如何这确实更有意义）。

您可以使用[Promoted Build Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin)来标记特定构建是否已经过审查，以及它是否通过了代码审查。您还可以在每个构建中附加对代码审查中发现的任何问题的评论。

* * *

现在，对不起，当我来到我的肥皂盒时......

大多数代码审查都毫无价值。代码审查主要包括三个方面：

1.  用户是否遵循公司标准做法？
2.  程序中嵌入的逻辑有什么好处吗？
3.  开发者是否犯了一个愚蠢的错误？

太多的代码审查集中在问题 #1 上，而剩下的代码审查甚至开发时间很少。我花了几个小时进行代码审查，其中开发人员调用了一个变量`CustomerServiceResponseCode`而不是`customerServiceResponseCode`. 我们甚至争论过它是否应该是`responseCodeCustomerService`. 在我的生命中，我永远不会回来做更重要的事情，比如玩愤怒的小鸟。

至于第 2 点：这应该在***编写任何代码之前***完成。*当开发人员花了 5 个小时编码才被告知你做错了*，这有点太晚了。

现在，让我们进入第 3 点。

### 代码审查之前：

开发人员 #1：嘿，您的程序中有一个错误！

开发人员 #2：哇，是的。在我插入它之前，我忘了对动词进行混淆。男孩，这是一个愚蠢的错误。

**结果**：一位感到无能和愚蠢的开发人员。

### 代码审查后：

开发人员 #1：我们刚刚收到报告说程序中存在错误！

开发人员#2：哇，在我们插入动词之前，我们忘了对动词进行混淆。这在代码审查中是如何溜走的？

**结果**：整个开发团队都感到无能和愚蠢。

在批准代码之前，我很少看到真正发现错误的代码审查——即使是一个简单的错误。这是别人的代码，大多数开发人员都有其他想法。他们快速浏览了一下，发现整体逻辑看起来正确，然后为了表明他们在关注，抱怨缩进不正确。

该怎么办？

*   作为流程的一部分，所有新的开发都应该在编写代码之前进行讨论。这不是代码审查，这是您的问题跟踪系统的一部分。

*   使用自动化工具来捕捉事物。在 Java 中，我们有 Checkstyle（代码格式是否正确）、Findbugs、PMD（这两个工具都可以捕获潜在的错误）、复制/粘贴检测器等。Jenkins 可以运行这些程序并构建各种图表和图形。更好的是，它可以成为持续集成游戏的一部分。解决 Checkstyle 和 Findbugs 问题可以获得积分，创建新问题则会失去积分。还坚持编译器警告和弃用通知是固定的。同样，Jenkins 可以跟踪它们并给出修复和处理它们的分数。

*   使用单元测试。当我领导一个项目时，我坚持所有的单元测试都是在创建少量代码之前编写的。这为开发人员在开发时提供了一个目标，并且代码通常更好，错误更少。使用覆盖率工具查看单元测试覆盖代码的程度。

使用自动化工具通常会比手动代码审查捕获更多的错误。自动化测试可以检测代码逻辑何时可能出现问题。

这并不意味着代码审查毫无用处。它只是允许代码审查成为对代码的整体审查。例如：

*   开发人员对编码有何看法？他们是否因为其他地方的设计不佳而发现实现比应有的更复杂？
*   程序是否仍然可读和可理解？是否有太多的例外和`if`条款来解决实施问题？
*   是否遵循了总体策略？开发人员在使用基类/API 时是否因为实施不当而遇到问题？
*   开发人员是否遵循商定的逻辑？
*   开发人员是否依赖于一个 JSON 第三方库，而您已经看到在其余代码中使用了另一个第三方库？

不要为了代码审查而进行代码审查。不要在代码审查的实施上浪费太多时间。而且，看在上帝的份上，不要进行预先提交的代码审查。这意味着开发人员在进行任何工作之前都需要等待批准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T21:55:09.643

如前所述，您必须在步骤 1 中使用 svnlook。但情况更糟：**强烈不建议**（虽然*不禁止*）在 pre-commit 挂钩中修改事务内容以避免不可预知的结果，但您想这样做它在你的第 2 步

而且，JFYI，属性（*任何*svn 属性）是**文件或目录**的属性，你试图从**事务**中获取，这永远不会成功

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T21:42:19.150

您不能使用 svn.exe，因为它不支持 -t 选项。你应该使用

```
svnlook.exe 
```

# javascript - html5 localstorage Chrome 打包应用程序的 Chrome.Local.Storage 更新

> ID：16046844
> 
> 赞同：1
> 
> 时间：2013-04-16T20:51:31.307
> 
> 标签：javascript, google-chrome, local-storage

我正在尝试更新我的 chrome 应用程序以具有一些新的清单功能，但我必须重写一些代码才能这样做。以下是我认为我需要使用`chrome.local.storage`或同步的本地存储获取项目的示例。

```
 var name = 'chrome-writer-files';
        document.forms.editor.doc1.value = localStorage.getItem(name);

        var name = 'chrome-writer-files2';
        document.forms.editor.doc2.value = localStorage.getItem(name);

        var name = 'chrome-writer-files3';

        document.forms.editor.doc3.value = localStorage.getItem(name); 
```

请让我知道如何重写它，以免出现错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T21:21:36.443

你需要`chrome.storage.local.get()`改用。

了解更多：[https ://developer.chrome.com/extensions/storage.html#method-StorageArea-get](https://developer.chrome.com/extensions/storage.html#method-StorageArea-get)

完整示例：（[Chrome - chrome.storage.local.get 和 set](https://stackoverflow.com/questions/13872542/chrome-chrome-storage-local-get-and-set)）

```
chrome.storage.local.set({'someItem': 'some value'});

chrome.storage.local.get('someItem', function (result) {
    alert(result);     
}); 
```

# php - 在计算字符时忽略 html 标签中的字符

> ID：16046846
> 
> 赞同：1
> 
> 时间：2013-04-16T20:51:36.520
> 
> 标签：php, html, split

在我当前的模板中，我有一大段来自用户的文本。然后该块在 600 个字符标记处拆分并放置到页面上的特定 div 中，该块的其余部分放置在页面底部附近。这工作正常，但是当在帖子开头附近添加了很多链接时会出现问题。

被`<a href='...'></a>`计入总字符数。我总是想在 600 处拆分块。

有没有一种简单的方法可以让我找出 html 字符的长度？这样我就可以将它们添加到 split_length 中。或任何其他想法？完全忽略html字符的方法？

编辑：我应该清楚我希望链接保持...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:56:00.443

使用 PHP 的函数[**strip_tags()**](http://php.net/manual/en/function.strip-tags.php)然后计算字符数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T20:59:17.383

您可以删除所有 HTML 代码，并按准确计数拆分文本。为此，请使用：

```
string strip_tags ( string $str [, string $allowable_tags ] ) 
```

> 此函数尝试返回一个字符串，其中包含从给定 str 中剥离的所有 NUL 字节、HTML 和 PHP 标记。它使用与 fgetss() 函数相同的标签剥离状态机。

请参阅[此处](http://www.php.net/manual/en/function.strip-tags.php)了解更多信息。

# php - 搜索栏输入不适用于其他支持的语言

> ID：16046848
> 
> 赞同：-3
> 
> 时间：2013-04-16T20:51:52.980
> 
> 标签：php, html, css

我正在为支持两种语言的网站使用相同的`HTML`/`CSS`属性。搜索栏在英语中可以正常工作，但是当我更改为其他语言时，我无法输入任何内容。

网站：[http ://barajon.com/store/](http://barajon.com/store/)

您可以通过单击顶部菜单上的绿色标志来更改语言。

`HTML`搜索栏的：

```
<!-- Header Search Begin -->
<form class="h-search" method="post" action="search.php" name="productsearchform" onsubmit="javascript:return TXS_funcSubmitForm();" style="border-style: none; width: auto;">
  <fieldset>
    <input type="hidden" name="simple_search" value="Y" />
    <input type="hidden" name="mode" value="search" />
    <input type="hidden" name="posted_data[by_title]" value="Y" />
    <input type="hidden" name="posted_data[by_descr]" value="Y" />
    <input type="hidden" name="posted_data[by_sku]" value="Y" />
    <input type="hidden" name="posted_data[search_in_subcategories]" value="Y" />
    <input type="hidden" name="posted_data[including]" value="all" />              

    <div class="srch-area">
        <input type="text" class="srch-fld" name="{if $TXS_search_id && $active_modules.Predictive_Search ne ""}{$TXS_search_id}{else}posted_data[substring]{/if}" id="TXS_PS_search" id="TXS_PS_search" value="{$search_prefilled.substring|escape}" />
        <input class="sbmit-btn" name="" value="Go" type="submit" />
        <div class="clear"></div>
    </div>
    <input type="hidden" name="txs_area" value="C" /> 
  </fieldset>
</form>
<!-- Header Search End --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:36:45.113

当我从中删除`position: relative`时`.banner`，它可以工作：

```
.banner{
    margin: 0;
    padding: 10px 0;
    display: block;
} 
```

这样做的原因是使用相对定位 for`.banner`让它**过去了** `.main-menu`。因此，单击搜索字段不会做任何事情，因为从技术上讲，您根本没有单击*搜索字段*。

解决这个问题的其他方法是使用，`z-index`但我认为当你没有真正改变 的相对位置时`.banner`，没有必要使用`position: relative`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T21:37:13.497

您无法在文本框中输入文本的原因是它被另一个`DIV`. 覆盖文本框的部分`DIV`对用户是“不可见的”（没有背景颜色或边框来表示它在那里）。

要强制您的文本框出现在 前面，`DIV`请将文本框更改`z-index`为更大的数字，比如说`9999`。由于`z-index`仅适用于定位元素，因此您必须将`position`文本框的 更改为`relative`、`fixed`或`absolute`。

在您的特定示例中，我建议您设置包含文本框而不是文本框本身的`position`and 。在你的情况下，我会改变这一行：`z-index``div`

```
<div class="main-menu"> 
```

至

```
<div class="main-menu" style="position:relative;z-index:9999;"> 
```

修改类`main-menu`将是实现整个站点一致性的更好主意，无论哪种方式都可以解决您的问题。

# java - 从 Java 访问 MongoDB

> ID：16046852
> 
> 赞同：3
> 
> 时间：2013-04-16T20:52:03.280
> 
> 标签：java, mongodb

我正在试用 MongoDB，我想知道将数据从 MongoDB 映射到 Java 的最佳方式是什么。

我的用例是我正在尝试存储 100.000 多个文档（比如电影+演员信息），并且我想存储文本和图像数据（小图像，大约 100kb-300kb）

*   我试过 Morphia，但它似乎已经死了。
*   Morphia有一个分支，但我找不到任何经验
*   我可以手动进行任何数据映射，但这似乎需要做很多工作，而且我“害怕”我会再次得到像 Morphia 这样的东西，让自己更容易
*   我现在还有 MongoDB 的 Spring Data，但我还没有检查出来。

前进的最佳方式是什么？我有以下问题：

*   我应该选择 ORM，还是应该自己做映射？电影似乎很有条理，所以我不明白为什么不使用 ORM。
*   如果我选择 ORM，选择 Spring Data 而不是 Morphia 有什么好处（除了最近几个月似乎没有 Morphia 的发布），或者有什么我没有想到的解决方案？
*   并且有可能再次提出一个过于宽泛的问题：在存储/检索数据时，我还需要考虑其他事项吗？例如，考虑到我想同时搜索两者，我是否应该为 Movie 和 Actor 创建一个集合？还是应该将 Actor 和 Movie 关系合并到一个文档中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:23:10.527

试试[SpringData MongoDB](http://www.springsource.org/spring-data/mongodb) - 这是迄今为止将 POJO 映射到文档的最简单方法。你能给我一些关于你的设置（IDE、构建工具等）的信息，我可以给你举个例子吗？

我只是把一个简单的例子放在一起并发布[在 GitHub 上](https://github.com/dwelch2344/spring-data-mongo-demo)。看一看

# html - Angular.js 部分

> ID：16046853
> 
> 赞同：2
> 
> 时间：2013-04-16T20:52:05.307
> 
> 标签：html, css, web, angularjs

我正在制作一个非常简单的网站，并且很好奇如何模块化正文的内容部分，同时不理会网站的静态部分。我认为使用 partials 将是关键，但它们的运作方式与我最初想象的大不相同。这是我第一次使用 Angular，所以我对任何东西都不是很熟悉。

现在该网站有一个简单的设计，类似于以下内容：

```
<div id="wrapper">
  <div class="header"></div>
  <div class="sidebar">
    <ul>
      <li><a href={{option.path}}>Option 1</a></li>
      <li><a href={{option.path}}>Option 2</a></li>
      <li><a href={{option.path}}>Option 3</a></li>
    </ul>
  </div>
  <div class="content"></div>   <------ content changes with selected option in .sidebar
  <div class="footer"></div>
</div> 
```

除非此处存在固有的语法错误，否则当我单击一个选项时，我该怎么做才能使`.sidebar`不会`{{option.path}}`被附加到 URL 中？

目前，这就是我正在发生的事情：

1.  我在 index.html 上打开了我的网站，其中 .content 部分完全为空。
2.  然后用户选择一个选项，我想将他们的浏览器从 /index.html 定向到 /partials/option1.html。
3.  如果用户在选项 1 上再次单击，他们的浏览器将定向到 /partials/partials/option1.html，这将返回 404 错误。

有没有办法避免第 3 部分中的问题，或者这仅仅是部分的工作原理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T22:18:01.990

Angular JS 使用[$route](http://docs.angularjs.org/api/ng.%24route)为 URL 指定部分模板。您还需要了解[ngView](http://docs.angularjs.org/api/ng.directive%3angView)才能完成这项工作。

我承认 egghead.io 是 Angular 的一个很好的资源，但我认为你需要这个特定的屏幕投射 => [http://youtu.be/i9MHigUZKEM](http://youtu.be/i9MHigUZKEM)

[这个 LinkedIn 组还包含我遇到的每个 Angular.js 资源。](http://www.linkedin.com/groups?home=&gid=4896676)

# java - jnativehook 构建失败 jni.h 未找到

> ID：16046858
> 
> 赞同：1
> 
> 时间：2013-04-16T20:52:38.723
> 
> 标签：java

我一直在尝试从源代码构建 jnativehook。我使用的是 Windows 7。我经历了网站上描述的所有阶段。包括更改环境变量目前我在命令提示符下构建失败。我已经把它贴在下面了。

我不确定 jnativehook 文件应该在哪里提取，所以我尝试在文件位于不同位置时构建文件，包括根目录、java 目录和 java 文件夹内。

我检查了 jni.h 是否在 jnativehook (jhook) 文件中的任何位置，但它不是，但有一个名为 jni 的文件夹。java 目录中有 jni.h 文件，但它没有说明我必须将文件从 java 移动到 jhook 目录的任何地方。

有谁知道它是否应该提取到特定的地方？

还有谁知道这个错误是什么意思以及如何解决它？

任何帮助表示赞赏：[应用] C:\jhook\src\native\common/NativeErrors.h:36:17：致命错误：jni.h：没有这样的文件或目录 [应用] 编译终止。[应用] gcc.exe: Files\Java\jdk1.7.0_07\include: 没有这样的文件或目录 [应用] gcc.exe: Files\Java\jdk1.7.0_07\include\win32: 没有这样的文件或目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-01T00:19:02.023

这是因为您将 java 安装到其中包含空格的位置。这在 1.2 版或主干中应该不是问题。如果您需要编译 1.1，请在 java.include 属性中使用 \ 或两个转义空格。您可以在 build.properties 文件中进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T15:24:28.800

尝试使用jdk1.6.0等其他版本的jdk

希望这可以帮助。

# actionscript-3 - 将对象随机放置在舞台外的圆形路径上。[AS3]

> ID：16046859
> 
> 赞同：0
> 
> 时间：2013-04-16T20:52:39.383
> 
> 标签：actionscript-3, flash, actionscript

我正在为一个项目创建一个游戏并且偶然发现了一个问题。我已经设法弄清楚如何使用 Action Script 3 创建补间并使它们转到舞台上的特定点，但是当将对象重置到舞台外的随机点时出现了问题。

游戏是一款简单的点击杀戮游戏，敌人在舞台上从各个角度接近你的基地，你需要多次点击才能消灭它们。

我可以编写游戏的其余部分，但是我不知道如何让对象在舞台外的随机点产生，然后向舞台中心移动。

我附上了一张照片，描绘了我正在努力完成的事情。

提前感谢您的帮助！

[http://postimg.org/image/ch8iakok7/](http://postimg.org/image/ch8iakok7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:32:12.250

我会做这样的事情：

```
// increase or decrease radius to your liking  
var radius:Number = 500; 

// get a random angle (in radians)
var angle:Number = 2 * Math.PI * Math.random();

var spawnX:Number = radius * Math.cos(angle);
var spawnY:Number = radius * Math.sin(angle); 
```

# validation - 带有 Jersey 实现的 JAX-RS 中 POST 申请的 Bean 验证

> ID：16046860
> 
> 赞同：4
> 
> 时间：2013-04-16T20:52:40.443
> 
> 标签：validation, http, jersey, jax-rs

我正在为 JAX-RS 使用 Jersey 实现，并且我正在寻找一个可以在 POST 申请中使用 Bean Validation 的示例。我有这个操作，例如：

```
@POST
@Path("document/annotations/save")
@Produces("application/json")
@Consumes(MediaType.APPLICATION_FORM_URLENCODED)
public Map<String, Object> saveAnnotation(
        @FormParam("user") String userStr,
        @FormParam("documentId") String documentId,
        @FormParam("documentPage") Integer documentPage,
        @FormParam("annotationContent") String annotationContent,
        @FormParam("annotationId") Long annotationId,
        @FormParam("isMobile") Boolean isMobile) { // the code... } 
```

我想为每个方法参数使用验证约束（`@NotNull`，`@Pattern`等）。我看到了这个[文档](http://docs.jboss.org/seam/3/rest/latest/reference/en-US/html/rest.validation.html)，他们使用 Seam 框架来做到这一点。

目前，我正在尝试使用该`javax.validation`实现来验证我的请求，但它不起作用。

有没有办法将 JSR-303 规范与 JAX-RS 一起使用？

坦克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:16:13.063

目前使用泽西岛是不可能的；一种可能的替代方法是编写客户资源过滤器并绑定到`@NotNull`等注释。

如果将其封装在资源类中会更简单，因为您可以绑定到`@Valid`方法上的注释并一次性验证 bean。

因为 JSR-303 旨在处理 bean 而不是参数集合，所以当您尝试按照自己的意愿弯曲它时，它最终会变得非常冗长。

恕我直言，最好不要将验证保留在您的类中，而是使用管道和过滤器模式，即`ContainerRequestFilter`，或者像@Willy 建议的那样使用 AspectJ 之类的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-10T18:51:53.653

这是可能的。查看最新泽西岛的文档

[https://jersey.java.net/documentation/latest/bean-validation.html#d0e9380](https://jersey.java.net/documentation/latest/bean-validation.html#d0e9380)

[https://jersey.java.net/documentation/latest/bean-validation.html](https://jersey.java.net/documentation/latest/bean-validation.html)

# php - 在 MYSQL 中创建序列

> ID：16046862
> 
> 赞同：-5
> 
> 时间：2013-04-16T20:52:44.910
> 
> 标签：php, sql, oracle

我在 oracle 中有一个 PL/SQL 序列。我使用 oracle DB 和 php 代码如下-

```
CREATE SEQUENCE SEQ_ID
START WITH 1
INCREMENT BY 1
MAXVALUE 99999999
MINVALUE 1
NOCYCLE; 
```

像这样在列中插入值

```
UPDATE tableName SET columnName = seq_test_id.NEXTVAL 
```

我如何在 php oci_parse 中实现它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:59:05.497

假设您要使用 Oracle，只需设置语句、解析和执行即可。无需进行任何绑定，因为您没有绑定变量。这改编自[oci_parse 的 PHP 文档](http://php.net/manual/en/function.oci-parse.php)：

```
$conn = oci_connect(your username, your password, your database);
$stid = oci_parse($conn, 'UPDATE tableName SET columnName = seq_test_id.NEXTVAL');
oci_execute($stid); 
```

# android - Android Layout 背景图片和颜色

> ID：16046864
> 
> 赞同：9
> 
> 时间：2013-04-16T20:52:53.710
> 
> 标签：android, android-layout

我需要添加什么，以便我有一个背景图像和 main.xml 的背景颜色

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="330dp"
android:layout_height="600dp"
android:layout_gravity="center|center_vertical"
android:background="@drawable/background"
> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T20:55:06.300

您应该能够简单地填充父对象，然后相应地设置背景图像。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/background"
> 
```

# jsf - EntityManager 上的瞬态导致异常

> ID：16046873
> 
> 赞同：0
> 
> 时间：2013-04-16T20:53:25.990
> 
> 标签：jsf, jpa, jsf-2, facelets

我正在为我的 JSF 应用程序使用视图范围的托管 bean。由于需要对视图范围的 bean 进行序列化，因此我实现了 Serializable。但问题在于EntityManager。我尝试使用瞬态关键字绕过它，但出现以下异常。

我使用了以下 bean 文件：

```
@ManagedBean
@ViewScoped
public class StatusBean2 implements Serializable  {

    /**
     * 
     */
    private static final long serialVersionUID = -7528998562821856315L;
    private transient EntityManager em;

    public StatusBean2() {
        EntityManagerFactory emf = Persistence
                .createEntityManagerFactory("FreeBird");
        em = emf.createEntityManager();
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext()
                .getSession(true);
        int toIndex = 5;
       session.setAttribute("toIndex", toIndex);

    }
    public List<Status> getStatusList() {
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext()
                .getSession(true);
        User user = (User) session.getAttribute("userdet");
        Query query = em.createQuery("SELECT s FROM Status s WHERE s.email='"//  line no 49
                + user.getEmail() + "' ORDER BY s.timeMillis desc",
                Status.class);
        List<Status> results = query.getResultList();
        Query query1 = em.createQuery("SELECT f FROM Friend f WHERE f.email='"
                + user.getEmail() + "'", Friend.class);
        List<Friend> results1 = query1.getResultList();
        Iterator<Friend> it = results1.listIterator();
        while (it.hasNext()) {
            String email = it.next().getFriendEmail();
            Query query2 = em.createQuery(
                    "SELECT s FROM Status s WHERE s.email='" + email
                            + "' ORDER BY s.timeMillis desc", Status.class);
            List<Status> results2 = query2.getResultList();
            results.addAll(results2);

        }
        Collections.sort(results);

        int toIndex = (int) session.getAttribute("toIndex");
        List<Status> subList = results.subList(0, toIndex);

        return subList;

    }
} 
```

当我在 EntityManager 上瞬态时遇到的异常如下：

```
javax.el.ELException: /Home.xhtml @458,24 items="#{statusBean2.statusList}": Error reading 'statusList' on type com.bean.StatusBean2
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:111)
    at com.sun.faces.facelets.tag.jstl.core.ForEachHandler.apply(ForEachHandler.java:158)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:94)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:131)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:162)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:114)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:94)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.applyNextHandler(DelegatingMetaTagHandler.java:131)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:162)
    at javax.faces.view.facelets.DelegatingMetaTagHandler.apply(DelegatingMetaTagHandler.java:114)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:94)
    at com.sun.faces.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:89)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:94)
    at com.sun.faces.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:79)
    at com.sun.faces.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:148)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.buildView(FaceletViewHandlingStrategy.java:711)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:96)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:135)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:309)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NullPointerException
    at com.bean.StatusBean2.getStatusList(StatusBean2.java:49)
    at sun.reflect.GeneratedMethodAccessor78.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:87)
    at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67)
    at com.sun.faces.el.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:71)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:169)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:106) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T22:15:47.317

反序列化对象时不调用构造函数，因此该`transient`字段为 left `null`。

您需要延迟初始化该字段：

```
@ManagedBean
@ViewScoped
public class StatusBean2 implements Serializable  {
    private static final long serialVersionUID = -7528998562821856315L;
    private transient EntityManager em;
    private static final EntityManagerFactory emf = Persistence.createEntityManagerFactory("FreeBird");

    public StatusBean2() {
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext()
                .getSession(true);
        int toIndex = 5;
        session.setAttribute("toIndex", toIndex);   
    }

    private EntityManager em() {
        if(em == null)
            em = emf.createEntityManager();
        return em;
    }

    public List<Status> getStatusList() {
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext()
                .getSession(true);
        User user = (User) session.getAttribute("userdet");
        Query query = em().createQuery("SELECT s FROM Status s WHERE s.email='"//  line no 49
                + user.getEmail() + "' ORDER BY s.timeMillis desc", Status.class);
        List<Status> results = query.getResultList();
        Query query1 = em().createQuery("SELECT f FROM Friend f WHERE f.email='"
                + user.getEmail() + "'", Friend.class);
        List<Friend> results1 = query1.getResultList();
        Iterator<Friend> it = results1.listIterator();
        while (it.hasNext()) {
            String email = it.next().getFriendEmail();
            Query query2 = em().createQuery(
                    "SELECT s FROM Status s WHERE s.email='" + email + 
                    "' ORDER BY s.timeMillis desc", Status.class);
            List<Status> results2 = query2.getResultList();
            results.addAll(results2);
        }
        Collections.sort(results);
        int toIndex = (int) session.getAttribute("toIndex");
        List<Status> subList = results.subList(0, toIndex);
        return subList;
    }
} 
```

# mongodb - 在 MongoDB 中更新或插入

> ID：16046876
> 
> 赞同：0
> 
> 时间：2013-04-16T20:53:49.020
> 
> 标签：mongodb, insert

如果字段已经存在，如何更新文档中的字段，否则更新字段的值？$set 在该字段已经存在的文档上更新得很好。刚刚发现很多提示如何将新字段插入到整个集合中，但是如何在文档的基础上解决这个问题？

问候，克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T05:27:16.810

[$set](http://docs.mongodb.org/manual/reference/operator/set/)将添加一个或多个指定字段，如果它们在此文档中不存在，或者如果它们已经存在，则替换指定字段的现有值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T21:06:39.323

在更新语句中使用[upsert](http://docs.mongodb.org/manual/core/update/#update-operations-with-the-upsert-flag)标志。

# jquery - 如何设置超时延迟。每个循环

> ID：16046877
> 
> 赞同：0
> 
> 时间：2013-04-16T20:54:11.333
> 
> 标签：jquery

有没有办法以时间延迟显示这些图像。提前致谢。

```
 $.each(people, function(i, data){

            if(this.dead == true){
                $('#item7').prepend(' <span style="position:relative; top: 7px;"><img src="images/alive.png"/> </span> ');
                }else if(this.dead == false){
                    $('#item7').prepend(' <span style="position:relative; top: 7px;"><img src="images/alive1.png"/> </span> ');
                }

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:04:45.713

是的，有办法。其实方法很多。

这是我可能会使用的：

```
$.each(people, function(i, data) {
    var src = this.dead ? 'images/alive.png' : 'images/alive1.png';
    $('<span style="position:relative; top: 7px; display: none;">')
               .append($('<img>', { src: src }))
               .prependTo('#item7')
               .delay(i * 1000)
               .show('fast');
}); 
```

它确保元素最初是不可见的 ( `display: none`)，然后使用 jQuery 动画延迟来排队`.show()`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:02:23.413

使用 setTimeout 来延迟它。那些 == true 和 == false 操作是什么？如果你想确保你的死属性为假或真，用===比较，否则，一个if()就足够了。

```
$.each(people, function(i, data) {
    setTimeout(function() {
        $('#item7').prepend($('<span style="position:relative; top: 7px;">').html($('<img/>', { src : (this.dead ? "images/alive.png" : "images/alive1.png") })));
    }, i * 500);
}); 
```

在这里观看一个例子：http: [//jsfiddle.net/cLhvf/](http://jsfiddle.net/cLhvf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T21:17:08.347

这取决于你的意思。

var延迟= 500；(function(elements, index) { elements[index];//随心所欲。 setTimeout(function(){arguments.calle(elements, index + 1);}, delay); })(people, 0 )

$.each(people, function(i, data) { var self = this; setTimeout(function() { // 在这里做任何你想做的事情 }, delay); });

我认为延迟在这里不起作用。我可能是错的

所有代码都未经测试。

# java - Java 线程不要杀死其他线程并且不会从向量项中删除

> ID：16046878
> 
> 赞同：0
> 
> 时间：2013-04-16T20:54:20.047
> 
> 标签：java, multithreading, vector

我有线程向量，我想检查这个向量中的所有项目。每个人的项目是用户到服务器的连接。我想“清理”所有死连接。我找不到我错的地方。这是我的代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package server;

import java.util.Iterator;
import java.util.Vector;
import java.util.logging.Level;
import java.util.logging.Logger;
import server.ServerCore.Clients;

/**
 *
 * @author pisio
 */
public class GrimReaper extends Thread {

    private int timeout = LoadSettings.Init().getConfigInt("grimreaper") * 1000; // 1000 ms = 1 sec

    public GrimReaper() {
        super();
    }

    public void cleanUserThreads() {
        Vector users = ServerCore.users;
        if (users.size() < 1) {
            return;
        }
        Iterator iteratr = users.iterator();
        while (iteratr.hasNext()) {

            Clients user = (Clients) iteratr.next();
            System.out.println(user.isAlive());
            if (user.getClient().isClosed()) {
                user.interrupt();
                if (user.isInterrupted()) {
                    System.out.println("Beshe kiknat");
                }
                iteratr.remove();
                // if (PublicVaribles.Init().systemLevelMesseging() == 2) {

                System.out.println("+\t Kicked user ");
                // }
            }//if is dead
        }//while
    }//cleanUserThreads;

    @Override
    public void run() {
        try {
            while (ServerCore.getServerRunning()) {

                cleanUserThreads();
                sleep(timeout);
                System.out.println("nani na shinigami");
            }

        } catch (InterruptedException ex) {
            Logger.getLogger(GrimReaper.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

包服务器；

```
import java.io.*;
import java.net.*;
import java.util.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import server.DB.DataBase;

public class ServerCore extends Thread {

    private static ServerCore sc = null;
    private int port = LoadSettings.Init().getConfigInt("port");
    private int max_connections = LoadSettings.Init().getConfigInt("max_connections");
    private String ipServer = LoadSettings.Init().getConfig("ipServer");
    private ServerSocket socket;
    private static boolean serverRuning = false;
    public static Vector users = new Vector();
    public GrimReaper shinigami = new GrimReaper();// Shinigami from Japanice is Grim Reaper!

    private ServerCore() {
    }

    @Override
    public void run() {

        shinigami.start(); 

        try {
            socket = new ServerSocket(port, max_connections);

            System.out.println("+++\t Server was started at  address:" + socket.getLocalSocketAddress() + " with posible max users " + max_connections);

            serverRuning = true;

            while (serverRuning) {
                Socket client = socket.accept();
                shinigami.cleanUserThreads();
                if (users.size() < max_connections) {

                    Clients cls = new Clients(client);
                    cls.start();
                    users.add(cls);
                    System.out.println("++\tClient was connected:" + client.toString());
                } else {
                    Clients cls = new Clients(client);
                    cls.start();
                    cls.getOutput().println("sorry_no_avable_slot");
                    cls.getOutput().flush();
                    cls.interrupt();
                }
            }

        } catch (IOException ex) {
            // Logger.getLogger(ServerCore.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
    //run method

    public void sendUserMsg() {
        Scanner input = PublicVaribles.Init().inputKeyBord();

        System.out.print("Enter UserID/user connection port:");
        int userID = input.nextInt();

        Iterator iterator = users.iterator();
        while (iterator.hasNext()) {

            Clients cls = (Clients) iterator.next();
            ///  System.out.println("Passed user:" + cls.getUserId());

            if (cls.getUserId() == userID) {

                System.out.print("\nEnter msg:");

                String str = input.next();
                cls.getOutput().println(str);

                System.out.println("+\t" + cls.getUserId() + " get msg :" + str);

            }

        }

    }
    //SendUserMsg

    public void stopServer() {
        statusServer();
        serverRuning = false;
        try {

            socket.close();
        } catch (IOException ex) {
            Logger.getLogger(ServerCore.class.getName()).log(Level.SEVERE, null, ex);
        }
        System.out.println("+++\t  SERVER WAS STOPED !");
    }
    //Stop server

    public void statusServer() {
        if (serverRuning) {
            System.out.println("+++\t Server running at port:" + port + "  with connected users :" + users.size() + "/" + max_connections);

        } else {
            System.out.println("+++\t Server IS NOT RUNNING!");
        }
    }
    //Status server

    public static boolean getServerRunning() {
        // function for GrimReaper  .... R.I.P :D
        return ServerCore.serverRuning;
    }

    public static ServerCore Init() {
        if (ServerCore.sc == null) {
            ServerCore.sc = new ServerCore();
        }
        return ServerCore.sc;
    }
// SingleTon

    public class Clients extends Thread {

        private Socket client;
        private int userID;
        private Scanner input;
        private PrintWriter output;

        public Clients(Socket socket) {
            client = socket;
            userID = socket.getPort();

            try {
                input = new Scanner(client.getInputStream());
                output = new PrintWriter(client.getOutputStream(), true);
            } catch (IOException ioEx) {
                System.out.println(ioEx.toString());
            }
        }

        public int getUserId() {
            return userID;
        }

        public Scanner getInput() {
            return input;
        }

        public PrintWriter getOutput() {
            return output;
        }

        public Socket getClient() {
            return client;
        }
    }//Clients Class
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:00:50.000

注意：我假设`Clients`extends `Thread`。

看起来您可能使用[`interrupt()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupt%28%29)不正确。在调用 之后`user.interrupt()`，由该线程检查它是否已被调用中断，[`Thread.interrupted()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#interrupted%28%29)如果为真则终止自身。这是一个非常基本的示例：

```
class Clients extends Thread {
    @Override
    public void run() {
        while (!Thread.interrupted()) {
            //do work
        }
        //thread has been interrupted and quits
    }
} 
```

# javascript - 使用jQuery从父元素中删除类？

> ID：16046879
> 
> 赞同：5
> 
> 时间：2013-04-16T20:54:22.850
> 
> 标签：javascript, jquery

我不知道如何从父元素中删除类，基本上我有一个`<audio>`标签（从现在开始称为`this`），它位于 div 内，`class="playing"`我该如何删除这个类？

试过这个，但比理解它会从音频元素中删除类而不是它的父 div：

```
this.removeClass("playing"); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T20:55:34.920

```
this.parent().removeClass("playing"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T20:55:43.473

```
$(this).closest('div').removeClass("playing") 
```

或者

```
$(this).closest('div.playing').removeClass('playing') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T21:04:59.277

JSfiddle [Demo](http://jsfiddle.net/dekajp/XSDrv/1/)

```
<div class="bold">
<p id="p1" class="blue under">Hello</p>
</div>
<div class="bold">
  <p  id="p2" class="blue under highlight">and</p>
</div>
  <p class="blue under">then</p>
  <p class="blue under">Goodbye</p>

$("#p1").parent().removeClass("bold"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-16T20:55:43.733

```
this.closest('div[class=playing]').removeClass("playing"); 
```

# python - 我有一个数字列表和某个总和，我需要计算生成该总和的可能方法数

> ID：16046880
> 
> 赞同：0
> 
> 时间：2013-04-16T20:54:26.620
> 
> 标签：python

此外，允许数字重复。

我参考了这个程序：

```
def subset_sum_recursive(numbers,target,partial):
    s = sum(partial)

    #check if the partial sum is equals to target
    if s == target: 
        print "sum(%s)=%s"%(partial,target)
    if s >= target:
        return # if we reach the number why bother to continue

    for i in range(len(numbers)):
        n = numbers[i]
        remaining = numbers[i+1:]
        subset_sum_recursive(remaining,target,partial + [n]) 

def subset_sum(numbers,target):
    #we need an intermediate function to start the recursion.
    #the recursion start with an empty list as partial solution.
    subset_sum_recursive(numbers,target,list())

if __name__ == "__main__":
    subset_sum([3,9,8,4,5,7,10],15)

    #Outputs:
    #sum([3, 8, 4])=15
    #sum([3, 5, 7])=15
    #sum([8, 7])=15
    #sum([5, 10])=15 
```

但我不知道在哪里放置 count 变量，它太混乱了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:59:19.770

看起来你有一个典型的[计数硬币](http://rosettacode.org/wiki/Count_the_coins "数硬币")问题。

您在那里看到的所有片段都应该解决您想要解决的问题（它还包括重复使用相同数字的组合）。我发现该 wiki 上的这个 python 版本很方便，但速度很慢：

```
def changes(amount, coins):
    ways = [0] * (amount + 1)
    ways[0] = 1
    for coin in coins:
        for j in xrange(coin, amount + 1):
            ways[j] += ways[j - coin]
    return ways[amount]

print changes(100, [1, 5, 10, 25])
print changes(100000, [1, 5, 10, 25, 50, 100]) 
```

如果您想了解更多信息，请参阅[之前](https://stackoverflow.com/a/13471262/1255039)对类似问题的回答 - 它分解了问题的可能变体并提供了一个非常好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:30:18.683

不确定解决此问题的规范方法，可能是大师知道的。但我发现我的解决方案非常好：

```
import itertools
inp = [3,9,8,4,5,7,10]
outp = list()
target = 15
for x in range(2,len(inp)):
    outp.extend([ tsum for tsum in itertools.combinations(inp,x) if sum(tsum) == target ])
outp 
```

UPD 这对于小输入是相当令人满意的。对于大输入，它不能很好地扩展。– @gnibbler如果您有大量输入，请考虑阅读[此问题](https://stackoverflow.com/questions/4632322/finding-all-possible-combinations-of-numbers-to-reach-a-given-sum)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T21:41:39.580

您还可以在找到一个解决方案时在 main 中定义一个列表并附加到列表中：

```
if s == target:
        print "sum(%s)=%s"%(partial,target)
        solutions.append("sum(%s)=%s"%(partial,target))

if __name__ == "__main__":
    solutions=[]
    subset_sum([3,9,8,4,5,7,10],15)
    print len(solutions) # output: 4 
```

# c++ - 如何打印对象的 LinkedList

> ID：16046884
> 
> 赞同：1
> 
> 时间：2013-04-16T20:54:42.027
> 
> 标签：c++, printing, doubly-linked-list

我正在尝试打印出统计对象的链接列表。我有一个统计类，其构造函数包含名称、级别和 exp。但我无法打印出来。这就是我尝试这样做的方式：

```
void Print(DoublyLinkedList<Datatype> p_list)
    {
        int index = -1;
        //Set up a new Iterator.
        //DoublyLinkedListIterator<Datatype> itr = getIterator();
        for(itr.Start(); itr.Valid(); itr.Forth())
        {
                index++;
                cout <<"Index: "<< index << "\tElement: " << itr.Item() << "\n";
        }
        cout <<"Number of Elements in the List: " << m_count << endl;
    } 
```

这会导致 itr.item() 的 cout 出错。错误是：

`Error 1 error C2679: binary '<<' : no operator found which takes a right-hand operand of type 'Stats' (or there is no acceptable conversion)`

这是来自 doublyLinkedlist 类，我在 main() 中设置了一个linkedList，然后我尝试从 main() 执行 list.print(list)。

在 Stats.cpp 中编辑

```
#include "Stats.h"
#include <string>
#include <iostream>

Validators validators2;

Stats::Stats()
{
    firstName = "";
    secondName = "";
    level = 0;
    experience = 0;
}
Stats::Stats(string firstName,string secondName, int level, int experience)
{
    firstName = firstName;
    secondName = secondName;
    level = level;
    experience = experience;

}
    string Stats :: getFirstName()
    {
        return firstName;
    }
    string Stats :: getSecondName()
    {
        return secondName;
    }
    int Stats :: getLevel()
    {
        return level;
    }
    int Stats :: getExperience()
    {
        return experience;
    }
    Stats Stats :: input()
    {
        firstName = "Please enter the First Name: ";
        string inputfirstName = validators2.getString(firstName);
        secondName = "Please enter the Second Name: ";
        string inputSecondName = validators2.getString(secondName);
        cout<< "Please enter the level: ";
        int inputLevel = validators2.getNum();
        cout<< "Please enter the experience: ";
        int inputExperience = validators2.getNum();

        Stats s1(inputfirstName,inputSecondName,inputLevel,inputExperience);
        return s1;

    } 
```

在此先感谢...贝卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:58:49.120

该错误准确地说明了问题所在 - 运算符**<<**不知道如何处理您尝试打印的类型的对象。如果你想使用这样的代码，你必须为 Stats 类重载操作符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T21:01:49.347

正如它所说：你没有为你的班级统计定义 operator<<。你必须定义这个：

```
 std::ostream& operator<<(std::ostream& os, const Stats& s){
    //define what it means to cout<<Stats, for example:
    //print some attributes
    os<<"\nfirstName: "<<s.getFirstName();
    os<<"\nsecondName: "<<s.getSecondName();
    os<<"\nlevel: "<<s.getLevel();
    //and so on

    return os; // so chunk is possible os<<a<<b<<c
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T21:02:01.863

根据您收到的消息，您只需为 Stats 类型声明 operator <<。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T21:02:05.683

您需要提供

```
std::ostream & operator<<(std::ostream &os, const Stats& s) 
```

它应该是免费的 funton，而不是 Stats 的成员

# jquery - jquery：为什么当我更改选择中的选定选项时.change不听

> ID：16046885
> 
> 赞同：0
> 
> 时间：2013-04-16T20:54:43.857
> 
> 标签：jquery, jquery-mobile

我有这个听众：

```
$("#chosenpro").change(function(){ ...}); 
```

但是当我在另一个函数中使用它更改所选值时它不会听到：

```
$('#chosenpro option:first').attr("selected", "selected");
$('#chosenpro').selectmenu("refresh", true); 
```

有什么提示吗？

我正在使用 jquery-mobile。

这是小提琴：http: [//jsfiddle.net/GCf3y/2/](http://jsfiddle.net/GCf3y/2/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:00:58.673

尝试添加这个以`change`编程方式触发。

```
$('#chosenpro').trigger('change'); 
```

[http://jsfiddle.net/GCf3y/](http://jsfiddle.net/GCf3y/)

# javascript - 如何传递带有命名参数的函数

> ID：16046887
> 
> 赞同：-1
> 
> 时间：2013-04-16T20:54:48.467
> 
> 标签：javascript, jquery, argument-passing

我正在创建一个扩展功能：

```
 jQuery.fn.openCreatePersonModal = function (arg1, personHandler) {
        var person = { "displayName": "john" };
        personHandler(person);
        return this;
  } 
```

但不能使用它，也不能这样：

```
$("<div></div>").openCreatePersonModal({
    arg1: "bla",
    personHandler: somePreviouslyCreatedFunction
}); 
```

也不是这样：

```
$("<div></div>").openCreatePersonModal({
    arg1: "bla",
    personHandler: function(person) { ... }
}); 
```

我得到：未定义不是一个函数

所以它没有将 somePreviousCreatedFunction 识别为一个函数。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-16T21:08:36.080

如果想使用命名参数，应该使用 1 个参数并将其解释为一个对象

```
jQuery.fn.openCreatePersonModal = function (args) {
       var person = { "displayName": "john" };
       args.personHandler(person);                   // <-- notice "args."
       return this;
} 
```

# .net - 如何在 Windows Server 2003 R2 上安装“Oracle 数据访问组件 (ODAC)”？

> ID：16046890
> 
> 赞同：1
> 
> 时间：2013-04-16T20:54:52.997
> 
> 标签：.net, oracle11g, windows-server-2003, oracleclient, odac

我最近在我的计算机（Windows 7、64 位）上安装了“[带有 Oracle Developer Tools for Visual Studio 的 32 位 Oracle 数据访问组件 (ODAC) ”。](http://www.oracle.com/technetwork/topics/dotnet/utilsoft-086879.html)一切似乎都很好，我可以在 Visual Studio 2010 和 IIS 7 中开发和运行我的应用程序。

现在，当我将应用程序部署到服务器时，它会引发错误：

> 异常：System.TypeInitializationException：“Oracle.DataAccess.Client.OracleCommand”的类型初始化程序引发异常。---> Oracle.DataAccess.Client.OracleException: 提供程序与 Oracle 客户端版本不兼容

显然我也需要在服务器上安装 ODAC。我的服务器是：

*   Windows 2003 32 位 R2（我知道，我知道！）
*   IIS 6

所以。我从 Oracle 网站下载了相同的安装（ODAC 11.2 Release 5 和 Oracle Developer Tools for Visual Studio [11.2.0.3.20]）并将其安装在服务器上。但仍然得到同样的错误。

PS：我在安装的时候在Oracle Universal Installer中选择了**Oracle Data Access Component for Oracle Client 11.2.0.3.20 。**嗯。我应该选择“Oracle 服务器”吗？

![在此处输入图像描述](https://i.stack.imgur.com/88N9d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T21:42:52.140

第一个选项（Oracle 客户端 11.2.0.3.20 的 Oracle 数据访问组件）对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-15T12:46:49.517

这是一个旧帖子，但对于可能面临类似问题的其他用户，这里是一个详细说明的帖子

[http://www.codewithasp.net/2012/06/step-by-step-instructions-to-install.html](http://www.codewithasp.net/2012/06/step-by-step-instructions-to-install.html)

# delphi - 使用货币数据类型时 Delphi XE2 中的奇怪格式结果

> ID：16046895
> 
> 赞同：1
> 
> 时间：2013-04-16T20:55:03.357
> 
> 标签：delphi, delphi-xe2

在 Delphi XE2 中，我在格式化`Currency`. 使用`Double`按预期工作。

看起来当使用`%F`or `%N`（浮点数或数字）时，即使您请求的数量更少，您也总是得到 3 个十进制数字。

*   使用 format`'%.1f'`的`Double`值`3.1415`将变为`'3.1'`，但 的`Currency`值`3.1415`将变为`'3.142'`（假设 en-US 区域设置）。
*   使用 format`'%4.0n'`的`Double`值`3.1415`将变为`' 3'`，但 的`Currency`值`3.1415`将变为`'3.142'`（假设 en-US 区域设置）。

我写了下面的快速 DUnit 测试用例，明天将进一步调查。

这个特定的项目不能更改为 Delphi XE2 以外的任何东西（大公司在他们使用的工具上并不灵活），所以我正在寻找在 Delphi XE2 中解决这个问题的解决方案。

同时：你的想法是什么？

```
unit TestSysUtilsFormatUnit;

interface

uses
  TestFramework, System.SysUtils;

type
  TestSysUtilsFormat = class(TTestCase)
  strict private
    DoublePi: Double;
    CurrencyPi: Currency;
    FloatFormat: string;
    NumericFormat: string;
    Expected_Format_F: string;
    Expected_Format_N: string;
  public
    procedure SetUp; override;
    procedure TearDown; override;
  published
    procedure Test_Format_F_Double;
    procedure Test_Format_F_Currency;
    procedure Test_Format_N_Double;
    procedure Test_Format_N_Currency;
  end;

implementation

procedure TestSysUtilsFormat.Test_Format_F_Double;
var
  ReturnValue: string;
begin
  ReturnValue := System.SysUtils.Format(FloatFormat, [DoublePi]);
  Self.CheckEqualsString(Expected_Format_F, ReturnValue); // actual '3.1'
end;

procedure TestSysUtilsFormat.Test_Format_F_Currency;
var
  ReturnValue: string;
begin
  ReturnValue := System.SysUtils.Format(FloatFormat, [CurrencyPi]);
  Self.CheckEqualsString(Expected_Format_F, ReturnValue); // actual '3.142'
end;

procedure TestSysUtilsFormat.Test_Format_N_Double;
var
  ReturnValue: string;
begin
  ReturnValue := System.SysUtils.Format(NumericFormat, [DoublePi]);
  Self.CheckEqualsString(Expected_Format_N, ReturnValue); // actual '   3'
end;

procedure TestSysUtilsFormat.Test_Format_N_Currency;
var
  ReturnValue: string;
begin
  ReturnValue := System.SysUtils.Format(NumericFormat, [CurrencyPi]);
  Self.CheckEqualsString(Expected_Format_N, ReturnValue); // actual '3.142'
end;

procedure TestSysUtilsFormat.SetUp;
begin
  DoublePi := 3.1415;
  CurrencyPi := 3.1415;
  FloatFormat := '%.1f';
  Expected_Format_F := '3.1';
  NumericFormat := '%4.0n';
  Expected_Format_N := '   3';
end;

procedure TestSysUtilsFormat.TearDown;
begin
end;

initialization
  RegisterTest(TestSysUtilsFormat.Suite);
end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:57:26.223

在对上述问题的评论中，应提问者的要求将其发布为答案。）

我无法使用普通控制台应用程序在 XE2 或 XE3 上重现该问题。（为我设置起来更快。）

这是我完全使用的代码（在 XE2/XE3 上）：

```
program Project1;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  SysUtils;

const
  DoublePi: Double = 3.1415;
  CurrencyPi: Currency = 3.1415;
  FloatFormat = '%.1f';
  NumericFormat = '%4.0n';
begin
  WriteLn(Format('Double   (.1f) : '#9 + FloatFormat, [DoublePi]));
  WriteLn(Format('Currency (.1f) : '#9 + FloatFormat, [CurrencyPi]));
  WriteLn(Format('Currency (4.0n): '#9 + NumericFormat, [CurrencyPi]));
  ReadLn;
end. 
```

这是 XE2 运行的输出（Delphi® XE2 版本 16.0.4429.46931）：

![格式化货币控制台应用程序输出](https://i.stack.imgur.com/9sa3z.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:21:17.070

这是这些方法中早期 Delphi XE 2 版本中的一个错误：

```
function WideFormatBuf(var Buffer; BufLen: Cardinal; const Format;
  FmtLen: Cardinal; const Args: array of const;
  const AFormatSettings: TFormatSettings): Cardinal;

function FormatBuf(var Buffer; BufLen: Cardinal; const Format;
  FmtLen: Cardinal; const Args: array of const;
  const AFormatSettings: TFormatSettings): Cardinal; 
```

失败：

*   Embarcadero® RAD Studio XE2 版本 16.0.4256.43595（更新 2）

（奇怪的是：该版本在开始“检查更新”时表示“没有可用的更新”）

我没有时间检查中间版本。

作品：

*   Embarcadero® RAD Studio XE2 版本 16.0.4429.46931（更新 4））
*   Embarcadero® Delphi® XE2 版本 16.0.4504.48759（更新 4 修补程序 1）

XE2 Update 4（带有或不带有修补程序）破坏的一件事是创建标准（非 IntraWeb）单元测试项目。

缺少此菜单项：[File -> New -> Other -> Unit Test -> Test Project](http://docwiki.embarcadero.com/RADStudio/XE2/en/Unit_Test_Project_Wizard)。

提醒我自己，这是快速开始使用缺少的测试项目条目的框架代码：

```
program UnitTest1;
{

  Delphi DUnit Test Project
  -------------------------
  This project contains the DUnit test framework and the GUI/Console test runners.
  Add "CONSOLE_TESTRUNNER" to the conditional defines entry in the project options
  to use the console test runner.  Otherwise the GUI test runner will be used by
  default.

}

{$IFDEF CONSOLE_TESTRUNNER}
{$APPTYPE CONSOLE}
{$ENDIF}

uses
  Forms,
  TestFramework,
  GUITestRunner,
  TextTestRunner;

{$R *.RES}

begin
  Application.Initialize;
  if IsConsole then
    with TextTestRunner.RunRegisteredTests do
      Free
  else
    GUITestRunner.RunRegisteredTests;
end. 
```

# sql-server - 优化删除【SQL Server 2000/2005/2008】

> ID：16046897
> 
> 赞同：0
> 
> 时间：2013-04-16T20:55:09.393
> 
> 标签：sql-server, optimization, between, sql-delete

我想知道是否有可能优化这样的查询：

```
delete tx_txn_detail 
where transaction_id BETWEEN 1 AND 1000 
```

其中 transaction_id 可以在 1 到 1000 之间或 1 到 1000000 之间取决于查询之一。

该表非常大（90+ 百万行），tran_id 被索引，用户始终访问数据库，它应该与 SQL Server 2000/2005/2008 兼容。

附上xml中的执行计划

```
 <?xml version="1.0" encoding="utf-16"?>
<ShowPlanXML xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" Version="1.0" Build="9.00.5069.00" xmlns="http://schemas.microsoft.com/sqlserver/2004/07/showplan">
  <BatchSequence>
    <Batch>
      <Statements>
        <StmtSimple StatementCompId="4" StatementEstRows="1" StatementId="1" StatementOptmLevel="TRIVIAL" StatementSubTreeCost="0.0232852" StatementText="DELETE [tx_txn_detail]  WHERE [transaction_id]&gt;=@1 AND [transaction_id]&lt;=@2" StatementType="DELETE">
          <StatementSetOptions ANSI_NULLS="false" ANSI_PADDING="false" ANSI_WARNINGS="false" ARITHABORT="true" CONCAT_NULL_YIELDS_NULL="false" NUMERIC_ROUNDABORT="false" QUOTED_IDENTIFIER="false" />
          <QueryPlan DegreeOfParallelism="1" CachedPlanSize="15" CompileTime="0" CompileCPU="0" CompileMemory="128">
            <RelOp AvgRowSize="9" EstimateCPU="2E-06" EstimateIO="0.02" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="1" LogicalOp="Delete" NodeId="0" Parallel="false" PhysicalOp="Table Delete" EstimatedTotalSubtreeCost="0.0232852">
              <OutputList />
              <RunTimeInformation>
                <RunTimeCountersPerThread Thread="0" ActualRows="615" ActualEndOfScans="1" ActualExecutions="1" />
              </RunTimeInformation>
              <Update>
                <Object Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" />
                <Object Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Index="[tx_txn_detail_PK_txn_seqid]" />
                <RelOp AvgRowSize="15" EstimateCPU="1E-07" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="1" LogicalOp="Top" NodeId="1" Parallel="false" PhysicalOp="Top" EstimatedTotalSubtreeCost="0.0032832">
                  <OutputList>
                    <ColumnReference Column="Bmk1000" />
                  </OutputList>
                  <RunTimeInformation>
                    <RunTimeCountersPerThread Thread="0" ActualRows="615" ActualEndOfScans="1" ActualExecutions="1" />
                  </RunTimeInformation>
                  <Top RowCount="true" IsPercent="false" WithTies="false">
                    <TopExpression>
                      <ScalarOperator ScalarString="(0)">
                        <Const ConstValue="(0)" />
                      </ScalarOperator>
                    </TopExpression>
                    <RelOp AvgRowSize="15" EstimateCPU="0.0001581" EstimateIO="0.003125" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="1" LogicalOp="Index Seek" NodeId="2" Parallel="false" PhysicalOp="Index Seek" EstimatedTotalSubtreeCost="0.0032831">
                      <OutputList>
                        <ColumnReference Column="Bmk1000" />
                      </OutputList>
                      <RunTimeInformation>
                        <RunTimeCountersPerThread Thread="0" ActualRows="615" ActualEndOfScans="1" ActualExecutions="1" />
                      </RunTimeInformation>
                      <IndexScan Ordered="true" ScanDirection="FORWARD" ForcedIndex="false" NoExpandHint="false">
                        <DefinedValues>
                          <DefinedValue>
                            <ColumnReference Column="Bmk1000" />
                          </DefinedValue>
                        </DefinedValues>
                        <Object Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Index="[tx_txn_detail_PK_txn_seqid]" />
                        <SeekPredicates>
                          <SeekPredicate>
                            <StartRange ScanType="GE">
                              <RangeColumns>
                                <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="transaction_id" />
                              </RangeColumns>
                              <RangeExpressions>
                                <ScalarOperator ScalarString="CONVERT_IMPLICIT(decimal(15,0),[@1],0)">
                                  <Identifier>
                                    <ColumnReference Column="ConstExpr1008">
                                      <ScalarOperator>
                                        <Convert DataType="decimal" Precision="15" Scale="0" Style="0" Implicit="true">
                                          <ScalarOperator>
                                            <Identifier>
                                              <ColumnReference Column="@1" />
                                            </Identifier>
                                          </ScalarOperator>
                                        </Convert>
                                      </ScalarOperator>
                                    </ColumnReference>
                                  </Identifier>
                                </ScalarOperator>
                              </RangeExpressions>
                            </StartRange>
                            <EndRange ScanType="LE">
                              <RangeColumns>
                                <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="transaction_id" />
                              </RangeColumns>
                              <RangeExpressions>
                                <ScalarOperator ScalarString="CONVERT_IMPLICIT(decimal(15,0),[@2],0)">
                                  <Identifier>
                                    <ColumnReference Column="ConstExpr1009">
                                      <ScalarOperator>
                                        <Convert DataType="decimal" Precision="15" Scale="0" Style="0" Implicit="true">
                                          <ScalarOperator>
                                            <Identifier>
                                              <ColumnReference Column="@2" />
                                            </Identifier>
                                          </ScalarOperator>
                                        </Convert>
                                      </ScalarOperator>
                                    </ColumnReference>
                                  </Identifier>
                                </ScalarOperator>
                              </RangeExpressions>
                            </EndRange>
                          </SeekPredicate>
                        </SeekPredicates>
                      </IndexScan>
                    </RelOp>
                  </Top>
                </RelOp>
              </Update>
            </RelOp>
            <ParameterList>
              <ColumnReference Column="@2" ParameterCompiledValue="(1000)" ParameterRuntimeValue="(1000)" />
              <ColumnReference Column="@1" ParameterCompiledValue="(1)" ParameterRuntimeValue="(1)" />
            </ParameterList>
          </QueryPlan>
        </StmtSimple>
      </Statements>
    </Batch>
    <Batch>
      <Statements>
        <StmtSimple StatementCompId="5" StatementEstRows="1" StatementId="2" StatementOptmLevel="FULL" StatementOptmEarlyAbortReason="GoodEnoughPlanFound" StatementSubTreeCost="0.00657038" StatementText="SELECT * FROM [tx_txn_detail] WHERE [transaction_id]&gt;=@1 AND [transaction_id]&lt;=@2" StatementType="SELECT">
          <StatementSetOptions ANSI_NULLS="false" ANSI_PADDING="false" ANSI_WARNINGS="false" ARITHABORT="true" CONCAT_NULL_YIELDS_NULL="false" NUMERIC_ROUNDABORT="false" QUOTED_IDENTIFIER="false" />
          <QueryPlan DegreeOfParallelism="1" CachedPlanSize="28" CompileTime="2" CompileCPU="2" CompileMemory="152">
            <RelOp AvgRowSize="117" EstimateCPU="4.18E-06" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="1" LogicalOp="Inner Join" NodeId="0" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="0.00657038">
              <OutputList>
                <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="transaction_id" />
                <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="seq_id" />
                <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="product_code" />
                <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="qty" />
                <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="value" />
                <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="bonus_pts" />
                <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="txn_sub_seqid" />
                <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="promotion_id" />
                <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="group_code" />
                <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="register_type" />
                <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="promotion_code" />
                <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="std_pts" />
              </OutputList>
              <RunTimeInformation>
                <RunTimeCountersPerThread Thread="0" ActualRows="615" ActualEndOfScans="1" ActualExecutions="1" />
              </RunTimeInformation>
              <NestedLoops Optimized="false">
                <OuterReferences>
                  <ColumnReference Column="Bmk1000" />
                </OuterReferences>
                <RelOp AvgRowSize="26" EstimateCPU="0.0001581" EstimateIO="0.003125" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="1" LogicalOp="Index Seek" NodeId="1" Parallel="false" PhysicalOp="Index Seek" EstimatedTotalSubtreeCost="0.0032831">
                  <OutputList>
                    <ColumnReference Column="Bmk1000" />
                    <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="transaction_id" />
                    <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="seq_id" />
                  </OutputList>
                  <RunTimeInformation>
                    <RunTimeCountersPerThread Thread="0" ActualRows="615" ActualEndOfScans="1" ActualExecutions="1" />
                  </RunTimeInformation>
                  <IndexScan Ordered="true" ScanDirection="FORWARD" ForcedIndex="false" NoExpandHint="false">
                    <DefinedValues>
                      <DefinedValue>
                        <ColumnReference Column="Bmk1000" />
                      </DefinedValue>
                      <DefinedValue>
                        <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="transaction_id" />
                      </DefinedValue>
                      <DefinedValue>
                        <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="seq_id" />
                      </DefinedValue>
                    </DefinedValues>
                    <Object Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Index="[tx_txn_detail_PK_txn_seqid]" />
                    <SeekPredicates>
                      <SeekPredicate>
                        <StartRange ScanType="GE">
                          <RangeColumns>
                            <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="transaction_id" />
                          </RangeColumns>
                          <RangeExpressions>
                            <ScalarOperator ScalarString="(1.)">
                              <Const ConstValue="(1.)" />
                            </ScalarOperator>
                          </RangeExpressions>
                        </StartRange>
                        <EndRange ScanType="LE">
                          <RangeColumns>
                            <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="transaction_id" />
                          </RangeColumns>
                          <RangeExpressions>
                            <ScalarOperator ScalarString="(1000.)">
                              <Const ConstValue="(1000.)" />
                            </ScalarOperator>
                          </RangeExpressions>
                        </EndRange>
                      </SeekPredicate>
                    </SeekPredicates>
                  </IndexScan>
                </RelOp>
                <RelOp AvgRowSize="106" EstimateCPU="0.0001581" EstimateIO="0.003125" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="1" LogicalOp="RID Lookup" NodeId="3" Parallel="false" PhysicalOp="RID Lookup" EstimatedTotalSubtreeCost="0.0032831">
                  <OutputList>
                    <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="product_code" />
                    <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="qty" />
                    <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="value" />
                    <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="bonus_pts" />
                    <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="txn_sub_seqid" />
                    <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="promotion_id" />
                    <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="group_code" />
                    <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="register_type" />
                    <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="promotion_code" />
                    <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="std_pts" />
                  </OutputList>
                  <RunTimeInformation>
                    <RunTimeCountersPerThread Thread="0" ActualRows="615" ActualEndOfScans="0" ActualExecutions="615" />
                  </RunTimeInformation>
                  <IndexScan Lookup="true" Ordered="true" ScanDirection="FORWARD" ForcedIndex="false" NoExpandHint="false">
                    <DefinedValues>
                      <DefinedValue>
                        <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="product_code" />
                      </DefinedValue>
                      <DefinedValue>
                        <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="qty" />
                      </DefinedValue>
                      <DefinedValue>
                        <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="value" />
                      </DefinedValue>
                      <DefinedValue>
                        <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="bonus_pts" />
                      </DefinedValue>
                      <DefinedValue>
                        <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="txn_sub_seqid" />
                      </DefinedValue>
                      <DefinedValue>
                        <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="promotion_id" />
                      </DefinedValue>
                      <DefinedValue>
                        <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="group_code" />
                      </DefinedValue>
                      <DefinedValue>
                        <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="register_type" />
                      </DefinedValue>
                      <DefinedValue>
                        <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="promotion_code" />
                      </DefinedValue>
                      <DefinedValue>
                        <ColumnReference Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" Column="std_pts" />
                      </DefinedValue>
                    </DefinedValues>
                    <Object Database="[lty_uae]" Schema="[dbo]" Table="[tx_txn_detail]" TableReferenceId="-1" />
                    <SeekPredicates>
                      <SeekPredicate>
                        <Prefix ScanType="EQ">
                          <RangeColumns>
                            <ColumnReference Column="Bmk1000" />
                          </RangeColumns>
                          <RangeExpressions>
                            <ScalarOperator ScalarString="[Bmk1000]">
                              <Identifier>
                                <ColumnReference Column="Bmk1000" />
                              </Identifier>
                            </ScalarOperator>
                          </RangeExpressions>
                        </Prefix>
                      </SeekPredicate>
                    </SeekPredicates>
                  </IndexScan>
                </RelOp>
              </NestedLoops>
            </RelOp>
            <ParameterList>
              <ColumnReference Column="@2" ParameterCompiledValue="(1000)" ParameterRuntimeValue="(1000)" />
              <ColumnReference Column="@1" ParameterCompiledValue="(1)" ParameterRuntimeValue="(1)" />
            </ParameterList>
          </QueryPlan>
        </StmtSimple>
      </Statements>
    </Batch>
  </BatchSequence>
</ShowPlanXML> 
```

如果你有任何想法;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:02:17.593

糟糕的是它没有分区。那会很容易。

以下是我在需要防止阻塞时执行大删除的方法：

```
DECLARE @ROWCNT INT , @NUMROWS INT, @TOPNUM INT
SET @ROWCNT = 0
SET @NUMROWS = 0
SET @TOPNUM = 100000 --<--- Set this to the number of rows to delete per batch.

WHILE 1 = 1
BEGIN

  DELETE TOP (@TOPNUM) 
  FROM dbo.FactTable
  WHERE ID = 6

  SET @NUMROWS = @@ROWCOUNT
  SET @ROWCNT = @ROWCNT + @NUMROWS
  IF @NUMROWS = 0 BREAK

  -- A delay may help prevent locking/blocking if required.
  WAITFOR DELAY '00:00:03'
END 
```

这从来没有给我带来阻塞问题，但是，在做一些研究来回答这个问题时，我遇到了这篇文章：[http](http://www.sqlsoldier.com/wp/sqlserver/sqluvldbweekarchivingandpurgingdata) ://www.sqlsoldier.com/wp/sqlserver/sqluvldbweekarchivingandpurgingdata它指出“*还有一个旁注: 简单地在 delete 语句中添加 TOP 不会最小化最初占用的锁数量。请不要这样做！！* "

所以，也许我需要更新我自己的删除方法。也许这是一种解决方法：

```
DECLARE @ROWCNT INT , @NUMROWS INT, @TOPNUM INT, @LASTDELETED INT
declare @ToDeleteIDS table (id int)
declare @IDS table (id int)
SET @ROWCNT = 0
SET @NUMROWS = 0
SET @TOPNUM = 100000 --<--- Set this to the number of rows to delete per batch.

INSERT INTO @ToDeleteIDS(id)
SELECT transaction_id
FROM tx_txn_detail with (nolock)
where transaction_id BETWEEN 1 AND 1000

INSERT INTO @IDS(id)
  SELECT  TOP (@TOPNUM) id
  FROM @ToDeleteIDS
  ORDER BY ID ASC

WHILE 1 = 1
BEGIN

  DELETE detail
  FROM tx_txn_detail detail
  JOIN @IDS b on detail.transaction_id = b.id

  SET @NUMROWS = @@ROWCOUNT
  SET @ROWCNT = @ROWCNT + @NUMROWS
  IF @NUMROWS = 0 BREAK

  Select @LASTDELETED = MAX(id)
  from @IDS

  Delete @IDS

  INSERT INTO @IDS(id)
  SELECT  TOP (@TOPNUM) id
  FROM @ToDeleteIDS
  WHERE   ID > @LASTDELETED
  ORDER BY ID ASC

END 
```

请注意，我尚未对此进行测试。只是一个想法。

# javascript - 用于从文本中删除 http:// 和 https:// 的 Javascript 正则表达式

> ID：16046902
> 
> 赞同：0
> 
> 时间：2013-04-16T20:55:39.140
> 
> 标签：javascript, regex, twitter

我在 SO 上找到了这个 JS 脚本，它似乎可以很好地检测常规链接和 Twitter #hashtags 和 @usernames：

```
function processTweetLinks(text) {
    text = text.replace();
    var exp = /(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/i;
    text = text.replace(exp, "<a href='$1' target='_blank'>$1</a>");
    exp = /(^|\s)#(\w+)/g;
    text = text.replace(exp, "$1<a href='http://search.twitter.com/search?q=%23$2' target='_blank'>#$2</a>");
    exp = /(^|\s)@(\w+)/g;
    text = text.replace(exp, "$1<a href='http://www.twitter.com/$2' target='_blank'>@$2</a>");
    console.log(text);
} 
```

但是......第一个表达式不太适合我的需要......当它得到类似的东西时`http://google.com`，它会输出`<a href='http://google.com' target='_blank'>http://google.com</a>`。我希望它改为输出`<a href='http://google.com' target='_blank'>google.com</a>`- 基本上从锚标签内部删除`http://`或删除。`https://`我不知道正则表达式 - 函数需要是什么样子才能输出？

**更新：**我用@BrunoFinelli 的回答修复了这个函数，效果很好，但我不知道如何让它修复给定字符串/消息中的多个链接。现在，每次我调用该函数时它只修复一个......如果有人可以调整该函数来修复这个问题，那将不胜感激！谢谢！如果第一个正则表达式（有问题的那个）`www.`也从锚标签内部删除 's 也会很好吗？但实际上我只需要知道如何通过可能有多个链接/提及/标签的推文重复这一点。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T21:06:25.633

Try this one:

```
 function processTweetLinks(text) {
        text = text.replace();
        var exp = /(\b(https?|ftp|file):\/\/)([-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/i;
        text = text.replace(exp, "<a href='$1$3' target='_blank'>$3</a>");
        exp = /(^|\s)#(\w+)/g;
        text = text.replace(exp, "$1<a href='http://search.twitter.com/search?q=%23$2' target='_blank'>#$2</a>");
        exp = /(^|\s)@(\w+)/g;
        text = text.replace(exp, "$1<a href='http://www.twitter.com/$2' target='_blank'>@$2</a>");
        console.log(text);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:02:05.113

您需要在另一个捕获组中捕获 URL 的第二部分，并在锚标记中引用该组。

```
var exp = /(\b(https?|ftp|file):\/\/([-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|]))/i;
text = text.replace(exp, "<a href='$1' target='_blank'>$3</a>"); 
```

您可以通过计算语句中出现左括号的时间来确定如何引用组。在上述情况下，您希望 href 等于整个语句（第一个左括号），并且您希望内部 html 匹配第三个左括号。

这也可以工作，因为`$&`插入了整个匹配的字符串：

```
var exp = /\b(https?|ftp|file):\/\/([-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/i;
text = text.replace(exp, "<a href='$&' target='_blank'>$2</a>"); 
```

# android - 应用生命周期的 Android 事件监听器

> ID：16046905
> 
> 赞同：8
> 
> 时间：2013-04-16T20:55:41.263
> 
> 标签：android, listener

我正在编写一个 Android 代码段来帮助跟踪 Android 事件作为应用程序开发人员的服务工具。

例如，主应用程序主体可以只是显示“hello world”。我的代码会监听应用程序事件，例如`onStart()`、`onResume()`、`onDestroy()`等，并跟踪这些事件。

当然，代码可以直接插入主活动下。但这意味着我的代码将无处不在。有没有办法，我可以创建一个对象（即监听器），并且只要求应用程序开发人员添加 1~2 行来使用我的代码？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-16T21:05:34.913

For API Level 14 and higher, you can [call `registerActivityLifecycleCallbacks()` on the `Application`](http://developer.android.com/reference/android/app/Application.html#registerActivityLifecycleCallbacks%28android.app.Application.ActivityLifecycleCallbacks%29) to set up a listener to be informed about activity lifecycle events.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-13T07:50:27.573

试试这个方法

```
public class mYApplication extends Application {

 @Override
    public void onCreate() {
        super.onCreate();
        registerActivityLifecycleCallbacks(new MyLifecycleHandler());

     }

} 
```

**我的生命周期处理程序：**

```
public class MyLifecycleHandler implements Application.ActivityLifecycleCallbacks {
    private static int resumed;
    private static int paused;
    private static int started;
    private static int stopped;

    @Override
    public void onActivityCreated(Activity activity, Bundle savedInstanceState) {
    }

    @Override
    public void onActivityDestroyed(Activity activity) {
    }

    @Override
    public void onActivityResumed(Activity activity) {
        ++resumed;
    }

    @Override
    public void onActivityPaused(Activity activity) {
        ++paused;
        android.util.Log.w("test", "application is in foreground: " + (resumed > paused));
    }

    @Override
    public void onActivitySaveInstanceState(Activity activity, Bundle outState) {
    }

    @Override
    public void onActivityStarted(Activity activity) {
        ++started;
    }

    @Override
    public void onActivityStopped(Activity activity) {
        ++stopped;
        android.util.Log.w("test", "application is visible: " + (started > stopped));
    }

    public static boolean isApplicationVisible() {
        return started > stopped;
    }

    public static boolean isApplicationInForeground() {
        return resumed > paused;
    }

} 
```

然后调用 `isApplicationInForeground`静态方法来检查应用程序是在前台还是后台

# jquery - Jquery一次又一次地追加相同的项目

> ID：16046916
> 
> 赞同：0
> 
> 时间：2013-04-16T20:56:08.280
> 
> 标签：jquery, append

当我打开主页（在此[URL](http://e.yazilimsozluk.com/Home/Index)中）时，它在列表中有 4 个项目，然后我单击另一个链接（在页脚中我单击联系人）和在联系页面中，当我再次单击主页时（在页脚位置链接）它再次附加项目如何我可以清除以前的项目吗？

这是我的主页代码

```
$(document).ready(function (e) {

                $.getJSON('http://xx1', function (data) {

                    $.each(data.markers, function (i, marker) {

                        if (marker.PlaceExtra3 === '1') {

                            $("#listeu").append("<li data-role='list-divider' role='heading' class='ui-li ui-li-divider ui-bar-b ui-li-has-count' style='text-align:center'> <a href='http://localhost:65028/Home/KonuDetail/ " + marker.PlaceID + "' </a> " + marker.PlaceExtra2 + " - " + marker.PlaceName + " </li>");
                            $("#listeu li:last").fadeIn("slow");
                            $(".ui-btn-inner:eq(0)").css("background", 'red');
.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:06:32.213

Use [`.empty()`](http://api.jquery.com/empty/) to clear your list.

```
$.getJSON('http://xx1', function (data) {
    // empty list before the loop to clear the list
    $("#listeu").empty();
    // list is now empty, continue as normal
    $.each(data.markers, function (i, marker) {
    if (marker.PlaceExtra3 === '1') {
        $("#listeu").append("<li data-role='list-divider' role='heading' class='ui-li ui-li-divider ui-bar-b ui-li-has-count' style='text-align:center'> <a href='http://localhost:65028/Home/KonuDetail/ " + marker.PlaceID + "' </a> " + marker.PlaceExtra2 + " - " + marker.PlaceName + " </li>");
        $("#listeu li:last").fadeIn("slow");
        $(".ui-btn-inner:eq(0)").css("background", 'red'); 
```

# android - GLSurfaceView 渲染器，如何强制重新创建表面？

> ID：16046918
> 
> 赞同：4
> 
> 时间：2013-04-16T20:56:23.680
> 
> 标签：android, opengl-es

我有一个`GLSurfaceView`渲染器，并且方法`onSurfaceCreated`只被调用一次（基本上只有在创建或重新创建活动时）。

当 EGL 上下文丢失并在正常活动生命周期中重新创建表面时，我需要测试行为，但是无论我做什么，我都无法将应用程序置于这种情况下。

我可以做些什么来模拟`onSurfaceCreated`再次调用的情况？如何让我的应用失去 EGL 上下文？

**编辑：几天后，我注意到问题消失了，应用程序开始正常运行，如规范中所述：**

```
public abstract void onSurfaceCreated (GL10 gl, EGLConfig config)
Called when the surface is created or recreated.
Called when the rendering thread starts and whenever the EGL context is lost.
The EGL context will typically be lost when the Android device awakes 
after going to sleep 
```

在此之前，每次设备进入睡眠状态时，活动都会被破坏并在唤醒时重新创建，这使我无法测试代码是否`OnSurfaceCreated`运行良好。

现在，当睡眠/唤醒发生时，它的表现要好得多——它通常不会破坏活动，只是调用`OnSurfaceCreated`方法，这是我的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:38:49.363

I'm not sure but the only thing that i can think of is to switch the `GLSUrfaceView` with a new one using the same `GLSurfaceView.Renderer`. That should create a new EGL context and call the `onSurfaceCreated()` a second time.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:53:15.547

根据文档，在创建或重新创建表面时调用[GLSurfaceView.Renderer.onSurfaceCreated 。](http://developer.android.com/reference/android/opengl/GLSurfaceView.Renderer.html#onSurfaceCreated%28javax.microedition.khronos.opengles.GL10,%20javax.microedition.khronos.egl.EGLConfig%29)

当渲染线程启动和 EGL 上下文丢失时调用。**当 Android 设备在进入睡眠状态后醒来时，EGL 上下文通常会丢失。**

您是否尝试过锁定设备的屏幕并解锁？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T19:02:01.267

也许您可以查看`onScreenStateChanged`方法，但它适用于 API 16 或更高版本。如果您的意思是“正常活动生命周期”的“暂停和恢复活动”，也许您可​​以使用`onPause`或`onResume`跟踪它。

你到底想做什么`onSurfaceCreated()`？`requestRender()`您可以通过方法强制渲染`SurfaceView`并在其中进行必要的`onDrawFrame()`计算`GLSurfaceView.Renderer`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-30T13:35:00.233

如果您的视图位于片段中，您可以分离并重新附加片段。

# android - Android & WAMP: 解析数据时出错 org.json.JSONException: Value ï»¿ï»¿ï»¿ 嗨，我目前正在阅读很多关于将我的 Android 设备连接到 WAMP 服务器的信息，但是在本教程中，我收到了一个关于 JSON 的恼人错误。我使用 问问题 问问题 2013-04-16T20:56:39.390 1975 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 嗨，我目前正在阅读很多关于将我的 Android 设备连接到 WAMP 服务器的信息，但是在本教程中，我收到了一个关于 JSON 的恼人错误。我使用 Json 在服务器和设备之间传输消息。它说：Error parsing data org.json.JSONException: Value ï»¿ï»¿ï»¿<br of type java.lang.String cannot be converted to JSONObject 基本上我的主要活动中有两种方法。在一个中，我展示了我的数据库，在另一个中，我在数据库中插入了项目。下面是一些可能很有趣的代码部分。 public class AllProductsActivity extends ListActivity { // Progress Dialog private ProgressDialog pDialog; // Creating JSON Parser object JSONParser jParser = new JSONParser(); ArrayList<HashMap<String, String>> productsList; // url to get all products list private static String url_all_products = "http://192.168.1.36/android_connect/get_all_products.php"; // JSON Node names private static final String TAG_SUCCESS = "success"; private static final String TAG_PRODUCTS = "products"; private static final String TAG_PID = "pid"; private static final String TAG_NAME = "name"; // products JSONArray JSONArray products = null; @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.all_products); // Hashmap for ListView productsList = new ArrayList<HashMap<String, String>>(); // Loading products in Background Thread new LoadAllProducts().execute(); // Get listview ListView lv = getListView(); // on seleting single product // launching Edit Product Screen lv.setOnItemClickListener(new OnItemClickListener() { @Override public void onItemClick(AdapterView<?> parent, View view, int position, long id) { // getting values from selected ListItem String pid = ((TextView) view.findViewById(R.id.pid)).getText() .toString(); // Starting new intent Intent in = new Intent(getApplicationContext(), EditProductActivity.class); // sending pid to next activity in.putExtra(TAG_PID, pid); // starting new activity and expecting some response back startActivityForResult(in, 100); } }); } // Response from Edit Product Activity @Override protected void onActivityResult(int requestCode, int resultCode, Intent data) { super.onActivityResult(requestCode, resultCode, data); // if result code 100 if (resultCode == 100) { // if result code 100 is received // means user edited/deleted product // reload this screen again Intent intent = getIntent(); finish(); startActivity(intent); } } /** * Background Async Task to Load all product by making HTTP Request * */ class LoadAllProducts extends AsyncTask<String, String, String> { /** * Before starting background thread Show Progress Dialog * */ @Override protected void onPreExecute() { super.onPreExecute(); pDialog = new ProgressDialog(AllProductsActivity.this); pDialog.setMessage("Loading products. Please wait..."); pDialog.setIndeterminate(false); pDialog.setCancelable(false); pDialog.show(); } /** * getting All products from url * */ protected String doInBackground(String... args) { // Building Parameters List<NameValuePair> params = new ArrayList<NameValuePair>(); // getting JSON string from URL JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params); // Check your log cat for JSON reponse Log.d("All Products: ", json.toString()); try { // Checking for SUCCESS TAG int success = json.getInt(TAG_SUCCESS); if (success == 1) { // products found // Getting Array of Products products = json.getJSONArray(TAG_PRODUCTS); // looping through All Products for (int i = 0; i < products.length(); i++) { JSONObject c = products.getJSONObject(i); // Storing each json item in variable String id = c.getString(TAG_PID); String name = c.getString(TAG_NAME); // creating new HashMap HashMap<String, String> map = new HashMap<String, String>(); // adding each child node to HashMap key => value map.put(TAG_PID, id); map.put(TAG_NAME, name); // adding HashList to ArrayList productsList.add(map); } } else { // no products found // Launch Add New product Activity Intent i = new Intent(getApplicationContext(), NewProductActivity.class); // Closing all previous activities i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); startActivity(i); } } catch (JSONException e) { e.printStackTrace(); } return null; } /** * After completing background task Dismiss the progress dialog * **/ protected void onPostExecute(String file_url) { // dismiss the dialog after getting all products pDialog.dismiss(); // updating UI from Background Thread runOnUiThread(new Runnable() { public void run() { /** * Updating parsed JSON data into ListView * */ ListAdapter adapter = new SimpleAdapter( AllProductsActivity.this, productsList, R.layout.list_item, new String[] { TAG_PID, TAG_NAME}, new int[] { R.id.pid, R.id.name }); // updating listview setListAdapter(adapter); } }); } } 插入项目 public class NewProductActivity extends Activity { // Progress Dialog private ProgressDialog pDialog; JSONParser jsonParser = new JSONParser(); EditText inputName; EditText inputPrice; EditText inputDesc; // url to create new product private static String url_create_product = "http://192.168.1.36/android_connect/create_product.php"; // JSON Node names private static final String TAG_SUCCESS = "success"; @SuppressLint("NewApi") @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.add_product); StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder() .permitAll().build(); StrictMode.setThreadPolicy(policy); // Edit Text inputName = (EditText) findViewById(R.id.inputName); inputPrice = (EditText) findViewById(R.id.inputPrice); inputDesc = (EditText) findViewById(R.id.inputDesc); // Create button Button btnCreateProduct = (Button) findViewById(R.id.btnCreateProduct); // button click event btnCreateProduct.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View view) { // creating new product in background thread new CreateNewProduct().execute(); } }); } /** * Background Async Task to Create new product * */ class CreateNewProduct extends AsyncTask<String, String, String> { /** * Before starting background thread Show Progress Dialog * */ @Override protected void onPreExecute() { super.onPreExecute(); pDialog = new ProgressDialog(NewProductActivity.this); pDialog.setMessage("Creating Product.."); pDialog.setIndeterminate(false); pDialog.setCancelable(true); pDialog.show(); } /** * Creating product * */ protected String doInBackground(String... args) { String name = inputName.getText().toString(); String price = inputPrice.getText().toString(); String description = inputDesc.getText().toString(); // Building Parameters List<NameValuePair> params = new ArrayList<NameValuePair>(); params.add(new BasicNameValuePair("name", name)); params.add(new BasicNameValuePair("price", price)); params.add(new BasicNameValuePair("description", description)); // getting JSON Object // Note that create product url accepts POST method JSONObject json = jsonParser.makeHttpRequest(url_create_product, "POST", params); // check log cat fro response Log.d("Create Response", json.toString()); // check for success tag try { int success = json.getInt(TAG_SUCCESS); if (success == 1) { // successfully created product Intent i = new Intent(getApplicationContext(), AllProductsActivity.class); startActivity(i); // closing this screen finish(); } else { // failed to create product } } catch (JSONException e) { e.printStackTrace(); } return null; } /** * After completing background task Dismiss the progress dialog * **/ protected void onPostExecute(String file_url) { // dismiss the dialog once done pDialog.dismiss(); } } } PHP $response = array(); include db connect class require_once __DIR__ . '/db_connect.php'; connecting to db $db = new DB_CONNECT(); if (isset($_GET["pid"])) { $pid = $_GET['pid']; // get a product from products table $result = mysql_query("SELECT *FROM products WHERE pid = $pid"); if (!empty($result)) { // check for empty result if (mysql_num_rows($result) > 0) { $result = mysql_fetch_array($result); $product = array(); $product["pid"] = $result["pid"]; $product["name"] = $result["name"]; $product["price"] = $result["price"]; $product["description"] = $result["description"]; $product["created_at"] = $result["created_at"]; $product["updated_at"] = $result["updated_at"]; // success $response["success"] = 1; // user node $response["product"] = array(); array_push($response["product"], $product); // echoing JSON response echo json_encode($response); } else { // no product found $response["success"] = 0; $response["message"] = "No product found"; // echo no users JSON echo json_encode($response); } } else { // no product found $response["success"] = 0; $response["message"] = "No product found"; // echo no users JSON echo json_encode($response); } } else { // required field is missing $response["success"] = 0; $response["message"] = "Required field(s) is missing"; // echoing JSON response echo json_encode($response); } ?> 编辑：插入产品 <?php // array for JSON response $response = array(); // check for required fields if (isset($_POST['name']) && isset($_POST['price']) && isset($_POST['description'])) { $name = $_POST['name']; $price = $_POST['price']; $description = $_POST['description']; // include db connect class require_once __DIR__ . '/db_connect.php'; // connecting to db $db = new DB_CONNECT(); // mysql inserting a new row $result = mysql_query("INSERT INTO products(name, price, description) VALUES('$name', '$price', '$description')"); // check if row inserted or not if ($result) { // successfully inserted into database $response["success"] = 1; $response["message"] = "Product successfully created."; // echoing JSON response echo json_encode($response); } else { // failed to insert row $response["success"] = 0; $response["message"] = "Oops! An error occurred."; // echoing JSON response echo json_encode($response); } } else { // required field is missing $response["success"] = 0; $response["message"] = "Required field(s) is missing"; // echoing JSON response echo json_encode($response); } ?> 正如我所说，事情是Value ï»¿ï»¿ï»¿<br很奇怪提前谢谢你的时间。 我已经找出了问题并在问题上方发布了我的正确代码。感谢所有帮助过的人。 androidjsonwamp 4 1 回答 1 This answer is useful 0 我也有这个问题。在我的情况下，它与 JSONObject 相关。您从数据库中读取数据并将它们存储在 json 对象中。但您必须将其作为字符串传递。考虑到我有一个名为 json 的 JSONObject 并且我正在使用它来存储表中的红色字符串。然后我json.tostring将其转换为字符串并将其传递给其他对象以在 return 语句中使用，因此当我返回对象时会返回一个字符串不是一个对象。这对我有用。 jObj = new JSONObject(json.toString()); 于 2013-11-06T10:22:01.070 回答 Related 1 vb6 - 使用类模块时出错 1 html - 用于 node.js 后端 UI 的框架 4 mysql - MYSQL计数函数合并 1 javascript - Javascript 未在开发服务器上填充 Perl 表单 3 ajax - 返回false在表单的提交方法中不生效 2 java - 如何从 SWT 应用程序运行 SWT 应用程序？ 1 javascript - 如何使用 Parse.com JavaScript SDK 上传图像？ 2 ios - google-api-objectivec-client youtube 播放列表提要没有关键字 2 php - 根据设备提供不同的登录 0 jquery - 如何使用 JavaScript 从 While 循环中选择单个 Div？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16046920
> 
> 赞同：3
> 
> 时间：
> 
> 标签：android, json, wamp

嗨，我目前正在阅读很多关于将我的 Android 设备连接到 WAMP 服务器的信息，但是在本教程中，我收到了一个关于 JSON 的恼人错误。我使用 Json 在服务器和设备之间传输消息。它说：`Error parsing data org.json.JSONException: Value ï»¿ï»¿ï»¿<br of type java.lang.String cannot be converted to JSONObject` 基本上我的主要活动中有两种方法。在一个中，我展示了我的数据库，在另一个中，我在数据库中插入了项目。下面是一些可能很有趣的代码部分。

```
public class AllProductsActivity extends ListActivity {

// Progress Dialog
private ProgressDialog pDialog;

// Creating JSON Parser object
JSONParser jParser = new JSONParser();

ArrayList<HashMap<String, String>> productsList;

// url to get all products list
private static String url_all_products = "http://192.168.1.36/android_connect/get_all_products.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_PRODUCTS = "products";
private static final String TAG_PID = "pid";
private static final String TAG_NAME = "name";

// products JSONArray
JSONArray products = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.all_products);

    // Hashmap for ListView
    productsList = new ArrayList<HashMap<String, String>>();

    // Loading products in Background Thread
    new LoadAllProducts().execute();

    // Get listview
    ListView lv = getListView();

    // on seleting single product
    // launching Edit Product Screen
    lv.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String pid = ((TextView) view.findViewById(R.id.pid)).getText()
                    .toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(),
                    EditProductActivity.class);
            // sending pid to next activity
            in.putExtra(TAG_PID, pid);

            // starting new activity and expecting some response back
            startActivityForResult(in, 100);
        }
    });

}

// Response from Edit Product Activity
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    // if result code 100
    if (resultCode == 100) {
        // if result code 100 is received
        // means user edited/deleted product
        // reload this screen again
        Intent intent = getIntent();
        finish();
        startActivity(intent);
    }

}

/**
 * Background Async Task to Load all product by making HTTP Request
 * */
class LoadAllProducts extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(AllProductsActivity.this);
        pDialog.setMessage("Loading products. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting All products from url
     * */
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

        // Check your log cat for JSON reponse
        Log.d("All Products: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // products found
                // Getting Array of Products
                products = json.getJSONArray(TAG_PRODUCTS);

                // looping through All Products
                for (int i = 0; i < products.length(); i++) {
                    JSONObject c = products.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_PID);
                    String name = c.getString(TAG_NAME);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_PID, id);
                    map.put(TAG_NAME, name);

                    // adding HashList to ArrayList
                    productsList.add(map);
                }
            } else {
                // no products found
                // Launch Add New product Activity
                Intent i = new Intent(getApplicationContext(),
                        NewProductActivity.class);
                // Closing all previous activities
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        AllProductsActivity.this, productsList,
                        R.layout.list_item, new String[] { TAG_PID,
                                TAG_NAME},
                        new int[] { R.id.pid, R.id.name });
                // updating listview
                setListAdapter(adapter);
            }
        });

    }

} 
```

插入项目

```
public class NewProductActivity extends Activity {

    // Progress Dialog
    private ProgressDialog pDialog;

    JSONParser jsonParser = new JSONParser();
    EditText inputName;
    EditText inputPrice;
    EditText inputDesc;

    // url to create new product
    private static String url_create_product = "http://192.168.1.36/android_connect/create_product.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";

    @SuppressLint("NewApi")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.add_product);
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
        .permitAll().build();
        StrictMode.setThreadPolicy(policy);

        // Edit Text
        inputName = (EditText) findViewById(R.id.inputName);
        inputPrice = (EditText) findViewById(R.id.inputPrice);
        inputDesc = (EditText) findViewById(R.id.inputDesc);

        // Create button
        Button btnCreateProduct = (Button) findViewById(R.id.btnCreateProduct);

        // button click event
        btnCreateProduct.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                // creating new product in background thread
                new CreateNewProduct().execute();
            }
        });
    }

    /**
     * Background Async Task to Create new product
     * */
    class CreateNewProduct extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(NewProductActivity.this);
            pDialog.setMessage("Creating Product..");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Creating product
         * */
        protected String doInBackground(String... args) {
            String name = inputName.getText().toString();
            String price = inputPrice.getText().toString();
            String description = inputDesc.getText().toString();

            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("name", name));
            params.add(new BasicNameValuePair("price", price));
            params.add(new BasicNameValuePair("description", description));

            // getting JSON Object
            // Note that create product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                    "POST", params);

            // check log cat fro response
            Log.d("Create Response", json.toString());

            // check for success tag
            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // successfully created product
                    Intent i = new Intent(getApplicationContext(), AllProductsActivity.class);
                    startActivity(i);

                    // closing this screen
                    finish();
                } else {
                    // failed to create product
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once done
            pDialog.dismiss();
        }

    }
} 
```

PHP

```
 $response = array();

 include db connect class
   require_once __DIR__ . '/db_connect.php';

  connecting to db
    $db = new DB_CONNECT();

 if (isset($_GET["pid"])) {
$pid = $_GET['pid'];

// get a product from products table
$result = mysql_query("SELECT *FROM products WHERE pid = $pid");

if (!empty($result)) {
    // check for empty result
    if (mysql_num_rows($result) > 0) {

        $result = mysql_fetch_array($result);

        $product = array();
        $product["pid"] = $result["pid"];
        $product["name"] = $result["name"];
        $product["price"] = $result["price"];
        $product["description"] = $result["description"];
        $product["created_at"] = $result["created_at"];
        $product["updated_at"] = $result["updated_at"];
        // success
        $response["success"] = 1;

        // user node
        $response["product"] = array();

        array_push($response["product"], $product);

        // echoing JSON response
        echo json_encode($response);
    } else {
        // no product found
        $response["success"] = 0;
        $response["message"] = "No product found";

        // echo no users JSON
        echo json_encode($response);
    }
} else {
    // no product found
    $response["success"] = 0;
    $response["message"] = "No product found";

    // echo no users JSON
    echo json_encode($response);
}
 } else {
// required field is missing
$response["success"] = 0;
$response["message"] = "Required field(s) is missing";

// echoing JSON response
echo json_encode($response);
}
?> 
```

编辑：插入产品

```
<?php
// array for JSON response
$response = array();

// check for required fields
if (isset($_POST['name']) && isset($_POST['price']) && isset($_POST['description'])) {

    $name = $_POST['name'];
    $price = $_POST['price'];
    $description = $_POST['description'];

    // include db connect class
    require_once __DIR__ . '/db_connect.php';

    // connecting to db
    $db = new DB_CONNECT();

    // mysql inserting a new row
    $result = mysql_query("INSERT INTO products(name, price, description) VALUES('$name', '$price', '$description')");

    // check if row inserted or not
    if ($result) {
        // successfully inserted into database
        $response["success"] = 1;
        $response["message"] = "Product successfully created.";

        // echoing JSON response
        echo json_encode($response);
    } else {
        // failed to insert row
        $response["success"] = 0;
        $response["message"] = "Oops! An error occurred.";

        // echoing JSON response
        echo json_encode($response);
    }
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
}
?> 
```

正如我所说，事情是`Value ï»¿ï»¿ï»¿<br`很奇怪提前谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-06T10:22:01.070

我也有这个问题。在我的情况下，它与 JSONObject 相关。您从数据库中读取数据并将它们存储在 json 对象中。但您必须将其作为字符串传递。考虑到我有一个名为 json 的 JSONObject 并且我正在使用它来存储表中的红色字符串。然后我`json.tostring`将其转换为字符串并将其传递给其他对象以在 return 语句中使用，因此当我返回对象时会返回一个字符串不是一个对象。这对我有用。 `jObj = new JSONObject(json.toString());`

# java - Jasypt 1.9：用感叹号加密密码

> ID：16046922
> 
> 赞同：4
> 
> 时间：2013-04-16T20:56:40.240
> 
> 标签：java, password-encryption, jasypt

我正在使用 Jasypt 1.9，当我尝试用感叹号加密密码时，它失败了。没有感叹号就可以正常工作

例如：

```
./encrypt.sh input="abc!abc"
-sh: !abc": event not found 
```

Jasypt 声称它已修复在这里.. [http://www.jasypt.org/changelogs/jasypt/ChangeLog.txt](http://www.jasypt.org/changelogs/jasypt/ChangeLog.txt)

笔记：

```
 ./encrypt.sh input="abc\!abc" works, but decrypting produces the "abc\!abc" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T21:01:03.600

使用单引号而不是双引号。使用双引号，shell 首先尝试将其扩展`!abc`为历史事件，从而为您提供该错误。单引号中的文本不展开。

这是一个 linux shell 特性，与 Jasypt 无关。Shell 在执行任何操作之前扩展表达式。

# c# - Windows 窗体 ImageList - 添加具有相对路径的图像 - 无文件复制

> ID：16046923
> 
> 赞同：1
> 
> 时间：2013-04-16T20:56:47.280
> 
> 标签：c#, winforms, resources, relative-path, imagelist

我正在尝试将图像添加到我的树节点 ( `ImageList.Add()`)，但只是想不出一个好的方法。

我已经阅读了我应该使用的 MSDN 帮助`System.Drawing.Image.FromFile(path)`。但不能只是在某处获取文件。我正在构建一个 DLL，并希望它是一个文件，没有与它一起复制的位图。

所以我读过我应该将图像文件添加到项目中，并用构建操作将它们标记为“资源”。好的，但是我在哪里可以得到它们？？？我看到人们在 XAML 文件中使用它，但我没有。

看到人们使用`Resources.SomeName`，但找不到那些`Resources`类。

所以....我该怎么做？我已将文件标记为资源，只需将它们添加到 ImageList。

顺便说一句，我很想使用相对于`Code File`将图像添加到 ImageList 的路径。但如果不可能，仅相对于程序集根。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:23:12.373

如果要使用文件路径，对于项目中的项目，必须将“复制到输出目录”属性设置为“始终复制”或“如果较新则复制”，否则它将不在 bin 文件夹中，然后您将尝试将路径传递给不存在的文件。在这种情况下，构建操作并不是那么重要。

如果您想使用已编译的资源，并通过 Resources 对象引用它们，请参阅我的其余答案。我假设您使用的是 Visual Studio，2005 或更高版本。

要将图像作为已编译资源添加到干净的 Windows 窗体项目中，以便您可以通过`Resources.SomeName`执行以下操作来访问它：

1.  在解决方案资源管理器中，在 windows 窗体项目（我的称为 WinFormsApplication1）下，展开“属性”文件夹。默认情况下，此文件夹应包含：AssemblyInfo.cs、Resources.resx、Settings.settings。
2.  双击 Resources.resx 文件。这将为它打开一个编辑器。您可能会看到一个字符串表，其中包含“名称”、“值”、“注释”列。
3.  单击“添加资源”按钮上的下拉箭头，然后选择“现有文件”，这将允许您浏览到要添加的图像。
4.  您现在应该看到图像出现在各种画廊中。我的名字叫 TestImage

现在，当您编辑代码（我的是 Fom1.cs）时，我可以将图像作为 System.Drawing.Bitmap 作为 Properties.Resources.TestImage 访问。

在我看来，这是将图像编译到应用程序中的最佳方式。如果您想要用户添加的图像，您需要使用 OpenFileDialog 或类似的东西来获取您的文件路径。然后 Image.FormFile() 将是您想要的。

# function - 在 Twig 中使用 DateTime 和 DateInterval 函数

> ID：16046926
> 
> 赞同：3
> 
> 时间：2013-04-16T20:56:52.237
> 
> 标签：function, date, object, add, twig

我在 Twig 中有两个对象：

1.  `{{ date }}`是`DateTime`对象
2.  `{{ interval }}`是`DateInterval`对象

我需要显示添加了间隔的日期。我怎样才能像这两个对象一样使用`DateObject`php 函数？ 我不能在控制器端执行此操作，我需要在树枝中进行日期间隔。:(`add()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T21:04:03.717

You can use [`date_modify`](http://twig.sensiolabs.org/doc/filters/date_modify.html).

In your case, it would go as:

```
{{ yourDate|date_modify(yourInterval)|date("m/d/Y") }} 
```

# rest - REST Web 服务中的 GET 与 POST

> ID：16046927
> 
> 赞同：5
> 
> 时间：2013-04-16T20:56:55.747
> 
> 标签：rest

我正在开发一项 REST 服务，该服务允许用户根据发票上显示的几条信息（发票号和帐单邮编）声明他们的列表。

我已经阅读了无数关于何时使用 GET 和何时使用 POST 的文章和 Stack Overflow 问题。总的来说，普遍的共识是 GET 应该用于幂等操作，而 POST 应该用于在服务器端创建某些东西的操作。但是，这篇文章：

[http://blog.teamtreehouse.com/the-definitive-guide-to-get-vs-post](http://blog.teamtreehouse.com/the-definitive-guide-to-get-vs-post)

让我对在这种特定情况下使用 GET 产生疑问，仅仅是因为我使用这两条信息作为验证用户身份的机制。我没有使用这个特定的方法调用来更新服务器上的任何内容，但我也不一定想在 URL 中公开信息。

这是一个内部 Web 服务，只有调用该服务的前端是公开的，所以我不必担心 URL 会出现在用户的浏览器历史记录中。我唯一担心的是不太可能有人获得服务器日志访问权限，在这种情况下，我会遇到更大的问题。

出于安全原因，我倾向于 POST；然而，由于请求是幂等的，GET 感觉是正确的方法。在这种情况下推荐的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T21:39:09.880

独立于 POST 与 GET，我建议不要将您的安全性作为邮政编码和发票号码这样简单的东西。我敢打赌发票号码是连续的（或接近的），并且周围没有那么多邮政编码 - 瞧，我可以完全访问您的列表。

如果您正在使用另一种身份验证方法（通常在 HTTP 标头中），那么您很好 - 如果您有发票号码，如果 URL 没有关系，那么不妨使用 GET。

如果你不是，那么我想 POST 在暴露机密内容方面并不像 GET 那样糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:52:03.493

POST 与 GET 相比，实际上并没有增加任何安全性。当然，请求不在 URL 中，但我们在这里讨论的是 REST，而且 URL 无论如何都不会被人类看到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-10T14:06:38.467

您的问题始于一些错误的假设。首先，`GET`不只是针对任何旧的幂等操作，它是针对`GET`来自服务器的资源；碰巧这样做*应该*没有副作用。其次，URL 不是 GET 请求向服务器发送数据的唯一方式，您可以在`GET`请求中使用有效负载（至少就 HTTP 而言，有些实现很糟糕，不支持这个或使很难）。第三，正如所指出的，您选择了一些糟糕的数据字段来保护您的访问。最后，您以任何方式使用纯文本协议，因此这两种方法都没有真正提供和更好的安全性。

你应该使用最能描述你在做什么的动词，你正在从服务器获取一些信息，所以使用`GET`. 使用一些适当的安全性，例如基本的 HTTPS 加密。如果您想避免这些字段“阻塞” URL，您可以在请求的有效负载中发送数据，例如：

```
GET /listings HTTP/1.1
Content-Type = application/json

{ "zip"     : "IN0N0USZ1PC0D35",
  "invoice" : "54859081145" } 
```

# cakephp - 为复选框设置 id 会导致 CakePHP 中的安全错误

> ID：16046930
> 
> 赞同：1
> 
> 时间：2013-04-16T20:57:18.923
> 
> 标签：cakephp, cakephp-2.0

我`Security`在我的 AppController 中使用该组件。我需要构建一个检查表单输入，以允许对列表中的每个项目进行自定义格式设置。为此，我`$options`使用 foreach 处理集合中的每个项目并创建新元素，如下所示：

```
foreach ($fileTypes as $fileType_key => $fileType_value) {
   echo $this->Form->input(
      'FilesIncluded.' . $fileType_key, 
         array(
            'type' => 'checkbox', 
            'value' => $fileType_key,
            'label' => false, 
            'div' => false,
            'before' => '<span class="checkbox clearfix"><span class="check">',
            'after' => '</span><label for="add-product-check-sub-cat">' . $fileType_value . '</label></span>',
            'hiddenField' => false,
         )
      );
} 
```

有几点需要注意：

1.  我将每个复选框设置为`data[FilesIncluded][{UUID}]`（其中 UUID 实际上代表 FilesIncluded 的 UUID）而不是`data[FilesIncluded][]`
2.  FilesIncluded 不是表单模型的一部分，因此它将显示为`$this->request->data`as`$this->request->data['FilesIncluded']`而不是`$this->request->data['Model']['column']`

我想弄清楚的是为什么这会引发身份验证安全风险？当我将字段名称从更改为`'FilesIncluded.' . $fileType_key`带有计数器的名称时`'FilesIncluded.' . $count . '.id'`，它似乎可以正常工作而不会引发任何安全身份验证错误。任何想法如何使这项工作按我期望的方式工作？

**更新：**

另一个问题是能够维护一组固定的文件类型。例如，我希望能够控制可以从复选框中选择的 HABTM 记录。例如，我将显示这个列表： [http ://cl.ly/image/0b1Q3C0d0w1Y](http://cl.ly/image/0b1Q3C0d0w1Y)

只有当用户选择记录时，它们才会被存储为 hasMany。然后，当需要进行编辑时，我不仅希望能够显示同一组记录，而且还希望将它们与用户保存的记录相关联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:54:15.867

## （可能的原因

您可能会收到安全错误，因为您正在禁用`hiddenField`复选框。*安全组件通过在创建*表单时根据表单字段的名称计算校验和并将其与提交表单时*收到*的数据进行比较来检查提交的表单是否有效（即未被*篡改*） 。

 **通过抑制 hiddenField，如果未选中复选框，则该复选框将**不会出现**在发布的数据中（未选中的复选框永远不会在 HTML 表单中发送）。如上所述，CakePHP 根据它*期望的字段/输入和它**接收*的实际字段（数据）计算校验和。**通过禁用 hiddenField，从发布的数据计算的校验和将取决于是否选中了复选框，*这****将使发布的数据***无效****

 *## 解决方法

可能有一些解决方法；

*   **不要抑制'hiddenField'**这将确保复选框将*始终*存在于发布的数据中。如果*未选中*复选框，则复选框的*值*将为`0`（零）。如果复选框*被*选中，其发布的值将是复选框的*指定*值（或者`1`如果没有指定值）

*   **从校验和中排除您的自定义输入**。您可以通过 排除校验和中的字段`$this->Form->unlockField('fieldname');`。CakePHP 在计算安全校验和时会忽略这些输入。

文档：[FormHelper::unlockField()](http://api.cakephp.org/2.3/class-FormHelper.html#_unlockField)

## 笔记

尽管这些变通办法可能会有所帮助，但我建议*不要*重新发明轮子。通过更改输入的名称，您不再遵循 CakePHP 约定。遵守约定通常可以为您节省大量时间。

例如，可以通过一次调用来保存*相关数据。*`Model::saveAssociated()`如果您的模型关系设置正确，例如：

`Document->hasMany->UserFiles`，然后 CakePHP 将自动插入/更新`Document`和`UserFiles`数据。

阅读此处的文档[保存相关模型数据（hasOne、hasMany、belongsTo）](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-hasone-hasmany-belongsto)***

# matlab - 查找数值最接近值的索引

> ID：16046933
> 
> 赞同：1
> 
> 时间：2013-04-16T20:57:23.607
> 
> 标签：matlab, function, find, closest

假设我在 matlab 中有 2 个矩阵：

```
A = [1 4 6 9 11 13 15 18 21]

B = [2 10 19] 
```

有没有我可以使用的函数，以便对于 B 中的每个元素，我能够找到最接近 A 中该元素的值的索引。例如，在上面的示例中：2,10 和 19 在数字上最接近A中的1,9和18，1,9和18的索引是1,4和8，所以函数应该返回[1 4 8]。

我知道我可以使用循环来做到这一点，但 matlab 并不真正喜欢循环，而且我的矩阵太大，并且迭代所有值会在时间上非常昂贵。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T21:24:27.350

我将按如下方式进行：

```
% clc,clear all,close all
A = [1 4 6 9 11 13 15 18 21];
B = [2 10 19];
C = abs(bsxfun(@minus,A',B));
[~,idx] = min(C(:,1:size(C,2))) 
```

# java - 如何用xml包装（环绕）java匹配器组？

> ID：16046938
> 
> 赞同：2
> 
> 时间：2013-04-16T20:57:37.270
> 
> 标签：java, regex, matcher

使用文本节点的以下值...

```
MatcH one MatcHer two MarcH three 
```

如何使用 java matcher.find() 创建以下输出？

```
<wrap>MatcH</wrap> one MatcHer two <wrap>MarcH</wrap> three 
```

假设一个 Java 正则表达式捕获所有以大写“M”开头并以大写“H”结尾的单词

```
\bM\w*H\b 
```

**基本上，我想用包装**标签包围任何与这个正则表达式匹配的东西

```
String text = "MatcH one MatcHer two MarcH three";
Pattern pattern = Pattern.compile(\\bM\w*H\b\);
Matcher matcher = pattern.matcher(text);

// replace each time the regex is found
while (matcher.find()) {
   text = text.replaceAll(matcher.group(), "<wrap>" + 
            + matcher.group() + "</wrap>");
} 
```

ReplaceFirst/ReplaceAll 对我不起作用，因为它会导致以下结果......

```
<wrap>MatcH</wrap> one <wrap>MatcH</wrap>er two <wrap>MarcH</wrap> three 
```

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T21:35:19.210

你的正则表达式是有问题的，因为你的 do `replaceAll`，所以它会 match `MatcH`，然后`MatcH`会`MatcHer`在循环的迭代中被替换。请注意，`\\b`的输出中没有出现`group`，因此没有什么可以阻止它替换`MatcHer`。

您可以`System.out.println`在循环内放置一个来打印输出`group`和输出`replaceAll`以查看发生了什么以及它为什么会这样做。

将您的代码简化为以下内容将起作用：（这可能是“硬编码匹配数字”，但我并没有真正看到它的问题，我也没有看到更简单的解决方案）

```
String text = "MatcH one MatcHer two MarcH three";
text = text.replaceAll("\\b(M\\w*H)\\b", "<wrap>$1</wrap>"); 
```

以上是正则表达式应该如何工作。如果您发现将来使用与上述类似的东西可能会出现问题，那么正则表达式可能不是要走的路。

# php - 由于主键为空，我无法在我的数据库中插入数据

> ID：16046949
> 
> 赞同：0
> 
> 时间：2013-04-16T20:58:17.357
> 
> 标签：php, html, mysql

我是 PHP、MySQL 的新手，正在为我的学校做一个项目。我需要制作一个表格，将新学生插入数据库。

我需要命名一个主键`studentnummer`，以便以后可以使用它，但这需要在数据库表中而不是在表单中创建。当我尝试在表中插入表单的数据时，我会收到一条错误消息，提示我需要在表的第 1 行中插入数据*（这是主键，即 AI 和 INT）*

我为 PHP 和 MySQL 准备了以下内容：

```
require ("connection.php");

//gets the data from the form
$voornaam = $_REQUEST['voornaam'];
$tussenvoegsel = $_REQUEST['tussenvoegsel'];
$achternaam = $_REQUEST['achternaam'];
$geboortedatum = $_REQUEST['geboortedatum'];
$woonplaats = $_REQUEST['woonplaats'];
$straat = $_REQUEST['straat'];
$huisnummer = $_REQUEST['huisnummer'];
$postcode = $_REQUEST['postcode'];
$telefoonnummer = $_REQUEST['telefoonnummer'];
$mobielnummer = $_REQUEST['mobielnummer'];
$email = $_REQUEST['email'];
$voor = $_REQUEST['voor'];
$motivatie = $_REQUEST['motivatie'];
$alt = $_REQUEST['alt'];

$tbl_name ="studenten";//db table name
$sql_ins = mysql_query("INSERT INTO $tbl_name values('??studentnummer??','$voornaam', '$tussenvoegsel', '$achternaam', '$geboortedatum', '$woonplaats', '$straat', '$huisnummer', ' $postcode' , '$telefoonnummer', '$mobielnummer', '$email', '$voor', '$motivatie', '$alt')"); 
```

这是我的[桌子](http://i.imgur.com/aHsl2JP.png)结构的打印屏幕。如果有人知道我能解决这个问题，我将不胜感激！！！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:00:26.597

如果您将 a 插入`NULL`到 auto_increment 主键字段中，mysql 将为您提供值，所以

```
INSERT INTO $tbl_name VALUES(NULL, blah blah blah) 
```

然后您可以使用检索生成的值

```
$studentnummer = mysql_insert_id(); 
```

请注意，您不应该使用 mysql_*() 函数。它们已被弃用。考虑切换到 mysqli 或 PDO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:10:02.747

请试试这个-

$sql_ins = mysql_query("INSERT INTO $tbl_name values('','$voornaam', '$tussenvoegsel', '$achternaam', '$geboortedatum', '$woonplaats', '$straat', '$huisnummer', '$postcode', '$telefoonnummer', '$mobielnummer', '$email', '$voor', '$motivatie', '$alt')");

# javascript - 如果单击按钮时未选中复选框，则显示警报

> ID：16046953
> 
> 赞同：-3
> 
> 时间：2013-04-16T20:58:34.570
> 
> 标签：javascript, jquery, checkbox, alert

如何发出弹出警报，以便当用户单击按钮且未选中复选框时，将使用 jQuery 出现警报？

复选框是：

```
<input type="checkbox" id="confirm" class="confirm"> 
```

按钮是：

```
<form action="resetprocess.php" method="POST">
  <button type="submit" id="reset" class="btn btn-danger">Reset <i class="icon-repeat"></i></button> 
</form> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T21:07:23.670

您需要捕获按钮的单击事件，然后检查复选框是否被单击。如果没有，您可以发送警报并返回 false（请务必这样做，否则无论如何都会提交表单）。

```
$('#reset').click(function () {
    if (!$('#confirm').is(':checked')) {
        alert('not checked');
        return false;
    }
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/dvTXV/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T21:00:05.080

```
$("#reset").on('click',function(){
  if(!$("#confirm").is(':checked')){
   // alert("");
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T21:00:26.507

```
$("#reset").click(function(){
    if ($("#checkbox:checked").length == 0)
        alert("Checkbox not checked!");
}); 
```

# php - this.form.submit() 与 PHP isset？

> ID：16046954
> 
> 赞同：0
> 
> 时间：2013-04-16T20:58:49.107
> 
> 标签：php, javascript

```
echo "<form method=\"post\" action=\"settings.php\" onchange=\"this.form.submit()\">";
echo "Announce New Files: <input type=\"radio\" name=\"announcefiles\" value=\"On\" $checkon1> On";
echo "<input type=\"radio\" name=\"announcefiles\" value=\"Off\" $checkoff1> Off<br>";
echo "</form>"; 
```

我正在尝试在按下其中一个单选按钮时提交此表单，但我不确定如何捕获提交。

例如，通常使用提交按钮，您会使用类似于 if(isset($_POST['submit'])) 的内容，但如果表单自动提交，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:18:49.363

尝试这个：

如果您将 php 和 html 分开一点，您可能会更轻松。

```
<form method="post" action="settings.php" onchange="this.form.submit()">
    <fieldset>
        <legend>Announce New Files:</legend>
        <label for="on"><input type="radio" id="on" name="announcefiles" value="On" <?php echo $checkon1 ?> /> On</label>
        <label for="off"><input type="radio" id="off" name="announcefiles" value="Off" <?php echo $checkoff1 ?> /> Off</label>
    </fieldset>
</form> 
```

然后在 settings.php 中的 php 逻辑中（如果您要回发到同一页面，则在表单上方）您可以检查以下值`announcefiles`：

```
<?php
    if(isset($_POST['announcefiles'])){
        // DO SOMETHING
    }
?> 
```

让我知道这是否有帮助。或者，如果我错过了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:01:54.930

您应该检查请求方法。如果您已经干净地进行了设置，那么该 URL 的 POST 请求将意味着表单提交。正如您所注意到的，您可以尝试在不存在值的情况下提交。

```
if ($_SERVER['REQUEST_METHOD'] === 'POST') 
```

有关更多讨论，请参阅[$_POST 与 $_SERVER['REQUEST_METHOD'] == 'POST'](https://stackoverflow.com/questions/409351/post-vs-serverrequest-method-post)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T21:01:16.067

添加隐藏的输入字段，例如：

```
<input type="hidden" name="action" value="submit" /> 
```

然后在 PHP 中检查：

```
if(isset($_POST["action"]) && $_POST["action"] == "submit") { ... } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T21:01:40.617

为您的表格命名并检查`isset($_POST['form_name'])`或检查收音机的名称`isset($_POST['announcefiles'])`

此外，您不需要所有的引号转义，您可以使用单引号以及使用多行字符串 - 请参见下面的示例。

```
echo "
<form method='post' name='form_name' action='settings.php' onchange='this.form.submit()'>
Announce New Files: <input type='radio' name='announcefiles' value='On' $checkon1> On
<input type='radio' name='announcefiles' value='Off' $checkoff1> Off<br>
</form>";

<?php
    // Check if form was submitted
    if (isset($_POST['form_name']) {
        // Form submitted
    }
?>

<?php
    // Check if radio was selected
    if (isset($_POST['announcefiles']) {
        // Form submitted
        echo 'You chose' . $_POST['announcefiles'];
    }
?> 
```

# java - 可变参数的替代品

> ID：16046956
> 
> 赞同：3
> 
> 时间：2013-04-16T20:58:51.570
> 
> 标签：java, arrays, list, collections, variadic-functions

我正在实现一个类，它的构造函数必须获取一些字符串作为参数，但我不知道这些字符串的数量。我可以在这里传递一个可变参数（字符串），但它是一个家庭作业，我们不能在我们的解决方案中使用任何类型的数组或其他不常见的库。（它应该是一个ArrayList或类似的东西，因为我们现在正在学习Collections-Framework）我想将一个List作为参数传递给构造函数，但是这个列表必须在之前填充，而且它很长..应该很简单.

所以第一个带有可变参数的解决方案（不被接受）应该是这样的：

```
public MyClass(String... myStrings) 
{
     for (String string : myStrings)
     {
          myStrings.add(string);
     }
} 
```

所以它可以像这样使用，例如：

```
MyClass example = new MyClass("String1", "String2", "String3"); 
```

或者

```
MyClass example2 = new MyClass("String1", "String2"); 
```

第二个（有点复杂，因为之前应该“填充”列表）：

```
public MyClass(List<String> myStrings) 
{
      myPlayers = myStrings;
} 
```

（ps：myPlayer 是一个实例变量，然后会被初始化）

所以你有什么想法（像第一个但没有

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T21:32:16.057

简而言之，我的解决方案是：

```
public MyClass(List<String> myStrings) 
{
      myPlayers = myStrings;
} 
```

然后调用它：

```
List<String> items = new ArrayList<String>() {{ add("first"); add("second"); add("third"); }};
MyClass myClass = new MyClass(items); 
```

不需要构建器，只需一个 ArrayList 的匿名子类，您将在其中调用 ArrayList 的 add 方法。这样您就可以轻松构建列表，而无需可变参数/数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T21:19:56.457

对构建器模式进行一些研究。堆栈溢出问题中对此进行了很好的讨论，[您何时使用构建器模式？](https://stackoverflow.com/questions/328496/when-would-you-use-the-builder-pattern).

如果您创建一个 StringListBuilder 类，您可以简单地拥有这样的方法签名：

```
MyClass(List<String> stringList) {/* ... */} 
```

您可以使用您的构建器类调用构造函数，如下所示：

```
MyClass example = new MyClass(new StringListBuilder("first string").
        add("second string").add("third string").add("and so on").toList()); 
```

这将允许您构建任意大小的列表（包括空列表），而无需使用可变参数或数组。

# javascript - 圆形（ARC）渐变填充画布JS

> ID：16046962
> 
> 赞同：4
> 
> 时间：2013-04-16T20:59:04.860
> 
> 标签：javascript, html, canvas, gradient, geometry

我需要画一个动态的甜甜圈图——类似于——

```
http://194.90.28.56/~dev1/t.jpg 
```

绿色部分表示百分比（在本例中为 27%） - 它必须是动态的。

我想我需要做一些类似的事情 - [Android - 如何绘制基于弧的渐变](https://stackoverflow.com/questions/9037108/android-how-to-draw-an-arc-based-gradient)

但是用JS..

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-17T03:20:40.263

好问题。画布中沿路径的渐变很难。最简单的方法是捏造它。

与其将您的图像视为遵循圆形路径的渐变，不如将其视为两个线性渐变。

*   左侧一个，从绿色到灰色，从上到下。
*   另一个在右侧，从白色到灰色，从上到下。

想象一个由这两个渐变组成的正方形：

![在此处输入图像描述](https://i.stack.imgur.com/c7yEg.png)

现在想象一个圆圈穿过：

![在此处输入图像描述](https://i.stack.imgur.com/XAao4.png)

这就是你所要做的。

像这样“切入”最容易使用剪辑区域，所以我做了一个例子。

这是现场示例：http: [//jsfiddle.net/simonsarris/Msdkv/](http://jsfiddle.net/simonsarris/Msdkv/)

代码如下！希望有帮助。

```
var greenPart = ctx.createLinearGradient(0,0,0,100);
greenPart.addColorStop(0, 'palegreen');
greenPart.addColorStop(1, 'lightgray');

var whitePart = ctx.createLinearGradient(0,0,0,100);
whitePart.addColorStop(0, 'white');
whitePart.addColorStop(1, 'lightgray');

var width = 20;
ctx.lineWidth = width;

// First we make a clipping region for the left half
ctx.save();
ctx.beginPath();
ctx.rect(-width, -width, 50+width, 100 + width*2);
ctx.clip();

// Then we draw the left half
ctx.strokeStyle = greenPart;
ctx.beginPath();
ctx.arc(50,50,50,0,Math.PI*2, false);
ctx.stroke();

ctx.restore(); // restore clipping region to default

// Then we make a clipping region for the right half
ctx.save();
ctx.beginPath();
ctx.rect(50, -width, 50+width, 100 + width*2);
ctx.clip();

// Then we draw the right half
ctx.strokeStyle = whitePart;
ctx.beginPath();
ctx.arc(50,50,50,0,Math.PI*2, false);
ctx.stroke();

ctx.restore(); // restore clipping region to default 
```

# excel - 分别合并两行

> ID：16046968
> 
> 赞同：1
> 
> 时间：2013-04-16T20:59:34.727
> 
> 标签：excel, vba

当我在 vba 中执行以下操作时，两行合并为一。我想要两个单独的合并行，有人可以帮忙吗？

```
Range("A" & 1 & ":I" & 1).MergeCells = True
Range("A" & 2 & ":I" & 2).MergeCells = True 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:07:08.640

除了我的评论，试试这个

```
Sub Sample()
    Range("A" & 1 & ":I" & 2).MergeCells = False

    Range("A" & 1 & ":I" & 1).MergeCells = True
    Range("A" & 2 & ":I" & 2).MergeCells = True
End Sub 
```

# django - 你如何从 Django 服务器端提交表单？

> ID：16046969
> 
> 赞同：1
> 
> 时间：2013-04-16T20:59:36.043
> 
> 标签：django, http, post, paypal

我有一个表单，其中包含一些贝宝字段和特定于我的应用程序的其他字段。我想将表单提交到我的服务器，让它处理一些字段，然后将其转发到 paypal 处理程序 url 以进行付款。如果我在服务器代码中使用以下内容：

```
if request.method == 'POST':

    // Process some form elements

    // Forward on to paypal
    return HttpResponseRedirect("https://www.paypal.com/cgi-bin/webscr") 
```

问题是原始表单没有随重定向一起发布。如何使用原始表单将其制作成 HTTP 帖子，以便将它们重定向到 Paypal 并能够登录并完成付款？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:03:27.403

您可以使用 http.client 发出 POST 请求。下面是文档和示例的链接。

[http://docs.python.org/3.1/library/http.client.html](http://docs.python.org/3.1/library/http.client.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:32:43.920

我认为这也接受 GET 请求，这意味着您可以在 url 中传递该表单数据。所以你应该能够沿着这些方向做......

```
if request.method == 'POST':

    // Process some form elements
    // Forward on to paypal
    return HttpResponseRedirect("https://www.paypal.com/cgi-bin/webscr?%s" % "&".join(["%s=%s" % (key,value) for key,value in request.POST.iteritems()])) 
```

# wordpress - 如何使用插件覆盖 searchform.php

> ID：16046972
> 
> 赞同：0
> 
> 时间：2013-04-16T20:59:40.400
> 
> 标签：wordpress, add-filter, search-form

我正在尝试构建一个看起来与默认 WP 搜索框有点不同的搜索表单。我可以为此编辑 searchform.php，但我希望它采用插件的形式，以便我可以轻松启用和随意禁用它。但问题是，如果 WP 找到了 searchform.php，它将使用该文件中的表单，因此 add_filter、add_action 之类的技巧不会在这里起作用。所以，我想问这里的人们：是否有某种方法可以实现上述目标。即覆盖searchform.php的代码

另外，如果我将搜索框命名为“s”以外的任何名称，则代码将转到 index.php，而不是 search.php。这一点，我通过放置调试回声和其他奇怪的语句来验证。这可能是什么原因？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T05:42:41.723

好吧，我发现了一个黑客。虽然不是很好，但对我有用。所以我所做的是，在我的插件的激活过滤器中，我编写了代码以将原始 searchform.php（驻留在当前主题文件夹中的那个）重命名为 searchform_orig.php 这样 WP 找不到 searchform.php 等等呈现我已连接到过滤器的搜索表单。同样，在停用部分，我将文件重命名为 searchform.php。可能并不理想，但正在我测试过的 y 系统上工作。尽管我有兴趣了解这种方法中的漏洞/警告。将其标记为答案;-)

# c++ - 如何在 C++ 中使用 Cairo 绘制到使用 GDI 的窗口（而不是创建图像）？

> ID：16046981
> 
> 赞同：6
> 
> 时间：2013-04-16T21:00:28.543
> 
> 标签：c++, c, cairo

我设法找到这个代码片段并用 Cairo 编译它：

```
#define LIBCAIRO_EXPORTS
#include <cairo/cairo.h>
#include <cairo/cairo-win32.h>

int main(int argc, char** argv)
{
    cairo_surface_t *surface;
    cairo_t *cr;
    surface = cairo_image_surface_create (CAIRO_FORMAT_ARGB32, 240, 80);
    cr = cairo_create (surface);

    cairo_select_font_face (cr, "serif", CAIRO_FONT_SLANT_NORMAL,
                                         CAIRO_FONT_WEIGHT_BOLD);
    cairo_set_font_size (cr, 32.0);
    cairo_set_source_rgb (cr, 0.0, 0.0, 1.0);
    cairo_move_to (cr, 10.0, 50.0);
    cairo_show_text (cr, "Hello, World");
    cairo_destroy (cr);
    cairo_surface_write_to_png (surface, "hello.png");
    cairo_surface_destroy (surface);

    return 0;
} 
```

如您所见，它创建了一个带有文本“Hello World”的图像并将其保存在驱动器上。如何创建一个 win32 表面并改为绘制到窗口？

我无法使用：`cairo_win32_surface_create`

它需要一个`hdc`，我不知道那是什么。我尝试阅读一些教程，但似乎没有一个可以引导您完成打印到新窗口。

我找到了这个链接： [http ://windrealm.org/cairo-gdi/](http://windrealm.org/cairo-gdi/)

它有一个工作演示，但它使用`int WINAPI WinMain`. 我不想用那个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T21:26:16.483

有几种方法可以在 Windows 中获取设备上下文的句柄。例如，`WM_PAINT`处理程序通常会调用`BeginPaint`以获取设备上下文，将内容更新到窗口，然后调用`EndPaint`. 在无法使用`BeginPaint`和`EndPaint`无法使用的情况下（例如，在 WM_PAINT 消息之外），您可以使用`GetDC`更新窗口，然后调用`ReleaseDC`.

设备上下文返回`BeginPaint`并`GetDC`允许您直接绘制到窗口。但是，有时您想直接绘制到位图。在这种情况下，您将调用`CreateCompatibleDC`，选择要绘制的位图，进行绘制，然后调用`DeleteDC`。

在您的情况下，您正在寻找类似于以下内容的内容：

```
HDC dc = GetDC(windowHandle);
cairo_win32_surface_create(dc);
ReleaseDC(windowHandle, dc); 
```

如果您不想在此阶段创建窗口（因为您只是保存图像），您可能可以使用桌面窗口来获取设备上下文。

```
HWND windowHandle = GetDesktopWindow();
HDC dc = GetDC(windowHandle);
cairo_win32_surface_create(dc);
ReleaseDC(windowHandle, dc); 
```

还有其他调用可用于获取或创建设备上下文。[您可以在此处](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183554%28v=vs.85%29.aspx)找到这些和相关功能的列表

创建和使用窗口涉及更多内容，因此我将为您提供基本步骤和一些示例代码，您可以使用它们来玩弄。要创建和使用窗口...

*   注册一个窗口类`RegisterClass`
*   `CreateWindow`使用or创建窗口`CreateWindowEx`
*   通过调用使用消息泵处理消息`GetMessage`，`TranslateMessage`以及`DispatchMessage`

此外，您将必须实现一个函数来处理窗口消息的处理，例如`WM_PAINT`.

**注意：以下代码未经测试，但应该是正确的。**

```
LRESULT CALLBACK WndProc(HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    if(message == WM_PAINT)
    {
        HDC dc;
        PAINTSTRUCT ps;
        dc = BeginPaint(hwnd, &ps);

        // do your drawing here

        EndPaint(hwnd, &ps);
    }

    return 0;
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
                    PSTR szCmdLine, int iCmdShow)
{
    static TCHAR szClassName[] = TEXT("DrawSurfaceClass");
    HWND         hwnd;
    MSG          msg;
    WNDCLASS     wndclass;

    ///////////////////////////////////////////////////////////
    //  Register a window "class"
    ///////////////////////////////////////////////////////////
    wndclass.style         = CS_HREDRAW | CS_VREDRAW;
    wndclass.lpfnWndProc   = WndProc;
    wndclass.cbClsExtra    = 0;
    wndclass.cbWndExtra    = 0;
    wndclass.hInstance     = hInstance;
    wndclass.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
    wndclass.hCursor       = LoadCursor(NULL, IDC_ARROW);
    wndclass.hbrBackground =(HBRUSH)COLOR_WINDOW;
    wndclass.lpszMenuName  = NULL;
    wndclass.lpszClassName = szClassName;

    if(!RegisterClass(&wndclass))
    {
        //  error
        return 1;
    }

    ///////////////////////////////////////////////////////////
    //  Create the window and display it (if iCmdShow says so)
    ///////////////////////////////////////////////////////////
    hwnd = CreateWindow(
        szAppName,
        TEXT("Draw Surface"),
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT, CW_USEDEFAULT,
        CW_USEDEFAULT, CW_USEDEFAULT,
        NULL, NULL, hInstance, NULL);

    ShowWindow(hwnd, iCmdShow);
    UpdateWindow(hwnd);

    ///////////////////////////////////////////////////////////
    //  Run the message pump so the window proc recieves events
    ///////////////////////////////////////////////////////////
    while(GetMessage(&msg, NULL, 0, 0))
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    return msg.wParam;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T18:47:53.760

我发现初学者打开一个窗口并在其中画一些线条的最简单方法是下载和设置 gtk+ 并使用 ZetCode 的教程。

您可能需要从这里下载 GTK：http: [//gtk.hexchat.org/](http://gtk.hexchat.org/)

设置 Gtk+： [在 Visual C++ 中使用 GTK+](https://stackoverflow.com/questions/1513214/using-gtk-in-visual-c)

开罗教程：http: [//zetcode.com/gfx/cairo/](http://zetcode.com/gfx/cairo/)

请记住在编译的可执行文件所在的目录中包含所有 GTK 的 dll 文件。

# html - 将 div 像标尺一样放在左侧和顶部 w/jsfiddle.net

> ID：16046982
> 
> 赞同：1
> 
> 时间：2013-04-16T21:00:39.407
> 
> 标签：html, css, html5-canvas

我在实现此架构时遇到问题： ![在此处输入图像描述](https://i.stack.imgur.com/2Ga67.jpg)

这是一个jsfiddle：http: [//jsfiddle.net/ptCoder/3WB32/](http://jsfiddle.net/ptCoder/3WB32/)

“Bar 2”需要垂直旋转：

```
transform: rotate(90deg);
-ms-transform: rotate(90deg); /* IE 9 */
-webkit-transform: rotate(90deg); /* Safari and Chrome */ 
```

谁能帮我？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T21:19:19.577

你可以一起捏造这样的东西 DEMO [http://jsfiddle.net/kevinPHPkevin/3WB32/5/](http://jsfiddle.net/kevinPHPkevin/3WB32/5/)

```
<div class="container">
    <div id="hbar">Bar 1</div>
    <div id="vbar">Bar 2</div>
    <canvas id="c" width="400px" height="400px">CANVAS</canvas>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T21:09:22.600

下面是我建立的一种自定义方法，对我个人来说这样做更有意义。您可以通过单击底部的示例来查看它的功能/外观。

**的HTML：**

```
<div id="wrapper">
    <div id="bar-1">
        <p>Bar 1</p>
    </div>
    <div id="bar-2">
        <p>Bar 2</p>
    </div>
    <div id="canvas">
        This is the canvas
    </div>
</div> 
```

**CSS：**

```
#wrapper{
    min-height: 500px;
    position: relative;
    background: #ccc;
}
#bar-1{
    position: absolute;
    left: 100px;
    right: 100px;
    background: blue;
    height: 100px;
}
#bar-2{
    position: absolute;
    top: 100px;
    background: red;
    bottom: 100px;
    width: 100px;
}
#canvas{
    position: absolute;
    top:100px;
    left: 100px;
    background: yellow;
    bottom: 100px;
    right: 100px;

} 
```

[**单击此处查看上述代码的工作示例：**](http://jsfiddle.net/yBYP4/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T21:09:52.017

您为两个 div 提供相同的课程

```
<div id="hbar" class="hbar">Bar 1</div>
<div id="vbar" class="hbar">Bar 2</div> 
```

将第二个更改为`vbar`

# c++ - “错误：没有运算符“=”匹配这些操作数”

> ID：16046984
> 
> 赞同：1
> 
> 时间：2013-04-16T21:00:45.990
> 
> 标签：c++, vector, operator-keyword, operand

我遇到了一个奇怪的问题，编译器突出显示“=”和“！=”作为错误，声称没有匹配的操作数，但我不知道如何。这是我的代码：

```
#pragma once
#include "Console.h"
#include "RandomNumber.h"
#include "Element.h"
#include "Flotsam.h"
#include "vector"
#include <list>
#include <iostream>

using namespace std;

#define NUMBER 10

int main()
{
    Console console;
    RandomNumber rnd;

    vector<Element*> flotsam;

    for(int i = 0; i < NUMBER; i++)
    {
        flotsam.push_back(new Element(rnd, console));
    }

    vector<Element>::iterator ptr;

    ptr = flotsam.begin();

    while(ptr!=flotsam.end())
    {
        ptr->printAt();
        ptr++; 
    }
    Sleep(1000);
    console.clear();

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T21:02:42.100

你的向量有不同的类型，迭代器应该是

```
vector<Element*>::iterator ptr;
//            ^ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T21:03:00.840

`flotsam`是一个`std::vector<Element*>`，所以你需要

```
vector<Element*>::iterator ptr; 
```

通过迭代器访问指针时，您还需要取消引用指针：

```
(*ptr)->printAt(); 
```

或者，您可以通过使用`Element`对象向量来大大简化代码：

```
vector<Element> flotsam; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T21:07:10.227

也许更好的解决方案是（C++11）：

```
auto ptr = flotsam.begin(); 
```

它将对矢量元素类型保持稳定。

是的，看看迭代器的使用你可能应该有：

```
vector<Element> flotsam; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T21:07:43.830

由于迭代器类型迭代 a `vector<Element>`，`flotsam`因此也应该是 a `vector<Element>`。这里显然不需要指针容器。对象容器似乎合适。要添加元素，只需使用`pushback(Element(rnd, console))`; 不需要`new`。

# jenkins - 詹金斯更新失去了旧工作

> ID：16046990
> 
> 赞同：3
> 
> 时间：2013-04-16T21:00:57.553
> 
> 标签：jenkins

我在一个redhat linux盒子上。我最近将 Jenkins 更新到 1.509 版，却发现这样做之后它“忘记了”我的两个工作/项目。这些作业仍然可以在我的 Jenkins 机器上的 /var/lib/jenkins/jobs 下找到，但它们不再显示在 Jenkins GUI 中。我试图根据我拥有的配置文件重新创建它们，但我不确定我是否完全重新创建了它们所具有的功能。

我还尝试复制该作业或重命名它，希望能让詹金斯看到它，但没有运气。我试过了`cp -r /var/lib/jenkins/jobs/JOB1 /var/lib/jenkins/jobs/JOB2`。我还多次重新启动服务。最后我更新了我所有的插件，以某种方式相关。

所以我的问题是“我怎样才能让詹金斯注意到这些工作？” 或失败“我可以从终端运行这些作业吗？”

注意：我并不是在劝阻其他人升级 Jenkins。在我升级 Jenkins 之后，我确实抱怨了一些我没有引起足够重视的事情，我相信这些事情一开始就让我陷入了困境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-21T20:58:07.880

如果我是你，我会尝试使用 Jenkins CLI（来自 $JENKINS_URL/cli）并使用 create-job 命令并将作业配置文件提供给 cli 的标准输入。

如果这没有帮助，我会检查 Jenkins 日志文件（您将 Jenkins 的 stdout 和 stderr 保存在某处，对吗？）是否有任何错误或线索。如果由于插件提供了一些您可以猜到的标签而导致作业加载失败，请尝试从配置文件中删除该部分。

如果那没有帮助，我会升级 Jenkins。我认为自 1.509 以来的 LTS 版本变更日志中可能有一些与此相关的修复。

最重要的是……如果我是你，我会开始备份作业配置文件。

我定期备份全局 config.xml、所有作业 config.xml 文件和所有插件。使用这些我可以从头开始设置我的 Jenkins。我这样做是为了设置一个测试实例，在其中尝试任何插件或 Jenkins 核心升级。如果在运行一些最棘手的构建后没有发现任何问题，我知道我可以更有信心升级生产实例。

# groovy - 如何将参数传递给 Groovy 2.0 脚本？

> ID：16046993
> 
> 赞同：3
> 
> 时间：2013-04-16T21:01:04.740
> 
> 标签：groovy

我有 2 个脚本，我试图在其中测试传递一个参数，但它失败了。我检查了 GroovyScriptEngine 的文档，但它似乎没有处理我想要传递 arg 而不是属性值对（在绑定中）的情况。

这是我得到的错误：

```
C:\AeroFS\Work\Groovy_Scripts>groovy scriptengineexample.groovy
hello, world
Caught: groovy.lang.MissingPropertyException: No such property: args 
        for class: hello
groovy.lang.MissingPropertyException: No such property: args for 
        class: hello
        at hello.run(hello.groovy:4)
        at Test.main(scriptengineexample.groovy:14) 
```

这是我的脚本：

```
import groovy.lang.Binding;
import groovy.util.GroovyScriptEngine;
import groovy.util.ResourceException ;
import groovy.util.ScriptException ;
import java.io.IOException ;

public class Test {
  public static void main( String[] args ) throws IOException, 
             ResourceException, ScriptException {
    GroovyScriptEngine gse = new GroovyScriptEngine( [ '.' ] as String[] )
    Binding binding = new Binding();
    binding.setVariable("input", "world");
    gse.run("hello.groovy", binding);
    System.out.println( "Output: " + binding.getVariable("output") );
  }
} 
```

和这个：

```
//hello.groovy
println "hello.groovy"
for (arg in this.args ) {
  println "Argument:" + arg;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T19:23:56.943

Hello 正在寻找名为的绑定中的字符串数组`args`。当您通过命令行运行脚本时，它会自动提供给您，但如果您在该上下文之外运行它，则必须将其添加到您`Binding`自己：

这会将发送到`Test`through 的参数按`Hello`原样传递：

```
public class Test {
    public static void main(String[] args) {
        Binding b = new Binding()
        b.setVariable("args", args)
        Hello h = new Hello(b);
        h.run()
    }
} 
```

如果要发送特定参数，则必须自己构造数组：

```
public class Test {
    public static void main(String[] args) {
        Binding b = new Binding()
        b.setVariable("args", ["arg1", "arg2", "etc."])
        Hello h = new Hello(b)
        h.run()
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-07T06:57:50.257

更简单的是，Binding 类有一个构造函数，它接受一个 String[]，并将其添加为“args”，这样你就可以这样做：

```
public class Test {
    public static void main(String[] args) {
      new Hello(new Binding(args)).run();
    }
} 
```