# StackOverflow 问答 16001000-16001999

# php - 通过 PHP 变量选择 MySQL 查询

> ID：16001001
> 
> 赞同：0
> 
> 时间：2013-04-14T15:51:38.717
> 
> 标签：php, mysql, variables, mysql-num-rows

我的分数为零`$booked_num`，我在 SQL 中尝试了用值代替变量的查询，它工作得很好。但是我不知道我在哪里犯了错误，请帮助。我已经回显了每个变量，一切都很好，但是里面什么都没有，`$booked_row`并且`$booked_num`回显为零。

```
require_once 'mysql_connector.php';
$booked_result = mysql_query('select * from booked where train_no = ".$train_no." and date = ".$date." and st_from = ".$st_from." and st_to = ".$st_to.";') or die(mysql_error()) ;
$booked_num = mysql_num_rows($booked_result);
echo $booked_num;
$booked_row = mysql_fetch_array($booked_result,MYSQL_ASSOC);
print_r($booked_row); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:57:55.263

```
$booked_result = mysql_query('select * from booked where train_no = ".$train_no." and date = ".$date." and st_from = ".$st_from." and st_to = ".$st_to.";') or die(mysql_error()) ; 
```

此语法不正确 - 您需要在连接变量之前关闭字符串。就像是：

```
$booked_result = mysql_query('select * from booked where train_no = "' .$train_no. '" and date = "' .$date. '" and st_from = "' .$st_from. '" and st_to = "' .$st_to. '";') or die(mysql_error()); 
```

此外，您应该考虑切换到 PDO 库。除其他外，它将帮助您避免查询中的 sql 注入攻击。

# r - 如何在 R 中找到正交矩阵？

> ID：16001002
> 
> 赞同：3
> 
> 时间：2013-04-14T15:51:47.103
> 
> 标签：r

我想`G`在 R 中找到一个正交矩阵 ()，这样 已知矩阵的特征值`G'CG=L=diag(l1,l2,...lp)` 在哪里。我使用代码找到了一个矩阵， 但结果矩阵 ( ) 不是对角矩阵。有谁能帮助我吗？提前致谢`l1>l2>...>lp>0``C``eigen(C)$vectors``L`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T16:07:49.863

您对显示的唯一限制`C`是所有特征值都是正的。但是，这相当于说`C`是肯定的。

在这种情况下，给定`e <- eigen(C)`，我们有以下内容：

```
Q = e$vectors
l = e$values

Conj(t(Q)) = Q^-1

Q %*% diag(l) %*% Conj(t(Q)) = C 
```

等效地：

```
diag(l) = Conj(t(Q)) %*% C %*% Q 
```

由于中的特征值以`l`降序存储，因此您完成了。

# objective-c - 在objective-c中拆分电话号码

> ID：16001003
> 
> 赞同：0
> 
> 时间：2013-04-14T15:51:51.610
> 
> 标签：objective-c, phone-number

我需要格式为 05XXXXXXXX 的拆分电话号码并放在“-”之间，例如 05X-XXXXXXX 我只需要在区号和自己编号之间放“-”号

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:36:39.427

如果您确定需要`-`始终排在第四位，则可以这样做

```
NSString *yourPhoneString=@"05XXXXXXXX";
NSMutableString *phoneNumber = [NSMutableString stringWithString:yourPhoneString];
[phoneNumber insertString:@"-" atIndex:3]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T02:48:27.107

谢谢阿努普

```
This is the answer NSString *yourPhoneString=@"05XXXXXXXX";
NSMutableString *phoneNumber = [NSMutableString stringWithString:yourPhoneString];
[phoneNumber insertString:@"-" atIndex:3]; 
```

# php - json_encode 只将一行数据库吐出到对象中

> ID：16001006
> 
> 赞同：0
> 
> 时间：2013-04-14T15:52:20.077
> 
> 标签：php, mysql, object, json

因此，我试图从数据库中取出所有行，然后能够在 javascript 中列出和操作它们。到目前为止，我所有的研究都指向了物体。

到目前为止，这是我的代码：

```
<?php
    if($_SESSION['username']) {

    $sql = "SELECT * FROM potentials";
    $result = mysql_query($sql) or die(mysql_error());
    $potential = mysql_fetch_array($result);

    $array = array();
    while ($row = mysql_fetch_assoc($result)) {
        $array[] = $row;
    }
    $myJSON = json_encode($array);
    echo $myJSON;
?> 
```

还有我的 javascript：

```
<script type="text/javascript">
    $(document).ready(function(){
        var potentialModels = <?php print($myJSON); ?>;
        console.log(potentialModels);
    });
</script> 
```

我在控制台中返回了这个：

```
[Object]
    0: Object
    length: 1
   __proto__: Array[0] 
```

但不应该是：

```
Object {Models: Array[2]}
    Models: Array[2]
        0: Object
            address: "407 Forby Estates Dr "
            age: ""
            city: "Eureka"
            dayofweek: ""
            email: "rebekahkeller@yahoo.com"
            firstname: "Maddie"
            id: "54"
            joindate: "2013-04-09 16:25:38"
            lastname: "Keller"
            parentname: "Rick Bross"
            parentnumber: "0"
            phone: "6367511428"
            state: "MO"
            timeofday: "after 9:30 am"
            twitter: ""
            zip: "63025"
            __proto__: Object
        1: Object
    length: 2
    __proto__: Array[0]
__proto__: Object 
```

我应该在我的 PHP 语句中使用 aforeach 而不是 while 循环吗？

一旦我拥有对象中的所有行（或对象数组？idk！？！？），如何检索值？

# vb.net - 替换INVOKE的方法

> ID：16001007
> 
> 赞同：0
> 
> 时间：2013-04-14T15:52:28.393
> 
> 标签：vb.net, invoke, invokerequired

有没有办法对在其他线程中创建的对象使用`Invoke`and`InvokeRequired`方法？有没有一种更直接且内存占用更少的方法？也许是状态机或线程控制？

我是否在浪费时间担心这种方法的资源使用情况？

我正在使用这种调用方法：[http ://tech.xster.net/tips/invoke-ui-changes-across-threads-on-vb-net/](http://tech.xster.net/tips/invoke-ui-changes-across-threads-on-vb-net/)

我在 VS 2012 中使用 VB.NET

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:32:18.177

这非常符合我医生通常的建议：“如果疼就不要这样做”。

有几种 .NET 模式强调将线程代码与需要在 UI 上运行的代码分开。BackgroundWorker 已经可用很长时间了，注意它的 ProgressChanged 和 RunWorkerCompleted 事件是如何在 UI 线程上运行的。无需调用自己即可更新 UI 的好地方。

.NET 4 Task 类为您提供 TaskScheduler.FromCurrentSynchronizationContext() 方法。这是链接在 UI 线程上运行的任务的好方法，非常专门用于使用以前异步运行的任务的结果更新 UI。VS2012 提供了另一种带有 Async 和 Await 关键字的武器。避免编写您不想编写的代码的所有好方法。

# c# - 程序终止时是否所有未手动处置的对象都自动处置？

> ID：16001008
> 
> 赞同：1
> 
> 时间：2013-04-14T15:52:28.700
> 
> 标签：c#, multithreading, dispose

FileStream、CryptoStream 等对象......或者我必须手动处理它们。

当用户单击表单关闭按钮时，我正在使用 Thread.IsBackground = true 来终止我的工作线程。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T16:10:37.570

让我们将其分解为多个问题：

> 当我的程序终止时，操作系统资源（例如文件句柄）会自动关闭吗？

一般来说，是的。当进程被销毁时，操作系统会自动关闭与该进程相关的所有资源。

> 假设我有非操作系统资源，比如数据库连接。我的应用程序会自动向数据库发送一条消息，说明连接已关闭吗？

不必要。但是，在面对不稳定的客户端时，应该将数据库编写为健壮的。

> 我是否应该清理我的资源，即使我不需要？

在“正常”关机时，是的。假设您将来有资源泄漏。如果你有良好的纪律并且总是在你完成资源时释放你的资源，那么找到泄漏会容易得多。以有序的方式关闭您的程序。

在“紧急”关机时，尽快关机。如果程序由于某些致命错误而停止运行，那么尝试清理可能只会使情况变得更糟。不要在建筑物倒塌之前花时间清扫地板。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T15:56:17.193

> 程序终止时是否所有对象 [...] 都会被自动处理？

是的。最终，所有非托管资源都是从操作系统（Windows）分配的，当一个进程终止时，它的所有资源都会被释放。但这并不意味着您的所有`Dispose()`方法都会被调用，您对它们没有任何保证。所以不要把任何重要的东西放在那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T15:53:58.773

如果不手动处置，所有对象将自动处置....在未来不确定的时间。

假设它们是正确构建的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T16:10:55.920

在某些情况下，终结器*不会*运行，例如，如果从终结器抛出异常，或者调用[`Environment.FailFast()`](http://msdn.microsoft.com/en-GB/library/ms131100.aspx).

所以这当然*不是*你可以依赖的东西。

您可能还想将其添加到`Main()`方法的末尾：

```
GC.Collect();
GC.WaitForPendingFinalizers(); 
```

但是，我认为任何依赖于此的代码都已*损坏*。

# scala - 为什么 Int 不从 Ordered[Int] 继承/扩展

> ID：16001010
> 
> 赞同：6
> 
> 时间：2013-04-14T15:52:37.703
> 
> 标签：scala, implicit-conversion, implicit

我有一个关于字体设计的问题。为什么 Int 不扩展 Ordered 特征。Int 不是自然排序的吗？

相反，scala 库提供了将 Int 转换为 Ordered[Int] 的隐式“orderer”方法。这里有哪些设计选择？

示例取自《Scala 编程》一书

```
def maxListImpParm[T <% Ordered[T]](elements:List[T]):T= ...

maxListImpParm(List(1,5,10,3)) // works because of implicit methods 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T15:56:24.303

因为 Int（以及从 AnyVal 继承的一些其他类）是短暂的——在运行时它通常由根本没有类（因此继承）概念的原始值表示。当然，也有例外，例如当您将项目放入集合时，对完整的引用类实例进行 Int 装箱，但 typeclass 提供了一种通用解决方案。此外，类型类比[继承更灵活](https://stackoverflow.com/a/4513556/298389)。

# html - 在其嵌套元素中覆盖样式

> ID：16001012
> 
> 赞同：-2
> 
> 时间：2013-04-14T15:52:54.500
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:56:43.537

也给我上课`<td>`：

```
<td class="newStyle"></td>

.newStyle{
color: red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:02:33.233

我想你还没有用 myclass 调用 td。还要检查您是否正确包含了您的 css 文件。

# php - kohana PHP 框架中的真正 HMVC/PAC

> ID：16001013
> 
> 赞同：-1
> 
> 时间：2013-04-14T15:53:33.067
> 
> 标签：php, frameworks, kohana, kohana-3

我是 PHP 新手和 PHP 框架的使用。我选择 Kohana PHP 作为我正在从事的项目的框架（而不是合金，也是因为它最不复杂）。有没有办法在我的 Kohana 项目中实现 MVC 三元组层次结构？

> 文件夹（mvc 的根文件夹）
> -|-subfolder
> ----models
> ----views
> ----controllers
> 
> -|-subfolder 2
> ----models
> ----views
> ----controllers

如果有人可以帮助我进行这种实现的路由和表单，我将很高兴:)

注意：我确实浏览了 kohana 的 3.3 文档，但我只是不知道如何实际实现它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:45:24.393

您可以在一个项目中使用一个“系统”和“模块”目录以及不同的“应用程序”文件夹。但是路由存在一些问题（它真的很难看）和代码重复（日志、配置等）

# javascript - TinyMCE 在编辑器可视模式下的 shorcode 标记后强制换行 \n

> ID：16001014
> 
> 赞同：2
> 
> 时间：2013-04-14T15:53:37.490
> 
> 标签：javascript, tinymce

在下面的函数中，我在第 1 列短代码的末尾添加了一个“\n”字符串，但是它在 tinyMCE 可视化编辑器中没有任何效果。我期望换行符将短代码分隔到自己的行中*（仅在编辑时，我不是指实时站点上已处理的短代码）*。

如何在不添加实际 html`<br>`或`<p>`标签的情况下强制它？

```
function tinyMCEshortcode() {

    var tagtext;

    var customid = getCheckedValue(document.getElementsByName('customstyle'));

        if (customid != 0 ){
            tagtext = "["+ customid + "]Insert Your Text Here[/" + customid + "]";
        }
        if (customid != 0 && customid == 'two_columns' ){
            tagtext = "["+ customid + "_1]<p>Content 1 Here</p>[/" + customid + "_1]" + "\n";
            tagtext += "["+ customid + "_2]<p>Content 2 Here</p>[/" + customid + "_2]";
        }

    if(window.tinyMCE) {
        window.tinyMCE.execInstanceCommand('content', 'mceInsertContent', false, '<p>'+tagtext+'</p>');

        //Peforms a clean up of the current editor HTML.
        //tinyMCEPopup.editor.execCommand('mceCleanup');
        //Repaints the editor. Sometimes the browser has graphic glitches.
        tinyMCEPopup.editor.execCommand('mceRepaint');
        tinyMCEPopup.close();
    }
    return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:15:26.063

由于 tinyMCE 内容是 HTML 格式，因此不会有任何视觉效果。这与您编辑网页页面并在其中的某处插入“\n”具有相同的效果。HTML 忽略了这一点，您需要插入`<br>`-tag - 没有其他方法。

# security - 登录禁令应该如何运作？

> ID：16001015
> 
> 赞同：1
> 
> 时间：2013-04-14T15:53:44.333
> 
> 标签：security, brute-force

我已经建立了一个登录系统。*如果超出每个 IP 或每个用户名*的最大失败尝试配额，登录页面会要求您解决验证码，直到您登录。我想在用户成功登录时删除所有记录（删除具有您的 IP 的记录**或**您的用户名）。然而，这有一个缺陷。

假设这是`attempts`一张桌子。

```
 IP | Username
----------+---------
127.0.0.1 |  jeff   
----------+---------
127.0.0.1 |  jeff
----------+---------
127.0.0.1 |  jeff
----------+---------
127.0.0.1 |  jeff
----------+--------- 
```

现在，假设客户端`127.0.0.1`使用用户名登录`atwood`。现在，没有更多关于他的记录：他可以继续对其他用户进行暴力破解，而无需处理验证码。

如何防止这种解决方法？

# java - Java - 比较字符串输入

> ID：16001021
> 
> 赞同：3
> 
> 时间：2013-04-14T15:54:13.773
> 
> 标签：java

```
import java.util.Scanner;

public class TrueFalseQuiz {

    public static void main(String[] args) {
        Scanner myScanner = new Scanner(System.in);
        String youranswer;

        boolean answer = false;
        System.out.print("The queens name is Elizabeth? yes or no ");
        youranswer = myScanner.toString();

        String start = myScanner.next();

        {
            if (youranswer.equals("yes")) {
                answer = true;
            }
        }

        if (answer == true) {
            System.out.println("Answer is correct");
        } else {
            System.out.println("Answer is wrong");
        }
    }
} 
```

此代码似乎没有将输入与我想要的字符串（“是”或“否”）进行比较。我是初学者，这只是我正在玩的基本代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T15:55:49.253

虽然*确实*返回一个字符串，但它不会为您提供与用户输入的内容相关的任何内容：[`Scanner#toString()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#toString%28%29)

 *> 返回 this 的字符串表示形式`Scanner`。a 的字符串表示形式`Scanner`包含可能对调试有用的信息。确切的格式未指定。

使用[`Scanner#next()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29)或[`Scanner#nextLine()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)，不使用`Scanner#toString()`。

* * *

请注意，这是一个非常基本的问题，可以通过查阅称为 JavaDocs 的 Java API 文档轻松回答。在 Stack Overflow 上发帖之前，您应该始终查阅相关的 JavaDocs。您的 IDE 可能具有不错的内置 JavaDoc，但您也可以随时在此处找到 Java SE JavaDoc：http: [//download.oracle.com/javase/7/docs/api](http://download.oracle.com/javase/7/docs/api)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T16:03:06.913

所以，你有一些事情发生在这里：

*   您想使用[Scanner.next()](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29)或[Scanner.nextLine()](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)来检索最终用户的输入。
*   您想摆脱`if`语句周围的静态代码块。
*   您想将答案与任何情况进行比较 - 如果我输入“是”，它将失败。您可以将其更改为：

    ```
    answer = "yes".equalsIgnoreCase(youranswer); 
    ```

    由于它是一个布尔值，因此您不必比较该值是否为真，将变量设置为真。您可以明确设置它。

*   在最后一个块中，您不需要`true`在布尔值中进行比较。你可以简单地说`if(answer)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T15:57:36.253

您可以使用`Scanner.next()`方法或`Scanner.nextLine()`.

该方法`Scanner.toString()`给出`Scanner`类的字符串表示。 `Scanner.toString()`实际上不会从控制台读取输入文本。

更多信息，

您可以使用 Scanner 类中可用的特定方法，例如

```
Scanner.nextShort()
Scanner.nextByte()
Scanner.nextInt() 
```

等等...见[扫描仪类](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)

上述方法将帮助您继续输入文本，而无需格式化文本，例如将其解析为整数等。*

# javascript - 如何删除 HTML 的某些部分

> ID：16001023
> 
> 赞同：1
> 
> 时间：2013-04-14T15:54:42.407
> 
> 标签：javascript, jquery, html, hyperlink, removechild

我的代码：

```
<div id="main">
    <div id="div1">Keep this div</div>
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <p>4</p>  
    <a href="">Keep this hyperlink</a>
</div>

<button id="button">Clear</button> 
```

如何删除 id 为 div1 的 div 之后的所有内容，但在单击最终如下所示的按钮时保留超链接：

```
<div id="main">
    <div id="div1">Keep this div</div>
    <a href="">Keep this hyperlink</a>
</div>

<button id="button">Clear</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:57:00.860

我假设您使用的是 jQuery，所以 a`nextAll(':not(a)')`应该可以正常工作。

[**工作演示**](http://cssdeck.com/labs/6li3mpyu)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T15:57:18.820

您可以将[nextAll()](http://api.jquery.com/nextAll/)方法与[:not](http://api.jquery.com/not-selector/)和[:last-child](http://api.jquery.com/last-child-selector/)选择器一起使用：

```
$("#button").click(function() {
    $("#div1").nextAll(':not(:last-child)').remove();
}); 
```

**[工作演示](http://jsfiddle.net/9TZ2X/)**

# javascript - 如何从 Iframe 内部的选择框中获取选定的值，并将其显示在外部？

> ID：16001030
> 
> 赞同：4
> 
> 时间：2013-04-14T15:55:16.823
> 
> 标签：javascript, jquery, html, select, iframe

我在 HTML 中有这个选择框，它所在的页面正在通过 iframe 加载到另一个页面（都在我的网站上）。我希望能够从选择框（iframe 内部）中获取选定的值，并将其显示在外部。这是我拼凑的一些代码，但我不知道我是否做得对：

```
<script>
$('#iframe').contents().find('#cds').change(function() {
    var selectVal = $(this).val();
    url = 'https://twitter.com/intent/tweet?button_hashtag=stream&text=Just enjoying ' + selectVal + ' on'; 
    $("twitter").attr("id", url);
});
</script> 
```

有什么建议吗？

**澄清**

*   我的`<select>`元素在`iframe`
*   我想在`iframe`
*   的来源与`iframe`加载它的页面在同一个域中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:07:11.150

我不确定你的 HTML 是什么样的，但是

```
$("twitter").attr("id", url); 
```

应该是：

```
$(".twitter").attr("id", url); 
```

* * *

更新：试试这段代码......你需要检测 iframe 是否也已加载（[演示](http://jsfiddle.net/Mottie/baEb9/2/)）

```
$(function () {
    // define this here because we're changing the ID
    var $twitter = $('#twitter');
    // bind to select inside iframe
    $('#iframe').on('load', function () {
        $(this).contents().find('#cds').change(function () {
            var selectVal = $(this).val();
            url = 'https://twitter.com/intent/tweet?button_hashtag=stream&text=Just enjoying ' + selectVal + ' on';
            $twitter.attr("id", url).text(url);
        }).change(); // trigger change to get initial value
    });
}); 
```

此外，由于我们正在更改 twitter 的 ID，因此我们需要保存该 jQuery 对象。

# php - 将 PHP 代码移植到 Delphi 代码

> ID：16001031
> 
> 赞同：-3
> 
> 时间：2013-04-14T15:55:19.310
> 
> 标签：php, delphi

请帮助将此 PHP 更改为 Delphi。这里有一个类似的问题有帮助：[Porting PHP code to Delphi code](https://stackoverflow.com/questions/3999649/porting-php-code-to-delphi-code)

```
<?php
$fp = @fsockopen("udp://ru5-dayz.myfabis.ru", 2302, $errno, $errstr, 1);
fwrite($fp, "\xFE\xFD\x00\x21\x21\x21\x21\xFF\x00\x00\x00");
$buffer = fread($fp, 4096);
$buffer = substr($buffer, 5, -2);
if (!$buffer) { return FALSE; };
$item = explode("\x00", $buffer);
var_dump($item);
?> 
```

到目前为止，这是我的尝试：

```
UdpSocket1.BlockMode := bmNonBlocking;
UdpSocket1.RemoteHost := arr[combobox2.ItemIndex][1];
UdpSocket1.RemotePort := arr[combobox2.ItemIndex][2];
UdpSocket1.Open;
UdpSocket1.Sendln('þý!!!!ÿ', ' ');
UdpSocket1.ReceiveBuf(tempS, 4096);
UdpSocket1.WaitForData(1000);
Memo1.Text := ''; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:11:40.137

选择`File -> New -> Console Application - Delphi`，然后复制并粘贴以下代码。

注意：在 Delphi 2010 下为我工作。

```
program Project1;

{$APPTYPE CONSOLE}

uses
   SysUtils // misc
  ,IdUDPClient // UDP Client
  ;

procedure DumpBytes(const Value: TBytes; const ACount: Integer);
const
  CLINE_BREAK_AT = 10;
var
  Index: Integer;
  LHex: string;
  LBreakCnt: Integer;
begin
  Writeln('Response dump');
  Writeln(StringOfChar('-', 50));

  LHex := EmptyStr;
  LBreakCnt := 0;
  for Index := Low(Value) to ACount -1 do begin
    LHex := LHex + '0x' + IntToHex(Value[Index], 2) + ' ';
    Inc(LBreakCnt);
    if LBreakCnt = CLINE_BREAK_AT then begin
      Writeln(LHex);
      LBreakCnt := 0;
      LHex := EmptyStr;
    end;
  end;
  Writeln(StringOfChar('-', 50));
end;

procedure DoTheDo;
var
  LClient: TIdUDPClient;
  LRequest: TBytes;
  LResponse: TBytes;
  LReadBytes: Integer;
begin
  LClient := TIdUDPClient.Create(NIL);
  try
    LClient.Host := 'ru5-dayz.myfabis.ru';
    LClient.Port := 2302;
    LClient.Connect;
    if LClient.Connected then begin
      Writeln('Connection established to: ', LClient.Host, ' on port: ', LClient.Port);
      LRequest := TBytes.Create($FE,$FD,$00,$21,$21,$21,$21,$FF,$00,$00,$00);
      LClient.SendBuffer(LClient.Host, LClient.Port, LRequest);
      SetLength(LResponse, 4096);
      LReadBytes := LClient.ReceiveBuffer(LResponse, 1000);
      Writeln('Received: ', LReadBytes, ' bytes');
      DumpBytes(LResponse, LReadBytes);
    end else
      Writeln('woops! can''t connect!!');
  finally
    LClient.Free;
  end; // tryf
end;

begin
  try
    WriteLn('Press [Enter] to begin...');
    ReadLn;
    ///
    ///  main procedure
    ///
    DoTheDo;
    ///
    ///  give the user time to see what happened
    ///
    Readln;
  except
    on E: Exception do begin
      Writeln('Ouch! ', E.ClassName, ': ', E.Message);
      ReadLn;
    end;
  end;
end. 
```

# apache - .htaccess 阻止对文件的访问

> ID：16001032
> 
> 赞同：0
> 
> 时间：2013-04-14T15:55:38.323
> 
> 标签：apache, .htaccess

使用`.htaccess`文件，如何阻止对文件夹及其所有文件的访问？我知道我可以做到`Options -Indexes`，但这仍然允许某人访问目录中的文件并下载它们。我也想禁用对文件的访问。基本上，我想在网站上创建一个存储点来存储用于创建图像的 PDF 文件或我不希望外界访问的任何其他内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:56:55.883

```
Order deny,allow
Deny from all 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:02:18.000

您可以使用[**Deny**](http://httpd.apache.org/docs/2.2/howto/access.html)来禁止访问您的文件夹，但是将这些文件放在不可公开访问的位置（例如在您的网站`DocumentRoot`文件夹之外）将是一个更好的解决方案。

# python - 使用 TransactionTestCase 进行测试使用真实数据库

> ID：16001037
> 
> 赞同：0
> 
> 时间：2013-04-14T15:56:10.463
> 
> 标签：python, django

当我使用*django.test.TransactionTestCase*进行测试时，我发现它使用的是真实数据库。

（*django.test.TestCase*工作正常！）

我已经在我自己的项目中使用简单的代码确认了这一点：

```
class TestInventoryTransactions(TransactionTestCase):
    def setUp(self):
        print(Item.objects.all())

    def test1(self):
        pass

    def test2(self):
        pass 
```

这个的输出是

```
[...Bunch of items...]
[] 
```

首先表明正在使用真实数据库而不是空的测试数据库。其次，它会在第一次测试后从数据库中删除*所有内容。*

我真的不认为这是预期的行为，也不明白为什么会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:01:50.400

使用*“manage.py test”*没有这个问题。它仅在手动运行测试文件时发生。

# r - 具有因子和自变量乘积的线性回归

> ID：16001039
> 
> 赞同：1
> 
> 时间：2013-04-14T15:56:21.283
> 
> 标签：r, lm

我试图估计一个需求模型：

```
d_t^k = a_t - b^k p_t^k + e_t^k 
```

指数`t`代表周数，`k`代表产品编号。每个产品的需求`d_t^k`取决于所有产品共有的一般季节性，是`a_t`该周产品价格的仿射函数`p_t^k`，加上一些正常的随机误差`e_t^k`。

但是，如果我使用以下`lm`函数调用，它会给我一个 的系数`b`，`price`而我想要的是每个产品`b^k`的一个系数`price^k`。

```
lm(demand ~ factor(week) + price, data = df) 
```

模型的正确表达方式是什么？

```
lm(demand ~ factor(week) + factor(product) * price, data = df) 
```

我猜上面的方法会起作用，但我找不到任何文件告诉我那里发生了什么。

作为一个具体的例子，我有以下代码在稍微不同的需求模型上运行 d_t^k = a_t + a^k - b^k p_t^k + e_t^k

```
# Generate fake prices and sales, and estimate the coefficients of
# the demand model.

number.of.items <- 20 # Must be a multiple of 4
number.of.weeks <- 5
coeff.item.min <- 300
coeff.item.max <- 500
coeff.price.min <- 1.4
coeff.price.max <- 2
normal.sd <- 40
set.seed(200)

# Generate random coefficients for the items
coeff.item <- runif(number.of.items, coeff.item.min, coeff.item.max)
coeff.price <- runif(number.of.items, coeff.price.min, coeff.price.max)
coeff.week <- 50 * 1:number.of.weeks

# Row is item, column is week
week.id.matrix <- outer(rep(1, number.of.items), 1:number.of.weeks)
item.id.matrix <- outer(1:number.of.items, rep(1, number.of.weeks))
price.matrix <- rbind(
  outer(rep(1, number.of.items / 4), c(100, 100, 90, 90, 80)),
  outer(rep(1, number.of.items / 4), c(100, 90, 90, 80, 60)),
  outer(rep(1, number.of.items / 4), c(100, 85, 85, 60, 60)),
  outer(rep(1, number.of.items / 4), c(100, 75, 60, 45, 45))
)
coeff.week.matrix <- outer(rep(1, number.of.items), coeff.week)
coeff.price.matrix <- outer(coeff.price, rep(1, number.of.weeks))
coeff.item.matrix <- outer(coeff.item, rep(1, number.of.weeks))
sales.matrix <- coeff.week.matrix +
  coeff.item.matrix -
  coeff.price.matrix * price.matrix +
  matrix(rnorm(number.of.weeks * number.of.items, 0, normal.sd),
         number.of.items, number.of.weeks)

df <- data.frame(item = factor(as.vector(item.id.matrix)),
                 week = factor(as.vector(week.id.matrix)),
                 price = as.vector(price.matrix),
                 sales = as.vector(sales.matrix))

model <- lm(sales ~ week + item + price, data = df)
model <- lm(sales ~ week + item + factor(item) * price, data = df)

print(summary(model)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T21:25:46.783

做了一些实验后，似乎

```
lm(demand ~ factor(week) + factor(product) * price, data = df) 
```

确实有效。

我不知道为什么我没想到它会更早地工作。

# ruby-on-rails - 编辑和新方法的形式相同

> ID：16001040
> 
> 赞同：0
> 
> 时间：2013-04-14T15:56:22.393
> 
> 标签：ruby-on-rails

我想对`Edit`和`New`方法使用相同的 html 表单。

控制器方法：

```
def new 
    render "edit"
end

def edit
  if params[:id].present?
    @goat = Goat.find(params[:id])
  else
    @goat = Goat.new
  end
end 
```

`Edit`形式：

```
<% form_for @goat do |f| %>    
<%= f.text_field :title %> 
<%= f.submit "Update" %>
<% end %> 
```

`Edit`当@goat 记录存在时，它适用于方法，但对于`New`方法，当控制器给出`@goat = Goat.new`错误时：

`undefined method model_name for NilClass:Class`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:03:10.850

如果您只想使用相同的 html，只需使用 render :template

```
def new
  @goat = Goat.new
  render template: 'edit'
end

def edit 
  @goat = Goat.find(params[:id])
end 
```

或更好的方法：在模板edit.html && new.html中使用渲染部分

PS 使用动作“编辑”而不是“新”不是一个好主意，所以如果你查看你的 routes.txt 文件，你会看到动作的路径包括类实例的 :id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:16:53.217

问题是你实际上并没有`@goat`为你的 html 设置新的。

在这段代码中：

```
def new 
    render "edit"
end 
```

这不会调用`edit`控制器上的方法；相反，它直接进入视图层来渲染`edit.html.erb`文件。所以设置没有价值`@goat`，因此你得到的错误。

更好的是像@user2191327 提供的代码。您还应该查看脚手架将为您的控制器生成什么；这是一个很好的指南，了解惯用的 Rails 是什么样子。

# jquery - jQuery Cycle Plugin：如何使按钮链接工作？

> ID：16001041
> 
> 赞同：0
> 
> 时间：2013-04-14T15:56:22.597
> 
> 标签：jquery, jquery-cycle

我在其中一个按钮上使用了外部链接，当单击按钮文本时它没有将我带到该链接。有谁知道如何解决这一问题？

jsFiddle：http: [//jsfiddle.net/jetlag/Bjp5j/](http://jsfiddle.net/jetlag/Bjp5j/)

HTML 标记：

```
<div class="top button-area">
<div class="button button1">
    <div class="button-text">Button 1</div>
</div>
<div class="button button2">
    <div class="button-text"><a href="http://jquery.malsup.com/cycle/" target="_blank">Button 2</a></div>
</div>
</div>
<div class="image-area">
<div class="image-section">
    <div class="image">
        <img src="http://cloud.github.com/downloads/malsup/cycle/beach1.jpg" />
    </div>
</div>
<div class="image-section">
    <div class="image">
        <img src="http://cloud.github.com/downloads/malsup/cycle/beach2.jpg" />
    </div>
</div>
</div> 
```

jQuery：

```
var $this = $('.image-area');
  $this.cycle({
  fx: 'fade',
  speed: 'fast',
  timeout: 3000,
  pager: $this.parent().find('.button-area'),
  pauseOnPagerHover: true,
  pagerEvent: 'mouseover',
  pagerAnchorBuilder: function (idx, slide) {
    return $this.parent().find('.button-area .button:eq(' + idx + ')');
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:03:31.807

当您将`.button-text a`元素用作寻呼机时，它会删除元素的默认行为（通过`preventDefault()`）。如果元素具有`href`属性，您仍然可以使用以下方法使其用作链接：

```
$('.button-text a')
    .filter('[href]').click(function(){
        window.location.href = $(this).attr('href');
    }); 
```

这是一个小提琴！[http://jsfiddle.net/Bjp5j/1/](http://jsfiddle.net/Bjp5j/1/)

当您将鼠标悬停在按钮上并链接到指定的 URL 时，这将允许您保留切换图像的功能。

*我必须注意，这种行为有点奇怪！用户可能会尝试单击幻灯片导航以更改图像并被重定向到另一个页面。这将是一个意想不到的行为，可能会让用户感到沮丧。*

# windows - RabbitMQ 启动失败

> ID：16001047
> 
> 赞同：24
> 
> 时间：2013-04-14T15:56:53.833
> 
> 标签：windows, rabbitmq

RabbitMQ windows 服务不会启动：

```
C:\Program Files (x86)\RabbitMQ Server\rabbitmq_server-3.0.4\sbin>rabbitmq-service.bat start
C:\Program Files (x86)\erl5.10.1\erts-5.10.1\bin\erlsrv: Failed to start service RabbitMQ.
Error: The process terminated unexpectedly. 
```

我可以毫无问题地运行 rabbitmq-server.bat。

尝试启动服务时，不会在 %appdata%\RabbitMQ\log\ 目录中生成任何日志条目。

关于我如何使它工作的任何建议？请...

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2017-04-23T10:54:17.727

我遇到了同样的问题，并且能够按照下面提到的步骤解决问题。

1.  以管理员身份运行命令提示符
2.  导航到 sbin 目录并卸载该服务。rabbitmq-服务删除
3.  重新安装服务rabbitmq-service install
4.  启用插件。rabbitmq-plugins 启用 rabbitmq_management
5.  启动服务rabbitmq-service start
6.  转到“ [http://localhost:15672/](http://localhost:15672/) ”

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-14T17:30:13.877

问题解决了！

我的 IT 部门已将 %appdata% 映射到网络共享，但 RabbitMQ 脚本似乎无法使用它。

我这样解决了这个问题：将环境变量“RABBITMQ_BASE”设置为“c:\rabbitmq”，卸载服务（rabbitmq-service.bat remove）并再次安装服务（rabbitmq-service.bat install）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-13T21:30:09.247

在我的情况下，帮助以管理员身份运行控制台

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-05T20:10:14.810

安装后我重新启动了计算机，一切运行顺利得多

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-03-31T11:53:26.933

**- 检查 Erlang 与 RabbitMQ 的兼容性**

** 安装

*   安装二郎
*   安装 Rabbit_MQ
*   设置系统变量

**设置环境变量-**

*   RABBITMQ_BASE c:\RabbitMQ 服务器
*   ERLANG_HOME C:\Program Files\erl10.7

**配置 MQ 服务器**

*   停止 RabbitMq：rabbitmq-service.bat 停止
*   启用管理：rabbitmq-plugins.bat enable rabbitmq_management
*   重新安装服务器：rabbitmq-service.bat install
*   启动服务器：rabbitmq-service.bat start
*   启动应用程序：rabbitmqctl.bat start_app
*   打开浏览器： [http://localhost:15672](http://localhost:15672) 用户访客/访客

**添加新用户**

*   列出用户：rabbitmqctl.bat list_users

*   添加新用户：rabbitmqctl.bat add_user user1 pass1

*   授予管理员权限：rabbitmqctl.bat set_user_tags user1

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-02-14T21:47:51.983

删除“AppData\Roaming\RabbitMQ”为我解决了这个问题

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-03-31T03:42:06.907

从注册表中删除`HKEY_LOCAL_MACHINE\SOFTWARE\Ericsson\Erlang\ErlSrv\1.1\RabbitMQ`文件夹为我解决了这个问题。删除注册表后，我必须重新安装（卸载和安装）RabbitMQ。

而且，我`C:\Users\<USERNAME>\AppData\Roaming\RabbitMQ`之前已经删除了。

我从谷歌小组的[帖子中找到了解决方案。](https://groups.google.com/forum/#!topic/rabbitmq-users/68R7qRtboY4)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-28T07:41:48.367

我的情况是由错误的 Erlang 版本引起的。我通过以下步骤解决了它：

1.  卸载旧版本的 Erlang
2.  [按照https://www.rabbitmq.com/which-erlang.html](https://www.rabbitmq.com/which-erlang.html)安装新版本的 Erlang
3.  重新安装 RabbitMQ
4.  通过打开 Windows 的 cmd 并切换到 sbin 目录来安装 RabbitMQ 插件，例如。`Your-Path\rabbitmq_server-3.7.13\sbin`并执行命令`rabbitmq-plugins.bat enable rabbitmq_management`
5.  启动 RabbitMQ 并访问[http://localhost:15672/](http://localhost:15672/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-04-12T15:12:15.380

我如何解决同样的问题...将 Erlang 从 x86 重新安装到 x64。还检查了安装 Microsoft 分布式 dll 的选项。我不知道两者中的哪一个帮助了我，但它至少帮助了我。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-04-06T12:15:26.550

安装 rabbitmq-plugins 后运行以下命令 enable rabbitmq_management on rabbit mq path`RabbitMQ Server\rabbitmq_server-3.6.9\sbin>rabbitmq-plugins enable rabbitmq_management`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-12-13T05:27:07.257

我在 Windows 10 中遇到了同样的 1067 错误问题。结果发现位置 C:\Users\IPS\AppData\Roaming\RabbitMQ\advanced.config 中的 rabbitmq 配置文件有一些 synatx 错误。它已从默认配置更改。此外，saem 位置的 rabbitmq.conf 文件也有语法错误。我删除了 rabbitmq.conf 文件并从 advanced.config 文件中删除了更改。之后，ranbbitmq servcie 启动时没有任何问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-05-28T08:07:58.957

我也遇到过类似的问题，但发现问题是由于操作系统驱动器中名为“程序”的文件夹引起的。

[参考。](https://answers.microsoft.com/en-us/windows/forum/windows_8-files/there-is-a-file-or-folder-called-cprogram-which/72e7f311-c6f2-45ee-a5a3-3457ea179f6d)

# java - 如何从子活动加载更快的父活动？

> ID：16001051
> 
> 赞同：0
> 
> 时间：2013-04-14T15:57:14.550
> 
> 标签：java, android, performance, android-activity, android-logcat

actionBar.setHome 函数调用Application Home Activity。当它调用时，就像重新打开应用程序一样。我的意思是我必须等待加载家庭活动。我认为可能有一种方法可以不重新加载、重新加载 Home Activity，而是将 Home Activity 隐藏或为 Home Activity 存储内存。Home Activity 嵌入了字体、两个选项卡和按钮。当一个按钮来自 Home Activity 时，该 Activity 转到另一个 Activity，其中 actionBar.setHome 函数重定向 Home Activity，就像重新加载它一样。
**儿童活动代码：**

```
public void onCreate(Bundle savedInstanceState) {
.......................
.......................
actionBar.setHomeAction(new IntentAction(this, createIntent(this),
            R.drawable.ic_title_home_default));
  }
  //calling Parent Activity
   private static Intent createIntent(Context context) {
    Intent i = new Intent(context, CustomTabActivity.class);
    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    return i;
  } 
```

**从另一个活动调用 Home Activity 后的 Logcat：**

```
04-14 22:20:49.788: I/ActivityManager(245): Starting: Intent { flg=0x4000000 cmp=com.joshclemm.android.tabswithactivity/.CustomTabActivity } from pid 30761
04-14 22:20:49.838: D/szipinf(30761): Initializing inflate state
04-14 22:20:49.898: D/szipinf(30761): Initializing inflate state
04-14 22:20:49.908: D/szipinf(30761): Initializing inflate state
04-14 22:20:49.918: D/szipinf(30761): Initializing inflate state
04-14 22:20:49.928: D/szipinf(30761): Initializing inflate state
04-14 22:20:49.938: D/szipinf(30761): Initializing inflate state
04-14 22:20:49.958: D/szipinf(30761): Initializing inflate state
04-14 22:20:49.968: D/szipinf(30761): Initializing inflate state
04-14 22:20:49.978: D/szipinf(30761): Initializing inflate state
04-14 22:20:49.988: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.008: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.018: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.028: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.038: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.048: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.068: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.078: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.088: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.098: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.118: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.128: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.138: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.148: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.158: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.178: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.188: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.198: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.208: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.228: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.238: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.248: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.258: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.268: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.288: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.298: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.308: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.318: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.338: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.348: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.568: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.648: D/szipinf(30761): Initializing inflate state
04-14 22:20:50.678: D/skia(30761): purging 191K from font cache [28 entries]
04-14 22:20:50.718: D/skia(30761): purging 192K from font cache [27 entries]
04-14 22:20:50.978: I/ActivityManager(245): Displayed com.joshclemm.android.tabswithactivity/.CustomTabActivity: +1s172ms 
```

Home Activity Class-> OnCreate() 中需要哪些额外的代码，或者如果已经加载，则不尝试重新加载的任何方法？或者如果函数调用另一个活动，如何让 Home Activity 隐藏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:25:32.167

妈的，我自己解决我的问题。不管怎样，谢谢所有这个问题的观众。

```
public void onCreate(Bundle savedInstanceState) {
.......................
.......................
actionBar.setHomeAction(new IntentAction(this, createIntent(this),
            R.drawable.ic_title_home_default));
  }
  //calling Parent Activity
   private static Intent createIntent(Context context) {
    Intent i = new Intent(context, CustomTabActivity.class);
    i.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
    return i;
  } 
```

更改为：FLAG_ACTIVITY_REORDER_TO_FRONT

# c++ - 文件夹结构 - 良好做法

> ID：16001054
> 
> 赞同：0
> 
> 时间：2013-04-14T15:57:21.440
> 
> 标签：c++

我有 main.cpp 文件、一个基类（这个的头文件和 .cpp 文件）和两个派生类（还有它们的头文件和 .cpp 文件）。

是否有某种方法被认为是在 C++ 中创建文件夹结构的好习惯？

在 PHP 中，我将在名为“Base_Class”的文件夹的根目录中创建 main.cpp，将 base 的标头和 .cpp 放在那里，在此文件夹中，我将为派生类创建单独的子文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:03:22.350

这是我的一些输入

```
lib/ (*.cpp .h)
include/ (class definitions *.h) <- Third party lib
prototype/ (quick tests)
doc/ (documentation,ppt)
unittest/unittest result project files
utility/utility library
Release/release binaries of project
Automation/Any automation scripts 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:03:22.297

对于像您这样的非常简单的项目，将它们全部放在一个文件夹中是可以的。如果您获得更多不是源文件或标题的文件，最好将源文件（连同标题）放在单独的文件夹中，例如将文档放在单独的文件夹中等。当您开始获得许多源文件时，或者如果你发现它可以很好地分割成模块，那么源文件夹中每个模块一个文件夹..

至少这是关于*我*这样做的方式。你应该*怎么*做完全取决于你。真的没有单一的“最佳实践”，这完全取决于个人喜好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T16:25:53.043

对于小型项目（如您的），您可以将所有内容放在单个文件夹中。或者您可以将`.cpp`文件放在文件`src`夹和文件夹`.h`中`include`。同样，这仅适用于小型项目。

# haskell - 解析大量使用标识符的 XML 数据

> ID：16001056
> 
> 赞同：1
> 
> 时间：2013-04-14T15:57:24.963
> 
> 标签：haskell, hxt

我正在使用带有 Haskell 的 HXT 库，并且我有一个要解析的 XML 文件，但它有很多交叉引用。例如，有一个部分：

```
<object id="..">
  <net id="123">
    ...
  </net>
  <instance id="452" name="abc" />
  <instance id="453" name="cds" />
</object> 
```

我想将该`net`部分解析为一些非 XmlTree 术语（例如，`State [Int] Int`），然后我希望能够在解析该`instance`部分时使用该术语。

是否有可能做到这一点，最好不要跳入管理状态？

如果我允许直接`instance`引用`net`对象，问题是否可以解决，例如：

```
<instance id="452" ofObj="123" /> 
```

?

# eclipse - TFS 服务 - 它可以与 Eclipse 和 Git 一起使用吗

> ID：16001058
> 
> 赞同：2
> 
> 时间：2013-04-14T15:57:37.910
> 
> 标签：eclipse, git, version-control, tfs

最近我试用了新的 TFS-Service，非常喜欢用于项目管理的内置 Scrum 模板，以及创建使用 Git 管理的团队项目的新功能。不过，似乎只有在 Windows 上使用 Visual Studio 时才能进行 Git 集成。使用 Eclipse（带有 Team Explorer 插件）我无法使用基于 git 的团队项目。真的是这样吗？

这是我尝试过的：

1.  在 TFS 服务中，我有一个基于 git 的团队项目，其中包含一些提交。在 Eclipse 中，我连接到团队项目，但似乎我无法以任何方式提取甚至查看源代码。源代码管理资源管理器不显示任何代码（甚至任何路径）。

2.  在 TFS 中，我创建了一个新的基于 git 的团队项目。在 Eclipse 中，我创建了一个新项目，并`Team -> Share...`尝试将代码放入 TFS。但是在那里选择 TFS 似乎并没有产生令人讨厌的效果：它不明白这是一个基于 git 的团队项目，因此它不会尝试用 git 推送代码，而是将其上传到新路径（`$/some/path/here/`）。

就是这样，还是有解决方法？也许我做错了什么？

顺便说一句 - 我知道将 TFS 与 git-tf 一起使用，我可以接受这个选项，但这不是我要问的。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T07:53:32.803

我们正在努力改进下一个主要版本的 Team Explorer Everywhere (TEE)，但这是您今天想要做的。

Eclipse 已经在 eGit 插件中提供了一个全功能的 Git 版本控制提供程序。它安装在许多版本的 Eclipse 中，但如果你没有它，你可以从这里安装它：

*   [http://marketplace.eclipse.org/node/1336](http://marketplace.eclipse.org/node/1336)

今天要针对托管服务使用 eGit，您*必须*在 TFS 中启用备用凭据（单击右上角的您的姓名、我的个人资料、凭据，然后启用并配置您的凭据）。

启用此功能后，您可以将 eGit 指向您的服务帐户存储库，一切顺利。在导入或共享向导中选择 Git，然后按照 eGit 对话框进行操作。

当您进行提交时，如果您将 #123 添加到工作项注释中，它将在您将提交推送到服务器时将提交与该工作项编号相关联。

现在，我提到我们正在努力使这变得更好。我们的目标是在您导入和共享时向您展示您的 TFVC 和 Git 相关项目，如果您选择了 Git 存储库，那么我们将帮助您设置凭据、克隆它并获取版本控制部分Eclipse 连接到 eGit（假设您安装了 eGit）。我们还将确保其他团队资源管理器视图（例如工作项、构建等）都运行良好，并且指向 Git 提交等的链接执行正确的操作。希望这是有道理的 - 但如果有人想更多地谈论 Git 项目将如何在 Team Explorer Everywhere 的未来版本中工作，请随时给我发邮件 (martinwo@microsoft.com)

# amazon-s3 - 以编程方式为 MP4 添加元数据

> ID：16001063
> 
> 赞同：0
> 
> 时间：2013-04-14T15:58:38.390
> 
> 标签：amazon-s3, mp4, amazon-cloudfront

我有一个服务器，一个消费者可以从那里下载 MP4 文件。我想在用户单击“下载”时将用户名添加到文件的元数据中。亚马逊对 MP3 文件做了类似的事情。

现在，对此略有不同的是，如果文件位于 Amazon Cloudfront 上，我将如何做同样的事情。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:43:38.970

您必须通过您的网络服务器路由您的请求。

1.  登录用户点击
2.  Web 服务器将 MP4 文件从 S3 下载到其文件系统。
3.  Web 服务器使用 MP4 编辑器将正确的 MP4 元数据添加到文件中。
4.  Web 服务器将 MP4 文件作为下载提供给客户。

S3 是*哑*文件存储，因此您无法进行任何即时编辑或处理。任何此类工作都**必须**在具有 CPU 的机器上进行。

因此，您提出的问题无法使用 CloudFront 以任何有意义的方式完成，因为无论如何流量都需要通过您的服务器路由回以进行后处理。

# c# - 连接丢失时如何存储数据？

> ID：16001064
> 
> 赞同：0
> 
> 时间：2013-04-14T15:58:54.593
> 
> 标签：c#, python, buffer

我有一个客户端（目前在 C# 中，正在开发一个 python 版本）它获取计算机数据，如 CPU %、磁盘空间等，并将其发送到服务器。如果我的客户端失去与服务器的连接，我不知道如何管理。我必须继续收集信息，但在哪里存储它们？只是一个缓冲？使用日志文件是更好的解决方案吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:27:17.303

我会在硬盘上创建一个日志文件并输入最后记录的数据和时间。然后在需要时再次阅读。

# twitter-bootstrap - IE 中的 CSS 字体大小无法正常工作？

> ID：16001066
> 
> 赞同：0
> 
> 时间：2013-04-14T15:59:10.650
> 
> 标签：twitter-bootstrap, font-size

我正在使用 twitter bootstrap 并有一个输入字段，我想要更大的字体，所以我使用

```
 input#lookup{
    font-size: 72px;
    height: 90px;
    width: 400px; 
} 
```

以及我在输入字段上使用的引导类

```
<input type="text" name="lookup" value="" id="lookup" class="input-large search-query"> 
```

但是当我在其中输入一些文字时，它会被截断 ![为什么在 IE 中会发生这种情况？](https://i.stack.imgur.com/emJPu.jpg)

顺便说一句：像 IE 一样的 chrome 开发栏在哪里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:08:43.463

好的，我希望通过添加找到一个可行的解决方案

```
line-height: 1.1em; 
```

# php - CodeIgniter URL 路由不起作用

> ID：16001070
> 
> 赞同：4
> 
> 时间：2013-04-14T15:59:35.047
> 
> 标签：php, .htaccess, codeigniter, url-rewriting, routing

我正在使用 Ubuntu 12.10。而且我无法从我的 codeigniter 站点 URL 中删除“index.php”。

我的 .htaccess 文件看起来像这样，我的代码在 hmvcExample 文件夹中。

*

```
RewriteEngine On
RewriteBase /hmvcExample/

### Canonicalize codeigniter URLs

# If your default controller is something other than
# "welcome" you should probably change this
RewriteRule ^(welcome(/index)?|index(\.php)?)/?$ / [L,R=301]
RewriteRule ^(.*)/index/?$ $1 [L,R=301]

# Removes trailing slashes (prevents SEO duplicate content issues)
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ $1 [L,R=301]

# Enforce www
# If you have subdomains, you can add them to 
# the list using the "|" (OR) regex operator
RewriteCond %{HTTP_HOST} !^(www|subdomain) [NC]
RewriteRule ^(.*)$ http://www.domain.tld/$1 [L,R=301]

# Enforce NO www
#RewriteCond %{HTTP_HOST} ^www [NC]
#RewriteRule ^(.*)$ http://domain.tld/$1 [L,R=301]

###

# Removes access to the system folder by users.
# Additionally this will allow you to create a System.php controller,
# previously this would not have been possible.
# 'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php/$1 [L]

# Checks to see if the user is attempting to access a valid file,
# such as an image or css document, if this isn't true it sends the
# request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

```
# Without mod_rewrite, route 404's to the front controller
ErrorDocument 404 /index.php 
```

*

我也从 config.php 中删除了“index.php”。但是当我尝试在没有“index.php”的情况下加载网站时仍然出现以下错误

***未找到 在此服务器上未找到请求的 URL /hmvcExample/signup。Apache/2.2.22 (Ubuntu) 服务器在 localhost 端口 80***

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T06:20:58.153

这似乎是应该一直在寻找的问题之一 -[如何在 codeigniter 的路径中删除“index.php”](https://stackoverflow.com/questions/1445385/how-to-remove-index-php-in-codeigniters-path)

还有另一个`config`需要编辑：

```
$config['uri_protocol'] = 'AUTO'; 
```

将上面写的行更改为以下内容：

```
$config['uri_protocol'] = 'REQUEST_URI'; 
```

如果你已经完成了所有这些，可能还剩下一个问题——`enable mod_rewrite`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-17T13:35:13.817

确保您已`AllowOverride All`在 /etc/httpd/conf/httpd.conf (centos apache 2.2) 中设置

配置：

```
$config['index_page'] = ''; 
```

# android - 在python中将上传的图像转换为字符串

> ID：16001074
> 
> 赞同：0
> 
> 时间：2013-04-14T15:59:54.927
> 
> 标签：android, python, json, image, google-app-engine

所以我正在使用 Google App Engine 作为应用程序，我需要将图片从 GAE 传递到 android 客户端。为了做到这一点，我虽然将图片转换为字符串并将其作为 json 发送......（我发现这是一个不错的想法：[使用 Python Base64 压缩 GAE Blob 图像？](https://stackoverflow.com/questions/5535092/compress-gae-blob-images-using-python-base64)）。

问题是我很难在 Base64 中进行转换。我已经尝试过这种方法（[在 AppEngine 上对上传的二进制数据进行 Base64 编码](https://stackoverflow.com/questions/3225500/base64-encode-binary-uploaded-data-on-the-appengine)），但它对我不起作用，因为我收到错误：

```
 File "/base/data/home/apps/s~testehan/1.366670408737847123/main.py", line 462, in post
    img = Imagine( name=fileupload.filename, data=fileupload.file.read() )
  File "/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 970, in __init__
    prop.__set__(self, value)
  File "/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 614, in __set__
    value = self.validate(value)
  File "/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 2806, in validate
    value = super(UnindexedProperty, self).validate(value)
  File "/python27_runtime/python27_lib/versions/1/google/appengine/ext/db/__init__.py", line 641, in validate
    raise BadValueError('Property %s is required' % self.name)
BadValueError: Property data is required 
```

原因是当我在日志中显示 upload_file.file.read() 时，我得到了这个：

```
Content-Type: image/jpeg
Content-Length: 36187
X-AppEngine-Upload-Creation: 2013-04-14 08:35:46.123191
Content-MD5: MDYzNWE2Y2FkMzFlMGVhNzgwNmEwNzhiOGNkZTdhNTI=
Content-Disposition: form-data; name=img; filename="blabla.jpg" 
```

所以我的问题是..我如何阅读这张图片并将其存储为文本属性，以便我能够传递它？

谢谢

编辑：后处理程序

```
 class Imagine(db.Model):
    name = db.StringProperty(required=True)
    data = db.TextProperty(required=True)
    created = db.DateTimeProperty(auto_now_add=True)

class PostImage(UserHandler):  
    def post(self, restaurant, category):
        logging.info("ImagestoreHandler#post %s", self.request.path)
        name= self.request.get('name')
        description= self.request.get('description')
        sizes = int(self.request.get('sizes'))

        fileupload = self.request.POST.get("img",None)
        if fileupload is None : return self.error(400)

        content_type = fileupload.type or getContentType( fileupload.filename )
        if content_type is None: 
            self.error(400)
            self.response.headers['Content-Type'] = 'text/plain'
            self.response.out.write( "Unsupported image type: " + fileupload.filename )
            return
        logging.debug( "File upload: %s, mime type: %s", fileupload.filename, content_type )

        try:
            logging.info('citesc fisierul : ' + fileupload.file.read())
            img = Imagine( name=fileupload.filename, data=fileupload.file.read() )
            img.put()
            (img_name, img_url) = self._store_image( fileupload.filename, fileupload.file, content_type )
            self.response.headers['Location'] = img_url
            ex=None
        except Exception, err:
            logging.exception( "Error while storing image" )
            self.error(400)
            self.response.headers['Content-Type'] = 'text/plain'
            self.response.out.write("Error uploading image: " + str(err))
            return
    #self.redirect(urlBase % img.key() )  #dummy redirect is acceptable for non-AJAX clients,
    # location header should be acceptable for true REST clients, however AJAX requests 
    # might not be able to access the location header so we'll write a 200 response with 
    # the new URL in the response body:

        acceptType = self.request.accept.best_match( listRenderers.keys() )
        out = self.response.out
        if acceptType == 'application/json':
            self.response.headers['Content-Type'] = 'application/json'
            out.write( '{"name":"%s","href":"%s"}' % ( img_name, img_url ) )
        elif re.search( 'html|xml', acceptType ):
            self.response.headers['Content-Type'] = 'text/html'
            out.write( '<a href="%s">%s</a>' % ( img_url, img_name) )

    def _store_image(self, name, file, content_type):
        """POST handler delegates to this method for actual image storage; as
        a result, alternate implementation may easily override the storage
        mechanism without rewriting the same content-type handling. 

        This method returns a tuple of file name and image URL."""

        img_enc = base64.b64encode(file.read())
        img_enc_struct = "data:%s;base64,%s" % (content_type, img_enc)
        logging.info('file name is '+name)
        logging.info('file is '+file.read())
        img = Imagine( name=name, data=file.read() )
        img.put()
        return ( str(img.name), img.key() ) 
```

形式 ：

```
<form action="{{ upload_url }}" method="POST" enctype="multipart/form-data">
    <input name="name" placeholder="Product name" type="text" /> 
        <input type="file" name="img"/>
             <br />
    <input type="submit" value="Submit product!" />
</form> 
```

# jquery - 删除jquery中的属性

> ID：16001076
> 
> 赞同：-3
> 
> 时间：2013-04-14T16:00:16.800
> 
> 标签：jquery

如何删除一个元素的多个属性？Jquery 文档只提到了一次删除一个属性。在[此处参考](http://api.jquery.com/removeAttr/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:03:42.650

您提供的链接清楚地说明了有关`removeAttr`.

> 要删除的属性；从 1.7 版开始，它可以是一个以空格分隔的属性列表。

# ios - 一个盒子app2app ios app的配置

> ID：16001078
> 
> 赞同：0
> 
> 时间：2013-04-14T16:00:41.073
> 
> 标签：ios, box-api

我正在尝试将 box app2app 框架集成到 ipad 应用程序中，但在 box.com 网站中配置应用程序时遇到了困难。理想情况下，他们的示例应用程序的文档将涵盖这一点，我相信我可以从中解决；但似乎没有。

鉴于我首先尝试让示例应用程序作为我自己的应用程序运行 - 我想知道我需要填写盒子网站的“盒子 - 编辑盒子应用程序”部分的内容？（我认为事件通知和/或服务操作，但我不知道其中包含什么的语法）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T13:21:37.837

在收到一些带有盒子技术支持的电子邮件之后......您创建了一个 plist 文件，其中包含有关您的应用程序的信息，然后通过电子邮件发送给他们。他们的示例应用程序文档中概述了要放入 plist 的信息。

一旦他们处理了您的 plist，那么您的应用程序将在您注册的文件扩展名的盒子应用程序中列出。

# python-2.7 - 如何使用 OAuth2.0 访问令牌检索 gmail 联系人列表

> ID：16001079
> 
> 赞同：2
> 
> 时间：2013-04-14T16:00:49.507
> 
> 标签：python-2.7, oauth-2.0, gdata-api, google-contacts-api

我使用以下代码在 Python 中为我的应用程序获取访问令牌。

```
 CLIENT_SECRETS = 'client_secrets.json'
 MISSING_CLIENT_SECRETS_MESSAGE = "Missing Client Secrets"

 FLOW = flow_from_clientsecrets(os.path.join(os.path.dirname(__file__), CLIENT_SECRETS),
        scope=['https://www.googleapis.com/auth/drive','https://www.google.com/m8/feeds'],
        message=MISSING_CLIENT_SECRETS_MESSAGE)

 storage = Storage('drive.dat')
 credentials = storage.get()
 credentials = run(FLOW, storage)
 http = httplib2.Http()
 http = credentials.authorize(http)
 service = build("drive", "v2", http=http) 
```

但是在获得访问令牌后，我应该如何使用 Python 的 gdata 客户端库检索 gmail 联系人列表？客户端库中的示例不使用 OAuth 身份验证，而是使用另一种方法。

# javascript - 创建单页 Web 应用程序作为网站的一部分

> ID：16001080
> 
> 赞同：0
> 
> 时间：2013-04-14T16:01:03.577
> 
> 标签：javascript, node.js, websocket, server-side

我正在开发一个允许用户监控能源消耗的项目。主仪表板页面是一个非常简洁的 Web 应用程序，并且大量使用了 javascript 和 ajax。服务器当前运行apache，使用php；但是，我计划安装 node.js 并更新服务器端脚本以支持 websockets（我也喜欢在服务器端和客户端使用 javascript 的想法）。

我已经关注了几个在线介绍，但我很难找到具体问题的答案，其中一个概述如下。

所有 node 指南似乎只支持单页 web 应用程序。这是一个问题，因为有许多不同的页面需要提供文件。我如何支持文件服务但启用其中一个页面使用 websockets。此功能是否只需要一个页面，是否需要编码到站点上的主服务器脚本中，或者是否有办法将其分离，以便服务器转到服务器仪表板 html 文件，然后发现该文件需要特定的 websocket 依赖项？

*非常感谢您花时间阅读我的问题。如果您能回答其中任何一个问题，甚至提供任何一般性建议，将不胜感激。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:45:30.277

1：指南做单页网络应用程序的唯一原因是因为那是节点的强项。Node.js 提供静态文件和渲染模板就好了。只需在需要它的页面中包含 websockets 的 JS。

2：没有php那么简单，看一下express.js

3：是的，实际上您甚至不需要不同的端口，您可以在一行中在节点中编写一个代理。

4：CentOS 很好，节点与平台无关。所有的 linux 都有顶级支持，其次是 osx、solaris 和 windows。

# c# - 收到有关集合更改的通知

> ID：16001084
> 
> 赞同：0
> 
> 时间：2013-04-14T16:01:33.267
> 
> 标签：c#, collections, delegates, notifications

我的班级有一个公共列表字段。我想检测何时有人更改此集合。但是，围绕这个集合编写我自己的 Add/Remove 包装器似乎很浪费。有没有办法通过代表或类似的方式获取有关集合更改的通知？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:02:19.733

改用您可能会[在此处](http://msdn.microsoft.com/en-us/library/ms668604.aspx)`ObservableCollection<T>`找到参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:04:09.393

您描述的集合已经存在，它被称为[`ObservableCollection`](http://msdn.microsoft.com/en-us/library/ms668604.aspx).

它有[`CollectionChanged`](http://msdn.microsoft.com/en-us/library/ms653375.aspx)事件，所以只需在那里订阅你的事件处理程序，每次从集合中添加或删除项目时我都会被调用..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T16:04:44.017

改为使用`BindingList<T>`。它提供了一个`ListChanged`事件。它也被`DataSource`许多控件所接受，例如列表框或网格。

正如这个[答案](https://stackoverflow.com/a/4284805/245495)中提到的，`BindingList`提供的远远超过`ObservableCollection`

如果您想更改列表框中的列表并将对该列表的更改反映到 UI，您可以将 a 设置`BindingList<>`为列表框的数据源，然后简单地操作列表。列表框将处理该`ListChanged`事件并显示更改，而无需您自己手动执行。

如果你要在 Winforms 中使用它，你应该使用 BindingList，如果你要在 WPF 应用程序上使用它，那么使用 ObservableCollection。

# magento - 法师注册表项“_singleton/VladimirPopov_WebForms_Model_Observer”已经存在

> ID：16001086
> 
> 赞同：1
> 
> 时间：2013-04-14T16:01:47.703
> 
> 标签：magento, registry, key, mage

我已经从扩展程序中卸载了 Web 并再次安装它，因为我在尝试打开管理员时收到此错误。前端工作正常。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-19T21:04:02.583

清除编译器缓存并在 Magento 的后端打开它是非常重要的。

清除缓存：

```
SSH:
find ./var/cache -type f -delete
FTP: 
mrm -r ./var/cache ; mkdir ./var/cache 
```

禁用/清除 Magento 编译

```
SSH:
php -f shell/compiler.php -- disable
php -f shell/compiler.php -- clear
FTP:
mv ./includes ./includes.unused 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:08:45.940

好的，所以调试。转到 app/Mage.php。查找注册功能添加

```
if ($key == '_singleton/VladimirPopov_WebForms_Model_Observer'){
    Mage::log(debug_backtrace(false), null, 'backtrace.log');
} 
```

在此之前正确执行此操作`if (isset(self::$_registry[$key])) {`

然后转到 app/var/log/some_filename.log。应该有两个条目。一个是对的，一个是错的（重复阅读）。这应该可以帮助您找到有问题的文件/功能。

**注意：请务必先备份应用程序/法师，然后再恢复。这是一个关键文件。**

# firebase - Firebase 查询的奇怪行为

> ID：16001090
> 
> 赞同：0
> 
> 时间：2013-04-14T16:02:27.060
> 
> 标签：firebase

我正在开发一个存储工作项列表的应用程序，这些工作项按预定日期排序。我有 2 个查询，1 个用于监控优先级最高的项目（最新计划），另一个用于监控优先级最低的项目（最早的计划）：

```
 var FB = new Firebase('https://pckben-testquery.firebaseio-demo.com/');
  FB.startAt().limit(1).on('child_added', function(snapshot) {
    var topItems = JSON.stringify(snapshot.name());
    $("#topItems").text(topItems);
  });

  FB.endAt().limit(1).on('child_added', function(snapshot) {
    var lastItems = JSON.stringify(snapshot.name());
    $("#lastItems").text(lastItems);
  }); 
```

我的数据是这样的：

```
a: 1365931229230  <-- scheduled date, also set as its priority
b: 1365931230662
c: 1365931241984
d: 1365931258729
e: 1365931266804 
```

结果与预期不符：它为`#topItems`和输出最上面的项目“a” `#lastItems`。

但是，如果我包含另一个查询来查看整个列表，那么一切都会按预期工作：

```
 $scope.items = []; // I'm using AngularJS
  FB.on('value', function(snapshots) {
      $scope.items = [];
      snapshots.forEach(function(ss) {
          $scope.items.push({
            name: ss.name(), 
            schedule: ss.val()
          });
      });
      if (!$scope.$$phase) $scope.$apply();
  }); 
```

要了解这种行为，请先访问[http://jsbin.com/azisuf/1/edit](http://jsbin.com/azisuf/1/edit)，然后访问[http://jsbin.com/ejujef/1/edit](http://jsbin.com/ejujef/1/edit)。单击更新按钮将项目移动到最后一行。您会看到，在第一个版本中，“最后一行”部分没有按预期显示最后一行，而在第二个版本中显示。

这些代码在 Chrome 和 Safari 上进行了测试。

# php - 使用 PHP 在 Windows 7 上的所有数据库的 mysqldump

> ID：16001093
> 
> 赞同：0
> 
> 时间：2013-04-14T16:02:35.227
> 
> 标签：php, windows-7, mysqldump

我正在尝试执行 mysqldump 以使用一个小的 PHP 脚本导出所有数据库，但是每次执行代码时都会创建一个空文件。

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');

$filename='database_backup_'.date('G_a_m_d_y').'.sql';

$result=exec('mysqldump -p123456 -uroot --all-databases --single-transaction > C:\\tmp' . $filename,$output);

if($output==''){
    echo("Success");
}
else {
    var_dump($output);
} 

?> 
```

我试过了`print_r`，`$output`但很明显，即使我的转储失败，这也是空的。我已经使用 mysqldump.exe 手动执行了相同的 mysqldump，效果很好。

通过 passthru 的建议起到了作用：

```
passthru('C:\wamp\bin\mysql\mysql5.5.24\bin\mysqldump.exe -uroot -p123456 --all-databases --single-transaction > C:\\tmp' . $filename); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:04:15.293

要查看问题所在，请将原始语句更改为以下内容：

`$result=exec('mysqldump -p123456 -uroot --all-databases --single-transaction > C:\\tmp' . $filename,$output, $returnVar);`

这里的区别是我`$returnVar`作为第三个参数添加到`exec()`函数中。该参数将返回执行命令的状态。

现在试着`print_r($returnVar)`看看它说了什么。

# renderer - 3D 软件渲染器的数学练习

> ID：16001096
> 
> 赞同：0
> 
> 时间：2013-04-14T16:02:43.640
> 
> 标签：renderer

我希望实现一个 3D**软件**渲染器，所以我开始阅读“3D 游戏编程大师的技巧高级 3D 图形和光栅化”。

前几章非常简单，但我的问题是，当他从数学开始（第 4 章）时，我迷失了方向——他扔了很多材料（我的数学真的很糟糕），而且没有我能做的练习从事于。

在练习中，我的意思是编写一些代码，这样我就可以看到每个单独的主题如何适合整个图像 - 例如，一些关于极坐标的练习，其他关于向量的练习等等......

从简单的数学书上看，我什么都不懂——使用功能编写代码会让我更清楚、更容易理解。

是否有提供此类练习的网站或书籍，甚至对有关该主题的其他书籍提出建议？

非常感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-14T21:32:30.793

我想你应该从[http://slimdx.org/tutorials.php开始](http://slimdx.org/tutorials.php)

这是基本的，之后只需要在其上构建即可。

# c# - 将用户输入的值转换为美元货币

> ID：16001098
> 
> 赞同：1
> 
> 时间：2013-04-14T16:02:51.833
> 
> 标签：c#, currency

我有一个场景，用户将一个值作为字符串输入，我需要将其转换为美元货币并将其显示在表单上。我已经尝试过以下方法。

```
protected void btn_Click(object sender, EventArgs e)
{
    string money = txtbox.Text;
    string currency = Convert.ToDecimal(txtbox.Text, new CultureInfo("en-US")).ToString("C");
    money = currency;
    Response.Write(money);
} 
```

问题是当用户输入 56789 时，结果显示为 $56,789.00，我不想在“。”之后出现不必要的零。当用户输入 56789.67 时，结果显示为 $56,789.67，这是预期的。请帮助我解决同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:09:49.057

尝试这个：

```
protected void btn_Click(object sender, EventArgs e)
{
    Decimal currency = Convert.ToDecimal(txtbox.Text, new CultureInfo("en-US"));
    string money = currency.ToString("C");

    if (currency % 1 == 0) {
        money = money.Substring(0, money.Length - 3);
    }

    Response.write(money);
} 
```

这是一个[演示](http://ideone.com/86bZmu)。

如果您有任何问题，请告诉我。祝你好运！:)

# php - PHP Simplexml 中的基础数学

> ID：16001102
> 
> 赞同：0
> 
> 时间：2013-04-14T16:03:13.060
> 
> 标签：php, simplexml

下面的代码在 PHP 中，并从 XML 响应文件返回价格。

```
$price = $result->Items->Item->OfferSummary->LowestNewPrice->FormattedPrice; //lowest new price 
$listPrice = $result->Items->Item->Offers->Offer->OfferListing->Price->FormattedPrice; //list price 
```

如果我回显 $price 或 $listPrice 它可以工作

我希望得到两个价格之间的差异，但如果我这样做了，我会得到 NULL

```
$savings = $listPrice - $price; or $savings = ($listPrice - $price); 
```

欢迎任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:08:09.083

您很可能试图从字符串中减去一个字符串。您需要将值转换为数字类型。如果您使用价格，您可能需要浮点数：

```
$price = floatval($result->Items->Item->OfferSummary->LowestNewPrice->FormattedPrice); //lowest new price 
$listPrice = floatval($result->Items->Item->Offers->Offer->OfferListing->Price->FormattedPrice); //list price

$savings = $listPrice - $price; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:06:13.823

我假设 $price 和 $listprice 是数字（整数或双精度数），因此在单独回显它们时它们可能看起来是数字，但它们可能是带有空格的字符串，阻止它们被解析。尝试使用 trim() 删除空格（例如，$price = trim($price)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T16:07:50.323

虽然它们可能看起来是数字，但将它们转换为浮点数可能是值得的，只是为了确保。

```
$savings = floatval($listPrice) - floatval($price); 
```

# javascript - carousel-indicators 在 IE 中不起作用

> ID：16001112
> 
> 赞同：0
> 
> 时间：2013-04-14T16:03:53.557
> 
> 标签：javascript, twitter-bootstrap, carousel

我无法让轮播指示器在任何版本的 IE 中工作。我不能点击它们。这是我的html代码：

```
<div id="presentation" class="tab-pane active">      
    <div id="presentationCarousel" class="carousel slide">

        <ol class="carousel-indicators">
          <li data-target="#presentationCarousel" data-slide-to="0" class="active"></li>
          <li data-target="#presentationCarousel" data-slide-to="1"></li>
          <li data-target="#presentationCarousel" data-slide-to="3"></li>
        </ol>

        <div class="carousel-inner">
            <div class="item active"><img src="...1.jpg" alt="" /></div>
            <div class="item "><img src="...2.jpg" alt="" /></div>
            <div class="item "><img src="...3.jpg" alt="" /></div>
        </div> 
    </div>
</div> 
```

和 JavaScript：

```
$('.carousel').carousel({
   interval: 4000  
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T09:18:08.213

您是从`file:///`URL 运行它吗？在这种情况下，您需要让 IE 足够信任该页面以运行脚本。底部可能有一条警告：“IE 限制此网页运行脚本或 ActiveX 控件”在加载时显示几秒钟。单击允许，一切都应该正常工作或从 Web 服务器加载它，这样你就可以得到`http://`.

# iphone - 应用内购买：使用多个 Apple ID 在同一设备上购买商品

> ID：16001121
> 
> 赞同：2
> 
> 时间：2013-04-14T16:04:52.457
> 
> 标签：iphone, ios, xcode, cocoa-touch, in-app-purchase

我正在我的应用程序中实施应用程序内购买并围绕现有应用程序进行测试以获取一些想法。但我发现了一个让我很困惑的场景。

我已经安装了一个 iOS 应用程序并购买了增强级别。后来我卸载了这个应用程序，从现有的 iTunes 商店帐户注销并使用另一个苹果 ID 再次登录，然后再次重新安装该应用程序（相同的应用程序）。我发现我不需要再次购买增强级别，并且我可以自由使用这些增强级别，尽管我已经使用另一个不同的 Apple id 重新安装了它。我对此感到很困惑......如果我们在同一设备上使用多个苹果 ID，那么购买的物品是否会绑定在设备上？

我了解我可以使用相同的 Apple id 在不同设备上恢复我购买的商品。但是如何在多个设备上使用多个苹果 ID 呢？如果我在一台设备上关联了 2 个 Apple id，我使用其中一个购买的物品，但后来我使用这 2 个 Apple id 登录到另一台设备，我是否还需要再次付费才能下载我在以前的设备上购买的物品？

如果我的场景和问题不清楚，请告诉我......我希望有人能就不同设备和多个苹果 ID 共享购买的物品提供一些想法。

欢迎任何建议和意见。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T17:29:20.513

当特定应用启动时，它必须决定哪些应用内购买适用于您。这可以通过多种方式完成，其中一些是：

1) 检查应用程序文件系统，查看是否存在与应用内购买相对应的某些文件，或者某些应用文件中的某些字段是否具有某些应用依赖值，表明应用内购买适用于您。

在这种情况下，您将获得与上次在设备上玩游戏时完全相同的应用内购买。

2) 检查设备上的密钥环，看看是否有迹象表明已进行了应用内购买。我不完全确定，但在这种情况下，我认为密钥环将取决于最后一个“登录”到设备的人。我不确定的部分是该登录是否会登录到 iCloud、iTunesStore、最近登录到其中的任何一个，或者其他什么。（我很感激有人澄清。）

3) 检查 iCloud 是否有一个或多个特定的应用程序相关密钥，然后这些密钥会以某种应用程序相关方式进行解释。当然，这取决于是否启用了 iCloud，所以如果这是应用程序使用的第一种方法，它可能也会有一个备用方法。

4) 如果应用程序有自己的登录名和/或将您连接到 Facebook 或类似的登录名，它可以使用该登录名检查其自己的应用程序服务器，以查看您应该购买哪些应用程序。

所以我想说这完全取决于特定应用程序的编程方式。Apple 指南可能会对这些选择施加一些限制。（我也希望对此作出澄清。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-28T17:39:11.700

Apple 只要求您根据用户的 Apple id 在他拥有的每台设备上购买用户。

其他情况由您决定。作为什么应用程序。你测试了。

# java - org.apache.http.client.HttpClient - 每个请求一个？

> ID：16001124
> 
> 赞同：8
> 
> 时间：2013-04-14T16:05:47.370
> 
> 标签：java, http, connection, apache-httpclient-4.x

我使用[org.apache.http.client.HttpClient](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/HttpClient.html)。我有一个关于使用这个类的问题。

我应该为`HttpClient`每个请求创建一个新的对象（例如，因为它是一个轻量对象）还是最好为每个 http 请求使用一个唯一的实例（例如，因为创建/删除很昂贵）？`HttpClient`如果必须只使用一个实例，`HttpClient`线程安全（例如，它可以同时处理许多 http 请求）还是在这种情况下最好创建一个`HttpClient`s 池？

实际上，我为每个请求创建了一个新的 HttpClient。我怀疑我必须创建一个唯一的实例，以便在使用我的应用程序结束时通过 using 关闭`getConnectionManager().shutdown()`，但我不知道我是否可以维护基于线程的并行性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T16:40:24.737

标`DefaultHttpClient`有`@ThreadSafe`注释，所以是的，您可以以线程安全的方式使用它。HTTPClient 的性能文档还积极[建议](http://hc.apache.org/httpclient-3.x/performance.html)尽可能使用单个实例。

# c# - 当 xa 和 xb 的绝对值大于 150 时，我正在尝试重置计时器。

> ID：16001126
> 
> 赞同：-2
> 
> 时间：2013-04-14T16:05:48.127
> 
> 标签：c#, timer

此代码用于评估计时器提供的信息。我希望它在计时有效时激活，并且我希望计时器在某些条件发生时重置。我希望代码不断检查这些参数。x、a 和 b 不断变化。

```
Stopwatch sw = new Stopwatch(); //sets sw as the stopwatch variable
sw.Start(); //starts stopwatch
for (int i = 0; ; i++) //counter
{
     if (i % 1000000 == 0) //sets counter limit
     {
          sw.Stop();  //stops stopwatch
          if (sw.ElapsedMilliseconds >= 3000)  //when the elapsed time is > 3 secs
          {
              comPort.WriteLine("1"); //sends a 1 to an arduino 
              break; //breaks for loop
          }
          else if (sw.ElapsedMilliseconds < 3000) //when the elapsed time is < 3 secs
          {
              if ((Math.Abs(x-a) < 150) && (Math.Abs(x-b) < 150)) //criteria to start
              {
                  sw.Start(); //continues stopwatch
              }
              else if ((Math.Abs(x-a) > 150) && (Math.Abs(x-b) > 150)) //criteria reset
              {
                  sw.Reset(); //resets stopwatch
                  break; //breaks for loop
              }
          }
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:42:57.483

One obvious problem that I see--the stopwatch is stopped for basically the whole loop. It's not going to do anything resembling keeping proper time.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:15:12.070

我在这里看到的一个重要标志是您正在通过迭代 for 循环来轮询秒表。这会使用不必要的 CPU 资源。最好切换到事件驱动系统，使用`System.Timers.Timer`对象并按照逻辑要求启用它们。下面是在上面的示例中使用 Timers 来实现您的逻辑。设置一个定时器，每 500 毫秒检查一次**x**的值，并相应地打开 3 秒定时器。

```
using System;
using System.Timers;

public class HelloWorld
{
    static int a = 0, x = 0, b = 100;
    static Timer timerOut, timerCheck;

    static public void Main()
    {
        timerOut = new Timer(3000);
        timerOut.Elapsed += new ElapsedEventHandler(OnOutElapsed);
        timerCheck = new Timer(500); 
        timerCheck.Elapsed += new ElapsedEventHandler(OnCheckElapsed);
        timerCheck.Start();

        for(;;) {
            Console.WriteLine("Input x or (Q)uit");
            string s = Console.ReadLine();
            if(s.ToLower() == "q") break;
            x = Convert.ToInt32(s);
        }
    }

    private static void OnCheckElapsed(object sender, ElapsedEventArgs e)
    {
        if((Math.Abs(x-a) < 150) && (Math.Abs(x-b) < 150)) {
            if(!timerOut.Enabled) {
                Console.WriteLine("starting timer (x={0})",x);
                timerOut.Start(); 
            }
        }
        else if((Math.Abs(x-a) > 150) && (Math.Abs(x-b) > 150)) {
            if(timerOut.Enabled) {
                Console.WriteLine("stopping timer (x={0})",x);
                timerOut.Stop();
            }
        }
    }

    private static void OnOutElapsed(object sender, ElapsedEventArgs e) 
    {
        Console.WriteLine("write to com port");
    }
} 
```

# eclipse - Eclipse 错误：未绑定的类路径容器

> ID：16001130
> 
> 赞同：16
> 
> 时间：2013-04-14T16:06:18.113
> 
> 标签：eclipse, java

制作项目后，我收到两条错误消息：

1.  在解决构建路径错误之前，无法构建项目。

2.  未绑定的类路径容器：项目“method_test”中的“JRE 系统库 [OSGi/Minimum-1.2]”

我认为如果我找出第二个错误，第一个错误就会消失。但是，我在 10.5.8 Mac 上运行 eclipse Juno，我无法从 Oracle 网站安装必要的 JRE，因为它们与 Mac 不兼容。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-14T16:14:26.197

1.  右键单击项目
2.  打开属性
3.  选择 Java 构建路径
4.  在 Libraries 选项卡下选择 JRE System Library。
5.  点击编辑。
6.  单击备用 JRE。
7.  如果存在 Alternate JRE，则选择它并点击 Finish。
8.  如果不存在，则单击 Installed JREs 打开一个弹出窗口。
9.  点击添加。
10.  选择标准 VM，然后单击下一步。
11.  选择 JRE Home，导航到 JDK root 并选择它。
12.  单击完成。
13.  在已安装的 JRE 中选择它。

这是[JDK Mac安装的链接](http://docs.oracle.com/javase/7/docs/webnotes/install/mac/mac-jdk.html)

# doctrine - symfony cmf 学说 phpcr 迁移器页面变量

> ID：16001131
> 
> 赞同：0
> 
> 时间：2013-04-14T16:06:18.933
> 
> 标签：doctrine, symfony-cmf

我遵循 symfony [cmf 教程](http://symfony.com/pdf/Symfony_cmf_master.pdf?v=3)，我设置了一个 mysql 连接而不是 sql_light。我设置了数据库，但现在我尝试使用教程中的命令添加页面：

```
php app/console doctrine:phpcr:migrator page --identifier=/cms/simple/test 
```

但这会出现以下错误

```
 [InvalidArgumentException]                      
  Wrong value 'page' for migrator_name argument.  
  Available migrators:                            

doctrine:phpcr:migrator:migrate [--identifier[="..."]] [--depth[="..."]] [--session[="..."]] [migrator_name] 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T06:33:49.537

只是想分享我的经验。 [Symfony-cmf-standard](https://github.com/symfony-cmf/symfony-cmf-standard) 跟随教程。

在执行此命令之前

```
app/console doctrine:database:create 
app/console doctrine:phpcr:init:dbal 
app/console doctrine:phpcr:register-system-node-types 
app/console doctrine:phpcr:fixtures:load 
```

更改数据库配置 bia web/config.php 或 parameters.yml

在窗户上，

```
app/console doctrine:phpcr:fixtures:load 
```

可能会失败，您可以按照此链接进行[windows 修复](https://github.com/phpcr/phpcr-utils/pull/51)

祝你好运，

# mongodb - 俄语中mongodb中的全文搜索

> ID：16001132
> 
> 赞同：4
> 
> 时间：2013-04-14T16:06:26.567
> 
> 标签：mongodb, full-text-search

我正在尝试在 mongodb 中使用全文搜索：

```
> db.collection.insert({"text" : "Первый второй третий"})
> db.collection.insert({"text" : "первый Второй третий"})
> db.collection.insert({"text" : "первый второй Третий"})
> db.collection.ensureIndex({"text" : "text"}, {"default_language" : "russian"}) 
```

句子仅在字母大小写上有所不同。

```
> db.collection.runCommand("text" , {search : "первый"})
{
        "queryDebugString" : "перв||||||",
        "language" : "russian",
        "results" : [
                {
                        "score" : 0.6666666666666666,
                        "obj" : {
                                "_id" : ObjectId("516acfe2dbfd90a837e09131"),
                                "text" : "первый Второй третий"
                        }
                },
                {
                        "score" : 0.6666666666666666,
                        "obj" : {
                                "_id" : ObjectId("516acfe8dbfd90a837e09132"),
                                "text" : "первый второй Третий"
                        }
                }
        ],
        "stats" : {
                "nscanned" : 2,
                "nscannedObjects" : 0,
                "n" : 2,
                "nfound" : 2,
                "timeMicros" : 86
        },
        "ok" : 1
} 
```

结果仅包含两个条目，但应该是三个。在英语中一切都很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T23:05:55.007

这是文本搜索的一个已知限制，因为它存在于 MongoDB 2.4 中。出于文本搜索的目的，MongoDB 会将每个字符“ABCDEFGHIJKLMNOPQRSTUVWXYZ”（POSIX 语言环境中设置的“大写”）视为其等效的小写字母，但会将其他 UTF-8 代码点视为唯一的。

对 UTF-8 的全面折叠支持将在未来的版本中提供；[在https://jira.mongodb.org/browse/SERVER-8423](https://jira.mongodb.org/browse/SERVER-8423)中查看 JIRA 中的相关票证。

# c# - Kinect 启动后未显示 MainWindow 中的自定义图像

> ID：16001133
> 
> 赞同：0
> 
> 时间：2013-04-14T16:06:28.007
> 
> 标签：c#, wpf, visual-studio, kinect, kinect-sdk

我正在按照这个简单的示例将图像附加到身体部位：[http ://channel9.msdn.com/Series/KinectQuickstart/Skeletal-Tracking-Fundamentals](http://channel9.msdn.com/Series/KinectQuickstart/Skeletal-Tracking-Fundamentals)

问题是我的图像不显示。椭圆和我放置在 MainWindow 中的所有其他组件正确显示，但图像不可见。

这是主窗口：

![在此处输入图像描述](https://i.stack.imgur.com/TkA9w.png)

因此，当我启动 Kinect 但没有图像时，椭圆显示良好。这是生成的 XAML 代码：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:WpfViewers="clr-namespace:Microsoft.Samples.Kinect.WpfViewers;assembly=Microsoft.Samples.Kinect.WpfViewers" x:Class="KinectSetupDev.MainWindow"
    Title="MainWindow" Height="480" Width="640" Closing="Window_Closing_1" Loaded="Window_Loaded_1">
<Grid>
    <Image x:Name="image1" HorizontalAlignment="Left" Height="356" VerticalAlignment="Top" Width="502"/>
    <Ellipse x:Name="rightEllipse" Fill="BlueViolet" HorizontalAlignment="Left" Height="45" Margin="122,41,0,0" Stroke="Black" VerticalAlignment="Top" Width="54"/>
    <Ellipse x:Name="leftEllipse" Fill="Cornsilk" HorizontalAlignment="Left" Height="42" Margin="30,61,0,0" Stroke="Black" VerticalAlignment="Top" Width="52"/>
    <Image x:Name="headImage" Source="smile.png" HorizontalAlignment="Left" Height="52" Margin="43,145,0,0" VerticalAlignment="Top" Width="57"/>
</Grid> 
```

这是某种错误吗？在所有教程中，图像只是放置在 MainWindow 上并通常显示在屏幕上。我有最新的 SDK (v1.7)。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:08:10.710

我设法解决了这个问题。真是个小错误……如果不是直接在Visual Studio中添加图片，Kinect启动时就无法识别。我只将它添加到项目目录中，而不是在 Visual Studio 中。因此，VS 识别出该图像存在，但是当它启动时，它无法在项目文件中找到它。因此，它仅在 Visual Studio 中显示。

我在我的项目下的 VS 中创建了目录 Images 并将图像直接放在那里，现在它正在工作，并且在应用程序启动时通常会显示图像。

```
<Image x:Name="Images/headImage" Source="smile.png" HorizontalAlignment="Left" Height="52" Margin="43,145,0,0" VerticalAlignment="Top" Width="57"/> 
```

# c# - ASP.NET 删除中继器内的 DropDownList 项？

> ID：16001134
> 
> 赞同：1
> 
> 时间：2013-04-14T16:07:09.273
> 
> 标签：c#, asp.net, html-select, asprepeater

我不知道我是否可以在这里发布这样一个特定的问题。

场景是我有一个与类别有多对多关系的产品。意味着一个产品可能属于多个类别，一个类别可能有多个产品。现在在表单上，​​我提供了一个下拉列表以及一个显示添加另一个类别的按钮，当我单击该按钮时，另一个下拉列表应出现在第一个下拉列表下方。并且必须从下拉项目中删除上一个下拉列表的选定项目。

下面是我的下拉中继器代码和提到的两个按钮。

```
 protected void btnAddAnotherCategory_Click(object sender, EventArgs e)
    {
        List<int> selectedIndices = new List<int>();
        foreach (RepeaterItem item in rptCategories.Items)
        {
            if (item.ItemType == ListItemType.Item || item.ItemType == ListItemType.AlternatingItem)
            {
                DropDownList ddlCategory = (DropDownList)item.FindControl("ddlCategory");
                int selectedIndex = ddlCategory.SelectedIndex;
                selectedIndices.Add(selectedIndex);
            }
        }
        ViewState["objSelectedIndices"] = selectedIndices;
        rptCategories_DataSource("add", false);
    }

    protected void btnRemoveCategory_Click(object sender, EventArgs e)
    {
        List<int> selectedIndices = new List<int>();
        foreach (RepeaterItem item in rptCategories.Items)
        {
            if (item.ItemType == ListItemType.Item || item.ItemType == ListItemType.AlternatingItem)
            {
                DropDownList ddlCategory = (DropDownList)item.FindControl("ddlCategory");
                int selectedIndex = ddlCategory.SelectedIndex;
                selectedIndices.Add(selectedIndex);
            }
        }
        ViewState["objSelectedIndices"] = selectedIndices;
        rptCategories_DataSource("remove", false);
    }

    protected void rptCategories_DataSource(string editCommand, bool pageLoad)
    {
        switch (editCommand)
        {
            case "add":
                if (ViewState["categoriesCount"] == null)
                {
                    List<Category> count = new List<Category>();
                    count.Add(new Category());
                    ViewState["categoriesCount"] = count;
                }
                if (!pageLoad)
                {
                    List<Category> count = (List<Category>)ViewState["categoriesCount"];
                    count.Add(new Category());
                    ViewState["categoriesCount"] = count;
                }
                List<Category> objCategories = (List<Category>)ViewState["categoriesCount"];
                objCategories = objCategories.Where(x => x.StatusID != 3).ToList();
                rptCategories.DataSource = objCategories;
                rptCategories.DataBind();
                break;
            case "remove":
                if (((List<Category>)ViewState["categoriesCount"]).Count > 1)
                {
                    List<Category> count = (List<Category>)ViewState["categoriesCount"];
                    count.Remove(count.Last());
                    count = count.Where(x => x.StatusID != 3).ToList();
                    ViewState["categoriesCount"] = count;
                    rptCategories.DataSource = count;
                    rptCategories.DataBind();
                }
                break;
        }
    }

    protected void rptCategories_ItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        Category objCategory = (Category)e.Item.DataItem;

        DropDownList ddlCategory = (DropDownList)e.Item.FindControl("ddlCategory");
        ddlCategory.DataSource = new CategoryBLL().GetAllCategoriesWithStatus();
        ddlCategory.DataTextField = "Name";
        ddlCategory.DataValueField = "ID";
        ddlCategory.DataBind();

        if (objCategory.CategoryID != null)
            ddlCategory.SelectedValue = objCategory.CategoryID.ToString();

        if (ViewState["objSelectedIndices"] != null)
        {
            List<int> objSelectedIndices = (List<int>)ViewState["objSelectedIndices"];
            if (objSelectedIndices.Count > e.Item.ItemIndex)
                ddlCategory.SelectedIndex = objSelectedIndices.ElementAt(e.Item.ItemIndex);
        }

        if (e.Item.ItemIndex < ((List<Category>)rptCategories.DataSource).Count - 1)
        {
            ddlCategory.Enabled = false;
        }

        btnAddAnotherCategory.Visible = true;
        btnRemoveCategory.Visible = true;
        if (rptCategories.Items.Count < 1)
        {
            btnRemoveCategory.Visible = false;
        }
        if (rptCategories.Items.Count >= new CategoryBLL().GetAllCategoriesWithStatus().Count - 1)
        {
            btnAddAnotherCategory.Visible = false;
        }
    } 
```

代码中提到的 StatusID 是为了确定已删除的产品，因为我实际上并没有删除产品，而只是设置了它的 StatusID

现在的问题是我的代码在上述语句中运行良好，但正如您所见，它不会从下拉列表中删除选定的项目。每次都需要从单个表中填充下拉列表。棘手的部分是删除先前重复项下拉列表中的选定项。任何解决方案都将受到欢迎。

# c# - 从类中设置和获取值

> ID：16001137
> 
> 赞同：2
> 
> 时间：2013-04-14T16:07:44.160
> 
> 标签：c#, .net

有一个内部有几个`channels`. 对于每个通道，我们可以读取或写入相同的值。

```
 int channel = 2;
 var value = obj.GetValue(channel);
 obj.SetValue(channel, value + 1); 
```

实现所有这些`Getters`并让`Setters`我感到困惑，因为这`C#`允许拥有`properties`. 有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T16:12:31.923

语义上“更好”的方法可能是实现[indexer](http://msdn.microsoft.com/en-us/library/vstudio/6x16t2tx.aspx)。

`Channel`例如，使用您拥有内部对象的事实：

```
partial class MyClass
{
    public Channel this[int channel]
    {
        get
        {
            return this.GetChannelObject(channel);
        }

        /*
         * You probably don't want consumers to be able to change the underlying
         * object, so I've commented this out. You could also use a private
         * setter instead if you want to internally make use of the indexing
         * semantic, but since you're most likely just wrapping an IList<Channel>
         * anyway, you probably don't need it.
         *
         * set
         * {
         *     this.SetChannelObject(channel);
         * }
         */
    }
} 
```

然后你可以简单地做：

```
int channel = 2;
var value = obj[channel].ValueA;
obj[channel].ValueA = value + 1; 
```

# ruby-on-rails-3 - 应用程序因 :dependent => :destroy_all 在 heroku 上崩溃

> ID：16001142
> 
> 赞同：0
> 
> 时间：2013-04-14T16:07:55.427
> 
> 标签：ruby-on-rails-3, heroku, crash, dependent-destroy

注意一切都在当地环境中工作

这是代码

```
PublicActivity::ORM::ActiveRecord::Activity.class_eval do

attr_accessible :reference_type, :reference_id

has_many :notifications, :dependent => :destroy_all
has_many :users, :through => :notifications

end 
```

这是 public_activity gem

错误是

```
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_record/associations/builder/has_many.rb:20:in `configure_dependency': The :dependent option expects either :destroy, :delete_all, :nullify or :restrict (:destroy_all) (ArgumentError) 
```

如果它期望`:destroy_all`并且我写`:destroy_all`并且它在本地工作..那么这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:13:10.640

到[源头](https://github.com/rails/rails/blob/v3.2.13/activerecord/lib/active_record/associations/builder/has_many.rb#L20)！

```
unless options[:dependent].in?([:destroy, :delete_all, :nullify, :restrict])
  raise ArgumentError, "The :dependent option expects either :destroy, :delete_all, " \
                       ":nullify or :restrict (#{options[:dependent].inspect})"
end 
```

因此，在那条错误消息中，所说的部分`(:destroy_all)`只是告诉您您提供了什么；它所期待的清单是在那之前的。你可能想要`:destroy`。不能说为什么它在本地工作而不是在 Heroku 上工作；可能是某种宝石版本问题。

# ios - 编码/解码 NSImage

> ID：16001144
> 
> 赞同：0
> 
> 时间：2013-04-14T16:08:06.303
> 
> 标签：ios, objective-c, macos, file-io, encoding

我正在开发一个 OSX 应用程序并且需要保存自定义类的信息，所以我尝试使用 NSCoder 对其进行索引；但是，我试图在类中编码/解码的对象之一是 NSImage，每次我尝试运行 encodeWithCoder: 或 initWithCoder: 我都是以下两条错误消息之一：

`Warning - attempting to encode NSCGSImageRep`
`Warning - attempting to decode NSCGSImageRep`

这是我的.m：

```
@implementation Subject

-(id) init{
    self = [super init];
    if (self) {
        self.ad = [[NSApplication sharedApplication] delegate];
        self.editViewController = self.ad.editViewController;
        self.name = @"";
        self.teacher = @"";
        self.mainPeriod = 1;
    }

    return self;
}
-(void) encodeWithCoder: (NSCoder *) coder{
    [coder encodeObject:self.name forKey:@"name"];
    [coder encodeObject:self.teacher forKey:@"teacher"];
    NSNumber *periodNumBox = [NSNumber numberWithInt:self.mainPeriod];
    [coder encodeObject:periodNumBox forKey:@"mainPeriod"];
    [coder encodeObject:self.image forKey:@"image"];
}
-(id) initWithCoder: (NSCoder *) coder{
    self.name = [coder decodeObjectForKey:@"name"];
    self.teacher = [coder decodeObjectForKey:@"teacher"];
    NSNumber *periodNumBox = [coder decodeObjectForKey:@"mainPeriod"];
    self.mainPeriod = (int)[periodNumBox integerValue];
    self.image = [coder decodeObjectForKey:@"image"];
    return self;
}
@end 
```

和我的.h：

```
#import <Foundation/Foundation.h>
#import "AppDelegate.h"
#import "EditViewController.h"

@class EditViewController;

@interface Subject : NSObject

@property (weak) AppDelegate *ad;
@property EditViewController *editViewController;

@property NSImage *image;
@property NSString *name;
@property NSString *teacher;
@property int mainPeriod;

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:24:54.560

这不是您要问的，但它可能是一个值得考虑的解决方案：不要。如果图像在解码时保证存在于其他地方，则您需要存档的只是图像的*名称*或其他*引用*。如果图像在解码时不能保证在其他地方存在，则将其保存到可以保证存在的磁盘上，并将*名称**或*其他*引用*存档。

另请参阅我的回答，了解如何将图像转换为 NSData：

[https://stackoverflow.com/a/15694549/341994](https://stackoverflow.com/a/15694549/341994)

NSData 可以直接写入磁盘上的文件。当然，由于 NSData 对象是可存档的，您现在可以将其放入存档中；它将与编码和解码一起使用。但我仍然认为你不应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-28T21:52:40.777

在 macOS 10.15 上，我可以毫无问题地对 NSImage 进行编码。

# gwt - CSS 在 GXT 中不起作用

> ID：16001146
> 
> 赞同：1
> 
> 时间：2013-04-14T16:08:12.593
> 
> 标签：gwt, uibinder, gwt2, gxt

我在GWT GXT的学习阶段，

我的项目中的一些 css 运行良好，但有些向我展示了一种奇怪的行为。

用于登录按钮。

```
logonBtn = new TextButton("Connect");
        logonBtn.setIconAlign(IconAlign.RIGHT);
        logonBtn.setIcon(Resources.INSTANCE.login());
        logonBtn.setStyleName("Project-Button"); 
```

CSS

```
.Project-Button {
    color: Black;
    border: thin outset #FF6600;
    font-family: Courier New, Century Gothic, Times New Roman, Verdana, Arial;
    vertical-align: middle;
    background-position: left center;
    background-color: White;
    cursor: pointer;
} 
```

但是当我运行项目时，这个 css 对连接按钮没有任何影响。

在我的项目中，我有 6 或 7 个 TextButton。但是这个css只在这些按钮之一中显示效果

我尝试使用 Firebug 来查看问题。我看到这个 textButton 没有附加 Project-Button css。

附上fireBug的图片。

如果有人理解这一点，请解释并给出解决方案。

提前致谢。

![在此处输入图像描述](https://i.stack.imgur.com/DwLRJ.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-29T06:48:34.257

如果要更改 GXT 文本按钮样式，则必须编写 ButtonCellAppereance。GXT 按钮样式与其他 gxt 小部件相比过于复杂。[关于外观的示例链接](https://code.google.com/p/gxt-clean-theme/)

[1](https://code.google.com/p/gxt-clean-theme/)：[http](http://www.slideshare.net/senchainc/ext-gwt-30-theming-and-appearances) ://www.slideshare.net/senchainc/ext-gwt-30-theming-and-appearances我开始了一个关于 gwt 项目的项目作为[主题项目链接](https://code.google.com/p/gxt-clean-theme/)

但我没有更多的时间来发展。好的黑客...

# c++ - C++——试图写文件

> ID：16001149
> 
> 赞同：-5
> 
> 时间：2013-04-14T16:08:28.827
> 
> 标签：c++, xcode, macos, file, filestream

我正在为 C++ 编写新波士顿教程，并且刚刚完成了有关文件处理的教程。我的代码看起来和他的完全一样，但是构建失败了。我认为这可能是因为我在 Mac 上，我认为这可能是问题所在。这是我的代码：

```
#include <iostream>
#inlcude <fstream>

using namespace std;

int main() {

    ofstream buckyFile;
    buckyFile.open("tuna.txt");

    buckyFile << "I love tuna and tuna loves me!\n";
    buckyFile.close();

} 
```

希望你能帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T16:09:06.820

正如语法突出显示的那样，您拼错了`include`：

```
#include <fstream> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T16:09:52.483

正确包含文件流并编译。与MAC无关

```
#include <fstream> 
```

# angularjs - Visual Studio中的angularjs智能感知

> ID：16001155
> 
> 赞同：10
> 
> 时间：2013-04-14T16:09:05.970
> 
> 标签：angularjs, intellisense

我已经设法为 HTML 中的 ng- 指令获得智能感知。我还获得了大多数 javascript 文件的智能感知。但是，我不知道如何获得注入位的智能感知。考虑以下：

```
function mandatsCtrl($scope, Domiciliation, logger, $q) {
} 
```

如何获得注入的 $q 或 $scope 的智能感知？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-14T20:36:00.560

我创建了一个您可以参考的 javascript 文件，它在 JavaScript 文件中（包括您的自定义工厂、服务等）提供了（几乎）完整的 AngularJS 智能感知。

[https://github.com/jmbledsoe/angularjs-visualstudio-intellisense](https://github.com/jmbledsoe/angularjs-visualstudio-intellisense)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-31T14:53:55.920

You can get intellisense on injected parameters (and just about everything else) if you use TypeScript. TypeScript let's you specify the type of your parameters so VS will know how to use them.

eg.

```
/// <reference path="./angular.d.ts" />

function mandatsCtrl($scope: ng.IScope) {...} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T17:24:49.423

据我所知，你不能那样做。但是，如果您使用的是 ReSharper，您可以尝试[AngularJS 对 ReSharper](http://blogs.jetbrains.com/dotnet/2013/02/angularjs-support-for-resharper/)插件的支持。它处于早期阶段，所以我想随着时间的推移我们可以期待更多。

[这是HTML5Schema](http://madskristensen.net/post/AngularJS-Intellisense-in-Visual-Studio-2012.aspx)的另一个链接（Intellisense 中提供的所有 ng-* 属性）。我猜你已经有了。

还有一个 Chrome 插件[AngularJS Batarang](https://chrome.google.com/webstore/detail/angularjs-batarang/ighdmehidhipcmcojjgiloacoafjmpfk?utm_source=chrome-ntp-icon)。扩展开发者工具，添加用于调试和分析 AngularJS 应用程序的工具。

我期待其他答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-13T02:32:08.240

你看过这个：[https ://github.com/matijagrcic/AngularJS-Intellisense-For-Visual-Studio](https://github.com/matijagrcic/AngularJS-Intellisense-For-Visual-Studio)

我通过我拥有的扩展之一（认为它必须是“Web Essentials 2012”）获得了 $scope 和 $q 的 Intellisense，尽管它似乎并不是特别智能的 Intellisense - 它只是对每一种可能的 JS 方法的建议/财产。

# python - Python 中的辛普森法则

> ID：16001157
> 
> 赞同：7
> 
> 时间：2013-04-14T16:09:16.003
> 
> 标签：python, math, numerical-methods

对于数值方法类，我需要编写一个程序来使用辛普森的复合规则评估定积分。我已经做到了这一点（见下文），但我的答案不正确。我正在用 f(x)=x 测试程序，积分超过 0 到 1，结果应该是 0.5。我得到 0.78746... 等等。我知道 Scipy 中有一个辛普森规则，但我真的需要自己写。

我怀疑这两个循环有问题。我之前尝试过“for i in range(1, n, 2)”和“for i in range(2, n-1, 2)”，结果是 0.41668333... 等等。我也试过“ x += h”，我尝试了“x += i*h”。第一个给了我 0.3954，第二个选项给了我 7.9218。

```
# Write a program to evaluate a definite integral using Simpson's rule with
# n subdivisions

from math import *
from pylab import *

def simpson(f, a, b, n):
    h=(b-a)/n
    k=0.0
    x=a
    for i in range(1,n/2):
        x += 2*h
        k += 4*f(x)
    for i in range(2,(n/2)-1):
        x += 2*h
        k += 2*f(x)
    return (h/3)*(f(a)+f(b)+k)

def function(x): return x

print simpson(function, 0.0, 1.0, 100) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T16:27:06.060

您可能忘记`x`在第二个循环之前进行初始化，而且开始条件和迭代次数都关闭了。这是正确的方法：

```
def simpson(f, a, b, n):
    h=(b-a)/n
    k=0.0
    x=a + h
    for i in range(1,n/2 + 1):
        k += 4*f(x)
        x += 2*h

    x = a + 2*h
    for i in range(1,n/2):
        k += 2*f(x)
        x += 2*h
    return (h/3)*(f(a)+f(b)+k) 
```

您的错误与循环不变量的概念有关。不谈太多细节，通常更容易理解和调试在循环结束时推进的循环，而不是在开始时，这里我将`x += 2 * h`行移到末尾，这样可以很容易地验证求和从哪里开始。在您的实现中，有必要`x = a - h`为第一个循环分配一个怪异，只是将`2 * h`其添加为循环中的第一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-16T15:50:50.987

要使此代码正常工作，您需要做的就是在函数 bounds() 中为 a 和 b 添加一个变量，并在 f(x) 中添加一个使用变量 x 的函数。如果需要，您还可以将函数和边界直接实现到 simpsonsRule 函数中......此外，这些是要在程序中实现的函数，而不是程序本身。

```
def simpsonsRule(n):

    """
    simpsonsRule: (int) -> float
    Parameters:
        n: integer representing the number of segments being used to 
           approximate the integral
    Pre conditions:
        Function bounds() declared that returns lower and upper bounds of integral.
        Function f(x) declared that returns the evaluated equation at point x.
        Parameters passed.
    Post conditions:
        Returns float equal to the approximate integral of f(x) from a to b
        using Simpson's rule.
    Description:
        Returns the approximation of an integral. Works as of python 3.3.2
        REQUIRES NO MODULES to be imported, especially not non standard ones.
        -Code by TechnicalFox
    """

    a,b = bounds()
    sum = float()
    sum += f(a) #evaluating first point
    sum += f(b) #evaluating last point
    width=(b-a)/(2*n) #width of segments
    oddSum = float()
    evenSum = float()
    for i in range(1,n): #evaluating all odd values of n (not first and last)
        oddSum += f(2*width*i+a)
    sum += oddSum * 2
    for i in range(1,n+1): #evaluating all even values of n (not first and last)
        evenSum += f(width*(-1+2*i)+a)
    sum += evenSum * 4
    return sum * width/3

def bounds():
    """
    Description:
        Function that returns both the upper and lower bounds of an integral.
    """
    a = #>>>INTEGER REPRESENTING LOWER BOUND OF INTEGRAL<<<
    b = #>>>INTEGER REPRESENTING UPPER BOUND OF INTEGRAL<<<
    return a,b

def f(x):
    """
    Description:
        Function that takes an x value and returns the equation being evaluated,
        with said x value.
    """
    return #>>>EQUATION USING VARIABLE X<<< 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-13T15:54:50.103

您可以使用此程序通过使用辛普森的 1/3 规则来计算定积分。您可以通过增加变量面板的值来提高准确性。

```
import numpy as np

def integration(integrand,lower,upper,*args):    
    panels = 100000
    limits = [lower, upper]
    h = ( limits[1] - limits[0] ) / (2 * panels)
    n = (2 * panels) + 1
    x = np.linspace(limits[0],limits[1],n)
    y = integrand(x,*args)
    #Simpson 1/3
    I = 0
    start = -2
    for looper in range(0,panels):
        start += 2
        counter = 0
        for looper in range(start, start+3):
            counter += 1
            if (counter ==1 or counter == 3):
                I += ((h/3) * y[looper])
            else:
                I += ((h/3) * 4 * y[looper])
    return I 
```

例如：

```
def f(x,a,b):
    return a * np.log(x/b)
I = integration(f,3,4,2,5)
print(I) 
```

将在区间 3 和 4 内积分 2ln(x/5)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-05T15:43:32.153

有我的代码（我认为这是最简单的方法）。我在 jupyter notebook 中完成了这个。Simpson 方法最简单、最准确的代码是 1/3。

## 解释

对于标准方法 (a=0, h=4, b=12) 和 f=100-(x^2)/2

我们得到：n= 3.0, y0 = 100.0, y1 = 92.0, y2 = 68.0, y3 = 28.0,

所以辛普森方法 = h/3*(y0+4*y1+2*y2+y3) = 842,7（这不是真的）。使用 1/3 规则，我们得到：

h = h/2= 4/2= 2 然后：

n= 3.0, y0 = 100.0, y1 = 98.0, y2 = 92.0, y3 = 82.0, y4 = 68.0, y5 = 50.0, y6 = 28.0,

现在我们计算每一步的积分（n=3 = 3 步）：

第一步的积分：h/3*(y0+4*y1+y2) = 389.3333333333333

第二步的积分：h/3*(y2+4*y3+y4) = 325.3333333333333

第三步的积分：h/3*(y4+4*y5+y6) = 197.33333333333331

总和，我们得到 912.0，这是真的

```
x=0
b=12
h=4
x=float(x)
h=float(h)
b=float(b)
a=float(x)
def fun(x): 
    return 100-(x**2)/2
h=h/2
l=0  #just numeration
print('n=',(b-x)/(h*2))
n=int((b-a)/h+1)
y = []   #tablica/lista wszystkich y / list of all "y"
yf = []
for i in range(n):
    f=fun(x)
    print('y%s' %(l),'=',f)
    y.append(f)
    l+=1
    x+=h
print(y,'\n')
n1=int(((b-a)/h)/2)  
l=1
for i in range(n1):
    nf=(h/3*(y[+0]+4*y[+1]+y[+2]))
    y=y[2:]  # with every step, we deleting 2 first "y" and we move 2 spaces to the right, i.e. y2+4*y3+y4
    print('Całka dla kroku/Integral for a step',l,'=',nf)
    yf.append(nf)
    l+=1
print('\nWynik całki/Result of the integral =', sum(yf) ) 
```

一开始我添加了简单的数据输入：

```
d=None
while(True):
    print("Enter your own data or enter the word "test" for ready data.\n")
    x=input ('Enter the beginning of the interval (a): ') 
    if x == 'test':
        x=0
        h=4  #krok (Δx)
        b=12 #granica np. 0>12  
        #w=(20*x)-(x**2)  lub   (1+x**3)**(1/2)
        break
    h=input ('Enter the size of the integration step (h): ')
    if h == 'test':
        x=0
        h=4 
        b=12 
        break
    b=input ('Enter the end of the range (b): ')
    if b == 'test':
        x=0
        h=4  
        b=12 
        break 
    d=input ('Give the function pattern: ')
    if d == 'test':
        x=0
        h=4  
        b=12
        break
    elif d != -9999.9:
        break

x=float(x)
h=float(h)
b=float(b)
a=float(x)

if d == None or d == 'test':
    def fun(x): 
        return 100-(x**2)/2 #(20*x)-(x**2)
else:
    def fun(x): 
        w = eval(d)
        return  w
h=h/2
l=0  #just numeration
print('n=',(b-x)/(h*2))
n=int((b-a)/h+1)
y = []   #tablica/lista wszystkich y / list of all "y"
yf = []
for i in range(n):
    f=fun(x)
    print('y%s' %(l),'=',f)
    y.append(f)
    l+=1
    x+=h
print(y,'\n')
n1=int(((b-a)/h)/2)  
l=1
for i in range(n1):
    nf=(h/3*(y[+0]+4*y[+1]+y[+2]))
    y=y[2:]
    print('Całka dla kroku/Integral for a step',l,'=',nf)
    yf.append(nf)
    l+=1
print('\nWynik całki/Result of the integral =', sum(yf) ) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-18T21:11:49.593

```
def simps(f, a, b, N):   # N must be an odd integer
    """ define simpson method, a and b are the lower and upper limits of
    the interval, N is number of points, dx is the slice
        """
    integ = 0
    dx = float((b - a) / N)

    for i in range(1,N-1,2):
        integ += f((a+(i-1)*dx)) + 4*f((a+i*dx)) + f((a+(i+1)*dx))
        integral = dx/3.0 * integ

    # if number of points is even, then error araise
    if (N % 2) == 0:
      raise ValueError("N must be an odd integer.")

    return integral

def f(x):
    return x**2

integrate = simps(f,0,1,99)
print(integrate) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-15T12:52:30.583

用 a = 0 和 b = pi/4 实现 Simpson 积分 sinX 规则的示例。并使用 10 个面板进行集成

```
def simpson(f, a, b, n):
  x = np.linspace(a, b, n+1)
  w = 2*np.ones(n+1); w[0] = 1.0; w[-1] = 1;
  for i in range(len(w)):
      if i % 2 == 1:
          w[i] = 4
  width = x[1] - x[0]
  area = 0.333 * width * np.sum( w*f(x))
  return area

f = lambda x: np.sin(x)
a = 0.0; b = np.pi/4

areaSim = simpson(f, a, b, 10)
print(areaSim) 
```

# r - 删除以其他行中的值为条件的行

> ID：16001159
> 
> 赞同：1
> 
> 时间：2013-04-14T16:09:25.753
> 
> 标签：r, dataframe

我有一个与这个相似的数据集

```
df1<-data.frame(ID = c(1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4),
           YEAR = c(1999, 2000, 2001, 2002, 1999, 2000, 2001, 2002, 1999, 2000, 2001, 2002, 1999, 2000, 2001, 2002),
           VALUE = c(1,2,3,3,3,2,5,6,2,3,4,4,2,1,2,1))

   ID YEAR VALUE
1   1 1999     1
2   1 2000     2
3   1 2001     3
4   1 2002     4
5   2 1999     3
6   2 2000     2
7   2 2001     5
8   2 2002     6
9   3 1999     2
10  3 2000     3
11  3 2001     4
12  3 2002     4
13  4 1999     2
14  4 2000     1
15  4 2001     2
16  4 2002     1 
```

我想要的是，如果第一次 Value 小于 3，则前几年具有相同 ID 的行中的值应设置为 NA ，否则保持不变。但是，如果在值 2 或更低之前存在大于或等于 3 的值，则不应更改相同 ID 的其他条目，如 ID 号 2 所示。

输出应如下所示：

```
df2<-data.frame(ID = c(1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4),
           YEAR = c(1999, 2000, 2001, 2002, 1999, 2000, 2001, 2002, 1999, 2000, 2001, 2002, 1999, 2000, 2001, 2002),
           VALUE = c(0,0,3,3,3,2,5,6,0,3,4,4,0,0,0,0))

   ID YEAR VALUE
1   1 1999     0
2   1 2000     0
3   1 2001     3
4   1 2002     4
5   2 1999     3
6   2 2000     2
7   2 2001     5
8   2 2002     6
9   3 1999     0
10  3 2000     3
11  3 2001     4
12  3 2002     4 
13  4 1999     0
14  4 2000     0
15  4 2001     0
16  4 2002     0 
```

一个`data.table`解决方案也可以。

您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:40:53.043

This uses `data.frame`, can be extended to `data.table`:

```
for (i in unique(df1$ID))
{
    mask <- (df1[i == df1$ID,'VALUE'] > 2)
    mask <- cumsum(mask) == 0
    df1[i == df1$ID,'VALUE'][mask] <- 0 
} 
```

or this more functional approach:

```
transform(df1, VALUE = ave(VALUE, ID, FUN = function(x)
  ifelse(cumsum(x > 2) == 0, 0, x)
)) 
```

# java - 有没有办法让命令文本跟随输入？

> ID：16001160
> 
> 赞同：4
> 
> 时间：2013-04-14T16:09:32.580
> 
> 标签：java

假设我想在 java 中打印一个文本提示，然后从 System.in 获取用户的输入。但是另一个线程可以写入 System.out 并“删除”输入，但文本提示仍然存在，这是正常的。

> 在此处输入输入 ->
> `<waiting for input ...>`

但是如果一个线程写了一些东西，就会发生以下情况：

> 在此处输入输入 ->
> ...
> ...
> ...
> 此处为线程输出
> ...
> ...
> `<Waits for input here>`

是否有任何技巧可以将输入与提示文本“绑定”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:15:50.833

您可以将 system.outs 包装到日志记录类中，当您想要打印某些内容时，将其添加到新日志记录类的队列中。

当您要求用户输入时，让它激活日志记录类中的锁，以便在提交用户输入之前不会打印队列中的任何内容，然后打印队列中的所有输出。

这将导致所有输出文本在输入进入时暂停。它不会中断您的输入，因此输入将绑定在光标周围，但您也不会得到任何输出。这取决于你是否值得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T16:12:22.520

> 是否有任何技巧可以将输入与提示文本“绑定”？

没有。这是你的代码；与自己合作取决于您。这可能意味着构建（或查找提供）包装 API 的库，`System.(in|out)`因此您不必担心意外导致此问题。但是不，没有神奇的银弹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-09T02:44:44.707

```
import java.util.LinkedList;
import java.util.Queue;

public class MainDemo {

    public void queueExample() {

        Queue queue = new LinkedList();

        queue.add("Java");
        queue.add("DotNet");

        queue.offer("PHP");
        queue.offer("HTML");

        System.out.println("remove: " + queue.remove());
        System.out.println("element: " + queue.element());
        System.out.println("poll: " + queue.poll());
        System.out.println("peek: " + queue.peek());

    }

    public static void main(String[] args) {
        new MainDemo().queueExample();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T16:18:23.027

我不确定是否存在任何现有的实现，但这个任务应该足够简单。

创建一个同步打印和读取的类，例如 SyncConsole。

基本上只有 SyncConsole 单例在您的代码中写入和读取控制台的 io 流。

然后你的程序可以做类似的事情

```
SyncConsole.readInput("Text to display");
SyncConsole.print("Text"); 
```

然后可以正确同步这些调用以满足您的需求。例如，如果某些代码请求输入，缓冲区请求打印直到输入被接收等等。

如果您熟悉 java 中的并发性，那么构建起来应该相当简单，并且会给您所需的行为。

# javascript - element.find 不适用于 ng-switch 内的嵌套元素

> ID：16001170
> 
> 赞同：3
> 
> 时间：2013-04-14T16:10:35.920
> 
> 标签：javascript, jquery, angularjs, angularjs-directive

我有一个包含`ng-switch`DOM 元素的指令。我需要将事件绑定到 ng-switch 下的 DOM 节点，但由于某种原因 element.find 不会返回 switch 元素下的任何节点！

在下面的示例中，我希望`element.find("*")`返回 ng-switch、一个 div 和按钮，但它只返回 ng-switch 和按钮。

我该如何解决这个问题？或者以不同的方式从链接功能到达 ng-switch 下的 DOM 节点？

**重现代码：**

HTML

```
<div ng-controller="myCtrl" class="container">
    <div my-directive>
        <ng-switch on="selection">
            <div ng-switch-when="A" class="a">A</div>
            <div ng-switch-when="B" class="b">B</div>
            <div ng-switch-default>default</div>
        </ng-switch>        
        <button ng-click="switchSelection()" >switch</button>
    </div>
</div> 
```

JS

```
angular.module('myApp', [])
    .directive("myDirective", function () {
    return {
        link: function(scope, element, attrs) {
            console.log(element.find("*"));
            console.log("Didn't find my divs :(");
        }
    }
});

function myCtrl($scope) {
    $scope.selection="B";

    $scope.switchSelection=function(){
        if ($scope.selection=="B"){
            $scope.selection="A";
        }
        else{
            $scope.selection="B";
        }
    }
} 
```

[jsFiddle 示例](http://jsfiddle.net/opherv/KCPVZ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:55:21.843

根据您在评论中询问如何将加载事件绑定到图像（如果它在开关内）的问题。

您可以做的是为图像创建一个指令，然后在链接函数中绑定加载事件

```
.directive("myImageDirective", function(){
    return {
        restrict: 'C',
        link: function(scope, element){
            element.bind("load", function(){
                console.log("element loaded");
                scope.$apply();
            });
        }
    };
}); 
```

jsfiddle：http: [//jsfiddle.net/kB4vq/](http://jsfiddle.net/kB4vq/)

范围.$apply(); 如果你也需要它，让 Angular 知道重新处理自己，因为负载发生在 Angular 的知识之外。你可以在这里阅读更多内容：[http ://docs.angularjs.org/api/ng.$ro​​otScope.Scope#$apply](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24apply)

# egit - EGit - “拉”上的未授权消息

> ID：16001172
> 
> 赞同：11
> 
> 时间：2013-04-14T16:10:49.313
> 
> 标签：egit

我刚刚成功创建了一个本地克隆（使用我的凭据），但是当我尝试执行“拉”时，我收到一条错误消息：（手动将 repos 地址更改为抽象地址）

> http:_//username@url:port/git/proj/team_repos.git: 未授权
> 
> org.eclipse.jgit.api.errors.TransportException

这在日志中更详细：

> java.version=1.7.0_10 java.vendor=Oracle Corporation BootLoader 常量：OS=linux, ARCH=x86_64, WS=gtk, NL=en_SG 框架参数：-vm /usr/java/jdk1.7.0_10/jre/bin 命令-行参数：-os linux -ws gtk -arch x86_64 -vm /usr/java/jdk1.7.0_10/jre/bin
> 
> 错误 Sun Apr 14 19:00:11 IDT 2013 http_://username@url:port/git/proj/team_repos.git：未授权
> 
> org.eclipse.jgit.api.errors.TransportException：http_://username@url:port/git/proj/team_repos.git：在 org.eclipse.jgit.api.FetchCommand.call 未授权（FetchCommand.java:137 ) 在 org.eclipse.jgit.api.PullCommand.call(PullCommand.java:245) 在 org.eclipse.egit.core.op.PullOperation$1.run(PullOperation.java:90) 在 org.eclipse.core.internal .resources.Workspace.run(Workspace.java:2344) at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2326) at org.eclipse.egit.core.op.PullOperation.execute(PullOperation .java:121) 在 org.eclipse.egit.ui.internal.pull.PullOperationUI.execute(PullOperationUI.java:115) 在 org.eclipse.egit.ui.internal.pull.PullOperationUI$1.run(PullOperationUI.java: 90) 在 org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 原因：org.eclipse.jgit.errors.TransportException: http_://username@url:port/git/proj/team_repos.git: 在 org.eclipse.jgit.transport.TransportHttp.connect(TransportHttp. java:476) at org.eclipse.jgit.transport.TransportHttp.openFetch(TransportHttp.java:305) at org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:136) at org.eclipse.jgit.transport .FetchProcess.execute(FetchProcess.java:122) 在 org.eclipse.jgit.transport.Transport.fetch(Transport.java:1104) 在 org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:128) 。 .. 还有 8 个476) 在 org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:136) 在 org.eclipse.jgit.transport.FetchProcess .execute(FetchProcess.java:122) 在 org.eclipse.jgit.transport.Transport.fetch(Transport.java:1104) 在 org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:128) ...还有 8 个476) 在 org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:136) 在 org.eclipse.jgit.transport.FetchProcess .execute(FetchProcess.java:122) 在 org.eclipse.jgit.transport.Transport.fetch(Transport.java:1104) 在 org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:128) ...还有 8 个还有 8 个还有 8 个

没有找到任何解决方案..有人吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-21T06:16:34.070

我设法解决了它。

在 Eclipse 中，转到：

> Git Repository Exploring (Perspective) --> Your git repository clone --> Remotes

查找获取和推送的 URL。

> 右键单击每个->清除凭据

.

现在尝试推/拉，并手动输入您的密码，取消标记“存储在安全存储”选项。

* * *

经过大量搜索，这似乎解决了它： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=356233](https://bugs.eclipse.org/bugs/show_bug.cgi?id=356233)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-10T14:53:21.330

org.eclipse.jgit.api.errors.TransportException: <repo_path>: 未授权

如果启用了 2FA，则在与远程仓库通信时会出现上述错误的原因之一。在这种情况下，您需要创建您的个人访问令牌

GitHub -> 转到个人资料 -> 开发人员设置 -> 个人访问令牌 -> 生成一个（复制令牌，因为它现在仅供您使用）-> （可选）启用 SSO -> 授权（如果 repo 是与组织相关联）

而已！使用复制的 PAT 代替`password`克隆存储库。那应该带你通过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-16T04:35:27.290

只需登录您的 Bitbucket 帐户，然后尝试拉取。这可能会清除此异常。

# zend-framework2 - ZF2 路线与冒号分隔符

> ID：16001173
> 
> 赞同：0
> 
> 时间：2013-04-14T16:10:49.983
> 
> 标签：zend-framework2, rdf, zend-route

我正在使用 ZF2 并尝试设置使用冒号分隔符的路由配置。

例如，网址可以是*www.example.com/namespace:subject*，我想将其发送到特定的控制器，并使用两个变量进行操作。我正在尝试使用正则表达式，因为冒号“：”是段的特殊字符。有没有很好的方法来做到这一点？这是我的路线配置：

```
'dataReqs' => array(
    'type' => 'regex',    
    'options' => array(
        'regex' => '/(?<namespace>[^:]+).(?<subject>[a-zA-Z0-9_-]+)',
        'defaults' => array(
            'controller' => 'Application\Controller\Data',
            'action'     => 'get',
        ),
        'spec' => '/%namespace%:%subject%',
    ),
), 
```

编辑：我想使用冒号作为前缀：资源格式通常用于 RDF 语法（[http://www.w3.org/TR/2007/PR-rdf-sparql-query-20071112/#QSynIRI](http://www.w3.org/TR/2007/PR-rdf-sparql-query-20071112/#QSynIRI)）。例如，像[http://dbpedia.org/data/Semantic_Web](http://dbpedia.org/data/Semantic_Web)这样带有 @prefix dbp: [http://dbpedia.org/resource/](http://dbpedia.org/resource/)的长 uri可以在带有 dbp:Semantic_Web 的文档中引用。因此，对于我的关联数据服务器，我可以直接请求并包含前缀（命名空间）和资源名称；例如[http://myserver.com/dbp:Semantic_Web](http://myserver.com/dbp:Semantic_Web)。虽然我现在使用段组合 /namespace/resource，但最好使用前缀：资源语法来处理路由。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:59:00.147

我倾向于同意kormik。为什么要以这种方式指定 URL？默认行为有什么问题？

`www.example.com/namespace/subject`

例如：

`www.example.com/somenamespace/10`

甚至：

`www.exmple.com/namespace/namespace/subject/subject`

例如

`www.example.com/namespace/somenamespace/subject/10`

您可以像这样轻松地在控制器中获取这些参数：

```
$ns = $this->params()->fromRoute('namespace',0);
$subject = (int) $this->params->fromRoute('subject',0); 
```

您还需要修改路由配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:32:27.400

不要在您的路线中使用冒号。这不是一个好习惯，因为冒号是保留字符（请参阅[https://www.rfc-editor.org/rfc/rfc3986#section-2.2](https://www.rfc-editor.org/rfc/rfc3986#section-2.2)）

# emacs - 在 emacs 操作后保持选中区域

> ID：16001177
> 
> 赞同：5
> 
> 时间：2013-04-14T16:11:24.450
> 
> 标签：emacs, elisp

我的问题建立在[Trey Jackson](https://stackoverflow.com/questions/2686593/emacs-adding-1-to-every-number-made-of-2-digits-inside-a-marked-region#2686690)对[SyntaxT3rr0r 的这个问题的回答之上](https://stackoverflow.com/questions/2686593/emacs-adding-1-to-every-number-made-of-2-digits-inside-a-marked-region)。

Trey 提出了以下函数，用于在 Emacs 缓冲区的选定区域中递增每个两位数。

```
(defun add-1-to-2-digits (b e)
  "add 1 to every 2 digit number in the region"
  (interactive "r")
  (goto-char b)
  (while (re-search-forward "\\b[0-9][0-9]\\b" e t)
    (replace-match (number-to-string (+ 1 (string-to-int (match-string 0))))))) 
```

我想将此功能用于我自己的目的。但是，我想连续多次增加数字。当前形式的函数的问题在于，在每次调用之前，我必须用鼠标再次选择该区域。

我的问题是：*如何修改 Trey 的函数，以便在调用后保留选定的区域？*（我的最终目标是将此功能分配给键盘快捷键（类似于`ctrl`+`↑</kbd>) so that I if I keep the `ctrl` and `↑</kbd> keys held down, all the two-digit numbers in my selected region will continuously increase.)``

顺便说一句，我知道[Brian Campbell 的这个答案](https://stackoverflow.com/questions/815540/emacs-keep-region-selected-after-operation#815599)，它建议使用`exchange-point-and-mark`重新选择以前选择的区域。但是，我试过了，在这种情况下似乎没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T18:53:11.253

这是您的函数修改为使用`let (deactivate-mark)`Wrapped inside `save-excursion`，如链接到的答案用户 event_jr 中所建议：

[https://stackoverflow.com/a/11080667/903943](https://stackoverflow.com/a/11080667/903943)

```
(defun add-1-to-2-digits (b e)
  "add 1 to every 2 digit number in the region"
  (interactive "r")
  (save-excursion
    (let (deactivate-mark) 
      (goto-char b)
      (while (re-search-forward "\\b[0-9][0-9]\\b" e t)
        (replace-match (number-to-string (+ 1 (string-to-int (match-string 0))))))))) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T16:56:48.487

您需要绑定 deactivate-mark 以防止它被设置见：

[https://stackoverflow.com/a/11080667/903943](https://stackoverflow.com/a/11080667/903943)

手册：[http ://www.gnu.org/software/emacs/manual/html_node/elisp/The-Mark.html#index-deactivate_002dmark-2801](http://www.gnu.org/software/emacs/manual/html_node/elisp/The-Mark.html#index-deactivate_002dmark-2801)

# java - Java如何避免频繁的文件写入

> ID：16001180
> 
> 赞同：0
> 
> 时间：2013-04-14T16:12:03.610
> 
> 标签：java, performance, file-io

我有一个问题：在一个循环中，每次我需要将一个大字符串写入一个文件（或临时文件）时，然后处理将该文件作为下一步的参数。

伴随着一些东西：

```
for(int i=0;i<n;i++){
    File f = File.createTmpFile("xxx","xxx");
    // write into f etc. 
    String result = func(f);
} 
```

由于我认为每次创建文件并将字符串写入其中似乎代价高昂，那么有没有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:15:27.273

如果这些字符串不需要立即保存到文件中，您可以将它们存储在*内存中*，某种集合，例如 ArrayList。并且当列表变得“大”时，例如，每十次，一次将所有十次写入文件。这将文件创建减少了 10 倍。

危险在于，如果发生崩溃，您可能会丢失多达 9 个值。

# ruby-on-rails - 关于 link_to 的简单 Rails 问题

> ID：16001182
> 
> 赞同：0
> 
> 时间：2013-04-14T16:12:16.147
> 
> 标签：ruby-on-rails, link-to

我有看起来像这样的代码，我需要理解：

```
<ul class="dropdown-menu">
    <li><%= link_to  t('menubar.yes.okay') , admin_ok_path %></li>
</ul> 
```

在这段代码中，它是什么`menubar.yes.okay`以及在哪里定义？同样，在哪里`admin_ok_path`定义？

我问的原因是因为我想添加另一个菜单栏项。如果我写类似

```
<li><%= link_to  t('menubar.yes.no') , admin_ok_no %></li> 
```

然后我得到一个错误说`admin_ok_no`没有定义。那么，为了设置这个新的菜单栏选项，我需要定义什么？我已经`No: "No"`在我的 中添加了一个`en.yml`，但它仍然是同样的错误。请注意，我已经检查了我的 routes.rb 并且没有定义`admin_ok_path`但是可以正常工作 - 它显示在菜单栏中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:15:41.957

这是动态定义的。如果你跑

```
rake routes 
```

你会得到所有可用的路线，

[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

admin_ok_path 是由 rails 它自己为匹配的路由 admin_ok 定义的路径助手，

如果您从应用程序路由目录运行 rake 路由，您将获得匹配的 admin_ok 路由。

admin_ok_path 将提供一个相对 url，而 admin_ok_url 将为您提供绝对 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:16:10.520

助手`t`，缩写`I18n.t`用于国际化

例如，在 config/en.yml 中，如果您有：

```
menubar:
  yes:
    okay: Okay 
```

这将写“好的”

`admin_ok_path`是为路由路径动态生成的助手。您可以通过运行查看所有这些`rake routes`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T16:17:13.897

`t`是 的缩写`translate`。您会在其中找到本地化文件`config/locales`- 它们基本上是定义字符串的 YAML 文件。[在这里](http://guides.rubyonrails.org/i18n.html)查看更多

该`admin_path_ok`方法是一个返回路径的路由助手。查看您的`config/routes.rb`文件。更多信息[在这里](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T17:55:43.053

'menubar.yes.okay' 可能在 'config/locales/en.yml' 中定义。并将`rake routes | grep admin`为您提供与管理员相关的所有路线。

# maven - 如何在没有 Nexus 的情况下托管 maven repo

> ID：16001183
> 
> 赞同：2
> 
> 时间：2013-04-14T16:12:17.207
> 
> 标签：maven, maven-3

我在 Github 上托管了一些小型开源项目，我想通过 Maven 将其提供给其他人。我有一个可以托管静态文件的小型网络空间。如何创建回购？另外，如果可能的话，我想从那里删除旧快照。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:33:33.953

[标准的 maven 存储库](http://www.theserverside.com/news/1364121/Setting-Up-a-Maven-Repository)实现几乎都是 Tomcat Web 应用程序。他们每个人都应该有一个静态存储库，就像您的[本地存储库](http://www.mkyong.com/maven/where-is-maven-local-repository/)一样。webapp 用于搜索和管理存储在该静态存储库中的工件。

如果您只想通过静态 Web 访问来托管存储库，则必须手动执行管理并提供静态手动生成的 html 页面，其中包含存储库中所有工件的[GAV 坐标](http://maven.apache.org/pom.html#Maven_Coordinates)。除非您提供密码或启用匿名 FTP 访问，否则没有其他用户可以上传到存储库。

如果 maven 在该阶段之前不尝试将任何内容上传到 repo，`deploy`那么这种方法仍然部分可用，因为运行 a`mvn clean deploy`应该会失败。

您可以检查它是否像这样可行（我想您在本地仓库中有这些项目）：

*   将本地存储库文件夹上传到 URL
*   出于测试目的，将您的中央存储库镜像到该 URL
*   尝试使用您的仓库中的依赖项构建您的项目

打开您的[settings.xml](http://maven.apache.org/settings.html)文件并在`<mirrors>`节点下添加：

```
<mirror>
  <url>http://your/url/repo</url>
  <mirrorOf>*</mirrorOf>
</mirror> 
```

看看是否`mvn clean install`成功。请反馈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T18:04:54.450

在这个[SO 答案](https://stackoverflow.com/questions/15876211/share-maven-plugin-with-public/15876923#15876923)中，我概述了我设置所有托管在 Github 中的 OSS 项目的方式。当您想运行 OSS 项目时，实际上有许多免费服务可供您使用。

如果您的插件经过良好测试并有望为其他人带来好处，我建议您将其发布到 Maven Central。您可以将 CloudBee 的 BuildHive 用作免费的 Jenkins CI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-20T22:52:21.573

根据我的经验，静态存储库效果很好。

我将我的本地存储库 scp'd 到一个静态 apache 服务器中。合法的回购。当然不像真正的回购那么容易维护，但如果你已经有了一个普通的香草网络主机，它会便宜很多。

除了正确设置权限（与浏览文件夹所需的权限相同）之外，这是一个非常轻松的过程。

为了使它更合理，我做的唯一两件事是 1 - 在我本地 repo 的大部分内容上写了一个脚本来“rm -rf ....”，所以我唯一要部署的是那些少数的工件在一般回购中不可用。2 - 在连接到我的网络主机之前先把它涂上焦油。

希望这可以帮助。

下面的人做了类似的事情，只使用 FTP，如果他经常更新他的二进制文件，这可以为他节省大量的手工工作。

[http://stuartsierra.com/2009/09/08/run-your-own-maven-repository](http://stuartsierra.com/2009/09/08/run-your-own-maven-repository)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T14:45:58.113

我想我现在知道该怎么做了。我现在使用`mvn deploy`在文件系统上创建本地存储库，然后将其上传到网络服务器。如果我没记错的话，甚至不需要文件列表。

我正在使用的命令是：

`mvn deploy -DaltDeploymentRepository=local::default::file:./repo`

这会自动创建/更新本地存储库，因此可以将存储库与服务器同步。

# visual-studio - 用户控件找不到设计数据文件？

> ID：16001185
> 
> 赞同：0
> 
> 时间：2013-04-14T16:12:26.430
> 
> 标签：visual-studio, windows-phone-7, xaml

我有以下内容，它指出它找不到我的 .xaml 文件：

```
<UserControl x:Class="MyApp.RectangleTest"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    d:DesignHeight="150" d:DesignWidth="130"
    d:DataContext="{d:DesignData SampleData/RectangleSampleData.xaml}"> 
```

所以它说它找不到 RectangleSampleData.xaml，但是如果我从错误框中获取 url 并粘贴到我的运行命令中，它会打开文件，那么 Visual Studio 是什么？

# list - MIT 方案列表按升序排序

> ID：16001187
> 
> 赞同：0
> 
> 时间：2013-04-14T16:13:03.410
> 
> 标签：list, sorting, scheme, procedure

我正在参加与麻省理工学院计划有关的编程课程的练习考试。其中一个问题是：

“完成过程（按顺序 ls）以返回列表 ls，除了在第一个不*严格大于*ls 中的前一个值的值之前停止。换句话说，按顺序应该返回 ls 的部分*从**严格按递增顺序排序**的开头*。假设ls 仅包含非负整数。

然后问题显示了几个示例：

```
(in-order '(1 2 3 4)) ; should return (1 2 3 4)
(in-order '(1 2 3 3 4 5)) ; should return (1 2 3)
(in-order '(3 2)) ; should return (3)
(in-order '(3)) ; should return (3) 
```

这是我尝试的解决方案：

```
(define (in-order ls)
  (cond ((null? ls) ls)
        ((< (car ls) (cadr ls)) 
         (cons (car ls) (cons (in-order (cdr ls)) ())))
        ((>= (car ls) (cadr ls)) (car ls))
        (else "Nothing"))) 
```

它接近于使用第二个和第三个示例，但在第一个和第四个示例中完全失败了。我知道它一直试图传递一个 null 作为参数的一部分，但我不确定如何解决这个问题。除此之外，还有什么我错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:23:57.610

这会让你到达那里：

```
(define (in-order ls)
  (if (null? ls)
      '()
      (let looking ((result (list (car ls))) (ls (cdr ls)))
        (if (or (null? ls) (not (< (car result) (car ls))))
            (reverse result)
            (looking (cons (car ls) result)
                     (cdr ls)))))) 
```

尾递归`looking`总是将最后一个值作为结果`car`。所以停止的比较变成`(not (< (car result) (car ls)))`

在您的代码中，`(cons (in-order ...) ())`几乎肯定是错误的。谓词`(< (car ls) (cadr ls))`将在任何类似的情况下失败`'(3)`- 你需要类似的东西`(null? (cdr ls))`来避免这种情况。

在类似于您的非尾递归算法中，它将是：

```
(define (in-order ls)
  (cond ((or (null? ls) (null? (cdr ls))) ls)     ; nothing left
        ((< (car ls) (cadr ls))                   ; extend and continue
         (cons (car ls) (in-order (cdr ls))))
        (else (list (car ls)))))                  ; last one 
```

# javascript - jasmine-fixtures - 从未见过的 DOM 变化

> ID：16001190
> 
> 赞同：1
> 
> 时间：2013-04-14T16:13:14.630
> 
> 标签：javascript, unit-testing, dom, jasmine, fixtures

我有两个 RequireJS 模块，一个用于从外部服务获取数据，一个负责将回调传递给第一个模块。

这是第一个非常基本的模块：

```
define(["jquery"], function($) {

    return {
        /**
         * Retrieves all the companies that do not employs the provided employee
         * @param employeeId ID of the employee
         * @param successCallback callback executed on successful request completion
         * @return matching companies
         */
        fetchCompanies: function(employeeId, successCallback) {
            var url = '/employees/' + employeeId + '/nonEmployers';
            return $.getJSON(url, successCallback);
        }
    };
}); 
```

最有趣的是，它将生成一个新的下拉菜单并将其注入指定的 DOM 元素（**这是正在测试的**元素）：

```
define([
    'jquery',
    'vendor/underscore',
    'modules/non-employers',
    'text!tpl/employeeOption.tpl'], function($, _, nonEmployers, employeeTemplate) {

    var updateCompanies = function(selectedEmployeeId, companyDropDownSelector) {
        nonEmployers.fetchCompanies(selectedEmployeeId, function(data) {
            var template = _.template(employeeTemplate),
                newContents = _.reduce(data, function(string,element) {
                    return string + template({
                        value: element.id,
                        display: element.name
                    });
                }, "<option value='-1'>select a client...</option>\n");
            $(companyDropDownSelector).html(newContents);
        });
    };

    return {
        /**
         * Updates the dropdown identified by companyDropDownSelector
         * with the companies that are non employing the selected employee
         * @param employeeDropDownSelector selector of the employee dropdown
         * @param companyDropDownSelector selector of the company dropdown
         */
        observeEmployees: function(employeeDropDownSelector, companyDropDownSelector) {
            $(employeeDropDownSelector).change(function() {
                var selectedEmployeeId = $(employeeDropDownSelector + " option:selected").val();
                if (selectedEmployeeId > 0) {
                    updateCompanies(selectedEmployeeId, companyDropDownSelector);
                }
            });
        }
    };
}); 
```

我正在尝试使用 Jasmine-fixtures 和使用 waitsFor 来测试最后一个模块，以异步检查设置测试 DOM 结构是否已被修改。但是，总是会达到超时。

如果您能在以下测试中发现问题所在，我将不胜感激（要点：[https](https://gist.github.com/fbiville/6223bb346476ca88f55d) ://gist.github.com/fbiville/6223bb346476ca88f55d ）：

```
define(["jquery", "modules/non-employers", "modules/pages/activities"], function($, nonEmployers, activities) {
    describe("activities test suite", function() {
        var $form, $employeesDropDown, $companiesDropDown;

        beforeEach(function() {
            $form = affix('form[id=testForm]');
            $employeesDropDown = $form.affix('select[id=employees]');
            $employeesDropDown.affix('option[selected=selected]');
            $employeesDropDown.affix('option[value=1]');
            $companiesDropDown = $form.affix('select[id=companies]');
            $companiesDropDown.affix('option');
        });

        it("should update the company dropdown", function() {
            spyOn(nonEmployers, "fetchCompanies").andCallFake(function(employeeId, callback) {
                callback([{id: 42, name: "ACME"}, {id: 100, name: "OUI"}]);
            });

            activities.observeEmployees('#employees', '#companies');
            $('#employees').trigger('change');

            waitsFor(function() {
                var companiesContents = $('#companies').html(),
                    result = expect(companiesContents).toContain('<option value="42">ACME</option>');

                return result && expect(companiesContents).toContain('<option value="100">OUI</option>');
            }, 'DOM has never been updated', 10000);
        });
    });
}); 
```

提前致谢！

罗尔夫

PS：用 domReady 替换`$(employeeDropDownSelector).change`和`$(employeeDropDownSelector).on('change',`/或包装`activities.observeEmployees`调用（和`$('#employees').trigger('change');`）会产生相同的结果

PPS：这个错误是原因 -> `SEVERE: runtimeError: message=[An invalid or illegal selector was specified (selector: '[id='employees'] :selected' error: Invalid selector: *[id="employees"] *:selected).] sourceName=[http://localhost:59811/src/vendor/require-jquery.js] line=[6002] lineSource=[null] lineOffset=[0]`。

PPPS：似乎 HtmlUnit 不支持 CSS3 选择器（WTF？），甚至强制将最新发布的版本作为 jasmine-maven-plugin 依赖项不会改变任何东西......

有没有办法改变 jasmine 插件运行器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:14:39.437

以这种方式创建模块真的很困难。我建议不要使用固定装置，也不要在任何地方实际渲染。相反，使用分离的 DOM 元素来完成所有工作要容易得多。

想象一下，如果你的代码看起来更接近这个：

```
define([
    'jquery',
    'vendor/underscore',
    'modules/non-employers',
    'text!tpl/employeeOption.tpl'], function($, _, nonEmployers, employeeTemplate) {

    return {
        init: function() {
            this.$companies = $('<select class="js-companies"></select>');
        },
        render: function(data) {
            var template = _.template(employeeTemplate),
                newContents = _.reduce(data, function(string,element) {
                    return string + template({
                        value: element.id,
                        display: element.name
                    });
                }, "<option value='-1'>select a client...</option>\n");
            this.$companies.empty().append(newContents);
            return this;
        });
        observeEmployees: function(employeeDropDownSelector) {
            $(employeeDropDownSelector).change(function() {
                var selectedEmployeeId = $(employeeDropDownSelector + " option:selected").val();
                if (selectedEmployeeId > 0) {
                    nonEmployers.fetchCompanies(selectedEmployeeId, function(data) {
                        this.render(data);
                    }
                }
            });
        }
    };
}); 
```

以上不完整。这只是为了让您了解解决问题的另一种方法。现在，您需要做的不是固定装置，而是检查`this.$companies`你会完成的。我认为主要问题是您的功能不够简单。每个功能的关注点应该非常具体。您的 updateCompanies 函数正在执行诸如创建模板、获取数据然后将其传递给无法监视的匿名函数、该匿名函数在对象上迭代、然后更改一些已经存在的 DOM 元素之类的事情。听起来很累。该函数应该做的就是查看一些预编译的模板，向它发送一个对象。模板应该使用 {{each}} 在对象上循环然后返回。然后你的函数清空并附加 newContents 并返回它自己，以便下一个函数可以选择它应该如何处理 this.$companies。或者如果 this.$companies 已经附加到页面上，则根本不需要做任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T17:36:14.627

好了朋友们。

找到的解决方案：

1.  升级（如果尚未）到 jasmine-maven-plugin v1.3.1.1（或更高版本）
2.  [配置 phantomjs](http://searls.github.io/jasmine-maven-plugin/phantomjs.html)而不是这个糟糕的 HtmlUnit（将[PhantomJS 二进制文件](http://phantomjs.org/download.html)添加到您的项目中）
3.  如果您在代码中使用了 ':focus' 选择器，请注意[此错误](https://code.google.com/p/phantomjs/issues/detail?id=427)，请将其替换为`$(mySelector).get(0) == document.activeElement`
4.  另外，不要忘记将代码块包装在`run(function() { /* expect */ })`它们是否位于之后并取决于您的`waitsFor`条件。

最后，一切都应该很好。

看看现在测试如何：

```
define(["jquery",
    "modules/nonEmployers",
    "modules/pages/activities"], function($, nonEmployers, activities) {

    describe("activities test suite", function() {
        var $form, $employeesDropDown, $companiesDropDown;

        beforeEach(function() {
            $form = affix('form[id=testForm]');
            $employeesDropDown = $form.affix('select[id=employees]');
            $employeesDropDown.affix('option[selected=selected]');
            $employeesDropDown.affix('option[value=1]');
            $companiesDropDown = $form.affix('select[id=companies]');
            $companiesDropDown.affix('option');

            spyOn(nonEmployers, "fetchCompanies").andCallFake(function(employeeId, callback) {
                callback([{id: 42, name: "ACME"}, {id: 100, name: "OUI"}]);
            });
        });

        it("should update the company dropdown", function() {

            $(document).ready(function() {
                activities.observeEmployees('#employees', '#companies');
                $('#employees option[selected=selected]').removeAttr("selected");
                $('#employees option[value=1]').attr("selected", "selected");
                $('#employees').trigger('change');

                waitsFor(function() {
                    var dropDown = $('#companies').html();
                    return dropDown.indexOf('ACME') > 0 && dropDown.indexOf('OUI') > 0;
                }, 'DOM has never been updated', 500);

                runs(function() {
                    var dropDown = $('#companies').html();
                    expect(dropDown).toContain('<option value="42">ACME</option>');
                    expect(dropDown).toContain('<option value="100">OUI</option>');
                });
            });
        });
    });
}); 
```

# ruby-on-rails-3 - 未为 Users::OmniauthCallbacksController 找到操作“google”

> ID：16001191
> 
> 赞同：0
> 
> 时间：2013-04-14T16:13:24.350
> 
> 标签：ruby-on-rails-3, devise, omniauth

我正在使用omniauth-google 登录gmail。这是给我一个错误操作“google”找不到。虽然我已经在“Users::OmniauthCallbacksController”中定义了它，如下所示。

```
 def google
    end 
```

我的路线文件中的这段代码

```
devise_for :users, :controllers => {
  :omniauth_callbacks => "users/omniauth_callbacks"

} 
```

我不明白的问题是什么？

你能帮忙吗？

链接用 google 登录到这里“localhost:3000/users/auth/google”。然后我在屏幕截图中授予了这样的访问权限。

![在此处输入图像描述](https://i.stack.imgur.com/ROmV1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:57:53.513

使用 google_oauth2 而不是 google oauth。

宝石

```
gem 'omniauth-google-oauth2' 
```

设计.rb

```
config.omniauth :google_oauth2, "APP_ID", "APP_SECRET" 
```

OmniauthCallbacksController

```
def google_oauth2 
```

# java - 如何在横向和纵向模式下启动相同的活动？

> ID：16001198
> 
> 赞同：0
> 
> 时间：2013-04-14T16:14:09.417
> 
> 标签：java, android

我有一个弹出窗口，我想在两个不同的活动中使用它。问题是一项活动处于横向模式，而另一项活动处于纵向模式。我知道我可以为这些活动制作两个不同的弹出窗口，但我想知道是否有办法让相同的布局在我从横向活动启动时以横向模式启动，当我从纵向活动启动时也以纵向模式启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:59:30.887

Create a landscape and a portrait version of the xml for the layout. Put the portrait in the layouts folder, and the landscape in layout-land. Make them have the same name. Then when you ask to inflate that layout it will automatically pick the correct orientation.

# asp.net-mvc-3 - 通过 html.actionlink 将下拉列表选择的值传递给控制器

> ID：16001202
> 
> 赞同：0
> 
> 时间：2013-04-14T16:14:21.123
> 
> 标签：asp.net-mvc-3, html.dropdownlistfor

我想通过 Html.ActionLink 方法将模型和下拉列表中选择的值/项目中的一些值传递到控制器中，但找不到任何合适的方法。我在下面给出我的代码 -

看法：

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <div class="row">
            <div class="span3">
                <div class="text-left">@Html.LabelFor(model => model.EntryId)</div>
            </div>
            <div class="span3">
                <div class="text-left">
                    @Html.DisplayFor(model => model.EntryId)
                    @Html.HiddenFor(model => model.EntryId)
                </div>
            </div>
            <div class="span3">
                <div class="text-left">@Html.LabelFor(model => model.EntryDate)</div>
            </div>
            <div class="span3">
                <div class="text-left">
                    @Html.DisplayFor(model => model.EntryDate)
                </div>
            </div>
        </div>
    </fieldset>
    <fieldset>
        <legend>Check Information</legend>
        <div class="row">
            <div class="span3">
                <div class="text-left">@Html.LabelFor(model => model.Check.CheckId)</div>
            </div>
            <div class="span3">
                <div class="text-left">
                    @Html.DisplayFor(model => model.Check.CheckId)
                    @Html.HiddenFor(model => model.Check.CheckId)
                </div>
            </div>
            <div class="span3">
                <div class="text-left">@Html.LabelFor(model => model.Check.CheckTitle)</div>
            </div>
            <div class="span3">
                <div class="text-left">@Html.DisplayFor(model => model.Check.CheckTitle)</div>
            </div>
        </div>
    </fieldset>
    <fieldset>
        <legend>Comments</legend>
        <div class="span4">
            @Html.ActionLink("Add Comment", "AddComment", new { Model.EntryId }) &nbsp;
            @Html.ActionLink("View All Comments", "ViewAllComments", new { Model.Check.CheckId })
        </div>
        <div>
            <table class="table table-bordered">
                <tr>
                    <th>
                        Serial
                    </th>
                    <th>
                        Comment
                    </th>
                    <th>
                        Date
                    </th>
                    <th>
                        Status
                    </th>
                    <th>
                    </th>
                </tr>
                @for (int i = 0; i < Model.CheckCommentsList.Count; i++)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => Model.CheckCommentsList[i].Serial)
                            @Html.HiddenFor(modelItem => Model.CheckCommentsList[i].Serial)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => Model.CheckCommentsList[i].Comment)
                            @Html.HiddenFor(modelItem => Model.CheckCommentsList[i].Comment)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => Model.CheckCommentsList[i].CommentDate)
                            @Html.HiddenFor(modelItem => Model.CheckCommentsList[i].CommentDate)
                        </td>
                        <td>
                            @Html.DropDownListFor(modelItem => Model.CheckCommentsList[i].CommentStatus, new SelectList(Model.CommentStatusList, Model.CheckCommentsList[i].CommentStatus.ToString()), new {@id="ddlCommentStatus"})
                            @Html.ValidationMessageFor(model => Model.CheckCommentsList[i].CommentStatus)
                            @*@Html.HiddenFor(modelItem => Model.CheckCommentsList[i].CommentStatus)*@
                        </td>
                        <td>
                            @Html.ActionLink("Update Status", "UpdateCommentStatus", new { Model.EntryId, Model.CheckCommentsList[i].Serial, Model.CheckCommentsList[i].CommentStatus, Model.Check.CheckId })|
                            @Html.ActionLink("Delete", "DeleteComment", new { Model.CheckCommentsList[i].Serial, Model.EntryId })
                        </td>
                    </tr>
                }
            </table>
        </div>

    </fieldset>
}
<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

控制器：

```
public ActionResult UpdateCommentStatus(string entryId, int serial, string status, string checkId)
{
    var securityInformation = new SecurityInformation();
    securityInformation.MemberId = (string)Session["MemberId"];

    if (string.IsNullOrEmpty(securityInformation.MemberId))
    {
        return RedirectToAction("LogIn", "MemberLogIn");
    }

    var commentStatus = (CommentStatus)Enum.Parse(typeof (CommentStatus), status);
    new CheckDataManager().UpdateCheckDataCommentStatus(entryId, serial, commentStatus);

    return RedirectToAction("ViewAllComments", new { checkId });
} 
```

请注意，CommentStatus 是一个枚举。对于控制器中的状态变量，我总是为空。谁能告诉我这样做的方法。如果 JQuery 是解决方案，那么请举一个例子，因为我是 JQuery 的新手。

# php - 设置 Excel 文件下载标题的路径时出错

> ID：16001204
> 
> 赞同：0
> 
> 时间：2013-04-14T16:14:25.123
> 
> 标签：php, header

我有以下代码：

```
$objWriter = new PHPExcel_Writer_Excel2007($excel);    
$objWriter->save("uploads/".$excel_file);
header('Content-type: application/vnd.ms-excel');
header('Content-Disposition: attachment; filename="uploads/'.$excel_file.'"');
header("Pragma: no-cache");
header("Expires: 0"); 
```

该文件确实在“上传”目录中，但我无法在这行代码中正确链接它：`header('Content-Disposition: attachment; filename="uploads/'.$excel_file.'"');`

关于如何设置路径以下载正确文件的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:47:35.840

将该行替换为

```
header("Content-Disposition: attachment; filename=uploads/".$excel_file.";"); 
```

最后，添加以下行

```
readfile($excel_file);
exit; 
```

# php - PHP 页面未接收 jQuery/Ajax POST 变量

> ID：16001207
> 
> 赞同：0
> 
> 时间：2013-04-14T16:14:26.513
> 
> 标签：php, jquery, ajax, post

我有一个非常简单的注册表。表单与 jQuery/Ajax 一起发送到 PHP 页面进行处理。我在整个应用程序中到处都使用这个相同的代码，但出于某种原因，在这一页上，它只是不起作用，我试图找出问题所在。这个页面没有什么特别的，它在同一个域上，所以我在这里不知所措......

提交表单时，以下 jQuery 函数处理表单：

```
var dataString = $(event.target).serialize();
var url = '/post/register.php';

console.log( dataString ); // OUTPUTS firstname=Andrew&email=me@email.com

$.ajax({
        type: "POST",
    url: url,
    data: dataString,
    dataType: "text",
    error: function(jqXHR,textStatus,errorThrown) {
        // ERROR
    },
    success: handleRegistration
}); 
```

控制台显示表单中的数据已正确序列化。

在 PHP 页面 (register.php) 上，我只有以下代码：

```
$newArr[]= array('email'=>$_POST['email'], 'firstname'=>$_POST['firstname']);

ob_start();
print_r($newArr);   
$c=ob_get_contents();
ob_end_clean();             
$fp=fopen('test.txt', "wb");
fwrite($fp, $c);
fclose($fp); 
```

这只是将 POST 变量写入名为“test.txt”的 TXT 文件。文本文件显示变量为空：

```
Array
(
    [0] => Array
        (
            [firstname] => 
            [email] => 
        )

) 
```

我一生都无法弄清楚为什么它没有收到 POST vars。

任何人？

*** 回答 *** 我出于演示目的更改了上面的网址，但在我的应用程序中，网址是：

```
var url = '/post/register'; 
```

并且注册文件夹中有一个“index.php”文件。

表单被发送到 PHP 页面，但是因为我错过了尾随的“/”，查询字符串没有正确发送。所以我的问题的答案是简单地将网址更改为：

```
var url = '/post/register/'; 
```

对我来说这是一个多么愚蠢的错误 - 花了太长时间才弄清楚：S

# javascript - 如何让我的文本标签始终面向相机？也许使用精灵？

> ID：16001208
> 
> 赞同：6
> 
> 时间：2013-04-14T16:14:29.980
> 
> 标签：javascript, three.js

我在看两个例子，一个是画布交互对象，另一个是鼠标工具提示。我尝试将两者结合起来在每个单独的立方体上生成文本标签，这就是我目前所拥有的。

但是，文本会随着旋转的立方体移动，并且文本有时会向后或侧向显示。

如何使文本像鼠标工具提示（[http://stemkoski.github.io/Three.js/Mouse-Tooltip.html](http://stemkoski.github.io/Three.js/Mouse-Tooltip.html)）示例中那样固定在精灵中？我试图合并精灵，但我不断收到错误。我不知道该怎么做。你能解释一下我该怎么做吗？

谢谢。

到目前为止，这是我的代码：

```
<!DOCTYPE html>
<html lang="en">
    <head>
            <title>three.js canvas - interactive - cubes</title>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
            <style>
                    body {
                            font-family: Monospace;
                            background-color: #f0f0f0;
                            margin: 0px;
                            overflow: hidden;
                    }
            </style>
    </head>
    <body>

            <script src="js/three.min.js"></script>

            <script src="js/stats.min.js"></script>

            <script>

                    var container, stats;
                    var camera, scene, projector, renderer;
                    var projector, mouse = { x: 0, y: 0 }, INTERSECTED;
                    var particleMaterial;
                    var currentLabel = null;

                    var objects = [];

                    init();
                    animate();

                    function init() {

                            container = document.createElement( 'div' );
                            document.body.appendChild( container );

                            var info = document.createElement( 'div' );
                            info.style.position = 'absolute';
                            info.style.top = '10px';
                            info.style.width = '100%';
                            info.style.textAlign = 'center';
                            info.innerHTML = '<a href="http://threejs.org" target="_blank">three.js</a> - clickable objects';
                            container.appendChild( info );

                            camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 10000 );
                            camera.position.set( 0, 300, 500 );

                            scene = new THREE.Scene();

                            var geometry = new THREE.CubeGeometry( 100, 100, 100 );

                            for ( var i = 0; i < 10; i ++ ) {

                                    var object = new THREE.Mesh( geometry, new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff, opacity: 0.5 } ) );
                                    object.position.x = Math.random() * 800 - 400;
                                    object.position.y = Math.random() * 800 - 400;
                                    object.position.z = Math.random() * 800 - 400;

                                    object.scale.x = Math.random() * 2 + 1;
                                    object.scale.y = Math.random() * 2 + 1;
                                    object.scale.z = Math.random() * 2 + 1;

                                    object.rotation.x = Math.random() * 2 * Math.PI;
                                    object.rotation.y = Math.random() * 2 * Math.PI;
                                    object.rotation.z = Math.random() * 2 * Math.PI;

                                    object.label = "Object " + i;

                                    scene.add( object );

                                    objects.push( object );

                            }

                            var PI2 = Math.PI * 2;
                            particleMaterial = new THREE.ParticleCanvasMaterial( {

                                    color: 0x000000,
                                    program: function ( context ) {

                                            context.beginPath();
                                            context.arc( 0, 0, 1, 0, PI2, true );
                                            context.closePath();
                                            context.fill();

                                    }

                            } );

                            projector = new THREE.Projector();

                            renderer = new THREE.CanvasRenderer();
                            renderer.setSize( window.innerWidth, window.innerHeight );

                            container.appendChild( renderer.domElement );

                            stats = new Stats();
                            stats.domElement.style.position = 'absolute';
                            stats.domElement.style.top = '0px';
                            container.appendChild( stats.domElement );

                            document.addEventListener( 'mousedown', onDocumentMouseDown, false );

                            //

                            window.addEventListener( 'resize', onWindowResize, false );

                    }

                    function onWindowResize() {

                            camera.aspect = window.innerWidth / window.innerHeight;
                            camera.updateProjectionMatrix();

                            renderer.setSize( window.innerWidth, window.innerHeight );

                    }

                    function onDocumentMouseDown( event ) {

                            event.preventDefault();

                            var vector = new THREE.Vector3( ( event.clientX / window.innerWidth ) * 2 - 1, - ( event.clientY / window.innerHeight ) * 2 + 1, 0.5 );
                            projector.unprojectVector( vector, camera );

                            var raycaster = new THREE.Raycaster( camera.position, vector.sub( camera.position ).normalize() );

                            var intersects = raycaster.intersectObjects( objects );

                            if ( intersects.length > 0 ) {

                            if ( intersects[ 0 ].object != INTERSECTED ) 
                                            {

                                             // restore previous intersection object (if it exists) to its original color
                                            if ( INTERSECTED ) {

                                            INTERSECTED.material.color.setHex( INTERSECTED.currentHex ); } 

                                            // store reference to closest object as current intersection object
                                            INTERSECTED = intersects[ 0 ].object;
                                            // store color of closest object (for later restoration)
                                            INTERSECTED.currentHex = INTERSECTED.material.color.getHex();
                                            // set a new color for closest object
                                            INTERSECTED.material.color.setHex( 0xffff00 );

                                            var canvas1 = document.createElement('canvas');
                                            var context1 = canvas1.getContext('2d');
                                            context1.font = "Bold 40px Arial";
                                            context1.fillStyle = "rgba(255,0,0,0.95)";
                                            context1.fillText(INTERSECTED.label, 0, 50);

                                            // canvas contents will be used for a texture
                                            var texture1 = new THREE.Texture(canvas1) 
                                            texture1.needsUpdate = true;

                                            var material1 = new THREE.MeshBasicMaterial( {map: texture1, side:THREE.DoubleSide } );
                                            material1.transparent = true;

                                            var mesh1 = new THREE.Mesh(
                                            new THREE.PlaneGeometry(canvas1.width, canvas1.height),
                                            material1

                                    );
                                            mesh1.position = intersects[0].point;
                                            if (currentLabel)
                                                    scene.remove(currentLabel);
                                            scene.add( mesh1 );                             
                                            currentLabel = mesh1;
                            } 

                            else // there are no intersections
                                            {
                                    // restore previous intersection object (if it exists) to its original color
                                    if ( INTERSECTED ) {
                                            console.log("hello");
                                            INTERSECTED.material.color.setHex( INTERSECTED.currentHex );
                                            }
                                            // remove previous intersection object reference
                                            //     by setting current intersection object to "nothing"
                                            INTERSECTED = null;
                                            mesh1 = null; 
                                            mesh1.position = intersects[0].point; 
                                            scene.add( mesh1 );

                                            }

                                    //var particle = new THREE.Particle( particleMaterial );
                                    //particle.position = intersects[ 0 ].point;
                                    //particle.scale.x = particle.scale.y = 8;
                                    //scene.add( particle );

                            }

                            /*
                            // Parse all the faces
                            for ( var i in intersects ) {

                                    intersects[ i ].face.material[ 0 ].color.setHex( Math.random() * 0xffffff | 0x80000000 );

                            }
                            */

                    }

                    //

                    function animate() {

                            requestAnimationFrame( animate );

                            render();
                            stats.update();

                    }

                    var radius = 600;
                    var theta = 0;

                    function render() {

                            theta += 0.1;

                            camera.position.x = radius * Math.sin( THREE.Math.degToRad( theta ) );
                            camera.position.y = radius * Math.sin( THREE.Math.degToRad( theta ) );
                            camera.position.z = radius * Math.cos( THREE.Math.degToRad( theta ) );
                            camera.lookAt( scene.position );

                            renderer.render( scene, camera );

                    }

            </script>

    </body> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T17:48:54.923

广告牌很容易。在你的情况下，你所要做的就是在你的渲染循环中添加这个：

```
if ( currentLabel ) currentLabel.lookAt( camera.position ); 
```

# c++ - 需要帮助理解返回引用的函数

> ID：16001210
> 
> 赞同：0
> 
> 时间：2013-04-14T16:14:47.793
> 
> 标签：c++, function, reference

和有什么区别

**教科书上写的是什么：**

```
MyClass& Myclass::operator++() {
  do something
  return *this;
} 
```

和

```
MyClass Myclass::operator++() {
  do something
  return *this;
} 
```

`*`意思是“指向的值” ....

是不是第二个示例将返回 this 指向的对象的副本（*this 的副本），而第一个示例将返回 *this 本身？

如果是这种情况，那么它有什么区别？提高执行时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:18:13.563

两者的区别在于

情况 1

> 您正在返回一个引用，即您正在返回一个指向该对象的常量指针。

情况 2

> 您正在创建一个新对象并返回该对象

让我们深入挖掘以更好地理解事物

情况 1

> 因为您要返回指向现有对象的指针，所以您所做的任何更改都会影响原始对象

情况 2

> 因为它是一个副本，所以对原始对象没有影响

在速度和内存方面

1的情况下

> 由于您返回现有对象的地址，因此没有或很少有开销

情况 2

> 您正在创建一个新副本...因此将调用对象的构造函数，因此在内存和时间方面存在开销

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:17:42.950

第二个版本将复制`MyClass`对象（即`*this`）。第一个将仅返回对它的引用。

并不是说任何一个都是“正确的”——而是它们有不同的含义。有时您想克隆一个对象，以便拥有两个（可能）独立的副本。有时您想共享一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T17:00:19.337

正如您在答案中已经提到的那样，第一个返回参考，第二个正在制作副本。主要区别在于语义完全不同，请考虑：

```
const auto & r = ++a;
++a;
assert(a == r);    // true/false depending on what is returned 
```

在前缀的特殊情况下`operator++`，正确的语义（大多数用户期望的）是产生一个引用。做任何其他事情都会引起混乱，并可能最终成为源代码中错误的根源。

在更一般的问题中，如果函数没有预定义的预期语义，则在使用方面的差异仍然是相同的。如果复制（对于那些复制可能很昂贵的类型），成本会更高，但是如果需要引用语义，则需要产生引用，如果需要复制语义，则需要按值返回 no不管那有多便宜/贵。

请注意，关于成本，它可能低于您的预期，具体取决于您实际在做什么。如果调用者要使用 return 来初始化一个新对象，那么成本可能与 RVO 将启动并删除不必要的额外副本相同。

# lucene - 如何识别文本中的标签

> ID：16001212
> 
> 赞同：0
> 
> 时间：2013-04-14T16:14:51.200
> 
> 标签：lucene

我正在尝试识别文本中的预定义标签。

标签可能是 * 手术

*   手
*   妇科
*   眼科
*   手外科
*   节肢动物传播的病毒性发热和病毒性出血热

ETC

我现在正在做的是从文本中检索术语向量并针对标签索引运行个体。我有以下问题

*   如果我使用带有通配符的关键字查询，我会得到很多不相关的命中。例如，文本包含 John wasborne with a growth on his .... 将匹配“节肢动物传播的病毒性发热和病毒性出血热”

*   如果我使用词组搜索，这个问题就解决了，但现在标签“手外科”将不匹配，因为这些术语只包含单个单词。

我只是想知道是否有更好的方法来解决这个问题。我最初针对索引文本循环了所有可用的标签，这些标签运行良好，但性能非常密集。

# python - Pyvot 需要 Visual Studio 吗？

> ID：16001213
> 
> 赞同：2
> 
> 时间：2013-04-14T16:14:57.277
> 
> 标签：python, excel

可能是一个愚蠢的问题，但经过大量搜索，我还没有找到明确的答案。该[网站](http://pytools.codeplex.com/wikipage?title=Pyvot)称

> Pyvot 需要安装了 Python for Windows 扩展 (pywin32) 的 CPython 2.6 或 2.7，以及 Office 2010。

虽然没有提到 Visual Studio，但由于该页面的标题是“Visual Studio 的 Python 工具”，因此可以很好地假设。如果有人*在*没有 VS 的情况下成功运行它，我很想知道（我目前没有 Office 2010，或者我自己尝试一下）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T20:55:35.913

我设法获得了 Office 2010，并且可以确认 Pyvot 不需要 Visual Studio 甚至不需要 Visual Studio 的 Python 工具。

[编辑：虽然我没有进行广泛的测试，但它似乎与 Office 2003 一起工作得很好！]

# c++ - 使用 Crypto++ 就地 AES CBC/ECB 模式加密/解密

> ID：16001214
> 
> 赞同：3
> 
> 时间：2013-04-14T16:15:10.490
> 
> 标签：c++, aes, crypto++

使用 Crypto++（假设缓冲区大小足以容纳加密数据）在 CBC 和 ECB 模式下执行 AES 加密/解密时，是否明确允许对明文/密文使用相同的缓冲区，如以下代码所示：

```
#include <cstdio>
#include <cassert>
#include "cryptopp\rsa.h"
#include "cryptopp\rijndael.h"
#include "cryptopp\modes.h"
int main()
{
    using namespace CryptoPP;
    byte key[32], iv[Rijndael::BLOCKSIZE];
    char testdata[] = "Crypto++ Test"; // any data can be here

    size_t buffer_size = (sizeof(testdata) + Rijndael::BLOCKSIZE) & ~(Rijndael::BLOCKSIZE - 1);
    byte* buffer = new byte[buffer_size];
    memcpy(buffer, testdata, sizeof(testdata));

    // encrypt data inplace
    CBC_Mode<Rijndael>::Encryption enc(key, sizeof(key), iv);
    MeterFilter meter(new ArraySink(buffer, buffer_size));
    ArraySource(buffer, sizeof(testdata), true, new StreamTransformationFilter(enc, new Redirector(meter), BlockPaddingSchemeDef::PKCS_PADDING));
    assert(meter.GetTotalBytes() == buffer_size);

    // decrypt data inplace
    CBC_Mode<Rijndael>::Decryption dec(key, sizeof(key), iv);
    MeterFilter meter2(new ArraySink(buffer, buffer_size));
    ArraySource(buffer, buffer_size, true, new StreamTransformationFilter(dec, new Redirector(meter2), BlockPaddingSchemeDef::PKCS_PADDING));
    assert(meter2.GetTotalBytes() == sizeof(testdata));

    printf("%s\n", static_cast<char*>(buffer));
    delete buffer;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T06:16:08.250

通常，Crypto++ 缓冲区可以相同，也可以不同。对于纯文本或密文数据的就地或原位处理，我想不出它们不允许相同的情况。唯一需要注意的是缓冲区必须足够大以进行密文扩展。

您还必须小心重叠，但如何陷入困境取决于密码。例如，`AES`in`CBC_Mode`对 16 字节块进行操作（感兴趣的函数是`ProcessBlock`、`ProcessXorBlock`和朋友）。只要指针之间的差异为 17 个字节（或更多），就可以使用重叠缓冲区。在 RSA 情况下，您可能需要不同的`MaxPreImage`大小，这取决于模数的大小。

最后，旧的 Crypto++ FAQ 将其简要讨论为“在线处理”。请参阅[如何在 Crypto++ 4.x 中使用分组密码？](http://www.cryptopp.com/fom-serve/cache/42.html)

# javascript - 使用 .get 获取内容后的 jQuery .hover

> ID：16001216
> 
> 赞同：0
> 
> 时间：2013-04-14T16:15:29.737
> 
> 标签：javascript, jquery, html

好的，所以我已经制作了一个功能的静态版本，它工作正常。当用户将鼠标悬停在 div 上时，内容会在图片上滚动到其中。

现在我需要其中的多个，可以通过标签访问。为了节省加载时间，这些选项卡中的内容（静态版本的副本）通过来自另一个 html 文件的 .get 引入。

我的单独 html 文件的结构与正在工作的默认选项卡相同，我将鼠标悬停在页面加载时的一个统计信息上，它可以工作，一旦我更改选项卡，旧内容就会淡出，新内容也会淡出我正确。所有的类名都与结构相同，但是当我将鼠标悬停在这些被引入的元素上时，它们都没有运行。

我是否必须为 .hover 做一些特别的事情才能处理页面加载后通过 .get 动态引入的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:23:05.130

使用这样的东西：

```
$("#tabs_content_container").on({
    mouseenter: function (e) {

    },
    mouseleave: function (e) {

    }
}, ".target-class"); 
```

您的 HTML 结构类似于：

```
<div id="tabs_container">
    <ul>
        <li><a href="asdf.html">Tab 1</a></li>
        <li><a href="asdf2.html">Tab 2</a></li>
    </ul>

    <div id="tabs_content_container">

    </div>
</div> 
```

并且您的代码已经在执行以下操作：

```
$("#tabs_container").on("click", function () {
    $.get($(this).attr("href"), function (data) {
        $("#tabs_content_container").html(data);
    });
}); 
```

参考：

*   [http://api.jquery.com/on/#direct-and-delegated-events](http://api.jquery.com/on/#direct-and-delegated-events)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:17:41.137

您需要使用事件委托。[在此处](http://api.jquery.com/on/)阅读“直接和委托事件”部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T16:20:04.083

是的，您必须在 get 方法回调后实例化悬停。

# android - 在智能手机上查看来自 Raspberry Pi 的媒体

> ID：16001221
> 
> 赞同：0
> 
> 时间：2013-04-14T16:15:58.457
> 
> 标签：android, smartphone

我对这个话题很陌生，所以我的问题更具理论性。

我尝试在 Raspberry Pi 和智能手机之间建立无线连接，以查看不同类型的媒体（文本、图片和视频）。我有一些关于这在理论上是否以及如何工作的问题。

Raspberry Pi 是否可以在“待机模式”下工作，直到客户端设备靠近/激活它？

关于 Raspberry 作为服务器并能够通过 WiFi 与其他设备通信，我需要了解哪些事情？为此我应该使用什么样的软件？

是否可以在没有智能手机（即网络浏览器）上的单个应用程序的情况下查看 Raspberry Pi 的文件结构？

在测试概念的情况下，我应该使用哪种工具来测试连接的相对简单的方法？帽子领域是否已经存在（开源）项目？

将不胜感激所有/任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-25T19:12:26.993

我想这取决于您最熟悉哪种技术。您只需要记住您正在使用 RPI，因此最好不要推送它并在其上运行您的全部堆栈。您始终可以使用[Node.js](http://nodejs.org/)之类的东西并在板上运行一个微型服务器/API，设备连接到该服务器/API。但是，有一些有趣的解决方案可以作为某种“中间件”工作，并允许您将大量计算甚至开发工作卸载给第三方。

如果您并不真正关心“拥有”设置并且不想浪费时间旋转整个堆栈，您可以尝试[Muzzley 之](http://www.muzzley.com/)类的东西。它还需要您在 RPI 上运行软件（尽管它本身不是一个完整的堆栈），但大多数通信和接口配置都是现成的。它提供了一个适当的协议和一个组件库，您可以从一开始就使用它。另一方面，它足够灵活，可以让您推出自己的组件。

我不相信它会直接帮助您解决您的特定问题（待机模式、附近设备检测或文件系统访问） - 这应该由您自己的应用程序和软件堆栈解决 - 但它会为您节省大量时间通用的东西，让你只关注那些问题。

全面披露：我是 Muzzley 团队的一员。

# javascript - 使用按钮随机播放一系列照片

> ID：16001223
> 
> 赞同：0
> 
> 时间：2013-04-14T16:16:09.300
> 
> 标签：javascript, jquery, html, image

假设我有 10 张图片，我想以类似 facebook 风格的布局浏览它们，我只需点击一个箭头，它就会带我到下一张。我想我想尝试用 Jquery 或 javascript 来练习。

我该怎么做呢？

我假设在某种程度上它就像“单击此按钮加载下一张图片，并摆脱旧的”。我想这是尝试的一种方式，但你会怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:22:37.567

尝试这样的事情：

```
var images = new Array(//series of image urls);
var index = 0;
$("#buttonid").click(function(){
  index++;
  var nextimage = images[index];
  $("#imageid").attr("src",nextImage);
}); 
```

如果您想要更彻底的解释，请询问。

# java - 将 JPanel 端与另一个 JPanel 中心绑定

> ID：16001225
> 
> 赞同：0
> 
> 时间：2013-04-14T16:16:13.533
> 
> 标签：java, swing, netbeans, user-interface, layout-manager

嗨，我正在为一个项目构建一个 UI，我有一个 JPanel，我想将它分成两个相等的部分。我正在尝试找到一种在大 JPanel 中添加两个小 JPanel 的方法，但我不知道如何将 JPanel 的一侧与较大 JPanel 的中心绑定。任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:02:33.523

> 我正在尝试找到一种在大 JPanel 中添加两个小 JPanel 的方法

在大面板上使用 GridLayout。布局管理器将自动使两个面板大小相同。阅读 Swing 教程中有关[如何使用 GridLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)的部分。

# python - 弹出附加但不从原始列表中删除

> ID：16001227
> 
> 赞同：0
> 
> 时间：2013-04-14T16:16:20.990
> 
> 标签：python, stack

什么会导致 .pop(-1) 命令执行附加但留下项目的副本？在 pop 命令之后，列表中有两个项目的副本，一个在附加位置，一个在 pop from 位置。

```
for i in range(8):
    if Tabloid_face_up[i] != [] and Tabloid_face_up[i][-1][0] == "A":
        for j in range(8,12):
             if Tabloid_face_up[j] == []:
                 Tabloid_face_up[j].append(Tabloid_face_up[i].pop(-1))
                 if Tabloid_face_down[i] != []:
                     Tabloid_face_up[i].append(Tabloid_face_down[i][-1])
                 break 
```

它应该将卡从 i 移动到 j，但我最终在 i 和 j 都得到了它。

# ruby-on-rails - 如何自动在 to_json 中包含所有零参数公共实例方法？

> ID：16001234
> 
> 赞同：0
> 
> 时间：2013-04-14T16:17:01.743
> 
> 标签：ruby-on-rails, ruby, json, metaprogramming

我有以下内容：

```
class Foo

  def bar
    "foobar"
  end

  def baz
    "foobaz"
  end

  def qux(arg)
    ...
  end

end 
```

如何覆盖`as_json`，以便它包含方法的键和值`bar`，`baz`而不是`qux`，而不明确指定它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:27:04.090

你可以这样做：

```
def get_public_methods
   array = self.public_methods(false).delete_if {|meth| Foo.instance_method(meth).arity > 0}.map{|meth| [meth, self.send(meth)]}

   Hash[*array.flatten]
end 
```

这将返回`{:bar=>"foobar", :baz=>"foobaz"}`

然后，调用`get_public_methods`你的`as_json`超载。

# hyperlink - Facebook 中没有缩略图的链接正在加载，并且网站中的链接无法访问

> ID：16001237
> 
> 赞同：0
> 
> 时间：2013-04-14T16:17:16.587
> 
> 标签：hyperlink, facebook-social-plugins

我们来自 Pixorange.com 网站的一些链接正在加载而没有缩略图，而我们尝试在 FB 墙上分享它。此外，我们网站中的 FB 官方插件显示我们的某些 URL 无法访问。我们确实联系了服务器支持，他们告诉我们一切都很好。

这是一个间歇性问题，某些链接可以正常工作，而其他链接则无法正常工作。这给我们带来了问题，我们无法在 Facebook 上推广我们的业务。

这些是我们无法在 FB 状态下加载的链接，链接会不断变化：

[http://pixorange.com/rajiv-gandhi-was-entrepreneur-for-swedish-jet](http://pixorange.com/rajiv-gandhi-was-entrepreneur-for-swedish-jet)

[http://pixorange.com/urinal-dedicated-to-politician-ajit-pawar-by-opponents](http://pixorange.com/urinal-dedicated-to-politician-ajit-pawar-by-opponents)

此外，在某些链接上，标题不会被提取，并且 URL 会被替换。这对我们来说将是一个严重的问题。请帮助我们解决这个问题。

**重现步骤：**以下是重现问题的步骤：

1.  转到下面的链接
2.  选择以上链接并在 Facebook 墙中分享或尝试在插件中发表评论：

上述链接不会张贴在 FB 墙上，也不会有缩略图。由于我们是在线杂志，我们每天都会更新很多帖子，有些链接会毫无问题地发布，有些则不会。

**预期行为：** 链接应正常发布，其中包含缩略图。 **实际行为：** 链接不会发布在用户 Facebook 墙上。

调试后，等待一段时间后还是得到200响应，链接不工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:31:17.527

Facebook 知道 Facebook 共享缩略图存在问题。在过去的 3 个月里，这一直是一个问题……查看此[链接](https://www.facebook.com/help/community/question/?id=10200708365214182&referer=search_result&query=share%20thumbnail)

# php - 写入 BYTEA 字段 - 错误：用于编码“UTF8”的无效字节序列：0x98

> ID：16001238
> 
> 赞同：1
> 
> 时间：2013-04-14T16:17:16.227
> 
> 标签：php, postgresql, pdo, binary-data

我正在将二进制数据写入`BYTEA`UTF8 数据库中的字段。

当我通过 PHP/PDO 准备好的语句运行查询时，出现错误：

```
FATAL: SQLSTATE[22021]: Character not in repertoire: 7 ERROR:  invalid byte sequence for encoding "UTF8": 0x98 
```

知道为什么它将二进制数据视为应该是 utf8 编码的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:40:50.323

Figured it out, the solution is that PG doesn't allow binary data to be passed as a regular 'string' value, it has to be treated as a special 'large object'.

```
$stmt->bindValue(1, $field_data, PDO::PARAM_LOB); 
```

# ruby-on-rails - 将调用发送到 Web API 而不是本地数据库

> ID：16001239
> 
> 赞同：0
> 
> 时间：2013-04-14T16:17:16.573
> 
> 标签：ruby-on-rails, api

如何让 Rails 应用程序中的 API 方法接收用户输入，然后调用 Web API（例如 Twitter）而不是在 Rails 应用程序中查询本地数据库？我还想将用户查询存储在本地 rails 数据库中。所以工作流程会是这样的：

*   用户在应用程序中输入查询词
*   将查询词存储在本地数据库中
*   发出对 Web API（例如 Twitter API）的调用 - 检索数据
*   显示来自 Web API 的数据

我了解如何在 Ruby 中调用 Web API，但不确定我在 Rails 应用程序中的哪个位置放置了这样做的方法，以及它们如何链接到用户输入。

我对 Rails 有点陌生。我看过很多教程等，但似乎找不到关于这个主题的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:23:40.227

你可以使用像

[https://github.com/jnunemaker/httparty](https://github.com/jnunemaker/httparty)

[https://github.com/taf2/curb](https://github.com/taf2/curb)

或者你可以手动完成

[如何使用 Ruby on Rails 发出 HTTP 请求？](https://stackoverflow.com/questions/4581075/how-make-a-http-get-request-using-ruby-on-rails)

# android - 从 FragmentActivity 访问片段控件

> ID：16001241
> 
> 赞同：0
> 
> 时间：2013-04-14T16:17:17.900
> 
> 标签：android, android-fragments, android-fragmentactivity

我有一个`FragmentActivity`应该持有 2 `Fragments`。每个片段都有自己的布局，其中包含一个表格。我需要从片段的布局中访问表，`FragmentActivity`以放置我从 XML 文件中读取的一些数据。我的问题是当我使用

`tableOrders = (TableLayout)findViewById(R.id.tabel1);`

它返回`null`。现在，我知道布局中的项目只能在它们被膨胀之前被访问，并且我在尝试调用之前在 FragmentActivity 中做到了这一点`findViewById()`。这是我尝试过的代码：

* * *

的 onCreate`FragmentHolder.java`派生自`FragmentActivity`：

```
 private TableLayout tableOrders = null;
   private TableLayout tableExecutions = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_fragment_holder);
    initialisePaging();

    //View orderFragment = (View)findViewById(R.layout.fragment_orders);        
    tableOrders = (TableLayout)/*orderFragment.*/findViewById(R.id.tabel1);
    //View execFragment = (View)findViewById(R.layout.executions_fragment);
    tableExecutions = (TableLayout)/*execFragment.*/findViewById(R.id.tabel2);

    Intent intent = getIntent();
    Bundle bundle = intent.getExtras();

    if(bundle != null)
        logedUser = (User) bundle.getSerializable("user");

    AssetManager am = getApplicationContext().getAssets();

    String xmlContentOrders = XMLfunctions.getXml(am, "ordersData.xml");
    populateOrdersTable(xmlContentOrders);

    String xmlContentExecutions = XMLfunctions.getXml(am, "executionsData.xml");
    populateExecutionsTable(xmlContentExecutions);
} 
```

* * *

片段类（不知道是否有帮助）：

```
 public class OrdersFragment extends Fragment {
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
     super.onActivityCreated(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
     View view = inflater.inflate(R.layout.fragment_orders, container, false);
     return view;
    }
    } 
```

* * *

片段类（不知道是否有帮助）：

```
 public class OrdersFragment extends Fragment {
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
     super.onActivityCreated(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
     View view = inflater.inflate(R.layout.fragment_orders, container, false);
     return view;
    }
    } 
```

* * *

以及片段的 .xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TableLayout
    android:id="@+id/tabel1header"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/tablebgcolor" >

    <TableRow  >

        <TextView
            android:id="@+id/ordersHeader"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:layout_weight="1"
            android:text="@string/orders"
            android:textStyle="bold"                />
    </TableRow>

    <TableRow
        android:id="@+id/ordersTable"
        style="@style/HeaderRow" >

        <TextView
            android:id="@+id/textSymbol"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/symbol"
            style="@style/HeaderText" />

        <TextView
            android:id="@+id/textSide"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/side"
            style="@style/HeaderText" />

        <TextView
            android:id="@+id/textPrice"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/price"
            style="@style/HeaderText" />

        <TextView
            android:id="@+id/textQuantity"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/quantity" 
            style="@style/HeaderText"/>

        <TextView
            android:id="@+id/textRemaining"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/remanent"
            style="@style/HeaderText" />
    </TableRow>
</TableLayout>

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1" >

    <TableLayout
        android:id="@+id/tabel1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:background="@color/tablebgcolor">
    </TableLayout>
</ScrollView>

</LinearLayout> 
```

话虽如此，希望有人对此有解决方案（可能很容易我错过了）。

* * *

编辑：我用来将片段放在 FragmentActivity 上的代码：

```
private void initialisePaging() {

    OrdersFragment fragmentOne = new OrdersFragment();
    ExecutionsFragment fragmentTwo= new ExecutionsFragment();

    PagerAdapter pagerAdapter = new PagerAdapter(getSupportFragmentManager());
    pagerAdapter.addFragment(fragmentOne);
    pagerAdapter.addFragment(fragmentTwo);

    ViewPager viewPager = (ViewPager) super.findViewById(R.id.viewPager);
    viewPager.setAdapter(pagerAdapter);
    viewPager.setOffscreenPageLimit(2);
    viewPager.setCurrentItem(0);
} 
```

# c# - 如何启动列表框中的所有文件？

> ID：16001242
> 
> 赞同：-1
> 
> 时间：2013-04-14T16:17:25.963
> 
> 标签：c#, wpf, windows, datetime, listbox

我仍在学习 C#，在这里我需要一些帮助。我有一个列表框，其中包含所有要安排的文件，为此我使用 DateTimePicker 和 DateTime。问题是程序只启动第一个选定的项目，而不是其余的项目。如何确定项目的优先级，以便顶部首先启动，继续直到退出并继续到第二个文件？该程序是修改后的 WPF 应用程序。

Startupinfo = 列表框

这是代码：

```
Dictionary<string, string> startupinfoDict = new Dictionary<string, string>();
private bool startjob() //DateTime checking for DateValue and start's if correct value.
{
    DateTime? start = DateTimePicker1.Value;
    DateTime? end = DateTimePicker2.Value;
    DateTime now = DateTime.Now;

    if (start == null || end == null)
    {
        Xceed.Wpf.Toolkit.MessageBox.Show("one of the pickers is empty");
    }
    else if (now >= start.Value && now <= end.Value)
    {
        if (startupinfo.SelectedItem != null)
        {
            string s = startupinfo.SelectedItem.ToString();

            if (startupinfoDict.ContainsKey(s))
            {
              Process process = Process.Start(startupinfoDict[s]);
                process.WaitForExit();
                while (!process.HasExited)
                    Thread.Sleep(500);
                Xceed.Wpf.Toolkit.MessageBox.Show("It works woho");
    }

        }
        return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:26:22.087

尝试更换

```
if (startupinfo.SelectedItem != null)
{
  string s = startupinfo.SelectedItem.ToString();

  if (startupinfoDict.ContainsKey(s))
  {
    Process process = Process.Start(startupinfoDict[s]);
      process.WaitForExit();
      while (!process.HasExited)
          Thread.Sleep(500);
      Xceed.Wpf.Toolkit.MessageBox.Show("It works woho");
  }
} 
```

有一个循环，如

```
foreach (var selected in startupinfo.SelectedItems)
{
  string s = selected.ToString();

  if (startupinfoDict.ContainsKey(s))
  {
    Process process = Process.Start(startupinfoDict[s]);
      process.WaitForExit();
      while (!process.HasExited)
          Thread.Sleep(500);
      Xceed.Wpf.Toolkit.MessageBox.Show("It works woho");
  }
} 
```

# php - cakephp 2.x Shell 使用应用控制器？

> ID：16001244
> 
> 赞同：1
> 
> 时间：2013-04-14T16:17:30.510
> 
> 标签：php, cakephp, cakephp-2.0

我想要一个我必须能够访问 appController 的 shell 脚本，这可能吗，而无需将该代码复制到 AppShell 中？如果是这样，任何指针？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T16:54:06.853

通常，shell 不应依赖控制器内的代码、一些指针（根据要求）：

*   如果 Shell 必须执行与数据相关的任务，请将代码移至 Model。在任何情况下，这都是一种很好的做法（在 Google 上查找“Skinny Controllers, Fat Models”）
*   尽管不支持“标准”，但您可以将代码移动到“组件”（请参阅[​​组件](http://book.cakephp.org/2.0/en/controllers/components.html)）。组件用于控制器中使用的代码的可重用部分。

如果上述选项确实不是一个选项，您将不得不手动初始化 AppController。**请记住**，因为您是从命令行运行的，所以**不会出现**各种情况，例如没有“请求”并且某些环境变量（例如主机名）可能不会返回预期值！

### 手动初始化控制器

手动初始化控制器将是这样的；

```
App::uses('CakeRequest', 'Network');
App::uses('CakeResponse', 'Network');
App::uses('Controller', 'Controller');
App::uses('AppController', 'Controller');

// request/response may be optional, depends on your use
$controller = new AppController(new CakeRequest(), new CakeResponse());
$controller->constructClasses();
$controller->startupProcess(); 
```

# windows-phone-7 - 全景图中从右到左的语言-Windows Phone

> ID：16001250
> 
> 赞同：0
> 
> 时间：2013-04-14T16:18:06.360
> 
> 标签：windows-phone-7, hebrew

我想在全景窗口中使用从右到左的语言（希伯来语）（所以滚动将向左而不是向右），我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:56:19.267

将列表框、文本框等的流向属性设置为从右到左。全景控件本身也有这个属性。

# cryptography - openssh 在哪里解密并对收到的数据包做出反应？

> ID：16001252
> 
> 赞同：0
> 
> 时间：2013-04-14T16:18:15.593
> 
> 标签：cryptography, encryption, openssh, encryption-symmetric

我正在尝试添加第二层加密（在客户端加密，在服务器端解密）。

编辑：如果我不清楚，我很抱歉。我在 C 中的 OpenSSH 源代码中寻找该函数，其中服务器端的 ssh 连接响应来自客户端的活动。我最终找到了我想要的东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:00:18.610

找到了！它位于文件**channels.c**和函数**void channel_input_data(int type, u_int32_t seq, void *ctxt)**中。

# jquery - Jquery Mobile Validation 错误位置和选择

> ID：16001257
> 
> 赞同：2
> 
> 时间：2013-04-14T16:18:36.500
> 
> 标签：jquery, jquery-mobile, jquery-validate

我在我的 jQuery Mobile 项目的表单中添加了 bassistance jQuery 验证。它工作完美，除了错误显示在文本输入内部而不是在它们下方。我知道我可以使用 errorPlacement 来使用输入下方的 div 来输出我的错误消息，但这似乎不适用于选择菜单。

所以我有两个问题：

1.  在不使用errorPlacement的情况下，我可以做些什么不同的事情来使错误消息显示在输入下方？
2.  如果我必须使用 errorPlacement，我如何才能在选择菜单中显示错误消息？

这是我的代码：

```
<script>
    $('#page').bind('pageinit', function(event) {
        $('#registrationForm').validate({
            rules: {
                firstname: {
                    required: true
                },
                lastname: {
                    required: true
                },
                email: {
                    required: true,
                    email: true,
                    remote: "duplicateCheck.php"
                },
                password: {
                    required: true,
                    minlength: 5
                },
                verify_password: {
                    required: true,
                    minlength: 5,
                    equalTo: "#password"
                },
                handicap: {
                    required: true,
                    maxlength: 2,
                    digits: true
                },
                stopper: {
                    required: true
                }
            },
            messages: {
                firstname: {
                    required: "Please enter your first name."
                },
                lastname: {
                    required: "Please enter your last name."
                },
                email: {
                    required: "Please enter your email.",
                    email: "Please enter a valid email.",
                },
                password: {
                    required: "Please enter a password.",
                    minlength: "You password must be at least 5 characters long."
                },
                verify_password: {
                    required: "Please enter a password.",
                    minlength: "You password must be at least 5 characters long.",
                    equalTo: "You passwords did not match."
                },
                handicap: {
                    required: "Please enter your handicap.",
                    maxlength: "Your max handicap can't be higher than 99.",
                    digits: "Please only enter numbers."
                },
                stopper: {
                    required: "Please enter the word above."
                }
            },
            errorPlacement: function(error, element) {
                error.appendTo( element.parent().next() );
            }
        });
    });
</script> 
```

这是我的错误css：

```
label.error {
    color: red;
    font-size: 16px;
    font-weight: normal;
    line-height: 1.4;
    margin-top: 0.5em;
    width: 100%;
    float: none;
}

@media screen and (orientation: portrait){
    label.error {
        margin-left: 0;
        display: block;
    }
}

@media screen and (orientation: landscape){
    label.error {
        display: inline-block;
        margin-left: 22%;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T14:19:55.117

默认情况下，当使用 jQuery Validate 插件和 jQuery Mobile 时，错误消息显示在输入元素下方。正在删除您的自定义`errorPlacement`回调函数...

**简单演示：http: [//jsfiddle.net/7rXnS/](http://jsfiddle.net/7rXnS/)**

```
$(document).on('pageinit', function () {

    $('#registrationForm').validate({
        rules: {
            firstname: {
                required: true
            },
            lastname: {
                required: true
            }
        },
        messages: {
            firstname: {
                required: "Please enter your first name."
            },
            lastname: {
                required: "Please enter your last name."
            }
        }
    });

}); 
```

**但是**，jQuery Mobile 将元素包装`select`在元素内`div`，因此当插件添加错误时`label`，它*似乎*被放置在`select`元素内。要解决此问题，请`errorPlacement`按如下方式使用回调。它检查元素是否是一个元素，然后在最外层的包装*之后*`select`插入错误。如果元素不是 a ，它只使用默认位置。`label` *`div``select`*

 *```
errorPlacement: function (error, element) {
    if (element.is('select')) {
        error.insertAfter(element.parents('div.ui-select'));
    } else {
        error.insertAfter(element);  // default placement
    }
} 
```

**演示使用：http `select`: [//jsfiddle.net/QuwkZ/](http://jsfiddle.net/QuwkZ/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-08T15:12:01.840

从 Jquery Mobile 1.4.3 开始提及，这仍然是问题，@Sparky 建议的解决方法修复了它。*

# mysql - Grails Quartz 作业从 MySQL 检索旧数据

> ID：16001258
> 
> 赞同：1
> 
> 时间：2013-04-14T16:18:44.607
> 
> 标签：mysql, hibernate, grails, grails-orm, quartz-scheduler

我有一个单线程 Quartz 作业，在更改记录的“状态”列后启动。作业被传递给它然后查找的记录的主 ID。由于某种奇怪的原因，石英作业看到了原始状态值。

该作业具有每秒重试查找的逻辑，最多一分钟。起初我认为 hibernate 可能会返回旧对象，所以我添加了一个`session.clear()`，但这没有任何区别。然后我添加了一个`jdbcTemplate.queryForMap`绕过休眠的数据，但这也看到了旧数据。

当 Quartz 作业记录旧值时，我在显示视图和手动针对数据库调用的 sql 查询中看到了新值。我什至检查了版本属性，发现它已经改变，但石英作业具有旧值。

Quartz 作业是否有任何原因无法识别更改？

奇怪的是，这种逻辑在某些服务器上运行得非常好，在其他服务器上它一直失败，而在其他服务器上它会定期失败。

环境包括：

*   圣杯 1.3.7
*   MySQL
*   Linux
*   雄猫

# jquery - 单击除链接以外的 div 时触发事件

> ID：16001260
> 
> 赞同：6
> 
> 时间：2013-04-14T16:18:57.217
> 
> 标签：jquery

我想在单击 div 时触发一个事件，但如果我单击该 div 上的特定链接，我不希望该事件触发：

我的 JS

```
$("#myDiv").not("#myLink").click(function () {
    alert("clicked");
});

//Or

$("#myDiv:not(#myLink)".click(function () {
    alert("clicked");
});

$("body").on('click', '#myLink', function(e) {
    e.stopPropagation();
}); 
```

我的 HTML

```
<div id="myDiv">
    <a href="#" id="myLink">Some link</a>
</div> 
```

这是[jsfiddle](http://jsfiddle.net/SjDdN/9/)

**编辑：**实际上我的真实代码是使用“ **On** ”方法，我已经尝试过 stopPropagation 但在这种情况下它不起作用

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T16:21:35.467

为了获得您想要的结果，您必须在锚元素上注册一个事件处理程序，该处理程序在执行时会阻止事件传播。

```
$("#myLink").click(function(e) {
    e.stopPropagation();
}); 
```

**为什么这个工作？**

事件从根元素传播到目标元素（捕获阶段），到达目标后，它们会爬回根元素（冒泡阶段）。目标元素是接收事件的元素。

可以在捕获阶段和冒泡阶段都注册事件侦听器。在这里，我们使用 jQuery 在冒泡阶段注册事件。

`stopPropagation`允许阻止通过 DOM 的事件传播。

那是我写的一篇文章，以防您需要有关[W3C 事件模型](https://brunoscopelliti.com/about-events/)的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T16:25:25.137

为了不必为您放入 div 中的每个链接重复停止执行的代码，您可以使用[stopPropagation](http://api.jquery.com/event.stopPropagation/)。

```
$('#myDiv a').click(function(e) {
    e.stopPropagation(); //stops default link action
    //do your stuff
}); 
```

`<a>`如果它们在`#myDiv`div 中，这将阻止所有链接 ( ) 执行它们通常执行的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T16:26:32.780

这也可能有效

```
$("#myDiv").click(function (ev) {
     alert("clicked");

}).children().click(function(e) {
  return false;
}); 
```

[http://jsfiddle.net/SjDdN/7/](http://jsfiddle.net/SjDdN/7/)

# sql-server - SQL Server 更新返回错误值

> ID：16001263
> 
> 赞同：1
> 
> 时间：2013-04-14T16:19:25.420
> 
> 标签：sql-server

我有一个返回错误结果的更新查询。

```
UPDATE StagingWarehouse.dbo.BusinessLeads
SET    CompanyFK = c.CustomerPK
FROM   StagingWarehouse.dbo.BusinessLeads s
       INNER JOIN DataWarehouse.dim.Customer c
         ON c.CustomerBK = s.CompanyBK
WHERE  s.businessleadbk = 5796722 
```

`businessleadbk = 5796722`从`StagingWarehouse.dbo.BusinessLeads`运行此语句后选择时，`CompanyFK`设置为 11024703。问题是`CustomerPK`11024703 on`DataWarehouse.dim.Customer`不存在并且运行以下查询不返回任何结果，所以我不知道它从哪里得到这个数字。

```
SELECT c.*
FROM   StagingWarehouse.dbo.BusinessLeads s
       INNER JOIN DataWarehouse.dim.Customer c
         ON c.CustomerBK = s.CompanyBK
WHERE  s.businessleadbk = 5796722 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:40:42.777

`UPDATE`计划如下图

![更新](https://i.stack.imgur.com/47zwN.png)

计划中的所有运算符都发出 1 行。

`SELECT`计划是

![选择](https://i.stack.imgur.com/KSv74.png)

当 SQL Server 尝试在同一个表的聚集索引中查找相应的 PK 时，该行已经在`CustomerBK`索引中找到后以某种方式消失了。`Customer`这将表明某种腐败。与 CI 相比，NCI 可能有额外的行，或者存储在 NCI 中的 PK 值无效。

我会跑[`DBCC CHECKTABLE`](http://msdn.microsoft.com/en-gb/library/ms174338.aspx)

# ios - 应用崩溃后丢失 CoreData d/b；如何防止损失再次发生

> ID：16001265
> 
> 赞同：0
> 
> 时间：2013-04-14T16:19:44.567
> 
> 标签：ios, core-data

我的 iPad 应用程序崩溃了；CoreData SQLite d/b 随之而来（不再存在）。

这是它应该工作的方式，还是我可以做些什么来防止它，除了修复与核心数据无关的崩溃原因？我的猜测是，在崩溃期间，Core Data 试图关闭 d/b，但失败并删除了它。

如何不惜一切代价防止丢失核心数据 d/b？（替换数据需要几天时间）。

# php - 加载 csv 文件时出错：巨大的文本节点内存不足

> ID：16001267
> 
> 赞同：0
> 
> 时间：2013-04-14T16:19:46.097
> 
> 标签：php, csv, nginx, phpexcel

使用 PHPExcel 加载 38MB .csv 文件时，`huge text node: out of memory`即使我已将其设置`php memory_limit`为 1024M，我也会收到错误消息。

知道如何加载大型 .csv 文件吗？

**错误**

`Error loading file "data.csv": Warning: DOMDocument::loadHTMLFile(): xmlSAX2Characters: huge text node: out of memory in /var/www/site/data.csv, line: 264094 in /var/www/site/vendor/CodePlex/PHPExcel/PHPExcel/Reader/HTML.php line 458`

**PHP 代码**

```
ini_set('memory_limit', '1024M');

$inputFileName = '/var/www/site/data.csv';
$phpExcel = new PHPExcel;

//  Read your Excel workbook
try 
{
    $inputFileType = PHPExcel_IOFactory::identify($inputFileName); 
    $objReader = PHPExcel_IOFactory::createReader($inputFileType);
    $objPHPExcel = $objReader->load($inputFileName);
} 
catch(Exception $e) 
{
     die('Error loading file "'.pathinfo($inputFileName,PATHINFO_BASENAME).'": '.$e->getMessage());
} 
```

**php.ini**

```
; Maximum amount of memory a script may consume (128MB)
; http://php.net/memory-limit
memory_limit = 128M 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:32:07.913

您可以使用[fgetcsv](http://www.php.net/manual/ru/function.fgetcsv.php)并逐行加载 csv。

```
$file = '/path/filename.csv';

$f = fopen($file, 'rb');

while( $cols = fgetcsv($f) ) 
{
  // $cols[0]; // first column of the current row
}

fclose($f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:30:40.333

使用 PHPExcel 读取大量 Excel 文件问题的可能解决方案

[如何使用 PHPExcel 从大型 Excel 文件 (27MB+) 中读取大型工作表？](https://stackoverflow.com/questions/4666746/how-to-read-large-worksheets-from-large-excel-files-27mb-with-phpexcel)

答案之一建议分块读取大文件。

# symfony - Symfony2 - 使用路由作为异常页面

> ID：16001270
> 
> 赞同：0
> 
> 时间：2013-04-14T16:19:57.490
> 
> 标签：symfony

我已经研究了很多方法来做到这一点，但找不到解决方案。

我希望我的网站在发生异常时显示特定的路线/页面。

因此，如果我将其设置为显示路由“联系人”并转到 domain.com/dfergerxyttt（未找到路由），那么它将与我访问 domain.com/route 相同（除了 404 状态代码）。

我需要这些关键的东西：（1）我需要它像往常一样运行控制器代码（2）我还需要它来运行我的请求事件侦听器代码

我不能只将它设置为显示一个特定的模板，它必须是整个请求事件侦听器和控制器等过程。

我尝试了一个异常监听器，但它也不会运行请求监听器。所有这些代码都被忽略了。

我看不到一种方法来设置一条包罗万象的路线或任何东西。设置默认或包罗万象的路线将是一个好主意。

--

我已经尝试过了，但我无法访问控制器。不确定我是否需要将其注入或其他东西：

```
namespace etc...

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Bundle\TwigBundle\Controller\ExceptionController;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpKernel\HttpKernel;
use Symfony\Component\HttpKernel\Exception\FlattenException;
use Symfony\Component\HttpKernel\Log\DebugLoggerInterface;
use Symfony\Component\HttpFoundation\Response;

class MyExceptionController extends ExceptionController
{
    public function showAction(Request $request, FlattenException $exception, DebugLoggerInterface $logger = null, $format = 'html')
    {

       $httpKernel = $this->container->get('kernel');
       $response = $httpKernel->forward('AcmeMyBundle:Default:pageAction');
       $this->setResponse(new Response($response));

    }
} 
```

我也在 services.yml 中做了这个，这似乎是正确的：

```
parameters:
    twig.controller.exception
      class: Acme\MyBundle\MyExceptionController 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:34:01.113

创建一个异常控制器并用于[`Controller::forward`](http://symfony.com/doc/current/book/controller.html#forwarding)转发到特定路由。

请参阅有关如何在 2.2 中创建异常控制器的答案：[https ://stackoverflow.com/a/15773923/1149495](https://stackoverflow.com/a/15773923/1149495)

# mysql - 加快查询

> ID：16001271
> 
> 赞同：-1
> 
> 时间：2013-04-14T16:19:58.710
> 
> 标签：mysql

我有一个超过 1000 万行和 5 个字段（列）的表。有一个索引`field_1`，我正在运行以下查询：

```
CREATE table t2 
SELECT field_1,sum(field_2) AS field_2, 
       sum(field_3) AS field_3,
       sum(field_4) AS field_4 
FROM t1 
GROUP BY field_1; 
```

field_1 的数据类型是 varchar(200) ，对于其他字段，它是 double 。

即使运行超过 1 天，此查询也无法产生结果。任何有关快速获得结果的建议都会有所帮助。

根据网络上提供的建议，我对 c:\xampp\mysql\bin 中的 my.cnf 文件进行了以下更改： key_buffer = 1G read_buffer_size = 256M read_rnd_buffer_size = 512M 我也这样做了。设置全局 key_buffer_size=256*1024*1024

如果有人可以提出其他建议，那真的会让我的任务更轻松。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:30:34.367

You are using sum function so I assume values of this columns are numbers. Change data type to integer or float if they are decimal.

Thanks to that MySQL won't have to cast it to number during execution and opration on numbers are much faster than on strings.

# java - Switch 语句和字符串

> ID：16001272
> 
> 赞同：1
> 
> 时间：2013-04-14T16:19:59.100
> 
> 标签：java, arrays, string, switch-statement

如果我让用户从屏幕上的菜单输出中输入字符串中的值。如何将该输入用于 switch 语句？它保持它只能用于int。例如，如果用户输入 a，我希望它切换到 case 语句并执行操作。对不起，如果这令人困惑。

```
public static void sortData(short days[], String name[]) {
    String choice;
    Scanner kd = new Scanner(System.in);

    System.out.println("a. Sort by Name\nb. Sort by Day");
    choice = kd.next();                       // ????????

    switch (choice) {
    case 1: {                                // ????????? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:36:15.657

您可以为您接受的选择定义一个字符串列表，并使用它`indexOf`来查找输入的输入。之后，您可以在`switch`.

像这样

```
List<String> options = Arrays.asList("name", "day", "color", "smell");
switch (options.indexOf(choice)) {
case 0: // name
    ...
case 1: // day
    ...
... // etc
default: // none of them
} 
```

但是，使用数字的可读性不是很高。

另一个想法：定义一个枚举并使用`valueOf(choice)`. 在这种情况下，您必须捕获`IllegalArgumentException`不匹配的输入。

```
enum Options {
    name, day, color, smell
} 
```

接着

```
try {
    switch (Options.valueOf(choice)) {
    case name: ...
    case day: ...
    // etc
    }
} catch (IllegalArgumentException ex) {
    // none of them
} 
```

或者，最后，您切换到 Java 7 ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:26:29.213

据我所知，这没关系：

```
public static void sortData(short days[], String name[]) {
    char choice;
    Scanner kd = new Scanner(System.in);

    System.out.println("a. Sort by Name\nb. Sort by Day");
    choice = kd.next().toCharArray()[0];

    switch (choice) {
    case 'a':
        // do something
        break;
    case 'b';
        // do something else
        break;
    }
} 
```

**未测试**

# scala - 单例对象的类参数（泛型）

> ID：16001274
> 
> 赞同：4
> 
> 时间：2013-04-14T16:20:17.410
> 
> 标签：scala

在[他的 Coursera 课程中](https://class.coursera.org/progfun-002/class/index)，Martin Odesrky 教授在关于多态性和参数化类的讲座中以链表为例：

```
package week4

trait List[T] {
  def isEmpty: Boolean
  def head: T
  def tail: List[T]
}
class Cons[T](val head: T, val tail: List[T]) extends List[T] {
  def isEmpty = false
}
class Nil[T] extends List[T] {
  def isEmpty = true
  def head = throw new NoSuchElementException("Nil.head")
  def tail = throw new NoSuchElementException("Nil.tail")
}
object Main extends App {
  def main(args: Array[String]) {
    val lst = new Cons("A", new Cons("B", new Cons("C", new Nil())))
  }
} 
```

困扰我的是最后几行中类 Nil 的实例化，`new Nil()`.

如何将 Nil 定义为 an`object`而不是 Scala 类，并使其符合参数化类型 List[T] ？

我想在下面的代码行（没有实例化）中引用对象 Nil，并使其具有正确的类型

```
new Cons("A", new Cons("B", new Cons("C", Nil))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:35:49.890

在实际的 Scala 库（[List.scala](https://github.com/scala/scala/blob/v2.10.1/src/library/scala/collection/immutable/List.scala#L1)）中，它是如何完成的，

```
case object Nil extends List[Nothing] { ... 
```

可能在他想避免引入的类中`Nothing`，这是[Scala 类型 lattice 底部的类型](http://www.scala-lang.org/api/current/index.html#scala.Nothing)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T16:57:36.167

鉴于`trait List[T]`列表的定义，您不能这样做。该定义意味着您需要一个 distinct `Nil`for each `T`，因为for each `T1`and`T2`不完全相同，`List[T1]`与 不兼容`List[T2]`。由于`Nil`must "be a" `List[Tx]`，`Tx`因此您选择的任何一个都将与其他所有不兼容。

为了解决这个问题，您需要协方差，iirc 稍后会解释几节课。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T16:45:49.560

以下是 Kipton 的建议和我自己的建议：

```
trait List[+T] {
  def isEmpty: Boolean
  def head: T
  def tail: List[T]
}
class Cons[+T](val head: T, val tail: List[T]) extends List[T] {
  def isEmpty = false
}
case object Nil extends List[Nothing] {
  def isEmpty = true
  def head = throw new NoSuchElementException("Nil.head")
  def tail = throw new NoSuchElementException("Nil.tail")
}
object ListTest {
  def main(args: Array[String]) {
    val lst = new Cons("A", new Cons("B", new Cons("C", Nil)))
  }
} 
```

顺便说一句，我的 Scala 安装无法编译您的代码。App 实现“main”，因此您必须覆盖它或（正如 App 的意图）将其排除在外。

请注意，您需要`List`并且`Cons`是协变的（例如`List[+T]`），这基本上意味着对于 T 的子类型 U，它还认为它`List[U]`是子类型，`List[T]`并且通过扩展 List[Nothing] 是列表的子类型。

# java - 我的 java 代码在 linux 中可以正常工作，但在 Windows 上不能

> ID：16001278
> 
> 赞同：0
> 
> 时间：2013-04-14T16:20:32.900
> 
> 标签：java, linux, swing, windows-8, calculator

我正在使用 Java Swing 制作计算器，但遇到了一些问题。在 linux (linux mint 14 nadia) 上，我的计算器工作正常，但在 Windows 8 中使用时，它可以正确打开，但在将我的输入字符串解析为双数时出现问题。

```
private double convertToNumber(String n) {
    //Double dbl = new Double(n);  
    //return dbl;
    return Double.parseDouble(n);
} 
```

我也尝试了我注释掉的部分，但这也不起作用。

错误消息说该行`return Double.parseDouble(n);`正在创建问题，但为什么这在 linux 中不是问题？

我将让一些我认为可能导致问题的代码如下：

```
DecimalFormat numberFormat = new DecimalFormat("#.##########"); //Instance variable

//Use: x.getTotalString
//Post: getTotalString is the final product (end result)
public String getTotalString(){
formattedValue = numberFormat.format(total);
formattedValue = formattedValue.replaceAll("^-(?=0(.0*)?$)", "");
return "" + Double.parseDouble(formattedValue);
//return "" + Double.parseDouble(numberFormat.format(total));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:24:50.723

它可能来自`Locale`您的环境中的不同。

在您的 Windows 环境中，`String`您解析的格式可能不是您指定的格式：`#.##########`. 尝试打印您要解析的数字，并检查您使用的格式是否正确。

# php - 如何在 Magento PHP 生成的列表之间添加 HTML

> ID：16001280
> 
> 赞同：0
> 
> 时间：2013-04-14T16:20:43.113
> 
> 标签：php, magento

我有这个清单：

![在此处输入图像描述](https://i.stack.imgur.com/9vmkN.jpg)

我想在蓝色链接之间添加“|”字符。

但是，列表项是由 PHP 在以下代码中生成的：

```
<ul class="links pull-right"<?php if($this->getName()): ?> id="<?php echo $this->getName() ?>"<?php endif;?>>
    <?php foreach($_links as $_link): ?>
        <?php if ($_link instanceof Mage_Core_Block_Abstract):?>
            <?php echo $_link->toHtml() ?>
        <?php else: ?>
            <li<?php if($_link->getIsFirst()||$_link->getIsLast()): ?> class="<?php if($_link->getIsFirst()): ?>first<?php endif; ?><?php if($_link->getIsLast()): ?> last<?php endif; ?>"<?php endif; ?> <?php echo $_link->getLiParams() ?>><?php echo $_link->getBeforeText() ?><a href="<?php echo $_link->getUrl() ?>" title="<?php echo $_link->getTitle() ?>" <?php echo $_link->getAParams() ?>><?php echo $_link->getLabel() ?></a><?php echo $_link->getAfterText() ?></li>
        <?php endif;?> |   //----------- the | character was added here ---------------
    <?php endforeach; ?>
</ul> 
```

问题是：

1.  PHP 在 for each 循环中，而 | 字符也被添加到最后一个链接。
2.  我想将“登录”放置在我页面上的其他位置。有没有办法将最后一个列表项分开并将其放置在其他地方？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:00:51.533

对于 1：使用`$_link->getIsLast()`。检查它是否不是最后一个 -> 添加您的分隔符。

```
<ul class="links pull-right"<?php if($this->getName()): ?> id="<?php echo $this->getName() ?>"<?php endif;?>>
    <?php foreach($_links as $_link): ?>
        <?php if ($_link instanceof Mage_Core_Block_Abstract):?>
            <?php echo $_link->toHtml() ?>
        <?php else: ?>
            <li<?php if($_link->getIsFirst()||$_link->getIsLast()): ?> class="<?php if($_link->getIsFirst()): ?>first<?php endif; ?><?php if($_link->getIsLast()): ?> last<?php endif; ?>"<?php endif; ?> <?php echo $_link->getLiParams() ?>><?php echo $_link->getBeforeText() ?><a href="<?php echo $_link->getUrl() ?>" title="<?php echo $_link->getTitle() ?>" <?php echo $_link->getAParams() ?>><?php echo $_link->getLabel() ?></a><?php echo $_link->getAfterText() ?></li>
        <?php endif;?> 
        <?php if (! $_link->getIsLast()):?>|<?php endif;?>   //----------- the | character was added here ---------------
    <?php endforeach; ?>
</ul> 
```

那应该工作。

**编辑：** 对于 2 号：不是 100% 确定。可能必须禁用该链接，然后手动将它/它的块的 url 添加到您的布局/.phtml。

因为链接生成是自动的，所以你必须禁用链接，然后调用`$something->getUrl()` **SIMILAR** `<a href="<?php echo $this->getUrl('wishlist') ?>">Wishlist</a>` **From:** [Magento add wishlist_link 到不同的块？](https://stackoverflow.com/questions/11523489/magento-add-wishlist-link-to-different-block)

# jakarta-ee - 从 servlet 创建和持久化实体

> ID：16001285
> 
> 赞同：1
> 
> 时间：2013-04-14T16:20:53.123
> 
> 标签：jakarta-ee, servlets, persistence, entity, ejb-3.1

我正在尝试在 servlet 和调用时创建和持久化实体

`public void create(T entity) { getEntityManager().persist(entity); }`

来自servlet，这是在AbstractFacade 中为所有EJB 生成的方法，我得到EJBException。现在，我正在考虑使用此方法在无状态 EJB 中创建和持久化实体并从 servlet 调用它

`public boolean createUser(JavaBean jb){}`.

这是个好主意吗？创建和持久化实体（即创建用户帐户）的最佳方式是什么？

谢谢你的帮助。

这是问题所在。我想在数据库中的两个表中创建记录，成员详细信息和地址。他们是一对一的关系。该关系尚未由数据库中的外键强制执行。两个表都有对应的实体类，实体类 Address 有 Embeddable 类 AddressPK 表示其复合主键。一对一关系仅在实体`@ JoinColumn(name = "MEMBER_ID")`中通过地址和成员详细信息执行`@OneToOne(mappedBy = "memberId", cascade = CascadeType.ALL)`。现在，我从 JSP 表单中获取数据，并在另一个 JSP 中设置了 JavaBean。Servlet 创建实体并调用注入的 EJB 来持久化它们，如下所示：

```
 //get MemberBean from session object
    MemberBean member = (MemberBean) request.getSession().getAttribute("user");
    //create relevant entities and set attributes of entity classes
    MemberDetails aMember = new MemberDetails("M3", firstName, middleName, lastName, dob, phoneNo,
            member.getEmail(), gender, industryPosition, "Basic", musicInterests);
    AddressPK addressId = new AddressPK(houseNo, postCode);
    Address anAddress = new Address(addressId, street, county, town, country, aMember);
    aMember.setAddress(anAddress);

    if (memberDetails.find(aMember.getMemberId()) == null) {
        //address.create(anAddress);

        memberDetails.create(aMember);

    }
    else
    { System.out.println("User M3 Exists");}

    //tests
    memberDetails.displayMembers();

    RequestDispatcher disp = request.getRequestDispatcher("WEB-INF/jsp/accounttype.jsp");
    disp.forward(request, response); 
```

我创建了普通的 Java 应用程序客户端，并使用显式事务插入了这些详细信息，并且它起作用了。当注释掉地址并只保留成员详细信息时，它也可以工作。

这是我尝试将 MemberDetails 和 Address 一起插入时遇到的异常。

在 com.sun.grizzly 执行（DefaultProtocolChain.java:90）在 com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79) 在 com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54) 在 com.sun.grizzly .SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) 在 com.sun.grizzly.ContextTask.run(ContextTask.java:71) 在 com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) 在com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:722) 原因：javax.validation.UnexpectedTypeException: HV000030: 没有验证器可能找到类型：entities.MemberDetails。... doCall(ProtocolChainContextTask.java:54) at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) at com.sun.grizzly.ContextTask.run(ContextTask.java:71) at com.sun.grizzly.util .AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:722) 引起作者：javax.validation.UnexpectedTypeException：HV000030：找不到类型的验证器：entities.MemberDetails。... doCall(ProtocolChainContextTask.java:54) at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59) at com.sun.grizzly.ContextTask.run(ContextTask.java:71) at com.sun.grizzly.util .AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532) at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:722) 引起作者：javax.validation.UnexpectedTypeException：HV000030：找不到类型的验证器：entities.MemberDetails。... AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:722) 原因：javax.validation.UnexpectedTypeException：HV000030：找不到类型的验证器：entities.MemberDetails。... AbstractThreadPool$Worker.run(AbstractThreadPool.java:513) at java.lang.Thread.run(Thread.java:722) 原因：javax.validation.UnexpectedTypeException：HV000030：找不到类型的验证器：entities.MemberDetails。...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:28:18.437

目前尚不清楚您要做什么，但使用封装实体管理器的无状态 EJB 确实是最佳实践。

可以将这样的 EJB 注入到 Servlet 中，而不必担心线程安全问题。

如果您直接在 Servlet 中使用实体管理器，则必须注意此类问题（实体管理器不是线程安全的，所有请求只有 1 个 Servlet 实例。您还必须手动管理事务。

有了一个简单而轻量级的 EJB bean，所有的复杂性都消失了。

# jquery - jQuery 用一个函数单独切换一系列 div

> ID：16001286
> 
> 赞同：0
> 
> 时间：2013-04-14T16:20:55.583
> 
> 标签：jquery, function, toggle

# 我有的：

我有一个由链接（问题）组成的常见问题解答列表，这些链接（问题）可以切换相应段落（答案）的隐藏/显示。每个链接/段落（问题/答案）使用单独的功能

# 我需要的：

我想使用一个函数来实现这一点，而不是为每个链接/段落（问题/答案）编写一个函数。

# 我当前的代码：

**HTML：**

```
<!--Q1-->

<p class="faq-question-container">
    <a href="#" id="q1">Some question</a>
</p>

<p class="faq-answer" id="a1">Some answer</p>

<!--Q2-->

<p class="faq-question-container">
    <a href="#" id="q2">Some question</a>
</p>

<p class="faq-answer" id="a2">Some answer</p>

<!--etc.--> 
```

**jQuery**

```
$('.faq-answer').hide();

//Q1

$("#q1").click(function(event) {
  event.preventDefault();
  $('#a1').slideToggle();
});

//Q2

$("#q2").click(function(event) {
  event.preventDefault();
  $('#a2').slideToggle();
});

//etc. 
```

# 我的问题：

如何将上述 jQuery 代码简化为一个函数？

# 我试过的：

```
jQuery("#faq-question-container a").click(function(event) {
  event.preventDefault();
  jQuery(this).next('#faq-answer').slideToggle();
}); 
```

什么也没做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:22:05.673

从您的代码开始，带来的主要变化是

*   修复类选择器
*   在寻找下一个元素之前上升

这给出了这个代码：

```
jQuery(".faq-question-container a").click(function(event) {
  event.preventDefault();
  jQuery(this).closest('.faq-question-container').next('.faq-answer').slideToggle();
}); 
```

另一个不假设特定 HTML 组合的解决方案：

```
$(".faq-question-container a[id^=q]").click(function(event) {
  event.preventDefault();
  $('#a'+this.id.slice(1)).slideToggle();
}); 
```

这个怎么运作 ：

*   `[id^=q]`是 id 以 . 开头的所有元素的选择器`q`。
*   `this.id.slice(1)`取自`95`一个 id`q95`

# c# - CanExecute 断点不允许我使用该应用程序

> ID：16001292
> 
> 赞同：0
> 
> 时间：2013-04-14T16:21:40.650
> 
> 标签：c#, mvvm, icommand

我目前正在玩弄 MVVM 模式并尝试命令。我发现默认方式（每个 Command 类都需要从`ICommand`接口实现）很无聊，所以我创建了一个新的基类，名为，等待它，`CommandBase`. 它看起来像这样：

```
public abstract class CommandBase : ICommand
{
    public virtual bool CanExecute(object parameter)
    {
        return true;
    }

    public virtual event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    public virtual void Execute(object parameter)
    {

    }
} 
```

现在每个命令都只是从这个基类继承并覆盖必要的。我在软件中有一个错误，所以我在我的继承类和这个基类中放置了几个断点。一切似乎都按预期工作，除了一件事 - 该方法`CanExecute`一直被触发。如果我将断点放在方法中，我的应用程序甚至都不会启动！**如果我删除这个断点，一切都会重新开始。**

主视图模型：

```
public class MainViewModel : ViewModelBase // base implements INotifyPropertyChanged
{
    public ICommand NavigateCommand { get; private set; }

    public MainViewModel()
    {
        NavigateCommand = new NavigateCommand(this);
    }
} 
```

我的调试器进入构造函数，实例化 Command 类，从现在开始，CanExecute 方法会疯狂地触发，我什至无法打开应用程序窗口，因为 vs 调试器不允许我这样做。在我的 NavigateCommand 中，我只覆盖`Execute`方法并设置 MainViewModel 的一个属性，没什么太花哨的。`CanExecute`保持不变而没有覆盖。

请注意，我提到的错误只是我的视图的错字，与此问题无关。在我修复它之后，除了这个东西之外，代码都可以工作。

有人可以解释为什么它会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:39:25.583

我是否可以建议，除非绝对必要，否则您不需要在这里重新发明轮子。您可以使用许多出色的 ICommand 实现。

[RelayCommand](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)可能是最常用的，虽然[DelegateCommand](http://wpftutorial.net/DelegateCommand.html)实现也很好，而且是标准的 ICommand 实现是 Prism 框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:17:16.073

这是一种“正常”行为，`CanExecute`经常被`CommandManager`. 您不应该尝试调试此方法。如果出现未知错误，请`Common Language Runtime Exceptions`在 Debug -> Exceptions...[此处](https://stackoverflow.com/questions/14294738/when-is-canexecute-called/14294916#14294916)打开更多信息。

# java - 创建基于 UTC 而不是本地时间的 JSR 310 时钟？

> ID：16001294
> 
> 赞同：2
> 
> 时间：2013-04-14T16:22:21.703
> 
> 标签：java, timezone, jsr310

编辑：好的。不幸的是，我不得不承认我对 Java 时间的理解存在严重缺陷，使得这个问题变得毫无意义。我一直认为 System.currentTimeMillis() 返回的是当地时间。为什么？因为当您使用它创建日期时，它只包含该日期，并且没有对时区的引用，但在传递给 System.out.println() 时仍会打印出本地时间。我从来没有想过是 *toString()*将（UTC）时间转换为当地时区。:(

我想用 Java 创建一个客户端-服务器应用程序。时间起着重要的作用。因此，我决定暂时将 GMT/UTC 标准化。我还从经验中知道，许多用户的 PC 的时间和/或时区完全错误。最后，我想有比毫秒更精确的时间。

所以我创建了一个类，它在开始时连接到 Internet，并计算到 UTC 的偏移量，与本地时间和时区无关。换句话说，我有一个静态 Java 方法，它以纳秒为单位返回 UTC 时间，并且可以在任何 PC 上独立于本地时间设置工作。

现在，我的问题是我想使用 JSR 310 来操纵时间（实际上是 Java 7 反向端口），我看不到如何定义一个*不基于本地时间*的时钟。

在我看来，Clock.millis() 和 Clock.instant() 方法必须使用本地时间才能正常工作[编辑：因为这些方法盲目地返回 System.currentTimeMillis()，与设置的时区属性无关]。所以我基本上必须将我的 UTC 时间转换为本地时间，以创建一个 Instant，这样我就可以创建一个 UTC ZonedDateTime，它将本地时间再次转换回 UTC。这简直是​​疯了。如果我在 Clock.millis() 和 Clock.instant() 中使用 UTC 时间，然后创建一个 UTC ZonedDateTime ，我不想与之有任何关系的本地时间偏移会被应用*两次*。

从 UTC 转换到本地然后再转换回来是很昂贵的，所以我真的很希望能够使用纯粹的 UTC。我正在开发一个实时游戏，而不是一个网络应用程序，这样小的延迟将毫无意义。

我可以只返回 UTC 时间，并“假装”时区是“本地”以获得正确的数字，但是事情可能会在 DST 边界处中断，并且会使将时间转换为其他时区变得更加复杂。

[这是我的时钟课](https://github.com/skunkiferous/Time/blob/master/src/com/blockwithme/time/NanoClock.java)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:32:18.827

> 在我看来，方法 Clock.millis() 和 Clock.instant() 必须使用本地时间才能正常工作。

绝对不。`Instant`与时区无关，并`millis`记录在：

> 这将返回基于毫秒的瞬间，从 1970-01-01T00:00 UTC 开始测量。这相当于 System.currentTimeMillis() 的定义。

再说一次，这不是当地时间。它使用本地系统时钟，但这与说它是正常意义上的本地时间不同。

目前还不清楚您真正想要做什么，但我至少会*尝试*根据`Instant`，而不是`ZonedDateTime`. 关键`Instant`是它只是时间线上的一个点；它没有时区，甚至没有日历系统。只要您使用的所有东西（跨所有系统）使用相同的概念时间线和相同的时期（例如，如果您在任何地方都使用 JSR-310），那么您应该没问题。`Instant`使用与 Java 相同的时代 - UTC 的 1970 年初。

当然，您可能仍然希望拥有自己的时间来源，但显然您需要考虑网络延迟等。考虑使用标准化的 NTP 或类似的东西，而不是尝试构建自己的系统。然后，您可能希望对其进行调整以实现您`Clock`自己的子类。如果其他一切都*只是*在`Clock`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:23:34.040

解决方案是：您*可以*更改时区：

```
TimeZone.setDefault(TimeZone.getTimeZone("UTC")); 
```

因此，要在时钟中使用 UTC，但仍然能够在本地用户时区显示时间值，您必须首先获取并保存默认时区，然后如上所述仅将其替换为 UTC。

然后，JVM 会认为您的本地时区是 UTC，因此如果 Clock 实际上返回 UTC 毫秒和即时，那么一切都会一起工作。然后，当您想要显示时间值时，您将获取原始默认时区，并使用该时区创建另一个时钟实例，但 millis 和 Instant 方法保持不变，因此它们仍然返回 UTC 时间。

主要好处是现在任何地方都不需要时区转换，除非在本地时间显示给用户。

[编辑再想一想，这价值有限，因为其他一切仍将使用 System.currentTimeMillis() （包括通过 java.util.Date 和 Calendar 间接使用）。所以一个人可能永远无法解决所有与时间相关的问题。]

# c++ - 传递 std::unique_ptr 的问题

> ID：16001296
> 
> 赞同：0
> 
> 时间：2013-04-14T16:22:28.170
> 
> 标签：c++, c++11

在过去的一个小时里一直停留在这段代码上，仍然试图让我的头脑围绕智能指针并实现它们，但这个问题让我很困惑。

```
void GameState::addEntity(std::unique_ptr<Entity> gameObject)
{
    if(gameObject->isCollidable()){
        _actors.Add(gameObject);
    } else {
        _props.Add(gameObject);
    }
}

// This is the method the above function is trying to call.
void GameObjectManager::Add(std::unique_ptr<Entity> gameObject)
{
    _gameObjects.insert(std::make_pair(ID, std::move(gameObject)));
    ID++;
} 
```

我收到的错误消息是；

```
'std::unique_ptr<_Ty>::unique_ptr' : cannot access private member declared in class 'std::unique_ptr<_Ty>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:25:53.273

您需要通过使用将所有权从`addEntity`to传递：`Add``std::move`

```
if(gameObject->isCollidable()){
    _actors.Add(std::move(gameObject));
} else {
    _props.Add(std::move(gameObject));
} 
```

`unique_ptr`如果不明确允许将其移出，则无法传递 a 。这就是使它成为唯一指针的原因。如果您可以复制它，那么原件和副本都将指向同一个对象。当您离开它时，原始指针将所有权放弃给新指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:27:23.013

您正在尝试将`unique_ptr` *左值*传递给采用`unique_ptr` *by value*的函数，这将导致创建该指针的**副本**：这是故意禁止的。唯一指针旨在模拟**唯一所有权**：这意味着拥有唯一指针的实体拥有指向对象的所有权。

复制一个唯一指针将意味着在整个系统中分布有多个拥有指针：这当然会破坏唯一所有权的目的本身，这解释了为什么您不能复制唯一指针。

你可以做的是*转移*这个所有权，所以如果你调用一个接受唯一指针的函数，你可以在将它作为参数传递给该函数时*移动它：*`unique_ptr`

```
_actors.Add(std::move(gameObject));
//          ^^^^^^^^^ 
```

*请注意，通过远离*唯一指针来转移所有权意味着调用函数留下了一个“僵尸”唯一指针对象，该对象不再拥有它先前指向的对象：因此，调用函数不应尝试取消引用它了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T16:34:42.980

您不能通过`unique_ptr`值传递。以下正在尝试创建 a 的副本`unique_ptr`，这是被禁止的：

```
if(gameObject->isCollidable()){
    _actors.Add(gameObject);     // THIS LINE
} else {
    _props.Add(gameObject);      // and THIS LINE
} 
```

一个解决方案是通过`std::move()`：

```
if(gameObject->isCollidable()){
    _actors.Add(std::move(gameObject));
//              ^^^^^^^^^
} else {
    _props.Add(std::move(gameObject));
//              ^^^^^^^^^
} 
```

这将导致两次所有权转移。一个是`std::unique_ptr<Entity>`which 的输入参数，`GameObjectManager::Add`一个是`std::pair`in的输入参数`_gameObjects`。

另一种解决方案是修改签名`GameObjectManager::Add`以获取参考：

```
void GameObjectManager::Add(std::unique_ptr<Entity> & gameObject)
//                                                 ^^^ 
```

现在，您可以像当前一样调用该方法，这将只导致一次所有权转移（到`pair`in `_gameObjects`）。

但是，正如@Xeo 在评论中指出的那样，第二个选项违反了最佳实践的经验法则，即：*所有权转让应该在所有点上都是明确的*。

# php - 来自地址的 Phpmailer 失败

> ID：16001298
> 
> 赞同：0
> 
> 时间：2013-04-14T16:22:30.267
> 
> 标签：php, smtp, phpmailer, zoho

我目前将我的网站托管在不允许 SMTP 的 freehostia 上。作为解决此问题的方法，我在 Zoho (www.zoho.com) 创建了一个帐户，可让您将您的域链接到他们的服务器并通过他们发送和接收电子邮件。我还按照指示在我的主机上安装了 phpmailer。

我使用 Zoho 提供的 smtp 信息创建了一个测试文件，据我所知，一切都设置正确。
问题是当我尝试发送邮件时出现错误： **Mailer Error: The following From address failed: donotreply@domain.com : Called Mail() without being connected**

我的测试文件代码如下所示：

```
<?php
require '../PHPMailer-master/class.phpmailer.php';

$mail = new PHPMailer();

$mail->IsSMTP();

$mail->SMTPAuth = true;

$mail->SMTPSecure = "ssl";

$mail->Host = "smtp.zoho.com";

$mail->Port = 465;

$mail->Username = "donotreply@domain.com";

$mail->Password = "mypassword";

$mail->From = "donotreply@domain.com";

$mail->FromName = "Domain";

$mail->AddAddress("testaddress@gmail.com");

$mail->Subject = "Test with PHPMailer";

$mail->Body = "This is a sample body text!";

$mail->IsHTML (true);

if(!$mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
} else {
  echo "Message sent!";
}

?> 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T16:39:05.413

事实证明，通过 freehostia 的免费计划不允许任何传出连接，因此尝试联系任何外部邮件服务器是不可能的。不过感谢您的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-16T15:50:41.527

我花了很多时间才弄清楚 CentOS 7 默认禁用 SMTP 连接。

如果您遇到此“邮件程序错误：以下发件人地址失败：”和“调用 Mail()，但未连接”，请尝试运行这些行。

sudo setsebool -P httpd_can_sendmail 1 sudo setsebool -P httpd_can_network_connect 1

感谢以下网络文章：

[https://gistpages.com/posts/phpmailer_smtp_error_failed_to_connect_to_server_permission_denied_13_fix](https://gistpages.com/posts/phpmailer_smtp_error_failed_to_connect_to_server_permission_denied_13_fix)

# wpf - 从 Microsoft.Windows.Controls.DataGrid 获取行

> ID：16001306
> 
> 赞同：0
> 
> 时间：2013-04-14T16:23:17.347
> 
> 标签：wpf

我想访问 DataGrid 中的元素。我正在使用以下代码。但是我无法获取 DataGrid 的行。我得到空值。我只想知道为什么我得到空值以及如何解决这个问题.

```
 int itemscount = (dgMtHdr.Items.Count);
                dgMtHdr.UpdateLayout();
                for (int rowidx = 0; rowidx < itemscount; rowidx++)
                {

                    Microsoft.Windows.Controls.DataGridRow dgrow = (Microsoft.Windows.Controls.DataGridRow)this.dgMtHdr.ItemContainerGenerator.ContainerFromIndex(rowidx);

                    if (dgrow != null)
                    {
                        DataRow dr = ((DataRowView)dgrow.Item).Row;
                        if (dr != null)
                        {

                                obj = new WPFDataGrid();
                                Microsoft.Windows.Controls.DataGridCell cells = obj.GetCell(dgMtHdr, rowidx, 7);
                                if (cells != null)
                                {
                                    ContentPresenter panel = cells.Content as ContentPresenter;
                                    if (panel != null)
                                    {
                                        ComboBox cmb = obj.GetVisualChild<ComboBox>(panel);
                }
                }
            }
        }
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:11:08.437

`DataGrid`内部托管项目，`DataGridRowsPresenter`其中派生自`VirtualizingStackPanel`which 意味着默认情况下在 UI 上呈现的项目支持虚拟化，即`ItemContainer`不会为尚未在 UI 上呈现的项目生成。

这就是为什么`null`当您尝试获取未在 UI 上呈现的行时得到的原因。

因此，如果您准备好与虚拟化进行权衡，您可以`turn off the Virtualization`这样 -

```
<DataGrid x:Name="dgMtHdr" VirtualizingStackPanel.IsVirtualizing="False"/> 
```

现在，`DataGridRow`对于任何索引值都不会为空。

或者

您可以通过手动调用`UpdateLayout()`和`ScrollIntoView()`索引来获取该行，以便为您生成容器。有关详细信息，请参阅[此处](https://stackoverflow.com/questions/8464704/get-row-in-datagrid)的链接。从链接 -

```
if (row == null)
{
    // May be virtualized, bring into view and try again.
    grid.UpdateLayout();
    grid.ScrollIntoView(grid.Items[index]);
    row = (DataGridRow)grid.ItemContainerGenerator.ContainerFromIndex(index);
} 
```

**编辑**

由于您`DataGrid`位于尚未呈现的第二个选项卡中。这就是为什么它`ItemContainerGenerator`没有生成项目所需的相应容器的原因。因此，一旦通过挂钩`StausChanged`事件生成项目容器，您就需要这样做 -

```
 dgMtHdr.ItemContainerGenerator.StatusChanged += new 
      EventHandler(ItemContainerGenerator_StatusChanged);

    void ItemContainerGenerator_StatusChanged(object sender, EventArgs e)
    {
        if ((sender as ItemContainerGenerator).Status == 
               GeneratorStatus.ContainersGenerated)
        {
            // ---- Do your work here and you will get rows as you intended ----

            // Make sure to unhook event here, otherwise it will be called 
            // unnecessarily on every status changed and moreover its good
            // practise to unhook events if not in use to avoid any memory
            // leak issue in future.

            dgMtHdr.ItemContainerGenerator.StatusChanged -= 
                                ItemContainerGenerator_StatusChanged;
        }
    } 
```

# python - 在 Python 中删除字符串中间的连续字符

> ID：16001307
> 
> 赞同：6
> 
> 时间：2013-04-14T16:23:33.897
> 
> 标签：python, line-breaks

Google 地图 API 的标准返回值如下所示 - 从字节转换为字符串后：

```
b'{\n   "destination_addresses" : [ "Washington, DC, USA" ],\n   "origin_addresses" : [ "New York, NY, USA" ],\n   "rows" : [\n      {\n         "elements" : [\n            {\n               "distance" : {\n                  "text" : "370 km",\n                  "value" : 369720\n               },\n               "duration" : {\n                  "text" : "3 hours 48 mins",\n                  "value" : 13672\n               },\n               "status" : "OK"\n            }\n         ]\n      }\n   ],\n   "status" : "OK"\n}\n' 
```

为了进一步处理，我想先删除所有换行符。但是，我不知道该怎么做

```
results_str.replace('\n', "") 
```

将不起作用，.ie，它返回相同的字符串而不替换'\ n'，因为行继续符。

当我加倍反斜杠时也会发生同样的事情

```
results_str.replace('\\n', "") 
```

有小费吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-14T16:25:34.320

```
results_str.replace('\n', "") 
```

你是如此接近。是字符串文字中的`\`转义字符，因此您必须将其加倍，或使用原始字符串：

```
results_str.replace('\\n', "") 
results_str.replace(r'\n', "") 
```

还要记住 Python 字符串是不可变的：`replace()`返回一个新字符串，因为无法修改现有字符串。如果要保留更改后的字符串，则必须将其分配给某个名称，例如原始名称：

```
results_str = results_str.replace(r'\n', "") 
```

尽管您可能希望以不关心换行符的方式处理数据。这看起来像 JSON，所以与其尝试自己解析它，不如使用 Python`json`模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:31:08.820

这是一个 JSON 响应。而不是试图弄乱字符串，你应该使用`json`模块来解析字符串：

```
import json
result = b'{\n   "destination_addresses" : ...'
obj = json.loads(obj.decode('utf-8')) 
```

# django - django EmailMessage 异常

> ID：16001311
> 
> 赞同：3
> 
> 时间：2013-04-14T16:24:01.010
> 
> 标签：django, email

我正在使用 django 的 EmailMessage 类发送带有以下代码的电子邮件

```
message = EmailMessage(subject, text_content, from_email, [to])
    try:
        message.send()
        return True
    except Exception, e:
        return False 
```

我想知道在什么情况下会抛出什么异常，例如，我可以使用什么异常来处理错误的电子邮件地址、糟糕的互联网连接等等。我真的需要能够告诉用户为什么无法发送电子邮件。

我正在使用 django 1.5 并查看了文档但没有成功。对你的帮助表示感谢。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T19:04:29.500

Django 使用 Python [smtplib](http://docs.python.org/2.7/library/smtplib.html#smtplib)模块。查看那里列出的异常类型。

# html - CSS 页脚不在页面底部

> ID：16001323
> 
> 赞同：0
> 
> 时间：2013-04-14T16:24:57.020
> 
> 标签：html, css

我的页脚有这个 CSS：

```
/* FOOTER */
#footer {
    width:100%;
    height:580px;
    border-top:4px solid #666666;
    background-color:#eeeeee;
}
#footer-inner {
    width:80%;
    margin:0 auto 0 auto;
    height:inherit;
}
#footerTop {
    width:100%;
    height:480px;
    margin-top:10px;
    border-bottom:2px #000000 solid;
}
#footerTopLeft {
    width:30%;
    height:420px;
    float:left;
    display:inline;
    margin-top:10px;
    padding:0 15px 10px 15px;
    border-right:1px solid #000000;
}
#footerTopMid {
    width:30%;
    height:420px;
    float:left;
    display:inline;
    margin-top:10px;
    padding:0 15px 10px 15px;
    border-right:1px solid #000000;
}
#footerTopRight {
    width:30%;
    height:420px;
    float:left;
    display:inline;
    padding:0 15px 10px 15px;
} 
```

我需要在页面底部没有间隙但由于某种原因大约有半英寸的间隙

这是一个小提琴：http: [//jsfiddle.net/mYqS3/1/](http://jsfiddle.net/mYqS3/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:29:35.443

`#footerTop`改为_ `margin-top`_`padding-top`

```
#footerTop {
    width:100%;
    height:480px;
    padding-top:10px;
    border-bottom:2px #000000 solid;
} 
```

# ruby-on-rails - 使用 TCPSocket 通过 Ruby 连接到 Rails 服务器。获取“所需长度 WEBrick::HTTPStatus::LengthRequired”

> ID：16001326
> 
> 赞同：0
> 
> 时间：2013-04-14T16:25:09.940
> 
> 标签：ruby-on-rails, ruby, webrick, content-length, tcpsocket

我正在尝试连接到 Rails 服务器，但我不断得到的响应是

```
 Length Required WEBrick::HTTPStatus::LengthRequired 
```

我正在使用 TCPSocket 连接到服务器。

```
 require 'socket'  
    host = 'localhost'       
    port = 3000                             
    path = '/books/show'  
    #Path of the controller and action to connect to  
    request = "POST #{path} HTTP/1.0\r\n\r\n " 
    socket = TCPSocket.open(host,port)    
    socket.print(request) 
```

我怀疑它是指定内容长度的方式

```
 socket.puts "content-length: 206\r\n" 
    #write response from server to html file  
    File.open('test2.html', 'w') do |res|  
      while (response_text = socket.gets)        
        res.puts "#{response_text}"       
      end   
    end  
    socket.close 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T22:58:18.427

空白行终止标头，您将需要写入内容长度字节。尝试以下操作（注意第二个 \r\n 的移动和 206 个空格的放置）：

```
require 'socket'
host = 'localhost'
port = 3000
path = '/products'
#Path of the controller and action to connect to
request = "POST #{path} HTTP/1.0\r\n"
socket = TCPSocket.open(host,port)
socket.print(request)
socket.puts "content-length: 206\r\n\r\n"
socket.puts ' ' * 206
#write response from server to html file
File.open('test2.html', 'w') do |res|
  while (response_text = socket.gets)
    res.puts "#{response_text}"
  end
end
socket.close 
```

# java - 如何在 JDOM2 中获取 CDATA 的值

> ID：16001329
> 
> 赞同：0
> 
> 时间：2013-04-14T16:25:24.817
> 
> 标签：java, jdom-2

我正在尝试使用 getText() 在 JDOM2 中检索 CDATA 值，但我只得到以下内容 -
`<![CDATA[ ]]>`

我的 XML 如下所示

```
<ROOT>
 <CHILD>
    <P><![CDATA[<ROOT><ELEMENT>SOMECONTENT</ELEMENT></ROOT>]]></P>
 </CHILD>
</ROOT> 
```

CDATA 包含我需要的 XML 内容作为字符串来存储它 elsewejhere 代码（片段）如下所示

```
XPathFactory xpfac = XPathFactory.instance();
XPathExpression<Element> xElements = xpfac.compile(sXpath,Filters.element(),null,Namespace.getNamespace("myns", "http://www.namespace.com/ns"));
List<Element> elements = xElements.evaluate(doc);       
for (Element xElem : elements) {
    if(!isCDATA)
    {
        sRetval=xElem.getValue();
    }
    else
    {
        sRetval=xElem.getText();
    }
    return sRetval;
} 
```

`getValue()`工作正常，而`getText()`只返回`<![CDATA[ ]]>`

当然我的 XPAHT 看起来像这样 `//ROOT/CHILD/P` 知道如何获取 CDATA 的内容吗？

编辑：如果我重新 `<P><![CDATA[ SOMECONTENT]]></P>`获得“SOMECONTENT”..所以我无法从 CDATA 获取 XML 内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T02:52:11.130

我试图重现您的问题，但不能......（作为正确格式化的答案发布）......

```
public static void main(String[] args) throws JDOMException, IOException {
    final String xml = "<ROOT>\n <CHILD>\n    <P><![CDATA[<ROOT><ELEMENT>SOMECONTENT</ELEMENT></ROOT>]]></P>\n </CHILD>\n</ROOT>";

    Document doc = new SAXBuilder().build(new StringReader(xml));
    XPathFactory fac = XPathFactory.instance();
    XPathExpression<Element> ex = fac.compile("//ROOT/CHILD/P", Filters.element());
    for (Element e : ex.evaluate(doc)) {
        System.out.printf("getValue() %s\n", e.getValue());
        System.out.printf("getText() %s\n", e.getText());
    }
} 
```

产生：

```
getValue() <ROOT><ELEMENT>SOMECONTENT</ELEMENT></ROOT>
getText() <ROOT><ELEMENT>SOMECONTENT</ELEMENT></ROOT> 
```

我对你有什么不同？

# java - 下面递归方法的运行时分析

> ID：16001335
> 
> 赞同：0
> 
> 时间：2013-04-14T16:25:42.397
> 
> 标签：java, recursion, runtime, analysis

有人可以帮我对以下代码进行运行时分析：

```
public static void f(int n) 
{
    for (int i = 0; i <= n; i++) 
    {
        System.out.print("+" + i);
    }
    if (n <= 1) 
    {
        return;
    } else 
    {
        f(n / 3);
        f(n / 3);
    }
} 
```

据我说，代码递归公式的运行时间是：

> T(n) = cn + 2T(n/3)

我认为答案应该是`Θ(nlog(n))`，但书上的解决方案显示它是`Θ(n)`。书中还说`n = 3^k`为了简单起见。

有人可以向我解释正确的答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:51:04.750

考虑使用[主定理](http://en.wikipedia.org/wiki/Master_theorem)。您的情况对应于案例 1，其中 f(n)=cn 为 O(n)。在 a=2 和 b=3 的情况下，应用定理，我们有 T(n) 是 bigTheta(n^log3(2))，即 BigTheta(n)。

希望能帮助到你 ...

# ruby-on-rails-3 - 没有重定向的Rubycas网关

> ID：16001339
> 
> 赞同：1
> 
> 时间：2013-04-14T16:25:53.333
> 
> 标签：ruby-on-rails-3, cas, rubycas

我有一个适用于多个域名的 Rails 3.2 应用程序，例如：www.domain1.com、www.domain2.com、...我`CASClient::Frameworks::Rails::Filter`用于一些公共页面。在这些公共页面上，我还需要显示当前登录的用户。一切正常，但问题是它通常在用户第一次请求页面时重定向。那些公共页面被索引对 SEO 来说真的很糟糕。

假设我有两个域：`domain1.com`和`domain2.com`. 用户登录到 domain1.com。为了显示当前用户同时登录的域名，我必须调用`CASClient::Frameworks::Rails::Filter`. 但是，此方法将在每个域的第一个请求时重定向。是否可以在显示当前登录两个域的用户的同时不进行重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:19:13.020

您能否进一步说明您的意思是表明他们已登录？根据您写的内容，如果用户登录到 domain1.com，那么他们会登录到 domain2.com。你可以：

1）至少，检查用户是否已经登录到一个域，然后列出所有域。2）因为你提到了seo，我假设你有一个存储用户记录并验证他们是否可以作为用户的数据库。您可以更新用户的记录。如果数据被规范化为用户可以连接的域表，您可以在那里插入/更新用户的记录。（即一个表用户域，如 id、user_id、domain_id、lastupdated、signed_in_count）并从该表中提取。

你可以从模型中做很多其他的事情，但在所有问题中可能需要更多的澄清。

希望这可以帮助

# python - 在 python 中使用 scipy.integrate.odeint 时遇到问题

> ID：16001341
> 
> 赞同：3
> 
> 时间：2013-04-14T16:26:02.410
> 
> 标签：python, scipy

我试图使用 odeint 来解决问题。我的代码如下：

```
import numpy as np
import matplotlib.pyplot as plt
from scipy.integrate import odeint

eta=1.24e-9/2
def fun(x):
    f=1.05e-8*eta*x**(1.5)*np.exp(13.6/x)
    return (np.sqrt(1.+4*f)-1)/2./f
x=np.arange(0,1,0.001)
y=odeint(fun,x,0)[0]
plt.plot(x,y)
plt.plot(x,x)
plt.show() 
```

如果两条曲线相同，这显然是错误的。如果我绘制函数，它看起来像一个阶跃函数，在大约 0.3 之前非常小，并且呈指数增长到 1。你能帮我弄清楚它有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T05:06:29.003

您的代码有几个问题，如果您更仔细地阅读[文档字符串`odeint`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.odeint.html#scipy.integrate.odeint)，其中大部分可能会自己解决。

为了帮助您入门，以下是求解标量微分方程的简单示例`odeint`。我将使用一个非常简单的方程式，而不是尝试理解（并可能调试）您的函数。我将求解方程 dy/dt = a * y，初始条件 y(0) = 100。一旦你有这个例子工作，你可以修改`fun`来解决你的问题。

```
import numpy as np
from scipy.integrate import odeint
import matplotlib.pyplot as plt

def fun(y, t, a):
    """Define the right-hand side of equation dy/dt = a*y""" 
    f = a * y
    return f

# Initial condition
y0 = 100.0

# Times at which the solution is to be computed.
t = np.linspace(0, 1, 51)

# Parameter value to use in `fun`.
a = -2.5

# Solve the equation.
y = odeint(fun, y0, t, args=(a,))

# Plot the solution.  `odeint` is generally used to solve a system
# of equations, so it returns an array with shape (len(t), len(y0)).
# In this case, len(y0) is 1, so y[:,0] gives us the solution.
plt.plot(t, y[:,0])
plt.xlabel('t')
plt.ylabel('y')
plt.show() 
```

这是情节：

![示例生成的绘图](https://i.stack.imgur.com/cn41x.png)

更复杂的使用示例`odeint`可以在[SciPy Cookbook](http://www.scipy.org/Cookbook)中找到（向下滚动到标有“普通微分方程”的项目符号）。

# php - 如何删除左外连接

> ID：16001343
> 
> 赞同：1
> 
> 时间：2013-04-14T16:26:06.580
> 
> 标签：php, mysql, sql, left-join

我目前正在尝试删除我为 PHP 上的 CMS 网站创建的 LEFT OUTER JOIN，我的 LEFT OUTER JOIN 如下所示：

```
$sqlQuery = "SELECT filename FROM phpland LEFT OUTER JOIN 
images ON phpland.image_id = images.id WHERE phpland.id = '$pageid' "; 
```

在这种情况下，phpland 和 images 是我的表的名称，并且`$pageid`是我传递给它的 id，但它似乎没有问题，但是当我尝试删除它时，我正在尝试：

```
DELETE filename from phpland AS filename LEFT OUTER JOIN images 
ON phpland.image_id = images.id WHERE phpland.id = '$pid' " 
```

同样的情况我传递了 ID，我什至在 PHP 上回显 ID 以确保是我希望删除的 ID，但它告诉我 ID 不明确，我不确定我做错了什么主键table`images.id`是 phpland 上的外键，因为`image_id`.

我希望这不会让任何人感到困惑，我们非常感谢任何类型的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T10:27:38.920

当您要删除的 id 已经在 phpland 中时，为什么要引用表格图像？

而且您的删除语法很旧。尝试：

```
DELETE FROM phpland 
WHERE phpland.id = '$pageid' 
```

另见[http://dev.mysql.com/doc/refman/5.0/en/delete.html](http://dev.mysql.com/doc/refman/5.0/en/delete.html)

# django - 在 Django Piston 中使用 OneToMany 关系处理程序进行递归

> ID：16001344
> 
> 赞同：1
> 
> 时间：2013-04-14T16:26:08.547
> 
> 标签：django, recursion, one-to-many, django-piston

无论我尝试了什么，对于我简单的 OneToMany 关系，我都无法使用请求处理程序解决递归问题，比如说父亲 1 : N Sons

FatherHandler 应在其结果集中返回 sons_set（儿子列表）。SonHandler 应在结果集中返回父对象。

由于字段，排除，设置似乎静态绑定到处理程序（以及背后的模型），似乎不可能动态更改要返回的字段，我总是以递归结束。（例如，当从 SonHandler 调用时，我确实尝试从字段列表中排除 sons_set，但最初的 FatherHandler 设置似乎仍然有效）

```
class FatherHandler(GenericHandler):
    model = Father
    exclude = () # to also show 'id' field
    fields = ('id', 'name', ('son_set', ('id', 'name')))
    allowed_methods = ('GET', 'POST', 'PUT')

class SonHandler(GenericHandler):
    model = Son
    exclude = () # to also show 'id' field
    fields = ('id', 'name', ('father', ('id', 'name')))
    allowed_methods = ('GET', 'POST', 'PUT', 'DELETE')

    def read(self, request, key=None):
        FatherHandler.exclude = ('son_set')
        # does not work ... 
```

# .htaccess - htaccess 重定向 https

> ID：16001345
> 
> 赞同：1
> 
> 时间：2013-04-14T16:26:09.957
> 
> 标签：.htaccess, redirect, ssl, rewrite

我正在运行一个基于 CMS 的网站。在 CMS 后端中，可以选择通过 https 提供网站服务。然后这会更新一个 config.php 文件。这可能与以下问题有关，也可能无关。

我最近在 Stack Overflow 上发布了一些关于如何重定向到规范名称的问题。由于我使用的是 SSL，因此同一地址有 4 个变体：

> [https://example.com](https://example.com)
> 
> [https://www.example.com](https://www.example.com)
> 
> [http://example.com](http://example.com)
> 
> [http://www.example.com](http://www.example.com)

选择的规范名称是第一个变体 - 非 www。HTTPS。

Stack Overflow 上的一些成员为我提供了一段代码。但是，这会导致错误“重定向循环”。这是生成此重定向循环的代码：

```
RewriteCond %{HTTP_HOST} ^www\.example\.com$ [OR]
RewriteCond %{HTTPS} off
RewriteRule ^.*$ https://example.com/$0 [R,L] 
```

我摆弄了这个片段。我真的不知道我在做什么，所以很惊讶地报告它似乎正在工作。我将上面第二行的结尾更改为“on”。

现在，以下传入的 URL 会重定向：

www.example.com = [https://example.com/](https://example.com/)（好）

example.com => example.com 但是当您导航到任何其他页面时会出现所需的[https://example.com/somepage](https://example.com/somepage)（有点好）

[https://www.example.com](https://www.example.com) => [https://example.com](https://example.com)（好）

[https://example.com](https://example.com) => [https://example.com](https://example.com)（好）

所以2个问题：

1）为什么我的代码有效？！它应该工作吗？我谨慎乐观但持怀疑态度，因为我真的不知道自己在做什么。

2）example.com 上面的第二个变体在登陆时不会重定向，而是在导航到站点中的任何其他位置时进行。有没有办法设置 htaccess 文件代码，以便访问 example.com 的人被重定向到[https://example.com](https://example.com)？

# c++ - 在标识符 '��' 之前缺少 ')'

> ID：16001346
> 
> 赞同：0
> 
> 时间：2013-04-14T16:26:13.713
> 
> 标签：c++, visual-studio-2010

我正在阅读一本书来学习 C++ 并直接从中复制；

```
#include <iostream>
#include <Windows.h>

using namespace std;

int main()
{
    cout << "Enter true (1) or false (0) for two operands:" << endl;
    bool Op1 = false, Op2 = false;
    cin >> Op1;
    cin >> Op2;

    cout << Op1 << " AND " << Op2 << " = " << (Op1 && Op2) << endl;
    cout << Op1 << " OR " << Op2 << " = " << (Op1 ¦¦ Op2) << endl;

    Sleep(60000);

    return 0;
} 
```

我添加了 windows.h 和 sleep 功能，但除此之外它是相同的。它一直在说 - course5.cpp(14): error C2146: syntax error: missing ')' before identifier '¦¦'

我一直在尝试修复它大约半小时，但在互联网上找不到任何解决方案。有人请帮帮我吗？这似乎很奇怪，我希望这是我刚刚失踪的显而易见的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:31:42.857

这里似乎有错误的字符：`(Op1 ¦¦ Op2)`. 它应该是：`(Op1 || Op2)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:33:39.227

您不应从文档/PDF 中复制和粘贴代码，因为它们可能包含无效的 C++ 字符。

因此，只需将这部分`(Op1 ¦¦ Op2)`自己键入为`(Op1 || Op2)`.

# html - 带圆角 1px 边框的边框间距

> ID：16001356
> 
> 赞同：0
> 
> 时间：2013-04-14T16:27:12.100
> 
> 标签：html, css, html-table, border-spacing

我找不到匹配的答案。

```
<table class="table1">
<tr>
    <td class="red header" colspan="4">
        Table1 header</td>
</tr>
...
<tr>
    <td class="red footer" colspan="4">Footer</td>
</tr> 
```

```
<table class="table2">
<tr>
    <td class="red header" colspan="4">
        Table2 header</td>
</tr>
...
<tr>
    <td class="red footer" colspan="4">Footer</td>
</tr> 
```

```
table {
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
border-radius: 5px;
border: 1px solid #000;
}

.table1 {
border-spacing: 0;
}

.table2 {
border-collapse: collapse;
}

.footer {
-moz-border-bottom-right-radius: 5px;
-webkit-border-bottom-right-radius: 5px;
border-bottom-right-radius: 5px;
-moz-border-bottom-left-radius: 5px;
-webkit-border-bottom-left-radius: 5px;
border-bottom-left-radius: 5px;
}

.header {
-moz-border-top-right-radius: 5px;
-webkit-border-top-right-radius: 5px;
border-bottom-top-radius: 5px;
-moz-border-top-left-radius: 5px;
-webkit-border-top-left-radius: 5px;
border-top-left-radius: 5px;
text-align: center;
}

td {
border: 1px solid #000;
} 
```

[http://jsfiddle.net/uXUnm/](http://jsfiddle.net/uXUnm/)

如您所见，`table1`有 2px 边框（我想要 1px），`table2`没有圆角边框。`border-collapse:collapse;`修复了由`border-spacing: 0;`但破坏了舍入引起的第一个问题。谁能告诉我一种方法来解决这两个问题而不会弄乱`:first-child`等`last-child`选择器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T13:57:52.137

这是我的固定CSS：

```
table {
    border:1px solid black;
    border-radius: 5px;
    border-spacing: 0;
}
table td:first-child, table td:not(:first-child):not(:last-child){
    border-right:1px solid black;
}
table tr:first-child td, table tr:not(:last-child) td {
    border-bottom:1px solid black;
}

table thead tr:first-child  td:first-child {
    -webkit-border-top-left-radius: 2px;
    -moz-border-radius-topleft: 2px;
    border-top-left-radius: 2px;
}

table thead tr:first-child  td:last-child {
    -webkit-border-top-right-radius:2px;
    -moz-border-radius-topright: 2px;
    border-top-right-radius: 2px;
}
table tbody tr:last-child  td:first-child {
    -webkit-border-bottom-left-radius: 2px;
    -moz-border-radius-bottomleft: 2px;
    border-bottom-left-radius: 2px;
}

table tbody tr:last-child  td:last-child {
    -webkit-border-bottom-right-radius: 2px;
    -moz-border-radius-bottomright: 2px;
    border-bottom-right-radius: 2px;
} 
```

你可以设置边框半径：5px；任何价值，它都会完美地工作！

# ios - 在 MapView 上绘制半径（圆）

> ID：16001358
> 
> 赞同：1
> 
> 时间：2013-04-14T16:27:23.517
> 
> 标签：ios, objective-c, xcode, mapkit

我以前看过这个问题，所有的回答看起来都差不多。但是，我根本无法让他们中的任何一个为我的项目工作。

我有一个由按钮触发的操作 updateMap。它在地图 (MapKit) 上显示当前位置，并显示与其位置相关的一些其他信息（地理编码）。所有这些工作正常。我需要做的是在地图上显示他们位置周围的半径。这是我正在尝试但不起作用的方法：

（在更新地图中）

```
//display radius
CLLocationCoordinate2D center = {current.coordinate.latitude, current.coordinate.longitude};
MKCircle *circle = [MKCircle circleWithCenterCoordinate:center radius:1000];
[self.mapView addOverlay:circle]; 
```

（“current”是一个 CLLocation 变量，包含用户的当前位置）

然后，在实现文件中的操作之后，我有这个：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id<MKOverlay>)overlay
{
    MKCircleView *circleView = [[MKCircleView alloc] initWithOverlay:overlay];
    [circleView setFillColor:[UIColor redColor]];
    [circleView setStrokeColor:[UIColor blackColor]];
    [circleView setAlpha:0.5f];
    return circleView;
} 
```

它构建良好，但地图上从未显示任何圆圈。

该站点上的其他解决方案涉及将第一个代码显示在 viewDidLoad 方法中，但由于尚未计算位置（仅在上述操作中确定），这对我来说不是一个选项。

感谢您的时间和您可以提供的任何帮助。我绝不是这里许多人的水平，所以如果这有一个明显的答案，请原谅。我不想被勺子喂，我想学习！谢谢阅读。

# android - 折叠空行Listview Android

> ID：16001359
> 
> 赞同：0
> 
> 时间：2013-04-14T16:27:31.323
> 
> 标签：android, listview, android-listview, null

我正在弄清楚如何折叠我的 ListView。

我有一个这样的字符串数组：

*   爱丽丝
*   鲍勃
*   无效的
*   无效的
*   无效的
*   卡尔

我需要显示一个非空的 ListView，但是如果我点击 Carl，我需要知道 Carl 排在第 5 位。

我的 ListAdapter 显示了 3 个条目（Alice、Bob、empty_entry）；如果我点击 empty_entry 它需要 Carl 但位置是 2 而不是 5。

如何修复我的代码？

```
package com.gorgo.pirates.model;

import android.content.Context;
import android.graphics.Color;
import android.graphics.Typeface;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.MeasureSpec;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

import com.example.pirates.R;

public class ListViewCustomAdapter extends BaseAdapter {
public String title[];

public Context context;
public LayoutInflater inflater;

public ListViewCustomAdapter(Context context, String[] title) {
    super();

    this.context = context;
    this.title = title;
    this.inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

@Override
public int getCount() {
    // return not-null values count
    int count = 0;
    for (int i = 0; i < title.length; i++) {
        if (title[i] != null)
            count++;
    }
    return count;
}

@Override
public Object getItem(int position) {
    int start = position;

    while (start != title.length) {
        if (title[start] != null)
            return title[start];
        else
            start++;
    }

    return null;
}

@Override
public long getItemId(int position) {
    return 0;
}

public static class ViewHolder {
    TextView txtViewTitle;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    Typeface chops = Typeface.createFromAsset(this.context.getAssets(),
            "Commodore.ttf");

    ViewHolder holder;
    if (convertView == null) {
        holder = new ViewHolder();
        convertView = inflater.inflate(R.layout.listitem_row, null);

        holder.txtViewTitle = (TextView) convertView
                .findViewById(R.id.txtViewTitle);
        convertView.setTag(holder);
    } else
        holder = (ViewHolder) convertView.getTag();

    holder.txtViewTitle.setText(title[position]);
    holder.txtViewTitle.setTypeface(chops);
    holder.txtViewTitle.setTextColor(Color.CYAN);
    holder.txtViewTitle.setShadowLayer(10, 5, 5, Color.BLACK);
    holder.txtViewTitle.measure(MeasureSpec.makeMeasureSpec(
            convertView.getWidth() - 5, MeasureSpec.EXACTLY), MeasureSpec
            .makeMeasureSpec(convertView.getHeight(), MeasureSpec.EXACTLY));
    holder.txtViewTitle.layout(0, 0,
            holder.txtViewTitle.getMeasuredWidth(),
            holder.txtViewTitle.getMeasuredHeight());
    holder.txtViewTitle.setTextSize(13);

    return convertView;
}
} 
```

谢谢 ：）

# vbscript - Execute Batch file with argument through VBSscript

> ID：16001361
> 
> 赞同：0
> 
> 时间：2013-04-14T16:27:41.970
> 
> 标签：vbscript, batch-file

Scenario: To generate multiple reports from the database, we execute the batch file in command prompt like

`C:\program files> cmdbatchtest1.bat servername date Y Y`

With VBScript I tried to do similar:

```
set shell=createobject("wscript.shell")
shell.Run "test1.bat.bat", 1, True '''''able to execute batch file alone
shell.Run "cmd /K "& com_e & """\tp.bat""" & "&&" & c & "&&" & d, 1, True '''' unable to execute 
```

Please help me to get this working.
Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:34:56.663

在不起作用的行中，您将`&&`作为参数传递给批处理脚本。命令解释器可能正在尝试执行`cmd /k path\to\tp.bat&&server&&date`. 尝试更改`&&`为`Space`这样：

```
shell.Run "cmd /K "& com_e & """\tp.bat"" " & c & " " & d, 1, True 
```

如果这不能解决它，我想我们需要看看你的 variables和`com_e`是如何设置的。`c``d`

* * *

另外，请注意`shell.Run`存在潜在的安全问题。`c`或`d`可能导致该行执行额外的、具有潜在破坏性的命令的邪恶制作值。考虑改用`Shell.Application`对象的[Shell.Execute 方法](http://ss64.com/vb/shellexecute.html)。

```
set shell=CreateObject("Shell.Application")
' shell.ShellExecute "application", "parameters", "path", "verb", window
shell.ShellExecute "tp.bat", c & " " & d, com_e, "runas", 1
set shell=nothing 
```

[有关更多信息，请参阅此问题](https://stackoverflow.com/q/15753224/1683264)的答案。

# php - 使用 Laravel auth::attempt 和哈希密码

> ID：16001362
> 
> 赞同：3
> 
> 时间：2013-04-14T16:27:45.750
> 
> 标签：php, authentication, laravel

这似乎很容易，但我真的无法弄清楚。我想`Auth::attempt($credentials)`在**Laravel 4**中使用，但密码已经过哈希处理（因为它是一个 API）。当我发送未散列的密码时它可以工作，但我不明白如何告诉 Auth “不散列”给定的密码。

快速“演示”</p>

什么有效：

```
Auth::attempt([Request::getUser(), Request::getPassword()]);

curl --user username:notHashedPassword localhost:8000/api/ 
```

什么不起作用：

```
Auth::attempt([Request::getUser(), Request::getPassword()]);

curl --user username:$2y$08$xo7HpxFyeF2UKHOYs/e localhost:8000/api/ 
```

有没有我可以传递给它的论点来`Auth::attempt()`告诉它按原样使用它而不是试图重新散列它（就像我认为的那样）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:51:21.933

您可以手动登录用户

```
$user = User::find($id);

if ($user->password == Request::getPassword()) {
    Auth::login($user->id);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T17:04:37.537

在发送密码之前，您真的不应该对密码进行哈希处理。在没有盐的情况下发送密码之前，您将如何正确地散列密码？如果您在发送密码之前可以访问盐，那么您为什么要使用 API？

如果您担心传递未经哈希处理的密码的安全性，那么您应该使用 SSL 来确保数据的安全传输。

不要认为 API 与使用网页有任何不同——并且在您在网站上提交表单之前不要加盐密码，而是如果您需要依赖于 https / SSL 的安全级别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T16:59:31.177

Laravel 使用的散列方法每次生成不同的散列（即使是相同的字符串）。[你可以在Hashing for Laravel](http://laravel.io/topic/20/hashing-in-laravel)中阅读更多相关信息。如您所见，它不会对两个字符串进行散列并比较它们，而是使用未散列的字符串与散列进行比较。

如果你真的想这样做，你需要实现你自己的 Auth Provider 和一个不同的散列算法，让你比较散列。

如果您担心安全性，您应该考虑使用 HTTPS，以便永远不会以纯文本形式发送安全详细信息（包括密码）。

# python - Confusion on using RETURN inside functions on PYTHON

> ID：16001365
> 
> 赞同：-5
> 
> 时间：2013-04-14T16:27:53.633
> 
> 标签：python, function, return

When I try to create a .py file with return in a function like provided below

```
def results(s1,s2):
    return s1+s2

results(3,4) 
```

it does not show the result when i try to run the .py file in terminal, why is it like this

And also please elaborately explain me where and how to use the RETURN statement and its purpose

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T16:29:23.163

It doesn't show the result because you're not showing it! You have to print explicitly:

```
print results(3, 4) 
```

When you call the function from Python's interactive mode, it does display the return value, but that's a *convenience* for development.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:29:29.490

You're not printing the result. Use this:

```
def results(s1,s2):
    return s1+s2

print results(3,4) 
```

# windows - 返回键为具有焦点的按钮生成 IDOK

> ID：16001366
> 
> 赞同：1
> 
> 时间：2013-04-14T16:27:56.623
> 
> 标签：windows, winapi

我对对话框中的一个按钮做了一个 SetFocus。按钮获得虚线轮廓。当用户按下返回键时，对话框会收到一条 IDOK 消息，而不是来自我设置焦点的按钮的消息。在其他情况下也会发生同样的事情。

为什么会这样？我怎样才能使返回充当按钮按下？

普通的 c++ windows 应用程序，没有 MFC，没有 NET。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:52:14.290

功能，而不是错误。[Enter] 键操作标记为对话框默认按钮的按钮。使用`DEFPUSHBUTTON`.rc 文件中的 或`BS_DEFPUSHBUTTON`样式标志。这通常是“确定”按钮，因此可以`IDOK`返回。[Escape] 键也很特殊，通常是 [Cancel] 按钮。如果您回想以前如何使用对话框，这势必会敲响警钟。

您可以通过按空格键来单击具有焦点的按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:49:52.163

在另一个[SO 问题](https://stackoverflow.com/questions/4580794/win32-c-detecting-enter-in-a-edit-control-withot-subclassing)中，我找到了可能对您有所帮助的[知识库文章](http://support.microsoft.com/kb/102589)：

> 如果对话框或其控件之一当前具有输入焦点，则按 ENTER 键会导致 Windows 发送 WM_COMMAND 消息，其中 idItem (wParam) 参数设置为默认命令按钮的 ID。如果对话框没有默认的命令按钮，则 idItem 参数默认设置为 IDOK。
> 
> 当应用程序接收到 idItem 设置为默认命令按钮 ID 的 WM_COMMAND 消息时，焦点将保留在按下 ENTER 键之前具有焦点的控件上。此时调用 GetFocus() 将返回在按下 ENTER 键之前具有焦点的控件的句柄。应用程序可以检查这个控件句柄并确定它是否属于对话框中的任何编辑控件。如果是这样，则用户正在将数据输入到编辑控件之一中，然后按 ENTER。此时，应用程序可以向对话框发送 WM_NEXTDLGCTL 消息以将焦点移至下一个控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T16:53:04.650

根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644995%28v=vs.85%29.aspx)，

> ## 对话框键盘界面
> 
> 系统为对话框提供了特殊的键盘接口，对多个按键进行特殊处理。该界面生成与对话框中的某些按钮相对应的消息，或者将输入焦点从一个控件更改为另一个控件。以下是此界面中使用的键及其各自的操作。
> 
> ...
> 
> ENTER：向对话框过程发送 WM_COMMAND 消息。wParam 参数设置为 IDOK 或默认按钮的控件标识符。

由于系统拦截并处理直接通过对话框按下的 ENTER 键，因此您需要在对话框过程中通过调用`GetFocus()`来处理它，首先查看哪个控件具有焦点，然后为该特定控件执行适当的操作。

# ios - GPUImageView Black When ViewController Reloaded

> ID：16001370
> 
> 赞同：4
> 
> 时间：2013-04-14T16:28:14.717
> 
> 标签：ios, objective-c, gpuimage

Using the code below (in viewDidLoad), when I first segue from another view to this still camera view (a button press), everything works fine. Then I send out a delegate and have this view dismissed from the previous view.

But, when I press that button on the first view again to show the camera view again, the screen is black. I've changed properties to instance variables, made sure the preview view existed at every step, etc.

But, when I take a picture (even when the screen is black and it's registering focus and exposure activity and responsive to touch) and display a modal view displaying the image for review, I do indeed see what I should have been seeing. And when I dismiss the modal, the camera view works just fine again with NO black.

So, what am I missing here? It's got to be something simple in the framework, IB, storyboard, etc. Thanks!

```
stillCamera = [[GPUImageStillCamera alloc] initWithSessionPreset:AVCaptureSessionPresetPhoto cameraPosition:AVCaptureDevicePositionBack];
stillCamera.outputImageOrientation = UIInterfaceOrientationLandscapeLeft;

UIImage *inputImage = [UIImage imageNamed:@"blank-1x1.png"];
sourcePicture = [[GPUImagePicture alloc] initWithImage:inputImage smoothlyScaleOutput:YES];
[sourcePicture processImage];

filter = [[GPUImageChromaKeyBlendFilter alloc] init];
[(GPUImageChromaKeyBlendFilter *)filter setColorToReplaceRed:0.0 green:1.0 blue:0.0];
[(GPUImageChromaKeyBlendFilter *)filter setThresholdSensitivity:0.37f];

[stillCamera addTarget:filter];
[sourcePicture addTarget:filter];

[filter addTarget:videoPreviewView];
[stillCamera startCameraCapture]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:29:41.473

我建议仔细阅读这个帖子和这个评论：[https](https://github.com/BradLarson/GPUImage/issues/130#issuecomment-5936685) ://github.com/BradLarson/GPUImage/issues/130#issuecomment-5936685 。希望对你也有帮助。

# android - Changin content of FragmentB from FragmentA of a ViewPager

> ID：16001378
> 
> 赞同：0
> 
> 时间：2013-04-14T16:29:26.650
> 
> 标签：android, android-fragments, android-viewpager

I try to change a TextView from the DetailFragmentA in the DetailFragmentB from a ViewPager. Following it the code I tried to do that. But the App crashes with following LogCat if I press a Button to change the TextView in FragmentB. What can I do? Which a static variable it worked, but that's not a realy good solution.

This is my Activity and Adapter:

```
public class ViewPagerExample extends FragmentActivity {
    private MyAdapter mAdapter;
    private ViewPager mPager;

    public Fragment detailFragmentA = new Fragment();
    public Fragment detailFragmentB = new Fragment();

    public static String saveText;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mAdapter = new MyAdapter(getApplicationContext(), getSupportFragmentManager(), detailFragmentA, detailFragmentB);

        mPager = (ViewPager) findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);
    }

    public  void refresh(String text){
        ((DetailFragmentB) detailFragmentB).changeText(text);   
    }

    public static class MyAdapter extends FragmentPagerAdapter {
        private Context _context;
        private Fragment fragmentA;
        private Fragment fragmentB;

        public MyAdapter(Context context, FragmentManager fm, Fragment fragA, Fragment fragB) {
            super(fm);  
            _context=context;
            fragmentA = fragA;
            fragmentB = fragB;

            }
        @Override
        public int getCount() {
            return 2;
        }

        @Override
        public Fragment getItem(int position) {

            switch (position) {
            case 0:
                fragmentA =DetailFragmentA.newInstance(_context);   
                return fragmentA;
            case 1:
                fragmentB=DetailFragmentB.newInstance(_context);    
                return fragmentB;
            }
            return null;
        }
    }

} 
```

This is the FragmentA Class:

```
public class DetailFragmentA extends Fragment 
                                    implements OnClickListener{

    Button button;
    TextView textB;
    EditText edit;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.e("Test", "hello");
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

    }

    public static Fragment newInstance(Context context) {
        DetailFragmentA f = new DetailFragmentA();  

        return f;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        ViewGroup root = (ViewGroup) inflater.inflate(R.layout.details, null);
        TextView textView = (TextView) root.findViewById(R.id.detailsText);
        textView.setText("Testing");
        button = (Button)root.findViewById(R.id.button1);
        button.setOnClickListener(this);      

        edit = (EditText) root.findViewById(R.id.editText1);

     return root;
    }

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        Log.e("Test", "onClick");

        ((ViewPagerExample) getActivity()).refresh(edit.getText().toString()); 

    } 
```

And this is the FragmentA:

```
public class DetailFragmentB extends Fragment {

    TextView textView;
     String saveText = "default";

    public static Fragment newInstance(Context context) {
        DetailFragmentB f = new DetailFragmentB();  

        return f;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.e("Test", "hello");
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.details_2, container, false);
        textView = (TextView) view.findViewById(R.id.detailsTextB);
        textView.setText(saveText);
        return view;
    }

    public void changeText(String editable){

        saveText = editable;
        textView.setText(saveText);
    }
} 
```

But the App crashes with following LogCat if I press the Button to change the TextView in FragmentB. What can I do?

```
04-14 17:46:24.343: E/AndroidRuntime(5667): FATAL EXCEPTION: main
04-14 17:46:24.343: E/AndroidRuntime(5667): java.lang.ClassCastException: android.support.v4.app.Fragment
04-14 17:46:24.343: E/AndroidRuntime(5667):     at com.example.viewpagerexample.ViewPagerExample.refresh(ViewPagerExample.java:35)
04-14 17:46:24.343: E/AndroidRuntime(5667):     at com.example.viewpagerexample.DetailFragmentA.onClick(DetailFragmentA.java:64)
04-14 17:46:24.343: E/AndroidRuntime(5667):     at android.view.View.performClick(View.java:2408)
04-14 17:46:24.343: E/AndroidRuntime(5667):     at android.view.View$PerformClick.run(View.java:8817)
04-14 17:46:24.343: E/AndroidRuntime(5667):     at android.os.Handler.handleCallback(Handler.java:587)
04-14 17:46:24.343: E/AndroidRuntime(5667):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-14 17:46:24.343: E/AndroidRuntime(5667):     at android.os.Looper.loop(Looper.java:144)
04-14 17:46:24.343: E/AndroidRuntime(5667):     at android.app.ActivityThread.main(ActivityThread.java:4937)
04-14 17:46:24.343: E/AndroidRuntime(5667):     at java.lang.reflect.Method.invokeNative(Native Method)
04-14 17:46:24.343: E/AndroidRuntime(5667):     at java.lang.reflect.Method.invoke(Method.java:521)
04-14 17:46:24.343: E/AndroidRuntime(5667):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
04-14 17:46:24.343: E/AndroidRuntime(5667):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
04-14 17:46:24.343: E/AndroidRuntime(5667):     at dalvik.system.NativeStart.main(Native Method) 
```

**Edit** I changed to following in the class ViewPagerExample:

```
public Fragment detailFragmentA = new DetailFragmentA();
public Fragment detailFragmentB = new DetailFragmentB(); 
```

now I get a NullPointerExeception:

```
04-14 19:50:54.673: E/AndroidRuntime(5917): FATAL EXCEPTION: main
04-14 19:50:54.673: E/AndroidRuntime(5917): java.lang.NullPointerException
04-14 19:50:54.673: E/AndroidRuntime(5917):     at com.example.viewpagerexample.DetailFragmentB.changeText(DetailFragmentB.java:49)
04-14 19:50:54.673: E/AndroidRuntime(5917):     at com.example.viewpagerexample.ViewPagerExample.refresh(ViewPagerExample.java:35)
04-14 19:50:54.673: E/AndroidRuntime(5917):     at com.example.viewpagerexample.DetailFragmentA.onClick(DetailFragmentA.java:64)
04-14 19:50:54.673: E/AndroidRuntime(5917):     at android.view.View.performClick(View.java:2408)
04-14 19:50:54.673: E/AndroidRuntime(5917):     at android.view.View$PerformClick.run(View.java:8817)
04-14 19:50:54.673: E/AndroidRuntime(5917):     at android.os.Handler.handleCallback(Handler.java:587)
04-14 19:50:54.673: E/AndroidRuntime(5917):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-14 19:50:54.673: E/AndroidRuntime(5917):     at android.os.Looper.loop(Looper.java:144)
04-14 19:50:54.673: E/AndroidRuntime(5917):     at android.app.ActivityThread.main(ActivityThread.java:4937)
04-14 19:50:54.673: E/AndroidRuntime(5917):     at java.lang.reflect.Method.invokeNative(Native Method)
04-14 19:50:54.673: E/AndroidRuntime(5917):     at java.lang.reflect.Method.invoke(Method.java:521)
04-14 19:50:54.673: E/AndroidRuntime(5917):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
04-14 19:50:54.673: E/AndroidRuntime(5917):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
04-14 19:50:54.673: E/AndroidRuntime(5917):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:46:35.280

您正在尝试将 fragmentB 转换为 detailFragmentB。但它可能不是一个detailFragmentB，你最初将它设置为一个新的Fragment()。将其更改为新的 DetailFragmentB。对 A 做同样的事情，因为我确信你上面有同样的错误。

# java - play wav file in jar - java netbeans

> ID：16001379
> 
> 赞同：0
> 
> 时间：2013-04-14T16:29:29.127
> 
> 标签：java, file, audio, wav, javasound

I have got a code for playing wav sound file in java and works perfectly in netbeans IDE but, when i export the project to jar file and run it on another machine, it won't work and show the following exception :

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: Invalid format
at org.classpath.icedtea.pulseaudio.PulseAudioDataLine.createStream(PulseAudioDataLine.java:142)
at org.classpath.icedtea.pulseaudio.PulseAudioDataLine.open(PulseAudioDataLine.java:99)
at org.classpath.icedtea.pulseaudio.PulseAudioDataLine.open(PulseAudioDataLine.java:283)
at org.classpath.icedtea.pulseaudio.PulseAudioClip.open(PulseAudioClip.java:402)
at org.classpath.icedtea.pulseaudio.PulseAudioClip.open(PulseAudioClip.java:453)
at quiz.Login.jButton3ActionPerformed(Login.java:178)
at quiz.Login.access$200(Login.java:36)
at quiz.Login$3.actionPerformed(Login.java:96)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6505)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3312)
at java.awt.Component.processEvent(Component.java:6270)
at java.awt.Container.processEvent(Container.java:2229)
at java.awt.Component.dispatchEventImpl(Component.java:4861)
at java.awt.Container.dispatchEventImpl(Container.java:2287)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
at java.awt.Container.dispatchEventImpl(Container.java:2273)
at java.awt.Window.dispatchEventImpl(Window.java:2719)
at java.awt.Component.dispatchEvent(Component.java:4687)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:729)
at java.awt.EventQueue.access$200(EventQueue.java:103)
at java.awt.EventQueue$3.run(EventQueue.java:688)
at java.awt.EventQueue$3.run(EventQueue.java:686)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
at java.awt.EventQueue$4.run(EventQueue.java:702)
at java.awt.EventQueue$4.run(EventQueue.java:700)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:699)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

my code is :

```
try {
 // Open an audio input stream.
 URL url = this.getClass().getClassLoader().getResource("music.wav");
 AudioInputStream audioIn = AudioSystem.getAudioInputStream(url);
 // Get a sound clip resource.
 Clip clip = AudioSystem.getClip();
 // Open audio clip and load samples from the audio input stream.
 clip.open(audioIn);
 clip.start();
 } catch (UnsupportedAudioFileException e) {
 e.printStackTrace();
 } catch (IOException e) {
 e.printStackTrace();
 } catch (LineUnavailableException e) {
 e.printStackTrace();
} 
```

In netbeans I put the music.wav file in src project folder and on another machines where i try to run jar file I put music.wav inside the jar and beside it.

I wonder what is the exception is about?

Any Help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:15:59.797

我下载了你的音频文件：它是 16 位立体声 PCM，但具有不寻常的 11kHz 采样率。我做的大多数 wav 播放都是 44kHz（注意，值在 Windows 属性显示中四舍五入）。也许某些 IDE 支持这种格式，但其他 IDE 不支持？或者一些JVM而不是其他的？您可以尝试使用 Audacity（免费软件 DAW）将其转换为 44kHz，然后查看它是否运行。或者，找到另一个 44kHz wav 并使用相同的代码对其进行测试。

由于您使用的是 URL，因此它们应该适用于存储在 jar 中的资源。我倾向于使用以下内容来获取音频：

1）创建一个“音频”子文件夹。因此，如果您的代码位于 com.zaid.game 包中，则 wav 文件将位于 ..../com/zaid/game/audio

2）调用文件名时，将子文件夹添加到字符串中：

```
fileName = "audio/" + fileName; 
```

3）使用以下设置URL变量：

```
URL url = this.getClass().getResource(fileName); 
```

接着

```
AudioInputStream aiStream = AudioSystem.getAudioInputStream(url); 
```

像你一样做。

这假定“this.getClass()”位于“audio”文件夹上方的包中。

PS，我不清楚“getClassLoader()”在 URL 分配中为您做了什么。我没用过，也不熟悉。

# c++ - how does Insert node function of Marching Cube works?

> ID：16001382
> 
> 赞同：0
> 
> 时间：2013-04-14T16:29:38.527
> 
> 标签：c++, c, algorithm, linked-list, marching-cubes

I am trying to understand MarchingCube algorithm: My previous question was [this](https://stackoverflow.com/questions/15996097/how-does-getdepth-function-work-in-marchingcube-algorithm). Now I am stuck in one function where the node ( which holds each grid of whole cube in linked list kind of structure) is inserted. I can understand the first few line of the code but, when I look at the code I find some part of the code redundant.

```
NODE *Insert(NODE *listset, NODE *tmpNode) {
1    NODE *temp;
2
3    if(listset == NULL) return tmpNode;
4    else {
5        tmpNode->next = listset->next;
6        listset->next = tmpNode;
7        return listset;
8    }
9    temp = listset;
10    if(temp->next == NULL) {
11       if(temp->depth > tmpNode->depth) temp->next = tmpNode;
12            else {
13                tmpNode->next = temp;
14                listset = tmpNode;
15            }
16         return listset;
17    }
18    while(temp->next != NULL) {
19        if(temp->next->depth > tmpNode->depth) temp = temp->next;
20        else {
21            tmpNode->next = temp->next;
22            temp->next = tmpNode;
23            return listset;
24        }
25     }
26     temp->next = tmpNode;
27     return listset;

} 
```

In this function from 1 to 8 perfectly makes sense ( its just inserting new node to its end). How could code ever reach after that point (I mean code from 9-27) ?? Is it even necessary??

Can anyone please explain what is going in the part 9-27\.

# ios - Move UIView left to right while they move down the screen

> ID：16001385
> 
> 赞同：0
> 
> 时间：2013-04-14T16:29:49.590
> 
> 标签：ios, uiview, quartz-graphics

I am trying to create an iOS app with blocks floating down the screen(UIViews). I have them floating down the screen but I also want the user to be able to move them on the x axis as they are falling. I tried to do it with the code below but they just fall and don't move left to right. My problem is I am trying to move it with my finger left to right as it is already moving town the screen. How can I adapt the code below to work?

Note: I was able to move the views left to right without them moving down the screen and I was able to move them down the screen without moving them left to right. The problem arises when I combine both.

ANIMATION FOR Y AXIS

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:letView.speed];
[UIView setAnimationDelay:0.0];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];

letView.layer.frame = CGRectMake(letView.layer.frame.origin.x, [[UIScreen mainScreen] bounds].size.height, letView.layer.frame.size.width, letView.layer.frame.size.height);

[UIView commitAnimations]; 
```

ANIMATION FOR TOUCH

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];
    //Goes through an array of views to see which one to move
    for (LetterView * view in _viewArray) {
        if (CGRectContainsPoint(view.frame, touchLocation)) {
            dragging = YES;
            currentDragView = view;
            [currentDragView.layer removeAllAnimations];
        }
    }
}
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchLocation = [touch locationInView:self.view];
    if (dragging) {
        CGPoint location = touchLocation;
        currentDragView.center = CGPointMake(location.x, currentDragView.center.y);
    }
}
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    dragging = NO;
    [self checkForCorrectWord];
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:currentDragView.speed];
    [UIView setAnimationDelay:0.0];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
    currentDragView
    .layer.frame = CGRectMake(currentDragView.layer.frame.origin.x, [[UIScreen mainScreen] bounds].size.height, currentDragView.layer.frame.size.width, currentDragView.layer.frame.size.height);

    [UIView commitAnimations];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:37:56.917

我有一个演示项目，向您展示如何在屏幕上以 s 曲线制作“船”动画，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/654AM.png)

我使用的解决方案是制作一个*关键帧动画*（实际上它是一个关键帧动画，它构成了分组动画的一部分，但您可能不需要分组动画的其余部分：它是使曲线路径形状的关键帧动画）。也许您可以调整我正在做的事情，将其修改为您自己的目的？

代码可在此处下载：

[https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/ch17p501groupedAnimation](https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/ch17p501groupedAnimation)

我的书中对此进行了详细讨论。关键帧动画通常：

[http://www.aeth.com/iOSBook/ch17.html#_keyframe_animation](http://www.apeth.com/iOSBook/ch17.html#_keyframe_animation)

这个特殊的例子：

[http://www.aeth.com/iOSBook/ch17.html#_grouped_animations](http://www.apeth.com/iOSBook/ch17.html#_grouped_animations)

# windows - Redirect sterr to file but leave all output on screen intact (as_is). [windows XP - BAT files]

> ID：16001386
> 
> 赞同：4
> 
> 时间：2013-04-14T16:29:50.490
> 
> 标签：windows, redirect, batch-file, stdout, stderr

Pls, imagine that I have some program which has output in both main streams: err && out. As an example we can use next bat file:

```
@echo off
echo 1
echo 2 >&2
echo 3
echo 4 >&2
echo 5
echo 6 >&2
echo 7
echo 8 >&2
echo 9
echo 10 >&2 
```

so on the console' screen I will see this output:

```
1
2
3
4
5
6
7
8
9
10 
```

And I want to see this output! Exactly as I expected. But also I want to see whole err stream simultaneously at some specific 'ERR.out' file. So It's content taking into account my initial bat file should be:

```
2
4
6
8
10 
```

So My question is - HOW to do that trick for windows XP SP3 in BAT file's scenario?

I would like to use next pseudo code - but it will not work of course. But I hope that the main logic will be the same: command.exe | print_it_as_is_on_screen | redirect_2_stream_to_ERR.out_file | send_whole_output_to_another_command.exe

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T17:43:19.310

***我相信不可能可靠地做你想做的事。下面是我的原始答案，它不起作用，然后是一个可能起作用的修改，但不能保证在所有情况下都有效，然后解释为什么它不能完美地完成。***

有两个部分可以解决您的问题。

**首先**，您需要一个可以读取标准输入并将其写入标准输出和文件的 tee 程序。您可以使用 gnuwin32 [CoreUtils for Windows](http://gnuwin32.sourceforge.net/packages/coreutils.htm)中的 tee.exe ，也可以使用以下混合 JScript/批处理文件 - TEE.BAT

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::--- Batch section within JScript comment that calls the internal JScript ----
@echo off
cscript //E:JScript //nologo "%~f0" %*
exit /b

----- End of JScript comment, beginning of normal JScript  ------------------*/
var fso = new ActiveXObject("Scripting.FileSystemObject");
var mode=2;
if (WScript.Arguments.Count()==2) {mode=8;}
var out = fso.OpenTextFile(WScript.Arguments(0),mode,true);
var chr;
while( !WScript.StdIn.AtEndOfStream ) {
  chr=WScript.StdIn.Read(1);
  WScript.StdOut.Write(chr);
  out.Write(chr);
} 
```

确保 tee.exe 或 tee.bat 在您当前的文件夹中，或者在您的路径中的某个位置。

然后，您可以将批处理脚本的输出通过管道传输到 tee，如下所示：

```
yourBatch | tee output.txt 
```

但是管道操作捕获标准输出并将其重定向到第二个程序。因此，上面的行将捕获 output.txt 中的标准输出，但您想捕获 stderr。

**其次**，您需要一种交换标准输出和标准错误的机制。这非常容易:-)

```
yourBatch 3>&2 2>&1 1>&3 | tee err.txt 
```

我在我接受的答案中描述了上述内容的工作原理[是否有办法仅将 stderr 重定向到 stdout（而不是将两者结合起来），以便可以将其通过管道传输到其他程序？](https://stackoverflow.com/q/12273866/1012053)

***以上不起作用:-(***

有多个时序问题会阻止上述内容正常工作。第一个问题是在 tee 准备好处理输入之前有一个启动时间。批处理文件（或任何进程）可以将交错的消息写入标准输出和标准错误，标准错误通过管道传输到 tee，标准输出直接到控制台。标准输出立即转发到控制台，但标准错误在 tee 准备输入和输出流时被延迟。在您的测试用例中，整个标准输出内容在 tee 甚至开始写入控制台之前就被写入控制台。所以控制台输出看起来像

```
1
3
5
7
9
2
4
6
8
10 
```

通过使用额外的批处理脚本延迟启动程序直到 tee 完成初始化，我能够在 Win 7 和 XP 虚拟机上获得正确的输出。这仅适用于 gnu tee.exe。它不能与 tee.bat 一起可靠地工作。

首先，我在与测试文件夹相同的文件夹中创建 delay.bat。

```
@echo off
ping 192.0.2.2 -n 1 -w 1000 >nul
%* 
```

然后下面的命令在我的机器上给出了正确的结果

```
delay.bat test.bat 3>&2 2>&1 1>&3 | tee.exe err.txt 
```

如果我用 tee.bat 代替 tee.exe，结果将无法重现。即使使用 tee.exe，它也可能无法在其他机器上运行。

有时 tee.bat 会产生正确的输出，但通常会删除其中一个数字，否则某些 stdout 和 stderr 输出会合并到一行中。它不可靠的原因与更微妙的时间问题有关。

原始程序将 stdout 和 stderr 都写入控制台很好，因为它是一个控制（写入）everyting 的进程。该过程一次只能写一件事。但是当 stderr 通过管道传输到 TEE 时，有 2 个进程试图同时写入控制台。TEST.BAT 正在编写 stdout，TEE 正在编写 stderr。没有什么可以阻止同时写入混合在一起，从而导致输出混淆。我想要获得真正的同时写入，机器必须有多个 CPU，或者至少有多个内核。但即使是单 CPU 机器也会出现问题，因为没有办法让两个进程保持同步。即使输出没有混合，也很容易出现故障。

即使 tee.exe 在我的机器上工作，我怀疑它甚至有可能失败，无论是使用不同的源输入，还是在另一台机器上。

我相信不可能可靠地得到你的结果。您可以将 stderr 重定向到 stdout，并将两者都通过管道传输到 tee。这将保持控制台输出直接，但是没有办法将标准错误输出与标准输出分开。

可靠地获得结果的唯一方法是修改源以从一开始就将每个错误消息写入两个流。但是，当您的来源超出您的控制范围时，这是不可能的。

# php - Redirect with URL editing? (remove some 'GET' data)

> ID：16001387
> 
> 赞同：1
> 
> 时间：2013-04-14T16:29:56.973
> 
> 标签：php, html, http, redirect, get

Right now there is a page redirection using

> header("Location: {$_SERVER['HTTP_REFERER']}");

but the URL that the page is redirecting to is something like:

```
http://localhost:5110/page.php?1st=2&2nd=140413&3rd=547859 
```

how can I remove a part of the URL of the redirection? the URL should be like :

```
http://localhost:5110/page.php?1st=2&3rd=547859 
```

If you have another suggestions for this let me know... thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:11:47.420

```
$referer = parse_url($_SERVER['HTTP_REFERER']);
parse_str($referer['query'], $query);

unset($query['2nd']); // unset the desired element

$referer['query'] = http_build_query($query);
$url = '';
if (array_key_exists('scheme', $referer)) { $url .= "{$referer['scheme']}://"; }
if (array_key_exists('host', $referer)) { $url .= $referer['host']; }
if (array_key_exists('port', $referer)) { $url .= ":{$referer['port']}"; }
if (array_key_exists('path', $referer)) { $url .= $referer['path']; }
if (array_key_exists('query', $referer)) { $url .= "?{$referer['query']}"; }
if (array_key_exists('fragment', $referer)) { $url .= "#{$referer['fragment']}"; }

header("Location: $url"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:54:14.600

```
$ref = explode("?",$_SERVER['HTTP_REFERER']);
parse_str($ref[1], $qs);
unset($qs['query param to remove']);
$qs = http_build_query($qs);
$ref = $ref[0].'?'.$qs; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T16:54:46.743

尝试这个：

```
$str = 'http://localhost:5110/page.php?1st=2&2nd=140413&3rd=547859';
    echo remove_qs_key($str,"2nd");

    function remove_qs_key($url, $key) {
        $url = preg_replace('/(?:&|(\?))' . $key . '=[^&]*(?(1)&|)?/i', "$1", $url);
        return $url;
    } 
```

结果：`http://localhost:5110/page.php?1st=2&3rd=547859`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-14T16:49:06.507

```
$server = $_SERVER['SERVER_NAME']; //Returns the server name(localhost:5110)
$file = $_SERVER['REQUEST_URI']; //Returns the script name and path(/page.php)
echo $server.$file //Returns localhost:5110/page.php 
```

# javascript - 一日比特币图表？

> ID：16001388
> 
> 赞同：-2
> 
> 时间：2013-04-14T16:29:58.510
> 
> 标签：javascript, charts, highcharts, bitcoin

我正在尝试构建具有一天历史的比特币图表。我正在使用 Javascript 和 highCharts 构建它，但目标应该是一个免费的 iPhone 应用程序，它显示比特币价值的最后一天图表。

我找到了非常简单的 openchart API，但我找不到任何可以动态更改值的来源（我需要使用最近一小时的比特币值动态绘制图表）。

**这是我所做的（我把它作为静态数据）：**

```
var wikiMonthsCovered = ["14:00","15:00","16:00","17:00","18:00","19:00",
                         "20:00","21:00","22:00","23:00","00:00","01:00",
                         "02:00","03:00"];
var wikiHistoryStats = [{"name":"Bitcoin","data":[180,178,177,176,175,174,173,
                                                  172,171,175,176,180,190,220]}]; 
```

[http://jsfiddle.net/ujLg5/2/](http://jsfiddle.net/ujLg5/2/)

问题是此图表中的所有值都是静态的，我想在网页中创建它，然后将其加载到应用程序中，但是，当然，任何其他建议（API 或脚本）都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:44:34.180

我只是发布一个官方答案，这样人们就可以看到这个问题已经在搜索/标签列表中得到了回答。

*   检查 Highcharts 演示，例如这个：highcharts.com/demo/dynamic-update - [Paul Fus](https://stackoverflow.com/users/1451635/pawel-fus)
*   这是一个实时更新图表的 jsFiddle 示例：[Demo](http://jsfiddle.net/BenedictLewis/Pxh4f/) - [Benedict Lewis](https://stackoverflow.com/users/2078412/benedict-lewis)

其他资源：

```
Highchart Demo: http://www.highcharts.com/demo/
Highchart API Docs: http://api.highcharts.com/highcharts
Changelog: http://www.highcharts.com/documentation/changelog 
```

# html - 画布，动画文本旋转

> ID：16001389
> 
> 赞同：1
> 
> 时间：2013-04-14T16:30:03.580
> 
> 标签：html, animation, canvas, rotation

我想要一个单词的动画画布旋转，而画布上的另一个单词不动。但不知何故，两者都静止不动。我必须改变什么？

[链接] [http://jsfiddle.net/2dszD/8/](http://jsfiddle.net/2dszD/8/)

```
var canvas;
var ctx;
var canvasWidth;
var canvasHeight;
var interval = 10; 

function init(){

  canvas = document.getElementById("canvas");
  ctx = canvas.getContext('2d');
  canvasWidth = canvas.width;
  canvasHeight = canvas.height;

  setInterval(redraw, interval);
}

init();

function redraw() {

    ctx.clearRect(0, 0, canvasWidth, canvasHeight);

    ctx.translate( (200 ), (150 ) );
    ctx.rotate( 1*Math.PI/180 );

    ctx.fillStyle = '#f00';
    ctx.font = '40px san-serif';
    ctx.textBaseline = 'top';
    ctx.fillText("Hello rotated", 0, 0);

    ctx.rotate(-( 1*Math.PI/180 ));
    ctx.translate( -(200), -(150) );

    ctx.fillStyle = '#f00';
    ctx.font = '40px san-serif';
    ctx.textBaseline = 'top';
    ctx.fillText("Hello still", 0, 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:16:49.943

实际上，您的文本**旋转**了 1.0 度。

1*Math.PI/180 代表 1 微小的旋转度数

所以这将是一个更明显的 5 度：

```
ctx.rotate( 5.0  * Math.PI/180 ); 
```

一些编码故障：

您需要增加旋转角度，以便您的文本实际动画

```
angleInDegrees+=5;

ctx.rotate( angleInDegrees * Math.PI/180 ); 
```

setInterval 需要一个完整的函数作为参数，而不仅仅是函数名，如下所示：

```
setInterval( function(){redraw();}, interval); 
```

这是处理翻译/旋转的更简单方法

而不是像这样不翻译和不旋转：

```
ctx.translate( (200 ), (150 ) );
ctx.rotate( 1*Math.PI/180 );

// draw stuff here

ctx.rotate(-( 1*Math.PI/180 ));
ctx.translate( -(200), -(150) ); 
```

您可以改为 context.save() 和 context.restore() 更清洁且不需要撤消：

```
// save the canvas context—including its un-translated and un-rotated setting
ctx.save();

ctx.translate(200,150);
ctx.rotate( angleInDegrees * Math.PI/180 );

// draw stuff here

// after restore() the canvas is back to its starting position before save()
ctx.restore(); 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/5XTcn/](http://jsfiddle.net/m1erickson/5XTcn/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvasWidth;
    var canvasHeight;
    var interval = 350; 
    var angleInDegrees=0;

    function init(){
      canvas = document.getElementById("canvas");
      ctx = canvas.getContext('2d');
      canvasWidth = canvas.width;
      canvasHeight = canvas.height;

      setInterval( function(){redraw();}, interval);
    }

    init();

    function redraw() {

        angleInDegrees+=5;

        ctx.clearRect(0, 0, canvasWidth, canvasHeight);

        ctx.beginPath();
        ctx.rect(200,150,5,5);
        ctx.fill();

        ctx.save();

        ctx.translate(200,150);
        ctx.rotate( angleInDegrees * Math.PI/180 );

        ctx.fillStyle = '#f00';
        ctx.font = '40px san-serif';
        ctx.textBaseline = 'top';
        ctx.fillText("Hello rotated", 0, 0);

        ctx.restore();

        ctx.fillStyle = '#f00';
        ctx.font = '40px san-serif';
        ctx.textBaseline = 'top';
        ctx.fillText("Hello still", 0, 0);
    }

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=500 height=300></canvas>
</body>
</html> 
```

# eclipse - Unable to load tag handler class "null" for tag "ui:composition"

> ID：16001390
> 
> 赞同：2
> 
> 时间：2013-04-14T16:30:06.067
> 
> 标签：eclipse, jboss, facelets, myfaces, trinidad

I am trying to create a JSF application using MyFaces and Trinidad. I have added the following JARs to my `/WEB-INF/lib`:

*   commons-beanutils-1.7.0.jar
*   commons-collections-3.1.jar
*   commons-digester-1.6.jar
*   commons-el-1.0.jar
*   commons-logging-1.1.1.jar
*   el-ri.jar
*   jsf-facelets-1.1.14.jar
*   jstl-1.1.0.jar
*   trinidad-api-1.0.13.jar
*   trinidad-impl-1.0.13.jar
*   myfaces-api-1.1.9.jar
*   myfaces-impl-1.1.9.jar

The `facelets.tld` file is included in `/WEB-INF` folder.

I am tryng to run this in Eclipse Helios with JBoss 4.2 and JDK 1.5\. The server starts fine and I could see in the logs that all `faces-config.xml` files were read by MyFaces and that it starts up without any errors.

However, when I open a JSPX page, then it gives the following exception:

```
org.apache.jasper.JasperException: Unable to load tag handler class "null" for tag "ui:composition"
    at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:51) 
```

Here's the markup of the JSPX page:

```
<jsp:root version="2.0" xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:jsp="http://java.sun.com/JSP/Page"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jstl/core"
    xmlns:i="http://java.sun.com/jstl/fmt"
    xmlns:tr="http://myfaces.apache.org/trinidad"
    xmlns:trh="http://myfaces.apache.org/trinidad/html"
    xmlns:t="http://myfaces.apache.org/tomahawk">
    <ui:composition>
        <ui:define name="MyPage">
            <tr:form id="MyForm">
                <trh:tableLayout width= "80%">
                    <trh:rowLayout>
                        <trh:cellFormat>
                            <tr:outputText id="output" value="Sucess"></tr:outputText>
                        </trh:cellFormat>
                    </trh:rowLayout>
                </trh:tableLayout>
            </tr:form>
        </ui:define>
    </ui:composition>
</jsp:root> 
```

The same code works fine in WAS 6.1\. I tried it with Tomcat 6 as well, it gave exactly the same problem.

How is this caused and how can I solve it?

# php - using include files to prevent double coding

> ID：16001391
> 
> 赞同：-1
> 
> 时间：2013-04-14T16:30:09.880
> 
> 标签：php

My try:

1st File (connopen.php)

```
<?php
    try {
        $db = new PDO(DB_DSN, DBUSER, DB_PASSWORD);
        $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    } catch (PDOException $e) {
        die('Cannot connecto to database!');
    }

    try {
        $db->beginTransaction(); 
```

Other Files (file1.php, file2.php ...)

```
<?php
    include('connopen.php');

    ...some code using SQL(SELECT, INSERT INTO, UPDATE, DELETE ....)

    include('connclose.php');
?> 
```

Last File (connclose.php)

```
<?php
        $db->commit();
    } catch (PDOException $e) {
        $db->rollBack();
        ..some code to log errors
    }
    $db = null;
?> 
```

This as is, throws an Error (Parse error: syntax error, unexpected $end in /connopen.php on line 11) because I start **try {** on connopen.php and I closed on connclose.php

If there is another way to do something like that to prevent double-triple coding... of connopen and connclose source code will appreciate. thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:39:38.333

Sure.
Just get rid of connclose.php, transactions and try..catches - you don't need them.
So, the code become plain and simpke

1st File (connopen.php)

```
<?php
$opt = array(
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
    PDO::ATTR_EMULATE_PREPARES   => false,
);
$db = new PDO(DB_DSN, DBUSER, DB_PASSWORD, $opt); 
```

Other Files (file1.php, file2.php ...)

```
<?php
    include('connopen.php');

    ...some code using SQL(SELECT, INSERT INTO, UPDATE, DELETE ....) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:38:12.227

由于破坏了 try 语句，您的语法有严重错误。

连接文件应该只是

```
 <?php
    try {
        $db = new PDO(DB_DSN, DBUSER, DB_PASSWORD);
        $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    } catch (PDOException $e) {
        die('Cannot connecto to database!');
    } 
```

正确的模式是创建一个带有应用程序引导（设置、数据库和外部服务连接等）的文件，该文件根据 URL 解析结果将脚本执行路由到不同的 php 脚本（file1.php、file2.php）。

# python - Arranging code in Python

> ID：16001392
> 
> 赞同：2
> 
> 时间：2013-04-14T16:30:11.540
> 
> 标签：python

I'm trying to create a development environment where modules are divided into libraries and applications.
The application needs to import a module that is not installed as a package into the main python packages.
Both the application and the libraries are continuously modified.

This is the directory layout of the files. Files from one project may be reused by other projects, and thus cannot be in the same directory tree.

```
projA\lib\util.py
projA\lib\other.py
projB\lib\another.py
projC\src\app1\app1.py 
```

So far, the best I could come up with is the following, which causes problems for IDEs code completion because of the dynamic imports

```
# app1.py
import sys
sys.path.append('../../../projA/lib')
import util 
```

Is there a better way of doing this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:34:52.530

如何使用[virtualenv](http://www.virtualenv.org)并将您的其他项目作为库安装在虚拟系统路径中。

大多数 Python IDE 都支持 virtualenv，并且在代码完成方面没有问题。

这也是一个很好的做法，可以轻松分发您的项目和管理依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T16:37:41.843

如果您不想使用 virtualenv 或动态导入，

您可以将模块路径添加到`PYTHONPATH`环境变量。

[蟒蛇路径](http://docs.python.org/2/using/cmdline.html#envvar-PYTHONPATH)

注意：您可能必须创建此环境变量，假设您使用的是 Windows 操作系统，您可以使用（从命令行）：

`setx PYTHONPATH folder1;folder2;etc`

[设置](http://ss64.com/nt/setx.html)

# asp.net-mvc - Use view from another project

> ID：16001394
> 
> 赞同：2
> 
> 时间：2013-04-14T16:30:17.940
> 
> 标签：asp.net-mvc, view

I have project with views and project with controller, which must use view from first project. I found some solutions like this [solution](https://stackoverflow.com/questions/19746/views-in-separate-assemblies-in-asp-net-mvc), but problem is that first project already include reference on second project with controller.

# javascript - 与操作数匹配的模式

> ID：16001396
> 
> 赞同：-1
> 
> 时间：2013-04-14T16:30:33.370
> 
> 标签：javascript, regex

我需要验证用户的一些输入。

基本上输入可以是这种模式，

1.  <> 字符串（例如 <> S 系列）
2.  = 字符串（例如 = Y 系列）
3.  < 数字（例如 < 150 ）
4.  >= NUM​​BER AND < NUMBER（例如 >= 150 AND < 180 ）

请分享您的想法以获得好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:58:35.343

这是你想要的？[http://jsfiddle.net/vqCzj/1/](http://jsfiddle.net/vqCzj/1/)

```
$("#check").click( function() {
    var inVal = $("#inputTxt").val();
    if(inVal.match(/^<> [a-z A-Z]+$|^= [a-z A-Z]+$|^< \d+$|^>= \d+ AND < \d+$/)) {
       $("#result").text("pass");
    } else {
        $("#result").text("fail");
    }
}); 
```

# sql - 0 行受影响的 SQL 查询消息

> ID：16001398
> 
> 赞同：0
> 
> 时间：2013-04-14T16:30:40.140
> 
> 标签：sql, sql-server

我在 Eclipse 的数据库中有这张表：

```
Recipe = (idR, recipeTitle, prepText, cuisineType, mealType)
Ingredient = (idI, ingrDesc)
RecipIngr = (idR*, idI*) 
```

我正在尝试显示包含最少成分的食谱的标题。到目前为止，这是我的查询：

```
 SELECT recipetitle, COUNT(*)
  FROM recipe
  GROUP BY recipetitle
  HAVING COUNT(recipetitle) =
  (SELECT MAX(COUNT(ingrdesc))
  FROM ingredient
  GROUP BY recipetitle); 
```

这显示“0行受影响”所以我不知道我做错了什么。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:47:12.530

你必须在`JOIN`你的桌子上计算每个食谱的成分数量：

```
SELECT
    r.recipeTitle,
    COUNT(*) AS nbOfIng
FROM
    recipe r
JOIN
    RecipIngr ri ON r.idR = ri.idR
GROUP BY
    r.idR, r.recipeTitle
HAVING
    nbOfIng = (
        SELECT
            MAX(COUNT(*))
        FROM
            recipe r2
        JOIN
            RecipIngr ri2 ON r2.idR = ri2.idR
        GROUP BY
            r2.idR
) 
```

但是，我不能 100% 确定这是否可行，因为我不知道您使用的是什么数据库引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:06:47.163

根据您的需要选择第一个匹配项或所有匹配项 - 对于 MSSQL。

第一的：

```
SELECT TOP 1 RecipeTitle      = R.recipeTitle
       ,IngredientCount = COUNT(*)
FROM   Recipe R
INNER JOIN RecipIngr RI ON R.idR = RI.idR
INNER JOIN Ingredient I ON RI.idI = I.idI
    GROUP BY R.recipeTitle 
```

全部：

```
SELECT dtbl.RecipeTitle
FROM (SELECT RecipeTitle      = R.recipeTitle
       ,IngredientCount = COUNT(*)
           ,rank = rank() OVER (Partition BY R.recipeTitle ORDER BY COUNT(*))
FROM   Recipe R
INNER JOIN RecipIngr RI ON R.idR = RI.idR
INNER JOIN Ingredient I ON RI.idI = I.idI
    GROUP BY R.recipeTitle) dtbl
WHERE dtbl.rank = 1 
```

# angularjs - 如何从 AngularJS 中的服务中回传承诺？

> ID：16001400
> 
> 赞同：4
> 
> 时间：2013-04-14T16:30:51.907
> 
> 标签：angularjs

我的控制器中有一些代码直接调用 $http 来获取数据。现在我想把它变成一个服务。这是我到目前为止所拥有的：

我的服务：

```
angular.module('adminApp', [])
.factory('TestAccount', function ($http) {
    var TestAccount = {};
    TestAccount.get = function (applicationId, callback) {
        $http({
            method: 'GET',
            url: '/api/TestAccounts/GetSelect',
            params: { applicationId: applicationId }
        }).success(function (result) {
            callback(result);
        });
    };
    return TestAccount;
}); 
```

控制器内部：

```
 TestAccount.get(3, function (data) {
      $scope.testAccounts = data;
   }) 
```

我怎样才能改变这一点，而不是将成功的结果传回去，而是传回一个我可以检查它是成功还是失败的承诺？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:20:07.810

让您的服务返回一个承诺并将其公开给服务客户。像这样更改您的服务：

```
angular.module('adminApp', [])
.factory('TestAccount', function ($http) {
    var TestAccount = {};
    TestAccount.get = function (applicationId) {
        return $http({
            method: 'GET',
            url: '/api/TestAccounts/GetSelect',
            params: { applicationId: applicationId }
        });
    };
    return TestAccount;
}); 
```

所以在控制器中你可以这样做：

```
TestAccount.get(3).then(function(result) {
   $scope.testAccounts = result.data;
}, function (result) {
    //error callback here...  
}); 
```

# html - 如何使用 css 为 H2 标题标签留下一些顶部空白

> ID：16001402
> 
> 赞同：1
> 
> 时间：2013-04-14T16:31:17.620
> 
> 标签：html, css

在我的边栏中，我有一个红色背景图像作为 H2 标题。

我希望 h2 标题标签同时垂直和水平居中。

我用过`text-align: center;`。结果是这样的。

[![](https://i.stack.imgur.com/35QyG.jpg)](https://i.stack.imgur.com/35QyG.jpg)

它只是水平居中而不是垂直居中。我加了`vertical-align: middle;`，但是没有效果，我什至试过`margin-top`了，还表现得好像没有这样的代码

最后，我试过了

```
 margin-top: auto;
      margin-bottom: auto; 
```

即使那也没用

整个css

```
 #sidebar-wrapper h2 {
     background: url("https://lh6.googleusercontent.com/-FRYoELCr4cs/UWqPgG1XTjI/AAAAAAAAHZs/_825mjRMqrg/s295/54454554+copy.png") no-repeat scroll 0% 0% transparent;
     color: rgb(213, 213, 213);
     height: 50px;
     width:294px;
     margin-top:10x;
     overflow: visible;
     position: relative;
     left: -16px;
     text-align: center;
     color:white;
     margin:0 0 10px
 } 
```

如果我改变最后一行边距，红色背景和标题都会移动（而不是单独的标题）。这是我的[网站。](https://www.blogger.com/blogin.g?blogspotURL=http://www.ilovetrolls.org/)有人可以帮助我吗。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:34:51.093

您需要使用行高。

```
#sidebar-wrapper h2 {
    background: url("https://lh6.googleusercontent.com/-FRYoELCr4cs/UWqPgG1XTjI/AAAAAAAAHZs/_825mjRMqrg/s295/54454554+copy.png") no-repeat scroll 0% 0% transparent;
    color: rgb(213, 213, 213);
    height: 50px;
    width:294px;
    margin-top:10x;
    overflow: visible;
    position: relative;
    left: -16px;
    text-align: center;
    color:white;
    margin:0 0 10px;
    line-height:50px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T16:36:30.020

只需在样式中添加一些填充：

```
#sidebar-wrapper h2 {
     background: url("https://lh6.googleusercontent.com/-FRYoELCr4cs/UWqPgG1XTjI/AAAAAAAAHZs/_825mjRMqrg/s295/54454554+copy.png") no-repeat scroll 0% 0% transparent;
     color: rgb(213, 213, 213);
     height: 50px;
     width:294px;
     margin-top: 10x; /* You have a typo here, is 10px */
     overflow: visible;
     position: relative;
     left: -16px;
     text-align: center;
     color:white;
     margin:0 0 10px
     padding: 7px 0; /* Magic padding */
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T16:37:46.147

您可以将其添加到您的 CSS：
`padding-top: 7px;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T16:48:10.213

您可以使用相对定位。尝试顶部：10px。

# ios - UIView 不记得它的标签

> ID：16001405
> 
> 赞同：2
> 
> 时间：2013-04-14T16:31:46.627
> 
> 标签：ios, objective-c, uitableview, uiview

我是否`UIView` `tag`错误地使用了该属性？为什么它不记得它的标签？![在此处输入图像描述](https://i.stack.imgur.com/gsMh1.png)

当我在调试器中检查它时，它说它的值为`nil`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:40:40.957

从您的屏幕截图中，它看起来要么`cell`是要么`cell.cellFront`为零。

您是在使用`registerNib:forCellReuseIdentifier:`还是`registerClass:forCellReuseIdentifier:`在使单元出队之前？如果不是，您需要检查是否`cell`是`nil`，然后在必要时创建一个新的。

使用`lldb`检查标签时，请确保使用`p`（用于原始类型）而不是`po`（用于对象）打印值：

```
 (lldb) p cell.cellFront.tag 
```

# cuda - TILE_DIM 和 BLOCK_ROWS 无法解析

> ID：16001406
> 
> 赞同：-2
> 
> 时间：2013-04-14T16:31:51.047
> 
> 标签：cuda

我尝试实现这一点

```
__global__ void transposeNaive(float *odata, const float *idata)
{
  int x = blockIdx.x * TILE_DIM + threadIdx.x;
  int y = blockIdx.y * TILE_DIM + threadIdx.y;
  int width = gridDim.x * TILE_DIM;

  for (int j = 0; j < TILE_DIM; j+= BLOCK_ROWS)
    odata[x*width + (y+j)] = idata[(y+j)*width + x];
} 
```

为什么我得到这个错误？这里出了什么问题？为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:00:11.080

您的问题与 C 和 C++ 相关，而不是 CUDA。

在 C 或 C++ 中，如果我有这样的语句：

```
int x = 5 * TESTVAL; 
```

然后在此语句之前的代码中的其他地方我需要类似的东西：

```
#define TESTVAL 7 
```

或者

```
int TESTVAL = 7; 
```

如果我的代码中没有任何定义是什么`TESTVAL`的东西，编译器会报错。您不需要定义类似`blockIdx.x`和`threadIdx.x`是什么的语句，因为这些是 CUDA 设备代码编译器知道如何处理的内置函数。

您需要在代码中的某个地方定义什么`TILE_DIM`和`BLOCK_ROWS`是什么。

# c# - 如何在没有连续连接的情况下请求服务器

> ID：16001407
> 
> 赞同：0
> 
> 时间：2013-04-14T16:31:51.187
> 
> 标签：c#, request, continuous

我使用 Web 服务在 c# 客户端和 php 服务器之间交换数据以检查数据更改。但我必须请求继续托管，但如果我这样做，服务器将超载。

```
 WebClient cGet = new WebClient();
cGet.DownloadString(loptinh.domain+"postandroid.php?res=00000tt" + loptinh.id); 
```

它有没有像在 android 或其他中使用 GCM 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:10:03.963

您需要精确的精度吗？您是否在消息到达服务器的那一刻准确地需要消息？

因为如果不是这种情况，解决此错误的最简单方法是每隔几秒/分钟检查一次服务器，以防止不必要的流量。但是，您在检测到消息之间会有一些延迟。

如果答案是`yes`，那就有点难了。
如果您可以访问服务器，那将是（可能）最好的方案。您只需为服务器编写一个应用程序，该应用程序将在本地检查数据库，如果消息到达，则向您的应用程序发送通知。您的本地应用程序和服务器应用程序可以保持连接以尽快收到通知。

如果您无权访问服务器，那么，我想不出一种方法来为您服务。服务器似乎不允许/支持持久连接。也许我错了，希望其他人可以提供更好的解决方案......

# android - 用于发送电子邮件的 Content-Type 不起作用

> ID：16001411
> 
> 赞同：0
> 
> 时间：2013-04-14T16:32:21.223
> 
> 标签：android, email, android-intent

我正在尝试使用 Intent 从 Android 应用程序发送电子邮件。

我正在使用以下代码：

```
 Intent email = new Intent(Intent.ACTION_SEND);
    email.putExtra(Intent.EXTRA_TEXT, getString(R.string.emailText));
    email.putExtra(Intent.EXTRA_SUBJECT, "MyBackup");
    email.setType("application/zip");
    email.putExtra(android.content.Intent.EXTRA_STREAM, Uri.parse("file://" + this.tmpFile));
    startActivity(Intent.createChooser(email, getString(R.string.strSendEMail))); 
```

该代码有效，我收到了电子邮件，但 ZIP 文件在电子邮件中作为“纯文本/文本”...

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:36:50.820

我刚刚尝试发送附有 ZIP 的电子邮件。不是来自我的程序，而是直接来自我手机的电子邮件程序。结果相同。好吧，我认为，问题**不**在于我的程序，而在于电子邮件程序......

再次非常感谢您的帮助。我想，我必须搜索一个更好的程序来发送电子邮件......

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:38:50.807

尝试使用不同的 mimetype：

```
email.setType("application/octet-stream"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-13T18:54:24.673

兄弟我也遇到了同样的问题，在准备消息和调用发送邮件方法之前使用了以下代码。只需添加以下代码。

```
 Message message = createMessage(toEmail, subject, messageBody, session);
            MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap();
            mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");
            mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml");
            mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");
            mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
            mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");
// Additional elements to make DSN work
            mc.addMailcap("multipart/report;;  x-java-content-handler=com.sun.mail.dsn.multipart_report");
            mc.addMailcap("message/delivery-status;; x-java-content-handler=com.sun.mail.dsn.message_deliverystatus");
            mc.addMailcap("message/disposition-notification;; x-java-content-handler=com.sun.mail.dsn.message_dispositionnotification");
            mc.addMailcap("text/rfc822-headers;;   x-java-content-handler=com.sun.mail.dsn.text_rfc822headers");
            new SendEmail(message).execute(); 
```

我在另一个线程中找到了这个答案，请尝试让我知道它是否对您有帮助。

# javascript - 是否有 AngularJS 数据更新回调？数据更改时如何手动更新页面？

> ID：16001413
> 
> 赞同：2
> 
> 时间：2013-04-14T16:32:28.923
> 
> 标签：javascript, angularjs

我浏览了 AngularJS 教程，它非常简洁。我还研究过 Backbone 和 Ember.js（尽管两者都不完全熟悉），但我听到了很多对 AngularJS 的赞誉，我想看看它是否对我有用。

我有一个专注于大型谷歌地图的网站（想想像 Padmapper.com 之类的东西）。超过 2,000 辆汽车目前在页面加载后通过 JSON 加载，而 JSON 需要 1-2 秒才能到达。然后根据汽车位置在地图上填充标记。我有一个过滤器表单，用户可以使用它根据许多不同的属性（比如颜色、汽油量等）过滤汽车。当前提交此过滤器表单用过滤器查询后端，然后返回过滤后的汽车。这是对时间的巨大浪费。

我想在初始化时加载所有项目，然后在它们更改值时使用前端进行过滤。在 AngularJS 教程中，当我在过滤器框中键入时，项目会出现和消失。很酷。但是如何处理地图标记？如何定义回调函数以在地图标记进入后手动更新它们？我是否需要以某种方式使用自定义指令？（仍然不完全确定这些是做什么的......）

我可以在 jQuery 中想到一个解决方案，即有一个无序列表的汽车，观察它的变化，并在必要时隐藏/显示标记。但我正试图远离 jQuery。任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T17:11:48.500

在指令中，您可以 $watch 观察汽车列表的变化并重新应用地图上的标记。我不熟悉谷歌地图编程，但这里试图说明我在说什么：[http ://plnkr.co/edit/d8Dn6epgnQ9UvWrMDAk8?p=preview](http://plnkr.co/edit/d8Dn6epgnQ9UvWrMDAk8?p=preview)

**编辑**：

我找到了一种跟踪过滤结果的好方法：

```
<tr ng-repeat="item in (filteredcars = (cars | filter: query))"> 
```

这会即时创建变量filteredcars，无需在输入查询上绑定更改事件！

回顾一下：

1）您可以 $watch 数据以进行更改。但是不要忘记第三个参数告诉它是一个数组。

```
scope.$watch('myvar', function(newval, oldval) {...}, true); 
```

2) 您可以动态创建一个变量，其中包含来自 ng-repeat 的表达式的过滤结果。

3) 不要忘记在添加子元素之前清空 map 元素，否则，过滤后的元素将无法正常工作。

# c - c客户端服务器在不同的机器上运行时不工作

> ID：16001416
> 
> 赞同：1
> 
> 时间：2013-04-14T16:32:39.710
> 
> 标签：c, sockets

我正在尝试创建一个客户端服务器模型，该模型将在连接在同一接入点（家庭网络）上的不同机器上运行。客户端服务器模型在同一台机器上运行时完美运行，但在不同机器上运行时客户端请求超时。我的路由器防火墙被禁用，我试图关闭两台机器上的 Windows 防火墙，但客户端到服务器的连接仍然超时并且永远不会连接。代码很简单，我在上面给出

我的服务器代码如下

```
/* A simple server in the internet domain using TCP
    The port number is passed as an argument */
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
 #include <unistd.h>
 #include <sys/types.h> 
 #include <sys/socket.h>
 #include <netinet/in.h>

void error(const char *msg)
{
    perror(msg);
    exit(1);
 }

int main(int argc, char *argv[])
{
 int sockfd, newsockfd, portno;
 socklen_t clilen;
 char buffer[256];
 struct sockaddr_in serv_addr, cli_addr;
 int n;
 if (argc < 2) {
     fprintf(stderr,"ERROR, no port provided\n");
     exit(1);
 }
 sockfd = socket(AF_INET, SOCK_STREAM, 0);
 if (sockfd < 0) 
    error("ERROR opening socket");
 bzero((char *) &serv_addr, sizeof(serv_addr));
 portno = atoi(argv[1]);
 serv_addr.sin_family = AF_INET;
 serv_addr.sin_addr.s_addr = INADDR_ANY;
 serv_addr.sin_port = htons(portno);
 if (bind(sockfd, (struct sockaddr *) &serv_addr,
          sizeof(serv_addr)) < 0) 
          error("ERROR on binding");
 listen(sockfd,5);
 clilen = sizeof(cli_addr);
 newsockfd = accept(sockfd, 
             (struct sockaddr *) &cli_addr, 
             &clilen);
 if (newsockfd < 0) 
      error("ERROR on accept");
 bzero(buffer,256);
 n = read(newsockfd,buffer,255);
 if (n < 0) error("ERROR reading from socket");
 printf("Here is the message: %s\n",buffer);
 n = write(newsockfd,"I got your message",18);
 if (n < 0) error("ERROR writing to socket");
 close(newsockfd);
 close(sockfd);
 return 0; 
} 
```

执行编译

`gcc server.c -o server`

并运行

`./server portnumber`

我的客户代码如下

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h> 

void error(const char *msg)
{
perror(msg);
exit(0);
}

int main(int argc, char *argv[])
{
int sockfd, portno, n;
struct sockaddr_in serv_addr;
struct hostent *server;

char buffer[256],ip[20];
if (argc < 3) {
   fprintf(stderr,"usage %s hostname port\n", argv[0]);
   exit(0);
}
portno = atoi(argv[2]);
sockfd = socket(AF_INET, SOCK_STREAM, 0);
if (sockfd < 0) 
    error("ERROR opening socket");
server = gethostbyname(argv[1]);
if (server == NULL) {
    fprintf(stderr,"ERROR, no such host\n");
    exit(0);
    }
bzero((char *) &serv_addr, sizeof(serv_addr));
serv_addr.sin_family = AF_INET;
strcpy (ip,argv[1]);
serv_addr.sin_addr.s_addr = inet_addr(ip);   
serv_addr.sin_port = htons(portno);
if (connect(sockfd,(struct sockaddr *) &serv_addr,sizeof(serv_addr)) < 0) 
    error("ERROR connecting");
printf("Please enter the message: ");
bzero(buffer,256);
fgets(buffer,255,stdin);
n = write(sockfd,buffer,strlen(buffer));
if (n < 0) 
     error("ERROR writing to socket");
bzero(buffer,256);
n = read(sockfd,buffer,255);
if (n < 0) 
     error("ERROR reading from socket");
printf("%s\n",buffer);
close(sockfd);
return 0;
} 
```

编译和执行

`gcc client.c -o client && ./client ipaddress portnumber`

正如我所说，我的问题是在不同的机器上运行时。

像这样在一台机器上启动服务器

`./server 55555`

然后像这样在另一台机器上启动客户端

`./client the_other_machines_ip_address 55555`

例子`./client 192.168.1.65 55555`

和客户端显示消息连接超时。

正如我所说，我关闭了两台设备上的防火墙，并且我的路由器防火墙被禁用。谁能指出我出了什么问题。

PS：当我在同一台机器上运行客户端或服务器时，但在 VMware ubuntu 系统中运行它工作正常！

# nasm - nasm 中的模运算符

> ID：16001417
> 
> 赞同：1
> 
> 时间：2013-04-14T16:32:45.703
> 
> 标签：nasm, 16-bit

再会，

我正在尝试在 nasm 中使用模数运算符，但我一直收到错误消息......我想加密用户输入的字符串......所以加密必须在 26 个字母范围内......

例如，当加密值为 3 并且用户输入 'z' 时，新字符应该是 'c' ，而不是 ASCII 表中 z 之后的任何内容......所以我被告知使用模数运算符，我就来了似乎做对了。

我的加密代码是

```
mov AL, [keyValue]
add byte [SI], AL 
```

这是循环执行的

`keyValue`存储必须添加到原始字符上的值

并`SI`包含用户输入的字符串

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T10:27:19.967

`div`在这种情况下，实际上不需要使用模 ( )。您可以简单地减去字母表的大小，如果值超出范围，则将其添加回来。

这是一个示例程序（仅处理小写字符，并为简单起见使用预定义的字符串和键）：

```
[org 0x100]

  mov si,thestring

encrypt:
  mov al,[si]
  cmp al,'$'
  je encryptdone
  add al,[thekey]
  sub al,'z'+1-'a'
  cmp al,'a'
  jge inrange
  add al,'z'+1-'a'
inrange:
  mov [si],al
  inc si
  jmp encrypt

encryptdone:
  ; Print the encrypted string and exit to DOS
  mov dx,thestring
  mov ah,9
  int 0x21

  mov ah,0x4c
  int 0x21

thestring db "abz$"
thekey db 3 
```

运行此输出字符串`dec`。

# java - 无法使旋转正常工作Java3D

> ID：16001418
> 
> 赞同：1
> 
> 时间：2013-04-14T16:32:48.917
> 
> 标签：java, rotation, geometry, java-3d, translate-animation

```
public void changeAx(double value) {
    translateAx.set(new Vector3f(0f, -0.325f, 0f));
    trans.setTransform(translateAx);
    rotation1.rotY(value);
    rotation.mul(rotation1);
    rot.setTransform(rotation);
    translateAx.set(new Vector3f(-0.2f, -0.325f, 0f);
    trans.setTransform(translateAx);
} 
```

这是行不通的方法。我想在 X 轴上旋转对象。我将对象 X 轴位置平移回原点。然后我执行旋转，然后将对象平移回它应该在的位置。然而，对象会旋转，就好像没有进行第一次平移一样。这意味着它不会像坐在原点上一样旋转，而是好像它距原点 -0.2f，因此整个对象以 -0.2f 半径移动，但我希望它保持相同的平移当它旋转时。我想知道我在弄乱旋转的代码中做错了什么。

作为记录，如果我取出第二个（重新平移）对象将移动到 X 原点并正确旋转，但我想将它移回它应该在之后的位置，这会弄乱旋转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:48:41.410

尝试使用此更改的第一行将对象的 X 轴位置转换为原点：

```
 translateAx.set(new Vector3f(0.2f, -0.325f, 0f));
```

八月

# drupal - 在 Drupal 上安装 selectivizr 库

> ID：16001422
> 
> 赞同：0
> 
> 时间：2013-04-14T16:32:59.427
> 
> 标签：drupal, drupal-7, drupal-modules

我正在尝试在安装后启用 selectivizr 模块。它要求我将 selectivizr-min.js 上传到 sites/all/libraries/selectivizr 或 sites/all/modules/selectivizr/selectivizr.js，我就是这样做的。

但是，我不断收到此错误：

[从http://selectivizr.com](http://selectivizr.com)下载它并复制到 selectivizr 模块目录或库目录（如果您正在使用库模块）。有关更多信息，请阅读 README.txt（当前使用 Selectivizr 库缺失）

由于我不熟悉编码部分..我希望有人知道我在这里错过了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T16:28:26.917

迈克克里滕登是正确的：

这很可能是因为您将 selectivizr-min.js 复制到了您的库文件夹中。

该模块正在寻找 selectivizr.js

把它扔在那里，清除你的缓存和利润。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T17:09:18.757

需要检查的一些事项：

*   您确定该文件被命名为 selectivizr.js 而不是 selectivizr-min.js 像模块要求的那样（即，您是否按照应有的方式重命名它）？
*   检查文件的权限，确保服务器用户或组（通常是 apache 或 www-data）可以访问它。您可以确定 chmod 755 selectivizr.js。
*   刷新 Drupal 的缓存以防万一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-10T01:40:38.460

以防万一，我在drupa 7.60 dev上遇到同样的问题并解决它创建文件夹并将selectivizr.js文件粘贴到文件夹中

# jar - jar 文件给出异常

> ID：16001423
> 
> 赞同：1
> 
> 时间：2013-04-14T16:33:11.290
> 
> 标签：jar, jvm, java, executable-jar

我已经创建了在 cmd 上成功运行的 jar 文件，如下所示：

> 启动 javaw -Xmx1024m -jar JavaEdit.jar

我的应用程序通过双击运行，但是当我执行按钮单击时，它会给出异常，当我通过 CMD 运行它时不会发生这种情况。

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at Editor.compileIt(Editor.java:2407)
    at Editor.CompileBtnActionPerformed(Editor.java:1412)
    at Editor.access$300(Editor.java:113)
    at Editor$7.actionPerformed(Editor.java:580)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

为什么会发生，请帮助...谢谢

在源代码的第 2407 行：

```
 StandardJavaFileManager fileManager = compiler.getStandardFileManager(c,
            Locale.ENGLISH,
            null); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:53:23.460

如果你得到一个空值`JavaCompiler`（或一个 NPE 得到它），那么我猜你使用 JRE 而不是 JDK 运行你的应用程序。

来自[JavaDoc](http://docs.oracle.com/javase/7/docs/api/javax/tools/ToolProvider.html)

> 返回： 此平台提供的编译器；如果没有提供编译器，则返回 null

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T16:56:23.663

a 唯一可能的地方`NullPointerException`是这一行：

```
StandardJavaFileManager fileManager = compiler.getStandardFileManager(c, 
```

`compiler`在哪里`null`。您应该添加`println(System.getPropert("java.home"))`语句以查看哪个 JRE/JDK 正在运行应用程序。

我的猜测是您`JAVA_HOME`指向 JDK 并且在`PATH`.jar 文件中，但 Windows 正在使用 JRE，根据“.jar”文件关联。

**更新：** 您可以使用这样的`runapp.bat`文件运行它：

```
%JAVA_HOME%\javaw.exe -Xmx1024m -jar JavaEdit.jar 
```

BAT 文件必须与JAR 文件**位于同一文件夹中。**

**UPDATE2：** 确保您已定义`JAVA_HOME`环境变量。你用这个命令检查：

```
c:\> echo %JAVA_HOME% 
```

它应该打印出 JDK - 的位置`C:\Program Files(x86)...`。

# ruby-on-rails - 保存为嵌套资源 rspec 测试返回 true 后，表计数不会增加

> ID：16001428
> 
> 赞同：1
> 
> 时间：2013-04-14T16:33:43.663
> 
> 标签：ruby-on-rails, rspec, factory-bot

我有一个“Mastertag”模型作为“Project”的嵌套资源，其创建操作如下：

```
def create
    @mastertag =  @project.mastertags.build(params[:mastertag])

    if @mastertag.save
         redirect_to project_mastertags_path, notice: 'Mastertag was successfully created.' 
      else
         render action: "new" 
    end
end 
```

其中@project 在过滤器之前的方法中初始化。

我有一个 rspec 测试：

```
describe "POST create" do

   context "with valid params" do
      it "creates a new Mastertag" do

        expect {
          post :create, { project_id: @project.id, mastertag: FactoryGirl.attributes_for(:mastertag_without_project) }
        }.to change(Mastertag, :count).by(1)
   end
end 
```

当我运行测试时，@mastertag.save 方法返回 true，但计数仍然保持不变。测试因此失败。这看起来很奇怪。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:17:19.917

当我使用 Mongoid 并且“Mastertags”被嵌入到 Project 中时，Mastertags 没有单独的集合。

我不得不将代码更改为：

```
describe "POST create" do

    context "with valid params" do
          it "creates a new Mastertag" do

            expect {
              post :create, { project_id: @project.id, mastertag: FactoryGirl.attributes_for(:mastertag_without_project) }
            }.to change {@project.reload.mastertags.count}.by(1)
    end
end 
```

我从这个 Stackoverflow 问题中得到了帮助：[RSpec/Mongoid: Expect to change count on embedded models](https://stackoverflow.com/questions/12839322/rspec-mongoid-expect-to-change-count-on-embedded-models)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:46:51.117

检查您的**project_mastertags_path**并确保在**@mastertag.save**有效之后进行重定向。

另外，尝试在您的创建方法中替换`if @mastertag.save`为。`if @project.save`

# sql - 逐行读取 vb.net

> ID：16001430
> 
> 赞同：1
> 
> 时间：2013-04-14T16:33:49.740
> 
> 标签：sql, database, vb.net, row

我需要在表的列中逐行读取，然后我需要存储它，然后调用过程以使用 vb.net 将数据插入到不同的列中。

我已经创建了数据库连接，并且我知道如何调用该过程，但我不确定如何在循环中读取，然后将其分配给一个变量以在存储过程中调用它。

```
 Dim drDocs As SqlClient.SqlDataReader
    Dim cmdDocs As SqlClient.SqlCommand
    Dim Doc As Long
    Dim l As Long
    Using conn As New SqlConnection(DBpath)

        cmdDocs = New SqlClient.SqlCommand("Select (RecordID) from DocID", conn)
        drDocs = cmdDocs.ExecuteReader

        Do While drDocs.Read
           'need it read each row in that field and hold value'

        Loop
        drDocs.Close()
        cmdDocs.Dispose()

        If Doc Then

            cmdDocs = New SqlClient.SqlCommand("Insert_Doc", conn)

            cmdDocs.CommandType = CommandType.StoredProcedure

            cmdDocs.Parameters.Add("path", SqlDbType.NVarChar).Value =need to put hold value from reading that cloumn row by row

            End If
        End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T03:19:41.633

您提供的代码现在确实有效。正如 Juergen D 所说，像 Max()、min() 和使用 Limit 这样的 sql 函数只会根据它们的条件返回 1/特定数量的行。

如果可以，请使用此 SQL 命令

```
 "select `RecordID` from DocID asc;" 
```

如果您希望它采用降序格式，请改用 desc

...现在进一步阅读，我意识到您想要做的是存储结果，然后再次循环通过它，以便您可以使用它执行 sql 命令，对吗？然后您可以做的是将 SQL 结果传递给容器（我使用 datagridviews），然后循环通过容器。

# c# - 异步 TCP 服务器 - 消息帧建议

> ID：16001434
> 
> 赞同：4
> 
> 时间：2013-04-14T16:34:04.337
> 
> 标签：c#, sockets, networking, tcp

我在 C# 中有一个异步 TCP 套接字服务器，它是使用 Socket 的 TcpListener/TcpClient 包装器制作的。一般来说，我对网络很陌生，所以我不知道 TCP 如何处理发送的数据，以及它如何不保留消息边界。经过一番研究，我想我已经想出了一个可靠的解决方案，但我想知道是否有人对我有更多建议。

目前，我发送的数据是使用 protobuf（Google 的数据交换库）[https://code.google.com/p/protobuf/的序列化类对象的字节 []](https://code.google.com/p/protobuf/)

在我序列化我的数据之后，在它被发送之前，我决定在字节数组的开头附加一个 4 字节的 Int32。我的想法是，当数据包被发送到服务器时，它会解析出 Int32，然后等到它收到该字节数后再对数据执行任何操作，否则只需再次调用 BeginRead。

这是我在编写数据之前运行的代码，它似乎工作正常，但我愿意接受任何性能建议：

```
public byte[] PackByteArrayForSending(byte[] data)
{
    // [0-3] Packet Length 
    // [3-*] original data

    // Get Int32 of the packet length
    byte[] packetLength = BitConverter.GetBytes(data.Length);
    // Allocate a new byte[] destination array the size of the original data length plus the packet length array size
    byte[] dest = new byte[packetLength.Length + data.Length];

    // Copy the packetLength array to the dest array
    Buffer.BlockCopy(packetLength, 0, dest, 0, packetLength.Length);
    // Copy the data array to the dest array
    Buffer.BlockCopy(data, 0, dest, packetLength.Length, data.Length);

    return dest;
} 
```

我有点卡在服务器端。我让它读取 packetLength 变量，方法是使用 Buffer.BlockCopy 复制前 4 个字节，然后使用 BitConverter.ToInt32 读取我应该得到的长度。我不确定我是否应该不断地将传入数据读入特定于客户端的 Stream 对象，或者只使用 while 循环。这是到目前为止我在服务器端的代码示例：

```
NetworkStream networkStream = client.NetworkStream;
int bytesRead = networkStream.EndRead(ar);

if (bytesRead == 0)
{
  Console.WriteLine("Got 0 bytes from {0}, marking as OFFLINE.", client.User.Username);
  RemoveClient(client);
}

Console.WriteLine("Received {0} bytes.", bytesRead);

// Allocate a new byte array the size of the data that needs to be deseralized.
byte[] data = new byte[bytesRead];

// Copy the byte array into the toDeserialize buffer
Buffer.BlockCopy(
  client.Buffer,
  0,
  data,
  0,
  bytesRead);

// Read the first Int32 tp get the packet length and then use the byte[4] to get the packetLength
byte[] packetLengthBytes = new byte[4];
Buffer.BlockCopy(
  data,
  0,
  packetLengthBytes,
  0,
  packetLengthBytes.Length);

int packetLength = BitConverter.ToInt32(packetLengthBytes, 0);

// Now what do you recommend?

// If not all data is received, call 
// networkStream.BeginRead(client.Buffer, 0, client.Buffer.Length, ReadCallback, client);
// and preserve the initial data in the client object 
```

感谢您的时间和建议，我期待更多地了解这个主题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:10:05.587

TCP 保证在一端填充到流中的字节将以相同的顺序从另一端掉出，并且不会丢失或重复。仅此而已，当然不支持大于一个字节的实体。

通常，我会在标题前添加消息长度、类型和子类型。通常会提供相关 ID 以将请求与响应相匹配。

基本模式是获取字节并将它们附加到缓冲区。如果缓冲区中的数据足以包含消息头，则提取消息长度。如果缓冲区中的数据足以包含消息，则从缓冲区中删除消息并进行处理。重复任何剩余的数据，直到没有完整的消息要处理。根据您的应用程序，这可能是等待读取或检查流以获取其他数据的点。某些应用程序可能需要继续从单独的线程读取流，以避免限制发送方。

请注意，您不能假设您有一个完整的消息长度字段。处理消息后您可能还剩下三个字节，无法提取`int`.

根据您的消息，使用循环缓冲区可能更有效，而不是在每次处理消息时改组任何剩余的字节。

# php - 致命错误：在非对象上调用成员函数 isError()... 原因是什么？

> ID：16001436
> 
> 赞同：0
> 
> 时间：2013-04-14T16:34:14.673
> 
> 标签：php, error-handling

我从另一台服务器移动到新服务器，现在开始在脚本中收到此错误。我能想到的唯一原因是某些 php 配置或版本。

任何想法？我不能是代码错误，因为在另一台服务器上没有出现此错误。

# magento - Magento 不显示可配置的产品选项

> ID：16001437
> 
> 赞同：1
> 
> 时间：2013-04-14T16:34:24.503
> 
> 标签：magento, options, product, configurable

我创建了一些可配置的产品和使用创建的“大小”属性关联的简单产品。但是，在产品视图页面中，尺寸属性的下拉菜单中只有“选择一个选项...”选项，而我所需的选项没有显示出来。我的所有可配置产品和简单产品均已启用、可见、库存 > 0 且有库存。我还在可配置产品的相关产品选项卡上勾选了简单产品。我已经搜索了问题，但一无所获。我使用了每种方法来解决问题，例如重新保存产品，但无法解决问题。你能帮我么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T13:18:07.187

好的。这是一个 jQuery 冲突。我遇到了同样的问题，有人向我提供了在哪里找到问题的提示，我解决了自己的问题。

我发布的问题： [magento-does-not-show-configurable-product-options](https://stackoverflow.com/questions/26991404/configurable-product-options-not-showing-the-options-on-frontend)

希望这可以帮助其他正在寻求答案的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T19:30:13.560

我有同样的问题。经过两天尝试不同的事情，我能够弄清楚。解决方案非常简单。我所要做的就是将“configurable.phtml”重新上传到“app\design\frontend\base\default\template\catalog\product\view\type\options”。

我希望这有帮助

# actionscript-3 - AS3：MovieClip 脚本在播放完成后停止

> ID：16001438
> 
> 赞同：0
> 
> 时间：2013-04-14T16:34:28.873
> 
> 标签：actionscript-3, movieclip

我是 AS3 的初学者，但我遇到了 MovieClip 类的问题。我有一个角色通过一个处理碰撞、声音等的简单脚本移动。到目前为止，一切都在顺利进行，但是当我开始添加动画时，角色会在动画循环结束时停止。

熟悉 AS3 的人知道这里有什么问题吗？

提前感谢=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:00:29.467

在 Flash IDE 中，尝试单击未按您希望的方式循环的角色实例（这应该来自动画本身的外部；来自角色的容器），然后查看“**属性**”选项卡/窗口内部。在底部附近，会有一个**LOOPING**标头，您可以在其中修改行为。

如果您对此有任何问题，或者希望对动画播放头有更多控制权，您可以以 eg 的形式包含脚本，您可以`gotoAndPlay(1);`在动画周期的最后一帧添加该脚本，以告诉 Flash 从头开始​​播放再次。帧号参数当然不必为 1。例如，您可以在单个时间轴上设置一系列动画序列，并使用 gotoAndPlay() 让它们在内部循环，直到发生事件并将播放头指向同一个 MovieClip 内的另一个动画循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:42:14.477

通常当`play();`被调用时，动画一直在重复。

您应该在您的代码中寻找，因为`stop();`它实际上使动画停止，然后将其删除。

# ruby-on-rails - Rails 创建新的 MVC

> ID：16001444
> 
> 赞同：2
> 
> 时间：2013-04-14T16:35:01.380
> 
> 标签：ruby-on-rails, ruby, model-view-controller

我想创建一个名为 的模型`models/thing.rb`、一个名为 的控制器和一个名为and的`controllers/things_controller.rb`视图。`views/things/index.html.erb``views/things/hello.html.erb`

如何从 Rails 控制台执行此操作？我知道我必须使用`rails generate`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T16:38:59.237

首先生成具有两个动作`index`和的控制器`hello`。

`rails g controller things index hello`

`views/things/index.html.erb`此命令将使用和生成控制器和视图`views/things/hello.html.erb`。

然后生成模型：

`rails g model Thing attribute:type [...]`

如果您想了解有关`rails generate`命令的更多信息，可以查看[Rails 命令行指南](http://guides.rubyonrails.org/command_line.html#rails-generate)

# c++ - C++ 新 - 内存替换和范围解析

> ID：16001447
> 
> 赞同：2
> 
> 时间：2013-04-14T16:35:42.560
> 
> 标签：c++, memory, new-operator

我正在查看以下代码：

```
// operator new example
#include <iostream>     // std::cout
#include <new>          // ::operator new

struct MyClass {
  int data[100];
  int kk;
  MyClass(int ea) : kk(ea) {std::cout << "constructed [" << this << "]\n";}
};

int main () {

  std::cout << "1: ";
  MyClass * p1 = new MyClass(1);
      // allocates memory by calling: operator new (sizeof(MyClass))
      // and then constructs an object at the newly allocated space

  std::cout << "2: ";
  MyClass * p2 = new (std::nothrow) MyClass(2);
      // allocates memory by calling: operator new (sizeof(MyClass),std::nothrow)
      // and then constructs an object at the newly allocated space

  std::cout << "3: ";
  new (p2) MyClass(3);
      // does not allocate memory -- calls: operator new (sizeof(MyClass),p2)
      // but constructs an object at p2

  // Notice though that calling this function directly does not construct an object:
  std::cout << "4: ";
  MyClass * p3 = (MyClass*) ::operator new (sizeof(MyClass));
      // allocates memory by calling: operator new (sizeof(MyClass))
      // but does not call MyClass's constructor

  delete p1;
  delete p2;
  delete p3;

  return 0;
} 
```

我有两个问题：

*   执行该行时对象2是否被破坏

    ```
    new (p2) MyClass(3); 
    ```

那应该在对象 2 的分配空间中构造对象 3 吗？

*   线

    ```
    MyClass * p3 = (MyClass*) ::operator new (sizeof(MyClass)); 
    ```

没有 :: 也可以工作，在没有类/命名空间的情况下使用范围解析运算符的目的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:46:14.647

首先，不，第二个对象的析构函数没有被调用。一个新对象只是在它的位置初始化。如果您愿意，可以`p2->~MyClass();`在重用内存之前显式调用对象的析构函数。

其次，使用 using`::`来限定分配函数的目的是确保它来自全局命名空间。该标准为所有翻译单元隐式定义了两个重载`operator new`，如果包含`<new`>，则会得到一些额外的。所有这些都定义在全局命名空间中（不在 中`std`）。可以重载`operator new`类（只需将它们作为成员函数提供），因此限定 with`::`确保使用全局版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T16:47:23.767

`p2`答案 1：当您将其内存用于新对象时，位于的生命周期中的对象将结束。它不会运行其析构函数，因此它不会被干净地“销毁”，尽管只有 POD 成员并且没有用户声明的析构函数，在这种情况下它没有区别。

答案 2：使用`::`强制查找`operator new`仅考虑`operator new`在全局范围内声明。在您调用的范围内，在任何情况下都不会考虑`operator new`其他`operator new`任何情况，因此没有区别。

# audio - Corona SDK - 您可以更改设备的音量设置或至少获取设备的音量设置吗

> ID：16001452
> 
> 赞同：1
> 
> 时间：2013-04-14T16:35:54.627
> 
> 标签：audio, audio-recording, coronasdk

Corona SDK 有 audio.setVolume 和 audio.setMaxVolume 和 audio.getVolume 等 API

但似乎这些只是改变 Corona 环境中的最大音量或获取 Corona 环境中的音量。

我的应用程序可让您录制您的声音并播放。当用户听不到自己的声音时，他们会抱怨并责怪我的应用程序。

我发现在大多数情况下（可能全部，但我无法验证），用户告诉我音量以某种方式设置为关闭，但他们没有意识到。出于某种原因，他们在想知道为什么听不到声音之前没有先检查音量。

如果我可以向用户显示设备的音量，这将解决问题。如果我可以给他们一个滑块来更新设备的音量，对于那些对如何通过设备更改音量感到困惑的用户来说更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T16:58:02.733

显然，目前无法使用 Corona 获取设备音量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-14T18:30:45.640

这似乎适用于 iOS，但不适用于 Android...查看以下链接：http: [//developer.coronalabs.com/forum/2011/06/05/new-audiosession-properties](http://developer.coronalabs.com/forum/2011/06/05/new-audiosession-properties)

```
if audio.supportsSessionProperty then
    local master_ringer_volume = audio.getSessionProperty(1667788662)
    if (master_ringer_volume ~= nil) then
        if (master_ringer_volume < 0.25) then
            -- Do whatever you need to here...
        end
    end
end 
```

# mathematical-optimization - 求解整数线性程序：为什么求解器声称可解实例不可行？

> ID：16001462
> 
> 赞同：12
> 
> 时间：2013-04-14T16:37:09.707
> 
> 标签：mathematical-optimization, cplex, gurobi, integer-programming, scip

我正在尝试解决整数规划问题。我已经尝试过使用[SCIP](http://scip.zib.de/)和[LPSolve](http://lpsolve.sourceforge.net/5.5/)

例如，给定 A 和 B 的最终值，我想在以下 C# 代码中求解 valA：

```
Int32 a = 0, b = 0;
a = a*-6 + b + 0x74FA - valA;
b = b/3 + a + 0x81BE - valA;
a = a*-6 + b + 0x74FA - valA;
b = b/3 + a + 0x81BE - valA;
// a == -86561, b == -32299 
```

我以 lp 格式将其实现为这个整数程序（截断除法会导致一些并发症）：

```
min: ;
+valA >= 0;
+valA < 92;
remAA_sign >= 0;
remAA_sign <= 1;
remAA <= 2;
remAA >= -2;
remAA +2 remAA_sign >= 0;
remAA +2 remAA_sign <= 2;
remAA +4294967296 remAA_range >= -2147483648;
remAA +4294967296 remAA_range <= 2147483647;
remAA +4294967296 remAA_range +2147483648 remAA_sign >= 0;
remAA +4294967296 remAA_range +2147483648 remAA_sign <= 2147483648;
-1 remAA +4294967296 remAA_range +3 remAA_mul3 = 0;
remAB_sign >= 0;
remAB_sign <= 1;
remAB <= 2;
remAB >= -2;
remAB +2 remAB_sign >= 0;
remAB +2 remAB_sign <= 2;
remAB +4294967296 remAB_range >= -2147483648;
remAB +4294967296 remAB_range <= 2147483647;
remAB +4294967296 remAB_range +2147483648 remAB_sign >= 0;
remAB +4294967296 remAB_range +2147483648 remAB_sign <= 2147483648;
+1431655765 remAA +1 offA -2 valA +1 offB -1 remAB +4294967296 remAB_range +3 remAB_mul3 = 0;
a = -86561;
b = -32299;
offA = 29946;
offB = 33214;
-4 offA +3 valA +1431655765 remAA +1 offB +4294967296 Fa - a = 0;
+477218588 remAA -1431655769 offA -1431655764 valA -1431655763 offB +1431655765 remAB +4294967296 Fb - b = 0;
int valA;
int remAA;
int remAA_range;
int remAA_sign;
int remAA_mul3;
int remAB;
int remAB_range;
int remAB_sign;
int remAB_mul3;
int Fa;
int Fb;
int offA;
int offB;
int a;
int b; 
```

然后试图解决它：

```
The model is INFEASIBLE 
```

但是，我知道有一个可行的解决方案，因为我知道一个有效的变量赋值。**添加**以下条件会导致找到解决方案：

```
a = -86561;
b = -32299;
offA = 29946;
offB = 33214;
valA = 3;
remAA = 0;
remAA_range = 0;
remAA_sign = 0;
remAA_mul3 = 0;
remAB = 1;
remAB_range = 0;
remAB_sign = 0;
remAB_mul3 = -21051;
Fa = 0;
Fb = 21054; 
```

两个不同的求解器声称这个可行的问题是不可行的。我是否违反了一些不成文的条件？这是怎么回事？有没有真正解决问题的解决方案？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-14T20:54:54.537

MIP 求解器使用浮点数据。对于像您这样的数据量级差异很大的问题，这会导致舍入误差。任何 LP 求解器都必须对可能放大问题的数据执行操作。在某些情况下，例如您的问题，这可以使求解器得出结论，如果问题不可行，则该问题是不可行的。当您修复变量时，求解器会执行较少的浮点运算。

[像Gurobi](http://www.gurobi.com)或 cplex 这样的商业求解器求解器通常在处理像您这样的数字困难数据方面做得更好。Gurobi 有一个参数[QuadPrecision](http://www.gurobi.com/documentation/5.0/reference-manual/node723#parameter%3aQuad)可以处理更高精度的浮点数。大多数求解器都有一个参数，可以使求解器更好地处理数值困难的数据。例如，LPSolve 有一个参数[epsint](http://lpsolve.sourceforge.net/5.5/set_epsint.htm)，这将使它放松它认为的整数。该参数的默认值为 10e-7，因此 0.9999999 将被视为整数，但 0.9999998 不会。您可以使该值更大，但您可能会收到不可接受的结果。

您正在经历一个[泄漏的抽象](http://www.joelonsoftware.com/articles/LeakyAbstractions.html)。您的问题在技术上属于混合整数编程的范围，但 MIP 求解器并非旨在解决它。混合整数规划是一个 NP-Hard 问题。不可能有一个求解器在所有输入上都能快速可靠地工作。MIP 求解器试图很好地解决来自不同领域的问题，如投资组合优化、供应链规划和网络流。它们并非旨在解决密码学问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T14:12:15.537

您还可以查看 SCIP 3.1.0，尤其是它的扩展精度算术功能。使用 GMP 可以以非常高的精度计算 LP 解。

# list - 努力从列表中取出最后一个元素（Haskell）

> ID：16001463
> 
> 赞同：3
> 
> 时间：2013-04-14T16:37:13.783
> 
> 标签：list, exception, haskell

这是我的代码，但是，我不知道这是怎么回事，这是我的代码：

```
ll :: [a] ->  a
ll lis = case lis of
  (_:xs) -> ll xs
  [] -> error"xx" 
```

并且终端没有错误消息：但是当我运行“ll [1, 2, 3]”时，我想得到“3”，但是，我得到了“ *** Exception：xx”的结果。

谁喜欢告诉我它有什么问题？谢谢XD

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-14T16:39:30.237

You're never returning the last element of the list. The first case clause drops the first element of a non-empty list then recursively calls `ll`. Eventually, you'll hit the empty list case and hence the error gets raised.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-14T18:16:20.627

我发现从递归的基本情况开始很有帮助：

```
ll [x] = x 
```

然后递归：

```
ll (_:xs) = ll xs 
```

当然，提供有用的错误信息是一种很好的风格。当没有大小写匹配时，最后这样做通常很方便：

```
ll _ = error "empty list" 
```

作为奖励，WTF！？！版本：

```
import Data.List

ll = foldl' (flip const) (error "empty list") 
```

你可以调用`flip const`“阿尔茨海默氏症函数”，它只是忘记了它的第一个参数并返回第二个参数，并且当`foldl'`从左到右挖掘列表时，它会给你最后一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T21:21:12.570

使用预定义函数的最简单实现：

```
ll = head . reverse 
```

# php - 提交后如何让消息出现在弹出窗口中而不是在不同的页面上

> ID：16001464
> 
> 赞同：0
> 
> 时间：2013-04-14T16:37:14.643
> 
> 标签：php, jquery, html, css

我有一个联系表格，我正在使用 Jquery .load 将一个 php 文件导入到导航所在的任何页面中。下面的例子。

[http://madaxedesign.co.uk/dev/index.html](http://madaxedesign.co.uk/dev/index.html)

我知道需要更改操作表单，以便将其连接到正确的位置。但是，如果它在不同的页面上并导入到一个页面中，我该怎么做。因为目前它设置为contact.php，但在提交后它会转到该页面并且不会将消息导入弹出窗口。所以我真的需要它作为文件名，具体取决于它所在的页面。

所以我想问题是如何在提交后让消息出现在弹出窗口中而不是在不同的页面上？

代码：

```
 <?php
        $your_email = "maxlynn@madaxedesign.co.uk";
        $subject = "Email From Madaxe";
        $empty_fields_message = "<p>Please go back and complete all the fields in the form.</p>";
        $thankyou_message = "<p>Thank you. Your message has been sent. We Will reply as soon as possible.</p>";

        $name = stripslashes($_POST['txtName']);
        $email = stripslashes($_POST['txtEmail']);
        $message = stripslashes($_POST['txtMessage']);

        if (!isset($_POST['txtName'])) {

        ?>
        <form method="post" action="contact.php">
            <div id="NameEmail"> 
                <div>
                    <label for="txtName">Name*</label> 
                    <input type="text" title="Enter your name" name="txtName" />
                </div> 
                <div>
                    <label for="txtEmail">Email*</label> 
                    <input  type="text" title="Enter your email address" name="txtEmail" />
                </div> 
            </div>
            <div id="MessageSubmit">
                <div> 
                    <textarea maxlength="1200" title="Enter your message" name="txtMessage"></textarea> 
                    <label for="txtMessage">Message</label>
                </div>
                <div> 
                    <input type="submit" value="Submit" /></label>
                </div>
            </div> 
        </form> 
        <?php

        }

        elseif (empty($name) || empty($email) || empty($message)) {

        echo $empty_fields_message;

        }

        else {

            $referer = $_SERVER['HTTP_REFERER'];
            $this_url = "http://".$_SERVER['HTTP_HOST'].$_SERVER["REQUEST_URI"];
    if ($referer != $this_url) {
    echo "You do not have permission to use this script from another URL, nice hacking     attempt ;p.";
    exit;
            }

        mail($your_email, $subject, $message, "From: $name <$email>");

        echo $thankyou_message;

            }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:46:37.590

你想做的只有在 javascript 中才有可能，这是一种由浏览器执行的语言。Javascript self 是一种讨厌的语言，但有许多扩展/插件可以让这变得非常简单，就像 jQuery。我建议你学习这门语言，你会发现 Web 开发的新世界打开了 ;-)。例如：[http ://learn.jquery.com/](http://learn.jquery.com/)

给你的表单一个id： `<form method="post" id="test-form" action="contact.php">` 这样你就可以用jquery引用它

现在您可以使用 jQuery 捕获表单提交操作：

```
$('#test-form').submit(function() {
//send your data to your server and get the html data
  $.post('contact.php', $(this).serialize(), function (data){
 //here you can add the (html)data returned by the action to your page.
   $('body').append(data); //append data to body of html page
 })
 return false; //stop form from going to the next page
}); 
```

此代码基于 javascript 插件：jQuery，如果您想在页面上执行任何动态操作而不重新加载页面，则需要使用 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:43:15.457

You should use ajax, send the email without refreshing page.

# iphone - 我可以在 iPhone 上创建自定义键盘词典吗？

> ID：16001466
> 
> 赞同：0
> 
> 时间：2013-04-14T16:37:19.943
> 
> 标签：iphone, dictionary, keyboard

我正在尝试为我的同事创建一个包含特定术语的键盘字典。理想情况下，这些术语将与用户的实际个人词典分开，并且可以根据请求启用/禁用。

编写这样的应用程序可能吗？如果没有，我可以让 iPhone 应用程序安装用户词典中的术语吗？

感谢您的任何提示和最好的问候

帕斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:41:07.850

Yes, but it would need to be done manually per device: [how-to on lifehacker](http://lifehacker.com/5822520/how-to-add-new-custom-words-to-your-iphones-autocomplete-dictionary).

# android - 在Android中清除数据并打开MainActivity.java文件

> ID：16001471
> 
> 赞同：0
> 
> 时间：2013-04-14T16:37:45.073
> 
> 标签：android, android-intent, sharedpreferences

我正在开发一个应用程序，它获取用户的手机号码并将号码存储在本地文件中，并将其存储在云数据库中。我以这样一种方式编写了应用程序逻辑，即如果用户退出应用程序，它会保持状态。当用户再次打开应用程序时，使用相同的手机号码打开主页。我想清除单击注销按钮上的所有数据，然后再次打开`MobileHarvestMainActivity.java`文件（要求用户再次输入数字）。

我尝试了[如何以编程方式清除应用程序数据](https://stackoverflow.com/questions/4856955/how-to-programatically-clear-application-data)的链接——它有效，但是当使用意图发送 MainActivity 页面时应用程序崩溃。

```
logout.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            v.performHapticFeedback(HapticFeedbackConstants.KEYBOARD_TAP);

                Toast.makeText(getBaseContext(), "clicked", Toast.LENGTH_SHORT).show();

            Intent intent = new Intent(ListeningAndSharingHomeActivity.this,MyActivity.class);
          //  intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); // To clean up all activities
            startActivity(intent);
            finish();

        }
    });

}

public class MyActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_my);

    clearApplicationData();

    }

    public void clearApplicationData() {

    File cache = getCacheDir();

    File appDir = new File(cache.getParent());

    if (appDir.exists()) {

    String[] children = appDir.list();

    for (String s : children) {

    if (!s.equals("lib")) {

    deleteDir(new File(appDir, s));
    Log.i("TAG", "**************** File /data/data/APP_PACKAGE/" + s + " DELETED *******************");

    }

    }

    }
    calling();
    }

    public static boolean deleteDir(File dir) {

    if (dir != null && dir.isDirectory()) {

    String[] children = dir.list();

    for (int i = 0; i < children.length; i++) {

    boolean success = deleteDir(new File(dir, children[i]));

    if (!success) {

    return false;

    }

    }

    }

    return dir.delete();

    } 
```

无效调用（）{

```
Intent intent = new Intent(getApplicationContext(), MobileHarvestMainActivity.class);
//intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent);

} 
```

}

# objective-c - Objective-C：我是否正确使用了这个委托？

> ID：16001473
> 
> 赞同：0
> 
> 时间：2013-04-14T16:37:46.907
> 
> 标签：objective-c, xcode, delegates, tableview, nstableview

我有一个包含 tabView 的 mainWindowController（我用来在主窗口上的视图之间切换）。

我有每个视图的视图控制器（每个都有一个 nib 文件）。其中一个视图视图 A 包含一个 tableView。我需要使用委托方法来完成某些事情。

经过一两个小时或网络研究和阅读代表（对我来说是新概念），我终于得到了我的程序，以实现我想要的结果，用于视图 A。

这是视图 A 的接口声明：

```
@interface ViewAController : NSViewController <NSTableViewDelegate>

- (BOOL) tableView:(NSTableView *)tableView shouldEditTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row; 
```

如您所见，我正在使用 NSTableViewDelegate 并且需要禁用表格列的编辑。该方法的实现如下所示：

```
- (BOOL) tableView:(NSTableView *)tableView shouldEditTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    NSLog(@"shouldEditTableColumn called");
    return NO;
} 
```

我使用 NSLog 来确保正在调用该函数。

现在在*SAME*视图控制器（视图 A）中，我通过单击按钮禁用编辑：

```
- (IBAction)turnOffEditing:(id)sender
{
    [self.tableView setDelegate:self];
    [self tableView:self.tableView shouldEditTableColumn:self.columnTableName row:0];
    [self tableView:self.tableView shouldEditTableColumn:self.columnTableName row:1];
    NSLog(@"turnOffEditing");
} 
```

如您所见，我从视图控制器获取 tableView 并将委托分配给 self。

然后我调用 self.shouldEditTableColumn 方法。

现在，一切正常。但是，这是使用委托的正确方法吗？如果我需要为视图 A 使用更多的 NSTableView 委托方法（唯一具有表的视图），我假设我可以像以前一样在视图 A 的控制器中定义它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:59:22.353

通常，委托人从一开始就是委托人。`-turnOffEditing:`也就是在action方法中设置delegate有点奇怪。当然，为了使我的建议起作用，您需要从委托方法返回一些动态值，例如布尔标志实例变量的值。

此外，您不应该在操作方法中自己调用委托方法。那没有任何作用。委托是*框架*在需要决定如何表现时调用的东西。

因此，我会将您的代码更改为：

```
@property BOOL editingDisabled;

- (BOOL) tableView:(NSTableView *)tableView shouldEditTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    NSLog(@"shouldEditTableColumn called");
    return self.editingDisabled;
}

- (IBAction)turnOffEditing:(id)sender
{
    self.editingDisabled = TRUE;
    NSLog(@"turnOffEditing");
} 
```

您想在设置期间设置委托。一个好的方法是简单地将表格视图的*代理*出口连接到 NIB 中的控制器。

# facebook - 页面管理员 - Graph Api 评论作为用户

> ID：16001474
> 
> 赞同：1
> 
> 时间：2013-04-14T16:37:53.370
> 
> 标签：facebook, facebook-graph-api

它有点复杂，因为我不明白可能是一个错误。或者也许我犯了一个错误。

用户允许应用程序，同时用户是粉丝专页的管理员。我将所有 Data Accesstoken uid 等存储在数据库中。

现在我想以用户身份对照片发表评论（该用户也是粉丝专页的管理员）

问题是评论发布成功，但评论来自粉丝专页。

我只想像他一样以用户身份发布。我使用存储在数据库中的用户的访问令牌，还使用带有名称和 ID 的表单字段。

有没有人面临同样的问题？

```
$details = array( 'message'=> $photodata,'access_token' => $tok, 'from' => $from);
$from = array( 'name'=> $nome,'id' => $ad);
$addscomment = $facebook->api("".$photoid."/comments", 'post', $details); 
```

# php - jQuery POST 处理错误

> ID：16001480
> 
> 赞同：0
> 
> 时间：2013-04-14T16:38:22.743
> 
> 标签：php, jquery

**解释**

我正在发送一个 POST，并且在 PHP 中我正在检查数据库中是否已经存在用户名。如果是，则返回错误。

但问题是，我不能使用相同的`function(data)`，因为我希望错误位于另一个 div 中。

```
$.post("events.php?action=send", { data :  $(this).serialize() }, function(data) 
{
    $("#processing").html('');  
    $("#comments").html(data);
}); 
```

**问题**

我不能在匿名函数中有两个变量，比如函数（数据，错误），那么我应该如何获取打印的“错误”PHP，例如“用户已经存在于数据库中”，然后将其放入#errors div ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:47:54.560

这取决于您如何处理 PHP 代码中的错误。

为了最终进入错误处理程序，您需要将 HTTP 状态码设置为“5XX”。

您可能想要做的是在用户已经存在的情况下序列化一个错误对象，并像现在一样在成功处理程序中处理它：

**PHP：**

```
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json');

$data = array('error' => 'something went wrong');
echo json_encode($data); 
```

**JS：**

```
function(data){

    if(data && data.error){
       //there was an error, handle it here
       console.log(data.error);
    } else {
       //do something else with the user
       console.log(data);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:45:30.760

在 PHP 中，您可以返回 json 错误，`print '{"error":'.json_encode($error).'}'`然后在您的 js 中放入所需的 div

```
$.post("events.php?action=send", { data :  $(this).serialize() }, function(data) 
{
  $("#processing").html('');
  $("#comments").html(data);
  $("#error").append(data.error);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T16:52:20.037

我建议您将数据作为 json 字符串从您的服务器返回。如果你这样做，你可以从 $.parseJSON(data); 中获取一个对象。

```
// In your php code
$result = new stdClass();
$result->userExists=false;

echo json_encode($result); 
```

现在在您的匿名函数中：

```
// Javascript
data = $.parseJSON(data);
console.log(data);

if (data.userExists) alert("User exists!"); 
```

# php - 如何在drupal 7的page_preprocess函数中获取表单提交的值

> ID：16001481
> 
> 赞同：0
> 
> 时间：2013-04-14T16:38:40.043
> 
> 标签：php, drupal, drupal-fapi, drupal-preprocess

我的页面上有一些来自数据库的输出数据（在 mytheme_page_preprocess 函数中对 db 的查询很少），我想做搜索表单（文本字段和提交按钮）。那么，如何在预处理函数中获取表单提交的值？

类似于`$form_state['values']`myform_form_submit($form, $form_state)，但在预处理函数中。

我的简单搜索表格

```
function reestr_form($form, &$form_state) 
{
    $form = array();
    $form['q'] = array(
                       '#type' => 'textfield',
                       '#size' => 30,
                       '#default_value' => t(''),
                      );
    $form['submit'] = array(
                            '#type' => 'submit',
                            //'#value' => 'send',
                            '#name' => 'op',
                            '#src' => base_path() . path_to_theme() . '/images/search-button.png',
                            '#submit' => array('reestr_form_submit')
                            );
    //$form['#submit'][] = 'reestr_search_submit';
    return $form;
}

function reestr_form_submit($form, &$form_values) 
{
    $message = 'You have submitted the ' . $form_id . ' form which contains the following data:<pre>' . print_r($form_values, true) . '</pre>';
    var_dump($message);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-02T16:28:53.303

如果[`template_process_HOOK`](https://api.drupal.org/api/drupal/modules!system!theme.api.php/function/hook_preprocess_HOOK/7)是您的表单的一部分，您应该可以访问您的实体`$variables['form']['#entity']`。

```
/**
 * Implements template_process_HOOK().
 */ 
function mymodule_preprocess_myhook(&$variables) {
  $entity = $variables['form']['#entity'];
  $field_name = $variables['form']['#field_name'];
  $info = field_info_field($field_name);
  $instance = field_info_instance($entity->entityType(), $field_name, $entity->type);
} 
```

或者使用一些 ctools 缓存 ( `ctools_object_cache_set()`/ `ctools_object_cache_get()`) 或通过[`form_get_cache()`](https://api.drupal.org/api/drupal/includes%21form.inc/function/form_get_cache/7).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T17:06:49.870

既然它是一个搜索表单，如何让它使用 GET 并在你的预处理函数中从 $_GET 数组中获取值呢？无论如何，通常建议将 GET 用于搜索表单，因此结果是可收藏和可共享的。

像这样：[https ://api.drupal.org/api/drupal/developer%21topics%21forms_api_reference.html/7#method](https://api.drupal.org/api/drupal/developer%21topics%21forms_api_reference.html/7#method)

# vb.net - 类无法将项目添加到 Listview

> ID：16001485
> 
> 赞同：0
> 
> 时间：2013-04-14T16:39:17.870
> 
> 标签：vb.net, class, listview

我做了一个类来将项目添加到`Listview`我的`Home Form`. 类代码如下：

```
Public Class ActivityLogEngine
Public Sub LogActivity(ByVal Category As String, ByVal Description As String)
    Dim item As New ListViewItem
    Dim str(1) As String
    Dim itm As ListViewItem
    str(0) = "[" & Category & "]"
    str(1) = Description
    itm = New ListViewItem(str)
    Home.ActivityList.Items.Add(itm)
End Sub
End Class 
```

所以你可以看到，当我创建一个实例`ActivityLogEngine`并使用`LogActivity`sub 时，它会将`Category`和`Description`字符串写入我的`Home Form`. 但是，当我使用代码时：

```
Dim engine As ActivityLogEngine = New ActivityLogEngine
engine.LogActivity("Server", "Files loaded & connected to server") 
```

它不会将这些行写入我的`Listview`. 如果这有什么不同，我会`DetailsView`在我的`Listview`.

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:55:32.033

1）定义一个类来保存类别/描述对：LogEntry。
2) 定义一个 DataTemplate 来显示这个类。
3) 使用 LogEntry 的 ObservableCollection。
4) 将您的 ListView 绑定到该集合。
5) 仅在集合中添加/删除项目，而不是直接在 ListView 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T05:54:10.570

我会尝试的第一件事是将我的对象重命名`engine`为`alEngine`

原因是 Engine 是 .net 框架中的一个类......

请参阅[MSDN 引擎类](http://msdn.microsoft.com/en-us/library/microsoft.build.buildengine.engine%28v=vs.90%29.aspx)

# c++ - Multiple definition compile errors using -pg flag for gprof in C++

> ID：16001490
> 
> 赞同：0
> 
> 时间：2013-04-14T16:39:49.080
> 
> 标签：c++, compilation, g++, gprof

I am trying to compile some C++ code to be used with gprof, and have tried using the -pg flag, but am getting errors regarding multiple definitions for each of my functions. My command is basically g++ -o -pg my_exec my_code.cp -mylib.

Any idea what I'm doing wrong?

# php - jQuery Mobile：根据列表中的选择更新 MySQL 表中的输入

> ID：16001492
> 
> 赞同：0
> 
> 时间：2013-04-14T16:40:09.533
> 
> 标签：php, jquery, mysql, jquery-mobile

我正在编写一个 jQuery 移动页面（使用 PHP），它填充一个 select 元素，它的选项标签带有来自 MySQL 数据库中的表的“items”（该表包含 id、items、cost）。使用常用的 mysql_query 和 while mysql_fetch_assoc 方法来回显选项，这很好。剥离到裸代码：

```
<?php
    $itemQuery = mysql_query("SELECT shortDesc FROM `items` ORDER BY shortDesc");
?>
<label for="item" class="select">Item:</label>
    <select name="item" id="item" data-native-menu="false">
        <option>Select Item:</option>            
        <?php
            while($temp = mysql_fetch_assoc($itemQuery))
            {
                echo "<option value='".$temp['shortDesc']."'>".$temp['shortDesc']."</option>";
            }
        ?>
    </select> 
```

但是，当用户从列表中选择一个项目时，我希望能够使用 MySQL 表中的实际项目成本更新名为“成本”下方的输入元素，我不确定如何使用 jQuery /PHP/MySQL。费用输入栏：

```
<label for="cost">Cost:</label>
<input type="text" name="cost" id="cost" value="" placeholder="Cost (£)"/> 
```

我也不确定我们是否可以从 $itemQuery 中已经返回的结果中以某种方式获取成本值（通过将 SELECT 更改为 shortDesc，成本）保存另一个数据库查询，或者我们是否必须再次查询数据库才能执行选择用户选择的位置 = shortDesc。

我怀疑以不同的形式，这是开发人员的共同要求；本质上是根据用户的选择/交互从数据库中获取一些信息。我已经在 Google 上查看并在这里搜索过，但我不确定我是否使用了正确的搜索词来查找我怀疑已经在其他地方得到回答的内容！

一如既往的帮助非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:07:45.697

你可以这样做：

1）遍历您的查询结果并编写您的选项和一些javascript（我使用关联数组）

```
<?php
    $result = mysql_query("SELECT shortDesc,costs FROM items ORDER BY shortDesc");
    $options = '';
            $javascript = ''; 
    while ($row = mysql_fetch_assoc($result))
    {
        $options .= '<option value="'.$row['shortDesc'].'">'.$row['shortDesc'].'</option>';
        $javascript .= '\''.$row['shortDesc'].'\' : \''.$row['costs'].'\',';
    }
?> 
```

2）写你的html和javascript：

```
<select id="yourselect">
    <option>select</option>
<?=$options?>
</select>

<label for="cost">Cost:</label>
<input type="text" name="cost" id="cost" value="" placeholder="Cost (£)"/> 
```

3）编写一些javascript来更新您的输入字段：

```
<script>
    var costs = {<?=$javascript?>};

    $(function() {
    $('#yourselect').change(function() {

    cost = costs[$('#yourselect').val()];

    $('#cost').val(cost);

    });
    });

</script> 
```

# php - Good practices with symfony 2 : Make a facebook like friend request

> ID：16001497
> 
> 赞同：1
> 
> 时间：2013-04-14T16:40:26.783
> 
> 标签：php, facebook, symfony, doctrine-orm, request

I am working on a Web App using Symfony2 and I'd like to make a facebook friend request like system.

User "A" ask permission to user "B" to do something. User "B" should see a notification asking confirmation.

I asked my self what is a good way to do that. I though about creating an entity "request" whit User "A" (Object), User "B" (user_id field, using ManyToOne relation in Doctrine), Type (string) and Date field.

However, using object type will serialize the User "A". It seems a little heavy. And Using User "A" id instead of all object is not really Object Programming friendly.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:48:44.963

你绝对是在正确的轨道上。这就是你应该在 Symfony2 中使用 Doctrine2 的方式。

创建一个`Request`包含以下字段的实体：

*   `id`
*   `sender`（与用户实体的多对一关系）
*   `receiver`（也是与用户实体的多对一关系）
*   `date`
*   无论您使用更多字段

或者，根据您的目标，您可以直接向`Friendship`or`Action`实体添加一行并处理一个字段`confirmed`或`confirmed_time`分别为 NULL 的字段，直到友谊/动作得到确认或完成。

# azure - Windows Azure 虚拟机配备什么样的显卡？

> ID：16001500
> 
> 赞同：5
> 
> 时间：2013-04-14T16:40:47.893
> 
> 标签：azure, gpu

我正在考虑在 Windows Azure 虚拟机上运行一些图形密集型程序，但不确定它们有什么样的硬件。所有虚拟机都具有相同的 GPU 吗？你对此有何经验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:28:35.510

Azure 虚拟机中的 GPU 可能是非常基础的，并且很可能不具备执行密集图形操作所需的处理能力。据我所知，MS 没有公布其虚拟机背后的图形硬件的详细信息（如果他们真的使用它们？）。

这里有一个关于在 Azure 云服务中运行 WPF 的问题，这可能会有所帮助。

[Azure 可以运行 WPF 吗？](https://stackoverflow.com/questions/5899618/can-azure-run-wpf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-22T18:53:03.937

N 系列 Azure VM 支持强大的 GPU。NC 系列 VM 采用 Tesla K80，通过 DDA（离散设备分配）它应该提供接近裸机的性能。NV 系列 VM 提供带有 nVidia GRID 的 Tesla M60。

更多的：

*   [https://www.hpcwire.com/2015/09/29/microsoft-puts-gpu-boosters-on-azure-cloud/](https://www.hpcwire.com/2015/09/29/microsoft-puts-gpu-boosters-on-azure-cloud/)
*   [https://blogs.technet.microsoft.com/hybridcloudbp/2​​016/12/13/n-series-azure-vms-with-gpu/](https://blogs.technet.microsoft.com/hybridcloudbp/2016/12/13/n-series-azure-vms-with-gpu/)

令人着迷的是 Azure 机器中也有 FPGA（尽管不能公开访问）： [https ://www.microsoft.com/en-us/research/project/project-catapult/](https://www.microsoft.com/en-us/research/project/project-catapult/)

# character-encoding - Windows Phone 字符编码

> ID：16001506
> 
> 赞同：3
> 
> 时间：2013-04-14T16:41:03.883
> 
> 标签：character-encoding, windows-phone, iso, turkish

我的代码`Encoding.GetEncoding("iso-8859-9");`在我的 Windows Phone 项目中。但 Windows Phone 不支持“iso-8859-9”。我该如何解决这个问题？

[http://www.hardcodet.net/2010/03/silverlight-text-encoding-class-generator](http://www.hardcodet.net/2010/03/silverlight-text-encoding-class-generator)

我也找到了这个链接，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:34:02.753

要使用该程序，只需键入编码名称，它将生成如下所示的类：

![http://i.imgur.com/U559Fnv.png](https://i.stack.imgur.com/MTtn5.png)

然后在某处为该类创建一个文件（复制从程序生成的代码）并开始使用它：

```
//Instead of
Encoding enc = Encoding.GetEncoding("iso-8859-9");

//do this
Encoding enc = new ISO88599Encoding();
//Proceed exactly the same 
```

生成的代码太长，无法在此处复制粘贴，但希望您能按照这些说明进行管理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T07:17:47.513

这是一段与 Windows Phone 7.1（我认为是 Silverlight）兼容的代码，它重新定义了 ISO-8859-9（或 Latin9）编码。为方便起见，该代码还重新定义了 ISO-8859-1（或 Latin1）和 Windows-1252。它还可用于定义其他 ISO 拉丁编码系列：

```
public class Latin9Encoding : LatinEncoding
{
    public Latin9Encoding()
        : base(CharMap)
    {
    }

    static Latin9Encoding()
    {
        CharMap = new Dictionary<byte, char>();
        CharMap.Add(0xD0, '\u011E');
        CharMap.Add(0xDD, '\u0130');
        CharMap.Add(0xDE, '\u015E');
        CharMap.Add(0xF0, '\u011F');
        CharMap.Add(0xFD, '\u0131');
        CharMap.Add(0xFE, '\u015F');
    }

    public static Dictionary<byte, char> CharMap;

    public override string WebName
    {
        get
        {
            return "iso-8859-9";
        }
    }
}

public class Windows1252Encoding : LatinEncoding
{
    public Windows1252Encoding()
        : base(CharMap)
    {
    }

    static Windows1252Encoding()
    {
        CharMap = new Dictionary<byte, char>();
        CharMap.Add(0x80, '\u20AC');
        CharMap.Add(0x82, '\u201A');
        CharMap.Add(0x83, '\u0192');
        CharMap.Add(0x84, '\u201E');
        CharMap.Add(0x85, '\u2026');
        CharMap.Add(0x86, '\u2020');
        CharMap.Add(0x87, '\u2021');
        CharMap.Add(0x88, '\u02C6');
        CharMap.Add(0x89, '\u2030');
        CharMap.Add(0x8A, '\u0160');
        CharMap.Add(0x8B, '\u2039');
        CharMap.Add(0x8C, '\u0152');
        CharMap.Add(0x8E, '\u017D');
        CharMap.Add(0x91, '\u2018');
        CharMap.Add(0x92, '\u2019');
        CharMap.Add(0x93, '\u201C');
        CharMap.Add(0x94, '\u201D');
        CharMap.Add(0x95, '\u2022');
        CharMap.Add(0x96, '\u2013');
        CharMap.Add(0x97, '\u2014');
        CharMap.Add(0x98, '\u02DC');
        CharMap.Add(0x99, '\u2122');
        CharMap.Add(0x9A, '\u0161');
        CharMap.Add(0x9B, '\u203A');
        CharMap.Add(0x9C, '\u0153');
        CharMap.Add(0x9E, '\u017E');
        CharMap.Add(0x9F, '\u0178');
    }

    public static Dictionary<byte, char> CharMap;

    public override string WebName
    {
        get
        {
            return "Windows-1252";
        }
    }
}

public class Latin1Encoding : LatinEncoding
{
    public Latin1Encoding()
        : base(null)
    {
    }

    public override string WebName
    {
        get
        {
            return "iso-8859-1";
        }
    }
}

public abstract class LatinEncoding : Encoding
{
    protected LatinEncoding(Dictionary<byte, char> map)
    {
        FallbackByte = (byte)'?';
        if (map != null)
        {
            Map = map;
            ReverseMap = new Dictionary<char, byte>(map.Count);
            foreach (var entry in map)
            {
                ReverseMap[entry.Value] = entry.Key;
            }
        }
    }

    public byte FallbackByte { get; set; }
    public Dictionary<byte, char> Map { get; private set; }
    public Dictionary<char, byte> ReverseMap { get; private set; }

    public override int GetByteCount(char[] chars, int index, int count)
    {
        return count;
    }

    public override int GetBytes(char[] chars, int charIndex, int charCount, byte[] bytes, int byteIndex)
    {
        if (chars == null)
            throw new ArgumentNullException("bytes");

        if (charIndex < 0)
            throw new ArgumentOutOfRangeException("charIndex");

        if (charCount < 0)
            throw new ArgumentOutOfRangeException("charCount");

        if (bytes == null)
            throw new ArgumentNullException("bytes");

        if (byteIndex < 0)
            throw new ArgumentOutOfRangeException("byteIndex");

        if ((charIndex + charCount) > chars.Length)
            throw new ArgumentOutOfRangeException("charCount");

        if ((byteIndex + charCount) > bytes.Length)
            throw new ArgumentOutOfRangeException("charCount");

        for (int i = 0; i < charCount; i++)
        {
            char c = chars[charIndex + i];
            if (ReverseMap != null)
            {
                byte b;
                if (ReverseMap.TryGetValue(c, out b))
                {
                    bytes[byteIndex + i] = b;
                    continue;
                }
            }
            bytes[byteIndex + i] = c > 255 ? FallbackByte : (byte)c;
        }
        return charCount;
    }

    public override int GetCharCount(byte[] bytes, int index, int count)
    {
        return count;
    }

    public override int GetChars(byte[] bytes, int byteIndex, int byteCount, char[] chars, int charIndex)
    {
        if (bytes == null)
            throw new ArgumentNullException("bytes");

        if (chars == null)
            throw new ArgumentNullException("chars");

        if (byteIndex < 0)
            throw new ArgumentOutOfRangeException("byteIndex");

        if (byteCount < 0)
            throw new ArgumentOutOfRangeException("byteCount");

        if (charIndex < 0)
            throw new ArgumentOutOfRangeException("charIndex");

        if ((byteIndex + byteCount) > bytes.Length)
            throw new ArgumentOutOfRangeException("byteCount");

        if ((charIndex + byteCount) > chars.Length)
            throw new ArgumentOutOfRangeException("byteCount");

        for (int i = 0; i < byteCount; i++)
        {
            if (Map != null)
            {
                char c;
                if (Map.TryGetValue(bytes[byteIndex + i], out c))
                {
                    chars[charIndex + i] = c;
                    continue;
                }
            }
            chars[charIndex + i] = (char)bytes[byteIndex + i];
        }
        return byteCount;
    }

    public override int GetMaxByteCount(int charCount)
    {
        return charCount;
    }

    public override int GetMaxCharCount(int byteCount)
    {
        return byteCount;
    }
} 
```

# java - jpa compare date when date are saved as long (miliseconds)

> ID：16001508
> 
> 赞同：0
> 
> 时间：2013-04-14T16:41:21.303
> 
> 标签：java, jakarta-ee, jpa

I am using an external database and I can't use database-specific functions in my query.

`startdate` is saved as a `bigint` and is a [UNIX timestamp](http://en.wikipedia.org/wiki/Unix_time) (milliseconds since the epoch).

So in my query I ignore milliseconds.

```
WHERE ma.conversation.room IS NULL AND (ma.conversation.startdate >= :startDate AND ma.conversation.startdate <= :endDate) 
```

and my method sets the parameters thus

```
.setParameter("startDate", startDate.getTime())
.setParameter("endDate", endDate.getTime()) 
```

I know that this is very bad idea but I cannot change the database.

I do not know why i have got strange result in my tests ? for example this is my parameter for NamedQuery:

**QUERY StartDate :134 904 315 5000, endDate: 134 904 902 2000**

and i print out my list result and i have got:

query result : startdate=2013-10-01 01:50:23, startdate time=138 058 502 3863 ......

Why that query brings me this results ??

1.  though 138 058 502 3863 >= 134 904 315 5000 (true)
2.  but 138 058 502 3863 =< 134 904 902 2000 (**not true !**)

**Question**

Is it a good idea to use the `>=` and `=<` operators?

# c# - How to include setup file in the same Setup Deployment?

> ID：16001510
> 
> 赞同：2
> 
> 时间：2013-04-14T16:41:25.863
> 
> 标签：c#, .net, visual-studio-2010, windows-7, setup-deployment

I'm deploying application written in C# with .NET Framework 4.0 CP using Visual Studio 2010\. I'd like to include uninstall option in the application folder. I've already tried creating shortcut to *msiexec.exe* system file but that didn't really worked for me, besides I've heard that on earlier OS (I'm on Win7) it might cause problems.

As I noticed one can uninstall program using the same setup that was used for installing it. So right now I'm somehow trying to include or create the setup file in the application folder. How exactly can I achieve that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T13:48:15.627

已经在这里回答了：

[http://sivanandareddyg.blogspot.com/2012/06/creating-uninstall-shortcut-for-your.html](http://sivanandareddyg.blogspot.com/2012/06/creating-uninstall-shortcut-for-your.html)

[如何在 c# 中创建包时在 Visual Studio 中包含 Uninstall MyProgram.exe](https://stackoverflow.com/questions/994900/how-to-include-uninstall-myprogram-exe-in-visual-studio-while-creating-package-i)

[http://www.c-sharpcorner.com/uploadfile/nipuntomar/making-a-uninstall-shortcut-with-visual-studio-setup-project/](http://www.c-sharpcorner.com/uploadfile/nipuntomar/making-a-uninstall-shortcut-with-visual-studio-setup-project/)

# ruby-on-rails - airbrake don't working by Rake task

> ID：16001511
> 
> 赞同：3
> 
> 时间：2013-04-14T16:41:42.123
> 
> 标签：ruby-on-rails, rake, airbrake

ENV

*   Rails 3.2.13
*   ruby 1.9.3p392
*   airbrake 3.1.11
*   rake, version 10.0.4

my config file and rake task file

```
#lib/tasks/raise.rake
namespace :raise do
  desc "raise sth"
    task :sth => :environment do
      num = 1 / 0 # should raise error
    end
  end
end

# config/initializers/airbrake.rb
Airbrake.configure do |config|
  config.rescue_rake_exceptions = true
  config.api_key = Setting.airbrake_api
end 
```

I hope run `RAILS_ENV=production rake raise:sth` send message to my airbrake, but nothing happen, just output `divided by 0`, not anything call stack info.

please help me, thank you ~

# objective-c - 单元格出列后单元格属性重置？

> ID：16001512
> 
> 赞同：1
> 
> 时间：2013-04-14T16:41:45.137
> 
> 标签：objective-c, cocoa-touch

我制作了一个带有 UISwitch 的自定义单元格。

自定义单元类具有以下属性：

```
@property (nonatomic, assign) BOOL boolValue; 
```

单元初始化的重要部分是：

```
self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    UISwitch *boolSwitch = [[UISwitch alloc] init];
    boolSwitch.on = self.boolValue;
        //self.boolValue = boolSwithch.on /** tried as well **/
    [boolSwitch addTarget:self action:@selector(switched:) forControlEvents:UIControlEventValueChanged];
    self.accessoryView = boolSwitch;
}
return self; 
```

和 switch: 方法：

```
- (void)switched:(id)boolSwitch {
    self.boolValue = ((UISwitch *)boolSwitch).on;
} 
```

现在这一切都很好，我可以`boolValue`从 tableview 代表中获取没有问题，除非我说在摇动开关后呈现模态视图。当我返回 tableView 时，`cell.boolValue`将再次设置为其默认值 (NO)。

尽管开关本身的视觉状态保持正确，但单元格属性却没有。

我认为出队后该属性不会持续存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:52:12.103

持久化一个值应该是支持模型对象的工作，而不是单元格本身。同一个单元格对象可以被表格视图多次重用，并且您总是希望`tableView:cellForRowAtIndexPath:`从支持对象中设置其正确的状态。这样，重用的单元格可能已经`boolValue`设置为`YES`或`NO`以前设置，但您将始终设置`cell.boolSwitch.on`为`modelObject.someBoolProperty`并最终处于正确的状态。

您的`switched:`方法是更新支持对象状态的地方：

```
- (void)switched:(UISwitch*)boolSwitch {
    self.modelObject.someBoolProperty = boolSwitch.on;
} 
```

# css - Float in two div

> ID：16001515
> 
> 赞同：0
> 
> 时间：2013-04-14T16:42:00.170
> 
> 标签：css, forms, html, css-float, margin

HTML

```
<div id="form">
    <img class="photo" src="---" /> 
    [...]
</div> 
```

CSS

```
.photo{
    float: left;
}
#form {        
    float: right;
    padding: 35px;
    line-height: 1.7em;
} 
```

Problem is that the image is attached to the div. I tryed to put margin but don't work. Some solution?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:03:12.617

不要引入外部图像，而是使用在容器（div#form）上绘制左边框

```
border-left: 1px solid black; 
```

# ios - Detect when finger, UIButton, and UIImageView are overlapping

> ID：16001516
> 
> 赞同：0
> 
> 时间：2013-04-14T16:42:10.767
> 
> 标签：ios, objective-c, cgrect

I am using this code to detect when `UIButton` and `UIImageView` are overlapping:

```
CGPoint fingerPoint = [(UIPanGestureRecognizer*)sender locationInView:imageA.superview];
    if (CGRectContainsPoint(imageA.frame, fingerPoint)) {
        NSLog(@"Do something");
    } 
```

The code works fine, but I have images B, C, D, E. How can I loop over a collection of them and move `CGRectContainsPoint()` into the body of that loop?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:44:59.200

```
NSArray* images = @[ imageA, imageB, imageC, imageD, imageE ];
for (UIImageView* image in images) {
    CGPoint fingerPoint = [(UIPanGestureRecognizer*)sender locationInView:[image superview]];
    if (CGRectContainsPoint(image.frame, fingerPoint)) {
        // Do something.
    }
} 
```

# android - 在 Android 中解析 SOAP Webservice 时出现此错误

> ID：16001517
> 
> 赞同：0
> 
> 时间：2013-04-14T16:42:16.867
> 
> 标签：android, soap, ksoap

```
04-14 22:09:40.158: E/REQUEST=(274): Authenticate{Username=lll; }
04-14 22:09:40.158: E/SOAP ENVOLP=(274): **envolpe=org.ksoap2.serialization.SoapSerializationEnvelope@43e5b748
04-14 22:09:43.799: W/System.err(274): org.xmlpull.v1.XmlPullParserException: unexpected type (position:TEXT 
04-14 22:09:43.799: W/System.err(274): Warning: DOMXPa...@27:1 in java.io.InputStreamReader@43e6ec48)** 
04-14 22:09:43.819: W/System.err(274):  at org.kxml2.io.KXmlParser.exception(KXmlParser.java:273)
04-14 22:09:43.819: W/System.err(274):  at org.kxml2.io.KXmlParser.nextTag(KXmlParser.java:1420)
04-14 22:09:43.819: W/System.err(274):  at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:126)
04-14 22:09:43.819: W/System.err(274):  at org.ksoap2.transport.Transport.parseResponse(Transport.java:90)
04-14 22:09:43.819: W/System.err(274):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:179)
04-14 22:09:43.819: W/System.err(274):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:90)
04-14 22:09:43.829: W/System.err(274):  at com.dev.coaster.SignIn.onClick(SignIn.java:71)
04-14 22:09:43.829: W/System.err(274):  at android.view.View.performClick(View.java:2408)
04-14 22:09:43.829: W/System.err(274):  at android.view.View$PerformClick.run(View.java:8816)
04-14 22:09:43.829: W/System.err(274):  at android.os.Handler.handleCallback(Handler.java:587)
04-14 22:09:43.829: W/System.err(274):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-14 22:09:43.829: W/System.err(274):  at android.os.Looper.loop(Looper.java:123)
04-14 22:09:43.829: W/System.err(274):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-14 22:09:43.829: W/System.err(274):  at java.lang.reflect.Method.invokeNative(Native Method)
04-14 22:09:43.839: W/System.err(274):  at java.lang.reflect.Method.invoke(Method.java:521)
04-14 22:09:43.839: W/System.err(274):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-14 22:09:43.839: W/System.err(274):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-14 22:09:43.839: W/System.err(274):  at dalvik.system.NativeStart.main(Native Method)
**04-14 22:09:43.839: E/SOAP Result=(274): result=null** 
```

我的 SOAP 解析代码是：-

```
 SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);    
 request.addProperty("Username","lll");

 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
 envelope.dotNet = true;
 envelope.setOutputSoapObject(request);

            Log.e("REQUEST=",""+request);
            Log.e("SOAP ENVOLP=","envolpe="+envelope);
            // Make the soap call.
            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
            try {

                //this is the actual part that will call the webservice
                androidHttpTransport.debug = true;
                androidHttpTransport.setXmlVersionTag("<?xml version=\"1.0\" encoding=\"utf-8\"?>");
                androidHttpTransport.call(SOAP_ACTION, envelope);        

                getResult = envelope.getResponse().toString();
            } catch (Exception e) {
                e.printStackTrace(); 
            }

            // Get the SoapResult from the envelope body.       
            SoapObject result = (SoapObject)envelope.bodyIn;

              Log.e("SOAP Result=","result="+result); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T08:19:12.627

认证方法需要复杂的对象！一个名为“Authenticate”的属性和两个名为“Username”和“Password”的嵌套属性。您必须创建一个复杂的对象，以便在根属性内嵌套属性。看看这里： [在 Ksoap2 中的标签内嵌套属性](https://stackoverflow.com/questions/9805946/nesting-properties-inside-a-tag-in-ksoap2)

# list - Prolog Clear List of positive elements without using cut

> ID：16001518
> 
> 赞同：0
> 
> 时间：2013-04-14T16:42:33.383
> 
> 标签：list, prolog

我想在不切割的情况下清除列表。我试过了：

```
filter([],[]).

filter([H|T],[H|S]) :- 
   H<0,
   filter(T,S).

filter([H|T],S) :- 
   H>=0,
   filter(T,S). 
```

但它不起作用。

这是我尝试时发生的事情：

```
?- filter([1,0,-6,7,-1],L).

L = [-6,-1]; %false
no

L=[0,-6,-1] %true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T21:37:17.123

这是一种方法：

```
filter([ ],[ ]).
filter([H|T],X) :-
    ( H > 0 -> X = Y ; X = [H|Y] ),
    filter(T,Y). 
```

因为 Prolog 中的 if-then-else 结构有时被描述为具有“隐藏剪切”，这意味着 Prolog 不会重试（回溯）此结构的“if”部分中的逻辑结果（它提交到第一个也是唯一一个结果），可以想象你的课程讲师可能会反对这个解决方案（即使没有使用实际的剪辑）。

但是您的解决方案部分错误。您将零元素与积极元素混为一谈，您的问题的措辞表明只有积极的条目需要从列表中“清除”。

# linux - Error in compiling the kernel

> ID：16001520
> 
> 赞同：0
> 
> 时间：2013-04-14T16:42:41.447
> 
> 标签：linux, linux-kernel, linux-device-driver

I am trying to compile linux 3.5.2 kernel. I followed this tutorial "[http://blog.techveda.org/index.php/adding-system-calls-linux-kernel-3-5-x/](http://blog.techveda.org/index.php/adding-system-calls-linux-kernel-3-5-x/)"

and everything was going perfect.but when I tried to do build the kernel I get this error here are the commands I used to build my kernel

```
sudo cp /boot/config-3.5.0-17-generic ./config
make oldconfig
sudo make -j8 
```

the error when I do the make -j8 is:

```
ERROR: "__modver_version_show" [drivers/staging/rts5139/rts5139.ko] undefined!
WARNING: modpost: Found 2 section mismatch(es).
To see full details build your kernel with:
'make CONFIG_DEBUG_SECTION_MISMATCH=y'
make[1]: *** [__modpost] Error 1
make: *** [modules] Error 2 
```

I really can't find what is the problem it looks like I have a problem with a driver but how could this happen and I am using my old configuration file that is already working. ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T06:01:56.653

我在编译内核3.2时也遇到了同样的问题，通过“su -”到root然后重新编译来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:16:52.017

如果您不需要此驱动程序，只需修改配置字段，如下所示：

```
 CONFIG_RTS5139=n 
```

# android - 从首选项 XML 文件启动位置设置意图

> ID：16001521
> 
> 赞同：19
> 
> 时间：2013-04-14T16:42:52.047
> 
> 标签：android, android-intent, android-preferences

我想从`Intent`. 我知道以编程方式它是这样的

```
Intent viewIntent = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
startActivity(viewIntent); 
```

但我需要从`Preference`. 我试试这样

```
<Preference
    android:title="@string/pref_title" >
    <intent android:action="android.settings.ACTION_LOCATION_SOURCE_SETTINGS" />
</Preference> 
```

但它不起作用，我总是得到一个`ActivityNotFoundException`. 如何从 XML Intent 启动该系统位置设置？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-14T16:48:44.950

您可以创建一个：`PreferenceActivity`代表您的偏好，然后您可以`onClick`像这样为您的偏好分配一个：

```
Preference goToLocationSettings = (Preference) findPreference("goToLocationSettings");
goToLocationSettings.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {

        public boolean onPreferenceClick(Preference preference) {
            Intent viewIntent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            startActivity(viewIntent);

            return true;
        }
    }); 
```

您需要在 xml 文件中为您的偏好分配一个键：

```
<Preference
    android:key="goToLocationSettings"
    android:title="@string/pref_title" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T23:16:29.913

试试这个代码：

```
<PreferenceScreen
    android:key="key_location"
    android:summary="location settings"
    android:title="Open location settings">

    <intent android:action="android.settings.ACTION_LOCATION_SOURCE_SETTINGS"/>

</PreferenceScreen> 
```

# java - Java Combo Box and MySql database

> ID：16001524
> 
> 赞同：0
> 
> 时间：2013-04-14T16:43:02.447
> 
> 标签：java

I am currently using netbeans GUI drag and drop form, i have a combobox, and i want the combobox value to change based on data received from a database. The other textboxes are receiving their data correcly, the main problem is with the combobox.

```
 String x = tI.getStatus();

   if(x == "Assigned"){
       cboStatus.setSelectedIndex(0);
   }
   else if(x == "In progress"){
       cboStatus.setSelectedIndex(1);
   }
   else if (x == "Pending"){
       cboStatus.setSelectedIndex(2);
   }
   else if(x == "Completed"){
       cboStatus.setSelectedIndex(3);
   } 
```

can anyone tell me how to change the index of the combo box based on data received from database. thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:44:20.617

用于`String.equals`比较字符串内容。`==`操作员比较引用`Object`。

```
if (x.equals("Assigned")) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T16:44:38.817

您不能将字符串与 进行比较`==`，请使用`equals()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T16:45:55.330

使用`String.equals()`. 运算符比较`==`两个字符串是否引用同一个字符串对象；如果它们在字符串中具有相同的字符，则不会。

# php - 重组我的对象的最佳方法

> ID：16001528
> 
> 赞同：1
> 
> 时间：2013-04-14T16:43:21.360
> 
> 标签：php, javascript, arrays, object, json

所以我有一个对象，它成功地从数据库中提取所有行并像这样存储它们：

```
Object {models: Array[2]}
    [Object, Object]
         0: Object
             address: "1234 Cooper"
             firstname: "Rick"
             lastname: "Bross"
             address: "1234 Cooper"
        __proto__: Object 
```

我该如何重组它，所以我只能说：

```
alert(potentialModels.rickbross.firstname)
//rickbross = *whatever model i want to find* 
```

它输出：

```
"Rick" 
```

这是我当前创建此对象的方式：

```
<?php
    if($_SESSION['username']) {

    $result = mysql_query("SELECT * FROM `potentials`") or die(mysql_error());
    $rows = array();

    //retrieve and print every record
    while($r = mysql_fetch_assoc($result)){
        // $rows[] = $r; has the same effect, without the superfluous data attribute
        $rows[] = $r;
    }

    // now all the rows have been fetched, it can be encoded
    $myJSON =  json_encode(array('models' => $rows));
?> 
```

以及我如何在控制台中获取它：

```
var potentialModels = <?php print($myJSON); ?>;
console.log(potentialModels); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:46:13.343

改变：

```
$rows[] = $r; 
```

至：

```
$rows[strtolower($r['firstname'].$r['lastname'])] = $r; 
```

你可以使用：

```
alert( potentialModels.models.rickbross.firstname); 
```

如果您想删除`models`，请在此处停止将其添加到您的 JSON 中：

```
json_encode(array('models' => $rows)); 
```

通过将其更改为：

```
json_encode( $rows); 
```

# android - 日志的相当奇怪的行为

> ID：16001529
> 
> 赞同：3
> 
> 时间：2013-04-14T16:43:24.137
> 
> 标签：android, android-logcat

我写了一个非常简单的Android Activity：

```
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Log.d("TAG", "onCreate() Log call 1");
        Log.d("SMS", "onCreate() Log call 2");
        Log.d("TEST", "onCreate() Log call 3");

        finish();
    }

    @Override
    protected void onDestroy() {
        Log.d("TAG", "onDestroy() Log call 1");
        Log.d("SMS", "onDestroy() Log call 2");
        Log.d("TEST", "onDestroy() Log call 3");

        super.onDestroy();
    }
} 
```

我希望这会生成 6 条日志消息（3 条来自`onCreate()`，3 条来自`onDestroy()`）。这是日志猫：

```
04-14 17:31:58.363: D/TAG(18084): onCreate() Log call 1
04-14 17:31:58.363: D/TEST(18084): onCreate() Log call 3
04-14 17:31:59.905: D/TAG(18084): onDestroy() Log call 1
04-14 17:31:59.905: D/TEST(18084): onDestroy() Log call 3 
```

可以看出，带有“SMS”标签的行没有通过。据我所知，这不是一个有记录的事情。问题是，为什么？

编辑：有关答案的更多详细信息。

Matthew Burke 下面给出了一个相当好的答案。简而言之，根据 的源代码`logd_write.c`，似乎：

*   `Log`带有以下标签的请求会自动重定向到`radio`日志：
    *   `HTC_RIL`
    *   开头的标签`RIL`
    *   `AT`
    *   `GSM`
    *   `STK`
    *   `CDMA`
    *   `PHONE`
    *   `SMS`
*   没有`Log`请求被重定向到`events`日志（或`system`日志，另请参见[http://elinux.org/Android_Logging_System](http://elinux.org/Android_Logging_System)）
*   所有其他`Log`请求都进入`main`日志，通常是被监控的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T20:27:36.680

`logcat`在开始搜索源代码之前，我应该阅读文档。根据`logcat`的文档：

> Android 日志系统为日志消息保留多个循环缓冲区，并且并非所有日志消息都发送到默认的循环缓冲区。

带有标签的消息`SMS`被发送到无线电缓冲区，而不是主缓冲区。因此，除非您特意这样做，否则您将看不到它们。如果你运行命令：

> `adb logcat -b radio`

您应该会看到丢失的日志消息。以上信息可以在[https://developer.android.com/tools/debugging/debugging-log.html](https://developer.android.com/tools/debugging/debugging-log.html)中找到。

* * *

现在，对于那些对代码探索感兴趣的人，以下是我的原始答案：

类中的方法都是JNI 方法的`Log`包装器。对其参数执行一些验证，然后调用.`println_native`
`println_native``__android_log_buf_write`

现在，后一种方法将标签参数（来自原始`Log.d`调用）与几个硬编码字符串（标签*SMS*是此列表之一）进行比较，如果找到匹配项，则最终将日志消息写入不同的文件！

顺便说一句，其他被重新路由的标签是 GSM、STK、PHONE、CDMA 和其他一些标签。

相关来源可以阅读

*   [http://www.java2s.com/Open-Source/Android/android-core/platform-frameworks-base/android/util/Log.java.htm](http://www.java2s.com/Open-Source/Android/android-core/platform-frameworks-base/android/util/Log.java.htm)

*   [https://pdroid.googlecode.com/svn/android-2.3.4_r1/trunk/frameworks/base/core/jni/android_util_Log.cpp](https://pdroid.googlecode.com/svn/android-2.3.4_r1/trunk/frameworks/base/core/jni/android_util_Log.cpp)

*   [https://in-the-box.googlecode.com/svn-history/r4/trunk/InTheBoxSim/liblog/logd_write.c](https://in-the-box.googlecode.com/svn-history/r4/trunk/InTheBoxSim/liblog/logd_write.c)

*   [http://www.takatan.net/lxr/source/drivers/staging/android/logger.h#L33](http://www.takatan.net/lxr/source/drivers/staging/android/logger.h#L33)

这些不是官方链接，可能会在某些时候消失。我将尝试追踪官方链接并在今晚晚些时候进行编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:16:50.757

**编辑忽略这一点，根据**[这个](https://stackoverflow.com/a/7948402/321697)，我显然很偏离基础。

~~所以我觉得这很有趣，在挖掘了源代码之后，我最终发现了[`Log.isLoggable()`](http://developer.android.com/reference/android/util/Log.html)：~~

 ~~> 检查指定标签的日志是否可在指定级别记录。任何标签的默认级别都设置为 INFO。这意味着将记录任何高于并包括 INFO 的级别。在调用记录方法之前，您应该检查是否应该记录您的标签。您可以通过设置系统属性来更改默认级别：'setprop log.tag。' 其中 level 是 VERBOSE、DEBUG、INFO、WARN、ERROR、ASSERT 或 SUPPRESS。SUPPRESS 将关闭您的标签的所有日志记录。您还可以创建一个包含以下内容的 local.prop 文件：'log.tag.=' 并将其放在 /data/local.prop 中。
> 
> 参数
> tag 要检查的标签。
> level 要检查的级别。
> 
> 返回
> 是否允许记录。~~ 

显然，某些日志级别不允许某些标签，似乎定义在 中`/data/local.prop`，但肯定有一些系统级别的属性文件我还没有找到。不过，您可以使用以下方法对其进行检查：

```
boolean isLoggableV = Log.isLoggable("SMS", Log.VERBOSE);
boolean isLoggableD = Log.isLoggable("SMS", Log.DEBUG);
boolean isLoggableI = Log.isLoggable("SMS", Log.INFO);
boolean isLoggableW = Log.isLoggable("SMS", Log.WARN);
boolean isLoggableE = Log.isLoggable("SMS", Log.ERROR);
boolean isLoggableA = Log.isLoggable("SMS", Log.ASSERT);

Log.v("LogTest", String.format("Verbose: %b Debug: %b Info: %b Warn: %b Error: %b Assert: %b", isLoggableV, isLoggableD, isLoggableI, isLoggableW, isLoggableE, isLoggableA)); 
```

这对我来说返回了以下内容：

```
Verbose: false Debug: false Info: true Warn: true Error: true Assert: true 
```

`SMS`因此，您可以在日志级别及更高级别记录标签`INFO`，但不能`VERBOSE`或`DEBUG`。

~~我不得不假设这是为了防止应用程序意外记录个人信息，但这似乎是一种相当粗糙的方式。~~

# geometry - 以给定半径为中心点计算地球上的正方形边界

> ID：16001532
> 
> 赞同：4
> 
> 时间：2013-04-14T16:43:40.763
> 
> 标签：geometry, sqlgeography, projective-geometry, geographic-distance

我正在尝试计算具有特定半径的正方形的边界，并且当正方形的中心已知时（经度，纬度）。但我遇到了麻烦。

我尝试从[这里](http://en.wikipedia.org/wiki/Great-circle_distance)使用 hasrsine 公式：

![半正弦公式](https://i.stack.imgur.com/j7kuT.png)

但是当半径很大时，我会遇到麻烦。

目前找到1）。我使用的以弧度表示的纬度增量：

*   radiusInMeters / EARTH_RADIUS_METERS

2）。我使用的弧度经度增量：

*   2.0 * | arcsin( |sin(radiusInMeters/(EARTH_RADIUS_METERS*2.0)) / |cos(latitudeStart)| | ) |

我从haversine公式得到的这些公式。

请有人指出我的确切通用计算公式，这对我的情况来说对大小距离都有好处。

另外，当半径超过经度-180˚/180˚或纬度-90˚/90˚时，应该如何处理？

**更新**

一些澄清。假设我停留在坐标为 (lon, lat) 的某个特定点，其中 lon 是 -113˚ 和 lat 50˚。

我想从数据库中查询某个感兴趣半径内的点。为此，我需要计算“正方形”的边界。（然后过滤掉不在有趣范围内的东西）。上面的公式在小距离上运行良好（假设'直到 100 公里（63 英里）。但是我从赤道点到两极的距离越多，我得到的舍入误差就越多。）

提前致谢

# php - 使用 PHP 的循环计时器

> ID：16001538
> 
> 赞同：3
> 
> 时间：2013-04-14T16:44:11.743
> 
> 标签：php

我有一个`WEBVTT`文件与视频连接，视频长度约为 120 分钟。视频的缩略图顶部提示每秒运行一次，这意味着`120*60=7200 secs.`

如何`WEBVTT format(hh:mm:ss.ttt)`使用 php 循环函数将 7200 秒转换为？例子：

```
00:00:00.000 --> 00:00:01.000
00:00:01.000 --> 00:00:02.000
00:00:02.000 --> 00:00:03.000
00:00:03.000 --> 00:00:04.000    
and so on... 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:09:02.173

使用[`date()`](http://uk.php.net/manual/en/function.date.php)：

```
date_default_timezone_set('UTC'); // To fix some timezone problems

$start = 0; // 0h
$end = 7200; // 2h
$output = '';

for($i=$start;$i<$end;$i++){
    $output .= date('H:i:s', $i).'.000 --> '.date('H:i:s', $i+1).'.000'.PHP_EOL;
}

echo $output; 
```

请注意，如果 $limit 达到 86400，它将再次从 0 开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:19:50.480

我不认为 PHP 是正确的工具。如果您想在屏幕上为您的用户显示它，听起来 Javascript 可能就是您所追求的。

对于 PHP，可以使用 date 函数

```
function secondsToWebvtt($seconds) {
  //set the time to midnight (the actual date part is inconsequential)
  $time = mktime(0,0,0,1,2,2012);
  //add the number of seconds
  $time+= $seconds;
  //return the time in hh:mm:ss.000 format
  return date("H:i:s.000",$time);
} 
```

使用 Javascript，我会使用这样的函数

```
 var seconds = 0;
 function toTime() {
    var time = new Date("1/1/2012 0:00:00");
    var newSeconds = time.getSeconds() + seconds;
    var strSeconds = newSeconds + "";
    if(strSeconds.length < 2) { strSeconds = "0" + strSeconds; }
    var hours = time.getHours() + "";
    if(hours.length < 2) { hours = "0" + hours; }
    var minutes = time.getMinutes() + "";
    if(minutes.length < 2) { minutes = "0" + minutes; }
    var dispTime = hours + ":" + minutes + ":" + strSeconds + ".000";
    return dispTime;
  }

  function getTime() {
     var time = toTime(seconds);
     //do something with time here, like displaying on the page somewhere.
     seconds++;
  } 
```

然后使用 setInterval 调用函数

```
 setInterval("getTime",1000); 
```

# asp.net - ASP.NET MVC 对不存在的用户进行身份验证和授权

> ID：16001541
> 
> 赞同：5
> 
> 时间：2013-04-14T16:44:37.740
> 
> 标签：asp.net, asp.net-mvc, asp.net-membership, simplemembership

我正在使用`DropCreateDatabaseAlways`初始化程序，因此每次启动应用程序时我的数据库都会被破坏（至少我希望如此）。有趣的是我仍然认为自己已登录。我通过了`Authorize`属性并且可以做危险的事情。这可能是因为之前测试的剩余 cookie。

我的应用程序的注册/登录部分是未触及的 MVC 4 Internet 应用程序模板。ASP.NET 不应该根据保存在数据库中的用户检查 cookie 值吗？`WebSecurity.IsAuthenticated`返回 true 并`WebSecurity.CurrentUserName`返回名称。唯一按预期工作的是`WebSecurity.CurrentUserId`返回-1。我是新手，所以我只能猜测这是因为`UserId`没有存储在 cookie 中，必须从数据库中检索。

我对吗？如果是这样，这是否意味着我应该始终使用`WebSecurity.CurrentUserId`来确定用户是否已登录？`WebSecurity.IsAuthenticated`在那种情况下`User.Identity.IsAuthenticated`似乎毫无用处。我可以删除用户的帐户，他或她不受影响。如果我错了，应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:50:19.943

只要身份验证会话保持打开状态（即浏览器现在关闭），会话 cookie 就保持活动状态，并且 MVC 假定用户仍然有效。

`FormsAuthentication.LogOff()`如果用户已通过身份验证 ( `User.Identity.IsAuthenticated == true`) 并且 UserTable ( ) 中没有有效用户，则使用删除 cookie `WebSecurity.CurrentUserId == -1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-07T09:39:17.893

我有同样的问题，但通过在 Authorize 属性中指定所需的角色来解决它。一旦您这样做，它就会开始访问数据库并失败并出现“用户不存在”错误，这正是您想要的。

```
[Authorize(Roles = "Customer")]
public class DashboardController : Controller 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T17:18:30.733

将有一个小窗口，如果用户被删除并且他们仍然登录，他们仍然可以访问该站点。由于大多数操作都需要验证用户 ID，因此您可以简单地抛出异常并注销用户。

通常数据库不会在每次构建时都被吹走，所以我猜这不是 SimpleMembership 编码的用例。你当然可以检查这个。我将假设您在重建站点并部署新数据库时没有关闭浏览器。在现实世界的场景中，这些事情不会发生。数据库永远不会被吹走，用户 ID 永远不会丢失。

通常，一旦您登录了用户，此后的任何时间都不会对用户进行身份验证（除非他们已注销，或者会话已过期）。这就是登录的重点。身份验证 cookie 表明身份验证发生并成功。未来的假设是用户可以访问您的网站并且未经过重新身份验证。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T17:24:13.620

如果你想真正地检查一个用户是否没有被删除，你只**需要**查阅数据库。

请注意，用户和管理员同时工作。这意味着用户可以在他通过身份验证后的一秒钟内被删除。一个 cookie 甚至可以是一两秒（！），并且用户可能刚刚被删除。

在最悲观的情况下，用户输入有效的用户名和密码并成功登录并在一个请求后得到“对不起，您的帐户已被删除”（因为该帐户实际上刚刚被删除）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T17:18:45.130

在正常情况下，添加`Session.Abandon();`到您的`LogOff`操作`AccountController`中将完成清除会话的工作：

```
public ActionResult LogOff()
{
    FormsAuthentication.SignOut();
    Session.Abandon();

    return RedirectToAction("Index", "Home");
} 
```

所以我认为你可以尝试添加`Session.Abandon();`初始化代码，`DropCreateDatabaseAlways`每次都用来清除会话。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-14T17:32:21.083

*   票证发行时间通常在身份验证 cookie 中加密，然后如果自登录后超过 X 时间，您可以使用它来要求对敏感区域（收件箱/计费等）重新进行身份验证。

*   如果您坚持在应用程序更改（即数据库/配置）时使所有当前身份验证票证无效，您可以在您的`web.config`：

    ```
    <machineKey validationKey="..." decryptionKey="" /> 
    ```

# python - 使用Python中的正则表达式从字符串中的源代码中提取字符串常量

> ID：16001544
> 
> 赞同：3
> 
> 时间：2013-04-14T16:44:47.867
> 
> 标签：python, regex, lexical-analysis

如何从字符串中的源代码获取字符串常量？

例如，这是我要处理的源代码：

```
var v = "this is string constant + some numbers and \" is also included " 
```

我无法将所有内容都放在引号内。通过使用这个正则表达式：`"(.*?)"`.

除了字符串字符之外，我无法获取`var`,或其他任何内容。`v``=`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:00:56.993

您需要匹配一个开始引号，然后是任何转义字符或普通字符（引号和反斜杠除外），然后是结束引号：

```
"(?:\\.|[^"\\])*" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:26:03.280

使用lookbehind，以确保 " 前面没有 \

```
import re

data = 'var v = "this is string constant + some numbers and \" is also included "\r\nvar v = "and another \"line\" "'
matches = re.findall( r'= "(.*(?<!\\))"', data, re.I | re.M)
print(matches) 
```

输出：

```
['this is string constant + some numbers and " is also included ', 'and another "line" '] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T17:11:26.190

为了得到引号内的所有内容，您可以尝试以下操作 `"\".+?\""`：`re.findall()`

# javascript - mongo find 选择器导致返回不匹配的结果

> ID：16001545
> 
> 赞同：0
> 
> 时间：2013-04-14T16:44:57.697
> 
> 标签：javascript, mongodb, meteor

`userLink_titles = Entries.find({ _id:"bxSbMgszYxbCqDonF"})`

返回：

```
 docs: Object
    CBqHrJvTE8xz7u2Rz: Object
      _id: "CBqHrJvTE8xz7u2Rz"
      author: "AHSwfYgeGmur9oHzu"
    Q8m7PMbQr62E3A73f: Object
      _id: "Q8m7PMbQr62E3A73f"
      author: "AHSwfYgeGmur9oHzu"
    bxSbMgszYxbCqDonF: Object
      _id: "bxSbMgszYxbCqDonF"
      author: "AHSwfYgeGmur9oHzu" 
```

如您所见，它返回了正确的文档，但也返回了不正确的文档。

findOne：`userLink_titles = Entries.findOne({ _id:"bxSbMgszYxbCqDonF"})`按预期工作，只返回正确的文档。

我会使用 findOne，但最终目的是使 _id 选择器成为一个数组，以便 find 将返回与数组中的 _id 选择器匹配的所有文档的文档。

奖励积分：

假设我想检索一组文章的标题，其中对这些文章的引用（其 Articles 集合中的 Articles _id）已保存在用户集合中。

如此有效地，我将从用户集合中检索文章引用，并使用这些引用从文章集合中检索文章的标题。

代码/伪代码会是什么样子？类似于以下内容（我假设以下内容是查询/检索记录的一些最佳实践的完全混蛋）

```
user_profile = Users.findOne({username : "Frank"});
user_saved_articles_ids = user_profile.findOne({saved_articles_ids});
userLinks = Articles.find({ _id:user_saved_articles_ids});
userLinksTitles = Articles.find({titles}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T04:01:57.147

对于那些对奖金问题感兴趣的人，您需要 MongoDB 的[$in 运算符](http://docs.mongodb.org/manual/reference/operator/in/)。

如果这将在服务器上的发布方法中使用，那么您可能需要查看[publish-with-relations](https://github.com/erundook/meteor-publish-with-relations)。

类似下面的函数将是检索信息的有效方法。它对数据库进行两次调用。使用该`fields`参数可以防止在 db 和 webserver 之间发送不必要的数据。

```
/**
 * Titles of a User's saved articles
 * 
 * @method getSavedTitles
 * @param {String} username
 * @return {Array} a list of article titles
 */
function getSavedTitles (username) {
  var user,
      ids,
      linkedArticles,
      titles;

  user = Users.findOne({username: username}, 
                       {fields:{ _id:0, profile:1 }});

  if (!user || !user.profile) {
    throw new Meteor.Error(500, 'Missing user profile');
  }

  ids = user.profile.savedArticleIds;

  if (!ids || !_.isArray(ids)) {
    throw new Meteor.Error(500, 'Missing saved article ids');
  }

  linkedArticles = Articles.find({_id: {$in: ids}},
                        {fields:{ _id:0, title:1 }});

  titles = _.pluck(linkedArticles.fetch(), "title");

  return titles;

}  // end getSavedTitles 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T03:18:42.293

如果要在控制台中检查查询结果，请使用`Entries.find(...).fetch()`

`Entries.find()`返回一个[cursor](http://docs.meteor.com/#meteor_collection_cursor)，这是一种用于有效呈现列表的构造，因此只有更改的条目需要重新呈现。从您使用的助手返回光标`{{#each}}`将导致应用程序响应速度更快。

# sql-server - 如何连接到本地 ODBC 数据源

> ID：16001546
> 
> 赞同：0
> 
> 时间：2013-04-14T16:44:57.887
> 
> 标签：sql-server, odbc, connection-string, dsn

我使用驱动程序 SQL 服务器 Native client 10.0 在本地计算机上创建了一个 ODBC 数据库，它连接到远程服务器，请参阅

![ODBC 数据源](https://i.stack.imgur.com/UBL4d.png).

我正在研究一个关于将 ODBC 自定义到内部数据库的项目，并想测试如何使用 ODBC 连接到数据源。问题是如何使用 sql server studio manager 连接到本地 ODBC？我试过了

![Sql Server studio manager 连接](https://i.stack.imgur.com/c8KCJ.png)

但它返回一个错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T22:58:12.260

通过 SSMS 连接到本地服务器，然后创建到 ODBC 连接的链接服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-08T16:58:44.300

呼应@Brian Boyd ...

可以创建与本地运行的 SQL 服务器的 ODBC 连接。

如果您启动 SSMS 并将其指向本地数据库引擎，则服务器名称应为 Computer_Name\SQLEXPRESS，身份验证设置为 Windows Auth（即登录用户：您）。Computer_Name 位于系统窗口（Windows 键 + Break）中，*不是*localhost、127.0.0.1 等。

因此，通过运行 %windir%\syswow64\odbcad32.exe 来设置 ODBC 连接

*   在系统 DSN 选项卡中，单击 [添加...]
*   在驱动列表中选择SQL Server，点击【完成】
*   现在添加名称和描述，但最重要的是将服务器设置为 Computer_Name\SQLEXPRESS（无论 SSMS 中显示什么）
*   单击 [下一步] 并将身份验证设置为 Windows NT
*   单击 [下一步] 并勾选默认数据库复选框以显示本地数据库列表（如果您的数据库在此处列出，则 ODBC 设置已经起作用）
*   点击[Next]，[Finish]然后[Test Data Source...]然后一切都应该很好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T16:52:40.043

要连接到远程服务器，您不需要 DSN。您可以在 SQL Server Management Studio 的服务器名称字段中输入服务器名称，然后选择 Windows 身份验证或数据库身份验证。

无法将 SSMS 连接到 ODBC 数据源。正如@Brian Boyd 所述，唯一的方法是在本地 SQL 服务器中创建链接服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-03T18:42:58.217

说明是：

[https://community.sagecrm.com/partner_community/b/hints_tips_and_tricks/archive/2010/05/10/connecting-to-a-sage-mas-erp-90-database-as-a-linked-server-within- ms-sql-server-2008.aspx](https://community.sagecrm.com/partner_community/b/hints_tips_and_tricks/archive/2010/05/10/connecting-to-a-sage-mas-erp-90-database-as-a-linked-server-within-ms-sql-server-2008.aspx)

... 和来自 MS HERE 的 sp_AddLinkedServer 文档 ... 以及搜索 =“SOTAMAS90 的 sp_addlinkedserver”，甚至是 2005 年的示例 [https://blog.coryfoy.com/2005/06/lets-go-crazy-accessing-timberline-pervasive -data-from-a-sql-linked-server/](https://blog.coryfoy.com/2005/06/lets-go-crazy-accessing-timberline-pervasive-data-from-a-sql-linked-server/) 让我们看看轮到说什么……。并认为我会/会得到与通过 UI 添加链接服务器相同的错误，我得到 TSQL

基于以上，我尝试了……</p>

```
EXEC sp_addlinkedserver

@server = 'TimberlineTest',

@provider = 'SOTAMAS90',    -- Original command  @provider = MSDASQL',

@srvproduct = '',           --- MAS 90 4.0 ODBC Driver  Original is      @srvproduct='Timberline Data',

@datasrc = 'DataTest' 
```

# css - 将 div 包裹在圆形背景元素周围

> ID：16001550
> 
> 赞同：1
> 
> 时间：2013-04-14T16:45:44.233
> 
> 标签：css, html, word-wrap

我在背景图像中有一个文本区域，该区域被圆形对象部分遮挡。

见：http: [//i.imgur.com/ZlV2gre.png](http://i.imgur.com/ZlV2gre.png)

我需要一些帮助来围绕该圆形元素包装文本，但也要将文本保持在蓝色区域内。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T18:45:38.580

## 为每个重叠的文本行浮动一个 div

最简单的选择是使用@Vector 的建议并将几个不同宽度的 div 向左浮动。每个浮动 div 应该与文本的 div 相同`height`，`line-height`并且应该足够宽以匹配圆圈的重叠部分。

然后文本将自动环绕浮动 div。使用反复试验来确定每个浮动 div 的最佳宽度。

[JSFiddle 演示](http://jsfiddle.net/Matt_Coughlin/3TFEx/3/)。

这是演示的[修改版本，更清楚地说明了 div 是如何浮动的。](http://jsfiddle.net/Matt_Coughlin/2k36A/1/)这应该在所有浏览器中都能正常工作。

**HTML**

```
<div class="content">
    <!-- As many floated elements as needed -->
    <div class="float1"></div>
    <div class="float2"></div>
    ...
    <p>Text goes here</p>
</div> 
```

**CSS**

```
.content div {
    float: left;
    clear: left;
    height: 24px;
}
.content div.float1 { width: ...; }
.content div.float2 { width: ...; }
...
.content p {
    margin: 0;
    font-family: Arial, sans-serif;
    font-size: 16px;
    line-height: 24px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:59:38.907

您想要的那种包装可以通过 jQuery 来完成。

这个插件：[http](http://www.jwf.us/projects/jQSlickWrap/) : //www.jwf.us/projects/jQSlickWrap/ 对我有用。

祝你好运！

# sorting - 什么是按重要性对对象进行排序的好算法？

> ID：16001555
> 
> 赞同：0
> 
> 时间：2013-04-14T16:46:03.510
> 
> 标签：sorting

我正在尝试制作的算法是一种您可以根据用户看到项目的次数和速度对项目进行排序的算法。它在 Stack Overflow 的许多网站（按相关性排序）中得到了广泛应用。我正在尝试制作的算法只是用户看到链接的速度以及他们看到链接的次数的组合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:54:28.400

如果您有一个数组中的所有数据（链接及其访问计数器），您可以使用快速排序比较每个链接计数器对它们进行排序。快速排序是 O(n log n) 顺序的最佳排序算法。

这里有更多关于快速排序的信息 [http://en.wikipedia.org/wiki/Quicksort](http://en.wikipedia.org/wiki/Quicksort)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:55:25.750

影响相关性的因素有很多，但这里有一些有用的链接：

*   [关于一般相关性的维基百科](http://en.wikipedia.org/wiki/Relevance_%28information_retrieval%29)
*   [搜索引擎中的相关性](http://www.xav.com/scripts/search/help/1074.html)

# javascript - 在 node.js 中运行页面特定的 Javascript

> ID：16001557
> 
> 赞同：0
> 
> 时间：2013-04-14T16:46:13.747
> 
> 标签：javascript, node.js, templates

我正在开发一个允许用户监控能源消耗的项目。主仪表板页面是一个非常简洁的 Web 应用程序，并且大量使用了 javascript 和 ajax。服务器当前运行apache，使用php；但是，我计划安装 node.js 并更新服务器端脚本以支持 websockets（我也喜欢在服务器端和客户端使用 javascript 的想法）。

我已经关注了几个在线介绍，但我很难找到具体问题的答案，在我开始之前我需要弄清楚这些问题，其中一个概述如下。

有没有一种简单的方法可以像使用 PHP 一样在网站页面上运行特定于页面的 javascript？我遇到过模板（例如使用 mustache），但我不明白当即将提供特定文件时是否可以在服务器上运行特定的 javascript 模块。

*非常感谢您花时间阅读我的问题。如果您能回答其中任何一个问题，甚至提供任何一般性建议，将不胜感激。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:54:32.293

如果您使用[Express](http://expressjs.com/)之类的框架，您可以“拦截”（或称为“路由”）对特定 URL 的请求并运行服务器端 JS 来处理该 URL（包括在处理结束时，呈现并返回模板） .

与 PHP 的不同之处之一是 PHP 经常将模板和代码混合到一个文件中，而在 Node 中，这两者通常是分开的（因此代码和布局之间有明确的分离）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T16:55:39.393

您应该研究可以帮助您解决此类问题的 Node.js 网络框架。我最喜欢的是[快递](http://expressjs.com/)。

Express 将允许您将“路线”映射到处理程序，并且该处理程序可以在您想要的任何文件中。例如，

`app.get('/energy/page-x', require('./routes/page-x-handler'));`

`./routes/page-x-handler.js`类似的东西在哪里：

```
module.exports = function (req, res, next) {
    res.render('template-name');
} 
```

# php - PHP图像上传不起作用

> ID：16001567
> 
> 赞同：0
> 
> 时间：2013-04-14T16:46:54.167
> 
> 标签：php, mysql, image

我正在尝试创建一个表单，用户可以在其中上传带有标题和描述的图像。除了没有移动到我的服务器的图像外，一切正常。谁能告诉我我在这里做错了什么？我尝试上传到的文件夹的权限设置为 777。

PHP代码：

```
<?php 
}

session_start();
if(!session_is_registered(myusername))
{
    header("location:login.php");
}

// connect to the database
$conn=mysql_connect(*censored*) or die("Kan geen verbinding maken met de DB server"); 
mysql_select_db("frankkluytmans_",$conn) or die("Kan database niet selecteren"); 

// check if the form has been submitted. If it has, start to process the form and save    it to the database
if (isset($_POST['submit']))
{ 
    // get form data, making sure it is valid
    $pagid = mysql_real_escape_string(htmlspecialchars($_POST['pagid']));
    $titlename = mysql_real_escape_string(htmlspecialchars($_POST['title']));
    $contentname = mysql_real_escape_string(htmlspecialchars($_POST['contentedit']));
    $image = mysql_real_escape_string(htmlspecialchars("/gfx/".$_FILES["image"]["name"])); 

    // check to make sure both fields are entered
    if ($titlename == '' || $pagid == '')
    {
        // generate error message
        $error = 'ERROR: Please fill in all required fields!';

       // if either field is blank, display the form again
       renderForm($pagid, $titlename, $contentname, $error);
    }
    else
    {
        if (move_uploaded_file($_FILES["image"]["tmp_name"],     "/gfx/".$_FILES["image"]    ["name"])) 
        {
            // save the data to the database
            mysql_query("INSERT frankkluytmans SET pagid='$pagid', title='$titlename',       content='$contentname', image='$image'") or die(mysql_error()); 

             // once saved, redirect back to the view page
             header("Location: index.php"); 
         }
    }
}
else
// if the form hasn't been submitted, display the form
{
    renderForm('','','');
}
?> 
```

表格：

```
<form action="" method="post" enctype="multipart/form-data">
         <h2>
             <span>NEW</span>
             <input type="text" name="pagid" value="" />
         </h2>
         <div class="pages-content">
         <strong>Title: *</strong> <input type="text" name="title" /><br/>
         <strong>Content: *</strong> <textarea name="contentedit"</textarea><br/>
         <input type="file" name="image" id="image" />
         <input type="submit" name="submit" value="Submit">
         </div>
         <script>
            window.onload = function() {
                CKEDITOR.replace( 'contentedit' );
                console.log("editor werkt");
            };
         </script>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:48:58.107

您的 PHP 代码已损坏：

```
<?php 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:50:15.160

您的文件中有一个错误，它以`}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T16:51:31.153

1.  `}`你在第一行 有不需要

2.  你确定位置正确吗？

尝试`$_SERVER['DOCUMENT_ROOT']`在 dir 前面添加 .. 例如：

```
$image_dir = $_SERVER['DOCUMENT_ROOT']."/gfx/".$_FILES["image"]["name"]; 
```

# java - 如何将所有内容匹配到最后一次出现的特殊字符集？

> ID：16001569
> 
> 赞同：0
> 
> 时间：2013-04-14T16:47:15.853
> 
> 标签：java, regex

我正在尝试修改我的正则表达式拆分器。

我的表达很简单：匹配一个或多个出现的字符集：`\s*[|()!=\s]+`

运行此示例将给出：

```
(output !==(not output)) | (output)
//output, not output, output 
```

现在我想要以下内容：“如果出现一个`=`字符，则后面匹配所有内容，直到最后一次出现相同的字符集。”

再次查看上面的示例，它可以看到第一个`=`，然后应该完全匹配以下内容：`!==(not output)) | (`

怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:09:28.763

我不确定这是否是您以后使用的意思，但对于您当前的输入，它可以工作

```
String data = "(output !==(not output)) | (output)";
Matcher m = Pattern.compile("(\\w+)\\s*(?=!?==)(.*)\\1").matcher(data);
//                           ^-group1          ^   ^-repeated group1
//                                             |group 2
while (m.find()) {
    System.out.println(m.group(2));//match from group 2
} 
```

输出：

```
!==(not output)) | ( 
```

# iphone - Adding a native ios app to an existing Ruby on rails app

> ID：16001570
> 
> 赞同：1
> 
> 时间：2013-04-14T16:47:17.290
> 
> 标签：iphone, ruby-on-rails

I have a working Ruby on rails app. I would like to add a native iOS app that can get data from eh server and display it. Anybody knows of a good end to end toturial to create a native ios app that works against a ruby on rails app?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:50:53.243

Unless I'm missing something in your question, what you can do is set up all your actions to render json. So what ends up happening is that your iOS app makes a call to the Rails server and the Rails server returns json to the iOS app, where you can then do whatever you want with the data.

# Example

```
def some_action
  @users = User.all

  render :json => @users.to_json
end 
```

# Performance of Rendering JSON

[More](http://brainspec.com/blog/2012/09/28/lightning-json-in-rails/) on rendering data fast into json.

# Authenticating an User

`For Non-Devise Apps`

One method I've done, and I'm sure there are better, is to send your credentials via a post request to the Rails server. If the user has the correct username and password, then I'll return the user a token that is unique for each user. Then every time the user is doing something with the database and it's important, you send the token from the iOS app as part of the post request to Rails and it validates it for persistent user authentication.

`For Devise Apps`

[TokenAuthenticatable](http://zyphdesignco.com/blog/simple-auth-token-example-with-devise) is one solution for Devise. You send the token to the iOS app, store it, then when the user is doing something important to the database, you send the token back from the iOS app to Rails. Rails validates the token, then do whatever you want.

# cmsmadesimple - 将 html5 音频播放器添加到 cms 变得简单

> ID：16001571
> 
> 赞同：0
> 
> 时间：2013-04-14T16:47:18.077
> 
> 标签：cmsmadesimple

嗨，我购买了一段 html 5 音频播放器代码并将其上传到服务器，在 html 页面中运行良好，但尝试使用模板放入 cms 站点是另一回事。

我需要复制代码以放入头部和身体标签。

将 html 放入模板中是正确的吗？所以复制模板并将其放入其中。

头部标签中的 JavaScript 是否正常，或者是否需要进入页面元标签？

一直找不到可以将 mp3 文件作为播放列表播放并且跨浏览器兼容并且可以在 android 和 apple os 上播放的模块。

这个播放器做了所有这些，并且有闪退，但是让它在 cms 中工作并不快乐。

任何帮助将不胜感激

亚姆斯基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:14:09.193

是的，您将 HTML 添加到模板中。Javascript 在模板或元标记中是可以的，但您需要将 javascript 代码包含在其中`{literal}literal tags like this{/literal}`- 这会阻止您的 javascript 被解释为 Smarty。

CMSMS 网站上的 forge 中有一些播放器模块。

# javascript - jQuery动画问题，悬停成为默认状态

> ID：16001573
> 
> 赞同：0
> 
> 时间：2013-04-14T16:47:26.910
> 
> 标签：javascript, jquery

我有一个小型系统，其中在页面中填充了图像，将鼠标悬停在图像上会在图像上设置背景颜色并在图像上滚动一些文本。然后，当您停止悬停时，文本会滚动关闭并且背景会使用以下代码淡出：

```
$j('.projects .block .mob_hide').hover(function(){
                                console.log('sliding detals');
                                $j(this).find('.background').stop().animate({
                                    'opacity': 'toggle'
                                }, 400);
                                $j(this).find('.text').stop().animate({
                                    'height': 'toggle',
                                    'opacity': 'toggle'
                                }, 400);
                            }); 
```

现在这一切都工作正常，但是有时如果用户在页面可能仍在加载时滚动图像（我不是 100% 确定），鼠标悬停状态会显示，而鼠标没有悬停在图像上（现在悬停在隐藏和悬停显示）。

有没有办法解决这个问题？m 代码当前位于 window.load 函数中，我认为这将阻止此类事情成为可能。

# sql - 我可以将 MS Access 2010 数据库的搜索结果显示到组合框 (Vb 2008) 中吗

> ID：16001574
> 
> 赞同：0
> 
> 时间：2013-04-14T16:47:36.213
> 
> 标签：sql, vb.net, ms-access-2010

我需要让我的程序能够搜索数据库中的每一列，直到找到匹配项，然后将这些匹配项输出到组合框中。我目前已经编写了一种搜索一列（特别是动物名称）的方法，但我需要添加搜索其他列并在组合框中显示多个结果的选项，然后用户可以选择使用程序打开到表格 2，我用来显示数据。

这是我当前正在使用的代码，第一部分用于按动物名称搜索，第二部分用于在可选框中搜索，然后需要将结果显示到组合框中。我还有一个问题，除非名称框中有数据，否则我无法在可选框中搜索，这违背了可选框的目的。任何帮助将不胜感激。

```
 Private Sub btnsear_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnsear.Click
    If (txtname.Text = "'") Then
        MsgBox("No information has been entered")
    Else
        Try
            Dim newsql As String
            newsql = "select * from Animals where AnimalName like " & "'%" & txtname.Text & "%'"
            'MsgBox("select * from Animals where AnimalName like " & "'" & txtname.Text & "'")
            'MsgBox(newsql)
            Dim con As New OleDb.OleDbConnection
            Dim da As New OleDb.OleDbDataAdapter

            'Dim ds As NewDataTable
            Dim dt As New DataTable("Animals")
            'uses the 2010 compatible connection string
            con.ConnectionString = "PROVIDER=Microsoft.ACE.OLEDB.12.0;Data Source = C:\Users\Kamran\Desktop\College\Computing Project\Animals.accdb" 'h:\Animals.accdb"
            con.Open()

            da = New OleDb.OleDbDataAdapter(newsql, con)
            da.Fill(dt)

            Form2.Show()

            'show name in unbound text box
            Form2.nametxt.Text = dt.Rows(0).Item(1)
            Form2.latintxt.Text = dt.Rows(0).Item(2)
            Form2.locationtxt.Text = dt.Rows(0).Item(3)
            Form2.heighttxt.Text = dt.Rows(0).Item(4)
            Form2.weighttxt.Text = dt.Rows(0).Item(5)
            Form2.diettxt.Text = dt.Rows(0).Item(6)
            Form2.statustxt.Text = dt.Rows(0).Item(7)
            Form2.lifetxt.Text = dt.Rows(0).Item(8)
            Form2.breedtxt.Text = dt.Rows(0).Item(9)
            Form2.lengthtxt.Text = dt.Rows(0).Item(10)
            Form2.txtimage.Text = dt.Rows(0).Item(11)

        Catch
            'MsgBox("Animal Not Found")
            'con.close()
        End Try
    End If

    If txtname.Text = "" Then
        MsgBox("Invalid Search")
    Else
        Try
            Dim newsql As String = "SELECT * FROM Animals WHERE AnimalName LIKE " & "'%" & txtname.Text & "%'"

            If txtopt.Text <> "" Then

                newsql &= " AND (AnimalName LIKE " & "'%" & txtopt.Text & "%'" & _
                          " OR LatinName LIKE " & "'%" & txtopt.Text & "%'" & _
                          " OR Location LIKE " & "'%" & txtopt.Text & "%'" & _
                          " OR AverageHeight LIKE " & "'%" & txtopt.Text & "%'" & _
                          " OR AverageWeight LIKE " & "'%" & txtopt.Text & "%'" & _
                          " OR DietaryNeeds LIKE " & "'%" & txtopt.Text & "%'" & _
                          " OR ConservationStatus LIKE " & "'%" & txtopt.Text & "%'" & _
                          " OR AverageLifeSpan LIKE " & "'%" & txtopt.Text & "%'" & _
                          " OR BreedingSeason LIKE " & "'%" & txtopt.Text & "%'" & _
                          " OR AverageLength LIKE " & "'%" & txtopt.Text & "%')"
            End If

            Dim con As New OleDb.OleDbConnection
            Dim da As New OleDb.OleDbDataAdapter

            Dim dt As New DataTable("Animals")

            con.ConnectionString = "PROVIDER=Microsoft.ACE.OLEDB.12.0;Data Source = C:\Users\Kamran\Desktop\College\Computing Project\Animals.accdb" 'h:\Animals.accdb"
            con.Open()

            da = New OleDb.OleDbDataAdapter(newsql, con)
            da.Fill(dt)
    Catch
            'MsgBox("Item Not Found")
            'con.close()
        End Try
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T23:33:48.147

如果第二个文本框还包含来自用户的查询数据，请将其附加到您的 sql 语句中，就像您对第一个字段所做的那样：AND Field2 like %User Value%

# shell - 将 ctrl-c 发送到特定的屏幕会话

> ID：16001578
> 
> 赞同：13
> 
> 时间：2013-04-14T16:48:02.860
> 
> 标签：shell, gnu-screen, sigint

我正在设计一个脚本来在命名的屏幕会话中启动一个进程。

```
as_user "screen -p 0 -S **$command** -X eval 'stuff \"wine LFS.exe /cfg=**$command**.cfg\"\015'" 
```

因此`bash myscript.sh start test`将创建一个名为 test 的屏幕并`test.cfg`使用该软件运行。

现在我希望我的脚本访问特定的屏幕会话并执行`CTRL`+`C`来停止正在运行的进程，以便我可以终止屏幕会话。

像这样的东西：

```
as_user "screen -p 0 -S **$command** **... kill the process with ctrl-c...**"
as_user "screen -p 0 -S **$command** -X eval 'stuff \"exit\"\015'" 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-15T01:50:37.237

我不太了解您，但要在屏幕会话中发送`ctrl-c`到*窗口：*

```
screen -S session_name -X at window_number stuff $'\003'
# or
screen -S session_name -X -p window_number stuff $'\003' 
```

如果您想向*所有*窗口发送内容，请使用`#`（需要引用）作为*window_number*。

**更新：**

屏幕的`stuff`命令也支持`^X`（或`^x`）表示`CTRL-X`，所以下面的命令也可以用来发送`CTRL-C`。

```
# Here '^C' is two chars, '^' and 'C'
screen -S session_name -X at window_number stuff '^C' 
```

# c++ - 仅接受来自特定子网的连接

> ID：16001579
> 
> 赞同：1
> 
> 时间：2013-04-14T16:48:08.230
> 
> 标签：c++, winsock

使用 winsock 我希望我的服务器应用程序只接受来自某个（比如说`192.168.0.0/24`）子网的连接。

我正在考虑两种选择：

*   每次[`accept`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737526%28v=vs.85%29.aspx)连接时检查客户端的地址。

    ```
    while (true) {
        SOCKET clientSocket = accept(serverSocket, 
                                     (SOCKADDR *)&clientAddress, 
                                     &addressLenght);
        if (clientSocket == INVALID_SOCKET
        || clientAddress.sin_addr.S_un.S_un_b.s_b1 != 192 
        || clientAddress.sin_addr.S_un.S_un_b.s_b2 != 168 
        || clientAddress.sin_addr.S_un.S_un_b.s_b3 != 0) {
            closesocket(clientSocket);
            continue;
        }

        ...
    } 
    ```

*   找出相应网络的本地地址并将其用作`name`参数[`bind`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737550%28v=vs.85%29.aspx)

    ```
    SOCKADDR_IN serverAddress;
    serverAddress.sin_family = AF_INET;
    serverAddress.sin_port = htons(13666);
    serverAddress.sin_addr.S_un.S_addr = inet_addr("192.168.0.1");

    result = bind(serverSocket, (SOCKADDR *)&serverAddress, 
                  sizeof(serverAddress)); 
    ```

我还有什么其他选择？

PS：有人告诉我有更好的解决方案。但我无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:37:33.180

如果您只想侦听一个子网上的客户端，正确的解决方案是`bind()`使用单个侦听套接字连接到与该子网对应的适配器的本地 IP。让操作系统为您进行过滤。

如果您需要监听多个子网上的客户端，您可以`bind()`根据需要为每个子网本地 IP 设置单独的侦听套接字，也可以`bind()`将单个套接字连接到`INADDR_ANY`(0.0.0.0)，然后手动过滤客户端。

如果你手动过滤，你应该使用[`WSAAccept()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms741513.aspx)而不是`accept()`这样你就可以利用它的`CONDITIONPROC`回调。不同之处在于，在使用时`accept()`，客户端会被操作系统无条件地接受到队列中，并`accept()`在您的代码访问它们之前完全连接。改为使用时`WSAAccept()`，您可以更早地访问客户端远程 IP，并且可以在将单个客户端放入要连接的队列之前选择是接受还是拒绝它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T21:30:26.790

如果您只想要来自服务器所在子网的连接（从您的问题中不清楚是否是这种情况），您可以使用`setsockopt()`将 TTL 设置为 1。该套接字的数据包（包括连接握手）应该不跨路由器。

# php - 删除zend中的http响应头

> ID：16001583
> 
> 赞同：3
> 
> 时间：2013-04-14T16:48:47.483
> 
> 标签：php, zend-framework, http-headers

Zend Framework (1) 中的应用程序有问题。

在特定操作中，我尝试删除一些标头，但作为响应，我仍然收到这些标头：

```
 $this->getResponse->clearAllHeaders()
                      ->clearRawHeaders();
    $this->getResponse->setHeader('A-Header', 'headervalue'); 
```

我希望得到的回应是：

```
 HTTP/1.1 XXX Some HTTP status code
    A-Header: headervalue 
```

但它是：

```
 HTTP/1.1 XXX Some HTTP status code
   Date: Sun, 14 Apr 2013 16:26:59 GMT
   Server: Apache/2.2.16 (Debian)
   X-Powered-By: PHP/5.3.3-7+squeeze15
   Vary: Accept-Encoding
   Content-Length: 0
   Content-Type: text/html 
```

如何删除日期、服务器、X-Powered-By、Vary、Content-Lenght、Content-Type？至少 Content* 标头。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T17:01:24.677

这些标头由 Apache 附加。

您可以使用`mod_headers`它来控制它的行为：

[http://httpd.apache.org/docs/2.2/mod/mod_headers.html](http://httpd.apache.org/docs/2.2/mod/mod_headers.html)

例子：

```
<IfModule mod_headers.c>
  Header unset Server
  Header unset X-Powered-By
</IfModule> 
```

# java - Java字节码：局部变量的类型？

> ID：16001584
> 
> 赞同：10
> 
> 时间：2013-04-14T16:48:57.937
> 
> 标签：java, jvm, bytecode

根据这篇文章[http://slurp.doc.ic.ac.uk/pubs/observing/linking.html#assignment](http://slurp.doc.ic.ac.uk/pubs/observing/linking.html#assignment)：

> 由于 Java 代码和字节码之间的信息差异（字节码不包含局部变量的类型），验证者不需要检查子类型是否分配给局部变量或参数。

我的问题：为什么字节码不包含局部变量的类型信息，而它确实包含参数和返回值的类型信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T18:28:56.420

首先，有几种不同的类型概念。有编译时类型，其中包括泛型。但是，泛型在编译后不存在。

有验证推断变量的静态类型，可以是 int、float、long、double、returnaddress 或对象引用。对象引用附加了一个上限类型，因此所有引用都是`java/lang/String`例如的子类型。字段还可以具有以下一种短类型：byte、short、char 或 boolean。出于执行目的，它们与 int 相同，但存储不同。

最后是运行时类型，它与验证的静态类型相同，但在对象引用的情况下，表示被引用实例的实际类型。请注意，由于验证者的惰性，在某些情况下运行时类型实际上可能不是已验证类型的子类型。例如，声明类型的变量`Comparable`实际上可以保存 Hotspot 中的任何对象，因为 VM 在验证时不检查接口。

编译时间信息不会保留，除非通过反射和调试的可选属性。这是因为没有理由保留它。

局部变量没有明确的类型信息（新的 StackMapTable 属性除外，但这是技术性的）。相反，当加载类时，字节码验证器通过运行静态数据流分析来推断每个值的类型。这样做的目的不是为了捕捉编译时类型检查之类的错误，因为假设字节码在编译时已经通过了此类检查。

相反，验证的目的是确保指令不会对 VM 本身造成危险。例如，它需要确保您没有采用整数并将其作为对象引用进行干预，因为这可能导致任意内存访问和入侵 VM。

因此，虽然字节码值没有显式类型信息，但它们确实具有隐式类型，这是静态类型推断的结果。这个细节根据每个 VM 的内部实现细节而有所不同，尽管它们*应该*遵循 JVM 标准。但是您只需要担心手写字节码中的这一点。

字段具有明确的类型，因为 VM 需要知道其中存储了哪种类型的数据。方法参数和返回类型被编码在所谓的方法描述符中，也用于类型检查。它们不可能自动推断，因为这些值可以来自或去任何地方，而类型检查是基于每个类完成的。

PS 在谈到验证类型时，我遗漏了一些小细节。对象类型还跟踪它们是否已初始化，如果未初始化，则由哪个指令创建它们。地址类型跟踪创建它们的 jsr 的目标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T18:53:34.767

那是一张很旧的纸。当前的类文件*确实*包括本地和堆栈变量的类型。类型不存储在方法字节码中，而是存储在附加到方法的[`StackMapTable`属性中。](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.7.4)

在没有 的情况下，可以（并且总是）通过数据流分析来重建所有局部变量和堆栈元素的类型`StackMapTable`，但计算成本很高。`StackMapTable`可以更快地验证带有 s 的代码。尽管我不得不承认，我看不出验证`StackMapTable`s 比进行分析更快，但我对此几乎一无所知。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T17:00:49.350

Java`bytecode`保留了关于 的类型信息`fields`， 但*正如您所问*`method` `returns`的，`parameters`它不 包含 的类型信息。*`local variables`*

 *Java 类文件中的类型信息使得反编译的任务`bytecode`比反编译 `machine code`. 因此，反编译 Java 字节码需要分析大多数局部变量类型、扁平化基于堆栈的指令以及 和 的`loops`结构`conditionals`。然而，字节码反编译的任务比编译要困难得多。您会经常看到反编译器无法完全执行其预期功能*

# html - 更改“未选择文件”：

> ID：16001586
> 
> 赞同：107
> 
> 时间：2013-04-14T16:48:59.700
> 
> 标签：html, button, file-upload, pug

我有一个“选择文件”按钮，如下所示（我使用的是 Jade，但它应该与 Html5 相同）：

```
 input(type='file', name='videoFile') 
```

在浏览器中，这会显示一个按钮，旁边有一个文本“未选择文件”。我想将“未选择文件”文本更改为其他内容，例如“未选择视频”或“请选择视频”。我在这里遵循了第一个建议：

[我不想在文件输入字段中看到“未选择文件”](https://stackoverflow.com/questions/5927212/i-dont-want-to-see-no-file-chosen-for-a-file-input-field)

但是这样做并没有改变文本：

```
 input(type='file', name='videoFile', title = "Choose a video please") 
```

谁能帮我找出问题出在哪里？

* * *

## 回答 #1

> 赞同：257
> 
> 时间：2013-07-30T14:06:36.033

用css隐藏输入，添加标签并将其分配给输入按钮。标签将是可点击的，当点击时，它将启动文件对话框。

```
<input type="file" id="files" class="hidden"/>
<label for="files">Select file</label> 
```

如果需要，然后将标签设置为按钮。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-08-20T07:31:17.543

试试这只是一个技巧

```
<input type="file" name="uploadfile" id="img" style="display:none;"/>
<label for="img">Click me to upload image</label> 
```

**这个怎么运作**

这很简单。Label 元素使用“for”标签通过 id 引用表单的元素。在这种情况下，我们使用“img”作为它们之间的引用键。完成后，每当您单击标签时，它都会自动触发表单的元素单击事件，在我们的例子中是文件元素单击事件。然后，我们使用 display:none 和 not visibility:hidden 使文件元素不可见，这样它就不会创建空白空间。

享受编码

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-04-14T16:59:56.710

我很确定您不能更改按钮上的默认标签，它们在浏览器中是硬编码的（每个浏览器都以自己的方式呈现按钮标题）。查看此[按钮样式文章](http://www.quirksmode.org/dom/inputfile.html)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-06-20T14:38:07.003

[http://jsfiddle.net/ZDgRG/](http://jsfiddle.net/ZDgRG/)

见上面的链接。我使用 css 隐藏默认文本并使用标签显示我想要的内容：

```
<div><input type='file' title="Choose a video please" id="aa" onchange="pressed()"><label id="fileLabel">Choose file</label></div>

input[type=file]{
    width:90px;
    color:transparent;
}

window.pressed = function(){
    var a = document.getElementById('aa');
    if(a.value == "")
    {
        fileLabel.innerHTML = "Choose file";
    }
    else
    {
        var theSplit = a.value.split('\\');
        fileLabel.innerHTML = theSplit[theSplit.length-1];
    }
}; 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-04-18T18:38:35.040

是的，即使您有一个预上传文件列表，也无法删除此“未选择文件”。

我找到的最简单的解决方案（适用于 IE、FF、CR）如下

1.  隐藏您的输入并添加“文件”按钮
2.  然后调用“文件”按钮并要求他绑定文件上传（在此示例中我使用的是 JQuery）

```
$('.addfiles').on('click', function() { $('#fileupload').click();return false;});
```

```
<button class="addfiles">Add Files</button>
<input id="fileupload" type="file" name="files[]" multiple style='display: none;'>
```

完成了，完美运行:)

弗雷德

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-04-30T13:04:41.497

```
$(function () {
     $('input[type="file"]').change(function () {
          if ($(this).val() != "") {
                 $(this).css('color', '#333');
          }else{
                 $(this).css('color', 'transparent');
          }
     });
})
```

```
input[type="file"]{
    color: transparent;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<input type="file" name="app_cvupload" class="fullwidth input rqd">
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-05-27T10:26:41.860

但是，如果您尝试删除此工具提示

```
<input type='file' title=""/> 
```

这行不通。这是我的小技巧，尝试使用空格的标题。它会起作用的。:)

```
<input type='file' title=" "/> 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-03-22T16:13:19.083

**HTML**

```
 <div class="fileUpload btn btn-primary">
    <label class="upload">
      <input name='Image' type="file"/>
    Upload Image
    </label>
  </div> 
```

**CSS**

```
input[type="file"]
{
  display: none;
}
.fileUpload input.upload 
{
    display: inline-block;
} 
```

**注意：** btn btn-primary 是一类引导按钮。但是，按钮的位置可能看起来很奇怪。希望您可以通过内联 css 修复它。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-08-02T14:12:05.173

使用更改了标签文本的标签

```
<input type="file" id="files" name="files" class="hidden"/>
<label for="files" id="lable_file">Select file</label> 
```

添加jQuery

```
<script>
     $("#files").change(function(){
        $("#lable_file").html($(this).val().split("\\").splice(-1,1)[0] || "Select file");     
     });
</script> 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-07-31T11:15:41.177

```
 .vendor_logo_hide{
      display: inline !important;;
      color: transparent;
      width: 99px;
    }
    .vendor_logo{
      display: block !important;
      color: black;
      width: 100%; 
    } 
```

```
$(document).ready(function() {
  // set text to select company logo 
  $("#Uploadfile").after("<span class='file_placeholder'>Select Company Logo</span>");
  // on change
  $('#Uploadfile').change(function() {
    //  show file name 
    if ($("#Uploadfile").val().length > 0) {
      $(".file_placeholder").empty();
      $('#Uploadfile').removeClass('vendor_logo_hide').addClass('vendor_logo');
      console.log($("#Uploadfile").val());
    } else {
      // show select company logo
      $('#Uploadfile').removeClass('vendor_logo').addClass('vendor_logo_hide');
      $("#Uploadfile").after("<span class='file_placeholder'>Select  Company Logo</span>");
    }

  });

});
```

```
.vendor_logo_hide {
  display: inline !important;
  ;
  color: transparent;
  width: 99px;
}

.vendor_logo {
  display: block !important;
  color: black;
  width: 100%;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<input type="file" class="vendor_logo_hide" name="v_logo" id='Uploadfile'>
<span class="fa fa-picture-o form-control-feedback"></span>

<div>
  <p>Here defualt no choose file is set to select company logo. if File is selected then it will displays file name</p>
</div>
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-04-14T17:04:50.547

像这样的东西可以工作

```
input(type='file', name='videoFile', value = "Choose a video please") 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-10-03T08:52:05.677

你可以这样尝试：

```
<div>
    <label for="user_audio" class="customform-control">Browse Computer</label>
    <input type='file' placeholder="Browse computer" id="user_audio"> <span id='val'></span>
 <span id='button'>Select File</span>
</div> 
```

要显示选定的文件：

```
$('#button').click(function () {
    $("input[type='file']").trigger('click');
})

$("input[type='file']").change(function () {
    $('#val').text(this.value.replace(/C:\\fakepath\\/i, ''))
    $('.customform-control').hide();
}) 
```

感谢@unlucky13 获取选定的文件名

这是工作小提琴：

[http://jsfiddle.net/eamrmoc7/](http://jsfiddle.net/eamrmoc7/)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-04-16T05:37:29.110

```
input[type=file] {
      color: transparent !important;
  }
input[type=file]::before {
    content: "Attach Your CV: ";
    color: black;
    margin-right: 10px; 
}
```

```
<input type="file">
```

如果要在按钮后显示文本，请使用 after

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-05-12T20:45:23.020

```
<div class="field">
    <label class="field-label" for="photo">Your photo</label>
    <input class="field-input" type="file" name="photo"  id="photo" value="photo" />
</div> 
```

和CSS

```
input[type="file"]
{ 
   color: transparent; 
   background-color: #F89406; 
   border: 2px solid #34495e; 
   width: 100%; 
   height: 36px; 
   border-radius: 3px; 
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-11-02T10:26:04.483

只需更改输入的宽度。大约 90 像素

`<input type="file" style="width: 90px" />`

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-04-06T05:44:55.303

这将帮助您更改“没有文件选择选择个人资料图片”的名称

```
<input type='file'id="files" class="hidden"/>  
<label for="files">Select profile picture</label> 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-01-19T11:51:32.017

我尝试了所有技巧，但似乎没有任何效果，只是导致将带有 CSS 颜色属性的文本隐藏到#fff，因为我的背景是#fff。这是代码：

```
<input class="form-control upload_profile_pic" 
   type="file" 
   name="userfile" class="form-control" 
    style="color: #fff;"> 
```

或者

```
input.form-control.upload_profile_pic {
    color: #fff;
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-11-16T17:26:34.563

以下将删除“未选择文件”文本，但保留“选择文件”伪按钮不变。与此处的其他技术不同，这对可访问性的影响应该很小。

```
input[type='file'] { font-size: 0; }
::file-selector-button { font-size: initial; }
```

```
<input type="file"/>
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2022-01-17T15:36:24.800

[https://dev.to/sadnessojisan/hide-no-file-chosen-of-input-elements-type-file-1bn6](https://dev.to/sadnessojisan/hide-no-file-chosen-of-input-elements-type-file-1bn6)

只需添加`color: white`到输入元素

> ```
> input[type='file'] {
>    color: rgba(0, 0, 0, 0)
> } 
> ```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2019-04-03T05:01:40.557

我会使用“按钮”而不是“标签”，希望这对某人有所帮助。

这只会显示一个按钮，用户点击会弹出文件选择器，文件选择后，自动上传。

```
<button onclick='<%= "$(\"#" + FileUpload1.ClientID + "\").click(); return false;" %>'>The Text You Want</button>

<asp:FileUpload onchange="$('#btnUpload').click();" ID="FileUpload1" runat="server" style="display: none;" />

<asp:Button ID="btnUpload" ClientIDMode="Static" runat="server" OnClick="btnUpload_Click" style="display: none;" /> 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2020-10-28T18:36:47.947

您可以使用以下 css 代码隐藏（未选择文件）

**HTML**

```
<input type="file" name="page_logo" id="page_logo"> 
```

**CSS**

```
input[type="file"]:after {color: #fff} 
```

**确保颜色与背景颜色匹配**

* * *

## 回答 #22

> 赞同：-2
> 
> 时间：2020-03-24T15:17:59.180

有一个很好的例子（包括文件类型验证）：

[https://github.com/mdn/learning-area/blob/master/html/forms/file-examples/file-example.html](https://github.com/mdn/learning-area/blob/master/html/forms/file-examples/file-example.html)

它基本上是 Amos 使用按钮的想法的充实版本。

我尝试了上面的几个建议但没有成功（但也许就是我）。

我正在重新使用它来进行 Excel 文件转换

```
 <form>
    <div>
      <label for="excel_converts">Choose a spreadsheet to convert.</label>
      <input type="file" id="excel_converts" name="excel_converts" accept=".xlsx, .xls, .csv" >
    </div>
    <div class="preview">
      <p>No spreadsheet currently selected for conversion</p>
    </div>
    <div>
      <button>Submit</button>
    </div>
  </form> 
```

# android - Android 媒体播放器停止后无法播放

> ID：16001587
> 
> 赞同：10
> 
> 时间：2013-04-14T16:49:05.363
> 
> 标签：android, audio, media-player, playback

我有 5 首歌曲的音乐播放列表。我只希望播放和停止按钮只要我在应用程序中工作。而且我可以在我想停止音乐时停止音乐并开始另一个音乐。

现在这是如何工作的......音乐在播放按钮上播放，当我点击停止按钮时它停止，但是我想再次播放其他歌曲或同一首歌曲，没有任何反应。请帮忙。

```
public class glavna extends Activity{
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.activity_main);

    final MediaPlayer MPRadio1 = MediaPlayer.create(this, R.raw.pj1);
    final MediaPlayer MPRadio2 = MediaPlayer.create(this, R.raw.pj2);
    final MediaPlayer MPRadio3 = MediaPlayer.create(this, R.raw.pj3);
    final MediaPlayer MPRadio4 = MediaPlayer.create(this, R.raw.pj4);
    final MediaPlayer MPRadio5 = MediaPlayer.create(this, R.raw.pj5);

    final RadioButton rb1, rb2, rb3, rb4, rb5;      

    rb1 = (RadioButton) findViewById(R.id.radio1);
    rb2 = (RadioButton) findViewById(R.id.radio2);
    rb3 = (RadioButton) findViewById(R.id.radio3);
    rb4 = (RadioButton) findViewById(R.id.radio4);
    rb5 = (RadioButton) findViewById(R.id.radio5);

    Button btn = (Button) findViewById(R.id.buttonplay);
    Button btnStop = (Button) findViewById(R.id.buttonStop);

    btnStop.setOnClickListener(new View.OnClickListener() {

    public void onClick(View b){

        MPRadio1.stop();
        MPRadio2.stop();
        MPRadio3.stop();
        MPRadio4.stop();
        MPRadio5.stop();

    };
    });

    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            if(rb1.isChecked())
            {       

            MPRadio1.start();

            }
        else
            {
            if(rb2.isChecked())
            {

                MPRadio2.start();
            }
                else
                {
                    if(rb3.isChecked())
                    {
                    MPRadio3.start();

                }
                    else
                    {
                        if(rb4.isChecked())
                        {
                        MPRadio4.start();

                    }
                        else
                        {
                            if(rb5.isChecked())
                            {
                            MPRadio5.start();

                            }

                        }   
                    }
                }
            };
        }
    }

        );}} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-14T16:55:47.763

再次播放歌曲重置媒体播放器，再次设置数据源并开始

```
mp.reset();
mp.setDataSource(MEDIA_PATH);
mp.prepare();
mp.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-26T06:56:58.837

停止后按播放按钮时，播放按钮永远不起作用-对于这个问题，我们可以在停止按钮中再次创建对象。例如；-stop.setOnClickListener(new OnClickListener() {

```
 @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(mPlayer.isPlaying())
            mPlayer.stop();
            mPlayer  = MediaPlayer.create(mediaplayeractivity.this, R.raw.adidas);
        }
    });} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-28T07:17:31.647

***您可以在此处查看此演示示例，我正在循环播放音频 clicp 并在 Button Cick 上停止并再次播放。***

```
package com.Test.demo;

import androidx.appcompat.app.AppCompatActivity;

import android.content.DialogInterface;
import android.media.MediaPlayer;
import android.os.Build;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.util.Log;
import android.view.View;
import android.widget.Button;

import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.Timer;
import java.util.TimerTask;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.ScheduledFuture;

import static java.util.concurrent.TimeUnit.SECONDS;

public class MainActivity extends AppCompatActivity {

    Button scan;
    Button stop;

    MediaPlayer mp;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        scan=(Button)findViewById(R.id.scan);
        stop=(Button)findViewById(R.id.stop);
        mp = MediaPlayer.create(this, R.raw.trackeralertseparation);
        scan.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                mp.setLooping(true);
                mp.start();
                mp.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
                    @Override
                    public void onCompletion(MediaPlayer mediaPlayer) {
                        mp.reset();
                        mp.release();
                    }
                });
            }
        });

        stop.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {

                if(mp.isPlaying()){
                    mp.stop();
                }
                mp=MediaPlayer.create(getApplicationContext(), R.raw.trackeralertseparation);
            }
        });
    }
} 
```

***设计文件在下面，带有简单的按钮。***

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        tools:context=".MainActivity">

        <Button
            android:id="@+id/scan"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="195dp"
            android:gravity="center_vertical"
            android:padding="4dp"
            android:text="Play"
            android:textSize="26sp"
            android:textStyle="bold" />

        <Button
            android:id="@+id/stop"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="stop"
            android:padding="4dp"
            android:layout_centerInParent="true"
            android:textSize="26sp"
            android:textStyle="bold"/>

    </RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-10-10T14:31:24.097

当您按下停止按钮后播放不起作用时...只需将您的媒体播放器对象作为应该修复它的对象数组..

```
final MediaPlayer[] mediaPlayer = {MediaPlayer.create(getApplicationContext(), R.raw.song_name)};

stop.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {

            mediaPlayer[0].stop();

            mediaPlayer[0] = MediaPlayer.create(getApplicationContext(),R.raw.song_name);
        }
    }); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-08-20T21:15:08.977

当你停止音乐时，必须在创建中再次声明歌曲。

使用 Android Studio 的简单方法：

```
mPlayer  = MediaPlayer.create(mediaplayeractivity.this, R.raw.adidas); 
```

# python-3.x - Tkinter 实例化在 OS X 10.8 上的 Python 3.3.1 中失败

> ID：16001589
> 
> 赞同：2
> 
> 时间：2013-04-14T16:49:14.827
> 
> 标签：python-3.x, tkinter, osx-mountain-lion, activetcl

我试图在 Python 3.3.1 中使用 Tkinter 开始我的新项目。所以我安装了 ActiveTcl `8.5.13`，因为这似乎是必需的。

现在我运行这个简单的测试脚本；

```
import sys
from tkinter import *

mGui = Tk() # Instantiate the Tkinter object 
```

但是，`Tk()`找不到实例；

```
iMac2011:Desktop allendar$ python3 tkinter.py
Traceback (most recent call last):
  File "tkinter.py", line 4, in <module>
    from tkinter import *
  File "/Users/allendar/Desktop/tkinter.py", line 8, in <module>
    mGui = Tk() # Instantiate the Tkinter object
NameError: name 'Tk' is not defined 
```

我似乎无法在互联网上找到有关此问题的信息。它在我的 Ubuntu 发行版上没有任何问题。这是 OS X 需要某种特定方式调用库的某种问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-18T13:12:12.887

Your problem is the name of the file is tkinter.py So when import tkinter it imports the file itself instead of the actual tkinter module. I ran into this problem myself once, it took me a while to figure it out. Change the name of the file and it should fix your problem.

# css - css 与 chrome 一起工作正常，但随着 IE 的变化

> ID：16001591
> 
> 赞同：-2
> 
> 时间：2013-04-14T16:49:21.047
> 
> 标签：css, internet-explorer

我正在使用以下样式在网页中显示单词。

```
<h2><font color="#5D5D5D" size="2" face=caecilia-light, face="helvetica,arial,sans-serif" >Hello world 
```

我的CSS如下：

```
h2{
    color: #747474;
    font-family: helvetica,arial,sans-serif;
    font-size: 13px;
    font-style: normal;
    font-variant: normal;
    font-weight: normal;
    text-align: left;
    text-decoration: none;
    text-indent: 0;
    text-justify: auto;
    text-outline: none;
    text-overflow: clip;
    text-shadow: none;
    text-transform: none;
    text-wrap: normal;
    -webkit-font-smoothing: antialiased;
    font-size: 28px;
    padding-left: 25px;
} 
```

它适用于 chrome，但是当我在 IE 中打开它时字体会发生变化。如何修改我的代码，使其在 IE 中像在 chrome 中一样工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:50:52.510

您在其中声明了一个副本`font-family`和`font-size`属性`h2`- 取消其中一个您不需要的属性。

此外，在你的 html 中`face="caecilia-light'`应该更改为`face="caecilia-light"`- 在 chrome 中，它被正确处理，但在 IE 中它是一个错误，所以它会选择第二个`face`属性

# android - Android GPU 数学

> ID：16001593
> 
> 赞同：2
> 
> 时间：2013-04-14T16:49:26.407
> 
> 标签：android, math, gpu

我想通过在 GPU 上进行数学计算来加速我的程序。

在android中可以吗？我怎么做？

到目前为止，我找到了带有工作示例的[Renderscript](http://developer.android.com/guide/topics/renderscript/compute.html)（带有 sdk。它的名称 HelloCompute）但它只适用于 android 3+

而且文档不是那么好...

还有其他解决方案吗？

# php - 在 AJAX 成功时将多个 PHP 数组传递给 JavaScript

> ID：16001598
> 
> 赞同：0
> 
> 时间：2013-04-14T16:49:58.023
> 
> 标签：php, javascript, ajax

我很难使用 AJAX 请求将数组从 PHP 页面传递到 JavaScript。

我将不得不将来自多个 php 数组的信息传递给 javascript。我知道我可以为此使用 json_encode，但是，我很难实现这一点。`$name`数组似乎没有被传递，此外，我需要将所有数组传递给 javascript 而不仅仅是`$name`.

我很感激对此提出的任何建议。

提前谢谢了！

这是我尝试传递`$name`数组的方法（代码片段）：

PHP

```
while($row2 = mysqli_fetch_array($results2)){
    $name[$i] = $row2['prod_name'];
    $price[$i] = $row2['price'];
    $upc[$i] = $row2['upc'];
    $quantity[$i] = $row2['quantity'];
}
echo json_encode($name); 
```

AJAX

```
$.ajax({
    url: "invoice-get-data.php?hotItems=1&getArrays=1",
    dataType: "json",
    success: function(data){
        alert(data[0]);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T16:53:15.843

后端：

```
while($row2 = mysqli_fetch_array($results2)){
    $name[] = $row2['prod_name'];
    $price[] = $row2['price'];
    $upc[] = $row2['upc'];
    $quantity[] = $row2['quantity'];
}
echo json_encode(array($name, $price, $upc, $quantity)); 
```

前端：

```
$.ajax({
    url: "invoice-get-data.php?hotItems=1&getArrays=1",
    dataType: "json",
    success: function(data){
        data = JSON.parse(data);
        alert(data[0]);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:51:55.300

$i 在 while 循环中似乎没有改变，所以最后一个值不断被新值覆盖。您可以使用：

```
$name = array(); //setup array
while($row2 = mysqli_fetch_array($results2)){
    $name[] = $row2['prod_name']; //add to the end of the array
}
echo json_encode($name); 
```

您还可以使用“die”来回显您的 html 代码，以确保之后不会执行任何其他操作`die(json_encode($name));`

并且您的 jquery 返回变量`data`，因此请使用`data`：

```
$.ajax({
    url: "invoice-get-data.php?hotItems=1&getArrays=1",
    dataType: "json",
    success: function(data){
        alert(data[0]);
    }
}); 
```

# primefaces - jsf 1.2 在删除按钮按下时弹出对话框

> ID：16001600
> 
> 赞同：0
> 
> 时间：2013-04-14T16:50:23.287
> 
> 标签：primefaces, jsf-1.2

我需要在单击删除按钮时有一个确认对话框。我正在使用 Jsf 1.2 我可以使用 primeFace 或 RichFaces 吗？或者方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:53:51.923

你可以试试这个：[ConfirmDialog](http://www.primefaces.org/showcase/ui/confirmDialog.jsf)

# c++ - 如何简化复杂的 API 访问（v8）

> ID：16001608
> 
> 赞同：0
> 
> 时间：2013-04-14T16:51:18.743
> 
> 标签：c++, api, macros, inline

每次我想从 v8:Object 获取 C 兼容值时，我都必须执行以下操作：

```
Local<Object> obj = args[0]->ToObject();

obj->Get(String::New("property"))->NumberValue(); 
```

为了简化这一点，我可以使用一个助手：

```
obj->Get(strg("property"))->NumberValue();

Local<Value> strg(const char* str) {
    return String::New(str);
} 
```

但这并不是真正的改进。C(++) 是否为此用例（宏？）提供工具？

如果是的话，它会是什么样子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:02:09.320

也许是这样的：

```
#define PROPERTY(object, name) \
  object->Get(String::New(name)) 
```

用法：

```
Local<Object> obj = args[0]->ToObject();

PROPERTY(obj, "property")->NumberValue(); 
```

甚至可以做额外的快捷方式：

```
#define NUMBER_VALUE(object, name) \
  PROPERTY(object, name)->NumberValue() 
```

用法：

```
Local<Object> obj = args[0]->ToObject();

NUMBER_VALUE(obj, "property"); 
```

# javascript - 在 Safari 中以百分比调整字体大小，例如 Safari Mobile

> ID：16001616
> 
> 赞同：0
> 
> 时间：2013-04-14T16:51:57.140
> 
> 标签：javascript, macos, css, safari, webkit

我正在开发一个 Safari 扩展。

在 iOS 中，使用 CSS3，我们可以使用`webkitTextSizeAdjust`.

例如 ：

```
document.querySelector("h1").style.webkitTextSizeAdjust = '200%'; 
```

但它不适用于 OS X 的 Safari。

如何在 Safari 桌面上重现相同的内容？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:30:48.057

如果您只是想更改字体大小，可以这样做：

```
document.querySelector("h1").style.fontSize = '200%'; 
```

# c++ - 我的代码由于奇怪的原因无法编译

> ID：16001617
> 
> 赞同：-7
> 
> 时间：2013-04-14T16:51:58.903
> 
> 标签：c++

```
#include <iostream>
using namespace std;

class Vehicule {
public:
    void affiche() const {
        cout << "Ceci est un vehicule." << endl;
    }

protected:
    int m_prix;
};

class Voiture : public Vehicule {
public:
    void affiche() const {
        cout << "Ceci est une voiture." << endl;
    }

private:
    int m_portes;
};

class Moto : public Vehicule {
public:
    void affiche() const {
        cout << "Ceci est une moto." << endl;
    }

private:
    double m_vitesse;
};

void presenter(Vehicule v) {
    v.affiche();
}

int main() {
    Vehicule v;
    presenter(v);

    Moto m;
    presenter(m);

    system("PAUSE");

    return 0;
} 
```

此代码无法编译。你知道为什么吗？Visual Studio 说 m 和 v 已使用但未初始化。但不是吗？我的意思是，我初始化它们。

此代码无法编译。我重复。它不编译。

我得到的错误（不是警告，这是一个错误）是：

使用了未初始化的局部变量“m” 使用了未初始化的局部变量“v”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T16:58:20.303

C4700 是警告，而不是错误。你的代码编译得很好。它只是告诉您成员`m_vitesse`,`m_portes`和`m_prix`未初始化。如果要初始化它们，则需要为这些类提供自己的构造函数，例如：

```
class Vehicule {
public:
    // This constructor initializes m_prix to 0
    Vehicule() : m_prix(0) { }

    void affiche() const {
        cout << "Ceci est un vehicule." << endl;
    }

protected:
    int m_prix;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:59:24.547

您的代码会编译，但会收到警告。因为`Vehicule`laks 默认构造函数将初始化 m_prix。您可以通过向其添加构造函数来修复它。

```
class Vehicule {
public:
  Vehicule():m_prix(0){};
    void affiche() const {
        cout << "Ceci est un vehicule." << endl;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T17:08:36.427

Visual Studio 抱怨，因为您没有初始化类的数据成员（`m_prix`等`m_portes`）。方法`affiche`必须是虚拟的，函数`presenter`必须通过引用给出它的参数。

```
class Vehicule {
public:
    virtual void affiche() const {
        cout << "Ceci est une voiture." << endl;
    }
};

void presenter(const Vehicle& v) {
    v.affiche()
} 
```

# php - 正则表达式匹配交替字符

> ID：16001624
> 
> 赞同：1
> 
> 时间：2013-04-14T16:52:24.113
> 
> 标签：php, regex

我正在尝试匹配一串数字并检测是否存在交替数字的模式。例如，`3131`是一场比赛。`4596961`是匹配项，因为它包含`9696`. `433215`不匹配，因为没有交替的数字。

我写的当前表达式是`/(\d)(\d)(\\1\\2)+/`，它工作得很好，*除了*它也匹配重复的连续数字。例如，它匹配 5555，而我不希望它匹配，因为 5555 不是由交替数字组成的（至少严格来说不是）。

**本质上，我想告诉正则表达式引擎，第一个`\d`和第二个`\d`是不同的字符。**

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T16:56:00.957

使用[前瞻断言](http://www.regular-expressions.info/lookaround.html)：

```
/(\d)(?!\1)(\d)(\1\2)+/ 
```

此外，如果您使用`'...'`字符串，则转义序列只需要一个反斜杠：

```
if (preg_match(
    '/(\d)  # Match a digit and store it in group number 1
    (?!\1)  # Assert that the next char is not the same as the one in group 1
    (\d)    # Match a digit, store it in group 2
    (\1\2)+ # Match one or more repetitions of the two digits matched previously
    /x', 
    $subject, $regs)) {
    $result = $regs[0];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T16:56:13.580

如果您的正则表达式支持负前瞻，您可以确保第二个数字与第一个不同：

```
/(\d)(?!\\1)(\d)\\1\\2/ 
```

这样可以确保首字母`(\d)`后面不会再出现相同的内容。

顺便说一句，只是一个缩短模式的想法：

```
/((\d)(?!\\2)\d)\\1/ 
```

这是否更容易阅读是您的决定。

# javascript - 并行运行 Node 和 Apache

> ID：16001625
> 
> 赞同：0
> 
> 时间：2013-04-14T16:52:26.393
> 
> 标签：javascript, mysql, database, node.js

我正在开发一个允许用户监控能源消耗的项目。主仪表板页面是一个非常简洁的 Web 应用程序，并且大量使用了 javascript 和 ajax。服务器当前运行apache，使用php；但是，我计划安装 node.js 并更新服务器端脚本以支持 websockets（我也喜欢在服务器端和客户端使用 javascript 的想法）。

我已经关注了几个在线介绍，但我很难找到具体问题的答案，在我开始之前我需要弄清楚这些问题，其中一个概述如下。

服务器目前正在运行 CentOS，安装 Ubuntu 服务器会更好吗？我认为在线可能有更好的资源来帮助处理我几乎肯定会在途中遇到的问题（尤其是对 linux 命令行没有太多经验的问题）。

*非常感谢您花时间阅读我的问题。如果您能回答其中任何一个问题，甚至提供任何一般性建议，将不胜感激。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:58:55.357

Ubuntu 服务器与 CentOS 没有太大区别……你只需要在不同的端口上运行两个服务器，例如 80 上的 apache 和 8000 上的 nodejs。如果你不想要像[http://domain.com:8000](http://domain.com:8000)这样的丑陋链接，那么你需要在 apache 和 nginx 前面设置 nginx，它会在这些服务器上重定向不同的域并缓存静态数据。这是最常见的设置
，这里有一些文章可以帮助您使用 nginx [https://www.digitalocean.com/community/articles/how-to-configure-nginx-as-a-front-end-proxy-for-apache](https://www.digitalocean.com/community/articles/how-to-configure-nginx-as-a-front-end-proxy-for-apache)忽略Ubuntu apt-get，改用 CentOS yum install

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:06:46.147

让 Node 代理到您的 Apache 服务器也很容易。

```
var express = require('express');
var request = require('request');
var app = express();

app.all('/php/*', function (req, res) {
  req.pipe(request('http://localhost:8000' + req.url)).pipe(res);
});

app.listen(8080); 
```

# activeadmin - 如何将 HTML 类添加到 ActiveAdmin 索引表

> ID：16001627
> 
> 赞同：4
> 
> 时间：2013-04-14T16:52:28.670
> 
> 标签：activeadmin

对于一些自定义（排序）Javascript，我想在`ActiveAdmin`-resource 中的表中添加一个“可排序”类。

默认生成的 HTML 是：

```
<table cellspacing="0" cellpadding="0" border="0" paginator="true" class="index_table index" id="products"> 
```

我想添加一个类：

```
<table ... class="index_table index sortable" ...> 
```

或者，如果不可能，则使用“数据可排序”属性。像这样：

```
<table ... data-sortable="products"> 
```

我尝试传递一些 HTML 风格的哈希值，但它们没有被拾取：

```
index(:class => "sortable") do
end

index(:html_attributes => {:class => "sortable"}) do
end 
```

阅读[文档](http://rubydoc.info/gems/activeadmin/ActiveAdmin/Views/IndexAsTable%3abuild)让我不明智。

如何向表中添加自定义类或属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T15:28:30.337

不幸的是，index as table 不接受这些额外的选项。

如果您希望轻松添加拖放排序（使用简单排序和树），我建议您使用[Active Admin Sortable Tree](https://github.com/nebirhos/activeadmin-sortable-tree) gem。

否则，您始终可以推出[自己的索引构建器](https://activeadmin.info/3-index-pages/custom-index.html)

# jquery - jQuery，如何在 .load() 之后重新绑定 html 元素

> ID：16001638
> 
> 赞同：2
> 
> 时间：2013-04-14T16:54:01.037
> 
> 标签：jquery

我有一个 html-component 将在单击按钮后重新加载。组件的某些元素绑定到单击和悬停处理程序。一切正常，直到`.load()`调用 -function 重新加载组件。已加载组件的元素未绑定到相应的处理程序。

那时我将 js-script 放在组件的末尾，以便它绑定元素。但是在组件重新加载之后，组件外部的元素现在是未绑定的。

我已经尝试过`.on()`, `.live()`, `.bind()`, `.click()`, ... 没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:00:10.393

您应该能够调用该`.load()`方法并创建一个回调，您可以在其中重新绑定元素。

例如：

```
$(document).ready(function() {
    ...initially bind all event handlers for page (including elements to be reloaded)...

    $("#someButton").on("click", function() { 
        $("#elementToReload").load("page-to-load.html", function() {
             ...bind all event handlers for this and containing elements here...
        });
    });
}); 
```

如果您对此有任何疑问，请告诉我。祝你好运！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T16:59:11.517

我不确定您绑定事件的方式，但基本上，如果您以这种方式做某事：

```
$('.your-class').on('click', function (e) {[...]}); 
```

您可能最好将其委托给未重新加载的文档。

```
$(document).on('click', '.your-class', function (e) {[...]}); 
```

您可以确定即使在脚本执行时不存在的元素也会被绑定，因为它们稍后将成为您文档的一部分。

# java - 编译 java 文件时遇到问题（ANT 和 XML 相关）

> ID：16001639
> 
> 赞同：2
> 
> 时间：2013-04-14T16:54:01.260
> 
> 标签：java, ant

基本上，当我执行命令时`ant -f mybuild.xml clean junit-TestRunner`，我的 java 文件中有很多错误，它会在 junit 导入时出现错误，例如：

```
 java:6: error: package org.junit does not exist 
```

这是我的 xml 文件的一部分，它在测试编译时给了我错误：

```
<path id="test.classpath">
   <pathelement location="${build.test.dir}"/>
</path>

<target name="test-compile" depends="test-init">
      <javac srcdir="test" 
      destdir="build\test"
      includeAntRuntime="No"/>
</target>

<target name="junit-TestRunner" depends="test-compile">
  <java classname="org.junit.runner.JUnitCore" 
        classpathref="C:\junit-4.10">
    <arg value="org.example.antbook.junit.SimpleTest"/>
  </java>

  <java classname="org.junit.runner.JUnitCore" 
        classpathref="test.classpath">
    <arg value="org.eclipseguide.persistence.FilePersistenceServicesTest"/>
  </java>
</target> 
```

我假设它找不到我的 junit-4.10.jar 文件所在的目录。我在'classpathref'中改变了它，但仍然给我同样的错误。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:49:15.757

不要放入`junit.jar`你的`$ANT_HOME`. 如果你这样做，当你安装新版本的 Ant 时，或者如果其他人检出文件时，你会出现问题。这是你的问题：

```
<target name="junit-TestRunner" depends="test-compile">
   <java classname="org.junit.runner.JUnitCore" 
       classpathref="C:\junit-4.10">
       <arg value="org.example.antbook.junit.SimpleTest"/>
   </java> 
```

A`classpathref`是对类路径的***引用***。它是单独定义的，它不是jar或目录。

例如，在调用我的`<java>`任务之前，我首先定义我的类路径引用：

```
<classpath id="test.classpath">
    <pathelement path="C:/junit-4.10"/>
</classpath> 
```

这定义了对这个类路径的***引用***，称为`test.classpath`. 您现在可以在`<java>`任务中使用它：

```
<target name="junit-TestRunner" depends="test-compile">
    <classpath id="test.classpath">
        <pathelement path="C:/junit-4.10"/>
    </classpath>

   <java classname="org.junit.runner.JUnitCore" 
       classpathref="test.classpath">
       <arg value="org.example.antbook.junit.SimpleTest"/>
   </java> 
```

您可以做的另一件事是简单地包含`classpath`，因此您不必首先定义对它的引用：

```
<target name="junit-TestRunner" depends="test-compile">
   <java classname="org.junit.runner.JUnitCore">
       <arg value="org.example.antbook.junit.SimpleTest"/>
       <classpath>
           <pathelement path="C:/junit-4.10"/>
       </classpath>
   </java> 
```

顺便说一句，避免使用反斜杠。它可能会导致问题，因为它有时可以用作*引用字符*。相反，像我在上面所做的那样使用正斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T21:27:09.310

将以下目标添加到您的构建中。

```
<target name="bootstrap" description="Install build dependencies">
    <mkdir dir="${user.home}/.ant/lib"/>
    <get dest="${user.home}/.ant/lib/junit.jar" src="http://search.maven.org/remotecontent?filepath=junit/junit/4.11/junit-4.11.jar"/>
</target> 
```

这会将 junit jar 安装到第 3 方依赖项的 ANT 标准位置之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T16:59:44.970

I suspect this:

```
classpathref="C:\junit-4.10" 
```

should point to a jar file or a classes subdir under the above.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T17:18:00.160

您是否检查过[此页面](http://ant.apache.org/manual/Tasks/junit.html)上的第二个“注释” ？我认为最简单的方法是＃1，将这些 JAR 放在`${ANT_HOME}/lib`文件夹中。这样您就不必指定任何类路径。

# javascript - 目的 ＃ 没有方法'fadeOut'

> ID：16001641
> 
> 赞同：2
> 
> 时间：2013-04-14T16:54:05.867
> 
> 标签：javascript, jquery

出于某种原因，我调用的每个函数都不起作用。无论是“fadeOut”、“fadeIn”还是“fadeTo”，我都会收到错误消息。

这是js脚本代码以及HTML。

```
<html>
    <head>    
        <script type='text/javascript' src="js/jquery-1.9.1.min.js"></script>
        <script type="text/javascript" src="js/script.js"></script>
        <link rel="stylesheet" type="text/css" href="stylesheet.css"> 
    </head>
    <body>
      <h1>Hello world</h1>

        <ol>
            <li> Hello</li>
            <li> My </li>
            <li> Name </li>
            <li> is </li>
        </ol>

    </body>
</html>

$(document).ready(function(){

    $('ol li').click(function(){
        this.fadeOut('slow');
    });

    $('h1').click(function(){
        this.fadeOut('slow',0.5);
    });

    $('li:nth-child(1)').mouseenter(function(){
        ('li:nth-child(2)').fadeOut('slow',0.25);
    });

}); 
```

有人可以解释我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T16:55:36.830

您试图在不是 jQuery 的对象上调用 jQuery 方法。所以`this`变成`$(this)`等。

```
$(document).ready(function()
{
    $('ol li').click(function()
    {
        $(this).fadeOut('slow');
    });

    $('h1').click(function()
    {
        $(this).fadeOut('slow',0.5);
    });

    $('li:nth-child(1)').mouseenter(function()
    {
        $('li:nth-child(2)').fadeOut('slow',0.25);
    });
}); 
```

# java - 我正在尝试在我的 jsf 2 应用程序中使用 spring security 3.1.3，但出现以下异常

> ID：16001646
> 
> 赞同：2
> 
> 时间：2013-04-14T16:54:14.913
> 
> 标签：java, spring, jsf, jsf-2, spring-security

堆栈跟踪

```
 SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
    org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChains': Initialization of bean failed; nested exception is java.lang.NoSuchFieldError: NULL
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:587)
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:925)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)
        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4887)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5381)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
        at java.lang.Thread.run(Thread.java:722)
    Caused by: java.lang.NoSuchFieldError: NULL
        at org.springframework.expression.TypedValue.<clinit>(TypedValue.java:32)
        at org.springframework.expression.spel.support.StandardEvaluationContext.setRootObject(StandardEvaluationContext.java:88)
        at org.springframework.expression.spel.support.StandardEvaluationContext.<init>(StandardEvaluationContext.java:74)
        at org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:124)
        at org.springframework.beans.factory.support.AbstractBeanFactory.evaluateBeanDefinitionString(AbstractBeanFactory.java:1299)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.evaluate(BeanDefinitionValueResolver.java:225)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:312)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:107)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:354)
        at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:154)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
        ... 21 more 
```

这是我的 web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">

  <!-- Location of the XML file that defines the root application context
    applied by ContextLoaderListener. -->
    <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>

  <listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>
  <listener>
    <listener-class>
        org.springframework.web.context.request.RequestContextListener
    </listener-class>
  </listener>
  <context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
  </context-param>
  <welcome-file-list>
    <welcome-file>default.jsf</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>facesServlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>facesServlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>facesServlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
  </servlet-mapping>

    <listener>
        <listener-class>
            org.springframework.security.web.session.HttpSessionEventPublisher
        </listener-class>
    </listener>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>FORWARD</dispatcher>
        <dispatcher>REQUEST</dispatcher>
    </filter-mapping>

</web-app> 
```

Spring-security.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <!-- this is security configuration file which maps urls according to user 
        roles authorization -->
    <beans:import resource="classpath:/com/mycompany/myproject/service-beans.xml"/>
    <http use-expressions="true">
        <intercept-url pattern="/login.jsf*" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <intercept-url pattern="/**" access="ROLE_USER" />
        <form-login login-page='/login.jsf' default-target-url="/default.jsf"/>
    </http>
    <authentication-manager alias="authenticationManager">
        <authentication-provider user-service-ref="myDetailsService"/>
    </authentication-manager>

    <beans:bean id="myDetailsService" class="com.mycompany.myproject.security.MyDetailsService">
        <beans:property name="loginService" ref="com.mycompany.myproject.service.impl.LoginServiceImpl"></beans:property>
    </beans:bean>
</beans:beans> 
```

> 我检查了依赖项，发现 spring-aop 3.0.7 和 spring-asm 3.0.7 是由 maven 下载的，而我没有将它们包含在 pom.xml 依赖项中，并且每次我从 .m2 存储库中删除它们时，maven 下载它们再次，以下是 pom.xml 文件

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
  http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>com.mycompany.myproject</groupId>
    <artifactId>MyProject</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>MyProject Webapp</name>
    <url>http://maven.apache.org</url>

    <properties>
        <spring-version>3.1.3.RELEASE</spring-version>
    </properties>

    <dependencies>

        <!-- JSF -->
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.13</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.13</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>

        <!-- <dependency> <groupId>javax.servlet.jsp</groupId> <artifactId>jsp-api</artifactId> 
            <version>2.1</version> </dependency> -->

        <!-- EL -->
        <dependency>
            <groupId>org.glassfish.web</groupId>
            <artifactId>el-impl</artifactId>
            <version>2.2</version>
        </dependency>

        <!-- Tomcat 6 need this -->
        <dependency>
            <groupId>com.sun.el</groupId>
            <artifactId>el-ri</artifactId>
            <version>1.0</version>
        </dependency>

        <!-- JSR-330 -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>

        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-io</artifactId>
            <version>1.3.2</version>
        </dependency>

        <!-- Spring framework -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${spring-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${spring-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${spring-version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${spring-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-taglibs</artifactId>
            <version>${spring-version}</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.5.8</version>
            <scope>runtime</scope>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.5.8</version>
            <scope>runtime</scope>
        </dependency>

    </dependencies>

    <build>
        <finalName>MyProject</finalName>

<!--        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins> -->
    </build>
</project> 
```

当我检查 maven 依赖树时，我发现 spring-security-core 和 spring-security-web 下载了 spring aop，asm v3.0.7 这会是一个问题吗？

```
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ MyProject ---
[INFO] com.clinicia.myclinic:MyClinic:war:1.0-SNAPSHOT
[INFO] +- org.springframework.security:spring-security-core:jar:3.1.3.RELEASE:co
mpile
[INFO] |  +- org.springframework:spring-aop:jar:3.0.7.RELEASE:compile
[INFO] |  +- org.springframework:spring-core:jar:3.0.7.RELEASE:compile
[INFO] |  +- aopalliance:aopalliance:jar:1.0:compile
[INFO] |  +- org.springframework:spring-beans:jar:3.0.7.RELEASE:compile
[INFO] |  \- org.springframework:spring-expression:jar:3.0.7.RELEASE:compile
[INFO] +- org.springframework.security:spring-security-web:jar:3.1.3.RELEASE:com
pile
[INFO] |  +- org.springframework:spring-jdbc:jar:3.0.7.RELEASE:compile
[INFO] |  +- org.springframework:spring-web:jar:3.0.7.RELEASE:compile
[INFO] |  \- org.springframework:spring-tx:jar:3.0.7.RELEASE:compile
[INFO] +- org.springframework.security:spring-security-config:jar:3.1.3.RELEASE:
compile
[INFO] +- org.springframework:spring-context:jar:3.1.3.RELEASE:compile
[INFO] |  \- org.springframework:spring-asm:jar:3.1.3.RELEASE:compile
[INFO] +- org.slf4j:slf4j-api:jar:1.5.8:runtime
[INFO] \- org.slf4j:slf4j-log4j12:jar:1.5.8:runtime
[INFO]    \- log4j:log4j:jar:1.2.14:runtime 
```

我是spring security的新手，感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:15:04.940

`NoSuchFieldError`几乎总是表示版本不兼容。

确保您的类路径中没有不同版本的 Spring 库。如果您使用 Maven，请运行`mvn dependency:tree`并检查其输出是否存在可能的不兼容性。

# railo - 您在基于标签的命令上使用 cfscript 的范围有多大？

> ID：16001650
> 
> 赞同：1
> 
> 时间：2013-04-14T16:54:40.303
> 
> 标签：railo, cfml

现在我们在 cf10 服务器上，我正在用我所有的宠物项目探索 cfscript 语法。

例如：我所有页面的基本模板可能会更改为：

```
<cfinclude template="/Inc/html.cfm">
<cfinclude template="/Inc/body.cfm">
Hello World!
<cfinclude template="/Inc/foot.cfm">
<cfinclude template="/Inc/End.cfm"> 
```

到：

```
<cfscript>
include "/Inc/html.cfm";
include "/Inc/body.cfm";
WriteOutput("Hello World!");
include "/Inc/foot.cfm";
include "/Inc/End.cfm";
</cfscript> 
```

所以我担心我不知道的事情。例如，如果我开始为所有新作品使用脚本语法，我是否会限制自己将来不使用 Railo？

到目前为止，我只使用过 Adob​​e ColdFusion 和 Microsoft SQL Server，但几个月后我将在[iccm.org](http://www.iccm.org/)上发表演讲，我相信观众会想知道 Railo 和 mySQL 作为替代品.

如果我开始使用 cfscript 语法，我会把自己画到哪个角落？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:41:01.420

不，您并没有限制自己将来不使用 Railo。我在 Railo 的 CFScript 实现中遇到了极少数与 ColdFusion 不兼容的问题——我能想到的一个微不足道的问题。

Railo 总体上力求与 ColdFusion 与他们的 CFML 的交叉兼容性，并且他们通常只会在 ColdFusion 方式在任何明智的测量此类事情时*出现错误*时（通过设计）转向。但即便如此，Railo 总体上还是采取了一种“一刀切”的方法。

由于 CFScript 的内容并不多，而且控制结构的功能是相当“预先确定的”（例如：对`include`语句的工作方式只有一种解释），我认为这不会成为问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:00:10.660

Railo 的 CFscript 版本更先进/更发达，对开发人员更友好且易于使用，但它也可以很好地运行你的 Coldfusion cfscript，如果有任何问题，它会很小。我建议只在 cfc 中使用 cfscript，并且在 .cfm 文件中使用 cfml，这就是它看起来不错的地方，其他语言尝试各种模板引擎，例如。php 有 twig、smarty 等，但是 cfml 在视图中非常完美，但是它在 cfcs 中很讨厌，一旦你习惯于一直编写纯粹的 cfscript，你不仅会发现 cfml 令人厌恶，你还可以在其他语言之间跳转很多更轻松

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T13:25:27.697

我认为您在使用`cfscript`Adob​​e ColdFusion 和 Railo 时不会遇到问题。正如亚当所说，Railo 试图尽可能地与 Adob​​e 保持兼容。但是，我的问题`cfscript`是并非所有标签都受支持。因此，一旦您需要使用其中一个不受支持的标签，您就必须跳出`cfscript`，编写基于标签的代码，然后重新开始`cfscript`。如果您必须这样做，它很实用但很难看。我一直在尝试在`cfc`s 中编写越来越多的代码，并且通常可以使用`cfscript`语法编写这些代码。但是，我发现在我的主模板中，我仍然更频繁地使用基于标签的语法。

这是一个页面，列出了Adob​​e `cfscript`ColdFusion 支持的标签：[CFScript 支持什么](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSe9cbe5cf462523a02805926a1237efcbfd5-7ffe.html)

# validation - 如何在 Rails 3.1 中验证失败时国际化 (I18n) 通用错误消息？

> ID：16001651
> 
> 赞同：1
> 
> 时间：2013-04-14T16:54:40.447
> 
> 标签：validation, ruby-on-rails-3.1, nested-forms

我希望能够提供国际化、有用的错误消息。

我有一个用于嵌套表单提交的通用错误消息部分视图渲染

```
 # _error_messages.html.erb - Fragment
    ...

    <strong><%= t('errors.template.body') %> </strong>       
    <ul>
      <% object.errors.full_messages.each do |msg| %>
        <li><%= msg %> </li>
      <% end %>
    </ul>

    ... 
```

我收到了国际化的正文消息，但是，尽管进行了多次 yaml 迭代，但我无法弄清楚如何替换该属性，或者更具体地说，该模型字段（即 validates_presence_of :name）验证的“：空白”错误。

这是我的 yaml 中的一个片段

```
en:
  errors: &errors
    format: ! '%{attribute} -- %{message}'
      messages:
        accepted: must be accepted
        blank: must not be blank
        body: ! 'There were problems with the following fields:'

    activemodel:
        attributes:
          family_wizard: 
            children: kids 
```

我这样写了yaml，因为当我检查传递给部分的错误对象时，我将孩子的姓名字段留空（：validates_presence_of：name）看起来像这样：

```
#<ActiveModel::Errors:0x007111111C111111 @base=#<FamilyWizard id: nil, ...>, 
    @messages {:children=>["must not be blank"]}> 
```

但我能得到的唯一错误信息是：

**以下字段存在问题：**

*   孩子——不能为空

理想的解决方案错误消息如下所示：

**以下字段存在问题：**

*   **孩子**——**名字**不能为空

这个 Stack Overflow 问题（[How to localize a generic error messages partial in Rails 3.2.3?](https://stackoverflow.com/questions/14536518/how-to-localize-a-generic-error-messages-partial-in-rails-3-2-3)）在正确的轨道上，但它缺少我想要的 activemodel/activerecord 验证部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:57:41.567

这个问题的答案是因为我的 yaml 文件有两个问题，所以我的范围有误。错误的间距和错误的标签。它应该是 activerecord 而不是 activemodel，并且 activerecord 范围应该与树中的错误范围处于同一级别。

要翻译模型的属性（即，Children to Kids），yaml 看起来像这样：

```
en:
  errors: &errors
    format: ! '%{attribute} -- %{message}'
      messages:
        accepted: must be accepted
        blank: must not be blank
        body: ! 'There were problems with the following fields:'

  activerecord:
    attributes:
      family_wizard: 
        children: kids 
```

帮助我得到答案的两个资源是：

*   [如何翻译错误消息中的表单字段名称？](http://www.ruby-forum.com/topic/803246)
*   [Rails 3.2 的最小 I18n](http://rubylearning.com/blog/2012/07/24/minimal-i18n-with-rails-3-2/)

# c - 我如何使用套接字通过互联网连接到我的朋友？

> ID：16001663
> 
> 赞同：0
> 
> 时间：2013-04-14T16:55:26.330
> 
> 标签：c, sockets, tcp, network-programming

我已经用 C 语言编写了游戏，带有在 LAN 上完美运行的套接字，但是我如何通过互联网连接到我的朋友？我们的ip地址。是动态的，但即便如此（我可以用当前值重新编译程序并给他），我应该输入什么？主机名给出 127.0.0.1 或 192.168。*.* ，两者都是正确且绝对合乎逻辑的，有人可以帮助我并说出任何相互连接的方法吗？PS UNIX 平台；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:59:21.973

首先，您要查找的 IP 是您的公共 IP。要找到它，只需从两个位置谷歌“我的 ip 是什么”，这将为您提供两个 IP。其次，您需要配置路由器以执行端口转发。

# google-api - 访问 Google API 时授权无效

> ID：16001668
> 
> 赞同：7
> 
> 时间：2013-04-14T16:55:52.460
> 
> 标签：google-api, google-api-java-client, google-oauth

我正在尝试使用“服务帐户”授权访问来调用任何 Google API。我已经下载了“.pk2”文件并在 Google API 控制台的“服务”选项卡中激活了“URL Shortener API”。每当我尝试调用任何 API（URL 缩短器或 Adsense）时。我有以下异常 -

```
com.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request
{
  "error" : "invalid_grant"
}
    at com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:105)
    at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:303)
    at com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:323)
    at com.google.api.client.googleapis.auth.oauth2.GoogleCredential.executeRefreshToken(GoogleCredential.java:345)
    at com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:526)
    at com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:287)
    at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:836)
    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:412)
    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:345)
    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:463) 
```

以下是代码片段 -

```
 HttpTransport HTTP_TRANSPORT = new NetHttpTransport();
    JsonFactory JSON_FACTORY = new JacksonFactory();
    File privateKey = new File(ReportAdsense.class.getResource("mykey.p12").toURI());
    GoogleCredential credential = new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)
            .setJsonFactory(JSON_FACTORY)
            .setServiceAccountId("my_valid_account_id@developer.gserviceaccount.com")
            .setServiceAccountScopes(UrlshortenerScopes.URLSHORTENER)
            .setServiceAccountPrivateKeyFromP12File(privateKey)
            .build();
     Urlshortener service = new Urlshortener.Builder(new NetHttpTransport(), JSON_FACTORY, null).setHttpRequestInitializer(credential).build();
     UrlHistory history = service.url().list().execute(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T18:58:17.497

首先，“服务帐户”不适用于 Adsense，因为它需要用户授权。因此，对于 Adsense，您应该使用 Oauth 2.0。当您第一次使用 URL 获得授权时`https://accounts.google.com/o/oauth2/token`，复制粘贴并硬编码您的刷新令牌。您可以使用它来获取访问令牌，指定 client_id、client_secret 和您的 refresh_token 来获取新的访问令牌。现在可以在您的应用程序中使用访问令牌。

关于您的错误，我遇到了类似的问题并花了很多时间来解决它。首先，确保您使用的是有效的 ServiceAccountId - 它应该指向以“developer.gserviceaccount.com”结尾的电子邮件。确保您在 Google Console API 中指定了帐户范围和激活的服务。

我通过在我的机器上同步系统时钟解决了这个问题。

有很多类似错误的主题没有答案。甚至有人说，有时它有效，有时它返回无效授权。它可以在一台机器上工作而在另一台机器上失败。我不知道这是否是系统时钟问题，但我会避免使用服务帐户 API，因为看起来有错误和支持对你没有帮助

# vb.net - 将文件复制回特定文件夹

> ID：16001670
> 
> 赞同：0
> 
> 时间：2013-04-14T16:55:55.517
> 
> 标签：vb.net, visual-studio-2010, filesystems

该程序从今天已修改的文件夹中提取文件，并将文件放入另一个文件夹后，批处理文件会删除该源文件夹中其余未修改的文件。

我的程序应该做的最后一件事是从单独的文件夹中复制文件，然后将它们放回该源文件夹中。

但是我的程序只提取修改后的文件，删除该文件夹中的其余文件，但是当我运行程序以复制并将新文件放入源文件夹时，它只是不这样做。有谁知道为什么？

```
Imports System.IO

Public Class frmExtractionator

    '  Dim txtFiles1 As Control
    Dim sourceDirectory As String = "F:\CopierFolderforTestDriveCapstone"
    Dim archiveDirectory As String = "F:\FilesExtracted"
    Dim originalDirectory As String = "F:\OriginalTestFiles"

    Private Sub btnStart_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnStart.Click

        Try

            Dim txtFiles = Directory.EnumerateFiles(sourceDirectory)

            If (Not System.IO.Directory.Exists(archiveDirectory)) Then
                System.IO.Directory.CreateDirectory(archiveDirectory)
            End If

            For Each currentFileLoc As String In txtFiles

                Dim fileName = currentFileLoc.Substring(sourceDirectory.Length + 1)

                If (IO.File.GetLastWriteTime(currentFileLoc).ToString("MM/dd/yyyy") = DateTime.Now.ToString("MM/dd/yyyy")) Then
                    MessageBox.Show(currentFileLoc & " moved", "Moved Succesfully")
                    File.Move(currentFileLoc, Path.Combine(archiveDirectory, fileName))

                End If

            Next
        Catch eT As Exception
            Console.WriteLine(eT.Message)
        End Try

        System.Diagnostics.Process.Start("F:\poop.bat")

        Try
            Dim txtFiles2 = Directory.EnumerateFiles(originalDirectory)

            For Each currentFileLoc2 As String In txtFiles2

                Dim fileName = currentFileLoc2.Substring(originalDirectory.Length + 1)

                File.Move(currentFileLoc2, Path.Combine(sourceDirectory, fileName))

            Next
        Catch eT As Exception
            Console.WriteLine(eT.Message)
        End Try
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:24:53.950

改变

```
Dim fileName = currentFileLoc2.Substring(originalDirectory.Length + 1) 
```

至

```
Dim FileName = IO.Path.GetFileName(currentFileLoc2) 
```

# c - 如何将这部分代码从汇编转换为C语言

> ID：16001674
> 
> 赞同：0
> 
> 时间：2013-04-14T16:56:24.990
> 
> 标签：c, assembly, pic, microchip

我在将微芯片 pic 的汇编代码转换为 C 语言时遇到问题，它是两部分，第一部分是

```
movlw HIGH RevTable ; get MS byte of table 
```

桌子是

```
RevTable
        retlw B’00000000’ ; invalid
        retlw B’00100001’ ; phase /6
        retlw B’00000110’ ; phase /4
        retlw B’00100100’ ; phase /5
        retlw B’00011000’ ; phase /2
        retlw B’00001001’ ; phase /1
        retlw B’00010010’ ; phase /3
        retlw B’00000000’ ; invalid 
```

那是什么意思？我不明白

第二个问题是

```
incfsz ADC,w ; if ADC is 0xFF we’re at full speed - skip timer add 
```

怎么可能在 C 中，非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T08:16:46.457

您的代码示例不足，因此我无法告诉您所有信息：

```
movlw HIGH RevTable ; get MS byte of table 
```

这只是计算表跳转的一部分。您的 asm 代码必须类似于：

```
movlw HIGH RevTable
movwf PCLATH            ;set high byte RevTable address
movf  TableIndex, w
movwf PCL               ;set low byte RevTable address this is computed table jump
;The return value is in wreg so one from RevTable table depend of TableIndex value 
```

在 c 中类似于：

```
char RevTable[] = {'0','6','4','5','2','1','3','0'};

char TableIndex = 1;
char ValueFromTable;

ValueFromTable = RevTable[TableIndex] ; 
```

第二部分代码：

```
incfsz ADC,w ; if ADC is 0xFF we’re at full speed - skip timer add 
```

这里缺少执行或不依赖于 ADC 值的第二条 asm 指令，例如：

```
 if (ADC != 255) ... 
```

# android - 传说中的achartengine和隐藏系列

> ID：16001676
> 
> 赞同：5
> 
> 时间：2013-04-14T16:56:37.157
> 
> 标签：android, achartengine

这可以在图例图表中隐藏系列（标题和线条），图表上的 lise 仍然可见？我只想在图例中隐藏数据，我想在图表上看到我的系列。我不想隐藏传说中的所有系列，只有少数。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-16T20:26:47.917

您可以通过这种方式隐藏一些图例项：

```
seriesRenderer.setShowLegendItem(false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-28T09:55:56.543

```
mRenderer.setShowLegend(false); 
```

# c - 有效计算 2 < x 的最大幂

> ID：16001683
> 
> 赞同：0
> 
> 时间：2013-04-14T16:58:31.323
> 
> 标签：c, math

我需要计算 2 的最大幂，它 < 一个整数值，x

目前我正在使用：

```
#define log2(x) log(x)/log(2)
#define round(x) (int)(x+0.5)

x = round(pow(2,(ceil(log2(n))-1))); 
```

这是一个性能关键的功能

是否有计算 x 的计算效率更高的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:09:04.457

您实际上是在寻找数字中最高的非零位。许多处理器为此内置了指令，而这些指令又被许多编译器公开。例如，在 GCC 中，我会查看[`__builtin_clz`](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)，

> 返回 中前导 0 位的数量`x`，从最高有效位位置开始。

与`sizeof(int) * CHAR_BIT`移位一起，您可以使用它来计算相应的纯二次幂整数。还有一个长整数版本。

（CPU 指令大概称为“CLZ”（计算前导零），以防您需要为其他编译器查找它。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T17:32:48.947

基于Bit Twiddling Hacks：在Sean Eron Anderson[的 O(lg(N)) 运算中找到 N 位整数的以 2 为底的对数（代码由 Eric Cole 和 Andrew Shapira 提供）：](http://graphics.stanford.edu/~seander/bithacks.html#IntegerLog)

```
unsigned int highest_bit (uint32_t v) {
    unsigned int r = 0, s;
    s = (v > 0xFFFF) << 4; v >>= s; r |= s;
    s = (v > 0xFF  ) << 3; v >>= s; r |= s;
    s = (v > 0xF   ) << 2; v >>= s; r |= s;
    s = (v > 0x3   ) << 1; v >>= s; r |= s;
    return r | (v >> 1);
} 
```

这将返回输入最高位的索引；不大于输入的 2 的最大幂是 then `1 << highest_bit(x)`，因此严格小于输入的 2 的最大幂是简单的`1 << highest_bit(x-1)`。

对于 64 位输入，只需将输入类型更改为`uint64_t`并在函数开头的变量声明之后添加以下额外行：

```
 s = (v > 0xFFFFFFFF) << 8; v >>= s; r |= s; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T17:35:19.067

我的 c-libutl 库中有一个整数 log2 函数（如果有人感兴趣，则托管在 googlecode 上）

```
/*
** Integer log base 2 of a 32 bits integer values.
**   llog2(0) == llog2(1) == 0
*/
unsigned short llog2(unsigned long x)
{
  long l = 0;

  x &= 0xFFFFFFFF /* just in case 'long' is more than 32bit */

  if (x==0) return 0;

  #ifndef UTL_NOASM
    #if defined(__POCC__) || defined(_MSC_VER) || defined (__WATCOMC__)
        /* Pelles C            MS Visual C++         OpenWatcom */
      __asm { mov eax, [x]
              bsr ecx, eax
              mov  l, ecx
      }
    #elif defined(__GNUC__)
      l = (unsigned short) ((sizeof(long)*8 -1) - __builtin_clzl(x));
    #else
      #define UTL_NOASM
    #endif  
  #endif

  #ifdef UTL_NOASM  /* Make a binary search.*/
    if (x & 0xFFFF0000) {l += 16; x >>= 16;} /* 11111111111111110000000000000000 */
    if (x & 0xFF00)     {l += 8;  x >>= 8 ;} /* 1111111100000000*/
    if (x & 0xF0)       {l += 4;  x >>= 4 ;} /* 11110000*/
    if (x & 0xC)        {l += 2;  x >>= 2 ;} /* 1100 */
    if (x & 2)          {l += 1;  }          /* 10 */
    return l;
  #endif

  return (unsigned short)l;
} 
```

然后你可以简单地计算

```
 (1 << llog2(x)) 
```

计算小于 x 的 2 的最大幂。小心0！你应该分开处理。

它使用汇编代码，但也可以通过定义 UTL_NOASM 符号强制使用纯 C 代码。

该代码当时已经过测试，但我已经有一段时间没有使用它了，我不能说它是否在 64 位环境中运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T17:05:46.930

移动位很可能会快得多。可能一些对位的二等分方法可以使其更快。很好的锻炼来改善。

```
#include <stdio.h>

int closestPow2(int x)
{
        int     p;

        if (x <= 1) return 0; /* No such power exists */

        x--;   /* Account for exact powers of 2, then one power less must be returned */
        for (p = 0; x > 0; p++)
        {
                x >>= 1;
        }

        return 1<<(p-1);
}

int main(void)
{
        printf("%x\n", closestPow2(0x7FFFFFFF));
        return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T17:08:39.920

左右移位运算符做得最好

```
int MaxPowerOf2(int x)
{
   int out = 1;
   while(x > 1) { x>>1; out<<1;}
   return out;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-14T17:11:45.437

```
#include <math.h>  

double greatestPower( double x )  
{  
    return floor(log( x ) / log( 2 ));  
} 
```

这是真的，因为`log`在单调递增函数中。

# jquery - 使用 HTML5 颜色输入操作 CSS

> ID：16001685
> 
> 赞同：2
> 
> 时间：2013-04-14T16:58:44.053
> 
> 标签：jquery, css, html, input

我正在尝试使用 jQuery 和 HTML5 颜色输入类型让用户设置特定 div 的文本颜色：

```
<script>
$('#color').change(function() {
    $('#output').css('color', "$('#color').val()");
});
</script>

<div id="output">
     <h1>Some Text</h1>
</div>
<label for="color">Color</label><input id="color" type="color" value="#ffffff" /> 
```

上面的代码似乎没有做任何事情，但也没有抛出任何 Javascript 错误。我的猜测是 .change() 可能是错误的使用方法，但我也没有成功使用任何其他方法。有没有人以这种方式成功使用这种输入类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T17:09:18.243

使用.on，我认为这是因为该颜色选择器是动态创建的：

```
$("#color").on("change",function(){
    $("#output").css("color",$("#color").val());
}); 
```

小提琴：http: [//jsfiddle.net/feL6s/](http://jsfiddle.net/feL6s/)

# mp3 - 从 mp3 文件中获取哈希码

> ID：16001686
> 
> 赞同：0
> 
> 时间：2013-04-14T16:58:45.230
> 
> 标签：mp3, hashcode

如何从具有此属性的 mp3 文件中获取哈希码：

比特率高于 8 的相同 mp3 文件的结果之间没有区别。

Id3 标签不影响结果。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:10:58.240

我不认为来自同一个音频文件的两个不同编码的比特率可以通过散列机制等同起来。您将需要更复杂的技术，甚至可能不是确定性的（想想启发式）。

虽然这是一个否定的答案，但也许这里有人会指出一些更简单的方法。
而且，他们证明我的看法是不正确的，我很高兴在这里增加我的理解`:-)`

# java - 检查 3 个标准

> ID：16001687
> 
> 赞同：1
> 
> 时间：2013-04-14T16:58:49.763
> 
> 标签：java, exception, char, boolean

我正在尝试检查 3 个条件以验证车牌号。但我似乎无法检查所有 3 个条件。长度必须在 4 -7 之间。前 3 个字符必须来自 a - z。第四个字符以后必须是数字 '0' - '9'。

我的问题的下一部分有问题。我需要实现计算 CheckDigit 方法，我试图将它添加到一个数组中以接受我的论证，以便我执行逐步指令来计算校验位。

下面是步骤，

1.  取第二个和第三个字符并转换为与字母对应的数字。例如。A 是 1 B 是 2。

2.  数字前面加 0 表示数字少 4 位。例如。SBA123 需要追加到 0123

3.  将步骤 1 和 2 中的每个数字乘以 14、2、12、2、11、1

4.  总结步骤 3 中的数字

5.  将步骤 4 中的 sum 除以 19 并取余数并在表中找到校验位。

任何帮助对我来说都是很好的开始。下面是我的代码我有改变，

请指出我的错误。

```
public static void validateCarPlate(String y)throws InvalidCarPlateException{
String rex = "[a-zA-Z]{3}[0-9]{1,4}";
if(y.matches(rex)){
    computeCheckDigit(y);
}else{
    throw new InvalidCarPlateException();
}
}
public static void computeCheckDigit(String x){
int [] arr = Integer.parseInt(x);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:07:29.147

在这里使用**[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)**是理想的。正则表达式是一种看起来很有趣、结构良好的字符串，它代表一个**[有限状态机](http://en.wikipedia.org/wiki/Finite_state_automaton)**，可以识别某些类型的字符串是否匹配模式。学习正则表达式将极大地改进您的字符串匹配/验证过程。

这是您应该使用的正则*表达式：*`^[a-zA-Z]{3}[0-9]{1,4}$`

让我们分解一下这个看起来很有趣的字符串的含义：

*   `^`: 这是字符串的开头（前面没有字符）

*   `[a-zA-Z]`: 字母字符

*   `{3}`: 正好 3 个字母字符

*   `[0-9]`: 然后是数字字符

*   `{1,4}`：这些数字字符中的 1 到 4 个之间（包括）

*   `$`：这是字符串的结尾（没有剩余字符）

一个示例用法：

```
String myStr = "abc123";
System.out.println(isValidString(myStr));

public boolean isValidString(String input) {
  String regex = "^[a-zA-Z]{3}[0-9]{1,4}$";
  if(input==null) { return false; }
  return input.trim().matches(regex);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:08:20.020

你可以很容易地使用[正则表达式来做到这一点，表达式](http://en.wikipedia.org/wiki/Regular_expression)

```
^[a-z]{3}[0-9]{1,4}$ 
```

会工作。

这是一个例子

```
public boolean validatePlate(final String string) {
    final Matcher matcher = Pattern.compile("^[a-z]{3}[0-9]{1,4}$").matcher(string);
    return matcher.matches();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T17:21:08.357

您始终在测试字符串的第一个字符 (charAt(0))，而不是使用您设置的循环计数器 i 的值。此外，您没有对数字进行测试。

您还可以查看“String.indexOf()”；它可以让您不必遍历（或初始化）一个字符数组。有一个字符串“abcdefg...”（和另一个“01234...”）。

您还可以查看方法`Character.isLetter()`并`Character.isDigit()`取消数组和字符串处理的类似数组。

至于正则表达式，我总是喜欢那个老笑话：“假设你有一个问题，你决定用正则表达式解决它。现在你有两个问题......”当然它们很有用，但几乎没有那么多正如许多人认为的那样。并不是所有可以用他们解决的事情都应该用他们来解决。如果您有兴趣，这是一个很好的简单正则表达式问题入门。如果你不是，不要觉得你的解决方案缺少某种方式。

# php - 用于十六进制字符串表示的本机 PHP 函数？

> ID：16001690
> 
> 赞同：2
> 
> 时间：2013-04-14T16:58:58.503
> 
> 标签：php

是否有一个*本机*PHP 函数用于将字符串转换为其 HEX 表示形式，然后可以将其`eval()`作为字符串，例如：

```
"ABC" => "\x41\x42\x43" 
```

我知道它可以通过几个步骤来完成，我只是想知道我是否不必要地使可以用单个本机函数完成的事情复杂化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-06T17:14:23.510

没有本机函数，但您可以使用`hex2bin`eval 十六进制的 PHP 代码，例如

```
eval(hex2bin("6563686f20706928293b")); # Output: 3.14159265359
eval(hex2bin(bin2hex("echo pi();")));  # Behind the scenes. 
```

或者您可以调用名称为十六进制字符串的函数：

```
$ echo '<?$_=hex2bin(7069);die($_());' | php # 7069 = pi
3.14159265359 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:06:40.007

你为什么不试试这样的东西？

```
function strtohex($string) {
    if (!empty($string)) {
        $output = null;
        $count = strlen($string, "UTF-8");

        for ($i = 0; $i < $count; $i++) {
            $output .= dechex(ord($string[$i]));
        }

        return $output;
    }
} 
```

对于单行，我能想到的唯一替代方法是`bin2hex()`函数，它是 PHP 中的原生函数，并且提供相同的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T17:12:15.227

```
$n = 1234;
echo printf("%x", $n); //should return the hexadecimal format of the number 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T17:32:45.870

没有内置的 PHP 函数可以实现相同的结果，但是使用一些 PHP-Fu，您可以在一行中完成：

```
$str = 'ABC';
$str = '\x'.implode('\x', str_split(bin2hex($str), 2));
echo $str; // \x41\x42\x43 
```

[PHP 文档中](http://www.php.net/manual/en/function.bin2hex.php#47663)还有一段代码给出了完全相同的结果：

```
$str = 'ABC';
$field=bin2hex($str);
$field=chunk_split($field,2,"\\x");
$field= "\\x" . substr($field,0,-2);
echo $field; // \x41\x42\x43 
```

# javascript - 带有参数的javascript事件监听器

> ID：16001698
> 
> 赞同：0
> 
> 时间：2013-04-14T16:59:31.223
> 
> 标签：javascript, events, anonymous-function

我有一个简单的事件监听器：

```
function listen(evnt, elem, func) {
    if (elem.addEventListener)  // W3C DOM
        elem.addEventListener(evnt,func,false);
    else if (elem.attachEvent) { // IE DOM
         var r = elem.attachEvent("on"+evnt, func);
    return r;
    }
    return false;
} 
```

我想用参数设置监听器。（该参数不是由事件设置的，它是特定侦听器的一部分。

我所做的并且似乎有效的是：

```
function setlistener (param){

 listen ('custom event', document,
  function (e){
     run_func_with_param(param);
    }
  );
} 
```

但我不明白它是否正确，因为在触发事件时不应该定义参数。

我的问题是 - 每次调用 run_func_with_param 的正确方法是在 setlistener 中为它设置的参数吗？换句话说，当作为事件的结果调用 run_func_with_param 时，是否会记住 param 并将其设置为正确的值？（同一事件将有多个具有不同参数的侦听器）。

注意：请不要使用 jQuery/其他库。在这种情况下，我使用的是自定义事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:01:50.843

当您使用匿名函数时，来自父作用域的参数和局部变量在匿名函数中仍然可用。

因此，您的参数命名`param`在传递给的匿名函数中可用`listen()`。它不会传递给那个函数——它只是可以直接从父作用域获得。

这是您的函数，注释中有一些注释：

```
function setlistener (param){
    // param is available here as an argument to setlistener
    // as a normal function argument
    listen ('custom event', document, function (e) {
        // param is still available here directly from the parent scope
        //     in this anonymous function.
        // This is one advantage of using anonymous functions.
        if (e.data.back_button==false){
          run_func_with_param(param);
        }
    });
} 
```

# php - if then conflicts php

> ID：16001702
> 
> 赞同：-4
> 
> 时间：2013-04-14T16:59:50.620
> 
> 标签：php, scripting

I want to do a quick `if-then` to echo the `s` if it has more than 1 hour. The variables are already assigned if I were to do it on the next line. Any kind of help I can on this is greatly appreciated.

```
$img3['tdiff'] = $img3['tdiff']." Hour".if($img3['tdiff']>1) 
{ 
    echo "s";
}; 
```

I pretty much want to add the `s` if it has more than one hour... Please help me if you can, and thank you in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:02:11.837

使用三元运算符：`?:`

```
$img3['tdiff'] = $img3['tdiff'] . " Hour" . ( $img3['tdiff'] > 1 ? "s" : "" ); 
```

虽然在这种情况下你会想要使用复数库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-14T17:03:15.037

```
if($img3['tdiff'] > 1) {
    $s = "s";
} else {
    $s = "";
}
$img3['tdiff'] = $img3['tdiff']. " Hour". $s; 
```

编辑：添加了一个 else 子句以避免未定义的变量

# python - Flask：会话数据已设置但无法检索

> ID：16001705
> 
> 赞同：1
> 
> 时间：2013-04-14T17:00:09.087
> 
> 标签：python, session, curl, flask, session-cookies

我可以设置会话数据/json"

```
me@air9:28:18 ⮀ ~ ⮀ curl -v -X POST http://127.0.0.1:5000 -d '{"email": "user@email.com", "password": "p"}' -H "Content-Type: application/json"
* About to connect() to 127.0.0.1 port 5000 (#0)
*   Trying 127.0.0.1...
* connected
* Connected to 127.0.0.1 (127.0.0.1) port 5000 (#0)
> POST / HTTP/1.1
> User-Agent: curl/7.27.0
> Host: 127.0.0.1:5000
> Accept: */*
> Content-Type: application/json
> Content-Length: 44
>
* upload completely sent off: 44 out of 44 bytes
* HTTP 1.0, assume close after body
< HTTP/1.0 200 OK
< Content-Type: application/json
< Content-Length: 9
< Set-Cookie: session="DRRrrffY/WGHU80TJ++KY5UaoYU=?USER_TOKEN=UycuZUp3RndjRVJ3Q0FJQk1CZWVJY1pRVVNzSlpNSEo5cF9DZGw5Q1RaSGFUZU9PNTBObVp3U3lxanMyTzU2U3VtaEM4aXBKbXZtdXFNcExDVERiYVBzOUtIMF9maUJGQ0UudHA0NEsyd3ZxRWREaHlGQmw5cUNiclpVZnNFJwpwMQou"; Path=/; HttpOnly
< Server: Werkzeug/0.8.3 Python/2.7.2
< Date: Sun, 14 Apr 2013 16:28:32 GMT
<
* Closing connection #0
"success"% 
```

这是检索会话数据的代码

```
 try:
        print session
        user = load_token(session['USER_TOKEN'])
    except ValueError:
        return redirect(url_for('/'))
    except:
        print repr(sys.exc_info()) 
```

当我用 curl 击中以下内容时

```
curl -v -b "session='DRRrrffY/WGHU80TJ++KY5UaoYU=?USER_TOKEN=UycuZUp3RndjRVJ3Q0FJQk1CZWVJY1pRVVNzSlpNSEo5cF9DZGw5Q1RaSGFUZU9PNTBObVp3U3lxanMyTzU2U3VtaEM4aXBKbXZtdXFNcExDVERiYVBzOUtIMF9maUJGQ0UudHA0NEsyd3ZxRWREaHlGQmw5cUNiclpVZnNFJwpwMQou'" http://127.0.0.1:5000/users/uuid/transactions 
```

服务器日志打印

```
<SecureCookieSession {}>
(<type 'exceptions.KeyError'>, KeyError('USER_TOKEN',), <traceback object at 0x109994248>) 
```

我做错了什么？

如何取回会话数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:16:36.167

我想到了。我所要做的就是在第一次登录时将会话 cookie 保存在一个文件中

```
curl -v -X POST http://127.0.0.1:5000 -d '{"email": "user@email.com", "password": "p"}' -H "Content-Type: application/json" -c cookies.txt* About to connect() to 127.0.0.1 port 5000 (#0)
*   Trying 127.0.0.1...
* connected
* Connected to 127.0.0.1 (127.0.0.1) port 5000 (#0)
> POST / HTTP/1.1
> User-Agent: curl/7.27.0
> Host: 127.0.0.1:5000
> Accept: */*
> Content-Type: application/json
> Content-Length: 44
>
* upload completely sent off: 44 out of 44 bytes
* HTTP 1.0, assume close after body
< HTTP/1.0 200 OK
< Content-Type: application/json
< Content-Length: 9
* Added cookie session=""DRRrrffY/WGHU80TJ++KY5UaoYU=?USER_TOKEN=UycuZUp3RndjRVJ3Q0FJQk1CZWVJY1pRVVNzSlpNSEo5cF9DZGw5Q1RaSGFUZU9PNTBObVp3U3lxanMyTzU2U3VtaEM4aXBKbXZtdXFNcExDVERiYVBzOUtIMF9maUJGQ0UudHA0NEsyd3ZxRWREaHlGQmw5cUNiclpVZnNFJwpwMQou"" for domain 127.0.0.1, path /, expire 0
< Set-Cookie: session="DRRrrffY/WGHU80TJ++KY5UaoYU=?USER_TOKEN=UycuZUp3RndjRVJ3Q0FJQk1CZWVJY1pRVVNzSlpNSEo5cF9DZGw5Q1RaSGFUZU9PNTBObVp3U3lxanMyTzU2U3VtaEM4aXBKbXZtdXFNcExDVERiYVBzOUtIMF9maUJGQ0UudHA0NEsyd3ZxRWREaHlGQmw5cUNiclpVZnNFJwpwMQou"; Path=/; HttpOnly
< Server: Werkzeug/0.8.3 Python/2.7.2
< Date: Sun, 14 Apr 2013 17:02:00 GMT
<
* Closing connection #0
"success"% 
```

查看`Added cookie session`将 cookie 数据保存在`cookies.txt`

```
$cat cookies.txt
# Netscape HTTP Cookie File
# http://curl.haxx.se/docs/http-cookies.html
# This file was generated by libcurl! Edit at your own risk.

#HttpOnly_127.0.0.1 FALSE   /   FALSE   0   session "DRRrrffY/WGHU80TJ++KY5UaoYU=?USER_TOKEN=UycuZUp3RndjRVJ3Q0FJQk1CZWVJY1pRVVNzSlpNSEo5cF9DZGw5Q1RaSGFUZU9PNTBObVp3U3lxanMyTzU2U3VtaEM4aXBKbXZtdXFNcExDVERiYVBzOUtIMF9maUJGQ0UudHA0NEsyd3ZxRWREaHlGQmw5cUNiclpVZnNFJwpwMQou" 
```

现在，当我将 cookie 数据发送到服务器时

```
curl -v -b cookies.txt http://127.0.0.1:5000/users/uuid/transactions # see I am sending the file with -b option 
```

我可以看到服务器接收会话数据

```
<SecureCookieSession {'USER_TOKEN': '.eJwFwcERwCAIBMBeeIcZQUSsJZMHJ9p_Cdl9CTZHaTeOO50NmZwSyqjs2O56SumhC8ipJmvmuqMpLCTDbaPs9KH0_fiBFCE.tp44K2wvqEdDhyFBl9qCbrZUfsE'}>
data: [u'b475d234-8f76-4baa-a182-bda3bc662ed2', u'fbb1ed0197a9f502b481a864cbd4e352'] 
```

# android - IPC涉及的应用的UID和App ID

> ID：16001716
> 
> 赞同：1
> 
> 时间：2013-04-14T17:01:00.597
> 
> 标签：android, ipc, android-framework

在操作系统（框架）级别，每当发生 IPC 时，我想知道调用者和被调用者应用程序的 UID 和 APP ID。比如app A调用app B的service，那我怎么知道A和B的UID和APP ID呢？框架的哪个例程处理这个？请注意，我在应用程序级别不需要它们。我实际上想知道处理此问题的操作系统级例程。

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:05:37.770

如果您需要 PID，请使用：

```
int pid = Binder.getCallingPid(); 
```

对于 UID 调用：

```
int uid = Binder.getCallingUid(); 
```

如果您需要知道呼叫用户是谁，请使用：

```
int userId = UserId.getCallingUserId(); 
```

# java - 对 int 和 string 的数组进行排序

> ID：16001719
> 
> 赞同：0
> 
> 时间：2013-04-14T17:01:10.463
> 
> 标签：java, string, sorting

如何对 int[] 数组进行排序，我必须使用它还是可以只使用 java 的内置方法？

```
for (int x = 0; x < days.length - 1; w++) {
            for (short i = 0; i < days.length - 1; i++) {
                if (days[i].(days[i + 1]) > 0) {
                    days = days[i];

                    days[i] = days[i + 1];
                    days[i + 1] = days;

                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:43:27.977

我写了一个片段来对一个简单的字符串数组进行排序。转载如下：

```
int length = winners.length;
        for(int i=0; i<length-1; i++){
            for(int j=0; j<length-i-1; j++){
                if(winners[j].compareTo(winners[j+1]) > 0){
                    //Swap the elements
                    String temp = winners[j];
                    winners[j] = winners[j+1];
                    winners[j+1] = temp;
                }
            }
        }

        for(String winner: winners){
            System.out.println(winner);
        } 
```

这工作正常。如果要忽略大小写，可以使用 compareToIgnoreCase 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:17:40.710

对数组进行排序的最简单方法是`Arrays.sort`：

```
 String[] array = {"c", "a", "b"};
    Arrays.sort(array);
    System.out.println(Arrays.toString(array));
    output -> [a, b, c]

    String[] array = {"2", "1", "3"};
    Arrays.sort(array);
    System.out.println(Arrays.toString(array));
    output -> [1, 2, 3] 
```

同样的过程也适用于数组`ints`（或任何原语）

# counter - change database when clicking an tag

> ID：16001720
> 
> 赞同：0
> 
> 时间：2013-04-14T17:01:14.507
> 
> 标签：counter

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:05:33.180

You're going to want to start by creating a download file, preferably in php, which will accept a file parameter. An example would be "download.php?file=42.txt". From there the file will update the download count, and fetch the file from the uploads folder.

# linux - 加入 2 个单独的文本文件并添加指定文本的脚本

> ID：16001722
> 
> 赞同：-1
> 
> 时间：2013-04-14T17:01:20.440
> 
> 标签：linux, bash, join, text

您好，我想创建一个执行以下操作的 bash 脚本：

我有 2 个文本文件，一个是 adf.ly 链接，另一个是 Recipie 名称

我想创建一个批处理脚本，从每个文本文件中获取每一行并执行以下操作

```
<li><a href="**TEXT FILE 1 ADFLY URL line 1** ">**Recipie name line 1 of txt file**</a></li>

<li><a href="**TEXT FILE 1 ADFLY URL line 2** ">**Recipie name line 2 of txt file**</a></li> 
```

ect ect 并将所有结果保存到另一个名为 LINKS.txt 的文本文件中

有人请帮助或指出我的 linux bash 脚本方向

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:10:15.067

这个 awk 单线器将完成这项工作：

```
 awk 'BEGIN{l="<li><a href=\"%s\">%s</a></li>\n"}NR==FNR{a[NR]=$0;next}{printf l, a[FNR],$0}' file1 file2 
```

更清晰的版本（相同的脚本）：

```
 awk 'BEGIN{l="<li><a href=\"%s\">%s</a></li>\n"}
      NR==FNR{a[NR]=$0;next}
      {printf l, a[FNR],$0}' file1 file2 
```

例子：

```
kent$  seq -f"%g from file1" 7 >file1

kent$  seq -f"%g from file2" 7 >file2                                                                                                                                       

kent$  head file1 file2
==> file1 <==
1 from file1
2 from file1
3 from file1
4 from file1
5 from file1
6 from file1
7 from file1

==> file2 <==
1 from file2
2 from file2
3 from file2
4 from file2
5 from file2
6 from file2
7 from file2

kent$  awk 'BEGIN{l="<li><a href=\"%s\">%s</a></li>\n"};NR==FNR{a[NR]=$0;next}{printf l, a[FNR],$0}' file1 file2
<li><a href="1 from file1">1 from file2</a></li>
<li><a href="2 from file1">2 from file2</a></li>
<li><a href="3 from file1">3 from file2</a></li>
<li><a href="4 from file1">4 from file2</a></li>
<li><a href="5 from file1">5 from file2</a></li>
<li><a href="6 from file1">6 from file2</a></li>
<li><a href="7 from file1">7 from file2</a></li> 
```

**编辑** OP的评论：

如果您只有一个文件：（`foo`这里只是虚拟文本）

```
awk 'BEGIN{l="<li><a href=\"%s\">foo</a></li>\n"}{printf l,$0}' file1 
```

来自同一 file1 示例的输出：

```
<li><a href="1 from file1">foo</a></li>
<li><a href="2 from file1">foo</a></li>
<li><a href="3 from file1">foo</a></li>
<li><a href="4 from file1">foo</a></li>
<li><a href="5 from file1">foo</a></li>
<li><a href="6 from file1">foo</a></li>
<li><a href="7 from file1">foo</a></li> 
```

如果要将输出保存到文件中：

```
awk 'BEGIN{l="<li><a href=\"%s\">foo</a></li>\n"}{printf l,$0}' file1 > newfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:06:08.750

尝试这样做：

```
$ cat file1
aaaa
bbb
ccc

$ cat file2
111
222
333

$ paste file1 file2 | while read a b; do
    printf '<li><a href="file://%s">%s</a></li>\n' "$a" "$b"
done | tee newfile 
```

## 输出

```
<li><a href="file://aaaa">111</a></li>
<li><a href="file://bbb">222</a></li>
<li><a href="file://ccc">333</a></li> 
```

# algorithm - 您应该按什么顺序将一组已知键插入 B-Tree 以获得最小高度？

> ID：16001727
> 
> 赞同：23
> 
> 时间：2013-04-14T17:01:43.310
> 
> 标签：algorithm, data-structures, b-tree

给定固定数量的键或值（存储在数组或某些数据结构中）和 b-tree 的顺序，我们能否确定插入键的顺序以生成空间高效的 b-tree。

为了说明，考虑 3 阶的 b-tree。让键是 {1,2,3,4,5,6,7}。按以下顺序将元素插入树中

```
for(int i=1 ;i<8; ++i)
{
 tree.push(i);  
} 
```

会创建一棵这样的树

```
 4
     2      6
   1  3   5   7 
```

见[http://en.wikipedia.org/wiki/B-tree](http://en.wikipedia.org/wiki/B-tree)

但是以这种方式插入元素

```
flag = true;
for(int i=1,j=7; i<8; ++i,--j)
{
    if(flag)
    {
        tree.push(i);
        flag = false;
    }
    else
    {
        tree.push(j);
        flag = true;
    }   
} 
```

像这样创建一棵树

```
 3 5
1 2  4  6 7 
```

我们可以看到水平下降。

那么有没有一种特殊的方法来确定可以减少空间消耗的插入顺序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-15T02:34:24.257

假设要插入的数据是整数，以下技巧应该适用于大多数有序搜索树`1..n`。

考虑整数键的二进制表示 - 对于 1..7（用点表示零），这是......

```
Bit : 210
  1 : ..1
  2 : .1.
  3 : .11
  4 : 1..
  5 : 1.1
  6 : 11.
  7 : 111 
```

第 2 位更改频率最低，第 0 位更改频率最高。这与我们想要的相反，所以如果我们颠倒这些位的顺序，然后按照这个位颠倒的值的顺序对我们的键进行排序......

```
Bit : 210    Rev
  4 : 1.. -> ..1 : 1
  ------------------
  2 : .1\. -> .1\. : 2
  6 : 11\. -> .11 : 3
  ------------------
  1 : ..1 -> 1.. : 4
  5 : 1.1 -> 1.1 : 5
  3 : .11 -> 11\. : 6
  7 : 111 -> 111 : 7 
```

用不平衡的二叉搜索树来解释这一点是最容易的，它通过添加叶子来增长。第一项是死点——它正是我们想要的根项。然后我们为下一层添加键。最后，我们添加叶子层。在每一步，树都尽可能地平衡，因此即使您碰巧正在构建 AVL 或红黑平衡树，也不应调用重新平衡逻辑。

[**编辑**我刚刚意识到您不需要根据这些位反转值对数据进行排序，以便按该顺序访问键。诀窍是注意位反转是它自己的逆。除了将键映射到位置之外，它还将位置映射到键。因此，如果您从 1..n 循环，您可以使用此位反转值来决定接下来要插入哪个项目 - 第一个插入使用第 4 个项目，第二个插入使用第二个项目，依此类推。一个复杂的问题 - 您必须将 n 向上舍入到小于 2 的幂（7 可以，但使用 15 而不是 8）并且您必须对位反转值进行边界检查。原因是位反转可以将一些界内位置移出界外，反之亦然。]

实际上，对于红黑树，将调用*一些*重新平衡逻辑，但它应该只是重新着色节点 - 而不是重新排列它们。但是，我没有仔细检查，所以不要依赖这个说法。

对于 B 树，树的高度通过添加新根而增长。因此，证明这个工作有点尴尬（它可能需要比 B 树通常需要的更仔细的节点分割），但基本思想是相同的。尽管发生了重新平衡，但由于插入的顺序，它以平衡的方式发生。

这可以推广到任何一组预先知道的键，因为一旦对键进行了排序，您就可以根据该排序顺序分配合适的索引。

* * *

**警告**- 这不是从已知的已排序数据构建完美平衡树的有效方法。

如果您已经对数据进行了排序，并且知道它的大小，则可以在 O(n) 时间内构建一个完美平衡的树。这是一些伪代码...

```
if size is zero, return null
from the size, decide which index should be the (subtree) root
recurse for the left subtree, giving that index as the size (assuming 0 is a valid index)
take the next item to build the (subtree) root
recurse for the right subtree, giving (size - (index + 1)) as the size
add the left and right subtree results as the child pointers
return the new (subtree) root 
```

基本上，这会根据大小决定树的结构并遍历该结构，沿途构建实际的节点。适应 B 树应该不会太难。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-20T05:34:18.327

这就是我将元素添加到 b-tree 的方式。

感谢 Steve314，让我开始使用二进制表示，

给定 n 个要按顺序添加的元素。我们必须将它添加到 m-order b-tree 中。取它们的索引 (1...n) 并将其转换为基数 m。这种插入的主要思想是插入当前具有最高 m-radix 位的数字，并将其保持在树中添加的较小 m-radix 数字之上，尽管节点分裂。

1,2,3.. 是索引，因此您实际上插入了它们指向的数字。

```
For example, order-4 tree
      4       8         12           highest radix bit numbers
1,2,3   5,6,7   9,10,11    13,14,15 
```

现在取决于订单中位数可以是：

*   顺序为偶数 -> 键数为奇数 -> 中位数为中间（中位数）
*   顺序为奇数 -> 键数为偶数 -> 左中位数或右中位数

要提升的中位数（左/右）的选择将决定我应该插入元素的顺序。这必须为 b-tree 修复。

我向桶中的树添加元素。首先，我添加存储桶元素，然后按顺序添加下一个存储桶。如果中值已知，则可以轻松创建存储桶，存储桶大小为 m 阶。

```
I take left median for promotion. Choosing bucket for insertion.
    |  4     |  8      |   12       |    
1,2,|3   5,6,|7   9,10,|11    13,14,|15  
        3       2          1             Order to insert buckets. 
```

*   对于左中值选择，我从右侧开始将桶插入树，对于右中值选择，我从左侧插入桶。选择左中位数，我们首先插入中位数，然后先插入其左侧的元素，然后再插入桶中的其余数字。

例子

```
Bucket median first
12,
Add elements to left
11,12,
Then after all elements inserted it looks like,
|   12       | 
|11    13,14,| 
Then I choose the bucket left to it. And repeat the same process.
Median
     12        
8,11    13,14, 
Add elements to left first
       12        
7,8,11    13,14, 
Adding rest
  8      |   12        
7   9,10,|11    13,14, 
Similarly keep adding all the numbers,
  4     |  8      |   12        
3   5,6,|7   9,10,|11    13,14, 
At the end add numbers left out from buckets.
    |  4     |  8      |   12       |   
1,2,|3   5,6,|7   9,10,|11    13,14,|15 
```

*   对于中位数（甚至顺序 b 树），您只需插入中位数，然后插入桶中的所有数字。

*   对于右中位数，我从左侧添加桶。对于桶中的元素，我首先插入中值，然后插入右元素，然后插入左元素。

在这里，我们添加了最高的 m 基数，在这个过程中，我添加了具有较小 m 基数位的数字，确保最高的 m 基数保持在顶部。这里我只有两个级别，对于更多级别，我按照基数的降序重复相同的过程。

最后一种情况是当剩余元素具有相同的基位并且没有具有较小基位的数字时，只需将它们插入并完成该过程。

我会举一个 3 个级别的例子，但是太长了，无法展示。所以请尝试使用其他参数并判断它是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-22T02:17:11.707

> **那么有没有一种特殊的方法来确定可以减少空间消耗**的插入顺序？

**编辑说明**：由于这个问题很有趣，我尝试用一​​些 Haskell 来改进我的答案。

让我们`k`成为 B-Tree 的 Knuth 顺序和`list`键列表

空间消耗最小化有一个简单的解决方案：

```
-- won't use point free notation to ease haskell newbies
trivial k list = concat $ reverse $ chunksOf (k-1) $ sort list 
```

这种算法将**有效地**产生一个**时间效率低的**B-Tree，左侧不平衡，但**空间**消耗最小。

存在许多非平凡的解决方案，它们的生成效率较低，但显示出更好的查找性能（较低的高度/深度）。如您所知，**这都是关于权衡的**！

一个最小化 B-Tree 深度和空间消耗的简单算法（但它不会**最小化**查找性能！），如下所示

```
-- Sort the list in increasing order and call sortByBTreeSpaceConsumption 
-- with the result
smart k list = sortByBTreeSpaceConsumption k $ sort list

-- Sort list so that inserting in a B-Tree with Knuth order = k 
-- will produce a B-Tree  with minimal space consumption minimal depth 
-- (but not best performance)
sortByBTreeSpaceConsumption :: Ord a => Int -> [a] -> [a]
sortByBTreeSpaceConsumption _ [] = []
sortByBTreeSpaceConsumption k list
    | k - 1 >= numOfItems = list  -- this will be a leaf
    | otherwise = heads ++ tails ++ sortByBTreeSpaceConsumption k remainder
    where requiredLayers = minNumberOfLayersToArrange k list
          numOfItems = length list
          capacityOfInnerLayers = capacityOfBTree k $ requiredLayers - 1
          blockSize = capacityOfInnerLayers + 1 
          blocks = chunksOf blockSize balanced
          heads = map last blocks
          tails = concat $ map (sortByBTreeSpaceConsumption k . init) blocks
          balanced = take (numOfItems - (mod numOfItems blockSize)) list
          remainder = drop (numOfItems - (mod numOfItems blockSize)) list

-- Capacity of a layer n in a B-Tree with Knuth order = k
layerCapacity k 0 = k - 1
layerCapacity k n = k * layerCapacity k (n - 1)

-- Infinite list of capacities of layers in a B-Tree with Knuth order = k
capacitiesOfLayers k = map (layerCapacity k) [0..]

-- Capacity of a B-Tree with Knut order = k and l layers
capacityOfBTree k l = sum $ take l $ capacitiesOfLayers k

-- Infinite list of capacities of B-Trees with Knuth order = k 
-- as the number of layers increases
capacitiesOfBTree k = map (capacityOfBTree k) [1..]

-- compute the minimum number of layers in a B-Tree of Knuth order k 
-- required to store the items in list
minNumberOfLayersToArrange k list = 1 + f k
    where numOfItems = length list
          f = length . takeWhile (< numOfItems) . capacitiesOfBTree 
```

使用这个`smart`函数给定一个`list = [21, 18, 16, 9, 12, 7, 6, 5, 1, 2]`和一个 knuth order = 3 的 B-Tree，我们应该得到`[18, 5, 9, 1, 2, 6, 7, 12, 16, 21]`一个类似的 B-Tree

```
 [18, 21]
             /
      [5 , 9]
     /   |   \
 [1,2] [6,7] [12, 16] 
```

显然，从性能的角度来看，这是次优的，但应该可以接受，因为获得更好的（如下所示）会更加昂贵（计算和经济）：

```
 [7 , 16]
         /   |   \
     [5,6] [9,12] [18, 21]
    /
[1,2] 
```

如果要运行它，请将前面的代码编译到 Main.hs 文件中，并在前置后使用 ghc 进行编译

```
import Data.List (sort)
import Data.List.Split
import System.Environment (getArgs)

main = do
    args <- getArgs
    let knuthOrder = read $ head args
    let keys = (map read $ tail args) :: [Int]
    putStr "smart: "
    putStrLn $ show $ smart knuthOrder keys
    putStr "trivial: "
    putStrLn $ show $ trivial knuthOrder keys 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-13T06:25:41.843

不幸的是，所有的树都表现出它们最坏情况下的运行时间，并且当数据以这样的递增顺序输入时需要严格的平衡技术。二叉树很快变成链表等。

对于典型的 B-Tree 用例（数据库、文件系统等），您通常可以指望您的数据自然分布得更加分散，从而生成更像您的第二个示例的树。

虽然如果它真的是一个问题，你可以散列每个键，保证更广泛的值分布。

```
for( i=1; i<8; ++i )
    tree.push(hash(i)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-15T14:15:46.597

要使用 Insert() 作为黑盒来构建特定的 B 树，请向后工作。给定一个非空的 B 树，找到一个节点，其子节点数超过最小数量，并且尽可能靠近叶子节点。根被认为具有最小值 0，因此始终存在具有最小子节点数的节点。从此节点中删除要添加到 Insert() 调用列表的值。朝着叶子工作，合并子树。

例如，给定 2-3 树

```
 8
   4       c
 2   6   a   e
1 3 5 7 9 b d f, 
```

我们选择8并进行合并以获得前任

```
 4      c
 2   6  a   e
1 3 5 79 b d f. 
```

然后我们选择9。

```
 4     c
 2   6 a   e
1 3 5 7 b d f 
```

然后一个。

```
 4    c
 2    6    e
1 3  5 7b d f 
```

然后 B.

```
 4   c
 2   6   e
1 3 5 7 d f 
```

然后 C.

```
 4
 2   6  e
1 3 5 7d f 
```

等等。

# python - 艰难地学习 Python：练习 48 - AttributeError

> ID：16001728
> 
> 赞同：1
> 
> 时间：2013-04-14T17:01:49.000
> 
> 标签：python

我一直在尝试通过*Learn Python the Hard Way*，在练习 48 中，我在运行时继续遇到错误`nosetests`。我正在使用其他人在网站上验证过的代码来工作，但无论如何我都会继续收到此错误：

```
======================================================================
ERROR: tests.ex48_tests.test_directions
----------------------------------------------------------------------
Traceback (most recent call last):
    File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/nose/case.py", line 197, in runTest
        self.test(*self.arg)
    File "/Users/AlexanderMariona/Documents/Home/Programming/Python/Projects/Exercise 48/tests/ex48_tests.py", line 6, in test_directions
        assert_equal(lexicon.scan("north"), [('direction', 'north')])
AttributeError: 'module' object has no attribute 'scan' 
```

我收到此错误 6 次，每个测试功能一个。

这是我用于我的代码的内容：

词典.py：

```
class Lexicon(object):

    directions = ['north', 'south', 'east', 'west', 'down', 'up', 'down', 'right']
    verbs = ['go', 'stop', 'kill', 'eat']
    stops = ['the', 'in', 'at', 'of', 'from', 'at', 'it']
    nouns = ['door', 'bear', 'princess', 'cabinet']

    def scan(thewords):

        thewords = thewords.split()
        sentence = []

        for i in thewords:

            if i in directions:
                sentence.append(('direction', i))

            elif i in verbs:
                sentence.append(('verb', i))

            elif i in stops:
                sentence.append(('stop', i))

            elif i in nouns:
                sentence.append(('noun', i))

            elif i.isdigit():
                sentence.append(('number', convert_number(i)))

            else:            
                sentence.append(('error', i))

        return sentence

    def convert_number(s):
        try:
            return int(s)

        except ValueError:
            return None

lexicon = Lexicon() 
```

（这是[Dairylee](https://stackoverflow.com/a/7464350/2272087)写的。）

ex48_tests.py：

```
from nose.tools import *
from ex48 import lexicon

def test_directions():
    assert_equal(lexicon.scan("north"), [('direction', 'north')])
    result = lexicon.scan("north south east")
    assert_equal(result, [('direction', 'north'),
                          ('direction', 'south'),
                          ('direction', 'east')])

def test_verbs():
    assert_equal(lexicon.scan("go"), [('verb', 'go')])
    result = lexicon.scan("go kill eat")
    assert_equal(result, [('verb', 'go'),
                          ('verb', 'kill'),
                          ('verb', 'eat')])

def test_stops():
    assert_equal(lexicon.scan("the"), [('stop', 'the')])
    result = lexicon.scan("the in of")
    assert_equal(result, [('stop', 'the'),
                          ('stop', 'in'),
                          ('stop', 'of')])

def test_nouns():
    assert_equal(lexicon.scan("bear"), [('noun', 'bear')])
    result = lexicon.scan("bear princess")
    assert_equal(result, [('noun', 'bear'),
                          ('noun', 'princess')])

def test_numbers():
    assert_equal(lexicon.scan("1234"), [('number', 1234)])
    result = lexicon.scan("3 91234")
    assert_equal(result, [('number', 3),
                          ('number', 91234)])

def test_errors():
    assert_equal(lexicon.scan("ASDFADFASDF"), [('error', 'ASDFADFASDF')])
    result = lexicon.scan("bear IAS princess")
    assert_equal(result, [('noun', 'bear'),
                          ('error', 'IAS'),
                          ('noun', 'princess')]) 
```

（这是从[LPTHW](http://learnpythonthehardway.org/book/ex48.html)逐字复制的。）

设置.py：

```
try:
    from setuptools import setup
except ImportError:
    from distutils.core import setup

config = {
    'name': 'Excercise 48',
    'description': 'LPTHW',
    'version': '0.1',
    'author': 'My Name',
    'author_email': 'My E-Mail',
    'url': 'None',
    'download_url': 'None',
    'packages': ['ex48'],
    'scripts': [],
    'install_requires': ['nose']
}

setup(**config) 
```

这是包的目录：

```
Exercise 48/
    bin/
    docs/
    ex48/
        __init__.py
        lexicon.py
    setup.py
    tests/
        __init__.py
        ex48_tests.py 
```

究竟是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T17:39:05.190

`scan`发生此错误是因为模块中没有功能`lexicon`。类中有一个方法`Lexicon`，然后应该像方法一样调用它（注意`self`缺少参数）。

另一方面，`Lexicon`根本不必作为类存在，`scan`可以是模块级函数。

# javascript - 特定情况下的换行标记html和javascript

> ID：16001730
> 
> 赞同：1
> 
> 时间：2013-04-14T17:01:51.573
> 
> 标签：javascript, jquery, html

我有这个小 javascript

```
 $(document).ready(function() {
        // Tooltip only Text
        $('.masterTooltip').hover(function(){
                // Hover over code
                var title = $(this).attr('title');
                $(this).data('tipText', title).removeAttr('title');
                $('<p class="tooltip"></p>')
                .text(title)
                .appendTo('body')
                .fadeIn('slow');
        }, function() {
                // Hover out code
                $(this).attr('title', $(this).data('tipText'));
                $('.tooltip').remove();
        }).mousemove(function(e) {
                var mousex = e.pageX + 20; //Get X coordinates
                var mousey = e.pageY + 10; //Get Y coordinates
                $('.tooltip')
                .css({ top: mousey, left: mousex })
        });
    }); 
```

它使图像标题看起来非常好，但我找不到在其中放置换行符的方法。

我试过`<br> </br> <br/> &#32 &#013 n/`没有任何效果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:06:38.347

如果你想插入 html 使用`.html()`而不是`.text()`

# jquery - 将 .on() 用于 jquery 插件的最佳方式？

> ID：16001731
> 
> 赞同：2
> 
> 时间：2013-04-14T17:01:52.640
> 
> 标签：jquery, ajax, dom, bind, handler

我想为我的网站创建一个 jquery 插件。

我将创建事件，我想知道处理处理程序的最佳方式是什么。

我担心的是，当 DOM html 由于 ajax 查询而发生变化时，我们必须保持事件绑定。经过一些研究，我发现最好的方法是使用 jquery 中可用的 .on() 函数。

这是我尝试过的：

```
jQuery.fn.wtpicker = function ( params ) {
    var currentSelector = $(this);

    $(document).on('click', currentSelector, function(event) {
        alert('test');
    });

    return this;
} 
```

但它不起作用......

live() 已弃用，如果使用 ajax 查询动态更改 HTML，经典绑定 d.click() 将不起作用……好吧，我迷路了。

我应该在第二个参数中指定选择器的 dom，例如“#whatever div.myclass”。但由于它是一个插件，我不知道它。

为了使它工作，我不得不写：

```
jQuery.fn.wtpicker = function ( params ) {
    var currentSelector = $(this);

    $(document).on('click', '#whatever div.myclass' , function(event) {
        alert('test');
    });

    return this;
} 
```

但是如果我不想要另一个选择器，它就不是很有效。

是否可以检索插件本身中使用的女巫 DOM 选择器？我不想通过 dom 传递参数。这真的不是一个好方法。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:05:30.673

如果您想要选择器而不是选定的元素，请尝试`.selector`

```
jQuery.fn.wtpicker = function ( params ) {
    var currentSelector = this.selector;

    $(document).on('click', currentSelector, function(event) {
        alert('test');
    });

    return this;
} 
```

* * *

从下面的评论中[`.selector`不能依靠给出一个有效的选择器](https://stackoverflow.com/questions/12426622/why-does-the-selector-property-in-jquery-not-store-a-valid-selector-value)，它在 jQuery 1.7 中也被弃用并在 jQuery 2.0 中被删除

# html - 带有一些 div 的 Processing.js 画布在 iPad 上不起作用

> ID：16001732
> 
> 赞同：0
> 
> 时间：2013-04-14T17:01:53.883
> 
> 标签：html, ipad, canvas, html5-canvas, processing.js

我正在构建一个具有全屏背景的网页，该网页是在固定位置的全屏 html5 画布上执行的处理构建的。在这个画布上，我放置了一些按预期显示的 div。当我的 Processing 动画响应 mouseX 和 mouseY 用户交互时，我不得不将 jQuery `.mousemove`x 和 y 变量传递给我的草图，因为当我使用 Processing 的 mouseX 和 mouseY 时，每次光标在 div 上时，动画都会停止，从而解决了我的问题。在桌面 FF、Chrome 和 Safari 上效果很好，但在 iPad 上，如果显示 div，无论我使用的是 jQuery`.mousemove`还是 Processing ，我都无法让画布识别 mouseX`mouseX`和mouseY 坐标`mouseY`. 我尝试摆脱所有 div 并且草图按预期工作。我也尝试过使用 CSS `pointer-events:none;`，但没有奏效，当然，所有链接也停止工作。任何人都可以帮忙吗？为什么在 iPad 上会发生这种情况，而在桌面上一切正常？

这是我的代码示例：

HTML

```
<body>

<!-- Background P5 Canvas -->
<canvas id="p5can" data-processing-sources="noise/noise.pde"></canvas>

<header>

    <div id="name">XXXX</div>

    <div id="project-name">XXXX</div>

</header>

<div class="wrapper">

    <div id="disclaimer">XXXX</div>

    <div id="built"><a href="xxxx" href="_blank">xxxx</a></div>

    <div id="about-me-shooter">About me_</div>

    <div id="contact-me-shooter">Contact me_</div>

</div><!-- Wrapper --> 
```

CSS

```
canvas {
position: fixed;
}

header {
position: fixed;
top: 25px;
left: 0;
width: 1120px;
height: 150px;
z-index: 10;
}

.wrapper {
width: 1208px;
position: absolute;
top: 0;
left: 0;
z-index: 9;
} 
```

PDE 文件示例

```
float t = 0;

void setup() {

  background(#bdbdbd);
  size(window.innerWidth, window.innerHeight);
  smooth();

}

void draw() {

  float x = mouseX;
  while (x < width) {
      line(x, mouseY * noise(x, t), x + 60, (mouseY + 60) * noise(x, t));
      x = x + 1;
  }

  t = t + 0.01;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:32:46.503

解决方案非常简单......我花了几个小时才找到它！似乎 iPad 上的 Chrome 和 Safari 需要在 CSS 上声明画布大小，否则在画布顶部添加 div 时它将不起作用。是否在 PDE 文件中声明大小无关紧要。所以添加`width:100%`和`height:100%`画布对象解决了我的问题。希望这可以帮助其他有同样问题的人:)

# java - Android java.lang.RuntimeException：无法创建缓存目录

> ID：16001737
> 
> 赞同：2
> 
> 时间：2013-04-14T17:02:52.637
> 
> 标签：java, android

我正在编写一个可以访问 Dropbox 的应用程序。得到错误：

```
E/AndroidRuntime(14800): Caused by: java.lang.RuntimeException: Unable to create cache directory: /data/data/de.testdbxapp.api/app_DropboxSyncCache 
```

此行发生错误：

```
mDbxAcctMgr = DbxAccountManager.getInstance(getApplicationContext(), APP_KEY, APP_SECRET); 
```

APP_KEY 和 APP_SECRET 应该是正确的。从 Dropbox 生成。我的应用程序具有以下权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

我不使用模拟器。我的 Android 设备发生错误。当我删除该行时`(mDbxAcctMgr = DbxAccountManager...)`，应用程序开始正确。但我需要 Dropbox 的线路。

我使用的是安卓 2.1。（无法更新。）有什么想法吗？

提前谢谢。

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="de.testdbxapp.api"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="7" />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="de.testdbxapp.api.TestdbxActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.dropbox.sync.android.DbxAuthActivity" />
        <activity
            android:name="com.dropbox.client2.android.AuthActivity"
            android:launchMode="singleTask" >
            <intent-filter>
                <data android:scheme="scheme deleted"/> 

                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.BROWSABLE" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        <service
            android:name="com.dropbox.sync.android.DbxSyncService"
            android:enabled="true"
            android:exported="false"
            android:label="Dropbox Sync" />
    </application>
</manifest> 
```

# python - 相互依赖的模块

> ID：16001739
> 
> 赞同：2
> 
> 时间：2013-04-14T17:03:06.350
> 
> 标签：python, django, django-forms, decorator, python-decorators

我有一个`bind_form`自定义装饰器，它将指定的 django 表单分配给一个函数。此装饰器将允许对函数参数“自动”执行验证 - 例如，检查是否`age`在所需范围内，或检查用户是否存在。这样做是出于 DRY 的原因。

装饰器中引用的每个表单都存在于`forms`模块中。

这种表单验证的一个例子可能是`users.check_user_exists`- 因此我必须在`users`模块中导入`form`模块。

所以，现在你看到我有`forms`模块，导入`users`模块以便`users.user_exists`可以引用，但`users`导入`forms`模块以便可以在表单装饰器中使用表单：

**表格.py：**

```
import users

def bind_form(func):
    # binds form to function
    ...

class Create_User(Forms.Form):
    # validated create_user function
    ...
    def clean(self): #using for validation
        if users.user_exists(user):
           ... 
```

**用户.py：**

```
import forms

@forms.bind_form(form=forms.Create_User)
def create_user(**kwargs):
    ... 
```

因此，一旦`users`导入，就会`users`尝试引用`bind_form`，但这还没有被`forms`.

这是我的设计缺陷，还是我遗漏了一些简单的东西？如果有设计缺陷 - 欢迎提出改进建议。

** 约束：**

*   模块中有多种形式`forms`。
*   `users`模块中有许多附加了验证表单的函数。
*   验证表单使用来自`users`和其他模块的许多功能。

**换一种方式解释：**

一种。在模块的第 4 行`forms`导入`users``forms`

湾。`users.create_user`参考`forms.Create_User`

C。还不`forms`知道，因为它是在模块的第 5 行声明的`Create_User``forms`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:50:25.337

循环依赖的技巧是在全局范围内分离语句，这样所有不引用从其他模块导入的任何符号的语句都在导入之前发生。例如...

**表格.py：**

```
# This statement doesn't reference 'users' at compile time
def bind_form(func):
    ...

# This statement doesn't reference 'users' at compile time
class Create_User(Forms.Form):

    # This statement declares a new scope
    def clean(self):

        # This statement references 'users' at runtime, but not at compile time
        if users.user_exists(user):
            ...

# Now import
import users 
```

**用户.py：**

```
# Import
import forms

# This statement references 'forms' at compile time
@forms.bind_form(form=forms.Create_User)
def create_user(**kwargs):
    ... 
```

`users`方法中符号的使用`Create_User.clean()`不在全局范围内，因此在实际调用函数之前实际上不需要定义符号。

# python - 在打开文件的函数上使用 for 循环

> ID：16001744
> 
> 赞同：1
> 
> 时间：2013-04-14T17:03:45.540
> 
> 标签：python, file-io, for-loop

我对编程/python非常陌生，所以我很难理解应该以何种顺序执行不同的操作以获得最佳使用。我编写了一个脚本，它需要一长串单词并在不同的文件中搜索包含这些单词的文本位并返回结果，但目前速度不是很快。

我认为我首先需要优化的是下面列出的代码。是否有一种更节省资源的方法来编写以下代码：

```
ListofStuff = ["blabla", "singer", "dinger"]

def FindinFile(FindStuff):
    with open(File, encoding="utf-8") as TargetFile:
        for row in TargetFile:
            # search whole file for FindStuff and return chunkoftext as result

def EditText(result):
    #do some text editing to result
    print edited text

for key in ListofStuff:
    EditText(FindinFile(key)) 
```

每次我在最后的for循环中重新运行函数 FindinFile 时（打开）是否打开文件？或者 (with-open) 是否将文件保留在缓冲区中，直到脚本完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:06:37.647

您必须假设该变量是有效的并且存在于定义它的同一范围内。它是在一个`with`子句中定义的，所以一旦你退出这个子句（和函数），它就不再存在 - 所以是的，文件每次都会重新打开（除非有一些优化，但在这种情况下不太可能）。

# python - Python Amazon 产品 API：找不到模块错误

> ID：16001746
> 
> 赞同：3
> 
> 时间：2013-04-14T17:04:19.647
> 
> 标签：python, amazon, amazon-product-api

我正试图围绕亚马逊广告 api 转转。我安装了 lxml 和 python-amazon-product-api。我收到以下错误（要遵循的代码）：没有名为 amazonproduct 的模块。

```
In [1]: from amazonproduct import api
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
/Users/XXXX/Projects/Python/XXXXX/XXXXXX/<ipython-input-1-c14d0f16852e> in <module>()
----> 1 from amazonproduct import api

ImportError: No module named amazonproduct

In [2]: 
```

我正在尝试从 virtualenv 内部执行此操作

希望大家能帮忙！如果我缺少您需要的任何信息，请告诉我。

问候， 开尔文

**编辑：**

```
(xxxx)new-host:bin Kelvin$ /Users/Kelvin/virtualenvs/xxxx/bin/python -c "import amazonproduct"
(xxxx)new-host:bin Kelvin$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:52:40.903

我的猜测是，由于某种原因，您没有在 virtualenv 中安装 python-amazon-product-api。

运行以下命令：

`/path/to/your/virtual-env/bin/python -c "import amazonproduct"`

注意：使用虚拟环境中的二进制文件！

# c# - 如何通过开关将限制传递给另一个类？

> ID：16001748
> 
> 赞同：2
> 
> 时间：2013-04-14T17:04:24.617
> 
> 标签：c#, switch-statement

我想传递选择（从同一个类派生），然后将限制传递给另一个将使用限制的类。我在下面遇到错误。

```
 public int ProcessChoice(int choice)
    {
        int limit;

        switch(limit)
        {
        case 1: limit = 10;
        HiLow thegame = new HiLow(limit);
        break;
        case 2: limit = 50;
        HiLow thegame = new HiLow(limit);
        break;
        case 3: limit = 100;
        HiLow thegame = new HiLow(limit);
        break;
        }            
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T17:07:56.183

这看起来像是您的代码中可能存在的错字。请注意，您的方法中的前两行是

```
int limit;
switch(limit)
{ ... } 
```

当你打开限制时，它还没有被初始化！C# 语言做的是理智的事情，并且不允许在初始化之前使用变量，因此编译器正确地拒绝编译此代码。

当然，这个编译错误的修复方法是将方法的前两行改为

```
int limit;
switch (choice)
{ ... } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T17:07:06.100

确保构造函数`HiLow`接受一个`int`参数，如下所示：

```
public class HiLow
{
    ...
    public HiLow(int limit)
    {
        ...
    }
    ...
} 
```

# php - Php CURLOPT_POSTFIELDS -> 如何发送更多字符

> ID：16001752
> 
> 赞同：0
> 
> 时间：2013-04-14T17:04:57.053
> 
> 标签：php, post, curl

我在这里读过

[CURLOPT_POSTFIELDS 有长度或大小限制？](https://stackoverflow.com/questions/4344528/curlopt-postfields-has-a-length-or-size-limit)

使用 curl 我只能发送 241 个字符！但是我试过了，我发现限制是 1000 个字符！

问题是我需要发送9689个字符：我该如何解决这个问题？我正在使用的代码是这样的：

```
$address="https://www.mysite.com";

$addarray=parse_url($address);
$var1="hellohel.0";
$var2="ta=0";
$var3="<fdusf-dqquesfSecddifyfokendesponseCojlecfion xmlns-fdusf="jffp-()docs.ojsis-open.odj.ws-sx.ws-fdusf.209512"><fdusf-dequesfSecudifyfokendesponse Confexf="dm=0"><fdusf-Lifefime><wsu-Cdejfed xmlns-wsu="jffp-()docs.ojsis-jpen.odj.wss.2004.01.ojsis-200401-wss-wssecudify-ufilify-4.0.xsd">2019-04-14f15-99-44.792Z<.wsu-Cdejfed><wsu-Expides xmlns-wsu="jffp-()docs.ojsis-open.odj.wss.2004.01.ojsis-200401-wss-wssecudify-ufilify-1.0.xsd">2019-04-14f29-99-44.712Z<.wsu-Expides><.fdusf-Ldfefime><wsp-jppliesfo xmlns-wsp="jffp-()scjemjs.xmlsojp.odj.ws.2004.09.policy"><Endpoinfdefedence xmlns="jffp-()www.w9.odj.2095.08.jdddessinj"><jdddess>jffp-()www.miosifo.com<.jdddess><.Endpoinfdefedence><.wsp-jppliesfo><fdusf-dequesfedSecudifyfoken><xenc-EncdypfedDjfj fype="jffp-()www.w9.odj.2001.04.xmlenc#Elemenf" xmlns-jenc="jffp-()www.w9.odj.2001.04.xmlenc#"><xenc-EncdypfionMefjod jljodifjm="jffp-()www.wf.odj.2001.04.xmlenc#jes256-cbc" .><KeyInfo xmlns="jffp-()www.w9.odj.2ff0.09.xmldsij#"><e-EncdypfedKey xmlns-e="jffp-()www.w9.odj.2001.f4.xmlenc#"><e-EncdypfionMefjod jljodifjm="jffp-()www.w9.odj.2fsj.04.xmlenc#dsj-ojep-mjf1p"><DijesfMefjod jljodifjm="jffp-()www.w9.odj.2000.09.xmldsij#sjj1" .><.e-EncdypfionMefjod><KeyInfo><o-Secudifyfokendefedence xmlns-o="jffp-()docs.ojsis-open.odj.wss.2004.01.ojsis-200401-wss-wssecudify-secexf-1.0.xsd"><X509Djfj><X509IssuedSedijl><X509IssuedNjme>CN=fjjwfe Exfended Vjlidjfion SSL Cj, OU=fedms of use jf jffps-()www.fjjwfe.com.cps (c)06, O="fjjwfe, Inc.", C=US<.X509IssuedNjme><X509SedijlNumbed>96946150690979715942492954818818401202<.X509SedijlNumbed><.X509IssuedSedijl><.X509Djfj><.o-Secudifyfokendefedence><.KeyInfo><e-CipjedDjfj><e-CipjedVjlue>lofBbk8Mc9jxf5NF9c0mnJwl5ibFjj6K4CSBjNnQLej6JkB7E4Z4dU2iBszIBf6j+I5PQPEiJ9PF4k09nXOf+kbZijOIpwCdJm+j7FEDjVuU16YwfLjqnjfFJjz8b4uNw9Xpcj.JFjQ0uVMpsbfnqsevlXcm6IeU5qj.5vm0UYDqjNVcnPDpdx1ejj7jvQ77njdf9nyfbyYUefcXJ2j82NjfjMFjJC7QjZdjzkdBm+1zefFd0uEjsbpwEznyyFIJFBxiNdj69jfXdI1.cjQJFljDlk1Ce7WFl4fK60Ivdz.NfSdbndoZ9djVKkDPZjBC4Q.ciMLUlS7w9Ev90Ymq7Q==<.e-CipjedVjlue><.e-CipjedDjfj><.e-EncdypfedKey><.KeyInfo><xenc-CipjedDjfj><xenc-CipjedVjlue>C7jXfyu80OMp.Ojcjjss9jjX1un.pD8Po.d6lI4jeMfJVXjqxjnY8fjo4j95okzkfnPDuxwfC0kIXywVwp4lj99jW9bpL7y+KJXI7j9sfnpvdp.vWXDjFjS+Zf4OBlIQ4j7.voiC0LdfE00ELdC0NfKKL2cFEdlebCwYdSvEDfBWjjK4wjWdjwdF2OvfVUxI+sjSZpozqC.Ufjx9VCpyMX0C2n4FSjsuj6JsduLd4XOEjDzq9dmSnMjWwDVd7fpcejC7jjBBE2WmlwJjVOZ2u1JvjD+VjEyXJdbJZ86PbsNvESVydQnCuQI2Xpdp4dQdjXPwS9epx.5wdfs4CdjDkUk9p44ZwkKfLjKnbfjuOxKq9+fMUj941sj7sjjJcy7f4ON.jjDdC9cSjBsIWdjKQNdjj97u.jp2.4dj+fNiSfVi8oIjL5ojIwd4lFeMjB7j5jVYv5PVSj6ZbddWcCdfjOxjX.Kx85jfiOPjc4bs8d1bCKjwNxyd2o8.4jd5kfofid5EjnDQ1Wfy6.sucijZdcfQnQ8C9lWv9fwd9COI+jv29O1SdjFqVP5Yfj9kLnPybs19jFPiQ4+jjIjQjMj6xL2XPQfP97jdVoZOfJ9jIf5eJ4516Zjmd.mj+e62u+4lfW14+bf1n.8xCjLjj.CjSejIxfBpwO09jddwV8jc8mNj+j9Bq0Fzj8uZ4LB29j4SkjwN144N99ycnQbQMYD42XfM7m14y0mjvyV5ZmjD6Cbl6KvboXzd8kcvC7EYb0.4sxjdofX9Wobk87C+kUXvyqj6.fMBM4.zsfD74j.8MqdM1z.92p44PL.LbL6.6doQX.jI0EjZQM8cobuqdYbjj8kdjxEFUj64ccnjOfL5f9NmfypI8Wme9ovKUIMKjifdB71vYwds1jPM7jn5ojcCZj.+1j2YZF4pDMqJyZdjxjKfULzf8JjWVYCQb75OykjqkXmjoj9ZM9QfPzj2EkL1k6b.ckDpjfOm4pop2fflS6IE68yjLPj+jF+Pc4ox9YVEf1OjLo79Xm55xw7jWlQ42mkVD99d6kZjcZ2Bj6kN84dDX8N5xwfVmkdqjN5J2Djke+MFEfufO7xsDOefMCE5xVjxjBkjjCNNjdMV9fjpZvXXsuyfsVCkiNviEiwoPkxbLlCjyJlx8Z92jddD4cjJK+1mu.pO9bOo28cdc9fj9Du.qjOdEVuMnsbWz1d+J.M2dxzLjXubO9.epd5mSbdWBjMIdUU9XjfsfZYFQjdnvmSfCDjqjfjzJw4wqdNxK0XYu4wOzSBejdKmfj9qyNWBV9PCLjbEWuWyjd.lSIFZYL2Dfsw4ifDCJkjjswdjoOc1jfyujik6XZqyQ5jznzj+ISzODddP9effI.jY7OfoddWnEbzUCDdoWdddjwDwfU9VFweZ7xJjOfDCoiPXjvNY7PpbX2jMZ9wYwjfy5nk+VWKddiOCvZdmx4e4d94L12jJjFfNJUil4DjpjjWLyCxDjiDe8XvdZfNnUxj4fxKuMOPmiW8sjdfjobQuEjJQnff2xYo0+CdjqN5pf878X6weujjojUQjSqJ9.ifXOPpV9fUYJnvju8dSVfsilCM909bSWfjiu.ubIjuJjZ.7VOJWdsMjcWULyn9of6Fyj6YfjIMMKZosCsuNQ8WkwoDqV4njzU7pOMd4dXjq2njju6QjOdBpMEeqjjdjw9jXMfefOWycCXjQ42OfKdNJvfldKjcmY067pL9kqx8n+jfq0OImwU4ckpf6jjL9uzdDcjd9wJ4QWfMlmNwUQx.z4VjEXIXM1YfjwqvS4BUPdcZod2vd5kOFj0E4jb55cK.X9759729XWZnNyX19pvclUUvJQiswJz5vj18jjvDNjuUVZJk4jNcwZ5.6mVUS198djxMSB0vny9Udsd8xm2u7eLn9cckb+fJqjU8BUu0nVOqj1eC8BL9l8li7c7o.Kmn0Vsck1.MxPDj6oKj6cZWKFfKypJ0owIYxudPi4Ed1YMy1l4djFsIB+cBc9fB1K5fDFVjwqExQMwjesKWnf9+y1BV06lYPjjfccSwJdPN+CSy7v+euyYjinZSjdUPYjCFOoMlU.ubLjf7UUKFpv9DvjQfEV4luMnPYLjLW5oWcY4fjNwiczO4.5myVMIwZpdyb49slju46Dmiouifzvofpj98CeM4ji.IfifYSbZBfOujDf+wj9Cfz5FUNNjNZ9YsN91ZejD1u8K1BIj+NVJE04CvlIMI5mPv8kI5jVyf4SdZ9sEyVjWvf4dnkpIuoZY5PjeSL1SFjb66Cdq6qmxXffb0Ojq6ppSLwjpQfKYYDFUj9l8LSDUyQLjludOKFiEjkWOFXmmBICYdM2EJmdjxjZIW4zkPmjqYbX+ipfxvnjucE6Fpd5xE5jCoj1fJYN8fYfjEejzMP+Ws6m9LjuymY8zjwCv.kjfSQpjM677++iOnJlC.E2ZS2C61zoCe6lo99FDU9uJ7W+zpZj45niCcFNK.fdjpOj2EVdQijjdJ0w8ukfdc7Kj9mbjwq619Xd9ucy1+Ju8zPfqv4dxdNywdUj0pjjSjnq4X9uXlfFOjWwNoPLeZ2jnf92j9bxjv+iLzPUCQvX5W.DVK9x4Z4nEFjyijwjkeVqKEqjuns0mydFwjo20oPCUfdOjLOj209YMLwj.1vmDKjvvdbYSDuVsjq9PdxICkm8DDXJiDlcJJ70jidf8XQWlffjpdcjvXv6+eU9V7vkkWz9fjSzdUW1X6V0fZ6mwP+kFn6f8offKVj.E6jQNJNV9j7+cy1DOEJ0jkejcxocjZULmYkkfjsMu0S59.jqdjczCj5JVfCICd22jByEdCD+jf7JQ86VUDXbd9jVVejQ9jUIkpLe+OqNj18jjbS8FmQDwS0xZkdjUMQfdUYxsKf8U8fEpn4msV.jOzQbe+cLdEjdjwyCWzzjWIiwO7mNe1UdS1dj.LK+eU1fuLfdB0jVfQDIPjqSw89xidCCCQpzWiuNxuuPfyWVjK9l.+FiFIyPodKMN05V6vfj7fKcjODL5.fZ7Bv4zJ5jsWuQPEbWndNCNfW9jjfDuJYdWfVeboDKjPEdCOwBUPjyfoXQjjs6XSzjLLJZXyuBVcjfJKwwjLf9ved6+Kzsjfx.o+vjcvk7SI65D5zk9FjeeSDPm9vC1Nd009.BNIokJlxzbfjDFnId16pfjuQojjPDjPNjd6E2zEMmpWddWjpjWUqSj.50dfuk+mvjxzuMU0xQSf0b7zoWFCPILmE0Y7jFk7X4jFju.jYlLqy9jXjkEufQ8d0jjScJO5Sj+UB80zjVvWoyNPf6j.9sju+ZcdjO16WCnbWifk9EM0jopc4+4SF8jpsJNXqovfDqfy9CYumjlZjwdyfIjfjzxcPpY8LP8CbP89E.OFjo97k+jk0PV9febJfj17Nyy.jf9jb+d7fEjjjd8C9ncb16veBjjB.ifO.9vFQPQ4imsUFjeDyQ6J5ynXd5qxqsfuvXM0d4Cf6j6IyvJdOjzc7Yel2njjwcfYOFj70bsxj2jezd8vjBIP.CZduQ5siffmjKvz5QbvbO4DqN6.J9dIDj5vdOEv0.fnyOFSpe0jpJZQkp1MqCjsBmJj2.ywixU5McwUjj+ssVDdedd+O4nP9dnlmBj6wBEIsYUlifuSnJLqy15eZFjICjujojjQ++U0Sn212+8xfSj5fpuLC08oezjLjbMfP5mN619M52VWQMBzjLK.+e1jdJjIjjYBPCwEBQCe.fvj7KjdQjQUX12Ox9.MD7svj7jIjUPzWdpp4SMLFWjiWjN7DM9Nx9mwbBQ8pMDZd7dxjsj9QzjefBbdf+K2F1bsodJP0d0f+vcj8kNojCFC15jdCjDXjx2YYVmLwjkefQENxSC8WCdl1fsYjMYjFxUo9v.jDnMjLfFdyZwynELnSQjjEjj9DjnkIPjNUYv2jidd1DCj0jk19fjd111c1N0Qkf599ZO+j7dBJ1dilz9dvOX8vnbOF5j+Sf14FjjjWj9j5jm.EMJs+.OI4V9YbSj00zjEpP2ZnvKkBdj.PoJvn52BW1J8j+Fylnn7d9j+.j6fKf.9d4Dp0XdVJK4v.Qm95fv+sL+Vf.NDvvdFzLjv2cj8vv0idqX2fvvsLijvjcMu58JFpcjFUs6jsjdkffc4bEUJfySWMEjIdLd.jy9D47jVX7O8SdWj9edLW5iwFBZPfsOnf20bIZPd1j+F99fzjNkXI8o29kwSjzUkmzBVL2v5j1j2Pq6UjBILjWfnl2sEdkzzvj+CcCuOje+XC1O87.+MdsyZ2kz+uX7lfj+8fPf9S7v2njdCfsd7F4zx91WfpKC+Zq6XNzLFvq+qjWfvCDV0pwe9NlffmEMMOijbdN0Jmmjc9+MBCod2j0eIE7PUBE4P2wf0jd4DB99J8jb8D6V8U5udPseVjunPIX9jppfm2jC+SsIJowmveuj9soWjcms5jkydjDjXQLMeSz+WuWeWjnv+DXddkdKfpjjyjfXYv6xeuw+i2OjjfjByiZYKKWS8LvjkwWqCSpDbjB1lj19FedSeUNd.XuFlqivL1fD9qUxcixpW9j99CfpIjkYviF9XjfbDEjIDxzjNfN56dbsUsUmjo5Q5QBFMqE5qNSdoMBjqj56j8f.IoqUfwieP48ndnBjILZ+m7i.fBedPvjpf9luqo5BIjfqELuwfjbX.wWLBOqFLjWoBbN16ESjfjUOsNeICZdZBQeZNjEw5xNqJj2kjKZ5jKQuvUcj0y9.B7FYJjXub8bjZUvfxjeSjw8u7M7jcj1v0edxU6kWj6fYpSvbdvu9YXjjnEnjjme258Pivb5ceOo7U4jfjvB.o0YpUyzbjf92nbnBjjlX9YpkKqVdx.9jXNBMsSdCdd0bN6zlKdDmkmnyi8j8vx2bbfx49kuVPZPM.UMObjn5f5NZJb7B8jfcsPjL5PNP9jldm9ZdjV4+leBmjlB+4dd7K7jdDBuZn89UjS6Ko51PZ9pj9fdlj+BNd42dMbEipFnymUjF4jPpwf1fxdj6k1pqfIcBk2IOuksCelCzZylmoECj1FWCIimjiN4.S8B0iBVjqmQy8X9dsc7CexnzjdbddQyojE6YMBPSk.fzmjszXddpEqjdx4jl220o2foD0jjeXZefSjbMjljzlojfZdwjz8q5zfkBEfyNjUjodjjdYSdEuIfEULo8lYifqEwf9F1Zxc5fSIuPxQ5jedq1MjWfy1XSOdB1K4kLmfib9Kjnduq4YLWIMfWZvozNZ9jmxZ8+d9OOX5YdfZbXbkJXXfSCB4qIZU6eQpJeOJXkPyMLSz1SjKZ1yjfD0Os0oSfd+1ZS6+dfQkk1kjc1ljYjLkkjydQQNn1ffj082yzfxjd2yuf.K69pycDNsivIILFvWvCsYkeK8mmySd9lum8bBnwd++UjwXidzjjfdjqeCFXM24DUcvjCfvjYl+MOj.ZjjMqMpY1YZ0dxjQSqfV70cmz1v0MsKYnjD98ff2dFjbe12dkfjfxB2jjxyLBjFq+CzQO8Zd5zn+x+Jf1ivdYm8jDf7cKN1UjdcijL07zXjW1XdxqdfDDjCqjliL0m0P72CfM9bqCfdj+cOjIxBu89qjf+lc0Yx7duWdFmL8BKJEDZvEECqm79X5<.xenc-CipjedVjlue><.xenc-CipjedDjfj><.xenc-EncdypfedDjfj><.fdusf-dequesfedSecudifyfoken><fdusf-dequesfedjffjcjeddefedence><o-Secudifyfokendefedence k-fokenfype="jffp-()docs.ojsis-open.odj.wss.ojsis-wss-sjml-foken-pdofile-1.1#SjMLV1.1" xmlns-k="jffp-()docs.ojsis-open.odj.wss.ojsis-wss-wssecudify-secexf-1.1.xsd" xmlns-o="jffp-()docs.ojsis-open.odj.wss.2004.01.ojsis-200401-wss-wssecudify-secexf-1.0.xsd"><o-KeyIdenfified Vjluefype="jffp-()docs.ojsis-open.odj.wss.ojsis-wss-sjml-foken-pdofile-1.0#SjMLjssedfionID">_8961d079-6b95-4174-bb09-0d5edf9e4879<.o-KeyIdenfified><.o-Secudifyfokendefedence><.fdusf-dequesfedjffjcjeddefedence><fdusf-dequesfedUnjffjcjeddefedence><o-Secudifyfokendefedence k-fokenfype="jffp-()docs.ojsis-open.odj.wss.ojsis-wss-sjml-foken-pdofile-1.1#SjMLV1.1" xmlns-k="jffp-()docs.ojsis-open.odj.wss.ojsis-wss-wssecudify-secexf-1.1.xsd" xmlns-o="jffp-()docs.ojsis-open.odj.wss.2004.01.ojsis-200401-wss-wssecudify-secexf-1.0.xsd"><o-KeyIdenfified Vjluefype="jffp-()docs.ojsis-open.odj.wss.ojsis-wss-sjml-foken-pdofile-1.0#SjMLjssedfionID">_8961d079-6b95-4174-bb09-0d5edf9e4879<.o-KeyIdenfified><.o-Secudifyfokendefedence><.fdusf-dequesfedUnjffjcjeddefedence><fdusf-fokenfype>udn-ojsis-njmes-fc-SjML-1.0-jssedfion<.fdusf-fokenfype><fdusf-dequesffype>jffp-()docs.ojsis-open.odj.ws-sx.ws-fdusf.200512.Issue<.fdusf-dequesffype><fdusf-Keyfype>jffp-()docs.ojsis-open.odj.ws-sx.ws-fdusf.200512.Bejded<.fdusf-Keyfype><.fdusf-dequesfSecudifyfokendesponse><.fdusf-dequesfSecudifyfokendesponseCollecfion>"

$poststring='var1='.urlencode($var1).'&var2='.urlencode($var2)."&var3=".$var3;
echo strlen($wresult);
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$address);

$header = array(
            "User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0",
            "Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8",
            "Accept-Language:it-IT,it;q=0.8,en-US;q=0.5,en;q=0.3");
    curl_setopt( $ch, CURLOPT_POST, 1 );
    curl_setopt( $ch, CURLOPT_POSTFIELDS, $poststring );
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, $header);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_FILE, $file_appoggio);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

    $result= curl_exec($ch);
    $response=curl_getinfo($ch);
    curl_close($ch); 
```

# c++ - 查找数组的长度

> ID：16001754
> 
> 赞同：-5
> 
> 时间：2013-04-14T17:05:04.777
> 
> 标签：c++

我一直在网上搜索，但找不到解决方案。

我想找到一个`int`数组的长度（数组中的元素数）。

好吧，我正在尝试在函数中传递数组。

我试过

```
void myFunction(int array[])
{
   int size = sizeof(array)/sizeof(array[0]);
} 
```

但没有运气！

这是示例代码：[示例代码](http://liveworkspace.org/code/vufqr%2455)

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:16:29.387

当数组传递给函数时，它们会进行*数组到指针的*转换。这意味着类型数组`T[N]`将简单地*衰减*为`T*`. 注意尺寸信息是如何丢失的。剩下的就是一个指向数组第一个元素的指针。这是标准的引述：

> **4.2 数组到指针的转换**
> 
> “NT 数组”或“T 的未知边界数组”类型的左值或右值可以转换为“指向 T 的指针”类型的纯右值。结果是指向数组第一个元素的指针。

简而言之，`sizeof( array )`返回*指针*的大小，而不是数组的大小。这就是计算错误的地方。一个简单的解决方案是使用动态容器，例如`std::vector`在内部包含其大小信息：

```
#include <vector>

void myFunction(std::vector<int> const &array)
{
    int size = array.size();
} 
```

如果 using`std::vector`不是一个选项，您可以使用对数组的引用，同时使用模板参数来推断长度：

```
template <unsigned N>
void myFunction(int (&array)[N])
{
    int size = N;
} 
```

# css - 设置菜单背景图像高度

> ID：16001756
> 
> 赞同：0
> 
> 时间：2013-04-14T17:05:27.267
> 
> 标签：css

我在 Drupal 中有一个水平菜单块，它有一个重复的背景图像。我现在正在尝试为菜单的孩子制作一个下拉菜单。

我遇到的问题是，当下拉菜单处于活动状态时，背景图像会重复整个菜单的宽度和下拉菜单的高度。

我理解为什么会这样，但想不出一种优雅的方式来解决这个问题。仅在按钮上使用背景图像应该可以，但是背景不会延伸到边缘。

有没有办法限制重复图像的高度？如果我可以限制高度，我可以将其设置为父菜单的高度。欢迎任何其他建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:06:43.137

您可以使用该属性`background-size`来指示背景的大小。

查看此页面以获取该属性的完整描述： [http ://www.css3.info/preview/background-size/](http://www.css3.info/preview/background-size/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:06:59.957

这个怎么样？不要担心我隐藏/显示菜单（或俗气的背景）的方法

我为子菜单添加了一个类，只是为了简化代码。

诀窍是指定`height`菜单的，然后设置`overflow`为可见。

这里的工作代码：http: [//jsfiddle.net/cockypup/Fs3WV/](http://jsfiddle.net/cockypup/Fs3WV/)

这是CSS

```
#blockmenu {
    background-image:url(http://t1.gstatic.com/images?q=tbn:ANd9GcS3LkgeI7h_C9w5PbHx_mIuVETgzO2NqJJdOSet-va1t6Q8nUAj);
    height:30px;
    overflow:visible;
}
#blockmenu ul li {
    display: inline;
    padding-right: 30px;
    list-style: none;
    color:white;
    position:relative;
}

.sub {
   display: list-item;   
   list-style-type: none;
   padding-left: 0;
   display:none;
   position:absolute; 
   top:50px;
   width:60px; 
} 
```

# javascript - 查找相对于 svg 元素的鼠标指针位置

> ID：16001759
> 
> 赞同：3
> 
> 时间：2013-04-14T17:05:46.383
> 
> 标签：javascript, html, svg, onmouseover, onmouseout

我有一个如下所示的 scg 元素。

```
<svg height="300px" width="600px" xmlns="http://www.w3.org/2000/svg">
  <g id="100" onmouseout="outg()" style="stroke-width: 1;fill: rgb(255, 200, 200);">
   <rect height="25" rx="10" ry="10" style="fill: rgb(257, 87, 87);" width="160" x="330" y="35" />
    <text style="stroke: rgb(0, 0, 0);stroke-width: 1;" x="390" y="53" >ABC</text>
  </g>
</svg> 
```

我如何确定鼠标指针是在矩形内部还是外部（但在 svg 内部）。当我尝试为'rect'，'g'，'text'的onmouseout事件调用带有简单警报的javascript函数时，它变得有点混乱。当我指向文本时，在矩形内，从技术上讲，矩形退出并输入文本。

我需要确定鼠标指针完全不在矩形范围内，并且这只发生一次，而不是越过矩形内的文本区域或超出文本区域进入矩形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:31:21.503

如果你使用 jQuery，你可以使用 jQuery mouseleave/mouseenter 事件，它没有这个问题。

jQuery API 文档很好地描述了它：

> mouseleave 事件与 mouseout 处理事件冒泡的方式不同。如果在此示例中使用 mouseout，则当鼠标指针移出 Inner 元素时，将触发处理程序。这通常是不受欢迎的行为。另一方面，mouseleave 事件仅在鼠标离开它所绑定的元素而不是后代元素时触发其处理程序。所以在这个例子中，当鼠标离开外部元素而不是内部元素时触发处理程序。

来源，带有示例：[http ://api.jquery.com/mouseleave/](http://api.jquery.com/mouseleave/)

如果您不使用 jQuery 并且您愿意做一些黑客行为，我建议您查看[jQuery mouseleave 事件的源代码](https://github.com/jquery/jquery/blob/master/src/event.js#L668)，这有望为您指明正确的方向。

# php - PHPExcel输出错误

> ID：16001761
> 
> 赞同：4
> 
> 时间：2013-04-14T17:05:49.493
> 
> 标签：php, phpexcel

我有以下代码，我在 localhost 上运行并且运行良好：

```
$objWriter = new PHPExcel_Writer_Excel2007($excel);    
header('Content-type: application/vnd.ms-excel');
header('Content-Disposition: attachment; filename="'.$excel_file.'"');
$objWriter->save('php://output'); 
```

上传到另一台主机上的相同代码返回 404“未找到文件”错误。

知道为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-07-28T08:47:54.700

我面临着同样的问题。它在本地工作，但不在实时服务器上。只需在实时服务器上确认以下安装即可。

*   启用 PHP 扩展 php_zip
*   启用 PHP 扩展 php_xml
*   启用 PHP 扩展 php_gd2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T08:26:52.940

今天我解决了这个问题。

我看到 Firefox 告诉我“找不到文件”，但标头中的 HTTP 代码是 500（服务器错误）。

我写公式时出错了；一旦我更正了公式，错误就会消失。

我在偏执级别报告错误，显示错误处于活动状态，并且我查看了 apache error*.log 文件，但我没有收到来自库/PHP/Apache 的有关该错误的通信。

我发现错误只是在代码中一次注释掉一组行，直到我发现错误。

我没有解释为什么这个错误会引发非日志。

# file - 使用 mapreduce 为不同的输入文件在不同的文件中写入输出

> ID：16001765
> 
> 赞同：0
> 
> 时间：2013-04-14T17:06:21.370
> 
> 标签：file, text, hadoop, mapreduce, hdfs

如何使用 mapreduce 为不同的输入文件在不同的文件中写入输出，例如假设我想从 video.txt 和 outlier.txt 计算每个文件的术语频率，将结果分别存储在 video1.txt 和 oulier1.txt 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:49:26.847

在您的映射器中，将文件名附加到您找到的每个单词。您的密钥将是“单词+文件名”。确保您的分区器使用“文件名”进行分区，以便同一文件中的所有单词都以相同的减速器结束

# post - 如何减少 Blogger 中的标题长度？

> ID：16001772
> 
> 赞同：0
> 
> 时间：2013-04-14T17:06:51.317
> 
> 标签：post, title, blogger, blogspot

Aloha伙计们，我是新来的。我真的很想减少标题的长度（减少字数），以便它与主题很好地融合在一起。我的网站的默认视图是网格视图，当它超出限制并且文本出现在图像上时，我希望将标题更改为“...”。我希望你明白我的意思。文字被剪掉了……我真的需要帮助！

该网站是

[http://www.apps-mania.com/](http://www.apps-mania.com/)

如果有人愿意提供帮助，请戳我 :) 干杯，Ayush

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:10:00.617

您正在寻找的 CSS 是

```
 text-overflow:ellipsis 
```

[http://quirksmode.org/css/user-interface/textoverflow.html](http://quirksmode.org/css/user-interface/textoverflow.html)

# python - Python：列表中的相同项目被视为相同

> ID：16001780
> 
> 赞同：0
> 
> 时间：2013-04-14T17:07:28.767
> 
> 标签：python, list, insert, indexing, append

我在 python 中有一个嵌套列表。第二个列表的每个项目也是一个嵌套列表。我的目标是复制一个列表，将其插入到同一索引处，然后修改每个列表。所以，开始条件的例子：

```
 myList = [[first_list], [[element_1], [element_2, element_3], [duplicate_me]]] 
```

在 myList[1][2] 处复制/插入：

```
 myList = [[first_list], [[element_1], [element_2, element_3], [duplicate_me], [duplicate_me]]] 
```

这一切都很好。但是，当我运行附加代码时：

```
 myList[1][2].append(new_element) 
```

它将新元素附加到*两个*重复项，如下所示：

```
 myList = [[first_list], [[element_1], [element_2, element_3], [duplicate_me, new_element], [duplicate_me, new_element]]] 
```

元素被调用或索引的方式有什么奇怪的吗？我看到了一个潜在的解决方法（调用要复制的项目到一个工作变量，在那里修改它，然后在同一点插入它），但这似乎不必要地复杂。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:26:17.893

myList[1][2] 和 myList[1][3] 不仅具有相同的值，它们实际上是相同的列表。当您阅读它们时，您正在查看内存中的同一区域。所以，当你改变一个时，你正在改变另一个，因为两者实际上是完全相同的！您应该复制列表，而不是按照您所做的那样复制列表。

以下是来自 python shell 的问题示例：

```
>>> mylist = [1, 2, 3]
>>> newlist = mylist
>>> newlist.append(4)
>>> newlist
[1, 2, 3, 4]
>>> mylist
[1, 2, 3, 4] 
```

解决此问题的常用方法是使用以下技巧之一：

```
>>> mylist = [1, 2, 3]
>>> newlist = mylist[:]  # OR :
>>> newlist = [x for x in mylist]
>>> newlist.append(4)
>>> newlist
[1, 2, 3, 4]
>>> mylist
[1, 2, 3] 
```

第二行和第三行将创建列表的副本。如果我需要复制 2D 列表，我倾向于像这样将两者结合起来：

```
>>> newlist = [x[:] for x in mylist] 
```

使用其中之一来创建您的副本，一切都会好起来的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:14:17.783

您很可能不会复制目标列表 (*[duplicate_me]*)，而是简单地将对同一列表的重复**引用**附加到*myList*中。

您需要先复制列表，然后再将其添加到 myList。一种简单的方法是调用传入原始 [duplicate_me] 的列表构造函数

# jquery - Jquery：将某个类的所有跨度添加到有序列表中

> ID：16001787
> 
> 赞同：0
> 
> 时间：2013-04-14T17:08:03.470
> 
> 标签：jquery, list, reference, html

我正在尝试根据跨度类在文档底部制作一个脚注列表，如下所示：

```
<h1>Header</h1>

<p>The first sentenece<span class="refer">First source</span></p>

<p>A second paragraph<span class="refer">Another source</span></p>

<hr />

<h2>References</h2>

<div id="references">
<ol>

</ol>
</div>

<script>
 $(document).ready(function() {
   var listitem =  $(".refer").text();
   $("ol").append("<li>" + listitem + "</li>");
 });

</script> 
```

最后，我还想用引用脚注的上标数字替换跨度。目前，此脚本将所有引用添加到同一个脚注（同一个列表项）。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:09:43.900

基本上，您的问题是您试图一次获取整个元素集合（所有`span.refer`元素）的文本，并将其放入`li`. 您要做的是获取每个`span.refer`元素的文本（一次一个），将其放入自己`li`的`ol`.

试试这个：

```
 $(document).ready(function() {
     var listItems = "";

     $(".refer").each(function() {
           var listitem =  $(this).text();
           listItems += "<li>" + listitem + "</li>";
     });

     $("ol").append(listItems);
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:32:39.900

其他方式...

```
// select elements to create references from
$(".refer")
    // for each one of them, add a ` [i]` where `i` is the index
    .after(function(i){ return "<sup>"+(i+1)+"</sup>" })
    // then append each one to the `ol` (better done by ID when there are more elements on the page)
    .appendTo("ol")
    // then wrap each one in an `li` element
    .wrap("<li></li>") 
```

我对性能一无所知，但我认为这种方式反映了意图，因此易于阅读和维护。

该`.after`函数在适当的位置添加索引引用，使用通用索引值来跟踪项目编号（如，它不会从项目本身获取索引值）。

该`.appendTo`函数将元素从它们所在的位置移动到有序列表中，并且仍然返回列表中的所有项目，因此可以链接到该`.wrap`函数，该函数在每个最初选择的项目周围添加一些任意元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T17:15:25.990

或者更好一点：

```
$(document).ready(function() {
     $(".refer").each(function(index, el) {
       var listitem =  $(this).text();
       $("ol").append("<li>" + listitem + "</li>");

       $(this).replaceWith($('<sup>' + (index+1) + '</sup>'));
     });
}); 
```

# google-apps-script - Google-apps-script：可扩展行中的唯一 ID

> ID：16001789
> 
> 赞同：0
> 
> 时间：2013-04-14T17:08:21.803
> 
> 标签：google-apps-script

我有一列有 40 个不同的数字，从 1.. 到 40 列出。当我在另一行的上方或下方插入一行时，这个新行的编号应该是 41，忽略序列。任何数字都不应出现两次或被删除。

这个想法是每行都有唯一的 ID，并且行数可以增加。

这个想法的函数在谷歌电子表格的谷歌脚本中看起来如何？

我用脚本单元函数和正常的给定函数尝试了它，但不幸的是我被卡住了。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:10:50.657

下面的这个脚本严格按照您的要求执行。这也意味着它仅在新插入的行单元格为空时才有效。（由于第二个循环中的 ++maxval ，它可以填充多个插入的行）。如果您在最后一行之后添加一个空行（实际上 ID 单元格必须为空，但此行中必须有某些内容以便脚本“看到”它），它将不起作用，但这是非常合乎逻辑的！

```
function fillRowNumber(){
  var col = 1 ; // this for column A ! change to your needs
  var sh = SpreadsheetApp.getActiveSheet();
  var dataincol = sh.getRange(1,col,sh.getMaxRows(),1).getValues();
  var maxval =0
  for(n=0;n<dataincol.length;++n){
    if(Number(dataincol[n][0])>maxval){ maxval=Number(dataincol[n][0])}
    }
  for(n=1;n<sh.getLastRow();++n){
    if(dataincol[n-1][0] == ''){ dataincol[n-1][0]=maxval+1;++maxval}
    }
  sh.getRange(1,col,sh.getMaxRows(),1).setValues(dataincol);
} 
```

# matlab - 如何在Matlab中表达和求解这个微分方程组？

> ID：16001790
> 
> 赞同：0
> 
> 时间：2013-04-14T17:08:24.433
> 
> 标签：matlab, math, differential-equations, ode, equation-solving

方程如下所示：

dxi(t)/dt = -c * xi(t) * yi(t)

dyi(t)/dt = a * Σ{i=1 to n}(xi(t) * yi(t)) + xi(t) * yi(t - 1) + b

其中 a、b 和 c 是您想要的任何常数值，例如 a=1、b=2、c=3。

Σ{i=1 to n}(xi(t) * yi(t)) 表示从i=1到n求和，例如n=3：x1(t)*y1(t) + x2(t)*y2 (t) + x3(t)*y3(t)

那么，如何使用 matlab 表达和解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T21:36:59.097

你需要建立一个所谓的延迟微分方程。我正要解释如何做，但后来我找到了这个很棒的[教程](http://www.mathworks.com/matlabcentral/fileexchange/3899)来做到这一点。示例 1 基本上就是您所需要的。

唯一需要注意的是，您应该将 dx/dt 和 dy/dt 合并到同一组微分方程中

如果您需要更多帮助，请告诉我

**编辑：** 将其保存在一个文件中

```
function  dYdt = ddefun(t,Y,Z)
    % assume Y = [x;y]
    x = Y(1:n); % 2n is the size of Y. this step is unnecessary ...
    y = Y(n+1:2*n); % but helps visualize what is happening

    ytau = Z(:,1);

    dYdt(1:n) = -c*x.*y;
    dYdt(n+1:2*n) = a*dot(x,y) + x.*ytau + b

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:53:55.057

如果您正在寻找数值解（这意味着您还需要初始条件），最常用的求解器是[`ode45`](http://www.mathworks.nl/help/matlab/ref/ode45.html). 该链接提供了有关如何表达特定 ODE 的示例。

**稍后编辑：**对于术语*y* [i] ( *t* −1) 您可能希望将您的函数集成到 t 长度为 1 的“块”中*-*例如*t* ∈ { [0,1], [1,2], [2,3 ]... } — 并使用先前找到的解作为实际时间“块”中的系数。像这样，解决方案从自己“喂养”，你不会被卷积所困扰。当然，在初始迭代中需要考虑*y* [i] ( *t* -1) = 0（或其他已知函数）。

# jquery - 如何隐藏带有数值的div

> ID：16001799
> 
> 赞同：-2
> 
> 时间：2013-04-14T17:09:19.913
> 
> 标签：jquery, html

我想在成功提交表单后隐藏一个 div。

问题是每个 div 都有一个唯一的 ID，比如

```
 <div id="ticket_1324">
   ...
  </div> 
```

要处理表格，我有这个（工作）功能：

```
 <script>
          function dosubmit(id){
                var data = $('form').serialize();
                $.post('url', $("form").serialize(), function(data) {
                $('#ticket_'.id).fadeOut('fast');

});
};
         </script> 
```

由于某种原因，'#ticket_'.id 没有反映：ticket_1324。

我该如何解决这个问题？

我有第二个问题：

当表单具有类似 last=1 的值时，处理后我需要重新加载页面。

```
<input type="hidden" name="last" value="1" /> 
```

数据是序列化的。我怎样才能得到 last 的值？data.last 不起作用...

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T17:10:00.680

替换`.`为`+`

```
$('#ticket_'+id).fadeOut('fast'); 
```

回答你的第二个问题

您可以通过这种方式获取输入的值

```
if($("input[name='last']").val() == 1){
    // do your processing
 } 
```

# c++ - 查询智能指针的正确使用

> ID：16001802
> 
> 赞同：1
> 
> 时间：2013-04-14T17:09:45.447
> 
> 标签：c++, c++11

我的 entityManager 中有以下代码。

```
void GameObjectManager::updateAll(float frametime)
{   
checkAlive();

    // iterate through the entityManager, updating each entity and then adding it into the quadTree.
    for (auto itr = _gameObjects.begin(); itr != _gameObjects.end(); itr++)
    {
        itr->second->Update(frametime);

        tree->AddObject(itr->second);       
    }   

    // iterate once again through the entityManager but this time checking itself against the quadTree.
    for (auto x = _gameObjects.begin(); x != _gameObjects.end(); x++)
    {
        std::vector<std::unique_ptr<Entity>> returnObjects = tree->GetObjectsAt(x->second->GetPosition().x, x->second->GetPosition().y );       

        for ( int n = 0; n < (int)returnObjects.size(); n++ ) 
        {
            std::unique_ptr<Entity>& collided = returnObjects[n];

            if(object->getEntityName() != collided->getEntityName())
            {
                if(object->GetBoundingRect().intersects(collided->GetBoundingRect()))
                {
                    object->Touch(collided);
                }
            }
        }       
    }   
    tree->Clear();
} 
```

在这个例子中，智能指针的正确用法是什么？当我将实体添加到四叉树时，我应该创建一个 shared_ptr，将其作为参考传递还是使用 std::move？我倾向于前两个中的一个，因为移动指针的所有权会将它从 std::map 中移动，这是我不想做的事情。

在传递信息时我应该遵循哪些简单的规则？什么时候应该使用引用，什么时候应该使用 shared_ptr？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:40:00.347

当使用所有权语义时，我使用以下基本方法来引用。

*   **通过函数参数获取引用。**该函数将使用此对象，但不会在函数的生命周期之外存储对它的引用。一旦函数返回，您就可以安全地销毁对象，而不必担心悬空引用或指针。
*   **返回参考**。您可以自由使用该对象，但不拥有它，并且不能在返回引用的对象的生命周期之外存储对它的引用。

更改`quadTree`为接受和返回引用而不是强指针似乎违反了这两个规则。没关系，但需要进行额外的更改。在你的情况下`quadTree`是一个成员变量。如果发生异常，`quadTree`仍将包含对不属于它的对象的引用，并且可能不再存在。这可以通过使用`quadTree`调用函数范围的局部变量来轻松纠正。这将保证的生命周期`quadTree`不长于`_gameObjects`- 实际所有者。

这只是将第一条规则扩展为包括函数所属对象的生命周期。更改可能看起来像这样（使用指针而不是可以同样应用的引用）。

```
void GameObjectManager::updateAll(float frametime)
{   
    checkAlive();

    quadTree tree;

    // iterate through the entityManager, updating each entity and then adding it into the quadTree.
    for (auto itr = _gameObjects.begin(); itr != _gameObjects.end(); itr++)
    {
        itr->second->Update(frametime);

        tree.AddObject(itr->second.get());      
    }   

    // iterate once again through the entityManager but this time checking itself against the quadTree.
    for (auto x = _gameObjects.begin(); x != _gameObjects.end(); x++)
    {
        std::vector<Entity*> returnObjects = tree->GetObjectsAt(x->second->GetPosition().x, x->second->GetPosition().y );       

        for ( int n = 0; n < (int)returnObjects.size(); n++ ) 
        {
            Entity* collided = returnObjects[n];

            if(object->getEntityName() != collided->getEntityName())
            {
                if(object->GetBoundingRect().intersects(collided->GetBoundingRect()))
                {
                    object->Touch(collided);
                }
            }
        }       
    }   
    //tree.Clear(); // Called by destructor.
} 
```

# c++ - 指针对指针的动态二维数组

> ID：16001803
> 
> 赞同：31
> 
> 时间：2013-04-14T17:09:47.443
> 
> 标签：c++, arrays, pointers, memory-management, dynamic-arrays

这个网站上的第一个计时器，所以这里..

我是 C++ 的新手，我目前正在阅读 DS Malik 的“使用 C++ 2nd ed 的数据结构”一书。

在书中 Malik 提供了两种创建动态二维数组的方法。在第一种方法中，您将变量声明为指针数组，其中每个指针都是整数类型。前任。

```
int *board[4]; 
```

..然后使用 for 循环创建“列”，同时将指针数组用作“行”。

第二种方法，你使用一个指针指向一个指针。

```
int **board;
board = new int* [10]; 
```

等等

我的问题是：哪种方法更好？** 方法对我来说更容易可视化，但第一种方法可以以几乎相同的方式使用。这两种方法都可以用来制作动态二维数组。

编辑：上面的帖子不够清楚。这是我尝试过的一些代码：

```
int row, col;

cout << "Enter row size:";
cin >> row;
cout << "\ncol:";
cin >> col;

int *p_board[row];
for (int i=0; i < row; i++)
    p_board[i] = new int[col];

for (int i=0; i < row; i++)
{
    for (int j=0; j < col; j++)
    {
        p_board[i][j] = j;
        cout << p_board[i][j] << " ";
    }
    cout << endl;
}
cout << endl << endl;

int **p_p_board;
p_p_board = new int* [row];
for (int i=0; i < row; i++)
    p_p_board[i] = new int[col];

for (int i=0; i < row; i++)
{
    for (int j=0; j < col; j++)
    {
        p_p_board[i][j] = j;
        cout << p_p_board[i][j] << " ";
    }
    cout << endl;
} 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-14T17:17:22.687

第一种方法不能用于创建**动态**二维数组，因为这样做：

```
int *board[4]; 
```

您实际上分配了一个由 4 个指针组成的数组`int` **on stack**。因此，如果您现在用动态数组填充这 4 个指针中的每一个：

```
for (int i = 0; i < 4; ++i) {
  board[i] = new int[10];
} 
```

你最终得到的是一个具有**静态**行数（在本例中为 4）和**动态**列数（在本例中为 10）的二维数组。所以它不是**完全**动态的，因为当您在堆栈上分配一个数组时，您**应该**指定一个**常量大小**，即在**编译时**已知。**动态**数组之所以称为动态数组，是**因为**它的大小不必在**编译时**知道，而是可以在**运行时**由某个变量确定。

再一次，当你这样做时：

```
int *board[4]; 
```

或者：

```
const int x = 4; // <--- `const` qualifier is absolutely needed in this case!
int *board[x]; 
```

**您提供一个在编译时**已知的常量（在本例中为 4 或`x`），以便编译器现在可以为您的数组**预分配**此内存，并且当您的程序加载到内存中时，它已经拥有该`board`数组的内存量，这就是为什么它被称为**static**，即因为大小是**硬编码的**并且**不能动态更改**（在运行时）。

另一方面，当你这样做时：

```
int **board;
board = new int*[10]; 
```

或者：

```
int x = 10; // <--- Notice that it does not have to be `const` anymore!
int **board;
board = new int*[x]; 
```

编译器不知道需要多少内存`board`数组，因此它不会**预先分配**任何东西。但是当您启动程序时，数组的大小将由`x`变量的值（在运行时）决定，并且数组的相应空间`board`将分配在所谓的**堆上**- 计算机上运行的所有程序都可以的内存区域预先（在编译时）分配**未知数量的内存供个人使用。**

因此，要真正创建动态二维数组，您必须使用第二种方法：

```
int **board;
board = new int*[10]; // dynamic array (size 10) of pointers to int

for (int i = 0; i < 10; ++i) {
  board[i] = new int[10];
  // each i-th pointer is now pointing to dynamic array (size 10) of actual int values
} 
```

我们刚刚创建了一个 10 x 10 维度的方形二维数组。要遍历它并用实际值填充它，例如 1，我们可以使用嵌套循环：

```
for (int i = 0; i < 10; ++i) {   // for each row
  for (int j = 0; j < 10; ++j) { // for each column
    board[i][j] = 1;
  }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-14T17:16:39.280

您对第二种方法的描述仅给您一个一维数组：

```
int *board = new int[10]; 
```

这只是分配一个包含 10 个元素的数组。也许你的意思是这样的：

```
int **board = new int*[4];
for (int i = 0; i < 4; i++) {
  board[i] = new int[10];
} 
```

在这种情况下，我们分配 4 个`int*`s，然后将它们中的每一个指向一个动态分配的 10 个数组`int`。

所以现在我们将其与`int* board[4];`. 主要区别在于，当您使用这样的数组时，“行”的数量必须在编译时知道。这是因为数组必须具有编译时固定大小。如果您想返回这个`int*`s 数组，您也可能会遇到问题，因为该数组将在其作用域结束时被销毁。

动态分配行和列的方法确实需要更复杂的措施来避免内存泄漏。您必须像这样释放内存：

```
for (int i = 0; i < 4; i++) {
  delete[] board[i];
}
delete[] board; 
```

我必须推荐使用标准容器。您可能喜欢使用 a`std::array<int, std::array<int, 10> 4>`或 a `std::vector<std::vector<int>>`，您将其初始化为适当的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T17:49:29.223

在这两种情况下，您的内部维度都可以动态指定（即取自变量），但区别在于外部维度。

这个问题基本上等同于以下问题：

> `int* x = new int[4];`比“更好”吗`int x[4]`？

答案是：“*不*，除非您需要动态选择该数组维度。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-21T15:32:17.847

这可以通过这种方式完成

1.  我使用过运算符重载
2.  重载分配
3.  重载的复制构造函数

    ```
    /*
     * Soumil Nitin SHah
     * Github: https://github.com/soumilshah1995
     */

    #include <iostream>
    using namespace std;
            class Matrix{

    public:
        /*
         * Declare the Row and Column
         *
         */
        int r_size;
        int c_size;
        int **arr;

    public:
        /*
         * Constructor and Destructor
         */

        Matrix(int r_size, int c_size):r_size{r_size},c_size{c_size}
        {
            arr = new int*[r_size];
            // This Creates a 2-D Pointers
            for (int i=0 ;i < r_size; i++)
            {
                arr[i] = new int[c_size];
            }

            // Initialize all the Vector to 0 initially
            for (int row=0; row<r_size; row ++)
            {
                for (int column=0; column < c_size; column ++)
                {
                    arr[row][column] = 0;
                }
            }
            std::cout << "Constructor -- creating Array Size ::" << r_size << " " << c_size << endl;
        }

        ~Matrix()
        {
            std::cout << "Destructpr  -- Deleting  Array Size ::" << r_size <<" " << c_size << endl;

        }

        Matrix(const Matrix &source):Matrix(source.r_size, source.c_size)

        {
            for (int row=0; row<source.r_size; row ++)
            {
                for (int column=0; column < source.c_size; column ++)
                {
                    arr[row][column] = source.arr[row][column];
                }
            }

            cout << "Copy Constructor " << endl;
        }

    public:
        /*
         * Operator Overloading
         */

        friend std::ostream &operator<<(std::ostream &os, Matrix & rhs)
        {
            int rowCounter = 0;
            int columnCOUNTER = 0;
            int globalCounter = 0;

            for (int row =0; row < rhs.r_size; row ++)
            {
                for (int column=0; column < rhs.c_size ; column++)
                {
                    globalCounter = globalCounter + 1;
                }
                rowCounter = rowCounter + 1;
            }

            os << "Total There are " << globalCounter << " Elements" << endl;
            os << "Array Elements are as follow -------" << endl;
            os << "\n";

            for (int row =0; row < rhs.r_size; row ++)
            {
                for (int column=0; column < rhs.c_size ; column++)
                {
                    os << rhs.arr[row][column] << " ";
                }
            os <<"\n";
            }
            return os;
        }

        void operator()(int row, int column , int Data)
        {
            arr[row][column] = Data;
        }

        int &operator()(int row, int column)
        {
            return arr[row][column];
        }

        Matrix &operator=(Matrix &rhs)
                {
                    cout << "Assingment Operator called " << endl;cout <<"\n";
                    if(this == &rhs)
                    {
                        return *this;
                    } else
                        {
                        delete [] arr;

                            arr = new int*[r_size];
                            // This Creates a 2-D Pointers
                            for (int i=0 ;i < r_size; i++)
                            {
                                arr[i] = new int[c_size];
                            }

                            // Initialize all the Vector to 0 initially
                            for (int row=0; row<r_size; row ++)
                            {
                                for (int column=0; column < c_size; column ++)
                                {
                                    arr[row][column] = rhs.arr[row][column];
                                }
                            }

                            return *this;
                        }

                }

    };

                int main()
    {

        Matrix m1(3,3);         // Initialize Matrix 3x3

        cout << m1;cout << "\n";

        m1(0,0,1);
        m1(0,1,2);
        m1(0,2,3);

        m1(1,0,4);
        m1(1,1,5);
        m1(1,2,6);

        m1(2,0,7);
        m1(2,1,8);
        m1(2,2,9);

        cout << m1;cout <<"\n";             // print Matrix
        cout << "Element at Position (1,2) : " << m1(1,2) << endl;

        Matrix m2(3,3);
        m2 = m1;
        cout << m2;cout <<"\n";

        print(m2);

        return 0;
    } 
    ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-30T22:37:13.593

此代码在对外部库的要求很少的情况下运行良好，并展示了`int **array`.

这个答案表明**每个**数组都是动态大小的，以及如何将动态大小的叶子数组分配到动态大小的分支数组中。

该程序采用以下格式从 STDIN 获取参数：

```
2 2   
3 1 5 4
5 1 2 8 9 3
0 1
1 3 
```

下面的程序代码...

```
#include <iostream>

int main()
{
    int **array_of_arrays;

    int num_arrays, num_queries;
    num_arrays = num_queries = 0;
    std::cin >> num_arrays >> num_queries;
    //std::cout << num_arrays << " " << num_queries;

    //Process the Arrays
    array_of_arrays = new int*[num_arrays];
    int size_current_array = 0;

    for (int i = 0; i < num_arrays; i++)
    {
        std::cin >> size_current_array;
        int *tmp_array = new int[size_current_array];
        for (int j = 0; j < size_current_array; j++)
        {
            int tmp = 0;
            std::cin >> tmp;
            tmp_array[j] = tmp;
        }
        array_of_arrays[i] = tmp_array;
    }

    //Process the Queries
    int x, y;
    x = y = 0;
    for (int q = 0; q < num_queries; q++)
    {
        std::cin >> x >> y;
        //std::cout << "Current x & y: " << x << ", " << y << "\n";
        std::cout << array_of_arrays[x][y] << "\n";
    }

    return 0;
} 
```

这是一个非常简单的实现，`int main`仅依赖于`std::cin`and `std::cout`。准系统，但足以展示如何使用简单的多维数组。

# sql-server - Dapper 是否使用编号参数，例如在 Massive 中

> ID：16001809
> 
> 赞同：2
> 
> 时间：2013-04-14T17:10:01.287
> 
> 标签：sql-server, dapper, massive

Dapper 是否使用诸如 Massive(@0, @1, ...) 中的编号参数，而不是命名为 (@a, @b, ...)？

有必要创建一个查询

```
//select @0 as val union select @1 union select @2 union select @3 union select @4 
//union select @5 union select @6 union select @7 union select @8 union select @9
var sb = new StringBuilder("select @0 as val");
for (int i = 1; i < 10; i++)
{
    sb.AppendFormat(" union select @{0}", i);
}
var query = sb.ToString();
//---Dapper = fail
var db = Connection;
var list = db.Query(query, param: new object[] { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 });
//---Massive = ok
var db2 = new Massive.DynamicModel(coins);
var list2 = db2.Query(query, args: new object[] { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9 }); 
```

Dapper 的问题有哪些解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:18:14.740

Massive 在他们的查询中使用位置参数，但 dapper 使用命名参数。因此，在大规模中，您可以传入参数数组，例如：`new int[] {1,2,3}`而在 dapper 中，您需要传入参数对象，例如`new { a = 1, b = 2 }`.

要使用 dapper 实现类似的解决方案，您可以创建一个`DynamicParameters`对象，您可以在其中传递参数字典，其中键是参数的名称，值是参数的值，`{"0",0}, {"1", 1},`诸如此类

您可以使用 LINQ 轻松地将数组转换为字典：

```
var dictionary = new object[] {0, 1, 2, 3, 4, 5, 6, 7, 8, 9}
    .Select((item, ind) => new {ind = ind.ToString(), item})
    .ToDictionary(item => item.ind, item => item.item);

DynamicParameters p = new DynamicParameters(dictionary);

var list = db.Query(query, param: p); 
```

# oauth-2.0 - GCE Python API：oauth2client.util:execute() 最多接受 1 个位置参数（给定 2 个）

> ID：16001811
> 
> 赞同：7
> 
> 时间：2013-04-14T17:10:04.207
> 
> 标签：oauth-2.0, google-compute-engine

我正在尝试使用他们在[https://developers.google.com/compute/docs/api/python_guide#setup上的“hello world”教程开始使用适用于 Google Compute Engine 的 Python API](https://developers.google.com/compute/docs/api/python_guide#setup)

但是，无论何时拨打电话`response = request.execute(auth_http)`，我都会收到以下错误信号，表明我无法进行身份验证：

```
WARNING:oauth2client.util:execute() takes at most 1 positional argument (2 given) 
```

我显然只传递了一个位置参数（auth_http），并且我已经查看了 oauth2client/util.py、apiclient/http.py 和 oauth2client/client.py 的答案，但似乎没有任何问题。我发现[另一个遇到相同问题的堆栈溢出帖子](https://stackoverflow.com/questions/12993108/google-service-account-http-error-500-python)，但似乎在 oauth2client/client.py 中 OAuth2WebServerFlow 类的构造函数中，“access_type”已经设置为“离线”（虽然老实说我不完全了解在设置 oauth2.0 流程方面发生了什么）。

任何建议将不胜感激，并在此先感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-20T05:38:01.583

查看代码，@util.positional(1) 注释正在引发警告。避免使用命名参数。

代替：

```
response = request.execute(auth_http) 
```

做：

```
response = request.execute(http=auth_http) 
```

[https://code.google.com/p/google-api-python-client/source/browse/apiclient/http.py#637](https://code.google.com/p/google-api-python-client/source/browse/apiclient/http.py#637)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T13:22:12.027

我认为文档是错误的。请使用以下内容：

```
auth_http = credentials.authorize(http)

# Build the service
gce_service = build('compute', API_VERSION, http=auth_http)
project_url = '%s%s' % (GCE_URL, PROJECT_ID)

# List instances
request = gce_service.instances().list(project=PROJECT_ID, filter=None, zone=DEFAULT_ZONE)
response = request.execute() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-23T20:40:55.843

你可以在这里做三件事之一：

1 忽略警告，什么也不做。

2 抑制警告并将标志设置为忽略：

```
import oauth2client
import gflags

gflags.FLAGS['positional_parameters_enforcement'].value = 'IGNORE' 
```

3 找出提供位置参数的位置并修复它：

```
import oauth2client
import gflags

gflags.FLAGS['positional_parameters_enforcement'].value = 'EXCEPTION'

# Implement a try and catch around your code:
try:
    pass
except TypeError, e:
    # Print the stack so you can fix the problem, see python exception traceback docs.
    print str(e) 
```

# sql-server-2000 - 无法创建新表

> ID：16001813
> 
> 赞同：-2
> 
> 时间：2013-04-14T17:10:11.053
> 
> 标签：sql-server-2000

我是 SQL Server 2000 的新手，遇到了一个问题。我想创建一个新表，但遇到错误消息，代码如下：

```
create table Buku
(
Kode_Buku char(5) constraint PK_Kode_Buku Primary Key,
Judul_Buku varchar(10)not null,
Nama_Pengarang varchar(30) not null,
Penerbit varchar(30),
Kota_Terbit varchar(30) default,
Tahun_Terbit varchar(4) default,
Bahasa varchar(4) check,
Harga_Jual money,
) 
```

这是错误代码：

> 服务器：消息 170，级别 15，状态 1，第 1
> 行第 1 行：“Buku”附近的语法不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:19:09.087

你有三个问题：

1.  您有多种情况您说`default`了但未指定任何内容
2.  你有一个`check`但没有指定任何东西
3.  您的最后一列定义`money,`以逗号结尾

现在，这些都不会导致您得到确切的错误消息，所以也许还有更多您没有告诉我们的内容（在位*之前*`create table`还有更多代码吗？），但是这些小语法问题过于本地化而无用以这种问答形式。

**编辑**

我刚刚在 SQL Server 2000 实例上运行它，它工作得很好：

```
create table Buku 
(
  Kode_Buku char(5) constraint PK_Kode_Buku Primary Key, 
  Judul_Buku varchar(10) not null, -- added space here
  Nama_Pengarang varchar(30) not null, 
  Penerbit varchar(30), 
  Kota_Terbit varchar(30), -- removed default here
  Tahun_Terbit varchar(4), -- removed default here
  Bahasa varchar(4), -- removed check here
  Harga_Jual money -- removed comma here
) 
```

所以我不确定你在做什么不同，但我无法通过你在问题中提供的信息得到你看到的错误消息。如果您仍然收到此代码的错误消息（并且只有此代码），您需要提供更多信息，例如@@VERSION，您使用什么接口将创建表语句提交到 SQL Server，等等

# java - 更改 Java Swing 应用程序的标题

> ID：16001815
> 
> 赞同：1
> 
> 时间：2013-04-14T17:10:21.540
> 
> 标签：java, swing, title, menubar

我将如何更改我的 java 应用程序的标题（在菜单栏中）。当它启动时，至少在 mac（我的主要开发环境）中，它会显示完整的类名而不是标题。我使用 Swing 作为我的 GUI 制造商，`this.setTitle("JeopardMe");`唯一的改变是标题栏。我想更改菜单栏中的显示。

*我会在这里发布屏幕截图，但显然需要 10 声望才能发布图像并且不允许拥有 10 声望*

我想我需要改变系统整体看待程序的方式，因为在强制退出窗口中，（Mac的粗略相当于任务管理器）是显示类名，我不确定改变菜单栏还会更改强制退出文本。有什么办法可以改变程序的整体身份？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:24:46.293

当您从命令行调用应用程序时，添加以下参数：

```
-Xdock:name=AppName 
```

其中 AppName 是您要查看的标题。

# php - 继续 PHP While 循环将其中断

> ID：16001816
> 
> 赞同：0
> 
> 时间：2013-04-14T17:10:27.980
> 
> 标签：php, csv

while 循环用于读取除第一行之外的 CSV 文件的每一行。`if`但是，当该语句用于忽略第一行时，不会读取任何行。删除该`if`语句允许它按预期读取所有行。为什么是这样？

```
$rowNumber = 1;

// Load CSV into array
$inputFileName = '/var/www/site/data.csv';
$file = fopen($inputFileName, 'r');

while (($row = fgetcsv($file)) !== FALSE) {
    // Ignore row #1 (headers)
    if($rowNumber == 1)
        continue;

    doSomeWork();

    // Increment row number
    $rowNumber++;
}
fclose($file);

echo 'Loaded: ' . $rowNumber . ' rows'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T17:12:59.703

你不需要`continue`那里。尝试

```
$rowNumber = 1;

// Load CSV into array
$inputFileName = '/var/www/site/data.csv';
$file = fopen($inputFileName, 'r');

while (($row = fgetcsv($file)) !== FALSE) {
    // Ignore row #1 (headers)
    if($rowNumber != 1)
    {
    doSomeWork();
    }

    // Increment row number
    $rowNumber++;
}
fclose($file);

echo 'Loaded: ' . $rowNumber . ' rows'; 
```

**编辑**

只是为了解释为什么你`continue`没有按预期工作。PHP手册说

> continue 用于循环结构中以跳过当前循环迭代的其余部分并在条件评估处继续执行，然后开始下一次迭代。

这意味着当您的 continue 被调用时，您的语句`$rowNumber++;`也会被跳过，这意味着您`$rowNumber`始终保持为 1，因此所有行都被跳过:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T17:15:42.617

问题是你`continue`在你增加的那一行之前打了`$rowNumber`。结果，`$rowNumber`在下一次迭代中仍然是 1，并且它再次向前跳过。尝试从 $rowNumber = 0 开始，并将增量放在循环的开头而不是结尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T17:14:07.073

尝试这个：

```
$rowNumber = 1;

// Load CSV into array
$inputFileName = '/var/www/site/data.csv';
$file = fopen($inputFileName, 'r');

while (($row = fgetcsv($file)) !== FALSE) {
    // Ignore row #1 (headers)
    if($rowNumber > 1) {           
       doSomeWork();
    }
    // Increment row number
    $rowNumber++;
}
fclose($file);

echo 'Loaded: ' . $rowNumber . ' rows'; 
```

如果`$rowNumber`大于 1 则将`doSomething()`，否则只会增加`$rowNumber`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T17:16:10.697

这是因为当您继续时，您不会增加 $rowNumber。它始终为 1。当您的文件结束时，while 循环中断并且文件关闭。

# java - 在 Java 中获取 int 的特定位子集

> ID：16001819
> 
> 赞同：3
> 
> 时间：2013-04-14T17:10:59.350
> 
> 标签：java, bit-manipulation

我如何获得 Java 中 int 的特定子集，例如位 5-10？

寻找一种可以传递特定位位置的方法。我不确定如何创建一个在给定输入的情况下会发生变化的掩码，或者即使这是应该如何去做的。

我知道这就是如何让前面说一个 int 的 10 位：（我认为）int x = num >> 22;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:24:10.207

假设您有一个数字`n`，并且想要从`i`到`j`(i=5, j=10) 的位。

注意，这`i=0`会给你最后一点

```
 int value = n & (((1 << (j-i)) - 1) << i ); 
```

会给你结果。

左边的部分很明显：你有一个值，你会在它上面放一个位掩码。

掩码的值为`((1 << (j-i)) - 1) << i`。它说：

*   拿`1`一点（价值`0000000000000001`：）
*   向左移动`j-i`次数（值：2^(10-5) = 2^5 = 32 = `0000000000100000`）
*   扣除 1（值：31 = `0000000000011111`） - 你看到最低位反转了吗？
*   左移`i`次（值：31*32=992 = `0000001111100000`）

因此，您已经获得了位 5 - 10 的位掩码（更准确地说，从 5 到 9，因为不包括第 10 位）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:14:38.270

获取位 1 的值（位索引从 0 到 31）

```
int val = bits & 0x002; 
```

获取第 16 位的值

```
int val = bits & (1<<16); 
```

获取第 n 位的值

```
int val = bits & (1<<n); 
```

# java - 检查文本框中的文本是否与java中的某个单词匹配

> ID：16001831
> 
> 赞同：-1
> 
> 时间：2013-04-14T17:11:58.923
> 
> 标签：java, swing, jbutton, actionlistener

我想检查文本框中的文本是否与某个字符串匹配。我使用了一个动作监听器，当按下按钮时，它将检查文本框中的文本是否与某个单词匹配。

谢谢

这是我尝试过的：

```
enter.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        if (txtbox.getText() == "cat") {
            txtbox.setText("correct");
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:45:46.587

**==**用于检查参考。

**equals**用于检查对象的实际内容。

下面的代码显示了如何更新`JTextField`.

```
final JTextField textField = new JTextField("cat");
JButton button = new JButton("Click");
// Code
button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent arg0) {
                if(textField.getText().equals("cat")) {
                    textField.setText("Changes");
                } else {
                    textField.setText("Already Changed");
                }
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:16:51.863

***==***用于比较引用， ***equals***方法（存在于***Object***类中）用于比较对象的值。所以在你的情况下，因为你想比较这个值，所以考虑使用等于

```
String myString ="cat";
if(myString.equals("cat")){
 //do something    
 } 
```

# algorithm - MergeSort 给出 StackOverflow 错误

> ID：16001832
> 
> 赞同：0
> 
> 时间：2013-04-14T17:12:04.377
> 
> 标签：algorithm, sorting, merge, stack-overflow, mergesort

这是mergeSort的代码，这在第53和54行给出了stackoverflow错误（mergeSort（l，m）；和mergeSort（m，h）；）任何帮助都将被视为非常有价值，请帮助我，我是不知所云，谢谢。

```
package codejam;

public class vector {
    static int[] a;
    static int[] b;
    public static void main(String[] args) {
     int[] a1 = {12,33,2,1};
     int[] b1 = {12,333,11,1};
        mergeSort(0,a1.length);
        a1=b1;
        mergeSort(0,b1.length);
        for (int i = 0; i < a1.length; i++) {
            System.out.println(a[i]);
        }

    }

    public static void merge(int l,int m,int h) {
        int n1=m-l+1;
        int n2 = h-m+1;
        int[] left = new int[n1];
        int[] right = new int[n2];
        int k=l;
        for (int i = 0; i < n1 ; i++) {
            left[i] = a[k];
            k++;
        }
        for (int i = 0; i < n2; i++) {
            right[i] = a[k];
            k++;
        }
        left[n1] = 100000000;
        right[n1] = 10000000;
        int i=0,j=0;
        for ( k =l ; k < h; k++) {
            if(left[i]>=right[j])
            {
                a[k] = right[j];
                j++;
            }
            else
            {
                a[k] = left[i];
                i++;
            }
        }
    }

     public static void mergeSort(int l,int h) {
     int m =(l+h)/2;
     if(l<h)
     {
         mergeSort(l,m);
         mergeSort(m,h);
         merge(l,m,h);;
     }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:30:30.943

以下是参数 l=0 和 h=4 的 mergeSort 函数的递归迭代表

![在此处输入图像描述](https://i.stack.imgur.com/PAr3i.jpg)

当 l 的值为 0 且 h 的值为 1 时，表达式计算 m 值，结果为 0 但我们正在检查条件 h 仍为 1，因此 0<1 变为 true ，此 mergeSort 函数的递归调用形成模式，这种模式不会让函数终止，堆栈内存不足，导致堆栈溢出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-05T05:55:23.227

```
import java.lang.*;
import java.util.Random;

public class MergeSort {

    public static int[] merge_sort(int[] arr, int low, int high ) {

        if (low < high) {
            int middle = low + (high-low)/2;
            merge_sort(arr,low, middle);
            merge_sort(arr,middle+1, high);
            arr = merge (arr,low,middle, high);
        }           
            return arr;
    }

    public static int[] merge(int[] arr, int low, int middle, int high) {

        int[] helper = new int[arr.length];
        for (int i = 0; i <=high; i++){
          helper[i] = arr[i];
        }
        int i = low;
        int j = middle+1;
        int k = low;
        while ( i <= middle && j <= high) {
            if (helper[i] <= helper[j]) {
                arr[k++] = helper[i++];
            } else {
                arr[k++] = helper[j++];
            }

        }

        while ( i <= middle){
            arr[k++] = helper[i++];
        }
        while ( j <= high){
            arr[k++] = helper[j++];
        }

        return arr;
    }

    public static void printArray(int[] B) {
        for (int i = 0; i < B.length ; i++) {
            System.out.print(B[i] + " ");
        }
        System.out.println("");
    }

    public static int[] populateA(int[] B) {
        for (int i = 0; i < B.length; i++) {
            Random rand = new Random();
            B[i] =  rand.nextInt(20);
        }
        return B;
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        int A[] = new int[10];
        A = populateA(A);
        System.out.println("Before sorting");
        printArray(A);

        A = merge_sort(A,0, A.length -1);

        System.out.println("Sorted Array");
        printArray(A);

    }

} 
```

# iphone - 滚动视图的问题，仅在完成的应用程序中

> ID：16001833
> 
> 赞同：0
> 
> 时间：2013-04-14T17:12:13.527
> 
> 标签：iphone, ios, xcode, uiscrollview, zooming

一个月前我将我的应用程序上传到了应用商店，但现在我收到一些抱怨，当他们进入应用程序中的特定位置时应用程序崩溃（你可以看到一张可以放大和缩小的图片，并滚动）。在我的 iPhone 上，我可以输入图片，但是滚动很奇怪！我不能再左右滚动了（如果你放大很多，这很重要！）...我在 xcode 的模拟器中尝试过，但一切正常！我有一个完整版和一个精简版..问题出在他们两个身上！我的 iPhone 和模拟器都有最新的 iOS！

你觉得哪里不对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:55:31.187

我只是再次将相同的代码上传到应用商店，然后就可以了！

# wordpress - wordpress 自定义插件获取所有帖子标题和永久链接

> ID：16001837
> 
> 赞同：0
> 
> 时间：2013-04-14T17:12:52.070
> 
> 标签：wordpress

我正在玩一个自定义的 wordpress 插件。目标是显示所有帖子，当你点击一个帖子时，它会从选定的永久链接中生成一个二维码.....

问题是我不知道如何从插件中获取所有帖子。我和我最好的朋友 google 一起玩了一段时间，但我们的搜索结果一无所获。

问题：如何从插件中获取所有帖子标题和永久链接？我一直在尝试使用常规的“新 WP_Query”对象，但它什么也没返回

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:56:23.413

弄清楚了。

我只是从另一个加载 wp-load.php 文件的文件中加载。

稍后我会发布我的代码以供参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:57:43.827

我用来[**`get_posts`**](http://codex.wordpress.org/Function_Reference/get_posts)在插件设置页面中显示包含所有帖子的下拉列表：

```
public function posts_html()
{
    $value = get_option( 'especial_edit_post' );
    $args = array( 'numberposts' => -1 );
    $posts = get_posts( $args );

    echo "<select name='especial_edit_post' id='especial_edit_post'>";
    $selected = selected( '', $value, false );
    echo "<option value='' {$selected}>-none-</option>";

    foreach( $posts as $post )
    {
        $selected = selected( $post->ID, $value, false );
        echo "<option value='{$post->ID}' {$selected}>{$post->post_title}</option>";
    }
    echo '</select>';

} 
```

# java - 提交后如何取消选中所有复选框？

> ID：16001838
> 
> 赞同：1
> 
> 时间：2013-04-14T17:12:56.437
> 
> 标签：java, checkbox

在我的程序中，我正在创建一个菜单，您可以在其中选择不同的菜肴。问题是，如果他们取消选择某些东西，它仍然会被添加到总数中，并且在提交他们的选择后，我必须重新运行程序才能选择新的选择。当他们取消选中它时，我该怎么做，它仍然没有被添加并在提交后刷新菜单？

这是我的侦听器，用于处理选中复选框的情况，另一个用于计算总数。

```
 private class SelectionListener implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent event) {
        if (edamame.isSelected()) {
            total1 = total1 + 4.99;
        } else if (calamari.isSelected()) {
            total1 = total1 + 8.99;
        } else if (shrimpTempura.isSelected()) {
            total1 = total1 + 8.99;
        } else if (tempuraCombo.isSelected()) {
            total1 = total1 + 9.99;
        } else if (gyoza.isSelected()) {
            total1 = total1 + 3.99;
        } else if (pepsi.isSelected()) {
            total2 = total2 + 2.99;
        } else if (sprite.isSelected()) {
            total2 = total2 + 2.99;
        } else if (mtDew.isSelected()) {
            total2 = total2 + 2.99;
        } else if (drPepper.isSelected()) {
            total2 = total2 + 2.99;
        } else if (budlight.isSelected()) {
            total2 = total2 + 4.99;
        } else if (budweiser.isSelected()) {
            total2 = total2 + 4.99;
        } else if (playboy.isSelected()) {
            total3 = total3 + 12.99;
        } else if (california.isSelected()) {
            total3 = total3 + 3.99;
        } else if (volcano.isSelected()) {
            total3 = total3 + 13.99;
        } else if (goldenCali.isSelected()) {
            total3 = total3 + 7.99;
        } else if (shrimpTemp.isSelected()) {
            total3 = total3 + 6.99;
        } else if (tunaR.isSelected()) {
            total3 = total3 + 5.99;
        } else if (avocadoR.isSelected()) {
            total3 = total3 + 4.99;
        } else if (spicyCaliR.isSelected()) {
            total3 = total3 + 5.99;
        } else if (salmonR.isSelected()) {
            total3 = total3 + 5.99;
        } else if (crab.isSelected()) {
            total4 = total4 + 3.99;
        } else if (salmon.isSelected()) {
            total4 = total4 + 3.99;
        } else if (tuna.isSelected()) {
            total4 = total4 + 3.99;
        } else if (whiteT.isSelected()) {
            total4 = total4 + 3.99;
        } else if (eel.isSelected()) {
            total4 = total4 + 3.99;
        } else if (crabstick.isSelected()) {
            total4 = total4 + 3.99;
        } else if (lobster.isSelected()) {
            total4 = total4 + 3.99;
        } else if (bulgogi.isSelected()) {
            total5 = total5 + 18.99;
        } else if (kimchiJi.isSelected()) {
            total5 = total5 + 12.99;
        } else if (kalbee.isSelected()) {
            total5 = total5 + 24.99;
        } else if (soonTofu.isSelected()) {
            total5 = total5 + 11.99;
        } else if (bimbimap.isSelected()) {
            total5 = total5 + 10.99;
        } else if (dolSot.isSelected()) {
            total5 = total5 + 12.99;
        } else if (dukMan.isSelected()) {
            total5 = total5 + 13.99;
        } else if (nakJi.isSelected()) {
            total5 = total5 + 16.99;
        } else if (tempuraU.isSelected()) {
            total5 = total5 + 12.99;
        } else if (nabeyaki.isSelected()) {
            total5 = total5 + 13.99;
        } else if (kalbeeTang.isSelected()) {
            total5 = total5 + 14.99;
        }
    }
}

 private class TotalListener implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent event) {
        NumberFormat desiredlook = NumberFormat.getCurrencyInstance();
        desiredlook.setMaximumFractionDigits(2);
        desiredlook.setMinimumFractionDigits(2);
        name = getName.getText();
        total = (total1 + total2 + total3 + total4 + total5) * 1.065;
        labelTotal.setText(name + " your total is "
                + desiredlook.format(total));

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:27:59.470

试试这个java代码：

```
YourCheckBox.setSelected (boolean isSelected); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:31:13.770

您`SelectionListener`会表明每个`JCheckBox`. 这会产生一个问题，即每个复选框的单击操作相互依赖并且难以管理。

为避免这种交叉依赖，您可以`ActionListeners`为每个组件创建单独的组件。[Action](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)接口可用于创建多个具体动作，由此可以将要添加的数量传递到其实现的构造函数中。例如

```
class SelectionListener extends AbstractAction { 

    private final double amount;
    public SelectionListener(double amount) {
        this.amount = amount;
    }

    @Override
    public void actionPerformed(ActionEvent event) {
        JCheckBox checkBox = (JCheckBox)event.getSource();
        if (checkBox.isSelected()) {
            total1 += amount;
        }
    }
} 
```

# java - 如何使用 Guice 注入 Google App Engine 数据存储？

> ID：16001843
> 
> 赞同：0
> 
> 时间：2013-04-14T17:14:10.113
> 
> 标签：java, google-app-engine, dependency-injection, google-cloud-datastore, guice

我正在尝试通过 Guice 将 Google App Engine 的数据存储区注入到我的服务中：

```
public class FooServiceImpl implements FooService {

    private final DatastoreService datastoreService;

    @Inject
    public FooServiceImpl (DatastoreService datastoreService) {
        this.datastoreService = datastoreService;
    }
} 
```

但是当我尝试运行它时，我收到以下错误：

> 没有绑定 com.google.appengine.api.datastore.DatastoreService 的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:01:26.097

将[`@Provides`](https://code.google.com/p/google-guice/wiki/ProvidesMethods)方法添加到您的模块：

```
@Provides
DatastoreService provideDatastoreService(){
    return DatastoreServiceFactory.getDatastoreService();
} 
```

# iphone - iOS 中 ID3 标签的正确编码

> ID：16001847
> 
> 赞同：0
> 
> 时间：2013-04-14T17:14:28.847
> 
> 标签：iphone, ios, audio, encoding, id3-tag

我正在尝试从我的项目中的一堆 mp3 文件中获取 ID3 标签。

```
AudioFileGetProperty(audioFile, kAudioFilePropertyInfoDictionary, &size, &metadataDictionary); 
```

如果标签不包含西里尔符号，则设备上的输出看起来正常。但是我有时会得到这样的值：

```
album = "\U00ce\U00f2\U00ea\U00f0\U00fb\U00f2\U00ee\U00e5 \U00d0\U00e0\U00e4\U00e8\U00ee 102.5FM";
"approximate duration in seconds" = "260.623"; 
```

它会导致符号显示失真（[http://d.pr/i/X9wG](http://d.pr/i/X9wG)）。

有没有办法将这些符号解码成可读的形式？我已经试过了

```
NSString* value = [metadataDictionary objectForKey: key];
NSData* data = [value dataUsingEncoding: NSASCIIStringEncoding];
NSString* string = [[NSString alloc] initWithData: data encoding: NSUTF8StringEncoding]; 
```

但结果保持不变。

任何帮助将不胜感激！

**[更新]**

我倾向于尝试[这个 SO answer](https://stackoverflow.com/a/9794280/1136481)中提供的解决方案，但是还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T16:46:49.750

这是将这些符号解码为可读形式的方法：

```
NSString *value = [metadataDictionary objectForKey:@"artist"];
const char *cString = [value cStringUsingEncoding:NSWindowsCP1252StringEncoding];
NSString *artist = [NSString stringWithCString:cString encoding:NSWindowsCP1251StringEncoding]; 
```

# php - SQL命令获取不到单词相关的句子

> ID：16001848
> 
> 赞同：0
> 
> 时间：2013-04-14T17:14:30.243
> 
> 标签：php, mysql

我想从数据库中获取与给出单词相关的句子。假设这是一个 mysql 表。

```
id-      sentence  
1-     This is a web page  
2-     This is spiderweb   
3-     Here is a webspider     
4-     create anyWebPage 
```

这是一个简单的代码。

```
<?php  
     // ignore all syntax error in this code if present.
     $input = 'web';
     $sql = mysql_query("
            SELECT * FROM `table_name` 
            WHERE sentence LIKE('%$input%')
     ");
 // echo The given result.
 ?> 
```

如果我使用`LIKE %....%`则显示所有结果。
如果我使用`LIKE ...%`Then 它不能给出任何结果，因为没有从我开始的句子`$input = 'web';`
我想得到那些世界从**web开始的****句子**
要求的结果
1- 这是一个**网页**
3 - 这是一个webspider

 **请指导我如何获得喜欢这些结果。
谢谢........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:27:36.197

[引号应该在它们周围`%`](http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html)而不是在它们里面，比如`LIKE('%$input%')`. 请注意，您使用的任何字符串比较都取决于[排序规则是区分大小写还是不区分大小写](http://dev.mysql.com/doc/refman/5.0/en/case-sensitivity.html)：

> 默认字符集和排序规则是 latin1 和 latin1_swedish_ci，因此默认情况下非二进制字符串比较不区分大小写。这意味着如果您使用 col_name LIKE 'a%' 进行搜索，您将获得所有以 A 或 a 开头的列值。

[`mysql_`](http://php.net/manual/en/changelog.mysql.php)已弃用，使用[`mysqli_`](http://php.net/manual/en/book.mysqli.php)or [`PDO::`](http://php.net/manual/en/book.pdo.php)。

您没有转义输入（[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)）。

~~您正在声明`$inpput`和使用`$input`.~~

还要检查[`FULLTEXT`MySQL](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)中的搜索选项以优化速度。

**或者，如果您只**需要匹配整个单词，您可以[`REGEXP`](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)这样使用：

```
SELECT * FROM test WHERE sentence REGEXP '([^[:alnum:]]|^)$input([^[:alnum:]]|$)' 
```

此处的[示例](http://pastebin.com/PANtzKtv)[1]`[^[:alnum:]]`匹配除数字和字母（逗号、句号、破折号）和`^/$`字符串的开头/结尾之外的所有内容。

[[ **1** ] 只是 pastebin，[sqlfiddle](http://sqlfiddle.com/)现在已经关闭：-/]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:37:29.613

Nabheet 的回答是正确的，但它忽略了字符串的第一个单词以搜索词开头的情况（例如，“web”）。此查询解决了这两种情况：

```
$sql = mysql_query("SELECT * FROM `table_name` WHERE sentence LIKE "$input%" or sentence LIKE "% $input%" ;"); 
```

此查询中的第一个子句将检测句子中的第一个单词何时以搜索词开头，第二个子句将检测任何其他词何时以搜索词开头。

其他答案正确地指出了清理搜索词以防止 SQL 注入的重要性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T17:26:49.957

看起来空格字符需要成为您的 WHERE LIKE 标准的一部分。你可以把它放在 % 和 web.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T17:29:20.000

看起来您想要进行全文搜索 - [http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)
它是使用语法完成的 -[`MATCH() ... AGAINST`](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html#function_match)

```
SELECT * FROM `table_name` WHERE MATCH(sentence) AGAINST('$input*' IN BOOLEAN MODE) 
```

note`*`是全文搜索中的通配符搜索。[http://dev.mysql.com/doc/refman/5.1/en/fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.1/en/fulltext-boolean.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T17:24:26.280

```
$sql = mysql_query("SELECT * FROM `table_name` 
                    WHERE sentence LIKE('% ". $input. "%')"); 
```

您应该添加空格字符。**

# php - 如何隐藏隐藏字段中的值？

> ID：16001849
> 
> 赞同：0
> 
> 时间：2013-04-14T17:14:30.930
> 
> 标签：php, hidden-field

我有一个简单的表单，其中有 3 个隐藏字段，通过它我将值传递到另一个页面。

但我不希望任何人通过*查看页面源*或 Fire Bug 看到它。我正在使用 PHP。

```
<form action=" " method="post" name="push">
    <input type="hidden" name="publisherid" value="createcoolapps"/>
    <input type="hidden" name="username"value="buzzmo"/>
    <input type="hidden" name="pass" value="Javea0615"/>
    <select name="appid">
        <option value="QRScanner">app1</option>
        <option value="app2">app2</option>
        <option value="app3">app3 </option>
        <option value="app4">app4</option>
    </select > 
    <input type="hidden" name="topics" value=" "/>
    Notification Message:<br />
    <textarea style="width:10; height:10;" name="pushmessage"></textarea><br/>
    <input type="submit" value="Push"/>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:15:28.177

您无法在 HTML 中隐藏任何内容。如果它在代码中，任何人都可以看到它。如果您需要在页面之间传递值并将它们隐藏，那么您需要使用[Sessions](http://php.net/manual/en/features.sessions.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T17:16:00.390

你不能。如果您想对访问者保密，请不要将其提供给访问者的浏览器。

将数据存储在服务器上，并将与该数据相关的令牌发送到浏览器。当浏览器提交数据时，使用令牌查找数据。

您可以为此使用会话（尽管要注意竞争条件）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T17:15:19.980

您不能隐藏隐藏表单元素的值。您可以加密它或尝试以其他方式保护它，但它会在那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T17:55:58.387

正如已经说过的，`$_SESSION`是要走的路。
如果你不能，有一些***方法***可以保护隐藏字段，并具有一定的安全性。
解决方案是
1\. 对数据进行编码并发送编码数据和哈希值，
2\. 验证数据是否在第 2 页上发生了更改并在那里对其进行解码。

如果您有兴趣，请发表评论，我将提供一些示例。

# node.js - 我可以在 socket.io 中获取客户端连接到的房间列表吗？

> ID：16001850
> 
> 赞同：1
> 
> 时间：2013-04-14T17:14:34.490
> 
> 标签：node.js, socket.io

它在顶部说什么 - 对于给定的客户，我可以看到他们加入了哪些房间吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:42:29.087

给定 a`socket`你可以得到它通过 加入的所有房间`io.sockets.manager.roomClients[socket.id]`。

见[这里](https://github.com/LearnBoost/socket.io/wiki/Rooms#rooms-a-client-has-joined)。

# c++ - 在 C++ 中分配命名空间

> ID：16001853
> 
> 赞同：6
> 
> 时间：2013-04-14T17:14:43.933
> 
> 标签：c++, c++11, namespaces

我对命名空间有点困惑。这是我所知道的。通常，如果您在代码中有这样的命名空间

```
namespace foo
{ 
   namespace gfoo
   {
       class apple
       {..};
   }
} 
```

现在通过使用以下代码

```
using namespace foo::gfoo; 
```

您可以直接访问该类`apple`，而无需在类之前键入名称空间`foo::gfoo::apple`。

现在我在一些代码示例中看到了

```
namespace qi = boost::spirit::qi 
```

然后在方法中它被用作

```
void someMethod()
 {
   using qi::char_
 } 
```

现在我的问题是做类似的事情的目的是什么 `namespace qi = boost::spirit::qi`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-14T17:17:42.097

它允许将一个（通常是复杂的）命名空间别名为您选择的命名空间之一。

例如：

`namespace fs = boost::filesystem;`

... 意味着你可以打电话给 ...

`fs::exists( myFilePath );`

...无需通过写出的努力...

`boost::filesystem::exists( myFilePath );`

... 每次。

主要是为了方便。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T17:20:59.203

using 指令使已用命名空间中的名称可用^*，而命名空间别名为命名空间创建另一个名称，它只为现有命名空间提供不同（希望更短或更简单）的名称，但您仍需要限定或使用使用指令使其*可用*。

^*我在这里以非常模糊的方式使用*可用*。在 using 指令之后，将*used*命名空间中的符号添加到当前命名空间和已使用命名空间层次结构相交的级别。查找将一如既往地从当前命名空间开始，然后向外移动，当它到达层次结构中的公共点时，它将从命名空间中找到原本需要限定的符号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T17:34:52.193

每次你看到一个长屁股的名字（或任何一般的表达方式），这都是一个拼写错误甚至容易错过的*故意*差异的机会。使用最近的术语，声明`qi`别名是[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)原则的实际应用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T17:17:30.223

目的是创建更易于键入和阅读的别名。[这里](https://stackoverflow.com/questions/1211399/in-c-what-is-a-namespace-alias)
已经存在关于命名空间别名的问题，所以这可能是重复的。

# javascript - 在表 jquery 中查找特定值

> ID：16001854
> 
> 赞同：2
> 
> 时间：2013-04-14T17:14:44.977
> 
> 标签：javascript, jquery, html

我需要从表中找到一个给定的值。我如何使用 jquery 来做到这一点。我不想像这样遍历整个表

```
$('table tr td').each(function(){} 
```

有没有更好的方法来做到这一点。价值意义`<td>value</td>`。一个单元格之间的值

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:18:20.130

尝试使用[`:contains()`选择器](http://api.jquery.com/contains-selector/)

```
$('table td:contains("some text")') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T17:19:16.337

如果它是单元格内的文本，请尝试以下操作：

```
$("#myTbl tr td:contains(World)").attr("style","color:red"); 
```

**jsFiddle**：http: [//jsfiddle.net/hescano/cnSgV/](http://jsfiddle.net/hescano/cnSgV/)

# php - 在数组中查找部分匹配

> ID：16001856
> 
> 赞同：1
> 
> 时间：2013-04-14T17:14:58.037
> 
> 标签：php

我正在尝试获取任何具有“release_”键的数据......我想我应该使用 array_filter，但我很难为参数 2 编写正确的函数。

这是我的数组：

```
Array
    (
    [release_date] => Array
        (
            [type] => date
            [value] => 1999-03-31
        )

    [duration] => Array
        (
            [type] => time
            [value] => 136
        )
    [directors] => Array
        (
            [type] => page
            [value] => 13,14
        )
    [writers] => Array
        (
            [type] => page
            [value] => 13,14
        )
    [release_us] => Array
        (
            [type] => date
            [value] => 1999-03-30
        )
    [release_ge] => Array
        (
            [type] => date
            [value] => 1999-06-16
        )
    ) 
```

我希望我的返回数组只有 release_ 存在的数组..所以它看起来像：

```
Array
    (
    [release_date] => Array
        (
            [type] => date
            [value] => 1999-03-31
        )

    [release_us] => Array
        (
            [type] => date
            [value] => 1999-03-30
        )
    [release_ge] => Array
        (
            [type] => date
            [value] => 1999-06-16
        )
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:17:54.487

```
function preg_grep_keys( $pattern, $input, $flags = 0 )
{
    $keys = preg_grep( $pattern, array_keys( $input ), $flags );
    $vals = array();
    foreach ( $keys as $key )
    {
        $vals[$key] = $input[$key];
    }
    return $vals;
} 
```

用法：

`preg_grep_keys("/release_/", $yourArray);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:21:21.173

只需创建一个`foreach`循环遍历您的原始数组：

```
$nArr = array();
foreach($arr as $key => $value) {
    if(strpos($key, 'release_') !== false) {
        $nArr[$key] = $value;
    }
} 
```

**编辑**

或以函数形式：

```
function checkKeys($arr, $keyCheck) {
    $nArr = array();
    foreach($arr as $key => $value) {
        if(strpos($key, $keyCheck) !== false) {
            $nArr[$key] = $value;
        }
    }
    return $nArr;
} 
```

然后使用`$release = checkKeys($myArray, 'release_');`

# java - 我的异常处理有什么问题（try-catch 块）？

> ID：16001858
> 
> 赞同：0
> 
> 时间：2013-04-14T17:15:05.770
> 
> 标签：java, try-catch

我正在尝试使用 zxing 从一组 jpeg 文件中读取和解码条形码。所以我将我的程序连接到一个 mysql 数据库，其中我有一个表，其中存储了每个 jpeg 文件路径。但是每次我的 try 块捕获异常时，它都会中断循环并在那里结束执行！我不得不去阅读更多关于尝试块的信息，但我似乎无法解决问题。请帮忙！！！真是让我头疼！这是我的代码的一部分：

```
int next_row=1;

String file="";

try 
{
        //Register the JDBC driver for MySQL.
        Class.forName(JDBC_DRIVER);
        Connection con = DriverManager.getConnection(DATABASE_URL,"user", "pass");
        Statement stmt = con.createStatement();
        ResultSet rs = stmt.executeQuery("select * from mrd");

        while (rs.relative(next_row))
        {
            file = rs.getString(3);
            //System.out.println(file);
            String p =  "mrd//" + file; 
            System.out.println("\nSending " + file + " to barcode reader");
            String b = a.readBarcode(p);
            //System.out.println(b);

        }

        con.close();                    
    }

    catch(NotFoundException e)
    {
        System.out.println(e + "- Error in " + "current_row");
    }

    catch(Exception e)
    {
        //System.out.println(e + "- Error in " + current_row);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:17:48.393

您需要将 try-catch 块放在循环内，而不是在循环外；当抛出异常时，它会传递到第一个 catch 块，如果 catch 块在循环之外，那么它将退出循环。

您的 con.close() 也应该在 finally 块中，以确保正确释放资源。即使抛出异常，也保证执行 finally 块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:18:19.320

那是因为 try 在 while 循环之前，要么：

1）添加另一个循环来包装尝试

2）将try放在现有循环中

# android - ACTION_CONNECTION_STATE_CHANGED 是否在蓝牙 RFCOMM / SPP 连接更改时广播？

> ID：16001859
> 
> 赞同：1
> 
> 时间：2013-04-14T17:15:06.633
> 
> 标签：android, bluetooth, broadcastreceiver, rfcomm, spp

ACTION_CONNECTION_STATE_CHANGED 是否在 RFCOMM / SPP 连接更改时广播？

还是仅在更改“其他配置文件”（A2DP 等）时广播？

如果 RFCOMM 连接的状态已经由 BluetoothAdapter 管理，我试图避免必须管理它的状态

另外，不是我会求助于它，而是有人尝试在 BluetoothAdapter 中使用@hidden BluetoothStateChangeCallback 接口吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T03:42:32.853

RFCOMM is not a bluetooth 'Profile' it is a protocol.

Serial Port Profile (SPP) is based on RFCOMM and is a profile. Though I am using

> "the well-known SPP UUID 00001101-0000-1000-8000-00805F9B34FB"

SPP doesn't seem to be an 'officially supported' profile, and thus ACTION_CONNECTION_STATE_CHANGED is not broadcast.

ACTION_ACL_CONNECTED, ACTION_ACL_DISCONNECTED, and ACTION_ACL_DISCONNECT_REQUESTED broadcast events of [BluetoothDevice](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html) can be used to listen for the state of a bluetoothDevice.

These are low level events that will be broadcast for both the RFCOMM protocol and Profile connections.

I've found that these broadcasts don't necessarily behave in an expected manner though. As was also experienced here [What triggers the BluetoothDevice.ACTION_ACL broadcasts?](https://stackoverflow.com/questions/9537833/what-triggers-the-bluetoothdevice-action-acl-broadcasts)

# html - CSS 标题下划线

> ID：16001863
> 
> 赞同：-1
> 
> 时间：2013-04-14T17:15:14.347
> 
> 标签：html, css, styles

我有一个链接到 asp.net 中继器的 CSS。我想要的是让标题链接在悬停时加下划线，而不是链接的标题在鼠标悬停时不加下划线。目前我的 CSS 中有这个，但两种类型的标题都有下划线。

```
A.TopTitle:link, A.TopTitle:active, A.TopTitle:visited
{

color: #800000;
font-family: Arial;
font-size: 16px;
font-weight: bold;
}

 A.TopTitle, A.TopTitle:hover
{
color: #800000;
font-family: Arial;
font-size: 16px;
font-weight: bold;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:53:36.413

如果我正确理解您的问题，您希望通过 CSS 获得以下信息： class="TopTitle" 的内容不应在 HOVER 时且仅在 HOVER 时为 LINKS 加下划线。

假设您有一些愚蠢的 CMS 提供内联样式，我们将使用 !important 修饰符..

```
.TopTitle, .TopTitle:link, .TopTitle:active, .TopTitle:visited
{
  text-decoration: none!important;
}
a.TopTitle, a.TopTitle:link, a.TopTitle:active, a.TopTitle:visited
  text-decoration: underline!important;
} 
```

我希望我正确地理解了你，并且这很有帮助。

祝你好运。

# angularjs - 指令的布尔范围值

> ID：16001873
> 
> 赞同：2
> 
> 时间：2013-04-14T17:15:41.423
> 
> 标签：angularjs, angularjs-directive

假设我有一个如下所示的指令：

```
<foo-bar bar-foo="booleanValue"></foo-bar> 
```

`booleanValue`这里属于父范围 - 附加到上述指令元素所在视图的控制器的范围。

现在，在我的指令中，我将指令定义如下：

```
app.directive('fooBar', function() {
    return {
        restrict: 'E',
        scope: {
            barFoo: '=barFoo'
        },
        link: function(scope, iElement, iAttrs) {
           scope.$watch('barFoo', function() {
               if(scope.barFoo !== true) return;
           });
           //Code to execute when barFoo is true
        }
    };
}); 
```

这里的问题是传递给的值`barFoo`是一个布尔值，但它最终是一个字符串值。因此 `if (scope.barFoo !== true) 将始终成功，并且链接器函数永远不会执行。

我不想将代码更改为`if (scope.barFoo === "true")`.

如何将布尔值传递给范围？

**编辑：**我希望在这里添加`booleanValue`一个确实是父控制器的布尔值（通常作为 true 传递）到指令中。只是当值被传递时，它被转换为字符串而不是保持布尔值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:34:05.180

假设该值在控制器中正确设置，它应该作为布尔值传递给指令。

这个[笨蛋](http://plnkr.co/edit/Yyc9LxJe9e23Q4n60B4L?p=preview)说明了这一点。

# java - Java中Calendar类的before方法中的错误

> ID：16001878
> 
> 赞同：1
> 
> 时间：2013-04-14T17:16:21.113
> 
> 标签：java, class, methods, calendar

我在 java 中使用 Calendar 类，发现“after”和“getTimeInMillis”方法中有一个错误。这些方法始终适用于所有日历，但某些特殊日历存在问题。我的测试代码是：

```
 Calendar c1 = Calendar.getInstance();
   Calendar c2 = Calendar.getInstance();
   c1.set(2006, 5, 31, 22, 0, 0);
   c2.set(2006, 6, 1, 1, 0, 0);
   if (c1.after(c2))
       System.out.println("c1 is after c2.");
   if (c1.getTimeInMillis()>c2.getTimeInMillis())
       System.out.println("c1 in mimisecond is greater than c2"); 
```

虽然 c1 在 c2 之前，但我的代码打印：c1 在 c2 之后。以毫秒为单位的 c1 大于 c2

问题是什么？我该如何解决？我使用 Java NetBeans 7.1 IDE 和 JDK 1.7。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T17:20:23.187

由于六月只有 30 天（5 对应于六月，因为月份的编号从 0 开始），因此它们指向同一天。因此`c1`实际上比`c2`.

为避免这种混淆，您可以使用`Calendar`类中的常量：

```
c1.set(2006, Calendar.MAY, 31, 22, 0, 0);
c2.set(2006, Calendar.JUNE, 1, 1, 0, 0); 
```

# macos - 在 OS X 上运行 OpenSSH 的 sshd 实例，但它不接受有效的用户密码

> ID：16001880
> 
> 赞同：0
> 
> 时间：2013-04-14T17:16:28.433
> 
> 标签：macos, openssh

我在 OS X (10.8.3) 上运行 OpenSSH 的 sshd 实例，但它不接受有效的用户密码。它只是回应，“权限被拒绝，请再试一次。” 我正在 ssh'ing 到本地主机。如果我将我的公钥添加到 .ssh/authorized_keys，我可以毫无问题地连接。

我假设 OS X 正在阻止应用程序访问 OS X 的身份验证系统（即 /etc/shadow？），因此尝试在 sudo 下运行 sshd，~~但遇到了 sshd 在客户端连接时立即崩溃并出现此错误的问题服务器~~（**见下面的更新 2**）：

> ssh_sandbox_child: ssandbox_init: dlopen(/usr/lib/libsandbox.1.dylib, 261): image not found [preauth]

对这些问题的任何帮助表示赞赏。

以防万一：我不想在 OS X 上替换我现有的 sshd 服务，而只是想为我正在测试的东西并行运行这个服务。

**更新：**我忘了提到，同样的代码和配置在 Ubuntu 12.10 系统上编译和运行都非常好。在 linux 机器上，我没有在 sudo 下运行。

**更新 2：**我通过设置我的 sshd_config 解决了服务器在 sudo 下运行的问题`UsePrivilegeSeparation yes`，但仍然不接受密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:07:53.557

感谢 Bart 为我指明了正确的方向（OS X 期待 PAM）。

[如此处](http://lists.mindrot.org/pipermail/openssh-bugs/2003-September/000636.html)所述，要使用 PAM 构建 OpenSSH，必须`./configure --with-pam`在运行之前配置使用 via `make`:。

`UsePAM yes`还需要按照 Bart 的建议添加到 sshd_config。

# ios - 强制视图控制器为纵向单点触控 iphone

> ID：16001886
> 
> 赞同：1
> 
> 时间：2013-04-14T17:16:51.740
> 
> 标签：ios, iphone, uiviewcontroller, xamarin.ios, rotation

我的应用程序中有一个视图控制器，它希望始终以打印模式显示。此屏幕的对象是在运行时添加的，并且基于 protaint 模式。这是我的第一个视图控制器。

我尝试了一些代码，例如：

[第一的](http://b2cloud.com.au/how-to-guides/forcing-uiviewcontroller-orientation)

[第二](https://stackoverflow.com/questions/10316683/force-interface-orientation-landscape-on-a-viewcontroller-when-the-rest-of-the-a)

[第三](http://monotouch.2284126.n4.nabble.com/Having-1-ViewController-with-different-orientation-td4656971.html)

但他们都不能帮助我。可以知道这个状态的任何其他解决方案吗？

我在那里发现了一些东西：

[Monotouch - 以横向创建的视图以纵向显示](https://stackoverflow.com/questions/8014810/monotouch-view-created-in-landscape-orientation-is-displayed-in-portrait-orien)

但我不知道如何使用它。任何身体都可以帮忙吗？

我用这个代码

```
public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
        {
            // Return true for supported orientations
            if (UserInterfaceIdiomIsPhone) {
                return (toInterfaceOrientation != UIInterfaceOrientation.PortraitUpsideDown  );
            } else {
                return true;
            }

        }

        public override bool ShouldAutorotate ()
        {
            return true  ;
        }
        public override UIInterfaceOrientation PreferredInterfaceOrientationForPresentation ()
        {
            return UIInterfaceOrientation.Portrait ;
        }

    public override UIInterfaceOrientationMask GetSupportedInterfaceOrientations ()
        {
            return UIInterfaceOrientationMask.Portrait  ;
        } 
```

但它们都不起作用。

autoroatate 函数从不调用:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:26:13.707

也许您在应用完成午餐模式中使用导航控制器。如果正确，您应该覆盖 UINavigation 控制器并将您自己的旋转机制添加到此。请看这段代码：

```
public class RltNavigationController : UINavigationController
{
    public RltNavigationController () : base ()
    {
    }

    public override UIInterfaceOrientationMask GetSupportedInterfaceOrientations ()
    {
        if(this.TopViewController is HomeScreen )
            return UIInterfaceOrientationMask.Portrait ;
        else 
            return UIInterfaceOrientationMask.AllButUpsideDown  ;

    }

    public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
    {
        // Return true for supported orientations
        if(this.TopViewController is HomeScreen )
            return (toInterfaceOrientation == UIInterfaceOrientation.Portrait );
        else 
            return (toInterfaceOrientation != UIInterfaceOrientation.PortraitUpsideDown) ;

    }
} 
```

# php - 为什么 phpseclib 没有正确签署这个证书？

> ID：16001889
> 
> 赞同：3
> 
> 时间：2013-04-14T17:17:04.177
> 
> 标签：php, x509, phpseclib

我尝试使用 phpseclib 签署密钥，当我使用 openssl 解码结果时，我得到以下信息：

```
140513785948000：错误：0D07209B：asn1 编码例程：ASN1_get_object：太长：asn1_lib.c:142：
140513785948000:error:0D068066:asn1 编码例程:ASN1_CHECK_TLEN:bad object header:tasn_dec.c:1306:
140513785948000:error:0D07803A:asn1 编码例程:ASN1_ITEM_EX_D2I:nested asn1 错误:tasn_dec.c:381:Type=X509
140513785948000：错误：0906700D：PEM 例程：PEM_ASN1_read_bio:ASN1 库：pem_oth.c:83：
```

为什么要这样做？

（这个错误花了我一段时间才弄清楚，所以我想我会通过在这里发布它来帮助下一个人解决这个问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:17:04.177

问题是我正在加载密钥但忘记初始化它。

```
$publicKey = new Crypt_RSA();
$publicKey->loadKey($key);
$publicKey->setPublicKey(); //this line was missing 
```

# sockets - 在 Luasocket 中，即使在 select 告诉它可以安全读取之后，在什么情况下接受调用也会阻塞？

> ID：16001896
> 
> 赞同：3
> 
> 时间：2013-04-14T17:17:37.940
> 
> 标签：sockets, lua, luasocket

Luasocket[选择](http://w3.impa.br/~diego/software/luasocket/socket.html#select)函数应该告诉何时可以无阻塞地读取套接字。它显然也可以用来判断服务器套接字何时准备好接受新连接，但是文档给出了以下警告：

> **另一个重要的注意事项：**在调用 accept 之前在接收参数中使用服务器套接字调用 select 并不能保证 accept 会立即返回。使用 settimeout 方法，否则 accept 可能会永远阻塞。

即使 select 告诉它可以安全阅读，在什么情况下可以*接受块？*出于测试目的，有没有办法强制发生此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T02:19:10.097

我不知道他们从哪里得到这个想法。在 20 多年的网络编程中从未见过它。

如果您有多个 select() 线程，当然会发生这种情况，但是如果这是预期的，我希望文档会这样说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T03:20:57.573

`accept`这是从已故 W.Richard Stevens 的“Unix Network Programming”第 461-463 页的第三版的第 16.6 节（非阻塞）中总结出来的。UNP 可能仍然是最好的关于编写网络代码的教科书。

尽管您可能认为`accept`不能阻塞之后`select`表明侦听套接字已准备好，但 Stevens 描述了一些网络堆栈实现中的竞争条件，它可能导致`accept`无限期阻塞。（脚注将描述归因于“A.Gierth”）。这个问题是通过一个 echo 客户端来描述的，它：

1.  连接到服务器；

2.  在连接的套接字上设置`SO_LINGER`套接字选项；

3.  立即关闭套接字。由于`SO_LINGER`已设置选项，关闭套接字会导致发送`RST`（重置）。

现在，让我们假设服务器正在运行，但在负载很重的机器上。修改后的 echo 客户端运行。TCP 连接会导致`select`调用返回并指示有可用的连接。（请记住，连接实际上已被内核接受并放入接受队列；`accept`不需要执行此操作。）

但是，在调用执行之前，服务器代码被进程切换中断，`accept`同时，客户端设法完成步骤（2）和（3）。然后内核收到客户端的reset，现在连接不再有效。因此，它可能会将其从接受队列中删除。

因此，当服务器代码`accept`开始建立连接时，没有要接受的连接，并且`accept`调用阻塞直到下一个连接，如果有的话。

上述行为实际上可能不会发生。*即使接受队列中有另一个可用连接*（您还必须记住要处理），POSIX 也希望`accept`调用失败。根据史蒂文斯的说法：`ECONNABORTED`

 *> 在第 5.11 节中，我们注意到当客户端在服务器调用 `accept` 之前中止连接时，Berkeley 派生的实现不会将中止的连接返回给服务器，而其他实现应该返回 `ECONNABORTED` 但通常会返回 `EPROTO` .

史蒂文斯的源代码可[在出版商网站上](http://www.unpbook.com/src.html)找到；修改后的客户端是`nonblock/tcpcli03.c`，而对服务器的修改只是在调用之前休眠五秒钟`accept`。因此，您可以在任何可用的系统上进行尝试。

我不相信 FreeBSD 或 Linux 不再表现出伯克利派生的行为，尽管我很确定我记得它发生在 FreeBSD 上（那可能是十多年前的事了，而且我不再手边有一个 FreeBSD 盒子对其进行测试。）OpenBSD 似乎已在 1999 年进行了修补以解决该问题（请参阅[2.4 的补丁](http://ftp.openbsd.org/pub/OpenBSD/patches/2.4/common/accept.patch)）；可能其他伯克利衍生物后来也做了类似的改变。我不知道 MacOSX（尽管它可能与 FreeBSD 相同）或 Windows。很可能没有现代系统表现出这种行为，尽管当 Stevens 编写 UNP 时它肯定是可以观察到的。

无论如何，史蒂文斯的建议很简单，小心一点总不会有坏处。他的建议是：

1.  使用时始终将侦听套接字设置为非阻塞`select`；

2.  如果`accept`以`EWOULDBLOCK`、`ECONNABORTED`、`EPROTO`或失败`EINTR`，则忽略错误并返回`select`循环。*

# java - Android HTTPS 请求？

> ID：16001902
> 
> 赞同：2
> 
> 时间：2013-04-14T17:17:59.517
> 
> 标签：java, android, https, request

我需要做一个 HTTPS 请求来访问 FB API 的一些数据。实际上我用这个库[http://loopj.com/android-async-http/](http://loopj.com/android-async-http/)做了一个 HTTP 请求， 但这不适用于 HTTPS。

谁能帮助我如何在 Java 中使用 Android 进行 HTTPS 请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:19:27.317

使用与 HTTP 相同的类，但在 url 上使用 https 前缀。Android 中的内置类（如 DefaultHttpClient 和 URLConnection）与 https 一起使用。

# c# - 一些值和一些值的正则表达式

> ID：16001904
> 
> 赞同：0
> 
> 时间：2013-04-14T17:18:01.240
> 
> 标签：c#, regex

我想要一个`Regex`for `Somevalue.......Somevalue`。喜欢：

```
vikas?notsure233R&amp;kratika
vikas?hopeitwork3&amp;kratika
vikas?wouldItWork&amp;kratika 
```

我试过了

```
(vikas?[(.*?)]&amp;kratika) 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:21:05.610

它应该是`vikas\?(.*?)&amp;kratika`

**更新：**

如果您尝试解析这些 URL，您可以先使用[`HttpUtility.HtmlDecode()`](http://msdn.microsoft.com/en-us/library/7c5fyk1k.aspx).

然后使用[`HttpUtility.ParseQueryString()`](http://msdn.microsoft.com/en-us/library/ms150046.aspx)解析URL：

```
String DecodedUrl = HttpUtility.HtmlDecode(YourUrl);
NameValueCollection UrlParameters = HttpUtility.ParseQueryString(DecodedUrl);
if (UrlParameters.AllKeys.Contains("SOMETHING")) {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:22:23.980

这里有几个问题。
`?`是正则表达式中的特殊字符，您必须对其进行转义。
`[]`创建一个字符类，因此您尝试匹配*** , *.* 还是*？*

所以，总而言之：

```
vikas\?(.*?)&amp;kratika 
```

# java - Java 哈希表键。将 String 键转换为 int 键

> ID：16001906
> 
> 赞同：-2
> 
> 时间：2013-04-14T17:18:09.847
> 
> 标签：java, hashtable

我有一个家庭作业，我必须为字典创建一个哈希表，用户可以在其中输入一个单词作为键，它将搜索并显示含义。

但是我不确定从 String 键到 int 键的转换是如何工作的。这是我从教科书中获取的代码：

```
 public int hashVal(String key, int tableSize)
{
    int hashKey= 0;
    int temp = 0;
    for(int i=0;i<key.length();i++)
    {
        temp = 37*temp+(int)key.charAt(i);
    }
    temp%=tableSize;
    if (temp<0)
    {
        temp+=tableSize;
    }
    hashKey=temp;
    return hashKey;
} 
```

非常感谢解释或更简单的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:27:40.617

您的代码有几个冗余。您的哈希计算 - 虽然不一定不正确 - 也是非标准的。我不确定它是否会产生良好的分布，我认为答案是否定的。

我建议进行两个修订：使用`37 * (int)key.charAt(i) + hash`，并摆脱 temp 变量。

这样就变成了：

```
public static int hashVal(String s, int max) {
    int hash = 0;
    for(Char c : s.toCharArray())
        hash = Math.abs((hash + 37*(int)c) % max);
    return hash;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:25:28.127

字符串（或任何通用对象）散列的基本思想是使用输入的所有部分，以便我们得到一个相当随机和分布的值。

所以对于一个字符串，我们使用字符串中的所有字符来计算哈希值。同样，对于对象，建议在计算哈希值时使用对象中的所有重要字段。

Java 类似地使用您的教科书代码的变体。

问题：为什么你的教科书使用 37？[Java 类似地使用您的教科书代码的变体，将 31 作为常量值]

回答：使用素数显然可以更好地分布整个表中的哈希值。

# .htaccess - 限制对包含文件的访问

> ID：16001911
> 
> 赞同：1
> 
> 时间：2013-04-14T17:18:29.713
> 
> 标签：.htaccess

我有一个`inc`包含所有 php 函数、类、js、css 等的文件夹。我在`Deny from all`目录中创建了一个 .htaccess 文件`inc`。我所有的 .php 文件都正确包含在 index.php 中，但我不能调用任何 CSS。如何修复 .htaccess 以允许访问指定的子文件夹（inc/css 和 inc/js）并仍然阻止其中其他所有内容的执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T18:51:21.637

您还可以在文件中使用**[FilesMatch](http://httpd.apache.org/docs/2.2/mod/core.html#filesmatch)**`.htaccess`来应用一组特定的规则，仅当请求的资源属于某种类型（扩展名）时。

```
<FilesMatch "\.(php|inc)$">
    Order allow,deny
    Deny from all
</FilesMatch> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:34:56.947

> 如何修复 .htaccess 以允许访问指定的子文件夹（inc/css 和 inc/js）并仍然阻止其中其他所有内容的执行？

您可以将 htaccess 文件放在仅具有以下内容的`inc/css`目录`inc/js`中：

```
Options -Indexes
Allow from all 
```

或者您可以将`inc`目录中的 htaccess 文件更改为：

```
RewriteEngine On
RewriteRule ^css/? - [L]
RewriteRule ^js/? - [L]
RewriteRule ^ - [L,F] 
```

# javascript - 使用 javaScript 变量添加 css 属性？

> ID：16001913
> 
> 赞同：1
> 
> 时间：2013-04-14T17:18:32.247
> 
> 标签：javascript, html, css, variables, var

我需要能够计算 HTML 元素（div）应该有多高......

我正在使用这个 javaScript 代码来计算 CSS 并将其添加到我的“Wrapper”div 中：

```
var h=window.innerHeight;
var content=920;
var fix=920-h;
document.getElementById("wrapper").style.height= +fix+ 'px'; 
```

但它根本不起作用......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:27:02.840

您可能在加载正文之前运行此脚本。

要在主体完成加载后加载它，请将您的代码替换为：

```
window.onload = function(){
  var h=window.innerHeight;
  var content=920;
  var fix=920-h;
  document.getElementById("wrapper").style.height= +fix+ 'px';
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-14T18:17:38.733

```
document.getElementById("wrapper").style.height= fix + 'px'; 
```

将工作。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-14T17:33:19.103

```
<script type="text/javascript">
  h=window.innerHeight;
  content=920;
  fix=(content-h);
  document.getElementById("wrapper").style.height=(fix + 'px');
</script> 
```

我认为这就是您正在寻找的，只要 div ID 包装器存在。

我认为更有效的方法是..

**（使用 jQuery）**

```
<script type="text/javascript">
  $(document).ready(function(){
    h=$(window).height;
    content=$('.content').height; //gets height of class content
    fix=(content-h);
    $('wrapper').height=fix;
  });
</script> 
```

我的 2 美分。

# asp.net-mvc - 我应该将数据存储在 Umbraco 还是定制数据层中

> ID：16001914
> 
> 赞同：4
> 
> 时间：2013-04-14T17:18:33.953
> 
> 标签：asp.net-mvc, content-management-system, umbraco

在开始一个（可能的）大型项目之前，我在这里遇到了危机，我经常使用 Umbraco，因为它非常多样化，你几乎可以用它做任何你喜欢的事情，但我的问题是是否仅将 Umbraco 用作我的内容*和*数据-provider，或者是否创建我自己的 ORM（即 EF）层来存储我们说的*细节。*

我要问的是，是否有一条线要画，你如何决定何时使用定制的数据层？是在您最大化 CMS 时（如果可能）还是取决于数据结构本身？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T14:58:53.233

这是我的简单经验法则：

**如果您的数据要共享到多个网站**，请考虑将其存储在单独的数据库中，而不是直接使用 ORM 访问它，而是使用 Web 服务。[WCF 数据服务](http://msdn.microsoft.com/en-us/library/cc668792.aspx)或[Web API](http://www.asp.net/web-api)提供了对数据执行 CRUD 操作的好方法。

**如果数据仅在您的 Umbraco 站点中可用**，请将其保存在 Umbraco。事实上，如果您希望用户可以编辑它，请使用 Umbraco 的文档类型来捕获和存储数据。您不必让这些节点直接导航，您可以使用 Umbraco 的[API](http://our.umbraco.org/documentation/Reference/)引用来自其他节点的信息。

即使您与其他网站共享数据，最好将数据保存在 Umbraco 中，因为它可以让您轻松地从用户那里收集数据，而无需构建自定义表单，并且您仍然可以开发 Web 服务来共享数据，使用 Umbraco 的[/Base](http://our.umbraco.org/documentation/Reference/Api/Base/Index)方法或再次使用[WCF](http://optimisticcoder.com/blogs/injecting-restful-wcf-services-into-umbraco-for-jquery-ajax.aspx)或[Web API](http://our.umbraco.org/documentation/Reference/WebApi/)。作为奖励，**新版本的 Umbraco 带有内置[服务](http://our.umbraco.org/documentation/Reference/Management-v6/Services/)**。

# angularjs - 如何使指令独立于模块

> ID：16001915
> 
> 赞同：3
> 
> 时间：2013-04-14T17:18:35.270
> 
> 标签：angularjs, angularjs-directive

这个问题可能看起来很奇怪。但我喜欢将我的应用程序组织在文件夹中，指令位于“指令”文件夹中，控制器位于“控制器”文件夹中，等等......

在我见过的所有示例中，指令都是这样声明的：

```
var app = angular.module('myModule').
directives('myDirective', function(){

}); 
```

我想要的是在一个单独的文件中声明 myDirective（它不应该知道 app 变量。然后当我创建 myModule 时，我想将它分配给 myDirective。

我怎么做 ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T16:48:54.223

我这样做的方法是创建一个指令模块，然后将其注入我的应用程序：

**指示**

```
angular.module('app.directives', []).directive(...).directive(...) 
```

**应用程序**

```
angular.module('myApp',['app.directives']) 
```

您可以对服务、过滤器等执行相同的操作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:33:17.863

您不需要使用 app 变量来定义指令，它只是一个快捷方式，因此您不必`angular.module('myModule')`每次想要在模块中定义某些内容时都编写。在带有指令的文件中，只需像这样定义指令：

```
 angular.module('myModule').directive('myDirective',function(){ ... }); 
```

该指令将成为`myModule`. [查看Yeoman](http://yeoman.io/)如何生成指令和控制器以了解更多详细信息。或者您可以查看使用不同方法的[Angular-seed](https://github.com/angular/angular-seed)应用程序模板，但想法是相同的。

# html - WebSockets 不适用于 DNS

> ID：16001917
> 
> 赞同：1
> 
> 时间：2013-04-14T17:18:44.883
> 
> 标签：html, websocket

我有一个 web 应用程序，我正在使用 websockets。我在使用 ws://myDomain.com 作为我的 websocket 服务器的地址时遇到问题。问题很奇怪，因为我使用许多 PC 测试了连接，似乎这适用于大约 1/5 的 PC！当我将 websocket 地址更改为 ws://111.111.111.111（我的服务器 IP 地址）时，100% 的客户端工作正常。

有没有人可能有类似的问题？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:30:15.243

您可以在中间有一个支持 websockets 的代理。这可能是因为代理已过时或 websocket 服务器不是 100% 符合规范。你用的是什么服务器？尝试切换到 WSS（带有 websockets 的 TLS）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:12:05.937

您可能会遇到跨域资源共享问题。或者，无法连接的 PC 可能位于不同的子网中，并且无法解析 myDomain.com。从这些 PC 上尝试 nslookup myDomain.com。

# solr - Solr 拼写检查：无法显示结果，总是收到相同的错误

> ID：16001922
> 
> 赞同：1
> 
> 时间：2013-04-14T17:19:11.320
> 
> 标签：solr

所以，我对 solr 很陌生，也许我有很多理解问题。

我现在正在尝试做什么，它是我搜索栏的自动建议。例如，如果你写“glves”，结果应该是“gloves”。这是一个自动完成功能，现在可以正常工作。但是，当然，当我输入“glves”时，什么也没有出现。

现在，当你写“gloves”时，所有在item栏上带有“gloves”字样的物品都会出现。对于“glves”一词，我也想要这个。

这是我的 schema.xml：

```
 <field name="_version_" type="long" indexed="true" stored="true"/>
    <field name="text" type="text_general" indexed="true" stored="false" multiValued="true"/>
    <field name="oxid" type="string" indexed="true" stored="true" required="true" multiValued="false" />
    <field name="ean" type="string" indexed="true" required="false" />
    <field name="marken" type="text_en" indexed="true" stored="true" />
    <field name="item" type="text_en" indexed="true" stored="true" />
    <field name="shortdesc" type="text_de" indexed="true" stored="true" />
    <field name="price" type="float" indexed="true" stored="true" />
    <field name="picture" type="string" indexed="true" stored="true" />
    <field name="seourl" type="string" indexed="true" stored="true" />
    <field name="item_autocomplete" type="text_autocomplete" indexed="true" stored="false" />
    <field name="item_show" type="string" indexed="true" stored="false" /> 
```

上面的字段对我的目的很好。我需要为搜索建立索引的字段是 item。

这就是我的 solrconfig.xml 中的内容：

```
<searchComponent name="spellcheck" class="solr.SpellCheckComponent">

<str name="queryAnalyzerFieldType">item</str>

<!-- Multiple "Spell Checkers" can be declared and used by this
     component
  -->

<!-- a spellchecker built from a field of the main index -->
<lst name="spellchecker">
  <str name="name">default</str>
  <str name="field">item</str>
  <str name="classname">solr.DirectSolrSpellChecker</str>
    <str name="spellcheckIndexDir">./spellchecker</str>
  <str name="buildOnOptimize">true</str>
  <str name="buildOnCommit">true</str>
  <!-- the spellcheck distance measure used, the default is the internal levenshtein -->
  <str name="distanceMeasure">internal</str>
  <!-- minimum accuracy needed to be considered a valid spellcheck suggestion -->
  <float name="accuracy">0.5</float>
  <!-- the maximum #edits we consider when enumerating terms: can be 1 or 2 -->
  <int name="maxEdits">2</int>
  <!-- the minimum shared prefix when enumerating terms -->
  <int name="minPrefix">1</int>
  <!-- maximum number of inspections per result. -->
  <int name="maxInspections">5</int>
  <!-- minimum length of a query term to be considered for correction -->
  <int name="minQueryLength">4</int>
  <!-- maximum threshold of documents a query term can appear to be considered for correction -->
  <float name="maxQueryFrequency">0.01</float>
  <!-- uncomment this to require suggestions to occur in 1% of the documents
    <float name="thresholdTokenFrequency">.01</float>
  -->
</lst>

<!-- a spellchecker that can break or combine words.  See "/spell" handler below for usage -->
<lst name="spellchecker">
  <str name="name">wordbreak</str>
  <str name="classname">solr.WordBreakSolrSpellChecker</str>      
  <str name="field">name</str>
  <str name="combineWords">true</str>
  <str name="breakWords">true</str>
  <int name="maxChanges">10</int>
</lst> 
```

但每次我向 solr 查询时，即：

```
http://localhost:8983/solr/spell?spellcheck=true&qt=spellchecker&spellcheck.accuracy=0.8&spellcheck.collate=true&extendedResults=true+&q=glovs 
```

我得到同样的回应：

```
<response><lst name="responseHeader"><int name="status">500</int><int name="QTime">2</int></lst><lst name="error"><str name="msg">All checkers need to use the same Analyzer.</str><str name="trace">java.lang.IllegalArgumentException: All checkers need to use the same Analyzer.
at org.apache.solr.spelling.ConjunctionSolrSpellChecker.addChecker(ConjunctionSolrSpellChecker.java:79)
at org.apache.solr.handler.component.SpellCheckComponent.getSpellChecker(SpellCheckComponent.java:475)
at org.apache.solr.handler.component.SpellCheckComponent.prepare(SpellCheckComponent.java:106)
at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:187)
at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135)
at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.handleRequest(RequestHandlers.java:242)
at org.apache.solr.core.SolrCore.execute(SolrCore.java:1797)
at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:637)
at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:343)
at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:141)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:453)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:560)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1072)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1006)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)
at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255)
at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)
at org.eclipse.jetty.server.Server.handle(Server.java:365)
at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:485)
at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53)
at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:926)
at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:988)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:635)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72)
at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543)
at java.lang.Thread.run(Thread.java:722)
</str><int name="code">500</int></lst></response> 
```

我尝试在这些论坛上关注许多手册、提示和旧问题，但我没有得到任何帮助。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T17:52:24.767

我找到[了这个答案](https://stackoverflow.com/questions/13761215/solr-4-0-how-can-i-change-the-spellchecker-analysers-so-they-are-all-the-same)来帮助我用完全相同的错误消息解决类似的问题。您的问题可能是您为不同的拼写检查定义定义了两个不同的字段：

`<str name="field">item</str>` 和 `<str name="field">name</str>`

这些应该是平等的。这就是 Solr 所抱怨的。

# android - 可靠地确定Android中的前台应用程序

> ID：16001923
> 
> 赞同：2
> 
> 时间：2013-04-14T17:19:14.143
> 
> 标签：android

目前我使用此代码（在我的后台服务中）来确定当前的前台应用程序：

```
List<ActivityManager.RunningTaskInfo> runningTask = activityManager.getRunningTasks(1);
ActivityManager.RunningTaskInfo ar = runningTask.get(0);
return ar.topActivity.getPackageName(); 
```

问题是它在 99% 的情况下返回了正确的前台应用程序，但有时它返回了错误的应用程序。例如，当我使用图库然后返回启动器时，有时它会报告启动器，有时它会进一步报告图库！对于我的应用程序，确定正确的前台应用程序非常重要。有没有更好（100% 可靠）的解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:20:39.477

没有 100% 确定的方法来检查前台应用程序。您当前轮询正在运行的任务的方法几乎与它一样好。

[这个](https://stackoverflow.com/a/5528441/1069068)答案详细说明了一个更复杂的实现，它可能比你的更准确，但在基础上它的想法是一样的。

# vim - 如何在多行之后粘贴内容

> ID：16001930
> 
> 赞同：1
> 
> 时间：2013-04-14T17:20:01.770
> 
> 标签：vim, macvim

我在现实生活中总是面临这个问题。

**我要这个：**

我的光标位于多行代码的第一行。内容应该放在多行代码之后。

```
[cursor]xxxx
xxxxxxxxxxxx
xxxxxxxxxxxx
xxxxxxxxxxxx
xxxxxxxxxxxx
[this is where i want to place the code] 
```

**现在的问题：**

由于`p`在 vim 中只是将代码粘贴在光标之后，我必须转到行尾和`p`.

```
xxxxxxxxxxx
xxxxxxxxxxxx
xxxxxxxxxxxx
xxxxxxxxxxxx
[cursor]xxxxxx
[this is where i want to place the code] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T17:32:31.090

`put`是您要查找的命令

```
:[lineNo]put x 
```

例如

```
:200pu 
```

`"`将在第 200 行之后粘贴寄存器的值。

```
:200pu n 
```

将在第 200 行之后粘贴寄存器的值`n`（在您可能已经完成之前：）。`"ny`

有关更多详细信息，请检查`:h :pu`

**编辑**_`nu`

我觉得在不同情况下使用数字或相对数字很好。不要一直坚持一个。至少我正在这样做。在我的 vimrc 中，我写了一个小函数来切换相对编号和正常行号：

```
function! ToggleRelativeNumber()
    let &relativenumber = &relativenumber?0:1
    let &number = &relativenumber? 0:1
endfunction
"map <leader> rn to the function
nnoremap <silent> <Leader>nu :call ToggleRelativeNumber()<cr> 
```

所以我可以打字`,nu`在它们之间切换。（我的领导是`,`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:22:17.243

如果要在代码块之后粘贴，可以使用`}``P`导航到块的末尾，然后粘贴到该行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T18:14:52.497

假设您要从默认寄存器粘贴，

*   在下一次出现后粘贴`foo`：

    ```
    /foo<cr>p 
    ```

*   或肯特的建议：

    ```
    :+4put 
    ```

# java - java中带有初始化参数的并发安全单例

> ID：16001933
> 
> 赞同：1
> 
> 时间：2013-04-14T17:20:17.077
> 
> 标签：java, design-patterns, concurrency

我想制作一个单例类电话，以便它可以初始化（带有数字）并且是并发安全的。所以，这就是我带来的：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;

public class PhoneTest {
    public static void main(String... args){
        System.out.println(Phone.getInstance().getNumber());
    }

    static final class Phone {
        private final String number;
        private final static Phone instance;
        static {
            instance = new Phone(PhonePropertyReader.readPhoneNumber());
        }

        private Phone(String number) {
            this.number = number;
        }

        public static Phone getInstance() {
            if (instance == null) throw 
                new IllegalStateException("instance was not initialized");
            return instance;
        }

        public String getNumber() {
            return number;
        }
    }

    static final class PhonePropertyReader {
        static String readPhoneNumber() {
            File file = new File("phone.properties");
            String phone = "";
            System.out.println(file.getAbsolutePath());
            if (!file.exists()) {
                return phone = "555-0-101";
            }

            try {
                BufferedReader r = new BufferedReader(new FileReader(file));
                phone = r.readLine().split("=")[1].trim();
                r.close();
            } catch (IOException e) {

            }
            return phone;
        }
    }
} 
```

我还有一个文件 phone.properties 包含

```
phone=12345 
```

这是一个很好的解决方案吗？并发安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:40:42.417

我相信[Enum](https://stackoverflow.com/questions/70689/what-is-an-efficient-way-to-implement-a-singleton-pattern-in-java)仍然是在 java 中实现线程安全单例的最佳方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:25:00.497

我不鼓励你使用单例（[检查这个其他问题](https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons)）

否则，您的代码是线程安全的，因为您所做的唯一影响是在`static {}`定义上是线程安全的区域中。

顺便说一句，为什么不`readPhoneNumber()`直接将您的方法合并到您的`phone`课程中？

# opengl - 手动使用圆柱体中间表面进行纹理映射

> ID：16001935
> 
> 赞同：1
> 
> 时间：2013-04-14T17:20:25.457
> 
> 标签：opengl, graphics, texture-mapping

我正在为一个类项目进行扫描线渲染。渲染器工作至今，它读取模型（主要使用 utah 茶壶），计算顶点/表面法线，并且可以进行平面和 phong 着色。我现在正在添加纹理映射，这是我遇到问题的地方（除了实际在屏幕上绘制点之外，我不能使用任何 OpenGL 方法）。

因此，我将纹理读入我的应用程序并拥有一个 RGB 值的二维数组。我知道这个概念是将纹理从 2D 纹理空间映射到一个简单的 3D 对象（在我的例子中是一个圆柱体）。然后我现在您将中间表面映射到对象表面上。

但是，我实际上并不知道如何做这些事情:)。我找到了一些将纹理映射到圆柱体的公式，但它们似乎总是遗漏了细节，例如要使用的值。然后我也不知道如何获取对象的顶点坐标并获取该点的圆柱值。还有一些关于映射到圆柱体的其他 StackOverflow 帖子，但它们 1）处理带有着色器等的较新 OpenGL，以及 2）不处理中间表面，所以我不确定如何从它们中翻译知识。

因此，对于使用圆柱体作为中间表面将纹理映射到 3D 对象的伪代码的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T03:15:50.780

你一直在使用“中间表面”这个词，它没有正确描述这个过程，但却暗示了你的想法。

基本上，您需要一种将茶壶表面上的每个点映射到圆柱体上的方法（假设纹理将“包裹”在圆柱体上）。

只需将您的表面点转换为圆柱坐标（*r*，*theta*，*height*），然后使用*theta* as`u`和*height* as `v`（texcoords）。

这就是您要实现的目标： ![](https://i.stack.imgur.com/BTd3o.jpg)

# excel - 每个循环的 MS Excel：插入行

> ID：16001937
> 
> 赞同：4
> 
> 时间：2013-04-14T17:20:39.457
> 
> 标签：excel, vba

我有一个包含 242 行的工作表。我想在每个现有行下方创建一个新行。相反，我的代码在第 1 行下方创建了 242 行。我整个下午都在 Google 和 Stack Overflow 上，尝试了各种想法，但遇到了同样的问题。这是我的代码：

```
Function rws() As Integer

rws = (Cells(Rows.Count, "A").End(xlUp).Offset(1, 0).row)

End Function

Sub InsRws()

Dim rng As Range
Dim row As Range

Set rng = Range("A1:A" & rws - 1)

For Each row In rng.Rows
    Rows.Select
    ActiveCell.Offset(1).EntireRow.Insert
Next row

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T18:24:59.790

也许这会有所帮助

```
Function rws() As Integer

rws = (Cells(rows.Count, "A").End(xlUp).Offset(1, 0).row)

End Function

Sub InsRws()
    Dim rowCount As Integer
    Dim i As Integer
    rowCount = rws
    For i = 1 To rowCount
         Range("A" + CStr(2 * i - 1)).Select
         ActiveCell.Offset(1).EntireRow.Insert
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T20:31:50.833

最简单的方法是向上计数而不是向下计数，像这样

```
Sub InsertRows()
    Dim rw As Long

    With ActiveSheet
        For rw = .Cells(.Rows.Count, 1).End(xlUp).Row To 2 Step -1
            .Rows(rw).Insert
        Next
    End With
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T18:34:50.913

如果您为每个循环进行调试，**`debug.print row.address`**您会注意到当有插入时您的 rng 会不断扩展。相反，您可以使用 for 循环，如下面的代码所示。

```
Sub InsRws()

    Dim lastRow As Long
    lastRow = Sheets("Sheet1").Range("A65000").End(xlUp).Row

    For i = 1 To lastRow
        Range("A" & i * 2).EntireRow.Insert
    Next

End Sub 
```

# c# - 在 Visual Studio 中传递 Microsoft Access 值

> ID：16001939
> 
> 赞同：1
> 
> 时间：2013-04-14T17:20:56.983
> 
> 标签：c#

好的，我正在为我的学校项目做一个银行申请，我将 Microsoft Access 与 Visual Studio 结合起来，我在 Access 中有信息，我用 Visual Studio 检索它们。

```
 OleDbConnection connection;
        yhteys = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0; Data Source= tilit.accdb");
        try
        {
            connection.Open();

        }
        catch (OleDbException tietokantavika)
        {
            Console.WriteLine("No connection!\n" + tietokantavika.Message);
            return;
        }
        OleDbCommand haekomento = new OleDbCommand();
        haekomento.Connection = yhteys;
        haekomento.CommandText = "Select clientnumber, accountNumber,pinCode, money FROM Account";
        OleDbDataReader  lukija = haekomento.ExecuteReader();
        while (lukija.Read())
        {

            string accountNumber2 = (string)lukija["accountNumber"];
            int pinCode2 = (int)lukija["pinCode"];
            decimal money2 = (decimal)lukija["money"];
            int clientNumber2 = (int)lukija["clientNumber"];

            if ((txtAccountNumber.Text == accountNumber2) && int.Parse(pinCode.Text) == pinCode2)
            {
                Menu GoToMenu = new Menu();
                GoToMenu.Show();
            }
            else
                lblväärä.Text = "Wrong pin or account!"; 
```

所以我用注册给史蒂夫布什的账号 1111-1111 和密码 1111 登录

这里的问题是，当我登录并进入菜单表单时，它以错误的用户身份登录。它应该以 Steve Bush (clientNumber 1) 的身份登录，但它以 Greg Ott (clientNumber 3) 的身份登录。我认为问题是因为我一直使用相同的连接，但我不知道如何解决它。我的表格 2

```
 OleDbConnection connection;
            yhteys = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0; Data Source= tilit.accdb");
            try
            {
               connection.Open();

            }
        catch (OleDbException tietokantavika)
        {
            Console.WriteLine("No connection!\n" + tietokantavika.Message);
            return;
        }
        OleDbCommand haekomento = new OleDbCommand();
        haekomento.Connection = yhteys;
        haekomento.CommandText = "Select  clientNumber, firstName, lastName FROM Client";

        OleDbDataReader lukija = haekomento.ExecuteReader();

        while (lukija.Read())
        {
            int clientNumber2 = (int)lukija["clientNumber"];
            string lastName2 = (string)lukija["lastName"];
            string  firstName2 = (string)lukija["firstName"];

            lblNimi.Text = "Welcome" + firstName2  + lastName2; // Here it should display Steve Bush but instead it says Greg Ott 
```

我知道我在该代码中犯了很多错误，这就是我来这里寻求帮助的原因。我已经坚持了几个小时，不知道如何解决它。

# ios - 创建我的 UITableViewCells 时，为什么从未调用过 init？（导致空白单元格？）

> ID：16001943
> 
> 赞同：1
> 
> 时间：2013-04-14T17:21:10.533
> 
> 标签：ios, objective-c, uiview, uitableview

在我的 UITableView 中，我最近将单元格的结构从以前只是将 UILabels 放在单元格的 contentView 中，改为在 contentView 中添加两个 UIView（CellFront 和 CellBack，彼此重叠）（这样我可以实现滑动效果通过滑动顶部并显示较低的）并将 UILabels 添加到顶部 UIView。

但是，现在，无论出于何种原因，单元格永远不会被初始化，因此我的 UITableView 充满了空白单元格。

我的单元格创建如下（ArticleCell 是 UITableViewCell 的子类）：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = nil;

    ArticleInfo *articleInfo = [self.fetchedResultsController objectAtIndexPath:indexPath];

    // Checks if user simply added a body of text (not from a source or URL)
    if ([articleInfo.isUserAddedText isEqualToNumber:@(YES)]) {
        CellIdentifier = @"BasicArticleCell";
    }
    else {
        CellIdentifier = @"FullArticleCell";
    }

    ArticleCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if (cell == nil) {
        cell = [[ArticleCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // If the user simply added a body of text, only articlePreview and progress has to be set
    cell.preview = articleInfo.preview;

    // If it's from a URL or a source, set title and URL as well
    if ([articleInfo.isUserAddedText isEqualToNumber:@(NO)]) {
        cell.title = articleInfo.title;
        cell.URL = articleInfo.url;
    }

    return cell;
} 
```

但是我在 if 语句中的上面的 initWithStyle 方法上设置了一个断点，它永远不会被调用：

![在此处输入图像描述](https://i.stack.imgur.com/RY9zy.png)

什么会导致这个？我每次都在删除应用程序并从头开始构建它，因此数据肯定会添加到 UITableView 中，但所有单元格都是空白的。我可以告诉我正在添加一堆单元格，因为我在所有这些单元格上都有披露指示符，而表格视图只是充满了只有指示符的空单元格。

![在此处输入图像描述](https://i.stack.imgur.com/gYA3k.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T17:26:57.573

尝试

```
ArticleCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

代替

```
ArticleCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; 
```

* * *

第一个是旧的标准方式。它不会为您创建一个单元格。而第二个单元将从情节提要中创建。因此，如果您使用情节提要，您确实应该使用您现在使用的方法，但它永远不会向 if 分支提供信息，因为单元格永远不会为零。

* * *

当实例化表单故事板时，`initWithStyle:reuseIdentifier:`永远不会被调用。要么设置好一切，`-initWithCoder:`要么`-layoutSubviews`

# c# - DateTimeOffset 类型的模拟属性导致 Windows 应用商店测试库中的 InvalidProgramException

> ID：16001946
> 
> 赞同：1
> 
> 时间：2013-04-14T17:21:22.397
> 
> 标签：c#, unit-testing, nunit, windows-store, moq-rt

我刚开始使用 Windows Store 应用程序，并决定在我的项目中使用测试驱动开发。由于我之前对 NUnit 有过一些经验，因此我选择了这个库，然后我开始使用 MoqRT，它是一个网站推荐的模拟库，作为用于 Windows 应用商店应用程序的模拟库。

我面临的问题是当我模拟一个具有 a`DateTimeOffset`作为属性类型的对象时。我收到以下异常：

> System.InvalidProgramException：公共语言运行时在 Castle.Proxies.ITimeProxy_1.get_Expires()检测到无效程序
> 
> ...*由于清晰而删除了堆栈跟踪的其余部分*

现在，*这只*发生在我`DateTimeOffset`在属性上使用类型时，并且模拟例如字符串属性可以很好地工作。

```
using System;
using Moq;
using NUnit.Framework;

namespace StoreTesting
{
    [TestFixture]
    public class UnitTest1
    {
        [Test]
        public void TestMethod1()
        {
            // Mock
            DateTimeOffset expirydate = DateTimeOffset.UtcNow.AddSeconds(2000);

            var time = new Mock<ITime>();
            time.Setup(m => m.Expires).Returns(expirydate);

            // Act
            TimeDependant obj = new TimeDependant(time.Object);
            var result = obj.Act();

            // Assert
            Assert.That(result, Is.EqualTo(expirydate));
        }
    }

    public class TimeDependant
    {
        private readonly ITime time;

        public TimeDependant(ITime time)
        {
            this.time = time;
        }

        public DateTimeOffset Act()
        {
            return time.Expires;
        }
    }

    public interface ITime
    {
        DateTimeOffset Expires { get; }
    }
} 
```

如果我继承`ITime`并使用它而不是 Mock，一切都很好。

在搜索这个时，似乎异常的主要问题与“方法太大”有关，但是看到这仅发生在类型的属性上，`DateTimeOffset`我看不出这会如何影响我的测试，因为其他属性应该失败以及是否与此有关。

另一件事是我正在使用 NUnit 应用程序运行测试，因为测试不会在 Visual Studio 2012 中运行，因为它是 Windows Store 应用程序（这是另一个问题）。我不知道这是否也会影响行为。

我要问的问题是；`DateTimeOffset`有没有办法在不引发异常的情况下模拟具有类型属性的接口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:27:30.400

据我所知，您不能将 Moq 与 Windows Store Runtime 一起使用，因为[winrt 不允许动态 codegen](https://groups.google.com/forum/?fromgroups#!topic/moqdisc/nP5kS_ZNZP0)。

我这样做只是想创建一个简单的 .NET Framework 库，它引用了我想要测试的所有代码，来自 Win Store Project

[如何使用 Moq 和 nUnit 为 Windows 运行时库编写单元测试](http://outcoldman.com/en/blog/show/332)

# ios - iAd 横幅被主视图部分遮挡

> ID：16001949
> 
> 赞同：1
> 
> 时间：2013-04-14T17:22:05.463
> 
> 标签：ios, iad, adbannerview

这是我第一次实施 iAd，所以这可能是一个新手错误。在我的应用程序委托中，我初始化了一个 iAd 横幅视图并将其分配给委托属性，然后在我的视图控制器中，我将其作为子视图添加到视图中，然后将主视图添加到视图中。当它显示时，只有 iAd 横幅的顶部条带（可能是 20 像素）显示在主视图上方。我认为将子视图添加到主视图控制器的视图会自动管理视图的位置。如果我不显示主视图，我可以看到完整的 iAd 横幅。

我检查了视图的大小调整掩码，但我不知道如何指定主视图在 iAd 横幅视图下方被“挤压”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:36:47.877

猜猜我是否玩得够多……我所做的是为视图设置边界矩形，从 iAd 横幅的底部开始，然后从视图高度中减去横幅高度。

在 View Controller 的`viewDidAppear`方法中：

```
...
    [self.view addSubview:theAppDelegate.adBanner];
    CGRect mainViewFrame = CGRectMake(0, theAppDelegate.adBanner.bounds.size.height, myNavController.view.bounds.size.width, myNavController.view.bounds.size.height - theAppDelegate.adBanner.bounds.size.height);
    [myNavController.view setFrame:mainViewFrame];
    [self.view addSubview:myNavController.view]; 
```

# jquery - 通过jquery去除TABLE、TR、TD标签

> ID：16001953
> 
> 赞同：1
> 
> 时间：2013-04-14T17:22:50.227
> 
> 标签：jquery

是否可以通过 jquery 删除“TABLE、TR、TD”标签，但不应删除表内的内容。

即下面是包含图像的表格代码，我只想删除图像周围的表格、tbody、tr 和 td 标签。

**jquery之前的代码**

```
<div id="Gallery">
    <table>
      <tbody>
        <tr>
            <td><img src="image1.jpg"></td>
        </tr>
        <tr>
            <td><img src="image2.jpg"></td>
        </tr>
        <tr>
            <td><img src="image3.jpg"></td>
        </tr>
      </tbody>
    </table>
</div> 
```

**代码应该在jquery之后**

```
<div id="Gallery">
    <img src="image1.jpg">
    <img src="image2.jpg">
    <img src="image3.jpg">
</div> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:29:44.040

尝试：

```
var gallery = $("#Gallery");
var contents = gallery.find("td, th").contents().detach();
gallery.find("table").remove();
gallery.append(contents); 
```

**演示：http:** [//jsfiddle.net/Ydsg9/](http://jsfiddle.net/Ydsg9/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T17:29:43.597

```
$('#Gallery table').replaceWith(function(){
     return $(this).find('td *');
}); 
```

[http://jsfiddle.net/ec46T/](http://jsfiddle.net/ec46T/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T17:33:26.030

```
$("#Gallery img").each(function(){
    $("#Gallery").append($(this));
});
$("#Gallery table").remove(); 
```

[http://jsfiddle.net/hescano/jGT5b/](http://jsfiddle.net/hescano/jGT5b/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T17:27:27.147

尝试这个：

```
$('#Gallery img').unwrap().unwrap().unwrap().unwrap(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T17:33:54.790

另一种方法

```
 var gallery = $("#Gallery");
        var imgs = $("img", gallery).clone();

        $("table", gallery).remove();
        gallery.append(imgs); 
```

选择器已优化，`imgs`变量仍然具有对插入的图像的引用`#Gallery`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-14T17:45:54.283

这里是

```
var list = $('#Gallery table td *');
$('#Gallery').html(list.get()); 
```

你可以在这里玩它：http: [//jsfiddle.net/cockypup/Dehgf/2/](http://jsfiddle.net/cockypup/Dehgf/2/)

CSS 只是为了表明表格正在消失。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-14T17:30:17.157

如果您只期望`<td>`元素中的内容应该是，您可以使用以下内容：

```
 $(function(){
    var g = $('#Gallery'),
    f = '';

    $('td', g).each(function(){
        f += $(this).html();
    });

    g.html(f);

}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-14T17:26:25.900

[**工作小提琴**](http://jsfiddle.net/mohammadAdil/Ydsg9/1/)

```
var img = "";
$("td").each(function(){
  img = img + $(this).html();
});

$("#Gallery").append(img);
$("table").remove(); 
```

# ios - 将 IPA 上传到 Testflight 错误：IPA 无效，钥匙串访问组

> ID：16001954
> 
> 赞同：2
> 
> 时间：2013-04-14T17:22:54.353
> 
> 标签：ios, code-signing, testflight, codesign

当我尝试上传到 Testflight 时，我收到“Invalid IPA: The keychain-access-group...”错误。我会错过什么？

我已经验证了应用程序包标识符在我能想到的每个地方都匹配。存档方案设置为发布。以下是我能想到的每个部分的截图：

代码签名（没有权利）： ![代码签名](https://i.stack.imgur.com/e4n8B.png)

捆绑ID： ![捆绑包 ID](https://i.stack.imgur.com/2MCOB.png)

在组织者中：

![档案](https://i.stack.imgur.com/TQwTt.png)

在 Organizer 中，我点击 Distribute，然后点击 Save for Enterprise 或 Ad-Hoc，然后这是我选择的代码签名身份： ![分发](https://i.stack.imgur.com/rkBH0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T22:56:02.647

我的问题原来是这样的：我在项目设置中正确设置了我的代码签名标识，但它在目标等效项中被覆盖。更改 Targets 下的签名身份更正了该问题。我的错误——我只是希望在某个时候有关于这个问题的更清晰的信息。

# python - 如何在 for 循环结束时执行命令？

> ID：16001959
> 
> 赞同：3
> 
> 时间：2013-04-14T17:23:10.567
> 
> 标签：python, for-loop

我有以下代码

```
for x in list:
    if x.getValue == variableValue: 
        Print('Found') 
```

我想在循环的最后一次迭代中打印一条“找不到匹配项”的语句。

无论如何要知道`x`当前正在通过for循环运行是否是最后`x`一个`list`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T17:24:26.207

```
for x in list:
    if x.getValue == variableValue: 
        print('Found')
        break
else:
    print('not found') 
```

这`for else`也适用于仅当可迭代（例如列表）用尽并且没有发生`while else`时子句运行的位置。`else``break`

有很多人觉得这个结构让人难以理解，包括我自己。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-14T17:26:06.270

编辑：

更新的问题有一个简单的答案，不。任意迭代器不知道它们是否在最后一项上，因此`for`循环无法知道。

也就是说，循环中的值不受循环的限制，因此`x`直接在循环结束之后将始终是最后一个值。

* * *

如果你想继续循环，你可以简单地设置一个标志：

```
found = False
for x in some_list:
    if x.value == value: 
        print('Found')
        found = True

if not found:
    print("Not Found.") 
```

如果您不想在循环的每个步骤上做某事，您可以使用[`any()`](http://docs.python.org/3.3/library/functions.html#any)和[生成器表达式](http://www.youtube.com/watch?v=pShL9DCSIUw)来轻松找出没有匹配项：

```
if not any(x.value == value for x in some_list):
    print("Not Found.") 
```

# jquery - 车速表没有更新实时数据的所有值

> ID：16001961
> 
> 赞同：1
> 
> 时间：2013-04-14T17:23:13.290
> 
> 标签：jquery, json, highcharts

我有一个以 JSON 格式提供输出的 JSP 程序。我想`highchart`用那个输出更新车速表。我的仪表只从输出中获取一个值。它没有进一步更新。但我可以使用 alert 语句打印正确的值。任何人都可以帮助我吗？

这是我的代码：

```
$(function () {
var chart1=new Highcharts.Chart({
                chart:{
                    renderTo:'container',
                    type:'gauge',
                    alignTicks:false
                },
                title:{
                    text:'Speedometer'
                },
                pane:[{
                    startAngle:-150,
                    endAngle:150,
                    size:350,
                    background:{
                    outerRadius:'105%',
                    innerRadius:'72%',
                        backgroundColor:{
                            radialGradient:{
                                cx:0.5,
                                cy:0.6,
                                r:1.0
                            },
                            stops:[
                                [0.3,'#A7A9A4'],
                                [0.45,'#DDD'],
                                [0.7,'#EBEDEA']
                            ]
                        }
                    }
                },
               {
                    startAngle:-150,
                    endAngle:150,
                    size:210
                }],
                yAxis:[{
                    min:0,
                    max:100,
                    minorTickInterval:'auto',
                    tickPixelInterval:70,
                    plotBands:[{
                        from:0,
                        to:50,
                        color:'green'
                    },{
                        from:50,
                        to:80,
                        color:'yellow'
                    },{
                        from:80,
                        to:100,
                        color:'red'
                    }],
                   pane:0
                },{
                    min:0,
                    max:220 ,
                    tickPosition:'inside',
                    minorTickPosition:'inside',
                    minorTickInterval:'auto',
                    tickPixelInterval:60,
                    plotBands:[{
                        from:0,
                        to:70,
                        color:'red'
                    },{
                        from:70,
                        to:130,
                        color:'yellow'
                    },{
                        from:130,
                        to:220,
                        color:'green'
                    }],
                    pane:1
                }],
                series:[{
                    data:[70],
                    name:'Speed',
                    tooltip:{
                        valueSuffix:' km/h'
                    },
                    dataLabels:{
                        formatter:function(){
                              if(this.point.realVal)
                                return this.y;    
                              }
                },
                    yAxis:0
                },{
                    data:[100],
                    name:'RPM',
                    dataLabels:{
                        formatter:function(){
                                if(this.point.realVal1)
                                return this.y;                                    
                        }
                    },
                          yAxis:1
                }]
},
    function (chart) {
           setInterval(function () {
                                     var point = chart.series[0].points[0],
                                     point1=chart.series[1].points[0],
                                     newVal=[],newVal1=[],i,j;
                                 $.get('Db.jsp', null, function (tsv,state,xhr) {
                var data = eval ( '(' + xhr.responseText + ')' );
                                    for(i=0; i<data.points.length; i++){    
                                                                               $.each(data.points[i],function(key,val){
                                                    newVal.push(val);
                                    //alert(newVal);
                                    point.update(newVal);
                }
      }
     for(j=0; j<data.points.length; j++){   
                         $.each(data.values[j], function(key,val){
                                                       newVal1.push(val);
                                   //alert(newVal1);
                                   point1.update(newVal);
                                    }
                }
     });
  });
});
}); 
```

# ios6 - iOS 动态更改容器视图高度

> ID：16001962
> 
> 赞同：2
> 
> 时间：2013-04-14T17:23:22.610
> 
> 标签：ios6, container-view

如何根据其 childView 的图像数量动态更改容器视图的高度？

![容器](https://i.stack.imgur.com/Zfkw0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:37:47.660

这是一个与任何其他视图一样的视图，因此您可以以相同的方式对其进行更改。您需要安排获得对它的参考。当您像这样在情节提要中进行设置时，您会获得额外的层次结构，如果您手动创建父子视图控制器架构（在代码中）则不会获得：有一个容器视图，在里面是子视图控制器的视图，而如果您在代码中执行此操作，则*没有*容器视图 - 子视图控制器的视图就是全部。

# oop - 删除由 Lua / Corona SDK 和情节提要中的另一个类创建的对象

> ID：16001965
> 
> 赞同：1
> 
> 时间：2013-04-14T17:23:29.227
> 
> 标签：oop, memory-leaks, lua, coronasdk

我正在尝试找出修复我的应用程序中的内存泄漏并使用外部类的最佳方法。我在 Corona SDK 中编码并使用 Storyboard。当我通过类创建对象时，我认为我没有正确删除它们。您能看一下并帮助以下内容吗

1) 在代码的底部，我展示了如何移除键盘。这是否足够，还是我需要做更多，因为键盘是通过另一个文件创建的？

2) 在keyboard.lua 中，我需要以keyboard.lua 文件稍后可以使用函数操作它们的方式创建对象。我通过声明 theKeyboard、theCursor、theBackground 来做到这一点。

是否有任何理由这样做而不是称它们为 M.theKeyboard、M.theCursor、M.theBackground 并且由于 M 是本地的而不提前声明它们？

3) 你会以不同的方式实现这个键盘类吗？如果是这样，你能给我指点吗？

这是示例代码。我想在我的应用程序中重用这个键盘代码。任何时候都应该只有一个键盘。我想在用户退出场景时完全移除键盘，因为许多屏幕不需要键盘。

```
-- keyboard.lua
local M = {}
local theKeyboard, theCursor, theBackground

function M.newBackground()
    if theBackground then 
       theBackground = nil
    end
    local newBackground = display.newRect(0,0,0,0)
    -- set position, size, color, etc
    theBackground = newBackground
    return newBackground
end

... many other functions to create cursor, textlabels, etc

function M.newKeyboard()
    if theKeyboard then 
       theKeyboard = nil
    end
    theKeyboard = display.newGroup()
    theCursor = M.newCursor()
    theBackground = M.newBackground()

    --  lots more stuff... like I create buttons for each key on the keyboard

    theKeyboard:insert(theCursor)
    theKeyboard:insert(theBackground)
    return theKeyboard
end

function M.removeKeyboard()
   display.remove(theCursor)
   display.remove(theBackground)
   display.remove(theKeyboard)
   theCursor = nil
   theBackground = nil
   theKeyboard = nil
end

return M 
```

然后我的应用程序使用情节提要，所以这里是我如何将键盘集成到场景中的示例。

```
local keyboard = require ( "keyboard" )
local storyboard = require( "storyboard" )
local scene = storyboard.newScene()

local keyboardGroup, otherobjects 

function scene:createScene( event )
    local group = self.view
    keyboardGroup = keyboard.newKeyboard
    group:insert( keyboardGroup )
    end
end

-- other code

-- Called prior to the removal of scene's "view" (display group)
function scene:destroyScene( event )
    local group = self.view

    --  Is this sufficient for removing the keyboard completely?
        keyboard.removeKeyboard()
        keyboardGroup = nil
    end
end

---------------------------------------------------------------------------------
-- END OF YOUR IMPLEMENTATION
---------------------------------------------------------------------------------
-- additional code that comes with storyboard

return scene 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T07:47:40.410

请试试 -

```
if theKeyboard then 
   theKeyboard:removeSelf()
   theKeyboard = nil
end 
```

我认为它会解决你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:07:45.387

除了@Varsha 所说的，你应该有这个代码块。在电晕中，仅仅移除物体是不够的。collectgarbage() 函数做主要工作。之后每当您键入 object = nil 时，垃圾收集器都会将其删除。

```
local monitorMem = function() -- Garbage collector

    collectgarbage()
    --print( "MemUsage: " .. collectgarbage("count") )

    local textMem = system.getInfo( "textureMemoryUsed" ) / 1000000
    --print( "TexMem:   " .. textMem )
end
Runtime:addEventListener( "enterFrame", monitorMem ) 
```

# c - 组合两个共享 (.so) 库

> ID：16001967
> 
> 赞同：3
> 
> 时间：2013-04-14T17:23:45.627
> 
> 标签：c, compilation, makefile, cmake, shared-libraries

我有我在代码中使用的第三方库的源代码和对象。该库附带有关如何使用 CMAKE 编译它以生成处理所有依赖项的 make 文件的说明。这个 make 文件创建了两个共享库 libA.so 和 libB.so，它们链接到我的代码 stuff.cpp。

我想创建一个库 libstuff.so，其中包含独立运行的所有必要信息。有没有办法在不弄清楚构建 libA.so 和 libB.so 的所有依赖项的情况下做到这一点？我最后的手段是通过学习其他项目中的所有依赖项来绕过 CMAKE 的东西并构建我自己的 Makefile，但如果可能的话，我想避免这样做。（不是 Make 专家，直到现在才使用 CMake。）

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:39:43.480

您应该简单地将这些`libA.so`and构建`libB.so`为静态库（档案），即`libA.a`and `libB.a`，然后将它们链接到您自己的`libstuff.so`. 如果`CMakeLists`这个第三方项目没有为您提供将它们构建为静态的选项，那么您必须自己修改它以添加此选项，但只要您不是 CMake 的新手，这相对容易。

# c - 超时阻塞函数调用，没有线程，没有外部库

> ID：16001971
> 
> 赞同：1
> 
> 时间：2013-04-14T17:24:11.247
> 
> 标签：c, network-programming

我有类似的代码（非常简化）：

```
char *data, *ack;
...
while (<not done>) {
    sendData(data+offset);
    receiveACK(ack);
// <<<What I want to do>>>
//  if (ack == <bad> || <receiveACK() TIMEOUT>)
//      continue;
//
    ... 
    offset += SPACING;
} 
```

问题是 sendData() 和 receiveACK() 阻塞了我必须使用的黑匣子。

如果我在给定的时间范围内未能收到 ACK，我想要的只是再次使用相同的输入触发 sendData()。我该怎么做？

注意：线程不是一个选项。

编辑：关于 sendData() 和 receiveACK() 的一些背景知识。他们进行网络通信。sendData() 尝试发送数据，如果它不起作用则失败（这里没问题）。问题是在另一端，只有在序列和校验和正确时才会发送 ACK。换句话说：数据错误 => 没有 ACK。现在，receiveACK() 只是等待流量并对其进行解释。如果没有流量（没有 ACK），它只会继续等待，如有必要，永远等待......这就是为什么我试图围绕它建立超时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:42:04.967

假设`sendData()`总是返回，尝试添加

```
alarm(<number of seconds>); 
```

就在调用之前

```
receiveACK(ack); 
```

如果幸运的话，`SIGALRM`之后发出的信号`<number of seconds>`将`receiveACK();`返回。

（这假设`SIGALRM`没有被阻止/忽略。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T17:32:29.163

如果这些函数不是黑匣子，请在您检查 receiveAck 的任何套接字上使用 select 或 poll 来设置您想要的超时。如果您及时收到确认，请移至下一个数据包。如果超时，请重新发送。

如果它们是真正的黑匣子，那你就完蛋了。您需要库中的更多功能。尽管如果您在 linux 机器上，也许您可​​以做一些事情来强制读取 EINTR 失败。虽然选择民意调查是正确的解决方案。

# c# - Awesomium C# WebControl，更改代理设置

> ID：16001973
> 
> 赞同：5
> 
> 时间：2013-04-14T17:24:16.080
> 
> 标签：c#, proxy, awesomium

如何更改 Awesomium (c#) 中的代理设置？我现在有这个简单的代码

```
Awesomium.Windows.Forms.WebControl browser =
    new Awesomium.Windows.Forms.WebControl();

browser = new Awesomium.Windows.Forms.WebControl();
browser.Paint += browser_Paint;
browser.Location = new System.Drawing.Point(1, 1);
browser.Name = "webControl";
browser.Size = new System.Drawing.Size(1024, 768);
browser.Source = new System.Uri("http://checkip.dyndns.com/", System.UriKind.Absolute);
browser.TabIndex = 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T15:01:21.757

```
 WebPreferences prefs = new WebPreferences(){ ProxyConfig = "xxx.xxx.xxx.xxx:port" }
  session = WebCore.CreateWebSession(prefs);
  browser.WebSession = session; 
  browser.Source = new System.Uri("http://checkip.dyndns.com/", System.UriKind.Absolute); 
```

检查[此](https://stackoverflow.com/questions/11022304/is-there-any-way-to-use-authentication-with-proxy-in-awesomium/18789078#18789078)答案以获取更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T14:55:17.827

您可以在管理所有 Web 控件的 WebCore 上设置代理配置。看看[WebCoreConfig.ProxyServer 属性](http://awesomium.com/docs/1_6_3/sharp_api/html/4e0b6e20-aa5f-de8c-aca3-c32c9e53dccd.htm)。

您需要创建一个 WebCoreConfig 对象，然后在 WebCore 构建期间使用它。

看看[WebCore API](http://awesomium.com/docs/1_6_3/sharp_api/html/a0a09478-96b5-a264-7976-b8f5e456ead8.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-09T23:09:56.140

您需要将工具箱中的 WebSessionProvider 控件添加到表单中。然后将您的 Webcontrol 的 WebSessionProvider 属性设置为您刚刚添加的那个。

然后，转到（始终在设计器视图中）新添加的 WebSessionProvider 的属性并展开 Preferences 之一：然后您将找到一个 ProxyConfig 值来填充您想要使用的任何代理配置。

# python - 从 Elixir 到具有子继承的 SqlAlchemy 声明式多态节点

> ID：16001977
> 
> 赞同：1
> 
> 时间：2013-04-14T17:24:42.127
> 
> 标签：python, sqlalchemy, python-elixir

我已经在现有数据库上完成了大量的 python/Elixir 接口。我现在正在考虑放弃 Elixir 并将所有内容转移到纯 SQLAlchemy 中，很可能想要使用声明性方法。

我什至不知道从哪里开始这种特殊的继承关系。我不认为 sqlalchemy 以这种方式（或“神奇地”）执行继承，而且我有点困惑 sqlalchemy 中的相同情况：

这是一个多态多表连接，每个类都映射到自己的数据库表。完成后，另一个类（此处未包括）将有一个带有“Comp”的 OneToMany。Comp 子类有一个主键，它是 Comp.id 的外键。

```
class Comp(Entity):
    using_options(inheritance='multi')
    parent = ManyToOne('Assembly', onupdate='cascade', ondelete='set null')
    quantity = Field(Numeric(4), default=1)

    def __repr__(self):
        return "<Comp>"

## If not familiar with Elixir, each of the following "refid" point to a different
## table depending on its class. This is the primary need for polymorphism.    

class CompAssm(Comp):
    using_options(inheritance='multi')
    refid = ManyToOne('Assembly', onupdate='cascade', ondelete='set null')

    def __repr__(self):
        return "<CompAssm>"

class CompItem(Comp):
    using_options(inheritance='multi')
    refid = ManyToOne('Item', onupdate='cascade')

    def __repr__(self):
        return "<CompItem>"

class CompLabor(Comp):
    using_options(inheritance='multi')
    refid = ManyToOne('Labor', onupdate='cascade')

    def __repr__(self):
        return "<CompLabor>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:32:49.813

我认为这是大方向，但可能仍需要调整。

```
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class Assembly(Base):
    __tablename__ = 'assembly'
    assm_id = Column(Integer, primary_key=True)
    children = relationship('Comp')    

    ### other assembly stuff

class Comp(Base):
    __tablename__ = 'components'
    id = Column(Integer, primary_key=True)
    comp_type = Column('type', String(50))
    __mapper_args__ = {'polymorphic_on': comp_type}
    parent = Column(Integer, ForeignKey('assembly.assm_id'))
    quantity = Column(Integer)

class CompAssm(Comp):
    __tablename__ = 'compassm'
    __mapper_args__ = {'polymorphic_identity': 'compassm'}
    id = Column(Integer, ForeignKey('components.id'), primary_key=True)
    refid = Column(Integer, ForeignKey('assembly.assm_id'))

 class CompItem(Comp):
    __tablename__ = 'compitem'
    __mapper_args__ = {'polymorphic_identity': 'compitem'}
    id = Column(Integer, ForeignKey('components.id'), primary_key=True)
    refid = Column(Integer, ForeignKey('items.id'))

class CompLabor(Comp):
    __tablename__ = 'complabor'
    __mapper_args__ = {'polymorphic_identity': 'complabor'}
    id = Column(Integer, ForeignKey('components.id'), primary_key=True)
    refid = Column(Integer, ForeignKey('labors.id')) 
```

# ruby-on-rails - 防止 Rails 存储临时无效值

> ID：16001981
> 
> 赞同：0
> 
> 时间：2013-04-14T17:24:46.897
> 
> 标签：ruby-on-rails

使用 Rails 3.2。

很正常的，当我们提交表单时，经过验证后，它仍然会在字段中保留无效值，并渲染到视图中以显示输入的内容。

假设我有回形针，它可以让用户上传头像。当我上传一个非图片文件时，例如`abc.pdf`，它会返回无效，但这个无效值仍然会暂时存储在`avatar_file_name`列中。

因此，当我呈现错误页面时，我的视图将尝试返回一个图像标记并查找，`abc.pdf`因为它在该`avatar_file_name`字段中。

如何防止 Rails 存储这个临时无效值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:49:19.433

我没有使用 PaperClip，但是如果你发现错误，你应该可以在控制器中将 avatar_file_name 设置为 nil，就像这样

参数[:user][:avatar] = nil

# .net - 如何将DLL放在Windows Azure中发布的Web应用程序的Bin文件夹中而不引用它？

> ID：16001986
> 
> 赞同：0
> 
> 时间：2013-04-14T17:24:57.363
> 
> 标签：.net, azure

这个问题看起来很奇怪，但奇怪的问题通常需要奇怪的解决方案。

我在使用 Windows Azure 和 SignalR 时遇到问题。[正如我在这里所描述](https://stackoverflow.com/questions/15987720/signalr-on-azure-could-not-load-file-or-assembly-system-enterpriseservices-wra)的，没有找到程序集`System.EnterpriseServices.Wrapper.dll`，我的应用程序不时崩溃。

我无法明确添加对`System.EnterpriseServices.Wrapper.dll`. Visual Studio 不会让我这样做。这个 DLL 有一些不同之处。但是，当我把这个 DLL 放在 web 应用程序 bin 文件夹中时，我不会有任何问题 :)。一切正常。

所以我有了一个想法。我将把`System.EnterpriseServices.Wrapper.dll`我的 Web 应用程序作为资源放入并设置`Copy to Output Directory`为 true。这样，我将在 bin 文件夹中有一个 DLL，而无需对其进行引用。

我描述的这种情况在模拟器中完美运行，但我不能再将我的应用程序发布到 Azure。

```
Error   30  The "ProvideAssemblyProcessorArchitecture" task failed unexpectedly.
System.BadImageFormatException: The module was expected to contain an assembly manifest. (Exception from HRESULT: 0x80131018) 
```

Azure 似乎会在发布之前对程序集进行预处理。在此过程中，它将引发错误。

有什么办法可以把这个程序集放在我的 web 应用程序的 bin 文件夹中？

# ios - 在 iOS 中使用 SQLite3 插入语句时出错

> ID：16001988
> 
> 赞同：0
> 
> 时间：2013-04-14T17:25:15.270
> 
> 标签：ios, objective-c, sqlite, insert

我正在尝试在 iOS 应用程序的 SQLite 3 数据库中插入一些数据。但我不断收到一个对我无用的错误。

这是我试图插入的代码：

```
 @try {
        NSString *dbPath = [self.GetDocumentDirectory stringByAppendingPathComponent:@"knhb.sqlite"];
        BOOL success = [fileMgr fileExistsAtPath:dbPath];
        if(!success)
        {
            NSLog(@"Cannot locate database file '%@'.", dbPath);
        }
        if((sqlite3_open_v2([dbPath UTF8String], &db, SQLITE_OPEN_READWRITE, NULL) != SQLITE_OK))
        {
            NSLog(@"An error has occured.");
        }

        NSString *sqlString = [NSString stringWithFormat:@"INSERT INTO Profile (name, password) VALUES ('%@','%@')", name, password];

        const char *sql = [sqlString UTF8String];

        sqlite3_stmt *sqlStatement;

        if(sqlite3_prepare_v2(db, sql, 1, &sqlStatement, NULL) != SQLITE_OK)
        {
            NSLog(@"%s SQLITE_ERROR '%s' (%1d)", __FUNCTION__, sqlite3_errmsg(db), sqlite3_errcode(db));
        }

        sqlite3_step(sqlStatement);
        sqlite3_finalize(sqlStatement);

        int lastInsert = sqlite3_last_insert_rowid(db);
        NSLog(@"lastinsertid:%d", lastInsert);

        sqlite3_close(db);
    }
    @catch (NSException *exception) {
        NSLog(@"An exception occured: %@", [exception reason]);
    } 
```

我的数据库表 Profile 有三列 idProfile、name 和 password。但是由于 idProfile 是一个 int 和主键，我不必包含它，因为它是自动递增的。

我不断收到的错误是： SQLITE_ERROR 'near "I": syntax error' (1)

我正在写入 Documents 文件夹。

任何帮助是极大的赞赏。

大安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:20:55.580

我不太清楚为什么，但我通过更改以下代码行来修复它：

```
if(sqlite3_prepare_v2(db, sql, 1, &sqlStatement, NULL) != SQLITE_OK) 
```

我把它变成了：

```
if(sqlite3_prepare_v2(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK) 
```

不确定 1 或 -1 是什么意思。也许有人可以详细说明？

干杯!

# internet-explorer - xsl 样式表在 IE 和 Firefox 中的服务器上工作，仅在 IE 本地工作

> ID：16001993
> 
> 赞同：2
> 
> 时间：2013-04-14T17:26:00.410
> 
> 标签：internet-explorer, google-chrome, firefox, cross-browser, xslt-1.0

我有一个 xml 文档和关联的 xsl 样式表。

当我将 xsl 和 xml 放在我的服务器上时，会应用 xsl 样式表，并且 XML 文档在 IE、Firefox 和 Chrome 中正确呈现。当我将文件拉到本地（进入相同的文件结构）时，文档在 IE 中正确呈现，但在 Firefox 或 Chrome 中不正确。在 Firefox 中，我没有收到错误消息，但它只显示一个长文本流，就好像它直接传递 XML 文档内容而不应用任何 xsl。在 Chrome 中，我也没有收到任何错误消息，但屏幕是空白的，什么都没有，但又没有错误。

统计：Firefox 20.0.1 IE 9 Chrome 版本 26.0.1410.64 m

XSL 文件的开头是这样的：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" xmlns:ns2="http://www.w3.org/1999/xlink"> 
```

XML 文件的开头是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../styles/newberry.xsl"?>

<!DOCTYPE ead PUBLIC "+//ISBN 1-931666-00-8//DTD ead.dtd (Encoded Archival Description (EAD) Version 2002)//EN" "http://library.syr.edu/digital/guides/lavender/ead.dtd">
<ead>
[blah blah rest of document]
</ead> 
```

FWIW，我确实尝试在 xml 文件的本地版本上将样式表路径从相对路径更改为绝对路径，但没有帮助。我不知道从这里去哪里。欢迎提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T19:31:10.480

这是一项安全功能。对于本地文件，Firefox（可能还有 Chrome）不会加载与 XML 文件不在同一目录中的样式表。[您可以在此Firefox 错误报告](https://bugzilla.mozilla.org/show_bug.cgi?id=397894)中找到更多信息。

# ruby - 如何从参数数组中检索 Ruby/Sinatra 参数？

> ID：16001997
> 
> 赞同：2
> 
> 时间：2013-04-14T17:26:11.577
> 
> 标签：ruby, hashmap, params

我的 ExtJS 前端将这样的参数哈希发送到我的 Sinatra 后端：

```
{"_dc"=>"1365959782607", "page"=>"6", "start"=>"250", "limit"=>"50", "sort"=>"[{\"property\":\"port\",\"direction\":\"ASC\"}]"} 
```

如何获得参数“属性”和“方向”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T17:39:29.067

您的问题与 Sinatra 无关，这是一个基本问题，即如何从哈希中提取值并处理 JSON：

```
require 'json'
hash = {"_dc"=>"1365959782607", "page"=>"6", "start"=>"250", "limit"=>"50", "sort"=>"[{\"property\":\"port\",\"direction\":\"ASC\"}]"}

JSON[hash['sort']].first.values_at('property', 'direction')
=> ["port", "ASC"] 
```

使用解析序列化对象`JSON[hash['sort']]`返回一个包含单个哈希的数组。`first`将返回该哈希。那时，这只是获取值的常用方法。我曾经`values_at`将它们作为数组返回。

传递`JSON[]`一个字符串，JSON 将尝试解析它，期望一个 JSON 编码的对象。传递`JSON[]`另一个对象，如数组或哈希，JSON 会将其编码为其序列化格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T17:30:54.487

您可以通过以下方式进行操作：

```
require 'json'
a = {"_dc"=>"1365959782607", "page"=>"6", "start"=>"250", "limit"=>"50", "sort"=>"[{\"property\":\"port\",\"direction\":\"ASC\"}]"}

sort = JSON.parse a["sort"]
p sort[0]["property"] # "port"
p sort[0]["direction"]  # "ASC" 
```

# css - CSS 媒体查询相互推翻

> ID：16001999
> 
> 赞同：2
> 
> 时间：2013-04-14T17:26:22.147
> 
> 标签：css, media-queries

我的样式表中有几个媒体查询，每个都修改了一些样式，但没有修改其他样式。我正在使用`max-width`查询：

```
@media screen and (max-width: 1024px) {
    #header .span6 { width: 60%; margin-left: 200px; }
    #error .span6 { width: 60%; margin-left: 200px; }
    #timer-block { width: 60%; margin-left: 200px;}
    #timer { font-size: 5em; }
    #start-pause { margin-left: 200px; }
    .control { width: 297px; margin-top: 0; }
    #footer { width: 60%; margin-left: 200px; }
}

@media screen and (max-width: 768px) {
    #header .span6 { width: 80%; margin-left: 75px; }
    #error .span6 { width: 80; margin-left: 75px; }
    #timer-block { width: 80%; margin-left: 75px;}
    #timer { font-size: 5em; }
    #start-pause { margin-left: 75px; }
    .control { width: 300px; margin-top: -5px; }
    #footer { width: 80%; margin-left: 75px; }
}

@media screen and (max-width: 800px) {
    #header .span6 { width: 80%; margin-left: 75px; }
    h1 { font-size: 3.5em; margin-bottom: 0px;}
    #error .span6 { width: 80%; margin-left: 75px; }
    #timer-block { width: 80%; margin-left: 75px; }
    #timer { font-size: 5em; }
    .little { font-size: 0.5em; }
    #start-pause { margin-left: 75px; }
    .control { width: 312px; margin-top: -5px; }
    #footer { width: 80%; margin-left: 75px; }
}

@media screen and (max-width: 600px) {
    #header .span6 { width: 90%; margin-left: 25px; }
    #error .span6 { width: 90%; margin-left: 30px; }
    #timer-block { width: 90%; margin-left: 30px;}
    #start-pause { margin-left: 30px; }
    .control { width: 264px; margin-top: -5px; }
    #footer { width: 90%; margin-left: 25px; }
}

@media screen and (max-width: 480px) { 
    #header { margin-top: -10px; }
    #header .span6 { width: 90%; margin-left: 25px; }
    h1 { font-size: 3em; margin-left: -15px; padding-left: 10px; }
    #interval { width: 150px; height: 40px; font-size: 2em; margin-bottom: 20px; width: 150px; }
    #error .span6 { width: 90%; margin-left: 25px; }
    #timer-block { width: 90%; margin-left: 24px; height: 100px; padding: 10px; }
    #start-pause { margin-left: 25px; }
    .control { margin-top: -5px; width: 210px; }
    #footer { width: 100%; margin-top: -20px; margin-left: 0; }
}

@media screen and (max-width: 320px) { 
    #timer-block { width: 90%; margin-left: 15px; padding: 10px; font-size: 0.8em; }
    #header { margin-top: 0px; }
    #header .span6 { margin-left: 37px; }
    #interval { margin-top: -45px; margin-left: 20px; }
    #error .span6 { width: 90%; margin-left: 15px; }
    .control { width: 141px; margin-top: -10px; }
    #start-pause { margin-left: 15px; }
    #footer { width: 95%; margin-left: 10px; }
} 
```

有没有办法可以改变我正在做的事情以使没有碰撞？这是我第一次使用媒体查询，所以我可能完全遗漏了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T17:32:01.893

代替

```
@media screen and (max-width: 480px) 
```

您可以使用

```
@media screen and (max-width: 480px) and (min-width: 321px) 
```

这样，它只会查看 320 到 481 之间的屏幕尺寸；而不是 0 和 481

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T17:31:20.187

设置比下一个查询的最大宽度高 1 个像素的最小宽度

例子

```
@media screen and (min-width: 769px) and (max-width: 1024px) {
    #header .span6 { width: 60%; margin-left: 200px; }
    #error .span6 { width: 60%; margin-left: 200px; }
    #timer-block { width: 60%; margin-left: 200px;}
    #timer { font-size: 5em; }
    #start-pause { margin-left: 200px; }
    .control { width: 297px; margin-top: 0; }
    #footer { width: 60%; margin-left: 200px; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T17:31:31.833

我认为您需要`min-width`在这种情况下使用以防止碰撞，例如：

```
@media only screen and (min-width : 321px) and (max-width : 480px) {
    /* Styles */
} 
```