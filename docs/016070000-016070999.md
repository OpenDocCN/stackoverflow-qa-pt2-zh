# StackOverflow 问答 16070000-16070999

# c++ - 矢量性能不佳 在 VS2012 的 64 位目标中

> ID：16070000
> 
> 赞同：34
> 
> 时间：2013-04-17T20:48:56.443
> 
> 标签：c++, performance, vector, boolean

对这个类进行基准测试：

```
struct Sieve {
  std::vector<bool> isPrime;

  Sieve (int n = 1) {
    isPrime.assign (n+1, true);
    isPrime[0] = isPrime[1] = false;

    for (int i = 2; i <= (int)sqrt((double)n); ++i)
      if (isPrime[i]) 
        for (int j = i*i; j <= n; j += i)
          isPrime[j] = false;
  }
}; 
```

当为大量调用构造函数时，使用 64 位二进制与 32 位版本（发布版本）相比，我的性能（CPU 时间）差了 3 倍以上，例如

```
Sieve s(100000000); 
```

我测试过`sizeof(bool)`，它`1`适用于两个版本。当我用64 位和 32 位版本替换`vector<bool>`时，性能变得相同。`vector<char>`这是为什么？

以下是`S(100000000)`（发布模式，首先是 32 位，其次是 64 位）的运行时间：

`vector<bool>`0.97s 3.12s `vector<char>`0.99s 0.99s `vector<int>` 1.57s 1.59s

我还用 VS2010 进行了健全性测试（由 Wouter Huysentruit 的响应提示），结果为 0.98s 0.88s。所以VS2012的实现有问题。

[我向Microsoft Connect](https://connect.microsoft.com/VisualStudio/feedback/details/784973/performance-of-vector-bool-3-times-slower-in-64-bit-build-than-32-bit-build)提交了错误报告

**编辑**

下面的许多答案评论了使用`int`索引的缺陷。这可能是真的，但即使是大巫师本人`for (int i = 0; i < v.size(); ++i)`也在他的书中使用了一个标准，所以这样的模式应该不会导致显着的性能损失。此外，这个问题是在 Going Native 2013 会议期间提出的，C++ 大师的主持小组评论了他们早期建议使用`size_t`for indexing 和 as a return type of `size()`as 错误。他们说：“对不起，我们还年轻……”

这个问题的标题可以改写为：*从 VS2010 升级到 VS2012 时，此代码的性能下降超过 3 倍。*

**编辑**

我粗略地尝试查找索引的内存对齐，`i`并`j`发现这个检测版本：

```
struct Sieve {
  vector<bool> isPrime;

  Sieve (int n = 1) {
    isPrime.assign (n+1, true);
    isPrime[0] = isPrime[1] = false;

    for (int i = 2; i <= sqrt((double)n); ++i) {
      if (i == 17) cout << ((int)&i)%16 << endl;
      if (isPrime[i]) 
        for (int j = i*i; j <= n; j += i) {
          if (j == 4) cout << ((int)&j)%16 << endl;
          isPrime[j] = false;
        }
    }
  }
}; 
```

现在自动神奇地运行得很快（仅比 32 位版本慢 10%）。这种和 VS2010 的性能使得我们很难接受优化器在处理`int`索引而不是`size_t`.

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-18T06:31:29.670

`std::vector<bool>`这不是直接的错。性能差异最终是由于您在循环中使用带符号的 32 位`int`类型以及编译器分配的一些相当差的寄存器造成的。例如，考虑您的最内层循环：

```
for (int j = i*i; j <= n; j += i)
    isPrime[j] = false; 
```

这里，`j`是一个 32 位有符号整数。但是，当它用于 时`isPrime[j]`，必须将其提升（和符号扩展）为 64 位整数，以便执行下标计算。编译器不能仅仅将`j`其视为 64 位值，因为这会改变循环的行为（例如，如果`n`为负）。编译器也无法使用 32 位数量执行索引计算`j`，因为这会改变该表达式的行为（例如，如果`j`为负数）。

因此，编译器需要使用 32 位为循环生成代码，`j`然后它必须生成代码以将其转换`j`为 64 位整数以进行下标计算。对于外部循环，它必须做同样的事情`i`。不幸的是，在这种情况下，编译器似乎分配寄存器相当糟糕^(（*）) ——它开始将临时变量溢出到堆栈中，从而导致您看到的性能下降。

如果您更改程序以`size_t`在任何地方使用（在 x86 上为 32 位，在 x64 上为 64 位），您将观察到性能与 x86 相当，因为生成的代码只需要使用一种大小的值：

```
Sieve (size_t n = 1)
{
    isPrime.assign (n+1, true);
    isPrime[0] = isPrime[1] = false;

    for (size_t i = 2; i <= static_cast<size_t>(sqrt((double)n)); ++i)
        if (isPrime[i]) 
            for (size_t j = i*i; j <= n; j += i)
                isPrime[j] = false;
} 
```

无论如何你都应该这样做，因为混合有符号和无符号类型，特别是当这些类型具有不同的宽度时，是危险的并且可能导致意外错误。

请注意， using`std::vector<char>`也“解决”了问题，但出于不同的原因：访问 a 的元素所需的下标计算`std::vector<char>`比访问 的元素要简单得多`std::vector<bool>`。优化器能够为更简单的计算生成更好的代码。

* * *

(*) 我不从事代码生成工作，我几乎不是汇编或低级性能优化方面的专家，但从查看生成的代码来看，鉴于这里报道 Visual C++ 2010 生成更好代码，我猜编译器有改进的机会。我会确保将您打开的 Connect 错误转发给编译器团队，以便他们查看。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-04-17T21:18:57.023

我`vector<bool>`在 VS2010 中对此进行了测试：32 位需要 1452 毫秒，而 64 位需要 1264 毫秒才能在 i3 上完成。

VS2012中同样的测试（这次在i7上）需要700ms（32位）和2730ms（64位），所以VS2012中的编译器有问题。也许您可以将此测试用例作为错误报告给 Microsoft。

**更新**

问题是VS2012编译器在使用int作为迭代器时，内部for循环中的部分代码使用了临时堆栈变量。下面列出的组件部分是代码里面的一部分 ，`<vector>`在.`+= operator``std::vector<bool>::iterator`

**size_t 作为迭代器**

用作迭代器时`size_t`，部分代码如下所示：

```
or  rax, -1
sub rax, rdx
shr rax, 5
lea rax, QWORD PTR [rax*4+4]
sub r8, rax 
```

在这里，所有指令都使用非常快的 CPU 寄存器。

**int 作为迭代器**

当`int`用作迭代器时，相同的部分如下所示：

```
or  rcx, -1
sub rcx, r8
shr rcx, 5
shl rcx, 2
mov rax, -4
sub rax, rcx
mov rdx, QWORD PTR _Tmp$6[rsp]
add rdx, rax 
```

在这里您可以看到正在使用的 _Tmp$6 堆栈变量，这会导致速度变慢。

**将编译器指向正确的方向**

有趣的是，您可以通过直接使用将编译器指向正确的方向`vector<bool>::iterator`。

```
struct Sieve {
  std::vector<bool> isPrime;

  Sieve (int n = 1) {
    isPrime.assign(n + 1, true);

    std::vector<bool>::iterator it1 = isPrime.begin();
    std::vector<bool>::iterator end = it1 + n;
    *it1++ = false;
    *it1++ = false;
    for (int i = 2; i <= (int)sqrt((double)n); ++it1, ++i)
        if (*it1)
            for (std::vector<bool>::iterator it2 = isPrime.begin() + i * i; it2 <= end; it2 += i)
                *it2 = false;
  }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T21:13:48.027

`vector<bool>`是一个非常特殊的容器，专门为每个项目使用 1 位，而不是提供正常的容器语义。我怀疑编译 64 位时位操作逻辑要昂贵得多（它仍然使用 32 位块来保存位或其他原因）。`vector<char>`行为就像一个正常`vector`的，所以没有特殊的逻辑。

您也可以使用`deque<bool>`which 没有专业化。

# php - 陷入 htaccess 并重写

> ID：16070001
> 
> 赞同：1
> 
> 时间：2013-04-17T20:49:02.213
> 
> 标签：php, .htaccess, rewrite

这是我在这里的第一个问题，所以提前谢谢大家，也很抱歉我的英语不好。

我正在尝试将 htaccess 和重写应用到我正在处理的一个项目中，但问题是我以前从未这样做过。我一直在阅读很多帖子（例如[http://corz.org/serv/tricks/htaccess2.php](http://corz.org/serv/tricks/htaccess2.php)或这个[http://www.the-art-of-web.com/system/rewrite/1 /#.UW7mHqJhXCd](http://www.the-art-of-web.com/system/rewrite/1/#.UW7mHqJhXCd)）和有关此的文章，但结合以前没有关于正则表达式的经验，我无法完成......

我已经用了 2 天了，我已经没有时间完成它了，所以我想知道是否有人可以帮我一把，所以这里是：

* * *

我有的：

我根目录下的 3 个文件：index.php home.php 404.php

在数据库上：在用户表上有一个名为 user_url 的字段

如何工作：

我想像这样 www.example.com/user_url 显示每个用户的个人页面

我现在正在这样做 www.example.com/?id=user_url

但在某些情况下，我也需要它能够直接访问文件，例如使用 home.php 而不必制作类似 ?id=home 的东西

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:56:21.873

尝试将这些规则添加到文档根目录中的 htaccess 文件中，最好在执行其他类型路由的规则之上：

```
Options -Multiviews
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/?$ /index.php?id=$1 [L,QSA] 
```

就这点而言：

> 但在某些情况下，我也需要它能够直接访问文件，例如使用 home.php 而不必制作类似 ?id=home 的东西

我不知道你在说什么。如果您的意思是您不想将`http://www.example.com/home.php`其重写为`/index.php?id=home.php`，那么这就是上述两个条件的作用。

# mono - 通过 CentOS 更新 Mono

> ID：16070006
> 
> 赞同：0
> 
> 时间：2013-04-17T20:49:10.310
> 
> 标签：mono, centos

你好，我有 CentOS，我正在尽我最大的努力更新 Mono，我目前有 1.2.4 版本，我试图通过 xbuild 编译一些东西，但我想它不起作用，因为我正在使用旧版本的单声道。

请在将任何指南链接到我之前，如果它链接到 ftp.novell 目录它不再有效，那么该目录将全部报废。所以我现在什至不知道在哪里可以获得合适的压缩包，因为在他们的网站上它只显示opensuse之类的？不像以前那样的 CentOS。

谁能帮我这个 ：\

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-10T23:23:04.533

你使用的是什么版本的 CentOS？4？

以下说明在 CentOS 5.9 上进行了测试。它们也可以在最新的 CentOS 版本（撰写本文时为 6.4）上正常工作，我想它们也可以在旧版本上工作。

以`/usr/src`root 身份访问

```
su
cd /usr/src 
```

确保安装了 GCC 和朋友（构建 Mono 源代码）

```
yum install gcc gcc-c++ bison 
```

获取并解压 Mono 源代码

```
wget http://download.mono-project.com/sources/mono/mono-3.0.7.tar.bz2
tar -xvjf mono-3.0.7.tar.bz2 
```

构建和安装 Mono

```
cd mono-3.0.7
./configure --prefix=/usr
make && make install 
```

验证您是否使用`mono --version`和`mcs --version`

构建 GDI+ 兼容层（System.Drawing 需要）

```
yum install glib2-devel libX11-devel pixman-devel fontconfig-devel freetype-devel libexif-devel libjpeg-devel glib2-devel libtif-devel libpng-devel giflib-devel

cd /usr/src
wget http://download.mono-project.com/sources/libgdiplus/libgdiplus-2.10.tar.bz2
tar -xvjf libgdiplus-2.10.tar.bz2 
```

# java - 使用 SwingUtilities.invokeLater 继续关注 JDialog？

> ID：16070008
> 
> 赞同：2
> 
> 时间：2013-04-17T20:49:21.257
> 
> 标签：java, multithreading, swing, user-interface, jdialog

我想显示一个`JDialog`所以我用这个：

```
SwingUtilities.invokeLater(new Runnable() {
    @Override
    public void run() { new DialogBox().setVisible(true); }
}); 
```

它可以很好地显示它，但是我`JDialog`没有保持焦点，这是它需要的（当该对话框打开时，用户不应该能够使用主 UI 工作）。

摆脱它是否安全`SwingUtilities.invokeLater()`？

哦，根据[这个问题](https://stackoverflow.com/questions/15429653/how-to-set-the-jframe-as-a-parent-to-the-jdialog)，扩展 JDialog 或 JFrame 是不明智的，为什么？这就是我一直这样做的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:10:02.383

> 它可以很好地显示它，但是我的 JDialog 没有保持焦点，这是它需要的（当该对话框打开时，用户不应该能够使用主 UI 工作）。

必须为父级或当前 JVM 的所有窗口设置[模式（true）](http://docs.oracle.com/javase/7/docs/api/java/awt/Dialog.html#setModal%28boolean%29)或[设置模式类型（各种类型）](http://docs.oracle.com/javase/7/docs/api/java/awt/Dialog.html#setModalityType%28java.awt.Dialog.ModalityType%29)

```
Is it safe to get rid of the SwingUtilities.invokeLater() 
```

是的，所有[顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)都应该在[EDT 上创建，包装在 invokeLater()](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)中，包括[JOptionPane](https://stackoverflow.com/a/12643642/714968)

# objective-c - CALayer _layer 没有在应用程序启动时初始化？！（OSX，可可）

> ID：16070011
> 
> 赞同：0
> 
> 时间：2013-04-17T20:49:33.723
> 
> 标签：objective-c, macos, cocoa, avfoundation, quartz-core

我对 AVFoundation 和 QuartzCore 开发非常陌生，我在使用 CALayers 时遇到了麻烦。如果这是一个愚蠢的问题，我很抱歉。

这是我的代码：

。H

```
#import <Cocoa/Cocoa.h>
#import <AVFoundation/AVFoundation.h>
#import <QuartzCore/QuartzCore.h>
@interface Document : NSPersistentDocument 
{
    AVPlayer *player;
    AVPlayerLayer *playerLayer;
    NSView *playerView;
}
@property AVPlayerLayer *playerLayer;
@property AVPlayer *player;
@property IBOutlet NSView *playerView;

@end 
```

.m

```
#import "Document.h"

@implementation Document
@synthesize playerView;
@synthesize player;
@synthesize playerLayer;

- (id)init
{
    self = [super init];
    if (self) {    
    }
    return self;
}

- (NSString *)windowNibName
{
    return @"Document";
}

- (void)windowControllerDidLoadNib:(NSWindowController *)aController
{
    [super windowControllerDidLoadNib:aController];
    [[aController window] setMovableByWindowBackground:YES];

    // HERE the layer is nill, and I don't understand why it's not getting initialized?! 
    [[[self playerView] layer] setBackgroundColor:CGColorGetConstantColor(kCGColorBlack)];
}

+ (BOOL)autosavesInPlace
{
    return YES;
}
@end 
```

非常感谢任何形式的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:07:21.757

如果`layer`是 nil，你应该首先怀疑它的 parent`playerView`是 nil。是吗？如果是这样，您可能还没有在笔尖上连接插座。（我看到您已在*代码中**声明* `playerView`为插座，但这并不意味着您已正确配置*笔尖*。）

# windows - 如何禁用 Qt QMessageBox 播放的声音？

> ID：16070012
> 
> 赞同：6
> 
> 时间：2013-04-17T20:49:35.660
> 
> 标签：windows, qt

我正在使用 Qt 4.8 开发一个 Windows 应用程序，该应用程序使用

```
QMessageBox::information
QMessageBox::warning
... 
```

当调用这些函数中的任何一个时，windows 默认会播放声音。我的客户对此感到恼火，并希望在不更改 Windows 设置的情况下永久禁用此功能。

如果出现这种声音，我该如何摆脱？

我发现它是从

```
void QAccessible::updateAccessibility() 
```

但到目前为止，我还没有看到禁用它的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T06:42:59.183

如果您使用不同`QMessageBox`的`QMessageBox::about`, 或创建自己的实例`QMessageBox`并自己设置[`iconPixmap`](http://qt-project.org/doc/qt-4.8/qmessagebox.html#iconPixmap-prop)所有内容，则不应听到哔哔声。

```
QMessageBox::warning(0, "Test", "test"); // Plays alert

QMessageBox::about(0, "Test", "test"); // No sound, but no icon either

QMessageBox msgBox;
msgBox.setParent(0);
msgBox.setWindowTitle("Test");
msgBox.setText("test");
if(false)
{
    msgBox.setIcon(QMessageBox::Warning);// makes sound
}
else
{
    QPixmap p;
    p.load("warning.png");
    msgBox.setIconPixmap(p);// no sound, but with icon
}
msgBox.exec(); 
```

否则，要禁用警告声音，您可能需要在应用程序上使用[全局事件过滤器](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#notify)`QAccessibility`来捕获来自角色的任何事件/消息`QAccessible::AlertMessage`。

希望有帮助。

# c# - Try-Catch 在 MySQL 连接命令中未按预期工作

> ID：16070013
> 
> 赞同：0
> 
> 时间：2013-04-17T20:49:38.013
> 
> 标签：c#, mysql

似乎无法捕获 MySQL 连接器引发的异常。我故意弄错了连接字符串设置，当我点击它时`c.Open()`，它停在那里，但有例外。为什么不会被抓？在该块中使用`Throw New Exception()`按预期工作。

```
string cString = string.Format( @"server={0};User Id={1};password={2};Persist Security Info=True;database={3}",
                 tbMySQLServer.Text, tbMySQLUser.Text, tbMySQLPw.Text, tbMySQLDB.Text );
MySql.Data.MySqlClient.MySqlConnection c = new MySql.Data.MySqlClient.MySqlConnection( cString );;
try
{
    c.Open();
    tbMySQLTestResult.Text = "Success!";

    if ( cString != Properties.Settings.Default.commvetgenboxConnectionString )
    {
        DialogResult dr = MessageBox.Show( "Would you like to save this new connection string?",
                    "Save?", MessageBoxButtons.YesNo, MessageBoxIcon.Question );

        if ( dr == DialogResult.Yes )
        {
            Properties.Settings.Default.commvetgenboxConnectionString = cString;
            Properties.Settings.Default.Save();
        }
    }
}
catch ( Exception ex )
{
    logger.ErrorException( "Error accessing database", ex );
    MessageBox.Show( "Error opening database./r/nSee log for detailed information./r/n" + ex.Message,
                "Error", MessageBoxButtons.OK, MessageBoxIcon.Error );
    tbMySQLTestResult.Text = "Error";
}
finally
{
    if ( c.State == System.Data.ConnectionState.Open )
    {
        c.Close();
    }
} 
```

编辑：这是我点击时的异常`c.Open()`：

```
MySql.Data.MySqlClient.MySqlException occurred
Message=Access denied for user 'ro'@'localhost' (using password: YES)
Source=MySql.Data
ErrorCode=-2147467259
Number=1045
StackTrace:
   at MySql.Data.MySqlClient.MySqlStream.ReadPacket()
InnerException: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:31:07.677

尝试修改您的连接字符串。对于 MySql，基本格式应该是这样的：

服务器=myServerAddress;Database=myDataBase;Uid=myUsername;Pwd=myPassword;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:38:33.367

Definitely a timeout issue. Either wait for the connection to timeout based on the default settings, or explicitly set a timeout of like 5 seconds, and you should be able to catch the exception.

# php - 使用 PHP GD 库翻译图像

> ID：16070014
> 
> 赞同：0
> 
> 时间：2013-04-17T20:49:38.420
> 
> 标签：php, png, gd

我想通过 PHP 翻译图像。例如，如果图像位于右下角，我需要将其移动到左上角。尺寸为 16x16，在透明的 16x16 画布内有一个图像。

![例如](https://i.stack.imgur.com/aLdPb.png)

我想通过首先计算它的位置来从下到上移动这个图像。GD能做到吗？还是我需要任何其他库作为 IMagic。

最后，我想合并两张图片，但第二张图片也在右下角，所以如果我合并两张图片会重叠，我需要决定将图片移动到哪里。

# cuda - 如何将内核代码保存在除主 .cpp 之外的单独 .cu 文件中？

> ID：16070019
> 
> 赞同：7
> 
> 时间：2013-04-17T20:50:00.950
> 
> 标签：cuda, include

如何将 cuda 内核代码和项目中的其他 cpp 代码分开？我想将所有内核定义收集在一个文件中，因为其他 cpp 文件在需要时调用它们。我试图在 kernel.cu 中编写所有内核并通过包含 kernel.cu 文件来调用内核，但它在编译时出现以下错误。

```
/usr/bin/ld: error: ./vector_summation.o: multiple definition of 

'perform_summation_method1(int*, int)'
/usr/bin/ld: ./kernels.o: previous definition here
/usr/bin/ld: error: ./vector_summation.o: multiple definition of '__device_stub__Z25perform_summation_method1Pii(int*, int)'
/usr/bin/ld: ./kernels.o: previous definition here
/usr/bin/ld: error: ./vector_summation.o: multiple definition of '__device_stub__Z25perform_summation_method2PiS_i(int*, int*, int)'
/usr/bin/ld: ./kernels.o: previous definition here
/usr/bin/ld: error: ./vector_summation.o: multiple definition of 'perform_summation_method2(int*, int*, int)'
/usr/bin/ld: ./kernels.o: previous definition here
/usr/bin/ld: error: ./vector_summation.o: multiple definition of '__device_stub__Z25perform_summation_method3PiS_i(int*, int*, int)'
/usr/bin/ld: ./kernels.o: previous definition here
/usr/bin/ld: error: ./vector_summation.o: multiple definition of 'perform_summation_method3(int*, int*, int)'
/usr/bin/ld: ./kernels.o: previous definition here 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-17T21:14:40.523

您的操作方式与使用普通 cpp 文件/模块的方式基本相同。在 c++ 中，当您想要访问另一个文件中的函数时，通常不会在另一个文件中包含一个 .cpp 文件。您包括通常仅包含函数原型的标头。

这是一个例子：

测试.h：

```
void my_cuda_func(); 
```

主.cpp：

```
#include <stdio.h>
#include "test.h"

int main(){
  my_cuda_func();
  return 0;
} 
```

测试.cu：

```
#include <stdio.h>
#include "test.h"

__global__ void my_kernel(){
  printf("Hello!\n");
}

void my_cuda_func(){
  my_kernel<<<1,1>>>();
  cudaDeviceSynchronize();
} 
```

使用以下命令构建：

```
g++ -c main.cpp
nvcc -arch=sm_20 -c test.cu
g++  -o test main.o test.o -L/usr/local/cuda/lib64 -lcudart 
```

当然还有其他方法。如果要链接到 C 而不是 C++，则需要考虑到这一点。如果您想直接从其他模块调用内核而不是使用包装函数，那么您需要通过 nvcc 而不是 g++ 传递所有模块（并且它们都应该是 .cu 文件）。此外，如果您想拥有多个带有 GPU 设备代码的文件（例如内核定义），那么您需要熟悉使用[设备代码链接器](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html#using-separate-compilation-in-cuda)。

为了完整起见，这里对上面的示例进行了重新处理，以显示如果您希望将所有内核定义都放在一个文件中，但能够直接从另一个模块调用内核时该怎么做：

测试.h：

```
__global__ void my_kernel(); 
```

main.cu:

```
#include <stdio.h>
#include "test.h"

int main(){
  my_kernel<<<1,1>>>();
  cudaDeviceSynchronize();
  return 0;
} 
```

测试.cu：

```
#include <stdio.h>
#include "test.h"

__global__ void my_kernel(){
  printf("Hello!\n");
} 
```

构建：

```
nvcc -arch=sm_20 -c main.cu
nvcc -arch=sm_20 -c test.cu
nvcc -arch=sm_20 -o test main.o test.o 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:22:13.743

您可以创建 cuda 头文件`*.cuh`并将其作为标准头文件包含在内。我不会只将内核放在一个单独的文件中，而是将它们与一些初始化函数放在一起，然后只将这些函数放在头文件中，因为您通常不只是从外部代码调用内核，而是调用一些负责处理的函数内存等。我通常制作这样的标题：

```
#ifndef __CUDAHEADER_CUH__
#define __CUDAHEADER_CUH__

/** Initialize cuda stuff */
void cudaInit(Data * host_data);

/** Cleanup, frees resources used by the device. */
void cudaFinalize();

#endif 
```

然后是包含内核、设备方法和处理 cuda 内容的这些方法的文件：

```
#include "cudaHeader.cuh"

//some global variables like:
Data * device_data;

//some kernels and device functions:
__global__ void someKernel(data * device_data) {
    ...
}

void cudaInit(Data * host_data) {
    some cudaMalloc()
    some cudaMemcpy()
    someKernel<<< gridRes, blockRes >>>(device_data);
}

void cudaFinalize() {
    cudaFree(device_data);
} 
```

但是还有更多方法可以处理您的代码......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-02-15T05:53:31.107

第一个例子：我认为你必须像这样构建（最后一行）：

```
g++ -L/usr/local/cuda/lib64 -o test main.o test.o -lcudart 
```

即把图书馆放在链接的最后。（无论如何我都需要）

# java - 如何使嵌入式 Jetty 使用它定义的 AppContext 作为 servlet 的父上下文

> ID：16070022
> 
> 赞同：1
> 
> 时间：2013-04-17T20:50:15.397
> 
> 标签：java, rest, spring-mvc, spring-3

我有一个独立的 Java 应用程序，它现在运行一个嵌入式 Jetty 服务器来为 HTTP 公开一个 RESTful API。从 Hibernate 到 Jetty，它确实大量使用了 Spring bean。我为 Jetty 配置了 DispatcherServlet（想法是将来添加非 REST API 就像制作新的控制器并为调度程序正确映射它一样简单）。

我的应用程序有一个带有 main 方法的类，它从我的 appContext.xml 创建一个 ClassPathXmlApplicationContext 来启动一切。

```
ApplicationContext ac= new ClassPathXmlApplicationContext(new String[] { "appContext.xml" }); 
```

我不知道如何使在 DispatcherServlet 的上下文配置文件中定义的 bean 可以访问在定义 jetty 的 appContext.xml 中定义的 bean。我的 Jetty 定义如下所示：

```
<bean id="JettyServer" class="org.eclipse.jetty.server.Server" init-method="start" destroy-method="stop">

    <constructor-arg>
            <bean id="threadPool" class="org.eclipse.jetty.util.thread.QueuedThreadPool">
                <property name="minThreads" value="2"/>
                <property name="maxThreads" value="10"/>
            </bean>
    </constructor-arg>

    <property name="connectors">
        <list>
            <bean id="Connector" class="org.eclipse.jetty.server.ServerConnector">
                <constructor-arg ref="JettyServer"/>
                <property name="port" value="8090"/>
            </bean>
        </list>
    </property>

    <property name="handler">
        <bean id="handlers" class="org.eclipse.jetty.server.handler.HandlerCollection">
            <property name="handlers">
                <list>
                    <bean class="org.eclipse.jetty.servlet.ServletContextHandler">
                        <property name="contextPath" value="/"/>
                        <property name="servletHandler">
                            <bean class="org.eclipse.jetty.servlet.ServletHandler">
                                <property name="servlets">
                                    <list>
                                        <bean class="org.eclipse.jetty.servlet.ServletHolder">
                                            <property name="name" value="DefaultServlet"/>
                                            <property name="servlet">
                                                <bean class="org.springframework.web.servlet.DispatcherServlet"/>
                                            </property>
                                            <property name="initParameters">
                                                <map>
                                                    <entry key="contextConfigLocation" value="classpath:./DefaultServlet.xml" />
                                                </map>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                                <property name="servletMappings">
                                    <list>
                                        <bean class="org.eclipse.jetty.servlet.ServletMapping">
                                            <property name="pathSpecs">
                                                <list><value>/</value></list>
                                            </property>
                                            <property name="servletName" value="DefaultServlet"/>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                        </property>
                    </bean>
                    <bean class="org.eclipse.jetty.server.handler.RequestLogHandler">
                        <property name="requestLog">
                            <bean class="org.eclipse.jetty.server.NCSARequestLog">
                                <constructor-arg value="/opt/impulse/logs/jetty-yyyy_mm_dd.log"/>
                                <property name="extended" value="false" />
                            </bean>
                        </property>
                    </bean>
                </list>
            </property>
        </bean>
    </property>

  </bean> 
```

然后在 DefaultServlet.xml 中，我尝试定义一个带有属性的 bean，它引用了 appContext.xml 中定义的一个 bean，这就是中断。

```
<bean id="restApiController" class="com.mycompany.myapp.api.controllers.RESTfulController">
    <property name="someBean" ref="someBean"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:14:26.680

您正在使用 引导 Jetty `applicationContext.xml`，而后者又使用您的 servlet 配置设置了 Jetty。`contextConfigLocation`在其中，您正在使用指向 servlet 应用程序上下文的参数配置您的 servlet 。即使您嵌入它，它仍将作为 web 应用程序运行。因此，您还需要为您的 servlet 提供其他 bean 的配置。我建议您将码头设置提取到它自己的文件中，然后将其余的 bean 提取到不同的文件中。然后，您在`contextConfigLocation`.

**编辑**

如果你真的需要在 jetty 和你的 servlet 之间共享应用程序上下文，也许你可以使用[这个博客](http://blog.jasonish.org/2012/12/springmvc-with-embedded-jetty.html)中的一些信息。这似乎是可能的，但看起来您必须手动连接上下文之间的父/子关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-03T12:41:29.143

对我来说，有效的是 ResourceConfig 的设置。使用 DispatcherServlet 服务器甚至无法提供 Rest 调用。所以我使用了 ServletContainer。现在 Rest 调用工作但无法访问 ApplicationContext 中加载的 bean。有 ResourceConfig 注册帮助。下面是我经过长时间研发后得出的配置。我有 Jetty 版本 9.2.11.v20150529 和 Spring 4.1.2.RELEASE

```
<bean class="org.eclipse.jetty.servlet.ServletHolder">
    <property name="name" value="DefaultServlet"/>
       <property name="servlet">              
             <bean id="servletContainer" class="org.glassfish.jersey.servlet.ServletContainer">
                <constructor-arg>
                    <ref bean="config" />
                </constructor-arg>
            </bean>                                            
         </property>
      </bean>
<bean id="config" class="org.glassfish.jersey.server.ResourceConfig" /> 
```

基本上我在 ServletContainer 下设置了 ResourceConfig。然后在应用程序中，我获取了在我的 applicationContext 中加载的所有 bean 并使用此资源配置注册，如下所示

```
ResourceConfig restConfig = (ResourceConfig)webContext.getBean("config");

String[] beans = context.getBeanDefinitionNames();

for(String bean : beans)
  restConfig.registerInstances(context.getBean(bean)); 
```

好吧，这里的 webContext 是需要的 WebAppContext 而不是 ServletContaxtHandler。因此，而不是问题中提到的以下行

```
 <bean class="org.eclipse.jetty.servlet.ServletContextHandler">
 <property name="contextPath" value="/"/> 
```

我有

```
 <!-- To work with Spring , we need WebAppContext instead of ServletContext -->
    <!-- <bean id="servletContextHandler" class="org.eclipse.jetty.servlet.ServletContextHandler"> -->
    <constructor-arg name="webApp" value="./target/classes/" />
    <constructor-arg name="contextPath" value="/" /> 
```

# azure - New-AzureDeployment 可能存在的错误

> ID：16070023
> 
> 赞同：3
> 
> 时间：2013-04-17T20:50:18.967
> 
> 标签：azure, cmdlets, azure-deployment, azure-powershell

**New-AzureDeployment** cmdlet 未使用 -Name 参数中的值更新部署名称。根据[此处](http://msdn.microsoft.com/en-us/library/windowsazure/jj152867.aspx)的 MSFT 文档，**-Name**参数映射到部署名称，但是当我测试时，使用**-Name**参数的值更新的是部署唯一名称。此外，我可以使用特殊字符，如**“。”** 直接从门户上传包时部署名称中的**“/”**，但 cmdlet 不允许我使用任何特殊字符

想知道是否有人遇到过这个问题？

这是我在使用特殊字符时看到的错误的屏幕截图

> New-AzureDeployment：HTTP 状态代码：BadRequest - HTTP 错误消息：部署名称无效

![在此处输入图像描述](https://i.stack.imgur.com/uK09h.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T21:05:23.573

使用该`-Label`选项指定用户友好名称（将在门户中显示的自定义名称）。

`-Name`选项供系统使用，如果未指定，则分配给 GUID。

以下是门户中这些开关的表示位置：

![部署细节](https://i.stack.imgur.com/mXYW7.png)

# visual-studio - 在 TFS 中获取最新版本无法正常工作

> ID：16070036
> 
> 赞同：2
> 
> 时间：2013-04-17T20:51:11.087
> 
> 标签：visual-studio, tfs, source-control-explorer

我正在使用 TFS 与我的合作伙伴同步我的作品。但我对此有很多问题。当我的合作伙伴向项目中添加了一些新文件并且我希望这些文件是我的本地版本时。

起初我试图通过右键单击解决方案资源管理器中的项目并选择“获取最新版本”来获取它。但是这种方法没有得到新文件。

然后我去源代码控制并选择项目中的所有文件和文件夹，然后按“获取最新版本”。下载了新文件，但似乎文件不是项目的一部分。它们只是下载，但不会出现在其他文件附近的解决方案资源管理器中。

这里有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:54:00.893

您的解决方案和项目文件是否[绑定到](http://msdn.microsoft.com/en-us/library/ms181375%28v=vs.100%29.aspx)TFS 中的源代码控制？这是我可以根据您的描述得出的结论之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T09:14:47.033

Those files may be added after mapping is done I think. Also, as @James Reed suggested, those files may not be checked-in.

If those are not the cases, I recommend a "Remove Mapping" and "Mapping" again.

Hope this helps.

# hex - RGB LED - 颜色值

> ID：16070037
> 
> 赞同：0
> 
> 时间：2013-04-17T20:51:16.353
> 
> 标签：hex, arduino, byte, rgb

我的 Arduino 板上连接了一系列 RGB LED 灯，我正在尝试更改 LED 的值，唯一的问题是我似乎在 HEX 到 RGB 转换器上找不到任何东西。

此外，RGB 值与您得到的常规值不同，例如 (255,255,255) = 白色。它们似乎采用某种类型的字节格式（0x0ff）？我一点也不熟悉。

有人能指出我如何将像 '9cb261' 这样的十六进制颜色转换为 RGB 字节值的正确方向吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T21:05:03.663

十六进制只是写入相同数字的一种速记方式，如果您关心哪些位已设置，哪些未设置，则其格式更易于阅读。

数字“255”告诉您有 2 个“100s”、5 个“10s”和 5 个“1s”。换句话说，它是 2 个“10^2”、5 个“10^1”和 5 个“10^0”。

十六进制是相同的想法，但我们使用 16 代替 10。由于每个地方可能有超过 10 个东西，我们在 0-9 之后添加字符 a - f。

使用一个简短的示例，“9c”表示“16^1”的 9 个实例加上“16^0”的 c (12) 个实例。这产生 144 + 12 或 156。

“0x”前缀只是告诉您以下字符串将被解释为十六进制字符串。

为了分解您的示例，十六进制颜色 9cb261 只有 3 个字节（9c、b2、61）。如果我们将字节转换回十进制，则为 (9*16+12, 11*16+2, 6*16+1) 或 (156, 178, 97)

在[Wikipedia 的 Hexadecimal 文章中有完整的文章。](http://en.wikipedia.org/wiki/Hexadecimal)

# android - 意图 ACTION_IMAGE_CAPTURE 杀死活动和应用程序 Android 4.1

> ID：16070038
> 
> 赞同：4
> 
> 时间：2013-04-17T20:51:21.383
> 
> 标签：android, android-camera-intent, galaxy-tab

我有一个 Galaxy Tab 2 7.0 GT-P3110，当我尝试有意访问相机时发生了一些奇怪的事情。在一项活动中，我有 20 个按钮调用访问相机的意图，但活动随机下降。有时照片正确拍摄，但有时不正确并引发以下错误：

```
04-17 17:43:15.911: E/AndroidRuntime(30159): FATAL EXCEPTION: main
04-17 17:43:15.911: E/AndroidRuntime(30159): java.lang.RuntimeException: Unable to resume activity {cl.prosys.rac/cl.prosys.rac.activity.FormularioInspeccionActivity}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=null} to activity {cl.prosys.rac/cl.prosys.rac.activity.FormularioInspeccionActivity}: java.lang.NullPointerException
04-17 17:43:15.911: E/AndroidRuntime(30159):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2613)
04-17 17:43:15.911: E/AndroidRuntime(30159):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2641)
04-17 17:43:15.911: E/AndroidRuntime(30159):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2127)
04-17 17:43:15.911: E/AndroidRuntime(30159):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3550)
04-17 17:43:15.911: E/AndroidRuntime(30159):    at android.app.ActivityThread.access$700(ActivityThread.java:140)
04-17 17:43:15.911: E/AndroidRuntime(30159):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-17 17:43:15.911: E/AndroidRuntime(30159):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-17 17:43:15.911: E/AndroidRuntime(30159):    at android.os.Looper.loop(Looper.java:137)
04-17 17:43:15.911: E/AndroidRuntime(30159):    at android.app.ActivityThread.main(ActivityThread.java:4895)
04-17 17:43:15.911: E/AndroidRuntime(30159):    at java.lang.reflect.Method.invokeNative(Native Method)
04-17 17:43:15.911: E/AndroidRuntime(30159):    at java.lang.reflect.Method.invoke(Method.java:511)
04-17 17:43:15.911: E/AndroidRuntime(30159):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)
04-17 17:43:15.911: E/AndroidRuntime(30159):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
04-17 17:43:15.911: E/AndroidRuntime(30159):    at dalvik.system.NativeStart.main(Native Method)
04-17 17:43:15.911: E/AndroidRuntime(30159): Caused by: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=null} to activity {cl.prosys.rac/cl.prosys.rac.activity.FormularioInspeccionActivity}: java.lang.NullPointerException
04-17 17:43:15.911: E/AndroidRuntime(30159):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3179)
04-17 17:43:15.911: E/AndroidRuntime(30159):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2600)
04-17 17:43:15.911: E/AndroidRuntime(30159):    ... 13 more
04-17 17:43:15.911: E/AndroidRuntime(30159): Caused by: java.lang.NullPointerException
04-17 17:43:15.911: E/AndroidRuntime(30159):    at cl.prosys.rac.activity.FormularioInspeccionActivity.onActivityResult(FormularioInspeccionActivity.java:684)
04-17 17:43:15.911: E/AndroidRuntime(30159):    at android.app.Activity.dispatchActivityResult(Activity.java:5347)
04-17 17:43:15.911: E/AndroidRuntime(30159):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3175)
04-17 17:43:15.911: E/AndroidRuntime(30159):    ... 14 more 
```

之后，Activity 重新启动。源代码是：

```
public void onTakePicture(View view){
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(new File(photoPathTemp)));
    startActivityForResult(intent, TAKE_PHOTO_CODE);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == TAKE_PHOTO_CODE && resultCode == RESULT_OK) {
        GalleryButton btn = (GalleryButton) findViewById(getResources().getIdentifier(photoKey, "id", getPackageName()));
        savePhotos(btn.width, btn.height);
        setBackgroundButton(btn, photoPathThumb);
    }
} 
```

先感谢您。

# azure - Windows Azure Web 角色证书错误

> ID：16070040
> 
> 赞同：1
> 
> 时间：2013-04-17T20:51:32.993
> 
> 标签：azure, azure-web-roles

我需要在 Azure 中使用带有真实 SSL 证书（非自签名）的 https 端点创建一个 Web 角色。所以我需要我自己的域，我已经通过我的主机 DNS 中的 CNAME 将它指向我的“me.cloudapp.net”URL。

我也为该域购买了证书。我需要将其上传到我的 Azure 门户以获取 Web 角色，但我不能 - 当我尝试时，Azure 给了我一个错误。

证书以 2 个 zip 文件的形式出现（我是购买证书的新手）。一个 zip 有 3 个 .crt 文件，另一个有 1 个 .cer 文件。Azure 需要 .cer 或 .pfx，所以我尝试了 .cer。它失败并显示错误“证书无效，或密码不正确”。

zip 文件夹中有一个 .crt 文件，其中包含 3 个与 .cer 文件同名的文件。如果我将此 .crt 文件的扩展名更改为 .cer，它将上传，但是当我尝试发布我的部署时，我收到错误

“与 HTTPS 输入端点 EndpointForThat 关联的指纹 3329398FB72BFCC7EF89C90B950D722C6047C2A1 证书不包含私钥。长期运行的操作跟踪 ID 为：010a29856c1948f39e71620446223b4e。”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T20:56:35.817

您必须首先在您发起请求的机器上完成证书请求过程。执行此操作的过程因技术堆栈而异。这是[Comodo](https://support.comodo.com/index.php?_m=knowledgebase&_a=view&parentcategoryid=95&nav=0,96,1)的一个页面，介绍如何在各种平台上安装证书。

在启动它的机器上完成请求后，您可以导出证书。该新文件是您需要上传到 Azure 的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T20:57:03.140

对于 HTTPS 端点，您需要上传 PFX 文件。

PFX 文件是私钥 + 公钥的组合。

你现在拥有的是

*   .cer - 公钥
*   .crt - 私钥

您需要将与`.crt`文件名匹配的`.cer`文件组合成一个 .pxf 文件。

检查[这个 SO question 及其答案](https://stackoverflow.com/questions/6307886/how-to-create-pfx-file-from-cer-certificate-and-private-key)以完成它。

# .net - 使用 DataContractSerializer 序列化 newtonsoft 作业的 SerializationException

> ID：16070044
> 
> 赞同：0
> 
> 时间：2013-04-17T20:51:42.410
> 
> 标签：.net, wcf, json.net, datacontractserializer, netnamedpipebinding

**更新**- 我在这里遇到的问题是用户错误。请看下面我的回答。

我有一个要添加到 WCF API 的 DataContract 的类，它应该是“绑定不可知的”；即，它应该能够支持多种绑定，包括BasicHttp 和NamedPipe。我要添加到数据协定的类使用 Newtonsoft.Json.Linq.JObject 来存储成员数据：

```
[DataContract]
public class MyFacet
{
    public MyFacet(string facetName)
    {
        Initialize();
        FacetName = facetName;
    }

    internal JObject JsonObject { get; private set; }

    [OnDeserializing]  // required for deserialization to init JsonObject
    private void OnDeserializing(StreamingContext c)
    {
        Initialize();
    }

    private void Initialize()
    {
        JsonObject = new JObject();
    }
    [DataMember]
    public string FacetName
    {
        get
        {
            return GetProperty<string>("facet");
        }
        private set
        {
            SetProperty("facet", value);
        }
    }

    public string ToJson()
    {
        return JsonObject.ToString(Newtonsoft.Json.Formatting.None);
    }

    public T GetProperty<T>(string key)
    {
        JToken value;
        if (JsonObject.TryGetValue(key, out value))
        {
            return value.Value<T>();
        }
        return default(T);
    }

    public void SetProperty(string name, object value)
    {
        SetProperty(name, new JValue(value));
    }

    internal void SetProperty(string name, JToken value)
    {
        JsonObject[name] = value;
    }
} 
```

出于各种原因，如果可能的话，我想保持这个课程不变。当我尝试使用 DataContractSerializer （在测试应用程序中）序列化此类时，出现以下错误：

```
System.Runtime.Serialization.SerializationException: 
Type 'ConsoleTest.MyFacet' with data contract name 
'MyFacet:http://schemas.datacontract.org/2004/07/ConsoleTest' is not expected.
Consider using a DataContractResolver or add any types not known statically to 
the list of known types - for example, by using the KnownTypeAttribute attribute 
or by adding them to the list of known types passed to DataContractSerializer. 
```

从本质上讲，这对我来说很有意义。但是，将各种 Newtonsoft 类型添加为 KnownTypes 不起作用——这会导致“递归收集数据契约”错误。如果我尝试实现 DataContractResolver，我想我会遇到同样的问题。

我相信我可以使用 Newtonsoft 序列化程序将 JObject 序列化为 XML。看来我有几个选择：

*   使用 IDataContractSurrogate 并提供 JObject 的反序列化代理
*   使用 IClientMessageFormatter 创建自定义序列化/反序列化
*   以其他方式配置/覆盖反序列化“系统”以使用 Newtonsoft 序列化程序代替 DataContractSerializer 或与 DataContractSerializer 一起使用。

而且，我担心必须支持各种绑定。命名管道使用二进制编码，我不确定这会如何影响这个序列化问题——也许这意味着我*必须*使用代理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:46:58.377

我认为，`KnownType` **不会**有帮助 - 因为它应该只有助于“找到”类型，而 wcf`DataContractSerializer`应该知道**如何**序列化。

它没有，因为`JObject`不包含`DataContract`和`DataMember`属性。

如果`JObject`是 xml 可序列化，我会考虑使用 xml 序列化而不是 DataContract 序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:41:50.173

原来这是 %100 用户错误。在我的序列化测试工具中，我在创建 DataContractSerializer 时传递了错误的类型。以下演示了错误：

```
Console.WriteLine("serializing...");
MyFacet facet = new MyFacet("MyFacet");
// On the following line, I was passing the wrong type to the ctor.
// Needed to pass "MyFacet" here, not "Person"
//!ERROR
DataContractSerializer serializer = new DataContractSerializer(typeof(Person));//!ERROR
var settings = new XmlWriterSettings { Indent = true };
using (var writer = XmlWriter.Create(fileName, settings))
    serializer.WriteObject(writer, facet); 
```

一旦我修复了错误，原始帖子中的类就可以序列化了。我最初收到的错误消息真的让我失望。我假设有一些关于 JObject 或 Newtonsoft 类型之一的问题导致了这个问题，而事实上，我显然没有尝试序列化任何这些类型。

# java - 使用 Scala Trait 扩展 Java 类

> ID：16070049
> 
> 赞同：7
> 
> 时间：2013-04-17T20:52:15.667
> 
> 标签：java, scala, inheritance, traits

我想将一个类定义为具有 trait`ContextItem`的 java 类的扩展。`Predicate``Confidence`

Confidence 是一个简单的 trait，它只是在其扩展的任何内容中添加一个置信度字段。

```
trait Confidence{
  def confidence:Double
} 
```

我`ContextItem`通过简单地说明来定义我的班级：

```
class ContextItem extends Predicate with Confidence{} 
```

但是试图编译这个会产生......

```
com/slug/berds/Berds.scala:11: error: overloaded method constructor Predicate with     alternatives:
  (java.lang.String,<repeated...>[java.lang.String])com.Predicate <and>
  (java.lang.String,<repeated...>[com.Symbol])com.Predicate <and>
  (java.lang.String,java.util.ArrayList[com.Symbol])com.Predicate <and>
  (com.Predicate)com.Predicate <and>
  (com.Term)com.Predicate <and>
  (java.lang.String)com.Predicate
 cannot be applied to ()
class ContextItem(pred:Predicate) extends Predicate with Confidence{
             ^ 
```

这似乎是一个微不足道的例子，所以出了什么问题？

谓词（不是我的）看起来像：

```
/** Representation of predicate logical form. */
public class Predicate extends Term implements Serializable {
    public Predicate(String n) {
        super(n);
    }
    public Predicate(Term t) {
        super(t);
    }
    public Predicate(Predicate p) {
        super((Term)p);
    }
    public Predicate(String n, ArrayList<Symbol> a) {
        super(n, a);
    }
    public Predicate(String n, Symbol... a) {
        super(n, a);
    }
    public Predicate(String n, String... a) {
        super(n, a);
    }
    @Override
    public Predicate copy() {
        return new Predicate(this);
    }
} 
```

Predicate 及其任何祖先都没有实现置信度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T21:00:00.480

我认为它列出了 的所有构造函数`Predicate`，并通知您您没有使用它们中的任何一个。默认是使用无参数构造函数，这里不存在。例如，调用`(String)`超级构造函数的语法是

```
class ContextItem extends Predicate("something") with Confidence 
```

或者

```
class ContextItem(str: String) extends Predicate(str) with Confidence 
```

另外，目前 your`def confidence`是一个抽象方法，所以在你给它一个定义之前不会编译。如果您打算让特征添加一个可写`confidence`字段，那么这就是您想要的：

```
var confidence: Double = 0.0 
```

# django - 如何在 django-cms 2.4.0 中关闭 I18N？

> ID：16070056
> 
> 赞同：2
> 
> 时间：2013-04-17T20:52:52.657
> 
> 标签：django, django-cms, django-i18n

自从升级到 django-cms 2.4.0 后，我似乎无法关闭 I18N 以从 url 中删除 /en/。

我已经设置`USE_I18N = False`并发表了评论`#'django.core.context_processors.i18n',`，并且`#'django.middleware.locale.LocaleMiddleware',`按照文档的建议并习惯于工作。但是，我在 /admin/cms/page/ 中的所有页面现在都具有“无”标题并且不再加载。如果我上交 I18N，它可以工作，但这不是一个好的解决方案。

[http://imgur.com/HeYnRiG](http://imgur.com/HeYnRiG)

任何人都知道这里发生了什么。

# ios - 在 GLSL 中获取后台缓冲区的颜色

> ID：16070061
> 
> 赞同：2
> 
> 时间：2013-04-17T20:53:18.237
> 
> 标签：ios, opengl-es, cocos2d-iphone, glsl

我正在尝试提取着色器片段背后的颜色。我四处搜索并发现了各种这样做的人的例子：

```
vec2 position = ( gl_FragCoord.xy / u_resolution.xy );
vec4 color = texture2D(u_backbuffer, v_texCoord); 
```

这是有道理的。但是，没有人展示您传入后台缓冲区制服的示例。

我试着这样做：

```
int backbuffer = glGetUniformLocation(self.shaderProgram->program_, "u_backbuffer");
GLint textureID;
glGetIntegerv(GL_FRAMEBUFFER_BINDING, &textureID);//tried both of these one at a time
glGetIntegerv(GL_RENDERBUFFER_BINDING, &textureID);//tried both of these one at a time
glUniform1i(backbuffer, textureID); 
```

但我只是变黑。这是在 cocos2d iOS 仅供参考

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:09:25.553

您可以这样做，但仅限于 iOS 6.0。Apple 添加了一个名为[GL_EXT_shader_framebuffer_fetch](http://www.khronos.org/registry/gles/extensions/EXT/EXT_shader_framebuffer_fetch.txt)的扩展，它可以让您在正在渲染的片段中读取当前帧缓冲区的内容。此扩展引入了一个名为 gl_lastFragData 的新变量，您可以在片段着色器中读取该变量。

[RayDeeA 提出的这个问题](https://stackoverflow.com/questions/13974218/gl-apple-shader-framebuffer-fetch-gl-lastfragdata)显示了一个实际的例子，尽管您需要更改扩展名的名称，因为他们在回答中指出了组合点。

这应该在所有运行 iOS 6.0 的设备上都支持，并且是实现自定义混合模式的好方法。我听说这是一项成本非常低的操作，但还没有对自己进行过多的分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:08:49.793

这是不允许的。[作为 FBO 的一部分，](http://www.opengl.org/wiki/Memory_Model#Framebuffer_objects)您不能同时从当前正在写入的图像中采样。

# javascript - 如何从 jsCalendar 中提取选定的日期值

> ID：16070064
> 
> 赞同：1
> 
> 时间：2013-04-17T20:53:24.607
> 
> 标签：javascript, jquery, datepicker, date-range

我真的很喜欢我的移动网站的这个日历插件：[https ://github.com/michaelkamphausen/jsCalendar](https://github.com/michaelkamphausen/jsCalendar)

看到在这里工作：http: [//jsfiddle.net/dQxVV/1/](http://jsfiddle.net/dQxVV/1/)

我是 JS 的新手，我很难弄清楚

1.  如何收集选定的开始和结束日期（将它们放入输入值）
2.  如何显示超过一个月。

如果您对此有任何帮助，或者您对更好的移动友好日历有任何建议，我真的很感激。

JS构建日期范围日历：

```
$(".jsCalendar").bind("startDateChanged", function () {
$(this).data("startdate");
}).bind("endDateChanged", function () {
$(this).data("enddate");
}); 
```

日历.js

```
(function() {
$(document).ready(function() {
    var $calendars = $(".jsCalendar");
    for (var i = 0, maxI = $calendars.length; i < maxI; i++) {
        var calendar = new Calendar();
        calendar.ready($calendars.eq(i));
    }
});

function Calendar() {
    var self = this,
    $calendar,
    $previous,
    $next,
    $month,
    $weekdays,
    $days,
    $rows,
    startDate,
    endDate,
    currentMonth,
    today,
    minDate,
    dateInfo,
    singleDate,
    firstDayOfWeek = 0,
    tap = 'click',
    noAnimEnd = "noAnimationEnd",

    startDateString = "startDate",
    endDateString = "endDate",

    setDate = function (type, value) {
        value && value.clearTime && value.clearTime();
        if (type == startDateString) {
            startDate = value;
        } else {
            endDate = value;
        }
        drawSelection();
        $calendar.data(type.toLowerCase(), !value ? "" : value.toString());
        $calendar.trigger(type + "Changed");
    },

    dateSelected = function (evt) {
        evt.preventDefault();
        var $this = $(this);
        if ($this.hasClass("inactive") || ($this.text().length == 0)) {
            return;
        }
        var selectedDate = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), parseInt($this.text()));
        if (singleDate) {
            setDate(startDateString, !startDate || (selectedDate.getTime() != startDate.getTime()) ? selectedDate : null);
            return;
        }
        if (!startDate) {
            if (!endDate) {
                setDate(startDateString, selectedDate);
            } else {
                if (selectedDate < endDate) {
                    setDate(startDateString, selectedDate);
                } else if (endDate < selectedDate) {
                    setDate(startDateString, endDate);
                    setDate(endDateString, selectedDate);
                } else {
                    setDate(endDateString, null);
                }
            }
        } else if (!endDate) {
            if (startDate < selectedDate) {
                setDate(endDateString, selectedDate);
            } else if (selectedDate < startDate) {
                setDate(endDateString, startDate);
                setDate(startDateString, selectedDate);
            } else {
                setDate(startDateString, null);
            }
        } else {
            if ($this.hasClass(startDateString)) {
                setDate(startDateString, null);
            } else if ($this.hasClass(endDateString)) {
                setDate(endDateString, null);
            } else {
                setDate(startDateString, null);
                setDate(endDateString, null);
            }
        }
    },

    extendDate = function () {
        /* subset from date.js, http://www.datejs.com/ */
        Date.prototype.clone=function(){return new Date(this.getTime());}
        Date.prototype.isLeapYear=function(){var y=this.getFullYear();return(((y%4===0)&&(y%100!==0))||(y%400===0));}
        Date.prototype.getDaysInMonth=function(){return [31,(this.isLeapYear(this.getFullYear())?29:28),31,30,31,30,31,31,30,31,30,31][this.getMonth()];}
        Date.prototype.moveToFirstDayOfMonth=function(){this.setDate(1);return this;}
        Date.prototype.moveToLastDayOfMonth=function(){this.setDate(this.getDaysInMonth());return this;}
        Date.prototype.addMilliseconds=function(value){this.setMilliseconds(this.getMilliseconds()+value);return this;}
        Date.prototype.addDays=function(value){return this.addMilliseconds(value*86400000);}
        Date.prototype.addMonths=function(value){var n=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+value);this.setDate(Math.min(n,this.getDaysInMonth()));return this;}
        Date.prototype.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this;}
    },

    getDay = function (day) {
        return (day + firstDayOfWeek) % 7; // changing first day of week
    },

    drawSelection = function () {
        $days.removeClass(startDateString).removeClass(endDateString).removeClass("betweenDates");
        var firstDay = currentMonth.clone().moveToFirstDayOfMonth();
        var lastDay = currentMonth.clone().moveToLastDayOfMonth();
        var dayOffset = getDay(firstDay.getDay()) - 1;

        if (!!startDate && !!endDate && (startDate < lastDay) && (endDate > firstDay)) {
            var firstBetweenDay = new Date(Math.max(firstDay, startDate.clone().addDays(1)));
            var lastBetweenDay = new Date(Math.min(lastDay, endDate.clone().addDays(-1)));
            if (firstBetweenDay <= lastBetweenDay) {
                $days.slice(dayOffset + firstBetweenDay.getDate(), dayOffset + lastBetweenDay.getDate() + 1).addClass("betweenDates");
            }
        }
        if (!!startDate && (firstDay <= startDate) && (startDate <= lastDay)) {
            $days.eq(dayOffset + startDate.getDate()).addClass(startDateString);
        }
        if (!!endDate && (firstDay <= endDate) && (endDate <= lastDay)) {
            $days.eq(dayOffset + endDate.getDate()).addClass(endDateString);
        }
    };

    self.ready = function ($element) {
        $calendar = $element;
        $previous = $('<a href="#">&lt;</a>');
        $next = $('<a href="#">&gt;</a>');
        $month = $('<li class="calMonth"></li>');
        $calendar.append($('<ul class="calButtonBar"></ul>')
            .append($('<li class="calPrevious"></li>').append($previous))
            .append($month)
            .append($('<li class="calNext"></li>').append($next))
        );
        for (var i = 0, th = "", td = ""; i < 7; i++) {
          th += '<th></th>';
          td += '<td><a href="#"></a></td>';
        }
        for (var i = 0, tr = ""; i < 6; i++) {
          tr += '<tr>' + td + '</tr>';
        }
        $calendar.append('<div class="calGrid"><table><tr>' + th + '</tr>' + tr + '</table></div>');
        $weekdays = $calendar.find("th");
        $days = $calendar.find("td a");
        $rows = $calendar.find("tr");
        $rows.eq(1).addClass("first");

        singleDate = $calendar.hasClass("jsSingleDate");
        firstDayOfWeek = $calendar.data("firstdayofweek") || firstDayOfWeek;

        $calendar.get(0).calendar = self;
        if ($.fn) {
            $.fn.slice = $.fn.slice || function (start, end) {
                return $([].slice.call(this, start, end));
            }
            $.fn.calendar = function() {
                return this.get(0).calendar;
            }
        }

        extendDate();
        today = (new Date()).clearTime();
        minDate = today;
        startDate = $calendar.data("startdate");
        startDate = startDate ? new Date(startDate).clearTime() : null;
        endDate = $calendar.data("enddate");
        endDate = endDate ? new Date(endDate).clearTime() : null;
        currentMonth = (startDate || today).clone();

        dateInfo = $calendar.data("localized_date");
        if (typeof dateInfo == "string") {
            dateInfo = JSON.parse(dateInfo);
        }

        var $monthGrid = $calendar.find(".calGrid");
        var animationQueue = [];
        var isAnimating = function(node) {
            if ($monthGrid.children().length > 1) {
                animationQueue.push(node);
                return true;
            }
            return false;
        }
        var nextAnimation = function() {
            if (animationQueue.length > 0) {
                setTimeout(function() {
                  animationQueue.shift().trigger(tap);
                }, 0);
            }
        }
        $previous.bind(tap, function (evt) {
            evt.preventDefault();
            if (isAnimating($previous)) return;
            currentMonth = currentMonth.addMonths(-1);
            var $page = $('<table>' + $calendar.find("table").html() + '</table>');
            $monthGrid.append($page);
            $days.closest("table").addClass("turndown").bind(animEnd, function (evt) {
                $(this).removeClass("turndown").unbind(animEnd);
                $page.remove();
                nextAnimation();
            }).trigger(noAnimEnd);
            self.showMonth(currentMonth);
        });
        $next.bind(tap, function (evt) {
            evt.preventDefault();
            if (isAnimating($next)) return;
            currentMonth = currentMonth.addMonths(+1);
            var $page = $('<table class="turnup">' + $calendar.find("table").html() + '</table>');
            $monthGrid.append($page);
            $page.bind(animEnd, function (evt) {
                $page.remove();
                nextAnimation();
            }).trigger(noAnimEnd);
            self.showMonth(currentMonth);
        });

        $calendar.bind("resetDates", function (evt) {
            setDate(startDateString, null);
            setDate(endDateString, null);
        });

        $days.bind(tap, dateSelected);

        self.showMonth(currentMonth);
    }

    self.setDates = function(start, end) {
        setDate(startDateString, start && end ? new Date(Math.min(start, end)) : start);
        !singleDate && setDate(endDateString, start && end ? 
            (start.getTime() != end.getTime() ? new Date(Math.max(start, end)) : null) : end);
    }

    self.showMonth = function (date) {
        minDate = new Date(Math.max(minDate, today));

        if (!!dateInfo) {
            $month.text(dateInfo.months.names["long"][date.getMonth()] + " " + date.getFullYear());
            for (var i = 0, maxI = $weekdays.length; i < maxI; i++) {
                $weekdays.eq(getDay(i)).text(dateInfo.days.names.min[i]);
            }
        }

        var beforeMinDate = minDate > date.clone().moveToLastDayOfMonth();
        var includesToday = !beforeMinDate && (minDate >= date.clone().moveToFirstDayOfMonth());
        var minDay = minDate.getDate();

        $days.addClass("noTransition").removeClass("inactive");
        $rows.removeClass("last").removeClass("hidden");
        for (var firstDay = getDay(date.clone().moveToFirstDayOfMonth().getDay()) - 1, lastDay = firstDay + date.clone().moveToLastDayOfMonth().getDate(), i = 0, maxI = $days.length; i < maxI; i++) {
            var isDay = (i > firstDay) && (i <= lastDay);
            var $day = $days.eq(i).text(isDay ? ("" + (i - firstDay)) : "");
            if (isDay && (beforeMinDate || (includesToday && (i - firstDay < minDay)))) {
                $day.addClass("inactive");
            }
            if (includesToday && today.getDate() == (i - firstDay)) {
                $day.addClass("today");
            }
            if (i == lastDay) {
                $day.closest("tr").addClass("last").next().addClass("hidden").next().addClass("hidden");
            }
        }
        setTimeout(function() {
            $days.removeClass("noTransition");
        }, 0);
        drawSelection();
    }
}
})() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:13:20.257

您发布的代码将任何带有 a`class`的div`jsCalendar`转换为 jsCalendar。

您将要为要`id`访问日期的任何 jsCalendar 对象分配一个人。

您应该能够通过调用 jsCalendar 对象上的数据函数来查看用户选择了哪两个日期。例如，如果你有一个 id 为的 jsCalendar `jsCalendar1`：

```
var startDate = $("#jsCalendar1").data("startdate");
var endDate = $("#jsCalendar1").data("enddate");
alert("Calendar 1 has a start date of " + startDate + " and an end date of " + endDate + "."); 
```

确保将此代码放在适当的位置，例如在用户选择开始和结束日期之后才调用的函数中。

这是一个[工作的jsFiddle。](http://jsfiddle.net/Wp7FS/)

# java - 重新创建 ServerSocket 后，我 的 GUI 冻结

> ID：16070068
> 
> 赞同：1
> 
> 时间：2013-04-17T20:53:41.150
> 
> 标签：java, multithreading, port, serversocket

我的服务器是围绕支持更新侦听套接字而构建的，这样做我使用以下方法。我的问题发生在第二次调用此方法后，首先在 main 方法启动时调用它，然后通过单击 JFrame 中的按钮调用它。发生的情况是，当通过按钮调用此方法时 JFrame 冻结，正如您从代码中看到的那样，我试图使此方法在新线程中运行服务器，但它并没有改变我的结果。有谁知道如何解决这一问题？或者至少是什么原因造成的？在 main 中调用该方法之后的任何代码也不会执行，所以我相信这是一个线程问题。（MiniServer 扩展了 Thread 并用于单独处理每个连接的客户端）

```
public static void startListening(final int port)
{
    listeningThread = new Thread() 
    { 
        public void run()
        {               
            try {
                serverSocket = new ServerSocket(port);

                while(!stop)
                {
                    boolean loop = true;
                    while (loop)
                    {
                        serverSocket.setSoTimeout(1000);

                        try{
                            clientSocket = serverSocket.accept();
                            loop = false;
                        } catch (SocketTimeoutException e){
                        }
                    }
                    if(!clientSocket.equals(null))
                    {
                        MiniServer mini = new MiniServer(clientSocket);
                        mini.start();
                        clientSocket = null;
                    }
                }
            } catch (IOException e) {
            }
        } 
    };
    listeningThread.run();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T20:58:45.560

您需要调用`listeningThread.start()`，这将创建一个新线程。现在，您只是在*当前*`run()`线程上调用线程的方法。第一次这样做时它会起作用，因为你在主线程上。但是，第二次，您在 UI 线程上，对按钮按下作出反应。这会导致您的 UI 线程阻塞。

# java - 在 Java 中调用方法与在 Objective-C 中向对象发送消息相同吗？

> ID：16070069
> 
> 赞同：1
> 
> 时间：2013-04-17T20:53:42.763
> 
> 标签：java, objective-c, binding, methods, messages

Java 调用方法的语法如下：

```
object.methodName(...) 
```

在 Objective-C 中，向对象发送消息的语法如下：

```
[object methodName:...] 
```

更好的是，假设您有一个 Java 接口（比如 Aj）和一个实现该接口的对象（比如 Bj）。假设在 Objective-C 中也有一个协议（比如 Ac）和一个实现该协议的类（比如 Bc）。

**爪哇：**

```
Aj object = new Bj();
Aj.method(); 
```

**目标-C：**

```
Ac* object = [[Bc alloc] init];
[Ac method]; 
```

显然它是不同的。但我认为：在这两种情况下，方法与正确对象的绑定都是动态完成的，然后我认为 Java 也使用消息并在运行时选择正确的方法。这是对的吗？

我可以肯定 Java 也使用“消息”机制来调用对象的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:09:16.413

一个重要的区别是 Objective-C 允许你将消息传递给`nil`. 如果您尝试`null`在 Java 中调用方法，它将无法编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:05:06.880

根据这篇文章，看起来 Java VM 具有与 Obj-C 类似的“消息”机制：http: [//www.informit.com/articles/article.aspx? p=1571983](http://www.informit.com/articles/article.aspx?p=1571983)

只是轻而易举地通过它，可能是错误的。

# java - 为什么 List.remove(int) 会抛出 java.lang.UnsupportedOperationException？

> ID：16070070
> 
> 赞同：30
> 
> 时间：2013-04-17T20:53:43.097
> 
> 标签：java

我正在尝试从 a`List`和 getting中删除元素`java.lang.UnsupportedOperationException`。

```
 public <T extends Object> void findDuplicates(
        String title, Multimap<T, ChunkId> map) {
        for (T key : map.keySet()) {
            Collection<ChunkId> ids = map.get(key);
            List<ChunkId> idList = (Arrays.asList(ids.toArray(new ChunkId[0])));
            removeUsedIds(idList);
            Collections.sort(idList);
//...
        }
    }

    private void removeUsedIds(List<ChunkId> idList) {
        // decrement counter to avoid indexing changed parts of list
        for (int i = idList.size() - 1; i >= 0; i--) {
            if (usedIdSet.contains(idList.get(i))) {
                idList.remove(i);   // **** Exception thrown here
            }
        }
    } 
```

我得到

```
Exception in thread "main" java.lang.UnsupportedOperationException
    at java.util.AbstractList.remove(Unknown Source)
    at org.xmlcml.svg2xml.analyzer.PDFIndex.removeUsedIds(PDFIndex.java:104)
    at org.xmlcml.svg2xml.analyzer.PDFIndex.findDuplicates(PDFIndex.java:87)
    at org.xmlcml.svg2xml.analyzer.PDFIndex.findDuplicatesInIndexes(PDFIndex.java:129)
    at org.xmlcml.svg2xml.analyzer.PDFAnalyzer.analyzePDF(PDFAnalyzer.java:188)
    at org.xmlcml.svg2xml.analyzer.PDFAnalyzer.analyzePDFFile(PDFAnalyzer.java:115)
    at org.xmlcml.svg2xml.analyzer.PDFAnalyzer.main(PDFAnalyzer.java:398) 
```

注意：这被标记[为由 Arrays.asList() 创建的 List 上的 remove() 的副本 throws UnsupportedOperationException](https://stackoverflow.com/questions/7885573/remove-on-list-created-by-arrays-aslist-throws-unsupportedexception)但它有很大不同。那个发帖人*知道*问题出在哪里，想要一个解释；我*不知道问题是什么*，也无法通过发布当前问题在 SO 上找到它。Java 6 文档（[http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)）没有给出问题的提示（它的签名 throws `IndexOutOfBoundsException`）。上一个问题也使用`removeAll()`了，而这个问题提到的`remove(int)`词法搜索不太精确。

因此，我问了 SO 并得到了快速而有用的答案。因为我准确地表述了标题（与上一个问题不同），所以其他人应该很容易找到这个答案。在不到一天的时间里，它已经获得了几乎与一年中上一个问题一样多的投票（以及 100 多个视图），这表明它将更加有用。由于这个问题现在与前一个问题相关联，我认为它在不污染 SO 的情况下增加了一般用途。（当前的答案很简短，不会不必要地重复信息。）

我已编辑问题以删除无关代码。如果在我遇到问题时这个问题已经可用，它会为我节省一个小时！

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-17T20:56:52.413

您在由返回的实现上使用它，该`List`实现`Arrays.asList()`返回一个固定长度的集合，因此`remove`不支持 a。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-04-17T20:58:28.500

[`Arrays#asList`](https://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#asList-T...-)创建一个*不可修改的列表*：

> 返回由指定数组支持的固定大小的列表。

试着做：

```
List<ChunkId> idList = new ArrayList(Arrays.asList(ids.toArray(new ChunkId[0]))); 
```

代替：

```
List<ChunkId> idList = (Arrays.asList(ids.toArray(new ChunkId[0]))); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-04-17T20:58:07.533

这是因为`Arrays.asList()`在数组上创建了包装器列表。正是因为数组的长度不能改变，所以这个列表的长度也不能改变。

如果要创建填充数组元素的“真实”列表，请执行以下操作：

`new ArrayList<ChunkId>(Arrays.asList(array))`

# plone - Google Visualization and Plone - “e[0].K is undefined”错误信息

> ID：16070073
> 
> 赞同：0
> 
> 时间：2013-04-17T20:53:54.223
> 
> 标签：plone, google-visualization

我刚刚在[Google Visualization group](https://groups.google.com/forum/?fromgroups=#!topic/google-visualization-api/epKbvkRi9qs)中发布了这个，但我想我也会向 Plone 社区寻求帮助。

我正在使用 Plone 4.2.4 并希望通过 cx_Oracle 将 Google Charts 与 Oracle 后端集成。已经有一个非常好的包，叫做[EEA.Daviz](https://github.com/collective/eea.daviz)。然而，这远远超出了我的需要，我认为我可以自己完成，所以我创建了一些页面模板和包装 Javascript 的 Python 代码。在我的笔记本电脑（Mac OS X）上一切正常。

但是，一旦我将它推送到我的服务器 (SLES 10)，BarCharts 就停止了工作。我只测试了条形图、折线图和动态图。我得到的只是一个红色错误框，上面写着“e[0].K 未定义”。谷歌搜索后，我发现我的问题有[一个非常相似的描述](http://www.sebdangerfield.me.uk/2010/08/b0-is-undefined-error-when-using-googles-visualization-api/)，表明这是一个谷歌可视化错误，解决方法是更改​​宽度和高度属性。但是，更改高度或宽度并没有解决它。非常奇怪的是，如果我从 BarChart 页面复制示例 JS 并将其复制到 vanilla Zope 页面模板中，它就可以正常工作。但是，一旦我将它包装在主模板中，我就会再次收到红色错误消息。

所以我很困惑。我的笔记本电脑上安装了相同的主题，它没有给我任何问题。我知道我可以在服务器上显示条形图，而无需在香草页面模板中使用主题。

谁能指出我正确的方向？

有效的 ZPT：

```
<html>
<head>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script>
google.load("visualization", "1", {packages:["corechart"]});
                                google.setOnLoadCallback(drawChart);
                                function drawChart() {
var data = google.visualization.arrayToDataTable([
['COUNTRY', ' COUNT'],
['Austria', 19],
['Belgium', 73],
['Bulgaria', 20]]
                  ); var options = {
                     title: 'Test Bar Chart'}; var chart = new  google.visualization.BarChart(document.getElementById('chart_div'));
                  chart.draw(data, options);}
</script>
</head>

  <body>
    <div id="chart_div" style="width: 900px; height: 1000px;"></div>
</body>
</html> 
```

不工作的 ZPT：

```
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
          xmlns:tal="http://xml.zope.org/namespaces/tal"
          xmlns:metal="http://xml.zope.org/namespaces/metal"
          xmlns:i18n="http://xml.zope.org/namespaces/i18n"
          lang="en"
          metal:use-macro="context/main_template/macros/master"
          i18n:domain="plone">

    <metal:main fill-slot="javascript_head_slot">
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script>
    google.load("visualization", "1", {packages:["corechart"]});
                                    google.setOnLoadCallback(drawChart);
                                    function drawChart() {
    var data = google.visualization.arrayToDataTable([
    ['COUNTRY', ' COUNT'],
    ['Austria', 19],
    ['Belgium', 73],
    ['Bulgaria', 20]]
                      ); var options = {
                         title: 'Test Bar Chart'}; var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
                      chart.draw(data, options);}
    </script>
    </metal:main>

  <body>
<metal:main fill-slot="main">
<tal:main-macro metal:define-macro="main">

    <div id="chart_div" style="width: 900px; height: 1000px;"></div>

</tal:main-macro>
</metal:main>   
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:15:11.943

我已经测试了您的第二个示例，它似乎按预期工作，因此您来自 Oracle 的数据可能有问题（格式、缺失值等）。您必须在那里进行一些 JS 调试。尝试添加断点以查看**e[0]**是什么以及为什么它没有**K**属性（或者为什么**e**是一个空数组）。

此外，[EEA Daviz](http://eea.github.io/docs/eea.daviz/)是一个集合了多个可视化框架（[Google Charts](http://code.google.com/apis/chart)、[Simile Exhibit](http://www.simile-widgets.org/exhibit3/)和不久的将来的[Highcharts](http://www.highcharts.com/)）的捆绑包，但您始终可以使用它的一个或多个组件而无需引入整个*平面*因此，您还应该尝试[EEA谷歌图表](https://pypi.python.org/pypi/eea.googlecharts)。不要忘记，对于 Plone 4.2.x ，您需要[collective.js.jqueryui](https://pypi.python.org/pypi/collective.js.jqueryui) **< 1.9**

![克隆测试](https://i.stack.imgur.com/iygJJ.png)

# python - 使用 Imagekit、PIL 或 Pillow 更改饱和度？

> ID：16070078
> 
> 赞同：11
> 
> 时间：2013-04-17T20:54:08.480
> 
> 标签：python, image, python-imaging-library, imagekit, django-imagekit

如何使用 PIL 或 Pillow 更改图像的饱和度？最好我希望能够将该解决方案与 django-imagekit 包一起使用。我需要更改饱和度的原因是创建一种效果，当用户将黑白图像悬停时，它会变成彩色。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-17T21:10:46.117

你可能想要[`ImageEnhance.Color`](http://www.pythonware.com/library/pil/handbook/imageenhance.htm).

```
img = PIL.Image.open('bus.png')
converter = PIL.ImageEnhance.Color(img)
img2 = converter.enhance(0.5) 
```

这给出了具有原始“颜色”一半的图像。这与饱和度的一半并不完全相同（因为饱和度的一半或两倍通常会下溢或溢出），但这可能是您大部分时间真正*想要的。*正如文档所说，它就像电视上的“颜色”旋钮一样工作。

这是 0.5、1.0 和 2.0 颜色的同一图像的示例： ![在此处输入图像描述](https://i.stack.imgur.com/0T6r4.png) ![在此处输入图像描述](https://i.stack.imgur.com/q1FNT.png) ![在此处输入图像描述](https://i.stack.imgur.com/ezBX0.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T21:05:22.740

如果您想要灰度图像，只需将其转换为`L`（亮度）模式：

```
greyscale = rgba_image.convert('L') 
```

将其应用于我的忍者：

![可爱的忍者](https://i.stack.imgur.com/MgLHU.png) ![灰度可爱忍者](https://i.stack.imgur.com/QgmKK.png)

如果需要中间步骤，则需要将 RGB 值转换为 HLS 或 HSV，调整饱和度，然后再将其转换回 RGB。您可以为此使用[colorsys](http://effbot.org/librarybook/colorsys.htm)，或调整[此`numpy`解决方案](https://stackoverflow.com/questions/4890373/detecting-thresholds-in-hsv-color-space-from-rgb-using-python-pil/4890878#4890878)；我希望后者表现更好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-28T18:08:33.140

如果您使用的是 django-imagekit，则可以只使用捆绑的`Adjust`处理器：

```
from imagekit.processors import Adjust
Adjust(color=0.5) 
```

在幕后，这将完全符合[@abarnert 的](https://stackoverflow.com/users/908494/abarnert) [建议](https://stackoverflow.com/questions/16070078/change-saturation-with-pil-or-pillow#answer-16070333)。

# javascript - Javascript 中的函数 (F1)

> ID：16070081
> 
> 赞同：1
> 
> 时间：2013-04-17T20:54:24.960
> 
> 标签：javascript, html

我正在尝试编写一个程序，允许用户输入任何单词，然后按下按钮来获得结果。

结果是**"你好"**。

谁能帮我弄清楚为什么我渲染它时结果没有出现？

```
 <head>
      <meta charset = "utf-8">
      <script>
          function start() { 
              var button = document.getElementById("add" );
              button.addEventListener( "click", t, false );
          }

          function t() {  
             r.innerHTML = "Hello";
             window.addEventListener( "load", start, false );
          }         
      </script>     
   </head> 
```

如果您知道我的代码有什么问题，请提供帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T20:56:39.753

这是你的全部代码吗？我没有看到对 start() 的调用

您当前嵌入的调用`F1`需要从函数中移出到主代码中，以便在加载页面时运行：

```
window.addEventListener( "load", start, false );

function start()
... 
```

演示：http: [//jsfiddle.net/uU2K7/](http://jsfiddle.net/uU2K7/)

# c# - 在 office word 文档中查找单词

> ID：16070085
> 
> 赞同：2
> 
> 时间：2013-04-17T20:54:33.100
> 
> 标签：c#, ms-word, find, docx, doc

我正在开发一个程序，该程序会根据在文件中找到的某些文本将文件分类到组中。大多数文件可能是 .doc 或 .docx。

我的程序应该能够将单词列表与文件中的单词进行比较。我是 C# 的新手，我只学习自己的编程，整个“读取 .doc 文件”的事情都超出了我的想象，所以任何帮助都将不胜感激！

到目前为止，我的代码中与办公室有关的部分是：

代码

```
if (Path.GetExtension(listBox1.SelectedItem.ToString()) == ".doc" ||
    Path.GetExtension(listBox1.SelectedItem.ToString()) == ".docx")
{
    Microsoft.Office.Interop.Word.Document doc = 
        new Microsoft.Office.Interop.Word.Document(listBox1.SelectedItem.ToString());
    doc.Activate();
} 
```

编辑：

对不起，如果问题不够清楚。我的问题是：

如果文档包含文本文件中包含的任何特定单词，我如何查找。我已经阅读了许多其他问题、答案和教程，可能只有我一个人，但我完全不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:58:12.630

以下是从 .docx 文件中读取文本的介绍：http: [//www.codeproject.com/Articles/20529/Using-DocxToText-to-Extract-Text-from-DOCX-Files](http://www.codeproject.com/Articles/20529/Using-DocxToText-to-Extract-Text-from-DOCX-Files)

您可以将 .doc 文件转换为 .docx 文件，并对两者使用相同的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-04T20:36:07.140

您似乎正在使用 Microsoft 的互操作类，因此您可以使用 Outlook.Interop.Find

[MSDN 描述和如何](https://msdn.microsoft.com/en-us/library/f1f367bx.aspx)

如果文档包含该单词，execute 方法将返回 true。

```
 StringBuilder sb = new StringBuilder();

        Word.Range rng = rodape.Range;
        Word.Find find = rng.Find;

        find.ClearFormatting();
        find.Replacement.ClearFormatting();//Only required if you will replace the text
        if (find.Execute("textToBeFound", false))
        {
            //The document contains the word

        } 
```

另一个例子，来自微软：

```
private void SelectionFind() { 

object findText = "find me";

Application.Selection.Find.ClearFormatting();

if (Application.Selection.Find.Execute(ref findText,
    ref missing, ref missing, ref missing, ref missing, ref missing, ref missing,
    ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, 
    ref missing, ref missing)) 
{ 
    MessageBox.Show("Text found.");
} 
else
{ 
    MessageBox.Show("The text could not be located.");
} } 
```

但是你有很多其他方法可以做到这一点..

# javascript - html & javascript 制作图形计数器

> ID：16070092
> 
> 赞同：0
> 
> 时间：2013-04-17T20:55:24.270
> 
> 标签：javascript, html, dom

我想打勾某些事件的天数，并标记他们的“连续”-我想将它们表示为桌子上的正方形或圆形

例如“晴天”与“阴天”

每个 COLUMN 都会计算一个事件的发生，事件的变化会移动到下一个 COLUMN。序列将逐行向上（或向下）进行。

示例 - 表格 5 行 x 10 列（S = 晴天，C = 阴天） 仅使用 javascript - 使用两个按钮“s”和“c”我将如何告诉 dom 下一个标记哪个单元格。

开始表格空白 - 单击“s”，s 进入第一个单元格，单击“s”，s 进入第一列第二行，单击“c”（因为它是上次运行天数的变化）ac 进入第二列第一行...所以简而言之，如果当前点击与最后一次相同，则前进一行，如果不同，则前进一列...在这方面，它不应该只是2，我可以有 3 或 4 种“类型”的事件（如雨或雪）。

我可以把它全部放在一个数组中吗：[s,s,s,s,c,c,s,s,s,s,c,s,c,s,c,c,c,c]

将每个事件添加到数组中，然后循环数组，当 current!=last ???

但是我如何引用“正确”的表格单元格？？？？？？

```
<table border="1" width="460" align="center">
    <tr>
        <td>S</td>
        <td>S</td>
        <td>S</td>
        <td>S</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>C</td>
        <td>C</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>S</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>C</td>
        <td>C</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>S</td>
        <td>S</td>
        <td>S</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:25:25.753

## 碎片

这里的关键是跟踪

1.  当前对象
2.  过去的对象
3.  当前单元格

每个对应一个变量。在循环时，根据需要增加这些变量。
例如，如果当前对象与过去对象不同（断线），则必须将过去对象更改为当前对象，然后继续：

```
if (current !== past) {
    past = current;
} 
```

所以这是一个开始。

现在，您必须跟踪当前单元格。让我们使用一个 JS 对象来定义行和列。由于我们从第 1 行第 1 列开始，我们将默认设置为：

```
var cell = {
    "row": 1,
    "col": 1
} 
```

现在，您必须根据条纹增加行和列。如果连胜延长，那么你必须增加行。如果连胜被破坏，您必须增加列**并将行设置回 1**：

```
if (current !== past) {
    past = current;

    // Increment the column and reset the row
    cell.col++;
    cell.row = 1;
} else {
    // Increment row
    cell.row++;
} 
```

现在，我们必须将对象放入正确的单元格中。我们将使用 jQuery 的类 CSS 选择器来执行此操作。特别是，`:nth-child(...)`选择器在这里很有用。
此选择器仅选择父项中的第 n 个编号的子项。例如，`td:nth-child(2)`将选择`td`其父级的第二个内部。

实现这一点相当容易，因为我们已经有了`cell`对象：

```
$('table tr:nth-child(' + cell.row + ') td:nth-child(' + cell.col + ')').html(current); 
```

`.text(current)`在这里也可以使用，但它只接受纯文本。

## 把它们放在一起

我们将`array`用作天气事件数组的定义：

```
var array = [s, s, s, s, c, c, s, s, s, s, c, s, c, s, c, c, c, c]; 
```

当然，我们使用`for`循环来遍历数组：

```
var s = "s",
    c = "c",
    array = [s, s, s, s, c, c, s, s, s, s, c, s, c, s, c, c, c, c],
    cell = {
        "row": 1,
        "col": 1
    };

for (var i = 0; i < array.length; i++) {

    var current = array[i],
        past;

    // Catch the initial state
    if (i === 0) {
        past = current;
        $('table tr:nth-child(' + cell.row + ') td:nth-child(' + cell.col + ')').html(current);
    } else {
        past = array[i - 1];
        if (current !== past) {
            past = current;
            // Increment the column and reset the row
            cell.col++;
            cell.row = 1;
        } else {
            // Increment row
            cell.row++;
        }

        $('table tr:nth-child(' + cell.row + ') td:nth-child(' + cell.col + ')').html(current);
    }

} 
```

* * *

**JSFiddle**：http:
[//jsfiddle.net/kTsEx/3/](http://jsfiddle.net/kTsEx/3/)

# datetime - 如何使用 jodatime 库在日期字段中设置时区

> ID：16070094
> 
> 赞同：0
> 
> 时间：2013-04-17T20:55:27.167
> 
> 标签：datetime, java-7, jodatime

我正在使用 JodaTime2 库创建具有给定时区的日期对象，如下所示：

```
import org.joda.time.DateTime;
import org.joda.time.DateTimeZone;

DateTimeZone tz = DateTimeZone.forID("America/New_York");
System.out.println("timezone=" + tz);
Date d = new DateTime(2013, 1, 1, 0, 0, tz).toDate();
System.out.println("Cur Date = " + d); 
```

但是，当我打印此日期时，报告的时区是 CST。我错过了什么？

```
timezone=America/New_York
Cur Date = Tue Jan 01 13:00:00 CST 2013 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:58:33.897

您正在打印出一个`Date`对象的值。`Date`没有*时*区 -`Date.toString()`始终只使用“默认”时区。A`Date`只是自 Unix 纪元以来的毫秒数*；*它不知道日历或时区。

您应该只停留在 Joda Time 世界中，或者（如果必须）使用 a`SimpleDateFormatter`将 a 转换`Date`为 a `String`- 您可以在格式化程序上设置时区。

# javascript - 使用 RegExp 和 jQuery 在 dom-element 值中查找和解析 url

> ID：16070097
> 
> 赞同：-6
> 
> 时间：2013-04-17T20:55:41.153
> 
> 标签：javascript, jquery, regex

这是我的html代码的一部分：

```
<span id="ctl08"><object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,29,0" height="50" width="150">
              <param name="movie" value="/Flash/Dg_Inverse.swf?secEncCode=9e2ec595c926065318629a6dfea6b2ed">
              <param name="quality" value="high"> 
```

我需要在我的代码中找到这样的元素：

```
<param name="movie" value="/Flash/Dg_Inverse.swf?secEncCode=9e2ec595c926065318629a6dfea6b2ed"> 
```

我也想知道如何仅`9e2ec595c926065318629a6dfea6b2ed`作为变量获取？

**那么如何使用 jQuery 和 RegExp 找到元素的值呢？** 到目前为止我没有尝试任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:07:52.653

尝试：

```
var value = $("param[name='movie']").val();//get attribyte value
if(value && (value = value.match(/secEncCode=(\w+)/))){//reg exp
  value = value[1];//get first pocket
  console.log(value);//res
} 
```

[http://jsfiddle.net/xbQxw/](http://jsfiddle.net/xbQxw/)

**通过评论更新**

如果要更改 secEncCode 值：

```
var param = $("param[name='movie']"),//get obj
    value=param.val(),//get attribyte value
    key; 
 if(value && (key = value.match(/secEncCode=(\w+)/))){//reg exp
     key = key[1];//get first pocket
     param.val(value.replace(key, "YOUR NEW KEY"));//replace key
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:07:57.637

如果你想从值中提取结束部分

首先选择元素

```
$('param[name=movie]') 
```

然后你可以使用 split 或 regex 或任何你想要的。这是一个拆分示例

```
var yourvariable = $('param[name=movie]').val().split('=')[1]; 
```

[http://jsfiddle.net/XbBbC/](http://jsfiddle.net/XbBbC/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T21:03:05.240

使用 jQuery [attribute-ends-with 选择器](http://api.jquery.com/attribute-ends-with-selector/)：

```
var strmatch = "secEncCode=9e2ec595c926065318629a6dfea6b2ed";
$element = $('[value$='+strmatch+']'); // a jQuery object, not a DOM element 
```

# methods - 如何在另一个类中调用实例方法

> ID：16070098
> 
> 赞同：0
> 
> 时间：2013-04-17T20:55:46.657
> 
> 标签：methods, instance

```
public class circle
{

    double circle1;

    double Xvalue;

    double Yvalue;

    double radius;

    public double area = (3.14*(this.radius * this.radius));

    public double getArea ()
    {
        return area;

    }

} 
```

//这是我将创建对象的第二个类

```
public class tester
{
   public static void main(String args [])

   {

        circle circle1 = new circle();

        circle1.Xvalue = 1;

        circle1.Yvalue = 2;

        circle1.radius = 4;

        System.out.println(getArea());

        //im not too sure why the print statement won't print the method getArea. 

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:03:23.790

您需要`System.out.println(circle1.getArea());`，否则它会尝试在您的 Tester 类中找到一个名为 getArea() 的方法，该方法没有此类方法。

此外，您的代码将始终返回 0 的区域。这是因为您初始化数据的方式：

当您创建新的圆形对象时，它会创建 xValue，并且因为它是一个原始类型（双精度而不是双精度），它默认给它一个值 0（因为它必须有一些值）。

因此，当它到达您在那个时刻定义区域变量的位置时（因为它仍在创建您的对象，它确实是 (area = 3.14*(0.0 * 0.0))，它将为 0。

你真正想要的是更像这样的东西：

```
public class Circle {

    double Xvalue;

    double Yvalue;

    double radius;

    public Circle(double xValue, double yValue, double radius) {
        this.xValue = xValue;
        this.yValue = yValue;
        this.radius = radius;
    }

    public double getArea ()
    {
        return 3.1415926*(this.radius * this.radius);
    }
}

public class Tester
{
   public static void main(String[] args)

   {

        Circle circle1 = new Circle(1, 2, 4);

        System.out.println(circle1.getArea());

        //im not too sure why the print statement won't print the method getArea. 

    }
} 
```

# sql-server - 列前缀“%s”与查询中使用的表名或别名不匹配

> ID：16070117
> 
> 赞同：6
> 
> 时间：2013-04-17T20:57:08.970
> 
> 标签：sql-server, sql-server-2008-r2, sql-server-2000, correlated-subquery

我正在尝试对远程 2000 服务器运行查询；但是*本地*服务器正在生成的查询不正确，导致*远程*服务器返回错误：

> 列前缀“Tbl1002”与查询中使用的表名或别名不匹配。

当你跟踪*远程*服务器时，你可以看到该`sp_cursorprepexec`批处理实际上是无效的 SQL；它引用了一个`Tbl1002`不存在的派生表。

我在本地服务器上运行的查询是：

```
SELECT
    P.Code, P.Name AS PositionName, P.CompCommitteeMember,
    (    SELECT COUNT(*) 
         FROM Employees E 
         WHERE E.PositionID = P.PositionID
    ) AS EmployeeCount
FROM Positions P
WHERE P.PositionID = '{D1B0912D-B1A5-11D4-BBDD-0004ACC5B8A7}' 
```

Where`Employees`和`Positions`are 视图只是从链接服务器中选择的。为了消除这种混淆，我们将消除视图 - 并直接使用四部分命名：

```
SELECT
    P.Code, P.Name AS PositionName, P.CompCommitteeMember,
    (    SELECT COUNT(*) 
         FROM WCLHR.CasinoHR.dbo.Employees E 
         WHERE E.PositionID = P.PositionID
    ) AS EmployeeCount
FROM WCLHR.CasinoHR.dbo.Positions P
WHERE P.PositionID = '{D1B0912D-B1A5-11D4-BBDD-0004ACC5B8A7}' 
```

查询仍然失败：

> 列前缀“Tbl1002”与查询中使用的表名或别名不匹配。

为了消除对子句中 guid 的任何混淆`WHERE`，我们将删除该`WHERE`子句：

```
SELECT
    P.Code, P.Name AS PositionName, P.CompCommitteeMember,
    (    SELECT COUNT(*) 
         FROM WCLHR.CasinoHR.dbo.Employees E 
         WHERE E.PositionID = P.PositionID
    ) AS EmployeeCount
FROM WCLHR.CasinoHR.dbo.Positions P 
```

它仍然失败：

> 列前缀“Tbl1002”与查询中使用的表名或别名不匹配。

为了消除对`*`in使用的任何混淆`COUNT`，我们将消除它，而只计算一个常量：

```
SELECT
    P.Code, P.Name AS PositionName, P.CompCommitteeMember,
    (    SELECT COUNT(1) 
         FROM WCLHR.CasinoHR.dbo.Employees E 
         WHERE E.PositionID = P.PositionID
    ) AS EmployeeCount
FROM WCLHR.CasinoHR.dbo.Positions P 
```

它仍然失败：

> 列前缀“Tbl1002”与查询中使用的表名或别名不匹配。

再往下，我们甚至会消除链接服务器，并在 2000 机器上本地运行查询。

# 如果您在远程服务器本身上运行它会怎样？

如果我对远程服务器本身运行此查询：

```
SELECT
    P.Code, P.Name AS PositionName, P.CompCommitteeMember,
    (    SELECT COUNT(*) 
         FROM Employees E 
         WHERE E.PositionID = P.PositionID
    ) AS EmployeeCount
FROM Positions P 
```

它工作正常。

# 生成的查询是什么，你怎么知道它是坏的？

使用 Profiler，我们可以看到进入远程服务器的查询。这是一个巨大的可怕的混乱，但它绝对是无效的。它尝试引用不在范围内的派生表。任何在 SQL Server 中使用过远程服务器的人都会熟悉整个批次：

```
declare @P1 int
set @P1=NULL
declare @P2 int
set @P2=NULL
declare @P3 int
set @P3=557064
declare @P4 int
set @P4=98305
declare @P5 int
set @P5=0
exec sp_cursorprepexec @P1 output, @P2 output, NULL, N'SELECT "Tbl1002"."PositionID", .....
select @P1, @P2, @P3, @P4, @P5 
```

真正的问题是另一个 SQL Server 要求服务器准备的 SQL 语句。修剪下来，它说：

```
SELECT 
   "Tbl1002"."PositionID" "Col1010", ...
   (   SELECT "Expr1007" 
       FROM (
          SELECT "Expr1006","Expr1006" "Expr1007" 
          FROM (
             SELECT COUNT(*) "Expr1006" 
             FROM (
                SELECT 
                   "Tbl1005"."EmployeeID" "Col1043", ...
                FROM "CasinoHR"."dbo"."Employees" "Tbl1005" 
                WHERE "Tbl1005"."PositionID"="Tbl1002"."PositionID"
             ) Qry1103
          ) Qry1104
       ) "Subquery_Source_Tbl" 
    ) "Expr1008" 
FROM "CasinoHR"."dbo"."Positions" "Tbl1002" 
WHERE "Tbl1002"."PositionID"={guid'D1B0912D-B1A5-11D4-BBDD-0004ACC5B8A7'}' 
```

这是一个混乱的阅读，但你可以看到问题，它`Tbl1002`在一些嵌套的派生表中引用：

```
WHERE "Tbl1005"."PositionID"="Tbl1002"."PositionID" 
```

但只在外面声明；在最后：

```
FROM "CasinoHR"."dbo"."Positions" "Tbl1002" 
```

# 我们在这里讨论的是什么版本的 SQL Server？

我们试图查询的*“远程”服务器（“wclhr”）是带有 SP4 的 SQL Server 2000：*

> Microsoft SQL Server 2000 - 8.00.2066（英特尔 X86）2012 年 5 月 11 日 18:41:14

发出查询时，我们尝试了 SQL Server 2005 和 SQL Server 2008 R2。当两台服务器都是 SQL Server 2000 时，它曾经可以工作。

从 SQL Server 2005 开始，一直到 2008 R2，它正在生成**无效**的SQL！

# 我们尝试过的其他事情

令人惊讶的是，一个可怕的 hack 是运行：

```
SELECT TOP 99.999999 PERCENT
    P.Code, P.Name AS PositionName, P.CompCommitteeMember,
    (    SELECT COUNT(1) 
         FROM WCLHR.CasinoHR.dbo.Employees E 
         WHERE E.PositionID = P.PositionID
    ) AS EmployeeCount
FROM WCLHR.CasinoHR.dbo.Positions P 
```

这会阻止本地 SQL Server 2008 R2 为 2000 机器生成无效的 sql。

本地服务器不是 64 位的，但我们[还是升级了 SQL Server 2000 上的目录](http://msdn.microsoft.com/en-us/library/aa215459%28v=sql.80%29.aspx)。它没有解决它。

# 您的原始查询不是同样错误吗？

@Damien the Unbeliever 不相信范围界定可能是问题所在。放心，是的。我的原始查询针对 SQL Sever 2000 正确运行：

```
SELECT
    P.Code, P.Name AS PositionName, P.CompCommitteeMember,
    (    SELECT COUNT(*) 
         FROM Employees E 
         WHERE E.PositionID = P.PositionID
    ) AS EmployeeCount
FROM Positions P
WHERE P.PositionID = '{D1B0912D-B1A5-11D4-BBDD-0004ACC5B8A7}' 
```

不幸的是，SQL Server 2005/2008/2008R2 优化器将该查询转换为等效查询 - 但不幸的是 SQL Server 2000 无法执行的查询：

```
SELECT 
   Tbl1002.PositionID, 
   Tbl1002.Name AS PositionName, 
   Tbl1002.CompCommitteeMember,
   (    SELECT RecordCount
        FROM (
            SELECT COUNT(*) AS RecordCount
            FROM (
                SELECT 
                    Employees.EmployeeID
                FROM Employees
                WHERE Employees.PositionID=Tbl1002.PositionID
            ) Qry1103
        ) Qry1104
    ) AS EmployeeCount
FROM Positions Tbl1002
WHERE Tbl1002.PositionID= 'D1B0912D-B1A5-11D4-BBDD-0004ACC5B8A7' 
```

在 SQL Server 2000 上，它给出：

```
Msg 107, Level 16, State 2, Line 12
The column prefix 'Tbl1002' does not match with a table name or alias name used in the query. 
```

SQL Server 2000 似乎存在关联子查询的范围问题；在 SQL Server 2005中得到*“改进” 。*

# 奖金阅读

*   Microsoft Connect：[sql2005 sp2 - 链接服务器 (sql2000) 问题和 where 子句中的相关子查询](http://connect.microsoft.com/SQLServer/feedback/details/276254/sql2005-sp2-issue-with-linked-server-sql2000-and-correlated-subquery-in-where-clause)
*   [在链接服务器上使用表时相关子查询失败](http://www.tech-archive.net/Archive/SQL-Server/microsoft.public.sqlserver.server/2004-07/1265.html)
*   [KB825019：修复：链接服务器查询失败，并在 SQL Server 2000 中出现错误消息“无法准备语句”](http://support.microsoft.com/default.aspx?scid=kb;en-us;825019)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T03:41:25.197

根据您附加的阅读内容，似乎要真正解决此问题将需要您重新构造查询，以避免链接服务器上的相关子查询。

一种可能是将链接表作为连接包含在分组选择中并评估该语句中的聚合计数。

```
SELECT
    P.Code, P.Name AS PositionName, P.CompCommitteeMember, Count(*)
FROM Positions P
Left Join Employees E on E.PositionID = P.PositionID
WHERE P.PositionID = '{D1B0912D-B1A5-11D4-BBDD-0004ACC5B8A7}' 
group by P.Code, P.Name, P.CompCommitteeMember 
```

# laravel - Laravel 4，将 Blade 语法转换为 PHP

> ID：16070118
> 
> 赞同：2
> 
> 时间：2013-04-17T20:57:20.217
> 
> 标签：laravel, blade

我想知道什么相当于：

```
@include('sidebars.pages') 
```

在普通的 PHP 中？

我试过这样的事情：

```
<?php echo view('sidebars.pages'); ?>
<?php echo view('sidebars.pages')->render(); ?>
<?php echo render('sidebars.pages'); ?>
<?php Blade::compile_string("@include('sidebars.pages')"); ?> 
```

我很感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:13:26.940

从字面上看，它被翻译成...

```
<?php echo $__env->make('sidebar.pages', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?> 
```

所以在你的尝试列表中，最近的可能是

```
<?php echo render('sidebar.pages', array_except(get_defined_vars(), array('__data', '__path'))); ?> 
```

* * *

参考：[View\Compilers\BladeCompiler](https://github.com/laravel/framework/blob/master/src/Illuminate/View/Compilers/BladeCompiler.php#L274-L281)

```
/**
 * Compile Blade include statements into valid PHP.
 *
 * @param  string  $value
 * @return string
 */
protected function compileIncludes($value)
{
    $pattern = $this->createOpenMatcher('include');

    $replace = '$1<?php echo $__env->make$2, array_except(get_defined_vars(), array(\'__data\', \'__path\')))->render(); ?>';

    return preg_replace($pattern, $replace, $value);
}

/**
 * Get the regular expression for a generic Blade function.
 *
 * @param  string  $function
 * @return string
 */
public function createOpenMatcher($function)
{
    return '/(?<!\w)(\s*)@'.$function.'(\s*\(.*)\)/';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-02T09:10:34.193

我知道这已经得到了回答，但以下内容是否也有效？

```
<?php include 'app/views/yourview.php'; ?> 
```

# visual-c++ - Opencv 2.4.5 和 VC++ 2010 中的一行出现问题

> ID：16070121
> 
> 赞同：-2
> 
> 时间：2013-04-17T20:57:27.517
> 
> 标签：visual-c++, opencv

我想在我的网络摄像头的输出上画一条线。这是我到目前为止所尝试的。

```
#include<opencv\cv.h>
#include<opencv\highgui.h>

using namespace cv;
Point p1 = Point(100,80);
Point p2 = Point(200,80);
int main(){
    Mat image;
    VideoCapture cap;
    cap.open(0);
    namedWindow("window", CV_WINDOW_AUTOSIZE);
    while(1){
        cap>>image;
        imshow("window", image);
        line(image,p1,p2,Scalar(0,255,0),2);
        waitKey(33);
    }
    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:12:46.287

您的代码首先显示图像，然后画一条线 - 它不起作用，您必须先画线。

```
while(1){
    cap>>image;
    line(image,p1,p2,Scalar(0,255,0),2);
    imshow("window", image);
    waitKey(33);
} 
```

# google-closure - 我可以在源文件之间共享 typedef（Google Closure）吗？

> ID：16070123
> 
> 赞同：0
> 
> 时间：2013-04-17T20:57:30.263
> 
> 标签：google-closure

如果我在一个文件中定义 typedef，例如：

```
/**
 * @typedef {{
 *   prop1: string,
 *   prop2: number
 * }}
 */
myClass.typedef; 
```

我可以跨文件共享吗？我不想在每个文件中都声明相同的 typedef。

我试图`goog.provide('myClass.typedef');`在定义它`goog.require('myClass.typedef');`的文件和需要使用它的另一个文件中做。但我收到一个错误“goog.require 找不到 myClass.typedef”。我相信提供/要求一般都在工作，`goog.provide('myClass');`并且`goog.require('myClass');`正在为相同的两个文件工作。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T00:34:22.170

你只能 goog.require 已经过 goog.provide-ed 的东西。

goog.require 设置了类型的类，或者创建另一个类，例如 MyClassTypes 并在其上设置类型，例如 goog.provide('MyClass');

```
MyClass = function () {};

/**
 * @typedef {{
 *   prop1: string,
 *   prop2: number
 * }}
 */
MyClass.type1; 
```

或者

```
goog.provide('MyClassTypes');

MyClassTypes = function () {};

/**
 * @typedef {{
 *   prop1: string,
 *   prop2: number
 * }}
 */
MyClassTypes.type1; 
```

在需要 typedef 的文件中...

```
goog.require('MyClass'); 
```

或者

```
goog.require('MyClassTypes'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T12:56:24.323

是的，typedef 是可共享的，但您需要在文件中包含 deps 系统中包含并需要的其他内容。在您使用 typedefs 之前，我建议您阅读以下内容： [http ://closuretools.blogspot.co.uk/2012/02/type-checking-tips.html](http://closuretools.blogspot.co.uk/2012/02/type-checking-tips.html)

# javascript - 用于检测内部文本的正则表达式标签

> ID：16070127
> 
> 赞同：-1
> 
> 时间：2013-04-17T20:57:45.743
> 
> 标签：javascript, regex

我有这个正则表达式，可以在我的文本字符串中找到 HTML 锚标记之间的文本。文本类似于推文，因此示例字符串为：

```
 http://google.com is great, but http://www.stackoverflow.com may be my only hope. www.yahoo.com is out of the question. 
```

它贯穿我的工作正则表达式：

```
function processTweetLinks(text) {
       console.log(text);
           text = text.replace();

   var replacedText, replacePattern1, replacePattern2;

   //URLs starting with http://, https://, or ftp://
   replacePattern1 = /(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim;
   text = text.replace(replacePattern1, '<a class="individualMessageBioWhateverLink" href="$1" target="_blank">$1</a>');

   //URLs starting with "www." (without // before it, or it'd re-link the ones done above).
   replacePattern2 = /(^|[^\/])(www\.[\S]+(\b|$))/gim;
   text = text.replace(replacePattern2, '$1<a class="individualMessageBioWhateverLink" href="http://$2" target="_blank">$2</a>');

   console.log(text);
   return text;
   } 
```

结果如下：

```
 <a class="individualMessageBioWhateverLink" href="http://google.com" target="_blank">http://google.com</a> is great, but <a class="individualMessageBioWhateverLink" href="http://www.stackoverflow.com" target="_blank">http://www.stackoverflow.com</a> may be my only hope. <a class="individualMessageBioWhateverLink" href="http://www.yahoo.com" target="_blank">www.yahoo.com</a> is out of the question. 
```

我想要另一行或两行来抓取`<a></a>`标签之间的内容，找到链接的开头（例如，, , `http://`. , ），然后删除它们，留下仍然可以识别为用户链接的最短可能文本（“ ”）。我有一个正则表达式，它似乎可以正确筛选文本并在标签之间而不是在 href 中找到这些东西。这是表达式：`https://``http://www``https://www.``google.com``<a></a>`

```
 (?:<a [^>]+>.*?)(([a-zA-Z]{3,5}\:\/\/){0,1}(www\.))(?:.*?<\/a>)

`http://` and `https://` are in `$2`, and `www.` is in `$3`. How would I use this in the context of my function? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:17:16.283

使用 dom 解析使其变得简单。如果您想从中删除`http://`等，您可以应用任何正则表达式

```
$('a').each(function(){
  alert(this.href);
}); 
```

见[http://jsfiddle.net/y6LUg/](http://jsfiddle.net/y6LUg/)

# database-design - 如何暂存数据

> ID：16070140
> 
> 赞同：0
> 
> 时间：2013-04-17T20:58:34.023
> 
> 标签：database-design, database-normalization

我正在与之合作的一个团队的任务是比较两个相似的数据库表——它们包含相同数量的行和相同数量的列，但数据略有不同——所以我正在编写一个 Java 程序来促进该过程。会有人逐行、逐列地检查两个表，比较从表 A 到表 B 的数据。

现在，TableA 和 TableB 都存在于一个大型、缓慢且不断变化的公司数据库中，所以我希望能够将它们暂存，以便 1）使我的程序更快，2）使 QC 结果不t 在基础数据更改时失效。

但是，我不确定我想如何暂存我的数据。似乎在我的数据库中为 QC 过程创建两个新表效率低下。数据库规范化技术似乎建议我应该制作一个“属性”表，其中包含每个单独的字段：Attribute_id、value、row_id（指向 TableA 和 TableB 中的行的外键）、attribute_type_id（指向包含属性名称列表的表的外键）。

这将允许我做一些整洁的事情，比如拥有 QC“版本”——一个人可能会说“TableA 的值是正确的”，但后来有人可以回去说“不，tableB 是正确的”，我可以轻松地存储和检索那段历史。但是，将两张表折叠成一个大而长的列表似乎并不正确。另外，我不确定我的暂存数据库有多快，所以我可能不想做很多连接。（我知道，这很愚蠢，但我们的数据库很慢。）

或者，或者，我可以简单地让这两个表相互镜像，然后简单地逐行、逐列地进行。这很容易，不需要很多数据库查询，但它似乎效率较低，并且会使扩展我的功能更加困难。

亲爱的读者，你怎么看？

# ruby - 从覆盖的 new() 中调用原始 new() 方法？

> ID：16070142
> 
> 赞同：0
> 
> 时间：2013-04-17T20:58:38.383
> 
> 标签：ruby

我有一个类，其`initialize`方法从远程源获取数据，然后使用它来设置其对象属性。

我期待这个类被大量使用，可能在一个程序中被使用数百次。我想通过缓存已经实例化的对象来减少开销网络调用，然后当他们要求再次实例化该对象时我会返回给用户。

为此，我一直在考虑覆盖这个类的新方法。它将检查缓存的对象是否可用，如果可用，则返回该引用。否则，它将调用对象的常规 new 方法，该方法将分配内存并`initialize`像往常一样调用。

如果我重写`new()`类中的方法，是否可以`new`通过类似的方式调用原始方法`super()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:04:48.117

是的，`super`不带参数将调用父方法，将相同的参数传递给新方法。

或者，您可以通过将参数添加到`super(p1, p2, ...)`.

关于你想通过记住以前的调用来做什么，这被称为[“记忆”](http://en.wikipedia.org/wiki/Memoization)，并且至少有一个[记忆宝石](https://github.com/djberg96/memoize)，或者，你可以自己写，这取决于你的需要。

使用哈希很容易做到。使用调用`new`方法时使用的参数作为键，值是要返回的实例。如果没有您的代码示例，很难想出一个自定义的示例，但这是一个简单的、未经测试的版本：

```
def initialize(*args)
  @memoizer ||= {}
  return @memoizer[args] if @memoizer[args]
  # do what you will with the args in this initializer, 
  # then create a new instance for the future.
  @memoizer[args] = super(args)
end 
```

这个想法是`@memoizer`记住调用的“arity”并自动返回类似调用的结果。如果在计算并创建新实例然后返回它之前没有看到那组参数。

当结果可能随着相同的输入参数集发生变化时，这种情况就会崩溃。您不想记忆数据库调用或使用`random`日期/时间值的任何内容，或者返回您无法控制的内容。在这些情况下尝试使用它会返回陈旧或错误的值，除非您设计一种方法来`@memoizer`定期扫描并重新验证这些值。

此外，没有刷新机制，因此`@memoizer`只会增加大小，并且可能会在给定足够不同的输入值的情况下消耗所有可用空间。为了解决这个问题，您还可以为值添加到的时间设置一个时间戳`@memoizer`，并定期清除超过给定生命周期的条目。那时只有“实时”值会保留在散列中。

有用的信息位于：“ [Ruby 和 Rails 中的记忆技术](http://kconrails.com/2010/12/13/memoize-techniques-in-ruby-and-rails/)”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:14:19.270

通过`super`或通过`alias_method`链

如果你是子类，超级更好

检查一下：[当猴子修补方法时，你可以从新实现中调用被覆盖的方法吗？](https://stackoverflow.com/questions/4470108/when-monkey-patching-a-method-can-you-call-the-overridden-method-from-the-new-i)

# php - 用 PHP 分配 HTML 属性

> ID：16070146
> 
> 赞同：0
> 
> 时间：2013-04-17T20:58:51.940
> 
> 标签：php, html

您好，我正在尝试使用 POST (Hello Angel) 发送一个变量。那是代码：

```
<form action="dos.php" method="post" name="compra">
  <input name="id_txt" type="hidden" value=<?php echo "Hello Angel" ?>/>
  <input type="submit" name="Send" value="Send" />
</form> 
```

当在其他页面显示变量时，只显示空间（只有你好）。那是代码：

```
<?php
  if (isset($_POST['id_txt']))
    echo $_POST['id_txt'] 
?> 
```

那么，我如何才能显示所有内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T21:00:20.067

像这样引用您的价值：

```
<input name="id_txt" type="hidden" value="<?php echo "Hello Angel"; ?>" /> 
```

如果您不在 HTML 属性值周围加上引号，它只会将第一个单词作为值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T21:00:28.930

您缺少输入值周围的引号

改变：

```
<input name="id_txt" type="hidden" value=<?php echo "Hello Angel" ?> /> 
```

到：

```
<input name="id_txt" type="hidden" value="<?php echo "Hello Angel" ?>" /> 
```

# entity-framework - EF - 为什么有时急切加载，有时延迟加载

> ID：16070148
> 
> 赞同：3
> 
> 时间：2013-04-17T20:58:56.923
> 
> 标签：entity-framework, c#-4.0

我有一个用于搜索的通用基础存储库方法（为清楚起见进行了修剪）：

```
public class Repository<TRepository> : IRepository<TRepository>
        where TRepository : class, IEntity, new()
{    
     public virtual IQueryable<TRepository> SearchFor(Expression<Func<TRepository, bool>>   predicate, Expression<Func<TRepository, bool>> orderbylinq = null)
    {
        if (orderbylinq == null)
        {
            return DbSet.Where(predicate);
        }
        else
        {
            return DbSet.Where(predicate).OrderBy(orderbylinq);
        }
    }

} 
```

我有一个派生的存储库类：

```
public class TimeDetailRepository : Repository<TimeDetail> 
```

在我的服务层中，我有一个调用 SearchFor 方法的类：

```
private TimeDetailRepository _timeDetailRepository;

        public ManageTimeDetailsAppServ()
            : base(new TimeDetailRepository())
        {
            _timeDetailRepository = new TimeDetailRepository();
        }
IQueryable<TimeDetail> timeDetails2 = _timeDetailRepository.SearchFor(
                    x => x.Id == 3214); 
```

在这种情况下，timeDetails2 已完全加载（已加载所有相关实体）。

但是，我有另一个类（基础服务层类）进行相同的 SearchFor 调用，但它不加载相关实体：

```
IQueryable<TRepository> dbEntity = _repository.SearchFor(x => x.Id == result.Value); 
```

从这两个调用中，我试图创建一个利用相关实体的属性值的视图模型。为什么它会在一种情况下加载它们而不是另一种？这是同一个实体 TimeDetail，同一个基础存储库类？

您在调试器中看到的图像。为什么会加载一些相关实体（如 Facility 和 TimeDetailStatus）而其他不加载（如 OrderHeader 或 Customer） ![在此处输入图像描述](https://i.stack.imgur.com/zdgKt.jpg)

**更新**

我查看了正在生成的查询，它们看起来都很相似，即它们没有加入其他表......所以上下文是否可能已经包含来自某些相关实体的一些缓存行，它们就是这样被包括在内？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T22:10:27.403

除非您使用集合上的方法，否则 EF 将执行延迟加载`.Include()`。由于您不这样做，因此您不会立即获得它们，但是当您调用它们时，您会懒惰地加载它们。

但是，这仅在对象上下文仍处于打开状态时才有效。如果上下文消失了，那么您连接到数据库的能力就消失了，因此您的属性将全部为空。

我的猜测是，您所看到的差异与您如何保持上下文有关。很难说，因为你没有显示你的上下文在哪里，但我会从那里开始。

**编辑**

不确定这是否与您的问题有关，但我只是想澄清延迟加载的内容。这是我最喜欢的 EF 示例：2 个表：Author(AuthorId, AuthorName) 和 Book(BookId, AuthorId(FK), BookTitle)

```
/*  1 */ static void Main(string[] args)
/*  2 */ {
/*  3 */    Book book;
/*  4 */    using (var context = new SampleDbEntities())
/*  5 */    {
/*  6 */        book = context.Books.Single(b => b.BookId == 1);
/*  7 */    }
/*  8 */
/*  9 */    try
/* 10 */    {
/* 11 */        Console.WriteLine(book.Author.AuthorName);
/* 12 */    }
/* 13 */    catch (Exception ex)
/* 14 */    {
/* 15 */        Console.WriteLine(ex.Message);
/* 16 */    }
/* 17 */ 
/* 18 */    Console.ReadLine();
/* 19 */ } 
```

如果您按原样运行此代码，将会发生以下情况：

*   第 6 行将只查询表并用匹配的记录`Books`填充变量。`book`该`Authors`表从未在数据库中被触及。
*   在第 7 行之后，上下文被释放，这意味着数据访问已死。
*   第 11 行抛出试图访问该`Author`属性的异常。

但是，如果您使用调试器并在第 7 行停止，只是为了片刻查看 book 变量，它将立即查询`Authors`数据库中的表（当您在调试器中时），并`Author`在那个物体。这就是我所说的延迟加载的意思——当你实际访问该属性时，即使在调试器中，当上下文处于活动状态时，它会进行一个新的数据库调用。您现在可以继续代码，第 11 行就可以了，并且会打印作者姓名。

所以基本上，当涉及到 EF 时，不要相信调试器。即使看起来不像，它也会延迟加载数据。要弄清楚发生了什么，最好的办法是启动 SQL Profiler 并查看正在运行的查询。

# java - 如何以编程方式将工件添加到 MavenProject？

> ID：16070149
> 
> 赞同：3
> 
> 时间：2013-04-17T20:59:01.337
> 
> 标签：java, maven, maven-plugin, aether

我正在编写一个 Maven 插件，我想自动解析特定的依赖项，并根据给予插件的参数将它们作为依赖项添加到项目中。

我已经能够通过[aether](http://www.sonatype.com/people/2011/01/how-to-use-aether-in-maven-plugins/)成功解决依赖关系，但 aether 和 MavenProject 之间似乎存在脱节。

MavenProject#addAttachedArtifact 上有一个方法，我猜这就是我想要使用的方法。但是，它需要一个 org.apache.maven.artifact.Artifact，而从 aether 中检索到的是 org.sonatype.aether.artifact.Artifact。我发现一个[插件](http://projects.reficio.org/p2-maven-plugin/1.0.0/faq.html)在两者之间有一个转换方法，但我认为应该有一个更标准的方法。

我也尝试过使用 DefaultArtifactFactory 创建一个 org.apache.maven.artifact.Artifact，但在尝试获取 ArtifactHandler 时得到了 NullPointerException。

**代码：**

```
DefaultArtifactFactory factory = new DefaultArtifactFactory();
Artifact mavenArtifact = factory.createBuildArtifact("com.beust", "jcommander", "1.27", "jar"); 
```

**结果：**

```
 Caused by: java.lang.NullPointerException
         at org.apache.maven.artifact.factory.DefaultArtifactFactory.createArtifact(DefaultArtifactFactory.java:155)
         at org.apache.maven.artifact.factory.DefaultArtifactFactory.createArtifact(DefaultArtifactFactory.java:117)
         at org.apache.maven.artifact.factory.DefaultArtifactFactory.createArtifact(DefaultArtifactFactory.java:111)
         at org.apache.maven.artifact.factory.DefaultArtifactFactory.createBuildArtifact(DefaultArtifactFactory.java:75)
         at com.foo.bar.module.IncludeModuleFrontEndMojo.execute(IncludeModuleFrontEndMojo.java:165)
         at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
         ... 20 more 
```

所以真的，这些是我尝试过的事情，解决这些问题会很棒，但我真的在寻找**正确**的方法来做到这一点。有任何想法吗？

**更新**

我在这两个类之间编写了自己的转换方法：

```
private static org.apache.maven.artifact.Artifact aetherToMavenArtifactBasic(Artifact artifact, String scope, ArtifactHandler artifactHandler) {
    DefaultArtifact mavenArtifact = new DefaultArtifact(artifact.getGroupId(), artifact.getArtifactId(), artifact.getVersion(), scope, artifact.getExtension(), artifact.getClassifier(), artifactHandler);
    mavenArtifact.setFile(artifact.getFile());
    mavenArtifact.setResolved(true);
    return mavenArtifact;
} 
```

并发现 MavenProject#addAttachedArtifact 方法是将工件附加到现有工件（即将源/javadocs jar 附加到工件），这不是我的目标。相反，我从 maven 项目中获取了工件并添加了我的工件：

```
project.getArtifacts().add(mavenArtifact); 
```

它将我的工件添加到项目中（然后当我调用项目的 getArtifactMap() 和 getCompileClasspathElements() 时显示我的工件。但是，这种更改不会持续存在。这是我真正担心的问题。所以问题已经演变成：

**我可以对 MavenProject 进行更改并让它持续存在吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:08:53.177

我认为这是不可能的，出于我的目的，我决定要求用户在项目的 pom 文件中添加依赖项（如果他们没有，则会出错）。

似乎是设计使您不允许用户通过插件将项目配置弄得一团糟，以至于您可能会破坏构建。我在[这里找到了一篇关于高级 MOJO 开发的好帖子](https://reg.maestrodev.com/better-builds-with-maven/developing-custom-maven-plugins/advanced-mojo-development/)。引用它：

> 如果此参数可以与主要依赖项部分分开指定，则用户可以轻松破坏他们的构建——特别是如果有问题的 mojo 编译了项目源代码。在这种情况下，直接配置可能会导致编译时存在依赖项，但无法进行测试。因此，@readonly 注释的作用是强制用户配置 POM，而不是只配置特定的插件。

# javascript - D3：用 d3.svg.line() 代替 d3.svg.diagonal()

> ID：16070150
> 
> 赞同：19
> 
> 时间：2013-04-17T20:59:03.577
> 
> 标签：javascript, d3.js, svg, circle-pack

我已经用 d3.svg.diagonal() 渲染了下图。但是，当我尝试用 d3.svg.line() 替换对角线时，它似乎并没有拉出目标数据和源数据。我错过了什么？我对 d3.svg.line 有什么不明白的地方吗？

![在此处输入图像描述](https://i.stack.imgur.com/FTS3Z.jpg)

以下是我指的代码，后面是完整代码：

```
var line = d3.svg.line()
    .x(function(d) { return d.lx; })
    .y(function(d) { return d.ly; }); 
```

...

```
var link= svg.selectAll("path")
    .data(links)
  .enter().append("path")
    .attr("d",d3.svg.diagonal())
    .attr("class", ".link")
    .attr("stroke", "black")
    .attr("stroke-width", "2px")
    .attr("shape-rendering", "auto")
    .attr("fill", "none"); 
```

整个代码：

```
var margin = {top: 20, right: 20, bottom: 20, left: 20},
    width =1500, 
    height = 1500, 
    diameter = Math.min(width, height),
    radius = diameter / 2;

var balloon = d3.layout.balloon()
  .size([width, height])
  .value(function(d) { return d.size; })
  .gap(50)                  

var line = d3.svg.line()
    .x(function(d) { return d.lx; })
    .y(function(d) { return d.ly; });

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + (margin.left + radius) + "," + (margin.top + radius) + ")")

    root = "flare.json";
    root.y0 = height / 2;
    root.x0 = width / 2;

d3.json("flare.json", function(root) {
  var nodes = balloon.nodes(root),
      links = balloon.links(nodes);

var link= svg.selectAll("path")
    .data(links)
  .enter().append("path")
    .attr("d",d3.svg.diagonal())
    .attr("class", ".link")
    .attr("stroke", "black")
    .attr("stroke-width", "2px")
    .attr("shape-rendering", "auto")
    .attr("fill", "none");   

  var node = svg.selectAll("g.node")
    .data(nodes)
    .enter()
    .append("g")
    .attr("class", "node");

  node.append("circle")
      .attr("r", function(d) { return d.r; })
      .attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; });

  node.append("text")
      .attr("dx", function(d) { return d.x })
      .attr("dy", function(d) { return d.y })
      .attr("font-size", "5px")
      .attr("fill", "white")
      .style("text-anchor", function(d) { return d.children ? "middle" : "middle"; })
      .text(function(d) { return d.name; })
}); 
```

使用“line”时svg的d属性如何消失的比较。 ![在此处输入图像描述](https://i.stack.imgur.com/7egnR.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/rEJJX.jpg)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-11-21T09:09:09.660

问题已经过时了，但是由于我没有看到答案并且有人可能会遇到同样的问题，所以就在这里。

用*line*简单替换*对角线*不起作用的原因是*d3.svg.line*和*d3.svg.diagonal*返回不同的结果：

 ****   *d3.svg.diagonal*返回接受数据及其索引并使用*投影*将其转换为路径的函数。换句话说，*对角线投影*确定函数如何从提供的数据中获取点的坐标。
*   *d3.svg.line*返回函数，该函数接受线的点数组并将其转换为路径。方法*line.x*和*line.y*确定如何从提供的数组的单个元素中检索点的坐标

[D3 SVG 形状参考](https://github.com/mbostock/d3/wiki/SVG-Shapes)

[SVG 路径和 D3.js](https://www.dashingd3js.com/svg-paths-and-d3js)

所以你不能直接在 d3 选择中使用*d3.svg.line*的结果（至少当你想绘制多条线时）。

您需要将其包装在另一个函数中，如下所示：

```
var line = d3.svg.line()
                 .x( function(point) { return point.lx; })
                 .y( function(point) { return point.ly; });

function lineData(d){
    // i'm assuming here that supplied datum 
    // is a link between 'source' and 'target'
    var points = [
        {lx: d.source.x, ly: d.source.y},
        {lx: d.target.x, ly: d.target.y}
    ];
    return line(points);
}

// usage:
var link= svg.selectAll("path")
    .data(links)
    .enter().append("path")
    .attr("d",lineData)
    .attr("class", ".link")
    .attr("stroke", "black")
    .attr("stroke-width", "2px")
    .attr("shape-rendering", "auto")
    .attr("fill", "none"); 
```

*这是发布的 jsFiddle mobeets*的工作版本：[jsFiddle](http://jsfiddle.net/8xrU7/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-15T18:05:01.020

[我有同样的问题......这里](http://jsfiddle.net/qsEbd/30/)有一个 jsFiddle 。

请注意，更改`line`为`diagonal`将使其工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-28T13:51:53.283

也许封装对角函数并编辑其参数可能对您有用：

```
var diagonal = d3.svg.diagonal();
var new_diagonal = function (obj, a, b) {
    //Here you may change the reference a bit.
    var nobj = {
        source : {
            x: obj.source.x,
            y: obj.source.y
        },
        target : {
            x: obj.target.x,
            y: obj.target.y
        }
    }
    return diagonal.apply(this, [nobj, a, b]);
}
var link= svg.selectAll("path")
    .data(links)
    .enter().append("path")
    .attr("d",new_diagonal)
    .attr("class", ".link")
    .attr("stroke", "black")
    .attr("stroke-width", "2px")
    .attr("shape-rendering", "auto")
    .attr("fill", "none"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-18T05:32:42.380

只需将`d`链接的属性设置为行：

```
.attr("d", line) 
```***

# vim - 如何在 vim 中将两个命令连接在一起？

> ID：16070153
> 
> 赞同：1
> 
> 时间：2013-04-17T20:59:22.720
> 
> 标签：vim, plugins, syntax, keymapping

我正在尝试在 vim 中为 Bundle 插件组合两个命令。因为 BundleUpdate 会拉取所有插件并安装它们，而且速度很慢。我有以下内容。前两个工作正常，但第三个不行。手术后停止`BundleClean`。如何让 vim 运行第二个命令？

```
command! -bang BI BundleInstall<bang>
command! -bang BC BundleClean<bang>
;not working below
command! -bang BU BundleClean<bang> | BundleInstall<bang> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:14:20.247

你不能这样做`BundleClean | BundleInstall`。

因为`BundleClean`是用户自定义命令，所以由`Vundle`插件定义：

```
 com! -nargs=? -bang   BundleClean call vundle#installer#clean('!' == '<bang>') 
```

请注意，`-bar`此命令定义中没有。

如果你`:h command-bar`会看到：

```
-bar        The command can be followed by a "|" and another command.
        A "|" inside the command argument is not allowed then.
        Also checks for a " to start a comment. 
```

也就是说，`BundleClean`后面不能跟另一个命令 by `|`。

但是，您可以编写一个函数，在该函数中执行两个命令。让你的`BU`命令调用你的函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T21:14:30.823

除了 之外，您还应该将`-bar`其用作参数，否则对于用户定义的命令来说，链接命令和添加注释是不可能的。`:command``-bang`

你将不得不使用

```
command! -bar -bang BU BC<bang> | BI<bang> 
```

代替您当前拥有的内容，因为`Bundle*`命令没有`-bar`参数。

还有另一种选择：使用`execute`：

```
command! -bang BU execute 'BundleClean<bang>' | execute 'BundleInstall<bang>' 
```

. 小心使用`execute '…&lt;some-arg>'`，对于某些参数的值，它不会正常工作。它适用于`<bang>`.

# jquery - jQuery选择具有特定类的所有锚点

> ID：16070155
> 
> 赞同：2
> 
> 时间：2013-04-17T20:59:25.500
> 
> 标签：jquery, html

我正在尝试使用 jQuery 访问页面中具有某个类的所有锚点

*例如。访问所有具有“粗体”类的锚点*

我试过了

```
$('.bold'); 
```

但是我只需要选择主播，你能帮帮我吗？

先感谢您

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T21:00:19.567

使用以下选择器：

```
$('a.bold'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T21:00:32.640

不是`$('a.bold');`你需要的吗？

# razor - Kendo UI Datepicker ModelstateError，格式为：“yyyy”

> ID：16070156
> 
> 赞同：0
> 
> 时间：2013-04-17T20:59:26.787
> 
> 标签：razor, datepicker, kendo-ui

我在我的网络应用程序中使用 Kendo Datepicker，只是为了选择日期的年份。

在我尝试使用提交按钮提交模型之前，一切正常。我的视图调用了该操作，但它发生了以下 ModelstateError 并且日期数据字段为空：

```
"The value '2010' is not valid for date." 
```

问题似乎是 Datepicker 使用的格式。

```
@(Html.Kendo().DatePickerFor(model => model.date)
      .Start(CalendarView.Decade)
      .Depth(CalendarView.Decade)
      .Format("yyyy"))  // <= this is the Problem .Format("MMMM yyyy") for example works 
```

那么，有什么想法可以解决这个问题吗？提前致谢。

# javascript - 使用鼠标拖动事件更改页面

> ID：16070157
> 
> 赞同：0
> 
> 时间：2013-04-17T20:59:27.433
> 
> 标签：javascript, jquery, html, mobile, mouse

我想知道是否可以在鼠标拖动事件中更改 html 页面。我试图让用户单击并向左拖动一个白框以更改页面。该项目的链接在这里：

网址：[http ://davidpottrell.co.uk/library/phone/solent.html](http://davidpottrell.co.uk/library/phone/solent.html)

如您所见，我正在尝试复制手机的工作方式。我的过渡接近正确。我现在正在尝试创建此鼠标拖动事件。

如果可能，是否有人知道有关如何完成最终结果的资源或教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T00:56:45.127

HTML5 怎么样`History API`？它允许在不重新加载页面的情况下更改当前地址。

所以这样做的一种方法可能是让 AJAX 获取下一页的内容，将其放置在当前页面中，然后可能是页面幻灯片转换之类的，然后用于`History API`更改地址。

这是 Nettuts+ 的一篇文章：http: [//net.tutsplus.com/tutorials/html-css-techniques/a-first-look-at-the-history-api/](http://net.tutsplus.com/tutorials/html-css-techniques/a-first-look-at-the-history-api/)

# c#-4.0 - 属性访问器错误

> ID：16070158
> 
> 赞同：0
> 
> 时间：2013-04-17T20:59:30.330
> 
> 标签：c#-4.0, model-view-controller

我们最近在生产环境中放置了一个 MVC 应用程序，它有时会给我们带来无法在开发环境中重现的未处理错误。Web 应用程序不断在同一行崩溃，但内部异常给出不同的错误消息。它崩溃的那一行是在访问特定属性时（属性访问器）。但是内部异常给了我们以下不同的错误：

无法将“System.Int32”类型的对象转换为“System.String”类型。

指数数组的边界之外。

已经有一个与此命令关联的打开的 DataReader，必须先关闭它。

我们有大量用户，所以我假设这与并发或某种类型的线程问题有关？有人可以指导我如何找到问题的正确方向吗？

顺便说一句，访问相同的属性时它总是崩溃。有时它会起作用，有时它会失败。

这是访问器的代码：

```
public string DepartementSelectionne
    {
        get
        {
            if (string.IsNullOrEmpty(m_departementSelectionne) == true)
                if (ListeDepartements.FirstOrDefault() != null)
                    m_departementSelectionne = ListeDepartements.First().CodeDepartement;

            return m_departementSelectionne;
        }
        set
        {
            m_departementSelectionne = value;
        }
    } 
```

谢谢！

# python - 在python中使异步调用方法走同步方式的设计模式

> ID：16070160
> 
> 赞同：0
> 
> 时间：2013-04-17T20:59:35.653
> 
> 标签：python, unit-testing, design-patterns, asynchronous, python-unittest

我正在为套接字程序编写测试用例。套接字将异步接受线程中的消息。我需要编写一个测试用例来验证特定消息。从我的测试用例中，我应该调用 waitFor(x, timeout) 来等待特定消息。waitFor() 函数应该是同步的。

存在哪些可用于这种情况的设计模式？

# wordpress - 我需要一些关于如何基于元而不是页面的侧边栏的指导

> ID：16070163
> 
> 赞同：0
> 
> 时间：2013-04-17T20:59:43.860
> 
> 标签：wordpress, customization, sidebar

我正在开发一个插件，该插件允许用户创建“页面/帖子类型”，自定义类型样式，然后使用该类型标记页面/帖子。所有这些都有效。我的问题是这个插件还需要允许他们将小部件附加到所述类型。

我无法知道任何时候有多少“类型”。

该插件的工作原理如下：

*   用户创建类型（猫、狗、老鼠）
*   用户为类型指定背景颜色、链接颜色等
*   用户为该类型指定小部件

当查看页面/帖子时，页面会检测它是否具有类型。如果是这样，它会将所有相关数据拉入该类型。

一切都很完美。

我知道我必须注册一个侧边栏，但我无法注册每种类型，因为我不知道有多少，用户可以随心所欲地创建和删除。

我的计划：

*   注册一个名为“自定义侧边栏”的侧边栏
*   创建一个模仿“小部件”页面的页面
*   允许用户在“自定义侧边栏”上添加小部件
*   该插件根据“类型”的 id 存储侧边栏的数据

我不能真正使用另一个插件，因为侧边栏功能必须直接融入我的插件。我什至不确定这会奏效，甚至不确定从哪里开始。任何朝着正确方向的推动都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T19:25:05.890

我创建了一个侧边栏，并为用户选择元选项的每个小部件添加了一个选项。该页面获取所需的元数据并将其与特殊侧边栏中的每个小部件进行比较。如果元匹配它显示该小部件。

# asp.net-mvc - ASP MVC 3 - 将多表 linq 查询绑定到 gridview 并导出到 .xls

> ID：16070164
> 
> 赞同：0
> 
> 时间：2013-04-17T20:59:43.833
> 
> 标签：asp.net-mvc, asp.net-mvc-3, linq, gridview, export

下面是我在 ASP MVC 3 控制器中用于导出到`.xls`文件的两表 linq 查询。但是，我正在查询的表与辅助表具有一对多的关系。`FixedStats`当我单步执行代码时，我可以看到 linq 查询已按应有的方式执行， and`VariableStats`字段中的信息量正确。但是，当文件导出到电子表格时，这两列就找不到了。

```
 public void ExportToCsv()
    {

        var grid = new System.Web.UI.WebControls.GridView();

        //join a in db.BankListAgentId on b.ID equals a.BankID
        var banks = from b in db.BankListMaster

                          where b.Status.Equals("A")
                          select new
                          {
                              BankName = b.BankName,
                              EPURL = b.EPURL.Trim(),
                              AssociatedTPMBD = b.AssociatedTPMBD,
                              Tier = b.Tier,
                              FixedStats = from a in db.BankListAgentId
                                           where a.BankID == b.ID &&
                                                 a.FixedOrVariable.Equals("F")
                                               select new { a.AgentId },
                              VariableStats = from a in db.BankListAgentId
                                              where a.BankID == b.ID &&
                                                    a.FixedOrVariable.Equals("V")
                                              select new { a.AgentId }, 
                               Attachment = b.Attachment,
                              Status = b.Status
                          };

        grid.DataSource = banks.ToList();
        grid.DataBind();

        Response.ClearContent();
        Response.AddHeader("content-disposition", "attachment; filename=BankList.xls");
        Response.ContentType = "application/excel";
        StringWriter sw = new StringWriter();
        HtmlTextWriter htw = new HtmlTextWriter(sw);
        grid.RenderControl(htw);
        Response.Write(sw.ToString());
        Response.End();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:35:26.750

您可以使用`String.Join`将`AgentId`值列表组合成一个字符串，然后将其提供给网格。目前`FixedStats`和`VariableStats`是列表，不能以网格单元格值的形式呈现：

```
 select new
  {
      FixedStats = String.Join("|", from a in db.BankListAgentId
                   where a.BankID == b.ID &&
                         a.FixedOrVariable.Equals("F")
                       select a.AgentId.ToString()),
  } 
```

正如 Moby 的 Stunt Double 所注意到的，建议创建专用的视图模型。由于 ORM<->SQL 转换问题，上述解决方案可能不起作用。

专用 ViewModel 示例：

```
public class ExportVM
{
    public List<int> FixedStats { get; set; }
    public FixedStatsCombined 
    {
        get
        {
             return String.Join("|", FixedStats.Select(item => item.ToString());
        }
    }
} 
```

# wpf - 如何使用coding4fun颜色选择器从全景页面中的控制页面更改颜色

> ID：16070170
> 
> 赞同：0
> 
> 时间：2013-04-17T21:00:04.423
> 
> 标签：wpf, windows-phone-7, binding, user-controls, background-color

你好。我使用这个[ColorPicker](http://www.geekchamp.com/articles/coding4fun-colorpicker-in-depth)。我有第一个控制页面 ( `Popup`) 和第二个主页 ( `panorama page`)。现在我想通过在控制页面中拾取颜色并`ColorPicker`在主页中为某些元素（例如网格背景颜色）设置画笔颜色等。但我不知道如何将颜色从控制页面绑定到主页（`panorama page`）。任何想法或链接，例如，Thx。

在控制弹出窗口`.xaml`我有：

```
<c4fToolkit:ColorPicker x:Name="picker" Height="180" Width="450" ColorChanged="picker_ColorChanged" /> 
```

在控制`Popup.cs`我有：

```
public Brush myColor { get; set; }

public MondayPopup()
{
    InitializeComponent();
    DataContext = this;
}

private void picker_ColorChanged(object sender, Color color)
{
    ? = new SolidColorBrush(color);            
} 
```

在主页上`.xaml`我有

```
<Grid x:Name="gridColor" Background="{Binding myColor}" /> 
```

在主页`.cs`中，我没有显示，因为我不知道如何通过选择器从控制页面中获取颜色并将其保存（绑定）到全景主页并更改颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T04:07:30.083

我还没有使用颜色选择器，但根据我对这些控件的了解，您可以尝试颜色选择器的 Value 属性。Thebn 当您导航到主页时，使用该值并将其作为参数传递给 MainPage。

```
NavigationService.Navigate(new Uri("/MainPage.xaml?Color="+colorPicker.Value.ToString(), UriKind.Relative)); 
```

编辑：

您在 picker_ColorChanged 中还有一个颜色参数。您还可以将该参数传递回 MainPage.xaml。

# xml - 从网站解析 Xcode XML 文件

> ID：16070179
> 
> 赞同：0
> 
> 时间：2013-04-17T21:00:44.563
> 
> 标签：xml, xcode, arrays, parsing, double-submit-problem

我的代码有问题，但不明白问题出在哪里。

我正在解析以下 XML 文件

```
 <item>
            <title>Title</title>
            <link>http://news.israelinfo.ru/economy/45276</link>
            <category>economy</category>
            <pubDate>Tue, 16 Apr 2013 00:00:00 +0300</pubDate>
            <description><![CDATA[
            <img src="http://news.israelinfo.ru/images/45276.jpg"
            width="180" height="124" align="left">describe article]]></description>
     </item> 
```

我正在获取我的新闻的数组计数（始终为 20），但是当我尝试在我的自定义单元格中添加描述时，我的应用程序崩溃了 :(

这是错误：

> 2013-04-17 23:52:05.258 IsraelNews[20379:c07] -[lastNews isEqualToString:]：无法识别的选择器发送到实例 0x715b460 2013-04-17 23:52:05.259 IsraelNews[20379:c07] ***终止应用程序未捕获的异常“NSInvalidArgumentException”，原因：“-[lastNews isEqualToString:]：无法识别的选择器发送到实例 0x715b460”

```
cell.titleLabel.text = [news objectAtIndex:5]; 
```

如果我把静态文本`@"Test"`，那么一切都好。

我做错了什么？如果您需要任何其他信息，请告诉我。

谢谢

我的 XML 解析器在这里：

```
-(id)init {

    if (self=[super init]) {

        news = [[NSMutableArray alloc]init];
        dateFormatter = [[NSDateFormatter alloc]init];
        [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss zzzz"];

    }
    return self;
}

-(NSArray*)fetchNewsWithError:(NSError*)outError {
    BOOL success;
    NSURL *xmlUrl = [NSURL URLWithString:@"http://israelinfo.ru/xml/news.xml"];
    NSURLRequest *request = [NSURLRequest requestWithURL:xmlUrl cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:30];
    NSURLResponse *response = nil;

    NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&outError];

    if (!data) return nil;

    [news removeAllObjects];
    NSXMLParser *parser;
    parser = [[NSXMLParser alloc]initWithData:data];
    [parser setDelegate:self];
    success = [parser parse];
    if (!success) {

        NSLog(@"error!");
        return nil;

    }

    NSArray *output = [news copy];
    return output;

}

-(void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{

    if ([elementName isEqual:@"item"]) {
        currentFields = [[NSMutableDictionary alloc]init];
    } else if ([elementName isEqual:@"title"]) {

        [currentFields setObject:@"title" forKey:@"title"];

    }
}

-(void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if ([elementName isEqual:@"item"]) {

        lastNews *currentTitle = [[lastNews alloc]init];
        [currentTitle setTitle:[currentFields objectForKey:@"title"]];
        [currentTitle setLink:[currentFields objectForKey:@"link"]];
        [currentTitle setCategory:[currentFields objectForKey:@"category"]];
        [currentTitle setDescription:[currentFields objectForKey:@"description"]];

        NSString *beginString = [currentFields objectForKey:@"pubDate"];
        NSDate *beginDate = [dateFormatter dateFromString:beginString];
        [currentTitle setPubDate:beginDate];
        [news addObject:currentTitle];
        currentTitle = nil;
        currentFields = nil;

    } else if (currentFields && currentString) {

        NSString *trimmed;
        trimmed = [currentString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
        [currentFields setObject:trimmed forKey:elementName];

    }
    currentString = nil;
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {

    if (!currentString) {

        currentString = [[NSMutableString alloc]init];
    }
        [currentString appendString:string];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:17:32.973

这个对象**lastNews**是 nil，这就是抛出异常“NSInvalidArgumentException”的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T05:14:49.383

我想我找到了我的解决方案

```
lastNews *item = [news objectAtIndex:indexPath.row];
    cell.titleLabel.text = item.title; 
```

# java - 如何使用java正则表达式过滤xml文件

> ID：16070181
> 
> 赞同：0
> 
> 时间：2013-04-17T21:00:59.687
> 
> 标签：java, regex

我有这个带有 xml 信息的 java 字符串，我正在尝试使用 java 正则表达式来过滤掉单词之间的所有垃圾，以形成一个括在括号中的单词，例如 [DEFENDANT]。

我想从这个出发：

```
<w:p><w:r><w:t>[</w:t></w:r><st1:PlaceName w:st="on"><w:r><w:t>DEFENDANT</w:t></w:r>

</st1:PlaceName><w:r><w:t> </w:t></w:r><st1:PlaceType w:st="on"><w:r><w:t>CITY</w:t></w:r>

</st1:PlaceType><w:r><w:t>], [</w:t></w:r><st1:place w:st="on"><st1:PlaceName w:st="on"><w:r>

<w:t>DEFENDANT</w:t></w:r></st1:PlaceName><w:r><w:t> </w:t></w:r><st1:PlaceType w:st="on"><w:r>

<w:t>STATE</w:t></w:r></st1:PlaceType></st1:place><w:r><w:t>] [DEFENDANT ZIP]</w:r><w:r> 
```

对此：

```
<w:p><w:r><w:t>[DEFENDANT CITY], [DEFENDANT STATE] [DEFENDANT ZIP]</w:r><w:r> 
```

我一直`(\[)<.+>+([A-Z ]+\])`在 regexPlanet 上广泛地测试正则表达式表达，但无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T21:03:52.283

不要使用 Regex 解析 XML。只需使用内置的 Java XML 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:52:05.170

如果它都在一行上，像这样：

```
<w:p><w:r><w:t>[</w:t></w:r><st1:PlaceName w:st="on"><w:r><w:t>DEFENDANT</w:t></w:r></st1:PlaceName><w:r><w:t> </w:t></w:r><st1:PlaceType w:st="on"><w:r><w:t>CITY</w:t></w:r></st1:PlaceType><w:r><w:t>], [</w:t></w:r><st1:place w:st="on"><st1:PlaceName w:st="on"><w:r><w:t>DEFENDANT</w:t></w:r></st1:PlaceName><w:r><w:t> </w:t></w:r><st1:PlaceType w:st="on"><w:r><w:t>STATE</w:t></w:r></st1:PlaceType></st1:place><w:r><w:t>] [DEFENDANT ZIP]</w:r><w:r> 
```

那么这个正则表达式应该可以工作：

```
([<\w:\w>]+)(\[[</\w:\w>]+\s\w:\w+="\w+"><\w:\w><\w:\w>)(\w+)(</\w:\w></\w:\w></\w+:\w+><\w:\w><\w:\w>\s</\w:\w></\w:\w><\w+:\w+\s\w:\w+="\w+"><\w:\w><\w:\w>)(\w+)(</\w:\w></\w:\w></\w+:\w+><\w:\w><\w:\w>\],\s\[</\w:\w></\w:\w><\w+:\w+\s\w:\w+="\w+"><\w+:\w+\s\w:\w+="\w+"><\w:\w><\w:\w>)(\w+)(</\w:\w></\w:\w></\w+:\w+><\w:\w><\w:\w>\s</w:\w></\w:\w><\w+:\w+\s\w:\w+="\w+"><\w:\w><\w:\w>)(\w+)(</\w:\w></\w:\w></\w+:\w+></\w+:\w+><\w:\w><\w:\w>\]\s\[)(\w+\s\w+)(\])(</\w:\w><\w:\w>) 
```

我在这里有一个工作示例：[RegExr](http://regexr.com?34ilj)

我本可以将事情分组更好一些，但总的来说，它完成了工作，所以你应该能够看到它工作。

此外，如果它不在单行上（如果它就像在您的示例中一样），那么这将起作用：

```
([<\w:\w>]+)(\[[</\w:\w>]+\s\w:\w+="\w+"><\w:\w><\w:\w>)(\w+)(</\w:\w></\w:\w>\s+</\w+:\w+><\w:\w><\w:\w>\s</\w:\w></\w:\w><\w+:\w+\s\w:\w+="\w+"><\w:\w><\w:\w>)(\w+)(</\w:\w></\w:\w>\s+</\w+:\w+><\w:\w><\w:\w>\],\s\[</\w:\w></\w:\w><\w+:\w+\s\w:\w+="\w+"><\w+:\w+\s\w:\w+="\w+"><\w:\w>\s+<\w:\w>)(\w+)(</\w:\w></\w:\w></\w+:\w+><\w:\w><\w:\w>\s</w:\w></\w:\w><\w+:\w+\s\w:\w+="\w+"><\w:\w>\s+<\w:\w>)(\w+)(</\w:\w></\w:\w></\w+:\w+></\w+:\w+><\w:\w><\w:\w>\]\s\[)(\w+\s\w+)(\])(</\w:\w><\w:\w>) 
```

您可以在此处的 RegExr 上看到这一点[。](http://regexr.com?34ilp)

# jms - 同一个 Websphere MQ JMS 队列上的两个消费者，都接收相同的消息

> ID：16070182
> 
> 赞同：3
> 
> 时间：2013-04-17T21:01:07.673
> 
> 标签：jms, load-balancing, messaging, ibm-mq, mq

我正在与尝试使用 JMS 队列和 IBM Websphere MQ 实现负载平衡行为的人合作。因此，他们将多个 Camel JMS 消费者配置为从同一个队列中读取。尽管根据 JMS 规范（我最后一次查看），这种行为是未定义的，但他们期望一种循环/负载平衡行为。而且，虽然规范没有定义这一点，但我相信 Websphere MQ 的正常行为是只将消息传递给一个消费者，并且它*可能会*执行某种类型的负载平衡。参见这里，例如：[当多个 MessageConsumer 连接到同一个队列（Websphere MQ）时，如何对消息消费者进行负载平衡？](https://stackoverflow.com/questions/13800829/when-multi-messageconsumer-connect-to-same-queuewebsphere-mq-how-to-load-balan)

但在这种特殊情况下，似乎*两个*消费者都收到了相同的消息。

任何更熟悉 Websphere MQ 专家的人都可以对此有所了解吗？是否存在预期这种行为的任何情况？是否有任何配置更改可以缓解这种情况？

我倾向于告诉这里的每个人都使用本地 Websphere MQ 集群设施，并且不要让多个消费者指向同一个队列，但这对他们来说将是一个很大的变化，所以我很想找到一种方法来制作这项工作。

并不是说我喜欢依赖任何未定义的东西，但是如果他们愿意依赖 IBM 的特定行为，我将把它留给他们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:52:25.290

他们接收相同消息的唯一方法是：

1.  消息有多个副本。
2.  这些应用程序在没有锁定的情况下浏览消息，然后转回来将其删除。
3.  应用程序正在退出交易并使消息再次可用。
4.  在应用程序确认消息之前断开连接。

推荐的做法是让多个应用程序竞争队列中的消息。如果一个应用程序出现故障，仍会为队列提供服务。在集群中，这至关重要，因为集群将继续将消息引导到未提供服务的队列实例，直到它填满。

如果它是一个开发系统，安装[SupportPac MA0W](http://ibm.co/SupptPacMA0W)并告诉它只跟踪一个队列，您将能够准确地看到正在发生的事情。

请参阅第 4.4 节中的 JMS 规范。提供者绝不能提供已确认消息的第二个副本。4.4.13 中的会话处理例外，我在上面的#4 中介绍过。这是非常明确的，并且是官方规范的一部分，因此不是 IBM 特定的行为。

# curl - curl 按日期下载多个文件

> ID：16070183
> 
> 赞同：0
> 
> 时间：2013-04-17T21:01:17.787
> 
> 标签：curl, download, command

我想使用单个 curl 命令从站点下载多个文件。是否有一个有效的单行命令来下载具有相同初始文件路径和/或在特定日期之后上传的所有文件。

例如：

```
curl -O https://myURL/..../..../* 
```

我知道“*”不起作用，但想知道会怎样。

或者，指定该页面上在特定日期之后上传的所有文件。

谢谢！

# mysql - 试图完善查询

> ID：16070184
> 
> 赞同：1
> 
> 时间：2013-04-17T21:01:22.150
> 
> 标签：mysql

我目前只是在寻找矩形形式，所以我试图让它在 phpmyadmin 上与 vanilla mysql 一起工作，我想要一个数据库，其中有多个区域可能相互重叠，每个区域都有“成本”每平方像素，因此您可以获取某个点的成本或测量整个区域的成本，同时忽略重叠的部分，您还可以获得数据库中现有总成本的平均值。

我想知道你们中的一个 mysql 兽医是否可以帮助我编写这样一个查询/数据库模式，我或多或少已经有了一些东西

```
select sum(c.cost) 
from (select x.num as x, y.num as y, max(priority) as maxpriority 
      from numbers x 
      cross join numbers y 
      join costs c 
      on x.num between c.x and c.x + c.deltax 
      and y.num between c.y + c.deltay 
      where x.value between PIXELX and PIXELX and DELTAX and 
      y.value between PIXELY and PIXELY and DELTAY 
      group by x.num, y.num) xyp
join costs c 
on xyp.x between c.x and c.x + c.deltax
and xyp.y between c.y + c.deltay
and xyp.maxpriority = c.priority 
```

这似乎是无效的并且充满了错误，也没有提到数据库模式。我花了几天时间尝试纠正它并使其工作，但它一直返回 null。

在此先感谢，我很感激。

以下是模式：这是数字：

```
Collation   Attributes  Null    Default Extra   Action
     1  num int(11)         No  None          Change      Drop    Browse distinct values     More 
```

这是费用：

```
#   Name    Type    Collation   Attributes  Null    Default Extra   Action
 1  x   int(11)         No  None          Change      Drop    Browse distinct values     More
 2  y   int(11)         No  None          Change      Drop    Browse distinct values     More
 3  deltax  int(11)         No  None          Change      Drop    Browse distinct values     More
 4  deltay  int(11)         No  None          Change      Drop    Browse distinct values     More
 5  priority    int(11)         No  None          Change      Drop    Browse distinct values     More 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:19:21.900

首先更正查询中的错误：

```
select sum(c.cost) 
from (select x.num as x, y.num as y, max(priority) as maxpriority 
      from numbers x 
      cross join numbers y 
      join costs c 
      on x.num between c.x and c.x + c.deltax 
      and y.num between c.y + c.deltay 
      where (x.value between PIXELX and PIXELX + DELTAX)   -- + instead of and
      and (y.value between PIXELY and PIXELY + DELTAY)     -- + instead of and
      group by x.num, y.num) xyp
join costs c 
on (xyp.x between c.x and c.x + c.deltax)
and (xyp.y between c.y and c.y + c.deltay)                 -- added c.y
and xyp.maxpriority = c.priority 
```

然后，如果您仍然没有得到所需的结果，请单独尝试内部查询以查看从中返回的内容。

# javascript - 如何处理 Backbone 中的动态属性并同步到数据库

> ID：16070188
> 
> 赞同：2
> 
> 时间：2013-04-17T21:01:27.160
> 
> 标签：javascript, jquery, backbone.js

过去几天，我一直在与 Backbone 作斗争，试图以最佳方式处理用户添加的一些动态元素，并成功地将这些元素与数据库同步。我有一个模型和一个视图。

创建的模型相当简单，它代表数据库中的产品（T 恤）并具有以下属性：id、价格、尺寸、品牌、颜色。

我面临的问题是颜色属性。颜色不能通过设计预先填充（可能很不幸），以允许用户输入任何自定义颜色并随意命名。除了名称之外，用户还必须指定颜色是否可用。单击“添加文本”按钮/链接将在下面的 div 中附加一个输入字段和下拉列表。

**我的问题**：将这些多种颜色属性添加为模型的一个属性的最佳方法是什么？

当它尝试使用 API 作为颜色属性插入或更新自身并进入数据库（mysql）中的一行时，我需要将所有颜色/可用性值作为一个属性。我相信后端程序员已将此行配置为一种 TEXT。

例如

```
{"colors": [{"blue":true},{"orange":false},{"white":false}]} 
```

我的想法是，我显然需要在模型中有某种嵌套的 JSON，但我不知道如何正确编写它。任何帮助或为我指明正确方向的东西将不胜感激。

![在此处输入图像描述](https://i.stack.imgur.com/9OfjW.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:06:18.267

好的，这个解决方案涉及 jQuery 可能有点过多，但应该可以正常工作。基本上，听听颜色文本框的变化并选择：

```
events: {
  'change .colorText': 'setColor',
  'change .colorSelect': 'setColor'
},
setColor: function() {
  // here make your `color` attribute's array
  var colors = [];
  this.$('.colorText').each(function() {
    var val, color;
    // adapt the next to navigate to the corresponding select...
    (val = $(this).val()) && (((color = {})[val] = $(this).next().val()) || 1) && colors.push(color);
  });
  this.model.set('colors', colors);
} 
```

# javascript - 带有 csv 数据的 Highcharts Bubble

> ID：16070192
> 
> 赞同：0
> 
> 时间：2013-04-17T21:01:38.040
> 
> 标签：javascript, highcharts

我想通过从 csv 文件导入数据来创建一个带有 highcharts 的气泡图，这是我所做的代码：

```
'$(function () {
    $('#container').highcharts({

        chart: {
            type: 'bubble',
           zoomType: 'xy'
        },
          xAxis: {
            allowDecimals: true,
            gridLineWidth: 1,
            endOnTick: true,

             max :2,
             min:-2,
             tickPixelInterval: 200,

        },yAxis: {
            gridLineWidth: 1,
            endOnTick: true,
             max :2,
             min: -2,
             tickPixelInterval: 150,

        },

        title: {
            text: 'Cycle 2012 Q 4'
        },

        series: [{

            data: [[0.612026169,1.57522991,0.2302]]
        }, {

            data: [[0.4410667,-0.96442802,0.1662]]
        }, {

            data: [[-0.280249839,-0.687351853,0.1553]]
        }, {

            data: [[0.518541583,0.045330936,0.1985]]
        }, {    

            data: [[0.098823319,0.164087324,0.2086]]
        }]

    });

});' 
```

我不知道从 csv 导入数据如何获得相同的结果？你能帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:38:59.923

在将数据传递给 Highcharts 之前，您必须对其进行预处理。本教程将在本节中介绍它：http: [//docs.highcharts.com/#preprocesssing-data-from-a-file](http://docs.highcharts.com/#preprocesssing-data-from-a-file)

# java - 如何创建混合类型的嵌套哈希图？

> ID：16070194
> 
> 赞同：0
> 
> 时间：2013-04-17T21:01:42.567
> 
> 标签：java, tree, hashmap, mustache

我是 Java 新手，遇到一个不知道如何解决的问题。我有一个现有的 HashMap，如下所示：

```
[
{
    linkText=Link Text, 
    link=http://www.someurl.com, 
    heading=Asia}, 
{
    linkText=Link Text, 
    link=http://www.someurl.com, 
    heading=Asia
}
{
    linkText=Link Text, 
    link=http://www.someurl.com, 
    heading=Europe
}
{
    linkText=Link Text, 
    link=http://www.someurl.com, 
    heading=Africa
}
] 
```

我需要将此 HashMap 转换为允许我在 Mustache 中执行此操作的内容：

```
<ul>
{{#linkGroups}}
<li>{{heading}}
  <ul>
    {{#links}}
    <li><a href="{{link}}">{{linkText}}</a></li>
    {{/links}}
  </ul>
</li>
{{/linkGroups}}
</ul> 
```

我认为我对允许这种性质的嵌套的现有数据类型没有足够的知识。我已经尝试过使用 HashMap、Set 和 Tree，但它没有出现。我*认为*我最终使用的任何类型都需要让我做这样的事情：

```
[
    {
        heading=Asia,
        links= {
            {
                linkText=Link Text,
                link=http://www.someurl.com
            }
            {
                linkText=Link Text,
                link=http://www.someurl.com
            }
        }
    }
    {
        heading=Europe,
        links= {
            {
                linkText=Link Text,
                link=http://www.someurl.com
            }
            {
                linkText=Link Text,
                link=http://www.someurl.com
            }
        }
    }
] 
```

但我可能是错的，并且会使对象过于复杂。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:06:19.197

假设您创建了一个这样的类：

```
class Link
{
    public String text;
    public String url;
} 
```

您描述的结构可以使用：

```
HashMap<String, List<Link>> 
```

或使用番石榴库：

```
ListMultimap<String, Link> 
```

# parsing - 按命中位置对 rps-blast 结果排序

> ID：16070195
> 
> 赞同：1
> 
> 时间：2013-04-17T21:01:45.957
> 
> 标签：parsing, sorting, biopython, blast

我从 biopython 开始，我有一个关于解析结果的问题。我使用了一个[教程](http://www2.warwick.ac.uk/fac/sci/moac/people/students/peter_cock/python/rpsblast)来参与其中，这是我使用的代码：

```
from Bio.Blast import NCBIXML
for record in NCBIXML.parse(open("/Users/jcastrof/blast/pruebarpsb.xml")):
    if record.alignments:
        print "Query: %s..." % record.query[:60]
        for align in record.alignments:
            for hsp in align.hsps:
                print " %s HSP,e=%f, from position %i to %i" \
                      % (align.hit_id, hsp.expect, hsp.query_start, hsp.query_end) 
```

得到的部分结果是：

```
 gnl|CDD|225858 HSP,e=0.000000, from position 32 to 1118
 gnl|CDD|225858 HSP,e=0.000000, from position 1775 to 2671
 gnl|CDD|214836 HSP,e=0.000000, from position 37 to 458
 gnl|CDD|214836 HSP,e=0.000000, from position 1775 to 2192
 gnl|CDD|214838 HSP,e=0.000000, from position 567 to 850 
```

我想要做的是按命中位置（Hsp_hit-from）对结果进行排序，如下所示：

```
 gnl|CDD|225858 HSP,e=0.000000, from position 32 to 1118
 gnl|CDD|214836 HSP,e=0.000000, from position 37 to 458
 gnl|CDD|214838 HSP,e=0.000000, from position 567 to 850
 gnl|CDD|225858 HSP,e=0.000000, from position 1775 to 2671
 gnl|CDD|214836 HSP,e=0.000000, from position 1775 to 2192 
```

我的 rps-blast 输入文件是 *.xml 文件。有什么建议继续吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:17:40.537

HSPs 列表只是一个 Python 列表，可以像往常一样进行排序。尝试：

```
align.hsps.sort(key = lambda hsp: hsp.query_start) 
```

但是，您正在处理一个嵌套列表（每个匹配项都有一个 HSP 列表），并且您希望对所有这些列表进行排序。在这里制作自己的清单可能是最好的——像这样：

```
for record in ...:
    print "Query: %s..." % record.query[:60]
    hits = sorted((hsp.query_start, hsp.query_end, hsp.expect, align.hit_id) \
                   for hsp in align.hsps for align in record.alignments)
    for q_start, q_end, expect, hit_id in hits:
        print " %s HSP,e=%f, from position %i to %i" \
              % (hit_id, expect, q_start, q_end) 
```

彼得

# php - 选择两个表时查询回显重复值

> ID：16070196
> 
> 赞同：1
> 
> 时间：2013-04-17T21:01:55.710
> 
> 标签：php, pdo

我有一个打印出所有注册用户的网站。查询工作正常，直到我想从另一个表中添加值。现在它打印出重复的值。

假设我有 2 个用户。它应该打印出来

约翰·多伊·简·多伊

但是在添加带有头像的表格后，它会打印出 John Doe Jane Doe John Doe Jane Doe

这是我的查询。

```
<?php 
function fetch_users(){
global $db;
$query = $db->query("SELECT user.id, user.username,user.email, userdetails.profile_img FROM user , userdetails");
$user = array();
while(($row = $query->fetch(PDO::FETCH_ASSOC)) !==FALSE) { 
 $user[] = $row;
}
return $user;
}
?> 
```

但是如果我删除最后添加的表 userdetails 并使用查询而不将表添加到名称中。它再次正常工作，但随后没有化身当然。

php。

```
<?php foreach(fetch_users() as $user){  ?>
 <p>
 <a href="profile.php?uid=<?php echo $user['id'];?>"><?php echo $user['username'];?> </a>
 </p>
 <?php
  }
  ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:05:27.850

您可能想查看[MySQL 连接。](http://dev.mysql.com/doc/refman/5.0/en/join.html)

例如，您可以执行以下操作：

```
SELECT user.id, user.username, user.email, userdetails.profile_img
FROM user
LEFT JOIN userdetails
ON user.id = userdetails.<user id column name goes here>
GROUP BY user.id 
```

这假设您在 userdetails 表中有一个列（如果没有，您肯定应该有），其中包含通过 id 引用用户表的键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:06:52.397

```
SELECT user.id, user.username,user.email, userdetails.profile_img FROM user , userdetails 
```

此查询为每个用户和整个 userdetails 表选择一次（John Doe + John Doe | John Doe + Jane Doe | Jane Doe + John Doe | Jane Doe + Jane Doe = 4 行）

您还必须在那里写一个条件：

```
SELECT user.id, user.username,user.email, userdetails.profile_img FROM user , userdetails WHERE user.id = userdetails.id 
```

（假设您在两个表中都有用户 ID）

# arrays - 子元素的 Xpath 数组

> ID：16070202
> 
> 赞同：0
> 
> 时间：2013-04-17T21:02:38.087
> 
> 标签：arrays, xpath, wildcard, wget

我有一个 xpath 代码，它返回多个变量子元素，我希望能够读取每个子元素。

是否可以创建一个数组或者是否有其他方法可以将通配符传递到 xpath 以提取所有子元素？

例子：

```
<changeSet>
<item></item>
<item></item>
<item></item>
</changeSet> 
```

项目的数量可能会有所不同。我希望能够读取运行查询时可能出现的所有项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:09:22.460

对于纯 XPath 1.0，表达式`/changeSet/item`返回一组作为根元素`item`的子元素的所有元素节点。`changeSet`或者返回根元素`/changeSet/*`的所有子元素。`changeSet`当然，根据您使用的 XPath API，您可能会得到一个集合或一个节点列表或数组，或者在最坏的情况下只有第一个选定节点的字符串值。在这种情况下，您需要查看您使用的 XPath API，它应该提供返回节点集合的选项。

# wix - 引用 SSDT 项目的 WiX 项目无法在 TFSBuild 中构建 - 未定义的预处理器变量“$(var.DatabaseProject.TargetDir)”

> ID：16070203
> 
> 赞同：4
> 
> 时间：2013-04-17T21:02:43.713
> 
> 标签：wix, tfsbuild, sql-server-data-tools

我的项目是更大解决方案的一部分，已从 dbproj 转换为 asqlproj (SSDT)。该解决方案包括一个引用 SSDT 项目的 WiX 安装程序。WiX 项目通过 VS2010 在多个开发者系统上构建良好。然而，我们一直使用的自动化构建失败并出现以下错误：

```
error CNDL0150: Undefined preprocessor variable '$(var.DatabaseProject.TargetDir)'. 
```

在转换此项目之前，该解决方案已由 TFS 自动构建构建了数月，没有出现任何问题。我可以从构建日志中看到正在构建 SSDT 项目，以下是构建日志中的一些相关行：

```
Project "C:\B\1\SourcePath\Server\Server.wixproj" (8) is building "C:\B\1\SourcePath\Database\DatabaseProject.sqlproj" (12) on node 1 (default targets).
...
Done Building Project "C:\B\1\SourcePath\Database\DatabaseProject.sqlproj" (default targets). 
```

我还可以看到数据库项目的 .dacpac 和 .dll 文件已创建并复制到 TFS 构建已将项目重定向到的输出目录中。

对数据库项目的引用似乎很好，TFS 构建似乎知道应该构建它，但 WiX 抱怨 TargetDir 的未定义预处理器变量。

我一定遗漏了一些东西... TFS 使用的输出重定向是否导致了我的问题？我不确定从这里去哪里，感谢您提出的任何帮助。

**更多信息**

更详细地查看构建的日志文件，我可以看到`.sqlproj`项目的参数没有在命令行上传递到`candle.exe`. 当我在VS2010本地构建时，可以看到传递的预期参数如下（就像WiX项目引用的其他项目一样）：

```
-d"DatabaseProject.FullConfiguration=Release|AnyCPU"
-dDatabaseProject.Platform=AnyCPU
-dDatabaseProject.ProjectDir=C:\SourcePath\Database\
-dDatabaseProject.ProjectExt=.sqlproj
-dDatabaseProject.ProjectFileName=DatabaseProject.sqlproj
-dDatabaseProject.ProjectName=DatabaseProject
-dDatabaseProject.ProjectPath=C:\SourcePath\Database\DatabaseProject.sqlproj
-dDatabaseProject.TargetDir=C:\SourcePath\Database\sql\release\
-dDatabaseProject.TargetExt=.dll
-dDatabaseProject.TargetFileName=DatabaseProject.dll
-dDatabaseProject.TargetName=DatabaseProject
-dDatabaseProject.TargetPath=C:\SourcePath\Database\sql\release\DatabaseProject.dll 
```

`candle.exe`在 TFS 构建期间，这些参数都不会被传递。我认为这些信息可能有助于回答这个问题。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:11:45.523

根据@RobMenching 的回答，您将无法依赖任何命令行构建设置的 SSDT 项目变量，因此您需要找到另一种方法来引用项目的输出。

幸运的是，在标准 TFS 构建中，在给定构建配置中，所有项目的输出文件夹都是相同的。假设您没有以某种方式重定向输出，您应该能够使用任何其他项目（正常工作）作为参考路径。例如，假设您在解决方案中有 a`DatabaseProject.sqlproj`和 an `DataAccessProject.csproj`，您应该能够：

```
<Component Id='MyComponent' Guid='12345678-1234-1234-1234-123456789012'>
    <?ifdef DatabaseProject.TargetDir ?>
        <File Id='foo' Name='foo' src='$(var.DatabaseProject.TargetDir)\foo.dacpac' />
    <?else?>
        <File Id='foo' Name='foo' src='$(var.DataAccessProject.TargetDir)\foo.dacpac' />
    <?endif?>
</Component> 
```

对于在 VS2010 中完成的构建，每个项目都构建到自己的输出文件夹中，应该定义正确的预处理器变量，它将使用第一个选项。对于未定义预处理器变量的 TFS 构建，TFS 会将 SSDT 的输出重定向到与所有其他项目相同的文件夹，因此任何一个预处理器变量都应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:55:56.060

我相信这里的根本问题是`.sqlproj`不支持必要的 Visual Studio 集成来为预处理器变量提供数据。多年来，这给 WiX 工具集带来了很多问题。不幸的是，修复它需要所有者`.sqlproj`修复他们的项目系统。

# c# - 为什么在 ModelState.IsValid 检查之前更新模型时，ModelState 会报错？

> ID：16070205
> 
> 赞同：4
> 
> 时间：2013-04-17T21:02:50.527
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我的控制器代码如下所示：

```
[HttpPost]
public ActionResult Create(ExampleViewModel model)
{
    model.User.RegistrationNumber = this.RegistrationNumber;

    if (ModelState.IsValid)
    {

    }

    return View("Create", model);
} 
```

我不断收到一条验证错误消息，说`"Registration Number cannot be blank"`我正在明确设置它。

`ModelState`由于我以某种方式修改了模型，我是否必须重置？

发生了什么基本上我将文本框设置为禁用，然后在表单发布期间数据丢失了，所以我必须再次明确设置它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T21:17:01.327

因为您将文本框设置为禁用，所以没有发布数据。

当您自己设置值时，您可以通过执行以下操作来删除该字段上的错误：

```
ModelState.Remove("User.RegistrationNumber"); 
```

**打电话**之前**`ModelState.IsValid`。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:06:48.903

当控制器中设置注册号的代码行时，ModelState 验证已经发生。它发生在调用控制器上的 Create() 方法之前。从您的描述中很难知道您到底想要实现什么，但如果您不想验证该字段，您可以通过注释掉 [required] 属性来关闭对该字段的验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T21:07:44.060

验证发生在您调用之前`IsValid`，错误将出现在字典中。

我不确定这是否是处理它的最佳方法，但我一直在做这样的事情：

```
[HttpPost]
public ActionResult Create(ExampleViewModel model)
{
    if (ModelState["User.RegistrationNumber"].Errors.Count == 1) {
        model.User.RegistrationNumber = this.RegistrationNumber;
        ModelState["User.RegistrationNumber"].Errors.Clear();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-17T23:38:00.343

此处的其他解决方案在 .NET Core 3.1 中没有按预期工作，因此我使用了以下替代方案，它仅显式设置所需模型属性的验证状态。

```
if (ModelState["Property"].Errors.Count > 0)
{
    model.Property = someRequiredProperty; // db query using FirstOrDefault()

    if (model.Property != null)
    {
        ModelState["Property"].ValidationState = ModelValidationState.Valid;
    }
}

if (ModelState.IsValid)
{
    // ...
} 
```**

# c - 由于 void 指针和整数转换错误，pthread_create 不起作用

> ID：16070207
> 
> 赞同：0
> 
> 时间：2013-04-17T21:02:52.980
> 
> 标签：c, pointers, pthreads, void, void-pointers

您如何/为什么转换为/从 void 指针或 int 转换？

以下代码错误地生成编译器错误：

```
while(num_producers > 0) {
    pthread_t tid; // id of pthread (not used except to call pthread_create)
    pthread_attr_t attr; // pthread attributes (not used except to call pthread_create)
    pthread_attr_init(&attr); // default pthread attributes
    pthread_create(&tid, &attr, producer, num_producers);
    num_producers--;
} 
```

出现以下错误（都在 pthread_create 行）：

```
error: invalid conversion from 'void (*)(int)' to 'void* (*)(void*)'
  error: initializing argument 3 of 'int pthread_create(_opaque_pthread)t**, const pthread_attr_t*, void* (*)(void*), void*)'
  error: invalid conversion from 'int' to 'void*'
  error: initializing argument 4 of 'int pthread_create(_opaque_pthread_t**, const pthread_attr_t*, void* (*)(void*), void*)' 
```

我想创建一个运行（仅）函数“生产者”的 pthread，该函数也包含在与 main 相同的文件中。为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:06:40.080

声明`producer`正确的方法：

```
void * producer(void * p)
{
    intptr_t n = (intptr_t)(p);

    // ... use "n"

} 
```

然后：

```
int n = 42;

int res = pthread_create(&tid, &attr, producer, (void*)(n)); 
```

# python - 优化与 heapq.nlargest 相关的 python 文件并使用循环扩展

> ID：16070216
> 
> 赞同：1
> 
> 时间：2013-04-17T21:03:20.790
> 
> 标签：python, numpy, extend

我的目标是在一个列表中找到几个（在此示例中为 3）最大值`fourire`，识别列表中的位置，并在另一个列表中获得相应的（position_wise）值`freq`，因此打印输出应该是

`2\. 27.`
`9\. 25.`
`4\. 22.`

附加的python工作正常......有点。

** 请注意，我正在处理 numpy 数组，因此 index() 不起作用....

有没有办法改进以下内容？

```
import heapq

freq    = [  2., 8., 1., 6., 9., 3.,  6., 9.,   4., 8., 12.]
fourire = [ 27., 3., 2., 7., 4., 9., 10., 25., 22., 5.,  3.]

out = heapq.nlargest(3, enumerate(fourire), key=lambda x:x[1])

elem_fourire = []
elem_freq = []
for i in range(len(out)):
    (key, value) = out[i]
    elem_freq.extend([freq[key]])
    elem_fourire.extend([value])

for i in range(len(out)):  
    print elem_freq[i], elem_fourire[i] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:23:16.737

```
import numpy as np

fourire = np.array(fourire)
freq = np.array(freq)

ix = fourire.argsort(kind='heapsort')[-3:][::-1]

for a, b in zip(freq[ix],fourire[ix]):
    print a, b 
```

印刷

```
2.0 27.0
9.0 25.0
4.0 22.0 
```

如果您想使用**heapq**而不是**numpy**，对上面的代码稍作修改会产生：

```
ix = heapq.nlargest(3,range(len(freq)),key=lambda x: fourire[x])
for x in ix:
    print freq[x], fourire[x] 
```

结果相同的输出

# python - 如何在通过将 txt 文件加载到 scipy 程序中形成的图上以特定间隔插入点？

> ID：16070219
> 
> 赞同：4
> 
> 时间：2013-04-17T21:03:24.683
> 
> 标签：python, matlab, numpy, matplotlib, interpolation

我有一个包含两列 x 和 y 的文本文件。我在 scipy 中使用以下程序绘制了它们，如下所示。

```
import matplotlib.pyplot as plt

with open("data.txt") as f:
    data = f.read()

data = data.split('\n')

x = [row.split(' ')[0] for row in data]
y = [row.split(' ')[1] for row in data]

fig = plt.figure()
ax1 = fig.add_subplot(111)

ax1.set_title("Plot B vs H")    
ax1.set_xlabel('B')
ax1.set_ylabel('H')

ax1.plot(x,y, c='r', label='the data')

leg = ax1.legend()

plt.show() 
```

现在我想知道如何在同一张图上以大约 0.1 的增量`x=1`插入几个点？`x=5`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T21:11:09.843

您可以使用以下方法创建函数[`scipy.interp1d`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp1d.html)：

```
import numpy as np
from scipy import interpolate

data = np.genfromtxt('data.txt')

x = data[:,0]  #first column
y = data[:,1]  #second column

f = interpolate.interp1d(x, y)

xnew = np.arange(1, 5.1, 0.1) # this could be over the entire range, depending on what your data is
ynew = f(xnew)   # use interpolation function returned by `interp1d`

fig = plt.figure()
ax1 = fig.add_subplot(111)

ax1.set_title("Plot B vs H")    
ax1.set_xlabel('B')
ax1.set_ylabel('H')

ax1.plot(x,y, c='r', label='the data')
ax1.plot(xnew, ynew, 'o', label='the interpolation')

leg = ax1.legend()
plt.show() 
```

如果要*平滑*数据，可以使用[`univariatespline`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.UnivariateSpline.html)，只需将`f = interpolate...`行替换为：

```
f = interpolate.UnivariateSpline(x, y) 
```

要更改它的平滑程度，您可以使用`s`和`k`选项：

```
f = interpolate.UnivariateSpline(x, y, k=3, s=1) 
```

如[文档中所述](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.UnivariateSpline.html)

# ruby - 如何使用 Ruby 和 Nokogiri 删除缺少孩子的节点

> ID：16070220
> 
> 赞同：3
> 
> 时间：2013-04-17T21:03:26.353
> 
> 标签：ruby, nokogiri, nodes

我想删除缺少特定子节点的节点。

例如，我想在`<release>`这里删除第二个节点：

```
<release>
 <artist>Johnny Cash</artist>
 <album>Live from Folsom Prison</album>
</release>
<release>
 <artist>Johnny Cash</artist>
</release> 
```

我试过: `doc.xpath("//Release[album='']").remove`，但这显然不起作用，因为我需要找到专辑不存在的节点而不是空的节点。

我需要的替代方法是为运行此命令时不包含专辑的任何节点返回类似“空”的内容`albums= doc.search('release/album').map{ |t| t.text}`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T23:47:36.823

你会这样做：

```
doc.xpath('//release[not(album)]').remove 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T06:26:47.083

```
doc = Nokogiri::HTML::DocumentFragment.parse(html)
node_set = doc.search('release')
del_node = node_set.select { |n| n.last_element_child.name != 'album'}.first
node_set.delete(del_node) 
```

或者

```
doc = Nokogiri::HTML(html)
doc.xpath('//release').delete(doc.xpath('//release').last) 
```

# spring-mvc - Spring 3.2 MVC——没有出现验证错误

> ID：16070230
> 
> 赞同：0
> 
> 时间：2013-04-17T21:04:33.103
> 
> 标签：spring-mvc, spring-validator

我正在尝试为我的 Spring 表单运行一个验证器类，但我的错误没有显示在我的页面上。我是 Spring 验证的新手，所以这里无疑存在一些错误。这是我的表格。（顺便说一句，Eclipse 会在以下行中发布警告`form:error`：“List 是原始类型。对泛型类型 List 的引用应该被参数化。”）

```
<form:form commandName="bulletin" method="post" action="processBulletin">
    <table>
        <tr>
            <td>Name:</td>
            <td><form:errors path="name" /></td>
            <td><form:input path="name" maxlength="30" /></td>
        </tr>
        <tr>
            <td>Subject:</td>
            <td><form:errors path="subject" /></td>
            <td><form:input path="subject" maxlength="50" /></td>
        </tr>
        <tr>
            <td valign="top">Message:</td>
            <td><form:errors path="note" /></td>
            <td><form:textarea path="note" cols="70" rows="20" /></td>
        </tr>
        <tr>
            <td><input type="submit" /></td>
            <td>&nbsp;</td>
        </tr>
    </table>
</form:form> 
```

这是我的控制器类。我从这里调用验证类，我不确定这是否是正确的做法，所以如果不是，请随意说。

```
@RequestMapping(value = "/processBulletin", method = RequestMethod.POST)
public String processBulletin(
        @ModelAttribute("bulletin") Bulletin bulletin, BindingResult result) {
    final BindException errors = new BindException(bulletin, "bulletin");

    bulletinValidator.validate(bulletin, errors);
    if (errors.hasErrors()) {
        return "redirect:/approvedBulletins";
    } else {
        // rest of method
    }

    return "redirect:/approvedBulletins";
} 
```

这是我的验证课。

```
 @Override
    public boolean supports(Class<?> cls) {
        return Bulletin.class.isAssignableFrom(cls);
    }

    @Override
    public void validate(Object target, Errors errors) {
        ValidationUtils.rejectIfEmptyOrWhitespace(errors, "subject", "Subject is required");
        ValidationUtils.rejectIfEmptyOrWhitespace(errors, "name", "Name is required");
        ValidationUtils.rejectIfEmptyOrWhitespace(errors, "note", "Message is required");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T05:28:30.317

当您遇到错误时，请尝试返回`view name`而不是重定向。`return "redirect:/approvedBulletins";`

# java - 数组排序打印和求和

> ID：16070231
> 
> 赞同：0
> 
> 时间：2013-04-17T21:04:37.900
> 
> 标签：java, arrays, sorting, printing

什么是最简单的方法来打印这个数组分解成每个手机作为产品编号，名称部门等，然后重新打印按产品名称排序的相同信息。我已经尝试了几种不同的方法，并且已经过了作业的交期，但仍然需要为本周末即将到来的作业弄清楚。当我尝试在 MobilePhone 类上实现比较器时，它迫使我将其设为抽象或使用 @override，但我无法弄清楚要覆盖的位置或内容以使其工作，因为抽象类会导致许多其他问题。

```
package InventoryPro2;

import java.util.*;

class MobilePhone {

    private double productNumber; // Variables
    private String name;
    private String department;
    private double unitsInStock;
    private double unitPrice;

    public MobilePhone() {
        this(0.0, "", "", 0.0, 0.0);
    }

    public MobilePhone(double productNumber, String name, String department,
            double unitsInStock, double unitPrice) { //assign variables
        this.productNumber = productNumber;
        this.name = name;
        this.department = department;
        this.unitsInStock = unitsInStock;
        this.unitPrice = unitPrice;
    }

    public double getproductNumber() { // retrieve values
        return productNumber;
    }

    public String getname() {
        return name;
    }

    public String getdepartment() {
        return department;
    }

    public double getunitPrice() {
        return unitPrice;
    }

    public double getunitsInStock() {
        return unitsInStock;
    }

    public void setproductNumber(double productNumber) {
        this.productNumber = productNumber;
    }

    public void setname(String name) {
        this.name = name;
    }

    public void setdepartment(String department) {
        this.department = department;
    }

    public void setunitPrice(double unitPrice) {
        this.unitPrice = unitPrice;
    }

    public void setunitsInStock(double unitsInStock) {
        this.unitsInStock = unitsInStock;
    }

    public double gettotalInv() {
        return getunitPrice() * getunitsInStock();
    }
}

public class InventoryPro2 {

    MobilePhone mobilephone = new MobilePhone();

    public static void main(String args[]) {

        System.out.println("Mobile Phone Inventory Program");
        System.out.println();//skips a line

        MobilePhone[] phones = new MobilePhone[5];

        phones[0] = new MobilePhone();
        phones[0].setproductNumber(1);
        phones[0].setname("Motorola");
        phones[0].setdepartment("Electronics");
        phones[0].setunitPrice(150.10);
        phones[0].setunitsInStock(98);

        phones[1] = new MobilePhone();
        phones[1].setproductNumber(2);
        phones[1].setname("Samsung");
        phones[1].setdepartment("Electronics");
        phones[1].setunitPrice(199.99);
        phones[1].setunitsInStock(650);

        phones[2] = new MobilePhone();
        phones[2].setproductNumber(3);
        phones[2].setname("Nokia");
        phones[2].setdepartment("Electronics");
        phones[2].setunitPrice(200.25);
        phones[2].setunitsInStock(125);

        phones[3] = new MobilePhone();
        phones[3].setproductNumber(4);
        phones[3].setname("LG");
        phones[3].setdepartment("Electronics");
        phones[3].setunitPrice(100.05);
        phones[3].setunitsInStock(200);

        phones[4] = new MobilePhone();
        phones[4].setproductNumber(5);
        phones[4].setname("IPhone");
        phones[4].setdepartment("Electronics");
        phones[4].setunitPrice(299.99);
        phones[4].setunitsInStock(150);

        System.out.println("Order of inventory before sorting:");
        System.out.println();

    }
} 
```

（此外，从数组的每个部分中提取一条信息的最佳方法是什么，例如要打印的 totalInv 和所有这些数字的总和？）我这里是否有不必要的代码，或者到目前为止我是否做对了所有事情? 我不得不说，到目前为止，以在线格式学习这种编码语言并不是一次非常愉快的经历。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:19:44.857

1 - 打印`MobilePhone`类的内容：覆盖默认`toString`方法，如下所示：

```
@Override
public String toString() {
    return "MobilePhone [productNumber=" + productNumber +
    ", name=" + name + ']'; // add more info if needed
} 
```

2 - 允许按名称排序：让`MobilePhone`类实现`Comparable`如下接口：

```
class MobilePhone implements Comparable {
  ...

    @Override 
    public int compareTo(Object o) {
        MobilePhone m = (MobilePhone) o; 
        return (this.name.compareTo(o.name));
    }
} 
```

**编辑：**要打印您的`MobilePhone`对象数组，您可以执行以下操作：

```
System.out.printf("Phones: %s%n", Arrays.toString(phones)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:24:28.757

这是按名称排序的方法

```
import java.util.Arrays;
import java.util.Comparator;

public class AppInventoryPro2 {

    public static void main(String... args) {

        System.out.println("Mobile Phone Inventory Program");
        System.out.println();// skips a line

        MobilePhone[] phones = new MobilePhone[5];

        phones[0] = new MobilePhone();
        phones[0].setproductNumber(1);
        phones[0].setname("Motorola");
        phones[0].setdepartment("Electronics");
        phones[0].setunitPrice(150.10);
        phones[0].setunitsInStock(98);

        phones[1] = new MobilePhone();
        phones[1].setproductNumber(2);
        phones[1].setname("Samsung");
        phones[1].setdepartment("Electronics");
        phones[1].setunitPrice(199.99);
        phones[1].setunitsInStock(650);

        phones[2] = new MobilePhone();
        phones[2].setproductNumber(3);
        phones[2].setname("Nokia");
        phones[2].setdepartment("Electronics");
        phones[2].setunitPrice(200.25);
        phones[2].setunitsInStock(125);

        phones[3] = new MobilePhone();
        phones[3].setproductNumber(4);
        phones[3].setname("LG");
        phones[3].setdepartment("Electronics");
        phones[3].setunitPrice(100.05);
        phones[3].setunitsInStock(200);

        phones[4] = new MobilePhone();
        phones[4].setproductNumber(5);
        phones[4].setname("IPhone");
        phones[4].setdepartment("Electronics");
        phones[4].setunitPrice(299.99);
        phones[4].setunitsInStock(150);

        System.out.println("Order of inventory before sorting:");
        System.out.println(Arrays.toString(phones));

        Arrays.sort(phones, new Comparator<MobilePhone>() {
            @Override
            public int compare(MobilePhone mp1, MobilePhone mp2) {
                return mp1.getname().compareTo(mp2.getname());
            }
        });

        System.out.println("Order of inventory after sorting by name:");
        System.out.println(Arrays.toString(phones));
    }
}

class MobilePhone {

    private double productNumber; // Variables
    private String name;
    private String department;
    private double unitsInStock;
    private double unitPrice;

    public MobilePhone() {
        this(0.0, "", "", 0.0, 0.0);
    }

    public MobilePhone(double productNumber, String name, String department,
            double unitsInStock, double unitPrice) { // assign variables
        this.productNumber = productNumber;
        this.name = name;
        this.department = department;
        this.unitsInStock = unitsInStock;
        this.unitPrice = unitPrice;
    }

    public double getproductNumber() { // retrieve values
        return productNumber;
    }

    public String getname() {
        return name;
    }

    public String getdepartment() {
        return department;
    }

    public double getunitPrice() {
        return unitPrice;
    }

    public double getunitsInStock() {
        return unitsInStock;
    }

    public void setproductNumber(double productNumber) {
        this.productNumber = productNumber;
    }

    public void setname(String name) {
        this.name = name;
    }

    public void setdepartment(String department) {
        this.department = department;
    }

    public void setunitPrice(double unitPrice) {
        this.unitPrice = unitPrice;
    }

    public void setunitsInStock(double unitsInStock) {
        this.unitsInStock = unitsInStock;
    }

    public double gettotalInv() {
        return getunitPrice() * getunitsInStock();
    }

    @Override
    public String toString() {
        return "MobilePhone [productNumber=" + productNumber + ", name=" + name
                + ", department=" + department + ", unitsInStock="
                + unitsInStock + ", unitPrice=" + unitPrice + "]";
    }
} 
```

# c# - SQL Server 十进制 - 为什么我的十进制值只捕获小数点后两位小数？是的，它是十进制 (18,5)

> ID：16070232
> 
> 赞同：4
> 
> 时间：2013-04-17T21:04:40.877
> 
> 标签：c#, sql, sql-server

我首先要说我的十进制数据类型定义为十进制（18,5）：

![在此处输入图像描述](https://i.stack.imgur.com/7M8sd.jpg)

在我的应用程序到达数据库之前来自我的应用程序的值是：

![在此处输入图像描述](https://i.stack.imgur.com/3z7jE.jpg)

到目前为止，您可以看到，一切看起来都很好。我应该在我的数据库表中看到 column 的值 0.47588 `Capsule105`。但是，在我的记录保存到数据库后，我查看它插入的记录——看看最后一行：

![在此处输入图像描述](https://i.stack.imgur.com/yVxwH.jpg)

该值不应在小数点后两位后停止。它应该到我数据库中定义的最后一个小数位，对吗？

这是我的`InsertOrUpdate`方法（与 VS 中的模板一起提供）：

```
public void InsertOrUpdate(CalculatedResults calculatedresults)
{
    if (calculatedresults.Pk == default(int)) {
        // New entity
        context.CalculatedResults.Add(calculatedresults);
    } else {
        // Existing entity
        context.Entry(calculatedresults).State = EntityState.Modified;
    }
} 
```

我正在使用 Code First 方法并从我的模型中生成我的数据库。

任何想法这里发生了什么？？？请帮忙！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T21:10:51.977

我有一个类似的问题，所以也许这会有所帮助：我必须在`DbContext`. 就我而言，数据库中的字段是 type `Money`，而 models 属性的 C# 类型是`Decimal`：

```
modelBuilder.Entity<MyEntity>().Property(e => e.Value).HasColumnType("Money"); 
```

不知道，但是如果您将其更改为“十进制”甚至“十进制（18,5）”，如果可能的话，它可能会起作用。或者拿起 ta.speot 的评论：

```
modelBuilder.Entity<MyEntity>().Property(e => e.Value)
            .HasColumnType("Decimal")
            .HasPrecision(18, 5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-30T11:24:33.090

@迈克马克

您可以像下面更改DBContext 类中**的 OnModelCreating**方法一样解决此问题

`protected override void OnModelCreating(DbModelBuilder modelBuilder) { modelBuilder.Entity<Table1>().Property(a => a.price).HasPrecision(18, 5); }`

# node.js - nodejs-native-mongodb 的 runCommand 等效项

> ID：16070233
> 
> 赞同：6
> 
> 时间：2013-04-17T21:04:43.923
> 
> 标签：node.js, mongodb, node-mongodb-native

我正在尝试从 nodejs 中利用 MongoDB 2.4 实验性文本搜索功能。唯一的问题是，据我所知，本机 nodejs mongo 驱动程序似乎不支持集合级 runCommand。

Mongo shell 语法如下所示：

```
db.collection.runCommand( "text", { search : "Textvalue" } ); 
```

它出现了一个 db.command / db.executeDbCommand 函数，但我不知道如何选择一个集合并使用它运行文本命令（如果可能的话），因为它需要在集合级别而不是数据库级别。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-17T22:35:14.933

我设法通过结合 Asya Kamsky 的评论，通过利用

```
this.db.command({text:"collection" , search: "phrase" }). 
```

问题是它没有像标准结果那样返回，因此 toArray() 调用失败。相反，我将回调直接放在里面：

```
this.db.command({text:"collection" , search: "phrase" }, function(err, cb){ 
```

# javascript - Chrome 不会提醒 cookie，但 Firefox 会

> ID：16070241
> 
> 赞同：3
> 
> 时间：2013-04-17T21:05:14.733
> 
> 标签：javascript, google-chrome, cookies, alert

```
<html>
<head>
<title>cookie</title>
<script type = "text/javascript">
var user_name;
var del = new Date();
document.write(del.toGMTString());

function check() { 
    user_name = document.getElementById("user").value;
    del.setFullYear(del.getFullYear() + 1);
    document.cookie = escape("name") + "=" + escape(user_name) + ";expires = "+ del.toGMTString();
    alert(document.cookie);
}

</script>
</head>
<body>
<form>
username : <input type = "text" id = "user"></input>
<input type = "button" value = "enter" onClick = "check()"></input>
</form>

</body>

</html> 
```

Cookie 不想在 chrome 中提醒，但它在 Firefox 中有效，但只显示用户名。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T14:33:38.277

是的，我知道这是一个相当老的问题，但我在谷歌上搜索了同样的问题。

我是一名渗透测试员，所以在测试 XSS 和各种其他与 Javascript 相关的攻击时，警报是我想使用的一种很常见的方法。

然而，在 Chrome 中，当它想要工作时似乎很断断续续。

这是一个可能有帮助的答案：

> window 是 DOMWindow 的一个实例，通过为 window.alert 设置一些内容，正确的实现被“隐藏”，即当访问 alert 时，它首先在 window 对象上查找它。通常这是找不到的，然后它会沿着原型链向上找到本机实现。但是，当手动将 alert 属性添加到 window 时，它会立即找到它，并且不需要沿着原型链上升。使用 delete window.alert 您可以删除窗口自己的属性并再次公开警报的原型实现。“Matty F”引用 - [alert() 在 Chrome 中不起作用](https://stackoverflow.com/questions/6184169/alert-not-working-in-chrome)

我希望这有帮助！

**[编辑]** 此外，Chrome 内置了 XSS 过滤器，因此当您进行可疑活动时，例如警告 document.cookie 等，Chrome 会过滤掉它认为是恶意的内容。如果您使用 --disable-xss-audit 参数启动 Chrome，有一些方法可以关闭它，但是，在我看来，这似乎比它的价值更麻烦。

# charts - 是否可以使用 Highcharts 创建气泡极坐标图？

> ID：16070242
> 
> 赞同：1
> 
> 时间：2013-04-17T21:05:18.537
> 
> 标签：charts, highcharts

我正在尝试使用 Highcharts 创建气泡极坐标图，这可能吗？文档对此并不清楚，到目前为止我的尝试还没有成功。

它看起来像这样：

![气泡极坐标图示例](https://i.stack.imgur.com/GWQit.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:38:37.823

你试过什么？这只是带有系列气泡的极坐标图，请参阅：http: [//jsfiddle.net/ZYKQG/](http://jsfiddle.net/ZYKQG/)

```
 series: [{
        type: 'bubble',
        name: 'bubble',
        data: [[100,2,3.3],[45,5,3.2],[225,5,3.1]],
        pointPlacement: 'between'
    }] 
```

# ios - 关闭最后一个选项卡 ViewController

> ID：16070246
> 
> 赞同：0
> 
> 时间：2013-04-17T21:05:22.830
> 
> 标签：ios, xcode, uitabbarcontroller

我有一个 UITabBarController，我可以通过以下方式添加和删除 UIView，没有任何问题：

**添加**

```
FileTabViewController* newTab = [[FileTabViewController alloc] initWithNibName:@"File" bundle:nil];
NSMutableArray* array = [NSMutableArray arrayWithArray:bar.viewControllers];
[array addObject:newTab];
[bar setViewControllers:array animated:YES];
[bar setSelectedIndex:bar.viewControllers.count-1]; 
```

**删除**（在 FileTabViewConroller.m 中）

```
NSMutableArray* newArray = [NSMutableArray arrayWithArray:self.tabBarController.viewControllers];
[newArray removeObject:self];
[self.tabBarController setViewControllers:newArray animated:YES]; 
```

这段代码完全符合我的预期，但存在我无法解释的异常情况。当应用程序启动并且视图控制器数组为空（nil）时，（如您所料）选项卡视图控制器中没有显示任何视图。当我添加视图时，选项卡会正确增加，但是当我删除最后一个（即计数 1 的索引 0）时，视图*似乎*保持加载状态，最后一个选项卡上的按钮和标签仍然可见 - 似乎没有办法将所有内容移回应用程序启动时的“无”状态 - 尽管控制器上实际上没有显示任何选项卡。

启动（如您所料）

![图片](https://i.stack.imgur.com/LQybX.png)

打开和关闭选项卡（这是我感到困惑的地方） - 你看到选项卡消失但视图仍然打开......？

![图片](https://i.stack.imgur.com/5Pvi8.png)

提前感谢您的任何意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:15:02.913

我还没有测试过这个假设，但我想知道它是否在``moreNavigationController`这里发挥作用。在添加任何选项卡之前检查其值，并在删除最后一个选项卡后再次检查。还要看一下the和的`visibleViewController`属性。`moreNavigationController``UITabBarController`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:36:07.377

我制作了一个小测试应用程序，我看到了与您看到的相同的行为。我不知道这是否是选项卡栏控制器删除控制器和视图的方式的意外结果，或者 Apple 是否打算发生这种情况 - 毕竟，你为什么想要黑屏？某些东西似乎保留了指向最后一个视图控制器的强指针，因为如果我有一个删除控制器的按钮（并且它是最后一个），我仍然可以单击该按钮并执行操作。第一次单击时，选项卡栏控制器仍将该控制器列为选定控制器，但如果再次单击，选定控制器为零，但我的视图控制器仍然存在。

摆脱视图的解决方案很简单，只需在从数组中删除最后一个控制器后从其父视图中删除视图。

```
[self.view removeFromSuperview]; 
```

但是，这并没有摆脱视图控制器。有些东西仍然持有对它的引用，到目前为止，我还没有发现是什么在做那件事。

# php - 数组错误地返回空

> ID：16070248
> 
> 赞同：0
> 
> 时间：2013-04-17T21:05:25.487
> 
> 标签：php, arrays, return

我对 php 有点陌生，所以仍在学习 in's 和 out's。我实际上在做什么的细节大多是无关紧要的。

下面的代码旨在连接到数据库，执行查询，然后返回一个填充了相应行的数组。目前该数组在搜索器函数中打印时有数据，而当我稍后检查它时它是空的。

```
function searcher ($connector, $select, $from, $where)
{
    $profile = array();

    $query = $connector->prepare('SELECT ' . $select . ' FROM ' . $from . ' WHERE ' . $where);
    $query->execute();

    while ($row = $query->fetch(PDO::FETCH_ASSOC))
    {
        $profle[] = $row;
    }

    print_r($profle);
    return $profile;
}

$connector = db_connection ('localhost', 'sakila', 'root', 'admin');

$search[] = searcher($connector, '*', 'actor', 'actor_id = 1 OR actor_id = 2');
echo "<br><br>";
print_r($search); 
```

输出如下：

> 数组（[0] => 数组（[actor_id] => 1 [first_name] => PENELOPE [last_name] => GUINESS [last_update] => 2006-02-15 04:34:33）[1] => 数组（ [actor_id] => 2 [first_name] => NICK [last_name] => WAHLBERG [last_update] => 2006-02-15 04:34:33 ) )
> 
> 数组 ( [0] => 数组 ( ) )

知道我做错了什么吗？我相当肯定它很简单，因为没有发生任何复杂的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:08:29.203

您的`$profile`变量拼写错误。大概就是这个原因吧。

不过，该代码是完全合法的，这就是您没有从解析器收到任何警告或通知的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:14:38.090

事实上，您的**搜索**器函数中有 2 个不同的数组 - **$profile**和**$profile**。在函数中，你用值填充**$profile**并输出它。这就是为什么你在第一种情况下得到输出。但是，您的函数返回空数组**$profile**，您在主程序中输出。这就是为什么你在第二种情况下得到空数组的原因。

# report-viewer2010 - 如何在 VS 2010 的 Report Viewer 中实现交互式排序？

> ID：16070250
> 
> 赞同：0
> 
> 时间：2013-04-17T21:05:29.373
> 
> 标签：report-viewer2010

我在 Visual Studio 2010 中使用报表查看器创建了一个报表。请帮助我了解如何为报表中的列实现交互式排序（最终用户必须能够排序。排序图标必须显示在列上）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:19:40.413

我相信您在设计器中进入报告，右键单击要添加交互式排序的列，然后转到表/tablix 属性，应该有一个“交互式排序”选项卡或带有复选框的“排序”选项卡以启用交互式排序。（抱歉不确定，来自内存atm）

（更多信息：http: [//msdn.microsoft.com/en-us/library/cc627509.aspx](http://msdn.microsoft.com/en-us/library/cc627509.aspx)和[http://www.perpetuumsoft.com/ForumTopic.aspx?lang=en&topic_id=2444&forum_id=56](http://www.perpetuumsoft.com/ForumTopic.aspx?lang=en&topic_id=2444&forum_id=56)）

# google-custom-search - 使用过滤实现 Google 自定义搜索

> ID：16070251
> 
> 赞同：-2
> 
> 时间：2013-04-17T21:05:33.120
> 
> 标签：google-custom-search

我必须实现一个包含多个 google 支持的搜索表单的页面。我们从 Google 获得了 CSE 的许可证，情况是这样的：

*   我有一个搜索表单，它出现在每个页面的顶部，它执行简单的搜索并将结果显示在单独的页面中。这行得通。

*   我有一个特定的页面，此外，它还显示了另外两种搜索表单：一个应该按类别过滤文章，另一个应该按类别过滤文章并将结果限制在某个月份。为此，我在每篇文章中添加了一个带有发布日期的元键。

不过，我在文档中有点迷失了：如果我添加

```
<gcse:searchbox-only resultsUrl="/[site]/stat/search/google_search_results.html"></gcse:searchbox-only></div> 
```

到页面，我无法过滤结果。如果我开始使用 CustomSearchObject，我看不到在不同页面上显示结果的选项。

对于基于类别的过滤，我尝试附加

```
more:pagemap:metatags-taxonomies:news 
```

到结果页面 URL 中的查询参数，它确实有效，但我不明白如何将其注入表单。对于基于日期的限制，我尝试添加

```
&sort=more:pagemap:metatags-pubdate:r:YYYYMMDD:YYYYMMDD 
```

但无法使其工作。获取 XML 确实有效：

```
http://www.google.com/search?q=intitle:[mysite]%20more:pagemap:metatags-taxonomies:News&sort=metatags-pubdate:r:20120401:20120830&cx=[mykey]client=google-csbe&output=xml 
```

返回正确的结果。

有没有假设这么多的文档？我发现的只是没有上下文的代码片段。我已经检查过[Filtering and sorting](https://developers.google.com/custom-search/docs/structured_search?hl=es#structured_search_element)、[Custom Search Element Control API](https://developers.google.com/custom-search/docs/element#cse-element)，当然还有这个站点，但我无法将所有部分放在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T19:17:51.990

我设法实现了我想要的。在搜索页面中，我构建了指向我的结果页面的简单表单（如果您必须实施 google 品牌，这可能不可行），并在结果页面中输入以下内容：

*   （在`<head>`）

    ```
    <script src="http://www.google.com/jsapi"></script>
    <script>
    // This function extracts the query from the URL (if GET) or builds a search query.
    // Code removed to simplify the example.
    function buildQuery () {
        return '<?php echo $_POST['q'];?> more:pagemap:metatags-taxonomias:News'); // injecting the taxonomy metatag filter
    }

    google.load('search', '1', {language : 'es'});
    google.setOnLoadCallback(function() {
        var customSearchOptions = {};
        customSearchOptions[google.search.Search.RESTRICT_EXTENDED_ARGS] = {'sort':'metatags-pubdate:d,metatags-pubdate:r:<?php echo $_POST['startdate'];?>:<?php echo $_POST['enddate'];?>'}; // these come from the POST request, are processed earlier in the script.
        var customSearchControl = new google.search.CustomSearchControl('XXXXXXXXXXX', customSearchOptions); // Put your own App key here.
        customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);

        var drawOptions = new google.search.DrawOptions();
        drawOptions.enableSearchResultsOnly(); // I don't want the search box here

        customSearchControl.draw('cse-results-press', drawOptions);
        var query = parseQuery();
        if (query) {
            customSearchControl.execute(query);
        }
    }, true);
    </script> 
    ```

*   在`<body>`：

    ```
    <div id="cse-results-press">Loading...</div> 
    ```

# sql - MS Access SQL 查找值首次出现的年份

> ID：16070252
> 
> 赞同：1
> 
> 时间：2013-04-17T21:05:37.953
> 
> 标签：sql, ms-access, distinct

您好我正在尝试对物种数据库进行查询。我想查询唯一值，但也想找到第一次发现物种的年份。

到目前为止，我有这个：

```
SELECT DISTINCT [Genus_HeTR] & " " & [Species_HeTR] AS Species
FROM HeTR_Rec
WHERE [Species_HeTR] <> "sp."
UNION SELECT DISTINCT [Genus_HeOP] & " " & [Species_HeOP] AS Species
FROM HeOP_Rec
WHERE [Species_HeOP] <> ""
AND [Species_HeOP] <> "sp."; 
```

我正在连接属名和物种名，并从两个不同的表中添加数据（因此是 UNION）。这提供了一个物种列表，但我想知道该物种在该站点出现的年份。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:23:02.043

我会冒险猜测您的两个源表都包含一个日期/时间字段，该字段存储每个观察的日期。如果是这样，您可以`UNION`从 2 个表中获取数据，并将其用作查询中的子查询源`GROUP BY`，您可以在其中得出每个物种的最小观察年份。

```
SELECT
    sub.Species,
    Min(sub.observation_year) AS first_sighting_year
FROM
    (
        SELECT
            [Genus_HeTR] & " " & [Species_HeTR] AS Species,
            Year(observation_date) AS observation_year
        FROM HeTR_Rec
        WHERE [Species_HeTR] <> "sp."
        UNION ALL
        SELECT
            [Genus_HeOP] & " " & [Species_HeOP] AS Species,
            Year(observation_date) AS observation_year
        FROM HeOP_Rec
        WHERE [Species_HeOP] <> ""
        AND [Species_HeOP] <> "sp."
    ) AS sub
GROUP BY sub.Species; 
```

# asp.net - SQL Server 2008 R2 存储过程的优先级或 QoS

> ID：16070255
> 
> 赞同：1
> 
> 时间：2013-04-17T21:05:53.970
> 
> 标签：asp.net, stored-procedures, ado.net, sql-server-2008-r2

是否有任何方法可以设置 SQL Server 2008 R2 中存储过程的服务质量 (QoS) 或优先级？

我有一个 ASP.NET 4.0 Web 应用程序，它公开了一些报告，这些报告触发了一些长时间运行的非关键报告类型存储过程。

这个相同的应用程序和数据库支持一些实时数据馈送（反向 ajax）和其他关键过程。

我的问题是这些长时间运行的非关键存储过程有时会对我的关键进程的性能产生不利影响，尤其是当长时间运行的 Sprocs 或罕见的死锁事件发生超时时。

是否有任何方法可以在存储过程上设置优先级或 QOS，以尽量减少非关键存储过程对我的关键存储过程的影响？

如果 SQL Server 不支持此功能，是否可以在我的数据访问层 (ADO.NET) 的应用程序级别执行任何操作来设置优先级，可能使用不同的连接字符串？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:29:20.770

这取决于您的报告过程*为何*会对实时流程产生不利影响。如果是因为资源争用（CPU 等），那么您*也许*可以做点什么。

但是如果是因为锁争用（阻塞/死锁），那么就没有简单的外部修复，你必须要么 1）改变报告过程本身的工作方式，要么 2）重新安排/重新配置事情，这样他们就不会冲突，或 3) 忍受它。

# php - 在互联网上获取用户的完整地址以进行传输

> ID：16070256
> 
> 赞同：1
> 
> 时间：2013-04-17T21:05:55.443
> 
> 标签：php, mysql, apache

有没有办法使用 php 在 Internet 上获取用户的完整地址，以便可以将地址发送到 Internet 上另一台计算机上的客户端应用程序并使其能够直接传输文件？

我正在尝试做的是：我在 vb.net 中组合了一个桌面应用程序，它将在局域网上的计算机之间交换实时网络摄像头馈送。但是，我想让用户能够通过互联网交换提要，但我可以使用的唯一服务器是简单的灯服务器。我想用 php 编写一个脚本，桌面应用程序可以定期连接到，以便服务器可以确认计算机的可用性以及维护它的物理地址。然后，当一台计算机的桌面网络摄像头应用程序想要连接到另一台计算机时，它可以检查 php 服务器以确保它可用并获取它的物理地址以了解将 udp 数据包发送到哪里。

另外，如果有人对如何处理这种需求有更好的建议，我会尝试任何可能有效的方法。我是救护车服务的护理人员，喜欢玩代码，我的老板希望能够在我们的卡车上使用我们的移动互联网连接，以便能够为当地的创伤中心提供实时信息，并在治疗期间与创伤外科医生互动我们的交通工具。到目前为止，我取得了很大的进步，但这就是我陷入困境的地方。任何建议将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:27:06.950

你看过[OpenTok](http://www.tokbox.com/opentok/)吗？它是一个基于 javascript 的视频聊天解决方案。该服务需要花钱，但非常实惠（每月免费 25,000 分钟）

# sql - ORA 00918 sql 中的内部连接

> ID：16070260
> 
> 赞同：1
> 
> 时间：2013-04-17T21:05:58.650
> 
> 标签：sql, oracle, syntax, inner-join

我有这个查询：

```
select carrier_id, order_id,aircraft_id,quantity 
from orderline 
innerjoin purchaseorder on orderline.order_id = purchaseorder.carrier_id; 
```

我得到了模棱两可的错误，我知道我必须使用别名，但它不起作用，即：

```
select carrier_id as cID, order_id as OID,aircraft_id,quantity 
from orderline 
innerjoin purchaseorder on orderline.order_id as OID = purchaseorder.carrier_id as cID 
```

它说无效的关系运算符？

谢谢你们的帮助：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:08:51.940

你需要一个空间在你的`INNER JOIN`. 不是`INNERJOIN`。

```
 select carrier_id, order_id,aircraft_id,quantity 
 from orderline 
 inner join purchaseorder on orderline.order_id = purchaseorder.carrier_id; 
```

此外，正如其他回答者所说，您的列可能定义不明确（每个表中的列名相同），因此您需要在列前加上您的表名 ie( `select orderline.orderid`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:10:22.643

问题是，在您完成 之后`JOIN`，您正在选择一些列。其中一些列可能在两个表上具有相同的名称，您需要指定它是哪一个：

```
select P.carrier_id, O.order_id, O.aircraft_id, P.quantity --use the right prefix
from orderline AS O
inner join purchaseorder AS P
on O.order_id = P.carrier_id; 
```

# html - 视频无法在 Chrome 中加载，但在 Safari 中有效

> ID：16070262
> 
> 赞同：1
> 
> 时间：2013-04-17T21:06:14.397
> 
> 标签：html, google-chrome, html5-video

我需要加载一个 30 秒的 mp4 视频。当我在 Safari 中加载我的 HTML 时，一切正常加载和视频播放；但是，当我在 Chrome 中加载我的 HTML 文件时，视频文件不会加载。我有一个具有相同代码（不同视频）的模板文件，可以在 Chrome 中加载视频。

会不会是视频文件的问题？它是 .mp4，但它没有 H.264 作为编解码器。

这是我的视频 HTML：

```
<section id="video">
    <!--video width = "640" height = "480" autoplay = "false" controls>-->
    <video width = "540" height = "380" controls>
    <source src="video/manchester.mp4"/>
</section> 
```

和 CSS：

```
section #video {
    position: relative;
    float: right;
    width: 50%;
    margin-top: 100px;
} 
```

我使用的是 Mac OS X，我通过 iMovie 导出了视频文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:08:52.463

Safari 将尝试使用 Quicktime 播放所有视频内容，因此它会非常容忍其格式。然而，为了在 Chrome 中播放，文件必须是 H.264 或 WebM。有关支持哪些格式的信息，请参阅此链接：[https ://developer.mozilla.org/en-US/docs/HTML/Supported_media_formats](https://developer.mozilla.org/en-US/docs/HTML/Supported_media_formats)

为获得最佳兼容性，您的视频应至少以 H.264 MP4 和 WebM 格式提供，并确保将 H.264 配置文件保持为 Main 3.1 或类似版本，以确保它可以在移动设备上播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-09T12:04:30.507

将静音添加到视频标签解决了我的问题以及添加 webm 版本

见代码：

```
 <video autoplay poster="img/video/bg-video-1.jpg" id="bgvid" loop muted> 
                <source src="img/video/video.webm" type="video/webm"> 
                <source src="img/video/video.mp4" type="video/mp4">
                <source src="img/video/video.ogg" type="video/ogg">
            </video> 
```

# php - php中的简单未来值计算器问题

> ID：16070265
> 
> 赞同：1
> 
> 时间：2013-04-17T21:06:19.147
> 
> 标签：php

我无法理解为什么我的类 php 程序不起作用。我查看了很多文档，我认为我正确地包含了它，但它说无法在包含上打开流，当我调用该函数时它说它是未定义的，有人可以在这里指出我可能非常简单的错误。这是我的 php 页面

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 

"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<?php include 'C:\xampp\htdocs\program1include.php' ?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Future Value Calculator</title>
</head>

<body>
<form method="post">
Principal <input type="text" name="principal" value="<?php if (isset($_POST['principal'])) echo $_POST['principal']; ?>"><br />
Interest Rate <input type="text" name="rate" value="<?php if (isset($_POST['rate'])) echo $_POST['rate']; ?>"><br />
Years to Invest <input type="text" name="years" value="<?php if (isset($_POST['years'])) echo $_POST['years']; ?>"><br />
<input type='submit' name='Submit' value='Get Future Value.' /><br />
Future Value:
<?php figureValue(); if(isset($futureValue)){
    echo $futureValue;
}
    else
    {
        echo 'Please Fill Out All Fields.';
    }
?>
</form>
</body>
</html> 
```

这是包括在内

```
<?php 
    function figureValue($principal,$rate,$years){

        $futureValue = round($principal * pow(1 + ($rate/100),
        $years), 2);
    }
    ?> 
```

页面输出

警告：include(C:\xampp\htdocs\program1include.php)：无法打开流：第 2 行的 C:\xampp\htdocs\program1php.php 中没有此类文件或目录

警告：include()：在 C:\xampp\htdocs\program1php.php 中打开 'C:\xampp\htdocs\program1include.php' 以包含 (include_path='.;C:\xampp\php\PEAR') 失败第 2 行本金利率投资年份

终值：致命错误：在第 16 行调用 C:\xampp\htdocs\program1php.php 中未定义的函数 figureValue()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:10:51.303

该变量`$futureValue`是函数的局部变量。在那里分配它不会在主程序中设置变量。您需要退回它：

```
function figureValue($principal,$rate,$years){

    $futureValue = round($principal * pow(1 + ($rate/100), $years), 2);
    return $futureValue;
} 
```

您还需要将`$_POST`参数作为参数传递给函数。

```
<?php if (isset($_POST['Submit']) { $futureValue = figureValue($_POST['principle'], $_POST['rate'], $_POST['years']);
    echo $futureValue;
}
    else
    {
        echo 'Please Fill Out All Fields.';
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:11:37.730

如果这两个文件在同一个目录中，只需使用文件名，而不是整个路径。

```
include 'program1include.php' 
```

我完全复制了您的代码并更改了上面的一行并且没有收到任何警告。您不想在脚本 (c:) 中访问文件系统。

检查事项

这两个文件都在同一个目录中。每个文件的命名与您上面的完全相同。（将它们重命名为易于检查的名称）

巴尔马尔是正确的。没有他的编辑，程序仍然无法运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T21:08:45.520

尝试转义包含

`C:\\xampp\\htdocs\\program1include.php`

改变

`<?php include 'C:\xampp\htdocs\program1include.php' ?>`

至

`<?php include 'C:\\xampp\\htdocs\\program1include.php'; ?>`

# jquery - jQuery 加载但未定义

> ID：16070273
> 
> 赞同：2
> 
> 时间：2013-04-17T21:06:47.120
> 
> 标签：jquery, liferay, yepnope

处理 liferay 3.6 遗留项目，无法修改 liferay 配置，通过 IE8/9 访问，并尝试从页面上的 portlet 加载/使用 jQuery 和 UI，但它不工作。

尝试直接加载 jQuery 和 UI，作为一个合并文件，并尝试从 yepnope 和 require 加载；看起来文件加载正常（因为 UI 可以在调试器中看到负载）。例如：

```
<script>
var head = document.getElementsByTagName('head')[0];
var script = document.createElement('script');
script.type = "text/javascript";
script.src = "/pim/scripts/yepnope.js";
head.appendChild(script);
</script>

<script>
yepnope({
  load: ["scripts/jquery-1.9.1.js", "scripts/jquery-ui-1.10.2.custom.js"],
  callback: {
    "jquery-1.9.1.js": function () {
      console.log("jquery loaded!");
    },
    "jquery-ui-1.10.2.custom.js": function () {
      console.log("jquery-ui loaded!");
    }
  }
});
</script> 
```

控制台：日志：jquery 已加载！

SCRIPT5009：“jQuery”未定义

jquery-ui-1.10.2.custom.js，第 6 行字符 1

到目前为止，无论我如何加载这两个文件，都会收到 JQuery 未定义消息

关于我如何让它工作的任何指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T18:50:57.240

终于让这个工作了。

1) 保留将 yepnope.js 附加到 head 的脚本

2) 在加载portlet 期间调用的页面portlet 中的一个脚本中，出现：window.addEventListener("onload", invokeLoad, false);

3) invokeLoad 函数执行 jQuery 的 yepnope 加载，就像问题中的第二个脚本一样。

应该注意，它不适用于版本 1.9.1，但适用于 1.7.2

# ios - Linux APNS 服务器我应该创建哪个证书？

> ID：16070277
> 
> 赞同：1
> 
> 时间：2013-04-17T21:06:58.720
> 
> 标签：ios, linux, push-notification, ssl-certificate, apple-push-notifications

我将使用 linux 服务器进行推送通知。

以下是正确的吗？

1.  生成**linux**服务器的CSR
2.  将文件上传到 Apple 以生成证书
3.  将此cer更改为pem，然后与我的linux私钥pem结合
4.  在我的代码中使用组合 pem

这个对吗？由于我对 Apple 文档感到困惑，我现在只能在我的 mac book 中测试推送通知，而无法在其他服务器上测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:22:21.390

您不必在 linux 服务器上生成 CSR。您可以在任何服务器上使用您创建的`pem`或`p12`文件（使用您的 mac book）。如果您的代码在您的 mac book 上测试时有效，那么它可以在任何服务器上运行。您只需将`pem`or`p12`文件复制到该服务器。

# jquery - 来自 MVC4 的 jQuery 对话框？

> ID：16070279
> 
> 赞同：1
> 
> 时间：2013-04-17T21:07:01.933
> 
> 标签：jquery, asp.net-mvc, razor, asp.net-mvc-4, jquery-dialog

我打算使用“确定...” jquery 对话框。但是在弹出对话框之前调用控制动作。

## 指数

```
<ul class="dropdown-menu">
    @{
          @Html.TryPartial("_actions", model)
          <li> @Html.ActionLink("Edit", "Edit", new {id =model.Id})</li>
           <li class="divider"></li>
           <li>@Html.ActionLink("Delete", "Delete", new {id =model.Id},new { @class = "delete-link" })</li>
      }
      </ul>
   </div> 

    }
  </td>
 </tr>
}
</table>

    <div id="delete-dialog" title="Confirmation" style="display:none">
            <p>Are you sure you want to delete this activity?</p>
    </div>
}

@section Scripts {
          @Styles.Render("~/Content/DataTables/css")
        @Scripts.Render("~/bundles/DataTables") 

    <script type="text/JavaScript">

        $(document).ready(function () {

            $('#volunteerlist').dataTable({
                "bSort": true,
                "bPaginate": false,
                "bAutoWidth": false
            });

            var deleteLinkObj;
            // delete Link
            $(".delete-link").button();

            $('.delete-link').click(function () {
                deleteLinkObj = $(this);  //for future use
                $('#delete-dialog').dialog('open');
                return false; // prevents the default behaviour
            });

            $('#delete-dialog').dialog({
                autoOpen: false,
                width: 400,
                resizable: false,
                modal: true, //Dialog options
                buttons: {
                    "Continue": function () {
                        $.post(deleteLinkObj[0].href, function (data) {  //Post to action
                            if (data == '<%= Boolean.TrueString %>') {
                                deleteLinkObj.closest("tr").hide('fast'); //Hide Row
                                //(optional) Display Confirmation
                            }
                            else {
                                //(optional) Display Error
                            }
                        });
                        $(this).dialog("close");
                    },
                    "Cancel": function () {
                        $(this).dialog("close");
                    }
                },
                show: {
                    effect: "blind",
                    duration: 1000
                },
                hide: {
                    effect: "explode",
                    duration: 1000
                }
            });

        });
    </script> 
```

我关注了这篇[文章](http://ricardocovo.com/2010/09/02/asp-mvc-delete-confirmation-with-ajax-jquery-ui-dialog/)。我不明白为什么在对话框打开之前调用控制器动作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:29:14.630

尝试这个：

```
 var btn = $(".delete-link").button();

 btn.click(function () {
     deleteLinkObj = $(this);  //for future use
     $('#delete-dialog').dialog('open');
     return false; // prevents the default behaviour
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T22:10:35.260

而不是`return false`尝试`preventDefault()`

```
$('.delete-link').click(function (event) {
    event.preventDefault();
    deleteLinkObj = $(this);  //for future use
    $('#delete-dialog').dialog('open');
    // with runtime errors you might not get here and will do normal href behavior
    // return false; // prevents the default behaviour
}); 
```

这是一个与您的代码基本相同的工作[jsfiddle 。](http://jsfiddle.net/fK93b/3/)

# ajax - $.getJSON 不会加载 JSON 数据

> ID：16070284
> 
> 赞同：0
> 
> 时间：2013-04-17T21:07:28.790
> 
> 标签：ajax, json

[http://jsfiddle.net/ADvCJ/124/](http://jsfiddle.net/ADvCJ/124/)在没有 $.getJSON 的情况下工作，所以这告诉我我在使用 $.getJSON 时遇到问题。我到处搜索，找不到解决这个问题的方法。请帮忙！

我注意到它复制了 JSON 中的四个项目的其他事情我如何停止复制它们？

代码

```
 $(document).ready(function() {
    $.getJSON("js/dataPokerPlayers.json", function(data) {
        $.each(pokerplayers, function(i, data){
            $(".tableData tbody").append("<tr><td>" + data.rank + "</td><td>" +     data.name + "</td><td>" + data.earnings + "</td><td>" + data.points + "</td><td>" +     data.totalearnings + "</td></tr>");
        });
    });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:55:18.077

看起来需要进行一些更改。

首先，表格需要`<thead>`围绕标题行。

```
<table class="tableData">
    <thead>
        <tr>
            <th>Rank</th>
            <th width="250">Name</th>
            <th>Earnings</th>
            <th>Points</th>
            <th>Total Earnings</th>
        </tr>
    </thead>
    <tbody></tbody>
</table> 
```

其次，JSON URL 并没有真正返回 JSON。这是常规的 Javascript。`var pokerplayers =`需要从开头`;`删除，从内容末尾删除。

# qt - 尝试重载paintEvent函数时滚动条消失

> ID：16070285
> 
> 赞同：0
> 
> 时间：2013-04-17T21:07:31.153
> 
> 标签：qt, user-interface, qt4, qpixmap, qscrollarea

我有`QLabel`一个`QScrollArea`。当我使用该`setPixmap`功能设置标签的像素图时，滚动条似乎覆盖了整个图像。但是当我尝试重载`paintEvnet`函数并使用 绘制图像时`QPainter::drawImage`，滚动条消失了，为了发现整个图像，我必须调整程序窗口的大小。解决办法是什么？

# c# - 在 MVC 4 中选择表的所有 tr 并使用复选框将其发送到控制器

> ID：16070291
> 
> 赞同：3
> 
> 时间：2013-04-17T21:07:48.303
> 
> 标签：c#, asp.net, asp.net-mvc, razor, asp.net-mvc-4

我想使用复选框来选择多个用户并将结果发送到我的控制器。

起初我只是将移动用户的数量发送给控制器，但有必要发送更多的数量，我需要号码和名称用户，我的控制器和我的视图如下：

例如，会以某种方式发送号码和姓名吗？

```
@using (Html.BeginForm("Enviar", "Home")) {
  <table id="myTable">
    <thead>
      <tr>
        <th>
          <input type="checkbox" />
        </th>
        <th>@Html.DisplayName("Nome")</th>
        <th>@Html.DisplayName("CANCELADO")</th>
        <th>@Html.DisplayName("Numero")</th>
      </tr>
    </thead>
    <tbody>
      @foreach (var item in Model) {
        <tr>
          <td>
            <input type="checkbox" name="CELULAR" value="@item.CELULAR" />
          </td>
          <td name="Nome">@Html.DisplayFor(modelItem => item.NOME)</td>
          <td name="Email">@Html.DisplayFor(modelItem => item.CANCELADO)</td>
          <td name="Celular" value="@item.CELULAR">@Html.DisplayFor(modelItem => item.CELULAR)</td>
        </tr>
      }
    </tbody>   
  </table>
  <input type="submit" value="Selecionar"/> 
} 
```

接收的控制器：

```
[HttpPost]
public ActionResult Enviar(String[] celular) {
   .....
   return View();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T21:41:45.787

发布集合时，您必须正确索引它们。因此，您必须使用`for`循环而不是`foreach`.

另外，为什么您`HttpPost`选择 a`String[]`而不是您的模型？首先将其更改为您的模型类型。

假设您的模型是：`@model List<YourType>`

改变你`HttpPost`的看法：

```
[HttpPost]
public ActionResult Enviar(List<YourType> model) {
   .....
   return View();
} 
```

现在我们将把你改写`foreach`成 a`for`并使用`CheckBoxFor`helper。此外，`HiddenFor`为您希望在帖子中看到的任何属性添加字段：

```
@for (int i = 0; i < Model.Count; i++)
{
    <tr>
      <td>
        @Html.CheckBoxFor(m => m[i].CELULAR)
      </td>
      <td name="Nome">
          @Html.HiddenFor(m => m[i].NOME)
          @Html.DisplayFor(m => m[i].NOME)
      </td>
      <td name="Email">
          @Html.HiddenFor(m => m[i].CANCELADO)
          @Html.DisplayFor(m => m[i].CANCELADO)
      </td>
      <td name="Celular" value="@m[i].CELULAR">
          @Html.DisplayFor(m => m[i].CELULAR)
      </td>
    </tr>
} 
```

# ruby-on-rails - 不使用 Tire::Model::Callbacks 更新轮胎索引

> ID：16070298
> 
> 赞同：3
> 
> 时间：2013-04-17T21:08:20.487
> 
> 标签：ruby-on-rails, elasticsearch, tire

我已经阅读了 Tire 文档，并且知道可以使用 Tire 创建索引并将对象导入 Elasticsearch，而无需使用 ActiveModel 包含。

我想让我的模型文件完全没有任何轮胎映射，而是单独实现它们。

到目前为止，我已经为我的 Member 模型创建了一个索引对象，如下所示：

```
class MemberIndexer
  def initialize(member)
    @member = member
  end

  def attributes
    {
      id: @member.id,
      name: @member.full_name,
      age: @member.age,
      birthday: @member.birthday,
      type: 'member'
    }.to_json
  end

  def self.refresh_index
    Tire.index 'members' do
      delete
      create mappings: {
        member: {
          properties: {
            id: { type: 'integer' },
            name: { type: 'string', boost: 5 },
            age: { type: 'integer' },
            birthday: { type: 'date' }
          }
        }
      }

      Member.find_in_batches do |members|
        import members.map { |m| MemberIndexer.new(m).attributes }
      end
    end
  end
end 
```

这工作正常，索引已创建，我可以正确搜索。我缺少的是可以通过使用包含的回调`Tire::Model::Callbacks`。是否可以使用轮胎更新索引中的单个记录而无需包含`Tire::Model::Callbacks`在模型本身中？

例如，如果我更新 a`Member`我希望能够手动更新成员索引中的相应项目。`_id`在不知道该项目的情况下这可能吗？

我应该只使用 ActiveRecord id 搜索对象，然后在索引上使用更新方法吗？

**更新：** 我对 ES 不是使用实际的 ActiveRecord id 而是通过在 ES 中生成唯一 id 来索引成员这一事实感到困惑，即使我认为我在属性 json 中传递了一个 id。

当我将 ruby​​ 哈希传递给`import`方法时，id 字段得到了尊重，这个问题就消失了，因为我现在可以执行以下操作来更新索引记录：

```
Tire.index('member') do
  store(MemberIndexer.new(@member).attributes)
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T06:53:12.860

[更新回调](https://github.com/karmi/tire/blob/master/lib/tire/model/callbacks.rb)无非就是如下代码

```
after_save do
  update_index
end 
```

因此，如果您要从某个地方调用 @member.update_index ，它将更新该记录的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T23:15:37.183

我不确定你`_id`从你发布的代码中不知道 ,是什么意思`@member.id`，对吧？

但是你可以像这样实现它：

```
def update_es_index!
  Tire.index 'members' do
    store(@member)
  end
end 
```

它将调用[store 方法](https://github.com/karmi/tire/blob/master/lib/tire/index.rb#L120)，该方法将确定要发布到哪个 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:29:09.473

原来问题是在将 Ruby 哈希转换为 JSON 时出现了某种错误翻译。

当我将 Ruby 哈希传递给该`import`方法时，索引记录是使用适当的 ActiveRecord id 创建的，因此`store`当我想更新索引时，我可以使用包含 ActiveRecord id 的属性进行调用。

# c - C 简介：函数声明

> ID：16070299
> 
> 赞同：2
> 
> 时间：2013-04-17T21:08:27.670
> 
> 标签：c, function, debugging, declaration, absolute-value

我想在 ANSI C 中声明一个用于我的代码的函数。我可以在 main() 中使用它之后定义该函数吗？例如我写的一个绝对值函数：谁能告诉我它是否合理？

```
#include <stdio.h>

int main()
{
    double value1 = -5;
    printf("%lf",
           abs(value1));
}

double abs(double number)
{
    if (number < 0) {
        (number * (-1) = number);
    }
    return number;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T21:10:41.257

你需要修复几件事：

```
#include <stdio.h>

double abs(double number); // <<< 1\. prototype here

int main()
{
    double value1 = -5;

    printf("%lf",
           abs(value1));
}

double abs(double number)
{
    if (number < 0) {
        number = number * -1.0; // <<< 2\. fix here
    }
    return number;
} 
```

1.  该`abs`函数需要一个原型，以便编译器在您调用它之前知道它的*函数签名*

2.  你否定的表达`number`是从后到前

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:54:27.517

函数必须至少在使用前*声明*，最好使用原型语法（它指定参数的数量和类型，以及返回类型）。所以至少，你需要一条像

```
double abs( double number ); 
```

在您 调用. *_*`abs``main`

你也可以在使用之前*定义一个函数：*

```
double abs( double number )
{
   // compute absolute value
}

int main( void )
{
  ...
  x = abs(x);
  ...
} 
```

这实际上是我的偏好；同一个翻译单元（文件）中的所有内容都应在使用前*定义*。这样您就不必担心保持声明和定义同步。

# ios - 导航表视图时添加到超级视图的视图消失

> ID：16070305
> 
> 赞同：1
> 
> 时间：2013-04-17T21:08:41.123
> 
> 标签：ios, objective-c, tableview, superview

当用户选择其中一个 tableView 单元格时，我有一个 tableView 导航到详细视图。这个主 TableView 是在 UITableViewController 类中创建的。（主视图控制器）

我使用 StoryBoard 创建主从表视图。

在 MasterViewController 中，当用户选择 To 按钮时，我在主 tableView 顶部放置了一个 tableView。第二个 tableView 允许用户从此列表中选择多个值。

为了防止第二个 tableView 在第一个（主）tableView 滚动时在屏幕上滚动，我将第二个 tableView 添加到MasterViewController 视图的**superView中。**([self.view.superview addSubview:_toView];)

因此，在 MasterViewController 中，我添加了一个 TableViewController (_toController)。我实例化一个 UIView (_toView)，向它添加一个背景图像 (_toViewBG)，然后向它添加一个 TableView (_toTableView)。然后，我将 _toView（包含第二个 tableView）添加到 MasterViewController 视图的父视图中。

```
_toController = [[ToTableViewController alloc] init];
_toView = [[UIView alloc] initWithFrame:CGRectMake(10,10,263,247)];

_toViewBG = [[UIImageView alloc] initWithFrame:CGRectMake(10,10,257,232)];
_toViewBG.image = [UIImage imageNamed:@"toViewBackground.png"];

[_toView addSubview:_toViewBG];

_toTableView = [[UITableView alloc] initWithFrame:CGRectMake(20,30,220,180) style:UITableViewStylePlain];

[_toTableView setDelegate:_toController];
[_toTableView setDataSource:_toController];
[_toView addSubview:_toTableView];

[self.view.superview addSubview:_toView];
[_toTableView reloadData]; 
```

当我滚动主 tableView 时，这种方法可以防止第二个 tableView 滚动。当主 tableView 滚动时，第二个 tableView 保持在顶部并就位。

如果我在主 TableView 中选择一个单元格，我会导航到详细视图。当我返回主 TableView 时，无法显示第二个 TableView (_toView)。

我不知道如何告诉 _toView 来到前面。我意识到它被添加到 MasterViewController 视图的超级视图中。从一些实验来看，这个超级视图似乎是一个 CALayer。

谁能建议我如何让这个 _toView 显示在 MasterViewController 视图的前面？

提前感谢您的任何帮助。

**解决** 了我最终只是将第二个表视图添加为 MasterViewController 视图的子视图。[self.view addSubview:_toView]; 然后，当我的第二个 tableview 可见时，我禁用了主 tableview 上的滚动。

```
Self.tableView.scrollEnabled  = No; 
```

似乎工作正常。

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:30:30.767

可以通过调用来完成这项工作`[self.view.superview bringSubviewToFront:_toView]`，但我的建议是创建`MasterViewController`一个`UIViewController`而不是的子类`UITableViewController`，然后将两个`UITableView`对象都添加为根视图的子视图（而不是引用`superview`）。

# c# - Windows 8 应用本地存储

> ID：16070308
> 
> 赞同：3
> 
> 时间：2013-04-17T21:08:46.217
> 
> 标签：c#, windows, windows-8, windows-runtime, local-storage

我正在尝试使用 C# 开发 Windows 8 应用程序，我需要在本地设置中存储两个列表（字符串和日期时间）

```
List<string> names = new List<string>();
List<DateTime> dates = new List<DateTime>(); 
```

我根据此页面使用了 LocalSettings：http: [//msdn.microsoft.com/en-us/library/windows/apps/xaml/hh700361](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh700361)

```
Windows.Storage.ApplicationDataContainer localSettings = Windows.Storage.ApplicationData.Current.LocalSettings; 
```

但是我在存储列表并从保存的设置中取回它们时遇到问题。

您能否通过发送几行来存储和检索字符串 List 和 DateTime 列表类型对象（或存储此类数据的其他方法）来提供帮助。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T06:07:10.607

这是一个名为[Windows 8 隔离存储](https://isolatedstoragew8.codeplex.com/)的库，它使用 XML 序列化。您可以存储`object`以及`List<T>`. 使用也非常简单。只需在您的项目中添加 DLL，您就有了存储数据的方法。

```
public class Account
{
   public string Name { get; set; }
   public string Surname{ get; set; }
   public int Age { get; set; }
} 
```

保存在隔离存储中：

```
Account obj = new Account{ Name = "Mario ", Surname = "Rossi", Age = 36 };
var storage = new Setting<Account>();          
storage.SaveAsync("data", obj); 
```

从隔离存储加载：

```
public async void LoadData()
{    
    var storage = new Setting<Account>();
    Account obj = await storage.LoadAsync("data");    
} 
```

此外，如果您想存储列表：将列表保存在独立存储中：

```
List<Account> accountList = new List<Account>();
accountList.Add(new Account(){ Name = "Mario", Surname = "Rossi", Age = 36 });
accountList.Add(new Account(){ Name = "Marco", Surname = "Casagrande", Age = 24});
accountList.Add(new Account(){ Name = "Andrea", Surname = "Bianchi", Age = 43 });

var storage = new Setting<List<Account>>(); 
storage.SaveAsync("data", accountList ); 
```

从独立存储中加载列表：

```
public async void LoadData()
{    
    var storage = new Setting<List<Account>>();    
    List<Account> accountList = await storage.LoadAsync("data");    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T02:24:08.550

请查看此示例，它演示了如何将集合保存到应用程序存储：[http ://code.msdn.microsoft.com/windowsapps/CSWinStoreAppSaveCollection-bed5d6e6](http://code.msdn.microsoft.com/windowsapps/CSWinStoreAppSaveCollection-bed5d6e6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T21:15:09.263

试试这个来存储：

```
localSettings.Values["names"] = names 
localSettings.Values["dates"] = dates 
```

这要读：

```
dates = (List<DateTime>) localSettings.Values["dates"]; 
```

编辑：看起来我错了，你只能以这种方式存储基本类型。因此，您可能必须使用 MemoryStream 将所有内容序列化为 byte[] 并仅保存其缓冲区。

# vba - 从 ADODB 记录集中复制数据时 Excel 表丢失数字格式

> ID：16070313
> 
> 赞同：9
> 
> 时间：2013-04-17T21:08:54.380
> 
> 标签：vba, excel, adodb

我正在使用该方法从**ADODB**记录集中更新一个 excel 表。`CopyFromRecordset`

更新后，只要有数字列，数字就会显示为日期。

到目前为止，我使用的解决方法是通过**VBA**将列格式化回数字，但这不是一个好的解决方案，因为报告需要更多时间才能完成。我还必须编写代码来容纳很多表。

有快速修复吗？任何帮助是极大的赞赏。

```
'Delete old data and copy the recordset to the table
Me.ListObjects(tblName).DataBodyRange.ClearContents
Me.Range(tblName).CopyFromRecordset rst 
```

`tblName`- 指一个现有的表，该表包含与第一个数据相同的格式/数据类型的数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-20T08:06:50.453

我知道这是一个迟到的答案，但我遇到了同样的错误。我想我找到了解决方法。

Excel 似乎希望范围是左上角的单元格而不是单元格范围。所以只需将您的声明修改为`Range(tblName).Cells(1,1).CopyFromRecordset rst`

```
'Delete old data and copy the recordset to the table
Me.ListObjects(tblName).DataBodyRange.ClearContents
Me.Range(tblName).Cells(1,1).CopyFromRecordset rst 
```

似乎还要求目标工作表处于活动状态，因此您*可能*必须先确保工作表处于活动状态，然后再更改回以前活动的工作表。这可能已在更高版本的 Excel 中修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T15:36:04.677

试试这个 - 这会将结果集复制到一个数组中，将其转置，然后将其复制到 excel 中

```
Dim rs As New ADODB.Recordset

Dim targetRange As Excel.Range

Dim vDat As Variant

' Set rs

' Set targetRange   

rs.MoveFirst

vDat = Transpose(rs.GetRows)

targetRange.Value = vDat

Function Transpose(v As Variant) As Variant
    Dim X As Long, Y As Long
    Dim tempArray As Variant

    ReDim tempArray(LBound(v, 2) To UBound(v, 2), LBound(v, 1) To UBound(v, 1))
    For X = LBound(v, 2) To UBound(v, 2)
        For Y = LBound(v, 1) To UBound(v, 1)
            tempArray(X, Y) = v(Y, X)
        Next Y
    Next X

    Transpose = tempArray

End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T03:28:04.007

下面是示例代码。每当调用 proc getTableData 时，都会根据记录集保留 table1 的格式和列格式。我希望这就是你要找的。

```
 Sub getTableData()

    Dim rs As ADODB.Recordset
    Set rs = getRecordset

    Range("A1").CurrentRegion.Clear
    Range("A1").CopyFromRecordset rs
    Sheets("Sheet1").ListObjects.Add(xlSrcRange, Range("A1").CurrentRegion, , xlNo).Name = "Table1"

End Sub

Function getRecordset() As ADODB.Recordset

    Dim rsContacts As ADODB.Recordset
    Set rsContacts = New ADODB.Recordset

    With rsContacts
        .Fields.Append "P_Name", adVarChar, 50
        .Fields.Append "ContactID", adInteger
        .Fields.Append "Sales", adDouble
        .Fields.Append "DOB", adDate
        .CursorLocation = adUseClient
        .CursorType = adOpenStatic

        .Open

        For i = 1 To WorksheetFunction.RandBetween(3, 5)
             .AddNew
            !P_Name = "Santosh"
            !ContactID = 2123456 * i
            !Sales = 10000000 * i
            !DOB = #4/1/2013#
            .Update
        Next

        rsContacts.MoveFirst
    End With

    Set getRecordset = rsContacts
End Function 
```

![在此处输入图像描述](https://i.stack.imgur.com/Pn9Jd.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-05T09:26:22.703

在阅读了遇到相同问题的其他人的论坛帖子后，以下是我所知道的所有选项（其中一些已经在其他答案中提到）：

1.  仅插入目标范围的第一个单元格 - 请参阅@ThunderFrame 的答案。
2.  在上面的行中激活包含目标范围的工作表`CopyFromRecordset()`
3.  关闭自动重新计算：

    ```
    Application.Calculation = xlCalculationManual
    .CopyFromRecordset rs
    Application.Calculation = xlCalculationAutomatic 
    ```

解决方法：

1.  迭代行/列并一次插入一个值-@Sriketan 的答案为此提供了代码。另一个代码片段在下面的链接中。
2.  粘贴到临时工作簿中，然后从那里复制。

资料来源：

1.  Duchgemini 的帖子和讨论：[https ://dutchgemini.wordpress.com/2011/04/21/two-serious-flaws-with-excels-copyfromrecordset-method/](https://dutchgemini.wordpress.com/2011/04/21/two-serious-flaws-with-excels-copyfromrecordset-method/)
2.  微软论坛：[https ://social.msdn.microsoft.com/Forums/office/en-US/129c0a52-4ccb-4f54-9e38-8c0ae6e300b1/copyfromrecordset-corrupts-cell-formats-for-the-whole-excel-workbook ?forum=exceldev](https://social.msdn.microsoft.com/Forums/office/en-US/129c0a52-4ccb-4f54-9e38-8c0ae6e300b1/copyfromrecordset-corrupts-cell-formats-for-the-whole-excel-workbook?forum=exceldev)

# php - Y、N 和 0 都等于 0？

> ID：16070315
> 
> 赞同：3
> 
> 时间：2013-04-17T21:09:15.990
> 
> 标签：php, equality

```
$isClient = 0;
if($isClient == 0) echo "is client 0\n";
if($isClient == "n") echo "is client n\n";
if($isClient == "y") echo "is client y\n"; 
```

考虑到上面的代码，它输出以下内容

```
is client 0
is client n
is client y 
```

我一定在这里遗漏了什么！为什么0等于“n”和“y”？？？

[上述代码的链接用于测试](http://sandbox.onlinephpfunctions.com/code/0572029ddaabdcfbd2e7682f2740b74562036366)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T21:12:50.000

在这里，您正在执行松散比较（*注意*：严格比较是在***三个***等号的帮助下完成的：） `===`，在这种情况下，一个字符串的计算结果为零，因为`==`它是左关联的，这意味着，如果第一个操作数是整数，则第二个操作数也被类型转换为整数（因此`"n"`被解释为`0`）。这就是 PHP 的工作方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T21:13:44.837

由于`$isClient`和`"n"`属于不同的数据类型，因此必须将它们转换为通用数据类型才能进行比较。

`(int)"y"`并且`(int)"n"`两者都评估为`0`，因此您的等式成立。如果要进行严格比较，请使用三等号。它还检查数据类型：

```
<?php

$isClient = 0;
if($isClient === 0) echo "is client 0\n";
if($isClient === "n") echo "is client n\n";
if($isClient === "y") echo "is client y\n";

?> 
```

这会生成正确的输出：

```
is client 0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T21:16:40.453

在 PHP 中，当要比较值时，需要使用三个等号 ( `===`)，因为：

> **如关于表达式的部分所述[见下文]，表达式被评估为其布尔值。**如果表达式计算结果为 TRUE，PHP 将执行语句，如果计算结果为 FALSE - 它会忽略它。有关哪些值评估为 FALSE 的更多信息，请参阅“转换为布尔值”部分。[（来源）](http://www.php.net/manual/en/control-structures.if.php)

和

> 最后值得一提的是表达式的真值。在很多事件中，主要是在条件执行和循环中，你对表达式的具体值不感兴趣，而只关心它的含义是 TRUE 还是 FALSE。常量 TRUE 和 FALSE（不区分大小写）是两个可能的布尔值。**必要时，表达式会自动转换为布尔值。有关如何进行的详细信息，请参阅有关类型转换的部分。** [（来源）](http://www.php.net/manual/en/language.expressions.php)

所以你的代码必须修改如下：

```
$isClient = 0;
if($isClient === 0) echo "is client 0\n";
if($isClient === "n") echo "is client n\n";
if($isClient === "y") echo "is client y\n"; 
```

输出

```
is client 0 
```

# ios - 如何确定用户是否在 iPhone 设置中设置了 FB 帐户

> ID：16070317
> 
> 赞同：0
> 
> 时间：2013-04-17T21:09:21.453
> 
> 标签：ios, facebook, account

我想询问用户是否愿意启用 FB 集成并为他们提供 UISwitch 以表明他们的偏好。但是，我只想在用户实际在 iPhone 设置中设置其 FB 帐户的情况下启用/取消隐藏该选项。一个人如何去检查他们是否做了那么多？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T04:04:47.343

```
give it a try this will help you .....

        if(iOSVersion >= 6.0)
        {
                if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook])
             {
                     NSLog(@"user have filled fb acount details");
             }
             else
            {

                    NSLog(@"settings is empty");
            }   

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T03:56:02.517

我想到了。这是对我有用的代码块。我欢迎改进建议:)

```
self.myStore = [[ACAccountStore alloc] init];
    ACAccountType *acct = [self.myStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    NSArray *fbAccounts = [self.myStore accountsWithAccountType:acct];

    // Check to make sure the user has a FB account setup, or bail:
    if ([fbAccounts count] == 0) {
        userDoesNotHaveFBAccountSetup = YES;
        self.fbSwitch.enabled = NO;
        [[self fbSwitch] setOn:NO];
        [self viewDidLoad];
    } else {
        userDoesNotHaveFBAccountSetup = NO;
        self.fbSwitch.enabled = YES;
    } 
```

# ruby-on-rails - 如何防止 ActiveRecord 对象的字段被更改？

> ID：16070323
> 
> 赞同：0
> 
> 时间：2013-04-17T21:10:03.447
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我的 Rails 3 项目中，我有一个表，我只想作为应用程序的参考：我*从不*希望任何人能够在应用程序中更改这些数据。这是我到目前为止所拥有的：

```
class Foo < ActiveRecord::Base
  attr_readonly :name, :description

  has_many :bars

  def readonly?
    return true
  end
  ...
end 
```

虽然这可以防止保存记录或使用`update_attributes`，但我想进一步锁定它：有没有办法让我防止分配已加载的记录，例如：

```
f = Foo.find(1)
f.name = 'New Name'
SomeError: You cannot change properties of this object 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:15:05.487

您可以为该属性制作自定义设置器：

```
def name=(val)
  raise RuntimeError, 'You cannot change properties of this object'
end 
```

这将防止任何人修改该值。

# c - 如果您只能从用户空间使用 outb/inb，那么 Linux 字符设备驱动程序有什么意义？

> ID：16070325
> 
> 赞同：4
> 
> 时间：2013-04-17T21:10:11.213
> 
> 标签：c, linux, linux-kernel, driver, linux-device-driver

我很难理解何时应该编写设备驱动程序，而不仅仅是通过`outb`我的用户空间程序将操作码直接发送到硬件。我最初认为我应该为硬件创建简单的例程，但现在我开始认为算法应该留在用户空间中。

假设我正在编写一个假设的机械臂。我可以在 Linux 内核模块中编写几个函数，这些函数可以自动执行常见任务所需的硬件输出（例如，将手臂移动到 HOME 位置，在装配线开始时从已知位置拾取新块等）。但是，在阅读了有关设备驱动程序的更多信息后，似乎经验法则是使设备驱动程序尽可能接近特定于硬件的代码，将“繁重”的算法留给用户空间。

这让我很困惑，因为如果设备驱动程序实现的唯一功能是简单的操作码调用，那么用户空间程序使用设备文件而不是直接调用`outb`/的原因是什么`inb`？

我想我想弄清楚的是：我如何决定内核空间而不是用户空间中的功能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T21:26:11.600

好问题。我已经为此苦苦挣扎——我什至编写了驱动程序来控制机械臂，当我知道事实上没有必要时。我可以通过串行端口或 outb() 等轻松发送命令。我编写这些驱动程序只是为了教育目的。

设备驱动程序有很多很好的理由。想象一下试图直接从用户空间控制你的网卡！首先，驱动程序在操作系统级别（eth0 等）为您提供了一个很好的抽象。但是从性能的角度来看，尝试处理用户空间中数据包发送/接收的中断是非常不切实际的——甚至可能是不可能的。仅仅响应用户空间中的中断所花费的时间就会将界面拖到膝盖上。

进一步想象你买了一张新的网卡。只加载新驱动程序并继续从用户空间与 eth0 对话而不更改代码不是很好吗？

因此，如果您没有看到需要，我会说编写驱动程序“没有意义”。我认为驱动程序的存在是由需求驱动的（如 NIC 驱动程序示例），而不是相反。

听起来对于您的应用程序，outb() 将比创建驱动程序更简单。最后，我什至没有使用我的机械臂驱动程序——只是将字节写入串行端口也能正常工作——并且只需要几行代码；-)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-17T22:05:32.270

如果您在用户空间中使用`outb`and `inb`，那么您的用户空间将是特定于 x86 的 - 用户空间`outb()`和`inb()`宏是使用 x86 程序集实现的。另一方面，如果您编写内核驱动程序，那么您的驱动程序将适用于任何支持 PCI 的架构 - 内核中的`inb()`和`outb()`功能以特定于架构的方式实现。内核还为您提供诸如`request_region()`确保您的 IO 端口不会与任何其他驱动程序冲突的功能。

此外，您的用户空间驱动程序需要以 root 身份运行（或者在技术上具有与`CAP_SYS_RAWIO`root 等效的功能）。内核中的字符设备驱动程序意味着您可以使用字符设备文件的 UNIX 权限来控制哪个用户空间用户可以访问该设备。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T21:41:28.667

设备驱动程序必须只实现处理硬件的机制（与操作系统无关）。解决方案的所有*智能*都必须存在于用户空间中。

是的，您可以在用户空间中做任何事情，但是：

*   它不可重复使用；其他用户空间程序必须重新实现访问机械臂的机制（例如）

*   表现不佳；这取决于应用程序，也许对于机械臂来说不是问题（很慢），但对于网卡、磁盘、显卡来说可能是问题

因此，对于机械臂，您应该在驱动程序中实现机制（移动电机，从传感器获取信息）。因此，您的程序和其他程序可以使用驱动程序通过 arm 做出一些聪明的事情。聪明的事情是由用户空间程序完成的：画 Gioconda，准备蛋糕，小心地移动炸药。驱动程序是基本功能的实现，以允许其用户使用硬件。

但显然，这取决于硬件和环境。

# c# - 在数据表中的行和列的交集处查询特定值

> ID：16070336
> 
> 赞同：2
> 
> 时间：2013-04-17T21:10:51.867
> 
> 标签：c#, linq

假设我有一个 DataTable (myDatable)，其第一行是一行标题，其后续行只是数字数据。例如：

```
 | WaterPercent | Ethylene | Toluene |
    |1.0312345     | 74.1323  | 234.000 |
    |56.054657     | 18.6540  | 234.000 |
    |37.57000      | 94.6540  | 425.000 | 
```

此时，它的所有数据都包含在其`myDataTable.Columns`和`myDataTable.Rows`中`Strings`。

使用此查询：

```
var results = from row in myDataTable.AsEnumerable()
              select row.Field<string>("Ethylene"); 
```

我可以获取 Ethylene 列中的所有值，但我想使用“where”子句过滤我的查询，这样我就可以在特定行索引和“Ethylene”之类的列的交集处仅检索一个值。

因此，它看起来不像（除非我遗漏了什么）我可以`row`在 Linq 查询中使用 ' ' 访问行集合的索引。即使我有这个，我也不确定如何形成我的查询的“where”子句来获得我想要的东西。

我的查询需要什么才能将结果过滤到特定行和列的交集？

例如，我想要值 18.6540，它存在于 2 的行索引和 Ethylene 的列中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:14:51.173

如果您知道特定的行索引，那么您可以直接使用`.Rows`集合指定行索引，就像您索引数组或集合一样（因为它是基于 0 的索引，所以第 2 行将是 index `1`）：

```
var result = myDataTable.Rows[1].Field<String>("Ethylene") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:20:13.633

您是否有理由在结果中不这样做？

```
var results = (from row in myDataTable.AsEnumerable()
          select row.Field<string>("Ethylene")).ToArray(); 
```

然后只是索引

```
var myVal = results[2]; 
```

否则，您将需要使用 Skip() 和 Take()。

```
String result = (from row in myDataTable.AsEnumerable()
              select row.Field<string>("Ethylene")).Skip(2).Take(1).Single(); 
```

# sql - 如何在 PL/SQL 中显示最高金额以及 ($) 符号？

> ID：16070338
> 
> 赞同：0
> 
> 时间：2013-04-17T21:10:53.257
> 
> 标签：sql, oracle, plsql

下面是我当前的代码，其中我必须显示在两个名为部门和员工的填充表上。

```
Employee Name:    Johnshon
Job:              Service Writer
Total Pay:        $56,000
========================================
Department Name:  Service
Highest Total Pay: $4,500.00 
```

我在获得最高总工资以进行展示时遇到问题。我认为我的问题可能是我声明了另一个变量名 v_dpay。我不确定我是否需要那个。我很确定我应该使用 MAX 来获得部门内最高的总薪水。我在将输出中的 ($) 和 (,) 执行到小数点后两位时也遇到了一些问题。

```
ACCEPT p_1 PROMPT 'Please enter the Employee ID:'

DECLARE
v_eid     employee.employee_id%TYPE := &p_1;
v_count   NUMBER;
v_name    employee.employee_name%TYPE;
v_job     employee.job%TYPE;
v_pay     employee.salary%TYPE;
v_did     department.department_id%TYPE;
v_dname   department.department_name%TYPE;
v_dpay    ?????????????????????????????????
BEGIN
SELECT COUNT(*)
    INTO     v_count
    FROM     employee
WHERE employee_id = v_eid;

IF v_count = 0 THEN
    DBMS_OUTPUT.PUT_LINE(v_eid || ' is not in the employee table.');
ELSE
    select employee_name, job, salary + NVL(commission, 0), department_id
    into v_name, v_job, v_pay, v_did
    from employee
    where employee_id = v_eid;

DBMS_OUTPUT.PUT_LINE('Employee Name: ' || v_name);
DBMS_OUTPUT.PUT_LINE('Job: ' || v_job);
DBMS_OUTPUT.PUT_LINE('Total Pay: ' || v_pay);

if v_did is not null then
  select department_name, MAX(v_dpay)
  into v_dname, v_dpay
  from department, employee
  where department_id = v_did;

DBMS_OUTPUT.PUT_LINE('Department Name: ' || v_dname);
DBMS_OUTPUT.PUT_LINE('Highest Total Pay: ' || v_dpay);
 else
  DBMS_OUTPUT.PUT_LINE('N/A');
  end if;
 END IF;
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:52:29.683

Bob 已经涵盖了您在`max`计算中出错的地方；`v_dpay`变量冷被声明为maych`employee.salary%TYPE`或`v_pay`as`NUMBER`或其他数字数据类型。您可以重复使用`v_pay`，但我认为如果它有自己的变量会更清楚。

对于显示，您需要以下[`TO_CHAR(number)`功能](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions201.htm)：

```
DBMS_OUTPUT.PUT_LINE('Highest Total Pay: ' || TO_CHAR(v_dpay, 'C999G999G999D99')); 
```

[格式模型](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#i34570)用于`C`表示货币，如果您的`$`NLS 设置适用于美国（或使用该符号的其他国家！），它将告诉您；`G`对于将为您提供的组分隔符和将为您`,`提供`D`的小数分隔符`.`，再次基于您的 NLS 设置。

不太便携的等价物是`'$999,999,999.99'`，但使用通用版本并不是一个坏习惯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T22:10:41.180

取 的最大值`v_dpay`只会给你…… 的值`v_dpay`。我怀疑这不是你想要的。也许以下内容可能会有所帮助：

```
SELECT d.DEPARTMENT_NAME, MAX(e.SALARY + NVL(e.COMMISSION, 0))
  INTO v_dname, v_dpay
  FROM DEPARTMENT d
  INNER JOIN EMPLOYEE e
    ON (e.DEPARTMENT_ID = d.DEPARTMENT_ID)
  WHERE d.DEPARTMENT_ID = v_did; 
```

根据发布的代码，这个 SELECT 应该可以为您提供您正在寻找的东西 - 如果它没有一点点调整就应该这样做。

分享和享受。

# jquery - 如何使搜索文本输入仅在输入词时才显示在左侧？

> ID：16070339
> 
> 赞同：0
> 
> 时间：2013-04-17T21:11:04.273
> 
> 标签：jquery, asp-classic

使用下面的代码，我可以在输入框中显示默认文本消息，默认显示文本框中的值并在单击时将其删除。之后文本向左移动，这就是我需要的。现在，当用户输入搜索词并点击搜索时，它会将他们带到结果页面。搜索框仍显示在结果页面的顶部，但现在我需要左侧显示的文本，而不是文本居中，如果它只是一个搜索词而不是默认搜索占位符。我怎样才能做到这一点？jQuery 也许？

我正在使用 ASP，这是输入框：

```
<input id="search_input" type="text" autocomplete="off" onkeypress="return 
inputSBox_onkeypress(event, this);" onkeyup="return inputSBox_onkeyup(event,this);"
onfocus="inputSBox_onfocus(this);" onblur="inputSBox_onblur(this);" searchtype="
<%=(int)SearchType%>" value="<%=GetboxValue() %>"class="menu"> 
```

CSS：

```
#search_input {
width: 337px;
height: 36px;
margin-left: 7px;
font-style: italic;
padding-left: 4px;
-webkit-transition: all 0.3s ease-in-out 0s;
-moz-transition: all 0.3s ease-in-out 0s;
-ms-transition: all 0.3s ease-in-out 0s;
-o-transition: all 0.3s ease-in-out 0s;
outline: medium none;
padding: 0;
margin: -10px 1px 3px 0px;
border: 1px solid #DADADA;
box-shadow:inset 0 0 4px 0 #dfdfdf;
-moz-box-shadow:inset 0 0 4px 0 #dfdfdf;
-wevkit-box-shadow:inset 0 0 4px 0 #dfdfdf;
text-align: center;
font-size: 16px;
color: #9A9A9A;
font-family: Georgia, Arial, sans-serif;
}

#search_imput:focus {
border: 1px solid rgba(81, 203, 238, 1);
color: #797f86;
text-align: left;
width: 327px;
padding-left: 10px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:59:06.867

如果输入值不为空，您可以使用 jQuery 将 text-align 设置为左​​对齐，如下所示：

```
$(function() {
    if ($("#search_input").val() != "")
        $("#search_input").css("text-align", "left");
}); 
```

但是，如果用户清除输入值，则内容仍将左对齐。

更好的解决方案是在有值时使用 jQuery 应用不同的类。您可以利用现有的 JavaScript 函数进行聚焦和模糊。

# sahi - 有没有办法在使用 Sahi Pro 播放期间处理弹出窗口，而每个弹出窗口都不会打开自己的控制器窗口？

> ID：16070347
> 
> 赞同：0
> 
> 时间：2013-04-17T21:11:37.173
> 
> 标签：sahi

我正在使用 Sahi Pro 测试链接列表，每个链接都会打开一个弹出窗口，我必须在其中断言一些元素可用。我可以使用 _closeWindow 摆脱每个弹出窗口，但我注意到每次加载新弹出窗口时，它都会打开一个新的 Sahi 控制器窗口来执行该弹出窗口中的脚本。当弹出窗口关闭时，这些控制器窗口不会关闭。不久之后，就会有太多打开的控制器窗口导致测试执行冻结。

有没有办法以编程方式关闭这些控制器窗口？还是首先防止每个弹出窗口出现新的弹出窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:43:10.187

这可以通过从命令行运行脚本作为测试套件来避免。

# prolog - 如何统一序言中的数字？

> ID：16070349
> 
> 赞同：0
> 
> 时间：2013-04-17T21:11:38.150
> 
> 标签：prolog

在序言中，如果我`1 is 1.`在终端中输入，我会得到真实的，但如果我尝试`1 is X.`我会得到

`ERROR: is/2: Arguments are not sufficiently instantiated`.

但我希望它能告诉我所有等于 1 的数字，而这只会是 1。

我怎样才能统一这个？

**（注：不使用`=`）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:24:00.957

我不是专家，但请注意 prolog 不能也不会统一`is`. 您如何期望它统一诸如`64 is x*x`?

Rhs of`is`将被明确评估。您可以编写类似`X is Y+1`仅当`Y`已统一为某个数值的内容。

就您的情况而言，`X is 1`将被评估为可以，而`1 is X`不会。

* * *

重写@CapelliC的答案，如果你需要`=`不惜一切代价避免使用统一，程序可以看起来像

```
:- initialization(main).
unify(X,X).
main :- unify(X,1), write(X). 
```

请注意，这不是默认方式：通常您会使用`=`.

所以，你有三个选择：

*   使用`=`（首选）
*   `is`将 1 放在（不太喜欢）的右侧
*   使用`unify(X,X).`（最不喜欢）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:26:14.500

只是为了显示我在评论中的意思：

```
?- [user].
|: unify(X,X).
|: % user://1 compiled 0,02 sec, 2 clauses
true.

?- unify(1,X).
X = 1. 
```

# javascript - 从javascript打印时出现奇怪的黑框

> ID：16070350
> 
> 赞同：0
> 
> 时间：2013-04-17T21:11:45.997
> 
> 标签：javascript, printing

我正在使用 windows.print() 打印一些内容。我有时会在打印出来的右侧随机出现一个黑框。无论我打印到 PDF 还是纸张，都会发生这种情况。最初我以为它是在打印滚动条，但这个黑框有时也会出现在第二页上。

![显示神秘黑匣子的打印输出的一小部分](https://i.stack.imgur.com/6Q2Nj.png)

我没有看到打印预览的选项。但是，当我检查我正在打印的 HTML 时，这个黑匣子并不存在，所以这绝对不是我的应用程序故意生成的。

有谁知道为什么会发生这种情况？

# api - 谷歌搜索 API (CSE) 返回的结果很少

> ID：16070351
> 
> 赞同：2
> 
> 时间：2013-04-17T21:11:48.200
> 
> 标签：api, search

所以我遵循了 [https://stackoverflow.com/a/11206266/1456530上的提示](https://stackoverflow.com/a/11206266/1456530)上的提示 （从自定义搜索中删除网站）

目前我这里没有网站，我选择了“*搜索整个网络，但突出显示这些网站的内容*”。

而且我得到的结果很少，有时是 1 个结果，或者根本没有。结果计数`totalResults`低得离谱，例如“*大花*”的 1370 个结果。我很茫然，并且会很高兴任何指向文档或其他内容的指针。

有人有好的文档来源吗？

# jquery - 元名称 apple-mobile-web-app-status-bar-style

> ID：16070363
> 
> 赞同：0
> 
> 时间：2013-04-17T21:12:55.390
> 
> 标签：jquery, html

我试着为自己做一个小应用程序。

我添加了元名称：

```
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" /> 
```

这是我的标题代码：

```
<div data-role="page" id="p1">
    <div data-role="header" data-theme="a" data-position="fixed"  data-id="footer">                
    </div> 
```

当我添加快捷方式图标并打开应用程序时，我的标题位于状态栏下方

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:17:39.510

“如果设置为黑色半透明，则网页内容将显示在整个屏幕上，部分被状态栏遮挡。”

[https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html](https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html)

尝试`default`或`black`。

# c++ - 使用 ncurses 刷新重叠窗口

> ID：16070364
> 
> 赞同：2
> 
> 时间：2013-04-17T21:13:00.643
> 
> 标签：c++, ncurses

我创建了一个与其他窗口重叠的弹出窗口，我对其进行了更改，然后将其删除。但是当我这样做时，背景窗口会保留空白。

```
popup(){
    WINDOW* backgroundWin = subwin(stdscr,0,0,100,100);
    //fill it with something
    WINDOW* popupWin = subwin(stdscr,50,50,10,10);
    werase(popupWin);       //so it doesn't look 'transparent'
    box(popupWin,0,0);
    wrefresh(popupWin);

    getch();

    werase(popupWin);
    delwin(popupWin);

    refresh(); //when I do this refresh the contents of the popup window stay, in this case blank spaces because I used werase

 } 
```

编辑：根据this using touchwin(stdscr) before refresh 应该可以工作，但它不是 [http://linux.die.net/man/3/touchwin](http://linux.die.net/man/3/touchwin)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:53:07.313

我看到了我的问题，当我需要创建一个新窗口时，我正在创建一个子窗口。当我使用is_wintouched测试更改主窗口的位置时，它仅在删除子窗口后才返回true，我不知道为什么。

> 窗口位于窗口原点的中间，因此对一个窗口所做的更改将影响两个窗口。 [http://linux.die.net/man/3/subwin](http://linux.die.net/man/3/subwin)

# c# - IBM MQ 客户端向后兼容性

> ID：16070367
> 
> 赞同：2
> 
> 时间：2013-04-17T21:13:13.097
> 
> 标签：c#, .net, ibm-mq

我正在使用 7.5.0.0 amqmdnet.dll 并使用 MQ.NET 类构建我的 .net 应用程序，但是在部署后，如果目标机器安装了 7.1.0.0 MQ 客户端，应用程序会抛出找不到程序集 7.5.0.0 dll 信息，IBM的MQ客户端版本不向后兼容客户端吗？

> System.IO.FileNotFoundException：无法加载文件或程序集'amqmdnet，版本 = 7.5.0.0，文化 = 中性，或其依赖项之一。该系统找不到指定的文件。

我在官方页面上找不到任何与此相关的信息。

[IBM 7.5 链接](http://www-304.ibm.com/support/docview.wss?uid=swg24032744)

这是否需要始终是目标计算机中的构建版本？我假设如果我使用 7.1 dll，它也适用于 7.1 更高版本。当我引用 7.1.0.0 时，我在项目文件中得到了这个。

```
<Reference Include="amqmdnet, Version=7.5.0.0, Culture=neutral,  processorArchitecture=MSIL">

<SpecificVersion>False</SpecificVersion> 
 <HintPath>..\..\..\..\..\..\..\..\IBM\7.1.0.0\amqmdnet.dll</HintPath>
 </Reference> 
```

为什么它有 7.5.0.0？有什么想法（尽管我引用的版本是 7.1.0.0）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T04:28:41.310

向后兼容性“问题”不仅限于 MQ，还涉及所有 .NET 程序集。不支持使用一个版本的 .NET 程序集编译应用程序并使用该 .NET 程序集的较低版本运行它，不仅是 MQ，而且是每个 .NET 程序集。您必须使用与构建应用程序相同的程序集版本。如果您有该程序集的更高版本，那么您将需要策略文件来重定向 .NET CLR 以加载该 .NET 程序集的更高版本。

# macos - mac 中的 glaux 替代品

> ID：16070369
> 
> 赞同：1
> 
> 时间：2013-04-17T21:13:18.283
> 
> 标签：macos, opengl

我开始使用 OpenGL。我需要使用 glaux.h 做一个项目。我的问题是我正在运行 Mac OS X Lion，所以我不能使用 glaux。

我在网上搜索，发现了一些试图替换 glaux 的代码。代码很好，但它们使用 Windows Api 变量。所以很明显我不能使用它们。这是我需要使用 glaux 阅读的代码：

```
#include <stdio.h>          // Header File For Standard Input/Output
#include <stdlib.h>
#include <GLUT/glut.h>
#include <OpenGL/gl.h>
#include <OpenGL/glu.h>
#include "bmp.h"
#include <string.h>

const int W_WIDTH = 500;    // PreselecciÛn del ancho de la ventana
const int W_HEIGHT = 500;   // PreselecciÛn del alto de la ventana
bool    keys[256];          // Array Used For The Keyboard Routine
bool    active=1;       // Window Active Flag Set To TRUE By Default
bool    fullscreen=TRUE;    // Fullscreen Flag Set To Fullscreen Mode By Default
bool    fullscreen=0;   // Fullscreen Flag Set To Fullscreen Mode By Default
GLuint  texture[1];         // Storage For 1 Texture
GLuint  box;                // Storage For The Box Display List
GLuint  top;                // Storage For The Top Display List
GLuint  xloop;              // Loop For X Axis
GLuint  yloop;              // Loop For Y Axis

GLfloat xrot;               // Rotates Cube On The X Axis
GLfloat yrot;               // Rotates Cube On The Y Axis

static GLfloat boxcol[5][3]=
{
{1.0f,0.0f,0.0f},{1.0f,0.5f,0.0f},{1.0f,1.0f,0.0f},{0.0f,1.0f,0.0f},{0.0f,1.0f,1.0f}
};

static GLfloat topcol[5][3]=
{
{.5f,0.0f,0.0f},{0.5f,0.25f,0.0f},{0.5f,0.5f,0.0f},{0.0f,0.5f,0.0f},{0.0f,0.5f,0.5f}
};

LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM);   // Declaration For WndProc

// Build Cube Display Lists
GLvoid BuildLists()
{
box=glGenLists(2);                                                    // Generate 2 Different Lists
glNewList(box,GL_COMPILE);          // Start With The Box List
glBegin(GL_QUADS);
// Bottom Face
glNormal3f( 0.0f,-1.0f, 0.0f);
glTexCoord2f(1.0f, 1.0f); glVertex3f(-1.0f, -1.0f, -1.0f);
glTexCoord2f(0.0f, 1.0f); glVertex3f( 1.0f, -1.0f, -1.0f);
glTexCoord2f(0.0f, 0.0f); glVertex3f( 1.0f, -1.0f,  1.0f);
glTexCoord2f(1.0f, 0.0f); glVertex3f(-1.0f, -1.0f,  1.0f);
// Front Face
glNormal3f( 0.0f, 0.0f, 1.0f);
glTexCoord2f(0.0f, 0.0f); glVertex3f(-1.0f, -1.0f,  1.0f);
glTexCoord2f(1.0f, 0.0f); glVertex3f( 1.0f, -1.0f,  1.0f);
glTexCoord2f(1.0f, 1.0f); glVertex3f( 1.0f,  1.0f,  1.0f);
glTexCoord2f(0.0f, 1.0f); glVertex3f(-1.0f,  1.0f,  1.0f);
// Back Face
glNormal3f( 0.0f, 0.0f,-1.0f);
glTexCoord2f(1.0f, 0.0f); glVertex3f(-1.0f, -1.0f, -1.0f);
glTexCoord2f(1.0f, 1.0f); glVertex3f(-1.0f,  1.0f, -1.0f);
glTexCoord2f(0.0f, 1.0f); glVertex3f( 1.0f,  1.0f, -1.0f);
glTexCoord2f(0.0f, 0.0f); glVertex3f( 1.0f, -1.0f, -1.0f);
// Right face
glNormal3f( 1.0f, 0.0f, 0.0f);
glTexCoord2f(1.0f, 0.0f); glVertex3f( 1.0f, -1.0f, -1.0f);
glTexCoord2f(1.0f, 1.0f); glVertex3f( 1.0f,  1.0f, -1.0f);
glTexCoord2f(0.0f, 1.0f); glVertex3f( 1.0f,  1.0f,  1.0f);
glTexCoord2f(0.0f, 0.0f); glVertex3f( 1.0f, -1.0f,  1.0f);
// Left Face
glNormal3f(-1.0f, 0.0f, 0.0f);
glTexCoord2f(0.0f, 0.0f); glVertex3f(-1.0f, -1.0f, -1.0f);
glTexCoord2f(1.0f, 0.0f); glVertex3f(-1.0f, -1.0f,  1.0f);
glTexCoord2f(1.0f, 1.0f); glVertex3f(-1.0f,  1.0f,  1.0f);
glTexCoord2f(0.0f, 1.0f); glVertex3f(-1.0f,  1.0f, -1.0f);
glEnd();
glEndList();
top=box+1;                                          // Storage For "Top" Is "Box" Plus One
glNewList(top,GL_COMPILE);                          // Now The "Top" Display List
glBegin(GL_QUADS);
// Top Face
glNormal3f( 0.0f, 1.0f, 0.0f);
glTexCoord2f(0.0f, 1.0f); glVertex3f(-1.0f,  1.0f, -1.0f);
glTexCoord2f(0.0f, 0.0f); glVertex3f(-1.0f,  1.0f,  1.0f);
glTexCoord2f(1.0f, 0.0f); glVertex3f( 1.0f,  1.0f,  1.0f);
glTexCoord2f(1.0f, 1.0f); glVertex3f( 1.0f,  1.0f, -1.0f);
glEnd();
glEndList();
}

AUX_RGBImageRec *LoadBMP(char *Filename)    // Loads A Bitmap Image
{
FILE *File=NULL;                                            // File Handle

if (!Filename)                                      // Make Sure A Filename Was Given
{
    return NULL;                                    // If Not Return NULL
}

File=fopen(Filename,"r");                           // Check To See If The File Exists

if (File)                                           // Does The File Exist?
{
    fclose(File);                                   // Close The Handle
    return new AUX_RGBImageRec(Filename);               // Load The Bitmap And Return A Pointer
}

return NULL;                                        // If Load Failed Return NULL
}

int LoadGLTextures()        // Load Bitmaps And Convert To Textures
{
int Status=0;      // Status Indicator

char ruta[100]="Data/Cube.bmp";

AUX_RGBImageRec *TextureImage[1];   // Create Storage Space For The Texture

memset(TextureImage,0,sizeof(void *)*1);            // Set The Pointer To NULL

// Load The Bitmap, Check For Errors, If Bitmap's Not Found Quit
if (TextureImage[0]==LoadBMP(ruta))
{
    Status=1;                                   // Set The Status To TRUE

    glGenTextures(1, &texture[0]);  // Create The Texture

    // Typical Texture Generation Using Data From The Bitmap
    glBindTexture(GL_TEXTURE_2D, texture[0]);
    glTexImage2D(GL_TEXTURE_2D, 0, 3, TextureImage[0]->sizeX, TextureImage[0]->sizeY, 0, GL_RGB, GL_UNSIGNED_BYTE, TextureImage[0]->data);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
    }

if (TextureImage[0])                                    // If Texture Exists
{
    if (TextureImage[0]->data)                          // If Texture Image Exists
    {
        free(TextureImage[0]->data);                    // Free The Texture Image Memory
    }

    free(TextureImage[0]);                              // Free The Image Structure
}

return Status;                                      // Return The Status
}

GLvoid ReSizeGLScene(GLsizei width, GLsizei height) // Resize And Initialize The GL Window
{
if (height==0)                                      // Prevent A Divide By Zero By
{
    height=1;                                       // Making Height Equal One
}

glViewport(0,0,width,height);                       // Reset The Current Viewport

glMatrixMode(GL_PROJECTION);                        // Select The Projection Matrix
glLoadIdentity();               // Reset The Projection Matrix

// Calculate The Aspect Ratio Of The Window
gluPerspective(45.0f,(GLfloat)width/(GLfloat)height,0.1f,100.0f);

glMatrixMode(GL_MODELVIEW);                         // Select The Modelview Matrix
glLoadIdentity();               // Reset The Modelview Matrix
}

int InitGL()                // All Setup For OpenGL Goes Here
{
if (!LoadGLTextures())          // Jump To Texture Loading Routine
{
    return 0;           // If Texture Didn't Load Return FALSE
}
BuildLists();           // Jump To The Code That Creates Our Display Lists

glEnable(GL_TEXTURE_2D);            // Enable Texture Mapping
glClearColor(0.0f, 0.0f, 0.0f, 0.5f);               // Black Background
glClearDepth(1.0f);                 // Depth Buffer Setup
glEnable(GL_DEPTH_TEST);            // Enables Depth Testing
glEnable(GL_COLOR_MATERIAL);            // Enable Material Coloring
return 1;                   // Initialization Went OK
}

void DrawGLScene()                  // Here's Where We Do All The Drawing
{
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); //Clear The Screen And The DepthB 

glBindTexture(GL_TEXTURE_2D, texture[0]);
for (yloop=1;yloop<6;yloop++)
{
    for (xloop=0;xloop<yloop;xloop++)
    {
        //Poner vuestro codigo no hace falta que se ve axactamente igual
    }
}
// Vacia los buffers de dibujo
glutSwapBuffers();
glFlush();

}

int main(int argc, char **argv) {

glutInit(&argc, argv);
glutInitWindowPosition(100,100);
glutInitWindowSize (W_WIDTH, W_HEIGHT);
glutInitDisplayMode (GLUT_RGBA | GLUT_DOUBLE);
glutCreateWindow("Ventana con el Visual C++ y glut");

glutDisplayFunc(DrawGLScene);
glutReshapeFunc(ReSizeGLScene);

// Funciones de inicializacion
InitGL();

glutMainLoop();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:30:22.753

现在[GLKit](http://developer.apple.com/library/ios/#documentation/GLkit/Reference/GLKit_Collection/Introduction/Introduction.html)在 OS X 上可用，我建议你看看。Erik Buck 的《[Learning OpenGL ES for iOS](https://rads.stackoverflow.com/amzn/click/com/0321741838) 》一书是围绕该框架编写的，重点关注 iOS，但他有一篇[博](http://www.cosmicthump.com/home/2012/8/9/exploring-glkit-for-mac-os-x-108-mountain-lion.html)文和示例项目展示了 OS X 10.8 的移植。

如果允许您从 OpenGL 退后一步，另一个想法是使用[SceneKit](http://developer.apple.com/library/mac/#documentation/3DDrawing/Conceptual/SceneKit_PG/Introduction/Introduction.html)。它是一个仅 10.8 的框架，在 Mac 以外的任何平台上均不可用。它公开了您在 OpenGL 中拥有的大部分控件，但它本质上是一个 Objective-C、基于对象的设计，并且与 Core Animation 很好地集成。文档很少，但运行起来很容易。我发现将我的大脑包裹在 SceneKit 比围绕 OpenGL 更容易。最好的介绍是 WWDC 2012 视频。

# ruby - 未定义的局部变量或方法“产品”

> ID：16070372
> 
> 赞同：0
> 
> 时间：2013-04-17T21:13:32.180
> 
> 标签：ruby

我正在做一项任务，要求我将一些产品加在一起并提供 10% 的折扣，前提是总价超过 60 英镑。我做了以下事情：

```
class Checkout
  def initialize (rules)
    @rules = rules
    @cart = []
  end

  def scan (item)
    if product == Product.find(item)
      @cart << product.clone
      #Clone preserves frozen state whereas .dup() doesn't if use would raise a
      #NoMethodError
    end
  end

  def total
    @cart = @rules.apply @cart

  end

def self.find item
  [item]
end

co = Checkout.new(Promotional_Rules.new)

co.empty_cart
co.scan(1)
co.scan(2)
co.scan(3)
puts "Total price: #{co.total}"
puts

co.empty_cart
co.scan(1)
co.scan(3)
co.scan(1)
puts "Total price: #{co.total}"
puts

co.empty_cart
co.scan(1)
co.scan(2)
co.scan(1)
co.scan(3)
puts "Total price: #{co.total}"
puts 
```

但是，当我在其中运行时，`irb`我得到未定义的变量或方法产品。听起来有点愚蠢，但这应该可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:17:07.317

你使用了太多的等号

```
 def scan (item)
    # if product == Product.find(item) 
    if product = Product.find(item) # <--- should be this
      @cart << product.clone
      #Clone preserves frozen state whereas .dup() doesn't if use would raise a
      #NoMethodError
    end
  end 
```

当然，然后你会得到一个不同的错误，因为`find`还不存在`Product`......我认为你试图在这里定义：

```
def self.find item # self should be changed to Product
  [item]
end 
```

然后你会因为`apply`不存在而得到一个错误`Promotional_Rules`...

* * *

调试这些错误的最佳方法之一是跟踪堆栈跟踪。因此，对于最后一个错误，我收到以下消息：

```
test.rb:53:in `total': undefined method `apply' for #<Promotional_Rules:0x007f94f48bc7a8> (NoMethodError)
    from test.rb:72:in `<main>' 
```

这基本上是说`line 53`你会发现`apply`还没有定义`@rules`哪个是`Promotional_Rules`. 查看`Promotional_Rules`您已明确将该方法定义为的类，`apply_to_item`而不是`apply`. 如果您继续跟踪和修复这样的兔子轨迹以获取堆栈跟踪，您将能够轻松调试您的程序！

# perl - 如何在脚本中模仿 -l

> ID：16070374
> 
> 赞同：3
> 
> 时间：2013-04-17T21:13:40.113
> 
> 标签：perl

有没有一种简单的方法来模拟脚本中`-l`命令行开关的效果？`perl`（当然，我总是可以在`chomp`每一行都添加“\n”到我打印的每一行，但关键是要避免这样做。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T22:18:25.197

`"\n"`不，您可以通过 using获得自动附加`$\`，但您必须自己添加 chomp。

这是`-l`工作原理。

```
$ perl -MO=Deparse -ne 'print $_'
LINE: while (defined($_ = <ARGV>)) {
    print $_;
}

$ perl -MO=Deparse -lne 'print $_'
BEGIN { $/ = "\n"; $\ = "\n"; }      # -l added this line
LINE: while (defined($_ = <ARGV>)) {
    chomp $_;                        # -l added this line
    print $_;
} 
```

（评论是我的。）请注意，在生成的循环开头`-l`添加了一个文字（并且只有在使用or时才会这样做）。您无法设置任何变量来模仿该行为。`chomp $_``-n``-n``-p`

一个鲜为人知的事实是`-l`,`-n`和`-p`在编译之前将样板文本包裹在您提供的代码周围。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T21:16:24.043

*是的，请尝试在shebang*和*strictures*之后的脚本开头使用它：

```
$/ = $\ = "\n"; # setting the output/input record separator like OFS in awk 
```

并在循环中使用：

```
chomp;
print; 
```

或者像这样：

```
use strict; use warnings;
use English qw/-no_match_vars/;

$OUTPUT_RECORD_SEPARATOR = "\n";

while (<>) {
    chomp;
    print;
} 
```

我不建议使用

```
#!/usr/bin/perl -l 
```

为了更好的清晰度=）

请参阅[perldoc perlvar](http://perldoc.perl.org/perlvar.html#%24%5C)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T21:16:09.720

您可以将其添加到您的 shebang 行：

```
#!/usr/bin/perl -l 
```

# doxygen - doxygen 在 fortran 中仅显示一个文档

> ID：16070379
> 
> 赞同：0
> 
> 时间：2013-04-17T21:14:08.863
> 
> 标签：doxygen

我有一个示例 fortran 代码，我想在这里展示：

```
SUBROUTINE CALHEAT(ISTL_)  

  ! DESCRIPTION:
  !! @ details
  !> Subroutine CALHEAT takes the information from the atmospheric boundary
  !>   file and the wind forcing file and calculates the net heat flux across
  !>   the water surface boundary. 
  !
  !   The heat flux terms are derived from a paper by Rosati
  !   and Miyakoda (1988) entitled "A General Circulation Model for Upper Ocean
  !   Simulation".  The heat flux is prescribed by term for the following
  !   influxes and outfluxes:
  !
  !     - Short Wave Incoming Radiation (+)
  !     - Net Long Wave Radiation (+/-)
  !     - Sensible Heat Flux (convection -)
  !     - Latent Heat Flux (evaporation +/-)
  !
  !   Two formulations of the Latent Heat Flux are provided.  The first is from
  !   the Rosati and Miyakoda paper, the second is an alternate formulation by
  !   Brady, Graves, and Geyer (1969).  The second formulation was taken from
  !   "Hydrodynamics and Transport for Water Quality Modeling" (Martin and
  !   McCutcheon, 1999).  The Rosati and Miyakoda formulation will have zero
  !   evaporative cooling or heating if wind speed goes to zero.  The Brady,
  !   Graves, and Geyer formulation provides for a minimum evaporative cooling
  !   under zero wind speed.
  !
  ! MODIFICATION HISTORY:
  !! @author
  !>   Date       Author             Comments
  !
  !
  !! @ param[in]
  !> VARIABLE LIST:
  !>
  !>   CLOUDT  = Cloud cover (0 to 10)<BR>
  !>   HCON    = Sensible heat flux (W/m2)<BR>
  !>   HLAT    = Latent heat flux (W/m2)<BR>
  !>   HLWBR   = Net longwave radiation (atmospheric long wave plus back
  !>             radiation, W/m2)<BR>
  !>   SOLSWRT = Short wave incoming radiation (W/m2)<BR>
  !>   SVPW    = Saturation vapor pressure in mb based upon the water surface
  !>             temperature<BR>
  !>   TATMT   = Temperature of air above water surface (deg C)<BR>
  !>   TEM     = Water temperature in cell (deg C)<BR>
  !>   VPA     = Vapor pressure of air at near surface air temperature (mb)<BR>
  !>   WINDST  = Wind speed at 10 meters over cell surface (m/s)<BR>
  !-------------------------------------------------------------------------------------------------- 
```

我想使用 deoxygen 显示作者、详细信息和参数。但是，doxygen 只输出参数。谁能指出我在这里做错了什么？

示例输出如下：

![在此处输入图像描述](https://i.stack.imgur.com/WseyH.png)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:32:57.503

**Doxygen**使用一个特殊的命令。完整列表可以在[这里找到](http://www.doxygen.nl/manual/index.html)

例如

```
\author { list of authors }
\param [(dir)] <parameter-name> { parameter description } 
```

对于您的代码，请尝试以下操作：

```
\author Author name
\param [in] CLOUDT Cloud cover (0 to 10)
\param [in] HCON Sensible heat flux (W/m2)
\param [in] HLAT Latent heat flux (W/m2)
\param [in] HLWBR Net longwave radiation (atmospheric long wave plus back radiation, W/m2)
\param [in] SOLSWRT Short wave incoming radiation (W/m2)
\param [in] SVPW Saturation vapor pressure in mb based upon the water surface temperature
\param [in] TATMT Temperature of air above water surface (deg C)
\param [in] TEM Water temperature in cell (deg C)
\param [in] VPA Vapor pressure of air at near surface air temperature (mb)
\param [in] WINDST Wind speed at 10 meters over cell surface (m/s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T10:10:14.643

你必须在 SUBROUTINE 命令之前写下你的 doxygen 特定信息！有关更多信息，请参阅[doxygen 手册](http://www.doxygen.nl/manual/docblocks.html#fortranblocks)。

# ember.js - Ember.js current_user - 从控制器访问全局变量

> ID：16070390
> 
> 赞同：4
> 
> 时间：2013-04-17T21:14:50.107
> 
> 标签：ember.js, ember-data, active-model-serializers

我对一个看似简单的 ember 问题感到困惑。我正在使用[active_model_serializers 元数据序列](https://github.com/rails-api/active_model_serializers#attributes)化从 rails 控制器序列化我的 rails current_user 方法，然后使用[这个人的临时解决方案](https://stackoverflow.com/questions/14322945/accessing-meta-information-passed-in-a-json-server-response/14357404#14357404)提取该 current_user 元 json 并将其设置为全局 ember 变量。

```
App.CustomRESTSerializer = DS.RESTSerializer.extend({
  extractMeta: function(loader, type, json) {
    var meta;
    meta = json[this.configOption(type, 'meta')];
    if (!meta) { return; }
    Ember.set('App.metaData', meta);
    this._super(loader, type, json);
  }
}); 
```

到目前为止一切都很好。现在我可以通过输入 App.metaData.current_user 从控制台访问 current_user 信息，也可以通过调用特定属性从把手访问，即：

```
{{App.metaData.current_user.email}} 
```

并且该电子邮件属性显示在模板中。当我尝试从 ember 控制器中访问该全局变量时，问题就出现了。这看起来非常简单，但我似乎无法从任何 ember 控制器中访问 c​​urrent_user。我试过了：

```
currentUserBinding: 'App.metaData.current_user',

currentUser: function() {
  return App.metaData.current_user;
}.property(),

Ember.get('App.metaData.current_user') 
```

和其他一些方法，但似乎无法访问它。奇怪的是，我可以通过直接路径从控制台和车把中如此轻松地访问 current_user，但不能从 ember 控制器中访问。我一定遗漏了一些明显的东西。

将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T01:43:52.997

In our app we do it same as @MilkyWayJoe suggested, but I think your approach is really interesting. Passing current_user thru JSON is a really elegant approach.

I've not experimented too much, but from what I can tell in your example the problem is nothing to do with the serializer. It's a problem with the computed property - you need to specify that it depends on `App.metaData.current_user`.

```
App.ApplicationController = Ember.Controller.extend({
  currentUser: function() {
    return Ember.get('App.metaData.current_user')
  }.property('App.metaData.current_user')
}); 
```

This tells ember that it should re-calculate the currentUser property whenever `App.metaData.currentUser` changes. Otherwise it will run the fx once (before your ajax returns) and cache the response.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-18T00:26:24.133

您可以定义一个变量来表示脚本标记中的用户 ID。这应该在服务器模板中完成：

```
<script type="text/javascript">
    window.user_id = 1;
</script> 
```

然后在您的应用程序中，您可以在其中定义一个属性，该属性`ApplicationController`将存储当前用户模型，然后您可以`find`使用`user_id`变量：

```
window.App = Ember.Application.create();

App.store = DS.Store.create({
    revision: 12
});

App.User = DS.Model.extend({
    firstName: DS.attr('string'),
    lastName: DS.attr('string'),
    fullName: function() {
        return '%@ %@'.fmt(
            this.get('firstName'),
            this.get('lastName')
        );
    }.property('firstName', 'lastName')
});

App.ApplicationController = Em.Controller.extend({
    userInfo: null,
    init: function() {
        // this will fire a GET request to users_controller 
        this.set('userInfo', App.User.find(window.user_id));
    }
}); 
```

Then your template, you can use the properties in `ApplicationController#userInfo`.

```
<script type="text/x-handlebars">
    <h1>App</h1>
    {{userInfo.fullName}}
</script> 
```

If you need to use this data from a route, you can use [`controllerFor`](http://emberjs.com/guides/routing/setting-up-a-controller/), or if you need to access from another controller, you can use [`needs`](http://emberjs.com/guides/controllers/dependencies-between-controllers/).

(see [fiddle](http://jsfiddle.net/schawaska/MHUAY/))

Just keep in mind this might not be the best solution for all scenarios as it adds one more request to your app initialization, but it does the trick for me right now.

# java - 同步单选按钮和单选组

> ID：16070392
> 
> 赞同：0
> 
> 时间：2013-04-17T21:14:55.760
> 
> 标签：java, swing, events, radio-button, radio-group

如何在不同的窗口上同步不同的单选按钮，这意味着相同。像：

窗口`A`（主）：`radioButtonA1`，`radioButtonA2`（都在`radioGroupA`）

窗口`B`（弹出）：`radioButtonB1`，`radioButtonB2`（都在`radioGroupB`）

... where`radioButtonA1`表示与 相同`radioButtonB1`，并且`radioButtonA2`表示相同`radioButtonB2`（就像它们被镜像一样）。

当我通过 更改收音机选择时`itemStateChanged`，我还想同步选择显示。因此，如果我将选择更改`radioGroupA`为`radioButtonA2`，我希望它`radioGroupB`也将选择更改为`radioButtonB2`（因为它们的含义相同）。

但我希望`itemStateChanged`两个单选按钮上的事件只调用**一次**。如果我告诉`radioButtonA2` `itemStateChanged`event 也调整 to 的选择`radioGroupB`，`radioButtonB2`那么该`radioButtonB2` `itemStateChanged`事件也将被触发（反之亦然），我不希望这样。

独立的，如果我按`radioButtonA2`或`radioButtonB2`，我希望显示是同步的，然后调用我写的方法来处理变化。但只有一次，不是两次。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:23:38.333

我会采用一种 MVC 方法：您有 1 个模型对象，它由多个视图表示（在您的情况下在多个窗口中）。

您可以使用这样的东西[作为](https://stackoverflow.com/questions/2059122/how-to-use-jradiobutton-groups-with-a-model)您的无线电组的模型。

# ios - UITableViewCell 结合 UIButton 和可视化问题

> ID：16070398
> 
> 赞同：0
> 
> 时间：2013-04-17T21:15:24.383
> 
> 标签：ios, uitableview, uibutton

我正在尝试在我的 tableviewCells 中创建一个星形按钮，以便用户可以保存最喜欢的项目。

到目前为止，我已经尝试过了。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];        
    }

    UIButton *CameraBreak=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    CameraBreak.frame=CGRectMake(260, 10, 60, 40);
    CameraBreak.tag=indexPath.row;
    [CameraBreak setImage:[UIImage imageNamed:@"first.png"] forState:UIControlStateNormal];

    [CameraBreak addTarget:self action:@selector(starClicked::) forControlEvents:UIControlEventTouchUpInside]; 
    [cell.contentView addSubview:CameraBreak];  

    cell.textLabel.text = [titles objectAtIndex:indexPath.row];
    cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:15];   

    return cell;
} 
```

**问题是 viewDidLoad 上的按钮如下所示：** ![查看DIDLOAD](https://i.stack.imgur.com/amEyn.png)

**但是，一旦我浏览表格，它的按钮就会改变如下：** ![滚动](https://i.stack.imgur.com/v8bD8.png)

有人知道这种行为的原因吗？我该如何解决这个问题？

**更新**

未选中的： ![在此处输入图像描述](https://i.stack.imgur.com/9Fbgg.png)

已选择： ![在此处输入图像描述](https://i.stack.imgur.com/4j2hT.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:08:29.277

你为什么不只使用类`accessoryView`的属性`UITableViewCell`。

```
// create your button here...    
[cell setAccessoryView:cameraBreak]; // or cell.accessoryView = cameraBreak; 
```

另外，重命名`CameraBreak`为`cameraBreak`. 您应该使用**camelCaseNotation**。

让我知道这个是否奏效。

**编辑**

> 这种方式对以下想法是否也有用： if (Accessory selected) {show yellowstar.png } else (show graystar.png)

您可以更改 的`imageView`属性`UITableViewCell`。

```
cell.imageView = // set the correct image 
```

实现这一点非常简单。按照[如何设置 tableview 委托](https://stackoverflow.com/questions/2454567/how-to-set-a-tableview-delegate)。特别是你应该看看`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath;`协议方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:29:10.427

您看到的是许多按钮被添加到每个单元格的结果，一个接一个。所有按钮创建代码都应该发生在 cell==nil 条件内。这样它只发生在新单元格上，而不是重复使用的单元格上：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    UIButton *CameraBreak=[UIButton buttonWithType: UIButtonTypeCustom];
    CameraBreak.frame=CGRectMake(260, 10, 60, 40);
    CameraBreak.tag=indexPath.row;
    [CameraBreak setImage:[UIImage imageNamed:@"first.png"] forState:UIControlStateNormal];

    [CameraBreak addTarget:self action:@selector(starClicked:) forControlEvents:UIControlEventTouchUpInside]; 
    [cell.contentView addSubview:CameraBreak];
}

// configure the parts of the cell here that vary based on indexPath 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T21:25:18.750

更改 UIButton 类型 Custom 代替 roundRect 并且每次重新加载表格时都会添加按钮。因此，将所有这些代码添加到您分配单元格的大括号中，以便可以重用它们（而不是重复分配）。

替换此代码

```
if (cell == nil) {
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

}
UIButton *CameraBreak=[UIButton buttonWithType:UIButtonTypeRoundedRect];               
CameraBreak.frame=CGRectMake(260, 10, 60, 40);
CameraBreak.tag=indexPath.row;
[CameraBreak setImage:[UIImage imageNamed:@"first.png"] forState:UIControlStateNormal];

[CameraBreak addTarget:self action:@selector(starClicked::) forControlEvents:UIControlEventTouchUpInside]; 
[cell.contentView addSubview:CameraBreak]; 
```

作为

```
if (cell == nil) {
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
UIButton *CameraBreak=[UIButton buttonWithType:UIButtonTypeCustom];        

CameraBreak.frame=CGRectMake(260, 10, 60, 40);
CameraBreak.tag=indexPath.row;
[CameraBreak setImage:[UIImage imageNamed:@"first.png"] forState:UIControlStateNormal];

[CameraBreak addTarget:self action:@selector(starClicked::)    forControlEvents:UIControlEventTouchUpInside]; 
[cell.contentView addSubview:CameraBreak];

} 
```

它会正确显示。

希望它可以帮助你。

# mysql - mysql如何分配主键或外键的键长？

> ID：16070400
> 
> 赞同：0
> 
> 时间：2013-04-17T21:15:49.043
> 
> 标签：mysql, sql, database, indexing, sql-tuning

我创建了一个具有 2 种不同字符集类型的表：utf8 和 latin1。

1)

```
CREATE TABLE `aaa` (
  `id` int(11) NOT NULL DEFAULT '0',
  `name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

2)

```
CREATE TABLE `aaa` (
  `id` int(11) NOT NULL DEFAULT '0',
  `name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `name` (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

然后我将值插入几行。当使用“解释”选择两个表时，我得到了不同的 key_len：

1)

```
mysql> explain select count(*) from aaa where name = "haha"; 
```

| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |

| 1 | 简单 | 啊！参考 | 姓名 | 姓名 | 258 | 常量 | 2 | 使用哪里；使用索引 |

一组中的 1 行（0.00 秒）

2)

```
mysql> explain select count(*) from aaa where name = "haha"; 
```

| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |

| 1 | 简单 | 啊！参考 | 姓名 | 姓名 | 第768章 常量 | 2 | 使用哪里；使用索引 |

一组中的 1 行（0.01 秒）

我不知道系统如何为使用不同字符集定义的类似表分配 key_len？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T16:32:22.007

由于 utf8 是一个多字节字符集，MySQL 需要为每个字符预留三个字节：

```
utf8, a UTF-8 encoding of the Unicode character set using one to three bytes per character. 
```

[http://dev.mysql.com/doc/refman/5.6/en/charset-unicode.html](http://dev.mysql.com/doc/refman/5.6/en/charset-unicode.html)

除此之外，似乎还有三个字节的开销。

# jquery - 选择单选时更改跨度 html

> ID：16070401
> 
> 赞同：0
> 
> 时间：2013-04-17T21:15:49.523
> 
> 标签：jquery

我有 2 个单选按钮。But when the one (check1) is selected, i'd like to change the span.amount html. 我该怎么做呢？

```
<input type="radio" class="radio-check" name="type" id="check1" value="0" checked />
<label for="check1">$99.99</label>
<input type="radio" class="radio-check" name="type" id="check2" value="1" />
<label for="check2">None</label>

$('#check1').change(function(){
    $('amount').html('$99.99'));
});

<button class="btn" type="submit">Pay <span id="amount" class="amount">$249.99</span></button> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:27:55.420

当前的解决方案在取消选择第一个单选元素时不会触发更改事件。试试这个 - [**jsFiddle here**](http://jsfiddle.net/X5L2t/1/)。

* * *

**jQuery：**

```
$('input[name=type]').on('change', function(){
    $('.amount').html('$99.99');
}); 
```

**HTML：**

```
<input type="radio" class="radio-check" name="type" id="check1" value="0" checked />
<label for="check1">$99.99</label>
<input type="radio" class="radio-check" name="type" id="check2" value="1" />
<label for="check2">None</label>

<button class="btn" type="submit">Pay <span class="amount">$249.99</span></button> 
```

* * *

我猜你最终想要做的是[**这样的 jsFiddle**](http://jsfiddle.net/X5L2t/3/)。

```
$('input[name=type]').on('change', function(){
    if($(this).prop('value') == 1) {
      $('.amount').html('$99.99');
    }
    else {
      $('.amount').html('$249.99');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:20:33.233

用这个...

```
$('#check1').on('change', function(){
    $('.amount').html('$99.99');
});

 <input type="radio" class="radio-check" name="type" id="check1" value="0" checked />
<label for="check1">$99.99</label>
<input type="radio" class="radio-check" name="type" id="check2" value="1" />
<label for="check2">None</label>

<button class="btn" type="submit">Pay <span class="amount">$249.99</span></button> 
```

看到这个**[jsFiddle 演示](http://jsfiddle.net/bWmU8/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T21:32:23.967

我的答案：[小提琴演示](http://jsfiddle.net/adyJ6/)

在身体负载上加载第一个标签。

然后在每个变化更新量跨度。

CSS：

```
.amount
{
    background-color: lightblue;
    padding:5px;
    margin:10px;
} 
```

html:

```
<input type="radio" class="radio-check" name="type" id="check1" value="0" checked />
<label for="check1">$99.99</label>
<input type="radio" class="radio-check" name="type" id="check1" value="1" />
<label for="check2">None</label>
<br /><br />
<span class='amount'>here</span> 
```

脚本：

```
var load_val = $('.radio-check:checked').next('label').text();
$('.amount').text(load_val);
$('.radio-check').change(function() { 
load_val = $(this).next('label').text();
$('.amount').text(load_val); 
}); 
```

# r - 写一个函数来计算R中的PDF？

> ID：16070405
> 
> 赞同：1
> 
> 时间：2013-04-17T21:16:07.087
> 
> 标签：r, function, probability

我要编写一个函数来计算 PDF，建议我使用 if/elseif/else 语句。但是，每当我尝试这样做时，我都会收到错误消息，但我不确定我做错了什么？

这是函数应该计算的 PDF：

fx = 0.3 if (0<=x<1)
0.1 if (1<=x<2)
0.25 if (2<=x<3)
0.15 if (3<= x<4)
如果 (4<=x<5) 则为 0.2
否则为 0

这是我的代码：

```
 fx = function(x)
    { 
    if (0<=x<1) {
    pdf=0.3
    } elseif (1<=x<2) {
    pdf=0.1
    } elseif (2<=x<3) {
    pdf=0.25
    } elseif (3<=x<4) {
    pdf=0.15
    } elseif (4<=x<5) {
    pdf=0.2
    } else 
    pdf=0

    pdf
    } 
```

我检查了我的'}'，但它们似乎都放置得当。我尝试将“pdf”更改为“fx”，但这不起作用。我哪里错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T21:25:36.897

```
fx <- function(x) c(0, 0.3,0.1,0.25,0.15,0.20, 0)[findInterval(x, c(-Inf, 0:5, Inf))] 
```

该`findInterval`函数从其第二个参数定义的间隔序列中返回其第一个参数的位置，并可用于从向量中选择概率。支持域之外的值根据要求被选为 0 值。它在下限关闭的情况下特别有用，因为该`cut`函数的默认设置是关闭上限。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T21:35:33.800

您的代码有两个问题

1/ 诸如 a <= x < b 之类的表达式在数学中是合法的，但在代码中是不合法的。在代码中你需要一个 <=x && x < b

2/ 你需要使用“else if”而不是“elseif”

此代码有效

```
fx = function(x)
{ 
if (0<=x && x<1) {
pdf=0.3    
} else if (1<=x && x<2) {
pdf=0.1
} else if (2<= x&& x<3) {
pdf=0.25
} else if (3<=x && x<4) {
pdf=0.15
} else if (4<= x&& x<5) {
pdf=0.2
} else 
pdf=0

pdf
} 
```

此外，作为一种优化，您应该只需要反复测试 x < b，而不是 a。你不应该需要一个 pdf 变量。这导致以下代码，但我猜测上面发布的内置函数更有效。

```
fx = function(x)
{ 
if (x<0) 0
else if (x<1) 0.3
else if (x<2) 0.1
else if (x<3) 0.25
else if (x<4) 0.15
else if (x<5) 0.2
else 0
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T00:53:19.713

您可以使用`stepfun`创建一个阶梯函数（这就是您的 PDF）

```
fx <- stepfun(x = 0:5, y = c(0,0.3,0.1,0.25,0.15,0.20,0)) 
```

如果你想要一个矢量化版本，那么你可以使用`Vectorize`

```
vfx <- Vectorize(fx) 
```

`stepfun`可以使用很好地绘制对象（有关示例，`plot`请参见[https://stackoverflow.com/a/16072697/1385941 ）](https://stackoverflow.com/a/16072697/1385941)

# java - 同步 BlockingQueues 的 ArrayList

> ID：16070409
> 
> 赞同：0
> 
> 时间：2013-04-17T21:16:28.623
> 
> 标签：java, multithreading, arraylist, synchronization, blockingqueue

在 Java 中，我需要一个`ArrayList`60`LinkedBlockingQueue`秒的对象。将60秒`ArrayList`在程序的开头，同时仍然是单线程的。然后一个线程将到s 而另一个线程将。是否需要显式同步此对象？`.add()``LinkedBlockingQueue``.add()``LinkedBlockingQueue``.poll()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T21:19:58.180

不，如果列表在初始化后没有被修改，那么你不需要同步它。我建议您使用[UnmodifiableList](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableList.html)而不是 ArrayList - 如果有人在初始化后尝试修改列表，您将获得运行时异常，这比竞争条件更可取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:35:18.310

> 是否需要显式同步此对象？

如果您在完成构建*后*`List`分叉线程，那么您就可以了。但是，如果它是真正不可变的，我会使用数组而不是 Collection。你可以这样做：

```
BlockingQueue[] blockingQueueArray =
   blockingQueueList.toArray(new BlockingQueue[blockingQueueList.size()]); 
```

# processing - 处理中两个二维数组之间的深拷贝

> ID：16070411
> 
> 赞同：0
> 
> 时间：2013-04-17T21:16:39.500
> 
> 标签：processing, multidimensional-array, deep-copy

对于我正在处理的项目，我有两个由 2D 数组形成的网格，其中一个允许用户在其中绘制图像，另一个显示提交的最后一个图像。但是，我的代码正在制作它的浅拷贝而不是深拷贝，我需要找到一种在处理中进行深拷贝的方法。这是我的浅拷贝代码片段：

```
 for (int i = 0; i < cols; i++) {
     for (int j = 0; j < rows; j++) {
     mainGrid[i][j] = userGrid[i][j];
    }
  } 
```

在处理中执行此操作的最简单方法是什么？我一直在广泛寻找最简单的方法来将我的 userGrid 的所有内容深度复制到我的 mainGrid 中，例如使用 Java Deep-Copy 库，但我不太确定如何使用这个库的工具将二维数组复制到另一个数组中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T13:43:00.580

我看到的最简单的选项是使用灵活且专为此设计的[arrayCopy() 。](http://processing.org/reference/arrayCopy_.html)这是一个快速演示：

```
int nx = 5;
int ny = 5;
int[][] mainGrid;
int[][] userGrid;

void setup(){
  //init
  mainGrid = new int[nx][ny];
  userGrid = new int[nx][ny];
  //populate with dummy data to test
  for(int y = 0 ; y < ny; y++){
    for(int x = 0; x < nx; x++){
      userGrid[x][y] = round(random(nx)+random(ny));
    }
  } 

  println("userGrid:\n"+print2DArray(userGrid,nx,ny,true));

  arrayCopy(userGrid,mainGrid);//copy userGrid into mainGrid

  println("mainGrid:\n"+print2DArray(mainGrid,nx,ny,true));
}
//utility to pretty print 2D arrays 
String print2DArray(int[][] arr,int sx,int sy,boolean printIds){
  String out = "";
  for(int i = 0 ; i < sx*sy; i++){
    int x = i/sx;
    int y = i%sx;
    boolean isLastOnLine = i%sx == sx-1;
    out += (printIds ? "["+x+"]"+"["+y+"]:" : "")+arr[x][y]+(isLastOnLine ? "":",");
    if(isLastOnLine) out += "\n"; 
  }
  return out;
} 
```

# python - Django将对象传递给类

> ID：16070414
> 
> 赞同：0
> 
> 时间：2013-04-17T21:16:48.597
> 
> 标签：python, django

仍然在尝试传递列对象时遇到问题，因此我可以在 ContactCSVModel 中使用它。

我怎样才能做到这一点？

这就是我使用它的方式...

```
 # Try and import CSV
        ContactCSVModel.import_data(data=file, extra_fields=[
             {'value': upload.group_id, 'position': 5},
             {'value': upload.uploaded_by.id, 'position': 6}], column=form) 
```

**这是课...**

```
class ContactCSVModel(CsvModel):

    I WANT TO USE 'column' HERE

    I.E.

    IF column == x

    first_name = CharField()
    last_name = CharField()
    company = CharField()
    mobile = CharField()
    group = DjangoModelField(Group)
    contact_owner = DjangoModelField(User)

    class Meta:
        delimiter = ","
        dbModel = Contact
        update = {'keys': ["mobile", "group"]} 
```

**CSV模型**

```
class CsvModel(BaseModel):

    def __init__(self, data, delimiter=None):
        super(CsvModel, self).__init__(data)
        self.delimiter = None
        if delimiter:
            self.delimiter = delimiter
        elif self.has_class_delimiter():
            self.   delimiter = self.cls.Meta.delimiter
        if not isinstance(data, Model):
            self.construct_obj_from_data(data)
        else:
            self.construct_obj_from_model(data)

    def validate(self):
        if len(self.attrs) == 0:
            raise ImproperlyConfigured("No field defined. Should have at least one field in the model.")
        if not self.cls.has_class_delimiter() and not getattr(self, "delimiter", False) and len(self.attrs) > 1:
            raise ImproperlyConfigured(
            "More than a single field and no delimiter defined. You should define a delimiter.")

    @classmethod
    def get_importer(cls, extra_fields=[]):
        return CsvImporter(csvModel=cls, extra_fields=extra_fields)

    def construct_obj_from_data(self, data):
        self.validate()
        values = {}
        silent_failure = self.cls.silent_failure()
        self.multiple_creation_field = None
        composed_fields = []
        index_offset = 0
        data_offset = 0
        for position, (attr_name, field) in enumerate(self.attrs):
            field.position = position
            if isinstance(field, ComposedKeyField):
                composed_fields.append(field)
                index_offset += 1
                continue
            if self.cls.has_class_delimiter() or self.delimiter:
                value = data.pop(position - index_offset - data_offset)
                data_offset += 1
            else:
                value = data.pop(0)
            try:
                if isinstance(field, IgnoredField):
                    continue
                if hasattr(field, 'has_multiple') and field.has_multiple:
                    remaining_data = [value] + data[:] # value should be re-added
                    # as it has been pop before
                    multiple_values = []
                    for data in remaining_data:
                        multiple_values.append(self.get_value(attr_name, field, data))
                    self.set_values(values, self.field_matching_name, multiple_values)
                    self.multiple_creation_field = self.field_matching_name
                else:
                    value = self.get_value(attr_name, field, value)
                    self.set_values(values, self.field_matching_name, value)
            except ValueError, e:
                if silent_failure:
                   raise SkipRow()
                else:
                    raise e
        if self.cls.is_db_model():
            for field in composed_fields:
                keys = {}
                for key in field.keys:
                    keys[key] = values.pop(key)
                values[self.field_matching_name] = self.get_value(attr_name, field, keys)
            self.create_model_instance(values) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:30:45.110

您可以即时上课：

```
def foo(column):
    class Foo(object):
        if column == 'a':
            bar = 'a'
            foo = 'c'
        else:
            bar = 'b'

    return Foo

for x in 'ab':
    cls = foo(x)
    print cls.bar
    print cls.foo 
```

还有其他方法可以做到这一点，查找有关元类的信息。[这](https://www.youtube.com/watch?v=sPiWg5jSoZI)是关于这个主题的一个非常好的讲座。

在你的情况下，我会这样做：

```
def import_data(column, *args, **kw):
    # make custom ContactCSVModel
    class ContactCSVModel(CsvModel):
        # IF column == x

        first_name = CharField()
        last_name = CharField()
        company = CharField()
        mobile = CharField()
        group = DjangoModelField(Group)
        contact_owner = DjangoModelField(User)

        class Meta:
            delimiter = ","
            dbModel = Contact
            update = {'keys': ["mobile", "group"]}

    return ContactCSVModel.import_data(*args, **kw)

# in another file, you can even mask it as your model class,
# I wouldn't do that however
import somemodule as ContactCSVModel

# Try and import CSV
ContactCSVModel.import_data(form, data=file, extra_fields=[
                           {'value': upload.group_id, 'position': 5},
                           {'value': upload.uploaded_by.id, 'position': 6}])

# or you could make a function that returns a class
def contact_model(column):
    # make class
    return ContactModel

# then
from somemodule import contact_model

ContactCSVModel = contact_model(column=form)

# then use as normally
ContactCSVModel.import_data(data=file, extra_fields=[
                           {'value': upload.group_id, 'position': 5},
                           {'value': upload.uploaded_by.id, 'position': 6}]) 
```

# javascript - 读取文本框的值

> ID：16070415
> 
> 赞同：0
> 
> 时间：2013-04-17T21:16:54.170
> 
> 标签：javascript, d3.js

我对 Javascript、HTML、D3 非常陌生，这是一个愚蠢的问题 :)

所以我添加了一个文本框和按钮，如下所示：

```
<div>
  <input type="text" id="count" name="howmany">
  <input type="button" id="drawbtn" value="draw">
</div> 
```

然后在我的`<script type="text/javascript">`标签内，我使用一些 D3.js 来绘制散点图。目前我显示的圈数是硬编码的。例如像这样：

```
var numDataPoints = 100; 
```

所以当我点击我的按钮时，它会绘制一个散点图，上面有 100 个圆圈。我需要做的就是告诉它读取该文本框中的值并绘制与我在文本框中键入的一样多的圆圈，而不总是硬编码的 100 个圆圈。
这就是我现在要做的一切:)

**注意**：无论我们需要添加什么来做到这一点，还请注意它应该仍然与 IE7 和 IE8 兼容......我不想使用一些 IE7 无法理解的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:18:58.957

```
var numDataPoints = document.getElementById('count').value; 
```

或者如果你使用 jQuery

```
var numDataPoints = $("#count").val(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T21:21:34.350

您应该能够`Number`通过组合[`getElementById()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)和来获得值[`parseInt()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)：

```
var numDataPoints = parseInt(document.getElementById('count').value, 10); 
```

指定它以 base-10 解析，`10`而不是尝试*猜测*基数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T21:18:47.497

这应该可以解决问题：

```
var numDataPoints = document.getElementById("count").value; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T21:20:11.107

您可以使用以下内容更新 JS 以从 中读取`<input>`：

```
var numDataPoints = document.getElementById("count").value; 
```

当您单击按钮时，您可以使用类似的东西来运行它：

```
var btn = document.getElementById("drawbtn");
btn.addEventListener("click", function() {
    var numDataPoints = document.getElementById("count").value;
    console.log(numDataPoints);
}); 
```

[http://jsfiddle.net/ryanbrill/gbjqP/](http://jsfiddle.net/ryanbrill/gbjqP/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T21:23:58.260

[http://jsfiddle.net/w6ypF/](http://jsfiddle.net/w6ypF/)

您可以像这样获取**“count”**输入的值：

```
var numDataPoints = document.getElementById('count').value; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-07T09:07:50.937

您可以制作一个 d3 文本框，保留相同的属性代码，例如 .attr("x", ect) 并且它的工作原理相同；

您可以将属性类应用于它 .attr("class", "anyname") 以允许使用 d3 中的外来对象来操作或调用对象的值（尽管还没有太多关于它的文档并且外来对象没有' t 似乎允许 .transition() 方法，但所有其他功能保持不变。

```
/*Imaging width and height being of an SVG object
width=screen.width, height=screen.height;
and rows+Cols of that of an object (using d3 conventionality
to assign document.getElementById=('inputbox').value;
amazingly adding a third dimension of selection to style='resize: none;' works 
```

*/

```
var foreign1 = mainBox.append("svg:foreignObject")
.attr("width", 600).attr("height", 700).attr("x", 93).attr("y", 300).attr("rx", 20).attr("ry", 20)
.style("resize", 'none')
.append("xhtml:body")
.html("<textarea style='font: Times; resize: none; font-size: 15pt; border: 1px solid lightgray; outline: none; border-radius: 10px;' id='inputbox' class='foo' rows='13' cols='40' type='text'> Message... </textarea>"); 
```

我在 .html 和 .style 中放了一些元素，resize none 以制作一个无法调整大小的文本区域，接受用户输入:)

# web-config - 遍历 web.config 中的“自定义”部分

> ID：16070419
> 
> 赞同：1
> 
> 时间：2013-04-17T21:17:08.470
> 
> 标签：web-config, configurationmanager, webconfigurationmanager

我正在创建一个验证页面，以便当我的应用程序从 dev->qa->prod 移动时，我可以验证 web.config 中的所有设置是否已更改。

循环连接字符串和应用程序设置很容易，但我很难从“自定义”部分获取信息。特别是 elmah 数据。

我写了这个行得通，但这是一项非常糟糕的工作，我确信有一种更清洁的方法。

有什么建议么？

```
 string table = "<table border=\"1\"><tr><td colspan=\"2\">Elmah Information</td></tr>";
    Hashtable security = (Hashtable)WebConfigurationManager.GetSection("elmah/security");
    Hashtable email = (Hashtable)WebConfigurationManager.GetSection("elmah/errorMail");
    Hashtable errorlog = (Hashtable)WebConfigurationManager.GetSection("elmah/errorLog");
    table += "<tr><td>allowRemoteAccess</td><td>" + security["allowRemoteAccess"].ToString() + "</td></tr>";
    table += "<tr><td>Error Log Type</td><td>" + errorlog["type"].ToString() + "</td></tr>";
    table += "<tr><td>Error Log Path</td><td>" + errorlog["logPath"].ToString() + "</td></tr>";
    table += "<tr><td>Email To</td><td>" + email["to"].ToString() + "</td></tr>";
    table += "<tr><td>Email From</td><td>" + email["from"].ToString() + "</td></tr>";
    table += "<tr><td>Email Subject</td><td>" + email["subject"].ToString() + "</td></tr>";
    table += "<tr><td>Email SmtpServer</td><td>" + email["smtpServer"].ToString() + "</td></tr>";
    table += "<tr><td>Email Async</td><td>" + email["async"].ToString() + "</td></tr></table>";
    lblElmah.Text = table; 
```

# silverlight - Silverlight 控件在运行时自行调整大小

> ID：16070420
> 
> 赞同：0
> 
> 时间：2013-04-17T21:17:09.930
> 
> 标签：silverlight, resize, controls, translate, coordinate

我有一个有两个版本的应用程序。一个是使用默认网页运行的标准 Silverlight 应用程序（在 Windows 7 上运行）。另一个是 Windows Store 应用程序（在 Windows 8 上运行），其 XAML 和代码几乎完全相同。

在版本和操作系统的运行时，主页上的所有控件都会调整大小。发生这种情况时，我在鼠标/指针移动事件中获得的任何坐标都不正确。

这个问题有两种可接受的解决方案。第一个是设置主页，使控件不调整大小第二个是找到一种方法将调整大小的坐标转换为未调整大小的坐标。

几个小时以来，我已经尝试了很多事情，并希望有人对此有答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:47:25.117

在 Silverlight 或 winRT 应用程序中，如果您想在精确的像素位置上拥有一些控件，您应该使用 Canvas 控件作为父控件。

[http://www.silverlightshow.net/items/Using-the-Canvas-control-in-Silverlight-2-Beta-1.aspx](http://www.silverlightshow.net/items/Using-the-Canvas-control-in-Silverlight-2-Beta-1.aspx)

# facebook - 创建 Facebook 活动并发布封面照片

> ID：16070422
> 
> 赞同：0
> 
> 时间：2013-04-17T21:17:21.220
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我正在使用 php sdk 创建一个 facebook 事件

```
$param = array(
        'name' => $name,
        'start_time' => $ate,
        'description' => $description,
        'picture' => $photo            
    );

$facebook->api('/me/events', 'POST', $param); 
```

是否可以为本次通话中创建的活动设置封面照片？如果没有，我可以以某种方式设置它吗？

该文档说封面字段需要一个照片ID。如果我还没有上传照片，它没有 id，我该怎么办？

我是否将照片上传到发出“创建事件”操作的用户的 Facebook 帐户，以这种方式获取照片 ID，然后将其发布到事件中？

如果我不想将其上传到用户个人资料怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:06:35.423

代码示例，创建事件时上传封面照片：

```
<?php
//extract data from the post
extract($_POST);

//set POST variables
$url = 'https://graph.facebook.com/me/events';

$data["file"] = "@pika.jpg;type=image/jpeg";
$data["access_token"] = "PUT_USER_ACCESS_TOKEN_HERE";
$data["name"] = "testing";
$data["start_time"] = "2013-04-25";
$data["end_time"] = "2013-04-25";
$data["description"] = "coffee";
$data["location"] = "oldtown";
$data["privacy_type"] = "FRIENDS";

//make the POST request
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_VERBOSE, 1);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_HTTPHEADER, $header);
curl_setopt($curl, CURLOPT_POSTFIELDS, $data);
$result = curl_exec($curl);

 //curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "Content-Type: multipart/form-data; boundary=--$srand");

//close connection
curl_close($ch);

?> 
```

代码示例，创建事件后，您还可以通过上传新照片来替换封面照片：

```
<?php
//extract data from the post
extract($_POST);

//set POST variables
$url = 'https://graph.facebook.com/PUT_EVENT_ID_HERE';

$data["file"] = "@pikachu.jpg;type=image/jpeg";
$data["access_token"] = "PUT_USER_ACCESS_TOKEN_HERE";

//make the POST request
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_VERBOSE, 1);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_HTTPHEADER, $header);
curl_setopt($curl, CURLOPT_POSTFIELDS, $data);
$result = curl_exec($curl);

//close connection
curl_close($ch);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T06:32:14.437

要上传活动的封面照片 - 首先，您不能在创建活动时执行此操作。您首先必须创建一个事件，结果您将获得`event_id`. 使用 this `event_id`, 拨打电话：

`\POST /{event-id}`带参数：`cover_url`

这是目前**唯一**的方法（我已经测试过）。[本文档](https://developers.facebook.com/docs/graph-api/reference/event/picture/#publish)中描述的方法目前不起作用，这被报告为错误。您可以订阅此[**错误**](https://developers.facebook.com/bugs/274455709396178/)以获取有关此错误的任何更新。

**代码：**

```
$param = array(
    'cover_url' => '{image-link}'
);

$facebook->api('/{event-id}', 'POST', $param); 
```

# android - 在 ksoap2 中发送带有子元素的 SOAP 请求

> ID：16070429
> 
> 赞同：0
> 
> 时间：2013-04-17T21:17:52.973
> 
> 标签：android, android-ksoap2

我什至不确定这是否就是我想要做的事情，但我需要向服务器发送一些看起来像这样的东西

```
<ECMMAID>int</ECMMAID>
  <appIncData>
    <int_inc_num>int</int_inc_num>
    <respTime>dateTime</respTime>
    <arriveTime>dateTime</arriveTime>
    <sceneControlledTime>dateTime</sceneControlledTime>
    <retStationTime>dateTime</retStationTime>
    <sceneClearedTime>dateTime</sceneClearedTime>
    <assist>boolean</assist>
    <unitNotes>string</unitNotes>
    <incidentPath>string</incidentPath>
    <totalCalculatedFromThePathMiles>double</totalCalculatedFromThePathMiles>
    <startOdmeterMilage>double</startOdmeterMilage>
    <endOdmeterMilage>double</endOdmeterMilage>
    <startEngineHours>double</startEngineHours>
    <startPumpHoursReading>double</startPumpHoursReading>
    <engineHours>double</engineHours>
    <currentPumpHoursReading>double</currentPumpHoursReading>
  </appIncData> 
```

现在，我使用过的所有其他 Web 服务`ksoap`一直只是一堆具有值的属性，但没有在标签下有属性子项的地方

基本上就是这样

```
request.addProperty("ECMMAID","");
request.addProperty("Name",);
request.addProperty("Content",);
request.addProperty("STID",);
request.addProperty("IncNum",);
request.addProperty("Notes","");
request.addProperty("uploader",); 
```

我如何在 ksoap 中发送我需要的东西，或者我应该只使用`HttpPost?`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:24:11.277

尝试类似于下面的代码。我在我的应用程序中使用了类似的代码将 xml 格式数据发送到服务器。

```
 PropertyInfo req = new PropertyInfo();
        req.name="appIncData";// may be different in your case  
        req.type=String.class;
        req.setValue("<ECMMAID>"+int+"</ECMMAID>"+
                     "<appIncData>"+
                    "<int_inc_num>"+int+"</int_inc_num>"+
                    " <respTime>"+dateTime+"</respTime>"+
        "</appIncData>");

        request.addProperty(req); 
```

# c# - 字典通配符搜索

> ID：16070436
> 
> 赞同：3
> 
> 时间：2013-04-17T21:18:30.020
> 
> 标签：c#, regex, search, dictionary

我正在尝试使用通配符和 Dictionary 类创建字符串搜索

```
Dictionary<string, Node> Nodes = new Dictionary<string, Node>();

public bool ResponceSearch(string search) {
     if (Nodes.ContainsKey(search)) {
         label1.Text = Nodes[search].GetResult();
         return true;
     }
} 
```

搜索字符串，例如

```
What is that 
```

并且字典包含键，例如

```
Who is *
What is * 
```

因此，搜索会根据“what is that”搜索字符串找到“what is *”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T21:27:01.713

如果您可以将字典键更改为正确的[正则表达式](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)，例如：

```
@"Who is \w+"
@"What is \w+" 
```

那么这个问题就变得简单了很多：

```
public bool ResponceSearch(string search) {
     var node = 
         (from p in Nodes
          where Regex.Matches(p.Key, search)
          select p.Value)
         .FirstOrDefault();
     if (node != null) {
         label1.Text = node.GetResult();
         return true;
     }
} 
```

你甚至可以为此编写扩展方法。例如：

```
public static bool ContainsKeyPattern<T>(this Dictionary<string, T> nodes, string search) 
{
     return nodes.Keys.Any(k => Regex.Matches(k, search));
}

public static T GetItemByKeyPattern<T>(this Dictionary<string, T> dict, string search) 
{
     return
         (from p in dict
          where Regex.Matches(p.Key, search)
          select p.Value)
         .First();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-20T16:41:32.137

您也可以尝试关注。看起来简单多了。您可以使用的另一种方法是`string.EndsWith()`：

```
return Nodes.Any(item => item.Key.StartsWith("Who is"));
return Nodes.Any(item => item.Key.StartsWith("What is")); 
```

-或者-

```
KeyValuePair<string, object> viewDto = ctx.ActionParameters.FirstOrDefault(item => item.Key.ToLower().EndsWith("Who is"));
KeyValuePair<string, object> viewDto = ctx.ActionParameters.FirstOrDefault(item => item.Key.ToLower().EndsWith("What is")); 
```

# ruby-on-rails - Rails：带有 button_to 的按钮组

> ID：16070437
> 
> 赞同：3
> 
> 时间：2013-04-17T21:18:30.760
> 
> 标签：ruby-on-rails, twitter-bootstrap

我将 Bootstrap 与我的 Rails 应用程序一起使用，我想创建一个按钮组，其中包含使用`<%=button_to%>`.

这就是我所拥有的：

```
 <div class="btn-group icons">
      <%= button_to(raw("<i class='icon-undo'></i>"), project_steps_path(@project), :method=>:post, :class=> "btn undoIcon disabled", :title=>"undo" )%>
      <button class="btn reorderIcon" title="reorder steps"><%=image_tag("icons/reorder_icon.png")%></button>
      <button class="btn expandIcon" title="expand"><i class="icon-fullscreen"></i></button>
  </div> 
```

我希望`<%= button_to%>`生成类似于`<button class=...>`html 的内容，但我得到了以下内容：

```
<div class="btn-group icons">
      <form action="/projects/18/steps" class="button_to" method="post"><div><input class="btn undoIcon disabled" title="undo" type="submit" value="&lt;i class='icon-undo'&gt;&lt;/i&gt;"><input name="authenticity_token" type="hidden" value="waRzPnaIUfWBt+sAAQR5STOnilLXhirOx/GaE1i1kFI="></div></form>
      <button class="btn reorderIcon" title="reorder steps"><img alt="Reorder_icon" src="/assets/icons/reorder_icon.png"></button>
      <button class="btn expandIcon" title="expand"><i class="icon-fullscreen"></i></button>
</div> 
```

在我的页面上产生以下内容：

![在此处输入图像描述](https://i.stack.imgur.com/sbV04.png)

如何`<%=button_to raw()%>`正确使用创建按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:25:02.090

我通过替换解决了这个`button_to`问题`link_to`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-12T13:58:12.923

你需要一点 CSS。这就是我所做的：

```
<div class='btn-group form-btn-group'>
  <%= button_to 'btn1', '#', class: 'btn', form_class: 'btn btn-default' %>
  <%= button_to 'btn2', '#', class: 'btn', form_class: 'btn btn-default' %>
</div> 
```

和CSS：

*   `<form>`元素需要类，但应该为实际的元素`.btn`留出空间`<button>`
*   取消`<button>`元素的样式

```
 .form-btn-group > .btn {
  padding: 0;
}
.form-btn-group > .btn > .btn {
  border: none;
  background: none;
} 
```

# wifi - 如何识别智能客户端 GIS/WISPr

> ID：16070438
> 
> 赞同：0
> 
> 时间：2013-04-17T21:18:35.840
> 
> 标签：wifi, roaming, wispr

如何检测寻求[http://en.wikipedia.org/wiki/WISPr](http://en.wikipedia.org/wiki/WISPr) XML 提要的设备？

我猜应该有某种标准化的请求。不过，我设法发现 iPass 本身正在通过，`iPassConnect`而不是任何包含 WISPr 的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T15:08:53.433

Wispr 和 GIS 是不同的协议，今天，超过 20 个接入网关支持 iPass 的 GIS：

*   思科 BBSM
*   Nomadix USGII/HSG/AG2000
*   Aptilo 移动访问服务器
*   ANTLabs ezXcess 服务器
*   Pronto 热点控制器
*   ServiceFactory Orbyte 无线系统
*   Colubris CN3000
*   Wificom SAB 网关
*   诺基亚 P022 门禁控制器
*   Unitech Intelligate
*   Gemtek Systems G6000 公共门禁控制器
*   Mikrotik RouterOS 热点系统

更多信息在这里[http://www.pcca.org/standards/architecture/ipass_pwlan.pdf](http://www.pcca.org/standards/architecture/ipass_pwlan.pdf)

# php - mySQL 通过 RESULT 但 INSERT 没有发生

> ID：16070439
> 
> 赞同：0
> 
> 时间：2013-04-17T21:18:37.763
> 
> 标签：php, jquery, mysql, insert

我有一个提交给自己的表单。在提交时，会生成并运行一个查询，如果 ($result) 然后我让 $success = 1 在提交电子邮件然后关闭表单的 jQuery 函数中使用。jQuery 函数取决于回显为“1”的 $success 值来触发。最近有人提交表单，生成了电子邮件，但是插入查询似乎没有向数据库中输入任何内容。

PHP代码：

```
require_once ('inc/dbconnect.php');
include ('inc/dataFormat.php');

if (isset($_POST['submit']) && $_POST['submit'] == 'Submit') {

    $qins = sprintf('INSERT INTO becmtrack (siteName, siteNum, location, cluster, enodeName, upgDate, tech, techNum, becm, becmFail, ecm1, ecm2, ecm3, dateAlu, aluContact, aluContNum, trackNum, comment) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)',  [VALUES ARE HERE]);
    $rins = mysqli_query($dB, $qins) or die('Error in query => ' . $qins . '<br />' . mysqli_error($dB));

    $success = ($rins) ? 1 : 0;

} 
```

jQuery 代码（在文档就绪函数内）：

```
if ("<? echo $success; ?>" == 1) {
   var mailBody = 'Site Name: <? echo $_POST['siteName2'];?>';
   mailBody += '%0ASite Number: <? echo $_POST['siteNum'];?>';
   mailBody += '%0ALocation Code: <? echo $_POST['location'];?>';
   mailBody += '%0AeCEMs Removed: <? echo $_POST['ecm1'] . ', ' . $_POST['ecm2'] . ', ' . $_POST['ecm3'];?>';
<? if ($_POST['dateAlu'] != '') { ?>
   mailBody += '%0ADate Cards Returned to Company: <? echo $_POST['dateAlu'];?>';
   mailBody += '%0AALU Contact: <? echo $_POST['aluContact'];?>';
   mailBody += '%0AContact Number: <? echo $_POST['aluContNum'];?>';
   mailBody += '%0AShipping Tracking Number (if applicable): <? echo $_POST['trackNum'];?>';
<? } ?>
$('#reloadTrig',window.opener.document).trigger('click');
window.open('mailto:email.address@somecompany.com?subject=eNodeB%20bCEM%20Upgrade%20Completed&body='+mailBody);
if ('<? echo $_POST['addmore'];?>' != 'addmore') {
window.close();
    }
} 
```

该代码是否可以在不将数据插入数据库的情况下生成有效结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:29:26.803

在插入后尝试调用**mysqli_commit** 。

**PS**你不应该使用 sprintf 来传递参数，这不会逃避它们。您应该为此使用**mysqli_prepare**，或者只在每个参数周围调用**mysqli_real_escape_string 。**

您可以制作功能：

```
function escapeArray($arr)
{
  $ret = array();
  foreach ($arr as $value)
     $ret []=mysqli_real_escape_string($value);
  return $ret;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:35:44.233

根据此文档，在大多数情况下，您在成功连接到数据库后的查询都是正确的：

[http://www.php.net/manual/en/mysqli.query.php](http://www.php.net/manual/en/mysqli.query.php)

`Returns FALSE on failure. For successful SELECT, SHOW, DESCRIBE or EXPLAIN queries mysqli_query() will return a mysqli_result object. For other successful queries mysqli_query() will return TRUE.`

* * *

您需要检查是否真的有插入的行。

根据此处的文档（以及给定的示例）

[http://php.net/manual/en/mysqli.commit.php](http://php.net/manual/en/mysqli.commit.php)

您可以通过 mysqli_commit 进行检查（在示例中，重复条目失败，而不是语法错误）：

`$all_query_ok ? $mysqli->commit() : $mysqli->rollback();`

或通过 mysqli_affected_rows （如果插入语句真的插入一行，这将是正确的）

```
$result_query = @mysqli_query($query, $connect);
            if (($result_query == false) &&
               (mysqli_affected_rows($connect) == 0)) 
```

# jquery - JQuery中的克隆不起作用

> ID：16070441
> 
> 赞同：1
> 
> 时间：2013-04-17T21:18:49.663
> 
> 标签：jquery, clone

我让它在一页上工作-但是当我提取代码时它不起作用。

我已将代码最小化以供您查看：

```
<table class="lightlines">
<tr>
  <td valign="top">Title:</td>
  <td><input type="text" value="" name="titleText" id="titleText"> 
  <p id="cloneMe">
    <table class="lightlines">
    <tr>
      <td>P/N: </td>
      <td><input type="text" value="" name="pnText" id="pnText"></td>                             
      <td>Description: </td>
      <td><input type="text" value="" name="pnDescText" id="pnDescText"></td>
    </tr>
    </table>
  </p>
  <p id="theClones">
  </p>
 </td>
</tr>
<tr>
  <td colspan="6" align="right"><input type="button" name="addPNRow" id="addPNRow" value="add row" /><input type="button" name="saveTitleText" id="saveTitleText" value="save"  /></td>
</tr>
</table>
<script>
$(function(){
 var cloneCount = 0;
 $('#addPNRow').click(function(){
    var cl = $('#cloneMe').clone().attr({
  id: 'cloneMe_' + cloneCount
}).find('[id^="pnText"]').attr({
  value: '',
  id: 'pnText_' + cloneCount
}).end().find('[id^="pnDescText"]').attr({
  value: '',
  id: 'pnDescText_' + cloneCount
}).end().appendTo('#theClones');
    cloneCount++;
});
  });

</script> 
```

这是一个小提琴：http: [//jsfiddle.net/Mh4f8/11/](http://jsfiddle.net/Mh4f8/11/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:39:21.783

whenever I need to clone a block of HTML, I make sure the html does not have any IDs in it at all.

if you're ok with removing "ids" from the html, then you can change the javascript to what I have below

# the way I would build it

[fiddle, I ripped out the table](http://jsfiddle.net/dfygrvty/UE7NG/)

## html

```
<div class="lightlines">
    <fieldset>
        <label class="label-title"><span>Title:</span>
            <input type="text" value="" name="titleText"/>   
        </label>
    </fieldset>
    <fieldset class="clone-me">
        <label><span>P/N:</span>
            <input type="text" value="" name="pnText"/>                            
        </label>
        <label>
            <span>Description:</span>
            <input type="text" value="" name="pnDescText"/>  
        </label>
    </fieldset>
</div>
<div class="button-container">
    <input type="button" name="addPNRow" id="addPNRow" value="add row" />
    <input type="button" name="saveTitleText" id="saveTitleText" value="save"  />
</div> 
```

## css

```
div.lightlines .button-container{float:right;}
div.lightlines label {margin-left:2em;}
div.lightlines label.label-title {margin-left:0.5em;} 
```

## javascript

```
$(function(){
 $('#addPNRow').click(function(){
     var $cloneMe = $(".clone-me"),$cloned = $cloneMe.clone(); 

    $cloned.find("input").each(function(index,elem){
      $(this).val("");
    });
    $cloneMe.toggleClass("clone-me").parent().append($cloned);
  });
}); 
```

# your fix

found the issue, the way you were using tables after cloning wasn't quite valid w3c spec. your updated [fiddle](http://jsfiddle.net/dfygrvty/Mh4f8/16/)

```
<table class="lightlines">
  <tr>
    <td>
      <fieldset class="clone-me">
        <label><span>P/N:</span>
            <input type="text" value="" name="pnText"/>                            
        </label>
        <label>
            <span>Description:</span>
            <input type="text" value="" name="pnDescText"/>  
        </label>
    </fieldset>
    </td>
  </tr>
  <tr>
    <td  align="right"><input type="button" name="addPNRow" id="addPNRow" value="add row" /><input type="button" name="saveTitleText" id="saveTitleText" value="save"  /></td>
  </tr>
</table>

<script>

$(function(){
     $('#addPNRow').click(function(){
         var $row = $("fieldset.clone-me").closest("tr"), $cloned = $row.clone();
         $cloned.find("input").each(function(index,elem){
            $(this).val("");
        }).end().find(".clone-me").toggleClass("clone-me");
         $(this).before($cloned);
     });

});
</script> 
```

# android - Android 跟踪返回了哪个异步 HTTP 调用

> ID：16070442
> 
> 赞同：2
> 
> 时间：2013-04-17T21:18:54.273
> 
> 标签：android, httprequest

在 iOS 中（冷静下来，我会在一秒钟内进入 android 部分）你可以创建一个`NSURLConnction`并使用这个对象来识别所进行的调用：

```
NSURLConnection *urlConnection = [NSURLConnection connectionWithRequest:request delegate:self]; 
```

然后在回调代码中你可以说：

```
if (connection == urlConnection)
{
    // this was my urlConnection    
}
else if (connection == urlConnection2)
{
    // this was my urlConnection    
} 
```

在 Android 中，我有一个运行我的 HTTP Get 请求的 AsyncTask。我还有一个`DidFinishConenction`在任务完成时调用函数的接口。但是，当它被调用时，我需要一种方法来识别是哪个调用。这样我就可以正确处理结果。

在 android 中，您可以使用以下命令调用 AsyncTask：`new MyServerConnection().execute(myUrl);`

有没有办法识别此任务并将其与后来类似于 iOS 的另一个任务进行比较？

谢谢，

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:29:20.510

`AsyncTask`不适用于回调。相反，您覆盖了任务的`onPostExecute`和/或`onProgressUpdate`方法。（您可以从这些方法中进行自己的回调。）您可以简单地使用`==`来比较`MyServerConnection`对象。或者，您也可以设计您`MyServerConnection`的标识符字段（如果您愿意，它可以自动生成，或者作为构造函数参数接收）并将其用于比较。

# c++ - 匿名管道的 ReadFile 函数

> ID：16070444
> 
> 赞同：1
> 
> 时间：2013-04-17T21:18:56.900
> 
> 标签：c++, windows, ipc

我有一个关于 Windows 管道的问题。在`ReadFile`功能手册中写道：

> 如果正在使用匿名管道并且写入句柄已关闭，则当 ReadFile 尝试使用管道的相应读取句柄进行读取时，该函数返回 FALSE 并且 GetLastError 返回 ERROR_BROKEN_PIPE。

让我们假设从管道中读取每秒发生一次。从上次读取操作开始，发生了以下情况：写入管道操作和关闭写入处理程序。根据上面的手册，该函数返回false - 读取操作失败。我的问题是未读取的数据会发生什么？我怎样才能得到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:22:54.543

正如您可能期望的那样，在将数据放入管道后，您可以将其读取出来，直到到达数据的末尾，*然后*读取将失败。

# postgresql - 如何从字段中获取列名

> ID：16070448
> 
> 赞同：2
> 
> 时间：2013-04-17T21:19:04.683
> 
> 标签：postgresql, haskell

我已经在网上搜索并查看了 postgresql-simple 包的源代码。

查询（或 query_）的结果属于 [QueryResults] 类。获取字段的内容很容易，但是任何人都可以显示一些获取列/字段名称的示例代码吗？PostgreSQL.Simple.FromField 中的 Field 类有一个 name 属性，它返回一个带有列名的 ByteString。但我根本无法从这个列出内容的简单示例中得到：

```
 conn <- connect con
  xs <- query_ conn "select pk,tfrom from feedback"
  forM_ xs $ \(field1,field2) ->
    putStrLn $ T.unpack field2 ++ " has key " ++ show (field1 :: Int) 
```

到还列出列名称的东西（即pk和tfrom）。

在从（例如，人类可读的诊断、统计）存储过程（或表）中执行 select * 时，获取字段/列名称非常有用，因此我们可以在表或存储过程更改时轻松打印结果而无需更改代码。

提供答案后编辑：这是第一个建议的工作代码（B8 是 ByteString）：

```
 putStrLn $ " is names " ++ (B8.toString (fromJust (name field2))) ++ " " ++ (B8.toString (fromJust (name field1))) 
```

现在，在使用第一个建议时仍然存在获取数据和字段名称的问题，因为代码会将内容修复为 Field 类型 - 它不包含数据本身，仅包含元数据。第二个建议解决了这个问题，现在工作代码如下所示：

```
 forM_ xs $ \((data1,field1),(data2,field2)) ->
    putStrLn $ " " ++ (B8.toString (fromJust (F.name field1))) ++ " " ++ (B8.toString (fromJust (F.name field2))) ++ " " ++ (T.unpack data2) ++ " " ++ (show (data1 :: Int)) 
```

我希望这对其他人也有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:57:30.753

我目前没有 Postgres 实例来检查这一点，但您可以尝试引入`instance FromField Field where fromField f = return . const f`，然后使用它`name`来获取字段名称。你可能更普遍地想要

```
instance FromField a => FromField (a, Field) where
  fromField f bs = (,f) <$> fromField f bs 
```

除非我对这个库的工作方式有很大误解，否则我很惊讶那些实例不在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:46:31.533

恐怕不是一个正确的答案，但评论太长了。

如果您查看库的源代码，您将在 Simple/Internal.hs 中看到以下函数

```
name Field{..} = unsafePerformIO (PQ.fname result column) 
```

PQ 是对 libpq（标准 PostgreSQL 客户端库）的引用，[fname](http://www.postgresql.org/docs/current/static/libpq-exec.html#LIBPQ-PQFNAME)为您提供给定结果集和列索引的字段名。所以，显然它是可用的。

现在，我不认为这个函数是导出的，而且我不知道是否有办法解决这个问题，因为我是 Haskell 新手。显然，您可以轻松地修补源。

但是，我认为即使没有将所有查询列类型转换为文本（或类似内容）的字段名可用，您也无法获得动态结果集。否则 postgresql-simple 会将它们作为 Int 或 Date 或类似的形式返回。

# regex - 如何清理 .htaccess 中的 url？

> ID：16070454
> 
> 赞同：0
> 
> 时间：2013-04-17T21:19:33.340
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我有以下结构： `http://website.com/dir1/dir2/article.php?id=315&lang=EN`

我希望以上内容显示为： `http://website.com/dir1/article/315/`

这如何在 .htaccess 中完成？另外，网上是否有一个很好的教程，可以通过不同的场景并清楚地解释这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:30:10.353

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/?$ /$1/dir2/$2.php?id=$3&lang=EN [L,QSA] 
```

**关于 mod_rewrite 的 Fot 教程：**从 www.easymodrewrite.com 开始，然后在 Google 上搜索更多信息。

# responsive-design - 如何与 Susy 有动态的左边距？

> ID：16070460
> 
> 赞同：0
> 
> 时间：2013-04-17T21:19:53.683
> 
> 标签：responsive-design, susy-compass

我正在玩这个 HTML 中 .logo 的定位：

```
 <div class="mod-header">
   <a class="logo" href="#"></a>
 </div> 
```

徽标宽度是固定的，但是我想知道我是否应该让左边距调整到屏幕尺寸。

我已经用 Susy 试过了，这使得 .logo 宽度固定：

```
.logo
  text-indent: -9999px
  float: left
  +rem('width', 120px)
  +rem('margin', 20px 0)
  // margin-left: $column-width 
```

但是，这不会调整左边距。当我尝试：

```
 .logo
   @include span-columns(3,12) 
```

正在进行一些调整，但它是关于宽度，而不是左边距。

我将如何处理这个固定宽度的左边距调整？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:25:08.563

这似乎有效：

```
.logo
  width: 120px
  margin-left: gutter(12) + columns(2,12) 
```

# java - ArrayList 矩形

> ID：16070461
> 
> 赞同：1
> 
> 时间：2013-04-17T21:19:56.313
> 
> 标签：java, arrays, graphics

我遇到了麻烦。我正在尝试使用用户输入的数组列表创建条形图。我可以创建一个酒吧，但只能创建一个酒吧。我需要所有的数组输入来创建一个条形图。

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Random;
import org.omg.PortableServer.CurrentOperations;

public class BarChart {

private double width;
private double height;
private ArrayList<Double> values;
Random generator = new Random ();

public BarChart(double iniwidth, double iniheight) {
    width = iniwidth;
    height = iniheight;
    values = new ArrayList<Double>();
    generator = new Random();
    }

public void add (double input) {
    values.add(input);
}

public void draw (Graphics g2) {
    double max = Collections.max(values);
    int xleft = 0;
    for (int i = 0; i < values.size(); i++) 
    {
        double barHeight= (max - height);
        width = 50;
        float r = generator.nextFloat();
        float g = generator.nextFloat();
        float b = generator.nextFloat();
        Color randomColor = new Color(r, g, b);
        Rectangle bar = new Rectangle ((int) (xleft + width), (int) height);
        g2.setColor(randomColor);
        ((Graphics2D) g2).fill(bar);
        g2.setColor(Color.BLACK);
        ((Graphics2D) g2).draw(bar);

    }
    System.out.println(Collections.max(values));
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T21:24:32.840

您所有的条形图都具有相同的 x 位置，因此它们正在绘制自己。 `xLeft`始终为 0。您可能忘记增加它。

例如：

```
xLeft += width; 
```

# css - 向左飘浮 s，但保持对齐

> ID：16070471
> 
> 赞同：0
> 
> 时间：2013-04-17T21:20:35.697
> 
> 标签：css

我想保持`<li>`s 在顶部均匀对齐，这是我的 CSS：

```
ul {
   list-style-type:none;
   margin:0;
   padding:0;
   width:510px; 
}

li {
   width:230px;
   border:1px solid #ccc;
   padding:5px;
   float:left;
   margin:5px 5px 0 0;  
} 
```

这是[在行动](http://jsfiddle.net/t6tML/)。

`<li>`有什么办法可以均匀地对齐 s 的顶部？
这是我想要的图片： ![示例布局](https://i.stack.imgur.com/5W2lX.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:34:18.870

相反`float`，使用`display: inline-block; vertical-align: top;`

[http://jsfiddle.net/t6tML/11/](http://jsfiddle.net/t6tML/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:23:54.977

ul 的宽度需要等于 li 元素的组合宽度：

```
ul {
    list-style-type:none;
    margin:0;
    padding:0;
    width: 1482px;
} 
```

每个 li 元素的宽度为 230 像素，水平边距为 5 像素，水平边距为 10 像素，水平边框为 2 像素，因此：

230 + 5 + 10 + 2 = 247 像素

247 * 6 li 元素 = 1482px

完整代码：http: [//jsfiddle.net/t6tML/3/](http://jsfiddle.net/t6tML/3/)

# ruby-on-rails - 如何解决“地理字段只有 1 个元素”错误

> ID：16070473
> 
> 赞同：0
> 
> 时间：2013-04-17T21:21:01.840
> 
> 标签：ruby-on-rails, mongoid

我有一个地理编码集合，当我尝试查询已地理编码的文档数量时会引发错误。这是我的查询；

```
Account.exists("locations.coordinates" => false).count 
```

这是它抛出的错误；

```
failed with error 13068: "exception: geo field only has 1 element :: caused by :: $exists: false" 
```

根据错误消息，这意味着我的一些坐标数组只有一个元素。有人可以帮助我了解如何在locations.coordinates 中查找只有一个元素的帐户的语法吗？

注意：如果我删除 2d 索引，我可以查询没有错误，我可以重建索引，没问题。我正在寻找识别问题文件的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T20:29:46.947

在早期版本的 MongoDB 中，这样做：

```
Account.exists("locations.coordinates" => false).count 
```

（或类似的）工作。但是，在更高版本（2.4+）中，您似乎想要搜索“null”。

```
Account.exists("locations.coordinates" => null).count 
```

# ruby-on-rails - 连接到另一个数据库适配器

> ID：16070474
> 
> 赞同：1
> 
> 时间：2013-04-17T21:21:11.827
> 
> 标签：ruby-on-rails, ruby

我正在尝试将一些旧的 mysql 数据导入我网站的 postgresql 数据库，但在连接到旧的 mysql 数据库时遇到了一些问题。我创建了一个 rake 任务来尝试从我的旧数据库中打印用户名，但我似乎无法弄清楚。这是我正在尝试做的事情：

```
desc "imports old records to the new postgresql db"
task "db:import_old" => :environment do

  class OldDatabase < ActiveRecord::Base
    self.establish_connection(
      :adapter  => "mysql2",
      :host     => "localhost",
      :username => "root",
      :password => "",
      :database => "old_database"
    )
  end

  user = OldDatabase.user.find_by_user_id(1)

  puts "Hello, #{user.name}!"
  puts
end 
```

但我永远无法输出旧数据库的数据。有什么建议么？谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:29:41.900

通常您会希望为每个底层数据库定义一个类，从 ActiveRecord 继承，然后修改连接参数。

然后，在您的模型中，您将从这些专门的类继承，而不是从 ActiveRecord::Base

```
 class DatabaseCurrent < ActiveRecord::Base
   self.abstract_class = true
   establish_connection settings['database']
 end

 class DatabaseOld < ActiveRecord::Base
   self.abstract_class = true
   establish_connection settings['database2']
 end

 # in your Model definitions:

 class User < DatabaseCurrent
 #...
 end

 class OldUser < DatabaseOld
 # ... 
 end 
```

使用导轨：

[http://blog.vishnugopal.com/2008/01/12/multiple-db-connections-in-railsactiverecord/](http://blog.vishnugopal.com/2008/01/12/multiple-db-connections-in-railsactiverecord/)

没有导轨：

[http://idevone.wordpress.com/2010/09/26/multiple-activerecord-connections-without-rails/](http://idevone.wordpress.com/2010/09/26/multiple-activerecord-connections-without-rails/)

# asp.net - ASP.NET 配置工具不允许我配置“安全”设置

> ID：16070477
> 
> 赞同：3
> 
> 时间：2013-04-17T21:21:19.737
> 
> 标签：asp.net

再会！

我正在尝试从我的 .NET 4.0 (Visual Studio 2010) ASP.NET Web 应用程序中获取本地成员数据库设置。

我这样做：

1）文件->新建->项目->“ASP.NET Web应用程序”

2) 编译应用程序。

3) 打开“ASP.NET 配置工具”，单击“安全”选项卡。

我明白了：

```
There is a problem with your selected data store. This can be caused by an invalid
server name or credentials, or by insufficient permission. It can also be caused by the
role manager feature not being enabled. Click the button below to be redirected to a page
where you can choose a new data store. 

The following message may help in diagnosing the problem: Could not load type 'WebApplication3.Global'. 
```

这是我的 web.config 文件：

```
 <configuration>
  <connectionStrings>
    <add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
  </connectionStrings>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />

    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication>

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="WebApplication3" />
      </providers>
    </membership>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="WebApplication3"/>
      </providers>
    </profile>

    <roleManager enabled="true">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="WebApplication3" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="WebApplication3" />
      </providers>
    </roleManager>

  </system.web>

  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

我有点期待它开箱即用。`roleManager`我根据其他一些 stackoverflow 帖子（启用等）对 web.config 进行了一些更改。

我的 App_Data 目录中也没有 .mdf 文件。如果我尝试添加一个，我会得到：

![在此处输入图像描述](https://i.stack.imgur.com/BJeVF.png)

我只想为我的身份验证信息使用专用的本地数据库。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:00:55.787

你可以试试[SQL Server Compact 版本](http://www.microsoft.com/en-us/sqlserver/editions/2012-editions/compact.aspx)。它的目标是更小更容易与您的 asp.net Web 应用程序一起分发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T04:04:20.440

您使用的会员资格提供商已过时。您想使用新的[ASP.NET Universal Providers](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)。

无论哪种方式，您都需要至少安装[SQL Express](http://www.microsoft.com/en-us/download/details.aspx?id=29062)才能对其进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T01:22:56.440

# ios - dismissViewControllerAnimated：完成：没有效果

> ID：16070479
> 
> 赞同：1
> 
> 时间：2013-04-17T21:21:26.767
> 
> 标签：ios, modalviewcontroller

有没有人见过这个？在 iPad 模拟器中，我有一个 About 视图控制器。我想以模态方式呈现它，并让用户单击关闭按钮。

更复杂的是，我有一个主视图控制器，它显示一个 iAd 横幅和一个“主菜单”视图控制器。该按钮位于主菜单上，因此 IBAction 被发送到主菜单视图控制器。

在主菜单 VC 中，我有一个指向应用程序视图控制器的属性，所以我调用：

```
AboutViewController *about = [[AboutViewController alloc] initWithNibName:....];
about.callingViewController = viewController;
[viewController presentViewController:about animated:YES completion:nil]; 
```

那么在 About View Controller 中，我有一个 IBAction 将其关闭：

```
- (void) dismissAbout:(id)sender
{
    [callingViewController dismissViewControllerAnimated:YES completion:nil];
} 
```

当调用 dismissAbout 时，什么也没有发生——视图没有消失，调试器控制台中也没有输出。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:24:36.907

我想你需要打电话

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

反而。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T21:24:58.743

IBAction 应该是

```
- (IBAction) dismissAbout:(id) 
```

其次，您正在取消 aboutController 所以应该使用`self`而不是`callingViewController`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T21:38:01.323

As the other answers say, you can use [self dismiss...] because that message is automatically forwarded to the presenting view controller. You also could use [self.presentingViewController dismiss..] because a modal controller has a presentingViewController property that points to the view controller that presented you. There's no need to create and pass the callingViewController.

# recursion - 方案嵌套递归函数返回 void

> ID：16070484
> 
> 赞同：1
> 
> 时间：2013-04-17T21:21:43.483
> 
> 标签：recursion, scheme

仍然与不考虑强制编程的冲动作斗争，在这里玩耍我有一个程序列表，应该应用于列表中的每个项目，每个项目的结果都应该添加到一个新列表中（我称之为向量在代码中因此 v 和 vec 变量）。最后我得到的只是一个空对象。

```
(define (inner-loop proc-i item-list i vec)
      (if (< i (length item-list))
        (begin
            (let ((v (cons (proc-i (list-ref item-list i) vec))))
                (inner-loop proc-i item-list (+ i 1) v)))
        (void)))        

(define (outer-loop proc-list item-list i vec)
  (if (< i (length proc-list))
    (let ((v (cons (inner-loop (list-ref proc-list i) item-list 0 vec) vec)))
        (outer-loop proc-list item-list (+ i 1) v))
    (void))) 
```

很明显，这是因为 else 语句，但我不知道如何解决这个问题，主要是因为我认为我处理它的方式从根本上是错误的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:25:57.207

对于初学者，请尝试将`(void)`语句替换为`vec`. 这是有道理的，因为那是你积累答案的地方。但是不，代码看起来不像惯用的 Scheme - 例如，使用`list-ref`不是遍历列表时的方式*。*试试这个，这是解决问题的更惯用的方法：

```
(define (inner-loop proc-list item-i)
  (if (null? proc-list)
      '()
      (cons ((car proc-list) item-i)
            (inner-loop (cdr proc-list) item-i))))

(define (outer-loop proc-list item-list)
  (if (null? item-list)
      '()
      (append (inner-loop proc-list (car item-list))
              (outer-loop proc-list (cdr item-list))))) 
```

您现在可以检查一下：

```
(outer-loop (list sin sqrt sqr) '(1 2 3)) 
```

相当于这个：

```
(list (sin 1) (sqrt 1) (sqr 1) (sin 2) (sqrt 2) (sqr 2) (sin 3) (sqrt 3) (sqr 3)) 
```

# android - 如何修复“IntentReceiver 组件不允许绑定到服务”

> ID：16070486
> 
> 赞同：1
> 
> 时间：2013-04-17T21:22:04.513
> 
> 标签：android, android-intent, broadcastreceiver, android-service

我在我的 logcat 中找不到此错误的来源（“不允许 IntentReceiver 组件绑定到服务”）。抱歉，我已经粘贴了很多 logcat，但主要错误是**粗体**。

请注意，在 logcat 错误列表中对我的代码的第一个引用是 AsyncTask，它本身是从从 BroadcastReceiver 调用的 IntentService 调用的。

> 04-17 07:46:03.163: W/dalvikvm(23525): threadid=24: 线程以未捕获的异常退出 (group=0x417582a0) 04-17 07:46:03.173: D/AccountsActivity(23525): onRequestDone 04-17 07:46:03.178: E/AndroidRuntime(23525): 致命异常: AsyncTask #2 04-17 07:46:03.178: E/AndroidRuntime(23525): java.lang.RuntimeException: 执行 doInBackground() 04 时发生错误-17 07:46:03.178: E/AndroidRuntime(23525): 在 android.os.AsyncTask$3.done(AsyncTask.java:299) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在 java. util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273) 04-17 07:46:03.178: E/AndroidRuntime(23525): at java.util.concurrent.FutureTask.setException(FutureTask.java:124) 04 -17 07:46:03.178: E/AndroidRuntime(23525): 在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在 java.util.concurrent.FutureTask.run(FutureTask.java:137) 04-17 07:46:03.178: E/AndroidRuntime(23525) : 在 android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java: 1076) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569) 04-17 07:46:03.178: E/AndroidRuntime( 23525): 在 java.lang.Thread.run(Thread.java:856) 04-17 07:46:03.178:03.178: E/AndroidRuntime(23525): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在 java.util.concurrent.ThreadPoolExecutor $Worker.run(ThreadPoolExecutor.java:569) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在 java.lang.Thread.run(Thread.java:856) 04-17 07:46:03.178 ：03.178: E/AndroidRuntime(23525): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在 java.util.concurrent.ThreadPoolExecutor $Worker.run(ThreadPoolExecutor.java:569) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在 java.lang.Thread.run(Thread.java:856) 04-17 07:46:03.178 ： **E/AndroidRuntime(23525): 引起: android.content.ReceiverCallNotAllowedException: IntentReceiver 组件不允许绑定到服务**04-17 07:46:03.178: E/AndroidRuntime(23525): 在 android.app.ReceiverRestrictedContext.bindService(ContextImpl.java:178) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在 com. google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source) 04-17 07:46:03.178: E/AndroidRuntime(23525): at com.google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source) 04 -17 07:46:03.178: E/AndroidRuntime(23525): 在 com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential.getToken(GoogleAccountCredential.java:192) 04-17 07:46 :03.178: E/AndroidRuntime(23525): 在 com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential$RequestHandler.intercept(GoogleAccountCredential.java:217) 04-17 07:46:03.178: E/AndroidRuntime(23525)：在 com.google.api.client.http.HttpRequest。执行（HttpRequest.java:836）04-17 07:46:03.178：E/AndroidRuntime（23525）：在 com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed（AbstractGoogleClientRequest.java:412）04-17 07:46:03.178: E/AndroidRuntime(23525): 在 com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:345) 04-17 07:46:03.178: E/AndroidRuntime(23525 ): 在 com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:463) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在 com.my_package.ServerRequests$11.doInBackground (ServerRequests.java:378) 04-17 07:46:03.178: E/AndroidRuntime(23525): at com.my_package.ServerRequests$11.doInBackground(ServerRequests.java:1) 04-17 07:46:03.163: W/达尔维克虚拟机（23525）：threadid=24：线程以未捕获的异常退出（组=0x417582a0）04-17 07：46：03.173：D/AccountsActivity（23525）：onRequestDone 04-17 07：46：03.178：E/AndroidRuntime（23525）：致命异常： AsyncTask #2 04-17 07:46:03.178: E/AndroidRuntime(23525): java.lang.RuntimeException: 执行 doInBackground() 时发生错误 04-17 07:46:03.178: E/AndroidRuntime(23525): at android.os.AsyncTask$3.done(AsyncTask.java:299) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在 java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在 java.util.concurrent.FutureTask.setException(FutureTask.java:124) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307) 04-17 07:46:03.178:E/AndroidRuntime(23525): 在 java.util.concurrent.FutureTask.run(FutureTask.java:137) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在 android.os.AsyncTask$SerialExecutor$1。运行（AsyncTask.java:230）04-17 07:46:03.178：E/AndroidRuntime（23525）：在 java.util.concurrent.ThreadPoolExecutor.runWorker（ThreadPoolExecutor.java:1076）04-17 07:46:03.178： E/AndroidRuntime(23525): 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在 java.lang.Thread.run (Thread.java:856) 04-17 07:46:03.178: E/AndroidRuntime(23525): 由: android.content.ReceiverCallNotAllowedException: IntentReceiver 组件不允许绑定到服务 04-17 07:46:03.178: E/AndroidRuntime(23525)：在 android.app.ReceiverRestrictedContext。bindService(ContextImpl.java:178) 04-17 07:46:03.178: E/AndroidRuntime(23525): at com.google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source) 04-17 07:46:03.178 : E/AndroidRuntime(23525): at com.google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source) 04-17 07:46:03.178: E/AndroidRuntime(23525): at com.google.api.client .googleapis.extensions.android.gms.auth.GoogleAccountCredential.getToken(GoogleAccountCredential.java:192) 04-17 07:46:03.178: E/AndroidRuntime(23525): at com.google.api.client.googleapis.extensions。 android.gms.auth.GoogleAccountCredential$RequestHandler.intercept(GoogleAccountCredential.java:217) 04-17 07:46:03.178: E/AndroidRuntime(23525): at com.google.api.client.http.HttpRequest.execute(HttpRequest .java:836) 04-17 07:46:03.178: E/AndroidRuntime(23525): at com.google.api。client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:412) 04-17 07:46:03.178: E/AndroidRuntime(23525): at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest .java:345) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在 com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:463) 04-17 07:46 :03.178: E/AndroidRuntime(23525): 在 com.my_package.ServerRequests$11.doInBackground(ServerRequests.java:378) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在 com.my_package.ServerRequests$11。 doInBackground(ServerRequests.java:1) 04-17 07:46:03.178: E/AndroidRuntime(23525): 在 android.os.AsyncTask$2.call(AsyncTask.java:287) 04-17 07:46:03.178:E/AndroidRuntime(23525): at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 04-17 07:46:03.178: E/AndroidRuntime(23525): ... 还有 5 个

logcat 中对“doInBackground”的引用是对我（不是 Android 操作系统）代码的唯一引用，并且只是一个 Google Cloud Endpoint 调用：

```
uEndpoint.doRegistration(registrationId).execute(); 
```

我定义的广播接收器中没有任何明确的“bindService”调用。

我在哪里可以非法绑定服务？关于在哪里寻找这个问题的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T02:09:14.070

问题来自`GoogleAccountCredential`IntentService 中的错误使用。IntentService 从启动它的 BroadcastReceiver 获取它的 Context 对象。这个 BroadcastReceiver 有一个“ReceiverRestrictedContext”。在

```
GoogleAccountCredential.usingAudience(context,.,.)  //-- this context was a "ReceiverRestrictedContext" 
```

在端点执行中使用凭据之前不会引发异常。

我通过使用修复它

```
GoogleAccountCredential.usingAudience(getApplicationContext(),.,.) 
```

在 IntentService 中。

# java - 如何使用 Astyanax/Netflix 客户端检索给定行键的选定列？

> ID：16070500
> 
> 赞同：0
> 
> 时间：2013-04-17T21:23:29.143
> 
> 标签：java, cassandra, astyanax

我已经在本地设置了一个节点集群。现在我正在尝试从 Cassandra 读取数据。我是 Astyanax（Cassandra 的 Netflix 客户端）的新手。

目前我所看到的是 - 您可以在 rowkey 上请求数据基础。基于rowkey的含义我可以检索所有不是我想要的列。

但我正在寻找的是 - 我将拥有 rowkey 和几个 columnNames。因此，基于该行键，我只需要检索这些列。像这样的东西-

```
SELECT colA, colB from table1 where rowkey = "222"; 
```

以下是我基于行键检索所有列名的方法。如何在给定行键的情况下仅检索选定的列？

```
public void read(final String userId, final Collection<String> columnNames) {

    OperationResult<ColumnList<String>> result;
    try {
        result = CassandraConnection.getInstance().getKeyspace().prepareQuery(CassandraConnection.getInstance().getEmp_cf())
                .getKey(userId)
                .execute();

        ColumnList<String> cols = result.getResult();

        for(Iterator<Column<String>> i = cols.iterator(); i.hasNext(); ) {
            Column<String> c = i.next();
            Object v = null;
            if(c.getName().endsWith("id")) // type induction hack
                v = c.getIntegerValue();
            else
                v = c.getStringValue();
            System.out.println("- col: '"+c.getName()+"': "+v);
        }

    } catch (ConnectionException e) {
        System.out.println("failed to read from C*" +e);
        throw new RuntimeException("failed to read from C*", e);
    }

} 
```

在上面的代码中，`Collection<String> columnNames`我想要请求的列名很少。

谁能告诉我我需要在上述方法中进行哪些更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:29:38.810

为了在 astyanax 中检索选定的列，我们必须使用列切片。

```
List<String> columns = Arrays.asList(new String[]{"col1","col2","col3"});
OperationResult<ColumnList<String>> result = CassandraConnection.getInstance().getKeyspace()
                .prepareQuery(CassandraConnection.getInstance().getEmp_cf())
                .getKey(userId).withColumnSlice(columns)
                .execute();
        ColumnList<String> columnList= result.getResult();
        for(String col : columns ){
            System.out.println(columnList.getColumnByName(col).getStringValue());
        } 
```

我假设所有的列都是文本类型，所以使用`getStringValue()`，你可以根据你的cf元数据来拥有它。

干杯

# jquery - 如何使用纯 javascript 或 jQuery 将下拉列表（选择）转换为文本框

> ID：16070503
> 
> 赞同：-2
> 
> 时间：2013-04-17T21:23:44.190
> 
> 标签：jquery, asp.net, html, drop-down-menu, textbox

我有一个 ASP.Net 页面，该页面被编码为在页面加载时填充一堆文本框和下拉列表，然后根据所选索引更改事件上下拉列表的所选值触发显示/隐藏页面上的其他元素。

我想保留所有这些逻辑，以便页面加载显示所有正确的字段，并填充所有数据。此外，一旦页面完成加载（并且所有元素都已隐藏/显示需要，即我的代码已运行），我想将所有下拉列表转换为文本框，将文本框的文本设置为所选值（如果设置了一个，或者如果在页面加载时没有选择/填充任何值，则为空白）。

我通过简单地在每个下拉列表控件旁边添加一个隐藏的文本框来完成此操作，然后手动将文本框设置为后面代码中的下拉列表选定值，然后隐藏 ddl，并显示文本框，但我觉得有一些快速和使用 jQuery 实现此目的的简单方法。我是 jQuery 新手，希望这里有人能指出我正确的方向。

理想情况下，该解决方案将允许我循环并为页面上的所有下拉列表/选择元素执行此操作，但不是必需的（我可以单独应用它，因为没有那么多列表）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:33:01.563

您可以简单地使用 replaceWith 函数：[http ://api.jquery.com/replaceWith/](http://api.jquery.com/replaceWith/)

$('#YourDdlId').replaceWith( $('').attr({ name: 'whatever', value: $("#YourDdlId' option:selected").text() })

# php - 如何在 PHP 中使用循环执行以下操作？

> ID：16070510
> 
> 赞同：-5
> 
> 时间：2013-04-17T21:24:20.387
> 
> 标签：php, arrays, foreach

## 从表格中获取

```
$q1=$_POST["ques1"];
$q2=$_POST["RadioGroup1"];
$q3=$_POST["RadioGroup2"];
$q4=$_POST["RadioGroup3"];
$q5=$_POST["RadioGroup4"]; 
```

## 创建数组

```
$questions=array(); 
```

# 如何使用循环来做到这一点？

```
$questions[1]=$q1;
$questions[2]=$q2;
$questions[3]=$q3;
$questions[4]=$q4;
$questions[5]=$q5; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:25:25.287

```
for ($i = 1; isset(${"q$i"}); $i++)
    $questions[$i] = ${"q$i"}; 
```

另请参阅[http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

# c# - 我应该在 C# 中选择哪个通用集合来维护排序的“列表”

> ID：16070518
> 
> 赞同：2
> 
> 时间：2013-04-17T21:24:57.243
> 
> 标签：c#, .net, sorting, generic-collections

我有一个具有浮点距离属性的节点类。

我想要一个可以将所有节点放入其中的数据结构，并且它们将按顺序存储（例如在 AVL 树或红黑树中）。

*   我想插入 O(log(n))
*   我想检索并删除 O(log(n)) 中的最小值

我尝试使用排序字典，但事实证明它完全没用，因为他不能容纳两个具有相同距离的项目。

使用列表和排序 i 是不可能的，因为删除是 (O(n)) 并且找到最小值也是 (O(n))

我需要的是一个简单的通用红黑树结构，它将按我将提供的一些谓词进行排序（即比较节点内的距离）

BCL 中有这样的数据结构吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T22:48:35.460

您想使用 c5 Collections Library 的`TreeBag<T>`类。它是一棵允许重复的红黑树（因此是*bag*而不是*set*）。通过项目值的索引访问是 O(log n); 插入和删除是 O(log n) 摊销的。

C5 Collection Library 由微软资助；它是开源的并且*免费*提供。价格合适。

[http://www.itu.dk/research/c5/](http://www.itu.dk/research/c5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T23:17:19.193

实际上，您可以使用`SortedDictionary`它。但是你需要的（假设距离是`int`）是一个`SortedDictionary<int, List<Item>>`.

当您想添加字典中还没有的距离时，您插入一个`List`包含单个项目的新距离。如果要添加字典中已有的距离，请找到正确的列表并将项目添加到其中。

要删除最小的项目，请找到`List`具有最小键的 并从中删除一个项目。如果`List`变为空，则将其从字典中删除。

由于从 a 的开头删除`List`效率低下，您需要从 the 的末尾删除`List`（导致具有相同键的项目的 LIFO 顺序），或者使用 a`Queue`而不是`List`。

这可能不是最有效的解决方案，但插入、查找最小项和删除最小项都是 O(log n)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T23:00:42.800

另一种选择是[跳过列表](http://en.wikipedia.org/wiki/Skip_list)。.NET Framework 没有，但不久前我在 C# 中实现了一个。请参阅[内存效率更高的跳过列表](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=876)。

跳过列表具有 O(log n) 的插入、搜索和删除，以及 O(1) 的顶部项目删除。

如果您想要一个堆，请参阅[A Generic Binary Heap Class](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=789)。

# vb.net - 将事件处理程序添加到绘制的图形图形

> ID：16070520
> 
> 赞同：0
> 
> 时间：2013-04-17T21:25:01.983
> 
> 标签：vb.net, winforms, graphics

我知道我可以向按钮、标签和文本框添加事件处理程序，如下所示：

```
AddHandler button1.click , AddressOf Subbutton1_click 
```

实际上，我可以使用 Form Paint 事件中的图形绘制圆形、椭圆形、矩形或其他图形：

```
e.Graphics.DrawEllipse(pen1, 0.0F, 0.0F, 200.0F, 200.0F) 
```

那行得通，但是我怎样才能为我刚刚绘制的图形添加一个事件处理程序？

任何帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:33:56.923

您可以让一个事件引发另一个事件。让我们从使用 GraphicsPath 存储形状并绘制它的基本表单开始：

```
Imports System.Drawing.Drawing2D

Public Class Form1

    Private Shape As GraphicsPath

    Public Sub New()
        InitializeComponent()
        Shape = New GraphicsPath()
        Shape.AddEllipse(0, 0, 200.0F, 200.0F)
    End Sub

    Protected Overrides Sub OnPaint(ByVal e As System.Windows.Forms.PaintEventArgs)
        e.Graphics.DrawPath(Pens.Black, Shape)
        MyBase.OnPaint(e)
    End Sub
End Class 
```

现在您要添加一个事件，以便其他一些类可以看到被单击的形状：

```
Public Event ShapeClick As EventHandler 
```

您编写了一个引发事件的受保护虚拟方法，这是标准 .NET 事件引发模式的一部分：

```
Protected Overridable Sub OnShapeClick(ByVal e As EventArgs)
    '--- Note: you can write code here to respond to the click
    RaiseEvent ShapeClick(Me, e)
End Sub 
```

并且您需要注意用户点击表单。您将检查形状是否被单击，如果是这种情况，则引发事件：

```
Protected Overrides Sub OnMouseUp(ByVal e As System.Windows.Forms.MouseEventArgs)
    If Shape.IsVisible(e.Location) Then OnShapeClick(EventArgs.Empty)
    MyBase.OnMouseUp(e)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:39:25.737

You could intercept the windows or views (etc..., i don't know what you are using) click event, so every time you click somewhere that function will be called.

And in that click event check if it is inside your custom drawn element. You will need to save the elements properties first though and it would use a lot of resources to iterate through all the elements.

I don't know if this is acceptable in your case or not and what you are actually trying to accomplish.

# php - 我的 html 页面布局中的随机空白空间

> ID：16070529
> 
> 赞同：-1
> 
> 时间：2013-04-17T21:25:28.630
> 
> 标签：php, html-table

我在我的网站上的正文表中有一个可点击的徽标表，由于某种原因，在显示该表之前有一个空白区域。这可能只是我的代码有问题，但这是有问题的页面。（使用了包含，但我将它们全部粘贴在一起以使其更清晰）

谁能看到是什么原因造成的？

```
<html>
<head>
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" type="text/css" href="stylesheet.css" />
</head>
    <body id="page" style="background-attachment: fixed; background-repeat: no-repeat;" background="pictures/shopshelves.JPG">

        <table align="center">
            <div id="header">
            <tr>
                <td colspan="2" width="950" height="150"></h1></td>
            </tr>
            </div>
            <tr>
                <td colspan="1" width="950" height="217">
                <div style='position:center'><img src='pictures/logo.bmp'></div>
                </td>
            </tr>
            <div id="navigation">
                    <a href="http://danu2.it.nuigalway.ie/ShoppingHelper/index.php">Home</a>
                    <a href="http://danu2.it.nuigalway.ie/ShoppingHelper/LoginPage.php">Members</a>
                    <a href="http://danu2.it.nuigalway.ie/ShoppingHelper/lists.php">My Lists</a>
                    <a href="http://danu2.it.nuigalway.ie/ShoppingHelper/offers.php">Current Special Offers</a>
                    <a href="http://danu2.it.nuigalway.ie/ShoppingHelper/clubcards.php">My Clubcards</a>
                    <a href="http://danu2.it.nuigalway.ie/ShoppingHelper/popular.php">My Popular Items</a>
            </div>
            <table  align="center" border= "5px">
            <td width="950 bgcolor="white" align="center">
            <div id="content">

            <b>Here are some links to the special offers in some of the major supermarkets near you:</b/><br/><br/>
        <table >
                <tr>
            <td align="center"><a href="http://www.tesco.ie/groceries/SpecialOffers/default.aspx" target="_blank"><img src="pictures/tesco.png"></a></td> <br><p>
            <td align="center"><a href="http://www.dunnesstores.ie/groceryleaflet/" target="_blank"><img src="pictures/dunnes.png"></a></td><br><p>
            <td align="center"><a href="http://supervalu.ie/offers/all-offers/" target="_blank"><img src="pictures/supervalu.png"></a></td><br><p>
                </tr>
                <tr>
            <td align="center"><a href="http://www.aldi.ie/ie/html/offers/special_buys.htm?WT.z_src=main" target="_blank"><img src="pictures/aldi.png"></a></td><br><p>
            <td align="center"><a href="http://www.lidl.ie/cps/rde/xchg/lidl_ri_ie/hs.xsl/special-offers.htm" target="_blank"><img src="pictures/lidl.png"></a></td><br><p>
            <td align="center"><a href="http://viewer.zmags.com/publication/2bc4f269#/2bc4f269/1" target="_blank"><img src="pictures/centra.png"></a></td><br><p>
                </tr>
                <tr>
            <td align="center"><a href="http://www.londis.ie/community/instore/special" target="_blank"><img src="pictures/londis.png"></a></td><br><p>
            <td align="center"><a href="http://www.spar.ie/promotions.html" target="_blank"><img src="pictures/spar.png"></a></td><br><p>
            <td align="center"><a href="http://www.gala.ie/template1.php?page=promotions" target="_blank"><img src="pictures/gala.png"></a></td><br><p>
                </tr>
                <tr>
            <td align="center"><a href="http://content.yudu.com/A23mte/SQF5A2013/resources/index.htm?referrerUrl=http%3A%2F%2Fwww.superquinn.ie%2Faspx%2FContent.aspx%3Fid%3D866" target="_blank"><img src="pictures/superquinn.png"></a></td><br><p>
            <td align="center"><a href="http://www.mace.ie/special-offers/special-offers" target="_blank"><img src="pictures/mace.png"></a></td><br><p>
            <td align="center"><a href="http://www.costcutter.ie/index.php/special-offers/" target="_blank"><img src="pictures/costcutter.png"></a></td><br><br><br><br>
                </tr>
        </table>
        </td>

            </tr>
        </table>
        </div>
        <div id="footer">
        <table align="center">
            <tr>
                <td colspan="3" width="950" height="150" style="filter: alpha(opacity=50)" align="center"><h4>
                <a href="https://www.facebook.com"><img src="pictures/facebook.jpg"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <a href="https://www.twitter.com"><img src="pictures/Twitter.jpg"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <a href="https://plus.google.com"><img src="pictures/Google+.jpg"></a>
                </td>
            </tr>
        </table>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:27:17.197

是的，您有两个打开的正文标签。我还看到了一些其他未关闭的标签（即您的第一个表格行中的未打开标签）。让您的 html 有效，您应该一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T22:06:10.760

```
<td width="950 bgcolor="white" align="center"> 
```

在 950 之后，您还在这里缺少报价。

# iphone - 如何使用 ios 的 blob 存储服务？

> ID：16070533
> 
> 赞同：10
> 
> 时间：2013-04-17T21:25:56.223
> 
> 标签：iphone, ios, objective-c, xcode, azure-storage

在我的应用程序中，我需要使用 Windows Azure 服务来存储我正在使用的数据：http: [//www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-data-](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-data-ios/)我的应用程序中用于 Windows azure 集成的[ios/ sdk。](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-data-ios/)现在我需要将图像上传到 Azure，为此我使用了相同的 sdk……但后来我发现 Windows Azure 中上传较大图像的正确位置是 Blob 存储客户端。

在 .Net 中，它们具有不同的库，我发现此链接[http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)用于将图像上传到 blob 存储。

但是我怎么能用 Objective C 做到这一点呢？

经过一番研究，我发现了这个链接[http://www.deviantpoint.com/post/2012/02/18/Using-Azure-Storage-Services-from-an-iPhone-App-Part-1-Table-and-Blob -setup-Azure-iOS-toolkit-and-Model-Classes.aspx](http://www.deviantpoint.com/post/2012/02/18/Using-Azure-Storage-Services-from-an-iPhone-App-Part-1-Table-and-Blob-setup-Azure-iOS-toolkit-and-Model-Classes.aspx)但不清楚如何上传图像并获取图像 url 作为响应？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-07-29T08:11:27.940

经过大量的研发......我终于找到了解决方案..

这是我用Objective C编写的示例项目[Blob Example](https://github.com/Ajayi13/BlobExample)

& 也尝试使用 Swift & 正在按预期工作。这是我的[Swift 示例项目](https://github.com/Ajayi13/BlobExample-Swift)。

只需将您的帐户凭据替换为相应的凭据，您就可以开始了..!!

**注意**：尝试使用`UIImageJPEGRepresentation`而不是`UIImagePNGRepresentation`因为 png 比 jpg 占用更大的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-27T21:52:12.767

REST API 可能更适合 iOS 设备。恐怕 Azure SDK 的 object-c 支持不如 C#。

[http://msdn.microsoft.com/en-us/library/windowsazure/dd135733.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd135733.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-30T18:10:43.157

有关非 SAS 样式的 Azure Objective-C 示例，请参阅以下[https://github.com/crspybits/Blobbish 。](https://github.com/crspybits/Blobbish)

# python - Python 2.7.3 UTF-8 编码不可逆

> ID：16070535
> 
> 赞同：2
> 
> 时间：2013-04-17T21:26:04.217
> 
> 标签：python, encoding, utf-8, utf-7

我在爬网时遇到了一些非常麻烦的字符串。特别是，一个页面宣传为 is `UTF-7`，尽管它并不完全`UTF-7`是问题所在。我不关心表达文本的确切意图，但我只需要进入`UTF-8`下游消费。

我面临的奇怪之处是**我能够得到一个`unicode`不能先`UTF-8`编码然后解码的字符串。**我已经尽可能多地提取字符串，同时仍然显示错误：

```
bytes = [43, 105, 100, 41, 46, 101, 95, 39, 43, 105, 100, 43]
string = ''.join(chr(c) for c in bytes)

# This particular string happens to be advertised as UTF-7, though it is
# a bit malformed. We'll ignore these errors when decoding it.
decoded = string.decode('utf-7', 'ignore')

# This decoded string, however, cannot be encoded into UTF-8 and back:
error = decoded.encode('utf-8').decode('utf-8') 
```

我已经在许多系统上成功地尝试过这个：Mac 10.5.7 上的 Python 2.7.1 和 2.6.7，CentOS 上的 Python 2.7.2 和 2.6.8。不幸的是，在我们*需要*它工作的机器上，Ubuntu 12.04 上的 Python 2.7.3 失败了。在失败的系统上，我看到：

```
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
  File "/usr/lib/python2.7/encodings/utf_8.py", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xf7 in position 4: invalid start byte 
```

以下是我在工作系统与非工作系统上看到的一些中间值：

```
# Working:
>>> repr(decoded)
'u".e_\'\\u89df"'
>>> repr(decoded.encode('utf-8'))
'".e_\'\\xe8\\xa7\\x9f"'

# Non-working:
>>> repr(decoded)
'u".e_\'\\U089d89df"'
>>> repr(decoded.encode('utf-8'))
'".e_\'\\xf7\\x98\\xa7\\x9f"' 
```

两者在第一次编码后*有所*不同，但为什么对我来说仍然是个谜。我*想*这是缺少一些字符表或辅助库的问题，因为看起来 2.7.2 和 2.7.3 之间的任何东西都不能解释这种行为。**在它正常工作的系统上，打印 unicode 实体会显示一个中文符号，但在系统上它不会显示一个占位符。**

这让我想到了一个问题：这样的问题对任何人来说都很熟悉吗，或者是否有人知道我在出现问题的系统上可能缺少哪些支持库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:02:55.717

这里的问题是，由于某种原因，UTF-7 解码会返回非法的 Unicode 字符。

它基本上没有记录当你有一个`unicode`包含非法字符的对象时会发生什么。C API 基本上只是告诉你“不要那样做，否则会坏掉”。Python API 没有提到它，因为它应该是不可能的，除非你用 C API 做了一些未定义的事情，这已经被介绍过了。

当然，除非内置编解码器中的错误导致它代表您执行未定义的操作。这似乎就是这里发生的事情。

您在某些平台上看到此问题但在其他平台上没有看到的一个合理原因是工作平台都使用窄 Unicode，这意味着这个问题不可能发生。（您不能`> 0x10FFFF`在代码点只有 2 个字节的平台上拥有代码点，除非使用 UTF-16 代理字节，因此您可能会在代理编码中获得异常或忽略。）

事实上，你得到的非法字符是`\U089d89df`，而你在 Mac 上得到的字符（系统 Python 构建是窄 Unicode）是`\u89df`，这非常暗示一些代码在假设窄 Unicode 的地方走捷径。但要真正追踪错误，您需要查看源代码中的多个位置，并比较 Python 在每个平台上的构建方式（窄与宽可能不是唯一的区别），和/或查看错误和更改日志...</p>

最终，如果您想在具有该 Python 构建的 Ubuntu 系统上运行，除非您想编写自己的自定义 C 模块，否则您将不得不解决该错误，对吗？

因此，您可能只是在寻找一个简单的解决方法。在这种情况下，这应该有效：

```
decoded = u''.join(c for c in decoded if ord(c) <= 10FFFF) 
```

这会去除代码点大于最大合法 Unicode 字符的任何字符。它应该在任何存在的地方解决问题，否则是无害的（除了一些浪费的 CPU 时间）。

对于许多应用程序，您实际上只需要处理 BMP 字符，并且补充和专用平面中的任何内容都比实际数据更容易出错，因此使用它可能更简单或更健壮，`0xFFFF`而不是`0x10FFFF`.

# php - 通过 HTML 表单将 XML 中的数据发布到服务器

> ID：16070540
> 
> 赞同：0
> 
> 时间：2013-04-17T21:26:22.583
> 
> 标签：php, javascript, html, xml, jquery

您好，我在集成支付网关时遇到问题，网关需要 XML 格式的请求，我的网站和购物车是 PHP，我想要一个解决方案，以 XML 格式将我的 HTML 表单值发布到服务器，服务器需要以下 XML 格式：

```
 <html>
    <head>
    </head>
    <body>
    <form method="POST" action="https://3ds.cps.lv/GatorServo/request">
    <input name="type" value="sendForAuth">
    <textarea name="xml">
    <?xml version="1.0" encoding="UTF-8" ?>
    <cpsxml xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.cps.lv/xml/ns/cpsxml
        https://3ds.cps.lv/GatorServo/Gator_SendForAuth.xsd"
        xmlns="http://www.cps.lv/xml/ns/cpsxml">
    <header xmlns="">
    <responsetype>direct</responsetype>
    <user>test_sign</user>
    <type>sendForAuth</type>
    <transType>DB</transType>
    <digiSignature>XXXXXXXXXXXXXXXXXXXXXXX</digiSignature>
    </header>
    <request xmlns="">
    <orderNumber>012345</orderNumber>
    <cardholder>
      <firstName>FirstName</firstName>
      <lastName>LastName</lastName>
      <street>Street</street>
      <zip>54321</zip>
      <city>City</city>
      <country>LV</country>
      <email>email@domain.com</email>
      <ip>123.124.125.126</ip>
    </cardholder>
    <amount>
      <value>1000</value>
      <currency>USD</currency>
    </amount>
    <product>
      <productName>Product Name</productName>
      <productUrl>www.test.com</productUrl>
    </product>
  </request> 
</cpsxml>
</textarea>
 <input type="submit" value="Send">
 </form>
 </body>
</html> 
```

这是我的 PHP 文件，我尝试过使用 json2xml 但到目前为止还没有运气

```
<?php

require_once('../assist/cart-load.php');

if(isset($_POST) && isset($_POST['assist'])){
$order_id= $_REQUEST['order_id'];
$a_amount = $_REQUEST['a_total'];
$c_amount = $_REQUEST['c_total'];
$admin_curr = $_REQUEST['a_curr'];
$chk_curr = $_REQUEST['c_curr'];

$checksum = $_SESSION['basket']['security'];

$checksum2 = $_SESSION['basket']['security2'];
}
?>

      <html>
     <head><title>Complete Your Payment</title>
     <script src="json2xml.js" type="text/javascript"></script>
     <script type="text/javascript">
     var formjson = $('form#payment_form').serializeArray();
//var formxml = $.compactJSON(mjson);
var formxml = json2xml(formjson);
alert(formxml);
$.post("/collect.cgi", { 'data': formxml }, function (data){ });
     </script>
     </head>
   <body>
    <form method="post" id="payment_form" name="payment_form"  action="https://3ds.cps.lv/GatorServo/request">
    <input type="hidden" name="responsetype" value="direct">
    <input type="hidden" name="user" value="test_pasta_sign">
    <input name="type" type="hidden" value="sendForAuth">
    <input type="hidden" name="transType" value="DB">
    <input type="hidden" name="digisignature" value="XXXXXXXXXXXXXXXXXXXXXXX">
    <p>Order Number</p>
    <input type="text" readonly name="orderNumber" value="<?php echo $order_id; ?>">
    <p>F Name</p>
    <input type="text" name="firstname" value="">
    <p>L Name</p>
    <input type="text" name="lastname" value="">
    <p>Street Address</p>
    <input type="text" name="street" value="">
    <p>Zip</p>
    <input type="text" name="zip" value="">
    <p>City</p>
    <input type="text" name="city" value="">
    <p>Country</p>
    <input type="text" name="country" value="">
    <p>Email</p>
    <input type="text" name="email" value="email@domain.com">
    <input type="hidden" name="ip" value="123.124.125.126">
    <p>Enter Card No.</p>
    <input type="text" name="cardNumber" value="">
    <p>Enter CVV</p>
    <input type="text" name="cvv" value="">
    <p>Card Expiry</p>
    <input type="text" name="expires" value="">
    <p>Amount</p>
    <input type="text" name="value" readonly value="<?php echo $a_amount; ?>">
    <input type="hidden" name="currency" value="USD">
    <p>Product Name</p>
    <input type="text" name="productName" value="Product Name" readonly>
    <input type="hidden" name="productUrl" value="http://www.test.com">
    <input type="submit" value="Send">
    </form></body></html> 
```

请为我提供一个更好的解决方案来解决这个问题。提前致谢！

**更新：**我现在已经删除了 jsontoxml，现在使用 jquery.ajax，这里是脚本

```
 <script type="text/javascript">
     var ajaxurl="https://3ds.cps.lv/GatorServo/request";
var str="";

for(i=0; i<document.payment_form.elements.length; i++)
{
   var fieldName = document.payment_form.elements[i].name;
   var fieldValue = document.payment_form.elements[i].value;
   str += "<" + fieldName + ">" ;
    str += fieldValue ;
   str += "</" + fieldName + ">" ;
}

$.ajax({
    url: ajaxurl,
    data: str, 
    type: 'POST',
    contentType: "text/xml",
    dataType: "xml",
    success : parse_result,
    error : show_error
}); 

function parse_result(xml){
    //
}
function show_error(){
    //
}
     </script> 
```

但现在我收到错误：来自服务器的“格式错误的 XML 请求”。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:34:04.873

尝试将您的 XML 输出放入记事本，将其保存为 XML 文件，然后尝试在本地 Web 浏览器中打开该 XML 文件。Web 浏览器将尝试解析 XML 并告诉您它遇到了什么问题。您应该能够从那里缩小 XML 格式问题的范围。

# sql - 复合聚集 PK 行为与非聚集 PK + 非唯一聚集索引

> ID：16070541
> 
> 赞同：2
> 
> 时间：2013-04-17T21:26:30.973
> 
> 标签：sql, sql-server, database-design

我有一个包含几列的表，其中两个重要的是 appid 和 fileid。他们一起组成了桌子的PK。该表的一个典型用例是有多少文件包含 appid x，或者哪个 appid 最受欢迎。这些查询也将经常仅在文件的子集上运行，而不是在所有文件上运行。两列都不是唯一的。

基于此，我觉得聚集索引的最佳选择是 AppId。但是，由于将两列都设置为 PK 会产生额外的非聚集索引，并且 appid 缺乏唯一性（会有很多重复）意味着无论如何它都需要一个 uniquifier 列，所以只说PK 是聚集的而不是指定另一个聚集索引？假设我首先在 PK 中指定 AppId，它是否会将 diagnosticfileid 视为幕后的唯一性并以这种方式为我提供最佳性能？

编辑：我最初忘记提到的一件重要的事情是 APPId 不会稳步增加或任何东西，因此表格中间会有插入。我在想我可以通过使用填充因子来防止一些问题，但是表格会变得很大，所以我不知道这会有多大帮助。

此外，它会经常插入，但不会一次插入大块。可能是每小时几千行。确实没有任何价值可以可靠地增加并且在这方面对于聚集索引来说是一个不错的选择，但我不确定这有多大的意义。我可以添加一个 id 只是为了具有良好的集群价值，但我觉得这会减慢选择速度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T22:25:01.177

如果您的两个最受欢迎的查询是“有多少文件包含`appId`”和“哪个`appId`最受欢迎”，您应该制作这个索引视图：

```
CREATE VIEW
        v_appCount
WITH SCHEMABINDING
AS
        SELECT  appId, COUNT_BIG(*) AS cnt
        FROM    dbo.mytable
        GROUP BY
                appId
GO

CREATE UNIQUE CLUSTERED INDEX
        ux_v_appCount_appId
ON      v_appCount (appId) 
```

这样您就可以运行这些查询：

```
SELECT  cnt
FROM    v_appCount
WHERE   appId = @myAppId 
```

和

```
SELECT  TOP 100
        *
FROM    v_appCount va
ORDER BY
        appId DESC 
```

几乎是瞬间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:36:05.577

如果复合 PK 是集群的，就会出现问题，因为表中间的插入会导致内容的物理重新排序。如果桌子预计不会达到巨大的尺寸，那么这可能无关紧要，但这绝对是需要考虑的事情。我应该补充一点，如果这是一个高选择表和一个低插入表，那么这也限制了主键中间插入的影响。您绝对可以将其设为非聚集主键，但这有一些性能方面的考虑。

**编辑**
考虑到您的编辑，我建议您执行自动递增 PK（即非聚集）并创建唯一约束（也创建唯一的非聚集索引）。基本上，我不建议在此表上使用聚集索引。我认为没有它你不会看到太大的性能差异，但如果它在那里并且你在表格中间做了数千次插入，你会看到。死锁会困扰你。

快速阅读[这篇文章](http://msdn.microsoft.com/en-us/library/aa224827%28v=sql.80%29.aspx)。虽然它很旧，但原则仍然适用。

# ios - 返回 UIImage 的副本而不是原地更改

> ID：16070542
> 
> 赞同：0
> 
> 时间：2013-04-17T21:26:32.897
> 
> 标签：ios, objective-c, uiimage

我是 iOS 开发的新手，遇到了一些对我来说很奇怪的事情。我有以下方法来拍摄大图像并制作较小的版本，然后将两者上传到服务器：

```
- (void)prepareAndUploadImages
{
  UIImage *originalImage = self.imageView.image;
  UIImage *smallerImage = [originalImage resizedImageWithContentMode:UIViewContentModeScaleAspectFill bounds:CGSizeMake(1024.0, 768.0) interpolationQuality:1];
  [self uploadImage:originalImage withFilename:@"original.jpg"];
  [self uploadImage:smallerImage withFilename:@"smaller.jpg"];
} 
```

这可以很好地上传图像，但奇怪的是当它们登陆服务器时，`"original.jpg"`图像实际上是缩小版并且`"smaller.jpg"`是全尺寸图像。

我正在使用[UIImageCategories](https://github.com/ezrover/UIImage-Categories)`UIImage resizedImageWithContentMode:`中的方法，它的返回如下所示：

```
return [self resizedImage:newSize interpolationQuality:quality]; 
```

它调用的 resizedImage:interpolationQuality 方法返回：

```
return [self resizedImage:newSize transform:transform drawTransposed:drawTransposed interpolationQuality:quality]; 
```

resizedImage:transform:... 方法调用返回如下：

```
// Get the resized image from the context and a UIImage
CGImageRef newImageRef = CGBitmapContextCreateImage(bitmap);
UIImage *newImage = [UIImage imageWithCGImage:newImageRef scale:self.scale orientation:UIImageOrientationUp];

...

return newImage; 
```

所以，我真的希望我的代码设置`smallerImage`为这个新图像，该图像是作为对原始图像调用的方法的返回值创建的，但看起来行为是原始图像被原位修改，但之前它被修改到位它返回自我？我不知道，这似乎真的很奇怪。

谁能向我解释这里发生了什么，以及如何修复我的代码以获得所需的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T03:36:23.467

弄清楚了：

我认为原始图像实际上大于 1024，但事实并非如此。然后发生的事情是，大小是以点而不是像素为单位给出的，所以我制作的“较小”图像实际上是放大图像，而不是缩小图像。这就是让我失望的原因。

如果我将尺寸减半，我会得到我正在寻找的像素尺寸。

感谢您的评论，他们帮助了！

# email - 尽管有 DKIM、PTR、SPF 记录，我的电子邮件仍会进入垃圾邮件文件夹

> ID：16070544
> 
> 赞同：3
> 
> 时间：2013-04-17T21:26:51.360
> 
> 标签：email, gmail, email-spam, dkim, spf

我在从服务器发送电子邮件时遇到问题。问题是，当我向 gmail.сom、yahoo.com 发送一封信时，它会进入**垃圾邮件文件夹**。我已经尝试了很多东西。以下是我的信件特点的简要报告。

yandex.ru、mail.ru、rambler.ru 从我的服务器接收电子邮件没有问题

我的电子邮件服务器：ip 94.242.7.157 主机 mail.da.am 仅在 localhost:25 上侦听（拒绝其他连接）

Spamhaus 还可以[http://www.spamhaus.org/query/ip/94.242.7.157](http://www.spamhaus.org/query/ip/94.242.7.157)
*（两周前我已经从 spamhaus PBL 中删除了我的 ip，这是老问题）*
还有 46 个黑名单还可以[http://mxtoolbox.com /SuperTool.aspx?action=blacklist%3a94.242.7.157&run=toolpage](http://mxtoolbox.com/SuperTool.aspx?action=blacklist%3a94.242.7.157&run=toolpage)

**PTR**记录似乎没问题
**DKIM**签名被谷歌标记为“通过”，雅虎
**SPF**签名被谷歌标记为“通过”，雅虎
**DMARC**签名被谷歌和雅虎标记为“通过”

雅虎出于未知原因将我的电子邮件标记为**X-YahooFilteredBulk: 94.242.7.157**

这是给 gmail 的示例信的原始内容。这是在用户在我的网站上注册后立即发送给用户的激活信：

```
Delivered-To: a@da.am
Received: by 10.112.20.73 with SMTP id l9csp105062lbe;
        Wed, 17 Apr 2013 09:25:42 -0700 (PDT)
X-Received: by 10.112.155.40 with SMTP id vt8mr3898247lbb.70.1366215942667;
        Wed, 17 Apr 2013 09:25:42 -0700 (PDT)
Return-Path: <robot@bannerd.ru>
Received: from mail.da.am (mail.da.am. [94.242.7.157])
        by mx.google.com with ESMTP id o5si471161laj.179.2013.04.17.09.25.42;
        Wed, 17 Apr 2013 09:25:42 -0700 (PDT)
Received-SPF: pass (google.com: domain of robot@bannerd.ru designates 94.242.7.157 as permitted sender) client-ip=94.242.7.157;
Authentication-Results: mx.google.com;
       spf=pass (google.com: domain of robot@bannerd.ru designates 94.242.7.157 as permitted sender) smtp.mail=robot@bannerd.ru;
       dkim=pass header.i=@bannerd.ru;
       dmarc=pass (p=NONE dis=none) d=bannerd.ru
Received: by mail.da.am (Postfix, from userid 33)
    id 9E92D1E80373; Wed, 17 Apr 2013 20:25:41 +0400 (MSK)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=bannerd.ru;
    s=bannerd; t=1366215941;
    bh=ARMYABZee/pyG7UP+Jdc9zS/Nr4Dh7RDeIMT+hFEgGo=;
    h=To:Subject:List-Unsubscribe:Reply-To:From:Date;
    b=QhLO9vL0Y5w0ctl+v3S1atnlTa5Eq6PjJGG91Sb4TfMb5xCKB6UqoKQWnMeKlOcbk
     SMhlwSbD8CsSkvppFMpKygjPl1+xHkLWv8a9mzNtdDvtoGMZX++Hiy5rdiUItcoQDm
     aH/nWQg0RPNSSq3e3PdYbIbRk0ldgUA9yl9NavmQ=
To: a@da.am
Subject: =?UTF-8?B?0J/QvtC00YLQstC10YDQtNC40YLQtSwg0L/QvtC20LDQu9GD0LnRgdGC0LAs?=
 =?UTF-8?B?INCw0LTRgNC10YEg0Y3Qu9C10LrRgtGA0L7QvdC90YvQuSDQv9C+0YfRgtGL?=
 =?UTF-8?B?INC00LvRjyDQstCw0YjQtdCz0L4g0LDQutC60LDRg9C90YLQsA==?=
MIME-Version: 1.0
List-Unsubscribe: <mailto:support@bannerd.ru>
Reply-To: =?UTF-8?B?0J/QvtC00LTQtdGA0LbQutCwIEJhbm5lcmQucnU=?= <support@bannerd.ru>
Return-Receipt-To: <robot@bannerd.ru>
From: =?UTF-8?B?0KDQvtCx0L7Rgi3Qv9C+0YfRgtCw0LvRjNC+0L0gQmFubmVyZC5ydQ==?= <robot@bannerd.ru>
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: base64
Message-Id: <20130417162541.9E92D1E80373@mail.da.am>
Date: Wed, 17 Apr 2013 20:25:41 +0400 (MSK)

0KPQstCw0LbQsNC10LzRi9C5INCy0LXQsdC80LDRgdGC0LXRgCwNCg0K0JLRiyDQstCy0LXQu9C4
INCw0LTRgNC10YEg0Y3Qu9C10LrRgtGA0L7QvdC90L7QuSDQv9C+0YfRgtGLIGFAZGEuYW0g0LIg
0LrQsNGH0LXRgdGC0LLQtSDQu9C+0LPQuNC90LAg0LTQu9GPINCS0LDRiNC10Lkg0YPRh9C10YLQ
vdC+0Lkg0LfQsNC/0LjRgdC4INCyINGB0LjRgdGC0LXQvNC1IEJhbm5lcmQuDQrQoSDRhtC10LvR
jNGOINC30LDQstC10YDRiNC10L3QuNGPINC/0YDQvtGG0LXRgdGB0LAg0L3QsNC8INC90YPQttC9
0L4g0L/QvtC00YLQstC10YDQtNC40YLRjCwg0YfRgtC+INC00LDQvdC90YvQuSDQsNC00YDQtdGB
INC/0YDQuNC90LDQtNC70LXQttC40YIg0JLQsNC8LiDQlNC70Y8g0Y3RgtC+0LPQviDQv9GA0L7Q
udC00LjRgtC1INC/0L4NCtC90LjQttC10L/RgNC40LLQtdC00LXQvdC90L7QuSDRgdGB0YvQu9C6
0LUg0Lgg0LLQvtC50LTQuNGC0LUg0LIg0YHQuNGB0YLQtdC80YMsINC40YHQv9C+0LvRjNC30YPR
jyDRgdCy0L7QuSDQsNC00YDQtdGBINGN0LvQtdC60YLRgNC+0L3QvdC+0Lkg0L/QvtGH0YLRiyDQ
uCDQv9Cw0YDQvtC70YwuDQoNCtCf0L7QtNGC0LLQtdGA0LTQuNGC0Ywg0YHQtdC50YfQsNGBOiBo
dHRwOi8vYmFubmVyZC5ydS9hY2NvdW50L2FqYXg/dHlwZT1jb25maXJtJmNvZGU9YWYzMzljOWQ2
YzU3OTU1YmIyMTY1OTI1ZDhjZjE4ODYNCg0K0J/QvtGH0LXQvNGDINCS0Ysg0L/QvtC70YPRh9C4
0LvQuCDRjdGC0L4g0L/QuNGB0YzQvNC+Pw0K0J7QvdC+INC+0YLQv9GA0LDQstC70Y/QtdGC0YHR
jyDQsNCy0YLQvtC80LDRgtC40YfQtdGB0LrQuCwg0LrQvtCz0LTQsCDQutGC0L4t0LvQuNCx0L4g
0YHQvtC30LTQsNC10YIg0L3QvtCy0YPRjiDRg9GH0LXRgtC90YPRjiDQt9Cw0L/QuNGB0Ywg0LIg
0YHQuNGB0YLQtdC80LUgQmFubmVyZC4g0JXRgdC70Lgg0JLRiyDRjdGC0L7Qs9C+DQrQvdC1INC0
0LXQu9Cw0LvQuCwg0JLQsNC8INC90LUg0L4g0YfQtdC8INCx0LXRgdC/0L7QutC+0LjRgtGM0YHR
jy4g0JLQsNGIINCw0LTRgNC10YEg0Y3Qu9C10LrRgtGA0L7QvdC90L7QuSDQv9C+0YfRgtGLINC9
0LXQstC+0LfQvNC+0LbQvdC+INC40YHQv9C+0LvRjNC30L7QstCw0YLRjCDQsiDQutCw0YfQtdGB
0YLQstC1INC70L7Qs9C40L3QsA0K0LIg0YHQuNGB0YLQtdC80LUgQmFubmVyZCDQsdC10Lcg0JLQ
sNGI0LXQs9C+INC/0L7QtNGC0LLQtdGA0LbQtNC10L3QuNGPLg0KDQrQoSDRg9Cy0LDQttC10L3Q
uNC10LwsDQrQoNC+0LHQvtGCLdC/0L7Rh9GC0LDQu9GM0L7QvSBCYW5uZXJkLnJ1 
```

请帮我！

# python - 如何在 while 循环中连续检查小时？

> ID：16070546
> 
> 赞同：2
> 
> 时间：2013-04-17T21:27:01.980
> 
> 标签：python, loops, if-statement, while-loop

这是我的第一篇文章和第一个 Python 项目。我试图通过多种条件控制硬件传感器：

1.  如果传感器感应到运动，发送电子邮件并睡觉
2.  elif时间范围不在工作时间之间，然后睡到早上9点
3.  否则休眠半秒并等待传感器

到目前为止，第一个条件和最后一个条件都有效。也就是说，如果没有运动，重复 sleep(0.5) 直到传感器激活。

**问题：**我在时间不在 9 点到 5 点之间的中间部分遇到问题。如果我在 9 点之前或 5 点之后运行代码，它会一直休眠到上午 9 点按预期到达，但如果代码已经在 9 点到 5 点之间运行（等待移动），则中间条件永远不会触发。它卡在睡眠（0.5）上。

我没有那么有经验，但我有一个模糊的想法，即第二个过程应该有助于跟踪时间。有什么建议么？这是代码。

```
def pir_init():
    while True:
        m = datetime.datetime.now().time().minute   #loop through for current time
        h = datetime.datetime.now().time().hour     
        if h < 9:                                           
            print("Sleeping...")
            time_sleep = (9 - h) * 3600
            time.sleep(time_sleep)
        elif h > 16:
            print("Sleeping...")
            time_sleep = ((24 - h) + 9) * 3600
            time.sleep(time_sleep)
        elif io.input(pir_pin):
            print("PIR ALARM")
            send_gmail()   
            time.sleep(10)      #cooldown to prevent email spew
        else:
            print "Waiting..."
            time.sleep(0.5)     #sleep and wait for movement
            print m
    print "Loop End"

# main
if time_elements[0] > '0' and time_elements[0] < '6':  #Weekdays
    if get_hour > 8 and get_hour < 17:             #Hour Range
        pir_init()
    elif get_hour > 16:
        print("Initialization at 9am...")
        time_sleep = ((24 - get_hour) + 9) * 3600
        time.sleep(time_sleep)
        pir_init()              #initiate sensor
    elif get_hour < 9:
        print("Initialization at 9am...")
        time_sleep = (9 - get_hour) * 3600
        time.sleep(time_sleep)
        pir_init()
else:
    #to be completed
    print time_elements[0]
    print "bad weekday" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:57:14.790

您必须更新 while 循环中的 time_elements，以便程序使用条件中的当前时间来测试它是否应该睡到上午 9 点。否则，如果你不更新那个while循环中的time_elements，如果程序第一次没有进入那个条件，它就永远不会进入。

这解释了您注意到的行为；实际上，您对 time_elements 的定义没有显示在这里...

# ios - 我的 iOS 应用程序在启动时崩溃

> ID：16070550
> 
> 赞同：0
> 
> 时间：2013-04-17T21:27:15.913
> 
> 标签：ios, logging, crash

我一直在正常完美地开发一个 iOS 应用程序，然后突然当我启动调试器时，我得到一堆机器代码，它在这里停止：

```
0x2c70bb:  popl   %ebp
0x2c670bc:  ret 
```

我在日志中没有输出。当我运行僵尸或泄漏时，应用程序运行良好，但当我只使用模拟器时，我什么也得不到。我什至将断点放在应用程序委托的第一行代码中，但它没有命中它。

有小费吗？我什至在我的代码中回到了以前工作的代码，然后它发生了同样的事情。我已经开发 iOS 大约 2 年了，这是第一次。

我一直在寻找解决方案，但一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:21:20.393

如果您的应用程序委托没有命中，那么它将在您的 main.m 中的自动释放池语句中崩溃。

如果没有完整的堆栈跟踪，就很难调试。我推荐以下内容：

*   确保您的主窗口和根 xib 都正常
*   从您的应用程序委托中剥离除基础知识之外的所有内容

此外，在 main.m 文件中，您应该会看到类似于以下内容的内容：

```
UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

第四个参数是 delegateClassName，[Apple Docs](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIKitFunctionReference/Reference/reference.html)说：

> delegateClassName
> 实例化应用程序委托的类的名称。如果 principalClassName 指定 UIApplication 的子类，则可以指定子类为委托；子类实例接收应用程序委托消息。如果从应用程序的主 nib 文件加载委托对象，请指定 nil。

所以我会仔细检查您的委托类名称是否在应用程序主 xib 或您的委托中设置 - 我建议明确并添加它，如果它还没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T01:09:07.737

您可以在 main 上执行此操作以**捕获异常**（支持文件：main.m）：

```
int main(int argc, char *argv[])
{
    int retVal = 0;
    @autoreleasepool {
        NSString *classString = NSStringFromClass([CDAppDelegate class]);
        @try {
            retVal = UIApplicationMain(argc, argv, nil, classString);
        }
        @catch (NSException *exception) {
            NSLog(@"Exception - %@",[exception description]);
            exit(EXIT_FAILURE);
        }
    }
    return retVal;
} 
```

或者/您可以尝试查看是否有**要恢复的快照**。（但最好的做法是有一个**git repot**并定期提交/推送；））

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:39:34.730

好吧，这是最奇怪的事情。我发现了这个问题，但仍然不确定为什么会发生这种情况。

我有一个单例类，用于存储一些运行时设置信息。我有一个具有特定设置的类，我分配给主单例类。

在特定的设置类中，我有大约 15 个属性。如果我添加的属性超过 15 个，就会发生崩溃。如果我向类添加第 16 个属性，应用程序在启动时会崩溃，它甚至永远不会到达 main.m 中的代码。

这很奇怪，我无法解释。我只能假设这是一个内存问题，但说真的，它只有 15 个属性。

1 个 int 12 个 NSStrings 2 个 NSMUtableArrays，每个只有几条记录

如果有人知道为什么会发生这种情况，请告诉我们...

# php - 将编码字符转换回原始字符 - PHP

> ID：16070553
> 
> 赞同：2
> 
> 时间：2013-04-17T21:27:21.073
> 
> 标签：php, json, encoding, utf-8, special-characters

我的数据库返回以下带有特殊字符的 JSON。我需要将其转换回原始字符：

```
{   "event_id":"5153",
      "name":"Event Test",
      "description":"Pers&ouml;nlichkeit Universit&auml;t&quot;",
      "start_time":"2013-04-24 9:00 AM EST",
        "end_time":"2013-04-24 5:00 PM EST"  
} 
```

我想去掉所有的 HTML 字符。并将所有喜欢的字符转换`&ouml`为原始字符。所以`description`上面的 JSON 实际上应该是这样的

> Persönlichkeit Universität"

我`array_walk`在将数组编码为 JSON 之前对数组进行处理，并对`strip_tags`每个元素进行处理。这可以。（这导致了上面的 JSON。）。

为了找回字符，我尝试了：

```
 1\. encoding again with utf8_encode
  2\. htmlspecialchars_decode
  3\. html_entity_decode  //This one is eliminating the character altogether. 
```

但是没有任何东西可以恢复原始字符。

有任何想法吗？

**更新：**

我试过这个。但现在描述字段返回为空

```
 array_walk_recursive($results, function (&$val) {
    $val = strip_tags(html_entity_decode($val));
});

$results = json_encode( $results); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:34:56.480

`html_entity_decode`应该做的伎俩。我认为您的问题出在其他地方。请记住，`json_encode`它只接受 UTF-8 字符。所以你可能需要`utf8_encode`你的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-11T11:20:18.530

我是在找东西的时候来到这个话题的。3年后，这个问题仍然没有答案。

json_encode 接受选项作为第二个参数。如果您如下使用它，特殊字符将显示为原始字符。

```
json_encode($data, JSON_UNESCAPED_UNICODE) 
```

# haskell - Haskell中的嵌套地图

> ID：16070554
> 
> 赞同：1
> 
> 时间：2013-04-17T21:27:21.337
> 
> 标签：haskell, hashmap, nested

我想做的是当我有

```
rec1 = [("name", "obj-1"), ("status", "up"), ("region", "us")] 
```

那么我想拥有

```
[( "us", [("up", [("name", "obj-1"), ("status", "up"), ("region", "us")])])] 
```

这是我在 Haskell 中提出的代码。

```
rec1 = [("name", "obj-1"), ("status", "up"), ("region", "us")] 
convertto rec = Prelude.foldl (\map (k, v) -> Data.Map.insert k v map) Data.Map.empty rec 
justfold = Prelude.foldr (\key val -> Data.Map.insert key val Data.Map.empty) (convertto rec1) ["us","up"] 
```

在上面的第三行中，在我的 lambda 函数定义中，编译器不同意 val 的类型。它说它需要一个 Char 并且正在获取一个 String 或无法将 Map String 与列表类型匹配。

我对 Haskell 不是很好，所以看看是否有人可以给我指点。

谢谢。

编辑：更正了输出类型。我一开始打错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T23:08:29.017

您的代码存在一些问题，有些容易，有些困难。让我们首先检查简单的：

首先是你的`convertto`功能。它已经存在，并且被称为`fromList`. 还有一个函数用于创建一个`Map`包含一对的新函数，称为`singleton`. 此外，您引用函数的方式`Data.Map`也很不寻常。解决这些问题可以：

```
import qualified Data.Map as M

rec1 = M.fromList [("name", "obj-1"), ("status", "up"), ("region", "us")] 
justfold = foldr M.singleton rec1 ["us","up"] 
```

然而，现在有一个更深层次的问题。要弄清楚它是什么，让我们尝试将类型签名添加到`rec1`and `justfold`：

```
import qualified Data.Map as M

rec1 :: M.Map [Char] [Char]
rec1 = M.fromList [("name", "obj-1"), ("status", "up"), ("region", "us")] 

justfold :: M.Map [Char] (M.Map [Char] (M.Map [Char] [Char]))
justfold = foldr M.singleton rec1 ["us","up"] 
```

`rec1`很好，但是`justfold`是个问题。要了解原因，请查看`foldr`and的类型签名`singleton`：

```
foldr :: (a -> b -> b) -> b -> [a] -> b

singleton :: k -> a -> Map k a 
```

`foldr`需要一个 type 的函数`(a -> b -> b)`，而`singleton`不是那样，因为`a`和`Map k a`不是一回事。以下代码产生您想要的结果：

```
import qualified Data.Map as M

rec1 = M.fromList [("name", "obj-1"), ("status", "up"), ("region", "us")] 
justfold = M.singleton "us" $ M.singleton "up" rec1 
```

但是，基本问题是您无法迭代每次迭代都会更改类型的内容。如果您发现自己想要这样做，我建议您退后一步，重新考虑解决问题的方法。

# php - 通过 ID 访问表单输入

> ID：16070557
> 
> 赞同：0
> 
> 时间：2013-04-17T21:27:24.883
> 
> 标签：php, forms

我知道在 PHP 中你有`$_GET`, `$_POST`, 和`$_REQUEST`通过它们在 html 标签中的名字来访问表单输入。是否可以对他们的 id 做同样的事情？例如：

```
<form>
First name: <input type="text" id="firstname"><br>
Last name: <input type="text" id="lastname">
</form> 
```

在 PHP 中：

```
$f_name = $_GET['firstname']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:30:40.870

提交表单时，仅提交具有`name`属性的输入字段。只需添加一个`name`与 相同的属性`id`，或者做一些 JavaScript hack 来填充`name`表单提交的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:31:49.840

不，您在正常提交表单时不能这样做。但是，您可以使用客户端 JavaScript 来构造对 PHP 脚本的提交。

但这假设您可以修改客户端页面。如果可以，您也可以将正确的名称添加到表单字段中。

```
<form>
First name: <input type="text" name="firstname" id="firstname"><br>
Last name: <input type="text" name="lastname" id="lastname">
</form> 
```

# mysql - MySQL Union 基于相等谓词区分

> ID：16070558
> 
> 赞同：0
> 
> 时间：2013-04-17T21:27:32.237
> 
> 标签：mysql, union

我有两个表，其中包含列“name”“lname”“val”，我希望它们的联合，以便“name”和“lname”是唯一的，第一个表覆盖第二个表的行。Union distinct 看起来像我想要的，但我不能让它只检查前两行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:32:23.513

```
(select a.name, a.lname, a.val from a)
union
(select b.name, b.lname, b.val from b left join a using(name, lname) where a.name is null) 
```

# ios - 如何从 ReactiveCocoa 信号中获取“旧值”？

> ID：16070562
> 
> 赞同：9
> 
> 时间：2013-04-17T21:27:44.127
> 
> 标签：ios, objective-c, key-value-observing, reactive-programming, reactive-cocoa

如果我像这样使用 RACable：

```
[RACAbleWithStart(self.myProp) subscribeNext:^(id x) {
   // Do stuff

}]; 
```

如何访问 myProp 的旧值（在更改导致信号触发之前）？所以我可以像这样访问它：

```
[RACAbleWithStart(self.myProp) subscribeNext:^(id x) {
   // Do stuff
   id newValue = x;
   id oldValue = RAC_oldValue;
}]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-20T14:00:53.810

我已经成功使用了这个片段：

```
[[object rac_valuesAndChangesForKeyPath:@"property" options:NSKeyValueObservingOptionOld observer:self] subscribeNext:^(RACTuple *tuple) {
    id newObject = tuple.first;
    NSDictionary *change = tuple.second;
    id oldObject = change[NSKeyValueChangeOldKey];
}]; 
```

来源：[ReactiveCocoa 文档](http://cocoadocs.org/docsets/ReactiveCocoa/2.4.7/Categories/NSObject+RACPropertySubscribing.html#//api/name/rac_valuesAndChangesForKeyPath:options:observer:)

# php - 查询用户在游戏数据库中的排名

> ID：16070563
> 
> 赞同：1
> 
> 时间：2013-04-17T21:27:44.653
> 
> 标签：php, mysql, sql, database

目前在游戏表中有以下信息

```
ID       Name       XP
1        Bob        11
2        Jim        120
3        Dan        56
4        Oli        32 
```

例如，我想在拉单个用户时找到排名。例如，我希望能够将“Jim”拉为 1 号，将“Bob”拉为 4 号。

我有这个查询，但它似乎很混乱。

```
SELECT COUNT(*)+2 FROM game WHERE xp > (SELECT xp FROM game WHERE id = '$id') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:32:26.887

你可以使用这样的东西：

```
SELECT g1.id, COUNT(DISTINCT g2.XP)+1 rank
FROM
  game g1 LEFT JOIN game g2
  ON g1.XP < g2.XP
GROUP BY
  g1.id 
```

[在这里](http://sqlfiddle.com/#!2/3fc54/6)拉小提琴。您可以使用 DISTINCT 或不使用，这取决于您所追求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:53:16.430

您可能想要填充一个数组以查找他们的“排名”。如果你只是想要最高的：

```
"SELECT * FROM game WHERE xp = MAX(xp)" 
```

如果你想要一个按他们在 xp 中的排名排序的表，我建议用数据填充一个数组，这样你就可以按 xp 对其进行排序，然后相应地传递它。我还在我的脚本中使用了一个 $db 类，但它应该是有意义的：

```
while($data = $db->sql_query("SELECT * FROM games ORDER BY xp DESC"){
    $rank++;
    $users[]['name'] = $data['name'];
    $users[]['xp'] = $data['xp'];
    $users[]['rank'] = $rank;
}

echo '<table><tr><td>Rank</td><td>Name</td><td>XP</td></tr>';

foreach($users as $user){
     echo'<tr><td>'.$user['rank'].'</td><td>'.$user['name'].'</td><td>'.$user['xp'].'</td></tr>';
}

echo '</table>'; 
```

以我的经验，如果你只是填充一个数组，处理信息总是更容易。我可能缺少 sql 查询语法中的一些技巧，但它可以完成工作。

# java - 哈希表上的 Java 枚举

> ID：16070564
> 
> 赞同：0
> 
> 时间：2013-04-17T21:27:55.027
> 
> 标签：java, hashtable, enumeration

我是一名 CS 学生，正在从事一个关于 Java 中的哈希表的项目。我们正在创建自己的哈希表，我已经使用链表完成了它来管理冲突。

但是，我的教授要求我们在我的哈希表类中包含一个方法，该方法返回一个枚举以遍历哈希表中的键。我很难理解如何做到这一点。我用谷歌搜索了枚举，我得到的只是枚举结果。

任何帮助将非常感激。

编辑：因此，如果我正确阅读此内容，我应该让我的哈希表类实现枚举，然后在我的类中定义 nextElement() 和 hasMoreElements()？我返回枚举的 getkeys() 方法只返回哈希表类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:33:13.443

我建议以 java.util.Hashtable 实现为例。它的 keys() 方法返回 Enumeration

# build - Gradle 的术语评估和执行之间的区别

> ID：16070567
> 
> 赞同：19
> 
> 时间：2013-04-17T21:28:19.763
> 
> 标签：build, gradle, execution, evaluation

我是 Gradle 构建工具的新手，现在我正在阅读用户指南，但无法完全理解评估和执行阶段之间的区别。

在配置阶段项目对象已配置并创建 DAG，但我们有**afterEvaluate**，那么这里的评估是什么？评估任务依赖关系还是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-19T11:09:55.063

正如您在文档中看到的，共有三个阶段：初始化、配置和执行。每个步骤都从根项目遍历到子项目以进行多项目构建。当您想根据子项目中的配置来配置特定项目时，afterEvaluate 在多项目构建的根 gradle 文件中很有用。

假设您要为定义了特定插件的所有子项目添加任务。如果你添加到你的根项目：

```
subprojects {subProject ->
  if ( subProject.plugins.hasPlugin('myplugin')){
    subProject.task('newTask')<<{
      println "This is a new task"
    }
  }
} 
```

由于根项目是在子项目之前配置的，因此永远不会添加此任务。添加 afterEvaluate 将为您解决这个问题：

```
subprojects {subProject ->
  afterEvaluate{
    if ( subProject.plugins.hasPlugin('myplugin')){
      subProject.task('newTask')<<{
        println "This is a new task"
      }
    }
  }
} 
```

# node.js - 在 JetBrains WebStorm 6、NodeJS/Javascript 中，如何在评论中定义 JSON 示例？

> ID：16070569
> 
> 赞同：1
> 
> 时间：2013-04-17T21:28:28.627
> 
> 标签：node.js, webstorm

我有一个带有 json 参数的函数，每次都具有相同的结构。

```
/**
 * @param box {object}
*/
function testBox( box ) 
```

我正在寻找一种方法来指示我在该输入参数中插入的结构的自动完成，因为它是一个 {object}。我希望避免在对函数进行编码时出现拼写错误。

我注意到如果我将结构化的 json 添加到 var 中，稍后在函数中会提示结构的 IDE，但在函数参数的情况下，我不会这样做。

怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T12:50:42.757

请参阅以下主题：[https](https://groups.google.com/forum/?fromgroups#!topic/jsdoc-users/vR5REZ1I8Jc) ://groups.google.com/forum/?fromgroups#!topic/jsdoc-users/vR5REZ1I8Jc - 推荐的记录方式是使用 @typedef WebStorm 确实支持 JSDoc @typedef 注释。如果解决/输入提示有任何问题，请随时向[http://youtrack.jetbrains.com/issues/WEB提交错误](http://youtrack.jetbrains.com/issues/WEB)

# php - 致命错误：未捕获的 OAuthException：（＃200）需要扩展权限：read_stream

> ID：16070572
> 
> 赞同：1
> 
> 时间：2013-04-17T21:28:41.563
> 
> 标签：php, facebook, facebook-graph-api

致命错误：未捕获的 OAuthException：（#200）需要扩展权限：read_stream 在第 1033 行的 /home/a1607618/public_html/base_facebook.php 中抛出

我的应用倾向于阅读用户墙帖

```
if ($user)
{
    $comments = $facebook->api('/me/home');
    d($comments);
}

function d($d){
    echo '<pre>';
    foreach ($d as $a => $b)
    {
        print "$a: $b\n";
    }
    echo '</pre>';
} 
```

我给我的应用扩展权限：通过 Apps_ *>connectme* _>Permissions读取流

这是第 1033 行

```
protected function throwAPIException($result) {
    $e = new FacebookApiException($result);
    switch ($e->getType()) {
        // OAuth 2.0 Draft 00 style
        case 'OAuthException':
        // OAuth 2.0 Draft 10 style
        case 'invalid_token':
        $message = $e->getMessage();
        if ((strpos($message, 'Error validating access token') !== false) ||
           (strpos($message, 'Invalid OAuth access token') !== false)) {
            $this->setAccessToken(null);
            $this->user = 0;
            $this->clearAllPersistentData();
        }
    }

    throw $e;
} 
```

# networking - 如何链接 SSH 隧道

> ID：16070582
> 
> 赞同：0
> 
> 时间：2013-04-17T21:29:19.953
> 
> 标签：networking, ssh, ssh-tunnel

我正在尝试建立一个简单的 SSH 隧道链。

我有以下机器：

1.  本地机器，位于 10.0.0.1。
2.  远程机器，位于 10.0.0.2。

我有以下程序：

1.  客户端.py：

    ```
    import socket

    CLIENT_HOST = [...]
    CLIENT_PORT = [...]

    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    sock.connect((CLIENT_HOST, CLIENT_PORT))
    sock.send('test')
    sock.close() 
    ```

2.  服务器.py：

    ```
    import socket

    SERVER_HOST = [...]
    SERVER_PORT = [...]

    server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    server.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    server.bind((SERVER_HOST, SERVER_PORT))
    server.listen(1)
    client = server.accept()[0]
    print client.recv(1024)
    client.close()
    server.close() 
    ```

现在：

1.  我在同一台机器上运行 client.py (CLIENT_HOST='127.0.0.1', CLIENT_PORT=8000) 和 server.py (SERVER_HOST='', SERVER_PORT=8000)，它按预期工作。

2.  我在本地机器上运行 client.py (CLIENT_HOST='127.0.0.1', CLIENT_PORT=8000)，在远程机器上运行 server.py (SERVER_HOST='', SERVER_PORT=8001)。然后我运行 PuTTY 并使用源端口 8000 和目标端口 10.0.0.2:8001 添加本地 SSH 隧道，它按预期工作。

3.  我在远程机器上运行 client.py (CLIENT_HOST='127.0.0.1', CLIENT_PORT=8001)，在本地机器上运行 server.py (SERVER_HOST='', SERVER_PORT=8002)。然后我运行 PuTTY 并使用源端口 8001 和目标端口 127.0.0.1:8002 添加远程 SSH 隧道，它按预期工作。

4.  但是，当我在本地计算机上运行 client.py (CLIENT_HOST='127.0.0.1', CLIENT_PORT=8000) 和 server.py (SERVER_HOST='', SERVER_PORT=8002) 并运行两个 PuTTY，一个使用本地 SSH从源端口 8000 到目标 10.0.0.2:8001 的隧道，以及从源端口 8001 到目标 127.0.0.1:8002 的远程 SSH 隧道，没有任何反应。

正如我所看到的，来自 client.py 的消息应该发送到本地机器的端口 8000，PuTTY 在那里侦听，并且应该通过 SSH 将其重定向到远程机器的端口 8001，PuTTY 在那里侦听并应该通过 SSH 将其重定向到本地机器的端口 8002，它应该到达 server.py。

出了什么问题，我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:25:29.233

您可能需要勾选“本地端口接受来自其他主机的连接”和“远程端口也这样做”。

顺便说一句`netcat`，如果它在您的操作系统上可用，它是一个更有用的标准实用程序，用于尝试这种事情。

# hadoop - 使用 Hadoop 2.0 API 读写序列文件

> ID：16070587
> 
> 赞同：18
> 
> 时间：2013-04-17T21:29:36.100
> 
> 标签：hadoop

我正在寻找一个使用新 API 读取和写入序列文件的示例。

实际上我需要知道如何使用这些功能

```
 createWriter(Configuration conf, org.apache.hadoop.io.SequenceFile.Writer.Option... opts) 
```

旧定义对我不起作用：

```
SequenceFile.createWriter( fs, conf, path, key.getClass(), value.getClass()); 
```

同样，我需要知道读取序列文件的代码是什么，因为不推荐使用以下代码：

```
SequenceFile.Reader(fs, path, conf); 
```

* * *

这是使用相同的方法 -

```
 String uri = args[0];
    Configuration conf = new Configuration();
    Path path = new Path( uri);

    IntWritable key = new IntWritable();
    Text value = new Text();

    CompressionCodec Codec = new GzipCodec();
    SequenceFile.Writer writer = null;
    Option optPath = SequenceFile.Writer.file(path);
    Option optKey = SequenceFile.Writer.keyClass(key.getClass());
    Option optVal = SequenceFile.Writer.valueClass(value.getClass());
    Option optCom = SequenceFile.Writer.compression(CompressionType.RECORD,  Codec);

        writer = SequenceFile.createWriter( conf, optPath, optKey, optVal, optCom); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T23:46:55.320

```
public class SequenceFilesTest {
  @Test
  public void testSeqFileReadWrite() throws IOException {
    Configuration conf = new Configuration();
    FileSystem fs = FileSystem.getLocal(conf);
    Path seqFilePath = new Path("file.seq");
    SequenceFile.Writer writer = SequenceFile.createWriter(conf,
            Writer.file(seqFilePath), Writer.keyClass(Text.class),
            Writer.valueClass(IntWritable.class));

    writer.append(new Text("key1"), new IntWritable(1));
    writer.append(new Text("key2"), new IntWritable(2));

    writer.close();

    SequenceFile.Reader reader = new SequenceFile.Reader(conf,
            Reader.file(seqFilePath));

    Text key = new Text();
    IntWritable val = new IntWritable();

    while (reader.next(key, val)) {
        System.err.println(key + "\t" + val);
    }

    reader.close();
  }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-25T11:09:59.840

我迟到了一年多才回答，但刚刚开始使用 Hadoop 2.4.1 :)

下面是代码，有人可能会觉得它有用。

**注意**：它包括用于读取和写入序列文件的注释 1.x 代码。我想知道它在哪里获取文件系统但是当我直接在集群上执行它时，它正确地选择了它（可能是从[配置中提到的 core-site.xml](https://hadoop.apache.org/docs/stable2/api/index.html)

```
import java.io.File;
import java.io.IOException;
import java.io.RandomAccessFile;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.BytesWritable;
import org.apache.hadoop.io.IOUtils;
import org.apache.hadoop.io.SequenceFile;
import org.apache.hadoop.io.SequenceFile.Reader.Option;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.io.Writable;
import org.apache.hadoop.util.ReflectionUtils;

public class SequenceFileOperator {

    private Configuration conf = new Configuration();
    /*private FileSystem fs;
    {
        try {
            fs = FileSystem.get(URI.create("hdfs://cldx-1336-1202:9000"), conf);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }*/

    public static void main(String[] args) throws IOException {
        // TODO Auto-generated method stub

        if (args == null || args.length < 2) {

            System.out
                    .println("Following are the possible invocations <operation id> <arg1> <arg2> ...");

            System.out
                    .println("1 <absolute path of directory containing documents> <HDFS path of the sequence file");

            System.out.println("2 <HDFS path of the sequence file>");
            return;
        }

        int operation = Integer.valueOf(args[0]);

        SequenceFileOperator docToSeqFileWriter = new SequenceFileOperator();

        switch (operation) {

        case 1: {
            String docDirectoryPath = args[1];
            String sequenceFilePath = args[2];

            System.out.println("Writing files present at " + docDirectoryPath
                    + " to the sequence file " + sequenceFilePath);

            docToSeqFileWriter.loadDocumentsToSequenceFile(docDirectoryPath,
                    sequenceFilePath);

            break;
        }

        case 2: {

            String sequenceFilePath = args[1];

            System.out.println("Reading the sequence file " + sequenceFilePath);

            docToSeqFileWriter.readSequenceFile(sequenceFilePath);

            break;
        }

        }

    }

    private void readSequenceFile(String sequenceFilePath) throws IOException {
        // TODO Auto-generated method stub

        /*
         * SequenceFile.Reader sequenceFileReader = new SequenceFile.Reader(fs,
         * new Path(sequenceFilePath), conf);
         */
        Option filePath = SequenceFile.Reader.file(new Path(sequenceFilePath));
        SequenceFile.Reader sequenceFileReader = new SequenceFile.Reader(conf,
                filePath);

        Writable key = (Writable) ReflectionUtils.newInstance(
                sequenceFileReader.getKeyClass(), conf);
        Writable value = (Writable) ReflectionUtils.newInstance(
                sequenceFileReader.getValueClass(), conf);

        try {

            while (sequenceFileReader.next(key, value)) {

                System.out
                        .printf("[%s] %s %s \n",
                                sequenceFileReader.getPosition(), key,
                                value.getClass());
            }
        } finally {
            IOUtils.closeStream(sequenceFileReader);
        }

    }

    private void loadDocumentsToSequenceFile(String docDirectoryPath,
            String sequenceFilePath) throws IOException {
        // TODO Auto-generated method stub

        File docDirectory = new File(docDirectoryPath);

        if (!docDirectory.isDirectory()) {
            System.out
                    .println("Please provide an absolute path of a directory that contains the documents to be added to the sequence file");
            return;
        }

        /*
         * SequenceFile.Writer sequenceFileWriter =
         * SequenceFile.createWriter(fs, conf, new Path(sequenceFilePath),
         * Text.class, BytesWritable.class);
         */
        org.apache.hadoop.io.SequenceFile.Writer.Option filePath = SequenceFile.Writer
                .file(new Path(sequenceFilePath));
        org.apache.hadoop.io.SequenceFile.Writer.Option keyClass = SequenceFile.Writer
                .keyClass(Text.class);
        org.apache.hadoop.io.SequenceFile.Writer.Option valueClass = SequenceFile.Writer
                .valueClass(BytesWritable.class);

        SequenceFile.Writer sequenceFileWriter = SequenceFile.createWriter(
                conf, filePath, keyClass, valueClass);

        File[] documents = docDirectory.listFiles();

        try {
            for (File document : documents) {

                RandomAccessFile raf = new RandomAccessFile(document, "r");
                byte[] content = new byte[(int) raf.length()];

                raf.readFully(content);

                sequenceFileWriter.append(new Text(document.getName()),
                        new BytesWritable(content));

                raf.close();
            }
        } finally {
            IOUtils.closeStream(sequenceFileWriter);
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T05:19:53.937

阅读你可以使用

```
Path path= new Path("/bar");
Reader sequenceFileReader = new SequenceFile.Reader(conf,SequenceFile.Reader.file(path)); 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-12-14T08:49:26.077

您需要设置`SequenceFile`为输入格式

```
job.setInputFormatClass(SequenceFileInputFormat.class); 
```

[您将在此处](http://databuzzprd.blogspot.in/2013/12/reading-sequencefile-from-hdfs-in.html#.UqwaRo2D_5k)找到从 HDFS 中读取 SeequnceFile 的示例。

# wordpress - 在 Wordpress 中带有图像的生态可重复字段

> ID：16070591
> 
> 赞同：0
> 
> 时间：2013-04-17T21:29:46.560
> 
> 标签：wordpress

我试图在 Wordpress 中回显可重复字段，但我在可重复字段中有图像。我想将此可重复字段中的所有图像回显到模板中。这些字段位于管理面板的自定义元框中。我怎样才能输出/回显这些。

这就是我想出的：

```
 <?php $custom_repeatable = unserialize($post_meta_data['custom_repeatable']                     
     [0]); ?>
     <?php echo '<ul class="custom_repeatable">';
     foreach ($custom_repeatable as $string) {
 echo '&ltli>'.$string.'</li>';
       }
        </ul>'; ?> 
```

# c# - WinRT Smooth Grid.Column 变化动画

> ID：16070592
> 
> 赞同：0
> 
> 时间：2013-04-17T21:29:48.537
> 
> 标签：c#, xaml, animation, windows-store-apps, winrt-xaml

我正在使用以下代码将 ListView 位置从一列更改为另一列：

```
<Grid.Resources>
  <Storyboard x:Name="myStoryboard">
    <FadeOutThemeAnimation TargetName="detailItems" />
    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="detailItems2"
                                   Storyboard.TargetProperty="(Grid.Column)">
      <DiscreteObjectKeyFrame KeyTime="0"
                              Value="1" />
    </ObjectAnimationUsingKeyFrames>
  </Storyboard>
</Grid.Resources> 
```

这行得通，但是，没有动画，它只是改变了列。我希望它有一种翻译动画。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:33:33.180

仅通过更改 (Grid.Column) 无法做到这一点

您可以做的是为 RenderTransform 属性设置动画（使用 TranslateTransform 作为其实例）。

使用各种关键帧为 TranslateTransform 设置动画，完成此动画后，将 TranslateTransform 重置为 0 并更改 Grid.Column。

# apache - 虚拟主机不工作？

> ID：16070593
> 
> 赞同：0
> 
> 时间：2013-04-17T21:29:57.050
> 
> 标签：apache, mamp, virtualhost, httpd.conf

我似乎无法让我的虚拟主机工作......认为我对自己在做什么一无所知。

httpd.conf

```
NameVirtualHost *

<VirtualHost *>
    ServerName localhost
    DocumentRoot "/Applications/MAMP/bin/mamp"
    <Directory "/Applications/MAMP/bin/mamp">
        Options Indexes FollowSymLinks Includes execCGI
        AllowOverride None
        Order Allow,Deny
        Allow From All
    </Directory>
</VirtualHost>

# rev.dev
<VirtualHost *>
    ServerName revcms.dev
    DocumentRoot "/Users/manuel/Sites/Rev"
    <Directory "/Users/manuel/Sites/Rev">
        Options Indexes FollowSymLinks Includes execCGI
        AllowOverride None
        Order Allow,Deny
        Allow From All
    </Directory>
</VirtualHost> 
```

等/主机

```
##
# Host Database 
#
# localhost is used to configure the loopback interface
# when the system is booting.  Do not change this entry.
##

255.255.255.255 broadcasthost
::1             localhost 
fe80::1%lo0 localhost

127.0.0.1 rev.dev 
```

我完全不知道我做错了什么，[http:](http://rev.dev) //rev.dev 的行为与 127.0.0.1 相同有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:32:18.500

从命令行运行`httpd -S`（注意大写）并从那里调试。`S`

对于初学者，您的`/etc/hosts`文件说服务器名称是`rev.dev`，但您的虚拟主机说服务器是`revcms.dev`。

将您的虚拟主机文件更改为说`rev.dev`并重新启动 apache。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:42:09.247

弄清楚了。我注意到我的命令@Terminal 不起作用，所以删除 .bashrc、.bash_profile 等，它起作用了。

不管怎么说，多谢拉！@瑞安

# objective-c - 对可以多次使用的对象（如格式化程序）的并发性存疑

> ID：16070597
> 
> 赞同：5
> 
> 时间：2013-04-17T21:30:06.707
> 
> 标签：objective-c, concurrency, code-reuse, nsformatter

也许要问一个愚蠢的问题，但我需要对此进行一些确认。

通常，当我处理可以在我的应用程序中多次使用的对象时，我使用如下方法。

创建一个扩展，例如`NSDecimalNumber+Extension`，或一个类实用程序，其中创建了一个数字格式化程序，如下所示。

```
+ (NSNumberFormatter*)internal_sharedNumberFormatter
{
    static NSNumberFormatter* _internal_numberFormatter = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        _internal_numberFormatter = [[NSNumberFormatter alloc] init];
        // other configurations here...
    });

    return _internal_numberFormatter;
}

+ (NSString*)stringRepresentationOfDecimalNumber:(NSDecimalNumber*)numberToFormat
{
    NSString *stringRepresentation = [[self class] internal_sharedNumberFormatter] stringFromNumber:numberToFormat];
    return stringRepresentation;
} 
```

这种方法非常好，例如，格式化程序的创建成本很高。但它也可以应用于其他情况。

现在，我的问题如下。

这种方法在涉及不同执行路径（不同线程）的情况下是否也有效？

所以，如果我先`stringRepresentationOfDecimalNumber`在主线程上调用，然后在另一个线程中调用，会发生什么？

我认为`stringRepresentationOfDecimalNumber`在不同的线程中执行不同的调用是有效的，因为在这种情况下，共享格式化程序是只读的，但我希望得到专家的答复。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:40:07.750

`NSNumberFormatter`是可变的，因此它通常不是线程安全的，并在非线程安全类列表中的[线程安全摘要](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafetySummary/ThreadSafetySummary.html)（请参阅“线程不安全类”部分）中引用。

但是，如果您将对象视为不可变对象，则不必担心竞争条件。因此，例如，如果有多个线程访问格式化程序，则无法更改格式。如果`_internal_numberFormatter`没有以任何方式更改，并且类别中只有这两种方法，则应该认为它是线程安全的。

# sql - SQL 嵌套聚合查询 - 如何获取每位员工的客户数量？

> ID：16070599
> 
> 赞同：5
> 
> 时间：2013-04-17T21:30:14.180
> 
> 标签：sql, sql-server-2008, subquery

以下是我需要回答的提示：

列出每位员工的客户数量。包括员工的姓名和适当标记的客户数量，首先列出客户最多的员工。

以下是我的 EMPLOYEES 表：

```
create table EMPLOYEES
    (EmpID    char(4)         unique Not null,
     Ename    varchar(10),
     Job      varchar(9),
     MGR      char(4),
     Hiredate date,
     Salary   decimal(7,2),
     Comm     decimal(7,2),
     DeptNo   char(2)         not null,
         Primary key(EmpID),
         Foreign key(DeptNo) REFERENCES DEPARTMENTS(DeptNo));

insert into EMPLOYEES values (7839,'King','President',null,'17-Nov-11',5000,null,10);
insert into EMPLOYEES values (7698,'Blake','Manager',7839,'01-May-11',2850,null,30);
insert into EMPLOYEES values (7782,'Clark','Manager',7839,'02-Jun-11',2450,null,10);
insert into EMPLOYEES values (7566,'Jones','Manager',7839,'02-Apr-11',2975,null,20);
insert into EMPLOYEES values (7654,'Martin','Salesman',7698,'28-Feb-12',1250,1400,30);
insert into EMPLOYEES values (7499,'Allen','Salesman',7698,'20-Feb-11',1600,300,30);
insert into EMPLOYEES values (7844,'Turner','Salesman',7698,'08-Sep-11',1500,0,30);
insert into EMPLOYEES values (7900,'James','Clerk',7698,'22-Feb-12',950,null,30);
insert into EMPLOYEES values (7521,'Ward','Salesman',7698,'22-Feb-12',1250,500,30);
insert into EMPLOYEES values (7902,'Ford','Analyst',7566,'03-Dec-11',3000,null,20);
insert into EMPLOYEES values (7369,'Smith','Clerk',7902,'17-Dec-10',800,null,20);
insert into EMPLOYEES values (7788,'Scott','Analyst',7566,'09-Dec-12',3000,null,20);
insert into EMPLOYEES values (7876,'Adams','Clerk',7788,'12-Jan-10',1100,null,20);
insert into EMPLOYEES values (7934,'Miller','Clerk',7782,'23-Jan-12',1300,null,10); 
```

以下是我的 CUSTOMERS 表：

```
create table CUSTOMERS
    (CustID      char(6)       unique Not null,
     Name        varchar(45),
     Address     varchar(40),
     City        varchar(30),
     State       varchar(2),
     Zip         varchar(9),
     AreaCode    char(3),
     Phone       varchar (9),
     RepID       char(4)       not null,
     CreditLimit decimal(9,2),
     Primary key(CustID),
         Foreign key(RepID) References EMPLOYEES(EmpID));

insert into CUSTOMERS values (100,'Jocksports','345 Viewridge','Belmont','CA','96711',415,'598-6609',7844,5000);
insert into CUSTOMERS values (101,'TKB Sport Shop','490 Boli Rd.','Redwood City','CA','94061',415,'368-1223',7521,10000);
insert into CUSTOMERS values (102,'Vollyrite','9722 Hamilton','Burlingame','CA','95133',415,'644-3341',7654,7000);
insert into CUSTOMERS values (103,'Just Tennis','Hillview Mall','Burlingame','CA','97544',415,'677-9312',7521,3000);
insert into CUSTOMERS values (104,'Every Mountain','574 Surry Rd.','Cupertino','CA','93301',408,'996-2323',7499,10000);
insert into CUSTOMERS values (105,'K + T Sports','3476 El Paseo','Santa Clara','CA','91003',408,'376-9966',7844,5000);
insert into CUSTOMERS values (106,'Shape Up','908 Sequoia','Palo Alto','CA','94301',415,'364-9777',7521,6000);
insert into CUSTOMERS values (107,'Womens Sports','Valco Village','Sunnyvale','CA','93301',408,'967-4398',7499,10000);
insert into CUSTOMERS values (108,'North Woods Fitness Supply Center','98 Lone Pine Way','Hibbing','MN','55649',612,'566-9123',7844,8000); 
```

以下是我的查询：

```
select ename, empId
from EMPLOYEES
where EmpID in
(select count(repid) as NumberOfCustomers
from CUSTOMERS
group by RepID); 
```

为什么我的查询不起作用？

我知道我想将 EMPLOYEES 中的 empid 与 CUSTOMERS 中的 repID 匹配，然后计算 rep ID 在 CUSTOMERS 中出现的次数。我需要 EMPLOYEES 表的唯一原因是输出 Ename。我对需要使用的语法感到困惑，因为我需要在 CUSTOMERS 表中输出 RepID 的计数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:36:55.683

```
SELECT  *
FROM    employees e
CROSS APPLY
        (
        SELECT  COUNT(*)
        FROM    customers c
        WHERE   c.repId = e.empId
        ) cc (cnt)
ORDER BY
        cnt DESC 
```

See this on [SQLFiddle](http://sqlfiddle.com/#!3/e0a1a/1)

The same with a subquery:

```
SELECT  *,
        (
        SELECT  COUNT(*)
        FROM    customers c
        WHERE   c.repId = e.empId
        ) cnt
FROM    employees e
ORDER BY
        cnt DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:47:00.953

`Common Table Expression`如果您正在使用`SQL Server 2005`及以上，您也可以使用。

```
;WITH CTE
AS
(
   SELECT RepID, COUNT(*) AS CNT
   FROM CUSTOMERS 
   GROUP BY REPID  
)

SELECT E.Ename, E.EmpID, ISNULL(C.CNT, 0) 
FROM EMPLOYEES E
LEFT OUTER JOIN CTE C ON C.RepID = E.EmpID 
```

[演示](http://www.sqlfiddle.com/#!3/0aa4d/13)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T21:43:59.543

那这个呢？还是我误会了

```
 SELECT ename, count(*) as NumCustomers 
FROM Customers INNER JOIN 
 Employees ON customers.repid = employees.empid GROUP BY repid,ename 
 ORDER BY numCustomers DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T21:34:27.873

您的内部查询只有一个`count(repid)`，这是一个计数，而不是您的外部查询需要的实际 EmployeeID `where EmpID in (xxx)`。不确定为什么要在内部查询中进行计数，因为您会在最终结果中丢失它，但这应该可以：

```
 select ename, empId
 from EMPLOYEES
 where EmpID in (
    select repID
    from CUSTOMERS); 
```

# php - 如何在 Symfony2 中正确启用树枝的沙箱扩展？

> ID：16070602
> 
> 赞同：2
> 
> 时间：2013-04-17T21:30:21.643
> 
> 标签：php, symfony, twig, sandbox

在 Symfony2 中，默认情况下禁用了一些 Twig 模块。其中之一是调试扩展，它添加了`{% debug %}`标签（在开发环境中很有用）。

要启用它，没有什么困难，您可以将此服务添加到您的配置中：

```
 debug.twig.extension:
    class: Twig_Extensions_Extension_Debug
    tags:
      - { name: 'twig.extension' } 
```

但是如何启用`{% sandbox %}`标签？

我的问题是扩展的构造函数采用安全策略：

```
public function __construct(Twig_Sandbox_SecurityPolicyInterface $policy, $sandboxed = false)
{
    $this->policy            = $policy;
    $this->sandboxedGlobally = $sandboxed;
} 
```

通过阅读[twig 文档](http://twig.sensiolabs.org/doc/api.html#sandbox-extension)，我看到了本地执行它的方法（没有 Symfony2）：

```
$tags = array('if');
$filters = array('upper');
$methods = array(
    'Article' => array('getTitle', 'getBody'),
);
$properties = array(
    'Article' => array('title', 'body'),
);
$functions = array('range');
$policy = new Twig_Sandbox_SecurityPolicy($tags, $filters, $methods, $properties, $functions);
$sandbox = new Twig_Extension_Sandbox($policy);
$twig->addExtension($sandbox); 
```

我可以在使用沙箱之前在服务中做类似的事情，但这不像我们习惯的依赖注入那么清楚。

**有没有更好/正确的方法来在 Symfony2 中启用树枝的沙箱扩展？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T23:11:08.140

为什么不创建安全策略的私有服务：

```
parameters:
    twig.sandbox.tags:
        - if
    twig.sandbox.filters:
        - upper
    twig.sandbox.methods:
        Article: [getTitle, getBody]
    twig.sandbox.properties:
        Article: [title, body]
    twig.sandbox.functions:
        - range

twig.sandbox.policy:
    class: Twig_Sandbox_SecurityPolicy
    arguments:
        - %twig.sandbox.tags%
        - %twig.sandbox.filters%
        - %twig.sandbox.methods%
        - %twig.sandbox.properties%
        - %twig.sandbox.functions%
    public: false 
```

然后，您可以将此服务注入到`twig.sandbox.extension`服务中：

```
twig.sandbox.extension:
    class: Twig_Extension_Sandbox
    arguments:
        - @twig.sandbox.policy
    tags:
        - { name: twig.extension } 
```

完毕。标记`twig.sandbox.policy`私有可确保无法使用容器访问它（它仍然可以注入其他服务，但我认为这不是问题）。

*免责声明：我没有对此进行测试，它可能需要一些调整才能真正起作用，所以不要复制粘贴！*

# php - 不在主页上时 Twitter 引导路径中断

> ID：16070608
> 
> 赞同：1
> 
> 时间：2013-04-17T21:31:01.980
> 
> 标签：php, codeigniter, twitter-bootstrap, codeigniter-2, codeigniter-url

我目前正在本地服务器上测试我的网站。我的标题视图中的 twitter bootstrap 路径存在问题。

在我的主页上，这条路径运行良好：

```
<link href="bootstrap/css/bootstrap.css" rel="stylesheet"> 
```

当我通过链接移动到子页面时：

```
<a href="index.php/home_controller/getFilmDetails?id... 
```

翻译为：

```
http://localhost/www.mywebsite.co.uk/index.php/home_controller/getFilmDetails?id=114 
```

控制器代码：

```
$this->load->view('/header/header_home');
$this->load->view('movies_details_view',$data);
$this->load->view('footer_home'); 
```

twitter bootstrap 的路径不起作用，我需要将路径更改为：

```
<link href="/bootstrap/css/bootstrap.css" rel="stylesheet"> 
```

如何使路径适用于所有页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:52:31.383

在您的控制器中执行以下操作：

```
$this->load->helper('url');
$this->load->view('/header/header_home');
$this->load->view('movies_details_view',$data);
$this->load->view('footer_home'); 
```

在您的标题视图中执行以下操作：

```
<link href="<?php echo base_url('/bootstrap/css/bootstrap.css') ?>" rel="stylesheet"> 
```

# wix - WiX-Bootstrapper - 为 UAC 对话框设置产品名称和公司名称

> ID：16070613
> 
> 赞同：1
> 
> 时间：2013-04-17T21:31:17.907
> 
> 标签：wix, sign, bootstrapper, wix3.7

我用 WiX 3.7 创建了一个引导程序。现在，当我在 Windows7 机器上启动它时，将在安装 .NET 4.0 作为先决条件之前显示 UAC-Dialog。没关系。我现在正在寻找一种“签署”安装程序/引导程序的方法，我可以为 UAC-Dialog 设置产品名称和公司名称。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:51:38.870

wix.targets 中内置了签名任务，可帮助您签署 Bundle。您可以在 WiX 主题中阅读有关[Insignia 主题的](http://wix.sourceforge.net/manual-wix3/insignia.htm)信息。UAC 将显示证书中的信息。

# ios - 手势识别器从不触发

> ID：16070616
> 
> 赞同：0
> 
> 时间：2013-04-17T21:31:39.343
> 
> 标签：ios, cocoa-touch, uikit, uigesturerecognizer

这就是我所拥有的

UICollectionViewController - UICollectionViewCell - UIScrollView - ImageView

我正在尝试处理对 imageview 的点击，但从未被调用。

```
UITapGestureRecognizer *tap =[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
[cell.imageView addGestureRecognizer:tap];

- (void)handleTap:(UITapGestureRecognizer *)recognizer  {
    NSLog(@"Tap");
    NSIndexPath *indexPath = [self.collectionView indexPathForItemAtPoint:[recognizer locationInView:self.collectionView]];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:33:16.603

单元格的 ImageView 应该首先允许用户交互来检测点击。确保您启用与以下行的用户交互。

```
[cell.imageView setUserInteractionEnabled:YES]; 
```

# ruby-on-rails - 如何创建将属性值转换为新值的方法

> ID：16070619
> 
> 赞同：0
> 
> 时间：2013-04-17T21:31:48.310
> 
> 标签：ruby-on-rails, ruby, methods, attributes

我有一个表单，用户可以在其中输入属性 :bytesize 的数字，该属性具有整数数据类型。该数字代表我的对象@catcher 的字节数。

我想有一种方法可以将 :bytesize 的值转换为兆字节。也就是说，我希望能够运行@catcher.mbsize，它将显示该对象的兆字节数。

我对 Rails 很陌生，所以如果这看起来很明显，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:33:54.317

转换方法非常简单：

```
class Catcher
  def mbsize
    self.bytesize / (1 << 20)
  end
end 
```

请记住，属性在内部存储为实例变量，因此`attr_accessor :bytesize`存储在`@bytesize`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T22:42:44.860

您需要将 mbsize 列添加到您的数据库。

在控制器中：

```
def create
#other code
def mbsize
    @bytesize / (1 << 20)
  end
@catcher.mbsize=mbsize
@cather.save
end 
```

**编辑：**

如果您不需要相关的数据库记录，您可以简单地在 Catcher 模型中定义此方法：

```
def mbsize
bytesize=self.bytesize
mbsize=#your method of converting
end 
```

由于某种原因，您的字节大小很刺痛。`.to_i`您可以通过方法将其转换为整数

# php - if 语句在 for 循环内的 while 循环内不起作用

> ID：16070623
> 
> 赞同：0
> 
> 时间：2013-04-17T21:31:56.540
> 
> 标签：php, if-statement, for-loop, while-loop

我已经花了几个小时解决这个问题，并在网上搜索答案，但没有找到任何对我有帮助的东西。

所以，我正在为一个酒店网站做一个过滤器，酒店搜索的标准之一是酒店所在的地区。我使用 GET 方法：

```
<?php if (isset($_GET['District1'])){
    $district1= ($_GET["District1"]);
    }else ($district1=0);
if (isset($_GET['District2'])){
    $district2= ($_GET["District2"]);
    }else ($district2=0);
if (isset($_GET['District3'])){
    $district3= ($_GET["District3"]);
    }else ($district3=0);
if (isset($_GET['District4'])){
    $district4= ($_GET["District4"]);
    }else ($district4=0);
?> 
```

其中 $district1, $district2, $district3, $district4 是城市的 4 个不同的区。

我要做的是使用**for 循环**构建区域变量（变量名称末尾的数字将按 1 递增： $district1.. **2** .. **3** .. **4**），

然后将这些区域变量放在**while 循环内的****if 子句**中，如下所示：

 **```
<?php 
$districts_filter_query="SELECT * FROM districts_table ";
        $districts_filter_result = mysql_query($districts_filter_query, $connect);
        $districts_filter_row = mysql_fetch_array($districts_filter_result);
        for($count = 1; $count <= 4 ; $count++){

do {

        $district_name = $districts_filter_row['district_name'];
        $district_value = $districts_filter_row['district_value'];

    echo '
           <label for="group13"> <p ';  ?> <?php 
            if ( eval(' return $district'.$count.';') !=0){echo 'class="greenBG"';}
                    else {echo ' class="checkbox" ';}?> <?php echo ' >
                    <input type="checkbox" name="District'.$count.'" id="group13" value="'.$district_value.'"
                         onClick="this.form.submit();" ';?> 
                    <?php if ( eval (' return $district'.$count.';') !=0){echo ' checked ';};?><?php echo '/> '.$district_name.' 
                </p>
           </label> ';

    }
    while($districts_filter_row = mysql_fetch_array ($districts_filter_result));
    }
?> 
```

问题出在这里，我猜：eval('return $district'.$count.';')，通过这个我尝试构造区变量名。但它不起作用。

如果我使用此代码，一切都会完美运行：

```
 <label for="group1"> <p <?php 
            if ($district1!=0){echo 'class="greenBG"';}
                    else echo 'class="checkbox"';?>>
                    <input type="checkbox" name="District1" id="group1" value='1013' onClick="this.form.submit();" 
                    <?php if ($district1!=0){echo 'checked ';};?>/> district1
                </p>
           </label>
            <label for="group2"> <p <?php 
             if ($district2!=0){echo   'class="greenBG"';}
                    else echo 'class="checkbox"';?>>
                    <input type="checkbox" name="District2" id="group2" value='1014' onClick="this.form.submit();" 
                    <?php if ($district2!=0){echo 'checked ';};?>/> district2
                </p>
           </label>
            <label for="group3"> <p <?php 
            if ($district3!=0){echo 'class="greenBG"';}
                    else echo 'class="checkbox"';?>>
                    <input type="checkbox" name="District3" id="group3" value='1015' onClick="this.form.submit();" 
                    <?php if ($district3!=0){echo 'checked ';};?>/> district3
                </p>
           </label>
             <label for="group4"> <p <?php 
            if ($district4!=0){echo 'class="greenBG"';}
                    else echo 'class="checkbox"';?>>
                    <input type="checkbox" name="District4" id="group4" value='1016' onClick="this.form.submit();" 
                    <?php if ($district4!=0){echo 'checked ';};?>/>  district4
                </p>
           </label> 
```

但这不适合我，因为有30多个区，对代码进行任何细微的更改都需要花费大量的时间和精力。

如果您能帮我解决这个问题并节省我的时间，我将不胜感激。谢谢，希望我的问题足够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:38:38.263

that's a little convoluted as an approach, but a quick solution to get rid of `eval` is to use variable variables:

```
<?php
$district_name = "district$count";
if ($$district_name != 0) { ... }
?> 
```

... though a better solution would be to just use an array and loop through it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:40:18.817

使用[http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)而不是一些难看的`eval()`. （例如`${"district$count"}`）

```
$count = 0;
do {
    $count++;
    $district_name = $districts_filter_row['district_name'];
    $district_value = $districts_filter_row['district_value'];
?>
<label for="group<?php echo $count; ?>">
    <p <?php 
        if (${"district$count"} != 0) echo 'class="greenBG"';
        else echo 'class="checkbox"'; ?>>
        <input type="checkbox" name="District<?php echo $count; ?>" id="group<?php echo $count; ?>" value='<?php echo $district_value; ?>' onClick="this.form.submit();" 
        <?php if (${"district$count"} != 0) echo 'checked '; ?>/> <?php echo $district_name; ?>
    </p>
</label>
<?php
}
while($districts_filter_row = mysql_fetch_array ($districts_filter_result)); 
```

然后删除这个for循环。**

# c++ - 使用 directx 11 时未解决的链接错误

> ID：16070624
> 
> 赞同：0
> 
> 时间：2013-04-17T21:31:59.133
> 
> 标签：c++, directx-11

我试图创建一个实例化我的 directx 窗口的类我有一个初始化方法和一个干净的方法，我已将其推送到 .h 和 .cpp 文件中，这样做时我收到以下 2 个错误：

错误 58 错误 LNK2019：在函数 WinMain C:\Users\thatguy\Documents\game dev\tutorial work\directx 中引用的未解析的外部符号“public: void __cdecl D3DWindow::CleanD3D(void)”(?CleanD3D@D3DWindow@@QEAAXXZ) 11 教程\directx 11 教程\main.obj directx 11 教程

错误 59 错误 LNK2019：未解析的外部符号“public: void **cdecl D3DWindow::InitD3D(struct HWND** *)”(?InitD3D@D3DWindow@@QEAAXPEAUHWND__@@@Z) 在函数 WinMain C:\Users\thatguy\Documents\game 中引用dev\tutorial work\directx 11 教程\directx 11 教程\main.obj directx 11 教程

主.cpp：

```
// include the basic windows header files and the Direct3D header files
#include <windows.h>
#include <windowsx.h>
#include "D3DWindow.h"

// the WindowProc function prototype
LRESULT CALLBACK WindowProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);

// the entry point for any Windows program
int WINAPI WinMain(HINSTANCE hInstance,
                   HINSTANCE hPrevInstance,
                   LPSTR lpCmdLine,
                   int nCmdShow)
{
    HWND hWnd;
    WNDCLASSEX wc;

    ZeroMemory(&wc, sizeof(WNDCLASSEX));

    wc.cbSize = sizeof(WNDCLASSEX);
    wc.style = CS_HREDRAW | CS_VREDRAW;
    wc.lpfnWndProc = WindowProc;
    wc.hInstance = hInstance;
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)COLOR_WINDOW;
    wc.lpszClassName = "WindowClass";

    RegisterClassEx(&wc);

    RECT wr = {0, 0, 800, 600};
    AdjustWindowRect(&wr, WS_OVERLAPPEDWINDOW, FALSE);

    hWnd = CreateWindowEx(NULL,
                          "WindowClass",
                          "Our First Direct3D Program",
                          WS_OVERLAPPEDWINDOW,
                          300,
                          300,
                          wr.right - wr.left,
                          wr.bottom - wr.top,
                          NULL,
                          NULL,
                          hInstance,
                          NULL);

    ShowWindow(hWnd, nCmdShow);

    D3DWindow window;

    // set up and initialize Direct3D
    window.InitD3D(hWnd);

    // enter the main loop:

    MSG msg;

    while(TRUE)
    {
        if(PeekMessage(&msg, NULL, 0, 0, PM_REMOVE))
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);

            if(msg.message == WM_QUIT)
                break;
        }
        else
        {
            // Run game code here
            // ...
            // ...
        }
    }

    // clean up DirectX and COM
    window.CleanD3D();

    return msg.wParam;
}

// this is the main message handler for the program
LRESULT CALLBACK WindowProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch(message)
    {
        case WM_DESTROY:
            {
                PostQuitMessage(0);
                return 0;
            } break;
    }

    return DefWindowProc (hWnd, message, wParam, lParam);
} 
```

D3DWindow.h：

```
#include <windows.h>
#include <d3d11.h>
#include <d3dx11.h>
#include <d3dx10.h>

#pragma once
class D3DWindow
{
public:
    D3DWindow(void);
    ~D3DWindow(void);
    void CleanD3D();
    void InitD3D(HWND hWnd);

}; 
```

D3DWindow.cpp：

```
#include "D3DWindow.h"
#include <windows.h>

// global declarations
IDXGISwapChain *swapchain;             // the pointer to the swap chain interface
ID3D11Device *dev;                     // the pointer to our Direct3D device interface
ID3D11DeviceContext *devcon;           // the pointer to our Direct3D device context

D3DWindow::D3DWindow(void)
{
}

D3DWindow::~D3DWindow(void)
{
}

// this function initializes and prepares Direct3D for use
void InitD3D(HWND hWnd)
{
    // create a struct to hold information about the swap chain
    DXGI_SWAP_CHAIN_DESC scd;

    // clear out the struct for use
    ZeroMemory(&scd, sizeof(DXGI_SWAP_CHAIN_DESC));

    // fill the swap chain description struct
    scd.BufferCount = 1;                                    // one back buffer
    scd.BufferDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;     // use 32-bit color
    scd.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;      // how swap chain is to be used
    scd.OutputWindow = hWnd;                                // the window to be used
    scd.SampleDesc.Count = 4;                               // how many multisamples
    scd.Windowed = TRUE;                                    // windowed/full-screen mode

    // create a device, device context and swap chain using the information in the scd struct
    D3D11CreateDeviceAndSwapChain(NULL,
                                  D3D_DRIVER_TYPE_HARDWARE,
                                  NULL,
                                  NULL,
                                  NULL,
                                  NULL,
                                  D3D11_SDK_VERSION,
                                  &scd,
                                  &swapchain,
                                  &dev,
                                  NULL,
                                  &devcon);
}

// this is the function that cleans up Direct3D and COM
void CleanD3D(void)
{
    // close and release all existing COM objects
    swapchain->Release();
    dev->Release();
    devcon->Release();
} 
```

老实说，这可能是我忽略的事情，但我不确定为什么当它全部在一个文件下工作时它不起作用。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:35:53.187

```
void InitD3D(HWND hWnd) 
```

应该

```
void D3DWindow::InitD3D(HWND hWnd) 
```

CleanD3D 也一样。

顺便说一句，您的 D3DWindow 类似乎没有什么意义。您为什么决定将 InitD3D 和 CleanD3D 编写为课程的一部分？您编写的方式可能只是将它们编写为全局函数。

# c# - 使用 Html.Beginform 助手时如何删除表单 html 标记中的 ID 部分？

> ID：16070626
> 
> 赞同：4
> 
> 时间：2013-04-17T21:32:15.710
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我正在使用这样的表单助手：

```
 @using (Html.BeginForm("Upload", "File", FormMethod.Post, new { enctype = "multipart/form-data"}))

} 
```

我的控制器的操作是：

```
[HttpPost]
public ActionResult Upload(HttpPostedFileBase file)
{
} 
```

当我查看我的 HTML 时，生成的表单标签是：

```
<form action="/File/Upload/123123" enctype="multipart/form-data" method="post">
</form> 
```

出于某种原因，它在获取请求期间包含了我的 url 的 id 部分。我怎样才能删除它，所以它只是：

```
action="/File/Upload" 
```

也只是为了让我明白，我也可以更改我的行动声明吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:50:10.143

我不明白您为什么要删除该`id`零件。

但要回答你的问题，是的，你可以。
这是你如何做到的。

首先根据[Html.BeginForm(string actionName, string controllerName)](http://msdn.microsoft.com/en-us/library/dd492590%28v=vs.108%29.aspx)尝试这个。

```
@using(Html.BeginForm("Upload", "File")
{
} 
```

如果这不起作用（或）仍然输入`id`值，请尝试使用此
[Html.BeginForm(RouteValueDictionary routeValues)](http://msdn.microsoft.com/en-us/library/dd492590%28v=vs.108%29.aspx)。

```
@using(Html.BeginForm(new RouteValueDictionary { { "controller", "File" }, { "action", "Upload" } })
{
} 
```

这样，您可以指向一个**完全不同的 Controller 的 Action Method**。
假设您在`FileController`，您可以将`Form`标签设置为 POST 到另一个控制器的操作方法。

```
@using(Html.BeginForm("AnotherUploadAction", "AnotherController"))
{
} 
```

更好的是，如果您想通过名称引用 Url 路由，您可以使用[BeginRouteForm() 方法。](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.formextensions.beginrouteform%28v=vs.108%29.aspx)

```
routes.MapRoute(
    name: "My-Route-Name",
    url: "RouteUpload",
    defaults: new { controller = "AnotherClass", action = "Upload" }
);

@using(Html.BeginRouteForm("My-Route-Name"))
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-04T15:31:56.210

为了防止`Id`被包含在表单动作中，您可以使用 RouteValues 对象，但这里的关键是将 设置`Id`为空字符串，如下所示：

```
@using (Html.BeginForm("MyActionName", "MyControllerName", new { Id = "" })) 
```

或者在你的情况下：

```
@using (Html.BeginForm("Upload", "File", new { Id = "" }, FormMethod.Post, new { enctype = "multipart/form-data" })) 
```

这将生成以下表单标签：

```
<form action="/File/Upload" enctype="multipart/form-data" method="post"></form> 
```

或者，您可以将其从`RouteData`呈现视图的控制器中删除（尽管我更喜欢前者，因为它使意图更清晰）：

```
public ActionResult MyActionName(int id)
{
    RouteData.Values.Remove("Id");

    return View();
} 
```

# asp.net-mvc - 从 ASP MVC 3 控制器设置单选按钮选中项

> ID：16070628
> 
> 赞同：2
> 
> 时间：2013-04-17T21:32:23.970
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, radio-button, postback

下面是我的视图中出现的一组单选按钮。我可以通过这个简单的代码检索所选项目

```
string criteria = filter["criteria"]; 
```

但是我不知道如何保留所选项目。一旦控制器回发到视图，默认单选按钮总是被选中。

```
 <form method="post">
        @Html.TextBox("searchValue", ViewBag.CurrentFilter as string, new { placeholder = "Search" })
        <input type="image" src="@Url.Content("~/Content/Images/Filter.bmp")" alt="Filter" style="padding-top: 0px;" />
            <span class="error" style="clear: both;">
                @ViewBag.ErrorMessage
           </span>
        <a href="#" style="padding-left: 30px;"></a>
        <br />
        <br />
        <input type="radio" name="criteria" id="bankName" value="bankName" checked="true"/>
        <label for="bankName">Bank Name</label>
        <input type="radio" name="criteria" id="EPURL" value="EPURL" />
        <label for="EPURL">EPURL</label>
        <input type="radio" name="criteria" id="specialNotes" value="specialNotes" />
        <label for="SpecialNotes">Special Notes</label>
        <input type="radio" name="criteria" id="email" value="email" />
        <label for="email">Email</label>
        <input type="radio" name="criteria" id="dynamicsId" value="dynamicsId" />
        <label for="dynamicsId">Dynamics ID</label>
        <input type="radio" name="criteria" id="stat" value="stat" />
        <label for="fixed">Agent ID &nbsp;</label>
    </form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T17:01:04.493

这个问题的答案非常简单。我犯的第一个错误是没有使用`@Html`控件。其次是`FormCollection`用作索引控制器的输入参数。通过将单选按钮更改为以下内容：

```
 @Html.RadioButton("criteria", "bankName", true)<span>Bank Name</span>
        @Html.RadioButton("criteria", "EPURL")<span>EPURL</span>
        @Html.RadioButton("criteria", "specialNotes")<span>Special Notes</span>
        @Html.RadioButton("criteria", "email")<span>Email</span>
        @Html.RadioButton("criteria", "dynamicsId")<span>Dynamics ID</span>
        @Html.RadioButton("criteria", "stat")<span>Agent ID</span> 
```

`Index`以及控制器中方法的签名：

```
public ActionResult Index(string criteria, string searchValue) 
```

回发后选中的单选按钮保持选中状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:49:46.690

如果我正确理解您的需求，您可以在 ViewBag（或 ViewData 或 Model）中设置要检查的项目的名称，并相应地在视图中设置选中的属性。像这样的东西：

```
 <form method="post">
        @Html.TextBox("searchValue", ViewBag.CurrentFilter as string, new { placeholder = "Search" })
        <input type="image" src="@Url.Content("~/Content/Images/Filter.bmp")" alt="Filter" style="padding-top: 0px;" />
            <span class="error" style="clear: both;">
                @ViewBag.ErrorMessage
           </span>
        <a href="#" style="padding-left: 30px;"></a>
        <br />
        <br />

        @{
            var checkedItemName = ViewBag.CheckedItemName;
        }
        <input type="radio" name="criteria" id="bankName" value="bankName" checked="@((checkedItemName == "bankName"))"/>
        <label for="bankName">Bank Name</label>
        <input type="radio" name="criteria" id="EPURL" value="EPURL" checked="@((checkedItemName == "EPURL"))"/>
        <label for="EPURL">EPURL</label>
        <input type="radio" name="criteria" id="specialNotes" value="specialNotes" checked="@((checkedItemName == "specialNotes"))"/>
        <label for="SpecialNotes">Special Notes</label>
        <input type="radio" name="criteria" id="email" value="email" checked="@((checkedItemName == "email"))"/>
        <label for="email">Email</label>
        <input type="radio" name="criteria" id="dynamicsId" value="dynamicsId" checked="@((checkedItemName == "dynamicsId"))"/>
        <label for="dynamicsId">Dynamics ID</label>
        <input type="radio" name="criteria" id="stat" value="stat" checked="@((checkedItemName == "stat"))"/>
        <label for="fixed">Agent ID &nbsp;</label>
    </form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T06:26:19.567

不要刷新整个页面...使用 JQuery 并进行 Ajax 调用

```
$.ajax({
    url: "Your Url",
    async: true,
    type: 'POST',
    data: JSON.stringify({ ParameterName: Param_Value }),
    beforeSend: function (xhr, opts) {

    },
    contentType: 'application/json; charset=utf-8',
    complete: function () {  },
    success: function (data) {
        //Success Callback
        //Code to set value to your control
    }
}); 
```

# powershell - PowerShell：脚本模块变量在 ISE 之外不可用

> ID：16070633
> 
> 赞同：5
> 
> 时间：2013-04-17T21:32:40.717
> 
> 标签：powershell

我一直在努力更新我编写的一些脚本。我还在学习 PowerShell，所以我喜欢回顾我的旧版本，看看我是否可以改进。
我偶然发现了模块，并且非常喜欢使用它们来存储可以随时调用的不同操作的想法。

我写了一个简单的脚本来测试（或者我是这么认为的）。我应该提到我将我的模块存储在服务器共享上。

```
Write-Host "Testing for available variables"
Write-Host "Loading Modules"
Import-Module <path to my module on server share>.psm1
Write-Host ""
Write-Host "Done"
Write-Host "Print loaded modules"
Get-Module
Write-Host ""
Write-Host "Done"
Write-Host "================="
Write-Host ""
Write-Host "Printing variables"
Write-Host ""
Write-Host "Variable: arch: " $arch
Write-Host "Variable: WowNode: " $WowNode
Write-Host ""
Write-Host "Done" 
```

我的模块包含

```
If ( "${env:ProgramFiles(x86)}" -ne "" )
 {
    $script:arch = 64
    $script:WowNode = "\Wow6432Node\"
 }
 ELSE
 {
    $script:arch = 32
    $script:WowNode = "\"
 } 
```

当我使用 Windows Powershell ISE 运行我的脚本时，一切都按照我的想法运行。我看到变量的内容并且它们正确打印出来。
当我从 Powershell 命令行窗口运行我的脚本时，模块被加载，但变量是空白的（没有打印出来）。
我一直在研究谷歌，我看到的唯一可能导致这种情况的事情与我用来定义变量的范围有关。
将它们定义为**$script:xx**会将它们放入全局范围（我很确定），这使它们在整个脚本中都可用。所以我认为我正确地定义了我的变量。但我仍然没有任何运气。

我可能遗漏了一些明显的东西，但对于我的生活，我找不到它。
关于我可以做些什么来解决这个问题的任何建议？
我已经确认我正在运行 PowerShell 2.0 版，因为我读到模块仅在 2.0 版中可用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T22:21:00.423

从我现在能想到的（未经测试）来看，问题是你所说的范围。在 ISE 和控制台中运行脚本是有区别的。我猜当您在 ISE 中运行脚本时，您打开脚本并按下运行按钮。这将在控制台中逐行执行脚本，就像您直接在控制台中键入它们一样。这使得脚本本身在`global`（会话）变量范围内运行。由于脚本位于 中`global`，因此您的模块将是唯一在`script`范围内运行的模块。

但是，当您在 powershell 控制台中运行脚本时；喜欢：

```
PS > .\myscript.ps1 
```

然后你的脚本在`script`范围内运行（脚本完成后每个变量都被删除）。现在，模块将在它自己的`script`范围内运行，低于你的主脚本运行的范围。当模块完成导入时，模块的`script`范围被删除，你的主脚本将在它自己的范围内查找，你的变量在哪里不存在。

```
Global (session)
 - Script (mainscript)
   - Script (module)
     #Module completes, and scope is deleted
   #You look for $script:arch , which was actually deleted right above.
   #Powershell searches through the mainscript's scope, but finds nothing. 
```

要解决此问题，请尝试将值存储在`global`（会话）范围内，如下所示`$global:arch`。`global`在创建变量（必需）和读取变量时（推荐）指定为范围。

# java - 为什么我需要调用 close() 或 shutdown() 方法？

> ID：16070634
> 
> 赞同：5
> 
> 时间：2013-04-17T21:32:48.113
> 
> 标签：java, garbage-collection, shutdown, finalize

我是 Java 新手，高中时有 C++ 方面的背景。现在我正在尝试做点什么，我选择了 Java 作为编程语言。

我已经完成了我的功课，并且看了很多关于 Java 的“析构函数”、*finalize()*方法和*close()*或*shutdown()*方法的信息。但我仍然认为我不知道这应该如何工作（当然下面有更多信息）

好的，具体问题是为什么我需要调用*close()*或*shutdown()*方法？

在我的特殊情况下，我正在使用一个我没有开发的处理智能卡读卡器的类，但我已经看到文件管理的情况，你必须调用*close()*方法，将是相似的.

调用*close()*方法与在 C++ 中释放内存的想法不同（很糟糕）吗？意思是，我必须处理对象的删除或销毁......不是GC吗？

我尝试用于智能卡读卡器的类可能不是最好的，这可能是一个选项，这个类实现*finalize()*方法可能会更好，这样当不再使用并准备好进行 GC 时，释放内存（很可能是本机代码）和/或释放 GC 可能不知道如何做的硬件资源。

但是文件管理类呢？这些都非常使用和维护，为什么仍然需要*close()*方法？我明白存在的目的，解锁文件，但为什么我要记得关闭它？一旦不再使用对象，然后自动解锁文件，至少在最常见的情况下是这样。

*最后，用实现finalize()*方法的类包装需要关闭或关闭的类，并在那里调用*close()*或*shutdown()*方法是否是一种适当的解决方法？

我已经看到*finalize()*方法不是很流行，所以这就是为什么我要问这个问题应该如何解决。

提前致谢

胡安

PS：我所看到的：

[Java有析构函数吗？](https://stackoverflow.com/questions/171952/is-there-a-destructor-for-java)

[你为什么要实现 finalize()？](https://stackoverflow.com/questions/158174/why-would-you-ever-implement-finalize)

[http://www.codeguru.com/java/tij/tij0051.shtml](http://www.codeguru.com/java/tij/tij0051.shtml)

[用 Layman 的术语解释 Java 中的 close() 方法](https://stackoverflow.com/questions/7118603/explain-the-close-method-in-java-in-laymans-terms)

[我是否需要关闭执行 File.getName() 的文件？](https://stackoverflow.com/questions/8211760/do-i-need-to-close-files-i-perform-file-getname-on)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:41:01.580

大多数类将在其方法中清理其外部资源`finalize`，但这与 C++ 的析构函数不同——一旦不再使用对象就会调用析构函数，但直到对象被垃圾回收后才会调用终结器，并且您不知道这何时会发生（如果您没有内存密集型程序，它可能永远不会发生）。因此，假设您正在分配一堆对象，每个对象都分配一个数据库连接（是的，您应该使用连接池，但这是一个假设）；您使用每个对象，然后将其引用清空，以便可以在不先关闭其数据库连接的情况下对其进行垃圾收集，现在您的数据库将因打开太多连接而对您产生影响。你可以打电话`System.gc`希望这会清理连接，但这只是对垃圾收集器执行收集的建议，并且您的垃圾数据库连接的终结器可能不够聪明，无法完全清理连接。

长话短说，您需要调用`close`，`shutdown`因为您不知道对象的终结器是否/何时运行，并且您不知道它们在清理外部资源方面有多好。

顺便说一句，您应该使用 try-catch-finally 块来确保调用`close`和`shutdown`- 将方法放在 finally 块中。或者，如果您使用的是 Java7，请使用 try-with-resources。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T21:36:35.427

java 垃圾收集器会为您完成工作，但在某些情况下（使用套接字或数据库连接）您需要调用 close 方法（例如关闭与数据库的连接或文件处理程序等）。

有些人调用连接的 close() 方法，然后将其变为 null，例如：

```
conn.close();
conn = null; 
```

然后他们朝它的头部开枪，以表明它已经死了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T21:35:57.160

Java 的垃圾回收会自动释放不再引用的内存。

它不会释放其他资源。因此，您需要一个显式方法来释放其他资源。

> 好的，具体的问题是为什么我需要调用 .close 或 .shutdown 方法？

释放未自动处置的资源。

> 我明白存在的目的，解锁文件，但为什么我要记得关闭它？

如果您使用 Java 7 的[try-with-resources](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)，则不必这样做。

> 最后，用实现 finalize 方法的类包装需要关闭或关闭的类并在那里调用 close 或 shutdown 方法是否是一种适当的解决方法？

不可以。你不能依赖在`finalize()`一个对象不再被引用之后很快或根本就调用的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-26T22:03:11.880

存在许多类来封装外部实体的服务。在许多情况下，一个类的有用性将取决于它是否要求外部实体代表它做某事，*直到另行通知为止*，这可能会损害该实体的其他潜在用户。要求外部实体代表其行事直至另行通知的类，自行承担在不再需要其服务时通知外部实体的责任。

调用`close()`将告诉对象不再需要它的服务；因此，（不再需要的）对象可以将消息传递给代表它行事的实体，也不需要他们的服务。然后，此类通知可能允许这些实体将其服务提供给其他潜在用户。

垃圾收集是在系统知道何时需要内存的前提下运行的，并且在系统可以使用可以释放的内存之前，摆脱垃圾并没有任何真正的好处。这种哲学不适用于大多数使用`close`. 在许多情况下，拥有资源的代码无法知道其他人是否想要使用它。因此，代码通常应尝试仅在资源实际使用期间保留资源。一旦代码完成了资源，它应该释放它，以便让其他任何可能需要它的人都可以使用它。

# api - Magento Rest API 错误缺少 media_gallery

> ID：16070638
> 
> 赞同：1
> 
> 时间：2013-04-17T21:33:01.927
> 
> 标签：api, magento, rest

我已经完成了 Magento Rest API 的设置，并且能够使用 Magento 提供的 API 示例代码检索产品列表而没有任何错误。但是，当我尝试使用 [http://www.magentocommerce.com/api/rest/introduction.html#RESTAPIIntroduction-Overview](http://www.magentocommerce.com/api/rest/introduction.html#RESTAPIIntroduction-Overview)提供的创建简单产品示例时 ，出现以下错误。

{"messages":{"error":[{"code":400,"message":"请求中缺少 \"media_gallery\"。"}

我到处寻找，似乎无法找出如何解决该错误。我在这里没有看到任何参考[http://www.magentocommerce.com/api/rest/Resources/Products/products.html#RESTAPI-Resource-Products-HTTPMethod-POST-products](http://www.magentocommerce.com/api/rest/Resources/Products/products.html#RESTAPI-Resource-Products-HTTPMethod-POST-products)说请求中需要 media_gallery。

任何人都可以阐明这个错误以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T16:57:32.647

我也一直在查找，但是您始终可以在 magento 的管理中修改该属性，然后将其关闭（目录/属性/管理属性），就像不需要它一样。

干杯

# java - 如何让丢失的条目在 Guava 中更快过期

> ID：16070641
> 
> 赞同：2
> 
> 时间：2013-04-17T21:33:14.960
> 
> 标签：java, caching, guava

我有一个 Java 服务，它通过数据库查找将 String 键转换为 Long id。我将它包装在 Guava Cache 中以减少数据库查询。从键到 id 的映射一旦设置就不会改变，所以我可以对现有键使用较长的过期时间。但是有一个时间问题（不是在 Guava 中，而是在我的应用程序中），有人可能会在密钥进入数据库之前查找密钥的 id。我不想将这个“丢失的”映射缓存很长时间。不过，我确实想缓存它，以避免对相同的缺失键进行大量查询。

我读了这个问题：[Handle null value ...](https://stackoverflow.com/questions/13379071/how-to-avoid-caching-when-values-are-null)，然后我拼凑了一个带有 2 个缓存的解决方案。我有一个“丢失的键”缓存，我让它更快地过期并且它没有自动加载功能。我首先检查这个缓存，如果我在那里找到什么我知道它是一个丢失的键。否则，我尝试“真实”缓存，捕获 ExecutionException 以指示“丢失”，然后手动填充“丢失键”缓存。感觉挺别扭的，尤其是我在没有映射的情况下在load方法中抛出异常的部分。所以我想知道是否没有更优雅的方法来处理这类问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:05:50.387

您可能会尝试一些基于 的东西`refresh`，您可以在其中实施`CacheLoader.reload(key, oldValue)`以积极地刷新“丢失”映射，并且您只需保留`oldValue`如果`oldValue`不是“丢失”。

# objective-c - Objective-C：如何检查日期是否在两个日期之间？

> ID：16070646
> 
> 赞同：0
> 
> 时间：2013-04-17T21:33:49.667
> 
> 标签：objective-c, date, compare, nsdate

我之前搜索过这个问题，发现：

```
if (([dateToCompare compare:4HoursEarlier] == NSOrderedAscending) && ([dateToCompare compare:specifiedDate] == NSOrderedDescending))
{
    NSLog(@"dateToCompare between 4HoursEarlier and specifiedDate");
    // do something
} 
```

不幸的是，这似乎不起作用（NSLog 永远不会被打印）。

我有一个遍历数组（包含日期）的 for 循环。我需要检查指定日期是否在另一个日期的 4 小时内。我有（伪代码）：

```
specifiedDate = a date I specify;
dateToCompare = current date gathered in for loop;
4HoursEarlier = 4 hours before specifiedDate; 
```

如何检查指定日期是否在 dateToCompare（从数组/for 循环中收集的日期）的 4 小时内？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:58:23.027

我认为您的比较方式是错误的。交换 `NSOrderedAscending`并`NSOrderedDescending`在您的情况下。

我的记忆辅助工具是

```
[obj1 compare:obj2] == NSOrderedAscending  : obj1, obj2 is an ascending sequence
[obj1 compare:obj2] == NSOrderedDescending : obj1, obj2 is an descending sequence 
```

因此，要检查是否`dateToCompare`迟于`fourHoursEarlier`，您必须使用

```
if ([dateToCompare compare:fourHoursEarlier] == NSOrderedDescending) ... 
```

# javascript - 如果屏幕尺寸小于 1024 像素，则运行脚本

> ID：16070648
> 
> 赞同：3
> 
> 时间：2013-04-17T21:33:52.270
> 
> 标签：javascript, responsive-design, conditional-statements

我在我的页面上运行一个脚本，`div id="homesplash"`当用户滚动时消失`600px`，如下所示：

```
$(窗口).scroll(函数() {

    if ($(this).scrollTop()>600)
     {
        $('#homesplash').hide();
     }
    别的
     {
      $('#homesplash').show();
     }
 });

```

只有当浏览器宽度大于`1024px`. 有任何想法吗？
我试图从我在这里找到的相关帖子中实现一些代码，但我无法让它工作，因为我不熟悉编写任何 javascript。
谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T21:37:45.600

You can check `$(window).width()` and compare it to `1024`. Something like:

```
$(window).scroll(function() {
    if ( $(this).width() > 1024 ) {
        $("#homesplash").toggle( $(this).scrollTop() <= 600 );
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T21:38:06.627

Working with your current code, you could use [$(window).width()](http://api.jquery.com/width/) to get the width:

```
$(window).scroll(function() {

  var windowWidth = $(window).width();

  if (windowWidth > 1024) {
    if ($(this).scrollTop() > 600) {
      $('#homesplash').hide();
    }
    else {
      $('#homesplash').show();
    }
  }

 }); 
```

# c# - 串口写行文本框错误

> ID：16070651
> 
> 赞同：1
> 
> 时间：2013-04-17T21:33:55.450
> 
> 标签：c#

我使用虚拟 COM 端口来测试我的程序。我想用 COM8 串行写入和用 COM9 串行读取。当想要从 textbox1 写入值时，我收到此错误：

```
IOException was unhandled (The parameter is incorrect) 
```

我该如何摆脱这个？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.IO.Ports;

namespace Flowerpod_User_Interface
{
    public partial class Form1 : Form
    {
        public Form1()
        {

            InitializeComponent();
            // show list of valid COM ports
            foreach (string s in System.IO.Ports.SerialPort.GetPortNames())
            {
                comboBox1.Items.Add(s);
            }
        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void button1_Click(object sender, EventArgs e)
        {
            if (serialPort1.IsOpen)
            {
                serialPort1.WriteLine(textBox1.Text);

            }
            else
            {
                MessageBox.Show("SerialPort1 is not open");
            }
        }

        private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
        {

        }

        private void Connect_Click(object sender, EventArgs e)
        {
            if (!serialPort1.IsOpen)
            {
                serialPort1.PortName = comboBox1.SelectedItem.ToString();

                serialPort1.Open();

                textBox3.Text = "Open"; 
            }

        }

        private void textBox3_TextChanged(object sender, EventArgs e)
        {

        }

        private void textBox2_TextChanged(object sender, EventArgs e)
        {

        }

        private void button3_Click(object sender, EventArgs e)
        {
            Random slumpGenerator = new Random();
            // Or whatever limits you want... Next() returns a double
            int tal = slumpGenerator.Next(1000, 10000);
            textBox1.Text = tal.ToString();
        }

        private void textBox4_TextChanged(object sender, EventArgs e)
        {

        }

     private void serialPort1_DataReceived(object sender,SerialDataReceivedEventArgs e)
        {

        }

        private void button4_Click(object sender, EventArgs e)
        {
            if (!serialPortRead.IsOpen)
            {
                serialPort1.PortName = "COM9";

                serialPortRead.Open();

                textBox4.Text = serialPortRead.ReadLine();                 
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T10:04:05.493

导致问题的两个端口之间没有任何桥接。虚拟 COM 端口软件欺骗了我！

# java - jOOQ 是否支持链接的 SQL Server？

> ID：16070652
> 
> 赞同：1
> 
> 时间：2013-04-17T21:33:58.587
> 
> 标签：java, amazon-web-services, sql-server-2008-r2, amazon-rds, jooq

这似乎是一个相当直截了当的问题，但我无法在没有测试的情况下找到答案：

jOOQ 是否支持链接的 SQL Server？（SQL Server 2008 R2）。我们有一个在 SQL Server R2 AWS-RDS 实例中运行的应用程序，并且空间不足，因此我们正在研究各种选项。我们现在偏爱的是将一组特定的数据移动到它自己的 RDS 实例上（出于良好的架构原因）。

我们正在尝试确定这样做会对我们的应用程序层产生什么影响。

有谁知道 jOOQ 代码生成器是否为链接服务器创建对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:01:36.700

正式地，这从未被明确地测试过。它可能会起作用，具体取决于 SQL Server 公开链接实例的方式。jOOQ 的代码生成器针对 SQL Server 的`INFORMATION_SCHEMA`视图运行查询。即它可以生成它将在这些视图中找到的所有人工制品。

请注意，即使 jOOQ 无法从链接实例生成人工制品，您也可以使用 jOOQ 代码生成器直接连接到该实例，并尝试使用[codegen-time 或运行时模式映射功能](http://www.jooq.org/doc/3.0/manual/code-generation/schema-mapping/)，以生成链接前缀。

# macos - 在没有 XCode 的情况下访问沙盒 Apple Store

> ID：16070653
> 
> 赞同：0
> 
> 时间：2013-04-17T21:34:16.620
> 
> 标签：macos, in-app-purchase, mac-app-store, ccl

我正在开发一个使用名为 CCL 的开源通用 lisp 实现创建的 OSX 应用程序。我们正在尝试将应用内购买添加到我们的应用中，我刚刚通读了 StoreKitGuide，我想知道如何在不使用 XCode 的情况下测试应用内购买。
该文档提供了有关使用 XCode 访问沙盒应用商店的说明：

> 当您从 Xcode 启动应用程序时，Store Kit 不会连接到 App Store。相反，它连接到一个特殊的沙盒存储环境。沙盒环境使用 App Store 的基础设施，但不处理实际支付。

但它并没有告诉你如何在没有 xcode 的情况下做到这一点。没有 XCode 可以在应用购买中进行哪些测试？

# sql - 在 where 子句之间使用 select 查询

> ID：16070656
> 
> 赞同：0
> 
> 时间：2013-04-17T21:34:23.840
> 
> 标签：sql, sql-server, tsql

我必须找出一个日期介于其他两个日期之间，这些日期是从 Microsoft SQL Server 的不同表中选择的

即我想做类似的事情

```
 Select A.* from  ( select member.key, 
           case when effective_date between (select month_start and month_end 
           from sales_month 
           where month=2 and year=2013) bucket_1
           then 1 else 0 from member ) as A
          where a.bucket_1 != 0 
```

我必须复制不同月份的案例陈述。有什么想法/帮助吗？

谢谢

尚卡尔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T21:38:45.773

这可以通过 JOIN 来完成：

```
SELECT m.* 
FROM member m
JOIN sales_month sm
    ON sm.month = 2
    AND sm.year = 2013
    AND m.effective_date BETWEEN sm.month_start AND sm.month_end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T21:38:16.120

使用变量来保存信息。

```
DECLARE @StartDate DATETIME,
        @EndDate DATETIME
SELECT @StartDate = month_start
       , @EndDate = month_end
FROM sales_month
WHERE [month] = 2 AND [year] = 2013

SELECT *
from member
where effective_date BETWEEN @StartDate AND @EndDate 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T21:39:06.213

如果没有您期望的重复项，您可以使用连接：

```
select m.*
from member m join
     sales_month sm
     on m.effective_date between sm.month_start and sm.month_end and
        sm.month = 2 and sm.year = 2013 
```

否则，尝试使用相关子查询`exists`：

```
select m.*
from member m
where exists (select 1 from sales_month where month=2 and year=2013 and m.effective_date between month_start and month_end) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T21:43:58.930

不知道为什么需要从表格中获取月份和年份。您正在寻找生效日期为 2013 年 2 月的所有成员，对吗？你`sales_month`在这里做什么？

```
DECLARE @m INT, @y INT;
SELECT @m = 2, @y = 2013;

DECLARE @d DATETIME;
SET @d = DATEADD(MONTH, @m-1, DATEADD(YEAR, @y-1900, 0));

SELECT m.*            -- don't use SELECT *!
 FROM dbo.member AS m -- always use schema prefix!
  WHERE effective_date >= @d 
  AND effective_date < DATEADD(MONTH, 1, @d); -- don't use BETWEEN! 
```

如果它需要来自表（例如，由于某种原因，您的销售月与日历月不同），则使用联接，但我不确定您的`BETWEEN`逻辑的真正含义。我会保留它以防它合乎逻辑，但在大多数情况下它不是。

```
SELECT m.*
 FROM dbo.member AS m
 INNER JOIN dbo.sales_month AS s
 ON m.effective_date BETWEEN s.month_start AND s.month_end
 WHERE s.[month] = 2 AND s.[year] = 2013; -- don't use reserved words as column names! 
```

相关链接：

*   [要踢的坏习惯：使用 SELECT * / 省略列列表](https://sqlblog.org/2009/10/10/bad-habits-to-kick-using-select-omitting-the-column-list)

*   [要改掉的坏习惯：避免使用模式前缀](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)

*   [BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

# ios - UISegmentedControl 不会改变值

> ID：16070661
> 
> 赞同：0
> 
> 时间：2013-04-17T21:34:42.500
> 
> 标签：ios, objective-c, uisegmentedcontrol

我正在尝试以`UISegmentedControl`编程方式创建一个。我`UIViewController`在情节提要中有一个，里面什么都没有。

.h 文件

```
UISegmentedControl *segmentedControl;
NSString *feedBackButtonTitle;
NSString *contactsButtonTitle; 
```

这是属性声明。

```
@property (nonatomic,retain) IBOutlet UISegmentedControl *segmentedControl;
-(void) segmentedControlIndexChanged; 
```

在`viewDidLoad:`我已经初始化并添加了`UISegmentedControl`.

```
 NSString *language = [[NSLocale preferredLanguages] objectAtIndex:0];
if ([language isEqualToString:@"en"]){
    contactsButtonTitle = [[[configFileDictionary objectForKey:@"Contacts"] objectForKey:@"Label"] objectForKey:@"en"];
    feedBackButtonTitle = [[[[[configFileDictionary objectForKey:@"Contacts"] objectForKey:@"Contact"]objectForKey:@"Feedback"]objectForKey:@"Label"]objectForKey:@"en"];
}
else if([language isEqualToString:@"fr"]){
    contactsButtonTitle = [[[configFileDictionary objectForKey:@"Contacts"] objectForKey:@"Label"] objectForKey:@"fr"];
    feedBackButtonTitle = [[[[[configFileDictionary objectForKey:@"Contacts"] objectForKey:@"Contact"]objectForKey:@"Feedback"]objectForKey:@"Label"]objectForKey:@"fr"];

}
NSArray *itemsArray = [[NSArray alloc] initWithObjects:contactsButtonTitle, feedBackButtonTitle, nil];
segmentedControl = [[UISegmentedControl alloc] initWithItems:itemsArray];
segmentedControl.segmentedControlStyle = UISegmentedControlStylePlain;
//segmentedControl.selectedSegmentIndex = 0;
segmentedControl.frame = CGRectMake(0.0f, 0.0f, 320.0f,40.0f);
[segmentedControl addTarget:self action:@selector(segmentedControlIndexChanged) forControlEvents:UIControlEventValueChanged];

 //  [self.view addSubview:segmentedControl];

// Create view for contact display.
[self createViews]; 
```

而这个`(void)segmentedControlIndexChanged`

```
-(void)segmentedControlIndexChanged
{
    switch (self.segmentedControl.selectedSegmentIndex)
    {
        case 0:
            [self createViews];
            break;
        case 1:
            [self showFeedbackForm];
            break;
        default:
            break;
    }
} 
```

这在屏幕上显示分段控件就好了，但是当我单击分段控件中的选项时，它总是进入选项案例 0。分段控件并打开`[self createViews];`

在 line 插入断点时`case 0`，我注意到 segmentedControl 中的选项 _selectedSegment 为 1。这没有任何意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:42:34.497

好的，所以我在我`UIViewController`的 a 属性中创建了`segmentedControl`，然后只编写了该代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSArray *itemsArray = [[NSArray alloc] initWithObjects:@"a", @"b", nil];

    self.segmentedControl = [[UISegmentedControl alloc] initWithItems:itemsArray];
    self.segmentedControl.segmentedControlStyle = UISegmentedControlStylePlain;
    self.segmentedControl.selectedSegmentIndex = 0;
    self.segmentedControl.frame = CGRectMake(0.0f, 0.0f, 320.0f,40.0f);
    [self.segmentedControl addTarget:self action:@selector(segmentedControlIndexChanged) forControlEvents:UIControlEventValueChanged];
    [self.view addSubview:self.segmentedControl];
}    

-(void)segmentedControlIndexChanged
{
    switch (self.segmentedControl.selectedSegmentIndex)
    {
        case 0:
            NSLog(@"createviews");
            break;
        case 1:
            NSLog(@"showfeedbackform");
            break;
        default:
            break;
    }
} 
```

它非常适合我 - 记录正确的选择。

正如你所说，`_segmentedControl`没关系 - 请注意我使用点符号来获取分段控制。这可能是这种情况，因为当您不使用点表示法时 - 您没有调用 getter。

**编辑**

总结一下 .h 文件中的一点-segmentedControl 是多余的-它只是另一个 .h 文件`UISegmentedControl`。您的属性可以通过点符号引用 - `self.segmentedControl`。或通过合成名称（默认生成）`_segmentedControl`。

所以你正在做的是在初始化和添加你的`UISegmentedController`但`segmentedControlIndexChanged`被调用时引用这个 .h 对象 - 你在你的属性中更改它甚至不可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T22:03:07.240

好的，这里有几件事：

1.  既然你有一个属性，使用`self.segmentedControl`而不是`segmentedControl`
2.  选择器签名的简单更改会变得更容易：

* * *

```
[self.segmentedControl addTarget:self 
                          action:@selector(segmentedControlIndexChanged:)
                forControlEvents:UIControlEventValueChanged]; // Notice the colon 
```

* * *

```
-(void)segmentedControlIndexChanged:(id)sender
{
    switch ([sender selectedSegmentIndex])
    {
        case 0:
            [self createViews];
            break;
        case 1:
            [self showFeedbackForm];
            break;
        default:
            break;
    }
} 
```

# php - 如何使用 PHP 绘制条形图

> ID：16070663
> 
> 赞同：-1
> 
> 时间：2013-04-17T21:34:47.543
> 
> 标签：php

我想从 100 分中绘制学生分数的条形图，这些分数存储在我的 SQL 数据库中，使用 php，我们在 Text 中显示标记，我们将标记存储在 Php 变量中

```
$eng
$math
$phy
$ip
$pedu
$chem 
```

但是现在我们想在图中显示标记如何做到这一点，请参见[这里](http://www.chatat.tk/dav) 的开发者网站....尝试伪卷号 1000 或 11988 图表应该像这个 [图表](http://www.chatat.tk/dav/graph.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T21:39:44.707

Have fun: [pchart class PHP](http://pchart.sourceforge.net/)

> pChart is a PHP class oriented framework designed to create aliased charts. Most of todays chart libraries have a cost, our project is intended to be free. Data can be retrieved from SQL queries, CSV files, or manually provided. This project is still under development and new features or fix are made every week.
> 
> Focus has been put on rendering quality introducing an aliasing algorithm to draw eye candy graphics. Rendering speed has been dramatically enhanced since the first version, we'll still continue optimising the code!

# c++ - 调整窗口大小，使主要小部件具有特定大小

> ID：16070665
> 
> 赞同：1
> 
> 时间：2013-04-17T21:35:07.497
> 
> 标签：c++, qt

我有一个 Qt 应用程序，它本质上是一个`QMainWindow`具有菜单、工具栏和主要小部件的应用程序。

我想要一个菜单​​项来调整应用程序的大小，以便主小部件具有特定的大小，但我还没有找到一种方法来做到这一点。

到目前为止，我想出的最接近的是这样的：

```
void on_actionSetSize_triggered() {
    ui_.primary_widget->setMinimumSize(100,200);
    adjustSize();
} 
```

我的想法是我将主要小部件的最小尺寸设置为目标尺寸，然后要求 UI “缩小以适应”

不幸的是，这似乎充其量只是偶尔起作用，它肯定会在需要时增加尺寸，但是当我想要减小尺寸时，它通常不起作用：-/。

注意：我确实希望允许用户自由调整应用程序的大小，这只是在他们询问时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:06:56.343

为了使大小也像增加一样减小，您需要在调用之前在主小部件上设置一个固定大小`adjustSize()`。然后，您可以立即释放约束以允许用户今后重新调整大小。

你可以试试这个：

```
ui_.primary_widget->setFixedSize(100, 200);  
adjustSize();
ui_.primary_widget->setMaximumSize(QWIDGETSIZE_MAX, QWIDGETSIZE_MAX); 
```

请注意，您在 Primary Widget 上的设置大小必须是基于其内部内容的有效大小。否则，在小部件上设置 Fixed Size 只会使其尽可能小而不会破坏布局约束，而不是进一步。

# mongoid3 - 在 Mongoid 中选择随机文档的最佳策略

> ID：16070666
> 
> 赞同：2
> 
> 时间：2013-04-17T21:35:16.417
> 
> 标签：mongoid3

我需要从我的数据库中随机选择一个文档，并且想知道一个比 Ruby shuffle 方法更好的策略，这种方法对于大型数据库来说资源密集度较低。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:38:43.173

Add a "random" field and have the default value set by a proc that returns a random float. Whenever you need to pull a random document, just type Model.where(:random.gt => rand).first

# asp.net - 删除 Web.config 中的 ASPX 文件扩展，但如果 URL 包含句点则否定重写

> ID：16070670
> 
> 赞同：1
> 
> 时间：2013-04-17T21:35:28.693
> 
> 标签：asp.net, regex, url, url-rewriting, web-config

好的，所以现在我们大多数人可能会使用下面的标准规则来删除你的 url 中的 aspx 扩展名。

```
<rule name="Remove">
      <!--Removes the .aspx extension for all pages.-->
      <match url="(.*)" />
      <conditions logicalGrouping="MatchAll">
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
      </conditions>
      <action type="Rewrite" url="{R:1}.aspx" />
    </rule> 
```

但是我想修改规则以防止写入规则捕获任何带有句点的 url。

这样，如果有人尝试输入[http://www.domain.com/picture.jpg](http://www.domain.com/picture.jpg) ，则规则不会捕获它。

幸运的是 IsFile 和 IsDirectory 条件可以防止实际文件被规则击中，但是每当我遇到有人键入服务器上不存在的文件的情况时，规则就会捕获它并且 asp.net 会执行以下操作：

[http://www.domain.com/404error.aspx?aspxerrorpath=/picture.jpg.aspx](http://www.domain.com/404error.aspx?aspxerrorpath=/picture.jpg.aspx)

当找不到文件时，我希望它不通过规则。

基本上我只需要能够添加一个条件，只要在域名后面的 url 中找到一个句点就可以否定。我假设某种 REGEX 会起作用。我似乎无法让它正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:12:24.890

我能够提出以下解决方案。

```
 <rule name="RewriteASPX" stopProcessing="true" enabled="true">
            <match url="(.*)" />
            <conditions logicalGrouping="MatchAll">
                <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                <add input="{REQUEST_FILENAME}.aspx" matchType="IsFile" />
            </conditions>
            <action type="Rewrite" url="{R:1}.aspx" />
        </rule> 
```

# email - 扩展 Thunderbird - 如何拦截新邮件

> ID：16070672
> 
> 赞同：1
> 
> 时间：2013-04-17T21:35:37.450
> 
> 标签：email, thunderbird-addon

我正在对雷鸟进行扩展，我想知道是否可以在 javascript 中拦截刚刚使用 pop 或 imap 下载的新电子邮件

谢谢

# java - 在 Java 代码中打开 TCL gui

> ID：16070675
> 
> 赞同：2
> 
> 时间：2013-04-17T21:35:40.867
> 
> 标签：java, tcl, jacl, bwidget

我有一个 TCL 文件，它使用 Tcl 的 BWidget 包，我一直将它用作我的程序的 GUI。我现在希望能够从一个单独的 Java 程序加载这个 GUI。我调查过 Jacl 和 Swank，但他们似乎并没有完全按照我的意愿行事。

我已经用 Jacl 尝试了以下操作，但它无法评估文件。在调试时，我可以看到它完成了对我的tcl文件的解析，但是在解析BWidget包的tcl文件时抛出了异常。这是我的Java代码：

```
Interp interp = new Interp();
try {
    interp.evalFile("C:\\CTP\\Tcl\\LuxonCtp32.tcl");
} catch (TclException ex) {
    int code = ex.getCompletionCode();
    System.err.println("command returned bad error code: " + code);
} finally {
    interp.dispose();
} 
```

关于如何完成我想做的事情的任何想法？甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:46:19.290

Tcl 本身不能显示 GUI。它为此使用了一个名为 Tk 的插件。
在 Tcl 的 C 参考实现中，您也可以得到 Tk。
Tk 没有移植到 Java，Tcl 有。

您不能使用 Jacl 来显示 Tk 小部件，但[TclBlend](http://tcljava.sourceforge.net/docs/website/index.html)可以这样做，因为 TclBlend 使用 Tcl 的 C 参考实现。这意味着用户需要一个有效的 Tcl/Tk 安装。

TclBlend 和 Tcl > 8.5 through 存在一些问题，这会导致段错误。
IIRC，您必须删除 TclBlends C 代码中的条件`if`（`Tcl_FindNameOfExecutable`并自己编译）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T00:01:58.853

转到此站点[http://jtcl-project.github.io/jtcl/](http://jtcl-project.github.io/jtcl/)并立即下载二进制 zip。它最近在 github 上发布了一个名为 Jtcl 的 java tcl。解压它，你会发现一个名为 jtcl-2.7.0.jar 的 jar。我正在使用我的偏好的 Netbeans 8。我将 jar 添加到项目库中。我创建了一个名为 JTclHallo.java 的 java 文件，这就是代码。

```
package jtclhallo;
// import tcl.lang it belongs to jtcl-2.7.0 jar a must

import tcl.lang.*;

 // Java wrapper to test JACL or JTCL.

public class JTclHallo {
    public static void main(String []args) {

        //Interp is a java class belonging to tcl.lang. Unrar the jtcl-2.7.0

        Interp i = new Interp();

        try {

            //call your tcl file mine was swing.tcl from the E drive
            i.eval("source E:/private/swing.tcl");
            } catch (TclException e) {
            System.out.println("Exception: " + e.getMessage());
            }

    }
 } 
```

对于swing.tcl

```
package require java

set window [java::new javax.swing.JFrame]
$window setSize 600 400
$window setVisible true 
```

# c# - 为什么 System.ComponentModel.AttributeCollection 索引器不一致？

> ID：16070682
> 
> 赞同：0
> 
> 时间：2013-04-17T21:36:28.017
> 
> 标签：c#, reflection

参考 System.ComponentModel.AttributeCollection.this[Type t] 索引器， http: [//msdn.microsoft.com/en-us/library/yadycs8s.aspx](http://msdn.microsoft.com/en-us/library/yadycs8s.aspx)上的文档说如下

> 如果集合中不存在该属性，则此属性返回该属性类型的默认值。

考虑到这一点，以下代码按预期工作：（> 表示输出）

```
using System.ComponentModel;
var attrCollection = new AttributeCollection();
Console.WriteLine(attrCollection[typeof(BrowsableAttribute)] != null);
> "True" 
```

正如我所期望的那样打印“True”。但是尝试使用另一个随机属性（如 DebuggerDisplay）时，索引器返回 null：

```
var attrCollection = new AttributeCollection();
Console.WriteLine(attrCollection[typeof(System.Diagnostics.DebuggerDisplayAttribute)] != null);
> "False" 
```

关于这些属性之间有什么不同导致不同行为的任何想法？我不清楚 msdn 的“属性类型的默认值”是什么意思，因为它不仅仅是 null。我认为问题可能是没有无参数构造函数的属性类型，但 BrowsableAttribute 需要一个参数，DebuggerDisplayAttribute 也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:45:35.147

它在 AttributeCollection 的 MSDN 库文章中明确记录：

> 虽然大多数属性都有默认值，但默认值不是必需的。如果属性没有默认值，则从采用类型的索引属性返回 null。在定义自己的属性时，您可以通过提供不带参数的构造函数或定义名为“Default”的属性类型的公共静态字段来声明默认值。

BrowsableAttribute 有这样一个默认值，由其 Default 字段提供，因此您的测试成功。当属性缺失时，默认情况下它使类成员可浏览。

DebuggerDisplayAttribute 既没有默认构造函数，也没有默认字段。如果您考虑一下，这是有道理的，在调试器中没有有意义的默认值。

# c# - 初学者：我的存储库层如何知道哪个用户登录了？

> ID：16070683
> 
> 赞同：1
> 
> 时间：2013-04-17T21:36:34.520
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我知道这是一个超级新手问题，但我很难理解这一点。我正在我的 n 层应用程序中实现 WebSecurity。我已将所有 WebSecurity 代码放在我的存储库层（最接近 db 层）中。

我有这样的代码：

```
public bool LogIn(string userName, string password, bool rememberMe)
    {
        return WebSecurity.Login(userName, password, rememberMe);
    }

public void LogOut()
    {
        WebSecurity.Logout();
    } 
```

WebSecurity 不需要知道登录的上下文 - 我传递参数。但是退出呢？有 10 个用户退出，这里的代码如何知道要退出哪个用户？用户的上下文是否会以某种方式通过我的服务层从浏览器客户端到我的 API 控制器一直推送到存储库层？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:55:35.543

我会创建服务类来实现这个功能。这个服务层方法应该有`IPrincipal`注入`IUserRepository`。`IPrincipal`接口存储有关当前用户的信息。`HttpContext.Current.User`实现它。

```
public interface IAuthenticationService
{
    bool SignIn(string userName, string password, bool rememberMe);
    void SignOut();
}

public class WebSecurityAuthenticationService : IAuthenticationService
{
     public WebSecurityAuthenticationService(IPrincipal user, IUserRepository userRepository)
     {
     }

     ....implementation...
} 
```

您应该使用 IOC 容器来定义`IPrincial`与基于数据库的实现`HttpContext.Current.User`之间的绑定。`IUserRepository`我推荐 Ninject，但选择权在你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T21:43:43.420

您的存储库层*不应该*知道哪个用户登录了。您的存储库层甚至不应该知道有*一个*用户。您的所有身份验证都应由您的 Web 应用程序处理 - 然后您的 Web 应用程序在对用户进行身份验证后访问您的存储库层，该存储库层只是执行它被告知要做的任何事情，并且不关心身份验证。

更新：正如 John Saunders 所指出的，这不会将您的 Web 应用程序绑定到成员数据库/表，而是绑定到您正在使用的成员系统。如果这对您来说过于紧密耦合，您可以考虑定义一个`IMembershipService`接口，将其传递给控制器​​的构造函数（可能通过依赖注入）。然后，您将创建`IMembershipService`该 implements`Login`和`Logout`via的具体实现`WebSecurity`。

这样，如果您决定要以完全不同的方式实现会员资格，您唯一的限制是您的替代会员服务必须实现`IMembershipService`- 您可以完全更改技术和数据结构，而您的 Web 应用程序也不会更明智。

# javascript - 通过 _.each 下划线模板显示对象数组

> ID：16070685
> 
> 赞同：3
> 
> 时间：2013-04-17T21:36:38.277
> 
> 标签：javascript, backbone.js, underscore.js

我无法使用 _.template 为每个评论循环打印一个简单的内容。

```
<% _.each([comments], function(i) { %>  <p><%= i %></p> <% }); %> 
```

打印 [object 对象]

```
<% _.each([comments], function(i) { %>  <p><%= JSON.stringify(i) %></p> <% }); %> 
```

印刷：

```
[{"comment":"Mauris quis leo at diam molestie sagittis.","id":263,"observation_id":25}] 
```

到目前为止我已经尝试过：

```
<% _.each([comments], function(i) { %>  <p><%= i.comment %></p> <% }); %> 
```

空白的

```
<% _.each([comments], function(i) { %>  <p><%= i.get('comment') %></p> <% }); %> 
```

Uncaught TypeError: Object [object Array] has no method 'get'

```
<% _.each([comments], function(i) { %>  <p><%= comment %></p> <% }); %> 
```

空白的

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-17T22:21:33.760

假设 comments 是您模型上的一个数组：

```
<% _.each(comments, function(comment) { %>  
  <p><%= comment.comment %></p> 
<% }); %> 
```

# python - unable to import function in django/python

> ID：16070692
> 
> 赞同：0
> 
> 时间：2013-04-17T21:37:23.133
> 
> 标签：python, django

I am writing a django project with follwing files:

```
ttam_container
    -utils.py
    -ttam
         -views.py 
```

Codes within `utils.py` module:

```
def random_string():
    ...
def remove_blanks():
    ...

...other functions... 
```

Codes within `views.py`:

```
from utils import *

def get_sequences(request):
      ...
    string = random_string()
      ...
    sequences = remove_blanks(sequences_with_blanks)
      ... 
```

The error `global name remove_blanks' is not defined` is then reported. I thought I didn't import the `utils.py` correcty in the first place, but the `random_string` works...

Any idea what's happening?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:40:34.510

导入应该是：

```
from utils import remove_blanks 
```

没有 .py

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:19:15.167

正确的导入是：

```
import sys
sys.path.append("..")
from utils import random_string, remove_blanks 
```

模块必须位于`sys.path`. 这被初始化为 的值，或者如果未设置，则为`$PYTHONPATH`某个默认值。`$PYTHONPATH`例如：

```
$ python
Python 2.6.5 (r265:79063, Jun 12 2010, 17:07:01)
[GCC 4.3.4 20090804 (release) 1] on cygwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> sys.path
['', '/usr/lib/python26.zip', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-cyg
win', '/usr/lib/python2.6/lib-tk', '/usr/lib/python2.6/lib-old', '/usr/lib/pytho
n2.6/lib-dynload', '/usr/lib/python2.6/site-packages'] 
```

因此，如果您的模块不在该路径中，则需要将正确的路径（`'..'`在本例中）附加到`sys.path`.

# amazon-web-services - CloudFormation S3 specify physical name

> ID：16070693
> 
> 赞同：0
> 
> 时间：2013-04-17T21:37:27.870
> 
> 标签：amazon-web-services, amazon-s3, naming, bucket, amazon-cloudformation

I deployed a template with an s3 bucket. I noticed that the 'Logical ID' field is the resource name, but the 'Physical ID' field is in the format of --. Is there a way to override this behavior? I need to be able to specify an EXACT name. Everywhere Ive looked suggests that I make it through the console, but that's useless to me. I need automation.

Can anyone help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-01T09:22:10.497

是的，可以为几种资源设置自定义物理 ID。ELB 就是其中之一。ATM（2014 年 12 月）此资源支持自定义 pysical id：

*   AWS::CloudWatch::警报
*   AWS::DynamoDB::表
*   AWS::ElasticBeanstalk::应用程序
*   AWS::ElasticBeanstalk::环境
*   AWS::ElasticLoadBalancing::LoadBalancer
*   AWS::ElastiCache::CacheCluster
*   AWS::RDS::DBInstance
*   AWS::S3::桶
*   AWS::SNS::主题
*   AWS::SQS::队列

有关更多信息，请参阅[http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-name.html](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-name.html)

要为 S3-Bucket 设置自定义名称，请设置属性`BucketName`( [http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html#cfn-s3-bucket-name](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-s3-bucket.html#cfn-s3-bucket-name) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T08:57:15.143

我一直在遇到同样的问题。我知道*可以*在使用 Ruby SDK for AWS 创建资源时设置它的物理名称。我们使用此功能，因此我们可以根据环境和服务器角色拆除/创建具有已知和稳定物理名称的 ELB，并且后端节点可​​以通过查找与自己的环境和角色对应的 ELB 在部署时自动加入。

但是，在使用 CloudFormation 时，某些资源（ELB、SG）采用您指定的资源名称并为其添加前缀或后缀，例如 stackID 等。这会破坏上述系统，因为 ELB 名称在每次部署后总是不同的。

CloudFormation 文档绝不是坏事，但它似乎确实缺少很多边缘案例。我还没有发现是否可以设置物理名称。

适用于 Ruby 的 AWS 开发工具包非常易于使用 - 我之前没有 Ruby 的经验 - 但发现部署/销毁资源很简单，因此如果您没有任何 CloudFormation 乐趣，您可能会发现这是一个可以接受的解决您的问题的方法现在但是，像我一样，需要一条自动路线。事实上，您可以使用 Ruby SDK 为您可以控制其名称的项目触发 CloudFormation 堆栈，然后在 Ruby SDK 下完全创建其他项目。

# java - Java ArrayList 基于值合并不重复

> ID：16070694
> 
> 赞同：0
> 
> 时间：2013-04-17T21:37:39.983
> 
> 标签：java, arraylist, merge, no-duplicates

我有一个名为 的类`Sample`，这个类有一个属性是 an `ArrayList<Area>`，并且 an`Area`包含一个`ArrayList<Elements>`

```
public class Sample {
    private ArrayList<Area> sampleAreas;
    public ArrayList<Element> getMergedData()
    {
        ...
    }
    ...
}

public class Area {
    private ArrayList<Element> areaElements
    ...
}

public class Element {
    private String name;
    private Float value;
    ...
} 
```

我需要`getMergedData()`from`Sample`类合并每个`ArrayList<Elements>`区域的每个区域，使元素具有更大的价值。

前任：

`Area 1: ("Element K" => 1.0, "Element C" => 0.5, "Element AS" => 15.0)`

`Area 2: ("Element K" => 10.1, "Element C" => 5.5, "Element AS" => 2.9, "Element O" => 1.5)`

`Area 3: ("Element C" => 2.8, "Element AS" => 0.5, "Element O" => 5.8)`

`Area 4: ("Element K" => 3.25, "Element AS" => 2.5, "Element O" => 0.1)`

因此，该方法必须返回如下内容： `("Element K" => 10.1, "Element C" => 5.5, "Element AS" => 15.0, "Element O" => 5.8"`

我不知道如何以时尚的方式做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:49:45.737

如果列表的元素顺序相同，例如它们的`K`元素是第一个元素，它们的`C`元素是第二个元素等等，那么只需进行逐个元素的比较。否则，您可以按元素名称对它们进行排序，然后逐个元素进行比较（如果您使用良好的排序算法，这是 nlog(n) ），或者将所有内容放在以元素名称为键的 HashMap 中，然后价值作为价值。

```
HashMap map = new HashMap();
for(int i = 0; i < list1.size(); i++) {
    Element e = list1.get(i);
    map.put(e.name, e.value);
}
for(int i = 0; i < list2.size(); i++) {
    Element e = list2.get(i);
    if(map.get(e.name) < e.value)
        map.put(e.name, e.value);
} 
```

# javascript - javascript：通过将函数分配给变量来克隆函数

> ID：16070695
> 
> 赞同：2
> 
> 时间：2013-04-17T21:37:40.550
> 
> 标签：javascript, function, object

为什么我不能通过将其分配给另一个变量来克隆 javascript 中的函数？

例如：

```
var $ = document.getElementById; 
```

使用尝试：

```
typeof $;  //--> "function"
$('nav');  //--> "TypeError: Illegal invocation" 
```

我认为它只会复制该功能，并且仍然可以调用。有人可以解释为什么不吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T21:38:57.317

When just assigning `document.getElementById` to a variable you lose the `this === document` part which you'd usually have when calling it as a method of `document`. To avoid this, use [`.bind()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind) to explicitly set the `this` context the function uses:

```
var $ = document.getElementById.bind(document); 
```

# jquery - 能够在 jQuery 中切换所有动画/过渡/淡入淡出吗？

> ID：16070698
> 
> 赞同：1
> 
> 时间：2013-04-17T21:37:51.490
> 
> 标签：jquery, animation, toggle

我有一个应用程序，它使用 jQuery 在 UI 中转换/淡入淡出/动画元素（即，当面板切换为可见时，面板将从侧面滑出）。我想为用户提供通过复选框切换所有“效果”的选项，具体取决于他们希望如何设置应用程序的工作流程。

因此，不是*隐藏状态>效果/过渡>可见状态*，我希望*隐藏状态>可见状态*基于是否启用过渡（很可能通过复选框）。

如果不根据复选框重写所有隐藏/可见状态，这是否可能？是否有某种形式的全选可以消除这种影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:41:42.510

您可以通过更改以下值来全局关闭所有 jQuery 动画：

```
jQuery.fx.off 
```

如：

```
// disable all jQuery animations so they immediately jump to the end state
jQuery.fx.off = true; 
```

jQuery 文档[在这里](http://api.jquery.com/jQuery.fx.off/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:43:45.727

> 可以通过将该属性设置为 true 来全局停止动画`$.fx.off`。完成此操作后，所有动画方法都会在调用时立即将元素设置为其最终状态，而不是显示效果。

来源：[jQuery API 文档](http://api.jquery.com/finish/)

# c++ - 与 Boost::geometry 的多边形相交严重的性能下降

> ID：16070708
> 
> 赞同：1
> 
> 时间：2013-04-17T21:38:32.953
> 
> 标签：c++, performance, boost, boost-geometry

我有一个粒子系统，我用`boost::geometry`我的椭圆粒子近似为多边形，然后使用库的交集函数来找到重叠区域。我正在计算一个“内部”和“外部”椭圆（多边形）区域来为每个粒子-粒子相互作用分配一个“势”。

我的潜在功能是：

```
 double Potential(Cell* current, Cell* next)
{
    double areaRep, areaAtt;
    double distance = Distance(current,next);
    double A1 = current->getLength();
    double B1 = A1/2.0;
    double theta1 = current->getTheta(); //*180.0/M_PI
    double x1 = current->getCurrX();
    double y1 = current->getCurrY();
    double A2 = next->getLength();
    double B2 = A2/2.0;
    double theta2 = next->getTheta();
    double x2 = next->getCurrX();
    double y2 = next->getCurrY();
    polygon_2d poly1, poly2, poly3, poly4;
    double lamda1, lamda2;
    lamda1 = 0.0005; lamda2 = 0.00001;
    if(distance < 2.0*1.5*A1) {
        ellipse2poly(theta1, A1, B1, x1, y1, &poly1);
        ellipse2poly(theta2, A2, B2, x2, y2, &poly2);
        areaRep = getOverlapingAreaPoly(poly1,poly2);
        ellipse2poly(theta1, 1.5*A1, 1.5*B1, x1, y1, &poly3);
        ellipse2poly(theta2, 1.5*A2, 1.5*B2, x2, y2, &poly4);
        areaAtt = getOverlapingAreaPoly(poly3, poly4);
        return (lamda1*areaRep - lamda2*areaAtt); 
    }
    else
        return 0.0;
} 
```

“多边形化”功能是：

```
int ellipse2poly(double theta, double A1, double B1, double H1, double K1, polygon_2d *po)
{
    using namespace boost::geometry;
    polygon_2d  poly;
    const int n = 20;
    double angle = theta; // cell orientation
    double a = A1; // Long semi-axis length
    double b = B1; // short semi-axis length
    double xc = H1; // current X position
    double yc = K1; // current Y position

    if(!n)
    {
        std::cout << "error ellipse(): n should be >0\n" <<std::endl;
        return 0;
    }
    double t = 0;
    int i = 0;
    double coor[2*n+1][2];

    double x, y;
    double step = M_PI/(double)n;
    double sinphi = sin(angle);
    double cosphi = cos(angle);
    for(i=0; i<2*n+1; i++)
    {   
        x = xc + a*cos(t)*cosphi - b*sin(t)*sinphi;
        y = yc + a*cos(t)*sinphi + b*sin(t)*cosphi;
        coor[i][0] = x;
        coor[i][1] = y;
        t += step;
    }
    assign_points(poly, coor);
    correct(poly);
    *po = poly;
    return 1;
} 
```

返回区域为：

```
double getOverlapingAreaPoly(polygon_2d poly, polygon_2d poly2)
{
    point_2d cent; //centre of overlaping area
    double overAreaPoly = 0.0;
    typedef std::vector<polygon_2d > polygon_list;
    polygon_list v;

    intersection(poly,poly2,v);
    for (polygon_list::const_iterator it = v.begin(); it != v.end(); ++it)
    {
        centroid(*it, cent);
        overAreaPoly = area(*it);
    }

    return overAreaPoly;
} 
```

只要不是针对同一个细胞（粒子），就会为每个细胞（粒子）调用该函数。以前，使用另一种方法，我的算法的一次迭代对于 100 个粒子的一次迭代大约需要 43 毫秒。现在大约需要 1 分钟（！！！），所以我想我做错了什么！

我只在 Win7 64bit 下的 MSVC2012 中对此进行了测试。我将使用 Qt 4.7.4 报告 Linux Mint。

编辑：我已经用 Qt 4.7.4 在 Linux Mint 上进行了测试，它运行得非常合理；每次迭代可能需要 90-100 毫秒，这很好。不知道win7有什么问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:05:35.177

I have actually fixed it. I started a new project in Visual Studio and copied all source and header files, recompiled and everything runs smoothly now. I guess radically changing code and adding / subtracting stuff must have some impact...

# javascript - 来自express js的Ajax发布响应不断抛出错误

> ID：16070725
> 
> 赞同：1
> 
> 时间：2013-04-17T21:39:31.183
> 
> 标签：javascript, jquery, ajax, node.js, express

我很难将双向数据从 html 页面传输到我的 node.js 应用程序，然后再返回到 html 页面。

我很确定我已经找到了正确的解决方案，但我只是没有让它发挥作用。

我将以下内容用于我的 node.js 应用程序：

```
var express = require('/usr/lib/node_modules/express');
var app = express();

app.use(function(err, req, res, next){
  console.error(err.stack);
  res.send(500, 'Something broke!');
});

app.use(express.bodyParser());

app.post('/namegame', function(req, res)
    {
        console.log('Got request name: ' + req.body.name);
        setTimeout(function() 
        { 
            var newName = "New Name-O";
            res.send({name: newName});
        }, 2000);
    }
);

app.listen(8088, function() { console.log("Server is up and running");  }); 
```

以下是我的html页面：

```
<html> 
<head> 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 

    <script type="text/javascript"> 
        // wait for the DOM to be loaded 
        $(document).ready(function() 
        {
            alert("Got here!");

            function DisplayName(response)
            {
                alert(response.newName);
            }

            $("#NameGameIt").click(function(event)
            {
                alert("How about now?");
                //event.PreventDefault();
                var nameSubmitted = document.getElementById("name");
                //var nameSubmitted = "help!!";

                alert("Name: " + nameSubmitted.value);

                $.ajax({
                    type:       "POST",
                    url:        "http://127.0.0.1:8088/namegame",
                    data:       {name: nameSubmitted.value},
                    dataType:   "json",
                    timeout:    2500,
                    success:    function() { alert("???");},
                    error:      function(error1, error2, error3)
                    {   alert("error"); },
                    complete:   function(arg1, arg2, arg3)
                    {   alert("complete");  }
                });

            });

        });

    </script>

</head> 
<body>

<h1>Test form for Ajax</h1>
</br>

Name: <input type="text" id="name" name="name"></br>
<input type="button" value="NameGameIt" id="NameGameIt">
</form>

</body>
</html> 
```

因此，当我运行节点应用程序时，服务器运行良好。当我启动 html 页面时，我收到警报“到了这里！” 当我按下“NameGameIt”按钮时，我会收到“现在怎么样？”的警报。然后是警报“名称：”+我输入的任何名称。一旦我单击该警报，节点应用程序会立即看到该帖子并将名称打印到控制台。两秒钟后，当节点发送响应时，浏览器将直接进入 ajax 帖子上的错误处理程序。错误处理程序中唯一有用的数据是它是一个没有真正用处的“错误”。

所以我知道消息是从 html 页面到达节点的，因为它会打印出我发送的名称，并且我知道 html 页面正在从节点获取消息，因为在节点超时之前它不会出错发生触发发送。但是，我不知道为什么它继续将我发送到错误处理程序而不是成功。我已经使用 node-inspector 逐步完成了节点代码，它似乎使用 200 成功代码正确构建了数据包，它在完成数据包制作后在 .send 内部调用 .end 所以我不认为其中任何一个都在咬我。

我快要疯了！如果有人看到我遗漏的内容或对收集更多信息的方法有任何新想法，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:05:58.377

您的代码非常好，但您几乎肯定会遇到跨域 AJAX 请求问题。您可能正在本地文件系统上打开此 HTML 文件并以这种方式发出请求，这就是导致此问题的原因。

要修复它，请`app.use(express.static('public'));`像这样添加：

```
var express = require('/usr/lib/node_modules/express');
var app = express();

app.use(function(err, req, res, next){
  console.error(err.stack);
  res.send(500, 'Something broke!');
});

app.use(express.bodyParser());
app.use(express.static('public'));

app.post('/namegame', function(req, res)
    {
        console.log('Got request name: ' + req.body.name);
        setTimeout(function() 
        { 
            var newName = "New Name-O";
            res.send({name: newName});
        }, 2000);
    }
);

app.listen(8088, function() { console.log("Server is up and running");  }); 
```

然后将您的 html 文件放在“公共”文件夹中。启动服务器后，您可以访问`http://127.0.0.1:8088/file.html`并且您的代码将运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-02T15:55:20.490

就我而言，将其添加到`app.js`作品中。

```
app.use(function(req, res, next) {
  res.header("Access-Control-Allow-Origin", "*");
  res.header("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept");
  next();
}); 
```

[https://enable-cors.org/server_expressjs.html](https://enable-cors.org/server_expressjs.html)

# javascript - 如何在特定位置将 div 放置在更大的可滚动 div 中

> ID：16070726
> 
> 赞同：0
> 
> 时间：2013-04-17T21:39:41.857
> 
> 标签：javascript, jquery, html

我有一个高度 = 10 * 屏幕高度的 div。

我想添加另一个较小的 div 高度 = 屏幕高度

假设我可以将 10 个这样的小 div 添加到更大的 div 上，我想在更大的 div 上的特定位置添加这个 div。说从 4*screenheight 像素开始。我如何使用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:43:22.603

大概您已经存储了屏幕高度，并且在正确的高度创建了两个 div，所以：

```
$(inner_div).css('position', 'relative').css('top', 4*screen_height); 
```

`position:relative`如果它已经在你的 CSS 中，你可能不需要你的风格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:53:45.753

请参阅此处，之后如何访问和操作身体的高度和大 div 的内部；

[JSfiddle](http://jsfiddle.net/Allendar/ZvL5s/1/)

**HTML**

```
<div id="biggy">
    <div class="smally">Smally :)</div>
    <div class="smally">Smally 2, don't forget me :D</div>
</div> 
```

**CSS**

```
html, body {
    height: 100%;
    padding: 0px;
    margin: 0px;
}

#biggy {
    width: 200px;
    background-color: orange;
    position: relative;
}

.smally {
    width: 100%;
    background-color: blue;
    color: white;
    text-align: center;
    position: absolute;
} 
```

**JavaScript**

```
$(document).ready(function() {
    var bh = $('body').height();
    var smally_offset = (bh / 10);

    // Set biggy to be the body's height
    $('#biggy').css('height', bh);

    // Make all smallies 10% of the set height
    $('.smally').css('height', smally_offset);

    // Handle the different smallies :)
    $('.smally:nth-child(1)').css('top', smally_offset * 0);
    $('.smally:nth-child(2)').css('top', smally_offset * 1);
}); 
```

# ios - 使用 UISwitch 更改背景图像

> ID：16070729
> 
> 赞同：0
> 
> 时间：2013-04-17T21:39:59.740
> 
> 标签：ios, objective-c, uiimage, uiswitch

嗨，我正在开发一个简单的应用程序，该应用程序使用`UISwitch`.

问题是设备上的图片是原始大小。所以我使用的是 960 x 640 png，应该没问题，但在设备上它们很大。

这就是我正在使用的。

```
- (IBAction)changedState:(UISwitch*)sender
{
    UISwitch *switchValue = (UISwitch*)sender;
    [self setTorchOn:[switchValue isOn]];

    if(switchValue.on)
    {
       // lights on
       self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"latarka_4_on.png"]];
    }
    else
    {
       // lights off
       self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"latarka_4_off.png"]];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:45:58.573

确保您有两组图像。-

```
latarka_4_on.png
latarka_4_off.png 
```

对于标清分辨率 (480 x 320)。和

```
latarka_4_on@2x.png
latarka_4_off@2x.png 
```

高清分辨率 (960 x 640)

如果您的 png 没有后缀`@2x`但具有视网膜分辨率，则可能会出现问题。

# javascript - emberjs模型中的SetTimeout

> ID：16070731
> 
> 赞同：0
> 
> 时间：2013-04-17T21:40:03.613
> 
> 标签：javascript, ember.js, setinterval

我的 emberjs 应用程序中有一个没有任何数据库数据的模型。我创建了这个模型，因为我想要一些对象来汇集来自服务器的一些请求，但没有绑定到控制器或视图。

就像是：`StatusChecker`

在我的 Application.create 中，我这样做：

```
Webapp = Ember.Application.create({
  rootElement: '#content',
  LOG_TRANSITIONS: true,

  ready: function() {
    return Webapp.status_helper = Webapp.StatusHelper.create({
      timer: 15
    });
  }
}); 
```

这将实例化一个`Webapp.StatusHelper`对应用程序来说必须唯一的对象。当我调用`init`这个对象时，我还使用默认计时器开始轮询：

```
Webapp.StatusHelper = Ember.Object.extend({
  init: function(params) {
    this.timer = this.get("timer");
    this.timeoutID = null;
    this.controller = null;
    this.start();
  },
  start: function() {
    this.execute();
  },
  stop: function() {
    clearTimeout(this.timeoutID);
  },
  setTimer: function(newTime) {
    this.stop();
    this.timer = newTime;
    this.start();
  },
  execute: function() {
    var $this = this;
    this.stop();
    $.get("/status").done(function(data) {
      console.log(data);

      if (data["status"] === 0) { // Continue trying
        $this.timeoutID = setTimeout(function() {
          $this.execute();
        }, $this.timer * 1000);
      } else if (data["status"] === 1) { // Go to a given controller
        $this.setTimer(15);
        $this.transitionToRoute('index'); // This doesn't work
      } else {
        $this.setTimer(15);
        $this.transitionToRoute('problem'); // This doesn't work
      }
    });
  }
}); 
```

第一个问题是我无法使用以下方法更改模型的路线：`$this.transitionToRoute('problem');`。有没有办法从模型中做到这一点？

第二个问题是，有时当我进入控制器时，我需要`StatusHelper`在我需要停止该计时器并以另一个间隔启动它之后指定正确的间隔，如下所示：

```
Webapp.IndexRoute = Ember.Route.extend
  setupController: (controller) ->
    Webapp.status_helper.setTimer 15

Webapp.ProblemRoute = Ember.Route.extend
  setupController: (controller) ->
    Webapp.status_helper.setTimer 1 
```

发生这种情况是因为我需要检查问题是否每秒钟都得到解决，并且索引页面会在需要时转换到问题页面。过渡后，我得到 2 个，有时甚至更多的间隔来从事同一项工作。

我怎样才能停止它并只使一个功能起作用？

PS：如果您发现我需要用其他东西更改模型，我可以更改它。

* * *

tl;博士

*   如何从控制器内部更改路由？
*   我怎样才能让一个函数以间隔运行？
*   还有另一种（更好的）方法吗？

* * *

**编辑**

我的图书馆版本：

```
DEBUG: Ember.VERSION : 1.0.0-rc.1 ember.js:348
DEBUG: Handlebars.VERSION : 1.0.0-rc.3 ember.js:348
DEBUG: jQuery.VERSION : 1.9.1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:25:01.160

> 第一个问题是我无法使用此模型更改路线：$this.transitionToRoute('problem');。有没有办法从模型中做到这一点？

您不能/不应该从模型访问路由器。每当您发现有必要这样做时，就会提示您编写的代码可能不应该是模型。在这种情况下`Webapp.StatusHelper`， a 应该真的是一个控制器。所以像：

```
Webapp.StatusController = Ember.Controller.extend({
  //your code here
}); 
```

然后您可以摆脱 init() App.ready() 钩子，而是使用 ApplicationRoute 的 setupController 钩子来配置和启动计时器。当然，由于您现在处于控制器中，因此您将能够访问路由器。

> 我怎样才能停止它并只使一个功能起作用？

所以基本上你需要在过渡到新路线时启动/停止计时器。当路线改变时，使用路线的`activate`、`deactivate`和`setupController`钩子打开/关闭计时器。这样，您可以确保计时器仅在您需要时运行。

```
Webapp.IndexRoute = Ember.Route.extend
  activate: (controller) ->
    this.controllerFor('status').setTimer 15
    this.controllerFor('status').start()

  deactivate: (controller) ->
    this.controllerFor('status').stop()

Webapp.IndexRoute = Ember.Route.extend
  activate: (controller) ->
    this.controllerFor('status').setTimer 1
    this.controllerFor('status').start()

  deactivate: (controller) ->
    this.controllerFor('status').stop() 
```

# c# - 我想压缩一个 byte[] 并返回一个 byte[]

> ID：16070733
> 
> 赞同：1
> 
> 时间：2013-04-17T21:40:08.607
> 
> 标签：c#, .net, compression

我想在 C# 中编写一个方法，它需要一个字节 [] 并将其压缩到另一个字节 []，但我能找到的只是从一个目录压缩到另一个目录的库（[ZipFile 库](http://msdn.microsoft.com/en-us/library/ms404280.aspx)）。

是否可以只使用 .NET 平台？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T21:42:29.940

> 是否可以只使用 .NET 平台？

当然——这正是[`System.IO.Compression`](http://msdn.microsoft.com/en-us/library/3z72378a.aspx)命名空间的用途。例如，您可以使用[`GZipStream`](http://msdn.microsoft.com/en-us/library/system.io.compression.gzipstream.aspx)该类。使用a[`MemoryStream`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)接收压缩后的数据，之后就可以调用[`ToArray`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.toarray.aspx)了。

示例代码（未经测试）：

```
public static byte[] Compress(byte[] data)
{
    using (var output = new MemoryStream())
    {
        using (var compression = new GZipStream(output, CompressionMode.Compress))
        {
            compression.Write(data, 0, data.Length);
        }
        return output.ToArray();
    }
}

public static byte[] Compress(byte[] data)
{
    using (var output = new MemoryStream())
    {
        using (var compression = new GZipStream(output, CompressionMode.Decompress))
        {
            compression.Write(data, 0, data.Length);
        }
        return output.ToArray();
    }
} 
```

您也可以`DeflateStream`用作替代压缩形式。

# solaris - Solaris SMF 如何确定是要维护还是要重新启动某些东西？

> ID：16070734
> 
> 赞同：1
> 
> 时间：2013-04-17T21:40:08.827
> 
> 标签：solaris, smf

我有一个由 SMF 执行的守护进程。问题是发生错误时，我有失败代码，然后需要从头开始重新启动。现在它正在发送 sys.exit(0) (Python)，但 SMF 一直将其置于维护模式。

我已经与 SMF 合作过，知道它有时会自动重新启动某些服务（并让其他服务失败并让您像这样处理它们）。如何将此进程归类为需要自动重启的进程？它是一个 SMF 设置，一种失败的方法，什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-17T20:45:48.140

## 手册页

Solaris 使用[svc.startd 手册页](http://illumos.org/man/1M/svc.startd)中描述的`startd/critical_failure_count`和的组合：`startd/critical_failure_period`

> ### 开始/critical_failure_count
> 
> ### 开始/critical_failure_period
> 
> `critical_failure_count`和属性一起指定在**svc.startd**将服务转换为维护之前的给定时间间隔内允许的`critical_failure_period`最大服务失败次数。如果失败次数超过任何秒数，**svc.startd**会将服务转换为维护。**`critical_failure_count``critical_failure_period`**

 ****## 源代码中的默认值

默认值可以在源代码中找到，该值[取决于服务是否为“等待样式”](http://src.illumos.org/source/xref/illumos-gate/usr/src/cmd/svc/startd/method.c#112)：

```
if (instance_is_wait_style(inst))
    critical_failure_period = RINST_WT_SVC_FAILURE_RATE_NS;
else
    critical_failure_period = RINST_FAILURE_RATE_NS; 
```

默认值为[5 次失败/10 分钟或 5 次失败/秒](http://src.illumos.org/source/xref/illumos-gate/usr/src/cmd/svc/startd/startd.h#408)：

```
#define RINST_START_TIMES   5       /* failures to consider */
#define RINST_FAILURE_RATE_NS   600000000000LL  /* 1 failure/10 minutes */
#define RINST_WT_SVC_FAILURE_RATE_NS    NANOSEC /* 1 failure/second */ 
```

这些变量可以在 SMF 中设置[为属性](https://github.com/solids/npm2es/blob/master/manifest.xml#L29)：

```
<service_bundle type="manifest" name="npm2es">
  <service name="site/npm2es" type="service" version="1">
    ...
    <property_group name="startd" type="framework">
      <propval name='critical_failure_count' type='integer' value='10'/>
      <propval name='critical_failure_period' type='integer' value='30'/>
      <propval name="ignore_error" type="astring" value="core,signal" />
    </property_group>
    ...
  </service>
</service_bundle> 
```

## TL;博士

在检查 startd 值后，**如果服务是“等待方式”，它将被[限制为 1/sec 的最大重启](http://src.illumos.org/source/xref/illumos-gate/usr/src/cmd/svc/startd/restarter.c#1153)，直到它不再因非 cfg 错误而退出。如果服务不是“等待方式”，它将[进入维护模式](http://src.illumos.org/source/xref/illumos-gate/usr/src/cmd/svc/startd/method.c#872)。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:22:13.700

假设一个正常的服务清单，我怀疑你正在进入维护，因为 SMF*正在*“太快”重新启动你（这有点武断）。 `svcs -xv`应该告诉你是不是这样。如果是，SMF 正在重新启动您，然后您又快速退出，它决定放弃，直到问题得到解决（并且您已经手动解决`svcadm clear`了它。

我想知道退出 0（并表示成功）是否会导致进一步的混乱，但似乎不会。

我不认为 Oracle Solaris 允许您调整 SMF 认为“太快”的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T19:29:59.803

事实证明，我连续两次 pkill 以确保一切都正确终止。第二个，自然而然地退出了`0`. 将其更改`exit 0`为在脚本末尾包含一个解决了该问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T03:06:55.230

您必须创建一个服务清单。这比没有更复杂。这有示例清单并记录清单结构。

[http://www.oracle.com/technetwork/server-storage/solaris/solaris-smf-manifest-wp-167902.pdf](http://www.oracle.com/technetwork/server-storage/solaris/solaris-smf-manifest-wp-167902.pdf)****

# javascript - 从 AngularJS 更改 CSS

> ID：16070736
> 
> 赞同：8
> 
> 时间：2013-04-17T21:40:25.037
> 
> 标签：javascript, angularjs, angularjs-directive

来自 angularjs 控制器的 DOM 更改不是一个好习惯。在我的应用程序中，单击链接后，我正在更改 ngView 中的 html 元素的类。预期的行为是，我有三个 div，如果显示中间的一个，我正在改变。我正在从控制器执行此操作。我已经读过，应该在指令中进行 DOM 操作，但我的思想不够广泛，无法找到解决方案。拜托，如果你有建议，我会很高兴。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T21:59:32.160

使用[ng-class](http://docs-angularjs-org-dev.appspot.com/api/ng.directive:ngClass)。

例如：

[http://jsfiddle.net/rd13/eTTZj/75/](http://jsfiddle.net/rd13/eTTZj/75/)

```
app = angular.module('myApp', []);

app.directive("click", function () {
    return function(scope, element, attrs) {
        element.bind("click", function() {
            scope.boolChangeClass = !scope.boolChangeClass;
            scope.$apply();
        });
    };
}); 
```

一些HTML：

```
<div id="page">
    <div>One</div>
    <div ng-class="{'my-class':boolChangeClass}">Two</div>
    <div>Three</div>
    <button click>Click me</button>
</div> 
```

当您单击按钮时，中心 div 的类将根据您范围内设置的布尔值而改变。

# c++ - 使用c ++从设备文件描述符中检索Linux中的设备信息

> ID：16070737
> 
> 赞同：3
> 
> 时间：2013-04-17T21:40:26.333
> 
> 标签：c++, linux

我如何从设备文件描述符中获取设备信息，包括设备名称？

例如，在 SKYPE 中，我可以看到设备“/dev/snd/pcmC2D0c”的名称为：“USB 2.0 Camera.USB Audio Default Audio Device (default:CARD=Camera)”

我如何使用 C++ 获得这样的设备名称？

```
int file = open("/dev/snd/pcmC2D0c", O_RDWR | O_NONBLOCK, 0);
if (-1 == file) // check is error occurred during opening?
{
    perror("open");
    return -1;
}
if (-1 == ioctl(file, /* appropriate ioctl value to get the device info? */, /* appropriate structure to fill with device info? */))
{
    perror("ioctl");
    return -1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T22:04:22.273

没有`ioctl`用于获取设备信息的值。在这种特殊情况下，它是一个 USB 设备，它有其他设备类型信息来源。

您可以查看`sysfs`安装在`/sys`. 有一个目录`/sys/bus/usb/devices/`，其中包含指向真实设备的符号链接条目。

在我的系统上，有例如`/sys/bus/usb/devices/3-4`. 此符号链接指向目录`/sys/devices/pci0000:00/0000:00:12.0/usb3/3-4/`，该目录包含多个标识设备的文件。

`idVendor`并`idProduct`包含数字`045e`和`00cb`。使用这些数字，您可以查看文件`/usr/share/misc/usb.ids`并找到

```
...
045e  Microsoft Corp.
...
        00ca  Fingerprint Reader
        00cb  Basic Optical Mouse v2.0
        00ce  Generic PPC Flash device
... 
```

例如，对于硬盘驱动器，您有类似的信息。`/sys/devices/pci0000:00/0000:00:11.0/host0/target0:0:0/0:0:0:0/block/sda/`是我的硬盘`device/model`，此目录中的条目包含字符串`TOSHIBA DT01ACA1`，将其标识为 THOSHIBA 1TB 硬盘驱动器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T22:04:20.007

某些 ioctl 不会检索设备信息（尽管通过链接许多 ioctl 可以做到这一点），而是通过 sysfs 和/或 udev。您可以使用命令行工具`/sbin/udevadm`查询有关设备的信息。udev 将有效地遍历 sysfs 并从那里查询所有信息。但为方便起见，这由 udev 抽象出来。

在 /dev 中的任意条目上尝试以下操作

```
/sbin/udevadm info --query all --name=/dev/... 
```

在 udev API [http://www.freedesktop.org/software/systemd/libudev/中有一个等价物](http://www.freedesktop.org/software/systemd/libudev/)

# c# - 如何为我的应用创建 powershell 扩展

> ID：16070738
> 
> 赞同：2
> 
> 时间：2013-04-17T21:40:31.963
> 
> 标签：c#, powershell

我正在开发一个平台，因为它有很多配置和参数，我认为允许系统管理员编写任务和类似的东西会非常好，就像 SharePoint 所做的那样......不仅如此：因为我'将是一个管理它相当长一段时间的人，我真的不需要（或有时间构建）GUI，但我不想像疯了一样继续运行 tsql 脚本......

所以我的问题是：我该怎么做？我如何告诉 PowerShell 当有人进入时`Get-MyAppTenants`他应该调用我的 DLL 并执行该方法`RetriveAllTenants()`？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:53:32.357

我建议您编写一个二进制 cmdlet，因为您要在单独的库中使用方法。你可以用 C# 编写它，这样你就可以使用你已经拥有的技能，只需为你的应用程序提供 PowerShell 模块。

可以在此处找到启动指南：

[构建二进制 PowerShell 模块 - 第 1 部分 - 入门](http://csharpening.net/?p=738)

[构建二进制 PowerShell 模块 - 第 2 部分 - 设计原则和其他指南](http://csharpening.net/?p=853)

# paypal - Paypal 自适应支付错误 520003 身份验证失败。API 凭据不正确

> ID：16070741
> 
> 赞同：0
> 
> 时间：2013-04-17T21:40:41.530
> 
> 标签：paypal, paypal-adaptive-payments

我的域上有一个有效的 Paypal 自适应支付版本。我准确地复制了所有代码并将其放在一个新域中，我收到了错误。它是完全相同的代码，它在一个域上工作，但在另一个域上失败。

```
520003 Authentication failed. API credentials are incorrect. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:15:40.467

原来我的 LAMP 服务器运行的是 PHP 5.2 而另一台运行的是 5.3

# java - 类的文档中没有变量

> ID：16070742
> 
> 赞同：0
> 
> 时间：2013-04-17T21:40:49.757
> 
> 标签：java, javadoc

我有简单的课

```
import java.io.PrintStream;
/**
* Calculate roots of polynom ax^2 + bx + c = 0
* @author XXXX aka XXX
* @version 1.0 17.04.2013
*/
public class Lab1_1 {

/** 
* quadratic coefficient 
*/
private float a;
/** 
* linear coefficient 
*/
private float b;
/** 
* free term 
*/
private float c;

/**
*
* Constructor Lab1_1
*
* @param a {@link Lab1_1#a}
* @param b {@link Lab1_1#b}
* @param c {@link Lab1_1#c}
*/
public Lab1_1(float a, float b, float c) {
    this.a = a;
    this.b = b;
    this.c = c;
}

/**
* Calculate roots of quadratic equation
*
* @return returns string representation of roots of the polynom
* @throws ArithmeticException in case of complex number result
*/
public String calculate() {
    float discriminant = b * b - 4 * a * c;
    if (discriminant > 0) {
        double result1 = (-b + Math.sqrt(discriminant)) / (2 * a);
        double result2 = (-b - Math.sqrt(discriminant)) / (2 * a);
        return "x1 = " + result1 + ";" + "x2 = " + result2;
    } else if (discriminant == 0) { 
        double result = -b / (2 * a);
        return "x1 = " + result + ";" + "x2 = " + result;
    } else throw new ArithmeticException("Discriminant is less than zero! The result is a complex number!");

}

public static void main(String[] args) {
    try{
        if (args.length < 3) {
            new PrintStream(System.out, true, "UTF-8").println("Number of input arguments is less than 3");
            return;
        }
        try{
            new PrintStream(System.out, true, "UTF-8").
                println(
                    new Lab1_1(Float.parseFloat(args[0]),Float.parseFloat(args[1]),Float.parseFloat(args[2])).
                    calculate());
        }catch(ArithmeticException e) { 
            System.out.println(e.getMessage()); 
        }
    }
    catch(Exception e) { e.printStackTrace(); }
}
} 
```

但是当我`javadoc -d c:\mypath\home\html Lab1_1.java`在 Lab1_1 html 文件中生成文档时，没有变量字段。![在此处输入图像描述](https://i.stack.imgur.com/Kl31R.png)

我的评论有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:49:09.813

Javadoc 默认会忽略私有字段和方法。为了使它为那些生成文档以及`-private`在命令行上传递参数。另请参阅[Java Javadoc 包括 Private](https://stackoverflow.com/questions/3101339/java-javadoc-include-private)

# javascript - 查找最接近点击坐标的元素

> ID：16070746
> 
> 赞同：3
> 
> 时间：2013-04-17T21:41:05.183
> 
> 标签：javascript, jquery, html, dom

有没有一种简单的方法来检测最接近容器中鼠标点击坐标的子元素？在这种情况下，容器是一个 div

前任：

```
<div style="white-space: pre-wrap">
  <span>E1</span>
  <span>\n</span>
  <span>\n</span>
  <span>E4</span>
  <span>E5</span>
</div> 
```

在上述情况下，我想确定与在 div 中发生单击的位置最近的顶部/左侧坐标的跨度。由于换行，跨度没有完全覆盖 div

在我的点击事件中，我可以通过 e.clientY 访问顶部/左侧；

但是，我在遍历跨度以检测哪个跨度最接近 div 内的点击坐标时遇到了一些困难。

点击处理程序：

```
function(e){
 var yop = e.clientY;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:03:10.860

以下是一些可能有用的链接`document.elementFromPoint`：

从 MDN 链接的摘要中：

> 从正在调用其 elementFromPoint 方法的文档中返回元素，该元素是位于给定点下方的最顶层元素。要获取元素，请通过坐标指定点，以 CSS 像素为单位，相对于包含文档的窗口或框架中的左上角点。

[http://www.quirksmode.org/dom/w3c_cssom.html](http://www.quirksmode.org/dom/w3c_cssom.html)

[https://developer.mozilla.org/en-US/docs/DOM/document.elementFromPoint](https://developer.mozilla.org/en-US/docs/DOM/document.elementFromPoint)

所以简而言之，它在 z-index 堆栈的某个坐标处放下一个 pin `x, y`，并返回它命中的第一个元素。超级有用，尽管根据 Quirksmode 页面，它的支持是有限的。

# angularjs - 如何向 angularjs 可重用模板添加新范围

> ID：16070747
> 
> 赞同：1
> 
> 时间：2013-04-17T21:41:11.957
> 
> 标签：angularjs, scope, reusability

我想创建一个可重复使用的模板，说联系信息

```
<input> name
<input> telephone
<input> email 
```

现在，我想在很多情况下使用这个部分 html。因此，我将在一个示例中填充输入以进行编辑，或者在另一个示例中添加新联系人。最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:43:30.683

用户 angularjs 指令。这正是它的设计目的。[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)

这是一个有用的资源，可帮助您开始使用指令：[https ://github.com/angular/angular.js/wiki/JsFiddle-Examples#version-110](https://github.com/angular/angular.js/wiki/JsFiddle-Examples#version-110)

# c++ - 在结构中为另一个结构的 2 个对象定义运算符 <

> ID：16070750
> 
> 赞同：0
> 
> 时间：2013-04-17T21:41:33.020
> 
> 标签：c++, struct, operator-keyword

我在 C++ 中有一个小问题，希望你能帮助我。

我想定义一个结构 myPoint。这个结构应该能够比较来自类型点的两个对象（定义为对）。我希望 myPoint 的每个“实例”都能够自己比较两个点。这就是我试图编码的内容：

```
typedef pair<int,int> point;
struct myPoint{
    point p;
    inline bool operator<( point x, point y ){
    return !ccw(p,x,y);
} 
```

所以每个 myPoint 在比较两个点 x,y 时都应该考虑他自己的点 p。我得到的（翻译的）错误是

```
"error C2804:  Binary Operator '<' has too much Arguments/Parameters" 
```

似乎在语法上可以只用一个点来制作这个运算符，我猜它会将一个点与一个 myPoint 进行比较，但这不是应该的。问题的背景是我想使用预定义的排序函数对点向量进行排序，并且作为排序“函数”，我想提供一个 myPoint 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:50:33.457

`<`定义只有一个参数的重载。正如@KonradRudolph 所指出的，`<`在这种情况下重载是没有意义的，因为你不能在排序或任何事情中使用它

```
typedef pair<int,int> point;
struct myPoint{
    point p;
    bool smaller(const point &a, const point &b)
    {
        return !ccw(p,a,a)
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:46:42.220

我认为（也许）你想要做的是写一个*函子*

```
struct myPoint
{
    myPoint(point p) { this->p = p; }
    bool operator()(point x, point y) const
    {
        return !ccw(p,x,y);
    }
    point p;
}; 
```

函子可以作为第三个参数传递给 std::sort。

```
std::sort(vec.begin(), vec.end(), myPoint(p)); 
```

不过我有疑问，假设 ccw 表示逆时针，我认为这不是一个有效的排序条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T22:08:52.863

这个片段应该为你说明基本的事情：

```
#include <utility>

typedef std::pair<int,int> point;

bool less(const point& p1, const point& p2)
{
    return (p1.first < p2.first) ||
           ((p1.first == p2.first) && (p1.second == p2.second));
}

struct myPoint {
    point p;
    inline bool operator < (const point& p2) {
        return less(p, p2);
    }
};

int main()
{
    return 0;
} 
```

1.  您没有“关闭”运算符 <。
2.  如果是像这里这样的方法，则运算符 < 只需要一个参数。
3.  使用常量引用。

# java - 读取结构化二进制文件

> ID：16070751
> 
> 赞同：0
> 
> 时间：2013-04-17T21:41:33.237
> 
> 标签：java, file, datainputstream

我想用 Java 读取二进制文件。我知道该文件包含一系列数据结构，如：ANSI ASCII 字节字符串、整数、ANSI ASCII 字节字符串。即使我们假设数据结构的数量已知（N），我如何读取和获取文件的数据？我看到接口[DataInput](http://docs.oracle.com/javase/6/docs/api/java/io/DataInput.html)有一个方法 readUTF() 来读取字符串，但它使用 UTF-8 格式。我们如何处理 ASCII 的大小写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:38:01.067

尝试

```
public static void main(String[] args) throws Exception {
    int n = 10;
    InputStream is = new FileInputStream("bin");
    for (int i = 0; i < n; i++) {
        String s1 = readAscii(is);
        int i1 = readInt(is);
        String s2 = readAscii(is);
    }
}

static String readAscii(InputStream is) throws IOException, EOFException,
        UnsupportedEncodingException {
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    for (int b; (b = is.read()) != 0;) {
        if (b == -1) {
            throw new EOFException();
        }
        out.write(b);
    }
    return new String(out.toByteArray(), "ASCII");
}

static int readInt(InputStream is) throws IOException {
    byte[] buf = new byte[4];
    int n = is.read(buf);
    if (n < 4) {
        throw new EOFException();
    }
    ByteBuffer bbf = ByteBuffer.wrap(buf);
    bbf.order(ByteOrder.LITTLE_ENDIAN);
    return bbf.getInt();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T22:55:08.363

> 我们如何处理 ASCII 的情况？

你可以用 readFully() 来处理它。

注意 readUTF() 是由 DataOutput.writeUTF() 创建的特定格式，我不知道其他任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T21:47:33.837

我认为最灵活（和有效）的方法是：

1.  打开一个`FileInputStream`.
2.  `FileChannel`使用流的`getChannel()`方法获得一个。
3.  `MappedByteBuffer`使用通道的方法将通道映射到 a `map()`。
4.  通过缓冲区的各种`get*`方法访问数据。

# junit - 如何让 Jenkins 使用电子邮件分机显示跳过的测试？

> ID：16070754
> 
> 赞同：3
> 
> 时间：2013-04-17T21:41:39.083
> 
> 标签：junit, jenkins, email-ext

我在 Jenkins 中使用 email-ext 插件来显示通过失败，电子邮件有一个漂亮的蓝色表示通过的方法，红色表示失败。它不包括类中的 Ignored 测试。Junit 的 @Ignore 的注释不应该通过电子邮件分机显示在 junit 结果中吗？

我正在使用 html_gmail 模板，如下所示： ${JELLY_SCRIPT,template="html_gmail"}

我在可扩展的电子邮件通知配置中使用以下令牌：

测试总数：${TEST_COUNTS, var}

总计 = $TEST_COUNTS 失败 = ${TEST_COUNTS,var="fail"}

总计 = $TEST_COUNTS 通过 = ${TEST_COUNTS,var="pass"}

是否有：忽略 = ${TEST_COUNTS,var=skipped") ????

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-18T17:54:37.030

是的 -

```
${TEST_COUNTS,var="skip"} 
```

看一下[TestCountsContent.java的源码](https://github.com/jenkinsci/email-ext-plugin/blob/master/src/main/java/hudson/plugins/emailext/plugins/content/TestCountsContent.java)

# ruby-on-rails - 在模型中使用 ||= 而不是 = 来定义常量的原因是什么

> ID：16070762
> 
> 赞同：3
> 
> 时间：2013-04-17T21:42:20.570
> 
> 标签：ruby-on-rails, ruby

在当前项目中找到了这个：

```
class Video < ActiveRecord::Base
  ...
  VALID_VIDEO_HOSTS ||= %w(www.youtube.com youtube.com vimeo.com www.vimeo.com)
  ...
end 
```

通常我使用简单的 VALID_VIDEO_HOSTS = %w(...) 并且没有任何猜测为什么以前的开发人员使用 ||=

有人知道有什么好处吗？

**更新**

我知道 ||= 在一般情况下是什么，问题主要是关于在模型中以这种方式定义常量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T21:49:58.823

`||=`正如其他海报所提到的，它被用作一种廉价的方式来[记忆价值。](http://en.wikipedia.org/wiki/Memoization)然而...

**为什么要记住一个常数？**

作者很可能在多次加载该源文件时防止出现警告。( `warning: already initialized constant VALID_VIDEO_HOSTS`)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T21:43:36.590

`||=`记忆值——**它只设置一次值**——只有在它之前没有定义的情况下。随后调用时，该值已设置，不会被修改。它使用 Ruby 的延迟加载来评估左侧是否为布尔值，并且仅在它为 nil 或 false 时才进行赋值。

这两行是等价的：

```
 var ||= something

  var = something if var.nil?   # this is equivalent to ||=

  # Note: memoizing with ||= only works if the right-hand side is not a boolean function;
  #       because if it's value would be false, it could not use Ruby's lazy-loading 
```

如果右侧是一项昂贵/耗时的操作，或者通常在只需要执行一次的初始化期间，这通常用于**记忆（缓存）。**

**为什么 ||= 分配给常量时？**

常量应该只初始化一次，并且至少会在您尝试覆盖它们时发出警告。 **||= 确保该值仅分配给常量一次。这样您就不会收到常量已经初始化的警告。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T21:47:24.197

那个叫做 memoize 的调用 - 意味着你设置它一次，然后保留那个值，就像值的延迟加载一样。

ActiveSupport 现在有一种方法，它的工作方式与以下略有不同`||=`： [http ://apidock.com/rails/ActiveSupport/memoize](http://apidock.com/rails/ActiveSupport/memoize)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-01T21:26:55.780

我个人在项目中使用它来允许用户加载代码。如果用户愿意，用户代码可以覆盖该常量。所以我避免错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T21:47:33.613

它用于延迟初始化一个值。在您的示例中，没有太多要求，因为创建字符串数组的开销并不多。一个更好的例子是：

```
class WebsiteImageHelper
    def get_image_files
      #recurse directories looking for images
      #this will only happen once per instance of 
      #WebsiteImageHelper
      @image_files ||= Dir['images/**/**']
    end
end 
```

# php - 如何在 WordPress 中以图片居中发布导航链接？

> ID：16070763
> 
> 赞同：-1
> 
> 时间：2013-04-17T21:42:22.633
> 
> 标签：php, html, css, wordpress

我正在构建自己的 WordPress 主题，并且很难让帖子导航看起来正确。

我有两个图像（一个“左/旧”箭头和一个“右/新”箭头），我想分别代表链接以显示较旧或较新的帖子。链接将立即显示在当前显示的最后一篇文章的下方。

如果没有较新的帖子（即我们在首页），我只想显示一个应该**居中**的“旧”箭头链接，如果新旧帖子都可用，那么我想显示两个箭头，再次**居中在页面底部**。最后，如果没有较旧的（即只有较新的帖子）可用，那么我想显示“较新”的帖子箭头**居中**。

这是一张图片来说明：

![所需的后导航链接排列](https://i.stack.imgur.com/faOcR.png)

我已经阅读了有关 posts_nav_links() 的文档，但我似乎无法正确理解。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T06:20:30.750

尝试这个...

```
<?php global $wp_query;
if ( $wp_query->max_num_pages > 1 ) : ?>
<div align="center">
  <div class="previous">
    <?php next_posts_link( '<img src="older post arrow" />' ); ?>
  </div>
  <div class="next">
    <?php previous_posts_link( '<img src="newer post arrow" />' ); ?>
  </div>
</div>
<?php endif;?> 
```

# ruby-on-rails - ruby bundle 安装失败并显示 (Errno::EEXIST)

> ID：16070764
> 
> 赞同：0
> 
> 时间：2013-04-17T21:42:25.790
> 
> 标签：ruby-on-rails, ruby, gem, rvm, bundle

我在 Ubuntu 12.10 上。我在它上面安装了 rvm 和 ruby​​ 1.9.3 以及 gem rails 和 bundle。试图跑

```
bundle install 
```

或者更好

```
rvmsudo bundle install 
```

两者都给了我同样的错误：

```
Fetching git://github.com/resque/resque.git
Unfortunately, a fatal error has occurred. Please see the Bundler
troubleshooting documentation at http://bit.ly/bundler-issues. Thanks!
/home/snir/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/fileutils.rb:247:in `mkdir': File exists - /home/snir/.rvm/bin/bundle (Errno::EEXIST)
    from /home/snir/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/fileutils.rb:247:in `fu_mkdir'
    from /home/snir/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/fileutils.rb:221:in `block (2 levels) in mkdir_p'
    from /home/snir/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/fileutils.rb:219:in `reverse_each'
    from /home/snir/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/fileutils.rb:219:in `block in mkdir_p' 
```

就这样。。

我无法绕过它。重新安装捆绑包没有帮助，所以我重新安装了 ruby​​，这也没有帮助，所以我完全删除了 RVM 并重新安装了它，问题仍然存在。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:45:21.690

错误是“/home/snir/.rvm/bin/bundle”已经存在。

我会检查这个目录是否存在，以及它的写权限是什么。

我的猜测是你用 sudo 或其他东西制作了这个目录，它不能被写入。

也许 rm 它，然后再试一次？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:50:41.030

BUNDLE_PATH 设置为与现有路径冲突的 /home/snir/.rvm/bin/bundle。要检查我使用了什么 BUNDLE_PATH：

```
bundle config 
```

并改变它：

```
bundle config path "/home/snir/.bundle" 
```

（或我想要的任何其他路径）

# javascript - 数据结构类型

> ID：16070770
> 
> 赞同：0
> 
> 时间：2013-04-17T21:42:57.640
> 
> 标签：javascript, algorithm, data-structures

我有多个问题，其中包含子问题。我想存储在数据结构中，以便在用户选择第一个问题时选择子问题。此外，一些子问题使用该类别中的一般问题。最初我考虑使用多维数组，但后来我意识到搜索数组需要很长时间。

任何建议表示赞赏。

谢谢

到目前为止，这是我的解决方案。

```
//Key is the question and value(object) contains all the value related to the question
categoryToSubquestions[2] = {"What type of countertop?":{
                                "stone_slab_countertops": "Stone slab countertops",
                                "granite_countertops" : "Granite countertops",
                                "marble_countertops" : "Marble countertops",
                                "quartz_countertops" : "Quartz countertops",
                                "slate_countertops" : "Slate countertops",
                                "solid_surface_countertops" : "Solid Surface countertops",
                                "concrete_countertops" : "Concrete countertops",
                                "corian_countertops" : "Corian countertops",
                                "formica_countertops" : "Formica countertops",
                                "stainless_countertops" : "Stainless countertops",
                                "wood_or_butcher_block_countertops" : "Wood or Butcher block countertops",
                                "laminate_countertops" : "Laminate countertops",
                                "selectKey":"MappedCategory"

                            },
                             "What best describes your countertop project?":{
                                "install_or_replace": "Install or Replace",
                                "repair"        : "Repair",
                                "selectKey":"describe_countertop_project"
                            },
                             "generalQuestions2": "4"
                            };
//This is general question that other categories might use...It is being used in the above category
generalQuestion[4] = {"Is this project part of a larger remodel?":{
                            "true" : "Yes",
                            "false": "No",
                            "selectKey":"part_of_larger_remodel"
                        }
                    };
//THIS IS categoryToSuquestion index to value assosciation...(JUST TO KEEP TRACK)
var keyValue = new Array(
/*0*/           "cabinets_reface",
/*1*/           "cabinets_refinish",
/*2*/           "cabinets_countertop_install"); 
```

我现在有 70 个这样的问题，我有点担心一旦我继续添加更多问题，它会不会变慢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:15:49.297

我会创建一个这样的数据结构。
不要忘记您可以像访问它的属性上的哈希表/字典一样访问它。

```
var questions_data_structure = {
    "Q1": {
        "question_text": "Parent Question #1?",
        "sub_questions": ["SubQues1", "SubQues3"]
    },
    "SubQues1": {
        "question_text": "Sub Question 1?",
        "parent_question": "Q1"
    },
    "SubQues3": {
        "question_text": "Sub Question 3?",
        "parent_question": "Q1"
    },
    "Ques8": {
        "question_text": "Regular question without children questions?"
    }
}

q = questions_data_structure["Q1"];
alert(q.question_text);

if (q.sub_questions && q.sub_questions.length > 0) {
    alert("I have child questions");

    var i = 0, len = q.sub_questions.length, childQuestionObj;
    for (; i < len; i++) {
        childQuestionObj = questions_data_structure[q.sub_questions[i]];
        alert(childQuestionObj.question_text);
    }
}
else {
    alert("I DON'T have child questions");
} 
```

因此，如果您将数据结构的**KEY**值与 HTML 控件 ID 联系起来，您可以执行类似的操作。

```
// include jQuery library
$.each(questions_data_structure, function(question_id, value) {
    if (value.sub_questions && value.sub_questions.length > 0) {
        $('#' + question_id).click( function(e) {
            /* Show or hide your child question controls */
        });
    }
}); 
```

# c++ - opengl - 闪光（如拍摄时）

> ID：16070771
> 
> 赞同：1
> 
> 时间：2013-04-17T21:43:02.280
> 
> 标签：c++, opengl, 3d, glut

我正在尝试制造闪光（比如有人在拍摄时）。例如（它来自真实视频，但我需要类似的东西，更简单）：

![在此处输入图像描述](https://i.stack.imgur.com/5P6yD.jpg)

我只需要使用 OpenGL 来做到这一点 - 不能为这个建模。如果它可以有点随机，那就太好了。谁能给我一些提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:59:31.673

我不知道你想让它看起来有多好，但你可以通过使用交叉排列的 alpha 纹理四边形来伪造它，你可以在枪口指向的方向上每帧移动一点纹理让它看起来好像在移动。

它简单且易于实现，并且闪存应该是一件快速的事情，因此用户永远不会知道能够分辨出区别。

# c# - LINQ 与 @Html.DropDownList 不同

> ID：16070786
> 
> 赞同：2
> 
> 时间：2013-04-17T21:44:00.597
> 
> 标签：c#, linq, razor

好的，我在我认为应该很容易的事情上遇到了很多麻烦。我正在尝试使用表中的不同值填充下拉列表。

此 linq 提供了每个下拉选项所需的部门列表。

```
IPACS_Master_Lists
   .Where (x => (x.Department != null))
   .Select (s => s.Department)
   .Distinct ()
   .Select (v => v) 
```

我如何用这个做一个下拉列表？

我试过弄乱@Html.DropDownList 但似乎无法得到任何工作。

我的控制器如下。我试图用 ViewBag 传递它，但也无法让它工作。

```
public ActionResult Index()
        {
            var docs = db.IPACS_Master_List;
            ViewBag.Departments = new SelectList(db.IPACS_Master_List.Where(x => (x.department != null)).Select (s => s.department).Distinct().Select (v => v), "id", "department", 0);
            return View(docs);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:53:05.747

千万不要用`ViewBag`，每次用，小猫就死了。

说真的，这是**非常**糟糕的做法。

首先，假设在您的模型中：

```
public class MyModel
{
   public List<Documents> Docs { get; set; } //don't know what type this is
   public List<SelectListItem> Departments { get; set; }
   public string Department { get; set; } //this holds what you select in the view
} 
```

然后将您的操作更改为：

```
public ActionResult Index()
{
    MyModel model = new MyModel();
    model.Docs = db.IPACS_Master_List;
    model.Departments = db.IPACS_Master_List
       .Where(x => x.department != null)
       .Select(s => s.department)
       .Distinct()
       .Select(s => new SelectListItem
           {
               Text = s.Name,
               Value = s.Name
           })
       .ToList();

        return View(model);
} 
```

然后让您的视图使用模型`MyModel`。

然后你可以这样做：

```
@Html.DropDownListFor(m => m.Department, Model.Departments) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:47:49.137

将您的收藏变成收藏`<SelectListItem>`

```
var myResult = IPACS_Master_Lists.Where (x => (x.Department != null))
   .Select (s => s.Department)
   .Distinct ()
   .Select (v => new SelectListItem{
    Value = v.ResultIdField,
    Text = v.ResultNameField
    }) 
```

然后将其链接到实际的下拉列表：

如果您通过 ViewModel 传递：

```
@Html.DropDownListFor(model=>model.SelectedResultId, @Model.myResult ,"- Select One") 
```

如果您通过 ViewBag 传递您的收藏（我会远离这个）：

```
@Html.DropDownListFor(model=>model.SelectedResultId, @ViewBag.myResult ,"- Select One") 
```

如果视图中根本没有 ViewModel，您可以选择另一种选择：

```
@Html.DropDownList("selectListName", ViewBag.myResult, new {id = "selectListId"}) 
```

另请查看我大约一年前在这里提出的问题。它应该可以帮助您： [无法让我的 DropDownListFor 在下拉菜单中选择选定的 SelectListItem 项](https://stackoverflow.com/questions/11039621/cant-get-my-dropdownlistfor-to-select-a-selected-selectlistitem-item-in-a-dropd)

# python - Python中的try-except错误

> ID：16070788
> 
> 赞同：0
> 
> 时间：2013-04-17T21:44:06.557
> 
> 标签：python, python-2.7, subprocess

我有一个 Python 脚本，中间有一个批处理命令，

```
batch_cmd = "batch command"
subprocess.call(batch_cmd) 
```

考虑这种情况，如果失败，我想重复运行此批处理命令。我尝试使用 try/except 的方式是，batch_cmd 也必须在“except”部分重复。那是：

```
try: 
    batch_cmd = "batch command"
    subprocess.call(batch_cmd)

except:
    print "error. retrying"
    subprocess.call(batch_cmd) 
```

然而，异常并没有被捕获。如果 try 块中的批处理命令失败，那么它只是绕过“except”块并执行脚本的剩余部分。如何为此重写 try/except 部分？或者除了try/except还有其他方法吗？我知道关于 SO 也有类似的问题，但到目前为止，解决方案对我没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:48:21.697

如果您想要一个异常以防被调用的命令失败（非零退出代码），请使用[`subprocess.check_call(batch_cmd)`](http://docs.python.org/2/library/subprocess.html#subprocess.check_call)它来执行它。

在这种情况下也可以使用`except subprocess.CalledProcessError:`以避免捕获不必要的异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:49:45.447

我不会推荐它。如果有的话，您应该设置固定的重试次数，如果尝试次数过多，请使用计数器来中断循环。如果它仍然无法执行`raise`新的异常以防止代码继续执行。

如果你真的需要，你可以做这样的递归。

```
def ExectuteBatchCommand(batch_cmd)
    try: 
        subprocess.call(batch_cmd)
    except subprocess.CalledProcessError:
        print "error. retrying"
        ExectuteBatchCommand(batch_cmd) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T21:48:03.010

subprocess.call 返回错误代码。将它放在一个变量中并使用 if 语句检查它是否失败。

# c# - C# 中的 RSA 实现

> ID：16070790
> 
> 赞同：2
> 
> 时间：2013-04-17T21:44:16.990
> 
> 标签：c#, encryption, rsa, biginteger, public-key-encryption

我正在尝试在 C# 中实现 RSA 算法。下面的代码在 p 和 q 很小时有效，但在尝试复制 RSA-100 或更大时 p 和 q 非常大时无效。

例如，当：

```
p = 61, q = 53, n = 3233, phi(n) = 3120, e = 17, d = 2753 
```

解密后，我得到正确的原始消息。我从[RSA Wikipedia page](http://en.wikipedia.org/wiki/RSA_%28algorithm%29#A_working_example)获得了这些值。该代码也适用于 p 和 q 的其他较小值。

但是，当使用[RSA-100](http://en.wikipedia.org/wiki/RSA_numbers#RSA-100)或更高版本时，我无法取回原来的消息。我尝试对指数 (e) 使用不同的值，并确保它与 phi(n) 互质，但我无法得到正确的结果。我错过了一些简单/明显的东西吗？

预先感谢您的帮助！

```
//p and q for RSA-100
//string p = "37975227936943673922808872755445627854565536638199";
//string q = "40094690950920881030683735292761468389214899724061";

string p = "61";
string q = "53";

//Convert string to BigInteger
BigInteger rsa_p = BigInteger.Parse(p);
BigInteger rsa_q = BigInteger.Parse(q);

//n = p * q
BigInteger rsa_n = BigInteger.Multiply(rsa_p, rsa_q);

//phi(n) = (p-1)*(q-1)
BigInteger rsa_fn = BigInteger.Multiply((rsa_p - 1), (rsa_q - 1));

BigInteger rsa_e = 17;

//Compute d
BigInteger rsa_d = BigInteger.ModPow(rsa_e, (rsa_fn - 1), rsa_fn);

//Encrypt the message, in this case 3007
//C = (3007^rsa_e) mod rsa_n
BigInteger C = BigInteger.ModPow(3007, rsa_e, rsa_n);

//Decrypt the message, M should equal 3007
//M = (3007^rsa_d) mod rsa_n
BigInteger M = BigInteger.ModPow(C, rsa_d, rsa_n); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T22:32:45.220

d=e^(phi(n)-1) mod phi(n) 在我看来是错误的。您要么需要 d=e^(phi(phi(n))-1) mod phi(n)，要么可以使用扩展的 euclid。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T21:53:48.090

我看到您已经接受了解决方案。但是，我想向您指出这篇文章，该文章展示了一个关于 C# 中 RSA 加密的更复杂示例。检查这篇文章（也有可用的源代码）：http: [//xmight.blogspot.com/2011/07/multithreaded-rsa-encryption-with-keys.html](http://xmight.blogspot.com/2011/07/multithreaded-rsa-encryption-with-keys.html)

# d3.js - 散点图未更新圈数

> ID：16070793
> 
> 赞同：1
> 
> 时间：2013-04-17T21:44:28.247
> 
> 标签：d3.js

所以这里是所有代码，在一个要点中，你可以将它保存为 HTML 文件并尝试它：

[https://gist.github.com/babakinks/5407967](https://gist.github.com/babakinks/5407967)

所以看看一开始我假设散点图圆圈的一些默认数字，我完全绘制了散点图

```
var numDataPoints = 50; 
```

然后在**底部**，我有这个监听器，它用随机的新值重绘散点图，它可以工作。**但**我想改进它，以便我可以在文本框中输入要绘制多少个圆圈，它应该画那么多圈子，并不总是与开始时相同的 50 个。但它不听我的！是的，它确实用新的随机值重新绘制了圆圈，但它仍然绘制了与最初相同数量的圆圈。我不知道如何修复这部分，我对 D3.js 很陌生。我期望它的工作方式是错误的？

```
 //On click, update with new data            
    d3.select("#drawbtn")
        .on("click", function() { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T22:12:36.203

您只需要添加 enter() 和 remove() 选择：

```
<!DOCTYPE html>
<html lang="en">
  <head>
        <meta charset="utf-8">
        <title>yguyghggjkgh</title>
        <script src="http://d3js.org/d3.v3.min.js"></script>
        <style type="text/css">

            .axis path,
            .axis line {
                fill: none;
                stroke: black;
                shape-rendering: crispEdges;
            }

            .axis text {
                font-family: sans-serif;
                font-size: 11px;
            }

        </style>
    </head>
    <body>

        <div>
          <input type="text" id="count" name="howmany">
          <input type="button" id="drawbtn" value="draw">
        </div>

        <script type="text/javascript">

            //Width and height
            var w = 500;
            var h = 300;
            var padding = 30;

            //Dynamic, random dataset
            var dataset = [];                                           //Initialize empty array
            var numDataPoints = 50;
            console.log("so we are here.")                                      
            var maxRange = Math.random() * 1000;                        //Max range of new values
            for (var i = 0; i < numDataPoints; i++) {                   //Loop numDataPoints times
                var newNumber1 = Math.floor(Math.random() * maxRange);  //New random integer
                var newNumber2 = Math.floor(Math.random() * maxRange);  //New random integer
                dataset.push([newNumber1, newNumber2]);                 //Add new number to array
            }

            //Create scale functions
            var xScale = d3.scale.linear()
                                 .domain([0, d3.max(dataset, function(d) { return d[0]; })])
                                 .range([padding, w - padding * 2]);

            var yScale = d3.scale.linear()
                                 .domain([0, d3.max(dataset, function(d) { return d[1]; })])
                                 .range([h - padding, padding]);

            //Define X axis
            var xAxis = d3.svg.axis()
                              .scale(xScale)
                              .orient("bottom")
                              .ticks(5);

            //Define Y axis
            var yAxis = d3.svg.axis()
                              .scale(yScale)
                              .orient("left")
                              .ticks(5);

            //Create SVG element
            var svg = d3.select("body")
                        .append("svg")
                        .attr("width", w)
                        .attr("height", h);

            //Create circles
            svg.selectAll("circle")
               .data(dataset)
               .enter()
               .append("circle")
               .attr("cx", function(d) {
                    return xScale(d[0]);
               })
               .attr("cy", function(d) {
                    return yScale(d[1]);
               })
               .attr("r", 2);

            //Create X axis
            svg.append("g")
                .attr("class", "axis")
                .attr("transform", "translate(0," + (h - padding) + ")")
                .call(xAxis);

            //Create Y axis
            svg.append("g")
                .attr("class", "axis")
                .attr("transform", "translate(" + padding + ",0)")
                .call(yAxis);

            //On click, update with new data            
            d3.select("#drawbtn")
                .on("click", function() {
                    //New values for dataset
                    var numValues = parseInt(document.getElementById('count').value, 10);
                    console.log(numValues);
                    var maxRange = Math.random() * 1000;                        
                    dataset = [];                                               //Initialize empty array
                    for (var i = 0; i < numValues; i++) {                       //Loop numValues times
                        var newNumber1 = Math.floor(Math.random() * maxRange);  //New random integer
                        var newNumber2 = Math.floor(Math.random() * maxRange);  //New random integer
                        dataset.push([newNumber1, newNumber2]);                 //Add new number to array
                    }

                    //Update scale domains
                    xScale.domain([0, d3.max(dataset, function(d) { return d[0]; })]);
                    yScale.domain([0, d3.max(dataset, function(d) { return d[1]; })]);

                    //Update all circles
                    svg.selectAll("circle")
                       .data(dataset)
                       .transition()
                       .duration(1000)
                       .attr("cx", function(d) {
                            return xScale(d[0]);
                       })
                       .attr("cy", function(d) {
                            return yScale(d[1]);
                       });

                    //Enter new circles
                    svg.selectAll("circle")
                       .data(dataset)
             .enter()
             .append("circle")
                       .attr("cx", function(d) {
                            return xScale(d[0]);
                       })
                       .attr("cy", function(d) {
                            return yScale(d[1]);
                       })
             .attr("r", 2);

                    // Remove old
                    svg.selectAll("circle")
                       .data(dataset)
             .exit()
             .remove()

                });

        </script>
    </body>
</html> 
```

# angularjs - AngularJS - 可以包含任何 JS 类型作为 ngModel 的输入

> ID：16070794
> 
> 赞同：0
> 
> 时间：2013-04-17T21:44:32.697
> 
> 标签：angularjs, angularjs-directive

如何实现一个字段（仅用于验证目的的输入），它能够包含一个不必是字符串或数字（如对象或资源）的值。

我希望输入字段的行为类似于`select`指令，其中值可以是任何有效的 JS 类型（对象、数组、字符串等）。

我只想将此字段用于验证目的（它将被隐藏）。

```
<input type="hidden" ng-model="fruit" name="fruit citrus-required>
<span ng-show="form.fruit.$invalid">Pick a valid citrus</span> 

<a ng-click="fruit={name:'banana'}">banana</a>
<a ng-click="fruit={name:'orange'}">orange</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:53:48.973

事实证明，角度已经涵盖了这一点， [http://beta.plnkr.co/edit/Udq8BR6yZhYBCkyR8KDP](http://beta.plnkr.co/edit/Udq8BR6yZhYBCkyR8KDP) 只是不知道这是否安全？

# c# - 仅针对一种文化以特定方式格式化货币

> ID：16070795
> 
> 赞同：0
> 
> 时间：2013-04-17T21:44:36.940
> 
> 标签：c#, cultureinfo, culture

我正在开发一个以不同货币显示产品价格的多语言应用程序。我使用 .net 库来格式化基于文化的货币，例如。

```
CultureInfo current = CultureInfo.CurrentCulture;
        return value.Value.ToString("C", current); 
```

一位俄罗斯客户对此显示方式不满意，例如，他们想要 100 руб。目前显示而不是 100,00 р。

有没有一种简单的方法来修改价格字符串的生成方式，而不影响其他对其文化货币的转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:06:05.553

您可以对某些文化使用自定义价格格式。例如：如果您的数据库中有 Culture 表。您应该添加具有默认值“{0:C}”的*CustomPriceFormat列。*在这种情况下，您可以更改一些文化的价格格式。然后你可以像这样使用：

```
var priceString = string.Format(currentCulture.CustomPriceFormat, d); 
```

对于俄罗斯文化， *CustomPriceFormat*是“{0:N} руб”。

# javascript - 用jquery找到指定的百分比

> ID：16070796
> 
> 赞同：0
> 
> 时间：2013-04-17T21:44:39.257
> 
> 标签：javascript, jquery

我正在尝试在 jquery 中查找整数的百分比：有一个具有不同值的变量基于所选属性获取（例如，该变量的值可能为 0.27）

是否有一个已经创建的函数来找到`6.61375661375662%`那个值`(0.27)`？还是我需要手动编写公式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:47:33.830

```
var percentage = your_var * .0661375661375662; 
```

或（为清楚起见）：

```
var percentage = your_var * 6.61375661375662 / 100; 
```

# c# - 反转生成的项目和 ItemsControl 集合的 Tab 顺序

> ID：16070797
> 
> 赞同：0
> 
> 时间：2013-04-17T21:44:40.163
> 
> 标签：c#, silverlight, xaml, itemscontrol

所以我们知道`ItemsControl`只会在其 ItemsPanel 中从上到下生成项目。如果是的话，我可以更改排序顺序并以不同的方式生成它们，这是我的实际问题。

例如，如果我`ItemsControl`使用 a`ItemTemplate`和多个`UIElement`'s 并使用 a`StackPanel`作为`ItemsPanel`我最终会得到类似的自然制表符顺序；

```
a. 1  2  3  4  5
b. 6  7  8  9  10
c. 11 12 13 14 15 
```

`FlowDirection`预期的，我可以使用放置顺序或`ItemTemplate`显然得到；

```
a. 5  4  3  2  1
b. 10 9  8  7  6
c. 15 14 13 12 11 
```

现在，我的问题是我怎样才能实现？（以最有效的方式）订单更像；

```
C. 11 12 13 14 15
B. 6  7  8  9  10
A. 1  2  3  4  5 
```

现在，如果您在想..“呃，`Shift`+ `Tab`dummy ...”，我希望这是一个选项。要求只是使用选项卡，并以自下而上而不是自上而下的方式生成集合，并在它们处于该控件时反转选项卡顺序。尝试劫持 shift/tab 事件并以某种方式将其转换为 tab 是否明智？即使是这样，它也只能回答我的部分问题。

希望有人之前遇到过这个问题或喜欢一个有趣的问题，因此任何见解都值得赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:12:09.230

最终继承`StackPanel`自`ItemPanel`. 想出来之后真是个愚蠢的解决方案，几乎为寻求帮助而感到尴尬哈哈。感谢任何可能花点时间考虑它的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T00:57:16.017

我只是用 StackPanels 的 StackPanel 尝试了一个简单的例子（即没有数据绑定），看起来流向对垂直堆叠的面板没有影响（如果有 TopToBottom 或 BottomToTop 选项会很好）。

我认为您的数据模型需要（在概念上）是一个列表列表，然后您需要制作 ItemsControls 的 ItemsControl（我知道布局很痛苦，但可以做到），并且您必须订购外部向后列出，以便生成控件 C、B、A（因为 FlowDirection 在垂直方向上不做任何事情）。

# bash - bash 正向进程替换背后发生了什么？

> ID：16070799
> 
> 赞同：4
> 
> 时间：2013-04-17T21:44:45.767
> 
> 标签：bash, process

根据维基百科，“进程替换也可用于捕获通常会进入文件的输出，并将其重定向到进程的输入。”（[http://en.wikipedia.org/wiki/Process_substitution](http://en.wikipedia.org/wiki/Process_substitution)）。

所以，用我自己的话来说，这意味着通过进程替换，我可以获取命令 A 的输出并将其用作命令 B 的输入。换句话说，它就像一个管道（这是正确的吗？）。

所以如果这是真的，如果我这样做：

```
echo "test" >(wc) 
```

那么我应该期望得到以下信息：

```
1 1 5 
```

因为我对上述命令的理解类似于以下：

```
$echo "test" > tmp
$wc tmp
1 1 5 tmp 
```

除了我不使用进程替换制作 tmp 文件。

但相反，我得到以下输出：

```
test /dev/fd/63 
```

这显然表明我的心理模型不正确。我哪里错了？

我理解<（命令）。例如

```
$diff <(head file1) <(head file2) 
```

完全有道理。但不是>（命令）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T22:40:41.813

从[`Process Substitution`](http://www.gnu.org/software/bash/manual/bashref.html#Process-Substitution)

> 进程列表在**其输入或输出连接到**FIFO 或**/dev/fd**中的某个文件时运行。**作为扩展的结果，此文件的名称作为参数传递给当前命令**。如果使用 >(list) 形式，**写入文件将为 list 提供输入**。

会发生什么`echo "test" >(wc)`？

打开该文件以`/dev/fd/63`用于连接。开始时它的输入连接到. 然后将该文件的名称 ( ) 作为参数传递给当前命令 ( )，从而生成. 这就是为什么你看到`echo test``wc``wc``/dev/fd/63``/dev/fd/63``echo "test"``echo "test" /dev/fd/63`

```
test /dev/fd/63 
```

作为输出。`wc`等待输入，但由于`echo`不写入`/dev/fd/63`，计数将为`0`.

如果你想让它工作，你必须创建一个脚本，它接受最后一个参数并将第一个`N-1`参数回显到最后一个参数

```
#! /bin/bash
echo "${@:1:$(($# - 1))}" >${@: -1} 
```

当你调用这个

```
bash script.sh test >(wc) 
```

你会看到预期的输出

```
1 1 5 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T22:40:59.003

你的心智模型是不正确的，因为你错过了一个重要的细节：流程替换不是重定向。

当您执行“echo test > tmp”等重定向时，执行的是“echo test”，标准输出（由“>”表示）被定向到名为“tmp”的文件中。当您执行替换时，例如“echo test >(wc)”，“wc”被执行，“>(wc)”被替换为文件名（或者可能是魔法设备的名称）可以读取或写入。

正如您链接到的维基百科页面所引用的那样：“在后台，进程替换通过创建命名管道，然后在命令行上替换其名称来工作。”

如果您仔细查看上面的“差异”示例，您也会发现它的工作方式相同。毕竟，除了命令行上的文件名之外，“diff”的参数是什么？

# css - 删除无序列表中链接之间的间隙

> ID：16070801
> 
> 赞同：0
> 
> 时间：2013-04-17T21:45:09.353
> 
> 标签：css, hyperlink, hover, html-lists, mouseover

这必须是非常简单的事情，但我只是没有看到它，并希望得到一些建议。

当鼠标悬停在不同的链接上时，我应用了 CSS 来制作不同的图像。默认情况下，其中一张图像是背景 jpg 图像的一部分。只有当鼠标悬停在相应的链接上时，才会出现所有其他图像。

**问题：**当我沿链接行左右滑动光标时，或者垂直上下滑动时，链接之间有间隙，大约4px左右。当光标在间隙上时，链接无效，因此顶部没有图像，并且显示背景图像，产生一种闪烁。

**问题：**如何消除链接之间的间隙，使背景图像仅在光标悬停在其链接上时才可见，但在其他地方不可见？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:53:34.497

那个小间隙的原因是因为如果你在两个元素之间有一个换行符或多个空格，浏览器会将所有这些都折叠到一个空格中。正是您所看到的空间。

您需要做的是以下事情（我知道标记看起来很难看）：

```
<div id="hero-links-container">
<ul> 
    <li>
        <a href="" id="hero-link-pianos"><div id="hero-image-piano"></div>Pianos</a><a href="" id="hero-link-woodwinds"><div id="hero-image-woodwinds"></div>Woodwinds</a><a href="" id="hero-link-percussion"><div id="hero-image-percussion"></div>Percussion</a><a href="" id="hero-link-music-education"><div id="hero-image-music-education"></div>Music Education</a><a href="" id="hero-link-brasswinds"><div id="hero-image-brasswinds"></div>Brasswinds</a><a href="" id="hero-link-strings"><div id="hero-image-strings"></div>Strings</a><a href="" id="hero-link-accessories"><div id="hero-image-accessories"></div>Accessories</a><a href="" id="hero-link-recorded-music"><div id="hero-image-recorded-music"></div>Recorded Music</a>
    </li>
</ul>
</div> 
```

# php - 没有定期刷新的 AJAX 聊天？

> ID：16070804
> 
> 赞同：2
> 
> 时间：2013-04-17T21:45:25.300
> 
> 标签：php, html, ajax, chat

我即将编写一个基于 ajax 的聊天。刷新聊天框的最佳方法是什么？我知道可能性很小，但哪种最适合聊天？

附加：是否可以仅重新加载未读文本？如果有人写了一段文字，则不必刷新整个内容。新消息就足够了。但是可以用ajax和php来完成吗？我不知道怎么做。因此，即使是小费，我也会心存感激……谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:37:57.177

刷新的频率和要刷新的内容范围是独立的。使用 AJAX，您可以询问服务器是否有任何新消息到达（基于时间戳），并且仅将这些消息附加到已显示的内容中，您不必重新加载整个页面。

至于“定期刷新”的事情：您可以进行短轮询或长轮询。我认为通过“定期刷新”，您可能指的是短轮询。这基本上是一个计时器，例如，JavaScript 每秒轮询服务器是否有任何新数据要显示。如果是，则发送它，否则回复一条消息，指示没有新内容。

在长轮询中，服务器被轮询，如果有新内容，则提供新内容。但是，如果没有新内容，则不要立即回答“没有新内容”，而是保持连接打开，并在有东西要发送时回答。这可以通过几种不同的方式实现，理论上可以提供更好的响应时间，但在实践中，如果以某种方式实现，可能会导致超时或服务器上的大量资源使用。

您可以在此处查看长轮询示例：[http ://www.screenr.com/SNH](http://www.screenr.com/SNH)

# wpf - 没有绑定到 IValueConverter DependencyProperty 发生

> ID：16070807
> 
> 赞同：0
> 
> 时间：2013-04-17T21:45:46.627
> 
> 标签：wpf, vb.net, xaml, datagrid, converter

对于我的 WPF Datagrid，我使用的是继承 DependencyObject 的 IValueConverter，因此我可以添加额外的参数。问题是我的转换器没有被通知其参数已更改。当转换函数运行时，属性是默认值。

这是一些代码。请注意，属性名称已更改以保护无辜者。

XAML：

```
<UserControl x:Class="UselessTool"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:my="clr-namespace:Lots.Of.Useless.Stuff"
             x:Name="Myself">
  <Grid x:Name="LayoutRoot">
    <Grid.Resources>
      <my:InvasiveWeightConverter x:Key="TotalWeightConverter"
                                  Department="{Binding Department, ElementName=Myself}" />
    </Grid.Resources>
    <DataGrid x:Name="BuildingGrid"
              ItemsSource="{Binding BuildingData, ElementName=Myself}">
      <DataGrid.Columns>
        <DataGridTextColumn Header="Building"
                            Binding="{Binding Building}" />
        <DataGridTextColumn Header="Room"
                            Binding="{Binding Room}" />
        <DataGridTextColumn Header="Fire Escapes"
                            Binding="{Binding FireEscapes}" />
        <DataGridTextColumn Header="Total Personnel Weight"
                            Binding="{Binding Room, Converter={StaticResource TotalWeightConverter}, Mode=TwoWay}" />
      </DataGrid.Columns>
    </DataGrid>
  </Grid>
</UserControl> 
```

背后的代码（VB.NET）：

```
Imports System.Data
Imports System.ComponentModel
Public Class UselessTool
  Implements INotifyPropertyChanged

  Public Sub New()
    Me.Department = ""
    Me.BuildingData = New DataTable
  End Sub

  Public Sub ImportTables(BuildingTable as DataTable, department as String)
     Me.Department = department
     Me.BuildingData = BuildingTable.Select("[Department] = " & department).CopyToDataTable()
  End Sub

  Private _dept as String
  Public Property Department() as String
    Get
      return _dept
    End Get
    Set(value as String)
      _dept = value
      RaisePropertyChanged("Department")
    End Set
  End Property
  ....
End Class

Public Class InvasiveWeightConverter
  Inherits DependencyObject
  Implements IValueConverter

  Public Shared ReadOnly DepartmentProperty As DependencyProperty = DependencyProperty.Register("Department", GetType(String), GetType(InvasiveWeightConverter), New PropertyMetadata(Nothing, New PropertyChangedCallback(AddressOf DPChangeHandler)))

  Public Property Department() As String
      Get
          Return DirectCast(GetValue(DepartmentProperty), String)
      End Get
      Set(value As String)
          SetValue(DepartmentProperty, value)
      End Set
  End Property

  Private Shared Sub DPChangeHandler(d As DependencyObject, e As DependencyPropertyChangedEventArgs)
    MsgBox(e.NewValue.ToString)
    ' the part above is not being fired
  End Sub

  Public Function Convert(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.Convert
    Dim room As String = CType(value, String)

    Dim dataTable As DataTable = Personnel_Table
    Dim clause As String = String.Format("[{0}] = '{1}' AND [{2}] = '{3}'", dataTable.DepartmentColumn.ToString, Department, dataTable.RoomColumn.ToString, room)
    ' this is where I notice that Department is empty
    Dim rows() As DataRow = dataTable.Select(clause, "", DataViewRowState.CurrentRows)

    Dim totalWeight As Integer
    Dim weight As Integer
    For Each row In rows
        weight = CInt(row.Item("Weight"))
        totalWeight += weight 
    Next
    Return totalWeight 

  End Function

  Public Function ConvertBack(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.ConvertBack
    Return Nothing
  End Function

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:40:45.700

从 Freezable 继承，据我了解，它会延迟绑定，因此您可以将对象用作资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:46:49.690

将多个参数传递给转换器的最简单方法是使用 MultiBinding

C＃

```
public class TotalWeightConverter : IMultiValueConverter
{
    public override object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        ResultType result;
        var room =(RoomType)value[0];
        var department = (DepartmentType)value[1];

        // Do something
        return result;
    }

    public override object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        // Do somethig
        return new object[2];
    }
} 
```

XAML：

```
<DataGridTextColumn Header="Total Personnel Weight">
    <DataGridTextColumn.Binding>
        <MultiBinding Converter={StaticResource TotalWeightConverter}>
            <Binding Path="Room" />
            <Binding Path="Department" Mode="OneWay"/>
        </MultiBinding>
    </DataGridTextColumn>
</DataGridTextColumn> 
```

但是最好的方法是由 HighCore 描述的

# django - 如何在 DJango 管理界面中显示 ForeignKey 反向查找列表？

> ID：16070809
> 
> 赞同：29
> 
> 时间：2013-04-17T21:45:49.887
> 
> 标签：django, django-admin, foreign-keys, foreign-key-relationship

我有几个模型：

```
class Customer(models.Model):
    customer_name = models.CharField(max_length=200)

    def __unicode__(self):
        return self.customer_name

    class Meta:
        ordering = ('customer_name',)

class Unit(models.Model):
    unit_number = models.IntegerField()
    rentable = models.BooleanField()
    owner = models.ForeignKey(Customer, related_name='units', blank=True, null=True)

    def __unicode__(self):
        return str(self.unit_number)

    class Meta:
        ordering = ('unit_number',) 
```

当我添加单位时，管理界面工作正常（我可以选择将其分配给哪个客户）但是当我在 DJango 管理界面中创建/编辑客户时，它没有列出任何可供选择的单位从。如何启用该部分中的查找以匹配创建/编辑客户区域中的查找？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-18T02:13:04.773

默认情况下，ModelAdmin 只会让您管理模型“本身”，而不是相关模型。为了编辑相关的 Unit 模型，您需要定义一个“InlineModelAdmin” - 例如 admin.TabularInline - 并将其附加到您的 CustomerAdmin。

[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#inlinemodeladmin-objects](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#inlinemodeladmin-objects)

例如，在您的 admin.py 中：

```
from django.contrib import admin
from models import Customer, Unit

class UnitInline(admin.TabularInline):
    model = Unit

class CustomerAdmin(admin.ModelAdmin):
    inlines = [
        UnitInline,
    ]
admin.site.register(Customer, CustomerAdmin) 
```

# android - 是否可以从 apk dalvik 替换字符串（压缩）代码

> ID：16070810
> 
> 赞同：0
> 
> 时间：2013-04-17T21:45:53.750
> 
> 标签：android, python, apk

我想从 hex/dalvik apk 代码中替换一个字符串。我意识到这需要找到字符串从 Android 类项目转换为签名的 apk 文件时如何编码。

这可能吗？好吧，我知道在代码中，一切皆有可能.. 但是这里有人知道怎么做吗？我了解到，可以使用简单的 zip 存档（例如替换 SystemUI.apk 的图标）在 Windows 平台上删除和添加 .apk 文件，而不会破坏 apk .. 但是如何以编程方式进行呢？特别是在python中？

有人对如何做到这一点有任何想法吗？

我努力了：

```
import zipfile
zf=zipfile.ZipFile('APK.apk') # my zip file
for filename in ['classes.dex']: # zipped file content file
 data=zf.read(filename)
data=data.replace('mystring','newstring') #replace string within the content file
file=open('classes.dex','wb')
file.write(data) # write NEW content file to local disk
file.close()
zin=zipfile.ZipFile('APK.apk','r')       # create zip in and zip out
zout=zipfile.ZipFile('APK.apk','w')      # iterate through zipped contents and
for item in zin.infolist():              # copy all EXCEPT 'classes.dex' content file
  buffer=zin.read(item.filename)
  if (item.filename!='classes.dex'):
    zout.writestr(item,buffer)
zout.close()
zin.close()
zf=zipfile.ZipFile('APK.apk',mode='a')   # finally, add new content file from my local disk
zf.write('classes.dex',arcname='classes.dex')
zf.close() 
```

这将获取原始 APK.apk 文件，并在其中一个压缩内容文件中重写一个字符串，然后将其重新打包回 APK.apk。问题是：ORIGINAL APK.apk = 170 kb NEW APK.apk = 399 kb and NOT INSTALLABLE，apk 被“损坏”，Android 系统不会安装 apk。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T09:24:15.823

您不能添加字节数高于原始字符串的字符串。您必须用相同大小的字符串替换特定大小的字符串。试试幸运补丁。它仅替换您 Android 中的字符串。无需将其带到您的电脑上。:-)

# sockets - TCP 端口复制器

> ID：16070821
> 
> 赞同：1
> 
> 时间：2013-04-17T21:46:32.920
> 
> 标签：sockets, networking, redirect, tcp

我有一个在 TCP 端口上侦听连接并处理接收到的数据的服务。我现在需要拆分这些数据并在“实时”和“测试”机器上进行处理。

我想让这成为每台机器的近乎完美的复制，我认为最简单的做法是接收到“复制器”服务，该服务只需将数据复制并重新传输到其他两个端点（其中一个能够发送数据回源）

有没有软件可以做到这一点？平台是 Windows Server。我考虑过自己写这个，听起来并不难，但如果已经存在解决方案，我更愿意使用它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:53:27.413

您打算如何解决以下 2 个问题：

1.  如果你真的有 TCP 协议，你肯定会有 TCP 开销的差异。
2.  因为它是 TCP，所以两台机器都会给出答案。你将如何处理这件事？

我的建议是真正改进客户端，使其生成 2 个具有适当客户端处理的流。也许您的解决方案有一些细节，但我看不到为一般情况做正确事情的方法。

如果您认为您的案例有资格进行此类镜像，那么[这可能](http://www.bjou.de/blog/2008/05/howto-copyteeclone-network-traffic-using-iptables/)会有所帮助。看起来还有[另一个问题](https://stackoverflow.com/questions/7247668/duplicate-tcp-traffic-with-a-proxy)与您的问题非常相似，它包含几个链接。

以下是对 iptables 解决方案细节[的一些评论。](https://unix.stackexchange.com/questions/15870/iptables-port-mirroring)

[这是另](https://serverfault.com/questions/309583/duplicate-incoming-tcp-traffic-on-debian-squeeze)一种基于`netcat`效用的方法。

# javascript - 使用 Cookie 记住用户偏好

> ID：16070826
> 
> 赞同：0
> 
> 时间：2013-04-17T21:47:01.723
> 
> 标签：javascript, cookies

我想在进入 foo.com 的网站主页时为用户提供 2 个选项。

按钮 1：继续使用英语（将他们带到 foo.com/english.html）

或者

按钮 2：继续西班牙语（将他们带到 foo.com/spanish.html）

还会出现一个复选框，如果 check 会记住您的选择，并且在返回 foo.com 时，您将根据之前的选择直接转到english.html 或 spanish.html。

我以前从未使用过 cookie，并且很难思考我将如何做到这一点。我看到的 cookie 示例是基本的，这对我来说似乎更复杂。

任何帮助是极大的赞赏！提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T21:58:32.737

如果您发现难以[谨慎](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)处理它们，有许多 cookie 库和 jquery 扩展可用，G* 搜索应该返回很多。

一对是：

[Cookies.js](https://github.com/ScottHamper/Cookies)
[jQuery 饼干](https://code.google.com/p/cookies/)

cookie 的替代方法是使用[HTML5 本地存储](http://diveintohtml5.info/storage.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T22:02:10.720

根据您的问题，我假设您希望完全从 Javascript 执行此任务。[`document.cookie`](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)对于那些不精通 Javascript 的人来说，使用传统方法可能会很乏味。如果你已经在使用 jQuery，我推荐[jQuery cookie 插件](https://github.com/carhartl/jquery-cookie)。

可以在页面初始化时检查其中任何一个，并`if`执行一个简单的语句来更改浏览器窗口的位置，从而有效地重定向到不同的页面。

# java - 使用 Spring security 3 仅使用用户名对 REST 用户进行身份验证

> ID：16070827
> 
> 赞同：1
> 
> 时间：2013-04-17T21:47:05.473
> 
> 标签：java, spring, rest, authentication, spring-security

这就是交易。我必须仅使用应用程序用户的用户名进行单一身份验证，并且必须使用 angular、spring 和 mysql。我已经有一个接收电子邮件（用户名）的 REST POST 服务，我必须检查该用户是否存在于数据库的用户表中，并且我必须使用以下 JSON 结构进行响应：

```
{"response":{"loggedIn":"true"}} or {"response":{"loggedIn":"false"}} 
```

我在spring security上找到了一个使用**http-basic**身份验证的示例并且工作正常，问题是该方法对我不起作用，因为该方法需要用户名和密码，但只有我需要一个用户名并检查该用户是否在数据库中。

我的问题是如何使用我的 REST 服务和仅使用用户名字段的单一身份验证使用 Spring Security 进行身份验证？

这是我的 spring-context.xml

```
<security:http pattern="/login" security="none">
</security:http>

<security:http auto-config="true">
    <security:intercept-url pattern="/**" access="ROLE_REST" />
    <security:http-basic />
    <security:logout logout-url="/logout" logout-success-url="/" invalidate-session="true" delete-cookies="true"  />
</security:http>

<security:authentication-manager>
    <security:authentication-provider user-service-ref="watUserDetailService">
        <security:password-encoder hash="md5" />
    </security:authentication-provider>
</security:authentication-manager> 
```

这是我的休息控制器：

```
@Controller
public class UserController {

@Autowired
ILoginService loginService;

@RequestMapping(value = "/login", method = RequestMethod.POST, produces = "application/json", consumes = "application/json")
public @ResponseBody IResponse login(@RequestBody @Valid LoginForm form, BindingResult result) {
    IResponse loginReponse = null;

    if (result.hasErrors()) {
        ResponseError errorReponse = new ResponseError();
        errorReponse.getError().put("key", KeyConstants.NOT_VALID_EMAIL_ERROR_KEY );
        loginReponse = errorReponse;
    } else {
        Response response = new Response();
        User loggedUser =  null;
        try {
            loggedUser = loginService.login(form.getEmail());
            if (loggedUser != null) {
                response.getResponse().put("loggedIn", Boolean.TRUE.toString());
            }
            loginReponse = response;
        } catch (ServiceException e) {
            response.getResponse().put("loggedIn", Boolean.FALSE.toString());
            loginReponse = response;
        }

    }
    return loginReponse;
} 
```

}

谢谢，您的有用帮助，对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T01:53:18.553

在 Spring Security 中，您可以添加自定义身份验证器。您需要一个简单地忽略密码中的任何内容并返回 true 的密码。然后你传递一个空字符串作为密码，就是这样。

# python-2.7 - 创建具有可变属性的类

> ID：16070836
> 
> 赞同：0
> 
> 时间：2013-04-17T21:47:41.220
> 
> 标签：python-2.7

嗨我有兴趣创建一个有点像这样的类

**- 班主任**

*   导师名字
*   导师姓氏
*   导师年龄
*   导师主要科目
*   辅导中学科目

我的主要问题是科目，导师可能有 1 到 10 个小学科目，同样有 1 到 10 个中学科目，并非所有导师都有相同数量的小学和中学科目，所以我试图创建的课程需要足够灵活，可以容纳任意数量的主要和次要主题组合。如何最好地创建我可以像这样使用的数据结构

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:50:32.330

如果您想要列表中的多种数据类型，请使用[List](http://docs.python.org/2/tutorial/datastructures.html#)或[元组。](http://docs.python.org/release/1.5.1p1/tut/tuples.html)

```
class Tutor:
    firstName = ""
    lastName = ""
    age = 0
    primarySubjects = []
    secondarySubjects = [] 
```

# cassandra - Cassandra 列族上次访问时间

> ID：16070837
> 
> 赞同：1
> 
> 时间：2013-04-17T21:47:42.880
> 
> 标签：cassandra

有没有办法检查最后一次访问以获取或插入任何记录的列族是什么时候？我是 cassandra 的新手，如果这听起来很愚蠢但在这里或网络上找不到任何答案，请道歉？请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T01:16:27.550

不，Cassandra 没有内置的方法来执行此操作。当然，每次读取或写入列族时，您始终可以更新包含时间戳的列（在其他一些专用列族中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T04:04:30.220

1.  我被建议的一种可能的解决方案是，使用 cqlsh，'Select * from Limit 1'，这将告诉我 CF 是否为空，因此未使用，或者是否有一些行，因此使用。愚蠢但在没有完美解决方案的情况下会起作用。

2.  可以将文件访问时间检查到 SSTables 中，并确定最后一次修改这些文件的时间。

希望能帮助到你。

# jquery - 用于调用插件的 Jquery 通配符选择器？

> ID：16070839
> 
> 赞同：0
> 
> 时间：2013-04-17T21:48:00.460
> 
> 标签：jquery, wildcard, jquery-cycle

为了简短起见，我尝试为 jquery 循环插件选择#small-cycle1、#small-cycle2 等。使用通配符选择它似乎不起作用，因为它将所有周期的寻呼机导航写入每个周期。

下面是我现在如何解决这个问题。

```
 $('#small-cycle1').cycle({ 
            speed:       0, 
            timeout:     0,
            pager:      '#nav1',
            pagerEvent: 'mouseover', 
            pauseOnPagerHover: true
        });
        $('#small-cycle2').cycle({ 
            speed:       0, 
            timeout:     0,
            pager:      '#nav2',
            pagerEvent: 'mouseover', 
            pauseOnPagerHover: true
        });
        $('#small-cycle3').cycle({ 
            speed:       0, 
            timeout:     0,
            pager:      '#nav3',
            pagerEvent: 'mouseover', 
            pauseOnPagerHover: true
        });
        $('#small-cycle4').cycle({ 
            speed:       0, 
            timeout:     0,
            pager:      '#nav4',
            pagerEvent: 'mouseover', 
            pauseOnPagerHover: true
        });
        $('#small-cycle5').cycle({ 
            speed:       0, 
            timeout:     0,
            pager:      '#nav5',
            pagerEvent: 'mouseover', 
            pauseOnPagerHover: true
        }); 
```

是否可以在选择器和寻呼机中使用通配符：选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T22:11:01.043

我不熟悉循环插件，但这段代码应该选择你想要的所有元素。只需将“cycleCount”设置为页面上的幻灯片数量，它就会循环播放它们。

```
var cycleCount = 5;
for(var i = 1; i <= cycleCount;i++){
    $('#small-cycle'+i).cycle({ 
        speed:       0, 
        timeout:     0,
        pager:      '#nav'+i,
        pagerEvent: 'mouseover', 
        pauseOnPagerHover: true
    });
} 
```

# iphone - 来自带有 http 标头的 url 的 iOS 流歌曲

> ID：16070843
> 
> 赞同：2
> 
> 时间：2013-04-17T21:48:14.917
> 
> 标签：iphone, ios, objective-c, http-headers, audio-streaming

我有一个服务器上有歌曲。我想从这个服务器流式传输到我的 iphone，我意识到我可以用`AVPlayer`and来做到这一点`initWithUrl`。但是，问题是 URL 需要一个身份验证标头。有什么方法可以发送带有歌曲的 http 标头来流式传输吗？

如果没有，有人知道任何解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T21:50:54.867

[NSMutableURLRequest](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html)让您使用类似字典的界面设置标题。见`setValue:forHTTPHeaderField:`。您可以使用它自己发出请求，使用 NSData 将文件保存到文件 URL `writeToFile:atomically:`。然后将文件 url 发送到 AVPlayer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T23:37:50.163

照 danh 说的做 - 使用 NSMutableURLRequest 传递身份验证数据，使用 NSURLConnection 将音频数据写入文件。您可以在 didReceiveData: 中查看您下载了多少数据。一旦文件“足够大”（你必须决定这意味着什么），你可以使用 AVAudioPlayer 的 initWithContentsOfURL 播放它（在那里传递文件 URL）。我在商店里有一个使用这种技术的应用程序，它运行良好。一条建议，一些文件会导致 AVAudioPlayer 返回一个奇怪的错误（[错误代码] == 2003334207）。如果你明白了，等到文件完全下载，然后它就会播放。

# javascript - 如果元素将离开屏幕，则尝试翻转输出

> ID：16070851
> 
> 赞同：1
> 
> 时间：2013-04-17T21:48:44.747
> 
> 标签：javascript, jquery, dom, position

```
var $elem = elem;
var position = $elem.position();
var output = {};
var winX = $(window).height();
var winY = $(window).width();

output.width = $elem.width();
output.height = $elem.height();
output.bottomLeftX = position.left;//left top
output.bottomLeftY = position.top + output.height;//left bottom
output.bottomRightX = position.left + output.width;//right top
output.bottomRightY = position.top + output.height;//right bottom

if(position.left > 0 && position.top > 0 && position.left+output.width < winY && position.top+output.height < winX)
{
    //something
}
else
{
    alert('not gonna fit')
}

return output; 
```

无论我尝试哪种方式，我似乎都无法做到这一点，以上是我来到这里试图获得一些帮助之前的最后一次尝试。我要做的是获取一个元素在 DOM 中的位置，并根据它的位置最终显示另一个元素。有点像工具提示，但在某些方面有所不同。反正。我试图弄清楚如果我需要如何翻转我的输出，以防将要显示的元素离开屏幕，即使它会，我想从不同的方向显示它。 .

当前触发显示隐藏元素的元素。使该元素左上边缘接触触发元素左下边缘。如果它要离开屏幕，例如触发元素在页面底部附近向下并且向右我希望将要显示的元素与其右下边缘接触触发器的右上边缘对齐元素。或者，如果触发元素位于页面的左下角，我希望它与触发元素的左上边缘对齐。基本上我需要覆盖找到边缘并将元素保留在窗口中的基础。目前显示的元素是 200px x 550px 宽，我不确定这是否特别符合上面代码中的整体需求。

任何解决这个问题的好方法，而不用想出十几个逻辑来说嘿，这会从窗口/视口的任何一个边缘掉下来，我们需要重新定位它。匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:03:56.870

好吧，在这里没有任何帮助，并且玩了很多游戏并感到头疼，我想出了一个适合我的解决方案。我最终将上面的部分放入它自己的函数中，以衡量正在传递的某些方面，然后我创建了一个函数来测量正在显示的元素并获得其在屏幕上的位置。部分问题在于，由于它被动态添加到 dom，然后`display:none`脚本的样式设置无法确定它的放置位置、内容或方式，直到它实际显示。所以在我展示了元素之后，我会在它上面运行第二个函数，以便在需要时根据需要移动它。

```
function tippedOffElemPosition(elem)
{
    var $elem = elem;
    var $msg_elem = $elem.next('.tippedOff_msg');
    var position = $elem.position();
    var offset = $elem.offset();

    var output = {};
    var win_height = $(window).height();
    var win_width = $(window).width();

    output.win_height = win_height;
    output.win_width = win_width;
    //hover trigger
    output.elem_width = $elem.width();
    output.elem_height = $elem.height();
    output.elem_left_top = position.left;//left top
    output.elem_left_bottom = position.top + output.elem_height;//left bottom
    output.elem_right_top = position.left + output.elem_width;//right top
    output.elem_right_bottom = position.top + output.elem_height;//right bottom
    output.elem_offset_left = offset.left;
    output.elem_offset_top = offset.top;
    //final position (default)
    output.setting_top = output.elem_left_bottom;
    output.setting_left = output.elem_left_top;

/*
    debugStr = '';
    debugStr += 'ref = '+$elem.data('ref')+'<br>';
    debugStr += 'win_height = '+win_height+'<br>';
    debugStr += 'win_width = '+win_width+'<br>';
    debugStr += 'output.elem_width = '+output.elem_width+'<br>';
    debugStr += 'output.elem_height = '+output.elem_height+'<br>';
    debugStr += 'output.elem_left_top = '+output.elem_left_top+'<br>';
    debugStr += 'output.elem_left_bottom = '+output.elem_left_bottom+'<br>';
    debugStr += 'output.elem_right_top = '+output.elem_right_top+'<br>';
    debugStr += 'output.elem_right_bottom = '+output.elem_right_bottom+'<br>';
    debugStr += 'output.elem_offset_left = '+output.elem_offset_left+'<br>';
    debugStr += 'output.elem_offset_top = '+output.elem_offset_top+'<br>';
    debugStr += 'output.setting_top = '+output.setting_top+'<br>';
    debugStr += 'output.setting_left = '+output.setting_left+'<br><br>';
    $('#debug').html(debugStr);
*/

    return output;
}
function tippedOffMsgElemPos(msg_elem, elPos)
{
    $msg_elem = msg_elem;
    var msg_position = $msg_elem.position();
    var msg_offset = $msg_elem.offset();
    var msg_width = $msg_elem.width();
    var msg_height = $msg_elem.height();
    var msg_right_side = msg_offset.left + msg_width;
    var msg_bottom = msg_offset.top + msg_height;
    //$('#debug').append('<br><br>msg_right_side = '+msg_right_side+'<br>msg_bottom = '+msg_bottom+'<br>elPos.elem_right_top ='+elPos.elem_right_top);

    var final_top = elPos.setting_top;
    var final_left = elPos.setting_left;

    if(msg_right_side > elPos.win_width)
    {
        final_left = elPos.setting_left-(msg_width-elPos.elem_width);
    }
    if(msg_bottom > elPos.win_height)
    {
        final_top = elPos.elem_offset_top-(msg_bottom+elPos.elem_height);
    }
    //$('#debug').append('<br>final_left = '+final_left);
    $msg_elem.css({"top":final_top, "left":final_left}).show();
} 
```

是我的最终结果。总而言之，我正在尝试为 jquery 制作一个工具提示插件，我可以根据自己的需要进行定制，并且当你第一次开始时，它不一定需要元素中的硬编码消息。我希望在不久的将来得到的最终结果会更加详尽，但这对我来说已经足够好了。

# jquery - 通过代码选择导航栏的值（jquery）

> ID：16070854
> 
> 赞同：0
> 
> 时间：2013-04-17T21:49:04.090
> 
> 标签：jquery, select, navbar

我的页面顶部有一个导航栏，人们可以在其中选择一个城市。每次他们关闭应用程序时，他们都必须重新选择城市，因为我找不到在启动应用程序时自动选择（视觉上）正确城市的方法。

我怎样才能做到这一点？

```
<div data-role="navbar">
<ul>
       <li id="navBrugge"><a href="#" data-transition="none" data-icon="home"> Brugge </a> </li>
       <li id="navGent"><a href="#" data-transition="none" data-icon="home"> Gent </a></li>
        <li id="navKortrijk"><a href="#" data-transition="none" data-icon="home"> Kortrijk </a></li>
        </ul>
    </div> 
```

# html - 表格在 div html 中未正确显示

> ID：16070856
> 
> 赞同：0
> 
> 时间：2013-04-17T21:49:14.110
> 
> 标签：html, css

我在 div 中的表格有这个问题。我创建了两张桌子，目标是让它们彼此相邻。它以一个低于另一个而告终。尝试尽可能多地使用 CSS，但我对它没有那么丰富的经验。代码在这里：

```
#contactdetails_table{
    width: 500px;
    height: 190px;
/*  border: solid #234b7c 3px; */
    background-color: #FFC3CE;
    border-radius: 15px;
    direction: rtl;
    float: left;
    color: white;
    font-size: large;
    position: relative;
    overflow: scroll;
} 
```

这是第二个表的代码，它设法低于当前表：

```
<table style="position:relative; float:left;" cellpadding="10" cellspacing="10">
                            <tr>
                                <td>الايميل:</td>
                                <td><?php echo $profiledetails->email; ?></td>
                            </tr>
                            <tr>
                                <td>المدينة:</td>
                                <td><?php echo $profiledetails->city; ?></td>
                            </tr>
                            <tr>
                                <td>الهاتف:</td>
                                <td><?php echo $profiledetails->telephone; ?></td>
                            </tr>
                            <tr>

                            </tr>
                        </table> 
```

感谢帮助 ：）

注意：包括第一个表：

```
<div id="contactdetails_table">
                            <table  cellpadding="10" cellspacing="10" >
                            <tr>
                                <td>الاسم الكامل:</td>
                                <td><?php echo $profiledetails->fullname; ?></td>
                            </tr>
                            <tr>
                                <td>اسم المستخدم:</td>
                                <td><?php echo $profiledetails->username; ?></td>

                            </tr>

                            <tr>
                                <td>الجوال:</td>
                                <td><?php echo $profiledetails->mobile; ?></td>
                                                            </tr>

                            <tr>
                                <td>العنوان:</td>
                                <td><?php echo $profiledetails->address; ?></td>
                            </tr>
                        </table>

                        <table style="position:relative; float:left;" cellpadding="10" cellspacing="10">
                            <tr>
                                <td>الايميل:</td>
                                <td><?php echo $profiledetails->email; ?></td>
                            </tr>
                            <tr>
                                <td>المدينة:</td>
                                <td><?php echo $profiledetails->city; ?></td>
                            </tr>
                            <tr>
                                <td>الهاتف:</td>
                                <td><?php echo $profiledetails->telephone; ?></td>
                            </tr>
                            <tr>

                            </tr>
                        </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:53:20.330

因为您的第二张桌子在第一张桌子之后，所以它不会在它旁边。您应该将第一个表格浮动到右侧或颠倒表格在您的标记中出现的顺序。

[这类似于这个问题](https://stackoverflow.com/questions/16047291/div-clears-float-even-though-no-clear-property-is-set/16047354#16047354)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-15T19:18:37.567

确保外部 div（父级）上也没有 height 属性。如果内容比外部 div 长，它们应该突出，直到高度被移除。这不止一次发生在我身上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T22:06:50.407

默认情况下，表格显示为块元素（因此它们为什么堆叠在一起）。

您可以尝试将 #contactdetails_table 中的所有表格显示为内联块元素。

就像是

```
#contactdetails_table table{

    /* display as inline elements */
    display: inline-block;
    /* this will push the tables to the top of the div */
    vertical-align:top;

} 
```

对于 IE 7 及以下版本，您应该使用样式表

```
 display: inline;
      zoom:1; 
```

# sql - SQL Server：从一张表的 9 列中返回最常出现的值（和计数）

> ID：16070860
> 
> 赞同：1
> 
> 时间：2013-04-17T21:49:21.043
> 
> 标签：sql, sql-server, unpivot

我有一个带有表 ( `ExpenseFormItems`) 的 SQL Server 2005 数据库，该表（除其他外）跨 11 列（`fromtravel`, `totravel`, `totravel1`, `totravel2`.... `totravel3`）存储街道地址`totravel9`。

基本上是一次有 11 次总行程/停留的旅行，以及谷歌计算的里程/等（这里不重要）。

我希望能够在所有 11 列中返回（比如 15 个）最常出现的地址，以及它们出现的次数。

所以基本上

```
[TO]             [Occurrances]
==============
address1               328
address2               233
address3               112
....
address15               23 
```

我猜这里将使用某种 un/pivot，但我从来没有做过任何足够酷的事情来使用过一个，所以我没有掌握如何将（我读过的关于它们的内容）应用于这个案例.

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:59:44.480

听起来您想取消透视数据，该数据将从列中获取数据并将其转换为行。

基本结构将是：

```
select col, address
from ExpenseFormItems
unpivot
(
  address
  for col in (fromtravel, totravel, totravel1,
              totravel2, totravel3, totravel4,
              totravel5, totravel6, totravel7, 
              totravel8, totravel9)
) unpiv 
```

然后，如果您想查找出现次数，则可以使用：

```
select address, count(address) occurrences
from
(
  select col, address
  from ExpenseFormItems
  unpivot
  (
    address
    for col in (fromtravel, totravel, totravel1,
                totravel2, totravel3, totravel4,
                totravel5, totravel6, totravel7, 
                totravel8, totravel9)
  ) unpiv
) d
group by address 
order by occurrences desc; 
```

如果您想返回 15 个最常见的地址，那么您可以`TOP 15`在`SELECT`.

# mysql - 如何优化以下查询

> ID：16070861
> 
> 赞同：-5
> 
> 时间：2013-04-17T21:49:23.230
> 
> 标签：mysql, sql

```
select 
   c.std_date,c.conf_link,c.conf_link as 
   link,c.conf_id,c.url_id,c.entry_source,c.data_source,c.title,c.conf_domain,
   c.descrip, c.std_loc, c.std_practices,c.region, co.company_id,co.company,co.home_url 
from 
   conferences c, companies co 
where c.org_id= co.company_id and c.org_id in   
    (12,47,173,120,102,83,95,172,200,78,199,523,134,123,30,185,103,202,
     159,133,178,49,161,146,17,212,136,43,107,147,142,3, 205,171,177,443,175,74,156,41,42,128,5,7,62,37,195,68,89,8,39,85,126,36,24,206,208,201,150,152,168,59,97,28,11,116,140,98,117,51,174,93,192,50,617,176,101,194,527,61,179,170,145,40,92,257,149,48,88,486,20,111,106,203,19,31,163,81,25,38,623,628,642,643,644,645,647,677,711,712,713,6173,6174,6176,6177,6184,6185,6186,6189,6191,6207,6210,6211,6212,6214,6215,6217,6218,6219,6222,6223,6224,6294,6297,6298,6300,6301,6302,7468,7469,7471,7472,7473,7474,7475,7476,7477,7478,7479,7480,7481,7482,7483,7484,7489,7490,7491,7493,7494,7495,7496,7497,7498,7499,7500,7501,7502,7503,7504,7505,7506,7507,7508,7509,7510,7511,7512,7513,7514,7515,7516,7517,7518,7519,7520,7521,7522,7523,7525,7526,7527,7528,7529,7530,7531,7532,7533,7534,7535,7536,7537,7538,7539,7540,7541,7542,7543,7544,7545,7546,7547,7548,7549,7550,7551,7552,7553,7554,7555,7556,7557,7558,7559,7560,7562,7566) 
and conf_id !='' and (region !='123' and region not like 'webinar%') and std_date >= '2013-04-17' and std_date <= '2013-04-24' and (data_source like 'E%' OR data_source like 'A%') and region != '' and org !='' and title not like '%groupcast%' and relevance >= 0 order by std_date desc limit 3500 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:58:55.703

这应该是你需要的。您不必`id`手动输入 s

```
where c.org_id= co.company_id and c.org_id in (Select id from Conferences) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T22:04:28.157

好吧，这很容易：

*   先看“解释……”

*   看，是什么导致了太多的行

*   重新制定以获得更好的结果。

尽管有日期范围，我看不到真正的限制。std_date 是日期时间字段吗？然后添加时间 00:00:00 可能会有所帮助（如果有任何索引的话）。我也更喜欢内部连接，

从会议 c
内部加入公司 co on c.org_id= co.company_id

但这不会提高速度。

“喜欢……”，尤其是“不喜欢……”是嫌疑犯。

如果只有一个候选者（如果该字段上有任何索引，则使用索引），如果像 E% 或像 A% 这样的条件要快得多，请尝试 - 然后对两个单个查询进行 UNION。

“data_source like” 可以从 text-index 中获得一些帮助。

# tfs - 如何在 Visual Studio 2010 的团队资源管理器窗口中将项目（不是文件夹）添加到“我的收藏夹”？

> ID：16070862
> 
> 赞同：1
> 
> 时间：2013-04-17T21:49:31.410
> 
> 标签：tfs, favorites, team-explorer

更具体地说，我有从多个团队项目中提取工作项的查询。由于它与任何一个团队项目都没有特别关联，因此将其放在“我的收藏夹”中比将其放在“我的查询”文件夹中更具组织意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T14:57:23.040

在团队资源管理器中，您只需右键单击查询并选择添加到收藏夹。在 Web 访问中，您还可以将特定的工作项添加到您的收藏夹（这在 VS 团队资源管理器中不可用）

# php - 谷歌日历 API PHP 致命错误

> ID：16070867
> 
> 赞同：0
> 
> 时间：2013-04-17T21:50:01.830
> 
> 标签：php, google-calendar-api

即使在单击并连接并刷新浏览器之后，我每次都会得到“连接我”链接。另外，我收到此错误，

正如下面答案中所建议的，我已经进行了更改，并在此处添加了它们。这产生了这个新错误：

致命错误：未捕获的异常“Google_ServiceException”和消息“调用 GET 时出错” [https://www.googleapis.com/calendar/v3/users/me/calendarList?key=AIzaSyDXm2epulkFrOgluO0dppEBknimmvpfKxY](https://www.googleapis.com/calendar/v3/users/me/calendarList?key=AIzaSyDXm2epulkFrOgluO0dppEBknimmvpfKxY)：（401）登录需要'在####.org/google-api-php-client/src/io/Google_REST.php:66 堆栈跟踪：#0 ####.org/google-api-php- client/src/io/Google_REST.php(36): Google_REST::decodeHttpResponse(Object(Google_HttpRequest)) #1 ####.org/google-api-php-client/src/service/Google_ServiceResource.php(177) : Google_REST::execute(Object(Google_HttpRequest)) #2 #####/google-api-php-client/src/contrib/Google_CalendarService.php(154): Google_ServiceResource->__call('list', Array) # 3 ####/avl/index2.php(44): Google_CalendarListServiceResource->listCalendarList() #4 {main} 在 /######.org/google-api-php-client/src/io/ 中抛出第 66 行的 Google_REST.php

```
<?php
require_once '../google-api-php-client/src/Google_Client.php';
require_once '../google-api-php-client/src/contrib/Google_CalendarService.php';
session_start();

$client = new Google_Client();
$client->setApplicationName("#####");

// Visit https://code.google.com/apis/console?api=calendar to generate your
// client id, client secret, and to register your redirect uri.
$client->setClientId('327425587799.apps.googleusercontent.com');
$client->setClientSecret('*******');
$client->setRedirectUri('http://www.######.net/oauth2callback');
$client->setDeveloperKey('*******');
$client->setUseObjects(true); 

$cal = new Google_CalendarService($client);
if (isset($_GET['logout'])) {
unset($_SESSION['token']);
}

if (isset($_GET['code'])) {
$client->authenticate($_GET['code']);
$_SESSION['token'] = $client->getAccessToken();
header('Location: http://' . $_SERVER['HTTP_HOST'] . $_SERVER['PHP_SELF']);
}

if (isset($_SESSION['token'])) {
$client->setAccessToken($_SESSION['token']);
}

if ($client->getAccessToken()) {
$calList = $cal->calendarList->listCalendarList();
print "<h1>Calendar List</h1><pre>" . print_r($calList, true) . "</pre>";

$_SESSION['token'] = $client->getAccessToken();
} else {
$authUrl = $client->createAuthUrl();
print "<a class='login' href='$authUrl'>Connect Me!</a>";
}

$calendarList = $cal->calendarList->listCalendarList();
while(true){
foreach($calendarList->getItems()as $calendarListEntry){
  echo $calendarListEntry->getSummary();
}
$pageToken = $calendarList->getNextPageToken();
if($pageToken){
  $optParams = $cal->calendarList->listCalendarList($optParams);
}else{
  break;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:03:10.837

看来您在应该有 $cal 的地方使用 $service。

`$calendarList = $service->calendarList->listCalendarList();`应该是这样`$calendarList = $cal->calendarList->listCalendarList();`

并且`$calendarList = $service->calendarList->listCalendarList($optParams);`应该是`$calendarList = $cal->calendarList->listCalendarList($optParams);`

# excel-formula - 将excel中的时间戳转换为日期

> ID：16070868
> 
> 赞同：56
> 
> 时间：2013-04-17T21:50:05.453
> 
> 标签：excel-formula

我有一个非常大的 Excel 电子表格，其中有一列时间戳。有谁知道将其转换为日期？有我可以使用的功能吗？我尝试了格式化单元格日期，但这不起作用。我的文件是 91,568 KB。如果有更简单的方法，那就太好了。我对想法持开放态度。

先感谢您 ：）

PS 我不会任何编程语言

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-04-17T22:07:26.287

使用此公式并将格式设置为所需的时间格式：

```
=(((COLUMN_ID_HERE/60)/60)/24)+DATE(1970,1,1) 
```

来源：[http](http://www.bajb.net/2010/05/excel-timestamp-to-date/) ://www.bajb.net/2010/05/excel-timestamp-to-date/ 在 libreoffice 中测试

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2018-10-18T14:21:19.683

时间戳是自纪元时间 (01/01/1970) 以来经过的时间，所以基本上我们必须以天为单位转换这个时间，并添加纪元时间，以获得任何 Excel 等电子表格软件的有效格式。

*   以毫秒为单位的时间戳（例如：1488380243994）

    使用这个公式：

    ```
    =A1/1000/86400+25569 
    ```

    使用这个格式化程序：

    ```
    yyyy-mm-dd hh:mm:ss.000 
    ```

*   以秒为单位的时间戳（例如：1488380243）

    使用这个公式：

    ```
    =A1/86400+25569 
    ```

    使用这个格式化程序：

    ```
    yyyy-mm-dd hh:mm:ss 
    ```

`A1`您的列标识符在哪里。鉴于自定义格式化程序允许在显示的数据中不丢失精度，但您当然可以使用与您的需求相对应的任何其他日期/时间。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-04-24T20:36:23.447

如果您在 Libre 办公室收到错误 509，您可以在 DATE() 函数中替换`,`为`;`

```
=(((COLUMN_ID_HERE/60)/60)/24)+DATE(1970;1;1) 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2018-11-22T10:31:47.090

下面的公式在 MS EXEL 中对我起作用

```
=TEXT(CELL_VALUE/24/60/60/1000 + 25569,"YYYY-MM-DD HH:MM") 
```

CELL_VALUE 是以毫秒为单位的时间戳

[这里](https://support.office.com/en-us/article/text-function-20d5ac4d-7b94-49fd-bb38-93d29371225c)是文本功能的解释。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-02-22T17:29:31.450

如果您的文件非常大，请尝试使用以下公式：=A1 / 86400 + 25569

A1 应该根据您的需要更换。应该比 =(((COLUMN_ID_HERE/60)/60)/24)+DATE(1970,1,1) 工作得更快，因为需要的计算次数更少。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-04-15T19:51:56.990

```
=(((A1/60)/60)/24)+DATE(1970,1,1)+(-5/24) 
```

假设`A1`是您的时间戳所在的单元格，并且不要忘记调整以考虑您所在的时区（5 假设您在 EST）

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-09-19T06:21:37.780

这个`DATE`东西不适用于所有 Excel 版本。

```
=CELL_ID/(60 * 60 * 24) + "1/1/1970" 
```

而是一个保存赌注。
引号是防止 Excel 计算术语所必需的。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-07-23T07:15:19.383

注意纪元时间的位数。通常它们是十个 (1534936923) ，然后使用：

```
=(A1 / 86400) + 25569 
```

对于纪元时间的十三位数 (1534936923000) 调整公式：

```
=(LEFT(A1,LEN(A1)-3) / 86400) + 25569 
```

避免

```
################################### 
```

负数或过大的日期或时间显示为######

[在https://www.epochconverter.com/](https://www.epochconverter.com/)上查看更多信息

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-10-18T14:44:56.413

@NeplatnyUdaj 的答案是正确的，但考虑到 Excel 需要设置语言的函数名称，在我的例子中是德语。然后你需要使用“DATUM”而不是“DATE”：

```
=(((COLUMN_ID_HERE/60)/60)/24)+DATUM(1970,1,1) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-03T08:28:44.697

这对我有用：

```
=(col_name]/60/60/24)+(col_name-1) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-15T13:20:14.257

AD 刻度为日期时间格式：=A1/864000000000 - 109205

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-01-31T07:30:43.390

我在 LibreOffice Calc 中得到了结果：

=DATE(1970,1,1)+Column_id_here/60/60/24

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2019-12-23T08:12:27.993

使用这个简单的公式。有用。

假设时间戳在`A2`：

```
=DATE(YEAR(A2),MONTH(A2),DAY(A2)) 
```

# c# - 通过 .NET 连接到每个 DB2 平台

> ID：16070873
> 
> 赞同：1
> 
> 时间：2013-04-17T21:50:21.623
> 
> 标签：c#, .net, db2

最近，我开始在一个需要从 DB2 数据库写入和读取的应用程序中工作，直到现在，我从未使用过 DB2。

在互联网上阅读，我得到了一些信息并做出了一些假设。我只需要知道我的想法是否正确，或者是否有其他方法。

*   使用 IBM Data Provider (.net DLL)，我只能连接在 linux 或 Windows 服务器上运行的 DB2。
*   对于在 as/400、z/os、iS 上运行的 DB2，我可以使用这些相同的 DLL，但是（！）
    必须使用“DB2 Connect”来完成此操作。
*   如果我没有“DB2 Connect”，我只能连接到在 as/400、z/os 或 iS 上运行的数据库，如果我使用 OLEDB 或 ODBC。

对不起，如果我误解了一些简单的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:42:45.090

您可以使用 IBM i Access（以前称为 IBM iSeries Access）附带的 .NET 数据提供程序连接到 Power Systems（以前称为 AS/400 或 iSeries）上的 DB2 for i。此平台不需要 DB2 Connect。

确保您的[IBM i Access for Windows](http://www-03.ibm.com/systems/power/software/i/access/windows.html)（或 IBM iSeries Access）版本高于或等于 IBM i（以前称为 OS/400 或 i5/OS）的版本，并且安装了正确的[服务包](http://www-03.ibm.com/systems/power/software/i/access/windows_sp.html)。

# c# - C# 项目：对象交叉使用

> ID：16070874
> 
> 赞同：-1
> 
> 时间：2013-04-17T21:50:26.043
> 
> 标签：c#, .net, reference, namespaces

有 2 个项目：MyServer 和 MyClient 在一个解决方案中。想要使用两个项目中的 Message 类的对象（分别为 MessageServer 和 MessageClient）。我将客户端的引用添加到服务器项目，但不能做相反的事情，因为我收到错误*"...would cause a circular dependency"*。所以我有

```
using TestMyClient;

namespace TestMyServer
{
    public class MessageServer
    { 
```

在服务器端，然后我在代码中使用它`= new XmlSerializer(typeof(TestMyClient.MessageClient));`

我想要相同的，但在客户端。可悲的是，我无法输入`TestMyServer`as`using`命名空间，因此我无法引用`MessageServer`该类...

如何交叉使用这些类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T21:52:20.857

您的问题不清楚 - 为什么您想要拥有两种不同的类型并不明显 - 但答案是在服务器和客户端项目都引用的命名空间中拥有*一种*类型。

```
Server     Client
   \        /
    \      /
     Common 
```

没有循环依赖，*一种*共享类型，每个人都开心。

如果您确实需要两种消息类型（例如，一种用于请求，一种用于响应），则在 Common 项目中定义这两种消息。我建议您*不要*调用它们`MessageServer`，但是-服务器*和*`MessageClient`客户端都将使用这两条消息，因为一条消息将生成它，而另一条消息将使用它。使用请求和响应的术语通常要清楚得多。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T23:05:31.473

一般来说：如果您有两个“事物”依赖于另一个事物的功能（循环依赖），那么将通用功能提取到第三个事物中。让现有的两个事物都引用新的第三个事物。

当这些东西是类时，例如`MessageServer`and `MessageClient`，然后将通用功能提取到`Message`类中，并让原来的两个类派生自新类。

当这些东西是项目时，例如`AwesomeServer`and ，然后将通用功能（例如类）`AwesomeClient`提取到一个新项目中，并让原来的两个项目引用新项目。`Message``Awesome`*

# mysql - Wordpress SQL Query 组合所有行的列数据

> ID：16070878
> 
> 赞同：0
> 
> 时间：2013-04-17T21:50:42.990
> 
> 标签：mysql, wordpress

我有一个 Wordpress 插件，它允许用户保存最喜欢的帖子。在我的 Wordpress MySQL 数据库中，该表如下所示：

```
id     | user_id | post_id  
-------+---------+------------
1      | 1       | 3,4,5,6,7,8  
2      | 2       | 5,7,8,10
3      | 5       | 3,6,8,10 
```

我正在寻找所有的`post_id`数字，并将它们组合成一个变量，这样我就可以`foreach`找到我正在阅读的当前帖子有多少匹配项。

例如，如果我正在阅读 ID 10 的帖子，我希望能够看到有 2 个人将其保存为收藏夹。

我试过了`$data = $wpdb->get_var("SELECT post_id FROM $table_name");`，`var_dump($data);`但这只会返回**我**最喜欢的帖子，而不是**所有**最喜欢的帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:08:32.283

尽管我在关于规范化的评论中确实扮演了魔鬼的拥护者，但这个表格布局确实看起来很脑残。但是，如果您无法规范化数据库表并且必须使用您所拥有的，您可以在技术上使用相当 hacky 的 sql 语句来完成您的要求：

```
 SELECT count(user_id) as TotalWishes
FROM table_name
WHERE (
 (post_id LIKE 'n,%') OR
 (post_id LIKE '%,n,%') OR
 (post_id LIKE '%,n')
 ) 
```

其中 n 在此示例中是您的帖子的编号。

即使这样写我也觉得很脏，但在对你的问题最严格的解释中，这个查询应该能满足你的要求。

# jquery - FadeIn 没有 .hide() 函数？

> ID：16070883
> 
> 赞同：3
> 
> 时间：2013-04-17T21:50:47.810
> 
> 标签：jquery, css, animation, fadein, animate.css

我想制作一个淡入淡出效果，但我不想隐藏它，因为当对象从文档中真正隐藏时，它会用边距拧紧。我需要它从不透明度 0 开始理想地制作动画，但我无法让它工作。有任何想法吗？谢谢！

```
$(document).ready(function(){
  $("#item").css("opacity", 0).delay(13000).fadeIn(2000);
 }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T21:53:41.863

在使用`opacity`时，您应该使用[`fadeTo`](http://api.jquery.com/fadeTo/)方法而不是`fadeIn`.

```
$("#item").css("opacity", 0).delay(13000).fadeTo(2000, 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:54:33.337

试试[动画](http://api.jquery.com/animate/)功能：

```
$("#item").animate({opacity:100}, 2000); 
```

具有 id 的元素`item`应该首先分配不透明度 0。

# python - python yahoo weather xml parse 适用于 2.7.1 但不适用于 2.6.1

> ID：16070885
> 
> 赞同：2
> 
> 时间：2013-04-17T21:51:00.493
> 
> 标签：python

```
#!/usr/bin/env python

import subprocess
import urllib
from xml.dom import minidom

CITY_ID = '23396898'
TEMP_TYPE = 'c'

WEATHER_URL = 'http://xml.weather.yahoo.com/forecastrss?w=' + CITY_ID +' &u=' + TEMP_TYPE
WEATHER_NS = 'http://xml.weather.yahoo.com/ns/rss/1.0'

dom = minidom.parse(urllib.urlopen(WEATHER_URL))
ycondition = dom.getElementsByTagNameNS(WEATHER_NS, 'condition')[0]
CURRENT_OUTDOOR_TEMP = ycondition.getAttribute('temp')
print(CURRENT_OUTDOOR_TEMP) 
```

当我在运行 python 2.7.1 但不在运行 2.6.1 的机器上运行它时，这工作正常。问题是实际数字是错误的。我已经验证我正确地提取了元素并且可以毫无问题地获得其他数值。但是我在 2.7.1 上运行它并获得 12 作为当前摄氏度温度，但在 2.6.1 中运行它并获得 54。

让我更加困惑的是，它在两种环境中都可以正常使用华氏温度。如果您将 f 设置为 TEMP_TYPE，它将正常工作。我已经确认它发生在多台机器上。但是它们是相同的部署，因此问题可能不是 2.6.1。谁能给我任何想法，为什么我会遇到这个问题？

在两种情况下都在 Mac OS X 上运行。

编辑：问题是 urllib.urlopen() 在 2.6 中无法正常工作，不知道为什么。

编辑：

我也用 elementtree 运行它，结果相同。看起来它可能是特定于这个环境的东西，但为什么它将它转换回华氏温度。奇怪的。

```
import urllib
from xml.etree.ElementTree import parse

CITY_ID = '23396898'
TEMP_TYPE = 'c'

WEATHER_URL = 'http://xml.weather.yahoo.com/forecastrss?w=' + CITY_ID +' &u=' + TEMP_TYPE
WEATHER_NS = 'http://xml.weather.yahoo.com/ns/rss/1.0'

rss = parse(urllib.urlopen(WEATHER_URL)).getroot()
ycondition = rss.find('channel/item/{%s}condition' % WEATHER_NS)
print ycondition.get('temp') 
```

如果你直接去网址，你可以直接看到信息。

[http://xml.weather.yahoo.com/forecastrss?w=2496543&u=f](http://xml.weather.yahoo.com/forecastrss?w=2496543&u=f) [http://xml.weather.yahoo.com/forecastrss?w=2496543&u=c](http://xml.weather.yahoo.com/forecastrss?w=2496543&u=c)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:07:44.257

好的，感谢您的帮助。我在网址中有一个空格，这导致了问题。

```
WEATHER_URL = 'http://xml.weather.yahoo.com/forecastrss?w=' + CITY_ID +' &u=' + TEMP_TYPE 
```

应该

```
WEATHER_URL = 'http://xml.weather.yahoo.com/forecastrss?w=' + CITY_ID +'&u=' + TEMP_TYPE 
```

感谢@ronak 的帮助，你让我朝着正确的方向前进

# asp.net - VS 2012 发布：找不到有效的 AspnetMergePath

> ID：16070886
> 
> 赞同：18
> 
> 时间：2013-04-17T21:51:07.613
> 
> 标签：asp.net, visual-studio-2012, publish

我刚刚安装了 Visual Studio 2012 的更新 2，它引入了一个新的发布对话框。我试图让它做它曾经做的事情（在发布之前预编译一个网站），我遇到了它的错误

```
"Can't find the valid AspnetMergePath" 
```

这是从文件 Microsoft.Web.Publishing.AspNetCompileMerge.targets 中抛出的。我已经确认文件 aspnet_merge.exe 存在于我计算机上的多个位置，但是

```
$(GetAspNetMergePath) 
```

由于某种原因正在评估一个空字符串。我一定错过了一些配置设置，但我以前从来没有弄乱过这些设置，所以我很困惑为什么会突然开始。

任何人都可以就如何解决这个问题提供建议吗？我已经对这个错误进行了标准的谷歌搜索，但没有任何东西能让我找到正确的解决方案。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-22T14:44:39.357

我遇到了同样的问题。搜索了所有与微软相关的网站，发现很多投诉，微软无意修复它。

这是我如何在我的系统上解决它的。编辑`Microsoft.Web.Publishing.AspNetConfigurationMerge.targets`文件并添加以下行。请确保您的 PC 上的 Microsoft SDK 路径相同，否则请更改它：

```
<TargetFrameworkSDKToolsDirectory>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\</TargetFrameworkSDKToolsDirectory> 
```

这里应该是这样的：

```
 <Target
  Name="GetAspNetMergePath"
  DependsOnTargets="$(GetAspNetMergePathDependsOn)"
  Condition ="'$(GetAspNetMergePath)' != 'false'">
<PropertyGroup>
  <TargetFrameworkSDKToolsDirectory>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\</TargetFrameworkSDKToolsDirectory>
  <AspnetMergeName>aspnet_merge.exe</AspnetMergeName>
  <AspnetMergePath Condition="Exists('$(TargetFrameworkSDKToolsDirectory)$(AspnetMergeName)')">$(TargetFrameworkSDKToolsDirectory)</AspnetMergePath>
</PropertyGroup>
<Error Condition="'$(AspnetMergePath)' == '' Or !Exists($(AspnetMergePath))"
       Text="Can't find the valid AspnetMergePath" /> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-05-05T06:47:52.057

我今天在使用 msbuild 命令行构建时遇到了同样的问题。解决方法是使用 C:\Program Files (x86)\MSBuild\12.0\Bin 中的 msbuild.exe，
而不是 C:\Windows\Microsoft.NET\Framework\v4.0.30319

这个问题是由于新的 msbuild 现在[是 Visual Studio 2013 的一部分，](http://blogs.msdn.com/b/visualstudio/archive/2013/07/24/msbuild-is-now-part-of-visual-studio.aspx)而不是 .Net 框架的一部分。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-08T19:08:11.853

这是一个不需要更改目标文件的解决方案。[http://connect.microsoft.com/VisualStudio/feedback/details/786492/publish-cant-find-the-valid-aspnetmergepath](http://connect.microsoft.com/VisualStudio/feedback/details/786492/publish-cant-find-the-valid-aspnetmergepath)的解决方法建议将其他属性传递给 msbuild。我能够使用它来工作：

> msbuild website.publishproj /p:DeployOnBuild=true /p:PublishProfile=Release /p:VisualStudioVersion=12.0 /p:AspnetMergePath="C:\Program Files (x86)\Microsoft SDKs\Windows\v8.1A\bin\NETFX 4.5 .1 工具\"

这里的关键是`AspnetMergePath`属性，如果 Windows SDK 安装在不同的位置，您可能需要更改该属性。如果我包含`GetAspNetMergePath`解决方法中的属性，它会失败，但根据 SDK 版本可能需要这样做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-10T11:36:53.580

我在 VS 2012 中遇到了同样的问题，我所做的只是：

单击发布，在发布 Web 下转到设置选项卡，取消选中“发布期间预编译”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-17T23:25:30.187

另一个对我有用的相同错误的选项是安装 Visual Studio（在我的情况下是 express）。我在服务器上构建了一次应用程序，然后从那时起，它作为我的持续集成项目的一部分正确构建。

# html - 添加浮动：左中断列表

> ID：16070890
> 
> 赞同：0
> 
> 时间：2013-04-17T21:51:33.807
> 
> 标签：html, css, css-float

我有一个称为“计划”的视觉元素，它列在 html 页面中。每个“计划”都有一张小桌子和一张图片，我想并排展示。没有任何样式，它看起来像这样：http: [//jsfiddle.net/DCTwd/1/](http://jsfiddle.net/DCTwd/1/)

我以为我可以`float: left`在表格和图像中使用以使它们显示在同一行中，但这不起作用。不能`float: left`在 a 内使用`li`吗？否则我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T23:23:17.280

我会使用`inline-table`从 CSS2.1 开始得到很好支持的一个：

```
table {
    display: inline-table;
} 
```

我在以下位置构建了一个演示：http: [//jsfiddle.net/audetwebdesign/cYDUC/](http://jsfiddle.net/audetwebdesign/cYDUC/)

您需要注意`ul`和`li`元素周围的填充和边距，并隐藏左侧的项目符号（除非您想显示它）。

如果您需要支持 IE7，您可以相应地使用`display: inline`和调整元素周围的填充和边距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T21:54:04.020

不需要古人`float:left;`，什么时候`display:inline-block;`才是你最好的朋友！

[您更新的 jsFiddle](http://jsfiddle.net/DCTwd/4/)。这是一个过于简单的示例，因此您的实际 CSS 应该涉及基于类而不是基于元素的 CSS，但它明白了这一点。

请注意`zoom:1; *display:inline;`IE7- 和`vertical-align:middle;`美学的后备。您也可以使用`top`or `bottom`，只要对您有用。

# asp.net-mvc-3 - Linq（加入）的问题

> ID：16070891
> 
> 赞同：0
> 
> 时间：2013-04-17T21:51:35.417
> 
> 标签：asp.net-mvc-3, linq

我正在用 linq 编写查询（按照下面的代码）。我正在寻找来自 db.iovel 的数据，并为每个数据带来一张嵌套在 db.fotoivel 中的图片。请记住，对于每个 db.ivel 数据，我可能有不止一张图片。

问题是当我运行时，它会返回所有图片中所有具有相同 db.ivel 数据的图片。

如果从 db.fotoimovel 仅返回一个（可能是第一张图片）的 db.iovel 数据，它对我有用。

代码：

```
var retorno = (from c in db.fotoimovel
                    join p in db.imovel on c.idImovel equals p.idImovel
                    where p.MetragemImovel >= metragem1 && p.MetragemImovel <= metragem2 &&
                    p.StatusImovel == opcao && 
                    ((String.IsNullOrEmpty(bairro)) || p.BairroImovel == bairro) &&
                    ((imovel == null) || (p.TipoImovel == imovel)) &&
                    ((carros == null) || (p.QtdVagaGaragemImovel == carros)) &&
                    ((quartos == null) || (p.QtdQuartoImovel == quartos))
                    select new DadosImovel
                    {
                        Id = p.idImovel,
                        Titulo = p.TituloImovel,
                        Descricao = p.DescricaoImovel,
                        Foto = c.NomeFotoImovel,
                        TipoImovel = p.TipoImovel,
                        Endereco = p.EnderecoImovel,
                        Complemento = p.ComplementoImovel,
                        Bairro = p.BairroImovel,
                        Cidade = p.CidadeImovel,
                        Estado = p.EstadoImovel,
                        CEP = p.CEPImovel,
                        MetragemImovel = p.MetragemImovel,
                        QtdComodoImovel = p.QtdComodoImovel,
                        QtdQuartoImovel = p.QtdQuartoImovel,
                        QtdBanheiroImovel = p.QtdBanheiroImovel,
                        QtdVagaGaragemImovel = p.QtdVagaGaragemImovel,
                        QtdAndarImovel = p.QtdAndarImovel,
                        Status = p.StatusImovel,
                        Ativo = p.AtivoImovel
                    }).Distinct().ToList(); 
```

# excel - 从 VBA 中的类模块中提取特定变量到标准模块

> ID：16070893
> 
> 赞同：2
> 
> 时间：2013-04-17T21:51:46.573
> 
> 标签：excel, vba, excel-2010, bloomberg

全部，以下代码来自彭博社。它旨在从他们的服务器中提取大量数据。该代码有效，但我试图提取在类模块中生成的特定变量并将其带到用户定义函数的常规模块。谢谢您的帮助。

```
Option Explicit
Private WithEvents session As blpapicomLib2.session
Dim refdataservice As blpapicomLib2.Service

Private Sub Class_Initialize()
Set session = New blpapicomLib2.session
session.QueueEvents = True
session.Start
session.OpenService ("//blp/refdata")
Set refdataservice = session.GetService("//blp/refdata")
End Sub

Public Sub MakeRequest(sSecList As String)
Dim sFldList As Variant
Dim req As Request
Dim nRow As Long
sFldList = "CALL_SCHEDULE"
Set req = refdataservice.CreateRequest("ReferenceDataRequest") 'request type
req.GetElement("securities").AppendValue (sSecList) 'security + field as string array
req.GetElement("fields").AppendValue (sFldList) 'field as string var
Dim cid As blpapicomLib2.CorrelationId
Set cid = session.SendRequest(req)
End Sub

Public Sub session_ProcessEvent(ByVal obj As Object)
Dim eventObj As blpapicomLib2.Event
Set eventObj = obj
If Application.Ready Then
    If eventObj.EventType = PARTIAL_RESPONSE Or eventObj.EventType = RESPONSE Then
        Dim it As blpapicomLib2.MessageIterator
        Set it = eventObj.CreateMessageIterator()
        Do While it.Next()
            Dim msg As Message
            Set msg = it.Message
                Dim Security As Element
                Set Security = msg.GetElement("securityData").GetValue(0)
                Sheet1.Cells(4, 4).Value = Security.GetElement("security").Value
                Dim fieldArray As Element
                Set fieldArray = Security.GetElement("fieldData")
                    Dim field As blpapicomLib2.Element
                    Set field = fieldArray.GetElement(0)
                    If field.DataType = 15 Then
                        Dim numBulkValues As Long
                        numBulkValues = field.NumValues '76
                        Dim index As Long
                        For index = 0 To numBulkValues - 1
                            Dim bulkElement As blpapicomLib2.Element
                            Set bulkElement = field.GetValue(index)
                            Dim numBulkElements As Integer
                            numBulkElements = bulkElement.NumElements '2 elements per each pt
                            ReDim Call_Sch(0 To numBulkValues - 1, 0 To numBulkElements - 1) As Variant
                            Dim ind2 As Long
                            For ind2 = 0 To numBulkElements - 1
                                Dim elem As blpapicomLib2.Element
                                Set elem = bulkElement.GetElement(ind2)
                                Call_Sch(index,ind2)=elem.Value
                                Sheet1.Cells(index + 4, ind2 + 5) = elem.Value
                            Next ind2
                        Next index
                    Else
                    Call_Sch(index,ind2)=field.Value    
                    Sheet1.Cells(index + 4, ind2 + 5).Value = field.Value
                    End If
        Loop
    End If
End If
End Sub 
```

具体来说，我想要获取的变量是 Call_Sch。我想要主模块中的一个函数来识别变量。再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T02:15:40.903

在使用 ReDim 之前不必声明变量；ReDim 可以声明一个变量。但是，如果您添加：

```
Public Call_Sch() as Variant ' Insert correct data type here 
```

那么您可以通过以下方式引用它：

```
<YourClassVaraibleName>.Call_Sch 
```

# asp.net-mvc - 下载功能 MVC 4

> ID：16070899
> 
> 赞同：0
> 
> 时间：2013-04-17T21:52:07.570
> 
> 标签：asp.net-mvc, download

我创建了一个 web api，它通过 OAuth 将用户连接到 Dropbox。我正在使用 API 与 Dropbox 进行交互，它可以在本地工作，但是当我将 API 部署到我的 Azure 服务器时，我无法下载。我已经预料到会发生这种情况，因为我的 API 目前被硬编码到我机器上的路径中。这是我正在使用的方法： 注意：*我通过 ActionResult 调用此方法，作为我项目的 MVC 部分的一部分*

```
public FileSystemInfo DownloadFile(string root, string path)
        {
            var uri = new Uri(new Uri(DropboxRestApi.ApiContentServer),
                String.Format("files?root={0}&path={1}",
                root, UpperCaseUrlEncode(path)));

            var oauth = new OAuth();
            var requestUri = oauth.SignRequest(uri, _consumerKey, _consumerSecret, _accessToken);

            var request = (HttpWebRequest) WebRequest.Create(requestUri);
            request.Method = WebRequestMethods.Http.Get;
            var response = request.GetResponse();

            var metadata = response.Headers["x-dropbox-metadata"];
            var file = ParseJson<FileSystemInfo>(metadata);

            using (Stream responseStream = response.GetResponseStream())
            using (MemoryStream memoryStream = new MemoryStream())
            {
                byte[] buffer = new byte[1024];
                int bytesRead;
                do
                {
                    bytesRead = responseStream.Read(buffer, 0, buffer.Length);                    
                    memoryStream.Write(buffer, 0, bytesRead);
                } while (bytesRead > 0);

                file.Data = memoryStream.ToArray();
            }                                    
            return file;                                    
        } 
```

这是我在操作结果中调用该方法的地方。

```
var file = api.DownloadFile("dropbox", "Public/downloadThis.jpg");
                    path = file.Path;
                    file.Save(@"....\Desktop\DemoTest\Downloads\downloadThis.jpg"); --- this is the problem & *Save* is a stream writer 
```

在浏览器上从服务器下载文件时，是否有要遵循的程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T06:02:50.463

公共 ActionResult 下载（Models.downloadModel 下载，Models.LoggerView 日志）{

```
 string TC_ID = Request.QueryString["id"].ToString();
        string filename = TC_ID+"_LoggerData" + ".zip";
        Response.ContentType = "application/octet-stream";
        Response.AppendHeader("Content-Disposition", "attachment;filename=" + filename);
        Response.TransmitFile(Server.MapPath("~/files/" + filename));
        Response.End(); 
```

}

# php - 带有复选框php的while循环不会根据数据库详细信息进行更新

> ID：16070900
> 
> 赞同：0
> 
> 时间：2013-04-17T21:52:08.577
> 
> 标签：php, mysql

我有一个正确显示所有信息的while循环，我想要一个复选框，允许我将循环的每个成员标记为在数据库中完成，我真的不知道从哪里开始，我将不胜感激。

下面是我有多远，它正在正确生成循环并显示复选框，但是它没有在加载时设置为已完成？

```
 while ($row = mysql_fetch_array($query)){
        $task_name = $row['task_name'] ;
        $task_description = $row['task_description'];
        $task_completed = $row['completed'];
        $tasks .= '<div id="tasksBody"><form action="" method="post">Completed? <input name="completed" type="checkbox" if ($task_completed == 1){checked="checked"} /><input type="submit" value="Update"><br /><br /><b>'.$task_name.'</b><br /><br />'.$task_description.'<hr><br /></form></div>';
    }
} 
```

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T21:54:20.453

您不能在字符串中编写原始 PHP 代码并希望它被执行。内联你也不能使用`if`，但你必须使用三元运算符。

```
$tasks .= '<div id="tasksBody">
<form action="" method="post">Completed? <input name="completed" type="checkbox" '.
($task_completed == 1?'checked="checked"':'').
' /><input type="submit" value="Update">
<br /><br />
<b>'.$task_name.'</b><br /><br />'.$task_description.'<hr><br /></form></div>'; 
```

# php - 页面刷新后 Jquery Mobile Page 按钮不起作用

> ID：16070903
> 
> 赞同：0
> 
> 时间：2013-04-17T21:52:17.543
> 
> 标签：php, javascript, jquery, jquery-mobile

我的 jquery 移动应用程序的页脚导航在页面刷新后不起作用 - 示例如下：

[http://m-staging.qpme.com/quickpay-login.php#sessions-page](http://m-staging.qpme.com/quickpay-login.php#sessions-page)

登录：stack@yahoo.com 密码：stack

然后在浏览器中，刷新页面，然后底部导航不起作用。我尝试了一些不同的东西，我读过，但没有运气。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:02:37.097

I jsut avoided the refresh by going to the desired page and using the jquery refresh code to repopulate the divs.

```
$("div").page(); 
```

# highcharts - 同时显示图表和数据的 HIghcharts

> ID：16070905
> 
> 赞同：0
> 
> 时间：2013-04-17T21:52:20.920
> 
> 标签：highcharts

我是 highcharts 的新手，并试图同时显示图表和数据。

就像整个显示器应该是这样的。

第一列：站名（数据） 第二列：水平条 第三列：数据。

是否可以仅使用 highcharts API 绘制它？

谢谢苏坎塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T17:05:49.923

您基本上是在谈论带有分类轴和数据标签的常规条形图：

[http://jsfiddle.net/JVNjs/288/](http://jsfiddle.net/JVNjs/288/)

```
categories:['group a','group b','group c','group d','group e'] 
```

我认为没有默认设置可以按照您的要求将数据标签全部对齐到列中的右侧，但我确信有一种解决方法可以做到这一点。

# model-view-controller - 为什么我的 joomla 控制器方法没有被执行

> ID：16070909
> 
> 赞同：0
> 
> 时间：2013-04-17T21:52:30.093
> 
> 标签：model-view-controller, joomla, components

我有一个将数据发送到我的控制器之一的 ajax 方法，但我的控制器内部的方法没有被触发。每次第一个方法在调用时执行。控制器如下所示

```
class TieraerzteControllerUploader extends JController
{
        /**
         * display task
         *
         * @return void
         */

            function display($cachable = false) 
        {
              require_once JPATH_COMPONENT_ADMINISTRATOR.'/helpers/upload.php';

              $upload_handler = new UploadHandler();
              //this one is going to be outputed
              die();
        }

          public function locator(){
           // I wait here for a dump, but is not happening
           var_dump('test');
           die();
           echo '{"text":"John Smith","id":"433"},{"text":"Paul Sparks","id":"434"}';

        }

} 
```

我用以下网址调用控制器

```
/administrator/index.php?option=com_tieraerzte&task=uploader.locator&tmpl=component&q=search 
```

即使我调用上面的 url 结果是一样的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T09:40:17.493

我认为您使用了格式错误的 joomla 网址。试试这个 url 格式，你可以调用控制器

**index.php?option=com_tieraerzte&view=uploader&tmpl=component&q=search**

注意你的网址和我的网址之间的区别。

# java - 在 Struts Action 中，我可以写出一个字节数组并重定向页面吗？（Struts 1，Java）

> ID：16070912
> 
> 赞同：0
> 
> 时间：2013-04-17T21:52:52.843
> 
> 标签：java, apache, jsp, struts, struts-1

我正在做一个项目，在用户提交表单后，我想让他们下载 PDF 文件（填写表单中的信息）并将它们重定向到另一个页面。我知道如何重定向（返回一个`ActionForward`设置为重定向到正确的 JSP 的）并且我知道如何发送 PDF（我使用 iText 库构建它，然后将字节数组写入 的`HttpServletResponse`输出流），但是我不确定如何在没有某种kludge的情况下做到这两点。

我猜我必须使用 javascript/ajax 来做这两个中的一个，但我想知道是否有更优雅的方法来使用 struts 来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:38:16.863

不使用 servlet。

在这些情况下，我最终要做的是请求带有时间戳作为请求参数的文件。

当我写响应时，我用那个时间戳设置了一个 cookie。在客户端每隔几分钟我就会检查该 cookie 是否存在，如果存在，我将 window.location 转到“重定向”页面。

# php - 如何使用php查找不同文件夹中的文件？

> ID：16070913
> 
> 赞同：1
> 
> 时间：2013-04-17T21:52:53.517
> 
> 标签：php

`php`我对文件结构有疑问。

我想运行一个脚本来生成一堆`pdf`文件的图像。

我的问题是实际`pdf`文件位于不同的文件夹和结构中。

例如：

pdf可以位于

```
/test/book/pdf/test.pdf. 
```

另一个可能在

```
/server/pdfs/link/dummy.pdf. 
```

文件系统中有数千个`pdfs`文件，我`Imagick`用来从`pdfs`.

我不确定如何找到所有的，也不确定如何在构造函数`pdf`中指定文件路径。`imagick`

```
 $im = new imagick('file path to pdf here');  //I don't know how to specify the file path here...
 $im->setImageFormat( "jpg" ); 
```

谁能给我一个提示？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:00:48.670

您可以转到根文件夹并扫描所有目录及其子目录中的 .pdf 文件，并将它们存储在数组（PHP：scandir）、数组或每个文件名之间带有字符分隔符的字符串中。

# mysql - SELECT SUM(CRC32(column)) LIMIT 不起作用

> ID：16070914
> 
> 赞同：0
> 
> 时间：2013-04-17T21:52:55.143
> 
> 标签：mysql

我需要使用`LIMIT`.

`SELECT SUM(CRC32(column)) FROM table LIMIT 0, 100;`

但是，返回的值是整个表的校验和。为什么会这样？如何使用 LIMIT 仅获取特定行数的校验和？

以下作品：

`SELECT SUM(CRC32(column)) FROM table WHERE id > 0 AND id < 101;`

但我不想使用这种方法，因为 auto_increment 值可能会发生跳跃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:54:57.457

> 为什么会这样？

`LIMIT`在聚合函数之后应用。

如果不使用`GROUP BY`，`SUM`则聚合整个表，只留下一条记录，该记录位于`LIMIT`.

用这个：

```
SELECT  SUM(CRC32(column))
FROM    (
        SELECT  column
        FROM    mytable
        ORDER BY
                id
        LIMIT   100
        ) q 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:55:29.247

你可以做

```
 SELECT SUM(CRC32(column)) FROM 
    (SELECT column FROM table LIMIT 0, 100) AS tmp; 
```

# macos - perl脚本从launchd内部运行失败，“系统”命令“没有这样的文件或目录”

> ID：16070917
> 
> 赞同：0
> 
> 时间：2013-04-17T21:53:02.470
> 
> 标签：macos, perl, launchd

我有一个 perl 脚本（实际上也可以在 Linux 和 Windows 上成功运行），我正试图通过 OSX-10.8.3 上的 launchd 运行它。我在编写 plist 文件方面相当缺乏经验，所以我希望这是我忽略的一些愚蠢的事情。我应该注意到它在 OSX 上通过 cron 运行良好，所以我遇到的问题是特定于 launchd 的。但是，当我尝试通过 launchd 运行它时，它在一些 perl 'system' 调用中出错，声称“没有这样的文件或目录”。这是列表：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
        <key>Label</key>
        <string>launched.sysinv</string>
        <key>ProgramArguments</key>
        <array>
                <string>/usr/bin/perl</string>
                <string>/Users/lfriedman/cuda-stuff/sw/gpgpu/build/scripts/testing/sysinv.pl</string>
        </array>
        <key>RunAtLoad</key>
        <true/>
        <key>StartCalendarInterval</key>
        <dict>
                <key>Hour</key>
                <integer>14</integer>
                <key>Minute</key>
                <integer>30</integer>
        </dict>
        <key>UserName</key>
        <string>lfriedman</string>
        <key>AbandonProcessGroup</key>
        <true/>
        <key>StandardOutPath</key>
        <string>/tmp/sysinv.out</string>
        <key>StandardErrorPath</key>
        <string>/tmp/sysinv.err</string>
</dict>
</plist> 
```

当我使用“launchctl load -w launchd.sysinv.plist”加载脚本时，我在 /var/log/system.log 中看到以下错误：

```
com.apple.launchd[1] (launched.sysinv[51676]): Exited with code: 1 
```

/tmp/sysinv.out 每次调用都有以下输出：

```
system(/usr/sbin/system_profiler -detailLevel full &> system_profiler.txt) failed: No such file or directory 
```

/tmp/sysinv.err 有一个错误（每次调用）：

```
sh: system_profiler.txt: Permission denied 
```

我很困惑是什么导致了这些错误。同样，手动运行 perl 脚本（作为 'lfriedman' 用户）或通过 cronjob（由 'lfriedman' 拥有）工作正常，没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T03:39:48.003

当您通过 plist 运行脚本时，系统调用会将其输出 (system_profiler.txt) 写入它没有写入权限的目录。当您手动或 cron 运行它时，它会写入具有适当权限的目录。

编辑脚本以将输出指向您有权访问的目录，例如`/usr/sbin/system_profiler -detailLevel full &> /tmp/system_profiler.txt`

# linux - 为 CUDA 程序构建 make 文件时出现库错误

> ID：16070925
> 
> 赞同：0
> 
> 时间：2013-04-17T21:53:24.813
> 
> 标签：linux, cuda, makefile

我正在尝试在linux中构建一个makefile。进入makefile的代码如下：

```
NVCC = /usr/local/cuda/bin/nvcc 
CUDAPATH = /usr/local/cuda 
NVCCFLAGS = -I$(CUDAPATH)/include 
LFLAGS = -L$(CUDAPATH)/lib64 -lcuda -lcudart -lm

VectorAdd:
    $(NVCC) $(NVCCFLAGS) $(LFLAGS) -o VectorAdd VectorAdd.cu 
```

所以当我输入“make”

我收到以下错误：

![在此处输入图像描述](https://i.stack.imgur.com/frZdI.png)

我如何摆脱它并构建我的 make 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T22:03:19.810

由于您使用的是 NVCC，因此您实际上并不需要那些 LFLAGS 和 NVCCFLAGS 定义。nvcc 知道如何自动找到所有这些。

但是，如果您想修复它，请去掉 cuda 路径定义末尾的空格：

```
CUDAPATH = /usr/local/cuda 
                          ^ there is a space here, delete it 
```

# r - 从逻辑模型中仅提取 p 值显着的系数

> ID：16070926
> 
> 赞同：15
> 
> 时间：2013-04-17T21:53:24.933
> 
> 标签：r, extract, regression

我已经运行了一个逻辑回归，我命名了它的摘要。“得分”因此，`summary(score)`给了我以下

```
Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-1.3616  -0.9806  -0.7876   1.2563   1.9246  

                       Estimate Std. Error    z value    Pr(>|z|)
(Intercept)        -4.188286233 1.94605597 -2.1521921 0.031382230 *
Overall            -0.013407201 0.06158168 -0.2177141 0.827651866
RTN                -0.052959314 0.05015013 -1.0560154 0.290961160
Recorded            0.162863294 0.07290053  2.2340482 0.025479900 *
PV                 -0.086743611 0.02950620 -2.9398438 0.003283778 **
Expire             -0.035046322 0.04577103 -0.7656878 0.443862068
Trial               0.007220173 0.03294419  0.2191637 0.826522498
Fitness             0.056135418 0.03114687  1.8022810 0.071501212 .

---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 757.25  on 572  degrees of freedom
Residual deviance: 725.66  on 565  degrees of freedom
AIC: 741.66

Number of Fisher Scoring iterations: 4 
```

我希望实现的是获取变量名称和这些变量的系数，这些变量的值旁边有`*`,`**`或。换句话说，我想要上述变量和系数< .05。`***``Pr(>|z|)``Pr(>|z|)`

理想情况下，我希望将它们放入数据框中。不幸的是，我尝试过的以下代码不起作用。

```
variable_try <-
  summary(score)$coefficients[if(summary(score)$coefficients[, 4] <= .05, 
                                 summary(score)$coefficients[, 1]),]

Error: unexpected ',' in "variable_try <-
summary(score)$coefficients[if(summary(score)$coefficients[,4] < .05," 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-17T22:07:48.910

那这个呢：

```
data.frame(summary(score)$coef[summary(score)$coef[,4] <= .05, 4]) 
```

# arrays - VB.Net中的sqlParameters数组

> ID：16070932
> 
> 赞同：3
> 
> 时间：2013-04-17T21:53:45.447
> 
> 标签：arrays, vb.net, sqlparameter

我正在尝试在 VB.Net 中创建一个类型化大小的参数数组：

```
Dim parameters() As SqlParameter = New SqlParameter() _
        {
          New SqlParameter("@first_name", SqlDbType.VarChar, 50) {Value = "john"},
          New SqlParameter("@last_name", SqlDbType.VarChar, 50) {Value = "doe"},
          New SqlParameter("@age", SqlDbType.Int) {Value = 18},
          New SqlParameter("@id", SqlDbType.Int) {Value = 123}
        } 
```

但是 VS 说：没有声明价值'。由于其保护级别，它可能无法访问

上面的代码有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T21:58:15.623

您需要对对象初始化器使用 VB 语法：

```
Dim parameters() As SqlParameter = New SqlParameter() _
        {
          New SqlParameter("@first_name", SqlDbType.VarChar, 50) With { .Value = "john"},
          New SqlParameter("@last_name", SqlDbType.VarChar, 50) With { .Value = "doe"},
          New SqlParameter("@age", SqlDbType.Int) With { .Value = 18},
          New SqlParameter("@id", SqlDbType.Int) With { .Value = 123}
        } 
```

# javascript - 从 chrome 打包的应用程序中保存文件

> ID：16070936
> 
> 赞同：0
> 
> 时间：2013-04-17T21:53:54.223
> 
> 标签：javascript, file, google-chrome, google-chrome-app

我有一个 Chrome 打包的应用程序，我花了一段时间才弄明白，但我终于让它工作了。但是我现在遇到了另一个问题。

是否可以将我的应用程序中的变量保存到放置在我的应用程序/文件目录中的文本文件中？

我查看了 chrome.fileSystem api，但我不太了解。

我可能完全错了，也许你不能将文件保存到文件目录？

任何关于此的示例或教程都会很棒！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T23:25:32.263

我建议将文件的内容存储在 chrome.storage 中，然后从那里动态加载和保存 css 文件的内容，而不是使用文件系统。对我来说，这将更容易实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T20:38:58.227

chrome.storage 听起来很合适（尽管不太确定您在访问应用程序外部的 css 时的具体需求）。它的主要用例是保存状态和存储配置设置/变量。

[我们有一个代码实验室，可以浏览各种 chrome 应用程序，包括此处](http://developer.chrome.com/trunk/apps/app_codelab5_data.html)的 chrome.storage：http://developer.chrome.com/trunk/apps/app_codelab5_data.html

还有新的syncFileSystem API，它似乎真的不适合您的需求。这是文档/文件级别的同步，例如访问硬盘驱动器上的用户文件，将它们保存在应用程序中并同步它们。

但可以肯定的是，如果您好奇，这里是有关使用 Chrome 文件系统和同步文件系统的文档：http: [//developer.chrome.com/trunk/apps/app_storage.html](http://developer.chrome.com/trunk/apps/app_storage.html)

我们还在编写一份文档，解释有关在云中存储数据的关键概念（特别是针对打包应用程序）。希望在接下来的一周左右能早日切开后备箱。

让我们了解您的进展情况！

# c# - 显示动态复选框的现有选择

> ID：16070939
> 
> 赞同：1
> 
> 时间：2013-04-17T21:54:04.777
> 
> 标签：c#, javascript, asp.net

我正在动态创建复选框并想要显示现有选择或想要动态检查它们。这是创建复选框的代码

```
 private void Role()
    {
        SystemUserDal dal = new SystemUserDal();
        var roles = dal.GetRolesList();
        foreach (KeyValuePair<Guid, string> r in roles)
        {

            CheckBox chk = new CheckBox();
            chk.ID = r.Value;
            chk.Text = r.Value;
            rolepanel.Controls.Add(chk);
        }
    } 
```

我有

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            SystemUserDal dal = new SystemUserDal();
            var userID = Guid.Parse(Request.QueryString["ID"].ToString());
            var user = dal.getSystemUserByID(userID);
            if (user != null)
            {
                Role();
                var role = user.Roles;

                textuserid.Text = user.UserId.ToString(); 
```

user.Roles 具有分配给特定用户的所有角色。如何标记动态创建的复选框？

我试过了，但仍然可以工作，因为角色有不止一个价值

```
 private void Role(string role)
    {
        SystemUserDal dal = new SystemUserDal();
        var userId = Guid.Parse(Request.QueryString["ID"].ToString());
        var roles = dal.GetRolesList(userId);
        foreach (KeyValuePair<Guid, string> r in roles)
        {

            CheckBox chk = new CheckBox();
            chk.ID = r.Value;
            chk.Text = r.Value;
            if (role == r.Value)
            {
                chk.Checked = true;

            } rolepanel.Controls.Add(chk);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:50:29.653

可能重写你的`Roles()`功能

```
foreach (KeyValuePair<Guid, string> r in roles)
{

    CheckBox chk = new CheckBox();
    chk.ID = r.Value;
    chk.Text = r.Value;

    if(User.IsInRole(r.Value))
       chk.Checked = true;

    rolepanel.Controls.Add(chk);
} 
```

更好的选择是使用`<asp:CheckBoxList />`控制

```
<asp:CheckBoxList ID="RolesList" runat="server">
</asp:CheckBoxList> 
```

代码隐藏

```
for (int i = 0; i < RolesList.Items.Count; i++)
{
    if (User.IsInRole(RolesList.Items[i].Value))
       RolesList.Items[i].Selected = true;
} 
```

# payment-gateway - 在没有 PCI 的情况下接受店内付款

> ID：16070941
> 
> 赞同：-1
> 
> 时间：2013-04-17T21:54:20.320
> 
> 标签：payment-gateway, payment-processing

我正在寻找一种在我的商店中接受内联付款的方法，这样用户就不必去贝宝，如果他们不想这样做。

我一直在阅读有关 PCI 合规性的信息，这听起来像是一场噩梦，而且相当昂贵。

我见过很多网站这样做。一个在这里：

[https://www.liquoricekids.co.uk/](https://www.liquoricekids.co.uk/)

在他们的付款页面上可以输入信用卡详细信息。这是一家小商店，所以他们不可能符合 PCI 标准。

如何在我的商店接受付款？

我知道这可能会因为对话而被关闭，但希望一个善良的灵魂可以帮助我对此有所了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T23:08:27.043

您最好选择一家为您处理 PCI 合规性的公司。你是对的，PCI 合规性可能是一场噩梦，特别是如果你有有限的资源致力于成为 PCI 合规性。

我建议使用众多支付服务中的一种。Recurly（我为之工作）、Braintree 和 Stripe 等支付网关的表单可以嵌入到您的网站中以进行卡片收集。这样一来，您的 PCI 责任就会减少，因为信用卡号永远不会到达您的服务器。他们还将保存信用卡以在需要时再次使用。

# jquery - 为什么动画图像需要一点时间才能清晰显示？

> ID：16070943
> 
> 赞同：0
> 
> 时间：2013-04-17T21:54:25.243
> 
> 标签：jquery, image, jquery-animate

为什么jquery动画图片需要一点时间才能清晰显示？

要理解这里的问题是[jsFiddle](http://jsfiddle.net/TAtce/)

在这里，当您单击按钮时，图像会变大，并且需要一段时间才能使图像清晰。

如何纠正这个问题？

这是代码

```
$(document).ready(function(){ 
         $("#btn").click(function(){
                $("#im").animate({width:200,height:200});
         });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:07:39.570

我认为当被要求在动画中快速缩放图像时，您看到的是浏览器优化。他们在动画期间使用快速缩放算法以使动画更快，然后在动画停止后使用更准确的缩放算法。

您可以在此处阅读有关缩放算法更改的信息：[https ://bugs.webkit.org/show_bug.cgi?id=56627](https://bugs.webkit.org/show_bug.cgi?id=56627)

此外，这里有一些关于不同浏览器如何以不同方式缩放图像的信息：http: [//entropymine.com/resamplescope/notes/browsers/](http://entropymine.com/resamplescope/notes/browsers/)

# gxt - GXT 3.x EditorGrid：逐个单元格选择单元格编辑器类型

> ID：16070953
> 
> 赞同：3
> 
> 时间：2013-04-17T21:55:32.007
> 
> 标签：gxt

无论如何在**GXT 3.0**中逐个单元格地定义编辑器类型？

我需要创建一个转置表；列成为行，行成为列。在这种情况下，一列（从普通表的角度来看）将具有各种编辑器类型，而一行将具有相同的编辑器类型。

我正在尝试使用以下方法 - 它似乎工作正常，并允许根据数据类型打开编辑器，但是当我点击退出时；它不会关闭/隐藏编辑器。

如果有人能指出我正确的方向，我将不胜感激。

```
final GridInlineEditing<MyModel> editing = new GridInlineEditing<MyModel>(mygrid){
        @SuppressWarnings("unchecked")
    @Override public <O> Field<O> getEditor(ColumnConfig<MyModel, ?> columnConfig) {
        if(valueColumnName.equals(columnConfig.getHeader().asString())) {
                MyModel myModel = tree.getSelectionModel().getSelectedItem();
            if(MyModelType.STRING.equals(myModel.getMyModelType())) {
                TextField textField =  new TextField();
                textField.setAllowBlank(Boolean.FALSE);
                return (Field<O>) textField;
            }
            else {
                TextArea textField =  new TextArea();
                textField.setAllowBlank(Boolean.FALSE);
                return (Field<O>) textField;
            }
        }
        return super.getEditor(columnConfig);
    }
};
editing.setClicksToEdit(ClicksToEdit.TWO); 
```

PS：这类似于下面的问题；但答案是特定于发布 GXT 3.0 的。我是stackoverflow的新手，似乎建议是创建新问题而不是向旧线程添加新帖子。 [GXT EditorGrid：逐个单元格选择单元格编辑器类型](https://stackoverflow.com/questions/6973189/gxt-editorgrid-choose-cell-editor-type-on-a-cell-by-cell-basis)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T20:01:23.320

玩了一整天后；我的同事（Praveen）和我想通了。所以不要试图覆盖 GridInlineEditing 的 getEditor() 方法，而是覆盖 startEditing() 方法。此外，如果您有日期、列表等数据，您将需要转换器。下面是示例代码；希望这对其他人有帮助。

```
final GridInlineEditing<MyModel> editing = new GridInlineEditing<MyModel>(tree){
            @Override public void startEditing(GridCell cell) {
                MyModel myModel= tree.getSelectionModel().getSelectedItem();
                if(MyModelType.TEXT.equals(myModel.getContextVariableType())) {
                    TextArea textField =  new TextArea();
                    textField.setAllowBlank(Boolean.FALSE);
                    super.addEditor(valueColumn, textField);
                }
                else if(MyModelType.BOOLEAN.equals(myModel.getContextVariableType())) {
                    SimpleComboBox<String> simpleComboBox = new SimpleComboBox<String>(new StringLabelProvider<String>());
                    simpleComboBox.setTriggerAction(TriggerAction.ALL);
                    simpleComboBox.add("YES");
                    simpleComboBox.add("NO");
                    super.addEditor(valueColumn, simpleComboBox);
                }
                else if(MyModel.INTEGER.equals(myModel.getContextVariableType())) {
                    SpinnerField<Integer> spinnerField = new SpinnerField<Integer>(new IntegerPropertyEditor());
                    spinnerField.setIncrement(1);
                    Converter<String, Integer> converter = new Converter<String, Integer>(){
                        @Override public String convertFieldValue(Integer object) {
                            String value = "";
                            if(object != null) {
                                value = object.toString();
                            }
                            return value;
                        }
                        @Override public Integer convertModelValue(String object) {
                            Integer value = 0;
                            if(object != null && object.trim().length() > 0) {
                                value = Integer.parseInt(object);
                            }
                            return value;
                        }
                    };
                    super.addEditor(valueColumn, converter, (Field)spinnerField);
                }
                else {
                    TextField textField =  new TextField();
                    textField.setAllowBlank(Boolean.FALSE);
                    super.addEditor(valueColumn, textField);
                }
                super.startEditing(cell);
            }
        };
        editing.setClicksToEdit(ClicksToEdit.TWO); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T15:32:43.637

我认为您没有看到字段未关闭的原因是因为您实际上并未将它们添加到 GridInlineEditing 类中。

在您有以下返回语句的部分；

```
return (Field<O>) textField; 
```

这些文本字段永远不会添加到网格中。

我会尝试将以下代码替换为您的前两个 return 语句；

```
super.addEditor(columnConfig, (Field<O>) textField; 
```

这会将编辑器添加到`AbstractGridEditing`. 具体来说，该`AbstractGridEditing.removeEditor(GridCell, Field<?>)`方法用于`GridInlineEditing.doCompleteEditing()`并且`GridInlineEditing.cancelEditing()`需要该字段位于地图中，以便可以将其与其父级分离。

# kendo-ui - 剑道分类图表仅显示具有非数字 x 轴的点

> ID：16070955
> 
> 赞同：1
> 
> 时间：2013-04-17T21:55:34.127
> 
> 标签：kendo-ui

我正在使用 kendo UI dataviz 图表来显示在 x 轴上具有文本（符号）和在 y 轴上具有数值的数据。我有提供数据的服务器端数据源。我怎样才能做到这一点？

我尝试使用散点图，但它们是 XY 图表，需要 x 和 y 轴上的数值。我可以将数据显示为分类的线图，但连接标记的线在我的情况下没有意义，我不需要显示。

这是我的数据 var data = [{id:"1", number:"1.23", label:"A"},{id:"2", number:"4.11", label:"B"}]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T15:03:33.840

您可以使用简单的折线图并设置

1.  标记可见
2.  `series.opacity`至`0`

    ```
    series: [{
        field: "value",
        type: "line",
        opacity: 0,
        markers: {
            size: 5,
            visible: true,
        }
    }] 
    ```

[http://docs.kendoui.c​​om/api/dataviz/chart#configuration-series.opacity](http://docs.kendoui.com/api/dataviz/chart#configuration-series.opacity)

# php - 如何在 mongodb 中使用 php 在全文索引中搜索

> ID：16070957
> 
> 赞同：0
> 
> 时间：2013-04-17T21:55:39.637
> 
> 标签：php, mongodb

我正在使用 mongodb 2.4 并将全文索引添加到集合中的“标题”字段中。我应该如何使用 php 在该字段中搜索内容？

这是我现在使用的代码：

```
$params = array(
        '_id' => array(
            '$gt' => (int)$gt
        )
    );
$r = $this->collection->find( $params )->limit($limit); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:05:31.910

这似乎是我的问题的答案：

```
<?php
$result = $db->command(
    array(
        'text' => 'bar', //this is the name of the collection where we are searching
        'search' => 'hotel', //the string to search
        'limit' => 5, //the number of results, by default is 1000
        'project' => Array( //the fields to retrieve from db
            'title' => 1
        )
    )
); 
```

[http://www.php.net/manual/en/mongodb.command.php#111891](http://www.php.net/manual/en/mongodb.command.php#111891)

# dns - 不同端口的DNS不同的IP

> ID：16070959
> 
> 赞同：-1
> 
> 时间：2013-04-17T21:55:43.943
> 
> 标签：dns, ip

是否可以为不同的端口分配不同的 IP？

如：

[http://example.com:80](http://example.com:80) -> 123.456.789.012

[http://example.com:90](http://example.com:90) -> 987.654.​​321.098

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:03:45.703

您可以使用[DNS SRV 记录](http://en.wikipedia.org/wiki/SRV_record)将主机名（以及地址）*和*端口号与服务名称相关联，但实际上没有 Web 浏览器或其他 HTTP 客户端查询 SRV 记录。

所以，在实践中，没有。

即使使用 SRV 记录，您也无法按照所述解决问题中的问题。SRV 记录不会帮助您解析`http://example.com:80/`和`http://example.com:90/`到不同的地址，因为手动指定端口号会覆盖 SRV 记录并直接查询地址（A 和 AAAA）记录。SRV 记录的作用（如果浏览器不屑于查询它们！）是帮助您解析不同的地址（或相同的地址）`http://a.example.com/`和`http://b.example.com/`不同的端口。

# user-interface - 如何在three.js gui中更改项目的颜色

> ID：16070965
> 
> 赞同：0
> 
> 时间：2013-04-17T21:56:10.930
> 
> 标签：user-interface, three.js, webgl, dat.gui

如何在three.js gui菜单中编写具有特定颜色的项目。或者在项目菜单之前添加一个具有特定颜色的正方形或圆形。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:07:46.060

你指的是 dat.gui 吗？如果是这样，那么这是一个独立于 three.js 的软件库，您可以在以下位置阅读所有功能：

[http://workshop.chromeexperiments.com/examples/gui/#1--Basic-Usage](http://workshop.chromeexperiments.com/examples/gui/#1--Basic-Usage)

据我所知，没有办法像你提到的那样添加装饰到 dat.gui。

# sql - Access 自动编号的条件表达式中的数据类型不匹配

> ID：16070966
> 
> 赞同：0
> 
> 时间：2013-04-17T21:56:10.853
> 
> 标签：sql, vb.net

```
RentReturnCommand.CommandText = "update CustomerOrder set Status = '" &_ OrderStatusComboBox.Text & "' WHERE  CID = " & CIDTextBox.Text & "  AND CompID = " &_ CompIDText.Text

RentReturnCommand.ExecuteNonQuery() 
```

`RentReturnCommand.ExecuteNonQuery()`不断显示为错误。

我已经查找了所有可能的解决方案来改变这一点，但没有任何效果。我的 CID 在 Access 数据库中列为自动编号。

我知道自动编号往往会导致涉及此类 SQL 的问题，但我确实需要在我的程序中查询它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:01:41.887

如果我在您的文本框中输入“fred”，则会发生此错误。有两件事可以帮助您验证所有用户输入和使用查询参数。

# c# - 消息框上显示的回收站图像

> ID：16070969
> 
> 赞同：-1
> 
> 时间：2013-04-17T21:56:29.690
> 
> 标签：c#, winforms, messagebox

编写一个winforms 应用程序。我创建了一个是/否消息框，当用户尝试删除文件时显示给用户，但我想将回收站图像添加到消息中。您如何获得访问权限，用于消息框系统图标/图像之类的东西？

```
MessageBox.Show("Please confirm that you would like to delete the folder named:" + fldnme, 
                        "Confirm Folder Delete", 
                        MessageBoxButtons.YesNo, 
                        MessageBoxIcon.Exclamation); 
```

显然我会用替换messageboxicon？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T22:00:54.120

简短的回答：你不能。

Win32 MessageBox 窗口只允许您选择与消息框的用途相对应的四个图标之一（其他成员`MessageBoxIcon`是同义词）：

*   向用户询问确认问题（带有问号图标的是/否消息框）
*   警告用户（通常是带有警告三角形图标的单个按钮）
*   通知用户一些信息（通常是带有“i”图标的单个按钮）
*   通知用户严重错误（通常是带有红色停止图标的单个按钮）

在您的用例中，要让用户确认删除文件，您应该使用问号图标或警告三角形图标。

`File.Delete`如果用户选择是而不是将文件移动到回收站，我将假设您调用。如果是这种情况，那么您真的不应该使用回收站图标（即使可以），因为您没有将其移动到垃圾箱，而是立即将其删除。

# math - 传递函数中的坐标误差

> ID：16070970
> 
> 赞同：0
> 
> 时间：2013-04-17T21:56:33.967
> 
> 标签：math, opencv, line, coordinate-systems

我正在尝试将点的坐标转移到新生成的系统坐标

原系统中的原点在左上角....

我编写了以下函数来传输
我正在使用从这个问题 [pre_question](https://stackoverflow.com/questions/15956033/transfer-coordinates-to-a-new-system)得到的形式的坐标 这个问题有 2 张照片显示我的意思和每个部分的标志

现在的问题是，我得到了 w 的负值！谁能检查一下这个功能，让我知道问题出在哪里

谢谢

{

```
CvPoint transfer_coordinate (CvPoint pt1 , CvPoint pt2 , CvPoint pt3 , CvPoint pt4 , CvPoint origin , CvPoint current)
{
// pt1 , pt2 ==> points in line Z 
// pt3 , pt4 ==> points in line W 
double a1 , a2 , b1 , b2 , d1 , d2;

d1= sqrt(pow((pt1.x - pt2.x),2.0)+ pow((pt1.y - pt2.y),2.0)); 
d2= sqrt(pow((pt3.x - pt4.x),2.0)+ pow((pt3.y - pt4.y),2.0)); 

a1 =(pt1.y-pt2.y)/d1;
b1 =(pt2.x-pt1.x)/d1;

a2 =(pt3.y-pt4.y)/d2; 
b2 =(pt4.x-pt3.x)/d2; 

CvPoint new_point;
//z = -sqrt(a1^2+b1^2)*(a2*(x-x0)+b2*(y-y0))/(a2*b1-a1*b2)
//w =  sqrt(a2^2+b2^2)*(a1*(x-x0)+b1*(y-y0))/(a1*b2-a2*b1)
//z
new_point.x = -round(sqrt(pow(a1,2.0)+ pow(b1,2.0)) * (a2 * (current.x - origin.x) + b2 * (current.y - origin.y))/(a2 * b1 - a1 * b2));
// w
new_point.y = round(sqrt(pow(a2,2.0)+ pow(b2,2.0)) * (a1 * (current.x - origin.x) + b1 * (current.y - origin.y))/(a1 * b2 - a2 * b1)); 

CvPoint reverse_point; 
//x = x0 - b1*z/sqrt(a1^2+b1^2) + b2*w/sqrt(a2^2+b2^2)
//y = y0 + a1*z/sqrt(a1^2+b1^2) - a2*w/sqrt(a2^2+b2^2)
//x
reverse_point.x = round (origin.x - b1 * new_point.x / sqrt(pow(a1,2.0) + pow(b1,2.0)) + b2 * new_point.y /sqrt(pow(a2,2)+ pow(b2,2)));
//y
reverse_point.y = round (origin.y + a1 * new_point.x / sqrt(pow(a1,2.0) + pow(b1,2.0)) - a2 * new_point.y /sqrt(pow(a2,2)+ pow(b2,2)));

//printf("\n points in Z line (%d,%d),(%d,%d) , points in W line (%d,%d),(%d,%d) , origin (%d,%d)",pt1.x,pt1.y,pt2.x,pt2.y,pt3.x,pt3.y,pt4.x,pt4.y,origin.x,origin.y);
//printf("\n current point = (%d,%d) , new point = (%d,%d) , reverse point = (%d,%d)" , current.x,current.y,new_point.x,new_point.y,reverse_point.x,reverse_point.y);

return new_point ; 
```

}

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:47:07.453

如果您的 W 轴对应于 X 轴，则仿射变换矩阵为 M = [R]*[T]，其中 R 是 Phi 角的旋转矩阵，T 是 x0, y0 的平移矩阵

```
R = Cos(phi) -Sin(phi) 0
    Sin(phi)  Cos(phi) 0
    0         0       1 
```

和

```
T = 1  0  0
    0  1  0
    dx dy 1 
```

您必须将这些矩阵相乘才能得到 M 矩阵并得到逆矩阵 MR = Inverse(M)。然后您可以使用 M 和 MR 将坐标从 XY 系统转换为 WZ 系统，反之亦然 [xnew, ynew, 1] = [xold,yold, 1] * [M]

[更多信息在这里](http://cs.iupui.edu/~sfang/cs550/cs550-note3.pdf)

# ruby-on-rails - 使用 Mongoid 的 Rails 博客 - 在创建帖子时自动生成短 URL

> ID：16070977
> 
> 赞同：2
> 
> 时间：2013-04-17T21:57:16.930
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid, mongoid3

我有一个使用 Rails 和 Mongoid ORM 的简单博客引擎。

我在博客中有 2 个模型，“文章”和“网址”。Article 模型包含所有帖子内容，Url 类是生成器函数，它获取 Article 的 slug 并为其创建一个短 URL。

例如 ***my-sample-blog-post*** -> ***ai3n*** 等等等等。

问题是我在将两者联系起来时遇到问题。我也不能在 Article 类中嵌入 URL 类。

我的问题是，在文章模型中创建帖子时，我可以动态生成一个短 URL 吗？Article 模型已经使用 Mongoid::slug 给我很好的帖子 slug，但我还需要每个帖子的短 URL。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T01:24:56.590

我认为您可能可以使用创建后回调来生成短 url，然后将其存储在 Article 模型内的字段中。

像这样的东西：

```
class Article

  field :title
  slug  :title
  field :short_url

  after_create :generate_short_url

  def generate_short_url
    self.short_url = shorten_it(self.slug)   # assuming you implement shorten_it 
    self.save
  end
end 
```

# gwt - 使用 ui:field 声明将 id 添加到字段

> ID：16070979
> 
> 赞同：12
> 
> 时间：2013-04-17T21:57:26.697
> 
> 标签：gwt, uibinder

我试图在我的 UiBinder XML 中声明这些元素：

```
<label for="lastName">Last Name:</label>
<input type="text" id="lastName" ui:field="lastNameField" maxlength="150" /> 
```

简单地说，与文本输入相关联的标签。

但是，当我尝试编译时，出现此错误：

> [错误] 不能在同一元素 Element (:23) 上声明 id="lastName" 和 ui:field="lastNameField"

这似乎是一个愚蠢的限制，尤其是因为`ui:field`它不会生成 ID。到目前为止，我发现的唯一解决方案是在 Java 代码本身中分配 ID，如下所示：

```
@UiElement InputElement lastNameField;
...
lastNameField.setId("lastName"); 
```

这给我的 Java 添加了不必要的混乱。它还增加了复杂性，即如果此 ID 在某处更新，`<label>`则 XML 中的声明也需要更新（并且标签没有 @UiElement，因此从 Java 端几乎完全不可见。）

**有没有办法从 UiBinder XML 本身中将 ID 添加到具有 ui:field 声明的元素？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T22:39:39.613

UiBinder 使用 ID 来实现它的`ui:field`魔力，所以你不能从 XML 中设置它。

这样做的方法是使用带有 ID 的 Java 常量并从双方使用它：

```
@UiField(provided = true)
final String lastNameId = Document.get().createUniqueId();

@UiField InputElement lastNameField;

…

lastNameField.setId(LAST_NAME_ID); 
```

在 XML 中：

```
<ui:with field="lastNameId" type="java.lang.String"/>

…

<label for="{lastNameId}">Last Name:</label>
<input ui:field="lastNameField" maxlength="150"/> 
```

请注意，我没有用 测试上面的代码`type="java.lang.String"`，我一直使用包含各种标识符的类（或者更确切地说，带有生成器的接口）

替代方案是：

*   如果可以，请使用以下替代语法`<label>`：

    ```
    <label>Last Name: <input ui:field="lastNameField" maxlength="150"/></label> 
    ```

*   `for=""`从 Java 中读取值以在其中使用它`setId()`，这样至少可以删除重复项，但是您仍然会遇到 ID 可能不是唯一的问题（只要您多次使用 UiBinder-widget）

    ```
    <label ui:field="lastNameLabel" for="lastName">Last Name:</label>
    <input ui:field="lastNameField" maxlength="150" /> 
    ```

    ```
    @UiField LabelElement lastNameLabel;
    @UiField InputElement lastNameField;

    …

    lastNameField.setIf(lastNameLabel.getHtmlFor()); 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-25T16:30:57.550

您可以通过像这样访问 uibinder 中的 id 来简化 Thomas 的回答（有点）：

```
<b:ControlLabel for="{testTextBox.getId}">TextBox</b:ControlLabel>
<b:TextBox ui:field="testTextBox"></b:TextBox>

// In code behind:
@UiField(provided = true)
TextBox testTextBox = new TextBox();
...
testTextBox.setId("test");
this.initWidget(uiBinder.createAndBindUi(this)); 
```

如果您使用 GWT Bootstrap，那么有一个方便的功能可以让您仅在 xml 中连接所有内容：

```
<b:ControlLabel for="{testTextBox.getId}">TextBox</b:ControlLabel>
<b:TextBox ui:field="testTextBox" b:id="test"></b:TextBox> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-06T20:35:02.850

`b:id="test"`适用于所有[gwtbootstrap3](https://github.com/gwtbootstrap3/gwtbootstrap3)小部件。

# performance - calcOpticalFlowSF 的更快替代方案

> ID：16070981
> 
> 赞同：2
> 
> 时间：2013-04-17T21:57:33.023
> 
> 标签：performance, opencv, opticalflow

calcOpticalFlowSF 有更快的替代方案吗？它太慢了，想用来自视频的一系列帧来运行这个东西。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T12:56:51.973

有几种基于光流的运动估计方法，但您必须考虑以下几点：

*   您是否仅限于 CPU 实现/GPU 的实现可能会大大减少运行时间
*   您需要密集运动场还是只需要一组稀疏运动矢量/稀疏 OF 方法更具可扩展性，因此需要更少的运行时间
*   准确性/密集方法的非常高的准确性仅在运动边界上最为关键。在许多应用程序中，您可以通过稀疏运动矢量网格来近似密集运动场，因此可以使用稀疏方法作为金字塔 Lucas Kanade (OpenCV)

当前的库/方法是：

密集方法：

*   OpenCV 2.4.4 在 GPU BroxOpticalFlow 上提供的速度也很快
*   [GPU4Vision](http://gpu4vision.icg.tugraz.at/index.php?content=subsites/flowlib/flowlib.php) Group的FlowLib 提供了高精度的 GPU 实现
*   GPU 上[TV-L1](http://www.inf.ethz.ch/personal/chzach/opensource.html)的 GPU 实现由

稀疏方法：

*   从 2.4.2 开始的 OpenCV 在 GPU 上提供了金字塔形 Lucas Kanade /早期版本也在 CPU 上非常快速地实现
*   [RLOFLib](http://www.nue.tu-berlin.de/menue/forschung/projekte/rlof/)为GPU/CPU 和 Matlab 提供了更准确的实现
*   [增益自适应 Lucas Kanade / KLT](http://www.inf.ethz.ch/personal/chzach/opensource.html)也可用于GPU

您还可以查看当前的光流基准，研究人员有时会提供链接。常见的光流基准是[Middlebury](http://vision.middlebury.edu/flow/)和[KITTI](http://www.cvlibs.net/datasets/kitti/eval_stereo_flow.php?benchmark=flow&error=3&eval=est)

# html - 产权分割线

> ID：16070982
> 
> 赞同：0
> 
> 时间：2013-04-17T21:57:35.557
> 
> 标签：html, css

我想在页面标题的右侧放置一个分隔符，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/8f9hi.jpg)

我尝试了这段代码，但它是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/pyUga.jpg)

这是代码：

```
<h4 class="section-title">Lastest From Blog</h4>

.section-title {
    font-size:18px;
    background-image: url('images/divider-bar.png');
    background-repeat: repeat-x;
    padding-bottom: 12px;
    color: #6c6c6c;
} 
```

这是小提琴：http: [//jsfiddle.net/Chead/hrYyg/](http://jsfiddle.net/Chead/hrYyg/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:16:50.057

你去：http: [//jsfiddle.net/KQdcr/](http://jsfiddle.net/KQdcr/)

只需将您的文本包装在具有白色背景的跨度中：

```
.section-title span { background: white; padding-right: 3px; } 
```

当然，如果您的页面背景不是纯色，这将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T14:27:21.367

在这里你`go` [***试试这个。***](http://jsfiddle.net/hrYyg/2/) 调整容器和分隔线的宽度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T10:39:07.557

只需`img`在标题中添加标签并将文本与图像对齐

```
<h4 class="section-title">Lastest From Blog <img src="images/divider-bar.png" /></h4> 
```

# mysql - Mysql选择其中id<100

> ID：16070983
> 
> 赞同：-2
> 
> 时间：2013-04-17T21:57:39.063
> 
> 标签：mysql, select

我正在尝试在 php 中进行此查询：

```
$sql= "SELECT pcampo6 FROM productos WHERE id >= 100"; 
```

这是我得到的错误：

```
Invalid query: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '= 100' at line 1 
```

我也试过：

```
$sql = "SELECT `pcampo6` FROM productos WHERE eliminado=0 AND `id` >= 101";
$sql = "SELECT 'pcampo6' FROM productos WHERE eliminado=0 AND 'id' >= 101";
$sql = "SELECT pcampo6 FROM productos WHERE eliminado=0 AND id >= '101'"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T22:02:07.050

您发布的查询没有*任何问题。*

[查看演示](http://sqlfiddle.com/#!2/4aacb/1)

*   如果您的`id`列不是整数类型，请尝试在值周围使用单引号

该错误可能来自您未向我们展示的代码中的其他地方。

# javascript - 仅在 asp.net 中的时间选择器

> ID：16070984
> 
> 赞同：3
> 
> 时间：2013-04-17T21:57:42.843
> 
> 标签：javascript, jquery, asp.net, vb.net, timepicker

我正在创建一个 vb.net 页面。该页面允许用户安排讲座、约会等。我有几个文本框可以添加详细信息。我使用了 asp:calendar 控件来选择日期。但是我找不到时间选择器。需要明确的是，我有三个文本框。一个代表一天，一个代表开始时间，一个代表结束时间。我想要的只是一个时间选择器。当用户单击按钮或链接时，会弹出一个包含一天中时间的列表。用户单击任何时间，我可以获取该时间并将其存储在一个变量中以传递给我的数据库，就像日历控件一样。那是过分的要求。有没有人在这里得到答案。我知道这已经被问过很多次了，我知道那里有答案，但到目前为止我已经花了 9 个小时来研究那里的解决方案，但没有成功，所以我希望请请这里有人可以帮助我。我绝望了，受够了，这可能是我的无能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T07:04:06.250

尝试使用[jQuery Timepicker](http://trentrichardson.com/examples/timepicker/#tp-examples)它有许多很酷的功能，例如

1.  时区支持
2.  日期时间选择器
3.  时间选择器
4.  Jquery UI 主题支持和许多其他调整。

使用非常简单有效

**日期和时间选择器示例**

**HTML**

```
<input type="text" name="basic_example" id="basic_example" class="hasDatepicker"> 
```

**Javascript**

```
$('#basic_example').datetimepicker(); 
```

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/YATqc.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T15:54:07.133

谢谢你们的建议。[实际上，我自己在http://www.codeproject.com/Articles/213311/Time-Picker-Ajax-Extender-Control](http://www.codeproject.com/Articles/213311/Time-Picker-Ajax-Extender-Control)找到了一个非常好的

它非常易于使用。只需将两个文件夹“Binaries”和“Ajaxified”拖入您的项目。然后，在工具箱中，右键单击并选择新项目。导航到解决方案中的 biaries 文件夹并选择 ajaxified.dll。这会将时间选择器添加到您的工具包中。您可以将其拖到您的页面上。由于它是扩展程序，因此必须将其添加到目标中。这通常是一个文本框。它可以由`TargetControlID="xxxxx`控件定义。

我知道这可能是一个过于具体的指南，但只有当你知道如何做时，这些事情才会变得容易。我可以说我现在知道怎么晚了 10 个可怕的小时。

注意 出于格式化原因，将时间选择器与目标控件一起放在表格单元格中是个好主意。我的也包含在 DIV 中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T06:48:41.683

有最简单的方法
[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)

```
<asp:Textbox Id="Date1" runat="server" />
<ajaxToolkit:Calendar runat="server"
    TargetControlID="Date1"
    CssClass="ClassName"
    Format="MMMM d, yyyy"
    PopupButtonID="Image1" /> 
```

和像这样的时间选择器
[http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

# php - 重写规则不使用匹配

> ID：16070985
> 
> 赞同：0
> 
> 时间：2013-04-17T21:57:47.377
> 
> 标签：php, regex, wordpress, url-rewriting

客户的基于 WordPress 的网站有员工页面，其 url 如下：
`/bio/john-doe/`
`/bio/nim-rod/`
等等...

但是在他们印刷的小册子和名片上，他们想要这样的 URL：
`/nim.rod`
并让网站显示`/bio/nim-rod/`页面。

根据客户的说法，这曾经有效。plugins 文件夹中有一个 php 文件，其中包含此功能的重写规则（见下文），但我无法让它工作。

我研究了这个问题并在 WordPress 的支持网站上找到[了这篇文章](http://wordpress.org/support/topic/custom-rewrite-rules-stopped-working-with-31)，但建议的修复方法不起作用：

为了解决这个问题，我在代码中添加了一些测试规则，例如这个规则确实重定向`/any.name`到`/bio/nim-rod/`页面，

```
$newrules['([a-zA-Z]+)\.([a-zA-Z]+)'] = 'index.php?pagename=nim-rod'; 
```

因此重写模块正在查找自定义规则并显示`/bio/nim-rod/`页面，但使用正则表达式匹配的现有规则最终显示站点的 404 页面。所以从正则表达式模式替换匹配值似乎有问题，但我找不到语法有任何问题，我不知道如何进一步排除故障。现有的模式看起来应该可以工作，不是吗？

大约 6 个月前，服务器出现了硬件问题，我们的前 WordPress/PHP 专家重建了网站并将其升级到 3.3.1 版本。我不知道旧版本是什么，但新版本可能破坏了这个功能。

有没有可以指点我的故障排除提示？
有什么工具可以用来调试或检查正则表达式的工作方式吗？

```
<?php
/**
 * @package Custom_Redirector
 * @version 1.0.0
 */
/*
Plugin Name: Custom Redirector
Plugin URI: http://wordpress.org/#
Description: 
Version: 1.0.0
Author URI: http://ma.tt/
*/

add_filter('rewrite_rules_array','wp_insertMyRewriteRules');
add_filter('query_vars','wp_insertMyRewriteQueryVars');
add_filter('init','flushRules');

// Remember to flush_rules() when adding rules
function flushRules(){
    global $wp_rewrite;
    $wp_rewrite->flush_rules();
}

// Adding a new rule
function wp_insertMyRewriteRules($rules)
{
    $newrules = array();
    $newrules['([a-zA-Z]+)\.([a-zA-Z]+)'] = 'index.php?pagename=$matches[1]-$matches[2]';
    return $newrules + $rules;
}

// Adding the id var so that WP recognizes it
function wp_insertMyRewriteQueryVars($vars)
{
    array_push($vars, 'id');
    return $vars;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:07:16.453

尝试这个;

```
([a-zA-Z]+)(?:\.|-)([a-zA-Z]+) 
```

顺便说一句，对于这个字符串，它匹配两件事`index.php?pagename=nim-rod`：

`index.php`?页面名=`nim-rod`

如果您不想要，请使用；

```
([a-zA-Z]+)-([a-zA-Z]+) 
```

# twitter-bootstrap - 将 bootstrap twitter 与 google blogger 一起使用

> ID：16070994
> 
> 赞同：7
> 
> 时间：2013-04-17T21:58:54.220
> 
> 标签：twitter-bootstrap, blogger

我一直在尝试在 blogger.com 上的谷歌博客上使用 bootstrap twitter。显然它不起作用，我很确定问题是我如何包含 css 和 js 文件。我已将 .css 和 .js 文件作为 .txt 文件上传到在线纯 .txt 上传服务器。我将它们包括在脑海中。

引导程序.css

```
<link href='http://m.uploadedit.com/b013/1366225851722.txt' rel='stylesheet'/> 
```

bootstrap.min.css

```
<link href='http://m.uploadedit.com/b013/1366225875450.txt' rel='stylesheet'/> 
```

引导响应.css

```
<link href='http://m.uploadedit.com/b013/136622647822.txt' rel='stylesheet'/> 
```

查询

```
<script src='//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'/>
<script src='//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js'/>  
<script src='http://m.uploadedit.com/b013/1366226081928.txt'/> 
```

引导程序.js

```
<script src='http://m.uploadedit.com/b013/1366225665368.txt'/> 
```

bootsrap.min.js

```
<script src='http://m.uploadedit.com/b013/1366225732588.txt'/> 
```

当它们是 .txt 时，是否无法链接到这些文件？如果没有，我有什么选择？我已经在博客文章中看到了 Dropbox 和 google drive，但据我尝试和搜索，不可能有纯文本页面 - Dropbox 和驱动器为其界面添加了 html。

**更新：** 我通过使用免费的网络主机来解决它，像这样上传普通的 .js 和 .css [-](http://bootstrapfiles.webege.com/)我刚刚搜索了“免费网络主机”。

问题是免费的网络主机可能相当慢 - 我选择的网络主机会通知 DDOS 攻击。有没有更好的选择 - 如果我不想为服务器空间付费？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-01T14:51:24.620

您可以使用 netdna 的 cdn 进行引导： http: [//www.bootstrapcdn.com](http://www.bootstrapcdn.com)

我正在使用它，我对结果非常满意 ( [http://pr-nizar.blogspot.com](http://pr-nizar.blogspot.com) )。

或者，如果您使用自定义版本的引导程序，则可以将 DropBox 用作 CDN。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T06:46:07.733

如果你使用来自[jsDeliver](http://www.jsdelivr.com/#!bootstrap)的 Bootstrap Twitter 文件的链接，它是一个用于 javascript 库、jQuery 插件、字体和 CSS 框架的免费 CDN。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T17:46:25.073

是的，有更好的选择

1.转到[谷歌代码](https://code.google.com/hosting/)。它是免费的:)

2.点击“新建项目”

3.填写上面提供您的信息的表格，然后单击“创建项目”。

4.单击“下载”选项卡。现在单击“新下载”选项卡。

5.填写所需信息。浏览您的 Js/css 文件并将其附加。现在点击“提交文件”。

6.如果你想得到你的java脚本文件的直接链接，点击文件名并选择“复制链接地址”。

# c# - 大数的素数和

> ID：16070996
> 
> 赞同：0
> 
> 时间：2013-04-17T21:59:06.770
> 
> 标签：c#, primes

我一直在研究这个问题一段时间，但我无法弄清楚为什么我不断收到溢出错误。

该代码在一定程度上可以正常工作，然后不适用于较大的值。我已经对其进行了测试，发现断点是输入 225287（最后一个非断点值为 225286，输出为 2147431335）。

我怎样才能让它为 2,000,000 工作？

```
class SumOfPrimes{

static void Main(string[] args)
    {

        Primes primes = new Primes(2000000);         
        Console.WriteLine(primes.list_of_primes.Sum());
        Console.ReadLine();
    }

  }

class Primes
{
    public HashSet<int> all_numbers = new HashSet<int>();
    public HashSet<int> list_of_primes = new HashSet<int>();
    public HashSet<int> list_of_nonprimes = new HashSet<int>();

    public Primes(int n)
    {
        all_numbers = new HashSet<int>(Enumerable.Range(1, n));
        for (int i = 2; i < Math.Sqrt(n) + 1; i++)
        {
            for (int j = 3; j <= n / i; j++)
                list_of_nonprimes.Add(i * j);
        }
        list_of_primes = new HashSet<int>(all_numbers.Except(list_of_nonprimes));
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:02:19.453

您拥有的值不适合 int 大小的内存，因此请尝试使用此处网站上使用的 biginteger。

[http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T22:06:18.987

发生的是整数溢出。在 32 位系统上，`int`最多只能保存 2^31-1 (2147483647) 的正值。您可以尝试使用 64 位整数（我认为 C# 有它们），或者找到一个任意大小的整数库（@Calpis 有助于链接到内置的）。