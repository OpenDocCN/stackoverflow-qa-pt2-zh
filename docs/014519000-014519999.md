# StackOverflow 问答 14519000-14519999

# r - 两个相关系数差异的显着性检验

> ID：14519006
> 
> 赞同：7
> 
> 时间：2013-01-25T09:36:59.277
> 
> 标签：r, statistics, correlation

您如何测试两个相关系数是否显着不同 - 在 GNU R 中？

也就是说，如果相同变量（例如，年龄和收入）之间的影响在两个不同的总体（子样本）中是不同的。

有关背景信息，请参阅[如何比较不同组中相同变量](https://stats.stackexchange.com/questions/13902/how-do-i-compare-correlation-coefficients-of-the-same-variables-across-different)的相关系数和[Spearman 相关系数差异的显着性检验](https://stats.stackexchange.com/questions/17696/significance-test-on-the-difference-of-spearmans-correlation-coefficient)（均在 CrossValidated 上）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T09:36:59.277

[如果您想比较多对系数（基于两个相关系数之间差异的显着性](http://r.789695.n4.nabble.com/Significance-of-the-difference-between-two-correlation-coefficients-tt3063765.html#a3063946)和[定量分析和政治，PDF](http://imai.princeton.edu/teaching/files/Handout8.pdf) ），这里是一个 GNU R 的现成函数：

```
cor.diff.test = function(r1, r2, n1, n2, alternative = c("two.sided", "less", "greater")) {

  Z1 = 0.5 * log( (1+r1)/(1-r1) )
  Z2 = 0.5 * log( (1+r2)/(1-r2) )

  diff = Z1 - Z2
  SEdiff = sqrt( 1 / (n1 - 3) + 1 / (n2 - 3))
  diff.Z = diff / SEdiff

  if (alternative == "less") {
    return(pnorm(diff.Z, lower.tail=F))
  } else if (alternative == "greater") {
    return(pnorm(-diff.Z, lower.tail=F))
  } else if (alternative == "two.sided") {
    return(2 * pnorm( abs(diff.Z), lower.tail=F))
  } else {
    warning(paste("Invalid alterantive", alternative), domain=NA)
    return(NA)
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-05T10:29:47.827

包[cocor](http://cran.r-project.org/web/packages/cocor/)提供了测试两个独立或依赖相关系数是否显着不同的函数。该软件包还有一个 Web 界面：http: [//comparingcorrelations.org](http://comparingcorrelations.org)

# c - How to read xml value with space

> ID：14519011
> 
> 赞同：1
> 
> 时间：2013-01-25T09:37:15.163
> 
> 标签：c, mini-xml

I write an xml document like this:

```
<doc>
  <node1>
    <value1>aa bb</value1>
    <value2>cc dd</value2>
  </node1>
  <node2>
    <value1>aaa bbb</value1>
    <value2>ccc ddd</value2>
  </node2>
</doc> 
```

I try to parse this document with minixml library :

```
 mxml_node_t                 *b = tree, *c; //tree is global variable

    while (b) {
        if (b && b->type == MXML_ELEMENT) {
            if(strcmp(b->value.element.name, "value1") == 0)
            {
                c = mxmlWalkNext(b, b, MXML_DESCEND);
                if (c && c->type == MXML_TEXT)
                {
                    if(c->value.text.string != NULL)
                    {
                        printf("value1=%s"c->value.text.string);
                    }
                }
            }
        }
        if (b && b->type == MXML_ELEMENT) {
            if(strcmp(b->value.element.name, "value2") == 0)
            {
                c = mxmlWalkNext(b, b, MXML_DESCEND);
                if (c && c->type == MXML_TEXT)
                {
                    if(c->value.text.string != NULL)
                    {
                        printf("value2=%s"c->value.text.string);
                    }
                }
            }
        }
        b = mxmlWalkNext(b, tree, MXML_DESCEND);
    } 
```

When I parse the file I found this result:

```
value1=aa //the value is not right it must be "aa bb"
value2=cc
... 
```

Have you an idea, how to solve my problem?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T09:13:43.957

I used the following solution:

```
mxml_node_t                 *b = tree; //tree is global variable
char                        *tmp,*value1=NULL,*value2=NULL;

while (b) {
    if (b && b->type == MXML_TEXT &&
        b->value.text.string &&
        b->parent->type == MXML_ELEMENT &&
        !strcmp(b->parent->value.element.name, "value1"))
        {
            if(value1 != NULL)
            {
                value1 = strdup(b->value.text.string);
            }
            else
            {
                tmp = value1;
                if (asprintf(&value1,"%s %s",tmp, b->value.text.string) == -1)
                {
                    return -1;
                }
                free(tmp);
                tmp=NULL;
            }
        }
        else
        {
            if (value1!=NULL)
            {
                printf("value1=%s",value1);
                free(value1);
                value1=NULL;
            }
        }
    if (b && b->type == MXML_TEXT &&
        b->value.text.string &&
        b->parent->type == MXML_ELEMENT &&
        !strcmp(b->parent->value.element.name, "value2"))
        {
            if(value2 != NULL)
            {
                value2 = strdup(b->value.text.string);
            }
            else
            {
                tmp = value2;
                if (asprintf(&value2,"%s %s",tmp, b->value.text.string) == -1)
                {
                    return -1;
                }
                free(tmp);
                tmp=NULL;
            }
        }
        else
        {
            if (value2!=NULL)
            {
                printf("value2=%s",value2);
                free(value2);
                value2=NULL;
            }
        }
    b = mxmlWalkNext(b, tree, MXML_DESCEND);
} 
```

# formula - OpenOffice Calc - 查找包含数据的行中的最后一个单元格

> ID：14519012
> 
> 赞同：0
> 
> 时间：2013-01-25T09:37:18.370
> 
> 标签：formula, openoffice-calc

我有一个电子表格，其中包含歌曲列表和使用日期。我希望能够在日期列表的开头有一个单元格，它只显示使用特定歌曲的最后日期。

我一直找不到可以执行此操作的公式函数，这并不意味着它不存在。

所以，为了减少问题：我需要一个公式，它可以在给定的行或单元格范围中找到最后一个非空白单元格。

此外，在填充的行之间可能存在空白的单元格。

请问openoffice专家可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-14T19:51:41.167

老问题，但我在 OpenOffice Calc（4.1.3 版）中也有这个需要。

我可以用数组公式解决它，即按**Ctrl+Shift+Enter**离开单元格：

连续最后一个数字：

```
=MAX(ISNUMBER(A1:A1048576)*ROW(A1:A1048576)) 
```

一行中的最后一个文本：

```
=MAX(ISTEXT(A1:A1048576)*ROW(A1:A1048576)) 
```

连续最后一个非空单元格：

```
=MAX(NOT(ISBLANK(A1:A1048576))*ROW(A1:A1048576)) 
```

即使您在最后一个之前的单元格之间有空单元格，上述三个函数也可以工作。

至于日期，我无法给出具体的答案，但在 LibreOffice 帮助中，有一个有用的线程讨论[了检查单元格值是否为日期的标准。](https://ask.libreoffice.org/en/question/238080/criteria-to-check-if-cell-value-is-a-date/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T09:28:36.290

如果您只想查看最新日期，为什么不使用

```
=MAX(A1:A1048576) 
```

不幸的是，OpenOffice 不支持 (A:A) 来解决整个列...

或者，您可以录制一个宏，首先转到单元格 A1048576，然后使用 Ctrl+Up 跳转到最后使用的单元格。

# android - 在Android中接收结构化数据KSOAP2

> ID：14519013
> 
> 赞同：0
> 
> 时间：2013-01-25T09:37:30.827
> 
> 标签：android, ksoap

我在尝试从 ksoap getResponse() 接收结构化数据时遇到问题；

我已经仔细阅读了使用 SoapObjects 从站点发送和接收数据的指南：[链接到站点](http://www.helloandroid.com/tutorials/using-ksoap2-android-and-parsing-output-data)

我正在使用这个[WSDL](https://webapi.allegro.pl/uploader.php?wsdl)

我试图获得的对象具有如下结构：

```
<message name="doSearchResponse">
   <part name="search-count" type="xsd:int"/>
   <part name="search-count-featured" type="xsd:int"/>
   <part name="search-array" type="typens:ArrayOfSearchResponse"/>
   <part name="search-excluded-words" type="typens:ArrayOfExcludedWords"/>
   <part name="search-categories" type="typens:ArrayOfCategoriesStruct"/>
</message> 
```

我认为这是 doSearch 方法中使用的一种输出对象：

```
<operation name="doSearch">
    <input message="typens:doSearchRequest"/>
    <output message="typens:doSearchResponse"/>
</operation> 
```

这是我试图执行搜索操作然后获取我上面介绍的对象（doSearchResponse）的代码。

```
public void search(String searchPhrase) {

    /* search criteria holder */
    SoapObject searchOptType = new SoapObject(API_NAMESPACE, "SearchOptType");
    searchOptType.addProperty("search-string", searchPhrase);

    /* search method */
    SoapObject doSearch = new SoapObject(API_NAMESPACE, "doSearch");
    doSearch.addProperty("session-handle", sessionToken);
    doSearch.addProperty("search-query", searchOptType);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);

    envelope.dotNet = true;

    envelope.setOutputSoapObject(doSearch);

    Object response = null;
    try {
        transport.call("", envelope);

        response = envelope.getResponse();
        System.out.println(response.getClass());
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

搜索工作正常，但它只返回一个对象 - 一个整数对象（不是数组），它是找到的匹配项到 searchPhrase 的计数。我认为这是 doSearchResponse 对象中的第一个位置。但我需要其余的，尤其是：search-array。我究竟做错了什么？这不是要处理envelope.call("and this string here", ...)吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:42:54.640

您将“”替换为 SOAP_ACTION，如下所示

```
 transport.call(SOAP_ACTION, envelope); 
```

还有你检查过响应类型是字符串还是数组..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T18:02:16.620

我解决了。

问题出在 2.4 版中的 KSOAP2 库。实际上我不知道为什么它只返回一个 Integer 对象。但是在 3.0.0 RC4 版本中，它以同样的方式返回给我 Vector 对象，该对象实现了我期望的对象。所以无论如何谢谢:)

# tcl - 如何避免 tcl 中的主脚本由于事件循环而被阻塞？

> ID：14519014
> 
> 赞同：1
> 
> 时间：2013-01-25T09:37:32.777
> 
> 标签：tcl

我在我的 tcl 代码中使用了一个主脚本，我在其中打开了一个 udp 端口​​来读取它上面的数据。我已经使用 fileevent 进行了此操作，我正在使用“vwait”命令进入事件循环。但我不希望主脚本因此而被阻止。简而言之，我希望主脚本继续流动，等待 udp 数据事件应该在后台。如何实现这一点。请帮我。我为此浪费了很多时间，但一切都顺理成章。任何帮助都会非常显着。

这是我的主要脚本：

```
#!/usr/bin/env tclsh8.5

proc create_udp_payload { command data } {
    set payload     ""
    append payload $command
    append payload  [ format %08x [ expr $data ] ]
    return $payload
}

proc send_udp_packet { payload } {
    puts -nonewline $soc::s [binary format H* $payload]
    puts "\nTransmitting the UDP payload $payload"
    return 0
}

set DEST_IP_ADDR        10.10.20.241
set DEST_UDP_PORT       5558
set soc::s              [udp_open]
puts "Listening on udp port : [fconfigure $soc::s -myport]"
udp_conf $soc::s $DEST_IP_ADDR $DEST_UDP_PORT
fconfigure $soc::s -buffering none -translation binary
fileevent $soc::s readable [list ::udp_listen]

for { set j 0 } { $j < 10 } { incr j} {
    puts "Sending read request to read register $j"
    set command "00"
    append command  [format %02x $j]
    send_udp_packet [create_udp_payload $command  0x0000]
    after 1000
    flush $soc::s
}

wait forever #to enter into the event loop

for { set j 2 } { $j < 12 } { incr j} {
    puts "Sending  write request to write register $j"
    set command "80"
    append command [format %02x $j]
    send_udp_packet [create_udp_payload $command [expr {0x0000 | $j }] ]
    after 2000
    flush $soc::s
} 
```

实际上，我想从硬件中一个一个地读取 10 个寄存器，为此我使用了一个 for 循环，但我不知道如何为此进入事件循环。因为它阻塞了主脚本。同样在那之后我想一个一个地写相同硬件的10个寄存器。任何人都可以修改此代码以相应地工作。在此先感谢您........

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:48:19.553

[`after idle`](http://www.tcl.tk/man/tcl8.5/TclCmd/after.htm#M9)我认为使用“技巧”可以轻松解决您的问题。这个想法是设置你的“通道可读”事件处理程序，然后为“事件循环空闲”条件安排数据发送代码的执行，然后进入事件循环：

像这样：

```
# 1\. Create and configure the UDP endpoint:
set udp [udp_open ...]
...
# 2\. Install "chan readable" callback handlers for that endpoint:
fileevent $udp readable ...
...
# 3\. Schedule the one-off callback to send your data:
after idle [list post_data $udp]
# 4\. Enter the event loop:
vwait ::done 
```

一旦`vwait`被调用，事件循环机制就会查看是否有任何未决事件（应该没有），一旦未决事件队列耗尽或为空，所有使用安装的处理程序都会`after idle`被调用，并且您的数据会被发送出去.

请注意，此方法也适用于其他类似情况，例如，没有什么可以阻止您从`after idle`事件循环调用的其他处理程序安装此类处理程序。这使您永远不会离开事件循环（就像 GUI 程序和网络服务器通常那样）。

# php - php包含为右值？

> ID：14519020
> 
> 赞同：0
> 
> 时间：2013-01-25T09:38:00.717
> 
> 标签：php, caching, include, require, rvalue

我想知道是否可以使用 php`include`作为右值，例如这个例子：

```
$foo = include('bar.php); 
```

我做了一些实验，但似乎不可能。

我想以这种方式加载的 php 文件是对象和数组的缓存转储，与`var_export()`函数一起保存。

为了充分利用 PHP 的内部代码缓存系统，使用`import`(or ) 而不是正常的文件操作加载这些文件对我来说非常重要。`require`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:41:11.450

要么使用[serialize](http://php.net.serialize)而不是 var_export （然后使用*正常*的文件操作），要么让你的转储器更加智能，将变量本身添加到转储中（使它`$var=dump;`，不仅仅是`dump`）

# android - 如何解决形状圆形矩形太大而无法在android TextBox中渲染成纹理

> ID：14519025
> 
> 赞同：4
> 
> 时间：2013-01-25T09:38:18.097
> 
> 标签：android, background, textbox

我为文本视图背景创建了一个形状

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">
<gradient
    android:startColor="#800e1520"
    android:endColor="#801e252f"
    android:angle="45"/>
<padding android:left="7dp"
    android:top="7dp"
    android:right="7dp"
    android:bottom="7dp" />
<corners android:radius="8dp" /> 
```

我的文本视图是：

```
 <TextView
        android:id="@+id/textView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/rel1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="8dp"
        android:background="@drawable/rounded_corners"
        android:gravity="right"
        android:lineSpacingExtra="6dp"
        android:supportsRtl="true"
        android:text="@string/hello_world"
        android:textColor="#FFFFFF" /> 
```

当文本像这样短时![文本框图像](../Images/a1ec6fbf198165082e4bca81eb0a4197.png)

但是当文本太大时不显示背景和 eclipse logcat 显示

```
Shape round rect too large to be rendered into a texture (424x5884, max=2048x2048) 
```

如何解决？谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T23:46:07.570

**编辑：**最简单的解决方案是去掉圆角。如果去除圆角并使用简单的矩形，硬件渲染器将不再为背景层创建单个大纹理，并且不会再遇到纹理大小限制。

* * *

一个简单的解决方法*应该*是恢复为该视图的软件渲染：

```
View view = findViewById(R.id.textView1);
view.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

...但是我们在这里遇到了类似的问题，我们得到了与您相同的结果，视图（及其子视图）没有渲染。

您还可以[从 XML](http://developer.android.com/reference/android/view/View.html#attr_android%3alayerType)设置视图的图层类型：

```
<TextView android:layerType="software" /> 
```

将 layerType 设置为“none”而不是 software 似乎会导致视图绘制，但在我们刚刚尝试的快速测试中，它绘制时没有圆角。

另一种方法可能是使用不同的方法来渲染圆角矩形，例如

*   自己剪裁和绘制路径`onDraw`
*   使用 a [`PaintDrawable`](http://developer.android.com/reference/android/graphics/drawable/PaintDrawable.html)（支持圆角，但必须从代码中设置）
*   将矩形分成三片——顶部（圆角）、中间（纯色）和底部（圆角）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-04T19:08:59.413

我的解决方案是在画布上绘图。见下文。

如果您需要做渐变等`Shader`，请查看[https://developer.android.com/reference/android/graphics/LinearGradient.html](https://developer.android.com/reference/android/graphics/LinearGradient.html) 也应该做您需要的。

```
/**
 * Created by chris on 04/11/2013
 */
public class WidgetLinearLayout extends LinearLayout {

//Dither and smooth :)
private final Paint mPaint = new Paint(Paint.ANTI_ALIAS_FLAG | Paint.DITHER_FLAG);
private final RectF mBound = new RectF();
private final float radius;

public WidgetLinearLayout(Context context) {
    this(context, null);
}

public WidgetLinearLayout(Context context, AttributeSet attrs, int defStyle) {
    this(context, attrs);
}

public WidgetLinearLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
    setBackgroundDrawable(null);
    mPaint.setColor(getResources().getColor(R.color.white));
    mPaint.setStyle(Paint.Style.FILL);
    radius = getResources().getDimension(R.dimen.widget_corner_radius);
    setWillNotDraw(false);
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    super.onLayout(changed, l, t, r, b);
    mBound.set(l, t, r, b);
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawRoundRect(mBound, radius, radius, mPaint);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T08:04:49.560

您也可以尝试将背景设为[.9.png](http://developer.android.com/tools/help/draw9patch.html)

# substring - Java Android - IndexOf &Offset

> ID：14519027
> 
> 赞同：0
> 
> 时间：2013-01-25T09:38:22.213
> 
> 标签：substring, indexof

我正在尝试从文本文件中读取，但是这些字符串分成不同的属性，但我不知道在第一次拆分后如何进行。

`getType()`这是我的代码：字符串的偏移量应该是多少？

```
try {
        InputStream is = context.getAssets().open("Autoeval");
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
         //Skips lines
        for (int i = 0; i< questionNumber; i++) {
            reader.readLine();
        }

        question = reader.readLine();

    } catch (IOException e) {
        e.printStackTrace();
    }
}

public String getId() {

    return question.substring(0, question.indexOf(";"));
}
public String getType() {
    return question.substring(question.indexOf(";"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:18:14.653

这**很难**看，但你为什么不创建 2 个全局私有变量：

```
private String _id;
private String _type; 
```

然后，在您阅读问题后，您可以执行以下操作：

```
{
    //stuff

    question = reader.readLine();

    _id = question.substring(0, question.indexOf(";"));
    _type = question.substring(_id.length); // assuming no other ";" delimiters

}

public String getId() {
    return _id;
}

public String getType() {
    return _type;
} 
```

综上所述，还有更好的方法可以做到这一点。

# c++ - 在 Visual Studio 中使用 /MT 标志编译 SFML

> ID：14519032
> 
> 赞同：1
> 
> 时间：2013-01-25T09:38:41.813
> 
> 标签：c++, visual-studio, compiler-construction, windows-runtime, sfml

我正在使用 Visual Studio 2012，我想编译我的图形应用程序，它使用 SFML 框架，使用`/MT`编译器标志而不是 Visual Studio default `/MD`。这可以在项目设置中进行设置`Configuration -> C/C++ -> Code Generation -> Runtime Library`。提到的标志控制是动态（`/MD`）还是静态（`/MT`）链接 Windows 运行时库。

仅在我自己的应用程序的项目文件中更改此设置会导致链接器错误，因为 SFML 中的值`RuntimeLibrary`设置为`MD_DynamicRelease`，但它`MT_StaticRelease`在我的项目中。因此我需要用 /MT 标志编译 SFML。我使用 CMake 创建了 Visual Studio 项目文件，但在项目设置中设置少得多。关键是甚至没有 category `Configuration -> C/C++`。

那么如何找到选项页面或`/MT`手动设置标志？

（顺便说一下，选项页面的名称可能并不完全正确，因为我是从我遗憾地使用的 Visual Studio 的德语版本翻译过来的。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:44:04.507

SFML 提供的 CMake 脚本带有静态链接运行时库的选项 (SFML_USE_STATIC_STD_LIBS)。

# javascript - 如何在js中读取一个json对象

> ID：14519041
> 
> 赞同：2
> 
> 时间：2013-01-25T09:39:03.233
> 
> 标签：javascript, jquery, json

我的控制器有一个方法将 jsonArray 的字符串表示形式返回为

jsonArray.toString()

现在下面是ajax方法

```
function loadPropertyFile(url) {
$.ajax({
    type: "GET",
    url: url, 
    dataType: "text",
    success: function(response){
        var obj = jQuery.parseJSON(response);
        alert(obj);
    }
}); 
```

}

这里解析后的变量obj是

```
"[{"portal.home":"Home"},{"displaytag.tracking.id":"Item ID"},{"displaytag.tracking.itemName":"Item Name"},{"displaytag.tracking.itemType":"Type"}]" 
```

现在我想从 js 中的键访问值

IE。我想访问键“displaytag.tracking.id”的值

问题是当我在做**console.log(obj[0]["portal.home"]);** 它给了我错误**TypeError: obj[0] is undefined**

我该怎么办 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T09:41:33.813

首先您需要将**JSON 字符串**解析为 JavaScript 对象，然后访问所需的属性：

```
var obj = JSON.parse(json);
console.log(obj[0]["portal.home"]); 
```

在不支持原生 JSON 的旧浏览器中，您应该使用 Crockford 的[json2.js](https://github.com/douglascrockford/JSON-js)之类的东西，它会给您一个；请不要在 JSON 上使用 eval()，因为它会导致非常糟糕的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:40:13.507

使用[`$.parseJSON`](http://api.jquery.com/jQuery.parseJSON/)（或现代浏览器中的 JSON.parse）将您的字符串转换为 Javascript 对象：

```
var json = '[{"portal.home":"Home"},{"displaytag.tracking.id":"Item ID"},{"displaytag.tracking.itemName":"Item Name"},{"displaytag.tracking.itemType":"Type"}]';
var object = $.parseJSON(json); 
```

在您的情况下，您的 JSON 字符串将创建一个数组，因此您需要在正确的索引处获取对象：

```
var portalHomeValue = object[0]["portal.home"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:43:47.553

如果您的 javascript 源中直接有 JSON（我不假设，但我正在为其他人添加它），您可以删除引号，javascript 基于它创建一个对象：

```
var obj = [{"portal.home":"Home"},{"displaytag.tracking.id":"Item ID"},{"displaytag.tracking.itemName":"Item Name"},{"displaytag.tracking.itemType":"Type"}];
console.log(obj[0]["portal.home"]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-03T13:52:53.980

您可以通过以下方式直接访问

```
var data = JSON.parse('[{"Item_Number":"M71118LHB","Description":"MENS ONESIE"}]');
var desc = data[0].Description;
console.log(desc); 
```

# html - 指定输入类型宽度的复合方法=“图像”

> ID：14519048
> 
> 赞同：0
> 
> 时间：2013-01-25T09:39:27.197
> 
> 标签：html, css

有没有办法可以为css中的60%+12px之类的元素分配宽度。虽然听起来很尴尬，但我需要这个来绝对确定多个浏览器处理问题。

我知道有一种方法可以通过动态查找容器的宽度并解决表达式来使用 javascript。但我想在 css 中做到这一点，而不使用 js 操作 dom。

显而易见，该解决方案应该与浏览器无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:43:21.543

您可以将宽度设置为 60%，然后添加 12px 作为边距（每边 6px）。

# qt - Qt5.0事件过滤器在单击鼠标时多次调用事件过滤器

> ID：14519051
> 
> 赞同：1
> 
> 时间：2013-01-25T09:39:54.470
> 
> 标签：qt, mouseevent

我在 Qt5.0 中有一个应用程序，其中我安装了一个事件过滤器来侦听单击鼠标，如下所示：

```
bool MainView::eventFilter(QObject *obj, QEvent *event)
{
if (event->type() == QEvent::MouseButtonPress)
  {
    QMouseEvent *mouseEvent = static_cast<QMouseEvent*>(event);
    int mx=mouseEvent->pos().x(),my=mouseEvent->pos().y();

    qDebug() << QString::number(mx)<<" "<<QString::number(my);
...
}
} 
```

每次单击时，该函数都会被多次调用，它会返回许多范围广泛的值，通常在实际值的 +/-50 范围内。谁能解释一下为什么会发生这种情况，或者是否有人遇到过类似的问题。事件过滤器已作为 qApp->installEventFilter(this); 安装在构造函数中；

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T10:02:29.013

如果事件尚未由对象处理，则将其传播到对象的父对象，依此类推。这就是为什么你会捕捉到几个鼠标事件。

你总是可以得到事件过滤器正在监视什么样的对象：

```
bool MainView::eventFilter(QObject *obj, QEvent *event)
{
    ...
    qDebug() << obj->metaObject()->className();
    ...
} 
```

# objective-c - 如何在基于 c++ 页面的应用程序中实现公式（3 UITextField > UILabel）

> ID：14519052
> 
> 赞同：0
> 
> 时间：2013-01-25T09:40:02.217
> 
> 标签：objective-c, uitextfield, uilabel, formula, viewcontroller

我是一名新的应用程序开发人员，我需要一些帮助...

我正在使用 xcode v4.5.1，该应用程序适用于 iphone。

下面是来自我的 MainStoryboard（视图控制器 - 我）的图像链接，它由 3 个 UITextField(s) 和 1 个 UILabel 组成，我已将其标记为 AD（因此您了解公式格式）。

[http://gyazo.com/332e5e43b827e60601fe8c40c543868a](http://gyazo.com/332e5e43b827e60601fe8c40c543868a)

我的问题是我怎样才能实现这个论坛，以便它工作。

```
Formula: A*(C/(A-B)) = D 
```

我需要实现什么代码，我应该把它们放在哪里。

需要尽可能多的帮助，以及所有可能的步骤（如果您能提供帮助）！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:12:18.457

按住控制并从标签拖动到 viewcontrollers 头文件，以便它为看起来像这样的标签创建一个出口`@property (strong, nonatomic) IBOutlet UILabel *label;`（如果您使用助手编辑器可以更容易做到，按钮位于 xcode 的右上角，它说'编辑'）

对文本字段做同样的事情，然后在一个函数中你可以去

```
- (void) someFunction {
    float A = [self.textfield1.text floatvalue];
    float B = [self.textfield2.text floatvalue];
    float C = [self.textfield3.text floatvalue];
    float result =  A*(C/(A-B));
    self.label.text = [NSNumber numberWithFloat:result];
} 
```

您可以将 someFunction 连接到按钮或类似于为标签和文本字段设置插座的方式。把它变成一个动作而不是一个出口，除非你有其他的想法。

附言。根本没有测试过这段代码，所以可能需要一些调整

# c# - 超类的公共非虚拟成员干扰子类中的覆盖的设计原理

> ID：14519053
> 
> 赞同：1
> 
> 时间：2013-01-25T09:40:06.647
> 
> 标签：c#, overriding, virtual-functions, rationale

这背后的设计原理是什么：

好的：

```
public class A
{
    public virtual void DoWork() { Console.WriteLine("A"); }
}
public class B : A
{
    private new void DoWork() { Console.WriteLine("B"); } //private works
}
public class C : B
{
    public override void DoWork() { Console.WriteLine("C"); }
} 
```

错误的：

```
public class A
{
    public virtual void DoWork() { Console.WriteLine("A"); }
}
public class B : A
{
    public new void DoWork() { Console.WriteLine("B"); } //public doesn't
}
public class C : B
{
    public override void DoWork() { Console.WriteLine("C"); }
} 
```

为什么非虚拟方法无论如何都会干扰覆盖虚拟方法？

编辑：更多解释。第一种情况：编译器检查该方法是否为私有（新），因此它允许 C.DoWork() 类覆盖 A.DoWork() 类（不混合虚拟和非虚拟（B.DoWork()）方法）。第二种情况：编译器看到声明了 public（new）void 并且它任意（？）破坏了 C 类中的覆盖。现在，如果我想声明 new virtual DoWork() 我可以这样做，如果我想禁止覆盖，我本可以使用密封说明符。但是在这种情况下，我将 public void DoWork() 写为声明正常的非虚拟方法，并且我不希望它像在私有情况下那样参与虚拟继承链。在第二个示例中，我期望：

```
A ac = new C();
ac.DoWork(); 
```

像在私人情况下一样打印 C。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:42:53.153

在第一个示例中，您的`C`类 ovverides A `DoWork`（`B`具有 DoWork，它是私有的，对子类不可见）。在第二个示例中，您通过非虚拟函数隐藏`DoWork`并且编译器抱怨您试图覆盖非虚拟函数。解决方案是公开虚函数族。通过`new virtual`您可以在这些系列之间创建分离。

```
public class B : A
{
    public new virtual void DoWork() { Console.WriteLine("B"); } //private works
} 
```

然后这段代码

```
A a = new C();
a.DoWork(); 
```

印刷`A`

```
B b = new C();
b.DoWork(); 
```

印刷`C`

您可以`new virtual`在[Knowing When to Use Override 和 New Keywords](http://msdn.microsoft.com/en-us/library/ms173153%28v=vs.80%29.aspx)中更详细地阅读如何使用。`new`关键字 without`virtual`具有不同的语义`new virtual`，您可以[在方法签名中的新关键字中](https://stackoverflow.com/questions/1014295/new-keyword-in-method-signature)阅读更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:55:13.433

在下面的代码中

```
public class A
{
    public virtual void DoWork() { Console.WriteLine("A"); }
}
public class B : A
{
    private new void DoWork() { Console.WriteLine("B"); } //private works
}
public class C : B
{
    public override void DoWork() { Console.WriteLine("C"); }
} 
```

您是在告诉编译器 B 类中的 DoWork() 方法是 A 类`new`的 DoWork() 方法的一个版本。但是，它允许您`override`在 C 中使用 DoWork，因为您已`new`在 B 中将 DoWork 的版本声明为私有，这使得编译器假定该方法未向外界公开。

然而，在这

```
public class A
{
    public virtual void DoWork() { Console.WriteLine("A"); }
}
public class B : A
{
    public new void DoWork() { Console.WriteLine("B"); } //public
}
public class C : B
{
    public override void DoWork() { Console.WriteLine("C"); }
} 
```

您正在告诉编译器使用`override`新版本的方法 DoWork()，从编译器的角度来看，这有点错误，因为它不能按照设计语言时设置的规则`override`使用非`abstract`//方法`virtual`。`overriden`

这就是为什么，我认为，您的代码在一种情况下会出错，而在另一种情况下不会出错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:46:48.313

因为在*第一种*情况下，您要覆盖一个`A`类函数而不是`B`一个

```
public class A
{
    public virtual void DoWork() { Console.WriteLine("A"); }
}
public class B : A
{
    private new void DoWork() { Console.WriteLine("B"); } //private works
}
public class C : B
{
    public override void DoWork() { Console.WriteLine("C"); } //OVERRIDES A.DoWork()
} 
```

您*不能*覆盖基类的**非** `virtual`/`abstract`方法。

# python - 用于参数化 CAD 的 Python 模块

> ID：14519057
> 
> 赞同：27
> 
> 时间：2013-01-25T09:40:20.743
> 
> 标签：python, cad

我正在寻找适用于 python 的 CAD 模块。这是我发现的，如果我错了，请纠正我：

*   [PythonCAD](http://pythoncad.sourceforge.net/dokuwiki/doku.php?id=program_code_description)：
    *   文件类型：DWG、DXF、SVG
    *   定向：在窗口中单击
    *   最后维护：2012-06-15
    *   记录：贫穷和肮脏
*   [PythonOCC](http://www.pythonocc.org/)：
    *   文件类型：STEP、IGES、STL（导入/导出）
    *   面向：脚本
    *   最后维护：2013-01-12
    *   记录在案：良好且清晰
    *   安装太痛苦了
*   [FreeCAD（python 包装）](http://doc.ubuntu-fr.org/freecad)
    *   文件类型： ？
    *   面向：单击窗口和可从 python 导入的 python 脚本
    *   最后维护：2013 年 1 月
    *   记录在案：很好

好吧，似乎 FreeCAD 的 python 绑定是最好的，但还有其他东西吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T10:07:42.423

我发现 FreeCAD 是最好的解决方案。python 绑定允许您以全面的方式设计部件。

```
myShape = Part.makeBox(2,2,2)
myShape.translate(Base.Vector(2,0,0)) 
```

从简单的几何图形中，您可以使用布尔运算：

```
cylinder1 = Part.makeCylinder(3,10,Base.Vector(0,0,0),Base.Vector(1,0,0))
cylinder2 = Part.makeCylinder(3,10,Base.Vector(5,0,-5),Base.Vector(0,0,1))
common = cylinder1.common(cylinder2) 
```

唯一的缺点是使用 mac os 安装，我无法在雪豹上编译它（因为对非持续库的依赖过多）。

但是 pythonocc 也有同样的问题，我不喜欢的是最小的文档和合成器，它太像 opencascade 而不是太多的 pythonistic。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-08T22:08:48.477

[occmodel](http://tenko.github.io/occmodel/index.html#examples)是一个小型的自包含库，它提供对 OpenCASCADE 建模内核的高级访问。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-03-12T21:05:50.213

[CADquery](https://github.com/dcowden/cadquery)是目前用于 FreeCad 的插件，我使用它并且比在 Python 中编写 OpenScad 脚本更好。开发人员目前正在从 FreeCad 迁移到版本 2 的 Python OCC，但我目前正在使用 V1。

CQParts 是使 cadquery 有用的一个非常重要的部分。它是程序的类似物，因此您可以设计一个轮子等。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-27T22:20:09.540

PythonOCC 可能是最完整的功能。这里还有一些：

[CADDD](https://code.google.com/p/caddd/) - 使用 PythonOCC，在 Qt 中有 GUI。

[NURBS](http://runten.tripod.com/NURBS/) - 用于使用 NURBS 的 Python 模块。

[lolcad](http://diyhpl.us/cgit/lolcad) - 看起来很不错，但已经有一段时间没有更新了。

当然，您可以尝试使用 Blender，它具有内置的 Python 解释器，并且有用于架构和精确建模的插件（像[这样](http://wiki.blender.org/index.php/Community%3aScience/Architecture)）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-03T09:16:39.213

看看[莎乐美](http://www.salome-platform.org/)。代码如下所示：

```
import sys
import salome

salome.salome_init()
theStudy = salome.myStudy

import salome_notebook
notebook = salome_notebook.NoteBook(theStudy)
sys.path.insert( 0, r'/tmp')

###
### GEOM component
###

import GEOM
from salome.geom import geomBuilder
import math
import SALOMEDS

geompy = geomBuilder.New(theStudy)

O = geompy.MakeVertex(0, 0, 0)
OX = geompy.MakeVectorDXDYDZ(1, 0, 0)
OY = geompy.MakeVectorDXDYDZ(0, 1, 0)
OZ = geompy.MakeVectorDXDYDZ(0, 0, 1)
Vertex_1 = geompy.MakeVertex(0, 0, 0)
Vertex_2 = geompy.MakeVertex(0, 2, 0)
Vertex_3 = geompy.MakeVertex(2, 2, 0)
Line_1 = geompy.MakeLineTwoPnt(Vertex_2, Vertex_3)
Line_1_vertex_2 = geompy.GetSubShape(Line_1, [2])
Line_1_vertex_3 = geompy.GetSubShape(Line_1, [3])
Curve_1 = geompy.MakeInterpol([Line_1_vertex_2, Line_1_vertex_3, Vertex_1], True, False)
geompy.addToStudy( O, 'O' )
geompy.addToStudy( OX, 'OX' )
geompy.addToStudy( OY, 'OY' )
geompy.addToStudy( OZ, 'OZ' )
geompy.addToStudy( Vertex_1, 'Vertex_1' )
geompy.addToStudy( Vertex_2, 'Vertex_2' )
geompy.addToStudy( Vertex_3, 'Vertex_3' )
geompy.addToStudy( Line_1, 'Line_1' )
geompy.addToStudyInFather( Line_1, Line_1_vertex_2, 'Line_1:vertex_2' )
geompy.addToStudyInFather( Line_1, Line_1_vertex_3, 'Line_1:vertex_3' )
geompy.addToStudy( Curve_1, 'Curve_1' ) 
```

# url - 如何忽略 IIS 中的错误查询字符串？

> ID：14519061
> 
> 赞同：0
> 
> 时间：2013-01-25T09:40:35.000
> 
> 标签：url, iis-7, query-string

人们从外部链接到我们的网站，并且这样做，通过传递“错误参数”，实际上破坏了他们链接到的那些页面。他们通过提供这样的 URL 来做到这一点：

> [http://domain.com/page.htm?ke&y=value](http://domain.com/page.htm?ke&y=value)

您会注意到参数名称*中的 & 符号。*这会导致 IIS 失败并出现以下错误：

> 执行 URL 失败。
> 
> `at System.Web.Hosting.ISAPIWorkerRequestInProcForIIS6.BeginExecuteUrl(`

我想防止有人有权破坏我们的网站，其一，其次希望用户能够访问他们想要的页面，即使链接提供者犯了错误。

如何配置 IIS 以在忽略查询字符串错误的情况下执行 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:14:56.543

碰巧，这似乎是我们的解决方案最初针对 .NET 1.1，后来升级到 .NET 2.0 的一个怪癖；.NET 1.1 显然`HttpHandler`在全局级别注册了一个（在 machine.config 中？），它配置了`StaticFileHandler`处理标准 html (*.htm) 文件，而 .NET 2.0 对此进行了更改。

因此，在升级时，如果您没有在本地应用程序的配置中注册处理程序，那么在部署时，IIS 将尝试处理 *.htm 文件，并且在某些情况下会死掉（在问题中描述的情况下）。

然后解决方案是将其添加到`httpHandlers`配置的部分：

```
<add verb="*" path="*.htm" type="System.Web.StaticFileHandler" /> 
```

[我说*似乎是*因为自从解决了这个问题后，我就再也没有时间投资于复制和记录了。]

# mongodb - MongoDB 查询 - 加入 javascript 数组

> ID：14519063
> 
> 赞同：2
> 
> 时间：2013-01-25T09:40:39.050
> 
> 标签：mongodb

我有一个如下所示的用户集合

```
{
    {
        _id: ObjectId(...),
        services: {facebook: {id: 1}}
    },
    {
        _id: ObjectId(...),
        services: {facebook: {id: 2}}
    },
    ...
} 
```

此外，我有以下 JavaScript 数组：

```
[
    {name: "Alice", id: 1},
    {name: "Bob", id: 3},
    ...
] 
```

我想查找其 id 存在于数组中的所有用户，但我找不到“进入”JavaScript 数组的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:58:51.367

您可以使用该[`array.map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)函数`id`从源数组中提取值，然后将其与[`$in`](http://docs.mongodb.org/manual/reference/operator/in/#_S_in)运算符一起使用，`find`如下所示：

```
var arr = [
    {name: "Alice", id: 1},
    {name: "Bob", id: 3},
    ...
];

db.users.find({'services.facebook.id': {$in: arr.map(function(e) {return e.id;})}}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:57:18.017

首先将 javascript 数组转换为仅包含原始 ID 的数组：

```
var yourArray = [ 1, 3 ]; 
```

然后试试这个查询

```
db.yourCollection.find({ services.facebook.id : { $in : yourArray } }); 
```

不幸的是，没有好的方法可以让数据库将本地数组（名称字段）中的信息与从数据库返回的数据连接起来。所以你必须自己做这件事。对返回的文档进行 for 循环，并通过查找数组中的 services.facebook.id 字段来查找真实姓名。

**顺便说一句：**与您在 SQL 数据库中所做的相反，在 MongoDB 中通常应避免使用人工外键（或一般的外键），因为 MongoDB 不是为像关系数据库那样处理引用而构建的。将数据嵌入文档而不是将其作为不同的文档引用通常是一个不错的选择。“所有数据必须规范化”的教条不适用于 MongoDB 之类的文档数据库，就像它适用于关系数据库一样。

# sencha-touch-2 - 无法在sencha touch 2中获得商店

> ID：14519064
> 
> 赞同：2
> 
> 时间：2013-01-25T09:40:41.360
> 
> 标签：sencha-touch-2, undefined, store

我在 sencha touch 中定义了 store 如下：

store.js

```
 Ext.define('bluebutton.store.BlueButton.Testing', {
    extend: "Ext.data.Store",
    requires: [
              'bluebutton.model.BlueButton.Testing'
    ],
    config: {
        storeId: 'testingstore',
        model: 'bluebutton.model.BlueButton.Testing'
    }
}); 
```

模型.js

```
 Ext.define('bluebutton.model.BlueButton.Testing', {
    extend: 'Ext.data.Model',

    requires: [
             'Ext.data.proxy.LocalStorage'
    ],

    config: {
        fields: [
            { name: 'first', type: 'string' },
            { name: 'second', type: 'string' }
        ],
        proxy: {
            type: 'localstorage',
            id: '_codeAnalyzerLocalStorage'
        }
    }
}); 
```

我需要调用 getStore()

```
 Ext.define('bluebutton.view.BlueButton.testing', {
    extend: 'Ext.form.Panel',
    xtype: 'testing',
       requires: [

    'bluebutton.view.BlueButton.TransactionList',
    'bluebutton.view.BlueButton.MemberPopUp',
     'bluebutton.view.BlueButton.MemberDetail',
     'bluebutton.store.BlueButton.MemberList',

     'bluebutton.model.BlueButton.Testing',
     'bluebutton.store.BlueButton.Testing'

    ],

    config: {
     id:'register',
        items :[

              {
                    xtype: 'textfield',
                    name: 'name',
                    label: 'Name'
                },
                {
                    xtype: 'emailfield',
                    name: 'email',
                    label: 'Email'
                },

                {

                    xtype: 'button',
                    text: 'Test Local',
                     handler: function(button) {

                       var test =   Ext.getCmp('testingstore').getStore();   

                       alert(test);

                       }

                },

        ],

   }

}); 
```

但我得到这个错误

```
getStore is undefined 
```

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T08:13:07.467

我用下面的代码试过了，它没有问题！

店铺：

```
Ext.define('bluebutton.store.BlueButton.Testing', {
    extend : "Ext.data.Store",
    requires : [ 'bluebutton.model.BlueButton.Testing' ],
    config : {
        storeId : 'testingstore',
        model : 'bluebutton.model.BlueButton.Testing'
    }
}); 
```

模型：

```
Ext.define('bluebutton.model.BlueButton.Testing', {
    extend : 'Ext.data.Model',
    requires : ['Ext.data.proxy.LocalStorage'],
    config : {
        fields : [{
                    name : 'first',
                    type : 'string'
                }, {
                    name : 'second',
                    type : 'string'
                }],
        proxy : {
            type : 'localstorage',
            id : '_codeAnalyzerLocalStorage'
        }
    }
}); 
```

看法：

```
Ext.define('bluebutton.view.BlueButton.Testing', {
        extend : 'Ext.form.Panel',
        xtype : 'testing',
        config : {
            fullscreen : true,
            id : 'register',
            items : [{
                        xtype : 'textfield',
                        name : 'name',
                        label : 'Name'
                    }, {
                        xtype : 'emailfield',
                        name : 'email',
                        label : 'Email'
                    }, {
                        xtype : 'button',
                        text : 'Test Local',
                        handler : function(button) {
                            var test = Ext.getStore('testingstore');
                            console.log(test);
                        }
                    }]
        }
    }); 
```

应用程序.js：

```
Ext.Loader.setConfig({
    enabled : true,
});

Ext.application({

    name : 'bluebutton',

    views : [ 'BlueButton.Testing', ],  
    stores : [ 'BlueButton.Testing', ], 
    models : [ 'BlueButton.Testing', ], 

    launch : function() {
        Ext.create('bluebutton.view.BlueButton.Testing');
    }

}); 
```

控制台在按下按钮后记录了我的商店。

但我认为这将是一个更好的代码，当您将按钮操作放在控制器中时，而不是视图中！

```
button config:
    {
        xtype : 'button',
        text : 'Test Local',
        action : 'buttonTest'

    } 
```

控制器：

```
Ext.define('bluebutton.controller.BlueButton.Testing', {
    extend : 'Ext.app.Controller',
    config : {
        control : {
            'button[action="buttonTest"]' : {
                tap : 'testButtonTap'
            }
        }
    },
    testButtonTap : function() {
        var test = Ext.getStore('testingstore');
        console.log(test);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:00:34.530

你可以得到商店

```
var test =   Ext.getStore('testingstore'); 
```

Sencha Touch API：[http ://docs.sencha.com/touch/2-1/#!/api/Ext-method-getStore](http://docs.sencha.com/touch/2-1/#!/api/Ext-method-getStore)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-15T02:10:10.940

你必须在 app.js 中添加你的商店

你必须把你的商店放在**商店**数组中，因为 storeId 引用的 sencha 错误（据我所知，js 加载应用程序脚本的顺序），所以如果你想使用 storeId，请将你的商店放在 app.js 中。

分机应用程序（{

```
name : 'bluebutton',

views : [ 'BlueButton.Testing', ],  

stores : [ 'BlueButton.Testing', ], //this is the key

models : [ 'BlueButton.Testing', ], 

launch : function() {
    Ext.create('bluebutton.view.BlueButton.Testing');
} 
```

});

# jquery - JQuery next() 与 id 选择

> ID：14519067
> 
> 赞同：-3
> 
> 时间：2013-01-25T09:41:00.857
> 
> 标签：jquery, performance

在性能方面哪个更好：

```
$('#' + $(this).attr('id') + '_abc'); 
```

或者

```
$(this).next(); 
```

假设对象：

```
< div id='a' >
< div id='a_abc' > 
```

?

如何在这里写标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:43:11.730

根据您的问题提出的一些建议

与往常一样，请记住，作为开发人员，您的时间通常是最宝贵的资源。不要专注于优化选择器速度，除非很明显需要提高性能。

取自 [http://api.jquery.com/id-selector/](http://api.jquery.com/id-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:42:32.400

第一个在`document.getElementById`内部使用，在性能方面没有比这更好的了。第二种可能使用 DOM 遍历，这不是很有效，但无论如何您可能永远不会注意到其中的区别。

# php - 按特定顺序按多个键对数组进行排序

> ID：14519068
> 
> 赞同：0
> 
> 时间：2013-01-25T09:41:01.307
> 
> 标签：php, sorting

我想按以下顺序按多个键对以下数组进行排序：首先按“类型”，然后按“产品”，最后按“名称”。这很容易用 usort 完成，尽管我的客户希望“产品”按特定顺序排序：订书机、活页夹、书。

```
$arr = array(
    array(
        'type' => 'School',
        'product' => 'Book',
        'name' => 'My book',
        'data' => '...'
    ),
    array(
        'type' => 'Job',
        'product' => 'Stapler',
        'name' => 'My stapler',
        'data' => '...'
    ),
    array(
        'type' => 'Personal',
        'product' => 'Binder',
        'name' => 'My binder',
        'data' => '...'
    ),
    array(
        'type' => 'School',
        'product' => 'Book',
        'name' => 'My book',
        'data' => '...'
    )
); 
```

有谁知道一个聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:48:01.637

usort 不会限制您这样做。我假设您的问题是如何比较`product`排序回调函数中的值。这可以通过地图来完成，例如：

```
$mapProductOrder = array_flip(array('Stapler', 'Binder', 'Book'));
// same as: array('Stapler' => 0, 'Binder' => 1, 'Book' => 2) 
```

比较`$item1`和`$item2`使用：

```
$mapProductOrder[$item1['product']] < $mapProductOrder[$item2['product']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:48:16.970

```
usort($arr, function ($a, $b) {
  // by type
  $r = strcmp($a['type'], $b['type']);
  if ($r !== 0) {
    return $r;
  }

  // by product
  // note: one might want to check if `$a/$b['product']` really is in `$order`
  $order = array('Stapler', 'Binder', 'Book');
  $r = array_search($a['product'], $order) - array_search($b['product'], $order);
  if ($r !== 0) {
    return $r;
  }

  // or similar, with a little help by @fab ;)
  /*
  $order = array('Stapler' => 0, 'Binder' => 1, 'Book' => 2);
  $r = $order[$a['product']] - $order[$b['product']];
  if ($r !== 0) {
    return $r;
  }
  */

  // name
  return strcmp($a['name'], $b['name']);
}); 
```

# php - 将表单 JQuery 数组动态添加到 PHP（CodeIgniter）并返回（有错误）

> ID：14519069
> 
> 赞同：1
> 
> 时间：2013-01-25T09:41:01.310
> 
> 标签：php, jquery, codeigniter, validation, dynamicform

我有一个表单，它的字段动态添加如下：

```
function addFieldRow() {
  $('.form-container').append('
    <div><input type="text" name="name[1]"></div>
    <div>
      <select name="choice[1]">
        <option value="red">red</option>
        // . . .
      </select>
    </div>
     // . . .
  ');
} 
```

然后，我使用声明的数组 form_validation 规则将这些传递给其各自的 CodeIgniter 控制器：

```
$this->form_validation->set_rules('name[]', 'text field', 'required');
// . . . other fields' rules 
```

问题是，如果任何动态添加的表单有错误，这些在视图加载期间就会消失。我想知道**如何在验证运行后保留动态添加的表单字段并出现错误**：

```
if ($this->form_validation->run() == FALSE) {
  // do stuff to preserve the dynamically created fields to show their errors
  $this->load->view('user_addresses_view');
} 
```

## 更好的解决方案

我找到了通过使用`ajax`连接到 CodeIgniter 框架中表单的相应控制器来保留这些动态添加的元素的解决方案。这种方法可以：

1.  在不刷新页面的情况下进行客户端和服务器端验证
2.  由于页面没有刷新，所有这些动态添加的表单元素都不会消失！

[james246](https://stackoverflow.com/questions/14797551/dynamically-duplicated-forms-disappear-on-codeigniter-reload)的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:45:13.023

你不能这样做，因为页面实际上正在刷新并且行是在**客户端**添加的，所以当验证完成后，你将重定向到具有**验证错误**的同一页面，你不会看到动态添加的 dom，因为正如我所说**，它是发生在客户端而不是你的代码**......所以你所能做的就是使用`session`，然后在加载时手动验证并将它们添加到页面。

使用`SESSION`可能不是一个好主意，因为为此您将不得不编写更复杂的帮助程序和验证方法等......

**其他可能的解决方案**

1.  使用`jQuery.validate`允许我们验证动态添加的行（字段，dom）的插件。

2.  利用 mysql 并将这些字段添加到数据库中，并将可能的错误存储在 db 中并将其发送到查看文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-20T09:19:50.630

鉴于：

```
 for($i=0; $i<$ttl_input;$i++)
    {
    <div><input type="text" name="name[".$i."]"></div>
    <?php echo form_error('name['.$i.']'); ?>
    } 
```

在控制器中：

```
foreach($this->input->post('name') as $index=>$name)
{
$this->form_validation->set_rules('name['.$index.']', 'text field', 'required');
} 
```

# eclipse - 如何让 Eclipse JDT 在类结束时自动生成方法？

> ID：14519071
> 
> 赞同：3
> 
> 时间：2013-01-25T09:41:08.207
> 
> 标签：eclipse, code-generation, preferences, eclipse-jdt

当您键入未实现方法的名称时，有没有办法让 Eclipse JDT（*Indigo*和更新的）在类的末尾自动生成方法，而不是作为下一个成员？

理想情况下，方法仍然会在 getter 和 setter 之前自动生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T00:38:31.357

我认为您想要的是通过`alt-shift-s`而不是仅仅开始输入来拉出生成对话框。它们具有**插入点**下拉菜单，可让您选择生成代码的位置。选择**最后一个成员**。

或者，您始终可以生成代码，然后对成员进行排序，`Source->Sort Members`但如果您逐渐添加到旧代码中，您的队友可能不喜欢您将这样的大更改签入到您的存储库中。

# java - java.lang.NoClassDefFoundError :: Tomcat 中给定路径中存在的类

> ID：14519074
> 
> 赞同：2
> 
> 时间：2013-01-25T09:41:17.017
> 
> 标签：java, tomcat6, classloader

我目前面临运行 Jasper 报告应用程序的问题。

在调用我面临的报告生成请求后 `java.lang.NoClassDefFoundError`

对于应用程序类，例如`com.abcd.framework.web.servicelocator.ServiceLocator`

我验证了该类存在于`tomcat/WEB-INF/classes`文件夹下的适当路径中。

我还启用了 Tomcat 类加载器日志

```
JAVA_OPTS = -XX:+TraceClassLoading -XX:+TraceClassUnloading 
```

相关日志： `[Loaded com.abcd.framework.web.servicelocator.ServiceLocator from file:/C:/3.0/tomcat-6.0-Jasper/webapps/jasperserver-pro/WEB-INF/classes/com/abcd/framework/web/servicelocator/ServiceLocator.class]`

我无法弄清楚为什么，尽管类已成功加载，但出现错误。

感谢你的帮助

谢谢

在下面添加了堆栈跟踪

```
> 14:43:28,538 ERROR ManagementServiceImpl,http-30880-1:1294 - caught
> Throwable exception: java.lang.NoClassDefFoundError: Could not
> initialize class com.abcd.framework.web.servicelocator.ServiceLocator
> com.jaspersoft.jasperserver.api.JSException:
> java.lang.NoClassDefFoundError: Could not initialize class
> com.abcd.framework.web.servicelocator.ServiceLocator  at
> com.jaspersoft.jasperserver.api.engine.jasperreports.service.impl.EngineServiceImpl.fillReport(EngineServiceImpl.java:497)
>   at
> com.jaspersoft.jasperserver.api.engine.jasperreports.service.impl.EngineServiceImpl.executeReportUnitRequest(EngineServiceImpl.java:1666)
>   at
> com.jaspersoft.jasperserver.api.engine.jasperreports.domain.impl.ReportUnitRequest.execute(ReportUnitRequest.java:67)
>   at
> com.jaspersoft.jasperserver.api.engine.jasperreports.service.impl.EngineServiceImpl.execute(EngineServiceImpl.java:399)
>   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
>   at
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
>   at java.lang.reflect.Method.invoke(Method.java:601)     at
> org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
>   at
> org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
>   at
> org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
>   at
> org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:80)
>   at
> com.jaspersoft.ji.license.LicenseCheckAspect.runReport(LicenseCheckAspect.java:113)
>   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
>   at
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
>   at java.lang.reflect.Method.invoke(Method.java:601)     at
> org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:621)
>   at
> org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:610)
>   at
> org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:65)
>   at
> org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:161)
>   at
> org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
>   at
> org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
>   at
> org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
>   at $Proxy210.execute(Unknown Source)    at
> com.jaspersoft.ji.adhoc.service.AdhocEngineServiceImpl.execute(AdhocEngineServiceImpl.java:2243)
>   at
> com.jaspersoft.jasperserver.ws.axis2.ManagementServiceImpl.runReport(ManagementServiceImpl.java:1200)
>   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
>   at
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
>   at java.lang.reflect.Method.invoke(Method.java:601)     at
> org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
>   at
> org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
>   at
> org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
>   at
> org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:80)
>   at
> com.jaspersoft.ji.license.LicenseCheckAspect.executeMSCall(LicenseCheckAspect.java:118)
>   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
>   at
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
>   at java.lang.reflect.Method.invoke(Method.java:601)     at
> org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:621)
>   at
> org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:610)
>   at
> org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:65)
>   at
> org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
>   at
> org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
>   at
> org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
>   at
> org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
>   at $Proxy267.runReport(Unknown Source)  at
> com.jaspersoft.jasperserver.ws.axis2.ManagementService.runReport(ManagementService.java:240)
>   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
>   at
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
>   at java.lang.reflect.Method.invoke(Method.java:601)     at
> org.apache.axis.providers.java.RPCProvider.invokeMethod(RPCProvider.java:397)
>   at
> org.apache.axis.providers.java.RPCProvider.processMessage(RPCProvider.java:186)
>   at
> org.apache.axis.providers.java.JavaProvider.invoke(JavaProvider.java:323)
>   at
> org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)
>   at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)     at
> org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)   at
> org.apache.axis.handlers.soap.SOAPService.invoke(SOAPService.java:453)
>   at org.apache.axis.server.AxisServer.invoke(AxisServer.java:281)    at
> org.apache.axis.transport.http.AxisServlet.doPost(AxisServlet.java:699)
>   at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)     at
> org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)
>   at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)     at
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
>   at
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
>   at
> org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:399)
>   at
> org.springframework.security.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
>   at
> org.springframework.security.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
>   at
> org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411)
>   at
> org.springframework.security.ui.ExceptionTranslationFilter.doFilterHttp(ExceptionTranslationFilter.java:101)
>   at
> org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
>   at
> org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411)
>   at
> com.jaspersoft.ji.license.JILicenseFilter.doFilter(JILicenseFilter.java:66)
>   at
> org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411)
>   at
> org.springframework.security.providers.anonymous.AnonymousProcessingFilter.doFilterHttp(AnonymousProcessingFilter.java:105)
>   at
> org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
>   at
> org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411)
>   at
> com.jaspersoft.jasperserver.api.metadata.user.service.impl.MetadataAuthenticationProcessingFilter.doFilter(MetadataAuthenticationProcessingFilter.java:139)
>   at
> org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411)
>   at
> com.jaspersoft.jasperserver.api.metadata.user.service.impl.PasswordExpirationProcessingFilter.doFilter(PasswordExpirationProcessingFilter.java:85)
>   at
> org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411)
>   at
> com.jaspersoft.jasperserver.multipleTenancy.MTBasicProcessingFilter.doFilterHttp(MTBasicProcessingFilter.java:180)
>   at
> org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
>   at
> org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411)
>   at
> com.jaspersoft.jasperserver.api.metadata.user.service.impl.JIPortletAuthenticationProcessingFilter.doFilter(JIPortletAuthenticationProcessingFilter.java:81)
>   at
> org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411)
>   at
> com.jaspersoft.jasperserver.api.logging.filter.BasicLoggingFilter.doFilter(BasicLoggingFilter.java:53)
>   at
> org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411)
>   at
> org.springframework.security.context.HttpSessionContextIntegrationFilter.doFilterHttp(HttpSessionContextIntegrationFilter.java:235)
>   at
> org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
>   at
> org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:411)
>   at
> org.springframework.security.util.FilterChainProxy.doFilter(FilterChainProxy.java:188)
>   at
> org.springframework.security.util.FilterToBeanProxy.doFilter(FilterToBeanProxy.java:99)
>   at
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
>   at
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
>   at
> com.jaspersoft.jasperserver.war.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:67)
>   at
> org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
>   at
> org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
>   at
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
>   at
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
>   at
> com.jaspersoft.jasperserver.war.P3PFilter.doFilter(P3PFilter.java:43)
>   at
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
>   at
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
>   at
> org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
>   at
> org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
>   at
> org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:558)
>   at
> org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
>   at
> org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
>   at
> org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
>   at
> org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
>   at
> org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:859)
>   at
> org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)
>   at
> org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1555)
>   at java.lang.Thread.run(Thread.java:722) Caused by:
> java.lang.NoClassDefFoundError: Could not initialize class
> com.abcd.framework.web.servicelocator.ServiceLocator  at
> com.abcd.myproject.service.ReportProcessingService.fetchReportRecords(ReportProcessingService.java:810)
>   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
>   at
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
>   at java.lang.reflect.Method.invoke(Method.java:601)     at
> org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
>   at
> org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
>   at
> org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
>   at
> org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
>   at
> org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
>   at
> org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
>   at $Proxy268.fetchReportRecordsForCTR275(Unknown Source)    at
> com.abcd.myproject.ReportDataSourceServiceImpl.setReportParameterValues(ReportDataSourceServiceImpl.java:79)
>   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at
> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
>   at
> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
>   at java.lang.reflect.Method.invoke(Method.java:601)     at
> org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
>   at
> org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
>   at
> org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
>   at
> org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:50)
>   at
> org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
>   at
> org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
>   at $Proxy315.setReportParameterValues(Unknown Source)   at
> com.jaspersoft.jasperserver.api.engine.jasperreports.service.impl.EngineServiceImpl.fillReport(EngineServiceImpl.java:1463)
>   at
> com.jaspersoft.jasperserver.api.engine.jasperreports.service.impl.EngineServiceImpl$ReportFill.runReport(EngineServiceImpl.java:874)
>   at
> com.jaspersoft.jasperserver.api.engine.jasperreports.service.impl.EngineServiceImpl$ReportRunnable.run(EngineServiceImpl.java:754)
>   at
> com.jaspersoft.jasperserver.api.engine.jasperreports.service.impl.EngineServiceImpl$SynchronousExecutor.execute(EngineServiceImpl.java:733)
>   at
> com.jaspersoft.jasperserver.api.engine.jasperreports.service.impl.EngineServiceImpl.fillReport(EngineServiceImpl.java:488)
>   ... 115 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:07:11.360

`NoClassDefFound`表明，在编译时一切正常，但在运行时却不行。也许你的一些`.jars`在你的tomcat上丢失了。您必须将它们添加到 tomcat 类路径或将它们复制到运行 tomcat 的 JRE。

[为什么我在 Java 中得到 NoClassDefFoundError](https://stackoverflow.com/questions/34413/why-am-i-getting-a-noclassdeffounderror-in-java)？您可能会找到更多信息/解释。

这里[没有复制到 Tomcat 的 lib 文件夹的 Jars](https://stackoverflow.com/questions/6041991/jars-not-copied-to-tomcats-lib-folder)是关于设置 eclipse 以自动部署依赖项的线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-08T20:42:52.867

一些澄清：

1.  `NoClassDefFoundError`!=`ClassNotFoundException`
2.  `NoClassDefFoundError`通常意味着 JVM 曾尝试实例化该类但未能成功。

所以，一些提示：

*   查找该类的第一个异常。
*   `ExceptionInInitializerError`之前找一些`NoClassDefFoundError`
*   错误可能出在`static`您班级的积木中。

# javascript - 每个月的第一个星期二

> ID：14519079
> 
> 赞同：1
> 
> 时间：2013-01-25T09:41:40.143
> 
> 标签：javascript

您好，我正在尝试使用以下代码，它是“提升代码”的混搭，但它一直在抽出今天的日期和时间。

我试图在 19:00 获得每个月第一个星期二的日期。

我正在使用 W3C School Try-it 进行测试。

```
<!DOCTYPE html>
<html>
<head>
<script>
function displayDate()
{

var myDate = new Date();
myDate.setHours(19, 00, 0, 0);
myDate.setYear(2013);

myDate.setDate(1);
myDate.setMonth();

//Find Tuesday
var tue = 2;

while(myDate.getDay() != tue) {
    myDate.setDate(myDate.getDate() + 1);

}

document.write(myDate);
</script>
</head>
<body>

<h1>My First JavaScript</h1>
<p id="demo">This is a paragraph.</p>

<button type="button" onclick="displayDate()">Display Date</button>

</body>
</html> 
```

罗伊

<==更新==>

我使用了您的代码，该代码运行良好，但在下个月的第一个星期二发生后需要考虑在内，我尝试了这个 if 语句但中断了。

```
function getTuesday() {
    var datenow = new Date();
    var d = new Date(),
        month = d.getMonth(),
        tuedays= [];

    d.setDate(1);

    // Get the first Monday in the month
    while (d.getDay() !== 2) {
        d.setDate(d.getDate() + 1);
    }

    // Get all the other Tuesdays in the month
    while (d.getMonth() === month) {
        tuedays.push(new Date(d.setHours(17,00,00,00)));
        d.setDate(d.getDate() + 7);
    }
If (d.getDate() >= datenow.getDate)
{
    d.setMonth(d.getMonth() + 1);
    document.write(tuedays[1]);
}
Else
{
   document.write(tuedays[1]);
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:46:45.210

使用以下功能，这将为您提供当前月份的星期二。

```
function getTuesday() {
    var d = new Date(),
        month = d.getMonth(),
        tuesdays= [];

    d.setDate(1);

    // Get the first Monday in the month
    while (d.getDay() !== 2) {
        d.setDate(d.getDate() + 1);
    }

    // Get all the other Tuesdays in the month
    while (d.getMonth() === month) {
        tuesdays.push(new Date(d.getTime()));
        d.setDate(d.getDate() + 7);
    }

    return tuesdays;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-11T17:37:36.193

我知道这是旧的，但这是我根据 Sahal 编写的函数编写的函数，它接受一些附加功能。我将通过参数并在下面返回。

```
function getDates(dayString, month, year, first, allInYear) {
    if (!dayString) { console.error('Missing required parameter: dayString is required.'); return; }
    if (first === undefined || first === null) { first = false; }
    if (allInYear === undefined || allInYear === null) { allInYear = false; }
    if (year === undefined || year === null) { year = new Date().getFullYear(); }
    var converted = false;
    if (month === undefined || month === null) {
        var temp = new Date();
        if (temp.getDate() > 9) {
            month = ((temp.getMonth() + 1) == 12) ? 11 : (temp.getMonth() + 1);
        } else {
            month = temp.getMonth();
        }
        converted = true;
    }
    if (typeof month === "string" && isNaN(parseInt(month))) {
        month = month.toLowerCase().substring(0, 3);
        switch (month) {
            case "jan":
                month = 0;
                break;
            case "feb":
                month = 1;
                break;
            case "mar":
                month = 2;
                break;
            case "apr":
                month = 3;
                break;
            case "may":
                month = 4;
                break;
            case "jun":
                month = 5;
                break;
            case "jul":
                month = 6;
                break;
            case "aug":
                month = 7;
                break;
            case "sep":
                month = 8;
                break;
            case "oct":
                month = 9;
                break;
            case "nov":
                month = 10;
                break;
            case "dec":
                month = 11;
                break;
            default:
                var temp = new Date();
                if (temp.getDate() > 9) {
                    month = ((temp.getMonth() + 1) == 12) ? 11 : (temp.getMonth() + 1);
                } else {
                    month = temp.getMonth();
                }
                converted = true;
                break;
        }
    } else if (typeof month === "number" || (typeof month === "string" && !isNaN(parseInt(month)))) {
        month = (!converted) ? parseInt(month) - 1 : month;
    }
    if (typeof year === "string" && !isNaN(parseInt(year)) || typeof year === "number") {
        if (parseInt(year) / 1000 > 2) {
            year = parseInt(year);
        } else if (parseInt(year) / 10 >= 0 && parseInt(year) / 10 < 10) {
            var temp2 = new Date().getFullYear();
            year = (parseInt(Math.floor(temp2 / 100)) * 100) + parseInt(year);
        }
    } else if (typeof year === "string" && isNaN(parseInt(year))) {
        if (year === "this") {
            year = new Date().getFullYear();
        } else if (year === "last") {
            year = new Date().getFullYear() - 1;
        } else if (year === "next") {
            year = new Date().getFullYear() + 1;
        } else {
            console.warn('Year string not recognized, falling back to current year. (this, last, next).');
            year = new Date().getFullYear();
        }
    }
    var dates = [];
    //hang in there this is going to get a doosie
    var d = new Date(),
        dow = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"],
        getDow = function(sd, dowa) {
            for (var i = 0; i < dowa.length; i++) {
                var day = dowa[i];
                if (sd.toLowerCase().substring(0, 3) == day) {
                    return i;
                }
            }
            return -1;
        },
        di = getDow(dayString, dow),
        getDIM = function(year, mon) {
            var isLeap = ((year % 4) == 0 && ((year % 100) != 0 || (year % 400) == 0));
            return [31, (isLeap ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][mon];
        };
    d.setFullYear(year);
    d.setMonth(month, 1);
    if (di == -1) { console.error('Range Error: Day of the week should be between sunday and saturday'); return; }
    if (first && !allInYear) {
        while (d.getDay() !== di) {
            d.setDate(d.getDate() + 1);
        }
        return d;
    } else if (first && allInYear) {
        var tm = 0;
        d.setMonth(tm, 1);
        for (var i = tm; i <= 11; i++) {
            while (d.getDay() !== di) {
                d.setDate(d.getDate() + 1);
            }
            dates.push(new Date(d));
            tm += 1;
            d.setMonth(tm, 1);
        }
        return dates;
    } else if (!first && !allInYear) {
        var eom = getDIM(d.getFullYear(), d.getMonth());
        for (var x = 1; x <= eom; x++) {
            if (d.getDay() === di) {
                dates.push(new Date(d));
            }
            d.setDate(d.getDate() + 1);
        }
        return dates;
    } else if (!first && allInYear) {
        var tm = 0;
        for (var i = 0; i <= 11; i++) {
            var eom = getDIM(d.getFullYear(), i),
                dim = [];
            d.setMonth(i, 1);
            for (var x = 1; x <= eom && d.getMonth() == i; x++) {
                if (d.getDay() === di) {
                    dim.push(new Date(d));
                }
                d.setDate(d.getDate() + 1);
            }
            dates.push(dim);
        }
        return dates;
    } else {
        return [];
    }
} 
```

所以唯一需要的参数是日期字符串，您可以选择设置月份，年份，第一个或一个月中的全部以及一年中的全部，月份和年份默认为当前，第一个和allInYear默认为false，但是您可以通过将 null 或 undefined 传递给月份和年份参数，在 moth 中设置第一个。

月份参数接受：`null|undefined, number, or string eg 'July'`

年份参数接受：`null|undefined, number 2 or 4 digit, string eg '19' or '2019' also 'last', 'this', 'next'`

返回 Date 对象、Array[Date object...] 或 Array[Array[Date object...]...]

这已经过测试，应该涵盖大多数情况......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-14T15:35:28.970

嗯，自从我问这个问题已经 8 年多了，它出现在谷歌“每个月的第一个星期二”的最高结果中。原来的项目现在已经死了，但我获得了更多的经验，我觉得更有资格提供答案。

首先要注意的是，最初的问题并不明显，而且标题同样模棱两可。最初的目标是获得下一个本月的第一个星期二，因此可能是本月或下个月，具体取决于您所在月的位置。

由于问题含糊不清，我试图在答案中解释这些差异。

我的第一个功能是获取给定月份和年份的一周中特定日期的发生情况。感谢@Amadan 在对其中一个答案的评论中。

```
function GetFirstDayOfMonth(dayOfTheWeek, month, year){
    const date = new Date(year, month, 1);
    date.setDate(date.getDate() + ((7 + dayOfTheWeek) - date.getDay()) % 7)
    return date;
} 
```

下一个函数，获取给定日期的一周中第一个指定日期的下一次出现。

```
function GetFirstNextFirstDayOfTheWeek(currentDate, day){
    const returnValue = GetFirstDayOfMonth(day, currentDate.getMonth(), currentDate.getFullYear());

    if(returnValue.getDate() < currentDate.getDate()){
        return GetFirstNextFirstDayOfTheWeek(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1), day);
    }

    return returnValue;
} 
```

因此，要实现原始问题，我可以运行以下示例

```
const tuesday = 2;

function GetFirstNextFirstTuesday(){
    return GetFirstNextFirstDayOfTheWeek(new Date(), tuesday);
} 
```

实现每月的第一个星期二

```
const tuesday = 2;

function GetFirstTuesday(month, year){
    return GetFirstDayOfMonth(tuesday, month, year);
} 
```

并完成给定年份的所有第一个星期二。

```
const tuesday = 2;

function GetFirstTuesdayOfEveryMonth(year){
    const dates = [];
    for (let index = 0; index < 12; index++) {
        dates.push(GetFirstDayOfMonth(tuesday, index, year));    
    }
    return dates;
} 
```

```
function GetFirstDayOfMonth(dayOfTheWeek, month, year){
    // Get the first day of the month
    const date = new Date(year, month, 1);
    // Set the date based on the day of the week. 
    date.setDate(date.getDate() + ((7 + dayOfTheWeek) - date.getDay()) % 7)
    return date;
}

function GetFirstNextFirstDayOfTheWeek(currentDate, day){
    const returnValue = GetFirstDayOfMonth(day, currentDate.getMonth(), currentDate.getFullYear());

    if(returnValue.getDate() < currentDate.getDate()){
        return GetFirstNextFirstDayOfTheWeek(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1), day);
    }

    return returnValue;
}

const tuesday = 2;

function GetFirstTuesday(month, year){
    return GetFirstDayOfMonth(tuesday, month, year);
}

function GetFirstNextFirstTuesday(){
    return GetFirstNextFirstDayOfTheWeek(new Date(), tuesday);
}

function GetFirstTuesdayOfEveryMonth(year){
    const dates = [];
    for (let index = 0; index < 12; index++) {
        dates.push(GetFirstDayOfMonth(tuesday, index, year));    
    }
    return dates;
}

console.log(GetFirstNextFirstTuesday());
console.log(GetFirstTuesday(09, 2021));
console.log(GetFirstTuesdayOfEveryMonth(2022));
```

希望这可以帮助任何似乎在这篇旧帖子上发茬的人，并感谢那些回答的人。

# python - Python：libsvm.dll 出错

> ID：14519082
> 
> 赞同：0
> 
> 时间：2013-01-25T09:41:46.970
> 
> 标签：python, python-2.7, runtime-error, libsvm

Python 和 SVM 包的新手。我目前正在使用 Python 2.7，并且已经安装了 libsvm-3.14。但是我在下面收到错误。

有谁知道这是什么意思？

```
Traceback (most recent call last):
  File "C:\Users\PC\Desktop\Python27\MyProject\src\Main.py", line 12, in <module>
    from Classifier.svm import *
  File "C:\Users\PC\Desktop\Python27\MyProject\src\Classifier\svm.py", line 14, in <module>
    libsvm = CDLL('../windows/libsvm.dll')
  File "C:\Python27\lib\ctypes\__init__.py", line 365, in __init__
    self._handle = _dlopen(self._name, mode)
WindowsError: [Error 126] The specified module could not be found 
```

# haskell - 在 Haskell 中用函数依赖表示类型类关系

> ID：14519083
> 
> 赞同：3
> 
> 时间：2013-01-25T09:41:48.203
> 
> 标签：haskell, typeclass, functional-dependencies

我想表达我有 3 个相关的类型类。

我有两个文件。第一的：

```
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies #-}
module ModA where

class Class a b c | a -> b, b -> c where
    getB :: a -> b
    getC :: b -> c 
```

第二：

```
{-# LANGUAGE MultiParamTypeClasses, FunctionalDependencies #-}
module B where

import qualified ModA

data A = A {f1::String}

data B = B {f2::String}

data C = C {f3::String}

instance ModA.Class A B C where
    getB a = B "hey"
    getC a = C "ho"

getABForMe = ModA.getB (A "boo")

getACForMe = ModA.getC (B "yo") 
```

我得到的错误：

```
No instance for (ModA.Class a0 B C)
  arising from a use of `ModA.getC'
Possible fix: add an instance declaration for (ModA.Class a0 B C)
In the expression: ModA.getC (B "yo")
In an equation for `getACForMe': getACForMe = ModA.getC (B "yo") 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T10:14:30.097

您可以使功能依赖“循环”：

```
class Class a b c | a->b, b->c, c->a where
    getB :: a -> b
    getC :: b -> c 
```

所以任何一个类型参数都可以从其他任何一个类型参数中推导出来。但我不确定你是否真的想要这个；为什么不只拥有一个具有一个fundep 和一个方法的类型类，并创建它的两个实例（`instance Class A B`和`instance Class B C`）？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T09:49:33.410

GHC 无法知道`a`. `getC`调用固定`b`为 type `B`，然后函数依赖允许 GHC 推断出`c`必须是`C`. 但没有`a`可用的信息。

# iphone - XML 不解析为 NSDictionary？

> ID：14519084
> 
> 赞同：1
> 
> 时间：2013-01-25T09:41:56.293
> 
> 标签：iphone, xmlreader

我正在使用[XMLReader](https://github.com/amarcadet/XMLReader/blob/master/XMLReader.h)将 xmlString 转换为 NSDictionary，它对某些 xml 字符串运行良好。但它为下面显示的 xml 提供了空字典

```
<?xml version=\"1.0\"?>
<THEME>
    <OBJ>
        <FORMBG>0x00E0E0E0</FORMBG>
        <ALERTBG>0x00B4B4B4</ALERTBG>
        <FORMFONT>0x0033001A</FORMFONT>
        <FORMFONT2>0x00575757</FORMFONT2>
        <FORMFONT3>0x003E3E37</FORMFONT3>
        <ROWSELECTORLIST>0x0000CC33</ROWSELECTORLIST>
        <ROWDIVIDER>0x00BBBBBB</ROWDIVIDER>
        <SUBHEADER>0x00A8A8A8</SUBHEADER>
        <SELECTORCOMPONENT>0x00C2C2C2</SELECTORCOMPONENT>
        <FOOTER>0x00796767</FOOTER>
    </OBJ>
</THEME> 
```

我的转换代码如下：

```
NSString *stringURL=[NSString stringWithFormat:@"http://202.58.232.138/mt/theme.aspx"];
NSURL *url=[NSURL URLWithString:stringURL];

NSMutableURLRequest *request=[[NSMutableURLRequest alloc] initWithURL:url];
NSError *error;
NSURLResponse *response;
NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

NSString *responseString=[[NSString alloc] initWithData:urlData encoding:NSUTF8StringEncoding];
NSLog(@"response string is %@",responseString);

NSDictionary *dictionary=[XMLReader dictionaryForXMLString:responseString error:nil]; 
```

该网址正在浏览器上打印以下数据

```
 0x00E0E0E00x00B4B4B40x0033001A0x005757570x003E3E370x0000CC330x00BBBBBB0x00A8A8A80x00C2C2C2
0x00796767 
```

并在 xcode 日志上打印将显示以下数据。

```
<?xml version=\"1.0\"?>
<THEME>
    <OBJ>
        <FORMBG>0x00E0E0E0</FORMBG>
        <ALERTBG>0x00B4B4B4</ALERTBG>
        <FORMFONT>0x0033001A</FORMFONT>
        <FORMFONT2>0x00575757</FORMFONT2>
        <FORMFONT3>0x003E3E37</FORMFONT3>
        <ROWSELECTORLIST>0x0000CC33</ROWSELECTORLIST>
        <ROWDIVIDER>0x00BBBBBB</ROWDIVIDER>
        <SUBHEADER>0x00A8A8A8</SUBHEADER>
        <SELECTORCOMPONENT>0x00C2C2C2</SELECTORCOMPONENT>
        <FOOTER>0x00796767</FOOTER>
    </OBJ>
</THEME> 
```

我认为这就是它没有转换为 NSDictionary 的原因。请帮助如果您以前遇到过这样的问题。当您将上述 xml 数据传递给 for [XMLReader dictionaryForXMLString:responseString error:nil]; 在响应字符串的位置，它将完美地工作。但是如果您执行上面的代码，它将显示字典 =（null）。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:09:49.710

**终于发现错误了：**

它正在计算响应字符串中的转义序列。这就是为什么不解析为 NSDictionary。我在下面添加了用空白替换转义序列的行。

```
NSString *responseString=[[NSString alloc] initWithData:urlData encoding:NSUTF8StringEncoding];
responseString=[responseString stringByReplacingOccurrencesOfString:@"\\" withString:@""]; 
```

现在我的代码运行完美。解析后输出如下所示。

```
xml dictianary is {
THEME =     {
    OBJ =         {
        ALERTBG =             {
            text = 0x00B4B4B4;
        };
        FOOTER =             {
            text = 0x00796767;
        };
        FORMBG =             {
            text = 0x00E0E0E0;
        };
        FORMFONT =             {
            text = 0x0033001A;
        };
        FORMFONT2 =             {
            text = 0x00575757;
        };
        FORMFONT3 =             {
            text = 0x003E3E37;
        };
        ROWDIVIDER =             {
            text = 0x00BBBBBB;
        };
        ROWSELECTORLIST =             {
            text = 0x0000CC33;
        };
        SELECTORCOMPONENT =             {
            text = 0x00C2C2C2;
        };
        SUBHEADER =             {
            text = 0x00A8A8A8;
        };
    };
};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:57:29.423

你试过把分配

```
NSDictionary *dics=[XMLReader dictionaryForXMLData:urlData error:nil]; 
```

在异步请求的回调中？它非常适合我。

我在想也许一开始下载 xml 可能会出现问题，但你没有检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:47:27.673

我猜字典没有初始化。

你应该初始化 NSDictionary *dics。

# java - 为什么我们要检查要在站点网格和其他地方应用两次的过滤器？

> ID：14519088
> 
> 赞同：-1
> 
> 时间：2013-01-25T09:42:10.810
> 
> 标签：java, jakarta-ee, servlet-filters, sitemesh

sitemesh 的简单流程图（[此处](http://wiki.sitemesh.org/display/sitemesh/Flow+Diagram)）显示他们检查是否第一次应用过滤器。我也在其他过滤器的代码中看到了这个检查。我无法理解可以为同一请求应用两次相同过滤器的情况。请解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:40:36.313

从 Servlet 2.4 开始，过滤器也可以应用于通过[请求调度](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletRequest.html#getRequestDispatcher%28java.lang.String%29)程序调用的请求。如果过滤器被指定为在包含或转发上运行，例如它可以执行多次。例如

```
<filter-mapping>
  <filter-name>Logging Filter</filter-name>
  <url-pattern>/products/*</url-pattern>
  <dispatcher>FORWARD</dispatcher>
  <dispatcher>INCLUDE</dispatcher>
  <dispatcher>REQUEST</dispatcher>
  <dispatcher>ERROR</dispatcher>
</filter-mapping> 
```

因此，例如，当一个请求由一个 servlet 处理并且该 servlet 将该请求转发到其他地方时

```
httpServletRequest.getRequestDispatcher("/products/somewhereElse").forward(httpServletRequest, httpServletResponse); 
```

，则过滤器可能会运行两次。一次用于原始请求，然后再次用于转发，提供 URL 路径和调度程序配置允许。

# android - 拍摄后的Android裁剪图像

> ID：14519096
> 
> 赞同：2
> 
> 时间：2013-01-25T09:42:31.057
> 
> 标签：android, android-gallery

我试图让用户在拍摄/从图库中选择后裁剪图像。现在，从画廊作品而不是相机中选择后的裁剪。以下是我的代码，我没有收到任何错误消息。我们关注[了 http://mobile.tutsplus.com/tutorials/android/capture-and-crop-an-image-with-the-device-camera/](http://mobile.tutsplus.com/tutorials/android/capture-and-crop-an-image-with-the-device-camera/)

```
//Camera button  clicked
    public void camera_click(View view) {
        Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        cameraIntent.putExtra("return-data", true);
        startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);

    } 
    //Result of camera capture
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
                 //camera
            if (requestCode == CAMERA_PIC_REQUEST) {

                mImageCaptureUri = data.getData();
                performCrop();
            }
            if (requestCode == PIC_CROP) {
                //get the returned data
                try{
                Bundle extras = data.getExtras();
//get the cropped bitmap
                thumbnail = extras.getParcelable("data");
                //retrieve a reference to the ImageView
                ImageView image = (ImageView) findViewById(R.id.test_image);
//display the returned cropped image
                image.setImageBitmap(thumbnail);
                TextView imgTv = (TextView) findViewById(R.id.imageInfo);
                String desc = imgTv.getText().toString();
                if (desc.equalsIgnoreCase("")) {
                    String errorMessage = "Please enter a description before submitting a photo.";
                    Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
                    toast.show();
                } else {

                }
                }
                catch(Exception ex)
                {
                    Log.i("err", ex.getMessage());
                }
            }
                 //gallery selected
            if (requestCode == SELECT_PHOTO) {
                if (data != null) {

                    Cursor cursor = getContentResolver().query(data.getData(), null, null, null, null);
                    cursor.moveToFirst();  //if not doing this, 01-22 19:17:04.564: ERROR/AndroidRuntime(26264): Caused by: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1
                    int idx = cursor.getColumnIndex(ImageColumns.DATA);
                    String fileSrc = cursor.getString(idx);
                    thumbnail = BitmapFactory.decodeFile(fileSrc); //load preview image
                    thumbnail = android.graphics.Bitmap.createScaledBitmap(thumbnail, 100, 100, true);
                    //   ImageView image = (ImageView) findViewById(R.id.test_image);
                    // image.setImageBitmap(thumbnail);
                    ImageButton cam = (ImageButton) findViewById(R.id.camera);
                    //    cam.setVisibility(View.INVISIBLE);
                    ImageButton gal = (ImageButton) findViewById(R.id.gallery);
                    mImageCaptureUri = data.getData();
                    //  gal.setVisibility(View.INVISIBLE);
                    performCrop();

                } else {
                    //Log.d(LOG_TAG, "idButSelPic Photopicker canceled");
                    // m_Tv.setText("Image selection canceled!");
                }

            }
        }
    }//end onactivity results

    //method to luanch crop image
private void performCrop() {
    try {
        //call the standard crop action intent (the user device may not support it)
        Intent cropIntent = new Intent("com.android.camera.action.CROP");

        cropIntent.setDataAndType(mImageCaptureUri, "image/*");
         //set crop properties
        cropIntent.putExtra("crop", "true");
        //indicate aspect of desired crop
        cropIntent.putExtra("aspectX", 1);
        cropIntent.putExtra("aspectY", 1);
        //indicate output X and Y
        cropIntent.putExtra("outputX", 256);
        cropIntent.putExtra("outputY", 256);
        //retrieve data on return
        cropIntent.putExtra("return-data", true);
        //start the activity - we handle returning in onActivityResult
        startActivityForResult(cropIntent, PIC_CROP);
    } catch (ActivityNotFoundException anfe) {
        //display an error message
        Log.i("err", anfe.getLocalizedMessage());
        String errorMessage = "Your device doesn't support the crop action!";
        Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
        toast.show();
        Intent myIntent = new Intent();
        startActivityForResult(myIntent, PIC_CROP);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:07:00.097

这条线可能会给你这个问题：

```
mImageCaptureUri = data.getData(); 
```

删除它并检查它。

如果没有，我可以给你一个工作代码。

**工作示例：** 还包括这个库：[https ://github.com/lvillani/android-cropimage](https://github.com/lvillani/android-cropimage)

```
@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
         switch (requestCode) {
            case PICK_FROM_CAMERA:

                    doCrop();

                break;

            case PICK_FROM_FILE: 
                if(data != null){
                mImageCaptureUri = data.getData();

                doCrop();
                }
                break;          

            case CROP_FROM_CAMERA:     
                if(data != null){
                Bundle extras = data.getExtras();

                if (extras != null) {               
                    Bitmap photo = extras.getParcelable("data");

                    imagebutton.setImageBitmap(photo);
                    imagebutton.setScaleType(ScaleType.FIT_XY);

                }

                File f = new File(mImageCaptureUri.getPath());            

                if (f.exists()) f.delete();
                }
                break;

        }
    }

    private void doCrop() {
        // TODO Auto-generated method stub
        final ArrayList<CropOption> cropOptions = new ArrayList<CropOption>();

        Intent intent = new Intent("com.android.camera.action.CROP");
//        intent.setClassName("com.android.camera", "com.android.camera.CropImage");
        intent.setType("image/*");

        List<ResolveInfo> list = getActivity().getPackageManager().queryIntentActivities( intent, 0 );

        int size = list.size();

        if (size == 0) {
            Toast.makeText(getActivity(), "Can not find image crop app", Toast.LENGTH_SHORT).show();

            return;
        } else {
            intent.setData(mImageCaptureUri);

            intent.putExtra("outputX", 200);
            intent.putExtra("outputY", 200);
            intent.putExtra("aspectX", 1);
            intent.putExtra("aspectY", 1);
            intent.putExtra("scale", true);
            intent.putExtra("return-data", true);

            if (size == 1) {
                Intent i        = new Intent(intent);
                ResolveInfo res = list.get(0);

                i.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));

                startActivityForResult(i, CROP_FROM_CAMERA);
            } else {
                for (ResolveInfo res : list) {
                    final CropOption co = new CropOption();

                    co.title    = getActivity().getPackageManager().getApplicationLabel(res.activityInfo.applicationInfo);
                    co.icon     = getActivity().getPackageManager().getApplicationIcon(res.activityInfo.applicationInfo);
                    co.appIntent= new Intent(intent);

                    co.appIntent.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));

                    cropOptions.add(co);
                }

                CropOptionAdapter adapter = new CropOptionAdapter(getActivity(), cropOptions);

                AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
                builder.setTitle("Choose Crop App");
                builder.setAdapter( adapter, new DialogInterface.OnClickListener() {
                    public void onClick( DialogInterface dialog, int item ) {
                        startActivityForResult( cropOptions.get(item).appIntent, CROP_FROM_CAMERA);
                    }
                });

                builder.setOnCancelListener( new DialogInterface.OnCancelListener() {
                    @Override
                    public void onCancel( DialogInterface dialog ) {

                        if (mImageCaptureUri != null ) {
                            getActivity().getContentResolver().delete(mImageCaptureUri, null, null );
                            mImageCaptureUri = null;
                        }
                    }
                } );

                AlertDialog alert = builder.create();

                alert.show();
            }
        }
    } 
```

**裁剪选项类：**

```
public class CropOption {
    public CharSequence title;
    public Drawable icon;
    public Intent appIntent;
} 
```

**裁剪选项适配器：**

```
public class CropOptionAdapter extends ArrayAdapter<CropOption> {
    private ArrayList<CropOption> mOptions;
    private LayoutInflater mInflater;

    public CropOptionAdapter(Context context, ArrayList<CropOption> options) {
        super(context, R.layout.crop_selector, options);

        mOptions    = options;

        mInflater   = LayoutInflater.from(context);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup group) {
        if (convertView == null)
            convertView = mInflater.inflate(R.layout.crop_selector, null);

        CropOption item = mOptions.get(position);

        if (item != null) {
            ((ImageView) convertView.findViewById(R.id.iv_icon)).setImageDrawable(item.icon);
            ((TextView) convertView.findViewById(R.id.tv_name)).setText(item.title);

            return convertView;
        }

        return null;
    }
} 
```

# python - 是否可以将 Python 解释器的状态保存到文件中？

> ID：14519100
> 
> 赞同：20
> 
> 时间：2013-01-25T09:42:38.707
> 
> 标签：python, python-2.7

如果，当用户使用我的 Python 应用程序并且应用程序崩溃时，应用程序的状态可以保存到一个文件并发送给我，开发人员怎么办？我打开 Python 解释器并从用户崩溃的地方开始调试。

* * *

澄清一下，当我调试应用程序并引发未处理的异常时，我可以在事后调试应用程序，访问所有局部变量及其值，这对于快速修复错误至关重要。但是，当用户的应用程序崩溃时，我只收到错误发生时间的堆栈跟踪，这很有帮助，但不如交互式调试那么多。

那么是否可以将 Python 应用程序的状态保存到文件中，关闭解释器，然后在稍后阶段从该文件恢复执行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T11:25:09.923

[此](https://github.com/gooli/pydump)工具可能会有所帮助，但您需要在发生异常时在代码中调用转储程序。它只是将回溯和框架对象腌制到文件中

[这里](https://stackoverflow.com/questions/141802/how-do-i-dump-an-entire-python-process-for-later-debugging-inspection)有一个类似的问题。

# wordpress - WordPress 主题定制工具栏 CSS

> ID：14519107
> 
> 赞同：1
> 
> 时间：2013-01-25T09:43:05.327
> 
> 标签：wordpress, admin

如何更新默认的 WordPress Theme Customizer 工具栏 CSS，以便例如将文本颜色从默认的黑色更改。

添加管理 CSS 的默认钩子在这里似乎不起作用`add_action('admin_head', 'custom_admin_css');`

因此，例如`#theme-description` id，可以更改为另一种颜色，但如何？！

*我实际上想在自定义选项中添加一些 CSS，而不是粘贴大量令人困惑的代码，我试图让问题保持简单，所以如果我可以为此更改 CSS，那么我可以为我需要的内容创建 CSS。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:35:50.357

您可以尝试我认为的**customize_controls_print_styles**钩子：

```
function theme_customizer_css() { ?>
    <style>
       // Custom Styles in here
    </style>
<?php }
add_action( 'customize_controls_print_styles', 'theme_customizer_css' ); 
```

# asp.net - Crystal 报表查看器 - 登录提示

> ID：14519111
> 
> 赞同：0
> 
> 时间：2013-01-25T09:43:20.853
> 
> 标签：asp.net, crystal-reports, report

我有一些来自客户的 Crystal Reports，我需要链接到我们正在创建的 ASP.NET 应用程序。我有以下代码：

```
 LINQDataContext dc = new LINQDataContext();
        Order o = dc.Orders.Where(a => a.ID == long.Parse(Request.QueryString["OrderID"])).Single();
        SqlConnectionStringBuilder bld = new SqlConnectionStringBuilder(dc.Connection.ConnectionString);
        CrystalReportSource src = new CrystalReportSource();
        src.ID = "test";
        ConnectionInfo myConnectionInfo = new ConnectionInfo();

        myConnectionInfo.ServerName = bld.DataSource;
        myConnectionInfo.DatabaseName = bld.InitialCatalog;
        myConnectionInfo.UserID = bld.UserID;
        myConnectionInfo.Password = bld.Password;

        src.Report.FileName = o.SalesPersonObject.GetType().GetProperty(Request.QueryString["DeliveryNoteType"]).GetValue(o.SalesPersonObject, null).ToString();

        ParameterDiscreteValue param = new ParameterDiscreteValue();
        param.Value = long.Parse(Request.QueryString["OrderID"]); 
        src.ReportDocument.ParameterFields[0].CurrentValues.Add(param); 

        CrystalReportViewer vw = new CrystalReportViewer();
        src.ReportDocument.SetDatabaseLogon(bld.UserID, bld.Password);
        vw.HasToggleGroupTreeButton = false;
        vw.AutoDataBind = true;
        vw.Height = 1268;
        vw.Width = 1000;
        vw.HasPrintButton = true;
        vw.PrintMode = PrintMode.Pdf;
        vw.ReportSource = src;
        //vw.EnableDatabaseLogonPrompt = false;
        vw.HasToggleParameterPanelButton = false;
        vw.HasCrystalLogo = false;
        vw.RefreshReport();
        plcReport.Controls.Add(vw); 
```

但是，即使我使用 SetDatabaseLogon 方法设置用户名/密码，我仍然会收到输入数据库登录详细信息的提示，或者更具体地说是输入密码。我试过使用 vw.EnableDatabaseLogonPrompt = true，但这给了我一个数据库登录问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:11:20.117

对于您的连接，请使用 OLE 驱动程序；不要使用本机 SQL 驱动程序。不确定这是否是您当前的问题，但我的经验是，如果我使用本机驱动程序，它在开发中可以正常工作，但在生产中总是提示登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:06:22.960

看看我是如何帮助另一个面临类似问题的**SO 用户**的。我希望你能得到一些有价值的东西。

[参考](https://stackoverflow.com/questions/14412116/crystal-reports-giving-database-logon-failed-or-asking-for-credentials/14413395#14413395)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-29T07:30:09.410

您可以尝试以下代码：

```
using CrystalDecisions;
using CrystalDecisions.CrystalReports;
using CrystalDecisions.CrystalReports.Engine;
using CrystalDecisions.Shared;

public partial class ClientsByOpeningDate : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
             ReportDocument rpt = new ReportDocument();
             rpt.Load(Server.MapPath("ClientsByOpenDate.rpt"));
             rpt.SetDatabaseLogon("myUserLogin", "mypassword", @"Server", "Database");
             CrystalReportViewer1.ReportSource = rpt;
        }
    }
} 
```

# javascript - 简单地添加和删除 SVG 元素时，Chrome 会泄漏内存

> ID：14519114
> 
> 赞同：7
> 
> 时间：2013-01-25T09:43:29.323
> 
> 标签：javascript, memory-leaks, svg

继续这个问题：[任务管理器显示内存泄漏，但堆快照没有](https://stackoverflow.com/questions/14467112/task-manager-shows-memory-leak-but-heap-snapshot-doesnt)

我设法创建了一个非常简单的示例来说明此泄漏，这是完整的源代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>svg test</title>

        <script type="text/javascript">

            var svg;
            var interval;
            var svg;

            window.onload = function(){
                createSVG();
                start();
            }

            function start(){
                interval = setInterval(createElements, 100);                
            }

            function createSVG(){

                var div = document.getElementById("svgdiv");
                div.innerHTML = "";

                svg = createSvgElement("svg");
                svg.style.position = "absolute";
                svg.style.width = "600px";
                svg.style.height = "500px";
                svg.setAttribute("version", "1.1");
                div.appendChild(svg);
                createElements();               
            }

            function createElements(){

                removeElements();

                for(var i = 0; i < 500; i++){
                    var element = createSvgElement("circle");
                    element.setAttribute("r", Math.random() * 10);
                    var transform = "translate(" + Math.round(Math.random() * 600) + "," + Math.round(Math.random() * 500) + ")";
                    element.setAttribute("transform", transform);
                    element.setAttribute("fill", "#CC0000");
                    svg.appendChild(element);
                }
            }

            function removeElements(){
                while(svg.hasChildNodes() ){
                    svg.removeChild(svg.lastChild);
                }               
            }

            function createSvgElement (name) {
                return document.createElementNS("http://www.w3.org/2000/svg", name);
            }

            function stop(){
                clearInterval(interval)
            }

        </script>
    </head>
    <body style="background-color:#FFFFFF">
        <div id="svgdiv" style="width:600px; height:500px;"></div>
        <input type="button" value="start" onclick="start()">
        <input type="button" value="stop" onclick="stop()">
    </body>
    </html> 
```

如果我运行这个脚本，Chrome 会一直吃掉内存，直到它崩溃。其他浏览器没有。我没有一个一个地删除孩子，我还尝试通过设置innerHTML=""来快速清除它，但它是一样的。

我启用了 Chrome 的一个实验性功能，它显示了所使用的内存类型。“页面结构”内存增加了一点（但是 HTML 保持不变，并且没有分离的 DOM 对象），但大部分内存都在“其他”部分。

如果我停止脚本并强制 GC 完成它的工作，内存只会减少几千字节。但是，如果我等待一两分钟，内存几乎会被清理到初始水平。我知道我的脚本非常紧张，但是如果我仅每 1 或 2 秒运行一次它也会发生这种情况 - 我认为这足以让 GC 完成它的工作。而且我知道 GC 正在工作，因为释放了其他类型的内存。这可能是Chrome错误吗？也许我应该在删除元素之前做点什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:59:46.467

我设法减慢它的速度，但它仍然在泄漏。我还使用没有泄漏的 Raphael.js 重新创建了测试。但是当我测试时，我发现它是在附加圆圈的时候。所以拉斐尔一定在做些什么来阻止它在那个时候泄露。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:42:50.580

不确定，如果它会有很大帮助，但是如果你只定义一次“var svg”，那么内存消耗（在任务管理器中）并没有那么快地上升，并且 stop() 函数在那之后也可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-06T19:05:47.397

这确实是 Chrome 中的错误，稍后修复： [https ://bugs.chromium.org/p/chromium/issues/detail?id=172221&can=4&q=svg&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS% 20Area%20Feature%20Status%20Owner%20Summary](https://bugs.chromium.org/p/chromium/issues/detail?id=172221&can=4&q=svg&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary)

# css - 有一个长的 CSS 选择器不好吗？

> ID：14519115
> 
> 赞同：6
> 
> 时间：2013-01-25T09:43:29.627
> 
> 标签：css

是一个选择器

```
.a, .b, .c, .d, .e, .f, .g, .h, ......... , .zzzzz {font-size:16px} 
```

对性能不利？如果是，如何，如果不是，为什么？

我在 Google 上搜索并阅读了很多帖子，包括 Mozilla 的帖子，但没有发现任何提到将大量类名作为选择器是不好的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T09:45:40.683

不，这里没有性能问题。

不好的是一个涉及许多检查的长选择器，但您的选择器实际上是一个选择器序列，相当于

```
 .a {font-size:16px}
 .b {font-size:16px}
  ... 
```

只有一个类的选择器是最有效的选择器之一。

没有真正的问题，即使您可能应该拥有更少的类以便更轻松地管理您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T09:54:39.340

这是一次将公共属性分配给多个类的有效语法。没有副作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T09:55:40.500

节省一口是好的。是的，正如@dystroy 所说，它不会对您的页面性能产生太大影响，但它不是一个好的编码粒子，而且很难管理您的代码。

像这样写：

```
body{font-size:16px} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T18:47:03.880

你没有选择一个大的选择器，你只是为你的样式表分配了很多选择器。一个大的选择器将是例如：

```
header nav ul li a 
```

由于浏览器从右到左使用选择器，因此键选择器（行中的最后一个选择器，在本例中为锚元素 a）过于笼统。当开始渲染样式时，浏览器开始根据键选择器抓取所有元素，这可能意味着它获得了更多元素，有效地需要。在此示例中，如果导航项获得唯一的类会更好，因此样式表只能应用于以下选择器：

```
.primary-link 
```

因此，它为您的样式导入了正确的键选择器，以将渲染时间减少到最低限度。

如果您想阅读有关 CSS 选择器和性能的有趣内容，我可以推荐该页面：[http ://learn.shayhowe.com/advanced-html-css/performance-organization](http://learn.shayhowe.com/advanced-html-css/performance-organization)

# tcp - 如何在 TCP 中使用 FIN，为什么？

> ID：14519116
> 
> 赞同：-2
> 
> 时间：2013-01-25T09:43:33.420
> 
> 标签：tcp

我最近正在尝试研究 TCP，但一位研究生告诉我，FIN 也用于创建连接，即 3 次握手。

以下是我对 3 次握手过程的看法：

1.  客户端 A 将 SYN 中的数据报发布到客户端 B。
2.  客户端 B 收到它，并立即在 SYN 和 ACK 中发布另一个数据报。
3.  客户端 A 收到它，并立即在 ACK 中向客户端 B 发送另一个数据报。

当第三步完成时，连接将被建立。这是问题，我在 3 个步骤中找不到任何带有 FIN 的数据报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:46:01.777

`FIN`不用于创建连接。它用于关闭连接。

但是，可以在握手过程中使用 FIN 关闭连接，如图[所示](http://en.wikipedia.org/wiki/File%3aTcp_state_diagram_fixed.svg)。也许这就是研究生所指的？

# ios - Iphone 自定义滑块双向移动

> ID：14519121
> 
> 赞同：-7
> 
> 时间：2013-01-25T09:44:15.317
> 
> 标签：ios

*![在 iOS 自定义滑块中？](../Images/0a8cc0e4ee68de44714ddcace7d20df5.png) 我怎样才能在 iphone 中制作这种类型的自定义滑块，它可以从左侧和右侧扩展？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:50:07.283

请通过这个示例项目..它可能会满足您的要求..

[检查这个](https://github.com/avrahamshuk/ASRangeSlider)

只需导入 ARangeSlider 类并使用此代码..

```
ASRangeSlider *slider1 = [[ASRangeSlider alloc] initWithSpectrum:FloatRangeMake(0.0,f)];
[slider1 setThumbBackgroundImage:[UIImage imageNamed:@"GreenImage.png.png"]];
frame.size = self.BlackBackGround.frame.size;
slider1.frame = frame;
[BlackBackGround addSubview:self.slider1];
[slider1 addTarget:self action:@selector(slider1ValueChanged:) forControlEvents:UIControlEventValueChanged];
slider1.value=FloatRangeMake(0.0,f); 
```

和

```
-(Void) slider1ValueChanged : (id) sender
{
    CGRect changedFrame = slider1.activeAreaView.frame; // this is your changed frame
    // change the frames of your green image using this frame
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:58:32.220

还有很多其他的图书馆。例如： [https](https://github.com/cmezak/CMRangeSlider) ://github.com/cmezak/CMRangeSlider或 [https://github.com/buildmobile/iosrangeslider](https://github.com/buildmobile/iosrangeslider)或 [https://github.com/muZZkat/NMRangeSlider](https://github.com/muZZkat/NMRangeSlider)或 [https://github.com/evadne/RARangeSlider](https://github.com/evadne/RARangedSlider)

# html - DIV 的高度差异

> ID：14519124
> 
> 赞同：0
> 
> 时间：2013-01-25T09:44:25.320
> 
> 标签：html, css

我有一个主要部门，其中有两个部门

一个是左 DIV，另一个是右 DIV

[在这里提琴](http://jsfiddle.net/Ys4jv/)

HTML 是

```
<div class="main">

    <div class="left">
        Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. Lorem Ipsum is a dummy text. 
    </div>
    <div class="right">
        some text heresome text heresome text heresome text heresome text heresome text heresome text heresome text heresome text here
    </div
    </div> 
```

而 CSS 是

```
body
{
 background-color:black;   
}
.main
{
    width:80%;
    background-color:White;
    opacity:0.9;
    margin-left:auto;
    margin-right:auto;
    margin-top:25px;
}
.left
{
    width:68%;
    float:left;
    background-color:White;
    padding:2%;
    font-family:Calibri;
}

.right
{
    background-color:White;
    width:26%;
    padding:1%;
    float:right;
} 
```

我希望两个 DIV 必须始终具有相同的高度。无论其中存在多少文本。

现在我的右 DIV 的高度小于左 DIV，就像小提琴一样。

帮我。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:53:07.703

将此添加到 .main

```
height: 30%;
overflow: auto; 
```

链接：[小提琴示例](http://jsfiddle.net/Ys4jv/6/)

# html - 使用引导程序对齐列

> ID：14519126
> 
> 赞同：-1
> 
> 时间：2013-01-25T09:44:30.917
> 
> 标签：html, css, twitter-bootstrap

我确信以前有人问过这个问题，但我无法想出一个好的公式来搜索:(。无论如何。

看看下面的代码：

```
<div class="container">
    <div class="row">
        <div class="span6">
            <div class="well">HELOO WORLD</div>
        </div>
        <div class="span6">
            <div class="well">
                some very long text here
            </div>
        </div>
        <div class="span6">
            <div class="well">HELOO WORLD</div>
        </div>
    </div>
</div> 
```

[这里](http://jsfiddle.net/MgcDU/1505/ "这里")有一个jsfillde。有什么办法可以拉起第三个跨度直接在第一个跨度之后出现？

谢谢， 尼克拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:48:52.520

[将](http://jsfiddle.net/MgcDU/1506/)第三个 div 放入第一列：

```
<div class="container">
    <div class="row">
        <div class="span6">
            <div class="well">HELOO WORLD</div>
            <div class="well">HELOO WORLD</div>
        </div>
        <div class="span6">
            <div class="well">
                some very long text here
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:50:41.967

您可以将 CSS 更改为每个 span6 div 浮动的交替方式。由于默认浮动是左侧，只需将浮动右侧应用于备用 div。这

```
[class="span6"]:nth-of-type(even) {
    float: right;
} 
```

# dictionary - 如何在 VB 脚本中获取字典长度？

> ID：14519127
> 
> 赞同：1
> 
> 时间：2013-01-25T09:44:34.117
> 
> 标签：dictionary, vbscript

请帮我。在不创建手动函数来迭代字典的情况下，我对在 vbscript 中获取字典的长度或大小有点困惑。是否有任何可用的方法来获取字典的长度？（例如数组中的 UBound ）。

感谢您的关注，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T09:47:11.717

您可以使用[Count](http://www.devguru.com/technologies/vbscript/13992.asp)。Count 属性用于确定 Dictionary 对象中键/项对的数量。

# javafx-2 - Javafx 条形图大小

> ID：14519130
> 
> 赞同：0
> 
> 时间：2013-01-25T09:44:46.410
> 
> 标签：javafx-2

我想在图表添加到场景后将数据添加到图表中。由于该顺序，上升条的动画可用：

```
answer = FXCollections.observableArrayList();
Series<String, Number> aSeries = new Series<String, Number>();
aSeries.getData().add(new XYChart.Data("Mytest", 120));
answer.addAll(aSeries);

chartFxPanel.setScene(new Scene(chart));
chart.setData(answer); 
```

我唯一的问题是，条形图没有使用图表中的全部可用空间。

我尝试使用 yValue=1 添加条形来注册条形，然后将图表添加到场景中并更新值。但是又没有动画：

```
answer = FXCollections.observableArrayList();
Series<String, Number> aSeries = new Series<String, Number>();
aSeries.getData().add(new XYChart.Data("Mytest", 1));
answer.addAll(aSeries);

chart.setData(answer);
chartFxPanel.setScene(new Scene(chart));

new Timeline(
    new KeyFrame(
    Duration.millis(500),
    new EventHandler<ActionEvent>() {
     @Override
     public void handle(ActionEvent t) {
        answer.get(0).getData().get(0).setYValue(120);

     }
    })).play(); 
```

那么，酒吧如何使用完整的空间但有动画呢？

# c# - 如何将 XmlNodeList 转换为 Xmlstring 以将 xml 数据与数据集绑定

> ID：14519131
> 
> 赞同：2
> 
> 时间：2013-01-25T09:44:47.347
> 
> 标签：c#, asp.net, xml

```
XmlDocument objXmldoc = new XmlDocument();
objXmldoc.Load(txtBrowseFilePath.Text);    
XmlNodeList objxmlNodeList=null;
    objxmlNodeList = objXmldoc.SelectNodes(@"/AppXmlLogWritter/LogData[LogDateTime/text()[starts-with(. , '" + dateTimePickerFromDate.Value.ToString("yyyyMMdd") + "')]]");

DataSet ds = new DataSet();         
ds.ReadXml(objxmlNodeList); 
```

如何将 XmlNodeList 转换为 Xmlstring 以将 xml 数据与数据集绑定

xml文件

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<AppXmlLogWritter>
<LogData>
    <LogID>5678201301161640382918</LogID>
    <LogDateTime>20130116164037</LogDateTime>
    <LogType>Message</LogType>
    <LogFlag>RISLogFlag</LogFlag>
    <LogApplication>BaburaoLogApplication</LogApplication>
    <LogModule>RISLogModule</LogModule>
    <LogLocation>RISLogLocation</LogLocation>
    <LogText>BaburaoLogText</LogText>
  </LogData>
<LogData>
    <LogID>5678201301161640382919</LogID>
    <LogDateTime>20130116164038</LogDateTime>
    <LogType>Warning</LogType>
    <LogFlag>MACLogFlag</LogFlag>
    <LogApplication>MACLogApplication</LogApplication>
    <LogModule>MACLogModule</LogModule>
    <LogLocation>MACLogLocation</LogLocation>
    <LogText>MACLogText</LogText>
  </LogData>
</AppXmlLogWritter> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:55:39.983

试试这样的功能：

```
 private string XmlNodeListToString(XmlNodeList nodeList)
    {
        String returnStr = "";
        if (nodeList != null)
        {
            foreach (XmlNode node in nodeList)
            {
                returnStr += node.OuterXml;
            }

        }
        /*
        //I think this is not needed from Dataset.ReadXml
        returnStr = returnStr .Replace("&", "&amp;");
        returnStr = returnStr.Replace("<", "&lt;");
        returnStr = returnStr.Replace(">", "&gt;");
        returnStr = returnStr.Replace("'", "&apos;");
        returnStr = returnStr.Replace("\"", "&quot;");
        */

        return "<Root>"+returnStr+"</Root>";
    } 
```

此外，从您的评论看来，您的文件名很长。

尝试`objXmldoc.Load(@txtBrowseFilePath.Text);`

或者如果它不成功尝试其他类似前面的文件路径的东西，`\\?\` 正如我在这个[链接中发现的那样](http://msdn.microsoft.com/en-us/library/aa365247%28v=vs.85%29.aspx#maxpath)

例如，`"\\?\D:\very long path"`。

# javascript - 在 Applet 顶部显示透明 iFrame

> ID：14519133
> 
> 赞同：0
> 
> 时间：2013-01-25T09:45:02.800
> 
> 标签：javascript, html, iframe, applet, transparency

我想在小程序顶部显示一个透明的 iFrame。

但是，当我使用`allowtransparency="true"`and时`background-color:transparent`，它显示了嵌入小程序的 html 的背景。它不显示后台小程序。

有没有一种方法可以在小程序顶部显示透明 IFrame，而 iFrame 的透明区域显示背景小程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:57:32.953

我希望您不要将其用于黑帽目的...

尝试将 iframe 的 z-index 更改为整个页面下方，无论是否透明，它都不会显示...或显示：无 .. 有很多方法可以做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:22:27.640

我真的不知道，但它可能会帮助你......

```
<html>
 <body bgcolor="black" background="http://www.google.com/images/logo.gif">
  <iframe width="300"
          height="300"
          name="Frame1"
          src="insideIframe.html"
          frameborder="0"
          allowtransparency="true"
          style="background-color:transparent; color:red; filter: alpha(opacity=20) border:5 solid #000000;">
  </iframe>
 </body>
</html>

Here is the src for frame.html:

<html>
 <style type="text/css">
   body {
      filter: alpha(opacity=80, style=0);background-color: #FFFFFF; -moz-opacity:0.8;
   }
 </style>
   <body>
      Transparent??? 
   </body>
</html> 
```

# image-processing - OpenCV：立体声整流问题（使用书中的示例代码）

> ID：14519136
> 
> 赞同：4
> 
> 时间：2013-01-25T09:45:11.377
> 
> 标签：image-processing, opencv, stereo-3d

所以我在使用 OpenCV 时遇到了问题。我使用了“Learning OpenCV”一书中的示例代码。我得到了计算两个相机的所有内在函数和外在函数的代码，但是当我去重新映射图像时，我得到的只是一张空白图像。我使用来自两个相机的 6 张图像，以及 9x6 棋盘。输入文件交替显示左右图像（ lr=i%2 让我觉得......）。

下面是我的代码。我只在最后添加了 cvRemap() 函数。

```
#undef _GLIBCXX_DEBUG

#include <opencv\cv.h>
#include <opencv\cxmisc.h>
#include <opencv\highgui.h>
#include <vector>
#include <string>
#include <algorithm>
#include <stdio.h>
#include <ctype.h>
#include <Windows.h>

using namespace std;

//
// Given a list of chessboard images, the number of corners (nx, ny)
// on the chessboards, and a flag: useCalibrated for calibrated (0) or
// uncalibrated (1: use cvStereoCalibrate(), 2: compute fundamental
// matrix separately) stereo. Calibrate the cameras and display the
// rectified results along with the computed disparity images.
//
static void
StereoCalib(const char* imageList, int useUncalibrated)
{
    IplImage* L_img1 = cvLoadImage("bad1.bmp");
    IplImage* R_img1 = cvLoadImage("good1.bmp");
    IplImage* fixed_L = cvCloneImage(L_img1);
    IplImage* fixed_R = cvCloneImage(R_img1);

    CvRect roi1, roi2;
    int nx = 0, ny = 0;
    int displayCorners = 1;
    int showUndistorted = 1;
    bool isVerticalStereo = false; //OpenCV can handle left-right
                                   //or up-down camera arrangements
    const int maxScale = 1;
    const float squareSize = 1.f;  //Set this to your actual square size
    FILE* f = fopen(imageList, "rt");
    int i, j, lr, nframes = 0, n, N = 0;
    vector<string> imageNames[2];
    vector<CvPoint3D32f> objectPoints;
    vector<CvPoint2D32f> points[2];
    vector<CvPoint2D32f> temp_points[2];
    vector<int> npoints;
    //vector<uchar> active[2];
    int is_found[2] = {0, 0};
    vector<CvPoint2D32f> temp;
    CvSize imageSize = {0,0};

    // ARRAY AND VECTOR STORAGE:
    double M1[3][3], M2[3][3], D1[5], D2[5];
    double R[3][3], T[3], E[3][3], F[3][3];
    double Q[4][4];

    CvMat _M1 = cvMat(3, 3, CV_64F, M1 );
    CvMat _M2 = cvMat(3, 3, CV_64F, M2 );
    CvMat _D1 = cvMat(1, 5, CV_64F, D1 );
    CvMat _D2 = cvMat(1, 5, CV_64F, D2 );
    CvMat _R = cvMat(3, 3, CV_64F, R );
    CvMat _T = cvMat(3, 1, CV_64F, T );
    CvMat _E = cvMat(3, 3, CV_64F, E );
    CvMat _F = cvMat(3, 3, CV_64F, F );

    CvMat _Q = cvMat(4, 4, CV_64FC1, Q);

    char buf[1024];

    if( displayCorners )
    cvNamedWindow( "corners", 1 );

    // READ IN THE LIST OF CHESSBOARDS:
    if( !f )
    {
        fprintf(stderr, "can not open file %s\n", imageList );
        Sleep(2000);
        return;
    }

    if( !fgets(buf, sizeof(buf)-3, f) || sscanf(buf, "%d%d", &nx, &ny) != 2 )
    return;
    n = nx*ny;
    temp.resize(n);
    temp_points[0].resize(n);
    temp_points[1].resize(n);

    for(i=0;;i++)
    {
        int count = 0, result=0;
        lr = i % 2;
        vector<CvPoint2D32f>& pts = temp_points[lr];//points[lr];

        if( !fgets( buf, sizeof(buf)-3, f ))
            break;

        size_t len = strlen(buf);
        while( len > 0 && isspace(buf[len-1]))
        buf[--len] = '\0';

        if( buf[0] == '#')
            continue;

        IplImage* img = cvLoadImage( buf, 0 );

        if( !img )
            break;

        imageSize = cvGetSize(img);
        imageNames[lr].push_back(buf);

        //FIND CHESSBOARDS AND CORNERS THEREIN:
        for( int s = 1; s <= maxScale; s++ )
        {
            IplImage* timg = img;

            if( s > 1 )
            {
                timg = cvCreateImage(
                    cvSize(img->width*s,img->height*s),
                    img->depth, img->nChannels
                );
                cvResize( img, timg, CV_INTER_CUBIC );
            }

            result = cvFindChessboardCorners(
                timg, cvSize(nx, ny),
                &temp[0], &count,
                CV_CALIB_CB_ADAPTIVE_THRESH |
                CV_CALIB_CB_NORMALIZE_IMAGE
            );

            if( timg != img )
                cvReleaseImage( &timg );

            if( result || s == maxScale )
                for( j = 0; j < count; j++ )
                {
                    temp[j].x /= s;
                    temp[j].y /= s;
                }

            if( result )
                break;
        }

        if( displayCorners )
        {
            printf("%s\n", buf);

            IplImage* cimg = cvCreateImage( imageSize, 8, 3 );
            cvCvtColor( img, cimg, CV_GRAY2BGR );

            cvDrawChessboardCorners(
                cimg, cvSize(nx, ny), &temp[0],
                count, result
            );

            IplImage* cimg1 = cvCreateImage(cvSize(640, 480), IPL_DEPTH_8U, 3);
            cvResize(cimg, cimg1);
            cvShowImage( "corners", cimg1 );
            cvReleaseImage( &cimg );
            cvReleaseImage( &cimg1 );

            int c = cvWaitKey(1000);
            if( c == 27 || c == 'q' || c == 'Q' ) //Allow ESC to quit
                exit(-1);
        }
        else
            putchar('.');

        //N = pts.size();
        //pts.resize(N + n, cvPoint2D32f(0,0));
        //active[lr].push_back((uchar)result);
        is_found[lr] = result > 0 ? 1 : 0;
        //assert( result != 0 );

        if( result )
        {
            //Calibration will suffer without subpixel interpolation
            cvFindCornerSubPix(
                img, &temp[0], count,
                cvSize(11, 11), cvSize(-1,-1),
                cvTermCriteria(CV_TERMCRIT_ITER+CV_TERMCRIT_EPS, 30, 0.01)
            );

            copy( temp.begin(), temp.end(), pts.begin() );
        }

        cvReleaseImage( &img );

        if(lr)
        {
            if(is_found[0] == 1 && is_found[1] == 1)
            {
                assert(temp_points[0].size() == temp_points[1].size());
                int current_size = points[0].size();

                points[0].resize(current_size + temp_points[0].size(), cvPoint2D32f(0.0, 0.0));
                points[1].resize(current_size + temp_points[1].size(), cvPoint2D32f(0.0, 0.0));

                copy(temp_points[0].begin(), temp_points[0].end(), points[0].begin() + current_size);
                copy(temp_points[1].begin(), temp_points[1].end(), points[1].begin() + current_size);

                nframes++;

                printf("Pair successfully detected...\n");
            }

            is_found[0] = 0;
            is_found[1] = 0;
        }
    }
    fclose(f);
    printf("\n");

    // HARVEST CHESSBOARD 3D OBJECT POINT LIST:
    objectPoints.resize(nframes*n);

    for( i = 0; i < ny; i++ )
        for( j = 0; j < nx; j++ )
            objectPoints[i*nx + j] = cvPoint3D32f(i*squareSize, j*squareSize, 0);

    for( i = 1; i < nframes; i++ )
        copy(
            objectPoints.begin(), objectPoints.begin() + n,
            objectPoints.begin() + i*n
        );

    npoints.resize(nframes,n);
    N = nframes*n;

    CvMat _objectPoints = cvMat(1, N, CV_32FC3, &objectPoints[0] );
    CvMat _imagePoints1 = cvMat(1, N, CV_32FC2, &points[0][0] );
    CvMat _imagePoints2 = cvMat(1, N, CV_32FC2, &points[1][0] );
    CvMat _npoints = cvMat(1, npoints.size(), CV_32S, &npoints[0] );

    cvSetIdentity(&_M1);
    cvSetIdentity(&_M2);

    cvZero(&_D1);
    cvZero(&_D2);

    // CALIBRATE THE STEREO CAMERAS
    printf("Running stereo calibration ...");
    fflush(stdout);
    cvStereoCalibrate(
        &_objectPoints, &_imagePoints1,
        &_imagePoints2, &_npoints,
        &_M1, &_D1, &_M2, &_D2,
        imageSize, &_R, &_T, &_E, &_F,
        cvTermCriteria(CV_TERMCRIT_ITER+CV_TERMCRIT_EPS, 100, 1e-5),
        CV_CALIB_FIX_ASPECT_RATIO +
        CV_CALIB_ZERO_TANGENT_DIST +
        CV_CALIB_SAME_FOCAL_LENGTH +
        CV_CALIB_FIX_K3
    );
    printf(" done\n");

    // CALIBRATION QUALITY CHECK
    // because the output fundamental matrix implicitly
    // includes all the output information,
    // we can check the quality of calibration using the
    // epipolar geometry constraint: m2^t*F*m1=0
    vector<CvPoint3D32f> lines[2];

    points[0].resize(N);
    points[1].resize(N);

    _imagePoints1 = cvMat(1, N, CV_32FC2, &points[0][0] );
    _imagePoints2 = cvMat(1, N, CV_32FC2, &points[1][0] );

    lines[0].resize(N);
    lines[1].resize(N);

    CvMat _L1 = cvMat(1, N, CV_32FC3, &lines[0][0]);
    CvMat _L2 = cvMat(1, N, CV_32FC3, &lines[1][0]);

    //Always work in undistorted space
    cvUndistortPoints(
        &_imagePoints1, &_imagePoints1,
        &_M1, &_D1, 0, &_M1
    );
    cvUndistortPoints(
        &_imagePoints2, &_imagePoints2,
        &_M2, &_D2, 0, &_M2
    );

    cvComputeCorrespondEpilines( &_imagePoints1, 1, &_F, &_L1 );
    cvComputeCorrespondEpilines( &_imagePoints2, 2, &_F, &_L2 );

    double avgErr = 0;
    for( i = 0; i < N; i++ )
    {
        double err =
            fabs(
                points[0][i].x*lines[1][i].x +
                points[0][i].y*lines[1][i].y + lines[1][i].z
            ) +
            fabs(
                points[1][i].x*lines[0][i].x +
                points[1][i].y*lines[0][i].y + lines[0][i].z
            );
        avgErr += err;
    }
    printf( "avg err = %g\n", avgErr/(nframes*n) );

    // save intrinsic parameters
    CvFileStorage* fstorage = cvOpenFileStorage("intrinsics.yml", NULL, CV_STORAGE_WRITE);
    cvWrite(fstorage, "M1", &_M1);
    cvWrite(fstorage, "D1", &_D1);
    cvWrite(fstorage, "M2", &_M2);
    cvWrite(fstorage, "D2", &_D2);
    cvReleaseFileStorage(&fstorage);

    //COMPUTE AND DISPLAY RECTIFICATION
    if( showUndistorted )
    {
        CvMat* mx1 = cvCreateMat( imageSize.height, imageSize.width, CV_32F );
        CvMat* my1 = cvCreateMat( imageSize.height, imageSize.width, CV_32F );
        CvMat* mx2 = cvCreateMat( imageSize.height, imageSize.width, CV_32F );
        CvMat* my2 = cvCreateMat( imageSize.height, imageSize.width, CV_32F );

        CvMat* img1r = cvCreateMat( imageSize.height, imageSize.width, CV_8U );
        CvMat* img2r = cvCreateMat( imageSize.height, imageSize.width, CV_8U );

        CvMat* disp = cvCreateMat( imageSize.height, imageSize.width, CV_16S );

        double R1[3][3], R2[3][3], P1[3][4], P2[3][4];
        CvMat _R1 = cvMat(3, 3, CV_64F, R1);
        CvMat _R2 = cvMat(3, 3, CV_64F, R2);

        // IF BY CALIBRATED (BOUGUET'S METHOD)
        if( useUncalibrated == 0 )
        {
            CvMat _P1 = cvMat(3, 4, CV_64F, P1);
            CvMat _P2 = cvMat(3, 4, CV_64F, P2);

            cvStereoRectify(
                &_M1, &_M2, &_D1, &_D2, imageSize,
                &_R, &_T,
                &_R1, &_R2, &_P1, &_P2, &_Q,
                CV_CALIB_ZERO_DISPARITY,
                1, imageSize, &roi1, &roi2
            );

            CvFileStorage* file = cvOpenFileStorage("extrinsics.yml", NULL, CV_STORAGE_WRITE);
            cvWrite(file, "R", &_R);
            cvWrite(file, "T", &_T);    
            cvWrite(file, "R1", &_R1);
            cvWrite(file, "R2", &_R2);
            cvWrite(file, "P1", &_P1);    
            cvWrite(file, "P2", &_P2);    
            cvWrite(file, "Q", &_Q);
            cvReleaseFileStorage(&file);

            isVerticalStereo = fabs(P2[1][3]) > fabs(P2[0][3]);
            if(!isVerticalStereo)
                roi2.x += imageSize.width;
            else
                roi2.y += imageSize.height;

            //Precompute maps for cvRemap()
            cvNamedWindow( "Original" );
            cvNamedWindow( "Fixed" );

            cvInitUndistortRectifyMap(&_M1,&_D1,&_R1,&_P1,mx1,my1);
            cvInitUndistortRectifyMap(&_M2,&_D2,&_R2,&_P2,mx2,my2);
            cvRemap(R_img1, fixed_R, mx2, my2);
            cvShowImage("Original", R_img1);
            cvShowImage("Fixed", fixed_R);
            while(1){
                int c = cvWaitKey(15);
                if(c == 'p') {
                    c = 0;
                    while(c != 'p' && c != 27) {
                        c = cvWaitKey(250);
                    }
                }
                if(c == 27)
                break;
            }// end while

        }

        //OR ELSE HARTLEY'S METHOD
        else if( useUncalibrated == 1 || useUncalibrated == 2 )
            // use intrinsic parameters of each camera, but
            // compute the rectification transformation directly
            // from the fundamental matrix
        {
            double H1[3][3], H2[3][3], iM[3][3];

            CvMat _H1 = cvMat(3, 3, CV_64F, H1);
            CvMat _H2 = cvMat(3, 3, CV_64F, H2);
            CvMat _iM = cvMat(3, 3, CV_64F, iM);

            //Just to show you could have independently used F
            if( useUncalibrated == 2 )
                cvFindFundamentalMat(&_imagePoints1, &_imagePoints2, &_F);

            cvStereoRectifyUncalibrated(
                &_imagePoints1, &_imagePoints2, &_F,
                imageSize,
                &_H1, &_H2, 3
            );

            cvInvert(&_M1, &_iM);
            cvMatMul(&_H1, &_M1, &_R1);
            cvMatMul(&_iM, &_R1, &_R1);

            cvInvert(&_M2, &_iM);
            cvMatMul(&_H2, &_M2, &_R2);
            cvMatMul(&_iM, &_R2, &_R2);

            //Precompute map for cvRemap()
            cvInitUndistortRectifyMap(&_M1,&_D1,&_R1,&_M1,mx1,my1);
            cvInitUndistortRectifyMap(&_M2,&_D1,&_R2,&_M2,mx2,my2);
        }
        else
            assert(0);

        cvReleaseMat( &mx1 );
        cvReleaseMat( &my1 );
        cvReleaseMat( &mx2 );
        cvReleaseMat( &my2 );
        cvReleaseMat( &img1r );
        cvReleaseMat( &img2r );
        cvReleaseMat( &disp );
    }
}

int main(int argc, char** argv)
{
    StereoCalib(argc > 1 ? argv[1] : "stereo_calib.txt", 0);
    return 0;
} 
```

下面是从程序中得到的外在矩阵。

```
 R: !!opencv-matrix
       rows: 3
       cols: 3
       dt: d
       data: [ 9.9997887582765532e-001, 4.2746998112201760e-003,
   -4.8964109286960510e-003, -4.1317666335754111e-003,
   9.9957553950354616e-001, 2.8838677686057253e-002,
   5.0176092857428471e-003, -2.8817837665560161e-002,
   9.9957208635962669e-001 ]
    T: !!opencv-matrix
       rows: 3
       cols: 1
       dt: d
       data: [ -8.3141294302865210e-001, -3.2181226087457654e-001,
   -4.5924165239318537e-001 ]
    R1: !!opencv-matrix
       rows: 3
       cols: 3
       dt: d
       data: [ 8.3000228682826938e-001, 3.1110786082949388e-001,
   4.6293423160308594e-001, -3.1818678207964091e-001,
   9.4578880995670123e-001, -6.5120647036789381e-002,
   -4.5809756119155060e-001, -9.3249267508025396e-002,
   8.8399728423766677e-001 ]
    R2: !!opencv-matrix
       rows: 3
       cols: 3
       dt: d
       data: [ 8.2904793019998391e-001, 3.2089684317297251e-001,
   4.5793530708249980e-001, -3.1381823995200708e-001,
   9.4482404014772625e-001, -9.3944906367255512e-002,
   -4.6281491084940990e-001, -6.5823621903907531e-002,
   8.8400769741835628e-001 ]
    P1: !!opencv-matrix
       rows: 3
       cols: 4
       dt: d
       data: [ -4.4953673002726404e+001, 0., -1.3375267505645752e+001, 0.,
   0., -4.4953673002726404e+001, 2.4430860614776611e+002, 0., 0., 0.,
   1., 0\. ]
    P2: !!opencv-matrix
       rows: 3
       cols: 4
       dt: d
       data: [ -4.4953673002726404e+001, 0., -1.3375267505645752e+001,
   4.5081911684079330e+001, 0., -4.4953673002726404e+001,
   2.4430860614776611e+002, 0., 0., 0., 1., 0\. ] 
```

并且找到的内在参数如下。

```
 M1: !!opencv-matrix
       rows: 3
       cols: 3
       dt: d
       data: [ 4.3107336978610317e+002, 0., 3.4686501809547735e+002, 0.,
   4.3107336978610317e+002, 1.9221944996848421e+002, 0., 0., 1\. ]
    D1: !!opencv-matrix
       rows: 1
       cols: 5
       dt: d
       data: [ -1.6825480517169825e-001, 1.0756945282000266e-001, 0., 0., 0\. ]
    M2: !!opencv-matrix
       rows: 3
       cols: 3
       dt: d
       data: [ 4.3107336978610317e+002, 0., 3.5310162800332756e+002, 0.,
           4.3107336978610317e+002, 1.8963116073129768e+002, 0., 0., 1\. ]
    D2: !!opencv-matrix
       rows: 1
       cols: 5
       dt: d
       data: [ -1.9546177300030809e-001, 1.7624631189915094e-001, 0., 0., 0\. ] 
```

任何帮助将非常感激。我对 OpenCV 不是很有经验，而且我很难理解大多数功能正在做什么。所以我可以

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T06:15:44.490

我想我找到了答案。经过多次试验，似乎 cvStereoCalibrate 的标志 CV_CALIB_SAME_FOCAL_LENGTH 导致我的输出图像出现扭曲和/或无法正常工作。另外，我用更大的棋盘拍了更多的棋盘照片，这似乎对我的结果有很大帮助。

希望这对将来的任何人都有帮助。

# javascript - 使用评估的变量值而不是实际类型

> ID：14519139
> 
> 赞同：0
> 
> 时间：2013-01-25T09:45:31.493
> 
> 标签：javascript

```
var foo;

console.log(typeof foo); //"undefined"

if(typeof foo === 'undefined')
    console.log(1);

if(!foo)
    console.log(2); 
```

在我上面的示例中，控制台将同时记录“1”和“2”，因为`undefined`评估为`false`. `null`, `NaN`, `""`(空字符串) 等也会发生同样的事情。

`typeof`使用运算符并比较字符串值而不是使用评估的布尔值是否更常见？除了可读性有什么不同吗？有什么优点和缺点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T09:47:26.873

没有灵丹妙药，这完全取决于您的目标。

如果您需要知道该变量是“假的” `if (!var)`-`null`您`0`使用`if (var === null)`

# mongodb - 获取数据库名称：

> ID：14519142
> 
> 赞同：1
> 
> 时间：2013-01-25T09:45:46.697
> 
> 标签：mongodb, mongodb-.net-driver

检索现有数据库的名称时遇到问题：

```
<code>
        var connectionString = "mongodb://user:pw@localhost/admin";
        var client = new MongoClient(connectionString);
        var server = client.GetServer();
        var lst = server.GetDatabaseNames();
        lst.Dump(); -- this is in Linqpad
</code> 
```

Linqpad 报告：

```
<code>
  Command 'listDatabases' failed: need to login (response: { "errmsg" : "need to      login", "ok" : 0.0 }) 
```

在连接字符串中省略数据库名称时会发生同样的错误。在我的 c# 应用程序中使用时会发生同样的错误。

您能解释一下如何获得该列表吗？

好吧，与此同时，我查看了文档（我之前应该这样做，抱歉），发现我必须使用这个函数和一个提供管理员凭据的参数。

好的。但是错误消息令人困惑，应该是这样的：您必须提供管理员凭据............

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T07:36:03.063

你可以试试，

```
 const string legalConnectionString = "mongodb://localhost/?safe=true";
 var productionMongoDatabase = MongoServer.Create(legalConnectionString ).GetDatabase(productionDb, new MongoCredentials("admin", "1111111", true)); 
```

# ios - iOS chrome中白页的FB重定向问题

> ID：14519144
> 
> 赞同：8
> 
> 时间：2013-01-25T09:45:59.473
> 
> 标签：ios, facebook, google-chrome

当我按下登录按钮时，我得到了 facebook 页面，我必须在其中授予使用我的 facebook 帐户的权限。

在我给予许可后，它会重定向到[https://www.facebook.com/dialog/permissions.request](https://www.facebook.com/dialog/permissions.request)并显示一个空白页面。在 Android 上调用“window.FB.login”回调（参见下面的代码），我可以在其中获取信息并重定向用户，但在 Windows Phone 上它只显示该空白页面。当我转到我的 Facebook 页面时，我的网站已在应用列表中注册。所以注册确实工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T05:24:13.467

此错误是由于 facebook js 文件的不安全加载引起的。

要将 Facebook 应用程序集成到您的应用程序中，您必须按照 Facebook 应用程序文档中指示的步骤进行操作。

```
 var fbApi = {
      init: function () {
      $.getScript(document.location.protocol + '//connect.facebook.net/en_US/all.js', function () {
        if (window.FB) {
            window.FB.init({
                appId: MY_APP_ID,
                status: true,
                cookie: true,
                xfbml: false,
                oauth: true,
                channelUrl: 'http://www.yourdomain.com/channel.html'
            });

        }
    });
    },
    login: function () {
    /// <summary>
    /// Login facebook button clicked
    /// </summary>
    log("login facebook button clicked");

    if (window.FB) {

        //Windows phone does not enter this method, Android and Iphone do
        window.FB.login(function (response) {

            if (response.status) {
                log('it means the user has allowed to communicate with facebook');

                fbAccessToken = response.authResponse.accessToken;
                window.FB.api('/me', function (response) {
                    //get information of the facebook user.
                    loginService.subscribeSocialUser(response.id, response.first_name, response.last_name, fbAccessToken, "", "FaceBook", fbSucces, fbFail);

                });
            } else {
                log('User cancelled login or did not fully authorize.');

            }
        },
        { scope: 'email'
        });
    }

}
}; 
```

添加频道 URL 以解决任何跨浏览器问题。它应该指向一个引用js的html文件，如下所示：

```
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

如果在初始化 Facebook.js 时遇到错误，您将无法成功登录。

您可以同步或异步加载 java 脚本。

```
(function(d, debug){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
     ref.parentNode.insertBefore(js, ref);
   }(document, /*debug*/ false)); 
```

# maven - 如何使用 maven 解压缩文件？

> ID：14519146
> 
> 赞同：3
> 
> 时间：2013-01-25T09:46:08.553
> 
> 标签：maven, tar, gzip

使用 maven，我下载了一些 Chef 食谱。

收到的文件是`.tgz`格式的，我想解压它们。我怎样才能做到这一点 ？有什么好用的插件吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T11:15:40.203

[据我](http://www.ehow.com/how_5021436_unzip-tgz-files.html)所知， .tgz可以通过两个命令解包：

```
 gzip -d file.tgz
   tar xvf file.tar 
```

所以你可以使用[maven-antrun-plugin](http://maven.apache.org/plugins/maven-antrun-plugin/usage.html)来执行这两个任务：

```
 <gunzip src="tools.tgz"/>
   <untar src="tools.tar" dest="${tools.home}"/> 
```

Ant 任务参考：[gunzip](http://ant.apache.org/manual/Tasks/gunzip.html)和[untar](http://ant.apache.org/manual/Tasks/untar.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T16:14:34.093

我建议使用[truezip-maven-plugin](http://www.mojohaus.org/truezip/truezip-maven-plugin/)来处理此类档案。

# asp.net - 如何以编程方式向组/用户授予共享点中特定列表的“读取”权限

> ID：14519148
> 
> 赞同：1
> 
> 时间：2013-01-25T09:46:17.703
> 
> 标签：asp.net, sharepoint, permissions

**如何以编程方式向组/用户授予特定列表的“读取”权限？**.

我在**Share Point 中手动**创建了一个组。也创建了一个列表。

现在我想为特定组/用户的特定列表添加“**读取”权限。**

webpart 工作正常。

但不更新权限。请帮忙。

我正在粘贴下面的代码...

```
 protected void Button1_Click(object sender, EventArgs e)
        {
            if (string.IsNullOrEmpty(TextBox1.Text) || string.IsNullOrEmpty(TextBox2.Text))
            {
                Label4.Text = "Please Enter Some Values";
                //Label4.ForeColor = System.Drawing.Color.Red;
            }
            else
            {

                SPWeb web = SPContext.Current.Web;
                SPGroup group = web.SiteGroups[TextBox2.Text];
                SPWebApplication webApp = web.Site.WebApplication;
                webApp.FormDigestSettings.Enabled = false;
                web.AllowUnsafeUpdates = true;
                SPRoleDefinition rDefination = web.RoleDefinitions.GetByType(SPRoleType.Reader);
                 SPRoleAssignment rAssignment = new SPRoleAssignment(group);

                rAssignment.RoleDefinitionBindings.Add(rDefination);
                SPList list = web.Lists[TextBox1.Text];
                list.BreakRoleInheritance(true);
                //SPItem item = list.
                //item.RoleAssignments.Add(rAssignment);
                list.Update();
                Label4.Text = "Permission is successfully on item";
                //Label4.ForeColor = System.Drawing.Color.Green;
                TextBox1.Text = string.Empty;
                TextBox2.Text = string.Empty;
                web.RoleAssignments.Add(rAssignment);
                web.Update();
                web.AllowUnsafeUpdates = false;
                webApp.FormDigestSettings.Enabled = true;

            }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T17:42:29.670

尝试使用下面的代码。runwithelevatedprivileges 将允许简单用户更新列表。

```
SPSecurity.RunWithElevatedPrivileges(delegate()
{
    if (string.IsNullOrEmpty(TextBox1.Text) || string.IsNullOrEmpty(TextBox2.Text))
            {
                Label4.Text = "Please Enter Some Values";
                //Label4.ForeColor = System.Drawing.Color.Red;
            }
            else
            {

                SPWeb web = SPContext.Current.Web;
                SPGroup group = web.SiteGroups[TextBox2.Text];
                SPWebApplication webApp = web.Site.WebApplication;
                webApp.FormDigestSettings.Enabled = false;
                web.AllowUnsafeUpdates = true;
                SPRoleDefinition rDefination = web.RoleDefinitions.GetByType(SPRoleType.Reader);
                 SPRoleAssignment rAssignment = new SPRoleAssignment(group);

                rAssignment.RoleDefinitionBindings.Add(rDefination);
                SPList list = web.Lists[TextBox1.Text];
                list.BreakRoleInheritance(true);
                //SPItem item = list.
                //item.RoleAssignments.Add(rAssignment);
                list.Update();
                Label4.Text = "Permission is successfully on item";
                //Label4.ForeColor = System.Drawing.Color.Green;
                TextBox1.Text = string.Empty;
                TextBox2.Text = string.Empty;
                web.RoleAssignments.Add(rAssignment);
                web.Update();
                web.AllowUnsafeUpdates = false;
                webApp.FormDigestSettings.Enabled = true;

            }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T10:11:13.843

```
SPListItem listitem = listPositional.Items.Add();
                           listitem["Title"] = "data1";
                           //listitem["Enc"] = "Encrypted data";
                           listitem.Update();
                           listitem.BreakRoleInheritance(false);

                           SPGroup group = myWeb.SiteGroups["Restricted Readers"];

                                                         GrantPermission(listitem, myWeb, SPRoleType.Reader, group);

private static void GrantPermission(SPListItem CurrentListItem, SPWeb oSPWeb, SPRoleType SPRoleType, SPPrincipal SPPrincipal)
    {

        try
        {

            //Create one Role Definition i.e Full Controls, Contribute rights or Read rights etc.
            SPRoleDefinition oSPRoleDefinition = oSPWeb.RoleDefinitions.GetByType(SPRoleType);
            //Create one Role Assignment for the specified SP user or group.
            SPRoleAssignment oSPRoleAssignment = new SPRoleAssignment(SPPrincipal);
            //Bind the role definition to the role assignment object created for the user or group.
            oSPRoleAssignment.RoleDefinitionBindings.Add(oSPRoleDefinition);
            //Add it to the specified list item.
            CurrentListItem.RoleAssignments.Add(oSPRoleAssignment);
            //update the list item so that specified user assignment will have the access.
            CurrentListItem.Update();

        }
        catch (Exception ex)
        {

            throw ex;

        }
        } 
```

# mongodb - 复杂的 URL 处理概念

> ID：14519149
> 
> 赞同：0
> 
> 时间：2013-01-25T09:46:17.577
> 
> 标签：mongodb, url, alias, fuzzy, bigdata

我目前正在努力解决一个复杂的 URL 处理概念问题。该应用程序有一个**产品属性数据库表/集合**，其中包含所有不同的产品类型（即**类别、颜色、制造商、材料等**）。

```
{_id:1,alias:"mercedes-benz",type:"brand"},
{_id:2,alias:"suv-cars",type:"category"},
{_id:3,alias:"cars",type:"category"},
{_‌​id:4,alias:"toyota",type:"manufacturer"},
{_id:5,alias:"red",type:"color"},
{_id:6,alias:"yellow",type:"color"},
{_id:7,alias:"bmw",type:"manufacturer"},
{_id:8,alias:"leather",type:"material"}
... 
```

现在的任务是按照每个（！）可能的顺序处理以下样式的 URL 请求，以检索包含的产品属性。唯一允许的字符是破折号（已解决的 SEO 要求，某些属性也可以包括它们自己的破折号 -*我认为这也是一个重要的点*- 即类别“suv-cars”或制造商“mercedes-benz”）：

```
http:\\www.example.com\{category}-{color}-{manufacturer}-{material}
http:\\www.example.com\{color}-{manufacturer}
http:\\www.example.com\{color}-{category}-{material}-{manufacturer}
http:\\www.example.com\{category}-{color}-nonexistingproperty-{manufacturer}
http:\\www.example.com\{color}-{category}-{manufacturer}
http:\\www.example.com\{manufacturer}
http:\\www.example.com\{manufacturer}-{category}-{color}-{material}
http:\\www.example.com\{category}
http:\\www.example.com\{manufacturer}-nonexistingproperty-{category}-{color}-{material}
http:\\www.example.com\{color}-crap-{manufacturer}
... 
```

...所以：**应该允许**每个属性的**顺序**！结果必须是有关每个 URL 请求所用属性的信息（顺便说一句，是的，重复的内容将通过重定向和预定义的模式来修复）。“不存在的属性”/“废话”是可能的，应该被忽略。

 ***更新：*

**想法1：**我正在考虑这个问题的一种方法是用破折号分割查询字符串并按值分析它们，问题：在某些属性的两个或三个或更多单词组合中，有太多不同的组合和变体所以我认为大量的查询扼杀了这个想法。

**想法 2：**另一种方法是使用所有不同的组合构建一个（在我看来）太大的 Alias/URL-Table，但我认为这只是一个丑陋的解决方法。大约有 15.000 个不同的属性，因此不同排序顺序中的别名计数正在扼杀这个想法。

**想法3：**轮到你了！感谢您的思想和时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:27:43.697

如果您将所有属性值限制为唯一，则唯一可行的方法是。因此，您制作了一组类别+颜色+制造商等。所有值都必须是唯一的。这将允许您找到该值所属的属性。其数据结构应该相当简单：

```
{_id:ValueOfTheProperty, Property:TypeOfProperty} 
```

以下是一些可能的示例：

```
{ _id: Red, Property: Color }
{ _id: Green, Property: Color }
{ _id: Boots, Property: Category }
{ _id: Shoes, Property: Category }
... 
```

这样，顺序无关紧要，您可以一次将它们转换为地图：

```
{ Color: Red, Category: Boots } 
```

不过，我预测这里有一些模棱两可的名字的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:19:48.360

虽然您的问题有点宽泛，但以下是一些想法。除非您找到一个完全按照您想要的方式工作的免费或商业引擎，否则没有一个很棒的答案。

我考虑您的问题的方式是将 URL 视为关键字列表。

*   使用 Lucene 作为关键字/标签系统。它[擅长](https://stackoverflow.com/questions/2438000/how-do-i-implement-tag-searching-with-lucene)于您建议的搜索类型，包括短语、词干等。
*   在选择的数据库中存储和索引数据，但将关键字拉入内存并建立所有关键字与项目的位索引。遍历关键字表产生加权结果。如果关键字的顺序很重要，您还需要通过结果集来根据词序进行权重。这些类型的搜索总是需要快速限制其结果集，以便快速返回结果。
*   从工作匹配中疯狂缓存结果，并优先考虑用户似乎在给定 URL 上点击最多的结果。
*   [使用 MongoDB 中的标签](http://docs.mongodb.org/manual/tutorial/model-data-for-keyword-search/)索引攻击数据库。您仍然需要合并和加权结果。非常密集，不太可能很好地利用数据库资源。
*   阅读一些关于关键词搜索的学术论文。这是一个**热门**话题。
*   建立一个包含破折号的单词表，并在运行查询之前对其进行规范化/转换
*   始终首先检查完全完全匹配**

# eclipse - 升级到 Eclipse Juno 是否安全。

> ID：14519152
> 
> 赞同：1
> 
> 时间：2013-01-25T09:46:36.707
> 
> 标签：eclipse, eclipse-juno

上次我尝试时，它充满了性能问题。有人知道升级是否安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T18:10:43.807

您可以简单地升级到 3.8 而不是 4.2。JDT、PDE 和相关工具的所有改进都是相同的，但您没有获得新的 CSS 样式、建模工作台，它主要负责性能问题。

有关更详细的说明，请参阅此答案：[https ://stackoverflow.com/a/12381204/44089](https://stackoverflow.com/a/12381204/44089)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:01:17.417

Eclipse Juno (4.2) 确实存在很多性能问题。

我不知道您遇到的性能问题是否会得到解决，但您可以等待计划于 2 月 22 日发布的 Juno SR2。

对于下一个主要版本（计划在 6 月发布的 Eclipse 4.3）的性能问题，似乎已经做了很多工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T15:47:41.520

性能似乎更好，但 Juno SR2 已经[推迟了一周](http://dev.eclipse.org/mhonarc/lists/cross-project-issues-dev/msg08715.html)。

> 在与规划委员会成员进行了一番痛苦的交谈后，得出的结论是推迟发布 1 周，但不进行全面的重新调整，只恢复 EGit 的贡献。
> 
> 计划是重做公共存储库和 EPP 包，将 EGit 贡献恢复到 SR1 中的状态，我认为这与 RC3 中的相同。
> 我可以尝试一些“技术技巧”来实现这一点，因此所有其他项目都不必进行任何返工......只需等到 3 月 1 日星期五，然后再让您的版本“可见”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T12:09:39.077

如果你现在想升级，你应该考虑指定的性能补丁：[Eclipse Juno slow to switch tabs in editor](https://stackoverflow.com/questions/13805109/eclipse-juno-slow-to-switch-tabs-in-editor/14029933#14029933)

# c# - 使用 EF 对每个测试使用单独的数据库进行单元测试

> ID：14519153
> 
> 赞同：1
> 
> 时间：2013-01-25T09:46:40.613
> 
> 标签：c#, entity-framework, ef-code-first, sql-server-ce, multiple-databases

当使用 Fluent NHibernate 进行单元测试时，我为每个测试创建一个新会话，并且该会话有自己的工厂，该工厂创建一个 sqlite 数据库，其中文件名等于完全限定的测试名（来自 TestContext）。这总是给我一个干净的数据库，并且并行运行的单元测试没有冲突。我将这些数据库存储在 ramdrive 上，因此我的速度与内存数据库相同，但之后也能够查看结果数据。

是否可以先使用 EF Code 和 SQL Ce 来实现这一点？我希望这个问题的解决方案也能让我将 EF 与两个数据库一起使用，一个基于文件的本地数据库用于离线访问，它同步到基于云的数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T18:12:29.340

我想出了一种方法来实现这一点：

```
public class Db : DbContext {
    private static SqlCeConnectionFactory factory = 
               new SqlCeConnectionFactory("System.Data.SqlServerCe.4.0");

    public static Db Create(string filename) {
        return new Db(factory.CreateConnection(@"Data Source=" + filename));
    }

    public Db(DbConnection conn)
        : base(conn, true) {
    }

    public DbSet<object> TableName {get; set;}
} 
```

在 unittest 代码中，我可以使用：

```
private Db CreateDb() {
    return Db.Create("R:\\"+TestContext.FullyQualifiedTestClassName + 
                     TestContext.TestName + ".sdf");
}

[TestMethod]
public void StoreAndRetrieve() {
    using (var db = CreateDb()) {
        ...
    }
} 
```

# bluetooth - 如何从条码扫描仪 MT2070 发送数据

> ID：14519155
> 
> 赞同：1
> 
> 时间：2013-01-25T09:46:44.567
> 
> 标签：bluetooth, barcode-scanner, motorola-emdk

我在使用摩托罗拉的条码扫描仪 MT2070 时遇到问题。我使用 EMDK 2.6 for .NET（更新 2）从扫描的条形码创建字符串，然后将它们传输到主机 pc。但是传送失败了。

MT2070 运行 Windows CE5.0 并通过蓝牙连接到底座 STB2078。但是每次我得到“发送失败”并且结果代码是“E_INCORRECT_MODE”。

问题是不明白它们对“INCORRECT_MODE”的含义我将它设置为 DECODE 和 RawData 是什么意思与源？

```
 ScannerServicesClient scannerServices;
        scannerServices = new ScannerServicesClient();
        SCANNERSVC_MODE mode;

        if(scannerServices.Connect(true))
        {
            Logger("start service with decode rights"); // primitiv method to see what happen

            scannerServices.GetMode(out mode);

            if (mode != SCANNERSVC_MODE.SVC_MODE_DECODE)
            {
                mode = SCANNERSVC_MODE.SVC_MODE_DECODE;
                if (scannerServices.SetMode(mode) != RESULTCODE.E_OK)
                {
                    Logger("cant set mode: " + mode.ToString());
                }
            }

            // wanna know which connection is use
            string connection = "";

            switch (scannerServices.HostParameters.CurrentConnection)
            {
                case SCANNERSVC_DATA_CONNECTION.NO_CONNECTION:
                    connection = "Not connected";
                    break;
                case SCANNERSVC_DATA_CONNECTION.BLUETOOTH:
                    connection = scannerServices.HostParameters.BluetoothConnection.ToString();
                    break;
                case SCANNERSVC_DATA_CONNECTION.RS232:
                    connection = scannerServices.HostParameters.RS232Connection.ToString();
                    break;
                case SCANNERSVC_DATA_CONNECTION.USB_CABLE:
                    connection = scannerServices.HostParameters.USBConnection.ToString();
                    break;
            }
            Logger(connection);

            ScannerHostParameters scnHost = new ScannerHostParameters(scannerServices);

            //example hello
            string input = "hello";                     //what should send
            byte[] output = new byte[input.Length];     //field with converted data
            byte source = 0;    //<-- what mean source? i sum all byte-value but this cant be correct

            for (int i = 0; i < input.Length; ++i)
            {
                output[i] = Convert.ToByte(input[i]);
                source += output[i];
            }

            RawData rawData = new RawData(output, input.Length, source);
            //RawParameters rawParam = new RawParameters();

            //rawParam.BaudRate = RawParameters.RawBaudRates.RAWSERIAL_9600;
            //rawParam.Type = RawParameters.RawHostType.Auto;

            RESULTCODE result = scannerServices.SendRawData(rawData, 2000);

            if(result == RESULTCODE.E_OK)
            {
                Logger("successful send");
            }
            else
            {
                Logger("Send failed: " + result.ToString());
            }
            Logger("ScannerService kill");
            scannerServices.Disconnect();
        }
        Logger("\n");
        scannerServices.Dispose();

        scannerServices = null; 
```

谢谢你的帮助！（对不起我的英语）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:20:15.170

在某些时候（您正在设置模式的某个地方 - 我在设置模式后立即执行此操作）您会想要这样做：

```
//set raw mode
if (RESULTCODE.E_OK != scannerServices.SetAttributeByte((ushort)ATTRIBUTE_NUMBER.ATT_MIA_HOSTNUM, (byte)ENUM_HOSTS.HOST_RAW))
{
    throw new Exception("Can't set RAW mode");
    scannerServices.Disconnect();
    scannerServices.Dispose();
    return;
} 
```

你在哪里：

```
RawData rawData = new RawData(output, input.Length, source); 
```

您可以将源保留为 0：

```
RawData rawData = new RawData(output, input.Length, 0); 
```

不幸的是，我在编程方面并不是最棒的，所以我只是勉强让我的扫描仪工作。文档不是很好，事实上我发现它严重缺乏。甚至摩托罗拉的人似乎也不太了解它或如何对其进行编程。他们至少在某一点上给了我错误的信息。

我对扫描仪使用 CDC COM 端口仿真模式，以便它显示在设备管理器的端口下（我需要扫描仪与我们拥有的使用 COM 端口的旧程序一起工作）。为此还需要一个驱动程序。

根据您使用扫描仪的方式，上述方法可能有效，也可能无效。

# linux - 铿锵在Linux上工作

> ID：14519158
> 
> 赞同：-2
> 
> 时间：2013-01-25T09:46:54.790
> 
> 标签：linux, clang

我知道clang还没有完全在windows上工作，但我只是想知道linux平台的情况是否不同。有人可以对这个话题有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:00:56.410

是的，Clang 在 Linux 上工作。如果您使用的是 Debian 或 Ubuntu 系统，请尝试以下操作：

```
sudo apt get install clang 
```

以上将为您的系统安装可用的 Clang。如果您喜欢冒险并且想在您的 Linux 上安装最新的 Clang 和 libc++，您可以从源代码构建它。这是一个很好的分步教程：

[http://solarianprogrammer.com/2013/01/17/building-clang-libcpp-ubuntu-linux/](http://solarianprogrammer.com/2013/01/17/building-clang-libcpp-ubuntu-linux/)

# g++ - 如何在 g++ 的 -std=c++0x 模式下使用 strlcpy？

> ID：14519161
> 
> 赞同：0
> 
> 时间：2013-01-25T09:47:08.990
> 
> 标签：g++, cygwin, string.h

当我使用 g++ 的参数时，我想使用`strlcpy`（调用外部 api），这是缺少的。`string.h``-std=c++0x`

```
% g++ -std=c++0x foo.cpp
foo.cpp: In function 'int main(int, char**)':
foo.cpp:5:11: error: 'strlcpy' was not declared in this scope
% g++ foo.cpp
% cat foo.cpp
#include <string.h>

int main(int argc, char* argv[])
{
  const char src[] = "foo";
  char dest[1024] = { 0 };
  strlcpy(dest, src, sizeof(dest));
  return 0;
} 
```

是否可以使用`strlcpy`和`std=c++0x`标志，还是我必须放弃后者？

`strlcpy`此外，即使它们似乎具有该功能，我也无法在 cygwin 中找到手册页。任何指针？

我在 cygwin 上使用 gcc 4.7.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:55:04.727

引用维基百科：[对 strlcpy 的批评](http://en.wikipedia.org/wiki/C_string_handling#Criticism)

> 更流行的 strlcat 和 strlcpy 受到批评，因为它们鼓励使用 C 字符串，因此产生的问题多于它们解决的问题。因此，尽管它们在 OpenBSD、FreeBSD、NetBSD、Solaris、Mac OS X、QNX 甚至在 Linux 内核内部实现，但它们并未包含在 GNU C 库（由 Linux 上的软件使用）中。

# mysql - Mysql减少打开的文件

> ID：14519166
> 
> 赞同：1
> 
> 时间：2013-01-25T09:47:19.017
> 
> 标签：mysql, file, myisam

我想知道是否有办法减少mysql中打开的文件。

细节 ：

*   mysql 5.0.92

*   使用的引擎：MyISAM

*   SHOW GLOBAL STATUS LIKE 'Opened_tables' : 150K

*   显示变量，如 '%open%' ：

    ```
     open_files_limit    200000
        table_open_cache    40000 
    ```

尝试的解决方案：

*   重新启动服务器：打开的表计数器为 0，但这不是我的 pov 的一个好的解决方案，因为您需要每周重新启动，因为计数器会快速增加

*   FLUSH TABLES ：就像 mysql 文档所说的那样，它应该强制所有正在使用的表关闭，但这不会发生

那么对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T10:01:14.227

通常，许多打开的表都无需担心。如果您接近操作系统限制，您可以在内核设置中增加此限制：

[如何更改 Linux 中打开文件的数量限制？](https://stackoverflow.com/questions/34588/how-do-i-change-the-number-of-open-files-limit-in-linux)

MySQL 为每个 session 独立打开表以获得更好的并发性。

> table_open_cache和**max_connections系统变量影响服务器保持打开的最大文件****数**。如果您增加这些值中的一个或两个，您可能会遇到操作系统对每个进程打开文件描述符的数量施加的限制。许多操作系统允许您增加打开文件的限制，尽管方法因系统而异。

 **详细的，这里解释一下

[http://dev.mysql.com/doc/refman/5.5/en/table-cache.html](http://dev.mysql.com/doc/refman/5.5/en/table-cache.html)

**编辑**

为了验证您的假设，您可以`max_connections`暂时`table_open_cache`减少`SET GLOBAL table_open_cache := newValue`.

该值可以在不重新启动服务器的情况下动态调整。

在 MySQL 5.1 之前，这个变量被称为[table_cache](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_table_cache)

我想说的是，降低这个值甚至可能会对性能产生负面影响，因为可能的并发读取更少（队列获取时间更长），相反你应该尝试增加操作系统限制并增加`max_open_files`，但也许我只是看不到这里的重点**

# windows - WordPress仪表板无法正常工作

> ID：14519167
> 
> 赞同：0
> 
> 时间：2013-01-25T09:47:21.293
> 
> 标签：windows, wordpress, sql-server-2008

我最近在我的 Windows 7 机器上安装了 wordpress，用于 IIS7.5 和 SQL Server 2008。安装没有问题，一切正常，但我遇到了一些真正的重大问题。

1.) 在我的仪表板中点击帖子>所有帖子时，我的帖子列表是空的，但顶部的链接（全部、已发布、草稿）都显示为对它们不利。我可以通过直接在浏览器中输入 URL 来浏览这些帖子，但无法通过仪表板看到它们。这些帖子也不会通过搜索显示。这也是媒体库的相同行为。它说文件在那里，但可以在列表中看到。

2.) 尝试上传图片时，我遇到了两个问题。首先是当我尝试从安装中上传具有默认设置的图像时，我收到一条消息，例如“缺少临时文件夹”。我知道有很多关于此的帖子，但没有一个修复有效。我使用 PHP Info 文件来获取默认目录，即“C:\windows\temp”。所以我尝试使用**upload_tmp_dir**目录在PHPconfig中覆盖它，但它没有改变。因此，我更改了文件夹的权限以允许“IUSR”和 IIS 用户读取和写入访问权限，但现在我收到消息“上传时发生错误”。奇怪的是，当我查看 wp-content/uploads 文件夹时，我的一些图像在那里，但无法通过仪表板看到。

任何人都可以帮忙。我已经搜索了几个小时试图找到解决方案，但没有任何效果。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T12:42:32.390

我已经解决了上述两个问题。我不能在这里写下这些决议，因为它们很冗长，但是对于遇到相同问题的任何人，请在此处查看我的博客文章：http: [//blog.building-blocks.com/installing-wordpress-on-windows-using- sql-server-2008-r2-part-1](http://blog.building-blocks.com/installing-wordpress-on-windows-using-sql-server-2008-r2-part-1)

问候

# iphone - 使用 UICollectionView 和 NSFetchedResultsController 不保存

> ID：14519172
> 
> 赞同：1
> 
> 时间：2013-01-25T09:47:33.120
> 
> 标签：iphone, ios, core-data, nsfetchedresultscontroller, uicollectionview

我正在使用 github 上的一个项目，它可以让我使用`NSFetchedResultsController`and `UICollectionView`，该项目就是[这个](https://github.com/AshFurrow/UICollectionView-NSFetchedResultsController)

在我的项目中，我有一个带有两个实体的核心数据，`Element`并且`Document`，和之间存在一对多的关系`Element`，`Document`所以一个`Element`可以有更多`Document`，但一个`Document`只能有一个`Element`，然后我在下面这样做`AppDelegate`：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.

ElementViewController *elementView = [[ElementViewController alloc] initWithNibName:@"ElementViewController" bundle:nil];
elementView.managedObjectContext = self.managedObjectContext;

DocumentViewController *documentView = [[DocumentViewController alloc] initWithNibName:@"DocumentViewController" bundle:nil];
documentView.managedObjectContext = self.managedObjectContext;

elementView.documentView = documentView;

UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:elementView];

self.window.rootViewController = navController;
[self.window makeKeyAndVisible];
return YES;
 } 
```

这是应用程序委托，然后`ElementViewController`我有一个`UICollectionView`with `NSFetchedResultsController`，一切正常，当我选择 a 时，`UICollectionViewCell`我打开`DocumentViewController`：

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{

self.documentView.element = [self.fetchedResultsController objectAtIndexPath:indexPath];
[self.navigationController pushViewController:self.documentView animated:YES];

} 
```

那么这是我的`DocumentViewController.h`：

```
#import <UIKit/UIKit.h>
#import "Element.h"

@interface DocumentViewController : UIViewController <NSFetchedResultsControllerDelegate>

@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (weak, nonatomic) IBOutlet UICollectionView *collectionView;
@property (strong, nonatomic) NSFetchedResultsController *fetchedResultsController;

@property (strong, nonatomic) Element *element;

@end 
```

而且在这里我还有标题`NSFetchedResultsController`谓词中的过滤器：`Element`

```
- (NSFetchedResultsController *)fetchedResultsController
{
if (_fetchedResultsController != nil) {
    return _fetchedResultsController;
}

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
// Edit the entity name as appropriate.
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Document" inManagedObjectContext:self.managedObjectContext];
[fetchRequest setEntity:entity];

// Set the batch size to a suitable number.
[fetchRequest setFetchBatchSize:20];

// Edit the sort key as appropriate.
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"docDate" ascending:NO];
NSArray *sortDescriptors = @[sortDescriptor];

[fetchRequest setSortDescriptors:sortDescriptors];

[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"SUBQUERY(element, $b, $b.name == %@).@count > 0", self.element.name]];

// Edit the section name key path and cache name if appropriate.
// nil for section name key path means "no sections".
NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:nil];
aFetchedResultsController.delegate = self;
self.fetchedResultsController = aFetchedResultsController;

NSError *error = nil;
if (![self.fetchedResultsController performFetch:&error]) {
    // Replace this implementation with code to handle the error appropriately.
    // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}

return _fetchedResultsController;
} 
```

然后我还添加了这个：

```
- (void)viewWillAppear:(BOOL)animated
{
[super viewWillAppear:animated];

[self reloadCollectionView];

[self addDocument];
}

- (void)reloadTableView
{
self.fetchedResultsController = nil; //Because not search every time for different Element
NSError *error;
if (![[self fetchedResultsController] performFetch:&error]) {
    NSLog(@"Error in search %@, %@", error, [error userInfo]);
} else {
    [self.collectionView reloadData];
}
} 
```

然后在 viewWillAppear 中有`addDocument`方法：

```
- (void)addDocument
{
Document *document = (Document *)[NSEntityDescription
                                          insertNewObjectForEntityForName:@"Document"
                                          inManagedObjectContext:self.managedObjectContext];

[document setDocName:[title contents]];
[document setElement:self.element]; //here the app crash
} 
```

我收到这些错误：

```
 CoreData: error: Serious application error.  Exception was caught during Core Data change processing.  This is usually a bug within an observer of NSManagedObjectContextObjectsDidChangeNotification.  Can't perform collection evaluate with non-collection object. with userInfo (null)
2013-01-25 10:28:56.392 App[383:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Can't perform collection evaluate with non-collection object.' 
```

任何人都可以帮助我吗？

编辑：这是 NSManagedObjectClass：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class Document;

@interface Element : NSManagedObject

@property (nonatomic, retain) NSString * dateFormat;
@property (nonatomic, retain) NSString * dateFormat2;
@property (nonatomic, retain) id img;
@property (nonatomic, retain) NSDate * imgDate;
@property (nonatomic, retain) NSString * imgUrl;
@property (nonatomic, retain) NSString * language;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSString * name2;
@property (nonatomic, retain) NSString * pathDocuments;
@property (nonatomic, retain) NSNumber * releaseDateWeek;
@property (nonatomic, retain) NSNumber * type;
@property (nonatomic, retain) NSSet *documents;
@end

@interface Element (CoreDataGeneratedAccessors)

- (void)addDocumentsObject:(Document *)value;
- (void)removeDocumentsObject:(Document *)value;
- (void)addDocuments:(NSSet *)values;
- (void)removeDocuments:(NSSet *)values;

@end

@interface ImageToDataTransformer : NSValueTransformer {
}
@end

Document.h

#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@class Element;

@interface Document : NSManagedObject

@property (nonatomic, retain) NSDate * docDate;
@property (nonatomic, retain) id docImage;
@property (nonatomic, retain) NSString * docName;
@property (nonatomic, retain) NSString * docPath;
@property (nonatomic, retain) NSNumber * docSize;
@property (nonatomic, retain) NSString * docUrl;
@property (nonatomic, retain) NSNumber * isDownloading;
@property (nonatomic, retain) NSNumber * isStored;
@property (nonatomic, retain) NSNumber * pageNumber;
@property (nonatomic, retain) NSString * password;
@property (nonatomic, retain) NSNumber * progressBar;
@property (nonatomic, retain) Element *element;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:04:06.280

问题似乎在于：

```
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"SUBQUERY(element, $b, $b.name == %@).@count > 0", self.element.name]]; 
```

'element' 不解析为集合（根据 SUBQUERY 的要求），而只是一个对象。

请参阅：http: [//developer.apple.com/library/Mac/#documentation/Cocoa/Reference/Foundation/Classes/NSExpression_Class/Reference/NSExpression.html](http://developer.apple.com/library/Mac/#documentation/Cocoa/Reference/Foundation/Classes/NSExpression_Class/Reference/NSExpression.html)

# python - Python异常处理——行号

> ID：14519177
> 
> 赞同：67
> 
> 时间：2013-01-25T09:47:56.877
> 
> 标签：python, exception, indexing

我正在使用 python 来评估一些测量数据。由于许多可能的结果，很难处理或可能的组合。有时在评估过程中会发生错误。这通常是索引错误，因为我超出了测量数据的范围。

很难找出问题发生在代码中的哪个位置。如果我知道在哪一行引发了错误，那将有很大帮助。如果我使用以下代码：

```
try:
    result = evaluateData(data)
except Exception, err:
    print ("Error: %s.\n" % str(err)) 
```

不幸的是，这只告诉我存在索引错误。我想了解有关异常的更多详细信息（代码行、变量等）以了解发生了什么。可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-11-28T10:50:36.500

解决方案，打印文件名、行号、行本身和异常描述：

```
import linecache
import sys

def PrintException():
    exc_type, exc_obj, tb = sys.exc_info()
    f = tb.tb_frame
    lineno = tb.tb_lineno
    filename = f.f_code.co_filename
    linecache.checkcache(filename)
    line = linecache.getline(filename, lineno, f.f_globals)
    print 'EXCEPTION IN ({}, LINE {} "{}"): {}'.format(filename, lineno, line.strip(), exc_obj)

try:
    print 1/0
except:
    PrintException() 
```

输出：

```
EXCEPTION IN (D:/Projects/delme3.py, LINE 15 "print 1/0"): integer division or modulo by zero 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-01-25T09:53:29.580

要简单地获取您可以使用的行号`sys`，如果您想要更多，请尝试使用[traceback](http://docs.python.org/2/library/traceback.html)模块。

```
import sys    
try:
    [][2]
except IndexError:
    print("Error on line {}".format(sys.exc_info()[-1].tb_lineno)) 
```

*打印*：

```
Error on line 3 
```

* * *

[`traceback`模块文档中的示例](http://docs.python.org/2/library/traceback.html#traceback-examples)：

```
import sys, traceback

def lumberjack():
    bright_side_of_death()

def bright_side_of_death():
    return tuple()[0]

try:
    lumberjack()
except IndexError:
    exc_type, exc_value, exc_traceback = sys.exc_info()
    print "*** print_tb:"
    traceback.print_tb(exc_traceback, limit=1, file=sys.stdout)
    print "*** print_exception:"
    traceback.print_exception(exc_type, exc_value, exc_traceback,
                              limit=2, file=sys.stdout)
    print "*** print_exc:"
    traceback.print_exc()
    print "*** format_exc, first and last line:"
    formatted_lines = traceback.format_exc().splitlines()
    print formatted_lines[0]
    print formatted_lines[-1]
    print "*** format_exception:"
    print repr(traceback.format_exception(exc_type, exc_value,
                                          exc_traceback))
    print "*** extract_tb:"
    print repr(traceback.extract_tb(exc_traceback))
    print "*** format_tb:"
    print repr(traceback.format_tb(exc_traceback))
    print "*** tb_lineno:", exc_traceback.tb_lineno 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-11-11T13:43:12.117

我使用`traceback`简单而健壮的：

```
import traceback

try:
    raise ValueError()
except:
    print(traceback.format_exc()) 
```

出去：

```
Traceback (most recent call last):
  File "catch.py", line 4, in <module>
    raise ValueError()
ValueError 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-12-19T00:28:07.863

最简单的方法就是使用：

```
import traceback
try:
    <blah>
except IndexError:
    traceback.print_exc() 
```

或者如果使用日志记录：

```
import logging
try:
    <blah>
except IndexError as e:
    logging.exception(e) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-03-01T03:43:58.310

为您提供调用堆栈中最后一项的文件、行号和异常

```
from sys import exc_info
from traceback import format_exception

def print_exception():
    etype, value, tb = exc_info()
    info, error = format_exception(etype, value, tb)[-2:]
    print(f'Exception in:\n{info}\n{error}')

try:
    1 / 0
except:
    print_exception() 
```

印刷

```
Exception in:
   File "file.py", line 12, in <module>
    1 / 0

ZeroDivisionError: division by zero 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-14T22:57:01.590

我建议使用 python 日志库，它有两个有用的方法在这种情况下可能会有所帮助。

1.  logging.findCaller()

    *   findCaller(stack_info=False) - 只报告导致异常的前一个调用者的行号
    *   findCaller(stack_info=True) - 报告前一个调用者的行号和堆栈，导致引发异常
2.  logging.logException()

    *   报告引发异常的 try/except 块中的行和堆栈

有关更多信息，请查看 api [https://docs.python.org/3/library/logging.html](https://docs.python.org/3/library/logging.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-24T10:55:19.900

我总是使用这个片段

```
import sys, os

try:
    raise NotImplementedError("No error")
except Exception as e:
    exc_type, exc_obj, exc_tb = sys.exc_info()
    fname = os.path.split(exc_tb.tb_frame.f_code.co_filename)[1]
    print(exc_type, fname, exc_tb.tb_lineno) 
```

对于不同的视图和可能的问题，您可以参考[当我捕获异常时，如何获取类型、文件和行号？](https://stackoverflow.com/questions/1278705/when-i-catch-an-exception-how-do-i-get-the-type-file-and-line-number/1278740#1278740)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-11T13:14:36.293

所有的解决方案都解决了 OPs 问题，但是，如果一个人持有一个特定的错误实例并且最后一个回溯堆栈不会这样做，那么它们就不够了——下面给出了一个角落场景示例。

`__traceback__`在这种情况下，可以使用引发异常实例的魔法属性。**这是一个系统回溯对象（公开为`types.TracebackType`，请参阅[Types](https://docs.python.org/3/library/types.html)）而不是 module**。这个回溯实例的行为与预期的一样（但检查总是很好）：

```
from collections import deque
from typing import (List, )
errors: List[Exception] = deque([], 5)

def get_raised(error_cls: type, msg: str) -> Exception:
# for debugging, an exception instance that is not raised
# ``__traceback__`` has ``None``
    try:
        raise error_cls(msg)
    except Exception as error:
        return error

error = get_raised(NameError, 'foo')
errors.append(error)

error = get_raised(ValueError, 'bar')
errors.append(error)

try:
    raise get_raised(TypeError, 'bar')
except Exception as error:
    errors.append(error) 
```

现在，我可以查看第一个错误的详细信息：

```
import types

traceback = errors[0].__traceback__  # inadvisable name due to module
line_no: int = traceback.tb_lineno
frame: types.FrameType = traceback.tb_frame
previous: Union[type(None), types.TracebackType] = traceback.tb_next
filename: str = frame.f_code.co_filename 
```

回溯的前一个错误对于第二个错误是无，尽管前面的错误如预期的那样，但对于第三个错误，其中两次引发错误，它不是。

下面只是一个测试，在上下文中没有任何意义。如果在 webapp 的视图中引发异常（一种 500 状态的事件）被捕获并存储以供承认检查类似于 Setry.io（但免费），那么这种情况很有用。这是一个最小的示例，主页`/`将引发错误，该错误被捕获并且路由`errors`将列出它们。这是以非常集中的方式使用 Pyramid（多文件更好），没有日志记录或身份验证，并且错误日志记录可能更适合管理员检查，类似于 Sentry.io。

```
from pyramid.config import Configurator
from waitress import serve
from collections import deque
# just for typehinting:
from pyramid.request import Request
from pyramid.traversal import DefaultRootFactory
from pyramid.router import Router
import types
from typing import (List, )

def home_view(context: DefaultRootFactory, request: Request) -> dict:
    raise NotImplementedError('I forgot to fill this')
    return {'status': 'ok'}  # never reached.

def caught_view(error: Exception, request: Request) -> dict:
    """
    Exception above is just type hinting.
    This is controlled by the context argument in 
    either the ``add_exception_view`` method of config,
    or the ``exception_view_config`` decorator factory (callable class)
    """
    # this below is a simplification as URLDecodeError is an attack (418)
    request.response.status = 500 
    config.registry.settings['error_buffer'].append(error)
    #logging.exception(error) # were it set up.
    #slack_admin(format_error(error))  # ditto
    return {'status': 'error',  'message': 'The server crashed!!'}

def format_error(error: Exception) -> str:
    traceback = error.__traceback__  # inadvisable name due to module
    frame: types.FrameType = traceback.tb_frame
    return f'{type(error).__name__}: {error}' +\
           f'at line {traceback.tb_lineno} in file {frame.f_code.co_filename}'

def error_view(context: DefaultRootFactory, request: Request) -> dict:
    print(request.registry.settings['error_buffer'])
    return {'status': 'ok', 
            'errors':list(map(format_error, request.registry.settings['error_buffer']))
           }

with Configurator(settings=dict()) as config:
    config.add_route('home', '/')
    config.add_route('errors', '/errors')
    config.add_view(home_view, route_name='home', renderer='json')
    config.add_view(error_view, route_name='errors', renderer='json')
    config.add_exception_view(caught_view, context=Exception, renderer='json')
    config.registry.settings['error_buffer']: List[Exception] = deque([], 5)  
    # not in config.registry.settings, not JSON serialisable
    # config.add_request_method
    app  : Router = config.make_wsgi_app()

port = 6969
serve(app, port=port) 
```

# c# - Linq 子选择查询

> ID：14519181
> 
> 赞同：0
> 
> 时间：2013-01-25T09:48:01.690
> 
> 标签：c#, .net, linq, lambda, entity-relationship

我有这样的收藏

```
 public class Worksheet
    {
        public string WorksheetName { get; set; }
        public string WorksheetId { get; set; }
        public string TestSymbol { get; set; }
        public string TestId { get; set; }

        public List<Samples> Samples { get; set; }

        public Worksheet()
        {
            Samples = new List<Samples>();
        }
        public Worksheet(string worksheetname, string worksheetid, string testsymbol, string testid)
        {
            WorksheetName = worksheetname;
            WorksheetId = worksheetid;

            TestSymbol = testsymbol;
            TestId = testid;

            Samples = new List<Samples>();
        }

    }
    public class Samples
    {
        public string SampleId { get; set; }
        public string SampleName { get; set; }

        public Samples()
        {
            AssociatedSheets = new List<Worksheet>();
        }

        public Samples(string sampleid, string samplename)
        {
            AssociatedSheets = new List<Worksheet>();

            SampleId = sampleid;
            SampleName = samplename;
        }

        public List<Worksheet> AssociatedSheets { get; set; }
    } 
```

在手表中查看时的结构出现

*   工作表 1
    *   样品 A
    *   样品 B
*   工作表 2
    *   样品 C
    *   样品 A

我想要的是在每个示例中设置 AssociatedSheets 以显示包含它的工作表。

让它显示

*   工作表 1
    *   样品 A
        *   工作表 1
        *   工作表 2
    *   样品 B
        *   工作表 1
*   工作表 2
    *   样品 C
        *   工作表 2
    *   样品 A
        *   工作表 1
        *   工作表 2

我已经开发了这样的东西，但显然它不会工作。在此之后，我想区分选择每个样本。有人可以建议：

```
 List<Samples> AllSamples = new List<Samples>();

        //Step 4\. Add possible worksheets to each sample.
        foreach (Samples sample in sheets.SelectMany(x => x.Samples).ToList())
        {
            List<Worksheet> sampleitem = sheets.SelectMany(x => x.Samples.Select(y => y.SampleId) == sheets.SelectMany(k => k.Samples).Select(h => h.SampleId).ToList());

            sample.AssociatedSheets = AssociatedSheets;

            if (!AllSamples.Contains(sample))
                AllSamples.Add(sample);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:56:04.477

[**编辑**]我以前的答案的代码修复

也许这可以做到：

```
List<Sample> allSamples = new List<Sample>();
foreach (Sample sample in sheets.SelectMany(x => x.Samples).Distinct())
{
  var sampleSheets = sheets.Where(s => s.Samples.Contains(sample)).Distinct();
  sample.AssociatedSheets.AddRange(sampleSheets);
  allSamples.Add(sample);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:13:52.060

简单但完成工作：

```
foreach (var grouping in from worksheet in worksheets
                         from sample in worksheet.Samples
                         group worksheet by sample)  // Groups the worksheets by sample
    grouping.Key.AssociatedSheets = grouping.Distinct().ToList();  // grouping.Key is the key of the group (the sample) and ((IEnumerable)grouping) is the elements in the group (the worksheets 
```

# php - 计算两个给定日期之间的月、年和日作为时间戳

> ID：14519187
> 
> 赞同：4
> 
> 时间：2013-01-25T09:48:05.777
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)
> [如何获得年/月/周/日两个日期之间的差异？](https://stackoverflow.com/questions/1083955/how-to-get-difference-between-two-dates-in-year-month-week-day)

我正在尝试计算 PHP 中两个给定日期之间的年月日。

我也在使用那些日期的时间戳。有没有办法计算年月和

这些时间戳的差异天数。

例如，第一个日期是 2008 年 1 月 2 日。第二个日期是 2012 年 7 月 5 日。结果是 4 年 5 个月零 3 天。

我正在将时间戳作为日期输入，并想知道是否有任何可用的函数可以通过两个输入时间戳直接计算上述内容

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-25T09:55:04.807

您可以为此使用 DateTime 对象（请注意 datetime 构造函数中缺少的“，”）。

```
$datetime1 = new DateTime('2 Jan 2008');
$datetime2 = new DateTime('5 July 2012');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%y years %m months and %d days'); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-25T09:55:36.070

您可以使用 DateTime 轻松完成此操作：

```
$date1 = new DateTime("2008-01-02");
$date2 = new DateTime("2012-07-05");
$diff = $date1->diff($date2);

echo "difference " . $diff->y . " years, " . $diff->m." months, ".$diff->d." days " 
```

[文档](http://php.net/manual/en/intro.datetime.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T10:03:51.000

你应该看看[Carbon](https://github.com/briannesbitt/Carbon#api-difference)，它是一个非常新的 PHP 5.3 库，位于 DateTime 之上，有很多有用的方法。

对于日期差异：

```
<?php
$dtOttawa = Carbon::createFromDate(2000, 1, 1, 'America/Toronto');
$dtVancouver = Carbon::createFromDate(2013, 1, 1, 'America/Vancouver');
echo $dtOttawa->diffInHours($dtVancouver);
echo $dtOttawa->diffInDays($dtVancouver);
echo $dtOttawa->diffInMinutes($dtVancouver);
echo $dtOttawa->diffInYears($dtVancouver); 
```

如果你想要人类可读的差异：

```
$dt = Carbon::createFromDate(2011, 2, 1);

echo $dt->diffForHumans($dt->copy()->addMonth());              // 28 days before
echo $dt->diffForHumans($dt->copy()->subMonth());              // 1 month after 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T09:54:26.043

您可以从时间戳创建两个 DateTime 对象 (www.php.net/datetime)。调用 diff 方法时，您会得到一个 DateInterval 对象，该对象具有年和月的属性。

# java - JVM是否在系统中存储内存？如果是这样，如何清除它？

> ID：14519188
> 
> 赞同：4
> 
> 时间：2013-01-25T09:48:08.117
> 
> 标签：java, garbage-collection, jvm, out-of-memory

我正在使用 NetBeans 运行应用程序，并在项目属性中将 Max JVM 堆空间设置为 1 GiB。

但是，应用程序仍然因内存不足而崩溃。

JVM 是否在系统中存储了内存？如果是这样，如何清除该内存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T09:52:42.153

您需要使用分析器分析您的代码——Netbeans 有一个很好的分析器。这将向您显示应用程序中内存占用的位置，并且应该让您了解问题所在。

JVM 会在内存耗尽之前尽可能多地对对象进行垃圾收集，因此您很可能在不再需要引用之后很长时间仍持有引用。要么，要么您的应用程序确实需要大量内存-但我想说它更有可能是您的代码中的错误，特别是如果问题仅在长时间运行应用程序后才出现.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T09:52:20.320

我不完全理解你问题的所有细节，但我想重要的部分是可以理解的。

如果分配给 JVM的`OutOfMemoryError`内存不足以容纳程序中创建的对象，则会抛出（不是异常）。在您的情况下，将可用堆空间增加到 1 GB 以上可能会有所帮助。如果您认为 1 GByte 就足够了，那么您可能存在内存泄漏（在 Java 中，这很可能意味着您有对不再需要的对象的引用——也许在某种缓存中？）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T10:16:34.360

Java 在启动时为其最大堆大小保留虚拟内存。当程序使用此内存时，操作系统会为其分配更多的主内存。在 UNIX 下，这显示为常驻内存。虽然 Java 程序可以交换到磁盘，但如果交换了部分堆，垃圾收集的性能会非常糟糕，并且可能导致整个机器锁定或不得不重新启动。如果您的程序没有这样做，您可以确定它完全在主内存中。

根据您的应用程序的用途，它可能需要 1 GB、10 GB 或 100 GB 或更多。如果您无法增加最大内存大小，您可以使用内存分析器来帮助您找到减少消耗的方法。从 VisualVM 开始，因为它是内置的并且是免费的并且做得不错。如果这还不够，请尝试使用诸如 YourKit 之类的商业分析器，您可以获得免费评估许可证（通常工作时间足以解决您的问题；）

垃圾收集器会根据需要自动清理内存，并且可能每隔几秒执行一次，甚至每秒执行一次以上。如果是这样，这可能会减慢您的应用程序，因此您应该考虑增加最大大小或减少消耗。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-04T04:50:04.493

正如@camobap 所提到的，OutOfMemory 的原因是因为**Perm Gen**的大小设置得非常低。现在问题解决了。

谢谢大家的回答和评论。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T00:37:10.040

Java 编译器并没有像我想的那样分配 1 GiB。Java 动态分配所需的内存并且垃圾也会收集它，每次分配内存时它都会检查它是否有足够的空间来执行此操作，如果没有则崩溃。我猜你的代码中的某个地方，因为几乎不可能编写分配这么多变量的代码，你有一个占用所有内存的数组或 ArrayList。在数组的情况下，您可能有一个分配其大小的变量，并且您对其进行了一些计算，导致它占用了太多内存。在 ArrayList 的情况下，我相信您可能有一个循环，该循环进行了太多迭代，向其中添加了元素。

检查您的代码是否存在上述错误，您应该很好。

# android - 如何让我的 android 应用程序干净？

> ID：14519189
> 
> 赞同：0
> 
> 时间：2013-01-25T09:48:08.973
> 
> 标签：android, debugging

在我的 Java 代码中，我使用`Debug`flag 来控制 debug 模型，如果是 debug ，还有一些额外的功能，例如：sway phone show a `activity`to change app version。现在我想在将代码发布到市场时删除这些代码。

像下面的代码一样，有没有办法让`VersionSwitchService.class`代码`null`和其他代码运行正常？

我的意思是，即使有人反编译了 apk，`VersionSwitchService.class`代码也会被视为空白。

```
if (isDEBUG) {
    VersionSwitchService.libStart(this, new LibVersionSwitch() {

        @Override
        public void versionSwitchToOnline() {
            //...
        }

        @Override
        public void versionSwitch(String version) {
            //...
        }
     });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:52:41.387

如果你做`isDebug` `final static`：

```
final static boolean isDebug = false; 
```

Java 编译器将完全删除未到达的代码部分。Sp 在您的示例中，“then”部分被完全省略，因此在您的 apk 中不可用。

此外，在创建（发布）apk 构建时，Android 工具将删除所有未使用的方法和类。所以，如果你的`VersionSwitchService`类只用于调试，它就不会出现（由于`static final`调试常量的组合）

# batch-file - 我可以获取 RFC 3339 格式的当前日期吗？

> ID：14519191
> 
> 赞同：3
> 
> 时间：2013-01-25T09:48:18.787
> 
> 标签：batch-file, mercurial, cmd

我正在编写一个批处理脚本 (cmd)，在其中我以 RFC3339 格式获取变更集的日期：

```
FOR /F "usebackq delims=" %%G IN ^
  (`hg log -r . --cwd "%~dp0" --template "{date|rfc3339date}"`) ^
  do SET hg_changeset_date_rfc3339=%%G
echo %hg_changeset_date_rfc3339%       <------ writes "2009-08-18T13:00:13+02:00" 
```

是否有一种简单且独立于语言环境的方法可以使用 cmd 内置命令或使用 hg 命令以相同格式获取当前日期？我不想依赖，`%DATE%`因为它依赖于语言环境。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T14:19:52.743

您可以使用`wmic`命令获取当前日期和时间，而不受区域设置的影响。

```
@echo off
SETLOCAL EnableDelayedExpansion

for /f "skip=1 tokens=1-6 delims= " %%a in ('wmic path Win32_LocalTime Get Day^,Hour^,Minute^,Month^,Second^,Year /Format:table') do (
    IF NOT "%%~f"=="" (
        set /a FormattedDate=10000 * %%f + 100 * %%d + %%a
        set FormattedDate=!FormattedDate:~0,4!-!FormattedDate:~-4,2!-!FormattedDate:~-2,2!
        set /a FormattedTime=%%b * 10000 + %%c * 100 + %%e
        set FormattedTime=!FormattedTime:~0,2!:!FormattedTime:~-4,2!:!FormattedTime:~-2,2!
    )
)

echo !FormattedDate!T!FormattedTime!Z <--Assuming UTC timezone is used
PAUSE 
```

这是执行脚本后的输出：

```
C:\>dateTime.bat
2013-01-25T22:11:40Z
Press any key to continue... 
```

希望能帮助到你 ：）

# sql - SQL：插入日期时从字符串转换日期时间

> ID：14519192
> 
> 赞同：0
> 
> 时间：2013-01-25T09:48:22.670
> 
> 标签：sql, datetime, stored-procedures, type-conversion

我有以下程序：

```
ALTER PROCEDURE [dbo].[myProcedute]
    @mydate VARCHAR(8000) = NULL

IF @mydate = ''
        BEGIN
            SET @mydate = NULL
        END
        ELSE 
        BEGIN
        SET @mydate = CONVERT(DATETIME, @mydate, 103) -- dd/mm/yy
        END

    INSERT INTO  dbo.myTable(theDate) VALUES(@mydate) 
```

我像这样执行它：

```
EXEC  [dbo].[myProcedure] '02/02/2012' 
```

执行后出现此错误：从字符串转换日期时间时转换失败。

我从我的 vb6 代码执行它，日期可能会有所不同。这次是 '02/02/2012' 但下一次可能是 ''（空）。

当它作为 '' 出现时，我需要它插入一个 NULL，正如您在 IF 子句中看到的那样。

为什么我会收到此错误？

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:58:27.077

使用 ISDATE() 检查它是否是有效日期。

转换似乎很好。正如评论所暗示的那样，如果您可以将参数更改为`DATE`

```
ALTER PROCEDURE [dbo].[myProcedute]
    @mydate VARCHAR(8000) = NULL

IF ISDATE(@mydate)
    BEGIN
        SET @mydate = CONVERT(DATETIME, @mydate, 103) -- dd/mm/yy
    END
    ELSE 
    BEGIN
        SET @mydate = NULL        
    END

INSERT INTO  dbo.myTable(theDate) VALUES(@mydate) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:05:54.717

最好将您的日期字符串格式化为***ISO 格式***( `yyyymmdd`)，这样可以保证在任何 sql-server 上工作。假设您像 vb 代码一样传递它`dd/mm/yyyy`（根据您的数据）。试试这个;

```
--Format @mydate to yyyymmdd
SELECT @mydate = CASE LEN(@mydate) WHEN 10 
         THEN RIGHT(@mydate,4)+ SUBSTRING(@mydate,4,2)+ LEFT(@mydate,2)
         ELSE NULL END
--Insert
INSERT INTO  dbo.myTable(theDate) VALUES(@mydate) 
```

# android - android Toast 没有出现

> ID：14519197
> 
> 赞同：0
> 
> 时间：2013-01-25T09:49:06.700
> 
> 标签：android, android-layout, android-widget

我有一个带有 textview 的 xml 文件，其中包含一个 drawabletop 图像并自定义包含标题的列表视图，我希望在单击 textview 以显示敬酒时，我不知道为什么什么都没有出现

# Java 活动

我有一个带有 textview 的 xml 文件，其中包含一个 drawabletop 图像并自定义包含标题的列表视图，我希望在单击 textview 以显示敬酒时，我不知道为什么什么都没有出现

# Java 活动

```
tv_title = (TextView) findViewById(R.id.tv_myID);
@Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        switch (v.getId()) {
        case R.id.myID:
            Toast.makeText(getApplicationContext(), "HI", Toast.LENGTH_SHORT);
            break;

        default:
            break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:50:23.917

进入这个 `Toast.makeText(this, "ROM", Toast.LENGTH_SHORT).show();`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T09:51:45.603

将其更改为

```
Toast.makeText(getApplicationContext(), "ROM", Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T09:56:23.953

把这个放在这个`tv_title.setOnClickListener(this);`之后

```
tv_title = (TextView) findViewById(R.id.tv_restaurant_description_title); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T09:51:28.217

更改代码中的这一行：

```
 Toast.makeText(getApplicationContext(), "ROM", Toast.LENGTH_SHORT); 
```

至

```
 Toast.makeText(getApplicationContext(), "ROM", Toast.LENGTH_SHORT).show(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T09:52:03.253

您忘记调用`Toast.show()`方法以在按钮单击上显示 Toast 将其更改为：

```
 Toast.makeText(getApplicationContext(), "ROM", Toast.LENGTH_SHORT).show(); 
```

# mysql - JPA 2：使用@Table 注释的异常

> ID：14519199
> 
> 赞同：0
> 
> 时间：2013-01-25T09:49:12.270
> 
> 标签：mysql, hibernate, orm, annotations, jpa-2.0

当我尝试使用`@Table(" \" Employee \" ")`注释时，它会生成异常。有以下异常

```
Exception in thread "main" javax.persistence.PersistenceException: org.hibernate.exception.SQLGrammarException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '" Employee "  (name, salary) values ('Jimmy', 35000)' at line 1 
```

不使用转义字符，员工表生成成功，但我想生成表名 "Employee" 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:39:22.777

Hibernate 作为 JPA 实现不仅是堆栈中的技术，它会影响如何处理数据库表名的大小写敏感性。数据库的容量以及如何设置确实起着至关重要的作用。

在 MySQL 中，表名的大小写敏感性是通过[lower_case_table_names](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_lower_case_table_names)系统变量控制的。例如，在 Windows 中，默认是小写名称，不区分大小写的比较。此外，如果操作系统没有区分大小写的文件系统，结果是表名不能区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T21:48:55.143

我也在问同样的问题，因为我看到默认值是小写的。

# php - getElementsByTagName 无法获取节点

> ID：14519200
> 
> 赞同：1
> 
> 时间：2013-01-25T09:49:12.257
> 
> 标签：php, dom, getelementsbytagname

我有这个 xml，当我尝试获取节点时： InternetGatewayDevice->WANDevice->i2 with getElementsByTagName 它失败了。它仅适用于 xpath。这是代码：

XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<InternetGatewayDevice>
        <LANDevice>
                <i1>
                </i1>
        </LANDevice>
        <Time>
                <X_ZyXEL_DefaultRouteProfileName PARAMETER="configured" TYPE="string" LENGTH="256"></X_ZyXEL_DefaultRouteProfileName>
                <LocalTimeZoneName PARAMETER="configured" TYPE="string" LENGTH="64">CET-1CEST-2,M3.5.0/1,M10.5.0/1</LocalTimeZoneName>
                <NTPServer5 PARAMETER="configured" TYPE="string" LENGTH="64"></NTPServer5>
                <NTPServer4 PARAMETER="configured" TYPE="string" LENGTH="64"></NTPServer4>
                <NTPServer3 PARAMETER="configured" TYPE="string" LENGTH="64"></NTPServer3>
                <NTPServer2 PARAMETER="configured" TYPE="string" LENGTH="64"></NTPServer2>
                <NTPServer1 PARAMETER="configured" TYPE="string" LENGTH="64">europe.pool.ntp.org</NTPServer1>
                <Enable PARAMETER="configured" TYPE="boolean">1</Enable>
        </Time>
        <WANDevice>
                <i1>
                        <WANEthernetInterfaceConfig>
                                <DuplexMode PARAMETER="configured" TYPE="string" LENGTH="32">Auto</DuplexMode>
                                <MaxBitRate PARAMETER="configured" TYPE="string" LENGTH="32">Auto</MaxBitRate>
                                <Enable PARAMETER="configured" TYPE="boolean">1</Enable>
                        </WANEthernetInterfaceConfig>
                        <WANConnectionDevice>
                                <i1>
                                        <X_ZyXEL_WANService PARAMETER="configured" TYPE="string" LENGTH="63"></X_ZyXEL_WANService>
                                        <X_ZyXEL_EgressQueue PARAMETER="configured" TYPE="uint8" MAX="255" MIN="0">0</X_ZyXEL_EgressQueue>
                                        <X_ZyXEL_L2VlanMuxMode PARAMETER="configured" TYPE="boolean">1</X_ZyXEL_L2VlanMuxMode>
                                        <WANIPConnection>
                                                <i1>
                                                        <X_ZyXEL_IPv6DefaultGateway PARAMETER="configured" TYPE="string" LENGTH="46">fe80::1</X_ZyXEL_IPv6DefaultGateway>
                                                        <RouteProtocolRx PARAMETER="configured" TYPE="string" LENGTH="10">Off</RouteProtocolRx>
                                                        <ConnectionTrigger PARAMETER="configured" TYPE="string" LENGTH="10">AlwaysOn</ConnectionTrigger>
                                                        <X_ZyXEL_Multicast PARAMETER="configured" TYPE="string" LENGTH="8">IGMPv3</X_ZyXEL_Multicast>
                                                        <DNSServers PARAMETER="configured" TYPE="string" LENGTH="64"></DNSServers>
                                                        <DefaultGateway PARAMETER="configured" TYPE="string" LENGTH="16"></DefaultGateway>
                                                        <SubnetMask PARAMETER="configured" TYPE="string" LENGTH="16"></SubnetMask>
                                                        <ExternalIPAddress PARAMETER="configured" TYPE="string" LENGTH="16"></ExternalIPAddress>
                                                        <AddressingType PARAMETER="configured" TYPE="string" LENGTH="8">DHCP</AddressingType>
                                                        <Name PARAMETER="configured" TYPE="string" LENGTH="256">EtherWAN1</Name>
                                                        <ConnectionType PARAMETER="configured" TYPE="string" LENGTH="13">IP_Routed</ConnectionType>
                                                        <X_ZyXEL_DualStack PARAMETER="configured" TYPE="uint8" MAX="2" MIN="0">1</X_ZyXEL_DualStack>
                                                        <X_ZyXEL_PassThrough PARAMETER="configured" TYPE="boolean">0</X_ZyXEL_PassThrough>
                                                        <X_ZyXEL_Routing PARAMETER="configured" TYPE="uint8" MAX="2" MIN="0">1</X_ZyXEL_Routing>
                                                        <X_ZyXEL_VlanMux8021p PARAMETER="configured" TYPE="uint8" MAX="7" MIN="0">0</X_ZyXEL_VlanMux8021p>
                                                        <MACAddressOverride PARAMETER="configured" TYPE="boolean">0</MACAddressOverride>
                                                        <MACAddress PARAMETER="configured" TYPE="mac">00:00:00:00:00:00</MACAddress>
                                                        <X_ZyXEL_AutoBridge PARAMETER="configured" TYPE="boolean">0</X_ZyXEL_AutoBridge>
                                                        <DNSOverrideAllowed PARAMETER="configured" TYPE="boolean">0</DNSOverrideAllowed>
                                                        <DNSEnabled PARAMETER="configured" TYPE="boolean">1</DNSEnabled>
                                                        <NATEnabled PARAMETER="configured" TYPE="boolean">1</NATEnabled>
                                                        <X_ZyXEL_L2Bridging_AvailableInterfaceKey PARAMETER="configured" TYPE="uint8" MAX="255" MIN="0">17</X_ZyXEL_L2Bridging_AvailableInterfaceKey>
                                                        <Enable PARAMETER="configured" TYPE="boolean">1</Enable>
                                                        <X_ZyXEL_VLanMuxId PARAMETER="configured" TYPE="uint16" MAX="4094" MIN="0">3900</X_ZyXEL_VLanMuxId>
                                                        <MaxMTUSize PARAMETER="configured" TYPE="uint16" MAX="1540" MIN="1">1500</MaxMTUSize>
                                                        <ShapingRate PARAMETER="configured" TYPE="sint31" MAX="2147483647" MIN="-1">-1</ShapingRate>
                                                        <X_ZyXEL_IPv6DNS>
                                                                <i1>
                                                                        <ServerIP PARAMETER="configured" TYPE="string" LENGTH="46">::1</ServerIP>
                                                                        <ServerType PARAMETER="configured" TYPE="string" LENGTH="32">FromISP</ServerType>
                                                                </i1>
                                                        </X_ZyXEL_IPv6DNS>
                                                        <X_ZyXEL_NAT>
                                                                <DefaultServerIP PARAMETER="configured" TYPE="string" LENGTH="16"></DefaultServerIP>
                                                                <DefaultServerIPEnabled PARAMETER="configured" TYPE="boolean">0</DefaultServerIPEnabled>
                                                                <Loopback PARAMETER="configured" TYPE="boolean">0</Loopback>
                                                                <LookupRule>
                                                                        <i1>
                                                                                <GlobalEnd PARAMETER="configured" TYPE="string" LENGTH="16">0.0.0.0</GlobalEnd>
                                                                                <GlobalStart PARAMETER="configured" TYPE="string" LENGTH="16">0.0.0.0</GlobalStart>
                                                                                <LocalEnd PARAMETER="configured" TYPE="string" LENGTH="16">255.255.255.255</LocalEnd>
                                                                                <LocalStart PARAMETER="configured" TYPE="string" LENGTH="16">0.0.0.0</LocalStart>
                                                                                <DeviceWANIP PARAMETER="configured" TYPE="boolean">1</DeviceWANIP>
                                                                                <NATRuleEnabled PARAMETER="configured" TYPE="boolean">1</NATRuleEnabled>
                                                                                <Type PARAMETER="configured" TYPE="uint8" MAX="3" MIN="0">1</Type>
                                                                        </i1>
                                                                </LookupRule>
                                                        </X_ZyXEL_NAT>
                                                        <X_ZyXEL_IPv6GlobalAddress>
                                                                <i1>
                                                                        <Address PARAMETER="configured" TYPE="string" LENGTH="46">::</Address>
                                                                        <AddressingType PARAMETER="configured" TYPE="string" LENGTH="10">DHCPv6</AddressingType>
                                                                        <PrefixLength PARAMETER="configured" TYPE="uint8" MAX="64" MIN="16">64</PrefixLength>
                                                                </i1>
                                                        </X_ZyXEL_IPv6GlobalAddress>
                                                        <X_ZyXEL_DNS>
                                                                <i1>
                                                                        <ServerIP PARAMETER="configured" TYPE="string" LENGTH="16">0.0.0.0</ServerIP>
                                                                        <ServerType PARAMETER="configured" TYPE="string" LENGTH="32">FromISP</ServerType>
                                                                </i1>
                                                        </X_ZyXEL_DNS>
                                                        <X_ZyXEL_DHCPv6Client>
                                                                <SentDHCPOption>
                                                                        <i1>
                                                                                <Value PARAMETER="configured" TYPE="string" LENGTH="340"></Value>
                                                                                <Tag PARAMETER="configured" TYPE="uint8" MAX="254" MIN="1">25</Tag>
                                                                                <Enable PARAMETER="configured" TYPE="boolean">1</Enable>
                                                                        </i1>
                                                                        <i2>
                                                                                <Value PARAMETER="configured" TYPE="string" LENGTH="340"></Value>
                                                                                <Tag PARAMETER="configured" TYPE="uint8" MAX="254" MIN="1">3</Tag>
                                                                                <Enable PARAMETER="configured" TYPE="boolean">1</Enable>
                                                                        </i2>
                                                                        <i3>
                                                                                <Value PARAMETER="configured" TYPE="string" LENGTH="340"></Value>
                                                                                <Tag PARAMETER="configured" TYPE="uint8" MAX="254" MIN="1">23</Tag>
                                                                                <Enable PARAMETER="configured" TYPE="boolean">1</Enable>
                                                                        </i3>
                                                                </SentDHCPOption>
                                                        </X_ZyXEL_DHCPv6Client>
                                                        <DHCPClient>
                                                                <SentDHCPOption>
                                                                        <i1>
                                                                                <Value PARAMETER="configured" TYPE="string" LENGTH="340"></Value>
                                                                                <Tag PARAMETER="configured" TYPE="uint8" MAX="254" MIN="1">60</Tag>
                                                                                <Enable PARAMETER="configured" TYPE="boolean">0</Enable>
                                                                        </i1>
                                                                </SentDHCPOption>
                                                        </DHCPClient>
                                                </i1>
                                        </WANIPConnection>
                                </i1>
                        </WANConnectionDevice>
                </i1>
                <i2>
                        <WANDSLInterfaceConfig>
                                <LinkEncapsulationRequested PARAMETER="configured" TYPE="string" LENGTH="64">G.992.3_Annex_K_ATM</LinkEncapsulationRequested>
                                <Status PARAMETER="configured" TYPE="string" LENGTH="64">Up</Status>
                                <Enable PARAMETER="configured" TYPE="boolean">1</Enable>
                        </WANDSLInterfaceConfig>
                        <WANConnectionDevice>
                                <i1>
                                        <X_ZyXEL_WANService PARAMETER="configured" TYPE="string" LENGTH="63"></X_ZyXEL_WANService>
                                        <X_ZyXEL_EgressQueue PARAMETER="configured" TYPE="uint8" MAX="255" MIN="0">0</X_ZyXEL_EgressQueue>
                                        <X_ZyXEL_L2VlanMuxMode PARAMETER="configured" TYPE="boolean">0</X_ZyXEL_L2VlanMuxMode>
                                        <WANPPPConnection>
                                                <i1>
                                                        <X_ZyXEL_PPPAuthenticationProtocol PARAMETER="configured" TYPE="string" LENGTH="32">Auto</X_ZyXEL_PPPAuthenticationProtocol>
                                                        <RouteProtocolRx PARAMETER="configured" TYPE="string" LENGTH="10">Off</RouteProtocolRx>
                                                        <ConnectionTrigger PARAMETER="configured" TYPE="string" LENGTH="10">AlwaysOn</ConnectionTrigger>
                                                        <PPPoEServiceName PARAMETER="configured" TYPE="string" LENGTH="256"></PPPoEServiceName>
                                                        <PPPoEACName PARAMETER="configured" TYPE="string" LENGTH="256"></PPPoEACName>
                                                        <X_ZyXEL_Multicast PARAMETER="configured" TYPE="string" LENGTH="8">IGMPv3</X_ZyXEL_Multicast>
                                                        <DNSServers PARAMETER="configured" TYPE="string" LENGTH="64"></DNSServers>
                                                        <Password PARAMETER="configured" TYPE="string" LENGTH="64">a</Password>
                                                        <Username PARAMETER="configured" TYPE="string" LENGTH="64">ads</Username>
                                                        <Name PARAMETER="configured" TYPE="string" LENGTH="256">AdslWAN1</Name>
                                                        <ConnectionType PARAMETER="configured" TYPE="string" LENGTH="16">IP_Routed</ConnectionType>
                                                        <X_ZyXEL_StaticIP PARAMETER="configured" TYPE="string" LENGTH="16">1xx.20.7.5</X_ZyXEL_StaticIP>
                                                        <X_ZyXEL_DualStack PARAMETER="configured" TYPE="uint8" MAX="2" MIN="0">0</X_ZyXEL_DualStack>
                                                        <X_ZyXEL_Routing PARAMETER="configured" TYPE="uint8" MAX="2" MIN="0">1</X_ZyXEL_Routing>
                                                        <X_ZyXEL_VlanMux8021p PARAMETER="configured" TYPE="uint8" MAX="7" MIN="0">0</X_ZyXEL_VlanMux8021p>
                                                        <X_ZyXEL_PassThrough PARAMETER="configured" TYPE="boolean">1</X_ZyXEL_PassThrough>
                                                        <MACAddressOverride PARAMETER="configured" TYPE="boolean">0</MACAddressOverride>
                                                        <MACAddress PARAMETER="configured" TYPE="mac">xx</MACAddress>
                                                        <X_ZyXEL_AutoBridge PARAMETER="configured" TYPE="boolean">0</X_ZyXEL_AutoBridge>
                                                        <DNSOverrideAllowed PARAMETER="configured" TYPE="boolean">0</DNSOverrideAllowed>
                                                        <DNSEnabled PARAMETER="configured" TYPE="boolean">1</DNSEnabled>
                                                        <NATEnabled PARAMETER="configured" TYPE="boolean">0</NATEnabled>
                                                        <X_ZyXEL_L2Bridging_AvailableInterfaceKey PARAMETER="configured" TYPE="uint8" MAX="255" MIN="0">0</X_ZyXEL_L2Bridging_AvailableInterfaceKey>
                                                        <Enable PARAMETER="configured" TYPE="boolean">1</Enable>
                                                        <X_ZyXEL_VLanMuxId PARAMETER="configured" TYPE="uint16" MAX="4094" MIN="0">0</X_ZyXEL_VLanMuxId>
                                                        <ShapingRate PARAMETER="configured" TYPE="sint31" MAX="2147483647" MIN="-1">-1</ShapingRate>
                                                        <IdleDisconnectTime PARAMETER="configured" TYPE="uint32" MAX="4294967295" MIN="0">0</IdleDisconnectTime>
                                                        <AutoDisconnectTime PARAMETER="configured" TYPE="uint32" MAX="4294967295" MIN="0">0</AutoDisconnectTime>
                                                        <X_ZyXEL_DNS>
                                                                <i1>
                                                                        <ServerIP PARAMETER="configured" TYPE="string" LENGTH="16">xx</ServerIP>
                                                                        <ServerType PARAMETER="configured" TYPE="string" LENGTH="32">UserDefined</ServerType>
                                                                </i1>
                                                                <i2>
                                                                        <ServerIP PARAMETER="configured" TYPE="string" LENGTH="16">xx</ServerIP>
                                                                        <ServerType PARAMETER="configured" TYPE="string" LENGTH="32">UserDefined</ServerType>
                                                                </i2>
                                                        </X_ZyXEL_DNS>
                                                        <X_ZyXEL_IPv6GlobalAddress>
                                                                <i1>
                                                                        <Address PARAMETER="configured" TYPE="string" LENGTH="46">::</Address>
                                                                        <AddressingType PARAMETER="configured" TYPE="string" LENGTH="10">DHCPv6</AddressingType>
                                                                        <PrefixLength PARAMETER="configured" TYPE="uint8" MAX="64" MIN="16">64</PrefixLength>
                                                                </i1>
                                                        </X_ZyXEL_IPv6GlobalAddress>
                                                        <X_ZyXEL_IPv6DNS>
                                                                <i1>
                                                                        <ServerIP PARAMETER="configured" TYPE="string" LENGTH="46">::</ServerIP>
                                                                        <ServerType PARAMETER="configured" TYPE="string" LENGTH="32">FromISP</ServerType>
                                                                </i1>
                                                        </X_ZyXEL_IPv6DNS>
                                                        <X_ZyXEL_DHCPv6Client>
                                                                <SentDHCPOption>
                                                                        <i1>
                                                                                <Value PARAMETER="configured" TYPE="string" LENGTH="340"></Value>
                                                                                <Tag PARAMETER="configured" TYPE="uint8" MAX="254" MIN="1">25</Tag>
                                                                                <Enable PARAMETER="configured" TYPE="boolean">1</Enable>
                                                                        </i1>
                                                                        <i2>
                                                                                <Value PARAMETER="configured" TYPE="string" LENGTH="340"></Value>
                                                                                <Tag PARAMETER="configured" TYPE="uint8" MAX="254" MIN="1">3</Tag>
                                                                                <Enable PARAMETER="configured" TYPE="boolean">1</Enable>
                                                                        </i2>
                                                                        <i3>
                                                                                <Value PARAMETER="configured" TYPE="string" LENGTH="340"></Value>
                                                                                <Tag PARAMETER="configured" TYPE="uint8" MAX="254" MIN="1">23</Tag>
                                                                                <Enable PARAMETER="configured" TYPE="boolean">1</Enable>
                                                                        </i3>
                                                                </SentDHCPOption>
                                                        </X_ZyXEL_DHCPv6Client>
                                                </i1>
                                        </WANPPPConnection>
                                        <WANDSLLinkConfig>
                                                <X_ZyXEL_IfName PARAMETER="configured" TYPE="string" LENGTH="16">nas1</X_ZyXEL_IfName>
                                                <ATMQoS PARAMETER="configured" TYPE="string" LENGTH="128">UBR</ATMQoS>
                                                <ATMEncapsulation PARAMETER="configured" TYPE="string" LENGTH="64">LLC</ATMEncapsulation>
                                                <DestinationAddress PARAMETER="configured" TYPE="string" LENGTH="256">PVC:8/35</DestinationAddress>
                                                <LinkType PARAMETER="configured" TYPE="string" LENGTH="32">EoA</LinkType>
                                                <X_ZyXEL_ATMEnbQos PARAMETER="configured" TYPE="boolean">0</X_ZyXEL_ATMEnbQos>
                                                <Enable PARAMETER="configured" TYPE="boolean">1</Enable>
                                                <X_ZyXEL_ATMSendBuffer PARAMETER="configured" TYPE="uint16" MAX="26144" MIN="0">0</X_ZyXEL_ATMSendBuffer>
                                                <ATMSustainableCellRate PARAMETER="configured" TYPE="uint32" MAX="4294967295" MIN="0">0</ATMSustainableCellRate>
                                                <ATMMaximumBurstSize PARAMETER="configured" TYPE="uint32" MAX="4294967295" MIN="0">0</ATMMaximumBurstSize>
                                                <ATMPeakCellRate PARAMETER="configured" TYPE="uint32" MAX="4294967295" MIN="0">0</ATMPeakCellRate>
                                        </WANDSLLinkConfig>
                                </i1>
                        </WANConnectionDevice>
                        <WANDSLDiagnostics>
                                <LoopDiagnosticsState PARAMETER="configured" EXTATTR="0x0002" TYPE="string" LENGTH="32">Complete</LoopDiagnosticsState>
                        </WANDSLDiagnostics>
                </i2>
        </WANDevice>
</InternetGatewayDevice> 
```

php：

```
$xml = new DOMDocument('1.0', 'utf-8');
$xml->formatOutput = true;
$xml->preserveWhiteSpace = false;
$xml->load('file.xml');

//With getElementsByTagName
echo "getElementsByTagName:<br/>";
$node_of_xml = $xml->getElementsByTagName('InternetGatewayDevice')->item(0)->getElementsByTagName('WANDevice')->item(0)->getElementsByTagName('i2')->item(0);
foreach($node_of_xml->childNodes as $child) {
    echo $child->nodeName ."<br/>";
}
//With xpath
echo "<br/>Xpath:<br/>";
$xpath = new DOMXPath($xml);    
$results = $xpath->query('/InternetGatewayDevice/WANDevice/i2');   
$node_of_xml = $results->item(0);
foreach($node_of_xml->childNodes as $child) {
    echo $child->nodeName ."<br/>";
} 
```

输出（getElementsByTagName 错误，Xpath 正确）：

```
getElementsByTagName:
Value
Tag
Enable

Xpath:
WANDSLInterfaceConfig
WANConnectionDevice
WANDSLDiagnostics 
```

PHP 版本 5.3.20 启用 DOM/XML DOM/XML API 版本 20031129 libxml 版本 2.7.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:54:26.483

`getElementsByTagName`不限于直系子女。其中的第一个`i2`节点`WANDevice`是`/InternetGatewayDevice/WANDevice/i1/WANConnectionDevice/i1/WANIPConnection/i1/X_ZyXEL_DHCPv6Client/SentDHCPOption/i2`

您自己提供了解决方案：XPath。

# android - 无法通过使用 Holoeverwhere 的 ProgressDialog 获得 Holo 外观

> ID：14519201
> 
> 赞同：2
> 
> 时间：2013-01-25T09:49:16.893
> 
> 标签：android, android-holo-everywhere

我已经导入了库，没有错误或警告，但我无法让它工作。

这是我的 ProgressDialog 代码：

```
pDialog = new ProgressDialog(MyActivity.this);
pDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
pDialog.setMessage("Message");
pDialog.setCancelable(false);
pDialog.show(); 
```

我试过的：

*   我试图将 Manifest 中的 App 主题更改为：`@android:style/Theme.Holo.Light`但没有用
*   我还尝试像这样创建 ProgressDialog 实例：`new ProgressDialog(Activity.this, R.drawable.dialog_full_holo_light);`
*   我正在扩展`org.holoeverywhere.app.Activity;`和导入`org.holoeverywhere.app.ProgressDialog;`

我不知道我错过了什么或为什么它不起作用。你能帮我么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-15T08:39:50.437

```
ProgressDialog progressDialog;

if(android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.HONEYCOMB){
   progressDialog = new ProgressDialog(new ContextThemeWrapper(context, android.R.style.Theme_Holo_Light_Dialog));
}else{
   progressDialog = new ProgressDialog(context);
}

progressDialog.setMessage("Loading....");
progressDialog.show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-27T17:29:28.857

它也适用于我。

```
pDialog = new ProgressDialog(MainActivity.this, ProgressDialog.THEME_DEVICE_DEFAULT_DARK); 
```

您可以在此处的进度对话框中看到您可能希望看到的不同布局。它从警报对话框继承这些样式。

[http://developer.android.com/reference/android/app/ProgressDialog.html](http://developer.android.com/reference/android/app/ProgressDialog.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T16:26:30.847

它使用以下代码为我工作：

```
ProgressDialog progressDialog = new ProgressDialog(this);
progressDialog.setIndeterminate(true);
progressDialog.setMessage(message);
progressDialog.show(); 
```

确保您的活动扩展 org.holoeverywhere.app.Activity；并且您没有将应用程序上下文传递给 progresdialog 构造函数。

注意：我不是在导入 holoeverywhere progressdialog 而是 android.app.ProgressDialog;

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T15:54:54.930

我没有更改使用 HoloEverywhere，但它需要 ActionBarSherlock，因此可以尝试将样式更改为 Theme.Sherlock.Light 或将其用作基础。就像是：

```
<style name="AppTheme" parent="Theme.Sherlock.Light">
</style> 
```

如果这不起作用，请仔细检查您是否正在使用 org.holoeverywhere.app.***Activity 导入。

# javascript - 用 Jasmine 监视 console.error()

> ID：14519203
> 
> 赞同：45
> 
> 时间：2013-01-25T09:49:22.307
> 
> 标签：javascript, unit-testing, jasmine

我实际上是 JavaScript 和 Jasmine 的新手。因此，解决我的问题可能很明显，但我看不到。

我想`console.error()`在加载时检查（已经存在的）JavaScript 应用程序是否调用。我真的不知道如何用茉莉花来实现这一点。我已将 JavaScript 文件和规范文件包含在`SpecRunner.html`. 但我认为我需要以某种方式“实例化”应用程序以测试它是否在控制台上引发任何错误，对吧？

或者我应该`SpecRunner.html`仅将用于此目的的代码包含在应用程序的 HTML 代码中吗？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-01-25T22:22:23.817

你可以这样监视`console.error`：

```
beforeEach(function(){
  spyOn(console, 'error');
})

it('should print error to console', function(){
  yourApp.start();
  expect(console.error).toHaveBeenCalled();
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:09:20.457

您可以像这样覆盖标准的 console.error 函数：

```
//call the error function before it is overriden
console.error( 'foo' );

//override the error function (the immediate call function pattern is used for data hiding)
console.error = (function () {
  //save a reference to the original error function.
  var originalConsole = console.error;
  //this is the function that will be used instead of the error function
  function myError () {
    alert( 'Error is called. ' );
    //the arguments array contains the arguments that was used when console.error() was called
    originalConsole.apply( this, arguments );
  }
  //return the function which will be assigned to console.error
  return myError;
})();

//now the alert will be shown in addition to the normal functionality of the error function
console.error( 'bar' ); 
```

此解决方案适用于 Jasmin 或其他任何东西。只需将上面的代码放在其他代码之前，之后的任何调用`console.error()`都将调用被覆盖的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-19T13:50:55.810

使用 toThow 和 toThrowError [http://jasmine.github.io/edge/introduction#section-Spies:_](http://jasmine.github.io/edge/introduction#section-Spies:_)`and.throwError`

# android - Android/Facebook：项目缺少必需的库

> ID：14519205
> 
> 赞同：4
> 
> 时间：2013-01-25T09:49:41.197
> 
> 标签：android, facebook, eclipse

我已经导入了 Facebook SDK，在那里下载它：[https://github.com/facebook/facebook-android-sdk/commits/master](https://github.com/facebook/facebook-android-sdk/commits/master)并按照那里的说明进行操作[http://www.android10.org/index.php/articleslibraries/ 290-facebook-integration-in-your-android-application](http://www.android10.org/index.php/articleslibraries/290-facebook-integration-in-your-android-application)

我已将 FacebookSDK 添加为我当前项目的库。

但是当我导入 facebook 项目时，我在导入的所有示例中都有错误：“Project FacebookSDK is missing required library libs/android-support-v4.jar”作为 FacebookSDK 项目的一个错误出现然后我有“容器'Android 依赖项' 为 facebook 项目中的所有 facebook 示例项目引用不存在的库 C:...\facebook-android-sdk-master\facebook\bin\facebooksdk.jar"。

我试图清除项目，做Properties > Java Compiler > Compiler compliance level 1.6（因为需要5.0或​​6.0级别，而不是1.7，所以我下载了jdk 1.6）试图做Android Tools > Fix project properties

但我仍然有同样的错误......有人可以告诉我我应该怎么做吗？谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-25T10:08:09.300

我认为您必须配置项目的 Buildpath。按照以下建议执行此操作：

```
RightClick on your Project -> Build Path -> Configure Buildpath 
```

然后窗口将显示`Libraries`为选项卡之一。选择该选项卡。

然后单击`Add External Jars`右侧按钮列表。添加所需的罐子并选择确定。一旦清理并构建您的项目。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-09T14:20:06.237

我遇到了同样的问题，正如我在此入门[https://developers.facebook.com/docs/android/getting-started](https://developers.facebook.com/docs/android/getting-started)中所描述的那样，导入了 FacebookSDK 项目和所有示例项目。因此，作为示例编译的项目都不依赖于 facebooksdk.jar 并且 FacebookSDK 项目不会因为其他项目中的错误而构建。做这个：

1.  关闭所有示例项目
2.  只需清理并构建 FacebookSDK 项目
3.  您应该在 bin 文件夹中看到 facebooksdk.jar
4.  打开所有其他项目，清理并构建

丢失库的所有错误都应该消失

# java - 在枚举中使用 switch

> ID：14519207
> 
> 赞同：2
> 
> 时间：2013-01-25T09:49:47.247
> 
> 标签：java

如果我用`switch`in`getByIntValue()`怎么办？真的有必要使用 a`SparseArray`吗？

```
public enum Gender {
    Unknown(0),
    Male(1),
    Female(2);

    private static final SparseArray<Gender> lookupTable = new SparseArray<Gender>();
    static {
        for (final Gender gender : EnumSet.allOf(Gender.class)) {
            lookupTable.put(gender.intValue, gender);
        }
    }

    private final int intValue;

    public static Gender getByIntValue(int val) {
        return lookupTable.get(val);
    }

    private Gender(int intValue) {
        this.intValue = intValue;
    }

    public int getIntValue() {
        return intValue;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:54:53.807

由于您的 int 值从 0 到 2，没有孔，您确实可以简单地使用数组。开关也可以，尽管它可能比数组查找稍慢。但是除非你调用该方法数十亿次，否则它不会产生任何明显的差异。使用您认为最清晰、最容易理解和维护的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T09:53:42.313

如果您发布了实际`int`值，那么您不需要在每个枚举成员上显式设置它们，也不需要`switch`. 只需使用

```
Gender.values()[intValue] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-25T03:39:05.570

# `List.copyOf( EnumSet.allOf( Gender.class ) )`

[警告：正如JB Nizet 所提到的](https://stackoverflow.com/a/14519294/642706)，除了最极端的情况外，这种优化练习似乎很愚蠢。对于实际工作，我可能会推荐[Marko Topolnik 的答案](https://stackoverflow.com/a/14519272/642706)中看到的解决方案。但是，为了好玩，我在这个球上挥动了球棒。

似乎目标是通过给定的数字 0、1、2 快速访问呈现静态不可修改的集合。

[从 Java 10](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_10)开始，我们[在接口上有这些新实现的（“默认”</a>）方法](https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html)[`List`](https://docs.oracle.com/javase/10/docs/api/java/util/List.html)：`List.of`& [`List.copyOf`](https://docs.oracle.com/javase/10/docs/api/java/util/List.html#copyOf(java.util.Collection))。这些产生一个不可修改的集合。尽管支持的实现没有记录并且可能会发生变化，但我会假设它类似于具有相似性能的数组。`EnumSet`如果后备实现检测到存在并使用某种[位向量](https://en.wikipedia.org/wiki/Bit_array)，则性能甚至可能比传统数组更快。

`List`我通过传递一个`EnumSet`to 来填充[`List.copyOf( Collection )`](https://docs.oracle.com/javase/10/docs/api/java/util/List.html#copyOf(java.util.Collection))。

所以这：

```
private static final SparseArray<Gender> lookupTable = new SparseArray<Gender>();
static {
    for (final Gender gender : EnumSet.allOf(Gender.class)) {
        lookupTable.put(gender.intValue, gender);
    }
} 
```

…变成这样：

```
private static final List < Gender > lookupTable = List.copyOf( EnumSet.allOf( Gender.class ) ); 
```

整个课程，`main`用于演示。

```
package com.basilbourque.example;

import java.util.EnumSet;
import java.util.List;

public enum Gender {
    UNKNOWN( 0 ),
    MALE( 1 ),
    FEMALE( 2 );

    private static final List < Gender > lookupTable = List.copyOf( EnumSet.allOf( Gender.class ) );

    private final int intValue;

    public static Gender getByIntValue ( int val ) {
        return lookupTable.get( val );
    }

    public int getIntValue () {
        return intValue;
    }

    // Constructor
    private Gender ( int intValue ) {
        this.intValue = intValue;
    }

    public static void main ( String[] args ) {
        // Testing.
        System.out.println( Gender.UNKNOWN.intValue );
        System.out.println( Gender.getByIntValue( 0 ) );
        System.out.println( "----" );
        System.out.println( Gender.MALE.intValue );
        System.out.println( Gender.getByIntValue( 1 ) );
        System.out.println( "----" );
        System.out.println( Gender.FEMALE.intValue );
        System.out.println( Gender.getByIntValue( 2 ) );
    }

} 
```

跑的时候。

> 0
> 
> 未知
> 
> * * *
> 
> 1
> 
> 男性
> 
> * * *
> 
> 2
> 
> 女性

* * *

顺便说一句，作为生物默认，`FEMALE`应该先来`MALE`。

# mysql - MySQL全文搜索：没有结果

> ID：14519208
> 
> 赞同：1
> 
> 时间：2013-01-25T09:50:01.387
> 
> 标签：mysql, full-text-search

我将此查询用于我的表中的全文搜索：

```
SELECT Titel FROM cmsa WHERE MATCH(Titel) AGAINST ('+"Ort" +"Berlin"' IN BOOLEAN MODE) 
```

但结果是空的。

如果我使用

```
SELECT Titel FROM cmsa WHERE Titel LIKE '%Berlin%' 
```

结果将是（不带引号）：

```
"Ort - Berlin" 
```

为什么全文搜索没有找到这个结果。“Ort”一词和“Berlin”一词都在条目的标题字段中。

其他全文搜索效果很好。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:55:09.090

尝试不使用双引号并确保 Mysql 引擎是`MYISAM`

```
SELECT 
         Titel 
FROM 
         cmsa 
WHERE 
         MATCH(Titel) AGAINST ('+Ort +Berlin' IN BOOLEAN MODE) 
```

一些解释

**布尔模式搜索**

```
SELECT headline, story FROM news
WHERE MATCH (headline,story)
AGAINST ('+Hurricane -Katrina' IN BOOLEAN MODE); 
```

上述声明将与有关飓风的新闻报道匹配，但与提及卡特里娜飓风的新闻报道不匹配。

**查询扩展**

盲查询扩展（或自动相关性反馈）功能可用于扩展搜索结果。这通常包括更多的噪音，并导致非常模糊的搜索。

在大多数情况下，如果用户查询只返回几个结果，您将使用此操作，您可以使用 QUERY EXPANSION 再试一次，它会添加查询中常见的单词。

```
SELECT headline, story FROM news
WHERE MATCH (headline,story)
AGAINST ('Katrina' WITH QUERY EXPANSION); 
```

上述查询可能会返回所有有关飓风的新闻报道，而不仅仅是包含卡特里娜飓风的新闻报道。

关于 MySQL 中全文搜索的几点：

*   搜索不区分大小写
*   忽略短词，默认最小长度为 4 个字符。您可以使用变量 ft_min_word_len 和 ft_max_word_len 更改最小和最大字长

*   称为停用词的词会被忽略，您可以指定自己的停用词，但默认词包括 the, have, some - 请参阅默认停用词列表。

*   您可以通过将变量 ft_stopword_file 设置为空字符串来禁用停用词。
*   只有 MyISAM 存储引擎支持全文搜索。
*   如果一个词出现在超过 50% 的行中，那么它的权重为零。这在大型数据集上具有优势，但会使小型数据集的测试变得困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T10:27:20.280

我猜这是因为 MySQL 有一个服务器参数 -[要包含在 FULLTEXT 索引中的单词的最小长度](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_ft_min_word_len)。此参数的默认值为 4，因此您的第一个单词`Ort`不包含在此索引中。您应该更改此系统参数，重新启动服务器，然后重建所有 FULLTEXT 索引。

```
REPAIR TABLE cmsa QUICK; 
```

*   [用 MySQL 改变全文索引最小字长](http://www.electrictoolbox.com/mysql-full-text-index-word-length/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-25T10:13:10.527

您的查询对我来说非常有效。请检查您的表格是否为 MISAM，因为全文搜索仅在 myisam 引擎中工作。

# python - 如何从包含字典的字符串中获取字典键值？

> ID：14519210
> 
> 赞同：1
> 
> 时间：2013-01-25T09:50:14.710
> 
> 标签：python

我有一个包含字典的字符串：

```
data = 'IN.Tags.Share.handleCount({"count":17737,"fCnt":"17K","fCntPlusOne":"17K","url":"www.test.com\\/"});' 
```

如何获取字典元素的值`count`？（在我的情况下是 17737）

PS也许我需要`IN.Tags.Share.handleCount`在通过ie获取字典之前从字符串 中删除，`k = data.replace("IN.Tags.Share.handleCount", "")`但是删除后仍然存在问题`'()'`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:55:34.730

```
import re, ast
data = 'IN.Tags.Share.handleCount({"count":17737,"fCnt":"17K","fCntPlusOne":"17K","url":"www.test.com\/"});'
m = re.match('.*({.*})', data)
d = ast.literal_eval(m.group(1))
print d['count'] 
```

# macos - Xcode 可执行文件找不到 glsl 文件

> ID：14519211
> 
> 赞同：1
> 
> 时间：2013-01-25T09:50:18.047
> 
> 标签：macos, opengl, xcode4.5, glut

这是我第一次尝试学习OpenGL，我是按照一本书的例子来的。我正在使用 Xcode 在 OS X 10.8 下进行操作。代码如下：

```
#include "Angel.h"

const int numPoints = 5000;
typedef vec2 point2;

void init(){

    point2 points[numPoints];
    point2 vertices[3] = {
        point2(-1.0, -1.0), point2(0.0, 1.0), point2(1.0, -1.0)
    };

    points[0] = point2(0.25, 0.5);

    for (int k = 1; k < numPoints; k++) {
        int j = rand()%3;
        points[k] = (points[k-1]+vertices[j])/2.0;
    }

    GLuint program = InitShader("vertex.glsl", "fragment.glsl");
    glUseProgram(program);

    GLuint abuffer;
    glGenVertexArraysAPPLE(1, &abuffer);
    glBindVertexArrayAPPLE(abuffer);

    GLuint buffer;
    glGenBuffers(1, &buffer);
    glBindBuffer(GL_ARRAY_BUFFER, buffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(points), points, GL_STATIC_DRAW);

    GLuint location = glGetAttribLocation(program, "vPosition");
    glEnableVertexAttribArray(location);
    glVertexAttribPointer(location, 2, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));

    glClearColor(1.0, 1.0, 1.0, 1.0);

}

void display(){
    glClear(GL_COLOR_BUFFER_BIT);
    glDrawArrays(GL_POINTS, 0, numPoints);
    glFlush();
}

int main(int argc, char** argv){
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGBA);
    glutInitWindowSize(640, 480);

    glutCreateWindow("Sierpinski Gasket");

    init();
    glutDisplayFunc(display);
    glutMainLoop();

    return 0;
} 
```

它编译。但是当我尝试执行它时，窗口不会出现。`init()`当我调用该函数时，问题就出现了。没有它，窗口就会出现，但背景为黑色。有了它，就没有窗户了。代码可以在[这里](http://www.cs.unm.edu/~angel/BOOK/INTERACTIVE_COMPUTER_GRAPHICS/SIXTH_EDITION/)找到。

**更新**

显然该程序正在退出该行`GLuint program = InitShader("vertex.glsl", "fragment.glsl");`，因为它没有找到着色器文件。我怎样才能告诉程序使用这些文件？我的意思是我的`.glsl`文件与文件在同一个文件夹中`.h`，`.cpp`但是当 Xcode 构建项目时，可执行文件与文件不在同一个位置`.glsl`。如何在 Xcode 中解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:09:23.360

GLSL 文件在程序运行时加载。所以不是 XCode 没有找到文件，而是你的程序。最可能的原因是，您使用了文件的相对路径（如在您提供的代码片段中），但使用与硬编码文件位置不匹配的工作路径启动程序。通常你的程序二进制文件被构建到一个专用的构建目录中。

快速修复是将 GLSL 文件复制到与二进制文件相同的目录中。正确的解决方案是将文件放置在众所周知的位置。在 MacOS X 中，您可以为此使用应用程序包。请参阅 MacOS X 开发人员文档，了解如何将应用程序资源放入应用程序包以及如何访问它们。XCode 还提供了自动将文件复制到生成的包中的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T17:11:02.617

**按照以下步骤：**

选择左侧面板上的项目。

选择目标，然后选择`Build Phases`

在那里你应该找到一个名为的按钮`Add Build Phase`

将出现一个框，您必须在其中选择文件（有一个小`+`标志）。并确保您选择了`Destination: Products directory`

构建项目，运行它，现在它应该可以工作了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T12:10:24.980

如果 Xcode 没有导入文件，则检查它是否将其添加到资源文件夹，方法是转到文件选择器中的您的项目名称，构建阶段，复制捆绑资源并确保您的 2 个文件在那里。

# java - 在 hadoop 上运行 JNI 的 Apache Pig 无法在多个地图上加载共享对象（但仅在一个地图上运行良好）

> ID：14519215
> 
> 赞同：0
> 
> 时间：2013-01-25T09:50:29.753
> 
> 标签：java, hadoop, java-native-interface, apache-pig

所以我们编写了一个 JNI，然后我们编写了一个 UDF，以便能够从 Apache Pig 调用我们的 JNI。现在的问题是我们得到了这个错误，但只有当我们使用多张地图运行它时（只有一张地图一切正常）：

```
Native code library failed to load. java.lang.UnsatisfiedLinkError:
Can't load library: /usr/lib/libdclassjni.so 
```

我认为这与[Apache Pig 手册中的以下部分有关：](http://pig.apache.org/docs/r0.8.1/udf.html#Function+Instantiation)

> 用户遇到的一个问题是，当他们假设其 UDF 的构造函数被调用了多少次时。例如，他们可能在 store 函数中创建辅助文件，并在构造函数中创建似乎是个好主意。这种方法的问题在于，在大多数情况下，Pig 在客户端实例化函数以检查数据的模式。
> 
> 用户不应假设函数被实例化了多少次；相反，他们应该使他们的代码能够适应多个实例化。例如，他们可以在创建文件之前检查文件是否存在。

在 UDF 内部，我们有一个构造函数，它依次实例化另一个类，而那个类确实

```
System.load("/usr/lib/libdclassjni.so"). 
```

我可以保证我们在所有节点上都安装了 lidbclassjni.so。所以主要问题是为什么 Apache Pig 不能加载共享对象。而且，UDF 应该如何看待才能避免这个问题。

**TL;DR =>**

在 hadoop 上的 Apahce Pig UDF 中使用 JNI。在一张地图上工作正常，但在多张地图上我得到

> 本机代码库无法加载。java.lang.UnsatisfiedLinkError：无法加载库：/usr/lib/libdclassjni.so

感谢您对此的任何见解

更新：

固定的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:43:10.157

[已修复] 结果发现 .so 并不存在于所有 hadoop 节点上。

# functional-programming - 将类型作为一等值的语言？

> ID：14519216
> 
> 赞同：9
> 
> 时间：2013-01-25T09:50:32.660
> 
> 标签：functional-programming

有没有一种语言，即：

1) 功能性

2) 有类型推断

3）有咖喱

4) 并将类型作为一等值

也想从它编译到 JVM 和/或 CLR

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-25T21:05:05.240

F# 是函数式的，并且具有类型推断、柯里化和类型作为一等值，因为您可以通过反射在运行时剖析类型。它编译到 CLR 并且在 Mono 上运行良好。

**示例：取自我在[F#.NET Journal中的（非免费）文章](http://www.ffconsultancy.com/products/fsharp_journal/)[结构](http://fsharpnews.blogspot.co.uk/2012/09/structural-typing.html)**类型：

以下`createType`函数创建一个新的 .NET 程序集、新模块和给定名称的新公共类类型：

```
> let createType typeName =
    let name = System.Reflection.AssemblyName(Name="tmpAssembly")
    let run = System.Reflection.Emit.AssemblyBuilderAccess.Run
    let builder = System.Threading.Thread.GetDomain().DefineDynamicAssembly(name, run)
    let mdl = builder.DefineDynamicModule "tmpModule"
    let attrs = TypeAttributes.Public ||| TypeAttributes.Class
    mdl.DefineType(typeName, attrs);;
val createType : string -> TypeBuilder 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-25T23:35:44.450

我刚开始学习它，但[Coq](http://coq.inria.fr/ "考克")可能对你有用。

很可能有一个函数接受一个类型（是的原始类型，不是该类型的实例）并返回另一种类型（同样，只是类型，而不是实例）。如果您对程序的形式验证完全感兴趣，那么值得一看。

它还有一个小小的好处，就是能够将其代码转换为 Haskell/OCaml/Scheme，这样您就可以使用它们的 IO/Libraries，因为 Coq 往往缺少它们。

它具有类型推断和柯里化，但类型推断并不完美，因为该语言的类型系统远远超出（并且比标准 Milner-Hindley 类型系统更具表现力）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T03:10:57.377

看看[Scala](http://www.scala-lang.org/)，它适用于 JVM 和 .NET。这里有一些特性，包括你所寻求的 - [http://www.scala-lang.org/node/104](http://www.scala-lang.org/node/104)，查看“Scala is functional”部分、“Local Type Inference”、“Currying”和“Predefined function classOf”文章，它也有顶级类型[Any](http://www.scala-lang.org/api/current/index.html#scala.Any)，值*和*类型的模式匹配，[反映](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.reflect.package)包。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-25T09:58:03.397

首先从[维基百科类型的干扰](http://en.wikipedia.org/wiki/Type_inference)开始。这个问题的答案似乎是 Haskell 或 OCaml。

# sql - oracle中n维的曼哈顿距离

> ID：14519218
> 
> 赞同：5
> 
> 时间：2013-01-25T09:50:48.013
> 
> 标签：sql, oracle, query-optimization

我有一个大约有 500 万行的表，每行有 10 列代表 10 个维度。我希望能够在有新输入时在表中执行搜索以使用曼哈顿距离返回最近的行。距离是 abs(Ai-Aj)+abs(Bi-Bj) 的总和...问题是，目前如果我进行查询，它会对整个表进行全扫描，以计算距离每行，然后对它们进行排序以找到前 X。

有没有办法加快流程并提高查询效率？

我在网上查看了 SDO_GEOMETRY 的距离函数，但找不到超过 4 个维度的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:00:49.043

如果您要插入一个点*A*并且您想查找半径*r*附近的点（即，在任何度量上都小于*r*），您可以执行一个非常简单的查询：

```
select x1, x2, ..., xn
from   points
where  x1 between a1 - r and a1 + r
and    x2 between a2 - r and a2 + r
...
and    xn between an - r and an + r 
```

...其中*A* = `(a1, a2, ..., an)`, 找到一个界限。如果您对 的所有`x1`, ...,`xn`字段都有索引`points`，则此查询不需要完全扫描。现在，此结果*可能*包括邻域之外的点（即角落中的位），但很容易找到合适的子集：您现在可以检查此子查询中的记录，而不是检查每个点在你的桌子上。

您可能可以进一步细化这个查询，因为使用曼哈顿度量，邻域将是方形的（尽管与上面成 45 度），并且方形相对容易处理！（即使是 10 维。）然而，最终所需的更复杂的逻辑可能比优化更多的开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:55:48.237

我建议使用[基于函数的索引](http://www.dba-oracle.com/t_function_based_indexes.htm)。您需要计算此距离，因此使用基于函数的索引预先计算它。

您可能想阅读[以下问题](https://stackoverflow.com/questions/10141498/oracle-function-based-indexes)及其链接。基于函数的索引为您创建隐藏列。这个隐藏列将保存 manhanttan distance ，因此排序会更容易。

感谢@Xophmeister 的评论。基于函数的索引不会帮助您获得任意点。我不知道这里有什么 sql 函数可以帮助你。但是如果你愿意使用机器学习数据挖掘算法。

[我建议使用k-means clustering](http://docs.oracle.com/cd/B28359_01/datamine.111/b28129/clustering.htm)对 500 万行进行聚类。假设您找到了 1000 个集群中心。将此集群中心放到另一个表中。根据定义聚类，您的点将被分配到聚类中心。因此，您知道哪些点最接近该集群中心，例如集群 (1) 包含 20.000 个点，...集群 (987) 包含 10.000 个点...

您的任意点将靠近一个集群。您发现您的点最接近集群 987。运行您的 sql ，仅使用属于该集群中心的点，即 10.000 个点。

您需要在架构中添加几个表/列以使其有效。如果您的 5.000.000 行不断变化，您需要在它们发生变化时再次运行 k-means 聚类。但如果它们是相当恒定的值，则每周或每月一次聚类就足够了。

# c# - .Net Windows 应用程序中的缓存

> ID：14519221
> 
> 赞同：5
> 
> 时间：2013-01-25T09:51:02.503
> 
> 标签：c#, .net, caching

我正在一个基于 Windows 的应用程序中工作，该应用程序为每笔交易使用主数据。此主数据通常不会更改，但在某些情况下可以更改。我将此数据提取到缓存中或`DataSet`一次并将其用于将来的事务，但如果主表中的数据发生更改，我不想使用时间从数据库中提取数据。

我想创建对 a 的依赖关系，`DataTable`以便如果数据仅在那时更改，它会从数据库中获取信息。由于它是基于 Windows 的应用程序，我没有在 Windows 应用程序中找到任何对缓存的支持，我如何通过缓存或通过缓存来做到这一点`DataSet`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T10:14:36.747

> “因为它是一个基于 Windows 的应用程序，我没有在 Windows 应用程序中找到任何对缓存的支持”

这是错误的。

您可以在 Framework 4.0 中获取缓存类。它可以是基于 Windows 的应用程序或基于 Web 的。这是[文档](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)。

例子：

```
 using System.Runtime.Caching;

 private static MemoryCache cache = MemoryCache.Default; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:56:41.107

你不能使用[企业库缓存块](http://msdn.microsoft.com/en-us/library/ff649093.aspx)吗？

# asp.net - 如何在 Listview 中对一行值进行分组

> ID：14519223
> 
> 赞同：0
> 
> 时间：2013-01-25T09:51:14.527
> 
> 标签：asp.net, vb.net, linq

我有一个动态`Listview`绑定到三个具有一对多关系的不同表，即一个表行可能包含另一个表中的许多行。当我运行我的应用程序时，我得到了这个输出。 ![原始输出](../Images/4980767270d7eafa635109037482613c.png)

但是我想以这种格式获取 Listview，尽管这张图片是使用 Photshop 编辑的。

![使用 Photoshop 编辑](../Images/3baec3423633a6ac34fa2f9eb2a9715c.png)

这里是`Listview` `HTML`。

```
<asp:ListView runat="server" ID="LV_ViewQuestion" DataKeyNames="UID, Question_ID">
                <EmptyDataTemplate>
                    <table id="Table1" runat="server" style="">
                        <tr>
                            <td>No Surveys.</td>
                        </tr>
                    </table>
                </EmptyDataTemplate>
                <ItemTemplate>
                    <tr style="">
                        <td>
                            <asp:Label ID="SURVEY_TYPELabel" runat="server" Text='<%# Eval("Survey_Type")%>' />
                        </td>
                        <td>
                            <asp:Label ID="SURVEY_TITLELabel" runat="server" Text='<%# Eval("Survey_Title") %>' />
                        </td>
                        <td>
                            <asp:Label ID="Question_TextLabel" runat="server" Text='<%# Eval("Question_Text")%>' />
                        </td>
                        <td>
                            <asp:Label ID="Label2" runat="server" Text='<%# Eval("Option_Text")%>' />
                        </td>
                        <td>
                            <asp:LinkButton runat="server" ID="lb_DelQuestion" Text="Delete" CommandArgument='<%# Eval("Question_ID")%>' CommandName="XDelQuestion" CssClass="GeneralInput" />&nbsp;
                            <asp:LinkButton runat="server" ID="lb_AddMoreQuest" Text="Add Question" CommandArgument='<%# Eval("UID")%>' CommandName="XAddAnotQuestion" CssClass="GeneralInput" />&nbsp;
                            <asp:LinkButton runat="server" ID="lb_Publish" Text="Publish" CommandArgument='<%# Eval("UID")%>' CommandName="XPublishSurvey" CssClass="GeneralInput" />

                        </td>
                    </tr>
                </ItemTemplate>
                <LayoutTemplate>
                    <table id="Table2" runat="server">
                        <tr id="Tr1" runat="server">
                            <td id="Td1" runat="server">
                                <table id="itemPlaceholderContainer" runat="server" class="nobordered" style="width: 580px;">
                                    <tr id="Tr2" runat="server" style="">
                                        <th id="Th1" runat="server">Type</th>
                                        <th id="Th2" runat="server">Title</th>
                                        <th id="Th6" runat="server">Question</th>
                                        <th id="Th4" runat="server">Options</th>
                                        <th id="Th3" runat="server" style="width: 200px;">Actions</th>
                                    </tr>
                                    <tr id="itemPlaceholder" runat="server">
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr id="Tr3" runat="server">
                            <td id="Td2" runat="server" style="">
                                <asp:DataPager ID="DataPager1" runat="server">
                                    <Fields>
                                        <asp:NextPreviousPagerField ButtonType="Button" ShowFirstPageButton="True" ShowLastPageButton="True" ButtonCssClass="GeneralButton" />
                                    </Fields>
                                </asp:DataPager>
                            </td>
                        </tr>
                    </table>
                </LayoutTemplate>
            </asp:ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:03:48.107

您可以`ItemDataBound`在`ListView`. 您的代码应如下所示：

首先在你的页面中添加三个全局属性

```
 string type = string.Empty;
    string title = string.Empty;
    string question = string.Empty; 
```

然后将`OnItemDataBound`事件添加到您的列表视图

```
protected void LV_ViewQuestion_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (e.Item.ItemType == ListViewItemType.DataItem)
    {
        Label SURVEY_TYPELabel = (Label)e.Item.FindControl("SURVEY_TYPELabel");                 
        Label SURVEY_TITLELabel = (Label)e.Item.FindControl("SURVEY_TITLELabel");                 
        Label Question_TextLabel = (Label)e.Item.FindControl("Question_TextLabel");                 

        if (SURVEY_TYPELabel.Text == type && SURVEY_TITLELabel == title && 
            Question_TextLabel == question)
        {
            SURVEY_TYPELabel.Visible = false;
            SURVEY_TITLELabel.Visible = false;
            Question_TextLabel.Visible = false;          
            // Do the same for all the other control in cells you need to hide
        }
        else
        {
            type = SURVEY_TYPELabel.Text;
            title = SURVEY_TITLELabel.Text;
            question = Question_TextLabel.Text;
        }
    }

} 
```

# python - Rail Fence Cipher - 寻找更好的解决方案

> ID：14519227
> 
> 赞同：8
> 
> 时间：2013-01-25T09:51:38.500
> 
> 标签：python, algorithm, cryptography, encryption

我已经用 Python 编写了 Rail Fence Cipher。我想知道是否有更好的解决方案。

对于那些不知道什么是围栏密码的人来说，它基本上是一种以螺旋方式创建线性模式的方式编写纯文本的方法。示例 - 当“FOOBARBAZ”使用 3 键进行围栏围栏时。

```
F . . . A . . . Z . . .
. O . B . R . A . Q . X
. . O . . . B . . . U . 
```

逐行阅读上面的螺旋，密文变成了“FAZOBRAQXOBU”。阅读更多 -[铁路围栏 - 维基百科](http://en.wikipedia.org/wiki/Rail_Fence_Cipher)。

```
def cipher(s, key, graph=False) :
    down=True
    raw_out=[]
    out=''
    i=0
    for x in range(key) :
        raw_out.append({})
    for pos in range(len(s)) :
        raw_out[i][pos]=s[pos]
        if i==key-1 :
            down=False
        if i==0 :
            down=True
        if down :
            i=i+1
        else :
            i=i-1
    for p in raw_out :
        for q in p :
            out+=p[q]
    if graph :
        return raw_out
    return out

def decipher(s, key) :
    map_list=cipher(s, key, True) #CREATING JUST FOR MAPPING - WHICHth CHARACTER OF THE STRING - IS WHICHth CHARACTER OF THE CIPHER
    new={}
    out=''
    s_counter=0
    for x in map_list :
        for y in x :
            new[y]=s[s_counter]
            s_counter+=1
    for p in new :
        out+=new[p]
    return map_list 
```

我想知道是否有更好的方法可以做到这一点，因为我的程序非常昂贵，它使用了几个字典。

欢迎使用任何语言编写代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T10:46:13.180

只是为了它的见鬼......

```
def fence(lst, numrails):
    fence = [[None] * len(lst) for n in range(numrails)]
    rails = range(numrails - 1) + range(numrails - 1, 0, -1)
    for n, x in enumerate(lst):
        fence[rails[n % len(rails)]][n] = x

    if 0: # debug
        for rail in fence:
            print ''.join('.' if c is None else str(c) for c in rail)

    return [c for rail in fence for c in rail if c is not None]

def encode(text, n):
    return ''.join(fence(text, n))

def decode(text, n):
    rng = range(len(text))
    pos = fence(rng, n)
    return ''.join(text[pos.index(n)] for n in rng)

z = encode('ATTACK.AT.DAWN', 3)    
print z # ACTWTAKA.ANT.D
y = decode(z, 3)
print y # ATTACK.AT.DAWN 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T13:43:02.980

[请参阅我的博客上](http://programmingpraxis.com/2009/03/31/rail-fence-cipher/)的解释。

```
(define (waves str h)
  (define (down str)
    (if (>= h (length str))
        (list (fill h str))
        (cons (take h str) (up (drop h str)))))
  (define (up str)
    (if (>= (- h 2) (length str))
        (list (pad (fill (- h 2) str)))
        (cons (pad (take (- h 2) str)) (down (drop (- h 2) str)))))
  (define (pad str) (append (list X) (reverse str) (list X)))
  (define (fill h str) (append str (make-list (- h (length str)) X)))
  (down str))

(define (fence lox h)
  (define a (apply append (transpose (waves lox h))))
  (filter (lambda (e) (not (eq? X e))) a))

(define (encipher str h)
  (list->string (fence (string->list str) h)))

(define (decipher str h)
  (define e (fence (range (string-length str)) h))
  (define x (map list e (string->list str)))
  (define y (sort (lambda (i j) (<= (car i) (car j))) x))
  (define z (map cadr y))
  (list->string z)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-31T01:16:10.677

我最近在 Python 3 中实现了加密操作，我相信该解决方案值得分享：

```
from itertools import chain, cycle

def rail_fence(plaintext: str, n: int) -> str:
    rows = [""] * n
    zigzag = cycle(chain(range(n - 1), range(n - 1, 0, -1)))
    for i, c in zip(zigzag, plaintext):
        rows[i] += c

    return "".join(rows) 
```

例子：

```
>>> rail_fence("FOOBARBAZQUX", 3) 
'FAZOBRAQXOBU' 
```

# java - 为什么是这个版本的java？

> ID：14519228
> 
> 赞同：0
> 
> 时间：2013-01-25T09:51:38.833
> 
> 标签：java, linux, java-home

在我的 Red Hat 服务器上， java -version 输出；

```
$ java -version 
java version "1.6.0_27"
Java(TM) SE Runtime Environment (build 1.6.0_27-b07)
Java HotSpot(TM) 64-Bit Server VM (build 20.2-b06, mixed mode)
$ 
```

但是，既没有设置`PATH`, 也没有`JAVA_HOME`设置环境变量。同样，`JAVA_HOME`未在`~/.bash*`文件上设置。

为什么我的服务器在安装其他两个 Java 版本的同时使用此版本的 Java 以及如何使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T09:56:38.097

首先，JAVA_HOME 不参与其中。（JAVA_HOME 通常由包装脚本等用于*使用*Java 的应用程序......但不是由任何 Java 可执行文件本身使用。）

其次，您可能`java`通过`alternatives`程序管理的符号链接运行。（RHEL 和类似的发行版使用此实用程序允许您选择安装在同一系统上的不同版本的实用程序。）

无论哪种方式，运行以下命令将帮助您弄清楚发生了什么。

```
$ ls -l `which java` 
```

（然后跟随符号链接链，直到获得实际的可执行文件。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:54:37.107

哪个可执行文件运行取决于 PATH 变量。仔细检查一下。如果没有设置它就无法运行除非你有一些奇怪的 Linux 配置，否则它是不可能的。

如果 Java 可执行文件在当前目录中，它将由`./java`. 由于它只运行`java`在`PATH`.

# php - json 不适用于 pdo 但它适用于 mysql_ 函数

> ID：14519233
> 
> 赞同：-2
> 
> 时间：2013-01-25T09:51:47.313
> 
> 标签：php, jquery, mysql

这段代码可以 100% 工作，但是当我尝试使用`JSON`它时不会显示任何数据。

问题是我正在尝试将所有代码更改为，`PDO`因为我被告知该***`mysql_*`***功能已折旧。

```
<?php
$con = new PDO('mysql:host=localhost;dbname=adnan;charset=UTF-8','root','');
$sql= $con->query('select *  from adnan_user');
while($row =$sql->fetch()){
    echo $row['user_id'],"\n";
}
?> 
```

这是我调用的代码`json`：当我使用***`mysql_`***函数时它也可以工作，但***`pdo`***它不起作用。

```
<?php 
$con = new PDO('mysql:host=localhost;dbname=adnan;charset=UTF-8','root','');
$sql= $con->query('select *  from adnan_user');
while($row =$sql->fetch()){
    $name = $row['name'];
    $user= $row['user']; 
}
// The JSON standard MIME header.
header('Content-type: application/json');
$array = array('name'=>$name, 'user'=>$user);
echo  json_encode($array);
?> 
```

json的代码

```
<html>
    <head>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script> 
        $(document).ready(function(){
            $.getJSON('json.php', function(data) {
                $('#myJson').html('<table style="color:red"><tr><td>' + data.name + '</td><td>' + data.user + '</td></tr></table>');
            });
        });
        </script>
    </head>
    <body>
        <div id="myJson"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:21:45.333

您`DSN`的输入`new PDO(...)`是错误的，因为在 MySQL 中调用了 UTF-8 字符集`utf8`：

```
$con = new PDO('mysql:host=localhost;dbname=adnan;charset=utf8','root',''); 
```

有关更多信息，请参见此处：http: [//php.net/manual/en/mysqlinfo.concepts.charset.php](http://php.net/manual/en/mysqlinfo.concepts.charset.php)

您还应该捕获异常，以便 PDO 下次可以告诉您出了什么问题：

```
try {
    $con = new PDO(...);
} catch (PDOException $e) {
    echo 'Connection failed: ' . $e->getMessage();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:28:49.430

这将起作用，但在这种情况下，您只能从数据库中获取最后一条记录。为什么你的 sql 中有 *？如果您需要所有记录，则需要更改代码中的逻辑。

```
 <?php
  $db = new PDO('mysql:host=localhost;dbname=core', 'root', ''); 
  $db->exec("SET NAMES 'utf8' COLLATE 'utf8_general_ci'");
  $sql = "select * from adnan_user";
  $result = $db->prepare($sql);
  $result->execute();
  $array = array();
  while($row = $result->fetch()){    
    $name = $row['name'];
    $user = $row['user'];       
  }
 $array['name'] = $user;
 $array['user'] = $name;
 header('Content-type: application/json');
 echo  json_encode($array);
?> 
```

# c# - 如何在 .Net 中加密 AES/ECB/128 消息？

> ID：14519234
> 
> 赞同：4
> 
> 时间：2013-01-25T09:51:49.483
> 
> 标签：c#, encryption, aes

从该站点获取向量[http://www.inconteam.com/software-development/41-encryption/55-aes-test-vectors#aes-ecb-128](http://www.inconteam.com/software-development/41-encryption/55-aes-test-vectors#aes-ecb-128)

在 javascript (sjcl) 中具有相同的结果

```
var key = [0x2b7e1516,0x28aed2a6,0xabf71588,0x09cf4f3c];
var test  = [0x6bc1bee2,0x2e409f96,0xe93d7e11,0x7393172a];
aes = new sjcl.cipher.aes(key);
r = aes.encrypt(test);
console.log(r); 
```

但我无法在 C# 中达到它

```
 [TestMethod]
    public void EncryptIntsToInts()
    {
        Int32[] key = { unchecked((Int32)0x2b7e1516), 0x28aed2a6, unchecked((Int32)0xabf71588), 0x09cf4f3c };
        Int32[] test = { 0x6bc1bee2,0x2e409f96,unchecked((Int32)0xe93d7e11),0x7393172a };
        Int32[] answer = { 0x3ad77bb4, 0x0d7a3660, unchecked((Int32)0xa89ecaf3), 0x2466ef97 };

        var r = AES.EncryptIntsToInts(test, key.ToByteArray());

        Assert.IsTrue(r.SequenceEqual(answer));
    }

    static byte[] zeroIV = new byte[] { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };

    public static Int32[] EncryptIntsToInts(Int32[] input, byte[] key)
    {
        // Check arguments.
        if (input == null || input.Length <= 0)
            throw new ArgumentNullException("input");
        if (key == null || key.Length <= 0)
            throw new ArgumentNullException("key");

        // Declare the RijndaelManaged object
        // used to encrypt the data.
        RijndaelManaged aesAlg = null;
        byte[] bResult;
        try
        {
            aesAlg = new RijndaelManaged
                         {
                             Key = key,
                             Mode = CipherMode.ECB,
                             Padding = PaddingMode.None,
                             KeySize = 128,
                             BlockSize = 128,
                             IV = zeroIV
                         };
            ICryptoTransform encryptor = aesAlg.CreateEncryptor();

            byte[] bInput = new byte[input.Length * sizeof(int)];
            Buffer.BlockCopy(input, 0, bInput, 0, bInput.Length);

            bResult = encryptor.TransformFinalBlock(bInput, 0, input.Length);
        }
        finally
        {
            if (aesAlg != null)
                aesAlg.Clear();
        }

        int[] iResult = new int[bResult.Length / sizeof(int)];
        Buffer.BlockCopy(bResult, 0, iResult, 0, bResult.Length);
        return iResult;
    } 
```

我的错误是什么？

==================================================== ======

开始编辑

字节顺序正确的新代码，但它不起作用

```
 [TestMethod]
    public void EncryptIntsToInts()
    {
        byte[] key =     "2b7e151628aed2a6abf7158809cf4f3c".HEX2Bytes();
        byte[] test =    "6bc1bee22e409f96e93d7e117393172a".HEX2Bytes();
        byte[] answer =  "3ad77bb40d7a3660a89ecaf32466ef97".HEX2Bytes();

        RijndaelManaged aesAlg = new RijndaelManaged
        {
            Key = key,
            Mode = CipherMode.ECB,
            Padding = PaddingMode.PKCS7,
            KeySize = 128,
            BlockSize = 128,
            IV = zeroIV
        };
        ICryptoTransform encryptor = aesAlg.CreateEncryptor();

        var r = encryptor.TransformFinalBlock(test, 0, test.Length);

        Assert.IsTrue(r.SequenceEqual(answer));
    }

    public static byte[] HEX2Bytes(this string hex)
    {
        if (hex.Length%2 != 0)
        {
            throw new ArgumentException(String.Format(CultureInfo.InvariantCulture,
                                                      "The binary key cannot have an odd number of digits: {0}", hex));
        }

        byte[] HexAsBytes = new byte[hex.Length/2];
        for (int index = 0; index < HexAsBytes.Length; index++)
        {
            string byteValue = hex.Substring(index*2, 2);
            HexAsBytes[index] = byte.Parse(byteValue, NumberStyles.HexNumber, CultureInfo.InvariantCulture);
        }

        return HexAsBytes;
    }

    static byte[] zeroIV = new byte[] { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T14:38:07.140

正确的代码（只需添加一个**try** / **using**）：

```
 [TestMethod]
        public void EncryptIntsToInts()
        {    
            byte[] key =     "2b7e151628aed2a6abf7158809cf4f3c".HEX2Bytes();
            byte[] test =    "6bc1bee22e409f96e93d7e117393172a".HEX2Bytes();
            byte[] answer =  "3ad77bb40d7a3660a89ecaf32466ef97".HEX2Bytes();

            var r = AES.Encrypt(test, key);

            Assert.IsTrue(answer.SequenceEqual(r));
        }

public static byte[] Encrypt(byte[] input, byte[] key)
{
    var aesAlg = new AesManaged
                     {
                         KeySize = 128,
                         Key = key,
                         BlockSize = 128,
                         Mode = CipherMode.ECB,
                         Padding = PaddingMode.Zeros,
                         IV = new byte[] { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }
                     };

    ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV);
    return encryptor.TransformFinalBlock(input, 0, input.Length);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:01:42.160

您使用 32 位整数来定义密钥。当您将它们转换为字节时，您使用本机字节序，通常是小字节序。所以你的关键是`16157e2b a6...`而不是`2b7e1516 28...`。

首先，我不会使用`int`s 来表示键。但是如果你真的想，写一个大端转换函数。

我也强烈建议不要使用欧洲央行模式。您可以将 CBC 与 HMAC 一起使用（在加密然后 mac 构造中），或使用第三方库来实现 GCM。

# matlab - 在 MATLAB 中写入文本文件时进行格式化

> ID：14519235
> 
> 赞同：2
> 
> 时间：2013-01-25T09:51:59.557
> 
> 标签：matlab, file-io

我有一个看起来像这样的数组：

```
 cloud =

7.5059   51.4406
7.5057   51.4445
7.5048   51.4484
7.5034   51.4522
7.5014   51.4558
7.4989   51.4593
7.4958   51.4627
7.4923   51.4658
7.4884   51.4686
.
. 
```

我想要的只是将这个数组以相同的格式写入文本文件。我尝试了两者`fprintf`，`dlmwrite`但我能够产生完全相同的格式。我知道这很容易，但我只是在尝试了很多之后才问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:58:39.347

您是否研究过[字符串格式](http://www.mathworks.com/help/matlab/matlab_prog/formatting-strings.html)？

```
fid = fopen( 'myFile.txt', 'w' );
for ii=1:size(cloud,1)
    fprintf( fid, '%.5g\t%.5g\r\n', cloud(ii,1), cloud(ii,2) );
end
fclose( fid ); % do not forget to close the file :-) 
```

您是否考虑过[`save`](http://www.mathworks.com/help/matlab/ref/save.html)输入 ascii 文件？

```
save( 'myFile.txt', 'cloud', '-ascii', '-tabs' ); 
```

**编辑：**

1.  行尾问题：对于文本文件，有几种标记行尾的方法：在 Windows 上通常需要打印`\r\n`，对于 Mac 和 Linux，有时它就足够了`\r`，有时`\n`（我不确定 100% ）。因此，您可能需要对其进行一些试验，以找出最适合您的机器的方法。（感谢@Rody 在这里纠正我）

2.  准确性：格式化字符串中的数字`%.5g`决定了打印数字的准确性。同样，您可以使用它，直到您对结果感到满意为止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T10:02:34.153

## 视窗

这是一种方法：

```
fid = fopen('cloud.txt', 'w');    
fprintf(fid, '%.4f\t%.4f\r\n', cloud.');
fclose(fid) 
```

这是更易读的方式：

```
dlmwrite('cloud.txt', cloud, 'delimiter', '\t', 'precision', 4, 'newline', 'pc') 
```

## LINUX

这是一种方法：

```
fid = fopen('cloud.txt', 'w');    
fprintf(fid, '%.4f\t%.4f\n', cloud.');
fclose(fid) 
```

这是更易读的方式：

```
dlmwrite('cloud.txt', cloud, 'delimiter', '\t', 'precision', 4); 
```

# google-maps-api-3 - Google Maps API 替代路线说明

> ID：14519236
> 
> 赞同：0
> 
> 时间：2013-01-25T09:52:00.273
> 
> 标签：google-maps-api-3, routes, street-address, directions, alternate

我正在使用 Google Maps API V3 计算从给定源到指定目的地的所有可能路线。为此，我将 Destination 和 Source 作为用户的输入，并使用选项 provideRouteAlternatives: true 在请求中传递这些值。我成功地计算了不同的路线，并在我的地图上进行了标记，即显示它们。

现在我想知道是否可以命名不同的路线。通过命名路线，我的意思是为每条路线添加一个小的描述，例如街道名称等，该特定路线在从源头移动到目的地时所采用的名称。我想这样做是为了让它看起来更具交互性。例如，如果从位置 A（亚利桑那街，圣地亚哥，CA，美国）到位置 B（Fenton Parkway，圣地亚哥，CA 92108，USA）可能有 3 条路线，则不会显示 Route 1、Route 2、Route 等结果3 它应该显示街道名称，如“Texas St & Rio San Diego Dr”、“Texas St & Friar Rd”、“Friars Rd”。

我能够计算所有其他的东西，比如我的每条路线的行程距离和总行程时间，但不知道如何将此描述添加到我的每条路线。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:31:35.433

如果您提供一个，这就是面板中显示的内容：

```
Suggested routes:
Texas St and Rio San Diego Dr 2.6 mi - about 9 mins
Texas St and Friars Rd 3.3 mi - about 10 mins
Friars Rd 4.8 mi - about 11 mins 
```

[例子](http://www.geocodezip.com/v3_directions_alternatesB.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T17:07:26.630

`summary`从返回的结果中尝试使用。从[谷歌地图 API](https://developers.google.com/maps/documentation/directions/)：

> `summary`包含路线的简短文本描述，适用于命名路线并消除备选路线的歧义。

# c++ - 如何将一个向量传递给另一个向量推回？（不创建额外的变量来传递）

> ID：14519243
> 
> 赞同：0
> 
> 时间：2013-01-25T09:52:20.243
> 
> 标签：c++, stl, vector, multidimensional-array

好吧，我在问自己是否有办法直接在参数中传递向量，我的意思是，像这样：

```
int xPOS = 5, yPOS = 6, zPOS = 2;
//^this is actually a struct but 
//I simplified the code to this

std::vector <std::vector<int>>  NodePoints;
NodePoints.push_back(
    std::vector<int> {xPOS,yPOS,zPOS}
); 
```

该代码当然会出错；不允许使用类型名，并且需要一个 ')'

我会使用一个结构，但我必须将数据传递给一个抽象虚拟机，我需要在其中访问节点位置，`Array[index][index]`如下所示：

```
public GPS_WhenRouteIsCalculated(...)
{
    for(new i = 0; i < amount_of_nodes; ++i)
    {
        printf("Point(%d)=NodeID(%d), Position(X;Y;Z):{%f;%f;%f}",i,node_id_array[i],NodePosition[i][0],NodePosition[i][1],NodePosition[i][2]); 
    }
    return 1;
} 
```

当然我可以这样做：

```
std::vector <std::vector<int>>  NodePoints;//global
std::vector<int> x;//local
x.push_back(xPOS);
x.push_back(yPOS);
x.push_back(zPOS);
NodePoints.push_back(x); 
```

或这个：

```
std::vector <std::vector<int>>  NodePoints;//global
std::vector<int> x;//global
x.push_back(xPOS);
x.push_back(yPOS);
x.push_back(zPOS);
NodePoints.push_back(x);
x.clear() 
```

但后来我想知道两者中哪一个会更快/更高效/更好？或者有没有办法让我的初始代码工作（第一个片段）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:54:59.190

使用 C++11 或来自 boost 的东西（你也可以使用 simple `v.push_back({1,2,3})`，vector 将从 initializer_list 构造）。

[http://liveworkspace.org/code/m4kRJ](http://liveworkspace.org/code/m4kRJ) $0

如果你没有 C++11，你也可以使用 boost::assign。

```
#include <vector>
#include <boost/assign/list_of.hpp>

using namespace boost::assign;

int main()
{
   std::vector<std::vector<int>> v;
   v.push_back(list_of(1)(2)(3));
} 
```

[http://liveworkspace.org/code/m4kRJ](http://liveworkspace.org/code/m4kRJ) 5 美元

当然你可以使用旧变种

```
int ptr[1,2,3];
v.push_back(std::vector<int>(ptr, ptr + sizeof(ptr) / sizeof(*ptr)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:48:42.223

如果您的主要目标是避免不必要的副本，`vector<>`那么您应该如何处理它。

# C++03

将一个空向量插入嵌套向量（例如`Nodepoints`），然后在其上使用`std::swap()`or `std::vector::swap()`。

```
NodePoints.push_back(std::vector<int>());  // add an empty vector
std::swap(x, NodePoints.back()); // swaps contents of `x` and last element of `NodePoints` 
```

所以在 之后`swap()`， 的内容`x`将被转移到`NodePoints.back()`没有任何复制。

# C++11

用于`std::move()`避免额外的副本

```
NodePoints.push_back(std::move(x));  // #include<utility> 
```

这里是[解释](https://stackoverflow.com/questions/3413470/what-is-stdmove)，`std::move`这里是一个[例子](http://en.cppreference.com/w/cpp/utility/move)。

上述两种解决方案的效果都有些相似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T10:27:55.740

如果您无法访问 Boost 或 C++11，那么您可以考虑一个非常简单的基于类的解决方案。通过使用一些简单的访问控制包装一个向量以将您的三个点存储在一个类中，您可以创建所需的灵活性。首先创建类：

```
class NodePoint
{
public:
    NodePoint( int a, int b, int c )
    {
        dim_.push_back( a );
        dim_.push_back( b );
        dim_.push_back( c );
    }

    int& operator[]( size_t i ){ return dim_[i]; }

private:
    vector<int> dim_;
}; 
```

这里重要的是将向量封装为对象的聚合。`NodePoint`只能通过提供三个点来初始化。我还提供`operator[]`了允许对对象进行索引访问。它可以按如下方式使用：

```
NodePoint a(5, 6, 2);
cout << a[0] << " " << a[1] << " " << a[2] << endl; 
```

哪个打印：

```
5 6 2 
```

请注意，如果尝试访问越界索引点，这当然会抛出，但这仍然比最有可能出现段错误的固定数组好。我不认为这是一个完美的解决方案，但它应该能让你合理安全地到达你想去的地方。

# javascript - 在页面/请求中独立保留/提交语言配置？

> ID：14519245
> 
> 赞同：0
> 
> 时间：2013-01-25T09:52:24.117
> 
> 标签：javascript, request, onbeforeunload

我正在开发一个需要在不同语言之间切换并加载不同数据的网络项目。不同窗口中的页面需要记住它们的语言配置并且不影响其他页面。

我试图`languageConfig`在`beforeunload()`.

任何想法如何做到这一点或其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:09:24.513

我认为您应该使用 Session 变量来解决此问题。

# java - 我的代码有什么问题？空指针异常

> ID：14519246
> 
> 赞同：4
> 
> 时间：2013-01-25T09:52:25.717
> 
> 标签：java, nullpointerexception

下面的代码有什么问题？它会在执行时抛出 NullPointerException。

```
public class Test
{
  public String method1()
  {
    return null;
  }
  public Integer method2()
  {
    return null;
  }
  public static void main(String args[])throws Exception
  {
    Test m1 = new Test();
    Integer v1 = (m1.method1() == null) ? m1.method2() : Integer.parseInt(m1.method1());
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T09:59:47.420

a`a ? b : c`的类型是最后一个值的类型`c`。在这种情况下，它是一个`int`. 这意味着即使`b`被选中，它也会被拆箱，然后重新装箱成整数。由于值为空，因此失败。

这是一个类似的示例，可能会有所帮助（或更令人困惑）

```
Integer i = 1000;

// same as Integer j = Integer.valueOf(i == 1000 ? i.intValue() : 1000);
Integer j = i == 1000 ? i : 1000;
System.out.println(i == j);

Integer k = i == 1000 ? i : (Integer) 1000;
System.out.println(i == k); 
```

印刷

```
false
true 
```

第一个结果为假的原因是，表达式的类型为`int`（最后一个参数），这意味着`i`已拆箱为 an`int`并重新装箱，因此可以将其分配给整数。这会导致不同的对象（有命令行参数会增加缓存大小并更改它）在第二个示例中，类型是这样的`Integer`，因此它没有被取消装箱并且对象是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:59:15.583

parseInt 返回整数。这使得编译器取消装箱 m1.method2() 但它是 null 所以它抛出：

```
Integer v1 = (m1.method1() == null) ? m1.method2() : (Integer)Integer.parseInt(m1.method1()); 
```

# datetime - 正确语法组的 MySQL 服务器版本（按日期时间）

> ID：14519248
> 
> 赞同：1
> 
> 时间：2013-01-25T09:52:37.010
> 
> 标签：datetime, group-by, syntax-error, date-format

有时我一直试图解决按日期时间分组的问题，但我仍然无法解决。请就我的语法有什么问题提供一些建议？

我得到的 Sytnax 错误消息：-

**您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'DATE_FORMAT(mdatetime,'%Y-%m-%d') AS 'Date',count(*) AS 'Total Registrants' fro' 附近使用的正确语法1号线**

```
select $regdate AS 'Date',count(*) AS 'Total Registrants' from $regTable where $regdate <= '$date' group by $regdate order by $regdate DESC LIMIT 10 
```

# javascript - 为什么浏览器会修改包含 &#x 的 HTML 元素的 ID？

> ID：14519250
> 
> 赞同：1
> 
> 时间：2013-01-25T09:52:41.513
> 
> 标签：javascript, html, encoding

假设我有这个 HTML 页面：

```
<html>
  <head>
    <script type="text/javascript">
      function echoValue(){
        var e = document.getElementById("/path/&#x24;whatever");
        if(e) {
          alert(e.innerHTML);
        }
        else {
          alert("not found\n");
        }
      }
    </script>
  </head>
  <body>
    <p id="/path/&#x24;whatever">The Value</p>
    <button onclick="echoValue()">Tell me</button>
  </body>
</html> 
```

我假设浏览器将 ID 字符串`/path/&#x24;whatever`视为简单字符串。实际上，它将 转换`&#x24;`为它的呈现表示 ( `$`)。

然而，javascript 代码使用文字字符串`&#x24;`来搜索元素。所以，电话`document.getElementById`失败了，我从来没有得到这个段落的价值。

有没有办法强制浏览器按字面意思使用给定的 ID 字符串？

* * *

**编辑：**
当然我知道我不必逃避`$`. 但是会生成网页，并且生成器会进行转义。所以，我必须应付我所拥有的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T09:56:19.667

在 中`<p id="...">`，`&#x24;`序列被解释为`$`，因为它出现在属性中并被视为 HTML 实体。所有其他元素属性也是如此。

在`<script>`元素中，HTML 实体根本不被解释，所以它按字面意思显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T10:33:46.510

您可以尝试在没有 jQuery 的情况下解码 javascript 文本：

```
<html>
  <head>
    <script type="text/javascript">
      function decodeEntity(text){
        text = text.replace(/<(.*?)>/g,''); // strip out all HTML tags, to prevent possible XSS
        var div = document.createElement('div');
        div.innerHTML = text;
        return div.textContent?div.textContent:div.innerText;
      }
      function echoValue(){
        var e = document.getElementById(decodeEntity("/path/&#x24;whatever"));
        if(e) {
          alert(e.innerHTML);
        }
        else {
          alert("not found\n");
        }
      }
    </script>
  </head>
  <body>
    <p id="/path/&#x24;whatever">The Value</p>
    <button onclick="echoValue()">Tell me</button>
  </body>
</html> 
```

JSFiddle：http: [//jsfiddle.net/phTkC/](http://jsfiddle.net/phTkC/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:08:34.430

我建议您在 javascript 代码中解码 HTML 实体：

```
<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script type="text/javascript">
      function echoValue(){
        var decoded_string = $('<div />').html("/path/&#x24;whatever").text();
        var e = document.getElementById(decoded_string);
        if(e) {
          alert(e.innerHTML);
        }
        else {
          alert("not found\n");
        }
      }
    </script>
  </head>
  <body>
    <p id="/path/&#x24;whatever">The Value</p>
    <button onclick="echoValue()">Tell me</button>
  </body>
</html> 
```

# c# - 动作方法参数中的继承

> ID：14519252
> 
> 赞同：2
> 
> 时间：2013-01-25T09:52:49.217
> 
> 标签：c#, asp.net-mvc, model-binding

我有以下课程：

```
class SomethingBase 
{
    public string SharedProperty { get; set; }
}

class ChildClassOne : SomethingBase 
{
    public string SpecificPropertyOne { get; set; }
}

class ChildClassTwo : SomethingBase 
{
    public string SpecificPropertyTwo { get; set; }
} 
```

我有 ASP.NET MVC 视图，它有两个 HTML 表单。这些表单调用相同的操作方法。此操作方法应接收两个`SomethingBase`类派生项中的任何一个。但是，如果我创建像 一样的单个参数`SomethingBase param`，那么只会`SharedProperty`收到 。这种行为可以通过 ASP.NET MVC 的绑定机制来解释。

为了使我的操作方法起作用，我创建了下一个定义：

```
public ActionResult(ChildClassOne param1, ChildClassTwo param2) 
```

`SharedProperty`转到这两个参数，但仅为对象填充特定属性，该对象实际上是从视图中传递的。它有效，但我认为这不是唯一的解决方案。

是否有针对这种情况的最佳实践解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:09:22.250

您应该为每个动作创建一个视图模型，因为它们并不相同。在这种情况下，真的没有理由尝试使用基类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:40:43.677

`TryUpdateModel`类的方法`Controller`使它起作用。然而，这种方式并不优雅。

```
...
public ActionResult Save(FormCollection collection)
        {
            SomethingBase model = null;
            if (collection.AllKeys.Contains("SpecificOne"))
            {
                model = new ChildOne();
                TryUpdateModel<ChildOne>((ChildOne)model, collection);
            }
            else
            {
                model = new ChildTwo();
                TryUpdateModel<ChildTwo>((ChildTwo)model, collection);
            }
... 
```

# android - 在显示 ProgressDialog 时将元素聚焦在主视图上

> ID：14519254
> 
> 赞同：0
> 
> 时间：2013-01-25T09:52:56.880
> 
> 标签：android

我一直在寻找这个问题，但找不到解决方案；

当您创建 ProgressDialog 时，主视图变为灰色并失去焦点，我想要做的是让主视图中的元素保持焦点（比如说 Admob）并在显示 ProgressDialog 时保持它可用

更新：代码！

```
View mainview = LayoutInflater.from(MainAct).inflate(R.layout.activity_main, null);

        View adView = mainview.findViewById(R.id.adView);
        mProgress = new ProgressDialog(MainAct);
        mProgress.setMessage("Downloading...");
        mProgress.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        mProgress.setCancelable(false);
        mProgress.setCanceledOnTouchOutside(false);
        mProgress.show();
        adView.requestFocus(); 
```

似乎使用 reaquestFocus 不起作用，仅适用于表单元素，而不是将元素带到 TOP

更新 2： ![样本](../Images/9fc3baf1c9ff31db2a04d30826086928.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:29:34.317

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:orientation="vertical" >

        <LinearLayout
            android:id="@+id/linlaHeaderProgress"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:orientation="horizontal"
            android:visibility="gone" >

            <ProgressBar
                android:id="@+id/pbHeaderProgress"
                style="@style/Spinner"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="2dp" >
            </ProgressBar>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:gravity="left|center"
                android:padding="2dp"
                android:text="Loading...."
                android:textColor="#F1F1F1"
                android:textSize="20sp" >
            </TextView>
        </LinearLayout>

        <ListView
            android:id="@+id/list"
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1"
            android:cacheColorHint="@android:color/transparent"
            android:divider="#000000"
            android:dividerHeight="0dp"
            android:fadingEdge="none"
            android:persistentDrawingCache="scrolling" >
        </ListView>

        <TextView
            android:id="@android:id/empty"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:gravity="center"
            android:padding="10dp"
            android:textColor="#f1f1f1"
            android:textSize="15sp"
            android:textStyle="bold"
            android:visibility="gone" >
        </TextView>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="bottom|center"
        android:orientation="horizontal" >

        <com.google.ads.AdView
            android:id="@+id/adView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            ads:adSize="SMART_BANNER"
            ads:adUnitId="MY_AD_UNIT_ID"
            ads:loadAdOnCreate="true"
            ads:testDevices="TEST_EMULATOR, MY_TEST_DEVICE_ID" />
    </LinearLayout>

</LinearLayout> 
```

上面的代码用于几乎专门用于我自己的应用程序的布局。我在加载数据时所做的非常简单。

查看 ProgressBar 在 XML 中是如何定义的。在仍在加载数据的同时，由于设置了属性，我将其更改`LinearLayout linlaHeaderProgress`为`VISIBLE`有效地隐藏了它下面的内容。`ListView`加载完数据后，我将 的可见性更改`LinearLayout linlaHeaderProgress`为`GONE`. 这里需要注意的一点是，位于 XML 底部的 Admob XML 始终对用户可见，并且可以在数据加载/完成加载之前或之后的任何时间*进行交互。*

如果您需要以 的形式显示此 XML `Dialog`，您始终可以通过将主题附加到此活动来实现。

希望其中一些对您的努力有所帮助。

**更新**

检查这些教程。这些是我可以通过快速搜索显示`Horizontal ProgressBar`. 您正在使用`ProgressDialog`.

1.  [http://www.techrepublic.com/blog/app-builder/androids-batterymanager-and-progressbar-two-for-one-tutorial/703](http://www.techrepublic.com/blog/app-builder/androids-batterymanager-and-progressbar-two-for-one-tutorial/703)

2.  [http://theandroid.in/example-of-progressbar-in-android/](http://theandroid.in/example-of-progressbar-in-android/)

最后，使用此[Google 搜索](https://www.google.co.in/#hl=en&safe=off&tbo=d&sclient=psy-ab&q=android+activity+like+a+dialog&oq=android+activity+like+a+&gs_l=hp.3.0.0i30j0i8i30l2.77.3368.0.4423.24.16.0.7.7.0.246.2322.0j14j2.16.0.les%3B..0.0...1c.1.Kx0NpoUjm6U&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.41524429,d.bmk&fp=bd45917f4d5afbf9&biw=1440&bih=775)查看一些使活动看起来像对话框的示例。

这应该可以帮助您实现屏幕截图的建议。

# c# - 更新版本号的正则表达式

> ID：14519257
> 
> 赞同：1
> 
> 时间：2013-01-25T09:53:00.847
> 
> 标签：c#, regex

我有一个版本号，如下所示。

```
020\. 000\. 1234\. 43567 (please note the whitespace after the dot(.))
020,000,1234,43567
20.0.1234.43567
20,0,1234,43567 
```

我想要一个正则表达式，用于将最后两个点（。）之后的数字更新为例如 1298 和 45678（任何数字）

```
020\. 000\. 1298\. 43568 (please note the whitespace after the dot(.))
020,000,1298,45678
20.0.1298.45678
20,0,1298,45678 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:00:53.797

```
resultString = Regex.Replace(subjectString, 
    @"(\d+)    # any number
    ([.,]\s*)  # dot or comma, optional whitespace
    (\d+)      # etc.
    ([.,]\s*)
    \d+
    ([.,]\s*)
    \d+", 
    "$1$2$3${4}1298${5}43568", RegexOptions.IgnorePatternWhitespace); 
```

请注意`${4}`而不是，`$4`否则以下内容`1`将被解释为属于组号 ( `$41`)。

`(\d+)`还要注意和之间的区别`(\d)+`。虽然两者都 match `1234`，但第一个将捕获`1234`到括号创建的组中。第二个将仅捕获`4`，因为先前的捕获将被下一个覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:26:35.317

用 1298 和 43568 替换版本

```
var regex = new Regex(@"(?<=^(?:\d+[.,]\s*){2})\d+(?<seperator>[.,]\s*)\d+$");
regex.Replace(source, "1298${seperator}43568"); 
```

这是因为

*   `(?<=)`在匹配中不包含组，但要求它在匹配之前存在
*   `^`匹配字符串开头后跟至少一位数字
*   `(?:\d+[.,]\s*)`非捕获组，匹配至少一位后跟 a`.`或`,`后跟 0 或多个空格的数字
*   `{2}`上一场比赛应该发生两次
*   `\d+`捕获的第一部分，1 个或多个数字
*   `(?<seperator>[.,]\s*)``.`将 a或`,`后跟可选空格的分隔符放入名为的命名捕获组中`seperator`
*   `\d+`捕获一位或多位数字
*   `$`匹配字符串结尾

在替换字符串中，您只是提供替换版本并`${seperator}`用于插入原始分隔符。

如果您不介意保留分隔符，您可以这样做

```
var regex = new Regex(@"(?<=^(?:\d+[.,]\s*){2})\d+[.,]\s*\d+$");
regex.Replace(source, "1298.43568"); 
```

# exchange-server - 如何添加到 Exchange Web 服务中（日历）项目的类别属性？

> ID：14519259
> 
> 赞同：0
> 
> 时间：2013-01-25T09:53:07.533
> 
> 标签：exchange-server, exchangewebservices

下面的 SOAP 调用将更新*整个*类别列表（以前的条目将消失），但我想添加一个或多个。

```
<soapenv:Envelope [snip]>
   <soapenv:Header>
      <typ:RequestServerVersion Version="Exchange2007_SP1"/>
      <typ:MailboxCulture>en-US</typ:MailboxCulture>
   </soapenv:Header>
   <soapenv:Body>
      <mes:UpdateItem ConflictResolution="AutoResolve" SendMeetingInvitationsOrCancellations="SendToNone">
         <mes:ItemChanges>
            <typ:ItemChange>
               <typ:ItemId Id="AQMk[snip]AAAA==" ChangeKey="DwA[snip]JPV57"/>
               <typ:Updates>
                  <typ:SetItemField>
                     <typ:FieldURI FieldURI="item:Categories"/>
                     <typ:CalendarItem>
                        <typ:Categories>
                          <typ:String>TIMETELL</typ:String>
                        </typ:Categories>
                     </typ:CalendarItem>
                  </typ:SetItemField>
               </typ:Updates>
            </typ:ItemChange>
         </mes:ItemChanges>
      </mes:UpdateItem>
   </soapenv:Body>
</soapenv:Envelope> 
```

我尝试了 AppendToItemField 而不是 SetItemField，但类别不是“可附加”属性（ErrorInvalidPropertyAppend - 只有收件人、抄送、密件抄送、必需、可选、资源、正文和回复）。

有没有办法*添加*类别字符串？

Glen Scales 在[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/exchangesvrdevelopment/thread/3f57c2ae-fb97-4fca-997e-4150c0208b9b)中的回答表明我必须刷新整个类别列表，但他不确定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:10:42.707

我想要的确实是不可能的，[必须更新整个类别列表](http://social.technet.microsoft.com/Forums/sr-Latn-CS/exchangesvrdevelopment/thread/3f57c2ae-fb97-4fca-997e-4150c0208b9b)。

另请注意，“[使用类别标记联系人项目不会修改主类别列表](http://social.technet.microsoft.com/Forums/en-US/exchangesvrdevelopment/thread/8de0270f-5afc-4b90-9c1a-5a0fae33a9ab)，这是 Outlook 用来显示下拉列表的内容。如果您希望您的类别出现在下拉列表中，则必须将其添加到 MCL 。” [并且在Exchange 2007](http://social.technet.microsoft.com/Forums/en-US/exchangesvrdevelopment/thread/9177b31f-c6d3-4278-845a-008292fdf586)或[更高版本](http://social.technet.microsoft.com/Forums/en-US/exchangesvrdevelopment/thread/e5c5f072-0b5c-49ce-9db7-57f76f5e011e)
中更新 MCL 必须以不同的方式完成，[“因为主类别列表存储在邮箱中的隐藏项目中 - EWS 不允许您访问隐藏项目，因此没有真正的解决方法。但是您可以使用 Mapi、Exoledb 或 WebDAV 等任何其他 Exchange API 执行此操作。”](http://social.technet.microsoft.com/Forums/sr-Latn-CS/exchangesvrdevelopment/thread/e67602ae-fae4-4f7b-b85f-dd3ed76e6b9f)

# php - 我应该把codeigniter模型对象放到全局变量中吗

> ID：14519261
> 
> 赞同：2
> 
> 时间：2013-01-25T09:53:08.547
> 
> 标签：php, codeigniter

我只是想知道是否有人可以分享建议。我正在构建大型 Codeigniter 应用程序，并且正在考虑将一些模型对象放入`$GLOBALS`.

这样我可以做类似`global $post;`或`global $wpdb`在 Wordpress 中的事情。

这有意义吗？这是个好主意吗？在这种情况下，我应该先自动加载这些模型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:14:04.607

在使用单例模式时污染全局命名空间不是一个好主意。当您不在 CodeIgniter 超级对象中时，只需使用`$CI =& get_instance();`

你为什么要这样做呢？你想要那个的原因是什么？省略`this->`? 情况并非如此，因为您必须写入`global $post`每个文件和函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:15:01.493

你错过了面向对象编码的整个想法......如果你想重用对象，请使用依赖注入容器。

在 OO 代码中将任何内容放入全局命名空间是完全错误的。

# mysql - MySql-如何从两个不同的数据库中获取不同表的列表

> ID：14519262
> 
> 赞同：0
> 
> 时间：2013-01-25T09:53:09.903
> 
> 标签：mysql

我有两个 mysql 数据库。一个是**NEW**另一个是**OLD**。

**我需要两个数据库之间的不同表的列表**。那就是我的旧数据库有 155 个表的列表，而我的新数据库有 165 个表的列表。

我怎样才能得到十个不同表的名称？

是否有任何工具可以做到这一点，或者我们可以通过查询来做到这一点？

任何帮助将不胜感激...

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:57:43.947

你有没有尝试过：

```
SHOW TABLES IN database; 
```

或使用`information schema`：

```
select table_schema, 
table_name from information_schema.tables
where table_name = ???; 
```

根据 OP 的评论进行编辑：

> [INFORMATION_SCHEMA 数据库由使用 MEMORY 存储引擎的临时表组成。](http://dev.mysql.com/doc/refman/5.0/en/information-schema.html). INFORMATION_SCHEMA 数据库中的所有表都作为 MEMORY 存储引擎表直接存储在内存中。它们完全在 MySQL 内部，因此 .frm 机制在 mysqld 中处理。在我的回答中，我首先展示了 INFORMATION_SCHEMA.TABLES 的表格布局。它是内存中的临时表。它使用存储引擎协议进行操作。因此，当 mysqld 关闭时，所有 information_schema 表都将被删除。当 mysqld 启动时，所有 information_schema 表都被创建为 TEMPORARY 表，并为 mysql 实例中的每个表重新填充元数据。

例如，如果您按照两个命令运行，您将在 mysql**元数据**中看到所有数据库。

*   `show databases;`
*   `use information_schema;` `show tables;`

在这里，您指定 a`table_schema`以获取表名。

```
SELECT table_name from 
information_schema.tables WHERE table_schema = 'mydb'; 
```

使用连接：假设一个数据库名称是`db1`，另一个`db2`

```
SELECT table_name from 
db1.tables x
inner join 
db2.tables
on x.table_name = y.table_name
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:04:28.800

我认为你应该查询数据库`information_schema`。这是一个包含所有数据库的所有元数据的表。查询类似：

```
 SELECT * FROM `TABLES` T1
LEFT JOIN `TABLES` T2
ON T1.`TABLE_NAME` = T2.`TABLE_NAME`
WHERE T1.`TABLE_SCHEMA`='xxx'
AND T2.`TABLE_SCHEMA`='yyy'
AND T1.TABLE_CATALOG IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:44:30.110

您可以通过查询`INFORMATION_SCHEMA`（包含服务器中其他数据库信息的数据库，如表名、列名、主键列、主键名、索引等）来执行此操作，如下所示：

```
-- this gives the table names that are in the new table but not in the old table
select newTable.TABLE_NAME
from TABLES newTable
where newTable.TABLE_SCHEMA='NEW' and newTable.TABLE_NAME not in
(
    select oldTable.TABLE_NAME 
    from TABLES oldTable
    where oldTable.TABLE_SCHEMA='OLD'
) 
```

# python - 在 Python 中生成 3D 希尔伯特空间填充曲线的算法

> ID：14519267
> 
> 赞同：16
> 
> 时间：2013-01-25T09:53:26.677
> 
> 标签：python, algorithm, 3d, hilbert-curve

我想将 RGB 颜色立方体中的点映射到 Python 中的一维列表，以使颜色列表看起来不错且连续。

我相信使用 3D Hilbert 空间填充曲线将是一个很好的方法，但我已经搜索过并且没有找到非常有用的资源来解决这个问题。特别是 Wikipedia 仅提供用于生成 2D 曲线的示例代码。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T10:03:21.610

这篇论文似乎有相当的讨论： [三维希尔伯特空间填充曲线的清单](http://arxiv.org/abs/1109.2323)。

引用摘要：

> 希尔伯特的二维空间填充曲线因其在许多应用中的良好局部性而受到赞赏。但是，尚不清楚将这条曲线推广到填充高维空间的最佳方法是什么。我们认为，使希尔伯特曲线在二维上独一无二的属性，在三维结构上由 10694807 条结构不同的空间填充曲线共享。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-22T16:59:21.293

我在尝试用 javascript 做同样的事情时遇到了你的问题。我自己想通了。这是一个递归函数，它将一个立方体分成 8 个部分并旋转每个部分，以便它按顺序遍历希尔伯特曲线。参数代表立方体旋转轴的大小：s、位置：xyz 和 3 个向量。示例调用使用 256^3 立方体并假设红色、绿色、蓝色数组的长度为 256^3。

将此代码改编为 python 或其他过程语言应该很容易。

改编自这里的图片：http: [//www.math.uwaterloo.ca/~wgilbert/Research/HilbertCurve/HilbertCurve.html](http://www.math.uwaterloo.ca/~wgilbert/Research/HilbertCurve/HilbertCurve.html)

```
 function hilbertC(s, x, y, z, dx, dy, dz, dx2, dy2, dz2, dx3, dy3, dz3)
    {
        if(s==1)
        {
            red[m] = x;
            green[m] = y;
            blue[m] = z;
            m++;
        }
        else
        {
            s/=2;
            if(dx<0) x-=s*dx;
            if(dy<0) y-=s*dy;
            if(dz<0) z-=s*dz;
            if(dx2<0) x-=s*dx2;
            if(dy2<0) y-=s*dy2;
            if(dz2<0) z-=s*dz2;
            if(dx3<0) x-=s*dx3;
            if(dy3<0) y-=s*dy3;
            if(dz3<0) z-=s*dz3;
            hilbertC(s, x, y, z, dx2, dy2, dz2, dx3, dy3, dz3, dx, dy, dz);
            hilbertC(s, x+s*dx, y+s*dy, z+s*dz, dx3, dy3, dz3, dx, dy, dz, dx2, dy2, dz2);
            hilbertC(s, x+s*dx+s*dx2, y+s*dy+s*dy2, z+s*dz+s*dz2, dx3, dy3, dz3, dx, dy, dz, dx2, dy2, dz2);
            hilbertC(s, x+s*dx2, y+s*dy2, z+s*dz2, -dx, -dy, -dz, -dx2, -dy2, -dz2, dx3, dy3, dz3);
            hilbertC(s, x+s*dx2+s*dx3, y+s*dy2+s*dy3, z+s*dz2+s*dz3, -dx, -dy, -dz, -dx2, -dy2, -dz2, dx3, dy3, dz3);
            hilbertC(s, x+s*dx+s*dx2+s*dx3, y+s*dy+s*dy2+s*dy3, z+s*dz+s*dz2+s*dz3, -dx3, -dy3, -dz3, dx, dy, dz, -dx2, -dy2, -dz2);
            hilbertC(s, x+s*dx+s*dx3, y+s*dy+s*dy3, z+s*dz+s*dz3, -dx3, -dy3, -dz3, dx, dy, dz, -dx2, -dy2, -dz2);
            hilbertC(s, x+s*dx3, y+s*dy3, z+s*dz3, dx2, dy2, dz2, -dx3, -dy3, -dz3, -dx, -dy, -dz);
        }
    }
    m=0;
    hilbertC(256,0,0,0,1,0,0,0,1,0,0,0,1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-23T17:31:26.873

工程实践中经常使用的不是严格的希尔伯特（皮亚诺）曲线——它是莫顿代码。

[https://en.wikipedia.org/wiki/Z-order_curve](https://en.wikipedia.org/wiki/Z-order_curve)

更容易计算。

# mysql - 带有 LIKE 问题的 MySQL 排序规则操作

> ID：14519271
> 
> 赞同：2
> 
> 时间：2013-01-25T09:53:38.447
> 
> 标签：mysql, sql, character-encoding

我有一个整理问题。它影响了该表的 3 列，creation_date、product_id 和 lastmodified。

我已将列更改为 utf8mb4 但他们不接受。请看下文。

```
CREATE TABLE `users` (
  `id` int(32) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `creation_date` datetime DEFAULT NULL,
  `product_id` int(32) DEFAULT NULL,
  `lastmodified` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, 
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=121 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci 
```

查询：

```
select * from users u where u.name like '%philėp%'
No errors, 1 row.

select * from users u where u.creation_date like '%philėp%'
Illegal mix of collations for operation 'like' 
```

MySQL系统变量：

```
show variables like '%character_set%';
character_set_client    utf8
character_set_connection    utf8
character_set_database  utf8
character_set_filesystem    binary
character_set_results   utf8
character_set_server    utf8mb4
character_set_system    utf8 
```

当我手动强制 MySQL 转换语句中的列时，它确实有效。

```
select * from users u where CONVERT(u.creation_date USING utf8mb4) like '%philėp%'
No errors; 0 rows; 
```

它不是utf8mb4格式了吗？

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:54:43.370

这是我的理解。

**DATETIME**没有排序规则。

类似于**INT**不是因为它是一个数值

但是，如果您查询（或插入）到**DATETIME**，则您使用的是已以这种方式格式化的字符串。这意味着可以在查询中的字符串和数据库中的**DATETIME**值之间进行*隐式转换。*

 **我认为正是这种*隐式*转换导致了这里的问题。

此外，您正在使用带下划线的**creation_date**和不带下划线的**lastmodified**。这实际上应该*都带有*下划线或*两者都没有*. 它与查询没有太大区别，但有助于维护您的数据库标准。**

# bash - wget 创建许多附加文件

> ID：14519277
> 
> 赞同：1
> 
> 时间：2013-01-25T09:54:12.600
> 
> 标签：bash, shell, wget

我有一个设置 htaccess 的服务器。当我想从中下载文件时，我只需执行：

`wget -r --user="user" --password="password" -q 'http://server'`

所有文件都已下载，但在每个目录中`wget`还会创建许多其他文件`index.html?something`，我必须手动删除它们。是否可以不创建该文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:16:51.587

See the `--accept` and `--reject` options, if your version of `wget` suppors them:

> > ```
> > -A acclist --accept acclist
> > -R rejlist --reject rejlist 
> > ```
> > 
> > Specify comma-separated lists of file name suffixes or patterns to accept or reject. Note that if any of the wildcard characters, *, ?, [ or ], appear in an element of acclist or rejlist, it will be treated as a pattern, rather than a suffix.

# css - 绝对定位总是在父母的兄弟姐妹之下

> ID：14519282
> 
> 赞同：0
> 
> 时间：2013-01-25T09:54:23.067
> 
> 标签：css

我正在尝试可视化动画。我有一个奇怪的问题，绝对定位不会使我的 div 成为顶部。简单地说，我有一个容器和一系列 div 和一个孩子。

```
<div id="outer">
  <div class="inner1"> <!-- this is relative -->
    <div class="inner2"></div> <!-- this is absolute with z-index 1000  (1)-->
  </div>
  <div class="inner1"> <!-- this is relative (2) -->
    <div class="inner2"></div> <!-- this is absolute -->
  </div>
</div> 
```

为什么`(2)` 在下`(1)`

请检查小提琴以了解我的问题。

[http://jsfiddle.net/MSpVM/2/](http://jsfiddle.net/MSpVM/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:28:23.443

据我从您的小提琴中可以看出，您实际上并没有`.inner2`绝对定位，并且您目前正在使用左边距向右移动它。

如果添加`position: absolute`到 CSS 规则中`.inner2`这似乎可以解决问题。

你可能也有兴趣阅读这篇关于[CSS 转换/转换性能](http://css-tricks.com/tale-of-animation-performance/)的文章（我注意到你使用 CSS 来转换`.inner2`元素）

# java - 使用 ireport 生成 Excel 文件的密码保护

> ID：14519290
> 
> 赞同：1
> 
> 时间：2013-01-25T09:54:42.793
> 
> 标签：java, jsp, servlets, jasper-reports, ireport

我想使用带有密码保护的 ireport v3.7 生成 excel 报告。但我不能这样做。根据一些博客，他们说“JRXlsExporterParameter.PASSWORD”设置了 excel 报告的密码，但“JRXlsExporterParameter.PASSWORD”设置了保护单元格而不是文件的密码。

帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:35:12.437

Excel 提供了多个级别的保护。从通过密码保护文档到防止添加/删除工作表或更改窗口大小。我不相信 JasperReports 3.7 或更高版本中的任何一个都是可行的，所以我会将其记录为 Jaspersoft 社区中的错误。

# iphone - 安装在越狱 ipad 上的签名 .ipa 会过期吗？

> ID：14519292
> 
> 赞同：3
> 
> 时间：2013-01-25T09:54:46.863
> 
> 标签：iphone, jailbreak

我在越狱 ipad 上安装了一个签名的 ipa 文件，发现配置文件将在一年后到期。这是一个越狱设备。这个ipa会在ipad上一年到期吗？或者我应该在一年后提供另一个有效的配置文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:38:36.757

我的疯狂猜测它会过期。

根据我对越狱程序的理解，越狱所做的一件事就是禁用签名检查（无论配置文件是由 Apple 还是其他机构签名）。我不认为他们会绕过其他保护机制（他们为什么要关心，如果他们可以创建将在 100 年内到期的配置文件）。

然而，所有这些都是猜测。而且，它取决于越狱本身（不同iOS版本的不同越狱应用程序可能会禁用不同的保护机制）。

# c# - C#中两个对象的相等比较

> ID：14519293
> 
> 赞同：3
> 
> 时间：2013-01-25T09:54:50.703
> 
> 标签：c#, equality

这是一个基础类型的问题，请原谅我如此业余。

情况1：

```
Employee _emp1 = new Employee();
Employee _emp2 = _emp1;
_emp1.Equals(_emp2) ==> RETURNS a True !! 
```

案例2：

```
Employee _emp1 = new Employee();
Employee _emp2 = new Employee();
_emp1.Equals(_emp2) ==> RETURNS a False !! 
```

你能从内存映射和分配角度解释一下上述比较方法和原因吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T09:57:39.957

简单来说，默认比较器比较对象实例。

*   在您的第一个示例中，两者`_emp1`和`_emp2`都指向相同的实例，`Employee`因此`Equals`返回 true。

*   在第二个示例中，您创建了两个`Employee`对象，`_emp1`并且`_emp2`是两个截然不同的对象。因此，`Equals`返回 false。

* * *

请注意，复制构造函数*不会为引用类型隐式调用*。你要这样做：

```
Employee _emp1 = new Employee();
Employee _emp2 = new Employee(_emp1); //or _emp1.Clone() if that is implemented 
```

然后`Equals`使用默认比较器将返回 false，因为它们是两个唯一的对象。

另请注意，对于值类型，此行为是*不同的。*

* * *

此外，如果您（如您所愿）覆盖 and 的默认行为`Equals`，`CompareTo`则上述所有内容都没有实际意义。标准技术可能是（假设一点）：

```
public bool Equals(object rhs)
{
    var rhsEmployee = rhs as Employee;
    if(rhsEmployee == null) return false;

    return this.Equals(rhsEmployee);
}

public bool Equals(Employee rhs)
{
     return this.EmployeeId == rhs.EmployeeId;
} 
```

* * *

进一步阅读：

*   [`Object.Equals`](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)
*   [`Object.ReferenceEquals`](http://msdn.microsoft.com/en-us/library/system.object.referenceequals.aspx)
*   [值类型和引用类型](http://msdn.microsoft.com/en-us/library/t63sy5hs%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T10:06:55.933

```
Employee _emp1 = new Employee(); 
```

每次你有`new Employee()`你在堆和堆栈中分配的新内存。

表示 _emp1 是内存中指向堆的值，例如 1212。

现在你有第二个声明

```
Employee _emp2 = new Employee(); 
```

因此，新值 _emp2 在堆中再次说 1414。

这就是 _emp1.Equals(_emp2) 在这里返回 false 的原因。

当你说

```
_emp1 = _emp2 
```

您在两者中分配相同的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T09:57:10.217

“这个苹果是乔的，这个梨是同一个人的，这个苹果的主人和这个梨的主人是同一个人吗？是的。”

“这个苹果是苏珊的，这个梨是苏珊的，这个苹果的主人和这个梨的主人是同一个人吗？不，他们恰好都叫苏珊。”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T09:57:18.617

您应该创建自己的`Equals`方法。默认`Equals`是从`Object`类中调用的，基本上就是检查这两个引用是否指向一个对象（即被`Object.ReferenceEqual(object, object)`调用）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T10:00:27.107

`Employee`, 没有实现它自己的`.Equals()`方法，然后它正在使用`Object.Equals()`，它只是比较引用。在情况 1 中，您的两个参考在分配时是相等的。

如果你想`Employee`通过它们的内部属性来比较对象，你应该实现你自己的`.Equals()`方法，如果所有这些属性值都匹配，则返回 true，否则返回 false。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-25T10:00:39.353

没有办法等同于员工的两个单独实例，您需要一种等同于它们是否相等的方法，因为它们是单独的实例。在第一种情况下，实例是相同`_emp2`的，`_emp1`您可以通过实现`IEquatable<T>`接口来做到这一点。

```
public class Employee : IEquatable<Employee>
{
  public int Id { get; set; }

  public bool Equals(Employee other)
  {
    return other.Id == Id;
  } 
} 
```

然后你可以这样做

```
Employee e = new Employee() { Id = 1 };
Employee e2 = new Employee() { Id = 1 };
//Returns true
bool b = e.Equals(e2); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-25T10:09:24.640

当您编写时，`Employee _emp1`您正在分配内存，该内存用于存储指向另一块内存的指针，该内存将包含 Employee 的实例。

`new Employee();`分配一块新的内存，用 Employee 的实例填充它，并返回该内存的地址（指针）。比如说，1234567。所以在 Executing 之后`Employee _emp1 = new Employee();`，你有`_emp1`等于 1234567，并且 1234567 指向的内存包含你的 Employee。

然后执行`Employee _emp2 = _emp1;`，结果是另一块内存能够包含一个地址，该地址包含一个 Employee ( `_emp2`) 的实例，也等于 1234567。这意味着当您执行时`_emp1.Equals(_emp2)`结果为真，因为您的两个 var 都指向同一块内存。

在第二种情况下，创建另一个 Employee 实例并将其放入不同的内存块（例如，7654321 之类的东西），这个地址被分配给`_emp2`它，因此不同于`_emp1`.

# apache - mod_rewrite 无法保护 grails 应用程序

> ID：14519295
> 
> 赞同：3
> 
> 时间：2013-01-25T09:54:57.467
> 
> 标签：apache, tomcat, grails, mod-rewrite, mod-proxy

我有一个在 tomcat 上运行的 grails 应用程序，我正在使用 mod_proxy 将 http 服务器与它连接。我的目标是保护登录过程。

我强制使用 https 的 VirtualHost 配置是：

```
ProxyPass /myapp/ http://127.0.0.1:8080/myapp
ProxyPassReverse /myapp/ http://127.0.0.1:8080/myapp

RewriteEngine On
RewriteCond %{HTTPS} !=on
RewriteRule ^(myapp/login) https://%{HTTP_HOST}:443/$1 [NC,R=301,L] 
```

当我去[https://mydomain.com/myapp/adm](https://mydomain.com/myapp/adm) - 这需要身份验证 - 它重定向到[http://mydomain.com/myapp/login/auth;jsessionid=yyyyyy](http://mydomain.com/myapp/login/auth;jsessionid=yyyyyy)，没有安全所以重写不起作用（如果我用 https 手动替换 http，它工作正常）。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:57:38.357

你打错了，你想要这个：

```
RewriteRule ^/myapp/login https://%{HTTP_HOST}%{REQUEST_URI} [NC,R=301,L] 
```

您当前的 RewriteRule 永远无法匹配

我也怀疑有这个意义

```
RewriteCond %{THE_REQUEST} ^[A-Z]+\s/myapp/login [NC] 
```

这只会复制您在 RewriteRule 中想要的 ^/myapp/login。因此，尽管它起作用，但它没有任何作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:46:37.387

> 当我去[https://mydomain.com/myapp/adm](https://mydomain.com/myapp/adm) - 这需要身份验证 - 它重定向到 [http://mydomain.com/myapp/login/auth;jsessionid=yyyyyy](http://mydomain.com/myapp/login/auth;jsessionid=yyyyyy)，

看起来 Spring 安全执行重定向到 /login/auth。Burt Beckwith[在这里](https://stackoverflow.com/a/3885498/1254417)提到 spring security 不需要 grails.serverURL。它应该使用 request.getServerName() 基本上 grails.serverURL 已用于 createLink[方法](https://stackoverflow.com/a/9366263/1254417)

我会建议：

1.  尝试在 grails.serverURL 中使用 https 用于生产环境
2.  设置应用程序上下文（如果第 1 项）没有帮助）：

    grails.app.context="/myapp"

**更新**

只是为了隔离和更好地了解问题出在哪里：

您能否使用 https 运行 grails（在开发环境中）并检查一切是否正常：

```
grails run-app -https 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T18:27:56.167

在同时允许 http 和 https 的设置中，将单独的 Connector 元素添加到 tomcat 的 conf/server.xml 文件中：

```
<Connector port="8081" protocol="HTTP/1.1" 
           connectionTimeout="20000" 
           redirectPort="8443"  URIEncoding="UTF-8"
           scheme="https" secure="true" proxyName="somehostname.domain" proxyPort="443" /> 
```

如果只允许 https，您可以将 scheme、secure、proxyName 和 proxyPort 属性添加到现有的 Connector 元素。

在 apache 配置中，使用额外属性将 *:443 虚拟主机代理到连接器。普通的 http *:80 可以连接到原始的连接器。

更多信息： http: [//tomcat.apache.org/tomcat-7.0-doc/config/http.html#Proxy_Support](http://tomcat.apache.org/tomcat-7.0-doc/config/http.html#Proxy_Support) [http://tomcat.apache.org/tomcat-7.0-doc/proxy-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/proxy-howto.html)

# ruby - Prettyprint a ruby hash to erlang term format

> ID：14519297
> 
> 赞同：0
> 
> 时间：2013-01-25T09:55:05.003
> 
> 标签：ruby, erlang, chef-infra

我正在尝试为一个 erlang 应用程序 (rabbitmq) 编写一个配置文件，其 conf si 写为一个 erlang term [1](http://www.rabbitmq.com/configure.html#configuration-file)。

我的属性是一个 ruby​​ 哈希，你知道我如何将这个哈希转换为一个漂亮的印刷 erlang 术语吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:33:24.660

如果我必须自己做这件事，也许是这样的：

```
def to_erl(o)
  case o
  when Hash
    '[' +
       o.map {|(k,v)|
        "{#{k}, #{to_erl v}}"
       }.join(",\n") +
     ']'
  when Array
    '[' + o.map{|v| to_erl(v)}.join(",")  +']'
  when TrueClass then "true"
  when FalseClass then "false"
  when Integer then o.to_s
  when String then o
  when Symbol then o.to_s
  # ... and whatever else you can think of
  else
    raise "Don't know how to erlify #{o}"
  end
end 
```

...但是我敢打赌，您可以从一些必须在 ruby​​ 和 erlang 之间序列化的开源项目中窃取一些不错的代码。

对于序列化`erlang`，BERT 是事实上的（二进制 Erlang 术语）。似乎有很多从 Ruby 哈希到 BERT 的库。还没有看到一个给你简单的文本 erlang 术语的。

因为这是一个厨师食谱，所以在收敛时不要弄乱太多的 ruby​​ 依赖项是个好主意。您将调用`#to_hash` 您的厨师属性，并且您将得到的内容将非常简单（没有对象，我猜只有数字/布尔值/字符串/数组和哈希）来管理一些自制代码。

# nhibernate - NHibernate 二级缓存和网络农场

> ID：14519304
> 
> 赞同：1
> 
> 时间：2013-01-25T09:55:09.377
> 
> 标签：nhibernate

摘自[http://nhibernate.hibernatingrhinos.com/28/first-and-second-level-caching-in-nhibernate](http://nhibernate.hibernatingrhinos.com/28/first-and-second-level-caching-in-nhibernate)

“二级缓存的生命周期与会话工厂而不是单个会话相关联。一旦实体通过其唯一 ID 加载并且二级缓存处于活动状态，则该实体可用于所有其他会话（相同的会话工厂）”

如果上述情况属实并且您有一个网络农场，我*认为*以下情况属实

1）每个应用程序（在我的情况下为每个 Web 服务器）将有一个 SessionFactory 2）每个 Web 服务器将有一个不同的二级缓存 3）加载到服务器 A 的二级缓存的数据不能被服务器 B 使用

我对么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:28:13.353

如文章中所述，您在 NHibernate 中提到了[一级和二级缓存](http://nhibernate.hibernatingrhinos.com/28/first-and-second-level-caching-in-nhibernate)：

> NHibernate 是作为企业级 OR/M 产品设计的，因此对在 Web Farm 场景中运行有很好的支持。这种支持包括与分布式缓存一起运行，包括即时场范围的更新。NHibernate 竭尽全力确保这些场景中的缓存一致性......

如果使用分布式缓存，所有服务器都会立即更新（例如丢弃陈旧数据）

也可以看看：

*   [https://stackoverflow.com/a/6587493/1679310](https://stackoverflow.com/a/6587493/1679310)

# haskell - Haskell 中的函数类型

> ID：14519306
> 
> 赞同：0
> 
> 时间：2013-01-25T09:55:13.513
> 
> 标签：haskell, io

我是 Haskell 的新手。我想要一个函数，在其中我从用户那里获得一个 Int 值

```
putStr "Please Enter Your Number : "
submit_ans<- getLine 
```

然后在一系列计算之后返回另一个 Int ，它将被另一个调用它的函数使用。所描述功能的类型是什么？我应该在最后使用返回函数吗？

## 提前致谢！

更新#1

好的，我更新了如下功能：

```
myFunction ::  Int -> IO Int 
myFunction action = do

      putStr "\tPlease Enter Your Number : "            
      submit_ans <- getLine 

      if action == 1
        then do 
       myFunctionII read submit_ans  
        else do
       putStrLn("\n") 
```

它给了我这个错误：

```
*** Term           : myFunction 
*** Type           : Int -> IO Int
*** Does not match : IO a 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T13:12:56.993

`putStrLn`有类型`String -> IO ()`，似乎`myFunctionII`有类型`Int -> IO ()`，所以类型`myFunction`应该是`Int -> IO ()`因为你的两个分支都`if`返回一个`IO ()`：

```
myFunction :: Int -> IO ()
myFunction action = do
  putStr "\tPlease Enter Your Number : "
  submit_ans <- getLine

  if action == 1
     then myFunctionII (read submit_ans)
     else putStrLn "\n" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T10:39:07.177

只需将您的函数编写`g`为 类型的纯计算即可`Int -> Int`。然后你在 IO monad 中使用它作为

```
...
putStr "Please Enter Your Number : "
submit_ans <- getLine
let i = g (read submit_ans)
...
print i 
```

编辑：任何 Haskell 值都是纯的。函数是纯的。`IO x`是一个纯 Haskell 值。但它*描述*了一个不纯的计算，*它将*由系统运行（例如，当你编译的应用程序运行时）。作为*其*执行的一部分，它将执行您的纯函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T10:05:56.820

由于您正在执行 IO 操作并且您正在返回 an`Int`所以我最好的猜测是`IO Int`，但我无法确定，因为您的问题太模糊而无法清楚地回答。

# azure - 北欧 Azure 网站的性能问题

> ID：14519310
> 
> 赞同：0
> 
> 时间：2013-01-25T09:55:19.253
> 
> 标签：azure, azure-web-app-service

我目前在 Azure 网站（北欧地区）中运行了一些站点，在过去 12 个小时左右的时间里，我注意到一些非常糟糕的性能，现在有人看到同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:57:41.987

Azure 服务仪表板中没有记录服务降级或中断的任何内容。也许您可以[在此处](http://www.windowsazure.com/en-us/support/contact/)向 Azure 提出支持票，看看有什么问题……

# c# - 如何将 asp.net ajax 工具箱自动完成中的选定值添加到标签？

> ID：14519311
> 
> 赞同：2
> 
> 时间：2013-01-25T09:55:31.040
> 
> 标签：c#, asp.net, autocomplete, ajaxcontroltoolkit

我使用以下 asp.net 和 C# 代码使 Ajax 工具包自动完成功能正常工作。

```
<form id="form1" runat="server">
    <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </asp:ToolkitScriptManager> 
    <div>
        Search our Languages: <asp:TextBox ID="txtLanguage" runat="server"></asp:TextBox>

        <asp:AutoCompleteExtender ID="AutoCompleteExtender1" runat="server" 
            TargetControlID="txtLanguage" MinimumPrefixLength="1" 
            ServiceMethod="GetCompletionList" UseContextKey="True">
        </asp:AutoCompleteExtender>
        <br />
        <br />
        <asp:Button ID="btnAddSelected" runat="server" Text="Add to chosen Languages >" 
            onclick="btnAddSelected_Click" />
        <br />
        <br />
        <asp:Label ID="lblSelectedLanguages" runat="server" Text=""></asp:Label>
    </div>
</form> 
```

这是我的 C# 代码隐藏：

```
[System.Web.Services.WebMethodAttribute(), System.Web.Script.Services.ScriptMethodAttribute()]
public static string[] GetCompletionList(string prefixText, int count, string contextKey)
{
    // Create array of languages. 
    string[] languages = { "Afrikaans", "Albanian", "Amharic", "Arabic", "Azerbaijani", "Basque", "Belarusian", "Bengali", "Bosnian", "Bulgarian" };

    // Return matching languages. 
    return (from l in languages where l.StartsWith(prefixText, StringComparison.CurrentCultureIgnoreCase) select l).Take(count).ToArray();
}

protected void btnAddSelected_Click(object sender, EventArgs e)
{
    lblSelectedLanguages.Text += txtLanguage.Text += ", ";
} 
```

单击按钮时，选定的语言会添加到标签中，但是我想删除按钮，并使用 Ajax 工具包的部分回发自动将自动完成中的选定项目添加到标签中。

有人可以建议我如何实现这一目标吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T14:44:23.830

1.  处理`OnClientItemSelected`AutoCompleteExtender 控件以运行 javascript 函数
2.  所有 javascript 所做的只是在进行选择时触发 TextChanged 事件（适用于 Enter 和左键单击）

**ASPX：**

```
<head runat="server">
    <title></title>
    <script type="text/javascript">
        function ItemSelected(sender, args) {
            __doPostBack(sender.get_element().name, "");
        }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </asp:ToolkitScriptManager>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            Search our Languages:&nbsp;
            <asp:TextBox ID="txtLanguage" autocomplete="off" runat="server" OnTextChanged="TextChanged" />
            <asp:AutoCompleteExtender OnClientItemSelected="ItemSelected" ID="AutoCompleteExtender1"
                runat="server" TargetControlID="txtLanguage" MinimumPrefixLength="1" ServiceMethod="GetCompletionList"
                UseContextKey="True">
            </asp:AutoCompleteExtender>
            <br />
            <asp:Label ID="lblSelectedLanguages" runat="server"></asp:Label>
        </ContentTemplate>
    </asp:UpdatePanel>
    </form>
</body> 
```

**后面的代码：**

```
protected void TextChanged(object sender, EventArgs e)
{
    lblSelectedLanguages.Text += txtLanguage.Text += ", ";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T14:32:57.787

看起来您只需要挂钩文本框的 on text changed 事件，然后将您的逻辑放入代码 benind.Something 像这样

标记

```
<asp:TextBox ID="txtLanguage" OnTextChanged="txtLanguage_textChanged" AutoPostback="true" /> 
```

然后在你的代码后面

```
 protected void txtLanguage_textChanged(object sender, EventArgs e)
  {
      //use  the retrieved text the way you like
       lblSelectedLanguages.Text =txtLanguage.Text;
   } 
```

希望这会有所帮助。我还建议您尝试查看 JQuery 自动完成小部件。它给我带来了纯粹的快乐，我确实确实与自动完成扩展器离婚了。 [jQuery自动完成](http://jqueryui.com/autocomplete/)

# bash - 根据变量内容将文件拆分为多个

> ID：14519312
> 
> 赞同：1
> 
> 时间：2013-01-25T09:55:31.490
> 
> 标签：bash, awk, split, grep

我想根据文件的内容拆分文件。
我的虚拟文件如下所示：

```
info   info    info    cat
info   info    info    cow
info   info    info    dog
info   info    info    dinosaur 
info   info    info    bat 
```

$4 个单词以不同的字母 (C,D,B) 开头 - 我想根据 $4 的第一个字母将文件拆分为多个。
首选输出（3 个不同的文件）如下所示：

文件_c

```
info   info    info    cat  
info   info    info    cow 
```

文件_d

```
info   info    info    dog
info   info    info    dinosaur 
```

文件_b

```
info   info    info    bat 
```

希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T10:16:11.597

this oneliner should work:

```
awk '{print $0 > "file_"substr($4,0,1)}' yourfile 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T10:15:05.203

```
awk '{name="file_"substr($4,0,1);print >name}' your_file 
```

测试如下：

```
> cat temp
info   info    info    cat
info   info    info    cow
info   info    info    dog
info   info    info    dinosaur 
info   info    info    bat
> awk '{name="file_"substr($4,0,1);print >name}' temp
> cat file_b
info   info    info    bat
> cat file_c
info   info    info    cat
info   info    info    cow
> cat file_d
info   info    info    dog
info   info    info    dinosaur 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T10:03:05.587

```
$ while read a b c d; do echo $a $b $c $d >> file_${d:0:1}; done < dummy.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-26T09:07:08.343

使用 Python

```
with open("temp.txt","r") as f:
     for line in f.readlines():
        col = line.split()[3][0]
        filename = "file_"+col
        f2 = open(filename,"a")
        f2.write(line)
f2.close() 
```

# android - 无法在 Android 上链接 freetype.a

> ID：14519313
> 
> 赞同：1
> 
> 时间：2013-01-25T09:55:34.000
> 
> 标签：android, android-ndk, freetype

我尝试在 cocos2d-x 的项目中使用 freetype lib。我构建了 freetype 并添加到项目中（比如这里[http://en.wikibooks.org/wiki/OpenGL_Programming/Installation/Android_NDK#FreeType](http://en.wikibooks.org/wiki/OpenGL_Programming/Installation/Android_NDK#FreeType)）。在 xcode 中，它构建时没有错误。现在我试图在android上使用它。我在freetype dir中制作了文件：

```
LOCAL_PATH:= $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := freetype
LOCAL_SRC_FILES := lib/libfreetype.a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include $(LOCAL_PATH)/include/freetype2

include $(PREBUILT_STATIC_LIBRARY) 
```

并添加到主makefile

```
LOCAL_STATIC_LIBRARIES := freetype curl_static_prebuilt
...
$(call import-module,freetype) 
```

链接期间出现错误：**libfreetype.a：文件格式无法识别；视为链接描述文件**

> 预建：libfreetype.a <= /Users/user/Development/Slots/Slots_Android/lib/freetype/lib/ SharedLibrary：libgame.so /Users/user/Development/android_ndk_r8b/toolchains/arm-linux-androideabi-4.6/prebuilt/ darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6.x-google/../../../../arm-linux-androideabi/bin/ld:./obj /local/armeabi/libfreetype.a：文件格式无法识别；视为链接器脚本 /Users/user/Development/android_ndk_r8b/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/../lib/gcc/arm-linux-androideabi/4.6.x-google/ ../../../../arm-linux-androideabi/bin/ld:./obj/local/armeabi/libfreetype.a:1：语法错误collect2：ld返回1退出状态

如何解决？

# node.js - node.js快递库的简单代码不起作用

> ID：14519317
> 
> 赞同：1
> 
> 时间：2013-01-25T09:55:40.453
> 
> 标签：node.js, express

```
var express = require('express');
var app = express.createServer();
app.listen(8000);
var tweets = [];
app.get('/', function(req,res){
res.send('Welcome to Node Twitter');
});
app.post('/send', express.bodyParser(), function(req,res){
if(req.body && req.body.tweet) {
    tweets.push (req.body.tweet)    
}
}) 
```

这个简单的代码不起作用。显示分段错误.. express 版本：2.3.10 node.js 版本：0.4.2

.我不能在其他版本中工作。只需要在这些方面工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T02:49:17.770

你应该使用：

```
app.use(express.bodyParser()); 
```

然后像这样写你的帖子：

```
app.post('/send', function(req,res){
  if(req.body && req.body.tweet) {
    tweets.push (req.body.tweet)    
  }
}); 
```

# php - PHP：如何使用与一组坐标的距离来创建地理围栏（边界框）

> ID：14519322
> 
> 赞同：3
> 
> 时间：2013-01-25T09:55:47.503
> 
> 标签：php, latitude-longitude, geofencing, coords

我将如何使用纬度和经度以及距离创建地理围栏（边界框）的点。

我有中心点的纬度和经度，我有地理围栏距离。

围绕这些多个点创建地理围栏的逻辑是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T11:23:03.483

如果您有一个纬度/经度点和一个距离，并且您想找到其他纬度/经度点，这称为方位范围问题。请参阅网站[http://www.movable-type.co.uk/scripts/latlong.html上的](http://www.movable-type.co.uk/scripts/latlong.html)**目标点给定距离和方位角部分**

如果您希望盒子（围栏）平行于赤道，那么盒子东北角的方位角将为 45 度（在使用方程式之前不要忘记转换为弧度）。然后加 90 度得到下一个角点，直到完成所有 4 个点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T23:51:22.397

1 以米为单位将中心 lat / lon 转换为笛卡尔 (x,y)。
然后你做你在学校学到的所有几何：

2 创建正方形的一个角点，使用极坐标公式

```
phi = 45 * TO_RADIANS;
corner.x = tcenter.x + r * sin(phi);
corner.y = tcenter.y + r * cos(phi); 
```

其中 r 是边界框正方形的半对角线的长度（以米为单位）

使用 phi =(90*i + 45), i= 0..3 对其他点执行相同操作

3 使用逆变换将角 (x/y) 转换回纬度/经度

# uibezierpath - 两条 CGpaths - 1 CAAnimation - 但应该重复第二条路径

> ID：14519324
> 
> 赞同：0
> 
> 时间：2013-01-25T09:56:01.123
> 
> 标签：uibezierpath, caanimation, cakeyframeanimation

如果我有一条从屏幕顶部开始并逐渐向下变成椭圆形的路径。我想一次在椭圆形的动画中不断重复椭圆形。如何使用 CAKeyframeAnimations 执行此操作？我有两个并延迟第二个吗？我是否要等待第一个完成然后添加第二个？还是有其他方法？

这是我的路径

```
//The oval shape
UIBezierPath *trackPath = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(20, 100, 280, 150)];

//the curve from the top of the screen easing into the oval.
[trackPath moveToPoint:P(160, -80)];
[trackPath addCurveToPoint:P(297, 192)
    controlPoint1:P(244, 30)
    controlPoint2:P(316, 145)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:42:50.393

所以我对自己说：“自我......看起来你将不得不自己回答这个问题，因为没有人想编辑它或说它是重复的......”

一个答案似乎是用第一条路径创建动画。当这个动画完成后，使用 CAAnimation 的委托方法知道这一点，然后使用新路径开始第二个动画。第二个当然会重复。

# c++ - 在字符串中查找单个字符

> ID：14519330
> 
> 赞同：-4
> 
> 时间：2013-01-25T09:56:12.753
> 
> 标签：c++

我有一个包含“0123456789？”的字符串。我想

```
- if first char is not ' ' or '?' and the rest is " ", return the first char
- if last char is not ' ' or '?' and the rest is " ", return the last char
- if the string is only " ", return -1
- and else, return -2 
```

我找到了几个解决方案，但没有一个在速度和良好的编码方面让我满意。谁能想到一个漂亮而优雅的解决方案，可以分享给我吗？！

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:11:44.230

这看起来像你通常的`if ... else if ... ... else ...` 链条。一些可能有帮助的功能：

*   `std::string::front()`并`std::string::back()`获取第一个或最后一个字符，

*   `std::find_if`检查空白。如果此函数返回结束迭代器，则未找到该值。

如果你可以使用 C++11（如果你是学生，你可能可以；如果你在工业界工作，你可能不能。），最优雅的解决方案`std::find_if`可能是 lambda。所以：除了第一个字符之外的所有字符串都是空格：

```
std::find_if(
    s.begin() + 1,
    s.end(),
    []( char ch ) { return ! isspace( static_cast<unsigned char>( ch ) ); }
    ) == s.end(); 
```

对于除第一个或所有的所有人，只需更改迭代器即可。

只是不要忘记在使用 `front()`or之前检查空字符串`back()`，或者在迭代器上进行任何算术运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:25:06.237

那这个呢？

```
stringtest(string &s)
{
    if(string.length()<1)
    return -2
    std::string begin(' ?');
    if(begin.find(s.front())>1)
    //test if first character of s is in begin
    {
        unsigned found = s.find_first_not_of(' ',1)
        //checks if there are any other char then ' ' after the first char
        if(found >s.length())
        return s.at(0);
    }
    else if(begin.find(s.back())>1)
    //test if last character of s is in begin
    {
        unsigned found = s.find_last_not_of(' ',s.length()-1);
        //checks if there are any other char then ' ' before the last char
        if(found !=std::string::npos)
        return s.at(s.length()-1);
    }
    if(s.length()==1 && s.front()== ' ')
    return -1
    else return -2
} 
```

# jquery - Jquery，'不是函数'，扩展功能不起作用

> ID：14519333
> 
> 赞同：0
> 
> 时间：2013-01-25T09:56:27.690
> 
> 标签：jquery, jquery-ui, spinner

我在 Firefox 的控制台中收到此错误：

```
$spinner.setupSpinner is not a function
[Break On This Error]   

$spinner.setupSpinner(); 
```

ed247.base.js（第 116 行）

Postliste.aspx 加载这些文件：

```
jquery-1.9.0.js"
jquery-ui-1.9.0.js
jquery.ui.datepicker-no.js
jquery-scrollTo-min.js
ed247.base.js 
```

ed247.base.js 的摘录：

```
 jQuery.fn.setupSpinner = function () {
        $(this)
            .ajaxStart(function () {
                $(this).show();
            })
            .ajaxStop(function () {
                $(this).hide();
            })
        ;
        return this;
    };

    // init
    function init() {
        // cache jquery objects
        $item = $(config.ids.item);
        $searchResult = $(config.ids.searchResult);
        $spinner = $(config.ids.spinner);
        $datepicker = $(config.ids.datepicker);
        $todatepicker = $(config.ids.todatepicker);
        $searchButton = $(config.ids.searchButton);
        $searchItemTemplate = $(config.templateids.searchItemTemplate);
        $searchHeaderTemplate = $(config.templateids.searchHeaderTemplate);
        $itemTemplate = $(config.templateids.itemTemplate);
        $attachmentsTemplate = $(config.templateids.attachmentsTemplate);
        $backLinks = $(config.classes.backLinks);
        $checkout = $(config.ids.checkout);

        $backToStep1 = $backLinks.find("li:nth-child(1)");
        $backToStep2 = $backLinks.find("li:nth-child(2)");

        $spinner.setupSpinner(); 
```

这是该页面的 URL：[链接](http://www.roros.kommune.no/Politikk/Postliste/Journalpost-info1/)

问题似乎是没有找到扩展功能？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:09:54.217

您正在加载 jQuery 库两次。当您尝试使用扩展时，它不再存在，因为您已将 jQuery 对象替换为新对象。

# ruby-on-rails-3.2 - Tinymce 在新标签页中打开空白错误

> ID：14519335
> 
> 赞同：0
> 
> 时间：2013-01-25T09:56:31.830
> 
> 标签：ruby-on-rails-3.2, tinymce

我正在使用 tinymce 为注释功能生成编辑器。因为页面上有一个新的注释按钮，该按钮重定向到包含通过 tinymce 生成的编辑器的页面。

在浏览器的同一选项卡中导航时，这可以正常工作。但是每当我执行以下步骤时：

*   右键单击新注释选项。
*   在新标签页中打开。
*   然后添加一些文本并单击创建注释。

它只是创建一个空白笔记。这意味着编辑器中写入的任何文本都不会被它读取。我更新了tinymce gem，但没有输出。

有人可以帮我弄清楚为什么这个问题只出现在新标签中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:39:32.230

您可能必须正确重新初始化 tinymce 实例，以防您的更改选项卡

要在更改选项卡之前关闭编辑器实例，请使用：

```
tinymce.execCommand('mceRemoveControl',true,'your_editor_id'); 
```

要重新初始化新选项卡的编辑器，请使用

```
tinymce.execCommand('mceAddControl',true,'your_editor_id'); 
```

# tidesdk - 安装程序无法确定应用程序路径

> ID：14519341
> 
> 赞同：0
> 
> 时间：2013-01-25T09:56:51.683
> 
> 标签：tidesdk, installation

我是第一次安装 TideSDK。

我正在使用 Windows 7。

我下载了 TideSDK-1.3.1-beta-win-x86 zip 文件。

我将 zip 文件解压缩到 c:\ProgramData\TideSDK

当我尝试在 c:\ProgramData\TideSDK\sdk\win32\1.3.1-beta\installer 文件夹中运行安装程序应用程序时，我收到以下消息：

“安装程序无法确定应用程序路径”

我究竟做错了什么？

看待

亨利·雨果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T01:21:19.047

遵循所有“TideSDK 入门”步骤：

[http://tidesdk.multipart.net/docs/user-dev/generated/#!/guide/getting_started](http://tidesdk.multipart.net/docs/user-dev/generated/#!/guide/getting_started)

基本文档不讨论“安装程序”应用程序。相反，第 1 步的最后一部分说要安装 Imagemagick 和 Wix 3.0...，然后因为您才刚刚开始，我建议您转到第 2 步，在那里您可以获取带有用于创建和运行新应用程序的 UI 的 TideSDK 开发人员应用程序.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T15:27:30.897

您是否尝试使用开发人员应用程序？这是 SDK 本身的单独下载。如果是这样，请从他们的网站下载并安装它，它是一个 .msi，很容易做到。

[http://www.tidesdk.org/](http://www.tidesdk.org/)

# iphone - 旧应用程序在 iPhone5 上出现黑线

> ID：14519342
> 
> 赞同：0
> 
> 时间：2013-01-25T09:56:59.610
> 
> 标签：iphone, ios, xib, iphone-5

我有一个旧应用程序，它与 3.5 英寸显示器兼容，如 iPhone4S 及更早版本。这是应用程序的屏幕： ![在此处输入图像描述](../Images/6624b9d1c942541c168b69f384737ed8.png)

当我尝试在 iPhone5 模拟器上运行这个应用程序时，它看起来真的很糟糕！ ![在此处输入图像描述](../Images/78fc5cbc7e4768cb16d5f40ac68a2ba4.png)

Apple 承诺所有旧应用都会在顶部和底部出现黑线！我该怎么做？我不想从 xib 文件中重构我的所有代码。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:02:19.803

您是否为您的应用添加了启动图像（如`Default-568h@2x.png`）？这将向 iOS 发出信号，将应用程序拉伸到完整显示。没有的应用程序将在顶部和底部显示黑色边框。

另请参阅有关如何解决此问题的问题 + 答案：
[Undo auto resizing for iPhone 5 screen after added Default-568h@2x.png](https://stackoverflow.com/q/12536486/474896)

# python - 不能在 Python 中继承 mlpy.LibSvm

> ID：14519344
> 
> 赞同：0
> 
> 时间：2013-01-25T09:57:03.173
> 
> 标签：python, libsvm

我想继承从 mlpy 机器学习包导出的 LibSvm 对象类：

```
from mlpy import MaximumLikelihoodC, LibSvm 

class Svm(LibSvm):   

def __init__(self,Gs,ls):
    self._K = ls.shape[1]
    self._Gs = Gs
    self._N = Gs.shape[1]
    self._ls = ls
    LibSvm.__init__('c_svc','rbf',\
            gamma=1.0/self._N,C=100,probability=True) 
```

当我调用构造函数时，例如，

```
svm = Svm(Gs,ls) 
```

解释器忽略我的**init**并执行 LibSvm 的**init**方法，给出错误

```
svm = SVM(Gs,ls)  
File "libsvm.pyx", line 146, in mlpy.libsvm.LibSvm.__cinit__ mlpy/libsvm/libsvm.c:1803)
ValueError: invalid svm_type 
```

使用相同的语法对 MaximumLikelihoodC 进行子类化没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T12:24:43.153

在 C 中实现的 Python 类不能被子类化，除非它们是专门为它设计的，请参阅[哪些类不能被子类化？](https://stackoverflow.com/questions/10061752/which-classes-cannot-be-subclassed).

从错误消息的外观来看，它似乎很确定它是用 C 实现的，我希望作者没有投入额外的工作来使其可子类化。

# emacs - EMACS 的类似 ajax 的命令助手？

> ID：14519349
> 
> 赞同：3
> 
> 时间：2013-01-25T09:57:22.423
> 
> 标签：emacs, emacs24

我是 Emacs 的新手。如果可以掌握它的一组命令，我发现它功能强大且非常方便。我也相信任何人只要有耐心，以及学习和使用该软件的渴望，都可以做到这一点。然而，对于初学者和季节性用户来说，拥有一些执行以下操作的命令助手插件会更好：

* * *

当用户开始键入任何 CONTROL 或 META、COMMAND 或任何特殊键时，“类似 ajax”或“智能搜索”窗口会出现在 minibuffer 下方或显示帮助文本中，例如：如果我按住“CONTROL”，命令助手窗口显示：

```
C-p         Up one line
C-n         Down one line
C-f         Forward one character
C-b         Backward one character
C-a         Beginning of line       
C-e         End of line
C-x         ... 
```

然后，如果我在按住“CONTROL”的同时继续键入“x”，窗口将更新并显示如下内容：

```
C-x C-a  add-mode-abbrev
C-x C-b  list-buffers
C-x C-c  save-buffers-kill-emacs
C-x C-d  list-directory
C-x C-e  eval-last-sexp
C-x C-f  find-file
C-x C-h  inverse-add-mode-abbrev
C-x TAB  indent-rigidly
C-x C-l  downcase-region
C-x C-n  set-goal-column
C-x C-o  delete-blank-lines 
```

* * *

我试过用谷歌搜索它，但它似乎还不存在。所以我想这更多是对 EMACS 的功能要求，而不是一个问题。但是如果有人可以编写一个插件/模块来做到这一点，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:56:55.480

我不相信这是存在的，但我也相信它并不是真正需要的。不过，它只会使屏幕混乱，也许对于菜鸟来说它确实很有用。

现在，您可以考虑打印一份[备忘](http://cs.iupui.edu/~kweimer/EmacsCheatSheet.pdf)单。

不要失去希望，我在没有任何帮助的情况下学会了它，关键确实是经常使用它。

此外，这一切背后都有相当好的逻辑，所以如果你在备忘单或其他任何地方阅读结构，那么它可能会帮助你“猜测”什么是正确的组合键。

**编辑**：实际上我自己也问了一个[类似的问题](https://stackoverflow.com/questions/12988127/emacs-key-input-cheat-sheet)，至少需要相同的功能。我接受了一个显然提到[Icicles](http://emacswiki.org/emacs/Icicles_-_Key_Completion)提供此功能的答案。

另外，一个建议是，在您键入前缀键之后，例如`C-c`，之后键入`C-h`会显示可能的补全。

这使我得出以下结论：

我相信我们可以使用如下代码：“如果最后一个键是前缀键，则运行`C-h`*，切换回上一个缓冲区并重新命中最后一个前缀键”

*这是一种通用方法，即使对于我自己设计不佳的次要模式也有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:11:26.330

我也不知道现有的软件包可以做到这一点，但这里有一些提示。

要获得所有可用绑定的概览，请按`C-h b`。显示的缓冲区看起来相当原始，因为它包括用于输入特殊字符的所有方法（它们通常位于顶部），但是`C-s`如果您至少记得命令名称的一部分，则可以使用它进行搜索。

如果您知道前缀（例如`C-x`）但不记得接下来会发生什么，您可以在它后面加上`C-h`（类型`C-x C-h`）。这将打开一个类似的缓冲区，该缓冲区仅包含以相同前缀开头的绑定。我认为这是比较模糊的功能之一。

但是，说到“如果我按住 Ctrl”，当您按下时会显示提示，`Ctrl`如果目前无法在 Lisp 级别实现，则不会显示其他任何内容。这将需要一些较低级别的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:39:53.357

在 emacs 中有太多的键绑定，这实际上是有用的。

我同意其他回复，只是想补充一点，我发现内置教程对于了解基础知识非常有用。您可以使用`C-h t`.

您最终可能会更改几个默认绑定，但学习它们将帮助您找到新模式的方法（假设它们以“emacsy”方式工作）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-23T09:56:21.293

我回到这个是因为我找到了一个完美的解决方案，没有它就活不下去：The [`emacs-helm`](https://github.com/emacs-helm/helm)and[`which-key`](https://github.com/justbur/emacs-which-key)

# android - Android：如何将图钉添加到谷歌地图

> ID：14519357
> 
> 赞同：4
> 
> 时间：2013-01-25T09:57:34.443
> 
> 标签：android, google-maps

> **可能重复：**
> [将地图图钉添加到 Google Map Android 的最佳方式](https://stackoverflow.com/questions/8641465/best-way-to-add-map-pins-to-google-map-android)

如何添加图钉，如果单击显示带有信息地址或城市的 balon，我在 google maps API android 中有自定义 getOverlay()。

在我的代码下面：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_map);

    mapView = (MapView) findViewById(R.id.map_view);
    GeoPoint gpStart = new GeoPoint((int) (-6.31689 * 1E6),
            (int) (106.74040 * 1E6));

    GeoPoint gpEnd = new GeoPoint((int) (-6.29729 * 1E6),
            (int) (106.78386 * 1E6));

    Route r = direction(gpStart, gpEnd);
    RouteOverlay rOverlay = new RouteOverlay(r, Color.RED);
    mapView.getOverlays().add(rOverlay);
    mapView.getController().animateTo(gpStart);
    mapView.getController().setZoom(15);
    mapView.setBuiltInZoomControls(true);
} 
```

我的代码已编辑，上面的代码我从[这里](http://swarawan.com/android/android-google-maps-api-menggunakan-json/)获得并为我工作，但未在位置上显示图钉。如果代码是谷歌地图 V1 的标准，我知道要放置 pin 至极。只需添加覆盖。但我的问题是我从 json 数组中获取地图。所以我想在位置（地理点）中添加引脚，如果我点击我会得到信息地址。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T10:00:36.243

如果您使用的是[Google Maps Android API v2](https://developers.google.com/maps/documentation/android/)，您应该这样做，[这里记录了](https://developers.google.com/maps/documentation/android/marker)它。

```
private GoogleMap mMap;
mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
mMap.addMarker(new MarkerOptions()
    .position(new LatLng(0, 0))
    .title("Hello world")); 
```

# ejb - Parallel requests referring to the same stateful session bean

> ID：14519362
> 
> 赞同：1
> 
> 时间：2013-01-25T09:57:45.683
> 
> 标签：ejb, stateful-session-bean

I assume that an EJB container can process multiple interactions with the same client parallel. What does this mean for requests which use the same stateful session bean and influence their state? (this is more a theoretical question)

Do multiple requests really share the same instance of that bean? If not, in which else way does the container assure, that state changes caused by a request get propagated to and are accessible from a parallel request of that same client?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:00:39.523

While consulting [this site](http://what-when-how.com/enterprise-javabeans-3-1/the-singleton-session-bean-enterprise-javabeans-3-1/) I realized that the EJB container is responsible für serializing multiple concurrent requests to stateful session beans.

# javascript - 用 history.back 刷新上一页

> ID：14519363
> 
> 赞同：0
> 
> 时间：2013-01-25T09:57:47.823
> 
> 标签：javascript

> **可能重复：**
> [History.Back 刷新](https://stackoverflow.com/questions/4657545/history-back-with-refresh)

我有一个分配给 的输入按钮`onclick="history.back()"`。

有没有办法使用它但强制刷新上一页？我希望它在 FF 和 IE8 中工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:16:43.190

根据您的具体需要，这里有一个修复程序，首先需要做更多的准备，但应该可以：

1.  在文档中放置一个带有（服务器端创建的）时间戳的不可见元素。
2.  放置一个事件监听器，它检查时间戳并在页面太旧时重新加载页面。

现在，当您通过按钮或浏览器的后退按钮导航回该站点时，onload 处理程序将触发，检查日期并在必要时重新加载页面。

客户端伪代码：

```
document.body.addEventListener("load",function(){
    // compare timestamp stored in element with current time and if it is too old,
    // reload page e.g. via document.location.reload()
   var d1 = document.querySelector("#timestamp").innerHTML;
   var d2 = Date.now;
   if (d2-d1 > 10000 ) document.location.reload();
}); 
```

# android-layout - 像html中的框架一样在android中划分屏幕

> ID：14519364
> 
> 赞同：0
> 
> 时间：2013-01-25T09:57:54.017
> 
> 标签：android-layout, html-frames

我正在制作一个安卓应用程序。我想在每个活动上都有一个通用的导航菜单，比如 html 中的框架。我想要左侧的菜单（比如 20%）区域和右侧的其他导航屏幕（比如 80% 区域）

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:54:30.553

您应该使用两个片段，这样您就可以将菜单保留在一个片段中，而只更改另一个片段中的活动，我应该不难在互联网上找到一个示例，因为它在平板电脑中很常见。 [http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

# iphone - Instruments 中的调用树部分被禁用（灰显）

> ID：14519365
> 
> 赞同：13
> 
> 时间：2013-01-25T09:57:54.817
> 
> 标签：iphone, xcode, instruments

我知道这应该启用，但我不确定为什么不启用。我已经尝试了多个应用程序，但它并没有改变它的状态。

有任何想法吗？

谢谢！

[仪器调用树已禁用](https://i.stack.imgur.com/SGy5M.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-25T18:40:16.417

您必须在调用树视图中才能启用调用树部分。Instruments 最初不显示调用树视图，因此您必须手动切换到它。使用跳转栏切换到调用树视图。

![在此处输入图像描述](../Images/8b750ab4b9da31603938a2e77cda4175.png)

# phonetics - 计算机生成的声音和人类声音的声音相似性

> ID：14519366
> 
> 赞同：0
> 
> 时间：2013-01-25T09:57:54.680
> 
> 标签：phonetics, sound-recognition

我正在寻找一种算法来通过它们的语音来比较两个声音文件。我想评估某种分数（例如 0：没有相似性；100：相同的声音）。因此，我将计算机生成和录制的人声“你好”加载到 Audacity 中（我知道，它不是那么专业……）并观察海浪。

[https://dl.dropbox.com/s/p8o8tpsayo9xr14/hello.png](https://dl.dropbox.com/s/p8o8tpsayo9xr14/hello.png)（不幸的是，我不允许嵌入图像）

尽管两者听起来完全一样，但波浪并没有那么匹配。

有没有办法检测这两个波之间的相似性并计算提到的分数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:46:52.760

这是一个开源项目，您可能对[免费的语音识别工具和应用程序](http://freespeech.sourceforge.net/)感兴趣。这是另一个[用于语音识别的开源工具包](http://cmusphinx.sourceforge.net/)。我敢肯定，如果您“duckduckgo”，如果这些不符合您的口味，您会找到其他人。干杯！

# joomla - 从代码中将模块渲染到正确的位置（Joomla 2.5）

> ID：14519369
> 
> 赞同：0
> 
> 时间：2013-01-25T09:58:06.613
> 
> 标签：joomla, joomla2.5

在我的组件视图中，我可以通过以下代码显示一个模块：

```
$module = JModuleHelper::getModule('mod_login');
$html = JModuleHelper::renderModule($module);
echo $html; 
```

或者

```
echo JHtml::_('content.prepare', '{loadmodule login}'); 
```

但这通常会将模块放置在主内容 div 的屏幕中间。

如何将模块放置在模块参数中定义的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:43:03.817

看看管理模板 Isis 如何在主页上呈现 quickicons 模块或 protostar 中的错误页面如何呈现搜索模块。

```
$this->searchmodules = JModuleHelper::getModules('position-0');
                foreach ($this->searchmodules as $searchmodule)
                {
                    $output = JModuleHelper::renderModule($searchmodule, array('style' => 'none'));
                    $params = new JRegistry;
                    $params->loadString($searchmodule->params);
                    echo $output;
                } 
```

您只需要一个模块，但您了解基本概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:52:14.333

尝试这个。

您也可以传递模块参数。

```
 $document = &JFactory::getDocument();
   $renderer = $document->loadRenderer('module');

   $Module = &JModuleHelper::getModule('mod_fmDataGrid');

   $Params = "param1=bruno\n\rparam2=chris";
   $Module->params = $Params;
   echo $renderer->render($Module); 
```

这可能会帮助你..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:21:41.093

不能，模板中包含的 jdoc 会在组件完成输出后处理。

为什么不让 Joomla 将模块呈现在正确的位置？这应该是使用它的原因之一，即注意模块的放置和顺序。

如果您有其他原因，请进一步说明。

# r - 用列组的平均值替换 NA

> ID：14519370
> 
> 赞同：3
> 
> 时间：2013-01-25T09:58:06.677
> 
> 标签：r, lapply

我想找到列组中所有值的均值。给定的一组列可能包含缺失的观察值。我想用该组列的平均值替换一组列中缺失的观察值。在我的情况下，每组的列数是一个常数，`years`.

下面是执行此操作的代码。但是，我希望有人可以提供更高效的代码。`lapply`查找给定列组的平均值。但是，我还没有想出类似的方法来替换缺失的观察结果。谢谢你的任何建议。

这是一个示例数据集：

```
my.first.year <- 1980
my.last.year  <- 1982
years <- (my.last.year - my.first.year) + 1

x = read.table(text = "
 city county   state      a80    a81    a82    b80     b81   b82
  1      B       AA        2      20    200     4       8     12
  2      B       AA        4      NA    400     5       9     NA
  1      C       AA        6      60     NA    NA      10     14
  2      C       AA       NA      80    800     7      11     15    
", sep = "", header = TRUE, stringsAsFactors = FALSE)

(2 + 4 + 6 + 20 + 60 + 80 + 200 + 400 + 800) / 9
(4 + 5 + 7 + 8 + 9 + 10 + 11 + 12 + 14 + 15) / 10

my.means <- lapply( seq(4, ncol(x), years) , function(i) { mean(unlist(x[,i : (i+years-1) ]) , na.rm=TRUE) } )
my.means

x2 <- x

x2[,(3+years*0+1):(3+years*1)][is.na(x2[,(3+years*0+1):(3+years*1)])] = my.means[[1]]
x2[,(3+years*1+1):(3+years*2)][is.na(x2[,(3+years*1+1):(3+years*2)])] = my.means[[2]] 
```

结果如下：

```
#   city county state      a80      a81      a82 b80 b81  b82
# 1    1      B    AA   2.0000  20.0000 200.0000 4.0   8 12.0
# 2    2      B    AA   4.0000 174.6667 400.0000 5.0   9  9.5
# 3    1      C    AA   6.0000  60.0000 174.6667 9.5  10 14.0
# 4    2      C    AA 174.6667  80.0000 800.0000 7.0  11 15.0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:13:51.520

一个答案，但可能不是最简单的答案，它使用`plyr`和`reshape2`包：

```
library(reshape2)
library(plyr) 
```

首先，将您的数据框从“宽”格式转换为“长”格式（每行一个观察值）并创建一个`groups`列：

```
mx <- melt(x, id.vars=c("city","country","state"))
mx$groups[mx$variable %in% c("a80","a81","a82")] <- 1
mx$groups[mx$variable %in% c("b80","b81","b82")] <- 2
head(mx) 
```

您的数据的第一行现在应该如下所示：

```
 city county state variable value groups
1    1      B    AA      a80     2      1
2    2      B    AA      a80     4      1
3    1      C    AA      a80     6      1
4    2      C    AA      a80    NA      1
5    1      B    AA      a81    20      1
6    2      B    AA      a81    NA      1 
```

然后您可以使用`ddply`以下方法替换缺失值：

```
mx <- ddply(mx, .(groups), function(df) {df$value[is.na(df$value)] <- mean(df$value, na.rm=TRUE); return(df)}) 
```

最后用于`dcast`将您的数据恢复为“长”格式：

```
x <- dcast(mx, city + county + state ~ variable)
x 
```

这使 ：

```
 city county state      a80      a81      a82 b80 b81  b82
1    1      B    AA   2.0000  20.0000 200.0000 4.0   8 12.0
2    1      C    AA   6.0000  60.0000 174.6667 9.5  10 14.0
3    2      B    AA   4.0000 174.6667 400.0000 5.0   9  9.5
4    2      C    AA 174.6667  80.0000 800.0000 7.0  11 15.0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T15:36:38.657

这是使用`reshape`base R 的另一种解决方案，这是一个经常被遗忘的功能，具有惊人的功能。

```
x2 = reshape(x, direction = 'long', varying = 4:9, sep = "")
x2[,c('a', 'b')] = apply(x2[,c('a', 'b')], 2, function(y){
  y[is.na(y)] = mean(y, na.rm = T)
  return(y)
})
x3 = reshape(x2, direction = 'wide', idvar = names(x2)[1:3], timevar = 'time', 
 sep = "") 
```

下面是它的工作原理。首先，我们将数据重塑为长格式，其中`a`和`b`成为列，年份成为行。其次，我们用它们各自的方式替换列中的 NA `a`。`b`最后，我们将数据重新整形为宽格式。`reshape`是一个令人困惑的功能，但通过帮助页面上的示例可以让您快速上手。

**编辑**

要重新排序列，您可以执行

```
x3[,names(x)] 
```

要替换行名，您可以执行

```
rownames(x3) = 1:NROW(x3) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T10:36:50.240

我使用您的代码，并添加了一行`na.fill`（即使我不喜欢您按 3 列分组）。

**编辑**

这`na.fill`是动物园包。它非常方便，我认为它在基础包中。下次我在这里发帖之前重新开始我的会话。

```
ll <- lapply( seq(4, ncol(x), years) , 
        function(i) { 
          m <- mean(unlist(x[,i : (i+years-1) ]) , na.rm=TRUE) 
          na.fill(x[,i : (i+years-1) ],m)      ## here the line I add 
          } 
        )
do.call(cbind,ll)   

    a80      a81      a82 b80 b81  b82
[1,]   2.0000  20.0000 200.0000 4.0   8 12.0
[2,]   4.0000 174.6667 400.0000 5.0   9  9.5
[3,]   6.0000  60.0000 174.6667 9.5  10 14.0
[4,] 174.6667  80.0000 800.0000 7.0  11 15.0 
```

我会使用这样的东西来选择列：

```
lapply(c('a','b'),function(i){
       cols.group <- regmatches(colnames(x),
                                regexpr(paste(i,"[0-9]+",sep=''),colnames(x)))
       m <- mean(unlist(x[,cols.group]) , na.rm=TRUE) 
       na.fill(x[,cols.group ],m) 
})

do.call(cbind,ll)   
cbind(x[,!grepl("(a|b)[0-9]+",colnames(x))],do.call(cbind,ll))

  city county state      a80      a81      a82 b80 b81  b82
1    1      B    AA   2.0000  20.0000 200.0000 4.0   8 12.0
2    2      B    AA   4.0000 174.6667 400.0000 5.0   9  9.5
3    1      C    AA   6.0000  60.0000 174.6667 9.5  10 14.0
4    2      C    AA 174.6667  80.0000 800.0000 7.0  11 15.0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T11:06:53.820

与长格式相比，以宽格式存储数据会使您自己的事情变得更加困难。`melt()`我对此的看法是使用**reshape2**包转换为长格式。使用您的数据

```
my.first.year <- 1980
my.last.year  <- 1982

x <- read.table(text = "
 city county   state      a80    a81    a82    b80     b81   b82
  1      B       AA        2      20    200     4       8     12
  2      B       AA        4      NA    400     5       9     NA
  1      C       AA        6      60     NA    NA      10     14
  2      C       AA       NA      80    800     7      11     15    
", sep = "", header = TRUE, stringsAsFactors = FALSE) 
```

首先我们`melt()` `x`做一些操作`variable`来得到组和年份

```
require(reshape2)

xx <- melt(x, id.vars = c("city","county","state"))
## Add year and group variables by process the `variable` column
xx <- transform(xx, year = as.numeric(sub("^[a-zA-Z]", "", variable)),
                group = regmatches(variable, regexpr("^[a-zA-Z]", variable)), 
                stringsAsFactors = FALSE)
## format start and end years as per way stored in column names
start <- as.numeric(substring(my.first.year, first = 3))
end <- as.numeric(substring(my.last.year, first = 3)) 
```

`start`并且`end`是没有世纪部分的开始和结束年份的格式化版本。此时`xx`看起来像

```
> head(xx)
  city county state variable value year group
1    1      B    AA      a80     2   80     a
2    2      B    AA      a80     4   80     a
3    1      C    AA      a80     6   80     a
4    2      C    AA      a80    NA   80     a
5    1      B    AA      a81    20   81     a
6    2      B    AA      a81    NA   81     a 
```

接下来，我使用基本 R 拆分应用组合成语之一，并`split()` `xx`通过`group`

```
xxs <- split(xx, f = xx$group) 
```

然后`lapply()`可以将函数应用于子集 by`year`表示位于`start`:之间或之间的年份`end`。我计算`value`子集值的变量的平均值，删除`NA`s。我们返回平均值。

```
foo <- function(x, start, end) {
  take <- with(x, year >= start & year <= end)
  xbar <- mean(x[take, "value"], na.rm = TRUE)
  xbar
}

lapply(xxs, foo, start = start, end = end) 
```

这给出了：

```
> lapply(xxs, foo, start = start, end = end)
$a
[1] 174.6667

$b
[1] 9.5 
```

至于替换`NA`s 的函数，只需对 s 稍作修改即可`foo()`：

```
foor <- function(x, start, end) {
  take <- with(x, year >= start & year <= end)
  xbar <- mean(x[take, "value"], na.rm = TRUE)
  nas <- is.na(x[take, "value"]) ## which are NA?
  x[take, "value"][nas] <- xbar  ## replace NA with xbar
  x                              ## return
} 
```

为了取回数据框，我将其包装在`do.call()`其中安排调用`rbind()`来自的输出`lapply()`：

```
xx2 <- do.call(rbind, lapply(xxs, foor, start = start, end = end)) 
```

这使：

```
> head(xx2)
    city county state variable    value year group
a.1    1      B    AA      a80   2.0000   80     a
a.2    2      B    AA      a80   4.0000   80     a
a.3    1      C    AA      a80   6.0000   80     a
a.4    2      C    AA      a80 174.6667   80     a
a.5    1      B    AA      a81  20.0000   81     a
a.6    2      B    AA      a81 174.6667   81     a 
```

如果您需要返回数据的原始格式，那么`dcast()`（也来自`reshape2`）是您的朋友：

```
x2 <- dcast(xx2[, 1:5], city + county + state ~ variable)

> head(x)
  city county state a80 a81 a82 b80 b81 b82
1    1      B    AA   2  20 200   4   8  12
2    2      B    AA   4  NA 400   5   9  NA
3    1      C    AA   6  60  NA  NA  10  14
4    2      C    AA  NA  80 800   7  11  15
> head(x2)
  city county state      a80      a81      a82 b80 b81  b82
1    1      B    AA   2.0000  20.0000 200.0000 4.0   8 12.0
2    1      C    AA   6.0000  60.0000 174.6667 9.5  10 14.0
3    2      B    AA   4.0000 174.6667 400.0000 5.0   9  9.5
4    2      C    AA 174.6667  80.0000 800.0000 7.0  11 15.0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-26T09:59:40.403

我本可以对任何答案打勾，但我更喜欢 Ramnath 的答案，因为它完全是基于 R 的，而且看起来非常直截了当。但是，当我尝试使用他的答案时，我意识到我需要为众多州中的每一个州提供单独的方法。所以，我修改了他的答案如下：

```
my.first.year <- 1980
my.last.year  <- 1982
years <- (my.last.year - my.first.year) + 1

x = read.table(text = "
 city county   state      a80    a81    a82    b80     b81   b82
  1      B       AA        2      20    200     4       8     12
  2      B       AA        4      NA    400     5       9     NA
  1      C       AA        6      60     NA    NA      10     14
  2      C       AA       NA      80    800     7      11     15

  1      A       BB        1       2      1     2       2      2
  2      A       BB        2      NA      1     2       2     NA
  1      B       BB        1       1     NA    NA       2      2
  2      B       BB       NA       2      1     2       2     10
", sep = "", header = TRUE, stringsAsFactors = FALSE)
x

x2 = reshape(x, direction = 'long', varying = 4:9, sep = "")

x2 <- x2[order(x2$state, x2$time),]

x2[,c('a', 'b')] = apply(x2[,c('a', 'b')], 2, function(z) {
      sapply(split(z, x2$state), 
      function(y) {  y[is.na(y)] = mean(y, na.rm = T)  
      return(y)   }) 
      })
x2

x3 <- reshape(x2, direction = 'wide', idvar = names(x2)[1:3], timevar = 'time', 
 sep = "")

x3[,names(x)] 
```

这段代码似乎有效。虽然，出于某种原因，我需要订购`x2`。`state`我不完全理解这个`return`说法。如果我发现代码不适用于未来的数据集，我将编辑这篇文章来解决这个问题。

# linux - 将每 N 行输入放入一个新列

> ID：14519372
> 
> 赞同：7
> 
> 时间：2013-01-25T09:58:10.707
> 
> 标签：linux, bash, shell, unix, awk

在 bash 中，给定输入

```
1
2
3
4
5
6
7
8
... 
```

`N`例如5，我想要输出

```
1  6  11
2  7  12
3  8  ...
4  9
5  10 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-25T10:19:11.360

使用一个鲜为人知的 gem `pr`：

```
$ seq 20 | pr -ts' ' --column 4
1 6 11 16
2 7 12 17
3 8 13 18
4 9 14 19
5 10 15 20 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T10:07:11.647

将以下脚本中的 5 替换为您的号码。

```
seq 20|xargs -n5| awk '{for (i=1;i<=NF;i++) a[i,NR]=$i; }END{
    for(i=1;i<=NF;i++) {for(j=1;j<=NR;j++)printf a[i,j]" "; print "" }}' 
```

输出：

```
1 6 11 16 
2 7 12 17 
3 8 13 18 
4 9 14 19 
5 10 15 20 
```

请注意`seq 20`，上面仅用于生成用于测试的数字序列。你在实际工作中不需要它。

**编辑**

正如 sudo_O 所指出的，我添加了一个纯 awk 解决方案：

```
 awk -vn=5 '{a[NR]=$0}END{ x=1; while (x<=n){ for(i=x;i<=length(a);i+=n) printf a[i]" "; print ""; x++; } }' file 
```

测试

```
kent$  seq 20| awk -vn=5 '{a[NR]=$0}END{ x=1; while (x<=n){ for(i=x;i<=length(a);i+=n) printf a[i]" "; print ""; x++; } }'     
1 6 11 16 
2 7 12 17 
3 8 13 18 
4 9 14 19 
5 10 15 20 

kent$  seq 12| awk -vn=5 '{a[NR]=$0}END{ x=1; while (x<=n){ for(i=x;i<=length(a);i+=n) printf a[i]" "; print ""; x++; } }'     
1 6 11 
2 7 12 
3 8 
4 9 
5 10 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-26T07:41:30.407

这是我的做法`awk`：

```
awk -v n=5 '{ c++ } c>n { c=1 } { a[c] = (a[c] ? a[c] FS : "") $0 } END { for (i=1;i<=n;i++) print a[i] }' 
```

一些简单的测试：

```
seq 21 | awk -v n=5 '{ c++ } c>n { c=1 } { a[c] = (a[c] ? a[c] FS : "") $0 } END { for (i=1;i<=n;i++) print a[i] | "column -t" }' 
```

结果：

```
1  6   11  16  21
2  7   12  17
3  8   13  18
4  9   14  19
5  10  15  20 
```

还有一个：

```
seq 40 | awk -v n=6 '{ c++ } c>n { c=1 } { a[c] = (a[c] ? a[c] FS : "") $0 } END { for (i=1;i<=n;i++) print a[i] | "column -t" }' 
```

结果：

```
1  7   13  19  25  31  37
2  8   14  20  26  32  38
3  9   15  21  27  33  39
4  10  16  22  28  34  40
5  11  17  23  29  35
6  12  18  24  30  36 
```

# jquery - 如何说服浏览器从缓存加载图像而不是从服务器获取

> ID：14519373
> 
> 赞同：2
> 
> 时间：2013-01-25T09:58:22.630
> 
> 标签：jquery, css, caching, iis, image-caching

我在我的网站的一部分中使用[Quake Slider](http://codevisually.com/quake-slider-jquery-imagecontent-slider-plugin/)`div(s)` 。这个插件是从图像创建来进行转换的。问题是当`div(s)`被创建时，`background-image`它们的属性根据当前图像`src`属性发生变化，并导致浏览器从服务器重新加载图像（和奇怪的是不是来自缓存）。谁能告诉我如何更改此插件以在`css('background-image')`调用 jquery 时不重新加载图像？感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:16:00.640

## Expiration and caching response headers

Browsers reload content based on their last accessed expiration and caching headers sent from the web server. So if images expired in the past, browser will have to reload them regardless of whether they've just been loaded.

As you're using IIS I suggest you read [this question](https://stackoverflow.com/q/865252/75642) that links to MS resource with description of configuration elements to control this behaviour.

When you configure your server to not expire static content you can still convince browser to reload some static content by adding a random value along with your request i.e.

```
http://somewhere.com/images/always-realod.jpg?a9s87h7sdf6 
```

# jquery - 如何设置面料线的长度和粗细？

> ID：14519379
> 
> 赞同：0
> 
> 时间：2013-01-25T09:58:33.363
> 
> 标签：jquery, fabricjs

这是我的面料系列：

```
var newLine = new fabric.Line([120,100,120,300],{
        stroke: "#000000",
        strokeWidth: 2,
}); 
```

这就是我尝试设置厚度的方式：

`newLine.setWidth(5);`并且`newLine.set('width', 5);`

同样，我试图将长度设置为：

`newLine.setHeight(250);`并且`newLine.set('width', 250);`

我什至打电话`newLine.setCoords();`跟在后面`myCanvas.renderAll();`

发生的情况是线（当前是垂直的）变得**倾斜**（高度和宽度保持不变）。我检查了对象的“角度”属性，它的值也没有改变。

究竟是什么导致了这种情况发生？或者，有什么方法可以设置线条的长度和粗细，而不必使用它的“x”和“y”坐标？

PS：我使用的是 Fabric JS 版本**0.9.15.min.js**。

# matlab - 在matlab中实现低通滤波器

> ID：14519387
> 
> 赞同：0
> 
> 时间：2013-01-25T09:59:10.287
> 
> 标签：matlab, fft

我想实现一个消除更高频率的滤波器。在这个例子中，我想消除 sin 曲线并保持线性曲线。

编辑：

我更正了我的代码，但是我为过滤而实现的功能显着改变了数据的边缘，这是不可接受的。

```
clc; clear all;
xaxis = linspace(1, 10, 1000);
data = xaxis + sin(xaxis*3);
Nf = 2^12;
xAxisf = linspace(-10,10,Nf);
% plot(xaxis, data);

% FFT

xsize = numel(data);    
Xf = zeros([1 Nf]);
indices = Nf/2-floor(xsize/2):Nf/2-floor(xsize/2)+xsize - 1;
Xf(indices) = data;

% Xf = fftshift(Xf);
Xf = fft(Xf);
Xf = fftshift(Xf);

% plot 
Xfa = abs(Xf); plot(xAxisf, Xfa);

% generate super-gaussian filter function
Nf = numel(Xf);    
widthfilter = 0.12;
filterpower = 2;
filter = exp(-(xAxisf.^2./widthfilter^2).^filterpower);

% filter
filtertimes = 20;
Xf = Xf .* filter.^filtertimes;

% plot 
Xfa = abs(Xf); plot(Xfa);

% iFFt
Xfs = ifftshift(Xf);
Xif = ifft(Xfs);
% Xif = ifftshift(Xif);
result = abs(Xif);

plot(result(indices)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T10:30:40.420

首要问题：

```
 Xf = fftshift(data);     % NOT NEEDED
    Xf = fft(Xf);
    Xf = fftshift(Xf); 
```

不要在 fft 之前对数据进行 fftshift。仅在 fft 之后才需要转移。这是因为基数 n（可能为 2）fft 在过程中“抽取”了数据。您之前不需要修复它，因为它还没有被淘汰。

第二题：

```
 Xfs = ifftshift(Xf);
    Xif = ifft2(Xfs);            
    Xif = ifftshift(Xif);   % NOT NEEDED 
```

ifftshift 重新抽取数据（撤消 fftshift），ifft 需要将其作为输入。如果输入已经被抽取，则 ifft 的输出会重建原始信号。之后不要换档。

第三题：

```
 Xfs = ifftshift(Xf);
    Xif = ifft2(Xfs);       % USE ifft INSTEAD OF ifft2     
    Xif = ifftshift(Xiff); 
```

为什么你突然切换到 2D IFFT？

我没有详细查看您的滤波器代码，但我想指出，如果您想要一个低通滤波器，它需要围绕中点对称。否则你的频率响应是不对称的，你最终会得到一堆想象。

请更改您的标题。这不是“傅里叶滤波器”。它是一个使用窗口方法和 fft 的低通滤波器。您在频率空间中应用一个窗口的窗口。

好吧，已经很晚了，我来来回回变得暴躁......只是想帮忙。让我更快地为您编写代码。

如果您正在代码中寻找滤波器的效果，您将无法做到，因为滤波器的截止频率太高和/或数据中正弦波的频率太低。这是我增加输入正弦波振荡频率的版本：

```
clc; clear all;
xaxis = linspace(1, 10, 1000);
data = xaxis + sin(xaxis*10);
% plot(xaxis, data);

% FFT
Xf = data;
Xf = fft(Xf);
Xf = fftshift(Xf);

% generate super-gaussian filter function
Nf = numel(data);
xAxisf = linspace(-5,5,Nf);
widthfilter = 0.1;
filterpower = 2;
filter = exp(-(xAxisf.^2./widthfilter^2).^filterpower);

% filter
filtertimes = 1;
Xf = Xf .* filter.^filtertimes;

% plot
Xfa = abs(Xf); plot(Xfa);

% iFFt
Xfs = ifftshift(Xf);
Xif = ifft(Xfs);
result = abs(Xif);

plot(result); hold on; plot(data,'r');
    legend('filtered','data'); 
```

去睡觉了。晚安！我的公共服务了吗：p

# html - 我可以使用本地文件系统中的图像作为 HTML 的背景吗？

> ID：14519388
> 
> 赞同：50
> 
> 时间：2013-01-25T09:59:15.757
> 
> 标签：html, css, background-image

我有一个托管在远程 Web 服务器上的 HTML 文档。我试图让网页上的元素之一使用本地文件系统中的图像文件作为其背景图像。Chrome、Safari 或 Firefox 不走运（没试过 IE）。

这是我迄今为止尝试过的一个例子。

```
<!DOCTYPE html>
<html>
    <head>
        <title>Experiment</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <style>
            html,body { width: 100%; height: 100%; }
        </style>
    </head>
    <body style="background: url('file:///Users/username/Desktop/background.png')">
    </body>
</html> 
```

如果我使用浏览器的 Web 检查工具检查 body 元素，然后选择“在新选项卡中打开图像”，图像就在那里。所以浏览器完全有能力使用给定的 URL 获取图像文件。

是我想要实现的，还是浏览器的安全功能试图阻止外部域访问用户的本地资源？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-10-25T03:06:55.287

```
background: url(../images/backgroundImage.jpg) no-repeat center center fixed; 
```

这应该有帮助

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-01-29T19:01:43.483

假设它在同一个文件夹中，您似乎可以只提供本地图像名称......

就足够了：

```
background-image: url("img1.png") 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-03-16T14:37:55.013

杰夫布里奇曼是正确的。您只需要
background: url('pic.jpg')
，这假设 pic 与您的 html 位于同一文件夹中。

此外，罗伯托的回答也很好。在 Firefox 和 IE 中测试。感谢 Raptor 添加了显示适合屏幕的完整图片且没有滚动条的格式...在文件夹 f 中，桌面上是此 html 和图片 pic.jpg，使用您的用户 ID。在下面进行这些替换：

```
<html>
<head>
    <style>
        body {

        background: url('file:///C:/Users/userid/desktop/f/pic.jpg') no-repeat center center fixed;

        background-size: cover; /* for IE9+, Safari 4.1+, Chrome 3.0+, Firefox 3.6+ */
        -webkit-background-size: cover; /* for Safari 3.0 - 4.0 , Chrome 1.0 - 3.0 */
        -moz-background-size: cover; /* optional for Firefox 3.6 */ 
        -o-background-size: cover; /* for Opera 9.5 */
        margin: 0; /* to remove the default white margin of body */
        padding: 0; /* to remove the default white margin of body */
        overflow: hidden;
             }
    </style>
</head>
<body>
hello
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-25T10:26:04.910

你忘记了 C: 在 file:/// 之后
这对我有用

```
<!DOCTYPE html>
<html>
    <head>
        <title>Experiment</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <style>
            html,body { width: 100%; height: 100%; }
        </style>
    </head>
    <body style="background: url('file:///C:/Users/Roby/Pictures/battlefield-3.jpg')">
    </body>
</html> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-04T23:33:15.977

FireFox 不允许打开本地文件。但是如果你想用它来测试不同的图像（这是我需要做的），你可以简单地将整个页面保存在本地，然后插入 url(file:///somewhere/file.png) -这对我有用。

# c# - 使用反射填写 PDF 表单 - ItextSharp

> ID：14519392
> 
> 赞同：0
> 
> 时间：2013-01-25T09:59:29.427
> 
> 标签：c#, pdf, reflection, itextsharp

我正在尝试使用反射填写 pdf 表单，如下所示：

```
// Get the form fields for this PDF and fill them in!
 var formFieldMap = GetFormFieldNames(pdfTemplate);

     foreach (var fields in formFieldMap)
       {
         var fieldName = UppercaseFirst(fields.Key.Replace("pdf_", ""));

         var proPertyValue = fosques.GetType().GetProperty(fieldName).GetValue(ques, null);

          formFieldMap[fields.Key] = proPertyValue.ToString();

         } 
```

这适用于第一个属性，但在第二次迭代时它说`Collection was modified; enumeration operation may not execute.`

我应该创建另一个字段集合，还是可以避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:08:59.240

您正在修改作为迭代基础的循环`formFieldMap`内部。`foreach`这就是它第二次停止迭代的原因。因此，您必须维护一个单独的变量来收集循环内的这些值，并`formFieldMap`在完成循环后将其附加到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:07:21.490

您在枚举中引用您正在枚举的列表。

您不需要获取`formFieldMapy[fields.Key]`，因为您已经可以访问它，因此您可以简单地执行以下操作：

```
foreach (var fields in formFieldMap)
{
  var fieldName = UppercaseFirst(fields.Key.Replace("pdf_", ""));

  var proPertyValue = fosques.GetType().GetProperty(fieldName).GetValue(ques, null);
  fields.Value = proPertyValue.ToString();
  //formFieldMap[fields.Key] = proPertyValue.ToString();
 } 
```

上面做同样的事情，它只是不直接修改你枚举的内容。

# ios - 使用 NSPredicate 中的聚合函数检查 BOOL 值

> ID：14519393
> 
> 赞同：0
> 
> 时间：2013-01-25T09:59:34.897
> 
> 标签：ios, ios5, core-data, ios6, nspredicate

我有两个实体，分别称为文件夹和文件，文件夹与文件实体具有一对多的关系。文件实体有一个名为 completedStatus 的属性，它是一个 BOOL。我需要检查哪些文件在特定的 folder.file NSOrderedSet 中具有此 completedStatus == TRUe。

* * *

为此，我通过阅读文档尝试了这种方式，但它不起作用

```
[NSPredicate predicateWithFormat:@"completedStatus = 1 IN %@", file.note]]; 
```

所以请帮帮我。

问候兰吉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:30:43.827

这应该做你想要的：

```
NSArray *files = ... // your array of File objects
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"completedStatus = 1"];
NSArray *completedFiles = [files filteredArrayUsingPredicate:predicate]; 
```

**更新：** `NSOrderedSet`没有使用谓词过滤的方法。但是您可以将有序集转换`folder.file`为数组：

```
NSArray *files = [folder.file array]; 
```

然后继续如上。

*或者，您可以使用谓词对**File*实体发出 fetch 请求

```
[NSPredicate predicateWithFormat:@"completedStatus = 1 && folder = %@", theFolder] 
```

假设您已经定义了`folder`从*File*实体到*Folder*实体的反向关系。

# sql-server - 如何进行查找表约束，如果存在或插入条目“其他”，则其 PK Id 必须为-1？

> ID：14519394
> 
> 赞同：0
> 
> 时间：2013-01-25T09:59:41.507
> 
> 标签：sql-server, sql-server-2008-r2, constraints

我想确保在所有包含“其他”条目的查找表上，PK (Id) 为-1。我有许多仅在选择“其他”时才激活的业务规则，因此至少对于第一次迭代来说，所有“其他”条目都有一个相同的 ID，我可以在规则中使用而不必总是执行规则时查找“其他”的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:16:00.303

您可以添加检查约束，但当然，您必须记住为每个表添加它

```
CREATE TABLE Lookup (
    LookupID int not null primary key,
    Name varchar(20) not null unique,
    constraint CK_Lookup_Other CHECK (
      (Name='Other' and LookupID=-1) or
      (Name!='Other' and LookupID!=-1)
    )
) 
```

# video - 适用于网络和手机的通用 .mp4 编解码器格式

> ID：14519403
> 
> 赞同：1
> 
> 时间：2013-01-25T10:00:03.383
> 
> 标签：video, video-streaming, android-video-player, iphone-video

我有一个用于电子学习的网站和移动应用程序（适用于 iOS 和 Android）。对于网络，我正在使用 JWPlayer。许多用户报告说他们面临视频冻结或缓冲问题。但我在我的 chrome 浏览器中检查过它只会缓冲更快的互联网连接。
所以我想要一个适用于网络和移动设备（iOS 和 Android）的通用 .mp4 编解码器格式，并建议我最好的视频转换器进行转换。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T01:32:53.677

# **我认为编码为 H.264 的 MP4 是最好遵循的，参考下面的最后一个链接**

我做了一些研究，但我仍然在寻找最好的，但现在

*   [http://www.indianprice.com/mobiles/articles/272-best-video-format-for-cell-phones.html](http://www.indianprice.com/mobiles/articles/272-best-video-format-for-cell-phones.html) 它说 3gp 对旧的更受欢迎
*   [http://www.freemake.com/blog/put-videos-onto-any-mobile-phone-how-to/](http://www.freemake.com/blog/put-videos-onto-any-mobile-phone-how-to/)它说 MP4 已经是最受以下设置支持的视频格式： MP4

    *   视频编解码器：H.264 或 MPEG4
    *   音频编解码器：AAC 或 MP3
*   [http://en.wikipedia.org/wiki/HTML5_video](http://en.wikipedia.org/wiki/HTML5_video) | 这是用来比较的最佳参考，显然是它的 H.264 编解码器

# sql-server - 将外部程序集包含到 SQL Server 2012 中

> ID：14519405
> 
> 赞同：2
> 
> 时间：2013-01-25T10:00:13.520
> 
> 标签：sql-server, .net-assembly

我遇到了以下问题。当我尝试将程序集添加到 SQL Server 2012 时，出现以下错误：

> 程序集“iAnywhere.Data.SQLAnywhere.v4.0”是指程序集“system.data.entity，版本=4.0.0.0，文化=中性，publickeytoken=b77a5c561934e089。”，它不在当前数据库中。SQL Server 试图从引用程序集的同一位置定位并自动加载指定程序集，但操作失败（原因：2（找不到指定的文件。））。将指定的程序集加载到当前数据库中并再次尝试请求。

之后，我尝试添加描述中指定的程序集并得到以下信息：

> 程序集“system.runtime.serialization，版本 = 4.0.0.0，文化 = 中性，publickeytoken = b77a5c561934e089。” 在目录 SQL 中找不到。注意力！可检测对象结构组件 Microsoft。NET 框架“system.data.entity，版本 = 4.0.0.0，文化 = 中性，publickeytoken = b77a5c561934e089，处理器架构 = msil。” 未在运行 SQL Server 的环境中进行全面测试。将来，如果您升级或维修此组件或。NET Framework 子例程 CLR 集成可能会停止工作。有关详细信息，请参阅 SQL Server 的文档。(.Net SqlClient 数据提供者)

所以我尝试了谷歌它并找到了这篇相关的连接文章：

[https://connect.microsoft.com/SQLServer/feedback/details/744584/unable-to-load-system-identitymodel-dll-assembly-into-sql-server-2012#details](https://connect.microsoft.com/SQLServer/feedback/details/744584/unable-to-load-system-identitymodel-dll-assembly-into-sql-server-2012#details)

有可能对我的问题做点什么吗？

# email - 为什么使用 JavaMail 的电子邮件日期是本地 Android 时间？

> ID：14519409
> 
> 赞同：0
> 
> 时间：2013-01-25T10:00:31.363
> 
> 标签：email, timezone, jakarta-mail

我编写了一个简单的邮件客户端，它使用 JavaMail 来阅读电子邮件。当我收到消息的日期时，它以我的 Android 配置的本地时间表示。

例如 Message-->Date.getString() 会给我一个不同的时间，具体取决于我的 Android 时区配置。但是，消息的日期在服务器上，对吗？所以 Android 时区配置应该不会影响任何事情。Android 和 JavaMail 是否秘密地将我的时区配置传递给服务器，以便我收到一个确实表达到我的语言环境区域的日期？

好吧，这并不烦人，我还是更喜欢这个，但我出于好奇......为什么？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:21:56.737

服务器返回带有时区的日期/时间，以便正确的 UTC/GMT 时间存储在 Date 对象中。Date.toString() 方法返回本地时区的日期。

# javascript - 使用 Three.js 和 CSS3DRenderer 获取 div/图像的真实屏幕宽度（以像素为单位）

> ID：14519412
> 
> 赞同：1
> 
> 时间：2013-01-25T10:00:38.257
> 
> 标签：javascript, css, 3d, three.js

真的一直在为这个苦苦挣扎。我有一个使用 Three.js 的 CSS3D 渲染器的程序，我试图以 div 的像素（包含单个图像）为单位获得投影的“真实”屏幕宽度。

我尝试在图像上使用 getBoundingClientRect() ，但从该函数返回的宽度和高度是错误的。我假设是由于视角问题。

我也尝试过这种方法，它给了我一个准确的中心坐标，来自 mrdoob 的这篇文章：[https ://stackoverflow.com/a/11605007](https://stackoverflow.com/a/11605007)

```
var width = window.innerWidth, height = window.innerHeight;
var widthHalf = width / 2, heightHalf = height / 2;

var projector = new THREE.Projector();
var vector = projector.projectVector( object.matrixWorld.getPosition().clone(), this.camera );

vector.x = ( vector.x * widthHalf ) + widthHalf;
vector.y = -( vector.y * heightHalf ) + heightHalf; 
```

不幸的是，我找到的所有获取对象的顶部、左角或任何角的方法都使用 CSS3DObject 不使用的几何对象（即获取角顶点的向量并投影这些向量参考：[https://stackoverflow。 com/a/14044103/2009076](https://stackoverflow.com/a/14044103/2009076)）。

任何人都知道如何做到这一点？简而言之，我只想在 Three.js CSS3D 场景中获得一个 div 的真实屏幕尺寸（紧密地围绕它的 img）。最后，我想检测相机变焦是否使图像大于其原始尺寸（以像素为单位）。

谢谢！

# asp.net - 如何取消正在运行的 Web 部署过程？

> ID：14519414
> 
> 赞同：2
> 
> 时间：2013-01-25T10:00:40.573
> 
> 标签：asp.net, visual-studio-2010, web-deployment

我正在尝试使用 VS2010 One Click Publish 将我的 web 应用程序部署到本地测试服务器，似乎我在 web 部署对话框中设置了不正确的设置。直到我按下发布按钮，我才意识到这一点。

在认为部署花费了异常长的时间后，我查看了输出窗口并说出以下错误：

```
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(3847,5): Warning : Retrying the sync because a socket error (10054) occurred.  
Retrying operation 'Serialization' on object sitemanifest (sourcePath). Attempt 1 of 10. 
```

现在我想我知道我做错了什么，这个问题与此无关。

每次尝试大约需要三到四分钟。当它正在做这样的事情时，我怎样才能停止 Web 部署过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:47:39.403

您可以在发布过程中按 CTRL-BREAK 以取消该过程。

# code-coverage - 声明覆盖率和决策覆盖率之间的区别

> ID：14519416
> 
> 赞同：34
> 
> 时间：2013-01-25T10:00:43.837
> 
> 标签：code-coverage, metrics

**据说语句覆盖**是为了确保代码中的每条语句至少执行一次。据说
**决策/分支覆盖测试决策的每个分支/输出都被测试，即两个假/真分支中的所有语句都将被执行。**
但不一样吗？在语句覆盖率中，我需要执行所有语句，所以我想它只能通过运行所有可能的方式来完成。我知道我在这里遗漏了一些东西..

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2015-08-25T09:16:21.820

Paul 的回答并不完全正确，至少我认为是这样（根据 ISTQB 的定义）。语句、决策/分支和条件覆盖之间存在相当大的差异。我将使用另一个答案中的示例，但做了一些修改，因此我可以展示所有三个测试覆盖率示例。此处编写的测试为每种类型提供了 100% 的测试覆盖率。

```
if(a || b)) {
    test1 = true;
}
else {
    if(c) {
      test2 = true
    }
} 
```

我们在这里有两个语句 - if(a||b) 和 if(c)，以充分解释这些覆盖率差异：

1.  **语句覆盖**必须至少测试每个语句一次，所以我们只需要两个测试：
    *   a=true b=false - 这给了我们路径 if(a||b) true -> test1 = true
    *   a=false, b=false and c=true - 这给了我们路径：if(a||b) false -> else -> if(c) -> test2=true。

这样我们就执行了每一条语句。

2.  **分支/决策覆盖**需要再进行一项测试：

    *   a=false, b=false, c=false - 这将我们带到第二个 if 但我们正在执行该语句的错误分支，该分支未在语句覆盖范围内执行

    这样我们就测试了所有分支，这意味着我们经历了所有路径。

3.  **条件覆盖**需要另一个测试：

    *   a=false, b=true - 通过与第一个测试相同的路径，但在 OR 语句 (a||b) 中执行另一个决定以通过它。

这样我们就测试了所有条件，这意味着我们遍历了所有路径（分支）并在每个条件下触发了它——第一个“if”语句在第一个测试中为真，因为 a=true 触发了它，而在最后一个测试中，因为b=true 触发了它。当然，有人可能会争辩说，a=true 和 b=true 的情况也应该被测试，但是当我们检查 'or' 的工作方式时，我们可以看到它是不需要的，变量 c 也可以是任何值在这些测试中，它没有被评估。

至少我是这样解释的。如果有人仍然感兴趣:)

编辑：在我最近发现的大多数来源中，决策/分支覆盖术语是等效的，我描述为决策覆盖的术语实际上是条件覆盖，因此更新了答案。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2017-12-13T01:19:03.217

如果测试有**完整的分支覆盖，那么我们可以说它也有完整的语句覆盖**，但反之则不然。

**100% 分支覆盖率 => 100% 语句覆盖率**

**100% 的语句覆盖率并不意味着 100% 的分支覆盖率**

原因在于分支覆盖除了执行所有语句之外，我们还应该验证测试是否执行了所有分支，这可以解释为覆盖控制流分支中的所有边缘

```
if(a){
   if(b){
     bool statement1 = true;
   }
} 
```

a = true, b = true 将给出 100% 的语句覆盖率，但不是分支覆盖率

[![在此处输入图像描述](../Images/a0e34666fb39775fa9222ecf3c9b0f27.png)](https://i.stack.imgur.com/QrUkv.png)

在分支覆盖中，我们需要**覆盖所有边缘**，我们在上图中以红线显示的语句覆盖中遗漏了这些**边缘**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-01-19T16:35:39.450

好问题。我经常使用的解释是，没有 else 分支的 if 语句仍然有一个不可见的“空”else 语句：

*   简单的语句覆盖只是坚持所有实际存在的语句都真正执行。

*   分支覆盖坚持即使是不可见的 else 分支也会被执行。

没有默认情况的 switch 语句和重复直到循环也会发生类似的情况。分支覆盖要求执行默认情况，并且重复直到至少执行两次。

代码示例：

```
if (passwordEnteredOK()) {
    enterSystem();
} 
/* Invisible else part 
else {
  // do nothing
}
*/ 
```

通过语句覆盖，您只需检查是否使用正确的密码即可使用系统。通过分支覆盖，您还可以测试使用不正确的密码您将*不会*进入系统。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-06T09:52:02.077

你可能有这样的声明：

```
if(a || b || (c && d && !e)) {
    test1 = true;
} else {
    test2 = false;
} 
```

如果您的代码覆盖率表明 test1 和 test2 行都被命中，那么您有语句覆盖率，但要获得完整的分支覆盖率，您需要测试 a 何时为真、a 为假但 b 为真、a 和 b 为假时但 c 和 d 为真， e 为假，等等。

分支覆盖覆盖了分支选择的每一个潜在组合，因此很难实现 100% 的覆盖。

# iphone - IOS 应用程序的安全码

> ID：14519426
> 
> 赞同：1
> 
> 时间：2013-01-25T10:01:26.650
> 
> 标签：iphone, ios, objective-c, security

目前，我们正在为我们公司开发跟踪应用程序。为了使这个应用程序更安全，我们想在首次启动时询问用户一个安全码。此安全代码很可能是客户编号。

用户使用他的跟踪和跟踪代码向服务器发送请求，服务器将检查安全代码和跟踪和跟踪代码是否链接。

我的问题是将安全代码存储在应用程序中的最佳方式是什么，以便应用程序可以请求它，并将跟踪和跟踪发送到服务器。我们希望用户只在第一次启动时输入安全码。

```
[[NSUserDefaults standardUserDefaults] boolForKey:@"security code"]; 
```

这是一个选择吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T10:10:46.123

对于您希望存储在设备上的任何安全数据，我强烈建议您使用钥匙串。然后，您可以检查钥匙串中是否存在代码，并在可用时使用它。

请参阅下面的文档，让您开始使用钥匙串！

**钥匙串概念** [https://developer.apple.com/library/ios/#documentation/security/Conceptual/keychainServConcepts/02concepts/concepts.html#//apple_ref/doc/uid/TP30000897-CH204-TP9](https://developer.apple.com/library/ios/#documentation/security/Conceptual/keychainServConcepts/02concepts/concepts.html#//apple_ref/doc/uid/TP30000897-CH204-TP9)

**如何在 iOS 上实现** [https://developer.apple.com/library/ios/#documentation/security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html](https://developer.apple.com/library/ios/#documentation/security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)

**参考** [https://developer.apple.com/library/ios/#documentation/security/Reference/keychainservices/Reference/reference.html#//apple_ref/doc/uid/TP30000898](https://developer.apple.com/library/ios/#documentation/security/Reference/keychainservices/Reference/reference.html#//apple_ref/doc/uid/TP30000898)

**示例项目** [https://developer.apple.com/library/ios/#samplecode/GenericKeychain/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007797](https://developer.apple.com/library/ios/#samplecode/GenericKeychain/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007797)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T23:12:18.863

`user1805901> This security code will most likely be the customer number.`

这有多可猜？如果丢失，您可能需要查看 UUID。在服务器上提供从 UUID 到客户编号的映射。

`WDUK> For any secure data you wish to store on the device, I strongly advise you use the Keychain.`

除了 Keychain，您还必须查看`kSecAttrAccessibleWhenUnlocked`、`kSecAttrAccessibleAfterFirstUnlock`、`kSecAttrAccessibleAlways`、`kSecAttrAccessibleWhenUnlockedThisDeviceOnly`、`kSecAttrAccessibleAfterFirstUnlockThisDeviceOnly`和`kSecAttrAccessibleAlwaysThisDeviceOnly`。

`kSecAttrAccessibleAlways`并且`kSecAttrAccessibleAlwaysThisDeviceOnly`是有毒的，不应该使用，因为钥匙串会泄露数据。有关详细信息，请参阅[iOS 钥匙串弱点](http://sit.sit.fraunhofer.de/studies/en/sc-iphone-passwords-faq.pdf)（它变得更好，但它仍然可能是一个问题）。

`*ThisDeviceOnly`表示该密钥不包含在对其他设备的还原中。它有助于一些复制/粘贴攻击。

而且如果你不想把秘密放在云端，我相信 Keychain 属性需要包含`com.apple.MobileBackup`. 有关详细信息，请参阅[技术问答 QA1719](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)。

杰夫

# jakarta-ee - 在应用程序运行时编辑 WEB-INF 中的资源

> ID：14519427
> 
> 赞同：2
> 
> 时间：2013-01-25T10:01:30.863
> 
> 标签：jakarta-ee, servlets, jsf-2

我可以像这样在我的 WEB-INF 文件夹中获取一个资源的 InputStream：

```
 ExternalContext externalContext = facesContext.getExternalContext();
    InputStream in = externalContext.getResourceAsStream("/WEB-INF/config.xml"); 
```

现在我想在运行时编辑这个文件，但我不知道如何覆盖这个文件。有没有比创建 FileOutputStream 到绝对路径更好的方法？即使不是，我仍然需要一种方法来获取文件的绝对路径（WEB-INF 文件夹的绝对路径）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T13:25:19.507

至于具体问题，你可以得到文件的绝对路径，如下所示：

```
ExternalContext externalContext = facesContext.getExternalContext();
String realPath = externalContext.getRealPath("/WEB-INF/config.xml");
FileOutputStream output = new FileOutputStream(realPath);
// ... 
```

至于具体的功能要求，有两个可能的主要问题：

1.  `getRealPath()``null`当容器配置为在内存而不是磁盘上扩展 WAR 文件时将返回。那么就没有物理磁盘文件系统路径了。没有办法获得内存中位置的“文件路径”。

2.  即使它返回一个有效路径，在本地磁盘文件系统上扩展的 WAR 结构中所做的所有更改都会在您重新部署 WAR 时丢失，甚至在某些服务器配置中也将在您重新启动服务器时丢失。原因很简单，这些更改不包含在原始 WAR 文件中。您基本上需要提取 WAR，在其中进行更改，再次打包 WAR 并触发服务器的重新部署。这在运行时没有任何意义。

换句话说，您正在寻找错误方向的解决方案。您需要准备一个固定的本地磁盘文件系统路径，并改为读取/写入它。另一种方法是使用 SQL 数据库代替或非常可能[`java.util.prefs.preferences`](http://docs.oracle.com/javase/6/docs/api/java/util/prefs/Preferences.html)。

### 也可以看看：

*   [在基于 servlet 的应用程序中放置以及如何读取配置资源文件？](https://stackoverflow.com/questions/2161054/where-to-place-configuration-properties-files-in-a-jsp-servlet-web-application/)

# 3d - 搅拌机 3D 打印

> ID：14519428
> 
> 赞同：1
> 
> 时间：2013-01-25T10:01:34.023
> 
> 标签：3d, blender

我正在尝试从 Blender 创建 .stl 文件以进行 3D 打印。我创建了一个创建曲线的脚本。然后我旋转这条曲线并得到一个管状网格。Blender 中的尺寸是正确的（和公制）。

现在，如果我将其导出为 .stl。并在 3D 打印软件 (Cubify) 中导入尺寸总是错误的。我的印刷品有 0 mm ³的体积。

我回到 Blender 向网格添加了一个 Solidify 修改器，厚度为 1 毫米（其余选项我保留默认）。再次在 Cubify 中，我的体积为 0 mm3。

我的问题：

1.  是否有一个**很好**的教程可以引导我完成创建曲线、使用 python 网格化然后将它们转换为可 3D 打印的东西的过程？
2.  如何解决尺寸问题？我已经打印了好几张，但总是很头疼。我想知道这是否可能是一个 .stl 问题，如果是，如何解决。
3.  除了 Solidify Modifier 之外，还有其他选项可以为网格添加 1 mm 的厚度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-11T07:56:46.153

关于你的维度问题：

如果您使用 Blender 进行 3D 打印，您需要记住安装 3D 打印工具箱，否则您会收到关于非流形对象的各种错误。

第一步应该是通过将单位从默认“单位”更改为毫米来设置默认场景，然后设置网格选项以显示打印体积的大小。

您不应该为网格添加厚度。从一个圆柱体或类似的东西开始，然后用另一个更小的圆柱体减去它。然后你会发现自己有一个像你想要的空心管物体。

# jquery - CarouFredSel 使分页响应

> ID：14519429
> 
> 赞同：0
> 
> 时间：2013-01-25T10:01:34.017
> 
> 标签：jquery, css, mobile, pagination, caroufredsel

我正在考虑使我现有的轮播具有响应性，我有分页并显示所有页面，但是它包含许多页面，因此当我尝试将其放入较小的屏幕时，数字会进入第二行。我也有下一个和后退按钮。

我想要的是能够显示，例如，从 1 到 5 的数字和三个点（...），然后在第 5 页单击下一步时，显示 6 到 10 等等。在较小的屏幕中查看时，每个页面将包含一个项目，或者可能包含 2 个，一个在另一个之下。

有没有人实现了类似的东西可以给我一些示例代码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T01:43:47.073

在他们的示例/灵感页面上有一个示例可以执行类似的操作。它是 #38 - “Carousel with truncated pagination because of the large amount of items”，它提供了示例代码，允许您确定分页范围开始和结束处的页数，以及中间的数字，全部之间截断。例如 [1]...[4][5][6]...[15]

它会在您浏览时更新（示例是自动播放并不断更新分页）。

在这里找到它：http: [//coolcarousels.frebsite.nl/c/38/](http://coolcarousels.frebsite.nl/c/38/)

# google-app-engine - Google 通讯录、Google App Engine 1.7.5 JAVA 上的 Google Drive

> ID：14519431
> 
> 赞同：0
> 
> 时间：2013-01-25T10:01:40.120
> 
> 标签：google-app-engine, google-drive-api, guava, google-api-java-client, google-contacts-api

使用

```
gdata-contacts-3.0.jar, 
google-api-services-drive-v2-rev43-1.12.0-beta.jar,
guava-13.0.1.jar 
```

Google 云端硬盘有效，但 Google 通讯录无效。（我尝试了各种解决方案，但从未在 Google App Engine 上一起工作，因为它在本地开发模式下工作。）

调用：ContactsService gservice = new ContactsService("...");

> 引起：java.lang.NoSuchMethodError: com.google.common.collect.ImmutableSet.copyOf([Ljava/lang/Object;)Lcom/google/common/collect/ImmutableSet;
> 
> 在 com.google.gdata.wireformats.AltFormat$Builder.setAcceptableTypes(AltFormat.java:399) 在 com.google.gdata.wireformats.AltFormat$Builder.setAcceptableXmlTypes(AltFormat.java:387) 在 com.google.gdata.wireformats .AltFormat.(AltFormat.java:49) 在 com.google.gdata.client.Service.(Service.java:558)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:52:27.137

我在我的项目中遇到了同样的问题，但是当我使用 gdata 1.47.1 时解决了。它可以在[http://code.google.com/p/gdata-java-client/downloads/detail?name=gdata-samples.java-1.47.1.zip找到](http://code.google.com/p/gdata-java-client/downloads/detail?name=gdata-samples.java-1.47.1.zip)

当我使用 Maven 时，我将它上传到我的 Nexus。在 pom.xml 中添加了依赖项并开始工作。

还要注意一件事，我使用的是 guava 13.0。如果对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:15:48.757

好的，现在它可以工作了。没有人能看到我曾经

> **从 Eclipse 插件添加 Google API。**

这不仅会添加不能组合使用的新 jar，还会将所有旧 jar 留在我的项目“.google_apis ...”的子文件夹中。不知何故**，他们进入了 Google App Engine**，开始了冒险之旅。

删除这些后......一切正常。再一次，正如到处提到的那样，我使用的是混合番石榴版本散装，人性不希望被激活。

# cakephp - 如何在 cakePHP 中创建 ARO 的用户和组

> ID：14519436
> 
> 赞同：0
> 
> 时间：2013-01-25T10:02:01.517
> 
> 标签：cakephp

嗨，我对创建 ARO 用户和组以及在哪个控制器中定义它们感到困惑，请帮助我提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:43:05.797

ACL 通常会变得混乱和复杂。大多数时候，ACL 对于我们开发的大多数 APP 来说都是多余的。我认为带有管理员路由的角色基础身份验证更容易设置，并且对于大多数情况来说已经足够了。在我开发的第一个 CakePHP 中，我使用了 ACL，但实际上并不需要它，尽管这是一个很好的学习机会。我目前正在升级/重新设计到 2.0，并且我正在为该站点使用基于角色的管理员和成员。

如果您正在尝试学习，我会说去尝试并使用以下 CakePHP 教程：[CakePHP 简单 Acl 控制器应用程序教程](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html)。要管理它，可能非常困难。我建议使用以下插件：[Alaxos - Plugin ACL 2.0](http://www.alaxos.net/blaxos/pages/view/plugin_acl_2.0)。这样做的缺点是，当您需要进行简单的更改（例如向现有控制器添加功能）时需要很长时间来处理，这可能不值得，特别是如果您使用具有执行限制的共享主机。

底线：如果您真的/绝对需要您的网站，请使用它。如果不远离ACL。

# java - Java Applet 的 NoClassDefFoundError

> ID：14519443
> 
> 赞同：0
> 
> 时间：2013-01-25T10:02:29.680
> 
> 标签：java, applet, noclassdeffounderror

我创建了一个 Java Applet，它使用了我也创建的另一个 Java 类。Java 类创建到远程设备的 Telnet 会话（使用包 org.apache.commons）和 Applet 调用此类的方法。任何 Telnet 命令的答案都以字符串形式接收，Applet 应将其打印在网页中。这是Applet的代码：

```
package m2mcom.web;
import m2mcom.entities.AutomatedTelnetClient;
import java.applet.*;
import java.awt.*;

public class Displaytext extends Applet {
    String text;
    public void init() {
        AutomatedTelnetClient telnet = new AutomatedTelnetClient("192.168.1.1");
        String text = telnet.sendCommand("display device");
        telnet.disconnect();
    }   
    public void paint(Graphics g) {
        g.drawString(text,40,20);
    }
} 
```

当我执行 .html 文件时，我收到以下错误消息：

```
NoClassDefFoundError. DisplayText(wrong name: m2mcom/web/DisplayText) 
```

总之，我不知道我是否没有正确安排文件目录，或者根本不可能以这种方式从 Applet 调用其他方法类。谁能告诉我我做错了什么？

## HTML

此 HTML 是从评论中复制并格式化的。

```
<HTML>
<HEAD>
</HEAD>
<BODY>
<div>
<APPLET
    CODE="Displaytext.class"
    WIDTH="800"
    HEIGHT="500">
</APPLET>
</div>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:07:56.140

取类名的最后部分：

```
NoClassDefFoundError. DisplayText(wrong name: m2mcom/web/DisplayText) 
```

&

```
public class Displaytext extends Applet { 
```

我们最终得到了这两个（非等价的）字符串：

```
DisplayText
Displaytext 
```

注意到区别了吗？

## 提示

1.  `AutomatedTelnetClient("192.168.1.1")`对我来说意味着这个小程序将尝试到达跨站点。为此，它需要经过数字签名和信任。
2.  不要在这个千年中使用 AWT 组件进行编码。替换`Applet`为`JApplet`。
3.  不要`paint(Graphics)`仅仅为了绘制`String`！将其添加到文本组件并将组件添加到小程序。
4.  但如果它确实需要自定义绘画，请不要在顶级容器中进行。

# javascript - 使用 slideUp/slideDown 从最后一张幻灯片到第一张幻灯片

> ID：14519445
> 
> 赞同：0
> 
> 时间：2013-01-25T10:02:40.130
> 
> 标签：javascript, jquery

我制作了我的滑块，但是当它到达最后一张幻灯片并且必须从第一张开始重新开始时，它的表现很奇怪。在到达最后一张幻灯片之前，它会**向上**滑动，但当它必须到达第一个幻灯片时，它会**向下**滑动。它有点错过第一个。我的意思是 - 它显示它（甚至向下），但在我的分页点上它不会将 class .selected 添加到第一个。之后，它会再次正常运行，直到下一个周期。

为什么会发生这两件事。我试图`if(active_slide.index() == last_slide.index())`用`if(active_slide.next().length == 0)`/and `<`/;改变 `if(active_slide.is(last_slide))`......它没有帮助。

这是 jsfiddle [http://jsbin.com/iwiroq/4/edit](http://jsbin.com/iwiroq/4/edit)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:01:46.390

基于@yabol 的[回答](https://stackoverflow.com/a/14519617/1741542)，我构建了一个带有滚动图像列表的最小示例

HTML：

```
<div class="image-slider">
    <ul>
        <li><img src="http://lorempixel.com/400/200/sports" alt="" /></li>
        <li><img src="http://lorempixel.com/400/200/food" alt="" /></li>
        <li><img src="http://lorempixel.com/400/200/city" alt="" /></li>
        <li><img src="http://lorempixel.com/400/200/nature" alt="" /></li>
    </ul>
</div> 
```

JS：

```
var image_list = $('.image-slider li');
image_list.hide();
var first_child = '.image-slider li:first-child';
var last_slide = $('.image-slider li:last-child');
var last_index = last_slide.index();
var active_slide = $(first_child);
active_slide.show();
setInterval(next, 5000);

function next(){
    active_slide.slideUp();
    if (active_slide.index() >= last_index)
        $(first_child).insertAfter(active_slide);

    active_slide = active_slide.next();
    active_slide.slideDown();
} 
```

[JSFiddle](http://jsfiddle.net/2LNJD/)或[Tinker](https://tinker.io/e3377)用于播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:13:32.940

它向下而不是向上滑动的原因是因为列表的第一个元素在 dom 树中高于最后一个元素。您可以通过添加第一个元素也作为最后一个元素来解决它，并且最后一个元素被加载，您首先将其交换。

# powershell - 如何使用 PowerShell 远程确定存储类型（SAN/NAS/本地磁盘）？

> ID：14519446
> 
> 赞同：6
> 
> 时间：2013-01-25T10:02:39.977
> 
> 标签：powershell, storage, nas, san

我必须收集我们环境中每个服务器的附加存储类型：数百个 W2K3/W2K8 服务器。

脚本对于确定附加存储是否是这些存储`SAN / SAN mirrored / NAS / local`或这些存储的组合非常有用。问题是我还没有真正找到任何好的解决方案。

我正在考虑一个脚本，我能想到的最好的方法是执行以下操作：

*   如果服务器使用`SAN`，则始终安装 Veritas Storage Foundation，因此我会使用 gwmi win32_product 进行搜索。这真的很慢，如果存储是 SAN 或 SAN 镜像，这不会提供信息。
*   如果附加的存储是`NAS`，则必须有一个 ISCSI 目标 ip，我会以某种方式搜索它。

我真的不认为这些方法是可以接受的。你能帮我找到一种更好的方法来以某种方式确定附加的存储类型吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-12T19:18:25.313

我找到了一篇关于在powershell中访问VDS服务的文章。[获取有关集群 LUN 的更多信息](http://blogs.msdn.com/b/taylorb/archive/2010/07/01/getting-more-information-about-you-cluster-lun-s-part-3-of-3.aspx)

稍微按摩一下代码以获取类型。甚至在 2003 年也有效。

```
[System.Reflection.Assembly]::LoadWithPartialName("Microsoft.Storage.Vds") | Out-Null
$oVdsServiceLoader = New-Object Microsoft.Storage.Vds.ServiceLoader
$oVdsService = $oVdsServiceLoader.LoadService($null) 
$oVdsService.WaitForServiceReady() 
$oVdsService.Reenumerate() 
$cDisks = ($oVdsService.Providers |% {$_.Packs}) |% {$_.Disks}
$cPacks = $oVdsService.Providers |% {$_.Packs}

foreach($oPack in $cPacks)
{
    If($oPack.Status -eq "Online")
    {
        foreach($oDisk in $oPack.Disks)
        {
            Write-Host "$($oDisk.FriendlyName) ( $($oDisk.BusType) )"
        }

        foreach($oVolume in $oPack.Volumes)
        {
            Write-Host "`t$($oVolume.AccessPaths) ( $($oVolume.Label) )"
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T07:16:19.763

您可能会在以下 WMI 类之一中找到信息：

Win32_LogicalDisk [http://msdn.microsoft.com/en-us/library/windows/desktop/aa394173(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394173(v=vs.85).aspx)

Win32_Volume [http://msdn.microsoft.com/en-us/library/windows/desktop/aa394515(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394515(v=vs.85).aspx)

Win32_DiskDrive [http://msdn.microsoft.com/en-us/library/windows/desktop/aa394132(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394132(v=vs.85).aspx)

然后...做类似的事情：

```
Get-AdComputer Server* | Foreach-Object { Get-WmiObject -Class Win32_DiskDrive -ComputerName $_.Name } 
```

# android - android从vcf文件中读取联系人

> ID：14519448
> 
> 赞同：1
> 
> 时间：2013-01-25T10:02:56.250
> 
> 标签：android, contacts, vcf-vcard

[Android 如何发送多个联系人附加在单个 .vcf 文件中并发送到邮件？](https://stackoverflow.com/questions/12798001/android-how-to-send-multiple-contacts-are-attached-in-single-vcf-file-and-send)

我已经创建了所有联系人的 .vcf 文件，现在我想从 .vcf 文件中读取这些联系人，请帮助我，请不要提供此链接以读取[http://code.google.com/p/vcardio/](http://code.google.com/p/vcardio/)

我的 vcf 文件是这样创建的

```
BEGIN:VCARD
VERSION:2.1
N:;rohit;;;
FN:rohit
TEL;HOME;VOICE:855-904-6600
END:VCARD

BEGIN:VCARD
VERSION:2.1
N:;rks;;;
FN:rks
TEL;HOME;VOICE:887-276-5160
END:VCARD
BEGIN:VCARD
VERSION:2.1
N:kumar;rohit;;;
FN:rohit kumar
TEL;HOME;VOICE:981-442-3564
EMAIL;HOME:rks@gmail.com
END:VCARD 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T06:53:09.757

`SaveContact()`您可以通过使用以下代码添加方法来解决此问题：

```
private void SaveContact()
{
    String DisplayName = "LUIS R. FERNANDEZ";
    String MobileNumber = "7863763161";
    String HomeNumber = null;
    String WorkNumber = "3056627325";
    String emailID = "LRFernandez@msn.com";
    String company = "Keller Williams";
    String jobTitle = null; //"BROKER ASSOCIATE";
    String website = "www.kellerwilliams.com";
    //String add_off = "4949 Ponce DeLeon Blvd Suite 400 Miami Florida FL 33146"; 
    String street = "4949 Ponce De Leon Blvd Suite 400";
    String city = "Miami";
    String state = "Florida FL";
    String zipcode = "33146";
    String country = "United States";
    Bitmap snap = BitmapFactory.decodeResource(getResources(), R.drawable.luis_snap);
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    snap.compress(Bitmap.CompressFormat.JPEG , 100, stream);

    ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
    int rawContactInsertIndex = ops.size();

    ops.add(ContentProviderOperation
            .newInsert(ContactsContract.RawContacts.CONTENT_URI)
            .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, null)
            .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, null)
            .build());

    // exp
    ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
                 .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, rawContactInsertIndex)
                 .withValue(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE)
                 .withValue(ContactsContract.CommonDataKinds.StructuredPostal.FORMATTED_ADDRESS, null)
                 .withValue(ContactsContract.CommonDataKinds.StructuredPostal.TYPE, ContactsContract.CommonDataKinds.StructuredPostal.TYPE_WORK)
                 .withValue(ContactsContract.CommonDataKinds.StructuredPostal.STREET, street)
                 .withValue(ContactsContract.CommonDataKinds.StructuredPostal.CITY, city)
                 .withValue(ContactsContract.CommonDataKinds.StructuredPostal.REGION, state)
                 .withValue(ContactsContract.CommonDataKinds.StructuredPostal.POSTCODE, zipcode)
                 .withValue(ContactsContract.CommonDataKinds.StructuredPostal.COUNTRY, country)
                 //.withValue(StructuredPostal.TYPE, StructuredPostal.TYPE_WORK)
                 .build());

    //INSERT imAGE
    ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
              .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, rawContactInsertIndex)
              .withValue(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE)
              .withValue(ContactsContract.CommonDataKinds.Photo.PHOTO, 
                    stream.toByteArray())
              .build());

    // ------------------------------------------------------ Names
    if (DisplayName != null) {
        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(
                        ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(
                        ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE)
                .withValue(
                        ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME,
                        DisplayName).build());
    }
    // ------------------------------------------------------ Mobile Number
    if (MobileNumber != null) {
        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(
                        ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(
                        ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER,
                        MobileNumber)
                .withValue(ContactsContract.CommonDataKinds.Phone.TYPE,
                        ContactsContract.CommonDataKinds.Phone.TYPE_MOBILE)
                .build());
    }

    // ------------------------------------------------------ Home Numbers
    if (HomeNumber != null) {
        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(
                        ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(
                        ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER,
                        HomeNumber)
                .withValue(ContactsContract.CommonDataKinds.Phone.TYPE,
                        ContactsContract.CommonDataKinds.Phone.TYPE_HOME)
                .build());
    }

    // ------------------------------------------------------ Work Numbers
    if (WorkNumber != null) {
        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(
                        ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(
                        ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
                .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER,
                        WorkNumber)
                .withValue(ContactsContract.CommonDataKinds.Phone.TYPE,
                        ContactsContract.CommonDataKinds.Phone.TYPE_WORK)
                .build());
    }

    // ------------------------------------------------------ Email
    if (emailID != null) {
        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(
                        ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(
                        ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)
                .withValue(ContactsContract.CommonDataKinds.Email.DATA,
                        emailID)
                .withValue(ContactsContract.CommonDataKinds.Email.TYPE,
                        ContactsContract.CommonDataKinds.Email.TYPE_WORK)
                .build());
    }

    // ------------------------------------------------------ Organization
    if (company != null || jobTitle != null) {
        ops.add(ContentProviderOperation
                .newInsert(ContactsContract.Data.CONTENT_URI)
                .withValueBackReference(
                        ContactsContract.Data.RAW_CONTACT_ID, 0)
                .withValue(
                        ContactsContract.Data.MIMETYPE,
                        ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE)
                .withValue(
                        ContactsContract.CommonDataKinds.Organization.COMPANY,
                        company)
                .withValue(
                        ContactsContract.CommonDataKinds.Organization.TYPE,
                        ContactsContract.CommonDataKinds.Organization.TYPE_WORK)
                .withValue(
                        ContactsContract.CommonDataKinds.Organization.TITLE,
                        jobTitle)
                .withValue(
                        ContactsContract.CommonDataKinds.Organization.TYPE,
                        ContactsContract.CommonDataKinds.Organization.TYPE_WORK)
                .build());

        if (website != null)
        {
            ops.add(ContentProviderOperation
                    .newInsert(ContactsContract.Data.CONTENT_URI)
                         .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 
                                rawContactInsertIndex)
                         .withValue(ContactsContract.Data.MIMETYPE, 
                                ContactsContract.CommonDataKinds.Website.CONTENT_ITEM_TYPE)
                         .withValue(ContactsContract.CommonDataKinds.Website.URL, 
                                website)
                         .withValue(ContactsContract.CommonDataKinds.Website.TYPE, 
                                ContactsContract.CommonDataKinds.Website.TYPE_WORK)
                         .build());
        }
    }

    // Asking the Contact provider to create a new contact
    try 
    {
        getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
        Toast.makeText(getApplicationContext(),"Contact saved successfully", Toast.LENGTH_SHORT).show();
    } 
    catch (Exception e) 
    {
        e.printStackTrace();
        //Toast.makeText(getApplicationContext(),"Exception: " + e.getMessage(), Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:14:11.503

您可以使用[ez-vcard](http://code.google.com/p/ez-vcard)对其进行解析：

```
try{
    File file = new File(Environment.getExternalStorageDirectory()+"/vcards.vcf");
    List<VCard> vcards = Ezvcard.parse(file).all();
    for (VCard vcard : vcards){
      System.out.println("Name: " + vcard.getFormattedName().getValue());
      System.out.println("Telephone numbers:");
      for (Telephone tel : vcard.getTelephoneNumbers()){
        System.out.println(tel.getTypes() + ": " + tel.getText());
      }
    }
}catch(Exception e){e.printStackTrace();} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T06:20:39.693

```
VCardParser parser = new VCardParser();
            VDataBuilder builder = new VDataBuilder();

              //read whole file to string
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    new FileInputStream(file), "UTF-8"));

            String vcardString = "";
            String line;
            while ((line = reader.readLine())!= null) {
                vcardString += line + "\n";

            }
            reader.close();

            //parse the string
            boolean parsed = parser.parse(vcardString, "UTF-8", builder);
            if (!parsed) {
                throw new VCardException("Could not parse vCard file: " + file);
            }

            //get all parsed contacts
            List<VNode> pimContacts = builder.vNodeList;
            int c = pimContacts.size();
            pDialog.setMax(c);
            // do something for all the contacts

            for (VNode contact : pimContacts) {
                i++;
                String y = String.valueOf(i);
                ArrayList<PropertyNode> props = contact.propList;
                // contact name - FN property
                String HomeNumber = null;
                String DisplayName = null;
                String Add = null;
                String emailID = null;

                for (PropertyNode prop : props) {
                    if ("FN".equals(prop.propName)) {
                        DisplayName = prop.propValue;
                        // we have the name now
                        break;
                    }

                }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-14T06:37:54.497

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File(storage_path+vfile)),"text/x-vcard"); //storage path is path of your vcf file and vFile is name of that file.
startActivity(intent); 
```

# android - 恢复活动轮换显示的片段

> ID：14519451
> 
> 赞同：1
> 
> 时间：2013-01-25T10:03:06.320
> 
> 标签：android, android-fragments

我有一个片段，上面显示了一个主要片段。当我旋转屏幕时，正在重新创建活动。为了屏幕状态恢复目的，存储有关当前显示片段的信息的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T17:01:07.790

您可以使用 onSaveInstanceState 方法将值存储在包中：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);

    outState.putString(MY_FIRST_KEY,valueToSave);
} 
```

然后您可以恢复方法 onRestoreInstanceState 中的值

```
 @Override
 protected void onRestoreInstanceState(Bundle inState) {
    super.onRestoreInstanceState(inState);

    valueToSave = inState.getString(MY_FIRST_KEY);
 } 
```

您还可以在 TextViews 和 EditText 上设置一个名为“freezeText”的 xml 属性，该属性会保存已设置的任何文本。

# magento - Magento：关于链接的主商店需要在子商店中添加

> ID：14519453
> 
> 赞同：1
> 
> 时间：2013-01-25T10:03:14.340
> 
> 标签：magento

我有 magento 商店 joandjax.com，我创建了一个商店名称 shop，网址是 shop.joandjax.com。现在我在商店商店里关于主商店的链接。

意味着我想要 joandjax.com 页脚中的页面链接（链接：joandjax.com/about）到 shop.joandjax.com（需要像 joandjax.com/about 而不是 shop.joandjax.com/about）

请检查移动版本（页脚中的链接）

使用 xml 代码生成 url，例如：

关于aboutAbouttrue

它总是采用商店网址而不是主商店网址

# google-chrome-extension - Google chrome 扩展浏览器和页面操作

> ID：14519458
> 
> 赞同：3
> 
> 时间：2013-01-25T10:03:33.227
> 
> 标签：google-chrome-extension

有没有办法在已经实现 browser_action 的扩展中添加 page_action？

我想使用 browser_action 显示一个带有书签列表的弹出窗口，同时使用 page_action 为用户提供一种方法来为当前页面添加书签并将其加载到列表中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T10:06:39.050

迄今为止，您的清单中只能有`app`、和中的一个。所以，你们不能有和在一起。`browser_action``page_action``theme``browser action``page action`

```
// Pick one (or none)
  "browser_action": {...},
  "page_action": {...},
  "theme": {...},
  "app": {...}, 
```

# 解决问题

使用两个不同的 Extensions 进行[跨扩展消息通信](https://developer.chrome.com/extensions/extension.html#event-onMessageExternal)。

# 参考

*   [清单文件](https://developer.chrome.com/extensions/manifest.html)

# jsp - jsp中使用后POJO留在内存中

> ID：14519473
> 
> 赞同：0
> 
> 时间：2013-01-25T10:04:35.450
> 
> 标签：jsp, tomcat, spring-mvc, profiling, profiler

我有基于tomcat的servlet。Servlet 有基于注解类的 mvc，看起来像（伪代码）

```
@RequestMapping("/myAction")
public String getAction(Model m) {
     DBConnection conn = new DBConnection();//connect to DB
     Result r = conn.getDataOfAction();//run some sql query and return result
     ArrayList<POJO> list = r.getResult();//24 instances of class, for example
     m.put("list",list); //It's for resolving pojo into JSP page
     String result = CustomViewResolver.getString(viewName, list);//i just point to ViewName and get parsed jsp page
     //list.clear();
     return result;
} 
```

当我按原样开始使用评论`//list.clear()`进行分析时。`POJO`即使页面已经在客户端呈现后，我也会遇到所有情况都留在内存中的情况。当我`//list.clear()`在所有`POJO`垃圾收集时取消注释时，除了指向 forEach`jstl`标记的垃圾。

![在此处输入图像描述](../Images/2b9aecc5e4e7992217e4eb2b0474a29c.png)

我冲洗并关闭了所有东西`Stream's`，`Writer's`但似乎无关紧要。这是正常的方式清除列表，还是我做错了什么？谢谢。

UPD：我尝试其他情况，当我使用`jstl`

```
 <c:forEach items=${POJOLIST} var="pojo"></c:forEach> 
```

都`pojo's`留在记忆里。`${POJOLIST}`但是，如果我在`jsp`不使用的情况下打印`jstl`，那么当所有 pojo 垃圾按照我想要的方式收集时。`jstl`的`var`重新创建对象并将其保存在内存中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:09:52.877

如果您使用@SessionAttribute 或手动管理会话，“对象命令”将保留在会话中。因此，一旦你完成了控制器，你需要告诉控制器你的动作已经完成并且 Sessions 变量不再有用并且可以被清理了：

```
@RequestMapping("/myAction")
public String getAction(Model m, SessionStatus status) {
     ....
     m.put("list",list); 
     status.setComplete(); //tells the controller you're done with your actions and will clean all sessions variables
     return view;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T20:08:07.543

这是我在分析我的应用程序时遇到的问题。原来是因为 `enablePooling`在 web.xml jsp servlet 中默认开启，对象不会像你期望的那样被释放。唯一的解决方案是关闭 enablePooling。看看这两个提出的错误

[https://issues.apache.org/bugzilla/show_bug.cgi?id=25623](https://issues.apache.org/bugzilla/show_bug.cgi?id=25623)

[https://issues.apache.org/bugzilla/show_bug.cgi?id=16001](https://issues.apache.org/bugzilla/show_bug.cgi?id=16001)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-03T06:55:01.810

我最近遇到了同样的问题。我已经用谷歌搜索了很长时间来解决这个问题。最后我通过设置`enablePooling`为`false`in解决了它`$TOMCAT_HOME/conf/web.xml`。（参数的默认值为 true。）

```
<init-param>
    <param-name>enablePooling</param-name>
    <param-value>false</param-value>
</init-param> 
```

# c++ - c ++初始化multiset迭代器为NULL

> ID：14519475
> 
> 赞同：1
> 
> 时间：2013-01-25T10:04:54.093
> 
> 标签：c++, null, iterator, initialization

问题是我想将一个**多集迭代器**初始化为某个值，以便稍后检查是否有一些成功分配给我的迭代器。现在在我的程序的某个周期中没有这个初始化，我会得到一些垃圾和所有崩溃。在伪代码中，我会这样想：

```
multiset<whateverclassA,whateverclassB>::const_iterator init_me = NULL;
...//if succesfull, something is assigned to init_me iterator
if (init_me != NULL)
//do something 
```

但是它不是一个常用的指针，所以简单的 NULL 可能还不够。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:06:43.810

使用[`std::multiset::end`](http://en.cppreference.com/w/cpp/container/multiset/end). 这也是算法将返回的值，例如[`std::multiset::find`](http://en.cppreference.com/w/cpp/container/multiset/find)如果找不到该值：

```
multiset<whateverclassA,whateverclassB>::const_iterator 
    init_me = your_multiset.end();

/* ... */

if (init_me != your_multiset.end())
    //do something 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T10:07:55.103

该变量`init_me`是一个对象实例，并且`NULL`是一个指针。非指针实例不能与指针进行比较。

您应该将其设置`init_me`为另一个迭代器，这意味着“无迭代器”，例如`end`，并与之进行比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T10:08:17.143

如果所讨论的多重集始终存在并且在您声明时确定`init_me`（即迭代器只能指向一个可能的多重集），您可以将`mymultiset.end()`其用作标记。

（请注意，此迭代器不指向容器的最后一个元素，而是指向“结束”，即它是一个特殊值。这就是使其可用于标记目的的原因。注意仅检查其他迭代器与`mymultiset.end()`，*而不是*取消引用它。取消引用`end()`或过去的迭代器是未定义的行为。）

# android - 比较 - 带有 JiBX 的 XML 或带有 Jackson 的 JSON？

> ID：14519479
> 
> 赞同：3
> 
> 时间：2013-01-25T10:05:09.500
> 
> 标签：android, xml, json, jackson, jibx

我需要将数据从文件导入到我的应用程序。显而易见的选择是 XML 和 JSON。我听说 JSON 是轻量级的，当用 Jackson 解析时，它提供了良好的性能。但我也听说用于 XML 的 JiBX 速度很快，并且使用 XMLpull 来提供良好的性能。我想知道选择哪个选项以及为什么？我可以将 XML 与 JiBX 和 JSON 与 Jackson 进行速度比较吗？另外，我想知道 Google Gson 在 JSON 解析方面是否比 Jackson 更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:14:13.333

Json 是轻量级的。如果要使用大文件使用，JSon 与 Jackson。

这篇文章给出了很好的解释（特别是阅读注：）。你有xml

DOM、PULL 和 SAX 等不同类型。但据我所知，JSON 是最好的。大型

文件，更喜欢杰克逊。[http://www.javabeat.net/2011/05/androids-json-parser/](http://www.javabeat.net/2011/05/androids-json-parser/)

对于杰克逊和 gson。看看这个链接。

[杰克逊VS。格森](https://stackoverflow.com/questions/2378402/jackson-vs-gson)

所以在比较 xml 和 json 时，我总是建议你使用 json，因为它是 android 的轻量级数据。所以它会很快加载和显示数据。还有格森，

这取决于您的项目。请看上面的链接比较。你会明白的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T19:11:09.237

此外，如果您需要，杰克逊也可以使用[https://github.com/FasterXML/jackson-dataformat-xml](https://github.com/FasterXML/jackson-dataformat-xml)

我也同意 Jackson+JSON 将比任何基于 XML 的解决方案更快（根据[https://github.com/eishay/jvm-serializers](https://github.com/eishay/jvm-serializers)）。JibX 还不错，并且对于大多数用途来说可能足够快（就像许多其他选项一样）。但如果速度是你的事，杰克逊会更快的选择你提到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T10:03:48.187

我同意在纯粹的性能方面，JSON 将比 JiBX 更快。

您选择的工具应取决于您传输的数据。

如果您有具体的数据定义，请使用 JiBX。JiBX 特别擅长创建和检索复杂的数据对象。JiBX 将确保您的数据正确，并自动将您的数据与 Java 对象相互转换。

如果您想要更大的灵活性，请使用 JSON。JSON 不会检查您的数据是否正确。

例如，当您在 JiBX 中创建对象时：

```
Person person = new Person();
person.name = "Don";
person.age = 52; 
```

当您在 JiBX 中检索信息时：

```
System.out.println("Name: " + person.name);
System.out.println("Age: " + person.age); 
```

在 JSON 中，您的代码如下所示：

```
JSONObject person = new JSONObject();
person.put("name", "Don");
person.put("age", new Integer(52)); 
```

要检索传输的信息：

```
String name = person.get("name");
long age = person.get("age"); 
```

如您所见，JiBX 代码更易于阅读，但 JSON 更灵活，因为您没有模式定义。

在任一解决方案中，您的代码在您的 Android 客户端和您的 java 服务/服务器中完全相同。

我希望这有帮助。

Don Corley - JiBX 贡献者

# java - Java 图形闪烁

> ID：14519481
> 
> 赞同：10
> 
> 时间：2013-01-25T10:05:12.253
> 
> 标签：java, windows, java-2d, game-development

好的，我了解您对 SSCCE 的需求，所以我创建了（我的第一个）一个。

我设法用不到 200 行代码复制了这个问题。在我的系统上，这个演示完美地编译并运行（当然只有闪烁仍然存在）。我剥离了一切与它无关的东西。所以基本上我们现在有两个源文件：屏幕管理器和游戏管理器。

屏幕管理器：http: [//pastebin.com/WeKpxEXW](http://pastebin.com/WeKpxEXW)

游戏管理器：http: [//pastebin.com/p3C5m8UN](http://pastebin.com/p3C5m8UN)

您可以使用这个 make 文件编译此代码（我使用 Linux 的移植版 make for Windows）： CC = javac BASE = nl/jorikoolstra/jLevel CLASS_FILES = classes/$(BASE)/Game/GameMain.class classes/$ (BASE)/Graphics/ScreenManager.class

```
jLevel: $(CLASS_FILES)
    @echo Done.

classes/%.class : src/%.java
    @echo Compiling src/$*.java to $@ [command: $(CC) src/$*.java ] ...
    @$(CC) -Xlint:unchecked -d classes -classpath src src/$*.java 
```

源文件放置在`/src`目录中的位置和目录中的类`/classes`。

编译为字节码后，可以使用以下 .bat 文件启动游戏：

```
@set STARUP_CLASS=nl.jorikoolstra.jLevel.Game.GameMain
@set ARGUMENTS=1280 1024 32
@java -cp classes;resources %STARUP_CLASS% %ARGUMENTS% 
```

请注意，该`ARGUMENT`变量取决于您自己的屏幕设置，并且您必须更改它以便游戏以适合您屏幕的分辨率显示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T14:15:06.237

我明白它为什么闪烁了----

`BufferStrategy`正在从组件的`paint()`方法中进行单独的绘画工作，它们似乎使用不同的`Graphics`对象，并且它们以不同的速度刷新——

`paint()`之前调用时`show()`，没关系。但

当`paint()`在 之后调用时`show()`，它会将组件重新绘制为其初始的空白外观——因此会发生闪烁。

* * *

消除闪烁非常容易：( ) 的覆盖`paint()`方法，因为您不需要它做任何事情（可以让您更精确地控制绘画的东西）：`JFrame``GameMain``BufferStrategy`

```
@Override
public void paint (Graphics g) {} 
```

就这样。（我已经测试过了，它工作正常，希望这可能会有所帮助:)）

* * *

## ===== 更新 =====

而不是覆盖`paint()`方法，更好的方法是调用`setIgnoreRepaint(true)`你的`JFrame`( `GameMain`)——这个方法就是为这样的目的而设计的！**使用它**！

```
private GameMain(String ... args)
{
    setIgnoreRepaint(true);
    .....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:07:15.077

当您设置 `hwnd.createBufferStrategy(2)`自己的方法时，它可能对您有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T18:37:14.207

这就是我实现双缓冲的方式，可能会帮助您了解这个概念。请注意，它是在 JPanel 中实现的，但我认为它可以在其他容器中实现：

JApplet.java：

```
import java.awt.*;
import javax.swing.*;

public class TheJApplet extends JApplet
{
    private Image myImage;

    java.net.URL GameURL = CheckerGameJApplet.class.getResource("GameIMG");

    String GamePath = GameURL.getPath();

    @Override
    public void init()
    {
        String GraphPath = GamePath+"/";

        File myImage_File = new File(GraphPath+"myImage.jpg");

        try
        {
            myImage = ImageIO.read(myImage_File);
        }
        catch (IOException ex)
        {
            // Add how you like to catch the IOExeption
        }

        final TheJPanel myJPanel = new TheJPanel(myImage);

        add(myJPanel);
    }
} 
```

JPanel.java：

```
import java.awt.*;
import javax.swing.*;

public class TheJPanel extends JPanel
{
    private int screenWidth  = 500;
    private int screenHeight = 500;

    private BufferedImage BuffImg = new BufferedImage
                                         (screenWidth, 
                                          screenHeight,
                                          BufferedImage.TYPE_INT_RGB);

    private Graphics2D Graph = BuffImg.createGraphics();

    private Image myImage;

    public TheJPanel(Image myImage)
    {
        this.myImage = myImage;

        repaint();
    }

    @Override
    public void paintComponent(Graphics G)
    {
        Graphics2D Graph2D = (Graphics2D)G;

        super.paintComponent(Graph2D);

        if(BuffImg == null)
        {
            System.err.println("BuffImg is null");
        }

        Graph.drawImage(myImage, 0, 0, this);

        Graph2D.drawImage(BuffImg, 0, 0, this);
    }
} 
```

希望这有帮助，祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-02T19:27:06.060

我有一个基于 Java AWT 的跨平台动画程序。在我严格遵循[Java`BufferStrategy`文档](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferStrategy.html)中的示例代码之前，它一直存在闪烁问题。但是，我使用的是嵌入在 Swing 层次结构中的 AWT Canvas，而不是像您一样全屏显示。感兴趣的可以[看这里的代码](https://sourceforge.net/p/wpbdc/wpbd/ci/42b8007b70df1ba7ab6a5ec5db43770b049314b2/tree/src/wpbd/FixedEyeAnimation.java#l229)。

另一件需要注意的事情是，AWT 管道使用 OpenGL 原语以获得良好的性能，而 OpenGL 支持在许多视频驱动程序中存在缺陷。尝试为您的平台安装最新版本的驱动程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-03T02:15:45.913

Java 呈现透明背景[GIF](http://en.wikipedia.org/wiki/Graphics_Interchange_Format)图像时出现问题。这可能是问题所在。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-02T19:13:04.187

如果没有 SCCSE，我发现很难回答您的问题。我也想知道 RepaintManagerResetter 做了什么。

您可能希望将背景颜色设置为一些花哨的颜色，例如 0xFF00FF，以了解是否有人在绘图发生之前“清除”了背景。如果闪烁图像是紫色的，那就是 - 如果它包含垃圾或旧图像，则可能是双缓冲。

无论如何，我会尽量确保没有人会期待你自己。首先，尽量防止原生 Windows 代码绘制窗口背景。设置一次：

```
/*
 * Set a Windows specific AWT property that prevents heavyweight components 
 * from erasing their background. 
 */
System.setProperty("sun.awt.noerasebackground", "true"); 
```

此外，请确保在 JFrame 中覆盖它（如果您使用的是 Swing 组件）

```
@Override
public void paintComponent(Graphics G)
{
  // do not call super.pC() here
  ...
} 
```

如果这没有帮助，请提供您的代码的工作示例，以便人们可以重现该问题。

# mysql - MySQL；同时从 3 个表中获取信息

> ID：14519482
> 
> 赞同：1
> 
> 时间：2013-01-25T10:05:14.073
> 
> 标签：mysql, sql, phpmyadmin

人们

这是我的小问题。我有三个表： a_names_1 b_names_2 c_names_3 它们的结构相同。他们都有两个项目：名称和使用

是否有任何查询可以运行以从所有这三个表中获取并计算所有“已使用”=1 的“名称”。

我试过这个，但没有奏效：

```
(SELECT COUNT(*) 'name' from a_names_1) UNION 
(SELECT COUNT(*) 'name' from a_names_2) UNION 
(SELECT COUNT(*) 'name' from a_names_3) WHERE `used`=1 
```

我正在为 MySQL 使用 PHPMyAdmin。

任何帮助将不胜感激..在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:10:32.193

`names`此查询输出与所有表不同的计数`used=1`

```
select count(distinct name)
from
(
select name,used from a_names_1 where used=1
union all
select name,used from a_names_2 where used=1
union all
select name,used from a_names_3 where used=1
)  t 
```

如果您需要对所有表中的每个 NAME 的所有 USED 进行 SUM 并仅使用 SUM of used=1 输出，则：

```
select count(*) from
(
select name, SUM(used)
from
(
select name,used from a_names_1
union all
select name,used from a_names_2
union all
select name,used from a_names_3
)  t
GROUP BY name
HAVING SUM(used)=1
) t1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:08:48.740

```
select count(*) as name 
from 
(
select name, used from a_names_1
union 
select name, used from a_names_2
union
select name, used from a_names_3) t
where t.used = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:11:19.920

可能这很慢，因为您失去了索引优化。我要做的是做三个查询，比如

```
SELECT SUM('name') AS name_sum
FROM ((SELECT COUNT(*) 'name' from a_names_1 WHERE `used`=1) 
     UNION (SELECT COUNT(*) 'name' from a_names_2 WHERE `used`=1)); 
```

如果这不起作用，则可能是名称的使用有问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T10:11:42.030

也许你想要这样：

```
select count(*) as cnt
from 
(
    select name from a_names_1 t1 where t1.used = 1
    union 
    select name from a_names_2 t2 where t2.used = 1
    union
    select name from a_names_3 t3 where t3.used = 1
) t 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T10:13:33.557

直接的解决方案；

```
SELECT SUM(used) FROM (
  SELECT used FROM a_names_1 WHERE used=1
  UNION ALL
  SELECT used FROM a_names_2 WHERE used=1
  UNION ALL
  SELECT used FROM a_names_3 WHERE used=1
) a 
```

[用于测试的 SQLfiddle](http://sqlfiddle.com/#!2/099be/8)

如果您有一个索引`used`（并且 used 的唯一值是 0 或 1），另一种方法是使用索引进行计数；

```
SELECT SUM(used) total FROM (
  SELECT SUM(used) used FROM a_names_1
  UNION ALL
  SELECT SUM(used) FROM a_names_2
  UNION ALL
  SELECT SUM(used) FROM a_names_3
) a 
```

[此示例的 SQLfiddle](http://sqlfiddle.com/#!2/736449/1)。

如果查看后一个查询的查询计划，您会发现它有效地使用了索引。

# c - 为什么要将函数参数复制到局部变量中？

> ID：14519484
> 
> 赞同：7
> 
> 时间：2013-01-25T10:05:39.873
> 
> 标签：c, string.h

[strlcpy.c](http://www.openbsd.org/cgi-bin/cvsweb/src/lib/libc/string/strlcpy.c?rev=1.11;content-type=text/plain)将参数复制到局部变量中的原因是什么：

```
size_t
strlcpy(char *dst, const char *src, size_t siz)
{
    char *d = dst;
    const char *s = src;
    size_t n = siz;

    /* Copy as many bytes as will fit */
    if (n != 0) {
        while (--n != 0) {
            if ((*d++ = *s++) == '\0')
                break;
        }
    }

    /* Not enough room in dst, add NUL and traverse rest of src */
    if (n == 0) {
        if (siz != 0)
            *d = '\0';      /* NUL-terminate dst */
        while (*s++)
            ;
    }

    return(s - src - 1);    /* count does not include NUL */
} 
```

**更新**

我添加了身体。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T10:10:40.857

一个非常常见的原因是变量在函数中被修改，然后与参数一起在表达式中使用。

例如，该函数可能会修改变量`n`，然后再执行 eg `return siz - n;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:12:45.797

实际上在其余代码中需要 siz 和 src 来计算一些东西：

```
/* Not enough room in dst, add NUL and traverse rest of src */
if (n == 0) {
    if (siz != 0)
        *d = '\0';      /* NUL-terminate dst */
    while (*s++)
        ;
}

return(s - src - 1);    /* count does not include NUL */ 
```

但我不明白为什么 dst 被复制到本地。也许只是为了对称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T10:13:03.383

至少对于`src`参数，它用于计算要返回的长度。该函数的最后一行显示：

```
return(s - src - 1); 
```

就`dst`论点而言，它实际上并不是必需的，但*可能*是为了保持一致性。这可能无关紧要，因为一个体面的优化编译器可能不会受到这个看似额外的变量的影响。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T10:13:24.983

对于`dst`和`d`，我认为，只是为了对称性。对于其他变量，它们在“代码”中使用它们的初始值和更新值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T10:17:59.320

```
size_t
strlcpy(char *dst, const char *src, size_t siz)
{                     ^-------------------------->constant so must not be modified. that's why a temp variable is needed for modification.     
    char *d = dst;     <-- useless may be.
    const char *s = src;
    size_t n = siz;      

    /* Copy as many bytes as will fit */
    if (n != 0) {        
        while (--n != 0) {
            if ((*d++ = *s++) == '\0')
                break;
        }
    }

    /* Not enough room in dst, add NUL and traverse rest of src */
    if (n == 0) {                    <-- new n arg.
        if (siz != 0)              <---  original siz arg
            *d = '\0';      /* NUL-terminate dst */
        while (*s++)
            ;
    }

    return(s - src - 1);    /* count does not include NUL */  <-- using the original and modified values of s and src together.
} 
```

# wordpress - Wordpress，创建没有 html 内容的便捷帖子？

> ID：14519487
> 
> 赞同：0
> 
> 时间：2013-01-25T10:05:44.413
> 
> 标签：wordpress, post, layout

我想知道在不插入 html 代码（布局和类）的情况下将更多内容附加到帖子的最佳方法。让我解释一下我的目的，我的开发和问题：

目的：我想创建一个流程，让 wordpress 用户能够在没有任何 Html 知识的情况下添加帖子。

我开发的内容：目前，我的帖子包含一些顶部文本（具有不同的类和 id）、一个图片库和一个页脚（具有不同的类和 id）。

这是我附加“工作”类别的帖子的代码：

添加工作类别的帖子的内容

```
<h1 class="work-title">Title</h1>
<div class="description">Description 1</div>
<div class="description">Description 2</div>
<div class="details">With links and social media</div>
</div>
<ul class="gallery">
    <li>
<div class="image"><img class="attachment-large" title="XXXXXX" alt="XXXXX" src="http://192.168.0.11//wordpress/wp-content/themes/RORO/images/cake-factory/img1.jpg" width="900" height="auto" /></div></li>
    <li>
<div class="image"><img class="attachment-large" title="XXXXXX" alt="XXXXXX" src="http://192.168.0.11//wordpress/wp-content/themes/RORO/images/cake-factory/img2.jpg" width="900" height="auto" /></div></li>
    <li>
<div class="image"><img class="attachment-large" title="XXXXXX" alt="XXXXXX" src="http://192.168.0.11//wordpress/wp-content/themes/RORO/images/cake-factory/img3.jpg" width="900" height="auto" /></div></li>
</ul>
<div id="footer">
<div id="bottom_description_1"> bla bla</div>
<div id="bottom_description_2"> bla bla</div>
</div> 
```

问题：

我是否必须将这篇文章的页眉/页脚分开，并在两个子类别中创建另外两个帖子，我将从 page.php 文件中检索它们？

如何使用此布局为标题创建默认帖子模板？（自定义字段）

```
 <h1 class="work-title">Title</h1>
       <div class="description">Description 1</div>
       <div class="description">Description 2</div>
       <div class="details">With links and social media</div>
    </div> 
```

如何使用此布局为页脚创建默认帖子模板？（自定义字段）

```
<div id="footer">
   <div id="bottom_description_1"> bla bla</div>
   <div id="bottom_description_2"> bla bla</div>
</div> 
```

将这两个新帖子（页眉/页脚）链接到帖子库的最佳解决方案是什么？

有插件吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:23:15.210

1.  创建没有编辑器的自定义帖子类型
2.  为该帖子类型创建自定义元框，以便您可以创建表单输入/文本区域/等。

在这里您可以阅读有关自定义帖子类型的信息：

[http://blog.teamtreehouse.com/create-your-first-wordpress-custom-post-type](http://blog.teamtreehouse.com/create-your-first-wordpress-custom-post-type)

关于元框：

[http://wp.smashingmagazine.com/2011/10/04/create-custom-post-meta-boxes-wordpress/](http://wp.smashingmagazine.com/2011/10/04/create-custom-post-meta-boxes-wordpress/)

更复杂，更复杂：

[http://shibashake.com/wordpress-theme/add-metabox-custom-post-type](http://shibashake.com/wordpress-theme/add-metabox-custom-post-type)

# sql - Informix SQL 11.5 将查询结果存储在具有动态名称的文件中

> ID：14519488
> 
> 赞同：5
> 
> 时间：2013-01-25T10:05:47.943
> 
> 标签：sql, informix

我正在尝试将查询结果存储在文件中。以下命令完成此任务：

```
UNLOAD TO '/usr/data/report.csv' DELIMITER ';'
SELECT COUNT(*) FROM table1; 
```

**问题**：我不想在每次执行查询时都覆盖文件 (report.csv)。

**问题**：如何在 UNLOAD TO 文件名参数中包含时间戳或日期？

**已经尝试过但无法正常工作**：

```
UNLOAD TO ('/usr/data/report_' || (SELECT REPLACE(TODAY, '.', '_') FROM systables WHERE tabid = 1) || '.csv') DELIMITER ';'
SELECT COUNT(*) FROM table1; 
```

显示的错误信息：

```
#
# 809: SQL Syntax error has occurred.
# 
```

版本：Informix SQL 11.50

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T14:45:58.283

关于 UNLOAD 语句（也是 LOAD 语句 — 以及 INFO 和 OUTPUT 语句）首先要意识到的是，它（它们是）由 DB-Access 或 I4GL 或 ISQL 等客户端程序实现，而不是由 Informix适当的 DBMS。也就是说，DB-Access 程序读取命令并对其进行操作。特别是，“文件相关”部分——`UNLOAD TO 'file' DELIMITER ';'`语句的部分——永远不会被数据库服务器看到；只有 SELECT 部分被发送到 DBMS。因此，您不能在其中使用 SQL 连接；实际上，您只能在其中写入文字文件名（在 DB-Access 中；I4GL 允许文件名使用变量）。

我会做你所追求的方式是：

```
#!/bin/sh

timestamp=$(date +'%Y%m%d.%H%M%S')
dbaccess ${DATABASE:-default_db} - << EOF
UNLOAD TO 'report-$timestamp.csv' DELIMITER ';'
SELECT COUNT(*) FROM table1;
EOF 
```

这使用`date`命令以 ISO 8601（紧凑）表示法生成时间戳。然后它使用 shell 'here document' 生成提供给 DB-Access 的文件名。该`${DATABASE:-default_db}`表示法使用由环境变量命名的数据库`$DATABASE`，但如果未设置，则`default_db`用作数据库名称。

在此示例中，除了将由 shell 扩展的时间戳之外，here 文档中没有任何内容。事实上，SQL 通常远离可能引起麻烦的 shell 元字符（主要是美元和反引号）。因此，这通常不是您需要担心的事情。

# python - Python 3.2 中无法识别 pyodbc“commit”命令

> ID：14519490
> 
> 赞同：0
> 
> 时间：2013-01-25T10:05:53.020
> 
> 标签：python, pyodbc

有人用 Python 3.2 安装了 pyodbc 吗？我有，一切都很好，只是解释器不识别“commit()”。其他人有同样的问题吗？有谁知道我做错了什么？谢谢，约翰 R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:09:29.267

我找到了绕过它的方法。仍然无法让 commit() 工作，但在 pyodbc.connect() 函数中，如果包含“autocommit=True”，所有插入都会自动提交，您不需要使用 commit() 函数。例如

```
conx = pyodbc.connect("""Driver={Microsoft Access Driver (*.mdb, *.accdb)};
                         DBQ=C:\Documents and Settings\Owner\My Documents\
                         Database2.accdb;""", autocommit = True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:00:00.137

这是我使用 commit() 的代码示例：

```
 cnxn = pyodbc.connect('Driver={Microsoft Access Driver (*.mdb, *.accdb)}; Dbq=F:\\computing\\Payroll v2 2\\\employees.accdb')
   cursor = cnxn.cursor()
   cursor.execute("insert into Medication(ID, Doctor, NameOfMedication, Dosage, DateStart, DateEnd, Notes, LastUpdated) values (?,?,?,?,?,?,?,?)",self.ui.residentComboBox.currentText().split()[0], self.ui.doctorLineEdit.text(), self.ui.nameOfMedicationLineEdit.text(), self.ui.dosageLineEdit.text(), self.ui.dateStartDateEdit.text(), self.ui.dateEndDateEdit.text(), self.ui.notesTextEdit.document().toPlainText(), self.ui.lastUpdatedDateTimeEdit.dateTime().toString("dd/MM/yyyy, hh:mm:ss")) 
   cursor.execute("update Medication set MedEndMonth=? where ((ID=?)) ",month,resID)                
   cnxn.commit()
   self.close() 
```

# php - 以不同的时间间隔从主脚本运行多个 PHP 脚本

> ID：14519492
> 
> 赞同：0
> 
> 时间：2013-01-25T10:05:55.033
> 
> 标签：php, web-scraping

有几个我从浏览器运行的自定义 PHP 脚本，这些脚本将抓取任何给定的 URL，并以浏览器中的表格或 Excel 文件的形式返回数据。（ 可选的）

问题是每当我在脚本中添加超过 3 个 URL 时，我都会遇到网络连接错误（ Connection reset by peer ）可能是由多种原因引起的。然后，如果数据由表返回，则结果将被截断，如果通过 Excel 文件，下载文件将在某个点停止“网络错误”

我在我的本地机器（ XAMPP ）上运行脚本，并且我已经在几个实时服务器上测试了这些脚本并且发生了同样的问题，但是，我注意到在实时服务器上连接会持续更长时间。我收到了来自托管服务提供商的警告，该脚本不应该再在他们的服务器上运行，因为它使用了大量内存（+1GB RAM）并且正在减慢他们的速度。我假设我将在我的本地主机上恢复测试。

**问题 ：**

1.  是否有任何配置/建议可以防止“对等连接重置”错误？

2.  我有 80 多个 URL（相同域），我希望每周抓取一次。将脚本拆分为 80 个脚本（每个 1 个 URL）并独立运行每个脚本。不是很实用，但是有什么好的方法/ PHP 脚本可以从主脚本上以 60 秒的时间间隔一个接一个地运行多个脚本？

这是我输入 URL 的一段代码：

```
<?php 
//to do link
$OutPut_Excel = $_GET['xls'];// 0 web page or 1 output excel
$show_Name = $_GET['show'];// 0 or 1
$urls = "http://www.URL1.com;
http://www.URL2.com;
http://www.URL3.com;
http://www.URL4.com;
http://www.URL5.com;
http://www.URL6.com;
http://www.URL7.com
";
//output excel
if($OutPut_Excel == "1")
{
header("Content-Type: application/vnd.ms-execl;charset=iso-8859-1");
header("Content-Disposition: attachment; filename=data.xls");
header("Pragma: no-cache");
header("Expires: 0");
}

set_time_limit(0);
ini_set('memory_limit', '-1');
ini_set('display_errors',true);

//output html
if($OutPut_Excel == "0")
{
?>

<html>
<head> 
title>scraper</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body>
<?php
}

if($OutPut_Excel == "0")
{
if($show_Name)
{
    $nametext = '<td>Name</td>';
}
echo "<table border='1'><tr><td>Name</td><td>Code</td>
<td>City</td><td>Address</td><td>E-mail</td><td>Phone/td>  <td>Url</td>$nametext</tr>"; 
```

等......

如果脚本运行为：

1.  localhost/scraper.php?xls=0&show=1 | 在浏览器中显示数据
2.  localhost/scraper.php?xls=1&show=1 | 数据下载为 Excel 文件

只要数据不被连接错误截断，任何一种方式都可以。

我非常感谢任何帮助我找到解决方案，因为我是初学者并且一直在自己学习 PHP。

提前谢谢你，拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-14T10:40:39.233

关于您的第二个问题，您可以编写一个循环来执行第二个脚本或函数来检索 URL。您应该有一个数组，其中包含要抓取的所有链接并为每个链接运行该函数或脚本，每次运行后休眠 60 秒。这只是我头脑中的示例代码，未经测试：

```
$links = array('URL1', 'URL2', ...);
foreach ($link as $l) {
  runScraper($l);
  sleep(60);
} 
```

runScraper 方法可以调用 system() 或 exec() 在另一个 PHP 进程中运行脚本。

关于您收到的错误，这可能是由于对服务器的请求过多。在如此短的时间内请求 N 个页面后，您尝试访问的服务器可能会阻止您。

# uibezierpath - 如何在运行中编写一个固定点和一个变化点的贝塞尔曲线路径

> ID：14519498
> 
> 赞同：0
> 
> 时间：2013-01-25T10:06:19.900
> 
> 标签：uibezierpath, caanimation, cakeyframeanimation

如果我有一个执行此 CAKeyframe 动画路径的对象（它只是 iphone 上部区域的椭圆形..

```
 UIBezierPath *trackPath = [UIBezierPath bezierPathWithOvalInRect:CGRectMake(20, 100, 280, 150)]; 
```

现在想象一下，在这条路径旅行期间的任何时候，我想从它的当前位置在某个时间点和屏幕底部的某个点创建一条平滑的路径。

顺便说一句，我假设一旦有了路径，我就可以停止当前的 CAKeyframeAnimation 并将此路径添加到新的 CAKeyframe 动画中，但如果这不正确，您也可以在这里给我指点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:49:24.713

所以我对自己说：“自我......看起来你将不得不自己回答这个问题，因为没有人想编辑它或说它是重复的......”

所以我希望有一些更简单或现成的方法来做到这一点。根据我的发现，没有简单的方法。似乎步骤将是；

1.  获取动画层的当前位置
2.  用你自己的代码计算出一条漂亮的平滑曲线
3.  将此路径添加到动画并为其设置动画。

至于贝塞尔曲线的计算，我仍在寻找一些可以将点插入其中的类或代码，并为 UIBezier 类生成两个控制点以生成曲线。

在我的情况下，我只会将我上面质疑的形状中的“动画”设置为一个确定的点，从而准备好我准备好的平滑曲线。

在任何时候对椭圆的平滑退出进行动画处理都非常复杂，就我而言，这不值得。所以我没有这样做。

# python - python结合范围和数字列表

> ID：14519499
> 
> 赞同：3
> 
> 时间：2013-01-25T10:06:24.043
> 
> 标签：python, list, python-3.x

```
range(5, 15) [1, 1, 5, 6, 10, 10, 10, 11, 17, 28]
range(6, 24) [4, 10, 10, 10, 15, 16, 18, 20, 24, 30]
range(7, 41) [9, 18, 19, 23, 23, 26, 28, 40, 42, 44]
range(11, 49) [9, 23, 24, 27, 29, 31, 43, 44, 45, 45]
range(38, 50) [1, 40, 41, 42, 44, 48, 49, 49, 49, 50] 
```

我从函数的打印命令中得到上述输出。我真正想要的是范围的组合列表，例如在顶行 5,6,7...15,1,1,5,6 等。输出范围来自

```
range_draws=range(int(lower),int(upper)) 
```

我天真地认为这会给出一个范围。其他数字来自切片列表。

有人可以帮我得到想要的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T10:07:41.470

该`range()`函数返回一个特殊的[范围对象](http://docs.python.org/3/library/stdtypes.html#ranges)以保存在内存中（当只需要开始、结束和步长时，无需将所有数字保存在内存中）。将其转换为列表以“扩展”它：

```
list(yourrange) + otherlist 
```

引用文档：

> [`range`](http://docs.python.org/3/library/stdtypes.html#range)与常规[`list`](http://docs.python.org/3/library/stdtypes.html#list)或类型相比，该类型的优点[`tuple`](http://docs.python.org/3/library/stdtypes.html#tuple)是[`range`](http://docs.python.org/3/library/stdtypes.html#range)对象将始终占用相同（少量）的内存，无论它表示的范围大小如何（因为它只存储`start`,`stop`和`step`值，将单个项目和子范围计算为需要）。

# tomcat - 如何告诉tomcat部署到不同的位置（虚拟主机）？

> ID：14519500
> 
> 赞同：1
> 
> 时间：2013-01-25T10:06:27.607
> 
> 标签：tomcat, web-applications, path

我想让tomcat将不同的webapps放到我服务器上的不同文件夹中。原因是：我正在使用（测试阶段）不同的虚拟主机，因此我也想分开对它们的访问。让我们说：

> vhost1.mydomain.com 在 /home/vhost1/webapps/app1 本地访问
> 
> vhost2.mydomain.com 在 /home/vhost2/webapps/app2 本地访问

顺便说一句：我只关心部署的路径，war 文件可以留在任何 tomcat 想要的地方。这是因为我想让不同的用户访问我部署的内容，而不是所有的 tomcat webapps。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:14:19.850

我不确定是否将部署路径与 war 文件分开，但您当然可以为不同的 URL 设置不同的部署位置。

编辑（tomcat home）/conf/server.xml

找到 <host> 元素：

```
<Host name="localhost"  appBase="webapps"
      unpackWARs="true" autoDeploy="true"
      xmlValidation="false" xmlNamespaceAware="false">

   <!-- other stuff -->
</Host> 
```

名称应更改为 URL，例如 vhost1.mydomain.com appBase 可以是文件系统上的绝对路径，它将查找要部署的 WAR 文件

您可以有多个 <host> 条目，它们都具有不同的名称和 appBase。

# intellij-idea - 是否可以为我的 JiBX 自定义设置命名空间

> ID：14519501
> 
> 赞同：1
> 
> 时间：2013-01-25T10:06:32.990
> 
> 标签：intellij-idea, xsd, xml-namespaces, jibx

目前，我有以下 JiXB 自定义文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<schema-set>
  <schema name="./target.xsd" >
    <complexType name="type" ... />
  </schema>
</schema-set> 
```

这与 jibx-maven-plugin 配合得很好，并且定制按预期工作。但是，要在 IntelliJ Idea 中使用代码辅助，我想为根元素定义一个 XML 命名空间。如果我将它指向`codegen-customizations.xsd`JiBX 站点中的文件，则会收到错误消息。

```
<schema-set xmlns="http://jibx.sourceforge.net/schemas/codegen-customizations.xsd"> 
```

错误：

```
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] No unmarshaller for element "{http://jibx.sourceforge.net/schemas/codegen-customizations.xsd}schema-set" (line 2, col 84) 
```

此外，intellij 显示正确的完成选项，但会抱怨`Cannot find declaration of element 'schema-set'`。

是否有可用于我的 jibx 自定义的 xml 命名空间？

# regex - 从 extjs 数字字段中排除点（。）

> ID：14519503
> 
> 赞同：4
> 
> 时间：2013-01-25T10:06:42.723
> 
> 标签：regex, extjs

我有一个 extjs 号码字段。我可以在其中输入数字 0-9 和点（。）。我怎样才能避免这个点呢。我只需要整数。请给我所需的正则表达式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T10:19:58.497

实际上有一个配置属性 a`numberfield`可以做到这一点，所以你可以像这样指定字段：

```
{
    xtype: 'numberfield',
    allowDecimals: false
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T10:08:20.973

`/^\d+$/`是您要求的正则表达式。

如果您需要捕获它，请尝试`/^(\d+)$/`

# selenium - 如何使用 ExpectedConditions.visibilityOfElementLocated 进行多次点击

> ID：14519510
> 
> 赞同：2
> 
> 时间：2013-01-25T10:07:10.383
> 
> 标签：selenium

我有一个包含多个上下文菜单的 HTML 站点。xpath 是：.//*[@id='TopIcon_Edit']/a/span。（这条路径会碰到几个元素）在我的测试中，其中一个上下文菜单是可见的。

我现在想验证一个上下文菜单是否可见，使用 ExpectedConditions.visibilityOfElementLocated(By.xpath(".//*[@id='TopIcon_Edit']/a/span"))。虽然我可以看到上下文菜单是可见的，但测试告诉我：“元素不满足 By.xpath 定位的元素的条件可见性：...”

我假设该方法 visibilityOfElementLocated(...) 只是评估定位器找到的第一个元素的可见性，这是​​不可见的，因为 Selenium 正确地说。

我将不胜感激有关如何解决此问题的任何提示。

亲切的问候，格哈德舒斯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-18T01:32:53.603

如果您可以取消 xpath，那将有所帮助。FindElement(By.cssSelector("#TopIcon_Edit span")).click() 或者做一个网页元素列表 we = FindElements (By.cssSelector("#TopIcon_Edit span")); 然后根据样式过滤您的列表。它更容易并为使用 cssSelectors 提供了更大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:15:14.133

是的，当您使用 Selenium 搜索单个元素并且结果返回多个元素时，该方法将获取第一个元素并返回它。因此，您必须更准确地指定您使用的 xpath，例如：“.//*[@id='TopIcon_Edit']/a[1]/span”或类似的，它将仅指向所需的元素。

# django - Django 未知密码散列算法 - 编写自定义散列算法

> ID：14519523
> 
> 赞同：0
> 
> 时间：2013-01-25T10:07:43.563
> 
> 标签：django, authentication, hash, passwords

我将用户从其他站点迁移到 django 站点。旧网页有带盐的 md5 密码，我正在编写一个自定义散列算法，以便用户可以使用他们的旧密码进行身份验证。

当我尝试以旧用户身份登录时，我得到：

```
Unknown password hashing algorithm 'my_hashed_password'. Did you specify it in the PASSWORD_HASHERS setting? 
```

那是我的密码哈希

```
class FallbackMD5PasswordHasher(BasePasswordHasher):

    algorithm = "fallback_md5"

    def salt(self):
        return 'my_salt'

    def encode(self, password):
        return hashlib.md5(self.salt() + password).hexdigest()

    def verify(self, password, encoded):
        encoded_2 = self.encode(password, '')
        return constant_time_compare(encoded, encoded_2)

    def safe_summary(self, encoded):
        return SortedDict([
            (_('algorithm'), self.algorithm),
            (_('hash'), mask_hash(encoded, show=3)),
        ]) 
```

那是我的settings.py

```
PASSWORD_HASHERS = (
    'lfs_custom.hasher.FallbackMD5PasswordHasher',
    'django.contrib.auth.hashers.PBKDF2PasswordHasher',
    'django.contrib.auth.hashers.PBKDF2SHA1PasswordHasher',
    'django.contrib.auth.hashers.BCryptPasswordHasher',
    'django.contrib.auth.hashers.SHA1PasswordHasher',
    'django.contrib.auth.hashers.MD5PasswordHasher',
    'django.contrib.auth.hashers.CryptPasswordHasher',
    ) 
```

请向我提供一些如何解决此问题的信息 :) 我找不到它为什么不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T13:40:56.333

Django 尝试使用以下[格式](https://docs.djangoproject.com/en/dev/topics/auth/passwords/)从您的数据库中解析哈希：

```
<algorithm>$<iterations>$<salt>$<hash> 
```

您可能在数据库中有普通的哈希值。尝试在数据库上执行 SQL 以使用正确的格式进行更新，例如：

```
update auth_user set password=concat("md5$1$", password); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T06:49:41.080

如果你需要这个{

类 FallbackMD5PasswordHasher(BasePasswordHasher): algorithm = "fallback_md5" 迭代 = 100000 def salt(self): return ''

```
def encode(self, password, salt):
    assert salt == ''
    hash= hashlib.md5(password).hexdigest()
    return "%s$%d$%s$%s" % (self.algorithm, self.iterations, '', hash)

def verify(self, password, encoded):
    algorithm, iterations, salt, hash = encoded.split('$', 3)
    assert algorithm == self.algorithm

    encoded_2 = self.encode(password, '')
    return constant_time_compare(encoded, encoded_2)

def safe_summary(self, encoded):
    algorithm, iterations, salt, hash = encoded.split('$', 3)
    return SortedDict([
        (_('algorithm'), algorithm),
        (_('iterations'), iterations),
        (_('salt'), mask_hash(salt)),
        (_('hash'), mask_hash(hash)),
    ])

def must_update(self, encoded):
    return True 
```

}

# maven - Maven 发布插件部署问题

> ID：14519524
> 
> 赞同：3
> 
> 时间：2013-01-25T10:07:45.587
> 
> 标签：maven, jenkins, nexus, maven-release-plugin

## 我的版本：

*   Maven 3.0.4
*   詹金斯 1.499
*   连结 2.2
*   maven-release-plugin 3.2
*   JDK 1.6
*   AIX 6.1

## 设置.xml

```
<server>
    <id>snapshots</id>
    <username>deploy</username>
    <password>pass123</password>
</server> 
<server>
        <id>releases</id>  
        <username>deploy</username>  
        <password>pass123</password>
</server> 
```

我在 Jenkins 中运行了很多构建，它们使用`maven deploy`插件并将工件上传到 Nexus 存储库。由于同一用户能够部署快照，我们可以消除 Nexus 中的用户角色/权限问题。（我仍然给这个用户管理员角色进行测试）

## 公司母公司 POM

```
<distributionManagement>
    <repository>
        <id>releases</id>           
        <url>http://myserver/repositories/releases</url>
        <layout>default</layout>
    </repository>

     <snapshotRepository>
            <id>snapshots</id>      
        <url>http://myserver/repositories/snapshots</url>
        <layout>default</layout>
     </snapshotRepository>
</distributionManagement> 
```

## 项目 POM

```
<scm>
   <connection>scm:svn:http://svnserver/tags/1.2.3</connection>
   <developerConnection>scm:svn:http://svnserver/tags/1.2.3</developerConnection>
</scm> 
```

我已经确认`/target/checkout/`Jenkins 工作区中包含最新的 POM。还添加`<distributionManagement>`在项目 POM 中

* * *

* * *

现在，当我使用 mvn 从 Jenkins 中运行 maven 发布插件时，`release:perform`我仍然得到这个：

```
Deployment failed: repository element was not specified in the POM inside 
distributionManagement element or in -DaltDeploymentRepository=id::layout
::url parameter 
```

* * *

* * *

1.  `release:prepare`显示没有错误
2.  SVN 标签按预期创建
3.  然后在部署期间，它失败并出现上述错误
4.  就像我提到的，快照部署经常发生并且没有错误，因此 settings.xml、distributionManagement 和 Nexus 权限似乎都井然有序。
5.  我可以 `http://myserver/repositories/releases`手动访问
6.  我已经检查过`mvn help:effective-pom`并且`mvn help:effective-settings`事情似乎井井有条

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-31T18:31:03.723

错误信息非常明确。您的 POM 中没有 distributionManagement。因此，您可能不会继承父 pom。

跑

```
mvn help:effective-pom 
```

在您尝试部署和检查的项目中。或者查看 IDE（Eclipse 或其他）中的有效 POM。

然后找出正确的父 pom 使用或根据需要插入 distribtionManagement 段。

# c# - 带空格的正则表达式

> ID：14519525
> 
> 赞同：1
> 
> 时间：2013-01-25T10:07:52.020
> 
> 标签：c#, regex

我有这样的正则表达式模式：

```
^[a-zA-Z0-9]+\s(INV|FINAL)\s([0,1]?\d{1}\s(([0-2]?\d{1})|([3][0,1]{1}))\s(([1]{1}[9]{1}[9]{1}\d{1})|([2-9]{1}\d{3})))(\s{1})\d+$ 
```

此模式应验证文档名称是否正确 像这样的文档名称应与此模式匹配：

```
1207181 FINAL 12 13 12 1533 
```

一开始 - 只是数字，就像 id。

下一个空间。

下一个 INV 或 FINAL 字。

格式为 dd mm yy 的下一个日期。

接下来是一些数字。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:31:38.680

您正在寻找：

```
^(\d+)\s(INV|FINAL)\s(0[1-9]|[12]\d|3[01])\s(0[1-9]|1[0-2])\s(\d{2})\s(\d+)$ 
```

解释：

```
^                      start at the beginning of the string
(\d+)                  capture any digit
\s                     one whitespace
(INV|FINAL)            captrue INV or FINAL
0[1-9]                 a 0 and a digit from 1 to 9
[12]\d                 a 1 or a 2 and a digit
3[01]                  a 3 and a 0 or a 1
(0[1-9]|[1-2]\d|3[01]) capture a digit from 01 to 31
(0[1-9]|1[0-2])        capture a 0 and a digit from 1 to 9 or a 1 and a digit from 0 to 2 | so capture a digit from 01 to 12
(\d{2})                capture two digits
$                      stop at the end of the string 
```

它不会匹配`1207181 FINAL 12 13 12 1533`，因为`13`.

# python - 如何从字体中获取向量

> ID：14519538
> 
> 赞同：3
> 
> 时间：2013-01-25T10:08:39.227
> 
> 标签：python, vector, fonts

我正在寻找一种从字符中获取矢量形式（点和曲线）的方法，类似于此[SO question](https://stackoverflow.com/questions/11967854/is-it-possible-to-get-vector-form-of-characters-from-font)中描述的内容，但使用 Python 而不是 java。有人知道方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T12:58:46.113

**更新**

我刚刚为 FreeType 库找到了一个相当完整的 Python 包装器：

*   文档：[https ://freetype-py.readthedocs.io/en/latest/](https://freetype-py.readthedocs.io/en/latest/)
*   回购：[https ://github.com/rougier/freetype-py/](https://github.com/rougier/freetype-py/)

它是基于 ctypes 的，而且级别非常低 - 但捆绑的示例清楚地显示了如何使用它，包括获取线和弧等描述的字形几何图形的方法。FreeType 本身可以处理您需要的任何字体文件格式。

**原始答案**

我不知道 Java 问题上的人们是否真的得到了他们想要的东西 - 但这绝对不是微不足道的。

在 Java 中，字体渲染引擎本身可能作为 Java 对象在 JVM 中运行。这不是 Python 的哲学——像渲染到屏幕这样的低级操作是在本机代码中执行的，而不是由解释器 VM 内的 Python 对象执行。

因此，虽然在 Java 中可以连接到对字符进行实际渲染并从中提取数据的类，但在 Python 中，这与您的实际代码隔开几层代码。

解释了这种差异，您的问题没有足够的信息来给您任何有意义的答案：什么样的字体文件？有几十种！:-)

您将在什么情况下使用此字体路径信息？我的意思是-您将使用哪些库来渲染图形-或者您只是将数据转储到可读文件中？这是相关的，因为根据您打算用来渲染图形的库，可能有一些方法可以通过使用该库生态系统（比如 Qt、Cairo、pango、windows native、pygame 等）来访问角色信息

也就是说，至少有一种字体文件格式可以很容易地获取您想要的信息：**SVG 字体**，其中点和曲线将表示为 XML 数据。

另外，你要看的另一件事是 fontforge 项目 - 它可以处理字体 - 多种格式 - 它可以在 Python 中编写脚本。但这只是我所知道的。( [http://fontforge.org](http://fontforge.org) )

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-25T10:11:34.523

在这个问题中，本质上是关于如何表示图形向量。你可以开始看到 matplotlib 和 Pyplot。

# java - 使用 APDU 将 CAP 文件上传到智能卡

> ID：14519554
> 
> 赞同：2
> 
> 时间：2013-01-25T10:09:36.373
> 
> 标签：java, eclipse, netbeans, smartcard, javacard

我正在尝试将小程序（.cap 文件）安装到智能卡中。我读到可以使用 APDU 来完成。我使用 Netbeans 创建了我的小程序，它的帮助是 //aid/9AE9BE4D27/53。

首先构建 apdu ，它将选择`installer applet`：

`0x00 0xA4 0x04 0x00 0X09 0xA0 0x00 0x00 0x00 0x62 0x03 0x01 0x08 0x01 0x7F`;

然后构建将创建我的小程序的 apdu（遵循此结构）：

`header: 0x80 0xb8 0x00 0x00`

`lc aid:`

`aid:`

`le: 0x7F;`

我开发了一个应用程序，它可以使用`channel.transmit(new CommandAPDU(apdu)`. 我想如果我发送正确的安装命令，我的 .cap 文件应该安装在卡中。

有了这些信息，任何人都可以帮助我构建正确的 apdu 以将我的 cap 文件安装到真实卡中吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T14:44:33.353

如果卡是使用全球平台的，那就没那么简单了，你需要对卡管理器进行认证。然后您发送多个命令来加载`.cap`文件（因为 APDU 可能只包含 255 字节的有效负载 - GP 不使用扩展长度）。然后您发出一个`INSTALL for INSTALL`命令来实例化 Applet（使用实例 AID）。

幸运的是，有可用的开源库构建在`javax.smartcardio`. 不过，我仍然建议阅读 Global Platform 的基础知识，这些文件可以免费在线获得。

[http://sourceforge.net/projects/gpj/](http://sourceforge.net/projects/gpj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:31:06.510

是的，如果您发送正确的命令 APDU，那么您将能够安装它，但对于全球平台卡，您需要先创建安全通道，然后您可以发送 InstallForLoad 和后续加载/安装命令。步骤顺序将是：

*   选择卡管理器
*   使用您的卡支持的 SCP01/SCO02 验证您的卡
*   发送 InstallForInstall 命令
*   发送加载命令
*   发送 InstallForInstall 命令

每个命令都应该以 0x9000 结尾，这意味着命令执行成功。

但是由于您是初学者，所以您应该使用一些工具（例如 GPShell）将您的 .cap 文件加载到卡上，然后尝试分析安装后出现的 APDU。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-10T10:52:04.960

要安装小程序并将其个性化到卡中，您需要相互验证包括内部验证命令和外部验证。请阅读 EMV CPS 或 GlobalPlatform 了解详细信息。

如果您使用模拟器，也可以轻松安装小程序。我使用的是 JAVACos，它非常简单，而且它支持 JC 和 GP 库。使用来自 JAVACos 的库在 Eclipse 中开发小程序，并使用 JAVACos 模拟器使用 scrypt 来模拟小程序以测试小程序。

# webpage - 如何记录网页加载时间和页面大小

> ID：14519562
> 
> 赞同：1
> 
> 时间：2013-01-25T10:10:14.467
> 
> 标签：webpage, webpage-rendering

我正在使用 Tapestry 框架开发 Web 应用程序

我想记录每个单独的页面加载时间和页面大小：

我使用了 pageAttached、Detached 方法，如下所示：

```
void pageAttached() {
    pageLoadStartupTime = System.currentTimeMillis();
}

void pageDetached() {
    logger.info("Info: page on-load time: " + 
       Util.getPageOnLoadTime(pageLoadStartupTime, System.currentTimeMillis())));
}

public static long getPageOnLoadTime(long start, long end) {
     return end-start;
} 
```

这给出了大约 300 毫秒 - 400 毫秒，但是在浏览器的同一页面的 UI 中，我使用萤火虫选项检查了页面加载时间，它显示为 900 毫秒

它显示 firebug 显示图像加载、js、css 和其他外部调用

谁能告诉我如何记录页面大小？& 记录页面加载时间的方法是否正确？

问候，卡尔蒂。

# jquery - jquery 如何将 showValues() 数据发布到另一个页面

> ID：14519565
> 
> 赞同：1
> 
> 时间：2013-01-25T10:10:34.963
> 
> 标签：jquery

我正在使用此功能来显示在我的表单中选择的值。结果在我的页面上正确显示，但没有任何内容发送到我的 getlist.php 页面。

有人可以帮我吗？

jQuery代码：

```
function showValues() {
    var str = $("form").serialize();
    $("#results").text(str);
}

$(":checkbox, :radio").click(showValues);
$("select").change(showValues);
showValues();

$.post("getlist.php", $("form").serialize()); 
```

HTML：

```
<p><tt id="results"></tt></p> 
```

这是我的表格

```
<form id="Moteur" onchange="testMoteur()">
<table cellspacing="0" cellpadding="5" bgcolor="#Be9e55">
<tr height="30px">
<td align="right">Marques : </td>
<td><? include ("marques.php"); ?></td>
</tr>
</table>
</form> 
```

和 marques.php 代码

```
<select name="marques" id="marques" multiple="multiple">
<?
//<option value="x">Toutes les marques :</option>
?>
<?
mysql_connect("","",""); 
mysql_select_db(""); 
$query = mysql_query("SELECT * FROM marque WHERE flag_montre=1 ORDER BY nom ASC");
while ($myrow = mysql_fetch_row($query)) {
$id_marque=$myrow[0];
//test si marque est vide
$res3=mysql_query("SELECT * FROM montre WHERE id_marque=$id_marque AND id_etat=3");
$nbreLignes = mysql_num_rows($res3);
if ($nbreLignes==0){
}
else {  
echo "<option value='".$myrow[0]."'>".$myrow[1]." (".$nbreLignes.")</option>"; 
} 
} 
                    ?>
</select> 
```

我刚刚更新了我的脚本，在 Firefox 上一切正常，但在 ie8 中没有任何反应（0 个错误）。该脚本的目标是将数组中的 vars 发送到我的 getlist.php

```
function SendMoteur() {

var xmlhttp = "";
var url = "";

// For modern browsers
if(window.XMLHttpRequest) {
    xmlhttp = new XMLHttpRequest();

// for IE 5/6
} else {
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}

//  Rebuild the array of selected option boxes
marques = document.getElementById("marques");
for(var i=0; i < marques.length; i++) {
    if(marques[i].selected) {
        // Note the [] after the name
        url += "&marques[]=" + marques[i].value;
    }
}

 fourchettes = document.getElementById("fourchettes");
for(var i=0; i < fourchettes.length; i++) {
    if(fourchettes[i].selected) {
        // Note the [] after the name
        url += "&fourchettes[]=" + fourchettes[i].value;
    }
}

mouvements = document.getElementById("mouvements");
for(var i=0; i < mouvements.length; i++) {
    if(mouvements[i].selected) {
        // Note the [] after the name
        url += "&mouvements[]=" + mouvements[i].value;
    }
}

boitiers = document.getElementById("boitiers");
for(var i=0; i < boitiers.length; i++) {
    if(boitiers[i].selected) {
        // Note the [] after the name
        url += "&boitiers[]=" + boitiers[i].value;
    }
}

bracelets = document.getElementById("bracelets");
for(var i=0; i < bracelets.length; i++) {
    if(bracelets[i].selected) {
        // Note the [] after the name
        url += "&bracelets[]=" + bracelets[i].value;
    }
}

xmlhttp.open("GET","getlist.php?" + url, false);
xmlhttp.send();

if (xmlhttp.status == 200) {
    document.getElementById("txtHint2").innerHTML = xmlhttp.responseText;
} else {
    return false;
}

return false;
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:18:21.127

这是正确的 jQuery 表单，试试这个：

```
$.post("getlist.php", $("#form").serialize()); 
```

或者如果这是一个表单类，试试这个：

```
$.post("getlist.php", $(".form").serialize()); 
```

此外，检查 getlist.php 文件是否与当前文件位于同一文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:21:08.407

你为什么不使用这个等价的：

为您的表格提供 id：`form_id`

```
function showValues() {
 var str = $("#form_id").serialize();
 $("#results").text(str);

 $.ajax({
  type: "POST",
  url: "getlist.php",
  data: {data: str},
 }).done(function(){
     alert('yiha, worked!');
 });
} 
```

# ios6 - 如何使用 connectionDidFinishDownloading:destinationURL: 和 connectionDidFinishLoading:

> ID：14519566
> 
> 赞同：2
> 
> 时间：2013-01-25T10:10:37.493
> 
> 标签：ios6, nsurlconnection, newsstand-kit, nsurlconnectiondelegate

我已经实现了 NSURLConnectionDownloadDelegate、NSURLConnectionDataDelegate 委托方法，如下所示。

问题是在 connection:didReceiveResponse: 之后， connectionDidFinishDownloading:destinationURL: 被调用但没有 connectionDidFinishLoading: 甚至 connection:didReceiveData: 未被调用。

当我评论 NSURLConnectionDownloadDelegate 方法时，调用其他三个没有任何问题。

我有一个从服务器获取 JSON 的 NSURLConnections。报刊亭使用 NSURLConnectionDataDownloading 委托方法来下载问题。

我该如何管理？

这是我正在实施的所有委托方法

```
- (void)connection:(NSURLConnection *)connection didWriteData:(long long)bytesWritten totalBytesWritten:(long long)totalBytesWritten expectedTotalBytes:(long long)expectedTotalBytes {

}

- (void)connectionDidFinishDownloading:(NSURLConnection *)connection destinationURL:(NSURL *)destinationURL {

}

- (void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {

}

- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

}

- (void) connectionDidFinishLoading:(NSURLConnection *)connection {

} 
```

这是我的 .h 文件

```
@interface FirstTopViewController : UIViewController <NSURLConnectionDownloadDelegate, NSURLConnectionDataDelegate, NSURLConnectionDelegate, UITableViewDataSource, UITableViewDelegate> 
```

这就是我连接到服务器以获取 JSON 的方式

```
[[NSURLConnection alloc] initWithRequest:req delegate:self startImmediately:YES]; 
```

如果需要，这是下载问题的代码

```
NSURLRequest *urlReq = [NSURLRequest requestWithURL:myURL];
NKAssetDownload *asset = [currentIssue addAssetWithRequest:urlReq];
[asset downloadWithDelegate:self]; 
```

问题在于从服务器获取 JSON 的调用。问题下载工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T17:22:13.123

NSURLConnectionDataDelegate 定义用于将数据加载到内存的委托方法。NSURLConnectionDownloadDelegate：用于直接将资源下载到磁盘文件的委托方法。

然后，如果您在委托中实现了 connectionDidFinishDownloading:destinationURL:。这将通知 NSURLConnection 你想要将数据下载到磁盘文件而不是内存作为 NSData。NSURLConnectionDataDelegate 方法不会被调用。如果您从您的委托类实现中消除 connectionDidFinishDownloading:destinationURL: ，则将调用 connection:DidReceiveData: 。

对于您的情况，为不同的用途实现两个助手委托。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T21:00:38.233

当您想要获取 JSON 数据时`-connection:didReceiveData:`，您需要将委托设置为实现 NSURLConnectionDataDelegate 的对象；当您想将问题下载到文件时，委托需要是实现 NSURLConnectionDownloadDelegate 的对象。一个班级不能同时做这两件事。

这在 NSURLConnection 文档中没有得到很好的解释，但是其中的注释`NSURLConnection.h`使它更加明确：

> NSURLConnection 可用于将资源数据直接加载到内存，在这种情况下应该提供 NSURLConnectionDataDelegate，或者用于将资源数据直接下载到文件，在这种情况下使用 NSURLConnectionDownloadDelegate。委托由 NSURLConnection 保留，直到遇到终止条件。这两个委托在逻辑上是基本协议 NSURLConnectionDelegate 的子类。

# c# - 远程用户保存文件时文件监视应用程序失败

> ID：14519569
> 
> 赞同：0
> 
> 时间：2013-01-25T10:10:43.230
> 
> 标签：c#, filesystemwatcher

我的问题是，在我惹恼任何人之前，这是我的第一篇文章，所以如果我错了，请原谅我。

我创建了一个带有文件系统观察程序的简单 Windows 服务，如果粘贴了 .txt 文件，它会触发控制台应用程序。该服务作为本地系统运行，并且运行良好。但是，它监视的文件每天早上都由远程用户保存，控制台应用程序无故失败。如果我保存文件，服务和控制台应用程序将完全按照他们的预期进行。

控制台应用程序使用 GeneticParsing 库将文件读入表中，将其批量加载到远程服务器上的 oracle 11g 数据库中，然后归档文件。控制台应用程序的主要代码如下......任何帮助将不胜感激！

```
static void Main(string[] args)
    {
        try
        {
            FileInfo f = new FileInfo(args[0].ToString());

            Thread.Sleep(15000);

            GenericParserAdapter p = new GenericParserAdapter();
            p.ColumnDelimiter = '|';
            p.SetDataSource(f.FullName);
            DataTable d = new DataTable();
            d = p.GetDataTable();
            bb_usage_methods b = new bb_usage_methods(false);
            DataTable d_merge = new DataTable();
            d_merge.Columns.Add("BB_USAGE_ID", Type.GetType("System.Int32"));
            d_merge.Columns.Add("USAGE_DATE", Type.GetType("System.DateTime"));
            d_merge.Columns.Add("PARTY_CODE", Type.GetType("System.Int32"));
            d_merge.Columns.Add("UPLOAD_USAGE", Type.GetType("System.Decimal"));
            d_merge.Columns.Add("DOWNLOAD_USAGE", Type.GetType("System.Decimal"));
            d_merge.Columns.Add("TOTAL_USAGE", Type.GetType("System.Decimal"));

            DataRow r;
            object j = b.get_data_from_datareader("SELECT MAX(BB_USAGE_ID) FROM USAGE");
            Int32 max_id = j.ToString() == "Entry is NULL" || j.GetType() == System.Type.GetType("System.Exception") ? max_id = 1 : max_id = Convert.ToInt32(j) + 1;

            for (int i = 0; i < d.Rows.Count; i++)
            {
                r = d.Rows[i];
                try
                {
                    object[] o = { max_id, Convert.ToDateTime(r[0]), Convert.ToDecimal(r[1]), Convert.ToDecimal(r[2]), Convert.ToDecimal(r[3]), Convert.ToDecimal(r[4]) };
                    d_merge.Rows.Add(o);
                    max_id++;
                }
                catch { }
                r = null;
            }
            decimal original_count = Math.Round((decimal)(d.Rows.Count * 100) / d_merge.Rows.Count, 2);
            b.bulk_insert_into_oracle(d_merge, "USAGE");                
            DateTime dt = f.LastWriteTime;

            try
            {
                File.Move(f.FullName, f.FullName.Replace(f.Name, @"\..\Archive\" + f.Name));

            }
            catch (Exception e)
            {
               // code to log error to db
            }
        }

        catch (Exception ex)
        {
            // code to log error to db
        }
    }
}

public class log_methods : x.oracle_data_access
{
    public log_methods()
    {
       base.get_dataset("SELECT * FROM APP_LOG", "LOG_ID");
    }
}

public class bb_usage_methods : x.oracle_data_access
{
    public bb_usage_methods(Boolean get_dataset)
    {
        if (get_dataset)
        {
            base.get_dataset("SELECT * FROM USAGE", "BB_USAGE_ID");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:24:28.227

您确定文件观察程序看到该文件吗？远程用户保存程序时是否完全启动程序。

如果我没记错的话，在某些情况下文件监视程序在它应该触发的时候没有触发（在远程或诸如此类）。

# python - 分配前引用/uploaded_files/局部变量'i'处的UnboundLocalError？

> ID：14519570
> 
> 赞同：0
> 
> 时间：2013-01-25T10:10:44.113
> 
> 标签：python, django

我有这样的代码：

```
choices = request.POST.getlist('choice')
    #choices1 = len(choices) 
    for i in choices:
        new_source = source +"/"+ i 
        start_date = datetime.datetime.utcnow().replace(tzinfo=utc)
        source12 = new_source.replace(' ', '') #Remove whitespaces
        subprocess.Popen(['sshpass', '-p', password, 'rsync', '-avz', '--info=progress2', source12, destination], 
                                    stderr=subprocess.PIPE, stdout=subprocess.PIPE).communicate()[0]
        end_date = datetime.datetime.utcnow().replace(tzinfo=utc)
        duration = end_date - start_date
        start_date = start_date.strftime("%B %d, %Y, %H:%M%p")
        end_date = end_date.strftime("%B %d, %Y, %H:%M%p")
        #basename = os.path.basename(source) #Get file_name
        extension = os.path.splitext(i)[1][1:] #Get the file_extension
        fullname = os.path.join(destination, i) #Get the file_full_size to calculate size
        st = int(os.path.getsize(fullname))
        f_size = size(st, system=alternative)
        dur1 = convert_timedelta(duration)
        dur = duration_conversion(dur1)
        b = File(users_id=request.user.id, file_name=i, type=extension, source='ngs.pradhi.com', start_date=start_date, end_date=end_date, duration=dur, size_overview=st, size=f_size, flag='F')
        b.save()

    return render_to_response('uploaded_files.html', {'files': b, 'username':username, 'host':a, 'files_server':files_in_server, 'file_size':filesize, 'date':date, 'total_files_selected':i , 'list_users':users_b}, context_instance=RequestContext(request)) 
```

我想找到选择列表的长度以便显示给用户。首先，我尝试将变量传递为：

```
choices = request.POST.getlist('choice')
choices1 = len(choices) 
```

当用户选择了多个文件时，将choices1 变量传递给模板仅返回0。因此，我尝试传递产生此错误的变量 i：

```
UnboundLocalError at /uploaded_files/ local variable 'i' referenced before assignment? 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:05:33.993

```
 i = ""

 choices = request.POST.getlist('choice[]')
 for i in choices:
    ........ 
```

我应该在分配之前有默认值 i="" 并且要获得您必须输入的列表 []

# excel - 如果符合条件或其他单元格，则显示下一个日期

> ID：14519574
> 
> 赞同：0
> 
> 时间：2013-01-25T10:10:52.420
> 
> 标签：excel, excel-2010

我正在尝试获取一个公式来向我显示列表中的下一个可用日期。本质上，今天的日期是什么，查看列表并显示下一个可用日期。目前我正在使用以下公式，如果使用下表，它将输出 01-Jan-14

```
=IFERROR(SMALL(IF(ATW!$L$4:$L$19>TODAY(),ATW!$L$4:$L$19),1),MAX(ATW!$L$4:$L$19))

Column L             M       N       O
01-Jan-13           YES      NO     NO
01-Jan-14           N/A     N/A     N/A 
```

我需要做的是调整该公式，以便它检查下一个可用日期，但是它将返回 L 列中的最后一个日期，其中 M、N 或 O 列中有“否”。

所以在上面，它将显示 01-Jan-13 作为日期。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:51:50.350

如果您只想要该行中至少有一个“否”的日期，可以试试这个调整后的版本

`=IFERROR(SMALL(IF(ATW!$L$4:$L$19>TODAY(),IF(ATW!$M$4:$O$19="No",ATW!$L$4:$L$19)),1),MAX(IF(ATW!$M$4:$O$19="No",ATW!$L$4:$L$19)))`

用`CTRL`+ `SHIFT`+确认`ENTER`

鉴于下面的评论也许应该是这个版本

`=IFERROR(IFERROR(SMALL(IF(ATW!$L$4:$L$19>TODAY(),IF(ATW!$M$4:$O$19="No",ATW!$L$4:$L$19)),1),LARGE(IF(ATW!$M$4:$O$19="No",ATW!$L$4:$L$19),1)),MAX(ATW!$L$4:$L$19))`

# dreamweaver - Dreamweaver 不显示所有代码提示

> ID：14519576
> 
> 赞同：2
> 
> 时间：2013-01-25T10:11:06.897
> 
> 标签：dreamweaver, three.js, hints

Dreamweaver CS6 中的示例：

```
<script src="libs/Three.js"></script> 
<script>
  var scene = null, 

  function init(){
    scene = new THREE.Scene();
    scene.                       //a few code hints show up, not all
    scene.rotatation.x += 0.01;  //this one exists, but code hints doesn't find it

  }
  function move(){
    scene. //no code hints show up

  }
</script> 
```

所以我的问题是：

1.  在 move() 中，没有显示代码提示的原因可能是因为它们尚未在 init() 中初始化。有没有办法让它们出现在 move() 中？

2.  为什么代码提示不显示scene.rotation？如何让它显示所有变量/方法？

这不仅是 Dreamweaver 的问题，在我尝试过的其他 Web 构建器中也是如此。

如果您想知道，这就是我所说的代码提示：http: [//i.imgur.com/IDW2ljh.jpg](http://i.imgur.com/IDW2ljh.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T16:35:36.330

选择一个好的文本编辑器和工作流程非常重要，并且会极大地影响您的工作效率。我建议使用不同的文本编辑器。

[Sublime Text](http://www.sublimetext.com/)非常棒，但对于 three.js 代码提示，您必须安装插件。 [Web Storm](http://www.jetbrains.com/webstorm/)是另一个具有智能提示和颜色编码的出色编辑器。

# iphone - NSJSONSerialization - 数组中的键名

> ID：14519578
> 
> 赞同：0
> 
> 时间：2013-01-25T10:11:13.713
> 
> 标签：iphone, cocoa-touch

我正在使用objective-c 解析JSON 数据。

数据如下：

{"parcels":{"12595884967":{"kj_number":"KJ6612636902","re​​cipient":"Krzysztof Racki","courier":"3"}}}

我有一个对象“包裹”，它有包裹的钥匙。现在，虽然我使用 JSONSerialization 类提取它没有问题，但我一直在思考如何获取键名（我的意思是，如何从代码中读取值 12595884967）。

代码：

```
 if ( [ NSJSONSerialization isValidJSONObject:jsonObject ] ) {

    // we are getting root element, the "parcels"
    NSMutableSet* parcels = [ jsonObject mutableSetValueForKey:@"parcels" ];

    // get array of NSDictionary*'ies 
    // in this example array has single NSDictionary* element with flds like "kj_number"
    NSArray* array = [ parcels allObjects ];

    for ( int i = 0 ; i < [ array count ] ; ++i ) {

        NSObject* obj = [ array objectAtIndex: i ];

        // the problem: how i get this dictionary KEY? string value of 12595884967
        // how I should get it from code here?
        // like: number = [ obj name ] or maybe [ obj keyName ]

        if ( [ obj isKindOfClass:[ NSDictionary class ] ] ) {
           // this always evaluates to true
           // here we do reading attributes like kj_number, recipient etc
           // and this works
        }

    }
  } 
```

例如在java中它是：

```
 JSONObject json = response.asJSONObject();
        JSONObject parcels = json.getJSONObject( "parcels" );

        @SuppressWarnings("unchecked")
        Iterator<String> it = parcels.keys();

        while ( it.hasNext() ) {                    

          String key = it.next(); // value of 12595884967
                  Object value = parcel.getObject( key ); // JSONObject ref with data

                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:16:45.663

A set doesn't store keys. You want to get a dictionary from the json.

```
NSDictionary* parcels = [jsonObject objectForKey:@"parcels"];

// get the keys
NSArray *keys = [parcels allKeys];
for (NSString *key in keys) {
    NSDictionary *parcel = [parcels objectForKey:key];
    // do something with parcel
} 
```

Getting the keys in an array first is optional, you could iterate over the parcels dictionary directly: `for (NSString *key in parcels) {`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:29:38.843

我建议使用 a`NSDictionary`而不是`NSMutableSet`. 有`NSDictionary`一种方法`allKeys`可以为您提供请求的数据。

# c# - Microsoft 同步框架 COM 类错误

> ID：14519581
> 
> 赞同：16
> 
> 时间：2013-01-25T10:11:20.737
> 
> 标签：c#, .net, microsoft-sync-framework

我一直在使用“Microsoft Sync Framework 2.1”将两个本地 sql server 2008 数据库与一个 asp.net 项目同步。

我的代码：

```
SqlConnection clientConn = new SqlConnection(@"Server=XXXXXX;User ID=sa; Password=xxxx;Database=ZzzClient");

SqlConnection serverConn = new SqlConnection("Server=XXXXXX;User ID=sa; Password=xxxx;Database=ZzzServer");

SyncOrchestrator syncOrchestrator = new SyncOrchestrator();

syncOrchestrator.LocalProvider = new SqlSyncProvider("InventoryScope", clientConn);
syncOrchestrator.RemoteProvider = new SqlSyncProvider("InventoryScope", serverConn);

syncOrchestrator.Direction = SyncDirectionOrder.UploadAndDownload;

SyncOperationStatistics syncStats = syncOrchestrator.Synchronize(); 
```

但是执行**Synchronize()**调用时出现以下错误；

> 由于以下错误，检索具有 CLSID {EC413D66-6221-4EBB-AC55-4900FB321011} 的组件的 COM 类工厂失败：80040154 未注册类（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）。

开发环境 VS 2012，C# asp.net 项目，框架 4.5 OS：windows 7 Home Prem。(x64)

已安装 SyncSDK-v2.1-x64-ENU。

微软同步

Microsoft.Synchronization.Data

Microsoft.Synchronization.Data.SqlServer

引用已从“C:\Program Files\Microsoft Sync Framework\2.1\Runtime”添加到项目中。

由 SqlSyncScopeProvisioning 提供的两个数据库。

我已经尝试过 x64 和 x86 的 Project Platform Target

任何想法将不胜感激....

![预置数据库](../Images/93113627b68769aeff29f9eab708b349.png)

**我已将所有引用从“C:\Program Files (x86)\Microsoft SDKs\Microsoft Sync Framework”更改为“C:\Program Files\Microsoft Sync Framework\2.1\Runtime”**

![新参考](../Images/3f02c24e264b0afa6983fa122e1eb4af.png)

**并将平台目标设置为 x64** ![平台目标](../Images/c430b7be406946c35be9cc8a49089357.png)

**“使用本地 IIS Web 服务器”被选中** ![本地 IIS](../Images/f2e1e9ade983268a3971a50db2e6e7f1.png)

**更新：** 我用控制台应用程序尝试了相同的过程，它工作正常并同步了所有数据。

我添加了以下四个对控制台应用程序的引用；

“c:\Program Files\Microsoft Sync Framework\2.1\Runtime\x64\Microsoft.Synchronization.dll”

c:\Program Files\Microsoft Sync Framework\2.1\Runtime\ADO.NET\V3.1\x64\Microsoft.Synchronization.Data.dll"

“c:\Program Files\Microsoft Sync Framework\2.1\Runtime\ADO.NET\V3.1\x64\Microsoft.Synchronization.Data.Server.dll”

“c:\Program Files\Microsoft Sync Framework\2.1\Runtime\ADO.NET\V3.1\x64\Microsoft.Synchronization.Data.SqlServer.dll”

并将应用程序的调试属性设置如下 ![控制台应用程序的属性](../Images/9dd34c61abf5789495e5b4ebf6e440d9.png)

相同的引用、相同的构建属性（目标为 x64）和相同的代码在 Asp.Net 项目中不起作用。

> 无法加载文件或程序集“WebApplication2”或其依赖项之一。试图加载格式不正确的程序。

我猜，Web 应用程序无法加载正确的程序集并尝试加载 x86 版本

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T18:45:43.157

我讨厌回答自己的问题：

> 如果您启动一个包含 x64 Sync Framework 程序集的 asp.net 项目，但您**没有**在管理员帐户下运行 Visual Studio，VS 无法加载 Snyc Framework 程序集。至少，这是我的问题..

**如果您不是管理员 VS 无法正确管理“本地 IIS Web 服务器”。**

另外，如果我没记错的话，即使您的操作系统是 x64，“IIS Express”也无法加载 x64 同步框架程序集。

> 不要费心使用“IIS express”，只需在 VS 上使用具有管理员权限的“本地 IIS Web 服务器”并为您的项目设置平台目标 x64。

![在此处输入图像描述](../Images/049fccd8c620015eca6911f9c92ee589.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-23T21:54:27.860

我使用 64 位同步框架 DLL，并且必须在项目属性构建页面中将我的 C# 应用程序属性从为*Any CPU*构建到*x64更改。*
但随后 GUI 设计器不再显示对话框。

另一种方法是使用 32 位同步框架并在项目的构建设置中设置*Prefer 32 位。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-26T09:35:16.663

如果它发生在与您的开发计算机不同的计算机上，请确保您已安装 Microsoft Sync Framework - Redistributable Package。 [https://www.microsoft.com/en-us/download/details.aspx?id=19502](https://www.microsoft.com/en-us/download/details.aspx?id=19502)

并在下载选项中选择合适的平台（x86-x64）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-22T05:14:18.643

如果您不想更改目标平台并希望将其保持为“任何”。为您的应用程序使用新的应用程序池，转到高级设置并将启用 32 位应用程序更改为 True。它对我有用，它可能对你有用。

[![在此处输入图像描述](../Images/56a9412bfd5f09380688f1193caa68a2.png)](https://i.stack.imgur.com/C6GI2.png)

# testing - 尝试运行 JUnit 测试但收到错误：实现类

> ID：14519583
> 
> 赞同：0
> 
> 时间：2013-01-25T10:11:36.193
> 
> 标签：testing, junit, persistence, entity

我正在尝试使用以下类（DataStructureTest）代码运行一个简单的测试：

```
public class DataStructureTest extends DatabaseTestCase {

private static final Log log = (Log) LogFactory.getLog(DataStructureTest.class);

@Test
public void testProductData(){
    //Creating a product data
    log.debug("Creating new product data");
    ProductData productData = new ProductData("Öljy");

    //Setting basic information of product
    log.debug("Setting basic information like name, price, description "
            + "and amount.");
    productData.setProductPrice(4.13);
    productData.setProductDescription("Öljy rekoille.");
    productData.setProductAmount(20);

    //Saving entity
    EntityManager em = getEntityManager();
    EntityTransaction tx = em.getTransaction();
    tx.begin();
    em.persist(productData);
    Integer primarykey = productData.getId();
    tx.commit();

    //Reading entity from database
    log.debug("Reading entity data from database.");
    tx = em.getTransaction();
    tx.begin();
    productData = em.find(ProductData.class, primarykey);
    tx.commit();   

    //Asserting that the product data was correct in database
    Assert.assertEquals("Product name was correct", "Öljy", 
            productData.getProductName());
    Assert.assertEquals("Product price was correct", 4.13, 
            productData.getProductPrice());
    Assert.assertEquals("Product description was correct", "Öljy rekoille", 
            productData.getProductDescription());
    Assert.assertEquals("Product amount was incorrect", 21, 
            productData.getProductAmount());

} 
```

}

DatabaseTestCase 类代码如下：

```
public class DatabaseTestCase {

/**
* This method establishes Entity Managerin before every test
* and writes information into log.
*/
private static final Log log = LogFactory.getLog(DatabaseTestCase.class);
private EntityManager entityManager;
private EntityManagerFactory entityManagerFactory;

@Before
public void establishEntityManager(){
    log.debug("Establishing database connection!");
    entityManagerFactory = Persistence.createEntityManagerFactory("warehouseTestPersistence", null);
    entityManager = entityManagerFactory.createEntityManager();
}

@After
public void closeEntityManager(){
   if(entityManager != null){
        entityManager.close();           
   } else {
       log.warn("Entity was empty (null) in tests.");
   }
}

public EntityManager getEntityManager(){
    return entityManager;
}

/**
 * @param entityManager the entityManager to set
 */
public void setEntityManager(final EntityManager entityManager) {
    this.entityManager = entityManager;
}

/**
 * @return the entityManagerFactory
 */
public EntityManagerFactory getEntityManagerFactory() {
    return entityManagerFactory;
}

/**
 * @param entityManagerFactory the entityManagerFactory to set
 */
public void setEntityManagerFactory(final EntityManagerFactory entityManagerFactory) {
    this.entityManagerFactory = entityManagerFactory;
}

/**
* Save entity to database. Used for assisting in tests.
* @return primary key for specific entity.
*/

protected Integer saveEntity(Entityclass entity){
    EntityManager em = getEntityManager();
    EntityTransaction tx = em.getTransaction();
    tx.begin();
    em.persist(entity);
    tx.commit();
    return entity.getId();
}

/**
 * Load entity from save location.
 * @param <T>
 *      Generic class.
 * @param entityclass
 *      Entity class of entity that is going to be loaded.
 * @param primarykey
 *      Entity class primary key.
 * @return correspondant entity.
 */
protected <T extends Entityclass> T loadEntity(final Class<T> entitysclass, final Integer primarykey){
    EntityManager em = getEntityManager();
    EntityTransaction tx = em.getTransaction();
    tx.begin();
    T entity = em.find(entitysclass, primarykey);
    tx.commit();
    return entity;
} 
```

}

我使用 NetBeans 7.0.1。两个类的所有导入都正确完成。我还添加了所有必需的依赖项。但是每当我运行测试时，我都会得到以下结果：

-- 错误字段 --

未通过测试，1 次测试导致错误。（0,075 秒）com.mysite.warehouseapp.DataStructureTest FAILED testProductData 导致错误：实现类

在 com.mysite.warehouseapp.test.DatabaseTestCase.establishEntityManager(DatabaseTestCase.java:36) 处实现类 java.lang.IncompatibleClassChangeError

-- 测试结果字段 --

*   建立数据库连接！
*   实体在测试中为空（null）。

如果您在顶部看到测试结果图像，我不知道它是如何到达那里的，但它应该在这个位置。

所以简单地说，每当我尝试运行测试时，都没有实体。谁能告诉我原因？我试图为这个问题找到解决方案四天，但仍然没有运气。任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:05:07.937

我自己找到了解决方案，这很值得:)。无论如何，这个问题的解决方案是persistence.xml 在错误的文件夹中。对于新手，我建议您将 persistence.xml 放在项目 src/main/resources/META-INF/persistence.xml 中的以下文件夹下。

如果您没有在 src/test 下创建 resources/META-INF 文件夹，则创建一个并将您的 persistence.xml 文件放在那里。我希望这对某人有帮助:)

我发现的另一件事是，您可能有不同的罐子彼此“对抗”，因此您需要取出这些罐子然后它才能工作。

# batch-file - 如何使用批处理脚本读取文件并根据该行中的字符提取该行的子集？

> ID：14519584
> 
> 赞同：2
> 
> 时间：2013-01-25T10:11:39.327
> 
> 标签：batch-file, substring

我正在使用 ClearCase，我想使用批处理脚本来运行通过 cleartool 命令生成的文本文件，并且只提取包含`@@`字符串的行，从该行的开头提取直到`@@`字符串并在前后加上引号.

一个示例文本文件是：

```
"Created automatically as a result of 'Work On' action in ClearQuest"
owner: <owner>
group: <group>
stream: <stream>
title: <title>
change set versions:
  M:\LEVEL1\PROJECT\src\ROOT@@\main\LEVEL1\6
  M:\LEVEL1\PROJECT\src\ROOT\file 7.txt@@\main\LEVEL1\1
  M:\LEVEL1\PROJECT\src\ROOT\folder 2@@\main\LEVEL1\2
  M:\LEVEL1\PROJECT\src\ROOT\folder 2\file 6.txt@@\main\LEVEL1\1
  M:\LEVEL1\PROJECT\src\ROOT\folder 2\file 8.txt@@\main\LEVEL1\1
  M:\LEVEL1\PROJECT\src\ROOT\folder 2@@\main\LEVEL1\1
  M:\LEVEL1\PROJECT\src\ROOT\file 4.txt@@\main\LEVEL1\2
  M:\LEVEL1\PROJECT\src\ROOT@@\main\LEVEL1\5
  M:\LEVEL1\PROJECT\src\ROOT\file 2.txt@@\main\LEVEL1\4
  M:\LEVEL1\PROJECT\src\ROOT\file 1.txt@@\main\LEVEL1\4
  M:\LEVEL1\PROJECT\src\ROOT@@\main\LEVEL1\3
  M:\LEVEL1\PROJECT\src\ROOT@@\main\LEVEL1\3\file 3.txt\main\LEVEL1\1
clearquest record id: <id>
clearquest record State: <state> 
```

我希望输出是：

```
"M:\LEVEL1\PROJECT\src\ROOT"
"M:\LEVEL1\PROJECT\src\ROOT\file 7.txt"
"M:\LEVEL1\PROJECT\src\ROOT\folder 2"
"M:\LEVEL1\PROJECT\src\ROOT\folder 2\file 6.txt"
"M:\LEVEL1\PROJECT\src\ROOT\folder 2\file 8.txt"
"M:\LEVEL1\PROJECT\src\ROOT\folder 2"
"M:\LEVEL1\PROJECT\src\ROOT\file 4.txt"
"M:\LEVEL1\PROJECT\src\ROOT"
"M:\LEVEL1\PROJECT\src\ROOT\file 2.txt"
"M:\LEVEL1\PROJECT\src\ROOT\file 1.txt"
"M:\LEVEL1\PROJECT\src\ROOT"
"M:\LEVEL1\PROJECT\src\ROOT" 
```

这可能吗？

最好的祝福，

安德鲁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:32:43.163

干得好

```
for /f "tokens=*" %%a in ('findstr "@@" log.txt') do (
for /f "tokens=1 delims=@" %%b in ("%%a") do (
echo "%%b" >>new.txt
)
) 
```

提取的字符串将在 中`new.txt`，只需记住更改`log.txt`为您的真实文本文件 :)

# android - org.tmatesoft.sqljet.core.internal.lang.SqlJetParserException 异常触发的 SQLite 浏览器中的“无法创建部件的控件”

> ID：14519592
> 
> 赞同：1
> 
> 时间：2013-01-25T10:12:03.860
> 
> 标签：android, sqlite, eclipse-plugin, android-sqlite

我在我的 Eclipse 上安装了[QuestoID 的 CellObject SQLite 浏览器](http://www.questoid.com/Tools/CellObjectSQLiteXMLBrowser.aspx)插件，因为这是最常描述的可视化 android dbs 的解决方案。

我以前使用过它没有问题，但是今天（在再次使用它之前的一段时间后）尝试在我的模拟器上打开一个 .db 文件时，我 从 CellObject SQLite 浏览器收到错误消息**“无法创建部件的控件” 。**

如果我单击详细信息，我会收到一条更详细的消息，其中包含

> org.tmatesoft.sqljet.core.internal.lang.SqlJetParserException 在关于我的一张表的输入“值”处没有可行的替代方案。

我想桌子上可能有一些损坏，但显然不足以导致**编译指示完整性检查**失败，我可以用[Sqlite browser](http://sqlitebrowser.sourceforge.net/)打开它。

知道如何解决这个问题并能够在 CellObject SQLite 浏览器上看到数据库吗？

# java - 更改 Java 中的引用

> ID：14519595
> 
> 赞同：1
> 
> 时间：2013-01-25T10:12:18.343
> 
> 标签：java, reference, copy

我正在尝试用 Java 开发数据结构，但遇到了一个我无法解决的问题。我有一个对象的引用，并且在复制它之后，我想只使用副本来更改原始引用。例如：

```
Point a = new Point(0,0);
Point b = a;
b = new Point(5,5); 
```

我也希望“a”指向“new Point(5,5)”，而不仅仅是“b”。有没有办法做到这一点？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T10:13:16.053

```
Point a; // no need to instantiate
Point b = new Point(5,5);
a = b; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T10:20:57.720

如果你制作 setter 方法，你可以这样做：

```
Point a = new Point(0,0);
Point b = a;
//b and a now reference the same point
b.setX(5);
b.setY(5);
//Now we have made changes to the point referenced by b
//Since a references the same point, these changes will
//also apply to a 
```

* * *

你的例子的问题是你正在做`new Point(x,y)`.

```
Point a = new Point(0,0);
Point b = a;
//At this point only one instance of Point exists.
//Both a and b reference the same Point.
//Any change you do to that point will be reflected through both a and b.
b = new Point(5,5);
//Now you have created a second instance of point.
//a and b reference the different points. 
```

* * *

因此，总而言之，您必须了解修改现有点和创建新点以及只让一个参考引用新点之间的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:31:00.097

你不能在 Java 中做到这一点。您可以模拟它为 Point 创建一个包装器：

```
public class PointWrapper {
    private Point point;

    public PointWrapper(Point point) {
        this.point = point;
    }

    public Point getPoint() {
        return point;
    }

    public void setPoint(Point point) {
        this.point = point;
    }
}

PointWrapper a = new PointWrapper(new Point(0,0));
PointWrapper b = a;
b.setPoint(new Point(5,5)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T11:14:51.233

当您创建 时`new Point(5,5)`，会为 分配一个新引用`b`，因此您将对`a`和有不同的引用`b`。

保持对同一实例的引用，以便对 的更改`b`也“可见”的唯一方法`a`是将新值 (5,5) 设置为原始对象（也从**Alderath**解释）：

```
b.setX(5);
b.setY(5); 
```

# c# - 为什么在 ADO.NET / C# 中对 DbTransaction 使用 using 语句？

> ID：14519596
> 
> 赞同：5
> 
> 时间：2013-01-25T10:12:24.047
> 
> 标签：c#, ado.net, transactions, system.data

我理解隐式回滚（通常在发生异常并调用 Dispose 时发生）并不能保证所有提供程序。然而，许多示例使用：

```
using (DbTransactio txn = cnctn.BeginTransaction()) 
```

这有什么原因吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T10:21:34.207

最简单的答案是“因为它实现了`IDisposable`”。实现的任何类型`IDisposable`：适当地处理它是你的工作。在这种情况下，使用过程代码，最简单的方法是通过`using`语句。

在这种特定情况下，答案是：因为在发生错误时，您希望事务回滚而不是留给 GC。就个人而言，我可能倾向于使用`catch`to `Rollback`，但应该*希望*已经这样`Dispose()`做了。不过，我自己不会依赖它，除非它被记录在案。例如：

```
using(var tran = conn.BeginTransaction()) {
    try {
        // do stuff...
        tran.Commit();
    } catch {
        tran.Rollback();
        throw;
    }
} 
```

请注意，在 的相关情况下`TransactionScope`，“`Dispose()`不将其标记为已完成”是发出回滚信号的*预期方式：*

```
using(var tran = new TransactionScope()) {
    // do stuff...
    tran.Complete();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T10:21:27.407

如果你有这样的代码：

```
DbTransactio txn = cnctn.BeginTransaction();

// do something which throws an exception

txn.Commit(); 
```

在垃圾收集器决定收集事务对象之前，事务不会回滚（请注意，它只有在实现的类`IDisposable`遵循[dispose 模式](http://msdn.microsoft.com/en-us/library/b1yfkh5e%28v=VS.9%29.aspx)时才会起作用）。

你当然可以这样做：

```
DbTransaction txn = cnctn.BeginTransaction();
try
{
    // do something which throws an exception

    txn.Commit();
}
finally  
{
    txn.Dispose();
} 
```

但这不像

```
using (var txn = cnctn.BeginTransaction())
{
    // do something which throws an exception

    txn.Commit();
} 
```

编辑：

> 我理解隐式回滚（通常在发生异常并调用 Dispose 时发生）并不能保证所有提供程序。

我还没有看到一个不支持它的提供商。由于[IDbTransaction](http://msdn.microsoft.com/en-us/library/system.data.idbtransaction.aspx)确实继承`IDisposable`了所有实现应该`Dispose()`用来回滚事务。

# sql - 生成唯一名称的性能问题

> ID：14519599
> 
> 赞同：2
> 
> 时间：2013-01-25T10:12:35.107
> 
> 标签：sql, sql-server, performance, tsql

我在 SQL Server DB 中有一个表“对象”。它包含对象的名称（字符串）。我有一个新对象的名称列表，需要在单独的表“NewObjects”中插入“对象”表中。此后，此操作将称为“导入”。

如果记录名称已经存在于“对象”中，我需要为要从“NewObjects”导入到“对象”的每条记录生成一个唯一名称。这个新名称将针对旧名称存储在“NewObjects”表中。

```
DECLARE @NewObjects TABLE
(
    ...
    Name varchar(20),
    newName nvarchar(20)
) 
```

我已经实现了一个存储过程，它为要从“NewObjects”导入的每条记录生成唯一的名称。但是，我对 1000 条记录（在“NewObjects”中）的性能不满意。我需要帮助来优化我的代码。下面是实现：

```
PROCEDURE [dbo].[importWithNewNames] @args varchar(MAX)

-- Sample of @args is like 'A,B,C,D' (a CSV string)
...

DECLARE @NewObjects TABLE
(
    _index int identity PRIMARY KEY,
    Name varchar(20),
    newName nvarchar(20)
)

-- 'SplitString' function: this is a working implementation which is right now not concern of performance
INSERT INTO @NewObjects (Name)
SELECT * from SplitString(@args, ',')

declare @beg int = 1
declare @end int
DECLARE @oldName varchar(10)

-- get the count of the rows
select @end = MAX(_index) from @NewObjects

while @beg <= @end
BEGIN
    select @oldName = Name from @NewObjects where @beg = _index

    Declare @nameExists int = 0

    -- this is our constant. We cannot change
    DECLARE @MAX_NAME_WIDTH int = 5

    DECLARE @counter int = 1
    DECLARE @newName varchar(10)
    DECLARE @z varchar(10)

    select @nameExists = count(name) from Objects where name = @oldName
    ...
    IF @nameExists > 0
    BEGIN
        -- create name based on pattern 'Fxxxxx'. Example: 'F00001', 'F00002'.
        select @newName = 'F' + REPLACE(STR(@counter, @MAX_NAME_WIDTH, 0), ' ', '0')

        while EXISTS (select top 1 1 from Objects where name = @newName)
         OR EXISTS (select top 1 1 from @NewObjects where newName = @newName)
        BEGIN
            select @counter = @counter + 1
            select @newName = 'F' + REPLACE(STR(@counter, @MAX_NAME_WIDTH, 0), ' ', '0')
        END

        select top 1 @z = @newName from Objects

        update @NewObjects
        set newName = @z where @beg = _index
    END

    select @beg = @beg + 1
END

-- finally, show the new names generated
select * from @NewObjects 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:01:22.303

**免责声明：我无法*测试*这些建议，因此可能存在语法错误，您必须在实施它们时自行解决。它们在这里作为解决此过程的指南，还可以帮助您提高未来项目的技能。**

一个只是略过的优化，当你迭代更大的集合时会变得更加普遍，这里的代码是：

```
select @nameExists = count(name) from Objects where name = @oldName
...
IF @nameExists > 0 
```

考虑将其更改为：

```
IF EXISTS (select name from Objects where name = @oldName) 
```

* * *

此外，而不是这样做：

```
-- create name based on pattern 'Fxxxxx'. Example: 'F00001', 'F00002'.
select @newName = 'F' + REPLACE(STR(@counter, @MAX_NAME_WIDTH, 0), ' ', '0')

while EXISTS (select top 1 1 from Objects where name = @newName)
 OR EXISTS (select top 1 1 from @NewObjects where newName = @newName)
BEGIN
    select @counter = @counter + 1
    select @newName = 'F' + REPLACE(STR(@counter, @MAX_NAME_WIDTH, 0), ' ', '0')
END 
```

考虑一下：

```
DECLARE @maxName VARCHAR(20)
SET @newName = 'F' + REPLACE(STR(@counter, @MAX_NAME_WIDTH, 0), ' ', '0')

SELECT @maxName = MAX(name) FROM Objects WHERE name > @newName ORDER BY name
IF (@maxName IS NOT NULL)
BEGIN
    @counter = CAST(SUBSTRING(@maxName, 2) AS INT)
    SET @newName = 'F' + REPLACE(STR(@counter, @MAX_NAME_WIDTH, 0), ' ', '0')
END 
```

这将确保您不会为了找到生成名称的最大整数值而进行迭代和执行多个查询。

此外，根据我所掌握的少量上下文，您还应该能够进行另一项优化，以确保您只需执行上述一次，**永远**。

```
DECLARE @maxName VARCHAR(20)
SET @newName = 'F' + REPLACE(STR(@counter, @MAX_NAME_WIDTH, 0), ' ', '0')

IF (@beg = 1)
BEGIN
    SELECT @maxName = MAX(name) FROM Objects WHERE name > @newName ORDER BY name
    IF (@maxName IS NOT NULL)
    BEGIN
        @counter = CAST(SUBSTRING(@maxName, 2) AS INT)
        SET @newName = 'F' + REPLACE(STR(@counter, @MAX_NAME_WIDTH, 0), ' ', '0')
    END
END 
```

我说您可以进行优化的原因是因为除非您必须担心其他实体在此期间插入**看起来像您的**记录（例如 Fxxxxx），否则您只需找到一次 MAX 并且可以简单地***迭代*** `@counter`在循环。

***实际上，***您实际上可以将整个部分*拉出*循环。你应该能够很容易地推断出来。只需将`DECLARE`and`SET`与. ***但要一步一步来。***`@counter``IF (@beg = 1)`

 ** * *

另外，更改此行：

```
select top 1 @z = @newName from Objects 
```

对此：

```
SET @z = @newName 
```

因为您***实际上是***`SET`在对两个局部变量运行查询。**这可能是性能问题的一个重要原因。**一个好的做法是*，除非您实际上是从`SELECT`语句*中设置变量，否则请使用`SET`局部变量的操作。您的代码中还有其他一些适用的地方，请考虑这一行：

```
select @beg = @beg + 1 
```

改用这个：

```
SET @beg = @beg + 1 
```

* * *

最后，如上所述，关于简单地***迭代*** `@counter`，在你有这一行的循环结束时：

```
select @beg = @beg + 1 
```

只需添加一行：

```
SET @counter = @counter + 1 
```

你是金色的！

* * *

回顾一下，您可以一次收集最大冲突名称，**这样**您就可以摆脱所有这些迭代。您将开始使用`SET`来摆脱性能困扰的行，例如`select top 1 @z = @newName from Objects`您实际查询表以设置两个局部变量的位置。而且您将利用该`EXISTS`方法而不是设置一个利用`AGGREGATE`函数`COUNT`来完成这项工作的变量。

让我知道这些优化是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:20:43.690

您应该避免在循环内进行查询。特别是如果这是在表变量中...

您应该尝试使用临时表并在 newname 列上索引此表。我敢打赌它会提高一点性能..

但是最好你重写它，避免内部带有查询的那些循环..

设置我的环境进行测试...

```
 --this would be your object table... I feed it with some values for test
    DECLARE @Objects TABLE
    (
        _index int identity PRIMARY KEY,
        Name varchar(20)

    )
    insert into @Objects(name)
    values('A'),('A1'),('B'),('F00001')

    --the parameter of your procedure
    declare @args varchar(MAX)
    set @args = 'A,B,C,D,F00001'

    --@NewObjects2 is your @NewObjects just named the n2 cause I did run your solution together when testing

    DECLARE @NewObjects2 TABLE
    (
        _index int identity PRIMARY KEY,
        Name varchar(20),
        newName nvarchar(20)
    )

    INSERT INTO @NewObjects2 (Name)
    SELECT * from SplitString(@args, ',')

    declare @end int
    select @end = MAX(_index) from @NewObjects2
    DECLARE @MAX_NAME_WIDTH int = 5 
```

此时它与您的解决方案非常相似

现在我会做什么而不是你的循环

```
--generate newNames in format FXXXXX with free names sufficient to give newnames for all lines in @newObject
--you should alter this to get the greater FXXXXX name inside the Objects and start generate newNames from this point.. to avoid overhead creating newNames that will sure not to be used..
with N_free as 
(
     select 
         0 as [count],
         'F' + REPLACE(STR(0, @MAX_NAME_WIDTH, 0), ' ', '0') as [newName],
         0 as fl_free,
         0 as count_free

     union all 

     select 
         N.[count] + 1 as [count],
         'F' + REPLACE(STR(N.[count]+1, @MAX_NAME_WIDTH, 0), ' ', '0') as [newName],
         OA.fl_free,
         count_free + OA.fl_free as count_free
     from 
         N_free N
     outer apply 
         (select 
              case 
                 when not exists(select name from @Objects
                                 where Name = 'F' + REPLACE(STR(N.[count]+1, @MAX_NAME_WIDTH, 0), ' ', '0')) 
                    then 1 
                 else 0 
              end as fl_free) OA
    where 
        N.count_free < @end
)
--return only those newNames that are free to be used
    ,newNames as (select  ROW_NUMBER() over (order by [count]) as _index_name
                         ,[newName] 
                  from N_free where fl_free = 1
    )
--update the @NewObjects2 giving newname for the ones that got the name already been used on Objects
    update N2
    set newName = V2.[newName]
    from @NewObjects2 N2
    inner join (select V._index,V.Name,newNames.[newName]
                from(   select row_number() over (partition by case when O.Name is not null 
                                                                        then 1
                                                                        else 0
                                                        end 
                                                        order by N._index) as _index_name
                                  ,N._index
                                  ,N.Name
                                  ,case when O.Name is not null 
                                        then 1
                                        else 0
                                    end as [fl_need_newName]
                            from @NewObjects2 N
                            left outer join @Objects O
                            on O.Name = N.Name
                    )V
                    left outer join newNames 
                    on newNames._index_name = V._index_name
                    and V.fl_need_newName = 1
    )V2
    on V2._index = N2._index
            option(MAXRECURSION 0)

    select * from @NewObjects2 
```

我获得的结果与使用您针对这种环境的解决方案的结果相同......

您可以检查这是否真的产生相同的结果......

此查询的结果是

```
 _index  Name    newName
        1   A       F00002
        2   B       F00003
        3   C       NULL
        4   D       NULL
        5   F00001  F00004 
```*

# scala - 在 Mapper.findAll 中传递动态 QueryParams

> ID：14519607
> 
> 赞同：0
> 
> 时间：2013-01-25T10:12:58.173
> 
> 标签：scala, lift

我有这样的功能：

```
def getList(gig: Gig, createdBy: User = null, all: Boolean = true): List[Bid] = {
    var bys = List[QueryParam](By(Bid.gig, gig))
    if (createdBy!=null) bys = By(Bid.createdBy, createdBy) :: bys
    if (!all) bys = By(Bid.deleted, false) :: bys

    Bid.findAll(bys) //gives error as do not accept List[QueryParam]
  } 
```

如何为 findAll 提供动态数量的 QueryParam？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:52:04.903

像这样：

```
Bid.findAll(bys:_*) 
```

旁注：值得避免`null`赞成 or `Option`。

```
def getList(gig: Gig, createdBy: Option[User] = None, all: Boolean = true): List[Bid] = { 
```

然后你可以做

```
val bys = (if (!all) Some(By(Bid.deleted, false)) else None) ++
          (createdBy.map(u => By(Bid.createdBy, u))) ++ 
          List[QueryParam](By(Bid.gig, gig))
Bid.findAll(bys:_*) 
```

# c# - c# - 如何通过Windows XP到Windows 8的进程在c#中测量上传和下载网络利用率？

> ID：14519608
> 
> 赞同：1
> 
> 时间：2013-01-25T10:12:58.727
> 
> 标签：c#, networking

我想在我的 C# 应用程序中按进程测量带宽网络。

我试图在 Process Object 中找到此信息，但是，此信息不存在。

我也尝试过使用性能计数器，但我没有按进程找到带宽信息。

您是否知道按进程在 Windows XP 到 Windows 8 上的应用程序工作测量网络带宽（发送的网络字节，接收的网络字节）？

我知道Windows有这个信息，因为当我们打开“资源监视器”时，我可以在网络选项卡中选择一个特定的应用程序，我们可以实时看到发送和接收的字节数。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T14:06:41.577

据我所知，你不能用纯 C# 来做到这一点，你必须对 IP Helper 库进行一些 P/Invoke 调用。

因为这涉及到很多，所以我将简要概述您需要进行的 API 调用。

首先，这在 Windows XP 上不起作用，因为某些 API 是新的（这就是该版本不存在资源监视器的原因）。如果您需要 Windows XP 支持，恐怕您将不得不使用 WinPCap 之类的东西。在 Vista+ 上，我们可以进行更新的网络信息调用，情况会变得更好。

对 IPv4、IPv6、TCP 和 UDP 有单独的调用。为简洁起见，我将仅概述 IPv4/TCP 集，因为一旦您了解了该过程，就可以轻松复制它以填充其他部分。

要开始，您需要调用`GetTcpTable2()`. 这将为您提供机器上当前活动的连接表。你最终会`MIB_TCPTABLE2`得到一堆`MIB_TCPROW2`结构。每个结构代表一个连接。

该`MIB_TCPROW2`结构有一个 PID 字段，您可以将其与当前进程 ID 匹配。

这意味着不断轮询连接表，对其进行迭代并转储与您的进程相关的行。

对于这些行中的每一行，您必须调用`GetPerTcpConnectionEStats()`. 您会感兴趣两种统计类型，第一种`TcpConnectionEstatsData`返回有关发送和接收的字节数的信息。第二个`TcpConnectionEstatsBandwidth`返回有关连接带宽的信息。

我没有为此显示任何代码的原因是它非常复杂并且涉及大量结构编组，但希望我给你的内容比你目前拥有的更多。

以下是这些功能的 MSDN 链接：

`GetTcpTable2()`- [http://msdn.microsoft.com/en-us/library/bb408406(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/bb408406(v=vs.85).aspx) `GetPerTcpConnectionEStats()` - [http://msdn.microsoft.com/en-us/library/bb485738(v=vs. 85).aspx](http://msdn.microsoft.com/en-us/library/bb485738(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-21T09:03:34.480

`GetTcpTable2()`C# 中的一个简单示例。

```
[DllImport("iphlpapi.dll", SetLastError = true)]
static extern int GetTcpTable2(byte[] pTcpTable, out int pdwSize, bool bOrder);

static void Main(string[] args) {
  int pdwSize = 20000;
  byte[] buffer = new byte[pdwSize];
  int res = GetTcpTable2(buffer, out pdwSize, true);
  if (res != 0) {
    buffer = new byte[pdwSize];
    res = GetTcpTable2(buffer, out pdwSize, true);
    if (res != 0) throw new Exception(res);
  }

  int nOffset = 0;
  var dwNumEntries = Convert.ToInt32(buffer[nOffset]); nOffset += 4;
  Console.WriteLine("total connection: {0}", dwNumEntries);

  for (int i = 0; i < dwNumEntries; i++) {
    Console.WriteLine("*****************");
    int st = Convert.ToInt32(buffer[nOffset]);
    Console.WriteLine("state: {0}", st); nOffset += 4;

    string LocalAdrr = buffer[nOffset].ToString() + "." + buffer[nOffset + 1].ToString() + "." 
      + buffer[nOffset + 2].ToString() + "." + buffer[nOffset + 3].ToString();
    Console.WriteLine("local ip: {0}", LocalAdrr); nOffset += 4;

    int LocalPort = (((int)buffer[nOffset]) << 8) + (((int)buffer[nOffset + 1])) +
      (((int)buffer[nOffset + 2]) << 24) + (((int)buffer[nOffset + 3]) << 16);
    Console.WriteLine("local port: {0}", LocalPort); nOffset += 4;

    string RemoteAdrr = buffer[nOffset].ToString() + "." + buffer[nOffset + 1].ToString() + "." 
      + buffer[nOffset + 2].ToString() + "." + buffer[nOffset + 3].ToString();
    Console.WriteLine("remote ip: {0}", RemoteAdrr); nOffset += 4;

    int RemotePort = (RemoteAdrr == "0.0.0.0") ? 0
      : RemotePort = (((int)buffer[nOffset]) << 8) + (((int)buffer[nOffset + 1])) +
        (((int)buffer[nOffset + 2]) << 24) + (((int)buffer[nOffset + 3]) << 16);
    Console.WriteLine("remote port: {0}", RemotePort); nOffset += 4;

    int pid = BitConverter.ToInt32(buffer.Skip(nOffset).Take(4).ToArray(), 0);
    Console.WriteLine("pid: {0}", pid); nOffset += 4;

    int OffloadState = Convert.ToInt32(buffer[nOffset]);
    Console.WriteLine("OffloadState: {0}", OffloadState); nOffset += 4;
  }

} 
```

# c# - 在 list.removeAll 中调用 dispose

> ID：14519609
> 
> 赞同：3
> 
> 时间：2013-01-25T10:12:59.803
> 
> 标签：c#, garbage-collection, dispose, removeall

我对 C# 编程很陌生，GC 的概念及其对 IDisposable 的影响仍然有点模糊。就垃圾收集而言，调用 Dispose 意味着什么？具体来说，我想知道以下代码是否会偶尔失败，具体取决于垃圾收集何时启动。（我无法在测试期间使其崩溃）。

```
//List<TestClass2> tc2List;
//TestClass2 invokes a thread. It implements IDisposable. 
//Its Dispose() sets a stop-condition for the thread,
//and joins the thread, awaiting it to stop. (may take 100 msek)

tc2List.RemoveAll(t =>
{
  if (String.Compare(t.Name, "Orange") == 0)
  {
    t.Dispose(); //May take up to 100 msek
    return true;
  }
  return false;
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T10:28:28.280

你的代码有效，但它的风格很糟糕。谓词不应该有副作用。所以你应该首先处理元素，然后删除它们。

```
Predicate<T> filter = t => t.Name == "Orange";
foreach(var t in tc2List.Where(filter))
  t.Dispose();
tc2List.RemoveAll(filter); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T10:17:19.133

> i wonder if the following code may fail occationally, depending on when the garbage collection kicks in

No, it won't fail

```
//Its Dispose() sets a stop-condition for the thread,
//and joins the thread, awaiting it to stop. (may take 100 msek) 
```

That is a slightly a-typical use of Dispose() but not wrong. A more efficient approach would use a different `Stop()` so that you can stop all threads at once. Or call `Dispose()` from `Parallel.ForEach()`. But whatever method you choose, it is not hindering, nor is it being hindered by, the GC.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T10:22:10.887

你有 finalize 方法`TestClass2`吗？

处理主要属性

1.  这必须在实现 IDispose 接口的类中实现。
2.  它是释放非托管资源（如文件、句柄和连接等）的正确位置。
3.  Dispose() 方法在代码本身中被显式调用。
4.  当在“使用”中使用时，会自动调用 Dispose() 方法（对于实现 IDispose 的对象）

请参阅[链接](http://www.codeproject.com/Questions/451741/what-is-finalize-and-dispose-method-in-csharp-net)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T10:38:58.140

就垃圾收集而言，调用 Dispose 意味着什么？

调用 dispose 意味着您正在使用 Dispose 方法的实现强制清理事物（字面意思是内存）。注意：（某些框架类确实会为您调用 Dispose 的实现。例如 System.Windows.Forms.Form）

相比之下，垃圾收集是 .NET 运行时的一项功能，它会自动为您清理东西。我的意思是自动的，因为它取决于运行时处理的内存压力和其他因素。

我会推荐一个简单的策略。如果您认为内存会比需要的时间更长并且会影响应用程序，请执行 Dispose()。否则将其留给运行时，它会在对象超出范围时自动清理（即最终确定）对象。GC 有自己的关于如何进行清理的算法，但您可以在更大程度上依赖它。

下一个问题具体来说，我想知道以下代码是否偶尔会失败，具体取决于垃圾收集何时启动

我觉得不是。由于 GC 启动而导致代码失败，取决于您如何编写 TestClass2 的终结器。绝对你的电话 t.Dispose() 不会与 GC 冲突。

# css - 使用 Shopify 时在 mozilla 上出现 @font-face 问题

> ID：14519613
> 
> 赞同：0
> 
> 时间：2013-01-25T10:13:22.067
> 
> 标签：css, font-face, shopify

我正在使用 css

```
 @font-face {
 font-family: ChangaOne-Regular;
 src: url({{ 'changaone-regular.eot' | asset_url }});
 src: url({{ 'changaone-regular.eot?#iefix' | asset_url }}) format('embedded-opentype'),  url({{ 'changaone-regular.woff' | asset_url }}) format('woff'),  url({{ 'changaone-regular.ttf' | asset_url }}) format('truetype'),  url({{'changaone-regular.svg#changaone-regular' | asset_url }}) format('svg');
 font-weight: normal;
 font-style: normal;
} 
```

我已将字体保存在图像文件夹中。由于它没有采用字体，因此我在我的 css 文件的文件夹中创建了字体的副本。

现在它在 chrome 上完美运行。但是在 Mozilla 中，字体没有被读取。我发现我们可以通过将 htaccess 添加到包含内容的 css 文件的文件夹来解决此问题

```
<FilesMatch "\.(ttf|otf|eot|woff|font.css)$">
  <IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
  </IfModule>
</FilesMatch> 
```

这在Firefox中也没有任何区别。那么我们该如何解决这个问题呢？任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:06:38.837

尝试使用字体文件的绝对 URL。

# bluetooth - 蓝牙并行连接

> ID：14519614
> 
> 赞同：0
> 
> 时间：2013-01-25T10:13:22.940
> 
> 标签：bluetooth, core-bluetooth, bluetooth-lowenergy

关于蓝牙设备与一个发送方蓝牙设备和多个接收方蓝牙设备的连接，我几乎没有问题

1.  一个发件人可以向多个发件人发送相同的文件吗？
2.  一个发件人可以同时使多个连接可用（不发送任何东西，只有连接可用）。
3.  使用蓝牙设备，我们可以进行双向通信（不是一对一，如群聊）。
4.  发送方和接收方可以同时交换数据。这可能吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T16:47:47.653

> 一个发件人可以向多个发件人发送相同的文件吗？

是和否，蓝牙确实具有广播功能，但大多数平台不为其提供 API。一种方法是让您的应用程序一个接一个地向所有设备重复相同的文件片段。

> 一个发件人可以同时使多个连接可用（不发送任何东西，只有连接可用）。

是的

> 使用蓝牙设备，我们可以进行双向通信（不是一对一，如群聊）。发送方和接收方可以同时交换数据。这可能吗？

是的，非常确定-蓝牙我一般可以-如何针对特定平台和蓝牙版本进行操作取决于该特定平台和版本

# mysql - 全文搜索显示错误结果

> ID：14519616
> 
> 赞同：1
> 
> 时间：2013-01-25T10:13:25.317
> 
> 标签：mysql, sql, full-text-search, myisam

// 创建表

```
CREATE  TABLE `TEST_FULL_TEXT_SEARCH` 
(
    `ID` INT NOT NULL AUTO_INCREMENT,
    `TEST` VARCHAR(45) NULL,
    PRIMARY KEY (`ID`),
    FULLTEXT INDEX `FULL_TEXT` (`TEST` ASC) 
)
ENGINE = MyISAM; 
```

// 插入一些记录

```
INSERT INTO `TEST_FULL_TEXT_SEARCH` 
SELECT 1, 'vikas kumar gupta' UNION ALL
SELECT 2, 'kratika gupta' UNION ALL
SELECT 3, 'kratika sharma' UNION ALL
SELECT 4, 'kratika vikas kumar gupta' UNION ALL
SELECT 5, 'kratika shukla' UNION ALL
SELECT 6, 'chetan kastwar' UNION ALL
SELECT 7, 'kratika kastwar' ; 
```

// 现在进入选择查询

```
SELECT * FROM TEST_FULL_TEXT_SEARCH
WHERE MATCH(test) 
AGAINST('kratika' IN NATURAL LANGUAGE MODE WITH QUERY EXPANSION ); 
```

// 或者

```
SELECT * FROM TEST_FULL_TEXT_SEARCH
WHERE MATCH(test) 
AGAINST('kratika' WITH QUERY EXPANSION); 
```

// 输出

```
1   vikas kumar gupta
4   kratika vikas kumar gupta
3   kratika sharma
5   kratika shukla
2   kratika gupta 
```

1.  为什么它没有在结果集中选择“ **kratika kastwar** ”？
2.  为什么要先写“vikas kumar gupta”

// 现在我们在布尔模式下搜索

```
SELECT * FROM TEST_FULL_TEXT_SEARCH
WHERE MATCH(test) 
AGAINST('kratika' IN BOOLEAN MODE); 
```

// 输出

```
2   kratika gupta
3   kratika sharma
4   kratika vikas kumar gupta
5   kratika shukla
7   kratika kastwar 
```

1.  为什么有' **kratika kastwar** '？

// 现在我们在布尔模式下搜索而不进行查询扩展

```
SELECT * FROM TEST_FULL_TEXT_SEARCH
WHERE MATCH(test) 
AGAINST('kratika' IN NATURAL LANGUAGE MODE); 
```

// 输出

```
No result found 
```

请说明为什么它没有在列表中选择“ **kratika kastwar ”**

// 已编辑

为什么它显示“ **vikas kumar gupta** ”`IN NATURAL LANGUAGE MODE WITH QUERY EXPANSION` 或`WITH QUERY EXPANSION`排名第一而不是与**kratika**相关的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:45:44.050

跑步

```
SELECT ID, TEST, MATCH(TEST) AGAINST('kratika' IN NATURAL LANGUAGE MODE ) AS MT FROM TEST_FULL_TEXT_SEARCH 
WHERE MATCH(TEST) 
AGAINST('kratika' IN NATURAL LANGUAGE MODE  ); 
```

结果集为空，因为“kratika”一词出现在至少 50% 的行中。

请检查[http://dev.mysql.com/doc/refman/5.5/en//fulltext-natural-language.html](http://dev.mysql.com/doc/refman/5.5/en//fulltext-natural-language.html)，其中提到：

> 这种技术最适用于大型集合（事实上，它是经过仔细调整的）。对于非常小的表，单词分布并不能充分反映它们的语义价值，这种模型有时可能会产生奇怪的结果。

他们有一些样品。

# php - 在 mysql 查询中包含 php var 结果

> ID：14519623
> 
> 赞同：1
> 
> 时间：2013-01-25T10:13:41.887
> 
> 标签：php, mysql, sql

可以在 MySQL 结果中包含 PHP 数据吗？让我解释一下自己：

两张表，一张包含用户的操作，一张包含用户信息。我会查询操作并检索用户 ID 并按用户分组计算每个操作：

```
$ids = $conn->fetchAll('SELECT origin,COUNT(*) as actions from action WHERE `brand` = ' . $id . '  AND SUBSTRING(origin,1,3)<>"pct" GROUP BY origin'); 
```

然后我获取该结果数组并使用它从另一个表中输入用户信息：

```
$norm_ids = '(';
foreach ($ids as $ids) {
    $norm_ids .= $ids['origin'] .',';
}
$norm_ids = substr_replace($norm_ids ,"",-1) .')';

$users = $conn->fetchAll('SELECT * from userinfo WHERE `id` in ' . $norm_ids . ' ORDER BY `name`'); 
```

我想`$users`包括`COUNT(*)`我在上一个查询中得到的，这可以直接在查询中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:18:47.393

我已经制作了自己的脚本，我想这就是你要找的：

```
$sql = "SELECT * FROM user WHERE Username = '".$_SESSION['Username']."' ";
$stm = $db->prepare($sql);
$result = $stm->execute(array());
while($row = $stm->fetch(PDO::FETCH_ASSOC)) {
$userid = $row['UserID'];
} 
```

在这里我得到用户ID

```
$sql =  "SELECT activity.*"."FROM user_activity, activity "."WHERE user_activity.ActivityID = activity.ActivityID AND user_activity.UserID = '".$userid."' " ; 
```

在这里你在我的查询中使用 $userid。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:22:22.780

您可以为此使用 mysql 连接：

```
SELECT u.*, count(a.origin) FROM userinfo AS u LEFT JOIN action AS a ON a.origin = u.id WHERE a.brand = '.$id.' AND  SUBSTRING(a.origin,1,3) <> "pct" GROUP BY a.origin 
```

您必须尝试稍微调整一下（可能），但它可能会使您的脚本更容易。（我不确定用户信息是否也会被组合在一起（可能不应该））。

使用 JOIN 时，您必须设置正确的索引以获得最佳性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:25:36.743

首先，对代码的一般评论：

```
foreach ($ids as $ids) 
```

这看起来是错误的，我不知道 PHP 是如何处理这个问题的，但可能不像你所期望的那样。为清楚起见，使用不同的变量名。

您需要在查询中转义“pct”周围的引号，以便 PHP 不会解析它们。

另外，我不知道第一个 SQL 语句中的 $id 来自哪里，但您可能想转义它。使用 PDO：

```
$stmt = $conn->prepare("SELECT origin,COUNT(*) as actions from action WHERE `brand` = :id  AND SUBSTRING(origin,1,3)<>\"pct\" GROUP BY origin");
$stmt->execute( array( ":id" => $id ) );
$ids = stmt->fetchAll(); 
```

要访问 COUNT(*) 数据并将其添加到用户信息中，我首先在第一个查询中重命名它（不喜欢我的数组键中的特殊字符）：

```
"SELECT origin,COUNT(*) as nummatches as actions from action WHERE `brand` = :id  AND SUBSTRING(origin,1,3)<>\"pct\" GROUP BY origin" 
```

然后，您可以将其添加到第二个查询中语句的 SELECT 部分：

```
'SELECT *,' . $ids['nummatches'] . ' from userinfo WHERE `id` in ' . $norm_ids . ' ORDER BY `name`' 
```

# python - 用于学习 Django 的 Python 2.7 或 3.3

> ID：14519625
> 
> 赞同：8
> 
> 时间：2013-01-25T10:13:43.147
> 
> 标签：python, django, python-3.x, python-2.7

我对学习 Python 很感兴趣，但我不知道我应该选择哪个版本。当我用谷歌搜索时，我得到了一年多前发布的答案。如果我想学习 Django，哪个版本会有用并得到支持？

请注意，我知道 C、C++、Java 和 C#。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T10:16:13.657

Django 仅对 Python 3 提供实验性支持，因此您现在必须使用 Python 2.7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:19:24.290

首先，一个简短的比较是[It's Better than 2.7](https://us.pycon.org/2013/schedule/presentation/117/)和[Python 3.3 何时成为默认值](https://lists.ubuntu.com/archives/ubuntu-devel/2012-October/036008.html)。但是，请记住 Python 实际上是一种脚本语言，您可以使用 C 或 C++ 来创建具有新功能的模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:16:24.383

我建议从 python 2.7 开始，它现在更常用，并且`django`是用 2.7 AFAIK 编写的。

显然你找到的答案仍然成立：

[我们应该使用 python 2.6 还是 2.7 还是 3.x？](https://softwareengineering.stackexchange.com/questions/102999/should-we-use-python-2-6-or-2-7-or-3-x)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T10:30:19.453

如果您已经了解几种语言，那么请同时学习 Python 2 和 3。差异小到足以让许多项目使用单个（相同）源代码来支持这两个版本。

对于实际部署，如果您需要使用未移植到 Python 3 的依赖项，您可能更喜欢 Python 2.7。

# computational-geometry - 从点间距重建 3d 点

> ID：14519629
> 
> 赞同：4
> 
> 时间：2013-01-25T10:14:02.083
> 
> 标签：computational-geometry, graph-algorithm

我有一组例如 8 点。我知道每个点之间的所有距离。是否有一种算法可以重建这些点的 3d 坐标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T11:00:07.933

What you are try to do is called [Trilateration](http://en.wikipedia.org/wiki/Trilateration). It might be wise to do a bit of research before you proceed, as it's tricky to get right. However, I'll start you off with the following.

The following should work, as long as you have the actual 3D distances. Problems may come up if you don't.

1.  Take a point, p1, and assign it to be the origin, (0,0,0).
2.  Take another point, p2, and place it at (distance(p1,p2),0,0)
3.  Take another point, p3, and place it on the (x,y,0) plane based on it's distance from p1 and p2\.
4.  Take another point, p4, and place in 3D space, based on it's distance from p1, p2, p3.
5.  Repeat step 4 until no points remain.

The first 3 steps are enough to orient and fix the coordinates.

Solving steps 3 and 4 can be done by making use of planar triangles, that form easily due to how the points are centered.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T10:28:10.790

假设点处于一般位置。没有3个点在同一条线上，也没有4个点在同一平面上。这不是限制，只是为了使算法更简单而不检查特殊情况。

四个球体（在一般位置）的交点（如果存在）是一个点。可以看出，由于两个球体的交点是一个圆，三个球体的交点是2个点，如果第四个球体的中心不在与其他3个球体中心的平面上，则该球体只能通过其中一个交点.

因此，如果距离有效，则可以通过向其增量添加点来创建形状。

前 4 个点的位置定义了方向。例如，第一个点设置在原点，第二个点设置在到第一个距离的 +X 上，第三个点设置在 XY 平面上的 +Y 方向上的圆相交处，第四个点设置在 +Z 方向上的三个球体的相交处。

可以通过将 4 个球体与前 4 个点的中心相交来定位附加点，半径由到它们的距离给出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T16:03:19.463

另一种可能性是度量[Multidimensionale Skalierung](http://de.wikipedia.org/wiki/Multidimensionale_Skalierung)。

# iphone - 能够在 Facebook 原生分享对话中标记朋友

> ID：14519635
> 
> 赞同：4
> 
> 时间：2013-01-25T10:14:23.980
> 
> 标签：iphone, ios, objective-c, facebook, facebook-ios-sdk

我在最新版本中使用 Facebook iOS SDK 3.1，并且正在使用来自`FBNativeDialogue`.

![在此处输入图像描述](../Images/f513f0cc6fe70aa261fbd883d72e6803.png)

它的角落有一个“朋友”按钮，我一直认为它是用来标记朋友的（就像位置按钮标记位置一样），但我意识到这是帖子的隐私设置。

因此，我仍然对如何在帖子中标记朋友感到困惑。当我键入@ 后跟我的朋友姓名时，似乎什么也没发生，这还没有实现吗？有没有人知道实现这一点的聪明方法？

客户想要的类似于“你和谁在一起？” 按钮如下所示：

![在此处输入图像描述](../Images/fc7034cdc4b1b2c8b82f62a4b0e1126d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T17:54:52.283

[考虑到当前的 Facebook SDK (3.5.1) 文档——https](https://developers.facebook.com/docs/howtos/ios-6/#nativepostcontroller) ://developers.facebook.com/docs/howtos/ios-6/#nativepostcontroller ，我认为这是不可能的。它指出：

> iOS 6 包含一个本地共享表，允许用户将状态更新、照片、链接和位置发布到 Facebook，并支持设置帖子的受众和使用位置标记帖子。

即使您从 iOS 的通知中心在 Facebook 上发布内容，它也只允许您分享上述信息，而无需标记朋友。

相反，您可以使用 Facebook 视图，就像他们在[https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/show-friends/](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/show-friends/)中所做的那样。但是，如果您必须使用本机对话框，我看不到方法。如果你让它工作，请告诉我们解决方案。

# ios - iPhone 的分发证书

> ID：14519642
> 
> 赞同：0
> 
> 时间：2013-01-25T10:14:42.363
> 
> 标签：ios, ios4, certificate, provisioning-profile

我在应用商店有一个应用。现在我想切换开发人员。如果老开发者不给我分发证书的私钥，我有什么选择？

*   如果我撤销我现有的分发证书并创建一个新的，我了解我在商店中的现有应用程序无法更新。

*   另一方面，如果我等到我当前的分发证书过期，然后创建一个新的，那么我在商店的应用程序应该可以更新吗？

请谁能澄清这个问题，将得到祝福！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:53:09.523

您可以撤销您的分发证书并制作一个新证书。执行此操作后，您仍然可以更新现有应用程序。

相关资料：

[iPhone 分发证书的私钥丢失。有什么解决办法？](https://stackoverflow.com/questions/1410156/lost-private-key-for-iphone-distribution-certificate-what-could-be-solutions)

[如果我撤销现有的分发证书，它会与现有的应用程序混淆吗？](https://stackoverflow.com/questions/6320255/if-i-revoke-an-existing-distribution-certificate-will-it-mess-up-anything-with)

# joomla - 如何使用 jhtml::tabs 制作水平标签 joomla 3.0

> ID：14519647
> 
> 赞同：0
> 
> 时间：2013-01-25T10:14:54.810
> 
> 标签：joomla, joomla3.0

有人可以帮助我使用此代码在 joomla 3.0 组件中创建水平选项卡吗

```
$options = array(
    'onActive' => 'function(title, description){
        description.setStyle("display", "block");
        title.addClass("open").removeClass("closed");
    }',
    'onBackground' => 'function(title, description){
        description.setStyle("display", "none");
        title.addClass("closed").removeClass("open");
    }',
    'startOffset' => 0,  // 0 starts on the first tab, 1 starts the second, etc...
    'useCookie' => true, // this must not be a string. Don't use quotes.
);

echo JHtml::_('tabs.start', 'tab_group_id', $options);

echo JHtml::_('tabs.panel', JText::_('PANEL_1_TITLE'), 'panel_1_id');
echo 'Panel 1 content can go here.';

echo JHtml::_('tabs.panel', JText::_('PANEL_2_TITLE'), 'panel_2_id');
echo 'Panel 2 content can go here.';

echo JHtml::_('tabs.end'); 
```

它的输出如下： -

```
tab1
tab2
tab3 
```

但我想要像这样的输出：- tab1 tab2 tab3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-06T07:48:56.893

这将使选项卡以及在页面加载时打开一个设置选项卡

```
<!-- code to open default tab -->
<?php
$options = array(
    'active'    => 'tab1_id'    // Not in docs, but DOES work
);
?>
<!-- code end to open default tab -->

<?php echo JHtml::_('bootstrap.startTabSet', 'ID-Tabs-Group', $options);?> 

<?php echo JHtml::_('bootstrap.addTab', 'ID-Tabs-Group', 'tab1_id', JText::_('COM_BOOTSTRAPTABS_TAB_1')); ?> 
<p>Content of the first tab.</p> 
<?php echo JHtml::_('bootstrap.endTab');?> 

<?php echo JHtml::_('bootstrap.addTab', 'ID-Tabs-Group', 'tab2_id', JText::_('COM_BOOTSTRAPTABS_TAB_2')); ?> 
<p>Content of the second tab.</p> 
<?php echo JHtml::_('bootstrap.endTab');?> 

<?php echo JHtml::_('bootstrap.endTabSet');?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:32:11.713

```
$document =& JFactory::getDocument();
$style = 'dt.tabs h3 {
            float:left;
            margin-right: 10px;
        }
        div.current {
            clear: both;
        }';
$document->addStyleDeclaration( $style ); 
```

只需在项目中添加样式即可。它将按照样式设置 CSS 菜单。像上面这样的东西似乎工作正常！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-08T16:04:13.950

JPane 在 2.5 中被删除，现在使用[JHtmlTabs](http://docs.joomla.org/Using_the_JHtmlTabs_class_in_a_component)它应该可以解决问题；）

# java - 如何对数组列表进行排序 by object attribute long in Java I have class (JavaBean if you want to call it like that) class Tweet{ private millis; //number of millis since 1970 //other attributes and getters and setters, but i w 问问题 问问题 2013-01-25T10:15:24.780 8254 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have class (JavaBean if you want to call it like that) class Tweet{ private millis; //number of millis since 1970 //other attributes and getters and setters, but i want to sort onlny by millis public long getMillis() { return millis; } } Comparator should be probably look simillar to this: class TweetComparator implements Comparator { @Override public int compare(Tweet t1, Tweet t2) { //something //this doesn't work //return t2.getMillis().compareTo(t1.getMillis()); return ??;//what should be here? } } This will be in program List <tweet>tweets = new ArrayList<tweet>(); tweets.add(...); //just fill the list //i need newest (with hightest millis value first) so I probably need to call reverse order Collection.reverse(tweets) Collection.sort(tweets, new TweetComparator()); I found some references here and here. But I don't know how to complete my code. Spotify Play Button sizing in hidden elements We have some embedded Spotify play buttons in a paged quiz style wizard/carousel (using jQuery Tools -yuk- to provide the paging functionality); the issue I'm having is that because each question is on a div that is initially hidden, the content of each Spotify iframe is unable to work out which player to render (small vs large). It would be possible to force a refresh of these iframes when the user scrolls to each panel, but this feels like a hack and a bunch of extra HTTP requests. Has anyone had any experience with this? Any workarounds that don't require me to multiply requests to Spotify? Thanks in advance S javasortingcollectionscomparelong-integer 4 3 回答 3 This answer is useful 13 您的比较器应该与此类似 class TweetComparator implements Comparator <tweet>{ @Override public int compare(Tweet t1, Tweet t2) { return Long.compare(t1.getMillis(), t2.getMillis()); } } 请注意，static int Long.compare从 Java 7 开始 于 2013-01-25T10:22:11.813 回答 This answer is useful 4 Compare 方法 返回： 负整数、零或正整数，因为第一个参数小于、等于、> 或大于第二个参数。 逻辑 - if t1.millis > t2.millis return -1; else if t1.millis < t2.millis return +1; 代码 - class TweetComparator implements Comparator <tweet>{ @Override public int compare(Tweet t1, Tweet t2) { if(s1.i>s2.i) return -1; else if(s1.i <s2.i) 0="" 1="" 2="" 3="" 5="" 8="" return="" +1;="" 0;="" }="" 于="" 2013-01-25t10:18:32.927="" 回答="" this="" answer="" is="" useful="" 尝试这个：="" @override="" public="" int="" compare(tweet="" t1,="" tweet="" t2)="" {="" t1.getmillis().compareto(t2.getmillis());="" 如果您想使用="" long="" 类的内置="" compareto="" 方法，请将您的="" mills="" 变量更改为="" long。否则在比较方法中，比较你的="" t1="" 和="" t2="" 中的毫秒，如下所示。="" t1val="t1.getMillis();" t2val="t2.getMillis();" (t1val<t2val?="" -1="" :="" (t1val="=t2Val?" 1));="" （直接来自原龙班）="" 2013-01-25t10:18:27.340="" related="" php="" -="" 使用另一个表中的一列作为我当前表="" mysql="" 的参考="" android="" phonegap="" 3.0="" cli="" 在构建应用程序中发出="" 目标编号="" animation="" 将持续时间从一个="" svg="" 动画复制到另一个="" java="" 重定向接口调用="" backbone.js="" 无法触发主干事件；将模型渲染到多个位置="" windows-phone-8="" 在="" windows="" phone="" 的="" 应用程序中设置="" cookie="" 和检索="" codeigniter="" 中处理获取="" url="" c#="" 调用正在运行的进程的方法="" 我可以在="" salesforce="" 中使用="" 吗？（不访问="" sf="" api，但实际上在="" 内部运行="" php）="" javascript="" 单击隐藏其他内容="" reference="" php × 1429865="" c="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：14519652
> 
> 赞同：2
> 
> 时间：
> 
> 标签：java, sorting, collections, compare, long-integer

I have class (JavaBean if you want to call it like that)

```
class Tweet{

private millis; //number of millis since 1970
//other attributes and getters and setters, but i want to sort onlny by millis

public long getMillis() {
   return millis;
}

} 
```

Comparator should be probably look simillar to this:

```
class TweetComparator implements Comparator {
     @Override
     public int  compare(Tweet t1, Tweet t2) {
     //something
     //this doesn't work
     //return t2.getMillis().compareTo(t1.getMillis());
     return ??;//what should be here?
     }

    } 
```

This will be in program

```
List<Tweet> tweets = new ArrayList<Tweet>();
tweets.add(...); //just fill the list
//i need newest (with hightest millis value first) so I probably need to call reverse order
Collection.reverse(tweets)
Collection.sort(tweets, new TweetComparator()); 
```

I found some references [here](https://stackoverflow.com/questions/6176019/comparing-long-values-using-collections-sortobject) and [here](https://stackoverflow.com/questions/5894818/how-to-sort-arraylistlong-in-java-in-decreasing-order). But I don't know how to complete my code.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T10:22:11.813

您的比较器应该与此类似

```
class TweetComparator implements Comparator<Tweet> {
    @Override
    public int compare(Tweet t1, Tweet t2) {
        return Long.compare(t1.getMillis(), t2.getMillis()); 
    }
} 
```

请注意，`static int Long.compare`从 Java 7 开始

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T10:18:32.927

> Compare 方法 返回： 负整数、零或正整数，因为第一个参数小于、等于、> 或大于第二个参数。

逻辑 -

```
if t1.millis > t2.millis 
   return -1;
else if t1.millis < t2.millis
   return +1; 
```

代码 -

```
class TweetComparator implements Comparator<Tweet> {
     @Override
     public int  compare(Tweet t1, Tweet t2) {
        if(s1.i>s2.i)
            return -1;
        else if(s1.i<s2.i)
            return +1;
        return 0;
     }

 } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T10:18:27.340

尝试这个：

```
@Override
     public int  compare(Tweet t1, Tweet t2) {

     return t1.getMillis().compareTo(t2.getMillis());

     } 
```

如果您想使用 Long 类的内置 compareTo 方法，请将您的 mills 变量更改为 Long。否则在比较方法中，比较你的 t1 和 t2 中的毫秒，如下所示。

```
long t1Val = t1.getMillis();
long t2Val = t2.getMillis();
return (t1Val<t2Val? -1 : (t1Val ==t2Val? 0 : 1)); 
```

（直接来自原龙班）</s2.i)></tweet></tweet></tweet></tweet>

# button - 隐藏元素中的 Spotify 播放按钮大小

> ID：14519653
> 
> 赞同：2
> 
> 时间：2013-01-25T10:15:33.627
> 
> 标签：button, iframe, spotify, sizing

我们在分页测验风格的向导/轮播中嵌入了一些 Spotify 播放按钮（使用 jQuery 工具 -yuk- 来提供分页功能）；我遇到的问题是，因为每个问题都在最初隐藏的 div 上，所以每个 Spotify iframe 的内容无法确定要渲染哪个播放器（小与大）。

当用户滚动到每个面板时，可以强制刷新这些 iframe，但这感觉就像一个 hack 和一堆额外的 HTTP 请求。

有没有人有这方面的经验？任何不需要我向 Spotify 增加请求的解决方法？

提前致谢

小号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-17T09:12:31.080

负责 Spotify 播放按钮的团队最近发布了修复此问题的更新。您无需对嵌入代码进行任何更改。

这里我附上一些示例代码，以及它的 jsFiddle。

例如，这是 HTML：

```
 <button id="show-play">Show Play Button</button>
    <div id="container" style="display:none">
        <iframe src="https://embed.spotify.com/?uri=spotify:track:4bz7uB4edifWKJXSDxwHcs" width="300" height="380" frameborder="0" allowtransparency="true">
        </iframe>
    </div> 
```

你改变它的样式 CSS 属性：

```
 (function() {
        var button = document.getElementById('show-play'),
            container = document.getElementById('container');

        button.addEventListener(
            'click',
            function() {
                container.style.display = 'block';
            },
            false
        );
    })(); 
```

[你可以在这个 jsFiddle](http://jsfiddle.net/4M5zE/)中看到它的作用。

免责声明：我是 Spotify 员工。

# java - Getting sorted keys and values in the Map

> ID：14519654
> 
> 赞同：0
> 
> 时间：2013-01-25T10:15:52.033
> 
> 标签：java, maps

I hope it is not repeating question,

I made two Classes, "Dog" and "Ser",

"Dog" Class uses a comparator to sort the price first. (Done correctly)
"Ser" Class should add sorted price list (as values) + (unrepeated country code as "Keys" in the map . which i have correctly to me.

In my information, Map should sort the keys in Ascending order explicitly, but this is not the case, see output.

My Goal is now to have sorted country code in the Class Ser with corresponding values of price

```
class Dog implements Comparator<Dog>, Comparable<Dog> {
    private int CountryCode;
    private double Price;
    private String Operator;

    Dog() {
    }

    Dog(int c, double p, String o) {
        CountryCode = c;
        Price = p;
        Operator = o;
    }

    public int getCountryCode() {
        return CountryCode;
    }

    public double getPrice() {
        return Price;
    }

    public String getOperator() {
        return Operator;
    }

    // Overriding the compareTo method
    public int compareTo(Dog d) {

        double de = Price - d.getPrice();

        if (de > 0.00001)
            return 1;
        if (de < 0.00001)
            return -1;
        return 0;

    }

    // Overriding the compare method to sort by price
    public int compare(Dog d, Dog d1) {

        double de = d.getPrice() - d1.getPrice();

        if (de > 0.00001)
            return 1;
        if (de < 0.00001)
            return -1;
        return 0;
    }

    @Override
    public String toString() {
        return "  " + Price + ":" + Operator + "";
    }

}

public class Ser {
    /**
     * @param args
     */
    public static void main(String[] args) {
        // Takes a list o Dog objects

        ArrayList<Dog> list1 = new ArrayList<Dog>();
        Map<Integer, Dog> mp = new HashMap<Integer, Dog>();

        list1.add(new Dog(1, 0.9, "A"));
        list1.add(new Dog(268, 5.1, "A"));
        list1.add(new Dog(46, 0.17, "A"));
        list1.add(new Dog(4620, 0.0, "A"));
        list1.add(new Dog(468, 0.15, "A"));
        list1.add(new Dog(4631, 0.15, "A"));
        list1.add(new Dog(4673, 0.9, "A"));
        list1.add(new Dog(46732, 1.1, "A"));

        list1.add(new Dog(1, 0.92, "B"));
        list1.add(new Dog(44, 0.5, "B"));
        list1.add(new Dog(46, 0.02, "B"));
        list1.add(new Dog(467, 1.0, "B"));
        list1.add(new Dog(48, 1.2, "B"));

        list1.add(new Dog(1, 0.9, "c"));
        list1.add(new Dog(44, 0.4, "c"));
        list1.add(new Dog(46, 0.01, "c"));
        list1.add(new Dog(467, 0.2, "c"));

        // Sorts the array list using comparator

        Collections.sort(list1, new Dog());

        System.out.println("Sort the Dog class with respect to Price");

        for (Dog a : list1)
            // printing the sorted list of ages
            System.out.println(a.getCountryCode() + "  : " + a.getPrice()
                    + "  : " + a.getOperator());

        // Add only those keys from sorted Price but if the key is added, don't
        // repeat it
        for (int i = 0; i < list1.size(); i++) {
            if (!mp.containsKey(list1.get(i).getCountryCode()))
                mp.put(list1.get(i).getCountryCode(), list1.get(i));

        }

        System.out.println("");

        System.out.println(" Get Sorted List of Keys and values");

        for (Map.Entry<Integer, Dog> e : mp.entrySet()) {

            System.out.println(e.getKey() + "" + e.getValue());

        }

    }
} 
```

Output: Sort the Dog class with respect to Price

```
4620  : 0.0  : A,  46  : 0.01  : c,  46  : 0.02  : B,  4631  : 0.15  : A,  468  : 0.15  : A,  46  : 0.17  : A,  467  : 0.2  : c,  44  : 0.4  : c,  44  : 0.5  : B,  1  : 0.9  : c,  4673  : 0.9  : A,  1  : 0.9  : A,  1  : 0.92  : B,  467  : 1.0  : B, 46732  : 1.1  : A, 48  : 1.2  : B, 268  : 5.1  : A 
```

Get Sorted List of Keys and corresponding values

```
4673  0.9:A, 1  0.9:c, 46732  1.1:A, 48  1.2:B, 4631  0.15:A, 4620  0.0:A, 468  0.15:A, 46  0.01:c, 467  0.2:c, 268  5.1:A, 44  0.4:c 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T10:20:43.107

这是问题所在：

```
Map <Integer, Dog> mp=  new HashMap  <Integer, Dog> (); 
```

HashMap 不会将其元素排序为任何顺序。改用 TreeMap 试试。TreeMap 有一个带有 Comparator 的构造函数。

[http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)

# android - How can I get Android Lint to show the results only for the current project?

> ID：14519656
> 
> 赞同：2
> 
> 时间：2013-01-25T10:15:57.230
> 
> 标签：android, eclipse, lint

I have a few projects in my Eclipse workspace and the Android Lint warnings tab shows the errors and warnings in all the projects.

Is there any way I can filter the results so that I only see the warnings and errors of the current project?

The "problems" tab works as desired in this case and the Lint warnings and errors appear there as well, but the errors are not so descriptive and there's no "go to lint warning description" function.

Cheers.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:03:03.163

我找到的唯一解决方法是使用 Problems View and Configure Contents 来[显示当前项目元素的问题](http://www.bild.me/bild.php?file=6140749javaScopedWarnings.jpg)（可能只有 Lint 警告）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T19:29:18.560

有点晚了，但供将来参考：

运行 lint 会检查所有项目，但清除 lint 标记（Android 工具 >> Clear Lint Markers）适用于单个项目。

所以一个简单的解决方法是运行 lint 并清除除当前项目之外的所有项目的 lint 标记。

# cakephp - 查找列表错误是什么

> ID：14519660
> 
> 赞同：2
> 
> 时间：2013-01-25T10:16:08.483
> 
> 标签：cakephp, cakephp-2.0

我用该方法绑定了`$this>model->find()`一个数组，其中我的模型的 id 具有这种形式：

```
Array ( [0] => 2,  [1] => 3)  (value are the IDs) 
```

我尝试`$this->model->find('list')`了，我认为这也可以，但出于某种奇怪的原因，我做了：

```
$this->model->find('list',array('recursive' => -1  ,'fields' => array('model.type_id'),'conditions'=>$cond)); 
```

查询结果为：

```
SELECT `model`.`round_id`, `model`.`type_id` FROM `database`.`model` AS `X` WHERE `X`.`Round_id` = '1' 
```

**如果我对数据库进行这个查询返回两个值**但是 cakephp 只返回一个：

```
Array ( [1] => 2 ) 
```

我不知道那可能会发生

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:18:31.827

我会用

```
$ids = $this->Model->find('list', array('fields' => array('id'))); 
```

如果你真的需要基于 0 的整数键，你仍然可以这样做：

```
$ids = array_values($ids); 
```

但这不是海事组织的必要条件。

**更新：**

在您的问题更新后，您的问题本身的全部含义发生了变化：

如果您仅指定 id，则它们的键和值都将用它填充。使用`'fields' => array('round_id', 'type_id')`你有 round_id 填充键，type_id 填充 find(list) 的值。

find(list) 总是返回一个列表（键 + 值行）。如果您不希望使用 find(all) 那么。

# jqgrid - Query on multiplegroup - jqgrid complex search

> ID：14519665
> 
> 赞同：0
> 
> 时间：2013-01-25T10:16:22.120
> 
> 标签：jqgrid

I am using jqgrid with multiplegroup option true for search. My filter looks like the following:

```
{"groupOp":"OR",
"rules":[{"field":"Total_case","op":"eq","data":"29"}],
"groups":[{"groupOp":"AND",
"rules":[{"field":"Total_case","op":"eq","data":"2"},{"field":"percent","op":"eq","data":"100"}],
"groups":[]}]} 
```

I have rows with both total case = 2 ,percent = 100 and total case = 29\. Since outer condition is "OR" condition, I am expecting two rows. However it displays no record. What is wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:35:10.553

这个问题似乎与[回答您之前的问题](https://stackoverflow.com/q/14435407/315935)重复。我刚刚在您的原始问题上写了答案，我确认这是当前版本的 jqGrid 中的一个错误。作为一种解决方法，我建议修改具有`"groupOp":"OR"`两个非空部分的请求`rules`，`groups`以便该`rules`部分将作为新的附加组插入到`groups`.

在您发布的示例中，可以首先使用[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)将您发布的 JSON 字符串转换`postData.filters`为对象形式

```
{
    groupOp: "OR",
    rules: [
        {field: "Total_case", op: "eq", data: "29"}
    ],
    groups: [
        {
            groupOp: "AND",
            rules: [
                {field: "Total_case", op: "eq", data: "2"},
                {field: "percent", op: "eq", data: "100"}
            ],
            groups: []
        }
    ]
} 
```

然后可以测试这`groupOp`是“或”并且两者`rules`都是`groups`非空数组。万一可以移动`rules`里面的部分`groups`。换句话说，可以将其转换为以下对象

```
{
    groupOp: "OR",
    rules: [],
    groups: [
        {
            groupOp: "AND",
            rules: [
                {field: "Total_case", op: "eq", data: "2"},
                {field: "percent", op: "eq", data: "100"}
            ],
            groups: []
        }
        {
            groupOp: "AND",
            rules: [
                {field: "Total_case", op: "eq", data: "29"}
            ],
            groups: []
        }
    ]
} 
```

最后，可以使用`JSON.stringify`将对象转换回 JSON 字符串并将结果分配回`postData.filters`.

**更新**：我发布[了拉取请求](https://github.com/tonytomov/jqGrid/pull/417)，其中描述了在处理过滤/搜索请求期间将在内部执行 jqGrid 的更改。

[该演示](http://www.ok-soft-gmbh.com/jqGrid/SearchingDialogAboveGrid1.htm)使用了该修复程序，现在似乎一切正常。

# groovy - groovy method's parameters number

> ID：14519668
> 
> 赞同：0
> 
> 时间：2013-01-25T10:16:34.553
> 
> 标签：groovy

In Groovy Is it possible to passe any parameters to groovy method?

for example:

```
myMethod(String a)
myMethod(String a, Int b)
myMethod(String a, Int b, date c)

def myMethod (???){
def myHashMap = [:]
//put elements in myHashMap (?)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:39:51.280

不知道你在问什么，但你可以将任何类型的参数传递给：

```
def myMethod( ...params ) {
  println "Called with : ${params.collect { "$it" }.join( ', ' )}"
}

myMethod( 10 )
myMethod( 'woo', 10 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:37:52.740

您必须按如下方式定义您的方法签名：

```
def myMethod(String a, Integer b=0, Date c = new Date) // default values for optional params

def myMethod(String a, Integer b=0, Date c = new Date) {
     def myHashMap = [:]
     ...
} 
```

# php - Search something in a CSS with PHP

> ID：14519674
> 
> 赞同：4
> 
> 时间：2013-01-25T10:16:49.527
> 
> 标签：php, regex

I retrieve with PHP a css file in my database.

So i have : `$mycss = "SOME CSS SOME CSS SOME CSS"`

In this $mycss, i can have :

```
div.coul01,.red,.coul01{
    color:#663333;
}
div.coul02,.blue,.coul02{
    color:#3366CC;
} 
```

For this example, i need to retrive in PHP, for each instruction that begins with div. the second element, here "red" and "blue".

Do you have any ideas ? Thanks !

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:23:23.660

如果您真的不想使用任何库并想坚持使用正则表达式，这对您有用：

```
<?php
$mycss = "body,div.coul01,.white,.coul01{
    color:#000000;
}
div.coul01,.red,.coul01{
    color:#663333;
}
div.coul02,.blue,.coul02{
    color:#3366CC;
}
div.coul02,.grey,.coul02{
    color:#C0C0C0;
}";
preg_match_all("/^div\.[^,{]*,[\.#](\w+)/ms", $mycss, $matches, PREG_PATTERN_ORDER, 0);
?> 
```

然后在你的`$matches`变量中你会有这样的东西：

```
$matches[0][0]  div.coul01,.red
$matches[0][1]  div.coul02,.blue
$matches[0][2]  div.coul02,.grey
$matches[1][0]  red
$matches[1][1]  blue
$matches[1][2]  grey 
```

`$matches[1]`是你要找的

[例子](http://xrg.es/#1313rwj)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:20:02.573

您可以使用`explode()`逗号作为分隔符，但更优雅的解决方案是使用 PHP CSS 解析器，例如[https://github.com/sabberworm/PHP-CSS-Parser](https://github.com/sabberworm/PHP-CSS-Parser)

它更灵活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:20:11.533

我建议使用诸如[Sabberworm 之](https://github.com/sabberworm/PHP-CSS-Parser)类的 CSS 解析器。你也可以试试[这个库](http://www.phpclasses.org/package/1289-PHP-CSS-parser-class.html)，我看过一些人推荐的。您可能还想查看一个名为[HTML_CSS](http://pear.php.net/package/HTML_CSS/)的 PEAR 包。请注意，它目前没有被维护。就个人而言，我会远离为这种事情编写自定义正则表达式，仅仅是因为我见过像这样的项目“起飞”并导致随着项目扩展而难以维护的混乱的正则表达式代码并添加了更多功能。前一分钟你想要所有以 div 开头的东西，下一分钟你想要控制 h1、span 和 p 样式。

# coldfusion - Using jqtransform for cfselect binding

> ID：14519676
> 
> 赞同：1
> 
> 时间：2013-01-25T10:16:54.390
> 
> 标签：coldfusion, coldfusion-10, jqtransform

I am using jqtransform throughout my ColdFusion site for styling form fields. One of my pages uses some CFSELECT tags which bind to a CFC to get their data. However, because jqtransform works before my binding does, I do not see anything in the drop-down. I understand the reasons for this, but I guess what I need to do is find a way of telling jqtransform to run again AFTER the binding has refreshed?

I have looked at similar topics regarding jqtransform with dynamic data, but none that actually work. Any help much appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T09:14:52.780

见[https://stackoverflow.com/a/20649876/3080438](https://stackoverflow.com/a/20649876/3080438)

将插件修改为文章。绑定后，你重新 jqTransform 选择框

# r - R中循环的替代方案

> ID：14519681
> 
> 赞同：3
> 
> 时间：2013-01-25T10:17:20.567
> 
> 标签：r, for-loop

> **可能重复：**
> [加快 R 中的循环操作](https://stackoverflow.com/questions/2908822/speed-up-the-loop-operation-in-r)

我有几个关于循环的问题。我知道 R 在矢量化计算中工作得更快，我想更改下面的代码以利用这一点。在论坛上查看其他一些答案，sapply 函数似乎能够替换内部 for 循环，但我正在生成一个零向量，因此出现错误。道仍然是 1000，我认为这是造成问题的原因。

我主要关心的是速度，因为我需要围绕整个算法创建一个循环并绘制不同的 V 和 n 大小以进行进一步分析。

谢谢你的帮助

> **替代循环**

```
tao = 1000
L = (tao - 1)   
n = 10      
V = 5               
I = 10000                       
V_s = matrix(rnorm(I), I, 1)
V_b = matrix(rnorm(I), I, 1)

signal <- matrix(0, L, 1)  

for( j in (n:L)){

    sapply(((j-n+1):j),function (tao) signal[j] = signal[j] + abs(V_s[tao] - V_b[tao]))

    signal[j] = (signal[j] / (n * V) )

} 
```

> **原始循环**

```
tao = 1000
L = (tao - 1)   
n = 10      
V = 5               
I = 10000                       
V_s = matrix(rnorm(I), I, 1)
V_b = matrix(rnorm(I), I, 1)

signal <- matrix(0, L, 1)  

for( j in (n:L)){

    for( tao in ((j-n+1):j))    {

        signal[j] = (signal[j] + abs(V_s[tao] - V_b[tao]))

    }
        signal[j] = (signal[j] / (n * V) )

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T10:55:41.963

使用过滤器，您甚至可以在没有任何循环的情况下进行计算（`sapply`只不过是一个隐藏循环）。

```
absdif <- abs(V_s - V_b)
signal <- filter(absdif[1:L], rep(1/(n*V), n), sides=1)
signal[is.na(signal)] <- 0 
```

但是，当您不习惯过滤器时，了解第二行中发生的事情并非易事。让我们仔细看看：

首先，我们计算 和 的绝对差`V_s`，`V_b`你经常循环使用它。然后是过滤器。您的计算只不过是`n`在每个 time value 总结过去的值`j`。因此，我们有类似的东西

```
signal[j] <- sum(absdif[j-n+1:j]) 
```

这正是卷积过滤器所做的——将一些值相加——以一般形式通过乘以一些权重。我们`1/(n*V)`为所有值选择权重，这对应于您在外循环中执行的规范化。最后一个参数，`sides=1`只是告诉过滤器只取过去的值（`sides=2`意思是`sum(absdif[(j-n/2):(j+n/2)])`）。

最后一行只是填充了`NA`开头的值（过滤器没有足够的数据来计算总和 - 这等于跳过第一个`n`值）。

最后，一些时间：

您的全循环解决方案：

```
 User      System       total 
  0.037       0.000       0.037 
```

juba的解决方法：

```
 User      System       total 
  0.007       0.000       0.008 
```

使用过滤器的解决方案：

```
 User      System       total 
  0.000       0.000       0.001 
```

请注意，过滤器的概念已经得到了很好的研究，并且可以非常快地完成。

编辑：如 中所述`?filter`，R 不使用标准`filter`命令的快速傅立叶变换。通常，FFT 是实现卷积的最有效方式。但是，即使这样也可以通过将 filter 命令替换为

```
signal <- convolve(absdif[1:L], rep(1/(n*V), n), type='filter') 
```

请注意，现在第一个`n`条目被删除而不是设置为`NA`。然而，结果是一样的。计时这个时间没有用 - 总时间低于...的三位数输出`system.time`但是，请注意 R 帮助中的以下注释`filter`：

> convolve(, type="filter") 使用 FFT 进行计算，因此对于单变量序列上的长过滤器可能更快，但它不返回时间序列（因此时间对齐不清楚），也不处理缺失值. 例如，对于一系列长度为 1000 的长度为 100 的过滤器，过滤器更快

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T10:48:18.077

矢量化计算并不总是意味着使用 *apply 函数。

例如，您可以通过将第二个 for 循环替换为向量索引来简化和加快操作：

```
for(j in (n:L)){
  sel <- (j-n+1):j
  signal[j] <- sum(abs(V_s[sel] - V_b[sel])) / (n*V)
} 
```

对于这个解决方案，我系统上的执行时间是：

```
utilisateur     système      écoulé 
      0.008       0.004       0.009 
```

而对于您的`for`循环，它是：

```
utilisateur     système      écoulé 
       0.06        0.00        0.06 
```

顺便说一句，您不应该将`tao`名称用于两种不同的事物。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:27:52.417

假设您的显式循环是正确的计算，请尝试以下操作：

```
 signal[j]<- signal[j] + 
              sapply((j-n+1):j, 
                   FUN = function(iter){ 
                           abs(V_s[iter] - V_b[iter])
                   }, V_s = V_s, V_b = V_b) 
```

请注意， sapply 返回 V_s 和 V_b 之间的第 iter-th 索引绝对差。然后将其添加到 signal[j]

# entity-framework - Entity Framework and Stored Procedure

> ID：14519685
> 
> 赞同：0
> 
> 时间：2013-01-25T10:17:55.063
> 
> 标签：entity-framework, stored-procedures

I'm using EF 4.3 to execute a stored procedure which just deletes some records and returns 0 when successfull else 1\. When i execute the sp (using this.DbContext.Database.ExecuteSqlCommand(sql, id)) i'm getting -1 which is not what i'm expecting.

Can someone tell me what's wrong?

Basically the stored procedure is very simple:

```
BEGIN TRY
    -- Delete records here
END TRY

BEGIN CATCH
    IF @@TRANCOUNT > @BeginTranCount
        ROLLBACK TRANSACTION
    RETURN 1
END CATCH

IF @@TRANCOUNT > @BeginTranCount
    COMMIT TRANSACTION
RETURN 0 
```

Also the sp doesn't return value with out variable.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:48:26.880

我们确实需要查看您的代码，但总体思路如下：

```
SqlParameter parm = new SqlParameter() {  
    ParameterName = "@MyID",  
    SqlDbType = SqlDbType.Int,
    Direction = System.Data.ParameterDirection.Output  
}; 

Database.ExecuteSqlCommand("exec @MyId = dbo.MyProc", id);
int retyrnedId = (int)id.Value; 
```

# asp.net-mvc - PublicResXFileCodeGenerator 的 T4 模板

> ID：14519690
> 
> 赞同：1
> 
> 时间：2013-01-25T10:18:08.467
> 
> 标签：asp.net-mvc, visual-studio, t4, resx

我想做以下事情：在我的 Web.config 中添加一个开关，每当它打开时，来自 .resx 文件的任何值都将与它来自的 .resx 文件的名称一起出现。这主要用于调试目的。

我目前的理解是，这样做的方法是创建一个自定义 T4 模板，并使用它而不是`PublicResXFileCodeGenerator`.

我正在尝试找到一个模板来完成它的`PublicResXFileCodeGenerator`工作，然后以此为基础。我的 Visual Studio 安装中是否有这样的模板？如果没有，我可以从网上的官方来源找到这样的模板吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:37:32.087

Visual Studio 使用 StronglyTypedResourceBuilder 类将 .resx 文件转换为“硬编码”资源。这就是为什么我认为 Visual Studio 安装中的某处没有类似的 T4 模板。

您可能想要创建自己的 T4 模板。对于您的情况，我没有现成的模板，但这是我开始并替换字符串资源的默认资源构建器的方式：

1.  从资源文件的属性网格中的 CustomTool-Property 中删除“ResXFileCodeGenerator”。
2.  删除现有的 .Designer.cs 文件
3.  将设置“DebugResources”添加到 web.config
4.  在 T4 模板中打开 .resx 文件作为 XDocument（.resx 是一种 xml 格式）

    ```
    <#@ assembly name="System.Xml" #>
    <#@ assembly name="System.Xml.Linq #>
    <#@ import namespace="System.Xml.Linq #>

    <#
       string inputFile = System.IO.Path.GetDirectoryName(this.Host.TemplateFile)
                        + @"\MyResourceFile.resx";
       XDocument resDoc = XDocument.Load(inputFile);
    #> 
    ```

5.  迭代 .resx 文件中的所有元素并为资源生成属性。根据 web.config 中的设置，将资源文件名添加到返回值。

    ```
    <#
        foreach(var dataElement in resDoc.Descendants("data")
                                         .Where(elem => elem.Attribute("type") == null)
        {
    #>
        public static string <#= dataElement.Attribute("name").Value #> {
          get {
            return ResourceManager.GetString("<#= dataElement.Attribute("name").Value #>")
                   + ((bool.Parse(ConfigurationManager.AppSettings["DebugResources"])) 
                     ? " (MyResourceFile.resx)" 
                     : String.Empty);
    <#
        }
    #> 
    ```

6.  生成资源类的其余部分：资源管理器（您可以从原始 Designer.cs 文件中复制它）并检查如何处理图像和其他资源类型。

希望这个想法有所帮助。也许我可以在某个时候想出一个完整且可重复使用的 .tt。

# .htaccess - 多语言网站的 htaccess 重写

> ID：14519691
> 
> 赞同：0
> 
> 时间：2013-01-25T10:18:10.557
> 
> 标签：.htaccess, mod-rewrite

我有一个多语言网站，其中包含 www.domain.com 和 www.domain.de 等 2 个域

现在我想定义一些 RewriteRules，比如：

```
RewriteRule ^category/(.*)$ http://www.domain.de/$1 [R=301,L] 
```

但我不知道如何将其更改为同时适用于两个域。仅在没有域的情况下更改该目标是行不通的。

例子：

```
RewriteRule ^category-[0-9]{1,4}/(.*) http://www.domain.de/category/$1 [R=301, L] 
```

这会将用户重定向到 .de 域。不管他在预览页面上的哪个域。因此，来自 domain.com 的访问者会突然在某些特定页面上使用此规则访问 domain.de。

我希望此规则适用于两个域并且不知道如何编写目标路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:50:22.130

我找到了解决方案。

没有域的 RewriteBase / 和 RewriteRule

# delphi - Explorer和TcxShellListView之间如何实现无缝剪贴板？

> ID：14519692
> 
> 赞同：2
> 
> 时间：2013-01-25T10:18:12.730
> 
> 标签：delphi, devexpress, delphi-xe2, clipboard, explorer

我有一个模仿 Windows 资源管理器的应用程序，它使用`TcxShellListView`其他 shell 控件。

一个非常好的功能是能够在真正的 Windows 资源管理器和我的应用程序之间创建文件`Copy & Paste`。`Cut & Paste`

`Drag & Drop`已经开箱即用，但似乎 DevExpress 还没有实现剪贴板端。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:25:12.460

如果您想自己实现复制/粘贴，该机制几乎与拖放相同。您拥有的拖放代码将创建一个`IDataObject`. 要复制，而不是调用`DoDragDrop`启动拖动，只需调用`OleSetClipboard`传递`IDataObject`. 对于粘贴，您可以调用从剪贴板`OleGetClipboard`中获取。`IDataObject`然后您只需使用与拖放操作完全相同的代码来解码`IDataObject`. 这里的所有都是它的。

还有另一种方法可以做到这一点，在我看来可能是更好的方法。那就是用来`IContextMenu`做工作。在 TurboPower tpShellShock 项目中可以找到这方面的示例。`ShellMenuExecute`在`StShlCtl`单位里找。只要 DevExpress 组件使用 shell 接口，即`IShellFolder`，那么您将能够使用相同的方法。这种基于 shell 的方法的优点是您可以让 shell 来完成这项工作。如果需要显示一个复制对话框，那么 shell 会这样做。这将为您提供最集成的用户体验。

此代码如下所示：

```
procedure ShellMenuExecute(
  const Sender : TObject; const Folder : IShellFolder;
  var Pidl : PItemIDList; const Count : Integer;
  const AHandle : THandle; ClipboardAction : TStMenuAction);
var
  CM : IContextMenu;
  CI : TCmInvokeCommandInfo;
begin
  if Folder <> nil then begin
    if (Folder.GetUIObjectOf(AHandle, Count, Pidl,
      IID_IContextMenu, nil, Pointer(CM)) = NOERROR)
    then begin
      ZeroMemory(@CI, SizeOf(CI));
      CI.cbSize := SizeOf(TCmInvokeCommandInfo);
      CI.hwnd := AHandle;
      case ClipboardAction of
        caCut   : CI.lpVerb := 'cut';
        caCopy  : CI.lpVerb := 'copy';
        caPaste : CI.lpVerb := 'paste';
        caProperties : CI.lpVerb := 'properties';
      end;
      CM.InvokeCommand(CI);
      CM := nil;
    end;
  end;
end; 
```

我认为您应该能够按原样使用此代码。我会指出句柄参数声明不正确。应该是`HWND`。它用作在调用`InvokeCommand`.

# caching - 在 ExtLib REST 控件中禁用缓存（使用 dojox.data.JsonRestStore）

> ID：14519695
> 
> 赞同：2
> 
> 时间：2013-01-25T10:18:19.877
> 
> 标签：caching, proxy, dojo, dojox.grid.datagrid, xpages-extlib

在我的 XPage 中，我有一个`xe:djxDataGrid`( `dojox.grid.datagrid`)，它使用`xe:restService`了似乎使用的`dojox.data.JsonRestStore`.

没有代理一切正常，但由于公司政策，我的客户通过代理访问应用程序。在用户更新 DataGrid 中的数据后，它会在代理后面访问时显示旧值。

REST Control/JsonRestStore 发送ajax GET 请求获取数据时，请求头中没有`Cache-Control`参数。并且 Domino 不会`Expires`在响应头中放置参数。我相信这就是为什么旧版本的 GET 请求被代理缓存的原因。

我们试图在浏览器中禁用缓存，但这无济于事，这表明代理正在缓存请求。

我相信这可以通过以下方式解决：

1.  `Cache-Control`在请求标头中设置参数或
2.  `Expires`在响应标头中设置参数

但是我还没有找到设置其中任何一个的方法。对于 XPage Domino 设置`Expires:-1`响应标头，但不适用于 ajax GET 请求，即：

```
/mypage.xsp/?$$viewid=!ddrg6o7q1z!&$$axtarget=view:_id1:_id2:callback1:restService1 
```

这会将 JSON 数据返回到 JsonRestStore 并由代理缓存。

一种选择是尝试获取代理的例外情况，以便对该站点的请求将绕过代理缓存。但是例外通常不容易通过。

有任何想法吗？谢谢。

**更新1**

我的同事建议我可以拦截 dojox.data.JsonRestStore 发出的 xhr GET 请求，并在 URL 中添加时间参数以防止缓存。这是我的问题：

[防止页面上每个 Dojo xhr 请求中的缓存](https://stackoverflow.com/questions/14530284/change-url-of-dojo-xhr-get-with-io-pipeline-topics)

**更新2**

@SvenHasselbach 有一个很好的解决方案来防止所有 xhrs 的缓存：

[http://openntf.org/XSnippets.nsf/snippet.xsp?id=cache-prevention-for-dojo-xhr-requests](http://openntf.org/XSnippets.nsf/snippet.xsp?id=cache-prevention-for-dojo-xhr-requests)

它似乎工作得很好，`&dojo.preventCache=`参数被添加到 URL 中，并且请求似乎也使用这个参数返回了正确的 JSON。**但是**当我使用该代码时，DataGrid 停止工作。每个 xhr 都会导致此错误：

![火狐](../Images/df5698aeec61fc1963fbd29879ad3215.png)

尝试使用 Firefox 和 Chrome。数据的第一页仍然加载，因为 xhr 拦截尚未到位，但后续页面在每个单元格中仅显示“...”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:49:32.840

解决方案是[Julian Buss 博客评论部分的 Sven Hasselbach 代码](http://www.juliusbuss.de/web/youatnotes/blog-jb.nsf/dx/a-big-issue-for-mobile-web-apps-with-xpages-for-iphone-and-ipad-and-how-to-solve-it..htm?opendocument&comments#anc1)，**需要**稍作修改。

我更改`xhrPost`为`xhrGet`并没有将代码放置到`dojo.addOnLoad`. 当放置在那里时，它在 DataGrid/Store 的第一个 XHR 中无效。

我还删除了`headers`修改，因为它覆盖了现有的标题。当 REST 控件从服务器请求数据时`xhrGet`，URL 始终相同，并且请求的行在 HTTP 标头中，如下所示：

```
Range: items=0-9 
```

使用原始代码时，此（和其他）标题会消失。要仅添加标头，我们将从现有的标头中获取`args`并附加到它们。我认为不需要这样做，因为在 URL 中添加参数就足够了。这是我正在使用的极其简单的代码：

```
if( !(dojo._xhrGet )) {
 dojo._xhrGet = dojo.xhrGet;
}

dojo.xhrGet = function (args) {
 args['preventCache'] = true;
 return dojo._xhrGet(args);
} 
```

现在我得到了所有行，所有 XHR Get URL 都有`&dojo.preventCache=`参数，这正是我想要的。接下来，我们将在客户环境中进行测试，看看这是否能解决他们的问题。

**更新**

正如 Julian 在他的博客中指出的那样，我还可以使用*网站规则*来设置`Expires`或`cache-control`http 响应标头。

**更新**

客户报告它现在正在为他们工作！

# cron - cron的重新分区

> ID：14519702
> 
> 赞同：0
> 
> 时间：2013-01-25T10:18:40.297
> 
> 标签：cron

（对于我的问题表述不当，我提前道歉，请考虑英语不是我的第一语言）。

我有几个进程（crons），我想“优化”启动它们的时间表。

例如，cron c1 每 3 分钟启动一次，cron c1 每 7 分钟启动一次，cron c3 每 18 分钟启动一次。假设它们在停止前只持续了几秒钟。

这里的时间单位是 1 分钟。

现在，我想要的是这些 crons 是分布式的，这样我们就没有时间让它们中的许多开始，然后是长时间没有 cron 的时间间隔。例如，如果 c1 和 c3 都在时间 0 开始，那么它们将每 18 分钟一起重新开始。最好在时间 0 启动 cron c1，然后在时间 1 启动 c3，这样它们就不会一起启动。

所以这个想法是，给定一个具有周期性的 cron 列表，计划一个时间表，以便每个 cron 之间有尽可能多的时间，并且两个 cron 一起开始的时刻尽可能少。

是否有一些关于此类问题的知名算法？

这个问题的实际应用是：~200 crons。其中一些每 5 或 ~10 或 ~30 分钟发射一次，持续时间很短（几秒），有些（~20 - 25）每 2 小时发射一次，持续几分钟。所以这个想法也是大 crons 不是同时启动的。

我自己是数学家，而不是计算机科学家，所以我在[https://math.stackexchange.com/](https://math.stackexchange.com/)上问了这个问题，因为我认为这对数学家来说也是一个“好”的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:25:11.170

我认为您应该考虑每个 crons 使用的资源，然后从中安排您的工作。

我认为没有特定的算法。

# python - Python中列表的元素总和

> ID：14519706
> 
> 赞同：-1
> 
> 时间：2013-01-25T10:18:49.620
> 
> 标签：python

我有一个这样的列表：

```
a = [1, 2, 3] 
```

我想添加所有元素和表单：

```
a = [6] Or a = 6 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T10:19:41.220

使用内置[`sum`](http://docs.python.org/2/library/functions.html#sum)函数：

```
print sum(a)
# 6 
```

如果要分配`a`给结果，只需执行`a = sum(a)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:20:36.190

这应该适合你

```
 a = [1, 2, 3]
 b = [sum(a)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:56:46.930

如果要创建具有先前元素值的单个元素，那么这是一种简单而好的方法：

```
a = [1, 2, 3]
a = sum(a) 
```

或者只是`sum(a)`在需要总和时访问它，但您不想更改`a[]`. 上述方法比 nconnector 发布的方法稍好一些，因为您避免在内存中创建另一个对象 ( `b[]`)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-25T10:20:27.410

您可以使用`reduce`和`lambda`功能：

```
 reduce(lambda x, y: x + y, a) 
```

# xml - 如何使 Eclipse 像我希望的那样格式化我的 tml 文件？

> ID：14519708
> 
> 赞同：8
> 
> 时间：2013-01-25T10:18:54.907
> 
> 标签：xml, eclipse, tapestry, eclipse-juno

使用 Eclipse Juno SR1：

我在我的 Eclipse 安装中安装了[Tapestry 工具](http://code.google.com/p/tapestrytools/)，并且我也自定义了我的 XML 格式化程序。

但是，无论我在 TML 编辑器还是 XML 编辑器中打开 tml 文件，当我让 eclipse 格式化文件时，使用的格式化规则与“普通”XML 文件不同。

如何确保适用相同的规则？

另外，为什么格式化程序有时允许比指定的线宽更长的行？似乎它仅在属性超出限制时才引入换行符，但在属性值太长时不会引入...

参考问题：

[如何配置 Eclipse XML 格式？](https://stackoverflow.com/questions/2943350/how-to-configure-eclipse-xml-formatting)

[导出 Eclipse XML 格式化规则？](https://stackoverflow.com/questions/2424132/export-the-eclipse-xml-formatting-rules)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T02:00:15.610

通过执行以下操作使 *.tml 像 *.xml 一样：

1.  在首选项中，转到**General > Content Types**。
2.  在**内容类型下：**向下滚动并展开`Text`。
3.  向下滚动到`XML`。
4.  对于**文件关联**，单击**添加**并放入`*.tml`。

# android - 更改方向时如何让活动继续流式传输视频

> ID：14519712
> 
> 赞同：5
> 
> 时间：2013-01-25T10:19:06.770
> 
> 标签：android, android-mediaplayer

> **可能重复：**
> [Android：在活动屏幕方向更新期间保持 MediaPlayer 运行](https://stackoverflow.com/questions/8014603/android-keep-mediaplayer-running-during-activity-screen-orientation-update)

Android 的 YouTube 应用有一些功能：

当设备的屏幕处于纵向并且您观看视频并将屏幕方向更改为横向时，视频将全屏显示并且相关视频列表消失。它继续播放而无需重新启动或重新流式传输。

肖像：

![](../Images/b27858a63629c6e7622726735dc38a4e.png)

景观：

![](../Images/e88c448fbe77bd80f3c050a72f6b1e59.png)

问题是：

*   当我将布局 XML 文件创建为“布局”和“布局土地”时，我的 Activity 在从纵向变为横向时被破坏。我必须重新播放视频。

*   如果我设置`Androidmanifest.xml`为 use `android:configChanges="orientation"`，那么 Activity 不会被破坏，但布局不会改变。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:50:21.540

在您的 AndroidManifest 文件中添加 android:configChanges="orientation" ；

添加：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
} 
```

在您的视频活动中；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:43:08.977

您需要一个用于媒体播放器的线程（好吧，您已经有了一个）。您的活动可以可靠地确定它是否由于配置更改而被破坏，请在此处查看我的答案：[How to save/restore(update) ref to the dialog during screen rotation?（我需要在活动的 onCreate 方法中引用。）](https://stackoverflow.com/questions/14374093/how-to-save-restoreupdate-ref-to-the-dialog-during-screen-rotationi-need-ref/14374343#14374343)

因此，重新创建您的 Activity 也不错；您需要做的就是将播放器重新连接到它。

# salesforce - 我想在一个字段中添加两个字段使用触发器

> ID：14519713
> 
> 赞同：0
> 
> 时间：2013-01-25T10:19:09.090
> 
> 标签：salesforce

我有两个字段（名字，姓氏）使用我想添加的触发器

```
 both in one field Middle Name=(FirstName+LastName). 
```

谢谢库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:57:40.087

```
trigger ObjBeforeInsert on Obj__c (before insert) {

    for(Obj__c obj:Trigger.new){
        obj.Name= obj.FirstName +''+obj.LastName;
    }
} 
```

# regex - 闰年正则表达式

> ID：14519715
> 
> 赞同：0
> 
> 时间：2013-01-25T10:19:21.420
> 
> 标签：regex

我的任务是写一个只接受闰年的正则表达式，第一年必须是 1584 没有上限。有人可以帮我重做这个 expr。?

```
(15(8[48]|9[26]))|((1[6-9]|[2-9]\d)(0[48]|[13579][26]|[2468][048]))|(([2468][048]|16|3579[26])00) 
```

它不起作用，我做到了：

```
(15(8[48]|9[26]))|((1[6-9]|[2-9]\d)(0[48]|[13579][26]|[2468][048]))|(([2468][048]|16|3579[26])00)|
(
    [1-9]\d*
    (
        ([02468][048]|[13579][26])00
        |
        \d\d(0[48]|[13579][26]|[2468][048])
    )
) 
```

到 9996 它可以工作，但是当我添加 1 它不接受 19996 或 100000000 或更高时，我做错了什么吗？

例如它不适用于 109400

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:42:22.957

您的正则表达式匹配从 1584 到 9996 的闰年。

要计算大于 9996 的闰年，只需在正则表达式的末尾添加此替代项：

```
|
(
    [1-9]\d*
    (
        ([02468][048]|[13579][26])00
        |
        \d\d(0[48]|[13579][26]|[2468][048])
    )
) 
```

@user2010564：在正则表达式末尾添加一行：

```
|([1-9]\d*(([02468][048]|[13579][26])00|\d\d(0[48]|[13579][26]|[2468][048]))) 
```

# java - 单击 JFrame 中的搜索按钮不会打开 JDialog

> ID：14519717
> 
> 赞同：-1
> 
> 时间：2013-01-25T10:19:37.037
> 
> 标签：java, swing

我有一个带有页面导航按钮、打印、搜索按钮的 jframe。当我点击打印按钮时，它完全打开了窗口，我也可以打印页面。但是当我点击搜索按钮时，我无法获得窗口。我的要求是单击“搜索”按钮应该打开一个带有文本字段的窗口（与打印窗口相同），当我输入搜索数据时，它应该显示匹配项和不匹配项。

我已经尝试了下面的代码，但我没有成功。

```
import com.google.common.base.CharMatcher;
import com.sun.pdfview.PDFFile;
import com.sun.pdfview.PDFPage;
import com.sun.pdfview.PDFRenderer;
import com.sun.pdfview.PagePanel;

import javax.print.attribute.HashPrintRequestAttributeSet;
import javax.print.attribute.standard.PageRanges;
import javax.swing.*;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.geom.AffineTransform;
import java.awt.geom.Rectangle2D;
import java.awt.print.PageFormat;
import java.awt.print.Printable;
import java.awt.print.PrinterException;
import java.awt.print.PrinterJob;
import java.io.File;
import java.io.IOException;
import java.io.RandomAccessFile;
import java.nio.ByteBuffer;
import java.nio.channels.FileChannel;

import static com.google.common.base.Strings.isNullOrEmpty;

public class PdfViewer extends JPanel {
    private static enum Navigation {
        GO_FIRST_PAGE, FORWARD, BACKWARD, GO_LAST_PAGE, GO_N_PAGE
    }

    private static final CharMatcher POSITIVE_DIGITAL = CharMatcher.anyOf("0123456789");
    private static final String GO_PAGE_TEMPLATE = "%s of %s";
    private static final int FIRST_PAGE = 1;
    private int currentPage = FIRST_PAGE;
    private JButton btnFirstPage;
    private JButton btnPreviousPage;
    private JTextField txtGoPage;
    private JButton btnNextPage;
    private JButton btnLastPage;
    private JButton print;
    private JButton search;
    private PagePanel pagePanel;
    private PDFFile pdfFile;

    public PdfViewer() {
        initial();
    }

    private void initial() {
        setLayout(new BorderLayout(0, 0));
        JPanel topPanel = new JPanel(new FlowLayout(FlowLayout.CENTER));
        add(topPanel, BorderLayout.NORTH);
        btnFirstPage = createButton("|<<");
        topPanel.add(btnFirstPage);
        btnPreviousPage = createButton("<<");
        topPanel.add(btnPreviousPage);
        txtGoPage = new JTextField(10);
        txtGoPage.setHorizontalAlignment(JTextField.CENTER);
        topPanel.add(txtGoPage);
        btnNextPage = createButton(">>");
        topPanel.add(btnNextPage);
        btnLastPage = createButton(">>|");
        topPanel.add(btnLastPage);
        print = new JButton("print");
        topPanel.add(print);
        search = new JButton("search");
        topPanel.add(search);
        JScrollPane scrollPane = new JScrollPane();
        add(scrollPane, BorderLayout.CENTER);
        JPanel viewPanel = new JPanel(new BorderLayout(0, 0));
        scrollPane.setViewportView(viewPanel);

        pagePanel = new PagePanel();
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        pagePanel.setPreferredSize(screenSize);
        viewPanel.add(pagePanel, BorderLayout.CENTER);

        disableAllNavigationButton();

        btnFirstPage.addActionListener(new PageNavigationListener(Navigation.GO_FIRST_PAGE));
        btnPreviousPage.addActionListener(new PageNavigationListener(Navigation.BACKWARD));
        btnNextPage.addActionListener(new PageNavigationListener(Navigation.FORWARD));
        btnLastPage.addActionListener(new PageNavigationListener(Navigation.GO_LAST_PAGE));
        txtGoPage.addActionListener(new PageNavigationListener(Navigation.GO_N_PAGE));
        print.addActionListener(new PrintUIWindow());
        search.addActionListener(new Action1());
    }

    static class Action1 implements ActionListener {        
          public void actionPerformed (ActionEvent e) {  
              JFrame parent = new JFrame();
              JDialog jDialog = new JDialog();
              Label label = new Label("Enter Word: ");
              final JTextField jTextField = new JTextField(100);
              JPanel panel = new JPanel();
              parent.add(panel);
              panel.add(label);
              panel.add(jTextField);
              parent.setLocationRelativeTo(null);
          }
        }   

    private JButton createButton(String text) {
        JButton button = new JButton(text);
        button.setPreferredSize(new Dimension(55, 20));

        return button;
    }

    private void disableAllNavigationButton() {
        btnFirstPage.setEnabled(false);
        btnPreviousPage.setEnabled(false);
        btnNextPage.setEnabled(false);
        btnLastPage.setEnabled(false);
    }

    private boolean isMoreThanOnePage(PDFFile pdfFile) {
        return pdfFile.getNumPages() > 1;
    }

    private class PageNavigationListener implements ActionListener {
        private final Navigation navigation;

        private PageNavigationListener(Navigation navigation) {
            this.navigation = navigation;
        }

        public void actionPerformed(ActionEvent e) {
            if (pdfFile == null) {
                return;
            }

            int numPages = pdfFile.getNumPages();
            if (numPages <= 1) {
                disableAllNavigationButton();
            } else {
                if (navigation == Navigation.FORWARD && hasNextPage(numPages)) {
                    goPage(currentPage, numPages);
                }

                if (navigation == Navigation.GO_LAST_PAGE) {
                    goPage(numPages, numPages);
                }

                if (navigation == Navigation.BACKWARD && hasPreviousPage()) {
                    goPage(currentPage, numPages);
                }

                if (navigation == Navigation.GO_FIRST_PAGE) {
                    goPage(FIRST_PAGE, numPages);
                }

                if (navigation == Navigation.GO_N_PAGE) {
                    String text = txtGoPage.getText();
                    boolean isValid = false;
                    if (!isNullOrEmpty(text)) {
                        boolean isNumber = POSITIVE_DIGITAL.matchesAllOf(text);
                        if (isNumber) {
                            int pageNumber = Integer.valueOf(text);
                            if (pageNumber >= 1 && pageNumber <= numPages) {
                                goPage(Integer.valueOf(text), numPages);
                                isValid = true;
                            }
                        }
                    }

                    if (!isValid) {
                        JOptionPane.showMessageDialog(PdfViewer.this,
                                format("Invalid page number '%s' in this document", text));
                        txtGoPage.setText(format(GO_PAGE_TEMPLATE, currentPage, numPages));
                    }
                }
            }
        }

        private void goPage(int pageNumber, int numPages) {
            currentPage = pageNumber;
            PDFPage page = pdfFile.getPage(currentPage);
            pagePanel.showPage(page);
            boolean notFirstPage = isNotFirstPage();
            btnFirstPage.setEnabled(notFirstPage);
            btnPreviousPage.setEnabled(notFirstPage);
            txtGoPage.setText(format(GO_PAGE_TEMPLATE, currentPage, numPages));
            boolean notLastPage = isNotLastPage(numPages);
            btnNextPage.setEnabled(notLastPage);
            btnLastPage.setEnabled(notLastPage);
        }

        private boolean hasNextPage(int numPages) {
            return (++currentPage) <= numPages;
        }

        private boolean hasPreviousPage() {
            return (--currentPage) >= FIRST_PAGE;
        }

        private boolean isNotLastPage(int numPages) {
            return currentPage != numPages;
        }

        private boolean isNotFirstPage() {
            return currentPage != FIRST_PAGE;
        }
    }

    private class PrintUIWindow implements Printable, ActionListener {

        /*
         * (non-Javadoc)
         * 
         * @see java.awt.print.Printable#print(java.awt.Graphics,
         * java.awt.print.PageFormat, int)
         */
        @Override
        public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {
            int pagenum = pageIndex+1;
              if (pagenum < 1 || pagenum > pdfFile.getNumPages ())
                  return NO_SUCH_PAGE;

              Graphics2D g2d = (Graphics2D) graphics;
              AffineTransform at = g2d.getTransform ();

              PDFPage pdfPage = pdfFile.getPage (pagenum);

              Dimension dim;
              dim = pdfPage.getUnstretchedSize ((int) pageFormat.getImageableWidth (),
                                                (int) pageFormat.getImageableHeight (),
                                                pdfPage.getBBox ());

              Rectangle bounds = new Rectangle ((int) pageFormat.getImageableX (),
                                                (int) pageFormat.getImageableY (),
                                                dim.width,
                                                dim.height);

              PDFRenderer rend = new PDFRenderer (pdfPage, (Graphics2D) graphics, bounds,
                                                  null, null);
              try
              {
                  pdfPage.waitForFinish ();
                  rend.run ();
              }
              catch (InterruptedException ie)
              {
                  //JOptionPane.showMessageDialog (this, ie.getMessage ());
              }

              g2d.setTransform (at);
              g2d.draw (new Rectangle2D.Double (pageFormat.getImageableX (),
                      pageFormat.getImageableY (),
                      pageFormat.getImageableWidth (),
                      pageFormat.getImageableHeight ()));

              return PAGE_EXISTS;
        }

        /*
         * (non-Javadoc)
         * 
         * @see
         * java.awt.event.ActionListener#actionPerformed(java.awt.event.ActionEvent
         * )
         */
        @Override
        public void actionPerformed(ActionEvent e) {
            System.out.println("Inside action performed");
            PrinterJob printJob = PrinterJob.getPrinterJob();
            printJob.setPrintable(this);
             try
              {
                  HashPrintRequestAttributeSet attset;
                  attset = new HashPrintRequestAttributeSet ();
                  //attset.add (new PageRanges (1, pdfFile.getNumPages ()));
                  if (printJob.printDialog (attset))
                      printJob.print (attset);
              }
              catch (PrinterException pe)
              {
                  //JOptionPane.showMessageDialog (this, pe.getMessage ());
              }

        }

    }

    public PagePanel getPagePanel() {
        return pagePanel;
    }

    public void setPDFFile(PDFFile pdfFile) {
        this.pdfFile = pdfFile;
        currentPage = FIRST_PAGE;
        disableAllNavigationButton();
        txtGoPage.setText(format(GO_PAGE_TEMPLATE, FIRST_PAGE, pdfFile.getNumPages()));
        boolean moreThanOnePage = isMoreThanOnePage(pdfFile);
        btnNextPage.setEnabled(moreThanOnePage);
        btnLastPage.setEnabled(moreThanOnePage);
    }

    public static String format(String template, Object... args) {
        template = String.valueOf(template); // null -> "null"
        // start substituting the arguments into the '%s' placeholders
        StringBuilder builder = new StringBuilder(template.length() + 16 * args.length);
        int templateStart = 0;
        int i = 0;
        while (i < args.length) {
            int placeholderStart = template.indexOf("%s", templateStart);
            if (placeholderStart == -1) {
                break;
            }
            builder.append(template.substring(templateStart, placeholderStart));
            builder.append(args[i++]);
            templateStart = placeholderStart + 2;
        }
        builder.append(template.substring(templateStart));

        // if we run out of placeholders, append the extra args in square braces
        if (i < args.length) {
            builder.append(" [");
            builder.append(args[i++]);
            while (i < args.length) {
                builder.append(", ");
                builder.append(args[i++]);
            }
            builder.append(']');
        }

        return builder.toString();
    }

    public static void main(String[] args) {
        try {
            long heapSize = Runtime.getRuntime().totalMemory();
            System.out.println("Heap Size = " + heapSize);

            JFrame frame = new JFrame("PDF Test");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

            // load a pdf from a byte buffer
            File file = new File("/home/swarupa/Downloads/2626OS-Chapter-5-Advanced-Theme.pdf");
            RandomAccessFile raf = new RandomAccessFile(file, "r");
            FileChannel channel = raf.getChannel();
            ByteBuffer buf = channel.map(FileChannel.MapMode.READ_ONLY, 0, channel.size());
            final PDFFile pdffile = new PDFFile(buf);
            PdfViewer pdfViewer = new PdfViewer();
            pdfViewer.setPDFFile(pdffile);
            frame.add(pdfViewer);
            frame.pack();
            frame.setVisible(true);

            PDFPage page = pdffile.getPage(0);
            pdfViewer.getPagePanel().showPage(page);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

} 
```

我在哪里做错了。任何人都可以指出我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:25:54.627

我认为，这应该可以解决您的问题；) 您忘记将窗口设置为可见 :)

```
static class Action1 implements ActionListener {        
      public void actionPerformed (ActionEvent e) {  
          JFrame parent = new JFrame();
          JDialog jDialog = new JDialog();
          Label label = new Label("Enter Word: ");
          final JTextField jTextField = new JTextField(100);
          JPanel panel = new JPanel();
          parent.add(panel);
          panel.add(label);
          panel.add(jTextField);
          parent.setLocationRelativeTo(null);
          parent.setVisible(true);
      }
    } 
```

顺便说一句，你为什么要创建那个 JDialog？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:24:13.803

你创造了`JDialog`，`JFrame`为什么？你从不调用 setVisible(true)，为什么？

您对 Action1 的期望是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T11:21:55.887

很抱歉将此答案作为新帖子发布到您的评论中，但是将其发布为评论太长了。您只是无法从 JFrame 中删除关闭和最小化按钮。如果您想要一些没有这些按钮的窗口，您必须创建和自定义您自己的 JDialog。尽管如此，仍然会有一个关闭按钮 (X)。当你实现这样的东西时，你可以让你的 JDialog 不加修饰并让它表现得更像 JFrame：

```
class CustomizedDialog extends JDialog {
public CustomizedDialog(JFrame frame, String str) {
    super(frame, str);
    super.setUndecorated(true);
    addWindowListener(new WindowAdapter() {
        public void windowClosing(WindowEvent evt) {
            System.exit(0);
        }
    });
} 
```

}

然后你可以在你的代码中调用它：

```
CustomizedDialog myCustomizedDialog = new CustomizedDialog(new JFrame(), "My title");
JPanel panel = new JPanel();
panel.setSize(256, 256);
myCustomizedDialog.add(panel);
myCustomizedDialog.setSize(256, 256);
myCustomizedDialog.setLocationRelativeTo(null);
myCustomizedDialog.setVisible(true); 
```

我希望这有帮助 ：）

# android - 如何从android中的位图对象获取mime类型？

> ID：14519720
> 
> 赞同：6
> 
> 时间：2013-01-25T10:19:42.433
> 
> 标签：android, bitmap, mime-types

我想获得位图对象的 mime 类型。实际上我已经使用压缩了一个位图

```
bitmap.compress (Bitmap.CompressFormat.PNG , 100, stream); 
```

现在我想交叉检查格式、outBounds 和内存空间大小。但我不想做冗长或乏味的任务，例如。将其转换回流，然后使用带有选项的 BitmapFactory 将其再次转换为 BItmap。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-11T04:03:35.223

就像 Dmitry 建议的那样，如果您拥有的是流中的压缩图像，那么您*确实*需要使用 BitmapFactory 对其进行解码以判断它是什么类型。（从技术上讲，您*也可以*自己阅读流并对其运行自己的*临时*文件格式检查，但我假设您更喜欢使用现有工具而不是滚动自己的工具。）

您可以并且应该进行的一项优化是设置[BitmapFactory.Options.inJustDecodeBounds](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inJustDecodeBounds)以避免不必要地解码整个图像，如果您只想知道它是什么类型。解码后，[outMimeType](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#outMimeType)属性应该为您提供图像的类型。

至于你标题中的字面问题，它没有意义。[位图](http://developer.android.com/reference/android/graphics/Bitmap.html)没有 MIME 类型——它只是一个像素数组的容器。您可以使用各种格式（如 JPEG、PNG 或 WEBP）将位图压缩成流，但这只会为您提供图像的压缩副本。

# android - 如何使 webviews 与其内容一样大？

> ID：14519721
> 
> 赞同：4
> 
> 时间：2013-01-25T10:19:43.067
> 
> 标签：android, webview, horizontalscrollview

我在网上找不到这个。我在 a 中有很多 webview `HorizontalScrollView`，我希望它们都适合它的内容（然后可能有不同的宽度）。更多，我夸大了`webviews`这样的：

```
LinearLayout layout = (LinearLayout)getLayoutInflater().inflate(R.layout.webview_holder, null);
webView =  (WebView) layout.findViewById(R.id.webView);
webView.loadData(data, "text/html; charset=UTF-8", "UTF-8");
webView.getSettings().setUseWideViewPort(true);
webView.setScrollbarFadingEnabled(true);
pageHolder.addView(layout); 
```

“页面持有人” `layout`：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <HorizontalScrollView
    android:id="@+id/scrollView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/page_holder"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:orientation="horizontal">
    </LinearLayout>
    </HorizontalScrollView>
</LinearLayout> 
```

然后是“webview 布局”：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent">
    <WebView 
    android:id="@+id/webView"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-16T14:32:06.177

`wrap_content`WebViews的问题在于网页的呈现与视图层次结构中的布局是异步的。当 Android 测量 webview 的大小以确定将它们放置在 LinearLayout 中的哪个位置时，页面可能尚未呈现，因此宽度为 0。您需要为每个 WebView 添加一个 PictureListener 并确定何时调用了所有`onNewPicture(WebView, Picture)`回调。然后您可以调用`requestLayout()`您的 LinearLayout 来安排布局传递。

# java - 使用泛型进行多重绑定

> ID：14519722
> 
> 赞同：3
> 
> 时间：2013-01-25T10:19:45.457
> 
> 标签：java, guice

我正在尝试创建一个`Multibinder<A<? extends B>>`. 我试过使用`Multibinder.newSetBinder(binder(), A.class)`. 第二个参数是`Class<T>`在我的 guice 模块中这样做会给我一个类型不匹配错误。

`Multibinder<A<? extends B>> multibinder = Multibinder.newSetBinder(binder(), A.class)`

是否可以绑定这些泛型集合？也许我可以使用不同的`Multibinder`? 有没有人有任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T14:02:41.707

有一个版本需要`TypeLiteral`

```
final Multibinder<List<? extends Number>> multibinder =
            Multibinder.newSetBinder(binder(), new TypeLiteral<List<? extends Number>>() {}) 
```

# c++ - 将内存块附加到连续内存区域的好容器

> ID：14519723
> 
> 赞同：2
> 
> 时间：2013-01-25T10:19:46.693
> 
> 标签：c++, boost

是否有任何已知的类似 STL 的标头容器/分配器，用于将内存块附加到另一个连续的内存区域，直到它被填满？目前我正在使用 a `std::vector<char> vec`，因为它有一些有用的界面，但它不是最佳的，不知何故我认为我正在滥用它来满足我的需要。

我首先使用`std::vector::reserve`固定其容量并**一次性**分配所需的内存以避免不必要的重新分配，然后`std::copy(&chunk[0], &chunk[size], vec.data() + vec.size())`每次都使用将新的内存块附加到`unfilled`向量后面的内存区域（当然`size() <= capacity()`）。每次复制后，我都会相应地显式更新向量的大小。好的，我可以使用 back_inserter。但这不是现在的重点（见下文）。

当然`std::copy`可以`char`由任何实现专门化，以便它可以`memcpy`在最后调用，但这不是保证。自己调用`memcpy`将块附加到向量已经分配的内存中以获得这样的保证只是丑陋的。有更好/更优雅的选择吗？

编辑：我无法控制内存块的分配方式。他们被给予。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:09:57.370

我知道这不是您想要的，但[std::deque](http://en.cppreference.com/w/cpp/container/deque)通常将连续的内存块拼接在一起。

随着它的增长，没有任何重新分配，但整个数据可能不是连续的。

**编辑**

使用`vector`带有预分配内存的 a ，您可以[`insert`](http://en.cppreference.com/w/cpp/container/vector/insert)在最后设置值，这不会导致重新分配，除非新值会使大小超过容量：

```
vector<char> values(PRE_ALLOCATED_SIZE);
// ...
values.insert(values.end(), chunk, chunk+CHUNK_SIZE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:25:36.633

基本上，将内存“真正”附加到连续内存区域的唯一方法是使用 Posix 函数`realloc()`。即使有了这些您可以使用的分配区域`std::copy`，您也只需要了解您所在区域的结束位置。

但是，`realloc()`不保证内存区域会在前一个内存位置，而是保证新块是完全连续的。有关更多详细信息，请参见[手册](http://pubs.opengroup.org/onlinepubs/009696899/functions/realloc.html)页。

几件事情要记住：

*   如果您通过`posix_memalign()`它分配内存，则不能保证将保持内存对齐
*   无法确定是否`realloc()`复制了数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T00:20:50.960

这可能不是您要寻找的，因为它们是为同质容器设计的（即所有元素都具有相同的类型）。我不知道这是否适合您的用例。如果您觉得它有用，我会指出：

[`get_temporary_buffer`](http://en.cppreference.com/w/cpp/memory/get_temporary_buffer)-- 分配原始存储（还有一种方法可以返回存储）。

[`raw_storage_iterator`](http://en.cppreference.com/w/cpp/memory/raw_storage_iterator)-- 原始存储上的输出迭代器。

[`uninitialized_copy_n`](http://en.cppreference.com/w/cpp/memory/uninitialized_copy_n)-- 将多个对象复制到原始存储中（还有一个单元素版本）。

# c - Ansi C - 将字符串转换为小写字符串

> ID：14519726
> 
> 赞同：0
> 
> 时间：2013-01-25T10:20:01.113
> 
> 标签：c, string, lowercase

我需要将 char 数组转换为小写 char 数组。我还想将一些特殊字符，如 Ä 转换为 ä。但是“ASCII-Code”196 不在 ASCII-128 中。如何将它们转换为小写？我可以将它们用作字符串初始化器，但不能真正处理它们的代码。如果这可能是一个编译器选项，我在没有 c99 模式的 Linux 上使用 eclipse CDT（不能使用那个）。

```
char* toLowerCase(char* text)
{
    int length = strlen(text);
    char* result = malloc(length); // malloc adds the 0 automatically at result[length]
    int i;
    for (i = 0; i < length; i++)
        if ((text[i] >= 65) && (text[i] <= 90))
            result[i] = text[i] | 32;
        else
            result[i] = text[i];
    return result;
}

toLowerCase("hElLo WoRlD ÄäÖöÜü");
// result is "hello world ÄäÖöÜü" 
```

`tolower()`from`ctype.h`也不这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:30:09.893

我认为您需要阅读有关[setlocale](http://en.cppreference.com/w/c/locale/setlocale)的信息，（[或此处](http://www.cplusplus.com/reference/clocale/setlocale/)）

并使用 tolow()

> **注意：** 在程序启动时，相当于 setlocale(LC_ALL, "C"); 在运行任何用户代码之前执行。

您可以尝试环境的默认语言环境（或者如果您知道，请选择正确的语言环境）：

```
setlocale(LC_ALL, ""); 
```

# jquery-mobile - 禁用带有敲除的 jquery 移动选择

> ID：14519727
> 
> 赞同：0
> 
> 时间：2013-01-25T10:20:01.753
> 
> 标签：jquery-mobile, knockout.js

是否可以通过敲除这样的 jquery 移动选择来禁用：

```
 <select>
       <option value="1">value1</option>
       <option value="2">value2</option>
       <option value="3">value3</option>
       <option value="4">value4</option>
  </select> 
```

我试过这样的东西，`<select data-bind="attr: {disabled: 'disabled'}">`但没有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:54:08.540

只有当 select 是原生的时，您才能使用 knockout.js 来做到这一点。

如果它使用 jQM 进行样式设置，那么只有这样才能禁用它以使用 jQuery Mobile 函数，如下所示：

```
$('select').selectmenu('disable'); 
```

或者：

```
$('select').selectmenu('enable'); 
```

# html - 底部对齐文本

> ID：14519729
> 
> 赞同：0
> 
> 时间：2013-01-25T10:20:04.523
> 
> 标签：html, css

我发现难以解决的 css/html 问题。假设我们在其中有一个链接和一个 h2，如下所示

![一行两行的图片](../Images/422fad93a52cbedc8dd06538ca1f64a4.png)

代码如下：

```
<a href="newLink"><h2>This can be one line or two lines or three..</h2></a> 
```

我需要将线条底部对齐，如下所示......另外请注意，文本也是居中以及底部。这该怎么做？

```
 Andis AGC Clipper Single
Andis AGC 2 Speed Clipper                     Speed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:24:20.373

**HTML**

```
<div>
 <h2>one line</h2>
   <h2>This can be one line or two lines or three..</h2>
</div> 
```

**CSS**

```
div{background:grey; width:100%}
h2{
  font-size:20px; 
  color:white; width:49%; 
  background:red;
  display:inline-block;
  text-align:center
} 
```

**[演示](http://jsbin.com/ovupuw/5/edit)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:33:55.443

HTML

```
<div>
 <h2>one line</h2>
  <h2 align=center>This can be one line or two lines or three..</h2>
</div> 
```

CSS

```
div{background:grey; width:100%}
h2{
  font-size:20px; 
  color:white; width:49%; 
  display:inline-block
} 
```

为中心对齐编辑了 Sowmya 演示。

# regex - 选择两个表达式之间的第一个文本

> ID：14519731
> 
> 赞同：0
> 
> 时间：2013-01-25T10:20:10.577
> 
> 标签：regex

我想返回下面文本的**第一个**“abcd”部分。

```
 00abcd126456\x 00abcd126456\x 
```

我想选择第一个“00”和第一个（6 位数字 +“\x”）之间的所有文本。每个字符串都以“00”开头。

我一直在尝试：

```
^ 00(.*)\d{6}\\x 
```

但它显然选择了整个字符串。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:23:48.043

使用非贪婪量词：

```
^ 00(.*?)\d{6}\\x 
```

`*?`只会匹配*尽可能少的*字符以允许匹配成功，而不是`*`匹配*尽可能多的字符*。

如果您不想摆弄捕获组，您也可以使用环视：

```
(?<=^ 00).*?(?=\d{6}\\x) 
```

快速 PowerShell 测试：

```
PS> ' 00abcd126456\x 00abcd126456\x' -match '(?<=^ 00).*?(?=\d{6}\\x)'; $Matches
True

Name                           Value
----                           -----
0                              abcd 
```

# android - 在按钮单击时显示特定类别的附近地点，例如餐厅

> ID：14519741
> 
> 赞同：0
> 
> 时间：2013-01-25T10:20:46.180
> 
> 标签：android, facebook

所以在这里我想在按下时点击事件，我将有特定的位置类别，而不是用于搜索地点的搜索框。按下 OnClickGPS 后，它将打开 Facebook 的 PlacePickerFragment，顶部有搜索框。但我想在按钮单击时搜索地点类别，如餐厅、剧院等。在这方面的任何帮助都将是非常可观的。

```
package com.priyank.checkin;

import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

import android.app.AlertDialog;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.content.pm.Signature;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.util.Base64;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

import com.facebook.model.GraphLocation;
import com.facebook.model.GraphPlace;
import com.facebook.widget.PlacePickerFragment;
import com.facebook.Session;

public class PlacePickerSampleActivity extends FragmentActivity implements LocationListener {
    private static final int PLACE_ACTIVITY = 1;

    private static final Location SEATTLE_LOCATION = new Location("") {
        {
            setLatitude(47.6097);
            setLongitude(-122.3331);

        }
    };
    private static final Location SAN_FRANCISCO_LOCATION = new Location("") {
        {
            setLatitude(37.7750);
            setLongitude(-122.4183);
        }
    };
    private static final Location PARIS_LOCATION = new Location("") {
        {
            setLatitude(48.857875);
            setLongitude(2.294635);
        }
    };

    private TextView resultsTextView;
    private LocationManager locationManager;
    private Location lastKnownLocation;
    private String NameEditTextValue;
    private EditText NameEditText;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main7);

        try {
            PackageInfo info = getPackageManager().getPackageInfo(
                    "com.facebook.samples.hellofacebook", 
                    PackageManager.GET_SIGNATURES);
            for (Signature signature : info.signatures) {
                MessageDigest md = MessageDigest.getInstance("SHA");
                md.update(signature.toByteArray());
                Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
                }
        } catch (NameNotFoundException e) {

        } catch (NoSuchAlgorithmException e) {

        }

        Button b=(Button) findViewById(R.id.button1);

        b.setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {
                        NameEditTextValue = NameEditText.getText().toString();
                        Intent i = new Intent(Intent.ACTION_SEND);
                        i.setType("text/plain");
                        i.putExtra(Intent.EXTRA_SUBJECT, "Alert Message");
                        i.putExtra(Intent.EXTRA_TEXT, NameEditTextValue +"- via Security Android App");
                        startActivity(Intent.createChooser(i, "Alert Status"));
                       }

                    });

        NameEditText = (EditText) findViewById(R.id.editText1);

        resultsTextView = (TextView) findViewById(R.id.resultsTextView);
        Button button = (Button) findViewById(R.id.seattleButton);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                onClickSeattle();
            }
        });

        button = (Button) findViewById(R.id.sanFranciscoButton);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                onClickSanFrancisco();
            }
        });

        button = (Button) findViewById(R.id.gpsButton);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                onClickGPS();
            }
        });

        if (Session.getActiveSession() == null ||
                Session.getActiveSession().isClosed()) {
            Session.openActiveSession(this, true, null);
        }

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    }

    @Override
    protected void onStart() {
        super.onStart();

        // Update the display every time we are started (this will be "no place selected" on first
        // run, or possibly details of a place if the activity is being re-created).
        displaySelectedPlace(RESULT_OK);
    }

    private void onError(Exception exception) {
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle("Error").setMessage(exception.getMessage()).setPositiveButton("OK", null);
        builder.show();
    }

    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch (requestCode) {
            case PLACE_ACTIVITY:
                displaySelectedPlace(resultCode);
                break;
            default:
                Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
                break;
        }
    }

    private void displaySelectedPlace(int resultCode) {
        String results = "";
        PlacePickerApplication application = (PlacePickerApplication) getApplication();

        GraphPlace selection = application.getSelectedPlace();
        if (selection != null) {
            GraphLocation location = selection.getLocation();

            results = String.format("Name: %s\nCategory: %s\nLocation: (%f,%f)\nStreet: %s, %s, %s, %s, %s",
                    selection.getName(), selection.getCategory(),
                    location.getLatitude(), location.getLongitude(),
                    location.getStreet(), location.getCity(), location.getState(), location.getZip(),
                    location.getCountry());
        } else {
            results = "<No place selected>";
        }

        resultsTextView.setText(results);
        NameEditText.setText(results);
    }

    public void onLocationChanged(Location location) {
        lastKnownLocation = location;
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    private void startPickPlaceActivity(Location location) {
        PlacePickerApplication application = (PlacePickerApplication) getApplication();
        application.setSelectedPlace(null);

        Intent intent = new Intent(this, PickPlaceActivity.class);
        PickPlaceActivity.populateParameters(intent, location, null);

        startActivityForResult(intent, PLACE_ACTIVITY);
    }

    private void onClickSeattle() {
        try {
            startPickPlaceActivity(SEATTLE_LOCATION);
        } catch (Exception ex) {
            onError(ex);
        }
    }

    private void onClickSanFrancisco() {
        try {
            startPickPlaceActivity(SAN_FRANCISCO_LOCATION);
        } catch (Exception ex) {
            onError(ex);
        }
    }

    private void onClickGPS() {
        try {
            if (lastKnownLocation == null) {
                Criteria criteria = new Criteria();
                String bestProvider = locationManager.getBestProvider(criteria, false);
                if (bestProvider != null) {
                    lastKnownLocation = locationManager.getLastKnownLocation(bestProvider);
                }
            }
            if (lastKnownLocation == null) {
                String model = android.os.Build.MODEL;
                if (model.equals("sdk") || model.equals("google_sdk") || model.contains("x86")) {
                    // Looks like they are on an emulator, pretend we're in Paris if we don't have a
                    // location set.
                    lastKnownLocation = PARIS_LOCATION;
                } else {
                    new AlertDialog.Builder(this)
                            .setTitle(R.string.error_dialog_title)
                            .setMessage(R.string.no_location)
                            .setPositiveButton(R.string.ok_button, null)
                            .show();
                    return;
                }
            }
            startPickPlaceActivity(lastKnownLocation);
        } catch (Exception ex) {
            onError(ex);
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:19:21.383

最好的方法是使用[PlacePickerFragment](https://developers.facebook.com/docs/reference/android/3.0/PlacePickerFragment)并调用 setSearchText("restaurant")。虽然它不一定将其限制为一个类别，但它会搜索归类为餐厅的所有内容。

您还可以在 Scrumptious 示例应用程序（在 PickerActivity 类中）中看到一个示例。

# sql-server - 数据库设计 - 存储日志，哪种数据类型？

> ID：14519744
> 
> 赞同：-1
> 
> 时间：2013-01-25T10:21:13.490
> 
> 标签：sql-server, database, database-design, logging

我应该为 API 请求/响应存储什么数据类型？

（不知道以后，要存储的字符串的长度）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:32:08.233

恕我直言，一个 NOSQL 数据存储可能非常适合这个。[如果您有不同的 API 调用、不同的参数，以及像MongoDB](http://www.mongodb.org/)这样的数据库的无模式特性，[RavenDB](http://ravendb.net/)将是一个很好的选择。

关于存储在 SQL Server 中，一种粗略的方法是`NVARCHAR(MAX)`只存储一个字符串（最大为 2GB）。这可以作为纯日志使用，但如果您想轻松搜索该数据（监控/分析目的），则不理想。您可以使用 XML 并以更结构化的形式存储每个 API 调用的数据

例如

```
<MyApiCall>
  <Param1>SomeValue</Param1>
</MyApiCall> 
```

然后可以更容易地对其进行索引和查询。

有一个元素是“你想对日志数据做什么”。我假设您从数据库的角度询问，这意味着您想要对该数据进行某种形式的分析/查询（否则您可以只登录到标准文件）。

对我来说，底线是 NOSQL，无模式数据库将是一个很好的选择，并且是我的建议。

# python - Python 官方密钥服务器

> ID：14519752
> 
> 赞同：1
> 
> 时间：2013-01-25T10:21:47.467
> 
> 标签：python, public-key

我刚刚从[Python 下载页面](http://www.python.org/getit/)下载了 Python 2.7.3 64 位安装程序，我想验证签名。所以我需要导入密钥，我首选的方法是从受信任的密钥服务器获取它们。

Python文档中建议的方法是`gpg`从命令行使用

```
gpg --recv-keys EA5BBD71 6A45C816 ED9D77D5 7D9DC8D2 A4135B38 36580288 
```

但是，没有指示密钥服务器，我找不到任何关于`--keyserver`提供这些密钥的密钥服务器（选项）的信息（即使在谷歌上）。该命令不起作用：它连接到默认服务器`keys.gnupg.net`并退出并出现错误

```
gpgkeys: key ... not found on keyserver 
```

有人知道我在哪里可以找到提供官方 Python gpg 密钥的密钥服务器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:36:09.390

那个特定的密钥服务器对我有用，有或没有`0x`前缀：

```
gpg --keyserver keys.gnupg.net --recv-keys 0xEA5BBD71 0x6A45C816 0xED9D77D5 0x7D9DC8D2 0xA4135B38 0x36580288 
```

事实上，在我尝试过的大多数密钥服务器上，密钥都存在；我的设置使用`wwwkeys.pgp.net`：

```
gpg --keyserver wwwkeys.pgp.net --recv-keys EA5BBD71 6A45C816 ED9D77D5 7D9DC8D2 A4135B38 36580288 
```

或者，您必须手动下载[7D9DC8D2 密钥 (Martin von Löwis)](http://keys.gnupg.net/pks/lookup?op=get&search=0x6AF053F07D9DC8D2)，用于签署 Windows 构建并手动导入：

```
curl -o 7D9DC8D2.txt "http://keys.gnupg.net/pks/lookup?op=get&search=0x6AF053F07D9DC8D2"
gpg --import 7D9DC8D2.txt 
```

# android - Google Analytics 中的 com.google.android.feedback

> ID：14519756
> 
> 赞同：13
> 
> 时间：2013-01-25T10:21:53.770
> 
> 标签：android, google-analytics

在 Google Analytics 中，我看到`com.google.android.feedback`并`com.android.vending`在 Acquisitions 选项卡下。

我知道这`com.android.vending`是指从 Google Play 安装。

但`com.google.android.feedback`指的是什么？

# c# - 如何调用 ASHX 处理程序并返回结果

> ID：14519757
> 
> 赞同：10
> 
> 时间：2013-01-25T10:21:59.683
> 
> 标签：c#, asp.net, ashx

我创建了一个处理程序，它在完成一些数据库工作后返回整数值。我想知道如何获取该值并通过调用该处理程序将该值分配给 Label。

我用谷歌搜索了它，大多数示例都使用 Jquery.AJAX 调用来检索值。我相信我也可以通过使用它来获得价值。但是对于我公司的一些限制，我只能使用后面的代码。

任何例子都会有所帮助。

```
Handler: http://somesite.com/Stores/GetOrderCount.ashx?sCode=VIC
which returns: 3 
```

需要将此分配给标签控件

到目前为止，我已经尝试了很多。

```
HttpWebRequest request = (HttpWebRequest) WebRequest.Create("http://somesite.com/Stores/GetOrderCount.ashx?sCode=VIC");
HttpWebResponse response = (HttpWebResponse)request.GetResponse();
Label1.Text = response.ToString() // this does not work 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-25T10:33:26.827

使用[WebClient.DownloadString](http://msdn.microsoft.com/en-us/library/fhd1f0sw%28v=vs.80%29.aspx)

```
WebClient client = new WebClient ();
Label1.Text = client.DownloadString ("http://somesite.com/Stores/GetOrderCount.ashx?sCode=VIC"); 
```

您也可以使用 ajax 直接调用您的处理程序并更新标签。

这是一个 jQuery 示例：

```
$.get('Stores/GetOrderCount.ashx?sCode=VIC', function(data) {
  $('.result').html(data);
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T10:30:07.910

尝试这个

```
System.IO.Stream stream = response.GetResponseStream();
System.IO.StreamReader reader = new System.IO.StreamReader(stream);
string contents = reader.ReadToEnd(); 
```

# routes - Symfony1.4中添加动态路由

> ID：14519770
> 
> 赞同：0
> 
> 时间：2013-01-25T10:22:38.637
> 
> 标签：routes, symfony-1.4

如果可能的话，我想知道是否可以根据某些参数动态添加/注册新路由。

我知道路线有点像

```
newsdetail:
    url: /newsdetail/:id/:title
    class: sfDoctrineRoute
    options: { model: News, type object }
    param: { module: articles, action: articledetail }
    requirements: 
        id: \d+
        sf_method: [get] 
```

但是现在，我有没有办法在动作中添加或预先添加这种路线？我的问题是模块和操作可能会根据站点实例而改变......

所以，我已经构建了一个组件，它可以做一些事情和两个不同的模块，假设 module1 和 module2，两个都包括组件。由于不同的原因，我无法在路由文件中注册所有这些路由。现在，user1 必须拥有前往 module1 的路线，而 user2 必须拥有前往 module2 的路线。所以，我想在动作中添加路线。我希望我解释得更好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:39:38.980

[这是一个关于构建动态路由的例子](http://web.archive.org/web/20090311025941/http://www.dfwtek.com/blog/129-dynamic-routes-in-symfony12.html)。

基本上：

*   你为事件添加一个监听器`routing.load_configuration`
*   此侦听器从数据库中检索路由并将它们添加到当前路由缓存中

这是一个干净的片段：

```
<?php

class frontendConfiguration extends sfApplicationConfiguration
{
  public function configure()
  {
    $this->dispatcher->connect('routing.load_configuration', array($this, 'listenToRoutingLoadConfigurationEvent'));
  }

  public function listenToRoutingLoadConfigurationEvent(sfEvent $event)
  { 
    $routing    = $event->getSubject(); 
    $products   = Doctrine::getTable('Product')->findAll();

    foreach ($products as $product)
    {
      if (0 == strlen($product->route))
      {
        continue;
      }

      $name  = 'product_'.$product->id;
      $route = new sfRoute(
        $product->route,
        array('module' => 'browse', 'action' => 'catalog', 'product' => $product->id),
        array('product' => '\d+'),
        array('extra_parameters_as_query_string' => false)
      );

      $routing->prependRoute($name, $route);
    }
  }
} 
```

**编辑：**

您可以使用上下文从操作中检索路由：

```
$this->getContext()->getRouting() 
```

因此，如果要从操作中添加路由，可以执行以下操作：

```
$route = new sfRoute(
  '/my-route',
  array('module' => 'browse', 'action' => 'catalog', 'product' => 456),
  array('product' => '\d+'),
  array('extra_parameters_as_query_string' => false)
);

$this->getContext()->getRouting()->prependRoute('my-route', $route); 
```

无论如何，我仍然不**明白**你想如何制作它......即使在你最后一次编辑之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:11:21.010

为什么您没有相同的路由并根据凭据更改内容？

# c# - 访问标记中的子对象属性

> ID：14519773
> 
> 赞同：1
> 
> 时间：2013-01-25T10:22:47.630
> 
> 标签：c#, asp.net, user-controls, telerik

我可以从其他人的控件中看到，可以在标记中设置子对象属性。例如，如果我使用 Telerik 的 RadComboBox，我可以写...

```
<telerik:RadComboBox runat="server" ID="RadComboBox2">
    <CollapseAnimation Duration="100" />
</telerik:RadComboBox> 
```

或者，我也可以写...

```
<telerik:RadComboBox runat="server" ID="RadComboBox2" CollapseAnimation-Duration="100">
</telerik:RadComboBox> 
```

我必须采用什么技术来允许我使用我编写的控件来做到这一点？我认为我可能必须在我的父控件中为我公开的子对象的每个属性显式创建属性。但是，我似乎不允许创建名称中带有“-”的属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:09:46.440

试试这个：

1 - 属性类定义

```
public class Option
{
    public string First { get; set; }
    public string Last { get; set; }
} 
```

2 - 用户控件定义

```
public partial class CustomUC : System.Web.UI.UserControl
{
    //Enables the Option properties to be filled inside the control's tag
    [PersistenceMode(PersistenceMode.InnerProperty)] 
    //Enables the Option properties to be filled on the control's tag
    [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
    public Option Options
    {
        get;set;
    }

    protected void Page_Load(object sender, EventArgs e) { }
} 
```

3 - 标记：

```
<own:CustomUC ID="uc" runat="server" Options-First="First" Options-Last="Last" /> 
```

或者

```
<own:CustomUC ID="uc" runat="server" >
   <Options-First="First" Options-Last="Last" />
</own:CustomUC> 
```

注意：您必须首先使用您自己的 tagPrefix 引用用户控件程序集。

# jpa - jpa select new with embedded key throws exceptions

> ID：14519779
> 
> 赞同：0
> 
> 时间：2013-01-25T10:23:09.150
> 
> 标签：jpa, eclipselink

尝试运行以下命名查询时出现异常

```
@NamedQuery(name = "software.listAssemblies", query = "SELECT distinct NEW com.blackbox.dao.AssemblyToBootloaderDTO(s.id.assemblyId, s.filename) FROM Software s where s.id.platformId = :platformId and s.id.txaddress = :txaddress and s.filetype = 'SBL';") 
```

如果我删除了对 AssemblyToBootloaderDTO 的引用，那么查询将显示为

```
@NamedQuery(name = "software.listAssemblies", query = "SELECT distinct s.id.assemblyId, s.filename FROM Software s where s.id.platformId = :platformId and s.id.txaddress = :txaddress and s.filetype = 'SBL';") 
```

然后查询成功运行，并按预期返回 object[] 列表。

我的应用程序中有几个命名查询，它们通过 SELECT NEW 创建 DTO 对象，运行没有问题，但这是我尝试过的第一个，我在 DTO 中使用嵌入键中的字段，所以我猜我在这里遗漏了一些语法。我需要做什么才能映射到 DTO 类工作？

```
@Entity
@Table(name="software")
@NamedQueries({
@NamedQuery(name = "software.listBootLoaders", query = "SELECT distinct s.filename FROM Software s where s.id.platformId = :platformId and s.id.txaddress = :txaddress and s.filetype = 'SBL';"),
@NamedQuery(name = "software.listAssemblies", query = "SELECT distinct NEW com.blackbox.dao.AssemblyToBootloaderDTO(s.id.assemblyId, s.filename) FROM Software s where s.id.platformId = :platformId and s.id.txaddress = :txaddress and s.filetype = 'SBL';")

})
public class Software implements Serializable {
private static final long serialVersionUID = 1L;

@EmbeddedId
private SoftwarePK id;

@Column(name="fileName", length=32)
private String filename;

@Column(name="fileType", length=8)
private String filetype;

@Column(name="predecessor", length=64)
private String predecessor;

@Column(name="successor", length=64)
private String successor;

//bi-directional many-to-one association to Hardware
@ManyToOne(fetch=FetchType.LAZY)
@JoinColumns({
    @JoinColumn(name="assemblyId", referencedColumnName="assemblyId", nullable=false, insertable=false, updatable=false),
    @JoinColumn(name="busId", referencedColumnName="busId", nullable=false, insertable=false, updatable=false),
    @JoinColumn(name="hardwareId", referencedColumnName="hardwareId", nullable=false, insertable=false, updatable=false),
    @JoinColumn(name="platformId", referencedColumnName="platformId", nullable=false, insertable=false, updatable=false),
    @JoinColumn(name="txAddress", referencedColumnName="txAddress", nullable=false, insertable=false, updatable=false)
    })
private Hardware hardware;

public Software() {
}

public SoftwarePK getId() {
    return this.id;
}

public void setId(SoftwarePK id) {
    this.id = id;
}
... getters/setters omitted 
```

嵌入式密钥；

```
@Embeddable
public class SoftwarePK implements Serializable {
//default serial version id, required for serializable classes.
private static final long serialVersionUID = 1L;

@Column(name="platformId",unique=true, nullable=false)
private int platformId;

@Column(name="busId", unique=true, nullable=false)
private int busid;

@Column(name="txAddress", unique=true, nullable=false, length=3)
private String txaddress;

@Column(name="assemblyId",unique=true, nullable=false, length=64)
private String assemblyId;

@Column(name="hardwareId",unique=true, nullable=false, length=64)
private String hardwareId;

@Column(name="sequence",unique=true, nullable=false)
private int sequence;

@Column(name="softwareId",unique=true, nullable=false, length=64)
private String softwareId;

    public SoftwarePK() {
    }

    getters/setters omitted. 
```

DTO；

```
public class AssemblyToBootloaderDTO {

private String assemblyId;
private String softwareBootloaderId;

public AssemblyToBootloaderDTO(String assemblyId,
        String softwareBootloaderId) {

    this.assemblyId = assemblyId;
    this.softwareBootloaderId = softwareBootloaderId;
}

public String getAssemblyId() {
    return assemblyId;
}

public String getSoftwareBootloaderId() {
    return softwareBootloaderId;
}

} 
```

和例外；

```
Exception [EclipseLink-6052] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.QueryException
Exception Description: An outer join (getAllowingNull or anyOfAllowingNone) is only valid for OneToOne, OneToMany, ManyToMany, AggregateCollection and DirectCollection Mappings, and cannot be used for the mapping [org.eclipse.persistence.mappings.DirectToFieldMapping[assemblyId-->software.assemblyId]].
org.eclipse.persistence.exceptions.QueryException.outerJoinIsOnlyValidForOneToOneMappings(QueryException.java:924)
org.eclipse.persistence.internal.expressions.QueryKeyExpression.validateNode(QueryKeyExpression.java:863)
org.eclipse.persistence.expressions.Expression.normalize(Expression.java:3009)
org.eclipse.persistence.internal.expressions.DataExpression.normalize(DataExpression.java:342)
org.eclipse.persistence.internal.expressions.QueryKeyExpression.normalize(QueryKeyExpression.java:612)
org.eclipse.persistence.internal.expressions.QueryKeyExpression.normalize(QueryKeyExpression.java:599)
org.eclipse.persistence.internal.expressions.SQLSelectStatement.normalize(SQLSelectStatement.java:1311)
org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.buildReportQuerySelectStatement(ExpressionQueryMechanism.java:560)
org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.buildReportQuerySelectStatement(ExpressionQueryMechanism.java:506)
org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.prepareReportQuerySelectAllRows(ExpressionQueryMechanism.java:1527)
org.eclipse.persistence.queries.ReportQuery.prepareSelectAllRows(ReportQuery.java:1298)
org.eclipse.persistence.queries.ReadAllQuery.prepare(ReadAllQuery.java:625)
org.eclipse.persistence.queries.ReportQuery.prepare(ReportQuery.java:1047)
org.eclipse.persistence.queries.DatabaseQuery.checkPrepare(DatabaseQuery.java:509)
org.eclipse.persistence.queries.ObjectLevelReadQuery.checkPrepare(ObjectLevelReadQuery.java:820)
org.eclipse.persistence.queries.DatabaseQuery.prepareCall(DatabaseQuery.java:1588)
org.eclipse.persistence.internal.jpa.EJBQueryImpl.getDatabaseQueryInternal(EJBQueryImpl.java:568)
org.eclipse.persistence.internal.jpa.EntityManagerImpl.createNamedQuery(EntityManagerImpl.java:1001)
com.blackbox.dao.JpaSoftwareDao.listAssemblies(JpaSoftwareDao.java:168)
com.blackbox.services.Services.getAssemblyNames(Services.java:571)
com.blackbox.genesis.ccfeditor.services.NanocomService.buildSource(NanocomService.java:48)
com.blackbox.genesis.actions.ccfedit.DownloadCCForNanocom.execute(DownloadCCForNanocom.java:35)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
java.lang.reflect.Method.invoke(Unknown Source)
com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452)
com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254)
com.blackbox.x.interceptors.LicenseInterceptor.intercept(LicenseInterceptor.java:75)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)
org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:133)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:142)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:166)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.blackbox.x.interceptors.Log4jMDCInterceptor.intercept(Log4jMDCInterceptor.java:51)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
com.blackbox.x.interceptors.RedirectMessageInterceptor.doIntercept(RedirectMessageInterceptor.java:78)
com.blackbox.x.interceptors.RedirectMessageInterceptor.intercept(RedirectMessageInterceptor.java:63)
com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:485)
org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
org.apache.struts2.dispatcher.ng.filter.StrutsExecuteFilter.doFilter(StrutsExecuteFilter.java:88)
com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)
org.apache.struts2.dispatcher.ng.filter.StrutsPrepareFilter.doFilter(StrutsPrepareFilter.java:82)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:183)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:125)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:32:41.497

似乎是构造函数元素内的连接问题。

试试最新的/2.4 版本，我猜这已经修复了。如果仍然不成功，请记录错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T16:06:48.863

似乎是一个 jpa/实现错误，我正在运行 eclipselink 2.3 并遇到同样的问题。

作为替代方案，删除@Embeddable 和@EmbeddedId 并在实体级别使用@IdClass，而不是在您的关键字段上使用@Id，即：

```
@Table(name = "MY_TABLE")
@IdClass(value=MyTableId.class)
public class MyTableEntity implements Serializable {
    private static final long serialVersionUID = 1000L;

    public static class MyTableId implements Serializable {
        private static final long serialVersionUID = 1000L;
        private Integer keyFieldOne;
        private String keyFieldTwo;

        public MyTableId() {
            super();
        }

        public MyTableId(Integer keyFieldOne, String keyFieldTwo) {
            this.keyFieldOne = keyFieldOne;
            this.keyFieldTwo = keyFieldTwo;
        }

        @Override
        public boolean equals(Object obj) {
            if (obj == null) {
                return false;
            }
            if (getClass() != obj.getClass()) {
                return false;
            }
            MyTableId myTableId = (MyTableId)obj;
            return Objects.equal(keyFieldOne, myTableId.keyFieldOne) && Objects.equal(keyFieldTwo, myTableId.keyFieldTwo);
        }

        @Override
        public int hashCode() {
            return Objects.hashCode(keyFieldOne, keyFieldTwo);
        }
    }

    @Id
    @Column(name = "KEY_FIELD_ONE", nullable = false)
    private Integer keyFieldOne;
    @Id
    @Column(name = "KEY_FIELD_TWO", nullable = false, length = 8)
    private String keyFieldTwo;

    ...

} 
```

注意我使用谷歌番石榴作为哈希码和等于覆盖

# android - 如何获取哈希图值？

> ID：14519783
> 
> 赞同：0
> 
> 时间：2013-01-25T10:23:26.800
> 
> 标签：android, arraylist, hashmap

我是安卓新手。。

我有三个 ArrayList hashmap..一个用于问题，第二个用于问题 ID，第三个用于答案..

我得到了 JSON 对象中的问题和问题 ID 和答案。现在我想显示问题和答案......我需要的是，我有三个 ArrayList。QtnsArraylist1(ques1) 包含 100 个元素（100 个问题），QuestidArraylist 包含 100 个 id，AnsArraylist2(answ1) 包含 400 个元素（400 个答案，每个问题 4 个选项总共 400 个元素）。我想从 hashmap 中获取这些值..

对于我在 QtnsArraylist1(ques1) 中的第一个问题，我必须根据 hashmap 键 questionid 从 AnsArraylist2(answ1) 中获取前 4 个元素。类似地，如果我给出下一个按钮，它会显示问题 2、3、4...。这些都应该做 onPostExecute() 我怎么能得到这个？

提前致谢..

> ```
>  protected void onPostExecute(String file_url) {
>         pDialog.dismiss();       
>         ques1=new ArrayList<String>(new HashSet<String>(ques1));
>         System.out.println(" Question array:"+ques1);
>         String[] quesArr = new String [ques1.size()];
>         quesArr = ques1.toArray(quesArr);
>         for(String s: quesArr){
>             System.out.println("All Array Questions:"+s);
>             final TextView txtque = (TextView) findViewById(R.id.que_txt);
>             final String text=ques1.get(j).toString();
>             System.out.println("Array:"+text);
>             txtque.setText(text);
>         }            
>         answ1=new ArrayList<String>(new ArrayList<String>(answ1));
>         System.out.println(" Answer array:"+answ1);
>         String[] answArr = new String [answ1.size()];
>         answArr = answ1.toArray(answArr);
>         for(String A: answArr){
>             // final Object getName0 = answArr[0].toString();
>             // final Object getName1 = answArr[1].toString();
>             // final Object getName2 = answArr[2].toString();
>             // final Object getName3 = answArr[3].toString();
>             Collections.sort(answ1, new Comparator<String>() {
>                 @Override
>                 public int compare(String s1, String s2) {
>                     return s1.compareToIgnoreCase(s2);
>                 }
>             });
>         System.out.println("All Array Answers:"+A);    
>         }                 
>         btn_practicerg =(RadioGroup) findViewById(R.id.rdgroup);
>         btn_practice1 = (RadioButton) findViewById(R.id.RB1);
>         btn_practice1.setText(String.valueOf(answArr[0]));
>         btn_practice2 = (RadioButton) findViewById(R.id.RB2);
>         btn_practice2.setText(String.valueOf(answArr[1]));
>         btn_practice3 = (RadioButton) findViewById(R.id.RB3);
>         btn_practice3.setText(String.valueOf(answArr[2]));
>         btn_practice4 = (RadioButton) findViewById(R.id.RB4);
>         btn_practice4.setText(String.valueOf(answArr[3]));              
>         Button nextBtn = (Button) findViewById(R.id.nxt_btn);
>         nextBtn.setOnClickListener(new Button.OnClickListener(){
>             public void onClick(View v){
>             j++;
>             TextView txtque = (TextView) findViewById(R.id.que_txt);
>             txtque.setText(ques1.get(j).toString());                               
>             k++;
>             btn_practice1.setText(answ1.get(k).toString());
>             k++;
>             btn_practice2.setText(answ1.get(k).toString());
>             k++;
>             btn_practice3.setText(answ1.get(k).toString());
>             k++;
>             btn_practice4.setText(answ1.get(k).toString()); 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:11:40.047

您可以将您的答案作为 HashMap 放在 Arraylist 中。这将使您所有的 ArrayList 大小相同。

例如，

```
HashMap<String, String> hm = new HashMap<String, String>();
hm.put("1", "abc");
hm.put("2", "def");
hm.put("3", "ghi");
hm.put("4", "jkl");

ArrayList<HashMap<String, String>> lstAns = new ArrayList<HashMap<String,String>>();
lstAns.add(hm); 
```

要访问答案：

```
System.out.println("answer1 " + lstAns.get(index).get("1")); // gives "abc" 
```

# php - 将具有引用的关联数组作为值保存在教义mongodb中

> ID：14519785
> 
> 赞同：1
> 
> 时间：2013-01-25T10:23:34.863
> 
> 标签：php, doctrine, mongodb-php, doctrine-mongodb

如何将文档内的字段映射为关联数组，其值是对另一个文档的引用？

假设我有一个文件`File`，它代表磁盘上的某个文件。像这样的东西：

```
/** @Document */
class File {

    /** @Id */
    protected $id;

    /** @String */
    protected $filename;

    // Getter and setters omitted
} 
```

另一个代表图像的文档，其中存储了对不同大小图像的引用。像这样的东西：

```
/** @Document */
class Image {

    /** @Id */
    protected $id;

    /** ???? */
    protected $files;

    // Getter and setters omitted
} 
```

我现在希望能够在图像文档中存储一些对文件的引用，这些文件以它们的大小为关键字。例如：

```
$file1 = new File('/some/path/to/a/file');
$file2 = new File('/some/path/to/another/file');

$image = new Image();
$image->setFiles(array('50x50' => $file1,'100x100' => $file2)); 
```

生成的 MongoDB 文档应如下所示：

```
{
    "_id" : ObjectId("...."),
    "files" : {
        "50x50" : {
            "$ref" : "files",
            "$id" : ObjectId("...")
        },
        "100x100" : {
            "$ref" : "files",
            "$id" : ObjectId("...")
        }
    }
} 
```

那么如何映射文档`files`中的字段呢？`Image`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T15:00:45.240

对 Doctrine 的 ArrayCollection 使用“设置”策略

```
/** @Document */
class Image {

    /** @Id */
    protected $id;

    /**
     * @ReferenceMany(targetDocument="File", strategy="set") 
     */

    protected $files;

    public function setFile($resolution, File $file)
    {
        $this->files[$resolution] = $file;
    }

    // Getter and setters omitted
} 
```

# f# - F# 中的 Seq 和 IQueryable

> ID：14519788
> 
> 赞同：3
> 
> 时间：2013-01-25T10:23:41.460
> 
> 标签：f#

我正在使用 F# 阅读 Web 云和移动解决方案，并尝试关注作者正在构建的网站。但是我有一些问题，我无法解决。我理解我正在做的事情的逻辑，但似乎缺少一些代码使其工作。我已阅读到第 19 页。

我有以下存储库模块：

```
module Repository =
    let get (source : IQueryable<_>) queryFn=
        queryFn |> Seq.toList

    let getAll ()= 
        fun s -> query { for x in s  do
                         select x } 
```

这个想法是在 queryFn 中使用 getAll 从源中获取所有项目。但我在两者之间有一个演员问题。

这是使用它的控制器：

```
[<HandleError>]
type GuitarsController(context : IDisposable, ?repository ) =
    inherit Controller()

    let fromRepository =
        match repository with
        | Some v -> v
        | _ -> (context :?>  FsMvcAppEntities).guitars
                |> Repository.get

    new() = new GuitarsController(new FsMvcAppEntities())

    member this.Index() =
        getAll()
        |> fromRepository
        |> this.View 
```

getAll() 不适用于 |> fromRepository。

> ''b -> Linq.IQueryable<'c>' 类型与 'seq<'a>' 类型不兼容。

查看存储库模块中定义的类型时，我可以看到 queryFn 是：

```
val get : source:IQueryable<'a> -> queryFn:seq<'b> -> 'b list 
```

和getall给

```
 unit -> s:System.Linq.IQueryable<'a> -> System.Linq.IQueryable<'a> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T11:40:35.807

你`Repository.get`没有使用`source`：D。

将其更改为：

```
module Repository =
    let get (source : IQueryable<_>) queryFn =
        queryFn source |> Seq.toList 
```

# android - 在设备上手动安装 apk：错误 103

> ID：14519791
> 
> 赞同：10
> 
> 时间：2013-01-25T10:23:52.270
> 
> 标签：android, intellij-idea, apk

我尝试在我的手机（运行 Android 4.0.4 的 GT-B5330 ）上**手动安装一个 apk（由 IntelliJ 构建）。**

*   Intellij 生成 MyApp.apk（使用 Build > Artifact > Rebuild...）
*   电话设置：安全 > 设备管理 > 未知来源被选中
*   我在手机上卸载了 MyApp 的现有“调试”版本
*   我用 USB 数据线将手机连接到电脑，然后将 MyApp.apk 传输到手机 SD 卡。
*   在手机上，我浏览 sdcard 并单击 MyApp.apk
*   我看到 MyApp 所需的权限并尝试安装它。
*   我收到一条消息“未安装应用程序”

查看 logcat 我发现了这些日志：

```
01-25 10:55:15.668: INFO/ApplicationPolicy(1448): isApplicationInstallationEnabled
01-25 10:55:15.668: WARN/PackageManager(1448): verifying app can be installed or not
01-25 10:55:15.748: INFO/SurfaceFlinger(1216): id=3872 Removed idx=3 Map Size=4
01-25 10:55:15.748: INFO/SurfaceFlinger(1216): id=3872 Removed idx=-2 Map Size=4
01-25 10:55:16.148: DEBUG/dalvikvm(1448): GC_EXPLICIT freed 744K, 34% free 13115K/19655K, paused 5ms+11ms
01-25 10:55:16.148: DEBUG/InstallAppProgress(22326): Installation error code: -103 
```

我试图找到这个**错误代码 -103**的含义，但我没有找到任何东西。

我想知道可能出了什么问题，我该如何解决/调查这个问题？

注意 ：

*   当我从我的 IDE 运行时：它已安装并正常工作。
*   一些本机库与 MyApp.apk 一起打包

我错过了一些明显的东西吗？其他安全设置要更改？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T11:03:07.930

从 IDE 运行时，apk 使用调试密钥进行签名。

我假设您首先提到的构建方法可能使用另一个键或根本没有键。我的猜测完全没有，否则您应该收到签名不同的消息。

这是一个屏幕截图，显示如何使用 IDEA12 签署 apk

![在此处输入图像描述](../Images/0552ab135288601b92924e69209fde7f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:39:41.167

您已经在您的设备中安装了这个应用程序？因为您可能正在尝试安装一个已经存在的应用程序，并使用不同的密钥签名。

# cassandra - Cassandra 模式根据一组用户作为输入来查找组是否存在

> ID：14519792
> 
> 赞同：0
> 
> 时间：2013-01-25T10:23:54.253
> 
> 标签：cassandra

我正在尝试为以下用例定义 Cassandra 模式：每个唯一的用户集定义一个组。查询模式需要一种基于一组用户作为输入的快速方法来查找组是否存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T22:35:19.803

由于给出的信息很少，我将在这里做一些最好的假设。我假设有一种独特的方法可以使用固定长度的 N 位哈希（我们称之为 uid）来识别用户。我还假设组中的最大用户数 (MAX) 为 (MAX < 64*1024*8 / n)。这是因为 Cassandra 对密钥长度有 64KB 的限制）。实际上，这意味着如果您有多达 32,000 个用户，则您可以组成任何组，最多可容纳最大数量的用户。

鉴于上述情况，我会说 uid 的排序连接将是识别组的一种简单方法，并且可以这样键入组。

在这种情况下，如果您获得成功，则通过用户查询集形成的排序连接键进行一次查找将为您提供答案。

```
Let's say 
key of G1 = u04,u08,u10,u12;
key of G2 = u01,u11,u12;
...
Key of GN = u09,uxx,uyy; 
```

如果搜索包含用户 u04、u08、u03 的组是否存在，只需创建键“u03,u04,u08”并尝试在“组”列族中查找匹配项。

如果您正在使用更大的用户集，每个组有更多的用户，那么可能需要一种不同的方法。

**编辑**：您能否最大程度地了解可以形成一个组的用户数量。我假设您的客户必须将所有这些用户的列表作为他查询的一部分传递。

# java-bytecode-asm - 从 Type.getSort() 到 visitFrame(...) 中的本地和堆栈数组的映射是什么？

> ID：14519794
> 
> 赞同：1
> 
> 时间：2013-01-25T10:24:02.313
> 
> 标签：java-bytecode-asm

我需要使我的代码适应更严格的 Java 7 验证程序，并且必须`visitFrame`在我的 MethodNode 中添加调用（我正在使用树 API）。我找不到有关如何`Type`映射到`Object[]`visitFrame 中使用的 s 的任何信息，所以请在这里帮助我...

这是我到目前为止所拥有的：

```
private Object getFrameType(Type type) {
    switch (type.getSort()) {
        case Type.BOOLEAN:
        case Type.CHAR:
        case Type.BYTE:
        case Type.SHORT:
        case Type.INT:
            return Opcodes.INTEGER;
        case Type.LONG:
            return Opcodes.LONG;
        case Type.FLOAT:
            return Opcodes.FLOAT;
        case Type.DOUBLE:
            return Opcodes.DOUBLE;
        case Type.OBJECT:
        case Type.ARRAY:
            return type.getInternalName();
    }
    throw new RuntimeException(type + " can not be converted to frame type");
} 
```

我想知道的是：`Type.VOID`和是什么`Type.METHOD`？我什么时候需要`Opcodes.TOP`，`Opcodes.NULL`和`Opcodes.UNINITIALIZED_THIS`？

我猜`UNINITIALIZED_THIS`它只在构造函数中使用，我可能会忽略`VOID`and `METHOD`，但我不确定，我一点也不知道是什么`TOP`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:12:09.023

如果我正确理解您的需求，您可以让 ASM 为您计算帧数。这可能会稍微减慢类的生成速度，但肯定值得一试。

创建时`ClassWriter`，只需添加[`COMPUTE_FRAMES`](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/ClassWriter.html#COMPUTE_FRAMES)到构造函数的标志参数，例如

```
new ClassWriter(ClassWriter.COMPUTE_FRAMES); 
```

同样，如果您正在转换一个类，`ClassReader`可以要求[扩展框架](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/ClassReader.html#EXPAND_FRAMES)，例如：

```
ClassReader cr = ...;
ClassNode cn = new ClassNode(ASM4);
cr.accept(cn, ClassReader.EXPAND_FRAMES); 
```

前一个选项的好处是您可以完全忘记帧（和“最大值”），而后一个选项可能需要您自己修补帧，具体取决于您执行的转换类型。

*这些示例适用于 ASM 版本 4，但至少从版本 3 开始支持这些功能 - 参数的传递方式略有不同。*

# css - “可折叠”

> ID：14519796
> 
> 赞同：4
> 
> 时间：2013-01-25T10:24:13.043
> 
> 标签：css, html, visible, collapse

在用户单击某个元素之前，我在尝试隐藏时遇到了一些麻烦。

HTML 看起来像：

```
<h3 class="filter-type">BRAND</h3>
<div class="sidebarlistscroll">
    <ul>
        <li>item 1</li>
        <li>item 2</li>
        <li>item 3</li>
    </ul>
</div> 
```

这是CSS：

```
.filter-type {
    border-bottom: 1px dotted #666;
}

.sidebarlistscroll {
    width: 220px;
    height: 200px;
    margin-bottom: 15px;
    overflow-y: scroll;
    border: none;
    visibility: hidden;
}

.filter-type:active .sidebarlistscroll {
    visibility: visible;
} 
```

我也尝试过使用 :focus 和 :hover 子类，但它仍然无法正常工作，div 无论如何都保持隐藏状态。

如果可能的话，我试图在不使用 javascript 的情况下实现这一点。

我在这里做错了什么？

谢谢，希望有人可以帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T10:35:35.030

您的**sidebarlistscroll** DIV 在**H3**之后不在**H3**内。像这样写：

```
.filter-type:active + .sidebarlistscroll {
    visibility: visible;
} 
```

如果您希望 div 在您停止单击后保持可见。然后，您必须对代码进行一些更改。像这样写：

```
<label class="filter-type" for="filter">BRAND</label>
<input type="checkbox" id="filter">
<div class="sidebarlistscroll">
    <ul>
        <li>item 1</li>
        <li>item 2</li>
        <li>item 3</li>
    </ul>
</div> 
```

**CSS**

```
.filter-type {
    border-bottom: 1px dotted #666;
}

.sidebarlistscroll {
    width: 220px;
    height: 200px;
    margin-bottom: 15px;
    overflow-y: scroll;
    border: none;
    visibility: hidden;
}
#filter{display:none}
#filter:checked + .sidebarlistscroll{
    visibility: visible;
} 
```

检查这个[http://jsfiddle.net/BU4Qt/](http://jsfiddle.net/BU4Qt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:50:57.173

这是你想要的吗...？

风格：

```
.filter-type {
  border-bottom: 1px dotted #666;
 } 
```

HTML：

```
 <h3 class="filter-type">BRAND</h3>
 <p onclick="this.innerHTML='<div><ul><li>item 1</li><li>item 2</li><li>item 3</li></ul></div>'">Click Here</p> 
```

# java - 在java中覆盖具有不同返回类型的方法？

> ID：14519797
> 
> 赞同：20
> 
> 时间：2013-01-25T10:24:14.770
> 
> 标签：java, overloading, overriding

我读过一本书，它说如果它具有相同的签名，我可以覆盖一个方法。根据本书，方法的签名是 Method_Name + 传递的参数。

根据本书，我可以覆盖具有不同返回类型的方法。实际上是否可以在 Java 中覆盖具有不同返回类型的方法？因为我在网上做了一些搜索，我发现人们说要覆盖一个方法，返回类型也应该相同。

根据这本书，它还说当我们尝试重载具有相同方法名称和参数但返回类型不同的方法时，java会抛出编译错误，因为签名仅表示方法名称和参数。如果这是真的，我们应该能够覆盖具有不同返回类型的方法。

请帮助我理解这一点。提前致谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-25T10:28:56.500

您可以返回不同的类型，只要它与被覆盖方法的返回类型兼容。兼容意味着：它是被覆盖方法返回的类或接口的子类、子接口或实现。

这是合乎逻辑的。如果一个方法返回一个 Animal，而您的派生类返回一个 Cow，那么您并没有违反超类方法的约定，因为 Cow 是一个 Animal。如果派生类返回一个香蕉，那就不正确了，因为香蕉不是动物。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-25T10:37:44.097

你的父类已经向外界做出了承诺。例如，方法：

`public Price calculatePrice(Items[] items)`.

它告诉世界期待价格。

如果您在子类中增强该功能，您仍然必须保持父类对它的原始承诺。

您可以添加重载的计算方式：

`public Price calculatePrice(Items[] items, Integer minimumCharge)`.

你甚至可以通过使用更具体的返回类型来改进你父母的承诺：

`public AccuratePrice calculatePrice(Items[] items, Integer minimumCharge)`.

但是你必须至少返回你父母承诺的类型。方法声明中的异常也是如此。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-25T10:31:38.407

是的，从 Java 5 开始就有可能，它被称为协变返回类型。返回类型应该是超类方法返回类型的子类（不允许使用原始类型）。例子

```
class X implements Cloneable {

    @Override
    protected X clone() {
        try {
            return (X) super.clone();
        } catch (CloneNotSupportedException e) {
            throw new Error(e); // can never happen
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T10:26:44.167

> 您的覆盖方法可以具有相同的类型或原始返回类型的子类型，称为协变返回。

如果将被覆盖方法的返回类型更改为不是原始类型的子类型的其他类型，则会出现编译时错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T10:29:48.847

这是一个例子：

```
class Base {
    public Number test() {
        return 0;
    }
}

class A extends Base {
    public Long test() {
        return 1L;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-17T20:42:07.383

```
Yes we can override different return types but they should be subclass.

public class Shape {
    public Shape area(Integer i) {
        System.out.println("Sape Area");
        System.out.println("Integer");
        return null;
    }
}

package com.oops;

public class Circle extends Shape {
    public Circle area(Integer i) {
        System.out.println("Circle Area");
        System.out.println("int");
        return null;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-23T10:27:50.597

```
// Covariant Overriding 
public class Parent {

  public Parent(){}
  String parentName;
  public Parent(String parentName){
    this.parentName=parentName;
    System.out.println(this.parentName);
 }

public  Parent show(){
    return new Parent("Parent");
}
}

public class Child extends Parent{

  public Child(){}
  String name;
  public Child(String name){
    this.name=name;
    System.out.println(this.name);
  }
  public Child show(){
    return new Child("Child");
}
}

public class Main {

public static void main(String[] args) {
    Parent parent=new Child();
    parent.show();

    Parent parent1=new Parent();
    parent1.show();
}
} 
```

# c# - 文本框中的倒计时字符标记不起作用

> ID：14519799
> 
> 赞同：0
> 
> 时间：2013-01-25T10:24:18.320
> 
> 标签：c#, javascript, asp.net

在这个场景中，我有一个文本框和一个标签，其标签是文本框中剩余字符的倒计时。例如“剩余 239 个字符”。

我个人想多次使用javascript函数，所以我想将变量传递给函数。这些是，maxlength（用于长度），文本框（用于字段）和标签（用于计数器标签）。

但是，我遇到的问题是这根本行不通。只是为了确保它不仅仅是一个 IE 的东西，我在 Firefox 18 中对其进行了测试，并且它也在标签不变的地方产生了相同的结果......这几乎就像 onKeyUp 方法被调用了一样。

反正我的代码。

**JavaScript**

```
<script type="text/javascript">
    function countCharacters(textbox, label, maxcount) {
        var count = parseInt(document.getElementById(textbox).value.length);
        document.getElementById(label).innerHTML = maxcount - count;
    } 
```

**标签和文本框**

```
 <asp:TextBox ID="tbComment01" runat="server" CssClass="txt" TextMode="MultiLine" Width="500px" Visible="false" MaxLength="500"></asp:TextBox>
        <br />
        <asp:Label ID="lbCommentCount01" runat="server" Text="Label" Visible="false" CssClass="size11_text_blurb"></asp:Label> 
```

**代码背后**

```
tbComment01.Attributes.Add("onKeyUp", "countCharacters(" + tbComment01.ClientID + "," + lbCommentCount01.ClientID + ", 500)"); 
```

大家干杯！

特伦特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:38:58.077

看起来这是由于 lbCommentCount01 仍然是`Visible="false"`服务器端，当`Visible="false"`，控件没有呈现到页面。（这是为了节省带宽。）

如果您想让控件最初不可见，但在 javascript 中将其变为可见，请确保使用`style="display:none;"`并在代码中将其删除：

```
document.getElementById('yourid').style.display = ''; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:46:33.450

问题是因为您的函数的参数没有引号。因此它传递的是 HTML 元素对象，而不是它们的 Id。因此，您使用`getElementById`的是对象而不是 ID [应该是字符串]

之前，你的功能看起来像

```
onKeyUp="countCharacters(tbComment01,lbCommentCount01, 500)" 
```

因此传递`HTMLTextAreaElement`而不是字符串“tbComment01”

并且应该是

```
onKeyUp="countCharacters('tbComment01','lbCommentCount01', 500)" 
```

这应该可以解决它，请注意我已经添加了来自代码隐藏的单引号

```
tbComment01.Attributes.Add("onKeyUp", "countCharacters('" + tbComment01.ClientID + "','" + lbCommentCount01.ClientID + "', 500)"); 
```

或更好

```
tbComment01.Attributes.Add("onKeyUp",String.Format("countCharacters('{0}','{1}', 500) ", tbComment01.ClientID, lbCommentCount01.ClientID) 
```

# ms-access - 将手动生成的 RecordSet 传递给 SubReport

> ID：14519804
> 
> 赞同：1
> 
> 时间：2013-01-25T10:24:26.400
> 
> 标签：ms-access

在 Microsoft Access 2007 中是否可以手动生成 RecordSet 对象并将对象传递给 Microsoft Access 报表和子报表？

我想要一个表单，用户在该表单上单击一个按钮，OnClick 事件会动态创建两个 RecordSet，打开一个 Report 并将第一个 RecordSet 附加到 Report 并将第二个 RecordSet 附加到该 Report 的 SubReport。然后生成/显示报告。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:26:53.673

您可以将表单或报表的记录源设置为 SQL 字符串。您还可以使用 OpenForm 或 OpenReport 的 WHERE 参数根据现有查询或表过滤表单或报表。最后，您可以将表单的记录集设置为现有的记录集，但这比将记录源设置为 sql 稍微复杂一些。

```
 sSQL = "SELECT [" & Me.AField & "] FROM [" & Me.ATable & "] " _
       & "WHERE [" & MeAnotherField & "] " & Me.Operator & Me.Value

  Forms!AnotherForm.Recordsource = sSQL 
```

断开连接的记录集

```
Private Sub Form_Load()
Set rs = New ADODB.Recordset ''CreateObject("ADODB.RECORDSET")

 With rs
    'Set .ActiveConnection = cn
    .LockType = adLockOptimistic
    .CursorType = adOpenKeyset
 End With

'Create arrays from the lists
asL1 = Split("a,b,c,", ",")
asL2 = Split("b,e,c,d", ",")

'Create a disconnected recordset
rs.Fields.Append "Srt", adVarChar, 25
rs.Fields.Append "L1", adVarChar, 25
rs.Fields.Append "L2", adVarChar, 25

rs.Open

'Add list 1 to the recordset
For i = 0 To UBound(asL1)
    rs.AddNew Array("Srt", "L1"), Array(asL1(i), asL1(i))
    rs.Update
Next

rs.Sort = "Srt"

Set Me.Recordset = rs
Set rs = Nothing
Set cn = Nothing
End Sub 
```

# javascript - 有什么办法可以减少 ExtJS 的冗长

> ID：14519806
> 
> 赞同：1
> 
> 时间：2013-01-25T10:24:29.867
> 
> 标签：javascript, performance, optimization, extjs, extjs4.1

ExtJS 比 jQuery 更冗长，与 jQuery 相比，它让你编写更多的东西来做某事。我知道我们不应该将 jQuery 与 ExtJS 进行比较，但因为 ExtJS 是最完整的 Javascript UI 框架，而 jQuery 是库。但是在使用 jQuery 很长一段时间后，当我们迁移到 ExtJS 时，我们的工作效率似乎降低了。

```
var panel = Ext.create('Ext.panel.Panel',{
        height: 500,
        width: 500,
        renderTo: Ext.getBody(),
        ... 
```

我们不能在这里保存一些击键吗？在表单和其他组件中创建文本框也是如此。

**编辑**

**@详细代码：**

```
function createPanel(){
    var panel = Ext.create('Ext.panel.Panel',{
        height: 500,
        width: 500,
        renderTo: Ext.getBody(),
        layout: {
            type: 'vbox',
            align: 'stretch'
        },
        items: [{
            xtype: 'tabpanel',
            itemId: 'mainTabPanel',
            flex: 1,
            items: [{
                xtype: 'panel',
                title: 'Users',
                id: 'usersPanel',
                layout: {
                    type: 'vbox',
                    align: 'stretch'
                },
                tbar: [{
                    xtype: 'button',
                    text: 'Edit',
                    itemId: 'editButton'
                }],
                items: [{
                    xtype: 'form',
                    border: 0,
                    items: [{
                        xtype: 'textfield',
                        fieldLabel: 'Name',
                        allowBlank: false
                    }, {
                        xtype: 'textfield',
                        fieldLabel: 'Email',
                        allowBlank: false
                    }],
                    buttons: [{
                        xtype: 'button',
                        text: 'Save',
                        action: 'saveUser'
                    }]
                }, {
                    xtype: 'grid',
                    flex: 1,
                    border: 0,
                    columns: [{
                        header: 'Name',
                        dataIndex: 'Name',
                        flex: 1
                    }, {
                        header: 'Email',
                        dataIndex: 'Email'
                    }],
                    store: Ext.create('Ext.data.Store',{
                        fields: ['Name', 'Email'],
                        data: [{
                            Name: 'Indian One',
                            Email: 'one@qinfo.com'
                        }, {
                            Name: 'American One',
                            Email: 'aone@info.com'
                        }]
                    })
                }]
            }]
        },{
            xtype: 'component',
            itemId: 'footerComponent',
            html: 'Footer Information',
            extraOptions: {
                option1: 'test',
                option2: 'test'
            },
            height: 40
        }]
    });
} 
```

**@Compact 代码**

```
// Main global object holding
var q = {
    // config object templates
    t: {
        layout: function(args) {
            args = args || {};
            var o = {};
            o.type = args.type || 'vbox';
            o.align = args.align || 'stretch';
            return o;
        },
        panel: function(args) {
            args = args || {};
            var o = {};
            o.xtype = 'panel';
            o.title = args.title || null;
            o.id = args.id || null;
            o.height = args.height || null;
            o.width = args.width || null;
            o.renderTo = args.renderTo || null;
            o.tbar = args.tbar || null;
            o.layout = args.layout || q.t.layout();
            o.items = args.items || [];
            return o;
        },
        button: function(text, args) {
            args = args || {};
            var o = {};
            o.xtype = 'button';
            o.text = text;
            o.itemId = args.itemId;
            return o;
        },
        tabPanel: function(args) {
            args = args || {};
            var o = {};
            o.xtype = 'tabpanel';
            o.itemId = args.itemId;
            o.flex = args.flex;
            o.layout = args.layout;
            o.tbar = args.tbar;
            o.items = args.items || [];
            return o;
        },
        form: function(args) {
            args = args || {};
            var o = {};
            o.xtype = 'form';
            o.border = args.border || 0;
            o.items = args.items || [];
            o.buttons = args.buttons || [];
            return o;
        },
        grid: function(args) {
            args = args || {};
            var o = {};
            o.xtype = 'grid';
            o.flex = args.flex || 1;
            o.border = args.border || 0;
            o.columns = args.columns || [];
            o.store = args.store || null;
            return o;
        },
        gColumn: function(header, dataIndex, args) {
            args = args || {};
            var o = {};
            o.header = header;
            o.dataIndex = dataIndex;
            o.flex = args.flex || undefined;
            return o;
        },
        fTextBox: function(label, optional, args) {
            args = args || {};
            var o = {};
            o.xtype = 'textfield';
            o.fieldLabel = label;
            o.allowBlank = optional || true;
            return o;
        },
        component: function(args) {
            args = args || {};
            var o = {};
            o.xtype = 'component';
            o.itemId = args.itemId;
            o.html = args.html;
            o.extraOptions = args.extraOptions;
            return o;
        }
    },

    // Helper methods for shortening Ext.create for containers.
    h: {
        panel: function(args) {
            return Ext.create('Ext.panel.Panel',
            args);
        }
    }
};
function createPanel(){
    var panel = q.h.panel({
        height: 500,
        width: 500,
        renderTo: Ext.getBody(),
        layout: q.t.panel(),
        items: [q.t.tabPanel({
            itemId: 'mainTabPanel',
            items: [q.t.panel({
                title: 'Users',
                id: 'usersPanel',
                tbar: [
                    q.t.button('Edit',{itemId: 'editButton'})
                ],
                items: [
                    q.t.form({
                        items: [ q.t.fTextBox('Name') , q.t.fTextBox('Email')],
                        buttons: [ q.t.button('Save', {action:'saveUser'} )]
                    }),
                    q.t.grid({
                    columns: [ q.t.gColumn('Name','name'), q.t.gColumn('Email', 'email', {flex: null}) ],
                    store: Ext.create('Ext.data.Store',{
                        fields: ['name', 'email'],
                        data: [{
                            name: 'Indian One',
                            email: 'one@qinfo.com'
                        }, {
                            name: 'American One',
                            email: 'aone@info.com'
                        }]
                    })
                })]
            })]
        }),
            q.t.component({
                itemId: 'footerComponent',
                html: 'Footer Information',
                extraOptions: {
                    option1: 'test',
                    option2: 'test'
                },
                height: 40
            })
        ]
    });
} 
```

通过使用@Compact 代码，它可以节省大约 40% 的行数，例如这里的“createPanel”函数。我希望每个人都想出不同的想法，创建配置对象是我的第一个想法，但我希望它是我可以覆盖的东西，所以我想出了上述方法。

我确实对函数和每个 Firebug（分析功能）进行了基准测试，非紧凑版本需要 178 毫秒，而紧凑版本需要 184 毫秒。

所以是的，肯定会花费更多时间，从这个示例中看起来值得多花 8 毫秒，但不确定我们何时会使用这种方法构建企业应用程序。有没有更好的方法？，如果有，请分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:44:36.110

如果不是真的需要使用 xtypes：

```
{
   xtype: 'panel',
   height: 500,
   width: 500,
   renderTo: Ext.getBody()
} 
```

或创建自己的默认配置

```
var panelCfg = {
   height: 500,
   width: 500,
   renderTo: Ext.getBody()
} 
```

并使用 ExtApplyIf 应用

```
Ext.ApplyIf({xtype:'panel'}, panelCfg); 
```

或获取实例

```
Ext.widget('panel', panelCfg); 
```

还有更多的方法。

您将明确需要自己编写一些结构和/或帮助程序来封装您的默认配置，甚至直接从现有的类中继承您自己的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:49:25.670

除了 sra 所说的，没有什么能阻止你创建一些速记方法。

使用带有扩展/混合配置的简单生成函数有很大帮助。

# graph - 查找 2 个顶点之间的路径时 orient DB 的检索时间

> ID：14519807
> 
> 赞同：2
> 
> 时间：2013-01-25T10:24:30.253
> 
> 标签：graph, gremlin, orientdb

我们有一个用例，我们需要使用图形数据库。周围有

10000 个节点和 1000000 条边（大约）。

现在我需要像这样查询。对于任何 2 个顶点，找到它们之间的所有可能路径。

origntDb 需要多长时间？我希望检索时间非常短。这是否受 orientDB 支持？

两个顶点的距离大约为 20。但每个顶点可能有大约 10 个出边。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T16:37:55.970

对于 Gremlin 中顶点 1 和 2 之间的所有路径，请执行以下操作：

```
g.v(1).out.loop(1){true}{it.object.id==2}.path 
```

当然，如果你有循环，所有可能的路径都是无限的，所以你可能想要这样做：

```
g.v(1).out.loop(1){true}{it.object.id==2}.path[0..100] 
```

...获得最多 100 条路径。您也可以这样做来删除循环路径：

```
g.v(1).out.simplePath.loop(2){true}{it.object.id==2}.path[0..100] 
```

马尔科。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:14:38.150

使用 OrientDB 捆绑的 shortestPath() 函数：

```
select shortestPath(#8:32, #8:10) 
```

其中 2 个 RID 是 2 个节点的记录 ID。

# tridion - 如何在不覆盖所有其他设置的情况下将子出版物或其他出版物的发布 dcp 设置到不同的位置

> ID：14519810
> 
> 赞同：8
> 
> 时间：2013-01-25T10:24:37.437
> 
> 标签：tridion, tridion-2011, tridion-content-delivery, tridion-storage-extension

我正在尝试配置 cd_storage 并在设置动态组件表示时遇到问题，因为它们被孩子覆盖并从每个出版物发布到同一个文件夹。

我知道我们可以定义发布级别设置，但是一旦我们定义了它，它就会期望我们定义该发布标签内的所有内容。我们不想在发布标签中定义每件事 50 次。

任何人都可以提出相同的最佳做法。

这是用于 sdl tridion 2011 sp1

提前致谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T10:59:11.217

您的问题在于您如何为用于存储 ComponentPresentations 的存储定义存储配置。存储的定义中有一个标志可以准确设置这种类型的行为：`defaultFilesystem`. 您可能已将其设置为`false`导致所有出版物中的所有 ComponentPresentations 都存储在同一位置。通过将此标志设置为，`true`您将从存储在不同位置的不同出版物中获取 ComponentPresentations。我将举一个例子来说明它在 cd_storage_conf.xml 中是如何工作的：

```
<Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" Id="defaultCPs" defaultFilesystem="true">
        <Root Path="c:\temp\cpRoot" />
</Storage>
....
<ItemTypes defaultStorageId="defaultFile" cached="true">
    <Item typeMapping="ComponentPresentation" itemExtension=".jsp" storageId="defaultCPs"/>
.... 
```

这真的很容易维护，并且会使 Broker 将 ComponentPresentations 存储到如下位置：（`c:\temp\cpRoot\pub109\dcp\jsp\***`这里我有`publicationId=109`）。

希望这可以帮助。

# mysql - 按属性筛选产品

> ID：14519812
> 
> 赞同：2
> 
> 时间：2013-01-25T10:24:39.660
> 
> 标签：mysql, sql

我有以下四个表，用于每个产品的产品过滤器场景。每个产品可以有多个属性，这些属性可以有多个值。

如何为多个属性搜索的用户请求构建 SQL 查询，例如

```
CPU: >1000
Price <700 
```

我的最后一个 Jquery 是为了性能而损坏：

```
SELECT
  attributes_vals.*, handys.*
FROM
  handys join handy_has_vals on handys.id=handy_has_vals.handy_id 
  join attributes_vals on attributes_vals.id=handy_has_vals.val_id 
WHERE
  `attributes_vals`.`attr_id`=374 
  AND(`attributes_vals`.`vals` >=1000 AND `attributes_vals`.`vals` >=1500) 
  OR `attributes_vals`.`attr_id`=68  AND(`attributes_vals`.`vals`='YES')
  OR `attributes_vals`.`attr_id`=11  AND( `attributes_vals`.`vals` LIKE 'GPRS%') 
```

小提琴和测试：http: [//SQLFiddle.com/# !2/bba51/2](http://sqlfiddle.com/#!2/bba51/2)

**这是表格**

```
handys
id  |   name    |   modell
1   |   Samsung |   galaxy A
2   |   Samsung |   galaxy B
3   |   Samsung |   galaxy C
4   |   Samsung |   galaxy D

handy_has_vals
handy_id    |   attr_id |   val_id
1           |   1       |   1
1           |   2       |   3
1           |   3       |   6
1           |   4       |   11
2           |   1       |   2
2           |   2       |   4
2           |   3       |   7
2           |   4       |   10
3           |   1       |   1
3           |   2       |   5
3           |   3       |   8
3           |   4       |   10
4           |   1       |   2
4           |   2       |   3
4           |   3       |   9
4           |   4       |   11

attributes_vals
id  |   attr_id |   vals
1   |   1       |   'YES'
2   |   1       |   'No'
3   |   2       |   '1200'
4   |   2       |   '1000'
5   |   2       |   '1500'
6   |   3       |   '300'
7   |   3       |   '350'
8   |   3       |   '800'
9   |   3       |   '550'
10  |   4       |   'YES'
11  |   4       |   'No'

attributes
id  |   attr_name
1   |   'GPS'
2   |   'CPU'
3   |   'Price'
4   |   'WLAN' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:32:47.463

它应该类似于：

```
SELECT * FROM handys h
INNER JOIN handy_has_vals hv ON h.id = hv.handy_id
INNER JOIN attributes a ON hv.attr_id = a.id
INNER JOIN attributes_vals av ON av.attr_id = a.id
WHERE ( a.attr_name = 'CPU' AND av.vals > '1000' ) or (  a.attr_name = 'Price' AND av.vals < '700' ) 
```

而且，为了通过数字而不是字符串进行比较：

```
SELECT * FROM handys h
INNER JOIN handy_has_vals hv ON h.id = hv.handy_id
INNER JOIN attributes a ON hv.attr_id = a.id
INNER JOIN attributes_vals av ON av.attr_id = a.id
WHERE ( a.attr_name = 'CPU' AND  cast(av.vals AS UNSIGNED) > '1000' ) or (  a.attr_name = 'Price' AND cast(av.vals AS UNSIGNED) < '700' ) 
```

但是，`CAST`在 where 子句中使用 可以保证您进行全表扫描，如果您有大量记录，这将大大降低性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:37:52.313

试试这个查询

```
SELECT 
    attributes_vals . *, handys . *
from
    handys
        join
    handy_has_vals ON handys.id = handy_has_vals.handy_id
        join
    attributes_vals ON attributes_vals.id = handy_has_vals.val_id
WHERE
    attributes_vals.attr_id IN (68, 11, 374)
    AND ((attributes_vals.vals >= 1000 AND attributes_vals.vals >= 1500) 
           OR attributes_vals.vals = 'YES' OR attributes_vals.vals LIKE 'GPRS%') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:44:09.603

试试这样

```
SELECT 
    attributes_vals . *, handys . *
from
    handys
        join
    handy_has_vals ON handys.id = handy_has_vals.handy_id
        join
    attributes_vals ON attributes_vals.id = handy_has_vals.val_id
WHERE
    ((attributes_vals.vals >= 1000 AND attributes_vals.vals >= 1500) 
           OR attributes_vals.vals = 'YES' OR attributes_vals.vals LIKE 'GPRS%') 
```

# iphone - 如何为 UITableViewCell 的 ImageView 设置固定大小？

> ID：14519814
> 
> 赞同：1
> 
> 时间：2013-01-25T10:24:44.077
> 
> 标签：iphone, ios, cocoa-touch, uitableview, uiimageview

对于我的应用程序的联系人视图，我在表格视图中添加了基于他的电子邮件 ID 的个人用户图像。由于每个用户的图像大小不同，图像视图并非对所有用户都是唯一的，有些图像视图的宽度更大，所以我将 UItableViewCell 的帧大小设置为固定宽度，但宽度大小仍然不同。

```
 [cell.imageView setFrame:CGRectMake(0, 0, 55, 55)]; 
```

我应该怎么办？我需要添加新的图像视图作为单元格的子视图吗？任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T11:03:56.863

UITableView 的 imageView 属性是只读的。您可以在设置为单元格的 imageView 之前调整图像大小。要调整图像大小，您可以从此[StackOverflow 答案](https://stackoverflow.com/a/5811721/954983)中获得帮助。

此外，如果您从 Web 环境加载图像，您可以使用我的 AFNetworking 分支，我在 UIImageView 扩展中添加了图像大小调整选项。[https://github.com/polatolu/AFNetworking](https://github.com/polatolu/AFNetworking)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:34:26.097

您应该设置 imageview 的属性，以便以不同的尺寸显示不同的图像。

例如，

```
<imageview_name>.contentMode = UIViewContentModeScaleAspectFit; 
```

享受编程！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T15:13:26.433

子类 UITableViewCell 并覆盖此方法；

```
- (void)layoutSubviews {

    [super layoutSubviews];

    self.imageView.frame = CGRectMake(0,0,55,55);

    //Any additional setting that you want to do with image view

    [self.imageView setAutoresizingMask:UIViewAutoresizingNone];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-27T10:10:26.177

我正在使用相同的 JSON 文件来填充 UITableView，这是我在 CustomCell 中用于通用应用程序的内容：

```
- (void)layoutSubviews {
    [super layoutSubviews];
    if (UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPad) {
        self.imageView.frame = CGRectMake(0,0,300,100);

    }else if  (UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPhone){
        self.imageView.frame = CGRectMake(0,0,180,60);
    }
    float limgW =  self.imageView.image.size.width;
    if(limgW > 0) {

        if (UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPad) {
            self.textLabel.frame = CGRectMake(320,self.textLabel.frame.origin.y,self.textLabel.frame.size.width,self.textLabel.frame.size.height);

        }else if  (UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPhone){
            self.textLabel.frame = CGRectMake(182,self.textLabel.frame.origin.y,self.textLabel.frame.size.width,self.textLabel.frame.size.height);
        }

    }
} 
```

# android - 以编程方式设置编辑文本值，android？

> ID：14519816
> 
> 赞同：-1
> 
> 时间：2013-01-25T10:24:48.677
> 
> 标签：android

我对 android 很陌生，`editText`我希望在其中设置该设备的当前手机号码，如果其他礼物离开的话。

我知道我可以通过这种方式获取当前的手机号码：

```
TelephonyManager tm = (TelephonyManager)getSystemService(TELEPHONY_SERVICE); 
String number = tm.getLine1Number(); 
```

但是我如何对android*说*，以便它可以将`editText`字段设置为当前的手机号码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:25:44.143

首先，`EditText`通过它的 id 找到你的：

```
 EditText <YourEditText> = (EditText)findViewById(R.id.<YourEditTextID>);

<YourEditText>.setText(number);  //your String 
```

# javascript - 对 javascript / jquery 变量范围感到困惑

> ID：14519817
> 
> 赞同：1
> 
> 时间：2013-01-25T10:24:59.990
> 
> 标签：javascript, jquery

下面代码中的 pastPath 变量让我感到困惑。我通常使用 C# 和 MVC，这当然意味着我使用 HTML、JavaScript 和 JQuery 以及其他相关的 Web/移动技术。

当我运行此代码并单击 .moreBtn pastPath 报告时，它会按照我的意图设置为 URL。然而，当我尝试使用 .backBtn 来设置 URL 并强制我的浏览器返回上一页时，我得到的不是过去路径未定义，或者它被设置为 hello。

我知道我在这里理解范围有问题。我已阅读有关 JavaScript 范围的文章，但我想知道是否有人可以解决此问题并解释我如何将我的 URL 从第一个函数获取到第二个函数。

稍后我将详细了解 JavaScript 中的范围，但它似乎与大多数其他语言中的范围非常不同，我目前没有时间正确研究它。

```
$(document).ready(function ()
{
    pastPath = "hello";

    $(".moreBtn").click(function ()
    {
        var controller = $(".moreBtn").data('ctrl');
        var action = $(".moreBtn").data('action');
        loc = GetPathDetails("full"); //This simply returns the part of the URL I need.
        pastPath = loc;
        alert(pastPath);
        var fullPath = loc + "/" + controller + "/" + action;
        window.location = fullPath;
    });

    $(".backBtn").click(function ()
    {
        alert(pastPath);
        //window.location = pastPath;
    });

}); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T10:42:11.600

单击 .moreBtn 会更改页面，因此您存储在 pastPath 中的任何数据都将丢失。

看看 dom 存储，[https://developer.mozilla.org/en-US/docs/DOM/Storage](https://developer.mozilla.org/en-US/docs/DOM/Storage)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:42:35.740

*   当您使用 jQuery 时，在单击（或其他事件）处理程序中时，“this”将引用触发事件的 DOM 元素。

*   如果你不使用“var pastPath”声明你的变量，那么 pastPath 将是一个“全局变量”，这意味着它将是全局对象的一个​​属性。

`this.pastPath`在您的点击处理程序中，无论您正在访问还是只是访问，您都不会访问相同的变量`pastPath`（除非`this`引用全局对象，因为它是由 jQuery 在您单击的特定 DOM 元素上触发的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T11:13:24.143

当您单击 $(".moreBtn") 时，它会将您重定向到`fullpath`并且此重定向再次设置 pastPath = "hello"，因此如果您想要下一页上的过去路径值，请将其作为查询字符串发送，然后将其用于您的后退按钮。

就像是 ：

```
 $(document).ready(function ()
    {
       var pastPath = "hello";

        $(".moreBtn").click(function ()
        {
        var controller = $(".moreBtn").data('ctrl');
        var action = $(".moreBtn").data('action');
        loc = GetPathDetails("full"); //This simply returns the part of the URL I need.
        pastPath = loc;
        alert(this.pastPath);
        var fullPath = loc + "/" + controller + "/" + action + " ?pastpath="+loc;
        window.location = fullPath;
        });

        $(".backBtn").click(function ()
        {
                   var path = window.location + ''.split('pathname=');
                   alert(path1[1]);
                });

    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T10:47:13.423

众所周知，变量有两个作用域，即局部作用域和全局作用域。

全局范围：在函数外部以简单的术语（但不完全是）声明或定义的变量。

局部范围：在函数内部声明的变量。

所以 $(document).ready(function (){}); 也是一个函数，因此在此之外声明变量将解决问题。但避免在函数中使用 var pastPath ，这可能反过来将该变量用作局部变量。

所以你的最终代码将变成 var pastPath = "hello"; $(文档).ready(函数() {

```
$(".moreBtn").click(function() {
    var controller = $(".moreBtn").data('ctrl');
    var action = $(".moreBtn").data('action');
    loc = GetPathDetails("full");
    //This simply returns the part of the URL I need.
    pastPath = loc;
    alert(pastPath);
    var fullPath = loc + "/" + controller + "/" + action;
    window.location = fullPath;
});

$(".backBtn").click(function() {
    alert(pastPath);
    //window.location = pastPath;
}); 
```

});

# python - django-cumulus：找不到同步静态命令

> ID：14519819
> 
> 赞同：1
> 
> 时间：2013-01-25T10:25:06.563
> 
> 标签：python, django, python-module

我在我的应用程序设置文件中安装了 -`pip install django-cumulus`以及所有必要的东西。但是当我这样做时，`django-admin.py syncstatic`我得到了`Unknown command: 'syncstatic'`。你能指点我吗。我究竟做错了什么。

我关注的文档 - [http://pypi.python.org/pypi/django-cumulus](http://pypi.python.org/pypi/django-cumulus)

我的环境细节：

```
Python 2.7.3
Django 1.4.2
django-cumulus 1.0.5
python-cloudfiles 1.7.10 
```

**编辑：**

当我`manage.py`从我的项目中执行此操作时，出现以下错误

```
File "/home/jimit/python/environments/forkodecrm/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
        self.fetch_command(subcommand).run_from_argv(self.argv)   
File "/home/jimit/python/environments/forkodecrm/local/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
        self.execute(*args, **options.__dict__)   
File "/home/jimit/python/environments/forkodecrm/local/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
        output = self.handle(*args, **options)   
File "/home/jimit/python/environments/forkodecrm/local/lib/python2.7/site-packages/cumulus/management/commands/syncstatic.py", line 54, in handle
        self.sync_files()   
File "/home/jimit/python/environments/forkodecrm/local/lib/python2.7/site-packages/cumulus/management/commands/syncstatic.py", line 60, in sync_files
        servicenet=self.USE_SERVICENET)   File "/home/jimit/python/environments/forkodecrm/local/lib/python2.7/site-packages/cloudfiles/__init__.py", line 98, in get_connection
        return Connection(*args, **kwargs)   
File "/home/jimit/python/environments/forkodecrm/local/lib/python2.7/site-packages/cloudfiles/connection.py", line 84, in __init__
        raise TypeError("Incorrect or invalid arguments supplied") 
TypeError: Incorrect or invalid arguments supplied 
```

我在我的 settings.py 中包含了以下设置

```
# cumulus rackspace config 

CUMULUS = {
    'USERNAME': 'myusername',
    'CUMULUS_API_KEY': 'myapikey',
    'CUMULUS_CONTAINER': 'mycontainer',
    'STATIC_CONTAINER': 'mycontainer',
    'USE_SERVICENET': False, # whether to use rackspace's internal private network
    'CUMULUS_FILTER_LIST': [] # a list of files to exclude from sync } 

DEFAULT_FILE_STORAGE = 'cumulus.storage.CloudFilesStorage' 

STATICFILES_STORAGE = 'cumulus.storage.CloudFilesStaticStorage' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:23:56.323

总而言之-您需要使用`manage.py`本地安装的项目，以便它可以使用适当的设置（不是`django-admin.py`文档中所述）。

如果`TypeError`未设置身份验证字段，则会引发 。

你的代码在这里：

```
CUMULUS = {
...
    'CUMULUS_API_KEY': 'myapikey',
    'CUMULUS_CONTAINER': 'mycontainer',
...
} 
```

应该是（注意没有`CUMULUS_`前缀）：

```
CUMULUS = {
...
    'API_KEY': 'myapikey',
    'CONTAINER': 'mycontainer',
...
} 
```

# javascript - 如何检查实际活动元素的类别

> ID：14519823
> 
> 赞同：1
> 
> 时间：2013-01-25T10:25:13.483
> 
> 标签：javascript, jquery, class

我有一些轮播插件。一键点击后，有一个元素具有活动类。carousel 上的所有元素也都有类`available`或`no_available`. 现在我需要检查这个`active`元素，如果它有类`available`做某事，如果是`no_available`做其他事情。这个活动的类和元素在轮播点击后发生变化。所以我这样做了，我只有一个条件响应，第一个。你能帮我吗？

```
carousel_images = $("#ajax-carousel"),
carousel_images_active_element = carousel_images.find("li.active");

carousel_controls_button.live('click', function(e){
    if (carousel_images_active_element.is('.available')){
        console.log('run_01');
        bottom_panel.fadeOut('fast');
    }
    else if (carousel_images_active_element.is('.no_available')){
        console.log('run_02');
    }
}); 
```

html

```
<ul>
   <li id="01" class="active no_available"></li>
   <li id="02" class="available"></li>
   <li id="03" class="available"></li>
   <li id="04" class="no_available"></li>
</ul> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:26:43.487

> 现在我需要检查这个活动元素，如果它有可用的类做一些事情，如果是 no_available 做一些别的事情。

使用[hasClass()](http://api.jquery.com/hasClass/)

尝试这个

```
carousel_controls_button.on('click', function(e){
   if (carousel_images_active_element.hasClass('available')){
     console.log('run_01');
     bottom_panel.fadeOut('fast');
   }
   else if (carousel_images_active_element.hasClass('no_available')){
    console.log('run_02');
 }
}); 
```

`live()`不推荐使用`on()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:34:40.670

请使用 jquery 的 hasClass() 函数，它可以让您知道指定元素是否具有指定的类。

例如，如果您想知道下面的 div 元素有一个“活动”类，那么请按如下方式使用它

```
<div id="target-ele" class="class1 class2 active"></div> 
```

$('target-ele').hasClass('active'); // 这将返回 true，因为它具有“活动”类

```
<div id="target-ele" class="class1 class2 in-active"></div> 
```

$('target-ele').hasClass('active'); // 这将返回 false，因为它没有“活动”类

所以最后 if($('target-ele').hasClass('active')) 在有活动类时执行功能 else 在没有活动类时执行功能

希望这能满足您的要求:)

# scala - Heroku sbt 游戏控制台很慢

> ID：14519824
> 
> 赞同：3
> 
> 时间：2013-01-25T10:25:15.067
> 
> 标签：scala, heroku, playframework-2.0, sbt

嗨，我在 heroku 上使用 1 个网络测功机运行 play framework 2.1 RC1（但这适用于 sbt）。

我经常想使用命令访问 scala REPL`heroku run sbt play console`以进行一些操作。

一切正常，但从命令到 REPL 大约需要 10 分钟。Eveything 的编译速度比我部署时慢 10 倍。

有什么办法可以更快地进入heroku中的REPL吗？还是启动一个 REPL 实例然后附加到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T20:55:36.430

我在 Heroku 上使用 Play 2.1.1，并且构建时间也很长。部署经常被中止（Slug 编译目前限制为 15 分钟）。

事实证明，我当时使用的 sbt 0.12.3 非常慢（内存问题）。大多数这些问题已在 sbt 0.12.4 中得到修复，速度更快。不幸的是，Heroku 官方目前只支持 SBT 0.11.0 - 0.12.3。

但是，通过如下更改 buildpack URL，您可以使用 sbt 0.12.4 进行构建：

`$ heroku config:set BUILDPACK_URL=https://github.com/heroku/heroku-buildpack-scala.git#sbt-0.12.4`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T17:05:07.260

您正在启动一项远程服务，并且只有 1 个测功机（这意味着 1 小时后它会进入“睡眠”状态，并且唤醒它必须冷启动测功机）。当然它很慢。

当然，10 分钟有点太多了（除非你有一个庞大的项目、缓慢的连接或其他一些外部因素（比如平台本身的问题）。

无论如何，只有 Heroku 可以解决这个问题，你应该向他们开一张支持票。

# javascript - 如何在javascript中检查鼠标指针是顺时针还是逆时针移动

> ID：14519828
> 
> 赞同：3
> 
> 时间：2013-01-25T10:25:28.217
> 
> 标签：javascript, html, canvas

我想用javascript检查鼠标是在html5画布上顺时针还是逆时针移动，但不知道如何继续。

**更新**
我所做的是我取了 3 个 XY 坐标并计算了第一个点和最后一个点之间的角度，正如**[本文](https://stackoverflow.com/questions/3309617/calculating-degrees-between-2-points-with-inverse-y-axis)**和**[这篇](https://stackoverflow.com/questions/7586063/how-to-calculate-the-angle-between-two-points-relative-to-the-horizontal-axis)**文章所建议的那样。

```
var resultX = p2x - p1x;
var resultY = p2y - p1y;
var angle = Math.atan2(resultY, resultX) * 180 / Math.PI; 
```

但是发生的情况是，当我顺时针移动鼠标时，结果为正，直到鼠标向东南移动，但是当鼠标在顺时针移动的同时向西南移动时，角度变为负，这不应该发生，因为鼠标仍在顺时针移动。

请有任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T10:31:59.113

我假设您知道 mousemove 事件，并在浏览器窗口中获取鼠标的 X/Y 位置？

我将采取的方法是将鼠标的最后 5-6 个坐标存储在一个数组中，然后执行圆形拟合算法来找到正在旋转的点。

由此，可以找到从第一个点到圆心，再到最后一个点的角度，旋转方向取决于它是正还是负。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-25T14:11:45.013

首先，您可能需要一个函数来提供两个向量之间的角度。以下是它的编写方法：

两个向量的叉积的大小等于向量的大小乘以它们之间夹角的正弦的乘积。

令 A = 来自 P1 的向量 --> P2；令 B = 来自 P2 的向量 --> P3；设θ为角度

|A×B| = |A| |B| sin(θ) 因此 sin(θ) = ( |A × B| ) / (|A| |B| )

两个二维向量的叉积的大小计算如下：|A × B| = Ax By - Bx Ay

并且两个向量的点积的大小等于向量的大小乘以它们之间夹角的余弦的乘积。A·B = |A| |B| cos(θ) 因此 cos(θ) = (A·B) / ( |A| |B| )

点积计算如下： A·B = Ax Bx + Ay By

|一个| = sqrt( Ax Ax + Ay Ay ) |B| = sqrt( Bx Bx + By By )

这给了你 sin(θ) 和 cos(θ)。

您可以调用 atan2 从 sin(θ) 和 cos(θ) 中获取 θ。θ = atan2( sin(θ), cos(θ) )

现在在代码中：

```
/// <summary>
/// Calculates the angle between two 2-D vectors.
/// </summary>
/// <returns>angle in radians</returns>
static double AngleBetweenVectors( double Ax, double Ay, double Bx, double By )
{
    double magA = Math.Sqrt( Ax * Ax + Ay * Ay );
    double magB = Math.Sqrt( Bx * Bx + By * By );
    double magAmagB = magA * magB;
    if( magA * magB == 0 ) throw new Exception( "Vectors must be non-zero length" );
    double sinTheta = (Ax * By - Bx * Ay) / magAmagB;
    double cosTheta = (Ax * Bx + Ay * By) / magAmagB;
    double theta = Math.Atan2( sinTheta, cosTheta );
    return theta;
} 
```

结果以弧度为单位。乘以 180/Math.PI 即可获得学位。如果您发现由于您的坐标系而使顺时针和逆时针方向相反，只需将结果取负即可。

圆弧绘图函数使用 x 轴作为其参考点，因此您需要找到向量与 x 轴 (1,0) 之间的角度。您必须提供开始和结束角度。可能需要进行一点条件检查以验证弧线是否朝着您想要的方向前进，并且您可以根据需要调整角度，使 thetaStart > thetaEnd 或 thetaStart < thetaEnd。

你也想检查 [这个链接](https://gamedev.stackexchange.com/questions/22133/how-to-detect-if-object-is-moving-in-clockwise-or-counterclockwise-direction)

# python - Python：httplib getresponse 发出许多 recv() 调用

> ID：14519829
> 
> 赞同：5
> 
> 时间：2013-01-25T10:25:27.860
> 
> 标签：python, python-2.7, httplib

`getresponse``recv`在读取 HTML 请求的标头时发出许多调用。它实际上是`recv`针对每个字节发出的，这会导致许多系统调用。如何优化？

我在带有 strace 转储的 Ubuntu 机器上进行了验证。

**示例代码：**

```
conn = httplib.HTTPConnection("www.python.org")
conn.request("HEAD", "/index.html")
r1 = conn.getresponse() 
```

**strace 转储：**

```
sendto(3, "HEAD /index.html HTTP/1.1\r\nHost:"..., 78, 0, NULL, 0) = 78
recvfrom(3, "H", 1, 0, NULL, NULL)      = 1
recvfrom(3, "T", 1, 0, NULL, NULL)      = 1
recvfrom(3, "T", 1, 0, NULL, NULL)      = 1
recvfrom(3, "P", 1, 0, NULL, NULL)      = 1
recvfrom(3, "/", 1, 0, NULL, NULL)      = 1
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:28:33.240

```
r = conn.getresponse(buffering=True) 
```

在 Python 3.1+ 上没有`buffering`参数（它是默认值）。

# java - json简单解析器

> ID：14519830
> 
> 赞同：0
> 
> 时间：2013-01-25T10:25:29.973
> 
> 标签：java, json, parsing

**您好** ，我的 json 简单解析器有问题。我必须解析这样的东西

```
{"phoneNumber":"9874662222","name":"Иван","surname":"Иванов","key":"ivanov0"}{"phoneNumber":"9874662222","name":"Иван","surname":"Иванов","key":"ivanov1"}{"phoneNumber":"9874662222","name":"Иван","surname":"Иванов","key":"ivanov2"}{"phoneNumber":"9874662222","name":"Иван","surname":"Иванов","key":"ivanov3"}{"phoneNumber":"9874662222","name":"Иван","surname":"Иванов","key":"ivanov4"}{"phoneNumber":"9874662222","name":"Иван","surname":"Иванов","key":"ivanov5"}{"phoneNumber":"9874662222","name":"Иван","surname":"Иванов","key":"ivanov6"}{"phoneNumber":"9874662222","name":"Иван","surname":"Иванов","key":"ivanov7"}{"phoneNumber":"9874662222","name":"Иван","surname":"Иванов","key":"ivanov8"}{"phoneNumber":"9874662222","name":"Иван","surname":"Иванов","key":"ivanov9"} 
```

所以我有很多元素，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:53:04.207

无论您发布什么都不是 JSON。它是 JSON 列表。您的问题不太清楚，但尝试在循环中解析有效的 json。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:40:58.403

尝试阅读有关如何在您需要使用的编程语言中处理字符串的信息。了解 JSON，它是什么以及 JSON 语句应该是什么样子。显然，也要阅读解析器。尝试编写一些代码，然后向我们展示您编写的代码。

# eclipse - org.eclipse.ui.window.newEditor 的冲突

> ID：14519831
> 
> 赞同：0
> 
> 时间：2013-01-25T10:25:31.217
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, rcp

重新启动 RCP 应用程序后，我会收到此警告消息（错误日志） - Conflict for 'org.eclipse.ui.window.newEditor':HandlActivation...

如图所示—— ![在此处输入图像描述](../Images/03ff5017d6252db50d84d90bf5b26efe.png)

相同的原因可能是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T06:48:08.030

您使用的是 e4 还是 3.*。如果您使用的是 e4，可以使用应用程序编辑器（SHIFT+ ALT + F9）窗口轻松检查冲突。

# validation - Sencha Touch 2.1 - 使用模型进行表单验证

> ID：14519836
> 
> 赞同：2
> 
> 时间：2013-01-25T10:25:36.717
> 
> 标签：validation, sencha-touch, sencha-touch-2, sencha-touch-2.1

我是 Sencha Touch 的新手，正在尝试验证登录表单。我有一个简单的用户模型，有两个字段：电子邮件、密码。我创建了一些带有消息的验证规则：

```
Ext.define('FirstApp.model.User', {
    extend : 'Ext.data.Model',
    config : {
        fields : [{
            name : 'email',
            type : 'string'
        }, {
            name : 'password',
            type : 'password'
        }],

        validations : [{
            type : 'presence',
            name : 'email',
            message : "Enter email"
        }, {
            type : 'presence',
            name : 'password',
            message : "Enter Password"
        }, {
            type : 'format',
            name : 'email',
            matcher : /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,
            message : "Wrong Email Format"
        }]
    }
}); 
```

在 LoginForm 视图中，我想验证登录表单，但是当输入了错误的参数时，警报弹出窗口显示未定义而不是消息。输入正确的数据表格后发送。在这里您可以看到 LoginForm 代码：

```
Ext.define('FirstApp.view.login.LoginForm', {
    extend : 'Ext.form.FormPanel',
    xtype : 'loginpanel',
    requires : ['Ext.form.FieldSet', 'FirstApp.model.User', 'Ext.field.Email', 'Ext.field.Password'],

    config : {
        title : 'LOGIN',
        scrollable : 'vertical',
        items : [{
            xtype : 'fieldset',
            title : 'Login',
            defaults : {
                required : true,
            },
            items : [{
                xtype : 'emailfield',
                name : 'email',
                placeHolder : 'Email'
            }, {
                xtype : 'passwordfield',
                name : 'password',
                placeHolder : 'Password'
            }]
        }, {
            xtype : 'button',
            text : 'Log in',
            ui : 'confirm',
            handler : function() {
                var model = Ext.ModelMgr.create(this.up('formpanel').getValues(), 'FirstApp.model.User');

                var errors = model.validate(); console.log(errors);
                var message = '';

                if (errors.isValid()){
                    // Validation successful - show loader
                    Ext.Viewport.setMasked({
                        xtype:'loadmask',
                        message:'Logging in...'
                    });
                    // Login
                    this.up('formpanel').submit({
                        url: 'http://localhost/firstappweb/www/en/?do=login',
                        method: 'POST',
                        success: function(form, result) {
                            console.log(result);
                            Ext.Viewport.setMasked(false);
                        },
                        failure: function(form, result) {
                            console.log(result);
                            Ext.Viewport.setMasked(false);
                        }                       
                    });

                } else {
                    // Validation failed
                    console.log(errors.items);
                    Ext.each(errors.items, function(rec, i) {
                        message += rec.message+"<br />";
                    });
                    Ext.Msg.alert("Validate", message, function(){});
                    return false;
                }
            }
        }, {
            // Do not log in
            xtype : 'toolbar',
            docked : 'bottom',
            layout : {
                pack : 'center'
            },
            items : [{
                xtype : 'button',
                text : 'Do not log in',
                handler : function() {
                    Ext.Msg.alert("You do not want to log in?", 'Shame on you!', function() {
                    });
                    // this.push();
                }
            }]
        }]
    }
}); 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-26T07:30:33.617

我假设既然您已经完成了 console.log，`errors.items`您一定已经`rec.message`使用调试器看到了价值，以了解它为什么未定义。

无论如何，这就是我会做的：

```
var data="";
errors.each(function (item, index, length) {
  // Each item in the errors collection is an instance of the Ext.data.Error class.
  data = data + '|'+item.getField()+' - '+ item.getMessage() +'|';
});
Ext.Msg.alert("Validation Failed", data); 
```

# linux - ubuntu：升级软件（cmake）-版本消歧（本地编译）

> ID：14519841
> 
> 赞同：4
> 
> 时间：2013-01-25T10:25:53.390
> 
> 标签：linux, cmake, version, upgrade

我的机器上安装了 cmake 2.8.0（来自 ubuntu 包），二进制文件放在 /usr/bin/cmake 中。我需要将 cmake 版本升级到至少 2.8.2。ubuntu 版本很旧，但我现在无法升级它，因此我必须从源安装它。我已经下载了 cmake 2.8.2，按照[说明](http://www.cmake.org/cmake/help/install.html)进行操作，并`make install`使用 root 权限进行制作。现在我的机器上安装了两个并行的 cmake：

*   /usr/bin/cmake - 2.8.0
*   /usr/local/bin/cmake - 2.8.2

```
any_user@machine $ cmake --version
2.8.0

root@machine $ cmake --version
2.8.2

```

我应该怎么做才能摆脱 2.8.0（现在对我来说已经过时了）或者只是用 2.8.2 替换 2.8.0？我希望任何非用户都可以键入`cmake`（不指定路径）以获取更新版本。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:31:11.030

通常使用这些步骤（基本上对于任何自定义构建应用程序）：

首先，通过从其构建位置使用它来检查新构建的 cmake 是否正常工作。

当您确认它正在工作时，您可以使用以下方法正确删除 Ubuntu 版本：

```
apt-get remove cmake 
```

`make install`最后，使用命令安装较新的 cmake 。

在我们的例子中，由于您已经安装了自定义构建版本，您可能希望在删除 Ubuntu 软件包后再次重新安装 cmake，以防止 cmake 由于删除过程而被破坏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:02:03.250

You should use [checkinstall](https://help.ubuntu.com/community/CheckInstall) to install your package. It creates a package you can install on your system. This way the files you install are handled by the package manager and can be removed easily.
I think the old package will be removed automatically, when you give the package you create a newer version (I'm not sure here).

# linux - 将值重新分配给规范文件中的 %define 变量 - RPM

> ID：14519844
> 
> 赞同：3
> 
> 时间：2013-01-25T10:26:17.390
> 
> 标签：linux, rpm, specifications

当我们在规范文件中使用 %define 标记定义变量以使用 rpmbuild 命令构建 RPM 时……是否可以在 %pre 上更新其值并稍后使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T16:05:58.690

不。

`%define`宏总是在规范文件中从上到下重新评估，所以你不能有循环。

`%global`宏是一次性的。

例如，来自[另一个关于“需要”处理的问题](https://stackoverflow.com/questions/12212712/can-some-specific-autodetected-dependency-be-ignored-upon-rpmbuild)：

```
%global _use_internal_dependency_generator 0
%global __find_requires_orig %{__find_requires}
%define __find_requires %{_builddir}/%{?buildsubdir}/build/find-requires %{__find_requires_orig} 
```

如果我曾经`%define`声明过`__find_requires_orig`，它会因宏循环而出错。

如果这不能回答您的问题，请详细说明您要查找的信息或您的最终目标。

* * *

预计到达时间：

从构建 RPM 时起，`%pre`and`%post`部分就已经包含了硬编码的宏。如果您需要做出额外的运行时决策，则需要在这些 shell 脚本中完成。

# php - 从 SEF 链接 joomla 中删除一部分

> ID：14519845
> 
> 赞同：1
> 
> 时间：2013-01-25T10:26:19.027
> 
> 标签：php, joomla, joomla-sef-urls

我试图`SEF`在我的 Joomla 网站中创建`root/<menu-item-alias>/<view-name>/<item-alias>`类似的 URL。

我意识到，如果我添加任何东西来返回函数`MyComponentBuildRoute()`的值`route.php`，它总是出现在我的 URL 上：

```
$segments[] = $view;
$segments[] = $item_alias;
return $segments; 
```

我看一下 Joomla 中的 com_content ，它没有这个`<view-name>`部分，`root/<menu-item-alias>/<item-alias>`但是在代码中仍然有类似的东西

`$segments[] = $view;`

我怎么能像默认`com_content`一样做？如何从我的`SEF`链接中删除视图名称部分或任何其他部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:04:16.523

不建议编辑 joomla 核心，如果您可以在不修改核心的情况下做到这一点，那就太好了。我建议使用 Artio JoomSEF，它是一个组件，可让您编辑 SEF 网址，因此您可以为每个页面决定 www.yourdomain.tld/ 之后的网址。

![在此处输入图像描述](../Images/6433db6803e9e62b2605bd5d0e950eb8.png)

完整图片位于：[http ://www.diystash.com/sefproblem.png](http://www.diystash.com/sefproblem.png)

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T21:34:53.527

**在 BuildRoute() 中：**

仅将您希望在 url 中看到的值添加到 $segments；

```
$segments[] = $query['task']; 
```

然后删除该变量，否则它仍将作为查询参数添加：

```
unset($query['task']); 
```

因此，例如，如果您想摆脱布局参数，而不关心它的值，只需

```
unset($query['layout']); 
```

**在 ParseRoute() 中：**

假设 $vars 是您要返回的数组，只需从 url 段中分配您需要的段，但请确保重新创建您需要的段：即视图等，以便恢复布局参数：

```
$vars['layout']='mydefaultlayout'; 
```

这样您就不会显示不需要的内容，并且仍然让您的组件接收正确初始化的参数。

# android - Phonegap 在我的 Android 平板电脑上不显示图像

> ID：14519846
> 
> 赞同：1
> 
> 时间：2013-01-25T10:26:18.870
> 
> 标签：android, file, cordova

这是我的第一个问题，我不知道我是否做得对。

好吧，我刚刚开始使用 phonegap 开发应用程序，在我的应用程序中，我需要从相机中获取图像并将其显示在索引页面上。

我做到了，该应用程序在我的手机上完美运行，但在我的平板电脑上却不行。

编码：

```
<img src='file:///mnt/sdcard/myapp/pic.jpg' /> 
```

此代码显示之前保存在我的手机上的图像，但在我的平板电脑浏览器中找不到该图像。在这两种情况下，路径是相同的。Android版本相同（4.0.4）。Phonegap 版本是 1.9.0。

任何人都知道为什么会发生这种情况？

谢谢，对不起我的英语不好。

# php - 在 MySQL (PHP) 中插入 CURDATE() 和 CURTIME()

> ID：14519852
> 
> 赞同：2
> 
> 时间：2013-01-25T10:26:33.200
> 
> 标签：php, mysql, date, time

你如何在 MySQL 中插入`CURDATE()`和？`CURTIME()`

我将它们分别插入到数据库表中的日期和时间字段中。

```
$query = "INSERT INTO `ordisp` (date, time, operator, status, completed, name, email) VALUES (CURDATE(), CURTIME(), '".$operator."', '".$status."', '".$complete."', '".$name."', '".$email."')"; 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T10:33:16.513

您有语法错误 - 查询末尾的逗号：

```
'".$name."', '".$email."',)";
                         ^ here 
```

删除它，所以完整的查询变为：

```
$query = "INSERT INTO `ordisp` (date, time, operator, status, completed, name, email) VALUES (CURDATE(), CURTIME(), '".$operator."', '".$status."', '".$complete."', '".$name."', '".$email."')"; 
```

为了将来的调试，你应该查看 MySQL 错误，它会给你一个问题的描述，例如未知的字段/表名或语法错误等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T10:28:21.140

`date`and`time`是 mysql 的保留字，因此应该用反引号引用以避免与保留字冲突。

```
"INSERT INTO `ordisp` (`date`, `time`, operator, .... 
```

# arm - ARM - 如何使用 armcc 保存 r9 寄存器

> ID：14519856
> 
> 赞同：1
> 
> 时间：2013-01-25T10:26:49.830
> 
> 标签：arm, eabi, armcc

阅读 ARM AAPCS (ARM EABI)，我发现： *寄存器 r9 的作用是特定于平台的。虚拟平台可以为该寄存器分配任何角色，并且必须记录此用法。例如，它可以在与位置无关的数据模型中将其指定为静态基址（SB），或者在具有线程本地存储的环境中将其指定为线程寄存器（TR）。该寄存器的使用可能要求所保存的值在所有调用中都是持久的。不需要这种特殊寄存器的虚拟平台可以将 r9 指定为附加的被调用者保存的变量寄存器 v6。*

我想将 r9 用作我的特定航空电子抢占式操作系统的 PID 保持器，但我不知道如何保存它：armcc C 编译器总是将它用作变量寄存器，因此它的值总是通过应用程序改变。

任何想法 ？armcc 可以吗？海湾合作委员会？戴铂？...

谢谢你的帮助。

问候

克里斯托夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T12:54:02.630

对于 ARMCC，您可以尝试

```
--global_reg=6 
```

[http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0491c/CHDBJGCH.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0491c/CHDBJGCH.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T15:16:41.483

我回答 mysellf ：对于 GCC，可以使用 -fixed-r9。

[GCC 在线文档](http://gcc.gnu.org/onlinedocs/gcc-4.7.3/gcc/Code-Gen-Options.html)

对于 Windriver Diab 编译器：

“#pragma global_register 标识符=注册”

（要包含在每个文件中）

# entity-framework - 在 EF Power Tools 代码逆向工程中指定架构名称

> ID：14519862
> 
> 赞同：3
> 
> 时间：2013-01-25T10:27:02.020
> 
> 标签：entity-framework

我正在使用 Entity Framework 电动工具对现有数据库中的代码进行逆向工程。我的数据库中有多个模式，但我只想为 dbo 模式生成类。我如何自定义它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-17T22:21:37.920

您必须编辑逆向工程师模板。我为 Entity Framework 6 做了以下工作。

在 Context.tt 上，架构当前不可用，因此必须手动删除不需要的代码。

在 Entity.tt 和 Mapping.tt 上，您必须在此处更改代码。

```
var efHost = (EfTextTemplateHost)Host;
var code = new CodeGenerationTools(this); 
```

到

```
var efHost = (EfTextTemplateHost)Host;
if((string)efHost.TableSet.MetadataProperties["Schema"].Value == "dbo"){
var code = new CodeGenerationTools(this); 
```

然后在这两个文件的末尾放置一个右括号。

```
<#
}
#> 
```

将“dbo”更改为您想要的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T14:37:57.557

您可以使用 T4 模板（在 Entity Framework 菜单 > Customize Reverse Engenieer Templates 上）。在您可以测试架构的那些上： if (efHost.TableSet.MetadataProperties["Schema"].Value == "Correct Schema") // 生成

# jquery - jQuery SlidesJS

> ID：14519865
> 
> 赞同：2
> 
> 时间：2013-01-25T10:27:16.817
> 
> 标签：jquery, tabs, slidesjs

我在不同的 jQuery 选项卡中有许多 jQuery SlidesJS。效果很好。我现在的问题是，当我单击`tab2`with`slide2`并返回`tab1`with 时`slide1`，我想`slide1`从 1 点重新开始！我的代码是：

```
<script>
    function start(_start) {
        if(_start != "") {
            starter = _start;
        } else {
            starter = 1;
        }
        $('#slides1, #slides2, #slides3').slides({
            start: starter,
            preload: true,
            slideSpeed: 1000,
            play: 4000,
            pause: 2000,
            slideEasing: 'easeInOutQuint',
            generateNextPrev: false,
            pagination: false,
            next: 'next',
            prev: 'prev'
        });
        $("#tabs").tabs();              
    }

    $(document).ready(function() {
        start(1);

        $("#ui-id-1").click(function(){
            start(1);
        });         
    });
</script> 
```

`#ui-id-1`是`tab1`。点击它应该从`slide1`1 开始。但我得到的是一个空白的白色 div。当我单击选项卡时，任何想法如何从 1 开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T15:24:56.027

这就是 slidesjs 计算不可见值的问题`height: 0` `width: 0`

解决方案非常简单：您应该在没有`document`准备好事件时初始化 slidesjs，而是在用户实际单击选项卡并显示选项卡内容之后。

这就是我首先初始化可见的方式：

```
 $('.bc-slider .frames:visible')).slidesjs({
    width:      1024,
    height:     260,
    play:       {
      auto:   false,
      effect: "slide"
    },
    navigation: {
      effect: "slide",
      active: false
    },
    pagination: {
      active: false,
      effect: "slide"
    },
    effect:     {
      fade: {
        speed: 500
      }
    }
  }); 
```

这是显示隐藏滑块的代码：

```
content.eq(index).find('.frames').slidesjs({
  width:      1024,
  height:     260,
  play:       {
    auto:   false,
    effect: "slide"
  },
  navigation: {
    effect: "slide",
    active: false
  },
  pagination: {
    active: false,
    effect: "slide"
  },
  effect:     {
    fade: {
      speed: 500
    }
  }
}); 
```

`content`是一个事件局部变量，包含对正在显示的选项卡的引用。

# .net - WIX-Setup 卸载旧版本

> ID：14519872
> 
> 赞同：1
> 
> 时间：2013-01-25T10:27:36.333
> 
> 标签：.net, installation, wix

我从 VS2010 升级到 VS2012。我有一个带有设置的客户端应用程序。我使用 Windows-Installer 来创建设置。现在我想升级我的项目并遇到VS2012不再支持Windows-Installer的问题。我尝试使用 WIX 创建一个新设置。这是我的新设置文件：

```
<?xml version="1.0" encoding="UTF-8"?>
 <Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
<Product Id="FADB7F3E-0E92-494E-B627-930BC217DE29" Name="SMC" Language="1033" Version="1.1.1"
       Manufacturer="abc" UpgradeCode="1BC520F0-F6CB-4E70-8F7B-9F398BE4F25B">
<Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" />
<!--<MajorUpgrade Schedule="afterInstallInitialize" DowngradeErrorMessage="A newer version of [ProductName] is already installed." />-->
<MediaTemplate />

<Upgrade Id="1BC520F0-F6CB-4E70-8F7B-9F398BE4F25B">
  <!--<UpgradeVersion Minimum="1.1.1.0" IncludeMinimum="no" OnlyDetect="no" Property="NEWERVERSIONDETECTED" />-->
  <UpgradeVersion Minimum="0.0.0.0" Maximum="1.1.1.0" IncludeMinimum="yes" IncludeMaximum="yes" Property="OLDERVERSIONBEINGUPGRADED" />
</Upgrade>

<InstallExecuteSequence>
  <RemoveExistingProducts After="InstallFinalize" />
  <Custom Action="NewerVersion" After="FindRelatedProducts">NEWERVERSIONDETECTED</Custom>
</InstallExecuteSequence>

<CustomAction Id="NewerVersion" Error="A later version of [ProductName] is already installed." />

<!--<Fragment>-->
<Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="ProgramFilesFolder">
    <Directory Id="INSTALLFOLDER" Name="abc">
      <Directory Id="PROGFOLDER" Name="SMC">
        <Directory Id="IMAGES" Name="images"/>
        <Directory Id="CULTURE" Name="de-DE" />
      </Directory>
    </Directory>
    <Directory Id="ProgramMenuFolder">
      <Directory Id="SMC_Shortcut" Name="abc">
      </Directory>
    </Directory>
  </Directory>
</Directory>
<!--</Fragment>-->

<!--<Fragment>-->
<DirectoryRef Id="IMAGES">
  <Component Id="Image" Guid="82BB42E8-AD7A-4E62-B5B7-37C7EA2DFC8D">
    <File Id="Program_Icon" Source="C:\Projects\SMC\Dev\SMC\images\SMC.ico" KeyPath="yes" Checksum="yes" />
  </Component>
</DirectoryRef>
<DirectoryRef Id="CULTURE">
  <Component Id="Lang" Guid="109183AC-3F37-4BDC-B659-38C12CE4BAD3">
    <File Id="Language" Source="C:\Projects\SMC\Dev\Culture\bin\Release\de-DE\Culture.resources.dll" KeyPath="yes" Checksum="yes" />
  </Component>
</DirectoryRef>
<DirectoryRef Id="PROGFOLDER">
  <Component Id="Dll_Culture" Guid="AC8103CF-FDFB-4792-BF84-577F27A3CC1B">
    <File Id="culture_dll" Source="C:\Projects\SMC\Dev\Culture\bin\Release\Culture.dll" KeyPath="yes" Checksum="yes" />
  </Component>
  <Component Id="Dll_Helper" Guid="33DEC912-AF34-4473-8E6D-E36D07B644B1">
    <File Id="helper_dll" Source="C:\Projects\SMC\Dev\Helper\bin\Release\Helper.dll" KeyPath="yes" Checksum="yes" />
  </Component>
  <Component Id="Dll_Secman" Guid="9E543EF7-5205-49F2-9B2A-52D0D469781D">
    <File Id="secman_dll" Source="C:\Projects\SMC\Tools\secman.dll" KeyPath="yes" Checksum="yes" />
  </Component>
  <Component Id="Dll_SecurityManager" Guid="AF80A4B2-3B5F-4CA9-B357-65AC9031CFF3">
    <File Id="securityManager_2005_dll" Source="C:\Projects\SMC\Tools\SecurityManager.2005.dll" KeyPath="yes" Checksum="yes" />
  </Component>
  <Component Id="Dll_UDDI" Guid="35EFC304-EB62-4EB4-A1F4-4D0E0AE56A76">
    <File Id="uddiConnect_dll" Source="C:\Projects\SMC\Tools\abc.UddiConnectLib.dll" KeyPath="yes" Checksum="yes" />
  </Component>
  <Component Id="Exe_SMC" Guid="48FF7F56-D4E1-4CE6-B333-8F8BF73B6D58">
    <File Id="exe_file" Source="C:\Projects\SMC\Dev\SMC\bin\Release\SMC.exe" KeyPath="yes" Checksum="yes" />
  </Component>
  <Component Id="Exe_SMC.config" Guid="865139C6-740A-499B-8C0E-FAF163A4A98F">
    <File Id="exe_file.config" Source="C:\Projects\SMC\Dev\SMC\bin\Release\SMC.exe.config" KeyPath="yes" Checksum="yes" />
  </Component>
</DirectoryRef>
<DirectoryRef Id="SMC_Shortcut">
  <Component Id="shortcut" Guid="46E8006D-9A0A-4086-94AE-A002F6C5B4D7">
    <Shortcut Id="SMC_abc" Name="SMC" Description="SMC"
              Target="[PROGFOLDER]SMC.exe" Icon="SMC_Icon" Arguments="prod">
      <Icon Id="SMC_Icon" SourceFile="C:\Projects\SMC\Dev\SMC\images\SMC.ico" />
    </Shortcut>
    <RegistryValue Root="HKMU" Key="Software\Microsoft\Windows\CurrentVersion\Run" Name="SMC"
                   Type="string" Value="[PROGFOLDER]SMC.exe prod" KeyPath="yes" />
    <RemoveFile Id="SMC_abc" Name="SMC" On="uninstall" />
  </Component>
</DirectoryRef>
<ComponentGroup Id="ProductComponents" Directory="INSTALLFOLDER">
  <ComponentRef Id="Image" />
  <ComponentRef Id="Lang" />
  <ComponentRef Id="Dll_Culture" />
  <ComponentRef Id="Dll_Helper" />
  <ComponentRef Id="Dll_Secman" />
  <ComponentRef Id="Dll_SecurityManager" />
  <ComponentRef Id="Dll_UDDI" />
  <ComponentRef Id="Exe_SMC" />
  <ComponentRef Id="Exe_SMC.config" />
  <ComponentRef Id="shortcut" />
</ComponentGroup>

<!--</Fragment>-->

<Feature Id="ProductFeature" Title="SMC.SetupTest" Level="1">
  <ComponentGroupRef Id="ProductComponents" />
</Feature>
<Property Id="ARPPRODUCTICON">RemoveIcon</Property>
<Icon Id="RemoveIcon" SourceFile="C:\Projects\SMC\Dev\SMC\images\SMC.ico" />

<CustomAction Id="OurAction" FileKey="exe_file" ExeCommand="prod" Execute="immediate" Return="asyncNoWait" /> 
```

它会安装新版本，但不会卸载旧版本。旧程序仍然出现在控制面板的程序和功能中。我怎样才能删除这个版本。

我尝试使用两个版本的 Wix-Setup 进行安装。当我尝试安装较新版本时，它会显示一个带有以下消息的消息框：安装了此软件的另一个版本...

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T06:45:36.247

你可以做到这一点是几个步骤：

1.  使用 Orca 打开您拥有的旧 MSI。
2.  转到属性表并找到`UpgradeCode`属性
3.  复制属性的 GUID 值`UpgradeCode`。
4.  在 .wxs 文件中使用该 GUID 作为`Product/@UpgradeCode`属性。相同的 GUID 将新 MSI 与旧 MSI 相关联。
5.  用一个元素替换`Upgrade`.wxs 文件中的`MajorUpgrade`元素。
6.  在已安装较新版本的情况下尝试安装旧 MSI 时向元素`DowngradeErrorMessage`添加一条消息以显示。`MajorUpgrade`

现在您的升级应该可以工作了。

# regex - 正则表达式从由空格分隔的文本文件中捕获所有单词

> ID：14519879
> 
> 赞同：0
> 
> 时间：2013-01-25T10:28:07.007
> 
> 标签：regex

我对正则表达式只有一些基本的了解。我的目的是捕捉 word 文档中的每一个单词，为此我设计了这个正则表达式。我的 word 文档由写成 Rs.1,00,000/- 的数字组成，它还包含写成 57.58 的小数。它还将包含对不以空格分隔的 F.No.245/12-445/235 之类的文件的引用。

使用以下正则表达式几乎成功

```
(Rs\.)?((\d{1,2}[\,])?)+(\d{3}\/\-)|([']?[\(]?[A-Za-z0-9][']?[-]?[?]?[!]?[:]?[-]?[.]?[/]?[\.]?[\(]?[\)]?[\(]?[\)]?[\/]?)+ 
```

为了捕获单词，我将其从 word 文档中剪切并粘贴到一个文本文件中，然后由 C# 程序读取该文本文件。我的问题是我从不想要出现在单词末尾的句号或点。结束词后跟感叹号或问号也没关系。当我测试它时，它从文本文件中捕获了 13150 个单词，而 word 文档显示有 13158 个单词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:29:07.173

您需要非空白字符，后跟空格或“F.No.”：

```
\S*?(?=\s|(F\.No\.)) 
```

# serialization - 如何序列化 boost::interprocess::containers::vector

> ID：14519884
> 
> 赞同：3
> 
> 时间：2013-01-25T10:28:24.950
> 
> 标签：serialization, boost, vector, containers, interprocess

我想使用带有 boost::interprocess::containers::vector 的 boost 序列化

std::vector 的序列化通过包括

```
#include <boost/interprocess/containers/vector.hpp> 
```

但我有一个包含共享向量的类

```
class MyClass {
  public:
    typedef boost::interprocess::allocator<double, SegmentManager> Allocator;
    typedef boost::interprocess::vector<double, Allocator > VectorDouble;
    VectorDouble *pVar;

    template<class archive>  
    void serialize ( archive &ar, const unsigned int version ) {
        using boost::serialization::make_nvp;
        ar & make_nvp ( "data", *pVar; );  # This does not work
        # what works it creating a std::vector and copy the data
    }
...
    MyClass(){
      # creating the shared memory and the pointer ot pVarß
    }

    ~MyClass(){
      # release data
    }
} 
```

我收到错误消息：

```
error: ‘class boost::container::vector<double, boost::interprocess::allocator<double, boost::interprocess::segment_manager<char, boost::interprocess::rbtree_best_fit<boost::interprocess::mutex_family, boost::interprocess::offset_ptr<void>, 0u>, boost::interprocess::iset_index> > >’ has no member named ‘serialize’ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-18T09:33:48.117

基于标题，我编写了以下标题，它允许对进程间向量进行序列化。更多细节可以在[我的 github repo](https://github.com/ShmFw/shmfw/blob/master/src/shmfw/serialization/interprocess_vector.hpp)中找到。

问候马库斯

```
#ifndef SHMFW_SERIALIZATION_INTERPROCESS_VECTOR_HPP
#define SHMFW_SERIALIZATION_INTERPROCESS_VECTOR_HPP

#include <boost/serialization/vector.hpp>
#include <boost/interprocess/containers/vector.hpp>

namespace boost { 
namespace serialization {

template<class Archive, class U, class Allocator>

inline void save(
    Archive & ar,
    const boost::interprocess::vector<U, Allocator> &t,
    const unsigned int file_version
){
    boost::serialization::stl::save_collection<Archive, boost::interprocess::vector<U, Allocator> >(
        ar, t
    );
}

template<class Archive, class U, class Allocator>
inline void load(
    Archive & ar,
    boost::interprocess::vector<U, Allocator> &t,
    const unsigned int file_version
){
#ifdef BOOST_SERIALIZATION_VECTOR_135_HPP
    if (ar.get_library_version()==boost::archive::library_version_type(5))
    {
      load(ar,t,file_version, boost::is_arithmetic<U>());
      return;
    }
#endif
    boost::serialization::stl::load_collection<
        Archive,
        boost::interprocess::vector<U, Allocator>,
        boost::serialization::stl::archive_input_seq<
            Archive, boost::interprocess::vector<U, Allocator> 
        >,
        boost::serialization::stl::reserve_imp<boost::interprocess::vector<U, Allocator> >
    >(ar, t);
}

// split non-intrusive serialization function member into separate
// non intrusive save/load member functions
template<class Archive, class U, class Allocator>
inline void serialize(
    Archive & ar,
    boost::interprocess::vector<U, Allocator> & t,
    const unsigned int file_version
){
    boost::serialization::split_free(ar, t, file_version);
}

#if ! BOOST_WORKAROUND(BOOST_MSVC, <= 1300)

/////////1/////////2/////////3/////////4/////////5/////////6/////////7/////////8
// vector<bool>
template<class Archive, class Allocator>
inline void save(
    Archive & ar,
    const boost::interprocess::vector<bool, Allocator> &t,
    const unsigned int /* file_version */
){
    // record number of elements
    collection_size_type count (t.size());
    ar << BOOST_SERIALIZATION_NVP(count);
    boost::interprocess::vector<bool>::const_iterator it = t.begin();
    while(count-- > 0){
        bool tb = *it++;
        ar << boost::serialization::make_nvp("item", tb);
    }
}

template<class Archive, class Allocator>
inline void load(
    Archive & ar,
    boost::interprocess::vector<bool, Allocator> &t,
    const unsigned int /* file_version */
){
    // retrieve number of elements
    collection_size_type count;
    ar >> BOOST_SERIALIZATION_NVP(count);
    t.clear();
    while(count-- > 0){
        bool i;
        ar >> boost::serialization::make_nvp("item", i);
        t.push_back(i);
    }
}

// split non-intrusive serialization function member into separate
// non intrusive save/load member functions
template<class Archive, class Allocator>
inline void serialize(
    Archive & ar,
    boost::interprocess::vector<bool, Allocator> & t,
    const unsigned int file_version
){
    boost::serialization::split_free(ar, t, file_version);
}

#endif // BOOST_WORKAROUND

};
};

#endif // SHMFW_SERIALIZATION_INTERPROCESS_VECTOR_HPP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T17:42:03.723

如果您查看 boost 序列化库，则必须手动定义如何序列化某些内容。它所能做的就是为你序列化基本类型——你必须为它“拆开”。因此，正如错误所说，它没有所需的序列化方法，或者您可以根据是否希望它具有侵入性来制作自己的外部序列化方法。

这里的教程非常有帮助:)：

[http://www.boost.org/doc/libs/1_54_0/libs/serialization/doc/index.html](http://www.boost.org/doc/libs/1_54_0/libs/serialization/doc/index.html)

# tsql - TSQL 用 ' ' 分割字符串

> ID：14519885
> 
> 赞同：1
> 
> 时间：2013-01-25T10:28:27.093
> 
> 标签：tsql

> **可能重复：**
> [在 tsql 中等效的拆分函数？](https://stackoverflow.com/questions/697519/split-function-equivalent-in-tsql)

我有@FirstLastName = 'First Last'。

我需要将字符串拆分为两个变量@FirstName 和@LastName。

在@FirstName 中是“第一”。

在@LastName 中是“最后一个”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:42:33.557

这应该可以解决问题，但这只是一个**快速破解**（[SQL Fiddle](http://sqlfiddle.com/#!3/d41d8/8041)）：

```
SET @FirstName = substring(@FirstLastName
                         , 1
                         , charindex(' ', @FirstLastName)-1)

SET @LastName = substring(@FirstLastName
                        , charindex(' ', @FirstLastName)
                        , 999)

-- if you want to calculate the actual @LastName length,
-- replace 999 with len(@FirstLastName)-charindex(' ', @FirstLastName)+1 
```

有关**更优雅和健壮的方式，**请参阅[T-SQL 中的拆分函数等效？](https://stackoverflow.com/questions/697519/95).

# iphone - iOS 蓝牙连接

> ID：14519894
> 
> 赞同：-1
> 
> 时间：2013-01-25T10:28:51.657
> 
> 标签：iphone, ios, xcode, ipad, bluetooth

如果我有一个在 iPhone/iPad 上运行的应用程序即将打开与蓝牙设备的连接。在打开此连接之前，它是否可以检查是否有任何其他正在运行的应用程序打开了与同一蓝牙设备的连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:35:29.200

一般没有。蓝牙只能搜索附近的其他设备，不能搜索附近的其他连接。

但，

如果您使用的是外部附件框架和 MFI 注册的附件，EAAccessoryManager 有一个[connectedAccessories](http://developer.apple.com/library/ios/#documentation/ExternalAccessory/Reference/EAAccessoryManager_class/Reference/Reference.html)方法，该方法返回一个连接到设备的所有附件的列表，这些附件可以由应用程序使用。

> **连接配件**
> 
> 当前连接的附件列表对应的附件对象。（只读）
> 
> ```
> @property (nonatomic, readonly) NSArray *connectedAccessories; 
> ```
> 
> **讨论**
> 
> > 此属性包含一个 EAAccessory 对象数组。每个对象都对应一个附件，该附件已连接并可供您的应用程序使用。因为这个属性的内容可以根据配件的连接和断开动态变化，所以你不应该缓存这个属性的值。

这是您寻找连接配件的最佳选择。我不知道这对你的情况是否有帮助。

# entity-framework - 为新的数据库提供程序创建 EF 提供程序

> ID：14519895
> 
> 赞同：0
> 
> 时间：2013-01-25T10:28:55.623
> 
> 标签：entity-framework, ado.net

我想为相对较新的数据库提供程序（如 DB2）创建一个 EF 提供程序。但是，我找不到任何与之相关的有用文档/教程。

ADO.Net 博客中有一些文章，但该系列本身并不完整。

如果有人可以分享有用的链接以开始它，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:07:30.127

编写 EF 提供程序无疑是一个有趣的挑战，尤其是在信息有限的情况下。最好的办法是从[Entity Framework Sample Provider](http://archive.msdn.microsoft.com/EFSampleProvider)开始。

# javascript - 触摸事件停止触发

> ID：14519897
> 
> 赞同：1
> 
> 时间：2013-01-25T10:28:56.797
> 
> 标签：javascript, svg, touch

我正在尝试使用 Javascript 制作交互式 SVG。我订阅了 Document 的每个触摸事件并希望处理它们。

但是在`TouchStart`事件发生后我重绘了 svg 元素，这不知何故导致了一个问题： `TouchMove`并`TouchEnd`停止触发，直到操作完成。

顺便说一句，我不使用`preventDefault`；

# javascript - 将序列化数据附加到 JSON 对象

> ID：14519898
> 
> 赞同：0
> 
> 时间：2013-01-25T10:29:03.993
> 
> 标签：javascript, jquery, ajax, json

我有一个名为公司的序列化表格

```
$("#company_form").serialize(); 
```

post请求中的参数看起来应该

```
company[name]   company name 
```

现在我需要将另一个序列化表单附加到公司 JSON 对象。到目前为止，我尝试以`user form`相同的方式序列化并添加它

```
company.user = user 
```

它附加了它，但参数没有序列化，它们看起来像

```
name    name=name&email=test%40test.com 
```

反而

```
user[email] test@test.com    
user[name]  name 
```

如果请求在日志文件中成功，我应该会看到类似

```
{"company"=>{"name"=>"Hahn-Orn", 
             "tagline"=>"transform dynamic supply-chains", 
             "bio"=>["Tenetur non ex aliquam et. Autem velit consequatur et ea aut quos    debitis. Nulla quia impedit deserunt nesciunt. Dolores ipsam quod dolores id maiores. Atque iste quis nihil velit.", "Ducimus soluta omnis facilis illum nihil aspernatur. Aut quasi qui libero et sed. Fuga nesciunt dolorem.", "Ducimus itaque harum. Dolor officia labore rerum ullam. Veniam omnis et aut excepturi ut."]}, 
             "user"=>{"name"=>"Isabelle Schuster",
             "email"=>"jonathan_smith@example.com", 
             "password"=>"[FILTERED]", 
             "password_confirmation"=>"[FILTERED]"}} 
```

# java - 解组时出现意外元素错误

> ID：14519902
> 
> 赞同：4
> 
> 时间：2013-01-25T10:29:17.037
> 
> 标签：java, jaxb, unmarshalling

我应该将简单的 xml 解组为 belo 但得到错误

```
Exception in thread "main" javax.xml.bind.UnmarshalException: unexpected element (uri:"http://example.com/service/response/v1", local:"WebResponse"). Expected elements are <{http://example.com/service/request/v1}WebResponse>
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:603)

I tried the solutions in this site but could not solve pls help. 
```

这是 response.xml 文件中的 xml

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
- <WebResponse xmlns="http://example.com/service/response/v1">
- <Status>
  <StatusCode>0</StatusCode> 
  <Description>Transaction was successful</Description> 
  </Status>
  </WebResponse> 
```

下面是我的代码：

**网络响应类：**

用于存储检索到的 xml 的 webresponse 类

```
import javax.xml.bind.annotation.*;

@XmlRootElement(name="WebResponse")
public class WebResponse {

    private long statusCode;
    private String description;
    @XmlElement(name= "StatusCode")
    public long getStatusCode() {
        return statusCode;
    }
    public void setStatusCode(long statusCode) {
        this.statusCode = statusCode;
    }
    @XmlElement(name= "Description")
    public String getDescription() {
        return description;
    }
    public void setDescription(String description) {
        this.description = description;
    } 
```

**WebResponseMain 类：**

测试员类

```
import javax.xml.bind.Unmarshaller;
import javax.xml.bind.JAXBContext;

import java.io.FileReader;
import com.example.WebResponse;

public class WebResponseMain {

    public static void main(String[] args) throws Exception{
        JAXBContext context = JAXBContext.newInstance(WebResponse.class);
        Unmarshaller um = context.createUnmarshaller();
        WebResponse WR = (WebResponse) um.unmarshal(new FileReader("c:/tem/Response.XML"));
        System.out.println("StatusCode: " + WR.getStatusCode() + " Description "
                 +WR.getDescription());

    }

} 
```

**包信息.java：**

```
@XmlSchema(namespace = "http://example.com/service/request/v1",elementFormDefault=XmlNsForm.QUALIFIED)

package com.example;

import javax.xml.bind.annotation.*; 
```

我使用了本网站中的解决方案，但无法解决请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T10:47:49.577

**第1部分**

```
Exception in thread "main" javax.xml.bind.UnmarshalException: unexpected element (uri:"http://example.com/service/response/v1", local:"WebResponse"). Expected elements are <{http://example.com/service/request/v1}WebResponse>
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.handleEvent(UnmarshallingContext.java:603) 
```

问题在于 XML (`response/v1`和`request/v1`) 中指定的命名空间。

```
<WebResponse xmlns="http://example.com/service/response/v1"> 
```

并且`package-info`是不同的

```
@XmlSchema(namespace = "http://example.com/service/request/v1", elementFormDefault = XmlNsForm.QUALIFIED)
package com.example; 
```

* * *

**第2部分**

您当前的对象模型和映射与 XML 内容不匹配。解决此问题的一种方法是引入[Ash 回答](https://stackoverflow.com/a/14520083/383861)`Status`的类。

**地位**

```
import javax.xml.bind.annotation.XmlElement;

public class Status {

    private long statusCode;
    private String description;

    @XmlElement(name = "StatusCode")
    public long getStatusCode() {
        return statusCode;
    }

    public void setStatusCode(long statusCode) {
        this.statusCode = statusCode;
    }

    @XmlElement(name = "Description")
    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

} 
```

**网络响应**

```
import javax.xml.bind.annotation.*;

@XmlRootElement(name = "WebResponse")
public class WebResponse {

    private Status status;

    @XmlElement(name="Status")
    public Status getStatus() {
        return status;
    }

    public void setStatus(Status status) {
        this.status = status;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:39:02.593

尝试添加一个`Status`类，并将其放在`WebResponse`字段之间。

我认为，由于您的 XML 元素进入 WebResponse -> Status -> StatusCode/Description，因此您的`WebResponse`类应该只有一个字段：类型为“状态” `Status`。然后类`Status`应该有`StatusCode`and`Description`字段。

编辑：另外，我认为@XmlElement 注释会出现在字段上，而不是方法上，但是自从我完成它已经有一段时间了......

# c - Haskell FFI 进入 C 并返回需要多少费用？

> ID：14519905
> 
> 赞同：31
> 
> 时间：2013-01-25T10:29:29.440
> 
> 标签：c, performance, haskell, ffi

如果我想调用多个 C 函数，每个函数取决于前一个函数的结果，创建一个处理这三个调用的包装 C 函数会更好吗？它的成本是否与使用 Haskell FFI 而不转换类型的成本相同？

假设我有以下 Haskell 代码：

```
foo :: CInt -> IO CInt
foo x = do
  a <- cfA x
  b <- cfB a
  c <- cfC c
  return c 
```

每个函数`cf*`都是一个 C 调用。

就性能而言，创建一个类似的 C 函数`cfABC`并在 Haskell 中只进行一次外部调用会更好吗？

```
int cfABC(int x) {
   int a, b, c;
   a = cfA(x);
   b = cfB(a);
   c = cfC(b);
   return c;
} 
```

哈斯克尔代码：

```
foo :: CInt -> IO CInt
foo x = do
  c <- cfABC x
  return c 
```

如何衡量来自 Haskell 的 C 调用的性能成本？不是 C 函数本身的成本，而是从 Haskell 到 C 并返回的“上下文切换”的成本。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-25T18:32:58.550

答案主要取决于外来电话是 a`safe`还是`unsafe`call。

一个`unsafe`C 调用基本上只是一个函数调用，所以如果没有（非平凡的）类型转换，如果你进行三个外部调用，就会有三个函数调用，当你用 C 编写包装器时，会有一到四个，这取决于有多少编译 C 时可以内联组件函数，因为 GHC 不能内联对 C 的外部调用。这样的函数调用通常非常便宜（它只是参数的副本和代码的跳转），因此无论哪种方式差异都很小，当没有 C 函数可以内联到包装器时，包装器应该稍微慢一些，并且当所有都可以内联时稍微快一点[在我的基准测试中确实是这种情况，分别为 +1.5ns。-3.5ns，其中三个外部调用只返回参数大约需要 12.7ns]。如果函数做了一些不平凡的事情，

C`safe`调用涉及保存一些重要的状态、锁定、可能产生一个新的 OS 线程，因此需要更长的时间。然后，与外部调用的成本相比，在 C 中多调用一个函数的小开销可以忽略不计[除非传递参数需要不寻常的复制量，许多巨大`struct`的 s 左右]。在我的无为基准

```
{-# LANGUAGE ForeignFunctionInterface #-}
module Main (main) where

import Criterion.Main
import Foreign.C.Types
import Control.Monad

foreign import ccall safe "funcs.h cfA" c_cfA :: CInt -> IO CInt
foreign import ccall safe "funcs.h cfB" c_cfB :: CInt -> IO CInt
foreign import ccall safe "funcs.h cfC" c_cfC :: CInt -> IO CInt
foreign import ccall safe "funcs.h cfABC" c_cfABC :: CInt -> IO CInt

wrap :: (CInt -> IO CInt) -> Int -> IO Int
wrap foo arg = fmap fromIntegral $ foo (fromIntegral arg)

cfabc = wrap c_cfABC

foo :: Int -> IO Int
foo = wrap (c_cfA >=> c_cfB >=> c_cfC)

main :: IO ()
main = defaultMain
            [ bench "three calls" $ foo 16
            , bench "single call" $ cfabc 16
            ] 
```

其中所有 C 函数只返回参数，单个包装调用的平均值略高于 100ns [105-112]，而三个单独调用的平均值约为 300ns [290-315]。

所以一个`safe`c 调用大约需要 100ns，通常，将它们包装成一个调用会更快。但是，如果被调用的函数做了一些足够重要的事情，那么差异就无关紧要了。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-25T14:06:23.397

这可能很大程度上取决于*您*确切的 Haskell 编译器、C 编译器以及将它们绑定在一起的胶水。唯一确定的方法是测量它。

从更哲学的角度来看，每次混合语言时，都会为新手制造障碍：在这种情况下，精通 Haskell 和 C 是不够的（这已经提供了一个狭窄的集合），但你还必须知道调用约定和其他不足以与它们一起工作的东西。很多时候有一些微妙的问题需要处理（即使从 C++ 调用 C，它们是*非常*相似的语言也不是微不足道的）。除非有*非常*令人信服的理由，否则我会坚持使用单一语言。我能临时想到的唯一例外是创建例如 Haskell 绑定到预先存在的复杂库，比如 Python 的 NumPy。

# javascript - 如何使用 jquery 为具有特定属性的所有元素附加事件？

> ID：14519906
> 
> 赞同：0
> 
> 时间：2013-01-25T10:29:34.027
> 
> 标签：javascript, jquery, events

我的页面中有包含属性等的动态输入`clientid=1`文本`clientid=2`。

是否可以为包含此客户端 ID 的任何文本框关联按键事件？如何？

注意：并非所有文本框都具有该属性，这意味着它们不应具有按键功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:31:13.687

试试这个

```
$(':input[clientid]').on('keypress',function(){}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:31:16.090

您可以使用属性选择器来匹配您的文本框：

```
$('input[type="text"][clientid]') 
```

此外，将您的自定义属性重命名为`data-clientid`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:31:44.697

是的，您可以将[has-attribute 选择器](http://api.jquery.com/has-attribute-selector/)与[`.on()`](http://api.jquery.com/on/#direct-and-delegated-events)事件委托一起使用：

```
$(document).on('keypress', 'input[type="text"][clientid]', function(e) {
    // your code here
}); 
```

事件委托将对页面加载（并且代码已执行）后添加的元素做出反应。理想情况下，`document`您应该为页面加载时确实存在的元素指定一个选择器，该选择器将始终存在，并且将包含您想要对`keypress`事件做出反应的所有元素，而不是使用 。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-25T10:31:01.910

**是的。**您可以使用：

```
$(document).on('keypress', 'input[clientid]', function(e) {
    ...
}); 
```

或者更具体的定位：

```
$(document).on('keypress', 'input[clientid="1"]', function(e) {
    ...
}); 
```

# ada - Ada hello world 示例

> ID：14519910
> 
> 赞同：2
> 
> 时间：2013-01-25T10:29:45.010
> 
> 标签：ada

我在 Ada 中编写了一个简单的 hello world 程序，当我使用 gnatmake 编译它时，我得到一个名为“hello”的可执行文件。但是，当我尝试通过键入“hello”来运行程序时，我得到 command not found 错误。我正在使用 Linux VM 和 gcc 编译器。可能是什么问题？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:33:01.930

应该是路径问题。如果路径中没有当前目录，请尝试使用以下命令运行它：

```
./hello 
```

如果可执行文件位于不同的目录中（仍然不在您的路径中），请使用完全限定的可执行文件名称，例如（您需要替换您的*实际*路径）：

```
/full/path/to/hello 
```

# c# - razor @helper 返回什么类型？

> ID：14519911
> 
> 赞同：2
> 
> 时间：2013-01-25T10:29:46.547
> 
> 标签：c#, asp.net-mvc

猫我在@helper 函数上创建了一个委托？

```
@helper DisplayCategoryTree(int? parentId)
{       

   Func<Category, CategoryNode, MvcHtmlString> act = new Func<Category, CategoryNode, MvcHtmlString>(GetChildItem);
   act(Category, CategoryNode);

}

@helper GetChildItem(Category, CategoryNode)
{     

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T10:35:49.760

剃刀助手正在返回[System.Web.WebPages.HelperResult](http://msdn.microsoft.com/en-us/library/system.web.webpages.helperresult%28v=vs.111%29.aspx)，它实现`IHtmlString`了，因此您可以使用它而不是`MvcHtmlString`.

所以这个声明应该可以正常工作：

```
@helper DisplayCategoryTree(int? parentId)
{       

   Func<Category, CategoryNode, IHtmlString> act = 
       new Func<Category, CategoryNode, IHtmlString>(GetChildItem);
   act(Category, CategoryNode);
}

@helper GetChildItem(Category, CategoryNode)
{    
} 
```

# c# - DateTime.Now 相差一毫秒

> ID：14519912
> 
> 赞同：4
> 
> 时间：2013-01-25T10:29:46.390
> 
> 标签：c#, datetime, time

在我的应用程序中，我将 DateTime.Now 分配给新的 DateTime。然后我将其分配给一个值并将其写入数据库。但是当我从数据库中取回它并将变量与之前分配的新日期时间进行比较时，它会相差几毫秒。

任何人都知道为什么会发生这种情况？

例如

```
DateTime var1 = DateTime.Now;
Object1.DateTime = var1;

Database.SaveObject = var1

Object2 = Database.FindObjectById(objectId);

Assert.AreEqual(var1, Object2.DateTime); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T10:32:59.777

这很可能是 DB`datetime`列的精度问题：它没有足够的精度来存储长达一毫秒的时间。使用`datetime`时，时间部分会[以 0.000、0.003 或 0.007 秒的增量四舍五入](http://msdn.microsoft.com/en-us/library/ms187819.aspx)。

将列的类型切换为[`datetime2`](http://msdn.microsoft.com/en-us/library/bb677335.aspx)应该会有所帮助，因为它的分辨率为 100 纳秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T10:32:28.743

您使用的是 MS SQL Server，日期时间仅精确到 3 毫秒，因此您会发现该数字四舍五入到最接近的 3 毫秒。

请参阅[MSDN - TSQL 日期时间](http://msdn.microsoft.com/en-us/library/ms187819.aspx)

`DateTime2`如果您有 SQL2008 或更高版本，您可能想要使用。

# android - 如何隐藏 WebView 错误页面。可能吗？

> ID：14519915
> 
> 赞同：8
> 
> 时间：2013-01-25T10:29:51.470
> 
> 标签：android, error-handling, webview

我搜索并发现了类似的问题，但他们大多是说如何更改 webView 内容，而不是如何真正隐藏它。

我的 webView 最初是在 main.xml 中使用 android:visibility="gone" 隐藏的，我使用 myWebView.setVisibility(1) 将其动态更改为可见；当页面完全加载时（并且它可以工作）。现在，我想在检测到错误时隐藏这个 webView。我想隐藏它的原因是因为我在布局中有一个很好的背景来通知错误。我知道这不是最好的方法，以后可能会更改它，但是现在，我想解决的是为什么 webView 在发生错误时没有隐藏（也许只是为了好玩）。

这是我尝试过的：

```
@Override
public void onReceivedError (WebView view, int errorCode, 
                             String description, String failingUrl) {

        myWebView = (WebView) findViewById(R.id.webview);  
        // myWebView.setVisibility(0); // Doesn't work!

        // if (errorCode == ERROR_TIMEOUT) { // Commented just for trying

        try {view.stopLoading();} catch(Exception e){}
        try {view.clearView();} catch(Exception e){}

            view.loadUrl("file:///android_asset/error.html"); // This Works but I don't want it this way.
            view.setBackgroundColor(0x00000000); // Trying to make it transparent. Doesn't work here
            view.setVisibility(View.GONE); // Doesn't work. I have tried also with myWebView.
            //  }
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-04-07T04:16:31.500

这是我的想法：

```
 boolean isPageError = false;

 webView.setWebViewClient(new WebViewClient() {
        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
           isPageError = false;
        }

        @Override
        public void onPageFinished(WebView view, String url) {
            if (isPageError){
                webview.setVisibility(View.GONE);
                txtError.setVisibility(View.VISIBLE);
                txtError.setText("error message");
            }
        }

        @Override
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
           isPageError = true;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-17T11:53:33.163

> **它对我有用**

```
private boolean isError = false;

webView.setWebViewClient(new WebViewClient() {

    @Override
    public void onPageFinished(WebView view, String url) {
        Log.e(TAG, "onPageFinished");
        if (isError) {
            //Show error
        } else {
            //Hide error
        }
    }

    @Override
    public void onReceivedError(WebView webView, int errorCode, String description, String failingUrl) {
        super.onReceivedError(webView, errorCode, description, failingUrl);
        Log.e(TAG, "onReceivedError Old = " + errorCode);
        if (errorCode == -2) {
            isError = true;
        }
    }

    @Override
    @TargetApi(Build.VERSION_CODES.M)
    public void onReceivedError(WebView view, WebResourceRequest request, WebResourceError error) {
        super.onReceivedError(view, request, error);
        Log.e(TAG, "onReceivedError New = " + error.getErrorCode());
        if (error.getErrorCode() == -2) {
            isError = true;
        }
    }
} 
```

# trigger.io - 通过 trigger.io 使用 Parse.com 和高级定位推送通知

> ID：14519916
> 
> 赞同：2
> 
> 时间：2013-01-25T10:29:54.713
> 
> 标签：trigger.io, parse-platform

我已经获得了基本的推送通知，`Parse.com`可以使用`trigger.io`.

现在我想把它提升到一个新的水平并使用高级推送定位。更具体地说，我想定位与另一个用户一定距离内的用户，以告知他们附近有朋友。

Parse 的 REST API 看起来很简单：[https](https://parse.com/docs/push_guide#sending-queries/REST) ://parse.com/docs/push_guide#sending-queries/REST 。

但是，这需要我将位置数据保存在我的用户`Installation`对象上，为此我`objectId`需要`Installation`.

我[在另一个线程](https://stackoverflow.com/questions/11855996/get-objectid-after-parse-push-subscribe)中读到，当时（2012 年 9 月）一个当前无法检索`objectId`.

鉴于我的用例，您是否可以提供解决方法或估计何时可以添加此类功能`trigger.io`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T02:33:02.640

您应该使用 REST 调用自己创建安装对象。如此处所述：[https](https://www.parse.com/docs/rest#installations) ://www.parse.com/docs/rest#installations 。在您的情况下，您将位置作为附加参数传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T17:35:19.463

`forge.partners.parse.installationInfo`我们平台的 v1.4.31 提供了一个新的API - 请参阅[http://docs.trigger.io/en/v1.4/release-notes.html](http://docs.trigger.io/en/v1.4/release-notes.html)

# android - 访问特定布局的按钮

> ID：14519918
> 
> 赞同：0
> 
> 时间：2013-01-25T10:29:59.970
> 
> 标签：android, layout, button

我有一个答案：[访问每个布局](https://stackoverflow.com/questions/14501835/accessing-buttons-of-every-layout) 的按钮，了解如何显示特定布局的所有按钮，但我不明白这里的代码是我如何让它运行项目的其余部分完全一样上面的链接是我改变的：

```
package com.example.adapterlist;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;

public class MainActivity extends Activity {
    Map<String, Integer> layoutIds = new HashMap<String, Integer>();
    ArrayList<String> arrayForArrayAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final ListView listView = (ListView) findViewById(R.id.mylist);
        java.lang.reflect.Field[] ID_Fields = R.layout.class.getFields();
        String []values=new String[ID_Fields.length];
        int[] resArray = new int[ID_Fields.length];
        for(int i = 0; i < ID_Fields.length; i++){
            try {
                resArray[i] = ID_Fields[i].getInt(null);
                values[i]=getResources().getResourceEntryName(resArray[i]);
                Log.v("resArray[i]  " , getResources().getResourceEntryName(resArray[i]));

            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            }
        }
     ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
             android.R.layout.simple_list_item_1, android.R.id.text1, values);
             listView.setAdapter(adapter);
             listView.setOnItemClickListener(new OnItemClickListener(){
             @Override
             public void onItemClick(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    iJustClickedAnItemInTheList((String) listView.getSelectedItem());

                }
             });

    }

    private void iJustClickedAnItemInTheList(String idname) {
        setContentView(layoutIds.get(idname));
        ArrayList<Button> allButtonsInLayout = getViewsFromViewGroup(findViewById(android.R.id.content), Button.class);
    }

    public static <T> ArrayList<T> getViewsFromViewGroup(View root, Class<T> clazz) {
        ArrayList<T> result = new ArrayList<T>();
        for (View view : getAllViewsFromRoots(root)) 
            if (clazz.isInstance(view)) 
                result.add(clazz.cast(view));
        return result;
    }

    public static ArrayList<View> getAllViewsFromRoots(View...roots) {
        ArrayList<View> result = new ArrayList<View>();
        for (View root : roots)
            getAllViews(result, root);
        return result;
    }

    private static void getAllViews(ArrayList<View> allviews, View parent) {
        allviews.add(parent);
        if (parent instanceof ViewGroup) {
            ViewGroup viewGroup = (ViewGroup)parent;
            for (int i = 0; i < viewGroup.getChildCount(); i++)
                getAllViews(allviews, viewGroup.getChildAt(i));
        }
      }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:36:42.803

这个怎么样？唯一的问题是，您需要一个布局 ( `/res/layout/listactivity.xml`) 和一个 id 为 的列表视图`listView`。

```
public class MainActivity extends Activity {
    ListView lv;
    String[] layoutNames;
    int[] layoutIds;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listactivity);
        lv = (ListView)findViewById(R.id.listView);
    }

    @Override
    protected void onResume() {
        super.onResume();
        fill();
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, layoutNames);
        lv.setAdapter(adapter);
        lv.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {
                iJustClickedAnItemInTheList(arg2);
            }
        });
    }

    void fill() {
        java.lang.reflect.Field[] layoutFields = R.layout.class.getFields();
        layoutNames = new String[layoutFields.length];
        layoutIds = new int[layoutFields.length];
        for(int i = 0; i < layoutFields.length; i++){
            try {
                layoutIds[i] = layoutFields[i].getInt(null);
                layoutNames[i] = getResources().getResourceEntryName(layoutIds[i]);
            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            }
        }
    }

    private void iJustClickedAnItemInTheList(int position) {
        setContentView(layoutIds[position]);
        ArrayList<Button> allButtonsInLayout = getViewsFromViewGroup(findViewById(android.R.id.content), Button.class);
        Toast.makeText(this, "" + allButtonsInLayout.size(), Toast.LENGTH_SHORT).show();
    }

    public static <T> ArrayList<T> getViewsFromViewGroup(View root, Class<T> clazz) {
        ArrayList<T> result = new ArrayList<T>();
        for (View view : getAllViewsFromRoots(root)) 
            if (clazz.isInstance(view)) 
                result.add(clazz.cast(view));
        return result;
    }

    public static ArrayList<View> getAllViewsFromRoots(View...roots) {
        ArrayList<View> result = new ArrayList<View>();
        for (View root : roots)
            getAllViews(result, root);
        return result;
    }

    private static void getAllViews(ArrayList<View> allviews, View parent) {
        allviews.add(parent);
        if (parent instanceof ViewGroup) {
            ViewGroup viewGroup = (ViewGroup)parent;
            for (int i = 0; i < viewGroup.getChildCount(); i++)
                getAllViews(allviews, viewGroup.getChildAt(i));
        }
    }
} 
```

# entity-framework-ctp5 - 如何使用数据库中尚不存在的实体保存服务器生成的复杂对象树？

> ID：14519919
> 
> 赞同：0
> 
> 时间：2013-01-25T10:30:01.717
> 
> 标签：entity-framework-ctp5, breeze, savechanges

在我的水疗中心，我需要向客户端发送一个复杂的对象树并让用户填写他的数据，然后才能将实体保存在数据库中。因此，此时实体不存在于数据库中。对象树在服务器的内存中构建，只需调用`breeze.EntityQuery.from("ComplexeObjectTree")`. 实体通过剔除绑定到 Web 表单。用户首先输入所需的数据，然后才能按下保存按钮。表单中的一些实体属性是可选的并且具有默认值。如果用户不更改这些属性，beeze 将不会检测到任何更改并且不会将其拥有的实体放入更改集中。它们被标记为不变，但它们的 id 值仍然是`-1`（尚未保存）。但是只有当对象树中的所有实体（包括它们的关系）都已发送到服务器（以尊重数据库约束）时，才能成功执行数据库保存。保存操作应该产生一个或多个插入语句，对于那些在客户端没有更改但对数据库来说是新的实体 ( `id==-1`) 也是如此。我该如何处理这个用例？主键标记为已添加的所有实体不应该`id==-1`默认成为保存更改集的一部分吗？

很感谢任何形式的帮助，

安德烈亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:46:16.887

通常，您会在客户端而不是服务器上创建实体。这样，实体是新的，将保存在 save 方法中。

由于实体来自服务器并且它们没有在客户端上被更改，因此当它们返回时服务器没有理由对它们做任何事情，因为它们处于与它们离开时相同的状态。

因此，在客户端上创建新实体，然后调用保存更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T19:26:06.320

让我们按照您的方式进行，并接受您的要求，即对象图必须在服务器上构建。如果我理解正确，您是在为用户提供机会，在将它们提交到永久存储之前调整您在服务​​器上生成的一些值。听起来是个不错的计划。

“ComplexObjectTree”不必是实体图。它可以是任意数据对象。它仍然可以是 CLR 类型，但不会是（或包含）元数据中描述的对象，EF 或 Db 也不会知道它们。该对象图仅作为驱动在客户端构建真实实体图的信息而存在。它包含所有你不想在客户端计算的难以计算的值……比如生命意义的答案以及今年谁赢得了超级碗。

您的查询返回此对象，其中包含数据但没有实体。querySuccess 回调`CreateComplexTree(data)`将**使用此数据制作客户端上的实体图**。

由于元数据，实体图将由 Breeze 客户端理解的实体组成。除非您有异议，否则这些实体也会在服务器上被理解，并且可以像任何其他实体一样保存和查询（如果为假，您可以绕过该假设......但让我们一次解决一个问题）。

所以你都准备好了。您遍历数据图，边走边创建实体。当您在数据中看到 (-1) 时，您就知道要创建该类型的新实例。将数据复制到实体初始化对象中，该对象是`manager.createEntity('Foo', {...})`. 这里没有业务逻辑 - 没有计算 - 只是复制的猴子工作。

我不知道是要插入图表中的每个对象还是只插入其中一些对象。也许其中一些是预先存在的实体，除非用户也更改它们，否则它们不会改变。没什么大不了的。您可以按照相同的方法在客户端上使用类似`manager.createEntity('Bar', {...}, breeze.EntityState.Unchanged)`.

现在您有了一个合适的 Breeze 实体图，可以进行绑定、导航和保存。如果用户喜欢服务器创建它的方式，她按下 [保存] 按钮，Breeze 会在实体图中找到所有更改，然后将它们转到服务器。

正如 Bryant 所观察到的，你不能真正信任客户。您需要遍历图表来验证它。但不管你的方法是什么，这都是真的。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T18:34:20.250

科比完全正确的是他的回答。这个答案只是为了得到澄清。

不完全确定我理解这个问题，但只是为了清楚微风 EntityManager 不支持具有相同“键”的多个相同类型的实体（即在您的情况下为-1）。它将具有相同键的单一类型的所有实体视为“相同”实体。

听起来您想要做的是将一堆“假”实体检索到 entityManager 中，然后有条件地将其中一些转换为“真实”**新**实体并保存它们，从而将这些记录添加到数据库中。这是你想要完成的吗？

# html - (HTML) 包括不工作

> ID：14519926
> 
> 赞同：0
> 
> 时间：2013-01-25T10:30:38.597
> 
> 标签：html, css, apache

我正在编写一个脚本，它使用一堆情境变量将 .HTML 文件放在一起。代码看起来很好，显示也很好，除了一个问题 - 我试图包含的 CSS 和 HTML 文件没有显示出来，当我查看源代码时，包含语句就在那里，但是，它们不会出现在实际页面上。

这是我的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
      <link rel="shortcut icon" href="/newsbasearchive/Images/favicon.ico" />
      <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

      <title>NewsBase - News, analysis and business intelligence from emerging markets</title>

      <style type="text/css">
      @import url("/newsbasearchive/CSS/newsbase.css");
      </style>

      <!--#include virtual="/newsbasearchive/includes/google.html" -->

    </head>
    <body>
       <table width="1148" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">

    <!--#include virtual="/newsbasearchive/includes/header.html" -->
        <!--#include virtual="/newsbasearchive/includes/nav.html" --> 
```

我上传到的网站已经使用了包含这些文件的页面，并且它们工作正常 - 唯一的区别是这些页面是 .JSP （并以 .jsp 方式包含页面，我认为是 '<@' -它们都来自 /newsbasearchive/ （网站的根目录），但是我从我给他们的路径中引用根目录，所以我不明白为什么它不起作用。

谁能告诉我怎么了？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:11:46.740

您不能`css`使用与 .html 中相同的方式在 html 中包含文件`jsp`。要在 html 中包含样式表，请在以下`head`部分中使用此格式：

```
<LINK href="special.css" rel="stylesheet" type="text/css"> 
```

您可以在此处阅读有关它的更多信息：[HTML 中的样式表](http://www.w3.org/TR/html4/present/styles.html)

# php - 选择具有 id 的行，除非它有父级，然后选择那个

> ID：14519928
> 
> 赞同：1
> 
> 时间：2013-01-25T10:30:42.683
> 
> 标签：php, mysql

我有一个包含文章和股票信息的数据库（两个表）。输入文章 id 时，我从文章表中选择文章，做一些其他的事情，然后查看库存表（如果文章可用）。

这可能很容易`SELECT * FROM articles`，但是：我的`articles`表有一个字段`parent_id`。如果已设置，我应该选择父行。让我举例说明：

```
+----+-----------+---------+---------+
| id | parent_id | article | country |
|----|-----------|---------|---------+
|  1 |           | abc     | uk      |
|  2 |           | cde     | us      |
|  3 |           | efg     | can     |
|  4 | 6         | hij     | mex     |
|  5 |           | klm     | bra     |
|  6 |           | nop     | us      |
|  7 | 8         | qrs     | mex     |
|  8 |           | tuv     | uk      |
+----+-----------+---------+---------+ 
```

如果我搜索 article `abc`，它应该返回英国国家的第 1 行。如果我正在搜索`hij`，查询应该返回第 6 行，国家为 US 而不是第 4 行，国家为 mex。有什么方法可以在 MySQL 中执行此操作，还是更快/更好/使用 PHP 将其拆分为两个查询的唯一方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:34:15.883

你可以使用 mysql IF Conditionals [Mysql docs](http://dev.mysql.com/doc/refman/5.5/en/if.html)

但是，您很快就会得到一个难以调试的邪恶 sql 语句。使用多个查询和 php if 可能会更快/更容易解决。

有一个替代选项，您可以编写视图或存储过程来为您实现它，但在收益方面再次受到质疑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:37:24.440

您可以使用`LEFT`外部连接来完成：

```
SELECT 
    COALESCE(p.id, a.id) AS id
  , COALESCE(p.country, a.country) AS country 
FROM 
        articles AS a
    LEFT JOIN 
        articles AS p
            ON p.id = a.parent_id 
WHERE
    a.article LIKE '%hij%' ;          -- or:  a.article = 'hij' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:33:23.423

[如果函数](http://dev.mysql.com/doc/refman/5.0/en/if.html)我认为 IFNULL 是你所追求的函数，你可以使用 MySQL 。

```
IFNULL(parent_id, id) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T10:40:37.397

您可以使用 LEFT JOIN SELECT a2.id, a2.country FROM 文章 a1 LEFT JOIN 文章 a2 ON (a2.id = a1.parent_id) WHERE a1.article = 'hij';

# sql - 在 Oracle SQL 的 MERGE 语句中为 INSERT/UPDATE 添加条件

> ID：14519933
> 
> 赞同：21
> 
> 时间：2013-01-25T10:31:05.127
> 
> 标签：sql, oracle

我必须在表 target_table 中插入/更新一些记录。这些记录来自一个 source_table。

我正在使用 MERGE 更新/插入 target_table。

```
MERGE
   INTO  target_table tgt
   USING source_table src
   ON  ( src.column1 = tgt.column1 and
         src.column2 = tgt.column2)
WHEN MATCHED
THEN
   UPDATE
   SET   tgt.column3= src.column3,
         tgt.column4 = src.coulmn4   
WHEN NOT MATCHED
   THEN
INSERT ( tgt.column1,
         tgt.column2,
         tgt.column3,
         tgt.column4 )
VALUES ( src.coulmn1,
         src.coulmn2,
         src.coulmn3,
         src.coulmn4); 
```

我想在更新时添加一些特定条件。

`IF target_table.column3 in (val1','val2)`

那么只有更新，否则没有更新或插入。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-25T10:35:01.727

您可以简单地将`WHERE`子句添加到`UPDATE`. [有关它的更多信息，请参阅 oracle 文档。](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_9016.htm#i2081030)

因此，在您的情况下，它应该如下所示：

```
...
WHEN MATCHED
THEN
   UPDATE
   SET   tgt.column3= src.column3,
         tgt.column4 = src.coulmn4
   WHERE tgt.column3 IN (val1, val2) 
WHEN NOT MATCHED
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-15T12:18:14.840

而是尝试如下操作：

```
MERGE
INTO  target_table tgt
USING source_table src
ON  (src.column1 = tgt.column1)
WHEN MATCHED
THEN
UPDATE
SET   tgt.column3= src.column3,
     tgt.column4 = src.coulmn4  
WHERE src.column1 = tgt.column1 and
     src.column2 = tgt.column2
WHEN NOT MATCHED
THEN
INSERT ( tgt.column1,
     tgt.column2,
     tgt.column3,
     tgt.column4 )
VALUES ( src.coulmn1,
     src.coulmn2,
     src.coulmn3,
     src.coulmn4); 
```

# java - 我可以在 Spring 解析器中返回 RuntimeBeanReference 吗？

> ID：14519944
> 
> 赞同：1
> 
> 时间：2013-01-25T10:31:41.253
> 
> 标签：java, spring

我想为 element 创建一个解析器。他看起来像

```
<custom-element ref="beanName"/> 
```

我想要这样的东西-

```
public class CustomElementDefinitionParser implements BeanDefinitionParser{
    @Override
    public BeanDefinition parse(Element element, ParserContext parserContext) {
        String refName = element.getAttribute("ref");
        if(!refName.isEmpty()){
            return ?????;
        }else
            throw new RuntimeException("Must have 'ref' attribute!!");
    }
} 
```

但我不知道如何返回 BeanDefinition，如果我只知道 bean 的名称（它是 'ref' 属性）。

我知道，我可以`RuntimeBeanReference`只使用 bean 名称，但是有没有办法在解析器中返回它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:07:49.147

您返回的`BeanDefinition`应该是由您的自定义元素表示的 bean 的定义，可以使用[`org.springframework.beans.factory.support.BeanDefinitionBuilder`](http://static.springsource.org/spring/docs/3.2.1.RELEASE/javadoc-api/org/springframework/beans/factory/support/BeanDefinitionBuilder.html). 我假设 ref 应该是该 bean 的构造函数参数或属性。

如果您只是尝试对 ref 引用的 bean 执行一些处理，那么您应该使用 a[`org.springframework.beans.factory.config.BeanPostProcessor`](http://static.springsource.org/spring/docs/3.2.1.RELEASE/javadoc-api/org/springframework/beans/factory/config/BeanPostProcessor.html)来执行此操作。

# php - PHP set_time_limit 然后重置数据库更改

> ID：14519945
> 
> 赞同：0
> 
> 时间：2013-01-25T10:31:44.160
> 
> 标签：php, api, timeout

我有一个 API，移动应用程序使用它来创建用户配置文件。似乎有时应用程序会超时并显示错误消息，但服务器会继续创建配置文件。结果是我们有一些重复的配置文件。

我在想，作为不需要完全重新架构的“快速修复”，我可以尝试设置 PHP 脚本的执行时间以匹配应用程序中的超时限制。我的问题是，如果达到这个时间限制，我能否以某种方式执行“撤消对数据库的更改”脚本，无论是自动的还是我指定的脚本？

我知道我真的应该更多地研究为什么 PHP 会达到超时限制（这是几分钟！），但我已经在服务器上调整了一些位，并且大多数执行时间只有几毫秒。只有少数情况会发生超时。例如，我正在查看用户位于以色列的那一刻。以色列的网络连接不好吗？谁能想到任何可能导致我正在经历的行为的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:38:24.293

一种方法是使用数据库事务。我在 PostgreSQL 方面有这方面的经验，但我相信 MySql 也会这样做。您会将所有内容包装在事务中。然后您可以在检测到失败时取消事务，回滚属于该事务的所有内容。

然后，您无法捕获脚本超时，因为它是一个致命错误，但是如果事务未提交，则应自动回滚（取消），因此您应该设置...

也许它对你有用？

参考：

*   [http://dev.mysql.com/doc/refman/5.0/en/commit.html](http://dev.mysql.com/doc/refman/5.0/en/commit.html)
*   [http://www.postgresql.org/docs/8.3/static/tutorial-transactions.html](http://www.postgresql.org/docs/8.3/static/tutorial-transactions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:40:18.237

假设：您正在使用带有 INNODB 的 MySQL。

您应该考虑使用[transactions](http://dev.mysql.com/doc/refman/5.0/en/commit.html)。[使用 INNODB，如果会话超时，](http://dev.mysql.com/doc/refman/5.0/en/innodb-implicit-commit.html) **如果**您将自动提交设置为 0 ，事务将回滚，如下所示：

```
SET GLOBAL init_connect='SET autocommit=0'; 
```

[与PDO](http://php.net/manual/en/book.pdo.php)的交易示例：

```
try {
    // First of all, let's begin a transaction
    $db->beginTransaction();

    // A set of queries ; of one fails, an exception should be thrown
    $db->query('first query');
    $db->query('second query');
    $db->query('third query');

    // If we arrive here, it means that no exception was thrown
    // i.e. no query has failed ; and we can commit the transaction
    $db->commit();

} catch (Exception $e) {
    // An exception has been thrown
    // We must rollback the transaction
    $db->rollback();
} 
```

# ruby - 使用没有 Rails 的 RSpec 加载 ActiveRecord 固定装置

> ID：14519951
> 
> 赞同：9
> 
> 时间：2013-01-25T10:31:56.937
> 
> 标签：ruby, unit-testing, rspec, rails-activerecord

我正在使用一些我正在为其编写单元测试`ActiveRecord`的模型。`Rails`在我的测试中，我希望能够使用固定装置，并认为我会为此使用一些[rspec-rails](https://github.com/rspec/rspec-rails)功能。我不能简单地使用`require "rspec-rails"`，因为它有一些 Rails 依赖项而且我没有使用 Rails。

这是`spec_helper`我正在使用的：

```
require 'active_record'
require 'active_record/fixtures'
require 'active_support'
require 'rspec/rails/extensions/active_record/base'
require 'rspec/rails/adapters'
require 'rspec/rails/fixture_support'  # Includes ActiveRecord::TestFixtures
                                       # into the RSpec config

require 'my_models'

# Setup database connection
environment = "test"
configuration = YAML::load(File.open('config/database.yml'))
ActiveRecord::Base.establish_connection(configuration[environment])

RSpec.configure do |config|
  config.fixture_path = File.expand_path("../../test/fixtures", __FILE__)

  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  config.use_transactional_fixtures = true

  # Run specs in random order to surface order dependencies. If you find an
  # order dependency and want to debug it, you can fix the order by providing
  # the seed, which is printed after each run.
  #     --seed 1234
  config.order = "random"

  # Run each test inside a DB transaction
  config.around(:each) do |test|
    ActiveRecord::Base.transaction do
      test.run
      raise ActiveRecord::Rollback
    end
  end
end 
```

这是一个测试的例子

```
require 'spec_helper'

describe Transaction do

  before :each do
    self.class.fixtures :users, :merchants
  end

  it "should do this and that" do
    ...
  end
end 
```

问题是，这样，固定装置没有加载。我查看了`rspec-rails`代码，但无法弄清楚我应该扩展什么模块或应该调用什么方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T10:27:55.153

在深入研究 Active Record 代码后，我发现未加载固定装置的原因是因为我没有设置`ActiveRecord::Base.configurations`. 以下解决了该问题：

```
configuration = YAML::load(File.open('config/database.yml'))
ActiveRecord::Base.configurations = configuration 
```

# jquery - Fancybox 不会在 $(elem).click() 上触发，但会在“真实”点击时触发？

> ID：14519954
> 
> 赞同：0
> 
> 时间：2013-01-25T10:32:01.990
> 
> 标签：jquery, triggers, click, fancybox

我无法触发fancybox。我将其设置为在您单击元素时触发。我仍然不知道*为什么*，但由于某种原因，fancybox 只有在我使用绑定时才有效`live()`，有点像这样：

```
$(document).ready(function() {
    // This works
    $('.fancybox').live('mousedown', function() {
        $(this).fancybox();
    });

    // This doesn't
    $('.fancybox').fancybox();
}); 
```

在此处阅读更多相关信息： [Fancybox 已加载，但没有任何反应，也没有错误？](https://stackoverflow.com/questions/14458123/fancybox-is-loaded-but-nothing-happens-and-no-errors)

问题是，它仅在我实际单击该元素时才有效。如果我尝试使用以下方式触发点击：

```
$('.fancybox').trigger('mousedown'); 
```

我什么也得不到！它只是行不通。

我需要这样做的原因是因为图像是在画廊中用 PHP 打印出来的（带有缩略图等）。我只想要一个可用画廊的下拉菜单，所以在页面加载时，我隐藏所有缩略图，然后循环浏览它们并创建一个包含所有画廊的下拉菜单。到现在为止还挺好！如果我使用检查器（使用 chrome）显示元素，然后手动单击它，它工作正常！虽然，问题是，当我尝试使用下拉菜单触发点击时，什么也没有发生！

我进行了设置，以便`<option>`下拉列表中的每个都具有画廊/缩略图 ID 的数据属性，并且当下拉列表更改时（当您选择一个选项时），它会自动找到正确的图像并触发点击 - 这反过来应该打开一个fancybox。我知道它找到了正确的图像，然后单击它，只是单击它时没有任何反应。

尝试一下！

网址：http: [//goo.gl/r4Klf](http://goo.gl/r4Klf)

右键单击内容中的第一个下拉菜单，然后检查它。在它上面，你会看到一堆`.ngg-galleryoverview`元素。单击其中一个并删除应用于元素的所有样式（在 element.style 中，样式基本上隐藏了元素）。然后展开元素，你会在其中看到一个`.ngg-gallery-thumbnail`. `display: none`从造型中移除。您现在应该能够在页面上看到该元素。如果您尝试单击它，fancybox 将打开。但是，如果您尝试使用 来单击它`$(the element).trigger('mousedown')`，它将无法正常工作。尝试使用 href 属性定位它，例如：

```
jQuery('a[href="http://hallarna.se/wp-content/gallery/2013/spoksonatenloggaliten.jpg"]').trigger('mousedown'); 
```

请注意，jQuery 处于 noConflict 模式，这意味着您必须使用 jQuery() 而不是 $()。

我已经为此奋斗了好几天了。任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:30:50.617

我想我明白问题出在哪里了。当您触发 mousedown 时，它只会在您单击时触发插件以使用指定的元素；它实际上不应该显示任何内容...直到您单击它或触发单击。

尝试类似的东西

```
jQuery('a[href="http://hallarna.se/wp-content/gallery/2013/spoksonatenloggaliten.jpg"]').trigger('mousedown').trigger('click'); 
```

尽管我会寻找一种解决方案来使fancybox按预期工作，但 $('.fancybox').fancybox();

# android - 获取膨胀线性布局的高度

> ID：14519956
> 
> 赞同：0
> 
> 时间：2013-01-25T10:32:05.937
> 
> 标签：android

我正在使用这种方法[Android：展开/折叠动画](https://stackoverflow.com/questions/4946295/android-expand-collapse-animation)在我的列表视图中有一个可展开的线性布局。我的列表视图行显示了带有简短描述的线性布局，当我单击此列表视图时，我调用 AsyncTask 以获取 Internet 上的详细描述，膨胀该行的隐藏线性布局并展开以显示接收到的数据。

问题是，如果我将目标高度设置为正在扩展的隐藏列表视图，一切都会完美无缺，但我不知道我将从 AsyncTask 收到多少数据，所以我需要获取膨胀隐藏的高度线性布局。

我已经尝试过：

*   getHeight() -> 返回 0。
*   getMeasureHeight()（[如何获取或计算膨胀视图的宽度/高度](https://stackoverflow.com/questions/6430270/how-to-get-or-compute-the-width-height-of-an-inflated-view)）-> 对于其中的文本视图（20px）返回 256
*   观察者（[在运行时获取膨胀的线性布局的高度](https://stackoverflow.com/questions/8832803/getting-the-height-of-an-inflated-linearlayout-at-runtime)）进入无限循环。

在网上阅读了一些材料，我发现视图在屏幕上绘制后只有一个高度。那么，将这个高度设置为展开布局的目标的最佳方法是什么？

我在我的 asyncTask 的 onPostExecute 中膨胀和扩展布局。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:56:45.290

考虑将 Runnable 发布到膨胀视图

```
final View view = findViewById(R.id.something);
view.post(new Runnable()
    {
        @Override
        public void run() {
            Log.d(TAG, "Height = "+view.getHeight());
        }
    }); 
```

此可运行对象保留在事件队列中，直到视图完全膨胀，因此 getHeight() 和 getWidth() 方法返回非零值。Romain Guy 的解释[在这里](https://stackoverflow.com/a/3602144/293847)

# python - 如何使用 python 脚本安装 msi？

> ID：14519958
> 
> 赞同：3
> 
> 时间：2013-01-25T06:51:50.557
> 
> 标签：python, windows, installation

有没有安装msi的python脚本？我需要安装 msi 并运行它而不显示任何对话模式。我的文件夹 c:\user\documents 上有 msi，我有一个使用 python 脚本开发的 wxpython GUI。我需要静默安装 msi 并从 GUI 运行 exe。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-25T13:33:06.167

使用简单。没有提供转换，并且代码是非阻塞的：

```
import os
os.system('msiexec /i %s /qn' % msi_location) 
```

使用转换，代码是非阻塞的：

```
import os
os.system('msiexec /i %s TRANSFORMS=%s /qn' % (msi_location, transforms_location) 
```

使用转换，代码被阻塞 - 所以你知道它什么时候完成：

```
import subprocess
subprocess.call('msiexec /i %s TRANSFORMS=%s /qn' % (msi_location, transforms_location), shell=True) 
```

有关 TRANSFORMS 的更多信息：[https ://msdn.microsoft.com/en-us/library/aa367447%28v=vs.85%29.aspx](https://msdn.microsoft.com/en-us/library/aa367447%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T07:11:12.620

这不是一个真正的 python 问题，它取决于您的特定 MSI 包是否允许无人值守安装。请参阅此 SO 文章

[检测无人值守安装的 MSI 参数](https://stackoverflow.com/questions/2366480/detect-msi-parameters-for-unattended-install)

如何了解 MSI 包的参数。然后，使用 windows 命令 shell 手动尝试无人值守安装，调用`msiexec`. 看这里

[http://technet.microsoft.com/en-us/library/cc759262%28v=ws.10%29.aspx](http://technet.microsoft.com/en-us/library/cc759262%28v=ws.10%29.aspx)

了解更多信息。

最后，在python中你需要做的就是用包名和正确的参数`os.system`来调用。`msiexec`

# tfs - TFS：在进一步进行更改之前获取更改集的文件

> ID：14519961
> 
> 赞同：0
> 
> 时间：2013-01-25T10:32:13.157
> 
> 标签：tfs

比如说，我有更改集 A，我在其中签入了 10 个文件 FileA1、FileA2..FileA10。我将对上述任何我不确定的文件进行进一步的更改。因此，我需要拥有 Change Set A 中文件的副本，物理上位于某个目录中，例如**C:\ChangeSetAFiles**并继续进行更改。万一我的新更改是错误的，我很容易发现。

请帮帮我。

我可以在 Tortoise SVN 中轻松做到这一点，将一组文件导出到我需要的任何位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:39:37.833

签入变更集后，您有几个选项。

*   要么你不签入更改，直到你对它们完全满意
*   或者您可以搁置更改，将它们添加到源代码管理中，但在签入之前对其他人不可用。

如果需要，您可以撤消签出或使用搁置集签入更改。无论您做什么，如果更改被签入并导致问题，您始终可以按更改集编号回滚更改。

# ruby-on-rails - proc调用是否存储在类变量threadsafe中？

> ID：14519970
> 
> 赞同：0
> 
> 时间：2013-01-25T10:32:57.233
> 
> 标签：ruby-on-rails, ruby, thread-safety

如果我将块存储在控制器的类变量中，然后从实例中调用它，是否会导致线程范围出现任何问题？传递给块的参数对于每个实例都是本地的。

这是代码示例：

```
class BlockExecutor
  def initialize(&block)
    self.instance_eval &block
  end
  def sub_block(&block)
    @block = block
  end
  def call(object)
    @block.call(object)
  end
end

module ClassDSL
  extend ActiveSupport::Concern
  module ClassMethods
    def define(&block)
      @executor = BlockExecutor.new &block
    end

    def execute_block(object)
      @executor.call(object)
    end
  end
end

class Controller
  include ClassDSL

  define do 
    sub_block do |object|
      # mutate object
    end
  end

  def run
    new_object = self.class.execute_block(object)
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:35:36.130

首先，我认为您在控制器中忘记了以下内容：

```
class Controller
  include ClassDSL
  extend ClassDSL::ClassMethods
  ...
end 
```

或者可能来自 ClassDSL 模块：

```
module ClassDSL
  def self.included(base)
    base.extend(ClassMethods)
  end
  ..
end 
```

也就是说，您真的是在谈论线程还是只是在谈论进程？使用进程，您没有问题，但是一旦您使用线程来运行操作，多个线程将共享 @executor 类实例变量，因此每当您运行存储在其中的块时，您永远不会知道哪个线程负责它的定义。

所以最后，这取决于您在块中执行的代码以及您是否只改变局部范围的变量。您的“对象”似乎是本地的，但可能很容易引用线程范围之外的其他对象。

# objective-c - 如何初始化一个带有标签栏的视图控制器？

> ID：14519974
> 
> 赞同：-3
> 
> 时间：2013-01-25T10:33:03.223
> 
> 标签：objective-c, xcode

我不知道如何初始化包含标签栏的视图控制器，并且标签栏中有 2 个视图控制器？

我有一个 current_view_controller、一个 OrderPanel、一个 firstViewController 和一个 SecondViewController。

firstViewController 和 SecondViewController 是 OrderPanel 中的选项卡。如何正确初始化和调用 current_view_controller 中的 OrderPanel？

这是将选项卡设置为视图控制器的类 OrderPanel

```
 #import "OrderPanel.h"

  #import "OrderPanelFirstViewController.h"

  #import "OrderPanelSecondViewController.h"

  @implementation OrderPanel

  @synthesize window = _window;
  @synthesize tabBarController = _tabBarController;

  - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:            (NSDictionary *)launchOptions
  {
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
UIViewController *viewController1, *viewController2;
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    viewController1 = [[OrderPanelFirstViewController alloc]       initWithNibName:@"OrderPanelFirstViewController_iPhone" bundle:nil];
    viewController2 = [[OrderPanelSecondViewController alloc]       initWithNibName:@"OrderPanelSecondViewController_iPhone" bundle:nil];
} else {
    viewController1 = [[OrderPanelFirstViewController alloc] initWithNibName:@"OrderPanelFirstViewController_iPad" bundle:nil];
    viewController2 = [[OrderPanelSecondViewController alloc] initWithNibName:@"OrderPanelSecondViewController_iPad" bundle:nil];
}
self.tabBarController = [[UITabBarController alloc] init];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, nil];
self.window.rootViewController = self.tabBarController;
[self.window makeKeyAndVisible];
return YES;
} 
```

那么如何在我当前的视图控制器中调用 orderPanel 呢？

```
 - (IBAction)T1pressed:(id)sender {
         // how do i call order panel?

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:43:57.237

尝试这个：

```
self.tabBarController = [[UITabBarController alloc] init];

UIViewController *viewController1 = [[firstViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1 ,viewController2, nil];

[self.view addSubview:tabBarController.view]; 
```

# android - 如何在ontouchevent中检查动画图像是否被触摸

> ID：14519975
> 
> 赞同：0
> 
> 时间：2013-01-25T10:33:04.760
> 
> 标签：android, touch, android-animation

在我的应用程序中，我使用了 6 个图像视图并从下到上为所有人提供了动画，宽度和高度是线性布局中的 fill_parent，现在我想添加触摸事件但我不知道如何检查动画图像是否被触摸。我尝试了以下代码，但这不起作用。我应该使用什么方法，怎么可能？

```
 public boolean onTouch(View v, MotionEvent event) {

 switch(v.getId()){
    case R.id.imageView1:
    if (event.getAction() == MotionEvent.ACTION_UP)
        {
          //  Intent intent = new Intent(YOUR_ACTIVITY.this, NEXT_ACTIVITY.class);
            //startActivity(intent);

        iv1.startAnimation(sci);
        sci.setAnimationListener(new AnimationListener() {

            public void onAnimationStart(Animation animation) {
                // TODO Auto-generated method stub

            }

            public void onAnimationRepeat(Animation animation) {
                // TODO Auto-generated method stub

            }

            public void onAnimationEnd(Animation animation) {
                // TODO Auto-generated method stub
                   //iv3 = (ImageView)findViewById(R.id.imageView3);
                iv1.clearAnimation();
                iv1.startAnimation(hyperspaceJump);
            }
        });
        }
    break;

    case R.id.imageView2:
    case R.id.imageView3:
    case R.id.imageView4:
    case R.id.imageView5:
    case R.id.imageView6:
    } 
```

# facebook - 使用图形 api 获取用户拥有的页面

> ID：14519982
> 
> 赞同：0
> 
> 时间：2013-01-25T10:33:21.413
> 
> 标签：facebook, facebook-graph-api

我想使用图形 api 和 fql 搜索检索用户拥有的页面的 page_id。我使用了 $facebook->api('/me/accounts') （图形 API），但它显示错误

```
 error :[message] => An active access token must be used to query information about the     
 current user.
  [type] => OAuthException
  [code] => 2500 . 
```

我也有用户 fql 查询，但它不起作用。我怀疑应该在什么地方使用访问令牌以及应该在哪里指定托管权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T11:53:22.300

首先，您需要获得访问用户数据的基本权限。有很多关于这方面的信息，包括官方文档。获得基本权限后，您的 api 调用

```
$facebook->api('/me/accounts'); 
```

应该工作

# libssl - 安装 libssl0.9.8 包

> ID：14519986
> 
> 赞同：2
> 
> 时间：2013-01-25T10:33:31.687
> 
> 标签：libssl

我需要在我的 64 位 centos 6.3 机器上安装 libssl0.9.8 包。我尝试使用以下命令执行此操作：sudo yum install libssl0.9.8。我收到以下错误：没有可用的软件包 libssl0.9.8。错误：无事可做 我该如何继续？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T10:38:34.747

试试看，yum install openssl-0.9.8

据我所知，那是包含 libssl.so.0.9.8 的包。

# javascript - 将 mustache 模板嵌入到另一个模板中

> ID：14519987
> 
> 赞同：0
> 
> 时间：2013-01-25T10:33:37.520
> 
> 标签：javascript, templates, mustache, hogan.js

我使用 Mustache 作为 HTML 模板和 HoganJS 作为渲染器。我的问题如下：我有表格模板（表格、标题、正文），但我也有 TBODY 的每个 TR 元素的模板。我想要的只是在 TABLE 模板中重用 TR 模板。

有没有可能？

示例代码：

```
<!-- Row Template -->
<script type="text/html" id="table_row_template">
<tr>
    <td><input type="text" name="Name" class="item-name autocomplete-groups" value="{{name}}" /></td>
    <td><input type="text" name="count" class="item-count count" name="count" value="{{count}}" /></td>
</tr>
</script>

<!-- Table Template -->
<script type="text/html" id="section_table_template">
<table>
    <thead>
        <tr><th>Name</th><th>Count</th></tr>
    </thead>
    <tbody>
        <!--
            Here I want ot iterate over the collection
                and render template from '#table_row_template'
        -->
    </tbody>
</table>

</script>

<script type="text/javascript">
    var context = {
        collection: {
            {
                "item1": { "name": "item1", "count": "1" },
                "item2": { "name": "item2", "count": "12" },
                "item3": { "name": "item3", "count": "5" },
                "item4": { "name": "item4", "count": "32" },
                "item5": { "name": "item5", "count": "6" },
            },

         ..........
        }
    }

    var t = hogan.compile(document.getElementById('section_table_template').innerHTML);
    var rendered = t.render(context);
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:21:52.783

您正在寻找 Mustache 的“部分”标签：

```
<script type="text/html" id="section_table_template">
<table>
    <thead>
        <tr><th>Name</th><th>Count</th></tr>
    </thead>
    <tbody>
        {{# collection }}
            {{> table_row }}
        {{/ collection }}
    </tbody>
</table>
</script> 
```

要让它与 Hogan 一起工作，[您只需告诉它您的部分在哪里](http://twitter.github.com/hogan.js/#rendering)：

```
<script>
var t = hogan.compile(document.getElementById('section_table_template').innerHTML);
var partials = {
    table_row: document.getElementById('table_row_template').innerHTML
};
var rendered = t.render(context, partials);
</script> 
```

# liferay-6 - Portlet 不会从 LIFERAY 6.1 中的站点页面中删除

> ID：14519994
> 
> 赞同：0
> 
> 时间：2013-01-25T10:33:52.823
> 
> 标签：liferay-6

我正在使用 Liferay 6.1。

当我在启动服务器后添加一个 portlet 时，一切正常。

问题是，当我尝试通过单击右上角的“x”图标将其删除时，它会被删除。

但是，刷新页面后，它再次显示在同一个地方，虽然我没有再次添加它。

此外，当我添加另一个 portlet 时，它不会显示。

关于这里出了什么问题的任何建议..

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T09:44:07.487

您使用什么帐户来删除 portlet？尝试门户管理员而不是社区管理员

# ruby-on-rails - ActionController::RoutingError（没有路线匹配 [GET] “/assets/images/control_top.png”）：在 rails 3.2.8

> ID：14519997
> 
> 赞同：21
> 
> 时间：2013-01-25T10:34:01.247
> 
> 标签：ruby-on-rails

背景图像未上传到我的视图页面中。显示此错误。

ActionController::RoutingError (没有路由匹配 [GET] "/assets/images/control_top.png")

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-25T10:42:45.990

在生产环境中，Rails 将不负责提供静态资源。因此，您会收到此错误。

这由应用程序的 config/environment/production.rb 中的此设置控制：

```
config.serve_static_assets = false 
```

你可以设置为**真**

或试试这个

```
rake assets:precompile 
```

命令（从 app/assets 编译并复制图像、css 和 js 到 public/.

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-07-15T02:22:02.523

如果您升级到新版本的 Rails（想到 Rails 4 和 Rails 3.2.16），突然开始看到这个错误，很可能您的样式表指向的是非指纹、非缓存版本的文件。如果您正在使用资产管道，为了利用它，您需要使用指向文件的指纹缓存版本的新帮助程序。为此，您需要将 erb 嵌入到您的 css 文件中，或者使用 sass。

不正确（使用 sass）：

```
.class
  background: url('asset.png') no-repeat 
```

正确（使用 sass）：

```
.class
  background: image-url('asset.png') no-repeat 
```

有关更多信息，请参见此处： http: [//guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets](http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-05-05T06:31:39.757

可能对某人有所帮助，我尝试了所有答案，却忘记了最基本的事情要做。清除浏览器缓存，一旦完成，我就可以走了:)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-02-17T12:27:17.647

你必须运行这个命令

```
rake assets:precompile 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-22T12:37:49.917

我继续使用资产管道，但必须更改我使用的硬编码 url，如下所示（对于我的开发环境）：

我更新了我的 /config/application.rb 以使用资产管道：

```
config.assets.enabled = true 
```

我将所有图片网址更改为指向“/assets/image_without_old_image_directory_name.jpg”

例如，我的图像曾经在 /public/images/xxx.jpg 中。我将它们移至 /app/assets/images/xxx.jpg。我将 img src 从 /images/xxx.jpg 更改为 /assets/xxx.jpg

我最终不需要进行资产预编译，只需删除 /public 和 /tmp 中资产管道的所有可见方面，它就可以正常工作（用于开发）。

# sql - Hibernate sql选择实体和列

> ID：14519998
> 
> 赞同：0
> 
> 时间：2013-01-25T10:34:02.220
> 
> 标签：sql, hibernate

我的 sql 查询看起来像

```
select e.*, EMP.pk_e.f_Data(e.id) as DATA from employee e 
```

类中的数据`Employee`是`transient`，如何将此查询的结果列表映射到`Employee`