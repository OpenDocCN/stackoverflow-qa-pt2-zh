# StackOverflow 问答 15001000-15001999

# java - Hibernate 一对多集合被删除

> ID：15001000
> 
> 赞同：2
> 
> 时间：2013-02-21T11:22:37.650
> 
> 标签：java, hibernate, jpa

我有一个持有 3 个集合的对象。这些集合中的对象继承了相同的超类。

我将 SingleTable 继承与 @ForceDiscriminator 一起使用。

集合是单向的一对多。

当我清除其中一个集合时，其他两个将失去与持有对象的外键链接。

我在 WebSphere 7（带有 JPA2.0 功能包）容器中使用 Hibernate 3.5.3。

**实体**

```
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@Table(name="PLANUNG")
@DiscriminatorColumn(name="DISC", discriminatorType=DiscriminatorType.STRING)
@DiscriminatorValue("dummy")
@ForceDiscriminator
public abstract class Planung extends EntityBase {

@Column(name = "JAHR", nullable=false)
private int jahr;

@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, fetch=FetchType.EAGER)
@JoinColumn(name="PLANUNG_ID", referencedColumnName="id")
@OrderBy("id ASC") 
private List<Werte> Werte;

[...]

@Entity
@DiscriminatorValue(PlanungA.NAME)
public class PlanungA extends Planung {
    public static final String NAME = "PlanungA";
}
@Entity
@DiscriminatorValue(PlanungB.NAME)
public class PlanungB extends Planung {
    public static final String NAME = "PlanungB";
}
@Entity
@DiscriminatorValue(PlanungC.NAME)
public class PlanungC extends Planung {
    public static final String NAME = "PlanungC";
}

---

@Entity
@DiscriminatorValue(Base.NAME)
public class Base extends AbstractBase {
public static final String NAME = "Base";

@OrderBy("jahr ASC")
@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)
@JoinColumn(name="BASE_ID", referencedColumnName="id")
private List<PlanungA> planungA;

@OrderBy("jahr ASC")
@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)
@JoinColumn(name="BASE_ID", referencedColumnName="id")
private List<PlanungB> planungB;

@OrderBy("jahr ASC")
@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)
@JoinColumn(name="BASE_ID", referencedColumnName="id")
private List<PlanungC> planungC;

[...] 
```

**申请代码**

```
List list = base.getPlanungA();
list.clear(); 
```

**问题**

除了其他语句之外，Hibernate 还会发出以下 SQL：

```
update
    PLANUNG 
set
    BASE_ID=null 
where
    BASE_ID=? 
```

因此，所有集合（PlanungA、B、C）都失去了对 Base 对象的引用。

缺少鉴别器（例如 AND DISC='PlanungA'）。

**我已经尝试过的**

*   我已经升级到 Hibernate 3.6.10.Final（只是为了尝试）。它没有解决这种行为。
*   搜索了世界...

非常感谢任何帮助，指出我类似的问题等。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:47:48.527

谢谢，overmeulen，为我指出了相应的[休眠问题](http://hibernate.onjira.com/browse/HHH-1134 "休眠问题")。它仍然是一个开放的 Hibernate 错误。

我应用了问题评论中提到的解决方案之一：

```
@OrderBy("jahr ASC")
@OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)
@JoinColumn(name="BASE_ID", referencedColumnName="id")
@Where(clause="DISC='PlanungA'")
private List<PlanungA> planungA; 
```

通过插入**@Where**语句由 OR 映射发出，如下所示：

```
update
    PLANUNG 
set
    BASE_ID=null 
where
    BASE_ID=? 
    and (
        DISC='PlanungA'
    ) 
```

问题解决了

谢谢！

# c# - 在 MailMessage 中使用 linq 访问属性

> ID：15001003
> 
> 赞同：0
> 
> 时间：2013-02-21T11:22:45.630
> 
> 标签：c#, asp.net, linq

我第一次在这个项目中使用 linq，通常会创建一个包含私有和公共字段的类，当我提交时，我会为消息中的人发送带有 obj.propertyname 的消息。IE

```
"Date risk Identified: .................: " +    obj.Date_Risk_Identified.ToShortDateString() + " \n\n" +
"Name of person reporting risk: ........: " + obj.Name_Risk_Reporter + " \n\n" + 
```

这将是我的方法：

```
public void SendEmail(o_RiskReport obj, Int32 iIn_RiskID) 
```

我正在尝试对这个项目的提交按钮做同样的事情：

```
_db.tbl_Concerns.InsertOnSubmit(concern);
_db.SubmitChanges();

Int32 iId = concern.RaisedConcernId;

SendMail(concern, iId); 
```

获取新关注`raisedConcernId`的`Id`内容，我想访问`concern object`提交的内容，以便我可以在我的电子邮件中将它们分配给相关人员。

但我的电子邮件不知道我`concern`将如何做到这一点？我努力了 ：

```
protected void SendMail(object concern, Int32 iId) 
```

但我`concern.objectName`的`SendMail()`方法不起作用。

我需要与 dbContext 建立新连接吗？

# php - 外来字符 - 保存到数据库？

> ID：15001008
> 
> 赞同：-1
> 
> 时间：2013-02-21T11:22:51.120
> 
> 标签：php, mysql

我的领域里有这样的词：

```
Überblick 
```

当我将它们保存到数据库时，它变为：

```
Ãberblick 
```

我试过了：

```
htmlspecialchars
$db->escape
mysql_real_escape_string 
```

使用 PHP 将其保存到 mysql 数据库的正确解决方案是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T11:25:47.783

初始化连接后，执行以下操作：`mysqli_set_charset("utf8");`

# gwt - 使用 Maven / GWT 进行 Javax 验证

> ID：15001009
> 
> 赞同：0
> 
> 时间：2013-02-21T11:22:52.003
> 
> 标签：gwt, maven-2, vaadin, gwt-bootstrap

我正在尝试使用[gwtbootstrap](https://github.com/gwtbootstrap/gwt-bootstrap)，并在 CellTables 示例中实现了我的项目。我使用 Vaadin 6.8.8、GWT 2.5.0 和 Maven 2.2.1

现在，当我尝试编译小部件集时，我有这个警告：

> 类路径上是否有validation-api-.jar 和validation-api--sources.jar？

和这个错误：

> javax.validation.ConstraintViolation 类型无法解析。它是从所需的 .class 文件中间接引用的

好吧，我都试试！！来自 Stackoverflow 和网络的很多解决方案。从将 javax 依赖项添加到 pom.xml 到将 .jar 添加到类路径等等。

为什么 gwtbootstrap 似乎适用于 javx.validation 以及为什么我不能在我的项目中添加 javax.validation？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:52:02.620

我通过使用本教程的 5\. 方法中的“硬方法”来解决它：

*   [如何添加类路径](http://javarevisited.blogspot.de/2012/10/5-ways-to-add-multiple-jar-to-classpath-java.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T18:42:37.877

您对 Maven 中声明的 javax.validation API 的依赖关系如何？尝试将依赖项的范围更改为提供，如下所示；这将指示 Maven 在构建应用程序时将依赖项添加到类路径中。

请务必阅读[有关 Maven 依赖范围的文档](https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Scope)。

```
<dependency>
  <groupId>javax.validation</groupId>
  <artifactId>validation-api</artifactId>
  <version>1.0.0.GA</version>
  <scope>provided</scope>
</dependency>
<dependency>
  <groupId>javax.validation</groupId>
  <artifactId>validation-api</artifactId>
  <version>1.0.0.GA</version>
  <classifier>sources</classifier>
  <scope>provided</scope>
</dependency> 
```

# asp.net - AjaxFileUpload - 隐藏上传按钮

> ID：15001011
> 
> 赞同：0
> 
> 时间：2013-02-21T11:22:52.743
> 
> 标签：asp.net, ajax

我正在使用 AjaxFileUpload .Net4，是否有任何属性/方法可以隐藏 FileUpload 控件的上传按钮，因为我正在使用多个 FileUpload 控件并希望通过单击一个按钮来上传所有文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-15T15:42:48.323

为您的页面添加样式

```
 <style>
    .ajax__fileupload_uploadbutton{
        display:none;
    }
    </style> 
```

# asp.net-mvc - $.getJSON() 在 ASP.NET MVC4 中不起作用

> ID：15001016
> 
> 赞同：0
> 
> 时间：2013-02-21T11:23:00.520
> 
> 标签：asp.net-mvc, jquery

这真的很奇怪，我不知道我哪里出错了。

这是我的控制器：

```
 namespace MvcAJAX.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            return View();
        }        

        public ActionResult Called()
        {
            var retObject = new { rollNo = 2, name = "Deepanjan" };
            return Json(retObject);

        }
    }    
} 
```

这是我的索引视图：

```
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>
<script>
    /// <reference path="~/Scripts/jquery-1.7.1.js" />
    $(document).ready(function () {
        $('#button1').click(function () {
            $.getJSON("/Home/Called",function () {
                alert('Working!');
                $('#p1').text("Roll Number was " + data.rollNo + " and the Name was " + data.name);
            });
        });
    });
</script>
<h1>This page demos Load with callback function!</h1>
<input type="button" id="button1" value="Click Me!"/><br />
<p style="height:200px" id="p1"></p>
<hr /> 
```

我的 getJSON 根本不起作用，我什至没有收到警报。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:08:49.403

从视图中尝试 Ajax 帖子，就像这样

```
$.ajax({
 url: '@Url.Action(action)',
  数据：数据
  类型：'POST'，
  成功：函数（结果）{

                              }
                          });

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:09:35.157

你在哪里包含 jquery 文件？Jquery 文件必须首先比您可以编写自己的 javascript 代码..

并尝试此代码；

```
$(document).ready(function () {
    $('#button1').click(function () {
        $.getJSON("/Home/Called", function (retObject) {
            alert('Working!');
            $('#p1').text("Roll Number was " + retObject.rollNo + " and the Name was " + retObject.name);
        });
    });
}); 
```

尝试替换`return Json(retObject);`为`return Json(retObject,JsonRequestBehavior.AllowGet);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-07T15:58:23.777

* * *

***> 只在你的 Mvc 控制器函数中写入这一行

> Configuration.ProxyCreationEnabled = false;
> 
> * * *

# c++ - 数值求解非线性系统的最佳库或软件是什么？

> ID：15001018
> 
> 赞同：2
> 
> 时间：2013-02-21T11:23:04.290
> 
> 标签：c++, matlab, wolfram-mathematica, scientific-computing, equation-solving

我有一个由 8 个 7 年级 8 个多项式方程组成的系统，其中 8 个变量具有约束（最小和最大可接受值​​​）。

根据您的经验和知识，解决此类问题最有效的“包”是什么？Mathematica，Matlab，C++/Java 中的数学库，...

我尝试了一些幼稚的方法，但效果不佳....所以现在我尝试安全地玩（尽可能）

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:26:06.663

您不会说这是否是常数（已知）系数的问题，或者系数是否具有符号性。我假设当您说 7 级多项式时，我假设您的意思是多项式的次数。

好吧，让我们从一个事实开始。具有一般系数的 5 次或更高阶的多项式将没有解析解（通常）。您总能幸运，但不要指望有解。如果系数是象征性的，那么当你高于 4 度时会遇到麻烦。

你有一个多项式系统。例如，假设我们有两个二次方程，两个变量？我们可以解决其中一个，消除那个变量，然后代入另一个。我们将在剩余变量中得到一个四次（4 次）方程。求解 4 个解。

但是如果我们有更大的系统，或者更高阶的多项式呢？一般规则是消除和求解方案将有效地简化为最终方程，其阶数等于方程阶数的乘积。因此，一个由 8 个多项式组成的系统，每个多项式都有 7 次，相当于求解一个 56 次多项式。如果系数是常数并且已知，那么理论上我们可以使用类似的多项式求根器。其中有许多可以产生数值根解。但是如果系数是符号的，并且你需要一个符号解，或者如果你想要一个解析解，那么你几乎肯定会被卡住。

同样，一些简单的问题可能有解决方案。当我用这种形式生成的问题可以解决时，我曾经很惊讶，产生了一个很好的、易于写出的解决方案。但通常你不会那么幸运。

当然，您正在限制解决方案。这并不难，因为您可以简单地排除所有超出范围的解决方案，只要您正在寻找数值解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:29:44.413

对于您提到的所有软件包和语言，我对方程求解有一些经验。

对程序员来说效率最高的是 Mathematica，Matlab 和 Symbolic Math Toolbox 紧随其后。对于您引用的规模不大和复杂性的问题，我认为您不应该关心执行效率，Mathematica 和 Matlab 都不会为解决此类问题而出汗。

请注意，这个答案是主观的，问题（在一定程度上）也是如此。

# javascript - 单选按钮突出显示

> ID：15001025
> 
> 赞同：0
> 
> 时间：2013-02-21T11:23:19.803
> 
> 标签：javascript, coldfusion, radio-button, highlight, coldfusion-10

这是我当前的代码：

```
<label>
  <input type="radio" id="nosupp" name="nosupp">
    No Supplier Chosen
</label><br/><br/>

<cfloop query="supplier">
  <label>
    <input type="radio" id="chk1" name="chooseSupp" onchange="change(this);">
      Chosen Supplier
  </label>
</cfloop> 
```

Javascript：

```
<script type="text/javascript">
  function change(obj) {
    var tr=obj.parentNode.parentNode;
    var tbl = tr.parentNode.parentNode;
    var inputs = tbl.getElementsByTagName("input");
    for(var i = 0;i<inputs.length;i++)
      inputs[i].parentNode.parentNode.style.backgroundColor='transparent';
      tr.style.backgroundColor=(obj.checked)? 'red' : 'transparent';
  }
</script> 
```

这样做的目的是在单击时突出显示循环中的每个单选按钮。

我的问题是，当我单击循环外的单选按钮（nosupp）时，循环中最后一个检查的突出显示不会消失。

我不想突出显示 nosupp 之一或选择 nosupp 之一。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:31:39.293

这样做（我假设您的 nosupp 和 supp 在同一个父表中，或者根据您的需要修改此代码）：

```
<input type="radio" id="nosupp" name="nosupp" onchange="resetSupp(this);">

<script type="text/javascript">
function resetSupp(obj) {
var tr=obj.parentNode.parentNode;
var tbl = tr.parentNode.parentNode;
var inputs = tbl.getElementsByTagName("input");
for(var i = 0;i<inputs.length;i++)
  inputs[i].parentNode.parentNode.style.backgroundColor='transparent';
  tr.style.backgroundColor= 'transparent';
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:32:54.703

问题是当您只需要选择一些时，您是根据“输入”类型进行选择的。我所做的只是添加`class="chooseSupp"`到循环内的输入并将您的 javascript 中的选择器更改为`var inputs = tbl.getElementsByClassName("chooseSupp");`. 试一试，让我知道它是怎么回事。

```
<label>
  <input type="radio" id="nosupp" name="nosupp">
    No Supplier Chosen
</label><br/><br/>

<cfloop query="supplier">
  <label>
    <input type="radio" id="chk1" name="chooseSupp" class="chooseSupp" onchange="change(this);">
      Chosen Supplier
  </label>
</cfloop>

<script type="text/javascript">
  function change(obj) {
    var tr=obj.parentNode.parentNode;
    var tbl = tr.parentNode.parentNode;
    var inputs = tbl.getElementsByClassName("chooseSupp");
    for(var i = 0;i<inputs.length;i++)
      inputs[i].parentNode.parentNode.style.backgroundColor='transparent';
      tr.style.backgroundColor=(obj.checked)? 'red' : 'transparent';
  }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:34:00.203

对于属于该组的每个输入，您必须具有相同的名称，因此请更改：

```
<input type="radio" id="nosupp" name="nosupp"> 
```

到

```
<input type="radio" id="nosupp" name="chooseSupp"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T11:34:03.213

> 为所有输入元素提供 id 作为面板

```
 .setTransparent{background:transparent}

    if($(input[name==chooseSupp] :checked))
    $("#panel :input").addClass(setTransparent);

   // write other conditions
    $("#panel :input").removeClass(setTransparent); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T11:50:02.513

```
<div id="div_myradgroup">
    <label>
      <input type="radio" id="nosupp" name="chooseSupp" onchange="change(this, true);">No Supplier Chosen
    </label>
    <label>
        <input type="radio" id="chk1" name="chooseSupp" onchange="change(this);">Chosen Supplier
    </label>
    <label>
        <input type="radio" id="chk2" name="chooseSupp" onchange="change(this);">Chosen Supplier
    </label>
</div>

<script type="text/javascript">

    var group = document.getElementById('div_myradgroup');
    if (!group) {
        // you decide what should happen if you're expecting it to be in the dom
    }

    function change(obj, nohlight) {
        var label = obj.parentNode,
            inputs = group.getElementsByTagName("input"),
            inp = null; // a single input assigned to in loop

        for (var i = 0; i < inputs.length; i++) {
            inp = inputs[i];
            if (inp.getAttribute('type') === 'radio') {
                inp.parentNode.style.backgroundColor = 'transparent';
            }
        }

        if (!nohlight) {
            label.style.backgroundColor = (obj.checked) ? 'red' : 'transparent';
        }
    }

</script> 
```

# cakephp - Cakephp Helper 在某些视图上触发错误

> ID：15001029
> 
> 赞同：1
> 
> 时间：2013-02-21T11:23:41.087
> 
> 标签：cakephp, helper, php

我的帮手有一些奇怪的事情。首先，我刚开始使用 cakePHP 和 MVC。也许我做错了什么，但找不到什么。

对于我的应用程序，我必须使用 Xml 文件来处理我的文本的语言（我知道有很多不同的方式来处理语言，但我需要使用这个）。所以我创建了一个助手（XmlHelper.php，在 View\Helper\Xmlhelper.php 中）

```
<?php
App::uses('AppHelper', 'View/Helper','Xml');

class XmlHelper extends AppHelper {
    var $xml = array();
    var $name = 'Xml';
    var $filename = '';

    public function getXml($filename, $language, $view) {
         $this->xml = Xml::toArray(Xml::build('Xml/'.$filename.'.xml')); //THE LINE
         $this->xml = $this->xml[$filename][$language][$view];
         $this->filename = $filename;
    }

    public function readXml($tags) {
        $tempXml =  $this->xml;
        foreach ($tags as $tag){
            $tempXml =  $tempXml[$tag];
        }
        return  $tempXml;
    }
} 
```

从我的控制器我得到：

```
class EventsController extends Controller {
public $helpers = array('Html', 'Form','Xml');
    public $components = array('Session'); 
```

在我的大部分观点中，一切正常，但其他一些只是开火

```
Error: Class 'Xml' not found File:
C:\wamp\www\cakephp\app\View\Helper\Xmlhelper.php Line: 11 
```

在我看来，我打电话：

```
<?php $this->Xml->getXml('dico',$ln,'thanks'); ?>
<h1><?php echo $this->Xml->readXml(array('texte'));?></h1> 
```

ln 定义明确。

如果有人可以解释我出了什么问题，那将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:36:11.143

问题是您在 XmlHelper 中使用的 XML*类*。

基本上，你用`App:uses();`错了，一次只能包含一个类，所以你需要添加另一行：

```
App::uses('AppHelper', 'View/Helper');
App::uses('Xml', 'Path/To/Xml.php'); 
```

我真的不能帮你，`Path/To/Xml.php`因为我不知道你把它保存在哪里。如果它是一个外部库，它真的应该在 Vendors 文件夹中。[请参阅此处了解更多信息](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#loading-classes)。

# matlab - 修改 dicom 图像并将其保存为原始数据？

> ID：15001042
> 
> 赞同：0
> 
> 时间：2013-02-21T11:24:11.800
> 
> 标签：matlab, dicom

这是 matlab 数据，我正在尝试修改 dicom 图像像素。

dicom 图像是 4D 的，Rgb 图像是 3d 的，其他维度代表着名。我拍摄每一帧并修改一些特定的像素值，并尝试将它们保存为原始格式的整个 dicom 图像数据。

我以原始格式保存它的原因是我想在 dcmtk 的 dcmodify 命令中将此数据用作文件。所以，我的第一个问题是，我是否以正确的格式保存原始数据？如果没有，请建议我该怎么做。此外，您是否知道 dcmodify 命令 dcmtk 是否可以像这种情况下处理 4d 数据，或者它只能修改一帧？谢谢。

```
clc
clear all
close all
img=dicomread('Bad001_2CH_01_anon.dcm');
%%implay(img);
[rows,columns,colors,frames]=size(img);
for i=1:frames
    img(1:25,:,:,i)=0;
    disp(i);
    figure(1)
    imshow(img(:,:,:,i))
end
fid=fopen('image.raw','w+');
cnt=fwrite(fid,img,'uint8');
fclose(fid); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:14:16.423

使用 dmtk 不需要原始数据：“ [dcmodify 是一个允许在 DICOM 文件中修改、插入和删除标签和项目的工具。](http://support.dcmtk.org/docs-dcmrt/dcmodify.html) ”

此外，原始数据在极少数和特定情况下是可取的，因为文件中的一些元数据说明那里有什么以及它是如何存储的，这在程序必须读取信息时有很大帮助。

我从未使用过 dmkt，但我想您应该使用 dicomread 读取数据（就像您所做的那样），修改它（就像您所做的那样），然后再次使用[dicomwrite将其保存为 DICOM](http://www.mathworks.nl/help/images/ref/dicomwrite.html)

要在 DICOM 中保留元数据，您还需要使用[dicominfo](http://www.mathworks.nl/help/images/ref/dicominfo.html)提取元数据，以便在保存文件时将其放回原处。

```
img = dicomread('originalfile.dcm');
metadata = dicominfo('originalfile.dcm');

% do something with the img

% save altered DICOM with metadata
dicomwrite(img, 'processedFile.dcm', metadata, 'CreateMode', 'copy'); 
```

然后你可以调用：

```
dcmodify [options] writtenDicomFile 
```

其中*writtenDicomFile*是您用于保存文件的名称，[options] 指定您如何更改文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:34:53.890

您可能想看看[gdcmimg](http://gdcm.sourceforge.net/html/gdcmimg.html)和/或[gdcmraw](http://gdcm.sourceforge.net/html/gdcmraw.html)取决于您真正想做的事情

# inputstream - ImageIO.read(InputStream) 返回 null

> ID：15001045
> 
> 赞同：1
> 
> 时间：2013-02-21T11:24:25.603
> 
> 标签：inputstream, derby, bufferedimage

我面临一个我找不到解决方案的问题。所以请求所有阅读本文的人。请在这方面帮助我。

我将图像文件从“.png”文件保存到 apache derby db 作为 Blob 格式。文件保存没有任何问题。

要从 derby 读取数据，我首先将数据作为 Blob 获取，然后将它们转换为 InputStream，然后使用以下代码将其存储到我创建的类“Person”对象中

```
Blob patientPhoto = rs.getBlob("photo");

person.setPhoto(patientPhoto.getBinaryStream()); 
```

## 类人的概述如下所示

```
 Public class Person {
    private String personName;
    private InputStream photo;

public void setPhoto(InputStream photo){
        this.photo = photo;
    }
Public InputStream getPhoto(){
    return photo;
    }
 } 
```

* * *

最初，我将四个 Person 对象与图像一起存储在 derby 中。然后我从 derby 中检索这四个人对象并将它们存储到 Vector 数组中。我从向量数组中开始一一显示它们，如下所示

## 方法一：从向量数组初始化人物对象的方法

```
Person data = new Person();

int i=0;

data = vector[i++]; 
```

## 方法二：人物照片的展示方法

```
InputStream img = data.getPhoto();

// The image recieved from db should be buffered as it is not real file
// but bytes of streams

BufferedImage buffImg = null
    if(img!=null){
      try {
        buffImg = ImageIO.read(img);
      } catch (IOException e) {
         e.printStackTrace();
      }

    //a panel with JLabel where Image will be displayed

    pnlImg.setImage(buffImg);
    }

try {
    img.close();
    } catch (IOException e) {
      e.printStackTrace();
    } 
```

* * *

从索引 0 到 3 的向量数组检索的所有四张照片都显示正常，但是当我尝试从向量索引 2 到 0 向后获取人员对象时，会引发空指针异常。代码 ImageIO.read(img); 当“img”不为空时返回空值。

我无法理解为什么它显示为 null 而“img”不为 null。从矢量索引 0 到 3 时，它工作，然后向后退，它不工作。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:56:15.413

我相信 Blob 的 InputStream 仅在您当前位于该记录上时才有效。因此，您不应期望从 getBinaryStream() 获得的值会在很长一段时间内保持有效。

相反，您的应用程序应在获得 blob 后立即从流中读取字节，然后您可以前进到结果集中的下一条记录。

因此，更改您的 Photo 类，以便 setPhoto() 方法将 InputStream 中的数据读取到它自己的字节数组中，然后您可以在调用 getPhoto() 时将自己的 ByteArrayInputStream 返回到 Photo 的私有字节数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-22T21:01:04.283

我知道这是一个旧帖子，但如果您遇到类似的问题，您可以试试这个。我也有类似的问题，并且能够以以下方式解决。因此，您可以将类 Person 更改为：

```
Public class Person {
    private String personName;
    private BufferedImage photo;

    public void setPhoto(BufferedImage photo){
        this.photo = photo;
    }
    public BufferedImage getPhoto(){
        return photo;
    } 
```

}

然后从 blob 读取时，只需将 Inputstream 转换为 BufferedImage，然后将其设置为 person 对象，如下所示：

```
Blob patientPhoto = rs.getBlob("photo");
InputStream ins = patientPhoto.getBinaryStream();
person.setPhoto(ImageIO.read(ins)); 
```

# php - 图像闪烁ajax轮询

> ID：15001048
> 
> 赞同：0
> 
> 时间：2013-02-21T11:24:36.260
> 
> 标签：php, javascript, ajax

我目前正在使用 ajax 轮询定期从数据库中获取新数据并将其显示给用户。它工作正常，除了有时，获取的图像开始闪烁，然后闪烁突然停止。这是获取数据的 JavaScript：

```
function loadLog(){     
    $.ajax({
        url: "stream.php",
        cache: false,
        success: function(html){
$("#inner").html(html);         
        }
    });
}
setInterval (loadLog, 2500); 
```

stream.php 文件包含检查数据库是否有新数据的基本 sql 命令。所以这些命令每 2.5 秒调用一次。如果帖子类型是图片，则附带一条语句，例如：user_name 发布了一张新图片，x 秒前。语句从不闪烁，但图像会闪烁。有没有办法阻止图像的闪烁？（有趣的是，如果数据库已经有图片，那么只有新发布的图片会闪烁，而旧的图片不会。所以如果总共有 3 张图片，两张旧的和一张新的，那么新的一张会闪烁，而其他的则没有，尽管正在轮询整个脚本而不是特定图像。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:30:16.983

我的猜测是，这是因为您`#inner`每次都在替换 div 的 HTML，因此它正在重新渲染。

最优雅的方法是只获取新项目（通过将时间戳参数传递给stream.php，即`stream.php?timestamp=X`只返回您的提要中自时间戳以来的项目，然后`.prepend();`将该内容返回到`#inner`div。

另一个建议是将该内容加载到一个新的隐藏 div 中，以便它完全呈现，然后快速显示/隐藏旧的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:31:56.560

尝试仅更新#inner 的一部分。例如，如果图像未更改，则仅更新文本。如果图像已更改 - 用新的替换它。我认为在这种情况下你不会注意到闪烁效果。还要查看这些图像的 http 标头 - 可能存在不正确的 Expires、Last-Modified 等标头，并且浏览器会多次加载相同的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:40:10.697

自最近几天以来，我一直在解决同样的问题，最后我得到了以下示例代码。

您需要的是将最后更新的新请求传递`time-stamp`给新请求，并根据传递和当前`time-stamp`之间的查找记录。`time-stamp``time-stamp`

**索引.php**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>testing comet</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link rel="stylesheet" href="css/style.css" />
        <script type="text/javascript" src="js/jquery.js"></script>
    </head>
    <body>

    <div id="content"></div>

<script type="text/javascript">

    var Comet = function (data_url)
    {
        this.timestamp = 0;
        this.url = data_url;  
        this.noerror = true;

        this.connect = function()
        {
            var self = this;

            $.ajax(
            {
                type : 'post',
                url : this.url,
                dataType : 'json', 
                data :
                {
                    'timestamp' : self.timestamp
                },
                success : function(response)
                {
                    self.timestamp = response.timestamp;
                    self.handleResponse(response);
                    self.noerror = true;          
                },
                complete : function(response)
                {
                    if (!self.noerror)
                    {
                        setTimeout(function(){ comet.connect(); }, 5000);           
                    }
                    else
                    {
                        self.connect(); 
                    }
                    self.noerror = false; 
                }
            });
        }

        this.disconnect = function() {}

        this.handleResponse = function(response)
        {
            $('#content').append('<div>' + response.msg + '</div>');
        }

        this.doRequest = function(request) {
            $.ajax(
            {
                type : 'post',
                url : "index.php",
                data :
                {
                    'msg' : request,
                    'submit' : "Send"
                }
            });
        }
    }

    var comet = new Comet('./backend.php');
    comet.connect();
</script>
</body>
</html>
```

**后端.php**

```
<?php

    $filename  = dirname(__FILE__).'/data.txt';

    $msg = isset($_GET['msg']) ? $_GET['msg'] : '';
    if ($msg != '')
    {
        file_put_contents($filename,$msg);
        die();
    }

    $lastmodif    = isset($_GET['timestamp']) ? $_GET['timestamp'] : 0;
    $currentmodif = filemtime($filename);
    while ($currentmodif <= $lastmodif) // check if the data file has been modified
    {
        usleep(10000); // sleep 10ms to unload the CPU
        clearstatcache();
        $currentmodif = filemtime($filename);
    }

    $response = array();
    $response['msg']       = file_get_contents($filename);
    $response['timestamp'] = $currentmodif;
    echo json_encode($response);
    flush();
?>
```

您需要做的就是`txt file time modification`用`mysql`查询替换。

**用mysql替换txt文件的示例代码**

```
<?php
date_default_timezone_set('Asia/Kolkata');
$connection = mysql_connect('localhost','root','')or die(mysql_error());
$database   = mysql_select_db('stackoverflow')or die(mysql_error());

function get_date()
{
    $query = mysql_query("show table status from stackoverflow like 'last_update'")or die(mysql_error());

    $row = array();
    while($result = mysql_fetch_assoc($query))
    {
        $row[] = $result;
    }

    return strtotime($row[0]['Update_time']);
}

$lastmodif    = isset($_POST['timestamp']) ? $_POST['timestamp'] : 0;
$currentmodif = get_date();

while ($currentmodif <= $lastmodif)
{
    usleep(10000);
    clearstatcache();
    $currentmodif = get_date();
}

$query_db = mysql_query("SELECT UNIX_TIMESTAMP(last_update.created) AS DATE,last_update.* FROM last_update WHERE UNIX_TIMESTAMP(last_update.created) BETWEEN '".$lastmodif."' AND '".$currentmodif."'")or die(mysql_error());

$row_db = array();
$response = array();
while($result_db = mysql_fetch_assoc($query_db))
{
    $response['msg'][]       = $result_db['title'];
}

$response['timestamp'] = $currentmodif;
$response['lastmodif'] = $lastmodif;
echo json_encode($response);
flush();
```

希望这会帮助你。

# codeigniter-2 - CodeIgniter 跨多个视图的持久数据

> ID：15001049
> 
> 赞同：0
> 
> 时间：2013-02-21T11:24:38.610
> 
> 标签：codeigniter-2

我正在使用 CodeIgniter 构建一个 webapp，但我是新手。我有不同部分的首页，这些部分使用数据库中的不同数据数组。

我想要的是从基本控制器加载数据一次并扩展这个控制器并在多个视图中重用这些数据。

我不想做的是在其他控制器上重复相同的数据库调用。

这甚至可能吗？

我现在拥有的是：

```
class MY_Controller extends CI_Controller
{
    public function __construct()
    {
      parent::__construct();
      $data['somevar'] = $this->some_model->get();
    }

} 
```

我想在页面的某个部分的 foreach 循环中使用 $somevar 。

注意：我使用的是模板库。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:47:22.620

您需要了解的是，页面的每次刷新都会再次加载整个 CI 应用程序（因此每次页面加载都会发生构造函数调用）。因此，从一个视图到下一个视图的数据调用没有持久性（假设您确实在谈论一个新页面）。

您必须想出另一种方法来持久化数据——在 cookie、客户端存储、会话或服务器端缓存中。这样，数据将在不同的页面视图中可用，而无需一遍又一遍地请求。

# android - 无法在印度境外登录我的 android 应用程序

> ID：15001053
> 
> 赞同：1
> 
> 时间：2013-02-21T11:24:47.107
> 
> 标签：android, gmail

我开发了一个[移动安全](https://play.google.com/store/apps/details?id=com.secuiritylite.smslite&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5zZWN1aXJpdHlsaXRlLnNtc2xpdGUiXQ..)应用程序，在该应用程序中，有一个忘记密码的选项（即应用程序密码）。因此，如果忘记密码，我将通过“MY GMAIL ACCOUNT my@gmail.com”将他/她的密码发送到他/她的帐户（user@gmail.com）。现在，问题来了：因为我在印度制作了这个 id，如果有人（例如）是美国的人安装了我的应用程序，并且正在点击忘记密码选项。现在，当我的应用程序尝试使用 my@gmail.com 登录 gmail 时，谷歌正在阻止登录，因为这个 id 是在印度制造的，并且正在印度（美国）以外的地方访问。

所以请任何想法，这样我就可以避免这个问题.....任何帮助表示赞赏..!!!

# firefox - 如何禁用mozgrabber？

> ID：15001055
> 
> 赞同：1
> 
> 时间：2013-02-21T11:25:03.817
> 
> 标签：firefox, tinymce

当使用 FF 的用户单击元素时，我尝试禁用 mozgrabber 以防止这种调整大小 - 并在 tinymce 中拖放内容

*（在 ff 中使用微小的全功能示例插入图层并单击以查看我在说什么）*

经过一些谷歌时间后，我找到了类似的解决方案

```
 document.designMode = "on";
 document.execCommand('enableObjectResizing', false, 'false'); 
```

和

```
span[\_moz_anonclass="mozGrabber"] {
display:none !important;} 
```

但这些都不适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-29T10:34:57.917

我有同样的问题。

我通过在元素父级上设置**contenteditable=false来修复它。**但你应该只在 Firefox 上这样做，因为 IE 的行为不同。

如果您无法在 dom 中修复它，请尝试使用**-moz-user-select** ( [https://developer.mozilla.org/de/docs/Web/CSS/-moz-user-select](https://developer.mozilla.org/de/docs/Web/CSS/-moz-user-select) )

如果 contenteditable 已经激活，您可以使用该 css 调用禁用它，它仅适用于 FF

# c# - 在 C# 中将数据绑定到 DataGridView

> ID：15001060
> 
> 赞同：0
> 
> 时间：2013-02-21T11:25:12.530
> 
> 标签：c#, datagridview, sqlcommand

我有一个表`ID`和一个`Name`列，我想显示一个列`ID`，`Name`在一个`DataGridView`示例中，`Textbox`当我输入`ID`并单击搜索按钮时，datagridview 会显示特定的记录。在搜索`Button`中，我有以下代码，但它给出了错误

```
con.Open();
Sqlcommand cmd = new Sqlcommand("Select * from Registration where ID = '"+textBox1.Text+"'")
sqldatareader reader = cmd.Executereader();
if (reader.HasRows)
{
          datagridview1.DataSource = reader.GetSqlValues()
 } 
```

如何将数据绑定到 datagridview？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:47:19.863

代替数据阅读器使用`dataSet`：

```
con.Open();

Sqlcommand cmd = new Sqlcommand("Select * from Registration where ID = '"+textBox1.Text+"'");

sqlDataAdapter1 = new SqlDataAdapter();

sqlDataAdapter1.SelectCommand = cmd;

DataSet ds = new DataSet();

sqlDataAdapter1.Fill(ds);

datagridview1.DataSource = ds.table(0); 
```

这将帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T11:00:29.653

```
con.Open();
Sqlcommand cmd = new Sqlcommand("Select * from Registration where ID= '"+textBox1.Text+"'",con);
sqldatareader reader = cmd.Executereader();
if (reader.HasRows)
{
          datagridview1.DataSource = reader.GetSqlValues();
 } 
```

# sql-server - 如果在运行时更改存储过程会发生什么？

> ID：15001062
> 
> 赞同：24
> 
> 时间：2013-02-21T11:25:14.070
> 
> 标签：sql-server, sql-server-2005, stored-procedures, acid

我对我想尽快部署到生产 SQL Server 2005 服务器的存储过程进行了细微的一行更改（修复了字符串中的拼写错误）。

我担心的是，如果在确切的时间运行 alter 语句来更新我的存储过程，会发生什么同时调用该存储过程？

它是否与存储过程的先前副本一起运行，还是会导致某些损坏或错误？

考虑到 SQL Server 的 ACID 特性，我希望它是安全的。它同时运行的机会，特别是因为 SP 非常小，所以非常低，但我只是更愿意确定，而且我也对答案感兴趣，只是为了教育目的。

可以说，ServerFault 会是一个更好的地方，如果它被错误发布，对不起。

谢谢你。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-09-15T08:07:49.690

我刚刚在 SQL Server 2008 R2 中对此进行了测试

我开始：

```
CREATE PROCEDURE dbo.Stupid
AS
WAITFOR DELAY '0:00:10'
SELECT TOP 5 * FROM dbo.UniqueId
GO 
```

然后我执行了以下 *SQL Server 查询窗口 1：*

```
EXEC dbo.Stupid 
```

*SQL Server 查询窗口 2，而查询窗口 1 中的查询正在运行：*

```
ALTER PROCEDURE dbo.Stupid
AS
WAITFOR DELAY '0:00:05'
SELECT TOP 5 * FROM dbo.UniqueId
WHERE ID > 5
GO

EXEC dbo.Stupid 
```

*SQL Server 查询窗口 3，而查询窗口 1 和查询窗口 2 中的查询正在运行：*

```
EXEC dbo.Stupid 
```

**结果：**

*   查询窗口 1 运行了 10 秒（因此在窗口 2 和 3 之后完成），并返回 ids 1 - 5
*   查询窗口 2 更改并在 5 秒内运行该过程，并返回 ids 6 - 10
*   Query Window 3 ran in 5 seconds and returned ids 6 - 10

What happens:

*   Already executing code will complete running on the procedure as it was when they were started
*   Anything that starts run after the code is altered will run the new code

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-21T11:30:19.557

当对过程使用 ALTER 时，会设置模式修改锁。SP 仍然存在，但客户端必须等到执行 ALTER。这同样适用于 ALTER，它会等到客户端不使用 SP。

# android - 如何在 Android 中打开带有任何扩展名的文件？

> ID：15001064
> 
> 赞同：9
> 
> 时间：2013-02-21T11:25:30.737
> 
> 标签：android

我有一个应用程序，用户可以在其中上传带有任何 exetention 的文件（***.png***、***.mp3***、***.txt***、***.pdf***、***.bmp***、***.apk***等）

简而言之-->** 带有任何 exe 的文件..！**

这些文件 r 显示在列表视图中。

当用户从列表视图意图中“点击”或“单击”项目时，将调用 ( `android.content.Intent.ACTION_VIEW`)，它应该打开安装在设备中的相应应用程序。

**例如**

如果用户点击nature.png然后intent将被调用并建议应用程序，如Gallery、PS Touch..etc（**如屏幕截图1所示**）

如果用户单击 book.pdf，则会调用意图并建议 MuPdf、Polaris Office、apv..etc 等应用程序（**如屏幕截图2所示**）

**对于 .txt,.pdf,.png,.jpg** - 我已经通过 set mime type 解决了这个问题`intent.setDataAndType(Uri.fromFile(file), mime);`

**也**适用**于 URL**

```
Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse(https://www.google.co.in/)); 
```

它运行良好，但对于文件扩展名的其余部分，我仍然感到困惑 - 该怎么办？怎么办？

我已经四处寻找，但无法得到满意的答案..！

**我的问题：**

1.  **我如何为任何文件扩展名编写代码，以便它调用安装在设备中的相应应用程序？**
2.  **如何在 XML 中定义自定义文件扩展名？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T11:30:27.263

以下代码适用于每种文件类型：

```
try {
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setDataAndType(Uri.fromFile(file), fileMimeType);
    startActivity(intent);
} catch (ActivityNotFoundException e) {
    // no Activity to handle this kind of files
} 
```

当然，`Activity`系统中应该有一个知道如何处理某种类型的文件。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:31:53.820

指向您问题的第一部分：

```
try
{
  Intent intent = new Intent(Intent.ACTION_VIEW, uri);
  startActivity(intent);
}
catch (ActivityNotFoundException e)
{
  //tel the user to install viewer to perform this action
} 
```

无需指定类型。它将从数据 URI 中获取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-04T02:10:43.393

```
public void openFile() {
    try {
        File file = new File(G.DIR_APP + fileName);
        fileExtension = fileName.substring(fileName.lastIndexOf("."));
        Uri path = Uri.fromFile(file);
        Intent fileIntent = new Intent(Intent.ACTION_VIEW);
        fileIntent.setDataAndType(path, "application/" + fileExtension);
        startActivity(fileIntent);
    } catch (ActivityNotFoundException e) {
        Toast.makeText(G.currentActivity, "Cant Find Your File", Toast.LENGTH_LONG).show();
    }

} 
```

# php - simplehtmldom解析html保存到json

> ID：15001066
> 
> 赞同：0
> 
> 时间：2013-02-21T11:25:40.397
> 
> 标签：php, json, simple-html-dom

这是一些html代码，如何使用simplehtmldom解析html并保存到json数据？

```
<p>text1</p>
<div>
  <p>text2</p>
<div>
<ul>
  <li>subtext1</li>
  <li>subtext2</li>
</ul>
<p>text3</p>
<div>
  <div>
     <p>text4</p>
  </div>
</div>
<ul>
  <li>subtext1</li>
  <li>subtext2</li>
</ul> 
```

我需要用原始顺序解析`<ul>` `<li>` `<p>`点头，然后保存到 json 数据。

```
[
   {
      "p":"text1"
   },
   {
      "p":"text2"
   },
   {
      "ul":[
         {
            "li":"subtext1"
         },
         {
            "li":"subtext2"
         }
      ]
   },
   {
      "p":"text3"
   },
   {
      "p":"text4"
   },
   {
      "ul":[
         {
            "li":"subtext3"
         },
         {
            "li":"subtext4"
         }
      ]
   }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:35:33.740

```
include('simple_html_dom.php');
$html = str_get_html(YourContentHere);
$data = array();
$count = 0;
foreach($html->find('p') as $li)
{
    $data[$count]['p'] = $li->innertext;
    $count++;
}

foreach($html->find('ul') as $ul)
{
    foreach($ul->find('li') as $li )
    $data[$count]['ul'][]['li'] = $li->innertext;
    $count++;
}
echo json_encode($data); 
```

试试这个，也许我有错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:46:48.973

自己解决，当然我会完成 json_encode() 部分。对于我需要的 json 树。谢谢。

```
foreach($html->find('p, ul') as $foreach){
    if($foreach->tag =='p'){
        $out .= json_encode($foreach->plaintext);
    }else{
        foreach($foreach->find('li') as $li){
            $out .= json_encode($li->plaintext);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:31:22.183

```
json_encode((array) simplexml_load_string($html_input) 
```

# javascript - 对象函数未随 console.log 显示

> ID：15001070
> 
> 赞同：2
> 
> 时间：2013-02-21T11:25:46.150
> 
> 标签：javascript, object, logging, console, ace-editor

好的，我正在尝试通过 Chrome 的 JavaScript 控制台使用（或就此而言）显示对象（特别是[Ace](http://ace.ajax.org/#nav=about&api=selection) `editor`对象）的所有功能/属性。`console.log(editor)``console.log(editor.getSession())`

问题是 - 研究了 Ace 背后的代码 - 我知道有一些功能（并且我已经使用过它们） -当我试图“打印”对象时**没有出现。**

这是怎么回事？如何获得完整的对象/功能树？（最好是一些可读的格式）

* * *

**暗示：**

我实际上需要这个来获得可用方法的完整列表（其中大部分甚至没有记录）。

* * *

**编辑 ：**

重现问题的步骤：

*   转到[http://ace.ajax.org/#nav=about&api=selection](http://ace.ajax.org/#nav=about&api=selection)
*   打开 JavaScript 控制台
*   检查`editor.getSession()`
*   例如`editor.getSession().getBreakpoints()`未列出*_*
*   但是，如果您尝试使用它，它可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:29:23.847

一些框架会覆盖 console.log 功能。

而不是`console.log(editor)`你可以在大多数情况下编写`editor.valueOf()`来获取所有属性和方法。

还有一种增强的方式：

```
for (key in editor) {
    console.log(key);
    console.log(editor[key]);
    // or
    editor[key].valueOf();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:31:55.380

```
for(var i in ace){ console.log(i); }; 
```

或者试试

```
inspect(ace); 
```

# c++ - 在 MSVC10 中静态链接 boost + 我自己的 .lib 的问题

> ID：15001089
> 
> 赞同：1
> 
> 时间：2013-02-21T11:26:56.517
> 
> 标签：c++, boost, dll, linker

我有一个 MFC 应用程序，它静态链接到我编写的库，并且在两个项目 (1.51) 中也使用了 boost。

使用动态链接的运行时和提升库（我的库是静态链接的），一切似乎都运行良好。

但是我很想制作一个静态链接的版本，这样我就可以轻松地将 .exe 分发给一些同事。我知道我可能只是恢复到动态链接并使用 MSI 等，但我想了解我的问题发生了什么......

所以我最终编译它，但并非没有 LN4049 警告，例如：

```
MyLib.lib(MyModule.obj) : warning LNK4049: locally defined symbol _printf imported 
```

MSDN 文档表明这是由于 dll 导出/导入声明，但至少在我的代码中没有这些，而且我看不出它们来自何处。

在成功编译之前，我遇到了很多与 DLL 导入库相关的链接器错误（符号冲突/重新声明）：

```
1>boost_system-vc100-mt-gd-1_51.lib(boost_system-vc100-mt-gd-1_51.dll) : error LNK2005: "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAABVerror_category@12@XZ) already defined in libboost_system-vc100-mt-sgd-1_51.lib(error_code.obj) 
1>boost_system-vc100-mt-gd-1_51.lib(boost_system-vc100-mt-gd-1_51.dll) : error LNK2005: "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAABVerror_category@12@XZ) already defined in libboost_system-vc100-mt-sgd-1_51.lib(error_code.obj) 
```

等等，我不得不忽略这些 DLL 导入库：

```
MSVCRTD.lib, msvcprtd.lib, & boost_system-vc100-mt-gd-1_51.lib 
```

我知道这些是用于 DLL 链接的导入库。BOOST_LIB_DIAGNOSTIC 输出愉快地报告了我链接的所有静态 boost 库，它包括 boostlib_system-vc100-mt-gd-1_51.lib（用于库构建和可执行文件）：

```
1>  MyModule.cpp
1>  Linking to lib file: libboost_thread-vc100-mt-sgd-1_51.lib
1>  Linking to lib file: libboost_date_time-vc100-mt-sgd-1_51.lib
1>  Linking to lib file: libboost_system-vc100-mt-sgd-1_51.lib
1>  Linking to lib file: libboost_chrono-vc100-mt-sgd-1_51.lib 
```

我在我的项目配置中看不到我要求 DLL 链接的任何地方。

我检查了运行时库的选择（多线程调试，静态链接）。我在静态库中使用 MFC，并且所有 boost 库都可用（而且我没有在任何地方声明 BOOST_DYNAMIC_etc 标志）。

我只是在努力思考我可能在哪里弄乱了配置，或者是否有一些问题使用这些库来排除静态链接（或者至少不生成那些 LNK4049 警告）。

有任何想法吗？

这是我在两个项目上的编译器/链接器的命令行选项..

应用程序编译器：

```
/ZI /nologo /W3 /WX- /Od /Oy- /D "BOOST_LIB_DIAGNOSTIC" /D "_GUICON" /D "WIN32" /D "_WINDOWS" /D "_DEBUG" /D "_UNICODE" /D "UNICODE" /Gm /EHsc /RTC1 /MTd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Yu"StdAfx.h" /Fp"Debug_Static\MyApp.pch" /Fa"Debug_Static\" /Fo"Debug_Static\" /Fd"Debug_Static\vc100.pdb" /FR"Debug_Static\" /Gd /analyze- /errorReport:queue 
```

应用程序链接器：

```
/OUT:"C:\VSPRJ10\MyApp\Debug_Static\MyApp.exe" /VERBOSE:Lib /INCREMENTAL:NO /NOLOGO /LTCG:STATUS "MyLib.lib" "setupapi.lib" /NODEFAULTLIB:"MSVCRTD.lib" /NODEFAULTLIB:"msvcprtd.lib" /NODEFAULTLIB:"boost_system-vc100-mt-gd-1_51.lib" /MANIFEST /ManifestFile:"Debug_Static\MyApp.exe.intermediate.manifest" /ALLOWISOLATION /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /DEBUG /PDB:"C:\VSPRJ10\MyApp\Debug_Static\MyApp.pdb" /MAP /MAPINFO:EXPORTS /SUBSYSTEM:WINDOWS /PGD:"C:\VSPRJ10\MyApp\Debug_Static\MyApp.pgd" /TLBID:1 /DYNAMICBASE /NXCOMPAT /MACHINE:X86 /ERRORREPORT:QUEUE 
```

库编译器：

```
/ZI /nologo /W3 /WX- /Od /Oy- /D "_WIN32_WINNT=0x0501" /D "BOOST_LIB_DIAGNOSTIC" /D "WIN32" /D "_DEBUG" /D "_LIB" /D "_UNICODE" /D "UNICODE" /Gm /EHsc /RTC1 /MTd /GS /fp:precise /Zc:wchar_t /Zc:forScope /Fp"Debug_Static\MyLib.pch" /Fa"Debug_Static\" /Fo"Debug_Static\" /Fd"Debug_Static\vc100.pdb" /Gd /analyze- /errorReport:queue 
```

图书馆馆员：

```
/OUT:"C:\VSPRJ10\MyApp\Debug_Static\MyLib.lib" /NOLOGO /VERBOSE 
```

# tfs - 如何自动删除旧的 TFS 构建？

> ID：15001090
> 
> 赞同：2
> 
> 时间：2013-02-21T11:26:57.470
> 
> 标签：tfs, tfsbuild

或者换句话说：如何只保留最后的 X TFS 构建？

我在 TFS 2012 中没有找到这样的功能。也许有人有一个脚本/TFS API 代码来完成这样的任务？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-21T14:36:51.803

您可以通过在[构建定义](http://msdn.microsoft.com/en-us/library/ms181716.aspx)中指定构建保留策略来实现此目的。

# java - 方法paint中数组中的零值

> ID：15001091
> 
> 赞同：-1
> 
> 时间：2013-02-21T11:26:58.683
> 
> 标签：java, arrays, swing, awt, paint

我想对音频信号进行图形表示。我在将数据数组输入到方法paint（图形g）时遇到问题。在 setData(int intValue) 方法中输入的数据可以正常工作。但是，如果我想在方法 paint() 中打印一个数据数组，我的值为零。为什么？

```
import java.awt.Color;
import java.awt.Graphics;
import javax.swing.JPanel;

public class MyPlotter extends JPanel{
    int width = 320;
    int height = 130;
    int frameSize;
    int[] data;

public MyPlotter(int fSize){
    setSize(width,height);      
    setPreferredSize(this.getSize());
    this.frameSize = fSize;
    data = new int[fSize+1];
} 

public void setData(int[] intValue){
    data = intValue;

// this works fine:
        for (int i=0; i<440; i++)
            System.out.println("setData "+data[i]);

    repaint();
}

public void paint (Graphics g){ 

   // some code:
   // g.drawLine(...)
   // g.setColor(...)
   // etc...    

 for (int i = 0; i< frameSize-1;i++)
    { 
     //ZERO values:
     System.out.println("paint() "+(data[i]));

     // g.drawline(...);
    }
 }
 } 
```

编辑：

从 MyPanel.class 输入数组数据

```
import javax.swing.JPanel;

public class MyPanel extends JPanel {

    private MyPlotter plotter;

    public MyPanel(){
      setSize(320,210);
      plotter = new MyPlotter(440);
      add(this.plotter,0);
    }

    public void setData(int[] data){
      plotter.setData(data);  
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:29:37.800

```
data = intValue; 
```

在这里，您将 intValue 引用到数据。如果您更改数据 intValue 数组也会更改。

试试这个 ：

```
data = System.arraycopy( intValue, 0, data, 0, intValue.length); 
```

代替 ：

```
data = intValue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:59:59.157

我认为您调用的“repaint()”方法可能会修改原始数组“intValue”

您所做的分配`data = intValue;`仅使“data []”成为原始数组的引用，因此调用 repaint 似乎数据已重置或引用丢失。如果要复制数组，您可以执行以下任何操作a & b 是两个数组：

```
b = Arrays.copyOf(a, a.length); 
```

0r

```
b = new int[a.length];
System.arraycopy(a, 0, b, 0, b.length); 
```

或者

```
b = (int[]) a.clone(); 
```

或者

```
int b[] = new int[a.length];

        for (int i = 0; i < a.length; i++) {
            b[i] = a[i];
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:57:30.263

你的代码没问题。问题出在主要方法上。确保您只向面板添加了一台绘图仪。

```
public static void main(String[]args){
    int[] mass =  new int[]{1,2,3,4,5,6,7,8,9,10};
    JFrame frame =  new JFrame();
    MyPanel mp = new MyPanel();
    frame.add(mp);
    frame.setSize(300, 300);         
    mp.setData(mass);         
    frame.setVisible(true);  

 } 
```

效果很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T13:00:27.347

很抱歉回答我自己的帖子，但我完全改变了程序。我不知道我是否可以从第一篇文章中删除代码。所以我发了一个新帖子。

我更改了一个应用程序，但在将数组输入到另一种方法时仍然存在问题。通过“Arrays.copyOf b = (a, a.length)”复制数组并将数组更改为静态并不能解决问题。我无法在 OscilloscopeController 类中输入从 setSignal() 到 getSignal() 的数组。

**示波器控制器.java**

```
import java.util.Arrays;
import java.util.Random;

public class OscilloscopeController {

private static int frameSize = (int) (44100 / 100F);
private int idx, numFramesToSkip = 10;
private static int[] toDraw = new int[frameSize];
private static int[] data = new int[frameSize];

public OscilloscopeController() {

    for (int i = 0; i < frameSize; i++) {
        toDraw[i] = 0;
        data[i] = 0;
    }
}

public void setSignal(int in) {
     // Because the Model layer is off, I generate a test signal
   Random randomGenerator = new Random();
    int j = 0;
    for (int i = 0; i < 44100; i++) {
        int randomInt = randomGenerator.nextInt(32675 * 2) - (32675);
        if (i % 4 == 0) {
            j = randomInt;
        }
     in = j;
    }

    if (idx++ > frameSize * numFramesToSkip) 
    { 
        idx = 0;
    } 
    else 
    {
        if (idx < frameSize) {
            data[idx] = in;
        }

        if (idx == frameSize) 
        {   
            // HERE IS PROBLEM. I'D LIKE THIS toDraw in getSignal()
            toDraw = Arrays.copyOf(data, data.length);
        }
    }
}

public int[] getSignal() {

    // IF UNCOMMENT BELOW WORKS FINE, OTHERWISE ZERO VALUES
    /*
         Random randomGenerator = new Random();
         int j=0;
         for (int i = 0; i < 440; i++) {
         int randomInt = randomGenerator.nextInt(32675*2)-(32675);
         if (i%4==0) j = randomInt;
         toDraw[i]=j; 
    }
    */

for (int i = 0; i < frameSize; i++) 
        System.out.println("Controller.getSignal() = "+ toDraw[i]);

        return toDraw;
    }
} 
```

**MainPanel**包含主要方法：

```
import java.awt.*;
import javax.swing.*;

public class MainPanel extends JPanel {

 public static void main(String args[]) throws Exception {
   SwingUtilities.invokeLater(new Runnable() {
     public void run() {
       JFrame frame = new JFrame();
       frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
       frame.getContentPane().add(new MainPanel());
       frame.pack();
       frame.setVisible(true);
     }
    });
   }

private final OscilloscopeView oscView = new OscilloscopeView();
private final OscilloscopeController oscController = new OscilloscopeController();

 public MainPanel() {

    setPreferredSize(new Dimension(400, 200));

    // a lot of other components here

    oscView.setData(oscController.getSignal());
    add(oscView);
  }
} 
```

**示波器视图.java**

```
import javax.swing.JFrame;
import javax.swing.JPanel;

public class OscilloscopeView extends JPanel {

    private  OscPlotter plotter  = new OscPlotter(441);;

    public OscilloscopeView()
    {
        setSize(320,210);
        add(this.plotter);
    }

    public void setData(int[] data){
    plotter.setData(data);  
    }  
} 
```

**OscPlotter.java**

```
import java.awt.Color;
import java.awt.Graphics;
import java.util.Arrays;
import javax.swing.JPanel;

public class OscPlotter extends JPanel{

    private int width = 320;
    private int height = 130;
    private float widthC;
    private float heightC;
    private int sampleSize;
    private int frameSize;
    private  int[] toDraw;
    private float x,prevX;

    public OscPlotter(int fSize){
        setSize(width,height);      
        setPreferredSize(this.getSize());
        this.frameSize = fSize;
        this.toDraw =  new int[441];
        sampleSize = 1;

    } 

    public void setData(int[] data){
        toDraw = Arrays.copyOf(data, data.length);
        repaint();
    }

    @Override
    public void paintComponent(Graphics g){ 

        widthC = ((float)width/frameSize);          
        sampleSize = (16 == 16 ? 65536 : 256);          
        heightC = (((float)height-15)/sampleSize);          

        g.setColor(Color.black);            
        g.fillRect(0,0,width,height);  

        g.setColor(Color.gray);     
        for (int i = 1; i<height;i+=height/8) 
            g.drawLine(0,i,width,i);            
        for (int i = 1; i<width;i+=width/8) 
            g.drawLine(i,0,i,height);       

        g.setColor(Color.lightGray);
        g.drawLine(0,(int)(height/2),width,(int)((height/2)));

        g.setColor(Color.green);        
        x = 0;      

        for (int i = 0; i< frameSize-1;i++)
        { 
            prevX = x;
            x +=widthC;
            // draw the read waveform data
            g.drawLine ((int)prevX,(int)((height/2+toDraw[i]*heightC)),(int)x,(int)((height/2+toDraw[i+1]*heightC))); 
        }
    }
} 
```

# paypal - 信用卡支付 - 二级收款人

> ID：15001092
> 
> 赞同：0
> 
> 时间：2013-02-21T11:27:01.920
> 
> 标签：paypal, payment-gateway

我在一个电子商务网站上工作，我需要做这样的事情。当用户在付款页面时，他应该做以下事情： - 支付费用 - 授权支付金额（可能会有所不同，但金额不会很大......）

到这里为止，一切都可以通过 PayPal Direct 支付系统找到。

但我需要更多。我需要授权金额在某个时候由另一个卖家直接收取（或转移）

我有没有机会使用 PayPal Direct 来做到这一点（这样付款仍将在现场进行）？或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:15:05.070

如果您通过 DoDirectPayment 收款，您可以使用[MassPay](https://www.x.com/developers/paypal/documentation-tools/api/masspay-api-operation-nvp)或[Pay](https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation)将资金发送给第三方。如果您希望在原始付款中进行拆分，您可以单独使用 Pay 并将其设置为并行或链式付款。有关详细信息，请参阅[Adaptive Payments 文档。](https://www.x.com/sites/default/files/pp_adaptivepayments.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T23:28:48.410

（免责声明：我是员工）[Balanced](https://www.balancedpayments.com)将适用于您的用例

*   直接采集卡片，无需将用户发送到第三方站点
*   稍后通过 ACH 付款向您选择的商家付款。

需要注意的是它只是美国，所以如果你在美国以外的地方让我知道，我会看看我是否能为你找到任何其他选择。

# php - file_put_contents 导致重复条目

> ID：15001099
> 
> 赞同：0
> 
> 时间：2013-02-21T11:27:21.813
> 
> 标签：php, file-io

**这是我的代码：**

```
if(isset($_GET['term']) && $_GET['term'] != ""){
    file_put_contents($_SERVER['DOCUMENT_ROOT'] . '/some/path/protocoll.txt', chr(10) . date('D M j H:i:s Y', time()) . ';;;' . $_GET['term'], FILE_APPEND);
} 
```

我使用了警报和回声，似乎只`file_put_contents`被调用了两次。

**在日志文件中，我发现以下内容：**

> 2013 年 2 月 2 日
> 星期四 12:19:34;;;学期 2013 年 2 月 2 日星期四 12:19:35;;;学期

**PHP 版本是 5.2.17。我的`.htaccess`文件包含：**

```
ErrorDocument 404 /fehler_404.html 
```

如果我将函数放在 php 文件的末尾（在 之后`</html>`），它只会被调用一次。在所有其他地方，我得到重复的条目。

你有什么想法？

**清理 access_log：**

```
1.2.3.4 - - [21/Feb/2013:12:58:48 +0100] "GET /path/wLayout/structure/wScript.js HTTP/1.1" 200 21207 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:48 +0100] "GET /favicon.ico HTTP/1.1" 200 1150 "-" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:47 +0100] "GET /path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen HTTP/1.1" 200 14944 "-" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:48 +0100] "GET /path/wLayout/structure/wScript.js HTTP/1.1" 200 21207 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:48 +0100] "GET /path/wLayout/structure/wStyleselector.js HTTP/1.1" 200 1526 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:48 +0100] "GET /weblication/wGui/wScripts/wb_lg_cc_dd.js HTTP/1.1" 200 1848 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:48 +0100] "GET /weblication/wGui/wScripts/wb_mb_cc_dd.js HTTP/1.1" 200 11159 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:48 +0100] "GET /path/wLayout/design/style/design.css HTTP/1.1" 200 9577 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:48 +0100] "GET /path/wLayout/design/style/nav.css HTTP/1.1" 200 3914 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:48 +0100] "GET /wLayout/design/style/solr/solr_style.css HTTP/1.1" 200 1807 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:48 +0100] "GET /wLayout/design/style/solr/jquery-ui-1.9.0.custom.css HTTP/1.1" 200 30852 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:48 +0100] "GET /wLayout/structure/solr/Core.js HTTP/1.1" 200 6588 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:48 +0100] "GET /wLayout/structure/solr/Manager.jquery.js HTTP/1.1" 200 1007 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:48 +0100] "GET /wLayout/structure/solr/Parameter.js HTTP/1.1" 200 4502 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:49 +0100] "GET /wLayout/structure/solr/AbstractWidget.js HTTP/1.1" 200 2171 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:49 +0100] "GET /wLayout/structure/solr/AbstractTextWidget.js HTTP/1.1" 200 2137 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:49 +0100] "GET /wLayout/structure/solr/ResultWidget.js HTTP/1.1" 200 1158 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:48 +0100] "GET /wLayout/structure/jquery-1.9.1.min.js HTTP/1.1" 200 92629 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:49 +0100] "GET /wLayout/structure/solr/jquery.livequery.js HTTP/1.1" 200 6688 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:49 +0100] "GET /wLayout/structure/solr/PagerWidget.js HTTP/1.1" 200 7448 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:48 +0100] "GET /wLayout/structure/solr/ParameterStore.js HTTP/1.1" 200 11093 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:49 +0100] "GET /wLayout/structure/solr/AbstractFacetWidget.js HTTP/1.1" 200 8383 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:49 +0100] "GET /wLayout/structure/solr/TagcloudWidget.js HTTP/1.1" 200 1020 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:49 +0100] "GET /wLayout/structure/solr/CurrentSearchWidget.js HTTP/1.1" 200 1270 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:49 +0100] "GET /wLayout/structure/solr/TextWidget.js HTTP/1.1" 200 437 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:49 +0100] "GET /wLayout/structure/solr/AutocompleteTermWidget.js HTTP/1.1" 200 6118 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:49 +0100] "GET /wLayout/structure/solr/solr_functions.js HTTP/1.1" 200 3577 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:49 +0100] "GET /wLayout/structure/jquery-ui-1.9.0.custom.min.js HTTP/1.1" 200 235845 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:49 +0100] "GET /wLayout/structure/solr/AbstractManager.js HTTP/1.1" 200 4588 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:48 +0100] "GET /path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen HTTP/1.1" 200 28300 "-" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:50 +0100] "GET /wLayout/design/img/ajax-loader.gif HTTP/1.1" 200 7364 "http://www.domain.com/path/volltextsuche/suchergebnisse.php?action=search&configurationId=path.volltextsuche&term=system&button=Suchen" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com
1.2.3.4 - - [21/Feb/2013:12:58:50 +0100] "GET /favicon.ico HTTP/1.1" 200 1150 "-" "Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0 FirePHP/0.7.1" www.domain.com 
```

**编辑：**

问题似乎是使用搜索结果更新页面的 AJAX 请求。我找到了另一种方法。在将请求发送到搜索引擎的文件中，我向我的 php 文件发出 ajax 请求，我在其中提取关键字......这似乎有效，因此问题得到了回答。

# php - 在 Magento 中扩展核心模型

> ID：15001105
> 
> 赞同：3
> 
> 时间：2013-02-21T11:27:36.713
> 
> 标签：php, magento, model, magento-1.5

我正在尝试扩展：Mage_Catalog_Model_Product_Visibility

我正在修改 Visibility.php 文件中的以下内容：

```
public function getVisibleInSiteIds()
  {
    return array(self::VISIBILITY_IN_SEARCH, self::VISIBILITY_IN_CATALOG, self::VISIBILITY_BOTH);
  } 
```

进入：

```
public function getVisibleInSiteIds()
  {
    return array(self::VISIBILITY_IN_SEARCH, self::VISIBILITY_IN_CATALOG, self::VISIBILITY_BOTH, self::VISIBILITY_NOT_VISIBLE);
  } 
```

设置为不可见的过时产品仍会从其直接 URL 显示（默认情况下，Magento 将显示 404）。

我通过修改核心文件对此进行了测试，它可以工作。但我想创建一个小扩展，到目前为止我无法让它工作。这是我到目前为止所做的：

应用程序/etc/modules/CustomCode_InvisibleProducts.xml

```
<?xml version="1.0"?>
<config>
   <modules>
     <CustomCode_InvisibleProducts>
      <active>true</active>
      <codePool>local</codePool>
     </CustomCode_InvisibleProducts>
   </modules>
</config> 
```

app/code/local/CustomCode/InvisibleProducts/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <CustomCode_InvisibleProducts>
            <version>0.1.0</version>
        </CustomCode_InvisibleProducts>
    </modules>
    <global>
        <models>
            <customcode_invisibleproducts>
                <class>CustomCode_InvisibleProducts_Model</class>
            </customcode_invisibleproducts>
            <catalog>
                <rewrite>
                    <product_visibility>CustomCode_InvisibleProducts_Model_Catalog_Product_Visibility</product_visibility>
                </rewrite>
            </catalog>
        </models>
    </global>
</config> 
```

app/code/local/CustomCode/InvisibleProducts/Model/Catalog/Product/Visibility.php

```
class CustomCode_InvisibleProducts_Model_Catalog_Product_Visibility extends Mage_Catalog_Model_Product_Visibility
{
     ..... 
```

不知何故，我没有正确扩展模型，因为似乎没有任何事情发生/改变。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T14:06:52.457

我已将扩展名从 CustomCode_InvisibleProducts 更改为 CustomCode_Visible，因为我不知道还能做什么。

不知何故，扩展程序立即开始工作。

最终代码：

应用程序/etc/modules/CustomCode_Visible.xml

```
<?xml version="1.0"?>
<config>
  <modules>
    <CustomCode_Visible>
      <active>true</active>
      <codePool>local</codePool>
    </CustomCode_Visible>
  </modules>
</config> 
```

app/code/local/CustomCode/Visible/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <CustomCode_Visible>
            <version>0.2.0</version>
        </CustomCode_Visible>
    </modules>
    <global>
        <models>
            <customcode_visible>
                <class>CustomCode_Visible_Model</class>
            </customcode_visible>
            <catalog>
                <rewrite>
                    <product_visibility>CustomCode_Visible_Model_Catalog_Product_Visibility</product_visibility>
                </rewrite>
            </catalog>
        </models>
    </global>
</config> 
```

app/code/local/CustomCode/Model/Catalog/Product/Visibility.php

```
class CustomCode_Visible_Model_Catalog_Product_Visibility extends Mage_Catalog_Model_Product_Visibility
{

  ....

        public function getVisibleInSiteIds()
    {
        return array(self::VISIBILITY_IN_SEARCH, self::VISIBILITY_IN_CATALOG, self::VISIBILITY_BOTH, self::VISIBILITY_NOT_VISIBLE);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:46:32.930

您没有在 config.xml 中声明您的模块

```
<modules>
    <CustomCode_InvisibleProducts>
        <version>0.1.0</version>
    </CustomCode_InvisibleProducts>
</modules> 
```

将其插入到您的全局节点之前。

# ios - 如何在 iOS 中使用 OpenCV？

> ID：15001106
> 
> 赞同：-1
> 
> 时间：2013-02-21T11:27:37.063
> 
> 标签：ios, xcode, opencv, image-processing, open-source

我想在我的项目中使用 OpenCV 框架。但是在从源代码构建 opencv 时，我遇到了错误。我正在使用[此链接](http://docs.opencv.org/doc/tutorials/introduction/ios_install/ios_install.html#ios-installation)安装 opencv

我在附加图像的终端中收到此错误。 ![在此处输入图像描述](../Images/d697a3d384fcfd2fedaa8c4569a23812.png)

![在此处输入图像描述](../Images/d030e1fe2ea329ff3aaad438e3e2b03e.png)

我还使用了已经构建的 opencv2.framework 并将其添加到我的项目中，但它显示链接器错误。请帮我使用openCV。提前致谢。. . .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:09:18.250

以下是如何解决它...

*   谷歌您的错误：[“xcrun 错误：无法统计活动 Xcode 路径”](https://www.google.com/search?hl=en&q=%22xcrun%20error%3A%20could%20not%20stat%20active%20Xcode%20path%22)
*   单击第一个链接并转到
    [xcrun：错误：无法统计活动 Xcode 路径“/Volumes/Xcode/Xcode45-DP1.app/Contents/Developer”。（没有相应的文件和目录）](https://stackoverflow.com/questions/11961032/xcrun-error-could-not-stat-active-xcode-path-volumes-xcode-xcode45-dp1-app-c)
*   如果仍然不清楚，请尝试下几个链接
    [更改 xcrun 开发者路径](https://stackoverflow.com/questions/11456918/change-xcrun-developer-path)
    [已解决：错误“无法统计活动 Xcode 路径”</a>](http://geek.chrislott.org/2012/resolved-error-could-not-stat-active-xcode-path/)
[](http://geek.chrislott.org/2012/resolved-error-could-not-stat-active-xcode-path/)

 [当 Google 和 SO 让您失望时，请回到这里解释您的尝试（并将您的文本错误发布为文本而不是图像！）](http://geek.chrislott.org/2012/resolved-error-could-not-stat-active-xcode-path/) 

[关于您的链接器错误（什么链接器错误？发布它！）我在这里的回答可能会有所帮助](http://geek.chrislott.org/2012/resolved-error-could-not-stat-active-xcode-path/) [How to resolve iOS Link errors with OpenCV](https://stackoverflow.com/questions/14185716/how-to-resolve-ios-link-errors-with-opencv/14186883#14186883)

# windows-8 - 序列化缩略图 WinRT

> ID：15001107
> 
> 赞同：-1
> 
> 时间：2013-02-21T11:27:38.627
> 
> 标签：windows-8, windows-runtime, thumbnails, c#-5.0

我正在从视频中获取缩略图，我需要的只是序列化它如何做到这一点。我一直在做一些搜索，但我什么也没得到。我有如何序列化对象的代码，但我想序列化缩略图本身，以便稍后在我再次启动我的应用程序时获取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:31:58.143

你有图片或视频吗？如果它是一个图像，你可以很容易地做到这一点。

看看[http://writeablebitmapex.codeplex.com/](http://writeablebitmapex.codeplex.com/)它为 WriteableBitmap 类提供了扩展方法，除了大量的其他东西之外，它还允许调整大小。

您需要做的是 * 将图像加载到可写位图中 * 使用扩展方法调整大小 * 让图像流式传输？

# batch-file - 用变量搜索文件名并用多行替换另一个文件中的不同变量文本

> ID：15001119
> 
> 赞同：1
> 
> 时间：2013-02-21T11:27:59.267
> 
> 标签：batch-file, batch-processing

我之前的问题有答案，但现在我意识到我需要更多帮助。我的代码几乎可以完成我想要的所有操作：

```
@echo off

copy 2.txt 2.txt-backup

setlocal enableDelayedExpansion

>2.txt (
  for /f "delims=" %%A in (2.txt-backup) do (
 set "ln=%%A"
if "!ln:~0,6!" == "Class=" findstr /c:"ClassName=!ln:~6!" 1.txt >null && set       "ln=Class=ShipDummy"
echo !ln!
 )
) 
```

请参考： [批处理 - 我想在一个文件中搜索一个变量并将该变量结果替换到另一个文件中](https://stackoverflow.com/questions/14992029/batch-i-would-like-to-search-with-a-variable-in-one-file-and-replace-that-vari)

但现在我意识到我需要 1.txt 作为名称中包含变量的文件名，一系列文件，没有确切的限制，例如：

日志_0.txt

日志_1.txt

日志_2.txt

日志_3.txt

等等....

可能只有Log_0.txt，也可能有Log_0.txt到Log_23.txt，甚至更多……

另外，我想在 Class=ShipDummy 的替换文本中添加另一行：Class-ShipDummy Type=206

这将用 Type=206 替换 Class=ShipDummy 替换文本下方的一行文本。\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:05:52.850

这是做你想做的吗？

```
@echo off

copy 2.txt 2.txt-backup

setlocal enableDelayedExpansion

>2.txt (
    for /f "tokens=1* delims=:" %%A in ('findstr /n "^" 2.txt-backup') do (
        ( echo !ln!| findstr "^Type=206$" >NUL && set ln=ln ) || (
            set "ln=%%B"
            if "!ln:~0,6!"=="Class=" (
                findstr /c:"ClassName=!ln:~6!" Log_*.txt >null && (
                    echo Class=ShipDummy
                    set "ln=Type=206"
                )
            )
            if #!ln!==# (echo;) else echo !ln!
        )
    )
) 
```

# backbone.js - 在backbone.js中存储和访问视图列表的更好方法是什么？

> ID：15001122
> 
> 赞同：1
> 
> 时间：2013-02-21T11:28:14.917
> 
> 标签：backbone.js

我已经使用主干网已经有一段时间了，每次我获得具有自己的事件和行为的视图的动态列表时，我都想知道应该如何存储它们。我有两种方法，我对它们的想法是..

1.  将视图内部存储在另一个视图中。这需要适当过滤的开销，但有点独立于 DOM + 可能有更好的内存使用
2.  只需生成视图，将它们放入 DOM 并使用 jquery 触发视图事件，例如`$('#someviewid').trigger('somecustomfunction');`- 更易于编写和访问，但依赖项更难查看，如果我只是删除 DOM 节点，我不确定视图/模型是否会被删除

你会推荐什么？

所以这里是扩展的第二个示例，其中新视图只是附加到内部 html 而故事视图本身被遗忘了。但是如果我想访问这个列表中的特定视图，我将不得不使用 DOM 属性，如 id 或 data，然后使用 jquery 访问器触发视图函数

```
Devclub.Views.StoriesList = Backbone.View.extend({
    initialize: function () {
        this.collection.bind('reset', this.reset, this);
        this.collection.fetch();
    },

    reset: function (modelList) {
        $(this.el).html('');
        var me = this;

        $.each(modelList.models, function (i, model) {
            me.add(model);
        });
    },

    add: function (model) {
        var contact_model = new Devclub.Models.Story(model);
        var view = new Devclub.Views.Story({
            model: contact_model
        });

        var storyView = view.render().el;

        $(this.el).append(storyView);
    }
}); 
```

相反，如果我想直接调用某些视图方法，我可以将相同的视图列表存储在一个数组中并对其进行迭代

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-12T10:30:18.720

我认为你应该保留孩子意见的参考。这是Addy Osmani[书中](https://addyosmani.com/backbone-fundamentals/#views-1)的一个例子。

```
Backbone.View.prototype.close = function() {
    if (this.onClose) {
        this.onClose();
    }
    this.remove(); };

NewView = Backbone.View.extend({
    initialize: function() {
       this.childViews = [];
    },
    renderChildren: function(item) {
        var itemView = new NewChildView({ model: item });
        $(this.el).prepend(itemView.render());
        this.childViews.push(itemView);
    },
    onClose: function() {
      _(this.childViews).each(function(view) {
        view.close();
      });
    } });

NewChildView = Backbone.View.extend({
    tagName: 'li',
    render: function() {
    } }); 
```

# asp.net - if 语句在 aspx 中显示标签或按钮

> ID：15001123
> 
> 赞同：1
> 
> 时间：2013-02-21T11:28:15.457
> 
> 标签：asp.net, vb.net, forms

我是aspx的新手，所以有人可以帮助我使用以下一小段代码。我正在尝试使用 Vb 在 aspx.net 中创建一个 If 语句，但我无法让它正常工作。

我想问一个问题，用户必须选择一个是复选框或否复选框，根据答案，一个标签会显示“不允许”，或者一个按钮会出现链接到主表单。

当用户选择选项时，我无法显示按钮或标签。

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    Main_FormBtn.Visible = False
    Refer_Label.Visible = False

    If CheckBoxNo.Checked = True Then

        Refer_Label.Visible = True

    ElseIf CheckBoxYes.Checked = True Then

        Main_FormBtn.Visible = True

    End If

End Sub 
```

任何帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:35:54.840

既然这是在页面加载时，你为什么还需要这个 IF 语句呢？我认为您实际上希望在复选框的 Click 事件中使用此语句，而不是在页面加载时。此代码只会在加载时运行，而不是在点击时运行。

双击您的 ASP 按钮并将此代码放入那里的事件处理程序中。将两个复选框单击事件都指向相同的方法，如下所示；

页面加载 - 您只想在第一次加载时将这些设置为 false。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

   If Not Page.IsPostBack Then

     Main_FormBtn.Visible = False
     Refer_Label.Visible = False

   End If

End Sub 
```

点击事件

```
Private Sub Checkbox_Click(sender As System.Object, e As System.EventArgs) Handles CheckBoxNo.Click, CheckBoxYes.Click

  Main_FormBtn.Visible = False
  Refer_Label.Visible = False

  If CheckBoxNo.Checked = True Then

    Refer_Label.Visible = True

  ElseIf CheckBoxYes.Checked = True Then

    Main_FormBtn.Visible = True

  End If

End Sub 
```

为此，它需要回发。除非你喜欢进入 Javascript 领域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:39:26.563

如果这意味着用户通过并回答一些问题并相应地出现子选项的形式，那么您需要考虑许多问题。如果您希望框/标签在用户单击某些内容时显示隐藏，除非您进行回发，否则您可能需要使用 javascript/jquery，在这种情况下，您可能需要考虑用户可能已经选择了许多选项/填充取出表格的一部分。

如果您想共享页面的整体结构，则更容易提供适当的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:45:42.380

如果`YES OR NO Category Better you use RadioButton`不是复选框..

像下面这样尝试它会帮助你...

**YESRadio_CheckedChanged 事件**

```
Main_FormBtn.Visible = True
Refer_Label.Visible = False 
```

**NORadio_CheckedChanged 事件**

```
Refer_Label.Visible = True
Main_FormBtn.Visible = False 
```

**PAGE_LOAD 事件**

```
Main_FormBtn.Visible = False
Refer_Label.Visible = False 
```

在此之前`AutoPostBack="true"`为 RadioButtons设置

# android - 在 facebook android sdk 中为应用程序获取两个不同的哈希键

> ID：15001126
> 
> 赞同：1
> 
> 时间：2013-02-21T11:28:17.487
> 
> 标签：android, facebook-android-sdk

代码 ：

```
// Add code to print out the key hash
PackageInfo info = getPackageManager().getPackageInfo("com.my.package", PackageManager.GET_SIGNATURES);
for (Signature signature : info.signatures) {
        MessageDigest md = MessageDigest.getInstance("SHA");
        md.update(signature.toByteArray());

        Log.d("KeyHash1:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
        Log.d("KeyHash2:", Base64.encodeToString(md.digest(), Base64.DEFAULT));

    } 
```

日志输出：

```
02-21 10:07:55.957: D/KeyHash1:(2666): A0AFqS0kOUlvxvH1L3VCCrTXNY8=
02-21 10:07:55.967: D/KeyHash2:(2666): 2jmj7l5rSw0yVb/vlWAYkK/YBwk= 
```

我对这两个不同的哈希键感到困惑。现在我的问题是哪个密钥适合我的应用程序

我认为`md.digest()`在第一个和第二个方法调用时返回不同的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:29:23.997

先生，在日志中，您正在对字符串进行编码。

这是我的代码。

```
md = MessageDigest.getInstance("SHA-256");
        md.update(text.getBytes("iso-8859-1"), 0, text.length());
        sha1hash = md.digest(); 
```

# c# - ADO.NET - 在实体框架中使用 AsQueryable()

> ID：15001127
> 
> 赞同：0
> 
> 时间：2013-02-21T11:28:18.033
> 
> 标签：c#, visual-studio-2010, entity-framework

我正在使用这种通用方法从我的表中查询信息：

```
public virtual IQueryable<TObject> All()
{
    return DbSetFilterDeleted.AsQueryable();
} 
```

但是对于我需要制作的一张桌子`JOIN`，我需要修改它。我对 .NET 有一点经验，但根据我的研究，我了解到`AsQueryable()`可以完全修改它以服务于这些目的。

我的问题是如何修改它，以便我可以在查询中添加其他数据，比如`Post.Content`where `BlogId = FK_BlogId`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:41:12.873

您需要`Include`在查询中使用语句。例如，如果您正在查询`Post`s 并想加入相关`Content`的 s；

```
myContext.Posts.Include("Content"); 
```

这将返回一个类型的对象`IQueryable<Post>`。

# java - 默认表模型可编辑

> ID：15001128
> 
> 赞同：0
> 
> 时间：2013-02-21T11:28:20.633
> 
> 标签：java, swing, jtable

我有两个关于 jtable 和默认表模型的问题

```
JTable  table = new JTable();
TableModel model = new DefaultTableModel(colNames,rowcount);
table.setModel(model); 
```

1.  我将组合框添加到第 4 列，只有第 4 列应该是可编辑的，其余的应该是不可编辑的。如何仅使第 4 列可编辑？
2.  该表的行来自 ms 访问表，因此如果组合框发生更改，我也想在 ms 访问表中更新它。如何更新ms access表中的数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T12:14:19.227

您需要分几个步骤进行：

*   从[*如何使用表格*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)开始。

*   此[示例](https://stackoverflow.com/a/7356518/230513)说明[*使用组合框作为编辑器*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#combobox)。

*   这个[例子](https://stackoverflow.com/a/7920159/230513)展示了如何覆盖`setValueAt()`，您可以使用[JDBC](http://docs.oracle.com/javase/tutorial/jdbc/index.html)更新您的数据库。

*   了解这些概念后，请考虑[`DbUtils`](https://stackoverflow.com/tags/apache-commons-dbutils/info).

# ruby-on-rails - 如何在 ruby on rails 的值中添加前缀和删除双引号？

> ID：15001129
> 
> 赞同：0
> 
> 时间：2013-02-21T11:28:22.030
> 
> 标签：ruby-on-rails, ruby, regex, ruby-on-rails-3

我有一个名为`"FooBar"`. 我想用引号替换这个文本到`Enr::Rds::FooBar`不带引号。

## 更新：

例如，`@question.answer_model`给出值`"FooBar"`（带引号）

我是新手，有人请推荐我如何开始了解正则表达式？在线练习的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:42:53.730

既然你想：a）删除引号和b）前面`FooBar`加上`Enr::Rds::`，我建议你完全按照预期执行，字面意思是：

```
'"FooBar"'.delete('"').gsub(/\A/, "Enr::Rds::")
# => "Enr::Rds::FooBar" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:32:01.930

我认为您正在尝试将字符串转换为常量。尝试以下

```
"Enr::Rds::#{@question.answer_model.gsub('"', '')}".constantize.find(...) 
```

# javascript - 结合浏览器和 Web 应用程序进行部署

> ID：15001133
> 
> 赞同：0
> 
> 时间：2013-02-21T11:28:34.970
> 
> 标签：javascript, packaging

将 HTML/Javascript Web 应用程序转变为可在 Windows（也可能是 Mac/Linux）PC 上运行的独立应用程序的最佳方法是什么？最好无需任何安装，即网络共享。我已经研究过 Chrome 和 Firefox Portable，但它们需要对文件夹的写访问权限，因此不适合运行只读网络共享。（一些背景知识，我有一个大型 javascript 应用程序，但我的许多客户使用的是 IE6 或 7。他们的 IT 团队不允许使用 Chrome Frame 或其他现代浏览器）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T13:26:55.297

我知道这有点晚了，但是 Sencha Desktop Packager 呢？

[http://www.sencha.com/products/desktop-packager](http://www.sencha.com/products/desktop-packager)

它主要是为 ExtJS 应用程序开发的，但它应该适用于任何 JavaScript 应用程序。

我们有类似的需求，最终使用 QT 构建了一个专用的 Web 浏览器。但是，如果我们之前就知道 Sencha Desktop Packager，那么我们可能已经这样做了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T19:52:13.897

[node-webkit](https://github.com/rogerwang/node-webkit)听起来最有前途。

从 github 存储库上的自述文件：

> node-webkit 是一个基于`Chromium`和`node.js`. 您可以使用 node-webkit 以 HTML 和 Javascript 编写本机应用程序。它还允许您直接从 DOM 调用 Node.js 模块，并启用一种使用所有 Web 技术编写本机应用程序的新方法。

如果可以使用它构建[LightTable](http://www.chris-granger.com/lighttable/)，那么当然可以使用它移植和本地运行 Web 应用程序。

# ios - iPad 应用程序启动图像被截断

> ID：15001137
> 
> 赞同：4
> 
> 时间：2013-02-21T11:28:56.640
> 
> 标签：ios, xcode, ipad, png, splash-screen

我正在使用 Xcode 4.5.2 构建一个 iPad 应用程序，最近启动图像已被截断——图像的下半部分丢失了，取而代之的是黑色背景。问题似乎与启动图像（即 Default.png、Default-Portrait~ipad.png 和它们的@2x 对应物）有关，尽管当我在 Xcode 或 Preview 中查看它们时它们似乎没问题。我认为问题出在图像的原因是我还有一个视图控制器，它使用与图像视图中相同的 Default.png 图像，并且图像在那里也被截断；当我在预览中复制图像，将其保存到一个新文件中，并将新文件设置为我的视图控制器中的背景图像时，问题就消失了。

另一个重要细节：问题仅出现在设备上。在模拟器中一切看起来都很好。我怀疑 @2x 文件，所以我从项目中删除了这些文件，但我*仍然*得到一个截断的启动图像。

这里发生了什么？似乎是文件损坏的情况，但我讨厌在不知道它是如何发生的情况下将其解雇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:23:50.533

用新副本替换默认图像解决了我的直接问题，我建议遇到类似症状的其他人尝试这样做。不过，我仍然不清楚原始图像是如何导致问题的。

# scala - 使用 Scala 特征对 C++ 概念进行建模

> ID：15001138
> 
> 赞同：4
> 
> 时间：2013-02-21T11:28:59.860
> 
> 标签：scala, c++-concepts

[在论文«Type Classes as Objects and Implicits»](http://www.google.ru/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDAQFjAA&url=http://ropas.snu.ac.kr/~bruno/papers/TypeClasses.pdf&ei=ffolUfi9Ke_74QTGw4HIBw&usg=AFQjCNFaTZEDANpHGRPiCQk0mrW2ib3o3A&sig2=1RbzhD6h2lAKPwJxzbV02Q&bvm=bv.42661473,d.bGE)中有一些使用 Scala 特征的示例，例如 C++ 概念和 Haskell 类型类。我尝试在 Scala中编写类似`InputIterator`概念和函数的东西：`find`

```
concept InputIterator<typename Iter> {
  typename value_type;
  value_type operator*(Iter);
  ...
};

template<typename Iter, typename V>
requires InputIterator<Iter> && EqualityComparable<Iter::value_type, V>
Iter find(Iter first, Iter last, V v) { 
    while (first < last && *first != v)
        ++first;
    return first;
} 
```

我不确定我是否正确理解了特征。但仍然......有一个`InputIterator`用 Scala 编写的特征（或更准确地说 - 它是`find`函数中使用的方法的简化模拟）：

```
trait InputIterator[Iter] {
    type value_type

    def <(a: Iter, b: Iter): Boolean
    def ++(it: Iter): Unit
    def *(it: Iter): value_type
} 
```

`EqualityComparable`清楚了：

```
trait EqualityComparable[S, T] {
    def ==(s: S, t: T): Boolean
    def !=(s: S, t: T): Boolean = !(s == t)
} 
```

但是我们应该怎么做`find`呢？我想写这样的东西：

```
def find[Iter, V](first: Iter, last: Iter, x: V)(implicit iterator: InputIterator[Iter], 
    cmp: EqualityComparable[iterator.value_type, V]): Iter =
{
    while (iterator.<(first, last) && cmp.!=(iterator.*(first), x))
        iterator.++(first)
    first
} 
```

但它会导致错误*«非法依赖方法类型»*。而且我不知道如何以`value_type`其他方式“提取”抽象类型。因此，我得到了以下代码：

```
trait EqualityComparable[S, T] {
    def ==(s: S, t: T): Boolean
    def !=(s: S, t: T): Boolean = !(s == t)
}

trait InputIterator[Iter] {
    type value_type

    def <(a: Iter, b: Iter): Boolean
    def ++(it: Iter): Unit
    def *(it: Iter): value_type
}

trait VTInputIterator[Iter, VT] extends InputIterator[Iter] {
    type value_type = VT
}

class ArrayListIterator[T](a: ArrayList[T], i: Int) {
    val arr: ArrayList[T] = a
    var ind: Int = i

    def curr(): T = arr.get(ind)
    def ++(): Unit = { ind += 1 }

    override def toString() = "[" + ind.toString() + "]"
}

class InputIterArrList[T] extends VTInputIterator[ArrayListIterator[T], T]{ 
    def <(a: ArrayListIterator[T], b: ArrayListIterator[T]) = {
      if (a.arr == b.arr) a.ind < b.ind
      else throw new IllegalArgumentException()
    }

    def ++(it: ArrayListIterator[T]): Unit = it.++()
    def *(it: ArrayListIterator[T]) = it.curr()
}

object TestInputIterator extends Application{   

    def find[Iter, VT, V](first: Iter, last: Iter, x: V)(implicit iterator: VTInputIterator[Iter, VT], 
        cmp: EqualityComparable[VT, V]): Iter = 
    {
      while (iterator.<(first, last) && cmp.!=(iterator.*(first), x))
        iterator.++(first)
      first
    }

    implicit object EqIntInt extends EqualityComparable[Int, Int] {
      def ==(a: Int, b: Int): Boolean = { a == b }
    }

    implicit object inputIterArrListInt extends InputIterArrList[Int]{}

    val len = 10;
    var arr: ArrayList[Int] = new ArrayList(len);
    for (i: Int <- 1 to len)
      arr.add(i)
    var arrFirst = new ArrayListIterator(arr, 0)
    var arrLast = new ArrayListIterator(arr, len)
    var r = find(arrFirst, arrLast, 7)
    println(r)
} 
```

`VT`我们在 中使用类型参数而不是抽象类型`def find[Iter, VT, V]`。

所以问题是：如何才能做得更好？是否可以在`value_type`没有附加类型参数的情况下使用抽象类型`VT`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T12:07:13.973

将 find 的签名更改为：

```
def find[Iter, V, II <: InputIterator[Iter]](first: Iter, last: Iter, x: V)(
  implicit iterator: II, cmp: EqualityComparable[II#value_type, V]): Iter 
```

这大概就是你想要表达的。

请注意，您的 Scala 代码实际上与 C++ 代码不同。在 C++中`find`使用`Iter::value_type`，但在 Scala 中使用`InputIterator[Iter]#value_type`.

# c# - 如何创建这个 wpf 工具栏

> ID：15001145
> 
> 赞同：4
> 
> 时间：2013-02-21T11:29:28.723
> 
> 标签：c#, wpf, xaml, toolbar

我想在 wpf 上创建一个这样的工具栏。

![在此处输入图像描述](../Images/259e466dfa625292356d2affdfff6e38.png)

我需要使用什么来创建带有红色圆圈按钮的区域？微软工具栏可以吗？

目前我尝试了这个：

![在此处输入图像描述](../Images/037684294efd5e7c9c8005559e58199e.png)

这是我的 xaml 代码：

```
 <ToolBarTray Background="#008ede" HorizontalAlignment="Stretch" VerticalAlignment="Top" Height="33" >
        <ToolBar ToolBarTray.IsLocked="True" Background="#008ede" HorizontalAlignment="Stretch"  VerticalAlignment="Center"  VerticalContentAlignment="Center">
            <Button Name="tbrClear" ToolTip="Clear" VerticalAlignment="Center">
                <Image Source="_XWPF_TBR_PREMIER.PNG_IMAGES.png" Name="Image1"></Image>
            </Button>
            <Button Name="tbrClear_" ToolTip="Clear" VerticalAlignment="Center" VerticalContentAlignment="Center">
                <Image Source="_XWPF_TBR_PRECED.PNG_IMAGES.png" Name="Image2"></Image>
            </Button>
        </ToolBar>    
    </ToolBarTray> 
```

1）首先，我想知道按钮是如何居中的，我添加了verticalAlignment =“Center”，但没有什么是居中的。请问你有什么想法吗？

2）其次，请问如何删除或隐藏右侧的小矩形白色？

3）那么，有人知道如何重新创建红色圈出的区域吗？

非常感谢 ：）

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:38:45.867

您的工具栏看起来居中。您的意思是您希望工具栏位于标题/标题所在的位置，还是要隐藏标题标题？对于后者，您可以在窗口中尝试 WindowStyle="None"。

至于“小矩形”，请尝试获取和设置工具栏的 OverflowGrid 可见性属性。

您可能还需要将元素包裹在 aborder 中并使用圆角半径来实现圆角。这是一个例子：

```
 <DockPanel  Height="40" VerticalAlignment="Top">
        <Border BorderBrush="LightBlue" BorderThickness="1" CornerRadius="8" Margin="1" Background="#008ede">
                <ToolBarTray Background="#008ede" HorizontalAlignment="Left" VerticalAlignment="Center"  >
                    <ToolBar ToolBarTray.IsLocked="True" Background="Transparent"  HorizontalAlignment="Stretch"  VerticalAlignment="Center"  VerticalContentAlignment="Center">
                        <Button Name="tbrClear" ToolTip="Clear" VerticalAlignment="Center">
                            <Image Source="_XWPF_TBR_PREMIER.PNG_IMAGES.png" Name="Image1"></Image>
                        </Button>
                        <Button Name="tbrClear_" ToolTip="Clear" VerticalAlignment="Center" VerticalContentAlignment="Center">
                            <Image Source="_XWPF_TBR_PRECED.PNG_IMAGES.png" Name="Image2"></Image>
                        </Button>
                    </ToolBar>
                </ToolBarTray>
        </Border>
    </DockPanel> 
```

# converter - Xugller 非法争论异常

> ID：15001148
> 
> 赞同：1
> 
> 时间：2013-02-21T11:29:42.713
> 
> 标签：converter, processing, illegalargumentexception, xuggler

我正在尝试使用 Xuggler 将电影 (.mp4) 转换为音频 (.mp3)。我在 OS X 上使用处理。

```
 IMediaReader reader = ToolFactory.makeReader("/Users/nouv/Desktop/video1.mp4");
 IMediaWriter writer = ToolFactory.makeWriter("/Users/nouv/Desktop/audioOutput.mp3", reader);
 int sampleRate = 22050;
 int channels = 1;
 writer.addAudioStream(0, 0, ICodec.ID.CODEC_ID_MP3, channels, sampleRate);

 reader.addListener(writer);
 try {
   while (reader.readPacket() == null)
           ;
 } finally {} 
```

我有这个错误：IllegalArgumentException：流 [0] 不是视频

```
Exception in thread "Animation Thread" java.lang.IllegalArgumentException: stream[0] is not video
at com.xuggle.mediatool.MediaWriter.encodeVideo(MediaWriter.java:754)
at com.xuggle.mediatool.MediaWriter.encodeVideo(MediaWriter.java:783)
at com.xuggle.mediatool.MediaWriter.onVideoPicture(MediaWriter.java:1434)
at com.xuggle.mediatool.AMediaToolMixin.onVideoPicture(AMediaToolMixin.java:166)
at com.xuggle.mediatool.MediaReader.dispatchVideoPicture(MediaReader.java:610)
at com.xuggle.mediatool.MediaReader.decodeVideo(MediaReader.java:519)
at com.xuggle.mediatool.MediaReader.readPacket(MediaReader.java:475)
at xuggle.setup(xuggle.java:135)
at processing.core.PApplet.handleDraw(PApplet.java:2117)
at processing.core.PGraphicsJava2D.requestDraw(PGraphicsJava2D.java:193)
at processing.core.PApplet.run(PApplet.java:2020)
at java.lang.Thread.run(Thread.java:680) 
```

我尝试使用 .mp4 、 .mov 和 .flv 电影，但我遇到了同样的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T08:06:02.503

IContainer 容器 = IContainer.make();

```
 int result = container.open(inputFilename, IContainer.Type.READ, null);
     // check if the operation was successful
      if (result<0)
          throw new RuntimeException("Failed to open media file");

      int numStreams = container.getNumStreams();

      int audioStreamId = -1;

      IContainer writer = IContainer.make();
      writer.open(outputFilename, IContainer.Type.WRITE, IContainerFormat.make());

      for (int i=0; i<numStreams; i++) {

          IStream stream = container.getStream(i);
          IStreamCoder coder = stream.getStreamCoder();
          IStreamCoder audioCoder = IStreamCoder.make(IStreamCoder.Direction.ENCODING, coder);

          if( coder.getCodecType() == ICodec.Type.CODEC_TYPE_AUDIO){
              coder.open(IMetaData.make(), IMetaData.make());
              audioStreamId = i;

              ICodec inputCodec = ICodec.findDecodingCodec(ICodec.ID.CODEC_ID_MP3);
              if (inputCodec == null)
                  throw new IllegalArgumentException("could not find input codec id");

              if (audioStreamId == -1)
                  throw new RuntimeException("could not find audio stream in container: "+inputFilename);

              writer.addNewStream(audioCoder);
              if(writer.writeHeader() == 0)
              {

                  IPacket packet = IPacket.make();
                  while(container.readNextPacket(packet) >= 0){

                      if(packet.getStreamIndex() == audioStreamId)
                      {
                          if(coder.isOpen()){

                              writer.writePacket(packet);

                          } else {throw new RuntimeException("Could not open Coder"); }
                      }
                  }
              }else {throw new RuntimeException("Header not Written for writer container.");}
          }

          coder.close(); audioCoder.close();
      }
      writer.writeTrailer();
      writer.close(); 
```

希望这可以帮助... ：）

# php - 从数据库中给定时间开始经过的时间

> ID：15001152
> 
> 赞同：0
> 
> 时间：2013-02-21T11:29:53.680
> 
> 标签：php, javascript, jquery, mysql

我有一个 HTML 表，其中包含从数据库中提取的记录。我正在使用 PHP/MySQL。

未从数据库中检索到我的表中名为“Timer”的列。我需要在此处显示经过的时间（从数据库中的特定时间开始）。例如，假设现在时间是 2013 年 2 月 21 日下午 6.20，数据库中的时间是 2013 年 2 月 21 日下午 5.50，我需要计时器列显示 00:30:00（因为从下午 5.50 开始已经过去了 30 分钟）。它必须是一个正在**运行**的计时器（不是可以使用 MySQL 日期时间差计算的静态计时器），因此访问该页面的任何人都应该能够看到相同的经过时间。当我单击另一个按钮时，我还需要停止计时器。

我在这里看到了与此问题相关的其他帖子，例如[从 Javascript 计时器到数据库的经过时间，](https://stackoverflow.com/questions/5774419/elapsed-time-to-database-from-javascript-timer)但我认为我要问的是不同的。我仍然对如何去做这件事感到困惑。我对 Javascript 的了解很少，如果您能帮助我或将我推荐给正确的地方，我将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:50:47.253

这可以用很少的 Javascript 来实现。

![在此处输入图像描述](../Images/15c6bf84e6b496ef15c50394baba52df.png)

假设“创建”时间在表格中以 format 动态呈现`dd MMM yyyy hh:mm:ss`，这样的事情应该可以解决问题：

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    ElapsedTimeLogger = function(dateElementId, elapsedElementId, interval) {
        var container = $(elapsedElementId);
        var time = parseDate($(dateElementId).text());
        var interval = interval;
        var timer;

        function parseDate(dateString) {
            var date = new Date(dateString);
            return date.getTime();
        }

        function update() {
            var systemTime = new Date().getTime();
            elapsedTime = systemTime - time;
            container.html(prettyPrintTime(Math.floor(elapsedTime / 1000)));
        }

        function prettyPrintTime(numSeconds) {
            var hours = Math.floor(numSeconds / 3600);
            var minutes = Math.floor((numSeconds - (hours * 3600)) / 60);
            var seconds = numSeconds - (hours * 3600) - (minutes * 60);

            if (hours < 10) hours = "0" + hours;
            if (minutes < 10) minutes = "0" + minutes;
            if (seconds < 10) seconds = "0" + seconds;
            var time = hours + ":" + minutes + ":" + seconds;

            return time;
        }

        this.start = function() {
            timer = setInterval(function() {update()}, interval * 1000);
        }

        this.stop = function() {
            clearTimeout(timer);
        }
    }
    $(document).ready(function () {
        var timeLogger = new ElapsedTimeLogger("#date", "#elapsed", 2);
        timeLogger.start();

        $("#stop_timer").click(function() {
            timeLogger.stop();
        });
        $("#start_timer").click(function() {
            timeLogger.start();
        });
    });
    </script>
</head>
<body>
    <table border="1">
        <tr><th>Created</th><th>Timer</th></tr>
        <tr><td id="date">21 Feb 2013 12:30:00</td><td id="elapsed"></td></tr>
    </table>
    <input id="stop_timer" type="button" value="Stop timer"></input>
    <input id="start_timer" type="button" value="Start timer"></input>
</body>
</html>
```

将上面的代码复制到一个文件中，比如说`index.html`，然后在浏览器中打开它。我在 Chrome 上进行了测试。

它应该每 2 秒更新一次经过的时间，但您可以将更新间隔更改为适合您的时间，例如使其每 5 分钟更新一次：

```
new ElapsedTimeLogger("#date", "#elapsed", 300);
```

一般概念是将渲染的“创建”日期解析为纪元时间戳（以毫秒为单位），然后计算其与当前系统时间的差异。要动态更新经过的时间，您可以使用 Javascript 的`setInterval`函数。要停止更新经过的时间，请使用 Javascript 的`clearTimeout`功能。

我从[powtac](https://stackoverflow.com/a/6313008/551467)`prettyPrintTime`提升了功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:38:12.957

如果你正在寻找一个纯 html 基础的解决方案，用 sql 来做动态更改，那是不可能的。如果你需要做一个运行计时器，你将需要使用 JS。（也可以在 css5 的帮助下完成）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:42:05.880

您想使用 PHP 从数据库中检索时间，然后使用 Javascript 显示一个从检索到的时间开始计数的计时器。您应该能够找到可以很容易地做到这一点的可用的预制 Javascript 脚本。这是我找到的一个。我不知道它是否最适合您的需求，但它是第一个结果之一。只需剪掉不需要的部分，如年、月等。

[http://praveenlobo.com/techblog/javascript-countup-timer/](http://praveenlobo.com/techblog/javascript-countup-timer/)

# c - 可以1返回调用2返回吗？

> ID：15001153
> 
> 赞同：4
> 
> 时间：2013-02-21T11:29:55.020
> 
> 标签：c, logic, theory

这主要是理论上的问题，因为它没有太多用处。

考虑这种情况：

```
function a() {
  return;
}

function b(){
  a();
} 
```

您可以从子函数调用父函数中的返回吗？

现在在这种情况下，您可以简单地做`return a();`，这会发生，但是假设您对不执行退货感兴趣。

我知道在将它翻译成汇编时这是没有意义的，在这种情况下你可以使用`goto`，但我们都知道这是多么危险。

我的逻辑是，如果您可以`continue`从将在父级上调用 continue 的子循环执行 a，这应该是相同的，但循环不会影响堆栈，因此 continue 确实有效。

我想知道是否有任何方法可以使用事件或 oop 方法来处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:36:49.413

传统的 C 解决方案是`longjmp`函数，它可以任意向上跳转堆栈。请注意，总是有足够聪明的人不使用它，异常处理在很大程度上取得了成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:41:37.180

您可以使用宏而不是函数。

```
#define a() ... return ... 
```

一个用例是在发布版本中没有完全删除的断言，但会中止一个函数：

```
#define REQUIRE(x)  do { assert((x)); if (!(x)) return; } while (0) 
```

* * *

您还可以在汇编程序中破解某些东西以获取调用函数的堆栈帧并从那里使用返回地址：

```
void return2(){
  void * frame;
  #if (defined(x86_64) || defined(__x86_64__))
  __asm__(
    "pop %rbp\n"        //skip over stack frame of return2
    "mov %rsp, %rbp\n"
    "pop %rax\n"
    "pop %rbp\n"        //skip over stack frame of caller
    "mov %rsp, %rbp\n"
    "pop %rax\n"
  );

  #else
  #error only implmented for amd64...
  #endif
} 
```

然后

```
void a(){
    printf("a 0\n");
    return2();
    printf("a 1\n");
}

void b(){
    printf("b 0\n");
    a();
    printf("b 1\n");
}

int main(int argc, char* argv[])
{
    printf("main 0\n");
    b();
    printf("main 1\n");
    return 0;
} 
```

印刷

```
main 0
b 0
a 0
main 1 
```

这是所有解决方案中最危险的解决方案（如果 gcc 内联某些内容或删除更高优化级别的堆栈帧，它会失败。但您可以添加检查指令的检查，如果它们已优化）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:46:18.103

如果您在使用 MSVC 的 Windows 上，您可以使用异常（结构化异常处理，SEH）来实现类似的效果。正如 thiton 所说，在其他平台上，您可以使用 setjmp/longjmp。

使用 SEH，您可以执行以下操作（没有尝试过，因为我没有准备好 Visual Studio 的 Windows）：

```
#include "stdio.h"
#include "Windows.h"

void func_b() {
    printf("In func_b()\n");
    // return safely to main
    RaiseException(1, EXCEPTION_NONCONTINUABLE, 0, NULL);
    printf("At end of func_b()\n");
}

void func_a() {
    printf("In func_a()\n");
    func_b();
    printf("At end of func_a()\n");
}

void main() {
    printf("In func_a()\n");
    __try {
        func_a();
    }
    __except (GetExceptionCode() == 1) {
        printf ("Early return to main()\n");
    }
    printf("At end of main()\n");
} 
```

RaiseException 调用导致控制向上堆栈，直到在 main() 中捕获异常。这不是真正的“return^2”，因为调用函数（main）必须配合。通常，您还需要与您想要跳过的函数（此处为 func_a）合作，因为它们可能会做一些事情并需要清理。只是说“从 func_b 返回，并停止 func_a 正在做的任何事情并从那里返回”可能是非常危险的。但是，如果您使用异常，您可以将代码包装在 func_a 中的 try/finally 子句中：

```
FILE* f;
__try {
    f = fopen("file.txt", "r");
    func_b();
}
__finally {
    fclose(f);
    printf("Cleanup for func_a()\n");
} 
```

这在本机支持异常的语言（C++、Python、Java 等）中当然要好得多，并且不只是将其作为专有扩展加以固定。

请注意，有些人认为将异常用于控制流是不好的做法，并说应为真正的异常事件（如 IO 错误）保留异常。在许多情况下它确实有意义（例如，您正在解析某些东西，并在堆栈深处意识到您必须倒带并以不同的方式解析某些东西，您可以抛出自定义异常）。一般来说，我会说尽量不要太聪明，尽量不要做会让你的程序的读者感到困惑的事情。当您似乎需要使用这样的技巧时，通常有一种方法可以重组程序，以一种对语言来说很自然的方式来完成。或者，您使用的语言可能不是解决问题的好选择。

# c# - 使用 C# Regex 查找 C++ 代码模式（定义 & emuns）

> ID：15001156
> 
> 赞同：1
> 
> 时间：2013-02-21T11:30:11.613
> 
> 标签：c#, c++, regex

我编写了在 C++ 源文件上运行的 C# 程序并寻找以下内容：

```
 #define SOMETHING_A    99 
```

和

```
typedef enum {
  EX_A,
  EX_B,
  EX_C,
  EX_D,
  EX_E
} Examples; 
```

和

```
enum EXAMPLE2
{
    EX2_A=0,
    EX2_B=1,
    EX2_C=2,
    EX2_D=3,
    EX2_LAST = EX2_D
}; 
```

我的目标是获得以下对列表作为输出：

```
{SOMETHING_A,99}
{EX_A,0}
{EX_B,1}
..
..
{EX2_A,0}
{EX2_B,1}
..
.. 
```

您能帮我找到与上述 3 种模式匹配的正确正则表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:52:48.100

如果您想要一个适用于任何 c++ 文件的解决方案，请使用解析器而不是正则表达式。有太多的可能性需要考虑（不同的代码风格、被注释掉的代码等）。

如果您只想对一组已知的文件执行此操作，并且它们具有可预测的格式和样式，那么正则表达式可能就可以了。实际上，你最好使用几个正则表达式：

```
/^#define\s+(\S+)\s+(\S+)/ 
```

这仅匹配位于行首的定义语句。

这是 typedef 枚举：

```
/^\s*typedef\s+enum\s*\{[^\}]+\}[^;]+;/ 
```

（不清楚你想从这个中获取什么，所以我没有捕捉到任何东西）。

这是枚举。最好分两步完成：

```
/^\s*enum\s+(\S+)\s*\{\s*([^\}]+?)\s*\}\s*;/ 
```

第一步获取第一个捕获组中的枚举名称和第二组中的内容。在第二个捕获组上执行正则表达式以获取字段和值：

```
/(\S+)\s*=\s*([^\s\,]+)/ 
```

每个匹配项都会为您提供一个名称/值对。

这些正则表达式应该处理您的示例，并且它们应该在处理 C++ 代码中最常见的用法方面做得不错。但它们并不完美；如果您想要一个涵盖所有可能结构的解决方案，请不要使用正则表达式。

*注意：您需要确保在使用这些[`match_single_line`标志](http://www.boost.org/doc/libs/1_34_0/libs/regex/doc/match_flag_type.html)时关闭。*

# asp.net - 通过 URL 传递 GUID 的安全风险

> ID：15001159
> 
> 赞同：2
> 
> 时间：2013-02-21T11:30:19.283
> 
> 标签：asp.net, security, guid

从安全角度来看，我正在寻求有关使用 GUID 的一些建议。我开发了一个 ASP.Net 应用程序。它使用户可以访问一些不在 Web 服务器上的材料，例如文档和照片。这些存储在文件服务器上。我有一个“GetResource.aspx”页面，它获取资源的 ID，使用 System.IO.FileInfo 打开它，将其写入响应流并返回它。

因此，GetResource.aspx?id=123 将返回，例如，用户有权访问的图片。当然，用户可以手动输入 URL 作为 GetResource.aspx?id=456 在这种情况下，具有该 ID 的图片/文档等将被返回，并且可能不是他们有权访问的。

所以显然使用整数 ID 是不够的。使用 GUID 作为 ID 是否会提供足够的“随机性”，我可以可靠地假设用户永远无法手动输入“GetResource.aspx?guid={A guessed guid}”并且期望访问有效资源，包括使用脚本时每秒做出许多随机猜测？

或者，没有什么可以替代从 Session 变量中确定用户的 ID，确定他确实有权访问所请求的资源，然后才返回它（在我写这篇文章时，我越来越相信这种情况！ ）。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T11:33:37.073

当然，除了验证用户并查看他们是否有权访问资源之外，没有其他替代方法。您在这里提出的是一种使用户更难为他们无权查看的文档（无论是错误的还是故意的）找到有效 ID 的方法。

GUID 肯定足够大，以至于您在实践中永远不会得到“意外”的有效 id。这使得未经授权的 GUID 会检查一个运行良好的系统，只要没有人积极尝试破坏它。另一方面，授权检查是一个即使在有活跃攻击者的情况下也能很好地工作的系统（当然这取决于攻击者可以设法做什么）。

您应该根据应用程序的性质在两种方法之间进行选择（它是公开的吗？用户是否知道并对他们的行为负责？“安全漏洞”会有多严重？）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-21T11:33:27.770

如果它是受保护的内容，您应该在盲目地提供用户之前确定用户是否被授权。

GUID 确实在一定程度上有所帮助，它使猜测 URL 变得更加困难，所以我仍然建议使用它们。但是 URL 仍然可以共享（即使是偶然的）。如果不管是谁提出请求，您都只是要提供内容，那么它几乎没有真正的保护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:35:14.740

如果您认为内容受到限制并且有一些个人数据，那么您应该使用用户名和密码。

# sql - 只显示最新/最新记录

> ID：15001170
> 
> 赞同：0
> 
> 时间：2013-02-21T11:30:38.877
> 
> 标签：sql, window-functions

好的，所以我有一个显示级别的列和一个显示已停止在该特定级别玩的玩家的列。

现在一个玩到 5 级的玩家也被列在 4、3、2 和 1 级。这正是我不想要的。如果一个玩家已经玩到 5 级，我希望他只被计算在 5 级的行中，依此类推。

怎么做？

例如，这就是我得到的：

```
level  stopped_playing
101     2632
102     1206
103     970
104     920 
```

这就是我要的：

```
level  stopped_playing
101     1426
102     236
103     50
104     920 
```

920 名玩家达到了 104 级（当然也玩了 101 级）并停在那里，1426 人只玩了 101 级并且已经停在那里。但结果我得到了达到 4 级的 920 也算在 101 级行。

如何避免？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:34:18.203

做这样的事情（适应你的实际表）：

```
select stopped_level, count(player) from (
        select player, max(level) as stopped_level
            from whatever_your_tables_are
            group by player
    )
    group by stopped_level 
```

*注意：将来列出您的表格及其结构会有所帮助。此外，最好提及您使用的是什么品牌的 SQL，因为它们都有不同的功能。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:35:51.037

考虑到您的表结构的粗略想法将是

```
Select Level, count(*) 
from (select player, max(Level)  as 'Level'
from table group by player) group by Level; 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:37:49.900

这是一个很好的窗口函数应用程序。假设最高级别是最高值，试试这个：

```
select maxlevel, COUNT(*) as Stopped_Playing
from (select t.*,
             MAX(level) over (partition by playerid) as maxlevel
      from t
     ) t
group by maxlevel
order by maxlevel 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T11:46:38.953

您还没有提到您的 RDBMS。使用 PostgreSQL、ORACLE、DB2、SQL Server 2012、Teradata、Sybase 和 Vertica 中存在的窗口函数可以轻松解决问题。

以下查询在 PostgreSQL 上进行了测试（也在[SQL Fiddle](http://sqlfiddle.com/#!12/3c0e2/1)上）：

```
SELECT *,
       stopped_playing - lag(stopped_playing,1,0)
                             OVER (ORDER BY level DESC) wanted
  FROM tab
 ORDER BY level; 
```

# string - 如何在 android 中使用 hashmap 在 listview 中绑定 String[] 值？

> ID：15001172
> 
> 赞同：0
> 
> 时间：2013-02-21T11:30:44.483
> 
> 标签：string, web-services, android-listview, baseadapter

您好我正在尝试使用 android 中的 .net Web 服务使用 hashmap<> 获取值。我有定制的适配器，我正在尝试这样做。

```
SoapObject folderResponse = (SoapObject)envelope.getResponse();

                Log.i("AllFolders", folderResponse.toString());

                String[] folderslist = new String[folderResponse.getPropertyCount()];        

//getting values using folderslist.

                ArrayList<HashMap<String, String>> hashfoldersList = new ArrayList <HashMap<String, String> >();   

//But I want hashfoldersList list in my custamized adapter.

                for(i=0; i<folderResponse.getPropertyCount(); i++) {

                    SoapObject SingleFolder = (SoapObject)folderResponse.getProperty(i);

                    Log.i("SingleFolder", SingleFolder.toString());

                        ID= SingleFolder.getProperty(0).toString();
                        KEY_Name = SingleFolder.getProperty(1).toString();
                        ParentID = SingleFolder.getProperty(2).toString();
                        CreatedBy= SingleFolder.getProperty(3).toString();

                        System.out.println(ID);
                        System.out.println(KEY_Name);
                        System.out.println(ParentID);
                        System.out.println(CreatedBy);

                    SoapPrimitive Record =(SoapPrimitive) SingleFolder.getProperty(1);

                        Log.i("Record", Record.toString());

                {

                        folderslist[i] = SingleFolder.getProperty(0).toString();

                }

                XMLParser parser = new XMLParser();
                String xml = parser.getXmlFromUrl(URL); // getting XML from URL
                org.w3c.dom.Document doc = parser.getDomElement(xml); // getting DOM element

                NodeList nl = (NodeList) doc.getElementsByTagName(ID);
                // looping through all song nodes <song>
                for (int i = 0; i < nl.getLength(); i++) {
                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    Element e = (Element) nl.item(i);
                    // adding each child node to HashMap key => value

                    map.put(ID, parser.getValue(e, ID));
                    map.put(KEY_Name, parser.getValue(e, KEY_Name));
                    map.put(ParentID, parser.getValue(e, ParentID)); 
                    map.put(CreatedBy, parser.getValue(e, CreatedBy));

                    foldersList.add(map);
                }

                        listview = (ListView)findViewById(R.id.listview);

                        adapter=new LazyAdapter(this, hashfoldersList);   

//My custemized adapter.
                        listview.setAdapter(adapter);

                        listview.setOnItemClickListener(this);
                }

        } 
```

请建议，如何使用 ArrayList> hashfolderlist 获取列表中的值，因为我使用的是 string[] 文件夹列表。当我插入 hashfolderlist 时，它给出了错误。请建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:49:40.073

伙计，您应该有一个简单的适配器来获取字符串并将其放入列表视图中。第二你应该有2个文本视图

```
SimpleAdapter adapter = new SimpleAdapter(this, list,
                    R.layout.your_activity, new String[] { "", "" },
                    new int[] { R.id.textview1, R.id.textView2 }

            );

            listView1.setAdapter(adapter); 
```

希望对你有帮助！！

# javascript - Javascript 不适用于特定版本的 IE

> ID：15001173
> 
> 赞同：1
> 
> 时间：2013-02-21T11:30:51.920
> 
> 标签：javascript, html, internet-explorer, alert, ietester

我对 IE 有一个罕见的问题。我正在尝试创建一个在 IE 版本低于或等于 IE 8 时启动此脚本的页面（只是一个简单的警报和一个位置）。当我尝试在 IETester 上调试此 html 时，警报仅显示在 IE 5.5 和 IE 6 上，但在 7 和 8 中均不显示。我做错了什么？

```
<!DOCTYPE html>
<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<!--[if lte IE 8]>
    <script type="text/javascript">
        alert('Para poder usar Consumedia necesita tener instalada una version de Internet Explorer 9 o superior');
        window.location = "http://www.google.com";
    </script>   
<![endif]-->
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:33:07.650

对不起，我的第一个答案，没有意识到真正的问题。

尝试更改 if 语句：

```
<!--[if lt IE 9]>
    //Fires for IE8 and above
<![endif]--> 
```

请参阅此处的示例：http: [//css-tricks.com/how-to-create-an-ie-only-stylesheet/](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:44:06.750

这向我展示了本机 IE7 的警报。

似乎 IETester 可能有关于条件注释的[错误。](http://www.my-debugbar.com/forum/p3000-2011-02-06-15%3A10%3A14.html)请参阅[如何使 IE9 模拟 IE7？](https://stackoverflow.com/q/7397568/851811)替代IETester。

[@Pekka](https://stackoverflow.com/a/2840173/851811)已经多次评论过[这个](https://stackoverflow.com/a/2215285/851811)问题：

> 在同一系统上安装（或激活）多个 Internet Explorer 实例时，将根据系统上可用的最高 IE 版本解析条件注释

编辑：并没有真正增加太多，但我只安装了 IE7，它还显示了 IETester for IE <= 7 的警报。

# python - 如何在 osx 10.6.8 上安装 python 库 Pyexiv2 和 Gexiv2？

> ID：15001174
> 
> 赞同：5
> 
> 时间：2013-02-21T11:30:57.363
> 
> 标签：python, macos, virtualenv, pyexiv2

有谁知道如何在 Mac OSX 上安装 python 库[pyexiv2](http://tilloy.net/dev/pyexiv2/)和/或 Gexiv2，最好是在版本 10.6.8 和 virtualenv 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-10T23:30:19.327

Gexiv2 现在可以在[Homebrew](http://brew.sh)中使用，所以只需...

```
 brew install gexiv2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T21:51:59.897

[使用Homebrew](http://mxcl.github.com/homebrew/)包管理器非常简单：

```
brew install exiv2 pyexiv2 
```

如果您使用的是 Macports，它还有 exiv2 公式：

[http://www.macports.org/ports.php?by=name&substr=exiv](http://www.macports.org/ports.php?by=name&substr=exiv)

- 编辑 -

旁注：我在“import pyexiv2”处遇到段错误。原来我同时安装了系统 Python 2.7.2 和自制 Python 2.73。在我卸载了 brewed Python 后问题就消失了。相关信息可以在这里找到：

[https://answers.launchpad.net/pyexiv2/+question/212471](https://answers.launchpad.net/pyexiv2/+question/212471)

# mysql - MySQL存储过程嵌套游标错误

> ID：15001176
> 
> 赞同：0
> 
> 时间：2013-02-21T11:31:02.923
> 
> 标签：mysql, stored-procedures

我正在为制作第三个表的多对多关系表复制数据。存储过程当前看起来像这样，但它有一些错误

```
DELIMITER $$ 
CREATE PROCEDURE `test`.UpdateRelatedAccounts() 
BEGIN 
    DECLARE ssn_sel_id VARCHAR(255) DEFAULT 0;
    DECLARE id_sel_id CHAR(36) DEFAULT 0;
    DECLARE id_sel_rel CHAR(36) DEFAULT 0;
    DECLARE no_more_rows BOOLEAN;
    DECLARE num_rows INT DEFAULT 0;
    DECLARE no_more_rel_rows BOOLEAN;
    DECLARE rel_num_rows INT DEFAULT 0;

  DECLARE ssn_all_cur CURSOR FOR
   SELECT ssn, id FROM ssn WHERE ssn NOT IN ('','000-00-0000');

  DECLARE ssn_cur CURSOR FOR
   SELECT id FROM ssn WHERE id != id_sel_id AND ssn = ssn_sel_id;

  DECLARE CONTINUE HANDLER FOR NOT FOUND SET no_more_rows = TRUE;
 -- DECLARE CONTINUE HANDLER FOR NOT FOUND SET no_more_rel_rows = TRUE;

 OPEN ssn_all_cur;
 SELECT FOUND_ROWS() INTO num_rows;
    the_loop: LOOP
        FETCH  ssn_all_cur
        INTO ssn_sel_id, id_sel_id;

        IF no_more_rows THEN
        CLOSE ssn_all_cur;
        LEAVE the_loop;
        END IF;

    OPEN ssn_cur;
    SELECT FOUND_ROWS() INTO rel_num_rows;
    the_rel_loop: LOOP
        FETCH  ssn_cur
        INTO id_sel_rel;

        IF no_more_rel_rows THEN
        CLOSE ssn_cur;
        LEAVE the_rel_loop;
        END IF;

      INSERT INTO `ssn_related` ( `ssn_primary`, `ssn_related` ) VALUES ( id_sel_id, id_sel_rel ), ( id_sel_rel, id_sel_id ); 

     END LOOP the_rel_loop;

  END LOOP the_loop;    
END$$ 
DELIMITER ; 
```

我如何嵌套使用这些值并插入到第三个表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:31:28.690

光标很慢，而且大多数时候是不必要的。嵌套游标很慢²且不必要²。光标只能作为最后的手段，当实在没有其他办法的时候。

您想要做的可以分解为：

```
INSERT INTO `ssn_related` ( `ssn_primary`, `ssn_related` )
SELECT
ssn_1.id,
ssn_2.id
FROM
ssn ssn_1
INNER JOIN ssn ssn_2 ON ssn_2.ssn = ssn_1.id
WHERE ssn_1.ssn NOT IN ('', '000-00-0000')
AND ssn_2.id != ssn_1.id; 
```

然后，您对 SELECT 中的交换列再次执行相同操作。

```
INSERT INTO `ssn_related` ( `ssn_primary`, `ssn_related` )
SELECT
ssn_2.id,
ssn_1.id
FROM
ssn ssn_1
INNER JOIN ssn ssn_2 ON ssn_2.ssn = ssn_1.id
WHERE ssn_1.ssn NOT IN ('', '000-00-0000')
AND ssn_2.id != ssn_1.id; 
```

# ios - 关闭通过 Popup 呈现的 ViewController

> ID：15001178
> 
> 赞同：2
> 
> 时间：2013-02-21T11:31:08.687
> 
> 标签：ios, xcode, ipad, popup, uipopovercontroller

所以我正在使用故事板创建一个基于 ipad 食谱的应用程序。只是为了让您了解我的程序的结构，这里是 View 控制器的流程：

> ViewController --Modally--> PreviewViewController --Modally--> RecipeViewController --Popup--> IngredientsViewController

所有这些都在故事板中完成。我创建了`IngredientsViewController`并将其链接`RecipeViewController`到 以显示为弹出窗口，效果很好。但是我希望能够以`IngredientsViewController`编程方式关闭（因为我已经实现了语音命令功能）。问题是我似乎无法访问`IngredientsViewController`以将其关闭。（抱歉，我还不能发布任何图片）。

我正在使用以下代码以`IngredientsViewController`编程方式（从内部`RecipeViewController`）呈现：

```
[self performSegueWithIdentifier:@"ingr" sender:nil]; 
```

哪个可以很好地显示弹出窗口，但我无法将其关闭。我试图通过视图控制器的层次结构访问它，但似乎找不到它，我认为它会位于堆栈的顶部，但显然不是？我试过这样的事情：

```
[self.presentedViewController dismissViewControllerAnimated:YES completion:nil]; 
```

这又是从内部调用的`RecipeViewController`。但这只是忽略了弹出窗口呈现的`RecipeViewController`而不是那个。`IngredientsViewController`

需要明确的`IngredientsViewController`是，它不是一个`UIPopoverController`，它是在故事板中创建的一个正常`viewController`的，它的 segue 样式是弹出链接到`RecipeViewController`.

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:56:39.917

```
UIPopoverController *popOver = (UIPopoverController *)self.presentedViewController;
[popOver dismissPopoverAnimated:YES]; 
```

如果您的目标视图控制器是`UIPopoverController`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:37:51.120

你试过`presentViewController:animated:completion:`代替`performSegueWithIdentifier:`吗？

# vim - 是否有一个 Vim 插件可以记录打字的爆发

> ID：15001179
> 
> 赞同：0
> 
> 时间：2013-02-21T11:31:13.117
> 
> 标签：vim

当您在 vim 中输入代码时，您可能会在某个时候想起您正在输入的那个句子，vim 应该可以在较长的停顿之间记录那些输入的爆发。

有没有类似的 Vim 插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:50:41.513

查看我的[PrevInsertComplete 插件](http://www.vim.org/scripts/script.php?script_id=4185)。它记录以前的插入（通过离开插入模式来分隔，而不是键入频率 - 这很难确定，无论如何你应该经常离开插入模式），并提供它们（由可选的关键字前缀过滤）以供完成。

# objective-c - JSON 响应包含 XML 标头

> ID：15001182
> 
> 赞同：1
> 
> 时间：2013-02-21T11:31:24.213
> 
> 标签：objective-c, xml, json, httpwebrequest, httpwebresponse

我正在向 ASP.NET Web 服务发送 HTTP 请求，它以 JSON 形式返回响应（Web 服务最初返回一个 DataTable，它使用[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)将其转换为 JSON）。

我收到的响应是 JSON。但随之而来的是一个 XML 标头！

```
2013-02-21 16:42:41.062 HttpRequestTest[6023:c07] <?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://www.my-comp.com/">[
  {
    "Int_Proj": 152,
    "NewMailCnt": 79,
    "DocsForRev": 2,
    "DocsForRel": 1,
    "Int_Sec": 2,
    "UnregCnt": 3225,
    "UnregAccss": 3,
    "OutstMLCnt": 276,
    "TBEdition": 1,
    "ProjNo": "TESTPROJ1",
    "ProjTitle": "TESTPROJ1 - DO NOT TOUCH TESTPROJ1 - DO NOT TOUCH TESTPROJ1",
    "ServerName": "ISURU",
    "ServerUrl": "ISURU/myserver/",
    "Int_Server": 1,
    "Int_Key": 2,
    "IsGblAdrBk": 0
  },
  {
    "Int_Proj": 160,
    "NewMailCnt": 11,
... 
```

这是调用 Web 服务的 Objective-C 代码。

```
NSURL *url = [NSURL URLWithString:@"http://isuru/TBWebService/Session.asmx/GetUserProjectList?userID=dr&companyID=qas&password=david&errorMsg=''"];

NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url
                                                cachePolicy:NSURLRequestReturnCacheDataElseLoad
                                            timeoutInterval:30];
NSData *urlData;
NSURLResponse *response;
NSError *error;

urlData = [NSURLConnection sendSynchronousRequest:urlRequest
                                    returningResponse:&response
                                                error:&error];
NSString *returnedData = [[NSString alloc] initWithData:urlData
                                                   encoding:NSUTF8StringEncoding];
NSLog(@"%@", returnedData); 
```

这是 ASP.NET Web 服务方法的 C# 代码。

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public string Logon(string userID, string companyID, string password, string projNo)
{
    MySoftware.TestSoft.User user = new MySoftware.TestSoft.User();
    DataTable userTable = user.ListUserAccessProjects(userID, companyID, password, "", "");
    if (userTable.Rows.Count == 0)
    {
        string jsonRet = JsonConvert.SerializeObject("ERROR - Invalid User ID, Company ID or Password.", Formatting.Indented);
        return jsonRet;
    }

    DataRow[] projectEntries = userTable.Select(String.Format("ProjNo='{0}'", projNo));
    if(projectEntries.Length==0)
    {
        string jsonRet = JsonConvert.SerializeObject("ERROR - Invalid Project Number.", Formatting.Indented);
        return jsonRet;
    }

    int int_Project = Convert.ToInt32(projectEntries[0]["int_proj"]);

    MySoftware.TestSoft.Logon logon = new  MySoftware.TestSoft.Logon();
    try
    {
        bool isSameServer = false;
        string sessonKey = logon.Login(Convert.ToInt32(projectEntries[0]["int_Key"]), Convert.ToInt32(projectEntries[0]["Int_Server"]), userID, companyID, password, int_Project, out isSameServer);
        string json = JsonConvert.SerializeObject(sessonKey, Formatting.Indented);
        return json;
    }
    catch (ApplicationException ex)
    {
        string jsonRet = JsonConvert.SerializeObject("ERROR - " + ex.Message, Formatting.Indented);
        return jsonRet;
    }
} 
```

在 SO 上已经提出了同样的问题，我尝试了那里提到的所有内容，但无济于事。此外，它们都与 Objective-C 无关。

如何在没有 XML 标头的情况下获得 JSON 响应？

# objective-c - 如何在特定字符串之后将字符串放入字符串

> ID：15001184
> 
> 赞同：0
> 
> 时间：2013-02-21T11:31:26.987
> 
> 标签：objective-c

我是编程新手。我有字符串`NSString *string = @"\U0420\U043e\U0437\U044b";`，在每个斜线之后`('\')`我需要再放一个斜线来得到这样的字符串`@"\\U0420\\U043e\\U0437\\U044b"`

我是编程和objective-c的新手。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:37:40.193

我原来的答案是：

使用`[NSString stringByReplacingOccurrencesOfString:withString:]`（[参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/stringByReplacingOccurrencesOfString%3awithString%3a)）。

```
NSString *string = @"\U0420\U043e\U0437\U044b";
NSString *converted = [string stringByReplacingOccurrencesOfString:@"\\" 
                                                        withString:@"\\\\\\"]; 
```

但是我现在认为这是不对的，因为这些`\`角色实际上并不存在于`string`; 相反，编译器会将这些序列中的每一个转换为 unicode 字符。您将需要这样编码`string`：

```
NSString *string = @"\\U0420\\U043e\\U0437\\U044b"; 
```

为了使用上面的代码。我看不到任何替代方案。

**进一步更新**：当我遇到这样的问题时，通常会在字符串文字和字符串数据之间产生混淆。在您的问题中，这些`\`字符不会出现，因为编译器会将它们转换为 unicode 字符（`\Uxxx`是单个字符的 unicode 转义序列）。但是，如果您在运行时提供了类似的字符串（例如从文本文件中读取），那么这些`\`字符将存在，您可以使用上面的代码。

# ruby-on-rails - 如何在搜索表单中搜索多条记录？

> ID：15001194
> 
> 赞同：0
> 
> 时间：2013-02-21T11:31:53.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, search

我试图让用户能够在搜索表单的一个字段中选择多个记录。

像这样的东西：

```
<%= f.input_field :neighborhood_id, collection: Neighborhood.order(:name), :url => autocomplete_neighborhood_name_searches_path, :as => :autocomplete, 'data-delimiter' => ',', :multiple => true, :class => "span8" %> 
```

它像这样将它发送到我的`search`模型：`@search = Search.create!(params[:search])`

这就是`Search.rb`模型对它的作用：

```
key = "%#{keywords}%"
listings = Listing.order(:headline)
listings = listings.includes(:neighborhood).where("listings.headline like ? or neighborhoods.name like ?", key, key) if keywords.present?
listings = listings.where(neighborhood_id: neighborhood_id) if neighborhood_id.present?
listings 
```

问题是这只是接受 1 `neighborhood_id`，所以当我选择多个对象时出现此错误：

```
undefined method `to_i' for ["Alley Park, Madison"]:Array 
```

Where`Alley Park`和`Madison`是 2 个社区的名称，而不是 ID。

那么我如何让这个工作呢？

谢谢。

**编辑 1**

问题似乎不在于`params[:search]`本身的查找，而在于将表单输入转换为条目数组。我尝试将搜索方法更改为：

```
listings = listings.includes(:neighborhood).where("neighborhoods.name like ?", neighborhood_id) if neighborhood_id.present? 
```

不要挂断我正在抬头`neighborhood.name`和经过的事实`neighborhood_id`。我这样做是因为我知道该字段的参数`neighborhood_id`实际上是`neighborhood`. 如果这行得通，我会重构一些东西，但它没有。所以不要挂断电话。

但这仍然返回错误`undefined method 'to_i'....`

此外，即使我只传入 1 个选项，我仍然会收到该错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:49:24.540

```
listings = listings.where("neighborhood_id in (?) ", neighborhood_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:19:24.000

You can get the id instead of neighborhood names from the input field like this:

```
<%= f.input_field :neighborhood_id, collection: Neighborhood.order(:name), :url => autocomplete_neighborhood_name_searches_path, :as => :autocomplete, 'data-delimiter' => ',', :multiple => true, :class => "span8", :input_html => { :id => "neighborhood_id" } %> 
```

# java - java.lang.ClassCastException: android.app.Application - 强制转换

> ID：15001204
> 
> 赞同：2
> 
> 时间：2013-02-21T11:32:02.060
> 
> 标签：java, nfc, android, java.lang.class

java.lang.ClassCastException：android.app.Application 无法转换为 com.example.project.DataDevice

我的代码：

```
public class Project extends Activity{

private boolean connection = false;
public Tag tagFromIntent = null;

private Button textRead;
private NFCForegroundUtil nfcForegroundUtil;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.project);    

    nfcForegroundUtil = new NFCForegroundUtil(this);

    this.textRead= (Button) findViewById(R.id.button2);

    initListeners();
}

private void initListeners() {

    textRead.setOnClickListener(new OnClickListener()
    {

        public void onClick(View v)
        {

            if (connection == true)
            {
                DataDevice dataDevice = (DataDevice) getApplication();
                dataDevice.setCurrentTag(tagFromIntent);

                IsoDep nfca = IsoDep.get(dataDevice.getCurrentTag());

                try
                {
                    byte[] read= new byte[] { 0x00};

                    byte[] ans = null;

                    nfca.setTimeout(2000);
                    nfca.connect();
                    nfca.setTimeout(2000);
                    if (nfca.isConnected())
                    {

                        nfca.setTimeout(2000);
                        ans = nfca.transceive(read);

                        try
                        {
                            Thread.sleep(1500);
                        }
                        catch (InterruptedException e)
                        {
                            e.printStackTrace();
                        }

                    }

                    nfca.close();
                    String textRead = HexBin.encode(ans);

                }

                catch (IOException e)
                {
                    Log.i("A", "IOException is: " + e.getMessage());
                    e.printStackTrace();
                }

                if (nfca.isConnected())
                {
                    try
                    {
                        nfca.close();
                    }
                    catch (IOException e)
                    {
                        e.printStackTrace();
                    }
                }

            }

        }
    });

}

@Override
protected void onNewIntent(Intent intent)
{

    super.onNewIntent(intent);
    action = intent.getAction();
    tagFromIntent = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
    connection = true;

}

public void onPause()
{
    super.onPause();
    nfcForegroundUtil.disableForeground();
}

public void onResume()
{
    super.onResume();

    nfcForegroundUtil.enableForeground();

    if (!nfcForegroundUtil.getNfc().isEnabled())
    {
        Toast.makeText(
                getApplicationContext(),
                "Please activate NFC and press Back to return to the application!",
                Toast.LENGTH_LONG).show();
        startActivity(new Intent(
                android.provider.Settings.ACTION_WIRELESS_SETTINGS));
    }
}
} 
```

我的清单代码：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.project"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.NFC" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<uses-feature
    android:name="android.hardware.nfc"
    android:required="true" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" 
    android:name="android.app.Application"> 
    <activity
        android:name=".StartActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.DEFAULT" />
            <action android:name="android.nfc.action.TECH_DISCOVERED" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity 
        android:screenOrientation="portrait" 
        android:name=".Project" 
        android:label="@string/title_activity_main" />

</application> 
```

我的错误：

```
FATAL EXCEPTION: main
java.lang.ClassCastException: android.app.Application cannot be cast to com.example.Project.DataDevice
at com.example.project.Project$1.onClick(Project.java:67)
at android.view.View.performClick(View.java:3511)
at android.view.View$PerformClick.run(View.java:14105)
at android.os.Handler.handleCallback(Handler.java:605)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method) 
```

数据设备类：

```
public class DataDevice extends Application
{
    private Tag currentTag;

    public void setCurrentTag(Tag currentTag) {
        this.currentTag = currentTag;
    }

    public Tag getCurrentTag() {
        return currentTag;
    }

    //(...)
} 
```

我在stackOverflow上寻找答案，没有任何帮助。有谁知道发生了什么？DataDevice 和 NFCUtilForeground 运行良好（在其他应用程序中）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T11:42:58.887

清单文件中标记中的`android:name`属性`application`应指向您的`DataDevice`类。像：

```
<application
android:icon="@drawable/ic_launcher"
android:label="@string/app_name"
android:theme="@style/AppTheme" 
android:name="your.package.DataDevice">

.........
..........
</application> 
```

# php - 如何在我的项目中使用 Zend Framework 2 类？

> ID：15001205
> 
> 赞同：0
> 
> 时间：2013-02-21T11:32:02.543
> 
> 标签：php, zend-framework2

我只是希望有可能使用这个库的类，但 2 小时后不可能：

那么如何使用 Zend Framework 2.1 和他的自动加载器来只使用这个库的类而不创建 ZF 项目呢？

我已经用 classmap_generator、inlude_path 尝试了一切……我没有任何错误，但它仍然返回我：

找不到动作类？找不到版本类！

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:43:55.090

您可以通过 composer 安装单独的 Zend Framework 模块，它会为您完成大部分工作：

作曲家.json

```
{
    "require": {
        "zendframework/zend-http": "2.*"
    },  
    "repositories": [
        {   
            "type": "composer",
            "url": "http://packages.zendframework.com/"
        }   
    ],  
    "minimum-stability": "dev"
} 
```

这应该会为您处理任何自动加载。Composer 会生成一个自动加载器，您只需将其包含在您的应用程序中：

```
require 'vendor/autoload.php'; 
```

那里有很多作曲家的例子：

[https://packages.zendframework.com/#composer](https://packages.zendframework.com/#composer)

[http://net.tutsplus.com/tutorials/php/easy-package-management-with-composer/](http://net.tutsplus.com/tutorials/php/easy-package-management-with-composer/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T16:10:05.517

由于 ZF2 组件被解耦并专注于特定任务，因此一个类经常使用另一个类来执行其业务。仅仅包含一个类文件通常是不够的。

因此，ZF2 肯定需要一些自动加载。但是您不必使用 ZF2 自动装载机。

如果您的应用程序中没有自动加载，那么添加实际上很容易：

1.  确保 Zend 库的路径位于您的`include_path`.
2.  注册一个符合 PSR-0 标准的自动加载器，使用`spl_autoload_register()`

就像是：

```
spl_autoload_register(function($class)){
    $file = str_replace('\\', '/', $class) . '.php';
    $resolvedFile = stream_resolve_include_path($file);
    if (file_exists($resolvedFile)) {
        include $resolvedFile;
        return $class;
    }
}); 
```

如果您的应用程序已经有一个自动加载器，那么如果它不符合 PSR-0 标准，我会感到非常惊讶。和以前一样，确保 Zend 库位于`include_path`.

即使 Zend 库不在您的包含路径中，您也可以创建一个自定义的自动加载器，它知道该库在您的文件系统中的位置。

在所有情况下，所需类的用法是：

```
$myinstance = new \Zend\Component\Class(); 
```

有了正确的自动加载——无论你选择怎么做——这个类可以使用它需要的任何其他 Zend 类来完成它的业务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T10:14:04.390

经过多次搜索，我已经安装了作曲家。但我对这个解决方案不太满意，因为它触及了我的系统。

这是我的程序，我仍然说 ZF 文档很差。

***使用 Composer 安装 ZEND FRAMEWORK***

**1) 允许白名单**

suhosin.executor.include.whitelist = phar 在文件中：nano /etc/php5/cli/conf.d/suhosin.ini

**2) 作曲家下载**

apt-get install curl curl -sS [https://getcomposer.org/installer](https://getcomposer.org/installer) | php

**3) 移动作曲家**

mv composer.phar /usr/local/bin/composer

**4）复制composer.json**

将 composer.json（来自 zend 框架存档）复制到我的根文件夹应用程序

**5）作曲家安装**

在 composer.json 所在的地方执行

现在，您的 app 文件夹中将有一个名为“vendor”的文件夹，可在您的 php 代码中使用：

```
include("vendor/autoload.php");
new Zend\Mail\Storage\Pop3(...); 
```

现在它对我有用。

**错误允许的内存大小：**

php -r "echo ini_get('memory_limit').PHP_EOL;" 改成1024M nano /etc/php5/cli/php.ini /etc/init.d/apache2 restart

**[克隆http://github.com/zendframework/Component_ZendStdlib.git](http://github.com/zendframework/Component_ZendStdlib.git)失败，找不到 git，**

安装 GIT apt-get install git

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T11:38:10.160

只需在您的自动加载器中注册命名空间。

如果您使用的是作曲家，那么`include_once '<path to vendor dir>/autoload.php';`在您的 php 文件顶部添加

# android - android GoogleMap 为空，显示正常但无法添加标记/折线

> ID：15001207
> 
> 赞同：0
> 
> 时间：2013-02-21T11:32:05.690
> 
> 标签：android, map, null, supportmapfragment

我有一个显示良好的 GoogleMap（在 SupportMapFragment 内），并将 GoogleMapOptions 用于目标相机位置。但是，我无法向 GoogleMap 添加标记/折线。下面是创建地图的方法：

```
private void createMap(List<LatLng> latLngs) {

    if(map == null) {
        GoogleMapOptions options = new GoogleMapOptions();
        mapFragment = SupportMapFragment.newInstance(options);
        map = mapFragment.getMap();

        float zoom = 13;
        CameraPosition cameraP = new CameraPosition(latLngs.get(0), zoom, 0, 0);
        options.camera(cameraP);

        //TODO MAP IS NULL - SORT OUT!
        // check it has been instantiated
        if (map != null) {
            Log.d(TAG, "map is not null");
            map.clear();
            //Calculate target zoom, based on trip size
            map.animateCamera(CameraUpdateFactory
                    .newCameraPosition(cameraP));
            // Add LatLngs to polyline

            PolylineOptions poly = new PolylineOptions().color(Color.RED);
            MarkerOptions startMarker = new MarkerOptions()
                    .position(latLngs.get(0)).title("Start");
            MarkerOptions endMarker = null;
            if(latLngs.size() > 1) {
             endMarker = new MarkerOptions().position(
                    latLngs.get(latLngs.size() - 1)).title("End");  
            }

            for (LatLng latLng : latLngs) {
                poly.add(latLng);
            }

            map.addPolyline(poly);
            map.addMarker(startMarker);
            map.addMarker(endMarker);

        }

        ft = getSupportFragmentManager().beginTransaction();
        ft.add(R.id.trip_summary_map_container, mapFragment);
        ft.commit();
    }
} 
```

正如您从内联注释中看到的那样，地图仍然为空（尽管它正在显示和使用选项）。只是不能添加东西。我假设我没有正确实例化它？

Activity 扩展了 FragmentActivity，我已经设置了使用 Maps API 所需的所有东西。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:54:26.860

**编辑：**我已经用我现在更喜欢使用的解决方案发布了一个[新的答案。](https://stackoverflow.com/a/25032667/1555605)

几天前我遇到了同样的问题，我解决了扩展`SupportMapFragment`类，以便在地图最终准备好后执行回调方法。

```
public class ExtendedSupportMapFragment extends SupportMapFragment {

    public static interface MapReadyListener {
        public void mapIsReady(GoogleMap map);
    }

    @Deprecated
    public static SupportMapFragment newInstance() {
        return null;
    }

    @Deprecated
    public static SupportMapFragment newInstance(GoogleMapOptions options) {
        return null;
    }

    public static ExtendedSupportMapFragment newInstance(MapReadyListener mapReadyListener) {
        ExtendedSupportMapFragment fragment = new ExtendedSupportMapFragment();
        fragment.mapReadyListener = mapReadyListener;

        return fragment;
    }

    private MapReadyListener mapReadyListener;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        if (mapReadyListener != null)
            mapReadyListener.mapIsReady(getMap());
    }

} 
```

然后你只需要做这样的事情：

```
public class RutaMapaFragment extends SherlockFragment implements ExtendedSupportMapFragment.MapReadyListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        fragmentMapa = ExtendedSupportMapFragment.newInstance(RutaMapaFragment.this);
    }

    ...

    @Override
    public void mapIsReady(GoogleMap map) {
        //Do whatever you want with your map.
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-30T09:00:18.743

所以，时间已经过去了。事实是，我不再使用[之前答案](https://stackoverflow.com/a/15335553/1555605)中的解决方案，而是更喜欢使用 a `ViewTreeObserver`。以下代码显示了一个相当简单的片段，其中`SupportMapFragment`添加了 a。

该方法`createMap()`添加`SupportMapFragment`然后执行`setupMap()`，但只能通过一个`OnGlobalLayoutListener`基本上在地图实际准备好后执行的方法。当然，这个监听器会被立即删除——没有必要再保留它了。

```
public class MyMapFragment extends Fragment {

    private View mMapContainer;
    private SupportMapFragment mMapFragment;
    private GoogleMap mMap;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View view = inflater.inflate(/* ... */);
        // ...

        mMapContainer = view.findViewById(R.id.map_fragment_container);
        createMap();

        return view;
    }

    private void createMap() {
        mMapFragment = new SupportMapFragment();

        getFragmentManager().beginTransaction()
                .replace(R.id.map_fragment_container, mMapFragment)
                .commit();

        mMapContainer.getViewTreeObserver()
                .addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {

                    @TargetApi(Build.VERSION_CODES.JELLY_BEAN)
                    @Override
                    public void onGlobalLayout() {
                        if (Build.VERSION.SDK_INT > Build.VERSION_CODES.JELLY_BEAN) {
                            mMapContainer.getViewTreeObserver().removeOnGlobalLayoutListener(this);
                        } else {
                            mMapContainer.getViewTreeObserver().removeGlobalOnLayoutListener(this);
                        }

                        mMap = mMapFragment.getMap();
                        setupMap();
                    }

                });
    }

    private void setupMap() {
        mMap.setMyLocationEnabled(true);
        // ...
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:03:07.497

尝试使用以下代码在地图中添加标记和折线：

> ```
> GoogleMap mMap;
> static final CameraPosition BONDI =
>         new CameraPosition.Builder().target(new LatLng(-33.891614, 151.276417))
>                 .zoom(15.5f)
>                 .bearing(300)
>                 .tilt(50)
>                 .build();
> changeCamera(CameraUpdateFactory.newCameraPosition(BONDI));
>     mMap.addMarker(new MarkerOptions().position(new LatLng(-33.891614, 151.276417)).title("Bondi"));
>  private void changeCamera(CameraUpdate update) {
>     changeCamera(update, null);
>     }
> /**
>  * Change the camera position by moving or animating the camera depending on the state of the
>  * animate toggle button.
>  */
> private void changeCamera(CameraUpdate update, CancelableCallback callback) {
>     boolean animated = ((CompoundButton) findViewById(R.id.animate)).isChecked();
>     if (animated) {
>         mMap.animateCamera(update, callback);
>     } else {
>         mMap.moveCamera(update);
>     }
> } 
> ```

添加折线如下：

```
 // A simple polyline with the default options from Melbourne-Adelaide-Perth.
    mMap.addPolyline((new PolylineOptions())
            .add(BONDI)); 
```

# jquery - 如何在 $.get 之外引用 JSON 数据

> ID：15001210
> 
> 赞同：0
> 
> 时间：2013-02-21T11:32:16.507
> 
> 标签：jquery, json, google-maps

我需要在 $.get 调用中引用我拥有的 JSON 数据变量。

我有 JSON 数据，这些数据正在被拉入然后被处理。

我有一些复选框，我想用它们来显示和隐藏标记。我有一个显示和隐藏功能，带有复选框的单击事件 - 它位于标记的 forloop 下方。

我得到的问题是只有第一个复选框显示并隐藏所有标记，所有其他复选框什么都不做。

我已确保 HTML 输出正确，并且当我在 show 或 hide 函数上执行 console.log() 以查看被拉入函数的值时，它正确显示。所以问题似乎出在 show and hide 函数中的 forloop 上。可能未正确引用数据或位置变量。

关于如何正确引用它的任何帮助都会很棒。

```
// JSON feed
$.get(mapURL + 'map/locations', function(result) {
    var locations = $.parseJSON(result);

    // Markers
    var markers = [];

    // Looping through the JSON data
    for (var i = 0, length = locations.length; i < length; i++) {

        var data = locations[i];

        // Creating a marker and putting it on the map
        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(data.lat, data.long),
            map: map,
            title: data.title,
            icon: iconSrc[data.category]
        });
        markers.push(marker);

    }// END for loop

    /** Shows all markers of a particular category, and ensures the checkbox is checked **/
    function show(category) {
        console.log('show ' + data.category);
        for (var i=0; i<locations.length; i++) {
            if (data.category == category) {
                markers[i].setVisible(true);
            }
        }
    }// END function show

    /** Hides all markers of a particular category, and ensures the checkbox is cleared **/
    function hide(category) {
        console.log('hide ' + data.category);

        for (var i=0; i<locations.length; i++) {
            if (data.category == category) {
              markers[i].setVisible(false);
            }
        }
    }// END function hide

    /** Action when checkbox is clicked **/
    $(".checkbox").click(function(){
        var cat = $(this).attr("value");

        // If checked
        if ( $(this).is(":checked") ){
            show(cat);
        }
        else {
            hide(cat);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:42:07.200

这不是因为您没有`data`在循环中声明而发生吗？它应该是

```
function show(category) {
    console.log('show ' + data.category);
    for (var i=0; i<locations.length; i++) {
        var data = locations[i]; // <---- missing line
        if (data.category == category) {
            markers[i].setVisible(true);
        }
    }
} 
```

（ 或类似的东西 ）

您的代码会产生这种效果，因为`data`变量从前一个循环“泄漏”。

# intellij-idea - IntelliJ Compass 文件观察器

> ID：15001211
> 
> 赞同：3
> 
> 时间：2013-02-21T11:32:17.967
> 
> 标签：intellij-idea, cmd, compass-sass

我正在使用 IntelliJ 并包含一个外部工具。设置——外部工具——添加工具

在这里我添加了“**指南针手表**”并运行它。

一切正常，除了当 compass 编译 scss 时，它只会在下一次编译后显示 psoitive 结果。

**我想看看它何时完成任务**，就像我在控制台窗口中所做的那样。

知道要改变什么才能使它正常工作吗？

![在此处输入图像描述](../Images/de4f229d73bed93ffa4c0d3186920ff0.png)

这是一个屏幕截图，显示指南针完成后它不显示：

```
override ../css/app.css 
```

一旦发生新的更改，if 将显示该行。出现错误时，它会立即显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-04T02:31:34.617

我在这篇文章中找到了答案的线索：http: [//devnet.jetbrains.com/message/5478444](http://devnet.jetbrains.com/message/5478444)看来您应该创建一个执行 compass 编译命令而不是 watcher 命令的文件观察程序。请注意，有一个选项可以选择“显示控制台”（参见下面的屏幕打印）作为“始终”、“从不”或“错误”。

这是我为我的项目设置指南针所做的工作：

1）在项目根目录下的命令行：

```
% run compass install compass
directory sass/
directory stylesheets/
   create sass/screen.scss
   create sass/print.scss
   create sass/ie.scss
   create stylesheets/screen.css
   create stylesheets/print.css
   create stylesheets/ie.css 
```

2）然后我进入项目并将所有 sass 文件移动到 sass/ 并将所有 css 文件移动到 css/

3）然后我根据屏幕截图创建了一个新的文件观察器![文件观察器](../Images/aefc0065a876ada9898fd3936a51169d.png)

**对于 Windows**

屏幕截图中的设置在 Windows 上并不完全适合我。这是我的设置确实有效：

```
Program:           C:\Ruby200\bin\compass.bat
Arguments:         compile $FileParentDir$ --sass-dir sass --css-dir stylesheets
Working Directory: $FileParentDir$
Output paths:      <blank> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T12:56:05.380

对于其他对此也有疑问的人。我最终在 Intellij Idea 13.1.3 Ultimate 的 Grails 项目中使用了这个文件夹结构：

```
- grails-app
  ...
  ...
- web-app
  - css
  - sass
  - and-so-on
  config.rb 
```

使用 config.rb 作为：

```
http_path = "/"
css_dir = "css"
sass_dir = "sass"
images_dir = "images"
javascripts_dir = "js" 
```

以及具有以下设置的[文件观察器：](http://imgur.com/FJbQYKi.png)

```
Program:           C:\RailsInstaller\Ruby1.9.3\bin\compass.bat
Arguments:         compile
Working Directory: $FileParentDir$
Output paths:      C:/path-to-project-folder 
```

# c# - 两个命名空间具有相同的类，如何避免编写两个相同的函数？

> ID：15001213
> 
> 赞同：0
> 
> 时间：2013-02-21T11:32:19.740
> 
> 标签：c#, generics, namespaces

我得到了两个库，每个库都有自己的命名空间，它们对于 api 的请求部分具有相同的类结构，但响应不同。

我想编写一个函数来处理与其命名空间类型无关的两个请求（我已经尝试过泛型，但未能创建解决方案）。

这是我正在尝试做的一个例子：

```
public void Function1()
{
    Namespace1.MyType type1 = new Namespace1.MyType1();
    type1.InnerType = new Namespace1.MyType2();

    type1.PerformMethod1();
}

public void Function2()
{
    Namespace2.MyType type1 = new Namespace2.MyType1();
    type1.InnerType = new Namespace2.MyType2();

    type1.PerformMethod1();
} 
```

我尝试通过以下方式在方法级别使用泛型：

```
public void Function1<TType1, TType2>() 
    where TType1: NamesSpace1.Type1, NamesSpace2.Type1, new() 
    where TType2: Namespace1.Type2\. Namespace2.Type2(), new()
{
    TType1 type1 = new TType1();
    type1.InnerType = new TType2();

    type1.PerformMethod1();
} 
```

但是，.net 不允许对泛型进行这种级别的限制。关于如何创建通用函数的任何建议都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:45:58.490

简短的回答是：你不能。

C#（或.NET）不支持“[结构子](http://c2.com/cgi/wiki?StructuralSubtyping)类型”，这使得这两个类完全分开，尽管它们具有相同的成员。

但是，您可以使用`dynamic`关键字，但您将失去所有编译时类型安全性。

```
publiv void Function(dynamic type1)
{
    type1.PerformMethod1();
} 
```

您仍然必须创建 and 的两个不同实例`type1`，`type2`因此在这里您并没有真正获得太多收益。

另一种具有基本相同缺点的可能解决方案是使用反射来创建类型：

```
public void Function(string assemblyName, string namespace)
{
    var type1Name = namespace + ".Type1, " + assemblyName;
    var type2Name = namespace + ".Type2, " + assemblyName;
    dynamic type1 = Activator.CreateInstance(Type.GetType(type1Name));
    dynamic type2 = Activator.CreateInstance(Type.GetType(type1Name));
    type1.InnerType = type2;
    type1.PerformMethod1();
} 
```

第三种解决方案是仅使用带有`new()`约束的泛型，以便能够更轻松地创建实例并使用运行时类型检查来确保只使用了允许的类型。同样，这与其他两个解决方案具有相同的缺点： 没有编译时类型安全：

```
public void Function1<TType1, TType2>() 
    where TType1 : new() 
    where TType2 : new()
{
    if(typeof(TType1) != typeof(Namespace1.MyType1) || 
       typeof(TType1) != typeof(Namespace2.MyType1) || 
       typeof(TType2) != typeof(Namespace1.MyType2) || 
       typeof(TType2) != typeof(Namespace2.MyType2))
        throw new ArgumentException(...); 

    // .NET 4:
    dynamic type1 = new TType1();
    dynamic type2 = new TType2();
    // Pre .NET 4:
    // var type1 = new TType1();
    // var type2 = new TType2();

    // .NET 4:
    type1.InnerType = type2;
    // Pre .NET 4:
    // type1.GetType().GetProperty("InnerType").SetValue(type1, type2);

    // .NET 4:
    type1.PerformMethod1();
    // Pre .NET 4:
    // type1.GetType().GetMethod("PerformMethod1").Invoke(type1, new object[0]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:01:07.743

.Net 中的泛型确实不是这样工作的。

我认为最好的方法是创建一个通用接口并以某种方式融入库类。问题是如何做到这一点。

如果所讨论的类型不是密封的并且您自己创建它的实例，那么您可以创建一个实现此接口的派生类，该接口将由继承的方法自动实现：

```
interface IMyType
{
    object InnerType { get; set; }
    void PerformMethod1();
}

class Namespace1MyTypeWithInterface : Namespace1.MyType, IMyType
{} 
```

这假设这两种类型实际上是相同的。例如，如果`InnerType`每个的类型不同，情况就会变得更加复杂。解决该问题的一种方法是使接口在属性类型中具有通用性。

如果以前的解决方案不适合您，那么您可以为每个命名空间创建适配器类。两个适配器将再次共享相同的接口，并将每次调用委托给实际类型的实例。

```
class Namespace1MyTypeAdapter : IMyType
{
    private readonly Namespace1.MyType m_adapted;

    public Namespace1MyTypeAdapter(Namespace1.MyType adapted)
    {
        m_adapted = adapted;
    }

    public object InnerType
    {
        get { return m_adapted.InnerType; }
        set { m_adapted.InnerType = value; }
    }

    public void PerformMethod1()
    {
        m_adapted.PerformMethod1();
    }
} 
```

这是很多重复的代码，但你只写一次，然后你就可以以同样的方式使用这两个类。

还有一种选择是使用`dynamic`或反射。

# javascript - Javascript，不显示未定义的数字

> ID：15001214
> 
> 赞同：3
> 
> 时间：2013-02-21T11:32:21.450
> 
> 标签：javascript

我创建了一个带有键和值的变量，如下所示：

```
var e = new Array();
e[0] = "Bitte";
e[1] = "Danke"; 
```

除此之外，我在变量中添加了一行，当数字未定义时显示文本。

```
e[NaN] = "Change Settings"; 
```

因此，当变量`e`为`NaN`（“未定义”）时，我希望他不在输入中显示变量 e 的编号。如您所见，我试图实现这一点，但它不起作用。

```
if (neuezahl = NaN) {
  document.getElementById("saveServer").value="";
} else {
  document.getElementById("saveServer").value=""+neuezahl+""; 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T11:34:43.670

你已经分配`neuzahl`了不比较它，除了使用该`isNAN`功能：

```
if (isNAN(neuezahl))
{
   document.getElementById("saveServer").value="";
}
else 
{
   document.getElementById("saveServer").value=""+neuezahl+""; 
} 
```

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/isNaN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/isNaN)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T11:38:14.650

`NaN`不能直接比较（它甚至不等于自身`NaN === NaN ==> false`）。用于`isNaN()`检测`NaN`：

```
if (isNaN(neuezahl)) {...} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:47:00.283

if 语句中的条件可能不正确。现在您使用“=”而不是“==”，它是一个赋值语句，并且条件始终为真。因此，如果您想检查“neuezahl”是否为“NaN”，函数 isNaN 可能会有所帮助。

```
if (isNaN(neuezahl)){...}
else {} 
```

# mysql - 使用 if 条件更新 MySQL

> ID：15001217
> 
> 赞同：63
> 
> 时间：2013-02-21T11:32:28.307
> 
> 标签：mysql, sql, sql-update

看来我对*条件查询*有很大的问题。

我必须做一个*有条件的更新*。我在这里写下我想做的事情：

```
 IF(SELECT tipo FROM abbonamento WHERE idU = 17) = 'punti' THEN
     UDPATE abbonamento SET punti = punti - 1 
 ELSE
     UPDATE abbonamento SET bonus = bonus - 1 
```

显然这是行不通的。
任何的想法？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-02-21T11:34:57.967

`MySQL`支持`IF`声明。

```
UPDATE  abbonamento
SET     punti = IF(tipo = 'punti', punti - 1, punti),
        bonus = IF(tipo <> 'punti', bonus - 1, bonus)
WHERE   id = 17 
```

或者你也可以使用`CASE`

```
UPDATE  abbonamento
SET     punti = CASE WHEN tipo = 'punti' THEN punti - 1 ELSE punti END,
        bonus = CASE WHEN tipo <> 'punti' THEN bonus - 1 ELSE bonus END
WHERE   id = 17 
```

# licensing - 在 Linux 中检测虚拟机中的执行？

> ID：15001219
> 
> 赞同：0
> 
> 时间：2013-02-21T11:32:36.737
> 
> 标签：licensing, virtualization, virtual-machine

需要一个 Linux 应用程序来检测它是否在虚拟机（如 VMware ESX/ESXi、Xen、Oracle Virtualbox、Microsoft 虚拟服务器等）中执行。根据此检测的结果，需要强制执行一些软件许可规则。

我知道有一些用于许可的商业软件库/框架可以执行此类检测，但由于多种原因，我们需要自行开发。

有哪些方法和手段可以实现这种检测？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:39:39.537

对于现代硬件加速 (VT-x) 管理程序（VMware、VirtualBox、KVM/QEmu），它们都设置了“管理程序”CPUID 位，从 Linux 中读取该位非常简单。打开文件 /proc/cpuinfo，并在标志行中查找“管理程序”。

虽然不是100%。基于软件的管理程序（Bochs 等）不会设置它，并且该位未强制执行，因此可以修改 QEmu 以不设置该位。但是，它可能足以满足您的使用需求。

# objective-c - 自定义表格视图（UITableViewStyleGrouped）设计

> ID：15001221
> 
> 赞同：0
> 
> 时间：2013-02-21T11:32:39.450
> 
> 标签：objective-c, uitableview

我想将默认分组表视图的外观更改为类似于此屏幕截图的表。需要更改单元格的边框样式、阴影和半径、部分页眉和页脚字体颜色以及表格的背景颜色/图像。

![在此处输入图像描述](../Images/aec743e0bef7ec0edb563817249ac8dd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T10:33:04.680

我最近在 GitHub 上发布了一个项目，展示了我如何在我的一个应用程序中设置分组表的样式：[https ://github.com/randomsequence/GroupedTable](https://github.com/randomsequence/GroupedTable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:49:49.083

从这里获取参考：http: [//www.appcoda.com/customize-table-view-cells-for-uitableview/](http://www.appcoda.com/customize-table-view-cells-for-uitableview/)

它可以帮助你

# php - 如何防止服务器阻止长时间运行脚本的执行

> ID：15001222
> 
> 赞同：0
> 
> 时间：2013-02-21T11:32:44.067
> 
> 标签：php, timeout, long-running-processes

我有一个用php编写的大脚本，它应该在prestashop安装中导入很多信息，使用webservices，这个脚本写在“部分”我的意思是，有一个导入类别的功能，另一个导入产品的功能，然后是制造商，等等，主脚本中调用了大约 7-10 个函数。基本上我假设这个脚本必须运行大约一个小时，从一个函数传递到下一个函数，依此类推，因为它到达最后一个函数，然后返回一些值并停止到第二天晚上。

我想了解它是否会更好：

1) 每次我输入一个新功能时施加 30 分钟的时间限制（这将防止超时）

2）制作一系列页面，每个页面都有一个函数调用（当然还有时间限制）

或任何其他想法...我想：知道是否已调用函数（可能使用全局变量？）确保服务器将按顺序执行该函数（因此页面链）...

我希望已经清楚，否则我会更新问题。

编辑：脚本由另一台将调用页面的服务器执行，另一台服务器对我来说是“未知的”，所以我只知道这个页面被调用（他们也可以通过在页面上调用该函数）但无论如何我无法控制它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:49:52.270

对于任何长时间运行的脚本，我会通过命令行运行它，可能会使用 cronjob 来启动它。如果它是从外部触发的，我将创建一个作业队列（例如在数据库中），在其中插入一个新行以表示它应该运行，以及任何可变输入参数。然后后台作业将运行 - 比如说 - 每 5 分钟一次，检查队列中是否有新作业。如果没有，就退出。如果有，标记它已经开始工作并开始处理。完成后，标记它已完成。

不过，1 小时的工作时间太长了。你能做些什么来优化它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T11:00:35.430

您可以根据需要增加执行脚本的时间限制：

```
set_time_limit(seconds); 
```

而且对于长时间运行的脚本，您需要更多内存。您可以使用以下方法增加内存限制：

```
ini_set('memory_limit','20M'); 
```

您必须确保的第二件事是您在专用服务器上运行脚本，因为如果您使用共享服务器，您的服务器将自动终止长时间运行的脚本。

# c# - Visual Studio 2010 不显示水晶报表查看器

> ID：15001224
> 
> 赞同：0
> 
> 时间：2013-02-21T11:32:47.343
> 
> 标签：c#, visual-studio-2010

我想在 c# .net 的 Windows 应用程序中使用水晶报告。但是当我从添加新项目添加报告并添加水晶报告但错误是以“.mht”格式而不是 .rpt 格式添加报告时报告查看器也未显示在工具项中。我正在使用 Visual Studio 2010 终极版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:53:39.833

Crystal 报表不是 Visual Studio 2010 中的内置组件。您必须下载并安装它。

如果您有兴趣，可以使用 ReportViewer 代替 Crystal Reports

要下载水晶报告，请单击[此处](http://www.c-sharpcorner.com/blogs/5264/download-sap-crystal-reports-for-visual-studio-2010-its-fr.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:36:43.797

在 VS 2010 中，水晶报告单独提供，因此您可以从以下链接下载水晶 [报告](http://www54.sap.com/solutions/sme/software/analytics/crystal-visual-studio/index.html)

# search - Liferay 在所有 portlet 中搜索静态文本

> ID：15001225
> 
> 赞同：2
> 
> 时间：2013-02-21T11:32:52.120
> 
> 标签：search, liferay, liferay-6

我想知道是否存在内置功能，或者如何实现功能来搜索 JSP 的静态文本，而不是从集中式 portlet（或主题）中搜索 liferay 中所有已部署 portlet 的 web 内容。不幸的是，似乎没有关于这个问题的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:18:27.603

[This](http://www.liferay.com/community/wiki/-/wiki/Main/Developing+portlets+with+improved+SEO+capabilities) could be helpful. You must get rid of long and ugly URLs and use Liferay API's mentioned in that Wiki.

# jenkins - Jenkins 向所有开发人员发送不必要的电子邮件，以说明构建失败

> ID：15001226
> 
> 赞同：2
> 
> 时间：2013-02-21T11:32:54.617
> 
> 标签：jenkins

我每小时都在构建我们的 SVN 主干存储库。我已将 Jenkins 配置为向破坏构建的开发人员发送电子邮件。出于某种原因，Jenkins 似乎会向任何*曾*在任何时候致力于 SVN 的开发人员发送电子邮件。我希望 Jenkins 只向那些破坏构建的人发送电子邮件，即那些在成功构建和失败构建之间提交代码的开发人员。现在似乎我们所有的开发人员都会为每个失败的构建发送一封电子邮件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:11:36.480

您是否尝试过可编辑的电子邮件通知，您可以在其中配置失败、不稳定或任何其他类型的触发器。![在此处输入图像描述](../Images/a423378eb8600daee3c3f9d6efc1ddb1.png)

# tcl - TCL比较文件中的两个字段并打印该行

> ID：15001228
> 
> 赞同：0
> 
> 时间：2013-02-21T11:32:59.713
> 
> 标签：tcl

我有两个文件。

*   **归档一个**

> 0 10 20 30
> 
> 10 20 30 40
> 
> 0 10 23 34

**文件 a 的值是（x1 y1 x2 y2 格式）**

*   **文件 b**
*   格式为 PMM xy -（某个数字）

> PMM 10 20 -100
> 
> PMM 20 30 -150
> 
> PMM 50 60 -100

在文件 B 中，我想搜索字段 4,5（从 P 作为字段 1 开始）是否在文件 a 的范围内。如果是，则不打印 FileB 的行，否则打印该行。

我们不会打印文件 b 的行

> x1 < x < x2 & y1 < y < y2

所以脚本的 O/P 应该是

**文件 c**

> PMM 50 60 -100

* * *

我在 tcl 中编写了以下脚本，但我的问题是它**没有在 File a 中搜索文件 b 的所有内容**。

* * *

```
set abc "b"
set ab "a"

set cord [open $ab "r"]

if [catch {open $abc r} FILE_R {
    puts "failed to read $abc"
    return -1
}

while { [gets $FILE_R line] >= 0 } {
    if [regexp {^#} $line ] {
    } else {
        set x_cord [lindex $line 3] 
        set y_cord [lindex $line 4]
        while { [gets $cord line] >= 0 } {
            set x1_cord [lindex $line 0]
            set y1_cord [lindex $line 1]
            set x2_cord [lindex $line 2]
            set y2_cord [lindex $line 3]

            if { [expr x1_cord < x_cord && x_cord < x2_cord && y1_cord < y_cord && y_cord < y2_cord ] == 1 } {
            } else {
                puts $line
            }
        }
    }
}

close $FILE_R 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:54:06.620

这一行：

```
if { [expr x1_cord < x_cord && x_cord < x2_cord && y1_cord < y_cord && y_cord < y2_cord ] == 1 } { 
```

如果在一些方面是相当错误的。特别是，这些变量没有被读取。您还可以通过放入条件来做额外的工作`expr`，`if`因为它们已经使用相同的语法。相反，使用这个：

```
if {$x1_cord < $x_cord && $x_cord < $x2_cord && $y1_cord < $y_cord && $y_cord < $y2_cord} { 
```

您似乎也在使用`if {somecondition} {} else { somescript }`; 这并不是特别低效，但看起来很奇怪。只需否定条件并这样做：`if {!(somecondition)} { somescript }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T05:23:34.320

这是我的解决方案：

```
package require Tclx

# Read file a.txt, which contains x1 y1 x2 y2
# After reading, coords will be
#     {{0 10 20 30} {10 20 30 40} {0 10 23 34}}
# which is a list of lists
set coords [split [read_file a.txt] \n]

# Read file b.txt, line by line
# where each line contains P M M x y -(some number)
for_file line b.txt {
    if {[regexp {^#} $line]} { continue }; # skip comment

    #lassign    $line p m1 m2 x y n; # parse the line into proper fields
    foreach {p m1 m2 x y n} $line {}; 
    set inrange 0; # assume out of range, will flag it if found otherwise
    foreach coord $coords {
        #lassign $coord x1 y1 x2 y2; # parse the range
            foreach {x1 y1 x2 y2} $coord {}
        if {$x1 < $x && $x < $x2 && $y1 < $y && $y < $y2} {
            set inrange 1; # we are in range, set the flag for not printing
        }
    }

    # Print if not in any range
    if {!$inrange} { puts $line }
} 
```

### 讨论

*   命令`read_file`,`for_file`和`lassign`来自`Tclx`包，这大大简化了生活。从 Tcl 版本 8.5 开始，它`lassign`成为一个内置命令。
*   回复评论：`read_file`只要你使用`Tclx`包就可以使用。您是否拥有 Tcl 8.4、8.5 或更高版本并不重要。
*   其余的代码是直截了当的，我希望你没有理解困难。
*   由于 user2095095 无权访问`Tclx`并且他/她正在运行 Tcl 8.4，因此我必须`lassign`用`foreach`技巧替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:34:58.453

首先打开坐标文件并读取每一行，直到获得 x1,y1,x2,y2 的最大值和最小值。那将是 8 个值。

然后打开第二个文件并读取每一行一次。然后将其拆分并与您的限制进行比较。

您上面遇到的问题是您打开每个文件一次，但每次您有一个 FILE_R 行时您都试图重新读取坐标文件。但是你永远不会回到文件的开头。如果你这样做了，它的效率会非常低，但可能会奏效。首先获取限制，然后处理第二个文件。

用正则表达式匹配行但用扫描分割它们也更聪明。这样，您就不太可能遇到 Tcl 认为重要的问题，例如左大括号或分号或过多的空格。例如：

```
% scan "P M M 10 20 -100" {P M M %d %d %d} x y z
3
% list $x $y $z
10 20 -100 
```

请注意，我们可以检查我们获得了正确数量的扫描参数 (3)。

# android - 使用单个 BaseAdapter 提供多个 listView 时遇到问题

> ID：15001229
> 
> 赞同：0
> 
> 时间：2013-02-21T11:33:05.140
> 
> 标签：android, android-layout, android-listview, android-adapter, android-adapterview

我昨天在这里发布了一个[问题](https://stackoverflow.com/questions/14985811/use-of-single-baseadapter-for-multiple-listviews)。由于我没有添加正确的代码片段，我几乎没有得到解决方案。所以我在这里，发布它都是新的。只是为了保持积极的问题。

我有三个选项卡 - A、B、C。每个选项卡都是一个 ActivityGroup 类。TabC 包含一个列表视图。TabA 和 TabB 具有转到 TabC 的按钮。

tabC 中类的 XML 文件（用于来自 Tab **A**的请求）

```
<LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">

       <ListView
        android:id="@+id/enquiryListViewA"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="7dp" >
</LinearLayout> 
```

tabC 中的目标类是

```
public class TestClass extends Activity {
     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         if(0 == Constants.requestID) { //requestID is used to identify the tab
             //request from tab A
             setContentView(R.layout.custom_fullpicture_A);
         } else { //request from tab B
             setContentView(R.layout.custom_fullpicture_B);
         }
} 
```

在 Handler 类中，我正在设置适配器。在这里，我还根据选项卡类型检查有效的 listView

```
 if(0 == Constants.requestID) {
   ListView enquiryView = (ListView) ((Activity) childContext).findViewById(R.id.enquiryListViewA);
   adapterA = new CustomFullPictureAdapter(childContext, msg.obj);
   enquiryView.setAdapter(adapterA);
 } else {
   ListView enquiryView = (ListView) ((Activity) childContext).findViewById(R.id.enquiryListViewB);
   adapterB = new CustomFullPictureAdapter(childContext, msg.obj);
   enquiryView.setAdapter(adapterB);
 } 
```

而adpater类的getView方法是

```
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    System.out.println("Full Picture adapter: CONVERT VIEW : :: " + convertView);
    System.out.println("Data count from DB :: " + getCount());
    int viewType = Constants.requestID;

    View viewAccounts = null;
    View viewCM = null;
    View view = null;
    View masterView = null;

    if(viewType == 0) {
        viewAccounts = convertView;
    } else if(viewType == 1) {
        viewCM = convertView;
    } else {
        view = convertView;
    }

    if(viewAccounts == null) {
        holder = new ViewHolder();
         if(!Constants.isLoggedInCustomer) { //logged in as user
             viewAccounts = mInflater.inflate(R.layout.custom_fullpicturerow_A, null);

            holder.salesCostAcc = (TextView) viewAccounts.findViewById(R.id.vSalesCostAcc);
            holder.profitAcc = (TextView) viewAccounts.findViewById(R.id.vProfitAcc);
             holder.gpAcc = (TextView) viewAccounts.findViewById(R.id.vGpAcc);
             holder.salesValueAcc = (TextView) viewAccounts.findViewById(R.id.vSalesValueAcc);
             holder.quantityAcc = (TextView) viewAccounts.findViewById(R.id.vQuantityAcc);
             holder.transactionCountAcc = (TextView) viewAccounts.findViewById(R.id.vTransAcc);
             holder.avgPriceAcc = (TextView) viewAccounts.findViewById(R.id.vAvgPriceAcc);
             holder.objectNameAcc = (TextView) viewAccounts.findViewById(R.id.vObjectNameAcc);
             holder.objectCodeAcc = (TextView) viewAccounts.findViewById(R.id.vObjectCodeAcc);

             holder.salesValueAcc.setText(searchArrayList.get(position).getSalesValue());
             holder.quantityAcc.setText(searchArrayList.get(position).getQuantity());
             holder.transactionCountAcc.setText(searchArrayList.get(position).getTransactionCount());
             holder.avgPriceAcc.setText(searchArrayList.get(position).getAvgPrice());     
             holder.objectNameAcc.setText(searchArrayList.get(position).getObjectName());
             holder.objectCodeAcc.setText(searchArrayList.get(position).getObjectCode());

             holder.salesCostAcc.setText(searchArrayList.get(position).getSalesCost());
            holder.profitAcc.setText(searchArrayList.get(position).getProfit());
             holder.gpAcc.setText(searchArrayList.get(position).getProfitMargin());

             masterView = viewAccounts;

             viewAccounts.setTag(holder);
         } else {

         }
    } 

    if(view == null) {
        holder = new ViewHolder();
         if(!Constants.isLoggedInCustomer) { //logged in as user
             viewCM = mInflater.inflate(R.layout.custom_fullpicturerow_B, null);

            holder.salesCost = (TextView) viewCM.findViewById(R.id.vSalesCost);
            holder.profit = (TextView) viewCM.findViewById(R.id.vProfit);
             holder.gp = (TextView) viewCM.findViewById(R.id.vGp);
             holder.salesValue = (TextView) viewCM.findViewById(R.id.vSalesValue);
             holder.quantity = (TextView) viewCM.findViewById(R.id.vQuantity);
             holder.transactionCount = (TextView) viewCM.findViewById(R.id.vTrans);
             holder.avgPrice = (TextView) viewCM.findViewById(R.id.vAvgPrice);
             holder.objectName = (TextView) viewCM.findViewById(R.id.vObjectName);
             holder.objectCode = (TextView) viewCM.findViewById(R.id.vObjectCode);

             holder.salesValue.setText(searchArrayList.get(position).getSalesValue());
             holder.quantity.setText(searchArrayList.get(position).getQuantity());
             holder.transactionCount.setText(searchArrayList.get(position).getTransactionCount());
             holder.avgPrice.setText(searchArrayList.get(position).getAvgPrice());     
             holder.objectName.setText(searchArrayList.get(position).getObjectName());
             holder.objectCode.setText(searchArrayList.get(position).getObjectCode());

             holder.salesCost.setText(searchArrayList.get(position).getSalesCost());
            holder.profit.setText(searchArrayList.get(position).getProfit());
             holder.gp.setText(searchArrayList.get(position).getProfitMargin());

             masterView = viewCM;

             viewCM.setTag(holder);
         } else {

         }
    }

    if(null != masterView)
    holder = (ViewHolder) masterView.getTag();

    if(0 == position % 2)
        masterView.setBackgroundResource(R.color.textColorWhite);
    else
        masterView.setBackgroundResource(R.color.textColorCyan);

    return masterView;
} 
```

这就是发生的事情。用户单击从 TabA 或 B 到 TabC 的按钮。这会将 TestClass 添加到选项卡的当前活动中。使用 requestID 变量，适配器在 TabA 和 TabB 中向 TestClass 提供不同的数据。但是，如果我在选项卡之间切换，它们都具有相同的值！

希望我没有混淆。如果您有疑问，请询问。你认为什么是阻塞？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:19:56.180

AFAIK，您使用的是单个集合，即`searchArrayList`我在您发布的代码中可以看到。

您必须**正确维护其状态**才能解决该问题。

# php - MySQL如何同时删除和更新数据

> ID：15001236
> 
> 赞同：1
> 
> 时间：2013-02-21T11:33:53.410
> 
> 标签：php, mysql

基本上我想做的是，当我删除一个 ID 为 6 的客户端并且我有 50 个客户端时，我想将 ID 为 50 的客户端更新为 6。

这是我在 PHP 中的代码，但它不会同时执行 2 `mysql_query`-s 至少我认为这是问题所在。否则 SQL 语法可以正常工作。

```
public function delete () {
    $last=$this->numrow; //contains last ID works fine

    if (isset ($_GET['x'])) {
        mysql_query('DELETE FROM proba WHERE ID ='.$_GET['x']);
        mysql_query('UPDATE proba SET ID='.(int)$_GET['x'].'WHERE ID='.(int)$last);
    }
} 
```

`$_GET['x']`包含单击它的 ID 。但是只有第一个`mysql_query`被执行我怎么做才能让第二个也被执行？

另一个问题是是否有可能`<a href="munka/index.php?x=5" > [-] </a>`用 a 得到 x=5 `$_POST`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:44:08.100

使用 mysql 的替换查询可能会为自己省去很多麻烦：有关详细信息，请参阅[http://dev.mysql.com/doc/refman/5.6/en/replace.html](http://dev.mysql.com/doc/refman/5.6/en/replace.html) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:45:44.853

很可能您在第一次查询时遇到了 php 错误。检查php错误日志。

对于第二个问题`$_GET`，例如用于从 URL 中获取参数

`munka/index.php?x=5`

`$_POST`用于获取发布在 http post 上的参数（通常在表单提交上）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:52:26.500

只需在 where 子句之前用空格更改更新查询

```
 mysql_query('UPDATE proba SET ID='.(int)$_GET['x'].' WHERE ID='.(int)$last); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T12:43:24.110

最好通过使用 InnoDB Mysql DB Engine 来使用事务支持，因此 delete 和 update 一起执行 wuth COMMIT 而不会错过，如果出现任何问题，您的删除更改将得到 ROLLBACK

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-21T11:53:54.467

```
 if (isset($_GET['x'])) {
        mysql_query('DELETE FROM proba WHERE ID =' . $_GET['x']);
        mysql_query('ALTER TABLE `proba`  DROP `ID`;');
        mysql_query('ALTER TABLE  `proba` ADD  `ID` INT NOT NULL AUTO_INCREMENT PRIMARY KEY FIRST');
    } 
```

尝试在 Phpmyadmin 中删除第 5 条记录并删除 id 列并重新创建 id 列。这是工作。

# python - 在 Pandas 中使用 group by 时如何将“first”和“last”函数应用于列？

> ID：15001237
> 
> 赞同：55
> 
> 时间：2013-02-21T11:33:56.173
> 
> 标签：python, pandas, group-by

我有一个数据框，我想按特定列（或者换句话说，按特定列中的值）对它进行分组。我可以通过以下方式做到这一点：`grouped = df.groupby(['ColumnName'])`.

我把这个操作的结果想象成一个表格，其中一些单元格可以包含一组值而不是单个值。为了得到一个普通的表格（即每个单元格只包含一个值的表格），我需要指出我想使用什么函数将单元格中的值集转换为单个值。

例如，我可以用它们的总和，或者用它们的最小值或最大值替换一组值。我可以通过以下方式做到这一点：`grouped.sum()`或者`grouped.min()`等等。

现在我想对不同的列使用不同的函数。我发现我可以通过以下方式做到这一点：`grouped.agg({'ColumnName1':sum, 'ColumnName2':min})`.

但是，由于某些原因，我无法使用`first`. 更详细地说，`grouped.first()`有效，但`grouped.agg({'ColumnName1':first, 'ColumnName2':first})`无效。结果我得到一个 NameError: `NameError: name 'first' is not defined`。所以，我的问题是：为什么会发生以及如何解决这个问题。

**添加**

[在这里](http://pandas.pydata.org/pandas-docs/dev/groupby.html)，我找到了以下示例：

```
grouped['D'].agg({'result1' : np.sum, 'result2' : np.mean}) 
```

可能我也需要使用`np`吗？但在我的情况下，python 无法识别“np”。我应该导入它吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-21T12:51:42.893

我认为问题在于有两种不同`first`的方法共享一个名称但行为不同，一种用于[groupby 对象](http://pandas.pydata.org/pandas-docs/stable/groupby.html#splitting-an-object-into-groups)，[另一种用于 Series/DataFrame](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.first.html)（与时间序列有关）。

To replicate the behaviour of the groupby `first` method over a DataFrame using `agg` you could use `iloc[0]` (which gets the first row in each group (DataFrame/Series) by index):

```
grouped.agg(lambda x: x.iloc[0]) 
```

For example:

```
In [1]: df = pd.DataFrame([[1, 2], [3, 4]])

In [2]: g = df.groupby(0)

In [3]: g.first()
Out[3]: 
   1
0   
1  2
3  4

In [4]: g.agg(lambda x: x.iloc[0])
Out[4]: 
   1
0   
1  2
3  4 
```

*Analogously you can replicate `last` using `iloc[-1]`.*

Note: This will works column-wise, et al:

```
g.agg({1: lambda x: x.iloc[0]}) 
```

*In older version of pandas you could would use the irow method (e.g. `x.irow(0)`, see previous edits.*

* * *

A couple of updated notes:

This is better done using the [`nth`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.core.groupby.GroupBy.nth.html) groupby method, which is much faster >=0.13:

```
g.nth(0)  # first
g.nth(-1)  # last 
```

*You have to take care a little, as the default behaviour for `first` and `last` ignores NaN rows... and IIRC for DataFrame groupbys it was broken pre-0.13... there's a `dropna` option for `nth`.*

You can use the strings rather than built-ins (though IIRC pandas spots it's the `sum` builtin and applies `np.sum`):

```
grouped['D'].agg({'result1' : "sum", 'result2' : "mean"}) 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2016-11-18T19:10:46.457

Instead of using `first` or `last`, use their string representations in the `agg` method. For example on the OP's case:

```
grouped = df.groupby(['ColumnName'])
grouped['D'].agg({'result1' : np.sum, 'result2' : np.mean})

#you can do the string representation for first and last
grouped['D'].agg({'result1' : 'first', 'result2' : 'last'}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:53:00.217

我不确定这是否真的是问题所在，但是`sum`是`min`Python 内置插件，它以一些可迭代对象作为输入，而`first`它是 pandas Series 对象的一种方法，所以它可能不在您的命名空间中。此外，它需要其他东西作为输入（文档说一些偏移值）。

我想解决它的一种方法是创建自己的`first`函数，并将其定义为将 Series 对象作为输入，例如：

```
def first(Series, offset):
    return Series.first(offset) 
```

或类似的东西..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-27T20:23:54.783

I would use a custom aggregator as shown below.

```
d = pd.DataFrame([[1,"man"], [1, "woman"], [1, "girl"], [2,"man"], [2, "woman"]],columns = 'number family'.split())
d 
```

Here is the output:

```
 number family
 0       1    man
 1       1  woman
 2       1   girl
 3       2    man
 4       2  woman 
```

Now the Aggregation taking first and last elements.

```
d.groupby(by = "number").agg(firstFamily= ('family', lambda x: list(x)[0]), lastFamily =('family', lambda x: list(x)[-1])) 
```

The output of this aggregation is shown below.

```
 firstFamily lastFamily
number                       
1              man       girl
2              man      woman 
```

I hope this helps.

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2021-11-23T20:22:19.380

```
c_df = b_df.groupby('time').agg(first_x=('x', lambda x: list(x)[0]),
                                last_x=('x', lambda x: list(x)[-1]),
                                last_y=('y', lambda x: list(x)[-1])) 
```

# ssis - 如何在 SSIS 中运行 Excel 宏时修复 System.NullReferenceException 错误？

> ID：15001238
> 
> 赞同：0
> 
> 时间：2013-02-21T11:33:56.707
> 
> 标签：ssis

我在 SSIS 2008 上设置了一个包，其中包含一个运行 excel 宏的 vb 脚本。它适用于*商业智能开发工作室（BIDS）* 2008，但我仍然收到以下错误：

```
Error: System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.NullReferenceException: Object reference not set to an instance of an object. 
at ST_e916156b0e6449b58e21905bd635ecf0.vbproj.ScriptMain.Main() 
--- End of inner exception stack trace --- 
at System.RuntimeMethodHandle._InvokeMethodFast(Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner) 
at System.RuntimeMethodHandle.InvokeMethodFast(Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner) 
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks) 
at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture) 
at System.RuntimeType.InvokeMember(String name, BindingFlags bindingFlags, Binder binder, Object target, Object[] providedArgs, ParameterModifier[] modifiers, CultureInfo culture, String[] namedParams) 
at System.Type.InvokeMember(String name, BindingFlags invokeAttr, Binder binder, Object target, Object[] args, CultureInfo culture) 
at Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTATaskScriptingEngine.ExecuteScript() 
```

此外，当我使用 SQL 代理运行包时，作业成功但未执行宏，并且出现以下错误：

```
Executed as user: 'myusername'. 
Code: 0xFFFFFFFF 
Source: Run macro script excel macro Description: Microsoft Excel cannot access the file 'book1.XLS'. 
There are several possible reasons: 
? The file name or path does not exist. 
? The file is being used by another program. 
? The workbook you are trying to save has the same name as a currently open workbook. 
End Error 
DTExec: The package execution returned DTSER_SUCCESS (0). 
Started: 11:18:15 Finished: 11:18:19 
Elapsed: 3.775 seconds. 
The package executed successfully. The step succeeded. 
```

但是，我可以完全访问本地服务器和网络，并且尝试在 32 位和 64 位上运行，但没有成功。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:57:47.653

### 你可以尝试的事情：

以我个人的经验，Excel 在使用 SSIS 时总是很棘手。正如您从错误消息中看到的那样，请确认您可以排除与该问题相关的以下信息。

*   检查运行 SQL Server 代理服务的用户帐户。您可以通过导航到*`Windows Start`*\ *`Control Panel`*\ *`Administrative Tools`*\来执行此操作*`Services`*。查找名为的服务**`SQL Server Agent (<your instance name>)`**

*   确保该帐户确实有权访问存储 Excel 文件的文件夹。

*   确认您没有打开 Excel 文件。

*   在*SQL Server 代理*作业上，单击执行包的步骤。如果您在 type 下运行包**`SQL Server Integration Services Package`**，请确保您已**`User 32 bit runtime`**选中*`Execution options`*选项卡上的框。

*   您也可以手动双击包文件 (.dtsx)。这将带来**`DTEXEC`**执行包的实用程序。如果您使用的是配置文件，请在配置选项卡上附加配置文件。运行包。如果它**`DTEXEC`**在您的凭据下的实用程序中运行，但不在 SQL Server 代理下，我通常发现这是相关的权限问题。

# alfresco - 露天大规模删除

> ID：15001240
> 
> 赞同：1
> 
> 时间：2013-02-21T11:33:59.963
> 
> 标签：alfresco, cmis

我正在尝试在露天上大量删除文档。我已经对每个文件使用 CMIS 删除操作尝试了此操作。我在我的测试环境中对其进行了测试（Windows Server 2008R2 上的 alf 3.4.7 Enterprise 大约有 5M 文档）并且它工作有效，但在我的生产环境中（rhel 5.5 上的 alf 3.4.7 Enterprise 大约有 7M 文档）它没有工作和损坏的 lucene 索引。

有没有其他方法可以在露天删除很多文档？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T09:07:41.383

您应该使用 a`org.alfresco.repo.batch.BatchProcessor, org.alfresco.repo.batch.BatchProcessor.BatchProcessWorker & org.alfresco.repo.batch.BatchProcessWorkProvider`将您的工作拆分为多个并行事务。

如果您不想归档节点，您还可以通过在删除每个节点之前将 cm:temporary aspect 添加到每个节点来加快该过程。

# mobile - 电晕简单事件监听器

> ID：15001244
> 
> 赞同：0
> 
> 时间：2013-02-21T11:34:05.110
> 
> 标签：mobile, lua, coronasdk

我不知道为什么我的按钮在按下时不会改变外观，谁能告诉我以下代码段是否有问题。我正在使用 Corona SDK

这是我完整的 main.lua，如果我删除事件侦听器按钮交换工作。

```
display.setStatusBar(display.HiddenStatusBar);

local textObj = display.newRetinaText("Click and see what happens!", 40, 40, nil, 0)
textObj:setTextColor(255,0,0);

local widget = require "widget";

local button = widget.newButton{
    default = "Button.png",
    over = "ButtonClicked.png",
    onPress = button.touch;
      }

button.x = display.contentCenterX;
button.y = display.contentCenterY+200;

local function touch(e)
if(e.phase == "began")then
        textObj.text = "Clicked!";
        textObj:setTextColor(255,255,255);
elseif(e.phase == "ended") then
        textObj.text = "Released!";
        textObj:setTextColor(255,0,0);
    end
end 
```

现在我只能看到文字，而不是按钮！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:03:13.307

I've tested your code and button is changing when clicked. The only reason I can come up with is that the ButtonClicked.png is missing. Check the console (window named Corona Simulator Output) for any errors.

Also, cover the bases: Make sure you are running the same main.lua you are editing.

After edit:

I believe you are overriding default button behaviour with

```
button:addEventListener("touch", button); 
```

Try using constructor parameter **onPress**.

```
local button = widget.newButton{
    default = "Button.png",
    over = "ButtonClicked.png",
    onPress = touch
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:32:21.773

好的，我解决了！我是这样做的。

```
local button = widget.newButton{
default = "Button.png",
over = "ButtonClicked.png",

}
button.x = display.contentCenterX;
button.y = display.contentCenterY+200;

function button:tap( e )
-- Do what you want to do when event occurs
end

button:addEventListener( "tap", button ); 
```

# java - 如何将私钥与证书链绑定？

> ID：15001246
> 
> 赞同：3
> 
> 时间：2013-02-21T11:34:06.433
> 
> 标签：java, android, security, provider, pkcs#11

我正在为 Android 实现一个 PKCS#11 JCE 提供程序，并且有一个`java.security.KeyStoreSpi`我不明白的方法：

[`public void engineSetKeyEntry(String name, Key key, char[] pin, Certificate[] certificateChain)`](http://docs.oracle.com/javase/7/docs/api/java/security/KeyStoreSpi.html#engineSetKeyEntry%28java.lang.String,%20java.security.Key,%20char%5b%5d,%20java.security.cert.Certificate%5b%5d%29)

如何将私钥与证书链绑定？通过 CKA_ID 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-24T14:48:17.253

我不确定完全理解这个问题，但据我所知，PKCS#11 标准并未完全定义私钥/公钥和证书如何链接在一起。相反，标准 (v3.01) 确实建议在 3 个对象之间共享相同的 CKA_ID。如果您想在几个对象之间建立联系，我也建议这样做。如果我们只谈论不对称密钥，那么您可以找到其他方法将公钥链接到其他相关加密材料（例如比较 RSA 世界的公共模数）

# cakephp-bake - 使用烘焙的 Cakephp 代码生成

> ID：15001254
> 
> 赞同：0
> 
> 时间：2013-02-21T11:34:38.100
> 
> 标签：cakephp-bake, cake-console

我刚刚下载了 cakephp 最新版本 2.3.0 并尝试使用 bake 命令创建骨架应用程序。问题是当我在 /app>cake bake 执行命令 cake bake 时。我收到以下消息：

## 欢迎使用 CakePHP v1.3.2 控制台

应用程序：应用程序

## 路径：/var/www/cake-acl/app

## 未找到您的数据库配置。花点时间创建一个。

## 数据库配置：

您可以看到，控制台显示的是 Cakephp 版本 1.3.2，即使我已经下载了 2.3.0，这就是为什么控制台尝试为 app/config 文件夹而不是 app/Config（2.0 约定）创建 1.3 版本脚本的原因。

为什么会这样，我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T05:25:50.160

如果您在下载 2.3.0 版本之前使用的是 v1.3.2，那么您可能在环境设置中为 v.1.3.2 设置了路径。因此，您需要将其更改为最新版本。

# c# - 一键执行按钮

> ID：15001256
> 
> 赞同：-2
> 
> 时间：2013-02-21T11:34:50.147
> 
> 标签：c#, .net, button, click, browser

我有一个简单的 C# 应用程序，其中包含按钮和 Web 浏览器，每个按钮执行一个请求并在 Web 浏览器上显示请求的结果。我在下一个按钮中使用请求的结果。

```
private void button1_Click(object sender, EventArgs e)
        {
webBrowser1.Navigate("http://www.test.com");
        }

private void button2_Click(object sender, EventArgs e)
        {
            if (webBrowser1.Document.GetElementById("tesxtbox1") != null)
            {
            HtmlElement txt1 = webBrowser1.Document.GetElementById("tesxtbox1");
            txt1.SetAttribute("value", "test");
            webBrowser1.Document.Forms[0].InvokeMember("submit");
            }
        } 
```

我的问题是找到通过单击执行两个按钮的方法或方式，但是第二个按钮在加载 Web 浏览器之前不要执行。在我的第一个解决方案中，我在第一个按钮中添加了：

```
webBrowser1.DocumentCompleted + = new WebBrowserDocumentCompletedEventHandler (Button2_Click); 
```

但是第二个按钮执行了几次，所以我在按钮2的最后一行添加了：

```
webBrowser1.DocumentCompleted - = new WebBrowserDocumentCompletedEventHandler (Button2_Click); 
```

它有效，但在控制台中我发现 Button 2 执行了两次

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:00:27.573

你以错误的方式处理这个问题。首先*，您不是在寻找*单击两个按钮的方法。您正在寻找一种方法来单击一个按钮并在满足条件时执行操作。

基本上你只需要调用`button2.PerformClick()`你的 WebBrowser`DocumentCompleted`方法。但是，如果您想确保 button1 被点击，您可以在 button1 Click 方法中设置一个 bool 并在 button2 Click 方法中重置它。

如果您需要在第一次单击按钮后在文档完成方法中执行多个按钮单击，则可以将它们添加到您的`DocumentCompleted`方法中，如下所示：

先正常订阅。

```
webBrowser1.DocumentCompleted += Document_Completed; 
```

`TAB`通常，您可以在订阅事件后通过按来生成方法存根。该方法可以如下：

```
private void Document_Completed(object sender, WebBrowserDocumentCompletedEventArgs e)
{
     //here you add the other buttons that must be clicked when document complete
     button1.PerformClick(); button2.PerformClick();//etc
     //you could even iterate all over the buttons on the form and click each of them if it meets a certain condtition.
} 
```

我希望能回答你的问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:36:17.747

每次 WebBrowser 控件完成下载文档时都会执行 DocumentCompleted。

您只需订阅一次。

# c++ - C++Builder 2007，联合和位域

> ID：15001268
> 
> 赞同：0
> 
> 时间：2013-02-21T11:35:24.030
> 
> 标签：c++, c++builder, sizeof, unions, bit-fields

此联合的大小返回 16 个字节（在 C++Builder 2007 中）。

```
typedef union
{
  struct
  {
    unsigned Type:2; 
    unsigned Prev:31;
    unsigned Next:31;
    unsigned SizeInBytes:32;
  };
} eMyUnion; 
```

如果我想要 sizeof(eMyUnion) = 12 字节，我必须如何修改这个联合定义？
（我想保留这些字段及其大小，但可以重新排序）。
有可能的 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:21:35.590

```
#pragma pack(push, 1)
  struct
  {
    unsigned Type:2; 
    unsigned Prev:31;
    unsigned Next:31;
    unsigned SizeInBytes:32;
  };
#pragma pack(pop) 
```

# android - 为什么应用程序类上的上下文“变为”空？

> ID：15001276
> 
> 赞同：1
> 
> 时间：2013-02-21T11:35:56.513
> 
> 标签：android, nullpointerexception, android-context

使用应用程序的问题

我正在重写一个应用程序（第一个“版本”在分析方面几乎没有，它最终堆积了一堆我想摆脱的问题），我正在努力解决一个从未出现过的问题在第一个版本中。

事情是：我有一个地理数据类。它只提供字符串数组，我可以将它们塞进微调器适配器中。由于我使用了 values xml 文件，因此该类需要访问 Context 以获取适当的资源。

由于我在应用程序的多个点使用此地理数据，我认为我可以创建一个类来扩展应用程序，并在 onCreate 中实例化地理类，我认为只加载一次并多次使用它会更有效我想要的时间。这适用于我的第一个版本：

这是 MyApplication 类

```
private static Context context;
public void onCreate(){
    super.onCreate();
    MyApplication.context = getApplicationContext();
    geografiaEspana = GeographyClass.getInstance(context);

}
public static GeographyClass getGeografiaEspana() {
        if(ctx==null){
            Log.w("TAPABOOK", "Tapabook.context nulo");
        }
        if (geografiaEspana==null){
            Log.w("TAPABOOK", "Tapabook.geografiaEspana nula, instanciando");

            geografiaEspana = GeographyClass.getInstance(ctx);
        }
        Log.i("TAPABOOK", "Tapabook.geografiaEspana instanciada");
        return geografiaEspana;
    } 
```

这是我的地理课

```
private static GeographyClass instance = null;
public static GeographySpain getInstance(Context context){
    if(instance== null){
        instance = new GeographySpain(context);
    }
    return instance;
}

public GeographySpain(Context context){
    Resources res = context.getResources();
    // load resources data
    } 
```

正如我所说，这在我的第一个版本中可以正常工作。但是，在我的新版本中，我在“Resources res = context.getResources();”这一行得到了 NullPointerException 我已经检查过，结果发现我提供的上下文是空的......而且我不明白为什么或我做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:02:21.860

好的，我解决了它（我发誓我已经对此发表了评论，但既然它已经消失了......）。问题是，我不习惯使用 Application 类，我忘记在 Manifest 文件中声明 MyApplication。菜鸟错误。我一宣布，应用程序就运行正常

# c# - C# 中的 OleDbConnection

> ID：15001277
> 
> 赞同：1
> 
> 时间：2013-02-21T11:35:57.423
> 
> 标签：c#, excel, oledb

我已经编写了将数据插入到 excel 表中的代码。我的代码不会引发任何异常，并且每次 excel 文件的大小都会增加 1KB。但是当我打开工作表时，它没有显示任何数据。

我很困惑，无法弄清楚问题所在。请提前帮助和thanx ...!!!

```
string strSQL = string.Empty;
excelConn.Open();
strSQL = "INSERT INTO [" + sheetName + "$]  ([1],[2],[3],[4],[5],[6],[7],[8],[9],[10],[11]) VALUES(@value1, @value2, @value3, @value4, @value5,@value6, @value7, @value8, @value9 ,@value10, @value11)";
excelCommand = new OleDbCommand(strSQL, excelConn);
excelCommand.Parameters.AddWithValue("@value1", Program);
excelCommand.Parameters.AddWithValue("@value2", District);
excelCommand.Parameters.AddWithValue("@value3", Period);
excelCommand.Parameters.AddWithValue("@value4", paramValue1);
excelCommand.Parameters.AddWithValue("@value5", paramValue2);
excelCommand.Parameters.AddWithValue("@value6", paramValue3);
excelCommand.Parameters.AddWithValue("@value7", BusinessLogic);
excelCommand.Parameters.AddWithValue("@value8", ExpectedResult);
excelCommand.Parameters.AddWithValue("@value9", ActualResult);
excelCommand.Parameters.AddWithValue("@value10", Status);
excelCommand.Parameters.AddWithValue("@value11", DateTime);               

excelCommand.ExecuteNonQuery();
return true; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:55:02.993

OLEDB 要求不应命名参数。您应该在查询中使用问号：

```
strSQL = "INSERT INTO [" + sheetName + "$]  
         ([1],[2],[3],[4],[5],[6],[7],[8],[9],[10],[11]) 
         VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)"; 
```

# jquery - 会话超时时的 Ajax 调用

> ID：15001280
> 
> 赞同：6
> 
> 时间：2013-02-21T11:36:09.273
> 
> 标签：jquery, ajax, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

所有，如果在会话超时时进行 ajax 调用，我会尝试重定向到登录页面。这是我到目前为止所做的。

为所有操作定义一个操作过滤器。

```
public class AuthenticateFilterAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            base.OnActionExecuting(filterContext);
            var routeDataSet = filterContext.RouteData;
            if (LoginUser.LoginAdministrator == null)
            {
                //if the useinfo stored in session is timeout. 
                if (routeDataSet != null
                    && routeDataSet.Values["controller"] != null
                    && routeDataSet.Values["controller"].ToString().ToLower().Equals("login")
                    && routeDataSet.Values["action"] != null
                    && routeDataSet.Values["action"].ToString().ToLower().Equals("login"))
                {
                    //if it is login action itself.let it be. don't do anything.

                }
                else
                {
                    //redirect to login page.
                    filterContext.Result = new RedirectToRouteResult(
                        new RouteValueDictionary { { "controller", "Login" }, { "action", "Login" } });
                }
            }
        }
    } 
```

这适用于会话超时时的非 ajax 操作调用。但是对于ajax调用。它不能不重定向到登录页面而只返回一个html页面字符串（似乎是登录页面的源html代码），而不是真正的结果。假设我们有这样的代码。

```
function ajaxGetLogDetail(logId) {
        var sUrl = "/LogDetail/index?logId=" + logId;
        $.ajax({
            cache: false,
            type: "GET",
            async: false,
            url: sUrl,
            success: function (result) {
                //please note result is html string. not the really result.
            },
            error: function (xhr) {
                alert(xhr.responseText);
            }
        });
    } 
```

任何人都可以帮我解决这个问题吗？谢谢。

**更新**

根据 Mohsin 和 Dave 的回答（谢谢你们两个），这是最终的解决方案。请审查它。谢谢。

```
public class AuthenticateFilterAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            base.OnActionExecuting(filterContext);
            var routeDataSet = filterContext.RouteData;
            if (LoginUser.LoginAdministrator == null)
            {

                //&& routeDataSet != null && routeDataSet.Values["controller"] != null
                //&& !routeDataSet.Values["controller"].ToString().ToLower().Equals("login") && routeDataSet.Values["action"] != null
                //&& !routeDataSet.Values["action"].ToString().ToLower().Equals("login") && !filterContext.HttpContext.Request.HttpMethod.ToLower().Equals("get"))
                if (routeDataSet != null
                    && routeDataSet.Values["controller"] != null
                    && routeDataSet.Values["controller"].ToString().ToLower().Equals("login")
                    && routeDataSet.Values["action"] != null
                    && routeDataSet.Values["action"].ToString().ToLower().Equals("login"))
                {

                }
                else
                {
                    if (filterContext.HttpContext.Request.IsAjaxRequest())
                    {
                        filterContext.Result = new JsonResult
                        {
                            Data = new
                            {
                                ErrorMessage = "SystemSessionTimeOut"
                            },
                            JsonRequestBehavior = JsonRequestBehavior.AllowGet
                        };
                    }
                    else
                    {
                        filterContext.Result = new RedirectToRouteResult(
                            new RouteValueDictionary { { "controller", "Login" }, { "action", "Login" } });
                    }
                }
            }
        }
    } 
```

在客户端：

```
function ajaxGetLogDetail(logId) {
        var sUrl = "/LogDetail/index?logId=" + logId;
        $.ajax({
            cache: false,
            type: "GET",
            async: false,
            url: sUrl,
            success: function (result) {
                if (result.ErrorMessage=="SystemSessionTimeOut")
                {
                   windows.location="/Login/Login";
                } 
                else
                {
                   //...  
                }
            },
            error: function (xhr) {
                alert(xhr.responseText);
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T12:31:04.413

Ajax 调用不能返回任何类型的重定向。AJAX 调用的核心只返回一个字符串。没有可以执行重定向的引擎。

您可以执行客户端重定向。如果会话超时并且在客户端让您的控制器方法返回 false：

```
 if !(routeDataSet != null
         && routeDataSet.Values["controller"] != null
         && routeDataSet.Values["controller"].ToString().ToLower().Equals("login")
         && routeDataSet.Values["action"] != null
         && routeDataSet.Values["action"].ToString().ToLower().Equals("login"))
      {
        return Json(new { success = false, message = errorMessage });
      } 
```

在您的 AJAX`error`函数中：

```
 error: function (xhr) {
            alert(xhr.responseText);
            window.location='/Login/Login';
        } 
```

**旁注：**您的目的地是“/Login/Login”还是“/Account/Login”

# php - 使用 MySQL 和 PHP 的非标准排序和导航

> ID：15001284
> 
> 赞同：0
> 
> 时间：2013-02-21T11:36:25.413
> 
> 标签：php, mysql, sorting, navigation

我正在尝试对工程期刊 API 提供给我的信息进行排序。我已将以下信息提取到表格中：

```
ID                 (integer),
Journal Entry Name (Text),
Description        (Text),
Page Length        (integer),
Has Media          (boolean) 
```

每个“Journal Entry”只有一个与之关联的 ID。每个 ID 还具有 API 未返回但我想用于排序的其他特征。他们是：

*   类别（例如经济、数学、生物学。每个 ID 可以有多个类别）
*   布尔值（需要特殊订阅之类的东西）

我创建了以下格式的第二个表：

```
ID       (integer),
Category (text),
Boolean1 (bool),
Boolean2 (bool),
Boolean3 (bool) 
```

由于每个 ID 可以有多个类别，因此当发生这种情况时，会将另一行添加到此表中。这个想法是任何给定的行都只有一个 ID 和一个类别。

我想做的是：

*   能够找到排名前十的类别
    *   最高日记帐分录 (ID) 计数
    *   最高总页长
    *   “有媒体”布尔值为真的最高日记帐条目计数
*   创建一种导航方式，例如“分页”，其中每个页面显示上述前十名的第 n 个结果。
    *   因此，如果我选择最高日志条目计数方法，第一页将显示计数最高的类别中所有日志条目的 ID、名称和描述。

我的计划是创建一个新表，其中数字 1 到 10 位于第一列，然后用前十个类别填充第二列。然后我可以使用类似于分页的过程，其中第 n 页仅显示原始值中具有相应类别的值。但是，我似乎无法进入前十名列表/矩阵，也不知道是否有更好的方法。

不幸的是，我不是一个 MySQL 或 PHP 编码员，只是通过大量的谷歌搜索才走到了这一步。我完全找不到任何导航方法的指南，就像我想要的那样。而且由于我不知道正确的术语，我现在只是在尝试随机谷歌搜索。

这是最好的方法吗？或者创建某种第三张表会更好吗？是否有更简单的方法可以使用我已经编写的 PHP 和 MySQL 代码来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:59:02.560

不确定我是否真的理解你在这里的目的，但我最好的猜测是你可能想要组合你的两个初始表并将类别设置为一个集合而不是一个单独的术语，这样你就可以为每个唯一 ID 输入一个条目。

然后，您只需要根据需要为您的前十个发现中的每一个编写调用。由于每个 id 可以有未知数量的类别，我将从 10 的限制开始，然后从顶部匹配开始处理返回，获取其类别，如果超过 10 个，则获取前 10 个，如果少于 10 个抓住有什么，更新您正在寻找的数量（如果有 4，那么您现在正在寻找 6），然后继续进行下一个最佳匹配。

也许是这样的：

```
categories = null;
$delimeter = ',';
$count = 1;
$top10 = array();

$result = mysql_query("
SELECT *
FROM table_name
ORDER BY page_length DESC
LIMIT 10");

while($row = mysql_fetch_array($result)  && $count <=10)
  {
  $categories = $row['categories'];
  $id = $row['id'];
  $splitcontents = explode($delimeter, $catagories);
  foreach($splitcontents as $category){
     if (!in_array($catagory,$top10)){
        $top10[$count] = array(
            'category'=>$category,
            'journal_id'=>$id
        );
        $count++;
      }
  }
} 
```

# asp.net - 继承一个类来移除一个属性并改变方法逻辑

> ID：15001287
> 
> 赞同：3
> 
> 时间：2013-02-21T11:36:37.483
> 
> 标签：asp.net, vb.net, inheritance

以下类在 ASP.NET 应用程序中用于从数据库结果集中读取货币并将它们相加（例如以美元显示总计加上以 GB 磅显示总计）。它以下列方式工作：

1.  读取货币 ID 值
2.  如果货币 ID 已存在，则增加该货币的总数
3.  如果货币 ID 不存在，则将其与其值一起添加到列表中
4.  下一个

使用该`CurrencyID`属性作为每种独特货币之间的区别，效果很好。但是，现在很明显，`IsoCurrencySymbol`默认情况下每种货币也是唯一的，因此`CurrencyID`实际上并不需要。

所以...我想知道是否可以从此类继承并删除对 的任何引用`CurrencyID`，因此改为`CompareTo`使用该方法`IsoCurrencySymbol`。

诀窍是保留现有的类，因为它被广泛使用，但引入一个不需要的修改版本`CurrencyID`。请问这样可以吗？

```
<Serializable()> _
Public Class CurrencyCounter

    <Serializable()> _
    Private Class CurrencyType
        Implements IComparable

        Public IsoCurrencySymbol As String
        Public CurrencySymbol As String
        Public CurrencyID As Int16
        Public Amount As Decimal

        Public Function CompareTo(obj As Object) As Integer Implements System.IComparable.CompareTo
            If Not TypeOf (obj) Is CurrencyType Then
                Throw New ArgumentException("Object is not a currency type")
            Else
                Dim c2 As CurrencyType = CType(obj, CurrencyType)
                Return Me.CurrencyID.CompareTo(c2.CurrencyID)
            End If
        End Function

    End Class

    Private _Currencies As List(Of CurrencyType)

    Public Sub New()
        _Currencies = New List(Of CurrencyType)
    End Sub

    Private Sub AddStructToList(CurrencyID As Integer, IsoCurrencySymbol As String, CurrencySymbol As String, Amount As Decimal)
        If IsoCurrencySymbol <> String.Empty AndAlso Amount > 0 Then
            Dim s As New CurrencyType
            s.CurrencyID = CurrencyID
            s.IsoCurrencySymbol = IsoCurrencySymbol
            s.CurrencySymbol = CurrencySymbol
            s.Amount = Amount
            _Currencies.Add(s)
        End If
    End Sub

    Public Sub Add(CurrencyID As Integer, IsoCurrencySymbol As String, CurrencySymbol As String, Amount As Decimal)
        Dim ct As CurrencyType = _Currencies.Find(Function(obj) obj.CurrencyID = CurrencyID)
        If ct IsNot Nothing Then
            ct.Amount += Amount
        Else
            AddStructToList(CurrencyID, IsoCurrencySymbol, CurrencySymbol, Amount)
        End If
    End Sub

    Public Sub Clear()
        _Currencies.Clear()
    End Sub

    Public Function Count() As Integer
        Return _Currencies.Count
    End Function

    Public Function RenderTotals() As String
        ' ...
    End Function

End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T13:21:48.687

不，你不能那样做。继承的全部意义在于确保所有派生类，如果没有别的，至少与它们的基类共享相同的公共接口。如果您要删除一个属性，那么它不共享相同的接口，因此不兼容并且不适合继承。

如果你不能说*派生类是基类的一种类型*，那么你就不能使用继承。例如，我可以说汽车是一种交通工具，因此，如果我有一个汽车类，我可以让它从一个交通工具类继承。然而，我不能说昆虫是一种交通工具。因此，即使它们有大部分共同点，我也不能让昆虫类继承自车辆类。

此限制的原因是因为继承允许您将对象视为基本类型（通过*类型转换*）。例如：

```
Public Sub AddPassengerToVehicle(v As Vehicle)
    v.Passengers.Add(New Passenger())
End Sub

' ...

Dim auto As New Automobile()
Dim bug As New Insect()
AddPassengerToVehicle(auto) ' Works because an automobile is a type vehicle (inherits from vehicle)
AddPassengerToVehicle(bug) ' Can't possibly work (nor should it) 
```

因此，如果您需要有一个派生类来删除/隐藏其基类的成员之一，那么您就走错了方向。在这种情况下，您需要创建一个全新的类，该类恰好具有非常相似的接口，但与第一个类没有直接关系，例如：

```
Public Class Vehicle
    Public Property Passengers As List(Of Passenger)
    Public Property MaxSpeed As Integer

    Public Function SpeedIsTooFast(speed) As Boolean
        Return (speed > MaxSpeed)
    End Function
End Class

Public Class Insect
    Public Property MaxSpeed As Integer

    Public Function SpeedIsTooFast(speed) As Boolean
        Return (speed > MaxSpeed)
    End Function
End Class 
```

如果您想共享功能，例如`SpeedIsTooFast`上面示例中方法中的逻辑，那么有几种不同的方法可以做到这一点。这首先是制作简单地调用另一个类的*包装器*方法，例如：

```
Public Class Insect
    Private _vehicle As New Vehicle()

    Public Property MaxSpeed() As Integer
        Get
            Return _vehicle.MaxSpeed
        End Get
        Set(value As Integer)
            _vehicle.MaxSpeed = value
        End Set
    End Property

    Public Function SpeedIsTooFast(speed) As Boolean
        Return _vehicle.SpeedIsTooFast(speed)
    End Function
End Class 
```

如果你这样做，最好让两个类实现相同的公共接口，以便在必要时可以互换使用它们，例如：

```
Public Interface ISelfPoweredMovingThing
    Property MaxSpeed As Integer
    Function SpeedIsTooFast(speed As Integer) As Boolean
End Interface 
```

另一种选择是将通用功能分解为第三个类，然后将该类用作其他两个类的基础，例如：

```
Public Class SelfPoweredMovingThing
    Public Property MaxSpeed As Integer

    Public Function SpeedIsTooFast(speed) As Boolean
        Return (speed > MaxSpeed)
    End Function
End Class

Public Class Vehicle
    Inherits SelfPoweredMovingThing

    Public Property Passengers As List(Of Passenger)
End Class

Public Class Insect
    Inherits SelfPoweredMovingThing

    ' Anything else specific only to insects...
End Class 
```

# c# - 如何使用 LINQ 从数组列表中检索一组唯一数组？

> ID：15001294
> 
> 赞同：5
> 
> 时间：2013-02-21T11:37:28.257
> 
> 标签：c#, arrays, linq, list

我有这样的结构

```
List<int[]> propIDs = new List<int[]>(); 
```

我可以使用 LINQ 从 propID 中获取所有唯一值吗？例如，我有 (1,2) (4,5) (1,5) (1,2) (1,5) 的列表，我必须得到 (1,2 ) (4,5) (1,5)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:41:29.187

您可以使用采用相等比较器的[Enumerable.Distinct的重载。](http://msdn.microsoft.com/en-us/library/bb338049.aspx)

```
class IntPairArrayComparer : IEqualityComparer<int[]>
{
    public bool Equals(int[] left, int[] right)
    {
        if (left.Length != 2) throw new ArgumentOutOfRangeException("left");
        if (right.Length != 2) throw new ArgumentOutOfRangeException("right");

        return left[0] == right[0] && left[1] == right[1];
    }

    public int GetHashCode(int[] arr)
    {
        unchecked
        {
            return (arr[0].GetHashCode() * 397) ^ arr[1].GetHashCode();
        }
    }
}

IEnumerable<int[]> distinctPairs = propIDs.Distinct(new IntPairArrayComparer()); 
```

如果您想要大于对的集合：

```
class IntArrayComparer : IEqualityComparer<int[]>
{
    public bool Equals(int[] left, int[] right)
    {
        if (left.Length != right.Length) return false;

        return left.SequenceEquals(right);
    }

    public int GetHashCode(int[] arr)
    {
        unchecked
        {
            int hc = 1;

            foreach (int val in arr) hc = hc * 397 ^ val.GetHashCode();
        }
    }
} 
```

如果您的所有`int`数组都是两个元素长，您也可以使用`Tuple`s 代替，这将允许您在`Distinct`没有自定义相等比较器的情况下使用：

```
IEnumerable<Tuple<int, int>> propIDs = [] { Tuple.Create(1,2), … };
IEnumerable<Tuple<int, int>> distinctPairs = propIDs.Distinct(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:45:37.847

以下是您需要的完整且有效的应用程序。

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ListsAndArrays
{
    class Program
    {
        static void Main(string[] args)
        {
            List<int[]> propIDs = new List<int[]>();
            propIDs.Add(new[] { 1, 2 });
            propIDs.Add(new[] { 4, 5 });
            propIDs.Add(new[] { 1, 5 });
            propIDs.Add(new[] { 1, 2 });
            propIDs.Add(new[] { 1, 5 });

            var distinct = propIDs.Distinct(new DistinctIntegerArrayComparer());

            foreach (var item in distinct)
            {
                Console.WriteLine("{0}|{1}", item[0], item[1]);
            }

            if (Debugger.IsAttached)
            {
                Console.ReadLine();
            }
        }

        private class DistinctIntegerArrayComparer : IEqualityComparer<int[]>
        {
            public bool Equals(int[] x, int[] y)
            {
                if (x.Length != y.Length) { return false; }
                else if (x.Length != 2 || y.Length != 2) { return false; }

                return x[0] == y[0] && x[1] == y[1];
            }

            public int GetHashCode(int[] obj)
            {
                return -1;
            }
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T11:49:45.373

此代码适用于任何长度的数组。

```
 class MyEqualityComparer : IEqualityComparer<int[]>
    {
        public bool Equals(int[] item1, int[] item2)
        {
            if (item1 == null && item2 == null)
                return true;
            if ((item1 != null && item2 == null) ||
                    (item1 == null && item2 != null))
                return false;
            return item1.SequenceEqual(item2);
        }

        public int GetHashCode(int[] item)
        {
            if(item == null)
            {
                return int.MinValue;
            }
            int hc = item.Length;
            for (int i = 0; i < item.Length; ++i)
            {
                hc = unchecked(hc * 314159 + item[i]);
            }
            return hc;
        }
    } 
```

和不同的代码：

```
var result = propIDs.Distinct(new MyEqualityComparer()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T11:50:29.797

假设您不能使用which 已经提供了相等性，您可以通过简单地要求所有元素按顺序相等`Tuple<T1, T2>`来创建自己的定义数组相等性的方法：[`IEqualityComparer<T>`](http://msdn.microsoft.com/en-us/library/ms132151.aspx)

```
class ArrayEqualityComparer<T> : IEqualityComparer<T[]> {

  public Boolean Equals(T[] x, T[] y) {
    if (x.Length != y.Length)
      return false;
    return x.Zip(y, (xx, yy) => Equals(xx, yy)).All(equal => equal);
  }

  public Int32 GetHashCode(T[] obj) {
    return obj.Aggregate(0, (hash, value) => 31*hash + value.GetHashCode());
  }

} 
```

然后您可以轻松获得不同的值：

```
var distinctPropIDs  = propIDs.Distinct(new ArrayEqualityComparer<Int32>()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-01T20:24:21.477

```
public return List<Tuple<double, double>> uniquePairs(List<double[]> lst)
{
HashSet<Tuple<double, double>> hash = new HashSet<Tuple<double, double>>();
for (int i = 0; i < lst.count; i++)
{
hash.Add(new Tuple<double, double>(lst[i][0], lst[i][1]))
}
List<Tuple<double, double>> lstt = hash.Distinct().ToList();
}

For example:
List<double[]> lst = new List<double[]> {new double[] { 1, 2 }, new double[] { 2, 3 }, new double[] { 3, 4 }, new double[] { 1, 4 }, new double[] { 3, 4 }, new double[] { 2, 1 }}; //  this list has 4 unique numbers, 5 unique pairs, the desired output would be the 5 unique pairs (count = 5)
List<Tuple<double, double>> lstt = uniquePairs(lst);
Console.WriteLine(lstt.Count().ToString()); 
```

输出为 5

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-21T11:45:01.967

HashSet，集合是不包含重复元素的集合：

```
var propIDs = HashSet<Tuple<int,int>> 
```

# c# - 如何使用 Entity Framework 和 Fluent API 映射复杂的一对多

> ID：15001295
> 
> 赞同：1
> 
> 时间：2013-02-21T11:37:29.257
> 
> 标签：c#, database, entity-framework, visual-studio-2012, fluent-interface

我来自 Java，现在正在使用 C# 和实体框架将现有系统实现到数据库中。

由于我无法在此处显示实际的类，因此我尝试制作一个与我的问题相同的示例，如下所示。我有一个`Company`其中有几个属性列表`Person`。当我使用 EF 将其转换为数据库时，我为每个`Person`.

```
Company
   public GUID CompanyID {get,set}
   public List<Person> Employee{get,set}
   public List<Person> Janitors {get,set}
   public List<Person> Students {get,set}
   public List<Person> Professors {get,set}    

Person
   public GUID CompanyID {get,set} 
```

我希望 Person 的数据库方案是

```
|Column 1 | Column 2 | Column 3 | Company_FK |
---------------------------------------------- 
```

但现在更像这样

```
| Column 1 | Column 2 | Column 3 | Company_ID  | Company_ID1 | Company_ID2 ...
--------------------------------------------------------------------------
                                     null          reference      null
                                     null          reference      null
                                    reference         null        null
               ~~~~~~~~~~~~~~~~~~~~~~etc~~~~~~~~~~~~~~~~~~ 
```

所有这些 Company_ID* 列都引用了同一个 Company 表，因此我相信只有一个列用于此引用，然后松开所有这些`null`引用并非不可能。

我需要 Fluent API 的解决方案，而不是 Data Annotation。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:42:59.160

用你的公司配置试试这个：

```
HasMany(x => x.Employee).WithRequired().HasForeignKey(x => x.CompanyID);
HasMany(x => x.Janitors).WithRequired().HasForeignKey(x => x.CompanyID);
HasMany(x => x.Students).WithRequired().HasForeignKey(x => x.CompanyID);
HasMany(x => x.Professors).WithRequired().HasForeignKey(x => x.CompanyID); 
```

# android - 永久设置铃声时遇到错误

> ID：15001296
> 
> 赞同：0
> 
> 时间：2013-02-21T11:37:29.227
> 
> 标签：android

我想永久更改将从 SD 卡调用的来电铃声，并且该铃声应该可以工作不止一次。

我正在使用以下代码：

```
RingtoneManager.setActualDefaultRingtoneUri(getApplicationContext(), RingtoneManager.TYPE_RINGTONE, Note); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:44:48.960

为您的清单文件添加`android.permission.WRITE.SETTINGS`权限，因为您的例外指定

# vim - 删除除第一个实例之外的所有行

> ID：15001297
> 
> 赞同：3
> 
> 时间：2013-02-21T11:37:31.017
> 
> 标签：vim, windows-7

如何删除除已知行的第一个实例之外的所有实例？

例如，我有

```
LOADING CONDITION :   LIGHTSHIP CONDITION 
```

其中一些分布在文件的内容中。我只想保留靠近顶部的第一个实例。

任何人的想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T14:52:44.897

您可以将`:global`命令与范围结合使用。

```
:0/LOADING CONDITION/+,$g//d 
```

解释：

*   `[range]g/{pat}/{cmd}`在给定行范围内`{cmd}`匹配的每一行上运行命令, 。`{pat}``[range]`
*   `0/LOADING CONDITION/`从第一行开始找到模式`LOADING CONDITION`
*   `0/LOADING CONDITION/+1`从第一个实例下方的范围 1 行开始
*   `+1`可以缩短到只是`+`因为 1 可以假设。
*   `,$`范围的结尾将是文件中的最后一行，它被称为`$`
*   `g//`使用最后一个搜索模式。在这种情况下，范围内的模式
*   `:delete`或者`:d`简称是用于删除行的 ex 命令

有关更多信息，请参阅

```
:h :g
:h :d
:h range 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T11:55:42.330

```
gg (make cursor back to top)
/LOADING CONDITION :   LIGHTSHIP CONDITION (enter)
n
:.,$g//d 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-29T15:51:35.183

我的[PatternsOnText 插件](http://www.vim.org/scripts/script.php?script_id=4602)提供了一个命令（和其他相关的），使这变得非常简单：

```
:DeleteDuplicateLinesOf /^LOADING CONDITION :   LIGHTSHIP CONDITION$/ 
```

# sql - 在sql server 2005中进行一系列分组后的Max总和

> ID：15001301
> 
> 赞同：0
> 
> 时间：2013-02-21T11:37:38.727
> 
> 标签：sql, sql-server, subquery

我有 48 列来显示每 1/2 小时和相应日期的数据。一切都好，突然我的客户想要改变这个，以便每天只显示这 48 列的最大值。我厌倦了 Max 转换、pivot 等，但徒劳无功。

目前它就像

```
 Date           [12:00am] [12:30am] ....   [11:30pm]        
      01/01/2012         5        6               9      
      01/02/2012         15       4               8       
      01/03/2012         1        19              0 
```

但我必须得到它（只有 2 列）

```
Date          Max(out of these 48 cols)
01/01/2012         9
01/02/2012         15
01/03/2012         19 
```

感谢任何帮助。

注意：我没有任何直接列来计算最大值或总和。

代码片段：

```
 DECLARE     @prmOffSet int,@prmStartDate datetime, @prmEndDate datetime
    SET @prmStartDate = '01/01/2012';
    SET @prmEndDate = '01/10/2012';
    SET @prmOffSet = '-8';
    SELECT  CONVERT(varchar(10), CAST

(StartDate AS DateTime), 101) AS StartDate, 
        SUM(TwelveAM) AS [12:00am],
        SUM(TwelveThirtyAM) AS [12:30am], 
        SUM(OneAM) AS [1:00am], 
        SUM(OneThirtyAM) AS [1:30am],
        SUM(TwoAM) AS [2:00am], 
        SUM(TwoThirtyAM) AS [2:30am],
        SUM(ThreeAM) AS [3:00am],
        SUM(ThreeThirtyAM) AS [3:30am], 
        SUM(FourAM) AS [4:00am], 
        SUM(FourThirtyAM) AS [4:30am],
        SUM(FiveAM) AS [5:00am],
        SUM(FiveThirtyAM) AS [5:30am], 
        SUM(SixAM) AS [6:00am], 
        SUM(SixThirtyAM) AS [6:30am],
        SUM(SevenAM) AS [7:00am],
        SUM(SevenThirtyAM) AS [7:30am], 
        SUM(EightAM) AS [8:00am],
        SUM(EightThirtyAM) AS [8:30am],  
        SUM(NineAM) AS [9:00am],
        SUM(NineThirtyAM) AS [9:30am], 
        SUM(TenAM) AS [10:00am],
        SUM(TenThirtyAM) AS [10:30am], 
        SUM(ElevenAM) AS [11:00am], 
        SUM(ElevenThirtyAM) AS [11:30am],
        SUM(TwelvePM) AS [12:00pm],
        SUM(TwelveThirtyPM) AS [12:30pm], 
        SUM(OnePM) AS [1:00pm], 
        SUM(OneThirtyPM) AS [1:30pm],
        SUM(TwoPM) AS [2:00pm], 
        SUM(TwoThirtyPM) AS [2:30pm],
        SUM(ThreePM) AS [3:00pm], 
        SUM(ThreeThirtyPM) AS [3:30pm],
        SUM(FourPM) AS [4:00pm], 
        SUM(FourThirtyPM) AS [4:30pm],
        SUM(FivePM) AS [5:00pm],
        SUM(FiveThirtyPM) AS [5:30pm], 
        SUM(SixPM) AS [6:00pm], 
        SUM(SixThirtyPM) AS [6:30pm],
        SUM(SevenPM) AS [7:00pm], 
        SUM(SevenThirtyPM) AS [7:30pm],
        SUM(EightPM) AS [8:00pm], 
        SUM(EightThirtyPM) AS [8:30pm],
        SUM(NinePM) AS [9:00pm], 
        SUM(NineThirtyPM) AS [9:30pm],
        SUM(TenPM) AS [10:00pm],
        SUM(TenThirtyPM) AS [10:30pm], 
        SUM(ElevenPM) AS [11:00pm],
        SUM(ElevenThirtyPM) AS [11:30pm]
FROM (
        SELECT DisplayName, StartDate, EndDate, StartHours, EndHours, 
            CASE WHEN StartHours <= 0 AND EndHours >= 0 THEN 1 ELSE 0 END AS TwelveAM, 
            CASE WHEN StartHours <= 0.5 AND EndHours >= 0.5 THEN 1 ELSE 0 END AS TwelveThirtyAM,
            CASE WHEN StartHours <= 1 AND EndHours >= 1 THEN 1 ELSE 0 END AS OneAM, 
            CASE WHEN StartHours <= 1.5 AND EndHours >= 1.5 THEN 1 ELSE 0 END AS OneThirtyAM,
            CASE WHEN StartHours <= 2 AND EndHours >= 2 THEN 1 ELSE 0 END AS TwoAM, 
            CASE WHEN StartHours <= 2.5 AND EndHours >= 2.5 THEN 1 ELSE 0 END AS TwoThirtyAM,
            CASE WHEN StartHours <= 3 AND EndHours >= 3 THEN 1 ELSE 0 END AS ThreeAM, 
            CASE WHEN StartHours <= 3.5 AND EndHours >= 3.5 THEN 1 ELSE 0 END AS ThreeThirtyAM,
            CASE WHEN StartHours <= 4 AND EndHours >= 4 THEN 1 ELSE 0 END AS FourAM, 
            CASE WHEN StartHours <= 4.5 AND EndHours >= 4.5 THEN 1 ELSE 0 END AS FourThirtyAM,
            CASE WHEN StartHours <= 5 AND EndHours >= 5 THEN 1 ELSE 0 END AS FiveAM, 
            CASE WHEN StartHours <= 5.5 AND EndHours >= 5.5 THEN 1 ELSE 0 END AS FiveThirtyAM,
            CASE WHEN StartHours <= 6 AND EndHours >= 6 THEN 1 ELSE 0 END AS SixAM,
            CASE WHEN StartHours <= 6.5 AND EndHours >= 6.5 THEN 1 ELSE 0 END AS SixThirtyAM, 
            CASE WHEN StartHours <= 7 AND EndHours >= 7 THEN 1 ELSE 0 END AS SevenAM, 
            CASE WHEN StartHours <= 7.5 AND EndHours >= 7.5 THEN 1 ELSE 0 END AS SevenThirtyAM,
            CASE WHEN StartHours <= 8 AND EndHours >= 8 THEN 1 ELSE 0 END AS EightAM, 
            CASE WHEN StartHours <= 8.5 AND EndHours >= 8.5 THEN 1 ELSE 0 END AS EightThirtyAM,
            CASE WHEN StartHours <= 9 AND EndHours >= 9 THEN 1 ELSE 0 END AS NineAM, 
            CASE WHEN StartHours <= 9.5 AND EndHours >= 9.5 THEN 1 ELSE 0 END AS NineThirtyAM,
            CASE WHEN StartHours <= 10.0 AND EndHours >= 10.0 THEN 1 ELSE 0 END AS TenAM, 
            CASE WHEN StartHours <= 10.5 AND EndHours >= 10.5 THEN 1 ELSE 0 END AS TenThirtyAM,         
            CASE WHEN StartHours <= 11 AND EndHours >= 11 THEN 1 ELSE 0 END AS ElevenAM,
            CASE WHEN StartHours <= 11.5 AND EndHours >= 11.5 THEN 1 ELSE 0 END AS ElevenThirtyAM,
            CASE WHEN StartHours <= 12 AND EndHours >= 12 THEN 1 ELSE 0 END AS TwelvePM,
            CASE WHEN StartHours <= 12.5 AND EndHours >= 12.5 THEN 1 ELSE 0 END AS TwelveThirtyPM, 
            CASE WHEN StartHours <= 13 AND EndHours >= 13 THEN 1 ELSE 0 END AS OnePM,
            CASE WHEN StartHours <= 13.5 AND EndHours >= 13.5 THEN 1 ELSE 0 END AS OneThirtyPM, 
            CASE WHEN StartHours <= 14 AND EndHours >= 14 THEN 1 ELSE 0 END AS TwoPM, 
            CASE WHEN StartHours <= 14.5 AND EndHours >= 14.5 THEN 1 ELSE 0 END AS TwoThirtyPM,
            CASE WHEN StartHours <= 15 AND EndHours >= 15 THEN 1 ELSE 0 END AS ThreePM,
            CASE WHEN StartHours <= 15.5 AND EndHours >= 15.5 THEN 1 ELSE 0 END AS ThreeThirtyPM, 
            CASE WHEN StartHours <= 16 AND EndHours >= 16 THEN 1 ELSE 0 END AS FourPM, 
            CASE WHEN StartHours <= 16.5 AND EndHours >= 16.5 THEN 1 ELSE 0 END AS FourThirtyPM,
            CASE WHEN StartHours <= 17 AND EndHours >= 17 THEN 1 ELSE 0 END AS FivePM, 
            CASE WHEN StartHours <= 17.5 AND EndHours >= 17.5 THEN 1 ELSE 0 END AS FiveThirtyPM,
            CASE WHEN StartHours <= 18 AND EndHours >= 18 THEN 1 ELSE 0 END AS SixPM,
            CASE WHEN StartHours <= 18.5 AND EndHours >= 18.5 THEN 1 ELSE 0 END AS SixThirtyPM, 
            CASE WHEN StartHours <= 19 AND EndHours >= 19 THEN 1 ELSE 0 END AS SevenPM,
            CASE WHEN StartHours <= 19.5 AND EndHours >= 19.5 THEN 1 ELSE 0 END AS SevenThirtyPM,
            CASE WHEN StartHours <= 20 AND EndHours >= 20 THEN 1 ELSE 0 END AS EightPM,
            CASE WHEN StartHours <= 20.5 AND EndHours >= 20.5 THEN 1 ELSE 0 END AS EightThirtyPM, 
            CASE WHEN StartHours <= 21 AND EndHours >= 21 THEN 1 ELSE 0 END AS NinePM, 
            CASE WHEN StartHours <= 21.5 AND EndHours >= 21.5 THEN 1 ELSE 0 END AS NineThirtyPM,
            CASE WHEN StartHours <= 22 AND EndHours >= 22 THEN 1 ELSE 0 END AS TenPM, 
            CASE WHEN StartHours <= 22.5 AND EndHours >= 22.5 THEN 1 ELSE 0 END AS TenThirtyPM,
            CASE WHEN StartHours <= 23 AND EndHours >= 23 THEN 1 ELSE 0 END AS ElevenPM,
            CASE WHEN StartHours <= 23.5 AND EndHours >= 23.5 THEN 1 ELSE 0 END AS ElevenThirtyPM
        FROM (
                SELECT DisplayName, StartDate, EndDate, StartHours, EndHours
                FROM (
                    SELECT DisplayName, 
                        CAST(FLOOR(CAST(DATEADD(hh, @prmOffSet, SL.SessionUTCStart) AS FLOAT)) AS DATETIME) AS StartDate, 
                        DATEADD(hh, @prmOffSet, SL.SessionUTCStart) as Start,
                        CAST(FLOOR(CAST(DATEADD(hh, @prmOffSet, ISNULL(SL.SessionUTCEnd,S.LastActivity)) AS FLOAT)) AS DATETIME) AS EndDate, 
                        DATEADD(hh, @prmOffSet, ISNULL(SL.SessionUTCEnd,S.LastActivity)) as [End],
                        DATEPART(hh, DATEADD(hh, @prmOffSet, SL.SessionUTCStart)) + CASE WHEN DATEPART(mi, DATEADD(hh, @prmOffSet, SL.SessionUTCStart))<30 THEN 0.0 ELSE 0.5 END AS StartHours, 
                        DATEPART(hh, DATEADD(hh, @prmOffSet, ISNULL(SL.SessionUTCEnd,S.LastActivity))) + CASE WHEN DATEPART(mi, DATEADD(hh, @prmOffSet, ISNULL(SL.SessionUTCEnd,S.LastActivity)))<30 THEN 0.0 ELSE 0.5 END AS EndHours
                    FROM tbSessionLog SL LEFT OUTER JOIN tbSessions S ON SL.SessionID=S.SessionID
                    WHERE (CAST(FLOOR(CAST(DATEADD(hh, @prmOffSet, SL.SessionUTCStart) AS FLOAT)) AS DATETIME) >= CAST(@prmStartDate AS DATETIME)) AND 
                          (CAST(FLOOR(CAST(DATEADD(hh, @prmOffSet, SL.SessionUTCStart) AS FLOAT)) AS DATETIME) <= CAST(@prmEndDate AS DATETIME))) AS Sess
                GROUP BY DisplayName, StartDate, EndDate, StartHours, EndHours) AS DtlSess) AS HourCount
GROUP BY StartDate 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:02:45.900

我可以看到您可以轻松获得此结果的唯一方法是不执行`PIVOT`并创建 48 列。

如果您创建 48 列，那么您将不得不通过`UNPIVOT`这些列来获取`Max`每天的总数。

我建议对您当前的查询稍作更改，如下所示。不要使用该`CASE`语句来创建新列，而是为每个小时块使用一个带有标识符的列：

```
CASE 
  WHEN StartHours <= 0 AND EndHours >= 0 THEN 'TwelveAM'  
  WHEN StartHours <= 0.5 AND EndHours >= 0.5 THEN 'TwelveThirtyAM'
  WHEN StartHours <= 1 AND EndHours >= 1 THEN 'OneAM' 
  WHEN StartHours <= 1.5 AND EndHours >= 1.5 THEN 'OneThirtyAM'
  WHEN StartHours <= 2 AND EndHours >= 2 THEN 'TwoAM' 
  WHEN StartHours <= 2.5 AND EndHours >= 2.5 THEN 'TwoThirtyAM'
END as Hours 
```

一旦这些数据在单列中，您就可以每小时计算一次，然后您就可以获得`Max`每天的总数。

因此，您的查询将与此类似：

```
SELECT StartDate, Max(TotalHours)
FROM
(
  SELECT StartDate, Hours, count(Hours) TotalHours
  FROM
  (
    SELECT DisplayName, StartDate, EndDate, StartHours, EndHours, 
      CASE 
        WHEN StartHours <= 0 AND EndHours >= 0 THEN 'TwelveAM'  
        WHEN StartHours <= 0.5 AND EndHours >= 0.5 THEN 'TwelveThirtyAM'
        WHEN StartHours <= 1 AND EndHours >= 1 THEN 'OneAM' 
        WHEN StartHours <= 1.5 AND EndHours >= 1.5 THEN 'OneThirtyAM'
        WHEN StartHours <= 2 AND EndHours >= 2 THEN 'TwoAM' 
        WHEN StartHours <= 2.5 AND EndHours >= 2.5 THEN 'TwoThirtyAM'
        -- add other WHEN statements here
      END as Hours
    FROM 
    (
      SELECT DisplayName, StartDate, EndDate, StartHours, EndHours
      FROM 
      (
        SELECT DisplayName, 
         CAST(FLOOR(CAST(DATEADD(hh, @prmOffSet, SL.SessionUTCStart) AS FLOAT)) AS DATETIME) AS StartDate, 
         DATEADD(hh, @prmOffSet, SL.SessionUTCStart) as Start,
         CAST(FLOOR(CAST(DATEADD(hh, @prmOffSet, ISNULL(SL.SessionUTCEnd,S.LastActivity)) AS FLOAT)) AS DATETIME) AS EndDate, 
         DATEADD(hh, @prmOffSet, ISNULL(SL.SessionUTCEnd,S.LastActivity)) as [End],
         DATEPART(hh, DATEADD(hh, @prmOffSet, SL.SessionUTCStart)) + CASE WHEN DATEPART(mi, DATEADD(hh, @prmOffSet, SL.SessionUTCStart))<30 THEN 0.0 ELSE 0.5 END AS StartHours, 
         DATEPART(hh, DATEADD(hh, @prmOffSet, ISNULL(SL.SessionUTCEnd,S.LastActivity))) + CASE WHEN DATEPART(mi, DATEADD(hh, @prmOffSet, ISNULL(SL.SessionUTCEnd,S.LastActivity)))<30 THEN 0.0 ELSE 0.5 END AS EndHours
        FROM tbSessionLog SL 
        LEFT OUTER JOIN tbSessions S 
          ON SL.SessionID=S.SessionID
        WHERE (CAST(FLOOR(CAST(DATEADD(hh, @prmOffSet, SL.SessionUTCStart) AS FLOAT)) AS DATETIME) >= CAST(@prmStartDate AS DATETIME)) AND 
          (CAST(FLOOR(CAST(DATEADD(hh, @prmOffSet, SL.SessionUTCStart) AS FLOAT)) AS DATETIME) <= CAST(@prmEndDate AS DATETIME))
      ) AS Sess
      GROUP BY DisplayName, StartDate, EndDate, StartHours, EndHours
    ) AS DtlSess
  ) src
  GROUP BY StartDate, Hours
) t
GROUP BY StartDate 
```

这是一个[SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/cd349/2)，其中包含您的查询的缩短版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:33:43.267

@bluefeet，感谢您的及时回复。我已经使用 unpivot 解决了它。作为记录，可能有类似问题的人可以参考下面的解决方案。

```
 SELECT StartDate,Max(col) As MaxValue
FROM
(
    SELECT StartDate, col
    FROM
    (
        SELECT  CONVERT(varchar(10), CAST(StartDate AS DateTime), 101) AS StartDate, 
                SUM(TwelveAM) AS [12:00am],
                SUM(TwelveThirtyAM) AS [12:30am], 
                SUM(OneAM) AS [1:00am], 
                SUM(OneThirtyAM) AS [1:30am],
                SUM(TwoAM) AS [2:00am], 
                SUM(TwoThirtyAM) AS [2:30am],
                SUM(ThreeAM) AS [3:00am],
                SUM(ThreeThirtyAM) AS [3:30am], 
                SUM(FourAM) AS [4:00am], 
                SUM(FourThirtyAM) AS [4:30am],
                SUM(FiveAM) AS [5:00am],
                SUM(FiveThirtyAM) AS [5:30am], 
                SUM(SixAM) AS [6:00am], 
                SUM(SixThirtyAM) AS [6:30am],
                SUM(SevenAM) AS [7:00am],
                SUM(SevenThirtyAM) AS [7:30am], 
                SUM(EightAM) AS [8:00am],
                SUM(EightThirtyAM) AS [8:30am],  
                SUM(NineAM) AS [9:00am],
                SUM(NineThirtyAM) AS [9:30am], 
                SUM(TenAM) AS [10:00am],
                SUM(TenThirtyAM) AS [10:30am], 
                SUM(ElevenAM) AS [11:00am], 
                SUM(ElevenThirtyAM) AS [11:30am],
                SUM(TwelvePM) AS [12:00pm],
                SUM(TwelveThirtyPM) AS [12:30pm], 
                SUM(OnePM) AS [1:00pm], 
                SUM(OneThirtyPM) AS [1:30pm],
                SUM(TwoPM) AS [2:00pm], 
                SUM(TwoThirtyPM) AS [2:30pm],
                SUM(ThreePM) AS [3:00pm], 
                SUM(ThreeThirtyPM) AS [3:30pm],
                SUM(FourPM) AS [4:00pm], 
                SUM(FourThirtyPM) AS [4:30pm],
                SUM(FivePM) AS [5:00pm],
                SUM(FiveThirtyPM) AS [5:30pm], 
                SUM(SixPM) AS [6:00pm], 
                SUM(SixThirtyPM) AS [6:30pm],
                SUM(SevenPM) AS [7:00pm], 
                SUM(SevenThirtyPM) AS [7:30pm],
                SUM(EightPM) AS [8:00pm], 
                SUM(EightThirtyPM) AS [8:30pm],
                SUM(NinePM) AS [9:00pm], 
                SUM(NineThirtyPM) AS [9:30pm],
                SUM(TenPM) AS [10:00pm],
                SUM(TenThirtyPM) AS [10:30pm], 
                SUM(ElevenPM) AS [11:00pm],
                SUM(ElevenThirtyPM) AS [11:30pm]
        FROM (
                SELECT DisplayName, StartDate, EndDate, StartHours, EndHours, 
                    CASE WHEN StartHours <= 0 AND EndHours >= 0 THEN 1 ELSE 0 END AS TwelveAM, 
                    CASE WHEN StartHours <= 0.5 AND EndHours >= 0.5 THEN 1 ELSE 0 END AS TwelveThirtyAM,
                    CASE WHEN StartHours <= 1 AND EndHours >= 1 THEN 1 ELSE 0 END AS OneAM, 
                    CASE WHEN StartHours <= 1.5 AND EndHours >= 1.5 THEN 1 ELSE 0 END AS OneThirtyAM,
                    CASE WHEN StartHours <= 2 AND EndHours >= 2 THEN 1 ELSE 0 END AS TwoAM, 
                    CASE WHEN StartHours <= 2.5 AND EndHours >= 2.5 THEN 1 ELSE 0 END AS TwoThirtyAM,
                    CASE WHEN StartHours <= 3 AND EndHours >= 3 THEN 1 ELSE 0 END AS ThreeAM, 
                    CASE WHEN StartHours <= 3.5 AND EndHours >= 3.5 THEN 1 ELSE 0 END AS ThreeThirtyAM,
                    CASE WHEN StartHours <= 4 AND EndHours >= 4 THEN 1 ELSE 0 END AS FourAM, 
                    CASE WHEN StartHours <= 4.5 AND EndHours >= 4.5 THEN 1 ELSE 0 END AS FourThirtyAM,
                    CASE WHEN StartHours <= 5 AND EndHours >= 5 THEN 1 ELSE 0 END AS FiveAM, 
                    CASE WHEN StartHours <= 5.5 AND EndHours >= 5.5 THEN 1 ELSE 0 END AS FiveThirtyAM,
                    CASE WHEN StartHours <= 6 AND EndHours >= 6 THEN 1 ELSE 0 END AS SixAM,
                    CASE WHEN StartHours <= 6.5 AND EndHours >= 6.5 THEN 1 ELSE 0 END AS SixThirtyAM, 
                    CASE WHEN StartHours <= 7 AND EndHours >= 7 THEN 1 ELSE 0 END AS SevenAM, 
                    CASE WHEN StartHours <= 7.5 AND EndHours >= 7.5 THEN 1 ELSE 0 END AS SevenThirtyAM,
                    CASE WHEN StartHours <= 8 AND EndHours >= 8 THEN 1 ELSE 0 END AS EightAM, 
                    CASE WHEN StartHours <= 8.5 AND EndHours >= 8.5 THEN 1 ELSE 0 END AS EightThirtyAM,
                    CASE WHEN StartHours <= 9 AND EndHours >= 9 THEN 1 ELSE 0 END AS NineAM, 
                    CASE WHEN StartHours <= 9.5 AND EndHours >= 9.5 THEN 1 ELSE 0 END AS NineThirtyAM,
                    CASE WHEN StartHours <= 10.0 AND EndHours >= 10.0 THEN 1 ELSE 0 END AS TenAM, 
                    CASE WHEN StartHours <= 10.5 AND EndHours >= 10.5 THEN 1 ELSE 0 END AS TenThirtyAM,         
                    CASE WHEN StartHours <= 11 AND EndHours >= 11 THEN 1 ELSE 0 END AS ElevenAM,
                    CASE WHEN StartHours <= 11.5 AND EndHours >= 11.5 THEN 1 ELSE 0 END AS ElevenThirtyAM,
                    CASE WHEN StartHours <= 12 AND EndHours >= 12 THEN 1 ELSE 0 END AS TwelvePM,
                    CASE WHEN StartHours <= 12.5 AND EndHours >= 12.5 THEN 1 ELSE 0 END AS TwelveThirtyPM, 
                    CASE WHEN StartHours <= 13 AND EndHours >= 13 THEN 1 ELSE 0 END AS OnePM,
                    CASE WHEN StartHours <= 13.5 AND EndHours >= 13.5 THEN 1 ELSE 0 END AS OneThirtyPM, 
                    CASE WHEN StartHours <= 14 AND EndHours >= 14 THEN 1 ELSE 0 END AS TwoPM, 
                    CASE WHEN StartHours <= 14.5 AND EndHours >= 14.5 THEN 1 ELSE 0 END AS TwoThirtyPM,
                    CASE WHEN StartHours <= 15 AND EndHours >= 15 THEN 1 ELSE 0 END AS ThreePM,
                    CASE WHEN StartHours <= 15.5 AND EndHours >= 15.5 THEN 1 ELSE 0 END AS ThreeThirtyPM, 
                    CASE WHEN StartHours <= 16 AND EndHours >= 16 THEN 1 ELSE 0 END AS FourPM, 
                    CASE WHEN StartHours <= 16.5 AND EndHours >= 16.5 THEN 1 ELSE 0 END AS FourThirtyPM,
                    CASE WHEN StartHours <= 17 AND EndHours >= 17 THEN 1 ELSE 0 END AS FivePM, 
                    CASE WHEN StartHours <= 17.5 AND EndHours >= 17.5 THEN 1 ELSE 0 END AS FiveThirtyPM,
                    CASE WHEN StartHours <= 18 AND EndHours >= 18 THEN 1 ELSE 0 END AS SixPM,
                    CASE WHEN StartHours <= 18.5 AND EndHours >= 18.5 THEN 1 ELSE 0 END AS SixThirtyPM, 
                    CASE WHEN StartHours <= 19 AND EndHours >= 19 THEN 1 ELSE 0 END AS SevenPM,
                    CASE WHEN StartHours <= 19.5 AND EndHours >= 19.5 THEN 1 ELSE 0 END AS SevenThirtyPM,
                    CASE WHEN StartHours <= 20 AND EndHours >= 20 THEN 1 ELSE 0 END AS EightPM,
                    CASE WHEN StartHours <= 20.5 AND EndHours >= 20.5 THEN 1 ELSE 0 END AS EightThirtyPM, 
                    CASE WHEN StartHours <= 21 AND EndHours >= 21 THEN 1 ELSE 0 END AS NinePM, 
                    CASE WHEN StartHours <= 21.5 AND EndHours >= 21.5 THEN 1 ELSE 0 END AS NineThirtyPM,
                    CASE WHEN StartHours <= 22 AND EndHours >= 22 THEN 1 ELSE 0 END AS TenPM, 
                    CASE WHEN StartHours <= 22.5 AND EndHours >= 22.5 THEN 1 ELSE 0 END AS TenThirtyPM,
                    CASE WHEN StartHours <= 23 AND EndHours >= 23 THEN 1 ELSE 0 END AS ElevenPM,
                    CASE WHEN StartHours <= 23.5 AND EndHours >= 23.5 THEN 1 ELSE 0 END AS ElevenThirtyPM
                FROM (
                        SELECT DisplayName, StartDate, EndDate, StartHours, EndHours
                        FROM (
                            SELECT DisplayName, 
                                CAST(FLOOR(CAST(DATEADD(hh, @prmOffSet, SL.SessionUTCStart) AS FLOAT)) AS DATETIME) AS StartDate, 
                                DATEADD(hh, @prmOffSet, SL.SessionUTCStart) as Start,
                                CAST(FLOOR(CAST(DATEADD(hh, @prmOffSet, ISNULL(SL.SessionUTCEnd,S.LastActivity)) AS FLOAT)) AS DATETIME) AS EndDate, 
                                DATEADD(hh, @prmOffSet, ISNULL(SL.SessionUTCEnd,S.LastActivity)) as [End],
                                DATEPART(hh, DATEADD(hh, @prmOffSet, SL.SessionUTCStart)) + CASE WHEN DATEPART(mi, DATEADD(hh, @prmOffSet, SL.SessionUTCStart))<30 THEN 0.0 ELSE 0.5 END AS StartHours, 
                                DATEPART(hh, DATEADD(hh, @prmOffSet, ISNULL(SL.SessionUTCEnd,S.LastActivity))) + CASE WHEN DATEPART(mi, DATEADD(hh, @prmOffSet, ISNULL(SL.SessionUTCEnd,S.LastActivity)))<30 THEN 0.0 ELSE 0.5 END AS EndHours
                            FROM tbSessionLog SL LEFT OUTER JOIN tbSessions S ON SL.SessionID=S.SessionID
                            WHERE (CAST(FLOOR(CAST(DATEADD(hh, @prmOffSet, SL.SessionUTCStart) AS FLOAT)) AS DATETIME) >= CAST(@prmStartDate AS DATETIME)) AND 
                                  (CAST(FLOOR(CAST(DATEADD(hh, @prmOffSet, SL.SessionUTCStart) AS FLOAT)) AS DATETIME) <= CAST(@prmEndDate AS DATETIME))) AS Sess
                        GROUP BY DisplayName, StartDate, EndDate, StartHours, EndHours) AS DtlSess) AS HourCount
        GROUP BY StartDate
) T1
UNPIVOT
  (col FOR ListofColumns IN ([12:00AM],[12:30AM],[1:00AM],[1:30AM],[2:00AM],[2:30AM],[3:00AM],[3:30AM],[4:00AM],[4:30AM],[5:00AM],[5:30AM],[6:00AM],[6:30AM],[7:00AM],[7:30AM],[8:00AM],[8:30AM],[9:00AM],[9:30AM],[10:00AM],[10:30AM],[11:00AM],[11:30AM],[12:00PM],[12:30PM],[1:00PM],[1:30PM],[2:00PM],[2:30PM],[3:00PM],[3:30PM],[4:00PM],[4:30PM],[5:00PM],[5:30PM],[6:00PM],[6:30PM],[7:00PM],[7:30PM],[8:00PM],[8:30PM],[9:00PM],[9:30PM],[10:00PM],[10:30PM],[11:00PM],[11:30PM]))
    AS unpivott) as T2
Group by StartDate 
```

# php - 适用于 PHP 5.4 x64 的 IMagick

> ID：15001302
> 
> 赞同：0
> 
> 时间：2013-02-21T11:37:39.803
> 
> 标签：php, imagick

我安装了 PHP 5.4.3 (x64, TS, VC9)，我需要使用 IMagick。

在我读到所有更高版本都是用 VC10 编译后，我安装了 ImageMagick 6.8.3，然后是 6.6.2。

我尝试了很多 DLL，例如：[http://valokuva.org/?page_id=50](http://valokuva.org/?page_id=50)，但每次我在 php.ini 中包含 php_imagick.dll 时，错误都是一样的：

> PHP 警告：PHP 启动：在第 0 行未知

请帮我找到一个合适的 DLL 或告诉我如何编译它以及它应该是哪个版本（PECL 源）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:22:58.747

尝试将 PHP 文件夹添加到路径并重新启动计算机。

如果这对您没有意义，请参阅： PATH 下的[http://en.wikipedia.org/wiki/Environment_variable](http://en.wikipedia.org/wiki/Environment_variable)

# python - 如何在某些情况下停止 python Apscheduler

> ID：15001304
> 
> 赞同：0
> 
> 时间：2013-02-21T11:37:48.833
> 
> 标签：python, apscheduler

实际上我正在尝试一个示例中的python APScheduler

```
d={'a':{'status':'n'},'b':{'status':'n'},'c':{'status':'y'}} 
```

我添加的调度程序如下

```
for k,v in d.items():
if d[k]['status']=='n':
    sched.add_interval_job(f,minutes=1)
    d[k]['status']='y' 
```

但是此调度程序每**1 分钟****启动**一次并调用函数**f**，如何**停止调度程序调用此函数，**如果它们**在 dict 中没有状态为“n”的**条目，以及如果它们是**状态为“n”的**条目，如何**继续此调度程序调用****字典 d。**

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T15:30:51.103

您可以`sched.unschedule_job(job_function.job)`根据[文档](http://pythonhosted.org/APScheduler/intervalschedule.html)取消安排作业。******

# php - 在 Windows 上安装 HTTP PECL 扩展

> ID：15001312
> 
> 赞同：0
> 
> 时间：2013-02-21T11:38:17.383
> 
> 标签：php, wamp

我尝试将 PECL [php_http](http://www.php.net/manual/en/http.install.php)扩展添加到我的 wamp 服务器。我觉得我做得很好：

1.  [从http://downloads.php.net/pierre/](http://downloads.php.net/pierre/)下载 DLL
2.  将 php_http.dll 放在`ext`文件夹中
3.  添加：`extension=php_http.dll`在 php.ini
4.  重启服务

没有任何反应，没有添加扩展。

我想确定我在正确的 php.ini 中，所以我取消了一些扩展的注释并重新启动了服务器......它们出现了。

不...只是这个我特别添加了自己从未显示过。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T00:20:15.090

我有 wamp 2.2，如果你左键单击 wamp 图标，将鼠标悬停在 php->php 扩展上并确保有一个“php_http”的复选标记，这将启用 pecl，就像它为我所做的那样。

# git - sublime text 2 - git 插件

> ID：15001319
> 
> 赞同：2
> 
> 时间：2013-02-21T11:38:54.783
> 
> 标签：git, sublimetext2

我在 Windows 7 上购买并安装了 Sublime text 2 我还安装了 Git 插件

现在，我在暂存索引中添加了一个文件，它工作了...... git status 也工作了......另一方面， git commit 没有：

这就是我得到的：

```
*** Please tell me who you are.

Run

git config --global user.email "you@example.com"
git config --global user.name "Your Name"

to set your account's default identity.
Omit --global to set the identity only in this repository.

fatal: unable to auto-detect email address (got 'me@me-PC.(none)') 
```

我不知道如何解决这个问题。

谢谢， 稀有

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:41:18.867

您可以在 git-cmd 会话或 git bash 会话中键入这些命令。

Git 需要知道作者和提交者的姓名和电子邮件。

如[`kemayo/sublime-text-git`第 246 期](https://github.com/kemayo/sublime-text-git/issues/246#issuecomment-152734751)所述：

```
git config --global user.email "you@example.com"
git config --global user.name "Your Name" 
```

如果你安装了 msysgit，你会发现一个 git-cmd.bat 或一个 git bash 会话的快捷方式，你可以在其中输入这些`git config`命令。

*但是*，您还需要确保 Git 插件知道您`HOME`的位置，`HOME`而不是默认情况下由 Windows 设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:08:26.813

你把邮箱设置成什么了？

> 致命：无法自动检测电子邮件地址（得到 'me@me-PC.(none)'）

根据错误消息，电子邮件是；**我@我-PC。** 从外观上看，sublime 插件在解析无效电子邮件时存在问题。

仔细检查您的电子邮件：

```
git config -l 
```

# android - Android Foursquare API - 如何在应用内注册 Foursquare 用户

> ID：15001322
> 
> 赞同：0
> 
> 时间：2013-02-21T11:39:05.010
> 
> 标签：android, api, authentication, foursquare

我正在开发一个 android 应用程序，我需要用户登录到foursquare 帐户。我计划通过身份验证网址来执行此操作。

我按照oauth示例遵循示例： [https ://github.com/foursquare/android-oauth-example](https://github.com/foursquare/android-oauth-example)

但是，如果他们没有帐户，我是否可以在应用内注册用户到 Foursquare？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:23:20.453

当您使用嵌入式 WebView 模式时，如果您的用户还没有帐户，则嵌入式 Foursquare 页面可以选择注册 Foursquare。

# apache - 如何将文件夹 /abc 代理传递到不同端口上的域

> ID：15001323
> 
> 赞同：0
> 
> 时间：2013-02-21T11:39:07.030
> 
> 标签：apache, jboss, vhosts

不知道如何正确定义它，但问题是......

我有一种情况，我需要在 apache 'vhost_ssl.conf' 上代理传递目录（/abc），即

`/abc https://1.1.1.1:4443/abc` （在主机中运行的第一个 jboss 服务器）

`/abc https://1.1.1.1:2308/abc` （端口 2308 映射到 VM IP:4443，在 Vmware 中运行的第二个 jboss 服务器）

现在我正在尝试代理传递 URL：-

`https://mysite.com/server1/abc` -> 哪个代理`https://1.1.1.1:4443/abc`

`https://mysite.com/server2/abc`-> 哪个代理`https://1.1.1.1:2308/abc`

在这里，我希望虚拟文件夹 server1 和 server2 将请求分开。任何建议，或者可能通过工作将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:22:57.980

为此，您需要在 apache 中使用 mod_rewrite 模块。

请参阅以下链接以获取**mod_rewrite**

[https://httpd.apache.org/docs/current/mod/mod_rewrite.html](https://httpd.apache.org/docs/current/mod/mod_rewrite.html)

重写规则将类似于以下几行。

```
<VirtualHost Host_Address:443>
    RewriteEngine On
    RewriteRule ^/server1/abc$ https://1.1.1.1:4443/abc
    RewriteRule ^/server2/abc$ https://1.1.1.1:2308/abc

    -----------
    -----------
</VirtualHost> 
```

这可以添加到**httpd-vhosts.conf**文件中希望这对你有帮助。

# eclipse - Eclipse：如何以循环方式在 TABS 之间移动

> ID：15001328
> 
> 赞同：1
> 
> 时间：2013-02-21T11:39:26.023
> 
> 标签：eclipse, tabs

我正在使用`CTRL`+ `Page Up`OR `CTRL`+在*TABS*`Page Down`之间移动。

 *但是这样做的问题是，当您到达最后一个*TAB*时，您需要遍历所有*TABS*才能再次到达第一个 TAB。

我知道我可以使用 `CTRL`+ `E`OR `CTRL`+`F6`但这不如`CTRL`+快`Page Up`。

有没有办法让`CTRL`+ `Page Up`/ `CTRL`+`Page Down`以循环方式工作？（例如在 chrome 中的*TABS之间移动）*

![在此处输入图像描述](../Images/378096d23231af01feff9e6a07725f91.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:14:42.330

我使用 Juno SR1，它使用 Ctrl + Page Down 进行循环。

您使用哪个版本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:37:19.853

**Eclipse Indigo**似乎不支持此功能。我下载了**Indigo**，它默认在那里工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-28T03:15:18.747

Ctrl+page up/down 对我来说很好。尝试更新你的 Eclipse :)*

# hibernate - 在hibernate中使用单个HQL查询插入差异表？

> ID：15001330
> 
> 赞同：0
> 
> 时间：2013-02-21T11:39:40.767
> 
> 标签：hibernate, reflection

在hibernate中使用单个HQL查询插入差异表？我认为它可以使用反射 API 来完成。表示动态调用方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T06:39:13.513

经过一番谷歌搜索。

我使用反射 API 得到它。

您可以从字段名称中获取字段名称和值。

然后你可以设置这个 POJO 类的值，并调用默认的保存方法将数据插入数据库。

你明白我的意思了吗？

# aem - 在 CQ5 中获取页面作者

> ID：15001331
> 
> 赞同：3
> 
> 时间：2013-02-21T11:39:47.680
> 
> 标签：aem

有没有办法在 CQ5 中获取当前页面作者的电子邮件地址和其他个人资料详细信息？

我需要在我的页面上发布它。我可以把它做成一个文本组件，让作者自己添加它，但是从后端显示它会很酷..

目前，我只能使用`Page.LastModifiedBy()`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T13:41:36.583

您可以通过页面 jcr:content 节点上的 jcr:createdBy 属性[获取作者的用户名。](http://dev.day.com/docs/en/cq/current/javadoc/com/day/cq/commons/jcr/JcrConstants.html#JCR_CREATED_BY)

然后，您可以通过 UserManager 查找电子邮件地址，您可以[从 JcrSession 对象](http://dev.day.com/docs/en/cq/current/developing/sling-adapters.html)中对其进行调整。这个页面有一些[关于加载用户信息的附加信息](http://forums.adobe.com/message/4549847)。

在 JSP 中，您可以执行以下操作：

```
<%@page pageEncoding="UTF-8" contentType="text/html; charset=UTF-8" import="org.apache.jackrabbit.api.security.user.*, com.day.cq.commons.jcr.*" %>
...
<%
 String createdBy = properties.get(JcrConstants.JCR_CREATED_BY, String.class);

 UserManager userManager = resourceResolver.adaptTo(UserManager.class);
 Authorizable authorizable = userManager.getAuthorizable(createdBy);
  if (authorizable.hasProperty("profile/familyName")) {
        String familyName = authorizable.getProperty("profile/familyName")[0].getString();        
  }
%> 
```

# php - 使用php将文本框的名称和值存储到数据库

> ID：15001335
> 
> 赞同：-2
> 
> 时间：2013-02-21T11:40:02.457
> 
> 标签：php, javascript, mysql

我正在尝试将文本框的名称和值保存到数据库中。

我有名称属性为 text1、text2、text3 的文本框，值是用户在每个文本框中输入的值。

```
 <form action='save.php' method='post' name='form1'>
<label>Text1</label> <input type="text" name="Text1"  />

<label>Text2</label> <input type="text" name="Text2"  />

<label>Text3</label> <input type="text" name="Text3"  />
<input type="submit" name="save"  value="save" /> 
</form>

i have database table like this,
ID is Auto increment.  

ID     name     value
1      text1    xyz
2      text2    abc
2      text3    pqr 
```

需要一些帮助才能启动。

我如何使用 php.can 我需要为此使用 javscript 来做到这一点。

请提出任何建议，以便我可以从这个开始。

如果有任何对我有帮助以实现我的目标的链接，请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:06:17.230

您可以在 w3schools.com 上一步一步轻松地学习 PHP

这是链接：[w3schools.com](http://www.w3schools.com/php/default.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:48:29.190

您需要将表单标签更改为：

```
<form method="post" action="yourphppage.php"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:53:51.887

因为您正在启动，请执行以下操作：

将您的表单标签更改为

```
 <form action='save.php' method='post' name='form1'> 
```

创建一个与表单的 action 属性相同的新文件 save.php。

现在添加这是 save.php

```
 $text1=$_POST['Text1'];
      $text2=$_POST['Text2'];
      $text3=$_POST['Text3']; 
```

用 mysql 创建一个数据库连接，然后是：

```
 $sql=mysql_query('insert into tablename(name, value)values($text1,$text2)'); 
```

这只是一个想法。希望能帮助到你

# php - php mail() 经常无法到达地址

> ID：15001339
> 
> 赞同：0
> 
> 时间：2013-02-21T11:40:11.677
> 
> 标签：php, wordpress, gmail

这是我的问题，本质上 - 我设置了一个 wordpress contact.php 模板，它将提交表单并将其发送到我的 gmail。但是，问题是它到达电子邮件的时间不到一半，我必须收到其余的电子邮件。

与此相关的下一个问题是我没有设置一个文件来记录发出的消息。我的问题是，基本上， - 是否有可能以任何方式检索尚未记录的已发送电子邮件？通常是否有托管服务提供商维护的电子邮件缓存？我拥有的唯一信息是 IP 地址，在这种情况下几乎没有任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:07:51.817

可能被您的垃圾邮件过滤器击中。PHP 的`mail()`功能很容易出现这种情况，因为邮件是从 Web 服务器发送的，该服务器通常不配置 SPL 等，接收邮件系统寻求帮助他们过滤垃圾邮件。

我认为我无法回答如何找回已发送的丢失消息的问题——只有您的托管服务提供商才能真正帮助您，但我的猜测是他们无能为力。他们不太可能在必要时保留出站电子邮件。如果你幸运的话，他们可能有电子邮件事件的日志，但即使这样也可能没有任何对你有用的数据。

不过有一个问题：您检查过您的 gmail 垃圾邮件箱吗？我不是 gmail 用户，但大多数邮件系统确实保留了一个带有过滤邮件的垃圾邮件箱，以便用户可以检索被错误标记为垃圾邮件的电子邮件。如果gmail不允许这样做，我会感到惊讶，如果那是您的邮件所在的地方，那么问题就解决了。

[对于未来，我建议您改用像phpMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)这样的不错的第三方库来处理您的邮件。

phpMailer 对您的优势尤其在于它可以配置为通过 gmail 发送邮件，这意味着您可以从自己的帐户将其发送给自己。就垃圾邮件过滤而言，这应该是防弹的。它还应该更快地传递，因为邮件将直接发送到谷歌的服务器，而无需先在互联网上反弹。

phpMailer 还将使您的邮件代码比使用原始`mail()`函数更简洁，并且它允许更多高级功能，如附件，而无需编写大量代码。

希望有帮助。

# javascript - Javascript - 检查是 Web App 还是 Android App

> ID：15001340
> 
> 赞同：3
> 
> 时间：2013-02-21T11:40:13.217
> 
> 标签：javascript, android, json, cordova

我正在使用 Android 的 PhoneGap 构建一个应用程序，该应用程序也可以上传到服务器并用作网站。

我遇到的问题是，在登录页面上，我有一个对 php 页面的 JSON 调用来检查登录凭据，这仅在用户输入了**包括**www. 在内的完整 url 时才有效，否则它返回一个 json 交叉-域错误。

我使用下面添加“www”的代码解决了这个问题。如果没有找到。

```
if (document.URL.toLowerCase().indexOf("www.") == -1) {
        var new_url = document.URL.slice(0, 7) + "www." + document.URL.slice(7);
        window.location = new_url;
} 
```

我需要检查用户是否将应用程序用作网站并调用上面的代码，或者如果他们将其用作 Android 应用程序，请跳过上面的代码。目前，Android 应用程序在遇到此代码时会尝试重定向，从而导致网络错误。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:50:44.513

你可以使用这样的`navigator`对象来做到这一点：

将上面的代码包装在`if()`块中，

```
var ua = navigator.userAgent;
if(!(ua.match(/Android/i))){
   //this code will run only when there is any non-android client.
} 
```

# deployment - Jboss 7战争部署失败

> ID：15001342
> 
> 赞同：31
> 
> 时间：2013-02-21T11:40:14.680
> 
> 标签：deployment, jboss, war

Jboss 7 战争部署失败，我在日志中收到以下错误消息。

```
ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015052: Did not receive a response to the deployment operation within the allowed timeout period [60 seconds]. Check the server configuration file and the server logs to find more about the status of the deployment 
```

我尝试重新启动 JBoss 服务器，我以前从未见过，它之前工作正常。我用谷歌搜索了这个问题的解决方案和原因，但找不到任何真正有用的东西，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-03T12:12:56.257

好吧，我尝试删除日志文件，它在开始时有所帮助，但后来我又遇到了错误。正确的解决方案如下：

转到`Jboss_installation_dir\standalone\configuration`并找到该文件`standalone.xml`。更改以下行：

```
<subsystem xmlns="urn:jboss:domain:deployment-scanner:1.0">
    <deployment-scanner scan-interval="5000" relative-to="jboss.server.base.dir" path="deployments"  />
</subsystem> 
```

进入：

```
<subsystem xmlns="urn:jboss:domain:deployment-scanner:1.0">
    <deployment-scanner scan-interval="5000" relative-to="jboss.server.base.dir" path="deployments" deployment-timeout="1000" />
</subsystem> 
```

那么它应该可以正常工作。

**注意：**`deployment-timeout`以秒为单位

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-06T10:14:59.997

这是由于磁盘空间不足导致的，清除了一些不需要的日志文件和其他临时文件以解决此问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-05T10:01:54.783

在处理 JBoss 7 (6.1+ EAP) 时，请记住仅在服务器未运行时编辑 XML 设置 - 否则它们将被覆盖并且不会发生更改。

根据[文档](https://docs.jboss.org/author/display/AS7/Deployment+Scanner+configuration)，`Deployment-timeout`以秒为单位指定，`Scan-interval`时间以毫秒为单位指定。

# symfony - symfony 断言正则表达式

> ID：15001346
> 
> 赞同：0
> 
> 时间：2013-02-21T11:40:21.093
> 
> 标签：symfony

有人知道如何制作正则表达式以不允许用户在字段中输入数字吗？这似乎是：

```
/**
  * @Assert\Regex("/^\w+/")
 */ 
```

问候。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:32:26.257

也许这项工作。（未测试）

```
 /**  
   * @Assert\Regex("/^[^0-9]+$/") 
   */ 
```

# .net - 某些机器上的 JSON 字符串无效

> ID：15001347
> 
> 赞同：3
> 
> 时间：2013-02-21T11:40:24.310
> 
> 标签：.net, httprequest, arcgis, restsharp

我编写了一个非常基本的快速和肮脏的 winforms 应用程序，它使用 restsharp 从（未经身份验证的）arcGIS 服务获取响应并将它们显示在树视图中。效果很好。

对 arcGIS 服务的请求中的一个参数允许我[指定响应的格式](http://resources.arcgis.com/en/help/rest/apiref/formattypes.html)，可以选择获取 JSON（这是我想要的）或完整的 HTML 文档（这是为了在浏览器上下文中查看） . 我将值传递给它以返回 JSON。

但是，*在**某些**客户端机器上，响应返回为 HTML*，无论如何，因此我收到反序列化错误（“无效的 JSON 字符串”）。我不知道为什么；目前还没有我能辨别的模式。

我已尝试确保使用请求标头指定响应格式。我尝试刷新客户端上的浏览器缓存，设置无缓存标头，甚至为每个请求传递一个带有新 guid 的虚拟参数，以防问题是用户之前在arcGIS 服务通过其浏览器 GUI。

这些机器正在运行 win7，我使用的是 .net 4 客户端配置文件。我不知道从哪里开始尝试诊断为什么有些机器工作而其他机器不工作。感谢一些指导。

# ruby-on-rails - Rails 放置 Activemodel::validators 的位置

> ID：15001351
> 
> 赞同：3
> 
> 时间：2013-02-21T11:41:01.153
> 
> 标签：ruby-on-rails, validation, activemodel

这是一个两部分的问题。

第一部分，如果我正在为其编写验证的模型继承自我`ActiveRecord::Base`是否需要`include ActiveModel::Validations`在该类中？Rails的[API](http://api.rubyonrails.org/classes/ActiveModel/Validator.html)没有说，但在[yehudakatz](http://yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/)博客中似乎暗示了这一点？

第二部分是放置这些验证器文件的最佳位置？在助手下或作为新模型或在库中？

我当前的验证器看起来像这样

```
class GenderValidator < ActiveModel::validator
  def validate(record)
    cred = /(\d{6})(\d{4})(\d{1})(\d{2})/.match(record.id_number.to_s) #breaks up the id into the relevent sections namely birthdate, gender, nationality, validator.
    unless cred[0][/\d{13}/] #checks to see if the id is a valid length of numbers if it isnt then skip the validation of gender
      return true
    else
      birthdate = cred[1] #returns a 6 digit string 'yymmdd'
      parsed_gender = cred[2] #returns a 4 digit string '0001-4999:female 5000-9999:male'
      nationality = cred[3] # should return either a 1 or a 0 1 if the person is foreign or 0 if the person is southafrican

      validate_gender(parsed_gender, record)
    end
  end

  private
  def validate_gender(parsed_gender, record)
    calculate_gender = (parsed_gender <= 4999 ? :female : :male)
      unless employee.gender == calculate_gender
        employee.errors[:gender] << "Your id indicates you have entered the wrong gender"
      end
  end
end 
```

每个人的有效身份证号码是可选的，但如果他们确实指定了它，它应该检查性别是否正确。

如果我将它保持在与员工模型相同的模型中，那么我会收到此错误

```
ActionController::RoutingError (uninitialized constant Employee::GenderValidator):
app/models/employee.rb:25:in `<class:Employee>'
app/models/employee.rb:1:in `<top (required)>'
lib/role_requirement_system.rb:19:in `inherited'
app/controllers/employees_controller.rb:1:in `<top (required)>'
librato-rails (0.8.1) lib/librato/rack/middleware.rb:12:in `call' 
```

所以我认为它们不能在同一个文件中。验证的最佳实践是什么？我看了所有的 Rails 演员表，读过一些博客，但我还是个新手。

编辑

在我的模型中，我包括这个类

```
include ActiveModel::Validations 
```

我的验证看起来像这样

```
validates_presence_of :name, :position, :gender
validate :instance_validations, :on => :create

def instance_validations
  validates_with GenderValidator    
end 
```

以防万一你也想看到，谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T16:09:05.557

您不需要包含 ActiveModel::Validations

我更喜欢将验证对象保留在模型文件夹中。

所以对于模型 Gender 你有一个文件gender.rb

对于验证器 GenderValidator，您有文件 gender_validator.rb

因此，这两个文件一起位于模型文件夹中。

这是我的时事通讯模型的验证器

```
class NewsletterValidator < ActiveModel::Validator
  def validate(record)
      if record.send_test_email
        if test_email_address.blank?
          record.errors[:test_email_address] << "Test email address is blank"
        end
        if record.send_email_to_subscribers
          record.errors[:send_test_email] << "You cannot send a test and send to subscribers at the same time"
        end
      end

  end
end 
```

在我的时事通讯模型中，我只是有

```
 validates_with NewsletterValidator 
```

您的示例中有拼写错误

你有

```
class GenderValidator < ActiveModel::validator 
```

它应该是

```
class GenderValidator < ActiveModel::Validator 
```

注意大写V

# javascript - 与同一列表中的对象连接

> ID：15001352
> 
> 赞同：2
> 
> 时间：2013-02-21T11:41:01.327
> 
> 标签：javascript, object, concatenation

我想将一个对象的内容与另一个对象连接，但在同一个列表/命令中：

```
var MyVar = {
    options: {
        option1: "foo",
        option2: "bar",
        option3: "It's not kung "+options.option1+", but kung fu",
    }
} 
```

这不起作用，关于我在这里做错了什么的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:48:29.030

options.option1 在您使用它时尚未定义。

```
var MyVar = {
  options: {
    option1: "foo",
    option2: "bar"
  }
};

MyVar.options.option3 = "It's not kung "+MyVar.options.option1+", but kung fu"; 
```

应该按预期工作。

请注意，这不是动态的（选项 3 不会随着选项 1 的更改而改变）。如果你想要动态行为，你可以在这里找到解决方案：[对象文字声明中的自引用](https://stackoverflow.com/questions/4616202/self-references-in-object-literal-declarations)

# php - 从变量中删除字符

> ID：15001353
> 
> 赞同：3
> 
> 时间：2013-02-21T11:41:02.293
> 
> 标签：php

我在变量中有以下内容，`|MyString|`

我想剥离前导`|`和结尾`|`返回`MyString`

这样做的最快和非密集方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T11:41:58.543

最简单的方法可能是

```
$result = trim($input, '|'); 
```

[http://docs.php.net/trim](http://docs.php.net/trim)

例如

```
<?php
$in = '|MyString|';
$result = trim($in, '|');

echo $result; 
```

印刷`MyString`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:49:32.700

签出 PHP [http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)中的 str_replace 函数， 这应该删除所有“|” 人物：

`str_replace('|','',$myString)`

您可以使用正则表达式仅删除第一个和最后一个 '|' 或者使用 String trim() 函数也可以工作： [http ://www.php.net/manual/en/function.trim.php](http://www.php.net/manual/en/function.trim.php)

所以，像这样：

```
$trimmedMyString = trim($myString, "|"); 
```

总之值得一试。

# c# - Web API 服务在 IIS 服务器上部署后未运行

> ID：15001354
> 
> 赞同：2
> 
> 时间：2013-02-21T11:41:02.593
> 
> 标签：c#, asp.net, iis, asp.net-mvc-4, iis-7.5

我有一个 Web Api 应用程序。当我在本地主机上运行此应用程序时，它运行良好..例如：-`[http://localhost:5034/].`

它给出了我在root.config（索引页面）中设置的默认页面，之后我试图通过这个URL访问这个服务的一个动作，`[http://localhost:5034/api/Products]` 这个动作在localhost中成功地以json的形式给出响应..

但是，当我在 IIS 7.5 上部署此服务时，我部署了此服务，然后当我尝试通过此 URL 访问应用程序`[http://localhost/WebAPIApplication/]`（此 URL 已部署应用程序 URL）时，它会提供一个目录列表，其中包含我设置的默认页面`root.config`

```
2/21/2013  3:17 PM        <dir> bin 
2/21/2013  3:17 PM        <dir> Content 
2/19/2013  3:36 PM        32038 favicon.ico 
2/19/2013  3:36 PM          112 Global.asax 
2/21/2013  3:17 PM        <dir> Images 
2/19/2013  3:36 PM         1431 packages.config 
2/21/2013  3:17 PM        <dir> Scripts 
2/21/2013  3:17 PM        <dir> Views 
2/21/2013  3:18 PM         5566 Web.config 
```

为什么我没有得到默认页面？并且当我尝试通过此 URL 访问此服务的操作时，`[http://localhost/WebAPIApplication/api/products]`它会给出错误：

> HTTP 错误 404.0 - 未找到

您要查找的资源已被删除、名称已更改或暂时不可用。

我怎样才能解决这两个问题？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:04:18.880

确保在 IIS 中配置 Web API 应用程序以使用 .NET 4 ASP.NET 应用程序池。

# java - 防止 JWindow 始终保持在顶部

> ID：15001356
> 
> 赞同：0
> 
> 时间：2013-02-21T11:41:06.553
> 
> 标签：java, swing, window, jframe, always-on-top

我创建了一个`JFrame`和一个`JWindow`。我的问题是，当我单击另一个应用程序时，我的`JFrame`通行证在应用程序后面，而不是我的通行证`JWindow`始终在最前面。我试图打电话`setAlwaysOnTop(false)`给我`JWindow`，但这并没有改变任何事情。我希望`JWindow`“跟随”`JFrame.`

这是我的测试代码：

```
public class WindowAlwaysOnTop {
    public static void main(String[] args) {
        final JFrame frame = new JFrame();
        frame.setSize(new Dimension(400, 400));
        final JWindow window = new JWindow(frame);
        window.setAlwaysOnTop(false);
        window.setSize(new Dimension(200, 200));
        frame.setVisible(true);
        window.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:45:18.120

不要使用 JWindow。

而是使用 JDialog。只需确保在创建对话框时将框架指定为父级。如果您不喜欢标题栏，可以使用未修饰的对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:59:17.513

JRE 1.6.0_32 出现此问题，JDK7 解决了此问题。

# xpath - XPath 指向表中特定元素旁边的元素

> ID：15001358
> 
> 赞同：2
> 
> 时间：2013-02-21T11:41:12.353
> 
> 标签：xpath

我有这样的 HTML 结构：

```
<table>
    <tr>
        <td>some value 1</td>
        <td>unique value 1</td>
        <td>needed value 1</td>
        <td>some value 1</td>
    </tr>

    <tr>
        <td>some value 2</td>
        <td>unique value 2</td>
        <td>needed value 2</td>
        <td>some value 2</td>
    </tr>

    <tr>
        <td>some value 3</td>
        <td>unique value 3</td>
        <td>needed value 3</td>
        <td>some value 3</td>
    </tr>

</table> 
```

我使用 Selenium，需要通过使用 XPath 搜索这个唯一值来指向唯一值旁边的 td。

我找到了解决方案：找到具有所需唯一值的 tr，然后计算 td 的前兄弟并使用 position()=count(preceding-sibling)+2

```
//tr[./td[text()='Unique value 2']]/td[position()=count(//tr[./td[text()='Unique value 2']]/td[text()='Unique value 2']//preceding-sibling::td)+2] 
```

有没有更简单的方法？问题是表的结构可能会随时间改变，但所需的值总是在唯一的旁边

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:49:42.727

而不是使用`preceding-sibling`，使用`following-sibling`：

```
//td[text()="unique value 2"]/following-sibling::td[1] 
```

# ios - 在 iOS 上强制更新 Amazon CloudFront

> ID：15001360
> 
> 赞同：-2
> 
> 时间：2013-02-21T11:41:20.267
> 
> 标签：ios, amazon-web-services, amazon-s3, amazon-cloudfront

我将 Amazon S3 与 Amazon CloudFront 结合使用，基本上在我的应用程序中，我有一种更新 S3 对象的方法，基本上我使用 CloudFront 获取 S3 对象，我对数据进行了更改并在相同的密钥下重新上传它 - - 基本上替换/更新文件/对象。

但是，CloudFront 似乎没有与 S3 一起更新（确实如此，但我的用户没有一整天的时间），有没有办法强制 CloudFront 内容更新？显然您可以使其无效，是否有 iOS SDK 方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T17:20:29.507

我不知道有没有办法通过 iOS SDK 发出 CloudFront 失效请求。您可能需要构建自己的方法来制定针对 AWS API 的请求。

但是，我建议您采取另一种方法。失效请求是昂贵的操作（相对于其他 Cloudfront 成本）。您可能不希望让您的用户能够通过应用程序向 CloudFront 发起无限量的无效请求。您还将遇到对可以拥有的并发无效请求数量的限制。最好的办法是实际实施文件名版本控制方案，以便您可以以编程方式为每个修订更改文件名。然后，您将在每个修订版中引用 Cloudfront 中的新 URL，从而无需等待缓存刷新或执行失效。这也将导致图像的更即时响应可用性，因为无效请求可能需要一段时间来处理。

请注意 CloudFront 常见问题解答中的以下内容：

> 问：我可以提出的无效请求数量是否有限制？您可以无效的文件总数没有限制；但是，您发出的每个失效请求最多可以包含 1,000 个文件。此外，在任何给定时间，您只能有 3 个正在进行的无效请求。如果您超过此限制，则进一步的无效请求将收到错误响应，直到较早的请求之一完成。您应该只在意外情况下使用失效；如果您事先知道您的文件需要经常从缓存中删除，建议您为文件实施版本控制系统和/或设置较短的有效期。

# php - PHP PDO - 如何从三个表中输出结果

> ID：15001367
> 
> 赞同：0
> 
> 时间：2013-02-21T11:41:54.540
> 
> 标签：php, database, pdo

我有一个正在构建的汽车预订系统数据库。我有 3 张桌子：

车表：

```
ID     | car_make | car_name
1      | Ford     | Focus
2      | BMW      | Z3
3      | Audi     | A5 
```

预订表：

```
booking_ID  | booking_time | total_cost | etc..
125674      | 2013-02-02   | 91.55     
887463      | 2013-01-19   | 52.00     
209930      | 2013-01-11   | 23.99 
```

预订表：

```
ID     | booking_ID | car_ID
1      | 125674     | 2
2      | 887463     | 2
3      | 209930     | 1 
```

因此，reservation_table 将汽车与预订联系起来。现在我想在表格中为用户输出以下结果：

```
booking_ID | booking_time | total_cost | car_ID | car_make | car_model 
```

我如何输出结果，到目前为止，我几乎可以正常工作：

```
$query = " 
SELECT 
    booking_ID, 
    total_cost, 
    booking_time, 
    customer_ID,
    car_ID
FROM 
    bookings_table as bb,
    reservation_table as br 
WHERE 
    bb.booking_ID = br.booking_ID AND
    payment_success=true   
ORDER BY 
    booking_ID desc 
LIMIT 
    10
";

try { 
    $stmt = DB::get()->prepare($query); 
    $stmt->execute(); 

    $rows = $stmt->fetchAll();
}  
catch(PDOException $ex) { 
    // Failed 
} 

foreach($rows as $row):
    <td>'.$row['booking_ID'].'</td>
    etc...
endforeach; 
```

显示如下：

```
booking_ID | booking_time | total_cost | car_ID | car_make | car_model 
125674     | 2013-02-02   | 91.55      | 2      |          | 
```

所以我可以从reservation_table 中获取car_ID，但我不知道如何通过从reservation_table 中获取car_ID 来提取car_make/model。

# html - 尝试 HTML 视频标签，没有任何反应

> ID：15001371
> 
> 赞同：0
> 
> 时间：2013-02-21T11:42:07.327
> 
> 标签：html, web, path, html5-video

好的，所以我正在尝试 HTML5，看看使用视频标签是多么容易。

结果并非如此。

```
<html>
    <head>
    </head>
    <body>
        <video id="vid" poster="Rick-Roll3.png" width="640" height="480" controls autoplay>
            <source src="rick.webm" type="video/webm" />
        </video>
    </body>
</html> 
```

我已经写出了上面的文件并保存为 .html 文件。但是，由于某种原因，它不起作用。不会播放任何视频。

但是，如果我使用这个源而不是它指向的视频播放

```
<source src="http://v2v.cc/~j/theora_testsuite/320x240.ogg" type="video/ogg" /> 
```

我知道文件 rick.webm 位于服务器上，与 html 文件位于同一文件夹中。我的 src 路径有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:20:26.870

Web 浏览器使用部分范围的 HTTP 请求（对于部分内容应返回代码 206）来下载视频元素中的源。您似乎正在运行本地网络服务器或基于您的标题图片的等效服务器，因此您使用的服务器很可能不正确支持此类请求，而托管外部视频的服务器则支持。

我个人使用一个简单的[Express](http://expressjs.com/)（用于[Node.js](http://nodejs.org/)）静态文件服务器进行简单测试，它支持必要的范围请求就好了。字面意思就是这么简单：

```
var express = require("express"),
    app = express();

app.use(express.logger('dev'));
app.use(express.static(__dirname+"/public"));

app.listen(3000);
console.log("Listening on port 3000"); 
```

使用 node 运行它，它将提供公共文件夹（及其所有子文件夹）的内容`http://localhost:3000/`。

# asp.net - 向 asp.net web api 控制器发送多部分/混合 http 请求

> ID：15001376
> 
> 赞同：4
> 
> 时间：2013-02-21T11:42:22.353
> 
> 标签：asp.net, asp.net-web-api, asp.net-web-api-routing

我想向 asp.net web api 控制器发送一个多部分/混合 http 请求 ($batch)，如下所示：

```
--batch_fb0c-6847-2810
Content-Type: multipart/mixed; boundary=changeset_08b4-5b66-0d79

--changeset_08b4-5b66-0d79
Content-Type: application/http
Content-Transfer-Encoding: binary

POST People HTTP/1.1
Content-Id: 1
Accept: application/atomsvc+xml;q=0.8, application/json;odata=fullmetadata;q=0.7,                 application/json;q=0.5, */*;q=0.1
DataServiceVersion: 1.0
Content-Type: application/json
MaxDataServiceVersion: 3.0

{"Id":1,"Task":"1","DueDate":"2013-02-    21T11:34:06.247","Completed":false,"University":1,"Degree":1}
--changeset_08b4-5b66-0d79
Content-Type: application/http
Content-Transfer-Encoding: binary

POST People HTTP/1.1
Content-Id: 2
Accept: application/atomsvc+xml;q=0.8, application/json;odata=fullmetadata;q=0.7,     application/json;q=0.5, */*;q=0.1
DataServiceVersion: 1.0
Content-Type: application/json
MaxDataServiceVersion: 3.0

{"Id":4,"Task":"2","DueDate":"2013-02-21T11:34:06.247","Completed":false,"University":4,"Degree":4}

--changeset_08b4-5b66-0d79--

--batch_fb0c-6847-2810-- 
```

问题是我的请求没有路由到我的控制器中的正确操作，有没有解决方案来解决这个问题？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T02:34:18.447

之前的答案已经过时了。批处理支持已添加到 Web API 项目，完整的文档在这里：

[https://aspnetwebstack.codeplex.com/wikipage?title=Web+API+Request+Batching](https://aspnetwebstack.codeplex.com/wikipage?title=Web+API+Request+Batching)

# visual-studio-2012 - 在 VS2012 中添加 NuGet 包作为项目引用的最佳方法？

> ID：15001377
> 
> 赞同：61
> 
> 时间：2013-02-21T11:42:25.863
> 
> 标签：visual-studio-2012, nuget

行。非常快速的问题，我可能只是很厚。

如果您右键单击项目的“引用”文件夹，然后单击“管理 NuGet 包”，则可以安装包，您单击的项目会自动引用它们。但后来我想在同一个解决方案中添加对其他项目的相同引用。如果您重复前面但单击另一个项目唯一的选择是卸载包（因为它已经安装），添加现有（已安装）NuGet 包作为项目参考的正确方法是什么？我是否要使用普通对话框和“浏览”将引用添加到包文件夹中的 dll 中？使用一种方法添加第一个引用，然后使用另一种方法添加后续引用？这似乎不对。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-02-21T12:11:22.167

您可以通过以下方式使用`Manage NuGet packages for Solution...`：

*   右键单击解决方案
*   `Tools > Library Package Manager > Manage NuGet packages for Solution`

然后您可以选择在哪些项目中安装包，如下面的屏幕截图所示： ![在此处输入图像描述](../Images/4bbf779d068ee8ecc828283c76ca6cfd.png) 此外，您可以使用相同的`Manage NuGet packages for Solution...`. ![在此处输入图像描述](../Images/22b408d67aa9e5f71ce1436e39e63c62.png)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-09-04T00:25:36.947

这里的另一个答案对我没有帮助。这就是我所做的，我不知道还有其他方法可以做到这一点。我正在使用 VS 2013。

*   我在包管理器控制台中安装了包，例如 `PM> Install-Package Newtonsoft.Json`
*   在解决方案资源管理器中，右键单击引用，选择添加引用
*   单击浏览，然后导航到解决方案文件夹下的包目录中的 dll。

这为项目的引用添加了一个相对路径，因此它应该与其他人一起将代码从源代码管理中获取到不同的目录中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-13T21:21:44.030

我遇到过同样的问题。**kristianp**发布的解决方案按预期工作，但是在处理大量包时可能有点麻烦。对我有用的解决方案只是在记事本中编辑**myProjectName.csproj**文件，然后从另一个项目中复制粘贴引用，如下所示：

```
...

<ItemGroup>
    <Reference Include="Microsoft.AspNet.SignalR.Core">
      <HintPath>..\packages\Microsoft.AspNet.SignalR.Core.2.1.2\lib\net45\Microsoft.AspNet.SignalR.Core.dll</HintPath>
    </Reference>
    <Reference Include="Microsoft.AspNet.SignalR.SystemWeb">
      <HintPath>..\packages\Microsoft.AspNet.SignalR.SystemWeb.2.1.2\lib\net45\Microsoft.AspNet.SignalR.SystemWeb.dll</HintPath>
    </Reference>

    ... 
```

希望这可以帮助某人。它为我节省了很多点击:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-21T09:03:44.683

现在我使用**包管理器控制台**（查看->其他 Windows->包管理器控制台）。

您可能只需要以下两个命令：

```
install-package <package-name> [-version <version-number>] [-project <project-name] 
```

和

```
update-package <package-name> [-reinstall] [-version <version-number>] [-project <project-name>] 
```

在哪里

*   方括号 [ ] 中的部分是可选的。
*   'install-package' 将安装到指定的项目，或者如果未指定在命令窗口顶部的“默认项目”下拉列表中选择的项目。
*   除非指定项目，否则“更新包”将对每个项目应用更改。
*   '-reinstall' 表示卸载然后以相同的版本号再次安装包。

起初我认为这些命令的行为有点奇怪，但根据经验，我发现它们像这样最有用。虽然我个人会完全放弃“默认项目”下拉菜单。

# php - 无法存储 $_SESSION 变量

> ID：15001379
> 
> 赞同：0
> 
> 时间：2013-02-21T11:42:27.147
> 
> 标签：php, mysql, session-variables

我开发了这组 2 个脚本，以便使用 $_SESSION 变量来检查用户是否已登录。我没有使用 cookie，因为我还不想进入那种“爵士乐”。

这是login.php

```
require 'host.php'; // Connection to database

$message = '';

if (isset($_POST['submit'])) {
    $username = $_POST['username'];
    $password = $_POST['password'];
    if ((!$username) || (!$password)) {
        $message ='Preencha todos os campos.';
    } else{
        $username = preg_replace("#[^0-9a-z]#i","",$username);
        $password = sha1($password);

        $sql = "SELECT * FROM utilizadores WHERE nome_utilizador='$username' AND palavra_chave='$password' LIMIT 1";
        $query = mysql_query($sql) or die();
        if (mysql_num_rows($query) == 1) {
            // Logged in stuff
            session_start();
            $_SESSION['username'] = $username;
            $_SESSION['password'] = $password;
            while ($consulta = mysql_fetch_array($query)) {
                $id = $consulta['id_utilizador']; // ID of username.
            }
            $_SESSION['id'] = $id;
            $message = '<a href="calendario.php">Clique aqui para ir para o calendário.</a>'; // Message that is shown to redirect to another page.
        } else{
            $message = 'Os dados que inseriu estão incorrectos!'; // Data inserted is incorrect.
        }
    }

} 
```

这是检查用户是否登录的文件

```
session_start();

include 'host.php';

if (isset($_SESSION['id'])) {
    $id = $_SESSION['id'];
    $password = $_SESSION['password'];
    //Verificar se o user existe.
    $sql = "SELECT * FROM utilizadores WHERE id_utilizador='$id' AND palavra_chave='$password' LIMIT 1";
    $query = mysql_query($sql) or die('Could not connect.');
    if (mysql_num_rows($query) > 0) {
        header('Location: logout.php');
    } else{
        // Logged in stuff
        $logged = 1;
    }
} else{
    $logged = 0;
} 
```

我想要检查会话是在每个页面中包含文件并且检查是 $logged == 0。

但它不是在页面之间存储会话数据。

希望你能帮我！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:57:34.613

您的 id 变量在 while 循环内，无法在 while 循环外读取。所以这就是会话不存储任何内容的原因

尝试在 while 循环之前定义 id 变量

```
 $id = "";
   while ($consulta = mysql_fetch_array($query)) {
  ...... 
```

您可以尝试在这样的while循环之后是否回显某些内容

```
 echo $id ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:49:20.913

我终于解决了这个问题！

我要做的就是更改 verify_session.php，并在 mysql_num_rows() 中将其设置为 == 0，而不是 > 0。

感谢所有的帮助家伙！

# php - 检查是否启用了 cookie 而不在 PHP 中设置 GET 参数或会话

> ID：15001380
> 
> 赞同：1
> 
> 时间：2013-02-21T11:42:29.747
> 
> 标签：php, cookies

很像[Detect if cookies are enabled in PHP](https://stackoverflow.com/questions/9448424/detect-if-cookies-are-enabled-in-php) and [Check if cookies are](https://stackoverflow.com/questions/6663859/check-if-cookies-are-enabled) enabled中问的问题，我想知道是否启用了cookies。

但是，我试图使这对用户尽可能透明，因此我对将一些“cookietest = 1”参数附加到我的 URL 不感兴趣。

我知道我可以重定向回用户最初输入的页面，取消设置“cookietest = 1”GET参数，并通过会话告诉原始页面是否禁用cookie，但是......

我目前正在使用 CodeIgniter 并且不想弄乱 CodeIgniter 会话，因此不使用 PHP 会话来存储 cookie 启用/禁用状态。

我实际上不确定使用 PHP 会话是否会弄乱 CodeIgniter 会话，但即使没有，我仍然想知道是否有一些巧妙的解决方案，可以在不设置 GET 参数的情况下进行 cookie 检查或使用会话（但是重定向很好）？

**更新**

看来我需要澄清一点：

我想知道**客户端**是否启用了cookie 。我已经尝试过我链接到的问题中描述的方法，即：

1.  设置饼干。
2.  重定向到检查 cookie PHP 页面或使用“cookietest=1”GET 参数的同一页面。
3.  查看 cookie 是否仍然设置：如果是 => 万岁，cookie 正在工作！否则 => 嘘，cookie 被禁用。

我要问的是是否可以在不设置 GET 参数的情况下执行此操作（因为这在 URL 中可见）。该问题的答案是“是的，如果您使用 PHP 会话”。

我的下一个问题是：是否可以不设置 GET 参数并且不使用 PHP 会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:16:10.863

基础知识：在您向客户端发送一个 cookie 并从他那里收到相同的信息之前，您无法知道用户是否启用了 cookie。

所以流程：

*   客户要求
*   服务器响应（+ cookie）
*   客户端请求（+ cookie）

无论如何都无法避免

您可以使用某些测试请求（ajax、图像等）跟踪是否启用了 cookie

例如，您可以使用简单的 1px 图像或从您的 php 脚本提供的任何徽标图像，并且您可以跟踪是否启用了 cookie。

所以现在的流程是：

*   客户要求
*   服务器响应 HTML (+ cookie)
*   客户端请求远程页面资源（js、img、css）（+cookie）
*   请求页面资源的服务器响应

就像是

```
<?php 
    // domain.com/some.js
    if (isset($_COOKIE['test']))
         $_SESSION['cookies_enabled'] = true;

    echo <<JS
    <someJS code or nothing>
    JS;
 ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T09:27:44.970

不久前我对此进行了很多研究，似乎每一种方式都有其缺陷。我还考虑到的一件事是，如果用户要更新页面或通过后退按钮返回页面，cookie 检查将如何工作。

`HTTP request`显然，为了让服务器查看客户端是否接受 cookie，客户端必须在服务器尝试设置 cookie 后发送附加信息，服务器在其中查找指示客户端接受 cookie 的 cookie 标头（没有标头 =不接受cookies）。这个额外的请求可以重定向到另一个页面（参见通常的方法，其中一个`$_GET`参数作为一个标志，说明是否尝试设置 cookie）但重要的是它实际上只是另一个 HTTP 请求。我最终做的是将整个页面包装在一个`HTML FRAMESET`：

```
<?php
    setcookie('test', 1, time() + 3600);
    echo '<HTML>
        <HEAD>
            <TITLE>
            </TITLE>
        </HEAD>
        <frameset rows="100%" cols="100%">
            <frame src="next.php">
        </frameset>
    </HTML>';
?> 
```

...然后我知道如果客户端已`HTTP request`接受`next.php`cookie，请求中将包含一个 cookie 标头，因此我不必使用`$_GET`参数作为指示这一点的标志。`Next.php`因此看起来像：

```
<?php
    if(count($_COOKIE) > 0){
        //Set some variable that indicates to the rest of the script that cookies 
        //are enabled.
    }
    else {
        //Set some variable indicating that cookies are disabled
    }
    //Output the rest of the script and HTML code to be displayed
?> 
```

我想过做同样的事情，但从标签而不是`HTTP request`从标签发送附加信息，但我遇到了麻烦，我将如何通过图像向父脚本指示是否设置了 cookie，因此我最终这样做了. 我在这种方法中看到的唯一缺陷是，如果用户在框架内右键单击并选择仅更新框架（而不是整个页面），那么框架将错误地声称 cookie 被禁用，但与所有的缺点相比其他方式，我认为这是可以接受的。`IMG``FRAMESET`

编辑：我还应该补充一点，我也指出在没有 Javascript 的情况下这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:02:42.470

我会使用 php.ini 设置来找出这些东西。也许是这样的：

```
if (ini_get("session.use_cookies") == 1) {
  print "cookies enabled";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T12:34:26.500

虽然您可以检查 php 是否启用了 cookie，但一个非常简单的测试就是设置一个 cookie，然后尝试读取它。

如果你成功阅读它，它就起作用了。如果客户端不允许使用 cookie，这也会通知您。

# android-asynctask - Android中的AsyncTask HttpConnection

> ID：15001384
> 
> 赞同：0
> 
> 时间：2013-02-21T11:42:39.797
> 
> 标签：android-asynctask

我想使用 asyntask 创建 httpconnection。三个参数被发布到服务器用户名、密码和搜索项。搜索由用户在 EditText 中提供，这样当用户单击按钮时，搜索项被发送到服务器。我想在 OnclickListener 中执行 doInbackground() 方法并在 listviews 上显示来自服务器的响应。这是 AsyncTask 类

```
public class PostToServer extends AsyncTask<String, Void, String> {

@Override
protected void onPostExecute(String result) {

}

@Override
protected String doInBackground(String... arg0) {
     try {
         HttpClient client = new DefaultHttpClient();  
         String postURL = "url";
         String username ="username";
         String password = "password";

         HttpPost post = new HttpPost(postURL);
             List<NameValuePair> params = new ArrayList<NameValuePair>();
             params.add(new BasicNameValuePair("user", username));
             params.add(new BasicNameValuePair("pass", password));
             UrlEncodedFormEntity ent = new UrlEncodedFormEntity(params,HTTP.UTF_8);
             post.setEntity(ent);
             HttpResponse responsePOST = client.execute(post);  
             HttpEntity resEntity = responsePOST.getEntity(); 

             if (resEntity != null) {    
                 Log.i("RESPONSE",EntityUtils.toString(resEntity));
             }
     } catch (Exception e) {
         e.printStackTrace();
     }
    return null;    
} 
```

这是调用点击事件的类

```
public class StartPost extends Activity  {

 @Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
     setContentView(R.layout.result_page);
}
    Button Submit = (Button) findViewById(R.id.btn_search);
     EditText textvalue = (EditText)findViewById(R.id.searcheditText);
     String value = textvalue.getText().toString();
     PostToServer post = new PostToServer();
     CheckInternetConnection check = new CheckInternetConnection(null);

 private OnClickListener click = new OnClickListener() {
     @Override
     public void onClick(final View v) {
         switch(v.getId()){
             case R.id.btn_search:
                 post.execute();
                break;   
         }  
     }
 };
} 
```

问题 1.我做错了什么，因为帖子似乎无法正常工作，如何显示来自 onPostExecute() 的服务器结果？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T10:05:32.760

创建一个 onPostExecute 方法以在您的文本视图上显示结果。

```
protected onPostExecute (String result){
   TextView tv = (TextView) findViewById(R.id.textview1);
   if(result != null){
      tv.setText(result);
   }
} 
```

# javascript - Javascript添加查询

> ID：15001392
> 
> 赞同：0
> 
> 时间：2013-02-21T11:43:03.263
> 
> 标签：javascript, jquery

不要觉得我的问题很愚蠢。下面是我的场景。请指教

变数 = 02; 变量添加 = 数字 + 1 ;

得到的结果是 3，但我需要它作为 03。有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:47:11.583

您需要编写一个填充函数：

```
function strpad(string, length, padChar) 
{
    var o = string.toString();
    if(!padChar) 
    { 
       padChar = '0'; 
    }

    while (o.length < length) 
    {
        o = padChar + o;
    }
    return o;
}; 
```

然后使用以下命令调用它：

```
var num = 3;
var add = strpad((3 + 1), 2); // will return '04' as a string. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:49:17.613

你可以这样做

```
<script>
var num=2;
var add= parseInt(num + 2);

if(parseInt(add) <10)
   {
      add= '0'+add; // if single digit no. then concat 0 before the no.
   }

</script> 
```

# javascript - jQuery 延迟对象：.when()s、.then()s 和 .done()s 的意外行为

> ID：15001393
> 
> 赞同：0
> 
> 时间：2013-02-21T11:43:05.900
> 
> 标签：javascript, jquery, jquery-deferred

我有一堆嵌套函数从 ajax 调用返回延迟对象。这是我的代码的样子

```
function makeCalls() {
    var ajaxDfd1 = $.ajax(...);

    ajaxDfd1.then(function() {
        // want to execute after first call
        var ajaxDfd2 =  $.ajax(...);

        ajaxDfd2.done(function() {
            // want to execute after second call
        });

        return ajaxDfd2;
    });

    return ajaxDfd1;
}

makeCalls().done(function() {
    // stuff here was executed early
}); 
```

但是我的电话并没有按照我想要的顺序执行。里面的东西`makeCalls().done()`似乎是在`ajaxDfd2`实际完成之前调用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T21:59:34.663

巧克力，

您在回答中做出了错误的假设；即`$.ajax()`返回一个“常规对象”。

这是不正确的。

`$.ajax()`返回一个 jqXHR 对象，它是 Promise 的超集，即。它具有 Promise 的所有方法以及其他特定于 AJAX 的方法（例如`.abort()`）。

如果返回的对象与`$.ajax()`Promise 不兼容，那么您问题中的代码会在尝试执行时抛出错误`makeCalls().done(...)`。

您的函数首先执行的原因`.done()`是该函数返回*外部*jqXHR。

以下是实现您期望的行为的几种方法：

```
function makeCalls() {
    var dfrd = new Deferred();
    $.ajax(...).then(function() {
        $.ajax(...).done(dfrd.resolve);
    });
    return dfrd.promise();
}

makeCalls().done(function(data) {
    // ...
}); 
```

或者

```
function makeCalls(fn) {
    $.ajax(...).then(function() {
        $.ajax(...).done(fn);
    });
}

makeCalls(function(data) {
    // ...
}); 
```

你甚至可以尝试：

```
function makeCalls() {
    return $.ajax(...).then(function() {
        return $.ajax(...);
    });
}

makeCalls().done(function() {
    // ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:43:05.900

我知道我一定是搞错了，并且花了很长时间盯着这个： [我什么时候应该使用 jQuery deferred 的“then”方法，什么时候应该使用“pipe”方法？](https://stackoverflow.com/questions/9583783/when-should-i-use-jquery-deferreds-then-method-and-when-should-i-use-the-pip)

后来我意识到我做不到

```
var dfdObj = $.ajax(...);
dfdObj.then(...);

return dfdObj; 
```

这实际上并没有返回延迟对象。它返回一个 Ajax 对象，因为它是一个常规对象，所以它被自动归类为已解析，因此该`.done()`函数被提前调用。相反，如果我想返回一个`var`

```
var dfdObj = $.ajax(...).then(...);

return dfdObj; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T23:23:26.220

你的代码是这样工作的：

```
function makeCalls() {
    var ajax1 = $.ajax(…);
    var ajax1and2 = ajax1.then(makeCall2);
    function makeCall2() {
        // want to execute after first call
        var ajax2 =  $.ajax(…);
        ajax2.done(after2);
        function after2() {
            // want to execute after second call
        });
        return ajax2;
    });
    return ajax1;
}

var ajax1 = makeCalls();
ajax1.done(function() {
    // stuff here was executed early
}); 
```

`ajax1and2`是您想要的`then`/调用的结果。`pipe`对它的回调将等待`makeCall2`（即`ajax2`）等待的结果`ajax1`。这将等于`after2`回调。

然而，您的`makeCalls`函数返回`ajax1`对象（您可以看到我也将它分配给了一个全局`ajax1`变量），并且`makeCall2`在您的第一个 ajax 完成后，将执行 the 和 done-callback。

因此，您需要返回`ajax1and2`延迟的：

```
function makeCalls() {
    return $.ajax(…).then(function() {
        return $.ajax(…).done(function() {
            // want to execute after second call
        });
    });
}

makeCalls().done(function() {
    // stuff here is now executed after second call as well
}); 
```

# javascript - 如何让 Highcharts 从外部 JSON 文件中获取数据？

> ID：15001399
> 
> 赞同：2
> 
> 时间：2013-02-21T11:43:33.423
> 
> 标签：javascript, json, highcharts

基本上，我有这个[http://jsfiddle.net/TWF6N/](http://jsfiddle.net/TWF6N/)

我不想让 JS 文件中的数据系列，而是让 JS 检索 JSON 文件。

我不希望它出现在 JS 文件中：

```
data = {"aaData": [
    [1, "70.1700", "2008-12-29 11:23:00"],
    [2, "70.2600", "2008-12-29 16:22:00"],
    [3, "70.6500", "2008-12-30 11:30:00"],
    [4, "70.8700", "2008-12-30 16:10:00"],
    [5, "70.5500", "2009-01-02 11:09:00"],
    [6, "70.6400", "2009-01-02 16:15:00"]
]}; 
```

我怎么做这个？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:43:54.520

直接来自[HighChart 文档](http://docs.highcharts.com/#preprocesssing-data-from-a-file)：

您的 JSON 数据如下所示：

```
[
    [1, "70.1700", "2008-12-29 11:23:00"],
    [2, "70.2600", "2008-12-29 16:22:00"],
    [3, "70.6500", "2008-12-30 11:30:00"],
    [4, "70.8700", "2008-12-30 16:10:00"],
    [5, "70.5500", "2009-01-02 11:09:00"],
    [6, "70.6400", "2009-01-02 16:15:00"]
] 
```

你的 JS 看起来像这样：

```
$(function () {
    var chart;
    $.getJSON('data.json', function(jsonData) {
        chartOptions.series = jsonData;
        chart = new Highcharts.Chart(chartOptions);
    });

    var chartOptions = {
        chart: {
            renderTo: 'container'
        },
        xAxis: {
            type: 'datetime'
        },

        series: []
    };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T13:05:18.660

大概您正在使用一些服务器端技术，如 php 或 asp.net？如果是这样，那么您只需回调服务器以在 HttpResponse 中接收您的 json。

# sql - LIKE 子句中的变量

> ID：15001400
> 
> 赞同：0
> 
> 时间：2013-02-21T11:43:36.697
> 
> 标签：sql

我在一个名为地址的表中有一些数据：

```
HouseNumber Address
32          32 The Street
1           2 The Way
4           4 The Street
5           5 The Street 
```

我试图找出不正确的门牌号码。
我认为下面的查询会返回“2 The Way”，但事实并非如此。

```
select Address
FROM   Addresses
WHERE  HouseNumber NOT LIKE '%' + Address + '%' 
```

有没有像上面的查询那样简单的方法，还是我必须编写一个存储过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:50:36.617

您必须交换`Address`和`HouseNumber`。此外，因为您`Address`从您开始`HouseNumber`可以使您的查询模式正确且可搜索。

```
select Address
FROM   Addresses
WHERE  Address NOT LIKE HouseNumber + ' %' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:56:21.207

您需要从地址中提取门牌号，并对照门牌号列进行检查（未测试）：

```
select Address
from   Addresses
where  cast(Housenumber as int) != cast(left(Address, instr(Address, " ")-1) as int) 
```

这假设门牌号始终位于地址的开头，并且门牌号和地址的其余部分之间有一个空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:46:38.707

不应该是：

```
select Address FROM Addresses WHERE Address NOT LIKE '%' + HouseNumber + '%' 
```

??

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T11:47:49.290

也许你应该换个方式试试

```
select Address FROM Addresses WHERE Address NOT LIKE '% ' + HouseNumber + ' %' 
```

这样，它将尝试将“1”（门牌号）与“2 方式”匹配。而不是反过来。

# scala - 代码格式：如何将多行代码与特殊字符对齐？

> ID：15001403
> 
> 赞同：10
> 
> 时间：2013-02-21T11:43:46.690
> 
> 标签：scala, intellij-idea, code-formatting

IDEA 或其插件之一是否能够将代码与特殊字符对齐？

我的意思是这样的代码

```
Map(
  'name -> "Peter",
  'age -> 27,
  'company -> "Foobar"
) 
```

被转化为

```
Map(
  'name    -> "Peter",
  'age     -> 27,
  'company -> "Foobar"
) 
```

示例 2：

```
execute("x", true, 27)
execute("foobar", false, 0) 
```

转变为

```
execute("x"     , true , 27)
execute("foobar", false, 0 ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-21T13:36:56.613

但是，您可以对齐 case 语句：

```
value match {
  case s: String => Some(java.lang.Long.parseLong(s))
  case bi: BigInt => Some(bi.longValue)
  case _ => None
} 
```

像这样：

```
value match {
  case s: String  => Some(java.lang.Long.parseLong(s))
  case bi: BigInt => Some(bi.longValue)
  case _          => None
} 
```

使用选项：

Settings -> Code Style -> Scala => Wrapping and Braces -> 'match' and 'case' statements -> Align in columns 'case' 分支

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:02:12.330

在 IDEA 12 中，如果您使用 Scala 插件，您可以为许多事情配置“多行对齐”，包括方法括号。但是，不支持您在单独的行上进行多次调用的特定示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-20T03:49:24.753

代码格式化程序似乎是一个[解决方案](http://scalameta.org/scalafmt/)。

# wcf - WCF 配置错误 .. 服务元数据无法在 Visual Studio 2012 中访问

> ID：15001407
> 
> 赞同：0
> 
> 时间：2013-02-21T11:43:57.283
> 
> 标签：wcf, metadata

我确实有一个问题，如果我尝试以 WCF 服务作为起始页来启动项目，我会收到以下消息：添加服务失败。服务元数据可能无法访问。确保您的服务正在运行并公开元数据。

配置文件如下

```
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true"/> 
```

# javascript - 有没有办法将 Ember 对象转换为普通的 javascript 对象？

> ID：15001409
> 
> 赞同：14
> 
> 时间：2013-02-21T11:43:59.030
> 
> 标签：javascript, ember.js

我找不到任何方法来完成这种转换任务，因为我找不到任何方法来获取对象的 Ember.js 属性。`Ember.keys`仅返回我设置`create`或使用`get`的属性，并且其中声明的属性`Ember.extend`不显示在那里。我使用这些属性来设置默认值（例如`[]`数组属性）

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-09-05T06:04:40.157

这是我肮脏的解决方法

```
var newModel = JSON.parse(JSON.stringify(model)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T17:53:58.883

我会做类似于上面那个人的事情，但我会做一些不同的事情。

**米信**

```
App.NativeObject = Ember.Mixin.create({
    toNative: function() {
        var properties = [];
        for (var key in this) {
            if (jQuery.inArray(Ember.typeOf(object[key]), ['string', 'number', 'boolean']) !== -1) {
                properties.push(key);
            }
        }
        return this.getProperties(properties);
    }
}); 
```

**目的**

然后你只需要`App.NativeObject`在你想要的对象中实现 mixin `toNative`：

```
var Object = Ember.Object.extend(App.NativeObject, {
    name: 'Adam',
    count: 4
}); 
```

然后我们`toNative`在所有实现我们的 mixin 的对象上都有这个方法。

强制性 jsFiddle：http: [//jsfiddle.net/jumUx/](http://jsfiddle.net/jumUx/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-14T00:54:46.313

如果您的对象是 ember-data 模型通知的子类，[您可以使用该`toJSON`方法](https://www.emberjs.com/api/ember-data/1.13/classes/DS.Model/methods/toJSON?anchor=toJSON)，否则您可以使用：

```
JSON.parse(JSON.stringify(emberObj)) 
```

获取任何支持本机 json 序列化的值（即不是函数/方法）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-19T05:45:39.010

这对我有用：

`myModel.toJSON({includeId: true})`

我正在使用 Ember 3。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T12:53:29.937

目前我用以下代码段解决它：

```
App.plainCopy = function (obj) {
  if (Ember.isArray(obj)) {
    return obj.map(App.plainCopy);
  } else if (typeof(obj) === "object") {
    if (App.Plainable.detect(obj)) {
      return obj.plainCopy();
    } else {
      throw new Error(Ember.String.fmt("%@ is not Plainable", [obj]));
    }
  } else {
    return obj;
  }
}

App.Plainable = Ember.Mixin.create({
  plainCopy: function() {
    var props = Ember.keys(this);
    var proto = this.constructor.prototype;
    for(p in proto) {
      if (proto.hasOwnProperty(p) && typeof(this[p])!=="function") {
        props.push(p);
      }
    }
    var copy = {};
    props.forEach(function(p) {
      copy[p] = App.plainCopy(this.get(p));
    }, this);
    return copy;
  }
}); 
```

它不会上升到类层次结构，也不会研究 mixins（因为我用于数据对象，从这个角度来看，这些对象非常简单）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-18T20:56:10.037

这就是我所做的，而且效果很好。请注意，这应该只准备好，因为对复制对象中的对象或数组的任何更改都会影响原始对象

```
App.BaseValidations = Ember.Object.create({
    toObject: function() {
        var destination = {}
        for (var k in this) {
            if (this.hasOwnProperty(k) && typeof(this[k]) !== 'function') {
                destination[k] = this[k];
            }
        }
        return destination;
    }
}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-20T15:24:25.020

对我来说足够正常的非常简单的事情是：

```
Ember.Object.reopen({
    toJson: function() {
        return JSON.parse(JSON.stringify(this));
    }
}); 
```

在应用程序加载时。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-19T06:12:53.060

对于现代（3.17）余烬，我用过`myEmberObject.getProperties('id', 'name', 'foo', 'bar')`

它产生一个普通的对象。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-08-12T22:35:05.187

另一种可能的解决方案可能适合您的需求，但对于嵌套的 Ember 对象不完全递归：

```
// where myEmberObject is.. an ember object
var plainJavaScriptObject = myEmberObject.toJSON(); 
```

这将仅包括您定义的实际属性，不包括 Ember 内部。同样，这里的缺点是任何嵌套的 Ember 对象本身都不会被转换，而是会以 "" 样式显示为字符串。

# javascript - 如何为链接创建onclick

> ID：15001413
> 
> 赞同：6
> 
> 时间：2013-02-21T11:44:11.097
> 
> 标签：javascript, jquery, onclick, href

我有一个`div`我在运行时动态设置的值，如果有比我启用的值或创建一个链接，该链接将具有`onclick`我将调用方法的`javascript`方法。

如何在`jquery`or中执行此操作`javascript`？

我将值设置为`div`如下所示，

```
document.getElementById('attachmentName').innerHTML=projectInforamtionMap.Cim_AttachmentNames; 
```

这是 div ：

```
<tr>
  <td align="left"><div id="attachmentName"> </div></td>
</tr> 
```

请帮助我找到并修复。

最好的祝福

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T11:45:11.623

您可以设置 onclick 功能：

```
document.getElementById('attachmentName').onclick = function() {}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T11:48:05.850

假设您的函数以前是这样定义的

```
function foo(){alert('function call');} 
```

添加innerHTML后

在 Javascript 中

```
document.getElementById('attachmentName').setAttribute('onclick','foo()'); 
```

在jQuery中

```
$("#attachmentName").attr('onclick','foo()'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T11:54:32.290

你有几种选择

JavaScript：

```
// var elem = document.getElementById('attachmentName');
elem.onclick = function() {};
elem.setAttribute('onclick','foo()');
elem.addEventListener('onclick', foo, false); // The most appropiate way 
```

jQuery：

```
// var elem = $('#attachmentName');
elem.click(foo);
elem.on('click', foo);
$('body').on('click', elem, foo); 
```

在 3 个 jQuery 替代方案之间，最后一个是最好的。原因是因为您只是在正文元素上附加了一个事件。在这种情况下，这无关紧要，但在其他情况下，您可能愿意将相同的事件附加到元素集合，而不仅仅是一个元素。

因此，使用这种方法，事件附加到主体但适用于单击的元素，而不是将相同的事件附加到每个元素，因此更有效:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T11:47:04.127

```
$('#attachmentName').click(function(){
     //do your stuff 
}) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T11:47:30.813

jquery方式：

```
$("#attachmentName").click(function() {
  some_js_method();
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-21T11:52:34.053

您可以在不通过以下方式在 div 中插入链接的情况下执行此操作

```
document.getElementById("attachmentName").onClick = function () {
                                                                  alert(1); // To test the click
                                                                 }; 
```

您也可以通过以下方式在 jQuery 的帮助下实现它。

```
$("#attachmentName").click(function () 
                                        {
                                             alert(1);
                                        }); 
```

为此，您必须在页面上包含 jQuery liabray。参考 jQuery.com

不过，如果您强烈希望在 Div 中包含链接，那么以下是它的代码

```
var link = $("<a>"+ $("#attachmentName").text() +"</a>");
$("#attachmentName").html($(link);
link.click(function () {
                          alert(1);
                        }); 
```

希望这会有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-22T15:20:39.207

当我将经典的 asp 详细信息页面转换为单页 ajaxified 页面时，我转换了页面中的现有链接以获取在同一页面的 DIV 中加载的详细信息。我将 href 标记重命名为 dtlLink 并在 jquery load() 函数中获取了该数据。

detail.asp（此处添加了 server.urlencode 并需要）

```
<a href=""#"" onclick=""javascript:LoadDetails(this)"" dtllink="detail.asp?x=" & Server.URLEncode(Request("x"))&y=" & Server.URLEncode(Request("y")) > link text </a> 
```

parent.asp（它有一些额外的代码用于 holdon.js 微调器图像、按钮启用/禁用、结果 div 显示/隐藏）

```
 function LoadDetails(href) {
 //get the hyperlink element's attribute and load it to the results div.
            var a_href = $(href).attr('dtllink');
            console.log(a_href);
            $('#divResults').html('');

            DisplayHoldOn();
            $('#divResults').load(a_href, function (response, status, xhr) {
                $('#divCriteria').hide();

                HoldOn.close();
                if (status == "error") {
                    var msg = "There was an error: ";
                    $("#divResults").html(msg + xhr.status + " " + xhr.statusText);
                    $('#divCriteria').show();
                    $("#cmdSubmit").removeAttr('disabled');
                }
            });
        } 
```

# eclipse - Eclipse、C++ 和“调试助手”？

> ID：15001414
> 
> 赞同：1
> 
> 时间：2013-02-21T11:44:13.863
> 
> 标签：eclipse, debugging, eclipse-plugin, eclipse-cdt, diagnostics

Visual Studio 具有[托管调试助手](http://msdn.microsoft.com/en-us/magazine/cc163606.aspx)(MDA)，Xcode 具有可以在方案上启用的[应用程序诊断。](http://developer.apple.com/library/mac/#recipes/xcode_help-scheme_editor/Articles/SchemeDiagnostics.html)

我对 Eclipse 或插件提供的“增值”调试和诊断特别感兴趣。我只在Eclipse网站上找到了[org.eclipse.cdt.debug.ui.memory](http://www.eclipse.org/downloads/packages/eclipse-ide-cc-developers/junosr1)，而且它只提供“内存渲染”；*搜索时*找不到{Eclipse+Mudflap} 和 {Eclipse+Dmalloc}。我要么遗漏了一些东西，要么 Eclipse 没有为开发人员提供帮助。

Eclipse 对开发和调试体验有什么帮助吗？

杰夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T09:35:55.250

至少对于 Eclipse 下的 QNX 开发，有一个关于 Mudflap 使用的详细介绍：

[http://www.qnx.com/developers/docs/6.4.1/ide_en/user_guide/debug.html#UsingMudflapInIDE](http://www.qnx.com/developers/docs/6.4.1/ide_en/user_guide/debug.html#UsingMudflapInIDE)

# cmake - CMake 和 clang_complete

> ID：15001421
> 
> 赞同：2
> 
> 时间：2013-02-21T11:45:12.960
> 
> 标签：cmake, clang-complete

我想设置我的 CMakeLists.txt 文件，以便它可以生成 vim 插件 clang_complete 所需的 .clang_complete 文件。

通常，您可以通过将参数传递给它与编译器一起提供的 python 脚本以及用于编译的所有参数来执行此操作。请注意，我省略了 cc_args.py 所在的实际目录以节省空间。

```
cc_args.py gcc test.c -o test -I~/IncludeDirs/ 
```

您也可以在制作阶段执行此操作...

```
make CC='cc_args.py gcc' CXX='cc_args.py g++' 
```

但是，我不确定如何（如果可能的话）在 CMakeLists.txt 文件中进行设置。每次我想设置 clang_complete 时都必须输入这个真的很烦人。我想这样做的原因是因为我有多个项目，我使用自定义脚本来构建 CMakeLists.txt 文件，因此必须为每个项目编写一个脚本或手动放置一个通用脚本是我的一个步骤想避免。

我已经尝试了一些迄今为止出现错误的事情。

我尝试将 CMAKE_CC_COMPILER 和 CMAKE_CXX_COMPILER 设置为类似于第一行的行，即“cc_args.py g++”。这里出现的错误说它找不到编译器（这是可以理解的）。

我尝试的下一件事是将编译器变量设置为 cc_args.py 并为实际编译器添加一个标志：可以说，这非常失败。CMake 说它无法编译测试程序（考虑到脚本不是编译器，并且测试不使用我设置的标志，我对此并不感到惊讶）。

因此，无需编写任何其他需要移动的外部脚本，有没有人可以想到一种可以做到这一点的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-06T14:18:09.803

解决方法是在执行cmake之前设置好CXX环境变​​量。像这样的东西：

```
CXX="$HOME/.vim/bin/cc_args.py clang++" cmake ..
make 
```

有关更多详细信息，请参阅[http://www.guyrutenberg.com/2013/01/29/vim-creating-clang_complete-using-cmake/](http://www.guyrutenberg.com/2013/01/29/vim-creating-clang_complete-using-cmake/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:32:37.203

我知道您说“不编写任何其他外部脚本”，但似乎您只需要一个单行：

```
exec cc_args.py g++ 
```

然后将该文件设置为您的 CMAKE_CXX_COMPILER。`file()`如果您不想分发它，您甚至可以使用 CMake 的功能在构建时编写单行代码。

# jquery - 从 td 中移除一个嵌套元素并将其添加为下一行

> ID：15001428
> 
> 赞同：0
> 
> 时间：2013-02-21T11:45:30.223
> 
> 标签：jquery, each

输入：

```
<table>
  <tr>
    <td>
      <div id="gvMasterGrid_ctl03_pnlWarning" class="warning">
        <span id="gvMasterGrid_ctl03_lblWarning">This has a problem</span>
      </div>
    </td>
  </tr>
</table> 
```

输出：

```
<table>
  <tr>
    <td>
      <!--Moved to next row-->
    </td>
  </tr>
  <tr>
    <td>
      <div id="gvMasterGrid_ctl03_pnlWarning" class="warning">
        <span id="gvMasterGrid_ctl03_lblWarning">This has a problem</span>
      </div>
    </td>
  </tr>
</table> 
```

使用 jQuery。选择器应该是 css 类而不是元素 id

我正在尝试

```
$(".warning").each(function(){
    $(this).closest("tr").after("<tr><td colspan = '999'>" + $(this).html() + "</td></tr>")
}); 
```

但它不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:04:10.223

这将在原始行之后直接创建一个新行，并将该类的每个元素的内容移到上面`warning`。这假设您只需要`td`新行中的一个。

```
$(".warning").each(function () {
    // Get the parent row
    var parentRow = $(this).closest("tr");
    // Detach the content
    var content = $(this).detach();
    // Create a new row after the parent row
    var newRow = $('<tr><td></td></tr>').insertAfter(parentRow);
    // Get the cell and append the content
    newRow.children('td').append(content);
}); 
```

[jsfiddle](http://jsfiddle.net/Ax8y5/)

# c# - 防止对 FILESTREAM 的写操作？

> ID：15001431
> 
> 赞同：4
> 
> 时间：2013-02-21T11:45:40.487
> 
> 标签：c#, sql-server, filestream

`SQL Server 2012`在`FILESTREAM`启用的情况下运行。以具有只读权限的用户身份登录 ( `db_datareader`) 我成功运行了以下代码。`filePath`和是通过[使用 filestream 选项在 sql server 2008](https://stackoverflow.com/questions/6463343/storing-files-in-sql-server-2008-using-the-filestream-option)`transactionContext`中存储文件中的描述获得的。

```
using (var transaction = new TransactionScope())
{
    // filePath and transactionContext are obtained as described here:
    // https://stackoverflow.com/questions/6463343/storing-files-in-sql-server-2008-using-the-filestream-option

    using (var stream = new SqlFileStream(filePath, transactionContext, FileAccess.Write, FileOptions.SequentialScan, 0))
    {
        var b = System.Text.Encoding.Unicode.GetBytes("OVERWRITE");
        stream.Write(b, 0, b.Length);
    }
} 
```

出于性能原因我想使用`SqlFileStream`，但我不希望我的`db_datareader`用户能够**修改**文件！可以通过存储过程*添加文件，这没关系。*但从那时起，文件被认为是只读的。

## 如何将 FILESTREAM 数据设为只读？

即我想禁止以写访问权限打开文件！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T11:16:55.977

`SqlFileStream``FileStream`在引擎盖下使用正常，所以基本上，你已经脱离了 SQL 安全上下文。您正在使用 NTFS 文件权限。

*最简单的解决方案是对 SQL 服务器*使用Windows 身份验证，并将相同的 Windows 帐户放在 SQL 的 db_datareader 组中，并为其提供对 UNC 共享的只读权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:48:55.957

编写包装器而不实现方法`Write()`

# java - 在 Eclipse 中编写注释链接特定行

> ID：15001432
> 
> 赞同：10
> 
> 时间：2013-02-21T11:45:42.000
> 
> 标签：java, eclipse, eclipse-plugin, code-formatting

我正在使用 Java 中的 Eclipse 和很长的类我需要这样的功能：在方法的顶部注释中（例如）有一个由该方法执行的操作列表。对于列出的每个操作，我想将部分注释“超链接”到相关代码的特定行。

然后使用 Ctrl+Click 到该行我可以直接跳转到指定的行代码。

这样的手术可以吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T11:58:47.637

在您的问题下方的评论中，您说：

> 我如何链接方法？

看看下面的例子：你可以在JavaDoc中按`ctrl`+点击，eclipse跳转到方法。`bar()``foo()``bar()`

```
public class Example {

    /**
     * JavaDoc of foo(). This method executes {@link Example#bar()}
     */
    public void foo() {
        bar();
    }

    /**
     * Javadoc of bar().
     */
    public void bar() { }
} 
```

Eclipse 甚至为`@link`、类名和方法提供了自动完成功能（在您手动输入 之后`#`）。

那是你要找的吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T11:53:26.820

您可以使用 JavaDoc @see 标记：

```
/**
* @see MyClass#myMethod()
*/ 
```

这会在您的 JavaDoc 中生成一个超链接。

SRC：[Java 中的方法链接锚定](https://stackoverflow.com/questions/7402499/method-linking-anchoring-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:54:53.330

Eclipse IDE 允许您从方法调用转到方法的定义（我认为是“F3”）。

除此之外，我认为没有办法设置“特殊”导航。请注意，如果您需要类似的东西，这强烈表明您的方法太大了。重构它们。

* * *

跳出框框思考，如果您要通过 code-to-html 漂亮的打印机提供代码，您可以在注释中嵌入 HTML 超链接和锚点（javadoc 或普通）。运气好的话，当您在 Web 浏览器中查看 HTML 化的源代码时，它们将是可点击的。

* * *

当然，Eclipse 可以遵循 javadoc 的“链接”。显然，标准标签无法链接到方法的深处，但我想您可以编写一个 Eclipse 插件，该插件支持非标准 javadoc 标签以链接到嵌入式锚点及其导航。

# javascript - 如何使用 json PHP JQUERY Ajax 从数据库中读取数据？

> ID：15001433
> 
> 赞同：1
> 
> 时间：2013-02-21T11:45:41.747
> 
> 标签：javascript, jquery, ajax, json

我试图从 mysql 数据库中读取数据并将其传递给我的 javascript 文件。我在互联网上进行了很多搜索，并找到了在我的情况下不起作用的示例。

.html 文件

```
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns='http://www.w3.org/1999/xhtml'>
<script language='JavaScript' type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js'></script>
<head>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
<title>Display Page</title>
</head>

<body>
<button type='button' id='getdata'>Get Data.</button>

<div id='result_table'>

</div>

<script type='text/javascript' language='javascript'>

$(document).ready(function(){
$('#getdata').click(function(){
    alert("hello");
    $.ajax({
            url: 'db.php',
            type:'POST',
            dataType: 'json',
            success: function(output_string){
                    alert(output_string);
                },
                    error: function (xhr, ajaxOptions, thrownError){
                    alert(xhr.statusText);
                    alert(thrownError);
                    }
    }); 

});
});
</script>
</body>
</html> 
```

和 .php 文件

```
<?php
echo 'hello';
        $user = 'root';
        $pass = '123';
        $host = 'localhost';
        $db = 'internetProgrammeringProj';

        $connect = mysql_connect($host,$user,$pass);
        $select = mysql_select_db($db,$connect);

        $query = $_POST['query'];
        $mysql_query = mysql_query("SELECT * FROM ratt ");
        $temp = "";
        $i = 0;
        while($row = mysql_fletch_assoc($mysql_query)){
            $temp = $row['id'];
            $temp .= $row['namn'];
            $temp .= $row['typ'];
            $temp .= $row['url'];
            $temp .= $row['forberedelse'];

            $array[i] = $temp; 
            $i++;
        }

        echo json_encode($array);   
?> 
```

警报（xhr.statusText）；给出解析器错误

和

警报（抛出错误）；给出 SyntaxError: JSON.parse: 意外字符

firebug 不会在控制台中显示任何错误。

**问题**：我如何让我的程序从数据库中获取内容并使用 json 传递它以在 ajax 中使用警报显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T11:22:51.247

我刚刚成功运行了这段代码。

我所要做的就是删除一`echo "hello"`开始就会弄乱你的 JSON 的那个。

您可以在未来开发中使用的更多提示：

*   不要使用`alert('message')`. 使用`console.log('message')`. `console.log`您可以在“开发者专区”中查看输出。在 chrome 中，您只需按 F12。我认为在 FF 中你需要安装 firebug 什么的。
*   `output_string`in function`success`实际上是一个对象。
*   chrome 中的“开发者专区”还可以让您看到来自后端的响应。如果您使用过它，您可能会看到您的输出，`hello{ "key":"value"}`并立即注意到开头的讨厌的 hello。[在http://wiki.mograbi.info/developers-tools-for-web-development](http://wiki.mograbi.info/developers-tools-for-web-development)了解更多信息

# jquery - 使用 jquery 选择单击的 Td 右侧的所有同级 td

> ID：15001440
> 
> 赞同：0
> 
> 时间：2013-02-21T11:46:01.100
> 
> 标签：jquery, html, css

目标是为 HTML 表中所选 td 右侧的所有 Td 分配一个类（使用 jQuery）。

例如，如果总共有 5 列 (td) 并且选择了第 2 个 td，则应为第 3、4、5 列分配一个特定的类。已尝试以下代码，该代码仅将类分配给立即权限 td 而不是进行中的..

```
$(this).parent('td').addClass("CheckMark");
$(this).parent('td').next('td').addClass("Green"); 
```

任何帮助将不胜感激。亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:49:37.983

试试下面的代码：

```
$(this).parent('td').nextAll().addClass("Green"); 
```

# javascript - 禁用对锚点的重复点击

> ID：15001442
> 
> 赞同：0
> 
> 时间：2013-02-21T11:46:07.193
> 
> 标签：javascript

在 JavaScript（不是 jQuery）中，有没有办法防止链接多次触发事件？

我正在遍历一些锚点并将 onclick 事件附加到每个链接，然后从 json 文件中显示与该链接相关的一些页面内容。唯一的问题是双击或重复单击一次又一次地输出相同的内容。

防止这种情况的最佳方法是什么，或者我应该重写脚本并更改锚点以提交按钮以添加禁用状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:01:42.143

在第一次单击后删除事件侦听器。

```
var element = document.getElementById("id_name");
element.addEventListener("click", onClickHandeler, false);

function onClickHandeler(e) {
    // Do here what your code have to do
   element.removeEventListener("click", onClickHandeler, false);
} 
```

希望这可以帮助你

# javascript - jQuery 图像 src 每 8 秒更改一次

> ID：15001443
> 
> 赞同：0
> 
> 时间：2013-02-21T11:46:06.657
> 
> 标签：javascript, jquery, image, src

我有一个带有标题 ID 的 div，id 是在这个 id 中找到的第一个图像，每 8 秒更改一次。图像名称是 image1.jpg 并在 8 秒后 id 喜欢将 image1 更改为 image2 然后再过 8 秒恢复为 image1 等等。

在 div 等中找到第一个图像的路径是否有点冗长，我将如何处理其余部分？例如让 src 每 8 秒更改一次？非常感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:49:49.300

你可以试试

```
var $img = $('div#header img').first();
var flag = false;
setInterval(function(){
    $img.attr('src', 'image' + (flag ? 1 : 2) + '.jpeg' );
    flag = !flag;
}, 8000); 
```

功能演示：[小提琴](http://jsfiddle.net/uxZfq/)（注意：这不适用于图像，而只是所使用技术的演示。检查控制台以查看`src`值）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:53:09.683

假设第一个图像是 image1.jpeg 然后在第一次运行时你会是 2 所以`++i`先使用增量然后使用字符串中的 var

```
var i = 0;
setInterval(function() { 
     if(i == 2) i=0;

     $('#imageID').attr('src', 'image' + (++i) + '.jpeg' );
}, 8000); 
```

# django - 在 Django 中存储用户活动

> ID：15001444
> 
> 赞同：19
> 
> 时间：2013-02-21T11:46:09.067
> 
> 标签：django, django-models

我正在寻找存储用户的活动，但我不确定在哪里存储它。我不认为数据库是一个选择，因为它会非常大。我想知道 Facebook、Dropbox 等网站如何记住特定用户的所有活动。并且它不能存储在会话中，因为这不是特定于会话的，而是特定于用户的。

请帮我提出你的建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-21T12:04:02.987

如果您愿意，通常可以`Django Admin Logs`用于此类活动。

通常，Django 会跟踪管理操作，例如创建、更新或删除现有记录。它具有以下结构：

```
from django.contrib.admin.models import LogEntry

LogEntry.objects.log_action(
                            user_id = ...,
                            content_type_id = ...,
                            object_id = ...,
                            object_repr = ....,
                            change_message = ...,
                            action_flag = ...
                           ) 
```

我在我的系统中使用它作为记录器，并跟踪每一个动作。通常，Django 会记录通过管理表单完成的插入、更新或删除操作，而我会记录我的手写视图和表单操作。[此外，您可以使用信号](https://docs.djangoproject.com/en/dev/topics/signals/ "信号")捕获用户操作，例如登录/注销。

我定义了新的动作标志。Django 使用 3 个标志：1 个用于插入，2 个用于更新，3 个用于删除。我用我的动作标志扩展了该列表。

正如我所说，使用它的好处是，您不需要处理默认的 Django Admin 表单以及使用这些表单执行的任何操作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-21T22:59:32.010

您可能想查看[django-activity-stream](https://github.com/justquick/django-activity-stream)，它是[活动流规范](http://activitystrea.ms/)的实现。这会将操作列表存储在数据库中，如果您对此感兴趣，则允许以下用户/实体提供类似于 Facebook 的内容。

但是，正如您所提到的，这最终可能会产生大量数据，这对于传统的单一数据库方法来说可能有点多。我不确定 Twitter 等网站如何处理它，但除非您计划快速扩展，否则标准数据库方法可能会持续一段时间。

# asp.net - 默认按钮设置但不起作用

> ID：15001454
> 
> 赞同：0
> 
> 时间：2013-02-21T11:46:49.540
> 
> 标签：asp.net, html, c#-4.0

在我的 asp.net 网络表单中，当用户在文本框中输入驱动程序名称并按 Enter 时，我有一个条件，驱动程序的所有联系方式都显示在下面的网格中

由于没有按键事件，我使用 defaultbutton 属性来执行此操作，因此我的代码看起来像

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <p>
    <br />
</p>
<asp:Panel ID="Panel1" runat="server">
    <table class="style1">
        <tr>
            <td class="style3">
                Driver Name :</td>
            <td class="style7">

            <asp:Panel Id="panel2" runat="server" DefaultButton="bt1">
  <asp:TextBox ID="txtDrivername" runat="server" Width="153px"></asp:TextBox>
  <asp:Button id="bt1" Text="Default" runat="server" onclick="bt1_Click" />

            </td></tr> </table> 
```

在我后面的代码中，我编写了一个函数来获取数据>但调试器没有进入 bt1_Click() >我是 Web 开发的新手，我相信我的部分可能存在一些错误，谁能指出它.. .......我正在使用带有母版页的 Web 表单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:52:01.043

所有代码看起来都正确，除了`onclick`：

```
<asp:Button id="bt1" Text="Default" runat="server" onclick="bt1_Click" /> 
```

大小写不正确：

```
<asp:Button id="bt1" Text="Default" runat="server" OnClick="bt1_Click" /> 
```

因此正确设置应该连接事件处理程序。

# java - 在Android上将画布保存到位图

> ID：15001455
> 
> 赞同：7
> 
> 时间：2013-02-21T11:46:50.450
> 
> 标签：java, android, android-canvas, bitmapfactory

我在将 Canvas 的内容放入位图中时遇到了一些困难。当我尝试执行此操作时，该文件以大约 5.80KB 的文件大小写入，但它似乎完全是空的（每个像素都是“#000”）。

画布绘制了一系列由手写形成的相互连接的线条。下面是我的 onDraw 视图。（我知道它阻塞了 UI 线程/不良做法/等等，但是我只需要让它工作）

谢谢你。

```
@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);

        if (IsTouchDown) {

            // Calculate the points
            Path currentPath = new Path();
            boolean IsFirst = true;
            for(Point point : currentPoints){
                if(IsFirst){
                    IsFirst = false;
                        currentPath.moveTo(point.x, point.y);
                    } else {
                        currentPath.lineTo(point.x, point.y);
                    }
                }

            // Draw the path of points
            canvas.drawPath(currentPath, pen);

            // Attempt to make the bitmap and write it to a file.
            Bitmap toDisk = null;
            try {

                // TODO: Get the size of the canvas, replace the 640, 480
                toDisk = Bitmap.createBitmap(640,480,Bitmap.Config.ARGB_8888);
                canvas.setBitmap(toDisk);
                toDisk.compress(Bitmap.CompressFormat.JPEG, 100, new FileOutputStream(new File("arun.jpg")));

            } catch (Exception ex) {

            }

        } else {

            // Clear the points
            currentPoints.clear();

        }
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-26T21:27:17.520

I had similar problem and i've got solution. Here full code of a task /don't forget about `android.permission.WRITE_EXTERNAL_STORAGE` permission in manifest/

```
 public Bitmap saveSignature(){

      Bitmap  bitmap = Bitmap.createBitmap(this.getWidth(), this.getHeight(), Bitmap.Config.ARGB_8888);
      Canvas canvas = new Canvas(bitmap);
      this.draw(canvas); 

      File file = new File(Environment.getExternalStorageDirectory() + "/sign.png");

      try {
           bitmap.compress(Bitmap.CompressFormat.PNG, 100, new FileOutputStream(file));
      } catch (Exception e) {
           e.printStackTrace();
      }

      return bitmap;
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T21:37:56.393

首先创建一个空白位图，然后使用该空白位图创建一个画布

```
 Bitmap.Config conf = Bitmap.Config.ARGB_8888; 
 Bitmap bitmap_object = Bitmap.createBitmap(width, height, conf); 
 Canvas canvas = new Canvas(bitmap_object); 
```

现在在画布上画线

```
 Path currentPath = new Path();
        boolean IsFirst = true;
        for(Point point : currentPoints){
            if(IsFirst){
                IsFirst = false;
                    currentPath.moveTo(point.x, point.y);
                } else {
                    currentPath.lineTo(point.x, point.y);
                }
            }

        // Draw the path of points
        canvas.drawPath(currentPath, pen); 
```

现在通过**bitmap_object访问您的位图**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T12:01:52.867

将位图设置为画布*后*，您必须进行绘制。还可以像这样使用一个新的 Canvas 对象：

```
Canvas canvas = new Canvas(toDisk);
canvas.drawPath(currentPath, pen);
toDisk.compress(Bitmap.CompressFormat.PNG, 100, new FileOutputStream(new File("arun.png"))); 
```

我建议使用 PNG 来保存路径图像。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T12:03:10.817

`canvas.setBitmap(bitmap);`在 Canvas 上绘制任何内容之前，您必须先致电。在调用`canvas.setBitmap(bitmap);`draw on`Canvas`然后保存`Bitmap`你传递给`Canvas`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T11:56:45.980

或许

```
canvas.setBitmap(toDisk); 
```

位置不正确。

**尝试这个 ：**

```
toDisk = Bitmap.createBitmap(640,480,Bitmap.Config.ARGB_8888);              
toDisk.compress(Bitmap.CompressFormat.JPEG, 100, new FileOutputStream(new File("arun.jpg")));

canvas.setBitmap(toDisk); 
```

# emacs - 目录局部变量错误：错误类型参数 stringp

> ID：15001460
> 
> 赞同：0
> 
> 时间：2013-02-21T11:47:05.823
> 
> 标签：emacs, elisp

我有以下 .dir-locals.el：

```
((c++-mode . ((irony-compile-flags-work-dir . "/home/aparulekar/Developer/GamePlay")
              (irony-compile-flags . (list "-Igameplay/src"
                                       "-Iexternal-deps/bullet/include"
                                       "-Iexternal-deps/oggvorbis/include"
                                       "-Iexternal-deps/libpng/include"
                                       "-Iexternal-deps/zlib/include"
                                       "-Iexternal-deps/lua/include"
                                       "-Iexternal-deps/glew/include"))))) 
```

当我访问该文件夹中的任何文件时，我收到以下错误：

```
Directory-local variables error: (wrong-type-argument stringp irony-compile-flags) 
```

有人可以告诉我为什么我不能将列表分配给目录局部变量吗？

（这是针对[https://github.com/sarcasm/irony-mode](https://github.com/sarcasm/irony-mode)）

*编辑*- [Anton 的回答](https://stackoverflow.com/a/15001572/288634)，加上我正在进行一些与 dir-local unsafe-variable-related 相关的抑制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:52:42.090

`irony-compile-flags`被定义为其形式的字符串列表 ( `repeat string`) 。`defcustom`

在您的`.dir-locals.el`中，您忘记了您提供的是*values*，而不是要评估的*lisp 表达式。*因此，`list`符号是多余的，这就是破坏类型检查的原因：您正在设置`irony-compile-flags`以符号开头的列表`list`。试试这个：

```
((c++-mode . ((irony-compile-flags-work-dir . "/home/aparulekar/Developer/GamePlay")
              (irony-compile-flags .  ("-Igameplay/src"
                                       "-Iexternal-deps/bullet/include"
                                       "-Iexternal-deps/oggvorbis/include"
                                       "-Iexternal-deps/libpng/include"
                                       "-Iexternal-deps/zlib/include"
                                       "-Iexternal-deps/lua/include"
                                       "-Iexternal-deps/glew/include"))))) 
```

# android - 如何分析android崩溃时出现的异常的堆栈跟踪

> ID：15001461
> 
> 赞同：0
> 
> 时间：2013-02-21T11:47:10.020
> 
> 标签：android, exception, crash

我正在使用 crittercism 工具获取崩溃报告。发生崩溃时我会收到邮件，但我没有得到显示崩溃日志的堆栈跟踪的含义。例如：

```
0       java.util.ConcurrentModificationException
1   at  java.util.ArrayList$ArrayListIterator.next(ArrayList.java:607)
2   at  com.webaroo.replyall.utils.ah.d(Unknown Source)
3   at  com.webaroo.replyall.utils.ah.b(Unknown Source)
4   at  com.webaroo.privatechat.ui.f.getView(Unknown Source)
5   at  android.widget.AbsListView.obtainView(AbsListView.java:1448)
6   at  android.widget.ListView.makeAndAddView(ListView.java:1786)
7   at  android.widget.ListView.fillSpecific(ListView.java:1325)
8   at  android.widget.ListView.layoutChildren(ListView.java:1617)
9   at  com.webaroo.replyall.controls.CustomListView.layoutChildren(Unknown Source)
10  at  android.widget.AbsListView.onLayout(AbsListView.java:1299)
11  at  com.webaroo.replyall.controls.CustomListView.onLayout(Unknown Source)
12  at  android.view.View.layout(View.java:7225)
13  at  android.widget.RelativeLayout.onLayout(RelativeLayout.java:943)
14  at  android.view.View.layout(View.java:7225)
15  at  android.widget.FrameLayout.onLayout(FrameLayout.java:369)
16  at  android.view.View.layout(View.java:7225)
17  at  android.widget.FrameLayout.onLayout(FrameLayout.java:369)
18  at  android.view.View.layout(View.java:7225)
19  at  android.view.ViewRoot.performTraversals(ViewRoot.java:1189)
20  at  android.view.ViewRoot.handleMessage(ViewRoot.java:1914)
21  at  android.os.Handler.dispatchMessage(Handler.java:130)
22  at  android.os.Looper.loop(SourceFile:351)
23  at  android.app.ActivityThread.main(ActivityThread.java:3833)
24  at  java.lang.reflect.Method.invokeNative(Native Method)
25  at  java.lang.reflect.Method.invoke(Method.java:538)
26  at  com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:901)
27  at  com.android.internal.os.ZygoteInit.main(ZygoteInit.java:659)
28  at  dalvik.system.NativeStart.main(Native Method) 
```

在上面的日志中，我无法得到上面的哪一行正是导致崩溃或引发异常。所有这些行到底指向什么？还有每行末尾的括号（）中写的什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:55:43.653

您的异常是“ConcurrentModificationException”，这意味着有两个或多个线程试图使用 ArrayList....您的代码被混淆了，但它似乎是 ListAdapter 的错误。

“brackets()”中写的是source:codeLine ...但“Unknown Source”表示他无法指定或找到源，可能会导致您使用的混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:55:54.407

逐行跟踪它，您将看到您的应用程序的哪个类有问题以及实际发生崩溃的行号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:50:36.840

从上到下扫描跟踪并尝试查看您识别为代码的内容。在这种情况下，它似乎`android.widget.AbsListView.obtainView`会抛出一个`ConcurrentModificationException`at line `1448`。

# iphone - 用户有没有办法使用 iPhone sdk 通过 LinkedIn 邀请他们的朋友？

> ID：15001464
> 
> 赞同：2
> 
> 时间：2013-02-21T11:47:13.360
> 
> 标签：iphone, ios, objective-c, social-networking

我已经完成了使用linkedIn 的登录，但我做了很多检查，并没有找到通过LinkedIn 邀请朋友的方法。如果有人这样做了，那么请给我一个指导或教程来摆脱这个。

任何帮助将不胜感激..

**提前致谢**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:20:48.593

登录后，您应该能够使用 LinkedIn 自己的 API 邀请他人成为朋友。在此处查看[文档](http://developer.linkedin.com/documents/invitation-api)。这将涉及将 XML 发布到该页面上描述的 API。

请注意，您还需要遵循一些“使用指南”（必须让用户选择是否发送邀请等...）

# java - 使用 Apache POI 创建简单工作簿时出错

> ID：15001471
> 
> 赞同：0
> 
> 时间：2013-02-21T11:47:29.067
> 
> 标签：java, apache-poi, xls, excel

我正在尝试使用 Apache POI 创建一个简单的工作簿并收到以下错误。使用 apchhe poi 3.9 请帮助我摆脱这种感谢。

错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/xmlbeans/XmlException
    at xlscreate.xlsclass.main(xlsclass.java:24)
Caused by: java.lang.ClassNotFoundException: org.apache.xmlbeans.XmlException
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 1 more 
```

代码：

```
import java.io.FileOutputStream;
import org.apache.poi.ss.usermodel.Workbook;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;
import java.io.InputStream;

public class xlsclass {

     public static void main(String[] args)  throws Exception,Throwable{

           // Workbook wb = new HSSFWorkbook();
           // FileOutputStream fileOut = new FileOutputStream("workbook.xls");
           // wb.write(fileOut);
           // fileOut.close();

            Workbook wb = new XSSFWorkbook();
            FileOutputStream fileOut = new FileOutputStream("c:/workbook.xlsx");
            wb.write(fileOut);
            fileOut.close();

     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:49:52.747

Apache POI 具有依赖关系。您需要查找它们并将它们添加到您的类路径中。其中一个依赖库包含这个异常类：org.apache.xmlbeans.XmlException。不确定是哪一个。之后，其他答案包含代码中实际错误的提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:04:50.893

Apache POI 有[许多依赖项](http://poi.apache.org/overview.html#components)。[网站上给出了](http://poi.apache.org/overview.html#components)Apache POI 每个部分的完整依赖项列表

如果您使用 Maven 作为构建工具，当您将代码定义为依赖于 Apache POI（全部定义）时，它会自动吸收依赖项。如果您使用 Eclipse 或 Ant，那么您应该[下载](http://poi.apache.org/download.html)Apache POI 的二进制 (-bin-) 包，然后您会在其中找到所有的依赖项。

（对于您的特定错误，您缺少 xmlbeans jar，但我怀疑您也可能缺少其他一些东西，这是第一个命中）

# javascript - 如何从现有的 JS 对象实例化相同的 JS 对象

> ID：15001477
> 
> 赞同：1
> 
> 时间：2013-02-21T11:47:44.757
> 
> 标签：javascript

我有

```
var a = {
    f1: function() {
        // Do Something
    },
    f2: ['a','b','c'],
    f3: 1234
} 
```

我需要创建这样的东西

```
var b = Object.create(a); 
```

但是 b 并没有告诉我它包含 a 的任何属性！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:11:59.270

您可以创建一个克隆函数，执行如下操作：

```
var clone = function(obj) {

    // Create a new object using the same prototype as the original object
    var cloned = Object.create(obj);      

    // Copy each property from 'obj' to 'cloned'
    for (p in obj) {      
        if (obj.hasOwnProperty(p)) {
            cloned[p] = obj[p];
        }
    }

    return cloned;        // Return the cloned object
} 
```

**编辑：**小心从原始创建克隆对象的第一条语句。

1.  您必须注意，如果您`var cloned = {};`像我以前那样编写，原型会有所不同，因此此解决方案将无法 100% 正常工作，因为如果您使用`instanceof`运算符，它将返回`false`.

2.  如果您`var cloned = Object.create(obj);`按照其他答案的描述使用，您将获得一个与原始原型具有相似原型的克隆对象。但是您还需要从原始对象复制属性并将它们附加到克隆版本。这就是我们必须使用 for 循环的原因。

最后，如果使用 Object.create 的第二种方法在您的浏览器中不起作用，因为它具有旧版 JavaScript 引擎，那么您必须使用如下的小解决方法。

```
function F() {};
F.prototype = obj.prototype;
var cloned = new F(); 
```

希望能帮助到你！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:48:29.477

使用`prototype`：

```
var b = Object.create(a.prototype); 
```

`Object.create`使用指定的原型对象和属性创建一个新对象。

它期望新创建的对象的原型：`Object.create(proto [, propertiesObject ])`

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:53:18.410

使用 JQuery 的另一种方法是函数[Jquery.extend](http://api.jquery.com/jQuery.extend/)。你可以像这样使用它：

```
var b = jQuery.extend({},a); 
```

# c++ - c++ 和 fastcgi - 上游过早关闭 FastCGI 标准输出，同时从上游读取响应标头

> ID：15001480
> 
> 赞同：1
> 
> 时间：2013-02-21T11:47:51.003
> 
> 标签：c++, nginx, fastcgi

我正在使用 nginx、factcgi 和 spawn-fcgi 并试图让它工作。

我按如下方式启动 spawn-fcgi：

```
g++ rtbTimeSeries.cpp -o forecast.fcgi -I/home/ubuntu/cpp/boost_1_52_0/ -I/home/ubuntu/cpp/NR_C301/ -lfcgi++ -lfcgi
spawn-fcgi -a 127.0.0.1 -p 8010 -n forecast.fcgi 
```

当我去

```
http://127.0.0.1:83/forecast.fcgi 
```

我收到 502 错误

当我从命令行查看 spawn-fcgi 的输出时，我看到了正确的输出……请参阅帖子的最底部：

在 nginx 日志中，我得到了这个：

```
2013/02/21 19:42:39 [error] 16342#0: *39 upstream closed prematurely FastCGI stdout while reading response header from upstream, client: 127.0.0.1, server: 127.0.0.1, request: "GET /forecast.fcgi HTTP/1.1", upstream: "fastcgi://127.0.0.1:8010", host: "127.0.0.1:83" 
```

这是我的 C++ 代码：

```
int main() {
    FCGX_Init();
    while(FCGI_Accept() >= 0){
        printf("Content-type: text/html\r\n"
                       "\r\n"

                       "<title>FastCGI Hello!</title>"
                       "<h1>FastCGI Hello!</h1>"
                       "Request number %d running on host <i>%s</i>\n",
                        ++count, getenv("SERVER_NAME"));
    }
    return 0;
} 
```

这是我的 nginx.conf 部分：

```
server {
              listen 83;
              server_name 127.0.0.1;

             location / {
          fastcgi_pass   127.0.0.1:8010;

          fastcgi_param  GATEWAY_INTERFACE  CGI/1.1;
          fastcgi_param  SERVER_SOFTWARE    nginx;
          fastcgi_param  QUERY_STRING       $query_string;
          fastcgi_param  REQUEST_METHOD     $request_method;
          fastcgi_param  CONTENT_TYPE       $content_type;
          fastcgi_param  CONTENT_LENGTH     $content_length;
          fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;
          fastcgi_param  SCRIPT_NAME        $fastcgi_script_name;
          fastcgi_param  REQUEST_URI        $request_uri;
          fastcgi_param  DOCUMENT_URI       $document_uri;
          fastcgi_param  DOCUMENT_ROOT      $document_root;
          fastcgi_param  SERVER_PROTOCOL    $server_protocol;
          fastcgi_param  REMOTE_ADDR        $remote_addr;
          fastcgi_param  REMOTE_PORT        $remote_port;
          fastcgi_param  SERVER_ADDR        $server_addr;
          fastcgi_param  SERVER_PORT        $server_port;
          fastcgi_param  SERVER_NAME        $server_name;
        }

    } 
```

下面是我在浏览器中点击 url 时控制台的输出。

```
spawn-fcgi -a 127.0.0.1 -p 8010 -n forecast.fcgi
Content-Type: text/plain

Hello world in C
Content-type: text/html

<title>FastCGI Hello!</title><h1>FastCGI Hello!</h1>Request number 1 running on host <i>127.0.0.1</i>
Content-Type: text/plain

Hello world in C
Content-type: text/html

<title>FastCGI Hello!</title><h1>FastCGI Hello!</h1>Request number 2 running on host <i>127.0.0.1</i>
Content-Type: text/plain

Hello world in C
Content-type: text/html

<title>FastCGI Hello!</title><h1>FastCGI Hello!</h1>Request number 3 running on host <i>127.0.0.1</i>
Content-Type: text/plain

Hello world in C
Content-type: text/html

<title>FastCGI Hello!</title><h1>FastCGI Hello!</h1>Request number 4 running on host <i>127.0.0.1</i>
Content-Type: text/plain

Hello world in C
Content-type: text/html

<title>FastCGI Hello!</title><h1>FastCGI Hello!</h1>Request number 5 running on host <i>127.0.0.1</i> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T16:22:13.560

你需要#include“fcgi_stdio.h”吗？

如果我从头开始编写应用程序，我会明确使用 FCGI_printf 而不是依赖 fcgi_stdio.h 中的#define 魔法。

# git - 文件在提交之间更改，但文件列表仅限于较旧的提交

> ID：15001481
> 
> 赞同：4
> 
> 时间：2013-02-21T11:47:51.703
> 
> 标签：git, merge, diff

情况：我有一个旧的提交，我需要有选择地与最新的提交合并。有些文件没有更改，而其他文件有重大更改，我需要有选择地查看和合并。

假设旧的提交`1`有文件`A`, `B`, `C`.

最新的提交`5`涉及更改文件`B`和`C`自提交以来还`1`添加了文件`D`和.`E``F`

所以在提交`1`和`5`文件之间`B`和`C`已经发生了变化，也就是`diff`在`1:B`和上运行`5:B`；并且`1:C`会`5:C`显示差异。

我需要获取文件名`B`并且`C` *只有*.

也就是说，所有不属于`1`但更改或添加的文件**不**`5`应该显示。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:10:19.927

你可以试试

```
git diff --diff-filter=M 1 5 
```

可用的过滤器是

*   `A`： 添加
*   `C`: 复制
*   `D`: 删除
*   `M`： 修改的
*   `R`: 重命名
*   `T`：类型已更改（符号链接、常规文件等）
*   `U`: 未合并
*   `X`: 未知
*   `B`: 配对中断

有关所有详细信息，请参阅[`git-diff(1)`](http://git-scm.com/docs/git-diff)手册页。

**编辑**：

如果您对两次提交之间的更改**方式**感兴趣，**您**还可以使用该选项，该选项对于每个更改的文件都会输出上述代码之一。此选项还可用于告诉您对每个提交的哪些文件进行了何种类型的更改。**`--name-status``git-log`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T18:45:55.853

要仅考虑 commit 中存在的文件`1`，请运行

```
$ git ls-tree --name-only commit1 | xargs git diff commit1 commit5 -- 
```

请注意，这将包括提交 1 中存在但在提交 5 中删除的文件（这将在差异中显示为已删除的文件）。如果您想避免这种情况，请找到文件的公共子集：

```
$ git ls-tree --name-only commit1 > all-files-in-commit1
$ git ls-tree --name-only commit5 > all-files-in-commit5
$ comm -1 -2  all-files-in-commit1 all-files-in-commit5 > common-files
$ xargs git diff commit1 commit5 -- < common-files 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-02T02:10:57.440

假设，对于`5`您所指的“最新提交” `HEAD`，您也可以对您的任务使用这种不同的策略。我发现它是迄今为止最可行的：

1.  将旧提交中的更改应用到暂存区域，无需提交 ( `-n`= `--no-commit`)：

    ```
    git cherry-pick -n <commit> 
    ```

2.  取消暂存您刚刚所做的所有更改：

    ```
    git reset 
    ```

3.  比较这些更改是什么，相对于您的上次提交：

    ```
    git diff HEAD 
    ```

4.  有选择地添加您想要的更改：

    ```
    git add -p 
    ```

5.  最后做出新的提交：

    ```
    git commit -m "commit message" 
    ```

资料来源：改编自[这个答案](https://stackoverflow.com/a/1526093/1270008)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-02T01:25:44.453

尝试（使用 SHA`1`并`5`在您的示例中）：

```
git diff 1 5 $(git diff --raw --no-commit-id --name-only -r 1~1 1) 
```

或者更舒适，因此您只需键入每个 SHA 一次：

```
c1="1"; c2="5"
git diff $c1 $c2 $(git diff --raw --no-commit-id --name-only -r $c1~1 $c1) 
```

它的工作原理：第一个 git diff 比较两个提交。第二个生成路径列表以限制比较。`$c1`此列表是通过比较旧提交与其父提交之间更改了哪些文件而生成的`$c1~1`。（这也适用于使用 指定最后十次提交之类的东西`c1="HEAD~10"`，因为`HEAD~10~1`它是 git 中的有效树形，相当于`HEAD~11`.）

子shell`git diff --raw`也用于合并提交。否则我们可以使用`git diff-tree --no-commit-id --name-only -r $c1`，它会自动将提交与其父级进行比较。

**TODO：**尚未完全正常运行。有时它有效，有时我得到“致命：不明确的参数'<文件名>'：未知修订或路径不在工作树中。”****

# jquery - jQuery ajax 跨域请求

> ID：15001486
> 
> 赞同：0
> 
> 时间：2013-02-21T11:48:17.597
> 
> 标签：jquery, ajax, json, cross-domain, jsonp

我正在尝试使用本地环境中的 jQuery 发出 ajax 请求。

```
$.ajax({
        url: requestURL,
        dataType: "json",
        timeout: 120000,
        success: function(data){
            // do something

        },
        error: function(XMLHttpRequest, textStatus, errorThrown){
            console.log("Instants.loadGame: error loading games: error text: " + textStatus + "; error thrown: " + errorThrown);
        }
    }); 
```

我曾尝试使用 dataType json 和 jsonp （因为这似乎是其他人所说的解决问题的方法），但无论哪种方式我都会遇到错误。使用 dataType json，错误响应具有 textStatus = "error" 并且 errorThrown 为空。使用 dataType jsonp 错误响应有 textStatus = "parsererror" 和 errorThrown = "jQuery19002007321439859855_1361446807440 没有被调用"。

我知道此代码在与我的请求 URL 相同的域上运行时有效，因此我只能假设这是因为我在本地环境中执行此操作。我已将我的 cross-domain.xml 设置为允许所有内容。我正在使用 jQuery 1.9.0。

有没有人有任何想法？我在网上看了很多，但没有一个帮助其他人的解决方案似乎对我有用......

谢谢，希瑟

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:56:35.913

当您收到“未调用 jQuery19002007321439859855_1361446807440”之类的错误时，这是​​因为它不是正确的 jsonp 响应。使用 jsonp 时，服务器需要是 JavaScript（实际脚本），并且该脚本需要调用作为 url 一部分提供的函数（在这种情况下，函数名为 jQuery19002007321439859855_1361446807440，jQuery 映射到您提供的成功处理程序。

最可能的原因是服务器返回了纯 json 数据，但这不起作用。该数据需要传递给脚本。所以对服务器的请求应该返回类似

```
var data = {"foo":1}; //your data here
jQuery19002007321439859855_1361446807440(data); 
```

# asp.net - 如何修复 Visual Studio 2010 中的选项卡？

> ID：15001488
> 
> 赞同：1
> 
> 时间：2013-02-21T11:48:25.603
> 
> 标签：asp.net, visual-studio-2010, visual-studio, tabs, ide

我安装了 VS 2010 SP1，并且正在使用 C#。

当我希望它写入类名时，Tabbing 无法正常工作。

例如，当我写“throw new NotImpl”然后按 Tab 时，我希望它会将整个单词写为“NotImpelementedException”，但它只是跳到下一行而不写类名！

此外，当我按 Ctrl+空格键时，它会列出类，然后选择类名，它不会写入类，并且类似地跳转到下一行。

我安装了 Resharper，会影响它吗？

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:50:26.563

是的，ReSharper 导致了这个问题。它的智能菜单很痛苦。使用 ENTER 键，你应该没问题。

您可以考虑的另一件事是关闭 ReSharper 的菜单。您可以在选项页面下执行此操作。

![在此处输入图像描述](../Images/45c36b1cbb78d4c2318f2770e4619f21.png)

# php - 如何使用jquery根据选择下拉菜单显示textarea？

> ID：15001489
> 
> 赞同：1
> 
> 时间：2013-02-21T11:48:26.370
> 
> 标签：php, jquery

我想显示 2x 下拉菜单，两者都将预先填充（第二个菜单“mainToon”将包含 200 多个名称，但对于示例我只展示了几个。

```
<select id="category" name="Category">
    <option value=" "></option>
    <option value=" ">-----------------</option>
    <option value="Main Toon">Main Toon</option>
    <option value="Alt Toon">Alt Toon</option>
    <option value="Cyno Toon">Cyno Toon</option>
    <option value="Super Toon">Super Toon</option>
    <option value="Dust Toon">Dust Toon</option>
</select>

<select id="mainToon" name="mainToon">
    <option value=" "></option>
    <option value=" ">-----------------</option>
    <option value="Agmar">Agmar</option>
    <option value="S Tein">S Tein</option>
    <option value="Karades">Karades</option>
    <option value="Bad Kharma">Bad Kharma</option>
    <option value="Ed jeni">Ed Jeni</option>
</select> 
```

默认情况下，第一个下拉菜单将显示为空白，我希望隐藏“mainToon”下拉菜单，直到选择以下任何一项：

“Alt Toon”、“Cyno Toon”、“Super Toon”、“Dust Toon”

然后表格将是可见的。

我可以通过将 .hidden css 代码应用于下拉列表并在选择其他选项时动态更改类来做到这一点吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T11:55:24.453

首先隐藏您的下拉列表：-

```
<select id="mainToon" name="mainToon" style="display:none;">
</select> 
```

并像这样使用 Jquery 显示隐藏功能：-

```
$(document).ready(function(){
    $("#category").change(function(){
       var value = $(this).val();
        if(value=="Alt Toon" || value=="Cyno Toon")
        {
            $("#mainToon").show();
        }
        else 
        {
           $("#mainToon").hide();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:56:47.333

下面演示如何根据选择值显示 DIV，

```
 $(function() {
    $('#colorselector').change(function(){
          $('.colors').hide();
          $('#' + $(this).val()).show();
      });
    }); 
```

这是工作演示[。](http://jsfiddle.net/FvMYz/)

# php - 将 ID 添加到 magento 过滤器标头

> ID：15001493
> 
> 赞同：0
> 
> 时间：2013-02-21T11:48:33.823
> 
> 标签：php, magento

我的客户希望在 magento 的类别页面上应用单独的样式来过滤标题。

标题是从magento管理面板中设置的属性中提取的，不幸的是它没有为它们分配类，我试图将属性代码放在id中。

这是拉入过滤器的代码：

```
<?php if($this->canShowBlock()): ?>
<div class="block block-layered-nav">
    <div class="block-title">
        <strong><span><?php echo $this->__('Shop By') ?></span></strong>
    </div>
    <div class="block-content">
        <?php echo $this->getStateHtml() ?>
        <?php if ($this->getLayer()->getState()->getFilters()): ?>
            <div class="actions"><a href="<?php echo $this->getClearUrl() ?>"><?php echo $this->__('Clear All') ?></a></div>
        <?php endif; ?>
        <?php if($this->canShowOptions()): ?>
            <p class="block-subtitle"><?php echo $this->__('Shopping Options') ?></p>
            <dl id="narrow-by-list">
                <?php $_filters = $this->getFilters() ?>
                <?php foreach ($_filters as $_filter): ?>
                <?php if($_filter->getItemsCount()): ?>
                    <dt><?php echo $this->__($_filter->getName()) ?></dt>
                    <dd><?php echo $_filter->getHtml() ?></dd>
                <?php endif; ?>
                <?php endforeach; ?>
            </dl>
            <script type="text/javascript">decorateDataList('narrow-by-list')</script>
        <?php endif; ?>
    </div>
</div>
<?php endif; ?> 
```

我想在这一行中将 id 添加到 dt 中：

```
<dt><?php echo $this->__($_filter->getName()) ?></dt> 
```

我试过这个：

```
<dt id="filter<?php echo $this->__($_filter->getAttributeCode()) ?>"><?php echo $this->__($_filter->getName()) ?></dt> 
```

但它只是在代码应该存在的地方不输出任何内容。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T15:11:02.883

找到了答案，以防万一有人想知道我用过：

```
<dt id="filter_<?php echo $_filter->getAttributeModel()->getAttributeCode() ?>"><?php echo $this->__($_filter->getName()) ?></dt> 
```

# jquery - jQuery UI buttonset 垂直不稳定

> ID：15001495
> 
> 赞同：0
> 
> 时间：2013-02-21T11:48:37.337
> 
> 标签：jquery, jquery-ui, vertical-alignment, jqueryi-ui-buttonset

嗨，我有[这个 jsFiddle](http://jsfiddle.net/BBgEm/)，它显示了可能是一个错误。请注意，这是派生 html 的粘贴 - 基本上我以编程方式重置高度，以便所有按钮的高度相同（应该很简单）

对于它的价值：这是我在调用 butonset()*之后*所做的程序化重新高度

```
 fullHeight = 0;
  $('.jQueryUIGrid_topgrid').each(function(){
         fullHeight = ((fullHeight<$(this).height()) ? $(this).outerHeight() : fullHeight);
  });

   $('.jQueryUIGrid_topgrid').each(function(){
        $(this).css('height',fullHeight);
   }); 
```

问题不仅仅是他们的行为很奇怪，（上，下，到处都是）我在萤火虫中看不到关于为什么会发生这种情况的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:10:32.177

设置`vertical-align`一个`.ui-button`

```
#jQueryUIGrid_radio .ui-button {
    vertical-align: bottom;
} 
```

[jsfiddle](http://jsfiddle.net/rAp2t/3/)

# amazon-web-services - SNS 发布到多个 EC2 实例

> ID：15001497
> 
> 赞同：6
> 
> 时间：2013-02-21T11:48:43.370
> 
> 标签：amazon-web-services, amazon-sns

当我尝试将来自 EC2 实例的 http 端点订阅到 SNS 主题时，我收到以下消息：

“无权订阅内部端点”

有什么解决方法吗？在 AWS 中实现发布/订阅机制的最佳方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T19:59:15.967

这意味着您使用的是私有 IP 而不是公共 IP。

解决此问题的最简单方法是登录 EC2 的 AWS 控制台 ( [https://console.aws.amazon.com/ec2](https://console.aws.amazon.com/ec2) )。然后单击该实例，您可以看到它既有公共 DNS 又有私有 DNS。你想使用公共的。

要以编程方式从实例中获取此信息，您可以在实例上执行此操作：`curl -s http://169.254.169.254/2009-04-04/meta-data/public-hostname`. 这记录在这里： [http ://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AESDG-chapter-instancedata.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AESDG-chapter-instancedata.html)

# php - 用foreach对表进行排序？

> ID：15001503
> 
> 赞同：1
> 
> 时间：2013-02-21T11:49:17.630
> 
> 标签：php

不确定这是否可行，但我想按从高到低的列对 foreach 表进行排序。最后一列有一个`count`计算公式`PilotData::getAllPilotsByHub`，我希望数字最高的行始终位于表中的第一位。

```
<?php 
$allhubs = OperationsData::GetAllHubs();

foreach($allhubs as $hub)
{
?>
<tr>
    <td align="center"><?php echo $hub->icao; ?></td>
    <td align="center"><?php echo $hub->name; ?></td>
    <td align="center"><?php echo count(PilotData::getAllPilotsByHub(''.$hub->icao.'')); ?></td>
</tr>

<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:51:54.200

如果您从数据库中获取它，最好使用 ORDER BY 并获取有序数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:52:12.977

如果你以排序的方式从数据库中获取数据会更好..

说

```
query=mysql_query("SELECT * FROm table ORDER BY column_1 ASC"); 
```

然后使用 foreach 循环

由于您需要对其进行排序，因此如果您根据数据库中的升序或降序获取数据，则效率会更高...

# ios - Crittercism 报告在 main.m 上崩溃

> ID：15001505
> 
> 赞同：1
> 
> 时间：2013-02-21T11:49:21.327
> 
> 标签：ios, crash, main, crittercism

**简短描述**：我们有一个来自 main.m 的 SIGABRT 崩溃。我们得到的唯一信息是来自 Crittercism 的最小崩溃报告，我们不知道如何重现崩溃。

**详细说明**：除上述外。我们最初的理论是用户从核心数据进程中遇到了崩溃，但堆栈跟踪中没有提到这一点。我们认为当用户尝试再次运行该应用程序时，由于数据损坏，它根本无法加载。我们不会启动我们的任何代码，所以我们怎么会在这样一个真正的阶段崩溃。我们在几个不同的应用程序版本中遇到了这个问题，没有添加或删除特定的库，所以它不应该是由于任何损坏的文件。

我们不确定这里是否有任何明确的答案，因为这个问题对于我们所掌握的信息来说非常复杂，但如果有人至少可以建议**任何线索进行调查和分析**——那就太好了。

```
Crashed Thread

libsystem_kernel.dylib 0x387fb350 __pthread_kill + 8 + 8    
libsystem_c.dylib 0x35ada973 abort + 95 + 94    
libc++abi.dylib 0x3307cd4f abort_message + 75 + 74  
libc++abi.dylib 0x33079ff9 _ZL17default_terminatev + 25 + 24    
libobjc.A.dylib 0x326c9a77 _ZL15_objc_terminatev + 147 + 146    
libc++abi.dylib 0x3307a07b _ZL19safe_handler_callerPFvvE + 79 + 78  
libc++abi.dylib 0x3307a114 _ZSt9terminatev + 20 + 19    
libc++abi.dylib 0x3307b599 __cxa_current_exception_type + 1 
libobjc.A.dylib 0x326c99d1 objc_exception_rethrow + 13 + 12 
CoreFoundation 0x38328f21 CFRunLoopRunSpecific + 457 + 456  
CoreFoundation 0x38328d49 CFRunLoopRunInMode + 105 + 104    
UIKit 0x39af947d -[UIApplication _run] + 669 + 668  
UIKit 0x39af62f9 UIApplicationMain + 1121 + 1120    
DM 0x0010e41b main (main.m:14) 
```

其余线程（可能对更多信息有用）

```
Thread: Unknown Name
libsystem_kernel.dylib 0x387eb648 kevent64 + 24 + 24    
libdispatch.dylib 0x3a048658 _dispatch_mgr_thread$VARIANT$mp + 36 + 35

Thread: Unknown Name
libsystem_kernel.dylib 0x387fbd98 __workq_kernreturn + 8 + 8
libsystem_c.dylib 0x35a75a16 _pthread_wqthread + 366 + 365

Thread: Unknown Name
libsystem_kernel.dylib 0x387fbd98 __workq_kernreturn + 8 + 8
libsystem_c.dylib 0x35a75a16 _pthread_wqthread + 366 + 365

Thread: Unknown Name
libsystem_kernel.dylib 0x387eaeb4 mach_msg_trap + 20 + 20
CoreFoundation 0x383b7045 __CFRunLoopServiceMachPort + 129 + 128
CoreFoundation 0x383b5da3 __CFRunLoopRun + 883 + 882
CoreFoundation 0x38328ebd CFRunLoopRunSpecific + 357 + 356
CoreFoundation 0x38328d49 CFRunLoopRunInMode + 105 + 104
WebCore 0x3a3a9a45 _ZL12RunWebThreadPv + 445 + 444  
libsystem_c.dylib 0x35a80311 _pthread_start + 309 + 308

Thread: Unknown Name
libsystem_kernel.dylib 0x387eaeb4 mach_msg_trap + 20 + 20
CoreFoundation 0x383b7045 __CFRunLoopServiceMachPort + 129 + 128
CoreFoundation 0x383b5da3 __CFRunLoopRun + 883 + 882
CoreFoundation 0x38328ebd CFRunLoopRunSpecific + 357 + 356
CoreFoundation 0x38328d49 CFRunLoopRunInMode + 105 + 104
Foundation 0x327edbcd +[NSURLConnection(Loader) _resourceLoadLoop:] + 309 + 308
Foundation 0x3287167d __NSThread__main__ + 973 + 972
libsystem_c.dylib 0x35a80311 _pthread_start + 309 + 308

Thread: Unknown Name
libsystem_kernel.dylib 0x387eaf1c semaphore_timedwait_trap + 8 + 8
CoreLocation 0x33ff06e9 _Z22CLClientInvokeCallbackP10__CLClient13CLClientEventP11objc_object + 345 + 344
CoreLocation 0x33ff3d4d ___CLClientCreateConnection_block_invoke_0 + 389 + 388
CoreLocation 0x3402a073 __setEventHandler_block_invoke_0 + 347 + 346
libxpc.dylib 0x33f557e9 _xpc_connection_mach_event + 773 + 772
libdispatch.dylib 0x3a049529 _dispatch_mach_msg_invoke$VARIANT$mp + 125 + 124
libdispatch.dylib 0x3a045e91 _dispatch_queue_drain$VARIANT$mp + 81 + 80
libdispatch.dylib 0x3a0497b7 _dispatch_mach_invoke$VARIANT$mp + 163 + 162
libdispatch.dylib 0x3a045e91 _dispatch_queue_drain$VARIANT$mp + 81 + 80
libdispatch.dylib 0x3a045dc1 _dispatch_queue_invoke$VARIANT$mp + 41 + 40
libdispatch.dylib 0x3a045e91 _dispatch_queue_drain$VARIANT$mp + 81 + 80
libdispatch.dylib 0x3a045dc1 _dispatch_queue_invoke$VARIANT$mp + 41 + 40
libdispatch.dylib 0x3a04691d _dispatch_root_queue_drain + 185 + 184
libdispatch.dylib 0x3a046ac1 _dispatch_worker_thread2 + 85 + 84
libsystem_c.dylib 0x35a75a11 _pthread_wqthread + 361 + 360

Thread: Unknown Name
libsystem_kernel.dylib 0x387fbd98 __workq_kernreturn + 8 + 8
libsystem_c.dylib 0x35a75a16 _pthread_wqthread + 366 + 365

Thread: Unknown Name
libsystem_kernel.dylib 0x387eaeb4 mach_msg_trap + 20 + 20
CoreFoundation 0x383b7045 __CFRunLoopServiceMachPort + 129 + 128
CoreFoundation 0x383b5da3 __CFRunLoopRun + 883 + 882
CoreFoundation 0x38328ebd CFRunLoopRunSpecific + 357 + 356
CoreFoundation 0x383879bb CFRunLoopRun + 99 + 98
DM 0x0024f947 +[ASIHTTPRequest runRequests] + 151
Foundation 0x3287167d __NSThread__main__ + 973 + 972    
libsystem_c.dylib 0x35a80311 _pthread_start + 309 + 308

Thread: Unknown Name
libsystem_kernel.dylib 0x387fb594 select$DARWIN_EXTSN + 20 + 20
libsystem_c.dylib 0x35a80311 _pthread_start + 309 + 308

Thread: Unknown Name
libsystem_kernel.dylib 0x387fbd98 __workq_kernreturn + 8 + 8
libsystem_c.dylib 0x35a75a16 _pthread_wqthread + 366 + 365

Thread: Unknown Name
libsystem_kernel.dylib 0x387fbd98 __workq_kernreturn + 8 + 8
libsystem_c.dylib 0x35a75a16 _pthread_wqthread + 366 + 365 
```

非常感谢您抽出宝贵的时间 - 我们非常感谢您。

谢谢，贾斯塔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:33:25.740

崩溃是由于异常而发生的，请参见`objc_exception_rethrow`崩溃线程的堆栈跟踪，该线程是主线程。遗憾的是`Exception Backtrace`and`Exception Reason`不可用。没有它，你什么都做不了。这将向您显示代码中引发异常的位置以及实际异常是关于什么的。

异常被运行时重新抛出到另一个运行循环中，为了捕获它们，需要崩溃报告框架来支持这一点。Crittercism 在后台使用 PLCrashReporter，它确实支持这一点。但也许您安装了旧版本的 SDK，或者他们使用的是旧版本的 SDK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T08:27:28.197

@Kerni，感谢您抽出宝贵时间！

我们已经联系了 Crittercism，他们建议我们研究面包屑 - 这将允许我们在应用程序周围放置大量自定义调用（用户触发任何特定操作 + 其他重要系统调用），一旦应用程序崩溃，Crittercism 将为我们存储最后 99 个面包屑。这将使我们能够了解用户遇到此特定崩溃的过程。

此外，我们还发现了使用元数据直接联系用户并与他们交流的能力。这也可以让我们获得有关特定问题的更多信息。最重要的是，它将使我们能够更有效地对崩溃做出反应。

我知道这不是我们问题的正确答案，但至少我们将拥有所有必需的工具来在实施后获得答案。

谢谢

# solr - Solr按存储值删除文档

> ID：15001510
> 
> 赞同：1
> 
> 时间：2013-02-21T11:49:40.967
> 
> 标签：solr, lucene

我有以下架构。

```
<fields>
    <field name="id" type="string" stored="true"/>
    <field name="general" type="text" indexed="true"/>
    <field name="title" type="string" stored="true"/>
    <field name="description" type="string" stored="true"/>
    <field name="entity_type" type="int" indexed="true" stored="true"/>
    <field name="entity_id" type="int" stored="true"/>
    <field name="pic" type="string" stored="true"/>
</fields> 
```

我想通过存储值删除文档，例如通过 id 字段。那可能吗？

如果不可能，我应该删除什么来实现这一点？如果我需要将 id 字段编入索引，如何在不重新导入数据的情况下将它们转换为索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:07:51.883

如果您打算在查询中使用 Id 字段，则需要对其进行索引。
如果您将该字段标记为已索引，则需要将数据完全重新导入，因为分析已经执行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:24:09.053

一种方法是将字段 id 定义为您的[uniqueKey](http://wiki.apache.org/solr/UniqueKey)。您可以使用此 ID 删除文档。看[这里](http://wiki.apache.org/solr/UniqueKey#Use_cases_which_require_a_unique_key)

# java - Android FaceDetector 总是返回检测到的人脸数量等于 0

> ID：15001513
> 
> 赞同：2
> 
> 时间：2013-02-21T11:49:47.953
> 
> 标签：java, android, face-detection

Android 4.2，带有 Intel 加速的 Windows 模拟器。

我使用此代码并使用不同的图片始终没有人脸检测：

```
BitmapFactory.Options BitmapFactoryOptionsbfo = new BitmapFactory.Options();
BitmapFactoryOptionsbfo.inPreferredConfig = Bitmap.Config.RGB_565; 
myBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.face5,       BitmapFactoryOptionsbfo);
imageWidth = myBitmap.getWidth();
imageHeight = myBitmap.getHeight();
myFace = new FaceDetector.Face[numberOfFace];
myFaceDetect = new FaceDetector(imageWidth, imageHeight, numberOfFace);
numberOfFaceDetected = myFaceDetect.findFaces(myBitmap, myFace); 
```

这是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:04:00.323

这个例子和你做的一样：

[http://trivedihardik.wordpress.com/2011/09/13/android-face-detection-example/](http://trivedihardik.wordpress.com/2011/09/13/android-face-detection-example/)

另一个尝试的链接：

[http://www.developer.com/ws/android/programming/face-detection-with-android-apis.html](http://www.developer.com/ws/android/programming/face-detection-with-android-apis.html)

# ruby-on-rails - 如何在 Ruby on Rails 中为后端设计摘要页面？

> ID：15001524
> 
> 赞同：0
> 
> 时间：2013-02-21T11:50:13.953
> 
> 标签：ruby-on-rails, ruby

我有一个带有多个控制器的 Rails 应用程序，例如`users`、`sessions`、`preferences`和`pages`。

我以 RESTful 方式设计了所有这些控制器，因为大多数作者说这是最好的方式。

但是现在我需要为用户后端设置一个摘要/仪表板页面，我想知道如何以 RESTful 方式做到这一点。

现在我在我的有这个自定义操作`UsersController`：

```
def summary
  @title = "Summary page"  
end 
```

这可行，但根本不是 RESTful。

`SummariesController`另一种方法是通过单个操作设置一个新的`show`。但这只是控制器中的 5 行代码。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:18:05.197

我会说一个`DashboardsController`单一的动作不会是不合理的。并非所有东西都必须是 RESTful 的。静态页面之类的东西不能（因为它们不是资源）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:16:31.623

为什么不将其映射到用户资源的索引路由，即`/users`？

# objective-c - 指向数组的自由指针？

> ID：15001532
> 
> 赞同：0
> 
> 时间：2013-02-21T11:50:41.020
> 
> 标签：objective-c

我在我的目标 c 函数中有一条线可以做到这一点：

```
 for(int k=0;k<numOfBuffers;k++)
{

 float *temp=getFFT(buffersRing[k],buffersRing[k][0]);
......// do stuff with temp 
```

fft 函数返回指向 512 个浮点数组的指针

```
float* getFFT(int16_t *q, int bufferL) 
```

我的问题：

1.  在一遍又一遍地定义的函数内部`*temp`，我是否需要稍后`free`所有临时指针，或者它们会自动超出该函数？
2.  `for loop`如果我想在无论如何之后释放该功能内部的这个空间，我将如何做到这一点（在代码中......）谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:53:02.057

指针`temp`本身是函数内部的自动变量；当函数退出时它会消失。

`temp`然而，指针*指向*的内存不会被自动释放。

您必须知道`getFFT()`函数是否希望调用者释放内存。这可以通过任何一种方式实现，并且从您显示的 API 中并不清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:53:22.847

1.  是的，您需要明确释放 temp 指向的内存，否则您将发生内存泄漏。
2.  您必须将 temp 的声明移出循环以成为 abel 以在循环外释放它指向的内存。

# objective-c - 构建控制台应用程序时 CocoaAsyncSocket 未按预期运行

> ID：15001534
> 
> 赞同：0
> 
> 时间：2013-02-21T11:50:43.343
> 
> 标签：objective-c, macos, cocoaasyncsocket

我正在尝试编写一个简单的客户端，它应该使用 CocoaAsyncSocket 通过 TCP 连接到服务器。我有一个 MyClass 类，它被设置为 CocoaAsyncSocket 的委托，并且在构建“Cococa 应用程序”（带有 UI）时，该类按应有的方式工作并连接到服务器，并且正在调用 didConnectToHost 方法。

**在职的**

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    self.my = [[MyClass alloc] init];

    [self.my connect];

} 
```

但是，当使用下面的主文件构建控制台应用程序时，它不起作用。我只想启动这个类并让它在后台运行。

**不工作**

```
#import <Foundation/Foundation.h>
#import "MyClass.h"

int main(int argc, const char * argv[])
{

    @autoreleasepool {
        NSLog(@"Hello, World!");

        MyClass * my = [[MyClass alloc] init];

        [my connect];

        while(1) {
            NSLog(@"Nothing");
            sleep(1);
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:10:38.747

这将不起作用，因为`CocoaAsyncSocket`依赖于`NSRunLoop`运行，而是您`sleep(1)`不断在主线程上运行。也许将您的无限while循环替换为：

```
[[NSRunLoop mainRunLoop] run]; 
```

# error-handling - Powershell：我可以拥有的输出文件类型的数量是否有限制？

> ID：15001539
> 
> 赞同：0
> 
> 时间：2013-02-21T11:50:59.657
> 
> 标签：error-handling, powershell-2.0, file-conversion

我有一个 Powershell (2.0) 脚本，用于`Microsoft.Office.Interop.Word.WdSaveFormat`在 Word 中递归打开一系列 html 文件，然后分别使用`wdFormatDocument`和`wdFormatDOSText`参数另存为 Word 和 Text。该脚本包含每个文档类型的单独函数。

昨天，需求变了，我现在也需要输出一个 RTF 文档。我添加了`$saveFormatRTF`变量

```
$saveFormatDoc = [Enum]::Parse([Microsoft.Office.Interop.Word.WdSaveFormat], "wdFormatDocument"); 
$saveFormatTxt = [Enum]::Parse([Microsoft.Office.Interop.Word.WdSaveFormat], "wdFormatDOSText"); 
$saveFormatRTF = [Enum]::Parse([Microsoft.Office.Interop.Word.WdSaveFormat], "wdFormatRTF"); 
```

并得到以下错误。

```
Unable to find type [Microsoft.Office.Interop.Word.WdSaveFormat]: make sure that the assembly containing this type is l
oaded.
At C:\users\x46332\Desktop\cgc\CGC002.PS1:68 char:76
+ $saveFormatDoc = [Enum]::Parse([Microsoft.Office.Interop.Word.WdSaveFormat] <<<< , "wdFormatDocument");
    + CategoryInfo          : InvalidOperation: (Microsoft.Offic...rd.WdSaveFormat:String) [], RuntimeException
    + FullyQualifiedErrorId : TypeNotFound

Unable to find type [Microsoft.Office.Interop.Word.WdSaveFormat]: make sure that the assembly containing this type is l
oaded.
At C:\users\x46332\Desktop\cgc\CGC002.PS1:69 char:76
+ $saveFormatTxt = [Enum]::Parse([Microsoft.Office.Interop.Word.WdSaveFormat] <<<< , "wdFormatDOSText");
    + CategoryInfo          : InvalidOperation: (Microsoft.Offic...rd.WdSaveFormat:String) [], RuntimeException
    + FullyQualifiedErrorId : TypeNotFound

Unable to find type [Microsoft.Office.Interop.Word.WdSaveFormat]: make sure that the assembly containing this type is l
oaded.
At C:\users\x46332\Desktop\cgc\CGC002.PS1:70 char:76
+ $saveFormatRTF = [Enum]::Parse([Microsoft.Office.Interop.Word.WdSaveFormat] <<<< , "wdFormatRTF");
    + CategoryInfo          : InvalidOperation: (Microsoft.Offic...rd.WdSaveFormat:String) [], RuntimeException
    + FullyQualifiedErrorId : TypeNotFound 
```

运行将 JUST 转换为 Word 和 Text 的脚本工作正常。单独运行 RTF 就好了。但是，每当我将脚本中的 RTF 与其他输出格式结合起来时，脚本中引用的所有输出格式都会显示为“未找到”。RTF需要自己导出吗？我可以在一个脚本中拥有多少种输出文件类型是否有限制（尽管它们都是独立的函数）？有没有我没有设置的参数？

我已经[验证了](http://msdn.microsoft.com/en-us/library/bb238158.aspx)输出的成员名称是正确的，并且我已经扫描了[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word%28v=office.11%29.aspx)以寻找线索，但找不到任何会导致这种行为的东西，尤其是在将 RTF 添加到混合中时的不可预测的结果。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:46:42.167

我做了一些进一步的测试，几天后我能够毫无困难地按预期进行转换。我还测试了使用单个脚本转换为[此处列出的每种格式……除了特殊字符上的一些时髦的输出格式外，一切都很好。](http://blogs.technet.com/b/bshukla/archive/2010/07/29/how-to-convert-a-word-document-to-other-formats-using-powershell.aspx)

所以，我猜没有限制，我的测试似乎证实了这个理论。

# c# - 无法使用 query.ToObservable()，找不到参考 dll

> ID：15001540
> 
> 赞同：1
> 
> 时间：2013-02-21T11:51:00.483
> 
> 标签：c#, wpf, linq

我正在使用 Visual Studio 2010 Ultimate 来创建 WPF 应用程序（.net 4.0），并且我正在阅读来自复数的教程 for .NET Reactive Extensions Fundamentals

_http://www.pluralsight.com/training/Courses/TableOfContents/reactive-extensions

显示了一个 WPF 示例，其中在单击按钮时使用了一个简单的按钮和只读文本框，文本框的文本附加了使用 Enumerable linq 查询生成的数字。由于执行了异步任务，应用程序保持响应而不会死机。

应用程序添加了 System.CoreEx、System.Observable 和 System.Reactive 的引用

并假设一行代码就像

```
var query = from number in Enumerable.Range(1, 25) select number;

var observableQuery = query.ToObservable() // ToObservable() is not seen in intellisense 
```

因为我无法找到并添加参考。

我试图在谷歌上搜索并安装

反应式扩展来自

[http://www.microsoft.com/en-in/download/details.aspx?id=26649](http://www.microsoft.com/en-in/download/details.aspx?id=26649)

和

[http://msdn.microsoft.com/en-us/data/gg577610](http://msdn.microsoft.com/en-us/data/gg577610)

但我无法找到所有 dll 文件。我在我的系统中找到了 System.Reactive

C:\Program Files (x86)\Microsoft Reactive Extensions SDK\v1.0.10621\Binaries.NETFramework\v4.0

在谷歌上搜索时，我在某处读到 System.CoreEx 现在包含在 System.Reactive 中，因此不需要其余的是 System.Observable ，但我无法找到。

那么我在哪里可以找到那个 dll 或者我需要安装什么来获得那个 dll。我什至尝试过nuget但找不到。

如果有人可以建议在哪里可以获得 System.Observable dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T06:09:31.050

由于版本的变化，我不得不面对问题，但最终在@Lee 的帮助和指导下我可以解决它。谢谢@李。我想把所有的东西都带到这里，这样可能对其他人有帮助。

这是 xaml 部分：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<StackPanel>
    <Button Name="Start" Click="Start_Click">Start</Button>
    <TextBox Name="Results" Height="250" VerticalScrollBarVisibility="Auto" IsReadOnly="True"/>
</StackPanel> 
```

这是 .cs 文件编码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Threading;
using System.Reactive.Linq;
using System.Reactive.Concurrency;

namespace WpfApplication1
{
  /// <summary>
  /// Interaction logic for MainWindow.xaml
  /// </summary>
  public partial class MainWindow : Window
  {
    public MainWindow()
    {
        InitializeComponent();
    }

    private static string StringWait(string str)
    {
        Thread.Sleep(10);
        return str;
    }

    private void Start_Click(object sender, RoutedEventArgs e)
    {
        var query = from number in Enumerable.Range(1, 10000000)
                    select StringWait(number.ToString());
        var observableQuery = query.ToObservable(Scheduler.Default);
        observableQuery.ObserveOn(Dispatcher).Subscribe(n => Results.AppendText
            (string.Format("{0}\n",n)));

    }
  }
} 
```

最后是我需要的参考资料：

[http://i49.tinypic.com/vp7sk7.jpg](http://i49.tinypic.com/vp7sk7.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:57:57.133

[在此处](http://silverlight.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=30514)下载 Silverlight 工具包：然后添加对 System.Reactive.dll 的引用（默认情况下 - C:\Program Files\Microsoft SDKs\Silverlight\v3.0\Toolkit\Oct09\Bin）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:42:02.360

`ToObservable`扩展方法在类中定义，该类`System.Reactive.Linq.Observable`位于`System.Reactive.Linq.dll`. 因此，您需要添加对 System.Reactive.Linq 程序集的引用，并在源文件中添加一个

```
using System.Reactive.Linq; 
```

指示。

编辑：针对您的评论，您似乎想要执行以下操作：

```
IObservable<string> observableQuery = query.ToObservable();
observableQuery.subscribe(Results.AppendText); 
```

[TextBoxBase.AppendText](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.appendtext.aspx)可以转换为，并且在[ObservableExtension.Subscribe](http://msdn.microsoft.com/en-us/library/ff402849.aspx)`Action<string>`中定义了一个扩展方法，它允许订阅的方法。`Action<string>``IObservable<T>``OnNext`

要使用它，您需要添加一个引用`System.Reactive.Core.dll`并添加一个

```
using System; 
```

源文件中的指令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-04T03:20:20.897

如果您使用的是最新的 .net 框架，只需尝试安装此[Reactive Extensions (Rx)](https://www.nuget.org/packages/System.Reactive/) nuget 包，您应该可以启动并运行。

# openstack - 将图像添加到 Glance

> ID：15001541
> 
> 赞同：1
> 
> 时间：2013-02-21T11:51:02.033
> 
> 标签：openstack

我正在安装 OpenStack，我已经安装了所有服务，包括*Nova*、 *Keystone*、*Glance*。

我运行这个命令来添加 cirros 图像：

```
sudo glance add -A 999888777666 name="cirros-0.3.0-i386" is_public=true
container_format=aki disk_format=aki < cirros-0.3.0-i386-vmlinuz 
```

这个命令我没有收到任何错误，但它没有显示任何输出，例如`Kernel_ID`. 该命令不会返回任何错误，也不会成功执行以添加 vmlinuz。

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-30T05:33:21.887

您可以直接通过 wget 下载图像并将图像放在下载列表中。

转到horizo​​n，生成一个VM并使用浏览选项并选择图像。如果图像有效，它也将从那里工作。这将使您清楚地了解下载是否提取了有效文件！！！

还要重新启动glance并重新验证keystone授权以避免任何错过特别是glance服务的参数服务密码！

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T11:46:04.370

为了能够使用 nova boot 启动 vm，您需要创建正确的映像。为此，您需要运行以下命令：

```
#!bin/sh
kern_id=`glance add name="cirros-vmlinuz" is_public=true container_format=aki disk_format=aki < cirros/cirros-0.3.1-x86_64-vmlinuz|awk '{print $6}'`
ram_id=`glance add name="cirros-initrd" is_public=true container_format=ari disk_format=ari < cirros/cirros-0.3.1-x86_64-initrd|awk '{print $6}'`
glance add name="cirros" is_public=true container_format=ami disk_format=ami kernel_id=$kern_id ramdisk_id=$ram_id < cirros/cirros-0.3.1-x86_64-blank.img 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T15:22:35.937

如果要查看图像是否已添加，可以运行命令“glance image-list”

如果图像不存在，您可以查看日志以获取更多信息。

# php - PHPBB SQL 查询几乎正确

> ID：15001544
> 
> 赞同：0
> 
> 时间：2013-02-21T11:51:10.783
> 
> 标签：php, sql, phpbb

在 PHPBB 中，我正在尝试编辑 SQL 以获取更多数据，我可以在帖子中使用这些数据。标准查询从 3 个表（user_table、post_table 和 zebra_table）中获取数据。对于每一行（帖子），它将数据分配给可通过 PHPBB html 文件使用的变量，例如：

```
'username'          => $row['username'], 
```

所以在 HTML 文件中，你可以使用 {postrow.USERNAME}，它会显示当前循环/帖子的用户名。

标准查询如下所示：

```
$sql = $db->sql_build_query('SELECT', array(
'SELECT'    => 'u.*, z.friend, z.foe, p.*',

'FROM'      => array(
    USERS_TABLE     => 'u',
    POSTS_TABLE     => 'p',
),

'LEFT_JOIN' => array(
    array(
        'FROM'  => array(ZEBRA_TABLE => 'z'),
        'ON'    => 'z.user_id = ' . $user->data['user_id'] . ' AND z.zebra_id = p.poster_id'
    )
),

'WHERE'     => $db->sql_in_set('p.post_id', $post_list) . '
    AND u.user_id = p.poster_id' 
```

));

我正在尝试从“phpbb_profile_fields_data”表中提取“pf_lol_summoner”值，具体取决于它当前所在的“user_id”：

```
$sql = $db->sql_build_query('SELECT', array(
    'SELECT'        => 'u.*, pf.pf_lol_summoner, z.friend, z.foe, p.*',

    'FROM'          => array(
            USERS_TABLE             => 'u',
            POSTS_TABLE             => 'p',
    ),
    'LEFT_JOIN'     => array(
            array(
                    'FROM'  => array(ZEBRA_TABLE => 'z'),
                    'ON'    => 'z.user_id = ' . $user->data['user_id'] . ' AND z.zebra_id = p.poster_id'
            ),
            array(
                    'FROM'  => array('phpbb_profile_fields_data' => 'pf'),
                    'ON'    => 'pf.user_id = ' . $user->data['user_id']
            )
    ),
    'WHERE'         => $db->sql_in_set('p.post_id', $post_list) . '
            AND u.user_id = p.poster_id' 
```

));

现在当while循环开始循环遍历行时，如果我回显：

```
echo $row['pf_lol_summoner']; 
```

它为每个帖子显示我的“pf_lol_summoner”值，而不是每个人的值。我认为它使用了我的 user_id（在 cookie 中设置）。有人注意到什么吗？

编辑： echo $row['username']; 与所有其他值一起工作正常。

# selectonemenu - 在 Ice 中获取标签的 id 和 value

> ID：15001545
> 
> 赞同：0
> 
> 时间：2013-02-21T11:51:13.543
> 
> 标签：selectonemenu, ice

我有一个`ice:selectOneMenu`组件，需要获取从页面中选择的 id 和 value：

```
<ice:selectOneMenu partialSubmit="true" 
 value="#{bean.selectedType}" valueChangeListener="#{bean.listenerSelectedType}">
<f:selectItems value="#{bean.typeValues}"/>
<ice:selectOneMenu/>

public List<?> getTypeValues(){ 
List<SelectItem> returnList = new ArrayList<SelectItem>();
...
//SelectItem item = new SelectItem(id, label);
SelectItem item = new SelectItem("A", "B");

returnList.add(item);
}

public void listenerSelectedType(ValueChangeEvent event) {
    ...
    //The event only has the id ("A")
    //How can I get the label ("B") that is in the page?
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:27:24.540

这是真的，在表单提交时，只有`<select>`HTML 元素的值会被发送到服务器。

但是，就您而言，`selectOneMenu`使用 value 和 label 属性填充，如果您遍历创建的集合以查找所需的内容，则该标签也可以访问。

简单地说，记住您在 bean 中创建的集合并对其进行迭代以获取标签。这是一个基本示例：

```
@ManagedBean
@ViewScoped
public void MyBean implements Serializable {

    private List<SelectItem> col;

    public MyBean() {
        //initialize your collection somehow
        List<SelectItem> col = createCollection();//return your collection
        this.col = col;
    }

    public void listenerSelectedType(ValueChangeEvent event) {
        String value = (String)event.getNewValue();
        String label = null;
        for(SelectItem si : col) {
            if(((String)si.getValue()).equals(value)) {
                 label = si.getLabel();
            }
        }
    }

} 
```

顺便说一句，请务必在类构造函数或`@PostConstrct`方法中初始化您的集合，并且不要在 getter 方法中执行此（业务）工作 - 这是**[一种不好的做法](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times/2090062#2090062)**。

此外，`selectOneMenu`使用支持来实现您`Map<String, String> options`可能是一个更好的选择，因为可以通过简单的调用访问标签：`String label = options.get(value)`假设您的地图包含`<option value, option label>`as `<key, pair>`of map.

# google-maps-api-3 - Google Maps API 方向在拖动时重新计算

> ID：15001546
> 
> 赞同：2
> 
> 时间：2013-02-21T11:51:15.217
> 
> 标签：google-maps-api-3, map-directions

感谢您的时间。

**简短的：**

*   谷歌地图 API V3 项目
*   点击地图放置标记
*   路线服务计算两个连续点之间的路线

**目标：**

拖动标记之一时重新计算路线。

**进步：**

到目前为止，我已经组装了这个页面：[http](http://test.bluecactus.ro/gmaps.html) ://test.bluecactus.ro/gmaps.html 。我已经注释了大部分代码。

**问题：**

第一次拖动页面可以正常工作。当我拖动第二个标记或再次拖动第一个标记时，折线不再按照应有的方式“重新生成”（删除传入和传出，从新位置计算，在地图上绘制）。

对于同一标记上的多次拖动，一些应删除的折线将留在地图上。拖动第二个标记时，将删除错误的多段线。

这使我相信在包含所有标记的数组中识别拖动标记的位置有问题；*下面的函数*。我已经重做了几次“数学”——在纸上看起来还可以。我尝试将所有内容都放在*for*循环之外，并使用循环来识别全局变量中的位置。他们都没有工作。

**[http://test.bluecactus.ro/gmaps.html](http://test.bluecactus.ro/gmaps.html)**

```
google.maps.event.addListener(marker, 'dragend', function(event) { //ondrag
    for (var i = 0; i < gmarkers.length; i++) {
      if(gmarkers[i].getPosition() == marker.getPosition()) { //find out array position of current marker
        console.log("i = " + i);
        //hide incoming and outgoing polylines; polylines index offset by -1 (n markers => n-1 polylines)
        gpolys[i-1].setMap(null);
        gpolys[i].setMap(null);
        drawPath(gmarkers[i-1].getPosition(), marker.getPosition()); //calculate route between moved marker and previous point
        drawPath(marker.getPosition(), gmarkers[i+1].getPosition()); //calculate route between moved marker and next point
        //overwrite initial polylines; drawPath function automatically adds new polylines to end of gpolys array
        gpolys[i-1] = gpolys[gpolys.length-2]; 
        console.log(gpolys);
        gpolys[i] = gpolys[gpolys.length-1];
        console.log(gpolys);
        //delete last 2 elements from gpolys
        gpolys.pop(); 
        console.log(gpolys);
        gpolys.pop();
        console.log(gpolys);
      }
    }
}); 
```

**备注**：

*   第一个和最后一个标记不起作用，暂时不处理它们。
*   我找到了一些解决方法：在拖动时重新计算整个路线 - 获取数组中的所有标记并在 i 和 i+1 之间绘制；但是，这仅适用于较小的路线，并且不会拖到快速 - 否则 OVER_QUERY_LIMIT 将被击中。可以通过呼叫之间的延迟来解决，但每次只为一个点重新计算所有内容似乎很奇怪。

我觉得我接近解决方案，但无法掌握。任何建议将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-07T11:52:03.903

您不需要自己实现拖动方向，自 2010 年以来它已经是 JavaScript API v3 的一部分。您可以在航路点上添加标记，但路线中的任何点都是可拖动的。

[https://developers.google.com/maps/documentation/javascript/examples/directions-draggable](https://developers.google.com/maps/documentation/javascript/examples/directions-draggable) [https://developers.google.com/maps/documentation/javascript/directions#DraggableDirections](https://developers.google.com/maps/documentation/javascript/directions#DraggableDirections)

# c++ - 后处理在 windows/linux 上显示帧/屏幕

> ID：15001547
> 
> 赞同：1
> 
> 时间：2013-02-21T11:51:17.713
> 
> 标签：c++, linux, windows, image, screenshot

**一些背景** 我有一个自动立体显示器，它需要将要在屏幕上渲染的位图/帧以特定方式交错以在 3d 中显示。

对于我自己编写的程序，这没有问题，因为我已将着色器附加到我正在绘制的 opengl 缓冲区。

我想知道我是否可以对现有程序执行类似于后处理步骤的操作，因为我无法访问渲染管道。

**这是问题**

有没有办法拦截将在监视器上显示的下一帧/屏幕，以便我可以在帧可以在监视器上呈现之前对其进行过滤？我的第一个想法是创建一个屏幕截图并将其显示为叠加层。但这会慢一些。而且我还需要将所有键盘和鼠标命令传递给正在运行的实际程序。

我会很感激任何想法。（对于 Linux/Windows/任何语言 - 这只是为了证明概念 - 我不需要跨平台解决方案）

# ios - 如何使用 UISegmentedControl 与 UITableView 和分段控件和 SearchBar 不滚动

> ID：15001548
> 
> 赞同：1
> 
> 时间：2013-02-21T11:51:21.153
> 
> 标签：ios, objective-c, uitableview, uisearchbar, uisegmentedcontrol

我正在开发 iPad 应用程序。我想在搜索栏下实现隐藏段（文件、文件夹、全部）。当 SearchBar 获得焦点时，Segment Control 将在 SearchBar 下进行。确保 SearchBar 和 Segment Controller 没有滚动。

![在此处输入图像描述](../Images/00f2dda0c70409860e5126fb902f5c54.png)

有人给我idea吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T11:56:30.330

将 UISearchBar 对象和 UISegmentControll 对象添加到 tableView 的标题视图中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:50:25.840

创建一个视图控制器并打开 .xib 文件并将搜索栏和分段控件放置在您的 UIView 和 UITableView 之外。连接所有 IBOutlets 和代表。您可能会专注于这种方法`- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar`

在这种方法中，您将显示您的分段控件。在此步骤之前，您必须将分段控件隐藏在`viewDidLoad`. 在以下方法中，您可以再次隐藏分段控件

```
- (void)searchBarTextDidEndEditing:(UISearchBar *)searchBar 
```

取消按钮的方法是：

```
 - (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar 
```

搜索按钮的方法是：

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar 
```

现在这取决于您如何使用这些方法。这样，您的搜索栏或标签栏都不会滚动。

# java - 通过servlet更新当前jsp页面？

> ID：15001553
> 
> 赞同：1
> 
> 时间：2013-02-21T11:51:43.943
> 
> 标签：java, jsp, servlets

作为大学网络项目的一部分，我将编写一个网上商店的代码。

我有一个 Java servlet，我在其中将项目添加到篮子中。可以从列出项目的不同 JSP 站点调用此 servlet。我不知道如何刷新页面。

我一直在谷歌搜索，发现了 2 个建议；

```
response.setHeader("Refresh", "1"); 
```

或者

```
response.sendRedirect("/demo.jsp") 
```

我不能真正使用解决方案 2，因为我不知道我必须重定向到哪个项目，因为它从几个 JSP 站点调用，我只想留在同一页面上。

根据我从解决方案 1 中了解到的情况，这不仅仅是一次刷新，而是一个以一秒间隔不断更新站点的脚本。

所以任何人都可以帮助我：当一个项目被添加到我的购物篮时，我怎样才能刷新网站一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:54:36.980

如果你只是想刷新页面，你可以调用 reload 函数

**例子**

```
<input type="button" value="Reload Page" onClick="document.location.reload(true)"> 
```

代码礼貌[http://www.quackit.com/javascript/javascript_refresh_page.cfm](http://www.quackit.com/javascript/javascript_refresh_page.cfm)

# jquery - jQuery 不会显示隐藏的子 div

> ID：15001556
> 
> 赞同：0
> 
> 时间：2013-02-21T11:51:57.993
> 
> 标签：jquery

让我们看看这个简单的小提琴：

[提琴手](http://jsfiddle.net/ejSsn/8/)

```
 <div id="a" style="display: none;">1
 <div style="display: none;">2
  <div style="display: none;">3
   <div style="display: none;">4</div>
  </div>
 </div>
</div>
$(document).ready(function()
              {
$('#a').show('fast');
              }); 
```

我想看到所有 1 2 3 4 但我只看到 1。如何告诉 jQuery 显示所有嵌套项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:54:02.733

您需要选择所有元素，而不仅仅是父元素...

```
$('#a, #a div').show('fast'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T11:54:26.687

尝试：

```
$(document).ready(function()
{
$('#a, #a div').show('fast');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T11:54:49.540

为了显示所有 4，只需`display: none;`从嵌套`div`的 s中删除

```
<div id="a" style="display: none;">1
 <div>2
  <div>3
   <div>4</div>
  </div>
 </div>
</div>
$(document).ready(function()
              {
$('#a').show('fast');
              }); 
```

# sql - 保持存档表结构（列等）与实时表同步

> ID：15001558
> 
> 赞同：1
> 
> 时间：2013-02-21T11:52:12.450
> 
> 标签：sql, oracle, plsql, triggers, alter

我有一个包含大量数据的表 (TMain)，它被归档到一个归档表 (TArchive) - 其中记录超过 3 个月。

由于 TMain 是一个易失性表，并且其上的列会随着时间的推移而更改/删除，因此我希望进行某种控制，以便 TArchive 在 TMain 更改时始终保持同步。

在 Oracle 中实现这一目标的最佳方法是什么？

任何建议和解决方案表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:42:30.497

Oracle 中的 DDL 不是事务性的。这意味着在 Oracle 中跨两个对象复制 DDL 的**任何**自动化过程都会有些缺陷。如果第二个 DDL 语句失败怎么办？你不能回滚第一个，你被卡住了。

此外，您应该已经有一个外部组织流程来验证 DDL。例如，在许多组织中，开发人员只能对开发数据库进行更改。这些更改被传播到临时数据库以进行测试。只有 DBA 可以将这些更改在验证后推送到生产环境。即使开发人员和 DBA 是同一个人，您也应该遵循以下准则：验证每个 DDL。

由于这些原因，我建议不要自动化 DDL 复制。这看起来太麻烦了。反而：

*   如果您不经常更改表*结构*，只需在 DBA 清单中添加一条规则即可。
*   如果您过于频繁地更改表，也许您可​​以研究不需要 DDL 的替代架构。例如，将易失性信息存储为结构较少的格式（如 XML），您还可以添加通用列，这些列可能根据行保存不同类型的信息。即使是*本地化*的键值表也可以减少更改表结构的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:09:48.510

保持历史数据与当前数据存储方式相同的最佳解决方案是分区。
在11G你也可以设置间隔，oracle会自动创建新的分区。不过有一件事，如果您想使用压缩，请考虑到当有压缩分区时，DDL 更改是不可能的。

# xcode - 使用arc4random的Xcode中随机数的非重复算法中的数组为空

> ID：15001560
> 
> 赞同：1
> 
> 时间：2013-02-21T11:52:17.963
> 
> 标签：xcode, algorithm, random, arc4random, non-repetitive

我在 Xcode 中使用 arc4random 生成随机值时遇到问题。我想从随机生成中排除那些已经被拾取的数字。这是我写的算法

```
int randomValue =  (arc4random() % numberofquest)+ 1;
int kk=1;

if (kk==1) {

//first time add the first random value
[oldquest addObject: randomValue];
    }
else {
        //control if the number is already in the vector
        for (int j=1; j<[oldquest count]; j++)
        {

            if (randomValue==oldquest[j])
            {

                randomValue =  (arc4random() % numerodomande)+ 1;
            }
            else
            {
                [oldquest addObject: randomValue];
            }
        }

}
kk=kk+1 
```

但它不起作用。我想可能是因为 randomvalue 和数组中的第 j 个对象不可比较（第一个整数和第二个字符串？）。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:58:35.283

对不起，阿瑞斯的回答几乎是正确的。您可以比较两个不同的 NSNumber 对象。

这是我的解决方案：

```
- (int) generateRandomNumber {
    int number = arc4random() % 100;

    if ([chosen_numbers indexOfObject:[NSNumber numberWithInt:number]]!=NSNotFound)
        number = [self generateRandomNumber];

    [chosen_numbers addObject:[NSNumber numberWithInt:number]];
    return number;
} 
```

由于 Alessandro 在实现它时遇到了一些麻烦，因此在 UIViewController 类中提供了一个示例。这适用于 100 个数字：

```
#import "ViewController.h"

@implementation ViewController {
    NSMutableArray * chosen_numbers;    
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    chosen_numbers = [[NSMutableArray alloc] init];

    for(int i = 0; i<90; i++) {
        NSLog(@"number: %d",[self generateRandomNumber]);
    }
}

- (int) generateRandomNumber {
    int number = arc4random() % 100;

    if ([chosen_numbers indexOfObject:[NSNumber numberWithInt:number]]!=NSNotFound)
        number = [self generateRandomNumber];

    [chosen_numbers addObject:[NSNumber numberWithInt:number]];
    return number;
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:49:55.490

这个怎么样：

```
 -(void) generateRandomNumber {

        int randomValue =  arc4random_uniform(numberofquest) + 1;

        if([oldQuest indexOfObject:[NSNumber numberWithInt:randomValue] == NSNotFound) {
            //Unique value
            [oldQuest addObject:[NSNumber numberWithInt:randomValue]];
        }
        else {
            //Value already exists. Look for another one
            return [self generateRandomNumber];

        }
    } 
```

显然 oldQuest 是之前初始化的 NSMutableArray 实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T19:04:21.163

你是对的 - 它不起作用，因为这里：

```
 if (randomValue==oldquest[j]) 
```

您正在尝试将 a`int`与对象进行比较... NSArrays 只能存储对象。事实上，这条线不应该因为这个原因而工作：

```
[oldquest addObject: randomValue]; 
```

您需要将 int 装箱为 NSNumber 并将其存储在数组中：

```
NSNumber* boxedRandomValue = [NSNumber numberWithInt:randomValue];
[oldquest addObject: boxedRandomValue]; 
```

`-(int)intValue`然后在比较值之前使用 NSNumber 实例方法将其拆箱：

```
 if (randomValue==[oldquest[j] intValue]) 
```

*更新*

您还必须注意其他一些问题：

*   kk 的值在每次测试迭代中重置为 1，因此`kk == 1`始终为真，`else`从不调用该子句。您只需在此代码块之外设置一次（例如，您可以将其设为属性，在初始化时将其设置为 1，然后在此处访问并递增它）。更好的是，只需使用 [oldquest count] 代替：`if ([oldquest count]==0) {} else {}`. 然后你就可以完全不用你的`kk`柜台了。

*   您的 for 循环以 j=1 开头。这应该是 j=0 来寻址数组中的第一项（项 0）。

*更新 2*

这一行：`randomValue = (arc4random() % numerodomande)+ 1`由于它在检查循环中的位置，将导致各种其他问题。尝试以下建议之一：

*   就`return`在你遇到骗子的时候。没有数字被添加到数组中......

*   在循环内设置一个 BOOL 测试，在外面处理它：

    ```
    BOOL repeatedValue = NO;
    for (int j=0; j<[self.oldquest count]; j++){
        if (randomValue==[self.oldquest[j] intValue]) {
            repeatedValue = YES;
            break;
        }
    }
    if (repeatedValue){
        NSLog (@"value repeated");
        [self addRandom];  
        //recursive call to this code block, 
        //assuming it is a method called `addRandom`
    } 
    ```

*   尝试最后一个建议的紧凑版本（类似于 Odrakir 的解决方案） - 我已将其包含在一个`addRandom`方法中，以便您可以了解如何递归调用它。

    ```
     - (void) addRandom {
        int numberofquest = 5;
        int randomValue =  (arc4random() % numberofquest)+ 1;
        NSNumber* boxedValue = [NSNumber numberWithInt:randomValue];
        if ([self.oldquest indexOfObject:boxedValue]==NSNotFound) {
            [self.oldquest addObject: boxedValue];
        } else {
            [self addRandom];
        }
    } 
    ```

    （如果你一直循环直到你找到一个唯一的数字，你将不得不小心，因为你的总数字集是有限的`numberofquest`，所以当你有一个完整的数字集时，你最终可能会陷入无限循环。）

*   *您可以使用 MutableOrderedSet 而不是使用 NSMutableArray，而是使用 MutableOrderedSet - 它是唯一*对象的有序集合，因此不会两次添加对象。

*在@interface*

```
@property (nonatomic, strong) NSMutableOrderedSet setOfRandoms; 
```

*在@实现中*

```
int randomValue =  (arc4random() % numberofquest)+ 1;
NSNumber randomValueBoxed = [NSNumber numberWithInt:randomValue];
[setOfRandoms addObject:randomValueBoxed]; 
```

*更新 3*

前面的提示假定它是您感兴趣的随机数*列表。这是一个完整的解决方案，用于在自包含方法中返回一个新的唯一随机 int。*

您需要在 @interface 中设置 2 个属性并在*某处初始化它们*：

```
@property (nonatomic, assign) int maxRand;
    //stores the highest allowed random number

@property (nonatomic, strong) NSMutableArray* oldRands;
    //stores the previously generated numbers 
```

`uniqueRandom`每次返回一个介于 1 和 self.maxRand 之间的唯一随机数。如果已返回所有允许的数字，则返回 0。

```
- (int) uniqueRandom {
    int result = 0;
    if ([self.oldRands count] != self.maxRand) {
        int randomValue =  (arc4random() %  self.maxRand )+ 1;
        NSNumber* boxedValue = [NSNumber numberWithInt:randomValue];
        if ([self.oldRands indexOfObject:boxedValue]==NSNotFound) {
            [self.oldRands addObject: boxedValue];
            result = randomValue;
        } else {
             result = [self uniqueRandom];
        }
    }
    return result;
} 
```

您应该考虑到一旦初始化 self.maxRand 就更改它是没有意义的，除非您还重置 self.oldRands。因此，您可能想使用`const`or`#define`代替，和/或将其绑定到您的`self.oldRands`初始化程序。

# perl - 在 perl 脚本中用句子替换单词

> ID：15001561
> 
> 赞同：-6
> 
> 时间：2013-02-21T11:52:19.430
> 
> 标签：perl

有没有办法我们可以用 perl 中的完整句子替换一个单词

我知道有一个选项

```
perl -pi-back -e 's/ACTUAL_WORD/EXPECTED_WORD/g;' inputfile.txt 
```

这仅将单词替换为单词。我的要求是用 EXPECTED_SENTENCE 替换下面提到的 ACTUAL_WORD。

```
ACTUAL_WORD: test
EXPECTED_SENTENCE: this if for sandbox 
```

更新的问题我正在尝试用 perl 脚本中的 Sentence 替换单词

system("perl -pi-back -e 's/\$SHELL/genidasack.py -v --alignment=mips64 -a -s \$WORKSPACE/dbgen/ose_signals_ADA.sdt -o \$WORKSPACE/\$Product/ /g;' ~/.local/bin/envsetup_sack.py");

我得到以下错误

**Bareword 在 -e 第 1 行，“s/$SHELL/genidasack.py -v --alignment=mips64 -a -s $WORKSPACE/dbgen”附近的 -e 第 1 行，“s/$”附近找到了操作员预期的位置SHELL/genidasack.py -v --alignment=mips64 -a -s $WORKSPACE/dbgen" 搜索模式未在 -e 第 1 行终止。**

我完全失去了导致此错误的原因；当我手动运行命令时，一切正常:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T11:54:09.480

是的。只需在`EXPECTED_WORD`.

```
perl -pi-back -e 's/ACTUAL_WORD/The quick brown fox jumped over the lazy dog/g;' inputfile.txt 
```

# css - 覆盖嵌套，以保持在范围内

> ID：15001562
> 
> 赞同：0
> 
> 时间：2013-02-21T11:52:25.767
> 
> 标签：css, less

我想知道是否可以覆盖 LESS 中的嵌套，以留在我的范围内 - 只是因为它更简单...... :-)

如果我有一个具有两种状态的元素，这取决于假设一个`body`-class，我需要定义两个 CSS 对象。我希望每个模块只有一个。

```
.module {
    h1 {
        float: left;
    }
}

body.secondary {
    .module {
        h1 {
            float: right;
        }
    }
} 
```

就像你用 定义父级一样`&`，有没有办法覆盖那个父级？所以也许它看起来像这样：

```
.module {
    h1 {
        float: left;
    }

    &=body.secondary {
        h1 {
            float: right;
        }
    }
} 
```

其中`&`被定义为另一个选择器...

这可能很棒，并且使我的 CSS 在每个模块一个 CSS 对象方面更加简单。

谢谢... ：-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:43:45.287

我在[这个答案](https://stackoverflow.com/questions/11537260/less-css-abusing-the-operator-when-nesting/11544805#11544805)和[这个答案](https://stackoverflow.com/questions/11519931/less-css-accessing-classes-further-up-the-dom-tree-from-within-a-nested-class/11522508#11522508)中都对此做了一些广泛的评论。在您的特定情况下，它将是这样的：

**较少的**

```
.module {
    h1 {
        float: left;
       body.secondary & {
          float: right;
       }  
    }
} 
```

**CSS 输出**

```
.module h1 {
  float: left;
}
body.secondary .module h1 {
  float: right;
} 
```

关键是要意识到，这`&`不仅仅是针对 html 结构中的“父级”本身，而是对它所在的整个嵌套结构的字符串替换。因此，在我上面的解决方案中，嵌套的 LESS “父级”是在嵌套在其中的构造中的点处`.module h1`替换的字符串。`&``body.secondary &`

# javascript - 更改项目换另一个元素

> ID：15001568
> 
> 赞同：0
> 
> 时间：2013-02-21T11:52:36.367
> 
> 标签：javascript, html, css, html-select

所以基本上我有两个`<select>`元素，我想要的是用户在第一个中选择一个选项，`<select>`然后第二个`<select>`根据选择的内容更改其选项。第二个`<select>`是空的，当第一个`<select>`被改变时，它需要添加`<options>`到第二个`<select>`。

HTML 第一次选择：

```
<select name="roof_width" onChange="getWidth(this.selectedIndex)" value="3" class="content_selectinput" id="select_width">
    <?php
        $i = 0;
        $x = 2;
        while(isset($dak_breedte[$i]))
        {
            if(isset($roof_width_index) && $roof_width_index == $i)
            {
                echo"<option value='$i' id='$i' selected='Selected'>".$dak_breedte[$i]." Meter </option>";
                $i++;
            }                   
            else
            {
                echo"<option value='$x'>".$dak_breedte[$i]." Meter</option>";
                $i++;
            }
        }
    ?>
</select> 
```

HTML 第二选择：

```
<select name="NokBreedte" onClick="ridgeCheck()" value="3" class="content_selectinput" id="select_ridge" >
</select> 
```

JavaScript：

```
function getWidth(index)
{
    ridge_min = index - 10;
    ridge_max = index + 10
    ridge_select = document.getElementById("select_ridge");
    for(i = 0; i <= 99; i++)
    {
        if(i < ridge_min || i > ridge_max)
        {
            ridge_select.add(ridge_values[i]);
        }
    }
} 
```

第二个的文本值`<select>`存储在一个数组中。我在网上搜索了一段时间，也用 jQuery 尝试过，但没有任何效果。

要清楚，我需要的是：

当用户更改第一个`<select>`时，第二个`<select>`需要直接更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:01:08.110

如果您使用的是 jquery，请用这个替换您的函数

```
function getWidth(){
    var index = $('#select_width').val();
    ridge_min = index - 10;
    ridge_max = index + 10

    var options = '';

    for(i = 0; i <= 99; i++)
    {
        if(i > ridge_min || i < ridge_max)
        {
            options += "<option>" + ridge_values[i] + "</option>";
        }
     }

     $('#select_ridge').html(options);
} 
```

也改变

```
getWidth(this.selectedIndex) 
```

至

```
getWidth() 
```

更新

抱歉再次修改，但您使用了错误的以下条件。

```
if(i < ridge_min || i > ridge_max) 
```

应该

```
if(i > ridge_min || i < ridge_max) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:04:56.383

首先，您需要删除所有旧值（您应该在 onChange 函数中使用的所有代码）

```
//Clear the HTML Select DropdownList
$('#select_ridge option').empty(); 
```

});

在您需要添加新值之后

```
 var listvalues= new Array();    
    listvalues[0] = { Text: "val1", Value: "1" };
    listvalues[1] = { Text: "val2", Value: "2" };    
    listvalues[2] = { Text: "val3", Value: "3" };    

    $.each(listvalues, function (index) {            
            $("#select_ridge").append(GetOption(listvalues[index].Text, listvalues[index].Value));        
            });    
    });    
    function GetOption(text, value) {        
            return "<option value = '" + value + "'>" + text + "</option>"    
    } 
```

# java - 将ear文件部署到weblogic 10g

> ID：15001570
> 
> 赞同：4
> 
> 时间：2013-02-21T11:52:38.670
> 
> 标签：java, weblogic, ear

我在 java ee 中编写了项目。通过使用 java ee 版本 6。当我尝试将我的 ear 文件部署到 weblogic 10g 中时，我收到以下错误：

我怎样才能实现它？如何正确部署文件？

> 无法访问选定的应用程序。AppMerge 流进程中的异常 AppMerge 流进程中的异常 [J2EE:160161] 解析 1BB.ear 的应用程序描述符时出错：weblogic.descriptor.DescriptorException: Unmarshaller failed at weblogic.descriptor.internal.MarshallerFactory$1.createDescriptor(MarshallerFactory. java:152) 在 weblogic.descriptor.BasicDescriptorManager.createDescriptor(BasicDescriptorManager.java:306) 在 weblogic.application.descriptor.AbstractDescriptorLoader2.getDescriptorBeanFromReader(AbstractDescriptorLoader2.java:788) 在 weblogic.application.descriptor.AbstractDescriptorLoader2.createDescriptorBean(AbstractDescriptorLoader2.java) :409) 在 weblogic.application.descriptor.AbstractDescriptorLoader2。[http://xmlns.oracle.com/weblogic/weblogic-application](http://xmlns.oracle.com/weblogic/weblogic-application) 在 com.bea.staxb.runtime.internal.UnmarshalResult.getPojoBindingType(UnmarshalResult.java:361) 在 com.bea.staxb.runtime.internal.UnmarshalResult.determineTypeForGlobalElement (UnmarshalResult.java:316) 在 com.bea.staxb.runtime.internal.UnmarshalResult.determineTypeForGlobalElement(UnmarshalResult.java:326) 在 com.bea.staxb.runtime.internal.UnmarshalResult.determineRootType(UnmarshalResult.java:307) 在com.bea.staxb.runtime.internal.UnmarshalResult.unmarshalDocument(UnmarshalResult.java:158) 在 com.bea.staxb.runtime.internal.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:65) 在 weblogic.descriptor.internal.MarshallerFactory $1 .createDescriptor(MarshallerFactory.java:141) ... 119 更多。

这是我的 weblogic-application.xml 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
<weblogic-application xmlns="http://xmlns.oracle.com/weblogic/weblogic-application" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/javaee_5.xsd http://xmlns.oracle.com/weblogic/weblogic-application http://xmlns.oracle.com/weblogic/weblogic-application/1.0/weblogic-application.xsd"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:06:44.533

Try add 3 files to EAR:

1) **META-INF\application.xml**

```
<?xml version="1.0" encoding="ASCII"?>
<application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:application="http://java.sun.com/xml/ns/javaee/application_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_5.xsd" version="5">
  <display-name>My App</display-name>
  <module>
    <ejb>appEJB.jar</ejb>
  </module>
  <module>
    <web>
      <web-uri>app.war</web-uri>
      <context-root>app</context-root>
    </web>
  </module>
</application> 
```

2) **META-INF\weblogic-application.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<wls:weblogic-application xmlns:wls="http://xmlns.oracle.com/weblogic/weblogic-application" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/javaee_5.xsd http://xmlns.oracle.com/weblogic/weblogic-application http://xmlns.oracle.com/weblogic/weblogic-application/1.0/weblogic-application.xsd">
    <!--weblogic-version:10.3.2-->
    <wls:application-param>
        <wls:param-name>webapp.encoding.default</wls:param-name>
        <wls:param-value>UTF-8</wls:param-value>
    </wls:application-param>
</wls:weblogic-application> 
```

3) **META-INF\MANIFEST.MF**

```
Manifest-Version: 1.0
Class-Path: 
Weblogic-Application-Version: 1.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T12:21:23.213

在两种情况下可能会出现此错误，

1.  web.xml 文件已损坏
2.  web.xml 文件中缺少任何配置。
3.  web-app 标签可能未正确定义，这取决于您的项目。

在我的情况下，错误是由第一点引起的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-11T09:18:31.423

尝试保留 web.xml @WebContent 而不是 WEB-INF（如果以防万一）。这解决了我的问题。

# notepad++ - 删除行（以相同的 22 个字符开头）TAB 文本文件

> ID：15001576
> 
> 赞同：0
> 
> 时间：2013-02-21T11:52:58.530
> 
> 标签：notepad++

我有一个 500 000 行的文本文件（不同俱乐部成员的地址），格式为 TAB 格式（使用空格代替 TAB，因此所有列都在 中）。

有些行几乎相同（只有一列不同 - 一个人可以成为 2 个俱乐部的成员）。我不在乎删除哪条重复行，因为家庭地址相同，但我需要删除其中一个。

我可以在 EXCEL 中找到重复项（TEXT-TO-CELL 并删除它们。但随后会丢失带有列的文本模式，因为格式不是 TAB och CSV 格式。

如何在 NOTEPAD++ 或 TEXTPAD 中编写和使用正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:49:14.770

我的解决方案：

1.  在 EXCEL 中打开文本文件，使用“固定宽度”将其转换为列并添加一些新列。
2.  使用 EXCEL 在一个文件夹中重复并删除这些行
3.  将文件导出为“CSV（逗号分隔不同）”（不是“CSV WINDOWS”，因为瑞典字符“åäö”无法保存在此导出中）。
4.  已下载 ULTRA EDIT 的免费测试版
5.  使用“CSV to FIXED WIDTH”并为每列指定宽度
6.  删除了“;” 从每一列

完毕！

# javascript - 如何使用 json 对象创建水平菜单？

> ID：15001581
> 
> 赞同：0
> 
> 时间：2013-02-21T11:53:15.390
> 
> 标签：javascript, jquery, html, json, css

我有一个像

```
var data = [
        {
        "parent": "Home",
        "child": [

                ]
        },
        {"parent": "Services",
        "child": [
                {"title":"Infrastruture"},
                {"title":"Development"}

                ]
        },
        {
        "parent": "Sector",
        "child": [
                {"title":"Recruitment Consultant"},
                {"title":"Change Management"},
                {"title":"Industrial Relations"}
                ]
        },          
        ] 
```

我想针对这个 json 制作一个水平菜单。我是新的 json 对象。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:57:29.727

这应该可以完成。

标记

```
<ul id="nav"></ul> 
```

JavaScript

```
var data = [
    {
    "parent": "Home",
    "child": [

            ]
    },
    {"parent": "Services",
    "child": [
            {"title":"Infrastruture"},
            {"title":"Development"}

            ]
    },
    {
    "parent": "Sector",
    "child": [
            {"title":"Recruitment Consultant"},
            {"title":"Change Management"},
            {"title":"Industrial Relations"}
            ]
    },          
    ];
$(function() {
    var nav = $("#nav");
    $.each(data,function(idx, obj){
        if(obj.child.length>0)
        {
            nav.append('<li><a href="#">'+obj.parent+'</a><ul id="'+obj.parent+'">'); //Create Parent menu and attach Child menu items list with ID same as parent menu name.
            var parent = $("#"+obj.parent); //Select this parent to insert child items.

            //Insert child menu items.
            $.each(obj.child, function(idx, childobj){
                parent.append('<li><a href="#">'+childobj.title+'</a></li>');
            });
            nav.append('</ul></li>'); //Close each tag.
        }
        else
        {
            nav.append('<li><a href="#">'+obj.parent+'</a></li>'); //No child menu items present, just create parent menu.
        }
    });
}); 
```

这可能在语义上是错误的，因为我们有太多的标记与 JS 相结合（不是一个好主意），但只要结构保持不变，这样做就可以了。

[演示小提琴](http://jsfiddle.net/7KE2s/)

**PS：**我把*造型*部分留给你。提示：在 JS 本身中提供类以及标记。;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T11:59:20.283

您可以像访问 json 一样访问您的 json `Javascript Object`。你可以这样做：

```
for (var i = 0; i < data.length; i++) {

    createHeaderLink(data[i].parent);
    createChildLinks(data[i].child);

} 
```

# python - 如何在 python google appengine 数据存储中建立一对一的关系？

> ID：15001582
> 
> 赞同：0
> 
> 时间：2013-02-21T11:53:15.437
> 
> 标签：python, google-app-engine, google-cloud-datastore

```
class User(db.Model):
    username = db.StringProperty(required=True)
    password = db.StringProperty(required=True)
    email_address = db.StringProperty(required=True)
    profile_img = db.BlobProperty()

class Book(db.Model):
    user = db.ReferenceProperty(User, collection_name='books')
    #first build
    Book_1 = db.BooleanProperty(default=False) 
    Book_2 = db.BooleanProperty(default=False) 
    Book_3 = db.BooleanProperty(default=False) 
    Book_4 = db.BooleanProperty(default=False) 
```

嗨，我想与这两个模型建立一对一的关系。我可以做些什么来使它永远不会为每个用户创建一个以上的 Book 模型？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T13:11:55.287

我认为[get 或 insert](https://developers.google.com/appengine/docs/python/datastore/modelclass#Model_get_or_insert)可能对此有用。也许当您创建用户模型时，您可以`get_or_insert`使用用户名（可能是唯一的）作为关键的书籍模型，显然是第一次创建它并随后获取它。

```
Model.get_or_insert (key_name, **kwds) 
```

> 尝试使用给定的键名获取模型类型的实体。如果存在，get_or_insert() 会简单地返回它。如果它不存在，则创建、存储和返回具有 kwds 中给定种类、名称和参数的新实体。
> 
> get 和后续（可能的） put 操作被包装在一个事务中以确保原子性。这意味着 get_or_insert() 永远不会覆盖现有实体，并且当且仅当不存在具有给定种类和名称的实体时才会插入新实体。

# c# - 看看 Cookie 容器包含什么？

> ID：15001583
> 
> 赞同：0
> 
> 时间：2013-02-21T11:53:16.133
> 
> 标签：c#

如何在 VS2010 中调试时检查收到的所有 cookie....

```
 CookieContainer cookiejar = new CookieContainer();
                webRequest.Method = "POST";
                webRequest.Host = "www.site.com";
                webRequest.ContentType = "application/x-www-form-urlencoded";
                webRequest.UserAgent = "~~~~";
                webRequest.Accept ="~~~~";
                webRequest.Referer = "http://www.site.com";
                webRequest.CookieContainer = cookiejar;  
                HttpWebResponse webresponse =  (HttpWebResponse)webRequest.GetResponse(); 
```

`cookiejar <=`显示 6 个 cookie 的计数 ..但我在其中找不到任何 cookie 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T14:06:52.180

用这个-

```
if(Request.Cookies["key"]!=null)
{
   var value=Request.Cookies["key"].Value;
} 
```

如果不起作用，请检查大写/小写

# html - 在 H2 和 H3 行标签中，H3 包裹 H2 以适应容器

> ID：15001585
> 
> 赞同：-1
> 
> 时间：2013-02-21T11:53:20.277
> 
> 标签：html, css

我试图让 H2 和 H3 保持一致，如果有大量文本，它应该环绕 H2 标记和容器以显示图像。

应用了`display:inline-block`但文本换行对我不起作用。

[http://jsfiddle.net/4vTZA/](http://jsfiddle.net/4vTZA/)

![在此处输入图像描述](../Images/41baac218581d7113b7ace13b301e5d2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:00:13.493

在这种情况下，您需要`float`h2 元素：

```
h2 { float:left;}
h3 { display:inline; } 
```

您还需要使它们相同`line-height`以防止 h2*消耗*多行：

```
h2, h3 { line-height:20px; } 
```

[JSFiddle 示例](http://jsfiddle.net/4vTZA/7/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:01:47.203

在您的代码中-

```
div {margin:20px;}
h2 ,h3{display:inline;,float:left;}
h2
{
    font-weight:bolder;

} 
```

你会很容易地做到这一点。让您更轻松-http [://jsfiddle.net/4vTZA/6/](http://jsfiddle.net/4vTZA/6/)

# javascript - Phonegap, web-services logic?

> ID：15001606
> 
> 赞同：1
> 
> 时间：2013-02-21T11:54:00.710
> 
> 标签：javascript, html, web-services, cordova

I am wondering, if you had to describe or draw the logic behind calling a web service, while using, jQueryMobile, HTML5, CSS, Java-Script.

For example, in the Android platform. We have.

1.User Interface in an XML file, or Java

2.Behavior, in java classes. In those classes we have then all the behavior, connectivity and so on.

3.In the java class, we can write java code to interact with an external Web-service.

In a Mobile Web App we have

1.  User interface, HTML,CSS,JS (include frameworks, jQueryMobile etc...)

How about the behavior?? I know JavaScript is for behavior, but is it used also to call web services, update, download, files, text and so on?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:04:03.403

Short answer, yes.

jQuery ajax is great for updating and downloading data in your html.

```
$.ajax({
  type: "POST",
  url: "update/user/",
  data: { name: "Daniel", location: "Sweden" }
}).done(function( msg ) {
  alert( "response: " + msg );
  // set text area to msg etc..
}); 
```

For more inspiration, check out [google playground](http://code.google.com/apis/ajax/playground/)

# linux - 在 Debian 上安装 GD 库失败

> ID：15001608
> 
> 赞同：0
> 
> 时间：2013-02-21T11:54:09.230
> 
> 标签：linux, debian, gd

我正在尝试在我的 Debian 服务器上安装 GD 库，但出现以下错误：

```
# apt-get install php5-gd
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following extra packages will be installed:
  libapache2-mod-php5 libt1-5 php5-common php5-mcrypt php5-mysql
Suggested packages:
  php-pear
The following NEW packages will be installed:
  libt1-5 php5-gd
The following packages will be upgraded:
  libapache2-mod-php5 php5-common php5-mcrypt php5-mysql
4 upgraded, 2 newly installed, 0 to remove and 39 not upgraded.
Need to get 3120kB of archives.
After this operation, 545kB of additional disk space will be used.
Do you want to continue [Y/n]? y
WARNING: The following packages cannot be authenticated!
  php5-mysql php5-mcrypt libapache2-mod-php5 php5-common libt1-5 php5-gd
Install these packages without verification [y/N]? y
Err http://security.debian.org lenny/updates/main php5-mysql 5.2.6.dfsg.1-1+lenny16
  404 Not Found [IP: 128.101.240.212 80]
Err http://security.debian.org lenny/updates/main php5-mcrypt 5.2.6.dfsg.1-1+lenny16
  404 Not Found [IP: 128.101.240.212 80]
Err http://security.debian.org lenny/updates/main libapache2-mod-php5 5.2.6.dfsg.1-1+lenny16
  404 Not Found [IP: 128.101.240.212 80]
Err http://security.debian.org lenny/updates/main php5-common 5.2.6.dfsg.1-1+lenny16
  404 Not Found [IP: 128.101.240.212 80]
Err http://security.debian.org lenny/updates/main libt1-5 5.1.2-3+lenny1
  404 Not Found [IP: 128.101.240.212 80]
Err http://security.debian.org lenny/updates/main php5-gd 5.2.6.dfsg.1-1+lenny16
  404 Not Found [IP: 128.101.240.212 80]
Failed to fetch http://security.debian.org/pool/updates/main/p/php5/php5-mysql_5.2.6.dfsg.1-1+lenny16_i386.deb  404 Not Found [IP: 128.101.240.212 80]
Failed to fetch http://security.debian.org/pool/updates/main/p/php5/php5-mcrypt_5.2.6.dfsg.1-1+lenny16_i386.deb  404 Not Found [IP: 128.101.240.212 80]
Failed to fetch http://security.debian.org/pool/updates/main/p/php5/libapache2-mod-php5_5.2.6.dfsg.1-1+lenny16_i386.deb  404 Not Found [IP: 128.101.240.212 80]
Failed to fetch http://security.debian.org/pool/updates/main/p/php5/php5-common_5.2.6.dfsg.1-1+lenny16_i386.deb  404 Not Found [IP: 128.101.240.212 80]
Failed to fetch http://security.debian.org/pool/updates/main/t/t1lib/libt1-5_5.1.2-3+lenny1_i386.deb  404 Not Found [IP: 128.101.240.212 80]
Failed to fetch http://security.debian.org/pool/updates/main/p/php5/php5-gd_5.2.6.dfsg.1-1+lenny16_i386.deb  404 Not Found [IP: 128.101.240.212 80]
E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T11:59:11.130

我为 security.debian.org (195.20.242.89) 获得了不同的 IP。刷新 DNS 缓存并重试，可能他们已经移动了 IP：

```
/etc/rc.d/init.d/nscd restart 
```

然后按照说明运行

```
apt-get update 
```

在尝试再次安装之前

# jquery - 如何“手动”启动滑动事件？

> ID：15001611
> 
> 赞同：3
> 
> 时间：2013-02-21T11:54:17.803
> 
> 标签：jquery, jquery-mobile

我们如何手动启动 swipe Jquery 事件（如`$('div').click();`点击事件）？

`$('div').live('swipeleft');`无法做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:26:02.047

根据您正在使用的插件的实现，通常您可以使用合成事件[`.trigger()`](http://api.jquery.com/trigger/)以编程方式执行`swipeleft`事件处理程序。

```
$('div').trigger('swipeleft'); 
```

# ios - 如何立即停止 uisearch 搜索？

> ID：15001614
> 
> 赞同：0
> 
> 时间：2013-02-21T11:54:27.527
> 
> 标签：ios, objective-c, uisearchbar

我正在使用以下代码使用 uisearchbar、tableview 和 JSON Web 服务进行搜索。当前的问题是，尽管应用程序正在搜索并在表格视图中显示数据，但它在搜索栏中的每个文本都发生更改后进行搜索。我希望它仅在用户触摸“搜索”按钮后进行搜索。当它在 uisearch 文本字段中的每一次更改时查询网络时，它似乎被卡住了。

这是我搜索的方式：

```
-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{

    NSString *searchQuery = [NSString stringWithFormat:@"http://api.****/%@",searchText];

    NSString *jsonString = [NSString
                            stringWithContentsOfURL:[NSURL URLWithString:searchQuery]
                            encoding:NSStringEncodingConversionAllowLossy|NSUTF8StringEncoding
                            error:nil];

    NSMutableArray *itemsTMP = [[NSMutableArray alloc] init];

    SBJSON *parser = [[SBJSON alloc] init];
    NSDictionary *results = [parser objectWithString:jsonString error:nil];

    itemsTMP = [results objectForKey:@"results"];

    //   [self setDisplayItems:[results objectForKey:@"results"]];

    [self setAllItems:[itemsTMP copy]];
    self.displayItems = [itemsTMP copy];

    int a =   [displayItems count];
    NSString *countString = [NSString stringWithFormat:@"results %d",a];
    countLabel.text = countString;

    [self.tableView reloadData];

} 
```

我在想也许代码应该移到

```
-(void) searchBarSearchButtonClicked:(UISearchBar *)aSearchBar {

    [self.searchBar resignFirstResponder];

    return;
    // searchBar resigns after search clicked

} 
```

但不知道如何添加`:(NSString *)searchText`到这个方法

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:59:28.393

只需将`textDidChange`代码转换为`searchBarSearchButtonClicked`解决您问题的方法即可。

```
-(void) searchBarSearchButtonClicked:(UISearchBar *)aSearchBar {

    [self.searchBar resignFirstResponder];

    NSString *searchQuery = [NSString stringWithFormat:@"http://api.****/%@",aSearchBar.text];

    NSString *jsonString = [NSString
                            stringWithContentsOfURL:[NSURL URLWithString:searchQuery]
                            encoding:NSStringEncodingConversionAllowLossy|NSUTF8StringEncoding
                            error:nil];

    NSMutableArray *itemsTMP = [[NSMutableArray alloc] init];

    SBJSON *parser = [[SBJSON alloc] init];
    NSDictionary *results = [parser objectWithString:jsonString error:nil];

    itemsTMP = [results objectForKey:@"results"];

    //   [self setDisplayItems:[results objectForKey:@"results"]];

    [self setAllItems:[itemsTMP copy]];
    self.displayItems = [itemsTMP copy];

    int a =   [displayItems count];
    NSString *countString = [NSString stringWithFormat:@"results %d",a];
    countLabel.text = countString;

    [self.tableView reloadData];

    return;
    // searchBar resigns after search clicked

} 
```

# c++ - 如何编写可转换的代码，32 位/64 位？

> ID：15001615
> 
> 赞同：5
> 
> 时间：2013-02-21T11:54:27.703
> 
> 标签：c++, optimization, 32bit-64bit

一个 c++ 特定的问题。所以我读了一个关于什么使程序成为 32 位/64 位的问题，它得到的答案是这样的（对不起，我找不到这个问题，前几天我看了它，我又找不到了：（）：只要你不做任何“指针假设”，你只需要重新编译它。所以我的问题是，什么是指针假设？据我了解，有 32 位指针和 64 位指针，所以我认为它与那。请显示它们之间的代码差异。在编写代码时要记住的任何其他好习惯，这有助于它轻松地在 to 之间进行转换，也欢迎 :) 请与他们分享示例

附言。我知道有这篇文章： [你如何编写同时兼容 32 位和 64 位的代码？](https://stackoverflow.com/questions/32533/how-do-you-write-code-that-is-both-32-bit-and-64-bit-compatible) 但我认为对于像我这样的新程序员来说，没有好的例子有点笼统。就像什么是 32 位存储单元等。有点想把它分解一下（不是双关语^^）ds。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T12:04:53.263

一般来说，这意味着您的程序行为不应该依赖于`sizeof()`任何类型（不具有某种精确大小），无论是显式还是隐式（这也包括可能的结构对齐）。

指针只是它们的一个子集，它可能还意味着您不应该尝试依赖能够在不相关的指针类型和/或整数之间进行转换，除非它们是专门为此而制作的（例如`intptr_t`）。

以同样的方式，您需要处理写入磁盘的内容，您也不应该依赖例如内置类型的大小，因为在任何地方都相同。

每当您必须（例如由于外部数据格式）使用显式大小的类型时，例如`uint32_t`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T11:59:52.223

“指针假设”是当您编写依赖于适合其他数据类型的指针的代码时，例如`int copy_of_pointer = ptr;`- 如果 int 是 32 位类型，那么此代码将在 64 位机器上中断，因为只有部分指针将被存储.

只要指针只存储在指针类型中，应该完全没有问题。

通常，指针是“机器字”的大小，因此在 32 位架构上是 32 位，而在 64 位架构上，所有指针都是 64 位。但是，有些架构并非如此。我自己从来没有在这样的机器上工作过[除了 x86 之外，它的“远”和“近”指针 - 但现在让我们忽略它]。

大多数编译器会在您将指针转换为指针不适合的整数时告诉您，因此如果您启用警告，大多数问题将变得明显 - 修复警告，您的代码很有可能立即工作.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-21T12:23:13.050

对于格式良好的程序（即根据 C++ 的语法和语义规则编写的程序，没有未定义的行为），C++ 标准保证您的程序将具有一组可观察行为中的一个。由于程序中未指定的行为（包括实现定义的行为），可观察到的行为会有所不同。如果您避免未指定的行为或解决它，您的程序将保证具有特定且确定的输出。如果您以这种方式编写程序，您将发现您的程序在 32 位或 64 位机器上没有区别。

具有不同可能输出的程序的简单（强制）示例如下：

```
int main()
{
  std::cout << sizeof(void*) << std::endl;
  return 0;
} 
```

这个程序在 32 位和 64 位机器上*可能*会有不同的输出（但不一定）。结果`sizeof(void*)`是实现定义的。但是，当然有可能有一个程序包含实现定义的行为但被解析为定义良好：

```
int main()
{
  int size = sizeof(void*);
  if (size != 4) {
    size = 4;
  }
  std::cout << size << std::endl;
  return 0;
} 
```

该程序将始终打印出`4`，尽管它使用实现定义的行为。这是一个愚蠢的例子，因为我们本来可以 done `int size = 4;`，但是在编写独立于平台的代码时确实会出现这种情况。

所以编写可移植代码的规则是：**旨在避免或解决未指定的行为**。

以下是一些避免未指定行为的提示：

1.  不要假设超出 C++ 标准规定的基本类型的大小。也就是说，a`char`至少为 8 位，`short`并且两者`int`都至少为 16 位，以此类推。

2.  不要尝试做指针魔术（在指针类型之间转换或将指针存储在整数类型中）。

3.  不要使用 a`unsigned char*`来读取非对象的值表示`char`（用于序列化或相关任务）。

4.  避免`reinterpret_cast`。

5.  执行可能上溢或下溢的操作时要小心。在进行位移操作时要仔细考虑。

6.  对指针类型进行算术运算时要小心。

7.  不要使用`void*`.

标准中出现了更多未指定或未定义的行为。非常值得查找它们。有[一些很棒的](http://www.viva64.com/en/a/0004/)在线文章涵盖了您将在 32 位和 64 位平台之间遇到的一些更常见的差异。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T12:04:09.817

32bit 代码和 64bit 代码没有区别，C/C++ 和其他编程语言的目标是它们的可移植性，而不是汇编语言。

唯一的区别是你将在哪个发行版上编译你的代码，所有的工作都是由你的编译器/链接器自动完成的，所以别想了。

但是：如果您在 64 位发行版上编程，并且您需要使用外部库（例如 SDL），那么如果您想要编译代码，则外部库也必须以 64 位编译。

要知道的一件事是，您的 ELF 文件在 64 位发行版上会比在 32 位发行版上更大，这只是逻辑。

指针有什么意义？当您增加/更改指针时，编译器将从指向类型的大小增加您的指针。

包含的类型大小由您的处理器的寄存器大小/您正在处理的分布定义。

但是你不必关心这个，编译会为你做一切。

Sum：这就是为什么您不能在 32 位发行版上执行 64 位 ELF 文件的原因。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-21T12:24:25.403

32 位/64 位移植的典型缺陷是：

程序员的隐含假设 sizeof(void*) == 4 * sizeof(char)。如果您做出这个假设并且例如以这种方式分配数组（“我需要 20 个指针，所以我分配 80 个字节”），您的代码会在 64 位上中断，因为它会导致缓冲区溢出。

“小猫杀手”，int x = (int)&something; （反之亦然，void* ptr = (void*)some_int）。再次假设 sizeof(int) == sizeof(void*)。这不会导致溢出但会丢失数据 - 即指针的高 32 位。

这两个问题都属于称为类型别名的类（假设两种类型之间在二进制表示级别上具有同一性/可互换性/等效性），并且此类假设很常见；就像在 UN*X 上一样，假设 time_t、size_t、off_t 是 int，或者在 Windows 上，HANDLE、void* 和 long 是可互换的，等等......

关于数据结构/堆栈空间使用的假设（参见下面的 5.）。在 C/C++ 代码中，局部变量是在栈上分配的，32bit 和 64bit 模式使用的空间是不同的，这是由于以下几点，并且由于传递参数的规则不同（32bit x86 通常在栈上，64bit x86 部分在寄存器中）。在 32 位上使用默认堆栈大小的代码可能会导致 64 位上的堆栈溢出崩溃。这相对容易发现是导致崩溃的原因，但取决于应用程序的可配置性，可能难以修复。

32 位和 64 位代码之间的时序差异（由于不同的代码大小/缓存占用，或不同的内存访问特性/模式，或不同的调用约定）可能会破坏“校准”。比如说，对于 (int i = 0; i < 1000000; ++i) sleep(0); 32位和64位可能会有不同的时间......

最后是 ABI（应用程序二进制接口）。64 位和 32 位环境之间的差异通常比指针的大小更大……目前，存在 64 位环境的两个主要“分支”，IL32P64（Win64 使用的 - int 和 long 是 int32_t，只有 uintptr_t/vo​​id* 是 uint64_t，说就来自 ) 和 LP64 的大小整数而言（UN*X 使用的 - int 是 int32_t，long 是 int64_t 和 uintptr_t/vo​​id* 是 uint64_t），但也有不同对齐规则的“细分” - 有些环境假设 long , float 或 double 以它们各自的大小对齐，而其他人则假设它们以四个字节的倍数对齐。在 32 位 Linux 中，它们以 4 个字节对齐，而在 64 位 Linux 中，float 以 4 个字节对齐，long 和 double 以 8 个字节的倍数对齐。这些规则的结果是，在许多情况下，bith sizeof(struct { ...}) 和结构/类成员的偏移量在 32 位和 64 位环境之间是不同的，即使数据类型声明完全相同。除了影响数组/向量分配之外，这些问题还会影响数据输入/输出，例如通过文件 - 如果 32 位应用程序写入，例如 struct { char a; 诠释 b; 字符 c，长 d；double e } 到同一个应用程序重新编译为 64 位读入的文件中，结果将不是我们所希望的那样。刚刚给出的示例仅是关于语言原语（char、int、long 等），但当然会影响各种平台相关/运行时库数据类型，无论是 size_t、off_t、time_t、HANDLE，本质上是任何非平凡的结构/联合/类... - 所以这里的错误空间很大，}) 和结构/类成员的偏移量在 32 位和 64 位环境之间是不同的，即使数据类型声明完全相同。除了影响数组/向量分配之外，这些问题还会影响数据输入/输出，例如通过文件 - 如果 32 位应用程序写入，例如 struct { char a; 诠释 b; 字符 c，长 d；double e } 到同一个应用程序重新编译为 64 位读入的文件中，结果将不是我们所希望的那样。刚刚给出的示例仅是关于语言原语（char、int、long 等），但当然会影响各种平台相关/运行时库数据类型，无论是 size_t、off_t、time_t、HANDLE，本质上是任何非平凡的结构/联合/类... - 所以这里的错误空间很大，}) 和结构/类成员的偏移量在 32 位和 64 位环境之间是不同的，即使数据类型声明完全相同。除了影响数组/向量分配之外，这些问题还会影响数据输入/输出，例如通过文件 - 如果 32 位应用程序写入，例如 struct { char a; 诠释 b; 字符 c，长 d；double e } 到同一个应用程序重新编译为 64 位读入的文件中，结果将不是我们所希望的那样。刚刚给出的示例仅是关于语言原语（char、int、long 等），但当然会影响各种平台相关/运行时库数据类型，无论是 size_t、off_t、time_t、HANDLE，本质上是任何非平凡的结构/联合/类... - 所以这里的错误空间很大，除了影响数组/向量分配之外，这些问题还会影响数据输入/输出，例如通过文件 - 如果 32 位应用程序写入，例如 struct { char a; 诠释 b; 字符 c，长 d；double e } 到同一个应用程序重新编译为 64 位读入的文件中，结果将不是我们所希望的那样。刚刚给出的示例仅是关于语言原语（char、int、long 等），但当然会影响各种平台相关/运行时库数据类型，无论是 size_t、off_t、time_t、HANDLE，本质上是任何非平凡的结构/联合/类... - 所以这里的错误空间很大，除了影响数组/向量分配之外，这些问题还会影响数据输入/输出，例如通过文件 - 如果 32 位应用程序写入，例如 struct { char a; 诠释 b; 字符 c，长 d；double e } 到同一个应用程序重新编译为 64 位读入的文件中，结果将不是我们所希望的那样。刚刚给出的示例仅是关于语言原语（char、int、long 等），但当然会影响各种平台相关/运行时库数据类型，无论是 size_t、off_t、time_t、HANDLE，本质上是任何非平凡的结构/联合/类... - 所以这里的错误空间很大，

然后是较低级别的差异，例如手动优化装配（SSE/SSE2/...）；32bit 和 64bit 有不同（数量）的寄存器，不同的参数传递规则；所有这些都会强烈影响此类优化的执行方式，并且很有可能例如在 32 位模式下提供最佳性能的 SSE2 代码将需要重写/需要增强以提供最佳性能 64 位模式。

还有 32 位和 64 位的代码设计约束非常不同，尤其是在内存分配/管理方面；一个经过仔细编码以“最大限度地利用它可以在 32 位中获得的内存”的应用程序将在如何/何时分配/释放内存、内存映射文件使用、内部缓存等方面具有复杂的逻辑 - 其中大部分将在 64 位中是有害的，您可以“简单地”利用巨大的可用地址空间。这样的应用程序可能会重新编译为 64 位就好了，但那里的性能比一些没有最大化 32 位窥视孔优化的“古老的简单弃用版本”更差。

所以，归根结底，它也是关于增强/增益的，这就是更多工作的地方，部分是编程，部分是设计/需求。即使你的应用程序在 32 位和 64 位环境中都干净地重新编译并在两者上都经过验证，实际上是受益于 64 位？是否可以/应该对代码逻辑进行更改以使其在 64 位中做得更多/运行得更快？您可以在不破坏 32 位向后兼容性的情况下进行这些更改吗？对 32 位目标没有负面影响？增强功能将在哪里，您可以获得多少？对于大型商业项目，这些问题的答案通常是路线图上的重要标志，因为您的起点是一些现有的“赚钱者”......

# eclipse - 如何在 Eclipse 中更改字体颜色以进行调试弹出窗口？

> ID：15001619
> 
> 赞同：2
> 
> 时间：2013-02-21T11:54:37.480
> 
> 标签：eclipse, debugging, fonts

有没有人可以帮我改变日食的颜色。我已经尝试了所有可能性，但没有任何效果。

这发生在调试模式下。我看不到细节，因为它们是浅灰色的。我正在尝试更改字体颜色

![在此处输入图像描述](../Images/72826a693cedfafb01da566853d52e1a.png)

我有 ubuntu 10.4 系统

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:19:38.797

我从以下链接中找到了解决方案：

[https://askubuntu.com/questions/45001/how-to-fix-black-tooltips-in-eclipse](https://askubuntu.com/questions/45001/how-to-fix-black-tooltips-in-eclipse)

# java - 为什么 Google OAuth 2.0 代码令牌交换返回“invalid_request”？

> ID：15001621
> 
> 赞同：0
> 
> 时间：2013-02-21T11:54:43.477
> 
> 标签：java, oauth, oauth-2.0, google-oauth

我已经成功拿到了`authorization_code`。并得到`"Error" : "invalid_request"`回应`authorization_code-token exchange`。
这是我获取 Google OAuth 令牌以换取 authentication_code 的 java 代码：（
使用[HttpComponents](http://hc.apache.org/)进行 HTTP 请求）

```
String urlString = "https://accounts.google.com/o/oauth2/token";
String client_id = "<my_client_id>";
String client_secret = "<my_client_secret>";
String redirect_uri = "<my_redirect_url>";
String grant_type = "authorization_code";
HttpParams params = new BasicHttpParams();
params.setParameter("code", code);
params.setParameter("client_id", client_id);
params.setParameter("client_secret", client_secret);
params.setParameter("redirect_uri", redirect_uri);
params.setParameter("grant_type", grant_type);
HttpPost post = new HttpPost(urlString);
post.addHeader("Content-Type", "application/x-www-form-urlencoded");
post.setParams(params);
DefaultHttpClient httpClient = new DefaultHttpClient();
try {
    HttpResponse response = httpClient.execute(post);
    HttpEntity entity = response.getEntity();
    System.out.println(response.toString());
    DataInputStream in = new DataInputStream(entity.getContent());
    String line;
    while ((line = in.readLine()) != null) {
        System.out.println(line);
    }
} 
```

得到以下错误响应：

```
HTTP/1.1 400 Bad Request [Cache-Control: no-cache, no-store, max-age=0, must-revalidate, Pragma: no-cache, Expires: Fri, 01 Jan 1990 00:00:00 GMT, Date: Thu, 21 Feb 2013 11:39:04 GMT, Content-Type: application/json, X-Content-Type-Options: nosniff, X-Frame-Options: SAMEORIGIN, X-XSS-Protection: 1; mode=block, Server: GSE, Transfer-Encoding: chunked]
{
  "error" : "invalid_request"
} 
```

有什么办法可以知道究竟是什么导致了错误？
或者你能发现这个请求有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T22:55:33.187

虽然我没有使用 Apache 库的个人经验，但看起来参数是作为查询参数而不是发布的表单参数发送的。根据这个[HttpClient Quick Start](http://hc.apache.org/httpcomponents-client-ga/quickstart.html)，它应该看起来像：

```
HttpPost httpPost = new HttpPost(urlString);
List <NameValuePair> nvps = new ArrayList <NameValuePair>();
nvps.add(new BasicNameValuePair("code", code));
nvps.add(new BasicNameValuePair("client_id", client_id));
nvps.add(new BasicNameValuePair("client_secret", client_secret));
nvps.add(new BasicNameValuePair("redirect_uri", redirect_uri));
nvps.add(new BasicNameValuePair("grant_type", grant_type));
httpPost.setEntity(new UrlEncodedFormEntity(nvps));
HttpResponse response = httpclient.execute(httpPost); 
```

# javascript - 清除范围内的格式

> ID：15001625
> 
> 赞同：1
> 
> 时间：2013-02-21T11:54:50.887
> 
> 标签：javascript, range, contenteditable

contenteditable div中选定文本的格式如何清晰？

我有 range by `range = window.getSelection().getRangeAt(0);`，那么我怎样才能清除它所有子项的格式？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:36:37.383

下面将用纯文本替换范围的内容，但如果整个范围包含在单个格式化元素中，那么这种方法将不起作用并且问题要困难得多。您需要在范围边界处拆分和克隆节点。`<br>`此外，源自块元素的文本中的换行符也会丢失。因此，以下内容适用于以下内容（由管道字符表示的范围边界）：

```
<p>One |two <b>three</b> four| five</p> 
```

... 但不是

```
<p>One <b>two |three| four</b> five</p> 
```

代码：

```
function flattenRangeText(range) {
    var textNode = document.createTextNode( range.toString() );
    range.deleteContents();
    range.insertNode(textNode);
    range.selectNodeContents(textNode);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T03:14:12.543

您可以为现代浏览器尝试 Document.execCommand('removeFormat') 。

参考：[https ://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand](https://developer.mozilla.org/en-US/docs/Web/API/Document/execCommand)

> 删除格式
> 
> 从当前选择中删除所有格式。

# .net - 检测信任级别

> ID：15001626
> 
> 赞同：8
> 
> 时间：2013-02-21T11:54:51.627
> 
> 标签：.net, c#-2.0

.NET 应用程序如何检测其运行所在的信任级别？

具体来说，我想要一种方法来做类似的事情

```
 if (RUNNING IN GREATER THAN MEDIUM TRUST) { 
    // set private fields & properties using reflection
  } 
```

我目前的解决方案是使用

```
public static class CodeAccessSecurityTool {
    private static volatile bool _unrestrictedFeatureSet = false;
    private static volatile bool _determinedUnrestrictedFeatureSet = false;
    private static readonly object _threadLock = new object();

    public static bool HasUnrestrictedFeatureSet {
        get {
            if (!_determinedUnrestrictedFeatureSet)
                lock (_threadLock) {
                    if (!_determinedUnrestrictedFeatureSet) {
                        try {
                            // See if we're running in full trust
                            new PermissionSet(PermissionState.Unrestricted).Demand();
                            _unrestrictedFeatureSet = true;
                        } catch (SecurityException) {
                            _unrestrictedFeatureSet = false;
                        }
                        _determinedUnrestrictedFeatureSet = true;
                    }
                }
            return _unrestrictedFeatureSet;
        }
    }
} 
```

但是，这有点骇人听闻。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T12:19:46.053

也许这会有所帮助：

```
ActivationContext ac = AppDomain.CurrentDomain.ActivationContext;
ApplicationIdentity ai = ac.Identity;
var applicationTrust = new System.Security.Policy.ApplicationTrust(ai);
var isUnrestricted = applicationTrust.DefaultGrantSet.PermissionSet.IsUnrestricted(); 
```

或者

```
AppDomain.CurrentDomain.ApplicationTrust
  .DefaultGrantSet.PermissionSet.IsUnrestricted(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-27T10:21:15.843

从 .NET 4.0 开始，该[`AppDomain.IsFullyTrusted`属性](https://msdn.microsoft.com/en-us/library/system.appdomain.isfullytrusted.aspx)可能会有所帮助。

如果您希望在当前应用程序域上对此进行测试，请使用：

```
if (AppDomain.CurrentDomain.IsFullyTrusted)
{
    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T12:13:02.420

您可以使用以下代码：

```
private AspNetHostingPermissionLevel[] aspNetHostingPermissionLevel = new AspNetHostingPermissionLevel[] 
{  
   AspNetHostingPermissionLevel.Unrestricted, 
   AspNetHostingPermissionLevel.High, 
   AspNetHostingPermissionLevel.Medium,
   AspNetHostingPermissionLevel.Low,
   AspNetHostingPermissionLevel.Minimal
};

public AspNetHostingPermissionLevel GetTrustLevel()
{
   foreach (AspNetHostingPermissionLevel aspNetHostingPermissionLevel in aspNetHostingPermissionLevel)
   {
      try
      {
         new AspNetHostingPermission(aspNetHostingPermissionLevel).Demand();
      }
      catch (System.Security.SecurityException)
      {
         continue;
      }    

      return aspNetHostingPermissionLevel;
   }

   return AspNetHostingPermissionLevel.None;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-10-16T06:12:17.710

```
 public static class CodeAccessSecurity {
        private static volatile bool _unrestrictedFeatureSet = false;
        private static volatile bool _determinedUnrestrictedFeatureSet = false;
        private static readonly object _threadLock = new object();

        public static bool HasUnrestrictedFeatureSet {
            get {
#if __IOS__
                return false;
#elif __ANDROID__
                return false;
#else
                if (!_determinedUnrestrictedFeatureSet)
                    lock (_threadLock) {
                        if (!_determinedUnrestrictedFeatureSet) {
                            _unrestrictedFeatureSet = AppDomain.CurrentDomain.ApplicationTrust == null || AppDomain.CurrentDomain.ApplicationTrust.DefaultGrantSet.PermissionSet.IsUnrestricted();
                            _determinedUnrestrictedFeatureSet = true;
                        }
                    }
                return _unrestrictedFeatureSet;
#endif
            }
        }

    }
} 
```

# coffeescript - Coffeescript 有助于简化 if 子句

> ID：15001631
> 
> 赞同：0
> 
> 时间：2013-02-21T11:55:02.677
> 
> 标签：coffeescript

我在 Coffee Script 中有这部分代码，我不知道如何用三元 if 或类似的东西来简化它。

```
if options.tracks?
  @collection.add(options.tracks, {at: length+1, dest:options.dest})
else
  @collection.add(options, {at: length+1, dest:options.dest}) 
```

对不起愚蠢的问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:18:05.913

CoffeeScript 没有简单的三元运算符，但您可以使用 if 将产生任一分支的最后一个表达式

```
@collection.add((if options.tracks then options.tracks else options), 
  {at: length+1, dest:options.dest}) 
```

话说回来。我不会那样写，因为 imo 它有很多视觉噪音并且难以阅读。最好做

```
tracks = if options.tracks then options.tracks else options
@collection.add(tracks, {at: length+1, dest:options.dest}) 
```

甚至更好

```
tracks = options.tracks || options
@collection.add(tracks, {at: length+1, dest:options.dest}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:19:52.450

使用[存在运算符](http://coffeescript.org/#operators)将产生与您编码相同的行为：

```
@collection.add(options.tracks ? options, {at: length + 1, dest: options.dest}) 
```

我个人会摆脱一些括号/大括号，并可能为第一个参数使用单独的变量......但这更多的是关于个人喜好：

```
tracks = options.tracks ? options
@collection.add tracks, at: length + 1, dest: options.dest 
```

# java - 使用 xpath 获取子节点？

> ID：15001632
> 
> 赞同：1
> 
> 时间：2013-02-21T11:55:05.580
> 
> 标签：java, xml, xpath

我有以下xml。我需要使用 xpath 查询获取根节点的所有子节点。如何编写 xpath 表达式？

```
<rootElement> 

  <rootElementOne xmlns="http://some.com"> 
    <rootElementTwo> 
      <Id>12345</balId> 
      <name>Name1</businessName> 
     </rootElementTwo> 
  </rootElementOne> 

  <rootElementOne xmlns="http://some.com"> 
    <rootElementTwo> 
      <Id>6789</balId> 
      <name>Name2</businessName> 
     </rootElementTwo> 
  </rootElementOne>  

</rootElement> 
```

该表达式应返回以下结果：

```
 <rootElementOne xmlns="http://some.com"> 
        <rootElementTwo> 
          <Id>12345</balId> 
          <name>Name1</businessName> 
         </rootElementTwo> 
      </rootElementOne> 

      <rootElementOne xmlns="http://some.com"> 
        <rootElementTwo> 
          <Id>6789</balId> 
          <name>Name2</businessName> 
         </rootElementTwo> 
      </rootElementOne> 
```

我尝试使用`rootElement/rootElementOne/*`但没有结果。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T19:26:10.257

注意这里的术语。在 XML 中，至少在 XPath 术语中，“根节点”是文档中所有元素、文本节点、注释、处理指令和其他节点的（不可见的）祖先。根节点由 XPath 表达式寻址`/`。它不是一个元素，而是*最外层元素*的父元素，也就是*文档元素*。在您的 XML 文档中，根节点是`<rootElement>`.

此 XPath 表达式将选择所有“根节点的子节点”：

```
/node() 
```

但这会返回一个元素，即`<rootElement>`，这不是您想要的结果。

*相反，您可能想要document element*的所有子节点，所以这是您的 XPath 表达式：

```
/*/node() 
```

这将返回`<rootElementOne>`元素，以及（取决于您的设置）它们之间的文本节点，其中包含空格。

或者，也许您想要文档元素的所有子*元素*。换句话说，您不关心文本节点、注释或除元素之外的任何内容。（很多不熟悉 XML 细节的人在表示“元素节点”时会说“节点”。）

如果这就是您想要的，那么它的 XPath 表达式是

```
/*/* 
```

或者在你的情况下，你可以做

```
/rootElement/some:rootElementOne 
```

where`some`在 XPath 之外声明为`http://some.com`. 如果您想知道如何在 Java 中为 XPath 声明名称空间前缀，请告诉我们，并向我们展示您已经在使用哪些 Java 代码来调用 XPath。或者更好的是，在这个网站上搜索，因为示例代码已经有了很好的答案。

当您尝试`rootElement/rootElementOne/*`时，由于命名空间，您没有选择任何内容。表单的 XPath 步骤`rootElementOne`（在 XPath 1.0 中）表示“在无命名空间中名为 rootElementOne 的元素”。（在 XPath 2.0 中，它的意思是“在默认的 XPath 命名空间中”，并且在 XPath 之外有一些方法可以设置默认的 XPath 命名空间。）所以您要求`rootElementOne`在 no namespace 中，而您的`<rootElementOne>`元素在`http://some.com`命名空间中。

如果你想与命名空间无关，你可以使用`*`代替`rootElementOne`，或者你可以使用`*[local-name() = 'rootElementOne']`. 但是，如果您这样做是因为您不知道如何在 XML 和 XPath 中使用名称空间，那么在您学习之前，它们可能会继续成为您的肉中刺。:-)

一旦修复，您应该得到两个`<some:rootElementTwo>`元素（因为您要求 的子元素`rootElementOne`），但这仅适用于文档根节点的上下文。这是因为以元素名称开头的 XPath 表达式`X`实际上是以 开头的`child::X`，即上下文节点的子节点。如果您当时不知道上下文节点是什么，或者不想依赖它，请使用`/`or开始您的 XPath 表达式`//`。这告诉 XPath 从文档的根节点开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:00:59.013

`/rootElement/*`将返回所有`rootElementOne`你可以做一些动作的地方

`/rootElement//*`将返回以下所有内容`rootElement`

# python - 类似于列表/元组的设置器和获取器

> ID：15001633
> 
> 赞同：4
> 
> 时间：2013-02-21T11:55:10.313
> 
> 标签：python, numpy, getter-setter, correctness

我有一个使用 Numpy 的项目。其中一个类需要一组称为权重的矩阵。出于多种原因，最好将所有这些矩阵值存储为一个长向量，并让每个单独的矩阵成为其中一部分的视图。

```
self.weightvector = asmatrix(rand(nweights, 1)) # All the weights as a vector
self.weights = list() # A list of views that have the 'correct' shape

for i in range(...):
    self.weights.append(...) 
```

如果该类的用户执行类似 的操作`foo.weights[i] = bar`，那么这些权重将不再是原始权重向量的视图。

Python 是否提供了一种机制，通过该机制可以在完成索引等`foo.weights[i] = bar`操作时定义 getter 和 setter？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T11:59:29.680

当然。你想在你的类上覆盖 __setitem__ 方法。

```
class Weights(list):

    def __setitem__(self, key, value):
         .... 
```

这是文档的链接：http:
[//docs.python.org/2/reference/datamodel.html#object.__setitem__](http://docs.python.org/2/reference/datamodel.html#object.__setitem__)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:50:22.780

更多的选择：

除了实现一个新的容器类型，你可以重用现有的做你想做的事，一个元组：

```
self.weights = tuple()

for i in (...) :
    self.weights += (<new_item>,) 
```

或者，如果您真的想使用列表，请将权重设为 a`@property`并返回原始列表的副本。

```
@property
def weights(self) :
    return [j for j in self._weights] 
```

# java - 数字键盘更有效的方式

> ID：15001635
> 
> 赞同：2
> 
> 时间：2013-02-21T11:55:16.333
> 
> 标签：java, arrays, swing

有没有更有效的方法来添加按钮 R、0 和 E？是否有可能以某种方式将它们添加到数组中？

```
public Keypad() {
        setTitle("Keypad");
        setSize(220, 250);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        setLayout(new GridLayout(4, 3, 2, 2));

    JButton[] buttonArray = new JButton[10];
    for (int i = 1; i < buttonArray.length; i++) {
        buttonArray[i] = new JButton(String.valueOf(i));
        add(buttonArray[i]);
        buttonArray[i].addActionListener(this);
    }

    add(buttonR);
    add(button0);
    add(buttonE);

    setVisible(true);
    setResizable(false);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:28:23.780

你不能比现在更有效率了。您可以稍微重新组织代码以将 ActionListener 的添加和按钮的添加移动到单个方法中的层次结构中。此外，`JButton[]`它没用，所以放弃它，你会在内存中节省几个字节（但真的没什么大不了的）：

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;

public class Keypad extends JFrame implements ActionListener {

    private JButton buttonR = new JButton("R");
    private JButton button0 = new JButton("0");
    private JButton buttonE = new JButton("E");

    public Keypad() {
        setTitle("Keypad");
        setSize(220, 250);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);
        setLayout(new GridLayout(4, 3, 2, 2));
        for (int i = 1; i < 10; i++) {
            addButton(new JButton(String.valueOf(i)));
        }

        addButton(buttonR);
        addButton(button0);
        addButton(buttonE);

        setResizable(false);
        setVisible(true);
    }

    private void addButton(JButton button) {
        button.addActionListener(this);
        add(button);
    }

    @Override
    public void actionPerformed(ActionEvent e) {

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:05:32.453

“有没有可能以某种方式将它们添加到数组中？”

是的，如果这是你想要的，你可以这样做

```
JButton[] buttonArray = new JButton[10];
for (int i = 1; i < buttonArray.length+3; i++) {

   if(i<buttonArray.length){
    buttonArray[i] = new JButton(String.valueOf(i));
    add(buttonArray[i]);
    buttonArray[i].addActionListener(this);
   }
  if(i==buttonArray.length+1){add(buttonR);}
  if(i==buttonArray.length+2){add(button0);}
  if(i==buttonArray.length+3){add(buttonE);}

} 
```

这可以满足您的要求，但 AFAIK 没有更快的方法可以做到这一点。

# entity-framework - 如何扩展 dbcontext 实体类？

> ID：15001637
> 
> 赞同：0
> 
> 时间：2013-02-21T11:55:22.587
> 
> 标签：entity-framework, wcf-data-services

我已经通过 WCF 数据服务公开了一些从数据库生成的 EF5.0 实体。

数据服务由 WPF 客户端使用，该客户端获取实体（来自数据服务）并将它们存储在本地。我通过创建一个基于 WCF 实体的代码优先实体数据库来做到这一点：

```
public class LocalRaceContext : DbContext
{
    public LocalRaceContext() { }
    public LocalRaceContext(string connstr) : base(connstr) { }

    public DbSet<Participant> Participants { get; set; }
    .
    .
    . more ...
} 
```

我想使用新属性（在客户端模型中）扩展参与者。我想我可以像这样使用部分类来做到这一点：

```
public partial class Participant
{
    public virtual List<Stamp> Stamps { get; set; }
} 
```

然而，这不起作用。我是否需要部分类的某种属性？

我收到以下错误：

```
"The type 'RaceEntities+Participant' was not mapped. Check that the type has not been explicitly excluded by using the Ignore method or NotMappedAttribute data annotation. Verify that the type was defined as a class, is not primitive, nested or generic, and does not inherit from EntityObject." 
```

**编辑：**

@IronMan84：原始模型（没有部分类）有效，因为 EF 代码优先负责数据库和表的创建。实际上它工作得非常好，我可以将 EF 模型保存在本地 SQL CE 文件中，并在以后再次检索对象作为 EF 类。

我想要实现的是在本地保存来自数据服务的数据，但是在一个稍微扩展的模型中。到目前为止，我已经成功了，直到扩展部分。

@Matt Whetton：当我创建 LocalRaceContext 的新实例时它失败了。

**Edit2：**我试图创建一个空的部分类（没有属性）。它仍然会引发相同的错误。

提前致谢

弗雷德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T00:25:41.830

EF 尚不支持嵌套类。将 Participant 类移到 RaceEntities 之外。

# c++ - 使用最少代码的 Windows 7 任务栏状态

> ID：15001638
> 
> 赞同：13
> 
> 时间：2013-02-21T11:55:23.643
> 
> 标签：c++, windows-7, console-application, taskbar

为已知窗口句柄设置 Windows 7 任务栏按钮状态的最短代码是什么？

目标是编写一个控制台实用程序，从批处理脚本更改控制台窗口任务栏项目的进度和状态（颜色）。当脚本执行不同的任务时，其控制台窗口的任务栏项目应该代表当前状态。

我使用 GetConsoleWindow() 函数获得了窗口句柄，但它似乎需要加载我不理解的 COM 和 Shell API 内容。我发现的一个示例使用带有 MFC 的整个 GUI 应用程序来演示 API，但其中大部分对于我的小工具来说太复杂了，而且我对它的理解还不够好，无法删除我不需要的东西。

该工具应该在带有 VS2010 (C++) 的 Windows 7 上编译，但也可以在早期的 Windows 版本上运行（如果某个功能不可用，则不执行任何操作）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-21T13:04:46.463

我创建了一个类来一次设置项目在 Win7 任务栏中的进度。[`ITaskBarList3`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd391692%28v=vs.85%29.aspx)它是 Windows Shell 提供的接口的包装器。它是专门用[`ITaskBarList3.SetProgressState`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd391697%28v=vs.85%29.aspx)和[`ITaskBarList3.SetProgressValue`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd391698%28v=vs.85%29.aspx)函数完成的。

这是我挖出来的代码：

```
#include <shobjidl.h>
#include <windows.h>
#pragma comment(lib, "Shell32.lib")
#pragma comment(lib, "Ole32.lib")

class Win7TaskbarProgress  
{
public:
    Win7TaskbarProgress();
    virtual ~Win7TaskbarProgress();

    void SetProgressState(HWND hwnd, TBPFLAG flag);
    void SetProgressValue(HWND hwnd, ULONGLONG ullCompleted, ULONGLONG ullTotal);

private:
    bool Init();
    ITaskbarList3* m_pITaskBarList3;
    bool m_bFailed;
};

Win7TaskbarProgress::Win7TaskbarProgress()
{
    m_pITaskBarList3 = NULL;
    m_bFailed = false;
}

Win7TaskbarProgress::~Win7TaskbarProgress()
{
    if (m_pITaskBarList3)   
    {
        m_pITaskBarList3->Release();
        CoUninitialize();
    }
}

void Win7TaskbarProgress::SetProgressState( HWND hwnd, TBPFLAG flag )
{
    if (Init())
        m_pITaskBarList3->SetProgressState(hwnd, flag);
}

void Win7TaskbarProgress::SetProgressValue( HWND hwnd, ULONGLONG ullCompleted, ULONGLONG ullTotal )
{
    if (Init())
        m_pITaskBarList3->SetProgressValue(hwnd, ullCompleted, ullTotal);
}

bool Win7TaskbarProgress::Init()
{
    if (m_pITaskBarList3)
        return true;

    if (m_bFailed)
        return false;

    // Initialize COM for this thread...
    CoInitialize(NULL);

    CoCreateInstance(CLSID_TaskbarList, NULL, CLSCTX_INPROC_SERVER, IID_ITaskbarList3, (void **)&m_pITaskBarList3);

    if (m_pITaskBarList3)
        return true;

    m_bFailed = true;
    CoUninitialize();
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T14:27:25.480

请注意，您仍然需要调用`RegisterWindowMessage("TaskbarButtonCreated")`并`ChangeWindowMessageFilterEx()`设置消息过滤器`SetProgressValue()`才能工作。

根据 MSDN 文档，您应该在每次收到创建的消息时重新创建对象，但我发现我只需要这样做`ChangeWindowMessageFilterEx()`，它在正常情况下工作正常。

# php - foreach 构造

> ID：15001640
> 
> 赞同：0
> 
> 时间：2013-02-21T11:55:25.940
> 
> 标签：php

我在`foreach`循环中没有什么困惑。

`foreach`我的以下代码中有一个：

```
foreach ($myrows as $rows){
    $option = $rows->option_value;
    $option_value = recursive_unserialize_replace($site_url,$_POST['url_name'],$option);
    $sql.= '('."'".$rows->option_name."'".','."'".$option_value."'".','."'".$rows->autoload."'".')'.",";
} 
```

看第 3 行。有一个逗号是我用来打印的。现在我不想在最后一行打印逗号。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T11:59:04.097

试试这个：

```
$array = array();

foreach ($myrows as $rows){
   $option = $rows->option_value;
   $option_value = recursive_unserialize_replace($site_url,$_POST['url_name'],$option);
   $array[] = '('."'".$rows->option_name."'".','."'".$option_value."'".','."'".$rows->autoload."'".')';
}

$sql = join(', ', $array); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:01:24.193

在循环之后，您可以使用以下`trim()`函数删除尾随逗号：

```
$sql = trim($sql, ','); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:57:46.167

只需在最后执行此操作：

```
$sql = substr($sql, 0, strlen($sql)-1); 
```

这不会打印最后一个逗号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-14T13:20:46.693

如果您想要更少的操作并更好地使用内存和性能，您还可以检查 foreach 的指针在哪里：

```
foreach ($myrows as $rows){
    $option = $rows->option_value;
    $option_value = recursive_unserialize_replace($site_url,$_POST['url_name'],$option);
    if ($rows === end($myrows)){
        $sql.= "('{$rows->option_name}','{$option_value}','{$rows->autoload}')";
    }else{
        $sql.= "('{$rows->option_name}','{$option_value}','{$rows->autoload}'),";
    }
} 
```

# c# - 为 DropDownList BInding 制作全局方法

> ID：15001642
> 
> 赞同：0
> 
> 时间：2013-02-21T11:55:29.960
> 
> 标签：c#, asp.net, methods

我正在从这样的数据库中返回一个列表；

```
ClsCampus campus = new ClsCampus();
List<ClsCampus> camp = campus.GetCampusAll();
Utility.BindComboBox(ComboBoxCampus, camp, "CampusName", "CampusId"); 
```

我有一个类名`Utillity`，我在其中创建了一个名为`BindComboBox`.

```
public static void BindComboBox(DropDownList listName, List<Object> list, 
    string textField, string valueField)
{
    listName.DataTextField = textField;
    listName.DataValueField = valueField;
    listName.DataSource = list;
    listName.DataBind();
} 
```

但是，它给了我一个编译错误。 **那么，我如何编写一个通用方法，我可以将通用记录列表绑定到组合框**

**错误 1**

```
The best overloaded method match for 'KenMISSchool.Repository.Utility.BindComboBox(System.Web.UI.WebControls.DropDownList, System.Collections.Generic.List<object>, string, string)' has some invalid arguments D:\Projects\KenMISSchool\Web\forms\student\registration.aspx.cs 20  9   Web 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:00:08.180

您正在通过`List<ClsCampus>`但方法期望`List<Object>`，所以我会将其更改为通用方式：

```
public static void BindComboBox<T>(DropDownList listName, List<T> list, string textField, string valueField)
{
    listName.DataTextField = textField;
    listName.DataValueField = valueField;
    listName.DataSource = list;
    listName.DataBind();
} 
```

并这样称呼它：

```
Utility.BindComboBox<ClsCampus>(ComboBoxCampus, camp, "CampusName", "CampusId"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:31:44.200

我们有类似的想法，但以另一种方式解决了它。我不确定它是否适合你，但这里有一个建议：

我们实现了一个名为 IDropdownable 的接口（我知道这不是最好的名字），它强制了两个属性：

```
public string dropdown_value;
public string dropdown_text; 
```

然后我们在所有需要轻松绑定到下拉列表的类上实现了这个接口：

```
public class Foo : IDropdownable
{
    //Let's say these fields are already in the class:
    private int _id;
    private string _name;
    private DateTime _date;

    //The interface was then implemented:
    public string dropdown_value
    {
        get
        {
            return this._id.ToString();
        }
    }

    public string dropdown_text
    {
        get
        {
            return String.Format("{0} ({1})", this._name, this._date.Year);
            //Or simpler: return this._name;
        }
    }

} 
```

剩下的唯一一件事就是创建一个通用函数，该函数接受一个`IDropdownable`参数并以您喜欢的方式输出下拉列表（HTML `string`, `SelectList`, `List<SelectListItem>`, ... 那里有很多选项）。

```
public List<SelectListItem> GenerateDDL(
                    List<IDropdownable> items, 
                    string selected_value) 
{ ... } 
```

如果你愿意，我可以给你一个函数的近似值。

**评论**

我们在 MVC2 ASP.Net 4 中做到了这一点。老实说，我不确定在经典 ASP.NET 中应该返回什么类型，但我假设某种类型的 List/Array 会起作用。

# php - 超链接在电子邮件中显示为链接但不可点击（雅虎和 gmail）

> ID：15001645
> 
> 赞同：-2
> 
> 时间：2013-02-21T11:55:34.397
> 
> 标签：php, html, email, hyperlink

我一直在尝试使用 PHP 从我的服务器发送电子邮件，但电子邮件中的超链接不可点击。

它们看起来像蓝色的链接，但它们没有链接。

这就是我所拥有的：

```
$subject = "Email subject";
$l="http://www.goo.gl/Oa7dl";

$txt="<a href'$l' target='_blank' title='CLICK HERE TO LEARN MORE AND APPLY'><img src='http://www.abc.com/pics/click_here.png' alt='CLICK HERE TO LEARN MORE AND APPLY' /></a> or FOLLOW LINK: <a href'$l' target='_blank'>http://goo.gl/Oa7dl</a>";

$mmm=array('abc@yahoo.com', 'xyz@gmail.com'); 

require_once 'swift/lib/swift_required.php';        
$transport = Swift_SmtpTransport::newInstance('localhost', 25);
$mailer = Swift_Mailer::newInstance($transport);
$message = Swift_Message::newInstance("$subject")
  ->setFrom(array('no_reply@abc.com' => 'abc.com'))
  ->setTo($mmm)
  ->setBody($txt, 'text/html')
 ;

$numSent = $mailer->batchSend($message); 
```

![超链接错误截图](../Images/1e8698c25f8564209fa6956a65be4102.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T11:58:43.207

`<a href='$l'`不是`<a href'$l'`

你错过了`=`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T11:59:21.973

将变量替换为其值将导致：

```
href'http://www.goo.gl/Oa7dl' 
```

这意味着您缺少一个`=`after href。它应该是：

`href='http://www.goo.gl/Oa7dl'`或者`href='$l'`

# android - APV PDF 查看器崩溃

> ID：15001646
> 
> 赞同：2
> 
> 时间：2013-02-21T11:55:35.467
> 
> 标签：android, android-ndk

我是 Android NDK 的新手。这是我的第一个项目。[我从http://code.google.com/p/apv/downloads/list](http://code.google.com/p/apv/downloads/list)下载了安卓 PDF 阅读器。它正在正确编译，但是当我尝试从这个应用程序加载 PDF 时。它显示以下错误：

```
07-03 10:18:06.171: ERROR/AndroidRuntime(375): FATAL EXCEPTION: main
07-03 10:18:06.171: ERROR/AndroidRuntime(375): java.lang.ExceptionInInitializerError
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at cx.hell.android.pdfview.OpenFileActivity.getPDF(OpenFileActivity.java:541)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at cx.hell.android.pdfview.OpenFileActivity.startPDF(OpenFileActivity.java:502)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at cx.hell.android.pdfview.OpenFileActivity.onCreate(OpenFileActivity.java:219)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at android.os.Looper.loop(Looper.java:123)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at android.app.ActivityThread.main(ActivityThread.java:4627)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at java.lang.reflect.Method.invokeNative(Native Method)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at java.lang.reflect.Method.invoke(Method.java:521)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at dalvik.system.NativeStart.main(Native Method)
07-03 10:18:06.171: ERROR/AndroidRuntime(375): Caused by: java.lang.UnsatisfiedLinkError: Library pdfview2 not found
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at java.lang.Runtime.loadLibrary(Runtime.java:461)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at java.lang.System.loadLibrary(System.java:557)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     at cx.hell.android.lib.pdf.PDF.<clinit>(PDF.java:25)
07-03 10:18:06.171: ERROR/AndroidRuntime(375):     ... 16 more 
```

我在很多问题中都看到了类似的错误。由于我是 NDK 的新手，我不明白该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:20:21.363

看起来这导致了错误 `Caused by: java.lang.UnsatisfiedLinkError: Library pdfview2 not found`

只需下载这个库，[pdfview2](http://code.google.com/p/apv/downloads/detail?name=pdfview2.apk)

使用任何 zip 工具打开文件并在项目中复制必要的文件，您就可以开始了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T22:05:42.937

当您不加载本机库时，您会收到此错误。发生这种情况的原因有很多。首先，您需要确保您的`Android.mk`文件（在您的`jni`目录中）设置正确。假设它（或它们）设置正确，找到如下所示的行：

```
LOCAL_MODULE := libpdfview2 
```

请注意它的名称，因为它很重要。接下来，将以下行添加到您的 Activity（或多 Activity 应用程序中的应用程序）的顶部：

```
static {
    System.loadLibrary("pdfview2");
} 
```

在这里，请注意名称。它是删除了 lib 前缀的本地模块的名称。假设 NDK 构建工作正常，并且 Android.mk 文件设置正确，这将解决您的问题。

* * *

**编辑**

另外，你在这里读过关于建立图书馆的信息[吗](http://code.google.com/p/apv/wiki/Building)？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T10:50:49.553

```
Caused by: java.lang.UnsatisfiedLinkError: Library pdfview2 not found 
```

上述异常是由于未找到指定库的链接而导致的，这是不言自明的，但实际上是因为从项目中创建了相关项目的 .so 文件时，.so 函数是根据项目的包结构创建的项目。所以我们不能在我们的项目中直接使用那个 .so 。

您需要使用您的应用程序包重新构建 .so 文件，之后此错误将无效，您也将能够获得本机功能访问权限。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T15:20:33.343

PDF 打开还有另一种解决方案，请看这里：

[在 Android 中打开 PDF](https://stackoverflow.com/questions/13468710/open-pdf-in-android)

我认为如果没有您的代码，将很难想象会发生什么。

# java - 反正有没有缩短 if else 语句而不是绕圈子

> ID：15001651
> 
> 赞同：1
> 
> 时间：2013-02-21T11:55:52.663
> 
> 标签：java, if-statement, statements

我有一只猫跑过屏幕，在屏幕中间停下来抓挠两次。我当前的代码看起来像

```
private void scratch(){
for (int i = xPos; i < getWidth(); i+=0) {
    xPos = i;
    // swap images
    if (currentImage == nekoPics[0]) 
        currentImage = nekoPics[2];
    else if (currentImage == nekoPics[2])
        currentImage = nekoPics[4];
    else if (currentImage == nekoPics[4])
        currentImage = nekoPics[5];
    else if (currentImage == nekoPics[5])
        currentImage = nekoPics[4];
    else if (currentImage == nekoPics[4]) 
        currentImage = nekoPics[5];
    else 
        currentImage = nekoPics[0] 
```

有没有比让它们像这样大圈子更简单的方法来制作 if else 语句？

在此先感谢（PS：我假设您可以使用某种计数器来执行此操作，但我不太确定如何进行此操作，感谢您的帮助）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:00:02.357

您可以保留当前图像的索引，并在每次迭代时增加它，例如：

```
currentImage = nekoPics[currentIndex%6];
currentIndex++; 
```

或者

```
currentImage = nekoPics[currentIndex];
if (++currentIndex==6) currentIndex=0; 
```

这就要求 nekoPics 中的图像按照动画的顺序进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:10:23.567

除了其他地方建议的地图之外，您可以只使用一个数组；您需要跟踪当前图像的索引：

```
int[5] nextImageList
  = { 2, ?, 4, 5, 4 }

next = nextImageList[currentImageIndex];
currentImage = nekoPics[next];
currentImageIndex = next; 
```

初始化 currentImage 和 currentImageIndex 后不需要“if”。我不确定 1 是否是任何地方的有效索引，如果不是，任何东西都可以进入数组的 1 插槽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:00:12.093

如果你阻止那只猫出现在你的屏幕前，编码可能会更容易......

不过说真的，您可以通过制作一个定义图片序列的对象来解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T15:21:46.750

我打算使用数组发布类似于[rcook的答案。](https://stackoverflow.com/users/1013112/rcook)我认为这是最容易理解的解决方案。

然而，他的回答在数组维度上有一个小错误。为了完整起见，我将其发布，但应将信用指向他。

```
// Elsewhere, in your initialization:
int currentImageIndex = 0; // Assuming [0] is your first image.
int[] nextImageList = { 2, -1, 4, -1, 5, 4 };
// Given the current index, this array will direct you
// to the next image index. Those -1 are unknown (to us).
// Set them to the values you need.

private void scratch() {
    for (int i = xPos; i < getWidth(); ) {
        xPos = i;

        // Swap images.
        currentImageIndex = nextImageList[currentImageIndex];
        currentImage = nekoPics[currentImageIndex];

        // What else you were doing here.
    }
} 
```

# spring-security - @PreAuthorize：实现类中的引用属性

> ID：15001653
> 
> 赞同：2
> 
> 时间：2013-02-21T11:56:04.547
> 
> 标签：spring-security, spring-el

我有服务接口

```
public interface CompoundService<T extends Compound> {

    T getById(final Long id);

    //...
} 
```

和抽象实现

```
public abstract class CompoundServiceImpl<T extends Compound>
        implements CompoundService<T> {

    //...   

    private Class<T> compoundClass;

    //...
} 
```

的每个实现都`Compound`需要它自己的扩展服务接口`CompoundService`和它自己的扩展服务类`CompoundServiceImpl`。

我现在想在`CompoundService`. 据我了解，我必须将它们添加到接口而不是实际实现中。由于用户可以针对不同的实现具有不同的角色`Compound`，因此我必须考虑到这一点。意思是`@PreAuthorize`我想获得`Compound`实现的名称，例如。`compoundClass.getSimpleName()`. 所以我得到类似的东西：

```
public interface CompoundService<T extends Compound> {

    @PreAuthorize("hasRole('read_' + #root.this.compoundClass.getSimpleName())")
    T getById(final Long id);

    //...
} 
```

这基本上就是这里提到的：

[https://jira.springsource.org/browse/SEC-1640](https://jira.springsource.org/browse/SEC-1640)

但是没有示例，我并没有真正得到解决方案。那我应该用`this`吗？或如上`#root.this`？

我的第二个问题是，因为这是在一个将由代理（来自 spring）实现的接口中，所以 experession 是否会`this.compoundClass`正确评估？

最后但并非最不重要的一点是，我该如何实际测试呢？*

* 我实际上并没有创建一个完成的应用程序，而是一些可配置的东西，比如用于特定类型数据库搜索的框架。这意味着大多数授权和身份验证的东西必须来自实施者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:07:53.263

1.  单元测试

见[http://www.lancegleason.com/blog/2009/12/07/unit-testing-spring-security-with-annotations](http://www.lancegleason.com/blog/2009/12/07/unit-testing-spring-security-with-annotations)

由于这是一个旧教程，您可能需要更改引用的架构版本。但更重要的是，此处显示的 SecurityContext.xml 配置不适用于 Spring Security 3。有关正确配置，请参阅[Spring Security - multiple authentication-providers](https://stackoverflow.com/questions/8999985/spring-security-multiple-authentication-providers)。

我不需要提到的依赖项：

```
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjweaver</artifactId>
</dependency>
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-core-tiger</artifactId>
</dependency> 
```

它在没有它们的情况下工作（但是没有创建抽象测试类）

2.  # 根.this

这实际上是正确的方法

问题是您不能使用类参数的 getSimpleName() 。有关深入讨论，请参阅[http://forum.springsource.org/showthread.php?98570-Getting-Payload-Classname-in-Header-Enricher-via-SpEL](http://forum.springsource.org/showthread.php?98570-Getting-Payload-Classname-in-Header-Enricher-via-SpEL)

那里显示的解决方法对我没有多大帮助。所以我想出了这个非常简单的解决方案：

只需添加字符串属性并将`String compoundClassSimpleName`其`CompoundServiceImpl`设置在构造函数中（由子类调用）：

```
Public abstract class CompoundServiceImpl<T extends Compound>
    implements CompoundService<T> {

    private String compoundClassSimpleName;

    //...

    public ChemicalCompoundServiceImpl(Class<T> compoundClass) {
        this.compoundClass = compoundClass;
        this.compoundClassSimpleName = compoundClass.getSimpleName();
    }

    //...

    public String getCompoundClassSimpleName(){
        return compoundClassSimpleName;
    }   
} 
```

和她实现上述抽象服务的服务：

```
public class TestCompoundServiceImpl extends CompoundServiceImpl<TestCompound>
        implements TestCompoundService {

    //...   

    public TestCompoundServiceImpl() {
        super(TestCompound.class);
    }

    //...   

} 
```

最后`@PreAuthorize`注释用法：

```
public interface CompoundService<T extends Compound> {

    @PreAuthorize("hasRole('read_' + #root.this.getCompoundClassSimpleName())")
    public T getById(final Long id);
} 
```

对于上面的示例，表达式将评估为名为“read_TestCompound”的角色。

完毕！

通常解决方案非常简单，但要到达那里有一个 PITA ......

编辑：

为了完整性测试类：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {
        "classpath:ApplicationContext.xml",
        "classpath:SecurityContext.xml"
        })
public class CompoundServiceSecurityTest {

    @Autowired
    @Qualifier("testCompoundService")
    private TestCompoundService testCompoundService;

    public CompoundServiceSecurityTest() {
    }

    @Before
    public void setUp() {
        SecurityContextHolder.getContext().setAuthentication(
            new UsernamePasswordAuthenticationToken("user_test", "pass1"));
    }

     @Test
     public void testGetById() {
        System.out.println("getById");
        Long id = 1000L;
        TestCompound expResult = new TestCompound(id, "Test Compound");
        TestCompound result = testCompoundService.getById(id);
        assertEquals(expResult, result);
     }
} 
```

# java - 从 Java 打开链接，如何隐藏 GET 参数

> ID：15001655
> 
> 赞同：6
> 
> 时间：2013-02-21T11:56:08.073
> 
> 标签：java, web

我想从 Java 打开一个链接我试过这个

```
public static void main(String[] args) {
       try {
         //Set your page url in this string. For eg, I m using URL for Google Search engine
         String url = "http://myurl.com?id=xx";
         java.awt.Desktop.getDesktop().browse(java.net.URI.create(url));       
       }
       catch (java.io.IOException e) {
           System.out.println(e.getMessage());
       }
   } 
```

它工作正常，但问题是查询字符串在该 url 中。我不想将它作为查询字符串传递，因为它是一个密钥。它应该作为隐藏传递给网页请求。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T11:59:38.133

不能，直接

您需要使用 POST 而不是 GET 来*隐藏*该值，并且 URL 不会**对**用于访问它的方法进行编码，因此它将始终使用 GET。

您*可以想象*编写一个 HTML 文件，该文件会自动对所需的 URL 进行 POST（使用一些 JavaScript）并打开它（使用`file://`URL）。

但请注意，像这样“隐藏”参数*不会增加真正的安全性*！感兴趣的用户想要知道他的 PC 发送到某个站点的值**将能够看到它**。找到它可能需要*更多*的努力，但这绝对不是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:03:47.110

如果不需要在浏览器中显示特定的 url，那么您可以将链接作为 HttpURLConnection 处理（参见[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html "JavaDoc")）。

这里有一个例子[。](http://www.xyzws.com/Javafaq/how-to-use-httpurlconnection-post-data-to-web-server/139 "这里")

# iphone - 将 Integer 设置为非零时的 EXC_BAD_ACCESS

> ID：15001656
> 
> 赞同：1
> 
> 时间：2013-02-21T11:56:08.027
> 
> 标签：iphone, ios, objective-c, core-data, exc-bad-access

我有这个对象：

```
@interface Song : NSManagedObject

@property (nonatomic, strong) NSString *songName;
@property (nonatomic) int32_t achievedPoints; 
```

当我这样设置属性时

```
Song *song1 = [[SongStore sharedStore] createSong]; 
song1.songName = @"Song 1";
song1.achievedPoints = 0; 
```

一切正常，但是一旦我尝试将`achievedPoints`变量设置为 0 以外的值，我就会得到一个 EXC_BAD_ACCESS。

这就是该`createSong`方法的作用：

```
- (Song *)createSong {
    double order;
    if ([allSongs count] == 0) {
        order = 1.0;
    } else {
        order = [[allSongs lastObject] orderingValue] + 1.0;
    }

    Song *p = [NSEntityDescription insertNewObjectForEntityForName:@"Song" inManagedObjectContext:context];

    [p setOrderingValue:order];
    [allSongs addObject:p];
    return p;
} 
```

我不知道为什么获取该值并将其设置为 0 有效，但除零以外的任何东西都会使程序崩溃。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T13:00:24.353

这在我以前发生过一次。我不确切知道哪些设置搞砸了，但我认为，您的托管对象模型中有一个设置可以控制该类是否应该使用原始值（int、float 等）或对象值（NSNumber *等）来设置它的值。如果这搞砸了，并且您认为在实际设置对象时正在设置原语，则会发生以下情况：

```
//song1.achievedPoints = 0;
song1.achievedPoints = (NSNumber *)0x00000000; 
//This is OK because it is the same as nil

//song1.achievedPoints = 1;
song1.achievedPoints = (NSNumber *)0x00000001; //You can see why this is bad! 
```

我的解决方案是通过**Create NSManagedObject Subclass**模板重新生成类，确保选中*Use Scalar Values for Primitives 。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-03T21:44:17.350

这个问题发生在我身上，因为实体没有正确链接到我的类文件。发生这种情况时，Core Data 会动态创建自己的子类，而不是使用我自己的，并且该子类的设置器需要装箱的原语。

您可以通过确保模型文件中实体的“类”属性设置为正确的类而不是默认的`NSManagedObject`.

[![实体配置](../Images/033886dc5d83bdf92d8ed06789d46471.png)](https://i.stack.imgur.com/WG616.png)

当你使用 XCode 的**Create NSManagedObject Subclass**模板时，XCode 会自动为模型文件中的对应实体设置这个值。这可能是解决 borrrden 问题的原因。但是，通过确保正确设置此值，您应该能够在不创建新文件的情况下获得相同的结果。

# objective-c - 需要创建会话对象以及会话对象，我想在 Objective C 中发送我自己的 NSDictionary 对象

> ID：15001657
> 
> 赞同：1
> 
> 时间：2013-02-21T11:56:20.163
> 
> 标签：objective-c, xcode, session, nsdictionary

我有在基于窗口的 mac 应用程序中“登录”的情况，对于该登录，我将使用“LoginValidation”文件。这工作正常，它为打开我需要的东西提供了适当的响应。

但问题是我需要将我自己的字典对象（包含登录信息）发送到下一页（我新打开的内容）。如果我尝试在此处导入“LoginValidation”或“Login”页面，则不允许我创建完整的循环循环。

出于这个原因，我只想通过使用会话我可以将我的对象从一个页面发送到另一个页面。任何人都可以帮助我如何提出解决方案......提前谢谢你......

# c# - 从 WebClient 对象下载 .aspx 文件

> ID：15001659
> 
> 赞同：0
> 
> 时间：2013-02-21T11:56:25.087
> 
> 标签：c#, .net

我正在尝试使用 WebClient 对象从 Web 服务器下载“.aspx”文件并将其保存到文件系统，但它引发了“HTTP 500 内部错误”的异常，我认为是因为服务器尝试呈现html 并发送相同的内容而不是文件本身。

```
var objWebClient = new WebClient();    
var remoteUrl = "someserverURL" + "default.aspx";
objWebClient.DownloadFile(remoteUrl, localPathToSave); 
```

尝试添加 HTTP 标头，但我认为它们可能不适用于来自桌面系统而不是浏览器的请求对象，已设置服务器以“应用程序/八位字节流”格式提供所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:10:56.747

你不能这样做。

如果网络服务器设置正确，它将不允许您直接下载 aspx 文件。

它下载所有其他文件（如 jpeg 和文本文件）的原因是因为 Web 服务器会很乐意为这些文件类型提供服务并允许下载它们。

如果您尝试做的事情是可能的，那么任何人都可以下载任何 .net 站点的 aspx 源文件，这将是非常不安全的。

您可以做的是从 .aspx 页面获取呈现的 html 内容并保存。

```
var webClient = new WebClient();    
var remoteUrl = "someserverURL" + "default.aspx";
byte[] data = webClient.DownloadData(remoteUrl); 
var utf8Encoding = new UTF8Encoding(); 
var html = utf8Encoding.GetString(data);

//now you could save the html to a file 
```

# php - javascript 翻译，用 php 编码 用 javascript 解码

> ID：15001660
> 
> 赞同：2
> 
> 时间：2013-02-21T11:56:26.003
> 
> 标签：php, javascript, decode, encode

您好我正在尝试在 PHP 中编码一个字符串，然后在 javascript 中输出，否则 Javascript 会给我错误。

我试过这个[http://pastebin.com/7RmjDcJY](http://pastebin.com/7RmjDcJY)：

```
<?php
echo "<script type=\"text/javascript\">
    function lang(translate){
    var translations = new Array();";
    foreach($languageTranslations AS $key=>$value):
        echo "translations[\"".$key."\"] = \"". base64_encode($value)."\";";
    endforeach;
   echo "return (typeof translations[translate]!='undefined') ? $.base64.decode(translations[translate]) : translate;

}
</script>";?> 
```

但是 förnamn -> Förnamn

任何想法？我的文档中有 utf-8，但我猜 bas64 无法正确转换 utf-8？

我不能只输出值，因为有些包含破坏我的 javascript 的字符。

还是我应该先更换？喜欢用“替换”之类的东西吗？

编辑：

现在我得到了：

```
//urlencode in PHP and:
decodeURIComponent(translations[translate]).replace('+',' ') 
```

但这感觉不是正确的事情。如果我的文本中有一个 + 号怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:40:53.280

要将数据从 php 发送到 JavaScript，您可以使用 base64 数据，如果要发送多个数据，请使用 json_encode 发送多数据，然后在 JavaScript 中使用 json decode 获取值并通过此代码解码 base64

```
 var Base64 = {

// private property
_keyStr : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",

// public method for encoding
encode : function (input) {
    var output = "";
    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
    var i = 0;

    input = Base64._utf8_encode(input);

    while (i < input.length) {

        chr1 = input.charCodeAt(i++);
        chr2 = input.charCodeAt(i++);
        chr3 = input.charCodeAt(i++);

        enc1 = chr1 >> 2;
        enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
        enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
        enc4 = chr3 & 63;

        if (isNaN(chr2)) {
            enc3 = enc4 = 64;
        } else if (isNaN(chr3)) {
            enc4 = 64;
        }

        output = output +
        this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +
        this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);

    }

    return output;
},

// public method for decoding
decode : function (input) {
    var output = "";
    var chr1, chr2, chr3;
    var enc1, enc2, enc3, enc4;
    var i = 0;

    input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");

    while (i < input.length) {

        enc1 = this._keyStr.indexOf(input.charAt(i++));
        enc2 = this._keyStr.indexOf(input.charAt(i++));
        enc3 = this._keyStr.indexOf(input.charAt(i++));
        enc4 = this._keyStr.indexOf(input.charAt(i++));

        chr1 = (enc1 << 2) | (enc2 >> 4);
        chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
        chr3 = ((enc3 & 3) << 6) | enc4;

        output = output + String.fromCharCode(chr1);

        if (enc3 != 64) {
            output = output + String.fromCharCode(chr2);
        }
        if (enc4 != 64) {
            output = output + String.fromCharCode(chr3);
        }

    }

    output = Base64._utf8_decode(output);

    return output;

},

// private method for UTF-8 encoding
_utf8_encode : function (string) {
    string = string.replace(/\r\n/g,"\n");
    var utftext = "";

    for (var n = 0; n < string.length; n++) {

        var c = string.charCodeAt(n);

        if (c < 128) {
            utftext += String.fromCharCode(c);
        }
        else if((c > 127) && (c < 2048)) {
            utftext += String.fromCharCode((c >> 6) | 192);
            utftext += String.fromCharCode((c & 63) | 128);
        }
        else {
            utftext += String.fromCharCode((c >> 12) | 224);
            utftext += String.fromCharCode(((c >> 6) & 63) | 128);
            utftext += String.fromCharCode((c & 63) | 128);
        }

    }

    return utftext;
},

// private method for UTF-8 decoding
_utf8_decode : function (utftext) {
    var string = "";
    var i = 0;
    var c = c1 = c2 = 0;

    while ( i < utftext.length ) {

        c = utftext.charCodeAt(i);

        if (c < 128) {
            string += String.fromCharCode(c);
            i++;
        }
        else if((c > 191) && (c < 224)) {
            c2 = utftext.charCodeAt(i+1);
            string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
            i += 2;
        }
        else {
            c2 = utftext.charCodeAt(i+1);
            c3 = utftext.charCodeAt(i+2);
            string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
            i += 3;
        }

    }

    return string;
}

} 
```

样本：

```
 alert(Base64._utf8_decode(2LTYs9uM2YTYqNi02LPbjNio2YLYq9in24zYqNmE2LDYs9uM2KjYsQ==)); 
```

此代码与 utf-8 兼容

# python - 访问 USB 数据

> ID：15001666
> 
> 赞同：-1
> 
> 时间：2013-02-21T11:56:40.033
> 
> 标签：python, pyusb

我想读取USB数据。为此，我正在使用 pyusb 库。我写了一个脚本

```
import usb.core
import usb.util

device = usb.core.find(bDeviceClass=9) # 9 is for hub type usb device

if device is None:
    sys.exit("Could not find Id System Barcode Reader.")

if device.is_kernel_driver_active(0):
    print "Kernal Driver Active!" 
```

在运行它时它给了我错误。像

```
usb.core.USBError: [Errno 13] Access denied (insufficient permissions) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:02:30.820

每次直接访问硬件（在您的情况下为 USB）设备都需要`root`特权。

因此，尝试以 root 身份启动！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T14:10:42.717

尝试使用root用户运行文件以将用户更改为root

```
sudo su root 
```

它会询问root密码

之后，您可以使用所有访问权限运行该文件。

或使用`sudo`，它将赋予root用户的所有访问权限。

# gwt - MenuBar 不可选择的子标题

> ID：15001667
> 
> 赞同：0
> 
> 时间：2013-02-21T11:56:42.100
> 
> 标签：gwt, title, menubar, selectable

我有一个带有子垂直下拉菜单栏的水平菜单栏。我希望子垂直菜单栏包含以下内容：

标题文字 1

分隔符 1

选项 1.1

选项 1.2

标题文字 2

分隔符 2

选项 2.1

选项 2.2

有没有办法将不可选择的文本添加到菜单栏中，因为我不希望用户能够选择“标题文本”元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:18:34.013

`myTitleMenuItem.`[`setEnabled`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/MenuItem.html#setEnabled%28boolean%29)`(false)`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:42:52.330

正如 T Broyer 回答的那样，您可以执行 setEnabled(false)。您将获得看起来不太好的项目的禁用样式。

谈到用户体验，用户通常希望菜单栏中的每个项目执行一些操作。当他看到一些带有文本的项目并且在点击时没有执行任何操作时，他会得到类似“应用程序不工作或没有响应”的印象。

因此，最好创建一个菜单项“标题文本”并创建一个包含所需项目的菜单栏，并将此菜单栏设置为标题文本项的子菜单或子菜单。

因此，每当用户悬停或单击“标题文本项”子菜单时，都会显示。

# mvvm - 如何从 ZK 中的 SelectedTab 获取 ViewModel？

> ID：15001670
> 
> 赞同：0
> 
> 时间：2013-02-21T11:56:48.833
> 
> 标签：mvvm, zk, zul

我有一个工具栏，当我单击任何正在创建选项卡的项目时，我现在正在使用大量项目。类似于此代码的内容

```
public static void openNewTab(String title, String path, Tabbox mainTab) {
    Tab tab = new Tab(title);
    tab.setClosable(true);
    tab.setParent(mainTab.getTabs());
    Tabpanel tabpanel = new Tabpanel();
    Include include = new Include(path);
    include.setParent(tabpanel);
    tabpanel.setParent(mainTab.getTabpanels());
    mainTab.setSelectedTab(tab);
} 
```

现在我想要获取所选选项卡的 ViewModel 当 ZUL 中的任何 Ctrl 键按下时...我有这个

```
@Wire("#mainTab")
Tabbox mainTab;
   Tab tab = mainTab.getSelectedTab( ); 
```

可以从 selectedTab 变量中获取 ViewModel 吗？

我正在这样做

```
Include include = new Include(path);
include.setParent(tabpanel);
Object object = include.getAttribute("viewModel"); 
```

现在对象给出 null 我们可以从这里获取 ViewModel，而我在这里包含 ZUl 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:16:18.887

似乎 id 是获取 vm 的属性名称，请参见[zkfiddle 的示例](http://zkfiddle.org/sample/2dj3bmj/3-Get-binder-and-vm-from-component)

顺便说一句，“binder”是获取binder的属性名，更多信息请参考[binder的源代码](https://github.com/zkoss/zk/blob/master/zkbind/src/org/zkoss/bind/BindComposer.java)

您也可以尝试使用 Component.getAttributes 来获取属性映射并检查其中的所有属性，请参阅[Javadoc：Component#getAttributes](http://www.zkoss.org/javadoc/latest/zk/org/zkoss/zk/ui/Component.html#getAttributes%28%29)

# c# - Mifare DESFIRE EV1 GetCardUid

> ID：15001673
> 
> 赞同：0
> 
> 时间：2013-02-21T11:57:12.897
> 
> 标签：c#, .net, smartcard, des, mifare

以下代码有效并允许我获取 Mifare 1k 卡的 UID。不幸的是，它不适用于 Desfire 卡。

```
 public byte[] GetUid()
    {
        byte[] uid = new byte[6];
        int rc = Communicate(new byte[]{0xff, 0xca, 0x00, 0x00, 0x04}, ref uid);
        if (rc != 0)
            throw new Exception("failure: " + rc);

        int rc1, rc2;
        if (uid.Length == 2)
        {
            rc1 = uid[0];
            rc2 = uid[1];
        }
        else
        {
            rc1 = uid[4];
            rc2 = uid[5];
        }

        if (rc1 != 0x90 || rc2 != 0x00)
            throw new Exception("failure: " + rc1 + "/" + rc2);

        byte[] result = new byte[4];
        Array.Copy(uid, result, 4);
        return result;
    } 
```

我查看了以下资源

*   [http://ridrix.wordpress.com/2009/09/19/mifare-desfire-communication-example/](http://ridrix.wordpress.com/2009/09/19/mifare-desfire-communication-example/)
*   [http://code.google.com/p/nfc-tools/source/browse/trunk/libfreefare/libfreefare/mifare_desfire.c?r=532](http://code.google.com/p/nfc-tools/source/browse/trunk/libfreefare/libfreefare/mifare_desfire.c?r=532)

...并试图这样做：

```
 byte[] outb = new byte[15];
        int rc9 = Communicate(new byte[] { 0x60 }, ref outb); 
```

outb 始终包含 { 0x67, 0x00 }，而不是预期的 { af 04 01 01 00 02 18 05 }。

连接成功，SCardGetAttrib 允许我获取 ATR。Communicate 方法适用于 SCardTransmit。如果有帮助，我可以发布代码。

感谢您的任何指示！

**编辑**：

感谢您的第一个答案！我按照建议更改了程序：

```
 byte[] outb = new byte[9];
        int rc5 = Communicate(new byte[]{0x90, 0x60, 0x00, 0x00, 0x00, 0x00}, ref outb); 
```

现在 outb 是 { 0x91, 0x7E }。这似乎更好，0x91 看起来像 ISO 7816 响应代码，但不幸的是不是 0x90，正如预期的那样。（我还查看了第二个链接中的 DESFIRE_TRANSCEIVE 宏，如果它收到 0xf2 则继续读取。）我尝试在 Google 上搜索 ISO 7816 APDU 响应代码，但未能成功解码错误代码。

**编辑 2**：

我还发现了以下评论：

> 使用omnikey 5321我得到DESFire ATR 3B8180018080 UID 04 52 2E AA 47 23 80 90 00 [来自apdu FFCA000000]所有其他apdu给出917E未知错误

这解释了我的错误代码并给了我另一个提示，FFCA000000 看起来与我的其他 Mifare 1k 字符串非常相似。因此，使用 FFCA000000 我会得到一个似乎包含 UID 的 9 字节响应。有趣的是，FFCA000000 代码也适用于 1k 卡，所以也许我的解决方案只是将最后的 04 更改为 00 并处理不同长度的响应。正确的？

**编辑 3**：

似乎一分钱已经下降... 0x04 = 4 字节响应 = 对于 7 字节 UID 来说太小 = 响应 917E = 缓冲区太小 :-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T08:47:55.013

这段代码似乎工作：

```
 int rc = Communicate(new byte[] { 0xff, 0xca, 0x00, 0x00, 0x00 }, ref uid);
        if (rc != 0)
            throw new Exception("failure: " + rc);

        int rc1 = uid[uid.Length-2], rc2 = uid[uid.Length-1];

        if (rc1 != 0x90 || rc2 != 0x00)
            throw new Exception("failure: " + rc1 + "/" + rc2);

        byte[] result = new byte[uid.Length - 2];
        Array.Copy(uid, result, uid.Length - 2);
        return result; 
```

任何意见？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-17T18:05:41.813

Cla=ff 命令是 pcsc 第 3 部分命令。Ins=ca 应该适用于任何符合 pcsc 2.0x 的 cl 阅读器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T21:51:39.147

尝试使用您提供的第一个链接的“本机包装”版本。您的界面需要 ISO 7816-4 样式的 APDU（因为它返回一个 ISO 7816-4 状态字，意思是错误的长度）。

# iphone - CATransform3D 仅适用于视图和子视图，其中之一除外

> ID：15001678
> 
> 赞同：0
> 
> 时间：2013-02-21T11:57:30.733
> 
> 标签：iphone, ios

我已将其应用于具有 100 个子视图`CATransform3D`的我`UIView`，因此转换也适用于**100 个子视图**。

但是，现在我只想排除 100 个子视图中的 1 个子视图进行转换。我应该从哪里开始做到这一点？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:39:50.827

如果您不希望子视图被转换，那么您应该编辑视图层次结构。您可以改为拥有一个当前是父视图的视图，添加转换，然后在转换后的视图前面添加另一个视图，将新视图的背景保持为清晰颜色并将子视图添加到新视图视图。这样你就会得到想要的效果。

# xcode - 面临 UIApplicationMain 返回的麻烦

> ID：15001679
> 
> 赞同：-1
> 
> 时间：2013-02-21T11:57:30.930
> 
> 标签：xcode

我有一个错误请帮助我

`2013-02-21 18:43:54.471 BPApp[12574:c07] *** Assertion failure in -[MainViewController saveEntry:], /Users/Apple/Desktop/BPApp/BPApp/MainViewController.m:66 2013-02-21 18:43:54.473 BPApp[12574:c07] ***`

`Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not update table' *** First throw call stack: (0x2091012 0x119ee7e 0x2090e78 0xc34f35 0x313d 0x11b2705 0xe9920 0xe98b8 0x1aa671 0x1aabcf 0x1a9d38 0x11933f 0x119552 0xf73aa 0xe8cf8 0x1fecdf9 0x1fecad0 0x2006bf5 0x2006962 0x2037bb6 0x2036f44 0x2036e1b 0x1feb7e3 0x1feb668 0xe665c 0x263d 0x2565) libc++abi.dylib: terminate called throwing an exception.`

```
 (IBAction)saveEntry:(id)sender
{

int systolic = [systolicText.text intValue];
int diastolic = [diastolicText.text intValue];
NSString *comments = commentsText.text;
NSDate *theDate = [NSDate date];

NSString *sql = [NSString stringWithFormat:@"INSERT INTO summary('theDate', 'systolic', 'diastolic', 'comments') VALUES ('%@', '%d', '%d', '%@')", theDate, systolic, diastolic, comments];

char *err;
if (sqlite3_exec(db, [sql UTF8String], NULL, NULL, &err) !=SQLITE_OK) {
    sqlite3_close(db);
    NSAssert(0, @"Could not update table");
}else{
    NSLog(@"table updated");
}

systolicText.text =@"";
diastolicText.text =@"";
commentsText.text =@"";

} 
```

是我的`mainviewcontroller.m`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:20:31.993

问题是您对它的使用`NSAssert()`只能用于检测和拒绝愚蠢的开发人员错误（我们经常犯）。

您不应该**使用**可能`NSAssert()`在运行时发生的故障，并且任何数据库交互都可能失败。

相反，您应该将该代码放入一个方法中，该方法在插入失败时返回`BOOL`并返回。`NO`您还应该记录失败的原因，您可以使用函数`sqlite3_errmsg()`（[参考](http://www.sqlite.org/c3ref/errcode.html)）从 sqlite3 获得。

之后，您需要通过执行适合您的应用程序的任何操作来处理错误；可能会显示一个警报视图，然后关闭应用程序，或者使用不同的值重试，或者，你能想到的任何东西，以解决问题，让用户感到最小的不适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:14:01.547

正如你的错误所说，转到**MainViewController**中的函数**saveEntry**并将断点放在 saveEntry 函数的起始行，逐行编译代码。然后你可以在你得到的那一行得到错误。

# sql - 连接和删除括号

> ID：15001680
> 
> 赞同：0
> 
> 时间：2013-02-21T11:57:33.903
> 
> 标签：sql, postgresql, aggregate-functions, plpgsql, string-concatenation

我正在使用 Postgres，这是 plpgsql 函数的返回。

```
point = x||','||y; 
```

以下是我从函数中得到的输出：

```
"(14.5084692510445),(35.8988013191481)" 
```

问题是我想输出没有任何括号括起来的值。有可能做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:05:26.663

这取决于您的问题中缺少的数据类型。

对于字符串类型使用[`trim()`](https://www.postgresql.org/docs/current/functions-string.html#FUNCTIONS-STRING-SQL)：

```
SELECT trim (x, '()') || ',' || trim (y, '()') 
```

为了提供潜在`NULL`价值，您可能还需要使用[`concat_ws()`](https://www.postgresql.org/docs/current/functions-string.html#FUNCTIONS-STRING-OTHER)：

```
SELECT concat_ws(',', trim (x, '()'), trim (y, '()')) 
```

`concat_ws()`是在 Postgres 9.1 中引入的。

# vb.net - 如何在 vb.net 中捕获/处理数字格式异常？

> ID：15001689
> 
> 赞同：1
> 
> 时间：2013-02-21T11:58:11.937
> 
> 标签：vb.net, exception, exception-handling, error-handling, number-formatting

我想在我正在创建的模块上添加“try catch”语句。我想指定以数字格式捕获的异常。这是示例代码，

```
 Try
       interest = me.txtInterest.text
       principal = me.txtPrincipal.text
       totalPayment = interest + principal
    Catch ex As Exception 'What is the proper exception for Number Format?
        MsgBox("Number Format Error")
    End Try 
```

我想指定数字格式的例外。我怎么能那样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:03:56.850

使用此示例代码

```
 Try
            Dim no1 As Integer = Int16.Parse(Me.TextBox1.Text)
            Dim no2 As Integer = Int16.Parse(Me.TextBox2.Text)
            Dim toatlPayment As Integer = no1 + no2

        Catch ex As FormatException
            MessageBox.Show(ex.Message)

        End Try 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T18:14:16.577

您可以检查它是否是有效数字，而不是捕获异常

```
If Int32.TryParse(me.txtInterest.text, interest) AndAlso Int32.TryParse(me.txtPrincipal.text, principal) Then
    totalPayment = interest + principal
Else
    MsgBox("Number Format Error")
End If 
```

# javascript - 无法安装 restify

> ID：15001692
> 
> 赞同：2
> 
> 时间：2013-02-21T11:58:13.947
> 
> 标签：javascript, node.js

我想在我的 Windows 机器上使用 npm安装[restify 。](http://mcavage.github.com/node-restify/)出现错误，无法安装。

查看日志文件时出现错误

```
info dtrace-provider@0.2.8 Failed to exec install script 
```

并且所有文件都回滚。

我想使用 node.js 编写 Restfull Web API。请帮我解决这个问题。

注意：[在这里](https://stackoverflow.com/questions/9471185/node-js-restify-on-windows)找到一种解决方案，我已经安装了当前版本的 node.js，它内置了对 npm 的支持，但仍然出现错误。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T04:51:01.660

你可以试试 express 而不是 restify。这很好。重新调整也是类似的。

# m2eclipse - 在 m2e 中添加依赖项时的灰色文本是什么意思？

> ID：15001693
> 
> 赞同：1
> 
> 时间：2013-02-21T11:58:15.933
> 
> 标签：m2eclipse, m2e

当我在 pom.xml 的 Dependency Management 部分添加依赖项时，有时 m2e 将它们显示为灰色。有人知道这是什么意思吗？我可以看到当依赖项与已添加的依赖项相关时会发生这种情况。

![在此处输入图像描述](../Images/9e758d2339dff46846a5f0e6b248344b.png)

仅仅是它们是已经添加的多模块 pom 的模块，这是否表明不需要添加它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-26T08:10:50.957

我深入研究了 m2e 插件的源代码，发现了一个可能的匹配项和一个可能的解释：

```
 if(scope != null && !"compile".equals(scope)) { //$NON-NLS-1$
      return Display.getDefault().getSystemColor(SWT.COLOR_DARK_GRAY);
    } 
```

从[DependencyTreePage](http://git.eclipse.org/c/m2e/m2e-core.git/tree/org.eclipse.m2e.editor/src/org/eclipse/m2e/editor/pom/DependencyTreePage.java#n764)

如果依赖项的范围不为空且未*编译*，则显示为灰色。如果您要添加测试依赖项或提供的库（如 jsp-api 等），可能会出现这种情况

# pdfbox - PDFbox中的段落

> ID：15001694
> 
> 赞同：1
> 
> 时间：2013-02-21T11:58:15.430
> 
> 标签：pdfbox

我需要将使用 iText 的 PDF 文件更改为 PDFbox。我有以下疑问：

1.  如何在 PDF 框中生成段落？（iText 中的新段落）

2.  如何为 PDFbox 中的字体赋予颜色？( `Font.BOLD`,`new Color(79, 129, 189))`在 iText 中)

有人可以给我一个建议如何解决这些问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:03:44.630

不知道你是否找到了这个问题的答案......

据我所知，PDFBox 不知道换行符，您必须自己格式化文本并使用该`moveTextPositionByAmount`方法定位它。

这就是我写东西并更改字体和颜色的方式：

```
PDFont font = PDType1Font.HELVETICA_BOLD;
PDPageContentStream contentStream =
    new PDPageContentStream(document, page, true,true);
contentStream.beginText();
contentStream.setFont(font, size);
contentStream.setNonStrokingColor(Color.BLUE);
contentStream.moveTextPositionByAmount(x,y);
contentStream.drawString(message);
contentStream.endText();
contentStream.close(); 
```

# php - 使用重写将 .html 链接重定向到文件夹内的 .php 链接

> ID：15001696
> 
> 赞同：1
> 
> 时间：2013-02-21T11:58:15.880
> 
> 标签：php, .htaccess, iis, mod-rewrite, isapi-rewrite

我的服务器上有一个名为**“work”**的文件夹，其中以前有**.html**文件。现在所有文件都有**.php**扩展名，但客户端仍然有 .html 文件的旧链接。我**不想**将所有 .html 文件从服务器的根目录重定向到 .php 版本，我只希望在“工作”文件夹中应用此规则。

从根我会使用：

```
RewriteRule ^(.*)\.html$ $1.php [L] 
```

效果很好。问题是我现在为根应用了以下规则（由 wordpress 用于永久链接）

```
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

所以它破坏了我设置的任何单独的重定向。以前我使用以下方法单独设置每个：

```
RewriteRule /work/index\.html /work/index\.php [RP] 
```

所以我想知道是否有一种方法可以将“工作”文件夹中的所有 .html 链接重定向到 .php 版本，使用一个通用的规则。如果做不到这一点，我将如何单独设置重定向？

编辑：我在 IIS 上使用 ISAPI 重写

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:15:01.400

使用此规则：

```
RewriteRule ^(work)/([^.]+)\.html$ /$1/$2.php [R,L,NC] 
```

# sharepoint - SharePoint 功能区添加按钮和子菜单

> ID：15001699
> 
> 赞同：0
> 
> 时间：2013-02-21T11:58:20.797
> 
> 标签：sharepoint, sharepoint-2010

我设法在共享点功能区中添加自定义选项卡作为 xml 定义，如何添加带有子菜单的按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:53:52.013

拆分按钮是您问题的解决方案。请参考以下链接：

[http://replicrux.com/2011/09/01/splitbutton-ribbon-control-in-sharepoint-2010.aspx](http://replicrux.com/2011/09/01/splitbutton-ribbon-control-in-sharepoint-2010.aspx)

干杯。

# oracle - Oracle - 联结表并连接到先前

> ID：15001701
> 
> 赞同：0
> 
> 时间：2013-02-21T11:58:22.693
> 
> 标签：oracle, hierarchical-data, connect-by

我有一个我认为只能通过 Connect-to-prior 语句解决的问题。

我的数据模型简化如下：

```
create table TASK
 ( TASK_ID number
);
create table ITEM
 ( TASK_ID number,
   NEXT_TASK_ID number
);    
create table TASK_ITEM
 ( TASK_ID number,
   ITEM_ID number
); 
```

一组项目组合成一个任务。一组任务组合成一个或多个项目（这是 TASK_ITEM 连接表的来源）。该过程从一组项目开始，并以单个项目结束（最后一个项目的 ITEM.NEXT_TASK_ID 为空，第一个项目不存在 task_item）。

**我的问题：**

**给定一个 task_id*我想提取所有前面的任务*。**

[这是一个与Philip Greenspun 对 Oracle 中的树的出色介绍](http://philip.greenspun.com/sql/trees.html)或[Wikibook 对 Hierarchical Queries 的描述中](http://en.wikibooks.org/wiki/SQL_Dialects_Reference/Select_queries/Hierarchical_Queries)描述的问题接壤的问题，但是当它们包含更多 ID 和连接表时，似乎找不到任何好的解决方案来解决这些问题。

可悲的是，我自己的 SQL-foo 很短，我用谷歌搜索了我的心，但没有找到解决我特定问题的方法。

在 Carrie Fisher 的声音中：*帮助我 Stack Overflow，你是我唯一的希望。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:11:17.480

*寻找，你就会找到。*

在同事的帮助下，我们解决了这个问题。

我自己没有设法看到的技巧是首先将所需的信息连接在一起，*然后*执行*connect to*语句。

我认为下面的代码解决了所描述的问题。

```
select parent_task.* 
    from (
    select  parent_task_id, item_id, task_id, level
        from (
            select 
                task.task_id parent_task_id, 
                task_item.item_id, 
                item.task_id task_id
            from 
                task, task_item, item
            where 
                task_item.task_id = task.task_id
            and 
                item.item_id = task_item.item_id) properly_structured_parent_table    
        start with task_id = :TASK_ID
        connect by prior parent_task_id = task_id 
    ) task_hierarchy, task parent_task
where parent_task.task_id = task_hierarchy.task_id; 
```

内部 mot SQL 构建一个适当的 parent_table。接下来使用*connect by prior*构建层次结构。最外层的 SQL 根据应用程序的需要加入其余数据。

感谢您的时间和反馈的人。

# rest - REST 服务与第三方 OAuth2

> ID：15001702
> 
> 赞同：4
> 
> 时间：2013-02-21T11:58:32.710
> 
> 标签：rest, authentication, oauth, client-server

我正在为它构建一个 REST 服务器和一个客户端。现在我需要嵌入一些第三方 oauth2 身份验证。现在我将用户引导到服务器，让他对服务进行身份验证，然后我重定向到客户端，有点像这样：

客户端：未验证 -> 服务器 -> 重定向到第三方 -> 重定向到服务器 -> 重定向到应用程序。

然后我在客户端上存储一个 cookie 来识别用户（cookie 是使用 withCredentials 和 CORS 发送的）。

我现在的问题是令牌过期时我应该怎么做重新认证？由于客户端和服务器仅通过 json 进行通信，我将不得不再次启动完整的身份验证过程，因此用户将丢失应用程序中的所有状态。有没有人有关于如何解决这个问题的建议？在客户端进行身份验证并将访问令牌存储在服务器上是否更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:25:02.743

无论您做什么都是获取 OAuth **access_token**的正确方法。而且您的**access_token**是临时的，因此可能会过期。

我认为您可以执行以下任一操作：

1.  检查授权服务器（用于获取令牌）是否提供使用**access_token**获取更长持续时间令牌的选项。这在 OAuth 2 规范中也有建议。

2.  尝试在不使用会话的情况下存储用户的状态。

# php - 图像未上传到数据库我尝试了两种方法但不起作用

> ID：15001703
> 
> 赞同：-3
> 
> 时间：2013-02-21T11:58:32.460
> 
> 标签：php, mysql

我正在开发简单的内容管理系统，同时尝试上传图像没有发生任何事情。它只是刷新页面。我试过没有图像并且它可以正常工作，同时将图像添加到它不起作用

这是我的代码

```
if(isset($_POST[submit]) && $_FILES['userfile']['size'] > 0){                  

$information_id = mysql_prep($_GET['info']);
$menu = trim(mysql_prep($_POST['menu']));  // cut out whitespace for menu

$position = mysql_prep($_POST['position']);
$visible = mysql_prep($_POST['visible']);

$img_des = mysql_prep($_POST['img_des']);
$fileName = $_FILES['userfile']['name'];
$tmpName  = $_FILES['userfile']['tmp_name'];
$fileType = $_FILES['userfile']['type'];
$fileSize = $_FILES['userfile']['size'];

$fp      = fopen($tmpName, 'r');
$image = fread($fp, filesize($tmpName));
$image = addslashes($image);
fclose($fp);
$content = mysql_prep($_POST['content']);
if(!get_magic_quotes_gpc())
{
$fileName = addslashes($fileName);
}

$query = "INSERT INTO pages (
menu, position, visible, img_des, name, type, size, image, content, information_id
) VALUES (
'{$menu}', {$position}, {$visible}, '{$fileName}', '{$fileType}', {$fileSize},             
 {$image}, '{$img_des}', '{$content}', {$information_id}   )";
  if ($result = mysql_query($query, $connection))    {
  $message = "The new page was created successfully"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:14:13.917

我认为您需要先对图像进行base64_encode，然后再将其保存到数据库。我使用它并且效果很好。

查看这些链接以获取更多信息：

[将图像保存到 mysql 数据库](http://www.mwasif.com/2007/4/save-image-in-mysql-with-php/)

[将图像保存到 mysql 数据库](http://mrarrowhead.com/index.php?page=store_images_mysql_php.php)

试试看，如果它对你有帮助，请告诉我。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:15:58.380

我相信您的问题出在您的查询上。您应该转义您的输入并使用 sprintf 语句。看这里的例子：

[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

此外，不推荐使用 mysql_query。考虑使用 mysqli

[http://www.php.net/manual/en/mysqli.query.php](http://www.php.net/manual/en/mysqli.query.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:02:16.127

您需要将图像上传到服务器上的文件夹，然后将图像的路径保存到数据库中。

# android - 定期打开和关闭蓝牙

> ID：15001707
> 
> 赞同：0
> 
> 时间：2013-02-21T11:58:47.903
> 
> 标签：android, bluetooth

我有一个应用程序可以查看手机的配对设备。

我有它，以便蓝牙打开。但是当我等待时，每次打开它都会崩溃。

我怎样才能让它每5分钟打开一分钟或类似的东西。只有当它没有连接到任何东西时才会关闭。

任何帮助都会很棒。谢谢

**代码**

```
private void turnOnBt() {
    //Intent intent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
    //startActivityForResult(intent, 1);
    BluetoothAdapter.getDefaultAdapter().enable();  
    try {
        wait(15000);
        notify();
        BluetoothAdapter.getDefaultAdapter().disable();
        wait(60000);
        notify();
        //BluetoothAdapter.getDefaultAdapter().enable();
        //Toast.makeText(getApplicationContext(), "Bluetooth restarted", 0).show();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

**配对码**

```
private void getPairedDevices() {
    // TODO Auto-generated method stub
    devicesArray = btAdapter.getBondedDevices();
    if(devicesArray.size()>0){
        for(BluetoothDevice device:devicesArray){
            pairedDevices.add(device.getName());
        }
    }
} 
```

**日志猫**

```
02-21 13:10:18.559: D/TextLayoutCache(25101): Using debug level: 0 - Debug Enabled: 0
02-21 13:10:18.589: D/libEGL(25101): loaded /system/lib/egl/libGLES_android.so
02-21 13:10:18.609: D/libEGL(25101): loaded /system/lib/egl/libEGL_adreno200.so
02-21 13:10:18.639: D/libEGL(25101): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
02-21 13:10:18.639: D/libEGL(25101): loaded /system/lib/egl/libGLESv2_adreno200.so
02-21 13:10:19.329: D/OpenGLRenderer(25101): Enabling debug mode 0
02-21 13:13:07.819: D/TextLayoutCache(25306): Using debug level: 0 - Debug Enabled: 0
02-21 13:13:07.839: D/libEGL(25306): loaded /system/lib/egl/libGLES_android.so
02-21 13:13:07.849: D/libEGL(25306): loaded /system/lib/egl/libEGL_adreno200.so
02-21 13:13:07.869: D/libEGL(25306): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
02-21 13:13:07.869: D/libEGL(25306): loaded /system/lib/egl/libGLESv2_adreno200.so
02-21 13:13:07.969: D/OpenGLRenderer(25306): Enabling debug mode 0
02-21 13:16:42.419: D/AndroidRuntime(25750): Shutting down VM
02-21 13:16:42.419: W/dalvikvm(25750): threadid=1: thread exiting with uncaught exception (group=0x2b542210)
02-21 13:16:42.439: E/AndroidRuntime(25750): FATAL EXCEPTION: main
02-21 13:16:42.439: E/AndroidRuntime(25750): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.Test.bluetooth/com.Test.bluetooth.MainActivity}: java.lang.IllegalMonitorStateException: object not locked by thread before wait()
02-21 13:16:42.439: E/AndroidRuntime(25750):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
02-21 13:16:42.439: E/AndroidRuntime(25750):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
02-21 13:16:42.439: E/AndroidRuntime(25750):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
02-21 13:16:42.439: E/AndroidRuntime(25750):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
02-21 13:16:42.439: E/AndroidRuntime(25750):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-21 13:16:42.439: E/AndroidRuntime(25750):    at android.os.Looper.loop(Looper.java:137)
02-21 13:16:42.439: E/AndroidRuntime(25750):    at android.app.ActivityThread.main(ActivityThread.java:4441)
02-21 13:16:42.439: E/AndroidRuntime(25750):    at java.lang.reflect.Method.invokeNative(Native Method)
02-21 13:16:42.439: E/AndroidRuntime(25750):    at java.lang.reflect.Method.invoke(Method.java:511)
02-21 13:16:42.439: E/AndroidRuntime(25750):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-21 13:16:42.439: E/AndroidRuntime(25750):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-21 13:16:42.439: E/AndroidRuntime(25750):    at dalvik.system.NativeStart.main(Native Method)
02-21 13:16:42.439: E/AndroidRuntime(25750): Caused by: java.lang.IllegalMonitorStateException: object not locked by thread before wait()
02-21 13:16:42.439: E/AndroidRuntime(25750):    at java.lang.Object.wait(Native Method)
02-21 13:16:42.439: E/AndroidRuntime(25750):    at java.lang.Object.wait(Object.java:401)
02-21 13:16:42.439: E/AndroidRuntime(25750):    at com.Test.bluetooth.MainActivity.turnOnBt(MainActivity.java:92)
02-21 13:16:42.439: E/AndroidRuntime(25750):    at com.Test.bluetooth.MainActivity.onCreate(MainActivity.java:76)
02-21 13:16:42.439: E/AndroidRuntime(25750):    at android.app.Activity.performCreate(Activity.java:4465)
02-21 13:16:42.439: E/AndroidRuntime(25750):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
02-21 13:16:42.439: E/AndroidRuntime(25750):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
02-21 13:16:42.439: E/AndroidRuntime(25750):    ... 11 more 
```

**第二个Logcat**

```
02-21 13:47:30.079: D/AndroidRuntime(27230): Shutting down VM
02-21 13:47:30.079: W/dalvikvm(27230): threadid=1: thread exiting with uncaught exception (group=0x2b542210)
02-21 13:47:30.089: E/AndroidRuntime(27230): FATAL EXCEPTION: main
02-21 13:47:30.089: E/AndroidRuntime(27230): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.bluetooth.device.action.FOUND flg=0x10 (has extras) } in com.Test.bluetooth.MainActivity$3@2be07420
02-21 13:47:30.089: E/AndroidRuntime(27230):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:737)
02-21 13:47:30.089: E/AndroidRuntime(27230):    at android.os.Handler.handleCallback(Handler.java:605)
02-21 13:47:30.089: E/AndroidRuntime(27230):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-21 13:47:30.089: E/AndroidRuntime(27230):    at android.os.Looper.loop(Looper.java:137)
02-21 13:47:30.089: E/AndroidRuntime(27230):    at android.app.ActivityThread.main(ActivityThread.java:4441)
02-21 13:47:30.089: E/AndroidRuntime(27230):    at java.lang.reflect.Method.invokeNative(Native Method)
02-21 13:47:30.089: E/AndroidRuntime(27230):    at java.lang.reflect.Method.invoke(Method.java:511)
02-21 13:47:30.089: E/AndroidRuntime(27230):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-21 13:47:30.089: E/AndroidRuntime(27230):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-21 13:47:30.089: E/AndroidRuntime(27230):    at dalvik.system.NativeStart.main(Native Method)
02-21 13:47:30.089: E/AndroidRuntime(27230): Caused by: java.lang.NullPointerException
02-21 13:47:30.089: E/AndroidRuntime(27230):    at com.Test.bluetooth.MainActivity$3.onReceive(MainActivity.java:137)
02-21 13:47:30.089: E/AndroidRuntime(27230):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:728)
02-21 13:47:30.089: E/AndroidRuntime(27230):    ... 9 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:03:07.103

发布您的 logcat 错误。

此外，您为什么要在查看配对设备后关闭整个适配器...记住对 .enable() 和 .disable() 的调用将在用户界面响应之后完成！

永远不要在没有任何用户输入的情况下以编程方式！如果我连接了另一台设备（例如耳机）怎么办？[在这里](http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html#enable%28%29)查看更多。

我了解如果未启用适配器，您将无法获得配对的设备，但仍然！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:25:12.330

在您的`MainActivitiy::turnOnBt()`方法中-这是引发异常的地方，您可以调用`Thread.wait();`（大概在第 92 行）

我不太确定你试图用这个来实现什么，因为`wait()`在 UI 线程上调用会（我很确定）让你的应用程序崩溃并出现[ANR Exception](http://developer.android.com/training/articles/perf-anr.html)。

要调用`Thread.wait();`，您必须在同步块中进行：

```
synchronized(this) {
    try {
        Thread.wait();
    }
    catch(InterruptedException e) {
    }
} 
```

但正如我所说——这**不是你想要**的。你混过`Thread.wait()`吗`Thread.sleep(...);`？事件然后，调用`Thread.sleep(...)`UI 线程[真的不推荐](http://developer.android.com/training/articles/perf-anr.html)。

# c# - ASP.NET C# 上的自定义电子邮件验证

> ID：15001709
> 
> 赞同：1
> 
> 时间：2013-02-21T11:58:57.127
> 
> 标签：c#, asp.net, regex, validation

我正在做一个人们可以注册的注册表单，因为我将询问他们的电子邮件地址是否可以进行`regex`验证以捕获任何其他电子邮件

例子：

***xxx@gmail.com***或***xxx@yahoo.com***，并且只允许***xxx@bat.ac.uk***我可以实现一个系统，向注册人发送电子邮件，要求他们进行验证。我知道如何实现我只是停留在这个验证部分的电子邮件位。希望这是有道理的

有没有办法修改默认的电子邮件验证表达式

> \w+([-+.']\w+)@\w+([-.]\w+).\w+([-.]\w+)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:08:44.363

如果这是 ASP.NET Web 窗体，那么您可以使用 a[`RegularExpressionValidator`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.regularexpressionvalidator.aspx)来完成这项工作。

```
<asp:RegularExpressionValidator ID="SomeID"
    runat="server"
    ControlToValidate="TheControlIDToValidate"
    ErrorMessage="An error message you want to display."
    ValidationExpression="\w+([-+.']\w+)@\w+([-.]\w+).\w+([-.]\w+)*"
    EnableClientScript="true" /> 
```

这将使用 JavaScript 在客户端验证值。但是，如果未启用 JavaScript，则可以绕过它，因此在服务器端您需要使用[`Regex`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)该类：

```
Regex rgx = new Regex(@"\w+([-+.']\w+)@\w+([-.]\w+).\w+([-.]\w+)*", RegexOptions.IgnoreCase);
MatchCollection matches = rgx.Matches(input); 
```

那么如果`matches.Count > 0`你很好。

* * *

但是，如果它是 ASP.NET MVC，则可以使用[`RegularExpression`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.regularexpressionattribute.aspx)数据注释。您只需为模型的属性添加一个属性：

```
[RegularExpression(@"\w+([-+.']\w+)@\w+([-.]\w+).\w+([-.]\w+)*", "Some error message.")]
public string EmailAddress { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:03:34.533

我建议使用默认验证器来检查邮件是否有效，并添加一个同时实现客户端和服务器端验证的 CustomValidator。

在这里您可以检查扩展并执行您需要的自定义逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:06:36.460

我会使用内置属性来验证电子邮件地址，然后除此之外，检查这个正则表达式：

```
@bat.ac.uk$ 
```

然后您就知道这是一封有效的电子邮件，并且包含您要查找的内容。电子邮件的验证非常复杂，我不建议重写它，所以只需使用两种不同的东西进行验证。

电子邮件地址属性：http: [//msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.emailaddressattribute.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.emailaddressattribute.aspx)

# svn - 如何创建SVN分支

> ID：15001713
> 
> 赞同：1
> 
> 时间：2013-02-21T11:59:04.050
> 
> 标签：svn

我正在研究SVN。我在 SVNServer 上有一个存储库，我想在这个存储库中创建一个分支。我有几个疑问：

1.  分支创建应该通过 SVN Server 还是 SVN Client 完成？
2.  我尝试`svn copy`在 SVN 服务器上使用命令创建，但它不起作用。我在存储库中创建了一个分支文件夹，并将此命令执行为：

`svn copy d:\sx000\repository\reposphil D:\sx000\repository\reposphil\branches`

`svn error after executing above command: E200007`

后来我试了

`svn copy d:\sx000\repository\reposphil D:\sx000\repository\branches`

`svn error: E155007`

所以没有一个选项有效。请建议我现在应该如何创建一个分支。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T12:13:59.207

您可以通过两种方式创建分支：

1.  直接在存储库上（您可以获得即时更改）
2.  在您的工作副本中（您需要提交更改）

我发现使用存储库方法更容易。否则，您需要检查您的完整存储库。

作为一般规则（这适用于所有命令，而不仅仅是复制），您不能直接访问存储库文件：您需要使用存储库 URL，它可以具有以下格式之一：

*   文件：...
*   svn:...
*   网址：...

这就是为什么这个命令：

```
svn copy d:\sx000\repository\reposphil D:\sx000\repository\reposphil\branches
         ^^^                           ^^^ 
```

...失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:01:03.153

如果你使用的是 tortoise svn，你可以试试这个：[http ://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-branchtag.html](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-branchtag.html)

# extjs - ExtJS：以 ExtJS 样式获取当前 URL

> ID：15001716
> 
> 赞同：3
> 
> 时间：2013-02-21T11:59:14.253
> 
> 标签：extjs, extjs4, extjs4.1

标题说明了一切：如何使用 ExtJS 获取当前 URL？

[`document.URL`](https://stackoverflow.com/questions/1034621/get-current-url-with-javascript)已经有关于使用和获取 URL 的答案[`window.location.pathname`](https://stackoverflow.com/questions/406192/how-to-get-the-current-url-in-jquery)。但是，由于我[`Ext.Object.fromQueryString`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Object-method-fromQueryString)在同一个脚本中使用，我正在寻找一个类似的 ExtJS 方法来返回当前 URL。

我在 ExtJS 上`4.1.3`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T13:21:52.543

不，ExtJS 中没有这样的东西，如果有这样的功能，在引擎盖下他们也会做一个`window.location`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-02T08:56:14.050

使用 Extjs 的 getWin 方法，可以获取位置 url。没有直接的函数来获取 url。

```
Ext.getWin().dom.location.href 
```

# macos - 使用 sed 将字符串添加到多个文件中

> ID：15001717
> 
> 赞同：1
> 
> 时间：2013-02-21T11:59:17.577
> 
> 标签：macos, sed

在过去的一个小时里，我一直在试验 sed，但似乎无法让它工作。我需要在文件夹中所有 python 文件的开头添加一行，例如文件夹“A”。

首先，我使用 find 找到所有 python 文件：

```
find /A -maxdepth 1 -name "*.py" 
```

这显示了 python 文件的列表。（作品！）

然后，当我按照一些在线博客和教程的建议尝试以下操作时：

```
find /A -maxdepth 1 -name "*.py" -exec sed -i '1i # -*- coding: utf-8 -*-' 
```

我收到以下错误：

```
sed: 1: "/A/buttons.py": extra characters at the end of h command 
```

什么是 h 命令？如何正确地做到这一点？

**顺便说一句，我使用的是 Mac OS X。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:04:29.863

用这个替换你的 find/sed 命令：

```
find /A -maxdepth 1 -name "*.py" -exec sed -i.bak '1i\
Text to prepend
' {} \;
cd /A
for i in *.py; do
[[ $(sed q $i) != "# -*- coding: utf-8 -*-" ]] && sed -i.bak '1i\
# -*- coding: utf-8 -*-
' $i
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T13:17:32.360

使用下面的命令。它在我的地方工作

```
find /A -maxdepth 1 -name "*.py"| xargs perl -pi -e 'if($f==1 or $.==1){s/^/# -*- coding: utf-8 -*-\n/g;$f=0;}if(eof){$f=1}' 
```

如果你想`exec`在`find`

```
find /A -maxdepth 1 -name "*.py" -exec perl -pi -e 'if($f==1 or $.==1){s/^/# -*- coding: utf-8 -*-\n/g;$f=0;}if(eof){$f=1}' {}/; 
```

# java - 打开excel时apache POI createFormulaListConstraint导致“不可读的内容”

> ID：15001724
> 
> 赞同：0
> 
> 时间：2013-02-21T11:59:33.670
> 
> 标签：java, apache, apache-poi

正如标题所说：当我尝试使用 XSSFDataValidationHelper 的方法 createFormulaListConstraint("...") 添加 DataValidationConstraint 时，根据我尝试在 MS Excel 中打开它时的弹出窗口，excel 文件的内容不正确。

当我使用 excel 创建数据验证时，此公式按预期工作：

```
=OFFSET(Sites!$A$2;0;0;COUNTA(Sites!$A:$A)- 1;1) 
```

现在我正在尝试使用 apache poi 3.8 做同样的事情：

```
XSSFDataValidationConstraint siteNamesConstraint = (XSSFDataValidationConstraint) dvHelper.createFormulaListConstraint("=OFFSET('Sites'!$A$2;0;0;COUNTA('Sites'!$A:$A)- 1;1)"); 
```

打开excel文件时出现错误。

我也尝试过其他公式：

*   =OFFSET('Sites'!$A$2;0;0;COUNTA('Sites'!$A:$A)- 1;1) （用''围绕工作表名称，用'='）
*   OFFSET('Sites'!$A$2;0;0;COUNTA('Sites'!$A:$A)- 1;1) （用''围绕工作表名称，没有'='）
*   =OFFSET(Sites!$A$2;0;0;COUNTA(Sites!$A:$A)- 1;1) （名称周围没有''，有'='）
*   OFFSET(Sites!$A$2;0;0;COUNTA(Sites!$A:$A)- 1;1) （名称周围没有 ''，没有 '='）

这些似乎都不正确。

在此之前我所拥有的只是“站点”！$A$2:$A$100 这很有效，但它在结果中包含了空白值，这不是我需要的。

我在这里做错了什么还是有另一种方法不在列表中包含空白值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T12:08:02.400

叹息，我在发布这个问题 5 分钟后才找到解决方案。

在excel中输入公式时“;” 在函数中用作分隔符，但在 POI 中分隔符是“，”。

我在尝试以下代码时发现了这一点：

```
Name namedRange = wb.createName();
namedRange.setNameName("sites");
namedRange.setRefersToFormula("OFFSET('Sites'!$A$2,0,0,COUNTA('Sites'!$A:$A)- 1,1)"); 
```

然后引用它：

```
(XSSFDataValidationConstraint) dvHelper.createFormulaListConstraint("sites"); 
```

'Name' 类的 setRefersToFormula 提供了更好的错误处理并显示了我的公式有什么问题（“，”预期但“;”找到）。

# android - 调用 AsynchTask.get() 时的 Android UI 线程块

> ID：15001726
> 
> 赞同：1
> 
> 时间：2013-02-21T11:59:37.740
> 
> 标签：android, multithreading, android-asynctask, ui-thread

我的活动是登录页面。当用户单击时，asyncTask 会检查数据库中的凭据是否良好。在执行任务期间，我想显示一个 ProgressDialog 但在单击按钮后，它会保持按下状态 5 秒，然后我的 ProgressDialog quiclky 会出现（不到 1 秒）并出现吐司。

有我的 onClick 功能：

```
Button connect = (Button)findViewById(R.id.connectButton);
final EditText loginED = (EditText) findViewById(R.id.login);
final EditText passwordED = (EditText) findViewById(R.id.password);

connect.setOnClickListener(new View.OnClickListener(){

    @Override
public void onClick(View arg0) {

    String login = loginED.getText().toString();
    String password = passwordED.getText().toString();
    String[] params = {login, password};

    DoAsyncLogin doAsyncLogin = new DoAsyncLogin();
        try {
        String result = doAsyncLogin.execute(params).get();
        Toast.makeText(MainActivity.this, result, Toast.LENGTH_LONG).show();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (ExecutionException e) {
        e.printStackTrace();
    }
   }
}); 
```

我的 AsyncTask ：

```
private class DoAsyncLogin extends AsyncTask<String, Void, String>
{
ProgressDialog connectionProgressDialog = new ProgressDialog(MainActivity.this);

@Override
    protected String doInBackground(String... params) {
    return getLoginData(params);
}

protected void onPreExecute(){

    connectionProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    connectionProgressDialog.setMessage("Logging in...");
    connectionProgressDialog.show();
}

protected void onPostExecute(String result)
{
    connectionProgressDialog.dismiss();
}
} 
```

有任何想法吗 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:22:58.147

问题是您正在等待（阻塞）**AsynchTask**在主线程上完成其执行（这使其无用）： **请参阅此处的 AsynchTask get 方法的文档**：[AsynchTask.get()](http://developer.android.com/reference/android/os/AsyncTask.html#get%28long,%20java.util.concurrent.TimeUnit%29)

相反，您应该使用`onPostExcute`回调来获取结果。

代码：

```
@Override
public void onClick(View arg0) {

   String login = loginED.getText().toString();
   String password = passwordED.getText().toString();
   String[] params = {login, password};

   DoAsyncLogin doAsyncLogin = new DoAsyncLogin();
   doAsyncLogin.execute(params);
} 
```

在你的 asynchTask 中：

```
protected void onPostExecute(String result){
  connectionProgressDialog.dismiss();
  Toast.makeText(MainActivity.this, result, Toast.LENGTH_LONG).show();
} 
```

# c - gwan -r 不读取最新文件

> ID：15001730
> 
> 赞同：1
> 
> 时间：2013-02-21T11:59:57.293
> 
> 标签：c, linux, scripting, command-line-arguments, g-wan

我一直在使用 Gwan v4.1.18，出于开发目的，我经常使用

```
./gwan -r [somefile] 
```

但是，我经常发现，当我更新正在运行的文件时，会在执行上述行时找到更新。

这是与 -r 一起使用的某种奇怪的缓存（我假设它仅用于运行脚本而不使用整个 Gwan 系统）还是可能是一个错误？

不急，但希望对这种行为有所了解

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:31:11.387

约翰，

使用 G-WAN v4.2.19（几天前发布的最新版本）我刚刚尝试`./gwan -r hello.c`并得到：

```
Hello World! 
```

然后，我编辑`hello.c`删除感叹号并重新运行`./gwan -r hello.c`给出：

```
Hello World 
```

它似乎按预期工作，至少在 Ubuntu 12.04 64 位（使用 GNOME 而不是 Unity）上。

那是与可执行`hello.c`文件位于同一目录中的`gwan`文件。

# c# - 将图像放在动态创建的按钮上

> ID：15001734
> 
> 赞同：0
> 
> 时间：2013-02-21T12:00:03.240
> 
> 标签：c#, winforms, button

我已经动态创建了一个按钮，现在我需要将图像放在它上面，它保存在我的硬盘上。我试着做

```
btndynamic.image=((Sytem.Drawing.Image)(resources.GetObject("button.Image"))); 
```

但这给了我一个错误：当前上下文中不存在名称“资源”

然后我尝试了：

```
btndynamic.image=Image.FromFile(@"images\image1.jpg"); 
```

再次给我一个错误：验证文件是否存在于指定位置。

那么我做错了什么，或者还有其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:10:35.087

您可以在表单上使用`ImageList`控件。此控件在运行时不可见，可让您稍后在表单中添加需要使用的图像。您在表单上添加此控件的方式与添加按钮的方式完全相同，您可以在`Components`选项卡下的工具箱中找到它。在属性中，您将看到一个`Images`属性，您只需对其进行编辑，您将看到一个对话框，您可以在其中从磁盘添加图像资源。只需添加您需要的内容并为添加的每个图像设置属性（如键）。

然后，您所要做的就是从此控件中获取按钮所需的图像：

通过使用索引，您有两种方法

```
dynamicButton.Image = imageList1.Images[index]; 
```

或一把钥匙

```
dynamicButton.Image = imageList1.Images["your_image_key"]; 
```

这样您的图像可以包含在您的程序集中，您不必担心路径

如果您需要有关它的更多信息，请尝试以下链接：

[http://social.msdn.microsoft.com/Forums/eu/csharplanguage/thread/9cda50a5-8eba-4e1f-87ee-7486352c0907](http://social.msdn.microsoft.com/Forums/eu/csharplanguage/thread/9cda50a5-8eba-4e1f-87ee-7486352c0907)

[如何使用 imageList 控件](https://stackoverflow.com/questions/8587269/how-to-use-imagelist-control)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T15:56:15.797

您可以将图像添加到资源中，然后将按钮 Image 属性分配给它，如下所示：

```
NewButton.Image = global::YOURPROJECTNAME.Properties.Resources.YOURRESOURCENAME; 
```

# php - 使用 dom 解析 HTML 字符串

> ID：15001735
> 
> 赞同：0
> 
> 时间：2013-02-21T12:00:04.190
> 
> 标签：php, html, parsing, dom

```
<html>

<head>
<?PHP
include('simple_html_dom.php');
?>
<title>

</title>
</head>

<body>
<form name ="form1" method ="POST" ACTION="parser.php">
<input type="text" name="parser1" style="height:200px; width:200pt;"></br></br>
<input type="submit" value="Submit"></br></br>
</form>

<?php

$html_str = $_POST['parser1'];

// Create DOM from URL or file
$html = file_get_html($html_str);
$html->load('
<form name="form1" action="parser.php" method="post">
<input type="text" name="parser1">
</form>');

// Get the form action
foreach($html->find('form') as $element) 
   echo $element->action . '<br>';

// Get the input name       
foreach($html->find('input') as $element) 
   echo $element->name . '<br>';
?>
</body>

</html> 
```

在这里，我正在尝试将 html 源代码输入到文本框中`parser1`

然后我使用 post 将文本框中的数据捕获到字符串中`html_str`

当我尝试解析该字符串时，我开始收到错误。

> 致命错误：在第 24 行的 /home/public_html/parser.php 中的非对象上调用成员函数 load()

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:42:28.537

你有这个：

```
$html = file_get_html($html_str);
$html->load('
<form name="form1" action="parser.php" method="post">
<input type="text" name="parser1">
</form>'); 
```

错误消息说这`$html`不是一个对象。`file_get_html()`不是内置函数，但您似乎正在使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)。它的[API 文档](http://simplehtmldom.sourceforge.net/manual_api.htm#api)说它返回一个对象，但没有提供额外的信息。如果我们查看源代码：

```
function file_get_html($url, $use_include_path = false, $context=null, $offset = -1, $maxLen=-1, $lowercase = true, $forceTagsClosed=true, $target_charset = DEFAULT_TARGET_CHARSET, $stripRN=true, $defaultBRText=DEFAULT_BR_TEXT, $defaultSpanText=DEFAULT_SPAN_TEXT)
{
    // We DO force the tags to be terminated.
    $dom = new simple_html_dom(null, $lowercase, $forceTagsClosed, $target_charset, $stripRN, $defaultBRText, $defaultSpanText);
    // For sourceforge users: uncomment the next line and comment the retreive_url_contents line 2 lines down if it is not already done.
    $contents = file_get_contents($url, $use_include_path, $context, $offset);
    // Paperg - use our own mechanism for getting the contents as we want to control the timeout.
    //$contents = retrieve_url_contents($url);
    if (empty($contents) || strlen($contents) > MAX_FILE_SIZE)
    {
        return false;
    }
    // The second parameter can force the selectors to all be lowercase.
    $dom->load($contents, $lowercase, $stripRN);
    return $dom;
} 
```

...我们可以看到它`FALSE`有时会返回：

```
if (empty($contents) || strlen($contents) > MAX_FILE_SIZE)
{
    return false;
} 
```

所以我敢说你的 POST 字段要么是空的，要么是太大的。你真的应该在打电话之前检查一下`->load()`。

**更新：**

`file_get_html()`功能：

> **从文件或 URL**创建 DOM 对象。

我想你真正想要的是`str_get_html()`：

> **从一个字符串**创建一个 DOM 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:01:52.487

如果您实际检查表单是否已提交，这可能会有所帮助。您必须检查并重新检查输入是否有效。

```
// check if it's a POST request
if($_SERVER['REQUEST_METHOD'] === 'POST') {
    // check if parser1 is not empty
    if(!empty($_POST['parser1'])) {
        $input = $_POST['parser1'];

        if(filter_var($input, FILTER_VALIDATE_URL)) { // looks like an URL
            $html = file_get_html($input); // download URL
        } else { // lets assume it's HTML, because it's not an URL
            $html = str_get_html($input);
        }

        // If something goes wrong here, the input is invalid
        if(!empty($html)) {
             // parse DOM document here
        } else {
            // There is something wrong with the input
        }
    }
} 
```

# serial-port - 用psp控制arduino

> ID：15001738
> 
> 赞同：0
> 
> 时间：2013-02-21T12:00:07.293
> 
> 标签：serial-port, arduino, playstation-portable

我有 arduino mega 和旧的胖 PSP。我想将 PSP 用作使用 Serial 的无线控制器。有没有人有这方面的经验？我尝试在网上搜索，但没有成功。

我只找到了一些 2009-2010 年的视频，这些视频只显示了这是可行的，没有操作方法，没有代码，没有教程，而且他们说的是西班牙语或中文，所以我不明白他们在说什么。

*   [http://www.youtube.com/watch?v=_hD5IJ0pNNs](http://www.youtube.com/watch?v=_hD5IJ0pNNs)
*   [http://www.youtube.com/watch?v=GyCDfL_BAcQ](http://www.youtube.com/watch?v=GyCDfL_BAcQ)
*   [http://www.youtube.com/watch?v=BRmaFreeE_tk](http://www.youtube.com/watch?v=BRmaFreE_tk)
*   [http://www.youtube.com/watch?v=_hD5IJ0pNNs](http://www.youtube.com/watch?v=_hD5IJ0pNNs)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:13:57.410

您需要在 psp 中编写一个 php 脚本，它可以在不破解它的情况下完成

你也可以使用下面提供的源代码

1.  一个简单的 PHP 脚本，使用 PHPSerial 类通过串行连接从图像映射中的 PSP 向 arduino 发送消息。

    问题和问题

1.从 PSP 将循环更改为 3 后，您无法更改为任何其他循环。（我认为问题在于 PSP 如何解释图像映射。（即：尝试使用生成图像映射的 HTML））

源代码 [见这里...](http://pastebin.com/WijQD5eG)

# iphone - 如何开发可以同时连接 Android 和 iOS 设备的蓝牙设备？

> ID：15001741
> 
> 赞同：4
> 
> 时间：2013-02-21T12:00:09.410
> 
> 标签：iphone, ios, core-bluetooth, bluetooth-lowenergy

我需要创建软件来连接蓝牙设备（我可以使用 BLE）。我尝试了成功连接到 iPhone 的[示例代码。](http://developer.apple.com/library/ios/#samplecode/BTLE_Transfer/Introduction/Intro.html)但是在这个例子中，一个 iPhone 发送数据（Peripheral），另一个接收数据（Central），而我需要连接设备来发送*和*接收数据。我研究了几个 BLE 设备，但没有找到任何关于设备如何以及是否可以同时执行这两种操作（发送和接收）的信息。

我还需要知道我是否也可以使用同一个蓝牙设备连接 iPhone 和 Android 手机（我听说过双模式或类似的东西）。

所以，我的问题是：

1.  我可以拥有可以向/从 iPhone 发送和接收数据的蓝牙设备吗？如果是，我需要什么（硬件和软件[比 Xcode 更多的东西？]）？

2.  如何对蓝牙设备进行编程以使用 Apple 协议？我需要开发套件或 Apple 专用的东西吗？

3.  我可以拥有一个可以通过 iPhone 和 Android 连接（不一定同时）的蓝牙设备吗？这需要特别考虑吗？

谢谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T14:05:15.517

1）是的，你可以。问题是你在考虑什么样的设备？但是，您必须开发微控制器等。iOS 应用程序`LightBlue`很好。我用它来调试。有一个很好的 WWDC Session 关于它。
2)Bluetooth Low-Energy 有协议，跟苹果没关系...
3)Android 官方不支持BLE。它没有框架。摩托罗拉使用自制的框架。其他的，我不知道，当他们有 BLE 芯片时就是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:07:25.507

1）您可以使用相同的框架（CoreBluetooth）将iPhone置于中心或外围角色。对于外围角色，您只需要 XCode 和 iOS 6 或更高版本以及自己的中央（另一部 iPhone、Android 智能手机、BLE USB 加密狗等）。

2）没有任何“Apple协议”，您必须尊重蓝牙规范。

3) 不可以，一个蓝牙设备只能同时连接一个主设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:08:51.800

我认为我们的应用程序 LightBlue 会很高兴为您提供帮助。我只想补充一点，我们刚刚添加了一个教程，可以在这里找到：http: [//blog.punchthrough.com/post/46285311872/testing-bluetooth-low-energy-devices](http://blog.punchthrough.com/post/46285311872/testing-bluetooth-low-energy-devices)

关于您的问题 #3，是的，您可以拥有与设备无关的设备。但是我建议先为 iOS 开发，Apple 的一些要求比 android 更严格（例如连接间隔）。

三星 Galaxy S3 似乎是最常用的支持 BLE 的设备。摩托罗拉拥有自己的 BLE 堆栈，该堆栈功能强大，但目前非常不稳定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T06:24:38.193

1.  这完全取决于您要通信的设备。如果是外部配件，EA硬件的芯片需要是苹果MFI的投诉。
2.  You have external Accessory Framework which will establish BT connection and finding devices etc etc..

# android - 在一个 onActivityResult() 中处理来自多个活动的数据？

> ID：15001746
> 
> 赞同：6
> 
> 时间：2013-02-21T12:00:12.037
> 
> 标签：android, onactivityresult

我想知道是否可以处理来自活动 1 中的活动 2 和活动 3 的数据`onActivityResult()`，或者我是否需要为每个返回数据的活动提供一种方法？

活动 1 是应用程序的主要活动。

活动一：

```
// Handle return value from activity
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == Activity.RESULT_OK) {
        String imageId = data.getExtras().getString("imageId");

        // Do something if data return from activity 2 ??

        // Do something if data return from activity 3 ??
    }
} 
```

活动二

```
Intent intent = new Intent();
intent.putExtra("imageId", imagePath);
setResult(RESULT_OK, intent); 
finish(); 
```

活动 3

```
Intent intent = new Intent();
intent.putExtra("contactId", data);
setResult(RESULT_OK, intent);
finish(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-21T12:08:17.207

`startActivityForResult`在您的活动 1中设置 requestCode ：

**调用活动 2**

```
Intent intent = new Intent(this, Activity2.class);
startActivityForResult(intent,10); 
```

**调用活动 3**

```
Intent intent = new Intent(this, Activity3.class);
startActivityForResult(intent,11); 
```

现在当你来`onActivityResult`检查时`requestCode`

像：

```
 public void onActivityResult(int requestCode, int resultCode, Intent data)
 {

      super.onActivityResult(requestCode, resultCode, data);

       switch (requestCode) {

          case (10): 
          {
            // do this if request code is 10.
          }
          break;

          case (11):
          {
            // do this if request code is 11.
          }
          break;
  } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-21T12:08:07.593

`No confusion check result code and request code`..

例子 ：

```
private static final int TWO = 2;
private static final int THREE = 3;

startActivityForResult(new Intent(this,Activity2.class),TWO); // one for Activity 2
startActivityForResult(new Intent(this,Activity3.class),THREE); 
```

和

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == Activity.RESULT_OK ) {
        if(requestCode == TWO) {
            // Activity two stuff
        } else if(requestCode == THREE) {
            // Activity three stuff
        }
    }
} 
```

# configuration - PHPUnit：仅过滤一个测试套件

> ID：15001749
> 
> 赞同：8
> 
> 时间：2013-02-21T12:00:16.993
> 
> 标签：configuration, filter, phpunit, test-suite

在 PHPUnit 中，可以在不同的测试套件中组织测试：

```
<phpunit bootstrap="Bootstrap.php">
    <testsuites>
        <testsuite name="zf2sandbox">
            <directory>./AlbumTest</directory>
        </testsuite>
    </testsuites>
</phpunit> 
```

此外，您可以定义过滤器，例如

```
<filter>
    <whitelist>
        <directory suffix=".php">/var/www/sandbox/zf2sandbox/module/Album/src/Album/</directory>
    </whitelist>
</filter> 
```

现在我想结合这两个功能。不允许将`filter`标签放入 a `testsuite`（过滤器被忽略）。

```
<phpunit bootstrap="Bootstrap.php">
    <testsuites>
        <testsuite name="zf2sandbox">
            <directory>./AlbumTest</directory>
            <filter>
                <whitelist>
                    <directory suffix=".php">/var/www/sandbox/zf2sandbox/module/Album/src/Album/</directory>
                </whitelist>
            </filter>
        </testsuite>
    </testsuites>
</phpunit> 
```

是否有另一种方法来为每个定义过滤器（白名单、黑名单等）`testsuite`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:30:59.623

您是否尝试添加标签`filter`内部`testsuite`，因为在您的示例中它位于`testsuites`标签中。IE：

```
<phpunit bootstrap="Bootstrap.php">
    <testsuites>
        <testsuite name="zf2sandbox">
            <directory>./AlbumTest</directory>
            <filter>
                <whitelist>
                    <directory suffix=".php">/var/www/sandbox/zf2sandbox/module/Album/src/Album/</directory>
                </whitelist>
            </filter>
        </testsuite>
    </testsuites>
</phpunit> 
```

# solr - 如何在该网站中检索所有术语及其频率

> ID：15001750
> 
> 赞同：1
> 
> 时间：2013-02-21T12:00:18.330
> 
> 标签：solr, lucene

我在 solr 中索引了 10 个网站的数据。现在我想用以下格式转储每个网站的数据：[术语，该网站中术语的频率，IDF，网站]

```
e.g : [management,12,145,example.com] 
where 12 is a frequency of term in example.com, 145 is IDF of term in index. 
```

我可以用 solr 和如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:20:48.290

如果您正在寻找测量文档中不同术语的分布，那么直方图就是您想要的。检查[LukeRequestHandler](http://wiki.apache.org/solr/LukeRequestHandler)示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:55:40.943

一些低级 API：

```
InderReader reader = IndexReader.open(directory);
TermDocs termDocs = reader.termDocs();   
// TermDocs termDocs = reader.termDocs(term);   //  if you need docs containing specific term
while (termDocs.next()) {
    System.out.println("Doc #: " + termDocs.doc());
    System.out.println("Full document: " + reader.document(termDocs.doc()));
    System.out.println("Term frequency: " + termDocs.freq());        
} 
```

对于 tf*idf，请参阅[DefaultSimilarity](http://javasourcecode.org/html/open-source/lucene/lucene-3.3.0/org/apache/lucene/search/DefaultSimilarity.html)和[此问题](https://stackoverflow.com/questions/9189179/extract-tf-idf-vectors-with-lucene)以获取一些评论。

# java - Java 类的可视化

> ID：15001752
> 
> 赞同：3
> 
> 时间：2013-02-21T12:00:20.440
> 
> 标签：java

我对编程很陌生，我有以下问题。

我有一堂课：

```
class HelloWorldApp {
    public static void main(String[] args) {
        System.out.println("Hello World!"); // Display the string.
    }
} 
```

我希望我能看到这个程序使用的堆、线程（内部和外部）等。

有什么工具吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-21T12:02:54.670

使用调试器，例如集成在 Netbeans 或 Eclipse 中。

此外，此分析器可能会有所帮助，但它非常先进。

[http://visualvm.java.net/](http://visualvm.java.net/)集成在任何最近的 jvm 中。但是您无法真正看到此特定代码在哪个线程中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:04:21.883

查看以下链接：

[Java VisualVM](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/heapdump.html)

[IBM 堆分析器](https://www.ibm.com/developerworks/community/groups/service/html/communityview?communityUuid=4544bafe-c7a2-455f-9d43-eb866ea60091)

[如何在 Java 中查看堆中的内容？](https://stackoverflow.com/questions/145922/how-can-i-see-what-is-in-my-heap-in-java)

[在 Eclipse 中查看实时堆](https://stackoverflow.com/questions/11701337/viewing-live-heap-in-eclipse)

# javascript - 将 javascript 映射传递给 json wcf 服务

> ID：15001755
> 
> 赞同：7
> 
> 时间：2013-02-21T12:00:37.970
> 
> 标签：javascript, json, wcf, dictionary, map

我想将关联数组传递给 json wcf 服务。

所以在 JavaScript 中我有类似的东西：

```
var map = { };
map['a'] = 1;
map['b'] = 2;
map['c'] = 3; 
```

在我的 wcf 服务中，我希望有一个字典：

```
[OperationContract][WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.WrappedRequest, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
public void setDictionary(Dictionary<string, int> myDictionary); 
```

但它将地图作为 [Object object] 发送而不是序列化它，因为“地图”实际上只是我分配属性的对象。

有谁知道我如何正确序列化它以使其被 WCF 服务反序列化为 Dictionary 对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T01:00:35.587

默认情况下，WCF 不表示`Dictionary`为 JSON 对象，而是将它们表示为键/值对数组。因此，要将地图发送到 WCF 服务，您需要适当地对其进行转换（参见下面的代码）。

另一种选择是使用自定义消息格式化程序，它知道如何根据 JSON 对象填充字典。有关消息格式化程序的更多信息，请查看此[博客文章](http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/03/wcf-extensibility-message-formatters.aspx)。

这显示了将该对象传递给您的服务的一种方法：

服务.svc：

```
<%@ ServiceHost Language="C#" Debug="true" Service="StackOverflow_15001755.Service"
                CodeBehind="StackOverflow_15001755.svc.cs" 
                Factory="System.ServiceModel.Activation.WebServiceHostFactory" %> 
```

服务.svc.cs：

```
using System.Collections.Generic;
using System.ServiceModel;
using System.ServiceModel.Web;

namespace StackOverflow_15001755
{
    [ServiceContract]
    public class Service
    {
        static Dictionary<string, int> dictionary;

        [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.WrappedRequest, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
        public void setDictionary(Dictionary<string, int> myDictionary)
        {
            dictionary = myDictionary;
        }

        [WebGet(RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
        public Dictionary<string, int> getDictionary()
        {
            return dictionary;
        }
    }
} 
```

Test.html（HTML/JS 代码，使用 jQuery 进行 ajax 调用）：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script type="text/javascript" src="scripts/jquery-1.7.2.js"></script>
    <script type="text/javascript" src="scripts/json2.js"></script>
</head>
<body>
    <script type="text/javascript">
        function StackOverflow_15001755_Test() {
            function dictionaryToKVPArray(obj) {
                var data = [];
                for (var key in obj) {
                    data.push({ Key: key, Value: obj[key] });
                }

                return data;
            }

            function KVPArrayToDictionary(arr) {
                var result = {};
                arr.forEach(function (item) {
                    result[item.Key] = item.Value;
                });

                return result;
            }

            var map = {};
            map['a'] = 1;
            map['b'] = 2;
            map['c'] = 3;
            var data = dictionaryToKVPArray(map);

            var baseUrl = "/StackOverflow_15001755.svc";
            $.ajax({
                type: 'POST',
                url: baseUrl + '/setDictionary',
                contentType: 'application/json',
                data: JSON.stringify({ myDictionary: data }),
                success: function (result) {
                    $('#result').text('Sent the dictionary');
                    $.ajax({
                        type: 'GET',
                        url: baseUrl + '/getDictionary',
                        success: function (result) {
                            var newMap = KVPArrayToDictionary(result);
                            $('#result2').text(JSON.stringify(newMap));
                        }
                    });
                }
            });
        }
    </script>
    <input type="button" value="StackOverflow 15001755" onclick="StackOverflow_15001755_Test();" /><br />
    <div id='result'></div><br />
    <div id='result2'></div><br />
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T08:36:17.143

我设法通过使用`JSON.stringify(map)`获取地图的序列化版本来完成这项工作。然后将其作为字符串而不是 Dictionary 传递给 WCF 服务，并在使用[Json.Net 框架](http://json.codeplex.com/)的方法中自行反序列化它。

**序列化地图：**

```
{'a':'0','b':'1','c':'2'} 
```

**WCF 服务：**

```
[OperationContract][WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.WrappedRequest, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
public void doDictionaryStuff(string serializedMap); 
```

**[使用Json.Net 框架](http://json.codeplex.com/)在 WCF 服务中反序列化它：**

```
public void doDictionaryStuff(string serializedMap)
{
    Dictionary<string, int> map = JsonConvert.DeserializeObject<Dictionary<string,int>>(serializedMap);
    //do stuff with the dictionary.
} 
```

这并不理想，但确实有效。

# youtube - YouTube API 收藏夹计数 - PHP

> ID：15001756
> 
> 赞同：2
> 
> 时间：2013-02-21T12:00:39.993
> 
> 标签：youtube

我正在使用以下网址获取 youtube 视频数据

[https://gdata.youtube.com/feeds/api/users/cognizant/uploads?v=2&alt=jsonc&max-results=50&start-index=1](https://gdata.youtube.com/feeds/api/users/cognizant/uploads?v=2&alt=jsonc&max-results=50&start-index=1)

但是使用它，收藏夹计数为零（0）。

所以现在我正在尝试使用 oAuth2 google-api-client youtube 服务来获取收藏夹计数。即使它重新调整收藏夹计数为零。

我通过启用 youtube 服务在 gmail 帐户上创建了项目，然后创建了客户端 ID、重定向 url 和所有内容。

你能指导我如何获得视频的正确收藏数量吗？

感谢和问候 Surekha 哑光

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T19:00:44.487

据我所知，YouTube 在几个月前甚至一年前禁用了 API 中的收藏计数。至少在我自己的经验中，它已经有一段时间没有工作了。

# eclipse - 防止日食删除空格

> ID：15001761
> 
> 赞同：0
> 
> 时间：2013-02-21T12:00:54.013
> 
> 标签：eclipse

如何防止 Eclipse 删除一行中的空格？

例子：

```
final Map<String, String> capitalOf = new HashMap<String, String>();
capitalOf.put("France",       "Paris");
capitalOf.put("Italy",        "Rom");
capitalOf.put("Switzerland",  "Bern"); 
```

调用后获取`Format`（`Ctrl`- `Shift`- `F`）

```
final Map<String, String> capitalOf = new HashMap<String, String>();
capitalOf.put("France", "Paris");
capitalOf.put("Italy", "Rom");
capitalOf.put("Switzerland", "Bern"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:04:20.970

您可以在 Preferences (Java - Code Style - Formatter) 的空白部分编辑 Java Formatter 的行为。

![格式化程序首选项](../Images/156d462d09861cab0269ba06cdaee5f6.png)

在您的情况下，您将不得不依靠格式化程序标签来关闭代码的格式：

```
 @formatter:off
    capitalOf.put("France",       "Paris");
    capitalOf.put("Italy",        "Rom");
    capitalOf.put("Switzerland",  "Bern");
    @formatter:on 
```

为此，必须启用 off/on 标签，如下所示：

![格式化程序关闭/打开标签](../Images/9ffca217d5c0a6ea7f35433fec934e61.png)

# javascript - 我需要帮助优化功能

> ID：15001775
> 
> 赞同：4
> 
> 时间：2013-02-21T12:01:35.043
> 
> 标签：javascript, loops, angle

基本上我想生成一个不在多个其他角度的指定范围内的角度（0 - 360 度）。我已经做了这个功能来检查两个角度：

```
function check(angle1, angle2, range) {
    var diff = angle1 - angle2;

    if(Math.abs(diff % 360) <= range || (360-Math.abs(diff % 360)) <= range) {
        return true;
    } else {
        return false;
    }
} 
```

很简单，但我需要检查一个随机角度与所有其他角度，如果它通过则继续，生成一个新角度并重新检查它是否失败，并识别何时不可能通过任何新角度。

我认为这会起作用：

```
var others = [array of objects];

...

for(var i = 0; i < 360; i++) {
    var pass = true;
    for(var n = 0; n < others.length; n++) {
        if(check(i, others[n].angle, 5)) {
            pass = false;
            break;
        }
    }
    if(pass) return i;
}

return false; 
```

然而，这是*很多*循环，我更喜欢随机角度而不是递增。有没有更快更好的方法来做到这一点？谢谢。

编辑：决定做这样的事情，从@TheBronx的回答中得到了这个想法。

```
var angles = [];

var range = 5;

function alterAngle(a, n) {
  var angle = a + n;
  if(angle < 0) angle = 360 + angle;
  if(angle > 360) angle = angle - 360;
  return angle;
}

// in the function

var angle = Math.floor(Math.random() * 360);

if(angles.indexOf(angle) == -1) {
  for(var i = -range; i <= range; i++)
    angles.push(alterAngle(angle, i));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:15:39.517

主意。想象你的角度是一副牌中的牌。一旦你生成了一个随机角度，你就可以从牌组中移除这个角度，以及你范围内的角度。当你必须生成一个新的角度时，而不是在 0..360 之间生成一个随机值，你只需要“选择一张卡片”。除非您没有更多可用的“卡片”，否则这将始终有效。

问题是，你有很多卡吗？你有足够的时间在开始时初始化“卡片”吗？

只是一个想法......不知道它是否好，但看起来很有希望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:17:00.493

这个

```
if(Math.abs(diff % 360) <= range || (360-Math.abs(diff % 360)) <= range) {
    return true;
  } else {
    return false;
} 
```

你可以这样制作，这将减少操作

```
return Math.abs(diff % 360) <= range || (360-Math.abs(diff % 360)) <= range; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:25:04.377

基于我以前的问题：[Fischer Yates shuffle in coffee-script](https://stackoverflow.com/q/12929058/665261)

```
var counter, i, permutations, shuffle, x, _i;

// Fischer Yates shuffle algorithm
shuffle = function(arr, required) {
  var i, index, randInt, _i, _ref, _ref1, _ref2;
  if (required == null) {
    required = arr.length;
  }
  randInt = function(n) {
    return Math.floor(n * Math.random());
  };
  if (required > arr.length) {
    required = arr.length;
  }
  if (required <= 1) {
    return arr[randInt(arr.length)];
  }
  for (i = _i = _ref = arr.length - 1, _ref1 = arr.length - required; _ref <= _ref1 ? _i <= _ref1 : _i >= _ref1; i = _ref <= _ref1 ? ++_i : --_i) {
    index = randInt(i + 1);
    _ref2 = [arr[i], arr[index]], arr[index] = _ref2[0], arr[i] = _ref2[1];
  }
  return arr.slice(arr.length - required);
};

// generate array of all possible angles
var angles = []
for(i=0;i<360;i++){ angles.push(i) }

// shuffle as many as you need (20 in this example)
var shuffled = shuffle(angles,20)

// check the result
console.log(shuffled)

// simply deal off values from this shuffled array as needed 
```

# wpf - 如何在 wpf 中标题内容控件的内容部分显示错误消息

> ID：15001777
> 
> 赞同：1
> 
> 时间：2013-02-21T12:01:40.410
> 
> 标签：wpf, wpf-controls

我正在开发 wpf 应用程序。我对 wpf 很陌生。我使用“标题内容控件”，标签作为标题，文本框作为内容部分。没问题。对于验证，我使用的是“IDataErrorInfo”。我能够显示错误，但我的问题是

i) 在完整的 Headered Contentcontrol 上显示错误边框（在标签和 Tet 框上），如何仅在 TextBox 上显示红色边框...

ii）当我将光标放在边框上时，我能够显示错误消息（如图所示），但是当我将光标放在文本框上时无法显示错误消息.....任何人都可以帮助我怎么做我更改了样式，以便可以在文本框工具提示上显示错误消息...

这是我显示错误消息的样式...

 **```
<Style TargetType="HeaderedContentControl">
        <Style.Setters>
<Setter Property="Validation.ErrorTemplate">
                <Setter.Value>
                    <ControlTemplate>
                        <!--<Border BorderBrush="Red" 
                                BorderThickness="1" 
                                ToolTip="{Binding ElementName=customAdorner, Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                            <AdornedElementPlaceholder Name="customAdorner" />
                        </Border>-->
                        <AdornedElementPlaceholder Name="customAdorner" 
                                                   VerticalAlignment="Center" 
                                                   ToolTip="{Binding ElementName=customAdorner, Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                            <Border BorderBrush="red" 
                                    BorderThickness="1">                                
                            </Border> 
                        </AdornedElementPlaceholder>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
 </Style.Setters>
    </Style> 
```*  *![在此处输入图像描述](../Images/1a5dccce67474e8e70c9a1f942ed2ef3.png)

提前致谢

我的标题内容控制代码是：

```
 <HeaderedContentControl Header="Name" 
   Content="{Binding Path=ValidationClassProp.Name, Mode=TwoWay, ValidatesOnDataErrors=True}"/> 
```

验证类继承 IDataErrorInfo 的位置...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:23:04.673

您面临的问题是由于您将内容属性绑定`HeaderedContentControl`到模型中的属性。在这种情况下，整体`HeaderedContentControl` 被认为是*错误的*

所以可能的解决方案是显式指定控件的内容`HeaderedContentControl`并绑定到控件的`Text`属性`TextBox`

```
<HeaderedContentControl Header="Name">
    <TextBox Text="{Binding Path=ValidationClassProp.Name, Mode=TwoWay, ValidatesOnDataErrors=True}"/>
</HeaderedContentControl> 
```

并以样式应用您的错误模板`TextBox`

**编辑**

有一个粗略的想法来尝试保留您当前的 xaml。您可以尝试创建`IValueConveter`将其`AdornedElementPlaceholder`作为值，将其转换为`HeaderedContentControl`并尝试获取此控件的内容部分的实际大小和位置，然后准备一个`Thinkness`结构并将其作为结果返回。那`Thinkness`将是`Margin`你的红色边框所以它应该是这样的：

```
<AdornedElementPlaceholder Name="customAdorner" 
    VerticalAlignment="Center"
    ToolTip="{Binding ElementName=customAdorner, Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                        <Border BorderBrush="red"
                                Margin={Binding ElementName=customAdorner, Converter={StaticResource SomeCustomConverter}"
                                BorderThickness="1">                             
                        </Border> 
                    </AdornedElementPlaceholder> 
```

同样，这不是完整的解决方案，而是一个可能的方向，因为获得内容部分的位置仍然不是那么容易......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:08:55.050

由于验证错误模板设置为显示在整个控件上，因此您只需调整数据模板上的绑定，以便验证错误模板显示在模板内的 TextBlock 上，而不是整个 HeaderedContentControl。

我构建了一个小应用程序来演示这一点。这是代码：

**窗口的 XAML**

```
<Window x:Class="_15001777.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:_15001777"
        Title="MainWindow"
        Width="525"
        Height="350">
    <Grid>
        <ItemsControl ItemsSource="{Binding Path=Items}">
            <ItemsControl.ItemTemplate>
                <DataTemplate DataType="{x:Type local:HeaderedItem}">
                    <HeaderedContentControl Header="{Binding Path=Header}">
                        <HeaderedContentControl.HeaderTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Label VerticalAlignment="Center"
                                           HorizontalContentAlignment="Right"
                                           Content="Name" />
                                    <TextBlock VerticalAlignment="Center" Text="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=HeaderedContentControl}, Path=DataContext.Header, ValidatesOnDataErrors=True}" />
                                </StackPanel>
                            </DataTemplate>
                        </HeaderedContentControl.HeaderTemplate>
                    </HeaderedContentControl>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>
</Window> 
```

**窗口的代码隐藏**

```
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Windows;

namespace _15001777
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            DataContext = this;
            Items = new ObservableCollection<object>();
            Items.Add(new HeaderedItem { Header = "One" });
        }

        public ObservableCollection<object> Items { get; private set; } 
    }

    public class HeaderedItem : IDataErrorInfo
    {
        public object Header { get; set; }

        public string this[string columnName]
        {
            get { return columnName == "Header" ? "There was an error!" : null; }
        }

        public string Error { get; private set; }
    }
} 
```**

# android - 使用 Google Drive 应用程序拥有的帐户获取 OAuth2 凭据以在 Android 应用程序中使用

> ID：15001778
> 
> 赞同：0
> 
> 时间：2013-02-21T12:01:40.023
> 
> 标签：android, oauth-2.0, google-drive-api

我正在开发一个 Android 应用程序，用户在为该应用程序的第二个版本开发真正的 CMS 时，要求使用 Google Drive 作为引导 CMS。这意味着他们将想要访问 Drive 控制台并在其中编辑文档，然后我们的应用程序将需要检索这些。

我已经确定最好的方法是使用应用程序拥有的常规 Drive 帐户，如下所述：

[将常规 Google 帐户用作应用程序拥有的帐户](https://developers.google.com/drive/service-accounts#use_regular_google_accounts_as_application-owned_accounts "developers.google.com / 使用常规 Google 帐户作为应用程序拥有的帐户")

这需要我们为用户获取 OAuth2 凭据。上面链接的文章链接到关于这样做的第二篇文章：

[检索和使用 OAuth 2.0 凭证](https://developers.google.com/drive/credentials#retrieve_oauth_20_credentials "developer.google.com / 检索和使用 OAuth 2.0 凭据")

在其中，他们展示*了一个使用**授权码*检索 OAuth2 凭据的程序。根据驱动文档，执行一次就足够了。

如何在给定登录/密码组合的情况下获取授权码，这真的是获得 OAuth2 凭据的最简单方法吗？

此外， state 参数有什么作用，如何设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:20:49.617

您可以按照此处的步骤获取身份验证令牌：

[将 OAuth 2.0 用于 Web 服务器应用程序](https://developers.google.com/accounts/docs/OAuth2WebServer "developer.google.com / 将 OAuth 2.0 用于 Web 服务器应用程序")

这里描述了状态参数：

[google oauth2 redirect_uri 有几个参数](https://stackoverflow.com/questions/7722062/google-oauth2-redirect-uri-with-several-parameters)

并且是一个编码字符串，允许重定向 URL 将状态传递回用于获取 OAuth2 令牌的 Web 应用程序。

# php - 访问两种不同类型的数组时出现问题

> ID：15001783
> 
> 赞同：3
> 
> 时间：2013-02-21T12:01:49.713
> 
> 标签：php, arrays

作为 PHP 的相对新手，我无法访问数组中的各种元素。我必须访问两种不同类型的数组。第一个示例工作正常，尽管第二个引发错误。

任何指针将不胜感激。

PS。我来自JavaScript、VBScript 背景所以了解数组的概念。干杯!

以下代码示例有效

```
// Below is a dump of $dataArray
array (size=4)
  0 => 
    object(SimpleXMLElement)[13]
       public '@attributes' => 
        array (size=15)
          'campaignID' => string '215999956' (length=9)

// Below writes out $dataArray
      foreach($dataArray as $val) {
           print $val['campaignID'];
          } 
```

以下代码示例不起作用

```
// Below is a dump of $dataArray
array (size=4)
  0 => 
    object(AdGroup)[73]
      public 'campaignId' => string '112520126' (length=9)

// Below writes out $dataArray
      foreach($dataArray as $val) {
           print $val['campaignID'];
          } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:05:06.107

第一个是数组，第二个是对象。要在第二个版本中访问campaignID，您需要

```
print $val->campaignID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T12:04:50.210

在您的第二个示例中，您正在使用对象迭代数组，因此您必须使用箭头符号访问您的属性，而不是尝试像数组一样访问它：

```
foreach($dataArray as $val) {
    print $val->campaignID;
} 
```

# api - 控制台控制台 API - 本地重定向网址

> ID：15001792
> 
> 赞同：0
> 
> 时间：2013-02-21T12:02:25.183
> 
> 标签：api, url, console, local

我想在重定向 url 在本地的 Google API 控制台中注册一个新的客户端 ID，但是当我输入它时，它说我的 url 无效。

我要添加的本地网址类似于：“ [http://whatever.something.somethingelse/projectfolder](http://whatever.something.somethingelse/projectfolder) ”

有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T14:25:27.000

我已经在这个问题上搜索了几个小时。当我处于开发模式时，无法弄清楚如何设置一些本地域回调 url。

似乎这是不可能的。我希望我错了。

# javascript - 浮动悬停而不是点击事件

> ID：15001793
> 
> 赞同：0
> 
> 时间：2013-02-21T12:02:27.900
> 
> 标签：javascript, jquery, flot

我现在面临一个问题：我有一个浮动图表，当它被点击时，它会显示一个带有数据的模块化窗口。

我需要做同样的事情，但我需要在悬停时执行此操作，而不是单击事件。github 上的文档仅显示如何在单击事件上执行此操作。我很难在悬停时做同样的事情。有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:11:32.160

在 flot 上悬停的事件称为“plothover”，因此将该事件绑定到图表的容器并设置回调，如下所示：

```
$(diagramContainer).bind("plothover",function(event, pos, item) {
   // event holds the js event, pos holds the (x,y) coordinate, item holds the 
   // closest data item to the event
}); 
```

item通常有足够的信息让你给data item添加一个tooltip，比如属性item.pageX和item.pageY，值保存在属性item.datapoint上，你可以找到访问item.series的series配置属性（如 item.series.color）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:04:06.797

使用悬停更改您的函数事件

```
$(function (){
   $("#yourID").hover(function (){
     //your code goes here 
   })
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:07:58.593

将两个处理程序绑定到匹配的元素，当鼠标指针进入和离开元素时执行。

```
$(function (){
   $("#yourID").hover(OnmouseoverFunction, Onmouseoutfunction);
})

function OnmouseoverFunction()
{
 //on mouse over code
}

function Onmouseoutfunction()
{
 //on mouse outcode
} 
```

# svg - raphael：在标签内显示 HTML 实体

> ID：15001794
> 
> 赞同：3
> 
> 时间：2013-02-21T12:02:28.523
> 
> 标签：svg, raphael, html-entities, graphael

我想将 HTML 实体添加到 raphael 标记，但我看到文本 deg 而不是度数符号 -

```
this.tags.push(
  // make tag (x, y, text, degree, radius)
  r.tag(this.x, this.y[i], this.values[i]+ "&deg;C", 20, 4).insertBefore(this) ... 
```

我怎么能逃脱它？

我不确定哪种语言实际显示此文本，HTML、JavaScript 或 SVG ...

![在此处输入图像描述](../Images/415876913e4e7e104e4237dddb5ed8f1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:33:42.037

您还可以将 fromCharCode 传递给 raphael 节点。

```
r.text(100, 100, String.fromCharCode(176)); 
```

将在文本节点中呈现°实体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T12:30:34.317

通常，您将使用 UTF 编码文件，在这种情况下，您只需输入度数字符 , 就可以了`°`。

# android - 如何在我的代码中修复这个 SuperNotCalledException？

> ID：15001796
> 
> 赞同：0
> 
> 时间：2013-02-21T12:02:35.777
> 
> 标签：android, surfaceholder

我的游戏有问题。每次玩家死亡时，都会出现一个屏幕，可以在其中按“再试一次？”。然而，当他按下这个按钮时，游戏崩溃了，android 说游戏被终止了。然后突然游戏重新开始。我无法弄清楚如何在重新启动之前解决游戏崩溃的问题。这是触摸的代码：

```
if (game_finish == 1) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {

                System.out.println("Trying again!!");
                activity.finish();

                Intent myIntent = new Intent(getContext(), Game.class);
                getContext().startActivity(myIntent);

            }
        } 
```

完成所有后台工作的我的面板如下所示：

```
public abstract class Panel extends SurfaceView implements
        SurfaceHolder.Callback {

    public Panel(Context context) {
        super(context);

        getHolder().addCallback(this);

        runner = new RunnerThread(getHolder(), this);

        setFocusable(true);

        textPaint = new Paint();
        textPaint.setColor(Color.BLUE);
        textPaint.setTextSize(100);
        textPaint.setFakeBoldText(true);

        textPaint_1 = new Paint();
        textPaint_1.setColor(Color.BLUE);
        textPaint_1.setTextSize(50);
        textPaint_1.setFakeBoldText(true);

    }

    protected void update() {
    }

    protected void drawPrimitives(Canvas canvas) {

    }

    protected boolean processTouch(MotionEvent event) {
        return true;
    }

    public boolean addSprite(Sprite sprite) {

        synchronized (runner.getSurfaceHolder()) {
            return sprites.add(sprite);
        }
    }

    @Override
    public void onDraw(Canvas canvas) {

        canvas.drawColor(Color.BLACK);

        // draw all the panel's sprites
        for (Sprite s : sprites) {

            Rect destRect = new Rect(s.getLocation().x, s.getLocation().y,
                    s.getLocation().x + s.getSpriteWidth(), s.getLocation().y
                            + s.getSpriteHeight());

            canvas.save(); // save the position of the canvas
            if (s.getRotation() < 0 | s.getRotation() > 0) {
                canvas.rotate(s.getRotation(),
                        s.getLocation().x + (s.getSpriteWidth() / 2),
                        s.getLocation().y + (s.getSpriteHeight() / 2)); 
                canvas.drawBitmap(s.getGraphic(), s.getSourceRect(), destRect,
                        null); 
            }

            else {
                canvas.drawBitmap(s.getGraphic(), s.getSourceRect(), destRect,
                        null);
            }
            canvas.restore();

        }

        drawPrimitives(canvas);

        if (World.getGame_finish() == 1) {

            paint.setARGB(128, 255, 255, 255);

            rectF.set(0, 0, getMeasuredWidth(), getMeasuredHeight());
            canvas.drawRect(rectF, paint);
            canvas.drawText("GAME OVER", getWidth() / 4, getHeight() / 2,
                    textPaint);
            canvas.drawText("Try Again?", getWidth() / 5,
                    getHeight() / 2 + 150, textPaint_1);
            canvas.drawText("Return to Menu", getWidth() / 2,
                    getHeight() / 2 + 150, textPaint_1);
        }

        if (World.getPaused() == 1) {

            paint.setARGB(128, 255, 255, 255);

            rectF.set(0, 0, getMeasuredWidth(), getMeasuredHeight());
            canvas.drawRect(rectF, paint);
            canvas.drawText("PAUSED", getWidth() / 3, getHeight() / 2,
                    textPaint);
            canvas.drawText("Press anywhere to continue", getWidth() / 4,
                    getHeight() / 2 + 150, textPaint_1);
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        return processTouch(event);
    }

    public void surfaceCreated(SurfaceHolder holder) {

        if (programRunning)
            runner.onResume();
        else {
            runner.setRunning(true);
            runner.start();
            programRunning = true;
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        if (programRunning)
            runner.onPause();
        else {

            boolean retry = true;

            runner.setRunning(false);

            while (retry) {
                try {
                    runner.join();
                    retry = false;
                } catch (InterruptedException e) {
                }
            }
        }
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
    }

    // thread to update this panel
    protected static RunnerThread runner;
    // list of all sprites on the panel
    private ArrayList<Sprite> sprites = new ArrayList<Sprite>();
    public boolean programRunning = false;
    private Paint textPaint;
    private Paint textPaint_1;
    final RectF rectF = new RectF();
    final Paint paint = new Paint();
}

class RunnerThread extends Thread {

    public RunnerThread(SurfaceHolder holder, Panel panel) {
        this.holder = holder;
        this.panel = panel;
    }

    protected void setRunning(boolean running) {
        this.running = running;
    }

    protected SurfaceHolder getSurfaceHolder() {
        return holder;
    }

    protected void onPause() {

        paused = true;

    }

    protected void onResume() {
        // monitor pauseLock
        synchronized (pauseLock) {
            paused = false;

            pauseLock.notifyAll();
        }
    }

    // the main loop of program
    @Override
    public void run() {
        Canvas canvas;

        while (running) {
            canvas = null;

            try {
                // monitor pauseLock
                synchronized (pauseLock) {
                    while (paused) {
                        try {

                            pauseLock.wait();
                        } catch (InterruptedException e) {
                        }
                    }
                }

                canvas = holder.lockCanvas();
                synchronized (holder) {
                    // update game
                    panel.update();
                    // draw the surface
                    panel.onDraw(canvas);
                }

            } finally {
                if (canvas != null) {

                    holder.unlockCanvasAndPost(canvas);
                }
            }
        }
    }

    private SurfaceHolder holder;
    private Panel panel;
    private boolean running = false;
    public boolean paused = false;
    private final Object pauseLock = new Object();

} 
```

最后是logcat：

```
02-21 12:40:54.315: D/dalvikvm(28799): GC_CONCURRENT freed 532K, 6% free 9481K/10048K, paused 3ms+4ms, total 34ms
02-21 12:40:54.456: D/Finsky(28799): [1] 5.onFinished: Installation state replication succeeded.
02-21 12:40:56.096: I/System.out(29399): Trying again!!
02-21 12:40:56.143: D/AndroidRuntime(29399): Shutting down VM
02-21 12:40:56.143: W/dalvikvm(29399): threadid=1: thread exiting with uncaught exception (group=0x40d06930)
02-21 12:40:56.143: I/ActivityManager(390): START u0 {cmp=com.example.game/.Game} from pid 29399
02-21 12:40:56.143: E/AndroidRuntime(29399): FATAL EXCEPTION: main
02-21 12:40:56.143: E/AndroidRuntime(29399): android.app.SuperNotCalledException: Activity {com.example.game/com.example.game.Game} did not call through to super.onPause()
02-21 12:40:56.143: E/AndroidRuntime(29399):    at android.app.Activity.performPause(Activity.java:5210)
02-21 12:40:56.143: E/AndroidRuntime(29399):    at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1226)
02-21 12:40:56.143: E/AndroidRuntime(29399):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:3002)
02-21 12:40:56.143: E/AndroidRuntime(29399):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2971)
02-21 12:40:56.143: E/AndroidRuntime(29399):    at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2949)
02-21 12:40:56.143: E/AndroidRuntime(29399):    at android.app.ActivityThread.access$800(ActivityThread.java:141)
02-21 12:40:56.143: E/AndroidRuntime(29399):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1251)
02-21 12:40:56.143: E/AndroidRuntime(29399):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-21 12:40:56.143: E/AndroidRuntime(29399):    at android.os.Looper.loop(Looper.java:137)
02-21 12:40:56.143: E/AndroidRuntime(29399):    at android.app.ActivityThread.main(ActivityThread.java:5041)
02-21 12:40:56.143: E/AndroidRuntime(29399):    at java.lang.reflect.Method.invokeNative(Native Method)
02-21 12:40:56.143: E/AndroidRuntime(29399):    at java.lang.reflect.Method.invoke(Method.java:511)
02-21 12:40:56.143: E/AndroidRuntime(29399):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-21 12:40:56.143: E/AndroidRuntime(29399):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-21 12:40:56.143: E/AndroidRuntime(29399):    at dalvik.system.NativeStart.main(Native Method)
02-21 12:40:56.643: W/ActivityManager(390): Activity pause timeout for ActivityRecord{4179a378 u0 com.example.game/.Game}
02-21 12:40:57.690: I/Process(29399): Sending signal. PID: 29399 SIG: 9
02-21 12:40:57.714: I/ActivityManager(390): Process com.example.sperm_beta (pid 29399) has died.
02-21 12:40:57.714: I/WindowState(390): WIN DEATH: Window{41e37e08 u0 com.example.game/com.example.game.Game}
02-21 12:40:57.714: I/WindowState(390): WIN DEATH: Window{41e2e4e0 u0 com.example.game/com.example.game.Menu}
02-21 12:40:57.714: I/WindowState(390): WIN DEATH: Window{41e57898 u0 SurfaceView}
02-21 12:40:57.729: D/dalvikvm(29419): Late-enabling CheckJNI
02-21 12:40:57.729: I/ActivityManager(390): Start proc com.example.game for activity com.example.game/.Game: pid=29419 uid=10119 gids={50119, 1028} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:05:46.230

确保像这样打电话给`super.onPause()`你`Game` `Activity`：

```
protected void onPause() {
    // your cleanup code
    super.onPause();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:06:19.413

您的`com.example.game.Game` `Activity`. Android 平台要求您从超类（`Activity`在本例中）调用某些方法，以使应用程序正常运行。

此错误消息告诉您，您`onPause()`在活动中覆盖了方法，`Game`如下所示：

```
@Override
protected void onPause() {
    // your code
} 
```

但是，该平台要求您从类中调用默认`onPause()`实现。`Activity`为此，请输入以下行：

```
super.onPause(); 
```

在`Game.onPause()`方法体的开头。所以，你最终会得到代码：

```
@Override
protected void onPause() {
    super.onPause();
    // your code - same as before
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:06:44.790

错误消息说：

```
02-21 12:40:56.143: E/AndroidRuntime(29399): android.app.SuperNotCalledException: Activity {com.example.game/com.example.game.Game} did not call through to super.onPause() 
```

因此，转到您的*com.example.game.Game* Activity 并在您的**onPause()**中执行以下操作：

```
protected void onPause(){
   super.onPause();
// the rest of your code
} 
```

# cakephp - CakePHP - ACL 和设置 ACO

> ID：15001797
> 
> 赞同：2
> 
> 时间：2013-02-21T12:02:38.740
> 
> 标签：cakephp, acl

我正在我拥有的 CakePHP 应用程序中实现 ACL，我似乎在努力设置 ACO。我一直在关注[Simple ACL Controlled Application](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html)教程，并且已经很好地设置了 aros、acos 和 aros_acos 表，并且通过 groups/add 和 users/add 添加 ARO 效果很好 - 它们被添加到 aros 表中。

现在我正处于必须设置 ACO 的位置​​，老实说，我有点迷茫。本教程使用控制台插件来注册 ACO。但是，此[Net Tuts](http://net.tutsplus.com/tutorials/php/how-to-use-cakephps-access-control-lists/)使用以下方法手动添加它们：

```
$aco = new Aco();  
$aco->create();  
$aco->save(array(  
    'model' => 'User',  
    'foreign_key' => null,  
    'parent_id' => null,  
    'alias' => 'User'  
));  
$aco->create();  
$aco->save(array(  
   'model' => 'Post',  
   'foreign_key' => null,  
   'parent_id' => null,  
   'alias' => 'Post'  
)); 
```

使用这个手动代码，我们正在为整个用户和后控制器创建 ACO——我明白了。如果我想为用户控制器的**编辑操作设置一个 ACO 怎么办？**该语法看起来如何？

我想我宁愿在控制器的 install_aco() 函数中像这样编写它，也不愿使用你看到的插件。

或者......我不能只使用 Auth 控制对控制器/操作的访问而不使用 ACL 吗？例如，我可以在 users 表中添加一个“角色”字段，然后在控制器的 beforeFilter() 中检查角色，如果用户没有正确的角色/权限，则重定向用户。这会有什么缺点？

无论如何，我真的很感谢这里的一些帮助，非常感谢您的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:22:29.233

下面的插件让我很容易在我的 CakePHP 应用程序中实现 ACL：

[http://www.alaxos.net/blaxos/pages/view/plugin_acl_2.0](http://www.alaxos.net/blaxos/pages/view/plugin_acl_2.0)

它提供了一个非常好的界面，不仅可以设置您提到的权限（用户控制器的**编辑**操作），还可以在整个应用程序中找到所有 ACO。

您还提到了采用非 ACL 方法，并且您的建议应该可以正常工作。查看 CakePHP 网站上的这个页面，注意 isAuthorized() 部分：

[http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)

我个人使用过这两种方式，但发现 ACL（使用上述插件）更易于管理。

# bash - bash中的空格分隔参数

> ID：15001802
> 
> 赞同：0
> 
> 时间：2013-02-21T12:02:53.327
> 
> 标签：bash, shell

```
#!/bin/bash  

ret=`zenity --entry `  

zenity --entry --text=$ret 
```

这里第二条指令只打印字符串的第一个单词。如何获取可以包含空格的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:04:00.083

有了这个：

```
zenity --entry "--text=$ret" 
```

这应该将整体呈现`--text=thing with spaces in it`为一个单一的论点。

当然，您的`zenity`可执行文件必须仍然能够处理其中包含空格的参数，但这将是一个*不同*的问题。

例如，请参阅以下脚本可执行文件：

```
#!/bin/bash
echo "[$1]" "[$2]" 
```

当您在不带引号和带引号的情况下运行它时，您会得到以下结果：

```
pax> ./testprog.sh two args
[two] [args]

pax> ./testprog.sh "one arg"
[one arg] [] 
```

# c# - 获取动态创建的下拉值

> ID：15001803
> 
> 赞同：3
> 
> 时间：2013-02-21T12:02:54.123
> 
> 标签：c#, gridview

我想存储`dropdown`在动态模板字段中动态创建的值。

如何访问`dropdown`提交按钮上选定值的值。

我在下面使用

```
public class AddTemplateToGridView : ITemplate
{
    ListItemType _type;
    string _colName;

    public AddTemplateToGridView ( ListItemType type, string colname )
    {
        _type = type;
        _colName = colname;
    }

    void ITemplate.InstantiateIn ( System.Web.UI.Control container )
    {
        switch ( _type )
        {
            case ListItemType.Item:

                DropDownList ht = new DropDownList();
                ht.ID = "ht" + _colName;
                ht.Width = 50;
                ht.Items.Add(new ListItem("Select", "Select"));
                ht.Items.Add(new ListItem("P", "P"));
                ht.Items.Add(new ListItem("A", "A"));
                ht.Items.Add(new ListItem("H", "H"));
                ht.Items.Add(new ListItem("S", "S"));
                ht.Items.Add(new ListItem("L", "L"));
                ht.DataBinding += new EventHandler(ht_DataBinding);
                container.Controls.Add(ht);
                break;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-02T06:30:26.100

Here is a my custom code: Create a windows form "test" and on its load write the following code:

```
 private void test_Load(object sender, EventArgs e)
        {

            DataTable dt = new DataTable();
            dt.Columns.Add("Name");
            dt.Columns.Add("Values");

            dt.Rows.Add(new object[] {"Sagar","Sagar_Value" });
            dt.Rows.Add(new object[] { "Hari", "Hari_Value" });
            dt.Rows.Add(new object[] { "Ram", "Ram_Value" });

            LoadDynamicCombo(comboBox1, dt);

            dt.Clear();
            dt.Rows.Add(new object[] { "one", "one" });

            LoadDynamicCombo(comboBox2, dt);
        }

        public void LoadDynamicCombo(ComboBox _cmb,DataTable dt )
        {
            _cmb.DataSource = dt.Copy();
            _cmb.DisplayMember = "Name";
            _cmb.ValueMember = "Values";

        } 
```

Datatable with columns "Name" and "Values" passed to function "LoadDynamicCombo" accepts argument of your combo and datatable. Combo1 is filled with first set of datas whereas Combo2 is filled with second set of datas..

# actionscript-3 - ActionScript 3 - 动态组合函数

> ID：15001818
> 
> 赞同：2
> 
> 时间：2013-02-21T12:03:58.053
> 
> 标签：actionscript-3, user-defined-functions, on-the-fly

我正在寻找以下 JavaScript 代码的 AS3 等效项：

```
var funcName = "foo();"
var fHandler = new Function("a",funcName  + "return a + 1"); 

fHandler // now equals a function like function(a){ foo(); return a + 1 } 
```

好的，这是一个非常简化的示例

更大的图景是：我有一个与 JavaScript 客户端一起工作的服务器。这个服务器给出的每一个响应，都是一个 JavaScript 函数的回调，作为参数提供服务器的响应。

因此，它不使用复杂的严格 JSON 协议（在属性名称周围加上引号，不需要这样的引号是有效的 Object-Literal，等等其他一些微小的差异在 AS3 中仍然是有效的 Object-Literal） ，并且服务器已经实现了 100 多个 API。

然而，现在有一个要求为移动设备制作一个 Air 客户端。

如果我能做到以下几点 - 那就太好了。这是有效的 EMCA 脚本，但不通过 AS3

```
public function responseFromServer(String:s){
    s = chopCallbackWrap(s); //strips the 'myCallback(' and ')' parts
    //s is now always a string describing a valid Object-Literals not necessarily JSON
    return new Function("", " return " + s ) ();
} 
```

另一方面是在从服务器动态分发的通用客户端算法中进行处理

在 AS3 中执行此操作的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:49:37.190

我看到有两种解决方案：

首先是在运行时使用您需要的脚本创建新的 swf 文件并将其加载到`Loader.loadBytes()`.

我建议你检查这个库[as3abc](https://github.com/claus/as3abc)、[as3swf](https://github.com/claus/as3swf)和[as3commons](http://www.as3commons.org/)。我没有使用它们的经验，但它们都可以在运行时创建和发布 swf（可能其中一些不支持在已发布的 swf 中编写脚本，因此这是一项实验任务）。

第二个是通过执行你的JS`ExternalInterface`并在as3中使用结果。

UPD：`eval`AS3 - [D.eval](http://www.riaone.com/products/deval/index.html)的另一个库 AS2 模拟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:11:05.463

这在 AS3（或 2）中是不可能的，因为运行时中没有内置脚本编译器（这意味着在 AS3 程序中没有对 AS3 代码的动态解释）。也没有 eval 函数（或者更确切地说，它不做 javascript eval 所做的事情）。

您可能必须为 flash 版本制作另一个 API，或者以某种方式插入外部 javascript 引擎。

# image - 在 Node.js 中通过 HTTP 发送大图像数据

> ID：15001822
> 
> 赞同：29
> 
> 时间：2013-02-21T12:04:00.727
> 
> 标签：image, node.js, http

在我的开发环境中，我有两台服务器。`POST`一个通过http 请求向另一个发送和图像。

客户端服务器这样做：

```
 fs.readFile(rawFile.path,'binary',function (err, file){
        restler.post("http://0.0.0.0:5000",{
            data: file,
            headers:{
                "Content-Type": rawFile.type,
            }
        }).on('complete',function(data,response){                               
            console.log(data);
            res.send("file went through")
        }) 
```

接收请求的服务器执行以下操作：

```
 server.post('/',function(req,res,next){
        fs.writeFileSync("test.png",req.body,"binary",function(err){
            if(err) throw err;
            res.send("OK")
        })
    }) 
```

如果我发送一个小图像，它工作正常。但是，如果我发送一个大图像，虽然文件保存正确，但只显示图像的第一上部。其余为黑色。图像大小正确。

我想这只是被写入文件的第一块图像。我试过创建 a`readStream`和 a`writeStream`但它似乎不起作用：

```
req.body.pipe(fs.createWriteStream('test.png')) 
```

我可以直接从二进制数据流式传输`pipe`到文件中吗？就我所见，`readStream`通常用于从文件而不是原始二进制数据中流式传输。

我读了一些[帖子](https://stackoverflow.com/questions/14170210/nodejs-createwritestream-vs-writefile)，但它似乎对我不起作用。

我`restler`在客户端服务器和`restify`另一个中使用模块。

谢谢！

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-02-21T16:58:17.137

很抱歉直言不讳，但这里有很多错误。

[`readFile`](http://nodejs.org/api/fs.html#fs_fs_readfile_filename_encoding_callback)*在调用回调之前将文件的全部内容*读入内存，此时您开始上传文件。

这很糟糕——尤其是在处理像图像这样的大文件时——因为实际上没有理由将文件读入内存。这很浪费；在负载下，您会发现您的服务器将耗尽内存并崩溃。

相反，您想获得一个*stream*，它在从磁盘读取数据时发出数据块。您所要做的就是将这些块传递到您的上传流 ( `pipe`)，然后从内存中丢弃数据。通过这种方式，您永远不会使用超过少量的缓冲内存。

（可读流的默认行为是处理原始二进制数据；只有当您传递一个`encoding`时，它才会处理文本。）

[请求](https://github.com/mikeal/request)模块使这变得特别容易：

```
fs.createReadStream('test.png').pipe(request.post('http://0.0.0.0:5000/')); 
```

在服务器上，你有一个更大的问题。 **永远不要使用 *`Sync`方法。** 它会阻止您的服务器执行*任何*操作（例如响应其他请求），直到整个文件刷新到磁盘，这可能需要几秒钟。

因此，我们希望获取传入的数据流并将其通过管道传输到文件系统流。你原本是在正确的轨道上；`req.body.pipe(fs.createWriteStream('test.png'))`不起作用的原因是因为`body`不是流。

`body`由`bodyParser`中间件生成。在 restify 中，该中间件的行为很像`readFile`，它将整个传入的请求实体缓冲在内存中。在这种情况下，我们不希望这样。禁用正文解析器中间件。

那么传入的数据流在哪里呢？它是`req`对象本身。restify's`Request`继承 node's `http.IncomingMessage`，这是一个可读流。所以：

```
fs.createWriteStream('test.png').pipe(req); 
```

* * *

我还应该提到，这一切都很简单，因为不涉及表单解析开销。请求只是发送没有`multipart/form-data`包装器的文件：

```
POST / HTTP/1.1
host: localhost:5000
content-type: application/octet-stream
Connection: keep-alive
Transfer-Encoding: chunked

<image data>... 
```

这意味着浏览器无法将文件发布到此 URL。如果需要，请查看[formidable](https://github.com/felixge/node-formidable)，它对请求实体进行流式解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:15:31.650

我不太了解restler。但是发布图像是一个多部分的请求。

```
restler.post("http://0.0.0.0:5000",{
    data: restler.file(path, filename, fileSize, encoding, contentType),
    multipart: true
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-06T18:38:00.790

我尝试了上面的解决方案，如果您只是移动上传的文件或以下内容，效果会更好：

`fs.rename(path, newPath, callback(err) {});`

我正在上传超过 200MB 的文件，并且在使用流、同步或异步时会遇到错误。

# eclipse - 在 Eclipse 上“运行”时运行脚本

> ID：15001825
> 
> 赞同：2
> 
> 时间：2013-02-21T12:04:05.223
> 
> 标签：eclipse, ant, compilation

Eclipse 有我们用来编译和执行项目的绿色箭头按钮。

我想在它上面运行额外的脚本，比如构建一个新的 jar 文件，或者在外部 Tomcat 实例中部署一个 war 文件，删除与该 war 相关的文件夹并重新启动 Tomcat，或者在编译之前更新一个 jar 依赖关系，甚至删除一个属性文件，以便它不包含在创建的 jar 中。

我想 Ant 能够做这些事情，但是我如何在脚本之前和之后附加到 Eclipse 上呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:26:03.990

只需执行一个 ant 脚本，使用黑色的 ant 按钮而不是绿色的运行按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T16:15:55.167

Eclipse 与 Ant 很好地集成在一起。只需将您的项目放入您`build.xml`的项目中，右键单击它，选择“Run as”，然后选择“Ant Build”。

然后 IDE 将执行您的脚本并将输出发送到控制台选项卡。我目前正在使用它来将应用程序部署到外部 WebSphere Portal Server，它运行良好。

# javascript - javascript：在字符串中使用大于

> ID：15001829
> 
> 赞同：9
> 
> 时间：2013-02-21T12:04:18.440
> 
> 标签：javascript

我对理解这个 "9">"099" 返回 true 和 "9">"99" 返回 false 感到困惑（9 只是一个例子，它的发生就像 "x">"xabc" 返回 false 和 "x"> "abc" 返回真，其中 a 小于 x 但 abc 大于 x 且 a,b,c,x 是数字）。提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-21T12:06:32.963

> 就像 "x">"xabc" 返回 true 和 "x">"abc" 返回 false，其中 a 小于 x 但 abc 大于 x 并且 a,b,c,x 是数字)

是（除了*不*大于，而且那些是字符，而不是数字）`"abc"`。这是一个*文本*比较，字符串中的数字在比较之前不会转换为数字。因此，比较逐个字符进行，第一次发现差异时停止。在您的情况下，由于左侧字符串中的 大于右侧字符串中的 ，因此结果仅由第一个字符确定。（同样的事情发生在，因为大于。）*`"x"`*`"99" > "099"``"9"``"0"``"x" > "abc"``"x"``"a"`**

 **请注意，两者之间存在很大差异：

```
console.log("99" > "099"); // "true" 
```

和

```
console.log(99 > "099"); // "false" 
```

在后一种情况下，由于其中一个操作数是数字，JavaScript 引擎会尝试将*另一个*操作数转换为数字，然后比较这些数字。在前一种情况下，因为*两个*操作数都是字符串，所以它不会，它会进行文本比较。

旁注：小心以数字开头的字符串`0`（如“099”）。如果它们最终被隐式转换为数字，它们*可能*会被视为八进制（以 8 为基数），具体取决于所使用的 JavaScript 引擎。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T12:12:15.597

`x>abc` is 返回 true，因为`x`其`ascii`值大于`a`

but `x>xbc`is false 虽然`x`值`ascii`等于`x`，但是对于两个字符串中的第二个字符，第一个字符串只有`x`一个字符，而第二个字符串作为第二个字符..`xbc``b`

在`x>abc`

`x`与 比较`a`，当在第一个字符位置`x`大于时`a`，因此返回`true`

在第二个示例`x>xbc`中， first`x`与 比较`x`，返回`0`，因为两者具有相同的 ascii 值..

但是然后`b`比较，`""`因为`"x"`只有`"x"`while`"xbc"`有`"b"`作为第二个字符..存在因此`xb`大于`x`

所以它返回`false`**

# django - 将自定义值传递给表单字段

> ID：15001838
> 
> 赞同：0
> 
> 时间：2013-02-21T12:04:40.160
> 
> 标签：django, django-forms

我有一个 Post 表单，我想在模板层呈现一些自定义值。我的帖子表单是这样的：

```
class PageForm(forms.ModelForm):
    language = ...
    translation_of = ...

    def __init__(self, *args, **kwargs):
        super(PageForm, self).__init__(*args, **kwargs)
        self.fields['language'].wrapper_attrs = {'class': 'left'}
        self.fields['translation_of'].wrapper_attrs = {'class': 'right'} 
```

我的模板是这样的：

```
{% for field in form %}
    >> {{ field.wrapper_attrs }}
{% endfor %} 
```

当我渲染该模板时，期望看到一个 dict 对象或类似的东西。却一无所获。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:35:27.080

在表单实例化之后，它`__getitem__()`会`__iter__()`返回 a`BoundField`而不是原始`Field`实例。`BoundField`用于`"A Field plus data"`渲染，因此您可以尝试`{{ field.field.wrapper_attrs }}`

# asp.net - handlebarsjs，例如 Web 表单中的模板

> ID：15001841
> 
> 赞同：0
> 
> 时间：2013-02-21T12:04:52.217
> 
> 标签：asp.net, webforms

我想在 c# web 表单应用程序中使用 handlebarsjs 之类的模板。这是我需要渲染的模板的粗略外观。目前我正在使用查找和替换文本来执行此操作。但这使我的代码太乱了，尤其是在 if else 部分。
是否有任何模板库可以帮助我渲染这个..!!

```
<ul>
  {{#each items}}
  <li>
     <h1>{{post_title}}</h1>
     <p>{{post_description}}</p>
     <small>{{post_date}}</small>
  </li>
  {{/each}}
</ul> 
```

另一个例子 ：

```
<ul>
  {{#each items}}
  <li>
     <h1>{{post_title}}</h1>
     <p>
       {{#if short-desc}}
          {{post_description}}
       {{#else}}
          {{post_long_description}}
       {{#end if}}
     </p>
     {{#if display-date}}
       <small>{{post_date}}</small>
     {{#end if}}
  </li>
  {{/each}}
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T13:01:58.020

您不能使用 HandlebarsJS 有什么原因吗？当然可以在 webforms 应用程序中使用它。您可以使用类似 JQuery 的 Ajax 功能来获取要呈现的数据。我正在一个应用程序中使用它，它运行良好（但如果你在 iOS 上有用户，请注意 Safari 中的错误）。

# asp.net - 将方法链接到数据源

> ID：15001848
> 
> 赞同：0
> 
> 时间：2013-02-21T12:05:03.017
> 
> 标签：asp.net, sqldatasource

所以 ATM 我的代码工作正常。我使用 SqlDataSource 链接到网格数据源并显示表格。它显示表中的一列，并用作导航到不同页面的超链接。

```
<asp:BoundField DataField="Company Name" HeaderText="Company Name" SortExpression="false" /> 

    <asp:TemplateField>
        <ItemTemplate>
            <asp:HyperLink ID="LoadSubContractorDetails" runat="server" Text="Show Details"/>
         </ItemTemplate>
    </asp:TemplateField>
    </Columns>
     <EmptyDataTemplate>
           There are currently no items in this table.
     </EmptyDataTemplate>

</asp:GridView>
 <asp:SqlDataSource ID="GridDataSource1" runat="server"   
      ConnectionString="<%$ConnectionStrings:ClarkesTest4FromMaster1ConnectionString %>"  
     SelectCommand="SELECT id, [Company Name] FROM [Sub Contractor] ORDER BY [Company Name]" >
</asp:SqlDataSource>  

 protected void passSubContractorInfoToNewPage(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        DataRowView view = (DataRowView)e.Row.DataItem;
        HyperLink LoadSubContractorDetails = (HyperLink)e.Row.FindControl("LoadSubContractorDetails");
        LoadSubContractorDetails.NavigateUrl = ResolveUrl(@"~/SubContractDetails.aspx?id=" + view["id"].ToString() + "&InvoiceId=" + this.CurrentInvoiceId.ToString());
    }
} 
```

但是，正如我所说，代码工作正常，但它显示了数据库表中的所有记录，我只想显示从我拥有的另一个函数返回的分包商：

```
 LoadSubContractors(); 
```

我该怎么做呢？请指教？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:31:40.497

如果您的函数的返回类型`LoadSubContractors()`类似于 a`List`或 a`DataSet`您可以简单地在代码中设置数据源，然后手动绑定数据：

```
myGridView.DataSource = LoadSubContractors();
myGridView.DataBind() 
```

# html - 修复水平二级 HTML 菜单/列表的位置

> ID：15001851
> 
> 赞同：0
> 
> 时间：2013-02-21T12:05:08.727
> 
> 标签：html, css, list, html-lists

您好，我有一个像这样的两级菜单

```
<ul>
  <li>MenuItem1</li>
  <li>MenuItem2</li>
  <li>MenuItem3
    <ul>
      <li>SubMenuItem3.1</li>
      <li>SubMenuItem3.2</li>
    </ul>
  </li>
</ul> 
```

It's a horizo​​ntal menu aligned in the center of the page, and what I want to do is when the MenuItem3 is selected its submenu appears, and its item should appear below MenuItem3\. 我描述的是这样的：

```
MenuItem1   MenuItem2   MenuItem3
                          /\
             SubMenuItem3.1 SubMenuItem3.2 
```

我已经完成了水平操作并出现了子菜单，但是 MenuItem3 的大小会增加以适应子菜单的大小。所以，我得到的是这样的：

```
MenuItem1   MenuItem2           MenuItem3
                                   /\
                      SubMenuItem3.1 SubMenuItem3.2 
```

有没有办法解决这个问题？纯CSS有可能吗？

谢谢！

* * *

在 BenM 请求之后，这是我目前使用的 CSS：

```
#menu ul {
    list-style: none;
    margin: 0;
    padding: 0; 
}

#menu > ul > li {
    position: relative;
    float: left;
}

#menu > ul > li > ul {
    list-style: none;
    margin: 0;
    padding: 0; 
}

#menu > ul > li > ul > li{
    position: relative;
    float: left;
} 
```

-------------------------------------
编辑第 2 卷
--------- ----------------------------
Sen Jacob 建议后，我修改了这个[，](https://stackoverflow.com/questions/7911298/centering-horizontal-submenu-below-parent-with-css)因为我不知道每个顶部有多少个孩子-menu 项有，我使用 Javascript 进行正确的中心对齐。特别是我使用了JQuery 的`width()`and`position()`函数。我希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:06:43.357

您需要`li`包含 sub `ul`，通过不`li`提前关闭来做到这一点：

```
<li>MenuItem3</li>
    <ul>
      <li>SubMenuItem3.1</li>
      <li>SubMenuItem3.2</li>
    </ul> 
```

变成

```
<li>MenuItem3
    <ul>
      <li>SubMenuItem3.1</li>
      <li>SubMenuItem3.2</li>
    </ul>
</li> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:08:51.323

您是否正在努力实现这一目标？

[CSS3 家谱](http://thecodeplayer.com/walkthrough/css3-family-tree)

尝试以下样式，[jsFiddle](http://jsfiddle.net/px4tZ/3/)

```
#menu ul {
    width:auto;
    clear:both;
    display:block;
    list-style: none;
    margin:0 auto;
}
ul li {
    display: inline-block;
    position: relative;
    text-align:center;
    padding: 2px;
}
li ul {
    position: relative;
    display:inline;
    top:25px;
    right:50%;
} 
```

# ios - 如何判断主线程是否已消失？

> ID：15001853
> 
> 赞同：2
> 
> 时间：2013-02-21T12:05:18.210
> 
> 标签：ios, objective-c

我正在从后台线程执行几个步骤，在每个使用完成时更新视图：

```
[self performSelectorOnMainThread:@selector(updateProgress) withObject:nil waitUntilDone:NO]; 
```

问题是如果用户关闭了这个视图。后台线程继续运行，并在执行这些操作之一时使应用程序崩溃。如何判断线程是否已消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:19:35.013

Do you intend run method `updateProgress` in Main thread or Background thread? This is simple trick to check. For the full proof you should use `NSOperationQueue` instead of `performSelector`

synthesize this `BOOL` in your viewController

```
BOOL isBackgroundThreadStop; 
```

initialize to `NO` somewhere relevant

```
self.isBackgroundThreadStop = NO; 
```

When user pressed button dismiss the view:

```
-(void)dismissView
{   
    self.isBackgroundThreadStop = YES;
    [self dismissModalViewControllerWhatEver];
} 
```

So in your method

```
-(void)updateProgress
{
    if(!self.isBackgroundThreadStop){
    //run program if background thread not stop
    //it won't run if isBackgroundThreadStop is set to YES
    }
} 
```

# java - 如何使用 Eclipse 链接指定动态类加载器

> ID：15001854
> 
> 赞同：0
> 
> 时间：2013-02-21T12:05:20.880
> 
> 标签：java, jpa, eclipselink, odata4j

环境：Tomcat-web 服务器、eclipselink-2.4.1(Juno) JPA、Odata4j 我正在使用 eclipse 链接进行 JPA（从表中生成动态实体）。我的 persistence.xml 看起来像

```
<persistence-unit name="abcLink"
        transaction-type="RESOURCE_LOCAL">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <mapping-file>META-INF/eclipselink-orm.xml</mapping-file>           
        <properties>
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost/netspectiveauthentication?zeroDateTimeBehavior=convertToNull"/>
            <property name="javax.persistence.jdbc.user" value="root" />
            <property name="javax.persistence.jdbc.password" value="" />
            <property name="eclipselink.ddl-generation" value="create-tables" />
            <property name="eclipselink.logging.level" value="INFO" />
            <property name="eclipselink.logging.exceptions" value="true" />     
        </properties>
    </persistence-unit> 
```

和在提供者类

```
String persistenceUnitName = "abcLink";      
          EntityManagerFactory emf = Persistence.createEntityManagerFactory(persistenceUnitName,properties);
            emf.createEntityManager();                   
            return new JPAProducer(emf, "abcd", 20); 
```

我将它用于 ODATA4j 实现，因此在运行时将通过覆盖 ODataProducer 创建函数来获得属性我收到以下错误

```
javax.persistence.PersistenceException: Exception [EclipseLink-28017] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Unable to predeploy PersistenceUnit [AuthenticationServiceEclipseMysqlLink] in invalid state [DeployFailed].
Internal Exception: javax.persistence.PersistenceException: Exception [EclipseLink-28019] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Deployment of PersistenceUnit [AuthenticationServiceEclipseMysqlLink] failed. Close all factories for this PersistenceUnit.
Internal Exception: Exception [EclipseLink-7328] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.ValidationException
Exception Description: When using VIRTUAL access a DynamicClassLoader must be provided when creating the entity manager factory using the eclipselink property [eclipselink.classloader]. That is, createEntityManagerFactory(String persistenceUnitName, Map properties) and add a new DynamicClassLoader() to the Map properties.
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1226)
    at org.eclipse.persistence.jpa.PersistenceProvider.createEntityManagerFactory(PersistenceProvider.java:134)
    at javax.persistence.Persistence.createEntityManagerFactory(Unknown Source) 
```

我认为错误很清楚，但我想知道，如何通过属性提供动态类加载器。或任何其他方式来摆脱这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:59:30.283

看看[这个例子](http://old.nabble.com/attachment/31108217/0/TestSingleQuery.java)，在`main`方法的开头。

# android - 无法在 Surface View 中应用洪水填充

> ID：15001858
> 
> 赞同：1
> 
> 时间：2013-02-21T12:05:35.930
> 
> 标签：android, android-canvas

如何在 Surface 视图中的图像上实现洪水填充算法？我已经在 Activity 中成功使用了这个算法。//这是我的课程，我尝试在图像的特定区域填充颜色 public class DrawCanvas extends SurfaceView implements Callback {

```
Bean bean;
Draw d;

String tag;
private Paint paint;
private Path path;

Bitmap mBitmap;
ProgressDialog pd;
 final Point p1 = new Point();
Canvas canvas;
private static final float TOUCH_TOLERANCE = 4;
float mX,mY;

public DrawCanvas(Context context) 
{
    super(context);

}

 public DrawCanvas(Context context, AttributeSet attrs)
    {
        super(context, attrs);    

            this.paint = new Paint();
            this.paint.setAntiAlias(true);
            pd= new ProgressDialog(context);
            this.paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeJoin(Paint.Join.ROUND);
            paint.setStrokeWidth(5f);

            this.path = new Path();

            getHolder().addCallback(this);     
            setFocusable(true);                     

}

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) 
    {

    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) 
    {

            try 
            {
                canvas = holder.lockCanvas(null);
                synchronized (holder) 
                {
                    onDraw(canvas);
                }
            }
            catch (Exception e)
            {
                e.printStackTrace();
            } finally 
            {
                if (canvas != null) 
                {
                    holder.unlockCanvasAndPost(canvas);
                }
            }

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) 
    {

    }
     @Override
        public void onDraw(Canvas canvas) 
     {            
        //super.onDraw(canvas);
        this.canvas=canvas;      

         mBitmap = BitmapFactory.decodeResource(getResources(),R.drawable.c);
         this.paint.setColor(Color.GREEN);
         canvas.drawBitmap(mBitmap, 0, 0,paint);
        }

     @Override
        public boolean onTouchEvent(MotionEvent event)
     {  System.out.println("touch");

            float x = event.getX();
            float y = event.getY();
            switch(event.getAction())
            {
            case MotionEvent.ACTION_DOWN:
            //final Point p1 = new Point();
            p1.x=(int) x;
            p1.y=(int) y;
            final int sourceColor=  mBitmap.getPixel((int)x,(int) y);
            final int targetColor = paint.getColor();
            new TheTask(mBitmap, p1, sourceColor, targetColor).execute();
            invalidate();    
            }
            return true;
        }

        public void clear() {
            path.reset();
            invalidate();
        }
        public int getCurrentPaintColor() 
        {
            return paint.getColor();
        }
        class TheTask extends AsyncTask<Void, Integer, Void> {

            Bitmap bmp;
            Point pt;
            int replacementColor,targetColor;

            public TheTask(Bitmap bm,Point p, int sc, int tc)
            {
                this.bmp=bm;
                this.pt=p;
                this.replacementColor=tc;
                this.targetColor=sc;
                pd.setMessage("Filling....");
                pd.show();
            }
            protected void onPreExecute() {
                pd.show();

            }

            protected void onProgressUpdate(Integer... values) {

            }

            protected Void doInBackground(Void... params) 
            {
                System.out.println("in flood fill");
                FloodFill f= new FloodFill();
                f.floodFill(bmp,pt,targetColor,replacementColor);
                return null;
            }

            protected void onPostExecute(Void result) {     
                pd.dismiss();
                invalidate();
            }
        }

         public class FloodFill 
         {

             public void floodFill(Bitmap image, Point node, int targetColor,int replacementColor)
             {  System.out.println("in class floodfill");
                 int width = image.getWidth();
                 int height = image.getHeight();
                 int target = targetColor;
                 int replacement = replacementColor;

                 System.out.println("target color"+targetColor+"replacement"+replacementColor);
                 if (target != replacement) {
                     Queue<Point> queue = new LinkedList<Point>();
                     do {
                         int x = node.x;
                         int y = node.y;
                         while (x > 0 && image.getPixel(x - 1, y) == target) {
                             x--;
                         }
                         boolean spanUp = false;
                         boolean spanDown = false;
                         while (x < width && image.getPixel(x, y) == target) {
                             image.setPixel(x, y, replacement);
                             if (!spanUp && y > 0
                                     && image.getPixel(x, y - 1) == target) {
                                 queue.add(new Point(x, y - 1));
                                 spanUp = true;
                             } else if (spanUp && y > 0
                                     && image.getPixel(x, y - 1) != target) {
                                 spanUp = false;
                             }
                             if (!spanDown && y < height - 1
                                     && image.getPixel(x, y + 1) == target) {
                                 queue.add(new Point(x, y + 1));
                                 spanDown = true;
                             } else if (spanDown && y < height - 1
                                     && image.getPixel(x, y + 1) != target) {
                                 spanDown = false;
                             }
                             x++;
                         }
                     } while ((node = queue.poll()) != null);
                 }
             }
             }
} 
```

# powershell - 如何让我的变量输出用分号括起来

> ID：15001863
> 
> 赞同：1
> 
> 时间：2013-02-21T12:06:00.787
> 
> 标签：powershell

知道如何将变量输出括在分号中吗？

例如：

```
$animal = "cat" 
```

我对 $animal 的期望输出是“cat”和分号。有什么我能做的吗？

我尝试使用 ' 将分号解析为输出，但它周围会有空格。例如，如果我这样做

写主机 '"'$animal'"'

输出将是“ cat ”，周围有空格。我希望它完全是“猫”

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:46:45.457

尝试用单引号括起来：

```
$animal = '"cat"' 
```

或者，如果您只想将`write-host`转义双引号与 ` 一起使用

```
$animal = "cat"

write-host "`"$animal`"" 
```

# android - Android 应用程序初始化网站内容

> ID：15001864
> 
> 赞同：0
> 
> 时间：2013-02-21T12:06:03.167
> 
> 标签：android, initialization

我正在开发一个连接到网站数据库的安卓应用程序。

网站中的数据将同步到移动设备。现在，当应用程序第一次启动时，一些数据会下载到移动设备进行初始化。

是否可以在安装过程中下载数据？

谢谢！

# sql - 是否可以将 BIRT 设置为在单个数据集中使用多个数据源

> ID：15001867
> 
> 赞同：0
> 
> 时间：2013-02-21T12:06:14.003
> 
> 标签：sql, dataset, report, datasource, birt

是否可以创建 birt 报告，其中我将有两个数据源和一个使用来自两个数据源的数据的数据集？

# java - 什么是 windows 7 的 runtime.getruntime().exec("域特定等效的 cls")

> ID：15001868
> 
> 赞同：5
> 
> 时间：2013-02-21T12:06:16.380
> 
> 标签：java, process, console-application, runtime.exec

我想在我的java应用程序中清除屏幕，在阅读了很多问题和谷歌搜索之后，我找到了下面的代码

```
runtime.getruntime().exec("cls") 
```

或者

```
Runtime.getRuntime().exec("cmd /c cls"); 
```

但是上面的代码在 Windows 7 中不起作用。我知道“cls”脚本是特定于域的，有谁知道我应该在 Windows 7 中使用什么文本。它真的很有帮助，提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:15:07.263

由于`cls`是一个内部命令（`cmd.exe`它自己做而不是调用一个可执行程序），你可以这样做：

```
cmd /c cls 
```

假设您实际运行的是控制台类型的应用程序，这在 Windows 7 下可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:47:29.247

我意识到您正在寻找一种简单的方法来清除屏幕。您将不得不使用换行破解或使用启用 ANSI 的控制台。这是您或其他阅读本文的人可以考虑的使用 JNA 的更难的仅限 Windows 的方法。这是一个教学示例。根据需要添加错误检查/处理/导入/包含。您必须已经知道如何使用 JNA。如果您是 JNA 的新手，这是您尝试的第一个好程序。

```
//------------------------------------------
// Java2Win.class
//------------------------------------------
public interface Java2Win extends Library {
    Java2Win java2Win = (Java2Win)Native.loadLibrary("Java2Win64",Java2Win.class);
    void cls();
}
//------------------------------------------

//------------------------------------------
// Java2Win.c (Java2Win.dll & Java2Win64.dll)
//------------------------------------------
JNIEXPORT void cls() {
   system("cls");
}
//------------------------------------------

//------------------------------------------
// Test
//------------------------------------------
public static void main(final String args[]) throws Exception {
    final File file = new File("rootToDLL", "Java2Win64.dll");
    LibraryLoader.loadLibrary(file);
    System.out.println("-----some output");
    System.out.println("-----some output");
    System.out.println("-----some output");
    Thread.sleep(2000);
    Java2Win.java2Win.cls();
    System.out.println("-----cleared");
}
//------------------------------------------ 
```

# asp.net - Devexpress gridview 事件后数据未加载到主文本框中

> ID：15001872
> 
> 赞同：0
> 
> 时间：2013-02-21T12:06:20.850
> 
> 标签：asp.net, devexpress, aspxgridview

嗨，我是 devexpress gridview 的新手。我在网格外有一个文本框（TotalDebit），我有一个 devex 网格视图，我在其中插入、更新数据。在我的事件处理程序中，当我在 gridview 中插入新行时，我想计算总借方并显示在 gridview 外部的主文本框中。我已经计算了总借方，但问题是它没有显示在 gridview 之外的文本框中。这是代码：

公共无效 grvDetail_RowInserting(objectsender,DevExpress.Web.Data.ASPxDataInsertingEventArgs e) {

如果（DetailTable.Rows.Count > 0）

```
 for (int i = 0; i < DetailTable.Rows.Count; i++)
           {

               if (DetailTable.Rows[i]["FlagDC"].ToString() == "D")
                   TotalDebit += Convert.ToDouble(DetailTable.Rows[i]["Amount"].ToString());
               else
                   TotalCredit += Convert.ToDouble(DetailTable.Rows[i]["Amount"].ToString());

           }

       txtDebit.Text = TotalDebit.ToString(); //textbox outside gridview
       txtCredit.Text = TotalCredit.ToString(); //textbox outside gridview

          } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T10:26:20.773

请参阅[为什么在回调到另一个控件 KB 期间无法更新外部控件数据以](http://www.devexpress.com/Support/Center/Question/Details/KA18609)获得解释。

# html - IE 7-8 Css html 错误

> ID：15001873
> 
> 赞同：0
> 
> 时间：2013-02-21T12:06:22.250
> 
> 标签：html, css

[http://ucuzarakip.com/Kategori/Oyuncak-Kategoriler/Ahsap-Oyuncak/15](http://ucuzarakip.com/Kategori/Oyuncak-Kategoriler/Ahsap-Oyuncak/15)

请在 IE7 或 IE8 中查看此页面。我找不到错误在哪里。它适用于 Firefox 和 Chrome，没有错误。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:14:59.057

您正在使用 HTML5 元素。要使这些元素在 IE7 和 IE8 中工作，请在 head 标签中添加以下代码

```
<!--[if lt IE 9]>
  <script>
      document.createElement('header');
      document.createElement('nav');
      document.createElement('section');
      document.createElement('article');
      document.createElement('aside');
      document.createElement('footer');
      document.createElement('hgroup');
  </script>
<![endif]-->

<style type="text/css">
  header, nav, section, article, aside, footer, hgroup{ 
       display: block;
  }
</style> 
```

（*删除您未使用的 HTML5 元素或在上面的代码中添加您正在使用的 HTML5 元素*）

[来源](https://stackoverflow.com/a/8779603/1577396)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:09:12.783

您正在使用没有[HTML5 shiv](http://code.google.com/p/html5shiv/)的 HTML5 元素。

IE7 和 8 不支持`nav`, `header`,`section`等标签。

# c# - 一个 Web API 控制器中具有不同参数的两个 HTTP Post 方法

> ID：15001874
> 
> 赞同：5
> 
> 时间：2013-02-21T12:06:25.043
> 
> 标签：c#, asp.net, rest, asp.net-web-api

我正在尝试在一个控制器中实现一个具有多个 POST 方法的控制器。我有以下内容：

```
public class PatientController : ApiController
{
    [HttpGet]
    public IEnumerable<Patient> All() { ... }

    [HttpGet]
    public Patient ByIndex(int index) { ... }

    [HttpPost]
    public HttpResponseMessage Add([FromBody]Patient patient) { ... }
} 
```

我的路由上有一个：

```
GlobalConfiguration.Configuration.Routes.MapHttpRoute(
    "API_1",
    "{controller}/{index}",
    new { index = RouteParameter.Optional }); 
```

一切都按预期工作:)

现在，我想添加以下操作：

```
 [HttpPost, ActionName("save")]
    public void Save(int not_used = -1) { ... } 
```

在没有向路由添加任何内容的情况下，我在 Fiddler 中收到以下错误：找到与请求匹配的多个操作。

如果我将此添加到我的路由中（作为第二个或第一个，没关系）：

```
GlobalConfiguration.Configuration.Routes.MapHttpRoute(
    "API_2",
    "{controller}/{action}/{not_used}",
    new { not_used = RouteParameter.Optional },
    new { action = "save|reset" }); // Action must be either save or reset 
```

我会在 Fiddler 中得到同样的错误。

这甚至可能吗？我可以在一个控制器中拥有多个具有不同（类型）参数的 POST 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:55:09.740

您的问题是您有两种方法：`Save`and `Add`，并且都匹配您的 route `API_1`。如果 url 稍有不同，您有另一个`API_2`可能匹配的路由这一事实并不重要：您有两个匹配*该*路由的方法。

你有几个选择：

1.  将 save 方法放在不同的控制器中，并为该控制器始终映射操作名称。
2.  确保`Save`与默认路由不匹配。特别是，您在 Save 中包含了一个可选参数，这意味着可以省略。如果参数是非可选的，它将与路由不匹配。
3.  更改您的架构以使用基于消息的格式；即，不是基于动作进行区分，而是简单地传递一个类并根据它的设置方式进行区分（在 web api 中有点不寻常，但这[`ServiceStack`](http://www.servicestack.net/)就是
4.  更改您的路由以始终包含操作名称。

如果不更好地了解您的确切情况，我真的不能说什么是最好的；虽然我个人会避免让所有这些参数和同时路由处理多个动作的棘手问题——要么总是明确说明动作，要么在代码中处理任何可能的消息（即选项 3 或 4）。面对可选参数的复杂路线简直是一种痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T14:05:41.433

看来我必须修改我的路由...

```
GlobalConfiguration.Configuration.Routes.MapHttpRoute(
    name: "API_2",
    routeTemplate: "{controller}/{action}/{not_used}",
    defaults: new { not_used = "-1" },
    constraints: new { action = "save|reset" });

GlobalConfiguration.Configuration.Routes.MapHttpRoute(
    name: "API_1",
    routeTemplate: "{controller}/{action}/{index}",
    defaults: new { action = "EMPTY", index = RouteParameter.Optional }); 
```

...并将 ActionName 属性添加到所有方法：

```
[HttpGet, ActionName("EMPTY")]
public IEnumerable<Patient> All()

[HttpGet, ActionName("EMPTY")]
public Patient ByIndex(int index)

[HttpPost, ActionName("EMPTY")]
public HttpResponseMessage Add([FromBody]Patient patient)

[HttpPost, ActionName("save")]
public void Save(int not_used = -1) 
```

在这些修改之后，我可以像这样调用保存：

```
localhost:6850/Patient/save 
```

# python - 如果我仅填写（例如）to_price，如何过 滤数据？

> ID：15001875
> 
> 赞同：0
> 
> 时间：2013-02-21T12:06:31.153
> 
> 标签：python, django

```
if 'category' and 'something' and 'from_price' and 'to_price' in request.GET:
        category = request.GET['category']
        something = request.GET['something']
        from_price = request.GET['from_price']
        to_price = request.GET['to_price']

        d = Data.objects.filter(Q(category = category)| Q(something = something)|Q(price__gt=from_price)|Q(price__lt=to_price)) 
```

如果我只填写（例如）如何过滤这些数据`to_price`？（不是所有字段）

我的代码不能正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:09:39.780

```
sum(1 for x in ('category', 'something', 'from_price', 'to_price') if x in request) 
```

返回当前字段的数量（0 到 4）然后您可以检查此数字是 2 还是 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:19:00.180

关于什么

```
import operator
conds = (request.GET.get(f) for f in ('category', 'something', 'from_price', 'to_price'))
if any(conds):
    d = Data.objects.filter(
            reduce(operator.or_, 
                (Q(**{a:b}) for a,b in zip(('category', 'something', 'price__gt', 'price__lt'), filter(lambda x: x, conds))))) 
```

请注意， d 仅在`if`语句和成功执行后的任何代码中可用。

```
# or

category = request.GET.get('category')
something = request.GET.get('something')
from_price = request.GET.get('from_price')
to_price = request.GET.get('to_price')

q = Q()
if category:
    q |= Q(category=category)
if something:
    q |= Q(something=something)
if from_price:
    q |= Q(price__gt=from_price)
if to_price:
    q |= Q(price__lt=to_price)

d = Data.objects.filter(q) 
```

# database - 免费的 oracle 数据库实例

> ID：15001877
> 
> 赞同：-1
> 
> 时间：2013-02-21T12:06:34.803
> 
> 标签：database, oracle10g, create-table

我正在寻找一个数据库实例，我可以在其中尝试一些像这样的 sql 查询（不是 MYSql）......

```
CREATE TABLE membertable
    (Member_id NUMBER(5) UNIQUE,
     Member_Name VARCHAR2(30),
     Member_Address VARCHAR2(50),
     Acc_Open_Date DATE,
     Membership_type VARCHAR2(20),
     Fees_paid Number(4),
     Max_Books_Allowed Number(2),
     Penalty_Amount Number(7,2)
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:08:58.383

如果您只是想要一个游戏笔来尝试基本的 sql，请使用[http://sqlfiddle.com/](http://sqlfiddle.com/) ？

# perl - Perl中的按位异或uudecode字符串

> ID：15001879
> 
> 赞同：-1
> 
> 时间：2013-02-21T12:06:37.667
> 
> 标签：perl, encoding, xor, uuencode

我在左边有以下字符串，右边有编码值：

```
123456789012                ,\#8%-SM+"Q$[2C4?_\n
1234567890123               -\#8%-SM+"Q$[2C4?_SP  \n
12345678901234              .\#8%-SM+"Q$[2C4?_S], \n
123456789012345             /\#8%-SM+"Q$[2C4?_S],,\n
1234567890123456            0\#8%-SM+"Q$[2C4?_S],,*   \n
12345678901234567           1\#8%-SM+"Q$[2C4?_S],,**D \n
123456789012345678          2\#8%-SM+"Q$[2C4?_S],,**GA\n
1234567890123456789         3\#8%-SM+"Q$[2C4?_S],,**GA]P  \n
12345678901234567890        4\#8%-SM+"Q$[2C4?_S],,**GA]]0 \n
123456789012345678901       5\#8%-SM+"Q$[2C4?_S],,**GA]]3^\n
1234567890123456789012      6\#8%-SM+"Q$[2C4?_S],,**GA]]3^_   \n
12345678901234567890123     7\#8%-SM+"Q$[2C4?_S],,**GA]]3^_(< \n
123456789012345678901234    8\#8%-SM+"Q$[2C4?_S],,**GA]]3^_(>'\n 
```

我试图复制解码过程（uudecode -> XOR with key），如下所示：

```
#!/usr/bin/perl

$key = pack("H*","3cb37efae7f4f376ebbd76cdfc");

print "Enter string to decode: ";
$str=<STDIN>;chomp $str; $str =~s/\\(.)/$1/g;
$dec = decode($str);
print "Decoded string value: $dec\n";

sub decode{ #Sub to decode
    my ($sqlstr) = @_;
    $cipher = unpack("u", $sqlstr);
    $plain = $cipher^$key;
    return substr($plain, 0, length($cipher));
} 
```

一切正常，直到我得到一个由 13 个字符组成的字符串：

```
# perl d.pl
Enter string to decode: -\#8%-SM+"Q$[2C4?_SP  \n
Decoded string value: 1234567890123

# perl d.pl
Enter string to decode: .\#8%-SM+"Q$[2C4?_S], \n
Decoded string value: 1234567890123Ó 
```

关于如何解码所有编码数据的任何想法？谢谢！

好的，我自己想出了 HEX 中的密钥。此密钥`3cb37efae7f4f376ebbd76cdfce7391e9ed9cee4cfceb4b3`解码我所有的加密数据。

解决方案，由于ikegami，代码更简洁：

```
#!/usr/bin/perl
use strict;
use warnings;

sub deliteral {
   my ($s) = @_;
   $s =~ s/\\n/\n/g;
   die "Unrecognised escape \\$1\n"
      if $s =~ /(?<!\\)(?:\\{2})*\\([a-zA-Z0-9])/;
   $s =~ s/\\(.)/$1/sg;
   return $s;
}

sub uudecode {
   return unpack 'u', $_[0];
}

sub decode {
   my ($key, $cipher) = @_;
   return substr($cipher^$key, 0, length($cipher));
}

my $key = pack('H*', '3cb37efae7f4f376ebbd76cdfce7391e9ed9cee4cfceb4b3');

print "Enter string to decode: ";
chomp( my $coded = <STDIN> );

my $cipher = uudecode(deliteral($coded));
my $plain = decode($key, $cipher);
print("Plain text: $plain\n"); 
```

输出：

```
$ perl deXOR.pl
Enter string to decode: ,\#8%-SM+"Q$[2C4?_\n
Plain text: 123456789012
$ perl deXOR.pl
Enter string to decode: 8\#8%-SM+"Q$[2C4?_S],,**GA]]3^_(>'\n
Plain text: 123456789012345678901234 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-21T14:06:48.590

这是我的问题的解决方案。我逐字节地强制使用密钥 HEX。

```
#!/usr/bin/perl
use strict;
use warnings;

sub deliteral {
   my ($s) = @_;
   $s =~ s/\\n/\n/g;
   die "Unrecognised escape \\$1\n"
      if $s =~ /(?<!\\)(?:\\{2})*\\([a-zA-Z0-9])/;
   $s =~ s/\\(.)/$1/sg;
   return $s;
}

sub uudecode {
   return unpack 'u', $_[0];
}

sub decode {
   my ($key, $cipher) = @_;
   return substr($cipher^$key, 0, length($cipher));
}

my $key = pack('H*', '3cb37efae7f4f376ebbd76cdfce7391e9ed9cee4cfceb4b3');

print "Enter string to decode: ";
chomp( my $coded = <STDIN> );

my $cipher = uudecode(deliteral($coded));
my $plain = decode($key, $cipher);
print("Plain text: $plain\n"); 
```

# haskell - wxHaskell：初始帧大小太小

> ID：15001883
> 
> 赞同：1
> 
> 时间：2013-02-21T12:06:48.403
> 
> 标签：haskell, wxhaskell

在安装了 WxHaskell 和 gtk2hs 之后，我正在玩弄它们中的哪一个。对于 WxHaskell，我正在研究[haskell.org 上 WxHaskell](http://www.haskell.org/haskellwiki/WxHaskell)的文档。以下第一个示例来自*“快速入门”*部分：

```
 -- Copied from www.haskell.org/haskellwiki/WxHaskell/Quick_start

 module Main where
 import Graphics.UI.WX

 main :: IO ()
 main
   = start hello

 hello :: IO ()
 hello
   = do f    <- frame    [text := "Hello!"]
        quit <- button f [text := "Quit", on command := close f]
        set f [layout := widget quit] 
```

禁止

```
 Debug: wxColour::Set - couldn't set to colour string 'MEDIUM GREY' 
```

和类似以下的行用于不同的图像文件格式

```
 Debug: Adding duplicate image handler for 'PNG file' 
```

代码编译良好并加载到 GHCi 中。但是，运行时出现的窗口的高度为零，只有窗口的顶部栏可见，无需手动调整窗口大小以包含按钮。这在编译和加载到 GHCi 时都会发生。在 GHCi 中，当执行 main 秒和任何后续时间时，高度将是正确的。如果我关闭并重新启动 GHCi 会话，它将再次“平坦”，并且在第一次调用 main 时不包括按钮，但在任何后续调用中都会更正。当编译代码并在 GHCi 之外运行时，窗口总是平坦的。

这是一个错误还是教程已过时或我缺少其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:59:16.873

*从您上面的评论中，这可能不是您想要的，但仅供参考...*

您可以设置最小尺寸，而不是设置尺寸：

```
set f [layout := minsize (sz 300 200) $ widget quit] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-19T02:32:39.793

您可以像在 C++ 中使用 wxWidgets 一样执行此操作，即使用布局。

例如，您可以使用 box sizer：

```
module Main where

import Data.Bits

import Graphics.UI.WX
import Graphics.UI.WXCore.WxcDefs
import Graphics.UI.WXCore.Frame
import Graphics.UI.WXCore.WxcClassesAL
import Graphics.UI.WXCore.WxcClassesMZ
import Graphics.UI.WXCore.WxcTypes

main :: IO ()
main = start simple

simple :: IO ()
simple = do
    hbox <- boxSizerCreate wxHORIZONTAL
    window <- frame [text := "Title"] 
    quitButton <- button window [text := "Quit", on command := close window]
    exitButton <- button window [text := "Exit", on command := close window]
    windowSetSizer window hbox
    sizerAddWindow hbox exitButton 1 (wxEXPAND .|. wxALL) 5 ptrNull
    sizerAddWindow hbox quitButton 1 (wxEXPAND .|. wxALL) 5 ptrNull
    frameCenter window
    return () 
```

# jquery - 如何使用 JQuery 在 DOM 中查找某些值的存在

> ID：15001884
> 
> 赞同：0
> 
> 时间：2013-02-21T12:06:49.260
> 
> 标签：jquery

我如何迭代以下 DOM 并查找某些`li`是否具有以下值`Value2 is here`

我想要一些布尔函数，例如

```
var v = IsValueExist('Value2 is here')

<div class="span6">
    <ol id="sortable1" class="rectangle-list">
        <li><a href="#">Value1</a></li>
        <li><a href="#">Value2 is here</a></li>
        <li><a href="#">Value3 is here</a></li>
    </ol>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:08:57.447

你的意思是：

```
if ($('#sortable1 > li:contains("Value2 is here")').length > 0) {
  //found
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:13:41.850

看看包含选择器：[http](http://api.jquery.com/contains-selector/) ://api.jquery.com/contains-selector/ 但它会同时返回`<a href="#">Value2 is here</a>`和`<a href="#">Value2 is here again</a>`

作为替代方案，您可以执行以下操作：

```
var lis = $("#sortable1 li").filter(function(index){ $(this).text() == "some text"});
if(lis.length > 0) {
  //sortable1  contains an element with "some text" inside
} 
```

[http://api.jquery.com/filter/](http://api.jquery.com/filter/)

# c# - 将纺织品转换为纯文本

> ID：15001885
> 
> 赞同：1
> 
> 时间：2013-02-21T12:06:52.057
> 
> 标签：c#, plaintext, textile

如何使用 Textile 标记清理字符串以获得纯文本？在 C# 中？

例如，字符串

```
Hello! How *do you do* ?
Y = 3 * X 
```

..将转换为：

```
Hello! How do you do ?
Y = 3 * X 
```

我需要转换任何 Textile 字符串，我可以在其中找到任何纺织语法标记（[http://en.wikipedia.org/wiki/Textile_(markup_language)](http://en.wikipedia.org/wiki/Textile_(markup_language))）。char " *" 只是一个。还有“* *”、“#”、“*#”、“_”、“|”、“h1.”、“h2.”……等等。

我**暂时解决了**将 Textile 字符串转换为 HTML，然后将 HTML 转换为纯文本的问题。但这是坏坏**坏的解决方案**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:15:51.377

```
Regex.Replace(str, @"\*(.+)\*", @"$1") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:11:32.263

您可以使用 Textile.NET [http://textilenet.codeplex.com/](http://textilenet.codeplex.com/)，它是 .NET 的 texttile 格式化程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:00:44.597

我不是真正的正则表达式大师，所以有人可能会做得更好。但..

```
string result = Regex.Replace(str, "(?<=[A-Za-z])\\*|\\*(?=[A-Za-z])", ""); 
```

这会将 aZ 前面的任何 * 或 aZ 后面的任何 * 替换为 ""

# jbehave - JBehave给定的复合步骤无法识别

> ID：15001887
> 
> 赞同：1
> 
> 时间：2013-02-21T12:07:06.383
> 
> 标签：jbehave

我在 JBehave 中有以下步骤：

```
@When("user enters product $name details page in admin panel")
@Alias("user enters product <name> details page in admin panel")
@Composite(steps = { "Given product <name> exists", "Given page ADMIN_PANEL_PRODUCT_LIST is loaded" })
public void openProductDetailsPage(@Named("name") String name) {
   // ...
} 
```

当我尝试运行使用此步骤的故事时，将引发异常：

```
org.jbehave.core.configuration.Keywords$StartingWordNotFound: 
No starting word found for step 
'Given page ADMIN_PANEL_PRODUCT_LIST is loaded' 
of type 'WHEN' amongst '{AND=And, IGNORABLE=!--, 
GIVEN=Given, THEN=Then, WHEN=When}' 
```

有什么问题？我`Given page <name> is loaded`在其他测试故事中使用了一个步骤（不是复合的）并且它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T07:42:52.443

尝试使用`Given page name(as < > ) is loaded`并传递值`name=ADMIN_PANEL_PRODUCT_LIST`

# conditional-statements - Sphinx 中的条件目录树

> ID：15001888
> 
> 赞同：10
> 
> 时间：2013-02-21T12:07:06.787
> 
> 标签：conditional-statements, python-sphinx, restructuredtext, docutils, toctree

我想做一个文档的多个版本，它们在包含的部分中有所不同。为了实现这一点，我通常会使用[only](http://sphinx-doc.org/markup/misc.html?highlight=only#including-content-based-on-tags)指令或[ifconfig](http://sphinx-doc.org/ext/ifconfig.html)扩展。但是，我不能将其中任何一个与[toctree](http://sphinx-doc.org/concepts.html#dir-toctree)指令结合使用。

我基本上想要的是这样的：

```
.. toctree::
   :maxdepth: 2

   intro
   strings
   datatypes
   numeric
   .. only:: university
      complex 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-10-06T07:01:11.460

如果您有目录层次结构，我之前的答案将失败，因此我编写了一个简单的`toctree-filt`指令，该指令能够根据条目的前缀过滤条目。例如，给定一个`toctree-filt`指令，如

```
.. toctree-filt::
   :maxdepth: 1

   user-manual
   :internal:supervisor-api
   :draft:new-feature
   :erik:erik-maths
   api 
```

并将排除列表设置为`['draft','erik']`将导致有效的目录树看起来像

```
.. toctree-filt::
   :maxdepth: 1

   user-manual
   supervisor-api
   api 
```

将以下行添加到您的`conf.py`:

```
sys.path.append(os.path.abspath('../sphinx-ext/'))
extensions = ['toctree_filter']
toc_filter_exclude = ['draft','erik'] 
```

将以下代码放在您的目录`/sphinx_ext`旁边：`/source`

```
import re
from sphinx.directives.other import TocTree

def setup(app):
    app.add_config_value('toc_filter_exclude', [], 'html')
    app.add_directive('toctree-filt', TocTreeFilt)
    return {'version': '1.0.0'}

class TocTreeFilt(TocTree):
    """
    Directive to notify Sphinx about the hierarchical structure of the docs,
    and to include a table-of-contents like tree in the current document. This
    version filters the entries based on a list of prefixes. We simply filter
    the content of the directive and call the super's version of run. The
    list of exclusions is stored in the **toc_filter_exclusion** list. Any
    table of content entry prefixed by one of these strings will be excluded.
    If `toc_filter_exclusion=['secret','draft']` then all toc entries of the
    form `:secret:ultra-api` or `:draft:new-features` will be excuded from
    the final table of contents. Entries without a prefix are always included.
    """
    hasPat = re.compile('^\s*:(.+):(.+)$')

    # Remove any entries in the content that we dont want and strip
    # out any filter prefixes that we want but obviously don't want the
    # prefix to mess up the file name.
    def filter_entries(self, entries):
        excl = self.state.document.settings.env.config.toc_filter_exclude
        filtered = []
        for e in entries:
            m = self.hasPat.match(e)
            if m != None:
                if not m.groups()[0] in excl:
                    filtered.append(m.groups()[1])
            else:
                filtered.append(e)
        return filtered

    def run(self):
        # Remove all TOC entries that should not be on display
        self.content = self.filter_entries(self.content)
        return super().run() 
```

现在只需将现有`toctree`指令更改`toctree-filt`为即可。请注意，Sphinx 会发布错误，因为它会查找文档中未包含的文件。不知道如何解决。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-09T07:29:27.800

一个非常简单的解决方案是维护两个不同名称的独立索引文件。您可以指定默认使用哪个索引文件，并在命令行上`conf.py`使用特殊构建覆盖它。`-D master_doc=alternate-index``sphinx-build`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-10T21:01:57.787

据我所知，没有办法做你想做的事。我一直在努力解决同样的问题，请参阅[https://github.com/sphinx-doc/sphinx/issues/1717](https://github.com/sphinx-doc/sphinx/issues/1717)。

原因是 Sphinx 将目录树节点中包含的所有行都作为纯文本处理。

我看到两种选择：

1.  您可以编写自己的 toctree 指令；
2.  您可以扩展目录树，包括一个包含要评估的表达式的选项

    ```
    .. toctree:
       :condition: expression

       file1 
    ```

然后你自定义 doctree resolve 事件。

3.  您可以在定义您自己的标签的原始文本上使用文本替换。您可以为源读取事件实现事件处理程序。例如`$$condition$$`可以包含要评估的条件，而`$$$`块的结尾，即

    ```
    .. toctree:

       file1
       $$mycondition$$
       file2
       $$$ 
    ```

根据`mycondition`，您可以删除以下块行。

数字 3 很简单，而对我来说，数字 2 是最优雅的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-11T12:32:55.777

我的解决方案是将条件内容放在单独的目录“实习生”中并使用标签“内部”。

在 conf.py 我添加了这些行

```
if tags.has('internal'):
    exclude_patters = ['_build']
else:
    exclude_patterns = ['_build', 'intern*'] 
```

现在，当我在命令行上传递“内部”标志时，我得到了所有信息，否则除了实习生目录中的内容之外的所有内容。

标签 internal 只能与 with 结合使用。

ToC 包含对实习生/somedoc 的引用，并且根据需要包含或跳过它们。我确实收到了许多有关丢失页面的警告，但可以将其静音。

# mysql - Mysql WHERE 字段包含 JSON 变量

> ID：15001889
> 
> 赞同：0
> 
> 时间：2013-02-21T12:07:12.457
> 
> 标签：mysql, database, json, codeigniter

我有一个数据库，其中包含一个`myfield`包含 json 字符串的文件：`["2","4","1","6"]`OR `["1"]`。我想为这个文件做一个过滤器，并想用以下方式查询它：

`SELECT id FROM table_name WHERE myfield = '5'`-> 此返回不能回显**id**，因为`["2","4","1","6"]`没有值 5。

`SELECT id FROM table_name WHERE myfield = '1'`-> return 可以回显**id** -> 因为 -> 在 json 字符串`myfield`中的字段值为 1。

如何解决？我该怎么办？

我试过了，但它对我不起作用：

`SELECT id FROM table_name WHERE myfield = '1'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:08:52.080

`id=1`例如，你可以做检查

```
SELECT 1 as id
FROM table_name 
WHERE find_in_set('1', replace(myfield, '"', '')) > 0 
```

您可以在代码中像这样使用它

```
$this->db->query("SELECT 1 as id 
                  FROM table_name 
                  WHERE find_in_set('1', replace(myfield, '\"', '')) > 0"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-18T07:31:38.220

如果您搜索第一项或最后一项，@juergen 给定的解决方案将不起作用。为此，您还需要替换方括号。这对我有用

```
SELECT * 
FROM `tbl_tasks_weekly` 
WHERE FIND_IN_SET('1', REPLACE( REPLACE( REPLACE(`myfield`,']','') ,  '[',''),'\"','')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T10:11:25.937

Use serialization and deserialization to save or retrieve data from database field.

# c# - 使用 Moq 进行单元测试，使用 SequenceEqual 比较包含 TimeSpan 的列表

> ID：15001898
> 
> 赞同：0
> 
> 时间：2013-02-21T12:07:51.390
> 
> 标签：c#, unit-testing

我有一个简单的单元测试方法，比较包含 TimeSpan 值的 2 个列表，我们还使用 Moq 来初始化测试：

```
 private IRepository _RepositoryTimeBand;

       [TestInitialize]
       public void TestInit()
       {
        var TimeBandSet = new List<TimeBand>
            {
                new TimeBand() {StartTime = new TimeSpan(7, 30, 0), EndTime = new TimeSpan(16, 0, 0)},
                new TimeBand() {StartTime = new TimeSpan(19, 0, 0), EndTime = new TimeSpan(21, 0, 0)}
            };

        var RepositoryMoq = new Mock<IRepository>();

        RepositoryMoq.Setup(
            mr =>
            mr.GetTimeBand().Returns(TimeBandSet);

        _RepositoryTimeBand = RepositoryMoq.Object;

       [TestMethod]
    public void GetTimeBand_ExpectListOfTimeBandReturned()
    {
        var expected = new List<TimeBand>
            {
                new TimeBand {StartTime = new TimeSpan(7, 30, 0), EndTime = new TimeSpan(16, 0, 0)},
                new TimeBand {StartTime = new TimeSpan(19, 0, 0), EndTime = new TimeSpan(21, 0, 0)}
            };

        var timeBandList = _RepositoryTimeBand.GetTimeBand();

        Assert.IsNotNull(timeBandList);
        Assert.IsTrue(timeBandList.SequenceEqual(expected));
    } 
```

这就是 TimeBand 类的样子：

```
public class TimeBand
{
    public TimeSpan StartTime { get; set; }
    public TimeSpan EndTime { get; set; }
} 
```

`Assert.IsTrue(timeBandList.SequenceEqual(expected));`在上面的测试方法中，即使 2 个列表相同，也总是返回 false `SequenceEqual`，比较 2 个列表的正确方法是什么？如果没有，还有其他方法可以比较这些列表吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:40:13.440

可以使用**SequenceEqual通过实现***EqualityComparer*来比较 TimeBands 集

 *```
private class TimebandEqualityComparer : IEqualityComparer<TimeBand> 
```

或者可以使用**CollectionAssert**通过实现*IComparer来比较它们*

```
private class TimeBandComparer : IComparer 
```

CollectionAssert 提供了更好的消息（指示第一个不同的项目），但 IComparer 比 EqualityComparer 更混乱（在示例中，我给出了 -1，无论 lhs 是 rhs 是“大”还是“小”；这是不正确的但是因为我们真正关心的只是它们是否相同就足够了（虽然，诚然，为复杂对象添加一个有用的散列函数也可能很乏味）。

要记住的重要一点是，除非目标（在本例中为 TimeBand）实现 IComparable 或覆盖 ==/equals 成员，否则比较将在引用上进行，因此两个具有相同值的不同对象列表将显示除非使用某种助手来比较它们，否则它们是不同的。

```
[TestClass]
public class ComparingTimespans {

    [TestMethod]
    public void CompareTimeBandTwoListsAreSameUsingCollectionAssert() {

var lhs = new List<TimeBand>
{
    new TimeBand { StartTime = new TimeSpan(1,1,1) , EndTime = new TimeSpan(2,2,2)},
          new TimeBand { StartTime = new TimeSpan(3,3,3) , EndTime = new TimeSpan(4,4,4)},
      };

var rhs = new List<TimeBand>
{
    new TimeBand { StartTime = new TimeSpan(1,1,1) , EndTime = new TimeSpan(2,2,2)},
    new TimeBand { StartTime = new TimeSpan(3,3,3) , EndTime = new TimeSpan(4,4,4)},
      };

CollectionAssert.AreEqual(lhs, rhs, new TimeBandComparer());

}

[TestMethod]
public void CompareTimeBandTwoListsAreSameUsingSequenceEquals() {

    var lhs = new List<TimeBand>
    {
new TimeBand { StartTime = new TimeSpan(1,1,1) , EndTime = new TimeSpan(2,2,2)},
new TimeBand { StartTime = new TimeSpan(3,3,3) , EndTime = new TimeSpan(4,4,4)},
    };

    var rhs = new List<TimeBand>
    {
 new TimeBand { StartTime = new TimeSpan(1,1,1) , EndTime = new TimeSpan(2,2,2)},
 new TimeBand { StartTime = new TimeSpan(3,3,3) , EndTime = new TimeSpan(4,4,4)},
    };

    Assert.IsTrue(lhs.SequenceEqual(rhs, new TimebandEqualityComparer()));

}

private class TimeBand {
    public TimeSpan StartTime { get; set; }
    public TimeSpan EndTime { get; set; }
}

private class TimeBandComparer : IComparer {

   public int Compare(object x, object y) {
var xTb = x as TimeBand;
var yTb = y as TimeBand;
return (xTb.StartTime == yTb.StartTime && xTb.EndTime == yTb.EndTime)
         ? 0
         : -1;
   }
}

private class TimebandEqualityComparer : IEqualityComparer<TimeBand> {
    public bool Equals(TimeBand x, TimeBand y) {
return x.StartTime == y.StartTime && x.EndTime == y.EndTime;
    }

    public int GetHashCode(TimeBand obj) {
return obj.StartTime.GetHashCode() ^ obj.EndTime.GetHashCode();
    }
} 
```

}*

# python-3.x - python griddata中的错误：“builtins.IndexError：索引0超出轴0的范围，大小为0”

> ID：15001900
> 
> 赞同：3
> 
> 时间：2013-02-21T12:07:58.417
> 
> 标签：python-3.x, indexing, grid

## 网格数据错误

（改编自：[来自 xyz 数据的 Matplotlib 轮廓：griddata 无效索引](https://stackoverflow.com/questions/13781025/matplotlib-contour-from-xyz-data-griddata-invalid-index)）

我有一个对应于一组坐标的一些值的矩阵。我想从外部文件加载数据并使用 griddata 对象在点之间进行插值。但是，在运行代码时出现错误：

来自griddata的“builtins.IndexError：索引0超出了轴0的范围，大小为0”。我不懂这啥意思？

一段示例代码：

```
def main():
#https://stackoverflow.com/questions/13781025/matplotlib-contour-from-xyz-data-griddata-invalid-index
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.mlab as ml

ndata = 121
ny, nx = 100, 200
xmin, xmax = 0, 10
ymin, ymax = 0, 10

Data = np.loadtxt('Data.dat')
Data = Data.flatten(1)

x = np.array([j for i in np.arange(0,11,1) for j in np.arange(0,11,1)])
y = np.array([j for i in np.arange(0,11,1) for j in np.arange(0,11,1)])
#x = np.random.randint(xmin, xmax, ndata)
#y = np.random.randint(ymin, ymax, ndata)

xi = np.linspace(xmin, xmax, nx)
yi = np.linspace(ymin, ymax, ny)
zi = ml.griddata(x, y, Data, xi, yi)

plt.contour(xi, yi, zi, 15, linewidths = 0.5, colors = 'k')
plt.pcolormesh(xi, yi, zi, cmap = plt.get_cmap('rainbow'))

plt.scatter(x, y, marker = 'o', c = 'b', s = 5, zorder = 10)
plt.xlim(xmin, xmax)
plt.ylim(ymin, ymax)
plt.show() 
```

Data.dat 可从以下网址获得：http: [//pastebin.com/Uk8SHA1F](http://pastebin.com/Uk8SHA1F)

请注意它是如何与提供 x 或 y 的推导结合使用的，而另一个坐标是随机坐标（已注释），但在对 x 和 y 都使用推导时却不行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-11T03:40:39.043

来自griddata的“builtins.IndexError：索引0超出了轴0的范围，大小为0”。我不懂这啥意思？

`index 0 is out of bounds for axis 0 with size 0`

如果在预期二维时提供一维数组，并且第一个索引超出范围，则会出现此错误。例如：

```
>>> np.array([])[0,:]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: index 0 is out of bounds for axis 0 with size 0

>>> np.array([2,4])[3,:]
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
IndexError: index 3 is out of bounds for axis 0 with size 2 
```

请注意，如果您没有为第二轴指定任何值，您会得到一个不同的错误：

```
>>> np.array([])[0]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: index out of bounds 
```

# java - Eclipse：adt 无法实例化类 com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor

> ID：15001913
> 
> 赞同：8
> 
> 时间：2013-02-21T12:08:26.357
> 
> 标签：java, android, layout, adt

在使用 Eclipse 开发并尝试安装 hibernate、storm 和其他一些 ORM/DAO 生成器工具时，eclipse 停止正常工作。

我有两种错误： 1 在构建它时说“正在运行 android lint 错误”。我解决了这个错误，在打开 xml 文件（布局和非布局）时卸载并重新安装 ADT 插件 2。我仍然有这个问题。

**从 res 文件夹打开任何 .xml 文件时，它给了我：** 错误日志：

```
eclipse.buildId=M20120914-1800
java.version=1.7.0_06
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=it_IT
Command-line arguments:  -os win32 -ws win32 -arch x86_64

Error
Thu Feb 21 12:48:55 CET 2013
Plug-in "com.android.ide.eclipse.adt" was unable to instantiate class "com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor".

org.eclipse.core.runtime.CoreException: Plug-in "com.android.ide.eclipse.adt" was unable to instantiate class "com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor".
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194)
    at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:188)
    at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905)
    at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
    at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
    at org.eclipse.ui.internal.WorkbenchPlugin.createExtension(WorkbenchPlugin.java:265)
    at org.eclipse.ui.internal.registry.EditorDescriptor.createEditor(EditorDescriptor.java:235)
    at org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:283)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.createPart(CompatibilityPart.java:249)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityEditor.createPart(CompatibilityEditor.java:60)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.create(CompatibilityPart.java:286)
    at sun.reflect.GeneratedMethodAccessor39.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:859)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:839)
    at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:111)
    at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:319)
    at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:240)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:102)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:71)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:53)
    at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer.createWidget(ContributedPartRenderer.java:141)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:896)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:630)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
    at org.eclipse.e4.ui.internal.workbench.PartServiceImpl$1.handleEvent(PartServiceImpl.java:91)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:41)
    at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
    at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
    at org.eclipse.swt.widgets.Display.syncExec(Display.java:4687)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:187)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:38)
    at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
    at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
    at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
    at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
    at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:81)
    at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:58)
    at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
    at org.eclipse.e4.ui.model.application.ui.impl.ElementContainerImpl.setSelectedElement(ElementContainerImpl.java:171)
    at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.showElementInWindow(ModelServiceImpl.java:418)
    at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.bringToTop(ModelServiceImpl.java:385)
    at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.delegateBringToTop(PartServiceImpl.java:579)
    at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.bringToTop(PartServiceImpl.java:315)
    at org.eclipse.e4.ui.internal.workbench.PartServiceImpl.showPart(PartServiceImpl.java:985)
    at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:3079)
    at org.eclipse.ui.internal.WorkbenchPage.access$22(WorkbenchPage.java:3003)
    at org.eclipse.ui.internal.WorkbenchPage$8.run(WorkbenchPage.java:2985)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2981)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2940)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2931)
    at org.eclipse.ui.ide.IDE.openEditor(IDE.java:655)
    at org.eclipse.ui.ide.IDE.openEditor(IDE.java:614)
    at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:360)
    at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:167)
    at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:249)
    at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:228)
    at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:275)
    at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:251)
    at org.eclipse.jdt.internal.ui.packageview.PackageExplorerActionGroup.handleOpen(PackageExplorerActionGroup.java:376)
    at org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$4.open(PackageExplorerPart.java:538)
    at org.eclipse.ui.OpenAndLinkWithEditorHelper$InternalListener.open(OpenAndLinkWithEditorHelper.java:48)
    at org.eclipse.jface.viewers.StructuredViewer$2.run(StructuredViewer.java:866)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
    at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
    at org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java:864)
    at org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:1152)
    at org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(StructuredViewer.java:1256)
    at org.eclipse.jface.util.OpenStrategy.fireOpenEvent(OpenStrategy.java:275)
    at org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:269)
    at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:309)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414)
Caused by: java.lang.VerifyError: class com.android.ide.eclipse.adt.internal.editors.AndroidSourceViewerConfig overrides final method getContentAssistant.(Lorg/eclipse/jface/text/source/ISourceViewer;)Lorg/eclipse/jface/text/contentassist/IContentAssistant;
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:188)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClassHoldingLock(ClasspathManager.java:632)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:607)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl(ClasspathManager.java:568)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:492)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:465)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:395)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:464)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at
... 
```

**在打开项目根目录中的任何文件（类路径、工厂路径、清单等）时，我会得到：**

第一个错误：

```
eclipse.buildId=M20120914-1800
java.version=1.7.0_06
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=it_IT
Command-line arguments:  -os win32 -ws win32 -arch x86_64

Error
Thu Feb 21 13:02:28 CET 2013
Problems occurred when invoking code from plug-in: "org.eclipse.jface".

java.lang.NullPointerException
    at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:3095)
    at org.eclipse.ui.internal.WorkbenchPage.access$22(WorkbenchPage.java:3003)
    at org.eclipse.ui.internal.WorkbenchPage$8.run(WorkbenchPage.java:2985)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2981)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2940)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2931)
    at org.eclipse.ui.ide.IDE.openEditor(IDE.java:655)
    at org.eclipse.ui.ide.IDE.openEditor(IDE.java:614)
    at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:360)
    at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:167)
    at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:249)
    at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:228)
    at org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:275)
    at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:251)
    at org.eclipse.jdt.internal.ui.packageview.PackageExplorerActionGroup.handleOpen(PackageExplorerActionGroup.java:376)
    at org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$4.open(PackageExplorerPart.java:538)
    at org.eclipse.ui.OpenAndLinkWithEditorHelper$InternalListener.open(OpenAndLinkWithEditorHelper.java:48)
    at org.eclipse.jface.viewers.StructuredViewer$2.run(StructuredViewer.java:866)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
    at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
    at org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java:864)
    at org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:1152)
    at org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(StructuredViewer.java:1256)
    at org.eclipse.jface.util.OpenStrategy.fireOpenEvent(OpenStrategy.java:275)
    at org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:269)
    at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:309)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

第二个错误：

```
eclipse.buildId=M20120914-1800
java.version=1.7.0_06
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=it_IT
Command-line arguments:  -os win32 -ws win32 -arch x86_64

Error
Thu Feb 21 13:02:28 CET 2013
Problems occurred when invoking code from plug-in: "org.eclipse.wst.sse.ui".

java.lang.LinkageError: loader constraint violation: when resolving method "org.eclipse.wst.xml.core.internal.modelquery.ModelQueryUtil.getModelQuery(Lorg/w3c/dom/Document;)Lorg/eclipse/wst/xml/core/internal/contentmodel/modelquery/ModelQuery;" the class loader (instance of org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader) of the current class, org/eclipse/wst/xml/ui/internal/DOMObserver, and the class loader (instance of org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader) for resolved class, org/eclipse/wst/xml/core/internal/modelquery/ModelQueryUtil, have different Class objects for the type elQueryUtil.getModelQuery(Lorg/w3c/dom/Document;)Lorg/eclipse/wst/xml/core/internal/contentmodel/modelquery/ModelQuery; used in the signature
    at org.eclipse.wst.xml.ui.internal.DOMObserver.<init>(DOMObserver.java:152)
    at org.eclipse.wst.xml.ui.internal.registry.AdapterFactoryProviderForXML.addContentBasedFactories(AdapterFactoryProviderForXML.java:70)
    at org.eclipse.wst.xml.ui.internal.registry.AdapterFactoryProviderForXML.addAdapterFactories(AdapterFactoryProviderForXML.java:43)
    at org.eclipse.wst.sse.ui.internal.editor.EditorModelUtil$1.run(EditorModelUtil.java:66)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.runtime.Platform.run(Platform.java:857)
    at org.eclipse.wst.sse.ui.internal.editor.EditorModelUtil.addFactoriesTo(EditorModelUtil.java:64)
    at org.eclipse.wst.sse.ui.StructuredTextEditor.doSetInput(StructuredTextEditor.java:1665)
    at org.eclipse.ui.texteditor.AbstractTextEditor$19.run(AbstractTextEditor.java:3209)
    at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:464)
    at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:372)
    at org.eclipse.ui.internal.WorkbenchWindow$13.run(WorkbenchWindow.java:1675)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.ui.internal.WorkbenchWindow.run(WorkbenchWindow.java:1672)
    at org.eclipse.ui.texteditor.AbstractTextEditor.internalInit(AbstractTextEditor.java:3227)
    at org.eclipse.ui.texteditor.AbstractTextEditor.init(AbstractTextEditor.java:3254)
    at org.eclipse.wst.sse.ui.StructuredTextEditor.init(StructuredTextEditor.java:2049)
    at org.eclipse.ui.part.MultiPageEditorPart.addPage(MultiPageEditorPart.java:239)
    at org.eclipse.ui.part.MultiPageEditorPart.addPage(MultiPageEditorPart.java:213)
    at org.eclipse.wst.xml.ui.internal.tabletree.XMLMultiPageEditorPart.addSourcePage(XMLMultiPageEditorPart.java:334)
    at org.eclipse.wst.xml.ui.internal.tabletree.XMLMultiPageEditorPart.createPages(XMLMultiPageEditorPart.java:493)
    at org.eclipse.ui.part.MultiPageEditorPart.createPartControl(MultiPageEditorPart.java:358)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.createPartControl(CompatibilityPart.java:129)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityEditor.createPartControl(CompatibilityEditor.java:95)
    at org.eclipse.ui.internal.e4.compatibility.CompatibilityPart.create(CompatibilityPart.java:300)
    at sun.reflect.GeneratedMethodAccessor39.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:859)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:839)
    at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:111)
    at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:319)
    at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:240)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:102)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:71)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:53)
    at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer.createWidget(ContributedPartRenderer.java:141)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:896)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:630)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
    at org.eclipse.e4.ui.internal.workbench.PartServiceImpl$1.handleEvent(PartServiceImpl.java:91)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:41)
    at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
    at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
    at org.eclipse.swt.widgets.Display.syncExec(Display.java:4687)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:187)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:38)
    at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
    at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
    at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
    at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
    at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:81)
    at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:58)
    at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
    at org.eclipse.e4.ui.model.application.ui.impl.ElementContainerImpl.setSelectedElement(ElementContainerImpl.java:171)
    at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.showElementInWindow(ModelServiceImpl.java:418)
    at org.eclipse.e4.ui.internal.workbench.ModelServiceImpl.bringToTop(ModelServiceImpl.java:385)
        at 
... 
```

**我尝试过的：**

1.  重新安装java jre和jdk。现在我已经安装了两种架构类型（x86、x64）的版本（6 和 7）。
2.  将环境变量从 jre6 更改为 jr7 bin
3.  卸载我已经安装的所有 ORM 工具（我现在仍然卸载它们）。
4.  谷歌搜索了这么多，试图找到一个解决方案（我也在 sof 中找到了一些类似的答案，但它们对我的问题没有用）。
5.  清理项目并多次重新启动eclipse。
6.  更新了 ADT 并检查了已安装的插件更新。

我很乐意为您提供您需要的所有信息。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-09-21T22:54:00.010

*这个问题已经被问过几次了，但是我在遇到一些非常相似的堆栈后偶然发现了它，所以答案可能仍然有用：*

刚刚使用该选项启动 eclipse 就`-clean`可以使一切重回正轨。在开始删除插件文件夹或从头开始重建工作区之前，总是值得尝试。

# android - 无法使用 intellij IDEA 12.04 CE 编译引用 AndEngine GLES2 的 android 应用程序

> ID：15001919
> 
> 赞同：1
> 
> 时间：2013-02-21T12:08:46.123
> 
> 标签：android, intellij-idea, andengine

几个小时以来，我一直在努力将错误引用到 AndEngine GLES2。我已经按照这个指南，[http://jimmaru.wordpress.com/2012/04/23/setting-up-andengine-gles2-0/](http://jimmaru.wordpress.com/2012/04/23/setting-up-andengine-gles2-0/)并且不知何故我可以编译AndEngine（至少，没有错误，虽然有 33 个警告），但是当我从我从[https://github.com/nicolasgramlich/AndEngineExamples](https://github.com/nicolasgramlich/AndEngineExamples)下载的 android 应用程序中引用它时会产生一堆错误，说“java：包 org.andengine.engine.camera 不存在"或类似的（信息是日文的，所以可能会略有不同）请参阅附图。

![在此处输入图像描述](../Images/30fdc67264c908b5cb3da3c3150674ba.png)

到目前为止我做了什么
**AndEngine**

*   项目结构 - 项目设置 - 项目 - 将项目 SDK 更改为“Android 4.2 平台”
*   项目结构 - 项目设置 - 模块 - 依赖项 - 将模块 SDK 更改为“Android 4.2 平台”
*   项目结构——项目设置——构面——勾选“库模块”

**AndEngine示例**

*   项目结构 - 项目设置 - 项目 - 将项目 SDK 更改为“Android 4.2 平台”
*   项目结构 - 项目设置 - 库 - 添加“AndEngine”（类和源）
*   项目结构 - 项目设置 - 模块 - 依赖项 - 将模块 SDK 更改为“Android 4.2 平台”

我的环境如下。
Windows 7 家庭高级版 64bit
IntelliJ IDEA 12.04 CE
java 版本 1.7.0

我对 Java 和 Android 世界非常陌生，所以任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:26:11.470

AndEngine 应该被配置为一个**模块**（在中启用**库模块**选项`Android facet`），而不是一个普通的 Java 库。

请参阅相关问题：[将 facebook SDK 添加到 IntelliJ Android 项目？](https://stackoverflow.com/q/7262221/104891)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T18:57:40.803

您需要遵循 mybringback.com 上的教程，它将深入解释正在发生的事情并帮助修复这些错误。[mybringback.com](http://www.mybringback.com/series/andengine-gles2-android-game-development/) 首先，如果您使用 GLES1 和 GLES2，会有所不同。JAVA编译器需​​要放在16。库模块必须按原样导入和引用，否则不能使用。他会把它放入真正破碎的视频中。

# java - 在调试到 Eclipse 期间，仅功能 F8 不起作用

> ID：15001921
> 
> 赞同：1
> 
> 时间：2013-02-21T12:08:51.690
> 
> 标签：java, eclipse, debugging, editor

在调试到 Eclipse 期间
其他功能键`F5`，如`F6`&`F7`完美运行，
但只有该`F8`功能不起作用
是什么原因？这个问题在调试模式下花费了我更多的时间
你能分享你的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:19:57.887

你检查过你的 Eclipse 键绑定吗？难道它已经被任何机会改变了？

要检查，请转到 Window > Preferences > General > Keys > 搜索“Resume”。

您也可以尝试将“Resume”绑定到其他键，看看是否适合您。

# shell - 变量连接在 shell 脚本中有奇怪的结果

> ID：15001923
> 
> 赞同：4
> 
> 时间：2013-02-21T12:08:52.633
> 
> 标签：shell, unix

我正在编写（我的第一个）shell 脚本，并且为了灵活性想使用变量。这是我根据搜索的不同示例编写的脚本的一部分：

```
#!/bin/sh
#
jar_path="/sbclocal/apps/blablabla"
echo $jar_path            # <- OK
echo ${jar_path}          # <- OK
echo $jar_path/jar        # <- /jarlocal/apps/blablabla
echo "$jar_path/jar"      # <- /jarlocal/apps/blablabla
echo ${jar_path}/jar      # <- /jarlocal/apps/blablabla
echo "${jar_path}/jar"    # <- /jarlocal/apps/blablabla 
```

在最后一行，我希望得到“/sbclocal/apps/blablabla/jar”，但我得到的是“/jarlocal/apps/blablabla”！因此，变量字符串的开头不是连接，而是替换为常量部分，我希望这最终！

jar 参数内部还有更复杂的串联，它以我无法确定的方式被破坏，但我想问题是一样的。

请问这里有什么问题吗？

UPD：编辑显示我尝试过的不同方法，都具有相同的结果。

UPD：我也尝试了2个变量，奇怪的是第一个没有显示，就像它是空的，当我写类似的东西时

```
echo $var1$var2
echo ${var1}${var2}
echo ${var1}+${var2} 
```

这太疯狂了，我想我会放弃并使用旧的普通复制粘贴，因为这样会快得多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T12:53:41.750

太长了作为评论......

```
$ ./var.sh 
/sbclocal/apps/blablabla
/sbclocal/apps/blablabla
/sbclocal/apps/blablabla/jar
/sbclocal/apps/blablabla/jar
/sbclocal/apps/blablabla/jar
/sbclocal/apps/blablabla/jar 
```

正如我所说，你的脚本非常适合我。要检查的东西：

首先，将 shebang 更改为`#!/bin/sh -x`以启用调试并查看输出。

其次，运行`file var.sh`检查行尾。预期结果应该是：

```
$ file var.sh 
var.sh: POSIX shell script text executable 
```

`dos2unix`使用或转换为 unix 格式`fromdos`。

# android - twitter4j登录安卓

> ID：15001927
> 
> 赞同：2
> 
> 时间：2013-02-21T12:09:11.950
> 
> 标签：android, twitter, login, twitter4j

我按照[http://www.androidhive.info/2012/09/android-twitter-oauth-connect-tutorial/](http://www.androidhive.info/2012/09/android-twitter-oauth-connect-tutorial/)上`TWITTER_CONSUMER_KEY`的教程`TWITTER_CONSUMER_SECRET`进行`loginToTwitter()`了操作不应该就主要活动进行沟通。我还确保在我的应用程序 Twitter 设置中填写了回调 URL，因此它就像浏览器应用程序一样。

我到了登录 twitter 然后返回到应用程序的地方

不在这里输入代码的位对我有用的是：

```
> AccessToken accessToken = twitter.getOAuthAccessToken(requestToken,
> verifier); 
```

返回一个空值

我检查了不为空的变量“verifier”，然后检查了具有三个值的“requestToken”。

```
token={has value}
tokenSecret={has value}
secretKeySpec={null} 
```

“secrectKeySpec”是否为空是否重要，或者这是一个红鲱鱼

有人可以告诉我出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:18:51.053

我遇到了同样的问题，但是在倾倒 StackTrace 之后我发现：

```
AccessToken accessToken = twitter.getOAuthAccessToken(requestToken, verifier); 
```

需要放在自己的线程上。方法 getOAuthAccessToken 正在主 UI 线程上执行 HttpConnection，因此产生：

```
System.err android.os.NetworkOnMainThreadException 
```

希望这可以帮助！

# java - 为什么第一次启动对话框时会创建两次支持 bean？

> ID：15001931
> 
> 赞同：2
> 
> 时间：2013-02-21T12:09:20.537
> 
> 标签：java, jsf, primefaces

我正在为我的 Web UI 项目使用 PrimeFaces UI 库。

我有一个`manage_watchfolder.xhtml`有按钮的页面，这个按钮会启动一个对话框：

```
<p:commandButton value="Add" oncomplete="dlgEditWF.show()" update=":editWFForm">  
    <f:param value="#{item.value.ID}" name="editId"/>
    <h:graphicImage value="./edit.png" />
</p:commandLink> 
```

在同一个文件中，我`dlgEditWF`包含了`edit_watchfolder.xhtml`：

```
<p:dialog id="editDialog" widgetVar="dlgEditWF" dynamic="true">
    <ui:include src="edit/edit_watchfolder.xhtml"/>
</p:dialog> 
```

我`dynamic=="true"`用来防止`edit_watchfolder.xhtml`在单击按钮之前被加载。

`editWFForm`是 中的一种形式`edit_watchfolder.xhtml`。

问题是当我*第*一次启动对话框时，`edit_watchfolder.xhtml`支持 bean（请求范围）被创建了两次。第一次传递的值`editId`（见上面的代码）是好的，但第二次它不存在，所以支持 bean 得到错误的值。

在我返回（`OK`或`Cancel`按钮）到父页面并再次启动对话框后，问题就消失了，一切正常。问题似乎只是第一次启动。

为什么第一次启动对话框时会创建两次支持 bean？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:22:01.353

这是因为第一次打开对话框时发送 AJAX 请求以加载实际内容。这里唯一合理的是使用`@ViewScoped`bean 来处理这两个请求： first 由 触发`commandButton`， seconds 由 触发`dlgEditWF.show()`。当然，如果您删除`dynamic="true"`，将只有一个请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T12:27:19.237

我怀疑这是因为 Primefaces`dynamic`功能的工作原理。

commandButton 的第一个请求将发送带有 editID 的请求参数以进行加载。发生此请求并收到响应并更新页面元素后，将`oncomplete`出现显示对话框的 javascript。

一旦显示对话框，就会发生*一个完全不同的请求*来*动态*加载对话框的内容，除了这次没有 editID 参数。因此，您的 bean`@RequestScoped`被创建了两次，第二次它不保留 editID 请求参数。

有三种可能的解决方案：

1.  `dynamic`从对话框中删除属性

2.  将您的 bean 更改为`@ViewScoped`或`@SessionScoped`。

3.  将 editID 请求参数更改为`@SessionScoped`托管 bean 中的 bean 属性。

# php - 管理面板的 htaccess 重写规则

> ID：15001934
> 
> 赞同：2
> 
> 时间：2013-02-21T12:09:26.143
> 
> 标签：php, .htaccess, url-rewriting, url-routing

我的网络应用程序中有这样的 url 模式“ **www.mysitename.com/foldername/controller/method** ”。并且所有请求的页面首先被重定向到根文件夹上的 index.php，然后它处理请求的页面。但是每当我进入管理面板（**www.mysitename.com/admin**）时，url都会将“admin”作为文件夹名称，它会向我显示管理员的 index.php（这很正常），然后使用**控制器**名称或**methodname**它不会通过 admin 文件夹的 index.php 重定向。

每当我访问“管理员”时，我都想要这种模式中的网址“ **www.mysitename.com/admin/foldername/controller/method** ”。以及通过 admin 请求的所有页面应首先重定向到 admin 文件夹上的 index.php。这是我的 htaccess 文件-

```
 Options -Indexes 
    RewriteEngine on

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l

    RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T05:49:50.890

您的管理目录中有`.htaccess`文件，还是根目录中只有一个文件？您需要在每个目录中都有一个。

我刚刚用你的`.htaccess`in`/htdocs/pro`和同样的`.htaccess`in测试了这个`/htdocs/pro/admin`，它完全按照你的解释工作。

根 htaccess 在`/htdocs/pro/.htaccess`

```
Options -Indexes 
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

管理员 htaccess 在`/htdocs/pro/admin/.htaccess`

```
Options -Indexes 
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

单个 htaccess 文件，用于两个 in`/htdocs/.htaccess`或`/htdocs/pro/.htaccess`

```
Options -Indexes
RewriteEngine on

# Change '/pro/' if directory is renamed
RewriteBase /pro/

# Change the '/pro/' portion of the condition if directory is renamed 
RewriteCond %{REQUEST_URI} ^/pro/admin(.+)$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.+)$ admin/index.php?url=$1 [QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

# sql-server-2008 - 使用 EF 代码优先锁定

> ID：15001942
> 
> 赞同：3
> 
> 时间：2013-02-21T12:10:08.987
> 
> 标签：sql-server-2008, entity-framework, concurrency, ef-code-first, locking

我有一个包含汽车信息的表（我们称之为 tbl_incoming_car）。该表有一个名为“customer_number”的非唯一列，它显示了到目前为止进入系统的汽车数量。同一辆车可以进出很多次，但只注册一次。

因此，当一辆新车进入时，我需要获取最后一辆的编号，将其递增，然后将其保存为新车的“customer_number”。

我知道最简单的方法是为汽车设置一个单独的表，在其中放置“customer_number”，然后在其他表中注册输入和输出，但这只是暴露情况的一个愚蠢示例。所以没有必要讨论这种方法是错误的，我已经知道了:)

正如我所说，每次新车进入系统时，我都必须获取最新添加的行，获取“customer_number”，将其递增并将其保存为原子操作。其他应用程序实例可以尝试做同样的事情，并且数据库必须在“创建任务”期间保留对最后添加的行的请求。

我认为我可以通过将隔离级别设置为可序列化来做到这一点，但我认为它不会阻止读取最后一行，而是插入新行。所以看起来锁定是解决方案。我尝试在代码中使用静态对象作为监视器，它工作正常，但当然它仅限于同一个应用程序域，我需要数据库级别的东西。

我认为 EF 中没有任何东西可以在数据库上设置锁，那么在表上设置锁并稍后释放它的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T22:49:01.853

到目前为止，这是我想出的最好的方法：

```
 public void SetTransactionLock(String resourceName)
    {
        Ensure.IsNotNull(resourceName, "resourceName");

        String command = String.Format(
        @"declare @result int;
          EXEC @result = sp_getapplock '{0}', 'Exclusive', 'Transaction', 10000 
          IF @result < 0
            RAISERROR('ERROR: cannot get the lock [{0}] in less than 10 seconds.', 16, 1);",resourceName);

        base.Database.ExecuteSqlCommand(command);
    }

    public void ReleaseTransactionLock(String resourceName)
    {
        Ensure.IsNotNull(resourceName, "resourceName");
        String command = String.Format("EXEC sp_releaseapplock '{0}';",resourceName);
        base.Database.ExecuteSqlCommand(command);
    } 
```

由于 EF 中没有内置方法，因此我将这两种方法添加到我的数据层，并使用它们来声明只允许一个并发操作的“临界区”。

您可以在 try finally 块中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T23:13:52.107

Serializable 实际上确实解决了这个问题。可序列化意味着事务的行为就好像它们都使用了全局数据库 X 锁。好像只有一个事务同时执行。

对于插入也是如此。锁将采取防止插入错误位置的方式。

但是，您可能无法实现无死锁。还是值得一试的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T00:17:29.613

使用 REPEATABLE READ 隔离级别可以在执行 SELECT 命令时获取锁。我怎么不知道然后 SELECT 命令检索最后一行，也许它不会工作。执行 SELECT 的方式改变了 SQL 锁定行/索引/表的方式。

最好的方法是执行存储过程。EF 在数据库和应用程序之间进行一些往返，这将增加锁定时间并影响您的应用程序性能。

也许您可以在插入后使用触发器进行更新。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T17:20:20.047

EF 与 C# 一起使用`TransactionScope`。

过去，我一直在解决类似的问题：

```
 using (var ts = new TransactionScope())
        {
            using (var db = new DbContext())
            {
                db.Set<Car>().Add(newCar);
                db.SaveChanges();
                // newCar.Id has value here, but record is locked for read until ts.Complete()

                newCar.CustomerNumber = db.Set<Car>().Max(car => car.CustomerNumber) + 1;
                db.SaveChanges();
            }
            ts.Complete();
        } 
```

任何并发任务中的行都`db.Set<Car>().Max(car => car.CustomerNumber)`必须等待，因为它需要访问所有记录，您可以通过在 ts.Complete() 之前添加断点并尝试`Select max(CustomerNumber) from dbname.dbo.Cars`在该行暂停代码时执行来检查这一点。当您恢复代码并且 ts 完成时，查询将完成。

当然，这仅适用于您的示例足以描述您所拥有的真实场景的情况，但它应该很容易适应您的需求。

有关更多信息，请参阅[MSDN 上的 ef 中的事务。](http://msdn.microsoft.com/en-us/library/vstudio/bb738523%28v=vs.100%29.aspx "如何：在实体框架中管理事务")

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-19T18:02:11.010

之前在这个线程上提到的解决方案可能并不普遍适用，因为 EF`sp_resetconnection`在任何 SQL 操作之前运行，所以当你在 DbContext 上运行任何涉及 SQL 的东西时，它实际上释放了你应该持有的锁。

我想出的是：你需要在获取锁之前克隆 SqlConnection ，并保持这个连接直到你准备好释放：

```
public class SqlAppLock {
    DbConnection connection;
    public SqlAppLock(DbContext context, string resourceName)
    {
        ... (test arguments for null, etc)
        connection = (DbConnection)(context.Database.Connection as ICloneable).Clone();
        connection.Open();

        var cmd = connection.CreateCommand();
        cmd.CommandText = "sp_getapplock";
        ... (set up parameters)
        cmd.ExecuteNonQuery();

        int result = (int)cmd.Parameters["@result"].Value;
        if (result < 0)
        {
            throw new ApplicationException("Could not acquire lock on resource");
        }
    } 
```

然后释放，可以使用释放锁`sp_releaseapplock`，或者简单地 Dispose() 连接

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T14:37:50.727

EF 支持 SQL 时间戳，也称为 rowversion 数据类型。

这允许您使用乐观锁定执行更新。如果正确声明了字段，该框架会为您执行此操作。本质上 ：

**UPDATE where ID=ID SET Customer_number to X+1** 变为 **Update where ID=ID and Rowversion = rowversion Set Customer_number =X+1**

因此，如果行在线程 X 中加载后发生了更改，则会出现错误。您可以重新加载并重试，或者采取适合您的方案的任何操作。

形成更多信息，请参阅[http://msdn.microsoft.com/en-us/data/jj592904](http://msdn.microsoft.com/en-us/data/jj592904)

和

[http://msdn.microsoft.com/en-us/library/aa0416cz.aspx](http://msdn.microsoft.com/en-us/library/aa0416cz.aspx)

和这个SO帖子

[确定何时在数据库上更改实体数据的好方法是什么？](https://stackoverflow.com/questions/7279653/what-is-a-good-method-to-determine-when-an-entities-data-has-been-changed-on-the/7283499#7283499)

# testing - 为多个团队项目使用一台物理测试机

> ID：15001946
> 
> 赞同：2
> 
> 时间：2013-02-21T12:10:27.113
> 
> 标签：testing, tfs, automated-tests, coded-ui-tests

我的情况是这样的：我有多个相当小的 winforms 项目，我正在为其创建编码的 UI 测试。我有一台物理机器可用于运行上述 UI 测试，每个项目都很少需要运行测试，所以一台机器就足够了。

我在单个项目上运行了测试（使用 MTM，创建了测试用例，然后在 VS 端，我使用了相关的自动化东西，创建了 LabDefaultProcess 并将它们映射到测试套件），这完全符合我的要求。

当我尝试将同一台测试机用于另一个团队项目时，问题就出现了。我无法从 MTM Lab Management 添加环境，因为它显示所选环境已在使用中。

那么真的有这样的限制吗（这意味着我必须将我的所有项目组合到一个团队项目中才能克服它），还是有更复杂的方法来做到这一点？

在可用于测试的单台计算机上，我安装了测试控制器和测试代理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T14:34:20.340

您创建的环境绑定到您的团队项目。这是实验室管理中的一项要求，您的机器不是一个非常松散耦合的实体以供重用。

解决此问题的一种方法是自定义构建模板。例如。带有参数的自定义构建模板，该参数指定您要使用的项目。这会在该特定项目的构建定义上触发构建，然后将 drop 复制到您的 drop 文件夹以供进一步使用。

这里的问题是您的所有测试结果都将针对这个单一项目而不是真正针对原始项目进行报告。另外，您需要自己维护模板。

# version-control - 从我的视图中找到我的“悬挂”结帐

> ID：15001951
> 
> 赞同：1
> 
> 时间：2013-02-21T12:10:39.903
> 
> 标签：version-control, clearcase, snapshot-view

我在 ClearCase 的快照视图中签出了文件。
vob 服务器发生了变化，现在我遇到了以下情况：
文件已签出，但当我尝试找到它们时：`Find Checkouts`在视图文件夹中执行操作不会将它们列为签出。
是否有一种工作方式/方法可以检索所有这些“丢失”的结账？
在我看来，它们是私人文件，但是太多了，无法手动一一找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:31:32.510

第一步是[列出所有被劫持的文件](https://stackoverflow.com/questions/7657084/command-to-find-all-view-private-files-in-the-current-directory-recursively/7657120#7657120)，看看你签出的文件是否在其中。

您也可以执行`cleartool update`, 并查看`*.updt`它将生成的文件：它将列出所有未更新的文件（因为它们被劫持或签出）。

# haskell - 如何修复“-no-user-package-conf 已弃用”警告

> ID：15001955
> 
> 赞同：1
> 
> 时间：2013-02-21T12:10:53.933
> 
> 标签：haskell, ghc, cabal

自从我升级到 GHC 7.6.2 后，我看到了如下警告：

```
amy@wombat$ cabal install
Resolving dependencies...
Configuring realta-0.1.0.0...
Building realta-0.1.0.0...
Preprocessing executable 'realta-init' for realta-0.1.0.0...

on the commandline: Warning:
    -no-user-package-conf is deprecated: Use -no-user-package-db instead

on the commandline: Warning:
    -package-conf is deprecated: Use -package-db instead 
```

该警告可能与[http://hackage.haskell.org/trac/ghc/ticket/5977](http://hackage.haskell.org/trac/ghc/ticket/5977)有关。如果可能的话，我想修复这些警告，以便我可以使用 -Werror 编译我的代码。使用命令`cabal install -v`，我发现 cabal 在 ghc 命令中使用了这个标志，如下所示。

```
/usr/local/ghc-7.6.2/bin/ghc --make -o dist/build/realta-init/realta-init -hide-all-packages -fbuilding-cabal-package -no-user-package-conf -package-conf  AND SO ON 
```

我可以做些什么来让阴谋集团使用新旗帜吗？（注意：在我的 ~/.cabal/config 文件中，我设置`user-install: False`了 ，这可能是相关的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:20:05.903

它似乎是[固定](https://github.com/haskell/cabal/issues/1002)的`HEAD`（至少`-package-conf`）。您可以通过从 repo 安装它来升级`cabal-install`或等待下一个版本。

# java - Android NoSuchElementException 和扫描器

> ID：15001958
> 
> 赞同：2
> 
> 时间：2013-02-21T12:10:59.197
> 
> 标签：java, android, parsing, java.util.scanner

我正在尝试通过从原始文件夹中读取 txt 文件来为我的应用程序创建一个整数数组。txt 的每一行都有编号，如下所示：

测试.txt

```
1
3
4
5
6
2
-9
... 
```

我的数组是这样的`Integer[] vector = {1,2,3,4,5,6,2,-9,...}`

我正在部署的代码（实际上是在点击回调方法中）：

```
public void plotSPLinfBaffle(View v) {
    List<Integer> vector = new ArrayList<Integer>();

    InputStream in = getResources().openRawResource(R.raw.test);
    Scanner sc = new Scanner(new InputStreamReader(in));

    while(sc.hasNext()){

        vector.add(Integer.parseInt(sc.nextLine()));
    }

    Log.d("clicked" , sc.nextLine());

    Integer[] splVector = vector.toArray(new Integer[0]);
} 
```

你看，我不断收到这个运行时错误和 logcat 消息：

```
02-21 14:04:35.599: D/AndroidRuntime(19925): Shutting down VM
02-21 14:04:35.599: W/dalvikvm(19925): threadid=1: thread exiting with uncaught exception (group=0x40018578)
02-21 14:04:35.619: E/AndroidRuntime(19925): FATAL EXCEPTION: main
02-21 14:04:35.619: E/AndroidRuntime(19925): java.lang.IllegalStateException: Could not execute method of the activity
02-21 14:04:35.619: E/AndroidRuntime(19925):    at android.view.View$1.onClick(View.java:2144)
02-21 14:04:35.619: E/AndroidRuntime(19925):    at android.view.View.performClick(View.java:2485)
02-21 14:04:35.619: E/AndroidRuntime(19925):    at android.view.View$PerformClick.run(View.java:9080)
02-21 14:04:35.619: E/AndroidRuntime(19925):    at android.os.Handler.handleCallback(Handler.java:587)
02-21 14:04:35.619: E/AndroidRuntime(19925):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-21 14:04:35.619: E/AndroidRuntime(19925):    at android.os.Looper.loop(Looper.java:130)
02-21 14:04:35.619: E/AndroidRuntime(19925):    at android.app.ActivityThread.main(ActivityThread.java:3687)
02-21 14:04:35.619: E/AndroidRuntime(19925):    at java.lang.reflect.Method.invokeNative(Native Method)
02-21 14:04:35.619: E/AndroidRuntime(19925):    at java.lang.reflect.Method.invoke(Method.java:507)
02-21 14:04:35.619: E/AndroidRuntime(19925):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
02-21 14:04:35.619: E/AndroidRuntime(19925):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
02-21 14:04:35.619: E/AndroidRuntime(19925):    at dalvik.system.NativeStart.main(Native Method)
02-21 14:04:35.619: E/AndroidRuntime(19925): Caused by: java.lang.reflect.InvocationTargetException
02-21 14:04:35.619: E/AndroidRuntime(19925):    at java.lang.reflect.Method.invokeNative(Native Method)
02-21 14:04:35.619: E/AndroidRuntime(19925):    at java.lang.reflect.Method.invoke(Method.java:507)
02-21 14:04:35.619: E/AndroidRuntime(19925):    at android.view.View$1.onClick(View.java:2139)
02-21 14:04:35.619: E/AndroidRuntime(19925):    ... 11 more
02-21 14:04:35.619: E/AndroidRuntime(19925): Caused by: java.util.NoSuchElementException
02-21 14:04:35.619: E/AndroidRuntime(19925):    at java.util.Scanner.nextLine(Scanner.java:1417)
02-21 14:04:35.619: E/AndroidRuntime(19925):    at com.soulmagnet.speakerparametrix2.PlotInfBaffle.plotSPLinfBaffle(PlotInfBaffle.java:136)
02-21 14:04:35.619: E/AndroidRuntime(19925):    ... 14 more 
```

尽管如此，当在调试模式下放置断点时：

> 22 vector.add(Integer.parseInt(sc.nextLine()));

我可以在每次迭代中看到向量变量，但是当它完成填充某些东西时会杀死我的活动......

我只是不明白出了什么问题，这就是我寻求帮助的原因！

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:19:39.017

仔细查看堆栈跟踪和`Scanner.nextLine()`方法的文档。

在此循环中，您正在吃掉输入文件中的所有行：

```
while (sc.hasNext()) {
    vector.add(Integer.parseInt(sc.nextLine()));
} 
```

但是，在这一行中：

```
Log.d("clicked" , sc.nextLine()); 
```

你调用`nextLine()`一个已经结束的输入。根据以下文件`Scanner.nextLine()`：

> 抛出：
> 
> NoSuchElementException - 如果没有找到行

此调用导致`Scanner`抛出`NoSuchElementException`。只需删除该`Log.d()`行 - 或记住循环中的最后一个元素，然后将其值记录到 LogCat（如果这是您的意图）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T12:16:17.647

在您的`while`-loop 之后，`sc`不再包含行（因此循环退出）。

后来你有

```
 Log.d("clicked" , sc.nextLine()); 
```

这试图抓住另一行（不再存在），导致错误：

```
E/AndroidRuntime(19925): Caused by: java.util.NoSuchElementException
E/AndroidRuntime(19925):    at java.util.Scanner.nextLine(Scanner.java:1417)
E/AndroidRuntime(19925):    at com.soulmagnet.speakerparametrix2.PlotInfBaffle.plotSPLinfBaffle(PlotInfBaffle.java:136) 
```

（这在完整的错误日志中有些隐藏）

因此，删除该行，它应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T12:19:21.533

您在日志中看到“点击”了吗？

如果可以的话，在打印此日志之前一切都很好。

日志中有趣的部分；

> 14:04:35.619: E/AndroidRuntime(19925): ... 11 更多 02-21 14:04:35.619: E/AndroidRuntime(19925):**由: java.util.NoSuchElementException 02-21 14:04:35.619 :** E/AndroidRuntime(19925): at **java.util.Scanner.nextLine** (Scanner.java:1417) 02-21 14:04:35.619: E/AndroidRuntime(19925): at com.soulmagnet.speakerparametrix2.PlotInfBaffle.plotSPLinfBaffle( PlotInfBaffle.java:136) 02-21 14:04:35.619: E/AndroidRuntime(19925): ... 14 更多

[Scanner](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)的文档 说当没有新行时将引发此异常。

这是你的问题

```
Log.d("clicked" , sc.nextLine()); 
```

# android - Android：如何在强制关闭应用程序之前显示祝酒词？

> ID：15001961
> 
> 赞同：0
> 
> 时间：2013-02-21T12:11:08.953
> 
> 标签：android

如果没有互联网连接，我必须展示祝酒词，然后强制关闭应用程序，但如果我只展示祝酒词，一切正常：

```
Toast.makeText(getApplicationContext(), "Nessuna connessione", Toast.LENGTH_LONG).show(); 
```

如果我这样做：

```
Toast.makeText(getApplicationContext(), "Nessuna connessione", Toast.LENGTH_LONG).show();
android.os.Process.killProcess(android.os.Process.myPid()); 
```

该应用程序已关闭，并且未显示吐司。

我怎样才能在关闭应用程序后显示这个吐司？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:13:02.873

而不是杀死进程，你可以调用`finish()`你`Activity`。这样你的吐司就会显示出来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T12:18:34.400

首先显示`Toast`：

```
Toast toast = Toast.makeText(getApplicationContext(), "Message here", Toast.LENGTH_SHORT);
toast.show(); 
```

然后调用完成：

```
finish(); 
```

# android - 如何通过WIFI与其他安卓设备共享屏幕？

> ID：15001962
> 
> 赞同：3
> 
> 时间：2013-02-21T12:11:08.937
> 
> 标签：android, wifi, screensharing

在我的 Android 应用程序中，一部 Mob Phone 将与连接到同一网络的其他 Mob Phone 共享桌面屏幕。那么如何通过WIFI从其他Mob手机查看一个Mob手机的所有文件呢？有没有用到的socket编程思路，请详细说明解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T14:26:55.667

使用安卓截图库（[http://code.google.com/p/android-screenshot-library/](http://code.google.com/p/android-screenshot-library/)）获取手机截图并发送给其他手机

# asp.net-mvc - Umbraco MVC Check is Partial 有内容

> ID：15001963
> 
> 赞同：1
> 
> 时间：2013-02-21T12:11:09.153
> 
> 标签：asp.net-mvc, razor, umbraco

我在 Umbraco 上有一个模板，我设置了一个局部视图来检查是否为页面选择了英雄单位。我想检查这个 Partial 是否正在向页面发送任何内容，如果不是，我想渲染 1 个 div，如果选择了一个英雄单位，我想要 2 个 div。

我的代码目前是；

```
var heroUnit = @Html.Partial("HeroUnits",@Model.Content);
    @if(heroUnit != null)
    {
        <div class="span6">
            @Html.Raw(Model.Content.GetPropertyValue<string>("bodyText"))
        </div>
        <div class="span3">
            @Html.Partial("HeroUnits",@Model.Content);
        </div>      
    } else {
        <div class="span9">
            @Html.Raw(Model.Content.GetPropertyValue<string>("bodyText"))
        </div>
    } 
```

这段代码似乎认为 HeroUnit 始终为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:28:25.267

另一种方法是使用jquery，你有一个包装器div，你将部分的内容放入其中，使用jquery在加载时检查div的内容是否为空，如果是则呈现其他2个div的else渲染一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T14:07:53.567

我不相信以这种方式使用部分。因为您似乎正在尝试从函数中获取标量值，所以我认为辅助函数是您最好的选择，并且可以在整个应用程序中全局使用。

在 App_code 中添加一个文件：HeroHelper.cshtml

然后创建你的函数：

```
@using Umbraco
@using Umbraco.Core
@using Umbraco.Web.Models;
@using Umbraco.Core.Media;
@using Umbraco.Core.Models;
@using Umbraco.Web;
@using Umbraco.Web.umbraco;
@functions {

   public static bool HasHero(IPublishedContentNode node) 
   {
       // this contains your logic, I'll make somethingup
        return node.HasValue("HereUnit");       
   }
} 
```

现在以下将起作用：`var heroUnit = HeroHelper.HasHero(Model.Content);`

您还可以为此创建一个 html 帮助程序，但这仅取决于您的用例。您将在部分中使用的这个辅助函数或一组函数也可以保持一致。

# c# - 选择要排列的数字

> ID：15001964
> 
> 赞同：0
> 
> 时间：2013-02-21T12:11:11.890
> 
> 标签：c#, arrays

我无法创建一个文本框，用户可以在其中输入要选择的数字。例如。`10-16,18,22-30`（就像您选择要打印的页面时一样）但是，我也有一些字母被扔进去，例如它可能是`11,11A,12,12A`.

我该如何做到这一点，以便当用户输入他们想要的数字时，它会被转移到一个数组中？

我不太擅长解释事情，如果你不明白，请见谅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:31:44.877

如果没有输入错误检查并假设带字母的数字无法定义范围，它可能看起来像

```
 String textInput = "11,11A,12,12A,13-16,18,22-30";
        String[] strArray = textInput.Split(',');
        List<String> pages = new List<String>();
        foreach (String s in strArray)
        {
            String[] range = s.Split('-');
            if (range.Length == 2)
            {
                int startPage = int.Parse(range[0]);
                int endPage = int.Parse(range[1]);
                for (int i = startPage; i<= endPage; i++)
                {
                    pages.Add(i.ToString());
                    pages.Add(i.ToString()+"A");
                }
            }
            else
            {
                pages.Add(s);
            }
        }

        String[] resultArray = pages.ToArray();

        Console.WriteLine("Input: " + textInput);
        foreach (String s in resultArray)
        {
            Console.WriteLine(s);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:39:09.537

您必须从字母表中删除数字部分。然后你可以使用这个 linq 查询：

```
var txtRange = "16,18,22-30";
var tokens = txtRange.Split(new[] { ',' }, StringSplitOptions.RemoveEmptyEntries)
.Select(t => new { 
    Token = t, 
    Range =  t.Split(new[] { '-' }, StringSplitOptions.RemoveEmptyEntries)
})
.Select(x => new{ x.Token, x.Range, 
    RangeStart = int.Parse(x.Range[0]),
    RangeEnd = x.Range.Length > 1 ? int.Parse(x.Range[1]) : int.Parse(x.Range[0])
});

int min = tokens.Min(x => x.RangeStart);
int max = tokens.Max(x => x.RangeEnd);

var list = new List<String>() { "11", "11A", "12", "12A", "13", "14", "15", "19" };

var result = list.Select(s => new
{
    Str = s,
    Num = int.Parse(new string(s.Where(Char.IsDigit).ToArray()))
})
.Where(x => x.Num >= min && x.Num <= max);

foreach(var x in result)
    Console.WriteLine("String: {0} Numeric-Part: {1}", x.Str, x.Num); 
```

它正在工作（尽管它似乎有点过于复杂）。

[**演示**](http://ideone.com/GSFCEG)

# jquery - 代替值 我有一个 jquery 脚本，它读取一个 xml 文件来替换 <select>值。该脚本有效，但我的问题是，当我单击 #carMake</select> 上的不同值时，脚本会将选项添加到 #carModel <select>而不是替换它们。Javascript: 函数 carMake(){ $.get('category1.xml', function(d){ $(d).find('category').each(function(){ va ID：15001965 赞同：0 时间：2013-02-21T12:11:16.490 标签：jquery, html, select 回答 #1 赞同：1 时间：2013-02-21T12:16:04.877 在回调开始时清空 select 的内容。 $.get('category1.xml', function(d){ // Empty the current contents $('#carMake').empty(); $(d).find('category').each(function(){ ... }); }); $.get('category2.xml', function(d){ // Empty the current contents $('#carModel').empty(); $(d).find('category').each(function(){ ... }); }); 回答 #2 赞同：1 时间：2013-02-21T12:19:40.933 It should work correctly. $.get('category1.xml', function(d){ $('#carMake').empty(); $(d).find('category').each(function(){ var $category = $(this); var categoryTitle = $category.attr("name"); var categoryID = $category.attr("id"); var html = '<option value="' + categoryID + '">' + categoryTitle + '</option>'; $('#carMake').append($(html)); $('#loading').fadeOut('slow', function() { $('#loading').hide(); }); });</select>

# css - 有没有办法从 CSS 中的任何图像创建复杂的多边形形状以用于区域属性？

> ID：15001974
> 
> 赞同：18
> 
> 时间：2013-02-21T12:11:45.600
> 
> 标签：css, polygon, regions

我正在尝试找到一种将任何黑色图像转换为多边形形状的方法。

我试图解决的问题包括两个步骤：

1.  将图像转换为多边形
2.  用文本填充多边形

我正在努力迈出第一步。因为我还没有找到任何“转换器”，所以我剩下的唯一想法是将图像转换为 SVG 格式（如果它还不是 SVG），然后获取矢量数据并将其粘贴到 CSS 中多边形形状（类似于 Raphaël.js）。

这是唯一的方法吗？

约束：

*   *我不想制作大量构成形状的 div。*
*   *我不想为这项任务使用 JavaScript。*
*   *如果形状很复杂，它必须是多边形。*

下面是我正在尝试做的示例（我只对复杂的多边形感兴趣）。

![](../Images/4b82072b0ea883d0a1899d0a5b8a4eb0.png)

![](../Images/161bdb9916158dc4a0d3f55709968e4b.png)

关于我应该使用的方法类型的任何提示？

***图片取自 Adob​​e： http: [//adobe.github.com/web-platform/samples/css-exclusions/](http://adobe.github.com/web-platform/samples/css-exclusions/)***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-18T13:30:16.970

您可以使用图像进行框屏蔽、[本文](https://developer.apple.com/library/safari/documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Masks/Masks.html)中的详细信息和此[链接](http://codepen.io/anon/pen/owtxp)中的示例（*仅限 webkit 示例*）

```
<style type="text/css">
.wrap {
  height:400px;
  width:800px;
  -webkit-mask-box-image:url('silhouette.png');
}
</style>
<div class="wrap">Large lipsum here...</div> 
```

结果 ：

![在此处输入图像描述](../Images/f2634737e55ef9d9e4bbffc0b7ce6972.png)

** 编辑 **

摩尔关闭前卫技术！

您需要在 chrome 或 chrome canary 部分访问[http://html.adobe.com/webplatform/enable/](http://html.adobe.com/webplatform/enable/)，您会发现一行内容：

> 要启用形状、区域和混合模式：
> 
> *   将 chrome://flags/#enable-experimental-web-platform-features 复制并粘贴到地址栏中，然后按 Enter。
> *   单击该部分中的“启用”链接。
> *   单击浏览器窗口底部的“立即重新启动”按钮。
> 
> 注意：可以在重新启动之前启用多个功能。

*这里是龙！*

如果你足够勇敢，激活实验功能，你将遭受来自图像的强大形状的所有可怕！哇 :)

在这里，您有一个示例笔，只有在您激活实验功能时才能使用 => [http://codepen.io/anon/pen/yhIbE](http://codepen.io/anon/pen/yhIbE)

如果一切顺利，您可能会在后面的段落中看到鸭子的剪影和鸭子，而且它们都没有被剪裁或剪裁，所有文字都被包裹起来；）

![在此处输入图像描述](../Images/1fcc07b935e034fc56bae2de046450e5.png)

这一切都是实验性的，但有一天你将能够在所有浏览器中做这样的事情，因为这篇文章中详述的每个方面都在 W3C 草案中。

*   [带有数据 uris 和图像的内部形状](http://dev.w3.org/csswg/css-shapes-2/#lturigt)
*   [形状 alpha 通道 treehold](http://dev.w3.org/csswg/css-shapes-2/#shape-image-threshold-property)

干杯!

*编辑 ：*

找到一篇关于这个主题的好文章：http: [//hansmuller-webkit.blogspot.com.es/2013/11/css-shapes-from-images.html](http://hansmuller-webkit.blogspot.com.es/2013/11/css-shapes-from-images.html)

# ajax - 如何在另一个 Ajax Combobox 的文本更改时禁用 Ajax Combobox？

> ID：15001977
> 
> 赞同：0
> 
> 时间：2013-02-21T12:12:03.637
> 
> 标签：ajax, c#-4.0, combobox, disabled-control

我通过回发来实现这一点，但这会在我的服务器上增加延迟，所以我想在客户端处理这个问题。谁能指导我如何在另一个组合框的客户端事件上禁用一个组合框。

到目前为止我已经做了：

```
function Enable() {
         alert("gfugsdugfsduigf");
         var ddl3 = document.getElementById("Cmbx1");
         var ddlValue3 = ddl3.options[ddl3.selectedIndex].value;
         if (ddlValue3 == "1") {
             document.getElementById('<%=Cmbx2.ClientID%>').disabled = false;
        }
        else {
            document.getElementById('<%=Cmbx2.ClientID%>').disabled = true;
        }

     } 
```

在我正在写的页面加载中：

```
Cmbx1.Attributes.Add("onChange", "Enable();"); 
```

但是没有成功，当我调试时，即使是控件也不去功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:23:13.497

像这样的东西也许......？

```
function pageLoad() // automatically called (and necessary to use when working with comboboxes)
{
        // add change event to cmbx1
        $find("<%=cmbx1.ClientID%>").add_propertyChanged(
                function (sender, e) {
                        if (e.get_propertyName() == 'selectedIndex') {
                                cmbx1_onChange();
                 }
        });
}

function cmbx1_onChange()
{
        // get selected value of box 1
        var cmbx1Value = $find("<%=cmbx1.ClientID%>").get_textBoxControl().value;

        // enable box 2 if selected value of box 1 is 1, else disable
        $find("<%=cmbx2.ClientID%>").get_textBoxControl().disabled = cmbx1Value != 1;
        $find("<%=cmbx2.ClientID%>").get_buttonControl() .disabled = cmbx1Value != 1;
} 
```

除了没有剥去所有的缩进

# javascript - 在网页中绘制 iimage

> ID：15001978
> 
> 赞同：0
> 
> 时间：2013-02-21T12:12:09.930
> 
> 标签：javascript, html, css

我有[这张图片](http://postimage.org/image/9jf45eqef/)，我想在网页中显示它，矩形作为下拉菜单

你有什么想法不使用css将图像放在背景中吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:16:55.897

您可以使用 HTML`map`和`area`标签在图像上声明预设区域：http: [//www.htmlquick.com/reference/tags/area.html](http://www.htmlquick.com/reference/tags/area.html)

然后可以将下拉菜单应用于该区域的点击事件。

```
<map>
    <area shape="rect" coords="0, 1, 2, 3" onclick="dropdownClickEvent">
</map> 
```

# c# - 来自线程的异常不会冒泡到主线程

> ID：15001979
> 
> 赞同：2
> 
> 时间：2013-02-21T12:12:10.967
> 
> 标签：c#, .net, multithreading, exception, exception-handling

在这里我开始一个任务：

```
System.Threading.Tasks.Task.Factory.StartNew( () =>
    RefreshCache(crmClientInfo)).ContinueWith(
        previous => RefreshCacheExceptionHandling(previous.Exception),
        TaskContinuationOptions.OnlyOnFaulted
    ); 
```

...这是我的工人：

```
public void RefreshCache(CrmClientInfo _crmClientInfo)
{
    AsyncManager.OutstandingOperations.Increment();

    Timer timer = new Timer(10000);
    timer.Elapsed += delegate
    {
        throw new AggregateException("Timeout!");
    };
    timer.Start();

    OtherServices.RefreshCache(crmClientInfo);
    AsyncManager.OutstandingOperations.Decrement();
} 
```

如果异常不在计时器定义中而是在其他地方发生，则异常会正确冒泡到`RefreshCacheExceptionHandling()`. 但是，如果它从计时器触发，`(AgregateException("Timeout!");)`则线程不会中断。**为什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:16:03.543

> System.Threading.Timer 类在 ThreadPool 线程上进行回调，根本不使用事件模型。

看看文档，这里：http: [//msdn.microsoft.com/en-us/library/zdzx8wx8.aspx](http://msdn.microsoft.com/en-us/library/zdzx8wx8.aspx)

# debugging - 在 MSVC 中调试内存覆盖

> ID：15001980
> 
> 赞同：0
> 
> 时间：2013-02-21T12:12:10.987
> 
> 标签：debugging, visual-c++, memory, breakpoints

我目前正在使用 MSVC 试图找出内存被覆盖的位置。我在 MSVC 中使用带有内存地址的数据断点。它在内存更改时停止，并且我看到十六进制值正在更改以及另一个窗口中的一些低级代码（弹出列表等）。

我的问题是如何让 MSVC 在内存更改时停止，而不是向我显示内存十六进制值以向我显示导致此问题的 C 代码行？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T14:08:14.690

没有直接的答案。当你的程序被挂起时，你可以看到你程序的每个线程的调用栈，并对其进行分析。要查看它，您将显示“线程”窗口： `Debug->Windows->Threads`. 您通过双击选择线程，然后查看窗口调用堆栈（`Debug->Windows->Call Stack`）分析该列表中最上面的函数。

# java - Java 语法 - 它有什么作用？

> ID：15001986
> 
> 赞同：4
> 
> 时间：2013-02-21T12:12:32.083
> 
> 标签：java, syntax

在查看我从另一个开发人员那里获得的代码时，我遇到了以下代码。

```
public void myMethod()
{
    final MyClass data1 = new MyClass(1,2,3);
    final MyClass data2 = new MyClass(4,5,6);
    // [...]
    final MyClass dataN = new MyClass(M,O,P);

    ArrayList<MyClass> list = new ArrayList<MyClass>()
    {
        {
            add(data1);
            add(data2);
            // [...]
            add(dataN);
        }
    };
} 
```

事实上，我想我知道这段代码的作用（填充`list`定义的数据），但我对结果是如何实现的感到惊讶。特别是我想知道在这种情况下花括号是什么`{}`意思。

我知道（认为？）这段代码很糟糕，我已经重写了它，但出于好奇，我想知道它到底做了什么。

我的猜测如下：

*   第一对`{}`是匿名对象创建 - 被强制转换为`ArrayList<MyClass>`.
*   第二对`{}`是 - 我正在考虑 - 类似于静态初始化但针对对象的东西。那可能是某种匿名构造函数吗？

有人可以在这里给我一些见解吗？（我在哪里可以在 java 文档中找到这样的“语法魔术”？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T12:15:35.007

By first paranthesis, you are creating an annonymous inner, sub class of super class ArrayList. The second parenthesis is for instance initialization for the instances of your annonymous inner class. Have a look on this [Doc](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html) for more details. There is a good explanation in this [blog](http://www.lkabimaran.blogspot.com/2010/11/instance-initializers-in-java.html) about instance initialization blocks

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T12:21:07.133

```
ArrayList<MyClass> list = new ArrayList<MyClass>{     //anonymous of subclass
  {     //non-static initializer block
      System.out.prinln("...");
  }
}; 
```

First of `{}` after `new ArrayList<MyClass>` which creates a new anonymous of subclass `ArrayList`, since `ArrayList` is not final class you can do it.

Second pair of `{}` is a non-static block or instance block inside the new sub class.

* * *

If you try `Integer int1 = new Integer(10){};` this will not work because an anonymous class cannot subclass the final class `Integer`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T12:15:05.967

如果缺少括号（或分号，但这将导致完全不同的结果），此代码将不起作用。

```
final MyClass data1 = new MyClass(1,2,3);
final MyClass data2 = new MyClass(4,5,6);
// [...]
final MyClass dataN = new MyClass(M,O,P);

ArrayList<MyClass> list = new ArrayList<MyClass>()//here
{
    {
        add(data1);
        add(data2);
        // [...]
        add(dataN);
    }
}; 
```

第一个 { 意味着您创建了一个扩展 ArrayList 的新类。下一个 { 表示匿名块，只是对您的代码进行分组。编辑：由于这是在函数之外，因此将在创建对象时调用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T12:22:26.393

This code creates an instance of an anonymous sub-class of ArrayList (the first pair of {}). This is relative question: [How are Anonymous (inner) classes used in Java?](https://stackoverflow.com/questions/355167/how-are-anonymous-inner-classes-used-in-java)

The nested block is an instance initialiser block (see [http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)). This means that when the instance is created, this code will be executed before the constructor (any constructor) is executed.

```
 {
        add(data1);
        add(data2);
        // [...]
        add(dataN);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T12:31:19.050

```
 {
        {
            add(data1);
            add(data2);
            // [...]
            add(dataN);
        }
 }; 
```

This is the instance block, so after creating the object of the ArrayList (list) , this piece of code will be executed. At each line the `add()` method will be invoked and the data will be inserted into the ArrayList
This is equivalent to say

```
ArrayList<MyClass> list = new ArrayList<MyClass>();
list.add(data1);
list.add(data2);
// [...]
list.add(dataN); 
```

As mentioned by others, [doc](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html) will explain the importance of instance block.
First the static instance block is called, then the instance block and finally the constructor. The static instance block is called only once, whereas instance block and constructors are invoked whenever a new object is created.

# php - PHP 日期格式精度

> ID：15001989
> 
> 赞同：3
> 
> 时间：2013-02-21T12:12:42.317
> 
> 标签：php, datetime

有谁知道是否已经有一种方法可以将日期格式化到一定的精度，而无需我写一些东西来重建给定的格式？

例如，假设我有任何格式的日期，但我想使用 PHP DateTimeFormat 将其转换为 Ymd H:i:s 格式（参见下面 PHP 站点的示例）

```
 $date = new DateTime('2000-01-01');
    echo $date->format('Y-m-d H:i:s');
    Result: 2000-01-01 00:00:00 
```

如果它从未包含在原始日期中，我真正想要它做的是不返回结果中的 H:i:s 部分。

目前我能想到的唯一方法是使用**date_parse_from_format**，找出缺少的内容，然后对日期格式 'Ymd H:i:s' 进行某种字符串处理以省略我不需要的部分（混乱的字符串格式，因为这种日期格式可以是任何东西）。

如果我已经错过了一个功能，我只是不想重新发明轮子。

塔乔

编辑：为了更清楚，日期格式字符串和 $date 的精度是可变的，所以我不能对格式字符串进行硬编码，在我得到它之前我不会知道 $date 的精度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T12:16:53.317

preg_match 是您正在寻找的，特别是：

```
if(preg_match('/\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}/',$date)){
   //here do the conversion for "Y-m-d H:i:s"
}else{
   //here do the conversion for "Y-m-d"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:18:38.243

I think you have to know what format is your DATE.

```
<?php
echo 'Current time: ' . date('Y-m-d H:i:s') . "\n";

$format = 'Y-m-d';
$date = DateTime::createFromFormat($format, '2009-02-15');
echo "Format: $format; " . $date->format('Y-m-d H:i:s') . "\n";

$format = 'Y-m-d H:i:s';
$date = DateTime::createFromFormat($format, '2009-02-15 15:16:17');
echo "Format: $format; " . $date->format('Y-m-d H:i:s') . "\n";

$format = 'Y-m-!d H:i:s';
$date = DateTime::createFromFormat($format, '2009-02-15 15:16:17');
echo "Format: $format; " . $date->format('Y-m-d H:i:s') . "\n";

$format = '!d';
$date = DateTime::createFromFormat($format, '15');
echo "Format: $format; " . $date->format('Y-m-d H:i:s') . "\n";
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T13:12:12.687

我不认为这是最有效的方法，但它似乎有效。并且可以对其进行调整以允许不同级别的精度。（我选择了`Y-m-d H:i:s`、`Y-m-d H:i`和`Y-m-d`。我认为`Y-m-d H`这不会有帮助，但也许您可能会喜欢`Y-m-d ha`。如果是这样，添加它就很容易了。）

```
<?php
// Output dates at arbitrary precision.
header ('Content-Type: text/plain');

$input = isset($_GET['date']) ? $_GET['date'] : date('Y-m-d');
$date  = new DateTime($input);
echo format_date($date);

function format_date($date) {
    switch ($date->format('s')) {
    case '00':
        switch ($date->format('H')) {
        case '00':
            return $date->format('Y-m-d');
        default:
            return $date->format('Y-m-d H:i');
        }
    default:
        return $date->format('Y-m-d H:i:s');
    }
} 
```

当然，这并不允许这个人实际上想要一个恰好是午夜的时间，并且明确地这么说。我不知道你报道那个案子有多重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-21T12:44:35.207

使用 strtotime 几乎可以将任何日期格式转换为时间戳。从那里，您可以使用 date() 来设置您想要的格式。

欲了解更多信息：

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

[http://www.php.net/manual/en/function.date.php](http://www.php.net/manual/en/function.date.php)

编辑： date_parse 也可能完成你想要的：

[http://www.php.net/manual/en/function.date-parse.php](http://www.php.net/manual/en/function.date-parse.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-26T12:41:29.520

将时间和日期保存为 unix 时间戳而不是其他格式的最佳方法。

我创建了一个类来处理 php 中的日期和时间。它易于使用且非常有用

在您的情况下，您可以使用提供的设置器设置年、月、日、小时、分钟和秒，而不是扩展公共函数以获取日期和时间作为您的预期格式。

```
<?php
define("NEW_LINE", "</BR>");
class scTimestamp
{
    private $timestamp;
    private $year;
    private $month;
    private $day;
    private $hour;
    private $minute;
    private $second;

    public function __construct() 
    {
        register_shutdown_function(array($this,'__destruct'));
        $this->setTimestamp($_SERVER['REQUEST_TIME']);
    }
    public function __destruct()
    {
        unset($this->timestamp);
        unset($this->year);
        unset($this->month);
        unset($this->day);
        unset($this->hour);
        unset($this->minute);
        unset($this->second);
    }
    private function rebuildTimestampFromDate()
    {
        $this->timestamp=mktime($this->hour,$this->minute,$this->second,$this->month,$this->day,$this->year);
    }
    private function rebuildDateFromTimestamp()
    {
        $this->day=date('j',$this->timestamp);
        $this->month=date('n',$this->timestamp);
        $this->year=date('Y',$this->timestamp);
        $this->hour=date('g',$this->timestamp);
        $this->minute=date('G',$this->timestamp);
        $this->second=date('s',$this->timestamp);       
    }
    public function setTimestamp($tempTimestamp)
    {
        $this->timestamp=$tempTimestamp;     
        $this->rebuildDateFromTimestamp();
    }
    public function getTimestamp()
    {
        return $this->timestamp;    
    }
    public function setYear($tempYear)
    {
        $this->year = $tempYear;
        $this->rebuildTimestampFromDate();
    }
    public function getYear()
    {
        return $this->year;
    }
    public function setMonth($tempMonth)
    {
        $this->month = $tempMonth;
        $this->rebuildTimestampFromDate();
    }
    public function getMonth()
    {
        return $this->month;
    }
    public function setDay($tempDay)
    {
        $this->day=$tempDay;
        $this->rebuildTimestampFromDate();
    }
    public function getDay()
    {
        return $this->day;
    }
    public function setHour($tempHour)
    {
        $this->hour = $tempHour;
        $this->rebuildTimestampFromDate();
    }
    public function getHour()
    {
        return $this->hour;
    }
    public function setMinute($tempMinute)
    {
        $this->minute = $tempMinute;
        $this->rebuildTimestampFromDate();
    }
    public function getMinute()
    {
        return $this->minute;
    }
    public function setSecond($tempSecond)
    {
        $this->second = $tempSecond;
        $this->rebuildTimestampFromDate();
    }
    public function getSecond()
    {
        return $this->second;
    }

    public function getDateDifferenceFromNow()
    {
        return $this->getDateDifferenceFrom($_SERVER['REQUEST_TIME']);
    }
    public function getDateDifferenceFrom($fromDate)
    {
        $return="";
        $sec=" Second";
        $min=" Minute";
        $hrs=" Hour";
        $before=" Before";
        $difference=$fromDate-$this->getTimestamp();
        if($difference<0)
            $return.="In the Future";
        else if($difference<60)
        {
            if($difference>1)
                $sec.="s";
            $return.= $difference.$sec.$before;
        }
        else if($difference<3600)
        {
            $difference=intval($difference/60);
            if($difference>1)
                $min.="s";
            $return.=$difference.$min.$before;
        }
        else if($difference<86400)
        {
            $difference=intval($difference/3600);
            if($difference>1)
                $hrs.="s";
            $return= $difference.$hrs.$before;
        }
        else if($difference<604800)
        {
            $return.= date("l g:i a",$this->getTimestamp());
        }
        else if($difference<28512000)
        {
            $return.= date("F j",$this->getTimestamp());
        }
        else
        {
            $return.= date("F j, Y, g:i a",$this->getTimestamp());
        }
        return $return;
    }
    public function getDateAsString()
    {
        return date("F j, Y",$this->getTimestamp());
    }
    public function getDateTimeAsString()
    {
        return date("F j, Y, g:i a",$this->getTimestamp());
    }

    public function __toString()
    {
        $return = NEW_LINE."^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^";
        $return.= NEW_LINE." ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^".NEW_LINE;
        $return.= NEW_LINE."@@ Timestamp: ".$this->getTimestamp()." @@".NEW_LINE;
        $return.= NEW_LINE."@@ Date: ".$this->getDateTimeAsString()." @@".NEW_LINE;
        $return.= NEW_LINE." ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^".NEW_LINE;
        return $return;
    }

}
?> 
```

一旦包含它，它就可以按如下方式使用

```
include_once("scTimestamp.php");
$test=new scTimestamp();

echo $test->getDateAsString();

$test->setTimestamp(1210203200);

echo $test->getDateDifferenceFromNow();

echo $test;

$test->setTimestamp(121020320022);
echo $test->getYear();

echo $test; 
```

结果会是这样。

2015 年 6 月 26 日 2008 年 5 月 7 日晚上 11:33 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^ @@ 时间戳：1210203200 @@ @@ 日期：2008 年 5 月 7 日晚上 11:33 @@ ^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 5804 ^^ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^@@时间戳：121020320022@@@@日期: 5804 年 12 月 25 日凌晨 3:33 @@ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

这个类可以根据需要使用

# c - 在 C 中按顺序打开超过 4092 个文件

> ID：15001991
> 
> 赞同：0
> 
> 时间：2013-02-21T12:12:54.057
> 
> 标签：c, file, pointers, memory-management

我正在编写一个程序来读取约 30,000 个文件中的单词，但在第 4092 次迭代后我无法再读取新文件。我什至尝试在循环结束时包含一个 free(filePointer)，但在尝试打开第 4092 个文件后我的文件指针仍然为 NULL。任何想法或建议将不胜感激。

```
int main(int argc, char *argv[]) {

  hashTable *bigramHT = create_table(100000000);
  hashTable *tokenHT = create_table(100000000);
  int numTokens = 0;
  /* file pointer */
  FILE *fp = NULL;
  /* directory pointer */
  DIR *dirp = NULL;
  /* pointer to directory struct */
  struct dirent *entry = NULL;

  /* check if directory exists and can be opened */
  if((dirp = opendir(argv[1])) == NULL){
    return 1;
  }

  /* allocate memory for the filename paths (using maximum possible length) */
  char *path;
  path = (char*)malloc((get_longest_filename(dirp) + strlen(argv[1])) * sizeof(char));
  if(path == NULL){
    return 1;
  }

  /* create buffers for 'window' to read in word pairs and initialize to \0 */
  char buffer1[1024];
  char buffer2[1024];
  char wordPair[sizeof(buffer1) + sizeof(buffer2) + 1];
  memset(wordPair, '\0', sizeof(wordPair));
  memset(buffer1, '\0', sizeof(buffer1));
  memset(buffer2, '\0', sizeof(buffer2));

  int iterations = 0;
  rewinddir(dirp); //make sure directory is at start position
  /* loop through directory */
  while((entry = readdir(dirp)) != NULL){  
     /* make sure filename is not a directory itself */
    if(is_dir(entry->d_name) == NULL){
      iterations++;
      /* attempt to open file */
      if((fp = fopen(strcat(strcat(strcat(path, argv[1]),"/"), entry->d_name), "r")) == NULL){
    printf("file not found: %s after %d iterations\n", entry->d_name, iterations);
    break;
    //return 1;
      }
      //printf("file: %s\n", entry->d_name);
      while((fgets(buffer1, sizeof(buffer1), fp)) != NULL){
    numTokens++;
    //puts(remove_newline(buffer1));

    if(insert(tokenHT, remove_newline(buffer1)) != 0){
      return 1;
    }

    if(buffer2[0] != '\0'){
      /* merge words into one string */
      strcat(strcat(strcpy(wordPair, remove_newline(buffer2)), " "), remove_newline(buffer1));
      //printf("%s\n", wordPair);
      /* insert new string into hash table */

      if(insert(bigramHT, wordPair) != 0){
        return 1;
      }

    }
    /* shift window */
    strcpy(buffer2, buffer1);
      }
      strcpy(path, "");
      memset(buffer2, '\0', sizeof(buffer2));
    }
  }

   printf("Total number of tokens = %d\n", numTokens);
  //print(tokenHT);
  //print(bigramHT);
  delete_table(bigramHT);
  delete_table(tokenHT);
  closedir(dirp);
  free(path);;

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T12:14:16.943

你没有`fclose(fp);`，所以你的文件句柄用完了。

# html - 如何制作具有高度限制的div？

> ID：15001998
> 
> 赞同：2
> 
> 时间：2013-02-21T12:13:24.563
> 
> 标签：html, height

对不起，如果我的英语有错误））。我的问题是如何制作具有高度限制的 div？我的意思是，我的 div 有一些 ul 块，例如：

```
<div>
 <ul>
  <li>First text</li>
 </ul>
</div> 
```

我的 DIV 的高度为 280 像素。当我尝试添加越来越多时`<li>smth...</li>`- 它越来越低，毕竟我的文本低于我的 div 的高度限制。

不要提出浮动：左，这意味着我所有的文本都将添加到水平线中，但我想达到垂直高度限制。像报纸一样的东西，你知道的。

逻辑：我的文字必须在我的高度限制之前越​​来越低，在那之后，我的文字必须自己分裂，并继续在新的垂直线上向下移动到同一个 div 元素中。

不明白我在说什么的人的图像：

![图片](../Images/b4f87a453b96c3aa6766267da1a89149.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:16:29.430

我不确定是否可以在此脚本中合并宽度，但它将允许从列到列的流动。我还注意到这似乎在 IE 中不起作用。

```
<head>
<style> 
.columnFlow
{
-moz-column-count:3; /* Firefox */
-webkit-column-count:3; /* Safari and Chrome */
column-count:3;

-moz-column-gap:40px; /* Firefox */
-webkit-column-gap:40px; /* Safari and Chrome */
column-gap:40px;

-moz-column-rule:2px outset #ff00ff; /* Firefox */
-webkit-column-rule:4px outset #ff00ff; /* Safari and Chrome */
column-rule:4px outset #ff00ff;
}
</style>
</head>
<body>

<div class="columnFlow">
This text will flow within 3 different columns. The only think that I am unsure about is how to get this to work within IE. Also I am not sure how to specifically set the width. It appears as though it even spreads the provided text evenly within the amount of columns that the developer chooses. I hope this helps.
</div>

</body> 
```

W3C 站点上还有一些其他版本。我希望这有帮助！[http://www.w3schools.com/css3/css3_multiple_columns.asp](http://www.w3schools.com/css3/css3_multiple_columns.asp)