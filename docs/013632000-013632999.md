# StackOverflow 问答 13632000-13632999

# linux - 如何在bash函数中将数字显示到小数点后两位

> ID：13632001
> 
> 赞同：12
> 
> 时间：2012-11-29T18:09:52.577
> 
> 标签：linux, bash

我应该如何取一个以百分之几为单位的数字并以秒为单位显示到小数点后两位？遵循 dTime 函数的伪代码我不确定，但你会得到我的目标。

```
function time {
    echo "$(date +%N)/10000000"
}

function dTime {
    echo "($1/100).(${$1:${#1}-3:${#1}-1})"
}

T=$time
sleep 2
T=$dTime T 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-29T18:14:31.470

Bash 有一个内置的 printf 函数：

```
printf "%0.2f\n" $T 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T18:25:34.553

下面将 by 的输出`date +%N`除以`1000000000`，将结果四舍五入到小数点后两位，并将结果赋给变量`T`。

```
printf -v T "%.2f" $(bc -l <<< "$(date +%N)/1000000000") 
```

如果你只是想打印这些东西，

```
bc <<< "scale=2; $(date +%N)/1000000000" 
```

如果您不喜欢`bc`并且想要使用`dc`（因为它是反向抛光，所以使用起来更轻且更有趣），

```
dc <<< "2 k $(date +%N) 1000000000 / p" 
```

注意区别， with`printf`你会有领先`0`，而不是`bc`and `dc`。`printf`和`bc`（或`dc`）之间还有另一个区别：`printf`将最接近的数字四舍五入到小数点后两位，而`bc`（或`dc`）四舍五入到小数点后两位。如果您想要后一种行为并将结果分配给变量`T`，您可以使用，例如，

```
T=$(dc <<< "2 k $(date +%N) 1000000000 / p") 
```

或者，如果您还想要领先`0`：

```
T=0.$(dc <<< "2 k $(date +%N) 1000000000 / p") 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-05-20T10:27:10.763

下面可以完成 2 位小数精度，

```
echo $T | bc -l | xargs printf "%.2f" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-06T03:02:15.940

"bc" 和 "dc" 都是截断而不是舍入，所以现在我更喜欢 Perl

如果“N”中有你的百分之几秒，那么：

```
$ perl -e "printf('%.2f', $N/100)" 
```

我从来都不是 Perl 的支持者，但它现在无处不在，我终于习惯于使用它而不是 sed/awk 等。

# c# - C# 中的什么类型对应于 DB2 中的关联数组？

> ID：13632002
> 
> 赞同：0
> 
> 时间：2012-11-29T18:09:55.100
> 
> 标签：c#, stored-procedures, db2, parameter-passing, associative-array

我需要将关联数组参数传递给 DB2 存储过程。关联数组是：key是整数，value是varchar。我试图通过 Dictionary< int, string >，但得到了无效的演员表。

# arrays - 2d 网格 - 可到达目的地的总和

> ID：13632006
> 
> 赞同：0
> 
> 时间：2012-11-29T18:10:02.963
> 
> 标签：arrays, algorithm, multidimensional-array, grid, path-finding

假设我有一个二维网格，一个起点 S 和一个最大步行距离 W。我想总结所有可达距离，不包括从 S 开始的重叠距离和步行 WIe，想象下面的网格

> ****__ *_* __ *_* __ *_* __ *_* __ *_***
> |X|X|X|X|X|X|X|X|X|X|X|
> ***_* __ *_* __ *_* __ *_* __ *_* __ *_***
> |X|X|X|X|X|X|X|X|X|X|X|
> ***_* __ *_* __ *_* __ *_* __ *_* __ *_***
> |X|X|X|X|X| **S** |X|X|X|X|X|
> ***_* __ *_* __ *_* __ *_* __ *_* __ *_***
> |X|X|X|X|X|X|X|X|X|X|X|
> ***_* __ *_*_ *_* __ *_* __ *_* ____****

 **我只能用线走路的地方。还有两个额外的细节。一，当您从 S 上方的道路开始时，您可以从该街区的中间开始（不一定在两端）。第二个是过马路在最大距离方面也有成本。欢迎提出想法或建议。

我没有成功地尝试在 Vba 和 R 中做到这一点。

提前致谢。**

# perl - 在文本匹配之前插入新的文本行

> ID：13632013
> 
> 赞同：3
> 
> 时间：2012-11-29T18:10:13.340
> 
> 标签：perl, parsing, file-io, insertion

在文本文件中，我想使用 perl 在另一行文本的每次匹配之前插入一行新文本。

示例 - 我的文件是：

```
holiday
april
icecream: sunday
jujubee
carefree
icecream: sunday
Christmas
icecream: sunday
towel

... 
```

我想`'icecream: saturday'`在 '`icecream: sunday'`行之前插入一行文本。所以之后，文本文件看起来像。`:`是的，我在搜索和替换模式中都需要冒号。

```
holiday
april
icecream: saturday
icecream: sunday
jujubee
carefree
icecream: saturday
icecream: sunday
Christmas
icecream: saturday
icecream: sunday
towel
... 
```

我想在 Windows PC 上使用 perl 5.14 来做到这一点。我已经安装了 Perl。我已经在这个网站上搜索并尝试了许多其他示例，但它们对我不起作用，不幸的是我不是 Perl 的完整专家。

如果也有使用 sed 的示例，我也有 Cygwin sed。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T10:50:10.940

This is a command-line version.

```
perl -i.bak -pe '$_ = qq[icecream: saturday\n$_] if $_ eq qq[icecream: sunday\n]' yourfile.txt 
```

***Explanation of command line options:***

**-i.bak** : Act on the input file, creating a backup version with the extension .bak

**-p** : Loop through each line of the input file putting the line into $_ and print $_ after each iteration

**-e** : Execute this code for each line in the input file

Perl's command line options are documented in [perlrun](http://perldoc.perl.org/perlrun.html).

***Explanation of code:***

If the line of data (in $_) is "icecream: sunday\n", then prepend "icecream: saturday\n" to the line.

Then just print $_ (which is done implicitly with the -p flag).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:42:35.137

```
open FILE, "<icecream.txt" or die $!;
my @lines = <FILE>;
close FILE or die $!;

my $idx = 0;
do {
    if($lines[$idx] =~ /icecream: sunday/) {
        splice @lines, $idx, 0, "icecream: saturday\n";
        $idx++;
    }
    $idx++;
} until($idx >= @lines);

open FILE, ">icecream.txt" or die $!;
print FILE join("",@lines);
close FILE; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T18:50:16.490

这是使用[File::Slurp](http://search.cpan.org/~uri/File-Slurp-9999.19/lib/File/Slurp.pm)模块的选项：

```
use strict;
use warnings;
use File::Slurp qw/:edit/;

edit_file sub { s/(icecream: sunday)/icecream: saturday\n$1/g }, 'data.txt'; 
```

还有一个不使用该模块的选项：

```
use strict;
use warnings;

open my $fhIn,  '<', 'data.txt'          or die $!;
open my $fhOut, '>', 'data_modified.txt' or die $!;

while (<$fhIn>) {
    print $fhOut "icecream: saturday\n" if /icecream: sunday/;
    print $fhOut $_;
}

close $fhOut;
close $fhIn; 
```

# oracle-apex - APEX - 带有 .CSV 附件的电子邮件

> ID：13632015
> 
> 赞同：0
> 
> 时间：2012-11-29T18:10:14.617
> 
> 标签：oracle-apex

APEX 版本：4.1.1

```
Example: 
```

[http://apex.oracle.com/pls/apex/f?p=27554:53](http://apex.oracle.com/pls/apex/f?p=27554:53)

```
User name: demo
PW: demo 
```

我正在使用以下博客 ( [http://spendolini.blogspot.com/2006/04/custom-export-to-csv.html](http://spendolini.blogspot.com/2006/04/custom-export-to-csv.html) ) 创建一个 .CSV 文件，但是如何将该 .CSV 文件添加为附件到在 APEX 中创建/生成的电子邮件？我想要一个创建 .CSV 文件的页面进程，将该 .CSV 文件添加到 APEX 生成的电子邮件中，并在单击 APEX 页面上的按钮时发送该电子邮件。

我还使用以下[Oracle 文档](http://docs.oracle.com/cd/E23903_01/doc/doc.41/e21676/apex_mail.htm#CHDHCEGF)作为指导。

单击“应用更新”按钮时的当前页面处理代码：（当代码运行时，会创建 .CSV 文件并发送电子邮件，但电子邮件不包含 .CSV 文件作为附件）

```
declare
  l_body_html varchar2(4000);
  l_subj varchar2(200);
  l_from varchar2(200);
  l_cc_address varchar2(2000);
  l_cc varchar2(500);
  l_id NUMBER;

begin

         l_subj := '***TEST - DQ MANUAL EDIT - Daily Field Report - ***TEST';

l_body_html := '<html>
<head>
<style type="text/css">
body{font-family: Calibri, Arial, Helvetica, sans-serif;
font-size:11pt;
margin:30px;
color:#1F497D;
background-color:#ffffff;}

</style>
</head>
<body>';

       l_body_html := l_body_html || '<body><div><p><span style="font-size:12.0pt;font-family:Calibri,sans-serif;color:#1F497D;font-weight:bold;">Attached is the manual edit report for today.</b>';

    l_body_html := l_body_html;

   l_body_html := l_body_html;

   l_body_html := l_body_html || '<p>' || ' will contact you in the near future to prioritize the request and discuss an estimated completion date. Please note that many requests are received daily and it can take several days to couple of weeks on some requests.  If this request is of a high critical nature, please feel free to contact directly or reply to this email.</p>';

 l_body_html := l_body_html || '</div></body></html>';

begin
-- Set the MIME type
owa_util.mime_header( 'application/octet', FALSE );
-- Set the name of the file
htp.p('Content-Disposition: attachment; filename="Manual_Edit_Selected_Records.csv"');
-- Close the HTTP Header
owa_util.http_header_close;
-- Loop through all rows in EMP
htp.prn('Data Fields,Grouping,Channel,Month,Year,Edits' || chr(13));
for x in (select 
dq_attribute,
dq_grouping, 
case 
when DQ_CHANNEL = 'Retail' then 'Retail/CD'
when DQ_CHANNEL = 'Consumer Direct' then 'Retail/CD'
else DQ_CHANNEL 
end as dq_channel,
to_char(to_date(INSERT_DATE,'yyyy-mm'),'Month') as Month,
to_char(to_date(INSERT_DATE,'yyyy-mm'),'YYYY') as Year,
case when count(reason_for_change)=0 then 'N/A' else to_char(count(reason_for_change)) end  as Edits
from DQ_MANUAL_EDIT
where
decode(NVL(:P50_DQ_ANALYST, 'ALL'), 'ALL','ALL',DQ_ANALYST) = NVL(:P50_DQ_ANALYST, 'ALL')
and decode(NVL(:P50_DQ_FIELD, 'ALL'), 'ALL','ALL',DQ_ATTRIBUTE) = NVL(:P50_DQ_FIELD, 'ALL')
and decode(NVL(:P50_DQ_CHANNEL, 'ALL'), 'ALL','ALL',DQ_CHANNEL) = NVL(:P50_DQ_CHANNEL, 'ALL')
and decode(NVL(:P50_DQ_GROUPING, 'ALL'), 'ALL','ALL',DQ_GROUPING) = NVL(:P50_DQ_GROUPING, 'ALL')
and decode(NVL(:P50_DQ_IMS, 'ALL'), 'ALL','ALL',DQ_IMS_NUM) = NVL(:P50_DQ_IMS, 'ALL')
and NVL(to_char(to_date(:P50_EDIT_DATE_FROM,'MM/DD/YYYY'),'MM/DD/YYYY'), to_date(sysdate,'MM/DD/YYYY')) <= trunc(INSERT_DATE)
and NVL(to_char(to_date(:P50_EDIT_DATE_TO, 'MM/DD/YYYY'),'MM/DD/YYYY'), to_date(sysdate-28,'MM/DD/YYYY')) >= trunc(INSERT_DATE)
Group by 
dq_attribute, 
INSERT_DATE,
dq_grouping, 
dq_channel
order by to_char(to_date(INSERT_DATE,'yyyy-mm'),'YYYY') desc,
to_char(to_date(INSERT_DATE,'yyyy-mm'),'mm'), dq_attribute asc
)
loop
 -- Print out a portion of a row,
 -- separated by commas and ended by a CR
 htp.prn(
'"' ||x.dq_attribute||'","'|| 
x.dq_grouping ||'","'||  
x.dq_channel ||'","'||  
x.Month ||'","'||
x.Year ||'","'||  
x.Edits || '"' || chr(13));
end loop;
-- Send an error code so that the
-- rest of the HTML does not render
htmldb_application.g_unrecoverable_error := true;
end;

  l_id := APEX_MAIL.SEND(
    --P_TO        => :P53_EMAIL_TO,
    P_TO        => 'first_name.last_name@company.com',
    P_FROM      => 'IT.DEPT@company.com',
    P_BODY      => l_body_html,
    P_BODY_HTML => l_body_html,
    P_SUBJ      => l_subj);

      FOR c1 IN (SELECT filename, blob_content, mime_type 
        FROM APEX_APPLICATION_FILES
        WHERE ID IN (123,456)) LOOP

        APEX_MAIL.ADD_ATTACHMENT(
            p_mail_id    => l_id,
            p_attachment => c1.blob_content,
            p_filename   => c1.filename,
            p_mime_type  => c1.mime_type);
        END LOOP;
    COMMIT;

    wwv_flow_mail.push_queue(
   P_SMTP_HOSTNAME => 'mailhost.company.net',
   P_SMTP_PORTNO => '31'
   );
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T01:20:42.280

在 Oracle 论坛上找到了与此主题相关的有用讨论，这将有助于回答您的问题：[https ://forums.oracle.com/forums/thread.jspa?threadID=989396](https://forums.oracle.com/forums/thread.jspa?threadID=989396)

讨论的是电子邮件的附件不是与电子邮件本身分开的物理文件，当您首先创建物理文件然后起草电子邮件以发送它时，这可能是您的问题。当我们使用网络邮件客户端或电子邮件软件应用程序发送电子邮件时，它不会像我们看到的那样起作用。请参阅 Bill Verreyne 对`utl_mail`包如何工作的说明，该说明显示了如何通过修改电子邮件的 MIME-BODY 来添加附件。

简而言之，这个概念是将您的数据放在电子邮件本身的正文中，但要确定应该由适当的 mime 标头视为“附件”的部分。`UTL_MAIL`看起来是最简单的管理方法，尽管您可能需要耐心和反复试验来手工制作一些简单的标头，或者对`APEX_MAIL`包进行进一步试验。

我复制了最重要的部分，这是带有“附件”的示例电子邮件正文的样子……请注意，电子邮件中根本没有物理文件。它从头到尾读起来就像一封电子邮件：

```
From: noreply@oracle-server.domain
To: scott@tiger.com
Subject: =?ISO-8859-1?Q?Sample=20Mail=20from=20UTL=5FMAIL?=
X-Priority: 3
Content-Type: multipart/mixed; boundary="------------4D8C24=_23F7E4A13B2357B3"
Return-Path: noreply@oracle-server.domain
Date: 19 Nov 2009 07:45:15 +0200
Mime-Version: 1.0

This is a multi-part message in MIME format.
--------------4D8C24=_23F7E4A13B2357B3
Content-Type: text/plain
Content-Transfer-Encoding: 7bit

This is the e-mail message part that the mail reader will display.

--------------4D8C24=_23F7E4A13B2357B3
Content-Type: text/csv; name="sample.csv"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline; filename="sample.csv"

col1,col2,col3
col1,col2,col3
col1,col2,col3
--------------4D8C24=_23F7E4A13B2357B3-- 
```

# javascript - 文本区域和对象

> ID：13632018
> 
> 赞同：0
> 
> 时间：2012-11-29T18:10:20.387
> 
> 标签：javascript, jquery, html, asp.net-mvc

是否可以在 TextArea 内显示列表？

```
"NewList":[{"FirstName":"X","LastName":"Y","Address1":"A1","Address2":"A2","City":"C","State":"S","ZipPostalCode":"12345"}, {"FirstName":"X2","LastName":"Y2","Address1":"A2","Address2":"A3","City":"C2","State":"S2","ZipPostalCode":"12345"}] 
```

据我了解， textarea 仅用于显示文本而不是 HTML，因此`<li>`无法正常工作。

基本上，我的要求是在网页上显示上述列表并允许用户编辑然后保存它。有人可以建议如何做到这一点吗？另外，form.SerializeObject 将如何与我们使用的控件一起工作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:42:21.613

我建议您浏览每个元素并为每个属性添加一个`<label>`和一个`<input>`。

一个编码示例：

```
response = [{"FirstName":"X","LastName":"Y","Address1":"A1","Address2":"A2","City":"C","State":"S","ZipPostalCode":"12345"}, {"FirstName":"X2","LastName":"Y2","Address1":"A2","Address2":"A3","City":"C2","State":"S2","ZipPostalCode":"12345"}];
form = document.getElementById('formId');
// Iterate through array items
for(var i=0; i<response.length; i++){
  // Iterate through item attributes
  var item = response[i];
  for(var prop in item){
    // create dom objects
    var label = document.createElement('label');
    var input = document.createElement('input');

    // set dom objects attrs
    input.setAttribute('type', 'text');
    input.setAttribute('name', 'field['+i+']['+prop']');
    label.setAttribute('for', 'field['+i+']['+prop']');

    // append items to form
    form.appendChild(label);
    form.appendChild(input);
  }
} 
```

关于序列化表单，你在使用[这个 jQuery 插件](http://danheberden.com/jquery-plugin-serializeobject-2011-04-01/)吗？我是这样的，您可能需要对输入名称进行一些操作才能获得有用的结果。

希望这可以帮助 ：）

# c++ - 在文件中的任意位置插入动态大小对象

> ID：13632025
> 
> 赞同：1
> 
> 时间：2012-11-29T18:10:40.093
> 
> 标签：c++, file-io

我有一个具有以下结构的二进制文件：

+---------+--------+------+----+-------+
| 页眉 | 对象1 | 对象2 | ... | 索引 |
+---------+--------+------+----+-------+

这`Index`是一个可变大小的向量，取决于对象的数量，并存储每个对象的文件位置。例如

```
vector<size_t> index;

index.push_back(ofs.tellp());
write(reinterpret_cast<char *> obj, sizeof(obj)); 
```

文件也很大（1Gb+）。

我想把索引放在标题之后，这样阅读起来会更快。我可以这样做而不必复制和写入所有对象两次吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:34:14.230

当你写文件时计算你有多少个对象。

```
nObjects // Number of objects 
```

然后你需要

```
indexSize = nObjects * sizeof(size_t); 
```

开始写你的对象

```
ofs.seekp(indexSize + headerSize) 
```

写下你所有的对象

```
index.push_back(ofs.tellp());
write(reinterpret_cast<char *> obj, sizeof(obj)); 
```

移动到索引的开头 ofs.seekp(headerSize);

写下你的索引

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:08:52.823

你有两个解决方案：

*   为索引使用单独的文件
*   继续基于块的设计

第一个比较明显，所以我只概述第二个：这里的问题是您的索引大小取决于您流式传输的对象数量。不必如此。

一个解决方案是跳过一定数量的空间（稍后用于索引），流式传输对象（最多 N），记录您的位置，返回索引将其写下来，然后继续下一个块（注意：这里的块不是固定大小的）。

布局示例：

```
- Step 1: skip index space and start streaming objects

| Header | <unused space for now> | Obj 1 | Obj 2   | O3 | ... Obj N |

- Step 2: after writing N objects write the index,
          record the offset,
          start a new chunk

| Header | I1 | ... | IN | Offset | Obj 1 | Obj 2   | O3 | ... Obj N | <unused sp 
```

因此，您的索引被构建为一个固定大小的块 (N) 的链接列表，这些块 (N) 交错在您的存储中间。

*注意：第三种解决方案是使用一个简单的 SQLite 文件并让它为您编制索引...*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T18:21:49.550

我认为答案是否定的，但如果你有低级文件系统工具并且知道如何操作你选择的文件系统，你也许可以做到这一点。

假设您使用的是旧的愚蠢 FAT，其中 FAT 表存储有关文件所在磁盘扇区的信息，然后您可以为索引分配扇区，然后修改与文件相关的 FAT 表条目以指定新的顺序磁盘上用于文件的扇区，本质上是在不重新保存整个内容的情况下重新排序。

这将如何与 NTFS、ZFS 等一起工作 - 我不知道，但如果不涉及 NTFS 结构的操作，我很确定这是不可能的。

是否有意义？

# date - TOAD、日期值、标志、teradata、先前记录

> ID：13632028
> 
> 赞同：1
> 
> 时间：2012-11-29T18:10:54.290
> 
> 标签：date, toad, teradata

我有一个大型数据集，每条记录中都有开始日期和停止日期。

我们可以将一个唯一的字段值称为 Uniq1。

每条记录都有一个 Uniq1。

其他字段可以称为 MID、PrDl、PsDl。

Uniq1, MID 是整数。

我需要做的是从此数据集中输出一个数据集（考虑 SelfJoin），该数据集已用是或否（1 或 0）标记每条记录，其中 1 = 一条记录，其停止日期之后是另一条记录的开始日期停止日期的 30 天。

这将特定于 MId，因此如果 MId 1 按时间顺序有 6 条记录，并且第二条记录是前一个记录停止日期后 30 天内的录取，则第二条记录将标记为 = 1，而初始记录将标记为 0 和在 MId 1 的 4 个后续记录中，没有其他类似的 30 天事件，因此它们也被标记为 = 0。

理想情况下，我想要以下输出，例如：

Uniq1 MId 开始停止 #Days 标志 PrDl PsDl

123 1 2010 年 1 月 24 日 2010 年 2 月 4 日 0 字符值 字符值

321 1 2/25/2010 3/5/2010 21 1 字符值 字符值

789 1 2010 年 6 月 21 日 2010 年 6 月 28 日 116 0 字符值 字符值

请注意，Uniq1-123 和 Uniq1-321 之间的天数为 21，因此标志 =1，但是，在 Uniq1-321 和 Uniq1-789 之间，天数为 116，标志 = 0。

任何建议将不胜感激，谢谢

# cmake - CMake：包括柠檬库

> ID：13632029
> 
> 赞同：3
> 
> 时间：2012-11-29T18:11:03.713
> 
> 标签：cmake

我只想将 Lemon 库添加到我的 CMakeLists.txt 中。当我不使用 CMake 时，我只是添加了“-lemon”，一切都很好，但现在我不知道将其添加到 CMake 文件的过程。

编辑后包括我的**CMakeLists.txt**：

```
# Created by the script cgal_create_cmake_script_with_options
# This is the CMake script for compiling a set of CGAL applications.

project( ssp )

cmake_minimum_required(VERSION 2.6.2)
if("${CMAKE_MAJOR_VERSION}.${CMAKE_MINOR_VERSION}" VERSION_GREATER 2.6)
  if("${CMAKE_MAJOR_VERSION}.${CMAKE_MINOR_VERSION}.${CMAKE_PATCH_VERSION}" VERSION_GREATER 2.8.3)
    cmake_policy(VERSION 2.8.4)
  else()
    cmake_policy(VERSION 2.6)
  endif()
endif()

set( CMAKE_ALLOW_LOOSE_LOOP_CONSTRUCTS true )

if ( COMMAND cmake_policy )

  cmake_policy( SET CMP0003 NEW )  

endif()

# CGAL and its components
find_package( CGAL QUIET COMPONENTS  )

if ( NOT CGAL_FOUND )

  message(STATUS "This project requires the CGAL library, and will not be compiled.")
  return()  

endif()

# include helper file
include( ${CGAL_USE_FILE} )

# Boost and its components
find_package( Boost REQUIRED )

if ( NOT Boost_FOUND )

  message(STATUS "This project requires the Boost library, and will not be compiled.")

  return()  

endif()

# include for local directory

# include for local package

set(CMAKE_CXX_FLAGS "-lemon")

# Creating entries for target: ssp
# ############################

add_executable( ssp  arrangement.cpp main.cpp polygonOperations.cpp scheduleGraph.cpp )

add_to_cached_list( CGAL_EXECUTABLE_TARGETS ssp )

# Link the executable to CGAL and third-party libraries
target_link_libraries(ssp   lemon ${CGAL_LIBRARIES} ${CGAL_3RD_PARTY_LIBRARIES} ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:15:37.490

这很简单，使用[target_link_libraries](http://cmake.org/cmake/help/v2.8.8/cmake.html#command%3atarget_link_libraries)：

```
project(test)

add_executable(mine test.c)

target_link_libraries(mine m) 
```

在这个例子中，我链接到 libm。在你的情况下，`m`将是`lemon`. 至少我认为，从您的问题中我不确定库名称是否是标志，`lemon`或者是否`emon`是`-l`标志，并且名称应该遵循（即`-lm`链接 libm）。

对于我的简单示例，如果我运行`make VERBOSE=1`（并删除不重要的行）：

```
[100%] Building C object CMakeFiles/mine.dir/test.c.o
/usr/bin/cc    -o CMakeFiles/mine.dir/test.c.o   -c /home/tgallagher/temp/test.c
Linking C executable mine
/usr/local/bin/cmake -E cmake_link_script CMakeFiles/mine.dir/link.txt --verbose=1
/usr/bin/cc      CMakeFiles/mine.dir/test.c.o  -o mine -rdynamic -lm 
```

因此它首先编译源文件，然后将其`-lm`放在链接器行上。

# c# - 面对没有主键约束的表时，Dapper 或 ADO.NET

> ID：13632032
> 
> 赞同：2
> 
> 时间：2012-11-29T18:11:18.543
> 
> 标签：c#, asp.net, asp.net-mvc, ado.net, dapper

参考这篇文章

[将 ASP.Net MVC 与经典 ADO.Net 结合使用](https://stackoverflow.com/questions/6694098/using-asp-net-mvc-with-classic-ado-net)

**我想要一些关于使用我无权访问 change**的数据库构建 MVC 应用程序的帮助，该数据库具有**没有主键**的表和一些没有可识别的唯一字段组合以用作复合键的表。

我只对 Entity Framework 和 ADO.NET 有一些基本的经验。所以我觉得示例帖子是一个很好的方法。

我也对[http://code.google.com/p/dapper-dot-net/](http://code.google.com/p/dapper-dot-net/)是否也可以实现我想要做的事情以及是否值得花时间学习自己编写数据访问权限感兴趣？考虑到我在这两个方面都没有丰富的经验。

对此的任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:15:45.430

与滚动您自己的数据访问相比，dapper 的一个主要好处是将数据映射到 POCO，这大大简化了将查询转换为域对象的过程。我们最近从完整的 ORM (NHibernate) 转移到了 dapper，并且发现了从 dapper 自动映射的好处以及处理我们自己的查询的能力非常好。

这将归结为最适合您和您的团队的东西，但学习精巧只能在您的工具箱中添加另一个有用的工具。

此外，如果您对 ado.net 感到满意，那么 dapper 真的不是什么精神上的跳跃。

就您无法更改的糟糕的数据库设计而言，无论您如何访问它，这始终是您的瓶颈，作为数据存储的最低要求，确实无法替代主键，但 dapper 应该使您作为开发者的生活更舒适！

# javascript - 在 Netbeans 中运行时 AJAX 不工作

> ID：13632033
> 
> 赞同：0
> 
> 时间：2012-11-29T18:11:20.353
> 
> 标签：javascript, ajax, netbeans-7

我在课堂上学习 AJAX，但在尝试让 AJAX 工作时遇到了问题。我遇到的问题是，如果 Netbeans 运行文件，html 文本框的 onKeyUp 事件将不会运行任何 Javascript 函数。如果您只是查看页面，onKeyUp 事件工作得非常好，但这不会让我使用包含我想与 AJAX 一起使用的 Java 代码的 servlet。

Netbeans 中是否有可能导致此问题的设置？

注意：尝试调用 alert("test"); 从 onKeyUp 运行时不起作用。如果查看它就可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:22:15.300

Netbeans 没有问题，请检查您的代码并确保

如果`onKeyUp`事件工作正常然后检查您是否可以请求 servlet 可能是您没有正确地给出 servlet 的路径，如 web.xml 中所述

# waf - waf 1.7：如何复制环境？

> ID：13632034
> 
> 赞同：3
> 
> 时间：2012-11-29T18:11:25.413
> 
> 标签：waf

我有一个 waf 文件，它正在为多个目标、多个平台以及在某些情况下为多个架构构建多个库。

我目前根据 waf 1.7 的文档为变体设置了环境，如下所示：

```
def configure(conf):
   # set up one platform, multiple variants, multiple archs
   for arch in ['x86', 'x86_64']:
      for tgt in ['dbg', 'rel']:
         conf.setenv('platform_' + arch + '_' + tgt)
         conf.load('gcc')   # or some other compiler, such as msvc
         conf.load('gxx')
         #set platform arguments 
```

但是，这会导致 waf 在配置期间输出多行搜索编译器。这也意味着我经常多次在同一个环境*附近进行设置。*如果可能的话，我想这样做一次，例如：

```
def configure(conf):
    # set up platform
    conf.setenv('platform')
    conf.load('gcc')
    conf.load('gxx')
    # set platform arguments
    for arch in ['x86', 'x86_64']:
        for tgt in ['dbg', 'rel']:
            conf.setenv('platform_' + arch + '_' + tgt, conf.env.derive())
            # set specific arguments as needed 
```

但是， conf.env.derive 是浅拷贝，并且 conf.env.copy() 给了我错误**'list' object is not callable**

这是如何在 waf 1.7 中完成的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T22:04:59.513

事实证明，答案是从顶级架构派生，然后分离以允许自己在配置中添加更多标志。例子：

```
def configure(conf):
    conf.setenv('platform')
    conf.load('gcc')
    conf.load('gxx')
    for arch, tgt in itertools.product(['x86', 'x86_64'],  ['dbg', 'rel']):
        conf.setenv('platform')
        new_env = conf.env.derive()
        new_env.detach()
        conf.setenv('platform_' + arch + '_' + tgt, new_env)
        # Set architecture / target specifics 
```

# javascript - 如何从外部 javascript 文件中调用 tiny_mce.init

> ID：13632040
> 
> 赞同：2
> 
> 时间：2012-11-29T18:11:50.550
> 
> 标签：javascript, asp.net, tinymce

我对 javasrcipt 几乎一无所知，但我知道我应该能够做到这一点。

我想进行几个不同的 tinymce.init 调用。如果我将它们加载到页面的头部，它们可以正常工作，但如果我将它们移动到外部 .js 文件，它们就不行了。有人可以告诉我以下有什么问题吗？

我的页面文件头：

```
<head id="Head1" runat="server">
    <title></title>
    <script type="text/javascript" src="../Scripts/tiny_mce/tiny_mce_src.js"></script>
    <script type="text/javascript" src="../Scripts/load_tinymce.js"></script>
</head> 
```

还有我的外​​部文件（load_tinymce.js）：

```
tinyMCE.init({
    mode: "specific_textareas",
    editor_selector: "StandardEditBox",
    theme: "advanced",
    theme_advanced_buttons1: "bold,italic,underline,|,sub,sup,charmap",
    theme_advanced_toolbar_location: "top",
    theme_advanced_toolbar_align: "left",
    theme_advanced_statusbar_location: "none",
    forced_root_block: false,
    height: "50",
    encode: "xml",
    theme_advanced_resizing: false,
    setup: function (ed) {
        ed.onSaveContent.add(function (i, o) {
            o.content = o.content.replace(/&#39/g, "&apos");
            });
    }
});

tinyMCE.init({
    mode: "specific_textareas",
    editor_selector: "CommentsTextBox",
    theme: "advanced",
    theme_advanced_buttons1: "bold,italic,underline,|,sub,sup,charmap",
    theme_advanced_toolbar_location: "top",
    theme_advanced_toolbar_align: "left",
    theme_advanced_statusbar_location: "none",
    forced_root_block: false,
    height: "150",
    width: "580",
    encode: "xml",        
    theme_advanced_resizing: false,
    setup: function (ed) {
            ed.onSaveContent.add(function (i, o) {"&apos");
        });
    }
}); 
```

我觉得我的 .js 文件中应该还有其他内容，但我不知道它可能是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:24:31.537

验证您`script` `src`的实际是否正确。

尝试使用以下内容：

```
 <script type="text/javascript" src="/Scripts/tiny_mce/tiny_mce_src.js"></script>
   <script type="text/javascript" src="/Scripts/load_tinymce.js"></script> 
```

这将从根目录加载绝对值。假设您的 Scripts 文件夹位于根级别。

我`..`从您的`src`- 因为这告诉页面相对于其自身查找一个文件夹来查找该`scripts`文件夹。

**更新**

将您的 src 更改为：

```
 <script type="text/javascript" src="Scripts/tiny_mce/tiny_mce_src.js"></script>
        <script type="text/javascript" src="Scripts/load_tinymce.js"></script> 
```

删除了`/`

另外，如果您还没有这样做，请为 firefox 安装 Firebug。它将帮助您确定确切的问题。

# iphone - uitableview 不使用键盘调整大小

> ID：13632041
> 
> 赞同：-2
> 
> 时间：2012-11-29T18:11:53.707
> 
> 标签：iphone, uitableview

我创建了一个视图控制器。设置一个表格视图，其中包含一堆包含文本标签的自定义单元格。当键盘出现时，tableview 的框架不会自动调整大小。界面生成器中是否有我缺少的复选框或其他东西？

我应该检查哪些设置？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T18:24:21.633

在视图控制器上添加以下键盘通知事件：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidShow:) name:UIKeyboardDidShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidHide:) name:UIKeyboardDidHideNotification object:nil]; 
```

并根据键盘通知调整 tableView 框架的大小：

```
- (void)keyboardDidShow:(NSNotification *)notification
{
    NSDictionary *userInfo = [notification userInfo];
    CGSize size = [[userInfo objectForKey: UIKeyboardFrameEndUserInfoKey] CGRectValue].size;
    CGRect frame = CGRectMake(self.tableView.frame.origin.x, 
                              self.tableView.frame.origin.y, 
                              self.tableView.frame.size.width, 
                              self.tableView.frame.size.height - size.height);
    self.tableView.frame = frame;
}

- (void)keyboardWillHide:(NSNotification *)notification
{
    NSDictionary *userInfo = [notification userInfo];
    CGSize size = [[userInfo objectForKey: UIKeyboardFrameEndUserInfoKey] CGRectValue].size;
    self.tableView.frame = CGRectMake(self.tableView.frame.origin.x, 
                                      self.tableView.frame.origin.y, 
                                      self.tableView.frame.size.width, 
                                      self.tableView.frame.size.height + size.height);
} 
```

如果要向上滚动点击单元格，请在`textFieldDidBeginEditing:`方法中进行以下更改：

```
- (void) textFieldDidBeginEditing:(UITextField *)textField {
    UITableViewCell *cell = (UITableViewCell*) [[textField superview] superview];
    [self.tableView scrollToRowAtIndexPath:[tView indexPathForCell:cell] atScrollPosition:UITableViewScrollPositionTop animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:24:29.683

如果您正在使用`UIViewController`，则必须在键盘出现时编写调整大小的代码。您可以`UIKeyboardWillShowNotification, UIKeyboardDidShowNotification, UIKeyboardWillHideNotification, UIKeyboardDidHideNotification`适当地调整表格视图的大小。

# angularjs - AngularJS：如果元素具有ngModel和具有本地范围的指令，则两种方式数据绑定失败

> ID：13632042
> 
> 赞同：13
> 
> 时间：2012-11-29T18:11:56.990
> 
> 标签：angularjs

问题显示在这里：http: [//jsfiddle.net/ews7S/](http://jsfiddle.net/ews7S/)

```
<input type="text" ng-model="testModel" dir="123"> 
```

当元素绑定到控制器范围内的模型并且您还向具有其自己的本地范围的元素添加指令时，对模型的更改仅在指令范围内更改。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-29T23:17:36.803

另一种解决方案是为模型使用对象，而不是原语。然后新的指令范围将继承（典型地）对对象的引用，而不是原始值的副本：

```
$scope.model = { testProp: "444" };

<input type="text" ng-model="model.testProp" dir="123">
<input type="text" ng-model="model.testProp">

document.getElementById("out").innerHTML = scope.model.testProp; 
```

[http://jsfiddle.net/mrajcok/awfU5/](http://jsfiddle.net/mrajcok/awfU5/)

使用原语，例如 $scope.testModel，指令作用域的 testModel 属性获取父作用域的 testModel 值的*副本。*对一个的更改不会影响另一个。

对于一个对象，例如 $scope.model，父作用域和指令作用域都具有对同一个（一个）对象的*引用。*两者的变化都会影响同一个对象。

另一个（脆弱的）解决方案是使用[未记录](https://stackoverflow.com/questions/14700325/what-are-the-undocumented-features-of-angular)的$parent 属性（对问题小提琴进行这些更改）：

```
<input type="text" ng-model="$parent.testModel" dir="123">

document.getElementById("out").innerHTML = scope.$parent.testModel; 
```

注意 using`$parent`是一个脆弱的解决方案，因为使用`$parent`取决于 DOM 结构。例如，如果在父级和子级（现在是孙子级）之间添加了另一个控制器（由您显式添加，或由另一个 Angular 指令隐式添加），我们将需要使用`$parent.$parent.testModel`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T18:13:38.973

解决方案是将其添加到指令中：

```
scope: {testModel: '=ngModel'}, 
```

见这里：http: [//jsfiddle.net/ews7S/1/](http://jsfiddle.net/ews7S/1/)

之所以可行，是因为 '=' 在本地范围属性和父范围属性之间设置了双向绑定（请参阅指令定义对象下的文档： [http ://docs.angularjs.org/guide/directive）。](http://docs.angularjs.org/guide/directive)

# arrays - 简单的 Visual Basic 程序：函数不会将数组值返回给主模块。

> ID：13632044
> 
> 赞同：1
> 
> 时间：2012-11-29T18:12:00.703
> 
> 标签：arrays, vb.net, visual-studio, function

提前感谢您提供的任何帮助。

下面是一个简单的编程作业，我正在尝试上交家庭作业...我在程序的第 65 行和第 69 行写了两个函数 * *MARKED 前面有注释 1 行，函数在第 93 行中定义- 101 和 103-111* *还标记了前面的注释 1 行。当程序运行时，它为“最大降雨量”和“最小降雨量”返回 0 值，并且不提供月份（索引）的任何值。我的目标是显示它所在月份的最大降雨量和它发生月份的最小降雨量......我是否正确地接近这个？

感谢任何时候。

```
 Module Module1

Sub Main()
    'declare constant for array size- to be used in parrallel arrays 
    Const SIZE As Integer = 12

    'declare parrallel arrays rainfall and month
    Dim rainfall(SIZE) As Double
    Dim month(SIZE) As String
    month(0) = "January"
    month(1) = "February"
    month(2) = "March"
    month(3) = "April"
    month(4) = "May"
    month(5) = "June"
    month(6) = "July"
    month(7) = "August"
    month(8) = "September"
    month(9) = "October"
    month(10) = "November"
    month(11) = "December"

    'declare other variables
    Dim total As Double
    Dim average As Double
    Dim index As Integer
    Dim largest As Double = rainfall(0)
    Dim smallest As Double = rainfall(0)
    Dim keepGoing As String = "yes"

    'main program is encapsulated in a while loop 
    'so that user can choose to use program again or exit
    While keepGoing = "yes" Or keepGoing = "Yes"
        'program intro text
        Call programIntro()

        '***********main program module********************************
        Call rainfallProgram(index, SIZE, month, rainfall, total, average, largest, smallest)

        Console.WriteLine("  ")
        Console.WriteLine("  ")
        Console.WriteLine("Would you like to use RainfallAverage again?")
        Console.Write("Enter 'yes' to keep going or any other key to exit:  ")
        keepGoing = Console.ReadLine()
        Console.WriteLine("  ")
        Console.WriteLine("  ")
    End While
End Sub

Sub rainfallProgram(ByRef index, ByVal SIZE, ByVal month, ByRef rainfall,
                    ByRef total, ByRef average, ByRef largest, ByRef smallest)
    'input months and rainfall data in parallel arrays
    For index = 0 To SIZE - 1
        Console.Write("Enter rainfall for " & (month(index)) & ":  ")
        rainfall(index) = (Console.ReadLine())
        Console.WriteLine(" ")
    Next

    Call getTotalRainfall(index, SIZE, rainfall, total)

    Call getAverageRainfall(average, total)

    Console.WriteLine(" ")
    ' ******First problem occurs here
    Console.WriteLine("The largest amount of rainfall was " & (CDbl(getLargestRainfall(index, SIZE, rainfall, largest))) & " inches")
    Console.WriteLine("     and occurred durring" & month(index))

    Console.WriteLine(" ")
    '**********Second Problem occurs here 
    Console.WriteLine("The smallest amount of rainfall was " & (CDbl(getSmallestRainfall(index, SIZE, rainfall, smallest))) & " inches")
    Console.WriteLine("     and occurred durring" & month(index))

    ' Call functionSmallestRainfall()
End Sub

'module for total rainfall
Sub getTotalRainfall(ByVal index, ByVal SIZE, ByVal rainfall, ByRef total)
    For index = 0 To SIZE - 1
        total = total + rainfall(index)
    Next
    Console.WriteLine(" ")
    Console.WriteLine("Total Rainfall:  " & total & " inches")
    index = index + 1
End Sub

'module for average rainfall
Sub getAverageRainfall(ByRef average, ByRef total)
    average = (total / 12)
    Console.WriteLine(" ")
    Console.WriteLine("Average Rainfall:  " & average & " inches")
End Sub

'function for largest rainfall
'********** Another Problem occurs here 
Function getLargestRainfall(ByVal index As Integer, ByVal SIZE As Integer, ByVal rainfall() As Double, ByRef largest As Double) As Double
    For index = 0 To rainfall.Length - 1
        If rainfall(index) > largest Then
            rainfall(index) = largest
        End If
    Next
    Return largest
End Function

'function for smallest rainfall
 '********** Another Problem occurs here 
Function getSmallestRainfall(ByVal index As Integer, ByVal SIZE As Integer, ByVal rainfall() As Double, ByRef smallest As Double) As Double
    For index = 0 To rainfall.Length - 1
        If rainfall(index) > smallest Then
            rainfall(index) = smallest
        End If
    Next
    Return smallest
End Function

'program intro text display
Sub programIntro()
    Console.WriteLine(" ")
    Console.WriteLine("---------------------------------------------------------")
    Console.WriteLine("************   Welcome to RainfallAverage   ************")
    Console.WriteLine("---------------------------------------------------------")
    Console.WriteLine("                                                      ")
    Console.WriteLine("     This program will help to total, average, ")
    Console.WriteLine("       and compare the rainfall of 12 months    ")
    Console.WriteLine(" ")
    Console.WriteLine("      Unit is inches. Input numeric values only")
    Console.WriteLine(" ")
    Console.WriteLine(" ")
End Sub 
```

端模块

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:30:24.797

鉴于这是一项任务（感谢您的诚实），我不会给您完整的解决方案，但我会指出我看到的两个问题，本着帮助您自己解决其余问题的精神:-)

```
Function getSmallestRainfall(ByVal index As Integer, ByVal SIZE As Integer, ByVal rainfall() As Double) As Double
    Dim smallest = rainfall(0) 
    For index = 0 To rainfall.Length - 1
        If rainfall(index) < smallest Then
            smallest = rainfall(index) 
        End If
    Next
    Return smallest
End Function 
```

我已经更改了您的 if 语句，以便在必要时执行分配，即当您达到比您已经访问过的值更小的值时（rainfall（index）< minimum）。我还更改了赋值语句。您更改了雨量数组的那个，以便删除其当前检查的元素并替换为当前最小的雨量值。= 是一个破坏性的更新运算符，而不是使左右手相等的东西。所以你必须知道你正在改变哪些价值，你要保持哪些价值。您将要更新的内容放在左侧，将其新值放在右侧（例如 x = 5 将值 5 分配给 x）。

希望有帮助！

# google-bigquery - Google BigQuery 失败错误意外，请重试

> ID：13632051
> 
> 赞同：0
> 
> 时间：2012-11-29T18:13:00.133
> 
> 标签：google-bigquery

这个查询

```
select word from [publicdata:samples.shakespeare] where word="aslp" 
```

给我一个错误

```
Query Failed
Error: Unexpected. Please try again. 
```

直到今天早上这个东西工作正常并且没有给出错误。但是现在当我尝试这个时它的抛出错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:12:07.270

这是今天早上在处理不返回结果的查询时引入的错误。它应该在接下来的几分钟内修复。

# android - 在 android 布局中设置 textview 和 2 个按钮

> ID：13632052
> 
> 赞同：0
> 
> 时间：2012-11-29T18:13:03.580
> 
> 标签：android, layout, button, textview

我试图将一个文本视图设置在左侧对齐，两个按钮在右侧对齐，如图所示。我正在使用边距，但我想这不是最好的解决方案，它会在不同的手机中发生变化，无论如何我的第二个按钮不会出现在应用程序中。这是我拥有的 xml 代码：

```
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">

     <LinearLayout
      android:orientation="horizontal"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:background="#807E7B">     
        <TextView
            android:id="@+id/txtForum"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
                android:textStyle="bold"
                android:textSize="25dp"
                android:textColor="#255094"
                android:layout_marginLeft="5dp"
                android:layout_marginTop="5dp"
                android:layout_marginBottom="5dp"
                >
          </TextView>

        <Button
              android:id="@+id/btnBack"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:gravity="right"
              android:text="New Thread"
              android:layout_marginLeft="80dp"
              android:layout_marginBottom="5dp">
        </Button>

        <Button
              android:id="@+id/btnBrowser"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:gravity="right"
              android:text="Browser"
              android:layout_marginLeft="100dp"
              android:layout_marginBottom="5dp">
        </Button>
    </LinearLayout>

   <ListView
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:cacheColorHint="#00000000">
    </ListView>
</LinearLayout> 
```

这是我所期望的：

![http://i47.tinypic.com/jheq1k.png](../Images/0c3f1b8aee4440cdefea51f0dac50500.png)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:21:22.243

使用`RelativeLayout`and 为您的 TextView 设置属性

```
android:layout_alignParentLeft="true" 
```

右侧集合中的按钮

```
android:layout_alignParentRight="true" 
```

第二个

```
android:layout_toLeftOf="@+id/your_button" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T18:24:50.077

使用这个布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:padding="10dip" >

    <RelativeLayout
        android:id="@+id/upperView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@android:color/darker_gray"
        android:orientation="vertical"
        android:padding="10dip" >

        <TextView
            android:id="@+id/textView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:text="Hello.."
            android:textColor="@android:color/white" />

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:text="Button 1" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toLeftOf="@+id/button1"
            android:text="Button 2" />
    </RelativeLayout>

    <ListView
        android:id="@+id/listView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/upperView" />

</RelativeLayout> 
```

你最终会得到

![在此处输入图像描述](../Images/9fd5d6d768c9a297387dd7e7eff4418b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T18:20:21.253

尝试使用相对布局，这会更容易，因为在相对布局中，所有视图都是相对于彼此定义的，因此它们适合多种屏幕尺寸。在这里阅读更多内容：

*   [http://developer.android.com/guide/topics/ui/layout/relative.html](http://developer.android.com/guide/topics/ui/layout/relative.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T18:35:38.623

作为每个人的答案的补充，将[`<merge/>`](http://android-developers.blogspot.ru/2009/03/android-layout-tricks-3-optimize-by.html)标签用作根标签并将其放入`RelativeLayout`其中会很棘手`ListView`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T18:36:23.597

例如：

```
 <RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#807E7B"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/txtForum"
        android:text="YOUR_TEXT"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerInParent="true"
        android:textColor="#255094"
        android:textSize="25sp"
        android:textStyle="bold" >
    </TextView>

    <Button
        android:id="@+id/btnBack"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerInParent="true"
        android:text="2" >
    </Button>

    <Button
        android:id="@+id/btnBrowser"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
       android:layout_toLeftOf="@id/btnBack"
       android:layout_centerInParent="true"
        android:text="1" >
    </Button>
</RelativeLayout> 
```

但请记住，将您的字符串设置为字符串资源，而不是硬编码文本。甚至请记住，如果您使用此 relativeLayout，则必须在设置第二个按钮（您的右键）之后设置第一个按钮（您的左按钮）。这仅适用于应该正确的按钮在设置左按钮之前仍然存在。

![在此处输入图像描述](../Images/f67c655502d6b437e58bb4ebb56a0d07.png)

# python - fmin 性能非常差。fmin_bfgs 精度损失。最小化不适合

> ID：13632054
> 
> 赞同：0
> 
> 时间：2012-11-29T18:13:09.520
> 
> 标签：python, machine-learning, regression

目前我正在研究逻辑回归的实现。没什么复杂的，只需使用一个简单的数据集（Andrew Ng 的购房预测）。这是我正在做的事情：

我的成本函数：

```
def Cost(theta, X, Y):
  m = Y.size 
  h = Sigmoid(X.dot(theta.T))
  J = (1.0/m) * ((-Y.T.dot(log(h))) - ((1.0 - Y.T).dot(log(1.0-h))))
  return J.sum() 
```

调用 fmin：

```
initial_theta = zeros(shape = (X.shape[1],1))
theta = fmin(Cost2,initial_theta, args = (X,Y)) 
```

使用 fmin 时，我得到的最终 theta 太大而无法预测。预测时，我总是得到 0,62 和 0,71 左右的值，这将始终预测为真。也许通过更多的迭代，我可以获得更好的结果，但我不确定。

使用 fmin_bfgs 时，如果收敛到 NaN 的成本，则使其无法使用。

还有一些其他数据：

最终θ：

```
[ 0.00126059  0.01033406] 
```

最终成本：

```
[ 0.62079972] 
```

预测：

```
[ 0.63422573  0.6727308   0.62957501  0.66757524  0.64503653  0.62245727
0.67765315  0.68966732  0.72525886  0.73487524  0.67716454  0.70974059
0.7142225   0.70415933  0.62892863  0.69232142  0.70645758  0.64152605
0.62052863  0.69538731] 
```

真实评分（如果为 1，则预测应 >=.5 如果为 0，则预测应<0.5）。这是我应该收到的：

```
[0 0 0 1 0 0 0 0 1 1 1 1 1 1 0 1 1 1 0 1] 
```

关于如何使它变得更好的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:06:36.883

因此，经过一些研究和测试，我找到了我的代码无法正常工作的原因。

由于 fmin_bfgs 正在转换为 NaN，我决定看看为什么，以及我能做些什么来解决这个问题。我所做的不是最好的方法，但解决了这个问题，现在我的代码可以工作了。

因此，基本上，fmin_bfgs 生成的数字太小，导致溢出，导致 NaN。我所做的是（再一次，不是解决问题的理想方法，但它成功了）：

首先：将成本函数拆分为三部分：

```
def Cost(theta, X, Y): 
  m = Y.size
  Y = Y.flatten()
  for i in range(X.shape[0]):
  X[i]=X[i].flatten()

  h = Sigmoid(X.dot(theta.T))
  a = (-Y.T.dot(log(h)))
  b = ((1.0 - Y.T).dot(log(1.0-h))) 
```

因此，如您所见，代码

```
J = (1.0/m) * ((-Y.T.dot(log(h))) - ((1.0 - Y.T).dot(log(1.0-h)))) 
```

被因子 a、b 和 h 替换，其中 h 是应用于向量的 sigmoid 函数。经过一些测试，我发现问题出在 b 术语上。对数计算生成 -infinity，因为 h 被计算为每个术语的 1，生成一个 log(0.0)，对于那些知道一些基本数学的人来说，什么是 -infinity。所以，这就是我为解决问题所做的：

```
if math.isnan(b):
  #case of overflow
  b = -999999

J =  (a-b)/m

return J/m 
```

基本上，我的想法是：“好吧，我在这里收到一个 -infinity。这是一个非常小的数字，但会导致溢出。所以，让我们用一个不会导致溢出的非常小的数字替换它！”

再一次，可能不是最好的方法，但它对我有用。

在此之后，我的代码运行顺利，实际上效果非常好。

# c++ - 模板对象作为参数传递给另一个模板对象

> ID：13632058
> 
> 赞同：1
> 
> 时间：2012-11-29T18:13:17.040
> 
> 标签：c++, templates

> **可能重复：**
> [C++ 模板类型名迭代器](https://stackoverflow.com/questions/11275444/c-template-typename-iterator)

考虑这样的代码：

```
#include <map>
#include <boost/shared_ptr.hpp>

template <typename T>
class Test
{
     typedef std::map< int, boost::shared_ptr<T> > TMap;
     TMap myMap;

     void test()
     {
         TMap::const_iterator iter = myMap.begin(); // line 12
     }
}; 
```

正常编译后`g++ main.cpp`返回以下行：

```
main.cpp: In member function ‘void Test<T>::test()’:
main.cpp:12: error: expected ‘;’ before ‘iter’ 
```

如果我更改`std::map< int, boost::shared_ptr<T> >`为`std::map< int, int >`，则它会编译。

`boost::shared_ptr<T>`模板对象作为参数传递给另一个模板对象似乎存在问题。

1.  **为什么？**
2.  **如何解决这个问题？**

# php - 谷歌会从外部 php 文件中抓取来自 jquery .load() 的链接吗

> ID：13632059
> 
> 赞同：1
> 
> 时间：2012-11-29T18:13:22.813
> 
> 标签：php, jquery, ajax, seo

这是我的 jQuery

```
$(document).ready(function() {
  $('#name').load('file.php?query=<?php echo urlencode($query); ?>', function() {
    $('#loading').hide();
  });
}); 
```

在初始 html 加载之后，然后将 file.php 中的内容加载到 id=name 的 div 中。这使我能够在缓慢移动的内容加载时显示加载图像。它很慢，因为它使用一些不同的 json api 来获取其内容。现在，file.php 上有一堆不同的链接。谷歌会跟随这些链接到其他页面。还是谷歌只会关注网页 html 初始加载时的链接？

我问这个是因为当我用浏览器查看网页源代码时，用 jquery 加载的动态加载内容不会显示在网页源代码中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T18:39:23.877

没有 Google 不会看到该内容。Google 不运行任何客户端 javascript，因此永远不会加载上述内容。

*   使用 Google Webmaster tools fetch as Googlebot 查看 Google 看到的内容
*   [http://support.google.com/webmasters/bin/answer.py?hl=en&answer=158587](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=158587)
*   访问 Google 页面以了解如何使您的 ajax 应用程序可抓取（请参阅上面的 Cymen 评论）。
*   [https://developers.google.com/webmasters/ajax-crawling/](https://developers.google.com/webmasters/ajax-crawling/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-02T04:17:22.980

我相信，如果您在页面上添加一个空锚点，Google 会找到它，但当然不会显示给您的查看者。

就我而言，我使用 PHP`scandir()`来动态创建文件列表：

```
echo "<li rel=$curr_name>".$curr_name."</li>\n"; 
```

查看者看到列表并可以单击每个项目。然后将 jQuery`click()`函数添加到每个函数中，`<li>`并使用`rel`' 值来完成它的工作（将 a 替换为`div`页面的内容）。

现在，如果我们在混合中添加一个空锚：

```
echo "<li rel=$curr_name>".$curr_name."<a href=\".$curr_path."\"></a></li>\n"; 
```

用户仍然看到相同的列表，jQuery 仍然会做它的事情。但是，Google 将找到并关注的每个文件也会有一个锚点。

我找不到任何说搜索引擎会因此惩罚你的东西。如果您担心，您可以随时将其包裹在图像周围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T20:11:58.243

@jhanifen 是对的

但是，您的 jquery 看起来不正确，它不应该包含 php，而应该是 javascript，后端文件将处理其余部分，也许是这样的......

```
$(document).ready(function() {
  query = 'SELECT * FROM `table`';
  $('#name').load('file.php?query=' + escape(query), function() {
    $('#loading').hide();
  });
}); 
```

# c# - 具有 O(1) 查找时间的数据结构，允许重复

> ID：13632070
> 
> 赞同：7
> 
> 时间：2012-11-29T18:13:50.083
> 
> 标签：c#, .net, performance, data-structures, collections

我的目标是创建一个数据结构实现接口，该接口将通过牺牲内存`IList<T>`来实现元素查找时间。`O(1)`

**背景** 如您所知，所有基于数组的`IList<T>`实现`List<T>`都具有`O(n)`元素查找时间。这意味着操作喜欢`int IndexOf(T element)`或`bool Contains(T element)`遍历底层数组，直到找到匹配项。

众所周知的想法是使用列表和哈希表的组合作为底层数据结构。值保存在列表中。哈希表将索引作为值和列表的值作为键。因此可以使用哈希表进行查找。

这正是`KeyedCollection<TKey, TItem>` [see MSDN](http://msdn.microsoft.com/en-us/library/ms132438.aspx)的实现方式。

**到目前为止我尝试过的**

```
internal class MyList<T> : KeyedCollection<T, T>
{
    protected override T GetKeyForItem(T item)
    {
        return item;
    }
} 
```

到目前为止，除了一个问题外，这一直有效。这种数据结构并没有完全模仿背后预期的行为`List<T>`。关键是`List<T>`允许重复，`MyList`不允许。

**问题**

是否有任何现成的数据结构，或者您可以推荐一种优雅的实现方式，`IList<T>`以便：

1.  查找操作有`O(1)`时间。
2.  所有其他操作具有相同`O()`的性能`List<T>`
3.  内存可能会受到哈希表开销（`constantA + constantB * n`字节）的影响。
4.  **必须允许重复**
5.  允许空值是可选的（可以将它们装箱到空对象中）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:22:41.973

我能看到这一点的唯一方法是使用列表字典。点击该键将为您提供创建该特定键的所有重复项的列表。总是拿第一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:38:19.487

在`Ryan Bennett`提出的建议的基础上，我认为最好的办法（因为您声明顺序很重要）是创建一个实现 IList 的类，然后在内部有这样的东西：

```
class MyList<T> : IList<T>
{
    Dictionary<T, List<int>> _indexMap;
    List<T> _items;

    public int IndexOf(T item)
    {
        List<int> indices;
        if(_indexMap.TryGetValue(item, out indices))
        {
            return indices[0];
        }
        return -1;
    }

    public void Add(T item)
    {
        List<int> indices;
        if(!_indexMap.TryGetValue(item, out indices))
        {
            indices = new List<int>();
            _indexMap[item] = indices;
        }

        indices.Add(_items.Count);
        _items.Add(item);
    }

    // Attempt at a Remove implementation, this could probably be improved
    // but here is my first crack at it
    public bool Remove(T item)
    {
        List<int> indices;
        if(!_indexMap.TryGetValue(item, out indices))
        {
            // Not found so can just return false
            return false;
        }

        int index = indices[0];
        indices.RemoveAt(0);
        if (indices.Count == 0)
        {
            _indexMap.Remove(item);
        }

        for(int i=index+1; i < _items.Count; ++i)
        {
            List<int> otherIndexList = _indexMap[_items[i]];
            for(int j=0; j < otherIndexList.Count; ++j)
            {
                int temp = otherIndexList[j];
                if (temp > index)
                {
                    otherIndexList[j] = --temp;
                }
            }
        }

        return _items.RemoveAt(index);
    }

    // ... Other similar type functions here
} 
```

编辑：

刚刚意识到，当您执行`Remove`. 您将不得不遍历索引集合并使用值 > 您删除的项目的索引来更新任何索引。您现在已经增加了“删除”时间。你也让正确变得很棘手。如果你要尝试实现这样的东西，我会围绕这个集合进行大量的单元测试。

我知道你说顺序很重要，所以我假设这就是为什么你不使用允许重复并给你 O(log n) 操作时间的排序列表方法。

编辑2：另一种簿记类型方法
我只是在脑海中弹跳这个，所以我只会给出一些粗略的伪代码，但您可能会采取一种方法，您只需将项目字典映射到索引列表和第二个字典，将索引映射到项目。如果您添加 T 是一个类的限制，那么您只需支付两次存储参考的开销。然后，您需要维护当前的“最后一个”，以便您可以轻松地将新项目添加到集合中。这应该使删除操作更干净一些。它仍然是 O(n)，因为您必须使用索引 > 已删除项目来更新任何内容。在最初的想象中，这似乎是一个潜在的解决方案，可以让您接近您想要实现的目标（如果我正确理解目标）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T18:25:15.153

哈希表应该包含每个键的索引列表。我认为这就是你所需要的，不是吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T18:23:43.443

如果您可以开发一个搜索时间为 O(1) 的结构，您会发现自己变得非常富有：p

基本上这种类型的结构是不存在的，最接近这个的是[哈希表](http://en.wikipedia.org/wiki/Hash_table)

C# 有一个内置的哈希表类型 - [C~ Hash Table](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.aspx)

# html - 使用 XPATH 从 html 中提取文本

> ID：13632074
> 
> 赞同：1
> 
> 时间：2012-11-29T18:14:11.860
> 
> 标签：html, xpath

这有点尴尬（我认为）。我有以下 html 并尝试使用 XPATH 提取单词 London 和 Paris。

```
<h2 class="results-title">
    <span class="light">Flights from </span> London
    <span class="light">to</span> Paris    
</h2> 
```

我能得到的最接近的是以下内容：

```
//h2[@class='results-title']//span 
```

这给出了以下结果：

航班从 到

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:45:40.747

我不确定这是否总是适用于更大的环境，但它适用于给定的玩具问题：

```
//h2/text() 
```

返回`London`和`Paris`。

# javascript - 如何在 JavaScript 中自动扩展文本

> ID：13632078
> 
> 赞同：0
> 
> 时间：2012-11-29T18:14:39.443
> 
> 标签：javascript, html, hyperlink, onclick, wget

当没有用户点击 JavaScript onclick 的情况下加载 html 页面时，有没有办法在 JavaScript 中展开文本？是否有类似于将# 添加到链接以强制它跳转到页面中的某个部分，但强制 URL 扩展 javascript 甚至所有 onclick javascript？

例如，在这个[页面](http://www.citeulike.org/user/dherman/article/791480)中有“发布历史”和“导出记录”，如果没有用户明确点击它们，它们里面的文本将不会显示，也不会与 html 文件一起保存。

这是扩展“导出记录”的代码的一部分

```
<a href="javascript:void(0)" id="bibtex_link"   
 onclick="getBibtex('dherman','','791480'); return false" class="plain"> 
```

我有一个 URL 列表，需要使用 wget 获取文件，想知道 wget 是否可以提供帮助或者浏览器中的默认设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:18:50.367

这些示例将用于块元素中文本的延续：

[http://css-tricks.com/text-fade-read-more/](http://css-tricks.com/text-fade-read-more/)

你会使用 jQuery 的：

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

对于您提供的 URL 中描述的示例。

# c# - 我什么时候应该使用 LongRunning 任务创建选项？

> ID：13632080
> 
> 赞同：6
> 
> 时间：2012-11-29T18:14:57.680
> 
> 标签：c#, .net, azure, task-parallel-library

我有一个 Azure Worker Role，它具有三种类型的进程：

*   从数据库读取并写入*工作输入队列*（Task1）的 C# 线程
*   *从worker-input-queue*读取的 Java 线程确实工作并写入*worker-output-queue*
*   *从worker-output-queue*读取并写入数据库的 C# 线程（Task2）

Task1 和 Task2 无限期地运行并在它们各自的队列为空时休眠。

我的代码如下所示：

```
SpawnJavaProcesses();  
Task.Factory.StartNew(Task1);  
Task.Factory.StartNew(Task2);  
while(true)  
{  
    //do some trivial sporadic work  
    Thread.Sleep(60*1000);  
} 
```

我的问题：

*   启动 Task1 和 Task2 时是否应该使用 LongRunning 任务创建选项？
*   有没有更好的方法来实现我在这里尝试做的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T19:03:48.527

如果您有几个长时间运行的线程，最好使用 LongRunning 选项。通过选择此选项，您将在线程池之外的线程中运行。这也是[由 Stephen Toub](http://social.msdn.microsoft.com/Forums/en/parallelextensions/thread/8304b44f-0480-488c-93a4-ec419327183b)（来自 Parallel Extensions 团队）解释的：

> 它本身并不是一个特定的长度。如果您要生成大量任务，LongRunning 不适合它们。如果您生成的一两个任务相对于应用程序的生命周期会持续相当长的时间，那么 LongRunning 是需要考虑的事情。

# django - 如何在 Django 中使用 Google 云消息传递

> ID：13632082
> 
> 赞同：2
> 
> 时间：2012-11-29T18:14:59.800
> 
> 标签：django, push-notification

我正在尝试将谷歌云消息与 django 一起使用。我`https://github.com/geeknam/python-gcm`在 git 上找到了，但不确定如何真正使用它。但是我想知道是否还有其他应用程序可以解决这个问题，也许`django-gcm`还有关于如何使用它的文档。帮助？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-28T15:10:05.573

你可以使用 django-gcm。它会解决你的问题。只需按照文档操作即可。

使用 Django-gcm 之前需要做的事情。

1.  转到[https://console.developers.google.com](https://console.developers.google.com)
2.  然后使用上面的标题创建您的项目，当您的项目创建时，您将被重定向到该项目页面，现在记下`Project Name`and `Project ID`，`Project ID`将用作`Sender ID`您的 Android 应用程序中的一个。
3.  现在单击`Enable and Manage APIs`，现在`Cloud Messaging from Android`从`Mobile APIs`部分中选择。
4.  现在您将能够看到`Enable API`按钮，单击该按钮，您将能够看到`Go to Credentials`部分，您将被重定向到下一页。
5.  现在在`Where will you be calling the API from?`选项中选择`Web Server`并单击`what credentials do I need ?`。
6.  从侧栏中选择凭据，然后单击`New Credentials`。为您的密钥选择名称并将 IP 地址文本框留空并点击创建，现在记下此密钥，这将在您的 Django 应用程序中用作您的 GCM_APIKEY。

现在您可以按照 django-gcm 文档从此链接设置 GCM

[django-gcm 文档](http://django-gcm.readthedocs.org/en/latest/quickstart.html "django-gcm 文档")

此外，当您到达[django-gcm 发送消息](http://django-gcm.readthedocs.org/en/latest/sending_messages.html "django-gcm 发送消息")时，请注意消息正文可能会`Null`在您的 Android 设备上发送消息。所以我最近对文档进行了更改，请参考this。

[django-gcm 最近的文档更改](https://github.com/bogdal/django-gcm/pull/40 "django-gcm 最近的文档更改")

如果您也遇到 Android 应用程序的问题，您可以参考此链接并找到使用 GCM 服务的客户端应用程序。 [django-gcm 示例客户端](https://github.com/bogdal/pager "基于 django-gcm 的 Android 客户端")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-04T00:20:18.310

我使用了以下内容：

[https://github.com/bogdal/django-gcm](https://github.com/bogdal/django-gcm)

它设计得非常好，我能够让它开箱即用。我所做的一个小改动是在`Device`模型中添加了以下内容：

```
users = models.ManyToManyField('auth.User', null=True, blank=True, related_name='android_devices') 
```

这允许将设备映射到一组用户。

需要注意的一件事是，此应用程序不**处理**来自 GCM 服务器的响应。这是必须添加的东西。参考这个页面：

[http://developer.android.com/google/gcm/adv.html#reg-state](http://developer.android.com/google/gcm/adv.html#reg-state)

诸如更新`registration_id`的和`NotRegistered`消息（当用户不再拥有您的应用程序时）之类的事情将被处理。添加非常简单，但应该完成。

# c++ - c ++ string *指针在控制台中没有正确打印

> ID：13632083
> 
> 赞同：0
> 
> 时间：2012-11-29T18:15:06.057
> 
> 标签：c++, string, pointers

```
class MyLinkedList
{
    int size_;
    Node head;

    void setVal(void *val, int type)
    {
        Node n;
        n.value = val;
        head.next->prev = &n;
        n.next = head.next;
        head.next = &n;
        n.prev = &head;

        n.type = type;
        size_++;
    }

    MyLinkedList()
    {
        size_=0;
        head.type = 0;
        head.next = &head;
        head.prev = &head;
    }

    void setValue(string value)
    {
        cout << value << endl;
        setVal(&value,3);
    }

    void toConsFirst()
    {
        int *i;
        double *d;
        string *s;
        switch(head.next->type)
        {
            case 3:
            s = (string*)(head.next -> value);
            cout << *s << endl;
            return;
        }
    }
} 
```

我对案例 3 有疑问：from "*s" 不在控制台上打印字符串。但是在 setValue() 字符串中“值”是可以的。在案例 3 中，我从 "&value" 上的 "value" 和 "s" 上的 "*s" 更改 seValue()。这与 addr 相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:17:46.077

问题是您正在存储指向临时的指针：

```
void setValue(string value){
    cout << value << endl;
    setVal(&value,3);
} 
```

在这里，`setVal()`保留`&value`在列表中，但`value`的生命周期不会超出上述方法。解决此问题的一种方法是在堆上分配字符串的副本（但不要忘记在完成后释放它）。

正如@Mat 在评论中指出的那样，你有一个类似的错误`setVal()`，它试图保持一个指向本地的指针`Node n`。

最后，我发现保留类型 ID 然后打开它们的整个方案看起来相当痛苦。我意识到这可能是一个编程练习，你可能还没有接触过模板，但如果你了解过，这对它们来说将是一个完美的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:24:42.120

以下是通过在堆上分配一个新字符串并将传入的字符串值复制到它来修复 setValue 的方法：

```
void setValue(string value){
    string* s = new string(value);
    setVal(s, 3);
} 
```

# c# - 如何在可移植库中反序列化 JSON

> ID：13632084
> 
> 赞同：2
> 
> 时间：2012-11-29T18:15:08.787
> 
> 标签：c#, .net, portable-class-library

你知道任何适用于可移植类库（Win RT、WP8、Silverlight 5）的 JSON 框架吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T19:25:18.373

您可以使用支持所有平台的[Json.Net](http://json.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:39:03.440

您可以创建特殊类型的可移植类库项目，其中将包含模型的序列化和反序列化代码

# javascript - 更新updatepanel时初始jquery不起作用

> ID：13632089
> 
> 赞同：3
> 
> 时间：2012-11-29T18:15:34.653
> 
> 标签：javascript, jquery, updatepanel, scriptmanager

我已经查看了有关此问题的帖子，但似乎没有一个解决方案适合我。

我有一个带有 jquery 脚本的 js 文件，该文件加载在页面的 head 部分

我还有一个更新面板，它包含一个放置我的触发按钮的子用户控件。正确单击子按钮时更新面板会更新。

一切正常，只是 jquery 不再工作。

我发现 $(document).ready 不适用于部分回发的信息，所以我的更新面板就是这种情况。

我还发现使用 ScriptReference 添加路径可以工作的信息，因此我将其添加到持有 UpdatePanel 的用户控件的 Page_Load 中：

```
 ScriptReference sr = new ScriptReference("~/js/jquerycripts.js");
    ScriptManager.Scripts.Add(sr); 
```

但它也不起作用。

不知道还有什么可以尝试的。

任何意见将是有益的。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T20:17:57.703

您可以使用此代码代替 $(document).ready(YourFunctionName);

```
Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(YourFunctionName) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:58:46.097

如果我理解正确，更新面板中的子按钮会触发 jQuery 代码。您正在将 onclick 行为附加到准备好的文档上。当您刷新内容时，初始子按钮消失了。它可能会被新的替换，但新的没有 onclick 行为，正如预期的那样。

解决此问题的最简单方法是**事件委托**：将 onclick 事件附加到不会刷新的更新面板的父级。有关详细信息，请参阅此页面：http: [//api.jquery.com/on/](http://api.jquery.com/on/)。在您的情况下， on() 将应用于父级，而选择器将是您的子级按钮。

另一种方法是在每次更新面板加载后重新运行 jQuery 代码。

# c++ - 使用 ODB 等 ORM 时处理类更改

> ID：13632093
> 
> 赞同：4
> 
> 时间：2012-11-29T18:15:44.733
> 
> 标签：c++, orm, persistence, odb-orm

我正在研究使用 ORM（反对关系映射器）来允许我将 C++ 对象持久保存到 SQLite 数据库中。我目前正在考虑 CodeSynthesis 的 ODB。

见： http: [//www.codesynthesis.com/products/odb/](http://www.codesynthesis.com/products/odb/)

查看 ODB 的文档，我没有看到我的一个烦人的问题的答案，即：

如果我创建一个类，将其保存到数据库，但随后在我的产品的更高版本中更改该类，会发生什么情况。当用户获得我的软件的新版本时，如何将旧数据正确加载到新版本的类中？

我之前看过 boost::serialize ，它有处理这种“升级”的机制，但我想知道：

1.  一般来说，这在 ORM 工具中是如何处理的？
2.  如何专门用 ODB 做到这一点
3.  有没有比 ODB 更好的 ORM 工具来处理这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T15:50:09.187

从一开始，充分披露：我在 ODB 工作。并回答你的第三个问题，不，没有;-)。

不过说真的，模式演化是一个难题，它是我们 TODO 列表中的三大项目之一（另外两个是多数据库支持和 SQL-to-C++ 编译器）。好消息是我们已经完成了多数据库支持，下一个是模式演变。

通常，最好的方法似乎是将您的架构（以及数据，如果需要）更新到最新版本。使应用程序能够读取多个不同版本的替代方案似乎在现实世界中无法扩展。

例如，假设我们向类中添加了一个数据成员，该成员在数据库模式级别转换为向相应表中添加一列。处理这个问题的方法是使这个新列可以为 NULL（例如，odb::nullable 或 boost::optional）。这里的想法是，该列没有值的旧数据将为 NULL（应用程序可以检测和处理）。

接下来我们需要升级数据库中的模式。在这种情况下，我们需要执行 ALTER TABLE ADD COLUMN 语句来添加新列。一旦 ODB 支持模式演化，它将自动生成这些迁移语句。现在你必须自己写它们（我知道这很痛苦）。表中的所有现有行都将自动为该列分配 NULL 值。

所以通常一个应用程序将包含一组这样的语句，这些语句将模式从一个版本升级到下一个版本。例如，从 1 到 2，从 2 到 3 等。数据库将存储模式版本，应用程序将知道其最新的模式版本。打开数据库后，应用程序将立即检查数据库版本，如果它低于应用程序架构版本，它将开始运行这些迁移集以将架构升级到最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T06:41:27.353

如果您仍然对 ODB 的替代方案持开放态度，您可能会考虑 quince：http: [//quince-lib.com](http://quince-lib.com)（并完全披露：我写的）。

关于升级数据类型的具体问题：quince 不会自动检测进化的需要，或设计进化策略或类似的东西。它为您提供的是 ALTER TABLE 的 C++ 接口。但积极的一面是：这都是在 C++ 级别：您根据 C++ 数据类型来描述您的更改，并且所有这些都经过静态类型检查。

# c++ - 如何确保这个 qi 解析器不允许点运算符之间有空格？

> ID：13632094
> 
> 赞同：2
> 
> 时间：2012-11-29T18:15:45.140
> 
> 标签：c++, boost-spirit, boost-spirit-qi

我有一段`boost::spirit::qi`可以匹配`"M7\. x . y . z"`or的代码`"M7.x.y.z"`，**但我想要一个解析器，它在前一个输入上失败。**

我想我需要插入`qi::lexeme[]`或`qi::no_skip[]`在那里，但我没有运气让它正确编译。

**编辑**变量的简化规则

**代码**

```
#define BOOST_SPIRIT_DEBUG

#include <boost/config/warning_disable.hpp>
#include <boost/spirit/include/qi.hpp>

#include <string>
namespace client
{
    namespace qi = boost::spirit::qi;
    namespace ascii = boost::spirit::ascii;

    template <typename Iterator>
    struct my_parser : qi::grammar<Iterator, std::vector<std::string>(), 
        ascii::space_type>
    {
      my_parser() : 
            my_parser::base_type( variable )
        {
            using qi::int_;
            using qi::lit;
            using qi::double_;
            using qi::lexeme;
            using ascii::char_;

            identifier %= 
                char_( "[a-z_]" )
                >> *char_( "*[a-zA-Z0-9_]" )
            ;

            variable %= simple_var % '.'   // <----- need fix here
            ;

            simple_var %= qi::string("M7") | identifier;

            BOOST_SPIRIT_DEBUG_NODE( variable );
            BOOST_SPIRIT_DEBUG_NODE( identifier );
        }

        qi::rule<Iterator, std::string(), ascii::space_type> 
            identifier, simple_var;

        qi::rule<Iterator, std::vector<std::string>(), ascii::space_type> 
            variable;
    };
}

int main( int argc, char* argv[] )
{
    using boost::spirit::ascii::space;

    typedef std::string::const_iterator iterator_type;
    typedef client::my_parser<iterator_type> my_parser;

    my_parser       g; 

    std::vector< std::string >    result;
    std::string input( "M7\. x . y . z" );  // want this to FAIL!!!

    std::string::const_iterator iter = input.begin();
    std::string::const_iterator end  = input.end();

    if (phrase_parse( iter, end, g, space, result ) && iter == end)
        std::cout << "Parsing succeeded\n";
    else
        std::cout << "Parsing failed\n";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:08:13.780

`qi::lexeme[]`只接受无船长规则。

您可以将标识符和 simple_var 声明为：

```
qi::rule<Iterator, std::string()> identifier,simple_var; 
```

现在你可以在`variable`

```
variable %= lexeme[simple_var % '.']; 
```

# html - 过渡，我很困惑

> ID：13632095
> 
> 赞同：1
> 
> 时间：2012-11-29T18:15:48.227
> 
> 标签：html, css, css-transitions

我有一个包含过渡的布局，它们顺利进入该过渡，但一旦光标离开所选区域，它们就会突然回到第一个位置。

```
}
#holder div:hover {
    width:92px;
    background-color:#dddddd;
    -webkit-transition:all .4s ease-out;
    -moz-transition:all .4s ease-out;
    -ms-transition:all .4s ease-out;
    -o-transition:all .4s ease-out;
    transition:all .4s ease-out; 
```

这就是它的编码，有没有人能帮我把它顺利恢复到原来的形式？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:20:51.063

`div`此选择器仅在 a是其子级`#holder`时才匹配`:hover`。

```
#holder div:hover {
    background-color: #DDD;
    -webkit-transition: all 0.4s ease-out;
    -moz-transition: all 0.4s ease-out;
    -ms-transition: all 0.4s ease-out;
    -o-transition: all 0.4s ease-out;
    transition: all 0.4s ease-out;
    width: 92px;
} 
```

这意味着您的转换仅在 div 悬停时适用。停止悬停后，过渡不再适用，样式将跳回。

要让它双向工作，您需要将转换声明放在`#holder div`：

```
#holder div {
    -webkit-transition: all 0.4s ease-out;
    -moz-transition: all 0.4s ease-out;
    -ms-transition: all 0.4s ease-out;
    -o-transition: all 0.4s ease-out;
    transition: all 0.4s ease-out;
}
#holder div:hover {
    background-color: #DDD;
    width: 92px;
} 
```

# sql - 如何避免表中的重复检查多列

> ID：13632100
> 
> 赞同：-3
> 
> 时间：2012-11-29T18:16:04.933
> 
> 标签：sql, sql-server, tsql

我想确保不插入多列的组合。

可以说。

```
Emloyee

EmployeeId CatgoryId  BusinessId

1          1          1

2          2          1

BusessCategory

CategoryId BusinessId

1          1
1          2
1          3
2          1
2          4
2          3 
```

我必须确保在向表中插入数据时不会重复任何组合。

我的 sql 查询会给我一些类似的东西

```
insert into employee(EmployeeId, CatgoryId,  BusinessId)
select e.employeeid,e.categoryid,bc.BusinessId from employee e inner join BusessCategory bc on bc.CatgoryId = e.CatgoryId 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:17:36.603

在所有相关列上定义唯一键。然后数据库将在插入重复项之前抛出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:08:38.447

如果 bc.bc.CatgoryId 在 BusessCategory 中重复，那么您将在每次匹配的结果中获得一行。

```
select e.employeeid,e.categoryid,bc.BusinessId 
from employee e 
inner join BusessCategory bc 
on bc.CatgoryId = e.CatgoryId 
```

简单的答案是

```
select distinct e.employeeid,e.categoryid,bc.BusinessId 
from employee e 
inner join BusessCategory bc 
on bc.CatgoryId = e.CatgoryId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T20:55:38.310

这就是我要找的：

```
insert into employee(EmployeeId, CatgoryId,  BusinessId)
select e.employeeid,e.CatgoryId,bc.BusinessId from employee e inner join BusessCategory bc 
on bc.CategoryId = e.CatgoryId 
where not exists(
select * from employee e1 where 
 bc.BusinessId = e1.BusinessId and e.CatgoryId = e1.CatgoryId and e.EmployeeId = e1.EmployeeId
) 
```

欢迎任何更好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T18:34:40.663

@kumar：请在单独的链中找到此问题的重复项[我如何在 mysql 中插入多个值并避免重复项](https://stackoverflow.com/questions/5986137/how-do-i-insert-multiple-values-in-mysql-and-avoid-duplicates)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T18:36:13.773

我有点不清楚您是否是第一次尝试填充没有重复行的表，或者您是否想创建一个将来不允许重复行的表（或可能两者兼而有之）。如果您想防止重复行，那么@juergen 的答案应该涵盖您。如果您想第一次使用一组不同的行填充表，请尝试以下查询：

```
INSERT INTO Table1 (A,B,C)
SELECT DISTINCT A,B,C FROM TABLE2 
```

如果您想同时做这两件事，那么@jurgen 和我的回答应该可以涵盖您。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-11-29T18:27:01.973

确切的语法可能不匹配，但以下这一个可能是一个基本想法——

```
 insert into table (A,B,C)  values (a,b,c) where a is not in(select a from table where A=a  and B=b and C=c) 
```

# jquery - Jquery Sortable 基于水平列表上的 LEFT CSS 属性

> ID：13632101
> 
> 赞同：0
> 
> 时间：2012-11-29T18:16:22.127
> 
> 标签：jquery, jquery-ui

我实现了一个可排序的水平列表。我想更新列表中每个元素的 LEFT css 值（所有元素都是 div）。因为**剩下**的财产对我们来说很重要，我们应该保留它。我找不到怎么做的方法。

目前，由于硬编码的左值，无法对可排序列表进行排序。它总是一样的。当用户开始拖动任何项目时，Left 值应自动更改，因此用户将看到项目正在替换。

这是我的例子：

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Sortable - Default functionality</title>
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<style>
div {
    display: block;
}
div.item {
    position: absolute;
    overflow: hidden;
    height: 64px;
    background-color: gray;
    border: 1px solid black;
    float: left;
}
#test {
    position: fixed;
    top: 70px;
    left: 10px;
}
</style>
<script>
    $(function() {  
        $("#sortable").sortable({
            placeholder: "placeholder",
            start : function(event, ui) {
                var wid = parseInt(ui.item.width());
                ui.item.data('orgWid', wid);
            },
            sort : function(event, ui) {
                var wid = ui.item.data('orgWid');
                $('#test').text(wid);
                /**
                 * Here we should update the "left" css value of each element on list.
                 //for siblings of selected div
                $(".placeholder ~ div").each(function() {
                    $(this).css("left", parseInt($(this).css('left')) + wid);
                }
                **/
            },
            cursor : 'crosshair'
        });
        $("#sortable").disableSelection();
    });
</script>
</head>
<body>
    <div>
        <div id="sortable">
            <div id="item_0" class="item" style="left: 0px; width: 176px;">176px</div>
            <div id="item_1" class="item" style="left: 176px; width: 292px;">
                292px</div>
            <div id="item_2" class="item" style="left: 468px; width: 85px;">85px
            </div>
        </div>
    </div>
    <p id="test">-</p>
</body>
</html> 
```

# haskell - 匹配 2 个 Data.Map 包版本

> ID：13632104
> 
> 赞同：1
> 
> 时间：2012-11-29T18:16:29.070
> 
> 标签：haskell

我像这样导入包 Data.Map ：`import qualified Data.Map as M`，我有一个类型为：

```
> :t particleMap 
particleMap :: M.Map PID (Particle (Float, Float)) 
```

现在，我想将我的变量传递给`particleMap`类型如下的数据：

```
> :t Ensemble
Ensemble
  :: [([Edge], Point v -> Point v -> v)]
     -> containers-0.4.2.1:Data.Map.Map PID (Particle v) -> Ensemble v 
```

请看第二个论点。它是`containers-0.4.2.1:Data.Map.Map PID (Particle v)`，不喜欢`Data.Map.Map`，或者不喜欢`M.Map`。最后，它会导致如下错误：

```
Couldn't match expected type `containers-0.4.2.1:Data.Map.Map
                                    PID (Particle (Float, Float))'
                with actual type `M.Map PID (Particle (Float, Float))' 
```

我仔细检查了包容器的版本，我注意到我已经安装了 2 个版本：

> 安装的版本：0.4.2.1、0.5.1.0

所以，我想，计算机与 2 个版本混淆了，这就是导致错误的原因。是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:27:59.800

GHC 通常会假设导入应该从所有可用包的最新版本中提取。可能在新版本的容器中作为依赖项引入了一些东西。您所做的正确做法是取消注册。如果您不想这样做，您可以在`ghc-pkg hide`默认情况下阻止 ghc 使用它。

在任何情况下，典型的下一步将是找到迫使您拉出新容器的罪魁祸首包，并修改其阴谋集团以使用旧集装箱。

这是因为容器是一个非常依赖于依赖链的包，更新它通常会迫使您“重建世界”以使其他所有东西都使用更新的版本，这通常非常困难。

# c - C printf 中的输出

> ID：13632113
> 
> 赞同：1
> 
> 时间：2012-11-29T18:16:57.587
> 
> 标签：c, gcc

`-6i`这段代码中的含义是什么？

```
#include<stdio.h>

int main()
{
    int i = 1234;
    printf("%d",-6i);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:26:33.930

要回答您的真正问题，`-6i`是一个复杂的常量（GCC 扩展）。来自[http://gcc.gnu.org/onlinedocs/gcc/Complex.html](http://gcc.gnu.org/onlinedocs/gcc/Complex.html)：

> 要编写具有复杂数据类型的常量，请使用后缀“i”或“j”（任何一个；它们是等效的）。例如，`2.5fi`有类型`_Complex float`和`3i`有类型`_Complex int`。这样的常数总是有一个纯虚数，但你可以通过在一个实数常数上加一来形成任何你喜欢的复数值。这是一个 GNU 扩展；如果您有一个符合 ISO C99 的 C 库（例如 GNU libc），并且想要构建复杂的浮点类型常量，您应该包含`<complex.h>`并使用宏`I`或`_Complex_I`代替。

因此`i`in`-6i`与变量无关`i`，就像`f`浮点常量中的 in`-1.0f`与名为 的变量无关`f`。

附带说明，`printf("%d",-6i);`是未定义的行为，因为格式规范`%d`不处理复杂的参数。GCC 没有对复杂类型的表示做出任何承诺（据我所知）。`printf()`关于那会做什么，你不能说太多。

我认为要打印复杂值，您必须分别提取复杂值的每个组件（我认为 glibc 没有`printf()`处理 GCC 复杂类型的格式规范扩展）。就像是：

```
printf("%d %d\n",__real__ -6i, __imag__ -6i);
printf("%f %f\n",__real__ -6.i, __imag__ -6.i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:22:25.750

也许如果你稍微改变你的代码：

```
int main(){
   int i = 1234;
   printf("%d",-6*i); 
   } 
```

你可能会`-7404`回来。

要回答第二个问题，请检查这个[问题](https://stackoverflow.com/questions/4099433/c-complex-number-and-printf)。

# php - MysQl 错误：参数号无效

> ID：13632116
> 
> 赞同：0
> 
> 时间：2012-11-29T18:17:17.540
> 
> 标签：php, mysql

我收到此错误：

```
Warning: PDOStatement::execute() [pdostatement.execute]: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens in /FondManager.class.php on line 69 
```

尝试执行此操作时：

```
$Fond_Modif = $Manager->get($id);
$Fond_Modif->setContactname($_POST['name']);
$Manager->update($Fond_Modif); 
```

这是有关的课程：

```
 public function update(Fond $Fond)
  {
    $q = $this->_db->prepare('UPDATE fonds SET Name, ContactName, ContactPosition, ContactMail, ContactPhone, Website, MinTic, MaxTic WHERE id = :id');

    $q->bindValue(':id', $Fond->id());
    $q->bindValue(':name', $Fond->name(), PDO::PARAM_INT);
    $q->bindValue(':contactname', $Fond->contactname(), PDO::PARAM_INT);
    $q->bindValue(':contactposition', $Fond->contactposition(), PDO::PARAM_INT);
    $q->bindValue(':contactmail', $Fond->contactmail(), PDO::PARAM_INT);
    $q->bindValue(':contactphone', $Fond->contactphone(), PDO::PARAM_INT);
    $q->bindValue(':website', $Fond->website(), PDO::PARAM_INT);
    $q->bindValue(':mintic', $Fond->mintic(), PDO::PARAM_INT);
    $q->bindValue(':maxtic', $Fond->maxtic(), PDO::PARAM_INT);

    $q->execute();
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T18:19:31.427

您必须在查询中“提及”所有占位符

```
$q = $this->_db->prepare("UPDATE fonds 
                          SET Name = :name,
                          ContactName = :contactname,  
                          ContactPosition = :contactposition, 
                          ContactMail = :contactmail,
                          ContactPhone = :contactphone, 
                          Website = :website
                          MinTic = :mintic, 
                          MaxTic = :maxtic
                          WHERE id = :id"); 
```

PDO 仅替换占位符。您必须将该占位符添加到您的查询中。

# html - element 强制其他元素在 html 中变小

> ID：13632118
> 
> 赞同：0
> 
> 时间：2012-11-29T18:17:23.703
> 
> 标签：html, css

# 背景资料

我正在建立一个向用户显示图片的网站。该站点使用表格来表示“帖子”。

# 问题

当我将图片（或 div）添加到表格时，它会自动调整旁边的列的大小。你可以看看这个小提琴。[http://jsfiddle.net/hsNpj/](http://jsfiddle.net/hsNpj/)红色 DIV 强制其左侧的列小于其定义的宽度。奇怪的。我认为宽度是指宽度，而不是“宽度之类”。

这是 CSS 的代码，它应该将宽度定义为 100px：

```
td.postopt
{
    background:#f6f6f6;
    width:100px;
    border-right:1px solid #666;
    height:100%;
} 
```

为什么 HTML 和 CSS 会这样做？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:23:15.593

例如，尝试设置溢出规则 ( `overflow: scroll;`)。这将告诉浏览器当元素中的内容超过元素可以包含的内容时该怎么做。

另外，请记住，表格和表格元素的行为与标准布局元素的行为并不完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:31:47.910

设置`display:block;`。这将强制`td`采用指定的宽度。

# vb.net - VB.NET StreamReader 无法编码法语字符口音

> ID：13632120
> 
> 赞同：0
> 
> 时间：2012-11-29T18:17:29.410
> 
> 标签：vb.net, crystal-reports, io, encode, streamreader

正在通过 streamReader 读取一个简单的 .DAT 文件

```
rdr = New System.IO.StreamReader(Path&FileName, System.Text.Encoding.Unicode)
StrLine = rdr.ReadLine() 
```

然后使用**SubString**函数拆分**StrLine.SubString(1,10)**进行数据库插入操作。

原来我的 .DAT 文件有正确的法语重音字符，在我将它们插入数据库之前就被搞砸了。

例如，**'15 fév。2012'**变成**'10 f?v。2012'**和**'27-Aug-2012'**变成**'27 ao?t. 2012'**

首先我认为它的数据库问题所以我更改了所有列以支持 nvarchar 但现在看起来我在读取文件时可能没有使用正确的编码或完全不知道的东西。有人可以指导我走向正确的道路吗？我不太了解编码/解码..

谢谢

# php - PHP时间显示不正确

> ID：13632124
> 
> 赞同：0
> 
> 时间：2012-11-29T18:17:32.560
> 
> 标签：php, unix, time

我得到了`Sat 1 Dec 2 pm - 12pm`我应该得到的结果，`Sat 1 Dec, 2pm - 2:45pm`我不确定为什么我没有得到正确的时间。

```
$startO        = $openHome['Start'];
$finishO        = $openHome['End'];
$startConvert  = preg_replace('~\D~', '', $startO);
$start         = date('D j M g a',$startConvert / 1000);
$finishConvert = preg_replace('~\D~', '', $finishO);
$finish         = date('ga',$finishO / 1000);

$openHomeDetail = $start." - ". $finish; 
```

**$startO & $finishO:**

```
"Start":"\/Date(1354323600000)\/","End":"\/Date(1354326300000)\/" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:33:16.047

`$finish = date('ga',$finishO / 1000);`

应该：

`$finish = date('ga',$finishConvert / 1000);`

`$finishO`是一个无效的时间戳，导致 date 显示为 0，默认为 unix epoch。

# ruby-on-rails - 应用程序文件夹中的link_to内部文件rails 3.2.8

> ID：13632126
> 
> 赞同：0
> 
> 时间：2012-11-29T18:17:34.810
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, link-to

我里面有一个名为**messages_datatables.rb的文件**`/app/datatables/admin/`

```
class Admin::MessagesDatatable
  delegate :params, :h, :link_to, :number_to_currency, to: :@view
  .
  .
  .
  private
  def data
    messages.map do |message|
      [
        "", 
        link_to(message.subject, admin_message_path(message))
      ]
    end
  end
  .
  .
  .
  .
end 
```

我需要`link_to`在这个文件中使用助手，但我得到：

```
NoMethodError (undefined method `admin_message_path' for #<Admin::MessagesDatatable:0xbe07170>): 
```

该路径在视图中运行良好。我的路线中有路径。

**我的错误在哪里？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:40:13.087

添加：

```
delegate :url_helpers, to: 'Rails.application.routes' 
```

而不是`admin_message_path`, 使用`url_helpers.admin_message_path`

# javascript - 将 JSHint (Vim) 与 .html 文件一起使用

> ID：13632129
> 
> 赞同：4
> 
> 时间：2012-11-29T18:17:45.853
> 
> 标签：javascript, html, vim, jshint

我刚刚在 Vim 中安装了 JSHint，到目前为止它按预期工作。我似乎唯一没有开始工作的是检查 .html 文件中的语法（在 .js 中它可以完美地工作）。即，当我`<script>`在 .html 文件中有一个 -Section 时，它希望在保存缓冲区或调用`:JSHint`.

该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-03T12:13:45.243

[大约一个月前](https://github.com/jshint/jshint/pull/1352)，jshint 添加了对从 html 文件中提取 js 的支持。这是`--extract`命令行中的选项（[此处的文档](http://jshint.com/docs/cli/)）

我不确定您使用的是哪个 jshint 插件，但如果您可以调整它传递给 jshint 的命令行参数，那么您只需要添加

```
--extract=always 
```

然后以某种方式将 jshint 设置为也对 html 文件进行 linting。

我[试图](https://github.com/scrooloose/syntastic/pull/925)让它在合成中工作......

# java - 在 Java 中将数据从 HashSet 移动到 ArrayList

> ID：13632135
> 
> 赞同：22
> 
> 时间：2012-11-29T18:18:03.763
> 
> 标签：java, list, data-structures, arraylist, hashset

我`Set`在Java中有以下内容：

```
Set< Set<String> > SetTemp = new HashSet< Set<String> >(); 
```

我想将其数据移动到`ArrayList`：

```
ArrayList< ArrayList< String > > List = new ArrayList< ArrayList< String > >); 
```

有可能这样做吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2014-09-23T09:14:43.877

将数据移动`HashSet`到`ArrayList`

```
Set<String> userAllSet = new HashSet<String>(usrAllTemp);
List<String> usrAll = new ArrayList<String>(userAllSet); 
```

这`usrAllTemp`是一个`ArrayList`，它有一些值。同样的方式`usrAll(ArrayList)`从`userAllSet(HashSet)`.

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-29T18:21:03.543

你只需要循环：

```
Set<Set<String>> setTemp = new HashSet<Set<String>> ();
List<List<String>> list = new ArrayList<List<String>> ();
for (Set<String> subset : setTemp) {
    list.add(new ArrayList<String> (subset));
} 
```

注意：您应该以小型大写字母开头变量名以遵循 Java 约定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-17T16:24:01.117

您可以使用 Stream 和收集器来做到这一点，我希望这是最简单的方法

```
listname = setName.stream().collect(Collectors.toList()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-09T07:09:25.160

您可以使用`addAll()`：

```
Set<String> gamesInstalledTemp = new HashSet< Set<String> >();
List<String> gamesInstalled = new ArrayList<>();
gamesInstalled.addAll(gamesInstalledTemp); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-09T09:35:38.903

我们有这些方法可以在 java 中将 hashet 转换为 ararylist

方法1：我们将hashset作为参数在arraylist/list的构造函数中传递为

```
Set<String> hs = new HashSet<String>();
hs.add("java");
hs.add("php");
hs.add("html");
List<String> list = new ArrayList<String>(hs); 
```

方法2：迭代Hashset并在列表中逐个添加元素

```
 for (String str : hs) {
    arraylist.add(str);
 } 
```

方法：使用 arr.addAll() 方法

```
 With the help of addAll() you can add collection into list 
```

参考： [如何将 HashSet 转换为 List/ArrayList](https://www.javavogue.com/2015/05/how-to-convert-hashset-to-a-list-arraylist/)

# javascript - Opera bug with JS autoselecting text (if more than 1 div)

> ID：13632139
> 
> 赞同：0
> 
> 时间：2012-11-29T18:18:18.050
> 
> 标签：javascript, html, select, opera

Here is HTML code. It supposed to select all text in "Container" div

```
<B onclick="SelectText(document.getElementById('Container'));">select all text</B>
<Div id="Container">
<Div>123456</Div>
<Div>123456</Div>
<Div onclick="SelectText();">123456</Div>
</Div> 
```

here is JS code of the SelectText() function

```
function SelectText(target){
if(target==null){
var e = window.event || e;
if (!e) var e = window.event;
var target=e.target || e.srcElement;
}

var rng, sel;
if ( document.createRange ) {
rng = document.createRange();
rng.selectNode( target );
sel = window.getSelection();
sel.removeAllRanges();
sel.addRange( rng );
} else {
var rng = document.body.createTextRange();
rng.moveToElementText( target );
rng.select();
    }
} 
```

Problem is that in Opera 12.02 when "select all text" is clicked, all text seems like selected, but it's not selected (I can't rightclick it and copy).

(terrific, but IE works fine with it)

Why not in Opera?!!! And what can I do to make Opera 12.02 believe that all text in "Container" is selected?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:01:30.913

That code works fine for me in 12.11 on jsfiddle, so I guess you just need to use a more recent Opera version. I remember older Opera versions having bugs like that.

# java - Java泛型，使用泛型的类必须始终是某种类型的容器吗？

> ID：13632140
> 
> 赞同：0
> 
> 时间：2012-11-29T18:18:24.797
> 
> 标签：java, generics

很明显，像 ArrayList 一样，它是一个装满“泛型”类型项目的容器。

除了作为容器之外，一个类如何使用泛型？有什么常见的用法吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T18:26:24.913

一个简单的例子是[`Comparable<T>`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)

```
public class Person implements Comparable<Person> 
```

这使您可以以自然的方式将一个人与另一个人进行比较。

同样有[`Comparator<T>`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)：

```
public class NameComparator implements Comparator<Person> 
```

这使您可以以*特定*方式比较任何两个人。这些接口都不是关于“容器”的。

然后有类似 的类型[`Future<V>`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html)，表示未来某个时间类型值的承诺`V`（基本上是异步操作）。现在你可以把它想象成一种容器，但它不是一个*集合*......

从根本上说，只要您有一个操作或类型，该操作或类型通过类型有用地参数化（可能带有约束）以保持类型安全，泛型就很有用，但可以使用该类型参数的各种不同类型参数。

# c# - 如何从另一个表单调用方法？C＃

> ID：13632146
> 
> 赞同：1
> 
> 时间：2012-11-29T18:18:49.427
> 
> 标签：c#, forms, invoke

> **可能重复：**
> [在 C# 中调用另一个表单上的方法](https://stackoverflow.com/questions/837788/calling-a-method-on-another-form-in-c-sharp)

我的程序中有 2 个表格。有没有一种方法可以在单击 按钮时`form1`调用`form2`类中的方法？

这是我尝试过的。clear_grid() 是我在表单 2 中使用的方法（名为 GameForm），这是表单 1 中按钮的事件侦听器。

```
private void yesButton_Click(object sender, EventArgs e)
{  
    this.Hide();
    GameForm.ActiveForm.Invoke(clear_grid());
} 
```

当然，这是行不通的。有没有类似的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:22:40.453

如果`GameForm`是您的第二个表单类的实例并且`clear_grid`是公共方法，那么简单地调用方法有什么问题？

```
private void yesButton_Click(object sender, EventArgs e)
{  
    this.Hide();
    GameForm.clear_grid();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:21:57.713

尝试这样的事情： -

```
(Form1)this.Parent.RefreshTable(); 
```

# css - Sass (.scss) 文件的 Aptana Studio 3 代码辅助

> ID：13632150
> 
> 赞同：11
> 
> 时间：2012-11-29T18:19:10.800
> 
> 标签：css, editor, aptana, sass, code-assist

我正在使用 Aptana Studio 3，我想让代码辅助功能适用于 Sass (.scss) 文件。如果代码辅助不适用于 Sass 语法/声明也没关系，但我想获得标准 CSS 声明的语法高亮和代码完成帮助。因此，例如，如果我输入“背景”，我希望编辑器像 HTML 一样显示语法。

我为 .scss 文件添加了一个新的文件关联首选项（来自这里：[https](https://wiki.appcelerator.org/display/tis/Changing+your+file+association+preferences) ://wiki.appcelerator.org/display/tis/Changing+your+file+association+preferences ），并将 CSS 编辑器指定为默认值.scss 文件的编辑器。这让我的语法突出显示，但没有 CSS 规则的代码完成帮助。

我是做错了什么，还是我只是运气不好获得代码完成/代码辅助帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T16:39:25.853

这个^对于那些还没有完成的人已经去：首选项>常规>编辑器>文件类型中的文件关联选择sass（和scss），单击添加，选择css源编辑器，添加它。然后在关联的编辑器框中选择 css 源代码编辑器并单击默认。这样做之后 - 像我们一样感到沮丧和谷歌代码完成 sass aptana studio，然后发布解决方案，如果你找到它或投票以便有人发现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T13:42:47.567

对于任何有兴趣使用 SASS 的默认 CSS 编辑器的人。做这个。

转到：窗口 > 首选项 > 常规 > 编辑器 > 文件关联。在“文件类型”中，选择“*.scss”。然后在“Associated editors”中添加 CSS Source Editor 并设为默认。虽然我喜欢默认 SASS Source Editor 的主题。

是的，正如预期的那样，这将允许访问 CSS 编辑器的自动完成和所有其他功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T22:28:14.917

（答案取自评论-道具/喊出去@Humming）

我现在的问题是得到 css 错误很烦人，因为 css 不支持选择器语法中的选择器。——安德鲁·卢林

> 对我来说没有这样的问题，我可以毫无错误地嵌套。确保您的文件扩展名是 .css.scss -Humming

等等，我的文件扩展名应该是 .css.scss 是什么意思……你的意思是 style.css 在 sass 编译之前应该是 style.css.scss 吗？——安德鲁·卢林

# 在 .css 之后添加 .scss 扩展名将允许它同时考虑 css 和 scss 功能。就像我们有 .html.erb 或 .js.erb - 嗡嗡声

# c# - 添加带有 Picturebox 数组的单个 EventHandler

> ID：13632152
> 
> 赞同：0
> 
> 时间：2012-11-29T18:19:14.983
> 
> 标签：c#, arrays, components, picturebox

我正在初始化一个`PictureBox`. 问题是，我不能`EventHandler`为每个添加个人。我在 for 循环中有这段代码：

```
picBoxs[i] = new PictureBox();
picBoxs[i].Anchor = AnchorStyles.None;
picBoxs[i].Location = new Point(x, y);
picBoxs[i].Size = new Size(104, 104);
picBoxs[i].SizeMode = PictureBoxSizeMode.Normal;
picBoxs[i].BorderStyle = BorderStyle.FixedSingle;
//this.picBoxs[i].Click += new System.EventHandler(this.picBoxs_Click); //Single EventHandler for all PictureBox(s)
this.picBoxs[i].Click += new System.EventHandler(this.picBoxs[i]_Click); //Generates error 
```

我想要`picBoxs1_Click()`, `picBoxs2_Click()`, `picBoxs3_Click()`...（等等）。因为我需要`EventHandler`每个`PictureBox`. 我可以通用`EventHandler`，`picBox_Click()`没有任何问题，但是这样做我得到了一种方法，`PictureBox`点击不同后我不能做不同的事情`PictureBox`。任何想法将不胜感激。

提前致谢...

**编辑：** 我想，当我点击 PictureBox 时，会出现一个消息框，告诉我二维数组的索引。假设我的图片框是这样排列的：

图框0 图框1 图框2

图框3 图框4 图框5

点击 picBox2 后：MessageBox 会说“[0][2]”，和点击 picBox4 一样：MessageBox 会说“[1][1]”等等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:25:02.227

使用单个事件处理程序，如下所示：

```
this.picBoxs[i].Click += picBoxs_Click; 
```

在该事件处理程序中，您可以查找有关您的图片框的信息：

```
void picBoxs_Click(object sender, EventArgs e)
{
    var box = sender as PictureBox;
    int i = Array.IndexOf(picBoxs, box);

    int columnCount = 3;
    int row = i / columnCount;
    int col = i % columnCount;

    Messagebox.Show(string.Format("[{0}][{1}]", row, col));       
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:38:44.563

无需在这里复杂化，这对您来说将是一个简单的解决方案

首先，声明一个具有每个框大小的全局常量

```
const int BOX_SIZE = 128; 
```

然后创建所有这些盒子

```
this.picBoxs[i].Click += new System.EventHandler(Boxes_Click);
picBoxs[i].Location = new Point(x*BOX_SIZE, y*BOX_SIZE);
picBoxs[i].Size = new Size(BOX_SIZE,BOX_SIZE); 
```

最后是事件处理程序：

```
void Boxes_Click(object sender, EventArgs e)
{
    PictureBox theBox = sender as PictureBox;
    if(theBox != null)
    {

         MessageBox.Show("Box was clicked, x: {0} y:{1}", 
                         theBox.Location.X / BOX_SIZE, 
                         theBox.Location.Y / BOX_SIZE);
    } 
} 
```

如果这不适合您，请创建一个派生 PictureBox 的类，并添加一个名为 Coordinates 的属性或其他东西，然后您可以在其中存储 Box 的坐标。

```
class MyPictureBox : PictureBox
{
    public Point Coordinates { get; set;}
} 
```

然后：

```
int size_w = 128;
int size_h = 128; 
```

...

```
MyPictureBox[] picBoxs = new MyPictureBox[1000]; 
```

...

```
picBoxs[i].Click += new System.EventHandler(Boxes_Click);
picBoxs[i].Coordinates = new Point(x,y);
picBoxs[i].Position = new Point(x * size_w, y*size_h);
picBoxs[i].Size = new Size(size_w, size_h); 
```

...

```
void Boxes_Click(object sender, EventArgs e)
{
    MyPictureBox theBox = sender as MyPictureBox;
    if(theBox != null)
    {

     MessageBox.Show("Box was clicked, x: {0} y:{1}", 
                     theBox.Coordinates.X, 
                     theBox.Coordinates.Y);
    } 
} 
```

# jqgrid - Jqgrid - 根据行类型隐藏编辑表单上的特定字段

> ID：13632162
> 
> 赞同：1
> 
> 时间：2012-11-29T18:19:59.317
> 
> 标签：jqgrid

我有“树网格”表。有两种类型的行：父行和子行。父行包含嵌套的“子”行。

所以，现在我想根据行的类型在编辑表单上显示不同的字段。表列对于所有行类型都是通用的。

如何根据行类型隐藏/删除/禁用内联和模态编辑不需要的字段？

请给我一个好的起点

# sql - 为缺失的关系创建具有备用/默认值的视图

> ID：13632163
> 
> 赞同：1
> 
> 时间：2012-11-29T18:20:05.233
> 
> 标签：sql, sql-server, tsql, views

在具有多个对象的一对多关系的设置中，每个对象都使用来自单独表的名称属性。例如

```
Building(BuildingName), Floor(FloorName) 
```

如果建筑物有 2 个名称（2 个语言 ID）和 5 个楼层，其中只有 3 个楼层具有两个语言 ID 的名称，我仍然希望有 10 个结果条目。楼层名称，当缺少语言 ID 时，它们会从不匹配的楼层 ID 中拉出（默认）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:53:22.097

这符合您的追求吗？

此处可运行示例：[http ://sqlfiddle.com/#!3/894e9/4](http://sqlfiddle.com/#!3/894e9/4)

```
if object_id('[FloorName]') is not null drop table [FloorName]
if object_id('[BuildingName]') is not null drop table [BuildingName]
if object_id('[Floor]') is not null drop table [Floor]
if object_id('[Building]') is not null drop table [Building]
if object_id('[Language]') is not null drop table [Language]

create table [Language]
(
    Id bigint not null identity(1,1) primary key clustered
    , code nvarchar(5)
)
create table [Building]
(
    Id bigint not null identity(1,1) primary key clustered
    , something nvarchar(64)
)
create table [Floor]
(
    Id bigint not null identity(1,1) primary key clustered
    , BuildingId bigint foreign key references [Building](Id)
    , something nvarchar(64)
)
create table [BuildingName]
(
    Id bigint not null identity(1,1) primary key clustered
    , BuildingId bigint foreign key references [Building](Id)
    , LanguageId bigint foreign key references [Language](Id)
    , name nvarchar(64)
)
create table [FloorName]
(
    Id bigint not null identity(1,1) primary key clustered
    , FloorId bigint foreign key references [Floor](Id)
    , LanguageId bigint foreign key references [Language](Id)
    , name nvarchar(64)
)

insert [Language]
      select 'en-us'
union select 'en-gb'
union select 'fr'

insert [Building]
      select 'B1'
union select 'B2'

insert [Floor]
      select 1, 'F1.1'
union select 1, 'F1.2'
union select 1, 'F1.3'
union select 1, 'F1.4'
union select 1, 'F1.5'
union select 2, 'F2.1'
union select 2, 'F2.2'
union select 2, 'F2.3'
union select 2, 'F2.4'
union select 2, 'F2.5'

insert BuildingName
select b.Id
, l.id
, 'BuildingName :: ' + b.something + ' ' + l.code
from [Building] b
cross join [Language] l
where l.code in ('en-us', 'fr')

insert FloorName
select f.Id
, l.Id
, 'FloorName :: ' + f.something + ' ' + l.code
from [Floor] f
cross join [Language] l
where f.something in ( 'F1.1', 'F1.2', 'F2.1')
and l.code in ('en-us', 'fr')

insert FloorName
select  f.Id
, l.Id
, 'FloorName :: ' + f.something + ' ' + l.code
from [Floor] f
cross join [Language] l
where f.something not in ( 'F1.1', 'F1.2', 'F2.1')
and l.code in ('en-us')

declare @defaultLanguageId bigint
select @defaultLanguageId = id from [Language] where code = 'en-us' --default language is US English

select b.Id
, b.something
, bn.name
, isnull(bfn.name, bfnDefault.name)
, bl.code BuildingLanguage
from [Building] b
inner join [BuildingName] bn
    on bn.BuildingId = b.Id
inner join [Language] bl
    on bl.Id = bn.LanguageId
inner join [Floor] bf
    on bf.BuildingId = b.Id
left outer join [FloorName] bfn
    on bfn.FloorId = bf.Id
    and bfn.LanguageId = bl.Id
left outer join [Language] bfl
    on bfl.Id = bfn.LanguageId
left outer join [FloorName] bfnDefault
    on bfnDefault.FloorId = bf.Id
    and bfnDefault.LanguageId = @defaultLanguageId 
```

**编辑**

此版本默认任何语言：

```
select b.Id
, b.something
, bn.name
, isnull(bfn.name, (select top 1 name from [FloorName] x where x.FloorId=bf.Id))
, bl.code BuildingLanguage
from [Building] b
inner join [BuildingName] bn
    on bn.BuildingId = b.Id
inner join [Language] bl
    on bl.Id = bn.LanguageId
inner join [Floor] bf
    on bf.BuildingId = b.Id
left outer join [FloorName] bfn
    on bfn.FloorId = bf.Id
    and bfn.LanguageId = bl.Id
left outer join [Language] bfl
    on bfl.Id = bfn.LanguageId 
```

# telerik-mvc - 在 Telerik Kendo UI MVC 网格中添加“mailto：链接”

> ID：13632164
> 
> 赞同：1
> 
> 时间：2012-11-29T18:20:07.630
> 
> 标签：telerik-mvc

我与 Telerik 进行了以下通信，最重要的是，他们无法再帮助我解决我提出的问题。

这是整个线程的链接：

```
http://www.telerik.com/account/support-tickets/view-ticket.aspx?threadid=611754 
```

我想做的就是找出如何在 Telerik ASP.Net for MVC 网格中发送“邮件：链接”。

如果有人可以帮助我，这是它的主要背景：

我在网上也找不到任何重定向到“mailto”链接的东西。

我试过这个，但它不起作用：

```
columns.Bound(o => o.Website).Width(300).Filterable(false).Sortable(false).ClientTemplate("<a href='#=Website#'>#=Website#</a>"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T21:50:04.967

我不确定是什么问题。您是否尝试过创建这样的链接？我在这里看不出有什么特别之处。

```
columns.Bound(m=>m.Foo).ClientTemplate("<a href='mailto:#=Website#'>Email Me</a>") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-27T09:12:32.170

columns.Template(p => { }).ClientTemplate("<a href='mailto:#= Website#' >发送邮件</a>"

# iphone - 解析时发生更改时的通知

> ID：13632165
> 
> 赞同：0
> 
> 时间：2012-11-29T18:20:08.443
> 
> 标签：iphone, objective-c, ios, parsing

**如果在parse.com**上更改了**字符串**，我的应用程序有什么办法吗？就像我启动应用程序并在主视图上一样，应用程序会显示一个标签，上面写着有新信息。哪一个居然可以**换个角度看**。有没有办法在**未**加载解析对象的视图上获取消息。任何提示或建议都会有所帮助。抱歉，互联网上似乎没有关于此主题的内容。我以为我可以用“if”做点什么，但我不知道该怎么做。

 ******* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T22:32:20.770

Parse.com 不支持在其服务器中的数据更改时向应用程序发送通知。您需要在解析时查询数据，与本地版本的数据进行比较，如果数据不同，则显示标签。

您可能会滥用他们提供的推送通知服务来*破解*此功能。当应用程序或用户更改 Parse 中的数据时，作为客户端应用程序中保存操作的一部分，可能会触发“数据更改”推送通知. iPhone 应用程序将收到此通知，然后能够显示标签。但是，您仍然必须支持查询机制，因为通知方法对于未授权推送通知的用户以及在接收通知时未运行应用程序的用户将无法正常工作。******

# r - 合并行进行分类

> ID：13632167
> 
> 赞同：1
> 
> 时间：2012-11-29T18:20:19.070
> 
> 标签：r, aggregate

如果我有一个df：

```
> ID<-c("A","A","A","B","B","B","B","C","C","C","C")
> attr<-c("yes1","yes1","no","yes2","yes1","yes1","yes1","no","no","yes1","yes2")
> df = data.frame(ID, attr) ; df
   ID attr
1   A yes1
2   A yes1
3   A   no
4   B yes2
5   B yes1
6   B yes1
7   B yes1
8   C   no
9   C   no
10  C yes1
11  C yes2 
```

拥有数千个 ID。我想添加另一列输出`"yes"`每个 ID 的属性百分比，以及是否只有一个`"no"`属性：

```
 ID    %yes   #no
1     A    66.7     1
2     B     100     0
3     C      50     2 
```

有没有办法整合行，类似于 SQL `GROUP BY`？最终，这个新的 df 将对 ID 进行分类并添加到原始 df 中：

```
 ID    attr    result
1     A    yes1       Pos
2     A    yes1       Pos
3     A      no     False
4     B    yes2   TruePos
5     B    yes1   TruePos
6     B    yes1   TruePos
7     B    yes1   TruePos
8     C      no     False
9     C      no     False
10    C    yes1       Pos
11    C    yes2       Pos 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:36:35.943

看一下`data.table`包装：

加载包并将您的转换`data.frame`为`data.table`. 用于`key=`指定您的分组列。

```
library(data.table)
DT <- data.table(df, key="ID") 
```

执行您的聚合。

```
DT2 <- DT[, list(pct = length(grep("yes", attr))/length(attr),
                 no = sum(attr == "no")), by=key(DT)]
DT2
#    ID       pct no
# 1:  A 0.6666667  1
# 2:  B 1.0000000  0
# 3:  C 0.5000000  2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:27:59.677

这将为您提供每个 ID 级别的“是”比例：

```
by(substr(df$attr,1,3)=="yes",INDICES=df$ID,FUN=mean) 
```

这将告诉您每个 ID 级别的“否”条目数：

```
by(df$attr=="no",INDICES=df$ID,FUN=sum) 
```

# javascript - 使用 ViewBox 根据窗口大小调整 svg 的大小

> ID：13632169
> 
> 赞同：18
> 
> 时间：2012-11-29T18:20:19.810
> 
> 标签：javascript, svg, d3.js

当窗口大小发生变化时，我正在尝试使用 ViewBox 和 preserveAspectRatio 自动调整我的 d3.svg.arc ...

```
var svg = d3.select("#chart").append("svg") 
  .append("g")
  .attr("viewBox", "0 0 700 500")
  .attr("preserveAspectRatio", "xMinYMin meet")
  .attr("transform", "translate(" + r + "," + r +") rotate(180) scale(-1, -1)"); 
```

我有点困惑为什么它根本不起作用 - 我还尝试将保留设置为“无”并删除我拥有的任何设置边距。但仍然没有运气 - 任何帮助或建议将不胜感激。

这是一个例子：http: [//jsfiddle.net/xwZjN/53/](http://jsfiddle.net/xwZjN/53/)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-29T19:08:03.927

您正在应用`viewBox`和元素，它们需要应用于`preserveAspectRatio`元素：`g``svg`

```
var svg = d3.select("#chart").append("svg") 
  .attr("viewBox", "0 0 700 500")
  .attr("preserveAspectRatio", "xMinYMin meet")
     .append("g")
     .attr("transform", "translate(" + r + "," + r +") rotate(180) scale(-1, -1)"); 
```

# html - 如何在Chrome中的文件输入上垂直对齐文件名

> ID：13632171
> 
> 赞同：12
> 
> 时间：2012-11-29T18:20:21.417
> 
> 标签：html, css, internet-explorer, google-chrome, file-upload

我们网站上有一个文件输入，它没有演示中的那么高（见下文；我夸大了它以更好地显示问题）但我们无法让文件名垂直居中 - 只有按钮垂直居中。这通常不是问题，因为我们通常坚持使用默认样式，但在这种情况下，客户端希望在此输入上设置边框，以便右边框与其下方的一些右对齐按钮对齐。在我们的例子中，高度是 23px（与 line-height 相同）。

请参考[http://jsfiddle.net/UK72P/](http://jsfiddle.net/UK72P/)进行演示。据我所知，这只发生在 Chrome 和可能的 IE9 / 8 中（很快就会确认）。jsfiddle中的代码是：

**HTML**

```
<input type="file">​ 
```

**CSS**

```
input {
    display: inline-block;
    height: 40px;
    line-height: 40px;
    border: 1px solid #999;
} 
```

​</p>

是否有一些我不知道的财产，或者这是不可能的？

在此先感谢，理查德

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-28T21:06:51.103

```
input[type="file"] {
  line-height: 10px;
} 
```

这对我有用，Chrome 29.0.1547.57

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-21T22:03:38.570

另一个解决方案的工作原理仅仅是因为 line-height 足够小，所以使用 line-height 为 0 会更有意义。

这仍然有一个非零高度，它只是删除了“填充”——对我来说，文件输入的边距和填充是`0`默认的。

```
input[type="file"] {
  line-height: 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-12T15:02:28.413

您可以使用输入文件按钮垂直对齐输入文件字段：

```
input[type="file"]::-webkit-file-upload-button {
  vertical-align: middle;
  height: 100%;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-09T16:19:48.497

这个问题似乎是 Chrome 中的一个错误，因为它将按钮移动到 line-height 的底部，但不会移动任何生成的文本。解决方案是使用边距设置高度，如果需要边框，则使用封闭的 div。

### HTML

```
<div class="file-border">
  <input type=file>
</div> 
```

### CSS

```
.file-border {
  border: 1px solid #999;
}

input {
  margin: 10px 0;
} 
```

在[这个小提琴中实现](http://jsfiddle.net/H4C6q/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T21:07:22.737

使用 Chrome 黑客

```
input{-bracket-:hack[;line-height:50px;];} 
```

但它并没有满足我们的要求。所以为了这个目的，我做了这个小提琴。

[http://jsfiddle.net/hassaan39/hTezL/3/](http://jsfiddle.net/hassaan39/hTezL/3/)

# web-essentials - Web Essentials 2012，跳过缩小部分

> ID：13632172
> 
> 赞同：1
> 
> 时间：2012-11-29T18:20:27.470
> 
> 标签：web-essentials

在 Web Essentials 中使用缩小器时，有什么方法可以跳过 js 的某些部分？

我在那里已经缩小了一些脚本，由于某种原因，当再次缩小时它会损坏。如果某些评论格式或其他不能使它不能缩小文档的某些部分，那就太棒了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:59:32.150

在 Web Essentials 的当前版本 1.9.2 中，无法从缩小中排除单个文件，但它在积压中

# xcode - 当 Xcode 卡在“正在加载修订版”时，为什么删除 yourproject.xcodeproj/project.xcworkspace/contents.xcworkspacedata 会修复它？

> ID：13632174
> 
> 赞同：1
> 
> 时间：2012-11-29T18:20:34.970
> 
> 标签：xcode

我在 Xcode 中编写 openFrameworks 代码，最近打开 Xcode 发现它卡在“正在加载修订版”上。

这是有问题的，因为我无法访问构建设置；当我点击我的项目树时，我得到了“不在源代码控制之下”的错误。

我在另一个stackoverflow线程中找到了一个[解决方案](https://stackoverflow.com/questions/11871096/xcode-stuck-on-loading-revision-and-scanning-for-working-copies-when-usin)，它说删除`yourproject.xcodeproj/project.xcworkspace`对我来说只是简单的内容`contents.xcworkspacedata`

那行得通！但我想知道*为什么*它会起作用，除了魔法。

不幸的是，对于这个问题似乎没有任何直接的答案，甚至从我发现的各种[线程中对 xcworkspace 的描述都没有明确的答案。](http://lists.apple.com/archives/xcode-users/2011/Mar/msg00286.html)

我想要更全面地了解正在发生的事情，而不是非常有用的短期修复，但没有更大的经验教训。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T11:52:20.767

尝试在版本编辑器中比较版本时，我遇到了同样的问题。切换到标准编辑器或辅助编辑器时，问题就消失了。

在我看来，这里的“魔法”只是通过删除 yourproject.xcodeproj/project.xcworkspace 的内容，项目被迫关闭。当您重新打开项目时，它会在标准编辑器中打开。

所以，我可能是错的，但我认为问题出在版本编辑器中。问题实际上是什么......我不知道。这也解释了为什么单击项目树时会出现“不在源代码管理下”的错误。

# c++ - 具有多个 .h 和 .cu 文件的静态库无法解析函数

> ID：13632180
> 
> 赞同：1
> 
> 时间：2012-11-29T18:20:54.850
> 
> 标签：c++, cuda, static-libraries, header-files, unresolved-external

使用多个 .h 和 .cu 文件编译静态库时，我得到一个未解析的外部函数。这是一个复制错误的简短示例。

看来我无法让 Nsight Eclipse 版先编译 extrafunctions.cu。在我的完整项目中，首先编译了具有额外功能的文件，*但*它仍然抛出无法解决外部函数错误。

这是此示例的输出：

```
**** Build of configuration Debug for project linkerror ****

make all 
Building file: ../cudatest.cu
Invoking: NVCC Compiler
nvcc -I/usr/local/cuda/include -G -g -O0 -gencode arch=compute_30,code=sm_30 -odir "" -M -o "cudatest.d" "../cudatest.cu"
nvcc --compile -G -I/usr/local/cuda/include -O0 -g -gencode arch=compute_30,code=compute_30 -gencode arch=compute_30,code=sm_30  -x cu -o  "cudatest.o" "../cudatest.cu"
../cudatest.cu(19): warning: variable "devInts" is used before its value is set

../cudatest.cu(19): warning: variable "devInts" is used before its value is set

ptxas fatal   : Unresolved extern function '_Z9incrementi'
make: *** [cudatest.o] Error 255

**** Build Finished **** 
```

cudatest.h：

```
#ifndef CUDAPATH_H_
#define CUDAPATH_H_

#include <cuda.h>
#include <cuda_runtime.h>
#include "extrafunctions.h"

void test();

#endif /* CUDAPATH_H_ */ 
```

cudatest.cu:

```
#include <cuda.h>
#include <cuda_runtime.h>
#include "extrafunctions.h"

__global__ void kernel(int* devInts){
    int tid = threadIdx.x + (blockDim.x*blockIdx.x);

    if (tid == 0){
        for(int i = 0; i < NUMINTS; i++){
            devInts[i] = increment(devInts[i]);
        }
    }
}

void test(){

    int* myInts = (int*)malloc(NUMINTS * sizeof(int));
    int* devInts;
    cudaMemcpy((void**)devInts, myInts, NUMINTS*sizeof(int), cudaMemcpyHostToDevice);
    kernel<<<1,1>>>(devInts);
    int* outInts = (int*)malloc(NUMINTS * sizeof(int));
    cudaFree(devInts);
    free(myInts);
    free(outInts);
} 
```

额外功能.h：

```
#ifndef EXTRAFUNCTIONS_H_
#define EXTRAFUNCTIONS_H_

#include <cuda.h>
#include <cuda_runtime.h>

#define NUMINTS 4

int __device__ increment(int i);

#endif /* EXTRAFUNCTIONS_H_ */ 
```

extrafunctions.cu:

```
#include <cuda.h>
#include <cuda_runtime.h>
#include "extrafunctions.h"

int __device__ increment(int i){
    return i+1;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T21:53:47.763

您需要显式启用单独编译才能使其正常工作。右键单击您的项目，“属性”，构建-> CUDA 并选择“单独编译”链接器模式。

请注意，单独编译仅适用于 SM 2.0+ GPU，并且只能发出 SASS（例如，无法发出与未来 CUDA 设备兼容的 PTX）。[有关更多信息，请阅读NVCC 手册](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html#using-separate-compilation-in-cuda)中的“在 CUDA 中使用单独编译” 。

**更新** 您需要使用 NVCC 链接器来链接设备代码，这就是 GCC 链接器失败的原因。在 Nsight 中，您可以使用 NVCC 链接整个应用程序，也可以设置一个包含所有 CUDA 代码并使用 NVCC tollchain 构建的静态库项目和一个使用 GCC 并与第一个项目生成的静态库链接的常规 C/C++ 项目。

# .net - 使用静态存储持续时间销毁本机对象

> ID：13632187
> 
> 赞同：25
> 
> 时间：2012-11-29T18:21:19.917
> 
> 标签：.net, windows, c++-cli, clr, mixed-mode

**2012-12-09 总结：**

*   在普通的混合模式应用程序中，全局本机 C++ 析构函数作为终结器运行。无法更改该行为或相关的超时。
*   混合模式程序集 DLL 在 DLL 加载/卸载期间运行 C++ 构造函数/析构函数 - 与本机 DLL 完全一样。
*   使用 COM 接口将 CLR 托管在*本机*可执行文件中，可以让解构器像在本机 DLL 中一样运行（我想要的行为）并为终结器设置超时（额外的好处）。
*   据我所知，上述内容至少适用于 Visual Studio 2008、2010 和 2012。（仅使用 .NET 4 测试）

我计划使用的实际 CLR 托管可执行文件与此问题中概述的非常相似，除了一些小的更改：

*   按照 Hans Passant 的建议，设置`OPR_FinalizerRun`为某个值（目前为 60 秒，但可能会发生变化）。
*   使用 ATL COM 智能指针类（这些在 Visual Studio 的快速版本中不可用，因此我在本文中省略了它们）。
*   动态加载（`CLRCreateInstance`以`mscoree.dll`在未安装兼容的 CLR 时提供更好的错误消息）。
*   将命令行从主机传递到`Main`程序集 DLL 中的指定函数。

感谢所有花时间阅读问题和/或评论的人。

* * *

**2012-12-02 在帖子底部更新。**

我正在使用带有 .NET 4 的 Visual Studio 2012 开发混合模式 C++/CLI 应用程序，并且惊讶地发现一些本机全局对象的析构函数没有被调用。调查问题后发现它们的行为类似于[本文](https://stackoverflow.com/questions/10219942/mixed-mode-c-cli-app-not-shutting-down-clr-correctly)中解释的托管对象。

我对这种行为感到非常惊讶（我对托管对象理解它）并且在任何地方都找不到它，无论是在[C++/CLI 标准](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-372.pdf)中还是在[destructors 和 finalizers](http://msdn.microsoft.com/en-us/library/ms177197(v=vs.110).aspx)的描述中。

按照[Hans Passant](https://stackoverflow.com/a/10220043/786653)评论中的建议，我将程序编译为程序集 DLL 并将其托管在一个小的本机可执行文件中，这确实给了我所需的行为（析构函数有足够的时间来完成并在同一个线程中运行）建造）！

我的问题：

1.  我可以在独立的可执行文件中获得相同的行为吗？
2.  如果（1）不可行，是否可以`ICLRPolicyManager->SetTimeout(OPR_ProcessExit, INFINITE)`为可执行文件配置进程超时策略（即基本上调用）？这将是一个可接受的解决方法。
3.  这是在哪里记录的/我如何才能对这个主题进行更多的教育？我宁愿不依赖可能改变的行为。

要重现编译以下文件，如下所示：

```
cl /EHa /MDd CLRHost.cpp
cl /EHa /MDd /c Native.cpp
cl /EHa /MDd /c /clr CLR.cpp
link /out:CLR.exe Native.obj CLR.obj 
link /out:CLR.dll /DLL Native.obj CLR.obj 
```

不受欢迎的行为：

```
C:\Temp\clrhost>clr.exe
[1210] Global::Global()
[d10] Global::~Global()

C:\Temp\clrhost> 
```

运行托管：

```
C:\Temp\clrhost>CLRHost.exe clr.dll
[1298] Global::Global()
2a returned.
[1298] Global::~Global()
[1298] Global::~Global() - Done!

C:\Temp\clrhost> 
```

使用的文件：

```
// CLR.cpp
public ref class T {
    static int M(System::String^ arg) { return 42; }
};
int main() {}

// Native.cpp
#include <windows.h>
#include <iostream>
#include <iomanip>
using namespace std;
struct Global {
    Global() {
        wcout << L"[" << hex << GetCurrentThreadId() << L"] Global::Global()" << endl;
    }
    ~Global() {
        wcout << L"[" << hex << GetCurrentThreadId() << L"] Global::~Global()" << endl;
        Sleep(3000);
        wcout << L"[" << hex << GetCurrentThreadId() << L"] Global::~Global() - Done!" << endl;
    }
} g;

// CLRHost.cpp
#include <windows.h>
#include <metahost.h>
#pragma comment(lib, "mscoree.lib")

#include <iostream>
#include <iomanip>
using namespace std;

int wmain(int argc, const wchar_t* argv[])
{
    HRESULT hr = S_OK;
    ICLRMetaHost* pMetaHost = 0;
    ICLRRuntimeInfo* pRuntimeInfo = 0;
    ICLRRuntimeHost* pRuntimeHost = 0;
    wchar_t version[MAX_PATH];
    DWORD versionSize = _countof(version);

    if (argc < 2) { 
        wcout << L"Usage: " << argv[0] << L" <assembly.dll>" << endl;
        return 0;
    }

    if (FAILED(hr = CLRCreateInstance(CLSID_CLRMetaHost, IID_PPV_ARGS(&pMetaHost)))) {
        goto out;
    }

    if (FAILED(hr = pMetaHost->GetVersionFromFile(argv[1], version, &versionSize))) {
        goto out;
    }

    if (FAILED(hr = pMetaHost->GetRuntime(version, IID_PPV_ARGS(&pRuntimeInfo)))) {
        goto out;
    }

    if (FAILED(hr = pRuntimeInfo->GetInterface(CLSID_CLRRuntimeHost, IID_PPV_ARGS(&pRuntimeHost)))) {
        goto out;
    }

    if (FAILED(hr = pRuntimeHost->Start())) {
        goto out;
    }

    DWORD dwRetVal = E_NOTIMPL;
    if (FAILED(hr = pRuntimeHost->ExecuteInDefaultAppDomain(argv[1], L"T", L"M", L"", &dwRetVal))) {
        wcerr << hex << hr << endl;
        goto out;
    }

    wcout << dwRetVal << " returned." << endl;

    if (FAILED(hr = pRuntimeHost->Stop())) {
        goto out;
    }

out:
    if (pRuntimeHost) pRuntimeHost->Release();
    if (pRuntimeInfo) pRuntimeInfo->Release();
    if (pMetaHost) pMetaHost->Release();

    return hr;
} 
```

**2012-12-02**：
据我所知，行为似乎如下：

*   在混合模式的 EXE 文件中，全局析构函数在 DomainUnload 期间作为终结器运行*，无论它们是放置在本机代码还是 CLR 代码*中。在 Visual Studio 2008、2010 和 2012 中就是这种情况。
*   在本机应用程序托管的混合模式 DLL 中，全局本机对象的析构函数*在托管方法运行和所有其他清理发生后的*DLL_PROCESS_DETACH 期间运行。它们与构造函数在同一个线程中运行，并且没有与它们关联的超时（所需的行为）。正如预期的那样*，*可以`/clr`使用`ICLRPolicyManager->SetTimeout(OPR_ProcessExit, <timeout>)`.

冒险猜测，我认为全局本机构造函数/析构函数在 DLL 场景中“正常”运行（定义为我所期望的行为）的原因是允许在本机函数上使用`LoadLibrary`和`GetProcAddress`。因此，我希望在可预见的将来依靠它不会改变是相对安全的，但无论哪种方式，都希望得到官方来源/文档的某种确认/否认。

**更新 2**：

在 Visual Studio 2012 中（使用 Express 和 Premium 版本进行测试，遗憾的是我无法访问这台机器上的早期版本）。它应该在命令行上以相同的方式工作（如上所述构建），但这里是如何从 IDE 中重现。

构建 CLRHost.exe：

1.  文件 -> 新项目
2.  Visual C++ -> Win32 -> Win32 控制台应用程序（将项目命名为“CLRHost”）
3.  应用程序设置 -> 附加选项 -> 空项目
4.  按“完成”
5.  右键单击解决方案资源管理器中的源文件。添加 -> 新项目 -> Visual C++ -> C++ 文件。将其命名为 CLRHost.cpp 并粘贴帖子中 CLRHost.cpp 的内容。
6.  项目-> 属性。配置属性 -> C/C++ -> 代码生成 -> 将“启用 C++ 异常”更改为“有 SEH 异常 (/EHa)”，将“基本运行时检查”更改为“默认”
7.  建造。

构建 CLR.DLL：

1.  文件 -> 新项目
2.  Visual C++ -> CLR -> 类库（将项目命名为“CLR”）
3.  删除所有自动生成的文件
4.  项目-> 属性。配置属性 -> C/C++ -> 预编译头文件 -> 预编译头文件。更改为“不使用预编译头文件”。
5.  右键单击解决方案资源管理器中的源文件。添加 -> 新项目 -> Visual C++ -> C++ 文件。将其命名为 CLR.cpp 并从帖子中粘贴 CLR.cpp 的内容。
6.  添加一个名为 Native.cpp 的新 C++ 文件并粘贴帖子中的代码。
7.  在解决方案资源管理器中右键单击“Native.cpp”并选择属性。将 C/C++ -> 常规 -> 公共语言运行时支持更改为“无公共语言运行时支持”
8.  项目-> 属性-> 调试。将“Command”更改为指向 CLRhost.exe，将“Command Arguments”更改为“$(TargetPath)”，包括引号，“Debugger Type”更改为“Mixed”
9.  构建和调试。

在 Global 的析构函数中放置断点会给出以下堆栈跟踪：

```
>   clr.dll!Global::~Global()  Line 11  C++
    clr.dll!`dynamic atexit destructor for 'g''()  + 0xd bytes  C++
    clr.dll!_CRT_INIT(void * hDllHandle, unsigned long dwReason, void * lpreserved)  Line 416   C
    clr.dll!__DllMainCRTStartup(void * hDllHandle, unsigned long dwReason, void * lpreserved)  Line 522 + 0x11 bytes    C
    clr.dll!_DllMainCRTStartup(void * hDllHandle, unsigned long dwReason, void * lpreserved)  Line 472 + 0x11 bytes C
    mscoreei.dll!__CorDllMain@12()  + 0x136 bytes   
    mscoree.dll!_ShellShim__CorDllMain@12()  + 0xad bytes   
    ntdll.dll!_LdrpCallInitRoutine@16()  + 0x14 bytes   
    ntdll.dll!_LdrShutdownProcess@0()  + 0x141 bytes    
    ntdll.dll!_RtlExitUserProcess@4()  + 0x74 bytes 
    kernel32.dll!74e37a0d()     
    mscoreei.dll!RuntimeDesc::ShutdownAllActiveRuntimes()  + 0x10e bytes    
    mscoreei.dll!_CorExitProcess@4()  + 0x27 bytes  
    mscoree.dll!_ShellShim_CorExitProcess@4()  + 0x94 bytes 
    msvcr110d.dll!___crtCorExitProcess()  + 0x3a bytes  
    msvcr110d.dll!___crtExitProcess()  + 0xc bytes  
    msvcr110d.dll!__unlockexit()  + 0x27b bytes 
    msvcr110d.dll!_exit()  + 0x10 bytes 
    CLRHost.exe!__tmainCRTStartup()  Line 549   C
    CLRHost.exe!wmainCRTStartup()  Line 377 C
    kernel32.dll!@BaseThreadInitThunk@12()  + 0x12 bytes    
    ntdll.dll!___RtlUserThreadStart@8()  + 0x27 bytes   
    ntdll.dll!__RtlUserThreadStart@8()  + 0x1b bytes 
```

作为一个独立的可执行文件运行，我得到一个与 Hans Passant 观察到的非常相似的堆栈跟踪（尽管它没有使用 CRT 的托管版本）：

```
>   clrexe.exe!Global::~Global()  Line 10   C++
    clrexe.exe!`dynamic atexit destructor for 'g''()  + 0xd bytes   C++
    msvcr110d.dll!__unlockexit()  + 0x1d3 bytes 
    msvcr110d.dll!__cexit()  + 0xe bytes    
    [Managed to Native Transition]  
    clrexe.exe!<CrtImplementationDetails>::LanguageSupport::_UninitializeDefaultDomain(void* cookie) Line 577   C++
    clrexe.exe!<CrtImplementationDetails>::LanguageSupport::UninitializeDefaultDomain() Line 594 + 0x8 bytes    C++
    clrexe.exe!<CrtImplementationDetails>::LanguageSupport::DomainUnload(System::Object^ source, System::EventArgs^ arguments) Line 628 C++
    clrexe.exe!<CrtImplementationDetails>::ModuleUninitializer::SingletonDomainUnload(System::Object^ source, System::EventArgs^ arguments) Line 273 + 0x6e bytes   C++
    kernel32.dll!@BaseThreadInitThunk@12()  + 0x12 bytes    
    ntdll.dll!___RtlUserThreadStart@8()  + 0x27 bytes   
    ntdll.dll!__RtlUserThreadStart@8()  + 0x1b bytes 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T21:00:12.437

首先解决简单的问题：

CLR 定制的一个很好的资源是[Steven Pratschner 的书](https://rads.stackoverflow.com/amzn/click/com/0735619883)“定制 Microsoft .NET Framework 公共语言运行时”。请注意，它已过时，托管接口在 .NET 4.0 中已更改。MSDN 没有说太多，但托管接口有据可查。

您可以通过更改调试器设置来简化调试，将类型从“自动”更改为“托管”或“混合”。

请注意，您的 3000 毫秒睡眠时间刚刚结束，您应该使用 5000 毫秒进行测试。如果 C++ 类出现在使用 /clr 编译的代码中，*即使 #pragma unmanaged 生效*，您也需要覆盖终结器线程超时。在 .NET 3.5 SP1 CLR 版本上进行了测试，以下代码运行良好，为析构函数提供了足够的时间来运行完成：

```
ICLRControl* pControl;
if (FAILED(hr = pRuntimeHost->GetCLRControl(&pControl))) {
    goto out;
}
ICLRPolicyManager* pPolicy;
if (FAILED(hr = pControl->GetCLRManager(__uuidof(ICLRPolicyManager), (void**)&pPolicy))) {
    goto out;
}
hr = pPolicy->SetTimeout(OPR_FinalizerRun, 60000);
pPolicy->Release();
pControl->Release(); 
```

我选择了一分钟作为合理的时间，必要时进行调整。请注意，MSDN 文档有一个错误，它没有将 OPR_FinalizerRun 显示为允许的值，但实际上它确实可以正常工作。设置终结器线程超时还可以确保托管终结器在间接破坏非托管 C++ 类时不会超时，这是一种非常常见的情况。

当您使用使用 /clr 编译的 CLRHost 运行此代码时，您会看到的一件事是对 GetCLRManager() 的调用将失败并返回 HOST_E_INVALIDOPERATION 代码。为执行 CLRHost.exe 而加载的默认 CLR 主机不允许您覆盖该策略。因此，您非常坚持使用专用的 EXE 来托管 CLR。

当我通过让 CLRHost 加载混合模式程序集来对此进行测试时，在析构函数上设置断点时调用堆栈如下所示：

```
CLRClient.dll!Global::~Global()  Line 24    C++
[Managed to Native Transition]  
CLRClient.dll!<Module>.?A0x789967ab.??__Fg@@YMXXZ() + 0x1b bytes    
CLRClient.dll!_exit_callback() Line 449 C++
CLRClient.dll!<CrtImplementationDetails>::LanguageSupport::_UninitializeDefaultDomain(void* cookie = <undefined value>) Line 753    C++
CLRClient.dll!<CrtImplementationDetails>::LanguageSupport::UninitializeDefaultDomain() Line 775 + 0x8 bytes C++
CLRClient.dll!<CrtImplementationDetails>::LanguageSupport::DomainUnload(System::Object^ source = 0x027e1274, System::EventArgs^ arguments = <undefined value>) Line 808 C++
msvcm90d.dll!<CrtImplementationDetails>.ModuleUninitializer.SingletonDomainUnload(object source = {System.AppDomain}, System.EventArgs arguments = null) + 0xa1 bytes
    // Rest omitted 
```

请注意，这与您在问题中的观察结果不同。该代码由 CRT (msvcm90.dll) 的托管版本触发。此代码在专用线程上运行，由 CLR 启动以卸载应用程序域。您可以在 vc/crt/src/mstartup.cpp 源代码文件中查看其源代码。

* * *

第二种情况发生在 C++ 类是源代码文件的一部分时，该文件在 /clr 没有生效的情况下编译并链接到混合模式程序集中。然后编译器使用普通的 atexit() 处理程序来调用析构函数，就像它通常在非托管可执行文件中所做的那样。在这种情况下，当 Windows 在程序终止时卸载 DLL 并且 CRT 的托管版本关闭时。

值得注意的是，这发生**在**CLR 关闭并且析构函数在程序的启动线程上运行之后。因此，CLR 超时是不可能的，析构函数可以随心所欲地使用。现在堆栈跟踪的本质是：

```
CLRClient.dll!Global::~Global()  Line 12    C++
CLRClient.dll!`dynamic atexit destructor for 'g''()  + 0xd bytes    C++
    // Confusingly named functions elided
    //...
CLRHost.exe!__crtExitProcess(int status=0x00000000)  Line 732   C
CLRHost.exe!doexit(int code=0x00000000, int quick=0x00000000, int retcaller=0x00000000)  Line 644 + 0x9 bytes   C
CLRHost.exe!exit(int code=0x00000000)  Line 412 + 0xd bytes C
    // etc.. 
```

然而，这是一个极端情况，仅当启动 EXE 不受管理时才会发生。一旦 EXE 被管理，它将在 AppDomain.Unload 上运行析构函数，即使它们出现在没有 /clr 编译的代码中。所以你仍然有超时问题。拥有非托管 EXE 并不罕见，例如，当您加载 [ComVisible] 托管代码时，就会发生这种情况。但这听起来不像你的场景，你被 CLRHost 困住了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:43:51.587

回答“这是在哪里记录的/我如何才能对这个主题进行更多的教育？” [问题：如果您从此处下载并查看共享源公共语言基础结构](http://en.wikipedia.org/wiki/Shared_Source_Common_Language_Infrastructure)（又名 SSCLI），您可以了解它是如何工作的（或至少在框架 2 中曾经工作过） [http://www.microsoft.com/en-我们/下载/details.aspx?id=4917](http://www.microsoft.com/en-us/download/details.aspx?id=4917)。

提取文件后，您将在`gcEE.ccp`（“垃圾收集执行引擎”）中找到：

```
#define FINALIZER_TOTAL_WAIT 2000 
```

它定义了这个著名的默认值 2 秒。您还将在同一个文件中看到：

```
BOOL GCHeap::FinalizerThreadWatchDogHelper()
{
    // code removed for brevity ...
    DWORD totalWaitTimeout;
    totalWaitTimeout = GetEEPolicy()->GetTimeout(OPR_FinalizerRun);
    if (totalWaitTimeout == (DWORD)-1)
    {
        totalWaitTimeout = FINALIZER_TOTAL_WAIT;
    } 
```

这将告诉您执行引擎将遵守与[EClrOperation Enumeration](http://msdn.microsoft.com/en-us/library/ms231056%28v=vs.80%29.aspx)`OPR_FinalizerRun`中的值相对应的策略（如果已定义）。GetEEPolicy 在&中定义。`eePolicy.h``eePolicy.cpp`

# java - Tomcat Servlet 未显示注销

> ID：13632193
> 
> 赞同：0
> 
> 时间：2012-11-29T18:21:35.347
> 
> 标签：java, tomcat, servlets

我正在尝试创建一个 servlet，它将从此示例在浏览器上输出[Tomcat](https://stackoverflow.com/a/13519734/932307)日志

```
File logFile = new File(System.getProperty("catalina.base"), "logs/catalina.log");
String contents = FileUtils.readFileToString(logFile);
PrintWriter out = new PrintWriter(resp.getOutputStream());
out.println(contents); 
```

这工作正常，但我正在尝试更改代码以获取*catalina.2012-11-29.log*的输出。修改后的代码如下

```
Log.log(Level.OFF, "Inside doGet of LogServlet");
DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
//get current date time with Date()
Date date = new Date();
Log.log(Level.INFO, "Date = {0}", dateFormat.format(date));
String fileName = "logs/catalina." + dateFormat.format(date) + ".log";
Log.log(Level.INFO, "fileName = {0}", fileName);
Log.log(Level.INFO, "System.getProperty(catalina.base) = {0}", System.getProperty("catalina.base"));
File logFile = new File(System.getProperty("catalina.base"), fileName);
String contents = FileUtils.readFileToString(logFile);
PrintWriter out = new PrintWriter(response.getOutputStream());
out.println(contents); 
```

但是这段代码不起作用，浏览器窗口仍然是空的。我无法弄清楚为什么它不起作用？

# c - 重建开始时的 IAR 自定义构建

> ID：13632200
> 
> 赞同：2
> 
> 时间：2012-11-29T18:22:21.977
> 
> 标签：c, iar

我在 IAR 中配置了一个自定义构建工具。它接受一个文本文件并输出一个供其他 C 文件使用的 .h 文件。当我将 .h 文件添加到输出文件列表时，它作为完整重建的第一步被删除。自定义构建步骤在链接后构建结束时执行。这会导致根据 .h 编译 .c 文件失败。

另一种选择是将自定义构建步骤放在项目的预构建步骤中。但是，无论 .txt 文件是否更改，都会执行此操作。

问题：

1.  我可以让 IAR 了解 .c 文件对 .h 文件的依赖关系并在编译之前运行自定义构建步骤吗？

2.  如果那不可能，我至少可以强制自定义构建步骤在开始时发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:35:26.127

我的解决方案是将预构建步骤输出到一个临时文件，如果它不同，则仅将其复制到原始文件上。预构建步骤始终运行，但如果结果与上次相同，则不会触发完整的重新编译。

将其放入批处理文件并使其成为您的预构建步骤：

```
your_prebuild_application > SVN_Revision_tmp.h

fc /b SVN_Revision_tmp.h SVN_Revision.h > nul
if errorlevel 1 goto newfile

del SVN_Revision_tmp.h
goto end

:newfile
del SVN_Revision.h
rename SVN_Revision_tmp.h SVN_Revision.h
goto end

:end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-10T19:36:07.670

在较新的 EWARM 版本中，自定义构建步骤提供了一个复选框“在所有其他工具之前运行自定义构建工具”。我不知道它是在哪个版本中添加的，但我可以确认它存在于 EWARM 7.60 及更高版本中。

旧版本的另一种可能的解决方法是将“只读”属性设置为生成的头文件。这可以防止 EWARM 在构建运行开始时删除该文件。当然这需要生成头文件的工具能够覆盖只读文件。这通常可以通过批处理文件运行外部工具来实现，该批处理文件在运行工具之前删除只读属性，然后在文件生成后直接恢复只读属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-10T01:49:40.113

IAR 似乎按字母顺序编译文件。在我的例子中，源文件是 CSV 文件，而自定义工具通过修改 CSV 文件生成的中间文件是 C 和 H 文件（H 文件被其他源文件使用）。

我通过在自定义工具生成的中间 C 和 H 文件的名称前添加 00 解决了这个问题。由于字母 IAR 行为，CSV 到 C/H 通过自定义工具的转换发生在开始。

# javascript - 跨域子窗口 DOM 参考

> ID：13632202
> 
> 赞同：3
> 
> 时间：2012-11-29T18:22:24.323
> 
> 标签：javascript

我在子窗口中弹出了第 3 方网站。我可以从父窗口引用它的 DOM 对象吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:45:41.387

简单的答案：

您不能违反 SOP 期间。

漏洞是使用 parent.parent 方案，其中至少请求属性是通过同一来源进行的：

[根据内容调整 iframe 的大小](https://stackoverflow.com/questions/153152/resizing-an-iframe-based-on-content)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:48:14.057

```
 childWindow = window.open ("http://www.yourDomain.com","mywindow");

  childWindow.onload = function () {
     childDocument = childWindow.document;
     // now you can do things like, childDocument.getElementById("someElement"); and other DOM manipulation.

    }; 
```

# javascript - 是否可以知道我的 AngularJS HTML 是否引用了不存在的 $scope 值？

> ID：13632204
> 
> 赞同：0
> 
> 时间：2012-11-29T18:22:27.873
> 
> 标签：javascript, angularjs

**每当我的**HTML 引用了我`$scope`中不存在的名称时，我如何指示 Angular 通知我？

**示例输入：**

```
<div ng-controller="MyController">
  {{oops}} <!-- This name does not exist in my $scope -->
</div> 
```

**期望的输出：**

```
<div ng-controller="MyController">
    ERROR: No such name: "oops"
</div> 
```

在 Django 中，这可以通过[`TEMPLATE_STRING_IF_INVALID`](https://docs.djangoproject.com/en/dev/ref/settings/#template-string-if-invalid)设置来实现。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T18:31:40.573

**编辑：用过滤器做...（这将是全球性的）**

```
app.filter('undefined', function(){ 
    return function(input, message) {
        return angular.isDefined(input) ? input : message;
    };
}); 
```

利用：

```
<div ng-controller="MyController">
  {{oops | undefined:'ERROR: No such name: "oops"'}} <!-- This name does not exist in my $scope -->
</div> 
```

这应该够了吧。

* * *

这是快速简便的方法...

HTML

```
<div ng-controller="MyController">
    <span ng-show="isDefined(oops)">{{oops}}</span><span ng-hide="isDefined(oops)">ERROR: No such name: "oops"</span>
</div> 
```

在您的控制器中：

```
app.controller("MyController", function($scope) {
   $scope.isDefined = function(x) {
      return angular.isDefined(x);
   };
}); 
```

* * *

**编辑2：**一种真正的“全局”方法，可以“自动”完成这一切......为此，您正在考虑重写 Angular 的 ngBind 指令，或者创建自己的绑定指令并在任何地方使用它。

这是 Angular 的 ngBind 指令，[位于第 50 行](https://github.com/angular/angular.js/blob/master/src/ng/directive/ngBind.js)：

```
var ngBindDirective = ngDirective(function(scope, element, attr) {
  element.addClass('ng-binding').data('$binding', attr.ngBind);
  scope.$watch(attr.ngBind, function ngBindWatchAction(value) {
    element.text(value == undefined ? '' : value); //<-- this is the line.
  });
}); 
```

如您所见，当未定义该值时，它只是默认为 ''。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T16:22:57.840

它可以简单地说明函数的含义。返回应该确定您是否显示消息或任何其他逻辑。

```
 app.filter('isDefined', function () {
    return angular.isDefined;
  }); 
```

# mysql - Rake DB 迁移 MySQL

> ID：13632205
> 
> 赞同：1
> 
> 时间：2012-11-29T18:22:31.150
> 
> 标签：mysql, ruby-on-rails, rake

有人可以帮我吗？设置本地 Rails 2.2.2 项目但 rake 失败。安装了 mysql gem：

像这样安装MySQL gem：

```
sudo gem install mysql -- --with-mysql-config=/usr/local/mysql/bin/mysql_config
Successfully installed mysql-2.9.0
1 gem installed
Installing ri documentation for mysql-2.9.0...
Installing RDoc documentation for mysql-2.9.0... 
```

然后尝试调用rake：

```
$ rake --trace db:migrate 
```

** 调用 db:migrate (first_time)
** 调用环境 (first_time)
** 执行环境
** 执行 db:migrate
!!! 捆绑的 mysql.rb 驱动程序已从 Rails 2.2 中删除。
请安装 mysql gem 并重试：gem install mysql。
耙中止！dlopen(/Library/Ruby/Gems/1.8/gems/mysql-2.9.0/lib/mysql/mysql_api.bundle, 9)：库未加载：libmysqlclient.18.dylib 引用自：/Library/Ruby/Gems/1.8 /gems/mysql-2.9.0/lib/mysql/mysql_api.bundle 原因：找不到图像 - /Library/Ruby/Gems/1.8/gems/mysql-2.9.0/lib/mysql/mysql_api.bundle

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T18:49:36.383

将 mysql lib 路径添加到`.bash_profile`并`.profile`修复它：

```
export DYLD_LIBRARY_PATH=/usr/local/mysql/lib:$DYLD_LIBRARY_PATH 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-03T18:09:03.950

在带有 rvm ruby​​1.8.7 和 rails 2.3 的 Mavericks 上，我必须安装 mysql gem

```
gem install mysql -- --with-mysql-dir=/usr/local/mysql 
```

然后我需要从 Slinky 的答案中导出添加到我的 .zshenv

```
export DYLD_LIBRARY_PATH=/usr/local/mysql/lib:$DYLD_LIBRARY_PATH 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-02T23:57:07.270

问题 - ！！！捆绑的 mysql.rb 驱动程序已从 Rails 2.2 中删除。请安装 mysql gem 并重试：gem install mysql。耙中止！没有要加载的文件——mysql/mysql_api

解决步骤 -

1) gem install mysql --with-mysql-dir= Path_to_MySQL_root_folder

2）运行此命令将显示一个下载链接，如下所示 - [http://dev.mysql.com/get/Downloads/Connector-C/mysql-connector-c-noinstall-6.0.2-win32.zip/from/挑选](http://dev.mysql.com/get/Downloads/Connector-C/mysql-connector-c-noinstall-6.0.2-win32.zip/from/pick)

3) 将此下载文件夹中的 lib/libmysql 复制到 C:/Ruby/bin

# c# - 为什么在沙盒插件中从 GAC 程序集创建 List<> 失败？

> ID：13632209
> 
> 赞同：1
> 
> 时间：2012-11-29T18:22:41.273
> 
> 标签：c#, dynamics-crm-2011

我正在尝试编写一个 MS Dynamics CRM 2011 插件以在沙盒模式下运行，但使用来自 GAC 程序集的类。我遇到了一个问题，即从 GAC 程序集创建类型列表会产生错误，我不明白为什么。生成的异常属于类型`System.MethodAccessException`并具有以下消息：

```
Attempt by method 'IsolatedModeExceptionsTestingPlugin.Plugin.Execute(System.IServiceProvider)' to access method 'System.Collections.Generic.List`1<System.__Canon>..ctor()' failed. 
```

**有人可以解释为什么这会失败，以便我可以修改我的代码/环境来解决失败吗？**

我在下面的一组简单的类中重新创建了场景。

我在运行 Dynamics 2011 Rollup 7 的 Win2008 R2 服务器上运行了测试，然后在 Rollup 11 上再次运行了测试。我的两个程序集都是针对 .Net 4.0 构建的，并且 Dynamics IIS AppPool 是为 .Net 4 配置的。两个程序集都已签名（使用相同的密钥对）。

请注意，如果我将插件的隔离模式从“沙盒”更改为“无”，插件可以正常工作——只有在沙盒模式下才会发生这种情况，这意味着在生成 List<> 时会出现某种安全违规。另请注意，创建一个 List（或其他 .Net 类型）可以正常工作，就像在我自己​​的程序集中创建一个 List<> 类一样。它似乎特定于 GAC 的程序集。

我在 GAC 中放置的程序集名为“ClassLibrary1”，仅包含一个类：

```
namespace ClassLibrary1
{    
    public class MyCustomAssemblyClass
    {
        public string GetAString()
        {
            return "The current time is " + System.DateTime.Now.ToString();
        }
    }
} 
```

我通过在服务器（安装了 Windows SDK v7.1）上运行以下命令将它放在 GAC 中：`"c:\program files\Windows SDKs\Windows\v7.1\bin\NETFX 4.0 Tools\gacutil.exe" -i classlibrary1.dll`

我的插件代码如下所示：

```
using System.Collections.Generic;
using System.Text;
using System;
using ClassLibrary1;
using Microsoft.Xrm.Sdk;

namespace IsolatedModeExceptionsTestingPlugin
{
    public class Plugin : IPlugin
    {
        public void Execute(IServiceProvider serviceProvider)
        {            
            var pluginExecutionContext = (IPluginExecutionContext) serviceProvider.GetService(typeof (IPluginExecutionContext));
            var tracingService = (ITracingService) serviceProvider.GetService(typeof (ITracingService));

            try
            {
                tracingService.Trace("Entered Plugin.Execute()");
                tracingService.Trace(string.Format("Isolation Mode: {0}, Mode: {1}\n\n",
                                                   pluginExecutionContext.IsolationMode,
                                                   pluginExecutionContext.Mode));

                try
                {                    
                    tracingService.Trace(string.Format("*** Creating List<{0}>", typeof (MyCustomAssemblyClass)));
                    var list = new List<MyCustomAssemblyClass>(); //XXX Exception thrown here!!
                    tracingService.Trace("    Success");
                }
                catch (Exception ex)
                {                    
                    tracingService.Trace(GetExpectionTraceMessage(ex));
                    throw new Exception("An error occurred in one of the tests", ex);
                }
                finally
                {
                    tracingService.Trace("*** Finished TestListOfGACClassCxtr\n\n");
                }

                //This will force a failure to allow viewing of the trace file
                //    throw new Exception("TEST SUCCESSFULL");                

            }           
            finally
            {
                tracingService.Trace("Exiting Plugin.Execute()");
            }
        }

        private string GetExpectionTraceMessage(Exception ex)
        {
            var message = new StringBuilder();
            message.AppendFormat("EXCEPTION: {0}\n", ex.GetType());
            message.AppendFormat("\tMessage: {0}\n", ex.Message);
            message.AppendFormat("\tStack: {0}\n", ex.StackTrace);

            if (ex.InnerException != null)
            {
                message.AppendLine("---- INNER EXCEPTION ----");
                message.AppendLine(GetExpectionTraceMessage(ex.InnerException));
            }

            return message.ToString();
        }

    }
} 
```

当实体更新时，我将插件注册为在数据库中以沙盒模式运行。执行插件后，我通过“业务流程错误”对话框的“下载日志文件”获得以下输出：

```
Unhandled Exception: System.ServiceModel.FaultException`1[[Microsoft.Xrm.Sdk.OrganizationServiceFault, Microsoft.Xrm.Sdk, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35]]: Unexpected exception from plug-in (Execute): IsolatedModeExceptionsTestingPlugin.Plugin: System.Exception: An error occurred in one of the testsDetail: 
<OrganizationServiceFault xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/xrm/2011/Contracts">
  <ErrorCode>-2147220956</ErrorCode>
  <ErrorDetails xmlns:d2p1="http://schemas.datacontract.org/2004/07/System.Collections.Generic" />
  <Message>Unexpected exception from plug-in (Execute): IsolatedModeExceptionsTestingPlugin.Plugin: System.Exception: An error occurred in one of the tests</Message>
  <Timestamp>2012-11-29T18:09:26.5671559Z</Timestamp>
  <InnerFault i:nil="true" />
  <TraceText>

[IsolatedModeExceptionsTestingPlugin: IsolatedModeExceptionsTestingPlugin.Plugin]
[6d245108-b638-e211-bae5-000c29d5e4ba: IsolatedModeExceptionsTestingPlugin.Plugin: Update of new_insurancequote]

Entered Plugin.Execute()
Isolation Mode: 2, Mode: 0

*** Creating List&lt;ClassLibrary1.MyCustomAssemblyClass&gt;
EXCEPTION: System.MethodAccessException
    Message: Attempt by method 'IsolatedModeExceptionsTestingPlugin.Plugin.Execute(System.IServiceProvider)' to access method 'System.Collections.Generic.List`1&lt;System.__Canon&gt;..ctor()' failed.
    Stack:    at IsolatedModeExceptionsTestingPlugin.Plugin.Execute(IServiceProvider serviceProvider)

*** Finished TestListOfGACClassCxtr

Exiting Plugin.Execute()

</TraceText>
</OrganizationServiceFault> 
```

作为参考，.Net 框架似乎使用 System.__Canon 类型在 JIT 中为所有泛型创建可重用代码。见： http: [//www.marklio.com/marklio/PermaLink,guid,1fa8a82b-a6d6-4fbb-8cca-5e352ff3c9e9.aspx](http://www.marklio.com/marklio/PermaLink,guid,1fa8a82b-a6d6-4fbb-8cca-5e352ff3c9e9.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:23:34.063

隔离模式模仿 CRM Online。在 CRM Online 中，如果不检查低级别原因，您就无法从根本上添加到 GAC，我相信这就是您的代码失败的原因。

（因此我猜这`List<>`是一个红鲱鱼，即使实例化 GACed 类型的单个实例也会失败）

## 编辑

GAC 默认授予程序集完全信任。在沙盒/隔离模式下运行的插件在部分信任下运行 - 这就是为什么我不相信你`MyCustomAssemblyClass`在沙盒模式下运行时能够实例化（这就是我认为`List<>`无关紧要的原因）。

从下面我自己的评论中 - 我认为这种总结：

> 我认为这个问题从根本上是一个提升问题——即是否应该信任一个部分受信任的程序集（即插件，它的功能受到限制）来运行一个完全受信任的插件（它可以做任何事情）。如果允许部分信任的代码运行完全信任的代码，这似乎是合乎逻辑的，它将有效地提升部分信任的程序集的权限，从而产生漏洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:28:53.447

查看[此链接](http://msdn.microsoft.com/en-us/library/system.security.allowpartiallytrustedcallersattribute%28v=vs.100%29.aspx)并尝试将允许部分受信任的调用者属性添加到您的 GAC。

最终，CRM 使用 .NET 4 中的 AppDomain 类（[AppDomain 上的链接](http://msdn.microsoft.com/en-us/library/2bh4z9hs%28v=vs.100%29.aspx)）并使用 AppDomain 运行沙盒插件。

我面临的挑战是，我找不到任何 Microsoft 文档清楚地说明 CRM 沙盒服务将哪些规则应用于它为执行插件而创建的 AppDomain。这使得在 GAC 中配置一个类以使其可由沙盒代码调用基本上是反复试验。

# java - 出于某种原因，移动球非常参差不齐？

> ID：13632223
> 
> 赞同：-1
> 
> 时间：2012-11-29T18:23:55.763
> 
> 标签：java, slick2d

“我正在制作一个简单的游戏，其中一部分我希望有敌人会攻击你。首先，我需要让它们移动 在这段代码中，“敌人”只是一个球。我使用一个名为“mob1”的对象作为球的位置，这样以后我就可以拥有多个。

（顺便说一句，我正在使用 Slick- 以防万一改变任何东西）

我的游戏状态-

```
 package Worlds.World1;

import org.lwjgl.input.Mouse;
import org.newdawn.slick.Animation;
import org.newdawn.slick.Color;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.Image;
import org.newdawn.slick.Input;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.state.BasicGameState;
import org.newdawn.slick.state.StateBasedGame;

import Main.SimpleMob;

public class World1A extends BasicGameState{
    String mousePosition;
    Image world;
    Animation player, playerLeft, playerRight;
    int[] duration = {200,200};
    float playerX;
    float playerY;
    float WorldX;
    float WorldY;
    float PlayerVisibleScreenX;
    float PlayerVisibleScreenY;
    String MovementDirection;
    SimpleMob mob1 = new SimpleMob();
    public World1A(int state){
    }

    public void init(GameContainer gc, StateBasedGame sbg) throws SlickException{
        Image [] WalkingLeft = {new Image("res/Sprites/buckysLeft.png"),new Image("res/Sprites/buckysLeft.png")};
        Image [] WalkingRight = {new Image("res/Sprites/buckysRight.png"),new Image("res/Sprites/buckysRight.png")};

        playerLeft = new Animation(WalkingLeft, duration, false);
        playerRight = new Animation(WalkingRight, duration, false);
        player = playerRight;
        playerX = 0;
        playerY = 0;
        WorldX = 0;
        WorldY = 0;
        world= new Image("res/WorldImages/WorldBackGround.png");
        mousePosition="null";
        MovementDirection = "Not Moved Yet";
    }

    public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{
        world.draw(WorldX, WorldY);
        g.setColor(Color.white);
        g.fillOval(WorldX+mob1.getX(), WorldY+mob1.getY(), 50, 50);
        g.fillRect(WorldX, WorldY+300, 500, 10);
    }

    public void update(GameContainer gc, StateBasedGame sbg, int delta) throws SlickException{
        mob1.autoEveryThing(delta, playerX, playerY);
        int posX = Mouse.getX();
        int posY = Mouse.getY();
        mousePosition = "X: " + posX + "\nY: " + posY;

        Input input = gc.getInput();
        if(input.isKeyDown(Input.KEY_LEFT)){
            WorldX += delta * 0.1f;
            MovementDirection = "Left";
            player = playerLeft;
        }else if(input.isKeyDown(Input.KEY_RIGHT)){
            WorldX -= delta * 0.1f;
            MovementDirection = "Right";
            player = playerRight;
        }else{
            MovementDirection = "Not Moving";
        }
    }

    //DO NOT CHANGE
    public int getID(){
        return 2;
    }

} 
```

还有我的暴徒班——

```
 package Main;

import org.newdawn.slick.Graphics;

public class SimpleMob {

    //This class shall be used as an object creator. This will randomly move a graphic around, near to a player
    private float MobX;
    private float MobY;
    private int AmountMoved = 0;
    private boolean MoveRight = true;
    private boolean MoveLeft;
    private boolean PlayerNear = false;
    public boolean PlayerDetected = false;

    //Used to find the mobs X
    public float getX(){
        return MobX;
    }

    //Used to find the mobs Y
    public float getY(){
        return MobY;
    }

    //Used to set the mobs X
    public void setX(float X){
        MobX = X;
    }   

    //Used to set the mobs Y
    public void setY(float Y){
        MobY = Y;
    }

    //Used to simply move the mob on its X co-ords
    public void moveX(int delta){
        MobX += delta*0.1f;
    }

    //Used to simply move the mob on its Y co-ords
    public void moveY(int delta){
        MobY += delta*0.1f;
    }

    public void autoEveryThing(int delta, float playerX, float playerY) {

        System.out.println(AmountMoved);
        // If the player has not been spotted the NPC/Mob will move left and
        // right by 100 Pixels.
        if (MoveRight == true) {
            AmountMoved++;
            MobX += delta * 0.1f;
            if (AmountMoved == 100) {
                MoveRight = false;
                MoveLeft = true;
                AmountMoved = 0;
            }
        }
        if (MoveLeft == true) {
            MobX -= delta * 0.1f;
            AmountMoved++;
            if (AmountMoved == 100) {
                MoveRight = true;
                MoveLeft = false;
                AmountMoved = 0;
            }
        }
    }

} 
```

对此的任何帮助都会很好，（或者如果有更正确/更简单的方法来制作小怪）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:27:24.277

问题可能出在您的`System.out.println(...)`电话中`autoEveryThing(...)`。这在一秒钟内完成了很多次，输出到控制台是人们可以做的最密集的事情之一。

# php - PHP文件编码格式本地与上传

> ID：13632226
> 
> 赞同：0
> 
> 时间：2012-11-29T18:24:02.617
> 
> 标签：php, encoding

这是我在在线部署应用程序时已经遇到过两次的问题，并且我已经偶然解决了两次，但仍然不了解导致问题的原因。这是第三次，它仍然困扰着我。

1.  我在本地使用 PHP 文件和 Notepad++（文件以 UTF-8 编码，没有 BOM 编码 btw）。这里一切正常（配置：easyPHP），没有 PHP 错误。

2.  将文件上传到服务器后，一些文件给了我基本的 PHP 错误，例如第 1 行中的 *unexpected T_FUNCTION*，尽管我的代码中没有错误。

3.  幸运的是，我碰巧用 Windows 记事本打开了该文件，这给了我一个提示：字符之间没有空格或换行符（这就是 PHP 给我错误的原因）。总结一下：

**使用 Notepad++ 打开的文件：**

```
<?php
// Comment
function() { etc... (rest of the file)... 
```

**用windows记事本打开的文件：**

```
<?php//comment function(){ ... which causes error online (but not on EasyPHP) 
```

我到处查看并尽我所能（在记事本++中添加换行符，转换为 ANSI/UTF8 等，但文件似乎已损坏或其他东西）。这不是我复制粘贴的脚本或任何东西，我通过在 Windows 中添加一个新的 *.txt 文档并将其重命名为 *.php 来创建我的所有文件。

我的问题：

*   为什么 Notepad++ 和 windows 记事本会显示不同的换行符？是编码问题吗？Windows/UNIX 以不同方式解释文件？
*   为什么这可以在我的计算机上使用简单的 PHP 而不是在线工作？

提前感谢您的任何回答，如果没有，请提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:28:57.550

如果您通过 FTP 将文件传输到生产服务器，那么问题可能是某些 ftp 客户端进行自动换行符转换。检查使用不同的 ftp 客户端传输文件或调整其设置以禁用自动 ascii 文本换行符转换。

**更新：**
是的，可能是您的文件以 ascii 模式而不是二进制传输，因此解决方案是将 Filezilla 设置为以二进制模式传输文件，请参见此处的实际设置[https://stackoverflow.com/a/555003/352672](https://stackoverflow.com/a/555003/352672)

# java - 防止对 Bukkit 中的指定玩家造成伤害？

> ID：13632229
> 
> 赞同：5
> 
> 时间：2012-11-29T18:24:16.987
> 
> 标签：java, minecraft, bukkit

我正在尝试制定一个命令，让您可以让任何玩家都无懈可击——即上帝模式。

到目前为止，这是我的代码（尽管都是样板文件）

```
@EventHandler
public void onEntityDamage(EntityDamageEvent event) {
    if(event.getEntity() instaceof Player) {
        if(godModed.containsKey(event.getPlayer())) {
            //This is where I need the code to go - something to cancel the damage.
        }
    }
} 
```

`godModed`是一个`HashMap godModed`包含所有当前处于上帝模式的玩家。当他们关闭上帝模式时，他们会从地图中移除。

该命令本身运行良好 - 我目前让它向触发它的玩家发送消息，如果玩家尚未开启，我还让它将玩家添加到 godModed。但是，我无法弄清楚如何真正防止对玩家造成伤害。我想完全阻止它，而不仅仅是事后治愈它们；`onEntityDamage`虽然后者可能会奏效，但如果其他 mods试图触发 Godmoded 玩家不应该遇到的事情，它也可能导致无法预料的后果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:57:52.777

你会想要使用`event.setCancelled(true)`.

如果您当前的代码正在运行，您必须使用旧的事件 API（和旧版本的 bukkit），我建议您升级 bukkit。使用[新事件 API](http://wiki.bukkit.org/Event_API_Reference)的代码如下所示：

```
@EventHandler
public void onPlayerDamage(EntityDamageEvent event) {
    if(godModed.containsKey(event.getEntity())) {
        event.setCancelled(true);
    }
} 
```

# c# - 单步执行参考中的代码时缺少 Intellisense？

> ID：13632230
> 
> 赞同：1
> 
> 时间：2012-11-29T18:24:17.450
> 
> 标签：c#, intellisense

我正在 VS 2012 Express 中调试 C# 项目。通常，当我单步执行代码时，我可以在即时窗口中使用 Intellisense。但是当我从引用的 DLL 中进入一个函数时，Intellisense 不起作用。更重要的是，我能够编辑 DLL 的 .cs 文件中的代码，而通常如果我在调试时尝试编辑代码，我会收到一条错误消息，告诉我在调试时不允许编辑。

这是 VS 2012 Express 的正常行为吗？

编辑：我只是尝试删除并重新添加引用，但这并没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:29:02.463

我认为您需要确保`Build Action`.cs 文件的 设置为`Compile`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:23:33.923

自从我发布了这篇文章后，我遇到了其他情况，我可以在单步执行来自引用的 DLL 的函数时使用 Intellisense。这似乎不是一致的行为，可以通过重新启动 Windows 来解决。如果这种行为再次出现并且我注意到一种模式，我将重新发布一个类似的问题。

# c - 指向类型而不是变量名的指针？

> ID：13632231
> 
> 赞同：5
> 
> 时间：2012-11-29T18:24:18.197
> 
> 标签：c, pointers

> **可能重复：**
> [在 C 中，声明指针的正确语法是什么？](https://stackoverflow.com/questions/3280729/in-c-what-is-the-correct-syntax-for-declaring-pointers)
> [正确的 C 指针表示法](https://stackoverflow.com/questions/4071068/correct-c-pointer-notation)

和有什么区别

```
int* x 
```

和

```
int *x 
```

（如果存在）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T18:26:01.417

他们都一样。唯一的区别是您不能以这种方式声明许多变量：

```
int* x, a, b; //a and b are not pointers

int *x, *a, *b; //all are pointers 
```

我使用第一种表示法，对我来说它表明变量具有指针类型，而不是指针本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:25:15.873

没有区别。在这两种情况下，您都会得到一个 int 指针。

更喜欢第二个的原因是当您一次声明多个变量时：

```
int *str, *foo;
int* str, foo; 
```

这两行是不同的，第一行声明了两个指向 int 的指针，而第二行声明了一个指向 int 的指针和一个 int 类型变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T18:25:29.010

这与指针的定义相同。两者都是指向 int 的指针

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T18:25:40.513

在这种情况下，空格对编译器没有意义。但是，有些人可能会将其解释为不同的含义（例如什么指向什么）。在我看来，这不是一件好事（因为空格不应该被考虑在内）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T18:25:56.923

完全没有区别。

在这两种情况下，这些都是指向`int`

`*`与标识符而不是类型相关联

只是为了清晰的视觉最佳实践，在`type`和之间留出空间`*`。

`int *p;`

例如，如果你写

`int *p,q;`手段`p`是 a`pointer`但是`q`是`int`。它表示 * 与标识符名称相关联

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-29T18:26:06.410

它们是相同的，但是在声明多个变量时您必须小心：

```
 int* x, y; // x is a int*, while y is just an int
 int *z, *w; // both z and w are int* 
```

# django - django中的静态文件

> ID：13632232
> 
> 赞同：1
> 
> 时间：2012-11-29T18:24:18.640
> 
> 标签：django, static

我无法让我的静态文件工作。我花了 6 个小时查看有关此主题的许多帖子，但我仍然做错了什么。请帮忙。这是我的设置：

```
projectfiles
|
|-----myproject
|     |
|     |-----static
|     |     |
|     |     |-----css
|     |     |-----js
|     |-----__init__.py
|     |-----settings.py
|     |-----urls.py
|     |-----wsgi.py
|
|-----myapp
|
|-----templates

settings.py
import os
SITE_ROOT = (os.path.realpath(os.path.dirname(__file__))).replace('\\','/')
DEBUG = True
MEDIA_ROOT = (os.path.join(SITE_ROOT, '/static')).replace('\\','/')
MEDIA_URL = '/static/'
STATIC_ROOT = ''
STATIC_URL = ''
STATICFILES_DIRS = ()
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    'django.contrib.staticfiles.finders.DefaultStorageFinder',
    )

urls.py
urlpatterns = patterns('',
    (r'^myurl/$', myview),
)
from myproject.settings import DEBUG
if DEBUG:
    urlpatterns += patterns('', (r'^static/(?P<path>.*)$', 'django.views.static.serve',

                                 {'document_root': 'static'}))

mytemplate.html
...
<head>
<link src="css/mycss.css" rel="stylesheet" type="text/css"/>
... 
```

该应用程序运行良好，但与我的 css 或 javascripts 没有连接。我错过了什么？

任何帮助将不胜感激。

```
Update:

`STATIC_ROOT='C:/path/to/myproject/static/' 
STATIC_URL='/static/' 
TEMPLATE_CONTEXT_PROCESSORS=('...static', ) 
STATICFILES_DIRS=('C:/absolute/path/to/myapp/static',) 
STATICFILES_FINDERS=('...FileSystemFinder','...AppDirectoriesFinder',) 
INSTALLED_APPS = (...,'django.contrib.staticfiles',) 

#does not work with or without this: 
urlpatterns += staticfiles_urlpatterns() 
#views now rendered like this: 
myview(request): 
... 
    return render_to_response('template.html',{'a': a},context_instance =RequestContext(request)) 

#template.html 
<link src="{{STATIC_URL}}css/mycss.css"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:32:09.780

MEDIA_ROOT 和 MEDIA_URL 随着 django 1.3 的 staticfiles 应用程序的出现不再用于提供静态内容，所以我建议使用 STATIC_URL 和 STATIC_ROOT 来配置静态文件。

```
#settings.py

STATIC_ROOT = "Absolute path to your static dir"
STATIC_URL  = "/static/"

#views:Make sure to pass RequestContext to the template.

def view_to_display_the_page(request)
    ...
    return render_to_response("templae.html", context_instance = template.RequestContext(request))

#template:

<script src="{{STATIC_URL}}path_your_static_file_relative_to_static_dir"></script>

#urls.py: Make sure to add url patterns for static file
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
urlpatterns += staticfiles_urlpatterns() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:18:25.757

```
# RTFD: https://docs.djangoproject.com/en/dev/howto/static-files/

# Points to a directory for storing file uploads. Should be located outside of your package sources, i.e. your 
MEDIA_ROOT = os.path.join(SITE_ROOT, '..', 'media')
MEDIA_URL = '/media/'

# Points to the directory your static asset sources get
# collected/precompiled for distribution. Should be located outside 
# of your package sources. If STATICFILES_DIRS includes STATIC_ROOT, 
# an exception is raised.
STATIC_ROOT = os.path.join(SITE_ROOT, '..', 'static')
STATIC_URL = '/static/'

# Can be left empty if your static sources are on paths discoverable by
# STATICFILES_FINDERS. This is not true in your case, so configure the path.
STATICFILES_DIRS = [os.path.join(SITE_ROOT, 'static')]

# Use this to get the STATIC_URL path as a context variable in your templates
TEMPLATE_CONTEXT_PROCESSORS = (
    # ...
    'django.core.context_processors.static',
)

<!--And make use of it-->
<script src="{{STATIC_URL}}js/lib/jquery.js"></script>

# Run this as a test preflight to see if you've configured the settings correctly
# $ python manage.py --collectstatic
#
# Make sure you don't get any errors.

# Make sure you've hooked the static files app URLs into your main URL modules patterns
from django.conf import settings
from django.conf.urls import staticfiles_urlpatterns, static

urlpatterns = (patterns('',
    # ...
) + staticfiles_urlpatterns()
  + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T01:07:22.793

使用 Django 1.6 版；STATIC_URL 不能是词干；不知道什么时候改变了。

以下类型的规范`settings.py`给出了 404：

```
STATIC_URL = '/static/' 
```

这有效：

```
STATIC_URL = 'http://localhost:8000/static/' 
```

# coldfusion - CF - 环比与查询

> ID：13632246
> 
> 赞同：5
> 
> 时间：2012-11-29T18:25:04.257
> 
> 标签：coldfusion, qoq

我有一个概念，即调用查询查询比从数据库查询更快，因为减速是在 cf 和 db 之间的通信。这是真的。

这是否意味着循环内的 QoQ 是可接受的，而循环内的查询则不是。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-29T18:27:33.167

完整的 DBMS 针对处理 [适当编写的] 查询进行了高度优化，并且在现代网络上，开销不会很大。

QoQ 是使用嵌入式数据库执行的，该数据库可能优化也可能不优化，具体取决于正在执行的查询类型。

因此，如果数据库位于另一台机器上，通过慢速网络，则在某些情况下，QoQ 可能不那么慢。如果您要访问数据库，理想情况下，您希望在一个请求中适当地处理所有内容，并避免循环中的往返和重新处理。

当然，QoQ 的一大好处是您可以使用它来处理并非来自数据库的数据——例如 cfdirectory 的结果或已转换为查询的 CSV 文件。

ColdFusion 通过手动解析 SQL 然后循环遍历记录集来执行 QoQ。这使得它对于简单的操作很有效，例如具有匹配键的两表连接，但对于复杂组合（连接使用多个列和/或不是直接的 a=b 比较）效率较低。（[这里有简要信息](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec0e4fd-7ff0.html#WSc3ff6d0ea77859461172e0811cbec0e4fd-7fb8)。）

Railo 使用[H2](http://www.h2database.com/html/main.html)。H2 声称速度很快，他们的网站提供了一些[速度比较](http://h2database.com/html/performance.html)，表明它比 Derby 和 MySQL 更快 - 但当然最好寻找独立的第三方测试，更不用说这些测试不能保证 QoQ性能（例如，我怀疑它不会有索引）。

一般来说：在没有首先进行性能测试以确定您确实需要提高性能并能够客观地确定哪种方法实际上更快之前，**不要做出任何艰难的决定。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T18:47:24.990

这取决于您的 Coldfusion 机器与数据库服务器相比的功能，以及您要解决的问题。

对于小型数据集，QofQ 通常会非常快，因为这一切都发生在您的服务器内存中。但是，如果您尝试在大型数据集上使用 QofQ，由于在内存中保存和处理该数据所涉及的开销，您的服务器将开始出现问题。

数据库查询在大型数据集上的性能通常优于 QofQ，因为*这就是它们的设计目的*。数据库擅长快速处理大量数据。为此使用它们。

如果您正在考虑从数据库中检索大型结果集并使用 QofQ 对其进行解析，那么这可能是错误的做法。而是让数据库为您减少结果。如果您经常向数据库服务器询问此信息，请将其缓存在您的服务器上。

请记住，这都是主观的，很大程度上取决于您的特定问题、负载、数据库和服务器功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T18:45:32.237

我发现使用 aq OF q 比从查询中提取数据库要快得多。

例如，我虔诚地在销售报告中使用 QoQ。我有一份销售报告，将在第一季度的日期范围内提取，它可能显示销售代理的销售数据，也可能显示销售产品的销售数据。

在我的数据库中，相同的表/字段将用于出现在同一报告中的两个部分。

我根据日期范围在主表中查询我的数据，然后查询这些结果以构建报告的每个部分。

我发现这种方法在具有本地和远程数据库的两台服务器上都更快。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-29T18:48:00.220

使用 QofQ 的次数

*   当您有两个数据源并且出于各种原因时，您可以使用链接服务器
*   当数据通过 WDDX 或 JSON 传入并且您必须进行连接时
*   何时将数据存储在缓存查询中并对缓存查询执行 QofQ 是可行的
*   当您必须将 directoryList() 的结果与数据库结合时

不使用 QofQ 的时间

*   当您可以将数据加载到结构中时
*   在进行大量迭代时
*   当源数据集之一非常大时
*   当您需要进行左、右或外连接时

有关更多详细信息，请参阅

[http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec0e4fd-7ff0.html](http://help.adobe.com/en_US/ColdFusion/9.0/Developing/WSc3ff6d0ea77859461172e0811cbec0e4fd-7ff0.html)

这是针对 CF 9 的，但自 CF 6 以来 QofQ 大致相同

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T17:16:45.943

老兄！只是使用了cachedwithin。

# c++ - URL 字符串中的 C++ wininter.h '/'

> ID：13632247
> 
> 赞同：-1
> 
> 时间：2012-11-29T18:25:06.113
> 
> 标签：c++, visual-studio-2010, url, web-scraping

我正在尝试`wininet.h`在 Visual Studio 2010 Express 中使用 C++ 和工具加载 HTML 代码。要创建 URL 字符串，我编写以下内容：

```
HINTERNET hConnect =::InternetConnect(
    hInternet, 
    _T("stackoverflow.com"), 
    INTERNET_DEFAULT_HTTP_PORT, 
    NULL, 
    NULL, 
    IINTERNET_SERVICE_HTTP, 
    0, 
    1u
); 
```

当 URL 只是一个没有路径或协议的域时，该程序运行良好，但是当我将 URL 从 更改为 时`stackoverflow.com`，`http://stackoverflow.com/questions`突然我的代码不再工作了。

`HttpSendRequest(hRequest, NULL, 0, NULL, 0)`只是返回假。

我已经在我的参数上尝试了许多不同的变化，并搜索了谷歌，但我只是卡住了。谁能提供一些见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:55:44.937

的[文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa384363%28v=vs.85%29.aspx)`InternetConnect`告诉我，它用于建立与服务器的 FTP 或 HTTP 连接 - 而不是下载 URL 。

因此，该`lpszServerName`参数[记录](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa384363%28v=vs.85%29.aspx)为：

> 指向以空字符结尾的字符串的指针，该字符串指定 Internet 服务器的主机名。或者，该字符串可以包含站点的 IP 号，采用 ASCII 点分十进制格式（例如，11.0.1.45）。

因此，您必须使用服务器的主机名或 IP 地址，而不能使用 URL，因此当您这样做时它不起作用。

`/questions`您的 URL ( )的路径部分应用作您使用调用返回的调用 ( [docs](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa384233%28v=vs.85%29.aspx) )的`lpszObjectName`参数。`HttpOpenRequest``hConnect``InternetConnect`

# vba - 在 vba 的 Outlook 邮件中读取 Excel 表格

> ID：13632251
> 
> 赞同：1
> 
> 时间：2012-11-29T18:25:18.530
> 
> 标签：vba, outlook

我正在尝试读取邮件正文中的表格并将其保存在 csv 文件中（我在下面附加了一个代表邮件内容的 html 示例）。我关注了一篇相关文章：[如何使用 vba 读取粘贴在 Outlook 消息正文中的表格？](https://stackoverflow.com/questions/8061350/how-to-read-table-pasted-in-outlook-message-body-using-vba)但问题是它通过它的单元格而不是它的行来分隔表格，所以我没有得到 17 行一个标题，而是得到了 18 x 5 = 90 个数组元素...我试图从拆分选项中更改分隔符“vbCrLf”到“vbLf”，“vbCr”，Char（10）......但它们都不起作用......任何人都知道为什么拆分没有将空格分隔符与新行区分开来？这似乎是阅读邮件正文中表格的最简单方法，但如果您有任何其他建议，我也会考虑！

这是示例链接：[示例](https://www.dropbox.com/s/0jksxlx764gfx26/sample.htm)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T14:30:47.387

如图所示，我的例程在*Sample.htm*上运行良好。我将首先解释这张图片，然后给出两个健康警告。该代码超过了 30,000 个字符的堆栈溢出限制，因此我无法包含它。如果这很有趣，请查看我的个人资料，您会在其中找到电子邮件地址。给我发电子邮件，我会把代码发给你。

![宏的输出](../Images/a698cacbdc2580000229d83e5dc22d09.png)

**图像和参差不齐的数组的解释**

此图像背后的例程旨在从网页中的表中提取数据并将其写入单个参差不齐的数组。图像中的工作表是通过将参差不齐的数组复制到其中而创建的。我使用象牙色背景来显示哪些单元格位于参差不齐的阵列中。（注意：参差不齐的数组是其中行具有不同数量的列的数组。）

*Sample.htm*包含一个简单的表格。我不会从 Html 的复杂性中猜到这一点。

我的例行程序忽略`<table>`了`</table>`. 在`<table>`它内部`</table>`识别表格的元素。`<td>`单元格 ( to )中的任何空格都会`</td>`变成符合 Html 规则的单个空格。A`<p>`替换为两个换行符，a 替换为`<br>`一个换行符。除表格元素外的任何标签都将被丢弃，因此：`Normal <b>bold</b> <i>italic</i>`变为`Normal bold italic`. 属性被忽略。完成了一个`<table>`到`</table>`，例程寻找另一个。该例程处理嵌套表。字符实体（例如“&”）被转换为等效的 unicode 字符（例如“&”）。该例程不处理表定义中的错误；一切都必须正确嵌套，没有省略结束标签。

*不规则数组的第 1 行是Sample.htm*中第一个（仅在本例中）表的标题。它的内容是：

```
1  20  5  0  0  2 
```

1 表示这是一级表。嵌套在该表的单元格中的表将是二级。嵌套在二级表中的表将是三级，依此类推。

有 20 行，每行最多 5 列。第一个零表示没有标题部分。第二个零表示没有页脚部分。这两个意味着第一个（并且仅在这种情况下）主体部分从不规则数组的第 2 行开始。如果有多个正文部分，则在 2 之后会有其他行号。

不规则数组的下 20 行是表的数据行，每行最多包含 5 列。

在第 2 行中，只有 A 列是象牙色。Html 表的那一行只包含一个单元格。该单元格有一个`colspan`属性，因此该单元格跨越 Html 表的所有五列。属性的存在和值`colspan`不包括在参差不齐的数组中，尽管可以从缺少单元格中推断出a`colspan`或属性的存在。`rowspan`警告：此例程向调用例程隐藏了 Html 的复杂性。它并没有掩盖表格的复杂性。幸运的是，您的表格很简单，只有一个`colspan`属性。

Html 表的第 2 行 - 参差不齐的数组和工作表的第 3 行 - 有五个空单元格。

其余的单元格几乎与它们在参差不齐的阵列中出现的完全相同。由于 Html 中单元格定义的复杂性，换行符已成为数据中的空格。单元格数据位于数据`<p>`内。我已将定制代码添加到调用例程中以丢弃空格和换行符。`</p>``LineFeed LineFeed`

**健康警告 1**

下面的例程并不完全符合您的要求。该代码在 Excel 工作簿中进行了测试，Sample.htm 与工作簿位于同一文件夹中。您可以创建一个例程以将所需消息的 Html 正文保存为 Html 文件，或者您可以将此代码移动到 Outlook 并将其调整为从 Outlook 写入 Excel。关于这两个选项，都有一些问题和编码的答案。我可以推荐其他答案供您学习，但我认为这个答案足够大。

**健康警告 2**

下面的代码包括：

*   我为您编写的一个小型定制宏来演示我的例程。
*   一个由 Dick Kusleika 编写并在 Stack Overflow 上发表的例程，我再好不过了。
*   我为我写的一些套路。

健康警告是针对我为我编写的例程。

我不经常使用这些例程，所以评论是为了提醒我如何使用它们。它们并非旨在帮助其他人了解他们的工作。

我将`Debug.Assert False ' Not tested`代码放在每条路径的顶部，然后在测试该路径时将这些语句注释掉。如果您请求代码，您将看到我没有测试所有路径。除了一个例外，这些例程适用于我希望解码的网页。一个例外是作者通过将表格嵌套到五个深度来炫耀的网站。不幸的是，他们把他们`<td>`的 s 和`</td>`s 搞混了，我的代码没有处理无效的 Html。我在运行我的例程之前更正了网页源代码，因为这对我来说是最简单的。当我对更多的网页感兴趣时，我会测试更多的代码，但因为代码是给我的，所以我不寻找测试用例。如果代码对您不利，请将 html 文件通过电子邮件发送给我，我会看看我能做什么。

我编写这些例程是因为它们处理 Excel 无法处理的复杂 Html。我建议您在*Sample.htm*上尝试 Excel 。真正的 Html 非常简单，因此如果 Excel 可以忽略格式，它可能能够导入此文件。

# css - 我不了解跨浏览器的 CSS 上边距行为

> ID：13632253
> 
> 赞同：0
> 
> 时间：2012-11-29T18:25:22.480
> 
> 标签：css, firefox, google-chrome

> **可能重复：**
> [Firefox 正文边距错误？](https://stackoverflow.com/questions/13070630/firefox-body-margin-bug)

我之前一直被垂直填充问题所困扰，并认为当我解决它时我理解了这一切。但又一次，我被困住了......

我正在玩一些现有的主题，看看它们是如何工作的，并遇到了一个问题，即*Win7*上的*Firefox 17*和*Google Chrome 23*之间存在重大不一致。

 *我已将代码缩小到下面的小片段。（我内联了一些样式以节省空间）。

```
<!DOCTYPE html >
<head>
    <style type="text/css">
        .container:after{
            content: "\0020";
            display: block;
            clear: both;
        }
    </style>
</head>
<body>
  <div class="container" style="background:#0f0;">
    <div style="float: left;" >Words</div>
  </div>
  <div style="background:#f00; margin-top: 100px;">Words</div>
</body>
</html> 
```

*如果我在Google Chrome*（或*IE 8* ）中尝试上述操作，它的行为与我预期的一样。第一个顶级 div 位于页面顶部，第二个顶级 div 在其下方，由于其顶部边缘样式而隔开。

但是，当我在*Firefox*中尝试时，第一个 div 现在已在页面下方隔开。这与 2nd divs margin-top 参数直接相关。增加该值将增加整个`<body>`元素的上边距间距，即使它的样式没有改变。

现在我明白`:after`and`content: "\0020"`部分是 a 的一部分`clearfix`，并且我承认还没有 100% 了解*clearfixes*和*floats*，但我很不安上面的代码在 2 个主要浏览器中的行为会如此不同。

有人可以告诉我我在这里缺少什么以及为什么行为不同吗？

编辑：正如 BoltClock 所指出的，这看起来是一个长期存在的（自 FF2 以来）FireFox[错误](https://stackoverflow.com/questions/13070630/firefox-body-margin-bug)的副本-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:33:41.460

我无法真正解释为什么会有差异，但我可以为您提供可以帮助您解决这个问题的修复程序。添加`overflow:hidden;`到浮动的容器中。

```
<div class="container" style="background:#0f0; overflow: hidden;"> 
```

这将起作用

```
.container:after{
            content: "\0020";
            display: block;
            clear: both;
            overflow: hidden;
} 
```

[http://jsfiddle.net/g3Avj/1/](http://jsfiddle.net/g3Avj/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:35:12.963

我认为最简单的解决方案，虽然不确定你会去哪里是用文字删除 div 上留下的浮动。它将保持左对齐并且没有必要。*

# cmake - 强制 cmake 将共享库与静态库链接而不提及特定目标

> ID：13632266
> 
> 赞同：2
> 
> 时间：2012-11-29T18:25:58.173
> 
> 标签：cmake, static-linking

我正在尝试创建一个与 librt 的静态版本链接的共享库。目前我正在这样做：

```
CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
ADD_LIBRARY(memtrace SHARED memtrace.c)
ADD_LIBRARY(lib_real_time STATIC IMPORTED)
SET_TARGET_PROPERTIES(lib_real_time PROPERTIES IMPORTED_LOCATION /usr/lib/x86_64-linux-gnu/librt.a)
TARGET_LINK_LIBRARIES(memtrace lib_real_time) 
```

但我不想像这样指定路径。由于 librt 总是在标准路径中，我宁愿让 cmake 找到它。就像在 gcc 中一样，我只会指定 -lrt。当我尝试使用此 cmake 文件执行此操作时：

```
CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
ADD_LIBRARY(memtrace SHARED memtrace.c)
TARGET_LINK_LIBRARIES(memtrace rt) 
```

它将 memtrace 与 librt 的动态版本链接，这不是我想要的！

如何在不提及其完整路径的情况下链接 librt 的静态版本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T03:51:37.257

要与库的静态版本链接，只需在其名称中添加“.a”扩展名：

```
TARGET_LINK_LIBRARIES(memtrace rt.a) 
```

# java - 在您的 Java 应用程序中打开一个程序

> ID：13632269
> 
> 赞同：0
> 
> 时间：2012-11-29T18:26:02.510
> 
> 标签：java

我认为正确的术语是“管道”，但我希望有人能确认/纠正这一点。

本质上，我想将我的程序设置为在绘图程序或文本编辑器中打开要查看的文件（因此我不必在命令行中键入它）。

有这样做的好方法吗？到目前为止，我只打开和关闭了文件，所以我不确定从哪里开始在程序中打开它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:43:16.277

听起来你想要[Process](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html)类。

> 进程 p = Runtime.getRuntime().exec("记事本 C:\boo.txt");

这将在进程中启动程序“记事本”，并为其提供参数“C:\boo.txt”（在本例中，将使用记事本打开该文件）。如果您要做的只是启动程序，那么一旦您进入，您就完成了。如果您希望使用命令行输入/输出，您可以使用进程的流，例如：

> BufferedReader stdError = new BufferedReader(new InputStreamReader(p.getErrorStream())); PrintWriter stdOut = new PrintWriter(p.getOutputStream());

记事本示例是特定于 Windows 的，但无论如何想法都是相同的。传递给的字符串`exec()`将像在您机器上的操作系统的命令行上输入一样运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:53:25.167

还可以查看 AWT 的[Desktop-Class](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html)，它可用于打开与特定文件类型关联的程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T18:39:08.793

如果你想从你的 java 程序处理一个文件，你可以简单地在从命令行调用它时将文件的路径/名称提供给 Java 程序。请注意，当您执行 Java 应用程序时：

```
java MyApp fileName true 
```

这些参数作为传递给 main 方法的参数进入您的应用程序。

```
class MyApp {
    public static void main(String[] args) {
       String nameOfFileOrSomething = args[0];
       String booleanForSomethingOrAnother = args[1];
    }
} 
```

这是你的追求吗？

# c++ - 使用非阻塞套接字。调用 recvfrom 后，errno 总是 EAGAIN

> ID：13632275
> 
> 赞同：1
> 
> 时间：2012-11-29T18:26:36.180
> 
> 标签：c++, linux, sockets, udp

我正在将我的网络代码从 Windows 移植到 Linux，但并非没有问题。出于某种原因，当我将套接字设置为非阻塞时，recvfrom 将无法正常工作。你看，在我调用 recvfrom 之后，errno 总是 EAGAIN，不管我收到多少数据包，它总是 EAGAIN。如果我注释掉将套接字设置为无阻塞的代码，则代码运行良好。那么它正在工作，但它正在阻止......

这是我用来将套接字设置为非阻塞的代码：

```
int nonBlocking = 1;
if ( fcntl( handle, F_SETFL, O_NONBLOCK, nonBlocking ) == -1 )
{
    std::cout << "failed to set non-blocking socket" << std::endl;
    return false;
} 
```

关于我做错了什么的任何想法？（它在我的 Windows 版本中运行良好，使用：

```
DWORD nonBlocking = 1;
ioctlsocket( handle, FIONBIO, &nonBlocking ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T16:44:16.770

首先，在检查`errno`值之前，您应该检查 的返回值`recvfrom()`。

如果它返回，`-1`那么`errno`价值将是有意义的。

从`recvfrom`手册页：

> 如果套接字上没有可用的消息，则接收调用等待消息到达，除非套接字是非阻塞的（参见 fcntl(2)），在这种情况下返回值 -1 并将外部变量 errno 设置为 EAGAIN。

简而言之：

在你打电话的那一刻`recvfrom`，没有什么可以读的

# python - Python列表理解：测试函数返回

> ID：13632280
> 
> 赞同：7
> 
> 时间：2012-11-29T18:27:00.330
> 
> 标签：python, list-comprehension

有没有办法在列表（或字典）理解中测试函数的返回？我想避免这样写：

```
lst = []
for x in range(10):
  bar = foo(x)
  if bar:
    lst.append(bar) 
```

并改用列表推导。显然，我不想写：

```
[foo(x) for x in range(10) if foo(x)] 
```

所以？

```
[foo(x) for x in range(10) if ??? ] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T18:28:52.670

怎么样

```
filter(None, map(foo, range(10))) 
```

如果您不想保留中间列表，请替换`map()`为[`itertools.imap()`](http://docs.python.org/2/library/itertools.html#itertools.imap). 有了[`itertools.ifilter()`](http://docs.python.org/2/library/itertools.html#itertools.ifilter)，整个东西可以变成一个发电机。

```
itertools.ifilter(None, itertools.imap(foo, range(10))) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T18:31:44.317

只需制作一个生成器来计算值，然后从生成器构建过滤列表。

例子：

```
# create generator via generator expression
results = (foo(x) for x in xrange(10))
# build result list, not including falsy values
filtered_results = [i for i in results if i] 
```

以供参考：

*   [https://docs.python.org/3/glossary.html#term-generator](https://docs.python.org/3/glossary.html#term-generator)
*   [https://wiki.python.org/moin/Generators](https://wiki.python.org/moin/Generators)
*   [https://www.python.org/dev/peps/pep-0289/](https://www.python.org/dev/peps/pep-0289/)

# macros - 在 Visual Studio 2012 (C#) 中如何创建 Post Build 中可用的自定义宏

> ID：13632282
> 
> 赞同：7
> 
> 时间：2012-11-29T18:27:09.063
> 
> 标签：macros, visual-studio-2012, post-build-event

我想在我的 Visual Studio 2012 C# 项目中添加构建后事件命令行。

我的解决方案中有许多项目，我想添加到“宏>>”可用的宏列表中。

我怎样才能做到这一点？

例如我有命令行：

```
"C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\signtool.exe" sign /f MYPFXFILEPATH /p MYPASSWORD /t http://timestamp.verisign.com/scripts/timstamp.dll $(TargetDir)$(TargetFileName) 
```

我不想将其复制并粘贴到每个项目中。我想将第一部分放入一个宏中，这样我就可以：

```
$(SignCommandLinePrefix) $(TargetDir)$(TargetFileName) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T19:21:25.333

虽然您不会在**Macros>>**列表中看到您的宏，但您可以手动编辑**.csproj**文件。寻找第一个`<PropertyGroup>`并在结束之前添加这个`</PropertyGroup>`**：**

```
<SignCommandLinePrefix>"C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\signtool.exe" sign /f MYPFXFILEPATH /p MYPASSWORD /t http://timestamp.verisign.com/scripts/timstamp.dll</SignCommandLinePrefix> 
```

现在，您可以添加`$(SignCommandLinePrefix) $(TargetDir)$(TargetFileName)`到您的构建后事件，它会按照您的意愿工作。

查看 Chuck England 对这个问题的回答： [http ://social.msdn.microsoft.com/Forums/en-US/vsx/thread/e774f871-8fc2-4875-b791-1df3dd0bb2dc/](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/e774f871-8fc2-4875-b791-1df3dd0bb2dc/)

# git - 将一个提交拆分为 2 个并获得结果差异

> ID：13632283
> 
> 赞同：2
> 
> 时间：2012-11-29T18:27:15.150
> 
> 标签：git, review-board

我最近在工作中发布了一个差异来审查委员会。直到之后我才真正检查差异，我注意到我的编辑器删除了行尾的空格。我想将这些空白更改拆分为单独的提交。我怎样才能做到这一点？

之后，我认为更新差异的最简单方法是实际上传差异。自从我提交以来，已经有很多提交，并且我已经重新设置基准（我们总是在这里拉 --rebase），所以仅仅使用猜测功能更新审查委员会可能不会真正奏效。

注意：我已经推送了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:48:00.940

我不熟悉“审查委员会”，但这里有一个通用的 git 策略来回答这部分问题：

> 我想将这些空白更改拆分为单独的提交。什么是最简单的方法来做到这一点。

```
git checkout whitespace-fix
git reset --hard <sha of commit you posted diff of>
git reset HEAD~1
git add --patch . 
```

现在暂存与空白问题相对应的大块（提示：使用“s”将呈现的大块分割成更小的块）。完成后，提交和变基，你的新提交就准备好了。

```
git commit -m 'Remove whitespace at end of lines'
git rebase master 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:16:55.257

我相信，为了解决**当前**的情况，意味着 -*在 Review Board 中获得仅包含您的相关更改（而不是空间更改）的差异*-**最简单的事情**是：

1.  **根据推送后获得**的修订号重新创建差异***（这样，您确保在再次将差异上传到审查委员会时没有相对路径问题）*；**
***   **通过编辑来清理差异**并仅保留相关更改*（取决于差异的大小，您有几个选择 - 简单的选择/删除或智能搜索和替换，reg.exp.等）*；*   **再次上传您的差异** *（如果您想使用相同的审核请求，请使用更新差异功能，否则，只需创建一个新的审核请求）*。** 

 **这些应该可以解决问题。

*另一方面...* 

我想您应该通过在您正在创建的差异文件中获取这些空格来解决这部分问题 - 当您查看代码修改的历史时，这会让人很痛苦地查看更改。
在这里，您可以检查很多东西，例如您正在使用的 diff 命令。

我希望这有帮助！**

# mysql - 产品表的 MyIsam VS INNODB

> ID：13632293
> 
> 赞同：1
> 
> 时间：2012-11-29T18:27:33.540
> 
> 标签：mysql, innodb, myisam

由于它的 ACID 功能，我在 INNODB 上从头开始构建了一个应用程序。但是，我遇到了一些障碍。我有一个产品表，每个产品的类别由分隔符分隔。总共有大约 1800 个独特的类别，每个产品一次与大约 3-4 个相关联。我有大约 300,000 行独特的产品。

我试着按照书本做这件事，并通过为它们创建一个单独的表并使用多对多关系将它们与我的产品相关联来规范我的类别。但是，问题是 products 表本身大约有 300,000 行，再加上大约 900,000 行的多对多类别关联表，我们有一个怪物！在两个表之间获得合理的连接速度几乎是不可能的......

在这种情况下，通过将类别以其原始格式存储在 products 表中它们自己的 TEXT 字段中，您会如何进行非规范化。要根据类别筛选这些产品，我可以使用全文搜索吗？这种方法的优缺点是什么？

顺便说一句，我在共享服务器上，所以我不能增加缓冲区大小或利用内存管理来*真正*利用 InnoDB

**已解决** *如果可以的话，我会投票支持这里所有嘲笑和嘲笑我的错误幻想的人，即按照书本行事（正常化）似乎使我失去了速度。事实上，它给了我一致性，并且在这里和那里调整了一些索引，我得到了闪电般的速度。谢谢大家。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:33:27.070

您的主题建议您正在考虑使用 MyISAM 而不是 InnoDB，但随后您的问题询问了非规范化的价值。

请参阅我对[在数据库列中存储分隔列表真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-comma-separated-list-in-a-database-column-really-that-bad/3653574#3653574)

如果您总是需要知道给定产品的类别，非规范化会有所帮助。如果您需要知道给定类别的产品，情况会更糟——否则您需要在类别表的每一行中存储一个冗余的产品列表。祝他们保持同步。

**如果您有正确的索引**，将 300k 表连接到 900k 表应该很容易且有效。

 **您应该学习[使用 EXPLAIN 优化查询](http://dev.mysql.com/doc/refman/5.5/en/using-explain.html)。**

# javascript - 如何避免 JQuery 中的 if/else 循环

> ID：13632295
> 
> 赞同：2
> 
> 时间：2012-11-29T18:27:50.913
> 
> 标签：javascript, jquery, refactoring

下面的代码运行良好，但 if/else 语句看起来又长又丑。有没有办法可以避免这些陈述？

`CommissionTypeFilterVm`是一个包含 6 个属性的列表，如下所示，其值为`1`或`0`。我想根据这些属性的值启用和禁用复选框：

```
CommissionType
CommissionTrials
OverrideType
OverrideTrials
BonusType
AdjustmentType 
```

这是代码：

```
 if (view != null) 
        {
            if (view.CommissionTypeFilterVm !=null && view.CommissionTypeFilterVm.length>0)
            {
                if (view.CommissionTypeFilterVm[0].CommissionType != 1) {
                    this.$commissionType.prop("checked", false).prop("disabled", true);
                } else {
                    this.$commissionType.prop("disabled", false).prop("checked", true);
                }
                if (view.CommissionTypeFilterVm[0].CommissionTrials != 1) {
                    this.$commissionTrails.prop("checked", false).prop("disabled", true);
                } else {
                    this.$commissionTrails.prop("disabled", false).prop("checked", true);
                }
                if (view.CommissionTypeFilterVm[0].OverrideType != 1) {
                    this.$overrideType.prop("checked", false).prop("disabled", true);
                } else {
                    this.$overrideType.prop("disabled", false).prop("checked", true);
                }
                if (view.CommissionTypeFilterVm[0].OverrideTrials != 1) {
                    this.$overrideTrails.prop("checked", false).prop("disabled", true);
                } else {
                    this.$overrideTrails.prop("disabled", false).prop("checked", true);
                }
                if (view.CommissionTypeFilterVm[0].BonusType != 1) {
                    this.$bonusType.prop("checked", false).prop("disabled", true);
                } else {
                    this.$bonusType.prop("disabled", false).prop("checked", true);
                }
                if (view.CommissionTypeFilterVm[0].AdjustmentType != 1) {
                    this.$adjustmentType.prop("checked", false).prop("disabled", true);
                } else {
                    this.$adjustmentType.prop("disabled", false).prop("checked", true);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T18:31:34.723

它可能取决于您的确切`view.CommissionTypeFilterVm[0]`对象（它具有哪些其他属性），但看起来您尝试这样做：

```
var com = view.CommissionTypeFilterVm[0];
for (var key in com) { // if necessary check ownProperty
   this['$'+key.charAt(0).toLowerCase()+key.slice(1)]
      .prop({checked: com[key]==1, disabled: com[key]!=1});
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:42:12.180

```
if (view && view.CommissionTypeFilterVm && view.CommissionTypeFilterVm.length) {
    var vm = view.CommissionTypeFilterVm[0],
        props = ["CommissionType", "CommissionTrials", "OverrideType", "OverrideTrials", "BonusType", "AdjustmentType"];
    for (var i=0; i<props.length; i++) {
        var prop = props[i],
            bool = vm[prop] != 1,
            key = "$"+prop.charAt(0).toLowerCase()+prop.slice(1);
        this[key].prop({checked: !bool, disabled: bool});
    }
} 
```

如果您分别命名了属性，则可以解决丑陋的键操作。无论如何，您都需要这样做，因为您在跟踪/试验中有错字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T18:33:01.417

您可以创建一个静态地图并循环它：

```
 if (view != null && view.CommissionTypeFilterVm != null && view.CommissionTypeFilterVm.length > 0) 
{
    var mapping = [ 
        { type: 'CommisionType', ele: '$commisionType' },
        { type: 'CommissionTrials', ele: '$commissionTrails' },
        { type: 'OverrideType', ele: '$overrideType' },
        { type: 'BonusType', ele: '$BonusType' }
    ];
    var self = this;

    $.each(mapping, function() {
        if (view.CommissionTypeFilterVm[0][this.type] !==1) {
            self[this.ele].prop("checked", false).prop("disabled", true);
        } else {
            self[this.ele].prop("disabled", false).prop("checked", true);
        }
    });
} 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T18:46:02.610

也许效率不高..试试这个

```
if (view != null) 
{
    if (view.CommissionTypeFilterVm !=null 
                    && view.CommissionTypeFilterVm.length>0)
    {
        var typeFilter = view.CommissionTypeFilterVm[0];
        var check = typeFilter.CommissionType === 0 ? true : false;
        this.$commissionType.prop({ 'checked' : !check , 'disabled' : check });
        check = typeFilter.CommissionTrials === 0 ? true : false;
        this.$commissionTrails.prop({ 'checked' : !check , 'disabled' : check });
        check = typeFilter.OverrideType === 0 ? true : false;
        this.$overrideType.prop({ 'checked' : !check , 'disabled' : check });
        check = typeFilter.OverrideTrials === 0 ? true : false;
        this.$commissionType.prop({ 'checked' : !check , 'disabled' : check });
        check = typeFilter.BonusType === 0 ? true : false;
        this.$bonusType.prop({ 'checked' : !check , 'disabled' : check });
        check = typeFilter.AdjustmentType === 0 ? true : false;
        this.$adjustmentType.prop({ 'checked' : !check , 'disabled' : check });
    }
} 
```

# c# - WinRT - 一次从 IInputStream 读取一个字节，直到遇到特定字节

> ID：13632296
> 
> 赞同：2
> 
> 时间：2012-11-29T18:27:54.650
> 
> 标签：c#, windows-runtime

我有一个`IInputStream`我想从中读取数据，直到遇到某个字节，此时我将把它传递`IInputStream`给其他对象以消耗流的其余部分。

这就是我想出的：

```
public async Task HandleInputStream(IInputStream instream)
{
    using (var dataReader = new DataReader(instream))
    {
        byte b;
        do
        {
            await dataReader.LoadAsync(1);
            b = dataReader.ReadByte();

            // Do something with the byte
        } while (b != <some condition>);

        dataReader.DetachStream();
    }
} 
```

似乎一次运行`LoadData`一个字节会非常慢。我的困境是，如果我选择一个缓冲区大小（如 1024）并加载它，并且我的值显示为 10 个字节，那么此方法将具有下一个 1014 个字节的数据，并且必须将其传递给下一个方法进行处理.

有没有更好的方法来解决这个问题，或者这是一个可以接受的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T05:47:50.680

如果您要查找的值距离流的开头不是太远，那么这种读取应该不会那么慢。您期望它在流中有多远？你测试过性能吗？

根据您使用的流类型，您可能可以使用其他方法：

*   如果它支持向后搜索（例如，您正在从文件中读取），您可以一次读取更大的块，只要您知道在什么偏移处找到了您的值。然后，您可以在将其移交之前将其搜索到该位置。
*   如果这不可能，您可以创建另一个中间内存流，您可以将已读取的缓冲区的剩余部分复制到其中，然后复制该流的其余部分。即使您无法向后寻找，这也有效。如果流太大，唯一的问题可能是内存消耗。

# javascript - 如何在 Javascript 中正确使用 mixins

> ID：13632298
> 
> 赞同：7
> 
> 时间：2012-11-29T18:28:11.700
> 
> 标签：javascript, dry, mixins

我正在组织一个小型企业应用程序，但希望尽可能 DRY。因此，我一直在研究 mixin 库。

我遇到了这个[库](https://github.com/kmalakoff/mixin)，并认为它可能是一个不错的选择，因为它允许您在运行时混入和混出。另外，例如，我可以只拥有一个基类（BaseView），然后将其混入。

**问题**

1.  有哪些有用的 Mixins 的实际应用示例？（请不要再抽象的例子）
2.  我什至需要扩展类还是可以只使用这个库来管理所有扩展和混合？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:35:55.967

*mixin*只是一个不同的概念，关于如何组织代码和继承。您当然可以将它与使用*经典*继承或*原型继承*结合起来，但可以这么说，它也可以独立工作。

例如，我们将真正从多个其他对象“*形成*”新的独立对象，而不是创建*“委托”*对象属性/查找（如*原型继承）。*这有时也称为“*多重继承*”，仅靠Javascript*原型继承*无法轻松实现。

 ***举个例子：

```
var pianist = {
   play: function() {}
};

var programmner: {
   code: function() {}
}; 
```

现在我们可以创建另一个*Object*，比如

```
var Jim = Object.create( null ); // create a fully self-defining object

extend( Jim, pianist );
extend( Jim, programmer ); 
```

这个伪`extend`方法可能看起来像（ES5）：

```
function extend( target, source ) {
    Object.getOwnPropertyNames( source ).forEach(function( key ) {
        Object.defineProperty( target, key, Object.getOwnPropertyDescriptor(source, key)) });

    return target
} 
```

* * *

我实际上没有正确回答您的问题，但我觉得您的问题没有真正的答案。它与您将要使用的一样真实，实际上没有“特定于应用程序”的用例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-16T20:20:47.640

另请参阅：

*   stackoverflow.com :: [javascript 中的特征](https://stackoverflow.com/a/23770385/2627243)
*   stackoverflow.com :: [Javascript Traits 模式资源](https://stackoverflow.com/q/6977226)

如果涉及到 JavaScript 和基于角色的组合方法，如 Mixins 和 Traits，我同时非常固执己见。我总是会指出 2 个纯基于函数的模式的库不可知组合 - 首先是模块模式，其次是“Flight Mixin”模式，因为它已被 Angus Croll 在 2011 年 5 月重新发现、命名和描述。但我也建议阅读2014 年 4 月我的一篇论文。

*   [重新审视 JavaScript Mixins](http://javascriptweblog.wordpress.com/2011/05/31/a-fresh-look-at-javascript-mixins)
*   [JavaScript 的许多才能概括面向角色的编程方法，如 Traits 和 Mixins](http://peterseliger.blogspot.de/2014/04/the-many-talents-of-javascript.html#the-many-talents-of-javascript)

> 问题
> 
> *   1) 有哪些有用的 Mixins 的实际应用示例？（请不要再抽象的例子）
> *   2）我什至需要扩展类还是可以只使用这个库来管理所有扩展和混合？

回答你的2个问题...

1st)可能是*Mixins*`[Observable]`在现实世界中最常见的例子之一。但这不是提供其整个代码库的正确位置。[*Smart Talents*](http://peterseliger.blogspot.de/2014/04/the-many-talents-of-javascript.html#smart-talent-patterns)[章节](http://peterseliger.blogspot.de/2014/04/the-many-talents-of-javascript.html#smart-talent-patterns)中不断增长的示例确实提供了工厂的工作实现，该工厂在一开始只是使用不同的*Mixins*，但最终也应用了已经提到的.*[](http://peterseliger.blogspot.de/2014/04/the-many-talents-of-javascript.html#smart-talent-patterns)*`[Queue]`*`[Enumerable]``[Allocable]``[Observable]`***

 ***2nd）只需使用您选择或需要的模块系统 - [CommonJS 或 AMD](http://www.2ality.com/2014/09/es6-modules-final.html)。然后，您的工厂模块甚至实例/对象会通过委托检索其他行为；因此他们积极地做/ `call`Mixin*或*Trait*模块*。`apply`

 **最后 - 缩短的示例代码：

```
var Observable_SignalsAndSlots = (function () {

  var
    Event = function (target, type) {

      this.target = target;
      this.type = type;
    },

    EventListener = function (target, type, handler) {

      var defaultEvent = new Event(target, type);

      this.handleEvent = function (evt) {
        /* ... */
      };
      this.getType = function () {
        return type;
      };
      this.getHandler = function () {
        return handler;
      };
    },

    EventTargetMixin = function () {

      var eventMap = {};

      this.addEventListener = function (type, handler) {
        /* ... */
      };
      this.dispatchEvent = function (evt) {
        /* ... */
      };
    }
  ;

  return EventTargetMixin;

}).call(null);

var Queue = (function () {

  var
    global = this,

    Observable  = global.Observable_SignalsAndSlots,
  //Allocable   = global.Allocable,

    Queue,

    onEnqueue = function (queue, type) {
      queue.dispatchEvent({type: "enqueue", item: type});
    },
    onDequeue = function (queue, type) {
      queue.dispatchEvent({type: "dequeue", item: type});
    },
    onEmpty = function (queue) {
      queue.dispatchEvent("empty");
    }
  ;

  Queue = function () { // implementing the [Queue] Constructor.
    var
      queue = this,
      list = []
    ;
    queue.enqueue = function (type) {

      list.push(type);
      onEnqueue(queue, type);

      return type;
    };
    queue.dequeue = function () {

      var type = list.shift();
      onDequeue(queue, type);

      (list.length || onEmpty(queue));

      return type;
    };
    Observable.call(queue);
  //Allocable.call(queue, list);
  };

  return Queue;

}).call(null);

var q = new Queue;

q.addEventListener("enqueue", function (evt) {console.log("enqueue", evt);});
q.addEventListener("dequeue", function (evt) {console.log("dequeue", evt);});
q.addEventListener("empty", function (evt) {console.log("empty", evt);});

console.log("q.addEventListener : ", q.addEventListener);
console.log("q.dispatchEvent : ", q.dispatchEvent);

console.log("q.enqueue('the') ... ", q.enqueue('the'));     // "enqueue" Object {type: "enqueue", item: "the", target: Queue}
console.log("q.enqueue('quick') ... ", q.enqueue('quick')); // "enqueue" Object {type: "enqueue", item: "quick", target: Queue}
console.log("q.enqueue('brown') ... ", q.enqueue('brown')); // "enqueue" Object {type: "enqueue", item: "brown", target: Queue}
console.log("q.enqueue('fox') ... ", q.enqueue('fox'));     // "enqueue" Object {type: "enqueue", item: "fox", target: Queue}

console.log("q.dequeue() ... ", q.dequeue()); // "dequeue" Object {type: "dequeue", item: "the", target: Queue}
console.log("q.dequeue() ... ", q.dequeue()); // "dequeue" Object {type: "dequeue", item: "quick", target: Queue}
console.log("q.dequeue() ... ", q.dequeue()); // "dequeue" Object {type: "dequeue", item: "brown", target: Queue}
console.log("q.dequeue() ... ", q.dequeue()); // "dequeue" Object {type: "dequeue", item: "fox", target: Queue}
                                              // "empty"   Object {target: Queue, type: "empty"}
console.log("q.dequeue() ... ", q.dequeue()); // "dequeue" Object {type: "dequeue", item: undefined, target: Queue}
                                              // "empty"   Object {target: Queue, type: "empty"}
```

```
.as-console-wrapper { max-height: 100%!important; top: 0; }
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-01T18:11:47.653

我们使用一个名为[Cocktail](https://github.com/onsi/cocktail)的 mixin 库（mixins...明白吗？）。它专门用于 Backbone 应用程序，但非常好。

我们已经[写了关于我们的使用模式的详细信息，](http://www.salsify.com/blog/using-cocktail-to-create-mixins-for-backbone-models-that-respect-inheritance)这些细节比我在这里描述的要好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-23T15:15:42.563

在面向对象的设计模式中，目标是尽可能地消除继承，因为继承是不灵活的并且将不相关的实体混杂在一起。您应该对接口进行编程，而不是对实现进行编程。将变化的部分与保持不变的部分分开。设计模式以策略模式的形式引入了委托的概念。但是由于 JavaScript 的动态特性，我们也可以很容易地使用 mixins 的概念来区分变化的和保持不变的。

选择 mixins 的另一个原因是，由于 JavaScript 是一种原型语言，它通过原型链将对象链接在一起，但是如果你过度使用这个特性，你会发现在巨大的链中链接原型很慢。

事实上，通过使用 mixins，您可以直接将功能添加到对象的原型中，而不是链接原型，从而减少查找算法的开销。因此，例如，下面我们创建两个单例对象“speak”和“fly”。这些是实现行为的对象。不同的东西可以说话和飞翔，但那些不同的东西不应该相互继承。例如，您可能有一只野鸭和一只鹦鹉。

```
var speakable = {
    speak: function(){ return this.name + " speaks" }
}

var flyable = {
    fly: function(){ return this.name + " flies" }
} 
```

在 jQuery 世界中以及在 ES6 的干净类语法之前，您可以使用构造函数添加 mixins，如下所示：

```
var MallardDuck = function(name){
  this.name = name;
}

var Parrot = function(name){
  this.name = name;
}

$.extend(MallardDuck.prototype, speakable, flyable);
$.extend(Parrot.prototype, speakable, flyable);

var duck = new MallardDuck('Bob');
var parrot = new Parrot('Jane');
console.log(duck.speak());
console.log(parrot.speak()); 
```

在没有 jQuery 和 ES6 之前的情况下，如果您想通过 mixin 工具扩展具有功能的对象，那么您可以简单地编写自己的扩展 mixin 工具：

```
function extend(target){
  // if no mixin objects are provided, then return out of function
  if(!arguments[1])
    return;

  // the first argument is the target object we want to mix behavior into, so we start our loop at index 1
  for(var i = 1; j = arguments.length; i < j; i++) {
    // grab the singleton object to mixin into target
    var source = arguments[i];

    for(var propr in source) {
      // ensure we do not override a property that target already has
      if(!target[prop] && source.hasOwnProperty(prop)){
        target[prop] = source[prop];
      }
    }
  }
} 
```

我们可以利用 ES6 中的 Object.assign 属性，而不是依赖像 jQuery 这样的外部库（强烈反对这种简单的目的），或者编写我们自己的实用程序 mixin 工具。此外，我们可以在 ES6 类中使用它。Object.assign() 方法用于将所有可枚举自身属性的值从一个或多个源对象复制到目标对象。

```
const speakable = {
    speak: function(){ return `${this.name} speaks`; }
}

const flyable = {
    fly: function(){ return `${this.name} flies` }
}

class MallardDuck {
  constructor(name) {
    this.name = name;
    Object.assign(MallardDuck.prototype, speakable); // add the mixin to prototype chain. Alternatively, use 'this' to add directly to the new object being created
  }
}

class Parrot {
  constructor(name) {
    this.name = name;
    Object.assign(Parrot.prototype, speakable); // add the mixin to prototype chain. Alternatively, use 'this' to add directly to the new object being created
  }
}

const duck = new MallardDuck('Mallard Duck');
const parrot = new Parrot('Parrot');
console.log(duck.speak());
console.log(parrot.speak()); 
```********

# objective-c - 如何执行多线程概念以从核心数据中获取多个数据？

> ID：13632301
> 
> 赞同：1
> 
> 时间：2012-11-29T18:28:14.820
> 
> 标签：objective-c, multithreading, fetch, nsthread

我的应用程序有 5 个模块，每个模块的数据存储在 5 个不同的托管对象中。我创建了一个搜索页面，用户可以在其中键入关键字以在所有 5 个模块中查找关键字。对于搜索栏中的每个文本更改，我刷新了搜索结果表以显示匹配记录数以及模块名称。

因此，对于搜索栏中的每次按下，我都需要从所有 5 个模块中获取匹配的数据计数。如果应用程序的记录数量最少，这很简单。但是，就我而言，总记录数非常多，因此通过键入的搜索词从 5 个模块中获取数据所花费的时间非常巨大，这使得应用程序冻结。

我对在 iOS 中实现线程概念一无所知，所以我尝试通过阅读 Apple 的[线程编程指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/Introduction/Introduction.html#//apple_ref/doc/uid/10000057i-CH1-SW1)和[并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091)来学习。我希望，我获得了一些关于线程的知识，但是当我尝试通过代码实现这些概念时，它有点复杂。

我的要求是，我有一些应该使用线程概念调用的函数。考虑的功能是，

```
function1() {...}
function2() {...}
function3() {...}
function4() {...}
function5() {...} 
```

我想同时调用这 5 个函数，这样就没有人可以等待其他人完成。还有一点是，当上述函数获取记录时，如果用户在搜索栏中键入/擦除文本，我想取消/停止所有线程，我需要对这些函数执行另外 5 次新的调用。

我正在寻找建议，任何类型的工作示例代码，示例。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:10:00.180

这里有一篇关于核心数据和后台线程的好[文章](http://www.cimgf.com/2011/05/04/core-data-and-threads-without-the-headache/)！有了整个 GCD 的东西，这不再那么难完成了，所以这可能是进一步研究这个主题的一个很好的切入点。

这是该主题的另一篇文章[。](http://volonbolon.net/post/26899408713/concurrency-with-core-data-on-ios-5)

# ruby - 在 ruby 中快速将数组转换为字符串

> ID：13632304
> 
> 赞同：0
> 
> 时间：2012-11-29T18:28:31.277
> 
> 标签：ruby

我有一个大约 10,000 个字符串和整数的数组，我想将它们序列化到 Rails 网页中。最终目标是将数组转换为 JavaScript 数组，但我很高兴将其作为文本 blob，然后解析客户端。

我无法缓存字符串，每个请求的值都会改变。

这在我的 VPS 上大约需要 25 毫秒：

```
arr = ["ABCD", 1] * 10000 # always in string, number, string, number order
start = Time.now
arr.to_s
duration = (Time.now - start)*1000
puts "took #{duration}ms" 
```

我们能做得更好吗？

**编辑**

@sawa 的回答是正确的，`to_json`速度很快，而且是一个很好的方法。我被甩掉了，因为`to_json`在 Rails 环境中被覆盖了。改为使用`JSON.generate(arr)`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T18:32:24.957

随着数组变长，JSON 会更快。正如我用 测试的那样`["ABCD", 1] * n`，当 大约时`n < 50`，`to_s`速度更快，但在 时`n > 50`，`to_json`速度更快。

```
arr = ["ABCD", 1] * 10000 # always in string, number, string, number order

start = Time.now
arr.to_s
duration = (Time.now - start)*1000
puts "took #{duration}ms"

require "json"
start = Time.now
arr.to_json
duration = (Time.now - start)*1000
puts "took #{duration}ms"

# =>
# took 7.546628ms # to_s
# took 4.684186ms # to_json 
```

# regex - 在 REGEX 中使用条件组

> ID：13632309
> 
> 赞同：1
> 
> 时间：2012-11-29T18:28:52.467
> 
> 标签：regex

我正在尝试匹配一个模式，但我无法修复我的 REGEX 以使其正常工作。

我有文字：

```
REG1QA 
```

我的正则表达式如下：

```
([A-Z]{3})+([1-3]{1})+([A-Z]{1})+((A|B|C)|(D|E|F)|(G|H|I)) 
```

规则是： 如果我的第 4 个字符是 1，我的最后一个字符必须是 A、B 或 C 如果我的第 4 个字符是 2，我的最后一个字符必须是 D、E 或 F 如果我的第 4 个字符是 3，我的最后一个字符必须是 G、H或者我

如何修复我的 REGEX 以接受此规则？

tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:35:31.037

在这里试试这个：

```
^[A-Z]{3}(1[A-Z]*[ABC]|2[A-Z]*[DEF]|3[A-Z]*[GHI])$ 
```

我不确定 char 5 是否也可以是 AZ，但在我的示例中是这样的。因此，您有一个共同的开始，即 1-3 的开关及其规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:44:03.547

使用正则表达式模式`^.{3}(?:1.*[A-C]|2.*[D-F]|3.*[G-I])$`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T18:35:57.700

```
[A-Z]{3}((1.*?[A-C]$)|(2.*?[D-F]$)|(3.*?[G-I]$)) 
```

# jquery - 标签更改时jquery标签更改背景图片

> ID：13632310
> 
> 赞同：-4
> 
> 时间：2012-11-29T18:28:52.390
> 
> 标签：jquery, tabs

每当标签更改时，如何更改面板的背景图片？

我需要动态更改 .ui-tabs-panel css

我已经尝试过了，但它似乎仅在页面加载时才有效，然后选项卡面板返回样式表值

```
$( "#mytabs" ).tabs({

     select: function(event, ui) {

        // Do your validation here
         $('.ui-tabs-panel').css('background-image','bo.jpg');

          /* */
    }       

    }); 
```

});

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:13:42.857

感谢您不帮助我，我自己找到了解决方案...

我在这里为其他可能需要它的人发布它：

```
 $( "#mytabs" ).tabs({

     select: function(event, ui) {

        // Do your validation here
         $('.ui-tabs-panel').css('background-image',"url('yourimage.jpg')");

          /* */
    }       

    }); 
```

# c# - 从数据库填充下拉列表

> ID：13632316
> 
> 赞同：0
> 
> 时间：2012-11-29T18:29:04.887
> 
> 标签：c#, asp.net, sql

我有一个带有编辑/删除按钮的 asp.net 页面列出产品（从数据库中提取）。用户可以通过单击编辑按钮来编辑产品。我已经能够根据所选产品将数据从数据库中提取到文本框中。但是，我在下拉框中得到了重复的项目。它应该只有 32 个项目，有 160 个项目（每个项目出现 5 次）。我使用过 Items.Clear() 但仍然重复。此外，保管箱仅显示列表中的第一项，而不是当前在数据库中的该产品的适当项目。谁能看到我可能做错了什么？

谢谢。

```
 protected void Page_Load(object sender, EventArgs e)
    {
        this.Master.HighlightNavItem("Products");
        string Mode = (Request.QueryString["Mode"]);

        //Upon opening page, if this is an edit to existing product (populate product data)
        if (Mode == "E")
        {
            if (!IsPostBack)
            {
                int ProductID = Int32.Parse(Request.QueryString["ID"]);

                //Declare the connection object
                SqlConnection Conn = new SqlConnection();
                Conn.ConnectionString = ConfigurationManager.ConnectionStrings["MyDatabase"].ConnectionString;

                //Connect to the db
                Conn.Open();

                //Define the query                    
                //string sql = "SELECT dbo.Vendor.VendorName, dbo.Vendor.VendorID, dbo.Product.ProductName, dbo.Product.ProductNumber, dbo.lu_Category.CategoryID, dbo.lu_Category.Description FROM dbo.Product INNER JOIN dbo.Vendor ON dbo.Product.VendorID = dbo.Vendor.VendorID INNER JOIN dbo.lu_Category ON dbo.Product.CategoryID = dbo.lu_Category.CategoryID WHERE ProductID=@ProductID";
                string sql = "SELECT ProductName, ProductNumber, ProductDescription, Cost, Markup, Unit, QtyOnHand, ShippingWeight, dbo.Vendor.VendorID, VendorName, dbo.lu_Category.CategoryID, Description FROM Vendor, Product, lu_Category WHERE ProductID=@ProductID";

                //Declare the Command
                SqlCommand cmd = new SqlCommand(sql, Conn);

                //Add the parameters needed for the SQL query
                cmd.Parameters.AddWithValue("@ProductID", ProductID);

                //Declare the DataReader
                SqlDataReader dr = null;

                //Fill the DataReader
                dr = cmd.ExecuteReader();

                //Loop through the DataReader
                ddlVendor.Items.Clear();
                while (dr.Read())
                {

                    txtProductName.Text = dr["ProductName"].ToString();
                    txtProductNo.Text = dr["ProductNumber"].ToString();
                    txtDescription.Text = dr["ProductDescription"].ToString();
                    txtCost.Text = dr["Cost"].ToString();
                    txtMarkup.Text = dr["Markup"].ToString();
                    txtUnit.Text = dr["Unit"].ToString();
                    txtQty.Text = dr["QtyOnHand"].ToString();
                    txtWeight.Text = dr["ShippingWeight"].ToString();
                    ListItem li = new ListItem();
                    li.Text = dr["VendorName"].ToString();
                    li.Value = dr["VendorID"].ToString();
                    ddlVendor.Items.Add(li); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:36:49.740

您应该更改`SQL query`并删除`,`连接类型。
然后直接在您的数据库中测试您的查询，以确保您不会得到双打。

您的其余代码看起来不错，所以我确信测试您的查询将解决您的问题。
不要使用`Comma Joins`它已弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:43:06.210

我认为您应该使用内部或外部联接来获取数据。使用“，”分隔的连接，您可以从两个表中接收数据。就像一张表的 32 行正在与其他表的 5 行一起添加。

# ios - 如何解析此 html 并将其用作我的 ios 应用程序中的变量？

> ID：13632320
> 
> 赞同：0
> 
> 时间：2012-11-29T18:29:33.767
> 
> 标签：ios

这是一个 html 示例（实际页面上的标记 #s 更改）： http://nonlinearmind.no-ip.org:8888/ [token.html](http://nonlinearmind.no-ip.org:8888/token.html)

从页面中，我需要为以下变量转义信息：

```
username = <title>
session = <h1>
token = <h2> 
```

实现这一目标的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:42:59.460

你能控制那个`token.html`来源吗？如果它可以返回 JSON 或 XML，而不是 HTML，那将是最好的。它极大地简化了解析过程。

但是您可以轻松地将页面加载到`NSData`via 中：

```
NSError *error = nil;
NSURL *url = [NSURL URLWithString:@"http://nonlinearmind.no-ip.org:8888/token.html"];
NSData *htmlData = [NSData dataWithContentsOfURL:url options:0 error:&error];
if (error != nil)
{
    NSLog(@"%s unable to load URL '%@'; error = %@", __FUNCTION__, url.absoluteString, error);
} 
```

或`NSString`通过：

```
NSError *error = nil;
NSURL *url = [NSURL URLWithString:@"http://nonlinearmind.no-ip.org:8888/token.html"];
NSString *htmlString = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:&error];
if (error != nil)
{
    NSLog(@"%s unable to load URL '%@'; error = %@", __FUNCTION__, url.absoluteString, error);
} 
```

你可以从那里解析它。

例如，要从被调用的`<h1>`打开和关闭标记之间获取所有文本，您可以：`NSString``htmlString`

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"<h1>(.*?)</h1>"
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:&error];
if (error != nil)
{
    NSLog(@"%s regex error: %@", __FUNCTION__, error);
}

NSMutableArray *matches = [NSMutableArray array];

[regex enumerateMatchesInString:htmlString
                        options:0
                          range:NSMakeRange(0, [htmlString length])
                     usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {
                         // the string including html tags is [htmlString substringWithRange:result.range]
                         NSRange matchRange = [result rangeAtIndex:1];

                         [matches addObject:[htmlString substringWithRange:matchRange]];
                     }];

NSString *first = matches[0];
NSString *second = matches[1];
// etc.

NSLog(@"first=%@", first);
NSLog(@"second=%@", second); 
```

* * *

我知道你没有说你可以做 JSON，但如果可以的话，iOS 实现非常简单。因此，假设您有一个返回 JSON 结果的 URL，例如：

```
{
    "username" : "myusername",
    "session" : "mysessionidentifier",
    "token" : "somecryptictoken2340923923402309234"
} 
```

然后你可以解析它：

```
NSURL *url = [NSURL URLWithString:@"http://nonlinearmind.no-ip.org:8888/token.json"];
NSError *error;
NSData *data = [NSData dataWithContentsOfURL:url
                                     options:0
                                       error:&error];
if (error != nil)
{
    NSLog(@"%s data read error %@", __FUNCTION__, error);
    return;
}

NSDictionary *results = [NSJSONSerialization JSONObjectWithData:data
                                                        options:0
                                                          error:&error];

if (error != nil)
{
    NSLog(@"%s JSON parse error %@", __FUNCTION__, error);
    return;
}

NSLog(@"username = %@", results[@"username"]);
NSLog(@"session = %@", results[@"session"]);
NSLog(@"token = %@", results[@"token"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:41:37.380

这是在 iOS 应用程序中解析 HTML 的绝佳[教程](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios)。

它为您提供了解析一个非常基本的 HTML 页面的详细逐步概述，因此它非常适合您上面的示例。

它还向您展示了如何将已解析的标题放入 TableView。我认为了解解析过程对您来说更有用，而不仅仅是将代码发布到您的问题中。

# git - 将 GitHub 与 WampServer 一起使用？或者，只包括某些目录？

> ID：13632321
> 
> 赞同：1
> 
> 时间：2012-11-29T18:29:33.927
> 
> 标签：git, github, wampserver

如果以前有人问过这个问题，请原谅我，但我一直在进行大量搜索，但无法确定解决问题的最佳方法。

我一直是一个项目的唯一开发人员，现在可能会涉及另一个人。到目前为止，我以前从未使用过版本控制系统，除了每天简单地备份我的文件（穴居人的版本控制:-)），但现在我需要一种多人更新文件的方法。

在做了一些研究之后，似乎 GitHub 是一个不错的选择，所以我注册了他们最便宜的计划，并一直在学习如何使用它。我能够创建存储库、更新文件等，但我有一个问题，我将在下面详细说明。

我在我的开发计算机上使用 WampServer，以便在将修改后的文件上传到我的实时服务器之前测试更改。我的站点的根目录位于此处：

```
C:\wamp\www\[project]\www\ 
```

我的网站使用了一个 CMS，它已安装在我的本地计算机上，因此子目录中有成千上万个 CMS 文件，我只想将我的“自定义”文件（即非 CMS 文件）上传到 GitHub。

实现这一目标的最佳方法是什么？

我阅读了 .gitignore 文件以排除目录，经过快速测试，它似乎可以工作，所以我想知道的是：我是否应该创建一个新的 Git 存储库`C:\wamp\www\[project]\www\`，然后通过将它们放在.gitignore 文件？看起来这应该可行，但我想确保这是解决此问题的正确方法。

谢谢你的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:36:58.570

从 git 控制中删除您不想使用的目录，将它们添加到 .gitignore，然后将此目录复制回来。

# c# - POCO、行为和持久性无知

> ID：13632323
> 
> 赞同：5
> 
> 时间：2012-11-29T18:30:00.093
> 
> 标签：c#, domain-driven-design, persistence, poco

从我读过的内容来看，POCO 类应该是持久性无知的，并且不应该包含对存储库的引用。

**Q1。**鉴于上述情况，我将如何填充 QuestionBlocks 集合？我已经读过 POCO 应该包含行为，所以你不会以一个贫血模型结束，所以我有点困惑，一个人应该如何在没有持久性的情况下做到这一点。如果是这种情况，那么您会在 POCO 中采取什么样的行为？

**前任：**

```
 public class Survey
    {
        public int SurveyId { get; set; }
        public string Title { get; set; }
        public int BrandId { get; set; }
        public DateTime Created { get; set; }
        public List<SurveyQuestionBlock> QuestionBlocks { get; set; }

        [ResultColumn]
        public string Name { get; set; }

        /// <summary>
        /// Constructor
        /// </summary>
        public Survey()
        {
            Created = DateTime.Now;
            QuestionBlocks = new List<SurveyQuestionBlock>();
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T19:05:24.013

我会附加另一个观点：POCO 状态用于不依赖于任何框架的对象。POJO 的 wiki 定义对我来说比 POCO 的定义更有意义：

*   [http://en.wikipedia.org/wiki/Plain_Old_Java_Object](http://en.wikipedia.org/wiki/Plain_Old_Java_Object)

套用 POJO 的 wiki 定义，我们可以说 POCO 对象可能不会被迫：

**一、扩展预设类：**

```
public class MyClass : AnyFramework.ObjectBase {... 
```

**二、实现预先指定的接口**

```
public class MyClass : AnyFramework.IHaveDependency {... 
```

**三、包含预先指定的属性**

```
[AnyFramework.KeyAttribute]
public class MyClass  {... 
```

考虑到这一点*（几乎允许其他任何事情）*，就意味着要注意对象状态。换句话说，如果对象会**检查业务逻辑，那就是正确的**。

但是任何 POCO 对象都可以**在**框架中使用。今天它主要用于负责持久性的 ORM。所有应用层都在使用 POCO 对象，而数据层负责加载和持久化（CRUD）。这主要是通过这些 POCO 对象的代理完成的。

因此，POCO 可以用作完整的业务对象，它可以照顾自己（检查集合项、属性的正确性......）。这使它与 DTO 不同

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T18:54:35.517

> 鉴于上述情况，我将如何填充 QuestionBlocks 集合？

从数据库读取时，持久性基础设施应填充 QuestionBlocks 集合 - 重构。重构不应该调用行为，它应该只在 POCO 上设置适当的字段。这是存储库的责任。存储库通常是从应用程序服务中引用的，它设置了调用实体行为的阶段。

> 如果是这种情况，那么您会在 POCO 中采取什么样的行为？

POCO 实体中的行为应该关注对实体本身进行更改以及维护不变量——即确保实体的完整性。在您的示例中，POCO 上最简单的行为应该是向调查集合添加新问题块的方法。理想情况下，您可以将调查实体上的许多属性设为只读：

```
 public class Survey
    {
        public int SurveyId { get; private set; }
        public string Title { get; private set; }
        public int BrandId { get; private set; }
        public DateTime Created { get; private set; }
        public IList<SurveyQuestionBlock> QuestionBlocks { get; private set; }
        public string Name { get; private set; }

        public void AddQuestionBlock(string questionBlockInfo)
        { 
          this.QuestionBlocks.Add(new SurveyQuestionBlock(...));
        }

        public Survey()
        {
            Created = DateTime.Now;
            QuestionBlocks = new List<SurveyQuestionBlock>();
        }
    } 
```

持久层应该能够通过反射设置只读属性的值。您可以更进一步，仅将问题块集合公开为只读集合，以确保只能从实体本身内部对其进行修改。

# java - Java：未知Java语法的解释

> ID：13632324
> 
> 赞同：1
> 
> 时间：2012-11-29T18:30:04.587
> 
> 标签：java, syntax

有人可以告诉我这是在做什么。它是一个拥有自身扩展泛型的类？那有什么意思？

```
 public abstract class AbstractStructureBuilder<T extends AbstractStructureBuilder> implements IStructureBuilder
    {

       //abstract and concrete methods in here
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:32:36.267

正确答案和一些理性在这里给出：[http ://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeParameters.html#FAQ106](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeParameters.html#FAQ106)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:32:43.040

这意味着`AbstractStructureBuilder`有一个类型参数`extends AbstractStructureBuilder`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T18:37:15.007

那里没有太多，但我猜这可能是一个表示树或图中节点的类。该类将泛化 getter 和 setter。例如，getChildren 方法可能会返回一个 T 列表。然后可以扩展 AbstractStructureBuilder 以例如在家族树中创建节点。如果你这样做，那么 getter 将返回`List<FamilyTreeNode>`。

# java - 用于显示行车路线的 Android 项目不起作用

> ID：13632326
> 
> 赞同：0
> 
> 时间：2012-11-29T18:30:12.133
> 
> 标签：java, android, google-maps, driving-directions

我正在按照本教程开发一个 android 应用程序，用于显示 2 点之间的行驶路线 - [http://asmncl.blogspot.co.uk/2012/04/android-draw-route-map-between-two.html](http://asmncl.blogspot.co.uk/2012/04/android-draw-route-map-between-two.html) ，但我的应用程序在我运行后停止。我没有使用 kml，因为我知道 Google 不再支持 kml。但是，当我运行这段代码时，它会停止。谁能告诉我，可能是什么原因？

**编辑**事实证明，我没有在我的 androidmanfest.xml 中包含谷歌地图库。现在，它没有显示任何错误，但在手机上安装后它崩溃了。谁能告诉我，为什么？

谢谢

**RoutePath-主要活动**

```
public class RoutePath extends MapActivity { 

        MapView mapView;
        private RoutePath _activity;
        GeoPoint srcGeoPoint,destGeoPoint;
        private static List<Overlay> mOverlays;

        @Override
        public void onCreate(Bundle savedInstanceState) { 
            super.onCreate(savedInstanceState);
            SharedData data = SharedData.getInstance();
            mapView = new MapView(this,data.getAPIKEY());
            mapView.setClickable(true);        
            setContentView(mapView); 
            _activity = this;
            double src_lat = data.getSrc_lat();
            double src_long = data.getSrc_lng();
            double dest_lat = data.getDest_lat();
            double dest_long = data.getDest_lng();

            if(src_lat == -1 || src_long == -1 || dest_lat == -1 || dest_long == -1){
                showAlert("Please enter source and destination points");
            }else{

                srcGeoPoint = new GeoPoint((int) (src_lat * 1E6),(int) (src_long * 1E6)); 
                destGeoPoint = new GeoPoint((int) (dest_lat * 1E6),(int) (dest_long * 1E6)); 

                List<Overlay> mapOverlays = mapView.getOverlays();
                Drawable srcdrawable = this.getResources().getDrawable(R.drawable.pin_green);
                CustomItemizedOverlay srcitemizedOverlay = new CustomItemizedOverlay(srcdrawable);
                //CustomItemizedOverlay srcitemizedOverlay = new CustomItemizedOverlay(getDrawable("com/agarwal/route/pin_green.png"));
                OverlayItem srcoverlayitem = new OverlayItem(srcGeoPoint, "Hello!", "This is your Location.");

                Drawable destdrawable = this.getResources().getDrawable(R.drawable.pin_red);
                CustomItemizedOverlay  destitemizedOverlay = new CustomItemizedOverlay( destdrawable );
               // CustomItemizedOverlay destitemizedOverlay = new CustomItemizedOverlay(getDrawable("com/agarwal/route/pin_red.png"));
                OverlayItem destoverlayitem = new OverlayItem(destGeoPoint, "Hello!", "This is dest Location.");

                srcitemizedOverlay.addOverlay(srcoverlayitem);
                destitemizedOverlay.addOverlay(destoverlayitem);

                mapOverlays.add(srcitemizedOverlay);
                mapOverlays.add(destitemizedOverlay);

                connectAsyncTask _connectAsyncTask = new connectAsyncTask();
                _connectAsyncTask.execute();        
                mapView.setBuiltInZoomControls(true);
                mapView.displayZoomControls(true);
                mOverlays = mapView.getOverlays();
                mapView.getController().animateTo(srcGeoPoint); 
                mapView.getController().setZoom(12); 
                //SharedData data = SharedData.getInstance();
                data.setAPIKEY("APIKEY");
                data.setSrc_lat(17);
                data.setSrc_lng(78);
                data.setDest_lat(18);
                data.setDest_lng(77);
                startActivity(new Intent(RoutePath.this,RoutePath.class));

            } 
        }
        @Override 
        protected boolean isRouteDisplayed() { 
            // TODO Auto-generated method stub 
            return false; 
        } 

        private class connectAsyncTask extends AsyncTask<Void, Void, Void>{
            private ProgressDialog progressDialog;
            @Override
            protected void onPreExecute() {
                // TODO Auto-generated method stub
                super.onPreExecute();
                progressDialog = new ProgressDialog(_activity);
                progressDialog.setMessage("Fetching route, Please wait...");
                progressDialog.setIndeterminate(true);
                progressDialog.show();
            }
            @Override
            protected Void doInBackground(Void... params) {
                // TODO Auto-generated method stub
                fetchData();
                return null;
            }
            @Override
            protected void onPostExecute(Void result) {
                // TODO Auto-generated method stub
                super.onPostExecute(result);            
                if(doc!=null){
                    Overlay ol = new MyOverlay(_activity,srcGeoPoint,srcGeoPoint,1);
                    mOverlays.add(ol);
                    NodeList _nodelist = doc.getElementsByTagName("status");
                    Node node1 = _nodelist.item(0);
                    String _status1  = node1.getChildNodes().item(0).getNodeValue();
                    if(_status1.equalsIgnoreCase("OK")){
                        NodeList _nodelist_path = doc.getElementsByTagName("overview_polyline");
                        Node node_path = _nodelist_path.item(0);
                        Element _status_path = (Element)node_path;
                        NodeList _nodelist_destination_path = _status_path.getElementsByTagName("points");
                        Node _nodelist_dest = _nodelist_destination_path.item(0);
                        String _path  = _nodelist_dest.getChildNodes().item(0).getNodeValue();
                        List<GeoPoint> _geopoints = decodePoly(_path);
                        GeoPoint gp1; 
                        GeoPoint gp2; 
                        gp2 = _geopoints.get(0);
                        Log.d("_geopoints","::"+_geopoints.size());
                        for(int i=1;i<_geopoints.size();i++) // the last one would be crash 
                        { 

                            gp1 = gp2;
                            gp2 = _geopoints.get(i);
                            Overlay ol1 = new MyOverlay(gp1,gp2,2,Color.BLUE);
                            mOverlays.add(ol1);
                        } 
                        Overlay ol2 = new MyOverlay(_activity,destGeoPoint,destGeoPoint,3);
                        mOverlays.add(ol2);

                        progressDialog.dismiss();
                    }else{
                        showAlert("Unable to find the route");
                    }

                    Overlay ol2 = new MyOverlay(_activity,destGeoPoint,destGeoPoint,3);
                    mOverlays.add(ol2);
                    progressDialog.dismiss();
                    mapView.scrollBy(-1,-1);
                    mapView.scrollBy(1,1);
                }else{
                    showAlert("Unable to find the route");
                }

            }

        }
        Document doc = null;
        private void fetchData()
        {
            StringBuilder urlString = new StringBuilder();
            urlString.append("http://maps.google.com/maps/api/directions/xml?origin=");
            urlString.append( Double.toString((double)srcGeoPoint.getLatitudeE6()/1.0E6 )); 
            urlString.append(","); 
            urlString.append( Double.toString((double)srcGeoPoint.getLongitudeE6()/1.0E6 )); 
            urlString.append("&destination=");//to 
            urlString.append( Double.toString((double)destGeoPoint.getLatitudeE6()/1.0E6 )); 
            urlString.append(","); 
            urlString.append( Double.toString((double)destGeoPoint.getLongitudeE6()/1.0E6 )); 
            urlString.append("&sensor=true&mode=driving");     
            Log.d("url","::"+urlString.toString());
            HttpURLConnection urlConnection= null; 
            URL url = null; 
            try 
            { 
                url = new URL(urlString.toString()); 
                urlConnection=(HttpURLConnection)url.openConnection(); 
                urlConnection.setRequestMethod("GET"); 
                urlConnection.setDoOutput(true); 
                urlConnection.setDoInput(true); 
                urlConnection.connect(); 
                DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); 
                DocumentBuilder db = dbf.newDocumentBuilder();
                doc = (Document) db.parse(urlConnection.getInputStream());//Util.XMLfromString(response);
            }catch (MalformedURLException e){ 
                e.printStackTrace(); 
            }catch (IOException e){ 
                e.printStackTrace(); 
            }catch (ParserConfigurationException e){ 
                e.printStackTrace(); 
            }
            catch (SAXException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        private List<GeoPoint> decodePoly(String encoded) {

            List<GeoPoint> poly = new ArrayList<GeoPoint>();
            int index = 0, len = encoded.length();
            int lat = 0, lng = 0;

            while (index < len) {
                int b, shift = 0, result = 0;
                do {
                    b = encoded.charAt(index++) - 63;
                    result |= (b & 0x1f) << shift;
                    shift += 5;
                } while (b >= 0x20);
                int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
                lat += dlat;

                shift = 0;
                result = 0;
                do {
                    b = encoded.charAt(index++) - 63;
                    result |= (b & 0x1f) << shift;
                    shift += 5;
                } while (b >= 0x20);
                int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
                lng += dlng;

                GeoPoint p = new GeoPoint((int) (((double) lat / 1E5) * 1E6),
                        (int) (((double) lng / 1E5) * 1E6));
                poly.add(p);
            }

            return poly;
        }
        private void showAlert(String message){
            AlertDialog.Builder alert = new AlertDialog.Builder(_activity);
            alert.setTitle("Error");
            alert.setCancelable(false);
            alert.setMessage(message);
            alert.setPositiveButton("Ok",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub

                }
            });
            alert.show();
        }
        private Drawable getDrawable(String fileName){
            return Drawable.createFromStream(_activity.getClass().getClassLoader().getResourceAsStream(fileName), "pin");
        }

    } 
```

我创建了另外 3 个类 -SharedData.java、CustomItemizedOverlay.java、MyOverrlay.java。我通过 SharedData.java 传递我的 API_KEY。

**主.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <com.google.android.maps.MapView
     android:id="@+id/mapid"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:enabled="true"
     android:clickable="true"
     android:apiKey="APIKEY"
     />
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:text="@string/hello_world"
            tools:context=".RoutePath" />

    </RelativeLayout> 
```

**AndroidManifest.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.example.path"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="15" />

        <application
            android:icon="@drawable/ic_launcher"
            android:label="@string/app_name"
            android:theme="@style/AppTheme" >
            <uses-library android:name="com.google.android.maps"/>
            <activity
                android:name=".RoutePath"
                android:label="@string/title_activity_path" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        </application>
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission>
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
        <uses-permission android:name="android.permission.INTERNET"></uses-permission>

    </manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:16:27.720

您应该在布局中的 MapView 中添加您的 Google Map Api Key Debug One ...

# facebook - Facebook 广告 API 统计信息和“unique_impressions”

> ID：13632327
> 
> 赞同：0
> 
> 时间：2012-11-29T18:30:17.353
> 
> 标签：facebook, api, facebook-graph-api, facebook-c#-sdk, ads

查询广告系列的统计信息时，会返回“unique_impressions”值，这是否等同于 Facebook 广告管理器中显示的“Reach”？

谢谢，埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:26:23.360

答案是：是的。这是在 Facebook 的 PMD 小组中回答的问题。

# vb.net - 对于使用 EPPlus 不跳过空白的工作表中的每个循环单元格

> ID：13632330
> 
> 赞同：1
> 
> 时间：2012-11-29T18:30:20.793
> 
> 标签：vb.net, excel, epplus

我目前有一个这样的代码块......

```
For Each cell In worksheet.Cells(8, 2, lastRow, lastCol)
    Select Case cell.Start.Column
        Case Is = 2
            'Do stuff
    End Select
Next 
```

问题是，如果一个单元格为空，它会跳过该单元格并且永远不会进入分配给它的 Case。我怎样才能让它不跳过空白单元格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:06:37.587

我认为这不是 EPPlus 的问题。那件事有助于减少存储在文件中的数据。

我们可以很容易地通过语句检查集合的包含`worksheet.Cells(8, 2, lastRow, lastCol).Count()`。它返回非空白单元格的数量。该集合不包含所有单元格，因此`for each`循环无法帮助您满足您的需求。

我想从`for each`双`for`循环转换。对不起 C# 代码，因为我不知道 VB :(

```
for (int i = 8; i <= lastRow; i++)
{
    for (int j = 2; j <= lastCol; j++)
    {
        cell = worksheet.Cells[i, j];

        // Inside for each loop contents...
        Select Case cell.Start.Column
            Case Is = 2
                'Do stuff
        End Select
    }
} 
```

# c# - ReadOnlyCollections 和 Threads - 此代码安全吗？

> ID：13632331
> 
> 赞同：2
> 
> 时间：2012-11-29T18:30:21.713
> 
> 标签：c#, locking

我有一个带有 ReadOnlyCollection 的重线程应用程序，如下所示：

```
internal static ReadOnlyCollection<DistributorBackpressure44> DistributorBackpressure44Cache
{
    get
    {
        return _distributorBackpressure44;
    }
    set
    {
        _distributorBackpressure44 = value;
    }
} 
```

我在应用程序中有一个地方替换了这个集合（总是在一个单独的线程上），它看起来像这样：

```
 CicApplication.DistributorBackpressure44Cache = new ReadOnlyCollection<DistributorBackpressure44>(someQueryResults.ToList()); 
```

我在代码中有很多地方可以访问这个集合，通常是通过 Linq 查询，在许多不同的线程中。代码通常看起来像这样：

```
foreach (DistributorBackpressure44 distributorBackpressure44 in CicApplication.DistributorBackpressure44Cache.Where(row => row.Coater == coater && row.CoaterTime >= targetTime).ToList())
{
 ...
 ...
} 
```

我假设我正在做的是线程安全的，不需要做任何锁定？我不确定的是，如果上面的查询发生在集合被另一个线程替换的完全相同的时间，会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T18:34:45.007

引用分配是原子的，所以是的，它是线程安全的。但前提是您不依赖数据在写入后的那一刻准备好被读取。这是因为缓存，您可能需要加入 a`volatile`来防止这种情况。

另请参阅[引用分配是原子的，那么为什么需要 Interlocked.Exchange(ref Object, Object)？](https://stackoverflow.com/questions/2192124/reference-assignment-is-atomic-so-why-is-interlocked-exchangeref-object-object).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:50:56.353

这是不太可能的。在一个完全不可预测的时刻，在线程分配属性之后，其他线程将看到新的集合。他们会在此之前读取一个陈旧的值。这可能是 null 或者可能是另一个内容完全不同的集合。

随机性会给你带来麻烦。请注意，这与集合是否为只读无关。线程使用陈旧的值也许是可以的，但这并不常见。最重要的是你没有提到这没关系，所以你可能还没有考虑到后果。你需要考虑清楚这一点。在属性 getter 和 setter 中您自己无能为力，线程将不得不在它们之间进行协商。这就是使线程变得*困难*的原因，并且使您彻底分析代码中共享可变数据的位置非常重要。喜欢这个楼盘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-27T14:29:25.057

听起来在您的情况下这不是问题，但是如果`ReadOnlyCollection`包装的基础集合发生变化，您可能会遇到问题。

例如，以下代码块将抛出`InvalidOperationException`消息“集合已修改；枚举操作可能无法执行”，因为在另一个线程上枚举时，底层`List<int>`已从其中删除了一个项目。

```
var numbers = new List<int>() {1,2,3,4,5};
var readOnly = new ReadOnlyCollection<int>(numbers);

ThreadPool.QueueUserWorkItem(x => {
    foreach (int number in readOnly)
    {
        Console.WriteLine(number);
        Thread.Sleep(300);
    }
});

Thread.Sleep(150);
numbers.Remove(2); 
```

# c++ - SystemParametersInfo 函数的问题

> ID：13632336
> 
> 赞同：1
> 
> 时间：2012-11-29T18:30:26.037
> 
> 标签：c++, winapi, windows-xp

请帮忙。我想使用 SystemParametersInfo 函数更改系统范围的参数。我在 Windows XP 中使用 Visual Studio 2008。这是我的代码

```
NONCLIENTMETRICS ncm;
memset(&ncm,0,sizeof(NONCLIENTMETRICS));
ncm.cbSize = sizeof(NONCLIENTMETRICS);
#if (WINVER >= 0x0600)
    ncm.cbSize -= 4;
#endif

if(SystemParametersInfo(SPI_GETNONCLIENTMETRICS,sizeof(NONCLIENTMETRICS), &ncm, 0)!=0)
{
    wcscpy_s(ncm.lfCaptionFont.lfFaceName,L"Sylfaen");
    wcscpy_s(ncm.lfMenuFont.lfFaceName,L"Sylfaen");
    wcscpy_s(ncm.lfMessageFont.lfFaceName,L"Sylfaen");
    SystemParametersInfo(SPI_SETNONCLIENTMETRICS,sizeof(NONCLIENTMETRICS), &ncm, 0);
} 
```

代码运行流畅，但是系统托盘的图标变大了

# asp.net - ASP.NET 通常多久回收一次其应用程序 (AppDomains)

> ID：13632337
> 
> 赞同：1
> 
> 时间：2012-11-29T18:30:27.123
> 
> 标签：asp.net, asp.net-mvc

我在 Applications_Start 方法 (Global.asax) 中初始化我的 Web 应用程序的静态状态。当时我写了一条消息记录。突然我意识到这个方法每 10 分钟调用一次。

是纠正行为吗？我希望 ASP.NET 将其应用程序保留至少几个小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:34:03.723

你的期望是不正确的。这是在 IIS 配置中的应用程序池设置中设置的。我认为默认值为 20 分钟。如果不应回收应用程序池，则可以将其更改为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:35:52.780

这不是典型的。某些原因导致它重新启动，它不应该经常这样做。查看[如何找出重新启动 ASP.NET Web 应用程序的原因](https://stackoverflow.com/questions/8678024/how-to-find-out-why-an-asp-net-web-application-is-being-restarted)问题，了解如何记录有关重新启动原因的详细信息。

由于您正在写出日志文件，因此您可能正在将它们写入被监视重新编译的位置，这将导致 appdomain 重新启动。查看帖子[是什么导致 IIS 中的应用程序池回收？](https://stackoverflow.com/questions/302110/what-causes-an-application-pool-in-iis-to-recycle)

查看[iis.net](http://www.iis.net/configreference/system.applicationhost/applicationpools/add/recycling/periodicrestart)上的这篇文章，了解回收的默认设置。这是 29 小时，所以除非为您更改了此设置，否则是其他原因造成的，而不是自动回收。

# jquery - 如果单击然后如果单击嵌套的 div

> ID：13632342
> 
> 赞同：0
> 
> 时间：2012-11-29T18:30:59.773
> 
> 标签：jquery

我不太确定如何单击在您单击父项后显示的 div ..？有道理？

这是一个示例代码片段。

```
$('.item').bind('click', function(e){
var showme = $(this).find(".itemcontrols");
$(showme).toggle();
}); 

$('#add').bind('click', function(e){
alert();
});     

<div class="item ui-state-default">
    <div class="itemcontrols" style="display: block;">
        <div id="add">add</div>
        <div id="full">full</div>
        <div id="del">del</div>
    </div>
</div>

.item{display:none;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:51:05.880

您可以`.itemcontrol`为`.itemcontrols`.

```
<div class="item ui-state-default">
  <div class="itemcontrols">
    ...
    <div id="add" class="itemcontrol">add</div>
    ...
  </div>
</div>​ 
```

并使用该函数停止所有`.itemcontrol`元素的传播。[`.stopPropagation()`](http://api.jquery.com/event.stopPropagation/)

```
$('.itemcontrols .itemcontrol').on('click', function(e) {
  e.stopPropagation();
});​ 
```

除此之外，我建议您使用[`.on`](http://api.jquery.com/on/)绑定事件，这是当前推荐的方式。

```
$('.item').on('click', function(e) {
  $(".itemcontrols", this).toggle();
});

$('.itemcontrols .itemcontrol').on('click', function(evt) {
  evt.stopPropagation();
});​ 
```

[看到它住在这里。](http://jsfiddle.net/2P2xX/)

# python - python字典的优化输出

> ID：13632343
> 
> 赞同：3
> 
> 时间：2012-11-29T18:31:01.900
> 
> 标签：python, algorithm

我很难解决其中一个编程难题。我有一本字典，其中包含项目（用 i# 表示）和价值作为项目的价格。可以组合项目以形成组合包。

```
{('i2', 'i3'): '4', ('i1',): '1',('i1', 'i3', 'i4'): '6.5', ('i3',): '3',('i1', 'i2', 'i3'): '4.5', ('i2',): '2', ('i4',): '4'} 
```

我想返回给定输入项目的最低价格。如果他从组合包中以最低价格获得额外物品，用户将不会有任何问题：

1.  对于输入 i1，它应该返回价格 1。（这是所有 i1 商品的最低价格）
2.  对于输入 (i1,i2)，应返回 3。
3.  对于输入 (i1,i2,i3,i4)，应返回 8.5
4.  对于输入 (i1,i1,i2,i3,i4)，应返回 9.5

有谁知道如何进行？使用哪种算法？

谢谢， 苏尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:40:35.990

使用[**itertools.combinations()**](http://docs.python.org/2/library/itertools.html#itertools.combinations)生成 x 个包的组合。然后，检查每个组合是否包含所需的项目，并找到价格最低的有效组合。

要查找 4 种不同物品包装的所有组合：

```
d = {('i2', 'i3'): '4', ('i1',): '1',('i1', 'i3', 'i4'): '6.5', ('i3',): '3',
     ('i1', 'i2', 'i3'): '4.5', ('i2',): '2', ('i4',): '4'}
from itertools import combinations
combos = list(combinations(d, 4)) # you should try combos of different lenghts, 
                                  # from 1 to the number of desired items 
```

为了说明，让我们看一下其中一个组合。`print combos[0]`给出：
`(('i2', 'i3'), ('i1',), ('i1', 'i3', 'i4'), ('i3',))`

并获得这个组合的价格：

```
sum([float(d[item]) for item in combos[0]]) 
```

这给出了 14.5

我把它留给你找到最便宜的合适组合:)

# c++ - 了解 C++11 内存栅栏

> ID：13632344
> 
> 赞同：41
> 
> 时间：2012-11-29T18:31:03.253
> 
> 标签：c++, c++11, atomic

我试图理解 c++11 中的内存栅栏，我知道有更好的方法可以做到这一点，原子变量等等，但想知道这种用法是否正确。我意识到这个程序没有做任何有用的事情，我只是想确保栅栏函数的使用符合我的想法。

基本上，该版本确保在围栏之前在此线程中所做的任何更改对围栏之后的其他线程都是可见的，并且在第二个线程中，对变量的任何更改在围栏之后的线程中立即可见？

我的理解正确吗？还是我完全错过了重点？

```
#include <iostream>
#include <atomic>
#include <thread>

int a;

void func1()
{
    for(int i = 0; i < 1000000; ++i)
    {
        a = i;
        // Ensure that changes to a to this point are visible to other threads
        atomic_thread_fence(std::memory_order_release);
    }
}

void func2()
{
    for(int i = 0; i < 1000000; ++i)
    {
        // Ensure that this thread's view of a is up to date
        atomic_thread_fence(std::memory_order_acquire);
        std::cout << a;
    }
}

int main()
{
    std::thread t1 (func1);
    std::thread t2 (func2);

    t1.join(); t2.join();
} 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-29T19:38:03.523

您的使用实际上并*不能*确保您在评论中提到的内容。也就是说，您对栅栏的使用并不能确保您的分配对`a`其他线程可见，或者您从中读取的值`a`是“最新的”。这是因为，尽管您似乎对应该在哪里使用栅栏有了基本的想法，但您的代码实际上并不满足这些栅栏“同步”的确切要求。

这是一个不同的例子，我认为它更好地展示了正确的用法。

```
#include <iostream>
#include <atomic>
#include <thread>

std::atomic<bool> flag(false);
int a;

void func1()
{
    a = 100;
    atomic_thread_fence(std::memory_order_release);
    flag.store(true, std::memory_order_relaxed);
}

void func2()
{
    while(!flag.load(std::memory_order_relaxed))
        ;

    atomic_thread_fence(std::memory_order_acquire);
    std::cout << a << '\n'; // guaranteed to print 100
}

int main()
{
    std::thread t1 (func1);
    std::thread t2 (func2);

    t1.join(); t2.join();
} 
```

atomic 标志上的加载和存储不同步，因为它们都使用宽松的内存排序。如果没有栅栏，这段代码将是数据竞争，因为我们在不同线程中对非原子对象执行冲突操作，如果没有栅栏和它们提供的同步，则`a`.

然而，有了栅栏，我们确实获得了同步，因为我们已经保证线程 2 将读取线程 1 写入的标志（因为我们循环直到看到该值），并且因为原子写入发生在释放栅栏之后并且原子读取发生- 在获取围栏之前，围栏同步。（具体要求见§ 29.8/2。）

这种同步意味着任何发生的事情——在发布栅栏发生之前——在任何事情发生之前——在获取栅栏之后。因此，非原子写入`a`发生在非原子读取之前`a`。

当您在循环中编写变量时，事情会变得更加棘手，因为您可能会为某些特定的迭代而不是其他迭代建立先发生关系，从而导致数据竞争。

```
std::atomic<int> f(0);
int a;

void func1()
{
    for (int i = 0; i<1000000; ++i) {
        a = i;
        atomic_thread_fence(std::memory_order_release);
        f.store(i, std::memory_order_relaxed);
    }
}

void func2()
{
    int prev_value = 0;
    while (prev_value < 1000000) {
        while (true) {
            int new_val = f.load(std::memory_order_relaxed);
            if (prev_val < new_val) {
                prev_val = new_val;
                break;
            }
        }

        atomic_thread_fence(std::memory_order_acquire);
        std::cout << a << '\n';
    }
} 
```

此代码仍会导致栅栏同步，但不会消除数据竞争。例如，如果`f.load()`碰巧返回 10，那么我们知道`a=1`, `a=2`, ...`a=10`都发生在该特定之前`cout<<a`，但我们*不*知道`cout<<a`发生之前`a=11`。这些是不同线程上的冲突操作，没有发生之前的关系；一场数据竞赛。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-29T18:43:12.720

您的用法是正确的，但不足以保证任何有用的东西。

例如，如果编译器`a = i;`想要这样，编译器可以自由地在内部实现：

```
 while(a != i)
 {
    ++a;
    atomic_thread_fence(std::memory_order_release);
 } 
```

所以另一个线程可能会看到任何值。

当然，编译器永远不会实现这样的简单赋值。但是，在某些情况下，类似的令人困惑的行为实际上是一种优化，因此依赖以任何特定方式在内部实现的普通代码是一个非常糟糕的主意。这就是为什么我们有像原子操作这样的东西，而栅栏在与此类操作一起使用时只会产生有保证的结果。

# php - 如何在视图中使用数据库对象

> ID：13632346
> 
> 赞同：0
> 
> 时间：2012-11-29T18:31:25.957
> 
> 标签：php, codeigniter

我在使用时无法将数据传递给我的视图，`$query->row()`我似乎只能在控制器中使用它时获得值。

这是模型：

```
public function get_post($post_id) {

    $this->db->select('id, date, title');
    $this->db->from('posts');
    $this->db->where('id', $post_id);
    $this->db->limit(1);

    $query = $this->db->get();

    $row = $query->row();

    $row->title = html_purify($row->title);
    $row->date_posted_iso = date('c', $row->date);

    return $row;
} 
```

控制器：

```
public function post($post_id) {

    $row = $this->post_model->get_post($post_id);
    $this->data['post'] = $row;

    $this->data['meta_title'] = $row->title;

    $this->template->build('post/show_post', $this->data); 
```

}

风景：

```
<?php 

foreach ($post as $row): 

echo $row->date;
echo $row->title;

endforeach;

?> 
```

控制器中的行`$this->data['meta_title'] = $row->title;`正常工作，但我不想在控制器中明确定义所有这些变量。

我已经尝试过使用 foreach 和没有得到`Object of class stdClass could not be converted to string`

如何使用 正确地在我的视图中回显该值`$query->row()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:55:35.620

当您返回一行时，您不需要`foreach`循环，请尝试将您的视图代码更改为：

```
<?php  
    echo $post->date;
    echo $post->title;
?> 
```

该变量应该是`$post`而不是您在控制器的数组中`$row`定义`post`的元素。`data`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:28:26.383

尝试这样做......

```
 public function post($post_id)
 {

   $row = $this->post_model->get_post($post_id);

   $model = array();

   $model['post'] = $row;

   $this->template->build('post/show_post', $model);
} 
```

在视图中这样做

```
foreach($post as $data)

  {

      echo $data['title'];
  } 
```

# python - 如何将参数从一个函数传递到另一个函数？

> ID：13632347
> 
> 赞同：5
> 
> 时间：2012-11-29T18:31:31.960
> 
> 标签：python

对不起新手问题，但我对python比较陌生。我想编写一个将关键字和值参数传递给另一个函数的函数：

例如

```
def function_that_passes_arguments(arguments):
    some_other_function(arguments) 
```

所以当我调用第一个函数时，它们会传递给第二个函数......例如

```
function_that_passes_arguments(arg1=1, arg2=2) 
```

有效地

```
some_other_function(arg1=1, arg2=2) 
```

参数名称会改变，因此将关键字和值从一个函数传递给另一个函数很重要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T18:32:48.513

接受`*args, **kwargs`并将它们传递给被调用的函数：

```
def function_that_passes_arguments(*args, **kwargs):
    some_other_function(*args, **kwargs) 
```

在这两个地方，您还可以使用常规参数 - 唯一的要求是`*`and`**`参数是最后一个参数。

# java - 在谷歌应用引擎项目中使用 Java 小程序

> ID：13632348
> 
> 赞同：0
> 
> 时间：2012-11-29T18:31:33.397
> 
> 标签：java, google-app-engine, applet

我有一个关于在谷歌应用引擎上使用 java 小程序的问题。我创建了 2 个名为 InteractiveGraphView1 和 SimpleApplet 的类。在 SimpleApplet 中使用 InteractiveGraphView1 的对象。无论如何，我为这两个类使用了一些外部罐子。我为我的项目创建了一个名为“GraphApplet”的 jar。然后我将这个 jar 放入 WEB-INF/lib 中，并将它作为外部 jar 添加到 gae 项目中。为了确保我还将在 GraphApplet 类中使用的外部 jar 添加到我的 gae 项目中。我部署了 gae 项目，当我尝试运行小程序时，它给了我这个错误：

```
load: class SimpleApplet.class not found.
java.lang.ClassNotFoundException: SimpleApplet.class
at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Exception: java.lang.ClassNotFoundException: SimpleApplet.class
java.lang.RuntimeException: java.lang.NoClassDefFoundError:    edu/uci/ics/jung/algorithms/layout/Layout
at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NoClassDefFoundError: edu/uci/ics/jung/algorithms/layout/Layout
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Unknown Source)
at java.lang.Class.getConstructor0(Unknown Source)
at java.lang.Class.newInstance0(Unknown Source)
at java.lang.Class.newInstance(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$12.run(Unknown Source)
at java.awt.event.InvocationEvent.dispatch(Unknown Source)
at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
at java.awt.EventQueue.access$400(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.awt.EventQueue$2.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source)
at java.awt.EventQueue.dispatchEvent(Unknown Source)
at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
at java.awt.EventDispatchThread.run(Unknown Source)
  Caused by: java.lang.ClassNotFoundException: edu.uci.ics.jung.algorithms.layout.Layout
at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 20 more
Exception: java.lang.RuntimeException: java.lang.NoClassDefFoundError: edu/uci/ics/jung/algorithms/layout/Layout 
```

我该怎么办？

PS 我忘了告诉我在我的 GraphApplet 项目中使用了 JUNG 库。我还将它添加到谷歌应用引擎项目中

添加到 HMTL

```
<html> 
```

你好 App 引擎

```
This is my page<br>
Below you see an applet<br>
<br>
<Applet Code="SimpleApplet.java" archive="graphic.jar" width=200 Height=200>
</Applet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:06:39.457

Applet 只是一个 jar 文件，由浏览器下载并在客户端作为 applet 执行。

它与服务器代码无关。从服务器的角度来看，它只是一个静态文件。所以你不应该`WEB-INF/lib`在服务器库所在的地方撅嘴。只需将其放在您的 html 文件旁边即可。

对于引用其他 jar 的小程序，请参阅：[如何使用 ant 构建需要外部 jar 的小程序？](https://stackoverflow.com/questions/1718257/how-do-i-build-an-applet-which-needs-an-external-jar-using-ant)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T00:07:40.130

只需将您的 applet.jar 放到 WAR 目录的根目录即可

# mysql - MySQL 查询 - 具有多个评论的单个产品

> ID：13632351
> 
> 赞同：0
> 
> 时间：2012-11-29T18:31:43.083
> 
> 标签：mysql, database

提前感谢您提供的任何帮助！

我正在使用一个有点奇怪的数据库，其中产品通过标签相关而不是分层的。

我正在尝试使用表中的 SKU 编号选择单个产品，并将其与产品评论表连接起来，如下所示：

```
SELECT ims.master_sku, ims.title, ims.price, 
       ims.description, ir.mvp_number, ir.title,
       ir.review, ir.rating, ir.created_on
FROM default_inventory_master_skus AS ims
JOIN default_inventory_reviews AS ir
WHERE ims.master_sku = '22284319'
GROUP BY ir.review; 
```

这给了我大约 150 行——它们都是相同的产品，但包含不同的评论。我的问题是如何只返回一种产品（作为单行）并以某种方式将评论转换为与该产品相关的列？

再次感谢您的时间和帮助。

富有的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:22:49.097

你可以这样做，虽然它不是“关系”。

看起来有人想要 Excel 中的这些数据；）。

使用 MySQL，您将需要生成一条 SQL 语句并执行它。在 MySQL 内部（在过程中）或外部（例如，在 PHP 中）。首先查询枢轴列名称，将语句放在一起，然后执行它。

实现的想法在这里：

[http://www.artfulsoftware.com/infotree/queries.php#78](http://www.artfulsoftware.com/infotree/queries.php#78)

# css - mod_pagespeed 仅在样式表中指定宽度时调整图像大小 - 可能吗？

> ID：13632354
> 
> 赞同：2
> 
> 时间：2012-11-29T18:32:04.147
> 
> 标签：css, wordpress, mod-pagespeed

[mod_pagespeed](https://developers.google.com/speed/docs/mod_pagespeed/filter-image-optimize)可以很好地调整图像大小，但前提是设置了“标签上的宽度 = 和高度 = 属性或内联样式 = 属性”。如果您有一个包含数百篇文章的图片博客，并且在未来的某一天可能想要更改样式表，从而为图片带来新的宽度，这会有点问题。

那么，有没有办法同时获得 mod_pagespeed 图像调整大小*并*能够在样式表中指定图像宽度？mod_pagespeed 的 insert_image_dimensions 标志并没有真正的帮助，因为我无法指定图像高度，从而导致图像奇怪地拉伸。

该博客正在运行 Wordpress，因此也许有一些特定于 Wordpress 的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T19:32:01.267

不，在 mod_pagespeed 中不支持将 CSS 样式级联到页面中。这是一个非常棘手的重写器，因为根据定义，它需要实现一个完整的级联模型 + 在 CSS 处理上阻止 HTML 的输出。这并不是说不可能...

# java - 像 JMeter 这样的程序来测量每秒通过 Java 套接字的事务？

> ID：13632356
> 
> 赞同：0
> 
> 时间：2012-11-29T18:32:07.750
> 
> 标签：java, performance, sockets, optimization

我正在尝试测量我的服务器每秒可以处理的事务数。以前我使用 Apache JMeter 来查看使用基于 REST 的方法会产生什么。现在我想看看如果客户端只是通过套接字连接发送他们的请求，我可以期待什么样的性能。我想知道是否有一个程序可以充当客户端并像 JMeter 那样执行测量。

如果这个测试程序可以启动一些给定数量的线程来模拟多个客户端，那就太好了。显然，我还需要客户端能够接收一些将通过套接字发送的指定二进制数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:05:17.393

您应该能够将 JMeter 与[TCP 采样器一起使用](http://jmeter.apache.org/usermanual/component_reference.html#TCP_Sampler)

# android - DialogFragment 大小（宽度）被忽略

> ID：13632361
> 
> 赞同：10
> 
> 时间：2012-11-29T18:32:33.927
> 
> 标签：android, android-dialogfragment

我正在使用 DialogFragment 并发现当我制作内部 LinearLayout 的 layout_width = match_parent 时，宽度总是变为全屏，无论我尝试通过修复父视图的 layout_width 和 minWidth 或设置布局来施加多少约束CreateView() 中的尺寸

对话框.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="@dimen/dialog_width"
android:layout_height="@dimen/dialog_height"
android:minWidth="@dimen/dialog_width"
android:minHeight="@dimen/dialog_height"
android:orientation="vertical" 
android:paddingTop="5dp">

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
    ...
    </LinearLayout>
</LinearLayout> 
```

对话框.java

```
public class MyDialog extends DialogFragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        ...
        Resources r = getActivity().getResources();
        getDialog().getWindow().setLayout( (int)r.getDimension(R.dimen.dialog_width), (int)r.getDimension(R.dimen.dialog_height));
        return view;
    }
} 
```

我可以完成这项工作的唯一方法是设置内部 LinearLayout layout_width="@dimen/dialog_width

被黑的 dialog.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
... >

<LinearLayout
    android:layout_width="@dimen/dialog_width"
    android:layout_height="wrap_content">
    ...
    </LinearLayout>
...
</LinearLayout> 
```

哪个工作正常，但对对话的其他部分有一些影响。这是Android中的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-18T01:46:42.690

我还没有看到任何关于此的文档，但我在某处（可能在 SO）读到根布局的 layout_width 和 layout_height 参数在创建对话框时被“wrap_content”覆盖。

我不确定这是否真的是真的，但我看到的布局行为表明这是真的。无论如何，通过假设是这种情况，我已经让我的对话框正确布局。

您可能还想尽可能在​​内部布局上尝试 wrap_content 。硬编码的宽度往往不能在多个设备上很好地工作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-06-18T04:40:38.957

用这个替换你的代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="@dimen/dialog_width"
android:layout_height="@dimen/dialog_height"
android:minWidth="@dimen/dialog_width"
android:minHeight="@dimen/dialog_height"
android:orientation="vertical" 
android:paddingTop="5dp">
    ...
</LinearLayout> 
```

只用一个 LinearLayout 把所有的东西都放进去

# windows - 使用“start /b”优雅地终止从 Windows 批处理文件启动的 java (jetty/solr) 进程

> ID：13632362
> 
> 赞同：3
> 
> 时间：2012-11-29T18:32:33.507
> 
> 标签：windows, solr, batch-file, jetty, taskkill

我从一个批处理文件开始一个Java后台进程（Solr）

```
start /b java -jar ... 
```

问题是`start /b`它将屏蔽进程免受 SIGINT 信号的影响，请参阅`help start`. 这意味着它`taskkill /pid ...`不会工作，并且`taskkill /f /pid ...`会在不让它先执行关闭挂钩的情况下终止进程。

是否有另一种方法可以从 .bat 文件启动 Windows 上的后台进程，而无需打开窗口且不屏蔽 SIGINT？或者是否有另一种向 java VM 发送信号的方法，以便 Solr 在运行时优雅地关闭`start /b`？

如果可能的话，我想使用普通的批处理脚本而不是 VBScript 或类似的脚本，因为这是我们大多数用户可能最了解的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:09:30.463

不知道如何在 .bat 文件中执行此操作，但使用 Powershell 您可以执行以下操作：

```
Start-Process java -ArgumentList "-jar start.jar <args>" -WindowStyle Hidden 
```

然后您可以正常停止该过程。

运行`get-help Start-Process -detailed`以获取有关选项的更多信息 - 您还可以轻松地以其他用户身份运行该过程以及旧`start`版本不允许您执行的其他操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:40:17.433

你测试过吗？我跑了：

```
START /B notepad.exe 
```

然后使用关闭它

```
TASKKILL /PID 123456 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T15:33:18.260

我为我的特定案例（solr + jetty）找到了解决方法，请参阅[http://alaminsumon.blogspot.com.br/2009/06/how-to-stop-and-start-jetty-server-from.html](http://alaminsumon.blogspot.com.br/2009/06/how-to-stop-and-start-jetty-server-from.html)

# r - 使用 R 将数据框转换为宽表

> ID：13632369
> 
> 赞同：0
> 
> 时间：2012-11-29T18:32:56.267
> 
> 标签：r

我有以下数据框：

```
 T  S    V
1  s0  A  2.5
2  s1  A    1
3  s2  A    3
4  s0  B  5.6
5  s1  B    7
6  s0  C    8 
```

我想把它变成：

```
 s0  s1  s2
A 2.5   1   3
B 5.6   7   0
C   8   0   0 
```

以便它可以被`chisq.test`.

我尝试了以下方法，它只考虑了发生而不考虑值：

```
table(d$T, d$S) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T18:36:41.003

尝试：

```
xtabs(V ~ S + T, data=d)  # 
```

您实际上是在稍微扩展列联表的定义，但只要没有重复级别，我就没有小数值的问题。如果有，您可能需要使用`tapply`适当的聚合函数，如果您希望缺失因子水平为零，则使用“正确”或“归零”NA。

```
> td <- tapply(d$V, list(d$S, d$T), sum)
> td[is.na(td) ] <- 0
> td
   s0 s1 s2
A 2.5  1  3
B 5.6  7  0
C 8.0  0  0 
```

对于这种“长”到“宽”的转换，还有很多其他方法可能会起作用。plyr 包的方法具有更一致的语法。查看`dcast`plyr 中的函数。base-R中也有该`reshape`功能，并在 SO 中搜索工作示例。如果您开始需要速度，该`data.table`软件包值得一看。它的语法与 plyr 不同，需要进行一些心理调整，但它在“高级用户”中获得了追随者。

# ruby - Slim 模板，自定义 DOCTYPE

> ID：13632371
> 
> 赞同：2
> 
> 时间：2012-11-29T18:33:08.000
> 
> 标签：ruby, doctype, slim-lang

我有一个带有此文档类型的页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"> 
```

现在将其转换为苗条模板格式，bu slim 在预设中没有这样`doctype`的东西，我怀疑应该有办法指定自定义一个。现在我使用`|`：

```
|<!DOCTYPE html PUBLIC "...skip...>
html
 .... 
```

但它在行后没有换行符呈现`doctype`：

```
<!DOCTYPE html PUBLIC "...skip...><html ... 
```

哪个是不受欢迎的，有什么方法可以将它们放在不同的行上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:01:50.367

要在模板中的任何位置插入换行符，只需添加以下行：

```
= "\n" 
```

Slim 中的“=”命令执行给定的 Ruby 代码并将其附加到缓冲区。在这种情况下，Ruby 代码只是一个换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:16:31.070

你不需要这个`|`字符，Slim 允许[内联 HTML](http://rdoc.info/github/stonean/slim#Inline_html____HTML_style_)直接包含 HTML，并且包括 doctypes。虽然这对格式化没有帮助，但它之后仍然没有换行符。

[文档类型实际上是在](https://github.com/judofyr/temple/blob/v0.5.5/lib/temple/html/fast.rb#L5-22)Slim 使用的Temple 中管理的。您可以更改它以添加自定义文档类型以获得您想要的行为。这确实涉及弄乱 Temple 的内部数据，因此您需要小心一点，尤其是在升级时，因为内部结构可能已经改变。

有问题的散列已被[冻结](http://www.ruby-doc.org/core-1.9.3/Object.html#method-i-freeze)，因此您不能只向其中添加新条目。但是，您可以[`dup`](http://www.ruby-doc.org/core-1.9.3/Object.html#method-i-dup)向重复的哈希添加一个条目，并将新的哈希分配回常量。这将导致 Ruby 生成警告，因为您通常不应该以这种方式重新分配常量。

```
new_hash = Temple::HTML::Fast::XHTML_DOCTYPES.dup
new_hash['rdf'] = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">'
Temple::HTML::Fast::XHTML_DOCTYPES = new_hash 
```

现在您可以像使用`rdf`Slim 中的预定义文档类型一样使用它。

```
doctype rdf
html 
```

这会产生：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML+RDFa 1.0//EN" "http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd">
<html></html> 
```

如果您想避免看到警告，请在更改常量之前设置`$VERBOSE`为`nil`（确保之后将其更改回来）。

```
begin
  old_verbose, $VERBOSE = $VERBOSE, nil
  Temple::HTML::Fast::XHTML_DOCTYPES = new_hash
ensure
  $VERBOSE = old_verbose
end 
```

（你可以把它变成一个接受块的方法。如果你使用的是 Rails，它已经为你完成了[`silence_warnings`](http://api.rubyonrails.org/classes/Kernel.html#method-i-silence_warnings)。）

# perl - 证明命令在 arisdottle 之后不传递参数

> ID：13632377
> 
> 赞同：2
> 
> 时间：2012-11-29T18:33:22.510
> 
> 标签：perl, unit-testing, testing, perl-prove

我正在尝试*通过*命令将一些参数传递给测试脚本`prove`。基于一些旧线程，其中选项被散列，并且我的证明`man`页面的内容（引用如下），在选项应该起作用之前使用 :: ，但证明仍在解析测试脚本的选项，因为它是自己的：

> $`prove -v t/040-unit-object-test.t :: --unit 270149` `Unknown option: unit`

这里是手册页的相关部分：

> ```
>  Arguments to Tests
> 
>   It is possible to supply arguments to tests. To do so separate them
>   from prove's own arguments with the arisdottle, '::'. For example
> 
>    prove -v t/mytest.t :: --url http://example.com
> 
>   would run t/mytest.t with the options '--url http://example.com'.  When
>   running multiple tests they will each receive the same arguments. 
> ```

我尝试使用`sudo`以 root 身份运行该选项，但得到了同样的错误。

我正在使用 Getopt::Long 模块来获取选项，当我使用普通 old 运行测试脚本时，这些选项有效`perl`，但是我的 SKIP 和 TODO 块不起作用。

我宁愿不必使用`--exec`解决方法。

我在 Mac OS 10.6 上运行 Perl 5.10。

的输出`prove -V`是：

> `prove v2.64, using Test::Harness v3.25 and Perl v5.10.0`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:54:22.967

好吧，你的 $PATH 中必须有两个版本`prove`，一个是 2006 年的旧版本，在 App::Prove 存在之前

我建议你删除那个，然后重新安装 App::Prove

# php - 删除switch语句中的重复代码

> ID：13632382
> 
> 赞同：-1
> 
> 时间：2012-11-29T18:33:48.747
> 
> 标签：php

假设我有一个这样的 switch 语句：

```
switch($myVar)
{
    case 'A':
        $special = 1;
        $total = $special + 5;
        break;

    case 'B':
        $special = 2;
        $total = $special + 5;
        break;

    case 'C':
        $special = 3;
        $total = $special + 5;
        break;
} 
```

正如您在上面看到的，与我的 switch 语句的情况唯一不同的是变量`$special`。如果 case 是 A，它的值应该是 1，如果 case 是 B，它的值应该是 2，依此类推。除此之外，之后的其余代码保持不变。有没有办法可以组织这个 switch 语句来删除重复的代码：

```
$total = $special + 5 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:35:56.917

将重复的代码移到切换之后。

```
switch($myVar)
{
    case 'A':
        $special = 1;
        break;

    case 'B':
        $special = 2;
        break;
    default:
        $special = 0; //setup a default value to prevent undefined $special errors.
}

$total = $special + 5; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:36:34.587

为什么不

```
$special = ('A' == $myVar ? 1 : 2);
$total = $spacial + 5; 
```

**编辑**

由于问题已经改变，这里是一个更新

```
$lookup = array( 'A' => 1, 'B' => 2, 'C' =>3); // You can just initialize this once
                                               // maybe a static variable of a class etc.
$special = $lookup[$myVar];
if (!isset($special)) { $special = /* Some default value */ }; // If this is necessary
$total = $special + 5; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T18:42:15.857

下面的方法怎么样？

```
$special = array(
    'A' => 1,
    'B' => 2
);

$total = ($special[$myVal] || 0) + 5; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T18:36:35.310

```
switch($myVar)
{
    case 'A':
        $special = 1;
        break;

    case 'B':
        $special = 2;
        break;
}

$total = $special + 5; 
```

你可以把它放在 switch 块之后。您不必重复此代码，因为它无论如何都会发生，如果您将它放在 switch 语句之后。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T18:36:01.233

```
switch($myVar) {
    case 'A':
        $special = 1;
        break;
    case 'B':
        $special = 2;
        break;
    default:
        $special = 0;
}
$total = $special + 5; 
```

# c# - Table 属性的用途是什么？

> ID：13632383
> 
> 赞同：0
> 
> 时间：2012-11-29T18:33:49.057
> 
> 标签：c#, asp.net-mvc-4

Table 属性的用途是什么？它如何适用于 ASP.NET MVC 4？有什么样品可以看吗？

# linux - 将菜单项添加到 GNOME 菜单或 Unity

> ID：13632385
> 
> 赞同：3
> 
> 时间：2012-11-29T18:33:59.560
> 
> 标签：linux, ubuntu, fedora, gnome, ubuntu-unity

我想将我的应用程序的菜单项添加到 GNOME 菜单。我为它创建了一个桌面文件并将其放置在 中`/usr/share/applications`，但菜单项没有出现在 GNOME 菜单中。以下是我以`Aces.desktop`...的名义创建的桌面文件

```
[Desktop Entry]
Encoding=UTF-8
Version 1.0
Name=Aces
Comment=Compile and Execute C programs
Categories=GNOME;Application;Development;
Exec=/usr/share/Aces/Aces
Icon=/usr/share/Aces/icon.png
Terminal=false
Type=Application
StartupNotify=true 
```

放入后`/usr/share/applications`，我尝试重新启动PC，但仍然无法正常工作。

任何形式的帮助都是值得赞赏的...... :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T08:22:24.747

我发现了我的愚蠢错误:) 我忘了给桌面文件赋予可执行权限。所以在你通过命令赋予桌面文件可执行权限之后

```
chmod +x <desktop file path> 
```

把它放在

```
/usr/share/applications  /* So the menu option is available to all the user */ 
```

或者

```
~/.local/share/applications  /* In this case the menu option is available only to that particular user*/ 
```

应用可执行权限后，桌面文件将采用文件中您指定的名称和图标`.desktop`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-01-07T14:53:03.210

好吧，我只是设法通过三个步骤**将我的程序添加到 Debian 9 / Ubuntu 最新的 Unity 界面**。

0.- 在您的应用程序文件夹中找到或创建一个正方形的 72x72 或 96x96 或 128x128 等带有 .xpm 或 .png 扩展名的图标。

1.- 在您的应用程序文件夹中从 /usr/share/applications/{example}.desktop 复制，将其重命名为 {myapp}.desktop 并制作它以满足您的应用程序要求

2.- 运行它然后编辑回 {myapp}.desktop 以防出现问题

```
$ desktop-file-validate {myapp}.desktop 
```

3.-运行此命令将您的启动器安装到适当的目录中并使其生效

```
in case of 'just for current user' do: 
$ desktop-file-install --dir=/home/{user}/.local/share/applications/ {myapp}.desktop

'for all users' (/usr/share/applications/) do as root:
# desktop-file-install {myapp}.desktop 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-24T18:33:42.533

术语“Gnome 菜单”可能有点模棱两可，但我使用 MATE-Desktop（Gnome 2 克隆），我发现将项目添加到应用程序菜单（例如）的最简单方法是右键单击“应用程序”，然后单击“编辑菜单”。您可以编辑菜单，显示或隐藏各个部分，并使用命令、描述、图标等添加新项目。请注意，右键单击任何子菜单（如“编程”）不起作用——它必须是 gnome 面板上的主“应用程序”菜单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T18:37:54.823

如果您想快速执行此操作，可以使用[Arronax 。](http://www.florian-diesch.de/software/arronax/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-08T13:37:07.490

这个答案以*Firefox*和*CentOS*为例，但这些步骤应该适用于任何应用程序。该示例假设您已经安装了*GVim*。

如果您不这样做，只需选择在其标题中不使用连字符的任何其他菜单项。例如，使用*chromium-browser.desktop*会很糟糕，而使用*caja.desktop*会很好。

**1 从 MOZILLA 网站下载、安装和测试 Firefox**

```
cd /usr/local
sudo wget http://ftp.mozilla.org/pub/firefox/releases/81.0/linux-x86_64/en-US/firefox-81.0.tar.bz2
sudo tar xvjf firefox-81.0.tar.bz2 
sudo rm -fr firefox-81.0.tar.bz2 
sudo ln -s /usr/local/firefox/firefox /usr/bin/firefox
firefox & 
```

**2 查找并“安装”Firefox 图标**

```
find /usr/local/firefox -name \*.png
sudo cp -p /usr/local/firefox/browser/chrome/icons/default/default16.png /usr/share/icons/hicolor/16x16/apps/firefox.png
sudo cp -p /usr/local/firefox/browser/chrome/icons/default/default32.png /usr/share/icons/hicolor/32x32/apps/firefox.png
sudo cp -p /usr/local/firefox/browser/chrome/icons/default/default48.png /usr/share/icons/hicolor/48x48/apps/firefox.png
sudo cp -p /usr/local/firefox/browser/chrome/icons/default/default64.png /usr/share/icons/hicolor/64x64/apps/firefox.png
sudo cp -p /usr/local/firefox/browser/chrome/icons/default/default128.png /usr/share/icons/hicolor/128x128/apps/firefox.png 
```

**3 “创建”一个 Firefox 桌面文件**

```
cd /usr/share/applications
sudo cp -p gvim.desktop firefox.desktop
sudo sed -i "s/Gvim/Firefox/g" firefox.desktop 
sudo sed -i "s/GVim/Firefox/g" firefox.desktop
sudo sed -i "s/gvim/firefox/g" firefox.desktop 
sudo sed -i "s/Categories=Utility;TextEditor;/Categories=Network;WebBrowser;/g" firefox.desktop 
```

# entity-framework - 结构映射 UnitOfWork 多个通用上下文 EF

> ID：13632389
> 
> 赞同：2
> 
> 时间：2012-11-29T18:34:17.783
> 
> 标签：entity-framework, structuremap, dbcontext, unit-of-work, bounded-contexts

我有一个使用通用上下文的 UnitOfWork。如何让存储库决定使用结构映射的具体上下文？

```
 public SomeRepository(IUnitOfWork unitOfWorkSomeContext)
        {
        _uowContext = unitOfWork.Context as ISomeContext;

        }

public class UnitOfWork: IUnitOfWork
{
    private readonly IContext _context;

    public UnitOfWork(IContext context)
    {
        context.Configuration.AutoDetectChangesEnabled = false;
        context.Configuration.ProxyCreationEnabled = false;
        context.Configuration.LazyLoadingEnabled = false;
        _context = context;
    }
    public int Save()
    {
        return _context.SaveChanges();
    }

    public IContext Context
    {
        get { return _context; }
    }

    public void Dispose()
    {
        _context.Dispose();
    }
} 
```

谢谢，

道格

# mysql - Mysql 复制，无论哪个服务器更新，保持所有服务器同步

> ID：13632395
> 
> 赞同：2
> 
> 时间：2012-11-29T18:34:48.493
> 
> 标签：mysql, replication

我有 3 台服务器正在复制，但目前只有一台是主服务器，另外两台是从服务器。我希望这样，如果其中一个从属被更新/插入，则该更改会传播到所有其他从属和主控。我将如何做到这一点？

我最好的猜测是让他们都成为主人，并互相奴役。这是最优的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:38:38.020

这对于标准的 mysql 主从复制是不可能的。您可以尝试通过 master-master 设置来完成此操作（请参阅本教程[http://www.howtoforge.com/mysql_master_master_replication](http://www.howtoforge.com/mysql_master_master_replication)），但这需要相当多的时间来确保不会创建重复的密钥。不确定这是否可以处理 3 个大师。

老实说，vanilla MySQL 不是您想要的分布式数据库的正确技术。

有 Mysql 集群可以满足您的需求：[http](http://www.mysql.com/products/cluster/) : //www.mysql.com/products/cluster/ 和一些其他技术（主要是 NOSQL），如 cassandra 和 mongoDB。

# java - 导入 com.sun.xml.internal.ws.client.ClientTransportException，无法读取此导入

> ID：13632398
> 
> 赞同：1
> 
> 时间：2012-11-29T18:35:05.173
> 
> 标签：java, import, jaxb

我无法解决这个问题，我尝试**导入 com.sun.xml.internal.ws.client.ClientTransportException**但我无法导入它。

```
线程“主”com.sun.xml.internal.ws.client.ClientTransportException 中的异常：服务器发送 HTTP 状态代码 404：未找到

在 com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.checkStatusCode(HttpTransportPipe.java:296)

在 com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.createResponsePacket(HttpTransportPipe.java:245)

在 com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.process（HttpTransportPipe.j
艾娃：203）

在 com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:122)

在 com.sun.xml.internal.ws.transport.DeferredTransportPipe.processRequest(DeferredTransportPipe.java:95)

在 com.sun.xml.internal.ws.api.pipe.Fiber.__doRun(Fiber.java:626)

在 com.sun.xml.internal.ws.api.pipe.Fiber._doRun(Fiber.java:585)

在 com.sun.xml.internal.ws.api.pipe.Fiber.doRun(Fiber.java:570)

在 com.sun.xml.internal.ws.api.pipe.Fiber.runSync(Fiber.java:467)   

在 com.sun.xml.internal.ws.client.Stub.process(Stub.java:308)

在 com.sun.xml.internal.ws.client.sei.SEIStub.doProcess(SEIStub.java:146)

在 com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:98)

在 com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)

在 com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:129)

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T18:51:57.490

您不应该尝试导入“内部”包。它不是按设计提供的。

有关更多详细信息，以及临时覆盖缺少的导入以进行测试的方法，或者如果您有特殊要求，请参阅这个类似的问题： [com.sun.xml.internal.ws.client 不存在](https://stackoverflow.com/questions/10614852/com-sun-xml-internal-ws-client-does-not-exist)

但实际上，您会希望使用 API 的公开可用部分，而不是内部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-30T10:08:22.640

您应该检查 WSDL url 是否有效这意味着，在 Web 服务客户端类中。见上面的代码。

```
static {
    URL url = null;
    WebServiceException e = null;
    try {
        url = new 
        URL("http://localhost:8084/SoapServer_test_4/CustomerService?wsdl");
    } catch (MalformedURLException ex) {
        e = new WebServiceException(ex);
    }
    CUSTOMERSERVICE_WSDL_LOCATION = url;
    CUSTOMERSERVICE_EXCEPTION = e;
} 
```

在上面的代码中，检查 WSDL url 是否有效，或者检查 WSDL 是否已经托管在该 url 中。如果您的 wsdl 文件在您的本地 PC 中，请检查它是否运行如下图所示[，当您测试 Web 服务时，您可以像这样在浏览器中看到 wsdl url](https://i.stack.imgur.com/aK965.png)

[![在此处输入图像描述](../Images/f3080d45515b99cc496a3b3973156275.png)](https://i.stack.imgur.com/aK965.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-27T10:47:38.207

您可以为此目的使用**jaxws-rt.jar 。**jre 系统库中的 rt.jar 将限制编译器访问它的某些包。

# supervisord - 向supervisord的子进程发送一般信号

> ID：13632399
> 
> 赞同：11
> 
> 时间：2012-11-29T18:35:08.407
> 
> 标签：supervisord

我正在使用 supervisord 来管理一堆进程。是否可以使用 supervisorctl 向这些进程发送任意信号而不实际停止它们并设置停止信号？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-30T12:29:16.493

在 3.2.0（2015 年 11 月发布）`supervisorctl`之前，不支持向其管理的进程发送任意信号。

从 3.2.0 开始，使用`supervisorctl signal`：

```
signal <signal name> <name>     Signal a process
signal <signal name> <gname>:*      Signal all processes in a group
signal <signal name> <name> <name>  Signal multiple processes or groups
signal <signal name> all        Signal all processes 
```

所以

```
supervisorctl signal HUP all 
```

将发送`SIGHUP`到主管管理的所有进程。

在 3.2.0 之前，您可以改为使用`supervisorctl status`列出`pid`托管进程的 s。然后用于`kill`向那些`pid`s 发送信号。使用一点`sed`魔法，您甚至可以提取这些`pid`s 以作为`kill`命令的输入：

```
kill -HUP `bin/supervisorctl status | sed -n '/RUNNING/s/.*pid \([[:digit:]]\+\).*/\1/p'` 
```

还将发送到受控制`SIGHUP`的所有活动进程。`supervisord`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-28T21:49:09.723

[从 3.2.0 开始](http://supervisord.org/changes.html)，您现在可以向进程发送任意信号！

```
$ supervisord --version
3.2.0

$ supervisorctl signal help
Error: signal requires a signal name and a process name
signal <signal name> <name>     Signal a process
signal <signal name> <gname>:*      Signal all processes in a group
signal <signal name> <name> <name>  Signal multiple processes or groups
signal <signal name> all        Signal all processes

$ supervisorctl signal HUP gateway
gateway: signalled 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-13T07:21:41.517

有一个名为[mr.laforge](https://github.com/fschulze/mr.laforge)的[主管的第三方插件](http://supervisord.org/plugins.html#third-party-plugins-and-libraries-for-supervisor)

> 让您轻松确保 supervisord 和由它控制的特定进程在 shell 和 Python 脚本中运行。**还向主管添加了一个 kill 命令，可以向子进程发送任意信号。**

# java - Java中布尔数组的奇怪损坏

> ID：13632400
> 
> 赞同：1
> 
> 时间：2012-11-29T18:35:08.093
> 
> 标签：java, arrays, if-statement, java-native-interface, boolean

这听起来可能很奇怪，但过去 2 天我一直在努力解决这个错误。

1.  我`boolean`在 java 中有一个使用`Random`布尔生成器初始化的数组。

2.  之后，`boolean`C 中的函数（使用 JNI 调用）对数组进行操作，并将修改后的`boolean`数组返回给 java。当我将`boolean`数组移交给 C 时，它被转换为 unsigned char 并`jbooleanArray`在返回给 java 之前转换回。

3.  现在我运行以下代码（i 上有一个 for 循环）：

    ```
    if(chosen_packet[i] == false)
    {
         pkt.first[i] = 0;
         System.out.print(chosen_packet[i]);
    }
    if(chosen_packet[i] == true)
    {
         pkt.first[i] = 1;
         System.out.print(chosen_packet[i]);
    } 
    ```

问题是，有时什么时候`chosen_packet[i]`还是`true`没有进入第二个`if`条件。有时会发生这种情况，有时代码工作得很好。当我`chosen_packet[i]`在这种情况下打印`true`它时，它还没有进入第二个`if`条件。`boolean`阵列的这种看似损坏的可能原因是什么？

编辑：这就是我将`boolean`数组转换为`unsigned char`C 的方式：

```
 jboolean *element = (*env)->GetBooleanArrayElements(env,chosen_packet,0);
 for(j = 0; j < sz; j++)
          src_pkt[j] = (unsigned char)element[j]; 
```

这个 src_pkt 被执行，然后我将它转换回`jboolean`.

EDIT2：这就是我将 unsigned char 数组转换回 jboolean 的方式：

```
 jbooleanArray arr = (*env)->NewBooleanArray(env,sz);
 (*env)->SetBooleanArrayRegion(env,arr,0,sz,src_pkts);
 (*env)->DeleteLocalRef(env,arr); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:44:37.887

Java`boolean`通常实现为单字节。因此，您的 C 代码中可能存在导致`boolean`既不是`true`也不是的错误`false`。在这种情况下，您可能会遇到未定义的行为。

请注意，简单地转换`unsigned char`为`jboolean`as in`(jboolean) src_pkt[j]`不会对其进行规范化。你必须使用`src_pkt[j] ? JNI_TRUE : JNI_FALSE`.

我仍然相信您必须发布更多 JNI 代码的相关部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:37:36.993

如果`boolean`是`true`，它没有进入第一个是正常的，`if`因为您正在检查它是否`false`处于其状态。

您的代码可以简化为（`if/else`如果检查不同的条件，您应该使用而不是两个）。

```
if (chosen_packet[i]) {
    pkt.first[i] = 1;
} else {
    pkt.first[i] = 0;
}
System.out.print(chosen_packet[i]); 
```

甚至

```
pkt.first[i] = chosen_packet[i] ? 1 : 0;
System.out.print(chosen_packet[i]); 
```

**编辑**

如果您的程序没有进入第二个 if，则表示 var`chosen_packet[i]`不是`true`，您可以使用调试器来验证真正的值是什么。

正如*fredcrs 所说*，你确定那`chosen_packet[i]`是 type`boolean`吗？

# algorithm - 维特比搜索 - 假设概率

> ID：13632404
> 
> 赞同：0
> 
> 时间：2012-11-29T18:35:15.050
> 
> 标签：algorithm, probability, hidden-markov-models, viterbi

我正在构建一个隐马尔可夫模型来确定某人是在说“是”还是“否”。我已经开发了隐马尔可夫模型，并且从这个页面看到了一个教程：

```
http://www.cslu.ogi.edu/tutordemos/nnet_recog/recog.html 
```

在本教程中它说：

> 该图通过假设的概率矩阵跟踪“是”和“否”的搜索路径。即使“否”的分数非常低，如果“是”没有出现在我们的词汇表中，仍然可以找到这个词的最可能路径。Viterbi 搜索可以通过阅读以下伪代码算法来理解（符号取自 Rabiner 的论文，A Tutorial on Hidden Markov Models and Selected Applications in Speech Recognition）：

我已经阅读了这两篇论文，但我仍然对他们所说的地方感到困惑：

```
through a hypothetical matrix of probabilities 
```

我的问题是这个概率矩阵来自哪里？例如，我做了以下事情：

*   读入音频文件
*   剥离了不值得考虑的音频信号
*   将需要考虑的信号拆分成块

这意味着我留下了包含音素的块。我已经计算了数据的过零，因此我的观点是：

对于“否”，来自此的数据非常低，

对于“是”，来自此的数据非常高。

所以在例子中（上面给出）它说：

```
Even though the score for "no" is very low, 
```

那么我可以将零交叉的结果作为我的概率传递吗？我很困惑，希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T08:04:33.787

在哲学意义上，这个概率矩阵来自大自然。更严重的是，这个矩阵代表了转换矩阵的概念，如果一个人不“知道”自然的真实分布（没有人知道），它可以由 Baum Welch 对采样数据进行计算。这就是为什么他们说这是假设的。

关于你的第二个问题，你需要通过将 Baum Welch 应用于你的过零样本来获得转换矩阵（概率）（我不确定过零样本是什么，通常 mfcc 用于这种事情） .

让我知道是否需要更多澄清或我误解了什么。

# c# - C# 标签（改变标签颜色）

> ID：13632405
> 
> 赞同：4
> 
> 时间：2012-11-29T18:35:17.940
> 
> 标签：c#, winforms, label

在 Windows 窗体应用程序中，我有六个带有标签的文本框。每个标签显示从星期一到星期六的日期。还有一些按钮可以分别导航到前几周和下周。
每次加载 from 时，我都希望能够在 RED 中突出显示当前日期。虽然我已经设法实现了这一点，但每次我点击下一个/上一个按钮时，标签仍然保持颜色。例如，如果当前日期是 11 月 29 日星期四（以红色突出显示），单击下一个按钮将在该标签上显示 12 月 6 日星期四，但也会以红色突出显示，这是错误的，因为 12 月 6 日星期四不是当前日期。有什么想法可以解决这个问题吗？这是我更改标签颜色的代码。谢谢

```
 if (label1.Text == DateTime.Now.ToString("dd MMMM dddd"))
            label1.ForeColor = Color.Red;
        else label1.ForeColor = Color.Black;

         if (label2.Text == DateTime.Now.ToString("dd MMMM dddd"))
             label2.ForeColor = Color.Red;
         else label2.ForeColor = Color.Black;

         if (label3.Text == DateTime.Now.ToString("dd MMMM dddd"))
             label3.BackColor = Color.Red;
         else label3.ForeColor = Color.Black;

         if (label4.Text == DateTime.Now.ToString("dd MMMM dddd"))
            label4.BackColor = Color.Red;
         else label4.ForeColor = Color.Black;

         if (label5.Text == DateTime.Now.ToString("dd MMMM dddd"))
            label5.BackColor = Color.Red;
         else label5.ForeColor = Color.Black;

         if (label6.Text == DateTime.Now.ToString("dd MMMM dddd"))
            label6.BackColor = Color.Red;
         else label6.ForeColor = Color.Black; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T18:54:13.167

我认为问题在于您正在混合`BackColor`和`ForeColor`设置。删除重复的逻辑并在一个地方以相同的方式应用样式。创建方法

```
private void ApplyStyleTo(Label label)
{
    label.ForeColor = GetLabelForeColor(label.Text);
}

private Color GetLabelForeColor(string text)
{
    string todayText = DateTime.Now.ToString("dd MMMM dddd");
    return (text == todayText) ? Color.Red : Color.Black;
} 
```

并将样式应用于所有标签：

```
ApplyStyleTo(label1);
// ...
ApplyStyleTo(label6); 
```

* * *

**顺便说一句**，我会更进一步，创建自定义标签来显示日期。将这些标签放在您的表单上并`Date`像这样设置它们的属性：

```
dateLabel1.Date = DateTime.Now; 
```

标签将格式化和着色日期。您将能够更改日期格式和颜色。

```
public class DateLabel : Label
{
    private DateTime? _date;

    public DateLabel()
    {
        Format = "dd MMMM dddd";
        TodayForeColor = Color.Red;
    }

    public DateTime? Date
    {
        get { return _date; }
        set {
            _date = value;
            Text = _date.HasValue ? _date.Value.ToString(Format) : "";
            ForeColor = IsToday ? TodayForeColor : ForeColor;
        }
    }

    public bool IsToday
    {
        get  {
            if (!_date.HasValue)
                return false;    
            return _date.Value.Date == DateTime.Today;
        }
    }

    public string Format { get; set; }
    public Color TodayForeColor { get; set; }
} 
```

# php - 如何使用数组函数检查密码的内容和长度

> ID：13632408
> 
> 赞同：0
> 
> 时间：2012-11-29T18:35:24.943
> 
> 标签：php, regex

用户输入密码，例如`'tomorrow1234'`。我知道我可以用 将它拆分成一个数组`str_split`，但在那之后，我想遍历每个值并在它们中搜索诸如大写、数字或空格之类的东西。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:39:58.827

这是我用来验证密码复杂性的旧备用功能。它要求密码包含大小写字母以及非字母字符。长度检查是微不足道的，并在其他地方处理。

```
$req_regex = array(
    '/[A-Z]/',      //uppercase
    '/[a-z]/',      //lowercase
    '/[^A-Za-z]/'   //non-alpha
);

foreach($req_regex as $regex) {
    if( !preg_match($regex, $password) ) {
        return NULL;
    }
} 
```

我使用数组和循环，因此在必要时可以轻松添加/删除条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:40:42.590

听起来您正在尝试验证密码强度。

看看这个网页，你的解决方案写一个具体的答案会很复杂，但你可以使用正则表达式来检查大小写、符号和数字等内容。此页面有几个示例，您可以根据需要进行修改。

[http://www.cafewebmaster.com/check-password-strength-safety-php-and-regex](http://www.cafewebmaster.com/check-password-strength-safety-php-and-regex)

这就是我会使用的：

```
(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$ 
```

检查 1 个字母、1 个数字、1 个特殊字符和至少 8 个字符长。

# python - Python单线调用函数列表

> ID：13632412
> 
> 赞同：2
> 
> 时间：2012-11-29T18:35:50.977
> 
> 标签：python, function, events, iteration

我有一些旧代码，我将 Python 中的函数列表存储为类属性。这些列表用作一种事件挂钩。

为了使用适当的参数调用列表中的每个函数，我使用了单行代码，`map`并与`lambda`表达式混合。我现在担心使用`lambda`这样的表达式会产生不必要的开销。我想推荐的方法是同时删除`map`and`lambda`并且只使用标准 for 循环，以提高可读性。

不过，有没有更好（阅读速度更快）的单行代码来做到这一点？

例如：

```
class Foo:
    """Dummy class demonstrating event hook usage."""
    pre  = [] # list of functions to call before entering loop.
    mid  = [] # list of functions to call inside loop, with value
    post = [] # list of functions to call after loop.
    def __init__(self, verbose=False, send=True):
        """Attach functions when initialising class."""
        self._results = []
        if verbose:
            self.mid.append( self._print )
        self.mid.append( self._store )
        if send:
            self.post.append( self._send )

    def __call__(self, values):

        # call each function in self.pre (no functions there)
        map( lambda fn: fn(), self.pre )

        for val in values:
            # call each function in self.mid, with one passed argument
            map( lambda fn: fn(val), self.mid )

        # call each fn in self.post, with no arguments
        map( lambda fn: fn(), self.post )

    def _print(self, value):
        """Print argument, when verbose=True."""
        print value

    def _store(self, value):
        """Store results"""
        self._results.append(value)

    def _send(self):
        """Send results somewhere"""

# create instance of Foo
foo = Foo(verbose=True)

# equivalent to: foo.__call__( ... )
foo( [1, 2, 3, 4] ) 
```

有没有更好的方法来编写这些单行`map`电话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:45:05.143

推荐的方法肯定是使用 for 循环，但是，如果您坚持使用`map`，那么`operator.methodcaller`可能正是您所需要的：

```
>>> def foo(*args):
...    print 'foo',args
... 
>>> def bar(*args):
...    print 'bar',args
... 
>>> from operator import methodcaller
>>> 
>>> map(methodcaller('__call__',1,2,3),[foo,bar])
foo (1, 2, 3)
bar (1, 2, 3)
[None, None] 
```

关于使用这个的一个警告`map`——如果你将你的代码移植到 python 3，它就行不通了，因为它`map`变得懒惰了。

您还可以非常简单地使用列表推导（这也适用于 python3）：

```
[fn() for fn in self.pre]
[fn(val) for fn in self.mid] 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:48:50.123

首先，“我担心有不必要的开销”是没有办法优化你的代码的。使用分析器查找热点。

其次，您的代码可以使用注释让读者知道发生了什么。

最后，除非另有证明，否则以下是完成任务的好方法：

```
for func in self.pre: func()
#apply every function in self.mid to every value in values
for func,val in itertools.product(self.mid, values):
    func(val) 
```

如果你想捕获这些值，你可以使用列表推导；如果您想延迟评估，可以使用生成器表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-29T20:53:32.123

```
>>> def chain(*fn):
>>>     return lambda *args, **kwargs: [_(*args, **kwargs) for _ in fn]
>>>
>>> def add(x, y):
>>>    return(x + y)
>>>
>>> def multiply(x, y):
>>>    return(x * y)
>>>
>>> chained = chain(add, multiply)
>>> chained(2, 6)

[8, 12] 
```

# python - Emacs python 自动补全

> ID：13632415
> 
> 赞同：4
> 
> 时间：2012-11-29T18:35:53.727
> 
> 标签：python, emacs

我已经从 emacs24 上的 el-get 安装了 python-mode、pymacs 和 pycomplete+。但我无法在 emacs 中获得 python 的自动完成功能。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-01T14:23:58.377

我建议您尝试[emacs-jedi](https://github.com/tkf/emacs-jedi)。作者确实是在努力为 Emacs 带来最好的 Python 自动补全体验。（它使用[Jedi](https://github.com/davidhalter/jedi)自动完成库）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:48:43.537

有一些方法可以将ropemacs 连接为自动完成源，但据我所知，这些包中的任何一个都没有“默认”提供。你可以在你的 中试试这个`.emacs`，[**这是我成功使用的一个片段**](http://dpaste.com/839051/)

从[**我正在阅读**](http://chrispoole.com/project/ac-python/)的内容来看，这个包完成更易于配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T21:01:11.340

bzr 分支 lp:python-mode/components-python-mode

即提供内联 Pymacs 的 python-mode.el 的开发分支为我提供了开箱即用的自动完成功能

可能与已经安装的 Pymacs 冲突

# javascript - 脚本在 Chrome 上工作，但在 Firefox 上不工作

> ID：13632419
> 
> 赞同：0
> 
> 时间：2012-11-29T18:35:58.123
> 
> 标签：javascript, jquery, css

我在页面右侧有这个固定元素。这是它的 CSS 代码：

```
#rightSide {
  height: 100%;
  min-height: 613px;
  width: 450px;
  box-shadow: 0px 0px 3px rgba(0,0,0,0.7);
  background-color: #fafafa;
  position: fixed;
  right: 0px;
  display: block;
  float: right;
  padding: 0;
  z-index: 200;
} 
```

HTML：

```
<body>
  <div id="rightSide"></div>
</body> 
```

我想对这个页面做的是：当有一个窗口调整大小时，元素只是垂直固定，它会随着页面水平滚动。这是我使用的 Javascript（调整大小和滚动是 jQuery 事件）：

```
$(window).resize(function() {
  var bod = $('body').innerWidth();
  var wid = $(this).innerWidth();
  var wind = bod - wid;
  $('#rightSide').css("right", '-'+ wind +'px');
  $(this).scroll(function () {
    var scrleft = $('body').scrollLeft();
    var scrl = scrleft - wind;
    $('#rightSide').css("right", scrl +'px');
  });
}); 
```

奇怪的是，这段代码在 Chrome 上运行得很好，但在 Firefox 上却不行。你知道为什么会这样吗？

谢谢！

**编辑**如果有帮助，这里是正文 CSS。

```
body {
  width : 100%;
  min-width: 1070px;
  height : 100%;
  margin : 0px auto 0px auto;
  padding : 0px 0px 0px 0px;
  display: block;
  overflow-y: auto;
  overflow-x: auto;
  min-height: 613px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:47:42.923

好吧，我找到了问题的根源，似乎在 Firefox 和 IE 下，要正确使用 scrollLeft，必须使用`document`not来完成`body`，例如：

```
var scrleft = $(document).scrollLeft(); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:00:39.257

你不需要这样的脚本。`position: fixed; right:0;`CSS应该足够了。另外，拿出`float: right;`风格；这是不必要的，并且对于绝对/固定定位没有意义。您也不需要`display:block`- 默认情况下会阻止 div。

# amazon-web-services - 在 Spot 实例请求中附加现有 EBS 作为根设备

> ID：13632421
> 
> 赞同：7
> 
> 时间：2012-11-29T18:36:08.277
> 
> 标签：amazon-web-services, amazon-ec2, amazon-ebs

是否可以在 Spot 实例请求中包含现有的、未附加的、可用的 EBS 卷作为根设备？我想创建一个设置，当满足现货价格时系统启动并运行，并且在终止并且现货价格回到范围后，我可以重新请求并在我离开的地方启动一个实例。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T01:06:59.650

虽然这样[覆盖 AMI 的块设备映射](http://docs.aws.amazon.com/AWSEC2/2011-07-15/UserGuide/index.html?block-device-mapping-concepts.html)是可能的，但不幸的是，根设备是个例外：

> 您自动启动的任何实例都会在 AMI 的块储存设备映射中包含任何存储设备。您可以通过在启动时指定具有所需更改的块储存设备映射来覆盖该映射。在您的覆盖中，**您可以修改除根设备卷之外的任何存储设备的映射**。*[强调我的]*

这也反映在[AWS 管理控制台](http://aws.amazon.com/console/)中的相应向导中，这些向导只允许调整根卷大小，而不是它所基于的快照，请参阅 [将根设备卷更改为 Persist](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/RootDeviceStorage.html#Using_RootDeviceStorage)中的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-05T17:06:24.047

您可以使用默认点卷启动，然后`pivot_root`初始化到单独的 EBS 卷。

[EC2 Spotter](https://github.com/atramos/ec2-spotter)工具可以为您管理这些。EC2 Spotter 文档的片段：

> 启动脚本使用用户数据创建启动时脚本，将指定的 EBS 卷附加到 /dev/xvdf，然后继续执行 pivot_root 和 chroot，以便将其用作主系统磁盘来代替 /dev/ xvda。当实例在中断后首次创建或重新启动时，基于 AMI 的 EBS 卷 (/dev/xvda1) 上的 /sbin/init 将替换为一个小的 shell 脚本，该脚本执行神奇的 pivot_root 和 chroot，然后链式加载/sbin/init 来自指定的持久 EBS 卷 (/dev/xvdf1)。实例首次启动时会执行额外的重启，以确保干净。最终结果是一个完整的 Linux 系统在安装为 / 的持久卷 dev/xvdf 上运行。临时磁盘仍然安装在 /old-root 下，如果需要可以卸载。

另请参阅此 StackOverflow 答案：[AWS EC2：如何使用 pivot_root 重新安装以前的 EBS 卷？](https://stackoverflow.com/questions/32108767/aws-ec2-how-to-remount-previous-ebs-volume-using-pivot-root)

# c - 初始化大向量时的段错误

> ID：13632428
> 
> 赞同：0
> 
> 时间：2012-11-29T18:36:24.087
> 
> 标签：c, segmentation-fault

> **可能重复：**
> [C 编程，为什么这个大数组声明会产生分段错误？](https://stackoverflow.com/questions/3049934/c-programming-why-does-this-large-array-declaration-produce-a-segmentation-faul)

为什么这个程序会崩溃？它适用于最大 1e6，如果我不将每个值都设置为 0，它也可以正常工作。

程序没有分配所有的内存吗？

```
int main() {
    const int max = 10000000; // 1e7
    int end[max];
    unsigned int i;
    for ( i = 0; i < max; i++ )
        end[i] = 0;
}

$ gcc test.c && ./a.out 
Segmentation fault (core dumped) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:38:12.257

变长数组通常分配在**栈**上。堆栈空间有限；您可能在这里遇到堆栈溢出。你不能在这样的内存位置分配一个非常大的大小。您的数组太大而无法放入程序的堆栈中。分配这种大小的一个更好的主意是在堆上分配。

```
#include <stdlib.h>

int *end = malloc(sizeof *end * max);

/* some stuff */

free(end); 
```

堆比栈大很多倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:38:36.290

您的堆栈大小受操作系统的限制。

如果您必须分配非常大的值，请不要使用堆栈，而是使用带有 malloc() 的堆。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T18:40:38.767

这可能是堆栈大小问题。

`setrlimit`您可以手动检查和更改堆栈大小`getrlimit`

[http://linux.die.net/man/2/setrlimit](http://linux.die.net/man/2/setrlimit)

您也可以在使用`--stack`选项编译时执行此操作：

```
 gcc --stack,<your size> ... 
```

# ios - Cocos 3d 崩溃，提示无法加载纹理

> ID：13632435
> 
> 赞同：1
> 
> 时间：2012-11-29T18:36:40.263
> 
> 标签：ios, 3d, cocos3d

我必须下载一个 .pod 文件和一个包含纹理图像的文件夹。之后我必须加载 pod 文件，我应该会看到一个漂亮的 3D 图像。

```
//podNr is the id of the pod.
NSString *url2 = @"http://(MY URL FOR POD FILE);
NSString *urlIm2 = @"http:(MY URL FOR TEXTURE FOLDER);

NSURL *Url = [NSURL URLWithString:url2];
NSURL *UrlIm = [NSURL URLWithString:urlIm2];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString  *documentsDirectory = [paths objectAtIndex:0];
NSString *podFile = [NSString stringWithFormat:@"PODFILE%d.pod",podNr];

NSString *filePath = [documentsDirectory stringByAppendingPathComponent:podFile];

NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"/images"];

if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
    [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:nil]; //Create folder

NSMutableData *urlData = [NSMutableData dataWithContentsOfURL:Url];

NSMutableData *urlImageData = [NSMutableData dataWithContentsOfURL:UrlIm];

NSString *folder = [NSString stringWithContentsOfURL:UrlIm encoding:NSUTF8StringEncoding error:nil];
NSLog(@"FOLDER CONTENT:%@",folder);
if (folder != nil) {
    [self getImages:folder andpodNr:podNr];
}

NSLog(@"urlIMAGE:%d",[urlImageData length]);

[urlData writeToFile:filePath atomically:YES];

NSLog(@"sucsesfully written to file:%d",[urlData length]);

[self addContentFromPODFile: filePath]; 
```

这是 addImages 函数的代码：

```
-(NSMutableArray*) getImages:(NSString *)html andpodNr:(int)podNr
{
NSMutableArray *outPut = [NSMutableArray alloc];
NSString *S = html;
NSString *rest;

while(TRUE)
{
    if ([S rangeOfString:@".jpg\""].location == NSNotFound) {
        return outPut;
    }
    else {
        //existe .jpg!

        int jpgPos = 0;

        int rangeOfCom = 0;
        NSString *auxS = S;

        while (TRUE) {
            jpgPos = [auxS rangeOfString:@".jpg\""].location;
            rangeOfCom = [auxS rangeOfString:@"\""].location;
            if (rangeOfCom == NSNotFound) {
                return outPut;
            }
            if (rangeOfCom > jpgPos) {
                break;
            }
            else {
                auxS = [auxS substringFromIndex:rangeOfCom+1];
            }
        }
        NSString *result = [auxS substringToIndex:rangeOfCom];
        rest = [auxS substringFromIndex:rangeOfCom+1];
        NSLog(@"RESULT:%@",result);

        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString  *documentsDirectory = [paths objectAtIndex:0];

        NSString *newResult = [result stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

        NSString *newPath = [NSString stringWithFormat:@"/images/%@",newResult];

        NSString *filePath = [documentsDirectory stringByAppendingPathComponent:newPath];

        NSString *urlIm2 = @"http://(MY URL FOR IMAGES);
        NSLog(@"URL:%@",urlIm2);
        NSURL *urlA = [NSURL URLWithString:urlIm2];
        NSMutableData *imgData = [NSMutableData dataWithContentsOfURL:urlA];
        [imgData writeToFile:filePath atomically:YES];

        NSLog(@"Written %d to %@",[[NSMutableData dataWithContentsOfFile:filePath] length],filePath);
    }
    S = rest;
}

return outPut; 
```

这是输出：

```
2012-11-29 15:12:07.324 homy2[1181:207] FOLDER CONTENT:<!DOCTYPE HTML PUBLIC "-      //W3C//DTD HTML 3.2 Final//EN">
<html>
 <head>
  <title>Index of /models/1685740/m/images</title>
 </head>
 <body>
<h1>Index of /models/1685740/m/images</h1>
<ul><li><a href="/models/1685740/m/"> Parent Directory</a></li>
<li><a href="wood%202.jpg"> wood 2.jpg</a></li>
</ul>
</body></html>
2012-11-29 15:12:07.326 homy2[1181:207] RESULT:wood%202.jpg
2012-11-29 15:12:07.327 homy2[1181:207] URL:http://(MY URL)models/1685740/m/images/wood%202.jpg
2012-11-29 15:12:07.911 homy2[1181:207] Written 50443 to /Users/demianschkolnikmuller/Library/Application Support/iPhone Simulator/4.2/Applications/685E679A-E6D9-4834-952E-9158BB37C2B9/Documents/images/wood 2.jpg
2012-11-29 15:12:07.911 homy2[1181:207] urlIMAGE:315
2012-11-29 15:12:07.913 homy2[1181:207] successfully written to file:21600
2012-11-29 15:12:07.944 homy2[1181:207] cocos2d: CCTexture2D. Can't create Texture. UIImage is nil
2012-11-29 15:12:07.945 homy2[1181:207] cocos2d: Couldn't add image:wood 2.jpg in CCTextureCache
2012-11-29 15:12:07.946 homy2[1181:207] [***ERROR***] CC3Texture wood%202.jpg-1 could not load texture from file wood 2.jpg 
```

所以有几件事......正如你所看到的，它说成功写入文件：21600 所以它正在下载和写入东西......模拟器只是崩溃了。有任何想法吗？如果您需要，请询问更多信息。提前非常感谢，我很抱歉这么长的帖子。

# php - 将联系表与 Google Docs 集成

> ID：13632436
> 
> 赞同：0
> 
> 时间：2012-11-29T18:36:40.197
> 
> 标签：php, ajax, zend-framework, google-docs, google-docs-api

我们有一个 AJAX“联系表”，目前正在将电子邮件表单数据提交到邮件列表，并使用 Zend Gdata 将数据添加到 Google 电子表格。

问题是 Zend Gdata 是一个很大的瓶颈——它使提交过程增加了将近 5 秒。

有没有办法将它配置为异步完成，或者有没有更好的方法来完成这个而不使用 Zend？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:45:52.723

我认为这里的问题是您不希望 Web 应用程序的用户坐在那里等待整个线性过程完成（5 秒以上）。

有很多方法可以解决这个问题，而无需真正需要替换 Gdata（并编写自己的东西可能会或可能不会更好地执行）。

您可以简单地将数据放在某种队列中（在数据库中、在文件系统中，等等），然后您可以定期运行脚本将数据作为单独的进程填充到 GoogleDocs 中。这将允许您将成功消息返回到 Web 应用程序，而无需等待 Google Docs 更新。

或者，您可以在 PHP 中创建一个可以执行 Gdata 更新的进程，同时允许将响应独立地返回给调用 AJAX 请求。

# python - python2.5.2中的virtualenv

> ID：13632437
> 
> 赞同：0
> 
> 时间：2012-11-29T18:36:40.810
> 
> 标签：python, linux, bash, centos, package-managers

我对 Linux 环境真的很陌生，我正在尝试使用`virtualenv` 我正在运行 CentOS 5.8，起初它有 Python 2.4，所以我将它升级到 2.5.2 但是现在当我运行`virtualenv /test/a`它时仍然会出现错误：

```
Error: None
Error: this script requires Python 2.5 or greater 
```

非常感谢解决此问题的任何帮助。

注意：我使用以下方法安装了 python：

```
wget http://www.python.org/ftp/python/2.5.2/Python-2.5.2.tgz
tar fxz Python-2.5.2.tgz
cd Python-2.5.2
./configure
make
make install 
```

我在升级之前安装了 virtualenv：

```
yum install gcc python-virtualenv mysql-devel screen 
```

“哪个userenv”说`/usr/bin/virtualenv`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:04:09.850

将 python 更新到 2.6 并且它工作。

# java - 如何组织 RMI 客户端-服务器架构

> ID：13632442
> 
> 赞同：0
> 
> 时间：2012-11-29T18:37:03.643
> 
> 标签：java, rmi

我正在 RMI 中开发一个安全的银行服务，它带有一个用于服务器和客户端的 GUI。

服务器必须能够记录每个操作（新用户、已删除用户、提款、提交...）客户端将执行这些操作。由于一切都是安全的，客户首先必须在 GUI 中创建一个具有名称和密码的帐户。之后，GUI 将银行 UserList(arrayList) 中的用户添加为新客户，用户可以进行多项操作。乍一看似乎很简单，但我认为我的概念不正确。

通过RMI发送整个银行是否正确？因为起初我认为银行会成为服务器，但我找不到其他方法来做到这一点。目前，客户端 GUI 要求输入登录名和密码，并通过 RMI 接收银行。用户的特征在于密码的名称和哈希值。

```
private String name;
private byte[] passwordDigest; 
```

事实上，GUI 正在做所有的安全检查，我不知道它是否相关。当您输入 login//password 时，它将在银行中搜索登录名并比较密码的哈希值。事实上，我的印象是客户知道太多信息，因为当你拥有银行时，你就拥有了一切。

它看起来是正确的还是我需要改变我的实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:21:31.887

您需要两个远程对象类。

第一个是通过`Naming.lookup()`; 它是一个单例；它包含一个`login()`方法。

此方法返回第二个远程对象，它不是单例，未在注册表中注册，并且为每个返回值重新创建。该对象包含所有银行业务方法以及一个`logout()`取消导出它的方法；它可能还实现了`Unreferenced`接口，因此它可以检测到死客户端，并自行取消导出。因为它每个客户端存在一次，它可以保存客户端状态，并且因为它只能通过成功的登录步骤获得，它解决了您的安全问题。

```
public interface Login extends Remote
{
    Session login(String username, char[] password /* or whatever */)
        throws LoginException, RemoteException;
}

public interface Session extends Remote
{
    void logout() throws RemoteException;
    void deposit(...) throws RemoteException;
    void withdraw(...) throws RemoteException;
}

public class LoginImpl extends UnicastRemoteObject implements Login
{
    public Session login(String username, char[] password)
        throws LoginException, RemoteException
    {
        // username/password check; if it fails throw a LoginException
        return new SessionImpl(username); // or whatever
    }
}

public class SessionImpl extends UnicastRemoteObject implements Session, Unreferenced
{
    public void logout() throws RemoteException
    {
        unexportObject(this, true);
    }

    public void unreferenced()
    {
        unexportObject(this, true); // needs to be in a try/catch block of course
    }

    // etc
} 
```

我在 2001 年的书中将其描述为远程会话模式。

当然，您*还*需要传输层安全性：请参阅`javax.rmi.ssl.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:51:11.777

您误解了远程接口的工作方式。客户端没有银行，它只有对银行的*远程**实例*的引用。客户端在 Bank 接口上进行的所有方法调用实际上都变成了对 Bank 的*远程*实例（在服务器中运行）的*远程*调用。

 *据推测，安全检查是*在**每个方法调用*的 Bank 方法中完成的。*

# objective-c - 对两个视图控制器使用相同的 NSLock

> ID：13632452
> 
> 赞同：0
> 
> 时间：2012-11-29T18:37:43.490
> 
> 标签：objective-c, xcode, concurrency, nsthread

我遇到了对 XML 文件的读取和写入操作（由两个不同的线程和两个不同的视图控制器完成）重叠的情况。

我尝试了以下逻辑以将相同的 NSLock 与两个视图控制器一起使用：

**视图控制器一：**

```
(on a background thread using dispatch_async)
- (void)writeToXML {
    // get xmlLock (lock declared globally)
    // write
    // unlock
} 
```

**视图控制器二：**

```
(on the main thread)
- (void)readFromXML {
    // get xmlLock (lock referenced from ControllerOne)
    // read
    // unlock
} 
```

但是，在调试时，我注意到即使 ControllerOne 锁定了 xmlLock，ControllerTwo 仍然能够获取它。

我在这里想念什么？另外，有没有更好的方法来做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:45:39.570

你确定它是同一个 NSLock 实例吗？无论如何，似乎更好的方法可能是为此设置一个调度队列；readFromXML 可以 dispatch_sync 到它上面，而 writeToXML 可以 dispatch_async 到它上面。

# user-interface - 如何相对于其父级定位子菜单？

> ID：13632454
> 
> 赞同：1
> 
> 时间：2012-11-29T18:37:58.263
> 
> 标签：user-interface, drop-down-menu, submenu

我正在设计一个多列嵌套菜单控件。我试图找出飞出子菜单的位置。子菜单当前在悬停在“>”上时飞出，而不是项目的文本。

假设这是菜单。

```
-------------------
|item 1 >|item 2 >|
|item 3 >|item 3 >|
------------------- 
```

选项1：

```
-------------------
|item 1 >|item 2 >|
|item -------------------
------|item 1.1|item 1.2|
      |item 1.3|item 1.4|
      ------------------- 
```

选项 2：

```
-------------------
|item 1 >|item 2 >|
-------------------
|item 1.1|item 1.2|
|item 1.3|item 1.4|
------------------- 
```

选项 3：

```
-------------------
|item 1 >|-------------------
|item 3 >||item 1.1|item 1.2|
----------|item 1.3|item 1.4|
          ------------------- 
```

选项 4：

```
-----------------------------
|item 1 >||item 1.1|item 1.2|
|item 3 >||item 1.3|item 1.4|
----------------------------- 
```

你觉得哪一个更人性化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:46:57.540

我建议没有一个选项是可行的。您需要将框放置在您悬停的项目下方 1.5 行处，这样如果您按下鼠标，您就不会卡在打开的框上。实际上同样适用于水平例如：

```
-------------------
|item 1 >|item 2 >|
|item    |        |
--------------+------------------
              |item 1.1|item 1.2|
              |item 1.3|item 1.4|
              ------------------- 
```

我不能在 ascii 中显示半行，但你应该有希望得到这个想法

# abap - 将多个表中的数据提取到 1 个对象中

> ID：13632457
> 
> 赞同：0
> 
> 时间：2012-11-29T18:38:13.567
> 
> 标签：abap, sap-erp

我需要将 2 个表中的数据提取到 1 个对象中。两个表共享设备号，我需要从表 EQKT 中获取相应的描述，从 EQUZ 中获取所有者 ID。

```
DATA: BEGIN OF t_report OCCURS 3,
matnr LIKE eqkt-equnr,
mtart LIKE eqkt-eqktx,
maktx LIKE equz-J_3GEIGNER,
END OF t_report.*-
DATA: d_repid LIKE sy-repid.

*-----------------------------------------
*--Selection Screen
SELECT-OPTIONS: s_matnr FOR eqkt-equnr.

*-----------------------------------------
START-OF-SELECTION.
*-Read data
  SELECT * FROM eqkt
  WHERE equnr IN s_matnr.
    CLEAR makt.
    SELECT SINGLE *
    FROM makt
    WHERE matnr = eqkt-equnr AND
    spras = sy-langu.
    MOVE: eqkt-equnr TO t_report-matnr,
    eqkt-eqktx TO t_report-mtart.
    APPEND t_report.
  ENDSELECT.

*This is where it stops working.
  SELECT * FROM EQUZ
  WHERE equnr IN s_matnr.
    MOVE: EQUZ-J_3GEIGNER TO t_report-maktx.
    APPEND t_report.
  ENDSELECT. 
```

代码编译，在我显示它的 ALV 中，它确实在表格顶部正确显示了“所有者”，但没有为所有者填写数据（设备编号和描述正确显示）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T14:51:27.370

你需要做的是一个JOIN：

```
SELECT T~EQUNR T~EQKTX Z~J_3GEIGNER 
  INTO TABLE T_REPORT
  FROM EQKT AS T
  JOIN EQUZ AS Z
    ON T~EQUNR = Z~EQUNR
  WHERE T~EQUNR IN S_MATNR
    AND T~SPRAS = SY-LANGU. 
```

（在您的示例中，您没有`MTART`在表中定义字段，但您在代码中将其移动到那里。您当然可以根据需要调整此示例）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T00:07:05.267

第二个循环不应该在表中添加新条目，而是应该填充表中的第三列，这基本上是在第一个循环中填充的，对吗？

如果是这样，将第二个选择移到第一个选择中，并以与 table 相同的方式进行操作`MAKT`，即

```
SELECT SINGLE J_3GEIGNER  
    FROM EQUZ
    INTO T_REPORT-MAKTX
    WHERE equnr = eqkt-equnr. 
```

但是如果你真的想保留两个循环，你需要在第二个循环中使用字段符号，如下所示：

```
FIELD-SYMBOLS: <T_REPORT> LIKE LINE OF T_REPORT.
SELECT * FROM EQUZ WHERE equnr IN s_matnr.
  READ TABLE T_REPORT ASSIGNING <T_REPORT>
         WITH KEY MATNR = EQUZ-EQUNR.
  CHECK SY-SUBRC EQ 0\.  " skip unknown material numbers
  <T_REPORT>-MAKTX = EQUZ-J_3GEIGNER.
ENDSELECT. 
```

这样，表中的值`EQUZ`将被添加到内部表中的正确记录中`T_RECORD`。

顺便说一句，还有一个提示：不要使用`OCCURS`，而是明确声明表。在您的情况下，它应该是这样的：

```
DATA: BEGIN OF S_report,
        matnr LIKE eqkt-equnr,
        mtart LIKE eqkt-eqktx,
        maktx LIKE equz-J_3GEIGNER,
      END OF S_report,
      T_REPORT like standard table of S_REPORT. 
```

当然，那么您不能使用标题行，而是`S_REPORT`用作工作区，例如 write`APPEND S_RECORD TO T_RECORD`而不是`APPEND T_RECORD`（但这只会使您的代码更好，更易于阅读和维护）。

# php - 如何在 mod_rewrite 中区分文件和目录？

> ID：13632458
> 
> 赞同：1
> 
> 时间：2012-11-29T18:38:16.983
> 
> 标签：php, apache, mod-rewrite

我在我的应用程序中使用了**mod_rewrite**。所以我有一些页面`site.com/about/`，`site.com/services/`实际上是文件。但是我有一个名为**panel**的目录，用于管理面板。
如何编写 mod_rewrite 规则来排除此目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:42:58.670

通常检查该规则是否与以下两个规则不匹配文件和目录：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

[另请参阅rewritecond](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritecond)的官方文档：

> *   '- **d** ' (is directory)
>     将 TestString 视为路径名并测试它是否存在，并且是一个目录。
> *   ' **-f** ' (是普通文件)
>     把TestString当作一个路径名并测试它是否存在，并且是一个普通文件。

# c# - 如何在 C# 中调用元组

> ID：13632461
> 
> 赞同：1
> 
> 时间：2012-11-29T18:38:20.703
> 
> 标签：c#, asp.net, tuples

```
 public Tuple<string, int> aaCreeDtaOneAccount(int NbLines, string Straccref)
 {
     return new Tuple<string,int>(StrFullFilDtaname,NbLines);
 } 
```

**此功能在我的业务层中，我想在我的 UI 中访问**

我想访问两个值 NbLines 和 StrFullFilDtaname

我如何在 C# 中做到这一点请帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T18:41:06.733

类的用途`Item1`和`Item2`性质[`Tuple<T1, T2>`](http://msdn.microsoft.com/en-us/library/dd268536.aspx)：

```
var tuple = aaCreeDtaOneAccount(42, "Foo");
var strFullFitDtaname = tuple.Item1;
var nblines = tuple.Item2; 
```

# facebook - 无标题的对象不起作用？

> ID：13632462
> 
> 赞同：1
> 
> 时间：2012-11-29T18:38:23.463
> 
> 标签：facebook, facebook-opengraph

根据[文档](http://developers.facebook.com/docs/technical-guides/opengraph/titleless-objects/)，可以通过将字段“og:title”留空来创建无标题对象。当我发布一个带有无标题对象的活动时，该活动被创建并且我收到一个活动 ID，但该活动未显示在 Facebook 上。当我输入活动的 URL（即[http://www.facebook.com/USER_ID/activity/ACTIVITY_ID](http://www.facebook.com/USER_ID/activity/ACTIVITY_ID)）时，Facebook 说“找不到您请求的页面。”。

如果我更新对象并设置标题，所有活动都会出现并且工作正常。如果我更新对象并清空标题，活动将再次消失。

有人成功使用无标题的对象吗？有没有人解决这个问题？

注意：我还在[Facebook 上打开了一个错误](http://developers.facebook.com/bugs/128913220599051)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:57:14.647

Facebook 表示不再支持无标题对象：http: [//developers.facebook.com/bugs/128913220599051](http://developers.facebook.com/bugs/128913220599051)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T15:51:41.170

显然没有标题的对象需要设置描述属性，否则它们不会显示在用户活动中。

# html - 灯箱服务器问题

> ID：13632463
> 
> 赞同：-1
> 
> 时间：2012-11-29T18:38:24.550
> 
> 标签：html, css, web, lightbox

我最近刚刚完成了一个我在[http://www.jn-design.co.uk/WirralPT/testimonials.html托管的网站](http://www.jn-design.co.uk/WirralPT/testimonials.html)

灯箱部分（页面底部的缩略图）不起作用。

它适用于上面的测试托管站点，但不适用于以下地址[http://www.wirralpt.co.uk/testimonials.html](http://www.wirralpt.co.uk/testimonials.html)

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:42:45.813

看起来不像 lightbox.js 正在加载

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:10:44.067

我用萤火虫，轨道检查了它。您的站点中未包含 js

# r - 如何在knitr中组合回归表

> ID：13632464
> 
> 赞同：0
> 
> 时间：2012-11-29T18:38:24.723
> 
> 标签：r, knitr, texreg

我正在将回归表合并到`knitr`. 我尝试使用`texreg`，但它没有用。我还可以做些什么？谢谢。例子：

```
\documentclass{article}

\begin{document}

<<result='asis'>>=
  library(texreg)
  reg1 <- lm(Petal.Length ~ Petal.Width, data=iris)
  reg2 <- lm(Sepal.Length ~ Sepal.Width, data=iris)
  texreg(list(reg1,reg2))
@

\end{document} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:46:26.507

您的第二次调用会`lm`覆盖之前的值`reg`

`?texreg`说第一个参数可以是“一个`list`统计模型”，所以试着列一个列表。

```
texreg(list(lm(Petal.Length ~ Petal.Width, data=iris), 
            lm(Sepal.Length ~ Sepal.Width, data=iris))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T20:10:35.310

我不确定这是否是`texreg`软件包的错误或功能；您可能应该与以下内容的作者交谈`texreg`：

```
>   library(texreg)
Version:  1.15
Date:     2012-11-13
>   reg1 <- lm(Petal.Length ~ Petal.Width, data=iris)
>   reg2 <- lm(Sepal.Length ~ Sepal.Width, data=iris)
>   texreg(list(reg1,reg2))

\usepackage{booktabs}
\usepackage{dcolumn}

\begin{table}
\begin{center}
\begin{tabular}{l D{.}{.}{3.5} @{}D{.}{.}{3.5} @{}}
\toprule
            & \multicolumn{1}{c}{Model 1} & \multicolumn{1}{c}{Model 2} \\
\midrule
(Intercept) & 1.08^{***} & 6.53^{***} \\
            & (0.07)     & (0.48)     \\
Petal.Width & 2.23^{***} &            \\
            & (0.05)     &            \\
Sepal.Width &            & -0.22      \\
            &            & (0.16)     \\
\midrule
R$^2$       & 0.93       & 0.01       \\
Adj. R$^2$  & 0.93       & 0.01       \\
Num. obs.   & 150        & 150        \\
\bottomrule
\vspace{-2mm}\\
\multicolumn{3}{l}{\textsuperscript{***}$p<0.01$, 
  \textsuperscript{**}$p<0.05$, 
  \textsuperscript{*}$p<0.1$}
\end{tabular}
\end{center}
\caption{Statistical models}
\label{table:coefficients}
\end{table}
[1] "\n\\usepackage{booktabs}\n\\usepackage{dcolumn}\n\n\\begin{table}\n\\begin{center}\n\\begin{tabular}{l D{.}{.}{3.5} @{}D{.}{.}{3.5} @{}}\n\\toprule\n            & \\multicolumn{1}{c}{Model 1} & \\multicolumn{1}{c}{Model 2} \\\\\n\\midrule\n(Intercept) & 1.08^{***} & 6.53^{***} \\\\\n            & (0.07)     & (0.48)     \\\\\nPetal.Width & 2.23^{***} &            \\\\\n            & (0.05)     &            \\\\\nSepal.Width &            & -0.22      \\\\\n            &            & (0.16)     \\\\\n\\midrule\nR$^2$       & 0.93       & 0.01       \\\\\nAdj. R$^2$  & 0.93       & 0.01       \\\\\nNum. obs.   & 150        & 150        \\\\\n\\bottomrule\n\\vspace{-2mm}\\\\\n\\multicolumn{3}{l}{\\textsuperscript{***}$p<0.01$, \n  \\textsuperscript{**}$p<0.05$, \n  \\textsuperscript{*}$p<0.1$}\n\\end{tabular}\n\\end{center}\n\\caption{Statistical models}\n\\label{table:coefficients}\n\\end{table}\n" 
```

问题是`texreg()`在控制台中打印 TeX 表并同时返回一个*可见*的字符向量（参见上面的最后一行），而我猜后者是不必要的，尽管您可以通过放置或分配它来`invisible()`修复它`texreg()`变量以避免打印。这是一个完整的例子：

```
\documentclass{article}
\usepackage{booktabs}
\usepackage{dcolumn}
\begin{document}

<<results='asis'>>=
library(texreg)
reg1 <- lm(Petal.Length ~ Petal.Width, data=iris)
reg2 <- lm(Sepal.Length ~ Sepal.Width, data=iris)
invisible(texreg(list(reg1,reg2), use.packages=FALSE))
@

\end{document} 
```

另请注意，您需要`use.packages=FALSE`避免放在 LaTeX 文档`\usepackage{dcolumn}`的`\usepackage{booktabs}` *中间*，这没有意义（它们应该在序言中）。

# api - 基于 REST API 的 SDK - 开销？

> ID：13632465
> 
> 赞同：4
> 
> 时间：2012-11-29T18:38:27.267
> 
> 标签：api, rest, sdk

据我所知，SDK 和 API 并不完全不同，但 SDK 是实现工具，而 API 更多的是接口。

SDK 可以提供一组工具、帮助类（例如，简化 API 访问的附加代码）、特定语言绑定和示例代码，以帮助用户开发和使用 API。通常，您可以有一个 API 公开一组功能，并有多个 SDK 来访问该 API。API 可能并不总是存在 SDK，但如果提供 SDK，它会很有帮助。

我们有一个要求，我们正在开发 REST API 来访问数据，我的建议是在 REST API 之上创建 SDK，因为，

我们不应该让 API 设计负担过重。客户端需要很多东西，您可以将这些负担推给 SDK。SDK 可以提供开发人员在其应用程序中使用的特定于平台的代码来调用 API 操作——这意味着我们可以保持 API 干净。

另一位架构师对在 REST API 之上开发 SDK 不感兴趣，他认为 SDK 将是额外的开销。

我只是想从这个论坛获得各种想法......任何建议，反馈，想法都会非常有用..

谢谢，
巴拉尼

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T18:46:34.873

哇……现在是首字母缩略词时间！

SDK 通常只是包装类和函数，以使访问您的 REST 或其他 Web 服务 API 更容易。它们本身就是 API，因为它们提供了一个供程序员使用的接口。不必让您的客户端直接运行 curl 或其他 Web 请求来访问您的 Web API，您可以为他们抽象这些。

如果您正在构建一个 SDK，这很酷，但核心 Web API 应该是干净的、易于理解的并且有其自身的优点。

我不是 SDK 的忠实拥护者，除非您的客户群体无法直接访问/使用 REST 服务或没有真正的开发人员。例如，如果您的目标是需要插入式代码并且遇到比 facebook 按钮更复杂的问题的网络营销人员。SDK 将增加现在和将来创建和维护的开销——尤其是跨不同平台。投入额外的时间来改进您的 REST API。

# cordova - Dreamweaver 中的 PhoneGap 构建设置

> ID：13632472
> 
> 赞同：1
> 
> 时间：2012-11-29T18:38:47.937
> 
> 标签：cordova, dreamweaver

提前道歉。当我进入站点、PhoneGap 构建服务、PhoneGap 构建设置时，它会询问：

> 要启用仿真，请提供以下 sdks 的根路径。

```
Android SDK Location
webOS SDK Location 
```

问：这是什么意思？我从 PhoneGap.com 下载了 phonegap-phonegap-2.2.0-0-g8a3aa47.zip，但我不明白 Dreamweaver 在寻找什么。

如果您给我手册的链接，请随时告诉我阅读手册。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:39:45.917

您必须从[这里](http://developer.android.com/sdk/index.html)下载 Android SDK 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:30:13.940

当我开始在 Phonegap 上开发我的第一个应用程序时，我遇到了同样的问题。经过一段时间的研究，我发现了这个视频，它救了我的命。

请看一下： [http ://tv.adobe.com/watch/cs-55-web-premium-feature-tour-/dreamweaver-cs-55-creating-a-native-mobile-application/](http://tv.adobe.com/watch/cs-55-web-premium-feature-tour-/dreamweaver-cs-55-creating-a-native-mobile-application/)

如果您使用 Windows 操作系统和 Android 模拟器，我认为您需要知道如何在模拟器上安装 .apk 文件[http://www.botskool.com/geeks/how-install-apk-files-android-windows-sdk -模拟器](http://www.botskool.com/geeks/how-install-apk-files-android-windows-sdk-emulator)

# video - 将视频帧作为位图绘制到 MFC 窗口

> ID：13632474
> 
> 赞同：9
> 
> 时间：2012-11-29T18:38:54.313
> 
> 标签：video, bitmap, mfc

我正在尝试使用 BlackMagic SDK 编写预览应用程序，但播放时出现断断续续的情况。我正在使用 MFC 框架，并为我的视频预览窗口子类化 CWnd。

当每一帧视频到达时，我将颜色转换为 RGB，然后调用一个函数来显示 RGB 位图。

```
void VideoPreview::Display(int width, int height, byte* buffer)
{
    __int64 begin = GetTickCount();
    HRESULT     hr;
    CRect       rcRect, statusBarRect;

    GetClientRect (rcRect);

    BITMAPINFO bmInfo;
    ZeroMemory(&bmInfo, sizeof(BITMAPINFO));
    bmInfo.bmiHeader.biSize       = sizeof(BITMAPINFOHEADER);
    bmInfo.bmiHeader.biBitCount   = 32;
    bmInfo.bmiHeader.biPlanes     = 1;
    bmInfo.bmiHeader.biWidth      = width;
    bmInfo.bmiHeader.biHeight     = -height;

    dc->SetStretchBltMode(COLORONCOLOR);

    int iResult = StretchDIBits(*dc,
        rcRect.left, rcRect.top, rcRect.right, rcRect.bottom,
        0, 0, width, height,
        buffer, &bmInfo, 0, SRCCOPY);
    DWORD dwError;
    if (iResult == 0 || iResult == GDI_ERROR)
    {
        dwError = GetLastError();
    }
    else
        fpsCount++;
    procTimeCount += GetTickCount() - begin;
} 
```

可以做些什么来创建更流畅的视频？

**更新**：

我最终选择了 Direct2D 而不是 GDI，并获得了更好的性能。下面的代码是我现在用于渲染的代码：

```
 // initialization
HRESULT hr = D2D1CreateFactory(
    D2D1_FACTORY_TYPE_SINGLE_THREADED,
    &pD2DFactory
    );
    // Obtain the size of the drawing area.
RECT rc;
GetClientRect(&rc);

// Create a Direct2D render target              
hr = pD2DFactory->CreateHwndRenderTarget(
    D2D1::RenderTargetProperties(),
    D2D1::HwndRenderTargetProperties(
    this->GetSafeHwnd(),
    D2D1::SizeU(
        1280, 720
        /*rc.right - rc.left,
        rc.bottom - rc.top*/)
        ),
    &pRT);

D2D1_BITMAP_PROPERTIES properties;
properties.pixelFormat = D2D1::PixelFormat(
  DXGI_FORMAT_B8G8R8A8_UNORM,
  D2D1_ALPHA_MODE_IGNORE);
properties.dpiX = properties.dpiY = 96;
hr = pRT->CreateBitmap(D2D1::SizeU(1280, 720), properties, &pBitmap);
ASSERT(SUCCEEDED(hr));

// per frame code
// buffer is rgb frame
HRESULT hr;
pRT->BeginDraw();
pBitmap->CopyFromMemory(NULL, buffer, width*4);
pRT->DrawBitmap(pBitmap);
pRT->EndDraw(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T23:13:34.073

BlackMagic 带有`DirectShow`视频源过滤器。用于`GraphEditPlus`生成使用 BlackMagic 滤镜作为视频源的渲染代码。`Renderer`过滤器可以链接到`HWND`您选择的一个。这应该提供最佳性能。

我相信您当前的实现会引起更多`RAM`的`CPU`使用，即使您使用`Direct2D`blit 缓冲区。

# hudson - 通过远程网络浏览器发出访问哈德森

> ID：13632475
> 
> 赞同：0
> 
> 时间：2012-11-29T18:38:58.500
> 
> 标签：hudson

我正在尝试通过另一台机器访问我的 Hudson 页面，Hudson IP 是 192.168.24.2 我试图用来访问 Hudson 的机器的 IP 是 192.168.24.15。Hudson 在 localhost (24.2) 上使用端口 8080 我没有问题访问它，但是当我尝试远程主机时，我从我的网页中收到此错误。

“192.168.24.15 的服务器响应时间过长。”

我希望有人可以帮助我指出正确的道路。作为旁注，我可以很好地 ping 24.2 服务器，但无法访问网络。

我让 Hudson 在 centos 6 中作为 Linux 服务（不执行 java - jar Hudson.war）运行，试图在 Windows 7 机器上的 Firefox 中访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T21:36:07.333

从其他机器访问 Hudson 时也需要指定端口。尝试使用`http://192.168.24.15:8080`

干杯!

# php - 按ID获取最大行数

> ID：13632476
> 
> 赞同：-1
> 
> 时间：2012-11-29T18:39:00.617
> 
> 标签：php, sql, postgresql

所以我得到了一个看起来像这样的表**匿名：**

```
ID     anonyfield1     anofield2   someNumber
111     left            test          1
111     right           test          1
111                     ok            
222     left            ok            
222     left                          1
222     right           ok            2
222     right           ok            2 
```

我想在此表中按 ID 获得最高数量的行/结果，例如这里的结果将是 4，因为 ID 222 有 4 行。

我不知道如何通过使用查询 SQL 来获得这个结果，所以我需要一些帮助 plz :)

顺便说一句，我使用 pgsql。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:40:08.087

```
select count(*) 
from anonym
where id = (select max(id) from anonym) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:46:55.580

您还可以使用限制：

```
select id, count(*)
from anonym
group by id
order by 2 desc
limit 1 
```

这将保证您只得到一个结果。

如果您只想要计数（*），您可以使用：

```
select count(*)
from anonym
group by id
order by 2 desc
limit 1 
```

您可以列出列表`group by`中不存在的`select`列。

# facebook - $facebook->getUser() 返回 0

> ID：13632477
> 
> 赞同：0
> 
> 时间：2012-11-29T18:39:06.633
> 
> 标签：facebook

我已经阅读了大量关于此的主题，但要么没有答案，要么给出的答案对我不起作用。

如果他们尚未授权，我有以下代码要求授权我的 Facebook 应用程序。一旦获得授权，它应该重定向到同一页面，但这次它不需要请求授权。

该代码完美地要求用户授权......完全按照我的意愿工作，但是当应用程序重新加载时，$user 总是设置为 0。

这是我的代码：

```
//Get PHP SDK
require_once 'facebook.php';
// Create our Application instance.
$facebook = new Facebook(array(
    'appId' => 'xxxxxxxxxxxxxxx',
    'secret' => 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx',
    'cookie' => true
));
    // Get User ID
    $user = $facebook->getUser();

    if ($user) {
        try {
            $user_profile = $facebook->api('/me');
            echo "logged in and authenticated";
        } catch (FacebookApiException $e) {
            error_log($e);
            $user = null;
        }
    }

    // Ask for authorisation
    if(!$user) {
        $login_url = $facebook->getLoginUrl(
            array(
                'canvas' => 1,
                'fbconnect' => 0,
                'scope' => 'email,publish_stream',
                'redirect_uri' => 'myurl - same as Site URL in app basic settings'
            )
        );
        echo "<script> top.location.href='" . $login_url . "'</script>";
    }

} 
```

用户授权应用程序后，它不会再次请求授权，所以我假设授权有效，但为什么`$facebook->getUser()`返回 0？

重定向后的 URL 有两个查询字符串参数 - 'state' 和 'code'。它们是否相关？我应该和他们做点什么吗？据我所知，我已经下载了最新的 Facebook SDK，所以我不知道如何让它工作。

注意：我通过 AJAX 调用上面的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:19:06.660

好的，我已经整理好了。代码确实有效，只是我通过 ajax 运行的事实就是问题所在。一旦我将它用作正确的页面加载而不是 ajax 调用，它就可以正常工作:)

# python-3.x - Python 3 中的应用程序图标

> ID：13632479
> 
> 赞同：0
> 
> 时间：2012-11-29T18:39:18.847
> 
> 标签：python-3.x, icons

我可以使用干净的 Python 3 设置应用程序图标吗？我在同一目录中有 .ico 文件并想添加到应用程序中。（没有 tkinter）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:50:52.573

简短的回答：不，你不能。应用程序图标在不同环境中的设置方式完全不同。通常它是快捷方式上的设置。

更长的答案：这还取决于您对“应用程序图标”的含义。

如果您指的是 Applcartions/Start/Whatever 菜单中的菜单条目图标，那么当您在所使用的任何菜单系统中创建快捷方式时，您可能可以使用 Python 设置它，但它将特定于您的系统和不便携。

可能有一些库可以帮助您为不同的系统创建可以帮助您的安装程序，但它绝对不再是任何有意义的“干净的 Python 3”。:-)

# android - Android - 构建通知，TaskStackBuilder.addParentStack 不起作用

> ID：13632480
> 
> 赞同：62
> 
> 时间：2012-11-29T18:39:20.950
> 
> 标签：android, notifications

我正在尝试从 Android 文档解释的通知启动活动，但是当我打开通知然后按后退按钮时，HomeActivity（父级）没有打开，而是应用程序关闭。我究竟做错了什么？

```
 Intent resultIntent = new Intent(context, MatchActivity.class);;
    resultIntent.setFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);

    TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);

    // Adds the back stack for the Intent (but not the Intent itself)
    stackBuilder.addParentStack(MainActivity.class);

    stackBuilder.addNextIntent(resultIntent); 
```

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-11-29T18:45:04.420

您需要为要启动的活动添加父堆栈，而不是它的父堆栈。

代替：

```
stackBuilder.addParentStack(MainActivity.class); 
```

和：

```
stackBuilder.addParentStack( MatchActivity.class ); 
```

这假设您已经在 Manifest (API 16+) 中定义了父级：

```
<activity android:name=".MatchActivity"
    android:parentActivityName=".MainActivity"
    ... /> 
```

如果您在 API 16 下进行开发，则必须将父级定义为：

```
<activity android:name=".MatchActivity">
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value=".MainActivity" />
</activity> 
```

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2016-03-20T05:59:09.953

如果所有解决方案都不起作用，并且您确定您已仔细遵循所有操作...那么您需要**卸载**该应用程序并**重新安装**它。为我工作！

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-10-19T09:25:46.313

```
Intent resultIntent = new Intent(App.getContext(), TargetActivity.class);
Intent backIntent = new Intent(App.getContext(), ParentActivity.class);
backIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);
final PendingIntent resultPendingIntent = PendingIntent.getActivities(
                                    App.getContext(), 0, 
               new Intent[]{backIntent, resultIntent}, PendingIntent.FLAG_ONE_SHOT);
mNotifyBuilder.setContentIntent(resultPendingIntent); 
```

这解决了我在通知点击时的父堆栈问题

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-11-28T19:14:48.817

使用[TaskStackBuilder](http://developer.android.com/reference/android/support/v4/app/TaskStackBuilder.html)并没有解决我的问题，只适用于 Honeycomb 和更大。所以我采取以下解决方案（请不要把我钉在十字架上）：

1.  调用`MainActivity`而不是`MatchActivity`，作为参数传递`MatchActivity`（通过 Intent）。
2.  在中，如果参数可用，则`MainActivity.onCreate`启动。`MatchActivity`

新代码：

```
Intent resultIntent = new Intent(context, MainActivity.class) //
        .putExtra(MainActivity.ACTIVITY_EXTRA, MatchActivity.class.getName()) //
        .putExtra("Pass extras to MatchActivity", "if you want! :)");

PendingIntent pendingIntent = PendingIntent.getActivity(context, visitId, resultIntent, PendingIntent.FLAG_UPDATE_CURRENT);

Notification notification = new NotificationCompat.Builder(context) //
            .setContentIntent(pendingIntent) //
            .build(); 
```

开`MainActivity`：

```
public static final String ACTIVITY_EXTRA = "activity";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (getIntent().getStringExtra(ACTIVITY_EXTRA) != null) {
        startActivity(new Intent(getIntent()).setClassName(this, getIntent().getStringExtra(ACTIVITY_EXTRA)));
    }
    ...
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-17T16:59:20.540

对我来说 stackBuilder.addParentStack 没有用。

我最终这样做了，希望这可以帮助你。

```
 Intent intent = new Intent(context, MatchActivity.class);

    TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);
    // Adds the back stack for the Intent
    stackBuilder.addNextIntentWithParentStack(new Intent(context, MainActivity.class));
    stackBuilder.addNextIntent(intent);
    PendingIntent pendingIntent = stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-29T21:05:34.203

您是否查看过 Android 文档，特别是 [Notifications](http://developer.android.com/guide/topics/ui/notifiers/notifications.html) API 指南。它详细描述了如何执行此操作。

请注意，如果您从通知启动的 Activity 不是正常 Activity 流程的一部分，则它不应*转到*应用程序的起始页；相反，它应该转到主屏幕。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-09T01:26:19.527

您应该将此添加到 AndroidManifest 上的 MainActivity：

```
<activity
   android:name=".MainActivity"
   android:allowTaskReparenting="true" /> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-15T09:55:16.983

如其他答案所述，TaskStackBuilder 不适用于 Honeycomb 以下的版本。

我的解决方案是覆盖活动的`onBackPressed()`方法。

```
@Override
public void onBackPressed() {
    NavUtils.navigateUpFromSameTask(this);
} 
```

显然，如果您计划以其他方式完成活动，您也必须处理它。（虽然我想覆盖`finish()`会有一些意想不到的行为）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-05T13:49:30.840

我有同样的问题！解决：

切换到

```
PendingIntent resultPendingIntent = 

PendingIntent.getActivity( this, 0, resultIntent, PendingIntent.FLAG_UPDATE_CURRENT);

PendingIntent resultPendingIntent = 

stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-20T17:30:04.770

如果清单中的 activiti 有下一个**launchMode** ，也会发生这种情况：

```
<activity android:name=".SecondActivity"
     ...
         android:launchMode="singleInstance"
         android:parentActivityName=".MainActiviy"
    ...
/> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-20T12:20:59.217

如果您在项目中使用代码生成（如 Dagger），则应将 MainActivity.class 替换为 MainActivity_.class（或任何您的父活动名称）。我花了一整天的时间才弄清楚这一点。希望这可以挽救某人的一天。

# python - 在 sqlite3 LIKE 查询中使用 python 字符串

> ID：13632485
> 
> 赞同：1
> 
> 时间：2012-11-29T18:39:46.603
> 
> 标签：python, sqlite, cgi

提前感谢您的帮助。我在 Stackoverflow 和 Google 上看到了几个解决这个问题的方法，但在实施时似乎没有一个对我有用。我只是想将包含在变量中的 python 字符串传递给 sqlite3 WHERE LIKE 查询。没有收到任何错误，只是没有屏幕输出。以下是我尝试过的代码：

尝试 1：导入 cgi 导入 sqlite3

```
#Get string/Clean string:
form = cgi.FieldStorage() 
term = form.getfirst('term', 'empty')
term = cgi.escape(term)

#Open DB Connection:
conn = sqlite3.connect("mydatabase.db")
cursor = conn.cursor()

#Search and Print Results
print "\nResults from a LIKE query on %s:\n" % term
sql='SELECT * FROM myTable WHERE column LIKE %s'
args=['%'+term+'%']
cursor.execute(sql,args)
print cursor.fetchall() 
```

Try2：导入 cgi 导入 sqlite3

```
#Get string/Clean string:
form = cgi.FieldStorage() 
term = form.getfirst('term', 'empty')
term = cgi.escape(term)

#Open DB Connection:
conn = sqlite3.connect("mydatabase.db")
cursor = conn.cursor()

#Search and Print Results
print "\nResults from a LIKE query on %s:\n" % term
term = '%' + term + '%'
cursor.execute("SELECT * FROM table WHERE column LIKE ?", (term,) )
print cursor.fetchall() 
```

如果我输入 LIKE '%http%'，代码就可以工作，但变量总是失败。cgi和它有关系吗？如果我只是将术语打印到屏幕上，它会打印得很好。

# c# - 在 VS2012 中获取 TypeInitializationException，但不是 2010

> ID：13632489
> 
> 赞同：4
> 
> 时间：2012-11-29T18:40:05.750
> 
> 标签：c#, wpf, visual-studio-2010, visual-studio

当我尝试在 Visual Studio 2012 中调试我的应用程序时，我得到了一个`TypeInitializationException`错误，但我能够在 Visual Studio 2010 中运行该应用程序而不会出错。

我最近移动了一堆东西（包括我的项目和几个参考），以便将其放入版本控制系统中。我必须重新链接几个项目，以便在不同系统上签出时所有内容都能正确链接。

我们的开发环境是混合的（VS2010 & VS2012）。用完 VS2010 不会产生任何错误。但是当我在 VS2012 中运行调试时，我收到了`TypeInitializationException`异常。

*原始*目录中的项目（出于版本控制目的而移动之前所在的位置）在 VS2010 和 VS2012 中仍然可以正常运行。

有一个标志或一个参数或某处有点混乱，但我不确定在哪里。有没有人知道我可以做些什么来让它在 VS2012 中也能正常工作？

（请让我知道要在此处包含的代码或配置信息（如果有））

**内部异常：**

> 'System.Windows.Navigation.BaseUriHelper' 的类型初始化程序引发了异常。

**（二）InnerException：**

> 'MS.Internal.TraceDependencyProperty' 的类型初始化程序引发了异常。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T19:06:39.837

对原始问题的评论引发了进一步的搜索，最终产生了解决方案。

搜索“'System.Windows.Navigation.BaseUriHelper' 的类型初始化程序引发异常。” 我发现了以下 StackOverflow 问题：[WPF Application failed on startup with TypeInitializationException](https://stackoverflow.com/questions/58425/wpf-application-fails-on-startup-with-typeinitializationexception)

与那个问题类似，我在`<startup> </startup>`“app.config”文件中添加了一个块。放置此标签块的位置有所不同：

**在 VS2012 中导致错误：**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <startup useLegacyV2RuntimeActivationPolicy="true">
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0,Profile=Client" />
    </startup>
    <configSections>
       ...
    </configSections>
    <applicationSettings>
       ...
    </applicationSettings>
</configuration> 
```

**一切正常：**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
       ...
    </configSections>
    <applicationSettings>
       ...
    </applicationSettings>
    <startup useLegacyV2RuntimeActivationPolicy="true">
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0,Profile=Client" />
    </startup>
</configuration> 
```

将标签块移动到底部就可以了！

# ios - 在 UIImage 中加载 UIViewController

> ID：13632490
> 
> 赞同：0
> 
> 时间：2012-11-29T18:40:06.297
> 
> 标签：ios, xcode

我正在使用滑动手势代码来翻转图像，它调用此代码：

```
- (void)rightSwipeHandle:(UISwipeGestureRecognizer*)gestureRecognizer {
    for (UIImageView *imageView in imageArray)
    {

        if (([imageView isKindOfClass:[UIImageView class]] && imageView.tag == ((UISwipeGestureRecognizer *)gestureRecognizer).view.tag))
        {
            [UIView transitionWithView:imageView duration:0.5
                   options:UIViewAnimationOptionTransitionFlipFromRight animations:^{
                       //imageView.image = secondImage;
                   } completion:^(BOOL f){
                       UIStoryboard *sb = [UIStoryboard storyboardWithName:@"PhotoViewControllerStoryboard" bundle:nil];
                       UIViewController *vc = [sb instantiateInitialViewController];
                       vc.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
                       [self presentViewController:vc animated:YES completion:NULL];
                       vc.view.frame = CGRectMake(343, 163, 316, 546.5);

                }
            ];
        }
    }
} 
```

翻转可以正常工作，但是当动画结束时，视图控制器会在黑色背景中加载。`UIImage`如果它是图像的背面，我希望它以类似的方式加载。我怎样才能做到这一点？？

编辑：

![在此处输入图像描述](../Images/27f600e3596eb9eff87b8fe34ab7ad71.png)

# phpexcel - 有没有办法在 PHPExcel 中创建 2 色和 3 色比例条件格式？

> ID：13632494
> 
> 赞同：4
> 
> 时间：2012-11-29T18:40:24.023
> 
> 标签：phpexcel

我正在尝试将 2 色标度和 3 色标度条件格式应用于我使用 PHPExcel 创建的 Excel 工作表。查看文档，似乎 PHPExcel 不支持这些类型的格式（仅支持“经典​​”格式）。

没有等待对 PHPExcel 的增强，有谁知道我可以实现这些渐变格式的任何方式？我不认为有任何类型的 API 可以添加“原始”Excel XML，或者任何类似的东西？

或者也许有其他想法？

谢谢！

# php - 防止欺骗形式

> ID：13632495
> 
> 赞同：1
> 
> 时间：2012-11-29T18:40:32.510
> 
> 标签：php, security

我有一个向自身提交表单的 php 页面。
我想添加一个检查，我可以在其中阻止基本的跨站点伪造。

我的代码：

```
<?php
session_start();

(...) //some code

$secret = substr(md5(uniqid(rand(), true)), 1, 2);
$_SESSION["secret"] = $secret;
$auth = $secret;

?>

(...)

<form id="form" name="form" action="<?php echo htmlentities($_SERVER[PHP_SELF]); ?>" method="post">

(...)

<input type="hidden" name="id" value="<? echo $auth; ?>" />

(...)

<?php

(...)

//as a debug I just tried to display
echo $_POST["id"];
echo "=";
echo $_SESSION["secret"];

(...)

?>
<div>
</body>
</html> 
```

但两者都`id`从不`secret`返回相同的值。
这是为什么？我错过了什么？

* * *

**更新**

所以，我在这里尝试了 Samuel Cook 的回答，正如 Jon Stirling 的评论所建议的那样：

```
if(!isset($_SESSION["secret"])){
    $secret = substr(md5(uniqid(rand(), true)), 1, 2);
    $_SESSION["secret"] = $secret;
    $auth = $secret;
} 
```

但是现在如果没有`$_SESSION["secret"]`
页面返回：

```
<input type="hidden" name="id" value="" /> 
```

我明白为什么，因为只有在会话变量存在时才会设置秘密。
有什么建议么？

* * *

**更新**

在生成新的会话密钥之前移动了检查，并且只检查是否有 id 的帖子。**现在很好用**，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:44:58.447

一旦你打开一个页面 $auth 将生成，提交后我将在隐藏字段中 $_SESSION["secret"] 将更改，因为 $secret 将生成新密钥但 $_POST['id'] 是来自 Post 方法的旧密钥.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:45:38.280

你总是在产生一个新的`$secret`，因此它总是不同的。您可以检查是否`$_SESSION['secret']`存在，如果不存在则创建一个新变量。就像是：

```
if(!isset($_SESSION["secret"])){
    $secret = substr(md5(uniqid(rand(), true)), 1, 2);
    $_SESSION["secret"] = $secret;
    $auth = $secret;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T18:46:04.793

在调试代码执行时，秘密已更改：

```
echo $_POST["id"]; // previous secret
echo "=";
echo $_SESSION["secret"]; // new secret 
```

只要您在脚本开头（**在生成下一个秘密之前**）检查匹配项，就可以了。

# modeling - 数据流图中的推/拉可视化

> ID：13632500
> 
> 赞同：6
> 
> 时间：2012-11-29T18:40:47.963
> 
> 标签：modeling, uml, dataflow-diagram

我试图在图表中可视化数据流，其中数据可以沿一个或多个方向流动。一些参与者将数据推送给图表中的另一个参与者，而其他参与者则拉取数据。

据我所知，uml 中没有它的符号，但我可能是错的。在这样的图表中传达谁是行动部分以及数据流的方向的好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:31:44.750

将确认在 UML 中没有直接的解决方案，所以我看到的选项是：分离流，以某种自定义方式为图形着色，使用不同的箭头类型或以其他方式摆弄图形来传达消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T23:02:18.660

我可能受到我目前工作的德国软件公司的影响，但对于这些情况，我真的很喜欢 FMC（基本建模概念），它 - 说过于简单了 - 一个更抽象的建模版本（例如 UML），主要是由软件架构师使用。

我在这里推荐的一点是，FMC 已经有了代理的概念，因此可以很容易地用于角色图。它具有用于称为通道的连接器，它可以是单向的，因此可以很好地可视化消息传递和用于数据访问（读取、读/写和写入；例如数据库访问）的简单连接器。我将它用于基于 actor 的 Akka 系统的一些建模，它对我来说效果很好。

如果不是 FMC，我也会按照建议使用数据流图。

# android - Facebook 登录与 Android SDK 调试

> ID：13632502
> 
> 赞同：0
> 
> 时间：2012-11-29T18:41:01.787
> 
> 标签：android, facebook-login, facebook-android-sdk, android-logcat

我正在使用适用于 Android 的 Facebook SDK 3。我使用开发人员.facebook.com 上的 Get Started -> Sample Login 应用程序中的示例。登录后尝试我得到应用页面

> Tabu 为 Facebook 登录配置错误。

我的问题是在 Logcat 中我没有得到任何错误信息。我应该得到哈希错误信息或其他任何东西，但它完全安静。

我确实改变了

```
com.facebook.android.Util.ENABLE_LOG 
```

为真，但仍然没有运气。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-29T18:46:00.477

你可以看看下面的帖子，

[talhakosen.com/2012/11/22/facebook-api-for-android/](http://talhakosen.com/2012/11/22/facebook-api-for-android/)

# javascript - Javascript：遍历动态变化的字典

> ID：13632504
> 
> 赞同：0
> 
> 时间：2012-11-29T18:41:07.457
> 
> 标签：javascript, dynamic, dictionary, loops

我试图通过在Javascript中添加元素来迭代字典，同时动态改变它的大小。字典用 1 个元素初始化。伪代码应如下所示：

```
dict = {1:1};
i = 0;
for key in dict{
  dict[i] = i+1;
  i++;
  if i==10{break;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:46:36.683

字典键（对象属性）不应该是整数，但这会使你的“字典”增加到 10 个元素（它只会添加 9 个元素，因为它会在以下情况下跳过`i == 1`：

```
var dict = { 1: 1 };
for (var i = 0; i < 10; i++) {
    if (!dict.hasOwnProperty(i)) {
        dict[i] = i + 1;
    }
} 
```

# c++ - 如何获取指向编译器选择的重载函数的函数指针？

> ID：13632507
> 
> 赞同：4
> 
> 时间：2012-11-29T18:41:16.497
> 
> 标签：c++, c++11

如何获得指向编译器在检查参数后会选择的重载函数的函数指针？在这个例子中：

```
#include <iostream>

void MyFunction(float a){}
void MyFunction(int a){}

int main()
{
  float a;

  MyFunction(a);

  void (*manualFunctionPointer)(float);
  manualFunctionPointer(a);

  // automaticFunctionPointer = ?
} 
```

我已经指定我想要一个指向接受浮点数并返回 void 的函数的函数指针。编译器当然可以自己解决这个问题，因为 MyFunction(a) 调用调用了正确的函数。有没有办法获得指向编译器选择的函数的函数指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:59:31.213

```
#include <iostream>

void MyFunction(float a){std::cout << "float\n";}
void MyFunction(int a){std::cout << "int\n";}

template<typename Func, typename T>
void Do( Func f, T t )
{
    f(t);
}
template<typename T>
void DoMyFunction( T t )
{
  Do(static_cast<void(*)(T)>(MyFunction), t);
}
template<typename T>
void DoSomeFunction( T t, void(*func)(T) )
{
  Do(func, t);
}
int main()
{
  float a;

  MyFunction(a);

  void (*manualFunctionPointer)(float) = MyFunction;
  manualFunctionPointer(a);

//  Do(MyFunction, a); -- does not compile
  Do(static_cast<void(*)(float)>(MyFunction), a);
  DoMyFunction(a);
  DoSomeFunction(a, MyFunction);
} 
```

以上工作。我以 4 种不同的方式选择了 MyFunction。

如果您愿意做一些样板，并且想要解决“如果 a 是一个`char`”问题，那么这可能会有所帮助：

```
// wrap the idea of calling MyFunction in a type:
struct MyFunctionFunctor {
  template<typename T> static auto Do( T&& t )->decltype(MyFunction(std::forward(t))) {
    return MyFunction(std::forward(t));
  }
};
// Calling MyFunctionFunctor::Do( x ) will basically do static dispatch on all of
// the overloads of MyFunction

// wrap the idea of dispatching a variable to a functor:
template<typename T, typename Functor>
struct Dispatch {
  static auto Do( T t )->decltype( Functor::Do( t ) )
  {
    return Functor::Do( t );
  }
}

int main()
{
  char a;
  auto func_ptr = &Dispatch<decltype(a), MyFunctionFunctor>::Do;
  func_ptr(a);
} 
```

但是，如前所述，这需要我们将其包装`MyFunction`起来，以便用类型来描述它。我不知道没有样板文件的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T00:37:15.463

**编辑**：这不是真正的解决方案；这更像是一个骗局。但我认为它可以满足需要。

```
#define INVOKE(hof, func, arg) \
   hof([](const decltype(arg)& arg_){return func(arg_);}, arg) 
```

例子：

```
// This function mimics the signature of QtCollector::run for testing
template <typename Functor, typename Arg1>
auto QtConcurrent_run(Functor functor, const Arg1 &arg1)
      -> decltype(functor(arg1))
{
      return functor(arg1);
}

#include <iostream>

int f(int x) { std::cout << "int" << " " << x << std::endl; return x; }
double f(double x) { std::cout << "double" << " " << x << std::endl; return x; }

int main() {
  INVOKE(QtConcurrent_run, f, 3);
  INVOKE(QtConcurrent_run, f, 3.14);
  INVOKE(QtConcurrent_run, f, '3');
  return 0;
} 
```

[在ideone](http://ideone.com/CTSPJW)上看到它。

出于历史目的和一些解释，原始答案如下。

* * *

只是为了清楚起见，因为这是一个有趣的问题，但也许让您的项目移动对您来说更重要，您是否有理由不想将各种函数覆盖包装到函子结构中，并传递函子struct 直接到 QtConcurrent::run ，哪个会欣然接受这样的事情？

如果函数的所有定义都在一个类中，那么就没有问题：

```
struct f_collector {
  ReturnType1 f(ArgType1 arg);
  ReturnType2 f(ArgType2 arg);
  ReturnType3 f(ArgType3 arg);
  // ...
  // Make it a functor:
  template<typename Argtype>
  auto operator()(const Argtype& arg) -> decltype(f(arg)) { return f(arg); }
} 
```

然后你可以打电话`QtConcurrent::run(f_collector(), argument)`，它会正常工作（除非你需要完美的转发，但这是一个小细节）。

所以我有了以下想法，即动态构建一个像上面这样的函子，这基本上意味着给它一个 lambda 表达式。lambda 本身就是很简单的样板；很容易从中制作宏：

```
// This is the functor
template<typename Arg, typename Func> struct wrapper {
  wrapper(Func f) : f(f) {}
  const Func f;
  auto operator()(Arg arg) const -> decltype(f(arg)) {return f(arg);}
};

// As usual, a make_* function, because you can't template deduce a constructor
template<typename Arg, typename Func>
wrapper<Arg, Func> make_wrapper(Func f) {
  return wrapper<Arg, Func>(f);
}

// Boilerplate inside a macro
#define INVOKE(hof,func,arg) \
   hof(make_wrapper<decltype(arg)>( [](const decltype(arg)& arg_) { \
                                      return func(arg_); \
                                    }), \
       arg) 

// The above was ugly, but it's easy to use. For testing, I define
// this with a similar signature to QtConcurrent::run
template <typename Functor, typename Arg1>
auto QtConcurrent_run(Functor functor, const Arg1 &arg1)
      -> decltype(functor(arg1))
{
      return functor(arg1);
}

#include <iostream>

int f(int x) { std::cout << "int" << " " << x << std::endl; return x; }
double f(double x) { std::cout << "double" << " " << x << std::endl; return x; }

int main() {
  INVOKE(QtConcurrent_run, f, 3);
  INVOKE(QtConcurrent_run, f, 3.14);
  INVOKE(QtConcurrent_run, f, '3');
  return 0;
} 
```

但是后来我想起了 lambda 以及它们的其他优点，只要它们没有捕获，就可以自动转换为函数指针。而且这个 lambda 没有捕获，因为唯一的外部符号是函数本身，而不是具有自动存储类的对象。所以，我认为底线是，你实际上可以用一些样板来做到这一点：

```
#define INVOKE(hof, func, arg) \
   hof([](const decltype(arg)& arg_){return func(arg_);}, arg); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:01:17.627

更换浮子

```
void (*manualFunctionPointer)(float); 
```

和

```
void (*manualFunctionPointer)(decltype(a)); 
```

然后无论发生什么变化，manualFunctionPointer 都会随之而来

# schema - 编辑用户记录的默认机会团队 = usersalesteamedit.jsp

> ID：13632508
> 
> 赞同：0
> 
> 时间：2012-11-29T18:41:27.060
> 
> 标签：schema, salesforce

当您添加/编辑用户的默认机会团队时，会出现一个 SF-native 页面 - usersalesteamedit.jsp。该页面有一个带有以下标签的复选框：“自动将我的默认机会团队添加到我创建的机会或打开转移给我的机会”。

如何以编程方式访问此复选框？它在哪个物体上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T20:07:51.163

几个月前，我向 Salesforce 支持部门提出了这个问题（在改进的 13 冬季版本之前），他们表示这些字段不能通过 API 使用。

# transactions - Shopify Webhook 交易 ID

> ID：13632509
> 
> 赞同：1
> 
> 时间：2012-11-29T18:41:29.250
> 
> 标签：transactions, shopify, webhooks

有没有办法从支付网关获取交易 ID？

我使用到 Shopify 进行付款的 Rails 应用程序。如何从支付网关获取“交易 ID”到我的 Rails 应用程序。

webhook“订单/付款”是否有此信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:33:02.467

看一下[http://api.shopify.com/transactions.html](http://api.shopify.com/transactions.html) API——每个订单在 Shopify 中都有很多交易，这就是此类信息的最终结果（可能在`receipt`现场）。

# c - malloc() 在 Windows 上崩溃但在 Mac 上没有

> ID：13632512
> 
> 赞同：4
> 
> 时间：2012-11-29T18:41:38.140
> 
> 标签：c, malloc

以下代码：

```
#include<stdlib.h>
#include<stdio.h>

int main (void) {
    FILE** f;
    if ( (*f = (FILE *)malloc( sizeof(FILE *)) ) == NULL) {
        printf("Out of RAM or some other disaster!\n");
        return 1;
    }
    printf("OK!\n");
    return 0;
} 
```

在 Mac OS X 10.8 上编译和运行没有任何抱怨。但是在 Windows 7（使用 MinGW 编译）上，它在 malloc() 上崩溃。为什么会这样，或者有什么想法可以阻止它发生？

谢谢！

注意：这显然最初是一个更大程序的一部分，但我已将整个程序简化为上述程序，并在 Mac 和 PC 上仅尝试了此代码并复制了行为。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T18:45:28.680

`f`还没有指向任何地方，因此取消引用它 ( `*f`) 是无效的并且具有未定义的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T18:45:37.610

您将 malloc-ed 内存分配给 *f 这是未定义的行为，因为 f 未初始化。改成

```
f = (FILE **)malloc( sizeof(FILE *)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T18:47:47.457

你必须先`f`分配

```
f = (FILE **)malloc( sizeof(FILE *)) 
```

然后你可以分配`*f`

```
*f = (FILE *)malloc( sizeof(FILE)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T18:58:31.907

动态分配的一般习惯用法是

```
T *p = malloc(sizeof *p * num_elements); 
```

或者

```
T *p;
...
p = malloc(sizeof *p * num_elements); 
```

因此，正确的分配方式`f`是：

```
f = malloc(sizeof *f) 
```

在 C 中强制转换是不必要的，并且`malloc`不鼓励强制转换结果。由于表达式的类型`*f`是`FILE *`,`sizeof *f`与 相同`sizeof (FILE *)`，除了`sizeof *f`你不必担心确保你的类型是正确的。

# java - 对二维数组中的字符串行进行分组

> ID：13632520
> 
> 赞同：0
> 
> 时间：2012-11-29T18:42:23.940
> 
> 标签：java

我有以下问题，任何帮助将不胜感激。假设我们有以下 (nx 3) 数组：

```
["Skyfall", "Monday", "21:00",
 "Batman Rises", "Wednesday", "22:30",
 "Skyfall", "Tuesday", "23:00",
 "The Avengers", "Thursday", "22:45",
 "Skyfall", "Monday", "21:00"
 "Batman Rises", "Wednesday", "22:30",
 "Batman Rises", "Wednesday", "22:00",
    .          .         .
    .          .         .
    .          .         .] 
```

每行由三个字符串表示。我想通过以下方式实现对公共行进行分组的算法。当算法启动时，它首先检查二维数组第一列中的所有值。然后，如果它在那里找到相同的值，它会继续第二列，但它只检查在第一步中具有相同值的行。之后，它以相同的动机继续第三列。最后，它给出了上述过程找到的行。例如，对于给定的数组，输出应该是：

[“Skyfall”，“星期一”，“21:00”，
“蝙蝠侠崛起”，“星期三”，“22:30”]

你知道我该怎么做吗？非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:45:55.047

*   创建一个`Movie`包含三个成员的类：`movieName`, `day`,`time`
*   将每部电影放在一个集合中并检查它是否是重复的，在这种情况下将其添加到重复列表中：

```
if (!set.add(movie)) { //duplicate
    listOfDuplicates.add(movie);
} 
```

之后，如果您愿意，可以随意将结果放回数组中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T20:53:11.930

这是我对如何完成它的看法 - [http://jsfiddle.net/Pqkxz/1/](http://jsfiddle.net/Pqkxz/1/)

我必须遍历该对象两次，一次查看每个对象，第二次测试重复项。这是我用来测试重复的代码：

```
function checkForDuplicate(title, row){
var dup = false;
var index = 0;
for (var movie in TheaterListing) {
   var obj = TheaterListing[movie];
    for (var prop in obj){
        if(prop == "Title" && index != row){ //if not current row
            if (obj[prop] == title) dup = true;            
        }
    }
    index++;
}
return dup; 
```

}

# python - pyGame 添加敌人精灵

> ID：13632532
> 
> 赞同：-1
> 
> 时间：2012-11-29T18:43:06.407
> 
> 标签：python, pygame

我目前正在尝试开发一个小型冒险游戏，当然使用 Pygame，但是我在添加敌人或“小兵”基本移动时遇到了麻烦，甚至可以使用地图编辑器或排序，但我需要生成 x 个小兵并且很好，理想情况下，尝试触摸玩家精灵。

请在我的源代码下面找到，主要的 .py 文件是 tinyAdventures.py，如果有人看一看可以帮助我的话。

[http://www.mediafire.com/?9k9m7uj4idj3m99](http://www.mediafire.com/?9k9m7uj4idj3m99)

```
import pygame
import pauseScreen as dm
import re
from pygame.sprite import Sprite
from pygame import Rect, Color
from random import randint, choice
from vec2d import vec2d
import displattxt
black = (0,0,0)
white = (255,255,255)
blue = (0,0,255)
global currentEditTool
currentEditTool = "Tree"
global editMap

editMap = False
open('MapMaker.txt', 'w').close()
def draw_background(screen, tile_img):
        screen.fill(black)
        img_rect = tile_img.get_rect()
        global rect
        rect = img_rect

        nrows = int(screen.get_height() / img_rect.height) + 1
        ncols = int(screen.get_width() / img_rect.width) + 1

        for y in range(nrows):
            for x in range(ncols):
                img_rect.topleft = (x * img_rect.width,
                                    y * img_rect.height)
                screen.blit(tile_img, img_rect)

def changeTool():
        if currentEditTool == "Tree":
                None
        elif currentEditTool == "Rock":
                None

def pauseGame():
        red   = 255,  0,  0
        green =   0,255,  0
        blue  =   0,  0,255  
        screen.fill(black)
        pygame.display.update()
        if editMap == False:
                choose = dm.dumbmenu(screen, [
                                'Resume',
                                'Enable Map Editor',
                                'Manual',
                                'Show Highscore',
                                'Quit Game'], 64,64,None,32,1.4,green,red)

                if choose == 0:
                        print("hi")
                elif choose ==1:
                        global editMap
                        editMap = True
                elif choose ==2:
                        print("bob")
                elif choose ==3:
                        print("bob")
                elif choose ==4:
                        print("bob")
                else:
                        None      
        else:
                choose = dm.dumbmenu(screen, [
                                'Resume',
                                'Disable Map Editor',
                                'Manual',
                                'Show Highscore',
                                'Quit Game'], 64,64,None,32,1.4,green,red)

                if choose == 0:
                        print("Resume")
                elif choose ==1:
                        print("Dis ME")
                        global editMap
                        editMap = False
                elif choose ==2:
                        print("bob")
                elif choose ==3:
                        print("bob")
                elif choose ==4:
                        print("bob")
                else:
                        None                   

class Wall(pygame.sprite.Sprite):
    # Constructor function
    def __init__(self,x,y,width,height):
        pygame.sprite.Sprite.__init__(self)   
        self.image = pygame.Surface([width, height])
        self.image.fill(blue)
        self.rect = self.image.get_rect()
        self.rect.y = y
        self.rect.x = x

class insertTree(pygame.sprite.Sprite):

    def __init__(self,x,y,width,height, typ):
        pygame.sprite.Sprite.__init__(self)
        self.image = pygame.image.load("images/map/tree.png").convert()
        self.image.set_colorkey(white)
        self.rect = self.image.get_rect()
        self.rect.y = y
        self.rect.x = x

class insertRock(pygame.sprite.Sprite):

    def __init__(self,x,y,width,height, typ):
        pygame.sprite.Sprite.__init__(self)
        self.image = pygame.image.load("images/map/rock.png").convert()
        self.image.set_colorkey(white)
        self.rect = self.image.get_rect()
        self.rect.y = y
        self.rect.x = x

class Creep(pygame.sprite.Sprite):
    """ A creep sprite that bounces off walls and changes its
        direction from time to time.
    """
    def __init__(   
            self, screen, creep_image, explosion_images, 
            field, init_position, init_direction, speed):
        """ Create a new Creep.

            screen: 
                The screen on which the creep lives (must be a 
                pygame Surface object, such as pygame.display)

            creep_image: 
                Image (surface) object for the creep

            explosion_images:
                A list of image objects for the explosion 
                animation.

            field:
                A Rect specifying the 'playing field' boundaries.
                The Creep will bounce off the 'walls' of this 
                field.

            init_position:
                A vec2d or a pair specifying the initial position
                of the creep on the screen.

            init_direction:
                A vec2d or a pair specifying the initial direction
                of the creep. Must have an angle that is a 
                multiple of 45 degres.

            speed: 
                Creep speed, in pixels/millisecond (px/ms)
        """
        Sprite.__init__(self)

        self.screen = screen
        self.speed = speed
        self.field = field

        # base_image holds the original image, positioned to
        # angle 0.
        # image will be rotated.
        #
        self.base_image = creep_image
        self.image = self.base_image
        self.explosion_images = explosion_images

        # A vector specifying the creep's position on the screen
        #
        self.pos = vec2d(init_position)

        # The direction is a normalized vector
        #
        self.direction = vec2d(init_direction).normalized()

        self.state = Creep.ALIVE
        self.health = 15

    def is_alive(self):
        return self.state in (Creep.ALIVE, Creep.EXPLODING)

    def update(self, time_passed):
        """ Update the creep.

            time_passed:
                The time passed (in ms) since the previous update.
        """
        if self.state == Creep.ALIVE:
            # Maybe it's time to change the direction ?
            #
            self._change_direction(time_passed)

            # Make the creep point in the correct direction.
            # Since our direction vector is in screen coordinates 
            # (i.e. right bottom is 1, 1), and rotate() rotates 
            # counter-clockwise, the angle must be inverted to 
            # work correctly.
            #
            self.image = pygame.transform.rotate(
                self.base_image, -self.direction.angle)

            # Compute and apply the displacement to the position 
            # vector. The displacement is a vector, having the angle
            # of self.direction (which is normalized to not affect
            # the magnitude of the displacement)
            #
            displacement = vec2d(    
                self.direction.x * self.speed * time_passed,
                self.direction.y * self.speed * time_passed)

            self.pos += displacement

            # When the image is rotated, its size is changed.
            # We must take the size into account for detecting 
            # collisions with the walls.
            #
            self.image_w, self.image_h = self.image.get_size()
            bounds_rect = self.field.inflate(
                            -self.image_w, -self.image_h)

            if self.pos.x < bounds_rect.left:
                self.pos.x = bounds_rect.left
                self.direction.x *= -1
            elif self.pos.x > bounds_rect.right:
                self.pos.x = bounds_rect.right
                self.direction.x *= -1
            elif self.pos.y < bounds_rect.top:
                self.pos.y = bounds_rect.top
                self.direction.y *= -1
            elif self.pos.y > bounds_rect.bottom:
                self.pos.y = bounds_rect.bottom
                self.direction.y *= -1

        elif self.state == Creep.EXPLODING:
            if self.explode_animation.active:
                self.explode_animation.update(time_passed)
            else:
                self.state = Creep.DEAD
                self.kill()

        elif self.state == Creep.DEAD:
            pass

        #------------------ PRIVATE PARTS ------------------#

    # States the creep can be in.
    #
    # ALIVE: The creep is roaming around the screen
    # EXPLODING: 
    #   The creep is now exploding, just a moment before dying.
    # DEAD: The creep is dead and inactive
    #
    (ALIVE, EXPLODING, DEAD) = range(3)

    _counter = 0

    def _change_direction(self, time_passed):
        """ Turn by 45 degrees in a random direction once per
            0.4 to 0.5 seconds.
        """
        self._counter += time_passed
        if self._counter > randint(400, 500):
            self.direction.rotate(45 * randint(-1, 1))
            self._counter = 0

    def _point_is_inside(self, point):
        """ Is the point (given as a vec2d) inside our creep's
            body?
        """
        img_point = point - vec2d(  
            int(self.pos.x - self.image_w / 2),
            int(self.pos.y - self.image_h / 2))

        try:
            pix = self.image.get_at(img_point)
            return pix[3] > 0
        except IndexError:
            return False

    def _decrease_health(self, n):
        """ Decrease my health by n (or to 0, if it's currently
            less than n)
        """
        self.health = max(0, self.health - n)
        if self.health == 0:
            self._explode()

    def _explode(self):
        """ Starts the explosion animation that ends the Creep's
            life.
        """
        self.state = Creep.EXPLODING
        pos = ( self.pos.x - self.explosion_images[0].get_width() / 2,
                self.pos.y - self.explosion_images[0].get_height() / 2)
        self.explode_animation = SimpleAnimation(
            self.screen, pos, self.explosion_images,
            100, 300)

    def draw(self):
        """ Blit the creep onto the screen that was provided in
            the constructor.
        """
        if self.state == Creep.ALIVE:
            # The creep image is placed at self.pos. To allow for 
            # smooth movement even when the creep rotates and the 
            # image size changes, its placement is always 
            # centered.
            #
            self.draw_rect = self.image.get_rect().move(
                self.pos.x - self.image_w / 2, 
                self.pos.y - self.image_h / 2)
            self.screen.blit(self.image, self.draw_rect)

            # The health bar is 15x4 px.
            #
            health_bar_x = self.pos.x - 7
            health_bar_y = self.pos.y - self.image_h / 2 - 6
            self.screen.fill(   Color('red'), 
                                (health_bar_x, health_bar_y, 15, 4))
            self.screen.fill(   Color('green'), 
                                (   health_bar_x, health_bar_y, 
                                    self.health, 4))

        elif self.state == Creep.EXPLODING:
            self.explode_animation.draw()

        elif self.state == Creep.DEAD:
            pass

    def mouse_click_event(self, pos):
        """ The mouse was clicked in pos.
        """
        if self._point_is_inside(vec2d(pos)):
            self._decrease_health(3)
#begin new player

class Player(pygame.sprite.Sprite):

    change_x=0
    change_y=0
    frame = 0

    def __init__(self,x,y):

        pygame.sprite.Sprite.__init__(self)
        # LOAD PLATER IMAGES
        # Set height, width
        self.images = []
        for i in range(1,17):
            img = pygame.image.load("images/player/" + str(i)+".png").convert() #player images
            img.set_colorkey(white)
            self.images.append(img)
        self.image = self.images[0]
        self.rect = self.image.get_rect()
        self.rect.y = y
        self.rect.x = x

    def changespeed(self,x,y):
        self.change_x+=x
        self.change_y+=y

    def update(self,walls):
        # collision detection
        old_x=self.rect.x
        new_x=old_x+self.change_x
        self.rect.x = new_x

        # hit a wall?
        collide = pygame.sprite.spritecollide(self, walls, False)
        if collide:
            # yes
            self.rect.x=old_x

        old_y=self.rect.y
        new_y=old_y+self.change_y
        self.rect.y = new_y

        collide = pygame.sprite.spritecollide(self, walls, False)
        if collide:
            # yes
            self.rect.y=old_y

        # right to left
        if self.change_x < 0:
            self.frame += 1
            if self.frame > 3*4:
                self.frame = 0                 
            # Grab the image, divide by 4
            # every 4 frames. 
            self.image = self.images[self.frame//4]

        # Move left to right.
        # images 4...7 instead of 0...3.
        if self.change_x > 0:
            self.frame += 1
            if self.frame > 3*4:
                self.frame = 0
            self.image = self.images[self.frame//4+4]

        if self.change_y > 0:
            self.frame += 1
            if self.frame > 3*4:
                self.frame = 0
            self.image = self.images[self.frame//4+4+4]

        if self.change_y < 0:
            self.frame += 1
            if self.frame > 3*4:
                self.frame = 0
            self.image = self.images[self.frame//4+4+4+4]

score = 0
# initialize pyGame
pygame.init()

# 800x600 sized screen
global screen
screen = pygame.display.set_mode([800, 600])
screen.fill(black)
#bg_tile_img = pygame.image.load('images/map/grass.png').convert_alpha()
#draw_background(screen, bg_tile_img)
#pygame.display.flip()
# Set title
pygame.display.set_caption('Test')

#background = pygame.Surface(screen.get_size())
#background = background.convert()
#background.fill(black)

# Create the player
player = Player( 50,50 )
player.rect.x=50
player.rect.y=50
movingsprites = pygame.sprite.RenderPlain()
movingsprites.add(player)

# Make the walls. (x_pos, y_pos, width, height)
global wall_list
wall_list=pygame.sprite.RenderPlain()
wall=Wall(0,0,10,600) # left wall
wall_list.add(wall)
wall=Wall(10,0,790,10) # top wall
wall_list.add(wall)
wall=Wall(10,200,100,10) # poke wall 
wall_list.add(wall)
wall=Wall(790,0,10,600) #(x,y,thickness, height)
wall_list.add(wall)
wall=Wall(10,590,790,10)  #(x,y,thickness, height)
wall_list.add(wall)
wall=insertTree(20,540,790,10, "tree")
wall_list.add(wall)
wall=insertTree(20,540-48,790,10, "tree")
wall_list.add(wall)

f = open('MapMaker.txt')
num_lines = sum(1 for line in f)
print(num_lines)
lineCount = 0
with open("MapMaker.txt") as infile:
    for line in infile:
       f = open('MapMaker.txt')
       print(line)

       coords = line.split(',')
       #print(coords[0])
       #print(coords[1])
       #print(coords[2])
       #print(coords[3])
       #print(coords[4])
       if "tree" in line:
          print("tree in")
          wall=insertTree(int(coords[0]),int(coords[1]), int(coords[2]),int(coords[3]),coords[4])
          wall_list.add(wall)
       elif "rock" in line:
          print("rock in")
          wall=insertRock(int(coords[0]),int(coords[1]), int(coords[2]),int(coords[3]),coords[4] )
          wall_list.add(wall)

width = 20
height = 540
height = height - 48
for i in range(0,23):
    width = width + 32
    name = insertTree(width,540,790,10,"tree")
    wall_list.add(name)
    name = insertTree(width,height,690,10,"tree")
    wall_list.add(name)

done = False
#bg_tile_img = pygame.image.load('images/map/grass.png').convert()
#draw_background(screen, bg_tile_img)
while done == False:

    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            done=True

        if event.type == pygame.KEYDOWN:
            if event.key == pygame.K_LEFT:
                player.changespeed(-2,0)
            if event.key == pygame.K_RIGHT:
                player.changespeed(2,0)
            if event.key == pygame.K_UP:
                player.changespeed(0,-2)
            if event.key == pygame.K_DOWN:
                player.changespeed(0,2)
            if event.key == pygame.K_ESCAPE:
                pauseGame()
            if event.key == pygame.K_1:
                global currentEditTool
                currentEditTool = "Tree"
                changeTool()
            if event.key == pygame.K_2:
                global currentEditTool
                currentEditTool = "Rock"
                changeTool()

        if event.type == pygame.KEYUP:
            if event.key == pygame.K_LEFT:
                player.changespeed(2,0)
            if event.key == pygame.K_RIGHT:
                player.changespeed(-2,0)
            if event.key == pygame.K_UP:
                player.changespeed(0,2)
            if event.key == pygame.K_DOWN:
                player.changespeed(0,-2)

        if event.type == pygame.MOUSEBUTTONDOWN and pygame.mouse.get_pressed()[0]:
                if editMap == True:
                    x,y = pygame.mouse.get_pos()
                    if currentEditTool == "Tree":

                        name = insertTree(x-10,y-25, 10 , 10, "tree")
                        wall_list.add(name)
                        wall_list.draw(screen)          
                        f = open('MapMaker.txt', "a+")
                        image = pygame.image.load("images/map/tree.png").convert()
                        screen.blit(image, (30,10))
                        pygame.display.flip()
                        f.write(str(x) + "," + str(y) + ",790,10, tree\n")
                        #f.write("wall=insertTree(" + str(x) + "," + str(y) + ",790,10)\nwall_list.add(wall)\n")

                    elif currentEditTool == "Rock":

                        name = insertRock(x-10,y-25, 10 , 10,"rock")
                        wall_list.add(name)
                        wall_list.draw(screen)
                        f = open('MapMaker.txt', "a+")
                        f.write(str(x) + "," + str(y) + ",790,10,rock\n")
                        #f.write("wall=insertRock(" + str(x) + "," + str(y) + ",790,10)\nwall_list.add(wall)\n")

                else:
                    None

        clock = pygame.time.Clock()
        bg_tile_img = pygame.image.load('images/map/grass.png').convert()
        img_rect = bg_tile_img
        FIELD_RECT = Rect(50, 50, 700, 600)
        CREEP_FILENAMES = [
            'images/player/1.png', 
            'images/player/1.png', 
            'images/player/1.png']
        N_CREEPS = 3

        time_passed = clock.tick(60)
        creep_images = [
        pygame.image.load(filename).convert_alpha() 
        for filename in CREEP_FILENAMES]
        explosion_img = pygame.image.load('images/map/tree.png').convert_alpha()
        explosion_images = [
        explosion_img, pygame.transform.rotate(explosion_img, 90)]

        creeps = pygame.sprite.RenderPlain()
        for i in range(N_CREEPS):
                creeps.add(
                Creep(  screen=screen,
                        creep_image=choice(creep_images), 
                        explosion_images=explosion_images,
                        field=FIELD_RECT,
                        init_position=( randint(FIELD_RECT.left, 
                                                FIELD_RECT.right), 
                                        randint(FIELD_RECT.top, 
                                                FIELD_RECT.bottom)), 
                        init_direction=(choice([-1, 1]), 
                                        choice([-1, 1])),
                        speed=0.03))

    #pygame.display.flip()  
    player.update(wall_list)

    draw_background(screen, bg_tile_img)
    for creep in creeps:
                    creep.update(time_passed)
                    creep.draw()

    movingsprites.draw(screen)
    wall_list.draw(screen)
    pygame.display.flip()

    clock.tick(60)

pygame.quit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:08:22.610

您在其中有创建crees 代码，`for event in pygame.event.get():`因此您在每个事件（即：鼠标移动、按键等）上覆盖creeps 集合。

你应该在主循环之外创建creep集合，然后在一段时间后生成creep，使用N_CREEPS作为MAX：

```
CREEP_SPAWN_TIME = 200 # frames

creep_spawn = CREEP_SPAWN_TIME

clock = pygame.time.Clock()
bg_tile_img = pygame.image.load('images/map/grass.png').convert()
img_rect = bg_tile_img
FIELD_RECT = Rect(50, 50, 300, 300)
CREEP_FILENAMES = [
     'images/player/1.png', 
    'images/player/1.png', 
    'images/player/1.png']
N_CREEPS = 3

creep_images = [
    pygame.image.load(filename).convert_alpha() 
    for filename in CREEP_FILENAMES]
explosion_img = pygame.image.load('images/map/tree.png').convert_alpha()
explosion_images = [
    explosion_img, pygame.transform.rotate(explosion_img, 90)]

creeps = pygame.sprite.RenderPlain()

done = False
while done == False:  # Main loop

    time_passed = clock.tick(60)

    for event in pygame.event.get():
        ...

    creep_spawn -= 1
    if creep_spawn == 0:
        creep_spawn = CREEP_SPAWN_TIME

        # Add new creep
        if len(creeps) < N_CREEPS:
            creeps.add(
                Creep(  screen=screen,
                    creep_image=choice(creep_images), 
                    explosion_images=explosion_images,
                    field=FIELD_RECT,
                    init_position=( randint(FIELD_RECT.left, 
                                            FIELD_RECT.right), 
                                    randint(FIELD_RECT.top, 
                                            FIELD_RECT.bottom)), 
                    init_direction=(choice([-1, 1]), 
                                    choice([-1, 1])),
                    speed=0.03))

    player.update(wall_list)

    draw_background(screen, bg_tile_img)
    for creep in creeps:
        creep.update(time_passed)
        creep.draw()

    movingsprites.draw(screen)
    wall_list.draw(screen)
    pygame.display.flip() 
```

# c# - 从 DataGridViewCheckBoxCell 中获取值

> ID：13632536
> 
> 赞同：8
> 
> 时间：2012-11-29T18:43:25.947
> 
> 标签：c#, winforms

我正在`DataGridView`尝试`ListingGrid`激活/停用已`DataGridViewCheckBoxCell`在`DataGridViewCheckBoxColumn`.

这就是我尝试这样做的方式：

```
foreach (DataGridViewRow roow in ListingGrid.Rows)
{
    if ((bool)roow.Cells[0].Value == true)
    {
        if (ListingGrid[3, roow.Index].Value.ToString() == "True")
        {
            aStudent = new Student();
            aStudent.UserName = ListingGrid.Rows[roow.Index].Cells[2].Value.ToString();
            aStudent.State = true;
            studentList.Add(aStudent);

        }
    }
} 
```

据我所知，当您检查 a 时`DataGridViewCheckBoxCell`，单元格的值是否`true`正确？但它不允许我将值转换为 bool 然后比较它，给我一个无效的强制转换异常。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-29T18:58:20.623

尝试：

```
DataGridViewCheckBoxCell chkchecking = roow.Cells[0] as DataGridViewCheckBoxCell;

    if (Convert.ToBoolean(chkchecking.Value) == true)
{
} 
```

或者

```
DataGridViewCheckBoxCell chkchecking = roow.Cells[0] as DataGridViewCheckBoxCell;

        if ((bool)chkchecking.Value == true)
    {
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-01T17:12:35.953

我认为`== true`没有用，您必须检查您的单元格是否不是[DBNull](https://msdn.microsoft.com/en-us/library/system.dbnull(v=vs.110).aspx)：

```
if (chkchecking.Value != DBNull.Value) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-25T10:51:28.453

我通常这样做 `bool value = (short)chkchecking.Value == 1`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-21T11:00:25.130

尝试了不同的选项，相同的代码有时有效，有时却无效。经过大量调试，结果发现根本原因不是复选框获取代码，而是 datagridvew 机制本身。

从未正确接收到**活动/选定**行中复选框的值。如果 datagridview 只有一行，则无法检测到此问题。

```
myDataGridViewName.EndEdit(); 
```

这必须在读取单元格值之前调用。之后，批准答案中的简单陈述就足够了。

```
Convert.ToBoolean(chkchecking.Value) 
```

或者

```
(bool)chkchecking.Value 
```

两者都按预期工作。这个技巧的功劳归功于类似问题的另一个[答案。](https://stackoverflow.com/a/39901329/309856)

# android - Android NFC 活动 onResume onNewIntent

> ID：13632537
> 
> 赞同：0
> 
> 时间：2012-11-29T18:43:35.650
> 
> 标签：android, android-intent, nfc

[我通过对此示例](http://www.jessechen.net/blog/how-to-nfc-on-the-android-platform/)进行一些更改来开发 NFC 标签读取器/写入器。

我有“X 型”和“Y 型”卡。X 型卡是 Ndef 可读写的，一张是 Mifare Classic，一张是 Mifare Ultralight。Y 型卡是 Ndef Formatable 的，其中一张是受保护的（总线卡），另一张不是。

我从设备（Galaxy S3）中听到三种声音，其中一种是“美妙的声音”，说“这张卡很容易读写，好吧”。另一个是“好声音”，说“这张卡很硬，但我得到了一些信息给你。”。最后一个是“丑陋的声音”，说“我看到你在给我看一个 NFC 标签，但我不在乎。”

当我在屏幕上运行应用程序时，我使用 X 型卡获得了美妙的声音，可以读/写，并且使用 Y 型卡获得了良好的声音，我至少可以获得他们的技术信息。

但是，当我让应用程序在后台运行并且我在设备的主菜单中时，我使用 X 型卡获得了美妙的声音，并且一切正常，当我点击 Y 型卡时，我得到了难看的声音并且应用程序没有没有出现在屏幕上，什么也没有发生。

下面你可以看到我的部分代码，我认为我在**onResume**或**onNewIntent**操作上做错了。任何想法根据代码可能有什么问题，或者还有其他可能导致这种事情的东西吗？谢谢我的onStart：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mNfcAdapter = NfcAdapter.getDefaultAdapter(this);

    setContentView(R.layout.main);
    findViewById(R.id.write_tag).setOnClickListener(mTagWriter);
    mNote = ((EditText) findViewById(R.id.note));
    mTechNotes = ((TextView) findViewById(R.id.tech_notes));
    mNote.addTextChangedListener(mTextWatcher);

    // Handle all of our received NFC intents in this activity.
    mNfcPendingIntent = PendingIntent.getActivity(this, 0,
            new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);

    // Intent filters for reading a note from a tag or exchanging over p2p.
    IntentFilter ndefDetected = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);
    IntentFilter tagDetected = new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED);
    try {
        ndefDetected.addDataType("text/plain");
    } catch (MalformedMimeTypeException e) { }
    mNdefExchangeFilters = new IntentFilter[] { ndefDetected, tagDetected };

    // Intent filters for writing to a tag

    mWriteTagFilters = new IntentFilter[] { tagDetected };
} 
```

我的简历：

```
protected void onResume() {
    super.onResume();
    mResumed = true;
    // Sticky notes received from Android
    if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {
        NdefMessage[] messages = getNdefMessages(getIntent());
        byte[] payload = messages[0].getRecords()[0].getPayload();
        setNoteBody(new String(payload));
        setTechNotesBody(getTagInfo(getIntent()))
        setIntent(new Intent()); // Consume this intent.
    } else if(NfcAdapter.ACTION_TAG_DISCOVERED.equals(getIntent().getAction())) {
        setTechNotesBody(getTagInfo(getIntent()));
        setIntent(new Intent());
    }
    enableNdefExchangeMode();
} 
```

我的暂停：

```
protected void onPause() {
    super.onPause();
    mResumed = false;
    mNfcAdapter.disableForegroundNdefPush(this);
} 
```

我的 onNewIntent：

```
protected void onNewIntent(Intent intent) {
    // NDEF exchange mode
    if (!mWriteMode && NfcAdapter.ACTION_NDEF_DISCOVERED.equals(intent.getAction())) {
        NdefMessage[] msgs = getNdefMessages(intent);
        promptForContent(msgs[0], getTagInfo(intent));
    } else if(!mWriteMode && NfcAdapter.ACTION_TAG_DISCOVERED.equals(intent.getAction())) {
        promptForContent(null, getTagInfo(intent));
    }

    // Tag writing mode
    if (mWriteMode && NfcAdapter.ACTION_TAG_DISCOVERED.equals(intent.getAction())) {
        Tag detectedTag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
        writeTag(getNoteAsNdef(), detectedTag);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:27:26.060

If you've not got a filter in the manifest then your application won't be launched to handle the tag.

# php - 是否可以使用 php exec 并回答脚本中的问题？

> ID：13632538
> 
> 赞同：3
> 
> 时间：2012-11-29T18:43:40.133
> 
> 标签：php, linux, exec

想象一下，我的服务器上有一个 script.sh 询问您的姓名。你运行脚本，它说：

```
what is your name? 
```

然后你输入你的名字，它会打印：

```
hello name! 
```

是否可以使用 php exec 运行这样的脚本？那就是执行脚本并以某种方式回答它可能遇到的不同问题？

希望我清楚。我真正想做的是从我们的开发服务器自动执行“git pull”命令，但它一直在询问用户名/密码。我知道我可以使用 ssh 证书登录来避免这种情况，但我的问题仍然存在。我可以使用 exec() 并回答脚本中未来的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T18:53:24.833

值得注意的是，在您的情况下，更好的解决方案是使用 SSH 密钥进行身份验证。但是，您也许可以使用[PHP Expect](http://php.net/manual/book.expect.php)来实现这一点。

```
ini_set("expect.timeout", -1);
ini_set("expect.loguser", "Off");

$stream = expect_popen("git pull");

while (true) {
    switch (expect_expectl ($stream, array (
            array ("username:", USERNAME),
            array ("password:", PASSWORD),
    ))) {
        case USERNAME:
            fwrite ($stream, "usename\n");
            break;
        case PASSWORD:
            fwrite ($stream, "secret\n");
            break;

        case EXP_TIMEOUT:
        case EXP_EOF:
            break 2;

        default:
            die ("Error has occurred!\n");
    }
}

fclose ($stream); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:56:12.957

对于您的问题：您可以做的一件事是，如果您完全知道要求使用管道 exec("echo 'hello world' | some_command") 如果您需要更复杂的交互，请查看 popen()。popen 为您提供对进程的流式访问，因此您可以使用 fread/fwrite 等但这些不适用于您的情况，因为大多数 ssh 实现使用特殊 API 检查交互式输入。您可以在那里做的是使用密钥或查看 ssh-agent。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-16T12:08:57.277

当您使用 php 执行命令时，该命令要求您回答单个问题以完成该过程。

回声'答案' | 命令

如果您需要回答多个问题，您可以访问此链接：[PHP 执行命令和回答命令问题](http://drupal.uwebweb.com/php-execute-command-and-answering-questions-command)

# java - Slick2d 背景

> ID：13632540
> 
> 赞同：1
> 
> 时间：2012-11-29T18:43:53.593
> 
> 标签：java, slick2d

我正在尝试在我的 Slick2d 窗口中渲染背景图像。但是，它不是渲染。怎么了？

这是我主要课程的第一部分

```
public class SimpleGame extends BasicGame{

Image land = null;

public SimpleGame()
{
    super("Slick2DPath2Glory - SimpleGame");
}

@Override
public void init(GameContainer gc) throws SlickException {
    land = new Image("bg.jpg");
    land.draw(0,0);
} 
```

这是根树 [http://billedeupload.dk/images/4J5CQ.png](http://billedeupload.dk/images/4J5CQ.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:43:07.893

您应该在 render() 方法而不是 init() 方法中完成所有渲染。所以是这样的：

```
@Override
public void init(GameContainer gc) throws SlickException {
    land = new Image("bg.jpg");        
}

@Override
public void render(GameContainer gc, StateBasedGame sb, Graphics g) throws SlickException {
    g.drawImage(land, 0, 0);
} 
```

# java - 获取 PDF 中的确切字符串位置

> ID：13632541
> 
> 赞同：1
> 
> 时间：2012-11-29T18:44:02.207
> 
> 标签：java, pdf

我试图读取一个流，并希望为每个字符串获得确切的位置（坐标）

```
 int size = reader.getXrefSize();

    for (int i = 0; i < size; ++i)
    {
        PdfObject pdfObject = reader.getPdfObject(i);
        if ((pdfObject == null) || !pdfObject.isStream())
            continue;

        PdfStream stream = (PdfStream) pdfObject;
        PdfObject obj = stream.get(PdfName.FILTER);

        if ((obj != null) && obj.toString().equals(PdfName.FLATEDECODE.toString()))
        {
            byte[] codedText = PdfReader.getStreamBytesRaw((PRStream) stream);
            byte[] text = PdfReader.FlateDecode(codedText);
            FileOutputStream o = new FileOutputStream(new File("/home..../Text" + i + ".txt"));
            o.write(text);
            o.flush();
            o.close();
        }

    } 
```

我实际上得到了这样的职位

```
......
BT                  
70.9 800.9 Td /F1 14 Tf <01> Tj 
10.1 0 Td <02> Tj               
9.3 0 Td <03> Tj
3.9 0 Td <01> Tj
10.1 0 Td <0405> Tj
18.7 0 Td <060607> Tj
21 0 Td <08090A07> Tj
24.9 0 Td <05> Tj
10.1 0 Td <0B0C0D> Tj
28.8 0 Td <0E> Tj
3.8 0 Td <0F> Tj
8.6 0 Td <090B1007> Tj
29.5 0 Td <0B11> Tj
16.4 0 Td <12> Tj
7.8 0 Td <1307> Tj
12.4 0 Td <14> Tj
7.8 0 Td <07> Tj
3.9 0 Td <15> Tj
7.8 0 Td <16> Tj
7.8 0 Td <07> Tj
3.9 0 Td <17> Tj
10.8 0 Td <0D> Tj
7.8 0 Td <18> Tj
10.9 0 Td <19> Tj
ET
..... 
```

但我不知道哪个字符串适合哪个位置另一方面在 Itext 我可以得到纯文本

```
PdfReader reader = new PdfReader(new FileInputStream("/home/....xxx.pdf"));
PdfTextExtractor extract = new PdfTextExtractor(reader); 
```

但当然完全没有任何立场......

那么如何获得每个 text(string,char,...) 的确切位置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T09:38:56.990

正如 plinth 和 David van Driessche 在他们的回答中已经指出的那样，从 PDF 文件中提取文本并非易事。幸运的是，iText 解析器包中的类为您完成了大部分繁重的工作。您已经从该包中找到了至少一个类，`PdfTextExtractor,`但如果您只对页面的纯文本感兴趣，那么这个类本质上是一个使用 iText 解析器功能的便利实用程序。在您的情况下，您必须更深入地查看该包中的类。

获取有关 iText 文本提取主题信息的起点是第 15.3 节*Parsing PDFs* of [iText in Action - 2nd Edition](http://itextpdf.com/book/index.php)，尤其是`extractText`示例[ParsingHelloWorld.java](http://itextpdf.com/examples/iia.php?id=275)的方法：

```
public void extractText(String src, String dest) throws IOException
{
    PrintWriter out = new PrintWriter(new FileOutputStream(dest));
    PdfReader reader = new PdfReader(src);
    RenderListener listener = new MyTextRenderListener(out);
    PdfContentStreamProcessor processor = new PdfContentStreamProcessor(listener);
    PdfDictionary pageDic = reader.getPageN(1);
    PdfDictionary resourcesDic = pageDic.getAsDict(PdfName.RESOURCES);
    processor.processContent(ContentByteUtils.getContentBytesForPage(reader, 1), resourcesDic);
    out.flush();
    out.close();
} 
```

它利用了[MyTextRenderListener.java](http://itextpdf.com/examples/iia.php?id=282)`RenderListener`的实现：

```
public class MyTextRenderListener implements RenderListener
{
    [...]

    /**
     * @see RenderListener#renderText(TextRenderInfo)
     */
    public void renderText(TextRenderInfo renderInfo) {
        out.print("<");
        out.print(renderInfo.getText());
        out.print(">");
    }
} 
```

虽然此`RenderListener`实现仅输出文本，但它检查的[TextRenderInfo](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/parser/TextRenderInfo.html)对象提供了更多信息：

```
public LineSegment getBaseline();    // the baseline for the text (i.e. the line that the text 'sits' on)
public LineSegment getAscentLine();  // the ascentline for the text (i.e. the line that represents the topmost extent that a string of the current font could have)
public LineSegment getDescentLine(); // the descentline for the text (i.e. the line that represents the bottom most extent that a string of the current font could have)
public float getRise()             ; // the rise which  represents how far above the nominal baseline the text should be rendered

public String getText();             // the text to render
public int getTextRenderMode();      // the text render mode
public DocumentFont getFont();       // the font
public float getSingleSpaceWidth();  // the width, in user space units, of a single space character in the current font

public List<TextRenderInfo> getCharacterRenderInfos(); // details useful if a listener needs access to the position of each individual glyph in the text render operation 
```

因此，如果您`RenderListener`除了检查文本之外`getText()`还考虑`getBaseline()`或什`getAscentLine()`至`getDescentLine().`拥有您可能需要的所有坐标。

**PS：**[PdfReaderContentParser](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/parser/PdfReaderContentParser.html)`ParsingHelloWorld.extractText()`中的代码有一个包装类，它允许您在给定 a和 a的情况下简单地编写以下内容`PdfReader reader,``int page,``RenderListener renderListener:`

```
PdfReaderContentParser parser = new PdfReaderContentParser(reader);
parser.processContent(page, renderListener); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T21:17:12.467

如果您尝试进行文本提取，您应该知道这绝对是一个不平凡的过程。您至少必须实现一台 RPN 机器来运行代码并累积转换并执行所有文本运算符。您将需要从当前页面资源集解释字体度量，并且您可能需要了解文本编码。

当我使用 Acrobat 1.0 时，我负责“查找...”命令，该命令将您的问题作为子集包含在内。有了更丰富的工具集和更多的专业知识，我们花了几个月的时间才把它做好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T23:28:24.370

如果您想了解 Tj 运算符所看到的字节，请查看 PDF 规范： http: [//www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/ PDF32000_2008.pdf](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)

更具体地说 - 请参阅第 9.4.3 节。解释该部分 - 必须在用于绘制文本的字体中查找每个字节或可能的多个字节序列（在您的示例中，字体被标识为 /F1）。通过查找，您会发现此代码所指的实际字符。

另请记住，您在此处看到这些文本命令的顺序可能根本不反映自然阅读顺序，因此您必须根据您找到的位置找出这些字符的实际正确顺序。

另外请记住，您的 PDF 文件可能不包含例如空格。由于可以通过简单地将下一个字符向右移动一点来“伪造”空格，因此某些 PDF 生成器会省略空格。但是在坐标中找到一个间隙可能不是一个单词中断。例如，它也可能是列的结尾。

这真的非常非常困难——尤其是如果您尝试在通用 PDF 文件上执行此操作（而不是您知道总是来自同一来源的少数布局）。很久以前，我为一款名为 PitStop Pro 的产品编写了一个 PDF 文本编辑器，该产品仍然存在（不再附属于它），这是一个非常困难的问题。

如果这是一个选项，请尝试使用现有的库或工具。这样的库或工具肯定有商业选择；我对开源/免费库不太熟悉，所以我无法对此发表评论。

# memory - 在程序集中分配空间（插入函数）

> ID：13632544
> 
> 赞同：1
> 
> 时间：2012-11-29T18:44:13.390
> 
> 标签：memory, assembly, sparc

我正在研究一个相当于插入函数的程序集，我想知道我将如何准确地分隔列表的元素，以便我可以将我的数据放入其中。我已经找到了应该插入我的信息的正确地址，但是对于如何写入我的数据而不覆盖那里的数据我有点困惑。我的想法是

```
 set givespace, %l1
    !Next part is at the bottom in data section
    .section ".data"
    givespace:
          .align 48 
```

其中 48 是我的元素的大小。这给了我一个错误无效的对齐边界。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:55:58.857

If I correctly understand the question and you need statically allocate space for some data structure with predefined size, you must replace line

```
 .align 48 
```

by the next one

```
 times 48 db 0 
```

This is true way at least for the NASM. In any case I would recomend you to look at your assembler manual to ensure that this construct is supported by you assembly compiler. It is highly possible that your compiler can support not exactly the same notation as in the above example, but in any case it will support some similar analog. 'times' command have the next sintax:

```
 times <number of repeats> <body> 
```

where specifies how many times body will be inserted into the resulting code and contain some standard assembly instruction. In the example above it is allocation of byte of the memory with initialization to null. So, for example, the next two code sections are equal

```
 times 5 dd 012345678h 
```

and

```
 dd 012345678h
     dd 012345678h
     dd 012345678h
     dd 012345678h
     dd 012345678h 
```

.align directive isn't correct for memory space allocation. It have another purpose - aligning of the following chunk of code or data to some predefined value. For example, in this case

```
 VAR1 db 0
    .align 48
    VAR2 db 0 
```

if address of the VAR1 will be 0x1234, then the compiler will insert 44 unused bytes just to ensure that address of VAR2 will be alligned to the 48 bytes boundary. In our case it will be address - 0x1260 (0x1260 = 0x62 * 30 **+ 0**). If be honest, compilers usually allow aligning only to the value that is power of two, and it is highly possible that on compilation of the above example assembler will rise an error, because 48 isn't a power of two. So, it is hard to control how many unused bytes will be allocated by .align directive. It can be any value from 0 to directive parameter. And this value will change in reply to the changes in the source code of your program.

But NOTE! This is an approach for the statical memory allocation during compilation time! If you need dynamical memory allocation in the run time, you need to write your own or find and adopt some third party memory allocator. If you program will run in the OS environment, you can request dynamical memory allocation by using OS API. (for example VirtualAlloc in WinAPI).

# database - 用于测试全文搜索的数据库

> ID：13632545
> 
> 赞同：1
> 
> 时间：2012-11-29T18:44:21.270
> 
> 标签：database, testing, full-text-search

我需要使用 lucene 测试全文索引和搜索，为此我正在寻找大量各种类型的文件（大约 15 Gb）（pdf、doc、txt、xml、json ......）。

我已经尝试过维基百科的数据库，但那些只给了我一个 xml 文件。

任何人都可以建议我在哪里找到这样的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:48:03.213

您可以尝试将[全文搜索与 InnoDB 一起使用](http://www.drdobbs.com/database/full-text-search-with-innodb/231902587)。虽然使用[http://dumps.wikimedia.org/](http://dumps.wikimedia.org/)会更好。

# java - JMS 客户端选择器不工作

> ID：13632546
> 
> 赞同：1
> 
> 时间：2012-11-29T18:44:21.570
> 
> 标签：java, jms

我收到以下 jms 消息。我构建了一个简单的 main 来接收 JMS 消息，但问题是我无法使用“选择器”过滤接收到的 JMS。

```
Message sent format
<eventmsg>
<event ucaname="UCA_Message" processApp="PDWEB">Message</event>
<parameters>
<parameter>
<key>sessionKey</key>
<value>123123</value>
</parameter>
</parameters>
</eventmsg>

import java.util.Hashtable;

import javax.jms.JMSException;
import javax.jms.Message;
import javax.jms.Queue;
import javax.jms.QueueConnection;
import javax.jms.QueueConnectionFactory;
import javax.jms.QueueReceiver;
import javax.jms.QueueSession;
import javax.jms.Session;
import javax.jms.TextMessage;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;

public class JMSClient
{

    public static void main(String[] args)
    {
        QueueSession qs = null;
        QueueConnection qc = null;
        QueueReceiver queueReceiver = null;

        try
        {
            String JNDI_URL = "Myserver-server:2929";
            // The QUEUE_NAME is the name of the queue that receives the JMS message
            String QUEUE_NAME = "jms/eventqueue";
            // USER and PASS to connect to the server, this can be removed by disabling security in
            // the bus
            String USER = "admin12";
            String PASSWORD = "admin12";

            String jndiUrl = "corbaname:iiop:" + JNDI_URL;
            String initialContextFactory = "com.ibm.websphere.naming.WsnInitialContextFactory";
            String qcfName = "javax.jms.QueueConnectionFactory";
            String queueName = QUEUE_NAME;

            // Kept as Hashtable, as the InitialContext constructor does not accept HashMap.
            Hashtable<String, String> props = new Hashtable<String, String>();
            props.put(Context.INITIAL_CONTEXT_FACTORY, initialContextFactory);
            props.put(Context.PROVIDER_URL, jndiUrl);
            Context ctx = new InitialContext(props);

            // Lookup JMS queue
            Queue errorQ = (Queue) ctx.lookup(queueName);
            // Lookup QueueConnectionFactory and create QueueSession
            QueueConnectionFactory qcf = (QueueConnectionFactory) ctx.lookup(qcfName);
            // Creates the connection to the server using the admin and password set
            qc = qcf.createQueueConnection(USER, PASSWORD);
            qs = qc.createQueueSession(true, Session.AUTO_ACKNOWLEDGE);
            qc.start();
            String selector = "sessionKey = '123123'";

            queueReceiver = qs.createReceiver(errorQ,selector);
            Message inMessage = queueReceiver.receive();

            String replyString = ((TextMessage) inMessage).getText();
            System.out.println(replyString);
        }

        catch (JMSException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        catch (NamingException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        finally
        {
            try
            {
                queueReceiver.close();
                qs.close();
                qc.close();
            }
            catch (JMSException e)
            {
                // log.error("Exception occured while Releasing JMS connection", e);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:37:29.733

如果 sessionKey 设置为数字，您可以尝试不带引号的选择器吗？即**sessionKey = 12345**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:51:06.557

[从这里](http://docs.oracle.com/javaee/1.4/tutorial/doc/JMS4.html)提取

```
 Message Selectors 
```

如果您的消息传递应用程序需要过滤它收到的消息，您可以使用 JMS API 消息选择器，它允许消息使用者指定它感兴趣的消息。消息选择器将过滤消息的工作分配给 JMS 提供者，而不是分配给应用程序。有关使用消息选择器的应用程序示例，请参阅将 JMS API 与会话 Bean 一起使用的 J2EE 应用程序。

消息选择器是一个包含表达式的字符串。表达式的语法基于 SQL92 条件表达式语法的一个子集。

```
 The message selector in the example selects any message that has a NewsType property   that is set to the value 'Sports' or 'Opinion':

NewsType = 'Sports' OR NewsType = 'Opinion' 
```

createConsumer 和 createDurableSubscriber 方法允许您在创建消息使用者时将消息选择器指定为参数。

```
 The message consumer then receives only messages whose headers and properties match the selector. (See Message Headers, and Message Properties.) A message selector cannot select messages on the basis of the content of the message body. 
```

# asp.net - runAllManagedModulesForAllRequests="false" 的具体行为是什么？

> ID：13632548
> 
> 赞同：2
> 
> 时间：2012-11-29T18:44:29.753
> 
> 标签：asp.net, iis-7

关于`<modules runAllManagedModulesForAllRequests="true">`

MSDN 文档[说明](http://msdn.microsoft.com/en-us/library/ms691427%28v=vs.90%29.aspx#CommunityContent)了该属性：

> 读/写布尔值。如果为每个请求运行所有托管模块，则为 true；否则为假。默认值为假。

本文详细[描述](http://www.britishdeveloper.co.uk/2010/06/dont-use-modules-runallmanagedmodulesfo.html)了它的“真实”价值行为：

> 这个强烈推荐的修复可能会导致其他问题。这些问题的形式是让所有注册的 HTTP 模块在每个请求上运行，而不仅仅是托管请求（例如 .aspx）。这意味着模块将在任何时候运行 .jpg .gif .css .html .pdf 等。

现在关于：*runAllManagedModulesForAllRequests=" **false** "* ...

我的问题——MSDN 文档似乎没有详细说明——除了不为每个请求运行所有托管模块的一般描述之外，错误值的行为如何？

例如，“false”是否跳过了一些模块但通过一堆其他模块运行请求？请求是否在第一个像处理程序等处理它的模块上停止？非托管模块如何适应这种行为？

总的来说，这种行为是否有很好的指南或描述？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T01:41:36.973

FWIW，

[Scott Hanselman 有一篇](http://www.hanselman.com/blog/BackToBasicsDynamicImageGenerationASPNETControllersRoutingIHttpHandlersAndRunAllManagedModulesForAllRequests.aspx)关于设置及其含义的好帖子。他也有一些具体的理由来解释它的存在以及你可能不需要它的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T21:06:34.850

您可能对[Rick Strahl](http://www.west-wind.com/weblog/posts/2012/Oct/25/Caveats-with-the-runAllManagedModulesForAllRequests-in-IIS-78)关于该主题的博客文章感兴趣，因为其中有一些细微差别`runAllManagedModulesForAllRequests="false"`：

> runAllManagedModulesForAllRequests="false" - 与您想象的不同！不太明显的是，当您设置 runAllManagedModulesForAllRequests="false" 时会发生什么。您可能希望非 ASP.NET 请求不再通过 ASP.NET 模块管道传递。但实际情况并非如此。
> 
> 例如，如果我创建这样的模块：
> 
> ```
> <add name="SharewareModule" type="HowAspNetWorks.SharewareMessageModule"  /> 
> ```
> 
> 默认情况下，无论 runAllManagedModulesForAllRequests 标志如何，它都会针对所有请求触发。即使值 runAllManagedModulesForAllRequests="false"，该模块也会被通过它的非托管请求触发。不太像预期的那样。
> 
> 那么 runAllManagedModulesForAllRequests 到底有什么用呢？它本质上是对 managedHandler preCondition 的覆盖。如果我像这样在 web.config 中声明我的处理程序：
> 
> ```
>  <add name="SharewareModule" type="HowAspNetWorks.SharewareMessageModule" preCondition="managedHandler" /> 
> ```
> 
> 然后设置
> 
> ```
>  <modules runAllManagedModulesForAllRequests="false" > 
> ```
> 
> 我的模块仅针对托管请求触发。如果我将标志切换为`true`，现在我的模块最终会处理从 IIS 传递的所有 IIS 请求。
> 
> 这里的故事的寓意是，如果您打算只查看 ASP.NET 内容，则应始终设置 `preCondition="managedHandler"`属性以确保仅在此模块上触发托管请求。但即使你这样做了，也要意识到`runAllManagedModulesForAllRequests="true"`可以覆盖这个设置，所以你的模块必须预期处理任何类型的请求。

# android - 共享首选项丢失

> ID：13632558
> 
> 赞同：0
> 
> 时间：2012-11-29T18:45:02.703
> 
> 标签：android, sharedpreferences

我将 2 个字符串保存到共享首选项中，有时，由于某种原因，它们被删除了。我知道在 stackoverflow 上还有其他几个问题，但没有一个对我有帮助。

我保存到共享首选项的方式有问题吗？

有没有人知道是什么导致了这个问题，它只发生了两次，比如 2 周之类的......所以我可以测试它，看看我是否解决了这个问题？

```
static void saveTitlePref(Context context, int mAppWidgetId, String text) {
    SharedPreferences.Editor editor = context.getSharedPreferences(PREFS_NAME, 0).edit();
    editor.putString(PREF_PREFIX_KEY + mAppWidgetId, text);
    editor.apply();
}

static void saveSizePref(Context context, int mAppWidgetId, String size) {
    SharedPreferences.Editor editor = context.getSharedPreferences(PREFS_NAME, 0).edit();
    editor.putString(PREF_SIZE_PREFIX_KEY, size);
    editor.apply();
} 
```

我像这样加载它们：

```
static String loadTitlePref(Context context, int mAppWidgetId) {

    SharedPreferences prefs = context.getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
    String prefix = prefs.getString(PREF_PREFIX_KEY + mAppWidgetId, null);
    // If there is no preference saved, get the default from a resource
    if (prefix != null) {
        return prefix;
    } else {
        return context.getString(R.string.appwidget_prefix_default);
    }
}

static String loadSizePref(Context context, int mAppWidgetId) {

    SharedPreferences prefs = context.getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
    String sizeprefix = prefs.getString(PREF_SIZE_PREFIX_KEY, null);
    // If there is no preference saved, get the default from a resource
    if (sizeprefix != null) {
        return sizeprefix;
    } else {
        return "24";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:14:25.330

您是使用多个进程还是单个进程？

您使用的是什么 API 级别？我知道在 API 级别 11 中，Google 更改了默认标志，因此 MODE_MULTI_PROCESS 不再是默认标志。只是一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:18:15.670

在您的情况下，这可能不是答案，但我遇到了类似的问题。它“消失”的原因是由于某种原因`String example = "notnull"`无法使用以下方法进行比较：

```
example != null; 
```

这使它看起来像是消失了，但实际上并没有。如果您改为调用它：

```
example.equals(null); 
```

它将能够识别它。我知道这与第一个相反，但你弄清楚了。在您的情况下，这可能不是答案，但您应该尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T21:16:08.610

`editor.apply();`我刚改成`editor.commit();`

# google-analytics - 使用 GA 事件跟踪进行视频跟踪

> ID：13632561
> 
> 赞同：6
> 
> 时间：2012-11-29T18:45:21.717
> 
> 标签：google-analytics, google-analytics-api, vimeo, event-tracking

我正在尝试在我的网站上设置 GA 事件跟踪以`IFRAME`嵌入 Vimeo 视频。但是，我无法弄清楚跟踪对象应该放在我的`IFRAME`代码中的位置/方式。

**这是我的`IFRAME`嵌入代码：**

```
<iframe src="http://player.vimeo.com/video/51447433" width="500" 
  height="281"frameborder="0" webkitAllowFullScreen 
  mozallowfullscreen allowFullScreen></iframe> 
```

以下是我**认为**[GA 事件跟踪](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)代码**应**如下所示：

```
<a href="#" onClick="_gaq.push(['_trackEvent', 'Videos', 'Play', 'Title']);">Play</a> 
```

这在我的嵌入代码中的什么位置？有人可以告诉我这应该如何看/工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T20:08:32.443

您需要使用播放器 API，因为您无法在这样的第三方域的 iframe 内注入代码。

根据为[播放器 API](http://developer.vimeo.com/player/js-api)提供的文档， t 应该看起来像这样。

**[工作示例](http://jsbin.com/uzixem/1/edit)**

```
<html>
<head>
  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXXX-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<script>
var f = document.getElementsByTagName('iframe')[0],
    url = f.src.split('?')[0];

// Listen for messages from the player
if (window.addEventListener){
    window.addEventListener('message', onMessageReceived, false);
}
else {
    window.attachEvent('onmessage', onMessageReceived, false);
}

// Handle messages received from the player
function onMessageReceived(e) {
    var data = JSON.parse(e.data);

    switch (data.event) {
        case 'ready':
            onReady();
            break;

        case 'play':
            onPlay();
            break;

        case 'finish':
            onFinish();
            break;
    }
}

// Helper function for sending a message to the player
function post(action, value) {
    var data = { method: action };

    if (value) {
        data.value = value;
    }

    f.contentWindow.postMessage(JSON.stringify(data), url);
}

function onReady() {
    post('addEventListener', 'finish');
    post('addEventListener', 'play');
}

function onFinish() {
    _gaq.push(['_trackEvent', 'Vimeo Video', 'finish', url]);
}

function onPlay() {
    _gaq.push(['_trackEvent', 'Vimeo Video', 'play', url]);
}
</script>
</head>
<body>
  <iframe src="http://player.vimeo.com/video/27855315?api=1" width="400" height="225" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
</body>
</html> 
```

上面的代码可以通过使用为您抽象消息传递 API 的 Vimeo Mogaloop api 来简化，代价是使用库加载 Javascript。

**插件准备使用**

请注意，上面的代码仅作为示例，如果您在一个页面上有多个视频，则可能更难正确处理。或者，您也可以使用具有[用于跟踪 Vimeo Video 的插件的](https://github.com/CardinalPath/gas#_gastrackvimeo)[GAS](https://github.com/CardinalPath/gas)（我是那里的主要开发人员）库。

**关于兼容性的警告**

请注意关于兼容性的警告，我想如果您使用 flash 方法插入播放器，您可以获得更广泛的浏览器支持，但在 iOS 设备上完全杀死播放器：

> 使用通用嵌入代码，与播放器交互的唯一方法是使用 window.postMessage。postMessage 是一个相对较新的开发，因此它仅适用于 Internet Explorer 8+、Firefox 3+、Safari 4+、Chrome 和 Opera 9+。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:38:13.397

[Google Analytics on Steroids](https://github.com/CardinalPath/gas#_gastrackvimeo)具有跟踪 Vimeo 的功能。值得检查

# jquery - 如何获取选择字段的值和文本？

> ID：13632569
> 
> 赞同：0
> 
> 时间：2012-11-29T18:45:37.907
> 
> 标签：jquery

我试图让选择字段的值和文本像这样出现，但作为文本。

```
'1' => 'Alabama'
'2' => 'Alaska'
'3' => 'American Samoa'
..etc 
```

但我得到的结果看起来不正确，这里是 jsfiddle：http: [//jsfiddle.net/3UfRq/](http://jsfiddle.net/3UfRq/)

JS：

```
$(document).ready(function() {
   $("#state").each(function() {
   $("p#out").text("'" + $(this).val() + "' => '" + $(this).text() + "'<br/>");
    });
}); 
```

HTML：

```
<select id="state">
  <option value="1">Alabama</option>
  <option value="2">Alaska</option>
  ...
  <option value="65">Wyoming</option>
</select> 
```

输出：

> '43' => '阿拉巴马阿拉斯加美属萨摩亚亚利桑那阿肯色...怀俄明'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:48:25.957

你的选择器`"#state option"`只匹配一个元素，所以`each`只调用你的函数一次，`this`在这个函数里面是`<select>`. 但是你应该遍历`<option>`s. 所以你的代码应该是这样的：

```
$(document).ready(function() {
   $("#state option").each(function() {
     $("p#out").append("'" + $(this).val() + "' => '" + $(this).text() + "'<br/>");
  });
}); 
```

[http://jsfiddle.net/YNGdN/](http://jsfiddle.net/YNGdN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:49:28.163

代替

```
$("#state") 
```

和

```
$("#state option") 
```

**代码**

```
$(document).ready(function() {
   $("#state option").each(function() {
   $("p#out").append("'" + $(this).val() + "' => '" + $(this).text() + "'<br/>");
    });
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/3UfRq/3/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T18:49:54.260

你应该遍历`option`孩子，像这样：http: [//jsfiddle.net/xavier_seignard/3UfRq/2/](http://jsfiddle.net/xavier_seignard/3UfRq/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T18:53:36.590

```
$('#state option').map(function(i, opption) {
    $('#out').append(i + ' => ' + option.text + '<br/>');
}); 
```

[**演示**](http://jsfiddle.net/r75Te/)

# c# - 仅接受数字 2 及以上的正则表达式

> ID：13632573
> 
> 赞同：0
> 
> 时间：2012-11-29T18:45:45.360
> 
> 标签：c#, asp.net, regex

我正在尝试制作一个仅允许用户输入值为 2 或更大的数字的正则表达式（不允许使用 0 和 1）...

我已经尝试了很长一段时间没有成功......我已经尝试过这个，例如：

```
[2-9]|([1-9][0-9]+) 
```

要么你取一个从 2 到 9 的数字，要么你输入任何不同于 0 的数字和至少另一个数字......这样用户就无法输入 0 或 1......

我不知道那里是否有语法错误或我该怎么办？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:53:13.013

我建议你先 Int32.TryParse 然后测试你得到的值是否在你想要的范围内。这是一个粗略的想法：

```
int enteredValue;

if(Int32.TryParse(TextBox1.Text, out enteredValue))
{
    if(enteredValue >= 2 )
    {
       //....
    }
} 
```

正则表达式不适用于您要完成的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:11:57.773

我不确定你是否真的可以在 RegEx 中做到这一点，如果你能做到这一点，你就会有一个看起来非常复杂的 RegEx 字符串。但是为什么要使用 RegEx 呢？您可以简单地检查该值是否为数字并且大于 1。在客户端上您可以使用 JavaScript，然后在服务器上再次检查。这是一个执行此操作的 JavaScript 函数。如果您愿意，可以在 CustomValidator 中使用它：

```
function CheckTwoOrLarger(x)
{
    result = false;

    if ( isFinite(x)         //Check if number
         && parseInt(x) >= 2 //Check if 2 or larger
         ) result = true;

    return result;
} 
```

# autohotkey - 自动热键鼠标按键组合

> ID：13632576
> 
> 赞同：0
> 
> 时间：2012-11-29T18:45:54.130
> 
> 标签：autohotkey

在 Windows 资源管理器中，我想要执行以下操作：

当我**按住**鼠标右键时：Autohotkey Wait for Mouse-Left click Run Action

当我按下**但释放**鼠标右键（正常右键单击）时：运行正常的 Windows 连接菜单

问题在于鼠标按钮的键状态。我想不通。也许有人已经有了与此类似的脚本。

```
#IfWinActive ahk_class CabinetWClass
RButton::
Loop
{
   GetKeyState, state, RButton
   if state = D
     KeyWait, LButton, D
     send {Del}
   if state = U
     return
  }
 Click right
return 
```

这就是我想出的。不工作:((

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:24:34.230

希望能帮助到你。

```
#IfWinActive ahk_class CabinetWClass
RButton::
    While GetKeyState("RButton", "P")       ; while Rbutton is held down
        if GetKeyState("LButton", "P") {        ; if Lbutton is pressed
            GoSub, LabelAction 
            Return
        }
    SendInput {RButton}
return
#IfWinActive

LabelAction:
    msgbox, 64, % A_ThisLabel, Do some actions here.
Return 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-24T22:30:24.220

我认为我对这个问题有更好的解决方案。在我看来，它更短更干净：

```
#IfWinActive ahk_class CabinetWClass

RButton & LButton::
    Send {Del} ;or do whatever you want
return

RButton::
    Send, {RButton}
return 
```

**编辑：**

两年半后回顾这个答案，我现在意识到它可能会阻止右键单击拖动文件，所以这可能是一个更好的选择，但我还没有测试过：

```
#IfWinActive ahk_class CabinetWClass

~RButton & ~LButton::
    Send {Del} ;or do whatever you want
return 
```

# mysql - 用于存储地点属性的数据库结构

> ID：13632584
> 
> 赞同：2
> 
> 时间：2012-11-29T18:46:21.283
> 
> 标签：mysql, sql, database, database-design

我必须存储有关学校和大学的数据（还计划了更多实体，例如语言课程）。

我必须存储的数据列表：

*   可用的学习计划
*   住宿选择
*   特殊饮食的可用性
*   等等

所以我为学校和大学创建了表格：

```
Place (place_id, name, city_id ... )
School (place_id (FK), school_type ...)
University (place_id (FK), ... ) 
```

和选项表：

```
Accomodation (accomodation_id, name, description ...)
Activity (activity_id, name, category ...)
... 
```

而且因为它总是有可能不止一个选项，所以我将它们与这样的表格绑定在一起：

```
Accomodation_to_place (place_id, accomodation_id)
... 
```

但我发现很难更新甚至从整个事情中获取数据。我必须进行 14 次联接和 7 次 GROUP_CONCAT() 才能获得我需要的所有信息。

所以我认为我的数据库设计中一定有一些严重的缺陷。我想询问任何如何使它更好/更容易的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:27:46.620

数据库规范化的目标主要是避免以冗余且易受数据异常影响的方式存储数据。

它有时会导致检索所有数据的复杂查询，但这是因为您正在建模的信息的性质很复杂。然而，为了避免您的数据变得一团糟，规范化设计更好。

我建议，如果您有如此复杂的查询，其中包含大量 DISTINCT 和 GROUP_CONCAT，您可能会尝试在单个查询中获取太多信息。使用两个或三个查询不一定有害，通过使代码更易于阅读、维护和调试，您可能会受益很多。

[我在我的书《 SQL 反模式：避免数据库编程的陷阱](http://pragprog.com/book/bksqla/sql-antipatterns)》中标题为“意大利面条查询”的一章中写到了这个问题

# ios - 检测 View 的 WebView 是否已经加载

> ID：13632587
> 
> 赞同：0
> 
> 时间：2012-11-29T18:46:29.663
> 
> 标签：ios, xcode, uiwebview, uitabbarcontroller

我的应用程序中的一个选项卡加载了一个定期更改的网页。因此，我让 ViewController 在 vi​​ewWillAppear 中加载 webView。问题是我不希望 webView 每次都加载，只是在第一次加载时，或者 webView 不同时。所以，我有这个设置：

```
 NSURLRequest *currentRequest = [worship request];
NSURL *currentURL2 = [currentRequest URL];
if (currentURL.absoluteString == nil) {
//loads the page
}
else {
//page is already loaded, do nothing more
} 
```

问题在于，由于它会检查 url，因此需要几秒钟才能从一个选项卡转到另一个选项卡。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:54:02.763

我不知道这是否是最好的解决方案，但您可以检查 webView 请求的 url 是否不为零并且等于您之前在 viewDidLoad 中“选择”的 url

```
NSString *currentURL = myWebView.request.URL.absoluteString;
if([currentURL isEqualToString:myURL]) {
...//put boolean
} 
```

如果字符串等于，则将其放入布尔值中。然后在 viewWillAppear 中检查布尔值...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T18:54:15.573

将类似 webViewLoaded 的布尔属性设置为 YES。并将其保留在 init 方法中。

检查它的值并加载 webview 并相应地修改值。

# ruby-on-rails - 我可以在仅在更新时触发的观察者中进行 after_commit 回调吗？

> ID：13632591
> 
> 赞同：0
> 
> 时间：2012-11-29T18:46:50.053
> 
> 标签：ruby-on-rails, ruby, activerecord

ActiveRecord 有[很多回调](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)，包括一个 after_commit 回调，这很好，但对于[观察者](http://api.rubyonrails.org/classes/ActiveRecord/Observer.html)来说，似乎没有办法让它只在更新时有效，而不是在创建时有效，反之亦然。

有没有办法获得这种行为？就像是...

```
def after_commit
  return unless self.was_just_updated
  # .....
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:57:34.503

答案...

```
def after_commit
  return if created_at == updated_at
  # .....
end 
```

# php - YouTube 是否会在视频发布时通知 URL？

> ID：13632596
> 
> 赞同：1
> 
> 时间：2012-11-29T18:47:05.793
> 
> 标签：php, youtube, youtube-api

我目前正在建立一个网站，我想要的功能之一是让使用 YouTube 的用户能够将他们的视频自动添加到他们的提要中，而无需他们做任何事情。

我知道您可以使用 YouTube 的 Data API 来获取特定用户的视频，但我不想继续依赖它来检查用户是否上传了新视频，因为这会成为一种负担，尤其是在越来越多用户注册，因为我必须每 10 分钟左右检查一次每个帐户，这加起来。

因此，**我想知道 YouTube 在他们的 API 中是否有一个功能，当用户将视频发布到 YouTube 时，YouTube 可以通知我网站上的特定 URL。**我已经看到网站使用 YouTube 来验证某些权限，但我不确定这是否是一个，或者要专门搜索什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:35:29.357

实际上，YouTube 数据 API v2*应该*支持 PubSubHubbub 通知，这基本上就是您所描述的： http: [//apiblog.youtube.com/2010/10/pubsubhubbub-for-youtube-activities.html](http://apiblog.youtube.com/2010/10/pubsubhubbub-for-youtube-activities.html)

这*应该*是指 YouTube API 中的 PubSubHubbub 的历史有些曲折，正如您从阅读添加到该博客文章中的**更新中可以看出的那样。**我今天实际上只是在与工程团队调试一些 PubSubHubbub 问题，虽然现在似乎没有推出更新，但下周初上线的更改应该有望解决这个问题。

另一种方法是使用[简单更新协议](https://developers.google.com/youtube/2.0/developers_guide_protocol_sup)，但这需要一定程度的轮询。

YouTube API 工程团队意识到需要提供一种稳定、可靠的订阅方式来订阅 API 的新 v3 中的更新，但我们还没有任何消息要宣布。

# mvvm - 淘汰赛：从 JavaScript 代码更改的 valueUpdate

> ID：13632599
> 
> 赞同：2
> 
> 时间：2012-11-29T18:47:20.397
> 
> 标签：mvvm, knockout.js

嗨，我知道 valueUpdate：afterkeydown 将在用户输入后进行模型更新，但我想知道如何在其他一些 javascript 代码更改值后自动进行 valueUpdate

我有一个 js 代码执行 document.getElementById("input").value = "new value";

我必须手动更新模型还是应该使用什么 valueUpdate。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T19:38:48.627

如果您触发元素的`change`事件，则元素的绑定 ( `value`) 将获取更改并正常处理它。

但是，通常您希望通过视图模型进行更新并让绑定处理设置元素的属性，但是如果您有 3rd 方或现有代码直接与无法更改的元素交互，那么触发`change`事件是解决方案。

Knockout 确实包含一个实用程序来触发一个名为`ko.utils.triggerEvent`.

您的代码可能如下所示：

```
 var elem = document.getElementById("input");
   elem.value = "new value";
   ko.utils.triggerEvent(elem, "change"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:07:14.847

在更新输入值的行之后，调用 observable.valueHasMutated() 对与您正在更改的输入相对应的任何可观察对象。

# c++ - CXXTEST 编译器是否有#define _KEYWORD_ 来排除代码块？

> ID：13632601
> 
> 赞同：0
> 
> 时间：2012-11-29T18:47:34.060
> 
> 标签：c++, unit-testing, cxxtest

我需要`main()`在我的对象中临时放置一个函数来测试替代功能（除了简单的单元测试），但我一直不得不注释掉我的`main()`函数来运行我的单元测试。

是否有`#define _KEYWORD_`CxxTest 允许这种情况自动发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:47:34.060

您只需要根据`CXXTEST_RUNNING`关键字的定义使用编译器指令封装有问题的代码。

例如：

```
class myClass {
  public:
    myClass () {}
};

#ifndef CXXTEST_RUNNING
int main (int argc, char *argv[]) {
  // Temporary runner. Typically deleted upon completion
  // of alternate functionality added later in the project.
}
#endif 
```

在这种情况下，当使用 CxxTest 框架时，该`main()`函数将被忽略，有利于`main()`由测试框架创建。否则，`main()`将使用您提供的功能。

# linux - 生成具有相同结构的多个文件

> ID：13632604
> 
> 赞同：4
> 
> 时间：2012-11-29T18:47:39.577
> 
> 标签：linux, bash

我想生成一系列文件，其中每个文件的文件名应增加 1 ( `File1.txt`, `File2.txt`, `File3.txt`, ... `FileN.txt`) 其中`N = 250`

每个文件有 2 行。

1.  `AAAXXX`（在哪里`XXX = 001`-`250`每个文件自动增加）
2.  `BBBYYY`（其中`YYY = 3`数字随机数）

例子：

1.  文件 1.txt：

    ```
    AAA001
    BBB175 
    ```

2.  文件5.txt：

    ```
    AAA005
    BBB067 
    ```

3.  文件 102.txt：

    ```
    AAA102
    BBB765 
    ```

我是使用 Ubuntu Linux 12.04 的新手——但我希望有人能提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:08:38.583

你可以这样做：

```
#!/bin/bash

for i in {1..250}
do
    printf "AAA%03d\nBBB%03d" ${i} $(($RANDOM % 1000)) > File${i}.txt
done 
```

**解释：**

*   `for i in {1..250}`- 指定从 1 到 250 的迭代的 bash 方式，增量大小为 1。
*   `printf`- shell [printf](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/printf.html)命令 - 用于打印格式化字符串
*   `AAA`- 字符串文字（意思是“完全按照书面形式”）
*   `%03d`- 格式化的字符串，这将打印一个前面用 3 个零填充的十进制数。
*   `\n`- 新队
*   `BBB`- 另一个字符串文字
*   `%03d`- 和之前一样
*   `${i}`- 这是第一个格式化字符串 ( `%03d`)中使用的值
*   `$(($RANDOM % 1000))`-`$RANDOM`是一个系统变量，每次访问它时都会为您提供一个随机数。取`% 1000`模，所以你得到一个范围 betwee `0-999`。这用于第二个格式化字符串 ( `%03d`)
*   `> File${i}.txt`：输出重定向；创建并保存到文件（如果文件已经存在，则覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T18:58:28.270

这是一个快速的单线，可能会让你开始：

```
for i in {1..250}; do printf "AAA%03d\nBBB%03d" $i $(($RANDOM % 1000)) > "File${i}.txt"; done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T19:01:27.207

使用 bash：

```
for i in {1..250}; do printf "AAA%03d\nBBB%03d\n" "$i" "$((RANDOM%1000))" > "File$i.txt"; done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T18:59:10.740

您可以为此编写一个 bash 脚本

```
#!/bin/bash      
for (( i=1; i<=250; i++ ))
do
    NUMBER=$[ ( $RANDOM % 999 )  + 100 ]
    echo "AAA$i BBB$NUMBER" > File$i.txt
done 
```

# python - 正则表达式非 ASCII 字符

> ID：13632608
> 
> 赞同：2
> 
> 时间：2012-11-29T18:48:05.643
> 
> 标签：python, regex

我在python中的正则表达式有点麻烦。html字符串是：

> ```
> html = <td style="padding-right:5px;">
> <span class="blackText">Above £ 7.00 = </span>
> </td>
> <td>
> <span class="blackText">
> <p>Free</p>
> </span>
> </td> 
> ```

我想提取“7.00”和“免费”，但是以下不起作用：

> 金额 = re.findall(r'Above £ (.*?) =',html)

Python 会为 £ 符号抛出一个非 ASCII 错误。我将如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T18:50:14.260

```
amount = re.findall(r'Above \xC2 (.*?) =', html) 
```

# javascript - 无法让 document.getElementByID 工作

> ID：13632610
> 
> 赞同：0
> 
> 时间：2012-11-29T18:48:18.740
> 
> 标签：javascript, asp.net

以下功能由于某种原因不起作用。有人能看出问题所在吗？

```
function checkMaxLen(txt, maxLen) {
    var actualLen = txt.value.length;
    var remain = maxLen - actualLen;
    document.getElementById('remainChar').Value = remain;
} 
```

* * *

```
<input type="text" id="remainChar" runat="server" value="500"/> 
```

每当我尝试运行该函数时，都会收到此错误：

> Microsoft JScript 运行时错误：无法设置属性“值”的值：对象为空或未定义

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:51:19.937

检查最终 HTML 中输入的 ID。由于您拥有`runat="server"`ASP.NET，因此可能会添加其典型的容器前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T18:54:44.987

**主要问题：**不存在 Javascript getElementById 问题，而是将正确的 id 输入 getElementById 的问题（因为 ASP.NET 可以随意更改 runat="server" 元素的 id）（已被接受的答案涵盖）。这就是导致 OP 报告错误的原因：

```
Microsoft JScript runtime error: Unable to set value of the property 'Value': object is null or undefined 
```

这是因为 getElementById 被赋予了一个不存在的 id 并返回 null。

**另一个问题：**第二个问题确实是 Javascript 问题，但也与 getElementById 无关。Javascript 区分大小写，因此尝试设置输入元素的 DOM 对象的 value 属性不能通过尝试设置但即使（不存在的）Value 属性来完成。

**解决方案：**

解决这两个问题的正确代码如下：

```
 function checkMaxLen(txt, maxLen) {
    var actualLen = txt.value.length;
    var remain = maxLen - actualLen;
    document.getElementById('<%= remainChar.ClientId%>').value = remain 
  } 
```

注意：感谢 Ian 在我的原始答案中指出了一个重要的疏忽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T18:51:15.167

区分大小写：

```
document.getElementById('remainChar').value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T18:55:32.460

.Value 应该是 .value，脚本应该在出现在源代码中或触发 DOMReady 事件之后执行。

也因为这是 asp.net，所以盒子的 id 属性不会是“remainChar”，而是转换成别的东西。

所以你要么需要找出最终的 id 是什么，要么删除`runat="server"`属性

```
<html>
<body>
<input type="text" id="remainChar" value="500"/>
<script>
    function checkMaxLen(txt, maxLen) {
        var actualLen = txt.value.length;
        var remain = maxLen - actualLen;
        document.getElementById('remainChar').value = remain;
    }
    checkMaxLen({value:""},20);
</script>
</body>
</html> 
```

# wpf - .NET 4.0 中的异步代码

> ID：13632614
> 
> 赞同：1
> 
> 时间：2012-11-29T18:48:23.850
> 
> 标签：wpf, .net-4.0

我在 WPF 应用程序中运行以下代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        this.Loaded += new RoutedEventHandler(MainWindow_Loaded);
    }

    void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
        object obj = new object();
        Collection.Add(obj);
        Collection.CollectionChanged += new NotifyCollectionChangedEventHandler(delegate(object sender2, NotifyCollectionChangedEventArgs e2)
        {
            if (Collection.Count == 0)
                App.Current.MainWindow.Close();
        });

        Task.Factory.StartNew(() =>
            {
                //Do long running process
                Collection.Remove(obj); //this errors out
            });
    }

    private ObservableCollection<object> Collection = new ObservableCollection<object>();
} 
```

我收到错误`System.InvalidOperationException`：调用线程无法访问此对象，因为不同的线程拥有它。

我的印象是`Task.Factory.StartNew`排队了一个异步任务，所以线程应该是一样的，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:58:26.930

Task.Factory.StartNew 在默认的 TaskScheduler 中执行您的操作，因此它将在 ThreadPool 中运行。

ObservableCollection 不是线程安全的。这意味着对 UI 控件（ App.Current.MainWindow.Close() ）执行操作的 CollectionChanged 处理程序不会在 UI 线程中执行，因为集合修改正在您的任务操作中完成，从而导致您出现错误正在看。

如果您只需要在处理程序中与 UI 交互，则可以使用调度程序：

```
Collection.CollectionChanged += new NotifyCollectionChangedEventHandler(delegate(object sender2, NotifyCollectionChangedEventArgs e2)
        {
            if (Collection.Count == 0)
                this.Dispatcher.BeginInvoke((Action)(()=> App.Current.MainWindow.Close()));
        }); 
```

如果您需要绑定到它，请考虑使用线程安全的实现。看到[这个。](https://stackoverflow.com/questions/2293246/observablecollection-and-threading)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:21:24.303

只是为了添加 Arthur 的答案，在我的真实应用程序（不是上面的示例代码）中，我需要从 MvvmLight 视图模型中执行此操作。要从 ViewModel 访问调度程序：

在 App 内部，添加以下内容：

```
static App()
{
    DispatcherHelper.Initialize();
} 
```

然后不是调用`this.Dispatcher`，因为 ViewModel 没有对 Dispatcher 的引用，所以以下将起作用：

```
DispatcherHelper.UIDispatcher.BeginInvoke((Action)(() => App.Current.MainWindow.Close())); 
```

# c# - FileUpload 到 Amazon S3 生成 0 字节文件

> ID：13632625
> 
> 赞同：3
> 
> 时间：2012-11-29T18:49:20.337
> 
> 标签：c#, file-upload, amazon-s3

我正在尝试修复以下代码导致 S3 上的 0 字节文件且没有错误消息的错误。

此代码以 Stream（来自名称不佳的 FileUpload4）的形式提供，其中包含图像和所需的图像路径（来自数据库包装器对象）到 Amazon 的 S3，但文件本身从未上传。

```
CloudUtils.UploadAssetToCloud(FileUpload4.FileContent, ((ImageContent)auxSRC.Content).PhysicalLocationUrl);
ContentWrapper.SaveOrUpdateAuxiliarySalesRoleContent(auxSRC); 
```

第二行只是保存数据库对象，该对象存储有关（假定）上传的图片的信息。此保存正在进行，表明上述行运行没有错误。

在检索到适当的存储桶名称后，上面的第一行调用此方法：

```
public static bool UploadAssetToCloud(Stream asset, string path, string bucketName, AssetSecurity security = AssetSecurity.PublicRead)
{
    TransferUtility txferUtil;
    S3CannedACL ACL = GetS3ACL(security);

    using (txferUtil = new Amazon.S3.Transfer.TransferUtility(AWSKEY, AWSSECRETKEY))
    {
        TransferUtilityUploadRequest request = new TransferUtilityUploadRequest()
            .WithBucketName(bucketName)
            .WithTimeout(TWO_MINUTES)
            .WithCannedACL(ACL)
            .WithKey(path);
        request.InputStream = asset;
        txferUtil.Upload(request);
    }

    return true;
} 
```

我已经确保流是一个好的流 - 我可以将它保存在我有权限的任何其他地方，存储桶存在并且路径很好（文件是在 S3 上的目的地创建的，它只是没有填充流的内容）。我已经接近我的智慧了，在这里 - 我错过了什么？

**编辑：**我的一位同事指出，FileUpload 的 PostedFile 属性会更好。相反，我现在正在从中拉出流。它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T19:06:47.647

流的位置是否正确？检查asset.Position 以确保将位置设置为流的开头。

```
asset.Seek(0, SeekOrigin.Begin); 
```

**编辑**

好的，更多的猜测（不过我只能猜测）：（所有这些都假设你仍然可以“手动”从传入的流中读取）

1.  只是为了测试，在 TransferUtility 上尝试一种更简单的 Upload 方法——也许一种只需要一个文件路径字符串的方法。如果可行，那么可能需要在 UploadRequest 对象上设置其他属性。

2.  如果您将 UploadProgressEvent 挂接到 UploadRequest 对象上，您是否会得到任何其他线索来说明发生了什么问题？

3.  我注意到 UploadRequest 的 api 包括 InputStream 属性和 WithInputStream fluent API。也许设置 InputStream 有一个错误？也许尝试使用 .WithInputStream API

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T06:35:19.927

您正在使用哪个流？您正在使用的流是否支持 mark() 和 reset() 方法。

可能是上传方法首先计算给定流的MD5然后上传，所以如果你的流不支持这两种方法，那么在计算MD5时它会到达eof，然后无法为流上传预置位目的。

# c# - SignedXml.CheckSignature 在 .NET 4 中失败，但在 .NET 3.5、3 或 2 中有效

> ID：13632630
> 
> 赞同：34
> 
> 时间：2012-11-29T18:49:41.357
> 
> 标签：c#, security, certificate, signature, signedxml

我收到了来自第 3 方网络服务的响应。我用该响应加载了一个 XmlDocument。

```
 string txt = readStream.ReadToEnd();
  response = new XmlDocument();
  response.PreserveWhitespace = true;
  response.LoadXml(txt);   
  return response; 
```

现在我想验证响应是否使用证书签名。我有一个`VerifyXmlDoc(XmlDocument xmlDoc)`我在[msdn](http://msdn.microsoft.com/)上找到的方法。

我知道消息是正确的。

```
 public bool VerifyXmlDoc(XmlDocument xmlDoc)
    {

        SignedXml signed = new SignedXml(xmlDoc);

        XmlNodeList signatureNodeList = xmlDoc.GetElementsByTagName("Signature");

        signed.LoadXml((XmlElement)signatureNodeList[0]);

        X509Certificate2 serviceCertificate = null;
        foreach (KeyInfoClause clause in signed.KeyInfo)
        {
            if (clause is KeyInfoX509Data)
            {
                if (((KeyInfoX509Data)clause).Certificates.Count > 0)
                {
                    serviceCertificate = (X509Certificate2)((KeyInfoX509Data)clause).Certificates[0];
                }
            }
        }

        bool result = signed.CheckSignature(serviceCertificate, true);
        return result;

    } 
```

如果我将项目的目标框架设置为 .NET 3.5 或 .NET 3 或 .NET 2，效果会很好。结果是真的。但是如果我将目标框架更改为 .NET 4 结果是错误的。（而且我必须使用 .NET 4）

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-02T19:08:33.267

这是一个已知的问题。.NET 3.5 和 .NET 4.0 之间的规范化实现已经改变。

我不知道这是否适用于所有 XML 签名，但以下工作来自我所做的测试。

将以下 C14N 转换类添加到您的项目中：

```
public class MyXmlDsigC14NTransform: XmlDsigC14NTransform {
  static XmlDocument _document;
  public static XmlDocument document {
    set {
      _document = value;
    }
  }

  public MyXmlDsigC14NTransform() {}

  public override Object GetOutput() {
    return base.GetOutput();
  }

  public override void LoadInnerXml(XmlNodeList nodeList) {
    base.LoadInnerXml(nodeList);
  }

  protected override XmlNodeList GetInnerXml() {
    XmlNodeList nodeList = base.GetInnerXml();
    return nodeList;
  }

  public XmlElement GetXml() {
    return base.GetXml();
  }

  public override void LoadInput(Object obj) {
    int n;
    bool fDefaultNS = true;

    XmlElement element = ((XmlDocument) obj).DocumentElement;

    if (element.Name.Contains("SignedInfo")) {
      XmlNodeList DigestValue = element.GetElementsByTagName("DigestValue", element.NamespaceURI);
      string strHash = DigestValue[0].InnerText;
      XmlNodeList nodeList = _document.GetElementsByTagName(element.Name);

      for (n = 0; n < nodeList.Count; n++) {
        XmlNodeList DigestValue2 = ((XmlElement) nodeList[n]).GetElementsByTagName("DigestValue", ((XmlElement) nodeList[n]).NamespaceURI);
        string strHash2 = DigestValue2[0].InnerText;
        if (strHash == strHash2) break;
      }

      XmlNode node = nodeList[n];

      while (node.ParentNode != null) {
        XmlAttributeCollection attrColl = node.ParentNode.Attributes;
        if (attrColl != null) {
          for (n = 0; n < attrColl.Count; n++) {
            XmlAttribute attr = attrColl[n];
            if (attr.Prefix == "xmlns") {
              element.SetAttribute(attr.Name, attr.Value);
            } else if (attr.Name == "xmlns") {
              if (fDefaultNS) {
                element.SetAttribute(attr.Name, attr.Value);
                fDefaultNS = false;
              }
            }
          }
        }

        node = node.ParentNode;
      }
    }

    base.LoadInput(obj);
  }
}
```

使用 CryptoConfig.AddAlgorithm 方法注册该类。

```
CryptoConfig.AddAlgorithm(typeof(MyXmlDsigC14NTransform), "http://www.w3.org/TR/2001/REC-xml-c14n-20010315"); 

var message = new XmlDocument();
message.PreserveWhitespace = true;
message.Load("XmlSig.xml");

MyXmlDsigC14NTransform.document = message; // The transform class needs the xml document

// Validate signature as normal. 
```

那应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T05:13:42.090

尝试为 SignedXml 类的 SignedInfo 属性显式设置规范化方法。.Net 2.0 和 .Net 4.0 之间的默认行为似乎发生了变化

```
signed.SignedInfo.CanonicalizationMethod = Signed.XmlDsigExcC14NTransformUrl; 
```

参考：

[这个答案](https://stackoverflow.com/a/19175738/107177)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-02T16:45:49.270

我有同样的问题，但这些答案都没有帮助我。在这种情况下，它是否有效取决于我使用的操作系统，而不是 .Net 版本。

我通过在 app.config 中添加此代码来启用 SignedXML 日志，以查看背后发生了什么：

```
<system.diagnostics>
        <sources>
            <source name="System.Security.Cryptography.Xml.SignedXml" switchName="XmlDsigLogSwitch">
                <listeners>
                    <add name="logFile" />
                </listeners>
            </source>
        </sources>
        <switches>
            <add name="XmlDsigLogSwitch" value="Verbose" />
        </switches>
        <sharedListeners>
            <add name="logFile" type="System.Diagnostics.TextWriterTraceListener" initializeData="XmlDsigLog.txt"/>
        </sharedListeners>
        <trace autoflush="true">
            <listeners>
                <add name="logFile" />
            </listeners>
        </trace>
    </system.diagnostics> 
```

它写了这一行：

```
System.Security.Cryptography.Xml.SignedXml Information: 17 : [SignedXml#033ec00f, UnsafeTransformMethod] Canonicalization method "http://www.w3.org/TR/1999/REC-xpath-19991116" is not on the safe list. Safe canonicalization methods are: "http://www.w3.org/TR/2001/REC-xml-c14n-20010315", "http://www.w3.org/TR/2001/REC-xml-c14n-20010315#WithComments", "http://www.w3.org/2001/10/xml-exc-c14n#", "http://www.w3.org/2001/10/xml-exc-c14n#WithComments", "http://www.w3.org/2000/09/xmldsig#enveloped-signature", "http://www.w3.org/2000/09/xmldsig#base64", "urn:mpeg:mpeg21:2003:01-REL-R-NS:licenseTransform", "http://www.w3.org/2002/07/decrypt#XML". 
```

我发现这篇 Microsoft 支持文章试图修复安全更新 3141780 引入的错误：https: [//support.microsoft.com/en-us/kb/3148821](https://support.microsoft.com/en-us/kb/3148821)

在那篇文章中，在场景 2 部分，有 2 个解决方案，我修复了应用与 XPath 转换方法相关的注册表项的问题：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft.NETFramework\Security\SafeTransformMethods@XmlDsigXPathTransform= [http://www.w3 .org/TR/1999/REC-xpath-19991116](http://www.w3.org/TR/1999/REC-xpath-19991116)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-21T17:28:43.313

从 .NET 框架 4/4.5 开始，使用 x509 证书和其他安全功能的类位于 System.IdentityModel.dll 中。在提到的命名空间中搜索相应的类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-11T16:41:25.667

我解决了这个问题，将相同的命名空间从 Signature 标记添加到 SignedInfo。像这样：

前： ![在此处输入图像描述](../Images/193acf06d50c2f9a82ca33dc618e4924.png)

后： ![在此处输入图像描述](../Images/cf44900a42ba25aa86570081a50e8f7e.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-26T07:28:00.850

```
// Assume the data to sign is in the data.xml file, load it, and

// set up the signature object.
XmlDocument doc = new XmlDocument();

doc.Load(@"D:\Example.xml");
SignedXml sig = new SignedXml(doc);

// Make a random RSA key, and set it on the signature for signing.
RSA key = new RSACryptoServiceProvider();

sig.SigningKey = key;

// Create a Reference to the containing document, add the enveloped
// transform, and then add the Reference to the signature
Reference refr = new Reference("");refr.AddTransform(new XmlDsigEnvelopedSignatureTransform());

sig.AddReference(refr);

// Compute the signature, add it to the XML document, and save
sig.ComputeSignature();

doc.DocumentElement.AppendChild(sig.GetXml());
doc.Save("data-signed.xml");

// Load the signed data

//XmlDocument doc = new XmlDocument();
doc.PreserveWhitespace = true;

doc.Load("data-signed.xml");

// Find the Signature element in the document
XmlNamespaceManager nsm = new XmlNamespaceManager(new NameTable());

nsm.AddNamespace("dsig", SignedXml.XmlDsigNamespaceUrl);
XmlElement sigElt = (XmlElement)doc.SelectSingleNode("//dsig:Signature", nsm);

// Load the signature for verification

//SignedXml sig = new SignedXml(doc);

sig.LoadXml(sigElt);

// Verify the signature, assume the public key part of the

// signing key is in the key variable
if (sig.CheckSignature(key))
    Console.WriteLine("Signature verified");
else
    Console.WriteLine("Signature not valid"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-12T02:11:55.710

为了检查 NET 4.0+ 上的签名，您必须更改 CanonicalizationMethod 的上下文，因此您必须按以下方式初始化您的 signedXml 对象：

```
XmlNodeList signatureNodeList = xmlDoc.GetElementsByTagName("Signature");

SignedXml signedXml = new SignedXml((XmlElement)signatureNodeList[0]);

signedXml.LoadXml((XmlElement)signatureNodeList[0]);

//Then you proceed your check as usual 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-05-10T09:39:12.740

```
public static Boolean VerifyDetachedSignature(string XmlSigFileName)
{   
    // Create a new XML document.
    XmlDocument xmlDocument = new XmlDocument();

    // Load the passed XML file into the document.
    xmlDocument.Load(XmlSigFileName);

    // Find the "Signature" node and create a new XmlNodeList object.
    XmlNodeList nodeList = xmlDocument.GetElementsByTagName("Signature");

    // Create a new SignedXMl object.
    SignedXml signedXml = new SignedXml();

    // Load the signature node.
    signedXml.LoadXml((XmlElement)nodeList[0]);

    // Check the signature and return the result. 
    return signedXml.CheckSignature();
} 
```

# java - 使用 ExecutorService ，而不是做 Thread.start

> ID：13632635
> 
> 赞同：4
> 
> 时间：2012-11-29T18:50:05.543
> 
> 标签：java, multithreading, executorservice

我正在处理现有代码，我在其中一个类中找到了这段代码。代码是使用`ExecutorService`，而不是做`MyThread.start`。

请告诉我为什么要使用`ExecutorService`而不是`Thread.start`.

```
protected static ExecutorService executor = Executors.newFixedThreadPool(25);

while (!reader.isEOF()) {
    String line = reader.readLine();
    lineCount++;
    if ((lineCount > 1) && (line != null)) {
        MyThread t = new MyThread(line, lineCount);
        executor.execute(t);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T19:31:51.547

我想`MyThread`扩展`Thread`和`Thread`实现`Runnable`. 您在该代码中所做的是将 Runnable 提交给执行程序，执行程序将在其 25 个线程之一中执行它。

这与直接启动线程之间的主要区别在于`myThread.start()`，如果您有 10k 行，这可能会同时启动 10k 个线程，这可能会很快耗尽您的资源。

使用定义的执行器，任何时候都不会超过 25 个线程运行，因此如果在所有 25 个线程都已使用的情况下提交任务，它将等待直到其中一个线程再次可用并在该线程中运行.

# parsing - 如何在没有 S/R 冲突的情况下使用 0 或 1+ 个令牌编写 Bison 规则？

> ID：13632636
> 
> 赞同：0
> 
> 时间：2012-11-29T18:50:05.773
> 
> 标签：parsing, compiler-construction, bison, yacc, lex

*如果我定义了像普通对象访问*这样的令牌：

```
[$_a-zA-Z]+[.] { return ACCESS; }
[$_a-zA-Z]+    { return ID; }
[+]            { return PLUIS;  } 
```

还有 Bison 语法规则：

```
Accesses
    : Accesses ACCESS    { /*do something...*/ }
    | ACCESS             { /*do something...*/ }

Expression    
    : Accesses ID PLUS Accesses ID    { /*do something...*/ } 
```

我想在源代码中允许这样的内容：

```
moduleA.valueB.valueC + valueD 
```

在示例中，如果我不将空规则放入`Accesses`，则单个`ID`变量 like`valueD`是非法的。但是如果我把空规则放进去，`Accesses`会导致严重的S/R冲突，匹配的文本会变得奇怪。

而且，我认为复制规则`Expression`不是一个好主意，例如：

```
Expression    
    : Accesses ID PLUS Accesses ID   { /*do something...*/ }
    | ID PLUS Accesses ID            { /*do something...*/ }
    | Accesses ID PLUS ID            { /*do something...*/ }
    | ID PLUS ID                     { /*do something...*/ } 
```

我能找到其他方法来解决这个问题吗？

**编辑**：好的，感谢您的回答注意到我这个简单的语法没有冲突。至少你让我知道真正的问题可能隐藏在其他地方（对于编译器新手来说真是一团糟！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:44:39.597

你可以这样做： lex:

```
[$_a-zA-Z]+ {return WORD;}
"."         {return DOT;}
"+"         {return PLUS;} 
```

野牛：

```
Expression   : Value PLUS Value;
Value        : WORD|WORD AccessList;
AccessElement: DOT WORD;
AccessList   : AccessElement|AccessList AccessElement; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T00:07:25.813

在您的示例中仅使用 epsilon 产品没有任何问题：

```
Expression    
    : Accesses ID PLUS Accesses ID    { /*do something...*/ }
;

Accesses
    : Accesses ACCESS    { /*do something...*/ }
    |                    { /*do something...*/ }
; 
```

没有冲突....

# scala - 在 Scala 2.10 中，如何将两个通用列表中的每个元素添加在一起

> ID：13632637
> 
> 赞同：3
> 
> 时间：2012-11-29T18:50:06.943
> 
> 标签：scala

我正在尝试将一些 Java 数学类重写为 Scala，但遇到了一个奇怪的问题。

```
class Polynomials[@specialized T](val coefficients:List[T]) {
  def +(operand:Polynomials[T]):Polynomials[T] = {
    return new Polynomials[T](coefficients = 
      (operand.coefficients, this.coefficients).zipped.map(_ + _))
  }
} 
```

我的问题可能类似于这个问题：[如何使一个类对所有数字类型都通用？](https://stackoverflow.com/questions/4753629/how-do-i-make-a-class-generic-for-all-numeric-types)，但是当我删除时，`@specialized`我得到了同样的错误。

`type mismatch; found : T required: String`

map 函数中的第二个下划线突出显示了错误，但我认为这不是问题所在。

我想要做的是：

`Polynomial(1, 2, 3) + Polynomial(2, 3, 4)`返回`Polynomial(3, 5, 7)`

并`Polynomial(1, 2, 3, 5) + Polynomial(2, 3, 4)`返回`Polynomial(3, 5, 7, 5)`

对于第二个，我可能必须用零元素填充较短的列表才能使其正常工作，但这是我对这个函数的目标。

那么，我怎样才能让这个函数编译，以便我可以测试它呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T19:11:52.147

`List`不是专门的，因此使该类专门化没有多大意义。只有`Array`专业。

```
class Poly[T](val coef: List[T]) {
  def +(op: Poly[T])(implicit adder: (T,T) => T) = 
    new Poly(Poly.combine(coef, op.coef, adder))
}
object Poly {
  def combine[A](a: List[A], b: List[A], f: (A,A) => A, part: List[A] = Nil): List[A] = {
    a match {
      case Nil => if (b.isEmpty) part.reverse else combine(b,a,f,part)
      case x :: xs => b match {
        case Nil => part.reverse ::: a
        case y :: ys => combine(xs, ys, f, f(x,y) :: part)
      }
    }
  }
} 
```

现在我们可以

```
implicit val stringAdd = (s: String, t: String) => (s+t)

scala> val p = new Poly(List("red","blue"))
p: Poly[String] = Poly@555214b9

scala>     val q = new Poly(List("fish","cat","dog"))
q: Poly[String] = Poly@20f5498f

scala>     val r = p+q; r.coef
r: Poly[String] = Poly@180f471e
res0: List[String] = List(redfish, bluecat, dog) 
```

您还可以要求该类提供加法器而不是 + 方法，或者您可以将 Function2 子类化，这样您就不会使用隐式加法函数污染事物。

# python - 在 python 生成器理解中使用状态？

> ID：13632642
> 
> 赞同：1
> 
> 时间：2012-11-29T18:50:30.660
> 
> 标签：python, generator

有没有办法把这个生成器函数转换成一个相对简单的生成器理解？（以下对我有用，我只是想了解可能的选项是什么）

```
def annotate(x):
   n = 0
   for item in x:
     yield(item,n)
     n = n + 1 
```

使用示例：

```
>>> for line in annotate([3,4,5]):
...   print line
...
(3, 0)
(4, 1)
(5, 2) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T18:52:53.763

您可以使用`enumerate`：

```
comp = ((y,x) for x,y in enumerate(iterable)) 
```

示范：

```
>>> annotated = ((y,x) for x,y in enumerate(range(1,4)))
>>> for line in annotated: print line
... 
(1, 0)
(2, 1)
(3, 2) 
```

虽然，通常你只会`enumerate`以相反的顺序使用和解包。:^)

# php - 在磁盘上上传图像并使用 php 在 mysql DB 上保存图像名称

> ID：13632643
> 
> 赞同：3
> 
> 时间：2012-11-29T18:50:31.160
> 
> 标签：php, mysql, image, upload

我有一个`MySQL`数据库，有 2 个表格、相册和照片：

相册有 id 和名称，照片有 id、album_id、photo_name。

我有以下脚本：

```
<?php

$albumsQuery = $mysqli->query( "SELECT `album_id`, `album_name` FROM `albums` ORDER BY `album_name` ASC" );

if( isset( $_FILES["albumPhoto"] )  )
{
    move_uploaded_file( $_FILES["albumPhoto"]["tmp_name"], "photos/" .$_FILES["albumPhoto"]["name"] );
}

if( isset( $_POST["album_name"] ) )
{
    $uploadQuery = $mysqli->query( "INSERT INTO `photos` ( `photo_id`, `photos`.`photo_id_album`, `photos`.`photo_name` )
    VALUES ( NULL,'" . $mysqli->real_escape_string( $_POST["album_name"] ) . "','" . $mysqli->real_escape_string( $_FILES["albumPhoto"]["name"] ) . "' )" )
    or die( $mysqli->error );

    $upload = $uploadQuery->fetch_array( MYSQLI_ASSOC );
}
?> 
```

图像已上传到磁盘上，但我无法在数据库中获取图像名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:31:05.493

当你回答你自己的问题时，我写了一些代码，所以无论如何我都会发布它：

```
$albumsQuery = $mysqli->query('SELECT album_id, album_name FROM albums ORDER BY album_name');

// assume image not uploaded
$imagePath = null;

// if a photo is being uploaded
if (isset($_FILES["albumPhoto"])) {
    $source = $_FILES["albumPhoto"]["tmp_name"];
    $target = sprintf('photos/', $_FILES["albumPhoto"]["name"]);

    // try to move the file
    $move = move_uploaded_file($source, $target);
    if ($move !== true) {
        throw new Exception('Could not move the uploaded file: ' . $_FILES["albumPhoto"]["name"]);
    }
}

// attach the image to the specified album
if (isset($_POST["album_name"])) {
    $stmt = 'INSERT INTO photos (photo_id_album, photo_name)
             VALUES (?, ?)';
    $stmt->bind_param('ss', $albumName, $photoName);

    // values of bound variables
    $albumName = $_POST["album_name"];
    $photoName = $_FILES["albumPhoto"]["name"];

    // insert the record
    $stmt->execute();
    $stmt->close();
} 
```

此外，使用原始文件名也不是一个好主意，因为用户可能希望随着时间的推移将多个同名文件上传到同一个相册中。考虑使用散列或在文件名前添加专辑 ID。

并添加更多错误检查！

# listview - 将复选框与 jquery mobile listview 结合使用

> ID：13632645
> 
> 赞同：2
> 
> 时间：2012-11-29T18:50:51.223
> 
> 标签：listview, jquery-mobile, checkbox

我想在我的列表视图单元格中使用 jqm 样式的复选框。我制作了一张合成图片以显示所需的最终结果：

[http://tinyurl.com/ctvko27](http://tinyurl.com/ctvko27)

每当我使用带有标签的 jqm 复选框时，它都会从框架中获得很大的样式，这是我不想要的。我不想使用 fieldset 功能，因为这些总是插入的，我需要列表为 100% 宽度。我希望能够单独使用完全样式化的复选框作为我的列表视图单元格的一部分。我希望我的问题很清楚，并且有人可以提供一些指导。

问候，伊沃

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T21:07:18.947

# 解决方案

这是给你的解决方案，我有空闲时间，所以这里是：http: [//jsfiddle.net/Gajotres/ek2QT/](http://jsfiddle.net/Gajotres/ek2QT/)

Javascript代码：

首先在 pagebeforeshow 上选择/取消选择我们的自定义复选框。

```
$('#index').live('pagebeforeshow',function(e,data){
    $('input[type="checkbox"]').each(function(){
        ($(this).is(':checked')) ? $(this).parent().parent().addClass('checked') : $(this).parent().parent().addClass('not-checked');   
    });
}); 
```

这部分将处理复选框更改状态。

```
$('.checkBoxLeft').bind('click', function(e) {
    if($(this).find('input[type="checkbox"]').is(':checked')){
        $(this).removeClass('checked').addClass('not-checked');
        $(this).find('input[type="checkbox"]').attr('checked' , false);
    } else {
        $(this).removeClass('not-checked').addClass('checked');             
        $(this).find('input[type="checkbox"]').attr('checked' , true);
    }
}); 
```

在示例中休息 css，用于自定义状态的 img 可以在[此处](http://www.fajrunt.com/test/elements.png)找到：

# 最后的笔记

如果您想了解更多关于如何自定义 jQuery Mobile 页面和小部件的信息，请查看这篇**[文章](http://www.gajotres.net/learn-how-to-customize-jquery-mobile-application/)**。它附带了许多工作示例，包括为什么 !important 对于 jQuery Mobile 是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:28:24.600

有几种方法可能有效。`<a />`您可以尝试放置超链接标签的复选框头。您还可以禁用复选框上的自动增强功能。从根本上讲，您将遇到触摸事件和两个控件的任何重叠的问题。

```
<input type="checkbox" data-role="none" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T17:56:37.837

刚刚尝试将 Gajotre 的解决方案与最新版本的 jquery (1.9.1) + jquerymobile (1.3.2) 一起使用，但不幸的是它没有用。

你必须改变

```
$(this).find('input[type="checkbox"]').attr('checked' , false);
$(this).find('input[type="checkbox"]').attr('checked' , true); 
```

到

```
$(this).find('input[type="checkbox"]').prop('checked' , false);
$(this).find('input[type="checkbox"]').prop('checked' , true); 
```

否则，您将只能更改复选框“已选中”的值一次。

# c# - 无法加载 DLL 'System.Data.SQLite.dll'：找不到指定的模块。（HRESULT 例外：0x8007007E）对于某些客户

> ID：13632648
> 
> 赞同：2
> 
> 时间：2012-11-29T18:50:56.517
> 
> 标签：c#, sqlite, dll

我的一些客户收到此错误：

```
Unable to load DLL 'System.Data.SQLite.dll': The specified module could not be found. (Exception from HRESULT: 0x8007007E) for some customers 
```

到目前为止，我认为大约 20% 的客户因此无法打开该软件。以下是我尝试修复它的方法：

1.  将 SQLite 文件放在 .exe 文件夹中
2.  将 SQLite 文件放入 system32 文件夹
3.  将 SQLite 文件与 .exe (SmartAssembly) 合并

我真的需要修复它，因为现在至少有五分之一的客户无法使用我的软件。谢谢，斯特凡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:53:20.570

在参考属性中设置“复制到输出文件夹”并重新编译您的软件 - 它会解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-06T14:09:58.520

对于发现此问题但不知道如何解决此问题的人，问题出在已安装的 C++ 框架中。可以找到 SQLite DLL，但无法加载。愚蠢的是，它并没有向我显示那个错误，而是向我显示了这个错误。

# python - 如何按以下方式组合数组的列？

> ID：13632652
> 
> 赞同：-1
> 
> 时间：2012-11-29T18:51:05.290
> 
> 标签：python, arrays

我有一些变量

```
 a=[10,12,12,13,15,12,17,15,12,20,10]
    b=[23,25,27,28,21,24,27,25,24,29,21]
    c=[20,22,21,24,27,23,23,34,23,30,23]
    d=[15,17,17,23,24,26,29,25,25,27,12]
    e=[12,12,12,14,12,13,14,13,12,14,15]
    f=[10,08,08,07,08,07,08,09,10,06,08]
    g=[08,05,04,06,07,08,05,04,03,05,06] 
```

我现在想使用 all 的第一个元素、 all 的第二个元素等创建数组

```
 p=[10,23,20,15,12,10,08]
    q=[12,25,22,17,12,08,05]
    r=[12,27,21,17,12,08,04] 
```

等等..我该怎么做？任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:56:58.867

您正在寻找[zip](http://docs.python.org/2/library/functions.html#zip)：

```
In [25]: zip(a,b,c,d,e,f,g)
Out[25]: 
[(10, 23, 20, 15, 12, 10, 8),
 (12, 25, 22, 17, 12, 8, 5),
 (12, 27, 21, 17, 12, 8, 4),
 (13, 28, 24, 23, 14, 7, 6),
 (15, 21, 27, 24, 12, 8, 7),
 (12, 24, 23, 26, 13, 7, 8),
 (17, 27, 23, 29, 14, 8, 5),
 (15, 25, 34, 25, 13, 9, 4),
 (12, 24, 23, 25, 12, 10, 3),
 (20, 29, 30, 27, 14, 6, 5),
 (10, 21, 23, 12, 15, 8, 6)] 
```

或者，`p`定义`q`和`r`：

```
In [27]: zipped = zip(a,b,c,d,e,f,g)

In [28]: p,q,r = zipped[0:3]

In [29]: p
Out[29]: (10, 23, 20, 15, 12, 10, 8)

In [30]: q
Out[30]: (12, 25, 22, 17, 12, 8, 5)

In [31]: r
Out[31]: (12, 27, 21, 17, 12, 8, 4) 
```

* * *

顺便说一句，在 Python 中，以 0 开头的数字被解释为八进制（以 8 为基数的数字）。`08`SyntaxError 也是如此。

# java - 如何使用 JPA 将各个列映射到集合中

> ID：13632654
> 
> 赞同：0
> 
> 时间：2012-11-29T18:51:08.010
> 
> 标签：java, hibernate, jpa

我有一个遗留数据库，我无法更改其设计。我正在尝试使用 JPA 2.0 (Hibernate) 实现一个 DAO 层来访问它。然而，我遇到了问题，因为布局只是......可怕。我可以切换到基于 Spring-JDBC 的解决方案，但我还不想放弃最初的想法。

这是我现在正在努力解决的一个问题：

表 A：

```
 Id    Number  SomeProperty
---  --------  ------------
 1        100             X
 2        200             Y
 3        999             Z
... 
```

表 B：

```
Id     A1    A2    A3    A4    A5    A6
---  ----  ----  ----  ----  ----  ----
 1    100   200   
 2    200
 3    999     
 4    100   200   999
... 
```

因此，每个 B 最多可以包含 6 个 A，这些 A 由它们的 Number 引用。我想将此布局映射到类似的模型：

```
@Entity
class A {
    String someProperty;
}

@Entity
Class B {
    List<A> listOfAs; // 
} 
```

当我查询 B 时，我会使用示例数据，最终得到 4 个 B 实例：

*   第一个包含 2 个 A 的列表（100 和 200）。
*   第二个包含 1 个 A 的列表 (200)
*   第 3 个包含 1 A (999) 等列表。

有什么好的方法吗？我绝对不想让 B 类包含 A1 a1、A2 a2、A3 a3 等等。

您认为在使用这样的遗留数据库时忘记 JPA 会更好吗？欢迎任何建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:55:09.947

我会在这些表上创建视图来解决数据模型的问题。然后，您可以使用改进的模型来构建您的 JPA 实体。

# typo3 - Typo3 使用 PIDinRootline 使用特殊 javascript 或 css 的一页

> ID：13632657
> 
> 赞同：0
> 
> 时间：2012-11-29T18:51:14.983
> 
> 标签：typo3

我希望一个页面比普通页面包含更多的 javascript。我使用了这段代码：

```
 page=PAGE
page{
headerData{
5=TEXT
5.value=<linkhref="fileadmin/templates/style.css"rel="stylesheet"type="text/css"/>
10=TEXT
10.value=<linkhref="http://fonts.googleapis.com/css?family=Cabin+Sketch:bold"rel="stylesheet"type="text/css"/>
20=TEXT
20.value=<scriptsrc="http://code.jquery.com/jquery-latest.js"type="text/javascript"></script>
40=TEXT
40.value=<scripttype="text/javascript"src="fileadmin/templates/js/easySlider1.7.js"></script>
50=TEXT
50.value=<scripttype="text/javascript">$(document).ready(function(){$("#slider").easySlider({auto:true,continuous:true,prevId:'prevBtn',prevText:'',nextId:'nextBtn',nextText:'',speed:1000,pause:20000,});});</script>
**[PIDinRootline = 8]**
60=TEXT
60.value=<linkhref="fileadmin/templates/skills/default.css"rel="stylesheet"type="text/css"/>
70=TEXT
70.value=<scriptsrc="fileadmin/templates/skills/raphael.js"type="text/javascript"></script>
80=TEXT
80.value=<scriptsrc="fileadmin/templates/skills/init.js"type="text/javascript"></script>
**[end]**
} 
```

但是这三个都包含在每一页中！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:26:06.530

条件不能嵌套在任何块中，因此：

```
page=PAGE
page{
  headerData{
     5=TEXT
     //...
     [PIDinRootline = 8]
       60=TEXT
     [end]
  }
} 
```

你应该像这样使用它：

```
page=PAGE
page{
  headerData{
     5=TEXT
     //...
  }
}

[PIDinRootline = 8]
    page.headerData.60=TEXT
[end] 
```

当然，我假设您的样本中的星号`**[PIDinRootline = 8]**`-`**[end]**`是偶然的 - 它们是不允许的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T22:44:01.690

尝试这个：

```
[globalVar = TSFE:id =8]
  page.headerData.60 = TEXT
  page.headerData.60.value (
    <link href="fileadmin/templates/skills/default.css" rel="stylesheet" type="text/css" />
    <script src="fileadmin/templates/skills/raphael.js" type="text/javascript"></script>
    <script src="fileadmin/templates/skills/init.js" type="text/javascript"></script>
)
[global] 
```

甚至更好：

```
[globalVar = TSFE:id =8]
    page.includeCSS.fonts81 = fileadmin/templates/skills/default.css
    page.includeJS {
        file81 = fileadmin/templates/skills/raphael.js
        file81.type = application/x-javascript
        file82 = fileadmin/templates/skills/init.js
        file82.type = application/x-javascript

    }
[global] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T20:47:40.940

```
[PIDinRootline=8]
      page.headerData.60 = TEXT
      page.headerData.60.value = <link href="fileadmin/templates/skills/default.css" rel="stylesheet" type="text/css" />
      page.headerData.70 = TEXT
      page.headerData.70.value = <script src="fileadmin/templates/skills/raphael.js" type="text/javascript"></script>
      page.headerData.80 = TEXT
      page.headerData.80.value = <script src="fileadmin/templates/skills/init.js" type="text/javascript"></script>
[END] 
```

谢谢

# ruby-on-rails - 使用 Soundmanager2 播放 Soundcloud stream_url

> ID：13632660
> 
> 赞同：0
> 
> 时间：2012-11-29T18:51:29.723
> 
> 标签：ruby-on-rails, ruby, streaming, soundcloud, soundmanager2

我有一个 Rails 应用程序，我试图在其中允许用户提交指向 Soundcloud 上的歌曲的链接，并使用自定义 Soundmanager2 播放器使歌曲可供他们在我的应用程序上流式传输。

我可以使用'/resolve'方法成功获取歌曲'stream_url'和其他信息，如下所示：

```
<% client = Soundcloud.new(:client_id => 'SC_CLIENT_ID') %>
<% track = client.get('/resolve', :url => "<url-to-song-on-soundcloud>") %> 
```

但是，当我将“stream_url”插入播放器（在本例中为[Soundmanager Inline Player](http://www.schillmania.com/projects/soundmanager2/demo/page-player/)）时，在流 url 中包括我的 client_id，如下所示：

```
<li><a href="<%= track.stream_url %>?client_id=1234567890abcdefghtijkl1234">Play Song</a></li> 
```

并单击该链接，它会将我带到声音文件链接的页面外，而不是在我页面上的自定义播放器中播放它（类似于[这个问题](https://stackoverflow.com/questions/11885100/how-does-soundmanager-interpret-a-soundcloud-stream)）。

我希望在不离开页面的情况下使用我的（在本例中为上面提到的 SM2 内联播放器）播放器播放歌曲。提前感谢您的任何帮助和见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:11:57.750

您只需要注释中的行`inlineplayer.js`

```
if (!o.href || (!sm.canPlayLink(o) && !self.classContains(o,self.playableClass)) || self.classContains(o,self.excludeClass)) {
      return true;
    } 
```

# java - 如何在java中实现国际化

> ID：13632663
> 
> 赞同：4
> 
> 时间：2012-11-29T18:51:51.700
> 
> 标签：java, internationalization

我有一个名为 的类，其中描述`Info`了一堆`static String`变量。

```
public class Info{

    public static stringOne= "Hello";
    public static stringTwo = "world";

} 
```

我希望像`Info.stringTwo`从其他类一样访问这些变量。

1.) 我需要知道这是否`java-Internationalization`是我在这里申请的？（我有我将在本课程分配的应用程序中显示的所有消息。而且，我希望该应用程序也支持不同的语言）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T18:56:42.940

看看[资源包](http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html)

文档中的复制粘贴：

当您的程序需要特定于语言环境的对象时，它会使用 getBundle 方法加载 ResourceBundle 类：

```
 ResourceBundle myResources =
 ResourceBundle.getBundle("MyResources", currentLocale); 
```

资源包包含键/值对。这些键唯一地标识包中特定于语言环境的对象。

下面是一个包含两个键/值对的 ListResourceBundle 示例：

```
 public class MyResources extends ListResourceBundle {
     protected Object[][] getContents() {
         return new Object[][] {
             // LOCALIZE THE SECOND STRING OF EACH ARRAY (e.g., "OK")
             {"OkKey", "OK"},
             {"CancelKey", "Cancel"},
             // END OF MATERIAL TO LOCALIZE
        };
     }
 } 
```

键始终是字符串。在本例中，键是“OkKey”和“CancelKey”。在上面的例子中，值也是字符串——“OK”和“Cancel”——但它们不是必须的。这些值可以是任何类型的对象。您可以使用适当的 getter 方法从资源包中检索对象。因为 "OkKey" 和 "CancelKey" 都是字符串，所以您可以使用 getString 来检索它们：

```
button1 = new Button(myResources.getString("OkKey"));
button2 = new Button(myResources.getString("CancelKey")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T04:37:07.690

尽管使用 a`ResourceBundle`是 Java 中传统且最著名的国际化方法，但可以将国际化数据作为类成员提供，这与您寻求的方式有些相似。

您可以进一步将不同语言的某些消息的字符串放在`Map`按语言索引的 a 中。并使此 Map 成为某个类的静态成员。因此，您可以通过编译器检查的方式通过类成员名称为消息引用这些字符串集合。接下来，如果您有办法在运行时选择首选用户语言（您必须拥有它），您只需使用其语言键从适当的集合中选择正确的字符串，归结为如下所示：

```
logger.info (MyClassWithMessages.MY_MULTILANGUAGE_MESSAGE.s ()); 
```

并且`s()`可以使要添加到您的`Map`子类的方法负责处理用户偏好和`Map`通过语言键进行选择。

也就是说，剩下的任务就是为所有这些制定一个方便的 API... 欢迎您在我的博客页面 Look Ma 上查看这样的实现[，](http://s-n-ushakov.blogspot.ru/2013/06/look-ma-no-resourcebundle-step-2.html)没有ResourceBundle [:) ...](http://s-n-ushakov.blogspot.ru/2013/02/look-ma-no-resourcebundle-or-yet.html)继续使用消息格式参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T18:58:45.887

[这是这里](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CEkQFjAC&url=http%3A%2F%2Fwww.roseindia.net%2Fjava%2Fexample%2Fjava%2Fswing%2FInternationalizationDemo.java&ei=ZovWUIOKO7OC0QGVyIHAAg&usg=AFQjCNHWZQqVtFQiY5KTch88fRCFktrsFQ&sig2=sQjt8wNM7QviUNi36GxlTw&bvm=bv.1355534169,d.dmQ&cad=rja)的一个例子：-

```
 import java.util.*;

  public class InternationalizationDemo {
  public static void main(String[] args) {
  String language;
   String country;
  Locale locale;
  ResourceBundle rb;

  if (args.length != 2) {
 language = new String("en");
  country = new String("US");
  }
 else {
 language = new String(args[0]);
 country = new String(args[1]);
 }
 locale = new Locale(language, country);
 rb = ResourceBundle.getBundle("MessagesBundle", locale);
 System.out.println(rb.getString("localeInfo") + " ( " + 
locale.getDisplayLanguage() + "," + locale.getDisplayCountry() + ").\n");
 System.out.println(rb.getString("welcome"));
 System.out.println(rb.getString("sayThanks"));
  }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-19T16:33:22.007

对于 Java 和其他应用程序的国际化，我实现了一个[Message Compiler](http://www.tmasoft.de/MessageCompiler/index.html)，它将资源包文件和常量定义创建为 Java 枚举或来自单个源文件的键的静态最终字符串。所以常量可以在 Java 源代码中使用，这比使用纯字符串常量更安全。消息编译器不能只用于 Java。它还为 Objective-C 或 Swift 创建资源文件和常量，并且可以针对其他编程环境进行扩展。

# c# - 同时维护和部署应用程序的两个版本

> ID：13632669
> 
> 赞同：5
> 
> 时间：2012-11-29T18:52:11.137
> 
> 标签：c#, visual-studio-2010, multiple-versions

我在 Visual Studio 2010 中有一个 C# WinForms 应用程序，供两个不同的客户使用。应用程序的基本功能对于每个客户都是相同的，但某些代码行（存储过程的名称、资源、某些行为）在版本之间是不同的。到目前为止，我将应用程序保留在同一个项目中，并在构建/发布时使用预处理器指令来切换要使用的部署。然而，该项目的范围已经扩大到不再可行的程度。

由于有这么多代码是共享的，我试图避免重复源代码文件。我想知道维护需要同时部署不同版本的应用程序的最佳方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T19:01:53.080

使用接口来定义你的类。拥有一个接口意味着您可以拥有同一个接口的多个实现，每个客户端一个。这将要求您分析现有代码库并确定代码中可以定义这些接口的逻辑分隔。

然后，您可以根据客户端的需要加载接口。例如，您可以通过配置执行此操作。根据配置值加载 Implementation1 或 Implementation2。有很多很多方法可以完成这个特定的位。您应该阅读依赖注入、控制反转并查看 Ninject、Autofac、Unity 等工具。

一开始实际上可能很难考虑您是如何使用预处理器指令的，但是随着您的应用程序的增长，您将需要进行这种重构。请记住，如果您现在不这样做，那么随着您的应用程序变得更加复杂，这种重构将更加昂贵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T19:02:04.930

不同的功能应该是应用程序架构的一部分。如果您需要为不同的客户提供不同的功能，请将其抽象出来——创建一个封装行为的接口，然后在两个不同的程序集中以两种不同的方式实现它。然后（取决于您的部署机制），您可以使用一个 DLL 或另一个来发布您的应用程序。为了避免重新编译、添加引用等，您可以使用依赖注入框架，例如 Ninject、Castle Windsor、MEF 等。如果代码足够不同，那是一个“类似插件”的架构。

如果您谈论的是文本、颜色、基本差异，它们不应该是硬编码的，而是数据驱动的。如果您的应用程序连接了互联网，它可以在用户登录时下载适当的设置。否则，可以将指示文本/颜色/行为的内容放入特定于客户的配置文件中。您可以使用配置转换来简化该过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:03:50.720

您可以通过使用某种资源、配置或属性文件来区分一些差异。我的意思是您在文件中存储某种值，例如在特定情况下使用的存储过程的名称。然后您的代码从文件中读取名称并运行它。您可以更改文件中的值，而无需为每个部署重新构建代码。

# iis - IIS - Google plusone 按钮不起作用

> ID：13632670
> 
> 赞同：1
> 
> 时间：2012-11-29T18:52:20.917
> 
> 标签：iis, google-plus-one

通常，我使用 .htaccess 中的简单规则将我的网站部署在带有 Apache ModRewrite 的服务器上，将带有 www 的地址重定向到不带 www 的地址：`www.example.com => example.com`

**我目前正在使用 IIS + UrlRewrite 在带有 Windows 的服务器上部署网站**。在我实现重定向设置的 web.config 文件中，我有以下规则来删除 www 地址：

```
<rule name="Imported Rule 1" stopProcessing="true">
    <match url="^(.*)$" />
    <conditions logicalGrouping="MatchAll">
        <add input="{HTTP_HOST}" pattern="^www\.(.+)$" />
    </conditions>
    <action type="Redirect" url="http://{C:1}/{R:1}" redirectType="Permanent" />
</rule> 
```

通过浏览器，重定向完美！**~~但是一些外部工具，例如 Facebook 和 Google+1 按钮，在重定向规则处于活动状态时~~**
**不起作用。**

 ~~例如，Google+1 按钮点击它时出错（在申请中点击按钮我可以看到错误：“code”：-32099，“message”：“Backend Error”）。
在尝试使用以下工具分析带有 www 地址的网站时，Facebook 已经意识到问题：http: [//developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)
Facebook 错误：`URL Parsing Error: Error parsing the URL typed, no data was collected.`

~~**禁用重定向后，Google+1 按钮和 Facebook 的分析工具可以完美运行。**~~

*注意：原则上不通知本站，因为我想留下一个禁用的规则来寻找解决方案。如果有必要通知链接，我将编辑此问题。*

* * *

**编辑：** 经过一些测试，无论是否启用了规则，我的 +1 按钮问题仍在继续。我在 Google Code 上找到了一个关于相同问题的线程，但不明白应该怎么做：

[http://code.google.com/p/google-plus-platform/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Component%20Owner%20Summary%20Stars&groupby=&sort=&id= 241](http://code.google.com/p/google-plus-platform/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Component%20Owner%20Summary%20Stars&groupby=&sort=&id=241)

该问题只发生在绑定到该站点上。我创建了一个带有两个 +1 按钮的测试页面，一个指向站点，一个指向 Stackoverflow。通过单击按钮 Stackoverflow 工作，但不是另一个：

[http://renalvida.org.br/teste.php](http://renalvida.org.br/teste.php)~~

# java - 从 Java 中的数组中检索数据以用于自定义脚本

> ID：13632671
> 
> 赞同：0
> 
> 时间：2012-11-29T18:52:27.243
> 
> 标签：java, elasticsearch

我正在尝试创建自定义脚本。

```
_source": {
                "_boost": "1.5",
                "bid": "60697",
                "name": "Brick",
                "address": "3095 33rd St",
                "city": "Astoria",
                "state": "NY",
                "zip": "11103",
                "tags": "Restaurant,Italian",
                "location": [
                    {
                        "lat": 40.76359,
                        "lon": -73.921684
                    }
                ]} 
```

我正在尝试使用 DocLookup 类检索 Java 中的 lat 和 lon 字段。通常我只会做 doc().field("name") 来获取例如名称。

给定我的文档结构，我将如何在自定义脚本中获取纬度和经度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:17:21.567

```
double[] lats = ((GeoPointDocFieldData) doc().field("name")).getLats();
double[] lons = ((GeoPointDocFieldData) doc().field("name")).getLons(); 
```

# iphone - 我只希望我的应用程序支持 iPhone 5 和 iPod touch 5th gen 如何设置它以防止其他设备下载？

> ID：13632672
> 
> 赞同：1
> 
> 时间：2012-11-29T18:52:34.510
> 
> 标签：iphone, ios, xcode

我创建的应用程序仅设计为支持 iPhone 5 和 iPod touch 第 5 代，因为它们的分辨率。如何设置它以使其只能下载并安装在 iPhone5s 或 iPod Touch 第 5 代设备上？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:06:34.170

[此问题](https://stackoverflow.com/a/3283386/869455)可能重复

Apple Appstore 没有像 Android Market 这样的功能来过滤可以下载应用程序的设备。但是，您可以使用 UIRequiredDeviceCapabilities 键在 info.plist 中指定所需的设备功能。[您可以在此 Apple 文档](https://developer.apple.com/library/ios/#documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)中找到可能的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T12:32:24.060

扩展@Atif 的答案。您可以在此处找到的设备兼容性矩阵中查看设备功能：[https ://developer.apple.com/library/ios/documentation/DeviceInformation/Reference/iOSDeviceCompatibility/DeviceCompatibilityMatrix/DeviceCompatibilityMatrix.html#//apple_ref/doc/uid /TP40013599-CH17-SW1](https://developer.apple.com/library/ios/documentation/DeviceInformation/Reference/iOSDeviceCompatibility/DeviceCompatibilityMatrix/DeviceCompatibilityMatrix.html#//apple_ref/doc/uid/TP40013599-CH17-SW1)

# jquery - 选中后更改复选框和勾选颜色

> ID：13632677
> 
> 赞同：0
> 
> 时间：2012-11-29T18:53:01.770
> 
> 标签：jquery, html, css

我尝试在用户选中复选框后更改复选框的背景颜色和刻度颜色。

```
<input type="checkbox" value="checkbox" /> 
```

例如：一旦检查了使用，我想把盒子变成蓝色。

我已经在谷歌上搜索了一段时间，但仍然无法解决这个问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:08:40.113

你可以使用：

[http://www.no-margin-for-errors.com/projects/prettycheckboxes/](http://www.no-margin-for-errors.com/projects/prettycheckboxes/)

```
​$(document).ready(function() {
    $('input[name=thisBox]').change(function () {
        if (this.checked) {
           //Code to change checkbox
        }
    });        
});​ 
```

# .net - 多个进程和等待句柄

> ID：13632678
> 
> 赞同：0
> 
> 时间：2012-11-29T18:53:04.317
> 
> 标签：.net, vb.net, event-wait-handle

基于这个[问题](https://stackoverflow.com/questions/13592290/finding-a-messagebox-in-a-specific-app/13594012#13594012)，我决定根据 Jim Mischel 的建议尝试使用 waithandles/eventwaithandle 作为我的解决方案。我“几乎”让它工作。这是代码

```
Private Sub InitDeploymentCheck()
moDeploymentCheck = New TRS.Deployment.TRSDeploymentCheck(EnvironmentVariables.Environment, AppDomain.CurrentDomain.BaseDirectory.Contains("bin"), MDIMain)
AddHandler moDeploymentCheck.DeploymentNeeded,
    Sub()
        moTimer = New System.Windows.Forms.Timer()
        moTimer.Interval = 300000 '5 minutes
        moTimer.Enabled = True
        AddHandler moTimer.Tick,
            Sub()
                'check to see if the message box exist or not before throwing up a new one

                'check to see if the wait handle is non signaled, which means you shouldn't display the message box
                If waitHandle.WaitOne(0) Then
                    'set handle to nonsignaled
                    waitHandle.Reset()
                    MessageBox.Show(MDIMain, "There is a recent critical deployment, please re-deploy STAR to get latest changes.", "Critical Deployment", MessageBoxButtons.OK, MessageBoxIcon.Warning)
                    'set the handle to signaled
                    waitHandle.Set()
                End If

            End Sub
        waitHandle.Set()
        MessageBox.Show(MDIMain, "There is a recent critical deployment, please re-deploy STAR to get latest changes.", "Critical Deployment", MessageBoxButtons.OK, MessageBoxIcon.Warning)
    End Sub
End Sub 
```

同样，这来自几乎我们所有应用程序都继承自的基本形式。当我们使用单个应用程序时，它可以完美运行。如果您运行多个从基本表单继承的应用程序并且有人仅单击一个消息框，则有时会在另一个应用程序中显示第二个消息框。我最初将等待句柄声明为静态/共享，并认为这是问题所在，但事实并非如此。我还尝试让每个应用程序创建自己的等待句柄并将其传递给基础，并产生相同的效果。有谁知道为什么看起来等待句柄在不同的应用程序之间共享？哦对了，waitHandle其实是一个ManualResetEvent

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:34:25.927

首先，如果你想在多个应用程序中使用它，你必须`EventWaitHandle`使用[这个构造函数](http://msdn.microsoft.com/en-us/library/41acw8ct.aspx)创建一个命名对象，或者创建一个命名对象。A`ManualResetEvent`仅适用于单个进程。

其次，命名[Mutex](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)可能是更好的解决方案。我刚刚意识到我推荐的代码有竞争条件。如果线程 A 执行`WaitOne(0)`并成功，然后线程 B 出现并在线程 A 调用之前执行相同的操作`Reset`，则两个线程最终都会显示消息框。

使用`Mutex`and`WaitOne(0)`将解决该问题。一定要释放`Mutex`，但是：

```
if (mutex.WaitOne(0))
{
    try
    {
        // do stuff
    }
    finally
    {
        mutex.ReleaseMutex();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:04:20.503

它无法正常工作的原因是我有一个错误，我在计时器事件之外显示第一个消息框。它应该是：

```
waitHandle.Reset()
MessageBox.Show(MDIMain, "There is a recent critical deployment, please re-deploy STAR to get latest changes.", "Critical Deployment", MessageBoxButtons.OK, MessageBoxIcon.Warning)
waitHandle.Set() 
```

# java - 使用也处理撇号的正则表达式匹配单词

> ID：13632679
> 
> 赞同：4
> 
> 时间：2012-11-29T18:53:06.893
> 
> 标签：java, regex, split, word, apostrophe

我必须将一行文本分成单词，并且对使用什么正则表达式感到困惑。我到处寻找一个匹配一个单词的正则表达式，并找到了与这篇文章类似的正则表达式，但在 java 中想要它（java 不处理常规字符串中的 \）。

[正则表达式匹配单词和带有撇号的单词](https://stackoverflow.com/questions/2596893/regex-to-match-words-and-those-with-an-apostrophe)

我已经为每个答案尝试了正则表达式，但不确定如何为此构建 Java 正则表达式（我假设所有正则表达式都是相同的）。如果在我看到的正则表达式中将 \ 替换为 \，则正则表达式不起作用。

我也尝试过自己查找并来到此页面： [http ://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

但我无法完全理解正则表达式的高级技术。

我正在使用 String.split(regex string here) 来分隔我的字符串。一个例子是，如果给我以下内容：“我喜欢吃，但我不喜欢吃每个人的食物，否则他们会饿死。” 我想匹配：

```
I
like
to
eat
but
I
don't
like
to
eat
everyone's
food
or
they'll
starve 
```

我也不想匹配 '' 或 '''' 或 ' ' 或 '.'' 或其他排列。我的分隔符条件应该类似于：[匹配任何单词字符][如果撇号前面有单词字符，也匹配撇号，如果有的话，则匹配后面的单词字符]

我得到的只是一个匹配单词 [\w] 的简单正则表达式，但我不确定如何使用前瞻或后视来匹配撇号，然后匹配剩余的单词。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T19:26:42.447

`WhirlWind`使用我评论中所述页面上的答案，您可以执行以下操作：

```
String candidate = "I \n"+
    "like \n"+
    "to "+
    "eat "+
    "but "+
    "I "+
    "don't "+
    "like "+
    "to "+
    "eat "+
    "everyone's "+
    "food "+
    "''  ''''  '.' ' "+
    "or "+
    "they'll "+
    "starv'e'";

String regex = "('\\w+)|(\\w+'\\w+)|(\\w+')|(\\w+)";
Matcher matcher = Pattern.compile(regex).matcher(candidate);
while (matcher.find()) {
  System.out.println("> matched: `" + matcher.group() + "`");
} 
```

它将打印：

```
> matched: `I`
> matched: `like`
> matched: `to`
> matched: `eat`
> matched: `but`
> matched: `I`
> matched: `don't`
> matched: `like`
> matched: `to`
> matched: `eat`
> matched: `everyone's`
> matched: `food`
> matched: `or`
> matched: `they'll`
> matched: `starv'e` 
```

您可以在这里找到一个运行示例：http: [//ideone.com/pVOmSK](http://ideone.com/pVOmSK)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T02:08:42.263

The following regex seems to cover your sample string correctly. But it doesn't cover you scenario for the apostrophe.

```
[\s,.?!"]+ 
```

Java Code:

```
String input = "I like to eat but I don't like to eat everyone's food, or they'll starve.";
String[] inputWords = input.split("[\\s,.?!]+"); 
```

If I understand correctly, the apostrophe should be left alone as long as it is after a word character. This next regex should cover the above plus the special case for the apostrophe.

```
(?<!\w)'|[\s,.?"!][\s,.?"'!]* 
```

Java Code:

```
String input = "I like to eat but I don't like to eat everyone's food, or they'll starve.";
String[] inputWords = input.split("(?<!\\w)'|[\\s,.?\"!][\\s,.?\"'!]*"); 
```

If I run the second regex on the string: `Hey there! Don't eat 'the mystery meat'.` I get the following words in my string array:

```
Hey
there
Don't
eat
the
mystery
meat' 
```

# ios - UIView 的边缘在动画结束时闪烁

> ID：13632680
> 
> 赞同：0
> 
> 时间：2012-11-29T18:53:07.820
> 
> 标签：ios, cocoa-touch

我的主要`UIViewController`有一个`UIView`名为`viewContainer`. 它添加了几个`UIImageView`s、`UIButton`s 和`UIView`s。在我的`viewDidLoad`方法中，我将以下内容应用于`viewContainer`：

```
self.viewContainer.layer.shadowColor = [UIColor blackColor].CGColor;
self.viewContainer.layer.shadowOffset = CGSizeMake(0, 0);
self.viewContainer.layer.shadowOpacity = 1.0;
self.viewContainer.layer.shadowRadius = 10.0;
self.viewContainer.layer.shadowPath = [UIBezierPath bezierPathWithRect:self.viewContainer.layer.bounds].CGPath;

self.viewContainer.backgroundColor = [UIColor blackColor];
self.viewContainer.opaque = YES; 
```

当用户按下 内的按钮时`viewContainer`，我执行以下翻译：

```
[UIView animateWithDuration:0.3
                 animations:^{
                         [self.viewContainer setCenter: CGPointApplyAffineTransform(self.viewContainer.center, CGAffineTransformConcat(self.viewContainer.transform, CGAffineTransformMakeTranslation(60, 0)))];
                 }
                 completion:nil]; 
```

我的问题是，在动画结束时，视图的边缘会闪烁几分之一秒（一条白色垂直线）。我尝试设置框架而不是变换，但结果仍然相同。我正在尝试做一种幻灯片来显示选项的东西，它可以工作，但在完成时会闪烁。

有任何想法吗？

# javascript - Javascript正确访问JavascriptSerializer JSON字符串

> ID：13632685
> 
> 赞同：0
> 
> 时间：2012-11-29T18:53:22.430
> 
> 标签：javascript, vb.net, json, serialization

在 Javascript 中，我调用了一个从数据表中检索数据并将其转换为 javascriptSerializer 的函数，然后我在 Javascript 图表中使用数据。第一次一切正常，一旦我更改数据集选择参数，即日期等，并再次调用 Function PopulateChart() 以尝试提取一组新数据，我在 javascript 中检索它时遇到问题。数据和 json 字符串在服务器上正确填充，但在客户端上不正确，旧的数据字符串仍然存在。

var chartData 仍然显示旧数据，即使通过返回的序列化程序。Serialize(rows) 显示服务器上的正确数据

下面是我的代码以及我想要实现的目标。

ASPX

```
 var chartData = <%= PopulateChart() %>; 
```

VB

```
 Public Function PopulateChart() As String

                ''Get Chart Data
                Dim daChart As New dsSVTableAdapters.clsChart
                Dim dtChart As New dsSV.webV1_ChartsDataTable
                Dim drChart As dsSV.webV1_ChartsRow

                dtChart = daChart.GetChart(hChartID.Value)

                If dtChart.Rows.Count > 0 Then

                    drChart = dtChart.Rows(0)
                    hChartName.Value = drChart.Description

                    HInterval.Value = drChart.Interval
                    Dim dtData As DataTable
                    Dim ds As New DataSet()
                    ds = GetData(4, DateTime.Parse("2012-05-01"), DateTime.Parse("2012-06-30"))
                    dtData = ds.Tables(0)

                    Dim serializer As System.Web.Script.Serialization.JavaScriptSerializer = New System.Web.Script.Serialization.JavaScriptSerializer()
                    Dim rows As New List(Of Dictionary(Of String, Object))

                    Dim row As Dictionary(Of String, Object)

                    For Each dr As DataRow In dtData.Rows
                        row = New Dictionary(Of String, Object)
                        For Each col As DataColumn In dtData.Columns
                            If col.ColumnName = "DateAndTime" Then
                                Dim dts As DateTime = DateTime.Parse(dr(col).ToString())
                                row.Add(col.ColumnName, dts.ToString("yyyy-MM-dd hh:mm:ss"))
                            ElseIf col.ColumnName = "Time" Then
                                Dim ts As DateTime = DateTime.Parse(dr(col).ToString())
                                row.Add(col.ColumnName, ts.ToString("hh:mm:ss"))
                            Else
                                row.Add(col.ColumnName, dr(col))
                            End If
                        Next
                        rows.Add(row)
                    Next

                    serializer.MaxJsonLength = Int32.MaxValue

                    Return serializer.Serialize(rows)
                End If

            End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:26:23.330

`var chartData = <%= PopulateChart() %>;`只会在每次页面加载时评估服务器端，它`<%=....%>`是一个`asp.net`包装器，用于在且仅在页面请求时呈现网页中的内容。它不会使 PopulateChart() 函数可用于客户端的 JavaScript。

您将需要通过 ajax 调用或使用指示要加载哪些数据的请求参数重新加载整个页面来加载新数据。

这是一篇关于使用 jquery 的 asp.net 和 ajax 的 codeproject 文章。

[http://www.codeproject.com/Articles/17203/Using-jQuery-for-AJAX-in-ASP-NET](http://www.codeproject.com/Articles/17203/Using-jQuery-for-AJAX-in-ASP-NET)

# ruby-on-rails - 应用程序可在 Heroku 上运行，但服务器通过控制台访问数据库时出错

> ID：13632694
> 
> 赞同：0
> 
> 时间：2012-11-29T18:53:48.900
> 
> 标签：ruby-on-rails, ruby, heroku

我在 Heroku 上有一个 Rails 应用程序，当我通过浏览器访问它时可以正常工作。它还正确显示数据库中的数据。但是，当我尝试通过控制台更新数据库时，我收到了内部服务器错误消息。模型的名称是 Total.rb（表的名称是“totals”）我这样做是为了获得第一个条目

> > t = Total.first ！内部服务器错误

由于该应用程序通过浏览器运行，因此我不确定这是我造成的问题还是 Heroku 的错。自从我通过控制台更新以来已经有一段时间了，所以我不确定我是否做得对，但这似乎很简单。

我一直使用“heroku 控制台”访问控制台，现在它告诉我使用“heroku 运行控制台”，但是当我这样做时，它告诉我 heroku gem 已被弃用，我需要安装 Toolbelt。我安装了 Toolbelt，经过身份验证，并尝试运行控制台会话，但结果相同。

这是我的 Heroku 信息

插件：heroku-postgresql:dev pgbackups:plus zerigo_dns:basic

Dynos：1 Git URL：git@heroku.com:blahblah 所有者电子邮件：blahblah@gmail.com Repo 大小：19M Slug 大小：4M 堆栈：bamboo-mri-1.9.2 Web URL： [http](http://blahblah.com) ://blahblah.com 工人： 0

**更新**

如果我在安装 Heroku 工具带后尝试运行控制台，我会得到

```
 heroku run console
Running `console` attached to terminal... up, run.3213
bash: console: command not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:57:27.907

我遇到了同样的问题，heroku CLI 客户端出现了一些我不理解的内部问题。

这个stackoverflow线程中发布的解决方案为我解决了它：

[链接在这里](https://stackoverflow.com/questions/8941659/running-heroku-console-does-not-start)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:43:39.623

Total 可以是保留字吗？您可以尝试重命名表或创建一个临时表，然后用它测试相同的查询。如果不出意外，它将消除一个可能的问题区域。

# android - 如何制作服务 Android 编程

> ID：13632695
> 
> 赞同：1
> 
> 时间：2012-11-29T18:53:51.400
> 
> 标签：android, android-intent, service

我正在尝试启动和关闭服务。我的服务是日志。

```
package com.example.textsmslock;

import android.app.Service;
import android.content.Intent;
import android.os.IBinder;
import android.util.Log;
public class Logs extends Service
{
    @Override
    public IBinder onBind(Intent arg0){
         // TODO Auto-generated method stub
        return null;
    }
     @Override
        public void onStart(Intent intent, int startId) {
            // TODO Auto-generated method stub
            super.onStart(intent, startId);
            System.out.println("LOGS STARTED");
            Log.d("TAG", "FirstService started");
        }
       @Override
        public void onDestroy() {
            // TODO Auto-generated method stub
            super.onDestroy();
        }
} 
```

调用它的活动是 ConfirmPin。正在函数中调用日志。

```
// imports...
// public class...

public void ConfirmingPin()
{   
    if(pinCorrect) 
    {
        startService(new Intent("com.example.textsmslock.Logs"));
    }
} 
```

这是我的 AndridManifest

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.textsmslock"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".ConfirmPin"
        android:label="@string/title_activity_confirm_pin" >
        <intent-filter>
            <action android:name="com.example.textsmslock.ConfirmPin" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <service android:name=".Logs"/>
</application> 
```

日志猫说：

> 无法启动服务 Intent { act=com.example.textsmslock.Logs }：未找到

有谁知道为什么我无法启动服务意图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:56:25.797

Activity 清单中的 IntentFilter 似乎不正确，请尝试：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

并启动服务：

```
startService(new Intent(this, Logs.class)); 
```

（您在几分钟前使用不同的 LogCat 发布了此内容，该错误将我直接指向了这一点。您在我发布答案之前删除了这个问题......）

# asp.net - Windows 身份验证 (ASP.NET)

> ID：13632706
> 
> 赞同：-1
> 
> 时间：2012-11-29T18:54:23.283
> 
> 标签：asp.net, windows-authentication

如何在登录时实施 Windows 身份验证以对用户进行身份验证？**我不想弹出一个窗口，而是想让我的登录页面（LoginPage.aspx）也这样做。**请向我提供步骤/代码（vb.net）。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:26:07.550

您错过了关于什么是 Windows 身份验证的要点。当不是域的一部分或存在 Windows 身份验证无法解决的某些特定要求时，可以使用表单身份验证。如果计算机在 Active Directory 域中注册，则基于用于登录域的凭据对网站的身份验证将是透明的，从而无需在每次访问应用程序时提供凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:03:28.613

访问活动目录和进行身份验证需要大量代码。请参阅 codeproject.com 上的文章或 msdn 文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:08:52.940

也许你可以在你的 web.config 中使用这个标签

```
<authentication mode="Forms">
    <forms loginUrl="login.aspx" defaultUrl="Login.aspx" timeout="60"></forms>
</authentication> 
```

在您的 login.aspx 中，您将编写代码来访问 Active Directory。

# css - 我的 CSS 动画不滚动

> ID：13632707
> 
> 赞同：0
> 
> 时间：2012-11-29T18:54:25.250
> 
> 标签：css, css-animations

我正在尝试制作 css 动画，但由于某种原因它没有滚动。来源和示例在这里[http://codepen.io/jonasroessum/pen/rLmuc](http://codepen.io/jonasroessum/pen/rLmuc)

# c# - VSPerf 和 A zure 云服务

> ID：13632715
> 
> 赞同：8
> 
> 时间：2012-11-29T18:55:01.710
> 
> 标签：c#, asp.net-mvc, azure, hosting

当我将云服务部署到 Windows Azure 时，它​​会导致许多 VSPerf.exe 实例启动——从 1 到 5 不等。

在它们之间，它们消耗了所有的 CPU，并且没有一个进程会自行终止。

如果我远程连接到实例并手动终止进程，它们会在下一个请求时重新启动。如果进程在请求期间终止，则请求成功并且页面按预期显示和运行。

这之间的唯一区别是以前的部署是我已经升级到 .NET 4.5，因此将云服务升级到服务器 2012。

这可能是什么原因造成的？

### 更新

每次启动失败都会记录 2 个事件：

*   `VsPerf Tool Error: Error starting data collection with a dedicated process D:\Program Files (x86)\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\VSPerf.`

*   `.NET Runtime version 4.0.30319.18010 - Loading profiler failed during CoCreateInstance. Profiler CLSID: '{44a86cad-f7ee-429c-83eb-f3cde3b87b70}'. HRESULT: 0x80040111\. Process ID (decimal): 1444\. Message ID: [0x2504].`

### 更新 2

VSPerf 问题在创建新实例或重新映像机器后不会发生（至少目前这是一个修复（一个烦人且耗时的修复））。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T20:27:31.047

检查 Visual Studio 中的 Azure 发布设置，我敢打赌您已在“高级”选项卡上启用了分析。

![VS 发布设置](../Images/d290975a4238b83b3352c6ffa83773c7.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-23T17:51:57.897

同样的问题，VSPerf.exe 的 2 个进程在第二个角色实例上消耗 100% 的 CPU。IIS 在该实例上变得无响应。4 个月前我们遇到了完全相同的问题，当我们使用 MSFT 支持调试此问题时启用分析时“不知何故”消失了（MSFT 内部有人知道这个问题）。但是由于无法重现问题（我们只有屏幕截图），它被删除了。

由于我在 5 分钟前再次看到它，并且由于 Azure SDK 2.0 可以轻松获取诊断日志（与 SDK 1.8 中的配置仪式不同），这里有一些有用的东西可以让下一个人理解

核心错误在于`Application VsPerf Tool Error: Error starting data collection with a dedicated process D:\Program Files (x86)\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\VSPerf.`下面的详细日志（4 个条目）。有趣的是，我有 2 个 VSPerf.exe 进程燃烧 100% 的 CPU，并且还有 2 个日志条目....

```
{555908d1-a6d7-4695-8e1e-26931d2012f4}  Service Control Manager 7011    System  A timeout (30000 milliseconds) was reached while waiting for a transaction response from the iphlpsvc service.  <Event xmlns='http://schemas.microsoft.com/win/2004/08/events/event'><System><Provider Name='Service Control Manager' Guid='{555908d1-a6d7-4695-8e1e-26931d2012f4}' EventSourceName='Service Control Manager'/><EventID Qualifiers='49152'>7011</EventID><Version>0</Version><Level>2</Level><Task>0</Task><Opcode>0</Opcode><Keywords>0x8080000000000000</Keywords><TimeCreated SystemTime='2013-06-23T17:37:25.557218700Z'/><EventRecordID>1269</EventRecordID><Correlation/><Execution ProcessID='520' ThreadID='1104'/><Channel>System</Channel><Computer>RD00155DA909B8</Computer><Security/></System><EventData><Data Name='param1'>30000</Data><Data Name='param2'>iphlpsvc</Data></EventData></Event>   WebApp_IN_1 6/23/2013 5:37 PM   2   520 1104
{555908d1-a6d7-4695-8e1e-26931d2012f4}  Service Control Manager 7011    System  A timeout (30000 milliseconds) was reached while waiting for a transaction response from the Schedule service.  <Event xmlns='http://schemas.microsoft.com/win/2004/08/events/event'><System><Provider Name='Service Control Manager' Guid='{555908d1-a6d7-4695-8e1e-26931d2012f4}' EventSourceName='Service Control Manager'/><EventID Qualifiers='49152'>7011</EventID><Version>0</Version><Level>2</Level><Task>0</Task><Opcode>0</Opcode><Keywords>0x8080000000000000</Keywords><TimeCreated SystemTime='2013-06-23T17:37:56.259560100Z'/><EventRecordID>1270</EventRecordID><Correlation/><Execution ProcessID='520' ThreadID='1104'/><Channel>System</Channel><Computer>RD00155DA909B8</Computer><Security/></System><EventData><Data Name='param1'>30000</Data><Data Name='param2'>Schedule</Data></EventData></Event>   WebApp_IN_1 6/23/2013 5:37 PM   2   520 1104
00000000-0000-0000-0000-000000000000    VSPERF  4100    Application VsPerf Tool Error: Error starting data collection with a dedicated process D:\Program Files (x86)\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\VSPerf. <Event xmlns='http://schemas.microsoft.com/win/2004/08/events/event'><System><Provider Name='VSPERF'/><EventID Qualifiers='57635'>4100</EventID><Level>2</Level><Task>0</Task><Keywords>0x80000000000000</Keywords><TimeCreated SystemTime='2013-06-23T17:40:37.000000000Z'/><EventRecordID>266</EventRecordID><Channel>Application</Channel><Computer>RD00xxxxxxxxx</Computer><Security/></System><EventData><Data>Error starting data collection with a dedicated process D:\Program Files (x86)\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\VSPerf.</Data></EventData></Event> WebApp_IN_1 6/23/2013 5:40 PM   2   0   0
00000000-0000-0000-0000-000000000000    VSPERF  4100    Application VsPerf Tool Error: Error starting data collection with a dedicated process D:\Program Files (x86)\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\VSPerf. <Event xmlns='http://schemas.microsoft.com/win/2004/08/events/event'><System><Provider Name='VSPERF'/><EventID Qualifiers='57635'>4100</EventID><Level>2</Level><Task>0</Task><Keywords>0x80000000000000</Keywords><TimeCreated SystemTime='2013-06-23T17:40:41.000000000Z'/><EventRecordID>267</EventRecordID><Channel>Application</Channel><Computer>RD00xxxxxxxxx</Computer><Security/></System><EventData><Data>Error starting data collection with a dedicated process D:\Program Files (x86)\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\VSPerf.</Data></EventData></Event> WebApp_IN_1 6/23/2013 5:40 PM   2   0   0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-23T12:56:47.153

我发现最接近解决方法的是创建启动任务

```
<Task commandLine="VSPerf.cmd" executionContext="elevated" taskType="background" /> 
```

`VSPerf.cmd`简单的启动器在哪里

```
PowerShell -ExecutionPolicy Unrestricted .\VSPerf.ps1
exit /B 0 
```

对于试图杀死过度活跃的 VSPerf 实例的 PowerShell 脚本：

```
function Restart-VSPerf {
    $procs = (
        gwmi -Query "SELECT IDProcess,PercentProcessorTime FROM Win32_PerfFormattedData_PerfProc_Process WHERE Name='vsperf' AND PercentProcessorTime > 25" |
        Foreach-Object { $_pid = $_.IDProcess ; gwmi -Query "SELECT Handle,CommandLine FROM win32_process WHERE Name='vsperf.exe' AND Handle=$_pid" | Select-Object Handle, CommandLine }
    )
    if ($procs) {
        # Get VSPerf path.
        # NB The regex uses conditional matching with an expression, as described in https://msdn.microsoft.com/en-us/library/36xybswe.aspx
        # to ensure that a single capturing group gets the contents of quoted arguments and unquoted arguments.
        $regex = [regex] '^(("?)((?(?<=")[^"]*|[^"\s]*))\2(\s+|$))+$'
        $vsperf = $regex.Match($procs[0].CommandLine).Groups[3].Captures[0].Value

        & $vsperf /detach

        # Kill
        $procs | Foreach-Object { Stop-Process -Force -Id $_.Handle }

        # Restart
        Start-Sleep -s 1
        $procs | Foreach-Object {
            $_args = ($regex.Match($_.CommandLine).Groups[3].Captures[1..99] |  Select-Object -ExpandProperty Value)
            Start-Process $vsperf -ArgumentList "$_args"
        }
    }
}

while (1) {
    Start-Sleep -s 180
    Restart-VSPerf
} 
```

它有时会起作用，但并非总是如此。欢迎提出可靠性改进建议。

# delphi - 访问容器对象与本地分配的变量

> ID：13632724
> 
> 赞同：5
> 
> 时间：2012-11-29T18:55:35.797
> 
> 标签：delphi, generics

谁能告诉我将容器中的对象分配给局部变量是否有任何性能优势，如果它在紧密循环中使用很多。

我有一个大的 for 循环，并且在循环内经常访问来自容器的对象。IE

```
for i := 0 to 100000 do
begin
  my_list[i].something := something;
  my_list[i].something_else := something;
  my_list[i].something_else := something;
  my_list[i].something_else := something;
  my_list[i].something_else := something;
end; 
```

我会通过分配看到性能改进吗

```
local_ref := my_list[i]; 
```

在每次迭代开始时？我正在使用通用容器（TList<<>MyObject<>>）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T19:07:55.417

进行您建议的更改肯定会导致更快的代码。访问局部变量总是比访问属性 getter on 更快`TList<T>`。首先，这些 getter 对索引执行有效性检查。但是，即使对于具有最简单 getter 的类，也很难在性能上击败缓存的本地。

现在，从这里不可能说这对你的情况是否重要。如果您在循环内执行任何远程非平凡的操作，那么项目 getter 的运行时间将是无关紧要的。循环可能会运行大量迭代这一事实并不是关键因素。最重要的是您在每次迭代中花费了多少时间。如果调用项目 getter 需要 1 个时间单位，而对每个项目执行任何操作需要 1000 个时间单位，那么 getter 性能不是问题。

最终，回答这个问题的最终方法是确定备选方案的时间。仅基于测量进行优化。

将项目复制到局部变量中有一个更好的理由：表达的清晰性。您当前的代码严重违反了[DRY 原则](http://en.m.wikipedia.org/wiki/Don%27t_repeat_yourself)。

最后，如果它使用 for in 循环，这段代码会读起来最好：

```
for Item in List do
  .... 
```

现在，for in 循环可能比传统循环慢，但你应该权衡它的清晰度和可维护性。优化通常使代码更难维护并且更容易出错。结论：只优化瓶颈。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T19:00:49.797

这一切都取决于如何`my_list[i]`检索。如果它导致一堆函数调用，它可能会产生影响（更不用说任何副作用）。

像往常一样，您应该在进行任何类型的性能重构之前进行**测量。**过早的优化......

`with`作为记录，它是原始 Pascal 设计中“好的”用途之一：

```
with my_list[i] do
begin
  something := something_else;
  [...]
end; 
```

# wordpress - 受 iframe 影响的页面加载

> ID：13632727
> 
> 赞同：0
> 
> 时间：2012-11-29T18:55:53.283
> 
> 标签：wordpress, iframe, scroll

我为我公司的客户构建了一个 WordPress 插件，其中一个选项使用`iframe`. 一位客户向我指出了一个有趣的问题。当页面加载时，它不会在顶部加载，而是在上方加载`iframe`（请参阅：[http](http://salondshayn.com/wp/staff/jude-hair-stylist-hairdresser-scottsdale/) ://salondshayn.com/wp/staff/jude-hair-stylist-hairdresser-scottsdale/ ）。同样的事情发生在我的测试站点上，在我测试过的所有浏览器中（例如，chrome 和 firefox）。

我已将其范围缩小到`iframe`，但它也可能与 WordPress 处理 iframe 的方式有关。[这个问题](https://stackoverflow.com/questions/9936259/how-to-prevent-page-from-scrolling-to-an-iframe-on-load)类似，但给出的答案是设置`display: none;`哪个不起作用，因为我需要显示 iframe 的内容。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:30:51.257

使用 scrollTo 函数并将这段 javascript 放在页面末尾。我从[Scrolling an iframe with javascript?](https://stackoverflow.com/questions/1192228/scrolling-an-iframe-with-javascript)

```
 var myIframe = document.getElementById('iframe');
    myIframe.onload = function () {
        myIframe.contentWindow.scrollTo(xcoord,ycoord);
    } 
```

如果涉及到 jQuery，你可以使用这个：

```
 <script type="text/javascript">
        $(document).ready(function () {
            window.scrollTo(0,0);
        });
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:13:24.657

我会扩展`scrollTo`@stevepowell2000 指出的问题，并建议您检查所有脚本`iframe`，很可能那里`scrollTo`发生了什么事。

我在 iframe 源中找到了这个，但[不确定](http://forum.jquery.com/topic/mobile-silentscroll)它是否相关......

```
$("#siteMasterPage").live('pageshow', function(event) {
    var currentArea = $('#hidCurrentArea').val();
    if (currentArea === "business") {             
         setTimeout(function() {
            $.mobile.silentScroll(30);
         }, 10);
     }
}); 
```

如果确实如此，那么问题将是如何防止这种情况发生，因为应用第二个滚动可能看起来很奇怪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T18:13:49.790

我最终（两周后）找到了这个问题的答案。我从 Nate 的回答中得到了它 -[页面底部的 iframe：避免自动滚动页面](https://stackoverflow.com/questions/6596668/iframe-on-the-page-bottom-avoid-automatic-scroll-of-the-page/7148477#7148477)

我用了：

```
<iframe style="position: absolute; top: -9999em; visibility: hidden;" onload="this.style.position='static'; this.style.visibility='visible';" href="..."></iframe> 
```

它似乎已经完全消除了滚动问题。

这是 Nate 的引述：

> 在这里，我们基本上是在说隐藏框架并将其垂直移动到页面上的负偏移量。当它尝试将元素聚焦在框架内时，它应该向上滚动页面，然后一旦加载，将 iframe 放回其预期位置。

# java - 在 Java 中的自定义脚本中获取距离

> ID：13632730
> 
> 赞同：0
> 
> 时间：2012-11-29T18:56:10.840
> 
> 标签：java, elasticsearch

我目前正在用 Java 为 Elasticsearch 创建一个自定义脚本来帮助评分。如果我使用 mvel 我可以说

```
doc['field_name'].distance(lat, lon) 
```

在 java 中，似乎没有（似乎可用的）距离函数可以针对文档中的字段运行。我想这没关系，因为如果我有的话，我可以使用 Haversine 距离公式。但是，如果 Elasticsearch 库中内置了一些东西，那么我宁愿使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:13:59.797

翻译成本机脚本，您的 mvel 语句将如下所示：

```
((GeoPointDocFieldData)doc().field("field_name")).distance(lat, lon) 
```

也可以使用`getLats()`and`getLons()`方法检索纬度和经度列表作为数组，并使用计算距离

```
GeoDistance.PLANE.calculate(lat1, lon1, lat2, lon2, unit) 
```

# telerik-grid - Telerik asp.net for MVC kendoui 网格

> ID：13632735
> 
> 赞同：-1
> 
> 时间：2012-11-29T18:56:36.873
> 
> 标签：telerik-grid, telerik-mvc

有人知道我如何在 Telerik 网格中为电子邮件链接提供“mail:to”选项吗？

我在网上找不到任何重定向到“mailto”链接的东西。

我试过这个，但它不起作用：

```
columns.Bound(o => o.Website).Width(300).Filterable(false).Sortable(false).ClientTemplate("<ahref='#=Website#'>#=Website#</a>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:04:05.750

如果我正确理解您的问题，我认为您只是缺少一个空格。

```
...ClientTemplate("<a href='mailto:you@you.com'>Mail me</a>"); 
```

如果需要动态创建目标，这篇文章有更多细节： [如何使用动作链接？](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/grid/faq#how-do-i-use-action-links?)

# php - 没有从 curl php 获取返回值

> ID：13632744
> 
> 赞同：1
> 
> 时间：2012-11-29T18:57:10.177
> 
> 标签：php, curl

> **可能重复：**
> [curl_exec() 总是返回 false](https://stackoverflow.com/questions/8227909/curl-exec-always-returns-false)

嗨，我是 php 新手，现在我被这件事困住了一段时间。所以我有两个拥有自己数据库的域。因此，如果用户尝试登录一个域并且在数据库中找不到他的凭据，则它会卷曲到其他域以查看他的凭据是否存在。所以匹配意味着 num_of_rows = 1，否则为 0。

在 curl 工作正常后，我可以卷曲所有内容，但我没有得到任何回报。这是我的代码：-

登录检查.php：

```
<?php
    session_start();
if(isset($_POST['Email'], $_POST['Password'])){
    $email = $_POST["Email"];   
    $password = $_POST["Password"];

        print "email received $email";
        print "<br>password received $password";

    $db_username="root";
    $db_password="root";
    $database="photobook";
    $localhost = "mysql";

    $con = mysql_connect($localhost,$db_username,$db_password);
    mysql_select_db($database,$con) or die( "Unable to select database");

    $query = "select * from photobook.users where email ='$email' and password ='$password';" ;

    $result = mysql_query($query);

    $num=mysql_num_rows($result);

    if($num == 1){
        while($row = mysql_fetch_array($result))
             {
                $_SESSION['email'] = $row['email'];

                $_SESSION['username'] = $row['username'];   
             }

        header("location: home.php");

    }

    else{

        include "Protocol.php";

                print "<br>email after protocol file include is $email";
                print "<br>password after protocol file include is $password";

        $obj=new Protocol();

        $val = $obj->loginCheck($email,$password);

                **print "<br>value of val received is $val";**

        if($val == 0){
            session_destroy();
                        print "<br>user does not exist";
            header("location: login.php");
        }
        else{
            $_SESSION['email'] = $val[0];
            $_SESSION['username'] = $val[1];
            print "<br>user exists";
            header("location: home.php");

        }   
    }

    mysql_close($con);

    }
?> 
```

第一个域上的 Protocol.php：-

```
<?php

    class Protocol{   
        function loginCheck($p_email,$p_password){

            $sid = 2;

            $msg="sid=$sid&email=$p_email&password=$p_password";

            print "<br>parameter string sent $msg";

            $ch = curl_init();
            curl_setopt($ch, CURLOPT_URL,"http://www.snapreveal.com/PhotoBook/src/Protocol.php");
            curl_setopt($ch, CURLOPT_POST, TRUE);
            curl_setopt($ch, CURLOPT_POSTFIELDS, $msg);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
            $p_result = curl_exec($ch);
            curl_close($ch);
            if ($p_result === FALSE) {
                  die("Curl error: " . curl_error($ch));
            }
            return $p_result;

        }

    } //end of protocol class
?> 
```

第二个域上的 Protocol.php：-

```
<?php

    class Protocol{

        function loginCheckResponse($p_email,$p_password){

            print "<br>inside second domain loginCheckResponse";
            print "<br>email inside second domain loginCheckResponse $p_email";
            print "<br>password inside second domain loginCheckResponse $p_password";

            $db_username="root";
            $db_password="root";
            $database="photobook";
            $localhost = "mysql";

            $con = mysql_connect($localhost,$db_username,$db_password);
            mysql_select_db($database,$con) or die( "Unable to select database");

            $query = "select * from photobook.users where email ='$p_email' and password ='$p_password';" ;

            $result = mysql_query($query);

            $p_num=mysql_num_rows($result);

            print "<br>num found inside teja loginCheckResponse $p_num";

            mysql_close($con);

            if($p_num == 1){
              while($row = mysql_fetch_array($result))
             {

                                $u_email = $row['email'];

                                $u_username = $row['username'];

                                $res = array($u_email,$u_username);
                                print "<br>inside second domain logincheck, after match values in res array are, email $res[0],username $res[1]";
                                print "<br>value in res<br>";
                                print $res;
                                return $res;
             }
            }
            else{
              return 0;
            }

        }

    } //end of protocol class

    $pobj=new Protocol();

    $sid = $_POST['sid'];

    $p_email = $_POST['email'];

    $p_password = $_POST['password'];

    if($_POST['sid'] == 2 ){
        $pobj->loginCheckResponse($p_email,$p_password);

        }
?> 
```

打印输出：

```
email received max@gmail.com
password received max
email after protocol file include is max@gmail.com
password after protocol file include is max
parameter string sent sid=2&email=max@gmail.com&password=max
value of val received is 
inside second domain loginCheckResponse
email inside second domain loginCheckResponse max@gmail.com
password inside second domain loginCheckResponse max
num found inside second domain loginCheckResponse 1
inside second domain logincheck, after match values in res array are, email max@gmail.com,username Max
value in res
Array
user does not exist 
```

所以“收到的 val 的值是”这一行应该在 curl 返回值之后打印，但在此之前打印。而且也没有收到任何价值。有什么想法为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:01:17.113

curl 在失败时返回布尔值 FALSE，它将打印为空字符串。在处理远程服务时，您永远不应该假设成功，并始终检查错误：

```
 $p_result = curl_exec($ch);
    if ($p_result === FALSE) {
        die("Curl error: " . curl_error($ch));
    }
    curl_close($ch); 
```

注意`===`严格相等测试的使用。这是区分真正的布尔 false 和自然类型转换为 false 的结果（空字符串`0`，等等）所必需的。

# c# - 从带有双破折号的 XML 文件中删除注释 --

> ID：13632747
> 
> 赞同：-1
> 
> 时间：2012-11-29T18:57:29.427
> 
> 标签：c#, xml

如何`--`从 xml 文件中删除包含双破折号 ( ) 的无效 xml 注释？

我正在尝试加载 xml 文件，但它失败了。这些注释使 xml 无效。xml 来自供应商。

我尝试根据其他帖子的方法删除这些，但没有成功。这是一个xml的例子：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!--MAIN VARIABLES-->
<content type="screwed">
<!--KEEP 19-39 -- SEE HELP.TXT AND THE VIDEO TUTORIALS FOR MORE INFO -->
<!--REGULAR/NON-Regular EXAMPLE --><SomeTag somefile="test.txt3" Name="test"/>
<!-- -->
</content> 
```

我尝试了以下方法但没有成功：

```
string xmlDocFile = "c:\server\test.xml";

XmlReaderSettings readerSettings = new XmlReaderSettings();
readerSettings.IgnoreComments = true;
readerSettings.ProhibitDtd = false;
readerSettings.ValidationType = ValidationType.DTD;
XmlReader reader = XmlReader.Create(xmlDocFile, readerSettings);
XmlDocument myXmlDoc = new XmlDocument();
myXmlDoc.Load(reader);
myXmlDoc.Save(xmlDocFile); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:10:30.757

使用前`XmlReader`，解析xml文件并使用正则表达式过滤评论。

```
// using System.Text.RegularExpressions;
System.IO.StreamReader file= new System.IO.StreamReader(xmlDocFile);
string validXml = Regex.Replace(file.ReadToEnd(),"<!--.*?-->","");

XmlReader reader = XmlReader.Create(validXml); 
```

# java - Java，两个对象，object1 = object2 = class/type ...看不懂

> ID：13632750
> 
> 赞同：4
> 
> 时间：2012-11-29T18:57:47.743
> 
> 标签：java, class, object, instance

我有两个实例变量，头和尾。在代码中有一行：

```
head = tail = new Node<E>(); 
```

这是否意味着 Node 类有两个实例，head 和 tail？我在这里很困惑。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-29T18:58:42.813

它只是意味着：

```
tail = new Node<E>();
head = tail; 
```

所以有 2 个引用 (`head`和`tail`) 指向同一个`Node<E>`实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T18:58:51.423

这意味着有两个对 ONE Object 的引用`Node`。

该行`tail = new Node<E>();`实际上返回一个等于分配值的值（在本例中为对象引用）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T18:58:57.647

不，只有一个created*实例*，`Node<E>`但两者都`head`引用`tail`它，所以你有两个指向同一个对象的引用变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T18:58:40.393

只有一个实例`Node`。`head`和引用都`tail`指向同一个实例。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-29T18:59:15.390

不，当然不是。

这是此代码中按顺序发生的事情。

1.  'new' 用于创建 Node 类的实例，也就是对象
2.  对该实例的引用存储在尾部引用中
3.  对此实例的引用存储在头引用中。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-29T18:58:45.813

*2个*引用`head`和`tail`都分配给.*`Node`*

 ** * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-29T18:59:38.717

只创建一个对象，head 和 tail 都引用同一个对象。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-02T13:17:06.680

```
object1=object2 ; 
```

这里 Object1 一个对其他的引用意味着简单地 object2 将所有地址复制到 object1 引用

只需将 object2 复制到 object1 中*

# jquery - jquery：使用“字母”作为 id

> ID：13632756
> 
> 赞同：2
> 
> 时间：2012-11-29T18:58:15.580
> 
> 标签：jquery, jquery-selectors

我正在构建菜单，该菜单将显示字母列表，然后根据用户选择的内容加载正确的页面。我可以加载一个字母，但我怎么能使用“字母”作为 id，所以我不需要为每个字母复制相同的 jquery 代码。

```
<div id="idshow"><a id="hidelinks" href="#">Hide</a> <br /><br /></div>

<div id="letter_a"><a id="success_a" href="#">A Show</a></div>
<div id="letter_b"><a id="success_b" href="#">B Show</a></div>
<div id="letter_c"><a id="success_c" href="#">C Show</a></div>

<div id="loadpage"></div>

<script>
$("#idshow").hide();

$("#success_a").click(function () {

        $("#idshow").show();
        $("#letter").hide();

        $("#loadpage").load("letter_a.html", function(response, status, xhr) {
                if (status == "error") {var msg = "Sorry but there was an error: ";$("#error").html(msg + xhr.status + " " + xhr.statusText);}});
        });

        $('#hidelinks').click(function() {
                $('#letter_content').slideUp();
                $("#idshow").hide();
                $("#letter").show();
});

</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T18:59:32.357

你可以使用这个：

```
 $('[id^="success"]').click(function () {
     // the letter is the last character of the id
     var letter = this.id.slice(-1); 
     ...
     $("#loadpage").load("letter_"+letter+".html" ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:09:37.320

这就是我要做的，使用数据属性：

```
<div id="letters">
    <div><a data-letter="a" href="#">A Show</a></div>
    <div><a data-letter="b" href="#">B Show</a></div>
    <div><a data-letter="c" href="#">C Show</a></div>
</div> 
```

JS：

```
$('.letters').on('click','a[data-letter]',function() {
    var selectedLetter = $(this).data('letter');
    //rest of code here
}); 
```

`selectedLetter`您可以访问var中选定的字母。这也比其他一些解决方案更有效，因为它只附加一个事件处理程序，而不是为每个字母附加一个单独的事件处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:07:26.167

我相信这就是您正在寻找的（减去 alert(...) 部分，这只是为了展示）：

```
$("#idshow").hide();

$(".letterLink").click(function () {

        $("#idshow").show();
        $("#letter").hide();

var url = $(this).attr('id') + ".html";
 alert("loading " + url);   

        $("#loadpage").load(url, function(response, status, xhr) {
                if (status == "error") {
                    var msg = "Sorry but there was an error: ";
                    $("#error").html(msg + xhr.status + " " + xhr.statusText);
                }});
        $('#hidelinks').click(function() {
                $('#letter_content').slideUp();
                $("#idshow").hide();
                $("#letter").show();
        });
}); 
```

[这是小提琴](http://jsfiddle.net/TNCodeMonkey/2YP2A/)

```
​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T19:02:15.647

我建议使用字母作为一个类。

然后你可以做一个选择

```
$(".letters").click(function(){
   // You then access the clicked object via $(this).

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T19:00:36.097

给字母一个类（例如.letter）可能是一个解决方案。您可以通过隐藏 .letter 来隐藏所有字母，并通过专门针对其 id 来显示一个。因此函数应该是`$('.letter').click(function(){});`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T19:01:28.750

给每个人一个没有样式的类：

```
<div id="letter_a"><a id="success_a" class="letters" href="#">A Show</a></div>
<div id="letter_b"><a id="success_b" class="letters" href="#">B Show</a></div>
<div id="letter_c"><a id="success_c" class="letters" href="#">C Show</a></div>

$('.letter').click(function(event) {
   // ...
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-29T19:01:32.137

添加一个[类](http://api.jquery.com/class-selector/)，添加一个数据[属性](http://api.jquery.com/attribute-contains-prefix-selector/)，从容器中选择所有子项......

~~只选择所有以字符串开头的 id 是不可能的！~~ 那么可以只选择id的一部分。请参阅dystroy的答案....

代码：

```
$('[id^="success"]').each(function() {
    debugger;
    $('body').append($(this).text());
    });​ 
```

小提琴示例：http: [//jsfiddle.net/TwDmm/2/](http://jsfiddle.net/TwDmm/2/)

# yii - 提交 _form 时如何在母版页中调用创建操作？

> ID：13632759
> 
> 赞同：0
> 
> 时间：2012-11-29T18:58:23.577
> 
> 标签：yii

例如，

如果我们创建一个名为**BED的母版页**

在为 master 创建新记录时，我们使用右侧的 create bed 链接创建它（其中包含控制器 URL bed/create）。

但之后输入所有字段，然后单击保存按钮（在_form中）。

我们没有在保存按钮中提到任何控制器 url，而是它如何设法找到床/创建以同样的方式在更新时如果我们单击更新链接，它会使用 id 定位更新操作，但在再次保存页面时它如何设法找到床/再次创建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:53:03.627

默认情况下，表单的操作是相同的 url（如果您在 '/index.php?r=bed/create' 处创建操作，则表单的操作已设置`action="/index.php?r=bed/create"`）。但如果您需要更改它 - 只需将其添加到 ActiveForm 的属性中。例如对于床/更新视图：

```
$form = $this->beginWidget('CActiveForm', array(
    'id'=>'user-form',
    'action'=>'/index.php?r=bed/create'
)); 
```

# visual-studio-2010 - 如何解决本地和搁置集之间的更改

> ID：13632765
> 
> 赞同：6
> 
> 时间：2012-11-29T18:58:36.443
> 
> 标签：visual-studio-2010, version-control, tfs

我的机器上有本地更改。

我的同事搁置了与我的更改重叠的文件的更改。

我想拉我同事的搁置并解决冲突。

但是，当我尝试取消搁置时，我收到一条错误消息：

" `The item ... has an incompatible pending change.`"

如何合并同事的更改？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T13:39:36.263

前几天我遇到了这个问题，一位同事给了我这个非常简单的提示。

使用 Visual Studio Power Tools 有一种简单的方法可以做到这一点。`tfpt unshelve`您可以使用Visual Studio 命令提示符中的命令执行取消搁置和合并。确保您的活动目录是映射到本地工作区的目录，否则您可能会看到“无法识别工作区”。当您运行该命令时，您将看到一个对话框来选择您的搁置集。之后，您将收到一个额外的对话框，允许您合并冲突的文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T14:32:57.350

您首先需要撤消您在搁置的变更集中的文件中所做的任何更改。然后，您可以取消搁置并将更改放回原处。

另一种方法是检查您的更改，然后取消搁置。或者反过来，首先检查搁置的更改，然后获取必须手动处理任何冲突的最新版本。

# properties - NullValueHandling 必须是 JsonFormatter 属性的可选参数

> ID：13632777
> 
> 赞同：-1
> 
> 时间：2012-11-29T18:59:11.593
> 
> 标签：properties, null, breeze

希望开发团队不会错过我的信息。NullValueHandling 必须是 JsonFormatter 属性的可选参数，因为在很多情况下，客户端需要的对象属性与其值无关。我个人在试图确定为什么我的对象没有一半的属性时遇到了一些麻烦。

顺便说一下，限制 DbConext 和实体命名空间以使实体在客户端可观察也不好。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:06:07.783

Breeze 当前将 NullValueHandling 设置为“忽略”，以便通过不发送任何“空”值来最小化有效负载。我们认为这不会是一个问题，因为 json 序列化对象在客户端被具体化为“微风”实体，并且微风有元数据来确定每个实体的有效属性是什么。

实际向客户端发送“空值”的用例是什么？如果我们有一个好的用例，这是一个相对容易的增强功能。唯一想到的是从服务器查询不存在元数据的匿名对象。这是你遇到的吗？

# java - 使用 Play 2.0.x 进行永久重定向

> ID：13632778
> 
> 赞同：3
> 
> 时间：2012-11-29T18:59:14.310
> 
> 标签：java, scala, playframework, playframework-2.0

我想知道如何在 Play framework 2.0.x 中为子域执行永久重定向 301。例如：www.example.com/* 重定向到 example.com/*。以前有人试过吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T22:06:41.977

[Global 对象](http://www.playframework.org/documentation/2.0.4/JavaGlobal)将允许您[拦截请求](http://www.playframework.org/documentation/2.0.4/JavaInterceptors)。出于显而易见的原因，您应该使用 GET 请求（即出于 SEO 目的）执行此操作，但其他请求（如 POST、PUT 等）应该从一开始就在您的视图中正确创建。

另一方面，如果它只是一些用于为生活生产提供常见 HTML 页面的应用程序，请考虑在其前面使用一些 HTTP 服务器——那么你可以通过一些重写规则来解决问题。

```
import play.GlobalSettings;
import play.mvc.Action;
import play.mvc.Http;
import play.mvc.Result;

import java.lang.reflect.Method;

public class Global extends GlobalSettings {

    @Override
    public Action onRequest(final Http.Request request, Method method) {
        if ("GET".equals(request.method()) && "www.example.com".equals(request.host())) {
            return new Action.Simple() {
                public Result call(Http.Context ctx) throws Throwable {
                    return movedPermanently("http://example.com" + request.path());
                }
            };
        }
        return super.onRequest(request, method);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T20:09:33.987

在 conf/routes 文件中

```
GET /      controllers.Application.index(path = "")
GET /*path controllers.Application.index(path) 
```

在应用程序/控制器/Application.scala

```
object Application extends Controller {
  def index(path: String) = Action {
    Redirect("http://example.com/" + path, status = MOVED_PERMANENTLY)
  }
} 
```

# flyway - 基本目录和 schema_version

> ID：13632779
> 
> 赞同：0
> 
> 时间：2012-11-29T18:59:14.130
> 
> 标签：flyway

我刚刚测试了命令行工具，并且能够按预期迁移我的数据库架构更改（DDL 脚本）。但是我不得不将所有脚本移到 sql 目录下。

有没有办法将 flyway 指向我的真实脚本所在的目录（git 或 svn 存储库）？看起来 flyway.locations 仅适用于相对路径。

schema_version 表名和列名都是在我的数据库（Oracle）中以小写形式创建的。绝大多数使用 Oracle 的人都习惯于大写对象名和列名（Oracle 中的默认设置）。我在配置文件中找到了一个属性来设置我自己的表名。是否有任何方法可以让列名使用大写字母？

我在测试运行后检查了插入 version_schema 的数据。除了“脚本”列的第一个字符似乎被删除之外，一切看起来都不错。

我的前缀是“db_”。这是我在 schema_version 中看到的，

SQL> 从 schema_version 中选择“脚本”；

脚本

* * *

b_1_0__test10.sql

b_1_1__test10.sql

b_1_0_1__test10.sql

数据库/db_2012_11_20__query.sql

<< 飞路初始化 >>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:04:10.057

这里有很多问题（如果你把它们分开会更容易）。我会尽力回答他们：

1.  目前不支持。请参阅[https://github.com/flyway/flyway/issues/108](https://github.com/flyway/flyway/issues/108)。符号链接可用作解决方法。

2.  不，列名没有配置属性。schema_version 表是 Flyway 私有的，不适合外部使用。

3.  这听起来像一个错误。请提交包含您的配置（OS + 版本、DB + 版本、Flyway 版本、配置文件内容）和重现的确切步骤的问题。

# javascript - 在 D3.js 中反转热图上的 y 轴

> ID：13632781
> 
> 赞同：1
> 
> 时间：2012-11-29T18:59:21.283
> 
> 标签：javascript, d3.js, visualization

查看在 D3.js 中完成的热图的这个[jsFiddle 。](http://jsfiddle.net/qrBBS/)

默认情况下，y 轴自上而下。[如本次对话中所述，](https://groups.google.com/forum/?fromgroups=#!topic/d3-js/xVTaq9vfyIk)我必须在折线图上反转 y 轴。

但是，我不太确定如何在这里进行所需的反转。有任何想法吗？

我的代码的相关部分（需要应用反转）如下：

```
var xGrid = d3.scale.linear()
  .range([0, w - 2])
  .domain([0, data.influencer_range.length]);

var yGrid = d3.scale.linear()
  .range([0, h - 2])
  .domain([0, data.omm_range.length]);

var xOrdinal = d3.scale.ordinal()
  .domain(data.influencer_range)
  .rangeBands([0, data.influencer_range.length]);

var yOrdinal = d3.scale.ordinal()
  .domain(data.omm_range).
  rangeBands([0, data.omm_range.length]);

var x = function(point) {
  return point * xGrid(1);
};

var y = function(point) {
  return point * yGrid(1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:42:44.530

首先，按照 Google 线程的指示，交换两个 y 范围值：`.range([h - 2, 0])`

同样，您的 yOrdinal 需要反转：`.rangeBands([data.omm_range.length, 0])`

最后，反转打破了你对行高的计算（`yGrid(1)`有点硬编码，但是哦，好吧），所以你也需要调整它：`return point * yGrid(2)`

你有它：http: [//jsfiddle.net/qrBBS/2/](http://jsfiddle.net/qrBBS/2/)

# gcc - 要求 GCC 在 PUSH 之前 MOV 寄存器中的参数

> ID：13632790
> 
> 赞同：0
> 
> 时间：2012-11-29T18:59:53.917
> 
> 标签：gcc, push, parameter-passing, calling-convention, 16-bit

我正在用 C++ 编写一些 16 位（双关语）代码，用 G++ 编译它。更多关于我在这里编译的上下文：[强制 GCC 在调用函数之前将参数推送到堆栈上（使用 PUSH 指令）](https://stackoverflow.com/questions/13618009/force-gcc-to-push-arguments-on-the-stack-before-calling-function-using-push-ins)

我现在面临的问题是尝试链接我的目标文件时抛出的错误 LD。具体来说，这是一个代码情况：

```
asm(".code16gcc\n");
void f(const char*);
int main(){
    f("A constant string put in section .rodata at link-time");
}
void f(const char* s){ } 
```

在汇编代码中，使用 -S 和 -mno-accumulate-outgoing-args 选项，G++ 会将其转换为（仅编写程序集的相关部分）：

```
/APP
    .code16gcc

    .section    .rodata
.LC0:
    .string "A constant string put in section .rodata at link-time"
main:
.LFB0:
    /* here would be main's prologue, not put because it ain't relevant */

    // THIS IS THE CALL f("A constant string put in section .rodata at link-time");
    push    OFFSET FLAT:.LC0
    call    _Z1fPKc 
```

这个应用程序是我正在开发的操作系统的一部分。具体来说，引导加载程序在 BIOS 内存中的地址 0x70D00 加载此代码。这使得 .rodata 的地址大于 0x70D00。由于 GCC 没有对纯 16 位代码的内置支持，它不知道执行“push OFFSET FLAT:.LC0”将意味着在纯 16 位情况下推送一个字。这意味着，如果 .rodata 的地址是 - 比如说 - 0x70DAA，那么指令将是“推送 0x70DAA”。这就是链接器抛出错误的原因：

在函数`main': relocation truncated to fit: R_386_16 against`.rodata'

-- 因为链接器知道 0x70DAA 不适合一个字。解决问题的方法是要求 GCC 在推送它们之前将参数移动到寄存器中。就像是：

```
/APP
    .code16gcc

    .section    .rodata
.LC0:
    .string "A constant string put in section .rodata at link-time"
main:
.LFB0:
    /* here would be main's prologue, not put because it ain't relevant */

    // THIS IS THE CALL f("A constant string put in section .rodata at link-time"); , now using EAX before pushing the string literal's offset in .rodata
    mov eax, OFFSET FLAT:.LC0 // move in eax instead
    push    eax // and push eax!
    call    _Z1fPKc 
```

这就是[MSVC](https://stackoverflow.com/questions/13124501/why-does-the-vc-compiler-movpush-args-instead-of-just-push-them-x86)在某些情况下所做的优化。我想知道是否有一种方法可以强制 GCC 做同样的事情......一个显然可行的替代方法是将**属性**((regparm(N))) 与函数 f 相关联。但这并不是一个很好的选择，因为它并没有真正将寄存器推入堆栈，而不是直接在 f 中使用它们 - 并且不能对任何函数执行此操作。您可以通过简短的 google 搜索了解更多信息，如果需要，我将在此处准确发布此选项的作用以及为什么它不会真正起作用，但这个问题帖子开始变得太长。

简而言之，我的问题是：我可以要求 GCC 将传递给函数的参数移动到寄存器中，然后再推送它们吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:55:37.153

我已经想到了解决这个问题的方法，尽管我更喜欢 MOV-to-REG-and-PUSH 之类的方法。我想到的是，这只发生在编译器可以在编译时计算的地址上，比如放在.rodata中的字符串的地址。

知道了这一点，我在 main 中创建了一个局部变量，并将其用作传递的参数，如下所示：

```
asm(".code16gcc\n");
void f(const char*);
int main(){
    const char* s = "A constant string put in section .rodata at link-time";
    // Now use 's' as the argument instead of the string literal
    f(s);
}
void f(const char* s){ } 
```

这有效地将生成的汇编代码更改为：

```
/APP
    .code16gcc

    .section    .rodata
.LC0:
    .string "A constant string put in section .rodata at link-time"
main:
.LFB0:
    /* here would be main's prologue, not put because it ain't relevant */

    // THIS IS THE CALL f(s);
    mov DWORD PTR [ebp-12], OFFSET FLAT:.LC0 // now specifically loaded in the DWORD 's'
    sub esp, 12
    push DWORD PTR [ebp-12]
    call    _Z1fPKc 
```

可以看出，现在改为使用局部变量，字符串文字（在 .rodata 中）的地址专门以 DWORD 格式传输。这有效地避免了链接器错误，尽管它使用了一些可忽略的额外堆栈空间。

# matlab - matlab中的曲线拟合

> ID：13632793
> 
> 赞同：6
> 
> 时间：2012-11-29T19:00:01.970
> 
> 标签：matlab, octave, curve-fitting

例如我有5个这样的点，

```
(1,1) (2,-1) (3,2) (4,-2) (5,2) 
```

现在，

*   1）我想要一个函数来在 Matlab 中插值这些点。
*   2）我想绘制这个函数。
*   3) 从输入中读取一个数字并将 F(x) 写入输出。

我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T19:11:57.543

要将多项式拟合到给定的数据点，您可以使用`polyfit(x,y,n)`where`x`是带有点的向量`x`，`y`是带有点的向量 y 并且`n`是多项式的次数。请参阅[Mathworks polyfit 文档中的示例](http://www.mathworks.se/help/matlab/ref/polyfit.html)

在你的情况下：

```
x=[1,2,3,4,5];
y=[1,-1,-2,-2,2];
n=3;
p = polyfit(x,y,n) 
```

然后绘制，取自示例

```
f = polyval(p,x);
plot(x,y,'o',x,f,'-') 
```

或者，制作一个更漂亮的多项式图（而不是上面的图）

```
xx=0:0.1:5;
yy = erf(xx);
f = polyval(p,xx);
plot(x,y,'o',xx,f,'-') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T19:19:40.973

如果您不确定什么是合适的拟合并想尝试不同的拟合，请使用曲线拟合工具箱`cftool`。您需要使用`x`和`y`坐标创建两个向量，然后您可以使用`cftool`.

另一种选择是使用`interp1`函数进行插值。有关详细信息，请参阅[matlab 文档。](http://www.mathworks.com/help/matlab/ref/interp1.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T19:10:14.653

如果您想要多项式插值，请查看该`polyfit`函数。它通常用于最小二乘多项式近似，但如果您选择度数+1 与您要拟合的点数相同，它仍然适用于您。对于您可能知道的插值，插值的度数等于您拥有的点数 -1。因此，对于上面的示例点，您需要一个 4 次多项式。这是mathworks文档的链接

[http://www.mathworks.co.uk/help/matlab/ref/polyfit.html](http://www.mathworks.co.uk/help/matlab/ref/polyfit.html)

如果将点拆分为各自 x 和 y 坐标的 2 个向量，则可以简单地在向量中获得插值多项式系数，`b`其中

```
 b = polyfit(x,y,4) 
```

并根据您上面的数据，您的 x 和 y 向量是

```
x = [1 2 3 4 5];
y = [1 -1 2 -2 2] 
```

# wpf - 将组合框选定值绑定到应用程序设置

> ID：13632794
> 
> 赞同：1
> 
> 时间：2012-11-29T19:00:04.000
> 
> 标签：wpf, data-binding, properties, combobox, application-settings

像这样映射应用程序属性：

```
<Application.Resources>
    <properties:Settings x:Key="Settings" />
</Application.Resources> 
```

目标是将字体大小设置**MainWindowFontSize** (int) 绑定到组合框上的选定值：

```
<ComboBox 
  SelectedValuePath="Content"
  SelectedValue="{Binding Default.MainWindowFontSize, Source={StaticResource Settings}}">
<ComboBoxItem>8</ComboBoxItem>
...
<ComboBoxItem>48</ComboBoxItem>
</ComboBox> 
```

这样做的问题是它只在一个方向上起作用，从设置到组合框，但组合中的任何选择都不会回到设置。当我在模型中使用常规属性作为字体大小时，一切似乎都正常......

关于如何使绑定以两种方式使用设置的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T05:50:03.190

它看起来是 .NET 4.5 中的新东西。我发现如果你在后面的代码中创建绑定就可以了。像这样：

```
 public MainWindow()
    {
        InitializeComponent();
        var binding = new Binding("Delay");
        binding.Source = Settings.Default;
        binding.Mode = BindingMode.TwoWay;
        BindingOperations.SetBinding(this.Combo, ComboBox.SelectedValueProperty, binding);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:35:35.313

找到了这个解决方法：

```
<ComboBox ...  SelectionChanged="MainWndFontSizeSelectionChanged" ...> 
```

事件处理程序：

```
private void MainWndFontSizeSelectionChanged(object sender, SelectionChangedEventArgs e)
{
    var cb = (ComboBox)sender;
    int newSize = 0;
    if (Int32.TryParse(cb.SelectedValue.ToString(), out newSize) == true)
    {
        WpfApplication1.Properties.Settings.Default.MainWindowFontSize = newSize;
    }
} 
```

丑陋，但有效...希望提出更好的解决方案...

这篇文章提供了对该问题的更多见解：[LINK](https://stackoverflow.com/questions/11468502/twoway-binding-of-a-combobox-to-a-static-property)

它在 .NET4.5 中的工作方式与以前的版本不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T19:13:38.687

您是否尝试将绑定的模式设置为双向？

```
<ComboBox 
  SelectedValuePath="Content"
  SelectedValue="{Binding Default.MainWindowFontSize, Source={StaticResource Settings}, Mode=TwoWay}"> 
```

您也可以尝试 UpdateSourceTrigger：

```
 <ComboBox 
  SelectedValuePath="Content"
  SelectedValue="{Binding Default.MainWindowFontSize, Source={StaticResource Settings}, Mode=TwoWay}, UpdateSourceTrigger=PropertyChanged"> 
```

# vba - MS Word 2010。如何访问存储在我正在处理的文档之外的文档中的宏？

> ID：13632795
> 
> 赞同：1
> 
> 时间：2012-11-29T19:00:06.097
> 
> 标签：vba, ms-word

我在 Word VBA 中编写了一个宏 (Foo)，我将使用它来操作其他 Word 文档中的数据。
我已将 Foo 存储在其自己的文件 (MyMacro.docm) 中，而不是 Normal.dotm 文件中。
我发现我无法从我希望操作的 Word 数据文件（例如 Datafile.docx）中访问我的宏 Foo，即使选择了“所有活动模板和文档中的宏”。

是否可以从 Datafile.docx 访问 Foo，如果可以，我需要更改哪些选项？

谢谢，弗雷达

* * *

这就是我在“Datafile.docx”文件中的数据上运行 Foo 所做的：
1\. 打开 Word
2\. 打开 MyMacro.docm，启用宏
3\. 确认“Foo”可从 MyMacro.docm 运行 - 它是
4\. 打开 Datafile.docx
5\. 打开可在 Datafile.docx 上运行的宏列表 - Foo 不能在 Datafile.docx 上运行
6\. 按 Alt-F11 从 Datafile.docx 访问 VBA 编辑器 - Foo 显然是显示在 MyMacro.docm 文档下列出的模块中。

我尝试将 Datafile 更改为启用宏的文档（Datafile.docm），但并没有解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T19:43:20.857

您可以将“MyMacro.docm”加载为全局模板吗？在 Word 中，单击开发人员 -> 文档模板 -> 添加 -> “MyMacro.docm”。该宏将在宏列表（按 Alt+F8 以查看）或 VBA 代码中可用：

```
Application.Run "Foo" 
```

# ms-access - 如何在 MS Access 2010 的查询中使用条件添加计算列

> ID：13632797
> 
> 赞同：1
> 
> 时间：2012-11-29T19:00:11.010
> 
> 标签：ms-access, ms-access-2007, ms-access-2010

我有两个表，我正在生成一个查询。我的查询中有字段类型是/否的列。这些基本上是确定一个人种族的列。用户以是/否输入各种种族的信息。我想要查询中的另一个计算列，它检查所有其他竞赛列并计算其中的值。

我必须检查列中的值的一些条件例如：

1）如果选择了西班牙裔，新的列应该说西班牙裔（无论选择什么其他选项。这就像一张王牌）

2) 如果选择了多个，则新列条目应显示“多”

3）如果没有选择任何选项，它应该说“未知”

4）如果恰好选择了其中一个，则应显示该种族

谁能帮我这个？我是 Access 新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:16:32.470

我无法为您编写代码，但我可以为您指明正确的方向。您要做的是进行上面解释的所有测试并将它们以编码格式放置：

```
iif ( condition, value_if_true, value_if_false ) 
```

由于您有很多可能的输出，我会使用类似 a 的东西`Case Statement`，您可以在其中测试所有可能性。

如果您需要有关如何对两种类型的语句 (和)进行编码的任何信息，请[点击此链接。](http://www.techonthenet.com/access/functions/advanced/case.php) 一旦您尝试过这样的事情，如果您在此过程中遇到问题，您可以返回一个特定的问题。`iif``case`

祝你的数据库好运。

# ios - 开发中的新 iPad 应用程序应支持哪个所有 iOS 版本？

> ID：13632798
> 
> 赞同：-2
> 
> 时间：2012-11-29T19:00:12.453
> 
> 标签：ios, ios5, ios6

这可能是一个没有正确答案的主观问题，但我在这里寻求社区的输入，因为这是我们的第一个应用程序，输入对我们的开发团队很重要。

考虑到几个应用程序（http://david-smith.org/iosversionstats/）的 iOS 版本统计数据，75% 的 usrebase 已经迁移到 iOS 6。随着 iOS6 中发生的平台更改数量，我如果一个新的 iPad 应用程序（目标受众是设计师和创意专业人士）应该考虑完全放弃 ios5，或者这些数据不能被视为一般更新趋势，是否正在寻找输入？

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:12:46.437

我很确定我的所有设备都没有被您提供链接的页面跟踪。我认为，如果用于收集数据的应用程序与您的应用程序针对的是同一细分市场，那么统计数据对您来说可能是可靠的，我理解情况并非如此。

也就是说，我看到的 iPad 应用程序仅支持 iOS 6 的主要缺陷是您排除了所有不再支持的 iPad 1 设备。周围仍然有很多，所以我会努力至少支持 iOS 5，甚至可能通过削减一些只需要在该设备（iOS 5）上安装 iOS 6 的“高级”功能。

只是我的2美分。

我的理念是尝试并支持大多数 iOS 版本，直到我确实需要在我的应用程序中提供仅在较新版本上可用的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:13:53.257

这在我看来很简单。如果您想使用 ios 6 功能（例如集合视图），请针对 ios 6。如果您不使用任何 ios 6 特定功能，您不妨针对 5.0 或更早版本以扩大您的受众。一般来说，iOS 用户升级到新的操作系统版本非常迅速。也就是说，即使您使用 ios 6 功能，您也可以检查设备并将早期 API 用于早期操作系统版本。

# python - 如何强制 pyplot 显示轴限制

> ID：13632800
> 
> 赞同：3
> 
> 时间：2012-11-29T19:00:15.057
> 
> 标签：python, matplotlib, axes

我的 x 和 y 轴通常分别在 0 到 300 和 0 到 60 之间。

但是，我只想显示来自 的值`5 <= x <= 300`，所以我这样做了

```
ax.set_xlim(left=5) 
```

之后，图表确实从 5 开始，但没有任何迹象表明这一点。我在 x 轴上的第一个刻度是 50，然后是 100、150……y 轴上有标记为 0、20、40、60 的刻度，这很容易误导观众认为 0 的下限y 轴也表示 x 轴的下限 0。

如何强制 pyplot 在 x=5 处显示一个额外的刻度，以便明确告知查看者两个轴的下限都不相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:03:52.950

您可以使用 xticks 设置 x 轴的刻度。这是一个 ipython 会话：

```
In [18]: l = [random.randint(0, 10) for i in range(300)]

In [19]: plot(l)
Out[19]: [<matplotlib.lines.Line2D at 0x9241f60>]

In [20]: plt.xlim(xmin=5)       # I set to start at 5\. No label is draw
Out[20]: (5, 300.0)

In [21]: plt.xticks(arange(5, 301, 50))  # this makes the first xtick at left to be 5
                                         # note the max range is 301, otherwise you will never
                                         # get 300 even if you set the appropriate step 
```

请注意，现在，在 xaxis 的右侧，没有标签。最后一个标签是 255（与左侧相同的问题）。您可以通过修改 arange 的步长来获取此标签，以`max - min / step`使其成为（或非常接近）整数值（刻度数）。

这使得它（虽然十进制数字很难看）：

```
In [38]: plt.xticks(arange(5, 301, 29.5)) 
```

# c++ - 在排序数组中找到 a[i] = i 的最有效方法是什么？

> ID：13632801
> 
> 赞同：6
> 
> 时间：2012-11-29T19:00:21.247
> 
> 标签：c++, c, algorithm, search

给定一个数组`a[]`，确定至少一个元素是否`i`满足条件的最有效方法是`a[i] == i`什么？

数组中的所有元素都已排序且不同，但它们不一定是整数类型（即它们可能是浮点类型）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T23:27:46.713

一些人声称“排序”、“不同”和“不一定是整数”的相关性。事实上，正确选择有效的算法来解决这个问题取决于这些特征。如果我们可以知道数组中的值既是不同的又是整数的，那么更有效的算法将是可能的，而如果这些值可能是非不同的，无论它们是否是整数，则需要一种效率较低的算法。当然，如果数组还没有排序，你可以先排序（平均复杂度 O(n log n)），然后使用更有效的预排序算法（即排序数组），但在未排序的在这种情况下，简单地将数组保持未排序并直接比较线性时间（O（n））中的值会更有效。请注意，无论选择哪种算法，最佳情况下的性能都是 O(1)（当检查的第一个元素包含其索引值时）；在执行任何算法期间的任何时候，我们都可能遇到一个元素`a[i] == i`此时我们返回 true；在这个问题中，就算法性能而言，真正重要的是我们可以多快排除所有元素并声明没有这样的元素`a[i]`where `a[i] == i`。

问题没有说明 的排序顺序`a[]`，这是一个非常关键的缺失信息。如果它是递增的，最坏情况的复杂度将始终为 O(n)，我们无法做任何事情来使最坏情况的复杂度更好。但是如果排序顺序是降序的，即使是最坏情况的复杂度也是 O(log n)：因为数组中的值是不同的并且是降序的，所以只有一个可能的索引`a[i]`可以 equal `i`，基本上你所要做的就是二分查找找到交叉点（升序索引值与降序元素值交叉的地方，如果甚至有这样的交叉），并确定是否`a[c] == c`在交叉点索引值`c`. 由于这很简单，我将继续假设排序顺序是升序的。有趣的是，如果元素是整数，即使在升序情况下也会出现类似的“类似交叉”的情况（尽管在升序情况下可能会有不止一个`a[i] == i`匹配），所以如果元素是整数，二分查找也将是适用于升序情况，在这种情况下，即使是最坏情况的性能也是 O(log n) （请参阅[面试问题 - 在排序数组 X 中搜索索引 i 使得 X[i] = i](https://stackoverflow.com/questions/4172580/interview-question-search-in-sorted-array-x-for-index-i-such-that-xi-i)）。但在这个版本的问题中，我们并没有得到那种奢侈。

以下是我们可能解决此问题的方法：

从第一个元素 开始`a[0]`。如果它的值为`== 0`，则您已找到满足的元素，`a[i] == i`因此返回 true。如果其值为`< 1`，则下一个元素 ( `a[1]`) 可能包含该值`1`，因此您继续下一个索引。但是，如果`a[0] >= 1`您知道（因为值不同）条件`a[1] == 1`不可能为真，那么您可以安全地跳过 index `1`。但是您甚至可以做得更好：例如，如果`a[0] == 12`，您知道（因为值按升序排序）不可能有任何元素满足`a[i] == i`元素之前`a[13]`. 因为数组中的值可以是非整数的，所以我们现在不能做任何进一步的假设，所以我们可以安全地直接跳到的下一个元素是`a[13]`（例如`a[1]`through`a[12]`可能都包含介于`12.000...`and之间的值，`13.000...`这样`a[13]`仍然可以完全相等`13`，所以我们必须检查它）。

继续该过程会产生如下算法：

```
// Algorithm 1
bool algorithm1(double* a, size_t len)
{
    for (size_t i=0; i<len; ++i) // worst case is O(n)
    {
        if (a[i] == i)
            return true; // of course we could also return i here (as an int)...
        if (a[i] > i)
            i = static_cast<size_t>(std::floor(a[i]));
    }
    return false; // ......in which case we’d want to return -1 here (an int)
} 
```

`a[]`如果 in中的许多值大于它们的索引值，这具有相当好的性能，并且如果 in 中的所有值`a[]`都大于 n，则具有出色的性能（仅在一次迭代后返回 false！），但如果所有值都小于它们的索引值（它会在 n 次迭代后返回 false）。所以我们回到绘图板......但我们需要的只是轻微的调整。考虑到该算法可以被编写为从 n 向下扫描到 0，就像它可以从 0 向前扫描到 n 一样容易。如果我们结合从两端向中间迭代的逻辑，我们得到一个算法如下：

```
// Algorithm 2
bool algorithm2(double* a, size_t len)
{
    for (size_t i=0, j=len-1; i<j; ++i,--j) // worst case is still O(n)
    {
        if (a[i]==i || a[j]==j)
            return true;
        if (a[i] > i)
            i = static_cast<size_t>(std::floor(a[i]));
        if (a[j] < j)
            j = static_cast<size_t>(std::ceil(a[j]));
    }
    return false;
} 
```

这在两种极端情况下都具有出色的性能（所有值都小于 0 或大于 n），并且在几乎任何其他值分布情况下都具有非常好的性能。最坏的情况是如果数组下半部分的所有值都小于它们的索引，并且上半部分的所有值都大于它们的索引，在这种情况下性能会下降到 O( n)。最好的情况（极端情况）是O（1），而平均情况可能是O（log n），但我要让数学专业的人确定这一点。

一些人提出了一种“分而治之”的方法来解决这个问题，但没有具体说明如何划分问题以及如何处理递归划分的子问题。当然，这样一个不完整的答案可能不会让面试官满意。上面算法 2 的朴素线性算法和最坏情况下的性能都是 O(n)，而算法 2 通过尽可能跳过（不检查）元素将平均情况下的性能提高到（可能）O(log n)。分而治之的方法只能胜过算法 2，如果在平均情况下，它能够以某种方式跳过比算法 2 可以跳过的更多的元素。假设我们通过递归地将数组分成两个（几乎）相等的连续两半来划分问题，并决定是否使用产生的子问题，我们可能会跳过比算法 2 可以跳过的更多的元素，尤其是在算法 2 最坏的情况下。对于本讨论的其余部分，让我们假设输入对于算法 2 来说是最坏的情况。在第一次拆分之后，我们可以检查两半的顶部和底部元素是否存在导致 O(1) 性能的相同极端情况算法2，但结果是两半相结合的 O(n) 性能。如果下半部分的所有元素都小于 0 并且上半部分的所有元素都大于 n-1，就会出现这种情况。在这些情况下，对于我们可以排除的任何一半，我们可以立即以 O(1) 的性能排除下半部分和/或上半部分。当然，该测试不能排除的任何一半的性能仍有待进一步递归后确定，再次将其除以一半，直到我们找到顶部或底部元素包含其索引值的任何段。与算法 2 相比，这是一个相当不错的性能改进，但它仅发生在算法 2 最坏情况的某些特殊情况下。我们通过分而治之所做的只是减少（稍微）引起最坏情况行为的问题空间的比例。分而治之仍然存在最坏情况，它们与引发算法 2 最坏情况行为的大多数问题空间完全匹配。我们通过分而治之所做的只是减少（稍微）引起最坏情况行为的问题空间的比例。分而治之仍然存在最坏情况，并且它们与引发算法 2 最坏情况行为的大多数问题空间完全匹配。我们通过分而治之所做的只是减少（稍微）引起最坏情况行为的问题空间的比例。分而治之仍然存在最坏情况，并且它们与引发算法 2 最坏情况行为的大多数问题空间完全匹配。

那么，鉴于分而治之算法的最坏情况较少，继续使用分而治之的方法是否有意义？

一句话，没有。也许。如果您预先知道大约一半的数据小于 0，一半大于 n，那么这种特殊情况通常会采用分而治之的方法更好。或者，如果您的系统是多核的并且您的“n”很大，那么在所有核心之间平均分配问题可能会有所帮助，但是一旦在它们之间分配，我认为每个核心上的子问题可能是最好的用上面的算法 2 解决了，避免了问题的进一步划分，当然也避免了递归，正如我在下面讨论的......

在递归分治法的每个递归级别，算法需要某种方法来记住问题的尚未解决的第二半部分，同时它会递归到第一半部分。这通常是通过让算法首先递归地调用自己的一半然后再调用另一半来完成的，这种设计在运行时堆栈上隐式地维护此信息。另一种实现可能通过在显式堆栈上维护基本相同的信息来避免递归函数调用。在空间增长方面，算法 2 是 O(1)，但任何递归实现都不可避免地是 O(log n)，因为必须在某种堆栈上维护此信息。但除了空间问题，递归实现具有额外的运行时开销，需要记住尚未递归进入的子问题一半的状态，直到它们可以递归进入。这种运行时开销不是免费的，并且鉴于上述算法 2 的实现的简单性，我认为这种开销成比例地显着。因此，我建议上面的算法 2 将对绝大多数情况进行全面的递归实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T19:15:01.617

在最坏的情况下，你不能比检查每个元素做得更好。（想象一下类似的东西`a[i] = i + uniform_random(-.25, .25)`。）你需要一些关于你的输入是什么样子的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T20:10:50.053

实际上我会从最后一个元素开始，做一个基本的检查（例如，如果你有 1000 个元素，但最高是 100，你知道你只需要检查 0..100）。在最坏的情况下，您仍然需要检查每个元素，但找到可能的区域应该更快。如果如上所述（a[i] = i + [-0.25..0.25]），那么您就是 f($!ed，需要搜索每个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T19:58:00.210

我认为这里的主要问题是您的相互矛盾的陈述：

> a[i] **==**我
> 
> 数组中的所有元素都是**有序**且不同的，它们**不必**总是整数。

如果数组的值等于它的访问下标，这意味着它是一个整数。如果它不是整数，并且他们说.. `char`，那么什么被认为是“排序的”？ASCII 值 ( `A < B < C`)？

如果它是一个字符数组，我们会考虑：

```
a[i] == i 
```

如果是真的

> i == 65 [10] && a[i] == 'A'

如果我在这次面试中，我会在回答之前向面试官询问后续问题。那就是说...

如果我们所知道的就是您所说的，我们可以肯定地说我们可以在 O(n) 中找到值，因为这是对数组进行一次完整传递的时间。有了更多细节，我们可以通过对数组的二进制搜索将其限制为 O(log(n))。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T19:07:54.247

对于排序数组，您可以执行插值搜索。类似于[二分搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)，但假设值分布均匀，可以更快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-01T07:12:50.790

注意到数组中的所有元素都是**有序且不同的**，所以如果我们用b[i]=a[i]-i构造一个新的数组b，**数组b中的元素也是有序**的，我们需要找到的是找到数组 b 中的零。我认为二分查找可以解决问题！这是一个用于计算排序数组中出现次数的[链接。](http://www.geeksforgeeks.org/archives/12164)您也可以在原始数组上执行类似的分治技术，而无需构造辅助数组！时间复杂度为 O(Logn)！

```
Take this as an example:
a=[0,1,2,4,8]
b=[0,0,0,1,4]
What we need to find is exactly index 0,1,2 
```

希望能帮助到你！

# c# - JSON 日期不正确

> ID：13632808
> 
> 赞同：1
> 
> 时间：2012-11-29T19:00:41.343
> 
> 标签：c#, servicestack

我在 JSON 中表示日期时遇到问题。我使用 Service Stack 作为 Web 服务来获取数据。我在服务器端的代码如下：

```
 public object Execute(GetNoPatientList request)
    {
        NoPatientList _noPatientList = new NoPatientList();

        List<string> _noMatchPatientList = new List<string>();
        List<NoPatientList> _newList = new List<NoPatientList>();
        try
        {
            using (SqlConnection cn = new SqlConnection(Database.WaldenWebConnection))
            {
                cn.Open();
                using (SqlCommand cm = cn.CreateCommand())
                {
                    cm.CommandText = "select [DateTimeStamp] as DateCreated,[ID],[PatientMRN],[FirstName],[MiddleName]"
                        + " ,[LastName],convert(varchar,[DOB],101) as DOB,[Sex],[Note],[Source] as Interface"
                        + " from PatientNoMatch"
                        + " where FoundMatch = 'F'"
                        + " and Show = 'T'"
                        + " order by DateTimeStamp desc";

                    SqlDataReader dr = cm.ExecuteReader();
                    while (dr.Read())
                    {
                        NoPatientList _noPatientList1 = new NoPatientList();

                        _noPatientList1.PatientMRN = dr["PatientMRN"].ToString();
                        _noPatientList1.FirstName = dr["FirstName"].ToString();
                        _noPatientList1.MiddleName = dr["MiddleName"].ToString();
                        _noPatientList1.LastName = dr["LastName"].ToString();
                        _noPatientList1.DOB = dr["DOB"].ToString();
                        _noPatientList1.Sex = dr["Sex"].ToString();
                        _noPatientList1.Note = dr["Note"].ToString();
                        _noPatientList1.DateCreated = dr.GetDateTime(0);
                        _noPatientList1.Interface = dr["Interface"].ToString();

                        _newList.Add(_noPatientList1); 
                    }
                    return _newList;
                }
            }
        }
        catch
        {
            return _newList;
        }
    } 
```

类型表示如下：

```
[DataContract]
public class NoPatientList
{
    [DataMember]
    public string ID { get; set; }

    [DataMember]
    public string PatientMRN { get; set; }

    [DataMember]
    public string FirstName { get; set; }

    [DataMember]
    public string MiddleName { get; set; }

    [DataMember]
    public string LastName { get; set; }

    [DataMember]
    public string Sex { get; set; }

    [DataMember]
    public string DOB { get; set; }

    [DataMember]
    public string Note { get; set; }

    [DataMember]
    public DateTime DateCreated { get; set; }

    [DataMember]
    public string Interface { get; set; }

} 
```

Silverlight 应用程序正在通过以下调用使用 Web 服务：

/InterfaceUtility/servicestack/json/syncreply/

Silverlight 应用程序正在使用以下代码将代码处理成网格

```
 private void GetNoPatientMatchData()
    {
        try
        {
            gridViewNoMatch.ItemsSource = null; 
        }
        catch { }
        _client = new WebClient();
        _client.OpenReadCompleted += (a, f) =>
        {
            if (!f.Cancelled && f.Error == null)
            {
                _listOfNoPatientsMatches = new List<NoPatientList>();                    
                MemoryStream _memoryStream = new MemoryStream();
                f.Result.CopyTo(_memoryStream);
                _memoryStream.Position = 0;

                StreamReader _streamReader = new StreamReader(_memoryStream);

                string _memoryStreamToText = _streamReader.ReadToEnd();

                List<NoPatientList> _deserializedNoPatientList = (List<NoPatientList>)Newtonsoft.Json.JsonConvert.DeserializeObject(_memoryStreamToText, typeof(List<NoPatientList>));                   
                gridViewNoMatch.ItemsSource = _deserializedNoPatientList;
            }
            else
            {
                MessageBox.Show(f.Error.Message,
                    "Error", MessageBoxButton.OK);
            }
        };

        _client.OpenReadAsync(new Uri(_serviceUri + "getnopatientlist")); 
```

问题是 DateTime 字段上的时间似乎总是 6 小时。

关于发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:03:02.027

这可能是一个时区问题。检查：

*   您的网络服务以 UTC 格式返回您的日期/时间。
*   您的代码将这些日期/时间解析为 UTC 日期和时间。

# java - JBoss EAP 上的会话复制不工作

> ID：13632813
> 
> 赞同：0
> 
> 时间：2012-11-29T19:01:12.307
> 
> 标签：java, spring, jsp, session, jboss

我正在尝试让会话复制工作......我们有两个节点，我在 node1 上启动以下 JSP 代码，然后我观察计数器上升。然后我关闭节点，我认为计数器仍然有对，在 node2 上工作。我们确实被移到了 node2，但它开始了一个新的会话。

**下面是 JSP 代码：**

```
<% /*
This is an example that shows sessions in use within a JSP.

It's the simplest possible demo - a visit counter, but a
counter for the number of times that the current user has
visited during the current session.
*/

/* Get value, or set to zero if this is a new session */

String val = (String) session.getAttribute("previouses");
if ( val == null ) val = "0";

/* Convert to number, increment, save back into session */
int n = Integer.parseInt(val);
n++;
session.setAttribute("previouses",Integer.toString(n));

/* Also pick up the hosts so that we can echo this in the
reply page (great for testing load balancer and sticky
session algorithms on our training courses! */
String hostipr = request.getRemoteHost();
String hostipl = request.getServerName();

/* ------------------------------------------------- */

%>
<html>
<head>
<title>Sessions using a JSP</title>
</head>
<body>
<h1>Sessions in a JSP</h1>
This example program shows the use of a session within a
Java Server page (JSP). It's the simplest possible example,
counting the number of times that the user has visited in
the current session.<br /><br />
<b>Details from the session</b><br/>
Requested session:<%=request.getRequestedSessionId()%><br/>
Session: <%= session.getId()%><br/>
Generating or back end host: <%= hostipl %><br />
Accessing or front end host: <%= hostipr %><br />

Count: <%= n %><br/>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:40:56.587

您需要有带有`<distributable/>`JBoss 标记的 web.xml 才能为您的 Web 应用程序启用会话复制。参考[http://docs.jboss.org/jbossas/docs/Clustering_Guide/beta422/html/clustering-http-app.html](http://docs.jboss.org/jbossas/docs/Clustering_Guide/beta422/html/clustering-http-app.html)

# ruby-on-rails-3 - Rails 3 在清单中排除 HTML5 jwplayer js

> ID：13632823
> 
> 赞同：1
> 
> 时间：2012-11-29T19:01:33.277
> 
> 标签：ruby-on-rails-3, jwplayer

在我的 application.js 中，我有外部 js 文件的清单

```
//= require jquery
//= require jquery-ui-1.8.17.custom.min
//= require jquery_ujs
//= require jquery-mousewheel.js
//= require jquery-fileupload
//= require jquery-fileupload-ui
//= require_self
//= require bootstrap.min.js
//= require rails.validations
//= require rails.validations.custom
//= require jwplayer
//= require jwplayer.html5
//= require jwplayer-license 
```

当我在 IE8 中运行我的网络应用程序时，我收到此错误：

```
Message: 'n.sheet.cssRules' is null or not an object 
```

经过一番搜索，我将错误追溯到 jwplayer.html5.js 文件。当检测到 IE8 时，有没有办法从 application.js 中排除这个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T18:05:19.263

我也在为此苦苦挣扎。我在 jwplayer-rails gem 上做了一些工作。我仍在等待我的拉取请求通过。现在请按照[本自述](https://github.com/dutgriff/jwplayer-rails/blob/master/README.md)文件中的信息启动并运行它。在此处阅读有关[我的答案的](https://stackoverflow.com/questions/13825970/jw-player-and-rails-3-2/22995473#22995473)更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:13:21.277

我使用相同的设置（Rails 3、JWPlayer 6.1.x 等）遇到了完全相同的问题。无论如何，升级到 JWPlayer 6.2.x 并没有解决问题

我没有解决方案，但我有一个解决方法。我将 JWPlayer 从我的 application.js 中拉出，添加`<%= yield :javascripts %>`到我的 application.html.erb 中，并将 JWPlayer 包含仅移动到我需要它们的视图中：

```
<% content_for :javascripts do %>
  <%= javascript_include_tag "jwplayer" %>
  <%= javascript_include_tag "jwplayer.html5" %>
<% end -%> 
```

请注意，就我而言，我还必须将这些文件添加到`config.assets.precompile`.

本质上，如果页面上没有 JWPlayer 的实例，IE8（大概是 7）会吓坏。理想的修复方法实际上是让 JWPlayer 自己检查是否是这种情况，而不是让 IE 抛出错误，但在他们最终修复它之前，这至少可以让事情正常进行。

这令人沮丧并且远非理想的解决方案，但它在我的应用程序中有效。

# database - 在一组关系上证明 FD - 需要检查解决方案

> ID：13632825
> 
> 赞同：-1
> 
> 时间：2012-11-29T19:01:37.617
> 
> 标签：database, relational-database, functional-dependencies

我在使用 Armstrong 公理证明函数依赖时遇到问题。我正在为此苦苦挣扎：

> 令 R(A,B,C,D,E) 为关系模式，F = {A→CD, C→E, B→D}
> 
> 证明：F: BC-> DE

我有的：

1.  给定 B->D
2.  在 1 上增加 C，BC -> DC
3.  分解 2, BC -> D, BC -> C
4.  BC -> C, BC -> E 上的传递性
5.  BC -> D 和 4 上的联合，BC -> DE

不确定这是否是一个正确的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-20T04:08:15.867

你完全正确，我的朋友。你的证明是完美的。

# php - php 脚本不使用 ajax 调用执行

> ID：13632826
> 
> 赞同：0
> 
> 时间：2012-11-29T19:01:41.500
> 
> 标签：php, mysql, ajax

我需要你的帮助。

我有一些像这样的按钮的输入。

```
<input type="text" name="cmsperso" id="cmsperso" />
<input type="text" name="chefdequart" id="chefdequart" />
<input type="text" name="adjoint" id="adjoint" />
<button type="submit" name="perso" onClick="perso()">envoyer</button> 
```

onClick 调用一个ajax 函数。

```
function perso() {
$.ajax({
  type: "POST",
  url: "form/perso.php",
});} 
```

在我的 perso.php 中，我有这个更新。

```
$cnx = mysql_connect( "localhost", "root", "" );
$db = mysql_select_db( "maincourante" );
$req = mysql_query("SELECT idops FROM ops ORDER BY idops DESC LIMIT 1");
$data = mysql_fetch_array($req);

$cmsperso = $_POST["cmsperso"];
$chefdequart = $_POST["chefdequart"];
$adjoint = $_POST["adjoint"];

$perso = utf8_decode("UPDATE `Opérations n°".$data['idops']."` SET cmsperso='$cmsperso', chefdequart='$chefdequart', adjoint='$adjoint'");

mysql_query($perso, $cnx) or die(mysql_error());
mysql_close(); 
```

除更新外，一切正常。在 phpmyadmin 中，没有一个值是更新的。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:11:59.917

您没有在帖子中发送变量值，

```
function perso() {
$.ajax({
  type: "POST",
  url: "form/perso.php",
});} 
```

需要将变量和值添加到此调用中，例如：

```
function perso() {
$.post("form/perso.php", { adjoint: $("#adjoint").val(), cmsperso: $("#cmsperso").val(), chefdequart: $("#chefdequart").val() } );
});} 
```

还可以查看用于管理数据对象的[PDO](http://il1.php.net/manual/en/book.pdo.php)，因为可以将查询注入

最后，您似乎没有`where`子句，这意味着您表中的所有行都将被更新，这可能不是您所追求的。

我会考虑的另一个想法是给你的桌子命名比现在更简单的东西，那里有空格和特殊字符是在自找麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:00:29.690

早上好，

我想，我部分解决了我的问题

这是我的代码

```
function getXMLHttpRequest() {
var xhr2 = null;

if (window.XMLHttpRequest || window.ActiveXObject) {
    if (window.ActiveXObject) {
      try {
        xhr2 = new ActiveXObject("Msxml2.XMLHTTP");
      }
      catch(e) {
        xhr2 = new ActiveXObject("Microsoft.XMLHTTP");
      }
    } 
    else {
      xhr2 = new XMLHttpRequest();
    }
  } 
  else {
    alert("Votre navigateur ne supporte pas l'objet XMLHTTPRequest...");
    return null;
  }
  return xhr2;
}

/* ressources */
function perso() {
  $.post("form/perso.php", { 
    cmsperso: $("#cmsperso").val(), 
    chefdequart: $("#chefdequart").val(),
    adjoint: $("#adjoint").val()
  });

  var xhr2 = getXMLHttpRequest();

  xhr2.open("POST", "form/perso.php", false);
} 
```

而这个在萤火虫中的回报

![发现萤火虫 302](../Images/847b7a6051ac9a1ef152a426518fa347.png)

任何想法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:28:02.510

您确定`Opérations n°".$data['idops']."`要更新的表是正确的吗？

# python - 如何使用python解析这个json

> ID：13632827
> 
> 赞同：-1
> 
> 时间：2012-11-29T19:01:42.020
> 
> 标签：python, json, parsing

我知道要问这种微不足道的事情……但我是 python 的新手。这是一个json字符串

```
reply = {u'f': [{u'v': u'0'}]} 
```

如何使用 python 从中解析出值 0。我试过了

```
count = reply['rows'][0]['v'] 
```

但它不工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:02:57.200

`count = reply['f'][0]['v']`我相信应该工作。

`reply`是一本字典。因此，您需要使用字典键来访问数据。在这种情况下，关键是`'f'`，而不是`'rows'`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:14:30.857

如果你有有效的 JSON，你可以使用 simplejson 模块：

```
from simplejson import loads, dumps

my_dict = loads(my_json_serialized_string) 
```

然后你可以访问python dict，例如：

```
print my_dict.items()
print my_dict.keys()
print my_dict.values()

#lets assume 'rows' exists as a key, and the value is a list, and the first item of that list is a dict that contains the key 'v':
print my_dict['rows'][0]['v'] 
```

您甚至可以更改 dict，并将其序列化为有效的 JSON 字符串：

```
my_dict['my_key'] = 'my_value'

my_other_json_serialized_string = dumps(my_dict) 
```

# cobol - Microfocus Cobol 动画调试器

> ID：13632828
> 
> 赞同：2
> 
> 时间：2012-11-29T19:01:47.023
> 
> 标签：cobol, microfocus

我正在使用 Microfocus animator 工具，并且能够从 putty 调试 cobol 可执行文件。cobol animator 工具将可执行文件转换为源代码并突出显示当前正在执行的语句。

但是，动画师和腻子会话在到达 Cobol 中的“GOBACK”语句时会挂起。

请让我知道如何解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T04:43:10.070

您是否尝试过按 ESC 并退出调试器？我知道当我使用它时，它总是在程序结束时停止，你必须先按 ESC，然后说 Yes 停止或 Detatch。

我在微焦点网站上找到了这个。检查您的设置和变量，看看它们是否与它所说的相符。[动画师和腻子](http://kb.microfocus.com/display/4/kb/article.aspx?aid=34180)

更新 - 链接似乎不再有效。我想知道 kb.microfocus.com 是否更改了网址的地址。该链接仅指向 microfous.com 的 KB。

# bash - awk：如何删除文件中的重复行并同时将它们输出到另一个文件中？

> ID：13632831
> 
> 赞同：1
> 
> 时间：2012-11-29T19:01:56.317
> 
> 标签：bash, csv, awk, uniq

我目前正在处理一个处理 csv 文件的脚本，它所做的一件事就是删除并记录文件中的重复行。我当前执行此操作的方法是使用 uniq -d 一次运行 uniq 以显示所有重复项，然后再次运行 uniq 而不使用任何选项来实际删除重复项。话虽如此，我想知道是否可以在一个操作中执行相同的功能，而不必运行 uniq 两次。我发现了许多使用 awk 删除重复项的不同示例，但据我所知，我无法找到任何既显示重复项又同时删除它们的示例。如果有人可以为此提供建议或帮助，我将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T19:30:45.200

这里有一些东西可以帮助你开始：

```
awk 'seen[$0]++{print|"cat>&2";next}1' file > tmp && mv tmp file 
```

以上将在从输入文件中删除它们的同时将任何重复的行打印到 stderr。如果您需要更多，请告诉我们更多......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:27:28.730

一般来说，您输入的大小将是您的指导。如果您正在处理 GB 的数据，您通常别无选择，只能依靠`sort`and `uniq`，因为这些工具支持[外部](http://en.wikipedia.org/wiki/External_sorting)操作。

也就是说，这是 AWK 的方式：

*   `i`如果您的输入已排序，您可以通过将行与行`i-1`与*O(1)*状态进行比较来轻松跟踪 AWK 中的重复项：如果`i == i-1`您有重复项。

*   如果您的输入未排序，则必须跟踪*所有*行，需要*O(c)*状态，其中*c*是唯一行的数量。为此，您可以在 AWK 中使用哈希表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:50:34.950

此解决方案不使用`awk`，但确实会产生您需要的结果。在下面的命令中，将 sortedfile.txt 替换为您的 csv 文件。

```
cat sortedfile.txt | tee >(uniq -d > duplicates_only.txt) | uniq > unique.txt 
```

`tee`将`cat`命令的输出发送到`uniq -d`.

# asp.net - 在 .NET 中用 DATABASE 替换 XML

> ID：13632833
> 
> 赞同：0
> 
> 时间：2012-11-29T19:01:58.100
> 
> 标签：asp.net, .net, sql, xml

我编写了一个使用 SQL SERVER 数据库的 ASP.NET 应用程序。在修改数据库期间，一位经验丰富的 .NET+DBMS 专家表示，关联/映射多个表的问题之一可以通过 .NET XML 字符串优雅地解决。我从来没有听说过这种技术，但不要听起来对这种“黑客”一无所知，我不能问他。有没有办法像常规数据库表一样插入/更新/删除 XML 字符串（不使用 Linq to XML）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:10:34.687

如果不是 Linq to XML，那么他的意思可能是 XML Columns。SQL Server 2005 及更高版本允许您在表中定义[XML 列](http://msdn.microsoft.com/en-us/library/ms345117%28v=sql.90%29.aspx)。因此，您可以在表中的字段中包含实际的 XML，然后您可以对它们执行[XQuery](http://www.w3schools.com/xquery/default.asp)操作。

我不知道您的上下文是什么以及问题陈述是什么，所以我无法告诉您这是一个好主意还是坏主意。它有其用途，在某些情况下可能有用，但不能以广泛、可扩展的方式使用。这实际上取决于您将使用它的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:32:05.887

I am not sure what he meant, but it's possible to `serialize` your object to `XML` and pass the `XML` as a parameter to a `Stored Procedure`.

```
DECLARE @PersonJobsXML XML

SELECT  @PersonJobsXML = '<PersonJobs> 
<PersonId>24234</PersonId> 
<Job>
        <JobTitle>Engineer I</JobTitle>
        <CompanyName>ACME</CompanyName>
</Job> 
<Job>
    <JobTitle>Engineer II</JobTitle>
    <CompanyName>World Inc.</CompanyName>
</Job> 
<Job>
    <JobTitle>Engineer II</JobTitle>
    <CompanyName>Tek Corp</CompanyName>
</Job> 
</PersonJobs>'

SELECT  PersonJobs.Job.value('../PersonId[1]', 'INT') AS PersonId
      , PersonJobs.Job.value('JobTitle[1]', 'VARCHAR(200)') AS JobTitle
      , PersonJobs.Job.value('CompanyName[1]', 'VARCHAR(200)') AS CompanyName
FROM    @PersonJobsXML.nodes('//PersonJobs/Job') AS PersonJobs ( Job ) 
```

This allows you to pass a list of object to the database with just one call; the downside is that the size could be quite limited

But If you are using SQL server 2008 you should look at [`Table-Valued Parameters`](http://msdn.microsoft.com/en-us/library/bb675163.aspx): see [Table Value Parameters in SQL Server 2008 and .NET (C#)](http://www.mssqltips.com/sqlservertip/2112/table-value-parameters-in-sql-server-2008-and-net-c/)

# excel - 在一个 Excel 工作表（PO 生成器）上查找与另一个 Excel 工作表上的记录匹配的记录。（采购订单日志）将行复制并粘贴到采购订单日志

> ID：13632839
> 
> 赞同：0
> 
> 时间：2012-11-29T19:02:20.843
> 
> 标签：excel, vba

到目前为止，我拥有的代码....获取 PO 生成器上的原始订单并将其复制到 PO 日志中，只要它们是新订单就可以了。当我需要更新以前的订单时，我的问题就出现了。我希望它找到原始订单并更新参考单元格。请帮助.... Excel 2003

```
Sub Get_Po()
'
' Get_Po Macro
Dim ws1 As Worksheet
Dim ws2 As Worksheet
Dim dest As Range

Set ws1 = Sheets("PO GENERATOR")
Set ws2 = Sheets("PO LOG")
Set dest = ws2.Range("a1").End(xlDown).Offset(1)

Sheets("PO GENERATOR").Select
Selection.AutoFilter Field:=3, Criteria1:="<>"
ws1.Range("2:5135").Copy
dest.PasteSpecial xlPasteValues
Application.CutCopyMode = False
Sheets("Type II Log").Select

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:29:38.413

这是一些应该可以工作的代码。我已经对其进行了测试，它可以满足您的需求。需要注意的几个关键点是。您的 PO 生成器从哪一行和哪一列开始，以及您的 PO 日志信息从哪一行和哪一列开始。

```
 Dim a As String
Dim lastRow As String

lastRow = ActiveSheet.Cells(Rows.Count, "A").End(xlUp).Row + 1
'   Variable for PO#
a = Sheets("PO GENERATOR").Range("A1").Value

Sheets("PO GENERATOR").Select
'   Adjust to whatever row your PO is located
Rows(1).Select
Selection.Copy
Sheets("PO LOG").Select

'   Modify the Columns(1) to whatever column number your PO# is located
'   Search For PO number
Dim cellrow As Integer
    On Error Resume Next
    rng1 = a
    strSearch = rng1
        Set aCell = Sheets("PO LOG").Columns(1).Find(What:=strSearch, LookIn:=xlValues, _
                                    LookAt:=xlWhole, SearchOrder:=xlByRows, _
                                    SearchDirection:=xlNext, MatchCase:=False, _
                                    SearchFormat:=False)

        MsgBox aCell & vbCrLf & aCell.Row
        cellrow = aCell.Row

'   Modify Range("A") to whatever column you PO is located
If cellrow = 0 Then
Range("A" & lastRow).Select
Selection.PasteSpecial
    Else:
        Rows(cellrow).EntireRow.Select
        Selection.PasteSpecial
End If 
```

祝你好运！！！

# java - Android SimpleDateFormat 不工作

> ID：13632844
> 
> 赞同：3
> 
> 时间：2012-11-29T19:02:53.540
> 
> 标签：java, android, simpledateformat

快速的问题，`SimpleDateFormat`没有像我预期的那样表现。我正在寻找一个看起来像的日期字符串`Thursday 29 November 13:43`。

这是我的格式：

```
Calendar c = Calendar.getInstance();  
_clockDateFormat = new SimpleDateFormat("cccc dd MMMM kk:mm");  
_clockDateFormat.format(c.getTime()); 
```

这是输出：

```
5 29 11 13:43 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:05:38.993

而不是`c`使用`E`：

```
Calendar c = Calendar.getInstance();  
SimpleDateFormat _clockDateFormat = new SimpleDateFormat("EEEE dd MMMM kk:mm");  
System.out.println(_clockDateFormat.format(c.getTime())); 
```

输出：

> 11 月 29 日星期四 14:05

有关更多信息，请参阅[文档](http://developer.android.com/reference/java/text/SimpleDateFormat.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T19:29:30.537

原来我正在使用的设备从工厂运到这里时没有默认语言环境。作为一种解决方法，我使用了`Locale`特定的重载`SimpleDateFormat`：

`_clockDateFormat = new SimpleDateFormat("EEEE dd MMMM HH:mm", Locale.US);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T19:05:46.313

你有没有尝试过：

```
 _clockDateFormat = new SimpleDateFormat("EEEE dd MMMM kk:mm"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T19:07:37.337

在我的电脑中，我尝试了以下

```
 Calendar c = Calendar.getInstance();  
    SimpleDateFormat _clockDateFormat = new SimpleDateFormat("yyyy dd MMMM kk:mm");  
    _clockDateFormat.format(c.getTime());
    System.out.println(_clockDateFormat.format(c.getTime())); 
```

如果我在 simpledateformat 中使用 'cccc' 会出错！！！

# php - 为什么 ORDER BY 不起作用？

> ID：13632845
> 
> 赞同：0
> 
> 时间：2012-11-29T19:02:55.617
> 
> 标签：php, mysql, web, sql-order-by

这段代码不是我写的，它来自 Racetracker (http://sourceforge.net/projects/racetracker/)，但我一直在尝试进行一些修改。

我正在尝试制作一份简短的球队积分榜，因此将其限制为 5 支球队。球队排名页面中包含“ORDER BY `SUM(driverpoints)`”，但它不执行任何操作（该页面使用 Javascript 手动对 HTML 表进行排序）。此外，当我尝试添加 LIMIT 5 时，它同样什么也不做，它只是打印所有不同的团队。这是相关代码（我在这里删除了很多重复的 OR，因为有 43 个 OR `drivername`= '$thenames[1]' 限定符，它们不影响 ORDER BY 和 LIMIT 部分是否有效）：

```
$total= mysql_query("SELECT SUM(driverpoints), SUM(events), SUM(firstplace),
        SUM(qual1stplace), SUM(lapsseason), SUM(lapsledseason), SUM(top5season),
        SUM(top10season), SUM(provisionals) 
    FROM `$whatseriestable` 
    WHERE `year` = $siteyear AND `drivername` = '$thenames[0]' 
        OR `drivername` = '$thenames[1]' 
    ORDER BY `SUM(driverpoints)` DESC LIMIT 5"); 
```

同样令人费解的是，ORDER BY 和 LIMIT 在车手积分榜摘要中运行良好：

```
$stn= mysql_query("SELECT * FROM `$whatseriestable` 
    WHERE `year` = $siteyear 
    ORDER BY `driverpoints` DESC LIMIT 10"); 
```

为什么这对球队排名不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:27:46.723

它可能只是你的 WHERE 子句......并且优先考虑左右

```
WHERE 
       `year` = $siteyear 
   AND `drivername` = '$thenames[0]' 
    OR `drivername` = '$thenames[1]' 
```

被解释为

```
WHERE 
     ( year condition and first driver condition ) 
  OR ( second driver ) 
```

我想你的意思是

```
WHERE 
     ( year condition )
 and ( first driver condition OR second driver ) 
```

将您的驱动程序条件包含在 ( ) 括号中。

# jquery - 无法使用 jQuery 选择带有 id 的输入按钮

> ID：13632848
> 
> 赞同：-1
> 
> 时间：2012-11-29T19:02:56.803
> 
> 标签：jquery, html, button, onclick, click

我的脚本文件中有以下代码：

```
$(document).ready(function(){
   $("#cancel_button").click(function(){
      alert("TEST");
   });
}); 
```

在我的网站上，我有这个：

```
<form id="edit_news_form" method="post">
    <input type="hidden" name="news_id" value="30">
    <input type="text" name="title" placeholder="Título" value="TEXT" size="80"><br>
    <textarea name="text" placeholder="Texto" rows="20" cols="58">TEXT</textarea><br>
    <input type="text" placeholder="Tags" value="Tag1" name="tags" size="80"><br>
    <input id="edit_button" type="submit" value="Edit">
    <input id="cancel_button" type="button" value="Cancel">
</form> 
```

为什么我无法选择按钮并收到警报？

-------------已编辑 ------------

问题是我用jquery动态插入html代码......所以我忘记了这个细节......因为这项工作是必要的使用：

```
$('#cancel_button').live('click', function); 
```

谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T20:21:32.037

jQuery live 方法自 v1.7 起已弃用。同样在幕后，所有事件（如直播、点击等）都在调用 on 方法

所以改用这个：

```
$(document).on('click', '#cancel_button', function () {
     // do some work
}); 
```

无论您的 html 是否动态加载，这都将起作用

# extjs - Extjs 网格模板列

> ID：13632849
> 
> 赞同：0
> 
> 时间：2012-11-29T19:02:58.570
> 
> 标签：extjs, extjs4

使用 ExtJs 4.1

嗨，我的模型中有一个字段，在哪里

1 =“福特”

2 = “通用汽车”

3 = “本田” ...

当我的商店有数字时，如何在网格中显示名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:36:33.770

如果您查看文档，则有一个使用模板列的示例： [http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Template](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Template)

基本上，模板列在其呈现期间可以访问记录。如果您的记录既有数字名称又有描述性，您可以将两者都打印出来以显示它们（就像在示例中一样）。

如果您的记录没有描述性数据，那么您不需要模板列。您将`renderer`在常规列上使用 a 并从具有数字到描述性标签映射的查找对象中提取并返回描述。像这样`return lookup[value];` 请阅读文档以了解 renederer 的用法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:28:10.233

在第 th 列上使用渲染器

```
renderer: function(val){
        switch (val){
                case 1: val="Ford"; break;
                case 2: val="GM";break;
                //................
          }
       return val;
    }, 
```

# c# - UDP套接字是否需要像TCP套接字一样经过Accept Process？

> ID：13632851
> 
> 赞同：0
> 
> 时间：2012-11-29T19:03:05.287
> 
> 标签：c#, sockets, udp, beginreceive

我正在使用 UDP，当多台机器需要连接到服务器时，我想知道接受方法。到目前为止，我正在使用 UDPCliente 类、IPEndPoint 类和 BeginRecieve / EndRecieve 方法来创建一个可以同时连接多台机器的服务器。

我的问题很简单，我需要使用 Accept 方法来处理传入连接并为每个新连接创建一个新套接字吗？

处理与 UDP 的多个连接的最佳方法是什么？

到目前为止，我看到的代码示例创建了一个新的 UDPClient 类和一个 IPEndPoint，之后服务器正在侦听连接，代码调用 BeginRecieve 传递一个接收数据的函数，然后再次启动 BeginRecieve 的过程。

这些是我到目前为止一直在使用的代码示例：

```
public static void receiveCallback(IAsyncResult ar)
{
    UdpClient u = (UdpClient)((UdpState)(ar.AsyncState)).u;
    IPEndPoint e = (IPEndPoint)((UdpState)(ar.AsyncState)).e;

    byte[] receiveBytes = u.EndReceive(ar, ref e);
    UdpState s = new UdpState();
    s.e = e;
    s.u = u;
    u.BeginReceive(new AsyncCallback(receiveCallback), s);
}

public static void receiveMessages()
{
    IPEndPoint e = new IPEndPoint(IPAddress.Any, 5050);
    UdpClient u = new UdpClient(e);
    UdpState s = new UdpState();

    s.e = e;
    s.u = u;
    u.BeginReceive(new AsyncCallback(receiveCallback), s);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:07:32.293

UDP是无连接的，所以没有什么可以接受的。如果您需要通过 UDP 进行连接，那么您必须实现它们。理想情况下，您将为每个“连接”分配某种标识符，并将其包含在发送到服务器的每个数据报中。在某些情况下，仅依靠 IP 地址和端口来识别“连接”可能就足够了。

但是你可以随心所欲地做。UDP 将每个数据报视为独立的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:08:06.730

简短的回答 - 不，您不使用`accept()`UDP。

在 UDP 中没有连接，只有数据报。一方发送它们，另一方*可能*接收它们。每个数据报都有关于发送者的信息（IP 地址和端口），您的服务器应用程序可以提取这些信息以区分客户端。

# javascript - Javascript 函数无法识别 getElementById 中的 id

> ID：13632852
> 
> 赞同：-1
> 
> 时间：2012-11-29T19:03:08.823
> 
> 标签：javascript, html

我正在向表格添加一行，并将一个`ondblclick`事件附加到单元格。该功能`addrow`运行良好，并且`dblclick`正在使用正确的参数将我带到`seltogg`。但是，`var selbutton = document.getElementById`in`seltogg`返回一个空值。当我在文档中的原始表格上调用`seltogg`a时，它运行良好。`dblclick`所有参数“ `selna`”都有字母值，没有空格、特殊字符等。有人可以告诉我为什么 seltogg`document.getElementById`在我传递 id 时无法正确执行`addrow`；还有如何解决这个问题。

```
function addrow(jtop, sel4list, ron4list) {
    var tablex = document.getElementById('thetable');
    var initcount = document.getElementById('numrows').value;
    var sel4arr = sel4list.split(",");
    var idcount = parseInt(initcount) + 1;
    var rowx = tablex.insertRow(1);
    var jtop1 = jtop - 1;

    for (j = 0; j <= jtop1; j++) {
        var cellx = rowx.insertCell(j);
        cellx.style.border = "1px solid blue";

        var inputx = document.createElement("input");

        inputx.type = "text";
        inputx.ondblclick = (function() {
            var curj = j;
            var selna = sel4arr[curj + 2];
            var cellj = parseInt(curj) + 3;
            inputx.id = "cell_" + idcount + "_" + cellj;
            var b = "cell_" + idcount + "_" + cellj;
            return function() {
                seltogg(selna, b);
            }
        })();

        cellx.appendChild(inputx);
    } //end j loop
    var rowCount = tablex.rows.length;
    document.getElementById('numrows').value = rowCount - 1; //dont count header
} //end function addrow

function seltogg(selna, cellid) {
    if (selna == "none") {
        return;
    }
    document.getElementById('x').value = cellid; //setting up for the next function
    var selbutton = document.getElementById(selna); //*****this is returning null
    if (selbutton.style.display != 'none') { //if it's on
        selbutton.style.display = 'none';
    } //turn it off               
    else { //if it's off
        selbutton.style.display = '';
    } //turn it on  
} //end of function seltogg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:19:10.253

你试试，写下这句话： `document.getElementById("numrows").value` on`document.getElementById('numrows').value`

这是我的部分代码：

```
contapara=(parseInt(contapara)+1);

                document.getElementById("sorpara").innerHTML+="<li id=\"inputp"+contapara+"_id\" class=\"ui-state-default\"><span class=\"ui-icon ui-icon-arrowthick-2-n-s\"></span>"+$('#inputp'+contapara+'_id').val()+"</li>"; 
```

看你必须使用这个“y not”。试试！！！！

# c# - Selenium WebDriver 在测试用例之间共享相同的会话

> ID：13632855
> 
> 赞同：1
> 
> 时间：2012-11-29T19:03:37.053
> 
> 标签：c#, selenium, webdriver

我正在使用 Selenium WebDriver（又名 Selenium 2），并且希望在所有测试用例中只保留一个窗口，并避免每个测试用例创建的新窗口，以便我可以处理网络上的一致数据。

我已经完成了搜索，但他们中的大多数都在使用 Selenium RC，这似乎与 WebDriver 非常不同（因为我不知道如何保留会话 ID 等）。而且，我正在使用 c#..

您能否提供任何简单的示例代码来展示您的想法。对此，我真的非常感激！！

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T20:19:39.510

好吧，我会分享我目前在我的项目中使用的方法。尝试使用 webdriver 的静态初始化。希望这会对你有所帮助。嗯，我的结构很简单：我有`BaseSeleniumTest.java`我存储所有基本方法的地方。我还有其他`TestSuite.java`继承所有方法的`BaseSeleniumTest.java`： ![在此处输入图像描述](../Images/a50a1d201c47f4db1af9ff79b733a637.png)

**BaseSeleniumTest.java：**

```
package simulator.selenium;

import com.google.common.base.Function;
import com.thoughtworks.selenium.SeleneseTestBase;
import org.apache.commons.lang.RandomStringUtils;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import org.openqa.selenium.*;
import org.openqa.selenium.remote.DesiredCapabilities;
import org.openqa.selenium.remote.RemoteWebDriver;
import org.openqa.selenium.support.ui.FluentWait;
import org.openqa.selenium.support.ui.Wait;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.beans.factory.config.PropertyPlaceholderConfigurer;
import org.springframework.core.io.support.PropertiesLoaderUtils;

import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Properties;
import java.util.concurrent.TimeUnit;

public class BaseSeleniumTest extends SeleneseTestBase {
    static WebDriver driver;

    private static Logger log = LoggerFactory.getLogger(BaseSeleniumTest.class);
    private String loginBaseUrl;

    @BeforeClass
    public static void firefoxSetUp() throws MalformedURLException {

          DesiredCapabilities capability = DesiredCapabilities.firefox();

        driver = new FirefoxDriver();  

        driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);
        driver.manage().timeouts().pageLoadTimeout(30, TimeUnit.SECONDS);
        driver.manage().window().setSize(new Dimension(1920, 1080));
    }
    @Before
    public void homePageRefresh() throws IOException {
        driver.manage().deleteAllCookies();
        driver.get(propertyKeysLoader("login.base.url"));
    }

    @AfterClass
    public static void closeFirefox(){
        driver.quit();

    }

    public WebElement findElementByXpath(String key) throws IOException {

        int i=0;
        while(!isElementPresent(By.xpath(propertyKeysLoader(key))) && i<5){
            driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
            i++;
        }
        return fluentWait(By.xpath(propertyKeysLoader(key)));
    }
    public WebElement findElementByCssSelector(String key) throws IOException {

        int i=0;

        while(!isElementPresent(By.cssSelector(propertyKeysLoader(key))) && i<5){
            driver.manage().timeouts().implicitlyWait(1, TimeUnit.SECONDS);
            i++;
        }

    }

    public void locatorFindingHandling(String key) throws IOException /*throws IOException*/ {

        fluentWait(By.cssSelector(propertyKeysLoader(key))).click();

    }
    public void locatorFindingHandling(String key, String key1) throws IOException {

        driver.findElement(By.xpath(propertyKeysLoader(key))).sendKeys(propertyKeysLoader(key1));

    }

    public String propertyKeysLoader(String key) throws IOException {
        Properties props = PropertiesLoaderUtils.loadAllProperties("selenium-config.properties");
        PropertyPlaceholderConfigurer props2 = new PropertyPlaceholderConfigurer();
        props2.setProperties(props);
        return (String)props.get(key)          ;
    }

    public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
        .ignoring(org.openqa.selenium.NoSuchElementException.class);
        WebElement foo = wait.until(
                new Function<WebDriver, WebElement>() {
                    public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                    }
                }
        );
        return  foo;              }     ;

   public boolean isElementPresent(By selector)
   {
       return driver.findElements(selector).size()>0;
   }

    public boolean isElementVisible(By selector){
        return driver.findElement(selector).isDisplayed();
    }

    public void jsDirectClickUsingDOM_GEBi(String key) throws IOException {
        JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("document.getElementById(\'"+propertyKeysLoader(key) +"\').click();");
        js.executeScript(stringBuilder.toString());

    }

    public void jsCodeExecution(String jsCode){
        JavascriptExecutor js = (JavascriptExecutor)driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append(jsCode);
        js.executeScript(stringBuilder.toString());
    }

    public void jsDirectClickUsingDOM_GEBTagName(String tagName,int argNum) throws IOException {
        JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
//        stringBuilder.append("document.getElementsByClassName(\'"+propertyKeysLoader(key) +"\')["+argArrNum+"].click();");
//        stringBuilder.append("document.getElementsByTagName(\'"+tagName+"\')[document.getElementsByTagName('div').length-"+argNum+"].click()");
        stringBuilder.append("document.getElementsByTagName(\'"+tagName+"\')[document.getElementsByTagName(\'"+tagName+"\').length-"+argNum+"].click()");
        js.executeScript(stringBuilder.toString());

    }

    public String jsGetColor(String css){

        JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x=$(\'"+css+"\');");
        stringBuilder.append("return x.css('color')");
        String res= (String) js.executeScript(stringBuilder.toString());
        return res;

    }

    public String randomStringGenerator(){
        return  RandomStringUtils.randomAlphabetic(8);
    }

    public String randomIntSequenceGenerator(){
        return RandomStringUtils.randomNumeric(6);
    }
} 
```

因此，总结一下我对您问题的基本解决方案是：

```
 static WebDriver driver;   

        private String loginBaseUrl;

        @BeforeClass
        public static void firefoxSetUp() throws MalformedURLException {

              DesiredCapabilities capability = DesiredCapabilities.firefox();

            driver = new FirefoxDriver();  

            driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);
            driver.manage().timeouts().pageLoadTimeout(30, TimeUnit.SECONDS);
            driver.manage().window().setSize(new Dimension(1920, 1080));
        }
        @Before
        public void homePageRefresh() throws IOException {
            driver.manage().deleteAllCookies();
            driver.get(propertyKeysLoader("login.base.url"));
        }

        @AfterClass
        public static void closeFirefox(){
            driver.quit();

        } 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T05:25:04.443

您可以像这样扩展 RemoteWebDriver 并覆盖 startSession 方法：

```
@Override
protected void startSession(Capabilities desiredCapabilities) {
String sid = getPreviousSessionIdFromSomeStorage();
if (sid != null) {
  setSessionId(sid);
  try {
    getCurrentUrl();
  } catch (WebDriverException e) {
    // session is not valid
    sid = null;
  }
}
if (sid == null) {
  super.startSession(desiredCapabilities);
  saveSessionIdToSomeStorage(getSessionId().toString());
}
} 
```

将此代码放在创建驱动程序的类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-31T23:08:37.697

这在[webdriver.io中对我有用](http://webdriver.io/)

```
var webdriverio = require('webdriverjs-angular');
var options = {
    desiredCapabilities: {
        browserName: 'firefox'
    },
    ngRoot: 'html' // main application selector
};

var wd = webdriverio.remote(options).init();

var wd2 = webdriverio.remote(options);
wd2.requestHandler.sessionID=wd.requestHandler.sessionID
wd2.url('http://www.seamless.com'); 
```

# xquery - 在 XQuery 中，使用 eXist，如何获取当前集合的子集合？

> ID：13632859
> 
> 赞同：0
> 
> 时间：2012-11-29T19:04:07.657
> 
> 标签：xquery, exist-db

## 问题

我有一个由 eXist 通过 REST API 执行的查询，它被发布到它需要运行的集合中，例如`/db/foo`or `/db/bar`。在查询中，我想获取当前集合的子集合。那就是：如果发布在 上`/db/foo`，我希望查询返回`xmldb:get-child-collections('/db/foo')`将返回的内容；如果发布在 上`/db/bar`，我希望查询返回`xmldb:get-child-collections('/db/bar')`将返回的内容。但当然，我不希望当前集合的路径在查询中被硬编码。

## 我试过的

*   `xmldb:get-child-collections('.')`，不走运，`.`eXist 不将其理解为“当前集合”。
*   寻找一个返回当前集合路径的[函数](http://demo.exist-db.org/exist/apps/xqfdocs/index.html)`pwd`，就像在 shell 中一样，但我找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T18:41:36.580

使用 REST API，您可以使用`request:get-path-info()`获取“当前集合”的路径。例如：

*   如果您正在执行 GET 或 POST 到`http://www.my-site.com/exist/rest/db/my-collection`.
*   `request:get-path-info()`将返回`/db/my-collection`，这正是您感兴趣的路径的一部分。

# jquery - JQuery Accordion 小部件下拉图标位置不正确

> ID：13632860
> 
> 赞同：0
> 
> 时间：2012-11-29T19:04:09.543
> 
> 标签：jquery, jquery-ui

我根据[http://jqueryui.com/accordion/#custom-icons实现了一个简单的 JQuery 手风琴小部件](http://jqueryui.com/accordion/#custom-icons)

出于某种原因，下拉图标 (ui-icon) 位于我的部分标题文本中：![手风琴小部件](../Images/a4d6f4296bbf0b42a48a90cf8e2c38f7.png)

有没有其他人经历过这个？

**html:**

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Accordion - Default functionality</title>
</head>
<body>
<div id="accordion">
    <h3>Section 1</h3>
    <div>
        <p>
            Mauris mauris ante...shortened.
        </p>
    </div>
    <h3>Section 2</h3>
    <div>
        <p>
            Sed non urna...shortened.
        </p>
    </div>
    <h3>Section 3</h3>
    <div>
        <p>
            Nam enim risus...(shortened).
        </p>
        <ul>
            <li>List item one</li>
            <li>List item two</li>
            <li>List item three</li>
        </ul>
    </div>
    <h3>Section 4</h3>
    <div>
        <p>
            Cras dictum....(shortened).
        </p>
        <p>
            Suspendisse eu nisl...(shortened).
        </p>
    </div>
</div>
</body>
</html>​ 
```

**CSS：**

```
body {
    font-family: "Trebuchet MS", "Helvetica", "Arial",  "Verdana", "sans-serif";
    font-size: 62.5%;
}​ 
```

**javascript:**

```
$("#accordion").accordion();​ 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:21:07.980

我想到了！我为 jquery-ui.css、jquery-1.8.2.js 和 jquery-ui.js 使用 1.8.2 版。我假设有某种冲突。

一旦我更改为以下版本，下拉图标就会正确显示...

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script> 
```

# octave - 凸平方 - matlab

> ID：13632863
> 
> 赞同：0
> 
> 时间：2012-11-29T19:04:30.367
> 
> 标签：octave, matlab

给定一个用鼠标指针顺时针标记的 4 个点的交互式输入，我需要使用 Matlab 检查绘制的形状是否是四边形凸面。我看到一些人建议使用礼品包装算法。我的想法只是使用`tan`，这样如果我的角度大于 180 度，则形状不是凸面。你能建议一个更好的方法吗？感谢您参考以下代码：

```
showImage(imageA)
hold on 
% Initially, the list of points is empty.
xy = [];
n = 0;
% Loop, picking up the points.
disp('Please enter corners of place to insert image in clockwise order.')

for i = 1:4
[xi,yi] = ginput(1);
plot(xi,yi,'yo')
xy(:,i) = [xi;yi];
end

%check if this is a convex quadrillateral
a1 = ( xy(2,2) - xy(2,1) ) / ( xy(1,2)  - xy(1,1) );
a2 = ( xy(2,3) - xy(2,2) ) / ( xy(1,3)  - xy(1,2) ); 
a3 = ( xy(2,4) - xy(2,3) ) / ( xy(1,4)  - xy(1,3) );
a4 = ( xy(2,1) - xy(2,4) ) / ( xy(1,1)  - xy(1,4) );

tan1 = abs( atand( (a2-a1) /( 1+a1*a2) ) );
tan2 = abs( atand( (a3-a2) / (1+a3*a2) ) );
tan3 = abs( atand( (a4-a3) / (1+a4*a3) ) );
tan4 = abs( atand( (a1-a4) / (1+a1*a4) ) );

if ((tan1 > 180) | (tan2 > 180) | (tan3 > 180) | (tan4 > 180))
disp('this is not a convex quadrillateral!!')
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:36:15.173

这是一个非常简单的方法：

*   取 3 个点的所有组合（总共 4 个）。
*   检查第四个点是否在使用这些点作为角定义的三角形中。

如果第四个点中的任何一个在三角形中，则它不是凸的，否则就是凸的。

如果您准备进行 n+1 检查，我认为这通常适用于 n 点。

# html - 将html保存到数据库的安全方法

> ID：13632865
> 
> 赞同：4
> 
> 时间：2012-11-29T19:04:40.917
> 
> 标签：html, asp.net-mvc, encoding, xss, sql-injection

我的页面中有一个文本区域，它是一个 HTML 输入字段。其目的是允许用户注册一个确认 HTML，该 HTML 将在执行特定操作后显示在其用户的浏览器中。您可以将其想象为付款后对贝宝的确认，并将您重定向到一个显示“感谢您的购买”的网站。这已经实现了，但现在我正在考虑用户的安全性（XSS/SQL 注入）。

我想知道的是如何`<script> <embed> <object>`在我的控制器发布操作中安全地过滤掉某些 html 标签，所以如果我检测到 HTML 中有恶意 html，我会在保存之前停止执行。现在我正在这样做：

```
[CustomHandleError]
[HttpPost]
[ValidateAntiForgeryToken]
[AccessDeniedAuthorize(Roles = "Admin,CreateMerchant")]
public ActionResult Create(MerchantDTO merchantModel)
{
   if (ModelState.IsValid)
   {
      if (!IsSafeConfirmationHtml(merchantModel.ConfirmationHtml))
      {
         ModelState.AddModelError("ConfirmationHtml", "Unallowed HTML tags inputted");
         return View("Create", merchantModel);
      }
      .
      .
      .
   }
} 
```

我的 IsSafeConfirmationHTML 定义为

```
private bool IsSafeConfirmationHtml(string html)
{
   if (html.ToLower().Contains("<script") || html.ToLower().Contains("<embed") || html.ToLower().Contains("<object"))
   {
      return false;
   }
   return true;
} 
```

有没有更聪明、更清洁的方法来做到这一点？我的意思是，我不想让误报阻止“对象”、“脚本”等词，但我也不想被将“<”转换为“%3C”等的编码所迷惑。 ..

**Ontopic**：标签内的间距是否有效？示例：`< script > alert("1"); < / script >`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:37:41.087

因此，您可以做的一件事就是在其上运行[UrlDecode](http://msdn.microsoft.com/en-us/library/adwtk1fy.aspx)和[HtmlDecode](http://msdn.microsoft.com/en-us/library/7c5fyk1k.aspx)（html 解码可能是多余的，但这取决于您对脚本的处理方式）。

加快检查速度的另一件事是使用预编译的正则表达式。

```
private static Regex disallowedHtml = new Regex(@"script|embed|object",
     RegexOptions.IgnoreCase);

private bool IsSafeConfirmationHtml(string html)
{
    Match match = disallowedHtml.Match(html);
    return !match.success;
} 
```

静态正则表达式实例消除了除第一次运行之外的每次运行的大部分正则表达式开销，使得正则表达式匹配比运行 3 个单独的包含要快得多。您可以使正则表达式足够复杂，以搜索左尖括号、html 实体和 url 编码字符，匹配这些字符和实际标签名称等之间的任何空格。多年来，Microsoft正[则表达式信息已经变得相当不错。](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)

我仍然不会说这可以让您 100% 免受用户（上传者？客户？正确的词取决于您的业务模型是什么）对您网站的访问者运行 XSS 或注入攻击。它们可以指向以 mime 类型 x-application 或类似形式返回的图像或 css 文件。如今，HTML 的变化非常迅速。防止这种情况发生的最好方法是让人类参与批准过程，但是人类会犯错误，计算机可能会被愚弄，而且没有法律规定这两个事件不能同时发生。但是你设置一些保护措施是对的。

# visual-studio-2012 - Visual Studio 2012 签名

> ID：13632866
> 
> 赞同：2
> 
> 时间：2012-11-29T19:04:48.853
> 
> 标签：visual-studio-2012, code-signing, post-build-event

我想让 Visual Studio 签署我的程序集。

我已经过了可以指定我的 PFX 文件而没有任何抱怨的地步。这并不容易，因为我有两个错误。是的，我必须确保我使用了 openssl（stackoverflow 文章帮助解决了该错误）和 microsoft 文章帮助解决了第一条错误消息，我必须在其中导入 PFX 文件，清除/设置选项，然后重新导出为不包括下游证书。

当我去构建一个项目时，我收到警告：

> 选项 'keycontainer' 覆盖源文件或添加的模块中给出的属性 'System.Reflection.AssemblyKeyNameAttribute'

自然地，我的集会没有得到签名。

我做了一些研究，我看到的最好的建议是在项目文件中添加一行（没有帮助）或使用我现在正在做的构建后事件手动签名，但我仍然想获得签名工具工作。

如果绝大多数开发人员无法使用该功能，我无法想象微软会提供 Singing 选项卡。

哎呀，随着新的 Visual Studio 2012 Update 1 版本的发布，我原以为签署程序集（DLL 或 EXE）将是小菜一碟。任务不过如此。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T19:17:14.520

如果没有更多信息，我无法判断这是否会解决您的问题。但我会发布对我有用的答案。就我而言，我已经转换了一个旧项目（VS 2012 之前），该项目在 AssemblyInfo.cs 文件中指定了签名，如下所示......

```
[assembly: AssemblyDelaySign(false)]
[assembly: AssemblyKeyFile("")]
[assembly: AssemblyKeyName("")] 
```

正如您所描述的，我通常使用项目/属性中的“签名”选项卡。警告消息本质上是在说“嘿，你已经在源代码中告诉我一些不同的东西！”

我的解决方案是删除 AssemblyInfo.cs 文件中的上述三行。我意识到这可能是在您的原始帖子之后的方式，但我希望有人觉得它有用。

# php - Zend - 通过视图助手从另一个控制器的表单访问数据

> ID：13632867
> 
> 赞同：0
> 
> 时间：2012-11-29T19:04:49.120
> 
> 标签：php, forms, zend-framework, controller

在关于如何解决我的一个问题（http://stackoverflow.com/questions/13609611/using-several-modules-in-the-same-view）的一些问题之后，我还有另一个问题。

我在视图助手中创建了一个表单，因为我需要在另一个控制器中访问此表单的结果。

所以这是我的视图助手，名为 QuickSearch.php

```
class Zend_View_Helper_QuickSearch extends Zend_View_Helper_Abstract
{
    public function quickSearch()
    {
    $form = new Application_Form_QuickSearchForm();
    return $form;
    }
} 
```

调用 QuickSearchForm.php

```
class Application_Form_QuickSearchForm extends Zend_Form 
```

{

```
public function init()
{
    $this->setMethod('post');
    $this->setAction('/search/quicksearch');
    $this->addElement('text', 'searchLocation', array(
            'label' => 'Location:',
            'required' => true,
            'filters' => array('StringToUpper')
            ));
    //[some other elements]
    $this->addElement('submit', 'submit', array(
            'ignore'   => true,
            'label'    => 'Search',
    ));
} 
```

在我的主页视图中，我调用 viewhelper

```
echo $this->quickSearch(); 
```

哪个有效，因为我可以访问我的表格。

当我提交表单时， /search/quicksearch 被调用，但是当我尝试从表单访问数据时，它似乎是空的。

这是我的搜索控制器（SearchController.php）

```
class SearchController extends Zend_Controller_Action
{

public function init()
{
    /* Initialize action controller here */
}

public function indexAction()
{
    // action body
}

public function quicksearchAction()
{
    $form = new Application_Form_QuickSearchForm();

    if ($this->getRequest()->isPost())
    {
        echo("post");
        $data = $form->getValues();
        echo($data['searchLocation']);
    }

} 
```

}

我放了 echo("post") 来查看我是否收到了 POST 请求，并且每次都有效。唯一显示的是“帖子”，第二个回声不显示任何内容。

我不知道从另一个控制器获取表单数据的方式我不明白什么。

有人可以帮我弄这个吗 ？我只是不知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:32:08.927

您需要将发布数据传递给表单对象。执行此操作的典型方法是调用`isValid()`表单的方法（它也验证提交的数据）：

```
public function quicksearchAction()
{
    $form = new Application_Form_QuickSearchForm();

    if ($this->getRequest()->isPost()) {
        if ($form->isValid($this->getRequest()->getPost()) {
            $data = $form->getValues();
            echo $data['searchLocation'];
        }
    }
} 
```

# java - liblinear（在java中）简单的例子不起作用

> ID：13632871
> 
> 赞同：4
> 
> 时间：2012-11-29T19:05:02.103
> 
> 标签：java, math, linear-algebra, linear-regression

我正在尝试操作 liblinear 库（java），并且我正在使用带有[此处](http://liblinear.bwaldvogel.de/)找到的模板的超级简单示例。案例示例是确定形状是正方形还是矩形。

这是我的代码：

```
import java.io.File;
import java.io.IOException;

import de.bwaldvogel.liblinear.Feature;
import de.bwaldvogel.liblinear.FeatureNode;
import de.bwaldvogel.liblinear.Linear;
import de.bwaldvogel.liblinear.Model;
import de.bwaldvogel.liblinear.Parameter;
import de.bwaldvogel.liblinear.Problem;
import de.bwaldvogel.liblinear.SolverType;

public class Main {

    static int NUM_OF_TS_EXAMPLES = 8;

    // 1 = square, -1 = non-square
    static double[] GROUPS_ARRAY = {1, 1, 1, 1, -1, -1, -1, -1};

    // squares
    static FeatureNode[] shape1 = {new FeatureNode(1, 2), new FeatureNode(2, 2)};
    static FeatureNode[] shape2 = {new FeatureNode(1, 4), new FeatureNode(2, 4)};
    static FeatureNode[] shape3 = {new FeatureNode(1, 9), new FeatureNode(2, 9)};
    static FeatureNode[] shape4 = {new FeatureNode(1, 10), new FeatureNode(2, 10)};

    // not squares
    static FeatureNode[] shape5 = {new FeatureNode(1, 5), new FeatureNode(2, 6)};
    static FeatureNode[] shape6 = {new FeatureNode(1, 3), new FeatureNode(2, 4)};
    static FeatureNode[] shape7 = {new FeatureNode(1, 6), new FeatureNode(2, 9)};
    static FeatureNode[] shape8 = {new FeatureNode(1, 4), new FeatureNode(2, 2)};

    // unknown squares
    static FeatureNode[] unkown1 = {new FeatureNode(1, 32), new FeatureNode(2, 32)};
    static FeatureNode[] unkown2 = {new FeatureNode(1, 4), new FeatureNode(2, 2)};
    static FeatureNode[] unkown3 = {new FeatureNode(1, 4), new FeatureNode(2, 2)};
    static FeatureNode[][] trainingSetWithUnknown = {
        shape1,
        shape2,
        shape3,
        shape4,
        shape5,
        shape6,
        shape7,
        shape8
    };
    public static void main(String[] args) throws IOException {

        Problem problem = new Problem();

        // number of training examples
        problem.l = NUM_OF_TS_EXAMPLES;

        // number of features
        problem.n = NUM_OF_TS_EXAMPLES + 1;

        // problem.x = ... // feature nodes
        problem.x = trainingSetWithUnknown;

        // problem.y = ... // target values
        problem.y = GROUPS_ARRAY;

        SolverType solver = SolverType.L2R_LR; // -s 0
        double C = 1.0; // cost of constraints violation
        double eps = 0.01; // stopping criteria

        Parameter parameter = new Parameter(solver, C, eps);
        Model model = Linear.train(problem, parameter);
        File modelFile = new File("model");
        model.save(modelFile);
        // load model or use it directly
        model = Model.load(modelFile);

        Feature[] instance = new FeatureNode[5];
        double prediction = Linear.predict(model, instance);
    }
} 
```

运行它后，我在控制台中得到了这个结果：

```
iter  1 act 1.969e-02 pre 1.966e-02 delta 4.283e-03 f 5.545e+00 |g| 9.192e+00 CG   1

Exception in thread "main" java.lang.NullPointerException
at de.bwaldvogel.liblinear.Linear.predictValues(Linear.java:370)
at de.bwaldvogel.liblinear.Linear.predict(Linear.java:316)
at Main.main(Main.java:73) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T21:25:05.013

我猜想的原因`NullPointerException`是您将未初始化的特征数组传递给预测函数 - 尝试先初始化`instance`：

```
Feature[] instance = { new FeatureNode(1, 4), new FeatureNode(2, 2) }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-25T12:15:44.437

除了那个 NullPointer 问题，这个例子只产生了奇怪的预测，主要是因为特征数量错误，这是我的版本：

```
public class LibLinearTest {

// 1 = quadratic, -1 = non-quadratic
static double[] GROUPS_ARRAY = {1, 1, 1, 1, -1, -1, -1, -1};

// quadratic
static FeatureNode[] tp1 = {new FeatureNode(1,  2), new FeatureNode(2,   4)};
static FeatureNode[] tp2 = {new FeatureNode(1,  4), new FeatureNode(2,   8)};
static FeatureNode[] tp3 = {new FeatureNode(1,  9), new FeatureNode(2,  81)};
static FeatureNode[] tp4 = {new FeatureNode(1, 10), new FeatureNode(2, 100)};

// not quadratic
static FeatureNode[] tp5 = {new FeatureNode(1, 5), new FeatureNode(2, 6)};
static FeatureNode[] tp6 = {new FeatureNode(1, 3), new FeatureNode(2, 4)};
static FeatureNode[] tp7 = {new FeatureNode(1, 6), new FeatureNode(2, 9)};
static FeatureNode[] tp8 = {new FeatureNode(1, 4), new FeatureNode(2, 2)};

// unknown 
static FeatureNode[] up1 = {new FeatureNode(1, 32), new FeatureNode(2, 32)};
static FeatureNode[] up2 = {new FeatureNode(1,  5), new FeatureNode(2, 25)};
static FeatureNode[] up3 = {new FeatureNode(1,  4), new FeatureNode(2,  2)};

static FeatureNode[][] trainingSetWithUnknown = {
    tp1, tp2,  tp3, tp4, tp5, tp6, tp7, tp8
};

public static void main(String[] args) throws IOException {

    Problem problem = new Problem();
    problem.l = trainingSetWithUnknown.length;
    problem.n = 2;
    problem.x = trainingSetWithUnknown;
    problem.y = GROUPS_ARRAY;

    SolverType solver = SolverType.L2R_LR; // -s 0
    double C = 1.0; // cost of constraints violation
    double eps = 0.001; // stopping criteria

    Parameter parameter = new Parameter(solver, C, eps);
    Model model = Linear.train(problem, parameter);

    Feature[] instance = tp1;
    double prediction = Linear.predict(model, instance);

    System.out.println("prediction : " + prediction);    
}
} 
```

# android - 通过包含 8 次另一个布局来构建电路板布局：唯一的单元格标识符？

> ID：13632876
> 
> 赞同：1
> 
> 时间：2012-11-29T19:05:46.253
> 
> 标签：android, android-layout

我想设计一个棋盘，但是通过包含 8 个包含 8 个 ImageView 的另一个布局。那么，我怎样才能为所有 64 个正方形组件拥有唯一的 android:id 呢？

我希望包含的布局设计为：

LinearLayout（方向：水平）-> ImageView -> ... -> ImageView

另一点，为父级和包含的布局使用 LinearLayout 是最佳性能技术吗？我想过使用RelativeLayout，但我不知道我该如何管理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:20:12.937

我会使用 TableLayout，因为这里提到的 Code Guru 是示例代码，可以帮助您创建您正在寻找的棋盘

```
<?xml version="1.0" encoding="utf-8"?>
    <TableLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_horizontal"
    android:background="#FFFFFF" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/block1"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image1 />

        <ImageView
            android:id="@+id/block2"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image2 />

        <ImageView
            android:id="@+id/block3"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image1 />

        <ImageView
            android:id="@+id/block4"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image2 />

        <ImageView
            android:id="@+id/block5"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image1 />

      <ImageView
            android:id="@+id/block6"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image2 />

    <ImageView
            android:id="@+id/block7"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image1 />

  <ImageView
            android:id="@+id/block8"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image2 />
    </TableRow>

<TableRow
        android:id="@+id/tableRow2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/block9"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image1 />

        <ImageView
            android:id="@+id/block10"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image2 />

        <ImageView
            android:id="@+id/block11"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image1 />

        <ImageView
            android:id="@+id/block12"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image2 />

        <ImageView
            android:id="@+id/block13"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image1 />

      <ImageView
            android:id="@+id/block14"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image2 />

    <ImageView
            android:id="@+id/block15"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image1 />

  <ImageView
            android:id="@+id/block16"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image2 />
    </TableRow> 
```

依此类推……如果您想交替使用白色和黑色背景颜色而不是图像，则可以。

希望这可以帮助！

# c++ - 计时器，将事件保存到 C++ 中的数组

> ID：13632878
> 
> 赞同：1
> 
> 时间：2012-11-29T19:06:24.220
> 
> 标签：c++

我想在 C++ 中创建一个计时器，当用户按下一个按钮时，程序会将按下的按钮的名称和按下的时间记录到一个数组中。

稍后，我希望能够“回放”用户所做的事情，例如。启动计时器，并在阵列中正确记录的时间模拟按钮按下。

最好的起点是哪里？C++中有定时器功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:46:06.327

你可以做这样的事情

```
struct ButtonEvent{
     EventInfo ei;
     std::chrono::milliseconds time_stamp;

};

struct Recorder{
    std::chrono::steady_clock::time_point start_time_;

    std::deque<ButtonEvent> events_;

void StartRecording(){
    start_time_ = std::chrono::steady_clock::now();
}

    void HandleEvent(EventInfo e){
        ButtonEvent be;
        be.time_stamp = std::chrono::duration_cast<std::chrono::milliseconds>(std::chrono::steady_clock::now() -  start_time_);
        be.ei = e;
        events_.push_back(be);
    }

    void Playback(){
        std::chrono::steady_clock::time_point 
        playback_time =std::chrono::steady_clock::now() ;
        while(events_.size()){
              std::chrono::milliseconds ts = 
                 std::chrono::duration_cast<std::chrono::milliseconds>(std::chrono::steady_clock::now() - playback_time);
             if(events_.front().time_stamp <= ts){
             EventInfo e = events_.front().ei;
             // playback the event
             //...

             events_.pop_front();
        }

        // Some kind of sleep if you want

    }

} 
```

};

其中 EventInfo 是具有回放事件所需信息的结构

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:38:24.670

请参阅如何在 C++ 中获取当前时间和日期的答案[？](https://stackoverflow.com/questions/997946/c-get-current-time-and-date). C++ 中时间的标准库是来自 C 的 ctime。正如答案所述，如果您想要更现代的日期时间 API [http://www.boost.org/doc/libs/1_52_0/doc/html/ ，请使用 boost date_time/date_time_io.html](http://www.boost.org/doc/libs/1_52_0/doc/html/date_time/date_time_io.html)

# c++ - 有没有办法确保 C++ .h 与相应的 C++ .cpp 文件匹配？

> ID：13632884
> 
> 赞同：3
> 
> 时间：2012-11-29T19:06:43.997
> 
> 标签：c++, compilation, java-native-interface, javah

有问题的代码是 Java 和本机代码之间的 JNI 接口。h 文件由 javah 实用程序生成，而 cpp 文件由人创建。

如果 Java 部分被重命名，那么 javah 会生成具有相应名称的函数原型，就像它应该的那样。但是，没有什么可以确保 cpp 文件中的函数也被重命名——所有编译都照常进行。仅当 Java 代码在运行时调用本机 API 时才会出现此问题。

javah 生成的 h 文件与编译过程中人类生成的实现 cpp 文件之间如何发现不匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:19:52.863

在 C++ 代码中的某处引用生成的函数声明怎么样？

例如，在（比如说）`generated_check.cpp`创建一个使用虚拟参数调用原型的函数（但从不调用它）：

```
#include "generated.h" // your javah output

static void neverCalled() {
     // Compiler errors here mean that the functions have changed:
     Java_com_example_package_MyClass_myFunc1(0, 0, 0);
     Java_com_example_package_MyClass_myFunc2(0);
} 
```

**编辑，以回应您的评论：**

另一种（或补充）方法是创建一个作为构建过程的一部分运行的脚本，并在运行 javah 之前将其备份旧`generated.h`版本，如果新版本与旧版本不同，则会导致构建错误`generated.h`。它甚至可以运行一个*diff*程序来给你一个错误信息来查明变化。

# c# - 通过2个控件过滤gridview（下拉列表）

> ID：13632886
> 
> 赞同：0
> 
> 时间：2012-11-29T19:06:47.770
> 
> 标签：c#, visual-studio-2010, ms-access

我的页面上有一个列表视图，我想通过两个下拉列表进行过滤，现在我已经实现了列表视图和控件。

我发现两个控件不能同时工作。第一个控件可以正常工作，但是无论是否设置了第一个控件（默认显示全部），第二个控件都不会。

有没有办法解决这个问题？下面我编写了我在 VS 中使用的代码以及 C# 代码。

**视觉工作室**

```
 <asp:AccessDataSource ID="AccessDataSource1" runat="server" 
        DataFile="~/App_Data/ASPNetDB.mdb" 
        SelectCommand="SELECT * FROM [Library]">
        <SelectParameters>
            <asp:ControlParameter ControlID="SideContent:DropDownList1" Name="Category" 
                PropertyName="SelectedValue" Type="String" DefaultValue="" />
            <asp:ControlParameter ControlID="SideContent:DropDownList2" Name="Region" 
                PropertyName="SelectedValue" Type="String" DefaultValue="" />
        </SelectParameters>
    </asp:AccessDataSource>

Category:
<asp:DropDownList ID="DropDownList1" runat="server"
        DataSourceID="AccessDataSource2" DataTextField="CatName" 
        DataValueField="CatID" AppendDataBoundItems="true" AutoPostBack="true" 
        onselectedindexchanged="DropDownList1_SelectedIndexChanged">
            <asp:ListItem Value="0" Selected ="True" >All Categories</asp:ListItem>
</asp:DropDownList>

    <asp:AccessDataSource ID="AccessDataSource2" runat="server" 
        DataFile="~/App_Data/ASPNetDB.mdb" SelectCommand="SELECT * FROM [CategoryTable]">
    </asp:AccessDataSource>

Region:
    <asp:DropDownList ID="DropDownList2" runat="server" 
        DataSourceID="AccessDataSource3" DataTextField="RegionName" 
        DataValueField="RegionID" AppendDataBoundItems="true" AutoPostBack="true"  
        onselectedindexchanged="DropDownList2_SelectedIndexChanged">
        <asp:ListItem Value="0" Selected ="True" >All Regions</asp:ListItem>
    </asp:DropDownList>
    <asp:AccessDataSource ID="AccessDataSource3" runat="server" 
        DataFile="~/App_Data/ASPNetDB.mdb" 
        SelectCommand="SELECT * FROM [RegionsTable]">
    </asp:AccessDataSource> 
```

**C＃**

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{

    var Category = DropDownList1.SelectedValue;
    int intCategory = Convert.ToInt16(Category);

    if (intCategory> 0)
    {
        AccessDataSource1.SelectCommand = "SELECT * FROM [CategoryTable] WHERE ([Category] = ?)";
    }
    else
    {
        AccessDataSource1.SelectCommand = "SELECT * FROM [CategoryTable]";
    }

}

protected void DropDownList2_SelectedIndexChanged(object sender, EventArgs e)
{

    var Region = DropDownList2.SelectedValue;
    int intRegion = Convert.ToInt16(Region);

    if (intRegion > 0)
    {
        AccessDataSource1.SelectCommand = "SELECT * FROM [RegionTable] WHERE ([Region] = ?)";
        //Response.Write(intRegion);
    }
    else
    {
        AccessDataSource1.SelectCommand = "SELECT * FROM [RegionTable]";
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T06:36:34.557

C＃：

```
int category = 0, region = 0;
    protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {

        var Category = DropDownList1.SelectedValue;
        int intCategory = Convert.ToInt16(Category);
        category = intCategory;
        if (category > 0)
        {
            if (region > 0)
            {
                AccessDataSource1.SelectCommand = "SELECT * FROM [CategoryTable] WHERE ([Category] = ?) AND ([Region]) = ?";
            }
            else
            {
                AccessDataSource1.SelectCommand = "SELECT * FROM [CategoryTable] WHERE ([Category] = ?)";
            }
        }
        else
        {
            AccessDataSource1.SelectCommand = "SELECT * FROM [CategoryTable]";
        }

    }

    protected void DropDownList2_SelectedIndexChanged(object sender, EventArgs e)
    {

        var Region = DropDownList2.SelectedValue;
        int intRegion = Convert.ToInt16(Region);
        region = intRegion;
        if (region > 0)
        {
            if (category > 0)
            {
                AccessDataSource1.SelectCommand = "SELECT * FROM [RegionTable] WHERE ([Region] = ?) AND ([Category]) = ?";
            }
            else
            {
                AccessDataSource1.SelectCommand = "SELECT * FROM [RegionTable] WHERE ([Region] = ?)";
            }
            //Response.Write(intRegion);
        }
        else
        {
            AccessDataSource1.SelectCommand = "SELECT * FROM [RegionTable]";
        }

    } 
```

# vba - Excel中的数据透视表宏字段名称错误

> ID：13632895
> 
> 赞同：0
> 
> 时间：2012-11-29T19:07:34.377
> 
> 标签：vba, excel, excel-2010

我为插入数据透视表而创建的宏收到以下错误。它之前工作没有任何问题，我没有改变任何东西。

**这是错误**
![在此处输入图像描述](../Images/e69e531ab0893327a5537ef8adae667d.png)

**这是我的代码**

```
 Cells.Select
    Sheets.Add.Name = "Detail"
    ActiveWorkbook.PivotCaches.Create(SourceType:=xlDatabase, SourceData:= _
        "Log!R1C1:R65536C11", Version:=xlPivotTableVersion10).CreatePivotTable _
        TableDestination:="Detail!R3C1", TableName:="PivotTable1", DefaultVersion _
        :=xlPivotTableVersion10
    Sheets("Detail").Select
    Cells(3, 1).Select 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:31:56.583

该错误表明您有一个未命名的列。返回并确保 SourceData 范围内的所有列（即第 1 到 11 列）都没有空白标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:33:39.267

标题行中的空白名称可能会发生这种情况，或者如果您正在创建一个与 PivotTable1 同名的数据透视表（这就是它第一次工作的原因）。

您是否在过去删除了数据透视表？

# r - 拆分 vs 按 + 子集

> ID：13632904
> 
> 赞同：2
> 
> 时间：2012-11-29T19:08:21.697
> 
> 标签：r, split, names

我想基于两列拆分数据帧，但我希望输出是数据帧的二维矩阵，而不是数据帧的平面列表。我可以实现我想要使用的东西`by()`，`subset`但我被告知（我认为是 Ripley）应该避免`subset`在包开发中使用。是否有`split`保留暗名的优雅替代方案（可能使用 ）？

```
# sample data
df <- data.frame(x=rnorm(20), y=rnorm(20), v1=rep(letters[1:5],each=4), v2=rep(LETTERS[6:9]))

# what I did previously
submat <- by(df, list(df$v1,df$v2), subset)
dim(submat) # 5 x 4
dimnames(submat) # "a" "b" "c" "d" "e" ; "F" "G" "H" "I" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:52:48.603

要获得您所要求的数据帧矩阵，请`tapply`与返回特定数据帧子集但行名称与因子级别匹配的函数一起使用。

```
> dfmat <- with(df, tapply(1:NROW(df), list(v1,v2), function(idx) df[idx,] ) )
> dfmat[1,1]  # items that are in a single dataframe accessed via matrix indexing
[[1]]
           x         y v1 v2
1 -0.5604756 -1.067824  a  F

> dfmat
  F      G      H      I     
a List,4 List,4 List,4 List,4
b List,4 List,4 List,4 List,4
c List,4 List,4 List,4 List,4
d List,4 List,4 List,4 List,4
e List,4 List,4 List,4 List,4 
```

将列表作为条目的矩阵被`print`-ed 以仅显示对象类型和条目数（在本例中为列）。注意每个条目是一个包含一个项目的列表，这样dataframe属性保持不变，但需要“向下钻取”才能获得宝藏：编辑：添加了dfmat的属性：

```
>  attributes(dfmat)
$dim
[1] 5 4

$dimnames
$dimnames[[1]]
[1] "a" "b" "c" "d" "e"

$dimnames[[2]]
[1] "F" "G" "H" "I"    
#------------
> attributes( dfmat[1,1])
NULL
#------------
> attributes( dfmat[1,1][[1]])
$names
[1] "x"  "y"  "v1" "v2"

$row.names
[1] 1

$class
[1] "data.frame" 
```

# java - 在 Swing 中保持视图状态

> ID：13632906
> 
> 赞同：3
> 
> 时间：2012-11-29T19:08:30.147
> 
> 标签：java, swing

我有超过 50 个视图（表单、对话框、菜单、弹出窗口等）的大型 Swing 应用程序。我需要的是一些智能的方式来保持视图状态并使它们恢复活力。用户希望保留许多表格、拆分器、复选框和其他视觉元素。当然，我可以手动执行此操作.. 但是在这样的规模上，这将是一个非常乏味的编码和到处都是错误。

问题：是否有任何框架、库或产品可以轻松做到这一点？这个问题听起来很普遍，所以我宁愿找到可靠的东西，而不是重新发明轮子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:24:20.200

首先，将数据（模型）与 Swing 组件（视图）分开

拥有完整的数据模型后，您可以使用 XML 生成器/XML 解析器分别保存和恢复您的数据模型。您可以使用关系数据库来保存和恢复您的数据模型。对模型中的数据量最有意义的方法。

[我在这个答案](https://stackoverflow.com/questions/13423696/restart-replay-java-game-without-restarting-the-gui/13423840#13423840)中有一个 Java Swing 模型和一个视图的示例。

编辑添加：Dima 的断言之一是以*具有 20 列 5 的 JTable 为例，用户在隐藏其他列的同时使列可见，同时也使列具有一定宽度。*

美好的。TableModel、列可见性布尔值和列宽整数或双精度数最好位于模型中的某个位置。

按照我的其他答案的链接，查看我的 GUI 状态数据是模型的一部分。

# php - Zend Studio 9 调试 - 查看所有变量内容

> ID：13632909
> 
> 赞同：1
> 
> 时间：2012-11-29T19:08:38.007
> 
> 标签：php, zend-studio

在 Zend Studio 9 中调试时，如果我将鼠标悬停在一个变量上，我只能看到它的一部分内容，最多 1024 个。我有一个分配有大量文本的 var。

如何在 Zend 中查看变量的全部内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:13:47.503

在调试透视图中，您应该有一个“变量”视图和“参数堆栈”视图（通常在右侧面板中）。它应该列出当前范围内的所有变量（包括像 $_POST 和 $_GET 数组这样的全局变量）。在其中任何一个中，您都应该能够看到正在存储的完整值——您甚至可以深入到数组和对象中。

默认情况下，您不会在 PHP 透视图中拥有这些，但您可以通过 Window->Show View->Other 并从“debug”文件夹中选择它们来添加它们。

# c - sprintf 的简单使用失败

> ID：13632913
> 
> 赞同：1
> 
> 时间：2012-11-29T19:08:50.040
> 
> 标签：c, printf, stdio

如果我跑

```
filename="heat.dat";
prtdat(u_x_length, u_y_length, u[iz],filename); 
```

它工作正常。如果我将第一行更改为

```
printf("%d",sprintf(filename,"heat.dat")); 
```

输出为 8，然后我的程序崩溃了。为什么？？我的实际目标是使用`sprintf(filename,"heat%dof%d.dat",rank,numtasks)`.

如果您需要 prtdat 例程，请执行以下操作：

```
void prtdat(int u_x_length, int u_y_length, float *u, char *fnam) {
int ix, iy;
FILE *fp;

fp = fopen(fnam, "w");
for (iy = 0; iy < u_y_length; iy++) 
      for (ix = 0; ix < u_x_length; ix++) 
      {
        fprintf(fp, "%6.1f", *(u+iy*u_x_length+ix));
        if (ix != u_x_length-1) 
          fprintf(fp, " ");
        else
          fprintf(fp, "\n");
      }
fclose(fp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:12:34.650

这条线

```
filename="heat.dat"; 
```

表明这`filename`是一个`[const] char *`指针。在那种情况下，为了做

```
sprintf(filename, "heat.dat") 
```

您必须预先分配一个可写的内存缓冲区，该缓冲区`filename`将指向并且足够大以容纳`"heat.dat"`字符串。您使用什么方法来分配该缓冲区？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:14:57.797

`"heat.dat"`在您的代码中是一个常量字符串文字。它分配在程序的只读数据段中。因此，您的指针在分配`filename`后指向只读存储器。`filename="heat.dat";`结果是未定义的行为。为了使您的想法起作用，您必须`filename`指向一个足够大的非常量内存来存储您尝试存储在该内存中的字符串。例如：

```
char filename[256]; /* This is the key - a non-constant memory is allocated on stack */
printf("%d",sprintf(filename,"heat.dat")); /* sprintf now does not crash */ 
```

# java - Java中的泛型类中的“T extends Junk”是什么意思？

> ID：13632916
> 
> 赞同：1
> 
> 时间：2012-11-29T19:08:58.727
> 
> 标签：java, generics

我试图理解这里发生的事情的这种表示法[示例也在下面](http://www.angelikalanger.com/GenericsFAQ/FAQSections/TypeParameters.html#FAQ106)。我正在寻找是否有人可以提供额外的代码来帮助我理解这一点。如何用 T 扩展垃圾？这意味着什么？

```
public class Junk<T extends Junk>
{

    public Junk()
    {

    }

    public T returnType()
    {
        return null; //? what would I even return
    }

    //what would I do to make sense of this class
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:11:02.337

请原谅我做出有根据的猜测，但是，

看起来`T`是一个未定义的类型，

该语句`<T extends junk>`看起来像一个约束，以确保`T`源自`Junk`

所以如果你有一个像

```
public class SmallJunk extends Junk
{

} 
```

then`T`可以是 a `SmallJunk`，但不能是其他类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T19:16:44.510

`T`是泛型类型参数。你知道它是垃圾，或者它的子类。要从您的方法返回任何有用的东西，您需要使用相同类型的其他一些方法。例如：

```
public class Junk<T extends Junk> {
    T var;

    public void setT(T var) {
        this.var = var;
    }

    public T returnType(){
        return var;
    }
} 
```

它可以通过创建指定类型参数的实例来使用：

```
Junk junk = new Junk<Junk>();
junk.setT(new Junk<Junk>());
junk.returnType(); 
```

这比简单地使用“Junk”而不是“T”更有用，因为可以使用子类型而不会失去类型安全性。如果你有一个 subclass `SubclassJunk`，那么你可以这样做：

```
Junk junk = new Junk<SubclassJunk>();
junk.setT(new SubclassJunk<Junk>());
SubclassJunk subclass = junk.returnType(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T19:12:17.920

`class Junk<T extends Junk>`是 Java 中泛型编程的语法。这意味着在类中使用该类型的任何地方，*它*`T`都必须代表.*`Junk`*

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T19:13:19.870

给定

```
public class junk<T extends junk<T>>
{

    public T returnType()
    {
        return (T)this;
    }
} 
```

你会把它扩展为

```
public class Subclass extends junk<Subclass> {
} 
```

然后继承的`returnType`方法将返回`Subclass`. 标准 Java 库中这种模式最突出的例子是`enum`类型，其中枚举`Foo`成为扩展的类`Enum<Foo>`*

# wcf - 客户端可以同时使用 WCF 和 RIA 服务端点吗？

> ID：13632917
> 
> 赞同：0
> 
> 时间：2012-11-29T19:09:04.000
> 
> 标签：wcf, silverlight, wcf-ria-services

我需要在 Silverlight 客户端上为 WCF 和 RIA 服务端点配置端点。这可能吗？如果是这样，有什么陷阱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:50:01.833

我认为我可以说的一件事是两者之间存在一些重叠，事实上 RIA 已经在使用 WCF，但只是创建了另一个层以更轻松地使用 SOAP 和 JSON（很好，因为 silverlight 在客户端中运行并且这些数据结构是自然适用于小迁移），只要您的服务足够基本，您就可以使用其中的任何一个。

但对 RIA 的总体需求是 Silverlight 不能执行像更新数据库这样的“侵入式”任务，因此需要创建一个轻量级服务基础架构来帮助您完成这些任务。

如果您曾经认为 RIA 服务合同也可能对其他客户端有用，那么您可能会通过将其移植到正常的 WCF 平台来获得一些好处，这将为您提供更多的灵活性和可靠性。

我希望这对讨论有所帮助，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:38:23.837

我终于让我的客户同时使用这两个端点。我的烦恼与存在两种类型的端点无关，尽管我认为它们确实如此。如果有人对陷阱有什么要补充的，我会接受他们的回答，否则我认为答案是肯定的。我认为这是因为 RIA 服务基本上是 WCF。

# python - 如何实现可选的第一个参数（重现 slice() 行为）

> ID：13632919
> 
> 赞同：5
> 
> 时间：2012-11-29T19:09:19.880
> 
> 标签：python

> **可能重复：**
> [内置范围函数如何接受一个或三个参数？](https://stackoverflow.com/questions/13366293/how-can-the-built-in-range-function-take-a-single-argument-or-three)

Python 文档[`slice()`](http://docs.python.org/2/library/functions.html#slice)列出了以下方法签名：

> **切片**（*停止*）
> **切片**（开始，停止[，步骤]）

以下是创建具有不同数量参数的切片对象的几个示例：

```
>>> slice(8)
slice(None, 8, None)
>>> slice(4, 8)
slice(4, 8, None)
>>> slice(4, 8, 2)
slice(4, 8, 2) 
```

请注意，如果您`slice()`使用单个参数调用，则该参数将用作`stop`属性（具有两个或三个参数签名的第二个参数）。

由于 Python 中不存在函数重载，因此允许可变数量的参数的典型方法是`None`用作默认值，例如，重现上述行为的尝试如下：

```
class myslice(object):
    def __init__(self, start, stop=None, step=None):
        if stop is None and step is None:
            # only one argument was provided, so use first argument as self.stop
            self.start = None
            self.stop = start
        else:
            self.start = start
            self.stop = stop
        self.step = step

    def __repr__(self):
        return 'myslice({}, {}, {})'.format(self.start, self.stop, self.step) 
```

但是，这假定这`None`不是可以提供的值`stop`，请注意我的实现和之间的以下行为差异`slice()`：

```
>>> slice(1, None)
slice(1, None, None)
>>> myslice(1, None)
myslice(None, 1, None) 
```

是否有其他值可以用来代替`None`表明该参数绝对没有提供？或者，除了默认参数值之外，还有其他方法可以实现此行为吗？

**编辑：**顺便说一句，在 CPython 中，[`slice()`是在 C 中实现的](http://hg.python.org/releasing/2.7.3/file/7bb96963d067/Objects/sliceobject.c#l191)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T19:12:20.070

有几种方法可以处理默认参数问题。 `None`是最常见的，但是当`None`它实际上是一个合理的值时，您可以创建一个`sentinel`：

```
sentinel = object()
def func(arg=sentinel):
    if arg is sentinel:
       arg = "default"
    do_code() 
```

这是一个相关的[答案](https://stackoverflow.com/a/13075096/748858)，其中有一些关于使用`Ellipsis`作为哨兵的讨论，`...`也是单例。

* * *

另一种方法是使用`*args`和解包：

```
def func(*args):
   if len(args) == 3:
       start,stop,step=args
   elif len(args) == 2:
       start,stop = args
       step = None
   elif len(args) == 1:
       stop, = args  #Need the comma here.  Could write `stop = args[0]` instead ...
       step = start = None
   else:
       raise TypeError("Wrong number of arguments!") 
```

# quartz-scheduler - 我现有工作的getNextFireTime

> ID：13632920
> 
> 赞同：5
> 
> 时间：2012-11-29T19:09:28.680
> 
> 标签：quartz-scheduler, quartz.net

我尝试了 Quartz.com 的文档并在谷歌上搜索了几个小时……但找不到一篇关于如何获得下一份工作的好文章（这将在未来被解雇）。

我正在使用 CronTrigger 表达式来安排作业，使用 VB.net (winforms)。工作工作正常......但是我希望我的用户看看它什么时候会下一次火。我将 CronExpression 存储在我的数据库中，我可以使用该表达式向我的最终用户显示**下一个触发日期/时间吗？**或者如果有任何其他可能的方式，请告知（简单的示例）。

谢谢

编辑

以下代码返回下一个作业将在 12 分钟而不是 20 分钟后触发

```
 Dim exp As CronExpression = New CronExpression("0 0/20 * * * ?")
    Dim nextFire As String = exp.GetNextValidTimeAfter(DateTime.Now)
    MsgBox(nextFire) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T10:46:47.653

您可以创建一个新的 JobKey

```
JobKey jobKey = new JobKey(jobName, groupName); 
```

并使用密钥获取作业详细信息：

```
var detail = scheduler.GetJobDetail(jobKey); 
```

这是一个简单的功能，可以满足您的需求：

```
 private DateTime getNextFireTimeForJob(IScheduler scheduler, string jobName, string groupName = "")
    {
        JobKey jobKey = new JobKey(jobName, groupName);
        DateTime nextFireTime = DateTime.MinValue;

        bool isJobExisting = Scheduler.CheckExists(jobKey);
        if (isJobExisting)
        {
            var detail = scheduler.GetJobDetail(jobKey);
            var triggers = scheduler.GetTriggersOfJob(jobKey);

            if (triggers.Count > 0)
            {
                var nextFireTimeUtc = triggers[0].GetNextFireTimeUtc();
                nextFireTime = TimeZone.CurrentTimeZone.ToLocalTime(nextFireTimeUtc.Value.DateTime);
            }
        }

        return (nextFireTime);
    } 
```

仅当每个作业有一个触发器时，它才有效。
如果您的工作中有多个触发器，您可以遍历它们：

```
foreach (ITrigger trigger in triggers)
{
    Console.WriteLine(jobKey.Name);
    Console.WriteLine(detail.Description);
    Console.WriteLine(trigger.Key.Name);
    Console.WriteLine(trigger.Key.Group);
    Console.WriteLine(trigger.GetType().Name);
    Console.WriteLine(scheduler.GetTriggerState(trigger.Key));
    DateTimeOffset? nextFireTime = trigger.GetNextFireTimeUtc();
    if (nextFireTime.HasValue)
    {
        Console.WriteLine(TimeZone.CurrentTimeZone.ToLocalTime(nextFireTime.Value.DateTime).ToString());
    }
} 
```

或使用 Linq ( `System.Linq`) ：

```
 var myTrigger = triggers.Where(f => f.Key.Name == "[trigger name]").SingleOrDefault(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T22:27:38.617

如果您已经知道 cronExpression 那么您可以调用 GetNextValidTimeAfter ，例如

```
CronExpression exp = new CronExpression("0 0 0/1 1/1 * ? *");
var nextFire = exp.GetNextValidTimeAfter(DateTime.Now);
Console.WriteLine(nextFire); 
```

如果你想要更多的火灾时间，那么

```
for(int i=0 ; i< 9; i++)
{
    if (nextFire.HasValue)
    {
        nextFire = exp.GetNextValidTimeAfter(nextFire.Value);        
        Console.WriteLine(nextFire);
     }
} 
```

如果您正在寻找一种更通用的方式来显示现有作业的下一次触发时间，那么请查看[这个](https://stackoverflow.com/questions/12489450/get-all-jobs-in-quartz-net-2-0)问题的答案，即使您不使用 cron 表达式也可以。这是石英版本 2

Quartz 版本 1 获取作业和触发器信息的方法类似于以下方法。

```
 public void GetListOfJobs(IScheduler scheduler)
 {
    var query =
        (from groupName in scheduler.JobGroupNames
         from jobName in scheduler.GetJobNames(groupName)
         let triggers = scheduler.GetTriggersOfJob(jobName, groupName)
         select new 
            { 
                groupName, 
                jobName, 
                triggerInfo = (from trigger in triggers select trigger) 
            }
        );

   foreach (var r in query)
   {
       if (r.triggerInfo.Count() == 0)
       {
           var details = String.Format("No triggers found for : Group {0}  Job {1}", r.groupName, r.jobName);
           Console.WriteLine(details);                   
       }

       foreach (var t in r.triggerInfo)
       {
           var details = String.Format("{0,-50} {9} Next Due {1,30:r} Last Run {2,30:r}  Group {3,-30}, Trigger {4,-50} {5,-50} Scheduled from {6:r} Until {7,30:r} {8,30:r} ",
               t.JobName,
               t.GetNextFireTimeUtc().ToLocalTime(), 
               t.GetPreviousFireTimeUtc().ToLocalTime(),
               t.JobGroup, 
               t.Name, 
               t.Description,
               t.StartTimeUtc.ToLocalTime(), 
               t.EndTimeUtc.ToLocalTime(), 
               t.FinalFireTimeUtc.ToLocalTime(),
               ((t.GetNextFireTimeUtc() > DateTime.UtcNow) ? "Active  " : "InActive")
               );

           Console.WriteLine(details);

       }
   } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-02T14:20:26.777

即使对于超过结束时间的日期，我也遇到了下一个执行时间的问题。以下是我最终在 Quartz 3.0.4 中返回正确结果的实现

```
internal static DateTime? GetNextFireTimeForJob(IJobExecutionContext context)
        {
            JobKey jobKey = context.JobDetail.Key;
            DateTime? nextFireTime = null;

            var isJobExisting = MyQuartzScheduler.CheckExists(jobKey);
            if (isJobExisting.Result)
            {
                var triggers = MyQuartzScheduler.GetTriggersOfJob(jobKey);

                if (triggers.Result.Count > 0)
                {
                    var nextFireTimeUtc =  triggers.Result.First().GetNextFireTimeUtc();
                    if (nextFireTimeUtc.HasValue)
                    {
                        nextFireTime = TimeZone.CurrentTimeZone.ToLocalTime(nextFireTimeUtc.Value.DateTime);
                    }
                }
            }

            return nextFireTime;
        } 
```

# java - 什么是从大文件（超过 700MB）中提取模式的更高效的方法

> ID：13632922
> 
> 赞同：4
> 
> 时间：2012-11-29T19:09:31.723
> 
> 标签：java, performance, parsing, large-files

我有一个问题，需要我从本地机器解析一个文本文件。有一些并发症：

1.  文件可能非常大（700mb+）
2.  该模式出现在多行中
3.  我需要在模式之后存储行信息

我使用`BufferReader`,`String.indexOf`和`String.substring`( 来获取第 3 项) 创建了一个简单的代码。

在文件内部，它有一个命名为`code=`在不同块中多次出现的键（模式）。程序使用 . 从这个文件中读取每一行`BufferReader.readLine`。它用于`indexOf`检查模式是否出现，然后在模式之后提取文本并存储在公共字符串中。

当我使用 600mb 文件运行程序时，我注意到处理文件时性能最差。我在 CodeRanch 中阅读了一篇文章，`Scanner`该类不适用于大文件。

是否有一些技术或库可以提高我的表现？

提前致谢。

这是我的源代码：

```
String codeC = "code=[";
String source = "";
try {
    FileInputStream f1 = new FileInputStream("c:\\Temp\\fo1.txt");
    DataInputStream in = new DataInputStream(f1);
    BufferedReader br = new BufferedReader(new InputStreamReader(in));

    String strLine;
    boolean bPrnt = false;
    int ln = 0;
    // Read File Line By Line
    while ((strLine = br.readLine()) != null) {
        // Print the content on the console
        if (strLine.indexOf(codeC) != -1) {
            ln++;
            System.out.println(strLine + " ---- register : " + ln);
            strLine = strLine.substring(codeC.length(), strLine.length());
            source = source + "\n" + strLine;
        }
    }
    System.out.println("");
    System.out.println("Lines :" + ln);
    f1.close();
} catch ( ... ) {
    ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:27:22.000

您的这段代码非常可疑，并且很可能至少可以解释您的部分性能问题：

```
FileInputStream f1 = new FileInputStream("c:\\Temp\\fo1.txt");
DataInputStream in = new DataInputStream(f1);
BufferedReader br = new BufferedReader(new InputStreamReader(in)); 
```

您`DataInputStream`无缘无故地参与其中，实际上将其用作 a 的输入`Reader`可以被认为是代码损坏的情况。改为这样写：

```
InputStream f1 = new FileInputStream("c:\\Temp\\fo1.txt");
BufferedReader br = new BufferedReader(new InputStreamReader(fr)); 
```

对性能的巨大损害是`System.out`您正在使用，特别是如果您在 Eclipse 中运行时测量性能，但即使从命令行运行也是如此。我的猜测是，这是造成瓶颈的主要原因。当您以最佳性能为目标时，请务必确保不在主循环中打印任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:34:33.753

除了 Marko 的回答，我建议关闭 br，而不是 f1：

```
br.close() 
```

这不会影响性能，但更清洁。（关闭最外面的流）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:12:43.010

看看[java.util.regex](http://docs.oracle.com/javase/6/docs/api/java/util/regex/package-summary.html)

来自 oracle的优秀[教程。](http://docs.oracle.com/javase/tutorial/essential/regex/index.html)

来自 JAVADoc 的复制粘贴：

> 用于将字符序列与正则表达式指定的模式匹配的类。
> 
> Pattern 类的一个实例表示一个以字符串形式指定的正则表达式，其语法类似于 Perl 使用的语法。
> 
> Matcher 类的实例用于将字符序列与给定模式匹配。通过 CharSequence 接口向匹配器提供输入，以支持匹配来自各种输入源的字符。
> 
> 除非另有说明，否则将 null 参数传递给此包中任何类或接口中的方法将导致抛出 NullPointerException。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T20:29:15.407

它完美地工作！

我听从**了 OldCurmudgeon**、**Marko Topolnik**和**AlexWien 的**建议，我的表现提高了 1000%。之前程序花了 2 个小时完成所描述的操作并在文件中写入响应。现在它花了5分钟！并且 SYSO 保留在源代码中！

我认为巨大改进的原因是像 OldCurmudgeon 所建议的那样为 HashSet“源”更改字符串“源”。Bur 我删除了 DataInputStream 并使用了“br.close”。

多谢你们 ！！

# svn - 无法访问隔离的 Subversion 存储库

> ID：13632924
> 
> 赞同：1
> 
> 时间：2012-11-29T19:09:38.930
> 
> 标签：svn, tortoisesvn, password-recovery

很久以前，一位工程师在未连接到任何网络的 PC 上创建了 TortoiseSVN 存储库。整个安装是该 PC 的本地安装。据我所知，任何其他用户从未访问过该存储库。我没有工程师的密码。auth 目录为空 - 没有缓存的凭据。

我现在需要访问这个 repo。

问题：我应该放弃存储库，创建一个新存储库并导入我们认为与原始存储库相关联的文件……还是有一种解决方案可以让我保留所有旧数据和历史记录？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:18:43.263

“db”目录是数据所在的位置。那是人口吗？如果是这样，你应该能够挽救它。大约一年前，我们有一台服务器死机，但数据已从磁带恢复并转储到共享网络磁盘。我们在一个新盒子上安装了 VisualSVNServer，创建了一个新的 repo，然后将旧的 repo 导入其中。我们在旧的使用 .htaccess 的新版本 (LDAP) 上使用了完全不同的身份验证模型。没有问题，它不需要我们重新验证任何东西，它只是把它拉进去。

[http://www.visualsvn.com/server/](http://www.visualsvn.com/server/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T06:06:25.270

如果它是`SomeDir`由 TSVN 命令“在此处创建存储库”创建的 repo，您​​可以将`Somedir`整个目录复制到任何位置并使用 file:/// 协议访问存储的数据（从客户端签出，使用 svnadmin 创建可移植转储）。

回购`dir`输出

```
 Directory of Z:\repo

30.11.2012  12:02    <DIR>          .
30.11.2012  12:02    <DIR>          ..
30.11.2012  12:02    <DIR>          locks
30.11.2012  12:02    <DIR>          hooks
30.11.2012  12:02    <DIR>          conf
30.11.2012  12:02               234 README.txt
30.11.2012  12:02    <DIR>          db
30.11.2012  12:02                 2 format
30.11.2012  12:02           180 467 svn.ico 
```

# java - 子进程：不输出

> ID：13632925
> 
> 赞同：1
> 
> 时间：2012-11-29T19:09:43.313
> 
> 标签：java, python, subprocess, ipc, stdout

我正在使用 subprocess 模块来启动一个子进程（java 程序）并连接到它的输出流（stdout）。但是当我尝试获取它的标准输出时，没有输出。

```
p= subprocess.Popen(["java -Xmx256m -jar bin/HelloWorld.jar"],cwd=r'/home/karen/sphinx4-1.0beta5-src/sphinx4-1.0beta5/', shell=True, stdout=subprocess.PIPE, bufsize= 4024)

        out, err = p.communicate()
        print out 
```

我也希望能够在其标准输出上执行非阻塞读取。我怎么能做这两件事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:44:39.480

您需要将第一个 arg 拆分为您的 args 列表；我认为你没有得到输出的原因是你的 shell 正在寻找一个名为“java -Xmx256m -jar bin/HelloWorld.jar”的文件，该文件显然不会存在。你想`["java", "-Xmx256m", "-jar", "bin/HelloWorld.jar"]`作为第一个参数，比如：

```
cmd = ["java", "-Xmx256m", "-jar", "bin/HelloWorld.jar"]
cwd = r'/home/karen/sphinx4-1.0beta5-src/sphinx4-1.0beta5/'
p = subprocess.Popen(cmd, cwd=cwd, shell=True, stdout=subprocess.PIPE, bufsize=4024 )

out, err = p.communicate()
print out 
```

回复：想要在标准输出上执行非阻塞读取，请参阅这个[其他答案](https://stackoverflow.com/questions/4585692/python-nonblocking-subprocess-check-stdout)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:38:07.370

这对我有用，只有一个 HelloWorld`System.out.println("Hello World!");`

```
import subprocess

p= subprocess.Popen(["java","-jar","HelloWorld.jar"], shell=True, stdout=subprocess.PIPE, bufsize= 4024)

out, err = p.communicate()
print out 
```

这个答案已经涵盖了从子进程中读取非阻塞： [python：非阻塞子进程，检查标准输出](https://stackoverflow.com/questions/4585692/python-nonblocking-subprocess-check-stdout)

# php - 在不访问服务器的情况下发布跨域

> ID：13632926
> 
> 赞同：2
> 
> 时间：2012-11-29T19:09:43.740
> 
> 标签：php, jquery, ajax, cross-domain, easyxdm

有没有办法将 AJAX 帖子发送到我无权访问的服务器中的 PHP 页面？服务器总是发送访问控制允许来源错误，因为我正在从我的服务器（我有权访问）向另一台服务器（我无权访问）发送帖子。我不拥有的这台服务器似乎只接受来自它的帖子。

任何代码，提示？我发现 easyxdm 可以做到这一点，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:12:16.983

是的，使用您的 php 服务器（不是 javascript）发送帖子。如果您无权访问其他服务器并且它们没有返回正确的 CORS 标头，那么这是您唯一的选择。

# mysql - MYSQL 5.1 中的 DateDiff 函数。需要小时+分钟

> ID：13632927
> 
> 赞同：0
> 
> 时间：2012-11-29T19:09:45.687
> 
> 标签：mysql, sql, select, datediff

MYSQL 5.1

我需要创建一个查询，为我的结果表提供三列，match_date、match_start 和 match_duration

我需要 match_duration 列，该列采用 match_start 和 match_end 并以 00:00 小时格式显示每场比赛已经进行了多长时间。因此，例如，如果它是 5 小时：30 分钟，它将显示为 5：30 小时。

这是我到目前为止所拥有的，不确定我哪里出错了：

```
SELECT match_date, match_start, DateDiff(hhmm, match_start, match_end) AS Duration
FROM MatchInfo; 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T19:23:39.190

试试下面：

```
 TIME_FORMAT(TIMEDIFF(match_end, match_start), '%H:%i') 
```

IE

```
 SELECT match_date, match_start, 
          TIME_FORMAT(TIMEDIFF(match_end, match_start), '%H:%i') AS DURATION
   FROM MatchInfo; 
```

# crystal-reports - Crystal Report 中的动态文本字段增长

> ID：13632937
> 
> 赞同：0
> 
> 时间：2012-11-29T19:10:18.383
> 
> 标签：crystal-reports, crystal-reports-2008

我在 Crystal 报表中有以下字段：

*在报告标题*中我的**参数**值显示为：

```
Country :(Allows no multiple values)
Subjects :(Allows multiple values)
Hobbies :(Allows multiple values)
Date of Birth :(Allows no multiple values) 
```

以上都是参数。

详细信息部分基于选择的参数。

当主题和爱好值的长度较小时（例如物理、主题的化学和爱好的唱歌、跳舞），在报告标题中是可以的，因为它将连续出现。

当 Subjects 和 Hobbies 值非常长时（比如 Subjects Physics,Chemistry,Maths,English,Biology,Pharmacy,xxx,gggggggggggg,hhhhhhhhhhhh,ttttttttt,gggggggggggg,hhhhhhhhhh,jjjjjjjj,rthrhrjtjrjryyyjty）

然后，这里 Subjects 的值将与 Hobbies 的值重叠（因为它将超过 2 行）。如何处理它，以便当多个值尽可能长时，将自动获取 Subjects 和 Hobbies分离（动态）如下：

**国家**: 印度

**科目**：物理、化学、数学、英语、生物、药学、xxx、gggggggggggg、hhhhhhhhhhhh、ttttttttt、gggggggggggg、hhhhhhhhhh、jjjjjjjj、rthrhrjtjrjryyyjty

**爱好**：唱歌，跳舞，绘画，旅游，游泳，阅读，写作，睡觉，跳跃，跳舞，唱旋律歌曲，跳嘻哈

**出生日期**：2012年 11 月 12 日

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T19:12:25.303

您需要为每个垂直分隔的字段创建一个新部分。这样，该部分将与该字段一起增长，将以下部分/字段向下推。

# ajax - 使用 Seam 处理 ajax viewExpiredException

> ID：13632938
> 
> 赞同：0
> 
> 时间：2012-11-29T19:10:19.913
> 
> 标签：ajax, jsf-2, seam

我在 pages.xml 中以这种方式捕获 viewExpiredException

```
<exception class="javax.faces.application.ViewExpiredException">
    <redirect view-id="/error.xhtml">
        <message>#{messages['ViewExpiredException']}</message>
    </redirect>
</exception> 
```

另一方面，我的 components.xml 中有这个事件

```
<event type="org.jboss.seam.security.loginSuccessful">
    <action execute="#{redirect.returnToCapturedView}"/>
</event> 
```

我所有的页面都需要登录：

```
<page login-required="true" view-id="/home.xhtml">
<page/> 
```

使用完整的回发请求一切正常，但使用 ajax 请求，在登录页面之后，我被重定向到 xml 页面：

Aucune information de style ne semble associée à ce fichier XML。L'arbre du document est affiché ci-dessous。

```
<partial-response>  
   <error>
   <error-name>class javax.faces.application.ViewExpiredException</error-name>
   <error-message>viewId:/subject.seam - La vue «/subject.seam» n’a pas pu être restaurée</error-message>
   </error>
</partial-response> 
```

我该如何解决这个问题？感谢帮助。我的配置项目：seam 2.3 final、jsf 2.1、primefaces 3.4 和 jbossas7.0.2

# antlr - 标记解析器失败

> ID：13632939
> 
> 赞同：1
> 
> 时间：2012-11-29T19:10:20.693
> 
> 标签：antlr, antlr3, parser-generator

对于我尝试解析的标记语言，我决定尝试使用 ANTLR 生成解析器。我是这个领域的新手，我正在搞砸一些事情。

我的语法是

```
grammar Test;
DIGIT   :   ('0'..'9');
LETTER  :   ('A'..'Z');
SLASH   :   '/'; 
restriction
    :   ('E' ap)
    |   ('L' ap)
    |   'N';
ap  :   LETTER LETTER LETTER;
car :   LETTER LETTER;
fnum    :   DIGIT DIGIT DIGIT DIGIT? LETTER?;
flt :   car fnum?;
message :   'A' (SLASH flt)? (SLASH restriction)?; 
```

当我给它一个 input string 时，这正是我想要的`A/KK543/EPOS`。但是，当我给它`A/KL543/EPOS`时，它失败了（`MismatchedTokenException(9!=5)`）。这似乎是某种冲突；它想`restriction`在第一个 L 上生成，所以似乎我在语言定义中做错了什么，但我无法正确找出是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:43:09.773

对于 input `"A/KK543/EPOS"`，创建以下标记：

```
'一个' '一个'
斜线'/'
字母“K”
字母“K”
数字'5'
数字'4'
数字'3'
斜线'/'
'E' 'E'
字母“P”
字母“O”
字母“S”
```

但是对于 input `"A/KL543/EPOS"`，这些是创建的：

```
'一个' '一个'
斜线'/'
字母“K”
'二'
数字'5'
数字'4'
数字'3'
斜线'/'
'E' 'E'
字母“P”
字母“O”
字母“S”
```

如您所见，char`'L'`没有*被*标记为`LETTER`. 对于文字标记`'A'`,`'E'`和在您的解析器规则中`'L'`，`'N'`ANTLR（自动）创建单独的词法分析器规则，这些规则放置在所有其他词法分析器规则之前。这会导致您的词法分析器在幕后看起来像这样：

```
A      : 'A';
E      : 'E';
L      : 'L';
N      : 'N';
DIGIT  : '0'..'9';
LETTER : 'A'..'Z';
SLASH  : '/'; 
```

因此，任何一个`'A'`, `'E'`,`'L'`和`'N'`都不会成为一个`LETTER`令牌。这就是 ANTLR 的工作原理。如果要将它们作为字母进行匹配，则需要创建一个解析器规则`letter`并让它*也*匹配这些标记。像这样的东西：

```
message
 : A (SLASH flt)? (SLASH restriction)?
 ;

flt
 : car fnum?
 ;

fnum
 : DIGIT DIGIT DIGIT DIGIT? letter?
 ;

restriction
 : E ap
 | L ap
 | N
 ;

ap
 : letter letter letter
 ;

car
 : letter letter
 ;

letter
 : A
 | E
 | L
 | N
 | LETTER
 ;

A      : 'A';
E      : 'E';
L      : 'L';
N      : 'N';
DIGIT  : '0'..'9';
LETTER : 'A'..'Z';
SLASH  : '/'; 
```

它将`"A/KL543/EPOS"`像这样解析输入：

![在此处输入图像描述](../Images/e07ccf533185bb52d7d6d0a7f8fb7e3f.png)

# passwords - 允许用户更改密码 Cakephp 2

> ID：13632941
> 
> 赞同：1
> 
> 时间：2012-11-29T19:10:26.887
> 
> 标签：passwords, cakephp-2.0

我查看了各种方法，以及关于这个主题的各种问题，但没有运气。在我的例子中，控制器代码“出现”工作，并且消息闪烁“您的更改已保存”，但密码数据库字段未更改。有什么我想念的吗？

控制器代码

```
public function changepass($id = null) {
    $this->layout = 'profile_page';
    //$this->request->data['User']['id'] = $this->Session->read('Auth.User.id');

    $user = $this->User->find('first', array( 
        'conditions' => array('User.id' => $this->Auth->user('id'))
    ));     // 'User.id' => $id
    $this->set('user',$user);

    if ($this->request->is('post') || $this->request->is('put'))
    {   
        $this->User->saveField('password', AuthComponent::password($this->request->data['User']['newpass']));
        // $this->User->saveField('password', $this->data['User']['password']);
        // $this->data['User']['password']= $this->request->data['User']['newpass'];

        if ($this->User->save($this->request->data))
        {   
            $this->Session->setFlash(__('Your password has been changed!'));
            $this->redirect(array('controller'=>'articles','action'=>'index'));
        }
        else
        {
            $this->Session->setFlash(__('Whoops! Something went wrong... try again?'));
            $this->redirect(array('controller'=>'users','action'=>'changepass'));
        }
    }
    $this->request->data = $this->User->read(null, $id);
    unset($this->request->data['User']['password']); // tried commenting out
} 
```

模型

```
public function beforeSave($options = array()) {
    if (isset($this->data[$this->alias]['password'])) {
        $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']);
        if (isset($this->data[$this->alias]['newpass'])) {
            $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['newpass']);
        }
    }
    return true;
} 
```

当然后来我会检查现有的密码，并确认新的密码检查，但我需要让现有的密码更新基本方法正常工作。

## 非常感谢您对此有所了解，

我想我已经猜到了。首先，我的主要问题是——在我看来，我会把 echo $this->Form->create('User', array('action' => 'edit')); -- 当然将操作更改为“changepass”

新控制器代码：

```
 public function changepass ($id = null) {
    $this->layout = 'profile_page';
    $this->User->id = $id;
    if (!$this->User->exists()) {
        throw new NotFoundException(__('Invalid user'));
    }
            //debug($this->request->data);

    if ($this->request->is('post') || $this->request->is('put')) {
        $this->data['User']['password']= $this->request->data['User']['newpass'];
        if ($this->User->save($this->request->data)) {
            $this->Session->setFlash(__('Your password changes have been saved'));
             $this->redirect(array('controller' => 'articles', 'action' => 'index'));
        } else {
            $this->Session->setFlash(__('The profile could not be saved. Please, try again.'));
         }
    } else {
                if ($this->Auth->user('id')!= $id) {
        $this->Session->setFlash('You are not allowed that operation!');
        $this->redirect(array('controller' => 'articles', 'action' => 'index'));
        }

        $this->request->data = $this->User->read(null, $id);  
        debug($this->request->data);
        unset($this->request->data['User']['password']);
    }
} 
```

模型 - 根据 eboletaire 的建议整理

```
 public function beforeSave($options = array()) {
    if (isset($this->data[$this->alias]['password'])) {
        $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']); 
    }
    if (isset($this->data[$this->alias]['newpass'])) {
        $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['newpass']);
    }

return true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T23:17:26.070

```
if ($this->request->is('post') || $this->request->is('put')) {
    $this->data['User']['password']= $this->request->data['User']['newpass'];
    if ($this->User->save($this->request->data)) { 
```

应该

```
if ($this->request->is('post') || $this->request->is('put')) {
    $this->data['User']['id'] = $id;
    $this->data['User']['password']= $this->request->data['User']['newpass'];
    if ($this->User->save($this->data)) { 
```

注意`$this->data`vs `$this->request->data`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:28:37.353

首先，您要保存两次密码。删除/评论这一行：

```
$this->User->saveField('password', AuthComponent::password($this->request->data['User']['newpass'])); 
```

无论如何，我认为问题出在你的模型上。查看您的 beforeSave 方法。为什么要先用字段密码设置密码，然后再用字段 newpass 设置密码？？？

PD。清理你的代码我还看到第二个 if 应该在第一个之外。

# asp.net - 即使在验证组中，OnClientClick 按钮仍在运行

> ID：13632945
> 
> 赞同：0
> 
> 时间：2012-11-29T19:10:39.910
> 
> 标签：asp.net

我有一个位于验证组中的按钮，当页面上的任何文本框未填写时，onClick 不会像预期的那样运行，但 OnClientClick 会运行。

```
 <asp:Button ID="btnSend" runat="server" Text="Send" ValidationGroup="send" OnClick="sendNow"
    OnClientClick="document.getElementById('SendingMessage').style.visibility = 'visible'" /> 
```

有没有办法阻止 onclientclick 像带有验证组的 onClick 一样运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:17:48.400

`onclick`是服务器端事件。`onclientclick`是客户端 (javascript) 操作。在这种情况下，按钮被单击，因此 onclientclick 将执行。如果验证通过，浏览器将发布到表单并`onclick`执行事件。如果验证失败，则根据验证失败的位置会发生两种情况之一。

如果客户端验证失败，则永远不会向服务器发送请求。如果服务器上的验证失败，则表单已发布到服务器，但输入的验证失败并且`onclick`事件不会执行。

在您的情况下，您将希望在`onclientclick`验证用户输入的事件中添加一些客户端代码。如果验证返回 true，则继续运行脚本。如果验证失败，则不要。应该有一种方法可以绑定到客户端上的 webforms 验证。我不知道该怎么做。

# c# - 无法将不同的字符串值传递给不同的线程

> ID：13632949
> 
> 赞同：0
> 
> 时间：2012-11-29T19:10:50.907
> 
> 标签：c#, multithreading

我想通过使用 webclient 方法和同时运行的多个线程下载多个文件。我的 url 结构取决于变量“int i”，所以我使用 for 循环来生成 url 和文件路径。问题是在启动线程之前，url 和 filepath 值都会更改。时间线如下：

在主循环中，url = "url1" 和 path = "filepath1"。

使用值“url1”和“filepath1”调用 Thread1。

在主循环中，url = "url2" 和 path = "filepath2"。

使用值“url2”和“filepath2”调用 Thread2。

Thread1 以值“url2”和“filepath2”开头。

Thread2 以值“url2”和“filepath2”开头。

我找不到任何优雅的解决方案。你有什么建议？

```
string path = "";
string url = "";
string baseURL = "http://www.somewebsite.com/12/";
for (int i = 10; i <= DateTime.Now.Month; i++)
{
    path = "C:\\folder\\" + i.ToString() + ".html";
    url = baseURL + i.ToString();
    Thread webThread = new Thread(delegate()
    {
       downloadScheduleFile(url,path);
    });
    webThread.Start()
}

private void downloadScheduleFile(string url, string filepath)
{
    var client = new WebClient();
    try
    {
       client.DownloadFile(url, filepath);
    }
    catch(WebException e) {
       Console.WriteLine(System.Threading.Thread.CurrentThread.Name+e.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:12:35.850

这是因为当你的线程开始时，`path`并且`url`已经改变了。您必须创建更接近的本地副本。

```
string baseURL = "http://www.somewebsite.com/12/";
for (int i = 10; i <= DateTime.Now.Month; i++)
{
    string path = "C:\\folder\\" + i.ToString() + ".html"; // path declared here
    string url = baseURL + i.ToString(); // url declared here
    Thread webThread = new Thread(delegate()
    {
       downloadScheduleFile(url,path);
    });
    webThread.Start()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T19:15:59.123

您编写代码的方式所有调用 downloadScheduleFile 的线程都引用了包含块中定义的相同 2 个变量。你应该做的是给每个线程它自己的一组变量。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T19:16:53.300

您需要在委托的外部范围内捕获变量，我很确定您可以这样做：

```
string path = "";
string url = "";
string baseURL = "http://www.somewebsite.com/12/";
for (int i = 10; i <= DateTime.Now.Month; i++)
{
    path = "C:\\folder\\" + i.ToString() + ".html";
    url = baseURL + i.ToString();
    Thread webThread = new Thread(delegate()
    {
       string innerPath = path;
       string innerUrl = url
       downloadScheduleFile(innerUrl,innerPath);
    });
    webThread.Start()
} 
```

但是试一试，因为你可能会遇到同样的问题......

# c# - Asp.net 控制继承面板

> ID：13632952
> 
> 赞同：1
> 
> 时间：2012-11-29T19:11:14.203
> 
> 标签：c#, asp.net, inheritance, panel

我创建了一个继承自 System.Web.UI.Webcontrols.Panel 的新类。

我正在覆盖新类 RenderBeginTag(HTMLTextWriter Writer) 方法。

在这个方法中，如果面板的宽​​度是由 CSSClass 属性设置的，我如何确定它的宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:08:45.203

由于该方法`RenderBeginTag`是在服务器上执行的，而 CSS 类是在客户端上运行的，所以我认为不可能检测到宽度，除非您在服务器上解析 CSS 文件。

但是你为什么要知道这个呢？您不能只在呈现的 HTML 输出中设置类属性吗？

# html - 使用 :active 伪类时点击处理不一致

> ID：13632954
> 
> 赞同：3
> 
> 时间：2012-11-29T19:11:17.827
> 
> 标签：html, css

谁能解释为什么在这个例子中没有一致地调用点击处理程序？

[http://jsfiddle.net/4QBnf/](http://jsfiddle.net/4QBnf/)

例如，如果您单击 div 的左上半部分，它不会可靠地递增计数器。

如果我从这个块中删除 padding-top 它工作得很好：

```
.click-check:active {
   background-color:blue;
   padding-top: 25px;
} 
```

我已经在许多不同的浏览器中对此进行了测试，并且它的行为方式相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T19:36:53.910

我发现您的代码有两个可能的问题。您可以在此处查看修复：

[http://jsfiddle.net/4QBnf/6/](http://jsfiddle.net/4QBnf/6/)

## CSS 盒模型与 jQuery 盒模型

每当您单击框的上半部分时，从技术上讲，您并不是在单击`.click-check`，实际上是在单击`.count`。此图像显示`.count`相对于的位置`.click-check`：

![突出显示的区域是 <code>.count</code> 的区域](../Images/d9c99fe8bb98d61c8ee332a28ce4506b.png)

jQuery 将此视为一次点击`.click-check`，但 CSS 不会。数字增加，但不应用 CSS“活动”效果。

您可以通过删除`.count`div 并将所有内容放入`.click-check`.

## jQuery 计数器

第二个问题与您的 jQuery 代码有关。代码当前为：

```
$('.click-check').click(function() { $('.count').html(count++); }); 
```

`count`直到这条线完成后才增加。这意味着第一次单击似乎没有效果。

此行将递增`count`，然后将其显示给用户：

```
$('.click-check').click(function() { $('.click-check').html(++count); }); 
```

我已将这两个更新应用于您的示例：

[http://jsfiddle.net/4QBnf/6/](http://jsfiddle.net/4QBnf/6/)

## 更新

解决此问题的另一种方法是通过 jQuery 完成所有操作。这将所有外观和逻辑同步到单个盒子模型解释中。

```
var count=0;
$('.click-check').mousedown(function() { 
    $('.click-check').addClass("active");
    $('.click-check').html(++count);

    setTimeout(function(){ 
       $('.click-check').removeClass("active");
    }, 50);

}); 
```

[http://jsfiddle.net/4QBnf/15/](http://jsfiddle.net/4QBnf/15/)

# git - Azure 网站部署特定的 Web 项目

> ID：13632955
> 
> 赞同：23
> 
> 时间：2012-11-29T19:11:23.207
> 
> 标签：git, azure, azure-web-app-service

我有一个包含多个 Web 项目的解决方案。我想在 Azure 网站中运行它们，每个网站都作为一个单独的网站，来自同一个 Git 存储库。

如何指定哪个网站运行哪个 Web 项目？

AppHarbor 使用以应用程序命名的多个解决方案文件来处理此问题，其中包含相应的 Web 项目。我找不到有关 Azure 网站的任何信息。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-11-20T09:59:10.043

现在它就像使用 App.Settings 而不是 .deployment 文件一样简单。

这也允许在一个 Repo 中实现多项目解决方案，例如，如果您在一个解决方案中拥有 WebAPI 和 Web 应用程序，则可以配置 Azure 网站来部署特定项目。像这样：

![Azure App.Settings 示例](../Images/9ab08576192f5af3992d1b3781e1af73.png)

来源：[https ://github.com/projectkudu/kudu/wiki/Customizing-deployments#using-app-settings-instead-of-a-deployment-file](https://github.com/projectkudu/kudu/wiki/Customizing-deployments#using-app-settings-instead-of-a-deployment-file)

我已经尝试过了，并且很享受。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T19:18:17.557

您将需要使用 2 个不同的分支以及[.deployment](https://github.com/projectkudu/kudu/wiki/Customizing-deployments)文件。

所以第一个分支在 .deployment 文件中可能有这样的内容：

```
[config]
project = WebProject/WebProjectA.csproj 
```

分支 2 是这样的：

```
[config]
project = WebProject/WebProjectB.csproj 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T21:16:06.127

我遇到了一篇很好的博客文章，描述了如何使用自定义部署脚本来做到这一点。这有点繁琐，但在添加更好的东西之前是一个可行的解决方案。

[http://blog.amitapple.com/post/38419111245/azurewebsitecustomdeploymentpart3](http://blog.amitapple.com/post/38419111245/azurewebsitecustomdeploymentpart3)

编辑：

这个更好，它允许您在 repo 的路径上使用几个额外的文件来做到这一点：

[http://www.devtrends.co.uk/blog/azure-web-sites-git-deploy-for-multiple-project-solutions](http://www.devtrends.co.uk/blog/azure-web-sites-git-deploy-for-multiple-project-solutions)

# mysql - 如何将存储在 MySQL 表中的位图图像转换为 JPEG 格式？

> ID：13632959
> 
> 赞同：0
> 
> 时间：2012-11-29T19:11:46.733
> 
> 标签：mysql, delphi, delphi-2010

我有一个存储位图图像的 MySQL 表，我想将它们转换为 JPEG 格式到同一个表。谁能帮我找到解决方案？

我需要这个来减小桌子的大小......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T00:46:29.683

当您使用 ADO 访问您的 MySQL 数据库时，它可能看起来像这样（**它未经测试**）。此代码假定您拥有要使用的名为 as 的表`YourTable`和要从 as 转换图像的 BLOB 字段`ImageField`。`ConnectionString`请注意，您必须在对象的属性中指定到数据库的连接字符串`ADOConnection`：

```
uses
  DB, ADODB, JPEG;

procedure ConvertImage(BlobField: TBlobField);
var
  BMPImage: TBitmap;
  JPEGImage: TJPEGImage;
  MemoryStream: TMemoryStream;
begin
  MemoryStream := TMemoryStream.Create;
  try
    BlobField.SaveToStream(MemoryStream);
    BMPImage := TBitmap.Create;
    try
      MemoryStream.Position := 0;
      BMPImage.LoadFromStream(MemoryStream);
      JPEGImage := TJPEGImage.Create;
      try
        JPEGImage.Assign(BMPImage);
        MemoryStream.Position := 0;
        JPEGImage.SaveToStream(MemoryStream);
      finally
        JPEGImage.Free;
      end;
    finally
      BMPImage.Free;
    end;
    MemoryStream.Position := 0;
    BlobField.LoadFromStream(MemoryStream);
  finally
    MemoryStream.Free;
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  ADOTable: TADOTable;
  ADOConnection: TADOConnection;
begin
  ADOConnection := TADOConnection.Create(nil);
  try
    ADOConnection.LoginPrompt := False;
    // here you have to specify the connection string to your database
    // according to your connection parameters
    ADOConnection.ConnectionString := '<enter your connection string here>';
    ADOConnection.Open;
    if ADOConnection.Connected then
    begin
      ADOTable := TADOTable.Create(nil);
      try
        ADOTable.Connection := ADOConnection;
        ADOTable.TableName := 'YourTable';
        ADOTable.Filter := 'ImageField IS NOT NULL';
        ADOTable.Filtered := True;
        ADOTable.CursorType := ctOpenForwardOnly;
        ADOTable.Open;
        ADOTable.First;
        while not ADOTable.Eof do
        begin
          ADOTable.Edit;
          ConvertImage(TBlobField(ADOTable.FieldByName('ImageField')));
          ADOTable.Post;
          ADOTable.Next;
        end;
      finally
        ADOTable.Free;
      end;
    end;
  finally
    ADOConnection.Free;
  end;
end; 
```

# python - Webapp2 请求应用程序/八位字节流文件上传

> ID：13632972
> 
> 赞同：0
> 
> 时间：2012-11-29T19:12:28.060
> 
> 标签：python, file-upload, content-type, webapp2

我正在尝试通过 ajax 将文件从表单上传到 s3。我在客户端使用fineuploader [http://fineuploader.com/](http://fineuploader.com/)，在服务器端使用webapp2。它在请求中将参数作为 qqfile 发送，我可以在请求标头中看到图像数据，但我不知道如何在不使用多部分编码的浏览器中将其取回。

这就是我在标准 html 表单中使用 multipart 的方式。

```
image = self.request.POST["image"] 
```

这给了我图像名称和图像文件

目前我只能取回图像文件名而不是数据

```
image = self.request.get_all('image')
[u'image_name.png'] 
```

使用 POST 时，我收到有关内容标头为 application/octet-stream 的警告

```
<NoVars: Not an HTML form submission (Content-Type: application/octet-stream)> 
```

如何在 GAE 之外的 webapp2 中实现 BlobStoreHandler？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:09:48.460

你的问题代码对我来说不是很清楚。但是你可以举个例子。

看看尼克约翰逊的这篇文章。他在客户端使用应用引擎 blobstore 和 Plupload 实现了一个保管箱服务：http: [//blog.notdot.net/2010/04/Implementing-a-dropbox-service-with-the-Blobstore-API-part-2](http://blog.notdot.net/2010/04/Implementing-a-dropbox-service-with-the-Blobstore-API-part-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T17:33:29.253

我最终使用了fineuploader [http://fineuploader.com/](http://fineuploader.com/)，它将多部分编码形式发送到我的处理程序端点。

在处理程序内部，我可以简单地引用 POST，然后将 FieldStorage 对象读入 cStringIO 对象。

```
image = self.request.POST["qqfile"]
imgObj = cStringIO.StringIO(image.file.read())

# Connect to S3...
# create s3 Key 
key = bucket.new_key("%s" % uuid.uuid4());

# guess mimetype for headers
file_mime_type = mimetypes.guess_type(image.filename)
if file_mime_type[0]:
   file_headers = {"Content-Type": "%s" % file_mime_type[0]}
else:
   file_headers = None

key.set_contents_from_string(imgObj.getvalue(), headers=file_headers)

key_str = key.key

#return JSON response with key and append to s3 url on front end. 
```

注意：qqfile 是fineuploader 使用的参数。

我在伪造进度，但这对于我的用例来说没问题，不需要 BlobStoreUploadHandler。

# ruby-on-rails - 在 ActiveRecord 模型的弹性搜索索引之间共享设置（轮胎 gem）

> ID：13632975
> 
> 赞同：0
> 
> 时间：2012-11-29T19:12:34.253
> 
> 标签：ruby-on-rails, elasticsearch, tire

对于格式为单个 ActiveRecord 模型，我的[轮胎工作正常](https://github.com/karmi/tire)

```
setting do
  ...SETTINGS...
  mapping do
    ...INDEXES...
  end
end 
```

如果可能的话，我想在多个模型之间共享这些设置。我无法从初始化程序中找到任何方法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T14:12:30.817

鉴于 Ruby 的灵活性，这里有很多可用的选项。最明显的：

1.  使用一个或多个模块常量/方法，将所需的设置/映射存储为散列，然后将它们传递给轮胎方法。

2.  在模块中定义共享设置/映射/行为，然后您可以将其包含在模型中。该方法在[轮胎/问题/481](https://github.com/karmi/tire/issues/481#issuecomment-9482185)中有很好的描述。

相关片段：

```
module Searchable

  def self.included(base)

    p "Included in #{base}"

    base.class_eval do
      include Tire::Model::Search

      tire do
        mapping do
          indexes :title,   type: 'string', analyzer: 'snowball'
        end
      end
    end
  end
end

class Article < ActiveRecord::Base
  include Searchable
end

class Person < ActiveRecord::Base
  include Searchable
end 
```

这实际上不必在初始化程序中——您可以将它放在任何可从 Rails 应用程序加载的位置。

# neural-network - 具有标准化数据的 tanh 错误饱和度的神经网络

> ID：13632976
> 
> 赞同：11
> 
> 时间：2012-11-29T19:12:34.817
> 
> 标签：neural-network

我正在使用一个由 4 个输入神经元组成的神经网络，一个由 20 个神经元组成的隐藏层和一个 7 个神经元输出层。

我正在尝试为 bcd 到 7 段算法训练它。我的数据已标准化 0 为 -1，1 为 1。

当输出错误评估发生时，神经元饱和错误。如果期望的输出是`1`并且实际输出是`-1`，则错误是`1-(-1)= 2`。

当我将它乘以激活函数的导数时`error*(1-output)*(1+output)`，误差几乎变成了`0`因为`2*(1-(-1)*(1-1)`。

如何避免这种饱和错误？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T17:13:10.007

激活函数的渐近线饱和是神经网络的一个常见问题。如果你看一下函数图，就不会感到惊讶：它们几乎是平的，这意味着一阶导数（几乎）为 0。网络无法再学习。

一个简单的解决方案是缩放激活函数来避免这个问题。例如，使用 tanh() 激活函数（我最喜欢），当期望的输出在 {-1, 1} 时，建议使用以下激活函数：

```
f(x) = 1.7159 * tanh( 2/3 * x) 
```

因此，导数是

```
f'(x) = 1.14393 * (1- tanh( 2/3 * x)) 
```

这将迫使梯度进入最非线性的值范围并加速学习。对于所有细节，我推荐阅读 Yann LeCun 的优秀论文[Efficient Back-Prop](http://yann.lecun.com/exdb/publis/index.html#lecun-98b)。在 tanh() 激活函数的情况下，误差将计算为

```
error = 2/3 * (1.7159 - output^2) * (teacher - output) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:00:31.440

无论您使用什么功能，这都一定会发生。根据定义，当输出达到两个极端之一时，导数将为零。自从我使用人工神经网络以来已经有一段时间了，但如果我没记错的话，这（在许多其他事情中）是使用简单反向传播算法的限制之一。

您可以添加一个[动量因子](http://en.wikiversity.org/wiki/Learning_and_neural_networks#Momentum_learning)，以确保根据以前的经验进行一些修正，即使导数为零。

您也可以通过 epoch 来训练它，在实际更新之前累积权重的 delta 值（与每次迭代更新它相比）。这也减轻了增量值在两个值之间波动的情况。

可能有更高级的方法，例如反向传播的二阶方法，可以缓解这个特定问题。

但是，请记住，tanh 在无穷大处达到 -1 或 +1，这个问题纯粹是理论上的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T04:29:37.837

不完全确定我是否正确阅读了这个问题，但如果是这样，您应该在 0.9 和 -0.9 之间调整您的输入和目标，这将有助于您的衍生产品更加理智。

# c++ - C++ 编程框架

> ID：13632982
> 
> 赞同：0
> 
> 时间：2012-11-29T19:12:55.440
> 
> 标签：c++, qt, frameworks, mfc

有哪些好的 C++ 框架？

我对 qt 感到很兴奋，我在页面上看到“哇” qt 不再是诺基亚的产品了……

显然许可证已更改，您必须共享源代码才能免费使用该框架..

我现在分享我的代码没有问题，但如果将来我想做一些封闭来源的事情，我必须购买许可证，你必须联系他们了解价格。

我真的很兴奋，我尝试了 MFC，但它很复杂/不推荐使用，并且正在寻找将来会使用的东西..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T19:17:39.233

> 我对 qt 感到很兴奋，我在页面上看到“哇” qt 不再是诺基亚的产品了……

它是专有的，然后诺基亚买了它，在联合 LGPL 或商业下发布它。他们已将商业许可证出售给 Digia

> 显然许可证已更改，您必须共享源代码才能免费使用该框架..

不，它是 LGPL - 您必须共享 Qt，以及对 Qt 的任何更改 - 而不是您自己的应用程序。

如果您想要/需要 Digia 的支持，您只需购买商业许可证。您想保留对自己所做的 Qt 核心的任何更改。或者您不能以用户可以更改 Qt 库的方式安装它（根据 LGPL 的要求）。这通常意味着在某些嵌入式平台上，例如机顶盒。

# php - 如何获取使用 post 方法循环在数据库中插入值的文本框的值？

> ID：13632983
> 
> 赞同：0
> 
> 时间：2012-11-29T19:12:54.130
> 
> 标签：php, javascript, html, mysql, ajax

我有以下代码。我的文本框参加循环了很多次。我想在我的表单发布以在数据库中插入值时获取每个参加的值。

```
 <form method="post" action="insert.php">
<label>Subject</label>
<input type="text" maxlength="30" name="subject" />
<label>Total Lectures</label>
<input type="text" maxlength="30" name="total" />
<table width="537" border="1">
 <tr>
   <td width="90">Name</td>
   <td width="139">Roll Number </td>
   <td width="136">&nbsp;</td>
   <td width="144">Attendence</td>
 </tr>
     <?php 
 $query=mysql_query("SELECT * FROM STUDENT");
 $i=0;
 while($rec=mysql_fetch_array($query)){
 $i++;

  ?>
   <tr>
   <td><?php echo $rec['name']; ?></td>
   <td><?php echo $rec['roll_number']; ?></td>
   <td>&nbsp;</td>
   <td><input type="text" maxlength="10" name="atten" /></td>
 </tr>
 <?php } ?>
</table>
 <input type="submit" value="submit" />
</form> 
```

我的 insert.php 页面是

```
if($_SERVER['REQUEST_METHOD']=='POST'){
$query=mysql_query("SELECT * FROM STUDENT");
while($rec=mysql_fetch_array($query)){
$attend=$_POST['atten'];
$subject=$_POST['subject'];
$total=$_POST['total'];

$query1=mysql_query("INSERT INTO course   VALUES('$i','$subject','$total','$attend','')") or die(mysql_error());
}
} 
```

我只得到 1 个文本框值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T19:20:03.253

问题是您有许多输入都带有 name `atten`。当您发布此表单时，只会结转其中一个值。

如果您将名称更改为`atten[]`所有值，则所有值都将作为数组发布，然后您必须遍历该数组以构建插入查询。

您可以按如下方式访问此发布的数组：

```
$attendee_array = $_POST['atten'];

foreach($attendee_array as $attendee) {
    // perform insert or build insert query (prefereable as you can do all these inserts at once) here
    // make sure to escape your data for input
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:20:40.290

更改输入的名称：

```
<input name="subject[]" value="Lorem" />
<input name="total[]" value="ipsum"  />
<input name="atten[]" value="dolor" />
Then:

$_POST['subject'][0] == 'Lorem'
$_POST['total'][4] == 'amet' 
```

> 如果是这样，那将使我的生活轻松十倍，因为我可以通过表单发送无限量的信息，并通过简单地循环遍历名为“主题”的项目数组来让服务器对其进行处理。等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:20:41.080

您需要使用输入数组，如：

```
<input type="text" maxlength="10" name="attend[]" /> 
```

然后你会得到`attend`in 的所有值，`array`你可以遍历它`$_POST['attend']`。

# .htaccess - .htaccess，获取一段时间后的值，然后重定向

> ID：13632984
> 
> 赞同：0
> 
> 时间：2012-11-29T19:12:58.113
> 
> 标签：.htaccess, redirect, period

我正在尝试使用`.htaccess`文件重定向 URL。URL结构如下：

[http://mydomain.com/folder/.anything_goes_here](http://mydomain.com/folder/.anything_goes_here)

请注意上述网址中的点。我想以某种方式使用`.htaccess`.

我试过使用`RewriteRule`，但它不工作。这是我使用的代码：

```
RewriteEngine on
RewriteBase /
RewriteRule ^/folder/.(.*+)/?$ /folder/$1 [L] 
```

任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:34:15.400

句点在正则表达式中具有特殊含义（表示“任何字符”）。为了明确指定一个句点，您需要对其进行转义。

```
RewriteRule ^/folder/\.(.*+)/?$ /folder/$1 [L] 
```

# css - 使用 css 限制响应式图像的高度

> ID：13632985
> 
> 赞同：63
> 
> 时间：2012-11-29T19:13:01.557
> 
> 标签：css, responsive-design

我的最终目标是让流体`<img>`不会扩展超过仅使用 css 的父/祖父元素的明确设置高度。

目前我正在使用普通（`max-width:100; height:auto;`）流体图像和javascript通过从img标签读取高度/宽度属性，计算纵横比，在所需高度限制下计算图像的正确宽度，并将该宽度应用为a`max-width`在图像的容器元素上。很简单，但我希望能够在没有 javascript 的情况下做到这一点。

`height:100%; width:auto;`与横向不同，我已经尝试使用 Unc Dave 的 ol' 填充框和绝对定位该功能，但需要事先知道图像的纵横比，因此不能应用于具有不同比例的图像. 所以最后的要求是 css 必须与比例无关。

我知道，我知道，这个问题的答案可能就在独角兽农场旁边，但我想我还是把它扔在那里。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-01-17T23:40:12.223

诀窍是同时添加`max-height: 100%;`和`max-width: 100%;`。`.container img`示例 CSS：

```
.container {
  width: 300px;
  border: dashed blue 1px;
}

.container img {
  max-height: 100%;
  max-width: 100%;
} 
```

通过这种方式，您可以随心所欲地改变指定的宽度`.container`（例如 200 像素或 10%），并且图像不会大于其自然尺寸。（如果您不想依赖图像的自然大小，可以指定像素而不是 100%。）

这是整个小提琴：http: [//jsfiddle.net/KatieK/Su28P/1/](http://jsfiddle.net/KatieK/Su28P/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-14T18:41:16.080

我将以下 3 种样式设置为我的`img`标签

```
max-height: 500px;
height: 70%;
width: auto; 
```

它对桌面屏幕 img 的作用并没有超出`500px`，但对于小型移动屏幕，它将缩小到外部容器的 70%。奇迹般有效。

它也适用于`width`财产。

* * *

## 回答 #3

> 赞同：-9
> 
> 时间：2015-02-10T21:17:28.280

您可以使用内联样式来限制高度：

```
<img src="" class="img-responsive" alt="" style="max-height: 400px;"> 
```

# javascript - iFrame 发送父 URL

> ID：13632988
> 
> 赞同：0
> 
> 时间：2012-11-29T19:13:16.847
> 
> 标签：javascript, iframe

我的网站上有一个指向另一个域的 iFrame。当用户在 iFrame 中填写完网站上的表单后，该网站会向我的网站发送一个 URL。我想采用该 URL 并强制父级加载该 URL。我正在使用以下代码，但它不起作用。

```
<script type='text/javascript'> 
  if (top !== self) top.location.href = self.location.href; 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:33:09.270

基本上，您似乎在问如何在重定向后检测到新`src`的。`iframe`

如果您的`iframe`页面与您自己的页面在同一个域中，这不会有问题。你会像这样检索它：

```
document.getElementById("ID_OF_YOUR_IFRAME").contentWindow.location.href 
```

但是因为它是一个外部域，浏览器会阻止你这样做作为安全策略，你[不能](https://stackoverflow.com/questions/815409/is-it-possible-to-find-a-cross-domain-iframes-new-url-after-a-redirect)访问该信息。

# solr - 导入操作完成后获取添加文档的ID

> ID：13632993
> 
> 赞同：4
> 
> 时间：2012-11-29T19:13:44.973
> 
> 标签：solr, dataimporthandler

我正在尝试设置一个 Solr dataimport.EventListener 来调用一个带有更新事件中添加的文档 ID 的 SOAP 服务。我有一个实现 org.apache.solr.handler.dataimport.EventListener 的类，我*认为*getAllEntityFields() 的结果会产生文档 ID 的集合。不幸的是，该方法的结果产生了一个空列表。更令人困惑的是 context.getSolrCore().getName() 产生一个空字符串而不是实际的核心名称。所以看来我在这里不太正确。

当前设置如下： 每当在 SQL 中调用某个存储过程时，它都会将消息放入队列中。这个队列上有一个监听器，它启动一个读取队列并调用其他存储过程的程序。存储过程完成后，将在 Solr 上执行增量或完整导入操作。紧接着，调用一个方法来更新缓存。但是，由于在调用此更新方法之前可能尚未完成 Solr 上的导入操作，因此缓存可能会使用“陈旧”数据进行更新。

我希望使用 dataimport EventListener 来调用更新缓存的方法，因为我的其他选项似乎过于复杂（例如轮询 dataimport URL 以确定何时调用更新方法或使用队列列出需要的文档 ID更新并让 EventListener 调用服务上的方法来接收此队列并更新缓存）。我很难找到文档或示例。有人对我应该如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T07:43:03.610

据我了解，您正在尝试在添加文档时更新缓存。根据您运行的 solr 版本，您可以执行以下操作之一。

Solr 4.0 提供了脚本转换器，可让您执行此操作。 [http://wiki.apache.org/solr/DataImportHandler#ScriptTransformer](http://wiki.apache.org/solr/DataImportHandler#ScriptTransformer)

使用 solr 的早期版本，您可以将一个处理程序链接在其他处理程序之上，如以下帖子中所回答。 [Solr 和自定义更新处理程序](https://stackoverflow.com/questions/6593887/solr-and-custom-update-handler/9936315#9936315)

# ms-access - 访问表单中的 3 状态切换按钮

> ID：13632997
> 
> 赞同：2
> 
> 时间：2012-11-29T19:13:50.933
> 
> 标签：ms-access, ms-access-2007, togglebutton

**是否可以在具有两个以上**“状态”/选项的访问表单内创建一个切换按钮？

我正在创建一个由切换按钮组成的月度视图日历。用户应该能够单击切换按钮以指示他是否：

1.  可用的
2.  无法使用
3.  节假日

因此，我需要一个能够支持 3 个或更多状态/选项的切换按钮。

如果您对切换按钮方法有任何替代想法，我将不胜感激。

* * *

作为我的日历与切换按钮的外观的想法，这是我的表单图片：

![在此处输入图像描述](../Images/7a546c5be4c426094a131431fb8eef74.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:56:48.590

这是一个如何做到这一点的示例。您可以对其进行修改以接受按钮引用以将代码用于许多按钮。

此外，事实证明这仅适用于 Access 2010+。如果使用 2010 之前的版本，您可以使用标签作为按钮。

```
Private Sub Btn_Click()
    Select Case Me.Btn.BackColor
      Case &HFF
         Me.Btn.BackColor = &HFF00
      Case &HFF00
         Me.Btn.BackColor = &HFF0000
      Case Else
         Me.Btn.BackColor = &HFF
   End Select
End Sub 
```

这将循环通过三种可能的状态。我用了不同的颜色，但你真的可以用任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T20:44:30.673

我喜欢 Tom 在 Access 2007 中使用标签控件的方法。下面的过程使使用每个标签的单击事件在绿色、黄色和红色之间切换变得很容易。

为每个标签调用这样的过程。

```
Private Sub Label16_Click()
    ToggleColor Me.Label16
End Sub

Private Sub ToggleColor(ByRef lbl As Label)
    Dim lngColor As Long
    Dim strPrompt As String

    If lbl.BackStyle = 0 Then ' Transparent
        strPrompt = "BackColor will not be displayed when " & _
            "BackStyle is Transparent." & vbCrLf & _
            "Change " & lbl.Name & " BackStyle property to Normal."
        MsgBox strPrompt, vbExclamation
    Else
        Select Case lbl.BackColor
        Case vbGreen
            lngColor = vbYellow
        Case vbYellow
            lngColor = vbRed
        Case vbRed
            lngColor = vbGreen
        Case Else
            lngColor = vbGreen
        End Select
        lbl.BackColor = lngColor
    End If
End Sub 
```

# javascript - if (key in object) 或 if(object.hasOwnProperty(key)

> ID：13632999
> 
> 赞同：197
> 
> 时间：2012-11-29T19:13:52.757
> 
> 标签：javascript

以下两个语句是否产生相同的输出？有什么理由更喜欢一种方式而不是另一种方式吗？

```
 if (key in object)

 if (object.hasOwnProperty(key)) 
```

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-11-29T19:16:03.697

小心——它们不会产生相同的结果。

`in``true`如果在*原型链*`key`中的某处找到也将返回，而（就像名称已经告诉我们的那样），只有在该对象直接可用时才会返回（它“拥有”该属性）。*`Object.hasOwnProperty``true``key`*

 ** * *

## 回答 #2

> 赞同：75
> 
> 时间：2014-11-28T14:10:57.387

I'l try to explain with another example. Say we have the following object with two properties:

```
function TestObj(){
    this.name = 'Dragon';
}
TestObj.prototype.gender = 'male'; 
```

Let's create instance of TestObj:

```
var o = new TestObj(); 
```

Let's examine the object instance:

```
console.log(o.hasOwnProperty('name')); // true
console.log('name' in o); // true

console.log(o.hasOwnProperty('gender')); // false
console.log('gender' in o); // true 
```

Conclusion:

*   in operator returns true always, if property is accessible by the object, directly or from the prototype

*   hasOwnProperty() returns true only if property exists on the instance, but not on its prototype

If we want to check that some property exist on the prototype, logically, we would say:

```
console.log(('name' in o) && !o.hasOwnProperty('name')); //false
console.log(('gender' in o) && !o.hasOwnProperty('gender')); //true - it's in prototype 
```

Finally:

So, regarding to statement that these two conditions ...

```
if (key in object)
if (object.hasOwnProperty(key)) 
```

...produce the same result, the answer is obvious, it depends.

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2012-11-29T19:15:53.223

`in`还将检查继承的属性，而`hasOwnProperty`.

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2015-04-23T15:06:17.790

*综上所述，`hasOwnProperty()`不看原型而`in`只看原型。*

取自[O'Reilly 高性能 Javascript](http://shop.oreilly.com/product/9780596802806.do)：

> 您可以通过使用 hasOwnProperty() 方法并传入成员的名称来确定对象是否具有具有给定名称的实例成员。要确定对象是否有权访问具有给定名称的属性，可以使用 in 运算符。例如：

```
var book = {
    title: "High Performance JavaScript",
    publisher: "Yahoo! Press" 
};

alert(book.hasOwnProperty("title"));  //true
alert(book.hasOwnProperty("toString"));  //false
alert("title" in book); //true 
alert("toString" in book); //true 
```

> 在这段代码中，当“title”被传入时，hasOwnProperty()返回true，因为title是一个对象实例；当“toString”被传入时，该方法返回false，因为它在实例上不存在。当每个属性名称与 in 运算符一起使用时，结果都为真，因为它搜索实例和原型。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-09-01T22:36:25.203

你得到了一些非常好的答案。我只想提供一些东西，让您在迭代对象时无需检查“hasOwnProperty”。

在创建对象时，人们通常会以这种方式创建它：

```
const someMap = {}
// equivalent to: Object.create(Object.prototype)
// someMap.constructor will yield -> function Object() { [native code] } 
```

现在，如果你想遍历“someMap”，你必须这样做：

```
const key
for(key in someMap ){
 if (someMap.hasOwnProperty(key)) { 
   // Do something
 }
} 
```

我们这样做是为了避免迭代继承的属性。

如果您打算创建一个仅用作“映射”（即键-值对）的简单对象，您可以这样做：

```
const newMap = Object.create(null);
// Now, newMap won't have prototype at all.
// newMap.constructor will yield -> undefined 
```

所以现在这样迭代是安全的：

```
for(key in cleanMap){
 console.log(key + " -> " + newMap [key]);
 // No need to add extra checks, as the object will always be clean
} 
```

[我在这里](http://www.jstips.co/en/javascript/hash-maps-without-side-effects/)学到了这个很棒的技巧

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-29T19:18:09.350

> 另一种形式（调用 in）枚举对象的属性名称（或键）。在每次迭代中，来自对象的另一个属性名称字符串被分配给变量。**通常需要测试 object.hasOwnProperty(variable) 以确定属性名称是否真的是对象的成员，或者是在原型链上找到的。**

```
 for (myvar in obj) {
     if (obj.hasOwnProperty(myvar)) { ... } } 
```

（来自 Crockford 的*Javascript: The Good Parts*）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-10-22T12:16:45.923

正如其他答案所表明的那样，`hasOwnProperty`将检查对象自身的属性，相比之下`in`，还将检查继承的属性。

**新方法 2021 - `Object.hasOwn()`作为替代`Object.hasOwnProperty()`**

`Object.hasOwn()`旨在替代`Object.hasOwnProperty()`并且是一种可供使用的新方法（但仍未得到所有浏览器的完全支持，如您在此处看到的 - [https://caniuse.com/?search=hasOwn](https://caniuse.com/?search=hasOwn) ）

`Object.hasOwn()`是一个静态方法，如果指定对象具有指定属性作为其自己的属性，则返回 true。如果属性被继承或不存在，则该方法返回 false。

```
const person = { name: 'dan' };

console.log(Object.hasOwn(person, 'name'));// true
console.log(Object.hasOwn(person, 'age'));// false

const person2 = Object.create({gender: 'male'});

console.log(Object.hasOwn(person2, 'gender'));// false
```

建议使用此方法，`Object.hasOwnProperty()`因为它也适用于通过 using 创建的`Object.create(null)`对象和覆盖了继承`hasOwnProperty()`方法的对象。虽然可以通过调用`Object.prototype.hasOwnProperty()`外部对象来解决这类问题，但要`Object.hasOwn()` 克服这些问题，因此是首选（参见下面的示例）

```
let person = {
  hasOwnProperty: function() {
    return false;
  },
  age: 35
};

if (Object.hasOwn(person, 'age')) {
  console.log(person.age); // true - the remplementation of hasOwnProperty() did not affect the Object
}
```

```
let person = Object.create(null);
person.age = 35;
if (Object.hasOwn(person, 'age')) {
  console.log(person.age); // true - works regardless of how the object was created
}
```

更多信息`Object.hasOwn`可以在这里找到：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn)

浏览器兼容性 - [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn#browser_compatibility](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn#browser_compatibility)

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2012-11-29T19:15:58.473

第一个版本更短（特别是在变量被重命名的缩小代码中）

```
a in b 
```

对比

```
b.hasOwnProperty(a) 
```

无论如何，正如@AndreMeinhold 所说，它们并不总是产生相同的结果。*