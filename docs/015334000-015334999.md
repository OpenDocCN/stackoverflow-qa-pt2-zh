# StackOverflow 问答 15334000-15334999

# .htaccess - 如何使用 .htaccess 文件重写 URL

> ID：15334002
> 
> 赞同：0
> 
> 时间：2013-03-11T08:25:59.707
> 
> 标签：.htaccess, mod-rewrite, joomla2.5

`.htaccess`我有一个关于使用该文件重写 URL 的问题。

我不太了解编写 htaccess 文件所需的符号和语法，所以我非常感谢任何帮助。

**系统信息** Joomla 2.5.9 网站 我使用 K2 2.6.2 创建我的内容 当我使用 K2 为我的博客创建内容时，我填写了“标题别名 (URL)”

**HTACCESS QUERY** 举个例子，我写了一篇文章叫 Top 10 Joomla Extensions 标题别名 URL 是：top-10-joomla-extensions

当我在前端查看文章时，URL 是： [http](http://www.pixelfire.com.au/website-and-graphic-design-blog/) : **//www.pixelfire.com.au/website-and-graphic-design-blog/item/121-top-10-joomla-extensions**

我想通过删除来清理此 URL：**item/121 -** 我还有许多其他具有不同 ID 号的项目 URL，我也想删除。所以我需要的代码需要删除我博客中每个项目的 ID 号。

每个博客项目 URL 都有单词项目/项目 ID 号。示例 item/121- 理想情况下，我想用破折号删除单词 item 和项目编号。

希望有人可以帮助我编写`.htaccess`代码来实现这一点并向我解释它是如何工作的。

非常感谢您提前。尼尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:35:44.700

```
RewriteEngine On
RewriteRule ^(.*)item/(\d+\-)?(.*) /$1$3 [R=301,L] 
```

RewriteRule 的工作原理如下：“RewriteRule”之后和之前的`Space`任何内容都是我们的规则，之后的任何内容都是我们`Space`要做什么

所以： `RewriteEngine On`打开引擎

`RewriteRule`告诉阿帕奇，开始魔法。其余的是正则表达式声明。

`^`- 从字符串的开头开始 `(.*)`- 获取您想要的任何内容并将其放入变量`$1` `item/(\d\-)?`中 - 确保`item/`后跟数字和破折号的字符串存在，但不是必须的。确保它占据了`$2`变量。问号说“可能在那里，但不必”。 `(.*)`- 获取后面的任何内容，并将其存储在变量中`$3`

然后你说，重定向到： `$1$3`它连接存储在变量中的字符串`$1`和`$3`（跳过项目/887878-）

最后是括号。`R=301`意思是，用 301 标题重写并`L`说：这是你需要做的最后一件事。停在这里重新加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T15:11:09.977

您想安装一个 sef 组件，例如 sh404sef 或 joomsef，它会覆盖 joomla 的默认路由器并为您提供更多配置选项

# ios - Print description in XCode shows the correct value, using the variable shows wrong value

> ID：15334006
> 
> 赞同：0
> 
> 时间：2013-03-11T08:26:12.183
> 
> 标签：ios, xcode, json, parsing, integer

I'm working on a JSON response from a server, and in the response data, among other things, should be a "credits" property, which is an int, which should have the value of 2000\. However, if I try to use this property, I get a value like 180988576\. But, if I "print description" of the property from the debugger, it says:

```
Printing description of playerData->_credits:
2000 
```

How do I access this value?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:50:01.953

What you have to do is , When you are fetching the value from JSON

use like this :

`[[JSON ObjectForKey:@"Key"]integerValue];`

It will give you the correct result. Try it once. You can assign that value to an integer variable.

# css - 手机上的字体大小

> ID：15334008
> 
> 赞同：5
> 
> 时间：2013-03-11T08:26:24.383
> 
> 标签：css, html5boilerplate

我正在使用 HTML5 BoilerPlate。

我只想在移动设备上使某个块的字体大小变小。

我试过这个，但没有奏效：

```
.searchresult {
    font-size: 0.5em;
    line-height: 1.4;
}
@media only screen and (min-width: 480px) {
    .search-result {
        font-size: 1em;
    }
}
@media only screen and (min-width: 768px) {
    .search-result {
        font-size: 1em;
    }
}
@media only screen and (min-width: 1140px) {
    .search-result {
        font-size: 1em;
    }
} 
```

我认为将其设为普通尺寸`@media`会起作用，但我的 Mac 和移动设备上的字体很小。

我会很感激任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T08:37:21.780

如果要针对**小型设备**，可以使用此语法。

```
@media only screen and (max-device-width: 480px) {
 .search-result {
    font-size: 1em;
 }
} 
```

如果您想了解有关媒体查询的更多信息，最好查看[一下](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)。[这](http://www.observationsofadesigner.com/css-media-queries-for-mobile-devices/)是其他移动设备的列表，我认为它也很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T08:39:56.093

那是因为你正在使用`min-width`

你 Mac（可能是大屏幕）& 手机**是** `min-width 480`& `768`& `1140`。

为了使它在移动和桌面上有所不同，您应该这样做（*保留您的实际代码*）：

```
.searchresult {
    font-size: 0.5em;
    line-height: 1.4;
}
@media only screen and (min-width: 480px) {
    .search-result {
        font-size: 1em;/* mobile font-size */
    }
}
@media only screen and (min-width: 768px) {
    .search-result {
        font-size: 1.4em;/*overrule for big screens*/
    }
}
@media only screen and (min-width: 1140px) {
    .search-result {
        font-size: 1.4em;/*another overrule for even bigger screens*/
    }
} 
```

# jquery-mobile - Jquery Mobile 导航页面刷新 css 移除

> ID：15334014
> 
> 赞同：1
> 
> 时间：2013-03-11T08:26:45.367
> 
> 标签：jquery-mobile

我有两个页面，我计划使用 JQM 移动框架导航，我计划多个页面，为了让我的代码整洁，我决定将多个页面放在不同的 html 文件中。在导航到下一个屏幕页面刷新页面 CSS 未加载。

```
 <!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Page 1</title>
<link rel="stylesheet"
    href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<script
    src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
<script type="text/javascript">
$(document).swipeleft(function() {
    $.mobile.changePage("page2.html");
});

</script>
</head>
<body>
    <div data-role="page" id="page1" data-dom-cache="true">
    <div data-role="header"></div>
        <div data-role="content">
            <div data-role="collapsible-set" data-theme="c" data-content-theme="d">
                <div data-role="collapsible">
                    <h3>Section 1</h3>
                    <p><a href="page2.html" data-transition="slide" >I'm the collapsible content for section 1</a></p>
                </div>
                <div data-role="collapsible">
                    <h3>Section 2</h3>
                    <p>I'm the collapsible content for section 2</p>
                </div>
                <div data-role="collapsible">
                    <h3>Section 3</h3>
                    <p>I'm the collapsible content for section 3</p>
                </div>
            </div>
        </div>  
        <div data-role="footer"></div> 
    </div>

</body>
</html> 
```

第 2 页：我有以下代码

```
<div data-role="page" id="page2" data-dom-cache="true">
<div data-role="header"></div>
    <div data-role="content">
        <div data-role="collapsible-set" data-theme="c" data-content-theme="d">
            <div data-role="collapsible">
                <h3>Page 2</h3>
                <p>
                    <a href="page3.html" data-transition="slide">I'm the
                        collapsible content for section 1</a>
                </p>
            </div>
            <div data-role="collapsible">
                <h3>Section 2</h3>
                <p>I'm the collapsible content for section 2</p>
            </div>
            <div data-role="collapsible">
                <h3>Section 3</h3>
                <p>I'm the collapsible content for section 3</p>
            </div>
        </div>
    </div>
    <div data-role="footer"></div>
</div> 
```

导航发生，但是当我刷新页面时，css 被删除。如何拥有多个页面并在屏幕之间导航。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:33:20.437

将您的**page1.html**更改为以下

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<title>Page 1</title>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head>
<body>
    <div data-role="page" id="page1" data-dom-cache="true">
    <div data-role="header"></div>
        <div data-role="content">
            <div data-role="collapsible-set" data-theme="c" data-content-theme="d">
                <div data-role="collapsible">
                    <h3>Section 1</h3>
                    <p><a href="page2.html" data-transition="slide" >I'm the collapsible content for section 1</a></p>
                </div>
                <div data-role="collapsible">
                    <h3>Section 2</h3>
                    <p>I'm the collapsible content for section 2</p>
                </div>
                <div data-role="collapsible">
                    <h3>Section 3</h3>
                    <p>I'm the collapsible content for section 3</p>
                </div>
            </div>
        </div>  
        <div data-role="footer"></div> 
    </div>
<script type="text/javascript">
$('#page1').on('pageshow',function(event){
    $("#page1").swiperight(function () {
        $.mobile.changePage("page2.html");
    });

});
</script>
</body>
</html> 
```

并更改您的**page2.html**如下

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<title>Page 1</title>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
</head>
<body>
    <div data-role="page" id="page2" data-dom-cache="true">
        <div data-role="header"></div>
            <div data-role="content">
                <div data-role="collapsible-set" data-theme="c" data-content-theme="d">
                    <div data-role="collapsible">
                        <h3>Page 2</h3>
                        <p>
                            <a href="page3.html" data-transition="slide">I'm the
                                collapsible content for section 1</a>
                        </p>
                    </div>
                    <div data-role="collapsible">
                        <h3>Section 2</h3>
                        <p>I'm the collapsible content for section 2</p>
                    </div>
                    <div data-role="collapsible">
                        <h3>Section 3</h3>
                        <p>I'm the collapsible content for section 3</p>
                    </div>
                </div>
            </div>
            <div data-role="footer"></div>
        </div>
<script type="text/javascript">
$('#page2').on('pageshow',function(event){
    alert('page2 loaded');
});
</script>
</body>
</html> 
```

它现在应该可以工作了。请告诉我会发生什么。我把脚本包在里面`$('#page2').on('pageshow',function(event){});`。这是我所做的唯一改变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:03:07.423

i was referring to [http://m.stanford.edu/#events](http://m.stanford.edu/#events) which used older version JQM

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0a4.1 jquery.mobile1.0a4.1.min.css" /> 
<script src="http://code.jquery.com/jquery-1.5.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.0a4.1/jquery.mobile-1.0a4.1.min.js"></script> 
```

and in latest version ie

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script> 
```

The above issue is done for the latest version by

```
$(document).on("mobileinit", function () {
    $.mobile.pushStateEnabled = false; 
}); 
```

# arrays - 按值对嵌套数组进行排序？

> ID：15334015
> 
> 赞同：2
> 
> 时间：2013-03-11T08:26:49.610
> 
> 标签：arrays, underscore.js

我有一个嵌套数组，如下所示：

```
data = [
[Date.UTC(2013, 1, 1), 1],
[Date.UTC(2013, 1, 5), 22],
[Date.UTC(2013, 1, 2), 2],
[Date.UTC(2013, 1, 11), 33]
] 
```

我正在使用下划线，我试图找出一种按它排序的方法，`Date.UTC`所以数组按从第一个到最后一个或从最低到最高显示日期？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T17:39:49.057

您可以使用[`sortBy`](http://underscorejs.org/#sortBy)函数来挑选内部数组的第一个元素：

> **排序方式** `_.sortBy(list, iterator, [context])`
> 
> **返回列表**的排序副本，按通过**迭代器**运行每个值的结果升序排列。迭代器也可以是要排序的属性的字符串名称（例如。`length`）。

所以也许是这样的：

```
_(data).sortBy(function(a) {
    return a[0];
}); 
```

由于`Data.UTC`给了你一个数字，你可以抛出一个否定以相反的方向排序：

```
_(data).sortBy(function(a) {
    return -a[0];
}); 
```

你也可以这样做：

```
_(data).sortBy('0') 
```

演示：http: [//jsfiddle.net/ambiguous/mLDzH/](http://jsfiddle.net/ambiguous/mLDzH/)

# javascript - 基于计量单位的计算和求和的计算

> ID：15334020
> 
> 赞同：-1
> 
> 时间：2013-03-11T08:27:04.367
> 
> 标签：javascript, html, integer, sum

此代码应该基于度量单位进行计算。如果计量单位是单位、床位或房间，则应根据单位、床位或房间的数量减去空置单元、床位或房间的数量，在已占用和空置单元的总占用百分比文本框中给出百分比房间。如果计算基于平方英尺，则应该将净平方英尺除以占用空间减去空置空间的数量。

第二个计算只是四个不同文本框中的简单总和。尽管它可能很简单，但它仍然不起作用....:(

任何帮助将不胜感激！

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Total Number of Units/Rooms/Beds</title>
</head>
<script language="javascript" type="text/javascript">
    function calcPercentOccupied() {
        var OccObj = document.getElementById("OccupiedSpaceText").innerHTML;
        if (document.getElementsByName("MeasurementUnitType").value == 'Units' || document.getElementsByName("MeasurementUnitType").value == 'Rooms' || document.getElementsByName("MeasurementUnitType").value == 'Beds') {
            if (document.getElementsByName("OccupiedSpaceValue").value == '' && document.getElementsByName("NumberOfUnitsRoomsBedsCount").value == '') {
                alert('Please input "Total Number of ' + OccObj + ' and "Occupied ' + OccObj + '"');
            } else {
                with(document.forms[0]) {
                    NumberOfUnitsRoomsBeds = document.getElementsByName("NumberOfUnitsRoomsBedsCount").value;
                    OccupiedSpace = document.getElementsByName("OccupiedSpaceValue").value;
                    document.getElementsByName("NumberOfUnitsRoomsBedsCount").value = Math.round((OccupiedSpace / NumberOfUnitsRoomsBeds) * 10000) / 100 + "%";
                }
            }
        } else if (document.getElementsByName("MeasurementUnitType").value == 'Sq. Feet') {
            if (document.getElementsByName("NetRentableSquareFootage").value == '' && document.getElementsByName("OccupiedSpaceValue").value == '') {
                alert('Please input "Total Sq. Feet (Net/Rentable)" and "Occupied ' + OccObj + '"');
            } else {
                with(document.forms[0]) {
                    NetSquareFootage = document.getElementsByName("NetRentableSquareFootage").value;
                    OccupiedSpace = document.getElementsByName("OccupiedSpaceValue").value;
                    document.getElementsByName("NumberOfUnitsRoomsBedsCount").value = Math.round((OccupiedSpace / NetSquareFootage) * 10000) / 100 + "%";
                }
            }
        } else {
            alert('Please select a "Unit of Measurement"');
        }
    }

    function addOccupiedSpaceText() {
        if (document.getElementsByName("MeasurementUnitType").value == '') {
            document.getElementById("OccupiedSpaceText").innerHTML = "Space";
        } else if (document.getElementsByName("MeasurementUnitType").value == 'Units') {
            document.getElementById("OccupiedSpaceText").innerHTML = "Units";
        } else if (document.getElementsByName("MeasurementUnitType").value == 'Rooms') {
            document.getElementById("OccupiedSpaceText").innerHTML = "Rooms";
        } else if (document.getElementsByName("MeasurementUnitType").value == 'Beds') {
            document.getElementById("OccupiedSpaceText").innerHTML = "Beds";
        } else if (document.getElementsByName("MeasurementUnitType").value == 'Sq. Feet') {
            document.getElementById("OccupiedSpaceText").innerHTML = "Sq. Feet";
        }
    }

    function addVacantSpaceText() {
        if (document.getElementsByName("MeasurementUnitType").value == '') {
            document.getElementById("VacantSpaceText").innerHTML = "Space";
        } else if (document.getElementsByName("MeasurementUnitType").value == 'Units') {
            document.getElementById("VacantSpaceText").innerHTML = "Units";
        } else if (document.getElementsByName("MeasurementUnitType").value == 'Rooms') {
            document.getElementById("VacantSpaceText").innerHTML = "Rooms";
        }`
        else if (document.getElementsByName("MeasurementUnitType").value == 'Beds') {
            document.getElementById("VacantSpaceText").innerHTML = "Beds";
        }`
        else if (document.getElementsByName("MeasurementUnitType").value == 'Sq. Feet') {
            document.getElementById("VacantSpaceText").innerHTML = "Sq. Feet";
        }
    }

    function addTotalUnitsRoomsBedsText() {`
        if (document.getElementsByName("MeasurementUnitType").value == '') {
            document.getElementById("TotalUnitsRoomsBeds").innerHTML = "Units/Rooms/Beds";
        }`
        else if (document.getElementsByName("MeasurementUnitType").value == 'Units') {
            document.getElementById("TotalUnitsRoomsBeds").innerHTML = "Units";
        }`
        else if (document.getElementsByName("MeasurementUnitType").value == 'Rooms') {
            document.getElementById("TotalUnitsRoomsBeds").innerHTML = "Rooms";
        }`
        else if (document.getElementsByName("MeasurementUnitType").value == 'Beds') {
            document.getElementById("TotalUnitsRoomsBeds").innerHTML = "Beds";
        }`
        else if (document.getElementsByName("MeasurementUnitType").value == 'Sq. Feet') {
            document.getElementById("TotalUnitsRoomsBeds").innerHTML = "Units/Rooms/Beds";
        }`
    }

    function addDownUnitsRoomsBedsText() {`
        if (document.getElementsByName("MeasurementUnitType").value == '') {
            document.getElementById("DownUnitsRoomsBeds").innerHTML = "Units/Rooms/Beds";
        } else if (document.getElementsByName("MeasurementUnitType").value == 'Units') {
            document.getElementById("DownUnitsRoomsBeds").innerHTML = "Units";
        } else if (document.getElementsByName("MeasurementUnitType").value == 'Rooms') {
            document.getElementById("DownUnitsRoomsBeds").innerHTML = "Rooms";
        } else if (document.getElementsByName("MeasurementUnitType").value == 'Beds') {
            document.getElementById("DownUnitsRoomsBeds").innerHTML = "Beds";
        } else if (document.getElementsByName("MeasurementUnitType").value == 'Sq. Feet') {
            document.getElementById("DownUnitsRoomsBeds").innerHTML = "Units/Rooms/Beds";
        }
    }
</script>

<body>
    <form method="post" action>
        <table width="700">
            <tr>
                <td width="40%"></td>
                <td width="11%"></td>
                <td width="27%" colspan="2"></td>
                <td width="22%"></td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td colspan="2">&nbsp;</td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td colspan="2">&nbsp;</td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td>Total Number of Units/Rooms/Beds:</td>
                <td>
                    <input type="text" name="NumberOfUnitsRoomsBedsCount" id="TotalUnitsRoomsBeds" tabindex="41">
                </td>
                <td>Total Sq. Feet (Net/Rentable):</td>
                <td>
                    <input type="text" name="NetRentableSquareFootage" tabindex="47">
                </td>
            </tr>
            <tr>
                <td>Total Number of Down Units/Rooms/Beds:</td>
                <td>
                    <input type="text" id="DownUnitsRoomsBeds" name="NumberOfDownUnitsCount" tabindex="43">
                </td>
                <td colspan="2">Occupied Space:</td>
                <td>
                    <input type="text" name="OccupiedSpaceValue" id="OccupiedSpaceText" value="" tabindex="47">
                </td>
            </tr>
            <tr>
                <td>Unit of Measurement:</td>
                <td>
                    <select size="1" name="MeasurementUnitType" value="Unit of Measurement:" tabindex="44" onchange="addOccupiedSpaceText(); addVacantSpaceText(); addTotalUnitsRoomsBedsText(); addDownUnitsRoomsBedsText()" style="height: 22px">
                        <option value=""></option>
                        <option value="Units">Units</option>
                        <option value="Rooms">Rooms</option>
                        <option value="Beds">Beds</option>
                        <option value="Sq. Feet">Sq. Feet</option>
                    </select>
                </td>
                <td colspan="2">Vacant Space:</td>
                <td>
                    <input type="text" name="VacantSpaceValue" id="VacantSpaceText" tabindex="48" ;>
                </td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td colspan="2">Total Percent Occupied:</td>
                <td>
                    <input type="text" name="PercentOccupied" value="" tabindex="49" readonly="readonly">
                    <button type="button" onload="calcPercentOccupied();" onclick="calcPercentOccupied();">Calculate</button>
                </td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td colspan="2">&nbsp;</td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td colspan="2">&nbsp;</td>
                <td>&nbsp;</td>
            </tr>
        </table>
        <p></p>
        <table>
            <tr class="style1">
                <th># of
                    <br />Bedrooms</th>
                <th># of
                    <br />Baths</th>
                <th># of
                    <br />Units</th>
                <th>Average
                    <br />Ft*/Unit</th>
                <th>Monthly
                    <br />Rent</th>
                <th>#
                    <br />Occupied</th>
                <th>#
                    <br />Vacant</th>
                <th>#
                    <br />Down</th>
                <th>#
                    <br />Inspected</th>
            </tr>
            <tr>
                <td>
                    <input type="text" name="MeasurementIdentifierBedroomsCount01" value="MeasurementIdentifierBedroomsCount01" tabindex="257" style="height: 19px" />
                </td>
                <td>
                    <input type="text" name="MeasurementIdentifierBathCount01" value="MeasurementIdentifierBathCount01" tabindex="257" />
                </td>
                <td>
                    <input type="text" name="NumberOfMeasurementCount01" value="NumberOfMeasurementCount01" tabindex="257" onfocus="calcNumberOfMeasurementCountSum()" style="height: 19px" />
                </td>
                <td>
                    <input type="text" name="AverageSizeOfMeasurementFootage01" value="AverageSizeOfMeasurementFootage01" class="RentAVGFT" tabindex="257" />
                </td>
                <td>
                    <input type="text" name="AverageRentOfMeasurementAmount01" value="AverageRentOfMeasurementAmount01" class="RentAVGFT" tabindex="257" />
                </td>
                <td>
                    <input type="text" name="NumberOfMeasurementOccupiedCount01" value="NumberOfMeasurementOccupiedCount01" tabindex="257" />
                </td>
                <td>
                    <input type="text" name="NumberOfMeasurementVacantCount01" value="NumberOfMeasurementVacantCount01" tabindex="257" />
                </td>
                <td>
                    <input type="text" name="NumberOfMeasurementDownCount01" value="NumberOfMeasurementDownCount01" tabindex="257" />
                </td>
                <td>
                    <input type="text" name="NumberOfMeasurementInspectedCount01" value=“NumberOfMeasurementInspectedCount01 "  tabindex="257 " /></td>
          </tr>
          <tr>
               <td>
               <input type="text " name="MeasurementIdentifierBedroomsCount02 "      value=“MeasurementIdentifierBedroomsCount02" tabindex="257" />
                </td>
                <td>
                    <input type="text" name="MeasurementIdentifierBathCount02" value=“MeasurementIdentifierBathCount02 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementCount02 "      value=“NumberOfMeasurementCount02" tabindex="257" onfocus="calcNumberOfMeasurementCountSum()" style="height: 19px" />
                </td>
                <td>
                    <input type="text" name="AverageSizeOfMeasurementFootage02" value=“AverageSizeOfMeasurementFootage02 " class="RentAVGFT " tabindex="257 " /></td>
               <td>
               <input type="text " name="AverageRentOfMeasurementAmount02 "      value=“AverageRentOfMeasurementAmount02" class="RentAVGFT" tabindex="257" />
                </td>
                <td>
                    <input type="text" name="NumberOfMeasurementOccupiedCount02" value=“NumberOfMeasurementOccupiedCount02 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementVacantCount02 "      value=“NumberOfMeasurementVacantCount02" tabindex="257" />
                </td>
                <td>
                    <input type="text" name="NumberOfMeasurementDownCount02" value=“NumberOfMeasurementDownCount02 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementInspectedCount02 " value=“NumberOfMeasurementInspectedCount02" tabindex="257" />
                </td>
            </tr>
            <tr>
                <td>
                    <input type="text" name="MeasurementIdentifierBedroomsCount03" v value=“MeasurementIdentifierBedroomsCount03 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="MeasurementIdentifierBathCount03 " value=“MeasurementIdentifierBathCount03" tabindex="257" />
                </td>
                <td>
                    <input type="text" name="NumberOfMeasurementCount03" value=“NumberOfMeasurementCount03 "  tabindex="257 " onfocus="calcNumberOfMeasurementCountSum() " /></td>
               <td>
               <input type="text " name="AverageSizeOfMeasurementFootage03 " AverageSizeOfMeasurementFootage03" class="RentAVGFT" tabindex="257" />
                </td>
                <td>
                    <input type="text" name="AverageRentOfMeasurementAmount03" value="AverageRentOfMeasurementAmount03" class="RentAVGFT" tabindex="257" style="height: 19px" />
                </td>
                <td>
                    <input type="text" name="NumberOfMeasurementOccupiedCount03" value="NumberOfMeasurementOccupiedCount03" tabindex="257" />
                </td>
                <td>
                    <input type="text" name="NumberOfMeasurementVacantCount03" value="NumberOfMeasurementVacantCount03" tabindex="257" />
                </td>
                <td>
                    <input type="text" name="NumberOfMeasurementDownCount03" value="NumberOfMeasurementDownCount03" tabindex="257" style="height: 19px" />
                </td>
                <td>
                    <input type="text" name="NumberOfMeasurementInspectedCount03" value=“NumberOfMeasurementInspectedCount03 "  tabindex="257 " /></td>
          </tr>
          <tr>
               <td>
               <input type="text " name="MeasurementIdentifierBedroomsCount04 " value=“MeasurementIdentifierBedroomsCount04" tabindex="257" />
                </td>
                <td>
                    <input type="text" name="MeasurementIdentifierBathCount04" value=“MeasurementIdentifierBathCount04 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementCount04 " value=“NumberOfMeasurementCount04" tabindex="257" onfocus="calcNumberOfMeasurementCountSum()" />
                </td>
                <td>
                    <input type="text" name="AverageSizeOfMeasurementFootage04" AverageSizeOfMeasurementFootage04 " class="RentAVGFT " tabindex="257 " /></td>
               <td>
               <input type="text " name="AverageRentOfMeasurementAmount04 " value="AverageRentOfMeasurementAmount04 " class="RentAVGFT " tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementOccupiedCount04 " value="NumberOfMeasurementOccupiedCount04 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementVacantCount04 " value="NumberOfMeasurementVacantCount04 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementDownCount04 " value="NumberOfMeasurementDownCount04 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementInspectedCount04 " value="NumberOfMeasurementInspectedCount04 "  tabindex="257 " /></td>
          </tr>
          <tr>
               <td>
               <input type="text " name="MeasurementIdentifierBedroomsCount05 "      value="MeasurementIdentifierBedroomsCount05 "  tabindex="257 " style="height: 19px " /></td>
               <td>
               <input type="text " name="MeasurementIdentifierBathCount05 "      value="MeasurementIdentifierBathCount05 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementCount05 "      value="NumberOfMeasurementCount05 "  tabindex="257 " onfocus="calcNumberOfMeasurementCountSum() " /></td>
               <td>
               <input type="text " name="AverageSizeOfMeasurementFootage05 "      value="AverageSizeOfMeasurementFootage05 " class="RentAVGFT " tabindex="257 " /></td>
               <td>
               <input type="text " name="AverageRentOfMeasurementAmount05 "      value="AverageRentOfMeasurementAmount05 " class="RentAVGFT " tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementOccupiedCount05 "      value="NumberOfMeasurementOccupiedCount05 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementVacantCount05 " "NumberOfMeasurementVacantCount05 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementDownCount05 "      value="NumberOfMeasurementDownCount05 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementInspectedCount05 "      value="NumberOfMeasurementInspectedCount05 "  tabindex="257 " /></td>
          </tr>
          <tr>
               <td>
               <input type="text " name="MeasurementIdentifierBedroomsCount06 "      value="MeasurementIdentifierBedroomsCount06 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="MeasurementIdentifierBathCount06 "      value="MeasurementIdentifierBathCount06 "  tabindex="257 " style="height: 19px " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementCount06 "           value="NumberOfMeasurementCount06 "  tabindex="257 " onfocus="calcNumberOfMeasurementCountSum() " /></td>
               <td>
               <input type="text " name="AverageSizeOfMeasurementFootage06 "      value="AverageSizeOfMeasurementFootage06 " class="RentAVGFT " tabindex="257 " style="height: 19px " /></td>
               <td>
               <input type="text " name="AverageRentOfMeasurementAmount06 "      value="AverageRentOfMeasurementAmount06 " class="RentAVGFT " tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementOccupiedCount06 "      value="NumberOfMeasurementOccupiedCount06 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementVacantCount06 "      value="NumberOfMeasurementVacantCount06 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementDownCount06 "      value="NumberOfMeasurementDownCount06 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementInspectedCount06 "      value="NumberOfMeasurementInspectedCount06 "  tabindex="257 " style="height: 19px " /></td>
          </tr>
          <tr>
               <td>
               <input type="text " name="MeasurementIdentifierBedroomsCount07 "      value="MeasurementIdentifierBedroomsCount07 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="MeasurementIdentifierBathCount07 "      value="MeasurementIdentifierBathCount07 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementCount07 "      value="NumberOfMeasurementCount07 "  tabindex="257 " onfocus="calcNumberOfMeasurementCountSum() " /></td>
               <td>
               <input type="text " name="AverageSizeOfMeasurementFootage07 "      value="AverageSizeOfMeasurementFootage07 " class="RentAVGFT " tabindex="257 " /></td>
               <td>
               <input type="text " name="AverageRentOfMeasurementAmount07 "      value="AverageRentOfMeasurementAmount07 " class="RentAVGFT " tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementOccupiedCount07 "      value="NumberOfMeasurementOccupiedCount07 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementVacantCount07 "      value="NumberOfMeasurementVacantCount07 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementDownCount07 "      value="NumberOfMeasurementDownCount07 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementInspectedCount07 "      value="NumberOfMeasurementInspectedCount07 "  tabindex="257 " /></td>
          </tr>
          <tr>
               <td>
               <input type="text " name="MeasurementIdentifierBedroomsCount08 "      value="MeasurementIdentifierBedroomsCount08 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="MeasurementIdentifierBathCount08 "      value="MeasurementIdentifierBathCount08 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementCount08 "      value="NumberOfMeasurementCount08 "  tabindex="257 " onfocus="calcNumberOfMeasurementCountSum() " /></td>
               <td>
               <input type="text " name="AverageSizeOfMeasurementFootage08 "      value="AverageSizeOfMeasurementFootage08 " class="RentAVGFT " tabindex="257 " /></td>
               <td>
               <input type="text " name="AverageRentOfMeasurementAmount08 "      value="AverageRentOfMeasurementAmount08 " class="RentAVGFT " tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementOccupiedCount08 "      value="NumberOfMeasurementOccupiedCount08 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementVacantCount08 "      value="NumberOfMeasurementVacantCount08 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementDownCount08 "      value="NumberOfMeasurementDownCount08 "  tabindex="257 " /></td>
               <td>
               <input type="text " name="NumberOfMeasurementInspectedCount08 "      value="NumberOfMeasurementInspectedCount08 "  tabindex="257 " /></td>
          </tr>
          <tr>
               <th colspan="2 ">Totals:</th>
               <td><input readonly type="text " name="NumberOfMeasurementCountSum "      value="NumberOfMeasurementCountSum "  tabindex="409 " /></td>
               <td colspan="2 "><button type="button " id="CalculateTotals " onclick="calcNumberOfMeasurementCountSum(); calcNumberOfMeasurementOccupiedCountSum(); calcNumberOfMeasurementVacantCountSum(); calcNumberOfMeasurementDownCountSum(); calcNumberOfMeasurementInspectedCountSum(); ">Calculate Totals</button></td>
               <td><input readonly type="text " name="NumberOfMeasurementOccupiedCountSum "      value="NumberOfMeasurementOccupiedCountSum "  tabindex="410 " /></td>
<td><input readonly type="text " name="NumberOfMeasurementVacantCountSum " value="NumberOfMeasurementVacantCountSum "  tabindex="411 " /></td>
<td><input readonly type="text " name="NumberOfMeasurementDownCountSum " value="NumberOfMeasurementDownCountSum "  tabindex="412 " /></td>
<td><input readonly type="text " name="NumberOfMeasurementInspectedCountSum " value="NumberOfMeasurementInspectedCountSum "  tabindex="413 " /></td>
          </tr>          
     </table>

     <p><input type="submit " value="Save Form " onclick="verify(); name="tbSubmit" tabindex="599" />
                    </p>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:00:27.227

the `document.getElementsByName`，顾名思义，返回许多元素，`HTMLCollection`具体来说是 a ，它是一个类似数组的结构。因此，您需要获取其中的第一项，如下所示：

```
document.getElementsByName("MeasurementUnitType")[0].value 
```

或使用`id`属性和`getElementById`，这是我会做的，混合`getElementById`真的很混乱

# c++ - HttpReceiveClientCertificate 不适用于 Firefox

> ID：15334022
> 
> 赞同：0
> 
> 时间：2013-03-11T08:27:22.977
> 
> 标签：c++, ssl, https

我想通过 Microsoft http server api [http://msdn.microsoft.com/en-us/library/windows/desktop/aa364510(v=vs.85).aspx在 C++ 中创建 https 服务器](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364510(v=vs.85).aspx)

在 IE 和 chrome 中一切正常

但在 Firefox HttpReceiveClientCertificate 返回 1168 ERROR_NOT_FOUND 错误

因为 pClientCertInfo 结构为空

我附上图片

![在此处输入图像描述](../Images/2250e36cc25ee1abe6657a1a536603a4.png)

# c# - 与基类中的方法名称相同，派生类中的返回类型不同

> ID：15334023
> 
> 赞同：-1
> 
> 时间：2013-03-11T08:27:30.730
> 
> 标签：c#

使用下面的代码。

```
class Program
{
    static void Main(string[] args)
    {
        BaseClass obj = new BaseClass();
        DerivedClass obj2 = new DerivedClass();

        var x = obj.Method(2);
        var z = obj2.Method(1);
    }
}

class BaseClass
{
    public int Method(int i) { return i; }
}

class DerivedClass : BaseClass
{
    public string Method(int i) { return i.ToString(); }
} 
```

为什么当我在派生类中有方法时，派生类对象正在调用它自己的函数，如果我没有它，派生类对象正在调用基函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:30:22.267

如果要覆盖此行为，则可以使用[new 修饰符](http://msdn.microsoft.com/en-gb/library/435f1dw2%28v=vs.80%29.aspx)标记方法，该修饰符将显式隐藏派生类中的成员。

```
public new string Method(int i) { return i.ToString(); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:31:42.657

您应该已经收到了来自编译器的警告。您的新`Method()`方法隐式*隐藏*了基础（您可以使用`new`关键字使其显式，这也会使编译器警告静音）。另请参阅[http://msdn.microsoft.com/en-us/library/aa691135%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa691135%28v=vs.71%29.aspx)。

请注意，在 C# 中，不存在仅基于其输出类型重载方法这样的事情。仅仅因为您的新方法恰好返回 a`string`并不会使其签名与基的签名有任何不同。

请注意以下关于隐藏危险的警告，这也可能有助于说明正在发生的事情：

```
static void Main(string[] args)
{
    BaseClass obj = new BaseClass();
    DerivedClass obj2 = new DerivedClass();

    var x = obj.Method(2); //returns 2
    var z = obj2.Method(1); //returns 2 (2*2)
    var a = ((BaseClass)obj2).Method(1); //returns 1 (base's implementation!)
}

class BaseClass
{
    public int Method(int i) { return i; }
}

class DerivedClass : BaseClass
{
    public int Method(int i) { return i * 2; }
} 
```

这*与*以下代码中的行为不同，后者添加了一个新的`Method(string)`重载：

```
static void Main(string[] args)
{
    BaseClass obj = new BaseClass();
    DerivedClass obj2 = new DerivedClass();

    var x = obj.Method(2); //returns 2
    var z = obj2.Method("1"); //returns "1"
    var a = ((BaseClass)obj2).Method("1"); //returns "1"
}

class BaseClass
{
    public int Method(int i) { return i; }
}

class DerivedClass : BaseClass
{
    public string Method(string s) { return s; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:35:19.577

继承意味着您`DerivedClass`自动拥有所有拥有的成员`BaseClass`。因此它也有`Method`哪些返回`int`。

在`DerivedClass`. 因为 then`DerivedClass`有两个具有相同签名的方法。这就是您从编译器收到警告的原因。即使当您使用关键字的修饰符时警告消失了，使用`new`具有相同签名的两个方法仍然是一个坏主意。

相反，请为 中的方法**选择一个未使用的名称**`DerivedClass`。

更直接地回答你的问题：当你只有一种方法时`Method`，你在里面写的那个`BaseClass`，一切都很好。`DerivedClass` *继承*了这个方法。这就是您可以调用它的原因`obj2`。但是当你在 中引入第二种方法时`DerivedClass`，调用`obj2.Method(1);`需要在两种方法之间进行选择，因为不幸的是有两种方法具有相同的签名。这种情况下的规则是选择 中定义的方法`DerivedClass`。但请注意，这里重要的是编译时类型。所以如果你说

```
BaseClass obj3 = new DerivedClass();
var w = obj3.Method(42); 
```

即使运行时类型`obj3`是`DerivedClass`，由于编译时类型，它也是第一个被调用的方法。就像我说的，`obj3`拥有这两种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T08:35:25.027

这是因为，您将基方法隐藏在派生类中，并且当您创建派生类的对象时，它将调用自己的实现。当您在没有适当机制的情况下（通过使用 new 关键字）以及当您在派生类中没有该方法时，编译器会大喊大叫，然后基类实现就会启动。

# php - 值不是通过 ajax 将会话数组更新为 json 数组

> ID：15334026
> 
> 赞同：3
> 
> 时间：2013-03-11T08:27:53.760
> 
> 标签：php, ajax, arrays, json

我有一个会话数组**$_SESSION['Cartquantity']**。在第 200 行的 php 文件中，我将此数组存储在变量**$QtyArray 中**

```
$QtyArray = $_SESSION['Cartquantity'] ; 
```

然后我在**json**中对数组进行编码以在 js 文件中使用它

```
echo "var cartQty = " . json_encode($QtyArray) . ";" ; (on line 201) 
```

现在通过**AJAX**，我以同样的方式更新第 120 行的会话数组

```
$QtyArray = $_SESSION['Cartquantity'] ;                (on line 120)
echo "var cartQty = " . json_encode($QtyArray) . ";" ; (on line 121) 
```

这是我调用文件的javascript代码

```
$.ajax({
                    url:'index.php',
                    cache:false,
                    datatype:'json',
                    data:{ q: "add_card", item_id: id, item_qty: qty,stop:'1' },
                    success:function(data){
                        $("#cart_quanity").html(parseFloat($("#cart_quanity").html()))
                    }
                });
        return false ; 
```

数组显然正在更新，因为我可以在萤火虫的控制台上看到它。但是当我在 js 文件中获取这个值时，值并没有改变。如果我重新加载通过 ajax 更新此值的页面，然后查看数量，它正在发生变化。为什么会这样？

请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:55:26.980

ajax 请求的服务器端处理程序应该只返回数据文字本身。
在客户端解析该数据，然后在那里处理它 - 不是作为“完整”的 javascript 片段，而只是作为数据对象。JQuery 在解析部分为您提供支持。只需让它自动猜测响应的类型或在调用 $.ajax 或 $.post 时定义它。

```
$.post(url, data, function(response) {
  // you cann assume response to be an object 
  // containing the data from the json-response of the server
}, "json"); 
```

独立的例子（没有做任何有用的事情）：

```
<?php
if ( isset($_POST['foo']) ) {
    // the client requests a new item
    $rv = array(
      'status'=>'ok',
      'value'=>rand(1,10)
    );
    header('Content-type: application/json');
    echo json_encode($rv);
    die;    
}
?>
<html>
    <head>
        <title>...</title>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script>
            $(document).ready(function() {
                var total = 0;
                $(".foo").on("click", function() {
                    $.post("?", { foo: true }, function(data) {
                        if ( data.status && "ok"==data.status ) {
                            var newValue = data.value;
                            total += newValue;
                            $("#output").append("+ "+newValue+" = "+total+"<br />");
                        }
                    }, "json");
                });
            });
        </script>
    </head>
    <body>
        <button class="foo">click</button>
        <div id="output">0<br /></div>
    </body>
</html> 
```

# web-services - Apache wink REST - 特定标头的 IllegalArgumentException

> ID：15334036
> 
> 赞同：0
> 
> 时间：2013-03-11T08:28:20.417
> 
> 标签：web-services, apache, rest, http-headers, apache-wink

如果我提供身份验证标头，我的休息服务工作正常。但是当我`log-level=debug|info`与身份验证标头一起添加时，同样会引发 500 内部服务错误。我不知道它在哪里失败。我只收到以下错误。

```
org.apache.wink.server.internal.RequestProcessor logException
IllegalArgumentException occurred during the handlers chain invocation 
```

我无法获得有关该错误的更多信息。请帮我。谢谢。

**更新：**

我正在使用眨眼孵化器 1.1.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:42:05.433

Atlast 找到了解决方案。而不是`debug`，当我尝试使用`Debug`它时工作正常。异常是从 .jar 引发的。当我得到它的源代码时，我进行了调试，发现 loglevel 的值在一个枚举中，它在驼峰式中。现在问题已解决。感谢您的回复。

# python - Python 单元测试：在另一个模块中运行测试

> ID：15334042
> 
> 赞同：16
> 
> 时间：2013-03-11T08:28:35.860
> 
> 标签：python, unit-testing, module, tdd

我想将应用程序的文件放在 /Files 文件夹下，而将测试单元放在 /UnitTests 中，这样我就可以清楚地将应用程序和测试分开。

为了能够使用与 mainApp.py 相同的模块路由，我在根文件夹中创建了一个 testController.py。

```
mainApp.py
testController.py
Files
  |__init__.py
  |Controllers
     | blabla.py
  | ...
UnitTests
  |__init__.py
  |test_something.py 
```

因此，如果在 test_something.py 中我想测试 /Files/Controllers/blabla.py 中的一个函数，我尝试以下操作：

```
import unittest
import Files.Controllers.blabla as blabla

class TestMyUnit(unittest.TestCase):

    def test_stupid(self):
        self.assertTrue(blabla.some_function())

if __name__ == '__main__':
    unittest.main() 
```

然后从文件 testController.py 中，我执行以下代码：

```
import TestUnits.test_something as my_test
my_test.unittest.main() 
```

哪个输出没有失败，但没有执行测试

```
----------------------------------------------------------------------
Ran 0 tests in 0.000s

OK
[Finished in 0.3s] 
```

我尝试过一个没有依赖关系的测试，如果作为“ **main** ”执行，但从外部调用时，输出相同：

```
import unittest

def tested_unit():
    return True

class TestMyUnit(unittest.TestCase):

    def test_stupid(self):
        self.assertTrue(tested_unit())

if __name__ == '__main__':
    unittest.main() 
```

**问题：我怎样才能让它工作？**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-11T09:54:24.877

unittest.main() 方法查看上下文中存在的所有 unittest.TestCase 类。所以你只需要在你的 testController.py 文件中导入你的测试类并在这个文件的上下文中调用 unittest.main() 。

所以你的文件 testController.py 应该看起来像这样：

```
import unittest    
from UnitTests.test_something import *
unittest.main() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-11T09:53:27.443

在 test_something.py 中，执行以下操作：

```
def suite():
    suite = unittest.TestSuite()
    suite.addTest(unittest.makeSuite(TestMyUnit, 'test'))
    return suite 
```

在 testController.py 中，执行以下操作：

```
from TestUnits import test_something

def suite():
    suite = unittest.TestSuite()
    suite.addTest(test_something.suite())
    return suite

if __name__ == '__main__':
    unittest.main(defaultTest='suite') 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-20T11:34:24.763

有一种使用 subprocess.call() 运行测试的解决方法，例如：

```
import subprocess

args = ["python", "test_something.py"]
subprocess.call(args) 
```

# php - 在 for 循环中重新循环数组项

> ID：15334048
> 
> 赞同：-1
> 
> 时间：2013-03-11T08:28:56.110
> 
> 标签：php, arrays, loops, for-loop, if-statement

我有一个用于检查条件的 for 循环，我想知道如果在对变量进行一些更改后它不满足条件，我是否可以通过循环重新运行一个项目。是否可以在我的 else 语句中添加一些内容，使我能够在新条件下重新运行相同的 $item？

```
$array_1 = array();
$arraynumber = 0;
foreach($test_array as $item) {
     if($item[2] == $test_array[$y][2]) {
          $array_1[$arraynumber][] = $item;
          $z++;
     } else {
          $arraynumber++;
          $y = $y+$z;
          $z=0;

          echo $item[2];
     }
} 
```

解决方案原来是这样的，只针对那些感兴趣的人：

```
foreach($test_array as $item) {
if($item[2] == $test_array[$y][2]) {
  $array_1[$arraynumber][] = $item;
 $z++;
}elseif($item[2] == $test_array[$y+$z][2]){
$array_1[$arraynumber+1][] = $item;

 $y = $y+$z;
  $z=1;

  $arraynumber++;
}else{
$array_1[$arraynumber+2][] = $item;
 $z++;
 $y = $y+$z;
  $z=0;
  $arraynumber++;

echo $item[2];
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:33:08.860

> 通过循环重新运行**项目**

您可以使用[**`prev()`**](http://www.php.net/manual/en/function.prev.php)which 将内部数据指针设置后退 1 步。

```
prev($test_array); //will re-run the current element in the next iteration 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:32:53.783

您可以使用

```
While(true){
//your code
} 
```

在 for 循环之前，但请确保您打破循环，否则它将成为无限循环并挂起您的服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T08:39:23.960

```
$array_1 = array();
$arraynumber = 0;
foreach($test_array as $item) {
  if($item[2] == $test_array[$y][2]) {
     $array_1[$arraynumber][] = $item;
     $z++;
  }elseif("Your Second statment"){
   echo 'Your second Task';
  }else{
    $arraynumber++;
    $y = $y+$z;
    $z=0;

    echo $item[2];
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T08:34:40.943

您也可以使用`[GOTO](http://php.net/manual/en/control-structures.goto.php)`.

**例子**

```
<?php
for($i=0,$j=50; $i<100; $i++) {
  while($j--) {
    if($j==17) goto end; 
  }  
}
echo "i = $i";
end:
echo 'j hit 17';
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T08:51:08.640

使用多级中断，就像这个 -

```
$flag=0;
while(true) {
    while($cond) {
        if($cond2) {
            $flag=1;
            break;
        }
    }
    if($flag) break;
} 
```

# android - 布局加载缓慢

> ID：15334051
> 
> 赞同：10
> 
> 时间：2013-03-11T08:28:59.700
> 
> 标签：android, performance, android-layout, android-ui, slidingmenu

我有一个超级类，它在图书馆里。这个库负责初始化一些基本的布局组件和其他东西。我的问题是加载布局需要 1.x 秒，并在设置子指定布局之前显示一段时间的默认布局。

这是我的超类的方法：

```
public void InitializeWindow(Activity act, int layoutResourceId, String windowTitle,
        Object menuAdapter, int slideMenuMode) {
    super.setContentView(layoutResourceId);
    super.setBehindContentView(R.layout.menu_frame);
    this.menuAdapter = menuAdapter; 
    this.slideMenuMode = slideMenuMode;
    setWindowTitle(windowTitle);
    initializeSlidingMenu();
} 
```

这被称为：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.InitializeWindow(this, R.layout.activity_home, "\t\tHome",
            new MenuAdapter(this, R.menu.slide_menu), SlidingMenu.TOUCHMODE_FULLSCREEN);    
} 
```

该应用程序像一个魅力，但它需要，正如我所说，加载从子类传递的布局大约需要 1.x 秒。为什么会这样？

根据要求，这是我的`initializeSlideMenu()`方法：

```
public void initializeSlidingMenu() {
    this.setSlidingActionBarEnabled(true);
    getSlidingMenu().setBehindOffsetRes(R.dimen.actionbar_home_width);
    getSlidingMenu().setShadowWidthRes(R.dimen.shadow_width);
    getSlidingMenu().setShadowDrawable(R.drawable.shadow);
    getSlidingMenu().setTouchModeAbove(slideMenuMode);
    getSlidingMenu().setBehindScrollScale(0.25f);

    ListView v = new ListView(this);
    v.setBackgroundColor(Color.parseColor("#000000"));
    v.setAdapter((ListAdapter) menuAdapter);
    getSlidingMenu().setMenu(v);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T07:40:44.617

为了避免此类问题，通常有三种方法。

1.  让您的 onCreate() 尽早在 setContentView() 调用之后完成。您可以使用 postDelayed runnable 来延迟一些早期可能不需要的初始化。

2.  当视图准备好时执行一些任务，它会导致 Runnable 被添加到该视图的消息队列中。

片段

```
view.post(new Runnable() {

        @Override
        public void run() {

        }
    }); 
```

如果以上都没有帮助考虑“使用存根优化”链接：[http ://android-developers.blogspot.in/2009/03/android-layout-tricks-3-optimize-with.html](http://android-developers.blogspot.in/2009/03/android-layout-tricks-3-optimize-with.html)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:08:32.780

我怀疑你的麻烦点是：

```
 v.setAdapter((ListAdapter) menuAdapter); 
```

您应该将其作为`AsyncTask`. 适配器执行加载通常会很慢。

下面是一个示例 AsyncTask 实现的片段：

```
//before starting the load, I pop up some indicators that I'm doing some loading
progressBar.setVisibility(View.VISIBLE);
loadingText.setVisibility(View.INVISIBLE);

AsyncTask<Void, Void, Void> loadingTask = new AsyncTask<Void, Void, Void>() {
        private ArrayList<Thing> thingArray;

        @Override
        protected Void doInBackground(Void... params) {
            //this is a slow sql fetch and calculate for me
            thingArray = MyUtility.fetchThings(inputValue);
            return null;
        }

        @Override
        public void onPostExecute(Void arg0) {
            EfficientAdapter myAdapter = new EfficientAdapter(MyActivity.this, thingArray);
            listView.setAdapter(myAdapter);
            //after setting up my adapter, I turn off my loading indicators
            progressBar.setVisibility(View.INVISIBLE);
            loadingText.setVisibility(View.INVISIBLE);
            RelativeLayout layout = (RelativeLayout)MyActivity.this.findViewById(R.id.spacey);
            if (layout != null) {
                LayoutInflater inflater = LayoutInflater.from(MyActivity.this);
                View view = inflater.inflate(R.layout.name_tabled_sub, layout);
                NamedTableView tableView = new NamedTableView(MyActivity.this, view);
            }
            progressBar.setVisibility(View.INVISIBLE);
            loadingText.setVisibility(View.INVISIBLE);

        }
    };
    loadingTask.execute(); 
```

您还可以使用异步任务执行“预执行”项目，以及更新。

# python - 运行 Python 的 Crontab 问题

> ID：15334052
> 
> 赞同：0
> 
> 时间：2013-03-11T08:29:05.813
> 
> 标签：python, crontab, raspberry-pi

我试图让 cron 每 10 分钟运行一次这个命令；

（在 /home/pi/myst-myst/ DIR 中）

```
python myst.py `./monitor.sh` 
```

我已经尝试了几乎所有方法来让它工作，但 cron 无法正确执行它。这是我目前所拥有的；

```
*/1 * * * * /usr/bin/python /home/pi/myst-myst/myst.py `./monitor.sh` 
```

任何帮助将非常感激。

**我可以使用 crontab 的替代品吗？我可以使用 bash 脚本来执行 python，然后使用 cron 来执行该 bash 脚本吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T18:58:51.333

我在直接从 cron 调用 python 和 perl 时遇到了问题。对于 perl，它归结为 LIBPATH 默认为不足。

我建议将您的命令包装在 shell 脚本中并添加“set -x”以跟踪问题

```
#!/bin/sh
set -x
export PYTHONPATH=/my/python/modules:$PYTHONPATH
/usr/bin/python /home/pi/myst-myst/myst.py $(/home/pi/myst-myst/monitor.sh) 
```

直接调用它以确保它工作，然后尝试通过 cron 调用。确保重定向 stdout 和 stderr 以捕获任何错误消息

```
 */10 * * * * /home/pi/myscript.sh > /home/pi/stdout 2> /home/pi/stderr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:40:44.167

你可以做类似的事情

```
*/10 * * * * cd /home/pi/myst-myst/;/usr/bin/python /home/pi/myst-myst/myst.py $(./monitor.sh) 
```

在运行命令之前更改工作目录。

编辑：替换反引号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T10:00:46.160

试试这个方法：

```
 */1 * * * * /home/pi/myst-myst/myst.py `./monitor.sh` 
```

并在 myst.py 中添加以下内容

```
#!/usr/bin/env python 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T09:48:57.467

您的脚本是否依赖于任何环境变量，例如`PYTHONPATH`？如果是这样，当被 cron 调用时，环境将丢失。

你可以试试：

```
*/1 * * * * PYTHONPATH=/my/python/modules/ /usr/bin/python /home/pi/myst-myst/myst.py `./monitor.sh` 
```

# python - 在金字塔中使用 mongoengine ORM 通过 pymongo 插入数据

> ID：15334056
> 
> 赞同：1
> 
> 时间：2013-03-11T08:29:29.077
> 
> 标签：python, json, mongodb, pymongo, mongoengine

我想使用 pymongo 连接和方法来使用 mongodb，但同时我想使用 mongoengine ORM。

样本：

```
class User(Document):
    email = StringField(required=True)
    first_name = StringField(max_length=50)
    last_name = StringField(max_length=50)

john = User(email='jonhd@example.com')
john.first_name = 'Jonh'
john.last_name = 'Hope' 
```

现在我想将新形成的文档用户插入到我的“test_collection”中。如果只使用 mongoengine 我可以这样做：

```
connect('test_database')
john.save() 
```

然后我可以轻松访问我的数据：

```
for user in User.objects:
    print user.first_name 
```

但是当我尝试使用 pymongo 做同样的事情时，我遇到了一个错误：

```
connection = MongoClient('localhost', 27017)
db = connection.test_database
collection = db.test_collection
collection.insert(john) 
```

追溯：

```
Traceback (most recent call last):
File "C:/Users/haribo/PycharmProjects/test/mongoeng.py", line 18, in <module>
    collection.insert(john)
File "C:\Python27\lib\site-packages\pymongo\collection.py", line 353, in insert
    docs = [self.__database._fix_incoming(doc, self) for doc in docs]
File "C:\Python27\lib\site-packages\pymongo\database.py", line 258, in _fix_incoming
    son = manipulator.transform_incoming(son, collection)
File "C:\Python27\lib\site-packages\pymongo\son_manipulator.py", line 73, in transform_incoming
    son["_id"] = ObjectId()
TypeError: 'str' object does not support item assignment 
```

但这有效：

```
connection = MongoClient('localhost', 27017)
db = connection.test_database
collection = db.test_collection
john = { 'email': 'jonhd@example.com', 'first_name': 'Jonh', 'last_name': 'Hope' }
collections.insert(john) 
```

并使用 pymongo 访问数据：

```
print collection.find_one()

{u'last_name': u'Hope', u'first_name': u'Jonh', u'_id': ObjectId('513d93a3ee1dc61390373640'), u'email': u'jonhd@example.com'} 
```

所以，我的主要想法和问题是：

我如何使用 mongoengine 进行 ORM 和 pymongo 连接以及使用 mongodb 的方法？

PS我提到我想在金字塔中使用它以获得一些上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:59:30.217

Pymongo 接受 python 字典（或类似对象的字典）并将它们持久化到 mongoDB。Pymongo 不能获取 MongoEngine 类实例并持久化它们。

MongoEngine 是一个 orm 包装器，它在下面使用 pymongo，并在 Class 实例上有一个方法来保存例如：`john.save()` MongoEngine 代码内部发生的事情是将`john`实例中的数据转换为可以通过 pymongo 存储在 MongoDB 中的字典。

# ms-access - MS Access 2007 中的查询应该是什么

> ID：15334058
> 
> 赞同：1
> 
> 时间：2013-03-11T08:29:36.797
> 
> 标签：ms-access, group-by, where-clause, correlated-subquery

有一张表，其中包含：
id、bookid、name、dateofentry、status。

需要相应书籍的 bookid 和 last dateofentry 以及书籍状态的结果，即仅 R（R- 返回，NR- 不返回）

例如输入：-

```
id bookid subject dateofentry Status
1   10      math   10-11-2012 NR
2   10      math   1-12-2012  R
3   110     math   1-12-2012  NR
4   110     math   10-12-2012 NR
5   102     math   10-11-2012 NR
6   102     math   1-12-2012  R
7   105     math   10-12-2012 NR
8   105     math   17-12-2012 NR
9   106     math   11-12-2012 NR
10  106     math   14-12-2012 R 
```

输出：-

```
10   math 1-12-2012 R
102  math 1-12-2012 R
106  math 14-12-2012 R 
```

这应该是什么查询

提前致谢

我试过这个： -

```
SELECT t.bookid, t.satus, r.MaxDate
FROM (SELECT bookid, MAX(dateofentry) as MaxDate
      FROM TempLogs
      GROUP BY bookid) r
INNER JOIN Logs t ON t.bookid = r.bookid AND t.dateofentry = r.MaxDate where status="R" 
```

但是我遇到了一些语法错误，并且它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:42:18.547

看起来语法错误是因为您使用了 2 个不同的表名。在您的子查询中，您使用的是 table`TempLogs`但在外部查询中，您引用的是 table `Logs`。除此之外，您尝试实现的实际查询和方法似乎是正确的。

# intuit-partner-platform - Quickbooks Online Hello Word .Net 示例

> ID：15334068
> 
> 赞同：3
> 
> 时间：2013-03-11T08:30:20.133
> 
> 标签：intuit-partner-platform, quickbooks-online

我正在寻找构建一个将连接到 Quickbooks Online 的 .Net 应用程序。此应用程序不打算上传到 Quickbooks 在线应用程序中心。我只是想构建一个可以连接到我的个人 Quickbooks Online 帐户的 .Net 应用程序。我不了解使用 IPP、.Net DevKit、AggCat DevKit、SDK、Intuit Anywhere 等的区别和目的。

我在这里加入了 IPP：http: [//developer.intuit.com/](http://developer.intuit.com/) 我最终想让我的程序允许连接到其他 Quickbooks Online 帐户，但现在我只想连接到我的在线帐户。是否有我可以遵循的基本设置（即 Hello World 示例）？

在 appcenter.intuit.com（管理我的应用程序选项卡）中，我看到了我的“Quickbooks Online”=>“启动应用程序”按钮，该按钮将我带到我的在线帐户。

我不确定何时使用 IPP .NET DevKit 2.0 和/或 IPP .NET AggCat DevKit 1.0。我想我想使用 AggCat。我查看了 AggCat 授权文档并查看 OAuthRequestValidator 需要 AccessToken 和 AccessTokenSecret。我在任何地方都看不到这些字段。我确实有 OAuth ConsumerKey 和 OAuth ConsumerSecret（以及 SAML 身份提供者 ID 和 x.509 公共证书序列号）。.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T12:14:37.787

如果您阅读[Intuit Anywhere 常见问题解答](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0080_FAQ)，您会发现以下问题/答案：

> 问：实施 Intuit Anywhere 有哪些要求？
> 
> 答：您的应用程序必须： 是可在浏览器中使用的 Web 应用程序，作为服务（SaaS，包括基于交易定价）出售给多个客户的产品。支持 SaaS 应用程序的移动扩展。

和：

> 问：我想将我的自定义（非 SaaS、单租户）解决方案与 Intuit Anywhere 集成。我可以这样做吗？
> 
> 答：不是今天，但我们正在考虑。

所以，因为你指出：

> 我只是想构建一个可以连接到我的个人 Quickbooks Online 帐户的 .Net 应用程序。

您没有资格为 Intuit Anywhere/Intuit 合作伙伴平台/聚合 API/等进行构建。

**所以，回答你的其他问题：**

> 我不了解使用 IPP、.Net DevKit、AggCat DevKit、SDK、Intuit Anywhere 等的区别和目的。

*   *IPP*是在其上构建许多 Intuit 较新服务的平台（包括 Intuit Anywhere 和 AggCat API）

*   *.NET DevKit*用于访问适用于 SaaS 应用程序的 Intuit Anywhere/Intuit 数据服务

*   *AggCat DevKit*用于通过 Intuit Anywhere 访问财务信息（例如 Mint.com 如何从您的银行账户中提取数据等）

*   *QuickBooks SDK*是访问 QuickBooks 数据的另一种方式（另一种是 Intuit Anywhere/DevKits）——*这是您应该采取的途径，因为您不是 SaaS 应用程序*。

*   *Intuit Anywhere*是 DevKit 用于访问 Intuit 合作伙伴平台的特定身份验证方案。

> 我不确定何时使用 IPP .NET DevKit 2.0 和/或 IPP .NET AggCat DevKit 1.0。

两者都不。您没有资格使用 IPP，因此您必须改用 qbXML。

[您可以在我们的QuickBooks 集成 wiki](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_online_edition)上找到有关使用 qbXML 连接到 QuickBooks Online 的一些信息。最简单的入门方法是在桌面模式下注册，然后使用[为 QuickBooks Online 提供的一些示例 .NET 代码](http://wiki.consolibyte.com/wiki/doku.php/quickbooks_integration_csharp#c_net_sample_code_for_quickbooks_online_edition)。

> 在 appcenter.intuit.com（管理我的应用程序选项卡）...

AppCenter 完全不适用于您 - 因为您不是 SaaS 应用程序，所以您没有资格为它构建。

> 我不确定何时使用 IPP .NET DevKit 2.0 和/或 IPP .NET AggCat DevKit 1.0。

如果您是 SaaS 应用程序，那么：

*   *当您想要访问 QuickBooks 中的数据时使用*.NET DevKit**

**   *.NET AggCat*当您想要访问银行帐户信息时* 

 *如果您不是 SaaS 应用程序，那么您也不能使用。*

# php - ZF2 和 DOMPDF 自动加载问题

> ID：15334072
> 
> 赞同：0
> 
> 时间：2013-03-11T08:30:35.143
> 
> 标签：php, zend-framework2, dompdf, zend-loader

我在我的项目中使用 Zend Loader，[我](https://github.com/zendframework/Component_ZendLoader)无法为 DOMPDF 配置 Zend 自动加载器，与 dompdf 自动加载器并行工作。有什么方法可以设置 zend 自动加载来配置，使其回退到 dompdf 自动加载器。

我看到了一些示例，例如使用 pushAutoLoader，但这似乎使用 Zend 旧版本（可能 v < 2）

```
 require_once('dompdf/dompdf_config.inc.php' );
    $autoloader = Zend_Loader_Autoloader::getInstance();
    $autoloader->pushAutoloader('DOMPDF_autoload', ''); 
```

ZF2 Loader 中 pushAutoloader() 的替代方法是什么？我现在没有看到任何这样的方法。

还有一件事我不能使用`'fallback_autoloader' => true,`选项，因为我使用的是 php 5.3.1，这给了我错误：

```
 `Call to undefined function Zend\Loader\stream_resolve_include_path()` 
```

似乎`stream_resolve_include_path()`是在 php 5.3.2 中添加的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:43:48.687

这似乎是一个小故障，刚刚发现 DOMPDF 配置文件正在使用一种过时的方式来注册其自动加载器，例如

```
if ( !function_exists("__autoload") ) {
  /**
   * Default __autoload() function
   *
   * @param string $class
   */
  function __autoload($class) {
    DOMPDF_autoload($class);
  }
} 
```

并且修复将只是使用`spl_autoload_register`bcz [php spl_autoload_register vs __autoload？](https://stackoverflow.com/questions/6894538/php-spl-autoload-register-vs-autoload)并用一行代码替换上面的代码，对自动加载功能进行小幅更新

```
function DOMPDF_autoload($class) { 
  //don't check for namespaced files/classes   
  if(strpos($class, "\\") > 0) return;

  if($class=='UFPDF') return ;

  $filename = mb_strtolower($class) . ".cls.php";

  require(DOMPDF_INC_DIR . "/$filename");
}

spl_autoload_register('DOMPDF_autoload'); 
```

干杯:)

# jquery - jquery 只执行元素绑定代码

> ID：15334075
> 
> 赞同：0
> 
> 时间：2013-03-11T08:30:53.380
> 
> 标签：jquery

我真的不知道如何解释我的问题（或者正确的标题可能是什么）所以我做了一个 jqFiddle。

[http://jsfiddle.net/Ky5Pp/2/](http://jsfiddle.net/Ky5Pp/2/)

有没有办法让它只执行'.tdClass'代码？现在它先执行 tdClass 代码，然后执行 trClass 代码。

所以它应该只执行

```
alert("cell clicked"); 
```

很抱歉解释我的问题很糟糕，但我认为 jsfiddle 应该有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:33:04.610

添加

```
e.stopPropagation() 
```

在您的`td`点击事件中。

`**[DEMO](http://jsfiddle.net/Ky5Pp/3/)**`

```
$(".tdClass").on("click", function (e) {
        alert("cell clicked");
        e.stopPropagation();
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:39:52.823

使用以下内容：

### [小提琴](http://jsfiddle.net/Ky5Pp/5/)

```
$(".tdClass").on("click", function (e) { //<-pass it here
    e.stopPropagation();  // <--------------and you should stop event bubbling
    alert("cell clicked");
}); 
```

### 从文档：

（*防止事件在 DOM 树中冒泡，防止任何父处理程序收到事件通知。*）

# wpf - 在运行时从同名程序集中加载 ResourceDictionary 资源

> ID：15334085
> 
> 赞同：5
> 
> 时间：2013-03-11T08:31:24.173
> 
> 标签：wpf, runtime, uri, resourcedictionary

尝试从两个具有**相同名称**但**位于不同文件夹中的**单独程序集加载资源时遇到了一些问题：

*   C:\folder1\fcl.dll
*   C:\folder2\fcl.dll

一个`ResourceDictionary`名为**Resources.xaml**被嵌入（作为一个页面）在每个这些程序集中。

要加载第一个`ResourceDictionary`，我使用以下代码段：

```
// Load the assembly in memory
var assembly = Assembly.LoadFrom(@"c:\folder1\FCL.Dll");

// Get Dictionnary 
var uri = string.Format("pack://application:,,,/{0};Component/Resources.xaml", assembly.GetName().Name);
var resourceDictionary = new ResourceDictionary { Source = new Uri(uri) }; 
```

这是在运行！

但是，当我尝试`ResourceDictionary`使用相同的代码片段加载第二个时（只是更改`Assembly.LoadFrom(@"c:\folder1\FCL.Dll")`，**它不会从 c:\folder2\fcl.dll 加载资源，而是从先前加载的 c:\folder1\fcl.dll 加载资源**`Assembly.LoadFrom(@"c:\folder2\FCL.Dll")`：**-(**

原因：URI的**shortAssemblyName**字段相同，可能情况FCL：

```
 var uri = string.Format("pack://application:,,,/{0};Component/Resources.xaml", assembly.GetName().Name) 
```

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:20:55.457

你不能加载两个同名的程序集，所以我认为第二个 Assembly.LoadFrom 只是被忽略了。您可能必须重命名其中一个程序集。

# ios - 带有调整大小的 iOS 自动布局

> ID：15334089
> 
> 赞同：0
> 
> 时间：2013-03-11T08:31:39.463
> 
> 标签：ios, autolayout

我有两个视图，一个是 textView，下面是一个滚动视图，在我的应用程序中，textView 应该在触摸它时切换展开。我在 IB 中为 scrollView 设置了“顶部空间为：文本视图”。但是当我展开 textView 时，它似乎不行。

这是切换扩展代码。

```
- (void)onTextViewClicked:(id)sender
{
    CGRect targetFrame = _descTextView.frame;
    if (_isTextViewExpand) {
        targetFrame.size.height = _descTextViewNormalHeight;
        _descTextView.frame = targetFrame;
        _isTextViewExpand = NO;
        [_contentScrollView setContentSize:CGSizeMake(320.f, kContentScrollViewDefaultHeight)];
    }
    else {
        targetFrame.size.height = _descTextViewExpandHeight;
        _descTextView.frame = targetFrame;
        _isTextViewExpand = YES;
        [_contentScrollView setContentSize:CGSizeMake(320.f, kContentScrollViewDefaultHeight + ( _descTextViewExpandHeight - _descTextViewNormalHeight ))];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T02:34:14.033

您需要完全不同的方法。使用自动布局，您永远不应该调用`-setFrame:`. 如果您希望视图增长，您应该添加一个约束或编辑现有约束之一，然后调用其中一个`-setNeedsUpdateConstraints`或`-layoutIfNeeded`。

或者只是关闭自动布局。

# python - 没有错误，只是不打印或做任何事情

> ID：15334094
> 
> 赞同：0
> 
> 时间：2013-03-11T08:31:53.800
> 
> 标签：python, list, iteration

我是一个初学者，我正在寻求帮助。我应该编写一个从文件中读取数字的简单程序（它们按如下两列排序：

```
3 788506
255 879405
3 687899
255 697879 etc) 
```

并且总是成对地从 3 附近的数字中减去 255 附近的数字。差异应附加到列表中。我还必须检查这对是否正确（例如，它总是一个接一个地是 3 和 255，而不是两个 255）。到目前为止，我想我已经准备好了，但它什么也没做。我花了几个小时寻找我的错误，但我就是看不出哪里出了问题。我将不胜感激任何帮助。

```
filepath = "C:/liz/RT1-1.dat"
f = open (filepath, 'rU')
reac3 = []
reac255 = []
right_list = []
wrong_list = []
very_wrong_list =[]
li = [i.strip().split() for i in f.readlines()]
for element in li:
    if int(element[0]) == 3: reac3.append(element[-1])
    elif int(element[0]) == 255: reac255.append(element[-1])
k = 0
for i in range (0, len(li)+1, 2): #0,2,4,6,8 etc
    if li[i][0] == 3 and li[i+1][0] == 255:
            difference = int(reac255[k]) - int(reac3[k])
            print int(difference)
            k+=1
            if difference > 300 and difference < 1200: right_list.append(difference)
            else: wrong_list.append(difference)
    else: very_wrong_list.append(li[i])
print right_list 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:36:51.597

`i.strip().split()`将返回 2 个字符串 .. 因此您的比较`li[i][0] == 3`&`li[i+1][0] == 5`应该失败，因为`li[i][0]`&`li[i+1][0]`仍然是字符串。

还要注意，既然`len(li)`应该是偶数，那么`xrange(0, len(li) + 1, 2)`最终会使`i = len(li)`哪个应该超出列表边界。

# windows - Windows中当前目录和工作目录的区别

> ID：15334097
> 
> 赞同：10
> 
> 时间：2013-03-11T08:32:06.140
> 
> 标签：windows, working-directory

Windows 中的当前目录和工作目录有什么区别？如何更改 Notepad++ 或 Mozilla Firefox 等应用程序的工作目录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T09:12:51.817

当前目录和工作目录只是同一事物的两个不同名称。每个进程都维护一个当前目录。

当前目录在启动时指定为用于创建进程的任何函数的参数，例如`CreateProcess`. 您如何更改您的应用程序之一的当前目录？好吧，这取决于您如何启动它。

*   如果从快捷方式启动它，请更改快捷方式的属性以指定当前目录。
*   如果您从命令提示符开始，则当前目录将是您启动命令提示符时的当前目录。
*   如果您首先调用`CreateProcess`，则工作电流将是您 `CreateProcess`在`lpCurrentDirectory`参数中传递的任何内容。如果通过`NULL`，则将使用父进程的当前目录。

# java - 如何在使用 Maven 编译期间从一个目录中排除源文件并从另一个目录中包含相同的文件？

> ID：15334099
> 
> 赞同：1
> 
> 时间：2013-03-11T08:32:10.133
> 
> 标签：java, maven, compilation

在我的项目中，我使用两个源目录（通过 build-helper-maven-plugin）。我有一个课程同时出现在他们两个中。所以，当我尝试运行“mvn compile”时，我得到“Class is duplicated”错误。我无法删除其中一个文件 - 它们都必须存在，我需要通过调整 pom.xml 来解决这个问题。
我看过这些主题：

*   [从 Maven 构建中（暂时）排除源的“正确”方法是什么，是否有一种简单的方法可以从 Eclipse 中做到这一点？](https://stackoverflow.com/questions/4794973/whats-the-right-way-to-temporarily-exclude-sources-from-a-maven-build-and)
*   [使用 maven 编译时如何忽略 .java 文件？](https://stackoverflow.com/questions/3621727/how-to-ignore-java-files-when-compiling-using-maven)

但解决方案对我不起作用。我意识到我无法使用 maven-compiler-plugin 部分指定文件的绝对路径 - 只能从源目录的根目录开始的相对路径。所以，我既可以排除它们，也可以同时包含它们。

POM.xml：

```
<project>
    <modelVersion>4.0.0</modelVersion>
    <artifactId>child-project</artifactId>
    <packaging>war</packaging>
    <name>child-project</name>
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>
    <parent>
        <groupId>com.project</groupId>
    <artifactId>project</artifactId>
    <relativePath>../pom.xml</relativePath>
    <version>1.0</version>
    </parent>

    <build>
        <finalName>child-project</finalName>
        <!-- First source directory. Contains A.java file i need to exclude-->
        <sourceDirectory>${basedir}/src</sourceDirectory>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                   <source>1.6</source>
                   <target>1.6</target>
                   <!-- doesn't work
                   <excludes>                       
                       <exclude>${basedir}/src/com/project/A.java</exclude>                     
                   </excludes>
                   -->
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>build-helper-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>generate-sources</phase>
                        <goals><goal>add-source</goal></goals>
                        <configuration>
                            <sources>
                                <!-- Second source directory. Contains A.java file i need to include-->
                                <source>${custom-directory}/webapp/src</source>
                            </sources>
                        </configuration>
                    </execution>
                </executions>
            </plugin>           
            ...
        </plugins>
    </build>
</project> 
```

# django - 带有身份验证但没有 ssh 的 Git

> ID：15334102
> 
> 赞同：4
> 
> 时间：2013-03-11T08:32:23.563
> 
> 标签：django, git, authentication

我有一个项目为我的学校设置一个 git 服务器，它带有一个 Web 界面来创建存储库并显示它们。此 Web 部件将由了解用户的 Django 处理。

现在的问题是：我希望通过身份验证来拉取和推送私有存储库，但我不能使用 SSH 来处理该部分（IT 人员不想对此提供支持）。HTTP 协议是只读的，没有“复杂的 WebDAV”（[根据官方文档](http://git-scm.com/book/ch4-1.html#The-HTTP/S-Protocol)）并使用 .htaccess 作为身份验证。.htaccess 的问题是用 Django 管理它们：我尝试在其中使用 Django 用户的哈希，但它不起作用。最后，Git 协议是可读写的，但缺少身份验证。

加起来：

*   我想要与 Django 的用户数据库链接的身份验证。（为了避免多个地方有相同的数据）
*   没有 SSH
*   避免使用 WebDAV 和 .htaccess

有了这些限制，我发现重写 git 守护进程（[github 上的代码](https://github.com/git/git/blob/master/daemon.c)）来处理身份验证是一个想法，但我不确定 Git 客户端会如何对此做出反应。

如果你们有其他想法或想告诉我使用 WebDAV/.htaccess/... 会更好，我会很高兴听到它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T08:45:03.197

您可以设置一个 Apache 服务器（即使是像我在[我的配置](https://github.com/VonC/compileEverything/blob/master/apache/env.conf.tpl)中那样使用 https 的服务器！），但您会要求您的 wsgi 应用程序处理身份验证。

**[请参阅mod_wsgi](http://code.google.com/p/modwsgi/)**中的“[访问控制机制](http://code.google.com/p/modwsgi/wiki/AccessControlMechanisms)” ：

```
AuthType Basic
AuthName "Top Secret"
AuthBasicProvider wsgi
WSGIAuthUserScript /usr/local/wsgi/scripts/auth.wsgi
Require valid-user 
```

auth.wsgi 脚本可以根据您的 Django 用户数据库检查凭据。

该解决方案意味着调用`git-http-backend`（[智能 http 传输](http://git-scm.com/2010/03/04/smart-http.html)），它比 WebDAV 更高效。

# javascript - js jqgrid 1.7行视图窗口如何操作内容

> ID：15334103
> 
> 赞同：0
> 
> 时间：2013-03-11T08:32:34.867
> 
> 标签：javascript, jqgrid

我的数据库中有一些较大的文本字段，我想将其包含在我的 jqGrid 中。我不想让网格变得凌乱和巨大，我想放置某种占位符而不是这个文本字段，比如 V 或 X，这将表示是否有其他内容可供查看。

然后，在用户选择查看某一行之后，一个弹出窗口（标准 jqGrid 行视图）在他面前出现，他可以在那里阅读整个文本内容，还可以查看旁边其他列的信息。

现在，我的问题如下所述：

如何根据请求从数据库动态刷新该行的内容并将其放置在此弹出窗口的正确行中，除非使用直接操作 HTML，我认为这有点脏：

```
$('#v_recommendation_count').html('Oleg<br/>Is recommended<br/>Oleg<br/>Is recommended<br/>Oleg<br/>Is recommended'); 
```

另外我如何控制这个窗口的尺寸？，不仅是外部的，还有行和列的大小，因为它似乎没有完全响应，并且部分标签行文本被覆盖到内容行中。

在此先感谢，奥列格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:18:31.007

可能您应该只`max-height`在 jqGrid 的某些地方使用属性。查看[答案](https://stackoverflow.com/a/6574194/315935)，[另一个](https://stackoverflow.com/a/13330814/315935)和[这个](https://stackoverflow.com/a/8420646/315935)以获得更多示例。

# xml - 加载外部 xml

> ID：15334104
> 
> 赞同：1
> 
> 时间：2013-03-11T08:32:41.037
> 
> 标签：xml, xslt, asp-classic

我在 ASP 页面中有下一个代码，但我想检索一个外部 xml 文件。有谁知道我该怎么做？

```
<%@LANGUAGE="VBSCRIPT" CODEPAGE="1252"%>
<%
'Load XML
set xml = Server.CreateObject("Microsoft.XMLDOM")
xml.async = false
xml.load(Server.MapPath("resp2.xml"))

'Load XSL
set xsl = Server.CreateObject("Microsoft.XMLDOM")
xsl.async = false
xsl.load(Server.MapPath("resp.xsl"))

'Transform file
Response.Write(xml.transformNode(xsl))
%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:27:31.757

尝试以下

```
'Load XML
set xml = Server.CreateObject("Microsoft.XMLDOM")
xml.setProperty "ServerHTTPRequest", true
xml.async = false
xml.validateOnParse = false
xml.load("http://yourdomain.com/resp2.xml") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:58:40.807

尝试使用 ServerXMLHTTP 对象：

```
Dim xmlReq, sResponse
Set xmlReq = Server.CreateObject("Msxml2.ServerXMLHTTP.3.0")
Call xmlReq.open("GET", "http://host/dir/page.xml")
Call xmlReq.send()
If (xmlReq.status = 200) Then
    sResponse = xmlReq.responseText

End If 
```

# node.js - Node.js 中的垃圾收集器

> ID：15334106
> 
> 赞同：6
> 
> 时间：2013-03-11T08:32:42.777
> 
> 标签：node.js, garbage-collection, v8

根据谷歌的说法，V8 通过采用“停止世界、分代、准确、垃圾收集器”来使用高效的垃圾收集器。部分声称是 V8 在执行垃圾回收周期时停止程序执行。

一个明显的问题是，当您暂停程序执行时，如何才能获得高效的 GC？

我试图找到有关此主题的更多信息，因为我很想知道当您每秒可能有数万个请求触发您的 node.js 服务器时，GC 如何影响响​​应时间。

任何专家帮助、个人经验或链接将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-11T14:22:47.007

“高效”可能意味着几件事。这里大概指的是高*吞吐量*。在查看响应时间时，您对*延迟*更感兴趣，这确实可能比其他 GC 策略更糟糕。

stop-the-world GC 的主要替代方案是

*   增量GC，在临时将控制权交还给mutator ¹之前不需要完成一个收集周期，以及
*   并发 GC（实际上）与 mutator*同时*运行，只是非常短暂地中断它（例如扫描堆栈）。

面对堆的并发修改，两者都需要执行额外的工作才能正确（例如，如果创建了一个新对象并将其附加到已扫描的对象，则必须注意这个新引用）。这会影响总吞吐量，即实际清理整个堆需要更长的时间。好处是它们（通常）不会长时间中断程序，如果有的话，所以延迟很低（呃）。

尽管 V8 文档仍然提到了一个 stop-the-world 收集器，但似乎自 2011 年以来[V8 GC**是**增量](http://blog.chromium.org/2011/11/game-changer-for-interactive.html)的。因此，虽然它确实偶尔会停止程序执行，但它*不会* ²停止程序多长时间扫描整个堆。相反，它可以扫描几毫秒，然后让程序恢复。

¹ “Mutator”是堆被垃圾回收的程序的 GC 术语。

²至少在原则上，这可能是可配置的。

# opengl-es-2.0 - 用于渲染 RGBA 值的 OpenGL 函数

> ID：15334113
> 
> 赞同：2
> 
> 时间：2013-03-11T08:33:02.260
> 
> 标签：opengl-es-2.0, render, rgba

我有缓冲区中帧的 RGBA 值。如何使用opengl在屏幕上绘制框架？我必须使用哪个功能？我正在使用opengl-es 2.0。

gldrawpixels() 在 iOS glKit 中不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:14:02.563

使用纹理。glTexImage2D 可能可用。然后在全屏四边形上使用此纹理。当您可以额外处理颜色数据时，这将涉及一些着色器编码。

# iphone - 图像处理 - 将 33/35mm 图片转换为 100+ mm

> ID：15334114
> 
> 赞同：1
> 
> 时间：2013-03-11T08:33:02.473
> 
> 标签：iphone, image, image-processing

iPhone 的焦距范围为 30-35 毫米，具体取决于型号。我的问题是，是否可以通过图像处理，使用相同的焦距来捕捉一张好像用 100 毫米或 125 毫米拍摄的照片？

我已经搜遍了，没有任何答案。此外，如果无法做到这一点，请描述镜头和软件的技术细节，为什么无法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:01:06.773

另一种观点：如果忽略畸变，焦距的影响实际上就是镜头的放大倍率，它与视场（FOV）成反比；[请参阅http://en.wikipedia.org/wiki/Focal_length#In_photography](http://en.wikipedia.org/wiki/Focal_length#In_photography)中的示例图像。

因此，为了*模拟*不同的焦距（同样，假设镜头畸变相同），您应该进行“数字变焦”，或者在实践中只是裁剪图像。这将为您提供一个“放大”的图像，FOV 按比例缩小，例如上面链接中的第三张图像（[http://en.wikipedia.org/wiki/File:Angleofview_70mm_f4.jpg](http://en.wikipedia.org/wiki/File:Angleofview_70mm_f4.jpg)）与最左边的图像相比（[http://en.wikipedia.org/wiki/File:Angleofview_28mm_f4.jpg](http://en.wikipedia.org/wiki/File:Angleofview_28mm_f4.jpg)）。从这个意义上说，模拟更大的焦距其实很容易。

当然，这里的限制是当你裁剪时，你会降低输出图像的分辨率。从这个意义上说，不可能正确模拟更大的焦距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:52:17.200

不。这完全不可能。。

请详细了解相机焦距[维基百科：焦距](http://en.wikipedia.org/wiki/Focal_length) 焦距基本上是一个纯粹的硬件组件，甚至不是一个适当的组件，它只是衡量镜头会聚或发散光线的强度......如果你想看起来更好， ...只需在镜头前添加一个凸/凹透镜，因为您知道它的焦距，您可以计算 100nm 焦距系统中的光路，并可以添加一个合适的凸/凹长度来模拟这样的......但是没有。以这种方式处理图像是完全不可能的（据我所知）

# android - 文字大小不减小

> ID：15334117
> 
> 赞同：2
> 
> 时间：2013-03-11T08:33:09.557
> 
> 标签：android, textview

我正在努力在 textview 上呈现文本。我正在尝试添加两个按钮来放大和缩小文本视图中的文本，代码如下

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.chapter_view);
        String chapter;
        chapter=getIntent().getExtras().getString("ChapterName");
        final StringBuffer buffer = new StringBuffer();
        int id= getResources().getIdentifier(chapter,"raw",getPackageName());     
        try{
            DataInputStream dataIO= new DataInputStream(getResources().openRawResource(id));
            String strLine= null;
            while((strLine = dataIO.readLine())!=null){
                buffer.append(strLine);
                buffer.append("\n");
            }
            dataIO.close();
        }catch(Exception e){

        }
        final TextView tv=(TextView) findViewById(R.id.chapter);
        tv.setText(buffer.toString());

        Button zoomIn = (Button) findViewById(R.id.zoomin);
        zoomIn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                textSize = tv.getTextSize();
                tv.setTextSize((float) (textSize+0.25));   

            }
        });

        Button zoomOut = (Button) findViewById(R.id.zoomout);
        zoomOut.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                textSize = tv.getTextSize();
                tv.setTextSize((float) (textSize-0.25));  
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.chapter_view, menu);
        return true;
    }
} 
```

但是我遇到的问题是即使单击缩小按钮，它仍然会增加文本的字体大小。请帮我解决这个问题。同样，一旦我关闭一章并打开另一章，文本大小将重置为其默认值。有没有这方面的解决方案。我正在考虑为此解决方案使用名称值对。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:00:57.987

问题是传递给的单位`setTextSize(float size)`是按比例缩放的像素，而`getTextSize()`报告是像素。尝试`setTextSize(int unit, float size)`改用，将单位设置为`TypedValue.COMPLEX_UNIT_PX`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:08:09.210

我在我的机器上试过一个样品。检查下面的代码。您必须将变量放置在范围的正确位置。

```
public class MainActivity extends Activity {
    float textSize;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        TextView tv = (TextView)findViewById(R.id.textView1);
        textSize = tv.getTextSize();

        Button btnPlus = (Button)findViewById(R.id.button1);
        btnPlus.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                TextView tv = (TextView)findViewById(R.id.textView1);
                Log.v("TextSizeP", String.valueOf(textSize));
                textSize = (float) (textSize+0.25);
                tv.setTextSize(textSize);
                Log.v("TextSizeP", String.valueOf(textSize));
            }
        });

        Button btnMinus = (Button)findViewById(R.id.button2);
        btnMinus.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                TextView tv = (TextView)findViewById(R.id.textView1);
                Log.v("TextSize", String.valueOf(textSize));
                textSize = (float) (textSize-0.25);
                tv.setTextSize(textSize);
                Log.v("TextSize", String.valueOf((float) (textSize-0.25)));
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

例如，我`textSize`在类级别声明了我的变量。`textSize`当点击相关按钮时，变量会增加和减少。

这对我来说很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:51:54.873

至于恢复到默认大小的大小，您将不得不使用共享首选项来保存最后一个文本大小的值。

至于文本大小，为什么不将值一一递增，例如单击 zoomOut 时的 tv.setTextSize(textsize++) 或单击 zoomIN 时的 tv.setTextSize(textsize--)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T08:55:10.830

```
public class MainActivity extends Activity {

TextView tv;

Button in,out;

static float textSize;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    tv = (TextView) findViewById(R.id.textView1);
    tv.setTextSize(TypedValue.COMPLEX_UNIT_PX,30);
    textSize = tv.getTextSize();

    in = (Button) findViewById(R.id.zoomin);
    out = (Button) findViewById(R.id.zoomout);

    in.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            textSize = (float)(textSize + 2);
            tv.setTextSize(TypedValue.COMPLEX_UNIT_PX,textSize);

        }
    });

    out.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            textSize = (float)(textSize - 2);
            tv.setTextSize(TypedValue.COMPLEX_UNIT_PX,textSize);

        }
    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

# android - 如何修改android 4.2默认主题？

> ID：15334120
> 
> 赞同：1
> 
> 时间：2013-03-11T08:33:20.237
> 
> 标签：android, themes

当应用本身没有设置主题时，会调用系统默认主题。

现在android默认主题是黑色背景和白色文本。由于我的意愿，我想设置默认主题。

谁知道在哪里可以在android项目中设置默认主题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:50:03.323

在 menifest.xml 文件中，您可以设置默认主题，例如

```
<application
android:theme="@android:style/Theme.Black"
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:37:47.963

android manifest.xml 具有属性`android:theme="resource or theme"`。此属性将其设置为全息黑暗或光明或您自己声明的主题。要使用您自己的布局，您必须在 res/values 文件夹中声明并构建您自己的布局。

这是关于它的文档：http: [//developer.android.com/guide/topics/manifest/application-element.html](http://developer.android.com/guide/topics/manifest/application-element.html)

# solr - 避免 Solr 4.x 中无位置字段上的短语查询异常的任何方法

> ID：15334122
> 
> 赞同：0
> 
> 时间：2013-03-11T08:33:20.930
> 
> 标签：solr

在4.x升级之前我没有这个问题。问题是我有一个字段，其 omitTermFreqAndPositions 属性由于各种原因设置为 true。当用户显式或隐式执行短语查询时，它在 Solr 3.5 或 3.6 中静默失败，但在 4.x 中没有。

有什么方法可以避免这种情况？一种将 omitTermFreqAndPositions 重置为 false 的明显方法，但这是我想避免的。我听说要为这个特定领域实现某种自定义相似性类，但我想更好地理解它（所以任何关于它的解释是否可以解决我的问题都会很好）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:59:53.523

您可以创建自己的[requestHandler](http://wiki.apache.org/solr/SolrRequestHandler)，在那里您将捕获此异常并静默忽略它。看[这里](http://wiki.apache.org/solr/SolrSecurity#Write_Your_Own_RequestHandler_or_SearchComponent)

# html - 符合 HTML5 的 html 页面

> ID：15334126
> 
> 赞同：1
> 
> 时间：2013-03-11T08:33:36.887
> 
> 标签：html, jslint

说html页面是否是HTML5投诉是什么意思？作为团队负责人，我需要提出检查点来验证设计和开发的模板或页面是否符合 HTML 标准和语义，以便我可以将其记录下来并在团队内进行社交。

我知道网络上有可用的 HTML5 linting 工具，但我想知道 HTML5 规范必须检查哪些标准。

谢谢，曼达尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:46:00.627

Mandar，这不是一个容易回答的问题。

您是在谈论 HTML 标记吗？
如果是这种情况，那么一旦您更改`<!doctype html>`.

...但这并没有说太多，也没有真正添加任何新东西。...您是否使用 html5 元素，例如`<article>`？
如果是这样，您是否打算支持旧浏览器？
然后你需要包含 html5 shim JS 文件...

但这不是 HTML5 验证器会告诉您的。

知道元素中的`pubdate`属性`<time>`属于和不属于哪里也是验证器不会告诉你的事情。

在最基本的层面上，阅读一些关于制作 HTML5 兼容博客的教程。
有很多是在 2009/2010 年写的。

或者您也可以查看 Remy Sharp 和 Bruce Lawson 的介绍 HTML5 第二版。

如果您只想验证它，那么编写 XHTML 或 HTML4 并更改您的文档类型。
如果您想了解 html5 可以变得多么干净，那么您可以查看数百个地方，我建议您从这些和 HTML5 医生开始，并使用 Mozilla 开发人员网络来复习现代 JavaScript 功能/DOM API /"html5" API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T10:04:00.617

可能这可能会有所帮助， http: [//validator.nu/](http://validator.nu/)。您可以在下拉列表中选择“文本字段”并将您的 html5 代码放在那里，然后在预设和解析器中，您可以选择 HTML5 版本，它会检查HTML5 标准。它会显示您选择的版本的错误（如果有）。这只是一个示例，您可以使用其他验证器，但要了解标准，上述书籍可能会有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T08:40:55.990

您可以查看 HTML5 规范.. [W3Schools HTML5](http://www.w3schools.com/html/html5_intro.asp)

在那里您可以了解 HTML5 的详细信息。

虽然这个问题可能不符合 Stackoverflow 的问答格式。它会导致一篇文章或书籍，并且超出了常见问题解答中定义的范围。

谢谢

# c++ - std::unordered_map 的函数指针

> ID：15334128
> 
> 赞同：8
> 
> 时间：2013-03-11T08:33:41.823
> 
> 标签：c++, c++11, std

有这样的网站：

[http://www.cplusplus.com/reference/unordered_map/unordered_map/](http://www.cplusplus.com/reference/unordered_map/unordered_map/)

也就是说，可以为类模板的`Hash`and`Pred`参数提供一个函数指针，而不是一个类。`std::unordered_map`但是，没有示例，如果可能的话，我还没有设法让这个功能发挥作用。非工作示例：

```
bool unordered_eq(const char* const s1, const char* const s2)
{
  return !std::strcmp(s1, s2);
}

std::size_t unordered_hash(char const* s)
{
  return std::hash<std::string>()(s);
}

std::unordered_map<char const*, std::string,
  unordered_hash, unordered_eq> hashmap; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T09:12:48.770

> 也就是说，可以提供一个函数指针，而不是一个类

不，那是个误会。您可以向**构造**函数提供函数指针而不是函数**对象**。模板参数仍然是一种类型——在这种情况下是函数指针的类型。所以，你必须写

 **```
typedef unordered_map<
            char const*, string,
            size_t(*)(char const*), // type for hashing
            bool(*)(char const*, char const*) // type for equality
        > yourmaptype;

yourmaptype hm (
        4, // minimum number of buckets
        &unordered_hash, // function address for hashing
        &unordered_eq, // function address for equality
    ); 
```

您的标准库为第一个参数定义了默认值，但此默认值未标准化。似乎没有办法保持您的供应商特定的默认值 n 并同时设置仿函数的值。我在这里使用 4 是相当随意的。

您应该考虑使用默认可构造的函数对象。这不仅可以让您在不指定最小存储桶大小的情况下摆脱困境，而且还可能更快，因为编译器*更*容易内联仿函数。**

# php - php mysql 将下一个序列号分配给该行

> ID：15334129
> 
> 赞同：0
> 
> 时间：2013-03-11T08:33:53.103
> 
> 标签：php, mysql, innodb

我正在使用 mysql 和 PHP。我有一张这样的学生桌。我正在使用 InnoDB 引擎。

```
id    int  AUTO_INCREMENT
regno int
name varchar 
```

每当插入新学生时，我想分配下一个可用的 regno。例如，前一个学生的 regno 是 1，那么下一个条目的值应该是 2。自动增量在这里不起作用，因为它可能会产生间隙。（我正在使用事务，因此在向学生表插入一行后，可能会导致回滚的查询很少，在这种情况下，虽然没有插入实际记录，但自动增量 id 会增加）。另外，我不在乎旧 regno 之间是否存在间隙……例如 regno 可能依次具有 1、2、3、5、10、11、12。现在当插入下一个学生时，我希望这个学生 12+1=13。另外，我想确保 regno 不重复。（虽然 regno 有一个 UNIQUE 索引，但我不想抛出错误。它应该得到下一个数字）。

我有两个解决方案。1：（伪代码）查询数据库的 newregno = max(regno)+1 b。在插入行时将 newregno 分配给学生。

在这种情况下，我只是担心 2 个应用程序实例可能同时查询数据库并获得相同的 newregno 导致重复。

2：使用触发器...在实际插入行后更新 regno。（我对触发器的了解不多，但如果有人建议这是一种更好的方法，我会选择它）

有什么建议吗？

编辑--- regno（注册号）将来可能不是唯一的，但与其他一些列（例如课程/会话）一起是唯一的。所以请不要为我提供“自动增量”索引类型的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:42:38.233

看看这个： [http ://www.mysqlperformanceblog.com/2011/11/29/avoiding-auto-increment-holes-on-innodb-with-insert-ignore/](http://www.mysqlperformanceblog.com/2011/11/29/avoiding-auto-increment-holes-on-innodb-with-insert-ignore/)

Increment 使用不同的算法来计算 id。您需要设置它以避免孔。

# java - Lucene Search 保存文件内容时不返回结果

> ID：15334133
> 
> 赞同：1
> 
> 时间：2013-03-11T08:34:20.773
> 
> 标签：java, jakarta-ee, lucene

我正在尝试使用 apache lucene 开发一个日志查询系统。我开发了一个演示代码来索引两个文件，然后搜索查询字符串。

第一个文件包含数据maclean

第二个文件包含数据 pinto

波纹管是我用于索引的代码

```
 fis = new FileInputStream(file);
  DataInputStream in = new DataInputStream(fis);
  BufferedReader br = new BufferedReader(new InputStreamReader(in));
  String strLine;
  Document doc = new Document();

  Document doc = new Document();
    doc.add(new TextField("contents", new BufferedReader(new InputStreamReader(fis, "UTF-8"))));

    doc.add(new StoredField("filename", file.getCanonicalPath()));

    if (indexWriter.getConfig().getOpenMode() == OpenMode.CREATE) {

       System.out.println("adding " + file);
      indexWriter.addDocument(doc);
   } else {

        System.out.println("updating " + file);
        indexWriter.updateDocument(new Term("path", file.getPath()), doc);
      } 
```

如果我使用此代码，那么我会得到 proffer 结果。但是在显示中我只能显示文件名，因为我只存储了文件名。

所以我修改了代码并使用此代码存储了文件内容

```
 FileInputStream fis = null;
        if (file.isHidden() || file.isDirectory() || !file.canRead() || !file.exists()) {
            return;
        }
        if (suffix!=null && !file.getName().endsWith(suffix)) {
            return;
        }
        System.out.println("Indexing file " + file.getCanonicalPath());

        try {
          fis = new FileInputStream(file);
        } catch (FileNotFoundException fnfe) {
          System.out.println("File Not Found"+fnfe);

       }
      DataInputStream in = new DataInputStream(fis);
      BufferedReader br = new BufferedReader(new InputStreamReader(in));
      String strLine;   
      String Data="";
     while ((strLine = br.readLine()) != null) 
         {
            Data=Data+strLine;
         }

        Document doc = new Document();
        doc.add(new TextField("contents", Data, Field.Store.YES));
        doc.add(new StoredField("filename", file.getCanonicalPath()));

        if (indexWriter.getConfig().getOpenMode() == OpenMode.CREATE) {

           System.out.println("adding " + file);
          indexWriter.addDocument(doc);
       } else {

            System.out.println("updating " + file);
            indexWriter.updateDocument(new Term("path", file.getPath()), doc);
          } 
```

根据我的理解，我应该得到结果数为 1。它应该显示包含 maclean 的文件的文件名和内容

但相反，我得到的结果为

- - - - - - - - - - - -结果 - - - - - - - - - - - - -

共 0 个匹配文件 找到 0

我在代码中做错了什么还是对此有合理的解释？为什么第一个代码有效而第二个无效？

搜索查询代码

```
 try
   {
    Directory directory = FSDirectory.open(indexDir);
    IndexReader reader = DirectoryReader.open(directory);
    IndexSearcher searcher = new IndexSearcher(reader);
    Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_41);

    QueryParser parser = new QueryParser(Version.LUCENE_41, "contents", analyzer);
    Query query = parser.parse(queryStr);
    System.out.println("Searching for: " + query.toString("contents"));
    TopDocs results = searcher.search(query, maxHits);

    ScoreDoc[] hits = results.scoreDocs;
    int numTotalHits = results.totalHits;

    System.out.println("\n\n\n-----------------------Results--------------------------\n\n\n");
   System.out.println(numTotalHits + " total matching documents");

    for (int i = 0; i < numTotalHits; i++) {
        int docId = hits[i].doc;
        Document d = searcher.doc(docId);

                   System.out.println(i+":File name is: "+d.get("filename"));
                   System.out.println(i+":File content is: "+d.get("contents"));

    }
    System.out.println("Found " + numTotalHits);
   }
   catch(Exception e)
   {
    System.out.println("Exception Was caused in SimpleSearcher");
    e.printStackTrace();

   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T16:04:35.220

我认为您的确切问题是，当您为索引字段创建 BufferedReader 时，您已经读取了整个文件，并且流位于文件的末尾，没有进一步的阅读内容。你应该可以通过调用来解决这个问题`fis.reset();`

但是，您不应该这样做。不要将相同的数据存储在两个单独的字段中，一个用于索引，一个用于存储。相反，设置相同的字段来存储和索引数据。 [TextField 有一个 ctor](https://lucene.apache.org/core/4_0_0/core/org/apache/lucene/document/TextField.html#TextField%28java.lang.String,%20java.lang.String,%20org.apache.lucene.document.Field.Store%29)，允许您存储数据和索引，例如：

```
doc.add(new TextField("contents", Data, Field.Store.YES)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T08:48:02.160

使用 StoredField 而不是 TextField

doc.add(new StoredField("Data",Line));

当您使用文本字段时，字符串会被标记化，因此您将无法搜索相同的内容。存储字段存储整个字符串而不对其进行标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T20:35:03.387

这适用于 Lucene 4.5： doc.add(new TextField("Data", Data, Field.Store.YES));

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T03:31:55.453

我认为您的代码可能存在两个问题。

首先，我注意到您没有使用近实时搜索，也没有在阅读之前提交作者。Lucene 的 IndexReader 拍摄索引的快照，可以是未使用 NRT 时的提交版本，也可以是使用 NRT 时提交和未提交的版本。这可能是您的 IndexReader 无法看到更改的原因。由于您似乎需要并发读写，我建议您使用 NRT 搜索 ( `IndexReader reader = DirectoryReader.open(indexWriter);`)

第二个问题可能是，正如@femtoRgon 所说，您存储的数据可能不是您所期望的。我注意到，当您附加文件内容进行存储时，您似乎丢失了 EOL 字符。我建议你使用 Luke 来检查你的索引[http://www.getopt.org/luke/](http://www.getopt.org/luke/)

# actionscript-3 - adobe flash cs3 错误 1119：ball.vx 显示为未定义属性

> ID：15334136
> 
> 赞同：1
> 
> 时间：2013-03-11T08:34:32.237
> 
> 标签：actionscript-3, flash

这是我制作多个弹簧动画的代码。但我收到了这个错误。ball.vx 和 ball.vy 显示为未定义的属性。

我尝试了 Keith Peters 的“Foundation ActionScript 3.0 Animation Making Things Move！”中的这段代码。

有谁知道如何修理它？

```
package
{
import flash.display.Sprite;
import flash.events.Event;
public class Chain extends Sprite
{
private var ball0:Ball;
private var ball1:Ball;
private var ball2:Ball;
private var vx:Number = 0;
private var vy:Number = 0;
private var spring:Number = 0.1;
private var friction:Number = 0.8;
private var gravity:Number = 5;

public function Chain()
{
init();
}
private function init():void
{
ball0 = new Ball(20);
addChild(ball0);
ball1 = new Ball(20);
addChild(ball1);
ball2 = new Ball(20);
addChild(ball2);
addEventListener(Event.ENTER_FRAME, onEnterFrame);
}
private function onEnterFrame(event:Event):void
{
moveBall(ball0, mouseX, mouseY);
moveBall(ball1, ball0.x, ball0.y);
moveBall(ball2, ball1.x, ball1.y);
graphics.clear();
graphics.lineStyle(1);
graphics.moveTo(mouseX, mouseY);
graphics.lineTo(ball0.x, ball0.y);
graphics.lineTo(ball1.x, ball1.y);
graphics.lineTo(ball2.x, ball2.y);
}
private function moveBall(ball:Ball,
targetX:Number,
targetY:Number):void
{
ball.vx += (targetX - ball.x) * spring;
ball.vy += (targetY - ball.y) * spring;
ball.vy += gravity;
ball.vx *= friction;
ball.vy *= friction;
ball.x += ball.vx;
ball.y += ball.vy;
}
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:55:58.957

你能告诉我们球类吗？可能没有声明 vx 和 vx 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:08:59.790

# sql-server - 表状态管理 - 动态字段

> ID：15334138
> 
> 赞同：0
> 
> 时间：2013-03-11T08:34:35.427
> 
> 标签：sql-server, performance, tsql

我计划在表格上管理所有来自单个中心字段的状态。

我创建了两个表；

第一个表名是“EntityGroups”（示例数据：“Members”、“Baskets”、“Products”）

第二个表名为“EntityStatusTypes”，该表与第一个表相关。1 - N

最后，我把“EntityStatusID”所有的表..有下图。

你认为这有多准确？有性能问题吗？所有状态字段都是动态的，但我担心性能问题......！

![在此处输入图像描述](../Images/a3af5078ca51ef24a344442796575b5c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:04:46.900

好的，我解决了这个设计问题。我从表中删除了所有关系。所以我在应用程序初始化时加载所有实体状态。我认为这种方式比其他方式更好（性能和可扩展性）

# linux - x86_64结构thread_struct中没有ip，那么内核如何在新进程中切换到正确的ip？

> ID：15334140
> 
> 赞同：3
> 
> 时间：2013-03-11T08:34:41.980
> 
> 标签：linux, linux-kernel

x86_64结构thread_struct中没有ip，那么context_switch函数如何切换到新进程的正确ip呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:01:16.227

我认为核心寄存器（特殊寄存器和通用寄存器）保存在被中断进程的内核堆栈中。每次发生中断/异常时，CPU 会陷入管理员模式（特权模式），内核会将上下文（一个堆栈帧）保存到已中断进程的内核堆栈中。

我认为sp（堆栈指针）寄存器应该保存在thread_struct中，它指向特定进程的内核堆栈顶部，context_switch将使用sp恢复准备运行的进程的上下文。

# php - mysql中三个表之间的连接

> ID：15334141
> 
> 赞同：1
> 
> 时间：2013-03-11T08:34:45.733
> 
> 标签：php, mysql, sql, select, join

我有 3 个表，我想从中获取用户数据。

**表格1 ：** `frei_session`

```
username    session_id

Prince      51
Dilip       49
Sumit       50 
```

**表 2：** `friendrequest`

```
requestTo   requestFrom     status

49              50              C
50              51              C
49              51              P 
```

**表3 ：** `users`

```
accountId    userImage

49           image_49.jpg
50           image_50.jpg
51           image_51.jpg 
```

**朋友请求**表显示用户之间的关系，其中**C**代表**Complete**，**P**代表**Pending**。表示如果`status = C`两者都是朋友并且`status = P`请求是否待处理。

**frei_session**表显示网站的所有在线用户。

**用户**表存储图像的路径

我想显示用户的图像及其 id。

假设用户**49**在线

```
SELECT  IF(a.RequestTo = 49, c.userName, b.userName) username,
        IF(a.RequestTo = 49, c.session_ID, b.session_ID) Session_ID
FROM    friendRequest a
        INNER JOIN frei_session b
            ON a.requestTo = b.session_ID
        INNER JOIN frei_session c
            ON a.requestFrom = c.session_ID
WHERE   a.status = 'C' AND
        49 IN (a.requestTo, a.requestFrom) 
```

此查询向我显示这样的输出

```
username    session_id

Sumit           50 
```

但我想要这样的输出

```
username    session_id    userImage

Sumit       50            image_50.jpg 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:37:04.907

您可以将整个查询包装在子查询中并将其与表连接起来`users`

```
SELECT  x.*, y.userImage
FROM    
        (
            SELECT  IF(a.RequestTo = 49, c.userName, b.userName) username,
                    IF(a.RequestTo = 49, c.session_ID, b.session_ID) Session_ID
            FROM    friendRequest a
                    INNER JOIN frei_session b
                        ON a.requestTo = b.session_ID
                    INNER JOIN frei_session c
                        ON a.requestFrom = c.session_ID
            WHERE   a.status = 'C' AND
                    49 IN (a.requestTo, a.requestFrom)
        ) x INNER JOIN users y
            ON x.session_ID = y.accountID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ae31b/1)

# sql - 来自 sql server 2005 的超出范围的答案

> ID：15334142
> 
> 赞同：2
> 
> 时间：2013-03-11T08:34:51.877
> 
> 标签：sql, sql-server

```
select 
  e.E_ID as Employee_ID,
  e.E_NAME as Employee_Name, 
  convert(varchar(10),a.Date,103) as Date ,
  convert(varchar(8),a.Timein,108) as Time_In, 
  convert(varchar(8),a.Timeout,108) as Time_Out 
from Employee e 
LEFT JOIN Attendance a  
  ON a.E_ID = e.E_ID 
  AND (convert(varchar(10),a.Date,103) between '01/02/2013' And '28/02/2013') 
```

以上是我的查询，我从两个表中获取数据，但它也在打印一月的值，这不在查询中。

我已经调试了一个小时，请任何人帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:37:53.920

`BETWEEN`并且`dd/mm/yyyy`格式化的字符串不起作用！

要在二月份恢复行，请使用

```
 LEFT JOIN Attendance a
     ON a.E_ID = e.E_ID  AND a.Date BETWEEN '20130201' AND '20130228' 
```

或者，如果其中的值`a.Date`可能具有除`00:00:00`

```
 LEFT JOIN Attendance a
     ON a.E_ID = e.E_ID  AND a.Date >= '20130201' AND a.Date < '20130301' 
```

将列强制转换`varchar`为不可分割的并且意味着不能使用索引查找，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:38:37.023

```
Try below and see if it helps

select 
  e.E_ID as Employee_ID,
  e.E_NAME as Employee_Name, 
  convert(varchar(10),a.Date,103) as Date ,
  convert(varchar(8),a.Timein,108) as Time_In, 
  convert(varchar(8),a.Timeout,108) as Time_Out 
  from Employee e 
  LEFT JOIN Attendance a  
  ON a.E_ID = e.E_ID 
  Where (convert(varchar(10),a.Date,103) between '01/02/2013' And '28/02/2013') 
```

# javascript - SharePoint 应用程序 DOM 操作和部署

> ID：15334144
> 
> 赞同：2
> 
> 时间：2013-03-11T08:34:58.797
> 
> 标签：javascript, sharepoint, dom, sharepoint-2013

我在开发和部署共享点应用程序时遇到了一些问题。该应用程序将成为 SharePoint 网站中的应用程序部件。

一个问题是，应用程序（托管的提供商）不是高度可信的，尽管我通过了 msdn 教程如何创建高度可信的应用程序（使用证书等）每次部署应用程序时，我都会收到错误：指定的应用程序标识符无效或不存在。

第二个问题是，App 使用 JavaScript 来操作 DOM。问题是，我只能操作 App Part 的 DOM。但我想操作 SharePoint 网站本身的 DOM，以及其中的所有 DOM（网站中包含的所有其他 Web 或应用程序部件）。

这可能吗？

例如，在应用程序中，我想以这种方式操作 SharePoint 站点的菜单：

```
document.getElementById("zz15_RootAspMenu"). do something 
```

这样我可以添加菜单点。但我无法访问 zz15_RootAspMenu，因为它位于外部 DOM 中。

有没有可能，第一个问题的解决方案导致第二个问题的解决方案？

该应用程序当前正在“localhost”上的 SharePoint 机器上运行。（我正在使用远程桌面，因此该应用程序在 SharePoint Server 上运行，但从那里通过 localhost 调用）如果应用程序部署正确，是否只有这样才能将应用程序正确导入站点，然后我可以访问它的DOM吗？

# ios - UIView setNeedsDisplay 不起作用

> ID：15334151
> 
> 赞同：0
> 
> 时间：2013-03-11T08:35:20.753
> 
> 标签：ios, uiview, setneedsdisplay

简单的代码在这里：

自定义 MyButton.h

```
@interface PaiLifeReadingListButton : UIButton
@property (strong, nonatomic) UIImageView *logoImageView;
@end 
```

自定义 MyButton.m

```
@implementation PaiLifeReadingListButton
@synthesize logoImageView = _logoImageView;
-(id)init
{
    _logoImageView = [[UIImageView alloc] initWithFrame:CGRectMake(33.0, 20.0, 80.0, 80.0)];
    [_logoImageView setImage:[UIImage imageNamed:@"pic"]];
    [self addSubview: _logoImageView];
}  
@end 
```

自定义 MyView.h：

```
@property (strong, nonatomic) Mybutton *mybutton; 
```

自定义 MyView.m：

```
-(id) init
{
    myButton = [[MyButton alloc] init];
    [self addSubview:myButton];
} 
```

视图控制器.m：

```
@synthesize myView;
- (void)viewDidLoad
{
    myView = [[Myview alloc] init];
    [myView.myButton addTarget:self action:@selector(pressed:) forControlEvents:UIControlEventTouchDown];
    self.view = myView;
}
-(void)pressed : (MyButton *)button
{
    UIImageView *newImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"other-pic"] highlightedImage:nil];
    myView.myButton.logImageView = newImageView;
    [self.view setNeedsDisplay]; //----this does not work
} 
```

当我按下按钮时，图像视图不会改变。我怎样才能解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:48:09.037

首先，你不需要`setNeedsDisplay`这里。`setNeedsDisplay`用于重绘视图（`drawRect:`如果需要，它会在内部调用视图的方法），这不是您想要的。

其次，您将按钮的类指定为`MyButton`，但在实际的 .h 和 .m 文件中，它分别指定为`@interface PaiLifeReadingListButton`和`@implementation PaiLifeReadingListButton`。

另一件事，视图和按钮没有用框架初始化。但我假设你已经这样做了，因为你唯一的问题是图像视图没有改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:16:53.780

在按下方法的代码中，您应该更改层次结构中的视图，但您只更改对象成员。你可以做类似的事情

```
myView.myButton.logImageView.image = [UIImage imageNamed:@"other-pic"]; 
```

# ios - 在 iOS 中从服务器更新应用程序资源

> ID：15334155
> 
> 赞同：1
> 
> 时间：2013-03-11T08:35:25.373
> 
> 标签：ios, objective-c, xcode, auto-update

我正在开发一个应用程序，它有一些预加载的应用程序资源可以由用户或管理员动态更改，我必须将这些应用程序资源放在我的应用程序的文档目录中，这样它就不会让我在 iTunes 上更新应用程序。

我面临的问题是，当应用程序首次启动时，我必须从本地设备上的 Web 服务器下载所有应用程序资源。

我正在寻找获取所有应用程序资源并保持更新的最佳方法？请帮我！

实际上，问题是我有成千上万的资源，如图像、html 和 css 文件需要下载，最终用户可能会在刷新或维护服务器上的数据时感到问题。iOS 中是否有任何文件传输协议 (ftp) 库可用于下载数据和更新？或任何其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:50:01.367

1）第一次，从服务器获取所有记录以及服务器日期（检查日期参数，如果`null`服务器通过所有记录，即第一次启动应用程序）。

2) 将该日期存储在`NSUserDefaults`.

3) 第二次通过该日期 while `request`，如果日期不为空（请求不是第一次）。

4）服务器检查更新的记录（记录大于您通过的日期）。

```
 NSString *strTodaysDate = @"";
    if ([[NSUserDefaults standardUserDefaults] valueForKey:@"SyncDone"] != nil)
    {
         //If sync all data is done first time, then pass server date else pass empty date parameter.
         strTodaysDate = [NSString stringWithFormat:@"%@",[[NSUserDefaults standardUserDefaults] valueForKey:@"SyncDate"]];
    } //call web service with strTodaysDate as a parameter. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:43:46.770

每次应用程序启动时，您都需要从应用程序发送简单的请求，这将询问服务器有关更新的信息。如果您在服务器上的内容已更新，那么您需要在应用程序中重新加载您的内容。

当然，您的服务器必须知道内容是否发生了一些变化。您可以跟踪服务器上的更改时间和应用程序中的最新内容更新时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T08:48:38.620

> 您可以通过此方法从应用程序委托调用 Web 服务来更新您的数据

```
- (void)applicationDidFinishLaunching:(UIApplication *)application 
```

{

//调用网络服务并将其保存在您的文档目录中

}

# utf-8 - Codemirror (AjaXplorer/Linux Webserver)：带有特殊字符的 ANSI 文件

> ID：15334157
> 
> 赞同：2
> 
> 时间：2013-03-11T08:35:29.757
> 
> 标签：utf-8, ansi, codemirror, pydio

我在 Linux Web 服务器上安装了 AjaXplorer。AjaXplorer 的插件之一是 Codemirror - 查看和编辑文本文件。

现在我有以下情况：如果我在 Windows (ANSI) 上创建一个 txt-File 并将其上传到 Ajaxplorer (UTF-8)，Codemirror 会将每个特殊字符显示为问号。因此，整个文件将用问号而不是特殊字符保存。但是如果一个文件曾经以 UTF-8 保存，特殊字符将被正确保存。

所以问题存在于打开 ANSI 文件中。这是我必须实施解决方案的地方，例如将 ANSI 转换为 UTF-8。

“有趣”的是，如果我在 Linux 控制台上打开一个新上传的 ANSI 文件和一个保存的 UTF-8 文件，它们看起来完全一样，但 codemirror 中的输出不同。

* * *

```
This is a uploaded ANSI-File with special characters like Ã¤ and Ã¶ and Ã¼ 
```

Codemirror 中的输出：'like ? 和 ？和 ？'

```
This is a saved UTF8-File with special characters like Ã¤ and Ã¶ and Ã¼ 
```

Codemirror 中的输出'like ä and ö and ü'

* * *

这是 AjaXplorer 的 CodeMirror-Class，我认为这里一定是我可以干预的地方： [https ://github.com/mattleff/AjaXplorer/blob/master/plugins/editor.codemirror/class.CodeMirrorEditor.js](https://github.com/mattleff/AjaXplorer/blob/master/plugins/editor.codemirror/class.CodeMirrorEditor.js)

如您所见，我不是专业人士，我已经尝试了一些代码片段 - 否则我已经有了解决方案；-) 如果有人给我提示，我会很高兴！谢谢！！！

# android - 不同手机上的复杂脚本语言视图

> ID：15334163
> 
> 赞同：1
> 
> 时间：2013-03-11T08:35:38.953
> 
> 标签：android, unicode

我对像“波斯语”这样的复杂脚本语言有疑问。

如您所知，在 Android 2.3 之前，我们遇到了复杂脚本语言的问题。我搜索了很多并找到了一个类来解决它（它有很多工作）。

一段时间后，我发现移动设备和操作系统版本都有同样的问题。例如，在三星 Galaxy Fit 和其他三星设备等两种不同类型的设备上使用 Android 2.3 时，复杂的脚本运行良好，并且在一台设备上显示正确的格式，而在另一台设备上显示不佳。

是否有任何选项可以在各种设备和操作系统版本中以正确的方式进行？

注意：在我的应用程序中，我检查要使用或不使用复杂脚本语言类的 SDK 版本。

# c# - 如何为继承多个接口的类设置 DataTemplate？

> ID：15334164
> 
> 赞同：4
> 
> 时间：2013-03-11T08:35:40.233
> 
> 标签：c#, wpf, xaml, data-binding

我正在尝试使用 MVVM 架构和 MEF 来构建应用程序。我想使用`DataTemplates`and`ContentControls`以允许我的应用程序以尽可能通用的方式向用户显示。

所以我现在正在为用户创建读取/写入信息和读取/写入结果到某个地方的能力，可以是 XML，也可以是数据库。所以我有两个接口`IResultStorage`和`ITestStorage`

我现在想为用户创建一个页面来更新这些设置，因此文件位置或数据库等。我的视图模型通过 MEF 导入它们：

```
public sealed class AdminViewModel : ViewModelBase
{
    [Import]
    public ITestStorage TestStorage { get; set; }

    [Import]
    public IResultStorage ResultStorage { get; set; }
} 
```

然后将视图导出并加载到`Resources.MergedDictionaries`运行时

```
<DataTemplate DataType="{x:Type vm:AdminViewModel}">
    <Grid>
        <TabControl Grid.Row="0">
            <TabItem Header="Tests">
                <ContentControl Grid.Row="0" Content="{Binding TestStorage}"/>
            </TabItem>
            <TabItem Header="Results">
                <ContentControl Grid.Row="0" Content="{Binding ResultStorage}"/>
            </TabItem>
        </TabControl>
    </Grid>
</DataTemplate> 
```

但是，我目前实现它的方式是一个类继承了这两个，正是这导致了我的问题：

```
[Export(typeof(ITestStorage))]
[Export(typeof(IResultStorage))]
public sealed class XmlStorage : ITestStorage, IResultStorage { ... } 
```

因此，当`AdminViewModel`上面的内容被绘制时，两者似乎`ContentControls`都是类型`XmlStorage`，所以我不知道如何创建`DataTemplates`以正确绘制它们。

希望这是有道理的，如果我以完全错误的方式完成它，那将是一件好事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:24:21.297

如果您为每个作为资源创建子数据模板，您是否测试过？

```
<DataTemplate DataType="{x:Type vm:TestStorage}">
    <Grid>
        <Label Content="{Binding someValueFromTestStorage}"/>
    </Grid>
</DataTemplate> 
```

* * *

编辑

也许这两个链接可以帮助你[第一](http://www.dev102.com/2008/04/23/wpf-datatemplate-for-interfaces-not-supported/)，[第二（ger）](http://social.msdn.microsoft.com/Forums/de-DE/wpfde/thread/8bc0431e-dc9f-40dd-b4c6-6866e524b8e5/)

这个[链接](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/1e774a24-0deb-4acd-a719-32abd847041d/)也可能很有趣，关注**Beatriz Costa - MSFT（合作伙伴）**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:07:46.537

好吧，对于更*棘手*的实现，让我们称之为*更智能的实现*，我建议使用`TemplateSelector`. 欲了解更多信息，请看[这里](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector%28v=vs.90%29.aspx)。

您将能够根据给定 VM 或业务对象的类型分配模板。您将面临的唯一挑战是您必须找出将对象传递给`TemplateSelector`.

**附加信息**

我想[这](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.contenttemplateselector.aspx)也会对你有所帮助。

# ruby - 尝试查看“已发送”消息时，没有路由匹配 {:action=>"show", :controller=>"users"}

> ID：15334167
> 
> 赞同：0
> 
> 时间：2013-03-11T08:35:51.670
> 
> 标签：ruby, ruby-on-rails-3, routes

我快到了，我正在尝试找出 simple_private_messages 插件的其余部分。有谁知道我该如何解决这个问题？

这是我的 rake 路由输出

```
delete_selected_user_messages POST       /users/:user_id/messages/delete_select
ed(.:format)    messages#delete_selected
                 user_messages GET        /users/:user_id/messages(.:format)
                messages#index
                               POST       /users/:user_id/messages(.:format)
                messages#create
              new_user_message GET        /users/:user_id/messages/new(.:format)
                messages#new
             edit_user_message GET        /users/:user_id/messages/:id/edit(.:fo
rmat)           messages#edit
                  user_message GET        /users/:user_id/messages/:id(.:format)
                messages#show
                               PUT        /users/:user_id/messages/:id(.:format)
                messages#update
                               DELETE     /users/:user_id/messages/:id(.:format)
                messages#destroy
                         users GET        /users(.:format)
                users#index
                               POST       /users(.:format)
                users#create
                      new_user GET        /users/new(.:format)
                users#new
                     edit_user GET        /users/:id/edit(.:format)
                users#edit
                          user GET        /users/:id(.:format)
                users#show
                               PUT        /users/:id(.:format)
                users#update
                               DELETE     /users/:id(.:format)
                users#destroy 
```

这是我的 routes.db

```
 resources :users do
             resources :messages do
               collection do
                 post :delete_selected
               end
             end
           end

  ActiveAdmin.routes(self)

  devise_for :admin_users, ActiveAdmin::Devise.config

  resources :users do
    member do
      get :following, :followers
    end
  end
  resources :sessions, only: [:new, :create, :destroy]
  resources :microposts, only: [:create, :destroy]
  resources :relationships, only: [:create, :destroy]
  resources :microposts do
  resources :comments

end
  root to: 'static_pages#home' 
```

这是我的 _sent.html.erb

```
<h2>Sent</h2>
<table>
    <tr>
        <th>Delete?</th>
        <th>Subject</th>
        <th>To</th>
        <th>Sent</th>
    </tr>
    <% if @messages.size == 0 %>
        <tr>
            <td colspan="4">
                No messages
            </td>
        </tr>
    <% else %>
        <% for message in @messages %>
            <tr>
                <td><%= check_box_tag "delete[]", message.id %></td>
                <td><%= link_to h(message.subject), user_message_path(@user, message) %></td>
            <td><%= link_to h(message.recipient_id), user_path(message.recipient) %></td>
              <td><%=h message.created_at.to_s(:long) %></td>
            </tr>
        <% end %>
        <tr>
            <td colspan="4">
                <%= submit_tag "Delete" %>
            </td>
        </tr>
    <% end %>
</table>
<%= link_to "Inbox", user_messages_path(@user)%> 
```

我正在尝试使此链接正常工作 (localhost:3000/users/2/messages?mailbox=sent) 但我收到此错误消息

```
Routing Error

No route matches {:action=>"show", :controller=>"users"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:46:33.647

您的错误最可能的原因是这一行

```
user_path(message.recipient) 
```

有一条消息，收件人为零。检查数据库是否有这样的记录。

# java - modifying the copied 2d array in java

> ID：15334171
> 
> 赞同：0
> 
> 时间：2013-03-11T08:36:06.000
> 
> 标签：java, arrays, copy

I am trying to copy a 2d array of ints to another,such that the original remains unaffected when copied array is modified

```
 int[][] t3 = new int[][]{
            {1,2,3},
            {0,4,6},
            {7,8,9}
        };
        show(t3);

        int[][] t4 = new int[t3.length][t3[0].length];
        System.arraycopy(t3, 0,t4 ,0, t3.length-1);
        show(t4);

        t3[0][0]=99;
        show(t3);
        show(t4); 
```

However,the original gets modified here

```
t3
1 2 3 
0 4 6 
7 8 9 

t4
1 2 3 
0 4 6 
0 0 0 

t3 modified
99 2 3 
0 4 6 
7 8 9 

t4
99 2 3 
0 4 6 
0 0 0 
```

I tried clone() ,still the behaviour is the same

Why is this? Any idea how to keep the original unmodified?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:41:00.893

```
for(int i = 0; i < t3.length; i++)
    t4[i] = t3[i].clone(); 
```

Try this:

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:41:47.237

You are just coping 1d array references to your new array t4\. That is why your reference t4 still points to your old 1d arrays.

You should use a loop to replace 'deeper' arrays:

```
for (int i = 0; i < t3.length; i++) {
    System.arraycopy(t3[i], 0, t4[i], 0, t3[0].length);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T08:41:51.230

You need to copy each array of your 2d array.

Using [Arrays.copyOf(int[], int)](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf%28int%5B%5D,%20int%29):

```
int[][] t4 = new int[t3.length][];
for(int i = 0 ; i < t3.length ; ++i) {
    t4[i] = Arrays.copyOf(t3[i], t3[i].length);
}
show(t4); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T08:51:20.753

Just use this method

```
public static int[][] produceAcopy2DArray(int[][] original) {
    int [][] copied = new int[original.length][];
    for(int i = 0; i < original.length; i++)
        copied[i] = original[i].clone();
    return copied;
} 
```

Then call it where you like as

```
t4 = produceAcopy2DArray(t3); 
```

Then you will keep the original unmodified as you need

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T08:53:32.807

The copy utilities in Java will not copy a multidimensional array. You must iterate over the array and assign the values into a new array.

```
 public static void main(String[] args) {
            int[][] t3 = new int[][] { { 1, 2, 3 }, { 0, 4, 6 }, { 7, 8, 9 } };

            int[][] t4 = new int[t3.length][t3[0].length];

            for (int x = 0; x < t3.length - 1; x++) {
                for (int y = 0; y < t3[x].length - 1; y++) {
                    t4[x][y] = t3[x][y];
                }
            }

            t4[0][0] = 99;
            System.out.println(t3[0][0]); //Prints 1
            System.out.println(t4[0][0]); //Prints 99
        } 
```

# macos - 如何在 sublime text 2 中录制宏？

> ID：15334172
> 
> 赞同：5
> 
> 时间：2013-03-11T08:36:09.850
> 
> 标签：macos, macros, sublimetext2

我正在使用 sublime text 2 并想记录一个宏来上传当前文件 vie 传输 docsend (super+u) 并将其保存在本地 (super+s)。

于是我开始录制宏 ctrl+q 并在页脚看到状态通知

```
Starting to record macro ... 
```

然后我点击 super+s 并保存并上传它 vie super+u。在按 ctrl+q 停止宏录制后，页脚说

```
Stopping recording macro 
```

但是我在菜单“工具/播放宏”中没有选项，当我点击保存宏时它什么也没做。

任何想法？

PS：我在 OS X 上工作，我没有目录

```
/Library/Application\ Support/Sublime\ Text\ 2 
```

我必须以管理员身份创建它吗？

非常感谢

现在我意识到我不需要文件夹 /Library... 但是 ~/Library...

但保存文件后 ~/Library/Application\ Support/Sublime\ Text\ 2/Packages/User/transmit-upload-and-save.sublime-macro

```
[
{"command": "save"},
{"command": "transmit_docksend"}
] 
```

并将以下内容添加到用户快捷方式

```
[
{ "keys": ["super+u"], "command": "run_macro_file", "args": {"file": "Packages/User/transmit-upload-and-save.sublime-macro"} }
] 
```

它不保存但上传......有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T14:58:38.097

要简单地播放最后录制的宏，请按`Ctrl+Shift+q`。

在 Sublime Text2 中，宏默认情况下不会保存到文件中，而是驻留在宏缓冲区中。
更多[在这里](http://docs.sublimetext.info/en/latest/extensibility/macros.html)

它上传的原因是因为您的密钥仅被定义为`[super+u]`用于上传 - 它应该`[super+s]`用于保存。

希望有帮助

# c++ - 如何将谓词传递给算法

> ID：15334178
> 
> 赞同：1
> 
> 时间：2013-03-11T08:36:29.200
> 
> 标签：c++, algorithm, templates, c++11, predicate

我在使用 lambda 传递谓词时遇到问题，我正在尝试将与谓词匹配的元素移动到第二个容器的开头，但它似乎不起作用，请问有什么问题吗？

```
#include <iostream>
#include <vector>
#include <list>
#include <iterator>
#include <utility>
#include <algorithm>

using namespace std;

    template <typename iterator, typename Container, typename T>
    void move_if(iterator b, iterator e, Container o, T pred)
    {
        if(pred)
        {
            o.insert(o.begin(),pred);
        }

    }

    int main()
    {
        vector<int>v{1,2,3,4,5,6,7,8,9,10};
        vector<int>v2;
        for (auto i=v.begin(); i !=v.end(); ++i)
            save_if(v.begin(), v.end(), v2, []( vector<int>::iterator i){return (*i>5);});

        return 0;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T08:46:43.160

试试这个...

```
int main()
{
    std::vector<int> v{1,2,3,4,5,6,7,8,9,10};
    std::vector<int> v2;

    std::vector<int>::const_iterator
        it = std::remove_copy_if(v.begin(), v.end(),
                                 std::back_inserter(v2),
                                 [](int const& i){return i <= 5;});
    v.erase(it, v.end);

    return 0;

} 
```

[`remove_copy_if`您可以在 cppreference.com 上](http://en.cppreference.com/w/cpp/algorithm/remove_copy)阅读更多信息；它从输入范围*中删除*元素并将它们复制到输出，除非谓词返回 true。

请注意，这是一个 STL *remove*，因此您需要在之后调用 erase 以缩小输入。此解决方案的语义与您发布的代码略有不同，但更类似于您对所需内容的描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T08:47:29.717

看看这个，我对你的代码做了一些修改：

```
template <typename iterator, typename Container, typename T>
void move_if(iterator a, iterator b, Container &o, T pred)
{
    for (auto i = a; i != b; i++)
    {
        if (pred(*i))
            o.insert(o.begin(), *i);
    }
}

int main()
{
    vector<int>v{1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
    vector<int>v2;

    move_if(v.begin(), v.end(), v2, [](int i) { return !(i > 5); });
} 
```

注意：正如评论，如果功能如上代码，建议重命名`move_if`为，否则你应该真正移动项目。`copy_if`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T08:42:18.983

没有将谓词作为第二个参数的[std::vector::insert](http://en.cppreference.com/w/cpp/container/vector/insert)重载，所以这一行是错误的：

```
o.insert(o.begin(),pred); 
```

此外，谓词需要用参数调用，

```
pred(someArg); 
```

在您的情况下，这将是一个`std::vector<int>::iterator`. 还有，`save_if`不一样`move_if`。但更重要的是，根本不清楚您要达到什么目标。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T14:35:58.133

在 C++11 中，像`[](){return true}`这样不捕获任何内容的无状态 lambda 可以隐式转换为函数指针。当你这样做时，`if(pred)`你正在将你的无状态 lambda 转换为一个函数指针，检查该指针是否为非空（它是非空的）。这不是你想要做的。

这是一个实现，它表示应该移动`move`之间的东西：`b``e``pred(x)`

```
template <typename iterator, typename Container, typename T>
void move_if(iterator b, iterator e, Container o, T pred)
{
  for( auto i = b; i != e;++i) {
    if(pred) {
      o.insert(o.end(),std::move(*i));
    }
  }
} 
```

请注意，我插入了 at `o.end()`，因为`Container`您想要的可能是`vector`，并且插入 at 的`end()`速度`vector`要快得多。

实际上，您可能希望使用输出迭代器（默认情况下，使用`std::back_inserter`from a `Container`）并将数据输出到该迭代器。同样，`remove_move_if`这将是一种更好的删除方式，将元素在`b`-`e`范围内随机排列，并返回一个`iterator`.

最后，基于范围的算法值得编写。与其采用开始/结束迭代器对，不如采用单个对象，在该对象上`begin(c)`并`end(c)`已被覆盖以返回开始/结束。如果您正在处理子范围，则可以传入迭代器的开始/结束范围，`struct`并适当地覆盖开始/结束。

# ajax - 在 AJAX 调用后将新的 DOM 元素绑定到视图模型

> ID：15334179
> 
> 赞同：3
> 
> 时间：2013-03-11T08:36:29.393
> 
> 标签：ajax, asp.net-mvc-4, knockout.js, viewmodel

我在将新的 DOM 元素绑定到我的视图模型时遇到了麻烦。此元素位于使用 AJAX 调用加载的部分视图中（请参阅下面的 customizeQuote 函数）。

```
$(function () {
var mvcModel = ko.mapping.fromJS(initialData);

function QuoteViewModel() {
    var self = this;

    self.customizeQuote = function (quote) {
        self.selectedQuote = quote;

        //remove the disable attribute on all form controls before serializing data
        $(".step").each(function () {
            $(this).find('input, select').removeAttr('disabled');
        });

        //convert form data to an object 
        var formData = $('#etape').toObject();

        $.ajax("getSelectedQuote", {
            data: ko.toJSON({ model: self.selectedQuote, model1: formData }),

            type: "post", contentType: "application/json",
            success: function (result) {

                $("#custom").html(result);
                $("#etape").formwizard("show", "customize");
                ko.applyBindings(self.selectedQuote, $("#covers"));

            }
        });
    }
}

var myViewModel = new QuoteViewModel();
var g = ko.mapping.fromJS(myViewModel, mvcModel);    
ko.applyBindings(g);
}); 
```

这是部分视图html：

```
@model QuoteViewModel
<table id="covers">
<thead>
    <tr>
        <th>
            ProductName
        </th>            
    </tr>
</thead>
<tbody data-bind="foreach: CoverQuotesViewModel">
    <tr>
        <td>
            <input data-bind="value: ProductName" />
        </td>          
    </tr>
</tbody>
</table> 
```

该行：

```
ko.applyBindings(self.selectedQuote, $("#covers")); 
```

触发错误：

> “ko.applyBindings：第一个参数应该是你的视图模型；第二个参数应该是一个 DOM 节点”

我对淘汰赛还很陌生，我看不出我做错了什么。任何的想法 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T08:47:00.140

`$("#covers")`虽然不是 DOM 节点，但它是一个 jQuery 对象。也许尝试使用它：

```
ko.applyBindings(self.selectedQuote, $("#covers")[0]); 
```

将`[0]`获取 jquery 对象中选择器的第一个匹配元素。

# apache - Apache 删除“www”不起作用

> ID：15334180
> 
> 赞同：0
> 
> 时间：2013-03-11T08:36:30.357
> 
> 标签：apache, web, rewrite, subdomain

我一直在尝试此处的所有建议以从我的子域中删除“www”，但似乎没有任何效果。

长话短说（或至少更短），我们最近推出了一个网站 womeninleadership.managers.org.uk，但是在一些印刷材料中出现了错误，并且 URL www.womeninleadership.managers.org.uk 有以某种材料寄出。

我一直在尝试使用以下 RewriteRules 来解决这个问题，但根本没有成功：

```
 RewriteCond %{HTTPS} !=on
  RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  RewriteRule ^ http://%1%{REQUEST_URI} [R=301,L]

  RewriteCond $1 !^(index\.php|resources|robots\.txt)
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

该站点基于 Codeigniter，这就是为什么我也有第二条规则。

希望这里的人能指出我明显出错的地方，因为这真的让我很疯狂，哈哈

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:28:27.413

我一直使用这样的东西：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.example\.com$ [NC]
RewriteRule ^(.*)$ http://example.com/$1 [R=301,L] 
```

# c++ - getcwd C++ 的问题

> ID：15334184
> 
> 赞同：0
> 
> 时间：2013-03-11T08:37:04.247
> 
> 标签：c++

我想获得`PATH of Current Working Directory`in`C++`程序。它应该运行`Windows`, `Sun Solaris`, `UNIX`。我发现[这](https://stackoverflow.com/questions/143174/how-do-i-get-the-directory-that-a-program-is-running-from)是我的答案。但是我们的编译器给出了找不到文件的错误`unistd.h`。我在 Windows 中编译。我使用了与正确答案中提到的完全相同的代码。这里有什么问题？

另外，我的老板正在质疑此代码的工作原理。我已经评论了 UNIX 行，并且程序在 Windows 中运行良好。甚至他也不知道这段代码是如何工作的。有人可以向我解释一下这段代码吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:39:18.753

`<unistd.h>`不应该在 Windows 上找到。根据[如何获取程序正在运行的目录，要包含在 Windows 中的文件？](https://stackoverflow.com/questions/143174/how-do-i-get-the-directory-that-a-program-is-running-from)是`<direct.h>`。检查您的预处理器宏。

# php - 如何使用 Facebook 图形 API 显示默认人脸照片？

> ID：15334187
> 
> 赞同：-6
> 
> 时间：2013-03-11T08:37:09.190
> 
> 标签：php, javascript

我正在使用图形 API。我需要显示默认的人脸图片。我怎样才能展示它？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:08:29.737

假设你想在 FB 没有 Display pic 的情况下显示默认图片。

```
    FB.api('/me/picture',function(response){
        变量数据={};
        如果（reponse.data.url===null）
        {
          数据=响应；
          data.url='你的默认图片地址'; //希望这应该工作
          //您现在可以在您的应用程序中使用数据对象。
        }

});

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:18:27.010

阅读[官方文档](https://developers.facebook.com/docs/reference/api/using-pictures/)，您会在其中找到大量示例。

如果它是您需要的个人资料图片，那么这就是您需要调用的 url

```
https://graph.facebook.com/user_id_goes_here/picture 
```

# jquery - jquery中的这个for循环有什么问题？

> ID：15334188
> 
> 赞同：0
> 
> 时间：2013-03-11T08:37:16.057
> 
> 标签：jquery, for-loop, radio-button

我有一组 5 个元素，例如单选按钮，我想延迟为每个元素设置选中的属性。

```
 <input type="radio" name="slider" id="slide1">
<input type="radio" name="slider" id="slide2">
<input type="radio" name="slider" id="slide3">
<input type="radio" name="slider" id="slide4">
<input type="radio" name="slider" id="slide5"> 
```

并将此脚本添加到标题中：

```
<script>
   $(document).ready(function(){
      for(var i=1; i<6; i++){
          $('input[name=slider]:nth-child(i)').attr('checked', ').delay(500);
      }
   })
</script> 
```

但没有一个没有被选中。我的 for 循环有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:38:44.870

我想这可能是你所追求的：

[http://jsfiddle.net/](http://jsfiddle.net/vSFtM/3/)

```
$(document).ready(function(){
      for(var i=1; i<6; i++){
          $('input[name=slider]:nth-child('+i+')').delay(i*500).show(function() { $(this).prop('checked', true)});
      }
   }) 
```

**解释**

当你运行这个循环时，每个元素都有一个延迟显示。delay->show 立即为每个元素运行。出于这个原因，您需要不断增加延迟，以使它们看起来是同步绑定在一起的。第一个延迟是 500ms，第二个是 1s，第三个是 1.5s，等等。`show`调用中的函数是一个回调，告诉复选框添加属性 checked=true。

根据您对@Juhana 的评论：我会说这将是您最好的选择（或稍作修改）：

[http://jsfiddle.net/vSFtM/5/](http://jsfiddle.net/vSFtM/5/)

```
$(document).ready(function(){
    setInterval(function() { nextIteration(); }, 500);
    var current_index = 1;
    var total = 5;
    function nextIteration() {
      $('#slide'+current_index).prop('checked', true);
      current_index = current_index + 1 > total ? 1 : current_index + 1;
   }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:52:51.377

`.delay()`仅由 jQuery 动画队列使用，它实际上并不暂停脚本执行。原始代码依次（立即）检查每个单选按钮并将其动画队列（为空）暂停 0.5 秒。

这是一个适用于任意数量的单选按钮并且没有开销的选项`.delay()`：

```
$(document).ready(function () {
    $('input[name=slider]').each(function (index) {
        var $this = $(this);
        setTimeout( function() {
            $this.prop('checked', true);
        }, 500 * index );
    });
}); 
```

演示：http: [//jsfiddle.net/kmJkP/](http://jsfiddle.net/kmJkP/)

# c++ - valgrind memcheck 是否支持检查 mmap

> ID：15334191
> 
> 赞同：7
> 
> 时间：2013-03-11T08:37:31.483
> 
> 标签：c++, c, memory-leaks, valgrind, mmap

我正在尝试使用 valgrind 来检测内存泄漏。它适用于堆泄漏（即来自 malloc 或 new 的内存分配）。但是，它是否支持在 linux 中检查 mmap 泄漏？

谢谢张

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T09:34:40.310

不是直接的，很难调试，看看[valgrind.h](http://code.google.com/p/re2/source/browse/util/valgrind.h?r=1739d0b102767f21e0b9946369e3b561b3efc682)

```
 VALGRIND_MALLOCLIKE_BLOCK should be put immediately after the point where a
   heap block -- that will be used by the client program -- is allocated.
   It's best to put it at the outermost level of the allocator if possible;
   for example, if you have a function my_alloc() which calls
   internal_alloc(), and the client request is put inside internal_alloc(),
   stack traces relating to the heap block will contain entries for both
   my_alloc() and internal_alloc(), which is probably not what you want.

   For Memcheck users: if you use VALGRIND_MALLOCLIKE_BLOCK to carve out
   custom blocks from within a heap block, B, that has been allocated with
   malloc/calloc/new/etc, then block B will be *ignored* during leak-checking
   -- the custom blocks will take precedence.

   VALGRIND_FREELIKE_BLOCK is the partner to VALGRIND_MALLOCLIKE_BLOCK.  For
   Memcheck, it does two things:

   - It records that the block has been deallocated.  This assumes that the
     block was annotated as having been allocated via
     VALGRIND_MALLOCLIKE_BLOCK.  Otherwise, an error will be issued.

   - It marks the block as being unaddressable.

   VALGRIND_FREELIKE_BLOCK should be put immediately after the point where a
   heap block is deallocated. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-31T07:23:13.350

遗憾的是，valgrind 的 memcheck 不支持 mmap 跟踪（至少不是开箱即用的），但还是有希望的。

我最近遇到了**valgrind-mmt**，一个用于跟踪 mmap 内存访问和分配的 valgrind 分支： [https ://nouveau.freedesktop.org/wiki/Valgrind-mmt](https://nouveau.freedesktop.org/wiki/Valgrind-mmt)

它由[envytools](https://github.com/envytools)开发，似乎主要用于图形驱动程序的开发。

mmap 跟踪工具`mmt`对所有对 mmap 内存的访问进行深度跟踪，包括加载和存储。这对于查找泄漏的 mmap 内存的工作来说可能太多了，并且需要对工具的输出进行处理和分析，但是通过一些仔细的工作，它可能对检测 mmap 泄漏情况很有用。就个人而言，我使用它只取得了部分成功，但也许其他人会更幸运。

请注意，它可能不适合[匿名 mmap 分配](https://stackoverflow.com/questions/34042915/what-is-the-purpose-of-map-anonymous-flag-in-mmap-system-call)。

* * *

入门：

*   克隆并构建[envytools/envytools 存储库](https://github.com/envytools/envytools)
*   克隆并构建[envytools/valgrind 存储库](https://github.com/envytools/valgrind)
*   使用以下参数运行 valgrind：

    `/usr/local/bin/valgrind --tool=mmt --mmt-trace-file=[mmapped-file-to-be-traced] --log-file=mmt-log.bin`

*   解码 mmt 输出：`demmt -l mmt-log.bin > mmt-log.txt`

# python - Cygwin 中的正确路径用法：`python c:\somefile.py` 和 `python /cygdrive/c/somefile.py` 之间的区别

> ID：15334201
> 
> 赞同：9
> 
> 时间：2013-03-11T08:37:55.043
> 
> 标签：python, django, bash, cygwin

我在 Windows + Cygwin 上使用 Django 1.5 和 Python 2.7。以下命令在 bash shell 中给了我一个错误

```
$ python /cygdrive/c/Python27/Lib/site-packages/django/bin/django-admin.py 
```

错误：

```
C:\Python27\python.exe: can't open file '/cygdrive/c/Python27/Lib/site-packages/django/bin/django-admin.py': [Errno 2] No such file or directory 
```

然而这有效

```
$ python c:/Python27/Lib/site-packages/django/bin/django-admin.py 
```

我在 django-admin.py 错误上看到了很多类似的问题，但没有一个专门针对此问题。

那么Cygwin 上的 bash shell 中的`python c:\somefile.py`&有什么区别`python /cygdrive/c/somefile.py`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-11T23:36:06.390

正如其他人所指出的，这里的部分问题是您正在从 Cygwin 调用 Windows Python。这是一件奇怪的事情，因为你遇到了这样的奇怪行为，但它可以小心翼翼地工作。

当您从 Cygwin 调用 Python 时 - Cygwin Python 和 Windows Python 都是这种情况 - 您传递的路径将按原样提供给 Python 来处理。这意味着 Python 必须知道如何处理这种路径。例如，如果您通过以下内容：

*   `C:\path\to\script.py`- Windows Python 知道如何处理这个问题，而 Cygwin Python 可能会感到困惑。也就是说，如果你在 Cygwin shell 中键入它，那些反斜杠很容易被解释为转义字符，它们是否是转义字符取决于一些相对复杂的规则。如果您在 Cygwin 中玩耍，请避免使用。

*   `'C:\path\to\script.py'`- 这些引号将被 Cygwin 的 bash shell 剥离，同时停止将反斜杠作为转义字符，因此这对于从 Cygwin 调用 Windows Python 来说可以正常工作。但是，从 Windows 命令行或类似命令行运行会导致问题，因为 Windows 不处理单引号。

*   `/cygdrive/c/path/to/script.py`- 这是从任何 Cygwin 程序的角度来看的路径，例如 Cygwin Python。它非常适用于 Cygwin Python，但不适用于 Windows Python。

*   `C:/path/to/script.py`- 这不是很为人所知，但 Windows 路径中的反斜杠可以替换为正斜杠，任何表现良好的 Windows 程序都应该处理得很好：它们是 Windows 明确允许的。特别是，Windows Python 对它们没有任何问题，并且 Cygwin 的 bash shell 不会尝试巧妙地处理正斜杠。因此，您可以在任何调用 Windows Python 的地方使用这种路径。

*   `$(cygpath -w /cygdrive/c/path/to/script.py)`-`cygpath`是一个 Cygwin 实用程序，用于在不同路径样式之间进行转换；使用选项调用`-w`，它将 Cygwin 路径转换为 ​​Windows 路径。`$(...)`指示 Cygwin 的 bash shell 应该用运行命令的结果替换文本，因此如果将其作为从 Cygwin bash shell 调用的 Windows Python 的参数给出，Windows Python 将收到它可以使用的 Windows 路径。

*   `path/to/script.py`- 这是一个相对路径，所以你需要从一个合适的目录中调用它。它是第一个适用于 Cygwin 和 Windows Python 的版本，可以从 Cygwin shell 和 Windows 命令行调用。

如您所见，路径很复杂，尤其是当您同时使用 Cygwin 和 Windows 工具时。

作为一般规则，如果可能的话，最安全的做法是坚持使用其中一种（因此只能从 Cygwin shell 使用 Cygwin Python，并且只能从 Windows 命令行使用 Windows Python）。如果这是不可能的，那么下一个最好的方法是`cygpath`在您从 Cygwin 调用 Windows 程序时使用，或者反过来 - 运行`cygpath -w /cygdrive/c/Windows`将给出`c:\windows`; 运行`cygpath 'c:\Windows'`将打印`/cygdrive/c/Windows`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T13:28:17.287

您似乎在 C: 中安装了 Python，而不是在 /usr/bin/python 或类似中。我猜你从 python.org 安装了 Python 的 Windows 端口，而不是 Cygwin python 包。在这种情况下，python 可执行文件没有使用 Cygwin（它正在运行本机），并且需要 Windows 格式的路径名。

此外，您的 Django 似乎已安装在您的 Windows Python 安装中。Cygwin 可能完全脱离了循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T09:59:49.823

好吧，应该没有什么不同：

```
hgs15624@ESCLT0116 ~
$ python /cygdrive/c/test.py
Hello

hgs15624@ESCLT0116 ~
$ python c:/test.py 
Hello 
```

我猜你一直在寻找奇怪的权限。

编辑：以下只是指问题中的错字。

错误说：

```
/cygdrive/c/Python27/Lib/sitepackages/django/bin/django-admin.py 
```

你错过了中的连字符`site-packages`吗？

# c# - 实时 SQL 时间表

> ID：15334202
> 
> 赞同：0
> 
> 时间：2013-03-11T08:38:17.973
> 
> 标签：c#, asp.net, sql-server-2008

我有一个带表的 ms sql 数据库

> （演讲）

. 列是

> (Speechid(自动增量)、SpeechName(varchar)、Speech_Date(date)、SpeechTime(varchar))。

如您所见，我知道演讲的日期和每次演讲的开始时间。

我不知道结束时间。我想创建一个查询，该查询将每 2 分钟从 asp.net/c# 页面刷新一次，并显示现在舞台上的语音（实时）。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:44:26.180

要自动刷新页面，请使用此>>

```
<meta http-equiv="refresh" content="15"> 
```

或者

在 On_Load 事件写入中，

```
Response.AppendHeader("Refresh", "15") 
```

在 On_Load 事件中仅通过此从系统获取当前时间>>

```
try
{

    string curr_time= DateTime.Now.ToShortTimeString();
    da=new SqlDataAdapter("select SpeechName from Speeches where SpeechTime<'"+curr_time+"'",conn);
    DataSet ds=new DataSet();
    da.fill(ds);
    for(int i=0;i<ds.Tables[0].Rows.Count;i++)
    string speechName=ds.Tables[0].Rows[i][0].toString();//This will give you last speech within that time.

}
catch(Exception ex)
{
} 
```

将其与数据库中的时间值进行比较，您将能够找到当前语音。

# c# - 类和属性属性

> ID：15334203
> 
> 赞同：1
> 
> 时间：2013-03-11T08:38:21.170
> 
> 标签：c#, winforms

我只是为了学习目的下载了一个入门项目。在这个我发现了一些关于类和属性的标签。有人可以遮光这些吗？比如我们为什么使用它们？

```
[Serializable]
    public partial class RoleToPermission
    {
        [DataMember]
        [ColumnAttribute(DbType = "int")]
        [AddEditDelete(Ignore=true)]
        public int RolePermissionID { get; set; }

        [DataMember]
        [ColumnAttribute(DbType = "int")]
        [AddEditDelete(Add = false, Delete = true)]
        public int RoleID { get; set; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:05:18.047

[属性](http://msdn.microsoft.com/en-us/library/aa664611%28v=vs.71%29.aspx)用于将*附加*信息附加到程序实体上，例如类、属性、字段或方法。在运行时，感兴趣的代码可以使用反射检索此信息。

例如，当您使用 a`DataContractSerializer`序列化对象时，序列化程序将查找带有属性标记的任何字段或`[DataMember]`属性。所以`[DataMember]`属性允许你*声明*哪些字段和属性应该被序列化。

存在一些[有用的属性](https://stackoverflow.com/questions/144833/most-useful-attributes)，您也可以为其他目的[编写自己的属性](http://msdn.microsoft.com/en-us/library/sw480ze8%28v=vs.100%29.aspx)。

# java - Java中的加密和PHP中的解密

> ID：15334204
> 
> 赞同：0
> 
> 时间：2013-03-11T08:38:22.657
> 
> 标签：java, php, encryption

我必须解密 PHP 中的字符串，该字符串是从 Java 类生成的。而且我无法理解那堂课到底在做什么。[用于加密-解密的 Java 类](http://www.java2s.com/Code/Java/Security/DesEncrypter.htm)

有人可以建议我解密加密字符串的等效代码或过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:44:48.450

该Java类似乎做了DES加密。

在 PHP 中，您可以执行以下操作：

```
$result=mcrypt_decrypt ( "MCRYPT_DES" , $key , $data , $mode); 
```

$key 和 $mode 变量是你应该知道的信息，$data 是输入的加密字符串。如果另一个不起作用，您可能想尝试 MCRYPT_3DES。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T13:32:31.823

您链接的代码使用盐、密码和 md5 迭代次数生成加密密钥。

使用加密密钥，您可以加密/解密。

几年前，我实现了所用算法 PBEWithMD5AndDES 的 php 版本：[https ://github.com/kevinsandow/PBEWithMD5AndDES](https://github.com/kevinsandow/PBEWithMD5AndDES)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:47:32.037

好吧，即使您似乎也不知道使用的是哪种加密算法，我们也很难为您提供帮助。我不熟悉那里使用的代码和类，但似乎 DES 与 Base64 以一种奇怪的组合方式使用（不是狗屎）。用 PHP 搜索 DES 解密，PHP 也有处理 Base64-String 的功能。

你也可以搜索做什么`SecretKeyFactory.getInstance("PBEWithMD5AndDES").generateSecret(keySpec);`。

# java - JPanel 背景图像没有改变

> ID：15334205
> 
> 赞同：2
> 
> 时间：2013-03-11T08:38:27.950
> 
> 标签：java, image, swing, jpanel, paintcomponent

我正在使用以下类将背景图像添加到 JPanel。

[http://www.java2s.com/Code/Java/Swing-JFC/Panelwithbackgroundimage.htm](http://www.java2s.com/Code/Java/Swing-JFC/Panelwithbackgroundimage.htm)

但是当应用程序正在执行并更改图像时，新的更新图像不会显示在屏幕上。

```
 Image image = new ImageIcon(path + item.getItemID() + ".png").getImage();
    panel = new ImagePanel(image); 
```

变量路径是工作区外的静态路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:58:48.117

如果你“用新的 JPanel 更新 JPanel”，你不是在“更新”，你正在**创建**一个新的 JPanel。例如，我们有一个名为“panelTest”的绿色 JPanel：

```
panelTest = new JPanel();
panelTest.setBackground(Color.green);
add(panelTest); 
```

现在我们有一个按钮，可以将 JPanel 背景颜色从绿色更改为红色，但方式错误：

```
JButton btnTest = new JButton("Test");
btnTest.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent arg0) {
        panelTest = new JPanel(); //woops, now we have 2 panels...
        panelTest.setBackground(Color.red);
    }
}); 
```

请注意，这`panelTest`是一个指向绿色面板的指针，现在它指向一个带有红色背景的新 JPanel。这个新的 JPanel 尚未添加到任何容器中，因此不会显示。旧的绿色面板将保持可见。

更新图像的最佳方法是在 ImagePanel 中创建一个方法，例如：

```
public void setImage( Image image ) {
    this.img = image;
    this.repaint();
} 
```

这样你就不必为了改变背景而创建一个新的 ImagePanel。

# mysql - 条目中用逗号分隔的循环子字符串

> ID：15334207
> 
> 赞同：4
> 
> 时间：2013-03-11T08:38:44.133
> 
> 标签：mysql, sql

让我们考虑一个条目`DOMAIN={domain1,domain2,domain3}`，我如何测试是否`domain1`在列表中`domain2`？`domain3`

例如：`list={domain5, domain 2, domain6}`

```
------------------------------------
| CONTEXT  |        DOMAIN         |
-----------------------------------|
| context1 |domain1,domain2,domain3|
|----------------------------------| 
```

我试过 `SELECT * FROM table WHERE SUBSTRING_INDEX(domain, ',', 1) IN {'domain5', 'domain 2', 'domain6'}`了，但这仅适用于逗号之前的第一个值（domain1）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:44:39.377

对于 SQL Server，使用[CodeProject中的用户定义函数](http://www.codeproject.com/Articles/7938/SQL-User-Defined-Function-to-Parse-a-Delimited-Str)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:53:02.890

为什么不使用带有百分比 (%) 通配符的[LIKE](http://www.w3schools.com/sql/sql_like.asp)运算符。

```
Select * From tablename
where DOMAIN Like '%domain1%'
or DOMAIN Like '%domain2%'
or DOMAIN Like '%domain3%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:46:47.017

使用 mysql 你可以连接你的字段并使用`regexp`这样的：

```
SELECT
    *
FROM table1
WHERE CONCAT(',', domain, ',') REGEXP ',domain1,|,domain2,|,domain1,' 
```

# objective-c - 用手指拖动 UIButton

> ID：15334210
> 
> 赞同：1
> 
> 时间：2013-03-11T08:38:46.070
> 
> 标签：objective-c, uibutton

我想使用拖动在我的应用程序中移动 UIButton。UIButton 是使用代码创建的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T09:16:26.330

您可以通过以下方式实现此目的：

你可以使用`touchesMoved`手势或使用`UIPanGestureRecognizer`

1）使用touchesMoved：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches anyObject];
    CGPoint location = [touch locationInView:self];
    placardView.center = location;
   return;
} 
```

2）使用 `UIPanGestureRecognizer`

将手势识别器添加到按钮上`viewDidLoad`，如下所示：

```
UIPanGestureRecognizer *objGesture= [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(moveButton:)];
[myButton addGestureRecognizer:objGesture];
[objGesture release]; 
```

编写要调用的目标方法

```
-(void)moveButton:(UIPanGestureRecognizer *)recognizer
{
if (recognizer.state == UIGestureRecognizerStateChanged || 
    recognizer.state == UIGestureRecognizerStateEnded) {

    UIView *draggedButton = recognizer.view;
    CGPoint translation = [recognizer translationInView:self.view];

    CGRect newButtonFrame = draggedButton.frame;
    newButtonFrame.origin.x += translation.x;
    newButtonFrame.origin.y += translation.y;
    draggedButton.frame = newButtonFrame;

    [recognizer setTranslation:CGPointZero inView:self.view];
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:50:44.803

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
     CGPoint pt = [[touches anyObject] locationInView:self];
     button.center = pt;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:04:12.663

尝试使用`panGestureRecognizer`或通过使用`touches`方法。单击[此处](https://stackoverflow.com/questions/6545047/how-to-allow-a-user-to-move-a-button-via-ios-sdk)获取更多参考。

# base64 - 编码/解码base64

> ID：15334220
> 
> 赞同：45
> 
> 时间：2013-03-11T08:39:24.200
> 
> 标签：base64, go

这是我的代码，我不明白为什么解码功能不起作用。

请稍有洞察力会很棒。

```
func EncodeB64(message string) (retour string) {
    base64Text := make([]byte, base64.StdEncoding.EncodedLen(len(message)))
    base64.StdEncoding.Encode(base64Text, []byte(message))
    return string(base64Text)
}

func DecodeB64(message string) (retour string) {
    base64Text := make([]byte, base64.StdEncoding.DecodedLen(len(message)))
    base64.StdEncoding.Decode(base64Text, []byte(message))
    fmt.Printf("base64: %s\n", base64Text)
    return string(base64Text)
} 
```

它给了我：[解码错误 - 输出不是 utf-8] [解码错误 - 输出不是 utf-8]

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-11T08:46:12.677

len 前缀是肤浅的，会导致无效的 utf-8 错误：

```
package main

import (
        "encoding/base64"
        "fmt"
        "log"
)

func main() {
        str := base64.StdEncoding.EncodeToString([]byte("Hello, playground"))
        fmt.Println(str)

        data, err := base64.StdEncoding.DecodeString(str)
        if err != nil {
                log.Fatal("error:", err)
        }

        fmt.Printf("%q\n", data)
} 
```

（也在[这里](http://play.golang.org/p/GzwqG5IjsA)）

* * *

输出

```
SGVsbG8sIHBsYXlncm91bmQ=
"Hello, playground" 
```

编辑：我读得太快了，len 没有用作前缀。dystroy 做对了。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-03-11T08:52:33.587

`DecodedLen`返回**最大**长度。

此长度对于调整缓冲区大小很有用，但缓冲区的一部分不会被写入，因此不是有效的 UTF-8。

您必须仅使用`Decode`函数返回的实际书面长度。

```
l, _ := base64.StdEncoding.Decode(base64Text, []byte(message))
log.Printf("base64: %s\n", base64Text[:l]) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2015-02-23T11:31:45.970

总结其他两篇文章，这里有两个使用 Go 编码/解码 Base64 字符串的简单函数：

```
// Dont forget to import "encoding/base64"!

func base64Encode(str string) string {
    return base64.StdEncoding.EncodeToString([]byte(str))
}

func base64Decode(str string) (string, bool) {
    data, err := base64.StdEncoding.DecodeString(str)
    if err != nil {
        return "", true
    }
    return string(data), false
} 
```

[尝试一下！](https://play.golang.org/p/of1EjpKUlk)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-03-19T09:49:28.543

@Denys Séguret 的回答几乎 100% 正确。作为避免在未使用空间中浪费内存的改进`base64Text`，您应该使用[base64.DecodedLen](https://golang.org/src/encoding/base64/base64.go#L607)。看看[base64.DecodeString](https://golang.org/src/encoding/base64/base64.go#L374)是如何使用它的。它应该如下所示：

```
func main() {
    message := base64.StdEncoding.EncodeToString([]byte("Hello, playground"))

    base64Text := make([]byte, base64.StdEncoding.DecodedLen(len(message)))

    n, _ := base64.StdEncoding.Decode(base64Text, []byte(message))
    fmt.Println("base64Text:", string(base64Text[:n]))
} 
```

[在这里](https://play.golang.org/p/IA9g1-LhSX7)试试。

# c# - 如何使用 jQuery Ajax 调用从 ASP.NET Web Api 下载 CSV 文件

> ID：15334227
> 
> 赞同：18
> 
> 时间：2013-03-11T08:40:01.123
> 
> 标签：c#, jquery, asp.net-web-api

我正在研究如何通过 jQuery ajax 调用从 ASP.NET Web Api 下载 CSV 文件。CSV 文件是基于自定义 CsvFormatter 从 Web API 服务器动态生成的。

来自 jQuery 的 Ajax：

```
 $.ajax({
        type: "GET",
        headers: {
            Accept: "text/csv; charset=utf-8",
        },
        url: "/api/employees",
        success: function (data) {
        }
    }); 
```

在服务器上，`EmployeeCsvFormatter`实现与以下文章类似，源自`BufferedMediaTypeFormatter`：

[http://www.asp.net/web-api/overview/formats-and-model-binding/media-formatters](http://www.asp.net/web-api/overview/formats-and-model-binding/media-formatters)

```
public class EmployeeCsvFormatter : BufferedMediaTypeFormatter
{
    public EmployeeCsvFormatter()
    {
        SupportedMediaTypes.Add(new MediaTypeHeaderValue("text/csv"));
    }
    ...
} 
```

我还添加了覆盖方法以表明我想像正常下载文件的方式一样下载（可以在下载选项卡中查看下载文件）：

```
 public override void SetDefaultContentHeaders(Type type, 
    HttpContentHeaders headers, MediaTypeHeaderValue mediaType)       
{
    base.SetDefaultContentHeaders(type, headers, mediaType);
    headers.Add("Content-Disposition", "attachment; filename=yourname.csv");
    headers.ContentType =  new MediaTypeHeaderValue("application/octet-stream");
} 
```

但它不起作用，下载文件没有显示在状态栏或 Chrome 的下载选项卡中，即使来自 Fiddler，我看到它的响应似乎是正确的：

```
HTTP/1.1 200 OK
Server: ASP.NET Development Server/11.0.0.0
Date: Mon, 11 Mar 2013 08:19:35 GMT
X-AspNet-Version: 4.0.30319
Content-Disposition: attachment; filename=yourname.csv
Cache-Control: no-cache
Pragma: no-cache
Expires: -1
Content-Type: application/octet-stream
Content-Length: 26
Connection: Close

1,Cuong,123
1,Trung,123 
```

我来自 ApiController 的方法：

```
public EmployeeDto[] Get()
{
    var result = new[]
               {
                   new EmployeeDto() {Id = 1, Name = "Cuong", Address = "123"},
                   new EmployeeDto() {Id = 1, Name = "Trung", Address = "123"},
               };

    return result;
} 
```

我还没有弄清楚的地方一定是错的。如何像正常方式一样通过下载 CSV 文件使其工作？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-11T08:48:33.550

[jQuery Plugin for Requesting Ajax-like File Downloads](http://www.filamentgroup.com/lab/jquery_plugin_for_requesting_ajax_like_file_downloads/)无需 Ajax 即可[使用简单的表单提交](https://github.com/filamentgroup/jQuery-File-Download/blob/master/jQuery.download.js)。

内部：

```
jQuery('<form action="'+ url +'" method="'+ (method||'post') +'">'+inputs+'</form>')
    .appendTo('body').submit().remove() 
```

它有一个 ajax 风格的界面，所以从外面你可以这样调用它

```
$.download('/api/employees','format=csv'); 
```

另一种简单的方法使用：

```
$('#btnDownload').click(function (e) {
    e.preventDefault();
    window.location = "/api/employees?format=csv";
}); 
```

在服务器上，`MediaTypeMappings`必须通过添加一个构造函数来使用：

```
 public EmployeeCsvFormatter(MediaTypeMapping mediaTypeMapping)
        : this()
    {
        MediaTypeMappings.Add(mediaTypeMapping);
    } 
```

然后，将此格式化程序添加到 Web Api 配置中：

```
 configuration.Formatters.Add(new EmployeeCsvFormatter
            (new QueryStringMapping("format", "csv", "text/csv"))); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-04T10:21:16.570

作为一种替代方法，可以通过单击锚点 () 或按钮提供下载，并将请求的 URL 设置为响应附件的 API 方法。

在`CsvMediaTypeFormatter`（Derived from System.Net.Http.Formatting.MediaTypeFormatter）中，除了如上面的答案所示映射text/csv MIME类型外，我发现需要做以下事情：

```
public override void SetDefaultContentHeaders(Type type, HttpContentHeaders headers, MediaTypeHeaderValue mediaType)
        {
            base.SetDefaultContentHeaders(type, headers, mediaType);
            headers.ContentDisposition = new ContentDispositionHeaderValue("attachment")
            {
                FileName = string.Concat("data", DateTime.UtcNow.ToString("yyyyMMddhhmmss"), ".csv")
            };

            headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
        } 
```

注意：写流的时候，设置`Content-Length`header，记得flush流。我发现如果没有调用`Flush()`，即使设置了正确的内容长度，返回的响应也不会成功返回客户端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-05T20:34:40.643

您还可以通过修改 xhr.xml 来设置 beforeSend 中的请求标头。

```
 $.ajax({
    url: "/api/employees",
    type: "GET",
    beforeSend: function (xhr) {
        xhr.setRequestHeader("Accept", "text/csv");
    },
    success: function (data) {
            }
    }); 
```

# sql - 删除不在链接表中的重复行

> ID：15334228
> 
> 赞同：1
> 
> 时间：2013-03-11T08:40:04.653
> 
> 标签：sql, sql-server, sql-delete

使用 SQL Server 2008。我正在尝试删除表中的一些重复行。下面列出了相关的表和列：

```
ItemTable
----------
Id - autoincrement, PK
ItemLabel - the actual identifier of the items

Linktable
----------
Id - autoincrement, PK
ItemId - the Id from ItemTable
RelatedItemId - the Id from RelatedItemTable

RelatedItemTable
------
no need to touch this with the query.. 
```

**所以链接表不包含项目的实际id，而是两个表的运行行号**

需要实现的目标：ItemTable 包含具有重复 ItemLabel 的行，其中另一个列在链接表中（带有 Id 列的值），而另一个则没有。必须从 ItemTable 中删除未链接的那些。我知道如何使用 count 和 group by 选择重复的行，但无法弄清楚如何仅删除链接表中不存在的行。ItemTable 还包含没有关系的项目的重复项，其中一个必须保留（不管哪个）。

[http://www.sqlfiddle.com/#!3/9d181](http://www.sqlfiddle.com/#!3/9d181)这是一个带有虚拟数据的 SQL 小提琴。

PS不要问为什么链接表使用运行id而不是实际id（可能是PK'd）......这是一个遗留系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:42:26.193

使用 连接两个表`LEFT JOIN`。显然不存在`ItemTable.ID`将具有*空*值`Linktable.ItemID`，这将在您的`WHERE`子句中被过滤。

```
DELETE  a
FROM    ItemTable a
        LEFT JOIN Linktable b
            ON a.ID = b.ItemID
WHERE   b.ItemID IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:50:29.317

试试这个：

```
DELETE t
OUTPUT deleted.*
FROM    ItemTable t
JOIN    (
 SELECT DENSE_RANK() OVER (PARTITION BY ItemLabel ORDER BY lt.ItemID DESC, it.id) num
        , it.Id
 FROM   ItemTable it
 LEFT JOIN 
        LinkTable lt ON
        lt.ItemId = it.id
) t2 ON t2.Id = t.Id
WHERE num > 1 
```

**[SQL小提琴](http://www.sqlfiddle.com/#!3/cf299/14/0)**

尽管上述方法适用于您的情况，但我建议您使用更具可读性并且您将拥有更多控制权和更好概览的方法。这是一种多步骤方法，可以分析和测试每个步骤：

```
-- get ItemLabels of duplicate records
SELECT  ItemLabel
INTO    #Duplicate_ItemLabels
FROM    ItemTable it
GROUP BY
        it.ItemLabel
HAVING  COUNT(*) > 1

-- get ItemLabels of duplicate records that have at least one record related to LinkTable
SELECT  *
INTO    #Duplicate_ItemLabels_Related_To_LinkTable
FROM    #Duplicate_ItemLabels d1
WHERE   EXISTS
(
        SELECT  *
        FROM    ItemTable it
        JOIN    Linktable lt ON 
                lt.ItemID = it.ID
        WHERE   it.ItemLabel = d1.ItemLabel
)

-- get ItemLabels of duplicate records that don't have any records related to LinkTable
SELECT  ItemLabel
INTO    #Duplicate_ItemLabels_NOT_Related_To_LinkTable
FROM    #Duplicate_ItemLabels
EXCEPT
SELECT  ItemLabel
FROM    #Duplicate_ItemLabels_Related_To_LinkTable

-- delete unwanted records for ItemLabels that have records related to linkTable
DELETE  it
OUTPUT  deleted.*
FROM    ItemTable it
JOIN    #Duplicate_ItemLabels_Related_To_LinkTable dup ON
        dup.ItemLabel = it.ItemLabel
WHERE   NOT EXISTS
(
        SELECT  *
        FROM    Linktable lt
        WHERE   lt.ItemID = it.ID
)

-- delete unwanted records for ItemLabels that don't have any records related to linkTable
DELETE  it
OUTPUT  deleted.*
FROM    ItemTable it
JOIN    #Duplicate_ItemLabels_NOT_Related_To_LinkTable dup ON
        dup.ItemLabel = it.ItemLabel
JOIN    
(
        -- records deleted will be all those that have ID greater than the smallest ID for this ItemLabel
        SELECT  ItemLabel
                , MIN(ID) ID
        FROM    ItemTable dup
        GROUP BY
                dup.ItemLabel
)       gr ON
        gr.ID < it.ID
AND     gr.ItemLabel = dup.ItemLabel

-- if after these DELETEs there are still duplicate records, it 
-- means that there are records for same ItemLabel with 
-- different ID and all of them are related to LinkTable 
```

您可以轻松地对其进行修改、测试结果并操作将删除哪些记录。我创建了一个[**SQL Fiddle**](http://www.sqlfiddle.com/#!3/31011/3/2)，我在其中放置了不同的数据样本，以便您可以看到它是如何处理的。

为了对第二种方法的数据进行采样，我还添加了记录，`ItemTable`其中您有相同但`ItemLabel`不同`ID`的记录有多个相关`LinkTable`（没有一个被任意删除）。

# jquery - 使用jquery 1.9.1获取以逗号分隔的选定复选框的值

> ID：15334230
> 
> 赞同：0
> 
> 时间：2013-03-11T08:40:19.863
> 
> 标签：jquery

我列出了一些要选择的产品清单，我正在使用 jquery 来获取值问题是我使用的代码在 jquery 1.7.2 中工作，但在 jquery 1.9.1 中不工作。我得到的错误是使用了错误的语法。

```
var output = jQuery.map($(':checkbox[name=vendor\[\]]:checked'), function(n, i){
      return n.value;
}).join(','); 
```

html格式是

```
 <p><input type="checkbox" name="vendor[]" value="Event Venue">
            <label for="eventvenue">Event Venue</label></p> 
        <p><input type="checkbox" name="vendor[]" value="Decorations & Rentals">
            <label for="decorations">Decorations & Rentals</label></p>
        <p><input type="checkbox" name="vendor[]" value="Florist">
            <label for="florist">Florist</label></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:44:22.447

尝试

```
var output = jQuery.map($(':checkbox[name="vendor[]"]:checked'), function(n, i){
      return n.value;
}).join(','); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/VAten/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:47:17.757

试试这个

```
var output = jQuery.map($(':checkbox[name^=vendor]:checked'), function(n, i){
      return n.value;
}).join(','); 
```

# java - 用于从数据库读取属性的 apache commons 配置的替代方案

> ID：15334231
> 
> 赞同：8
> 
> 时间：2013-03-11T08:40:21.017
> 
> 标签：java, properties, datasource, apache-commons-config

我刚刚发现 Apache commons-configuration 可以从 DataSource 读取属性，但它不会缓存它们。我的应用程序需要多次读取属性，每次访问数据库都很慢。

我有一个 Camel 应用程序，它将所有消息发送到以我的自定义 bean 结尾的路由。这些 bean 是使用范围原型创建的（我相信 OOP），它们将/需要读取一些属性和一个数据源（从属性 url/name/etc 读取），这取决于来自 SQL db 的当前用户。我收到的每条消息都会创建一个 bean，因此会重新读取属性。不幸的是，我不能自由选择从哪里读取属性，因为现在有另一个不是我编写的软件 (GUI)，它是写入 db 的用户/属性管理器。所以我需要从中读取属性。

你能给我一个替代方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T14:26:35.713

您可以使用 Netflix Archaius 项目，该项目添加了您正在寻找的缓存行为以及动态刷新功能。Archaius 是围绕 Commons Configuration 构建的。

因此，与其继承 DatabaseConfiguration，不如使用 Archaius 的 DynamicConfiguration，它扩展了 Commons 的 AbstractConfiguration。此类将缓存您想要的任何源，并以您使用其轮询调度类指定的时间间隔刷新属性。

您必须实现的唯一类是 PolledConfigurationSource，它从数据库中提取数据并将其放置在 Map 中。应该很简单。

[https://github.com/Netflix/archaius/wiki/Users-Guide](https://github.com/Netflix/archaius/wiki/Users-Guide)

# json - 在 Javascript 中从 JSONPath 创建 JSON

> ID：15334232
> 
> 赞同：3
> 
> 时间：2013-03-11T08:40:25.600
> 
> 标签：json, jsonpath

我是 Javascript 世界的新手，需要对 JSONPath 进行一些说明。 [http://goessner.net/articles/JsonPath/](http://goessner.net/articles/JsonPath/)

我了解 JSONPath 用于解析 JSON 结构并获取特定值。我的问题是，是否有可能扭转这种行为？例如，假设我在文章中给出的表格/网格中显示“商店”中的“书籍”列表，并且单击时我有一个“创建”按钮，获取“类别”、“作者”的输入'、'标题'、'isbn' 和'价格'。现在我知道了这些输入元素的 JSONPaths。是否可以使用给定的 JSONPaths 创建 JSON 结构？有什么工具可以做到这一点吗？还是我只是缺少一些基本的东西？

问候 BK

# android - Facebook SDK 3登录按钮点击识别

> ID：15334236
> 
> 赞同：3
> 
> 时间：2013-03-11T08:40:49.130
> 
> 标签：android, facebook, facebook-android-sdk

我正在使用`com.facebook.widget.LoginButton`组件登录 Facebook：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.splash, container, false);
    LoginButton authButton = (LoginButton) view.findViewById(R.id.login_button);
    stat = (TextView) view.findViewById(R.id.profile_name);
    //authButton.setFragment(this);
    authButton.setReadPermissions(Arrays.asList("user_likes", "user_status",
            "user_status", "user_events", "friends_events"));

    return view;
} 
```

我想提示用户他的登录状态，所以我需要在按下 Facebook 的按钮时更改文本视图。

但我似乎无法找到一种方法来识别用户的点击，而无需更改 Facebook 的库或覆盖`LoginButton`本机侦听器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T16:50:55.343

我在尝试为我的应用程序实现登录库时遇到了同样的问题。到目前为止，我发现的解决方案仍然不确定它是否是最好的，将facebook-sdk 中的*LoginClickListener类从**private*更改为*public*，所以我可以覆盖我的 Activity 上的*onClick*方法。这是我更改的行。

从：

```
private class LoginClickListener implements OnClickListener {
    @Override
    public void onClick(View v) {
        ... 
```

至：

```
public class LoginClickListener implements OnClickListener {
    @Override
    public void onClick(View v) {
        ... 
```

然后在我的活动中，我可以覆盖 onClick 方法。

```
LoginButton facebookButton = (LoginButton) findViewById(R.id.authButton);
facebookButton.setOnClickListener( facebookButton.new LoginClickListener(){
    @Override
    public void onClick(View v) {
        //Do whatever u want
        super.onClick(v);
    }
}); 
```

祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-06T11:25:12.273

而不是试图覆盖该`onclick`方法或更改 Facebook 的库。您可以使用`SessionState`来检测是否`loginButton`已单击。当`SessionState`OPENING 表示该按钮已被单击

```
private Session.StatusCallback fBcallback = new Session.StatusCallback() {
    @Override
    public void call(Session session, SessionState state,
            Exception exception) {
        Session fbSession = session;

        Log.e(this.getClass().getName(), "fbSession isNULL "
                + (fbSession == null));

        Log.e(this.getClass().getName(),
                "fbSession state:" + fbSession.getState() + "");

        switch (fbSession.getState()) {
        case CLOSED:
            Log.e(this.getClass().getName(), "CLOSED");

            break;
        case CLOSED_LOGIN_FAILED:
            Log.e(this.getClass().getName(), "CLOSED LOGIN FAILED");

            authButton.setVisibility(View.VISIBLE);
            rl.setVisibility(View.GONE);
            break;
        case CREATED:
            Log.e(this.getClass().getName(), "CREATED");

            break;
        case CREATED_TOKEN_LOADED:
            Log.e(this.getClass().getName(), "CREATED TOKEN LOADED");

            break;
        case OPENED:
            Log.e(this.getClass().getName(), "OPENED");

            break;
        case OPENED_TOKEN_UPDATED:
            Log.e(this.getClass().getName(), "OPENED TOKEN UPDATED");

            break;
        case OPENING:
            Log.e(this.getClass().getName(), "OPENING");

            authButton.setVisibility(View.GONE);
            rl.setVisibility(View.VISIBLE);
            break;
        }

        if (fbSession.isOpened()) {
            Log.e(this.getClass().getName(), "fbSession is opened");

            getFBUserData();
        }
        if (fbSession.isClosed()) {
            Log.e(this.getClass().getName(), "fbSession is closed, logout");
            Token.removeToken(mActivity);
        }
    }

}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T16:14:48.420

查看`HelloFacebookSample`. 他们正在那里做类似的事情。

```
loginButton.setUserInfoChangedCallback(new LoginButton.UserInfoChangedCallback() {
    @Override
    public void onUserInfoFetched(GraphUser user) {
        updateUI(user);
    }
}); 
```

然后在`updateUI()`方法中

```
private void updateUI(GraphUser user) {
    Session session = Session.getActiveSession();
    if (session != null && session.isOpened() && user != null) {
        mTextView.setText(user.getFirstName());
    }
} 
```

如果您关心连接会话（详见示例），那么即使用户退出应用程序，用户登录状态也将保持不变。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-16T13:55:52.880

我没有重载 LoginButton，而是使用了图像背景。虽然默认情况下文本不会完全对齐，但使用边距会有所帮助。

```
Button fbBtn = (Button)findViewById(R.id.fbLogin) ;
if( fbBtn != null )
{
    fbBtn.setBackgroundDrawable(getResources().getDrawable(R.drawable.com_facebook_loginbutton_blue) ) ;
    fbBtn.setText( R.string.prompt_login_yes ) ;
    fbBtn.setTextColor( getResources().getColor(R.color.com_facebook_loginview_text_color) ) ;
    fbBtn.setTextSize( 16 ) ;
    fbBtn.setVisibility(View.VISIBLE) ;
} 
```

# facebook - 在 Android 中以编程方式在 Google 日历中同步 Facebook 事件

> ID：15334240
> 
> 赞同：4
> 
> 时间：2013-03-11T08:41:04.087
> 
> 标签：facebook

如何使用 Android**在 Google 日历中导入 Facebook 事件**，我制作了一个应用程序，在其中我正在*获取 facebook 朋友列表以及他们的姓名、个人资料图片和生日*，但现在**我想在 Google 日历中显示所有即将到来的 facebook 事件**......

请告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T21:53:13.387

简单的答案：安装 Facebook 应用程序

如果您想以编程方式执行此操作，或者希望能够查看网络日历上的事件，则需要使用 Google 日历 API [https://developers.google.com/google-将 Facebook 事件推送到您的 Google 日历中应用程序/日历/](https://developers.google.com/google-apps/calendar/)

# php - CodeIgniter，Ajax 调用不进入控制器

> ID：15334244
> 
> 赞同：1
> 
> 时间：2013-03-11T08:41:34.197
> 
> 标签：php, codeigniter, jquery, codeigniter-2

查看关于[ci-ajax-csrf-problem](https://stackoverflow.com/questions/7348383/codeigniter-ajax-csrf-problem)的解决方案后，我在脚本中添加了以下行，它工作正常。

```
var post_data = {
    '<?php echo $this->security->get_csrf_token_name(); ?>' : '<?php echo $this->security->get_csrf_hash(); ?>'
} 
```

插入

```
$.ajax({
        url: '<?php echo base_url()."ajax/test";?>',
        type:'POST',
        dataType: 'json',
        data: post_data, 
```

谢谢大家的帮助：）

我是 Ajax/Jquery 的新手，并且正在遵循[jorge torres](http://www.jotorres.com/2012/01/using-jquery-and-ajax-with-codeigniter/)的 Ajax for CodeIgniter 指南在我的网站上实现一个简单的 ajax 调用并遇到了问题。

我创建了一个控制器 Ajax，这是代码片段。

```
class Ajax extends CI_Controller {

    public function __construct() {
        parent::__construct();
    }

    public function test() {
        $output_string = 'This is a test';  
        echo json_encode($output_string);
    }

    public function test2(){
        $this->load->view('test.php');
    }
} 
```

这是该控制器的视图，它与教程中的视图相同，只是我添加了加载 url 帮助器 $this->load->helper('url'); 在第一行

这是脚本代码的片段。

#getdata 是按钮类型，#result_table 是 div

```
$('#getdata').click(function(){
$.ajax({
        url: '<?php echo base_url().'ajax/test';?>',
        type:'POST',
        dataType: 'json',
        success: function(output_string){
                $('#result_table').append(output_string);
            } // End of success function of ajax form
        }); // End of ajax call
}); 
```

我可以成功访问*localhost.com/codeigniter/ajax/test2*但是当我单击按钮时，什么也没有发生。

我尝试查看页面源信息，并且 url 是正确的

```
$.ajax({
        url: 'http://localhost/codeigniter/ajax/test',
        type:'POST'
        .... 
```

也可以直接访问*localhost/codeigniter/ajax/test并显示输出消息。*

我正在使用 CodeIgniter 2.1.3，我的本地主机在 XAMPP 1.7.3 上运行

先感谢您 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T02:01:22.147

查看关于[ci-ajax-csrf-problem](https://stackoverflow.com/questions/7348383/codeigniter-ajax-csrf-problem)的解决方案后，我在脚本中添加了以下行，它工作正常。

```
var post_data = {
    '<?php echo $this->security->get_csrf_token_name(); ?>' : '<?php echo $this->security->get_csrf_hash(); ?>'
} 
```

插入

```
$.ajax({
        url: '<?php echo base_url()."ajax/test";?>',
        type:'POST',
        dataType: 'json',
        data: post_data, 
```

谢谢大家的帮助：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:55:39.283

我认为您的 ajax 调用有问题。我认为应该是这样的：

```
$(document).ready (function () { 
   $('#getdata').click(function(){
     $.ajax({
        url: '<?php echo base_url()."ajax/test";?>',
        type:'POST',
        dataType: 'json',
        success: function(output_string){
                $('#result_table').append(output_string);
            } // End of success function of ajax form
        }); // End of ajax call
    });
}); 
```

如果 firebug 控制台显示不允许执行您需要的操作，则可能是 CSRF 令牌问题，请在 codeigniter 配置中将其关闭。

在配置文件中添加这个。

```
$config['csrf_protection'] = FALSE; 
```

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:06:38.807

您的 .click() 事件处理程序是否按预期工作？

```
$('#getdata').click(function(){
 alert('clicked');
 ........ 
```

如果不是，请尝试`in $(document).ready(function() { ... });`按照@Sudhir 的建议包装 jquery 代码：

```
$(document).ready( function() { 
      $('#getdata').click(function(){
      alert('clicked');
      ........

}); 
```

如果是，如果您还不知道，有一个名为[firebug](http://getfirebug.com/)的工具可以检查您的 AJAX 请求。我认为您的 AJAX 网址没有问题。到目前为止，这是我的答案。希望这也有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T09:11:01.753

您的 config.php 中是否启用了输出压缩（gzip）？如果您压缩输出，当您使用 echo 并返回 500 服务器错误时，它将失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T09:29:13.503

你有没有尝试过

```
$(document).ready (function () { 
   $('#getdata').click(function(){
     $.ajax({
        url: '/ajax/test',
        type:'POST',
        dataType: 'json',
        success: function(output_string){
                $('#result_table').append(output_string);
            } // End of success function of ajax form
        }); // End of ajax call
    });
}); 
```

相对于`<?php base_url; ?>`

您是否在 CI 配置中输入了您的站点 URL？

# ios - 请帮助我处理基于块的回调

> ID：15334245
> 
> 赞同：3
> 
> 时间：2013-03-11T08:41:35.647
> 
> 标签：ios, objective-c, ios5, ios6, objective-c-blocks

我对基于块的回调不了解。我似乎知道有两种方法，我不知道什么时候应该使用另一种，所以有人可以向我解释这两种方法之间的区别，纠正我并在需要时给我一些提示任何。

我从 stackoverflow 以及其他地方的库中找到了一些代码，因此感谢编写此代码的人。

```
typedef void (^MyClickedIndexBlock)(NSInteger index);
@interface YourInterface : YourSuperClass
@property (nonatomic, strong) MyClickedIndexBlock clickedIndexBlock

.m
//where you have to call the block
if (self.clickedIndexBlock != nil) {self.clickedIndexBlock(buttonIndex)};

// where you want to receive the callback
alert.clickedIndexBlock = ^(NSInteger index){NSLog(@"%d", index);}; 
```

我对上述内容的理解是：

1.  MyClickedIndexBlock 是 NSInteger 的 typedef。以 MyClickedIndexBlock 类型的名称“clickedIndexBlock”创建的属性（意味着 clickedIndexBlock 可以是一个数字）。

2.  块也可以用作方法，这就是为什么我可以调用 self.clickedIndexBlock(buttonIndex);

但是有些东西告诉我，这种作为@property 的方法只真正支持一个参数，例如。NS 整数。

鉴于以下方法允许使用多个参数。

蓝牙Me.h

```
typedef void (^hardwareStatusBlock)(CBPeripheral *peripheral, BLUETOOTH_STATUS status, NSError *error);

- (void)hardwareResponse:(hardwareStatusBlock)block; 
```

蓝牙Me.m

```
- (void)hardwareResponse:(hardwareStatusBlock)block {
privateBlock = [block copy]; 
}

- (void)centralManager:(CBCentralManager *)central didConnectPeripheral:(CBPeripheral *)peripheral {
NSLog(@"Did connect to peripheral: %@", peripheral);

privateBlock(peripheral, BLUETOOTH_STATUS_CONNECTED, nil);

NSLog(@"Connected");
[peripheral setDelegate:self];
[peripheral discoverServices:nil];
 } 
```

我的理解是创建一个强大的属性并执行 [块复制] 将保留该块，直到应用程序终止。所以 [block copy] 和 strong 都保留。[块复制] 应用于块以保留，否则当方法超出范围时块将消失。

视图控制器.m

```
[instance hardwareResponse:^(CBPeripheral *peripheral, BLUETOOTH_STATUS status, NSError *error) {

    if (status == BLUETOOTH_STATUS_CONNECTED)
    {
        NSLog(@"connected!");
    }
    else if (status == BLUETOOTH_STATUS_FAIL_TO_CONNECT)
    {
        NSLog(@"fail to connect!");
    }
    else
    {
        NSLog(@"disconnected!");
    }

    NSLog(@"CBUUID: %@, ERROR: %@", (NSString *)peripheral.UUID, error.localizedDescription);
}]; 
```

那么让我们看看我的问题是什么：

1）我什么时候会选择第一种方法而不是第二种方法，反之亦然？

2）第一个例子，块是一个属性的类型定义。第二个例子，块被声明为一个方法。为什么第一个示例不能声明为方法，为什么第二个示例不能为属性的 typedef？

3) 我需要为我想要基于块的回调的每种类型的委托方法创建一个 typedef 吗？

4) 迄今为止，我只看到支持一种委托方法。如果我要在多个不相似的委托方法上创建基于块的回调，您能否向我展示一个如何实现每种方法的示例。

感谢您的反馈。这有时很难。需要尽可能多的帮助。谢谢，

本

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T09:51:07.247

问题

*   不管是`typedef`不是阻塞，
*   是否将属性用于块，
*   一个块是否有一个或多个参数，

是*完全独立*的（或*正交*的）。所有组合都是可能的并且是允许的。

```
void (^myClickedIndexBlock)(NSInteger index); 
```

声明一个`myClickedIndexBlock`采用整数参数并返回 void 的块变量。`typedef`如果您的程序中重复出现相同的块类型，您可以使用：

```
// Define MyClickedIndexBlock as *type* of a block taking an integer argument and returning void:
typedef void (^MyClickedIndexBlock)(NSInteger index);
// Declare myClickedIndexBlock as a *variable* of that type:
MyClickedIndexBlock myClickedIndexBlock; 
```

有多个参数：

```
void (^privateBlock)(CBPeripheral *peripheral, BLUETOOTH_STATUS status, NSError *error); 
```

或者

```
typedef void (^hardwareStatusBlock)(CBPeripheral *peripheral, BLUETOOTH_STATUS status, NSError *error);
hardwareStatusBlock privateBlock; 
```

您可以使用属性来代替（实例）变量。在第一个示例中：

```
@property (nonatomic, copy) void (^myClickedIndexBlock)(NSInteger index); 
```

声明`myClickedIndexBlock`为块属性，等效于

```
typedef void (^MyClickedIndexBlock)(NSInteger index);
@property (nonatomic, copy) MyClickedIndexBlock clickedIndexBlock; 
```

与您的假设相反，块属性不限于具有单个参数的块。您也可以在第二个示例中使用属性，无论是否使用 typedef：

```
@property (nonatomic, copy) void (^privateBlock)(CBPeripheral *peripheral, BLUETOOTH_STATUS status, NSError *error); 
```

或者

```
typedef void (^hardwareStatusBlock)(CBPeripheral *peripheral, BLUETOOTH_STATUS status, NSError *error);
@property (nonatomic, copy) privateBlock; 
```

您可以选择是否使用块的实例变量或属性。我会使用属性（带有“复制”属性）。

是否 typedef 纯粹是个人喜好问题。如果您的程序中重复出现相同的块类型，这有助于避免错误。另一方面，Xcode 自动补全似乎在没有 typedef 的情况下工作得更好（根据我的经验）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T09:51:53.380

我强烈建议您阅读[Blocks Programming Guide](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/00_Introduction.html)。

块不是方法。我不打算解释[概念概述](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxOverview.html#//apple_ref/doc/uid/TP40007502-CH3-SW1)中所说的内容，而只是引用一些部分：

> 块通常代表小的、独立的代码片段。[...]
> 它们允许您在调用点编写代码，稍后在方法实现的上下文中执行。

您似乎对语法感到困惑。

```
typedef void (^MyClickedIndexBlock)(NSInteger index); 
```

它基本上只是定义了一个名为*MyClickedIndexBlock*的类型，它表示一个块，该块采用 NSInteger 类型的单个参数并且不返回任何内容（void）。
它**不是**NSInteger 的 typedef。

```
@property (nonatomic, strong) MyClickedIndexBlock clickedIndexBlock 
```

是一个将包含 MyClickedIndexBlock 的属性的声明。
不需要 typedef 块，编写它是完全有效的

```
@property (nonatomic, strong) void(^clickedIndexBlock)(NSInteger index); 
```

但为了清楚起见（或重用），您可以选择对它们进行 typedef。请注意，属性名称是`^`.

您说块可以用作方法，因为可以`self.clickedIndexBlock(buttonIndex)`在您的示例中调用。但实际上，正是因为你声明了一个名为的属性`clickedIndexBlock`，你才可以这样调用它。

你的问题有很多，但很大一部分是由于混淆和误解。您提到的两种方法并没有真正的不同。块是对象，可以像处理 NSString 或其他类型的对象一样作为参数、局部变量或 ivars / 属性进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:55:08.603

1）该块不是类型定义为整数。它是 typedef 的返回 void 并且有一个整数参数。精神 1 或方法 2 没有优势；如果声明它们都可以有多个参数。

2) 没有理由为这两种情况选择该格式。它们都达到了相同的结果，但第一个在语义上可以说更好。

3) 不可以。您可以将块内联声明到方法中。查看标题以`[NSArray enumerateObjectsUsingBlock:]`获取内联块声明的示例。

4）您可以创建多个属性并在必要时调用每个不同的块。

# jquery - IE8中的fancybox错误

> ID：15334247
> 
> 赞同：0
> 
> 时间：2013-03-11T08:41:38.113
> 
> 标签：jquery, asp.net-mvc-3, internet-explorer-8, fancybox, ie8-compatibility-mode

我是MVC 3 的新用户，这个fancybox 让我头疼。在我的本地计算机上进行测试期间，它甚至在firefox、chrome 和IE 中运行良好。但是在我将它发布到我们的测试服务器后，它在 IE 中出现错误，指出：用户代理：Mozilla/4.0（兼容；MSIE 8.0；Windows NT 5.1；Trident/4.0；GTB7.0；BTRS102579；.NET CLR 3.0。 04506.648；.NET CLR 3.5.21022；.NET CLR 3.0.4506.2152；.NET CLR 3.5.30729；.NET CLR 2.0.50727；.NET4.0C；.NET4.0E)

消息：预期对象行：1 字符：1 代码：0 URI：`http://ptywebsite-dev/Scripts/admin.js`

消息：未实现行：146 字符：427 代码：0 URI：`http://ptywebsite-dev/Scripts/jquery-1.4.4.min.js`

我使用了 IE8、jquery.fancybox-1.2.1.js 和 jquery-1.4.4.min.js。

下面是我的脚本：

```
<script type="text/javascript">
      $(document).ready(function () {
          /* This is basic - uses default settings */
          $(".single_image").fancybox({
                'padding': 0,
                'type': 'iframe',
                'frameHeight': 279,                
                'centerOnScroll': true,
                'onComplete': function () {
                    $("#fancybox-frame").load(function () { //wait for frame to load and get its height
                        $("#fancybox-content").height($(this).contents().find('body').height() + 30)
                    });
                }
          });
          /* Using custom settings */
          $("a#inline").fancybox({ 'hideOnContentClick': true });
          $("a.group").fancybox({ 'zoomSpeedIn': 300, 'zoomSpeedOut': 300, 'overlayShow': false });

      });
 </script> 
```

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:00:16.207

```
$("#fancybox-content").height($(this).contents().find('body').height() + 30) 
```

您没有分号来终止该行。不确定这是否是问题所在，但 IE 8 及以下版本对这类东西非常挑剔，所以可能是这样。

[当旧版本的 IE 出现问题时，通过http://www.jshint.com/](http://www.jshint.com/)运行代码会很有用

# ruby-on-rails - 将一种属性收集到一个数组中，仅当存在时

> ID：15334248
> 
> 赞同：0
> 
> 时间：2013-03-11T08:41:40.327
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

所以我的问题是，有一个 Object.weight。

我想找到 user_id 为@user.id 的所有对象，然后将所有 Object.weight 属性放入一个数组中，只有其中属性不为零。

喜欢

```
@o = Object.find.where(:user_id => @user.id)
@a << @o.weight.where(:weight true) 
```

然后我想用“，”分隔符列出数组中的所有内容。

一切顺利！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:44:15.570

```
Object.where(:user_id => @user.id).collect(&:weight).compact 
```

`collect`从 Arrays Items 中获取所有元素并从数组`compact`中删除所有`nil`对象。

对于视图：

```
arr.join(", ") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:44:52.027

尝试

```
@weights = Record.where(user_id: @user.id).where('weight IS NOT NULL').map(&:weight)
puts @weights.join(',') 
```

# c++ - 与 C++ CLI 等效的 C# 代码之后的内容

> ID：15334250
> 
> 赞同：0
> 
> 时间：2013-03-11T08:41:41.777
> 
> 标签：c++, visual-c++, c++-cli

在 C# 中

```
public class cls {
    public static void met() {
    }
} 
```

我想要它在 C++ CLI 中。该方法`met`对减速为 的变量不可见`cls`。

我应该能够：

```
cls::met(); 
```

我不应该能够：

```
cls z;
z.met(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:10:30.500

```
namespace cls {
    void met() {
    }
} 
```

欢迎使用 C++，享受您的逗留。

# c# - 如何通过UpLoad File控件ASP.NET将文件从本地机器上传到其他机器？

> ID：15334251
> 
> 赞同：1
> 
> 时间：2013-03-11T08:41:44.513
> 
> 标签：c#, asp.net, code-behind

我在本地机器上有一个文件。我想使用 ASP.NET 的上传文件控件上传到其他机器。这台机器是在 VMWare 软件上运行的 CentOS。

**HTML**

```
<body>
    <form id="form1" runat="server" enctype="multipart/form-data">
<asp:FileUpload ID="FileUpload1" runat="server" ToolTip="Select Only Excel File" />
 <asp:Button runat="server" ID="btnUpload" OnClick="btnUploadClick" Text="Upload" />
</form> 
```

**代码隐藏**

```
public void ftpfile(string ftpfilepath, string inputfilepath)
        {
            ftpfilepath = "/jetnexus";
            string ftphost = "192.168.2.19";
            //here correct hostname or IP of the ftp server to be given
            string ftpfullpath = "ftp://" + ftphost + ftpfilepath;
            FtpWebRequest ftp = (FtpWebRequest)FtpWebRequest.Create(ftpfullpath);
            ftp.Credentials = new NetworkCredential("root", "jetnexus");
            //userid and password for the ftp server to given

            ftp.KeepAlive = true;
            ftp.UseBinary = true;
            ftp.Method = WebRequestMethods.Ftp.UploadFile;
            FileStream fs = File.OpenRead(inputfilepath);
            byte[] buffer = new byte[fs.Length];
            fs.Read(buffer, 0, buffer.Length);
            fs.Close();
            Stream ftpstream = ftp.GetRequestStream();
            ftpstream.Write(buffer, 0, buffer.Length);
            ftpstream.Close();
        } 
```

# google-maps - 在谷歌地图上显示输出=嵌入的图层

> ID：15334255
> 
> 赞同：0
> 
> 时间：2013-03-11T08:41:58.893
> 
> 标签：google-maps, google-maps-api-3

我目前正在为 WPF 使用 output=embed url 为我需要的地图开发一个轻量级的 WPF 控件。

我对地图控制有 2 个目的，一个是获取加拿大邮政编码的 FSA 边界，并显示给定地址的交通状况，用于现场代理的预约跟踪系统，即
FSA [https://maps.google.com/maps? q=m3j%20canada](https://maps.google.com/maps?q=m3j%20canada)
邮政编码：[https ://maps.google.com/maps?q=M3A%201A3%20canada](https://maps.google.com/maps?q=M3A%201A3%20canada)

它显示在对常规 Google 地图的查询中，但是一旦将 output=embed 添加到 url，边界就会从地图中消失

有没有办法将这些包含在嵌入式地图中，或者这是嵌入式地图的限制？如果是这样，这个功能是否适用于 javascript api

# ruby-on-rails - Rails 2.3.8 Gem 将 IP 地址列入白名单

> ID：15334263
> 
> 赞同：0
> 
> 时间：2013-03-11T08:42:25.973
> 
> 标签：ruby-on-rails

我正在做一个 Rails 2.3.8 应用程序，我想在其中将 IP 地址列入白名单。是否有任何宝石可以将 IP 地址列入白名单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:56:00.387

查看 gem [rack-ip-whitelist](http://rubygems.org/gems/rack-ip-whitelist)。

该宝石的来源可用，其中包含 -

> “需要包含访问一组 IP 地址（白名单）的网站的机架中间件。在这些地址之外，访问者会显示 403 禁止页面。”

[http://rubydoc.info/gems/rack-ip-whitelist/0.0.2/frames](http://rubydoc.info/gems/rack-ip-whitelist/0.0.2/frames)

# jsf - 持久化由 JSF 组件转换器创建的 EJB 实体时如何避免重复的 DB 内容？

> ID：15334264
> 
> 赞同：3
> 
> 时间：2013-03-11T08:42:25.917
> 
> 标签：jsf, jsf-2, ejb, ejb-3.0

我有一个名为 inputPeriod 的自定义 JSF 输入组件，它旨在输入日期周期。每个时期都有一个从和到日期。组件的功能是通过 Javascript 实现的，它会生成一个 JSON 字符串并将其提交给组件。输入组件然后使用默认转换器将 JSON 周期转换为 Period 对象列表并将它们设置在我的托管 bean 上。这一切都完美无缺。

我遇到的问题的根源是，现在我想将相同的组件与 EJB 实体一起使用。我有一个与 BannerPeriod 实体具有一对多关系的 Banner 实体。BannerPeriod 实体的每个实例都有一个 from（开始）和 to（结束）日期，就像我在输入组件中使用的现有 Period 对象一样。我为此实现了一个新的转换器：

```
@ManagedBean
@RequestScoped
public class BannerPeriodConverter implements Converter {

    @Override
    public Object getAsObject(FacesContext fc, UIComponent uic, String str) {
        if (str != null) {
            Date from = null, to = null;
            try {
                JSONObject period = new JSONObject(str);
                if (period.has("from")) {
                    from = new Date(period.getLong("from"));
                }
                if (period.has("to")) {
                    to = new Date(period.getLong("to"));
                }
            } catch (JSONException ex) {
                throw new ConverterException(ex);
            }
            BannerPeriod bp = new BannerPeriod();
            bp.setBegins(from);
            bp.setEnds(to);
            return bp;
        }
        return null;
    }

    @Override
    public String getAsString(FacesContext fc, UIComponent uic, Object o) {
        if (o != null && o instanceof BannerPeriod) {
            BannerPeriod bp = (BannerPeriod) o;
            JSONObject period = new JSONObject();
            try {
                period.put("from", bp.getBegins() != null ? bp.getBegins().getTime() : (Object) null);
                period.put("to", bp.getEnds() != null ? bp.getEnds().getTime() : (Object) null);
            } catch (JSONException ex) {
                throw new ConverterException(ex);
            }
            return period.toString();
        }
        return "";
    }
} 
```

转换器与组件配合良好。我遇到的问题是，当我编辑具有现有横幅时段的横幅时，实体会丢失其主键。因此，当我提交表单时，我没有更新现有期间，而是得到一个重复的异常，或者再次创建现有期间，在数据库中进行实际重复。

所以我的问题是，我能做些什么来避免这种情况？我的猜测是输入组件需要以某种方式保留现有实体上的主键，但我怎样才能最好地制作这样的东西呢？目前，输入组件与实体和我的 EJB 项目完全分离。输入组件甚至位于它自己的 JSF 项目中，而上面的转换器位于 EJB 项目中。默认情况下，输入组件使用纯 Period 对象，该对象根本没有主键。它应该继续这样做。

或者也许这应该以其他方式解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:30:12.307

在您`getAsObject()`中，您正在创建一个完全非托管的实例，`BannerPeriod`而不是通过 JPA 直接从 DB 获取一个。

```
BannerPeriod bp = new BannerPeriod();
bp.setBegins(from);
bp.setEnds(to);
return bp; 
```

坚持它当然会在 DB 中创建一个新条目，因为它不受 JPA 管理。

基本上，您应该改为通过 JPA 从数据库获取实例：

```
@EJB
private BannerPeriodService service;

public Object getAsObject(FacesContext context, UIComponent component, String value) {
    // ...

    return service.find(from, to);
} 
```

其中 通过`BannerPeriodService#find()`获得所需的实例`EntityManager`。

但这种方法相当笨拙。对于来自数据库的实体，规范的方法是为此使用它们的技术/自然标识符，例如自动生成的主键。

例如（省略 null/instanceof 检查等）：

```
@EJB
private BannerPeriodService service;

public Object getAsString(FacesContext context, UIComponent component, Object value) {
    Long id = ((BannerPeriod) value).getId();
    return id.toString();
}

public Object getAsObject(FacesContext context, UIComponent component, String value) {
    Long id = Long.valueOf(value);
    return service.find(id);
} 
```

无需弄乱 JSON 格式。如果出于某种不清楚的原因您*实际上*需要 JSON 格式的它们，那么您为此使用 JSF 转换器会走错方向。

我知道在转换器中访问数据库是一项相对昂贵的工作。在这种情况下，OmniFaces[`SelectItemsConverter`](http://showcase.omnifaces.org/converters/SelectItemsConverter)可能就是您正在寻找的。

# sql-server - SQL Server 存储过程对象存储在系统中的物理位置

> ID：15334266
> 
> 赞同：0
> 
> 时间：2013-03-11T08:42:31.970
> 
> 标签：sql-server, sql-server-2008-r2

我知道 SQL Server 存储过程存储在可编程性内部的文件夹中。但我想知道存储过程对象在物理系统中的存储位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:05:41.070

在[资源数据库](http://msdn.microsoft.com/en-us/library/ms190940.aspx)中：

> SQL Server 系统对象，例如 sys.objects，在物理上持久保存在 Resource 数据库中，但它们在逻辑上出现在每个数据库的 sys 架构中。

它们都是只读的，你不能直接访问资源数据库，所以都是学术的。你为什么想知道？

[对象目录视图](http://msdn.microsoft.com/en-us/library/ms189783.aspx)中提供了有关数据库对象的一般元数据。

# hibernate - 在同一张表上进行多项选择的休眠条件

> ID：15334269
> 
> 赞同：0
> 
> 时间：2013-03-11T08:42:39.670
> 
> 标签：hibernate, criteria, hibernate-criteria

我有一个案例，我需要找出不同版本的表的同一字段之间的差异。

例如：
我有一个名为 BankAccount 的表，其字段如下

> acount_no ， balance ， date 等。

现在我想要实现的基本上是在此表上针对两个不同的日期运行选择，并找出日期 1 和日期 2 的余额字段值之间的差异。

更像： `a.balance - b.balance as balance_difference`.

我知道，我可以使用一个作为独立标准来运行这两个选择，我至少可以获得两个日期之间的共同记录。我的问题是找到差异并在标准中使用“别名”，因为我以前从未这样做过，也无法从其他在线资源中理解或收集很多信息。
非常感谢任何帮助，并提前感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:09:57.120

根据我的理解，您想要实现的是`hql`以下内容

```
select (coalesce(case when a.date=?1 and a.account_no=?3 then a.balance end), 0) - coalesce(case when a.date=?2 and a.account_no=?3 then a.balance end), 0) AS balance_difference from BankAccount a 
```

# regex - 在 TCL 中使用正则表达式从数据包流中过滤 IP 和 MAC 地址

> ID：15334271
> 
> 赞同：0
> 
> 时间：2013-03-11T08:42:39.780
> 
> 标签：regex, tcl

我需要使用**TCL**的正则表达式从数据流中检查我的 src ip (11.1.1.1) 和 src mac addr (00:40:43:b9:32:94)，如下所示：

```
Frame 5603: 90 bytes on wire (720 bits), 90 bytes captured (720 bits)
Ethernet II, Src: NokiaSie_b9:32:94 (00:40:43:b9:32:94), Dst: OmronTat_53:6a:5b (00:00:0a:53:6a:5b)
802.1Q Virtual LAN, PRI: 0, CFI: 0, ID: 1
Internet Protocol Version 4, Src: 11.1.1.1 (11.1.1.1), Dst: 13.1.1.1 (13.1.1.1)
User Datagram Protocol, Src Port: 49184 (49184), Dst Port: 49152 (49152)
Data (44 bytes) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:02:04.083

干得好：

```
set data "
    Frame 5603: 90 bytes on wire (720 bits), 90 bytes captured (720 bits)
    Ethernet II, Src: NokiaSie_b9:32:94 (00:40:43:b9:32:94), Dst: OmronTat_53:6a:5b (00:00:0a:53:6a:5b)
    802.1Q Virtual LAN, PRI: 0, CFI: 0, ID: 1
    Internet Protocol Version 4, Src: 11.1.1.1 (11.1.1.1), Dst: 13.1.1.1 (13.1.1.1)
    User Datagram Protocol, Src Port: 49184 (49184), Dst Port: 49152 (49152)
    Data (44 bytes)
"
regexp {Src:.*?(\([^)]+\)).*?Src:.*?(\([^)]+\))} $data match mac ip
puts "mac = $mac"
puts "ip = $ip" 
```

输出：

```
mac = (00:40:43:b9:32:94)
ip = (11.1.1.1) 
```

# asp.net - ASP.NET C# (3.5) 成员资格，如何仅获得批准的用户？

> ID：15334273
> 
> 赞同：1
> 
> 时间：2013-03-11T08:42:50.280
> 
> 标签：asp.net, filter, membership

我只需要一个“已批准”用户的列表，但不知道如何弄清楚。

```
lstUsersNotInRole.DataSource = Membership.GetAllUsers(); // Get Approved Users Only!?!
lstUsersNotInRole.DataBind(); 
```

任何帮助将不胜感激。

卡多

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T09:18:10.720

无需深入研究数据库并更改/创建存储过程（并且由于您没有指定要使用的数据库），您可以使用 Linq 来做到这一点。尝试这个：

```
Membership.GetAllUsers().Cast<MembershipUser>().Where(u => u.IsApproved == true).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:53:17.380

您需要在存储过程中过滤已批准的用户并将结果返回给您的应用程序。

```
CREATE PROCEDURE dbo.Membership_GetActiveUsersInRoles

    @RoleName nvarchar(256)

AS

    BEGIN

        DECLARE @RoleId uniqueidentifier

        SELECT @RoleId = RoleId
        FROM dbo.aspnet_Roles
        WHERE LOWER(@RoleName) = LoweredRoleName

        SELECT u.UserName, u.UserId
        FROM dbo.aspnet_Users u, dbo.aspnet_UsersInRoles ur, dbo.aspnet_Membership m
        WHERE
        u.UserId = m.UserId AND
        u.UserId = ur.UserId AND
        @RoleId = ur.RoleId and
        m.IsApproved = 'true'
         -- You can also specify m.IsLockedOut = 'false' for other purposes

END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:54:07.383

如果您使用`SqlMembershipProvider`，您可以手动选择它们，可以是普通的 sql 语句（例如 via `ADO.NET`），也可以通过创建一个自定义存储过程来支持分页以及`ApplicationId`您可以在哪里参数化`IsApproved`。

```
SELECT  m.IsApproved, u.UserName, 
        m.Email, m.PasswordQuestion, m.Comment, 
        m.CreateDate, m.LastLoginDate, u.LastActivityDate,
        m.LastPasswordChangedDate, u.UserId, 
        m.IsLockedOut, m.LastLockoutDate
FROM   dbo.aspnet_Membership m, dbo.aspnet_Users u
WHERE  u.UserId = m.UserId 
AND    m.IsApproved = @IsApproved
ORDER BY u.UserName 
```

只需看一下`dbo.aspnet_Membership_GetAllUsers`，复制粘贴相关部分并进行相应修改。

# javascript - 我不明白在这种情况下排序方法是如何工作的，我认为它按字母顺序工作，但射线中的“aaaa”字不是......为什么？

> ID：15334276
> 
> 赞同：-2
> 
> 时间：2013-03-11T08:43:08.440
> 
> 标签：javascript, sorting, methods

```
<!DOCTYPE html>  
<html>
<body>    
  <p id="demo">Click the button to sort the array.</p>  
  <button onclick="myFunction()">Try it</button>  
  <script>
  function myFunction()
  {    
    var fruits = ["Banana", "Orange", "Apple", "Mango","aaaa"];
    fruits.sort();
    var x=document.getElementById("demo");
    x.innerHTML=fruits;
  }    
  </script>    
</body>    
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:19:49.847

排序是使用`charCode`字符串中的字符完成的。UTF8 和 ASCII 表在小写字母之前有大写字母：

```
"A".charCodeAt(0) == 65
"a".charCodeAt(0) == 97 
```

如果要执行不区分大小写的顺序，可以将比较函数传递给`sort`调用。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)

看看这个问题：

[如何在Javascript中执行不区分大小写的排序？](https://stackoverflow.com/questions/8996963/how-to-perform-case-insensitive-sorting-in-javascript)

# python - Kivy按钮文本对齐问题

> ID：15334280
> 
> 赞同：14
> 
> 时间：2013-03-11T08:43:26.293
> 
> 标签：python, kivy

我正在尝试在 Kivy 中开发一个电子邮件应用程序，基本上只是作为学习框架的进出的练习......我正在尝试创建初始窗口并且遇到了一个绊脚石！这个想法是，它只会在收件箱中显示电子邮件列表，就像移动设备上的任何基本电子邮件应用程序一样。

我遇到的问题是我无法弄清楚如何让每个列表项（这只是一个按钮）的文本正确对齐。在我的按钮中使用“halign='left'”将使文本左对齐，但仅相对于每个按钮；它仍然位于每个按钮的中心。

我的实际应用程序有点大，所以这是我从一个股票 Kivy 示例中制作的一个快速而肮脏的示例。（我意识到这段代码并不完美......就像我说的快速和肮脏的例子......它确实有效！）**所以你可以看到，每个按钮上的两行文本相互对齐，但是它们并非全部对齐。谁能建议我如何使所有文本在每个按钮左侧 10 像素处对齐？**我确实在 StackOverflow 上找到了一个相关的项目，但它并没有真正回答这个问题，例如，它似乎更多地处理在按钮上使用图像。我是 Kivy 的新手，但我已经通读了教程和文档，并在 Google 上进行了广泛的搜索 - 所以任何帮助都将不胜感激！

```
import kivy
kivy.require('1.0.8')

from kivy.app import App
from kivy.core.window import Window
from kivy.uix.button import Button
from kivy.uix.scrollview import ScrollView
from kivy.uix.gridlayout import GridLayout

import random

class ScrollViewApp(App):

    def build(self):
        # create a default grid layout with custom width/height
        layout = GridLayout(cols=1, spacing=10, size_hint=(None, None),
                            width=Window.width)

        # when we add children to the grid layout, its size doesn't change at
        # all. we need to ensure that the height will be the minimum required to
        # contain all the childs. (otherwise, we'll child outside the bounding
        # box of the childs)
        layout.bind(minimum_height=layout.setter('height'))

        # add button into that grid
        for i in range(30):
            btn = Button(text=str(i * random.random()) + '\n' + str(i * random.random()),
                         size=(300, 40),
                         size_hint=(None, None),
                         halign='left')
            layout.add_widget(btn)

        # create a scroll view, with a size < size of the grid
        root = ScrollView(size_hint=(None, None))
        root.size = (Window.width, Window.height)
        root.center = Window.center
        root.add_widget(layout)

        return root

if __name__ == '__main__':

    ScrollViewApp().run() 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-11T14:21:08.140

[Button](http://kivy.org/docs/api-kivy.uix.button.html#module-kivy.uix.button)的文档以“A Button is a Label”开头。即使对于没有明确提及其血统的[Widget](http://kivy.org/docs/api-kivy.uix.html)，您也应该记下相关 Widget的[API 文档中的第二行。](http://kivy.org/docs/api-kivy.uix.button.html#kivy.uix.button.Button)在这种情况下，“基础：kivy.uix.label.Label”。

这确定按钮继承自标签。（我明确提到这一点是因为查看基类的继承属性的这一部分有时对每个人来说都不是直观的）。

如果您查看文档中的标签，特别是[`halign`](http://kivy.org/docs/api-kivy.uix.label.html?highlight=text%20alignment#kivy.uix.label.Label.halign)属性，它会要求您利用它[`text_size`](http://kivy.org/docs/api-kivy.uix.label.html?highlight=text%20alignment#kivy.uix.label.Label.text_size)来实现正确的文本对齐。这意味着文本在[`text_size`](http://kivy.org/docs/api-kivy.uix.label.html?highlight=text%20alignment#kivy.uix.label.Label.text_size)属性设置的边界框内对齐。该属性可以设置为：

a) 小部件的大小。`text_size: self.size`

b) 小于小部件尺寸的尺寸（你要找的东西）`text_size: self.width - dp(10), self.height - dp(10)`

c) 一侧不受约束`text_size: self.width, None`

d) 或两者兼有`text_size: None, None`

e) 或受限于不同的 Widget`text_size: other_button.size`

使用的原因`text_size`是为了给用户更多的控制权。您还应该查看[textalign 示例](https://github.com/kivy/kivy/blob/master/examples/widgets/textalign.py)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T08:54:07.820

您需要设置`text_size`属性，例如：

```
btn.text_size = (290, 40) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-07-04T21:03:43.410

如果您想避免 中的数字`text.size`，请尝试以下操作：

`text_size: self.size`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-22T06:38:26.747

正如 qua-non 所解释的，**按钮是标签**，因此您可以查看标签属性以了解如何实现它。因为我没有看到太多这方面的内容，所以我想添加一小段代码，可以帮助其他程序员。
我将展示如何制作带有标签的按钮并调整里面的文本。

```
#disable multi-touch emulation
from kivy.config import Config
Config.set('input', 'mouse', 'mouse,multitouch_on_demand')
from kivy.app import App
from kivy.lang import Builder
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.button import Button
from kivy.uix.image import Image   
#--------------------------------------------------------------------
Builder.load_string("""
<RootWidget>:
  BoxLayout:
    orientation: 'vertical'
    padding: "10dp"

    BoxLayout:
      size_hint_y: 3
      Widget: # to fill the line from left

      Button:
        text: "Button"
        font_size: 40
        text_size: self.size     
        halign: 'center'
        valign: 'bottom'
        padding_y: 10

        #Adding Image you can comment this part    
        Image:
          source: 'img/calender1.png'
          center_x: self.parent.center_x
          center_y: self.parent.center_y +10

      Widget:# to fill the line from right

    BoxLayout:
      size_hint_y: 10    

""")
#-----------------------------------------------------------------------
class RootWidget(BoxLayout):
  pass

#-----------------------------------------------------------------------    
class MyApp(App):
    def build(self):
      return RootWidget()

if __name__ == '__main__':
    MyApp().run() 
```

主要部分在按钮中。您可以使用字体、对齐方式和填充来获得任何想要的结果。

```
Button:
    text: "Button"
    font_size: 40
    text_size: self.size     
    halign: 'center'
    valign: 'bottom'
    padding_y: 10 
```

# java - 在 Spring MVC 中使用 ApplicationContext.xml 创建的对象的生命周期

> ID：15334287
> 
> 赞同：3
> 
> 时间：2013-03-11T08:43:59.280
> 
> 标签：java, spring, jakarta-ee, spring-mvc, object-lifetime

我是春季应用程序的新手...

我想知道，使用`applicationcontext.xml`文件创建的对象什么时候会被销毁？..

即，我想知道`applicationcontext.xml`文件创建的对象的生命周期...

我在谷歌搜索中尝试了很多，但我无法找到解决方案。所有建议都针对 bean 的范围。这个范围决定了生命周期吗？

如何找出对象的生命周期以及它何时在 Spring MVC 中被销毁？...

在此先感谢，并希望很快得到解决...请帮帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:49:03.093

当 applicationContext 关闭时，Spring 将销毁对象（仅单例）。

来自[**文档**](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/factory/DisposableBean.html)

> 如果 BeanFactory 释放缓存的单例，则应该调用 destroy 方法。应用程序上下文应该在关闭时处理其所有单例。

来自 Spring 团队成员的评论

> 需要注意的一点是，Spring 不跟踪原型/作用域 bean - 它只跟踪单例，因此，destroy 方法将**仅在单例上调用。**

来源： http: [//forum.springsource.org/showthread.php?32253-When-will-the-bean-s-destroy-method-be-invoked](http://forum.springsource.org/showthread.php?32253-When-will-the-bean-s-destroy-method-be-invoked)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:48:33.457

是的，范围决定了生命周期。查看可用的不同[bean 范围](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s04.html)

# asp.net - 使用具有多个条件的 XMLNode(.Net) 获取 XML 节点

> ID：15334288
> 
> 赞同：1
> 
> 时间：2013-03-11T08:43:59.263
> 
> 标签：asp.net, xml, xmlnode

我的 XML 格式是这样的。

```
<Rule id="MyRule">
      <SubRule type="min" id="50" />
</Rule> 
```

***我编写了获取id***大于等于***50***的每个节点的路径

 *```
Rule[@id='MyRule']/subrule[@type='min' and @id>='50'] 
```

但我没有得到我想要的，它只是返回了所有节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:40:32.203

您是否尝试过以下操作（更改 SubRule 和字符串比较的大小写）？

```
Rule[@id='MyRule']/SubRule[@type='min' and compare(@id,'50')>=0] 
```

你所有的数字都是两位数吗？（我猜 '7' > '50', '100' < '50' ）

如果你只是想比较数字，你可以试试

```
Rule[@id='MyRule']/SubRule[@type='min' and number(@id)>=50] 
```*

# java - 等待进程和读取流之间的并发问题？

> ID：15334297
> 
> 赞同：7
> 
> 时间：2013-03-11T08:44:38.687
> 
> 标签：java, multithreading, outputstream, executorservice, processbuilder

我使用 a`ProcessBuilder`来运行进程。`Executors.newCachedThreadPool()`我通过在线程池 ( )中提交相应的可运行对象来处理输入/输出流。
我得到了结果，但时不时地我什么也得不到。
例如，如果我这样做：`cmd \C dir`对于流程构建器，我得到了`dir`返回的结果，但有时我什么也没得到（尽管结果似乎从处理`process.getInputStream`.
我该如何调试呢？它间歇性地出现。使用相同的代码时，我没有任何问题`new Thread(runnable).start()`。它在我切换到线程池后开始发生。

**更新：**
我想我发现了一些东西：
我在`Runnable`：

```
 try {  
    while ( (line = br.readLine()) != null) {  
            pw.println(line);  
                sb.append(line);   
    }  
    System.out.println("Finished reading "+sb.length());  
} catch (IOException e) {             
    e.printStackTrace();  
}  
finally{  
   pw.flush();     
  try{
    isr.close();  
  }catch(Exception e){}  
} 
```

在不起作用的情况下，它会打印`Finished reading 521`. 但我尝试通过`pw`and not得到结果`sb`。
`pw`是 PrintWriter pw = PrintWriter(outputStream);` 我在 runnable 中传递的

**更新 2：**
似乎：在处理输入流的可运行对象完成**之前**`status = process.waitFor();`返回。这怎么可能发生？ 我在 javadoc 中阅读：. 那么这是否意味着我可以在使用 I/O 流 *之前返回？* **`the calling thread will be blocked until the subprocess exits`**

 *****更新 3：在**[Ruby](http://jira.codehaus.org/browse/GROOVY-3275)
中似乎是同样的问题， 即**在进程结束和消耗输出之间存在一些竞争条件**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:21:32.753

是的。进程之间的 stdio 被缓冲（通常是 4KB 缓冲区）。处理 A 写入缓冲区并存在。进程 B 有两个线程；一个等待 A 结束，另一个从 A 读取输出。无法确定哪个线程先执行。

`process.waitFor();`因此，在读取所有缓冲输出之前返回是可能的（即使有很多输出时也是如此） 。

请注意，刷新在这里没有帮助，因为它只是确保 A 已*写入*所有内容。没有办法“强制”B以类似的方式读取数据。

因此，您应该记住退出状态，并且仅当您从输入流中读取 EOF 时，才将进程视为“完全终止”。

**EDIT** One solution would be to move the `waitFor()` into the stream gobbler and convert the gobbler into a `Callable` which you could then submit to the executor and use the `Future` API ([example](https://blogs.oracle.com/CoreJavaTechTips/entry/get_netbeans_6)) to get the result(s).*****

# oracle - PL/SQL 函数返回无值

> ID：15334301
> 
> 赞同：2
> 
> 时间：2013-03-11T08:44:48.570
> 
> 标签：oracle, function, plsql, oracle11g

我在下面写`FUNCTION`了检查给定`reference number`是否存在。

```
FUNCTION find_reference_no(
    p_ref_no IN VARCHAR2) RETURN VARCHAR2
AS

  v_ref_no varchar2(50);

BEGIN

  select REF_NO into v_ref_no from cash where REF_NO = p_ref_no;  
  EXCEPTION
    WHEN no_data_found THEN
    v_ref_no := '#';

RETURN v_ref_no;    

END; 
```

我已经在`AFTER INSERT TRIGGER`. 当我插入数据时，我收到错误

`ORA-06503: PL/SQL: Function returned without value`

我该如何解决这个问题？

**PS：**我没有将数据插入`cash`表中。我正在将数据插入另一个表（假设它是表 B）并在它的 (表 B) 中调用此函数`AFTER INSERT TRIGGER`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-11T09:06:57.343

所有函数都必须执行 RETURN 语句。您的函数在其异常块中有 RETURN，因此该语句在正常情况下不会被执行。

通过带有自己的部分的附加块封闭`select`语句将解决您的问题。所以你的函数可能看起来像这样：`begin end``exception`

```
create or replace function find_reference_no(
    p_ref_no IN VARCHAR2) return varchar2
AS
  v_ref_no varchar2(50);
begin
  begin
    select REF_NO 
       into v_ref_no 
       from cash 
      where REF_NO = p_ref_no;  
  exception
     WHEN no_data_found THEN
          v_ref_no := '#';
   end;
  return v_ref_no;    
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T10:13:27.160

由于该函数只返回与表中存在的参数相同的值，因此您可以避免异常处理的尴尬使用并将其重写为：

```
 function find_reference_no(
      ref_no in varchar2)
  return varchar2
  as
    row_count integer
  begin
    select count(*)
    into   row_count
    from   cash
    where  cash.ref_no = find_reference_no.ref_no and
           rownum      = 1

    if row_count = 0
      return '#'
    else
      return ref_no
    end if;

  end find_reference_no; 
```

我会返回一个 1 或 0（即 row_count 的值）来表示该记录存在或不存在。

```
 function find_reference_no(
      ref_no in varchar2)
  return varchar2
  as
    row_count integer
  begin
    select count(*)
    into   row_count
    from   cash
    where  cash.ref_no = find_reference_no.ref_no and
           rownum      = 1

    return row_count

  end find_reference_no; 
```

# java - 通过反射获取子类字段

> ID：15334310
> 
> 赞同：1
> 
> 时间：2013-03-11T08:45:13.413
> 
> 标签：java, reflection

我有 2 个课程：`B`extends `A`。

我`getDeclaratedFields()`在 class 上使用`B`，我没有从 `A.

我怎样才能得到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T10:58:48.153

getDeclaredFields() 返回由类而不是超类声明的字段。

> 返回一个 Field 对象数组，反映由此 Class 对象表示的类或接口声明的所有字段。这包括公共、受保护、默认（包）访问和私有字段，但不包括继承的字段。

使用 getFields 方法检索类和超类声明的字段。

> 具体来说，如果此 Class 对象表示一个类，则此方法返回该类及其所有超类的公共字段

阅读[Java 类](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T11:04:37.797

您应该使用[Class#getSuperclass()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getSuperclass%28%29)访问类的超类并使用[Class#getDeclaredFields()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredFields%28%29)获取其字段，重复（递归）直到到达[Object](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html)或您选择的要停止的类。

这是一些示例代码：

```
@Test
public void getDeclFieldsIncludingBase() {
    List<Field> fields = new ArrayList<>();
    getDeclFieldsIncludingBase(B.class, fields);
    for(Field f : fields) {
        System.out.println(f.getName());    
    }
}

private void getDeclFieldsIncludingBase(Class<?> cl, List<Field> fields) {
    Field[] declaredFields = cl.getDeclaredFields();
    for(Field f : declaredFields) {
        fields.add(f);
    }
    Class<?> superclass = cl.getSuperclass();
    if(! Object.class.equals(superclass)) {
        getDeclFieldsIncludingBase(superclass, fields);
    }
} 
```

例子：

```
public class A {
    int a;
} 
```

和

```
public class B extends A {
    int b;
} 
```

输出应该是

```
b
a 
```

# xcode - 修复位置问题的 UITableView

> ID：15334311
> 
> 赞同：0
> 
> 时间：2013-03-11T08:45:23.980
> 
> 标签：xcode, ipad

我正在使用`UITableView`将 y 位置固定为 118 的自定义单元格。
但是当我运行应用程序时，tableview 单元格总是将 y 设置为 0 位置。
为什么它只发生在 iPad 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T11:56:42.937

![自动布局已修复](../Images/1edcd35462353f2813ea3f6bd0d4bd1e.png)

您是否将自动调整为 false？

# android - 泛泰平板电脑模拟器

> ID：15334316
> 
> 赞同：0
> 
> 时间：2013-03-11T08:45:55.317
> 
> 标签：android, simulator

请帮我找到在 Android OS 上运行的 pantech 平板电脑的模拟器。当我在 pantech 平板设备的默认浏览器中测试该页面时，我需要解决该网页中出现的一个问题。目前我没有真正的泛泰平板电脑。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:49:13.853

我解决了仅在 Android ICS Pantech 平板电脑中出现的缺陷。问题在其他以前的版本上不可重现。

实际问题是因为在泛泰平板电脑的 ICS 版本的用户代理中包含字符串“Webkit”。在 HoneyComb 中，用户代理字符串中没有“Webkit”。我们已经编写了一些脚本，针对桌面 webkit 浏览器使用用户代理字符串中的“Webkit”关键字，这会影响 ICS 版本，因为它在用户代理字符串中包含“Webkit”关键字。

# php - PHPUnit Selenium，clickAndWait() 函数在 Opera 中不起作用

> ID：15334319
> 
> 赞同：21
> 
> 时间：2013-03-11T08:46:04.657
> 
> 标签：php, selenium, phpunit, opera, selenium-rc

我`PHPUnit_Selenium`在 Opera 中遇到问题。如果我点击了测试代码中的元素，页面将不会加载。在 Firefox、IE、Chrome 和 Safari 等其他浏览器中，它可以正常工作。

**代码：**

```
$browser->clickAndWait(link); 
```

这是 SELENIUM REMOTE CONTROL 的下一步：

```
click(link)
waitForPageToLoad(120000) 
```

超时后，如果我点击浏览器中的链接，页面将重新加载。

我有 Selenium RC v. 2.31.0 和 Opera 版本 12.41，但我也在 Opera 11.50 上进行了测试。

你知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-16T21:10:06.677

我在FF中也遇到了这个问题，这是我想出的解决方案：

```
def wait_for_element_by_id(eid):
   "Wait for an element to be present"
   element = WebDriverWait(driver, 10).until(
       EC.presence_of_element_located((By.ID, eid))
   )
   return [] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T21:06:35.003

原始帖子中没有足够的信息来建议一个明确的解决方案，但是结合@Andre 提供的评论，“清理”浏览器会这样做，并反过来提供诸如“复制 xPath”之类的功能可能会非常具有误导性，并在测试期间导致许多问题，具体取决于 xPath 的结构。

例如：

```
<html>
    <head></head>
    <body>
        <div>
            <table>
                <tr>
                    <td>test</td>
                </tr>
                <tr>
                    <td>value</td>
                </tr>
            </table>
        </div>
    </body>
</html> 
```

虽然上面的代码非常少，但浏览器会将 test 的 xPath 报告为以下之一：

*   /html/body/div/table/tr/td （在许多情况下会返回 test 和 value ）
*   /html/body/div/table/tr[1]/td[1] （更精确的匹配只是测试）
*   /html/body/div/table/tbody/tr/td （注意添加的 tbody ）

等等。显然，使用更唯一的标识符（IE an id -> //*[@id="someElement"]）不会遇到这个问题，但是在我们接管的许多项目中，单元测试是最初只在一个浏览器上完成，我们看到了与报告的类似的错误，结果证明“清理”浏览器确实会产生以下两个问题之一：

*   该路径是在“清理”的浏览器上检索到的，然后在不会也找不到该元素的浏览器上运行。
*   该路径是在未“清理”的浏览器上检索的，然后在进行清理的浏览器上运行。

这两个问题导致不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-24T12:40:37.723

我有类似的问题，不幸的是，我想出的唯一解决方案是......添加“睡眠”。丑陋，但有效。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-03T13:45:33.457

单击某些弹出窗口或创建后，您只需要在单击函数“waitForElementPresent”或“waitForChange”后调用。

clickAndWait = click() + 一些等待函数.... 好的做法是在单击之前使用等待函数，这样可以节省异步调用。

```
selenium.waitForElementPresent(“myFooElement”);
selenium.click(“myFooElement”); 
```

# opengl - OpenGL，使用模板计算屏幕外硬阴影

> ID：15334321
> 
> 赞同：0
> 
> 时间：2013-03-11T08:46:07.330
> 
> 标签：opengl, shadow, projection, stencil-buffer, off-screen

我试图弄清楚是否以及如何计算来自屏幕外多个光源的硬阴影。

序言：场景非常复杂，多达数百万个三角形，多达数百种不同的光源、灯光、材质和深度启用以及最大精度（至少 10kx10k 像素地面分辨率）。阴影只不过是平面投影阴影，也就是说，我通过预乘阴影矩阵（给定光源位置和平面）来渲染对象本身。多个物体，多个光源，但只是一个平面。

因此，实时是不可能的。同样不可能考虑增加模板值，因为我只有一个字节（255 个有用值）并且我可能有超过 255 个光源。

因此我的想法是在屏幕外渲染（纹理或渲染缓冲区图像）。

对于每个光源，我计算我的阴影矩阵并应用它。然后我用特定的模板编号（即 1）渲染我的第一个对象。然后我渲染我的第二个对象。我只需要在模板编号为 1 的地方渲染它，**并且**我需要将所有其他像素归零，因为我只对硬阴影感兴趣。然后是第三个对象，以此类推。最后，我对第二个光源重复所有过程，依此类推。

可能吗？更好的纹理或渲染缓冲图像？计算出硬阴影后，我需要在 cpu 上将其取回以对其进行分析并将其渲染到场景中的地面上。

理想情况下，我只需要附加到我的 FBO 的模板缓冲区，但他们[在这里](https://www.opengl.org/wiki/Framebuffer_Object_Examples#Color_texture.2C_Depth_texture)说：

> Stencil 永远不会制作 STENCIL 缓冲区。所有 GPU 和所有驱动程序都不支持独立的模板缓冲区。如果需要模板缓冲区，则需要制作一个 Depth=24，Stencil=8 缓冲区，也称为 D24S8。请在此页面上搜索有关 GL_EXT_packed_depth_stencil 的示例。

这在今天仍然有效吗？

环顾四周，我在[这里](https://stackoverflow.com/questions/7570215/opengl-es-stencil-operations)找到了一种通过在每个对象之间渲染全屏多边形来将所有其他像素归零的方法，但我想知道是否有更有效的方法..？

# php - 更新动态页面的标题

> ID：15334324
> 
> 赞同：0
> 
> 时间：2013-03-11T08:46:29.920
> 
> 标签：php, html, seo

代码：

```
 <html>
        <head>
        <title><?php echo $title; ?></title>
        </head>
        <body>
        <?php
            }if($_GET['page'] == 'Post'){
$title = "Post";
    ?>
    <div id = "contents">
    Post
    </div>

    <?php
            }else{
    ?>
        <div id = "contents">
$title = "Bla Bla Bla";
        Bla Bla Bla
        </div>
    <?php
            }
        }
    ?>
        </body>
        </html> 
```

我知道我无法在头部之后定义变量，但我不知道该怎么做。我希望使用单个 PHP 文件来完成此操作。如果这种方式不可行，还有哪些其他方式？假设我还想更改每个动态页面的元内容，我该怎么办？我也希望这对 SEO 友好。它是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:49:52.900

您也可以简单地将相同的 if 语句添加几行。

所以你的代码看起来像，即：

```
<html>
    <head>
        <?php if(..your condition) { ?>
            <title>Show correct title>
        <?php } else { ?>
            <title>Other title, maybe with some meta tags..</title>
        <?php } ?>
    </head>

    <body>
        <?php if(..and the same condition again) { ?>
            <h1> And thus, it is the same condition </h1>
        <?php } ?>
    </body>
</html> 
```

我希望你明白我在说什么;-)

**编辑**：请注意，我不“同意”这个软件的设计。或者，也许，缺乏设计。这只是简单问题的简单答案；-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:50:58.360

一些重新排序并使用一个像这样的变量怎么样：

```
<?php
  if($_GET['page'] == 'Post'){
    $title = 'Post'
    $content= '<div id = "contents">Post</div>';
  } else {
    $title = 'Bla Bla Bla';
    $content = '<div id = "contents">Bla Bla Bla</div>';
  }
?>
<html>
<head>
  <title><?php echo $title; ?></title>
</head>
<body>
  <?php echo $content; ?>
</body>
</html> 
```

这样您就可以将页面拆分为计算（PHP 上部），也可以在其中发送标头。以及下部的输出。使（在我看来）结构更加清晰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T08:51:59.360

如下所示。

```
<?php
 $title = isset($_GET['page']) ? $_GET['page'] : 'normal heading';
?>

<html>
  <head><title><?=$title?></title></head>
</html> 
```

在 HTML 代码之前定义变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T09:00:58.873

```
<?php ob_start(); /* open output buffer */ ?>
<html>
  <head><title>{title}</title></head>
[php/html code]
<?php
   $response = ob_get_clean(); /* get output buffer and clean */
   $metas = array('{title}' => $title, '{description}' => $description); 
   $response = strstr($response, '{title}', $title); 
   echo $response; 
```

或者使用 smarty 或任何其他模板引擎。

# version-control - P4Merge 和 DiffMerge 之间的主要区别

> ID：15334326
> 
> 赞同：4
> 
> 时间：2013-03-11T08:46:38.253
> 
> 标签：version-control, mergetool, 3-way-merge

我的团队正在寻找一个强大的 3 路合并工具来添加到我们的工具箱中。我将 P4Merge 和 DiffMerge 确定为我们的最佳候选者，因为它们被认为是 SO 上最好的（感谢 SO 社区）并且它们符合公司许可条款。

对于最终决定，我需要比较两种工具的功能。一个区别是，例如 DiffMerge 在 3 路合并中不显示共同祖先内容。

**这些工具之间的主要区别是什么？**

（请注意，这个问题是关于 P4Merge 和 DiffMerge 的明确问题，我知道还有其他可用的合并工具，但这里不考虑它们。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-22T17:59:01.227

功能集非常相似。DiffMerge 费用为 $$$。对于这笔额外费用，您将获得：

*   DiffMerge 支持目录比较，P4Merge 不支持
*   DiffMerge 可以输出差异报告（HTML/文本）
*   DiffMerge 支持水平和垂直分屏布局，但 P4Merge 仅支持垂直

在 Wikipedia上对这 2 个合并工具（以及许多其他工具）进行了[更完整的比较。](//en.wikipedia.org/wiki/Comparison_of_file_comparison_tools)

# sql - 尝试左连接时出现意外结果

> ID：15334327
> 
> 赞同：1
> 
> 时间：2013-03-11T08:46:39.010
> 
> 标签：sql, group-by, sap-ase

我有这个工作正常的 SQL 语句..

```
SELECT result=count(j.client_id), j.client_id 
FROM spp_job j  
GROUP BY j.client_id 
ORDER BY  count(j.client_id) DESC 
```

但是当我使用 LEFT JOIN 时失败了

```
SELECT result=count(j.client_id), c.name 
FROM spp_job j 
LEFT JOIN spp_client c ON j.client_id = c.id  
GROUP BY j.client_id 
ORDER BY count(j.client_id) DESC 
```

我不知道出了什么问题。我想显示客户名称而不是他们的 ID。第二个 SQL 给了我所有的客户记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:49:52.327

由于您使用左连接列出 c.name，因此您需要`Group By c.name instead j.client_id`

```
SELECT result=count(j.client_id), c.name 
FROM spp_job j LEFT JOIN
    spp_client c ON j.client_id = c.id  
GROUP BY c.name 
ORDER BY result DESC 
```

**更新：**由于名称不是唯一的（如@lc.所说），您可能需要按 id 和名称使用 group by 以获得准确的结果。

```
GROUP BY j.client_id, c.name 
ORDER BY result DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T08:49:55.497

我想你想得到`NAME`for each `client_id`。

您还需要`name`在`GROUP BY`子句中添加，因为该列未*聚合*，

```
SELECT  result = count(j.client_id), 
        c.name 
FROM    spp_job j 
        LEFT JOIN spp_client c 
            ON j.client_id = c.id  
GROUP   BY j.client_id, c.name
ORDER   BY result DESC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T09:02:34.043

您遇到了标准行为的 Sybase 扩展`GROUP BY`。从[文档中](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.commands/html/commands/commands60.htm)（请参阅“Transact-SQL extensions to group by and having”页面的中间部分）：

> 标准 SQL 的 Transact-SQL 扩展通过允许引用不用于创建组或汇总计算的列和表达式，使显示数据更加灵活：
> 
> *   包含聚合的选择列表可以包含不是聚合函数的参数且不包含在 group by 子句中的扩展列。扩展列会影响最终结果的显示，因为会显示额外的行。
>     
>     
>     *   group by 子句可以包括不在选择列表中的列或表达式。
> 
> ...
> 
> 当 Transact-SQL 扩展向显示添加行和列时，或者如果省略 group by，查询结果可能难以解释。

该页面中的示例解释了会发生什么：

> Transact-SQL 扩展列 price（在选择列表中，但不是聚合且不在 group by 子句中）导致所有合格的行显示在每个合格的组中，即使标准的 group by 子句每次生成一行团体。group by 仍然影响矢量聚合，它计算显示在每个组的每一行上的每个组的平均价格（它们与例如 a 计算的值相同）

请注意，标准行为`GROUP BY`不允许这样做，并且会产生“使用未在 group-by 子句中指定的非聚合列”的错误。

* * *

对于您的查询，您还应该`c.name` [按 JW 分组。建议](https://stackoverflow.com/a/15334375/44853)。

# jquery - 将文本动画添加到 jQuery Slider

> ID：15334329
> 
> 赞同：2
> 
> 时间：2013-03-11T08:46:39.930
> 
> 标签：jquery

大多数 jQuery 滑块只是普通的图像滑块，但我想添加自定义文本动画，例如文本滑动。

现在我想问你的是，我可以添加自己的自定义文本动画而不会弄乱滑块功能，还是最好获得带有文本动画等的完整滑块？

请注意，我不是 jQuery 专家。

# java - Apache Commons 配置缓存

> ID：15334336
> 
> 赞同：4
> 
> 时间：2013-03-11T08:47:13.897
> 
> 标签：java, apache-commons, apache-commons-config

我正在寻找如何在 apache-commons-configuration 框架中缓存我的属性。从不同的地方获取属性需要很长时间，在我的 config.xml 中定义。那么，是否有接口的缓存（例如按时间）实现`Configuration`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:35:52.797

*   您可以将 apache 对象保存在某个类的静态变量中，并在完成后设置为 null。有静态吸气剂来阅读它

*   不确定 apache 配置 API，但我们使用静态 HashMap 并在其中存储属性。

如果所有字符串：

私有静态映射数据 = new HashMap();

可以作为属性公开，因此您可以在任何地方使用

```
public class Props{

private static Map<String, String> data = new HashMap<String, String> ();

public static void put(String name, String val){
    data.put(name,val);
}

public static String  get(String name){
    return data.get(name)
}

public static  void load(){//todo }

public static  void save(){//todo if needed if few change and need persistence} 
```

}

对于除原语之外的任何数据类型

```
public class Props{

private static Map<String, Object> data = new HashMap<String, Object> ();

public static void put(String name, Object val){
    data.put(name,val);
}

public static String  get(String name){
    return data.get(name)
}

public static void load(){//todo }

public static void save(){//todo if needed if few change and need persistence} 
```

}

如果您希望在某个时间后删除对象，可以使用 WhirlyCache 而不是 HashMap。我看不出有什么问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T13:49:54.787

最后，我使用番石榴编写了自己的缓存：

```
public class Cfg {
    private static Logger log = LoggerFactory.getLogger(Cfg.class);
    private Configuration cfg;
    private LoadingCache<String, Boolean> boolCache;
    private LoadingCache<String, String> stringCache;
    private LoadingCache<String, Float> floatCache;
    private LoadingCache<String, Integer> integerCache;
    private LoadingCache<String, List> listCache;

    @PostConstruct
    public void init() {
        boolCache = CacheBuilder.newBuilder().expireAfterAccess(cfg.getInt("configuration.cache"), TimeUnit.MINUTES).build(new CacheLoader<String, Boolean>() {
            @Override
            public Boolean load(String key) throws Exception {
                return check(cfg.getBoolean(key), key);
            }
        });
        stringCache = CacheBuilder.newBuilder().expireAfterAccess(cfg.getInt("configuration.cache"), TimeUnit.MINUTES).build(new CacheLoader<String, String>() {
            @Override
            public String load(String key) throws Exception {
                return check(cfg.getString(key), key);
            }
        });
        floatCache = CacheBuilder.newBuilder().expireAfterAccess(cfg.getInt("configuration.cache"), TimeUnit.MINUTES).build(new CacheLoader<String, Float>() {
            @Override
            public Float load(String key) throws Exception {
                return check(cfg.getFloat(key), key);
            }
        });
        integerCache = CacheBuilder.newBuilder().expireAfterAccess(cfg.getInt("configuration.cache"), TimeUnit.MINUTES).build(new CacheLoader<String, Integer>() {
            @Override
            public Integer load(String key) throws Exception {
                return check(cfg.getInt(key), key);
            }
        });
        listCache = CacheBuilder.newBuilder().expireAfterAccess(cfg.getInt("configuration.cache"), TimeUnit.MINUTES).build(new CacheLoader<String, List>() {
            @Override
            public List load(String key) throws Exception {
                return check(cfg.getList(key), key);
            }
        });
    }

    public boolean _bool(String key) {
        try {
            return boolCache.get(key);
        } catch (ExecutionException e) {
            throw new RuntimeException(e);
        }
    }

    public float _float(String key) {
        try {
            return floatCache.get(key);
        } catch (ExecutionException e) {
            throw new RuntimeException(e);
        }
    }

    public int _int(String key) {
        try {
            return integerCache.get(key);
        } catch (ExecutionException e) {
            throw new RuntimeException(e);
        }
    }

    public String _string(String key) {
        try {
            return stringCache.get(key);
        } catch (ExecutionException e) {
            throw new RuntimeException(e);
        }
    }

    public List<String> _list(String key) {
        try {
            //noinspection unchecked
            return listCache.get(key);
        } catch (ExecutionException e) {
            throw new RuntimeException(e);
        }
    }

    public void setCfg(Configuration cfg) {
        this.cfg = cfg;
    }

    private <T> T check(T el, String key) {
        if (el != null) {
            return el;
        }
        throw new KeyNotFound(key);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-15T09:26:00.547

我扩展了 DatabaseConfiguration，所以它不会一直访问我的数据库。至于重新加载，我会在需要的地方实例化我的配置，并在完成后将其丢弃。

```
public class MyConfig extends DatabaseConfiguration {

    private WeakHashMap<String,Object> cache = new WeakHashMap<String,Object>();

    public MyConfig(String datasourceString,String section) throws NamingException {
        this((DataSource) new InitialContext().lookup(datasourceString),section);
    }

    protected MyConfig(DataSource datasource,String section) {
        super(datasource, "COMMON_CONFIG","PROP_SECTION", "PROP_KEY", "PROP_VALUE",section);
    }

    @Override
    public Object getProperty(String key){
        Object cachedValue = cache.get(key);
        if (cachedValue != null){
            return cachedValue;
        }
        Object databaseValue = super.getProperty(key);
        cache.put(key, databaseValue);
        return databaseValue;

    }
} 
```

# sql - ORA-01427: 单行子查询在使用 select 时返回多于一行

> ID：15334341
> 
> 赞同：1
> 
> 时间：2013-03-11T08:47:32.647
> 
> 标签：sql, oracle

我想上面的问题已经被问过几次了......我仍然无法在我的查询中实现它..在下面的查询中有一个员工的服务表，他们的员工 id 存在于 temp table 中。 ...每个员工可能在不同的地方工作过..因此每个员工可能有不止一个记录..我试图找出最后一次发布的详细信息...但是在第三行我得到了提到的错误..如果我使用“IN”而不是等于..我会为每个员工 ID 获得多条记录

```
SELECT
    s.employee_id,
    s.from,
    s.to
FROM 
    service s, temp t
WHERE 
    t.employee_id = s.employee_id
    AND s.postnumber = (SELECT max(s1.postnumber)
                        FROM service s1, temp t1
                        WHERE t1.employee_id = s.employee_id)
ORDER BY 
    t.employee_id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:02:44.423

您的子查询中有错误的 where 条件：`t1.employee_id=s.employee_id`

并在子查询中尝试`distinct`。

试试这个：

```
select s.employee_id,s.from,s.to from service s,temp t
where t.employee_id=s.employee_id
and s.postnumber = (select distinct max(s1.postnumber) from service s1,temp t1 where     t1.employee_id=s1.employee_id)
order by t.employee_id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:50:45.057

你能告诉我当你在 SELECT 子句中没有使用它的任何列时加入表“temp”有什么意义。

尝试将其放在 EXISTS 子句中。

# java - 错误：超级必须是构造函数中的第一条语句

> ID：15334343
> 
> 赞同：0
> 
> 时间：2013-03-11T08:47:37.997
> 
> 标签：java

无法弄清楚为什么我会收到此错误。在记事本中工作，通过 cmd 运行 javac（显然更多的是文件）。如果您需要我链接更多，我可以。我的错误发生在“setCruiseShip”，我试图将当前链接到超类。错误：对 super 的调用必须是构造函数中的第一条语句。

```
class Ship
{ protected String name;
  protected float speed;
  protected int year;

  public Ship() {name=""; speed=year=0;}
  public Ship(String n, float sp, int y) {name=n; speed=sp; year=y;}
  public String getName()  {return name;}
  public float  getSpeed() {return speed;}
  public int    getYear()  {return year;}
  public void   setShip(String n, float sp, int y) {name=n; speed=sp; year=y;}
  public String toString() {return "Ship named "+name+ " with max speed of " 
                           +speed+ " was built in " +year;}
}

class CruiseShip extends Ship
{ protected int maxpass;

  public CruiseShip() {super(); maxpass=0;}
  public CruiseShip(String n, float sp, int y, int mp) {super(n, sp, y);
                                                        maxpass=mp;}
  public int  setMaxpass(int mp) {maxpass=mp;}
  public void setCruiseShip(String n, float sp, int y, int mp){super(n,sp,y);
                                                               maxxpass=mp;}
  public String toString() { return super.toString() +" carries "
                            +maxpass+ "  passengers";}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:51:58.633

`class Ship`没有名为 的方法`setCruiseShip`。您可能想要的是调用该`setShip`方法。代替

```
super(n,sp,y); 
```

和

```
setShip(n,sp,y); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:04:51.650

只能从子类的构造函数（不能从任何方法）调用超级构造函数。下面给出修改和编译的程序

```
class Ship {
    protected String name;
    protected float speed;
    protected int year;

    public Ship() {
        name = "";
        speed = year = 0;
    }

    public Ship(String n, float sp, int y) {
        name = n;
        speed = sp;
        year = y;
    }

    public String getName() {
        return name;
    }

    public float getSpeed() {
        return speed;
    }

    public int getYear() {
        return year;
    }

    public void setShip(String n, float sp, int y) {
        name = n;
        speed = sp;
        year = y;
    }

    public String toString() {
        return "Ship named " + name + " with max speed of " + speed
                + " was built in " + year;
    }
}

class CruiseShip extends Ship {
    protected int maxpass;

    public CruiseShip() {
        super();
        maxpass = 0;
    }

    public CruiseShip(String n, float sp, int y, int mp) {
        super(n, sp, y);
        maxpass = mp;
    }

    public int setMaxpass(int mp) {
        maxpass = mp;
    }

    public void setCruiseShip(String n, float sp, int y, int mp) {
        setShip(n, sp, y);
        maxpass = mp;
    }

    public String toString() {
        return super.toString() + " carries " + maxpass + "  passengers";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:05:12.773

`super(somevalues...)`可以从子类的构造函数中调用。Java 不允许`super(somevalues...)`从方法调用。此外，当您在子类中定义构造函数时，其第一条语句应该是`super()/super(somevalues)` 构造函数或`this(somevalues...)`. 如果你不这样做，那么编译器会隐式添加默认的无参数超级构造函数。

`this()` 意味着构造函数重载。
给定的事实是

```
public void setCruiseShip(String n, float sp, int y, int mp){super(n,sp,y); 
```

不是子类中的构造函数。

构造函数`definition`是，构造函数名称必须（我不是说“应该”）与没有返回类型的类名称相同，并且允许任何访问修饰符（如私有、默认、受保护、公共）。

所以`setCruiseShip`不一样`CruiseShip`

# android - 解决 Logcat 警告消息

> ID：15334345
> 
> 赞同：1
> 
> 时间：2013-03-11T08:47:40.580
> 
> 标签：android, android-layout, android-fragments, logcat, roboguice

**当我在Android 2.2.3 (API 10)**设备上运行我的应用程序时，我不断从**logcat**收到以下警告和错误消息

 **```
03-11 10:41:51.509: V/ACTIVITY onCreate()(7585): ok
03-11 10:41:51.519: W/dalvikvm(7585): VFY: unable to resolve virtual method 30: Landroid/app/Activity;.getFragmentManager ()Landroid/app/FragmentManager;
03-11 10:41:51.519: E/dalvikvm(7585): Could not find class 'android.app.Fragment', referenced from method net.hockeyapp.android.UpdateManager.fragmentsSupported
03-11 10:41:51.519: W/dalvikvm(7585): VFY: unable to resolve const-class 24 (Landroid/app/Fragment;) in Lnet/hockeyapp/android/UpdateManager;
03-11 10:41:51.519: W/dalvikvm(7585): VFY: unable to resolve virtual method 30: Landroid/app/Activity;.getFragmentManager ()Landroid/app/FragmentManager; 
```

但是，在**Android 4.1.1**设备上，没有这样的问题。

我想知道，警告和错误消息是什么意思？

**PS**我在AndroidManifest.xml中有以下定义：

```
<uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="13" /> 
```

我的应用程序正在使用[RoboGuice](http://code.google.com/p/roboguice/) **片段**，我的所有片段都**扩展** `RoboFragment`了。

我的**活动**延伸`RoboFragmentActivity`

它们应该与 pre API 11 兼容。

我的问题只有在我登录后才会发生，然后关闭应用程序，然后重新启动应用程序。该应用程序在 Android 2.3.3 上运行良好，只需启动应用程序即可显示第一个片段而无需登录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:50:57.410

此消息来自 HockeySDK（我是此 SDK 的维护者）。SDK 正在检查片段 API 是否可用（请参阅[此处](https://github.com/bitstadium/HockeySDK-Android/blob/master/src/main/java/net/hockeyapp/android/UpdateManager.java#L172)），如果不可用，则回退到 2.x 兼容视图。它不应影响您的应用程序的行为或导致崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:50:41.537

我猜如果您使用 fragrant 并且在 4.* 设备上运行时没有收到此按摩，那么问题是您没有使用android **-support-v4**包中的`FragmentActivity`and 。`SupportFragmentManager`**

# sql-server - 如何计算包括上一个日期在内的货物总和

> ID：15334346
> 
> 赞同：0
> 
> 时间：2013-03-11T08:47:52.983
> 
> 标签：sql-server, sql-server-2008

请帮助解决问题。

无法使请求正常工作，为了得到商店的商品数量，我需要从销售的商品数量中扣除所有供应商的所有产品的总和，然后将差额加上前一天 - 这将是库存的剩余部分。问题在于最后一个条件..

我现在得到的：
Q1 - 计算特定日期所有供应商的所有产品的总和。（收入）
Q2 - 计算特定日期的商品销售量。（消费）
Store_1 - 从所有供应商的所有产品的总和中扣除所售商品的数量。（差异）
Store_2 - 前一天的差异 + 差异。但这些数字计算不正确，除了第一行。（剩余部分）
如何获取正确的数据？**WHERE 条件（特定日期 - 1 天？）**

日期以秒为单位存储，这就是我使用日期转换器的原因。

```
SELECT Q1.Dat, Q1.Goods AS Q1, Q2.Goods AS Q2, Q1.Goods - Q2.Goods  AS Store_1,
(CASE WHEN Q1.Dat <= '2013.01.01' THEN Q1.Goods - Q2.Goods + 330016
ELSE (Q1.Goods - Q2.Goods) + (SELECT SUM (Q1.Goods - Q2.Goods)+330016 FROM Q1, Q2
WHERE particular date – 1 day) END ) AS Store_2

FROM
    (SELECT TOP 100 PERCENT CONVERT(VARCHAR, DATEADD(s, nb.TEreport.data, 25568), 102) AS Dat, 
    SUM(nb.TEreport.goods) AS Goods
    FROM nb.TEreport INNER JOIN nb.TEprovider ON nb.TEreport.id_provider = nb.TEprovider.id
    WHERE (LEFT(nb.TEprovider.name, 10) != 'FROM STORE') 
    AND (CONVERT(VARCHAR, DATEADD(s, nb.TEreport.data, 25568), 102) <= CONVERT(VARCHAR, GETDATE(), 102))
    AND CONVERT(VARCHAR, DATEADD(s, nb.TEreport.data, 25568), 102) >= '2013.01.01'
    GROUP BY CONVERT(VARCHAR, DATEADD(s, nb.TEreport.data, 25568), 102)
    ORDER BY Dat ) Q1 --income
INNER JOIN
    (SELECT TOP 100 PERCENT CONVERT(VARCHAR, DATEADD(s, nb.TEreport.data, 25568), 102) AS Dat, 
    SUM(nb.TEreport.goods) AS Goods
    FROM nb.TEreport INNER JOIN nb.TEway ON nb.TEreport.id_way = nb.TEway.id
    WHERE (SUBSTRING(nb.TEway.name, 5, 8) != 'TO STORE') 
    AND (CONVERT(VARCHAR, DATEADD(s, nb.TEreport.data, 25568), 102) <= CONVERT(VARCHAR, GETDATE(), 102))
    AND CONVERT(VARCHAR, DATEADD(s, nb.TEreport.data, 25568), 102) >= '2013.01.01'
    GROUP BY CONVERT(VARCHAR, DATEADD(s, nb.TEreport.data, 25568), 102)
    ORDER BY Dat ) Q2 --spending
ON Q1.Dat = Q2.Dat
ORDER BY Q1.Dat 
```

尝试使用**CONVERT(VARCHAR, DATEADD(s, nb.TEreport.data, 25567), 102)**其中 25567 是上一个日期

```
 (CASE WHEN Q1.Dat <= '2013.01.01' THEN Q1.Goods - Q2.Goods + 330016
    ELSE (Q1.Goods - Q2.Goods) + (SELECT SUM (Q1.Goods - Q2.Goods)+330016 FROM Q1, Q2
    WHERE CONVERT(VARCHAR, DATEADD(s, nb.TEreport.data, 25567), 102) ) END ) AS Store_2 
```

但我有一条错误消息：无效的对象名称'Q1'，无效的对象名称'Q2'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:34:08.977

`Q1`并且`Q2`是派生表，您不能从相关子查询（这是您`(SELECT SUM (Q1.Goods - Q2.Goods)+330016 ...)`的事情）中引用它们，因为它们是 .

在这种情况下，一个简单的解决方案是重写`Q1`和`Q2`作为 CTE。这样，它们将充当“本地视图”，这将允许您多次引用这些子查询。

所以，给你：

```
WITH Q1 AS (
  SELECT ...      -- your Q1 subquery
),
Q2 AS (
  SELECT ...      -- your Q2 subquery
)
SELECT ...        -- same as before but Q1 and Q2 are now valid
                  -- for referencing in other subqueries

FROM Q1           -- just "Q1" and "Q2" instead of the subqueries
INNER JOIN Q2

ON ...            -- the rest of your query as before
; 
```

# java - 在 Eclipse JUNO 中安装 maven 2.2.1？

> ID：15334348
> 
> 赞同：-2
> 
> 时间：2013-03-11T08:48:02.850
> 
> 标签：java, maven-2, eclipse-juno

我是java新手，请帮助我如何在eclipse JUNO中安装maven 2.2.1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:18:54.733

转到此[页面](http://maven.apache.org/download.cgi)（这是官方 maven 下载页面）。选择您要安装的版本。安装它。如果您使用 Windows 解压 C 盘中的文件。然后转到 System Properties->Advanced->Environment Variables 并添加带有路径的 MAVEN_HOME 变量，而`D:\Java\apache-maven-3.0.4`不是添加到 PATH 变量中 this `%MAVEN_HOME%\bin;`。这有助于在您的机器上安装 Maven。然后就像@Joe2013`Go to Eclipse-->Help-->Eclipse Market Place`和写**maven**一样，你会 sea `Maven Integration Plugin`。安装它并使用 Maven 配置 Eclipse）

**更新** 您的第二个问题

可能是你忘记在你的 pom.xml 中添加这个：

```
<build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <configuration>
                    <archive>
                        <manifest>
                            <mainClass>com.maventest.App</mainClass>
                        </manifest>
                    </archive>
                </configuration>
            </plugin>
        </plugins>
    </build> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:59:53.420

转到 Eclipse-->Help-->Eclipse Market Place，您应该能够安装 Maven

# media-queries - 三星galaxy s3媒体查询与媒体查询最大宽度冲突：480px

> ID：15334349
> 
> 赞同：0
> 
> 时间：2013-03-11T08:48:14.147
> 
> 标签：media-queries

想调整这个链接上的两个按钮[http://screencast.com/t/FhNIYgSNcfE](http://screencast.com/t/FhNIYgSNcfE)就像下面提到的那样

```
@media only screen and (min-width: 380px) and (orientation:portrait) {
    nav ul li a.try_now{ border:solid 1px #06a1d1;  padding:0px 45px;}
    nav ul li a.buy_now{ border:solid 1px #f49000; padding:0px 42px;}
    nav ul li a.log_in{ border:solid 1px #000; position:relative; behavior:url(PIE.php); border-radius:5px; -o-border-radius:5px; -webkit-border-radius:5px; -moz-border-radius:5px; padding:2px 130px 5px 125px; line-height:23px; font-size:13px; background:url(../images/inner-images/log_in.png) repeat-x;}
    nav ul li a.log_in span.lock{ background:url(../images/inner-images/lock.png) no-repeat; width:11px; height:17px; float:left; position:absolute; left:35%; top:25%; padding:0 10px 0 0;}

}

@media only screen and (max-width:480px){
    nav ul li a.try_now{ border:solid 1px #06a1d1;  padding:0px 86px;}
    nav ul li a.buy_now{ border:solid 1px #f49000; padding:0px 72px;}
    nav ul li a.log_in{ border:solid 1px #000; position:relative; behavior:url(PIE.php); border-radius:5px; -o-border-radius:5px; -webkit-border-radius:5px; -moz-border-radius:5px; padding:2px 130px 5px 125px; line-height:23px; font-size:13px; background:url(../images/inner-images/log_in.png) repeat-x;}
    nav ul li a.log_in span.lock{ background:url(../images/inner-images/lock.png) no-repeat; width:11px; height:17px; float:left; position:absolute; left:35%; top:25%; padding:0 10px 0 0;}
} 
```

链接在这里：

[http://dev.ixod.com/contracts/ixod/level1.html](http://dev.ixod.com/contracts/ixod/level1.html)

# facebook - 如何开发一个从 Graph API 接收实时数据的 Facebook 应用程序？

> ID：15334357
> 
> 赞同：0
> 
> 时间：2013-03-11T08:48:38.030
> 
> 标签：facebook, facebook-graph-api

我正在开发一个 Facebook 应用程序，我想使用[来自 Graph API 的实时更新](http://developers.facebook.com/docs/reference/api/realtime/)。该应用程序将在具有全局可访问 URL 的服务器上运行，但在开发过程中，我在本地服务器上运行它，我什至没有可全局访问的 IP 地址。

有没有办法在开发过程中接收这些实时更新到我的本地主机服务器？

# javascript - 点击时更宽的下拉列表（JS）

> ID：15334360
> 
> 赞同：0
> 
> 时间：2013-03-11T08:48:44.903
> 
> 标签：javascript, css

我有一个非常简单的问题。

我有一个下拉菜单。它包含比其基本大小更宽的文本。在 IE 中，它的宽度不足以看到整个文本。解决方案是，当我单击下拉菜单时，将大小增加到我需要的大小。

```
 onfocus="this.style.width='320px';" 
```

并且在失去焦点后会回到原来的大小：

```
onblur="this.style.width='150px';" 
```

现在的问题：如果我点击输入，大小会增加，但不会立即打开列表。它需要再次单击才能执行此操作。

如何增加大小，同时打开列表？

已编辑

所以伙计们，问题是，当您单击下拉菜单时，大小发生了变化，并且在 IE8 下，选项不会显示。没有掉下来。这就是我需要的。我不想在悬停时这样做。

jQuery 和其他库不是选项。我必须与本机JS有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:53:40.310

尝试类似：

```
onclick="this.style.width='320px';" 
```

我希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:06:29.087

我猜你覆盖了标准的 onfocus 功能，试试悬停事件吧？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:09:31.490

你真的需要js来实现这个吗？我假设您的下拉列表中的每个元素都是一个链接。从 css1 开始，链接具有符合您需求的伪类选择器（a:link、a:visited、a:hover、a:active、a:focus）。希望这可以帮助。

# .net - AIR/Flex .NET 没有网络服务器的远程处理

> ID：15334364
> 
> 赞同：2
> 
> 时间：2013-03-11T08:49:01.793
> 
> 标签：.net, apache-flex, air, weborb, fluorinefx

我有一个通过套接字连接到本地 .NET 后端的 AIR 应用程序。在后端（用 C# 编写），TcpListener 类用于处理传入消息并将响应发送回客户端。目前我们使用 XML 来格式化请求，但这需要相当多的手动工作和额外的代码来（反）序列化消息。

使用 RemoteObject，我们不需要自己进行任何（反）序列化，并且能够执行远程调用，其中我们发送的对象将被自动映射。但我们不能使用它，因为我们没有运行网络服务器，因此无法设置远程网关。

有人对我们如何做到这一点有任何建议吗？FluorineFX 或 WebORB 中是否有任何可用的东西来实现这一点，或者这是否需要我们创建一个自定义处理程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:41:45.243

我认为您可以轻松地使用 FluorineFX 源来完成您想要的。FluorineFX 还安装了用于远程消息传递的 Windows 服务。这些项目可以从源代码管理中下载。我知道您可以查看一个 Windows 服务项目。它还使用套接字（我认为）与 Web 服务器进行通信。

我想您可以先使用 FluorineFX 的序列化器/解串器将 amf 解析为对象，然后将对象解析为 amf ...

[http://old.nabble.com/Documentation-on-how-to-use-FluorineFx-as-Windows-Service--td15849073.html](http://old.nabble.com/Documentation-on-how-to-use-FluorineFx-as-Windows-Service--td15849073.html)

# r - 使用 Rhadoop 进行多核计算

> ID：15334366
> 
> 赞同：0
> 
> 时间：2013-03-11T08:49:28.990
> 
> 标签：r, hadoop, multicore, rhadoop

我试图用 Rhadoop 计算一些东西（R 和 hadoop 之间的链接）。

当我使用 Hadoop-1.0.4 中的嵌入式示例对集群进行基准测试时，它看起来运行良好。（我的意思是所有从节点的核心都工作了，虽然 CPU 使用率在 50% 到 100% 之间波动）

但是，当我应用 Rhadoop 的示例时，情况并非如此。（每个从节点只有一个核心被激活。）

我必须在 Rhadoop 中设置任何配置吗？（就像我对 hadoop 的配置文件（例如 core-site.xml）所做的那样）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:07:32.500

您可能正在谈论 rmr2，它是 RHadoop 的一部分。rmr2 对此没有特定的配置。`help(rmr.options)`将显示所有配置选项。map 任务和 map slot 的数量决定了 map 阶段的并行度。听起来你有足够的插槽。所以地图任务的数量可能不足。它可能取决于输入的大小和其他属性。您可以将附加参数传递给 mapreduce`backend.parameters = list(hadoop = list(D = 'mapred.map.tasks'))`但 hadoop 不会逐字遵守此设置，只是将其作为提示。这`backend.parameters`参数已被弃用，但当它被删除时，将为这个特定目标提供一些替代机制。如果问题在 reduce 阶段，key 集合的基数也很重要（它设置了并行度的上限）。我同意保罗的观点，如果你提供了一个可重复的例子，我的答案将包含更少的猜测。RHadoop 有一个专门的论坛，开发人员和用户都在此活跃[https://groups.google.com/forum/?fromgroups=#!forum/rhadoop](https://groups.google.com/forum/?fromgroups=#!forum/rhadoop)

# c++ - 创建类对象数组

> ID：15334378
> 
> 赞同：-1
> 
> 时间：2013-03-11T08:50:00.627
> 
> 标签：c++, class, object

我正在尝试在类对象 Polygon 中创建类对象 Point 的数组。编译时出现几个错误，有人可以帮我修复这些错误/建议一种更好的方法来创建类对象数组吗？

代码已删除

尝试编译时出现以下错误：

```
 Undefined symbols for architecture x86_64:
      "Point::MAX_VAL", referenced from:
          Point::Point() in ccyVCyNB.o
          Point::Point() in ccyVCyNB.o
          Point::Point(float, float)in ccyVCyNB.o
          Point::Point(float, float)in ccyVCyNB.o
          Point::set(float, float)in ccyVCyNB.o
          Point::setRange(float, float)in ccyVCyNB.o
      "Point::MIN_VAL", referenced from:
          Point::Point() in ccyVCyNB.o
          Point::Point() in ccyVCyNB.o
          Point::Point(float, float)in ccyVCyNB.o
          Point::Point(float, float)in ccyVCyNB.o
          Point::set(float, float)in ccyVCyNB.o
          Point::setRange(float, float)in ccyVCyNB.o
    ld: symbol(s) not found for architecture x86_64 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:55:00.603

```
Polygon::Polygon()
{
   numPoints = 0;
   points = new Point[numPoints];
} 
```

您正在为 0 个类型的对象分配内存`Point`。那就是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:02:58.217

编译错误的原因是`MIN_VAL`and ，您*在构造*`MAX_VAL`函数中声明并初始化它。因此，对它们的所有引用都是未定义的。

 *考虑使用

```
class Point {
...
};

float Point::MIN_VAL = -10.0f;
float Point::MAX_VAL = 10.0f;

class Polygon {
...
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T09:03:22.810

你真的应该持有 an`std::vector<Point>`而不是数组：

```
class Polygon
{
private:
   int numPoints;
   std::vector<Point> points;
....
}; 
```

然后您就不必担心析构函数、复制构造函数或复制赋值运算符。它的默认大小为零，因此您的默认构造函数变为

```
Polygon::Polygon() : numPoints(0) {} 
```

和这个：

```
Polygon::Polygon(int numPoints, float xArray[], float yArray[])
{
     for(int i = 0; i < numPoints; i++)
     {
       points.push_back(Point(xValues[i], yValues[i]));
     }
} 
```

但实际上，你不需要数据成员`numPoints`，因为你可以从向量的大小得到点的数量，即`points.size()`。*

# sqlite - XXXX0.localstorage-journal 是做什么用的？

> ID：15334383
> 
> 赞同：0
> 
> 时间：2013-03-11T08:50:08.647
> 
> 标签：sqlite, google-chrome, local-storage, file-format

据我所知，W3C没有实现localStorage的规范，所以想知道Chrome是如何实现localStorage的。

我在文件夹中发现了很多 XXXX0.localstorage-journal 和 XXXX0.localstorage 文件：C:\Users\USER_NAME\AppData\Local\Google\Chrome\User Data\Default\Local Storage。

我知道 XXXX0.localstorage 只是一个 .sqlite 文件，但我很好奇 XXXX0.localstorage-journal 是做什么用的？

我用谷歌搜索了很多次，但我找不到这些东西，所以希望有人给我一些提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:19:11.140

[回滚日志](http://www.sqlite.org/lockingv3.html#rollback)包含旧数据以允许回滚事务。

# ruby-on-rails - Rails 中的 SystemSettings 类缓存

> ID：15334387
> 
> 赞同：1
> 
> 时间：2013-03-11T08:50:22.920
> 
> 标签：ruby-on-rails, caching, settings

我们正在尝试为我们的 Rails 应用程序实现一个高效的 SystemSettings 模块，该模块将基于 Redis。

这应该尽可能快，因为我们几乎在每个请求中都使用 SystemSettings 模块。因此，我们试图将调用此模块产生的开销降至最低。

该模块还将包含一个匹配的 Web UI，用于添加/删除/更新值。

最简单的实现显然是在每个操作上调用 Redis 服务器，但是由于我们的 Redis 服务位于与我们的 Web 服务器不同的服务器中，这显然会为每个操作产生网络开销，这是我们试图避免的事情.

我们正在寻找一种将值缓存一段时间的方法，在此期间，只需返回缓存的结果，而不是调用我们的 Redis 服务。

我们想出的唯一好的解决方案是使用`ActionDispatch::Callbacks`以确定是否到了更新设置缓存的时间。问题是，对我来说，基于一些随机用户请求来刷新缓存似乎是错误的。

我们还在考虑创建一个每 5 分钟左右运行一次的小脚本，该脚本将调用一个特定的 URL，该 URL 将“触发”一个将启动缓存刷新的操作。这个解决方案的问题在于，这只会导致我们的一个乘客进程（处理请求的进程）的缓存刷新，而不是所有的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:53:28.150

> 问题是，对我来说，基于一些随机用户请求来刷新缓存似乎是错误的。

一点也不。除非您提供请求，否则您不需要清除缓存，因此随机请求与任何请求一样好。请注意，对于任何缓存设置，您都会因本地化数据而牺牲性能，以换取潜在的一致性问题。缓存失效就是这样一个问题。

在你的情况下，我要做的第一件事是真正**衡量**你是否需要有一个本地化的进程内缓存。Redis 非常快，向它发送多个小请求实际上是该服务器的一个很好的使用模式。您可能会发现网络开销并不是真正的问题。很可能会证明这种开销只是整个响应时间的一小部分（更不用说在浏览器中渲染和资产时间，这会极大地影响用户体验）。

此外，如果你不真正衡量，你怎么知道你改善了情况以及改善了多少？也许 50 行额外代码和增加的复杂性不值得每个请求 20 毫秒的加速？如果没有硬数据，您将无法在这里真正做出明智的决定。

话虽如此，并且假设您确实需要它，我将与缓存读取代码一起实现缓存失效。在写入时存储每个条目的到期时间，在读取时检查时间是否过去。如果是，是时候更新缓存了。

在 Rails 中，您可以使用`MemoryStore`with`expires_in`选项，例如：

```
cache = ActiveSupport::Cache::MemoryStore.new(expires_in: 5.minutes)
cache.fetch('configuration_key') do
  # your redis contacting code
end 
```

# java - Java Toolkit 屏幕分辨率降低

> ID：15334392
> 
> 赞同：5
> 
> 时间：2013-03-11T08:50:34.900
> 
> 标签：java, awt, screen-resolution

我正在使用 java 来获取屏幕的尺寸和分辨率。当我运行以下代码时，我得到下面的输出。

```
Toolkit toolkit =  Toolkit.getDefaultToolkit ();
Dimension dim = toolkit.getScreenSize();
System.out.println("Width of Screen Size is "+dim.width+" pixels");
System.out.println("Height of Screen Size is "+dim.height+" pixels");       
int resolution =Toolkit.getDefaultToolkit().getScreenResolution();
System.out.println(resolution); 
```

输出：

```
Width of Screen Size is 1920 pixels
Height of Screen Size is 1080 pixels
120 
```

现在 Javadoc 说 getScreenResolution 以 dpi（每英寸点数）为单位返回分辨率。我认为这意味着如果我有一个 600 像素宽的图像，那么它在我的屏幕上将是 5 英寸。当我测量时，它实际上是 4 英寸宽。向我表明它应该是 150 dpi。

我的显示器是 15.6 英寸显示器，我测量它的宽度为 13.6 英寸，高度略高于 7.6 英寸。现在我的屏幕宽度显然是 1920 像素宽，计算为每英寸大约 141 像素。同样 1080/7.6 计算大约每英寸 141 像素。

[此网页](http://auctionrepair.com/pixels.php?x=600&y=600)显示 600x600 像素的图像。我在我的屏幕上测量它为 4.25 英寸，计算为 141 像素。

为什么 getScreenResolution 返回 120？

如果我对此有任何误解，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T21:41:11.077

`Toolkit.getDefaultToolkit().getScreenResolution()`试图获得分辨率，但取决于驱动程序的准确程度和其他因素（例如，并非视频卡和显示器之间的所有连接都无法反馈尺寸），返回的尺寸不能完全推开。

# java - 无法将工件 org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 从/传输到中央 (http://repo1.maven.org/maven2)

> ID：15334394
> 
> 赞同：97
> 
> 时间：2013-03-11T08:50:39.830
> 
> 标签：java, maven

我在 SpringSource Tool Suite 中创建了一个新的 maven 项目。我在我的新 Maven 项目中遇到了这个错误。

> [从http://repo1.maven.org/maven2](http://repo1.maven.org/maven2)传输 org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 失败 被缓存在本地仓库，直到更新间隔才会重新尝试解析中央已过或强制更新。原始错误：无法从/到中央传输工件 org.apache.maven.plugins:maven-surefire-plugin:pom:2.7.1 ( [http://repo1.maven.org/maven2](http://repo1.maven.org/maven2) )：连接超时

**pom.xml：**

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                             http://maven.apache.org/xsd/maven-4.0.0.xsd">

  <modelVersion>4.0.0</modelVersion>

  <groupId>com.test.app</groupId>
  <artifactId>TestApp</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>TestApp</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
</project> 
```

设置.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0" 
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <pluginGroups>
  </pluginGroups>
 <proxies>
    <proxy>
      <id>optional</id>
      <active>true</active>
      <protocol>http</protocol>
      <username>user</username>
      <password>pass</password>
      <host>ip</host>
      <port>80</port>
      <nonProxyHosts>local.net|some.host.com</nonProxyHosts>
    </proxy>    
  </proxies> 
  <servers>  
  </servers>
    <mirrors>   
    <mirror>
      <id>mirrorId</id>
      <mirrorOf>repositoryId</mirrorOf>
      <name>Human Readable Name for this Mirror.</name>
      <url>http://repo1.maven.org/maven2/</url>
    </mirror>    
  </mirrors>  
<profiles>
 </profiles>
</settings> 
```

请注意，我能够构建它。错误显示在 IDE 内的 pom.xml 中。任何解决方案？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-03-11T10:06:00.663

通过使用以下内容来简化事情`settings.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0" 
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                              http://maven.apache.org/xsd/settings-1.0.0.xsd">

 <proxies>
    <proxy>
      <id>myproxy</id>
      <active>true</active>
      <protocol>http</protocol>
      <username>user</username>  <!-- Put your username here -->
      <password>pass</password>  <!-- Put your password here -->
      <host>123.45.6.78</host>   <!-- Put the IP address of your proxy server here -->
      <port>80</port>            <!-- Put your proxy server's port number here -->
      <nonProxyHosts>local.net|some.host.com</nonProxyHosts> <!-- Do not use this setting unless you know what you're doing. -->
    </proxy>    
  </proxies> 
</settings> 
```

在 Linux/Unix 下，将其放在`~/.m2/settings.xml`. 在 Windows 下，将其放在`c:\documents and settings\youruser\.m2\settings.xml`或下`c:\users\youruser\.m2\settings.xml`。

您不需要`<mirrors/>`,`<profiles/>`和`<settings/>`部分，除非您真的知道它们的用途。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2014-05-27T10:36:30.403

当我更新 maven 并在 Eclipse 中选中“**强制更新快照/发布”选项时，这为我解决了。**这将清除所有错误。所以**右键单击 project** -> **Maven** -> **update project**，**然后检查上面的选项**-> **Ok**。希望这对您有所帮助。

另外：取消选中“从本地文件系统刷新工作空间资源”，它对我有用。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2013-03-11T09:05:12.617

您的 Maven 似乎无法连接到[http://repo1.maven.org/maven2](http://repo1.maven.org/maven2)上的 Maven 存储库。

如果您使用代理并且可以使用浏览器访问链接，则需要将相同的设置应用于 Spring Source Tool Suite（如果您在套件中运行）或 Maven。

`settings.xml`对于 Maven 代理设置，在目录中创建一个`.m2`具有以下详细信息的目录

```
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                      http://maven.apache.org/xsd/settings-1.0.0.xsd">
  <proxies>
    <proxy>
      <active>true</active>
      <protocol>http</protocol>
      <host>PROXY</host>
      <port>3120</port>
      <nonProxyHosts>maven</nonProxyHosts>
    </proxy>
  </proxies>
</settings> 
```

如果您没有使用代理并且可以使用浏览器访问链接，请删除上述任何代理设置。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-11T08:56:42.570

对于第一个错误，您可以简单地清除本地存储库缓存以强制它从主存储库下载，而不是检查本地存储库。

对于第二个错误，如果您在代理后面，您应该以这种方式[配置它配置代理](http://maven.apache.org/guides/mini/guide-proxies.html)，否则您现在有网络问题。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-08-25T11:46:47.413

对我来说，解决方案只是删除了给出错误的特定文件夹`~/.m2/repository/org/hsqldb/`

删除`hsqldb`文件夹后，我已经构建了项目，一切都很好。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-04-12T23:29:08.357

@carlspring 的建议对我有帮助（创建一个 settings.xml 来配置您的 http 代理）：

```
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0" 
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0
                              http://maven.apache.org/xsd/settings-1.0.0.xsd">

 <proxies>
    <proxy>
      <id>myproxy</id>
      <active>true</active>
      <protocol>http</protocol>
      <username>user</username>  <!-- Put your username here -->
      <password>pass</password>  <!-- Put your password here -->
      <host>123.45.6.78</host>   <!-- Put the IP address of your proxy server here -->
      <port>80</port>            <!-- Put your proxy server's port number here -->
      <nonProxyHosts>local.net|some.host.com</nonProxyHosts> <!-- Do not use this setting unless you know what you're doing. -->
    </proxy>    
  </proxies> 
</settings> 
```

然后按照@Peter T 的建议刷新 eclipse 项目 maven：

Eclipse 中的“强制更新快照/发布”。这将清除所有错误。所以右键单击项目-> Maven -> 更新项目，然后检查上面的选项-> 确定。希望这对您有所帮助。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-03-11T08:53:44.480

看来我有一个网络问题。在你这边，或者在 Maven 这边，或者在中间的任何地方。稍后再试。

如果错误是永久性的，请检查您的网络设置。如果您在代理后面，则需要在 ~/.m2/settings.xml 中包含以下内容：

```
<proxies>
    <proxy>
        <id>optional</id>
        <active>true</active>
        <protocol>http</protocol>
        <username>proxyuser</username>
        <password>proxypass</password>
        <host>proxy.host.net</host>
        <port>80</port>
        <nonProxyHosts>local.net|some.host.com</nonProxyHosts>
    </proxy>
</proxies> 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-10-29T20:16:45.840

尝试在 repo url 中使用 https：https://repo1.maven.org/maven2

如果您使用 jdk1.7 或更高版本并且您的网络将协议限制为较新的 TLS 版本，则启用 TLS1.2：`-Dhttps.protocols=TLSv1,TLSv1.1,TLSv1.2`

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-03-11T09:03:23.570

我强烈建议使用 Maven 存储库管理器，例如 Nexus。它将帮助您使用 Maven 获得稳定且可重复的构建。由于 Repository Manager 通常在您的 LAN 中，您不必配置代理设置，但您需要定义一些其他配置：

[http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html](http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html)

[http://maven.apache.org/repository-management.html](http://maven.apache.org/repository-management.html)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-09-22T04:31:38.077

我第一次开始在我的机器上使用 maven。收到此错误：`Could not transfer artifact from/to central (https://repo.maven.apache.org/maven2) No such file or directory` 已清理 ~/.m2/repository 目录。不要再遇到这个问题

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-05-25T10:36:05.597

如果上述方法均无效，请尝试回答以下问题： [Maven 错误“传输失败...”](https://stackoverflow.com/questions/5074063/maven-error-failure-to-transfer)

并删除您的`.lastUpdated`文件。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-03-22T11:20:15.457

1.  更新 Maven 项目并选中“强制更新快照/发布”选项，它将删除错误。
2.  如果没有，Maven 清理并安装项目。
3.  错误仍未消除，请重复步骤 1。

它对我有用:)

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-08-05T15:13:45.897

当使用无法与现在需要的 HTTPS 协议正确通信的旧版 Java 时，也会发生这种情况。在撰写本文时，版本 8 及更高版本应该可以工作。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-05-10T17:48:40.313

如果您在 Windows 操作系统中并且不需要任何代理，则删除整个代理设置

```
<proxies>
    <proxy>
   ..................
    </proxy>    
  </proxies> 
```

并替换为

```
<proxies/> 
```

然后做一个 maven clean build

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-03-30T09:26:36.463

通过以下步骤解决了此问题 -

1.  转到本地 m2 存储库并找到目录 org/apache/maven/plugins/maven-surefire-plugin。
2.  删除有问题的版本。
3.  maven 更新项目，然后重新下载。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-07-28T10:18:56.980

我们在公司级别设置了代理。

在 Internet Explorer 中禁用代理后，此问题已解决（看起来它随后在“系统”级别被禁用），因此所有其他浏览器也会选择此更改。

现在我可以从 CMD 提示符发出 MVN 命令，我没有问题，例如

“下载：[https](https://repo.maven.apache.org/maven2/org/apache/maven/archetypes/maven-archetype-webapp/1.0/maven-archetype-webapp-1.0.pom) ://repo.maven.apache.org/maven2/org/apache/maven/archetypes/maven-archetype-webapp/1.0/maven-archetype-webapp-1.0.pom ”

...这导致“构建失败”

在我们的案例中，需要每天在 IE 中禁用代理，因为在每个系统启动时都会设置它

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-03-12T07:22:30.950

对我来说是`File` **>** `Settings` **>** `...` **>** `BuildTools` **>** `Maven` **>** `Work Offline[■]`

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-03-31T06:48:27.313

在 IntelliJ 上，转到首选项 -> 构建、执行、部署 -> 构建工具 -> Maven。打开“始终更新快照”复选框应用并保存更改，然后执行 mvn clean install

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-08-07T08:45:30.320

您可以尝试设置代理设置：

> 文件 -> 设置 -> 外观 -> 系统设置 -> Http 代理 -> 自动检测

然后提供代理 URL。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-05-28T07:58:32.387

如果您没有使用任何代理并且仍然出现连接超时错误，请检查防火墙设置/防病毒。有时防火墙可能会阻止来自任何工具（如 Eclipse/STS 等）的连接。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2022-02-16T16:37:12.960

我将 java 版本从 1.7 更改为 1.8 并且它有效

# keyboard - 如何处理摩托罗拉 MC55 或 MC65 上的蓝色/橙色按钮（硬件按钮）

> ID：15334403
> 
> 赞同：0
> 
> 时间：2013-03-11T08:51:07.717
> 
> 标签：keyboard, windows-mobile-6.5, windows-mobile-6.1

我正在使用摩托罗拉 MC55/MC65，我发现使用`Symbol.Keyboard.KeyPad`但是当我从“KeyPad”创建一个实例时，它崩溃了，异常“不支持 KeyState 通知”。

堆栈跟踪如下所示；

```
 at v.h(IntPtr A_0, UInt32 A_1)
   at Symbol.Keyboard.KeyPad..ctor()
   at TestProj.Form1.btnOK_Click_1(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.OnClick(EventArgs e)
   at System.Windows.Forms.ButtonBase.WnProc(WM wm, Int32 wParam, Int32 lParam)
   at System.Windows.Forms.Control._InternalWnProc(WM wm, Int32 wParam, Int32 lParam)
   at Microsoft.AGL.Forms.EVL.EnterMainLoop(IntPtr hwnMain)
   at System.Windows.Forms.Application.Run(Form fm)
   at TestProj.Program.Main() 
```

我很困惑，我怎么能抓住橙色按钮或蓝色按钮被按下？

# mongodb - 在mongodb中查找具有最大值的不同文档

> ID：15334408
> 
> 赞同：3
> 
> 时间：2013-03-11T08:51:17.867
> 
> 标签：mongodb, pymongo

我在 MongoDB 中有数千个文档，其中一些示例如下：

```
{"title":"Foo", "hash": "1234567890abcedf", "num_sold": 49, 
"created": "2013-03-09 00:00:00"}

{"title":"Bar", "hash": "1234567890abcedf", "num_sold": 55, 
"created": "2013-03-11 00:00:00"}

{"title":"Baz", "hash": "1234567890abcedf", "num_sold": 55,
 "created": "2013-03-10 00:00:00"}

{"title":"Spam", "hash": "abcedef1234567890", "num_sold": 20,
 "created": "2013-03-11 00:00:00"}

{"title":"Eggs", "hash": "abc1234567890def", "num_sold": 20,
 "created": "2013-03-11 00:00:00"} 
```

是否可以选择具有 distinct且`hash`具有最大值的所有文档，`num_sold`如果有多个具有相同的文档，请从该字段中`num_sold`选择最新的文档。`created`

我使用 PyMongo 作为客户端。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T08:55:35.070

我不是 Python 专家，所以我会用 JavaScript 写这个。您可以使用`$sort`,`$group`和`$first`运算符在聚合框架中执行此操作：

```
db.col.aggregate([
    {$sort: {created:-1}},
    {$group: {_id: '$hash', num_sold: {$first: '$num_sold'}, _id_seen: {$first: '$_id'}}}
]) 
```

本质上，我所做的是按传入文档的创建日期 DESC 对传入文档进行排序，然后我对哈希进行分组，连接两个重复的哈希，然后我得到排序组的第一个结果，它应该是最新的文档。

参考：

*   [http://docs.mongodb.org/manual/reference/aggregation/first/#_S_first](http://docs.mongodb.org/manual/reference/aggregation/first/#_S_first)

# c# - 如何将桌面路径添加到 app.config 文件？

> ID：15334410
> 
> 赞同：0
> 
> 时间：2013-03-11T08:51:22.987
> 
> 标签：c#, app-config

我正在创建一个 C# win 表单应用程序，用户可以在其中指定任何位置来保存文件。但是，默认情况下我需要提供桌面路径。但是桌面路径的变化取决于windows版本，我发现： `Environment.GetFolderPath(Environment.SpecialFolder.Desktop);` 可以获取任意windows版本的桌面路径。但问题是如何将此代码添加到`App.config`文件中？是否有特殊的 xml 代码块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T08:56:55.653

您必须将设置文件添加到您的项目中。您需要在应用程序范围内创建一个属性。您可以通过以下方式访问此属性

```
string path = Properties.Settings.Default.Path;
if(string.IsNullOrEmpty(path))
{
   path = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:07:20.590

通过[AppDomain.GetData](http://msdn.microsoft.com/en-us/library/system.appdomain.getdata.aspx)和[AppDomain.SetData](http://msdn.microsoft.com/en-us/library/37z40s1c.aspx)
在您的应用程序中有一个类似 DESKTOP_DIRECTORY 的常量并将其值设置为`SpecialFolders.Desktop`
您可以使用`AppDomain.GetData`它来检索它。
然后，您可以在`App.config`文件中使用它。

# python - 计算一列中的字符串总数

> ID：15334413
> 
> 赞同：-5
> 
> 时间：2013-03-11T08:51:29.520
> 
> 标签：python, perl, awk

我想计算多个文件中的唯一行：

**f1.txt**

```
2039-177 GRAPE
2039-177 GRAPE
2039-176 GRAPE
2039-176 GRAPE
234-450  APPLE 
```

**f2.txt**

```
690-346 MANGO
690-346 MANGO
347-348 GRAPE
4350-350 MANGO 
```

**期望的输出**

```
Total no:of grapes  - 3
Total no:of mangoes - 2
Total no:of apples  - 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:50:02.990

纯 Perl：

```
$ perl -lane '$seen{$_}++ or ++$n{lc $F[1]};
  END{print "Total no:of ${_}s - $n{$_}"
        for sort { $n{$b} <=> $n{$a} } keys %n}' f1.txt f2.txt
Total no:of grapes - 3
Total no:of mangos - 2
Total no:of apples - 1 
```

管道：

```
$ cat f1.txt f2.txt | uniq | \
  perl -lanE '++$n{lc$F[1]};END{say"Total no:of ${_}s - $n{$_}"for keys%n}' | \
  sort -nrk5
Total no:of grapes - 3
Total no:of mangos - 2
Total no:of apples - 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:06:20.260

大概是这样的？（未经测试。）

此解决方案需要输入文件的名称作为命令行上的参数。

```
use strict;
use warnings;

use List::Utils 'max';

my %count;
$count{ (split)[1] }++ while <>;

my $len = 1 + max map length, keys %count;

for (keys %count) {
    printf "Total no:of %-*s - %d\n", $len, lc $_.'s', $count{$_};
} 
```

# montecarlo - 蒙特卡洛方法崩溃？

> ID：15334416
> 
> 赞同：0
> 
> 时间：2013-03-11T08:51:40.217
> 
> 标签：montecarlo

我在尝试对此函数实施蒙特卡洛方法时遇到了一个大问题：

```
D=log(T) 
```

哪里`T`是测量的时间，所以`T>0`，而且，很明显，它具有正态分布。

我在实验中有 10 个测量值`T`，所以我计算：

```
m_T (mean of T)  = 3.0 seconds
s_T (standard deviation of T)= 1.5 seconds 
```

而且，我用这个参数模拟`T`，然后，D：

```
T = Normal(m_T, s_T)
D=log(Normal(m_T, s_T) 
```

但在`D`程序中返回错误。当我净化时，我发现错误是因为 Normal`(m_T, s_T)`有一些 NEGATIVE 值，所以 log(NEGATIVE) 崩溃了！

我被阻止了，我不知道如何继续……有什么建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:15:30.210

根据定义，正态分布总是产生负值的有限概率。那么你所测量的（时间）并不是*严格*的正态分布。

截断的[正态分布](http://en.wikipedia.org/wiki/Truncated_normal_distribution)将概率 0 分配给不属于特定范围的每个值，但是通过忽略低于 0 的值，您将修改分布的均值和方差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:30:20.573

一些评论：

1.  `obviously, it has a normal distribution.`这一点都不明显。[使用Log Normal distribution](http://en.wikipedia.org/wiki/Log-normal_distribution)可能会更好。我强烈怀疑截断的法线不是您所追求的。使用您的参数，我们得到的数字是结束。请注意，它在 处具有相当高的概率`x=0`。

2.  相反，您想使用对数正态分布、指数分布或其他更合适的分布。您可以将真实分布的[时刻](http://en.wikipedia.org/wiki/Log-normal_distribution#Location_and_scale)与您的观察值匹配，或使用它们的最大似然估计量。

![在此处输入图像描述](../Images/9ae908e4b1a66ceba141395dfd762334.png)

# sorting - 使用 lua 对嵌套表进行排序

> ID：15334417
> 
> 赞同：2
> 
> 时间：2013-03-11T08:51:43.340
> 
> 标签：sorting, lua, lua-table

我有下表：

```
{
  STANDBY = {
    timeout = "10",
    mode = "0"
  },
  RTP = {
    minport = "10000",
    maxport = "10010"
  }
} 
```

我想按字母顺序排序，所以结果表应该是这样的：

```
{
  RTP = {
    maxport = "10010",
    minport = "10000"
  },
  STANDBY = {
    mode = "0",
    timeout = "10"
  },
} 
```

你能帮我么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T09:14:01.540

引用[Lua 编程中的以下内容：19.3](http://www.lua.org/pil/19.3.html)。

> 一个常见的错误是尝试对表的索引进行排序。在表中，索引形成一个集合，并且没有任何顺序。如果要对它们进行排序，则必须将它们复制到数组中，然后对数组进行排序。
> 
> 如果您使用 遍历表`pairs()`，则名称以任意顺序出现。但是，您不能直接对它们进行排序，因为这些名称是表的键。

解决方法也在同一页面上提到。

```
local tableVarName = {
    STANDBY = {
        timeout = "10",
        mode = "0"
    },
    RTP = {
        minport = "10000",
        maxport = "10010"
    }
}
function pairsByKeys (t, f)
  local a = {}
  for n in pairs(t) do table.insert(a, n) end
  table.sort(a, f)
  local i = 0      -- iterator variable
  local iter = function ()   -- iterator function
    i = i + 1
    if a[i] == nil then return nil
    else return a[i], t[a[i]]
    end
  end
  return iter
end
for name, line in pairsByKeys(tableVarName) do
  print(name, line)
end 
```

# java - 金钱的Java正则表达式

> ID：15334422
> 
> 赞同：-6
> 
> 时间：2013-03-11T08:52:00.443
> 
> 标签：java, regex, jakarta-ee, logic

我想为金钱制作正则表达式，可以用**逗号、假定小数、负号或括号、美元符号、小数、数字验证金额。**

我使用了以下表达式

```
((\\$?(([0-9]{0,1})?\\.[0-9]{1,2}))|(\\$?([1-9]{1}[0-9]{0,2}([,][0-9]{3})*)(\\.[0-9]{1,2})?)) 
```

它适用于 23,000 美元等，但如何处理负号或括号

请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T08:54:05.320

货币金额 US & EU（美分可选） 可以使用美式**123,456.78**表示法和欧式**123.456,78**表示法。可选的千位分隔符；可选的两位小数

```
Match; JGsoft:
^[+-]?[0-9]{1,3}(?:[0-9]*(?:[.,][0-9]{2})?|(?:,[0-9]{3})*(?:\.[0-9]{2})?|(?:\.[0-9]{3})*(?:,[0-9]{2})?)$ 
```

参考：[这里](https://stackoverflow.com/questions/354044/what-is-the-best-u-s-currency-regex?answertab=active#tab-top)

# python - 无法在 Python 中定义基本函数

> ID：15334423
> 
> 赞同：1
> 
> 时间：2013-03-11T08:52:01.987
> 
> 标签：python, function

我刚刚开始学习用 Python 编码。**我按照Coursera**教程中的说明进行操作，但在 Python 中定义基本函数时遇到了问题。

我的代码如下：

```
>>> 
>>> def f(x):
    return x*2
f(3)
SyntaxError: invalid syntax
>>> 
>>> 
```

我正在使用以下 Python 包：

**Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 01:25:11) [GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] 在 darwin**

本教程中显示的相同代码似乎在使用 Python 3.2.3 时运行良好。欣赏一些建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T08:55:24.710

IDLE Shell 一次只能解析一个代码块。函数定义和函数调用被视为不同的“块”，因此您需要将它们分开，方法是在函数定义后再次按 Enter 键。

```
>>> def f(x):
    return x*2

>>> f(3)
6 
```

请注意，此上下文中的“块”基本上只是一个独立的代码行，或者任何缩进并以冒号 ( `:`) 结尾的行开头的代码。

就像@Duncan 提到的那样，空行仅在交互式外壳中是必需的 - 它需要知道该块是否还有更多内容，或者您​​已经完成并且您希望代码运行。在普通`.py`文件中，空行无关紧要，因为解释器会知道要做什么，因为代码已经完整地编写了。

# xcode - xcode 模拟器在尝试测试不同的故事情节时不断改变硬件设备模式

> ID：15334425
> 
> 赞同：3
> 
> 时间：2013-03-11T08:52:03.447
> 
> 标签：xcode, storyboard, ios-simulator, hardware, device

我的模拟器有点奇怪，我希望有人能帮助我。下面的代码在我的 AppDelegate 中。根据正在运行的设备，我有不同的故事板。设备检测代码似乎工作正常，但我在将模拟器硬件 - >设备保持在我想要的位置时遇到问题。

1.  项目设置为“通用”，模拟器设置为 iPhone。模拟器将自己更改为 iPhone 模拟器并作为 iPhone 运行。
2.  项目设置到 iPad，模拟器到 iPad，作为 iPad 运行。将项目设置回通用，模拟器设置回 iPhone，模拟器将自身重置回 iPad 并将代码作为 iPad 运行。
3.  项目设置为 iPhone，将模拟器留在 iPad 上。在 iPad 上作为 iPhone 应用程序运行？？

....以及多种不同的变体。尝试多次重启Mac和xcode，没有效果。如果我重置模拟器并在模拟器上而不是通过 xcode 运行项目图标，模拟器将保持在我放入的硬件模式下。有什么想法吗？

* * *

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // testing for iPad detection
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        // setting storyboard name
        [[Data sharedData] setStoryboardName:@"MainStoryboardPad"];

        // going to the 4" screen story board and settng it as the root controller
        self.window = [[UIWindow alloc] initWithFrame:UIScreen.mainScreen.bounds];
        UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboardPad" bundle:nil];
        UIViewController *viewController = [storyboard instantiateViewControllerWithIdentifier:@"Intro Screen"];

        // making that tab controller the root controller
        self.window.rootViewController = viewController;
        [self.window makeKeyAndVisible];
        return YES;
    }
    else
    {
        // detecting screen size
        if (([UIScreen mainScreen].scale == 2) && ([[UIScreen mainScreen] bounds].size.height == 568))
        {
            // setting storyboard name
            [[Data sharedData] setStoryboardName:@"MainStoryboard40"];

            // going to the 4" screen story board and settng it as the root controller
            self.window = [[UIWindow alloc] initWithFrame:UIScreen.mainScreen.bounds];
            UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard40" bundle:nil];
            UIViewController *viewController = [storyboard instantiateViewControllerWithIdentifier:@"Intro Screen"];

            // making that tab controller the root controller
            self.window.rootViewController = viewController;
            [self.window makeKeyAndVisible];
            return YES;
        }
        else
        {
            // setting storyboard name
            [[Data sharedData] setStoryboardName:@"MainStoryboard35"];

            // going to the 3.5" screen story board and settng it as the root controller
            self.window = [[UIWindow alloc] initWithFrame:UIScreen.mainScreen.bounds];
            UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard35" bundle:nil];
            UIViewController *viewController = [storyboard instantiateViewControllerWithIdentifier:@"Intro Screen"];

            // making that tab controller the root controller
            self.window.rootViewController = viewController;
            [self.window makeKeyAndVisible];
            return YES;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T03:25:20.673

如果我正确理解了您的问题，那么您遇到的问题是您在模拟器中作为 iPad 运行您的应用程序时遇到了困难，因为它不断变回 iPhone。这是因为您需要在 Xcode 的顶部工具栏中选择要在哪个模拟器中运行应用程序：

![点击菜单](../Images/aa05efb4b34fbed370ceecc840b6b784.png)

![选择您要运行的模拟器](../Images/67079ad24f8083239f8dd77d09f329cc.png)

之后，单击运行，您选择的 iOS 模拟器应该会打开并运行您的应用程序。

# php - 坚持调用 Jquery 函数

> ID：15334426
> 
> 赞同：0
> 
> 时间：2013-03-11T08:52:04.847
> 
> 标签：php, javascript, jquery, ajax

我有这个代码：

```
<div id='mainTop'>                 
    <span></span>
    <button><h3>Search</h3></button>
    <div class='inputField'><input type='text' name='search' size=45></div>
</div>

<script>
    function showPage(page,key)    {   
        if(!key)
            $.get("showPage.php?page="+page,function(data){
                /**
                 *    Insert HTML result from PHP file
                 *    Then edit table color
                 *    In the end call function buttonPage()
                 */
                $("#mainTable").html(data);
                $("#mainTable tr:odd td").css("background-color","#e3f0ad");
                buttonPage(page);
            });
        else
            $.get("showPage.php?page="+page+"&key="+key,function(data){
                $("#mainTable").html(data);
                $("#mainTable tr:odd td").css("background-color","#e3f0ad");
                buttonPage(page,key);
            });
    }

    $("#mainTop button").click(function(){
        key= $("#mainTop input").val();
        if(!key)
            showPage(1,key);
    });
</script> 
```

我想要的是有一个输入字段和一个按钮来搜索数据库。
如果 key 为空，那么我不会将 key 参数传递给 php 文件，而只是打印出数据库。
如果键不为空，则将键参数传递给 php 文件并使用该键在数据库中搜索。
我尝试自己运行 php 文件并且它可以工作，但是当我单击按钮时没有任何反应，所以我认为我的脚本有一些问题。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:03:01.503

您的代码必须更正如下

```
$("#mainTop button").click(function(){
   var key= $("#mainTop input").val();  
    if(key)
        showPage(1,key);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:27:14.503

您没有设置按钮单击事件...将 Onclick 事件添加到您的 html 代码中...

```
<button onclick="showPage()"><h3>Search</h3></button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:10:11.400

在绑定点击的函数中，您`key`在调用`showPage`. 因此，尽管您检查了`key` *内部*（`showPage()`总是发出请求但决定是否发送密钥），但`showPage()`如果您在输入中提供任何内容，您永远不会进入。

这段代码：

```
$("#mainTop button").click(function(){
    key= $("#mainTop input").val();
    if(!key)
        showPage(1,key);
}); 
```

应该是：

```
$("#mainTop button").click(function(){
    key = $("#mainTop input").val();

    showPage(1,key);
}); 
```

# statusbar - 如何在 Komodo Edit 中隐藏状态栏

> ID：15334428
> 
> 赞同：0
> 
> 时间：2013-03-11T08:52:10.530
> 
> 标签：statusbar, komodo, komodoedit

你好我正在使用 Komodo Edit 并想隐藏状态栏

也许 shell 执行的一些选项在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T17:56:23.780

尝试将以下内容添加到您的 userChrome.css 文件中（您可以在操作系统的默认位置找到和/或创建此文件以用于 Komodo 设置文件，如下所述[。](http://community.activestate.com/faq/komodo-file-locations#appdata_dir)在 OS X 上，例如，该文件的 Komodo 编辑版本将位于在 ~/Library/Application Support/KomodoEdit/8.0/XRE/chrome/userChrome.css）。

```
#statusbarviewbox {
    display: none;
} 
```

此外，可以在[此页面上找到关于自定义 UI 的一些完整指南，并且可以在](http://community.activestate.com/faq/customizing-the-komodo-ui)[此处](http://community.activestate.com/node/6810)找到创建“全屏”模式（除了主编辑窗口之外没有所有内容）的非常漂亮的宏。

# python - 如何动态扩展 StarCluster/qsub/EC2 以跨多个节点运行并行作业

> ID：15334429
> 
> 赞同：1
> 
> 时间：2013-03-11T08:52:11.677
> 
> 标签：python, hadoop, qsub, parallel-python, starcluster

我是使用 Startcluster/qsub/grid engine 来运行并行作业的新手，我尝试阅读其他一些相同的帖子。我仍然不确定如何为我的特定需求构建可扩展的解决方案。在继续之前，我想接受更多建议。

以下是我的要求：

1.  我有一个巨大的 tar 文件 [~40 - 50 GB，它可以达到 100GB] -----> 我在这里无能为力。我接受了一个巨大的单个 tar 文件作为输入。

2.  我必须解压并解压缩它----->我运行 tar xvf tarfilename.tar | 并行 pbzip -d 解压缩和解压缩相同。

3.  这种解压缩的输出是几十万个文件，大约 500,000 个文件。

4.  必须处理此未压缩文件。我有模块化代码，可以接收每个文件并处理它并输出 5 个不同的文件。

Tar File -----Parallel Uncompression---> Uncompressed Files -----Parallel Processing ---> 每个文件处理 5 个输出文件

1.  我目前有一个在 16 核、16GB 内存上运行的并行 python 脚本，它接收这个未压缩文件列表并并行处理相同的文件。

2.  问题是我如何无缝扩展。例如，如果我的代码已经运行了 10 个小时，并且我想再添加一台 8 核机器，我不能在并行 python 中执行它，因为我必须提前知道处理器的数量。

3.  同时，当我在当前集群中动态添加更多节点时，数据的可访问性和读写操作如何？

因此，我开始阅读并使用 starcluster 和 qsub 进行基本实验。虽然我看到我可以通过 qsub 提交多个作业，但我将如何使其从未压缩的输入文件夹中获取输入文件？

例如，我可以编写一个 script.sh 在 for 循环中一个一个地选择文件名并将其提交给 qsub 命令吗？还有其他有效的解决方案吗？

比如说，如果有 3 台机器，每台机器有 16 个 CPU，如果我向队列提交 48 个作业，qsub 是否会在集群的不同 CPU 中自动启动它们，或者我是否必须使用并行环境参数，如 -np orte 命令设置数量每个集群中的 CPU 数量。是否有必要让我的 python 脚本 MPI 可执行？

总而言之，我有几十万个文件作为输入，我想将它们提交给多核机器的作业队列。如果我动态添加更多机器，作业应该会自动分配。

另一个主要挑战是我需要在最后汇总 500,000 次操作的所有输出吗？是否有关于如何在输出被写出时聚合并行作业的输出的建议？

我正在测试运行几个场景，但我想知道是否有人尝试过类似的场景。

使用 Hadoop 插件有什么建议吗？[http://star.mit.edu/cluster/docs/0.93.3/plugins/hadoop.html](http://star.mit.edu/cluster/docs/0.93.3/plugins/hadoop.html)

在此先感谢卡西克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T04:49:18.430

在研究了可用于动态扩展的各种选项一段时间后，我决定使用队列机制将作业分配给多个工作人员。

Job_Manager - 读取输入，构造作业，将作业添加到队列中 SQS 队列是队列服务 Worker 进程 - 侦听队列并处理输出。

输入/输出驱动器是 NFS 并且可供所有服务器/客户端使用。

要动态扩展，请在 /exports 中添加 NFS 客户端信息并重新启动服务器。活动客户端在其各自的 fstab 中有一个 rw,hard,intr 配置。通过在新客户端中启动 n 个工作进程，可以将更多工作人员添加到进程中。

到目前为止，它是可靠的并且可以很好地扩展。我能够在 3 台机器上启动近 90 名工作人员，并在不到 5 小时内处理 200,000 个文件。早些时候，这需要将近 24 小时才能完成，因为我无法在多个节点上分发数据和运行工作程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:35:58.017

1.  I/O 和数据共享。如果您的 I/O 较低，您可以将数据留在主节点上并使用 nfs 在您的节点之间共享。如果您有大量 I/O，我建议您使用 S3 存储桶。

2.  分发：启动多个 qsub 的 bash 脚本是正确的做法。您可以在单个文件上调用它，也可以一次在几个文件上调用它。

3.  扩展：将集群上运行的并行作业视为不同的任务。您可以在每个节点上运行 1 个或多个应用程序实例。例如：如果您使用 cr1.8xlarge 节点，则您有 32 个核心。您可以使用 32 个内核启动 1 个应用程序实例，或使用 8 个内核启动 4 个应用程序实例。请参阅 Open Grid Engine 中每个节点的“槽”配置。（如果你更愿意运行一个结合多个节点核心的应用程序的大实例，我从来没有这样做过，所以我无法帮助你。）然后，要添加一个节点，你可以使用“addnode”来自 StarCluster 的命令。一旦节点启动，OGS 也会自动在那里分配作业。您还可以使用 StarCluster 负载均衡器自动添加/删除节点。

所以，这是我的建议。1\. 将您的文件解压缩到 S3。2\. 启动 StarCluster 3\. 使用您的 bashscript，qsub 每隔几个文件执行一个作业（对于一个作业处理 10 个文件可能比处理每个单个文件的作业更有效） 4\. 您的应用程序必须 I/O 到 s3 . 5\. 当队列为空时，让脚本查看结果以确保所有作业都运行良好。当输出丢失时，您可以重新安排作业。

*   我不知道您的聚合是如何完成的，所以我无法判断。
*   我从来没有使用过hadoop，所以我也无能为力。
*   您无需使您的 python 脚本 MPI 可执行。
*   如果您使用异构集群，那么您从一开始就知道每个节点上有多少内核可用。
*   如果您将具有 32 个核心的节点定义为具有 4 个插槽，那么您应该让您的作业每个最多使用 8 个核心。

# c# - 项目已过时，Visual Studio 2012

> ID：15334433
> 
> 赞同：0
> 
> 时间：2013-03-11T08:52:32.300
> 
> 标签：c#, visual-studio-2012, installshield

我正在使用 Visual Studio 2012。当我开始使用“**安装屏蔽**”创建安装文件时，但我遇到了一个问题`project is out of date`。我确实在 Google、MSDN 上进行了搜索，但我没有找到修复它的正确答案。当我构建它时，它在构建过程中显示错误

```
Error   3   -3204: Cannot extract icon with index 0 from file C:\Users\Own\Documents\Visual Studio 2012\Projects\MyRibbonAddIn\MyRibbonAddIn\obj\Debug\MyRibbonAddIn.dll.   ISEXP : error : -3204: Cannot extract icon with index 0 from file C:\Users\Own\Documents\Visual Studio 2012\Projects\MyRibbonAddIn\MyRibbonAddIn\obj\Debug\MyRibbonAddIn.dll. 
```

我也添加了图标，但没有找到该图标。我应该怎么做才能解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-15T11:18:06.223

**简单的解决方案：**

> 在安装向导时，在我们浏览资源路径后，缺少重新选择快捷方式的图像/图标。缺少此会导致此索引错误（请参阅屏幕截图）。重新选择后[![在此处输入图像描述](../Images/98d2f2933ce6d92407615eb4f661444f.png)](https://i.stack.imgur.com/ikpMZ.png)需要重建，这解决了问题。

# c++ - 如何检查进程是否关闭/活着？

> ID：15334442
> 
> 赞同：4
> 
> 时间：2013-03-11T08:53:15.610
> 
> 标签：c++, winapi, time, process

我正在用 C++ 编写程序。在我的代码中，我使用函数[CreateProcess运行进程](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx)*A*。进程*A*启动另一个进程*B*。*B*工作一段时间然后关闭。*B*的运行时间取决于各种参数。有时*B*工作 1 小时，但有时 - 几乎工作 2 小时。我需要知道*B*何时结束工作（当*B*关闭时）。如何检查第二个程序*B*的关闭？换句话说，是否有任何函数（例如，在 WINAPI 中）来检查进程是否处于活动状态？

 **** * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T09:00:20.630

使用[`WaitForSingleObject()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms687032%28v=vs.85%29.aspx), 传入进程句柄。***

# android - webview中的html select标签似乎有问题

> ID：15334446
> 
> 赞同：2
> 
> 时间：2013-03-11T08:53:31.730
> 
> 标签：android, html, select, webview, crash

我用一个简单的 webview 完成了一个应用程序；当我从我的网页视图打开页面“search.php”并触摸 html 选择以从不同类型的单词中进行选择..但是......休斯顿！我们有问题！:D 当我在输入字段中写下我需要的内容时，一切正常，但是当我触摸（仅触摸）选择字段以选择我需要的内容时（我可以选择几种当地人，例如：酒吧、迪斯科、餐厅..等...）我的应用程序崩溃！我问为什么？如果我将相同的 html 选择放在另一个页面（例如contact.php）应用程序不会崩溃.. 有什么问题？

在这里，我用我的 Galaxy s2 完成的屏幕截图。看看，当我触摸 html 选择标签时（你可以看到它，因为它是浅蓝色的），我已经完成了屏幕截图，并且显然应用程序崩溃了。哈哈！

![](../Images/933ffba63d9fc45a76cfb7b777f4d570.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T00:04:51.473

确保您的 WebView 已使用 Activity 上下文进行初始化。我之前遇到过这个问题，这是因为我们使用了错误的上下文。WebView 运行所在的 Activity 应该传入 WebView 的构造函数中。

# jsf-2 - JSF 扩展 ViewScope？

> ID：15334450
> 
> 赞同：0
> 
> 时间：2013-03-11T08:53:40.763
> 
> 标签：jsf-2

我有一个带有一些 bean 的 webapp，非常适合作为`ViewScoped`托管 bean。我使用了一个管理的*向导*，它也具有相同的范围，它有时会丢失它的窗口选项卡；当然，返回时会重新创建向导。有没有可能以某种方式扩展这个范围，因为我的`wizard`bean 在返回时不会被丢弃和重新创建？

在这种情况下，哪一个是我最好的选择？我也`session scope`用于`wizard`，但我必须从上下文中删除 bean，我认为这不是一个很好和干净的方法。（问题是我必须将所有内容都`managed properties`设为`session scopes`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:16:35.323

您可以使用[CDI 的对话范围](http://docs.jboss.org/weld/reference/1.0.0/en-US/html/scopescontexts.html)，您必须自己设置对话的开始和结束（例如您的向导工作流程）。

但是请注意，将 JSF ManagedBeans 注入到 CDI bean 中并不总是可行的，反之亦然。[请参阅此相关答案](https://stackoverflow.com/a/9921449/620338)。在切换到 CDI 之前，请确保它在您的特殊设置中工作。

如果您使用像 Primefaces 这样的组件库，那么您也可以使用一个[向导组件](http://www.primefaces.org/showcase/ui/wizard.jsf)。

# php - 连续自动填充 2 个下拉列表（使用 AJAX 提供），并在会话中使用值。第一个触发第二个

> ID：15334452
> 
> 赞同：0
> 
> 时间：2013-03-11T08:53:52.440
> 
> 标签：php, javascript, jquery, html, session

祝大家有美好的一天，

我在一个表单上有两个下拉列表，其中第二个中的值是从第一个中所做的选择中填充的。为了保留表单重新加载的值，第一个下拉列表中的值在加载时填充，但`onchange`事件不会被触发（当我从第一个下拉列表中手动选择值时它会起作用），因此第二个下拉列表不会自动填充。

在两个下拉列表中选择的值都存在于会话中。

概括 -

*   在重新加载时填充第一个下拉列表 - >完成
*   选择其先前存储在会话中的值-> 完成
*   根据第一个选择加载第二个下拉列表中的值-> 挂起:(
*   在会话中选择第二个下拉列表的值 -> 挂起 :(

我有点卡住了，有人可以提出一些建议吗？顺便说一句，我正在使用 PHP 和 jQuery。

基本上，在意外的页面重新加载时，下拉菜单必须像多米诺骨牌一样被填充，tish tish tish，它们每个的值都在会话中可用，（在重新加载之前保存）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:49:55.457

`change`您可以在第一个选择已填充时手动触发该事件：

```
// trigger onchange on the first select in the page
document.getElementsByTagName("select")[0].onchange();

// trigger onchange on #theselect
document.getElementById("theselect").onchange(); 
```

# ruby-on-rails - 为什么资产管道文件中的 Rails I18n.t 不起作用？

> ID：15334454
> 
> 赞同：6
> 
> 时间：2013-03-11T08:53:53.493
> 
> 标签：ruby-on-rails, asset-pipeline, rails-i18n

我想`I18n.t`在资产管道`js.coffee.erb`文件中使用助手。

我的本地文件：

```
zh-CN:
  hello: 你好 
```

在`hello.js.coffee.erb`：

```
$->
  alert '<%= t(:hello) %>' 
```

这将导致`"Encoding::InvalidByteSequenceError - "\xE5" on US-ASCII"`错误。

资产管道文件是否支持使用`I18n.t`助手？

错误日志：

```
Encoding::InvalidByteSequenceError - "\xE5" on US-ASCII
  (in /.../hello.js.coffee.erb):
  (gem) activesupport-3.2.12/lib/active_support/json/encoding.rb:123:in `escape'
  (gem) activesupport-3.2.12/lib/active_support/json/encoding.rb:69:in `escape'
  (gem) activesupport-3.2.12/lib/active_support/json/encoding.rb:177:in `encode_json'
  (gem) activesupport-3.2.12/lib/active_support/json/encoding.rb:220:in `block in encode_json'
  (gem) activesupport-3.2.12/lib/active_support/json/encoding.rb:220:in `encode_json'
  (gem) activesupport-3.2.12/lib/active_support/json/encoding.rb:48:in `block in encode'
  (gem) activesupport-3.2.12/lib/active_support/json/encoding.rb:77:in `check_for_circular_references'
  (gem) activesupport-3.2.12/lib/active_support/json/encoding.rb:46:in `encode'
  (gem) activesupport-3.2.12/lib/active_support/json/encoding.rb:31:in `encode'
  (gem) activesupport-3.2.12/lib/active_support/core_ext/object/to_json.rb:16:in `to_json'
  (gem) multi_json-1.6.1/lib/multi_json/adapters/json_common.rb:10:in `dump'
  (gem) multi_json-1.6.1/lib/multi_json.rb:122:in `dump'
  (gem) execjs-1.4.0/lib/execjs/json.rb:11:in `encode'
  (gem) execjs-1.4.0/lib/execjs/external_runtime.rb:33:in `call'
  (gem) coffee-script-2.2.0/lib/coffee_script.rb:57:in `compile'
  (gem) tilt-1.3.5/lib/tilt/coffee.rb:46:in `evaluate'
  (gem) tilt-1.3.5/lib/tilt/template.rb:77:in `render'
  (gem) sprockets-2.2.2/lib/sprockets/context.rb:193:in `block in evaluate'
  (gem) sprockets-2.2.2/lib/sprockets/context.rb:190:in `evaluate'
  (gem) sprockets-2.2.2/lib/sprockets/processed_asset.rb:12:in `initialize'
  (gem) sprockets-2.2.2/lib/sprockets/base.rb:249:in `block in build_asset'
  (gem) sprockets-2.2.2/lib/sprockets/base.rb:270:in `circular_call_protection'
  (gem) sprockets-2.2.2/lib/sprockets/base.rb:248:in `build_asset'
  (gem) sprockets-2.2.2/lib/sprockets/index.rb:93:in `block in build_asset'
  (gem) sprockets-2.2.2/lib/sprockets/caching.rb:19:in `cache_asset'
  (gem) sprockets-2.2.2/lib/sprockets/index.rb:92:in `build_asset'
  (gem) sprockets-2.2.2/lib/sprockets/base.rb:169:in `find_asset'
  (gem) sprockets-2.2.2/lib/sprockets/index.rb:60:in `find_asset'
  (gem) sprockets-2.2.2/lib/sprockets/processed_asset.rb:111:in `block in resolve_dependencies'
  (gem) sprockets-2.2.2/lib/sprockets/processed_asset.rb:105:in `resolve_dependencies'
  (gem) sprockets-2.2.2/lib/sprockets/processed_asset.rb:97:in `build_required_assets'
  (gem) sprockets-2.2.2/lib/sprockets/processed_asset.rb:16:in `initialize'
  (gem) sprockets-2.2.2/lib/sprockets/base.rb:249:in `block in build_asset'
  (gem) sprockets-2.2.2/lib/sprockets/base.rb:270:in `circular_call_protection'
  (gem) sprockets-2.2.2/lib/sprockets/base.rb:248:in `build_asset'
  (gem) sprockets-2.2.2/lib/sprockets/index.rb:93:in `block in build_asset'
  (gem) sprockets-2.2.2/lib/sprockets/caching.rb:19:in `cache_asset'
  (gem) sprockets-2.2.2/lib/sprockets/index.rb:92:in `build_asset'
  (gem) sprockets-2.2.2/lib/sprockets/base.rb:169:in `find_asset'
  (gem) sprockets-2.2.2/lib/sprockets/index.rb:60:in `find_asset'
  (gem) sprockets-2.2.2/lib/sprockets/bundled_asset.rb:16:in `initialize'
  (gem) sprockets-2.2.2/lib/sprockets/base.rb:252:in `build_asset'
  (gem) sprockets-2.2.2/lib/sprockets/index.rb:93:in `block in build_asset'
  (gem) sprockets-2.2.2/lib/sprockets/caching.rb:19:in `cache_asset'
  (gem) sprockets-2.2.2/lib/sprockets/index.rb:92:in `build_asset'
  (gem) sprockets-2.2.2/lib/sprockets/base.rb:169:in `find_asset'
  (gem) sprockets-2.2.2/lib/sprockets/index.rb:60:in `find_asset'
  (gem) sprockets-2.2.2/lib/sprockets/environment.rb:78:in `find_asset'
  (gem) sprockets-2.2.2/lib/sprockets/base.rb:177:in `[]'
  (gem) actionpack-3.2.12/lib/sprockets/helpers/rails_helper.rb:126:in `asset_for'
  (gem) actionpack-3.2.12/lib/sprockets/helpers/rails_helper.rb:27:in `block in javascript_include_tag'
  (gem) actionpack-3.2.12/lib/sprockets/helpers/rails_helper.rb:26:in `javascript_include_tag'
  app/views/layouts/_head.html.slim:19:in `_app_views_layouts__head_html_slim___1053294957777409236_46504920'
  (gem) actionpack-3.2.12/lib/action_view/template.rb:145:in `block in render'
  (gem) activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'
  (gem) activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  (gem) activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'
  (gem) actionpack-3.2.12/lib/action_view/template.rb:143:in `render'
  (gem) actionpack-3.2.12/lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
  (gem) actionpack-3.2.12/lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
  (gem) actionpack-3.2.12/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  (gem) activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'
  (gem) activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  (gem) activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'
  (gem) actionpack-3.2.12/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  (gem) actionpack-3.2.12/lib/action_view/renderer/partial_renderer.rb:237:in `render'
  (gem) actionpack-3.2.12/lib/action_view/renderer/renderer.rb:41:in `render_partial'
  (gem) actionpack-3.2.12/lib/action_view/helpers/rendering_helper.rb:27:in `render'
  (gem) haml-4.0.0/lib/haml/helpers/action_view_mods.rb:12:in `render_with_haml'
  app/views/layouts/auth.html.slim:4:in `_app_views_layouts_auth_html_slim___1395664120707387056_5138760'
  (gem) actionpack-3.2.12/lib/action_view/template.rb:145:in `block in render'
  (gem) activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'
  (gem) activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  (gem) activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'
  (gem) actionpack-3.2.12/lib/action_view/template.rb:143:in `render'
  (gem) actionpack-3.2.12/lib/action_view/renderer/template_renderer.rb:59:in `render_with_layout'
  (gem) actionpack-3.2.12/lib/action_view/renderer/template_renderer.rb:45:in `render_template'
  (gem) actionpack-3.2.12/lib/action_view/renderer/template_renderer.rb:18:in `render'
  (gem) actionpack-3.2.12/lib/action_view/renderer/renderer.rb:36:in `render_template'
  (gem) actionpack-3.2.12/lib/action_view/renderer/renderer.rb:17:in `render'
  (gem) actionpack-3.2.12/lib/abstract_controller/rendering.rb:110:in `_render_template'
  (gem) actionpack-3.2.12/lib/action_controller/metal/streaming.rb:225:in `_render_template'
  (gem) actionpack-3.2.12/lib/abstract_controller/rendering.rb:103:in `render_to_body'
  (gem) actionpack-3.2.12/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  (gem) actionpack-3.2.12/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  (gem) actionpack-3.2.12/lib/abstract_controller/rendering.rb:88:in `render'
  (gem) actionpack-3.2.12/lib/action_controller/metal/rendering.rb:16:in `render'
  (gem) actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  (gem) activesupport-3.2.12/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /home/jx/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  (gem) activesupport-3.2.12/lib/active_support/core_ext/benchmark.rb:5:in `ms'
  (gem) actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  (gem) actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  (gem) actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:39:in `render'
  (gem) actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  (gem) actionpack-3.2.12/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  (gem) actionpack-3.2.12/lib/abstract_controller/base.rb:167:in `process_action'
  (gem) actionpack-3.2.12/lib/action_controller/metal/rendering.rb:10:in `process_action'
  (gem) actionpack-3.2.12/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:436:in `_run__2781514901838594071__process_action__4110693920995885568__callbacks'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
  (gem) actionpack-3.2.12/lib/abstract_controller/callbacks.rb:17:in `process_action'
  (gem) actionpack-3.2.12/lib/action_controller/metal/rescue.rb:29:in `process_action'
  (gem) actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  (gem) activesupport-3.2.12/lib/active_support/notifications.rb:123:in `block in instrument'
  (gem) activesupport-3.2.12/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  (gem) activesupport-3.2.12/lib/active_support/notifications.rb:123:in `instrument'
  (gem) actionpack-3.2.12/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  (gem) actionpack-3.2.12/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
  (gem) actionpack-3.2.12/lib/abstract_controller/base.rb:121:in `process'
  (gem) actionpack-3.2.12/lib/abstract_controller/rendering.rb:45:in `process'
  (gem) actionpack-3.2.12/lib/action_controller/metal.rb:203:in `dispatch'
  (gem) actionpack-3.2.12/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  (gem) actionpack-3.2.12/lib/action_controller/metal.rb:246:in `block in action'
  (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:36:in `call'
  (gem) journey-1.0.4/lib/journey/router.rb:68:in `block in call'
  (gem) journey-1.0.4/lib/journey/router.rb:56:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/routing/route_set.rb:601:in `call'
  (gem) meta_request-0.2.2/lib/meta_request/middlewares/app_request_handler.rb:11:in `call'
  (gem) rack-contrib-1.1.0/lib/rack/contrib/response_headers.rb:17:in `call'
  (gem) meta_request-0.2.2/lib/meta_request/middlewares/headers.rb:16:in `call'
  (gem) meta_request-0.2.2/lib/meta_request/middlewares/meta_request_handler.rb:13:in `call'
  (gem) mongoid-3.1.2/lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  (gem) mongoid-3.1.2/lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  (gem) mongoid-3.1.2/lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  (gem) warden-1.2.1/lib/warden/manager.rb:35:in `block in call'
  (gem) warden-1.2.1/lib/warden/manager.rb:34:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  (gem) rack-1.4.5/lib/rack/etag.rb:23:in `call'
  (gem) rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/head.rb:14:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/flash.rb:242:in `call'
  (gem) rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
  (gem) rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/cookies.rb:341:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `_run__1915631577033867377__call__2170704697511918287__callbacks'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  (gem) activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/reloader.rb:65:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  (gem) better_errors-0.7.2/lib/better_errors/middleware.rb:84:in `protected_app_call'
  (gem) better_errors-0.7.2/lib/better_errors/middleware.rb:79:in `better_errors_call'
  (gem) better_errors-0.7.2/lib/better_errors/middleware.rb:56:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  (gem) railties-3.2.12/lib/rails/rack/logger.rb:32:in `call_app'
  (gem) railties-3.2.12/lib/rails/rack/logger.rb:16:in `block in call'
  (gem) activesupport-3.2.12/lib/active_support/tagged_logging.rb:22:in `tagged'
  (gem) railties-3.2.12/lib/rails/rack/logger.rb:16:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/request_id.rb:22:in `call'
  (gem) rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
  (gem) rack-1.4.5/lib/rack/runtime.rb:17:in `call'
  (gem) activesupport-3.2.12/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  (gem) rack-1.4.5/lib/rack/lock.rb:15:in `call'
  (gem) actionpack-3.2.12/lib/action_dispatch/middleware/static.rb:62:in `call'
  (gem) railties-3.2.12/lib/rails/engine.rb:479:in `call'
  (gem) railties-3.2.12/lib/rails/application.rb:223:in `call'
  (gem) rack-1.4.5/lib/rack/content_length.rb:14:in `call'
  (gem) railties-3.2.12/lib/rails/rack/log_tailer.rb:17:in `call'
  (gem) thin-1.5.0/lib/thin/connection.rb:81:in `block in pre_process'
  (gem) thin-1.5.0/lib/thin/connection.rb:79:in `pre_process'
  (gem) thin-1.5.0/lib/thin/connection.rb:54:in `process'
  (gem) thin-1.5.0/lib/thin/connection.rb:39:in `receive_data'
  (gem) eventmachine-1.0.3/lib/eventmachine.rb:187:in `run'
  (gem) thin-1.5.0/lib/thin/backends/base.rb:63:in `start'
  (gem) thin-1.5.0/lib/thin/server.rb:159:in `start'
  (gem) rack-1.4.5/lib/rack/handler/thin.rb:13:in `run'
  (gem) rack-1.4.5/lib/rack/server.rb:268:in `start'
  (gem) railties-3.2.12/lib/rails/commands/server.rb:70:in `start'
  (gem) railties-3.2.12/lib/rails/commands.rb:55:in `block in <top (required)>'
  (gem) railties-3.2.12/lib/rails/commands.rb:50:in `<top (required)>'
  script/rails:6:in `<main>'
  script/rails:0:in `<main>' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T21:50:21.540

首先，确保你`zh-CN.yml`的编码是**UTF-8**，它看起来像是用**US-ASCII**编码的。

# I18n.js

您可以使用`i18n-js`gem 将 Javascript 国际化添加到 Rails 资产管道（请参阅[https://github.com/fnando/i18n-js](https://github.com/fnando/i18n-js)）。

`i18n-js`gem 会自动将目录中的翻译转换为`config/locales/`javascript。添加此 gem 后，`I18n.t`直接在您的 javascript 中调用（不带`<%=`and `%>`）。翻译存储在 javascript 中，可以在`http://localhost:3000/assets/i18n/translations.js`.

请注意，i18n-js 可能不会在请求之间完全加载，因此您可能仍会`TranslationMissing`不时收到错误，但是当您编译资产时这些应该会消失。如果在开发过程中发生这种情况，请尝试重新加载页面。

## 采用

1.  添加`gem 'i18n-js'`到您的`Gemfile`.
2.  运行`bundle install`。
3.  将`zh-CN.yml`文件添加到`config/locals/`：

    ```
    zh-CN:
      hello: 你好 
    ```

4.  在`application.js`中，在之前添加 i18n 库`//= require_tree .`并设置您的默认语言环境（确保保留空白行）：

    ```
    //= require i18n
    //= require i18n/translations
    //= require_tree .

    I18n.defaultLocale = "zh-CN"; 
    ```

5.  完成后，您的`hello.js.coffee.erb`文件应如下所示：

    ```
    $ ->
      alert I18n.t('hello') 
    ```

然后，当您访问该页面时，您应该会收到正确的国际化警报。

![在此处输入图像描述](../Images/3e35df478d573004a2beadf0f9230a1c.png)

# django-admin - django admin：CharField 显示不反映数据库值

> ID：15334464
> 
> 赞同：0
> 
> 时间：2013-03-11T08:54:15.640
> 
> 标签：django-admin

```
IS_ACTIVE = (
    (0,'Inactive'),
    (1,'Active'),
)

class Pagerule(models.Model):
    pagehash = models.CharField(max_length=32,editable=False)
    is_active = models.BooleanField(blank=False, choices=IS_ACTIVE, default=0)
    page_type = models.CharField(max_length=1, choices=PAGETYPE, blank=False, verbose_name="Page Type") 
```

`Pagerule`保存a 时，`IsActive`字段上的选择正确地通过 1`Active`和 0，`Inactive`但在重新打开时，下拉菜单似乎总是指向`IS_ACTIVE`ie中的第一个条目，而与DB`Inactive`中的相应值无关。`is_active`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:40:30.750

原来是类型不匹配的问题。

IS_ACTIVE = ( ( `False`,'Inactive'), ( `True`,'Active'), ) is_active = models.BooleanField(blank=False, Choices=IS_ACTIVE, default= `False`)

# python - How to map characters to integer range [-128, 127] in Python?

> ID：15334465
> 
> 赞同：0
> 
> 时间：2013-03-11T08:54:18.020
> 
> 标签：python, range, modulo, negative-number

I would like to convert a list of characters (represented on a single byte ie. the range [0, 255]) to be represented with integers in the range [-128,127]. I've read that Python's modulo operator (`%`) always return a number having the same sign as the denominator.

What is the right way to do this conversion in Python?

**EDIT** Characters that map to [128,255] with `ord` should be remapped to [-128,-1], with 128 mapped to -128 and 255 mapped to -1\. (For the inverse of the conversion I use `chr(my_int%256)`, but `my_int` can be a negative number.)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T09:19:01.753

I've found out that I could do this conversion with "[unpack](http://docs.python.org/2/library/struct.html#struct.unpack)ing from [byte](http://docs.python.org/2/library/struct.html#format-characters)" with the [struct](http://pymotw.com/2/struct/) module:

```
# gotcha|pitfall: my original idea, but this generates a list of 1-tuples:
# x = [struct.unpack("b",a) for a in charlist]

fmt = "%ib"%len(charlist) # eg. "5b", if charlist's length is 5
x = struct.unpack(fmt,charlist) # tuple of ints 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T09:02:25.630

Not sure if I understood the question... You want to do something like that?

```
[i - 255 if i > 127 else i for i in [ord(l) for l in "azertyuiopqsdféhjklm3{"]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T09:02:49.513

```
def to_ints(input):
    return [o if o <= 128 else 255 - o for o in [ord(char) in input]]

def to_str(input):
    return "".join([chr(i%256) for i in input])

out = to_ints("This is a test")
print to_str(out) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T09:02:11.017

I wonder what do you mean by "a list of characters", are they numbers? If so, I think `x % 256 - 128` or `x % -256 + 128` should work.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-29T17:20:49.323

This is an old question, but for future readers the straightforward solution for single integers is `(x + 128)%256 - 128`. Replace `x` with `ord(c)` if dealing with ASCII character data.

The result of the `%` operator there is congruent (mod 256) to `x + 128`; and subtracting 128 from that makes the final result congruent to `x` *and* shifts the range to [128,127].

This will work in a generator expression, and save a step in Python 3 where you'd need to convert a string to a `bytes` object.

# ruby-on-rails - Rails：如何为图像分配链接

> ID：15334467
> 
> 赞同：0
> 
> 时间：2013-03-11T08:54:48.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我需要使页面中的图像可链接。我的代码是：

```
<%= image_tag p.photos.first.avatar.url(:small) if p.photos.size > 0 %> 
```

如何使这个可链接？

尝试这样做：

```
<%= link_to (image_tag p.photos.first.avatar.url(:small) if p.photos.size > 0), product_path(p.id) %> 
```

但给出语法错误。

任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:57:13.880

更改链接以使用块形式（为了更好的可读性）

```
<%= link_to product_path(p.id) do %>
  <% if p.photos.any? %>
    <%= image_tag(p.photos.first.avatar.url(:small)) %>
  <% else %>
    <div>Default text for the link if the image is not present</div>
  <% end %>
 <% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:56:21.790

```
<%= link_to image_tag(p.photos.first.avatar.url(:small)).html_safe, product_path(p.id) if p.photos.size > 0%> 
```

# c# - Outlook com：无需兑换且无需更改安全设置即可避免安全警报

> ID：15334472
> 
> 赞同：0
> 
> 时间：2013-03-11T08:54:58.523
> 
> 标签：c#, outlook

有没有办法在不使用兑换或更改本地安全设置的情况下避免 Outlook 中的安全警报？

我们使用 ac# / .net 应用程序通过 COM 发送和阅读邮件/约会。

我听说可能有一种对应用程序进行数字签名的方法。真的吗 ？我找不到这方面的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:01:11.633

您的所有选项都列在[http://www.outlookcode.com/article.aspx?id=52](http://www.outlookcode.com/article.aspx?id=52)

对您的应用程序进行数字签名将无济于事，但安装最新的防病毒产品应该会有所帮助。

# c# - Control.Invoke() 卡住

> ID：15334474
> 
> 赞同：1
> 
> 时间：2013-03-11T08:55:01.947
> 
> 标签：c#, multithreading, backgroundworker, invoke

我知道关于这个主题有几个线程，但我认为我的不同。在我的应用程序中，我打开了一个表单，用户可以在其中输入一些参数以进行即将到来的打印。此打印应该在后台工作人员中运行。所以我用事件“OnFormClosing”解雇了那个后台工作人员。

在那个后台工作人员中，我需要访问 GUI 并更改/读取它，所以我需要一个 control.Invoke()。“有时” Invoke 一直停留在调用调用本身并且不执行委托。我的主线程工作正常，没有被阻塞。我仍然可以与 GUI 交互做其他事情。在发布任何代码之前：除了执行 control.Invoke() 是否还有其他条件

*   主 GUI 线程未被阻塞
*   contorl 必须存在，句柄已创建且不被释放

主线程不需要是空闲的，并且调用调用正确吗？一旦主线程空闲，它应该继续......

谢谢你的帮助

**更新：**

这是该问题期间的线程情况： ![在此处输入图像描述](../Images/78b7058571a9e91cd319adc73c5be796.png) 主线程正在执行此操作：

```
Application.Run(appContext); 
```

所以它是空闲的。工作线程正在此行等待：

```
fileName = (string)cbPrintFile.Invoke(new Func<String>(() => cbPrintFile.Text)); 
```

这不像我上面所说的那样执行。`cbPrintFile`是一个组合框

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:01:31.190

`Invoke`是“排队等待处理”。如果它变得“卡住”，则表明您已经死锁，例如因为 UI 线程仍在等待工作人员的事件处理程序中。如果代码正确解耦，您可能可以将 替换为`Invoke`，`BeginInvoke`这允许工作人员在排队工作后继续。当然，确保 UI 永远不会等待工作人员也是一件好事。如果试图`lock`在两个地方都持有一个（在同一个对象上），这可能会意外地完成。您可以简单地通过暂停应用程序、按+`ctrl`来调出线程和+来依次查看每个线程的调用堆栈来进行调查。`d``t``ctrl``d``c`

# reporting-services - 在 RDLC 单词报告中添加无宽度可选换行符

> ID：15334475
> 
> 赞同：0
> 
> 时间：2013-03-11T08:55:02.867
> 
> 标签：reporting-services, ms-word, rdlc

我目前正在研究 RDLC 报告以使用 VS 2010 呈现 MS Word 输出。输出用于打印不干胶标签（即在盒子内）。因此，准确地在表格内呈现文本非常重要。在某些情况下，一个单词变得相当大，它扩大了表格并且扩大了表格宽度。我打算插入“无宽度可选中断字符”（参考[http://www.techrepublic.com/blog/msoffice/use-words-no-width-optional-break-character-to-facilitate-wrapping/5385](http://www.techrepublic.com/blog/msoffice/use-words-no-width-optional-break-character-to-facilitate-wrapping/5385) ) 用于单词中的每个替代字符，以便单词中断并换行到下一行，并且表格的宽度不会受到干扰。

如何在 RDLC 报告文本框中插入“无宽度可选换行符”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:07:04.753

迭代文本并在每个文本之间插入“char zwob = '\u200C'”。此 unicode 将在 RDLC/Word 报告中插入“无宽度可选换行符”。

因此，无需扩展表格即可在需要时随时中断文本。

# asp.net - oracle clob 参数转换为字符串在 asp.net 中挂起

> ID：15334481
> 
> 赞同：4
> 
> 时间：2013-03-11T08:55:22.647
> 
> 标签：asp.net, oracle, odp.net

请找到此代码。它在我的本地机器上正常工作。它被复制到 windows server 2008 (64bit)。它工作了很多天。但现在，它正在挂起，需要 20 分钟。相同的代码在我的机器上运行得很快。如果我将 clob 转换为 varchar，它会工作，但它不支持超过 32 K。我更新了 oracle 客户端，现在它也挂了。

```
 Dim cn As New OracleConnection(ConfigurationManager.ConnectionStrings("ConnectionString").ConnectionString)
    Dim cmd As New OracleCommand
    cn.Open()

    cmd.Connection = cn
    cmd.CommandType = Data.CommandType.StoredProcedure

        cmd.CommandText = "Inet_Pkg_Menu.TopMenu"

    cmd.Parameters.Add("pBrCode", OracleDbType.Int32).Direction = Data.ParameterDirection.Input
    cmd.Parameters.Add("pRes", OracleDbType.Clob).Direction = Data.ParameterDirection.Output

    cmd.Parameters(0).Value = Session("user_code")

    cmd.ExecuteNonQuery()

    Dim s As String
    Dim olob As OracleClob

    olob = CType(cmd.Parameters("pRes").Value, OracleClob)

        s = System.Convert.ToString(olob.Value) 'Hanged line 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:41:11.697

我使用的是Oracle Clob，非常简单，不需要进行类型转换，假设它是asp.net中的字符串，下面是一个例子：

Dim sql = "select xmlagg(XMLElement("user",xmlattributes(user_id "user_id"))).getClobVal() from users" '这只是返回 clob 值的示例

将 adp 调暗为新 Data.OleDb.OleDbDataAdapter(sql, MyConnectionString)

将 dt 调暗为新数据表

adp.填充（dt）

暗淡数据 As String = dt.Rows[0][0].toString()

现在在数据变量中你有结果

# android - Android 时区

> ID：15334483
> 
> 赞同：1
> 
> 时间：2013-03-11T08:55:29.373
> 
> 标签：android, timezone

我想在 Android 应用程序中简单地显示不同国家和城市的时区。我正在创建一个天气更新应用程序，它需要国家的当地时间和显示天气的城市。谢谢

使用的代码：

```
DateFormat format = new SimpleDateFormat("MMMMM d, yyyy, h:mm a"); 
TimeZone utc = TimeZone.getTimeZone("America/New_York"); 
System.out.println(utc.getID()); 
GregorianCalendar gc = new GregorianCalendar(utc); 
Date now = gc.getTime(); 
System.out.println(format.format(now)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:02:15.850

您可以使用以下代码：

```
DateTime dt = new DateTime();

DateTime dtNewYork = dt.withZone(DateTimeZone.forID("America/New_York")) 
```

或者对于时区，您可以使用

```
DateTimeZone zone = DateTimeZone.forID("Asia/Kolkata"); 
```

这是参考[链接](http://joda-time.sourceforge.net/)

# encoding - 如何在j2me中将二进制数据转换为字符串格式

> ID：15334488
> 
> 赞同：-2
> 
> 时间：2013-03-11T08:55:40.560
> 
> 标签：encoding, java-me, compression

我在 j2me 中使用 gzip 算法。压缩字符串后，我尝试将压缩字符串作为文本消息发送，但大小急剧增加。所以我使用base64编码将压缩的二进制转换为文本。但是，虽然编码大小仍在增加，请帮助我使用一种编码技术，使用时数据大小保持不变。

我尝试发送二进制短信，但由于它的限制是 134 个字符，我想在发送短信之前对其进行压缩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:29:10.380

您在这里有一些竞争要求。
您正在考虑使用 SMS 作为传输机制的事实使我怀疑您必须发送的数据一开始就很短。
压缩算法（通常）最适合处理大量数据，并且如果您从非常短的内容开始，最终可能会创建比您开始时更长的输出。

很少有有用的编码更改会使您的输出长度与开始时相同。（我现在很难想到任何真正有用的东西。）

您可能需要考虑替代传输方法或您尝试过的压缩技术的替代方法。

# javascript - 显示后如何保存状态：无？防止页面重新加载后重置

> ID：15334491
> 
> 赞同：0
> 
> 时间：2013-03-11T08:55:57.453
> 
> 标签：javascript, jquery, show-hide

本质上，我在一个元素上默认使用 display: none ，然后在单击不同标题后使用 javascript 将隐藏元素切换到另一个元素。现在我的实现完美无缺。

唯一的问题是，当您重新加载页面时，它会返回默认值，而不是保持原样。

这段代码中发生的事情是我使用函数 hideUnhide 绑定隐藏元素的标题。单击它时，我隐藏当前元素，显示先前隐藏的元素，然后设置标题的 css 以使隐藏的元素看起来像链接，而显示的元素看起来像标题。

```
$(document).ready(function() {
    var unclicked = $('.unclickedTeam');
    unclicked.bind("click", hideUnhide);
});

function hideUnhide() {
    var unclicked = $('.unclickedTeam');
    var clicked = $('.currentTeam');
    var displayedTeam = $('.displayedTeam');
    var hiddenTeam = $('.hiddenTeam');

    displayedTeam.css('display', 'none');
    hiddenTeam.css('display', 'block');

    displayedTeam.addClass('hiddenTeam');
    displayedTeam.removeClass('displayedTeam');

    hiddenTeam.addClass('displayedTeam');
    hiddenTeam.removeClass('hiddenTeam');

    unclicked.addClass('currentTeam');
    unclicked.removeClass('unclickedTeam');

    clicked.addClass('unclickedTeam');
    clicked.removeClass('currentTeam');

    unclicked.unbind();
    clicked.bind("click", hideUnhide);
} 
```

我怎样才能按原样保存状态？除了使它们成为两个单独的页面之外，当单击标题时它们会相互跳转。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:05:09.133

您可以使用 localStorage 来存储以前的状态。

```
localStorage.setItem("hide", "yes"); // Set state

if(localStorage.getItem("hide") == "yes") {
    alert('...'); // Do something if "hide" is set
} 
```

LocalStorage 与大多数浏览器兼容。见：[http ://www.html5rocks.com/de/features/storage](http://www.html5rocks.com/de/features/storage)

[![浏览器兼容性 WebStorage](../Images/b687de04fe742988d8f1adacfa53e6c1.png)](https://fs.fnkr.net/ylfr6Itkeh8H)

如果您想确定您也可以使用 Cookie 和 JavaScript。
你可以使用这个 JS 函数来创建/删除 cookie：

```
function setCookie(name,value,mins) {
    var expires = "";
    if (mins) {
        var date = new Date();
        date.setTime(date.getTime()+(mins*60*1000));
        expires = "; expires="+date.toGMTString();
    }
    else expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
} 
```

以下是如何使用 JavaScript 的示例：

```
setCookie("hide", "yes", 43200); // Set state (expire in 30 days)

if(getCookie("hide") == "yes") {
    alert('...'); // Do something if "hide" is set
} 
```

测试了两个，工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T08:59:31.277

您可以使用[`localStorage`](https://developer.mozilla.org/en-US/docs/DOM/Storage#localStorage)保存页面的状态，例如，像这样

```
window.localStorage.setItem( 'stateTeam1', 'hidden' ); 
```

您的代码总体上需要添加两个：

1.  在该`hideUnhide`方法中，您需要更新`localStorage`.
2.  在页面加载时，您必须从中提取状态`localStorage`并应用属性集。

浏览器支持非常好，如[caniuse 所示](http://caniuse.com/#feat=namevalue-storage)。

# r - 如何更改ggplot2中x和y轴的位置

> ID：15334494
> 
> 赞同：28
> 
> 时间：2013-03-11T08:56:03.303
> 
> 标签：r, ggplot2

在我的真实研究世界中，在顶部（或顶部和底部）显示 x 轴，在右侧显示 y 轴是很常见的。但是，ggplot2 中的默认位置是底部的 x 和左侧的 y。

在[Kohske Post Here](https://groups.google.com/forum/?fromgroups=#!topic/ggplot2-dev/JkJU5CLBkQw)之后，使用的命令是：

```
x <- seq(0, 10, 0.1)
y <- sin(x * pi)
qplot(x, y, geom = "line") + 
scale_x_continuous(guide = guide_axis(position = "top")) + 
scale_y_continuous(guide = guide_axis(position = "right")) 
```

我在开发模式下尝试了上述命令：

```
install_packages("devtools")
library(devtools)
dev_mode()
install_github("ggplot2", "kohske", "feature/pguide")
library(ggplot2) 
```

不幸的是，它不适用于最新的`plyr`软件包。留言：

```
The following 'from' values not present in 'x': col, color, pch, cex, lty, lwd, srt, adj, bg, fg, min, max... 
Error in plyr:::split_indices(seq_len(nrow(data)), scale_id, n) 
```

然后我直接尝试了[来自github的代码](https://github.com/kohske/ggplot2/blob/2167d1468fc71f91cba9e9e05805e81fc7b7a183/R/guide-axis.r)，消息是：

```
Error in continuous_scale(c("x", "xmin", "xmax", "xend", "xintercept"),  : 
  formal argument "guide" matched by multiple actual arguments 
```

我注意到哈德利说这个功能在他的待办事项清单上。但是，我目前找不到解决方案。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-11-15T17:41:31.607

您可以使用以下参数[`ggplot 2.2.0`](https://blog.rstudio.org/2016/11/14/ggplot2-2-2-0/)设置轴的位置：`position``scale_`

```
ggplot(mpg, aes(displ, hwy)) + 
  geom_point() + 
  scale_x_continuous(position = "top") + 
  scale_y_continuous(position = "right") 
```

[![在此处输入图像描述](../Images/d4d75aca7ed6b1b662f6e15b9ab04a82.png)](https://i.stack.imgur.com/kGRE6.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-11T09:43:47.713

**ggplot2 解决方案**

我采用[这个解决方案](http://rpubs.com/kohske/dual_axis_in_ggplot2)来创建一个正确的 y 轴。就我个人而言，我发现在 gtable 中使用 grobs 非常困难。我放弃了 x 轴，但我给出了一个格子解决方案。我希望这个功能能尽快在 ggplot2 中实现。

```
library(ggplot2)
library(gtable)
library(grid)
grid.newpage()
dat <- data.frame(x<-seq(0, 10, 0.1),y = sin(x * pi))
p <- ggplot(dat, aes(x, y)) + geom_line(colour = "blue") + theme_bw()
# extract gtable
g <- ggplot_gtable(ggplot_build(p))

# axis tweaks
ia <- which(g$layout$name == "axis-l")
ax <- g$grobs[[ia]]$children[[2]]
ax$widths <- rev(ax$widths)
ax$grobs <- rev(ax$grobs)
ax$grobs[[1]]$x <- ax$grobs[[1]]$x - unit(1, "npc") + unit(0.15, "cm")
pp <- c(subset(g$layout, name == "panel", select = t:r))
g <- gtable_add_cols(g, g$widths[g$layout[ia, ]$l], length(g$widths) - 1)
g <-  gtable_add_grob(g, ax, pp$t, length(g$widths) - 1, pp$b)
g$grobs[[ia]]$children[[2]] <- NULL
##############################
ia <- which(g$layout$name == "ylab")
ylab <- g$grobs[[ia]]
g <- gtable_add_cols(g, g$widths[g$layout[ia, ]$l], length(g$widths) - 1)
g <-  gtable_add_grob(g, ylab, pp$t, length(g$widths) - 1, pp$b)
g$grobs[[ia]]$label = ''
grid.draw(g) 
```

![在此处输入图像描述](../Images/d049e876e228a696e632a9c7a8d50141.png)

**格解**

这不是 ggplot2 解决方案，而是`lattice`一个。使用`latticeExtra`ggplot2 主题，我们可以获得与所需行为相似的外观。

```
library(latticeExtra)
xyplot(y~ x, type='l', scales=list(x=list(alternating=2),
                                   y=list(alternating=2)),
       par.settings = ggplot2like(),axis=axis.grid) 
```

![在此处输入图像描述](../Images/3e3aaa59cf311a035485d7e6ae781784.png)

# java - 使用 ActivePivot 进行稀疏向量聚合

> ID：15334498
> 
> 赞同：1
> 
> 时间：2013-03-11T08:56:21.657
> 
> 标签：java, vector, aggregate-functions, activepivot

在我们的 ActivePivot 项目中，我们聚合了模拟数据的大向量（向量的长度可以达到一百万个值），并且内存消耗非常高。

大多数时候，向量中的大多数值都是零。ActivePivot 可以利用它来压缩向量吗？我们还能聚合压缩向量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T11:37:47.757

ActivePivot 不会自动检测到您聚合的向量是稀疏的并应用一些压缩机制，但由于 ActivePivot 是基于对象的，您可以编写自己的聚合函数，该函数将聚合压缩向量（或您实际想要的任何其他类型的数据）。

现在，如果您需要一个从零开始的矢量压缩示例，这里是一个简单的示例：

```
/*
 * (C) Quartet FS 2013
 * ALL RIGHTS RESERVED. This material is the CONFIDENTIAL and PROPRIETARY
 * property of Quartet Financial Systems Limited. Any unauthorized use,
 * reproduction or transfer of this material is strictly prohibited
 */
package com.quartetfs.biz.pivot.aggfun.impl;

import java.util.Arrays;

import com.quartetfs.fwk.IClone;

/**
 * 
 * Vector of primitive doubles, compressed by zero-elimination.
 * 
 * @author Quartet FS
 *
 */
public class DoubleVector implements IClone<DoubleVector> {

    /** Underlying data */
    protected final double[] data;

    /** Private internal constructor */
    private DoubleVector(double[] data) {
        this.data = data;
    }

    /**
     * Create a compressed vector from a raw vector.
     * 
     * @param raw
     * @return compressed vector
     */
    public static DoubleVector compress(double[] raw) {
        final int length = raw.length;

        // How many 64-bits slots do we need to mark all of our values?
        int bucketCount = 0;
        while((bucketCount << 6) < length) { bucketCount++; }

        // Count non-zeroes
        int nonZeroes = 0;
        for(int i = 0; i < length; i++) {
            nonZeroes += raw[i] == 0.0 ? 0 : 1;
        }

        // Initialize the data structure:
        //  - one slot to store the size of the final vector
        //  - n bits packed in buckets to mark zeroes and non-zeroes
        //  - the non-zero doubles
        final double[] data = new double[1 + bucketCount + nonZeroes];
        data[0] = Double.longBitsToDouble((long) length);

        // Mark and copy the non-zeroes
        nonZeroes = 0;
        for(int b = 0; b < bucketCount; b++) {

            // Clear bucket
            data[1 + b] = Double.longBitsToDouble(0L);

            final int from = b << 6;
            final int to = Math.min(length, (b+1) << 6);
            for(int i = from; i < to; i++) {
                double value = raw[i];
                if(value != 0.0) {
                    // Mark the non-zero value and copy the value
                    int bucketIdx = i >>> 6;
                    int shift = i & 0x3F; // Keep 6 bits
                    final long bit = 1L << shift;

                    long bucket = Double.doubleToLongBits(data[1 + bucketIdx]);
                    bucket = bucket | bit;
                    data[1 + bucketIdx] = Double.longBitsToDouble(bucket);

                    // Copy the value
                    data[1 + bucketCount + nonZeroes++] = value;
                }
            }
        }

        return new DoubleVector(data);
    }

    /** Deep clone implementation */
    public DoubleVector clone() {
        return new DoubleVector(data.clone());
    }

    public int length() {
        return (int) Double.doubleToLongBits(data[0]);
    }

    /**
     * 
     * Add this vector to another vector, then return the result.
     * 
     * @param vector
     * @return sum vector
     */
    public DoubleVector add(DoubleVector other) {
        return add(other, false);
    }

    /**
     * 
     * Add this vector to another vector, then return the result.
     * 
     * @param vector
     * @param negative if true, the vector is actually subtracted
     * @return sum vector
     */
    public DoubleVector add(DoubleVector other, boolean negative) {

        final int length = (int) Double.doubleToLongBits(this.data[0]);
        if((int) Double.doubleToLongBits(other.data[0]) != length) {
            throw new IllegalArgumentException("Cannot aggregate vectors of different lengths.");
        }

        // How many 64-bits slots do we need to mark all of our values?
        int bucketCount = 0;
        while((bucketCount << 6) < length) { bucketCount++; }

        // How many non-zeroes does the result bear?
        // (we do not try to detect new zeroes caused by the sum)
        int nonZeroes = 0;
        for(int b = 0; b < bucketCount; b++) {
            nonZeroes += Long.bitCount(Double.doubleToLongBits(this.data[1 + b]) | Double.doubleToLongBits(other.data[1 + b]));
        }

        // Allocate the data of the result
        final double[] result = new double[1 + bucketCount + nonZeroes];
        result[0] = Double.longBitsToDouble(length);
        for(int b = 0; b < bucketCount; b++) {
            result[1 + b] = Double.longBitsToDouble(Double.doubleToLongBits(this.data[1 + b]) | Double.doubleToLongBits(other.data[1 + b]));
        }

        // Loop on both vectors, and sum
        int a = 0;
        int b = 0;
        int c = 0;
        for(int i = 0; i < length; i++) {

            final int bucketIdx = i >>> 6;
            final int shift = i & 0x3F;  // Keep 6 bits
            final long bucketA = Double.doubleToLongBits(this.data[bucketIdx + 1]);
            final long bucketB = Double.doubleToLongBits(other.data[bucketIdx + 1]);

            long bitA = (bucketA >>> shift) & 0x1L;
            long bitB = (bucketB >>> shift) & 0x1L;

            double valueA = bitA == 0L ? 0.0 : this.data[1 + bucketCount + a++];
            double valueB = bitB == 0L ? 0.0 : other.data[1 + bucketCount + b++];
            if(bitA != 0L || bitB != 0L) {
                result[1 + bucketCount + c++] = valueA + (negative ? -valueB : valueB);
            }
        }

        return new DoubleVector(result);
    }

    /**
     * @return the decoded content of the vector
     */
    public double[] content() {

        // How many 64-bits slots do we need to mark all of our values?
        final int length = (int) Double.doubleToLongBits(data[0]);
        int bucketCount = 0;
        while((bucketCount << 6) < length) { bucketCount++; }

        final double[] content = new double[length];

        int nonZeroes = 0;
        for(int i = 0; i < length; i++) {

            final int bucketIdx = i >>> 6;
            final int shift = i & 0x3F;  // Keep 6 bits
            final long bucket = Double.doubleToLongBits(data[bucketIdx + 1]);

            if(((bucket >>> shift) & 0x1L) != 0L) {
                // The bit is set, this is a non-zero value
                content[i] = data[1 + bucketCount + nonZeroes++];
            }

        }

        return content;
    }

    /** @return the compression ratio as a percentage */
    public double compressionRatio() {
        long originalSize = 16L + 8 * Double.doubleToLongBits(data[0]);
        long compressedSize = 16L + 8L + 16L + 8 * data.length;

        return 0.01 * (100L * compressedSize / originalSize);
    }

    @Override
    public String toString() {
        return Arrays.toString(content());
    }

    /** Useful helper method that can be used from the debugger */
    protected static String binaryString(final long b) {
        final String binary = Long.toBinaryString(b);
        final int length = binary.length();
        final StringBuffer buffer = new StringBuffer();
        if(binary.length() <= 64) {
            for(int i = 0; i < (64 - length); i++) { buffer.append('0'); }
            buffer.append(binary);
            return buffer.toString();
        } else {
            return binary.substring(length - 64);
        }
    }

    /**
     * Some test.
     * 
     * @param args
     */
    public static void main(String[] args) {
        double[] v1 = new double[] { 0.0,   0.0, 2.0, 0.0, 0.0, 5.0, 0.0, 6.0, 7.0, 8.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0,  0.0 };
        double[] v2 = new double[] { 10.0, 10.0, 8.0, 0.0, 0.0, 5.0, 0.0, 4.0, 3.0, 2.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 10.0 };
        double[] sum = v1.clone();
        for(int i = 0; i < sum.length; i++) { sum[i] += v2[i]; }
        DoubleVector c1 = DoubleVector.compress(v1);
        DoubleVector c2 = DoubleVector.compress(v2);
        DoubleVector cSum = c1.add(c2);
        System.out.println(Arrays.toString(v1)  + " -> " + c1   + " (" + c1.compressionRatio()   * 100 + "%)");
        System.out.println(Arrays.toString(v2)  + " -> " + c2   + " (" + c2.compressionRatio()   * 100 + "%)");
        System.out.println(Arrays.toString(sum) + " -> " + cSum + " (" + cSum.compressionRatio() * 100 + "%)");
    }

} 
```

下面是使用 ActivePivot 聚合函数聚合那些的基本代码：

```
/*
 * (C) Quartet FS 2013
 * ALL RIGHTS RESERVED. This material is the CONFIDENTIAL and PROPRIETARY
 * property of Quartet Financial Systems Limited. Any unauthorized use,
 * reproduction or transfer of this material is strictly prohibited
 */
package com.quartetfs.biz.pivot.aggfun.impl;

import com.quartetfs.fwk.QuartetPluginValue;

/**
 * Aggregation function that sums compressed vectors of doubles.
 * 
 * @author Quartet FS
 *
 */
@QuartetPluginValue(interfaceName = "com.quartetfs.biz.pivot.aggfun.IAggregationFunction")
public class DoubleVectorSum extends GenericAggregationFunction<DoubleVector, DoubleVector> {

    /** serialVersionUID */
    private static final long serialVersionUID = 11699698472584733L;

    public DoubleVectorSum() {
        super("VectorSum");
    }

    @Override
    public String description() { return "Function to sum compressed double vectors"; }

    @Override
    protected DoubleVector aggregate(boolean removal, DoubleVector aggregate, DoubleVector input) {
        return aggregate.add(input, removal);
    }

    @Override
    protected DoubleVector merge(boolean removal, DoubleVector main, DoubleVector contribution) {
        return main.add(contribution, removal);
    }

    @Override
    protected DoubleVector cloneAggregate(DoubleVector aggregate) {
        return aggregate.clone();
    }

} 
```

# ant - 用于传递多个测试类名称的 ant-testng 任务（通过 cmd 行参数）

> ID：15334501
> 
> 赞同：0
> 
> 时间：2013-03-11T08:56:36.940
> 
> 标签：ant, testng

我想调用一个 ant 任务，它应该接受多个测试类进行 testng 和运行（不是套件 xml），非常类似于但用逗号分隔的测试类列表。当我检查文档时，我找不到任何线索。有没有可能，请告诉我。

这是我运行单个测试的 ant 任务：

```
<target name="run-class"
    description="run a specific test class. Requires class.name property set to fully-qualified name of class">
    <some properties />
    <testng classpathref="lib.path"
            outputDir="${outputDir}"
            workingDir="${workingDir}"
            verbose="2"
            useDefaultListeners="false"
            listeners="${testng.listeners}"
            className="${class.name}"
            delegateCommandSystemProperties="true"
            configFailurePolicy="continue">
        <jvm params/>
    </testng>
</target> 
```

我会调用它： `ant run-class -Dclass.name=com.vmware.CreateVM -DParallel=true`

我想提供另一个如上所述的 ant 任务，它应该接受多个测试类（但不是作为套件 xml 文件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:27:53.013

Please refer to [TestNG Ant Task](http://testng.org/doc/ant.html) documentation and look at the `classpath` and `classpathref` attributes and `classfileset` element.

# ruby-on-rails - 如何查询 HABTM 关系的双方？

> ID：15334503
> 
> 赞同：0
> 
> 时间：2013-03-11T08:56:39.873
> 
> 标签：ruby-on-rails, ruby-on-rails-3, has-and-belongs-to-many

我有两个模型 - `Question & Tag`。

两者之间都有 HABTM 关联。还有一个`questions_tags`连接表。

如果我有问题（`q`），我可以通过简单地找到标签`q.tags`。

但是，如果我有一个标签 ( `t`)，当我尝试另一种方式 ( `t.questions`) 时，我会收到如下错误：

```
NoMethodError: undefined method `questions' for #<ActiveRecord::Relation:0x007fda147522b8> 
```

HABTM 不应该双向工作吗？在我的情况下，如何获得`questions`与标签的关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:03:39.737

我怀疑 t 不是`Tag`对象，而是错误所暗示的 AR::Relation。（忘记添加 .first）之类的东西`t = Tag.where(id: some_id)`会导致错误。:)

# regex - 为 textarea 删除 htmlText 中的空行

> ID：15334507
> 
> 赞同：0
> 
> 时间：2013-03-11T08:57:10.180
> 
> 标签：regex, actionscript-3, apache-flex

我有 htmltext 作为

```
<p>Here is what some pupils told me about how they prepared for and fared in yesterday's preliminary round.</p>
<hr />

<p>"I will stay calm and try my best. If I do not know a word, I will just have to put something down."</p>
<p><strong>some text</strong></p>
<hr />

<p>"I am more confident than last year because I have experience. I read the newspaper and I looked through the dictionary for difficult words and tagged them."</p>
<p><strong>some text</strong></p>
<hr /> 
```

我显示的内容与 textarea.htmlText 相同。

但是 textarea 显示上面的内容，它们之间的空白行太多。有没有办法可以删除文本中的换行符？文本来自服务器端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:04:03.507

在 CSS 中设置 p 标签的样式。
例子：

```
 p{
        line-height:0.5;
    } 
```

# android - Android：如何将解码器集成到多媒体框架

> ID：15334509
> 
> 赞同：8
> 
> 时间：2013-03-11T08:57:18.313
> 
> 标签：android, android-ndk, android-mediaplayer, android-framework, stagefright

最近我成功地将视频解码器移植到了安卓。还将输出转储到表面视图并使用本机 API 检查输出。现在下一个任务是实现播放、暂停、流媒体等，即媒体播放器的其他功能。这样做将是一个返工，因为所有这些功能都已经在 android 多媒体框架中定义了。听说我们可以把我们的解码器做成一个插件，集成到Android的多媒体框架中。尽管我在谷歌上搜索过相同的内容，但我几乎找不到任何有关相同的信息。所以我恳请任何读者为上述问题提出一些相关的链接或解决方案。提前致谢，等待您的回复。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-11T16:28:04.670

在 Android SF 框架中，编解码器通过`media_codecs.xml`. `media_codecs.xml`在标准的 android 发行版中，可以在[这里](http://androidxref.com/4.2.2_r1/xref/development/tools/emulator/system/camera/media_codecs.xml)找到一个示例。所有视听组件都注册为`OMX`组件。

**1.编解码器注册**

要注册您的视频解码器，您必须在`<Decoders>`列表下添加一个新条目。为确保始终拾取您的编解码器，请确保将您的编解码器列为特定`MIME`类型的第一个条目。H.264 解码器的示例条目如下。

```
<Decoders>
    <MediaCodec name="OMX.ABC.XYZ.H264.DECODER" type="video/avc" >
        <Quirk name="requires-allocate-on-input-ports" />
        <Quirk name="requires-allocate-on-output-ports" />
    </MediaCodec>
    <MediaCodec name="OMX.google.h264.decoder" type="video/avc" /> 
```

在哪里，

一种。`OMX.ABC.XYZ.H264.Decoder`是您的组件的名称

湾。`video/avc`是`MIME`您的组件的类型。在此示例中，它表示**AVC** / **H.264**视频解码器。

c.接下来的 2 个陈述表示您的组件的`quirks`或**特殊要求**。在给定的示例中，`requires-allocate-on-input-ports`向`Stagefright`框架指示组件更愿意在其所有输入端口上分配缓冲区。同样，另一个`quirk`通知该组件也将更喜欢在其输出端口上进行分配。系统支持的列表`quirks`可以参考[OMXCodec.cpp](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/OMXCodec.cpp#236)文件`OMXCodec::getComponentQuirks`中的函数。这些怪癖转化为标志，然后由框架读取以创建和初始化组件。

在示例插图中，显示您的`OMX`组件在*默认*的Google 实现的视频解码器之前注册。

**注意**：如果您在终端设备上尝试此操作，则必须确保此条目反映在最终`media_codecs.xml`文件中。

**2\. OMX核心注册**

要创建您的组件并确保调用正确的**工厂方法，您***可能必须*向框架注册您的`OMX`核心。`Stagefright`

要注册一个新内核，您必须创建一个名为的新库`libstagefrighthw.so`，该库将位于`/system/lib`您的终端系统中。该库必须公开一个`createOMXPlugin`符号，该符号将由`dlsym`.

因此，核心的注册`OMX`是：`OMXMaster`invokes `addVendorPlugin`which internal invokes `addPlugin("libstagefrighthw.so")`。在`addPlugin`中，将使用初始化 等的`createOMXPlugin`其他函数指针来查找。`makeComponentInstance``destroyComponentInstance`

一旦`OMX`核心被初始化，你就可以在 android 框架中运行你自己的组件了。的参考`OMXMaster`可以在[这里](http://androidxref.com/4.2.2_r1/xref/frameworks/av/media/libstagefright/omx/OMXMaster.cpp#46)找到。

通过这些更改，您的视频解码器将集成到 android stagefright 框架中。

# java - 如何模拟来自第三方库的类的静态调用

> ID：15334511
> 
> 赞同：2
> 
> 时间：2013-03-11T08:57:39.347
> 
> 标签：java, testing, mocking, powermock, proxy-classes

我想知道是否可以使用`PowerMock`或任何其他库来模拟库中类中的静态调用。该第三方库中的类调用 rt.jar 中的一个类，我想要返回该返回的自定义实现`Type`。我正在尝试在测试代码之外执行此操作。

否则，我不得不从该库中扩展一些类并替换一些实现。以前有人做过这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:26:09.183

是的，它是可能的，例如，仅使用`PowerMock.mockStatic()`或者`PowerMock.mockStaticPartial()`如果您想模拟一种方法。

PowerMock 的主页上有一个相当不错的教程。

我[在 SO 上发布了一个示例](https://stackoverflow.com/a/14584789/1602587)。

[编辑] 但是，如果你想在生产代码中做这样的魔法，我建议不要使用测试框架。也许[Groovy](http://groovy.codehaus.org/)可以帮助您 - 使用 Groovy 可以在运行时操作类（甚至 JDK 类），而且它（我认为）是 JVM 之上的一个更薄的层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:30:55.403

一般来说，做这样的核心存根真是个坏主意（这不是在嘲笑你所描述的）。我会在这个库上构建微小的抽象，这样你就可以完全控制你想要返回的内容。可以在外部测试中使用 PowerMock 的某些功能，但这不是小菜一碟。如果您真的想要，这里有粗略的描述可以提供帮助：[https ://groups.google.com/d/msg/powermock/SMDMe-y6fLg/1HF0TsGOqTIJ](https://groups.google.com/d/msg/powermock/SMDMe-y6fLg/1HF0TsGOqTIJ)

无论如何，我不建议这样做。

# css - 将 div 设为链接并更改悬停时的内容

> ID：15334512
> 
> 赞同：0
> 
> 时间：2013-03-11T08:57:42.673
> 
> 标签：css, html, hover

我正在尝试将 div 设为链接，这可行，但不确定我是否做得正确。但我也希望 div 中的类型改变颜色。任何人都可以帮助我，如果你解释一下，我会很高兴:D 努力学习 :)

这是html

```
 <div class="song_feature">
        <a href="#"></a>
        <div class="song_feature_content">
            <div class="break32"></div>
            <h1>1</h1>
            <div class="break10"></div>
            <div class="break45"></div>
            <h2>Lorem ipsum title</h2>
            <div class="break10"></div>
            <p>lorem ipsum</p>
        </div>
    </div> 
```

和CSS

```
.song_feature:hover {
background-color: #B5B5B5;
cursor: pointer;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T09:04:13.163

只需在你的 CSS 中试试这个：

```
.song_feature:link {
  background-color: #000;
  cursor: pointer;
}
.song_feature:visited {
  background-color: #000;
  cursor: pointer;
}
.song_feature:hover {
  background-color: #B5B5B5;
  cursor: pointer;
}
.song_feature:active {
  background-color: #000;
  cursor: pointer;
} 
```

背景颜色将是黑色的，直到鼠标悬停在它上面。只需相应地更改颜色即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T09:34:46.893

据我所知，你的问题是让这个验证。从历史上看，`a`元素是内联的，因此在技术上不允许包含块级元素，例如`div`.

请注意，我并没有说“不能”包含它们：块级链接几乎总是按照您的预期工作，只是无法通过验证。随着 HTML5[铺平了牛路](http://www.w3.org/TR/html-design-principles/#pave-the-cowpaths)，这已经被修改了。根据这篇[HTML Doctor](http://html5doctor.com/block-level-links-in-html-5/)文章：

> 您可以在 HTML 5 中做的一件令人兴奋的新事情是将链接包裹在“块级”元素周围……消除重复并创建更广泛的点击区域。

简而言之，@Tbi45 的解决方案是可行的方法：`a`将`div`. 它减少了重复，验证（如 HTML5）并且不需要 JavaScript。

看看[这个小提琴](http://jsfiddle.net/cherryflavourpez/LPmPx/)的例子。重要的 CSS 是：

```
.song_feature>a {
    display: block;
} 
```

这确保了您的全部内容`div`都是可点击的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T09:04:23.910

首先把`a`周围的`div`

```
<div class="song_feature">
    <a href="#">
    <div class="song_feature_content">
        <div class="break32"></div>
        <h1>1</h1>
        <div class="break10"></div>
        <div class="break45"></div>
        <h2>Lorem ipsum title</h2>
        <div class="break10"></div>
        <p>lorem ipsum</p>
    </div>
       </a>
</div> 
```

如果通过“在 div 中输入”，您的意思是文本（我在这里猜）输入`color:#your color`如下：

```
 .song_feature:hover {
 background-color: #B5B5B5;
  cursor: pointer;
 } 

 .song_feature:hover a {
    color:#edc844;/*some random color*/
  } 
```

这适用于 IE7+、最新的 Mozilla、Safari、Chrome

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T09:17:33.110

我建议你反其道而行之。

```
<a href="#" class="song_feature">
    <div class="song_feature_content">
        <div class="break32"></div>
        <h1>1</h1>
        <div class="break10"></div>
        <div class="break45"></div>
        <h2>Lorem ipsum title</h2>
        <div class="break10"></div>
        <p>lorem ipsum</p>
    </div>
</a>

.song_feature {
    display: block;
}

.song_feature:hover {
    background-color: #B5B5B5;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T09:04:08.173

如果您使用 jQuery，这将更容易做到。

HTML：

```
<div class="song_feature">
    <a href="#" id="hover">Hover here</a>
    <div class="song_feature_content">
        <div class="break32"></div>
        <h1>1</h1>
        <div class="break10"></div>
        <div class="break45"></div>
        <h2>Lorem ipsum title</h2>
        <div class="break10"></div>
        <p>lorem ipsum</p>
    </div>
</div> 
```

JS：

```
$('#hover').hover(function(){
    $('.song_feature').css('background-color', '#f00');
}); 
```

运行：http: [//jsfiddle.net/cS6h8/](http://jsfiddle.net/cS6h8/)

# javascript - 如何交换 CSS - 无法获取元素样式表 [object HTMLLinkElement]

> ID：15334514
> 
> 赞同：0
> 
> 时间：2013-03-11T08:57:59.953
> 
> 标签：javascript, android, css, cross-browser, sencha-touch

我有一个 JS 函数，它应该为 CSS 交换获取样式表元素。在 IPHONE 或桌面版 Chrome 和 Safari 上运行页面时，我能够成功交换 css。

我的问题是在 Android 浏览器上

```
if (a.getAttribute("rel").indexOf("style") != -1) { 
```

从我的代码返回 FALSE。

似乎在

Android Web 浏览器`a.getAttribute("rel))" : stylesheet` 元素不存在。

知道为什么会出现这种行为以及如何解决吗？

```
// Swap CSS
changeStyle: function(state) {       
    var i, a, url, i = 0;
    for (i; (a = document.getElementsByTagName("link")[i]); i++) {
        if (a.getAttribute("rel").indexOf("style") != -1) {
            url = a.href;
            if (state == 'accessible') {
                a.href = 'resources/css/app-accesibility.css';;
            }
            else if (state == 'normal') {
                a.href = 'resources/css/app.css';
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:05:34.523

可能是其他链接元素被添加到android上的头部，通过插件或其他方式。`rel`在访问它之前确保该属性存在：

```
if (a.getAttribute("rel") && a.getAttribute("rel").indexOf("style") != -1) { 
```

# linq - 如何在linq中查询应该在where子句中的字段是字段的串联

> ID：15334515
> 
> 赞同：0
> 
> 时间：2013-03-11T08:58:06.510
> 
> 标签：linq, entity-framework

对不起标题，我只是不知道如何想出一个定义明确的标题。但无论如何，我只需要向你解释我的问题。

我做了一个查询，将查找由其全名指定的某个学生。

SQL 版本：

```
SELECT * FROM Student as s WHERE concat(s.lastname,', ',s.firstname,' ',s.middlename) = myvalue 
```

我已经尝试了很多次，已经使用 string.concat 和 string.join 将其转换为 linq 查询，但它给了我一个错误：

*LINQ to Entities 无法识别方法 'System.String Concat(System.Object[])' 方法，并且此方法无法转换为存储表达式。*

也许有人可以帮忙。谢谢！

学生：

```
public class Student{
public int StudentID { get; set; }
public string Firstname { get; set; }
public string Middlename { get; set; }
public string Lastname { get; set; }
public ...
} 
```

我的 linq 查询：

```
public void FindStudent(string fullname){

using(MyContext _ctx = new MyContext()){

var _query = from stud in _ctx.Student
where string.concat(stud.Lastname.Trim(),' ',stud.Firstname.Trim(),' ',stud.Middlename.Trim()) == fullname

select new{

StudentID = stud.StudentID,
Firstname = stud.Firstname,
Middlename = stud.Middlename,
Lastname = stud.Lastname

}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:06:40.197

不要为姓氏、名字和中间名传递单个字符串，而是分别传递它们：

```
var students = from s in db.Students
               where s.LastName == lastName &&
                     s.FirstName == firstName &&
                     s.MiddleName == middleName
               select s; 
```

如果您只有“lastName, firstName middleName”格式的字符串，那么您可以这样解析它：

```
string name = "Downey, Robert Jr";
var match = Regex.Match(name, @"(?<last>\w+),\s+(?<first>\w+)\s+(?<middle>\w+)");
string lastName = match.Groups["last"].Value;
string firstName = match.Groups["first"].Value;
string middleName = match.Groups["middle"].Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:03:33.030

最简单的方法是在 SQL Server 数据库中创建一个 VIEW。然后，该 VIEW 包含 Student 的所有字段和连接的字段作为新字段，例如 FullName：

```
CREATE VIEW StudentQuery
AS
SELECT *, LastName + ', ' + FirstName + ' ' + MiddleName AS FullName
FROM Student 
```

然后在实体框架中，将此视图映射到实体，然后查询该实体。

这样，您的 LINQ 查询更具可读性和性能，因为您让数据库处理连接工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:10:24.343

您不需要使用 Concat 等（并且您发现它们不受支持）所以只需添加字符串

```
var q = Students.Where(
          s => s.LastName + ", " + s.FirstName + ", " + s.MiddleName == FullName); 
```

在实体框架中，这将产生类似于

```
SELECT ...
FROM [Students] AS [t0]
WHERE (([t0].[LastName] + @p0) + [t0].[FirstName] + ....) = @p3 
```

# php - CodeIgniter - 表单验证回调问题

> ID：15334520
> 
> 赞同：1
> 
> 时间：2013-03-11T08:58:28.350
> 
> 标签：php, codeigniter

我想知道是否有人可以为我解决问题。

在我的 codeigniter 表单验证规则中，我有一个名为 email_exists 的回调，其设置如下

```
->set_rules( 'login', 'Email Address', 'trim|valid_email|required|xss_clean|callback__email_exists' ) 
```

在同一个控制器中，我有它调用的函数如下

```
function _email_exists()
{
    // Code here
} 
```

这完美地工作，我无法从 URL 访问该方法，因为方法名称之前的 _ ......所以它工作完美。

我查看了 CI 文档，它说回调要使用私有方法……但每次我在方法名称前加上“私有”时，它根本不起作用。

保持原样可以吗。

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:08:18.340

该方法不能是私有的，因为验证类无法访问回调方法。

[该文档](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#callbacks)还显示回调方法应声明为公共。

你应该保持原样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:17:28.390

可以保持原样，因为 CodeIgniters _ 前缀将阻止公共访问该方法（这意味着它无法通过 URL 访问该函数，正如您提到的）。

该[手册](http://ellislab.com/codeigniter/user-guide/general/controllers.html#private)在这部分可能有点混乱，因为它们将前缀为 _ 的函数定义为私有（它们的真正含义是对公共访问隐藏）。然而，一个函数可能仍被声明为公共的（就像您在代码中所做的那样），但仍然对公共访问隐藏。

# java - Liferay 钩子，jsp 不能在 glassfish 上编译

> ID：15334523
> 
> 赞同：2
> 
> 时间：2013-03-11T08:58:57.380
> 
> 标签：java, jsp, liferay, portlet, liferay-6

我想在与 glassfish 捆绑的 Liferay 6.1.0 ga1 实例中的停靠栏上添加语言选择支持，但是在编译（甚至是原始文件）时会出现一些错误：

```
 Servlet.service() for servlet jsp threw exception
org.apache.jasper.JasperException: PWC6033: Error in Javac compilation for JSP

PWC6197: An error occurred at line: 432 in the jsp file: /html/portlet/dockbar/view.jsp
PWC6199: Generated servlet error:
cannot find symbol
  symbol:   method containsWithoutViewableGroup(com.liferay.portal.security.permission.PermissionChecker,com.liferay.portal.model.Layout,<nulltype>,boolean,java.lang.String)
  location: class com.liferay.portal.service.permission.LayoutPermissionUtil

PWC6197: An error occurred at line: 450 in the jsp file: /html/portlet/dockbar/view.jsp
PWC6199: Generated servlet error:
cannot find symbol
  symbol:   method containsWithoutViewableGroup(com.liferay.portal.security.permission.PermissionChecker,com.liferay.portal.model.Layout,<nulltype>,boolean,java.lang.String)
  location: class com.liferay.portal.service.permission.LayoutPermissionUtil

PWC6199: Generated servlet error:
/view_jsp.java uses unchecked or unsafe operations.

PWC6199: Generated servlet error:
Recompile with -Xlint:unchecked for details.

    at org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:129)
    at org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:299)
    at org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:392)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:453)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:625)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:785)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:649)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:604)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:534)
    at com.liferay.portlet.PortletRequestDispatcherImpl.dispatch(PortletRequestDispatcherImpl.java:316)
    at com.liferay.portlet.PortletRequestDispatcherImpl.include(PortletRequestDispatcherImpl.java:120)
    at com.liferay.portal.struts.PortletRequestProcessor.doInclude(PortletRequestProcessor.java:281)
    at com.liferay.portal.struts.PortletRequestProcessor.doForward(PortletRequestProcessor.java:251)
    at org.apache.struts.tiles.TilesRequestProcessor.processTilesDefinition(TilesRequestProcessor.java:239)
    at org.apache.struts.tiles.TilesRequestProcessor.internalModuleRelativeForward(TilesRequestProcessor.java:341)
    at org.apache.struts.action.RequestProcessor.processForward(RequestProcessor.java:572)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:221)
    at com.liferay.portal.struts.PortletRequestProcessor.process(PortletRequestProcessor.java:230)
    at com.liferay.portlet.StrutsPortlet.include(StrutsPortlet.java:239)
    at com.liferay.portlet.StrutsPortlet.doView(StrutsPortlet.java:152)
    at com.liferay.portal.kernel.portlet.LiferayPortlet.doDispatch(LiferayPortlet.java:211)
    at javax.portlet.GenericPortlet.render(GenericPortlet.java:233)
    at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:100)
    at com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java:64)
    at com.liferay.portlet.InvokerPortletImpl.invoke(InvokerPortletImpl.java:651)
    at com.liferay.portlet.InvokerPortletImpl.invokeRender(InvokerPortletImpl.java:722)
    at com.liferay.portlet.InvokerPortletImpl.render(InvokerPortletImpl.java:426)
    at org.apache.jsp.html.portal.render_005fportlet_jsp._jspService(render_005fportlet_jsp.java:1182)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:785)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:649)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:604)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:534)
    at com.liferay.portal.util.PortalImpl.renderPortlet(PortalImpl.java:4735)
    at com.liferay.portal.util.PortalUtil.renderPortlet(PortalUtil.java:1455)
    at com.liferay.portlet.layoutconfiguration.util.RuntimePortletImpl.processPortlet(RuntimePortletImpl.java:213)
    at com.liferay.portlet.layoutconfiguration.util.RuntimePortletImpl.processPortlet(RuntimePortletImpl.java:135)
    at com.liferay.portlet.layoutconfiguration.util.RuntimePortletImpl.processPortlet(RuntimePortletImpl.java:122)
    at com.liferay.portlet.layoutconfiguration.util.RuntimePortletUtil.processPortlet(RuntimePortletUtil.java:54)
    at com.liferay.taglib.portletext.RuntimeTag.doTag(RuntimeTag.java:111)
    at com.liferay.taglib.portletext.RuntimeTag.doTag(RuntimeTag.java:63)
    at com.liferay.taglib.util.VelocityTaglib.runtime(VelocityTaglib.java:597)
    at com.liferay.taglib.util.VelocityTaglib.runtime(VelocityTaglib.java:591)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.velocity.util.introspection.UberspectImpl$VelMethodImpl.doInvoke(UberspectImpl.java:389)
    at org.apache.velocity.util.introspection.UberspectImpl$VelMethodImpl.invoke(UberspectImpl.java:378)
    at org.apache.velocity.runtime.parser.node.ASTMethod.execute(ASTMethod.java:270)
    at org.apache.velocity.runtime.parser.node.ASTReference.execute(ASTReference.java:262)
    at org.apache.velocity.runtime.parser.node.ASTReference.render(ASTReference.java:342)
    at org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:72)
    at org.apache.velocity.runtime.directive.VelocimacroProxy.render(VelocimacroProxy.java:212)
    at org.apache.velocity.runtime.directive.RuntimeMacro.render(RuntimeMacro.java:247)
    at org.apache.velocity.runtime.parser.node.ASTDirective.render(ASTDirective.java:175)
    at org.apache.velocity.runtime.parser.node.ASTBlock.render(ASTBlock.java:72)
    at org.apache.velocity.runtime.parser.node.ASTIfStatement.render(ASTIfStatement.java:87)
    at org.apache.velocity.runtime.parser.node.SimpleNode.render(SimpleNode.java:336)
    at org.apache.velocity.Template.merge(Template.java:328)
    at org.apache.velocity.Template.merge(Template.java:235)
    at org.apache.velocity.app.VelocityEngine.mergeTemplate(VelocityEngine.java:381)
    at com.liferay.portal.velocity.VelocityEngineImpl.mergeTemplate(VelocityEngineImpl.java:184)
    at com.liferay.portal.velocity.VelocityEngineImpl.mergeTemplate(VelocityEngineImpl.java:194)
    at com.liferay.portal.kernel.velocity.VelocityEngineUtil.mergeTemplate(VelocityEngineUtil.java:71)
    at com.liferay.taglib.util.ThemeUtil.includeVM(ThemeUtil.java:409)
    at com.liferay.taglib.util.ThemeUtil.include(ThemeUtil.java:99)
    at com.liferay.taglib.theme.IncludeTag.doEndTag(IncludeTag.java:39)
    at org.apache.jsp.html.common.themes.portal_jsp._jspx_meth_liferay$1theme_include_1(portal_jsp.java:450)
    at org.apache.jsp.html.common.themes.portal_jsp._jspService(portal_jsp.java:396)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:785)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:649)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:483)
    at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:454)
    at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:350)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:300)
    at com.liferay.portal.struts.StrutsUtil.forward(StrutsUtil.java:79)
    at com.liferay.portal.struts.PortalRequestProcessor.doForward(PortalRequestProcessor.java:280)
    at org.apache.struts.tiles.TilesRequestProcessor.processTilesDefinition(TilesRequestProcessor.java:239)
    at org.apache.struts.tiles.TilesRequestProcessor.processForwardConfig(TilesRequestProcessor.java:302)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:241)
    at com.liferay.portal.struts.PortalRequestProcessor.process(PortalRequestProcessor.java:174)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:414)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
    at com.liferay.portal.servlet.MainServlet.callParentService(MainServlet.java:533)
    at com.liferay.portal.servlet.MainServlet.service(MainServlet.java:510)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:113)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:201)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.autologin.AutoLoginFilter.processFilter(AutoLoginFilter.java:240)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:785)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:649)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:483)
    at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:454)
    at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:350)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:300)
    at com.liferay.portal.servlet.FriendlyURLServlet.service(FriendlyURLServlet.java:135)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.strip.StripFilter.processFilter(StripFilter.java:304)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.secure.SecureFilter.processFilter(SecureFilter.java:201)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.i18n.I18nFilter.processFilter(I18nFilter.java:241)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:113)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.etag.ETagFilter.processFilter(ETagFilter.java:55)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.autologin.AutoLoginFilter.processFilter(AutoLoginFilter.java:240)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.sso.ntlm.NtlmPostFilter.processFilter(NtlmPostFilter.java:83)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.sharepoint.SharepointFilter.processFilter(SharepointFilter.java:80)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.BaseFilter.processFilter(BaseFilter.java:121)
    at com.liferay.portal.servlet.filters.virtualhost.VirtualHostFilter.processFilter(VirtualHostFilter.java:208)
    at com.liferay.portal.kernel.servlet.BaseFilter.doFilter(BaseFilter.java:48)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:184)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92)
    at org.tuckey.web.filters.urlrewrite.UrlRewriteFilter.doFilter(UrlRewriteFilter.java:738)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDoFilter(InvokerFilterChain.java:203)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:105)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:164)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:164)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.processDirectCallFilter(InvokerFilterChain.java:184)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:92)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722) 
```

html/portlet/dockbar/view.jsp 的源代码在 432 行：

```
<c:if test="<%= (!SitesUtil.isLayoutUpdateable(layout) || (layout.isLayoutPrototypeLinkActive() && !group.hasStagingGroup())) && LayoutPermissionUtil.containsWithoutViewableGroup(themeDisplay.getPermissionChecker(), layout, null, false, ActionKeys.UPDATE) %>"> 
```

和 450：

```
<c:if test="<%= !(group.isLayoutPrototype() || group.isLayoutSetPrototype() || group.isUserGroup()) && layoutTypePortlet.isCustomizable() && LayoutPermissionUtil.containsWithoutViewableGroup(permissionChecker, layout, null, false, ActionKeys.CUSTOMIZE) %>"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:29:23.180

`LayoutPermissionUtil`是一个应该在全局类路径中的类，在所谓的“依赖项”中。也许您进行了升级并忘记升级这些类 - 或者将它们安装在不匹配的版本中。

# asp.net-web-api - 为路由指定有效的控制器

> ID：15334527
> 
> 赞同：1
> 
> 时间：2013-03-11T08:59:13.153
> 
> 标签：asp.net-web-api, asp.net-web-api-routing

我必须为我们的系统提供两个 Web API`PublicController`控制器`PrivateController`。这些应该有以下路线：

`/public/{controller}/{id}`

和

`/private/{controller}/{id}`

在防火墙上，所有请求`/private`都被阻止，并且只能从网络内部获得。但按照惯例，我的两个控制器都可用于两条路由，因此我可以使用 url请求`PrivateController`（它应该只在 下可用） 。`/private``/public/PrivateController/1`

有没有办法为路由指定有效的控制器，以便`PrivateController`仅可用于私有路由？还是有一些其他的做法来满足这个要求？

感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:06:47.073

您可以使用该`constraints`参数在最简单的情况下通过一个非常简单的正则表达式来限制控制器名称：

```
config.Routes.MapHttpRoute(
    name: "private",
    routeTemplate: "api/private/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional },
    constraints: new { controller = @"private" }
);

config.Routes.MapHttpRoute(
    name: "public",
    routeTemplate: "api/public/{controller}/{id}",
    defaults: new { id = RouteParameter.Optional },
    constraints: new { controller = @"public" }
); 
```

所以现在“private”路由只接受名为Private的控制器，而“public”路由只接受名为Public的控制器。如果您有多个公共和私有控制器，您可以轻松扩展正则表达式以匹配它们。

如果正则表达式不足以满足您的需求，您可以通过实现`IRouteConstraint`接口来创建自定义路由约束。[您可以在本文](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-custom-route-constraint-cs)中找到一个示例植入。

# bing-api - Bing WebSearch API 的查询长度限制是多少？

> ID：15334531
> 
> 赞同：4
> 
> 时间：2013-03-11T08:59:24.843
> 
> 标签：bing-api

鉴于 Bing API 文档主要由一个充满错误的两页 Word 文档组成，我无法在网上找到答案。反复试验产生了不一致的结果，并且鉴于查询需要花钱，我宁愿不必再猜测和检查。

新的“Azure 市场”Bing WebSearch API 的长度限制是多少？我知道存在某种限制，因为长查询往往会返回，“数据提供者的服务不接受该请求。团队正在调查此问题。对于给您带来的不便，我们深表歉意。” 但是，发生这种情况的查询长度（无论是字符还是单词）往往会根据输入的查询而有所不同。我正在使用具有高级运算符（如 site: 和 instreamset:）的相​​当复杂的查询，因此很难缩小限制范围。即：我已经成功地查询了超过 1800 个字符，但我让它们以少于 1200 个字符的方式失败。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-16T04:28:41.993

从 Microsoft 支持获得答案：

> 看起来进入数据市场的请求的查询字符串限制为 10240。但是；内容提供者（在本例中为 Bing Search ）限制为 2048 个字符。

请注意，在这种情况下，“查询字符串”是整个 URL，而不仅仅是“查询”参数。

一些短于 2048 个字符的 URL 出现失败的原因是由于空格的编码。在将查询传递给 Bing 之前，Azure 数据市场对其进行重新编码，并使用 %20 而不是 + 对空格进行编码。因此，要检查您的请求 URL 是否在 2048 个字符之内，请务必对所有特殊字符（包括空格）进行十六进制编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-30T20:01:35.470

为 Bing 搜索 API 的新认知服务 (v5.0) 版本更新此答案：

来自[https://msdn.microsoft.com/en-us/library/dn760794.aspx#URL%20to%20Send%20Requests%20To](https://msdn.microsoft.com/en-us/library/dn760794.aspx#URL%20to%20Send%20Requests%20To)：

> **注意：**最大 URL 长度为 2,048 个字符。为确保您的 URL 长度不超过限制，您的查询参数的最大长度应小于 1,500 个字符。如果 URL 超过 2,048 个字符，服务器将返回 404 Not found。

# php - 为什么以及如何使用狮身人面像形态？

> ID：15334533
> 
> 赞同：1
> 
> 时间：2013-03-11T08:59:29.307
> 
> 标签：php, sphinx

我目前正在研究狮身人面像。我从 sphinx 网站上阅读了有关形态学的信息。检查以下链接，但我认为我没有得到它。

[http://sphinxsearch.com/docs/2.1.1/conf-morphology.html](http://sphinxsearch.com/docs/2.1.1/conf-morphology.html)

谁能告诉我为什么以及如何以简单的方式在狮身人面像中使用形态学？

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:34:45.293

一般概述是使搜索更加“模糊”。

这样相似的词就会匹配。“更模糊”的确切定义取决于您使用的处理器。

词干意味着例如复数和单数词匹配。这样即使使用相同基本词的略有不同的版本，用户仍然可以匹配。

Lemmatizer 做同样的事情，只是在技术上略有不同。

语音处理器使发音相同的单词匹配 - 因此拼写不必准确。

# jquery - SetTimeout 在 jquery 中不起作用

> ID：15334536
> 
> 赞同：0
> 
> 时间：2013-03-11T08:59:31.917
> 
> 标签：jquery, html, css

我正在尝试在单击事件上添加和删除一个类，它类似于突出显示一个元素，但这里没有发生任何事情:(。这是我的代码：JQ：

```
var listed=($('.vis').size())-1,
btn=$('.compare-btn');
  listed < 5 ? listed>=2?btn.show(500):null):btn.text("more").addClass('border').setTimeout(btn.removeClass('border'),2000); 
```

CSS：

```
.border{border:2px solid red;width:95%!important;} 
```

请让我知道这段代码有什么问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T09:01:38.890

`setTimeout`是一个内置的 JavaScript 方法，它不是 jQuery 的一部分，请参阅[MDN 文章。](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

重构

```
btn.text("more").addClass('border').setTimeout(btn.removeClass('border'),2000); 
```

至：

```
btn.text("more").addClass('border');
setTimeout(function(){

    btn.removeClass('border');

},2000); 
```

我也认为三元运算符对您的代码没有太大帮助。这使它有点不可读。请考虑改用更简单的`if-else`构造，特别是如果您不使用返回值。

如果您愿意，可以使用 jQuery [.delay](http://api.jquery.com/delay/)函数来完成与您尝试的类似的语法[this](https://stackoverflow.com/questions/2510115/jquery-can-i-call-delay-between-addclass-and-such)。我建议你继续使用`setTimeout`，它更简单、更原生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:05:32.443

setTimeout 不是 jquery 函数。它需要在自己的线路上：

```
var listed=($('p').size())-1,
    btn=$('.compare-btn');
    if(listed < 5) {
      if(listed>=2) {
         btn.show(500);
      }
      else {
         null;
      }
    }
    else
    {
       btn.text("more").addClass('border');
    }
}

setTimeout(function(){btn.removeClass('border'); } ,2000); 
```

# java - 动态创建和添加框架布局android

> ID：15334537
> 
> 赞同：0
> 
> 时间：2013-03-11T08:59:35.710
> 
> 标签：java, android, android-layout, android-framelayout

我创建了一个框架布局，在按钮内有一个按钮和 3 个文本视图。我想复制它并通过java程序动态添加它们。

附上相同的xml代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent">
  <FrameLayout android:id="@+id/frameLayout1" android:layout_width="wrap_content" android:layout_height="wrap_content">        
    <Button android:layout_width="319dp" android:layout_height="130dp"/>
    <TextView android:id="@+id/textView1" android:layout_width="wrap_content"
        android:layout_gravity="center_horizontal" 
        android:layout_marginTop="15dp"
        android:layout_height="wrap_content" android:text="@string/app_name"/>
    <TextView android:id="@+id/textView2" 
        android:layout_gravity="center_horizontal" 
        android:layout_marginTop="45dp"
        android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/app_name"/>
    <TextView android:id="@+id/textView3" 
        android:layout_gravity="center_horizontal" 
        android:layout_marginTop="75dp"
        android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/app_name"/>  
  </FrameLayout>
  <FrameLayout android:id="@+id/frameLayout2" 
      android:layout_width="wrap_content" 
      android:layout_height="wrap_content"
      android:layout_below="@id/frameLayout1">        
    <Button android:layout_width="319dp" android:layout_height="130dp"/>
    <TextView android:id="@+id/textView4" android:layout_width="wrap_content"
        android:layout_gravity="center_horizontal" 
        android:layout_marginTop="15dp"
        android:layout_height="wrap_content" android:text="@string/app_name"/>
    <TextView android:id="@+id/textView5" 
        android:layout_gravity="center_horizontal" 
        android:layout_marginTop="45dp"
        android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/app_name"/>
    <TextView android:id="@+id/textView6" 
        android:layout_gravity="center_horizontal" 
        android:layout_marginTop="75dp"
        android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="@string/app_name"/>  
  </FrameLayout> 
</RelativeLayout> 
```

此复制并附加到末尾的 java 代码由下式给出，

```
FrameLayout f2 = (FrameLayout)findViewById(R.id.frameLayout2);
        FrameLayout f3;
        f3 = f2;
        RelativeLayout.LayoutParams p = new RelativeLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,
                ViewGroup.LayoutParams.WRAP_CONTENT);
        p.addRule(RelativeLayout.BELOW, R.id.frameLayout2);
        f3.setLayoutParams(p); 
```

我希望将第三帧布局放置在第二帧下方，但是运行此代码，第二帧布局也不可见，谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-22T10:43:10.407

您必须在单独的 button_and_text.xml 文件中提取框架布局，然后使用[include 标记](http://developer.android.com/training/improving-layouts/reusing-layouts.html)。

```
<RelativeLayout ...>
    <include layout="@layout/button_and_text" android:id="@+id/frameLayout1"/>
    <include layout="@layout/button_and_text" android:id="@+id/frameLayout2" android:layout_below="@id/frameLayout1"/> 
```

# java - 编辑 JSON 字段

> ID：15334539
> 
> 赞同：0
> 
> 时间：2013-03-11T08:59:37.583
> 
> 标签：java, android, json

我有一个来自服务器的 JSON 如下

```
 {
    "XXXX": {
        "type": "RSS",
        "value": ""
    },
    "YYYY": {
        "type": "String",
        "value": ""
    },
    "ZZZZ": {
        "type": "String",
        "value": ""
    }
} 
```

现在我需要`String`在所有 XXXX、YYYY 和 ZZZZ 的字段中添加值。

我正在使用 eclipse，我需要更改 XXXX 和 YYYY 和 ZZZZ 中“值”的值，我需要添加该字段

```
{
    "MMMM": {
        "type": "Image",
        "value": "a7e8bec0-87ed-11e2-aa2e-52540025ab96_2_1362746556"
    }
} 
```

在ZZZZ之后。请让我知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T09:28:08.137

尝试这个

```
String jsonstring="{
    "XXXX": {
        "type": "RSS",
        "value": ""
    },
    "YYYY": {
        "type": "String",
        "value": ""
    },
    "ZZZZ": {
        "type": "String",
        "value": ""
    }
}";

JSONObject object=new JSONObject(jsonstring);
JSONObject childobject=object.getJSONObject("XXXX");

JSONObject modifiedjson=new JSONObject();
modifiedjson.put("type",childobject.get("type"));
modifiedjson.put("value","newvalue");  // Add new value of XXXX here

//

JSONObject mmjson=new JSONObject();
mmjson.put("type","image");
mmjson.put("value","a7e8bec0-87ed-11e2-aa2e-52540025ab96_2_1362746556");  // Add new value of MMM here

JSONObject newjson=new JSONObject();
newjson.put("MMMM",mmjson.toString());
newjson.put("XXXX",modifiedjson.toString());
newjson.put("YYYY",object.get("YYYY"));
newjson.put("ZZZZ",object.get("ZZZZ")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T09:09:23.803

我想你的意思是

```
{"XXXX":
{"type":"RSS","value":"},
"YYYY (mins)":{"type":"String","value":""},
"ZZZZ":{"type":"String","value":""} 
```

是您从服务器获得的 JSON。您始终可以获取 JSONObject.toString 并根据需要对其进行编辑，然后执行类似的操作，

```
JSONObject obj = new JSONObject(myString); 
```

如果您需要向 JSON 添加键值，您可以尝试，

```
JSONObject value = new JSONObject();
value.put("key","value");
value.put("key","value");//add all the field you want for ZZZZ.
obj.put("ZZZZ",value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:03:38.030

如果它是一个字符串，你可以只搜索指定的值并连接新的字符串。

如果它是 JSON 对象，您可以向 JSON 对象添加新值并搜索您要操作的值并将它们设置为新值。

你此刻在做什么？你能给我们看一些代码，让我们知道，你到底哪里有问题？请展示您如何在此代码中访问 JSON。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T09:07:06.517

用户 Java 字符串替换方法来替换字符串。

将您的 Json 作为字符串，然后通过字符串替换方法替换值。

这是一个小例子。

```
String replaceSample = "This String replace Example shows how to replace one char from 

String newString = replaceSample.replace('r', 't'); 
```

谢谢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T09:07:49.133

```
 var source={
                "XXXX": {
                    "type": "RSS",
                    "value": ""
                },
                "YYYY": {
                    "type": "String",
                    "value": ""
                },
                "ZZZZ": {
                    "type": "String",
                    "value": ""
                }
            } 
```

和你想添加的元素

```
 var element={
        "type": "Image",
        "value": "a7e8bec0-87ed-11e2-aa2e-52540025ab96_2_1362746556"
    }; 
```

您可以使用以下脚本，

```
source["MMMM"]=element; 
```

或者

```
source.MMMM=element; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T09:08:19.697

您可以在 JavaScript 本身中执行所有操作。

让我们将来自服务器的日期存储到变量中`a`：

```
var a = {
    "XXXX":{"type":"RSS","value":"},
    "YYYY (mins)":{"type":"String","value":""},
    "ZZZZ":{"type":"String","value":""}
} 
```

要更改值：

```
a['XXXX']['value'] = 'new_value1';
a['YYYY']['value'] = 'new_value2';
a['ZZZZ']['value'] = 'new_value3'; 
```

要添加字段：

```
a["MMMM"] = {"type":"Image","value":"a7e8bec0-87ed-11e2-aa2e-52540025ab96_2_1362746556"}} 
```

# javascript - 是否有用于上下文感知弹出窗口的 JavaScript 框架？

> ID：15334543
> 
> 赞同：0
> 
> 时间：2013-03-11T09:00:01.837
> 
> 标签：javascript, popup, mobile-website, javascript-framework, popover

我正在寻找类似[Add2Home.js](http://cubiq.org/add-to-home-screen)的东西：

![Add2Home.js](../Images/e605edfe56104fad681116b89d66dfa3.png)

但更通用和可定制：

*   我想通知用户，例如“您知道您可以单击此按钮来执行此操作吗？”
*   弹出窗口应指向页面上的特定 UI 元素。
*   框架应该存储一个 cookie，无论是否显示了某个弹出窗口（如果它已被用户点击，也可能）。
*   它应该在移动设备上工作并且看起来不错。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:24:45.690

有一个**[opentip](http://www.opentip.org/)** javascript 工具提示框架。

我不认为它是存储 cookie，但有很多不同的弹出窗口样式，并且在移动设备上对我来说效果很好。

# android - WebChromeClient 不支持 php iframe 标签吗？

> ID：15334546
> 
> 赞同：1
> 
> 时间：2013-03-11T09:00:17.430
> 
> 标签：android, webview, frame, frameset, webchromeclient

我在 webview 中加载了其他系统给出的 url。但它不显示所有内容，它在页面中留下一个空白窗口。我检查源代码，它有一个框架集标签和一些 iframe 标签。att src 是正确的。为什么它不能从 src 加载内容？webchromeclient 是否支持 php iframe 标签？

```
<frameset id ="dispframeset" rows="*,6%" frameborder="NO" border="0" framespacing="0">
    <frame id="articleFrame" src="/csp/kbs/showKngContent.action?inRecycle=&kngTblFlag=0&kngId=20130228152142812001&dispId=&articleFlag=true&relativeKngFlag=true&buttonFlag=true&coluKngType=2&kngPath=&coluKngName=&kngPointId=&kngPointName=&kngPointPath=&showType=1&backBtnFlag=&dispTmpPreview=&channelId=0&curChannelId=&currentChannelId=&isBackOrGoahead=&clickingLogFlag=" name="articleFrame" scrolling="no" resize/>
    <frame id="articleButtonFrame" src="/csp/kbs/showKngButton.action?kngId=20130228152142812001&dispId=&kngTblFlag=0&buttonFlag=true&showType=1&channelId=0" name="articleButtonFrame" scrolling="auto" resize/>
</frameset> 
```

顺便说一句，网络应用在 IE 浏览器中运行良好，但在 chrome 中很糟糕。

提前考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:08:17.777

就我而言，WebChromeClient 支持 iframe 标签。在我的情况下，我通过以下方式将 iframe 标签提供给 webview。

```
<iframe width=\"480\" height=\"270\" src=\"http://staging.snagfilms.com/modules/html5player.jsp?filmId=ed9195a0-a748-11e0-a92a-0026bb61d036&w=500\" frameborder=\"0\" allowfullscreen></iframe> 
```

上面是 iframe 标签，我是从服务器获取的

```
myWebView = (CustomFacedWebView) findViewById(R.id.web_wrap_browser);
myWebView.getSettings().setPluginsEnabled(true);
        myWebView.getSettings().setJavaScriptEnabled(true);
        myWebView.getSettings().setPluginState(PluginState.ON);
        chromeClient = new MyChromeClient();
        myWebView.setWebChromeClient(chromeClient);
myWebView.loadUrl(URL)
webRoot = (ViewGroup) findViewById(R.id.web_root_view);
        systemRoot = (ViewGroup) webRoot.getParent();

private final class MyChromeClient extends WebChromeClient implements OnCompletionListener, OnErrorListener {
        CustomViewCallback fullscreenCallback;
        VideoView htmlVideoView;

        @Override
        public void onShowCustomView(final View view, final CustomViewCallback callback) {
            super.onShowCustomView(view, callback);

            fullscreenCallback = callback;
            systemRoot.removeAllViews();
            setContentView(view);
            fullScreen = true;
            ............    

        }

        @TargetApi(Build.VERSION_CODES.ICE_CREAM_SANDWICH)
        @Override
        public void onShowCustomView(final View view, final int requestedOrientation,
                final CustomViewCallback callback) {
            super.onShowCustomView(view, requestedOrientation, callback);

            systemRoot.removeAllViews();
            setContentView(view);
            setRequestedOrientation(requestedOrientation);
            fullscreenCallback = callback;

        }

        @Override
        public void onHideCustomView() {
            super.onHideCustomView();
            if(htmlVideoView != null) {
                htmlVideoView.stopPlayback();
            }
            if(webRoot != null) {
                systemRoot.removeAllViews();
                setContentView(webRoot);
            }
            try{
            if(fullscreenCallback != null)
                fullscreenCallback.onCustomViewHidden();
            } catch(Exception e) {
                e.printStackTrace();
            }
            fullScreen = false;

        }

        @Override
        public boolean onError(MediaPlayer mp, int what, int extra) {
            onHideCustomView();
            return false;
        }

        @Override
        public void onCompletion(MediaPlayer mp) {
            onHideCustomView();
        }
    } 
```

# android - Android sdk 内容加载器错误

> ID：15334552
> 
> 赞同：2
> 
> 时间：2013-03-11T09:00:43.400
> 
> 标签：android, eclipse, sdk

我在 win 7 32 位平台上使用**eclipse juno版本。**

一切都很顺利，直到今天我启动 Eclipse 时，Android sdk 内容加载器不能超过 0%。我试图重新启动eclipse，我结束了adb进程并再次重新启动了eclipse。

但是**sdk 内容加载器没有被加载**。根本没有进展。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:08:25.610

# highcharts - Highcharts：从 windrose 图表中删除 1 个标签

> ID：15334553
> 
> 赞同：1
> 
> 时间：2013-03-11T09:00:57.743
> 
> 标签：highcharts, label

我使用 highcharts 创建了一个风玫瑰型图表，以及需要删除的标签之类的东西

我尝试使用：`{ lables: { enabled: false } }`并尝试使用 `showFirstLabel`and`showLastLabel`

但这对我不起作用:(

这是我创建风玫瑰图的方法：

```
wind_rose_chart = Highcharts.data({
    table: 'roulette_windrose',
    startRow: 1,
    endRow: 38,
    endColumn: 37,
    complete: function (options) {
        // Create the chart
        window.chart = new Highcharts.Chart(Highcharts.merge(options, {
            chart: {
                renderTo: 'windrose_container',
                polar: true,
                type: 'column',
                animation: false,
                backgroundColor: '#e4e6e1',
                plotBackgroundImage: "/images/gallery/windrose_roulette.png",
                height: 400,
                width: 350,

            },
            colors: ['#008403',
                     '#E30000','#000000','#E30000',
                     '#000000','#E30000','#000000',
                     '#E30000','#000000','#E30000',
                     '#000000','#000000','#E30000',
                     '#000000','#E30000','#000000',
                     '#E30000','#000000','#E30000',
                     '#E30000','#000000','#E30000',
                     '#000000','#E30000','#000000',
                     '#E30000','#000000','#E30000',
                     '#000000','#000000','#E30000',
                     '#000000','#E30000','#000000',
                     '#E30000','#000000','#E30000'],
            title: {
                text: 'Spots'
            },
            pane: {
                size: '70%'
            },

            legend: {
                enabled: false
            },

            xAxis: {
                labels: {
                    enabled: false
                },
                showFirstLabel: false,
                showLastLabel: false,
                tickmarkPlacement: 'on',
                lineWidth:0,
                gridLineWidth: 0
            },
            yAxis: {
                min: 0,
                gridLineWidth: 0,
                endOnTick: false,
                showLastLabel: false,
                showFirstLabel: false,
                labels: {
                    formatter: function () {
                        return this.value;
                    }
                }
            },

            tooltip: {
                formatter: function() {
                    return this.y;
                }
            },

            plotOptions: {
                series: {
                    stacking: 'normal',
                    shadow: false,
                    groupPadding: 0,
                    pointPlacement: 'on',
                }
            },
            navigation: {
                buttonOptions: {
                    enabled: true
                }
            },
            exporting: {
                enabled: true
            },
            credits: {
                enabled: false
            }
        }));

    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:15:25.327

以下代码正在工作：

```
yAxis: {
    ...
    labels: {
        enabled: false
    }
} 
```

[**演示**](http://jsfiddle.net/alirizaadiyahsi_44/rzLrq/1/)

# javascript - javascript动态textarea和nicedit

> ID：15334557
> 
> 赞同：1
> 
> 时间：2013-03-11T09:01:00.993
> 
> 标签：javascript, html, onclicklistener, nicedit

在这里几个人的大力帮助下，我设法创建了一个页面，可以动态创建动态可调整大小/可拖动的文本区域。我现在正在尝试将 nicedit 集成到这些文本区域中。它工作到一定程度。双击时，textarea 变成了 nicedit 区域，但不幸的是，可拖动事件甚至覆盖了 nicedit，因此无法编辑 textarea。

我的 javascript 是有限的，所以我希望有人能指出我的方式的错误

提前致谢。

这是 jsfiddle 链接[http://jsfiddle.net/JVhpJ/9/](http://jsfiddle.net/JVhpJ/9/)

这是代码

```
<!DOCTYPE html>
<html>
<head>
    <meta charset = "utf-8">       
    <script src = "http://js.nicedit.com/nicEdit-latest.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />  
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>   
    <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>  
    <script>
        window.onload = function () {
            var body = document.body;
            // The magic
            body.addEventListener ("dblclick", function (event) {
                var target = event.target;

                if (target.nodeName === "TEXTAREA") {
                    var area = new nicEditor ({fullPanel : true}).panelInstance (target);

                    area.addEvent ("blur", function () {
                        this.removeInstance (target);
                    });
                }
            }, false);
        }
    var i=0;    
    var p=25;   
    function creatediv1(id)
    {   
        id=id+i;
        var xp=xp+i;
        var newdiv = document.createElement('div');
        newdiv.setAttribute('id', id);
        newdiv.setAttribute('class', 'dragbox');
        newdiv.setAttribute('iterate',i);
        newdiv.style.position = "relative";
        newdiv.style.top = p;
        newdiv.style.left = p;
        newdiv.style.cursor='move';
        newdiv.innerHTML = "<div id='handle'>Drag me into position</div></div><br><textarea id="+i +" name='textarea["+i +"]' class='textarea1' width='300' style='position:absolute; top:0px;left:0px;overflow-y: auto;background-color:transparent;border: 2px dashed #000; '>some text here</textarea>";
        newdiv.innerHTML=newdiv.innerHTML+"<br><input type='hidden' value='300' name='width["+i+"]' id='width"+i+"'><br><input type='hidden' value='300' name='height["+i+"]' id='height"+i+"'>";               
        newdiv.innerHTML=newdiv.innerHTML+"<br><input type='hidden' value='0' name='left["+i+"]' id='left"+i+"'><br><input type='hidden' value='0' name='top["+i+"]' id='top"+i+"'>";           

        document.getElementById("frmMain").appendChild(newdiv);
        $(function()
        {

            $("#"+i).resizable(
            {
                stop: function(event, ui)
                {
                    var width = ui.size.width;
                    var height = ui.size.height;
                   // alert("width="+width+"height="+height);
                    ValProportions(width,height,ui.element.context.id);           
                }
            });

            $( "#"+id ).draggable(
            {
                stop: function(event, ui)
                {
                    Stoppos = $(this).position();
                   $("div#stop").text("STOP: \nLeft: "+ Stoppos.left + "\nTop: " + Stoppos.top);
                       // alert("left="+Stoppos.left+"top="+Stoppos.top);
                    ValPostion(Stoppos.left,Stoppos.top,$(this).attr('iterate'));   
                }
            }); 
             $("#"+i).draggable({handle:"#handle"});  
        });  

        function ValProportions(defaultwidth, defaultheight,id)  { 
            $('#width'+id).val(defaultwidth);
            $('#height'+id).val(defaultheight);
            }
        function ValPostion(defaultleft,defaulttop,id)  {  
            $('#left'+id).val(defaultleft);
            $('#top'+id).val(defaulttop);
            }
        i++;
        p=p+25; 

    }
    </script>
    <style>
        textarea {
            height: 100px;
            margin-bottom: 20px;
            width: 1000px;
        }
    </style>
</head>

<body>
   <form id="frmMain" name="frmMain" enctype="multipart/form-data" action="test.php" method="post">
    <input id="btn1" type="button" value="Add New textbox" onclick="creatediv1('draggable');" />             
    <input type="submit" value="Submit"  >
   </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T08:16:38.810

我设法通过在 div 的 mousedown 事件上使用 stoppropagation() 来解决此问题，这使我可以在没有可拖动覆盖编辑功能的情况下编辑文本

# c - 编译器在使用 strptime 函数时收到警告 (C)

> ID：15334558
> 
> 赞同：13
> 
> 时间：2013-03-11T09:01:06.643
> 
> 标签：c, compiler-warnings, strptime

键入`man strptime`它表示该函数需要声明 _XOPEN_SOURCE 并包含 time.h 标头。我做到了。但是，当我尝试编译我的代码时，我得到：

> ./check.c:56: 警告：函数'strptime'的隐式声明</p>

看我的代码：

```
int lockExpired(const char *date, const char *format, time_t current) {
        struct tm *tmp = malloc(sizeof(struct tm *));
        time_t lt;
        int et;

        strptime(date, format, tmp);
        lt = mktime(tmp);
        et = difftime(current, lt);

        if (et < 3600)
                return -et;

        return 1;
} 
```

函数声明也是：

`char *strptime(const char *s, const char *format, struct tm *tm);`

谁能告诉我我的问题来自哪里？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-11T09:03:53.617

我发现我需要定义`__USE_XOPEN`并`_GNU_SOURCE`让它快乐。

# php - php mathquestion验证码，ajax刷新按钮

> ID：15334559
> 
> 赞同：0
> 
> 时间：2013-03-11T09:01:08.747
> 
> 标签：php, ajax, captcha

我的 php 上有这两个会话变量，它们生成一个随机数：

```
<?php
session_start();
if (!isset($_SESSION['num1']) && !isset($_SESSION['num2'])) {
$_SESSION['num1'] = rand(1,5);
$_SESSION['num2'] = rand(1,5);
}
?> 
```

在同一页面上，我有一个显示 num1 + num2 的标签：

```
<label><?=$_SESSION['num1']?> + <?=$_SESSION['num2']?> ?</label> 
```

我想做的是将标签旁边的 img 变成一个链接，这将更新 num1 和 num2 vars 而不会刷新页面，这可能吗？

我是否应该在像 captcha.php 这样的单独文件中创建这些变量，然后将其包含在显示生成的数字的标签上，并在 captcha.php 上带有回显或类似的东西？还是我需要使用ajax？

你们能帮我解决这个问题吗，我是设计师，正在尝试创建一个作品集，而这种形式让我发疯！谢谢

* * *

@Koterpillar 正如你所说，在我的 captcha.php 上我会有这些：

```
<?php
session_start();
if (!isset($_SESSION['num1']) && !isset($_SESSION['num2'])) {
$_SESSION['num1'] = rand(1,5);
$_SESSION['num2'] = rand(1,5);
}
?> 
```

然后我会将验证码 php 包含到一个 div 中，比如说#captcha。验证码是用一个简单的问题完成的，比如 1+3=，没有绘图图像或类似的东西，它是一个小网页，我想我不需要验证码上的那些噪音和线条，验证是在 php 提交表单上进行的. 但是如何使用 ajax 调用验证码 php 来更新该 div？它是这样的吗？

```
$("#captcha").click(function() {

$.ajax({
type: "POST",
url: "includes/captcha.php",
data: ,
success: function(){

},
});
} 
```

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:06:15.333

如果您想“在不刷新页面的情况下更新 num1 和 num2”，则必须使用 Ajax。建议类似：

```
<div id='captcha'><?php include 'captcha.php'; ?></div> 
```

然后`captcha` `div`通过请求相同的Ajax 更新`captcha.php`：

```
$.get('includes/captcha.php', function (data) {
    $('#captcha').html(data);
}); 
```

（显然，仍然需要限速、绘制图像等。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:05:36.907

会话将运行一次...这意味着当您打开页面时如果设置了会话...然后设置会话值并检查会话值...我认为您需要在加载后更新页面.. ..那么您需要使用Ajax ...该信标会话是服务器端的..没有服务器请求，您无法设置或从会话中获取值..

谢谢...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:05:57.207

如果您想在不刷新页面的情况下进行更新，那么是的，您需要使用 Ajax。

# python - 需要帮助编写函数代码

> ID：15334561
> 
> 赞同：0
> 
> 时间：2013-03-11T09:01:12.387
> 
> 标签：python

我目前正在尝试编写一个函数，该函数`ticker()`将打开一个文件并读取它并要求用户输入公司名称。当用户输入公司名称时，它将返回该公司的股票代码。

还给出了一个数据文件，格式如下：

```
Name of Company #1
Ticker Symbol of Company #1
Name of Company #2
Ticker Symbol of Company #2
... 
```

我需要的视图是这样的：

```
ticker('test.txt')
Enter Company Name: YAHOO
Ticker: YHOO 
```

我目前的代码是：

```
def ticker(x):
    d = {}
    infile = open(x,'r')
    content = infile.readlines()
    for line in (x):
        file = line.split('\n') 
```

但是现在我完全迷失了如何计算这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:13:31.727

要么改变你的文件格式，要么试试这个：

```
ticker = {}
for company, ticker in (x):
    ticker[company] = ticker 
```

这将为您提供一个[字典](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)，它可以以类似的方式访问`dictionary[key]`并返回其值。我敢肯定，如果您通过 google 获取用户输入，您可以使其正常工作。也许应用大小写转换，以便用户输入的大小写无关紧要。

如果这还不能让你走得更远，请考虑更加努力/聘请顾问或提出问题，表明你确实付出了努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:08:07.543

我不确定您正在读取的文件的格式是什么，但以下代码将读取文件并将其分解为非空行。

```
def ticker(filename):
    lines = open(filename).read().split('\n')
    lines = [x in lines if x] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:14:20.600

如果您确定数据文件的格式，可以使用下面的代码，但请始终记住，在不处理可能的异常的情况下处理文件不是一个好主意。

```
def ticker(filename):
    with open(filename, 'r') as f:
        lines = [line.strip() for line in f.readlines()]
        return dict(zip(lines[::2], lines[1::2]))

data = ticker('test')
name = raw_input('Enter Company Name: ')
print 'Ticker:', data.get(name.strip(), 'Not Found!') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T09:15:34.863

下面是一个非常原始和简单的实现，您可以改进它。

```
def ticker(filename):
    name = raw_input("Enter Company Name:")
    f = open(filename, "r")
    l = f.readline()
    ticker = ''
    while l:
        if l.strip() == name:
            ticker = f.readline().strip()
            break
        else:
            l = f.readline()
    if ticker:
        print "Ticker: %s" % ticker
    else:
        print "Ticker not found!"

ticker("1.txt") 
```

# uitableview - 我的视图隐藏了我的一些标签

> ID：15334567
> 
> 赞同：0
> 
> 时间：2013-03-11T09:01:45.007
> 
> 标签：uitableview, uitextfield, subviews

我的视图中有一个文本字段。在此之下，我创建了一个视图，并将 tableview 放置在该视图中。表格视图高度不是恒定的，它来自服务，但是在文本字段中输入数据时，没有问题 bcoz 表格视图可见。我选择了一行，但如果我想再次更改文本字段，当我的文本字段中没有数据时，我正在删除文本字段中的数据，但表格视图仍然可见。

```
 - (void)textFieldDidBeginEditing:(UITextField *)textField {

          } 
```

我在文本字段中仍然缺少任何修改应该更改字符方法吗？我应该用这种方法写什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:24:43.567

你也应该在你的文本字段委托方法中写这个。

```
if ( [textField.text isEqualToString:@""]) 
{
   yourTableView.hidden=YES;
    return;
}
else
{
  yourTableView.hidden=NO;
} 
```

# c# - 画一个可点击的正方形？

> ID：15334569
> 
> 赞同：1
> 
> 时间：2013-03-11T09:01:50.793
> 
> 标签：c#, winforms

我是 C# 新手，但我有很多 Java 经验，所以有人告诉我，基于此，C# 相当容易理解。

到目前为止它是。不过目前，我想做一个简单的井字游戏作为练习的一部分。但是我想做的是绘制可以参考的可点击方块，这样我就可以检查该框是否已被点击。

我目前正在使用 Visual Studio Express 2012。我正在制作一个用于桌面使用的 Windows 窗体应用程序。

我四处寻找解决方案，但似乎找不到能做到这一点的东西。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:18:19.770

```
internal sealed class Box : Control
{
    protected override void OnPaint(PaintEventArgs e)
    {
        e.Graphics.DrawRectangle(Pens.Black, new Rectangle(Point.Empty, new Size(Width - 1, Height - 1)));
    }

    protected override void OnClick(EventArgs e)
    {
        MessageBox.Show("You Clicked The Box!");
    }
} 
```

创建一个派生自`Control`. 从这里您可以覆盖一大堆虚拟成员，包括`OnPaint`您可以执行所有绘图逻辑的方法。在 IntelliSense（DrawRectangle、Draw Line 等）的帮助下，这一切都非常直观。

如果您愿意，您可以`OnClick`像我在这里所做的那样覆盖，否则您可以像订阅`Click`标准控件一样订阅控件的事件。

您还可以从`ContainerControl`您的“网格”派生，其行为类似于 Panel 或 GroupBox 控件。

这是一个简单的例子，我只是为了让你开始。在某些分辨率下，边界有点小问题，我将把它留给我糟糕的数学技能。

```
internal sealed class GameGrid : ContainerControl
{
    protected override void OnCreateControl()
    {
        for (int y = 0; y < 3; y++)
        {
            for (int x = 0; x < 3; x++)
            {
                GameButton button = new GameButton
                {
                    Width = Width/3,
                    Height = Height/3,
                };

                button.Location = new Point(x*button.Width++, y*button.Height++);
                Controls.Add(button);

                button.Click += button_Click;
            }
        }
    }

    static void button_Click(object sender, EventArgs e)
    {
        GameButton gameButton = (GameButton)sender;
        gameButton.CircleCheck = true;
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        e.Graphics.SmoothingMode = SmoothingMode.HighQuality;
        e.Graphics.DrawRectangle(Pens.Black, new Rectangle(ClientRectangle.Location, new Size(Width - 1, Height - 1)));
    }
}

internal sealed class GameButton : Control
{
    private bool _cricleCheck;
    public bool CircleCheck 
    { 
        get
        {
            return _cricleCheck;
        } 
        set 
        {
            _cricleCheck = value;
            Invalidate();
        } 
    }

    private readonly Pen circlePen = new Pen(Brushes.Black, 2.0f);

    protected override void OnPaint(PaintEventArgs e)
    {
        e.Graphics.SmoothingMode = SmoothingMode.HighQuality;
        e.Graphics.DrawRectangle(Pens.Black, new Rectangle(ClientRectangle.Location, new Size(Width - 1, Height - 1)));

        if (CircleCheck)
        {
            e.Graphics.DrawEllipse(circlePen, new Rectangle(ClientRectangle.Location.X + 10, ClientRectangle.Location.Y + 10, Width - 30, Height - 30));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:11:57.563

最常见的可点击方块是[按钮](http://msdn.microsoft.com/en-us/library/system.windows.forms.button.aspx)。

如果按钮在当前游戏状态下是可点击的，那么如果点击它，应该在那里显示什么图标，这听起来像是你的后台逻辑的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:12:04.483

尝试这个：

*   创建一个新表单
*   将 PictureBox 控件拖放到窗体内以呈现井字游戏板
*   处理 Paint 事件以进行图形渲染
*   处理 MouseClick 事件以检测用户是否在棋盘内单击，并使用事件参数来确定用户单击了棋盘的 9 个方格中的哪一个

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T09:16:02.563

我前两天做过类似的练习，

只需查看本教程，我猜就足够了：

[http://www.codeproject.com/Articles/2400/Tic-Tac-Toe-in-C](http://www.codeproject.com/Articles/2400/Tic-Tac-Toe-in-C)

对于 Square，您可以使用按钮，也可以像本教程一样使用 PictureBox（尽管他们使用的是 vb.net 而不是 c#，但它很容易翻译）：

[http://vbprogramming.8k.com/tutorials/tic-tac-toe.htm](http://vbprogramming.8k.com/tutorials/tic-tac-toe.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T09:18:10.643

我认为最简单的解决方案是使用带有背景颜色或图像的简单按钮。有一个当前播放用户的变量并更改

```
button.Text 
```

点击事件。在开头设置“”的所有按钮文本 - 这样您就可以检查按钮是否被单击：

```
if (button.Text!="") 
     //it was already clicked 
```

# excel - 如何更改单元格的颜色比较其他单元格的值

> ID：15334571
> 
> 赞同：-1
> 
> 时间：2013-03-11T09:02:01.237
> 
> 标签：excel

我正在尝试这个 =IF B1 > A1 then color B1 GREEN ELSE color B1 Red ，但不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:11:14.047

首先，我假设您使用的是条件格式。

格式为公式 =if(logictest,valueiftrue,valueif fase) if(b1 > a1,TRUE,FALSE)

做两个单独的公式，一个用于红色，一个用于绿色。

例如条件格式 -> 公式 -> =IF(A1 填充 ->Green"

如果它是假的，则为红色创建第二条规则

编辑：条件格式将复制...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:14:11.787

使用条件格式 一些很好的例子可以在[这里找到](http://www.contextures.com/xlCondFormat03.html)

# php - Preg 替换为提及

> ID：15334574
> 
> 赞同：1
> 
> 时间：2013-03-11T09:02:05.087
> 
> 标签：php, preg-replace

我对 preg_replace 有一些问题。我会更改链接中的提及，但名称不是用户名。所以名称中有空格，我找到了一个很好的解决方案，但我不知道该怎么做。Sostantially 我会说`preg_replace`介于`@`和之间的词`,`

**例如：**

```
@John Doeh, @Jenna Diamond, @Sir Duck Norman 
```

并替换为

```
<a href="user.php?name=VAL">VAL</a> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:19:51.923

我认为你想要它：

```
<a href="user.php?name=John Doeh">John Doeh</a> 
```

对于这个尝试：

```
$myString="@John Doeh, @Jenna Diamond, @Sir Duck Norman";
foreach(explode(',',$myString) as $str)
{
    if (preg_match("/\\s/", $str)) {
        $val=str_replace("@","",trim($str));
        echo "<a href='user.php?name=".$val."'>".$val."</a>";
        // there are spaces
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:14:58.480

根据我的假设，您希望删除`@Some Name,`以文本开头的字符串，例如：`@Some Name, this is a message`.

然后将其替换为`href`，例如：`<a href="user.php?name=First_Name">First_Name</a>`

如果是这种情况，那么下面的正则表达式就可以了：

```
$str = '@First_Name, say something';
echo preg_replace ( '/@([[:alnum:]\-_ ]+),.*/', '<a href="user.php?name=$1">$1</a>', $str ); 
```

将输出：

```
<a href="user.php?name=First_Name">First_Name</a> 
```

我还添加了对数字、下划线和破折号的支持。那些名称也有效吗？任何其他在 a 中有效的字符`@User Name`？这些是重要的事情要知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:39:03.723

两种方法：

```
<?php

// preg_replace method
$string = '@John Doeh, @Jenna Diamond, @Sir Duck Norman';
$result = preg_replace('/@([\w\s]+),?/', '<a href="user.php?name=$1">$1</a>', $string);
echo $result . "<br>\n";

// explode method
$arr = explode(',', $string);
$result2 = '';
foreach($arr as $name){
    $name = trim($name, '@ ');
    $result2 .= '<a href="user.php?name='.$name.'">'.$name.'</a> ';
}
echo $result2;

?> 
```

# dll - 如何动态处理对dll的依赖？

> ID：15334582
> 
> 赞同：0
> 
> 时间：2013-03-11T09:02:29.390
> 
> 标签：dll, odp.net

我有一个隐藏不同 ADO.NET 提供程序差异的 dll，并且有很多代码，例如：

```
private static void AppendProviderSpecificParameterCmdStr(StringBuilder sb, DbCommand cmd, string fieldNameToUse, ComparisonOperator oprtr, string parameterName)
{
    if (cmd is System.Data.OracleClient.OracleCommand || cmd is Oracle.DataAccess.Client.OracleCommand)
    {
        sb.AppendFormat("{0}{1}:{2}", fieldNameToUse, GetComparisonOperatorStr(oprtr, cmd), parameterName);
    }
    else if (cmd is SqlCommand)
    {
        sb.AppendFormat("{0}{1}@{2}", fieldNameToUse, GetComparisonOperatorStr(oprtr, cmd), parameterName);
    }
    else if (cmd is OleDbCommand)
    {
        sb.AppendFormat("{0}{1}?", fieldNameToUse, GetComparisonOperatorStr(oprtr, cmd));
    }
    else
    {
        throw new Exception(string.Format("Wrong database command type: {0},", cmd.GetType()));
    }
} 
```

其中比较运算符是我自己的枚举。

Oracle.DataAccess 存在于所有具有 oracle 客户端的机器上，并且此代码可以满足我的需要。但是现在我遇到了只有 SqlClient 并且他们根本不需要 oracle 的情况。所以我的代码只有在我复制 Oracle.DataAccess.dll 时才有效，这自然是一个可怕的解决方案。这应该如何以正确的方式完成？

谢谢-马蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:54:16.227

我不会把对 dll 的依赖称为一个可怕的解决方案。您的解决方案支持 Oracle，因此您的解决方案中有一个 oracle dll - 它就是这样。

也就是说，您可以做一些事情来抽象出命令类型。

一 - 创建实现接口的完整数据访问方法。您当前的解决方案我将更多地归类为通用数据访问的帮助程序或实用程序方法。您可以改为声明一个特定于域的接口——例如客户——比如 ICustomerDA。在您的情况下，您将有 3 个 ICustomerDA.Insert 实现，其中隐藏了数据库细节。您的主要代码只需要了解 ICustomerDA。这可能是我在更大的解决方案中会做的事情，因为 RDBMS 之间的差异和特性远远超出了参数声明。

二 - 如果你想坚持更多的帮助/实用程序的想法，你可以为 db 对象的包装器创建一个接口，比如 IDBCommand。实现 IDBCommand 将隐藏底层命令对象，然后具有 .AppendProviderSpecificParameterCmdStr 方法的特定实现，该方法允许您执行以下操作：

```
OracleDbHelper : IDbCommand...
  public void AppendProviderSpecificParameterCmdStr(...){
    sb.AppendFormat("{0}{1}:{2}", fieldNameToUse, GetComparisonOperatorStr(oprtr, cmd), parameterName);
  }

IDBCommand cmd = DAFactory.GetCommand();
cmd.AppendProviderSpecificParameterCmdStr(... 
```

这两种解决方案的关键是通过主项目中的公共接口而不是单个类型进行引用。一旦你这样做了，你可以在你的工厂中使用反射，或者更好，**比如[MEF](http://msdn.microsoft.com/en-us/library/dd460648.aspx)来创建实际的类型。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:40:39.930

> 所以我的代码只有在我复制 Oracle.DataAccess.dll 时才有效

除非您*还*拥有本地 OCI DLL，例如因为您已经安装了 Oracle 客户端，否则不会。

为避免强制您的用户安装完整的 Oracle 客户端，您可以将来自 Oracle **Instant** Client 的 DLL 与应用程序一起分发。如果用户从不选择连接到 Oracle，则永远不会调用这些 DLL，它们只是静静地坐在那里而不会造成任何麻烦。

有关分发内容以及如何涵盖 32 位和 64 位的一些提示，请查看[这篇文章](https://stackoverflow.com/a/15887016/533120)。

我们有一个自己开发的抽象层，目前可以与 Oracle 和 MS SQL Server 一起使用（并且可以移植到任何具有良好 ADO.NET 提供程序的 DBMS），并且该系统到目前为止运行良好。

# highcharts - 仪表去除边框IE

> ID：15334585
> 
> 赞同：0
> 
> 时间：2013-03-11T09:02:39.543
> 
> 标签：highcharts

我需要一点帮助。

我制作了一些带有漂亮图像背景的仪表，但在 IE（版本 9）中，它显示了仪表的边框。我不认为图像是问题，因为当我删除图像背景时，边框仍然存在

边框显示在仪表周围。

我的代码：

```
renderTo: 'clock',
        type: 'gauge',
        plotBorder: false,
        plotBackgroundColor: '#403F3F',
        plotBackgroundImage: 'gauge.png',
        plotBorderWidth: 0,
        borderWidth: 0,
        borderRadius: 0,
        spacingTop: 0,
        spacingRight: 0,
        spacingBottom: 0,
        spacingLeft: 0,
        plotShadow: false, 
```

有人对我有解决方案吗？

提前致谢！

问候， 提奥

# paypal - 无法使用 django-paypal 获得有效的 IPN 回发

> ID：15334593
> 
> 赞同：0
> 
> 时间：2013-03-11T09:03:25.783
> 
> 标签：paypal, paypal-ipn, paypal-sandbox, django-paypal

在花了几个小时试图让 django-paypal（最初是 dcramer 的分支）从 PayPal IPN 获得 200 OK 响应后，我将错误定位到 PayPal，`&cmd=`在使用 IPN 模拟器时添加了一个空的、虚假的参数。如果我离开`&cmd=`，当我尝试回发时会收到 400 Bad Request 响应；如果我把它拿出来，我会得到 200 OK，但是回发当然是无效的，因为它不是 PayPal 发送给我的服务器的。

当然，我非常乐意完全取消 IPN 模拟器，而只使用沙盒帐户，但这些也被破坏了：我通过开发人员界面创建的那些无法登录（登录失败错误）；我通过沙盒网站上的“常规”界面创建的那些无论如何都不会发送任何 IPN。

所以，实际上这里有两个问题：

1.  有没有办法解决 IPN 模拟器`&cmd=`错误？
2.  有没有办法让沙盒帐户工作？

对其中任何一个的回复都会让我非常非常高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:10:18.687

您遇到的许多问题现在都已解决。截至周一晚上，IPN 问题和一些开发人员/沙盒登录问题已得到解决。如果您仍然遇到任何问题，请告诉我，我将非常愿意进一步调查。

# ruby-on-rails - Rails + Backbone.js - 在页面源中隐藏安全数据

> ID：15334599
> 
> 赞同：0
> 
> 时间：2013-03-11T09:03:40.997
> 
> 标签：ruby-on-rails, security, backbone.js

我正在使用 API 从带有一些安全标头的主干中获取数据。

```
index: function() {  
  this.collection.fetch({ beforeSend: setHeader });
}

var setHeader = function (xhr) {
  xhr.setRequestHeader('Authorization', 'XXXX');
  xhr.setRequestHeader('AppKey', 'YYYYY');
} 
```

当我做一个页面源时，我能够看到“授权”和“AppKey”。有什么办法可以隐藏它，因为它是一个安全的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:49:07.543

访问您网站的人无法将其隐藏在页面源中。这是因为互联网的运作方式，所有网站内容都下载到访问者的浏览器中，如果开发人员可以对访问者隐藏东西，那将是非常令人讨厌的。

因此，如果它们在源代码中以纯文本形式出现，那么您真的没有任何方法可以向了解其内容的页面访问者隐藏这些内容。即使它们以某种方式被隐藏，当启动该请求时，用户也可以检查其开发人员工具的网络选项卡并从那里获取信息。

如果您想防止某种中间人攻击（例如，一些第三人捕获这些标头），请使用 SSL（因此您的网站通过 https）并且可能进行一些客户端加密，这样它们就不会移动通过未加密的电线。

从客户端加密开始的地方：

[是否值得在客户端散列密码](https://stackoverflow.com/questions/3715920/about-password-hashing-system-on-client-side)

# facebook - 如何在 Facebook Graph API 中获得 Instagram 照片帖子的点赞数？

> ID：15334601
> 
> 赞同：6
> 
> 时间：2013-03-11T09:03:55.220
> 
> 标签：facebook, api, facebook-opengraph, instagram

我正在开发一个应用程序来处理`<used_id>/posts`连接以阅读用户发布的帖子并计算收到的喜欢和评论。

昨天我注意到 Instagram 照片帖子没有出现在帖子连接中。经过一番搜索后，我发现[Instagram 上的这个帖子没有出现在 Facebook Open Graph API 上](https://stackoverflow.com/questions/11677898/posts-from-instagram-not-showing-up-on-facebook-open-graph-api)，之后如果添加了 user_actions:instapp 权限（或好友帖子的friends_actions:instapp），我可以在 Feed 连接中看到 Instagram 照片。

**但仍然存在两个问题：**

1）帖子仍然没有出现在帖子连接中，这在我的情况下使用起来更方便，因为我对可能出现在Feed中的其他用户的帖子不感兴趣。

2）即使我使用Feed连接，帖子也没有填写Likes字段，无论我是否直接指定它都没有关系。我认为评论也是如此。因此，在我的情况下，Feed 也是无用的，因为我需要 Likes 数据。

唯一可行的解​​决方案是使用`<user_id>/instapp:take`- 我也可以通过 Likes 获得所有照片。所以我可能会使用它，但问题是 - 然后我需要做双重 API 调用，因为 Instagram 帖子不是我唯一感兴趣的（我仍然需要调用`<user_id>/posts`）。

我已经提交了这个错误报告：http: [//developers.facebook.com/bugs/131821543664928](http://developers.facebook.com/bugs/131821543664928)

也许有人有一个比调用 instapp:take 更好的解决方案的想法？

谢谢！

# c# - WinRT ListView 在多个级别上分组

> ID：15334606
> 
> 赞同：0
> 
> 时间：2013-03-11T09:04:19.153
> 
> 标签：c#, xaml, listview, windows-runtime, windows-store-apps

我有一个项目，其中有一份约会清单：

预约：

*   姓名
*   城市
*   街道

我想在 ListView 中显示它们，并将它们分成 2 个级别，首先按城市，然后按街道。我还希望能够折叠两个级别的项目并以不同的方式设置标题。

WinRT 中的 ListView 中是否可能出现类似的情况？

我想过在 ListView 中使用 ListView。但这是不可能的，因为我想使用单选模式。或者有什么方法可以强制执行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:48:08.423

我个人会保持简单。

在我创建的 Cineworld 应用程序中，在影院详细信息 xaml 页面中，我为用户提供了查看的选项 * 今天放映的电影（按第一个字符分组） * 按日期分组的电影 * 列出的所有电影（按第一个字符分组）。

这些都是非常不同的选项，我选择了单选按钮和多个分组列表视图的组合（在语义缩放内）。

到目前为止，该解决方案运行良好。

# mysql - MySQL“二进制”与“char 字符集二进制”

> ID：15334607
> 
> 赞同：14
> 
> 时间：2013-03-11T09:04:21.387
> 
> 标签：mysql, debugging, storage, specifications, column-types

`binary(10)`vs 和有什么不一样 `char(10)character set binary`？

和`varbinary(10)`vs `varchar(10)character set binary`？

**它们在所有**MySQL 引擎中都是同义词吗？

有什么需要注意的地方吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-11T10:00:31.370

没有区别。

但是，如果您要存储字符串，则需要注意。

如果您只想存储字节数组或其他二进制数据（例如流或文件），请使用二进制类型，因为这就是它们的用途。

引用[MySQL 手册](http://dev.mysql.com/doc/refman/5.0/en/charset-binary-op.html)：

> 在、或列`CHARACTER SET binary`的定义中使用会使该列被视为二进制数据类型。例如，下面的定义对是等价的：`CHAR``VARCHAR``TEXT`
> 
> ```
> CHAR(10) CHARACTER SET binary
> BINARY(10)
> 
> VARCHAR(10) CHARACTER SET binary
> VARBINARY(10)
> 
> TEXT CHARACTER SET binary
> BLOB 
> ```

所以，技术上没有区别。

但是，在存储字符串时，必须使用字符集将其从字符串转换为字节值。决定是在 MySQL 服务器之前自己执行此操作，还是让 MySQL 为您执行此操作。MySQL 将通过将字符串转换为`BINARY`使用 BIN 字符集来执行。

如果您想以另一种格式存储编码，假设您有一个业务需求，即每个字符必须使用 4 个字节（默认情况下 MySQL 不这样做），然后您可以使用`CHARACTER SET BINARY`文本列并执行字符自己设置编码。

[MySQL 手册中的 The `BINARY`and `VARBINARY`Types](http://dev.mysql.com/doc/refman/5.0/en/binary-varbinary.html)也值得一读，因为它详细介绍了诸如填充之类的重要信息。

**摘要：** 没有技术差异，因为一个是另一个的同义词。在我看来，将二进制字符串存储在通常使用字符串保存字符串的数据类型中是合乎逻辑的`CHARACTER SET BINARY`，并将字节数组/流等存储在`BINARY`无法通过字符集转换数据来表示的字段中。

# scala - 如何制作一个也可以以非尾递归方式引用自身的尾递归方法

> ID：15334611
> 
> 赞同：3
> 
> 时间：2013-03-11T09:04:45.153
> 
> 标签：scala, recursion, tail-recursion

假设我有一种用于长时间运行的计算的机制，它可以暂停自己以便稍后恢复：

```
sealed trait LongRunning[+R];
case class Result[+R](result: R) extends LongRunning[R];
case class Suspend[+R](cont: () => LongRunning[R]) extends LongRunning[R]; 
```

如何运行它们的最简单方法是

```
@annotation.tailrec
def repeat[R](body: LongRunning[R]): R =
  body match {
    case Result(r)   => r
    case Suspend(c)  => {
      // perhaps do some other processing here
      println("Continuing suspended computation");
      repeat(c());
    }
  } 
```

问题在于创建这样的计算。假设我们要实现每 10 个周期暂停一次计算的尾递归阶乘：

```
@annotation.tailrec
def factorial(n: Int, acc: BigInt): LongRunning[BigInt] = {
  if (n <= 1)
    Result(acc);
  else if (n % 10 == 0)
    Suspend(() => factorial(n - 1, acc * n))
  else
    factorial(n - 1, acc * n)
} 
```

但这不会编译：

> 错误：无法优化带`@tailrec`注释的方法`factorial`：它包含一个不在尾部位置的递归调用
> 
> ```
> Suspend(() => factorial(n - 1, acc * n)) 
> ```

如何在非挂起调用上保留尾递归？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:04:45.153

我找到了一个可能的答案。我们可以将尾递归部分移动到内部函数中，并在需要时引用外部非尾递归部分：

```
def factorial(n: Int, acc: BigInt): LongRunning[BigInt] = {
  @annotation.tailrec
  def f(n: Int, acc: BigInt): LongRunning[BigInt] =
    if (n <= 1)
      Result(acc);
    else if (n % 10 == 0)
      Suspend(() => factorial(n - 1, acc * n))
    else
      f(n - 1, acc * n)
  f(n, acc)
} 
```

# c++ - 使用 Apache XML Security C++ (XSec) 封装和分离 XML 签名

> ID：15334616
> 
> 赞同：1
> 
> 时间：2013-03-11T09:04:53.817
> 
> 标签：c++, xml, cryptography, digital-signature, xml-signature

使用 Apache XML 安全库 (xsec) 版本 3.1.1 实现封装和分离签名的正确方法是什么？

我正在寻找一些好的例子，但找不到。apache[网站](http://santuario.apache.org/cprogramming.html)也列出了一个示例，但它仅用于创建信封签名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:02:49.620

我发现解决方案非常简单。

一旦文档被解析，以下将生成一个信封签名（如此[处](http://santuario.apache.org/cprogramming.html)指定）：

```
// rootelem contains the root element of the parsed document
XSECProvider    prov;
DSIGSignature * sig;
DOMElement    * sigNode;

sig = prov.newSignature();
sigNode = sig->createBlankSignature(xercescdom, CANON_C14N_COM, SIGNATURE_HMAC, HASH_SHA1);

// append the signature node to the document's element which is being signed, here
// it is the root element
rootelem->appendChild(xercescdom->createTextNode(MAKE_UNICODE_STRING("\n")));
rootelem->appendChild(sigNode);
rootelem->appendChild(xercescdom->createTextNode(MAKE_UNICODE_STRING("\n")));

// create the envelope reference and the signing key (e.g. HMAC Key)
// set the signing key

sig->setSigningKey(hmackey);

// other steps... Serializing the rootelem will generate an XML document with Enveloped Signature 
```

以下将生成一个信封签名：

```
XSECProvider    prov;
DSIGSignature * sig;
DOMElement    * sigNode;

sig = prov.newSignature();
sigNode = sig->createBlankSignature(xercescdom, CANON_C14N_COM, SIGNATURE_HMAC, HASH_SHA1);

// append an "Object" element to the signature object
DSIGObject * object = sig->appendObject();
// in an enveloping signature, the "Object" element contains the data being signed
// so the rootelem can be appended as a child to this object element
object->appendChild(rootelem);

// AND you are done!
// now create the envelope reference and the signing key (e.g. HMAC Key)
// set the signing key

sig->setSigningKey(hmackey);

// Serializing the signature node (sigNode) will give you the required XML with Enveloping Signature. 
```

类似地，可以通过一些努力生成分离签名。

上面的例子涵盖了非常简单的情况。签署多个数据项和文档子集需要一些努力。

# c# - 条码扫描windows phone 8

> ID：15334619
> 
> 赞同：12
> 
> 时间：2013-03-11T09:04:58.680
> 
> 标签：c#, windows-phone-8

我正在寻找适用于 Windows phone 8 的条码扫描库。

我面临的最大问题是必须对其进行全面管理，因为它必须发送到 Store，而且我们可以找到的所有移植似乎都依赖于本机代码库。

图书馆应该扫描一维和二维条码。

斯特凡诺

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-11T09:32:04.543

**Zebra Crossing**是一个非常流行的开源条码扫描库。

.net 端口可从[http://zxingnet.codeplex.com/](http://zxingnet.codeplex.com/)获得，并且确实包含 Windows Phone 8 的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T09:41:26.640

如果您还在寻找，可以看看 Manatee Works 的[mobiScan 移动条形码扫描器 SDK](http://manateeworks.com/home)。虽然它是封闭源代码，但支持 Windows Phone 8+

# ruby - 为什么添加 c 扩展名的 ruby 代码不起作用？

> ID：15334621
> 
> 赞同：3
> 
> 时间：2013-03-11T09:05:01.867
> 
> 标签：ruby, rubygems, inline-code

```
require "rubygems"
require "inline"

class Primes
  inline do |builder|
    builder.c '
    int prime(int num) {
    if (num == 2){ return 1;}
    if (num %2 == 0) {return 0;}
    int i = 3;
    while( i * i <= num)
    {
          if (num % i==0 )
          {
           return 0; 
           }
          i = i+2;
     }
     return 1;
    }'
  end
end

p = Primes.new

for num in 2..10_000 do
   is_prime = p.prime(num)
   if is_prime == 1
      puts "#{num} is a prime number"
   else
      puts "#{num} equals #{is_prime} * #{num/is_prime}"
   end
end 
```

在执行这段 ruby​​ 代码时，我遇到了很多错误......

```
/.rvm/gems/ruby-1.9.3-p362/gems/inline-0.1.0/lib/inline/history_buffer.rb:96: warning: else without rescue is useless
.rvm/gems/ruby-1.9.3-p362/gems/inline-0.1.0/lib/inline/history_buffer.rb:108: warning: else without rescue is useless
.rvm/rubies/ruby-1.9.3-p362/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require':/.rvm/gems/ruby-1.9.3-p362/gems/inline-0.1.0/lib/inline/history_buffer.rb:93: syntax error, unexpected ':', expecting keyword_then or ',' or ';' or '\n' (SyntaxError)
            when nil: @position = length-1
                     ^
.rvm/gems/ruby-1.9.3-p362/gems/inline-0.1.0/lib/inline/history_buffer.rb:94: syntax error, unexpected keyword_when, expecting keyword_end
            when 0: @position = length-1 if @cycle
                ^
.rvm/gems/ruby-1.9.3-p362/gems/inline-0.1.0/lib/inline/history_buffer.rb:105: syntax error, unexpected ':', expecting keyword_then or ',' or ';' or '\n'
            when nil: @position = length-1
                     ^
.rvm/gems/ruby-1.9.3-p362/gems/inline-0.1.0/lib/inline/history_buffer.rb:106: syntax error, unexpected keyword_when, expecting keyword_end
            when length-1: @position = 0 if @cycle
                ^
.rvm/gems/ruby-1.9.3-p362/gems/inline-0.1.0/lib/inline/history_buffer.rb:106: syntax error, unexpected ':', expecting keyword_end
            when length-1: @position = 0 if @cycle
                          ^
.rvm/gems/ruby-1.9.3-p362/gems/inline-0.1.0/lib/inline/history_buffer.rb:128: syntax error, unexpected keyword_end, expecting $end
    end
       ^ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T09:10:08.087

您正在使用该 gem 的某个旧版本，该版本已被废弃。SeattleRb 团队从未创建过版本并称为[`RubyInline`](https://rubygems.org/gems/RubyInline). 看一下这个。

# asp.net - CustomErrors DefaultRedirect 到 Default.aspx 不工作

> ID：15334626
> 
> 赞同：7
> 
> 时间：2013-03-11T09:05:11.477
> 
> 标签：asp.net, redirect, error-handling, web-config

```
<system.web>
    <authentication mode="Forms">
      <forms loginUrl="~/LogIn.aspx" defaultUrl="~/default.aspx" protection="All">
      </forms>
    </authentication>
    <customErrors mode="Off" defaultRedirect="~/default.aspx"></customErrors>
</system.web> 
```

这是我在 web.config 中的错误处理，它不起作用。如果抛出任何异常，它不会重定向到**default.aspx**页面。
是因为我设置`defaultUrl` 了`~/default.aspx`吗？- 如果不是，错误处理有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T09:06:38.840

你必须有`mode="On"`而不是`mode="Off"`

```
<customErrors mode="On" defaultRedirect="~/default.aspx"></customErrors> 
```

# android - 如何使用 android/linux 电源驱动程序注册设备驱动程序？

> ID：15334630
> 
> 赞同：2
> 
> 时间：2013-03-11T09:05:19.400
> 
> 标签：android, linux-device-driver, power-management

我正在为 android 设备开发与 lcd 相关的内核级设备驱动程序。有人可以帮我处理 Android 中与电源管理相关的 API，通过它我可以注册我的驱动程序以接收设备状态的任何更改。

更准确地说，我希望我的驱动程序在系统状态发生变化时（例如从运行状态变为睡眠状态或挂起状态）接收来自电源驱动程序的任何事件（或其他事件）。我希望我的司机也能睡觉，在当前情况下，这会耗尽所有电池。

我有几个链接[http://www.kandroid.org/online-pdk/guide/power_management.html](http://www.kandroid.org/online-pdk/guide/power_management.html) 和[http://developer.android.com/reference/android/os/PowerManager.html](http://developer.android.com/reference/android/os/PowerManager.html)

其中谈到了 android_register_early_suspend 和 android_register_early_resume 之类的函数，但我在整个内核源代码（基于 linux 3.0）中找不到对这些函数的任何调用

我听说过“Linux 电源管理”，并且可以在我当前的基线代码中找到诸如驱动程序/基础/电源和驱动程序/电源之类的文件夹。如何在我的代码中使用此驱动程序。

如果我缺少任何细节，请告诉我。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:26:03.700

您的驱动程序应该实现运行时挂起/恢复回调。检查这个[文档](http://www.mjmwired.net/kernel/Documentation/power/runtime_pm.txt)。

在 'struct dev_pm_ops' 中实现设备 PM 回调的示例代码（定义在 linux/pm.h 中）

```
static int lcdxxx_suspend(struct device *dev)
{
    //Your Code to suspend your device
}

static int lcdxxx_resume(struct device *dev)
{
    //Your code to resume your device
}

static const struct dev_pm_ops lcd_pm_ops = {
    .suspend    = lcdxxx_suspend,
    .resume     = lcdxxx_resume,
};

struct device_driver lcd_driver = {
    ....
    .pm = &lcd_pm_ops,
    ....
} 
```

这只是示例 impl。实际实施取决于您的要求。

# php - 从具有 Group_concat 函数的表中检索数据

> ID：15334632
> 
> 赞同：0
> 
> 时间：2013-03-11T09:05:25.473
> 
> 标签：php, mysql, group-concat

这是使用 GROUP_CONCAT() 列 content_ids 和 content_titles 的两个表的结果，此数据用“，”分隔符分隔

![结果](../Images/70aff9914e6bbd53baf62345e6e707f3.png)

我需要的是什么？

使用 php，值必须存储在数组中，并且应该使用循环打印。

谁能帮我？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:09:37.293

以通常的方式检索您的数据。
然后，在读取特定的逗号分隔字段后，使用[explode()](http://php.net/explode)从中获取一个数组。
就这样

# sql-server - Firebird 数据库复制到 ms sql server

> ID：15334633
> 
> 赞同：0
> 
> 时间：2013-03-11T09:05:25.987
> 
> 标签：sql-server, ssis, firebird, database-replication, mirroring

我们有一个连接到我们的访问控制系统的 firebird 数据库，然后是一个单独的 Web 应用程序，我使用 sql server 2005 作为数据源为我们的时间和考勤开发。

我想使用实体框架连接到 firebird 数据库以访问用户、事务、站点等数据。由于这种方法非常复杂，因此使用 firebird [.NET 提供程序](http://www.firebirdsql.org/en/net-provider/)获取连接，我拥有的另一个选项是创建一种复制（镜像）从firebird数据库到sql server。

我之前使用 DTS 完成了此操作（选择数据然后插入它），它运行良好，但在获取数据和更新过程中涉及许多手动过程，这使得它变得困难。

有没有更简单的方法可以做到这一点或任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T14:37:43.467

不幸的是，您需要在数据级别跟踪要复制的内容。如果您只是将其推送到 MS SQL 数据库，您可以使用修改后的时间戳或记录版本字段（创建生成器，设置触发器以在更新时更新版本字段）来减少您选择的内容。另一个流行的选项是将字段更新为 current_transaction，但如果您进行恢复，您将从 0 开始计数。

如果您以两种方式发送数据，它会变得更加复杂——您需要解决冲突。您可以查看可以使用上述方法 的[Microsoft Sync Framework之类的东西。](http://msdn.microsoft.com/en-us/sync/bb821992)

# java - 如何销毁/清除在 Spring MVC 中使用 applicationcontext.xml 文件创建的对象？

> ID：15334637
> 
> 赞同：0
> 
> 时间：2013-03-11T09:05:36.580
> 
> 标签：java, spring, object, spring-mvc

我正在使用 Spring 3.2.1 创建 Web 应用程序...

我已经从我的 ApplicationContext.xml 文件中注入了许多 bean，它被初始化并且工作正常。

现在我的问题是，我想手动销毁使用 ApplicationContext.xml 创建的一些（不是所有对象）对象。

是否可以销毁使用 applicationcontext.xml 文件创建的特定对象？如果是这样，请让我知道实现它的方法..

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:10:09.947

下面的代码片段演示了如何从 ApplicationContext 中移除一个 bean。

```
ConfigurableListableBeanFactory configurableListableBeanFactory = context
        .getBeanFactory();

BeanDefinitionRegistry beanDefinitionRegistry = (BeanDefinitionRegistry) configurableListableBeanFactory;
// Removing the bean from container
beanDefinitionRegistry.removeBeanDefinition("demo"); 
```

[资源](http://shinusworkspace.blogspot.com/2012/05/adding-and-removing-spring-initialized.html)

要从控制器中检索，`ApplicationContext`只需自动装配上下文。

```
private @Autowired
ApplicationContext context; 
```

# c# - Entity Framework 5 不会将 Item 添加到 Collection，如何解决这个问题？

> ID：15334643
> 
> 赞同：0
> 
> 时间：2013-03-11T09:05:48.510
> 
> 标签：c#, .net, linq, entity-framework-5

所以我有一个这个模型[http://i.imgur.com/tz8ZVPT.png](http://i.imgur.com/tz8ZVPT.png)，我想用一个程序创建一个更新，所以我首先创建更新，填写所有必要的项目，找到一个 MachineType，也许一个程序，但如果没有找到，则从 MachineType 中获取第一个程序。注意：所有 MachineType 至少有 1 个程序。

```
 for (int i = 0; i < dgvInput.Rows.Count; i++)
        {
            DataGridViewRow row = dgvInput.Rows[i];
            int machineTypeId = Convert.ToInt32(row.Cells[1].Value);
            Update update = new Update();
            update.MachineType.Add(Check.prombase.MachineTypes.First(mt => mt.MachineTypeId == machineTypeId));
            foreach (Program program in database.Programs)
            {
                if (program.ProgramVersion.Split('v')[0] == row.Cells[5].Value.ToString())
                {   //If a program is added here, it will save it
                    update.Program.Add(program);
                    break;
                }
            }
            if (update.Program.Count == 0)
                foreach (Program program in database.Programs)
                {   //When a program is added here, it will NOT save it
                    if (program.MachineType.MachineTypeId == machineTypeId)
                    {
                        update.Program.Add(program);
                        break; //When debugging it comes here everytime
                    }
                }
            //Here it is always: update.Program.Count = 1
            database.AddToUpdates(update);
            database.SaveChanges();

            if (update.MachineType.Count == 0 || update.Program.Count == 0)
                MessageBox.Show("This error is nevers shown!");
        } 
```

问题是，它总是说它有一个程序，但实际上它没有。我做错了什么，它不会将程序添加到我的更新中？

编辑VARAK：替换代码后它仍然不会保存它，最后也添加了这个

```
reloadDatabase();

foreach(Update update in database.Updates)
    if (update.Program.Count == 0)
        MessageBox.Show("This can't be happening"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:10:41.733

请试试这个：

```
for (int i = 0; i < dgvInput.Rows.Count; i++)
    {
        DataGridViewRow row = dgvInput.Rows[i];
        int machineTypeId = Convert.ToInt32(row.Cells[1].Value);
        Update update = new Update();
        update.MachineType.Add(Check.prombase.MachineTypes.First(mt => mt.MachineTypeId == machineTypeId));

        var programVal = row.Cells[5].Value.ToString() + "v";

        var program = database.Programs.FirstOrDefault(prog => prog.ProgramVersion.StartsWith(programVal));

        if (program == null)
            program = database.Programs.First(prog => prog.MachineType.MachineTypeId == machineTypeId);

        update.Program.Add(program);            

        database.AddToUpdates(update);
        database.SaveChanges();

        //This will never show an error as the update that you are accessing here is the one you created in memory (Not the one in the DB)
        if (update.MachineType.Count == 0 || update.Program.Count == 0)
            MessageBox.Show("This will never show!");

        //To get the error, pull the update from the database again
        var updateNew = database.Updates.First(upd => upd.UpdateId == update.UpdateId);
        if (updateNew.MachineType.Count == 0 || updateNew.Program.Count == 0)
            MessageBox.Show("This will show if prog was not saved");

    } 
```

这段代码应该更有效，如果它不起作用，可能会更清楚一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:50:57.900

终于找到了解决方案，正如您在我的模型中看到的那样，程序可以有 1 个更新，因此当使用与另一个更新相同的程序创建新更新时，其他更新将失去连接的程序。

# winapi - 客户端无法接收来自 BROADCAST UDP 服务器的消息。（温索克）

> ID：15334647
> 
> 赞同：2
> 
> 时间：2013-03-11T09:06:04.237
> 
> 标签：winapi, udp, winsock, broadcast

我开发了一个客户端服务器 UDP 应用程序。服务器 UDP 套接字设置为 BROADCAST UDP 套接字。双方的代码都没有产生任何错误，但是从BROADCAST UDP SERVER端发送的消息在客户端没有收到。请看看我的代码，我知道有一些我无法弄清楚的错误。我真的需要帮助：

**服务器：**

```
#define PORT 8888 //The port on which to listen for incoming data

int main()
{

SOCKET s;
struct sockaddr_in serverSocket, clientSocket;

char receiveBuffer[1000];
//int receiveBufferLength=1000;
int clientSocketLength;
int recv_len;

clientSocketLength = sizeof(clientSocket) ;

WSADATA wsa; 
//Initialise winsock
printf("\nInitialising Winsock...");
if (WSAStartup(MAKEWORD(2,2),&wsa) != 0)
{
  printf("Failed. Error Code : %d",WSAGetLastError());
    exit(EXIT_FAILURE);
}
printf("Socket Initialised.\n");

//Create a socket
if((s = socket(AF_INET , SOCK_DGRAM , 0 )) == INVALID_SOCKET)
{
    printf("Could not create socket : %d" , WSAGetLastError());
}
printf("Socket created.\n");   

//Prepare the sockaddr_in structure
serverSocket.sin_family = AF_INET;
serverSocket.sin_addr.s_addr = INADDR_ANY;
serverSocket.sin_port = htons( PORT );

int broadcast =1;

if (setsockopt(s, SOL_SOCKET, SO_BROADCAST, (char*) &broadcast, sizeof(broadcast)) < 0) {
    //close(sock);
    printf("Error in setting broadcast option");
}   
//Bind
if( bind(s ,(struct sockaddr *)&serverSocket , sizeof(serverSocket)) == SOCKET_ERROR)
{
    printf("\nBind failed with error code : %d" , WSAGetLastError());
    exit(EXIT_FAILURE);
}
printf("Bind done\n\n");

//keep listening for data

    printf("\n\t\t\tWaiting for data...\n");
    fflush(stdout);
    //receiveBuffer[2000]=NULL;

    if((recv_len = recvfrom(s, receiveBuffer, 1000, 0, (struct sockaddr *) &clientSocket, &clientSocketLength)) == SOCKET_ERROR)
    {
        printf("\n\nrecvfrom() failed with error code : %d" , WSAGetLastError());
        //exit(EXIT_FAILURE);
        while(1);
    }

    //print details of the client/peer and the data received
    printf("\n\nReceived packet from %s:%d\n", inet_ntoa(clientSocket.sin_addr), ntohs(clientSocket.sin_port));
    printf("\nClient Says: " );
        printf(receiveBuffer,recv_len);

    serverSocket.sin_addr.s_addr = INADDR_BROADCAST;
    //now reply the client with the same data
    if (sendto(s, receiveBuffer, recv_len, 0, (struct sockaddr*) &serverSocket, sizeof(serverSocket)) == SOCKET_ERROR)
    {
        printf("\nsendto() failed with error code : %d" , WSAGetLastError());
       // exit(EXIT_FAILURE);
        while(1);
    }
    else
        printf("\nMessage Sent Back to Client");
    while(1);

closesocket(s);
WSACleanup();
return 0;

} 
```

**客户**：

```
#define PORT 8888   //The port on which to listen for incoming data
#define SERVER "127.0.0.1"  //ip address of udp server
//#define PORT 8888   //The port on which to listen for incoming data

int main(void)
{
struct sockaddr_in connectedSocket;

int s;
int length=sizeof(connectedSocket);

char receiveBuffer[1000];
char message[1000];

//clear the buffer by filling null, it might have previously received data
memset(receiveBuffer,'\0', 1000);

WSADATA wsa;
//Initialise winsock
printf("\nInitialising Winsock...\n");
if (WSAStartup(MAKEWORD(2,2),&wsa) != 0)
{
    printf("\nFailed. Error Code : %d",WSAGetLastError());
    exit(EXIT_FAILURE);
}
printf("\n.........Initialised.\n");

//create socket
if ( (s=socket(AF_INET, SOCK_DGRAM, 0)) == SOCKET_ERROR)
{
    printf("\n\nsocket() failed with error code : %d" , WSAGetLastError());
    exit(EXIT_FAILURE);
}

//setup address structure
memset((char *) &connectedSocket, 0, sizeof(connectedSocket));
connectedSocket.sin_family = AF_INET;
connectedSocket.sin_port = htons(PORT);
 //connectedSocket.sin_port = INADDR_BROADCAST;
connectedSocket.sin_addr.S_un.S_addr = inet_addr(SERVER);

printf("\n\n\nEnter message : ");
    gets(message);

  //send the message
    if (sendto(s, message,sizeof(message) , 0 , (struct sockaddr *) &connectedSocket, sizeof(connectedSocket)) == SOCKET_ERROR)
    {
        printf("\nsendto() failed with error code : %d" , WSAGetLastError());
        exit(EXIT_FAILURE);
    }

        printf("\nMessage Successfully sent to Server");
      // fflush(stdout);

    if (recvfrom(s, receiveBuffer, 1000, 0, (struct sockaddr *) &connectedSocket,&length) == SOCKET_ERROR)
    {
       printf("\nrecvfrom() failed with error code : %d" , WSAGetLastError());
       exit(EXIT_FAILURE);
       while(1);
    }

    printf("\nServer Says : ");
    printf(receiveBuffer,sizeof(receiveBuffer));

  while(1);

closesocket(s);
WSACleanup();

return 0; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:41:26.390

您正在将回复发送回客户端`serverSocket`。您已经有一个`clientsocket`收到消息的消息，使用它将消息从服​​务器发送回客户端。

消除 ...

```
serverSocket.sin_addr.s_addr = INADDR_BROADCAST; 
```

并改变...

```
if (sendto(s, receiveBuffer, recv_len, 0, (struct sockaddr*) &serverSocket, sizeof(serverSocket)) == SOCKET_ERROR) 
```

至

```
if (sendto(s, receiveBuffer, recv_len, 0, (struct sockaddr*) &clientSocket, sizeof(clientSocket)) == SOCKET_ERROR) 
```

它现在应该可以工作了。

# sharepoint - Microsoft.VisualStudio.SharePoint.targets(418,7)：错误 MSB4131：不支持“IsDebugging”参数

> ID：15334648
> 
> 赞同：1
> 
> 时间：2013-03-11T09:06:06.817
> 
> 标签：sharepoint, build, visual-studio-2012, msbuild-task

我正在使用 Visual Studio 2012 构建一个空的 SharePoint 2013 项目（添加了一个测试列表）。但是，当我尝试部署项目时，我收到以下信息：

C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\SharePointTools\Microsoft.VisualStudio.SharePoint.targets(418,7)：错误 MSB4131：“SetPackagingProperties”不支持“IsDebugging”参数任务。验证该参数是否存在于任务中，并且它是一个可获取的公共实例属性。

我试过注释掉各种行，但这只会导致更多问题。此外，它不会打包解决方案。

此处记录的 setPackagingProperties 任务[http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.sharepoint.tasks.setpackagingproperties.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.sharepoint.tasks.setpackagingproperties.aspx)确实不包括 IsDebugging 属性。因此文件 C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\SharePointTools\Microsoft.VisualStudio.SharePoint.targets 是否不正确？我正在使用 SharePoint Found Server 2013。

感谢您的帮助-这个正在使我头疼！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:05:34.133

事实证明，解决方案很简单：DLL 冲突。

对于有同样问题的其他人：

C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\SharePointTools\Microsoft.VisualStudio.SharePoint.Tasks.dll 包含 IsDebugging 属性（未记录！）。我的问题是我使用 SP 开发人员工具安装了 VS 2010。这意味着 VS 2012 引用了 Microsoft.VisualStudio.Sharepoint.Tasks.dll 的错误 DLL 版本。我的解决方案很简单，因此在整个系统中搜索此 DLL 并删除除上述路径中引用的副本之外的所有副本。

帕累托比率：80% 的时间浪费是因为遇到的问题只有 20%，比如这个！！！

# javascript - 如何将我的函数返回值传递给父函数

> ID：15334652
> 
> 赞同：-1
> 
> 时间：2013-03-11T09:06:22.477
> 
> 标签：javascript

我正在为我的项目使用 angular.js，并且我编写了一项服务，其中我返回了患者详细信息，但在控制器中，我没有通过 patientinfo() 函数调用获得此返回值。这是我的服务代码：

```
app.service('PatientDetailService', function() {

  this.patientinfo = function(){

    $.ajax({
    dataType: "json",
    url: "json/client_info.json",
    type: 'get',
    error: function(patientdetail){ alert("error");}, 
    success: function(patientdetail){
        alert("successs");
        console.log(patientdetail);

              return patientdetail;

          }
    });

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:08:51.583

这是一个异步调用。在 AJAX 调用完成之前，您不会得到结果（此时您的函数将作为事件循环的一部分被调用）。

在执行过程中您不会得到回复`patientinfo`——相反，您必须设置一些其他函数来处理结果。

# windows-store-apps - 哪些 IoC 容器适用于 Windows 应用商店应用程序？

> ID：15334654
> 
> 赞同：2
> 
> 时间：2013-03-11T09:06:31.273
> 
> 标签：windows-store-apps, ioc-container

哪些 IoC 容器可用于 Windows 应用商店应用项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:09:35.703

*   [广](https://github.com/philiplaureano/Hiro)
*   [自动法](http://code.google.com/p/autofac/)
*   [地铁公司](http://metroioc.codeplex.com/)
*   [小Ioc](https://github.com/grumpydev/TinyIoC/)
*   [便携式Ioc](http://portableioc.codeplex.com/)
*   [穆根](http://mugeninjection.codeplex.com)

请重新使用此答案来添加新条目或编辑现有条目。

# sqlite - 无法写入 sqlite3 数据库

> ID：15334659
> 
> 赞同：0
> 
> 时间：2013-03-11T09:06:44.190
> 
> 标签：sqlite, eclipse-plugin, ormlite, osgi-bundle

我有一个使用sqlite3数据库的程序，我可以读但不能写，这个问题只出现在我的电脑上。在其他计算机（相同的操作系统）中它工作正常。

我有 ubuntu 11.10 64 位和 Eclipse Juno 作为 IDE。

如果我用 sqliteMan 打开它并尝试手动插入它就可以了。它仅在我尝试通过 osgi 包编写时发生。

数据库权限：-rw-rw-r--。

数据库映射是使用 OrmLite 完成的。

有任何想法吗？

# java - TimerTask 的替代方案，支持等待完成？

> ID：15334660
> 
> 赞同：-4
> 
> 时间：2013-03-11T09:06:46.300
> 
> 标签：java

我想创建一个是 A 的类，`TimerTask`也是一个`Thread`. 我假设这个想法没有错。我这样做的原因在我在[这里](https://stackoverflow.com/questions/15333891/need-to-fix-my-java-timer-code)的帖子的“所需输出”部分中提到。

Java 类不能从两个类继承。那么，我该如何解决这个问题呢？

原因在我在问题中提到的帖子中。

*实际输出：* 所有定时器任务都在main方法中执行。我的主代码的最后一条打印语句在所有计时器任务执行之前显示。我不想要那个。

*预期输出：* 我希望 main 的结束打印语句出现在其他所有内容之后。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T09:07:50.327

扩展 TimerTask 并实现 Runnable

**重述原始问题后进行的编辑：**检查[https://stackoverflow.com/a/4951059/869488](https://stackoverflow.com/a/4951059/869488)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T09:44:53.970

你问错问题了。Java 中不可能实现多重继承，但这不是您的实际目标。

您想要的是等待多个定时任务完成的能力。有几种方法可以实现这一目标。

可能最直接的方法是使用 a [`ScheduledExecutionService`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)，它会`Future`以类似于`join`您习惯的方法的方式为您提供可以等待的 a 。

另一种方法是使用 a[`CountDownLatch`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)让每个计时器任务在完成时减少锁存器；然后，您可以使用`await`.

还有一个是使用`wait`和`notify`原语自己构建同步的策略——你的问题也不难解决。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T09:37:50.257

Java 不支持您想要的设计。

支持的设计是使用`wait`而`notify`不是加入`TimerTask`线程（您不能这样做）。此 SO 问题下的示例：[一个很好的小示例，用于演示 java 中的 wait() 和 notify() 方法](https://stackoverflow.com/questions/8358600/a-good-small-example-to-demonstrate-wait-and-notify-method-in-java)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T09:09:43.467

您可以实现 Runnable。

```
class BulbJob extends TimerTask implements Runnable
{

    public void run()
   {

   }
} 
```

# sorting - jqgrid 无法对本地数据类型进行排序

> ID：15334663
> 
> 赞同：-1
> 
> 时间：2013-03-11T09:06:50.150
> 
> 标签：sorting, jqgrid

我在使用 jqGrid 对数据进行排序时遇到问题。

我使用数据类型：“本地”。

当我重新加载页面时一切都很好，按升序排序。但是，如果我单击标题层进行排序（desc 或 asc）jqGrid 排序 1,10,2,3... 不是 1,2,3,4...10（asc）和 9,8,7... 3,2,10,1（递减）

我该如何解决这个问题？

这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>My First Grid</title>

<link rel="stylesheet" type="text/css" media="screen" href="css/jquery-ui-1.10.1.custom.min.css" />
<link rel="stylesheet" type="text/css" media="screen" href="css/ui.jqgrid.css" />

<style type="text/css">
html, body {
    margin: 0;
    padding: 0;
    font-size: 75%;
}
</style>

<script src="js/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="js/grid.locale-en.js" type="text/javascript"></script>
<script src="js/jquery.jqGrid.min.js" type="text/javascript"></script>

<script type="text/javascript">
$(function(){ 
  $("#list").jqGrid({
    datatype: "local",
    height: 300,
    colNames:['ID','Inv Date','Name', 'Note','Amount','Tax','Total'],
    colModel :[ 
      {name:'id', index:'id',width:20},
      {name:'invdate', index:'invdate', width:55}, 
      {name:'name', index:'name', width:90}, 
      {name:'note', index:'note', width:80, align:'right'}, 
      {name:'amount', index:'amount', width:80, align:'right'}, 
      {name:'tax', index:'tax', width:80, align:'right'}, 
      {name:'total', index:'total', width:150, sortable:true} 
    ],
    sortname: "id",
    multiselect: true,
    caption: "Manipulating Array Data"
});
  var mydata = [
    /**
     * do this with PHP, for sampling usage i just want it generated automatically.
     */
    <?php 
      $data=array();
      for ($i=1; $i <= 10; $i++) { 
        # code...
        $data[]='{id:'.$i.',invdate:"'.$i.'",name:"'.$i.'",note:"'.$i.'",amount:"'.$i.'",tax:"'.$i.'",total:"'.$i.'"}';
      }
      $data=implode(",",$data);
      echo $data;
    ?>
    ];
for(var i=0;i<=mydata.length;i++)
  jQuery("#list").jqGrid('addRowData',i+1,mydata[i]); 
}); 
</script>

</head>
<body>
<!--this is it, jqGrid-->
<table id="list"><tr><td/></tr></table> 
<div id="pager"></div> 
<!--end of jqGrid-->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:53:06.633

如果您希望 jqGrid 将列中的数据排序为整数，则应在相应列的定义中包含[sorttype: "integer"属性。](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acolmodel_options)`colModel`

# search - Solr：基于数字“流行度”字段提升文档 - 在索引时间或查询时间进行吗？

> ID：15334667
> 
> 赞同：2
> 
> 时间：2013-03-11T09:07:00.353
> 
> 标签：search, solr

我正在阅读 solr 食谱，它建议使用 boost 函数`bf=product(popularity)`参数来根据“受欢迎程度”分数来提升某些文档。

这也可以使用文档上的索引时间提升来实现，对吗？

那么哪个是更好的选择？在以下方面是否有区别：

*   功能性？
*   表现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T20:37:01.867

这取决于您的受欢迎程度变化的频率。如果它是预先烘焙的并且不经常更改，那么您可以在索引时进行提升。如果它经常更改（例如基于实时搜索），那么您可能希望使用（例如）[ExternalFileField](http://docs.lucidworks.com/display/solr/Working+with+External+Files+and+Processes)将其存储在特定记录的外部。

# android - GPS 设备在阴天在 Android 中返回错误输出

> ID：15334668
> 
> 赞同：2
> 
> 时间：2013-03-11T09:07:05.423
> 
> 标签：android, gps, android-location

在阴天，GPS 设备的输出是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:16:04.863

从链接[http://www.gpsreview.net/10-myths-about-gps/](http://www.gpsreview.net/10-myths-about-gps/)

人们经常将 GPS 接收器描述为需要“清晰的天空视野”，但清晰的视野只是回答没有任何障碍物，如山脉、高楼、茂密的树冠等。阴天不会阻止您的 GPS 工作。例如，飞机可以在多云或有雾的条件下使用 GPS 导航到跑道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:19:35.613

没有明确的方法可以知道多云天气是否会影响 GPS 的*性能*。此外，如果我们假设它确实会影响它，则无法确定它对输出有什么影响。

GPS 性能也会因设备而异。（我纯粹是在 Android 设备的上下文中说的）。第一代三星 Galaxy S 以其糟糕的 GPS 性能而闻名。在某种程度上，在 XDA 上粗略搜索会发现几个尝试的*修复*以及一些硬件模块。

但是，在我看来，您关于多云天气会影响 GPS 性能的说法在许多 GPS 用户中是一个**普遍的神话。**第一个来源明确指出，在多云条件下使用 GPS 时的损失仅为 2db。正如您在应用程序中所说的那样，几乎不足以影响它的性能。

来源1：[http ://www.gpsinformation.net/gpsclouds.htm](http://www.gpsinformation.net/gpsclouds.htm)

来源 2：[http ://en.wikipedia.org/wiki/Global_Positioning_System](http://en.wikipedia.org/wiki/Global_Positioning_System)

从来源 2 中提取：

> 全球定位系统 (GPS) 是一种基于空间的卫星导航系统，可在任何天气条件下提供位置和时间信息，在地球上或附近的任何地方，只要有四颗或更多 GPS 卫星的视线无障碍。

**一个可能的解决方案：**如果您认为 GPS 受天气条件的影响，您可以考虑使用网络提供商来确保您的应用程序的*无缝*性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T10:36:14.707

我可以保证，GPS 信号不受多云天气的影响。GPS是防风雨的。GPS 信号必须从卫星通过电离层传输到接收器。在那条路上，天气部分（云所在的位置）是该路径尽头的一个非常小的带。
GPS受太阳影响更大。晚上信号稍微好一点，因为太阳会引起电磁干扰。

GPS信号的频率选择在水分子可以削弱信号的范围之外。

所以最后你的问题肯定不是由多云的天气引起的。唯一与天气有关的是树叶潮湿，这会削弱 GPS 信号。（一些接收器为此目的有一个福雷斯特模式）

# windows-phone-8 - 视窗电话 | 对话框窗口十字图标和硬件后退按钮

> ID：15334670
> 
> 赞同：0
> 
> 时间：2013-03-11T09:07:12.147
> 
> 标签：windows-phone-8

我正在开发一个 Windows Phone 应用程序。当点击屏幕上的图标时，我会显示一个弹出窗口。该弹出窗口在右上角有一个十字图标，以便用户可以点击十字图标并弹出窗口关闭？当用户按下硬件后退按钮时，Pop 也会关闭。我想问是否可以在弹出窗口上放置一个十字图标，因为有两种方法可以关闭同一个弹出窗口（从硬件后退按钮和十字图标）？？？？从Windows Phone认证认证的角度来看是否OK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:57:23.200

从认证的角度来看，只要后退按钮也一样，这不是问题。

请记住，许多用户使用 WP 已经有一段时间了，作为开发人员，您希望在支持原生机制的同时做所有您想做的事情。

# svn - 如何在svn中设置到期日期

> ID：15334671
> 
> 赞同：2
> 
> 时间：2013-03-11T09:07:20.827
> 
> 标签：svn, svnkit

嗨，我正在使用 SVNKit 进行文档管理。我想在用户锁定文档时设置到期日期。但是 SVNLock 类中没有 expireDate 的设置器属性。当用户锁定文档过期日期时，FSRepository.java 将其设置为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-05T18:46:20.223

根据[文档](http://svnkit.com/javadoc/org/tmatesoft/svn/core/SVNLock.html#SVNLock(java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.util.Date,%20java.util.Date))，您需要在构造函数中设置到期日期。该类的任何其他属性都没有设置器，这一切都是通过构造函数完成的。

# azure - Azure 云服务 - VIP 交换是否会导致调用 OnStop()？

> ID：15334674
> 
> 赞同：6
> 
> 时间：2013-03-11T09:07:26.843
> 
> 标签：azure, azure-worker-roles

我有一个带有 Web 和辅助角色的 Azure 云服务。当 Azure 云服务停止时，将调用 OnStop() 方法。

在 VIP 交换上，它是否在请求 VIP 交换后立即在传出服务部署上调用相同的 OnStop() 方法？ [http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx)

另外，VIP交换期间的事件顺序是什么？据推测，新部署的工作人员 OnStart() 方法在某个时间点运行，但这是在传出部署的 OnStop() 之前运行吗？我试图了解两个工作角色版本（传入和传出部署）是否将同时运行，或者工作角色服务是否会有短暂的差距。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T09:16:45.840

据我所知，当您执行 VIP 交换时，更改发生在路由器/防火墙级别，而不是在云服务级别。您的云服务会继续运行，并且不会触发 OnStop() 事件。如此处文档中所述：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh386336.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh386336.aspx)

> 当服务升级到生产环境时，分配给生产环境的 VIP 和 URL 将分配给当前处于暂存环境中的部署，从而将服务“升级”到生产环境。分配给登台环境的 VIP 和 URL 分配给生产环境中的部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:27:25.453

在“VIP 交换”期间不会触发任何事件。我们添加了对所有类型的事件和入口点的跟踪，而且从角色代码来看，在“VIP 交换”期间似乎什么也没发生。

交换期间您的服务不会中断。只有新的请求将开始进入新的部署。旧部署和新部署并行运行，直到您停止旧部署（现在暂存）。您的应用程序应该能够处理这种情况并且不会破坏任何东西。

# ios - 当我将 setContentSize 与自动布局一起使用时，UIScrollView 崩溃

> ID：15334675
> 
> 赞同：1
> 
> 时间：2013-03-11T09:07:35.910
> 
> 标签：ios, objective-c, uiview, uiscrollview, autolayout

我有一个要放入 UIScrollView 的自定义 UIView。我使用这段代码：

```
-(void)viewDidLayoutSubviews{
    myView = [[[NSBundle mainBundle]loadNibNamed:@"Case1" owner:self options:nil]objectAtIndex:0];
    [_scrollView setContentSize:CGSizeMake(myView.bounds.size.width , myView.bounds.size.height)];
    [_scrollView addSubview:myView];
} 
```

我有一个崩溃：

“由于未捕获的异常'NSInternalInconsistencyException'而终止应用程序，原因：'在将 -viewDidLayoutSubviews 发送到视图控制器后仍然需要自动布局。INFillingHelpViewController 的实现需要将 -layoutSubviews 发送到视图以调用自动布局。'”

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:21:01.087

为什么要这样做。试试这些代码行。如果您需要任何帮助，请询问。

```
UIView *view=[UIView alloc]initWithNibName:@"view" bundle:nil];
[_scrollView setContentSize:CGSizeMake(myView.frame.size.width , myView.frame.size.height)];
[_scrollView addSubview:view]; 
```

# tcp - Web 服务客户端遇到“java.net.SocketException：连接重置”

> ID：15334678
> 
> 赞同：1
> 
> 时间：2013-03-11T09:07:45.827
> 
> 标签：tcp, connection, reset

**问题**

我们在提供 HTTP Web 服务的 Weblogic 服务器 10.3.1 上部署了一个 java ee 应用程序。让我们称之为“服务器”。另一个 java 应用程序部署在另一台机器上的 tomcat 上，它将对服务器进行 Web 服务调用，我们称之为“客户端”。客户端和服务器应用程序都在使用 Axis。

客户端有可能会因异常而失败

```
"java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:168)", 
```

1 分钟后，服务器应用程序日志显示：

```
org.apache.axis.Message ERROR  - 
java.io.IOException: java.net.SocketException: Socket closed
     at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99). 
```

一天失败不超过5次。服务器上的总 Web 服务请求较少，例如数百。并且似乎在服务器长时间“休息”后往往会失败：每天早上的第一次调用可能会失败（我们晚上没有业务服务）。

**异常堆栈是：**

客户端：

```
Caused by: java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(SocketInputStream.java:168)
at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
at java.io.BufferedInputStream.read(BufferedInputStream.java:235)
at java.io.FilterInputStream.read(FilterInputStream.java:66)
at org.apache.xerces.impl.XMLEntityManager$RewindableInputStream.read(Unknown Source)
at org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
at org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(Unknown Source)
at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
at javax.xml.parsers.SAXParser.parse(SAXParser.java:375)
at org.apache.axis.encoding.DeserializationContext.parse(DeserializationContext.java:227)
at org.apache.axis.SOAPPart.getAsSOAPEnvelope(SOAPPart.java:696)
... 12 more 
```

服务器端：

```
2013-03-06 08:37:29,491 org.apache.axis.Message ERROR  - java.io.IOException:
java.net.SocketException: Socket closed
    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:99)
    at java.net.SocketOutputStream.write(SocketOutputStream.java:137)
    at weblogic.servlet.internal.ChunkOutput.writeChunkNoTransfer(ChunkOutput.java:530)
    at weblogic.servlet.internal.ChunkOutput.writeChunks(ChunkOutput.java:487)
    at weblogic.servlet.internal.ChunkOutput.flush(ChunkOutput.java:382)
    at weblogic.servlet.internal.CharsetChunkOutput.flush(CharsetChunkOutput.java:315)
    at weblogic.servlet.internal.ChunkOutput$2.checkForFlush(ChunkOutput.java:580)
    at weblogic.servlet.internal.CharsetChunkOutput.write(CharsetChunkOutput.java:222)
    at weblogic.servlet.internal.ChunkOutputWrapper.write(ChunkOutputWrapper.java:146)
    at weblogic.servlet.internal.ServletOutputStreamImpl.write(ServletOutputStreamImpl.java:138)
    at org.apache.axis.utils.ByteArray.writeTo(ByteArray.java:375)
    at org.apache.axis.SOAPPart.writeTo(SOAPPart.java:265)
    at org.apache.axis.Message.writeTo(Message.java:539)
    at org.apache.axis.transport.http.AxisServlet.sendResponse(AxisServlet.java:902)
    at org.apache.axis.transport.http.AxisServlet.doPost(AxisServlet.java:777)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
    at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:821)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:292)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:27)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:57)
    at org.springframework.security.util.FilterChainProxy.doFilter(FilterChainProxy.java:170)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:168)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:57)
    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:112)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:57)
    at com.ulic.ucia.framework.util.AppFilter.doFilter(AppFilter.java:48)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:57)
    at com.ebao.pub.framework.AppFilter.doFilter(AppFilter.java:101)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:57)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3588)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2200)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2106)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1428)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

当客户端出现故障时，我们检查应用日志和数据库，发现业务事务总是成功的。Weblogic 服务器以某种方式无法写入 HTTP 响应。Weblogic 服务器日志文件说：

BEA 101366 服务器无法在配置的超时值期间发送 HTTP 消息。套接字已关闭。

**排序日志和一些分析**

两台服务器都有ntp服务。我按时间对服务器日志和客户端日志进行了简化和排序，以获得更清晰的视图，

```
2013-03-06 08:36:18,755  Web Service Client      began it's work
2013-03-06 08:36:18,758  Web Service Client  make http calls and wait for response
2013-03-06 08:36:19,039  APP on WLS         received request
2013-03-06 08:36:24,553  APP on WLS         app log says transaction finished with a success.
2013-03-06 08:36:24,575  Web Service Client received java.net.SocketException: Connection reset” 
2013-03-06 08:37:29,491  APP on WLS      org.apache.axis.Message ERROR  - java.io.IOException:java.net.SocketException: Socket closed 
```

最值得注意的是，当服务器应用程序刚刚完成继续时，客户端在等待 6 秒后收到了连接重置。所以我认为它必须与服务器有关。当 weblogic 由于某种原因试图发送 http 响应时，服务器机器发送了一个“TCP RST”，但那是什么原因呢？据我所知，有两种情况（可能更多）“RST”将在 Java 应用程序中发送。Java 线程在没有关闭套接字的情况下结束，另一方面，tcp 堆栈将向套接字发送一个 'RST' 以指示错误 Tcp 堆栈在 'linger' 时间后未能发送所有数据。

现在我的大脑已经卡住了，不知道下一步该怎么做。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-13T10:19:46.630

尝试将 HTTP 连接的轴 2 CHUNKED 属性设置为 false。某些 Web 服务器无法处理没有内容长度标头的 HTTP，并且客户端因 Socket 异常而失败。

```
serviceProxy = new FunctionsServiceStub( ... );
Options options = serviceProxy._getServiceClient().getOptions();
options.setProperty( org.apache.axis2.transport.http.HTTPConstants.CHUNKED, Boolean.FALSE ); 
```

# arrays - bash + awk：循环返回大小为 1 的 4 个元素的数组？

> ID：15334683
> 
> 赞同：1
> 
> 时间：2013-03-11T09:07:54.547
> 
> 标签：arrays, bash, loops, awk

我有以下脚本，它使用 awk 将字段与用户输入匹配

```
NB=$#
FILE=myfile

#GET INPUT
if [ $NB -eq 1 ]
then
    A=`awk -F "\t" -v town="$1" 'tolower($3) ~ tolower(town) {print NR}' $FILE`
fi 
```

如果我打印输出，它会显示：

```
7188 24369 77205 101441 
```

这是我所期望的。然后，如果我执行以下操作：

```
IFS=' '
array=($A)
echo ${#array[@]} 
```

我实际上得到的长度为 1（？）。此外，如果我尝试：

```
for x in $array
do
    echo $x
done 
```

它实际上打印出来：

```
7188
24369
77205
101441 
```

`for...in`我怎样才能让它返回 4 的长度。如果只有 1 个元素，我不明白它是如何工作的？

编辑 ：

`$A | od -c`在我创建数组之前的回声是：

```
0000000   7   1   8   8       2   4   3   6   9       7   7   2   0   5
0000020       1   0   1   4   4   1  \n
0000030 
```

`$A | od -c`创建数组后的回显是：

```
0000000   7   1   8   8  \n   2   4   3   6   9  \n   7   7   2   0   5
0000020  \n   1   0   1   4   4   1  \n
0000030 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:15:36.923

这是因为从 awk 返回的输出是换行符 ( `\n`) 分隔的，而不是空格分隔的。因此，如果您有这样的 IFS：

```
IFS=$'\n' # newline between quotes 
```

`array length = 4`然后它会像您期望的那样回声。

# windows-8 - 所选项目上的 Windows 8 应用栏（如启动屏幕）

> ID：15334685
> 
> 赞同：0
> 
> 时间：2013-03-11T09:07:56.657
> 
> 标签：windows-8, microsoft-metro, appbar

我想在我的应用程序中实现的与 Windows 在其启动屏幕上所做的相同。当您选择一个项目时，打开应用栏并显示更多项目。当您在未选择任何内容时仅打开 te appbar 时，请不要显示这些项目。

到目前为止一切都很好，它就像我想要的那样工作。但是有一些问题我无法解决。当您在启动屏幕上选择一个项目时，右键单击屏幕上的任何位置都无法关闭应用栏。您必须取消选择该项目。

我只是不知道如何禁用右键单击以关闭应用程序栏。因为那时我处于有一个选定项目但没有应用栏的状态。我不想要那个...

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:12:07.293

有一个属性叫[IsSticky](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.appbar.issticky.aspx)

这可以用来阻止你的 appbar 崩溃。

您拥有的另一个选择是挂钩[Closed](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.appbar.closed.aspx)事件并强制它重新打开。

根据您提供的屏幕，即 Metro UI :) 我会说创建一个仅托管其他磁贴的页面。我在我的一个应用程序中做了类似的事情，看看 [http://apps.microsoft.com/windows/en-gb/app/cineworld/7adfde16-33c3-4b51-b758-00366325288d](http://apps.microsoft.com/windows/en-gb/app/cineworld/7adfde16-33c3-4b51-b758-00366325288d)

看看[Coding4Fun](http://coding4fun.codeplex.com/)或[Callisto](https://github.com/timheuer/Callisto)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T12:04:46.937

设置 AppBar 属性**IsSticky="true"**并在您的 GridView/ListView 上处理事件**RightTapped**，并在事件处理程序中设置**e.Handled = true;**
这将阻止右键单击/滑动路由事件到达页面，并且不会关闭 AppBar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-15T21:47:01.553

您可以覆盖`hide()`appbar 的功能并将其替换为以下内容：

```
appBar.hide = function () {
        /// <signature helpKeyword="WinJS.UI.AppBar.hide">
        /// <summary locid="WinJS.UI.AppBar.hide">
        /// Hides the AppBar, if visible, regardless of other state
        /// </summary>
        /// </signature>
        // Just wrap the private one
        var listView = document.getElementById("yourListView").winControl;
        var count = listView.selection.count();

        if(count <1)
            this._hide();
} 
```

这不是一个很好的解决方法，但它就像一个魅力:)

# php - PHP If 条件与今天日期范围前一周

> ID：15334688
> 
> 赞同：-2
> 
> 时间：2013-03-11T09:08:07.670
> 
> 标签：php

所以基本上，我想弄清楚如何在 PHP 中获取今天的日期。基本上我可以使用什么功能来获得它。

我尝试了以下方法：`strtotime('now')`但这给了我一个`1362992653`我无法真正使用的数字。

我正在尝试以以下格式获取今天的日期，`20130311`以便年/月/日这样我可以从中减去 7。所以我的 if 语句看起来像这样

```
$todaydate = some function;
$mydate = 20130311 <-- will be in this format;
$oneweekprior = $todaydate - 7;

if ($mydate > $oneweekprior && $mydate < $todaysdate) { 

    then do my stuff; 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:13:15.543

```
$todayEpoch = strtotime(date('Y-m-d'));
$mydate = strtotime('20130311');

$oneweekprior = $todayEpoch - 7*24*60*60;

if ($mydate > $oneweekprior && $mydate < $todaysdate) { 

    then do my stuff; 

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T09:17:06.210

你得到的那个数字就是所谓的 unix 时间戳——自 01.01.1970 以来的秒数，主要是你应该用它来做你想做的事情：

```
$todaydate = time(); // same as strtotime('now'), but without overhead of parsing 'now'
$mydate = strtotime('20130311'); // turn your date into timestamp
$oneweekprior = $todaydate - 7*24*60*60; // today - one week in seconds
// or
//$oneweekprior = strtotime('-7 days');

if ($mydate > $oneweekprior && $mydate < $todaysdate) {
    // do something
} 
```

将时间戳转回人类可读的形式使用`strftime`或`date`功能：

```
echo strftime('%Y%m%d', $todaydate); 
```

请阅读PHP 中日期函数的[文档](http://www.php.net/manual/en/ref.datetime.php)

* * *

像您想要的那样比较日期的想法非常糟糕，让我们假设今天是`20130301`并且要检查的日期是`20130228`- 使用您的解决方案它将是：

```
$mydate = 20130228;
$today = 20130301;
$weekago = $today - 7;

// $mydate should pass this test, but it won't because $weekago is equal 20130294 !!
if ($mydate > $weekago && $mydate < $today) {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:20:23.927

**试试这个：**

```
 $now = time();

    $one_week_ago  = $now - ( 60 * 60 * 24 * 7 );
    $date_today    = date( 'Ymd', $now );
    $date_week_ago = date( 'Ymd', $one_week_ago );

    echo 'today: '    . $date_today    . '<br /><br />';
    echo 'week-ago: ' . $date_week_ago . '<br /><br />'; 
```

您从 strtotime('now') 获得的时间称为**[纪元时间](http://en.wikipedia.org/wiki/Unix_time)**（*或 Unix 时间 \POSIX 时间*），它是自 1970 年 1 月 1 日以来的秒数。因此， time() 也为您提供了这个数字，然后，您可以从中减去 1 周的秒数，以获得一周前的纪元时间。

→ 有关**date()**的更多信息，包括日期格式的不同字符串，如“Ymd”，请访问： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

# sql - In 子句与 OR 子句的性能明智

> ID：15334695
> 
> 赞同：0
> 
> 时间：2013-03-11T09:08:28.377
> 
> 标签：sql, performance, oracle, database-performance, query-performance

我有一个查询如下：

```
select * 
from table_1 
where column_name in ('value1','value2','value3'); 
```

考虑到这样一个表中的数据可能以百万计，下面的重组会更好吗？

```
select * 
from table_1 where 
column_name = 'value1' 
or column_name = 'value2' 
or column_name ='value3'; 
```

或者

```
select * 
from table_1 
where column_name = any ('value1','value2','value3'); 
```

如果可能的话，我还需要了解性能优势。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:41:49.120

仅在 3 值检查的情况下，查询并不重要。

无论如何，Oracle 都会重新编写查询以匹配可用的最佳选项。

如果有更多的值并且过于动态，那么 in 子句或内部连接可能会更好。

最好将查询保留为当前状态

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:27:43.350

第三种方式比“IN”或多个“WHERE”条件更快：

```
select *
from table_1 as tb1
inner join table_2 as tb2
where tb1.column_name = tb2.column_name 
```

此处 table_2 （或查询）将具有示例中“IN”和“WHERE”条件中列出的必需值。

# r - all.equal() 的容差参数是如何工作的？

> ID：15334701
> 
> 赞同：15
> 
> 时间：2013-03-11T09:08:41.897
> 
> 标签：r

有人可以向我解释一下公差参数`all.equal`吗？

**手册说**( `?all.equal`) **：**

> `tolerance`：数值≥0。不考虑小于容差的差异。
> 
> scale = NULL（默认值）的数值比较是通过首先计算两个数值向量的平均绝对差来完成的。如果这小于公差或不是有限的，则使用绝对差，否则使用平均绝对差缩放相对差。

**例子：**

```
all.equal(0.3, 0.26, tolerance=0.1) 
```

返回`Mean relative difference: 0.1333333`

为什么这里返回平均相对差异？两个数值向量的平均绝对差不是小于容差吗？

```
0.3 - 0.26 = 0.04 < 0.1 
```

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-11T09:11:10.083

如果`target`大于`tolerance`，则似乎要检查`relative error <= tolerance`。也就是说，`abs(current-target)/target <= tolerance`在：

```
all.equal(target, current, tolerance) 
```

例如：

```
all.equal(3, 6, tolerance = 1)
# TRUE --> abs(6-3)/3 <= 1 
```

相反，如果`target`小于`tolerance`，则`all.equal`使用`mean absolute difference`。

```
all.equal(0.01, 4, tolerance = 0.01)
# [1] "Mean absolute difference: 3.99"

all.equal(0.01, 4, tolerance = 0.00999)
# [1] "Mean relative difference: 399"

all.equal(4, 0.01, tolerance = 0.01)
# [1] "Mean relative difference: 0.9975" 
```

但是，这*不是*文档所述。为了进一步了解为什么会发生这种情况，让我们看一下相关的片段`all.equal.numeric`：

```
# take the example: all.equal(target=0.01, current=4, tolerance=0.01)
cplx <- is.complex(target) # FALSE
out <- is.na(target) # FALSE
out <- out | target == current # FALSE

target <- target[!out] # = target (0.01)
current <- current[!out] # = current (4)

xy <- mean((if(cplx) Mod else abs)(target - current)) # else part is run = 3.99

# scale is by default NULL
what <- if (is.null(scale)) {
    xn <- mean(abs(target)) # 0.01
    if (is.finite(xn) && xn > tolerance) { # No, xn = tolerance
        xy <- xy/xn
        "relative"
    }
    else "absolute" # this is computed for this example
}
else {
    xy <- xy/scale
    "scaled"
} 
```

在上面的代码中检查的所有内容（仅显示来自 OP 的示例的必要部分）是：从 and 中删除*任何 NA 和相等的值*（of`target`和`current`）。然后计算为和的平均绝对差。但决定它是否会成为或取决于部分。这里不检查任何条件。这*仅*取决于哪个是。`target``current``xy``target``current``relative``absolute``what``xy`*`xn``mean(abs(target))`*

 *因此，总而言之，OP粘贴的部分（为方便起见粘贴在这里）：

> 如果*这个*（意思是，**平均绝对差**）小于公差或不是有限的，则使用绝对差，否则使用平均绝对差缩放相对差。

似乎错误/误导。*

# android - 将 json 数组中的动态内容列出到 listview

> ID：15334702
> 
> 赞同：0
> 
> 时间：2013-03-11T09:08:43.737
> 
> 标签：android, json, listview

我的情况如下：在向服务器发送哈希后，我从服务器上的 php 脚本中得到一个 JSON 数组作为响应。JSON-Array 有两种可能的形式。如果哈希无效，第一个就像`{"status":0}`. 第二种形式，当哈希有效时，其中会有约会 -> 就像`{"appointmentName":"Meeting","date":"2013-03-15","startTime":"10:00:00","endTime":"12:10:00","status":2}`.

JSON-Array 可以填充不止一个约会。见下文：

```
{
    "appointmentName": "Proposal",
    "date": "2013-11-11",
    "startTime": "09:00:00",
    "endTime": "13:00:00",
    "status": 2
}
{
    "appointmentName": "Meeting",
    "date": "2013-03-15",
    "startTime": "10:00:00",
    "endTime": "12:10:00",
    "status": 2
} 
```

我想在 android-app 的 ListView 中列出这些约会。

我处理 JSON 数组的方法：

```
public void handleActivationResult(String result) {     
    try {           
            JSONObject jsonObject = new JSONObject(new String(result));         
            String statusCode = jsonObject.getString("status");

            TextView mainView = (TextView) findViewById(R.id.textView1);

            if (statusCode.equals("2")) {
                    //fill listview with appointments
            } else if (statusCode.equals(0)) {
                //empty string sent to server
            } else if (statusCode.equals(5)) {
                //hash doesnt match
            } else if (statusCode.equals(6)) {
                //correct hash, but no upcoming appointments
            } else {
                //unknown error
            }
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

我的 ListView 还没有什么特别之处：

```
<ListView
    android:id="@+id/appointmentsList"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >
</ListView> 
```

应该怎么做，handleActivationResult() 方法将用约会填充列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:47:26.190

检查 json 字符串是否包含`"status":0`，如果没有将数据设置到适配器。

当您从服务器获得响应时，在创建 json 对象之前检查它包含的字符串`"status" 0"`是否包含显示错误字符串。因为您没有在 json 中提及成功响应的状态。

如果您在解析实际数据之前得到`"success":2`then ，请解析状态并采取相应措施。

# qt - 如何在 QML 文件中找到语法错 误？

> ID：15334714
> 
> 赞同：7
> 
> 时间：2013-03-11T09:09:37.497
> 
> 标签：qt, qml, blackberry-10, blackberry-cascades

我正在使用 Cascades 为 Blackberry 10 进行开发，其中包括 QT 和 QML。我发现我有时会在我的 QML 文件中出错，但在编译时并没有发现它们。如何检查我是否犯了语法错误、函数调用的名称错误或其他典型错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T15:30:39.223

QML 是一种在运行时评估的动态语言。没有编译步骤，并且由于 javascript 的性质和全局上下文的动态性质，在评估之前无法判断您正在编写的内容是否正确/不正确。QtCreator 可以帮助您解决您会发现的一些 QML 错误，但不幸的是，在评估并爆炸之前，没有好的方法可以获取有关您的 javascript 的语法错误。

就个人而言，我发现调试器的良好使用是使这些修复变得容易的关键。

tldr; 保持你的 javascript 干净，并且至少没有编译时间检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:09:34.733

在 IDE 中打开终端 连接后使用 blackberry-SSH 连接您的设备或模拟器 输入`slog2info`它显示语法和所有典型错误 JavaScript 以及描述和行号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T11:23:50.283

如果有任何错误，它将以红色标记显示这些行。它是动态检查，无需担心编译。如果您做错了，您将无法正确看到 DESIGN CONSOLE。

# cocos2d-iphone - CCNode 标记 - 显示所有标记都相同

> ID：15334721
> 
> 赞同：0
> 
> 时间：2013-03-11T09:10:08.213
> 
> 标签：cocos2d-iphone

我是 cocos2d 游戏开发的新手。我已经对 CCNode 进行了子类化，并且我正在循环将此子类添加到游戏层设置此节点的标签。在此子类的 m 文件中，我使用 touches 委托来检测元素.但是控制台显示，对于这个节点的任何对象，创建的标签都是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:39:42.617

您必须为每个节点初始化标签。使用 uniq 整数作为标记。更好地使用枚举。

```
typedef enum
{
    kEnemy_Dog = 1000,
    kEnemy_Cat,
    kEnemy_Rat,
    kEnemy_Bat
}EnemyType;

typedef enum
{
    kHeroType_Lion = 2000,
    kHeroType_Tiger,
    kHeroType_Dino,
    kEnemy_Eagle
}HeroType;

CCSprite *dog = [CCSprite spriteWithFile:TEX_DOG];
dog.tag = kEnemy_Dog;
[self addChild:dog z:2 tag: kEnemy_Dog];

CCSprite *lion = [CCSprite spriteWithFile:TEX_DOG];
lion.tag = kHeroType_Lion;
[self addChild:dog z:2 tag: kHeroType_Lion];

//to check
if(inSprite.tag == kHeroType_Lion) 
```

# jquery - Wordpress JQuery Ajax 请求 readyState 总是 0

> ID：15334724
> 
> 赞同：1
> 
> 时间：2013-03-11T09:10:23.170
> 
> 标签：jquery, ajax, wordpress, youtube-api, youtube-javascript-api

我找不到这个问题的答案。

我正在尝试获取 youtube 视频标题（当然是 Wordpress，但我想从 javascript 中获取）。好吧，我的代码如下所示：

```
$.ajax({
    url: "http://youtube.com/get_video_info",
    data: {video_id : v_arr[i]},
    type: 'GET',
    complete: function(jqXHR, res){
        if(jqXHR.readyState === 4) {
            alert(res);
        }
        alert(jqXHR.statusText);
    }
}); 
```

问题：在“完成”时，我总是得到 readyState 0，除了 statusText 中的“错误”，我没有收到任何有用的错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:24:39.407

我尝试运行您提供的 ajax，并收到 301 重定向响应。

查看 youtube api，我看到`https://gdata.youtube.com/feeds/api/videos/`返回成功的 url

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:53:55.460

我将网址更改为 Circadian 提供的网址。问题也与 i 变量有关。如您所见，这一切都发生在一个循环中。所以当完整的回调发生时，'i' 已经有来自循环的最后一个值......所以当我访问 v_arr[i] 时，出现了'未定义的索引'问题。

解决方案是“temp i”：

```
for(var i=0; i<v_arr.length; i++) {
    var temp_i = i;
    $.ajax({
        url: "https://gdata.youtube.com/feeds/api/videos/"+v_arr[temp_i],
        //data: {video_id : v_arr[temp_i]},
        type: 'GET',
        complete: function(jqXHR, res){
            if(jqXHR.readyState === 4) {
                alert(res);
            }
            alert(jqXHR.statusText);
        }
    });
} 
```

# php - 使用 AJAX .on(click) 方法提交多个 HTML 表单 + 其他可变数据

> ID：15334726
> 
> 赞同：0
> 
> 时间：2013-03-11T09:10:26.543
> 
> 标签：php, javascript, ajax, forms, submit

我想这真的是我最后一个题为“[通过 AJAX 使用单个提交按钮提交多个 HTML 表单](https://stackoverflow.com/questions/15179719/submit-multiple-html-forms-with-a-single-submit-button-via-ajax)”的问题的延续，它让我开始使用一些非常基本的 AJAX。你真的必须阅读这个问题才能彻底理解这个问题。现在这个问题的关键是**其他可变数据**......

因此，我有一个使用 jQuery 运行的基本 AJAX 提交脚本，它与我上一个问题的答案重复（减去从“按钮”到“输入#publishimages”的更改），它在迭代多个表单和提交时效果很好商场：

```
function post_form_data(data) {
    $.ajax({
        type: 'POST',
        url: 'verify.php',
        data: data,
        success: function () {},
        error: function () {}
    });
}

$('input#publishimages').on('click', function () {
    $('form').each(function () {
        post_form_data($(this).serialize());
    });
}); 
```

正在提交的表单（每个表单等于一个图像，因此根据需要迭代多次以提交每个图像 - 查看更多是我的上一个问题）也在上一个问题中，看起来*类似于*：

```
<form id="image<?php echo $i; ?>">
   <label>Name</label>
   <input name="image[<?php echo $i; ?>][Name]" />

   <label>Location</label>
   <input name="image[<?php echo $i; ?>][Location]" />

   <!-- etc, etc, for description, coordinates, camera etc -->

</form> 
```

回想起来，遗憾的是，这有点太淡化了。这就是**另一个可变数据**位发挥作用的地方。我现在正在检查每个图像的 EXIF 数据以获取更多信息，**如果**我发现必须由用户在表单上填写的数据，则从表单中删除输入，**如果没有**，则显示输入以便用户填写自己出去。所以带有表单的 PHP 脚本看起来更像这样（伪代码）：

```
<form id="image<?php echo $i; ?>">
   <label>Name</label>
   <input name="image[<?php echo $i; ?>][Name]" />

   // Examine EXIF Data

   if (I find EXIF Location Data) {

       $_POST['image'][$i]['location'] = $location;

   } else {

       <label>Location</label>
       <input name="image[<?php echo $i; ?>][Location]" />

   }

  // etc, etc, similar situation occurs with camera make + model, date taken etc.

</form> 
```

所以你可以看到我正在做的是在我找到/没有找到信息时有选择地动态删除和添加输入到表单中。如果我找到它，请将信息提交给`$_POST`超全局，否则只需在表单中回显一个输入供用户填写。有什么问题？Javascript。

## 这是一个问题，因为...

现在，当我引用`$(this)`（当然是`$('form')`指t 存在 - 相反，我已将它们分配给`$_POST`超全局，并且我的 jquery 脚本无法访问它们。

## 所以...

我需要一种能够通过 AJAX 将与图像有关的所有内容提交到我的目的地的方法，无论它是作为表单的一部分发布还是提交。我完全不知道如何实现这一目标......有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:20:58.367

您可以保留所有内容的输入。对于那些在 EXIF 中有现有数据的人，只需将其填写并使用 CSS 隐藏用户的输入。这样，您可以以更通用的方式处理表单，您的问题就消失了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:00:37.120

你是“双重提交”。在您的 AJAX 函数内拦截单击并阻止默认值：

```
$('input#publishimages').on('click', function (e) {
    e.preventDefault();
    $('form').each(function () {
        post_form_data($(this).serialize());
    });
}); 
```

这将阻止表单提交。无论如何，提交的表单只不过是一个 POST 或 GET 请求。

除此之外，我对您要完成的工作感到困惑。由于验证步骤，听起来数据不完整？用户提交表单，一些 EXIF 数据被抓取，新的输入与丢失的数据一起返回，但是 EXIF 数据已经溶解在一堆零和一中，对吧？如果是这种情况，您可以使用隐藏的表单字段：

```
if (I find EXIF Location Data) {

    $_POST['image'][$i]['location'] = $location;
    echo '<input type="hidden" value="$foo" name="$bar" />;

} else {

    <label>Location</label>
    <input name="image[<?php echo $i; ?>][Location]" />

} 
```

# android - 即使使用了同步关键字也有 ConcurrentModificationException

> ID：15334730
> 
> 赞同：1
> 
> 时间：2013-03-11T09:10:48.137
> 
> 标签：android, list, exception, object, concurrency

我有一个从网络服务返回的我定义的对象列表（network svc 将更新此列表）。在某个时间点，我想在我的列表视图中呈现我已经拥有的内容。我有以下代码：

```
List<MyObject> myObjects = MyService.getInstance().getListOfMyObject() 
```

而且因为我有另一个线程会更新 myObjects 列表，所以我想避免并发修改异常。我有：

```
 List<MyObject> clonedList = null;
 synchronized(myObjects){
         clonedList = MyListUtils.cloneList(myObjects)
 } 
```

MyListUtils 中的 cloneList() 函数以简单的方式实现：

```
public static <T extends ICloneable<T>> List<T> cloneList(final List<T> source){
    List<T> result  = new ArrayList<T>();
    for(T t : source){
       T newObject = t.clone();
       result.add(newObject);
    }
    return result;
} 
```

- 不要关心 ICloneable 接口，我用这个 ICloneable 来标记东西。

我得到了这个例外

```
03-11 16:07:11.370: E/AndroidRuntime(8076): FATAL EXCEPTION: main
03-11 16:07:11.370: E/AndroidRuntime(8076): java.util.ConcurrentModificationException
03-11 16:07:11.370: E/AndroidRuntime(8076):  at java.util.ArrayList$ArrayListIterator.next(ArrayList.java:569)
03-11 16:07:11.370: E/AndroidRuntime(8076):  at xxx.utilities.MyListUtils.cloneList(CollectionUtils.java:120) 
```

我不知道它有什么问题？我没有调用任何函数来修改对象，我只是“克隆”它，据我所知，这不会改变我对象中的任何一个位。任何想法表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:18:59.293

根据某些线程，我能够[在 Android 动画中找到类似 java.util.ConcurrentModificationException](https://stackoverflow.com/questions/5151956/problem-with-java-util-concurrentmodificationexception-in-android-animation)以及[如何在 Android 中处理 ConcurrentModificationException](https://stackoverflow.com/questions/6621991/how-to-handle-concurrentmodificationexception-in-android)

如果您正在迭代列表并且同时其他一些线程也在修改它..这也会导致`ConcurrentModificationException`..所以您可以尝试使用列表的传递对象上的方法`sychronizing`..`cloneList`

```
synchronized(source)
{
    // make a copy
} 
```

我希望您已经在修改数据的线程中执行此操作...

# c++ - 使用 arm-musl 进行交叉编译，ERROR> proc_open: hidden symbol `__init_array_end' in proc_open is referenced > by DSO

> ID：15334731
> 
> 赞同：0
> 
> 时间：2013-03-11T09:10:50.623
> 
> 标签：c++, c, cross-compiling

我正在尝试将 lighttpd 编译为静态处理器臂，以便可以在 android 设备上运行。我正在用交叉编译器**arm-musl-linuxeabi编译 lighttpd，我在**[https://bitbucket.org/GregorR/musl-cross/downloads](https://bitbucket.org/GregorR/musl-cross/downloads)下载它，当我运行 make 时，我得到如下错误：

> /home/ramly/working/arm-linux-musleabi/bin/../lib/gcc/arm-linux-musleabi/4.7.2/../../../../arm-linux-musleabi/ bin/ld: proc_open: proc_open 中的隐藏符号 `__init_array_end' 被 DSO /home/ramly/working/arm-linux-musleabi/bin/../lib/gcc/arm-linux-musleabi/4.7.2/ 引用。 ./../../../arm-linux-musleabi/bin/ld：最终链接失败：错误值

我的配置：

> $ CFLAGS='-static' CC=arm-musl-linuxeabi-gcc AR=arm-musl-linuxeabi-ar RANLIB=arm-musl-linuxeabi-ranlib STRIP=arm-musl-linuxeabi-strip CXX=arm-musl-linuxeabi -g++ ./configure --host=arm-musl-linuxeabi --target=arm-musl-linuxeabi --prefix=/home/ramly/binary/lighttpd --with-sysroot=/home/ramly/working/arm- linux-musleabi/arm-linux-musleabi --without-mysql --without-pcre --without-zlib --without-bzip2 --without-openssl --disable-ipv6 --enable-static --disable-shared

如果我运行配置我成功没有问题，没有得到错误，但配置后我运行 make。

如何解决？我的机器是 Ubuntu 12.04 桌面版。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T18:51:27.440

这是您使用的 musl 版本中的一个错误。它由[提交 d432b2c057fc64256645422382c2f7e32c45b3cc 修复](http://git.musl-libc.org/cgit/musl/commit/?id=d432b2c057fc64256645422382c2f7e32c45b3cc)；随后的 0.9.10 版本和更新版本已修复该错误。

# jquery - struts2-jquery 自动完成不接受不属于其列表的字符串

> ID：15334733
> 
> 赞同：1
> 
> 时间：2013-03-11T09:10:57.167
> 
> 标签：jquery, struts2, struts2-jquery

```
<s:form action="EmpAction">
<sj:autocompleter label="User Name (or) Login Name" name="loginName" autoComplete="true" list="userNameList"  />
<s:submit />
</s:form> 
```

在此，当我输入来自列表的用户名`userNameList`，然后点击提交。我得到了 Struts2 Action 类中的值。但是当我输入一个不在其中的用户名`userNameList`并点击提交时，我只得到空字符串。何时将此字符串放入我的 Action 类中需要做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:23:36.973

默认情况下，来自 struts2-jquery 插件的自动完成器强制选择成为选项之一。要更改此设置，您需要将`forceValidOption`属性设置为`false`in`<sj:autocompleter>`标签。

# c - 从 char * 复制到 char 数组

> ID：15334736
> 
> 赞同：-3
> 
> 时间：2013-03-11T09:11:07.150
> 
> 标签：c, visual-c++

我的字符指针指向一些内存说“Hello world”，我想将它与其他指针进行比较，然后想做 strcpy。我坐在可能与 char *

```
char *A ="hello"
char *B ="";

strcmp(A,B); // this compares correctly because B points to diff string
strcpy(B,A); // will this statment copies the string alone or both will point to same memory 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T09:26:37.530

```
char *B =""; 
```

这意味着 that`B`是一个指针，并且您已指向常量 string `""`。

将`A`字符串复制到`B`with`strcpy(B,A);`

这意味着您正在将字符串复制到指向`A`的内存`B`（并且`B`指向常量字符串），因此这将导致**未定义的行为**

为避免此类问题，B 指针应指向内存空间，例如，您可以将 B 指向使用 malloc 分配的动态内存空间：

```
char *B = malloc(10*sizeof(char)); 
```

并且您可以使内存大小与 A 字符串大小完全相同：

```
char *B = malloc((strlen(A)+1)*sizeof(char)); 
```

+1 用于字符串的空终止符

避免该问题的另一种解决方案：将 B 定义为字符数组而不是指针：

```
char B[10]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:27:33.790

您的代码将成功编译，因为 strcpy 需要目标和源 char * 作为参数。

char * strcpy ( char * 目标, const char * 源);

但是当你执行它时你会遇到分段错误...bcoz B 指向 no 首先你必须在 B 指向的地方分配内存块，通过 B=malloc(6);

```
char *A ="hello";
char *B;

B = malloc(6);

strcmp(A,B);
strcpy(B,A); 
```

一旦你这样做，是的 strcpy 将复制一个全新的字符串。A 和 B 都将指向两个不同的位置。

# mongodb - 更新数组中的记录

> ID：15334740
> 
> 赞同：2
> 
> 时间：2013-03-11T09:11:34.270
> 
> 标签：mongodb, meteor

我刚刚开始研究流星，但我一直在尝试更新记录中的数组中的记录。假设我有一个看起来像这样的文档：

```
Users:
{ 
  _id: "somerandom",
  name: "name1",
  items, [
    {
      name: "item1",
      data: "somedata",
      ...
    },
    {
      name: "item2",
      data: "somedata",
      ...
    }
  ],
  ...
},
... 
```

我想更新项目“item1”的数据。我在流星中找不到任何关于如何做到这一点的信息，但从我读过的关于 MongoDB 的内容来看，我认为正确的方法是

```
Users.update({_id: userId, "items.name": 'item1}, {$set: {"items.$.data": newData}}); 
```

但由于 Meteor 中使用的 MongoDB 不支持 $ 它不会工作，另一方面我可能是如何做到这一点的方式。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:02:13.503

在服务器端使用`Meteor.methods()`和实现您的数据库操作，并`Meteor.call()`从客户端调用它。Meteor 中尚未实现此功能，[此处](https://github.com/meteor/meteor/blob/master/packages/minimongo/NOTES)记录了它。

[您可以在此处](https://github.com/meteor/meteor/issues/153)阅读有关 Github 上提出的此问题的讨论的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T07:41:44.790

我在流星的 github [https://github.com/meteor/meteor/blob/master/examples/parties/model.js找到了一种解决方法](https://github.com/meteor/meteor/blob/master/examples/parties/model.js)

这个想法是首先获取要更改的数组项的索引，然后使用该索引而不是 $。所以在这种情况下，它会像

```
user = Users.findOne(userId);
index = _.indexOf(_.pluck(user.items, 'name'), 'item1');

modifier = {$set: {}};
modifier.$set["items." + index + ".data"] = newData;
Users.update(userId, modifier); 
```

# radius - Coovachilli 无法读取 RADIUS 表上的加密密码

> ID：15334743
> 
> 赞同：0
> 
> 时间：2013-03-11T09:11:46.107
> 
> 标签：radius

我已经使用 FreeRADIUS 安装并配置了 Coovachili。一切运行良好，用户可以在浏览互联网之前获得强制门户。

但是我有一个问题：在 RADIUS 表中，密码字段是未加密的。当我尝试使用 md5 或 sha1 加密密码字段时，Coovachili 无法读取它。

我希望对半径密码进行加密，并希望 Coovachili 从中读取身份验证。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:33:50.983

取决于您在 RADIUS 中使用的身份验证模块

# autofac - 在 autofac 中注册组件

> ID：15334744
> 
> 赞同：3
> 
> 时间：2013-03-11T09:11:50.443
> 
> 标签：autofac

我是 autofac 的新手（使用 2.1.14.854），我仍在努力尝试理解

我有一个接口，并且该接口有一个或多个实现，并且应按特定顺序触发实现。

例如：

```
public IPipeline
{ 
void execute(); 
}

public MyPipeLine_1:IPipeline
{
public void execute(){}
}

public MyPipeLine_2:IPipeline
{
public void execute(){}
}

foreach(IPipeline pipeline in pipelines)
          pipeline.execute(); 
```

IPipeline的订单执行应该是MyPipleLine_2、MyPipleLine_1等

我有两个问题 1）如何注册所有组件，在程序集中实现 IPipeLine 接口并将它们放在列表中 2）我可以在注册时定义这些组件的执行顺序吗

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:11:27.103

[快速说明：您使用的是非常旧的 Autofac 版本。您可能需要更新以获得我正在谈论的功能。]

第一部分很简单[**——Autofac 隐式支持`IEnumerable<T>`**](https://code.google.com/p/autofac/wiki/RelationshipTypes). 只需注册所有类型并解析：

```
var builder = new ContainerBuilder();
builder.RegisterType<MyPipeLine_1>().As<IPipeline>();
builder.RegisterType<MyPipeLine_2>().As<IPipeline>();
var container = builder.Build();
var containsAllPipelineComponents = container.Resolve<IEnumerable<IPipeline>>(); 
```

如果你能把它当作一个`IEnumerable<T>`而不是一个列表会更好，但如果你必须有一个列表，你可以为它添加一个注册：

```
builder
  .Register(c => new List<IPipeline>(c.Resolve<IEnumerable<IPipeline>>()))
  .As<IList<IPipeline>>(); 
```

第二部分并不那么容易。**Autofac 不一定保证列表中项目的顺序。**如果您需要对它们进行排序，则需要在它们上放置某种排序元数据 - 属性、属性，这些东西可用于事后对管道进行排序。

或者，如果您的管道具有适用于不同组件的“阶段”或“事件”，请查看管道的设计并为每个事件提供不同的管道接口。在事件中，每个项目的执行顺序无关紧要。（这类似于 .NET 中的事件处理程序现在的工作方式。您希望模仿这种行为 - 整个生命周期中不同阶段的不同事件，但在每个特定阶段处理程序的执行顺序并不重要。）

一个示例可能如下所示：

```
public interface IFirstStage
{
  void Execute();
}

public interface ISecondStage
{
  void Execute();
}

public interface IThirdStage
{
  void Execute();
}

public class PipelineExecutor
{
  public IEnumerable<IFirstStage> FirstHandlers { get; private set; }
  public IEnumerable<ISecondStage> SecondHandlers { get; private set; }
  public IEnumerable<IThirdStage> ThirdHandlers { get; private set; }

  public PipelineExecutor(
    IEnumerable<IFirstStage> first,
    IEnumerable<ISecondStage> second,
    IEnumerable<IThirdStage> third)
  {
    this.FirstHandlers = first;
    this.SecondHandlers = second;
    this.ThirdHandlers = third;
  }

  public void ExecutePipeline()
  {
    this.ExecuteFirst();
    this.ExecuteSecond();
    this.ExecuteThird();
  }

  public void ExecuteFirst()
  {
    foreach(var handler in this.FirstHandlers)
    {
       handler.Execute();
    }
  }

  // ExecuteSecond and ExecuteThird look just
  // like ExecuteFirst, but with the appropriate
  // set of handlers.
} 
```

然后，当您注册处理程序时，它很简单：

```
var builder = new ContainerBuilder();
builder.RegisterType<SomeHandler>().As<IFirstStage>();
builder.RegisterType<OtherHandler>().As<IFirstStage>();
builder.RegisterType<AnotherHandler>().As<ISecondStage>();
// You can have any number of handlers for any stage in the pipeline.
// When you're done, make sure you register the executor, too:
builder.RegisterType<PipelineExecutor>(); 
```

当您需要运行管道时，解析并运行。

```
var executor = container.Resolve<PipelineExecutor>();
executor.ExecutePipeline(); 
```

这就像事件处理程序，但不使用委托。您有固定的管道“事件”或“阶段”顺序，但每个阶段内的处理程序不能保证顺序。

如果您需要修改管道以拥有更多阶段，是的，您需要修改代码。就像如果您有一个想要公开的新事件一样。但是，要添加、删除或更改处理程序，您只需修改 Autofac 注册。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T19:39:31.717

我建议您使用[元数据](http://code.google.com/p/autofac/wiki/Metadata)功能。它使您可以在注册阶段定义订单。

这是一个例子：

```
internal class Program
{
    private static void Main(string[] args)
    {
        var builder = new ContainerBuilder();
        var s1 = "First";
        var s2 = "Second";
        var s3 = "Third";
        builder.RegisterInstance(s1).As<string>().WithMetadata<Order>(c => c.For(order => order.OrderNumber, 1));
        builder.RegisterInstance(s2).As<string>().WithMetadata<Order>(c => c.For(order => order.OrderNumber, 2));
        builder.RegisterInstance(s3).As<string>().WithMetadata<Order>(c => c.For(order => order.OrderNumber, 3));

        using (var container = builder.Build())
        {
            var strings = container.Resolve<IEnumerable<Meta<string, Order>>>();
            foreach (var s in strings.OrderBy(meta => meta.Metadata.OrderNumber))
            {
                Console.WriteLine(s.Value);
            }
        }
        Console.ReadKey();
    }

    public class Order
    {
        public int OrderNumber { get; set; }
    }
} 
```

# javascript - 一次只允许显示一个幻灯片切换 div

> ID：15334745
> 
> 赞同：0
> 
> 时间：2013-03-11T09:11:56.620
> 
> 标签：javascript, jquery, slidetoggle

我正在一个使用 jquery 的滑动切换有 4 个可扩展 div 的网站上工作。一切正常，但我不希望一次扩展超过 1 个这些 div。换句话说：当一个 div 展开时，其他展开的 div 应该关闭。我认为手风琴不是一种选择，因为所有 div 的样式都不同。下面是我的代码。

```
$(document).ready(function(){
// slidetoggles

    $("#tgx-window").hide();
        $("#tgx-button").show();
        $("#tgs-window").hide();
        $("#tgs-button").show();
        $("#tgm-window").hide();
        $("#tgm-button").show();
        $("#tgl-window").hide();
        $("#tgl-button").show();

    $('#tgx-button').click(function(){
    $('#tgx-button').toggleClass('closebutton');
    $("#tgx-window").slideToggle();
    });

    $('#tgs-button').click(function(){
    $('#tgs-button').toggleClass('closebutton');
    $("#tgs-window").slideToggle();
    });

    $('#tgm-button').click(function(){
    $('#tgm-button').toggleClass('closebutton');
    $("#tgm-window").slideToggle();
    });

    $('#tgl-button').click(function(){
    $('#tgl-button').toggleClass('closebutton');
    $("#tgl-window").slideToggle();
    }); 
```

HTML：

```
<a onclick="" class="show_hide" id="<?=strtolower($service['title']);?>-button"></a>
        <div class="slidingDiv" id="<?=strtolower($service['title']);?>-window">
            <?
            $infoBox = '<h1>'.$service['subtitel'].'</h1>';
            $infoBox .= $service['description'];
            echo replaceTags($infoBox);
            ?>
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:28:45.547

在不了解您的 HTML 的情况下回答这个问题有点困难，但我希望这是一个解决方案；

**HTML（我想）：**

```
<div id="tgx-window">tgx window</div>
<div id="tgs-window">tgs window</div>
<div id="tgm-window">tgm window</div>
<div id="tgl-window">tgl window</div>

<button id="tgx-button">Show tgx</button>
<button id="tgs-button">Show tgs</button>
<button id="tgm-button">Show tgm</button>
<button id="tgl-button">Show tgl</button> 
```

**JavaScript：**

```
jQuery(function($) {
    var $windows = $('#tgx-window,#tgs-window,#tgm-window,#tgl-window'),
        $buttons = $('#tgx-button,#tgs-button,#tgm-button,#tgl-button');
    $windows.hide();

    $buttons.on('click', function(e) {
        var $id;
        e.preventDefault();
        $buttons.removeClass('closebutton');
        $id = $('#' + this.id.split('-')[0] + '-window');// Get window id
        $windows.slideUp();
        if(! $id.is(':visible') ) {
            $id.slideDown();
            $(this).addClass('closebutton');
        }
    });
}); 
```

[您可以在此处](http://jsfiddle.net/karalamalar/62NPt/4/)查看一个工作示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:14:45.373

使用`class`而不是`id`按钮，可能是它的父级`.tgx-window`

```
$('.tgx-button').click(function(){
    $(this).toggleClass('closebutton');
    $(this).closest(".tgx-window").slideToggle();
}); 
```

# magento - Magento Hello World 管理模块返回 404

> ID：15334748
> 
> 赞同：0
> 
> 时间：2013-03-11T09:12:09.147
> 
> 标签：magento, module, admin

我正在尝试使用在[此处找到的 moduleCreator 工具构建管理模块](http://www.silksoftware.com/magento-module-creator/)

即使是开箱即用，当我导航到页面时它也会抛出 404。我已禁用现金并注销/登录。谷歌搜索的解决方案都没有解决这个问题。我正在运行 1.7.2

关键文件如下所示：

**配置文件**

```
<?xml version="1.0"?>
<config>
  <modules>
    <Jinkou_MobileAdmin>
      <version>0.1.0</version>
    </Jinkou_MobileAdmin>
  </modules>
  <global>
    <helpers>
      <mobileadmin>
        <class>Jinkou_MobileAdmin_Helper</class>
      </mobileadmin>
    </helpers>
    <blocks>
      <mobileadmin>
        <class>Jinkou_MobileAdmin_Block</class>
      </mobileadmin>
    </blocks>
  </global>
  <admin>
    <routers>
      <mobileadmin>
        <use>admin</use>
        <args>
          <module>Jinkou_MobileAdmin</module>
          <frontName>mobileadmin</frontName>
        </args>
      </mobileadmin>
    </routers>
  </admin>
  <adminhtml>
    <menu>
      <mobileadmin module="mobileadmin">
        <title>MobileAdmin</title>
        <sort_order>100</sort_order>
        <children>
          <mobileadminbackend module="mobileadmin">
            <title>Order Processing</title>
            <sort_order>0</sort_order>
            <action>mobileadmin/adminhtml_mobileadminbackend</action>
          </mobileadminbackend>
        </children>
      </mobileadmin>
    </menu>
    <acl>
      <resources>
        <all>
          <title>Allow Everything</title>
        </all>
        <admin>
          <children>
            <mobileadmin translate="title" module="mobileadmin">
              <title>MobileAdmin</title>
              <sort_order>1000</sort_order>
              <children>
          <mobileadminbackend translate="title">
            <title>Order Processing</title>
          </mobileadminbackend>
              </children>
            </mobileadmin>
          </children>
        </admin>
      </resources>
    </acl>
    <layout>
      <updates>
        <mobileadmin>
          <file>mobileadmin.xml</file>
        </mobileadmin>
      </updates>
    </layout>
  </adminhtml>
</config> 
```

**MobileBackendController.php**

```
<?php
class Jinkou_MobileAdmin_Adminhtml_MobileAdminbackendController extends Mage_Adminhtml_Controller_Action
{
    public function indexAction()
    {
       $this->loadLayout();
       $this->_title($this->__("Order Processing"));
       $this->renderLayout();
    }
} 
```

MobileAdminbackendController.php 似乎没有加载，因为我可以删除该类而不抛出异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:43:43.580

确保以下文件位于正确的文件夹中，如下所示：

```
 app\code\local\Jinkou\MobileAdmin\Block\Adminhtml\MobileAdminbackend.php
 app\code\local\Jinkou\MobileAdmin\controllers\Adminhtml\MobileAdminbackendController.php
 app\code\local\Jinkou\MobileAdmin\etc\config.xml
 app\code\local\Jinkou\MobileAdmin\Helper\Data.php

 app\design\adminhtml\default\default\layout\mobileadmin.xml
 app\design\adminhtml\default\default\template\mobileadmin\mobileadminbackend.phtml

 app\etc\modules\Jinkou_MobileAdmin.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T06:42:20.240

我打开`magento 1.8`并通过执行以下操作修复了我的错误（404）。里面`Magentotutorial_Helloworld.xml`放下面的代码：

`codePool local codePool`

因为我没有本地文件夹，所以我将我的文件夹放入了社区文件夹。将代码更改为此，它将起作用。

'codePool 社区 codePool'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:30:47.903

可以到下面的设置页面查看列表中是否可以找到“Jinkou_MobileAdmin”吗？

```
System -> Configuration -> Advanced 
```

如果在那里找不到它，您可能忘记在代码中添加模块 XML 文件，要添加它，请转到：

```
app -> etc -> modules 
```

只需复制其他 XML 并将其中的数据编辑到您的模块中。确保将文件命名为“Jinkou_MobileAdmin.xml”。

# flash - 像素弯曲法线贴图

> ID：15334750
> 
> 赞同：0
> 
> 时间：2013-03-11T09:12:20.357
> 
> 标签：flash, graphics, 3d, pixel-bender

像往常一样提前谢谢..

我正在使用像素弯曲器为基于高度图的地形生成照明效果。我想制作地形的法线贴图，并从那里将每个法线点在给定的太阳方向上。确实很标准的东西，但是像素弯曲器玩得不好。我有这个代码：

```
void
evaluatePixel()
{
    float2 pt = outCoord();

    pixel3 a = sampleNearest(src,pt);
    pixel3 b = sampleNearest(src,float2(pt.x + 1.0, pt.y));
    pixel3 c = sampleNearest(src,float2(pt.x, pt.y + 1.0));

    float3 v1 = float3(1.0, 0.0, b.r - a.r);
    float3 v2 = float3(0.0, 1.0, c.r - a.r);

    normalize(v1);
    normalize(v2);

    float3 n = cross(v1,v2);

    dst = pixel3(n.x,n.y,n.z);
} 
```

我希望这会产生一个法线贴图。为了进行测试，我假设光线直接指向下方并仅用`n.z`作输出颜色。这会产生纯色。如果您使用上面的代码并运行它，您会看到虽然红色和绿色有变化，但蓝色总是在 255 处充满。这是为什么呢？我希望考虑`v1`并`v2`规范化这不应该总是输出全蓝色？

我究竟做错了什么？！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T01:37:33.633

实际上我在这里做了一些非常相似的事情，我的三角形带高度图。

```
input image3 verts;
output pixel3 triNorms;

void
evaluatePixel()
{
    float2 tCoord = outCoord() - 0.5; //move coord from pixel center to lower-left corner
    float quadIdx = mod(tCoord[0], 2.0); //potentially faster to use sign(fract(tCoord[0] / 2.0))
    float2 vCoord0 = float2(floor(tCoord.x / 2.0), tCoord.y);
    float2 vCoord1 = float2(vCoord0.x + 1.0, vCoord0.y + 1.0 - quadIdx);
    float2 vCoord2 = float2(vCoord0.x + quadIdx, vCoord0.y + 1.0);
    float3 v0 = sampleNearest(verts, vCoord0 + 0.5);
    float3 v1 = sampleNearest(verts, vCoord1 + 0.5);
    float3 v2 = sampleNearest(verts, vCoord2 + 0.5);
    float3 s0 = v1 - v0;
    float3 s1 = v2 - v0;
    float3 n = cross(s0, s1);
    float len = 1.0 / length(n);
    n.x *= len;
    n.y *= len;
    n.z *= len;
    triNorms = float3(n.x, n.y, n.z);
} 
```

这对我来说非常有效。在不到 100 毫秒的时间内通过 180 万个顶点。为了澄清起见，我将三角形定义为顶点之间的列。这意味着每 4 个顶点有两个三角形。我用“quadIdx”标识每个四边形的两个三角形。

**注意：**您正在标准化然后计算交叉 - 这是向后的，您需要在之后进行标准化。另外，我实际上相信我在 normalize() 中发现了一个错误。它在我没想到的地方创造了 NaN。我用 length() 实现了我自己的标准化，一切都很好！

# ios - 将 UIVIew 与 IBAction 中的 UIButton 关联

> ID：15334752
> 
> 赞同：2
> 
> 时间：2013-03-11T09:12:41.650
> 
> 标签：ios, uiview

我有一个带有 6 个按钮和 6 个子视图的视图控制器（在故事板中）。这些子视图连接到 IBOutlets 并命名为“mySubView1”、“mySubView2”等：

```
@property (weak, nonatomic) IBOutlet UIView *mySubView1;
@property (weak, nonatomic) IBOutlet UIView *mySubView2; 
```

我想根据按下的按钮为子视图的 alpha 值设置动画。所有 6 个按钮都连接到同一个 IBAction（如下），每个按钮都有一个标签（1 到 6）。

如何动态获取子视图属性名称？例如，mySubView1 if sender.tag = 1 例如，在下面的动画块中：

```
- (IBAction)animateSubviews:(id)sender {

[UIView animateWithDuration:0.4
                      delay: 0.0
                    options: UIViewAnimationOptionCurveEaseOut
                 animations:^{
                      self.mySubView1.alpha = 1;
                 }
                 completion:^(BOOL finished){

                 }]; 
```

}

所以我需要的是：self.mySubView[sender tag].alpha = 1 之类的东西，但我很难过，所以任何建议都非常感谢。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:16:13.920

**1）为子视图分配标签**

为您的 分配标签`UIViews`，例如，与标签为 1 的按钮对应的视图可能有标签 101。

```
- (IBAction)animateSubviews:(id)sender {

[UIView animateWithDuration:0.4
                      delay: 0.0
                    options: UIViewAnimationOptionCurveEaseOut
                 animations:^{
                      UIView *subview = [self.view viewWithTag:((UIButton*)sender).tag + 100]; 
                      subview.alpha = 1;
                 }
                 completion:^(BOOL finished){

                 }];
} 
```

**2）使用动态选择器**（回答你原来的问题）

您可以使用`NSSelectorFromString`返回 a的方法`SEL`。

```
UIView *subview = [self performSelector:NSSelectorFromString([NSString stringWithFormat:@"mySubView%d", ((UIButton*)sender).tag])]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:26:10.157

```
@property (strong, noatomatic) NSArray* arrayForSubViews;

if (!self.arrayForSubViews) {
    self.arrayForSubViews = @[ self.mySubView1, self.mySubView2, ... ];
}

//get the second view
self.arrayForSubViews[1]; 
```

# c++ - 将 std::tuple 用于模板参数列表而不是类型列表

> ID：15334753
> 
> 赞同：4
> 
> 时间：2013-03-11T09:12:46.853
> 
> 标签：c++, tuples, variadic-templates, enable-if, template-templates

我正在尝试调用这样的模板函数：

```
typedef std::tuple<int, double, bool> InstrumentTuple;

Cache cache;
InstrumentTuple tuple = cache.get<InstrumentTuple>(); 
```

我知道我可以“简单地”传递元组的类型。这是我所知道的，但这很麻烦，因为我对这个函数做了很多调用，而且元组很长：

```
InstrumentTuple tuple = c.get<int, double, bool>(); // syntax I'd like to avoid 
```

所以我尝试了 get 方法的多种实现，但没有成功：

## 通过模板参数启用

```
#include <tuple>

class Cache
{
private:
    template<int I, typename T, typename = typename std::enable_if<I == std::tuple_size<T>::value>::type>
    std::tuple<> get() // line 6
    {
        return std::tuple<>();
    }

    template<int I, typename T, typename = typename std::enable_if<I != std::tuple_size<T>::value>::type>
    std::tuple<typename std::tuple_element<I,T>::type, decltype(get<I+1, T>())> get() // line 12
    {
        std::tuple<typename std::tuple_element<I,T>::type> value;
        return std::tuple_cat(value, get<I+1, T>());
    }

public:
    template<typename T>
    T get()
    {
        return get<0, T>(); // line 22
    }
};

int main(int argc, char** argv)
{
    Cache cache;
    typedef std::tuple<int, double, bool> InstrumentTuple;
    InstrumentTuple tuple = cache.get<InstrumentTuple>(); // line 30
} 
```

这给了我这个错误：

```
main.cpp: In instantiation of 'T Cache::get() [with T = std::tuple<int, double, bool>]':
main.cpp:30:56:   required from here
main.cpp:22:26: error: no matching function for call to 'Cache::get()'
main.cpp:22:26: note: candidates are:
main.cpp:6:18: note: template<int I, class T, class> std::tuple<> Cache::get()
main.cpp:6:18: note:   template argument deduction/substitution failed:
main.cpp:5:33: error: no type named 'type' in 'struct std::enable_if<false, void>'
main.cpp:12:81: note: template<int I, class T, class> std::tuple<typename std::tuple_element<I, T>::type, decltype (get<(I + 1), T>())> Cache::get()
// ----- Important part
main.cpp:12:81: note:   template argument deduction/substitution failed:
main.cpp: In substitution of 'template<int I, class T, class> std::tuple<typename std::tuple_element<I, T>::type, decltype (get<(I + 1), T>())> Cache::get() [with int I = 0; T = std::tuple<int, double, bool>; <template-parameter-1-3> = <missing>]':
// -----
main.cpp:22:26:   required from 'T Cache::get() [with T = std::tuple<int, double, bool>]'
main.cpp:30:56:   required from here
main.cpp:12:81: error: no matching function for call to 'Cache::get()'
main.cpp:12:81: note: candidate is:
main.cpp:6:18: note: template<int I, class T, class> std::tuple<> Cache::get()
main.cpp:6:18: note:   template argument deduction/substitution failed:
main.cpp:5:33: error: no type named 'type' in 'struct std::enable_if<false, void>'
main.cpp: In instantiation of 'T Cache::get() [with T = std::tuple<int, double, bool>]':
main.cpp:30:56:   required from here
main.cpp:20:7: note: template<class T> T Cache::get()
main.cpp:20:7: note:   template argument deduction/substitution failed:
main.cpp:22:26: error: wrong number of template arguments (2, should be 1) 
```

我不明白为什么缺少模板参数。

所以我尝试了另一种实现：

## 模板模板命名参数

```
#include <tuple>

class Cache
{
private:
    template<int>
    std::tuple<> get() // line 7
    {
        return std::tuple<>();
    }

    template<int index, typename type, typename... rest>
    std::tuple<type, rest...> get() // line 13
    {
        return std::tuple_cat(std::tuple<type>(), get<index+1, rest...>());
    }

public:
    template<template<typename... types> class tuple>
    typename std::tuple<(tuple::types)...> get()
    {
        return get<0, (tuple::types)...>();
    }
};  // line 24

int main(int argc, char** argv)
{
    Cache cache;
    typedef std::tuple<int, double, bool> InstrumentTuple;
    InstrumentTuple tuple = cache.get<InstrumentTuple>(); // line 30
} 
```

但后来我得到这个错误：

```
// ----- Important part
main.cpp:24:1: error: expected identifier before '}' token
main.cpp:24:1: error: expected unqualified-id before '}' token
// -----
main.cpp: In function 'int main(int, char**)':
main.cpp:30:56: error: no matching function for call to 'Cache::get()'
main.cpp:30:56: note: candidates are:
main.cpp:7:18: note: template<int <anonymous> > std::tuple<> Cache::get()
main.cpp:7:18: note:   template argument deduction/substitution failed:
main.cpp:13:31: note: template<int index, class type, class ... rest> std::tuple<_Head, _Tail ...> Cache::get()
main.cpp:13:31: note:   template argument deduction/substitution failed: 
```

同样，由于缺少标识符，我不明白错误。

我现在想知道我想要实现的目标是否可能。是否可以使用`std::tuple`我想要的？或者，还有更好的方法 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T12:43:18.647

您的第一个解决方案失败了，因为第二个重载 to`get`在其自己的返回类型声明时不可见；为了解决这个问题，您需要将返回类型计算分离到它自己的子程序中。

第二种解决方案更接近；问题是你只是在推断*template* `std::tuple`，而不是它的论点。推断可变参数（例如类型参数`tuple`）的一种简单方法是通过空标记结构，需要一个额外的间接级别：

```
template<typename T> struct type_tag {};

class Cache {
    // ... (as above)

    template<typename... Ts> std::tuple<Ts...> get(type_tag<std::tuple<Ts...>>) {
        return get<0, Ts...>();
    }

public:
    template<typename T> T get() {
        return get(type_tag<T>{});
    }
}; 
```

您应该检查是否可以使用包扩展而不是递归来编写解决方案，例如：

```
template<typename T> struct type_tag {};

class Cache {
    template<typename... Ts> std::tuple<Ts...> get(type_tag<std::tuple<Ts...>>) {
        return std::tuple<Ts...>{Ts{}...};
    }

public:
    template<typename T> T get() {
        return get(type_tag<T>{});
    }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T10:59:58.827

这是我想出的：

```
#include <tuple>

struct Cache;

/* typename = std::tuple<...> */
template<int, typename> struct cache_getter;
/* typename = parameters from std::tuple<...> */
template<int, typename...> struct tuple_walker;

template<int I, typename... Ts> struct cache_getter<I, std::tuple<Ts...> > {
    static std::tuple<Ts...> get(Cache & c);
};

struct Cache {
protected:
    template<int, typename...> friend struct tuple_walker;
private:
    /* here T is a type from within a std::tuple<...> */
    template<int I, typename T> std::tuple<T> get_ex() {
        return std::tuple<T>();
    }
public:
    /* here T is actually a std::tuple<...> */
    template<typename T> T get() {
        return cache_getter<0, T>::get(*this);
    }
};

/* since std::tuple_cat only accepts 2 std::tuples per call but we don't have control over the number of types in the passed in std::tuple, we'll need to chain our calls */
template<typename...> struct my_tuple_cat;
template<typename H, typename... T> struct my_tuple_cat<H, T...> {
    static auto cat(H h, T... t) -> decltype(std::tuple_cat(h, my_tuple_cat<T...>::cat(t...)))
    { return std::tuple_cat(h, my_tuple_cat<T...>::cat(t...)); }
};
template<typename T> struct my_tuple_cat<T> {
    static T cat(T t) { return t; }
};

/* this one is used to call Cache.get_ex<int I, typename T>() with incrementing values for I */
template<int I, typename H, typename... T> struct tuple_walker<I, H, T...> {
    static std::tuple<H, T...> get(Cache & c) {
        return my_tuple_cat<std::tuple<H>, std::tuple<T...>>::cat(c.get_ex<I, H>(), tuple_walker<I + 1, T...>::get(c));
    }
};
template<int I, typename H> struct tuple_walker<I, H> {
    static std::tuple<H> get(Cache & c) {
        return c.get_ex<I, H>();
    }
};
/* this one will forward the types in std::tuple<...> to tuple_walker to get each tuple separately */
template<int I, typename... Ts> std::tuple<Ts...> cache_getter<I, std::tuple<Ts...> >::get(Cache & c) {
    return tuple_walker<I, Ts...>::get(c);
}

int main(int argc, char ** argv) {
    Cache cache;
    typedef std::tuple<int, double, bool> InstrumentTuple;
    InstrumentTuple tuple = cache.get<InstrumentTuple>();
    return 0;
} 
```

我希望这是值得的。我还没有在 C++11 中做太多事情，所以也许这不是一个最佳解决方案。

它编译的证明可以在[这里找到](http://ideone.com/0gXNYT)

# parallel-processing - 脚本并发问题？

> ID：15334754
> 
> 赞同：1
> 
> 时间：2013-03-11T09:12:46.987
> 
> 标签：parallel-processing, scriptella, antcall

我使用“antcall” scriptlla 并发调用，但出现“javax.mail.Management InstanceNotFoundException”。我设置了10个并发，有时可以10个，有时只能升几个。

```
<target name="PAIR_CONN">
        <etl debug="true">
            <fileset file="Pair_Conn.xml" />
        </etl>
    </target>
    <target name="pair_conn_mult">
        <parallel threadCount='5'>
            <antcall target="PAIR_CONN">
                <param name="g_flag" value="1" />
            </antcall>
            <antcall target="PAIR_CONN">
                <param name="g_flag" value="2" />
            </antcall>
            <antcall target="PAIR_CONN">
                <param name="g_flag" value="3" />
            </antcall>
            <antcall target="PAIR_CONN">
                <param name="g_flag" value="4" />
            </antcall>
            <antcall target="PAIR_CONN">
                <param name="g_flag" value="0" />
            </antcall>
        </parallel>
    </target> 
```

无法注销 mbean scriptella:type=etl,url="file:/informatica/infa861/oss_etl_523/src/ElectricCable/Pair_Conn.xml" javax.management.InstanceNotFoundException: scriptella:type=etl,url="file:/informatica/ infa861/oss_etl_523/src/ElectricCable/Pair_Conn.xml"

我查看scriptella源码，代码已经同步了，

```
public synchronized void register() {
    if (name != null) {
        throw new IllegalStateException("MBean already registered");
    }
    server = getMBeanServer();
    String url = ctx.getScriptFileURL().toString();
    System.out.println("LM:"+url);
    boolean registered = false;
    for (int i = 0; i < 1000; i++) {
        if (name == null || server.isRegistered(name)) {
            registered = true;
            name = toObjectName(url, i);
            System.out.println("LM:"+name);
        } else {
            registered = false;
            break;
        }
    }
    etlThread = Thread.currentThread();
    if (!registered) {
        try {
            server.registerMBean(this, name);
            started = new Date();
            LOG.info("Registered JMX mbean: " + name);
        } catch (Exception e) {
            throw new SystemException("Unable to register mbean " + name, e);
        }
    } else {
        throw new SystemException("Unable to register mbean for url " + url + ": too many equal tasks already registered");
    }
} 
```

对于这种情况，您有什么建议？我应该尝试什么，或者我应该阅读什么才能找到解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:30:09.407

感谢您指出一个严重的错误。我已经打开[JavaForge 票](http://javaforge.com/issue/54489)来跟踪这个问题。

作为一种解决方法，您可以切换到`<java fork="true">`任务以在分叉的 VM 中运行 Scriptella，因此 Ant 脚本将变成这样：

```
<path id="scriptella.class.path">
    <pathelement location="../../build/scriptella.jar"/>
</path>
<taskdef resource="antscriptella.properties" classpathref="scriptella.class.path"/>

<target name="PAIR_CONN">
    <java fork="yes" classname="scriptella.tools.launcher.EtlLauncher" classpathref="scriptella.class.path">
        <arg value="Pair_Conn.xml"/>
        <arg value="-d"/>
        <sysproperty key="g_flag" value="${g_flag}"/>
    </java>
</target>

<target name="pair_conn_mult">
    <parallel threadCount='5'>
        <antcall target="PAIR_CONN">
            <param name="g_flag" value="1" />
        </antcall>
        <antcall target="PAIR_CONN">
            <param name="g_flag" value="2" />
        </antcall>
        <antcall target="PAIR_CONN">
            <param name="g_flag" value="3" />
        </antcall>
        <antcall target="PAIR_CONN">
            <param name="g_flag" value="4" />
        </antcall>
        <antcall target="PAIR_CONN">
            <param name="g_flag" value="0" />
        </antcall>
    </parallel>
</target> 
```

# scala - 隐式参数不起作用

> ID：15334756
> 
> 赞同：0
> 
> 时间：2013-03-11T09:12:51.567
> 
> 标签：scala, implicits

假设我有以下 scala 代码：

```
trait ValueSource[A] {
  def value(a: Int): A
}

trait ValueSourceOps[A] {
  def self: Int
  def F: ValueSource[A]
  def value: A = F.value(self)
}

trait ToValueSourceOps {
  implicit def toValueSourceOps[A](index: Int)(implicit F0: ValueSource[A]): ValueSourceOps[A] =    new ValueSourceOps[A] {
    def self = index
    def F: ValueSource[A] = F0
  }
}

object Test extends ToValueSourceOps {
  def value[A: ValueSource](index: Int): A = toValueSourceOps(index).value
} 
```

上面的代码编译得很好，但是当我将最后一行（对象测试中的方法“值”的主体）更改为

```
def value[A: ValueSource](index: Int): A = index.value 
```

编译器抱怨找不到参数 F0 的隐式值：ValueSource[A]

在我看来，def value[A: ValueSource] 意味着我有一个隐含的值“ValueSource[A]”，那么为什么编译会失败呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:51:15.900

`A`in与in`toValueSourceOps`没有关系，这使得推断它有问题*。*对我来说，真正的问题是为什么当您显式调用该方法时它会起作用。`A``value`

我猜想，当`toValueSourceOp`显式调用时，它*必须*推断相同`A`，因为这是唯一可用的隐式。

# xml - 无法更改 ListPicker FullModeItemTemplate 的 FontSize

> ID：15334758
> 
> 赞同：3
> 
> 时间：2013-03-11T09:12:55.543
> 
> 标签：xml, xaml, windows-phone-8, windows-phone

我有一个 ListPicker，当我单击它时，我会弹出全屏窗口，但是那里的选项都很小，而且无论出于何种原因我都无法更改 FontSize。

代码：

```
<phone:PhoneApplicationPage.Resources>
    <DataTemplate x:Name="PickerFullItemTemplate">
        <StackPanel>
            <TextBlock Text="{Binding Number}"/>
        </StackPanel>
    </DataTemplate>
</phone:PhoneApplicationPage.Resources>

<toolkit:ListPicker ExpansionMode="FullScreenOnly" Name="Picker" ItemsSource="{Binding Number, ElementName=this}" FullModeItemTemplate="{Binding PickerFullItemTemplate}" /> 
```

如何使全屏弹出窗口大小为 36 字体的文本？

编辑：我应该提到，如果我在模板中设置字体大小（如下所示）它不起作用。我可以在列表选择器上设置字体大小，但显然这不会改变完整模式弹出窗口。此外，我已将 ListPicker 从 Pivot 中取出，并尽可能多地注释掉它，因此没有什么可能覆盖此设置，但仍然没有。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T04:51:07.687

请执行下列操作：

1）使用您的值列表创建一个类

```
public class Number
{
    public IEnumerable<string> number { get { return "AA1,AA2,AA3".Split(','); } }
} 
```

2）在xaml文件的顶部声明你的项目的命名空间

```
xmlns:local="clr-namespace:YourAppNameSpaceGoesHere" 
```

3) 在 PhoneApplicationPage Resources 部分中将您的类声明为资源

4) 在您的 DataTemplate TextBlock 中，只需将 Text 值定义为“{Binding}”并设置您的 FontSize

```
<phone:PhoneApplicationPage.Resources>
    <local:Number x:Key="Number"/>
    <DataTemplate x:Name="PickerFullItemTemplate">
        <StackPanel>
            <TextBlock Text="{Binding}" FontSize="36"/>
        </StackPanel>
    </DataTemplate>
</phone:PhoneApplicationPage.Resources> 
```

5) 包装你的 ListPicker 控件是一个像 Grid 一样的容器控件，并将 Grid 的 DataContext 设置为你的类

6) ListPicker 中的 FullModeItemTemplate 应定义为 StaticResource

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0" DataContext="{StaticResource Number}">
        <toolkit:ListPicker ExpansionMode="FullScreenOnly" Name="Picker" ItemsSource="{Binding number}" FullModeItemTemplate="{StaticResource PickerFullItemTemplate}" />
    </Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:37:22.900

以下应该工作。

```
<DataTemplate x:Name="PickerFullItemTemplate">
    <StackPanel>
        <TextBlock Text="{Binding Number}" FontSize="36"/>
    </StackPanel>
</DataTemplate> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-29T07:27:55.723

怎么样：

```
<Style x:Key="LPickFullModeTxtBlock" TargetType="TextBlock">
     <Setter Property="FontSize" Value="30"/>
</Style>

<toolkit:ListPicker.FullModeItemTemplate>
     <DataTemplate>
         <TextBlock Text="{Binding bindProp}" VerticalAlignment="Top" HorizontalAlignment="Left" Style="{StaticResource LPickFullModeTxtBlock}"></TextBlock>
     </DataTemplate>
</toolkit:ListPicker.FullModeItemTemplate> 
```

# symfony - Symfony2.2 生成实体反向存在一个没有主键的实体

> ID：15334760
> 
> 赞同：1
> 
> 时间：2013-03-11T09:13:08.663
> 
> 标签：symfony, doctrine-orm, symfony-2.2

我正在尝试使用**--filter**选项在我的应用程序中反向生成一些新实体以仅选择新实体。

```
php app/console doctrine:mapping:convert yml ./src/MyProject/MyBundle/Resources/config/doctrine/metadata/orm --filter="NewTable" --from-database --force 
```

我从一个已经映射和工作的预先存在的表中收到一条错误消息（实际上没有显式映射，因为它是一个多对多关系表）

```
Table your_other_table has no primary key 
```

我的问题是：

1.  我知道 Doctrine 从没有主键的表生成问题，但在这种情况下，我想用**--filter**参数忽略它，我什至不需要实体，那么为什么会出现这个错误？

2.  我通常为每个表使用自己的主键，即使在关系表中，我认为我是“被迫”消除这个多对多关系表中的主键以使实体中的关系起作用，这是正确的吗？Doctrine 消除了关系表中的主键？（我的意思是，他们有 PK，但它是由 2 个外键组成的）。

# android - 带有 TabFragments 的 ActionBar 用于 Android 中的 Android 2.3 及更高版本的较低 SDK？

> ID：15334761
> 
> 赞同：0
> 
> 时间：2013-03-11T09:13:13.217
> 
> 标签：android, android-actionbar

我正在一个应用程序中工作，我必须在其中使用 TabListener 实现 ActionBar。我有此任务[lucazanini](http://www.lucazanini.eu/2012/android/tab-layout-in-android-with-actionbar-and-fragment/?lang=en)的示例代码，但这仅适用于 API 4.1 及更高版本，不适用于任何较低的 API。Aslo 我得到了一个带有库项目的 ActionBar 示例，但其中不包含 TabFragment。

请建议我提供一些示例，以便我可以在 Android 的较低 API 级别中使用 ActionBar + ActionBar.TabListener。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:34:37.350

您可以使用 ActionBarSherlock。

您可以在[http://actionbarsherlock.com/index.html](http://actionbarsherlock.com/index.html)中找到它。

该库使用 Android 4+ 的原生 ActionBar，并为旧版本打包。Google 正在使用这个库并鼓励使用它。

你可以在这里找到源代码：

[https://github.com/JakeWharton/ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock)

在同一个存储库中，您可以找到很多示例。

如果你想要它在行动，你可以试试这个免费的应用程序：Android UI Patterns：

[https://play.google.com/store/apps/details?id=com.groidify.uipatterns&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5ncm9pZGlmeS51aXBhdHRlcm5zIl0](https://play.google.com/store/apps/details?id=com.groidify.uipatterns&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5ncm9pZGlmeS51aXBhdHRlcm5zIl0)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:32:52.810

您应该考虑使用[ActionBarSherlock](http://actionbarsherlock.com/index.html)库，这几乎是目前执行此类操作的标准。甚至谷歌也建议使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T09:36:30.633

这会有所帮助： [actionBar sherlock](https://github.com/JakeWharton/ActionBarSherlock)

它工作正常。您可以根据您的要求覆盖示例。它看起来很简单。

# debugging - 使用 IntelliJ IDEA 在 Groovy 中调试迭代（闭包）

> ID：15334766
> 
> 赞同：8
> 
> 时间：2013-03-11T09:13:38.553
> 
> 标签：debugging, groovy, intellij-idea, closures, iteration

我有一个混合了 Java 和 Groovy 代码的代码库。对于 Groovy 代码中的迭代，我们倾向于使用闭包：

```
String[] strings = ["First", "Second", "Third"]
strings.each { string ->
    println string
} 
```

当我在 IntelliJ IDEA (v. 11) 中通过一次步进一行来调试它时，在`strings.each()`(即`println string`) 中执行的代码被跳过。我可以在该行放置一个断点`println`，并且可以对其进行调试，但这是一个可以避免的小变通方法。

**有没有办法配置 intelliJ 不跳过 Groovy 闭包？***File->Settings->Debugger->Groovy*中没有适用的选项。

**编辑：**

为了澄清我期望 intelliJ 做什么：

假设我有这样的 Java 风格迭代：

```
for (String string : strings) {
    println string
} 
```

如果我使用“Step over”，调试器会毫无问题地进入迭代。我可以继续“越过”并且仍然处于循环中，直到没有更多对象可以迭代。这就是我对上述关闭的期望。

在您必须手动设置断点的一两个闭包的情况下，这可能不是问题。但是如果有很多，“自动”进入它们会非常巧妙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T14:07:52.247

我完全同意 IntelliJ 中需要更好的 Closure 调试支持，因为您要求做的事情并不总是像它应该做的那样简单而无需跳过一些障碍。

就像您发现的那样，您可以`println`在行上放置一个断点，这通常会让您在闭包内中断（但并非总是如此）。一旦你*有了*断点，IntelliJ 就有一个非常强大的条件断点系统，它可以让你更好地控制何时断点。

我不时发现有用的另一条路线是将这些闭包中的所有内容放入闭包调用的方法中，而不是将代码直接放在闭包中。这不会过多地改变运行时行为，而且我发现它让我对事物有更多的控制权。这通常也表明我也需要重构，因为深入研究该代码已经太痛苦了。

# c# - 使用 JSON.NET 和数组 & LINQ 解析 JSON 响应

> ID：15334767
> 
> 赞同：1
> 
> 时间：2013-03-11T09:13:40.410
> 
> 标签：c#, linq, json.net

我想从我的 linq 响应中返回地址信息。我很接近，但无法得到最后一点。我需要每个条目的所有地址信息。

有人可以帮忙做最后一点吗？

```
 var allCentres = from p in obj["early_child_centres"]
            select p["address"].Children ();

            foreach (var item in allCentres)
            {
                Console.WriteLine(item);
            }

 {

"early_child_centres": [
{

  "centre_name": "Arncliffe Early Childhood Centre",

  "address": {
    "street_name": "12 Firth St",
    "suburb": "Arncliffe",
    "state": "NSW",
    "postcode": "2205",
    "phone": "9599 2896"
  },
  "special_notes": "",

},

]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:21:50.730

您可以使用实体来反序列化您的 json ：

```
[DataContract]
public class Center
{
    [DataMember(Name = "center_name")]
    public string Name { get; set; }
    [DataMember(Name = "special_notes")]
    public string SpecialNotes { get; set; }
    [DataMember(Name = "address")]
    public Address Address { get; set; }

    public Center() { this.Address = new Address();}
}

[DataContract]
public class Address
{
    [DataMember(Name = "street_name")]
    public string StreetName { get; set; }
    [DataMember(Name = "suburb")]
    public string Suburb { get; set; }
    [DataMember(Name = "state")]
    public string State { get; set; }
    [DataMember(Name = "postcode")]
    public string Postcode { get; set; }
    [DataMember(Name = "phone")]
    public string Phone { get; set; }
} 
```

并反序列化：

```
List<Center> centers = JsonConvert.DeserializeObject<List<Center>>(obj["early_child_centres"].ToString()); 
```

然后，您的 linq 请求：

```
from c in center
select c.Address 
```

# actionscript-3 - 尝试在 intellij IDEA AS3 中使用另一个模块中的组件时出现问题

> ID：15334768
> 
> 赞同：0
> 
> 时间：2013-03-11T09:13:46.370
> 
> 标签：actionscript-3, intellij-idea

我正在尝试使用来自另一个模块的组件，但无法正常工作。看看我有什么：我有我的项目，它是一个转换文件的应用程序，它的工作一切正常。现在我想更改界面...为此我克隆了一个 github 存储库，这是一个包含我要使用的组件的项目，并将其作为模块导入。（我应该作为模块还是作为项目导入？）到目前为止一切都很好，但是当我尝试使用模块中的组件时，我找不到类甚至模块......

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:39:37.070

您应该将导入的源添加为新模块（让我们称之为`B`），然后您应该将原始模块的依赖项添加`A`到模块`B`中以使用其代码。

有关如何配置模块依赖项的信息，请参阅[此页面。](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)

# android - Android的“频移键控”解码器

> ID：15334769
> 
> 赞同：3
> 
> 时间：2013-03-11T09:13:48.987
> 
> 标签：android, signal-processing

我正在尝试通过 android 设备的音频端口传输一些数据，我正在使用 FSK（频移键控）我正在使用两个不同的频率来表示 1 和 0。是否有任何 android 库或示例代码用于 FSK 解码捕获音频数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:30:24.493

你可能想看看这个

[https://code.google.com/p/audio-analyzer-for-android/source/browse/README](https://code.google.com/p/audio-analyzer-for-android/source/browse/README)

一般提示：

*   确保应用窗口功能。
*   选择一个采样频率，使 fft 变换以尽可能少的样本尽可能接近您的两个频率。

# jpa - Spring-MVC、InheritanceType.JOINED 以及 JSON 对象到 Jackson 实体的自动映射

> ID：15334771
> 
> 赞同：0
> 
> 时间：2013-03-11T09:13:55.557
> 
> 标签：jpa, spring-mvc, jackson

我们正在尝试编写一个 API 来创建不同类型的*元素*。这些元素具有 JPA 实体表示。以下代码显示了我们的基本元素结构（简化）：

```
import javax.persistence.*;

@Entity
@Inheritance(strategy = InheritanceType.JOINED)
public class Element {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Integer id;

    @Column
    private String type;

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }
} 
```

每个元素实现看起来都不同，但这个例子应该足够了：

```
import javax.persistence.Column;
import javax.persistence.Entity;

@Entity
public class SpecializedElement1 extends Element {

    @Column
    private String attribute;

    public String getAttribute() {
        return attribute;
    }

    public void setAttribute(String attribute) {
        this.attribute = attribute;
    }

} 
```

我们使用 Jackson，典型的控制器动作如下所示：

```
@RequestMapping(value = "/createElement", method = RequestMethod.POST)
@ResponseBody
public HashMap<String, Object> create(@RequestBody Element element) {
    HashMap<String, Object> response = new HashMap<String, Object>()
    response.put("element", element);
    response.put("status", "success");
    return response;
} 
```

典型的请求正文如下所示：

```
{
    "type": "constantStringForSpecializedElement1"
    "text": "Bacon ipsum dolor sit amet cow bacon drumstick shankle ham hock hamburger."
} 
```

正如您将看到的：这不起作用，因为 Jackson 不知道如何将此对象映射到 SpecializedElement1。

问题是：我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:25:15.467

我想到了。这就是解决方案：

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
@JsonTypeInfo(
    // We use the name defined in @JsonSubTypes.Type to map a type to its implementation.
    use = JsonTypeInfo.Id.NAME,
    // The information that stores the mapping information is a property.
    include = JsonTypeInfo.As.PROPERTY,
    // The property is called "type".
    property = "type"
)
@JsonSubTypes({
        @JsonSubTypes.Type(value = SpecializedElement1.class, name = "specializedElement1"),
        @JsonSubTypes.Type(value = SpecializedElement1.class, name = "specializedElement2")
})
public class Element {
    // ....
} 
```

此控制器操作按预期工作......

```
@RequestMapping(value = "/create", method = RequestMethod.POST)
@ResponseBody
public Map<String, Object> create(@RequestBody Element element) {
    if (element == null) {
        // Return an error response.
    }
    try {
        return elementService.update(element);
    } catch (Exception e) {
        // Return an error response.
    }
} 
```

...带着这个要求：

```
POST /create/
... more headers ...
Content-Type: application/json

{
    "type": "specializedElement1"
} 
```

# android - 如何访问电话号码？

> ID：15334774
> 
> 赞同：-8
> 
> 时间：2013-03-11T09:14:03.470
> 
> 标签：android

当您下载此应用程序然后我检索此号码时，如何构建能够访问用户电话号码的 Android 应用程序？
例如：

```
 public class Phonenumber  
 {
      //functions 
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:17:54.980

获取用户电话号码非常简单。

```
TelephonyManager tMgr =(TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
String mPhoneNumber = tMgr.getLine1Number(); 
```

必需的

```
permission READ_PHONE_STATE in android manifest file. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:19:10.570

```
TelephonyManager tMgr =(TelephonyManager)mAppContext.getSystemService(Context.TELEPHONY_SERVICE);      

String mPhoneNumber = tMgr.getLine1Number(); 
```

需要许可`READ_PHONE_STATE`。

在 android manifest xml 文件中添加以下部分。

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T09:25:14.533

您可以按照其他建议使用 TelePhonyManager.getLineNumber()。但我应该补充一件事。并不是每个接线员都能通过这种方法得到电话号码。因为电话号码不是物理存储在所有 SIM 卡上，也不是从网络广播到电话。所以在某些网络中它可能不会返回数字。所以对我来说，如果你想让你的应用程序全球化，最好的解决方案是让用户输入电话号码。

此外，这是一个重复的问题。请参阅此处[https://stackoverflow.com/a/6797278/931982](https://stackoverflow.com/a/6797278/931982)。

# java - 在哪里可以找到 web.xml 中 web-app 元素的 version 属性的有效值？

> ID：15334776
> 
> 赞同：5
> 
> 时间：2013-03-11T09:14:12.460
> 
> 标签：java, jakarta-ee, servlets, web.xml

典型的 web.xml 如下所示：

```
<!DOCTYPE web-app PUBLIC
 "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
        "http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

<web-app version="2.4">
  <display-name>Archetype Created Web Application</display-name>
</web-app> 
```

如何找出哪些值对 的`version`属性有效`<web-app>`？

```
<web-app version="?"> 
```

是 2.5 还是可能是 3.0？

有人知道带有架构或 DTD 的 URL 以进行`web.xml`验证吗？不同网络应用程序版本的 DTD 的 URL 是不同的，有没有可以看到完整列表的来源？

```
//doctype for servlet 2.3
<!DOCTYPE web-app
    PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
    "http://java.sun.com/dtd/web-app_2_3.dtd">

//doctype for servlet 2.2
<!DOCTYPE web-app PUBLIC
  "-//Sun Microsystems, Inc.//DTD Web Application 2.2//EN"
  "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:28:50.647

你可以试试这个网址：

[http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/javaee/index.html](http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/javaee/index.html)

在这里你可以找到

[http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/javaee/web-app_3_0.xsd](http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/javaee/web-app_3_0.xsd)

[http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/javaee/web-app_2_5.xsd](http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/javaee/web-app_2_5.xsd)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T09:49:09.410

lastreleased 是`3.0`（2009 年 12 月发布），维基百科[显示](http://en.wikipedia.org/wiki/Java_Servlet#History)了一个完整的版本列表 - `3.0, 2.5, 2.4, 2.3, 2.2, 2.1, 2.0, 1.0`. 版本`3.1`正在开发中。

我所知道的获取规范的最简单方法是获取 schemaLocation URL`http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd`并从末尾删除文件部分，因此导航到`http://java.sun.com/xml/ns/javaee/`. 这重定向到`http://www.oracle.com/webfolder/technetwork/jsc/xml/ns/javaee/index.html`哪个是所有规范的综合来源。它还在页面末尾提供了指向先前 J2EE 规范的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-24T02:57:47.480

[在这里，我为不同的 Java EE 提供了模式或 DTD 的链接代码](http://www.mkyong.com/web-development/the-web-xml-deployment-descriptor-examples/)

在此链接中，您会发现

1.  Servlet 3.1 部署描述符 Java EE 7 XML 模式
2.  Servlet 3.0 部署描述符 Java EE 6 XML 模式
3.  Servlet 2.5 部署描述符 Java EE 5 XML 模式
4.  Servlet 2.4 部署描述符 J2EE 1.4 XML 模式
5.  Servlet 2.3 部署描述符 J2EE 1.3 DTDs 模式

# c++ - 类继承 C++

> ID：15334777
> 
> 赞同：0
> 
> 时间：2013-03-11T09:14:12.523
> 
> 标签：c++, inheritance

我有一个基类产品和一个子类 multiBuyProduct

```
class Product
{
public:
  Product(std::string name, Amount price);
}

class MultiBuyProduct :public Product
{
public:
MultiBuyProduct(std::string aName, Amount price, int minDiscountedQuantity, int  discountedPercent); 
```

现在显然一些构造函数变量是相同的，但在我的主类中我假设如果我想要 multiBuyProduct 的功能我需要调用它？或者我可以调用产品并将 multiBuyProduct 构造函数的值传递给期望产品的参数吗？

下面显示了一种使用它的方法

```
void ShoppingCart::add(Product p, int quantity, bool end)
{
} 
```

以上是我想将参数发送到的方法，但我不知道是否需要更改此方法的代码以接受 MultiBuyProduct 或 ...??

编辑：抱歉忘了提到“金额”是一个需要两个整数的类

```
 Amount amount(0,1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:16:56.043

您可能希望在 中添加一个`virtual`方法`Product`，例如，`Amount Product::calculatePrice(int quantity)`并在其中覆盖它，`MultiBuyProduct`以便它基于 执行正确的计算`minDiscountedQuantity`。然后，从`add()`. 此外，您需要传递引用 ( `Product&`) 或指针 ( `Product*`) 以`add()`使虚方法调用起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:30:09.007

您应该更改`ShoppingCart::add`如下内容，以实现多态行为：

```
void ShoppingCart::add(Product *p, int quantity, bool end)
{
  p->doSomething();
  // ...
  Product *product = p;
  product->doSomething();
  // ...
} 
```

用法：

```
ShoppingCart shoppingCart;

MultiBuyProduct multiBuyProduct("Paper", Amount(0,1), 1, 1);

shoppingCart.add(&multiBuyProduct, 1, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:45:33.030

你应该改变一些事情。

您需要一种类型的指针或引用来实现多态行为。

您需要调用基类构造函数。

您需要覆盖您的虚拟方法。

一旦依赖指针，就应该注意正确的内存管理。

你应该尽量保持[const 正确](http://en.wikipedia.org/wiki/Const-correctness)。

考虑下面这个例子：

```
#include <string>
#include <iostream>
#include <vector>
#include <memory>
#include <sstream>

class Product
{
private:
  double Price;
  std::string Name;

public:
  Product(const std::string& name, double price)
    : Price(price),
      Name(name)
  {
    std::cout << "Created " << name << " for $" << price << std::endl;
  }

  virtual std::string GetName() const
  {
    return Name;
  }

  virtual double GetPrice() const
  {
    return Price;
  }
};

class MultiProduct :public Product
{
private:
  int Quantity;

public:
  MultiProduct(const std::string& name, double price, int quantity)
    : Product(name, price),
      Quantity(quantity)
  {
    std::cout << "Created " << quantity << "x " << name << " for $" << price << " each." <<  std::endl;
  }

  virtual double GetPrice() const
  {
    return Product::GetPrice() * Quantity;
  }

  virtual std::string GetName() const
  {
    std::stringstream s;

    s << Product::GetName();
    s << " x";
    s << Quantity;

    return s.str();
  }
};

class ShoppingCart
{
private:
  std::vector< std::shared_ptr<Product> > Cart;

public:
  void Add( std::shared_ptr<Product> product )
  {
    Cart.push_back( product );
  }

  void PrintInvoice() const
  {
    std::cout << "Printing Invoice:" << std::endl;

    for( auto it = Cart.begin() ; it != Cart.end() ; ++it )
    {
      std::cout << (*it)->GetName() << ": " << (*it)->GetPrice()  << std::endl;;
    }
  }
};

int main()
{
  ShoppingCart cart;

  cart.Add( std::shared_ptr<Product>( new Product( "cheese", 1.23 ) ) );
  cart.Add( std::shared_ptr<Product>( new MultiProduct( "bread", 2.33, 3 ) ) );
  cart.Add( std::shared_ptr<Product>( new Product( "butter", 3.21 ) ) );
  cart.Add( std::shared_ptr<Product>( new MultiProduct( "milk", 0.55, 5 ) ) );
  cart.Add( std::shared_ptr<Product>( new Product( "honey", 5.55 ) ) );

  cart.PrintInvoice();

  std::cout << "Press any key to continue" << std::endl;
  std::cin.get();

  return 0;
} 
```

# delphi - 如何使用 TJvAppIniFileStorage 在 INI 文件中添加新部分

> ID：15334780
> 
> 赞同：1
> 
> 时间：2013-03-11T09:14:24.067
> 
> 标签：delphi, delphi-xe, dbexpress, jedi, jvcl

我有一个用 Delphi XE 编写的数据库应用程序项目，并使用 dbExpress 连接到 MySQL 数据库。我使用 JVCL 网格组件来显示数据集中的记录。如果我可以使用另一个 JVCL 组件来执行 FormStorage，它会更有效。

有人建议我使用[**`TJvFormStorage`**](http://wiki.delphi-jedi.org/wiki/JVCL_Help%3aTJvFormStorage)和[**`TJvAppIniFileStorage`**](http://wiki.delphi-jedi.org/wiki/JVCL_Help%3aTJvAppIniFileStorage)用于表单存储。我在这个项目上有很多表单，所以我需要在我的 INI 文件中添加新部分来存储表单大小值，但我不知道如何使用 TJvAppIniFileStorage 来做到这一点。

TJvAppIniFileStorage 只是提供 DefaultSection() 方法，这意味着它只能修改和写入一个声明为默认值的部分。

任何人都可以向我描述如何使用 JVCL 的 TJvAppIniFileStorage 添加新部分？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:13:54.363

使用源，卢克！;)
我的猜测是：它使用 Parent.Name 或 Parent.ClassName 来存储参数。
另一点：记住用户计算机上的几个显示器。几乎没有应用程序考虑到这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:23:14.973

[TJvFormStorage](http://wiki.delphi-jedi.org/wiki/JVCL_Help%3aTJvFormStorage)实例是否确定将有关此表单的数据放置在*抽象存储的哪个**路径*中，以及属性的值。*[`AppStoragePath`](http://wiki.delphi-jedi.org/wiki/JVCL_Help%3aTJvFormPlacement.AppStoragePath)*

 *您可以使用特殊值`'%FORM_NAME%'`在运行时自动确定该路径。对于组件所在的表单`'%FORM_NAME%'`的真实属性，或者如果它是一个框架，则将框架链的点列表更改为包含它的表单。`.Name`这样，您可以将同一类的不同实例保存到不同的*路径*中。

当您使用[TJvAppIniFileStorage](http://wiki.delphi-jedi.org/wiki/JVCL_Help%3aTJvAppIniFileStorage)实例作为支持将表单数据保存到 INI 文件的数据存储时，该*路径*等效于存储信息的*INI 部分。*

换句话说，如果您想将表单的信息存储在名为“MyForm”的部分中，请将该值设置为该表单中实例的`AppStoragePath`属性。`TjvFormStorage`*

# python - 在 Python 中将两个不同字典中的值相乘

> ID：15334783
> 
> 赞同：5
> 
> 时间：2013-03-11T09:14:52.047
> 
> 标签：python, matrix-multiplication, dictionary

我有两个单独的字典，其中包含我想将它们相乘的键和值。这些值应该仅乘以它们拥有的键。

IE

```
dict1 = {'a': 1, 'b': 2, 'c': 3}
dict2 = {'a': 15, 'b': 10, 'd': 17}

dict3 = dict.items() * dict.items()
print dict3

#### #dict3 should equal 
{'a': 15, 'b': 20} 
```

如果有人可以提供帮助，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-11T09:16:45.377

您可以使用[字典理解](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)：

```
>>> {k : v * dict2[k] for k, v in dict1.items() if k in dict2}
{'a': 15, 'b': 20} 
```

或者，在 2.7 之前的 Python 中，[`dict`](http://docs.python.org/2/library/stdtypes.html#dict)构造函数与[生成器表达式](http://docs.python.org/2/reference/expressions.html#grammar-token-generator_expression)相结合：

```
>>> dict((k, v * dict2[k]) for k, v in dict1.items() if k in dict2)
{'a': 15, 'b': 20} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:20:52.110

```
dict1 = {'a': 1, 'b': 2, 'c': 3}
dict2 = {'a': 15, 'b': 10, 'd': 17}

def dict_mul(d1, d2):
    d3 = dict()
    for k in d1:
        if k in d2:
            d3[k] = d1[k] * d2[k]
    return d3

print dict_mul(dict1, dict2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:21:50.560

从我的手机上，很难输入代码。这应该可以解决问题：

```
for key, value in dict1.iteritems():
    if key in dict2:
         dict3[key] = int(dict1[key]) * int(dict2[key]) 
```

# tesseract - 将 Tesseract-OCR 结果与 .uzn 区域匹配

> ID：15334796
> 
> 赞同：1
> 
> 时间：2013-03-11T09:15:38.963
> 
> 标签：tesseract

使用 .uzn 文件指定区域时，有没有办法将文本输出与文本来自的 .uzn 区域匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:44:03.843

我找到了一种方法，方法是获取每个字符的边界框，并使用该信息查看每个字符所属的区域。

```
// Load the .box file output by Tesseract-OCR, and match each bounding box
// to a character from the text. This is not trivial, because whitespaces
// are present in the text from the .txt, but are missing from the .box 
// file.
std::vector<RECT> loadBoxFile(const wchar_t *fileName, const std::wstring &text, int imageHeight)
{
    // Open file.
    std::ifstream st(fileName);
    if (!st.is_open())
        throw std::runtime_error("Could not open .box file.");

    std::string line;
    std::string symbolAscii;
    std::wstring symbol;
    RECT r = { -1, -1, -1, -1 };
    std::vector<RECT> ret;
    ret.resize(text.size(), r);
    size_t textPos = 0;
    while (std::getline(st, line)) {
        // Parse a line.
        std::istringstream iss(line);
        if (!(iss >> symbolAscii >> r.left >> r.top >> r.right >> r.bottom))
            throw std::runtime_error("Could not parse .box file line.");
        symbol = utf8to16(symbolAscii.c_str());

        // We don't try to get the bounding box for '~', because sometimes
        // there is a '~' in .box file that is not there in .txt file. It's
        // a bug in Tesseract-OCR as far as I know. This is a workaround 
        // for that case.
        if (L"~" == symbol)
            continue;

        // Now match the symbol for that line to a symbol in the .txt file.
        textPos = text.find(symbol, textPos);

        // If we couldn't match it then fail.
        if (text.npos == textPos)
            throw std::runtime_error(std::string() + "Could not match symbol \"" + symbolAscii + "\" from .box file to .txt file.");

        // Write the bounding box in the array, at index matching the symbol
        // in the .txt file.
        r.bottom = imageHeight - r.bottom;
        r.top = imageHeight - r.top;
        for (int ii = 0; ii < symbol.size(); ii++)
            ret[textPos + ii] = r;

        // Now increment textPos() so we start searching after the last
        // symbol of the currently found symbol.
        textPos += symbol.size();
    }
    return ret;
} 
```

# wpf - 在 WPF 的 ListView 中过滤集合

> ID：15334799
> 
> 赞同：4
> 
> 时间：2013-03-11T09:15:48.047
> 
> 标签：wpf, entity-framework, listview, mvvm

我正在创建一个 WPF 应用程序，该应用程序允许用户输入有关其员工、使用`Entity Framework`、CRUD 操作和 MVVM 的一些详细信息。

到目前为止，我有两个`ListViews`. 一个包含员工姓名列表 (listview1)，而另一个 (listview2) 列出了他们的详细信息，例如出生日期、地址等。下面的图片将让您更好地了解我正在创建的内容；

![列表显示](../Images/01de88b3dd6820ea4de208b22bbc079e.png)

当您从 listbox1 中选择特定名称时，我正在使用 a`CollectionViewSoruce`来过滤 listview2 上的结果。到目前为止，我能够做到这一点，但是当我添加或删除员工时，它会引发异常；

```
 An unhandled exception of type 'System.StackOverflowException' occurred in *.UI.exe 
```

以下是可能有帮助的代码片段

视图模型：

```
 private EmployeeListViewModel()
        : base("")
    {
        EmployeeList = new ObservableCollection<EmployeeViewModel>(GetEmployees());
        this._employeeCol = new ListCollectionView(this.employeeList); 
    }

    private ListCollectionView _employeeCol;
    public ICollectionView EmployeeCollection
    {
        get { return this._employeeCol; }
    }

    private ObservableCollection<EmployeeViewModel> employeeList;
    public ObservableCollection<EmployeeViewModel> EmployeeList
    {
        get { return employeeList; }
        set
        {
            employeeList = value;
            OnPropertyChanged("EmployeeList");
        }
    }

    private EmployeeViewModel selectedEmployee = null;
    public EmployeeViewModel SelectedEmployee
    {
        get
        {
            return selectedEmployee;
        }
        set
        {
            selectedEmployee = value;
            OnPropertyChanged("SelectedEmployee");
            EmployeeCollection.Filter = new Predicate<object>(o => SelectedEmployee != null && o != null && ((EmployeeViewModel)o).EmployeeID == SelectedEmployee.EmployeeID);
        }
    }

    internal ObservableCollection<EmployeeViewModel> GetEmployees()
    {
        if (employeeList == null)
            employeeList = new ObservableCollection<EmployeeViewModel>();
        employeeList.Clear();

        foreach (DataObjects.Employee i in new EmployeeRepository().GetAllEmployees())
        {
            EmployeeViewModel c = new EmployeeViewModel(i);
            employeeList.Add(c);
        }
        return employeeList;
    } 
```

ListView2 - 员工列表视图；

```
 <ListView Name="lsvEmpoyeeList" Height="170" Width="700"
                  ScrollViewer.VerticalScrollBarVisibility="Visible" 
                  ScrollViewer.HorizontalScrollBarVisibility="Visible" 
                  HorizontalAlignment="Center"
                  IsSynchronizedWithCurrentItem="True"
                  ItemsSource="{Binding EmployeeCollection}"
                  SelectedItem="{Binding SelectedEmployee}">
                    <ListView.View>
                      <GridView>
                        <GridViewColumn Header="Position" DisplayMemberBinding="{Binding Position}" Width="100" />
                        <GridViewColumn Header="DateOfBirth" DisplayMemberBinding="{Binding DateOfBirth, StringFormat={}\{0:dd/MM/yyyy\}}" Width="100" />
                     </GridView>
                    </ListView.View>
                </ListView> 
```

ListView1 - EmployeeSetUpView；

```
 <ListView Height="380" HorizontalAlignment="Left" Name="lsNames" VerticalAlignment="Top" Width="170" 
             ScrollViewer.VerticalScrollBarVisibility="Visible" 
             ScrollViewer.HorizontalScrollBarVisibility="Visible" 
             SelectedItem="{Binding SelectedEmployee}" 
             ItemsSource="{Binding EmployeeList}" Grid.RowSpan="2" Grid.Row="1">

        <ListView.View>
            <GridView>
                <GridViewColumn Header="FirstName" DisplayMemberBinding="{Binding FirstName}" Width="80" />
                <GridViewColumn Header="Surname" DisplayMemberBinding="{Binding Surname}" Width="80" />
            </GridView>
        </ListView.View>
    </ListView>
   <ContentControl Grid.Column="1" Grid.Row="1" HorizontalAlignment="Center"
                    Content="{Binding}" ContentTemplate="{StaticResource EmployeeListView}" /> 
```

如您所见，我已将过滤器放在`setaccessor`. 我将它放在构造函数中，但似乎发生的情况是 ListView2 上没有出现任何细节。

此外，如果我从 listview2 而不是从 listview1 中选择一行，它也会产生`StackOverFlowException`我不确定为什么的。

任何帮助将不胜感激或建议。另外，很抱歉这个大问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:21:01.870

我不认为 UI 知道这`EmployeeCollection`已经改变了

应用过滤器后，尝试在setter 中添加`PropertyChanged`事件。`EmployeeCollection``SelectedEmployee`

```
public EmployeeViewModel SelectedEmployee
{
    get { return selectedEmployee;}
    set
    {
        selectedEmployee = value;
        OnPropertyChanged("SelectedEmployee");
        EmployeeCollection.Filter = new Predicate<object>(o => SelectedEmployee != null && o != null && ((EmployeeViewModel)o).EmployeeID == SelectedEmployee.EmployeeID);

        // EmployeeCollection view has changed, Notify UI
        OnPropertyChanged("EmployeeCollection");
    }
} 
```

至于`StackOverflowException`我认为这是因为两者`ListView`都有一个`TwoWay`绑定`SelectedEmployee`，所以当一个 ListView1 更改 SelectedItem 时，它会导致 ListView2 更新其选定的项目，该项目更新 ListView1 等等，依此类推。

`SelectedEmployee`尝试在 ListView2 上将绑定设置为 OneWay

> SelectedItem="{绑定 SelectedEmployee, Mode=OneWay}">

# php - 检查字符串是否有来自 PHP 中另一个字符串的任何字符

> ID：15334808
> 
> 赞同：0
> 
> 时间：2013-03-11T09:16:13.747
> 
> 标签：php, string

我想确保我的用户密码至少包含一个、az、一个 AZ、一个 0-9 和一个特殊字符。

我认为最好的方法是设置这样的变量：

```
$lower_list = 'abcdefghijklmnopqrstuvwxyz';
$upper_list = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
$numbers_list = '0123456789';
$special_list = '!"£$%^&*(){}[]=-`¬¦\|/?.>,<#~\'@;:*-+'; 
```

我需要什么功能？或者有更好的方法吗？我知道我可以使用 preg_match 但我不知道如何编写正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:27:20.243

也许这可以帮助：

```
$pattern = "/^.*(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*\W).*$/"; 
```

# itext - iText Java 库

> ID：15334811
> 
> 赞同：-1
> 
> 时间：2013-03-11T09:16:27.077
> 
> 标签：itext

**我需要使用 iText Java 库将数据从我的网格下载到 PDf 中。任何人请让我知道如何做到这一点。它也应该有页码。**

我们可能也有图表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:50:15.010

您必须阅读[iText in Action](http://itextpdf.com/book/toc.php)一书，此[示例](http://itextpdf.com/examples/iia.php?id=118)将帮助您解决页码问题。

# php - 数据库搜索 - 单个 AJAX 查询 + Javascript 过滤器

> ID：15334813
> 
> 赞同：2
> 
> 时间：2013-03-11T09:16:28.240
> 
> 标签：php, javascript, mysql, ajax

我一直在寻找在我的 Web 应用程序上实现即时文本搜索的不同方法；目前它使用带有通配符的非常基本的 SQL LIKE 查询。

我已经研究了许多实现搜索的方法，但我从未见过有人建议执行以下操作：

1.  当用户键入时，当查询达到 4 或 5 个字符时，执行数据库搜索。

2.  向用户显示结果，当他们继续输入时，只需使用 Javascript 过滤结果，因此不需要更多的数据库调用。

这样每次搜索只会有一个数据库调用，如果用户打错字，他们可以退格，Javascript 会负责显示正确的结果。

这种方法有什么缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:40:13.880

这在理论上似乎可行，但我个人更喜欢在搜索之前按 Enter 或等待 500 毫秒不活动。

可能导致额外数据库查询的一件事是用户是否在给定的时间间隔内退格（在您的情况下为 4 个字符）。

但我认为真正的缺点是额外的 JS 编码 + 仍然需要 PHP 编码。

# java - 在年轻一代 GC 中幸存下来的对象的百分比？

> ID：15334815
> 
> 赞同：2
> 
> 时间：2013-03-11T09:16:41.727
> 
> 标签：java, garbage-collection, performance

我正在为我的 java 应用程序微调我的内存参数。我正计划将我的伊甸园空间大小减少到最佳值。

我想知道在年轻一代 GC 周期中幸存下来并被提升为终身代的对象（在年轻一代中创建）的百分比。你能推荐一个可以为我做这件事的工具吗？

我的假设是，如果目前，假设我的年轻一代大小是 x，并且在年轻一代周期中幸存的对象的百分比是 y，如果我将年轻一代减少 5 GB 到 x-5，并且如果幸存的对象百分比年轻一代的周期仍然接近 y，我可以安全地将年轻一代的大小减少到 x-5。

如果您对此有任何意见，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:16:56.180

Sizing **Eden Space**:

*   you need to compute **Allocation Rate** (see [Advanced JVM Tuning](https://oracleus.activeevents.com/connect/sessionDetail.ww?SESSION_ID=7236)) to determine the size of the your Eden Space.
*   also, Total **Young Generation** `-Xmn` should be from 1x to 1.5x of OldGen space occupancy after a full GC (as noted in [Java Performance](https://rads.stackoverflow.com/amzn/click/com/0137142528)).

Sizing the **Survivor Spaces**:

*   you need to be watching **Promotion Rate** (again see [Advanced JVM Tuning](https://oracleus.activeevents.com/connect/sessionDetail.ww?SESSION_ID=7236)) so you do not make the FullGC too frequent by decreasing the Survivor/Eden space,
*   `-XX:+PrintTenuringDistribution` is essential, this will show you the **Tenuring Ages**,
*   `-XX:SurvivorRatio=`, `-XX:TargetSurvivorRatio=` and `-XXMaxTenuringThreshold=` will be needed to actually tune the Survivor Sizes.
*   See the [Request for documentation of -XX:+PrintTenuringDistribution output](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6453675) for more info.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:41:13.410

我最近一直在做测试来弄清楚这一点。我将[jstat](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstat.html)与 -gc 参数一起使用，并在其输出上使用脚本来获取数字。

通常，每次在 Eden 上进行垃圾收集时，该脚本都会遍历输出并对 Eden 容量 (EC) 求和。最后减去最初使用的伊甸园 (EU) 并在末尾添加 EU。对于 Tenured/Old 空间也是如此。然后存在于 Tenured 上的对象的百分比是使用的总 Tenured Generation Space 除以使用的总 Eden Space。

它需要一些编码，但如果您以后需要进行此类分析，则可以轻松重用。请记住，在使用 jstat 时，您需要一个小于次要垃圾收集之间的时间的间隔才能正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T13:47:23.290

我喜欢 jClarity，但它是一个商业工具，但我相信他们确实有试用期。还有一些开源项目，例如[https://code.google.com/p/gclogviewer/](https://code.google.com/p/gclogviewer/)

为了让这些 gc 日志查看器正常工作，您需要一些 GC 日志来指向它们。启动时从命令行将以下符文传递给您的 JVM。PrintTenuringDistribution 是您需要告诉您有关任期过程的关键部分。

```
-Xloggc:gc.log 
-XX:+PrintGCDetails
-XX:+PrintTenuringDistribution 
```

# java - Eclipse IDE - “大纲”功能的源代码

> ID：15334817
> 
> 赞同：1
> 
> 时间：2013-03-11T09:16:44.177
> 
> 标签：java, eclipse

我实际上正在为一个工具工作，它计算类中的方法和 if 语句的数量。目的是估计要编写的测试用例的数量。

我注意到 Eclipse 大纲框有一些有趣的信息，如果能获得生成大纲信息的代码，那就太好了。

![Eclipse 大纲视图](../Images/2e2d8e7fc2a0838c1a2396d62bc20e2e.png)

我已经浏览过 Eclipse Git 站点，但我是初学者，并且有很多包，谁能告诉我在哪里可以找到大纲视图的源代码，或者指出一个好的方向？

最好的祝福。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:20:55.073

下载包含 Eclipse 源代码的 Eclipse Classic。它还允许您使用 plugin-spy 嗅探 Eclipse 正在使用哪些包。然后，您可以导入特定包并在其中设置调试点，以查看发生特定事件时正在执行的源。

以下文章提供了有关上述步骤的很好的教程： [Eclipse 源代码教程](http://www.vogella.com/articles/EclipseCodeAccess/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:34:34.597

请参阅[这篇文章](http://www.vogella.com/articles/EclipseJDT/article.html)，了解如何从插件访问 Java 模型。[IJavaProject](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/IJavaProject.html)是相关的 API。

# android - 将两个数据库列的值分配给游标？

> ID：15334820
> 
> 赞同：0
> 
> 时间：2013-03-11T09:16:48.710
> 
> 标签：android, sqlite, android-cursor

我有一个从数据库返回 2 组列的查询，我想知道如何将这些列分配给光标，然后使用它们进行进一步处理。

那是我的查询：

```
 public  List<String> getAllCapabilities1(String myRub)             
                {

                    List<String> Caps = new ArrayList<String>();

                    // Select All Query
                    String selectQuery = "SELECT Cap_Name, Cap_ID FROM capability where Rub_ID = '"+myRub+"'";

                    SQLiteDatabase database = this.dbOpenHelper.getReadableDatabase();

                    Cursor cursor = database.rawQuery(selectQuery, null);
                    // looping through all rows and adding to list
                    if (cursor.moveToFirst()) 
                    {
                        do 
                        {
                          Caps.add(cursor.getString(0));
                        } 
                        while (cursor.moveToNext());
                    } 
```

此查询返回：

```
Cap_Name    Cap_ID
Cap 1         1
Cap 2         2   
Cap 3         3 
```

使用普通光标，我可以很容易地处理一列，但我需要知道如何一次分配两列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:26:02.850

Android Cursor 是 SELECT 查询的 ResultSet，它可以包含任意数量的列。

每列值可以得到：

```
Cursor c = db.rawQuery("SELECT * FROM TABLE_NAME", null);

while(c.moveToNext()) {
    Log.d("Column1", c.getString(c.getColumnIndex("Column1")));
    Log.d("Column2", c.getString(c.getColumnIndex("Column2")));
} 
```

对于您的问题，使用属性 CapId 和 CapName 创建一个自定义类 CapDetails。

将您的方法声明更改为：

```
 public  List<CapDetails> getAllCapabilities1(String myRub) 
```

并将声明上限更改为 CapDetails 列表而不是字符串列表。

在游标循环内：

```
 while (cursor.moveToNext()) 
                {
                   CapDetails capDetails = new CapDetails();

                   // Assign each column value to respective capDetails attribute. then,
                   caps.add(capDetails);
                } 
```

# javascript - 从二进制字符串在 HTML 5 画布上添加绘图图像时质量损失

> ID：15334821
> 
> 赞同：3
> 
> 时间：2013-03-11T09:16:49.927
> 
> 标签：javascript, html, canvas, html5-canvas

我正在尝试将二进制字符串中的图像绘制到画布上。

```
 var reader = new FileReader();
     //reader.readAsDataURL(file);
     reader.readAsBinaryString(file);
     reader.onload = function(event){
         var d = $(thisObj.CreateIndoorFormDivControlName).dialog();
         var canvas =document.getElementById('canvasfloorLayout');
        var cxt=canvas.getContext("2d");
         var img=new Image();
            img.onload = function() {
                cxt.drawImage(img, 0, 0,canvas.width,canvas.height);
            }
            img.src = "data:image/jpeg;base64,"+window.btoa(reader.result); 
```

我正在使用上面的代码，但问题是图像大小正在缩小到画布大小，并且质量像任何东西一样下降。我已经尝试过

```
cxt.drawImage(img, 0, 0,img.width,img.height); 
```

但是图像被裁剪。我不想使用 reader.readAsDataURL，因为我需要将二进制文件发布到服务器。我的要求是显示完整的图像并在其上画线。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:25:07.847

```
canvas.width  = img.width;
canvas.height = img.height;

ctx.drawImage(img, 0, 0, canvas.width, canvas.height); 
```

...如果您以画布的原始分辨率绘制图像，那么当图像被缩放时，它显然会失去质量。

...如果您以图像的原始分辨率绘制图像，但画布没有改变大小，那么您最终会得到部分图像或部分填充的画布。

因此，如果您不想要这些，则将画布的尺寸设置为与图像的尺寸相匹配，您将拥有一个与数据图像的分辨率相匹配的画布绘制的图像。

* * *

**编辑**

在两者之间添加一个代理示例。

```
var img = new Image(),
    canvas = document.createElement("canvas"),
    context = canvas.getContext("2d"), 
    // ......etc

    dimensions = {
        max_height : 800,
        max_width  : 600,
        width  : 800, // this will change
        height : 600, // this will change
        largest_property : function () {
            return this.height > this.width ? "height" : "width";
        },
        read_dimensions : function (img) {
            this.width = img.width;
            this.height = img.height;
            return this;
        },
        scaling_factor : function (original, computed) {
            return computed / original;
        },
        scale_to_fit : function () {
            var x_factor = this.scaling_factor(this.width,  this.max_width),
                y_factor = this.scaling_factor(this.height, this.max_height),

                largest_factor = Math.min(x_factor, y_factor);

            this.width  *= largest_factor;
            this.height *= largest_factor;
        }
    };

dimensions.read_dimensions(img).scale_to_fit();

canvas.width  = dimensions.width;
canvas.height = dimensions.height;
context.drawImage(img, 0, 0, dimensions.width, dimensions.height); 
```

# c# - 从排序列表 C# 中的下一个和上一个元素中检索值

> ID：15334823
> 
> 赞同：7
> 
> 时间：2013-03-11T09:16:57.250
> 
> 标签：c#

我有一个排序列表，它将传入两个元素并比较两者。C# 中的 SortedList 类中是否有一个函数可以执行下一个和上一个？我在 .Skip 方面得到了一些帮助，但由于键是可变的，那将如何工作？我需要做的就是获取第一个元素和第二个元素，然后跳到第三个和第四个、第五个和第六个等。我希望它像 LinkedList 的“.next.next”一样简单。

```
 double velocity = positionList.Values.Skip(1); 
```

编辑： positionList 是类型

```
 <double, HandCoordinate>
   HandCoordinate = {double, double, double} 
```

这有帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:16:59.933

SortedList 类继承了[IEnumerator](http://msdn.microsoft.com/ru-ru/library/system.collections.ienumerator.aspx)，因此您可以使用它：

```
SortedList list = ...
var listEnumerator = ((IEnumerable)list).GetEnumerator();
Pair<MyType> pair = null
do
{
    pair = Pair.Next<MyType>(listEnumerator);
    ...
}
while(pair != null) 
```

...

```
class Pair<T>
{
    public T First {get; set;}
    public T Second {get; set;}

    public static Pair<T> Next<T>(IEnumerator enumerator)
    {
        var first = enumerator.Current;
        if(enumerator.MoveNext())
        {
           return new Pair<T>
               {
                   First = (T)first,
                   Second = (T)enumerator.Current,
               }
        }
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:39:38.563

这个问题有点不清楚。我假设您需要从列表中获取成对的东西？

编写一个扩展方法相当容易，该方法将显示来自 IEnumerable 的一系列项目对：

```
using System;
using System.Collections.Generic;

namespace Demo
{
    internal static class Program
    {
        public static void Main()
        {
            double[] test = new double[] {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};

            foreach (var pair in test.AsPairs()) // This is how you use it.
            {
                Console.WriteLine("({0}, {1})", pair.Item1, pair.Item2);
                // Or simply: Console.WriteLine(pair);
            }
        }
    }

    public static class EnumerableExt
    {
        public static IEnumerable<Tuple<T, T>> AsPairs<T>(this IEnumerable<T> sequence)
        {
            bool isFirst = true;
            T first = default(T);

            foreach (var item in sequence)
            {
                if (isFirst)
                {
                    first = item;
                    isFirst = false;
                }
                else
                {
                    isFirst = true;
                    yield return new Tuple<T, T>(first, item);
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:20:56.410

```
 List<int> ints = new List<int>();
  ints.Add(1);
  ints.Add(2);
  ints.Add(3);
  ints.Add(4);
  for (int i = 0; i < ints.Count; i += 2)
  {
    var pair = ints.Skip(i).Take(2);
    var first = pair.First();
    var last = pair.Last();
  } 
```

注意：这应该有效，与理论上的类型无关。除非类型是完全不同的格式。

没有`Skip()`.

```
var pair = new { First = ints[i], Second = ints[i += 1] }; 
```

# apache - Firefox 升级后“OCSP 服务器没有证书状态”

> ID：15334826
> 
> 赞同：3
> 
> 时间：2013-03-11T09:17:09.917
> 
> 标签：apache, firefox, ssl, ocsp

我的网站有问题：[https](https://shop.angst-pfister.ch/) : //shop.angst-pfister.ch/ 使用 Firefox 19.0 一切正常，但升级到 19.0.2 后我收到以下错误消息：

> OCSP 服务器没有证书的状态。（错误代码：sec_error_ocsp_unknown_cert）

我能做些什么来解决这个问题？该应用程序在 JBoss 5.0 和 Apache 2.2.16 上运行

到目前为止，我已经找到了这个： [https](https://httpd.apache.org/docs/trunk/mod/mod_ssl.html#sslocsprespondertimeout) ://httpd.apache.org/docs/trunk/mod/mod_ssl.html#sslocsprespondertimeout 但这仅适用于 Apache 2.3 或更高版本...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T11:04:26.177

这是属于 CA 的 OCSP 服务器或 Firefox 的问题。由于服务器不处理 OCSP（这是 CA 的工作），除了可能联系 CA 寻求帮助之外，您对此无能为力。

# python - 未应用 Django 1.4 静态文件 css

> ID：15334828
> 
> 赞同：0
> 
> 时间：2013-03-11T09:17:11.970
> 
> 标签：python, django, django-staticfiles

最近几天我一直在研究如何将 css 文件包含到 Django 模板中。我仍然没有成功，所以希望有人可以帮助我。我有以下设置：

--settings.py--

```
MEDIA_ROOT = '' 
MEDIA_URL = ''
STATIC_ROOT = ''
STATIC_URL = '/static/' 
```

我也没有在 STATICFILES_DIRS() 中设置任何内容。

--urls.py--

```
urlpatterns = patterns('', (r'^$', 'reviewsite.views.my_homepage_view'),)
urlpatterns += staticfiles_urlpatterns() 
```

--views.py--

```
def my_homepage_view(request):
return render_to_response('test.html', context_instance=RequestContext(request)) 
```

--test.html 模板--

```
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/style.css"/> 
```

--源代码本地主机--

```
<link rel="stylesheet" type="text/css" href="/static/css/style.css"/> 
```

根据 Django 文档，似乎我已经正确设置了所有内容，但是仍然没有应用 css 样式。静态文件夹位于我的其他应用程序所在的正确位置（C:reviews/reviewsite/static）。即使我在 test.html 模板中硬编码 style.css 位置（C:reviews/reviewsite/static/css/style.css），也不会应用 css 样式。我检查了 style.css，它在没有 Django 的情况下也可以工作。知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:28:20.153

大家，感谢您的帮助，并为迟到的回复感到抱歉。我尝试了你的建议，但不幸的是它没有奏效。然而，经过一段时间的尝试，我现在开始工作了。这对我有用：

--settings.py--

```
MEDIA_ROOT = ''
MEDIA_ROOT = ''
STATIC_ROOT = os.path.join(PROJECT_ROOT, 'static')
STATIC_URL = 'http://localhost:8000/static/' 
```

--urls.py--

```
urlpatterns = patterns('', (r'^$', 'reviewsite.views.my_homepage_view'),)
urlpatterns += patterns('',
url(r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT }), ) 
```

我现在已将 css 文件放在我的应用程序目录中的静态文件夹中。在模板中，我使用的是 {{ STATIC_URL }}/style.css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:26:19.293

这就是您在静态文件中调用文件的方式

```
{% static %}

<link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}"/> 
```

**设置.py**

```
import os
import sys

PROJECT_ROOT = os.path.join(os.path.dirname(__file__), '..')
SITE_ROOT = PROJECT_ROOT

MEDIA_ROOT = os.path.join(SITE_ROOT, 'media') 
MEDIA_URL = '/media/'
STATIC_ROOT = os.path.join(SITE_ROOT, 'static')
STATIC_URL = '/static/'

STATICFILES_DIRS = (
    //create staticfiles folder
    os.path.join(SITE_ROOT, 'staticfiles'),
) 
```

# vbscript - VBScript 和 WMI 远程映射驱动器

> ID：15334829
> 
> 赞同：0
> 
> 时间：2013-03-11T09:17:15.950
> 
> 标签：vbscript, wmi, network-drive

我一直在玩\谷歌搜索 VBscript 以远程映射共享网络文件夹的驱动器？

你能用 wmi 或普通的 vbscript 等来做吗？

# vb.net - 调用 Web 服务函数从 Windows 窗体返回列表（字符串）

> ID：15334830
> 
> 赞同：3
> 
> 时间：2013-03-11T09:17:22.017
> 
> 标签：vb.net, winforms, web-services, list, asmx

我有一个具有多种功能的 Web 服务，这些功能与 SQL Server 2012 数据库一起工作。我的目标是拥有一个使用此 Web 服务功能来选择和插入数据库的 Windows 服务。

当前的 Web 服务有不同的函数类型，它们返回布尔值、字符串或字符串列表。一切正常，除非调用从 Windows 窗体返回字符串 getGames () 列表的函数。（Windows 窗体作为 Windows 服务的副本）

错误：“对象的一维数组”类型的值无法转换为“System.collections.generic.list(Of String)”

从 Windows 窗体项目中，我添加了一个 Web 服务 - 添加服务引用 > 高级 > 添加 Web 引用。我还是一名学生，所以我没有太多的网络服务经验。Windows 服务是在 Framework 3.5 上创建的，而 Windows 窗体是在 Framework 4.5 上创建的（不确定这是否有所不同）错误：

```
listOfGames = ws.getGames("username123", "password123") '** Error Here 
```

这是网络服务功能

```
<WebMethod()> _
Public Function getGames(ByVal username As String, ByVal password As String) As List(Of String)
    Dim m As DBMember = DBMember.verifyUsername(username, password)
    If m IsNot Nothing Then
        Dim gList As New List(Of String)
        gList = DBGame.selectAllGames()
        Return gList
    End If
    Return Nothing
End Function 
```

以下是我调用 Web 服务函数的方式：

```
 Private Sub onStart()
    Dim ws As localhost.Service1 = New localhost.Service1
    listOfGames = ws.getGames("username123", "password123") '** Error Here
End Sub 
```

这是查询：

```
 Shared Function selectAllGames() As List(Of String)
    Dim cmd As New SqlCommand
    cmd.CommandText = "SELECT g_Exe FROM Game"
    cmd.Connection = DB.Conn()

    Dim rdr As SqlDataReader = cmd.ExecuteReader()
    Dim gList As New List(Of String)

    If rdr.HasRows Then
        While rdr.Read
            gList.Add(rdr.Item("g_Exe").ToString())
        End While
    End If

    DB.CloseDB()
    Return gList
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:22:32.193

发生这种情况的原因是您的 Web 服务没有返回实际的 .NET`List`对象，它只是使用列表的标准 SOAP 格式返回列表的 XML 表示。因此，用于在客户端返回数据的类型完全由客户端上的代码决定。

添加对 Web 服务的引用时，Visual Studio 会自动为您生成代理类。代理类是在服务器端定义的 Web 方法的客户端副本。但是，对于列表，客户端无法知道 Web 方法返回了哪种特定的 .NET 类型的列表。据它所知，Web 服务可能根本就不是用 .NET 语言编写的。因此，它必须随意选择一种方式来表示代理类中的数据。代理类中使用的默认列表类型是简单数组。

当您添加对 Web 服务的引用时，如果您将其添加为*Web 引用*，则不会为您提供指定用于列表的类型的选项。 *Web References*总是使用数组作为列表。但是，如果您将引用添加为*Service Reference*，那么您可以更改将在代理类中用于表示列表的类型。为此，在添加参考时，单击*高级*按钮。然后，在*Data Type*部分将*Collection 类型*从更改`System.Array`为`System.Collections.Generic.List`。

如果您坚持使用数组离开代理类，您仍然可以通过简单地将数组转换为 a 来使其工作`List`，如下所示：

```
Dim listOfGames As New List(Of String)()
listOfGames.AddRange(ws.getGames("username123", "password123")) 
```

# c++ - 调用派生类的虚方法会导致段错误

> ID：15334831
> 
> 赞同：0
> 
> 时间：2013-03-11T09:17:23.327
> 
> 标签：c++, pointers, derived-class

我正在尝试制作一个国际象棋程序，但我希望能够在其中实现不同的 AI。因此，我创建了一个抽象的 AIgeneric 类和 AIgeneric 的派生类 AIrandom。然后在我的 chessAI 界面中，我创建了一个 AI 列表，并尝试调用它们的 getNextMove 函数并遇到段错误。代码如下：

```
class AIgeneric {
    public:
        virtual int getNextMove(int*, const int &) = 0;
}

class AIrandom : public AIgeneric {
    public:
        AIrandom();
        virtual int getNextMove(int*, const int &);
}

class chessAI {
    public:
        chessAI();
        ~chessAI();
        void setAI();
        int getNextMove(int*, const int &); 
    private:
        vector<AIgeneric*> AIlist;
        vector<string> names;
        int selectedAI;
};

chessAI::chessAI () {
    AIrandom randomAI;
    AIlist.push_back(&randomAI);
    names.push_back("Random AI");
    selectedAI = -1;
}

int chessAI::getNextMove(int * board, const int & color) {
    return AIlist[selectedAI]->getNextMove(board, color); //segfault on this line
} 
```

如果有人可以帮助我解决这个问题，那就太好了！

编辑：在调用 getNextMove 之前，我确实将 selectedAI 设置为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:19:08.833

你打电话`selectedAI = -1;`，然后`AIlist[selectedAI]->...`。`AIlist[-1]`除了未定义的行为之外，您还期望是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:19:18.397

在这段代码中：

```
chessAI::chessAI () {
    AIrandom randomAI;
    AIlist.push_back(&randomAI);
    names.push_back("Random AI");
    selectedAI = -1;
} 
```

您将指向局部变量的指针存储到向量中。构造函数返回后，该指针不再有效。

请记住，所有局部变量都存储在堆栈中，并且堆栈在其他函数中被重用。因此，当您在向量中使用指针时，它现在指向其他一些函数内存，而不是您声明的一个对象。

这可以通过三种方式解决：

1.  在堆上分配对象：

    ```
    AIlist.push_back(new AIRandom); 
    ```

2.  根本不使用指针。

3.  使用智能指针，例如[`std::unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:19:39.390

我希望这是因为`AIlist[selectedAI]`超出了界限。您可以通过将其替换为 来确认这一点`AIlist.at(selectedAI)`。请记住，此索引在构造函数之后立即为 -1...

# java - 为什么 Android AudioRecord 初始化失败？

> ID：15334833
> 
> 赞同：2
> 
> 时间：2013-03-11T09:17:29.303
> 
> 标签：java, android, eclipse, audio-recording, audiorecord

我使用以下教程制作了一个录音应用程序：

当我在我的测试设备（LG P970 Optimus Black）上启动它时，我收到一个错误代码：

```
 Error creating AudioRecord instance: initialization check failed.
 Error code -20 when initializing native AudioRecord object. 
```

我找到了一些“*解决方案*”，例如向 Manifest 添加`RECORD_AUDIO`权限并使用该`.release()`方法。但是所有这些东西都已经在源代码中了。

这个问题还有其他解决方案吗？会不会是设备？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-21T10:46:32.240

我已经像这样解决了这个错误。因为我们可以像这样调用 AudioRecors 对象。

```
private AudioRecord findAudioRecord() {
        // TODO Auto-generated method stub
           for (int rate : mSampleRates) {

               for (short audioFormat : new short[] { AudioFormat.ENCODING_PCM_8BIT, AudioFormat.ENCODING_PCM_16BIT }) {

                   for (short channelConfig : new short[] { AudioFormat.CHANNEL_IN_MONO, AudioFormat.CHANNEL_IN_STEREO }) {

                       try {

                           Log.d("AudiopRecording", "Attempting rate " + rate + "Hz, bits: " + audioFormat + ", channel: "

                                   + channelConfig);

                           int bufferSize = AudioRecord.getMinBufferSize(rate, channelConfig, audioFormat);

                           if (bufferSize != AudioRecord.ERROR_BAD_VALUE) {

                               // check if we can instantiate and have a success

                               AudioRecord recorder = new AudioRecord(AudioSource.DEFAULT, rate, channelConfig, audioFormat, bufferSize);

                               if (recorder.getState() == AudioRecord.STATE_INITIALIZED)

                                   return recorder;

                           }

                       } catch (Exception e) {

                           Log.e("AudiopRecording", rate + "Exception, keep trying.",e);

                       }

                   }

               }

           }

        return null;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-25T07:55:36.520

将 AudioRecord 中的音频源更改为默认值.....我能够通过使用来解决这个问题

```
MediaRecorder.AudioSource.DEFAULT 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-01T10:55:11.963

由于您在 AudioRecord 构造函数中指定的**缓冲区大小**，您会收到此错误。

bufferSizeInBytes 在录制期间写入音频数据的缓冲区的总大小（以字节为单位）。新的音频数据可以从这个缓冲区中以小于这个大小的块读取。请参阅 getMinBufferSize(int, int, int) 以确定成功创建 AudioRecord 实例所需的最小缓冲区大小。**使用小于 getMinBufferSize() 的值将导致初始化失败。**

**这就是为什么总是像这样使用 AudioRecord：**

```
 try {

       int bufferSize = AudioRecord.getMinBufferSize(rate, channelConfig, audioFormat);

       AudioRecord recorder = new AudioRecord(AudioSource.DEFAULT, rate, channelConfig, audioFormat, bufferSize);

                       if (recorder.getState() == AudioRecord.STATE_INITIALIZED){

                               return recorder;

                       }

       } catch (Exception e) {

       Log.i("AudioRecording", "Error in Audio Record");

       } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-29T11:03:57.927

这可能是因为您的 android 设备阻止了您的应用权限。转到您的 Android 设备的设置>权限>Your_App 并允许录制音频。这虽然为我解决了问题

# database - 从数据库流式传输视频

> ID：15334837
> 
> 赞同：1
> 
> 时间：2013-03-11T09:17:49.473
> 
> 标签：database, servlets, video, streaming, video.js

我有一个包含视频作为 blob 数据的表。我试图通过将 blob 中的字节流写入 http 响应并将 tat 作为标签中源的值来使用网页中的视频标签将其流式传输到浏览器中。我的代码如下：

```
 while ( rs2.next()) {

             out.println("<h4>" + rs2.getString("caption") + "</h4>");

             out.println("<video id=\"example_video\" class=\"video-js vjs-default-    skin\" controls preload=\"none\" width=\"640\" height=\"264\""+
                         "  data-setup=\"{}\">"+
"   <source src=\"displayvideo?title=\""+  rs2.getString("caption") + "type='video/mp4'      />"+

   " <track kind=\"captions\" src=\"captions.vtt\" srclang=\"en\" label=\"English\" />"+
"  </video>");

        } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T18:53:53.213

首先使用 html 作为视频代码，并使用常规视频文件测试您的 HTML+JS 上的所有内容。

然后在将提供视频的页面上工作，您可能需要模仿常规文件请求的标头，您可以通过执行这些请求来检查常规文件请求的标头是什么，并在 Firefox 上激活 firebug 或其他浏览器上的类似工具. 检查常规视频文件头和视频服务器页面是否与所需内容相同。

完成并开始工作后，您就可以开始处理具有您发布的代码功能的东西了。

如果您正在招聘，我可以编写您需要的代码，请告诉我。

PS忽略自由职业者的回答，因为你正在使用videojs，你的html代码没问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:36:32.163

我没有查看`<embed src="" height="200" width="200">`标签中的任何标签。

尝试参考此链接

[http://www.w3schools.com/html/html_videos.asp](http://www.w3schools.com/html/html_videos.asp)

以获得关于标签的完美帮助。

希望它有帮助！！！

# excel - Excel 在工作表中过滤并在用户表单列表框中填充过滤范围

> ID：15334838
> 
> 赞同：0
> 
> 时间：2013-03-11T09:17:49.573
> 
> 标签：excel, vba, listbox

我是 StackOverflow 和 Excel/VBA 的新手。首先我做了一些谷歌研究来帮助我解决我的问题，但没有一个很好的解释，我希望你们能提供帮助。

**我的问题：**

我有一个从 A3:V100 填充我的列表框的工作表范围。现在，我在我的工作表中使用带有自动过滤器的录制宏，并将这些宏添加到我的用户窗体中的按钮，但因为结果可能是第 5 行、第 35 行、第 40 行，我的范围不再正确。如何仅为过滤的行而不是整个数据行设置列表框范围。

**我当前的范围代码：**

```
 Sub populateListbox1()

With ListBox1

    .ColumnHeads = True
    .ColumnCount = 30
    .ColumnWidths = "30;30;50;50;60;50;50;50;50;50;50;50;50;0;0;0;0;0;0;0;50;50;0;0;0;0;0;0;0;0"
    .RowSource = Sheet1.Range("A6", Range("AD" & Rows.Count).End(xlUp)).Address
End With

End Sub 
```

**我在问：**

当我应用自动过滤器时，谁能给我一个正确的 rowSource 范围代码。还是有人有其他想法来过滤我的列表框？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T09:16:34.233

如果找到一种方法来做到这一点。

我使用“转到特殊”“仅可见单元格”我选择我的结果，将这些值复制到另一张表中。我将这些步骤记录为宏。

毕竟，我像其他任何列表框一样填充我的列表框。

# vb.net - 查找功能不起作用

> ID：15334841
> 
> 赞同：0
> 
> 时间：2013-03-11T09:17:55.343
> 
> 标签：vb.net, function

我一直遇到查找功能的问题。

涉及两张纸。基本上我想填写日期从 2011 年 1 月到 2012 年 12 月的主表。我试图在名为 export 的原始数据表中匹配这些日期，以便我可以检索这些日期的下一个值。

但是，似乎`cellFound`无法找到 for 的值。它不断给我应用程序定义或对象定义的错误。你能帮我解决这个问题吗？

**我的代码：**

```
Sub Rectangle2_Click()

Dim searchDate As Long, cellFound As Range, searchRange As Range
Dim i As Integer

Set searchRange = Worksheets("Export").Range("G77:G91")

For i = 2 To 25

searchDate = Worksheets("Main").Cells(2, i)

Set cellFound = searchRange.Find(What:=searchDate, LookIn:=xlValues, LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False, SearchFormat:=False)

Worksheets("Main").Cells(4, i) = cellFound

Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:33:54.667

您应该处理发现没有返回结果的可能性：

```
If cellFound Is Nothing Then
'handle error
    Debug.Print ("error")
Else
    Worksheets(2).Cells(4, i) = cellFound
End If 
```

究竟为什么没有我无法猜测的结果 - 请给我们一些示例数据。

# python - 如何将随机函数作为参数传递？

> ID：15334846
> 
> 赞同：8
> 
> 时间：2013-03-11T09:18:11.110
> 
> 标签：python, function, random, arguments

Python 非常灵活，我可以将函数用作列表的元素或其他函数的参数。例如：

```
x = [sin, cos]
y = s[0](3.14) # It returns sin(3.14) 
```

或者

```
def func(f1, f2):
   return f1(2.0) + f2(3.0) 
```

但是，我不清楚如何对随机函数做同样的事情。例如我想使用高斯分布：`[random.normalvariate(3.0, 2.0), random.normalvariate(1.0, 4.0)]`. 在这个例子中，我将得到一个包含两个元素的固定列表。但我想要得到的是一个包含随机元素的列表。在 python 中做这件事的好方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T09:23:03.677

尝试使用[`lambda`](http://docs.python.org/2/reference/expressions.html#lambda)以下功能：

```
[lambda: random.normalvariate(3.0, 2.0), lambda: random.normalvariate(1.0, 4.0)] 
```

你可以看到括号的区别。`sin`是一个函数，`sin(x)`是这个函数的返回值。由于您无法创建没有括号表示的函数`random.normalvariate(1.0, 4.0)`，因此您必须将其定义为 lambda 函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T09:23:46.797

使用[functools.partial](http://docs.python.org/2/library/functools.html#functools.partial)或`lambda`

这些基本相同：

```
[lambda: normalvariate(3, 2), ...]
# or
[partial(normalvariate, 3, 2), ...] 
```

它们都等价于：

```
def _function():
    return normalvariate(3, 2)

[_function, ...] 
```

`partial`更灵活，让您更好地控制创建`_function`并避免 lambda 语法混乱。

顺便说一句，Python 社区对 lambda 存在一些争议，但最终 Guido 承认[找到 lambda 表达式的更好替代方案是“不可能完成的任务”。](http://arstechnica.com/information-technology/2007/06/guido-van-rossum-comments-on-status-of-python-3-0/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-11T09:33:38.123

您应该使用来自 functools 的部分：

```
import functools
arg_sets = [(3.0, 2.0), (1.0, 4.0)]
myfuncs = [functools.partial(random.normalvariate, *args) for args in arg_sets]
myfuncs[0]() 
```

# iphone - 2 moreNavigationController 上的导航栏

> ID：15334847
> 
> 赞同：-1
> 
> 时间：2013-03-11T09:18:15.673
> 
> 标签：iphone, ios, uitabbarcontroller, uinavigationbar

当我点击 TabBarController 上的 moreNavigationController 时，屏幕上会显示 2 个导航栏。有人有线索吗？

项目文件链接-> [https://dl.dropbox.com/u/9507586/FubonInsuranceTest.zip](https://dl.dropbox.com/u/9507586/FubonInsuranceTest.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:24:43.540

在`viewWillAppear`moreNavigationController 类的函数中，添加以下代码行

```
[self.navigationController setNavigationBarHidden:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:33:37.737

做一件事 在你的 tabbar.m 类中添加这行代码。

```
 [morenavbar setHidden:YES]; 
```

在这个函数中

```
- (void)navigationController:(UINavigationController *)navigationController 
  willShowViewController:(UIViewController *)viewController 
                animated:(BOOL)animated 
```

# spring - Spring：会话范围 bean 的序列化

> ID：15334849
> 
> 赞同：3
> 
> 时间：2013-03-11T09:18:26.517
> 
> 标签：spring, serialization

我有一个范围会话的 Spring bean。此 bean 包含对另一个不可序列化的单例 bean 的引用。如果我想序列化会话范围的 bean，最好的方法是什么？

这里已经问过同样的问题：[Spring session-scoped beans (controllers) and references to services, in serialization](https://stackoverflow.com/questions/3180963/spring-session-scoped-beans-controllers-and-references-to-services-in-terms-o)

公认的答案是：

> [...]这个问题在 Spring 3.0 中通过提供不可序列化 bean 的代理得到解决，该代理从当前应用程序上下文中获取一个实例

据我了解链接视频中的演讲者应该“正常工作”。但就我而言，它没有！当我尝试序列化我的会话范围 bean 时，我得到一个`NotSerializableException`.

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-04T10:11:46.293

您需要*指示*Spring 创建该代理。在基于 XML 的配置中，通过`<aop:scoped-proxy/>`标记，在`component-scan`模式下通过注释：

```
@Scope(proxyMode = ScopedProxyMode.INTERFACES) 
```

在您的控制器类上。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-11T10:12:47.783

您可以将单例引用字段标记为`transient`。然后检查[如何在反序列化后执行方法](https://stackoverflow.com/questions/3343277/how-to-automatically-execute-a-method-after-deserialization)并从`ApplicationContext`. 另外，请提供堆栈跟踪。

附言

使用会话钝化不是一个好主意。

# google-maps - angularjs如何避免控制器中的动态html编译？

> ID：15334868
> 
> 赞同：2
> 
> 时间：2013-03-11T09:19:11.097
> 
> 标签：google-maps, angularjs

我正在使用谷歌地图 api 来显示一些信息窗口（谷歌地图气球窗口）。

```
var contentString = '<div id="content"><p>hello world</p></div>';
var infowindow = new google.maps.InfoWindow({
    content: contentString
});
//... add info window to google map object 
```

当您单击地图标记时，这将在气球中显示“Hello world”。（地图标记是地图上的一个图标，就像您习惯的红色大头针一样。

我希望 infoWindow 的内容是动态的，所以我将*contentString*设置为：

`"<div id='infoWindowContent' ngInclude='/Content/Static/MapPersonDetails.html'></div>";`

当用户单击地图标记时，它会插入到页面的 DOM 中。为了完成这项工作，我必须编译上面的行，当它被插入到页面的 DOM 中时。

我正在使用一个抽象地图使用的指令，例如：

```
 <div class="google-map" 
         markers="markersProperty"
         on-Info-Window-Dom-Ready="onInfoWindowDomReady()">
    </div> 
```

因此，当单击地图标记时，该指令将创建 infoWindow，订阅*inforWindow*的 domReadyEvent，显示 infoWindow，并将*domReadyEvent 冒泡*到页面控制器。

infoWindow 公开了一个我通过指令冒泡的*domReady*事件，我在我的页面控制器中执行以下操作：

```
 $scope.onInfoWindowDomReady = function () {
        $scope.$apply(function () {
            var element = document.getElementById("infoWindowContent");
            $compile(element)($scope);
        });
    }; 
```

**我遇到的问题是我不喜欢我在控制器中进行的 dom 操作。有没有其他方法可以做到这一点？我应该将编译放在指令中吗？**然后该指令将知道 infoWindow 内容是动态的并且必须进行编译，但并非所有信息窗口都如此。

要知道的重要一点是 infoWindow 内容也可以是 html 元素（与静态字符串相反），但我不知道这是否有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T02:48:31.507

使用 angular-ui 它变得像这样简单：

```
<div ng-controller="MapCtrl">
    <div ng-repeat="marker in myMarkers" ui-map-marker="myMarkers[$index]"
        ui-event="{'map-click': 'ClickOnMarker(marker)'}">
    </div>

    <div ui-map-info-window="myInfoWindow">
        <input type="text" ng-model="myText" required />
    </div>

    <div id="map_canvas" ui-map="myMap" class="map"
        ui-event="{'map-click': 'ClickMap($event)' }"
        ui-options="mapOptions">
    </div>
</div>

$scope.ClickOnMarker = function (marker) {
    $scope.myText = "Clicked on marker";
    $scope.myInfoWindow.open($scope.myMap, marker);    
};

$scope.ClickMap = function ($event) {
    var newMarker = new google.maps.Marker({
        map: $scope.myMap,
        position: $event.latLng,
        hasChanges: true,
        isSaved: false,
    });

    $scope.myMarkers.push(newMarker);
    $scope.myText = "Clicked on map";
    $scope.ClickOnMarker($scope.currentMarker);
}; 
```

希望能帮助到你！

# android - 如何确定一列是否来自游标对象的布尔值？

> ID：15334874
> 
> 赞同：3
> 
> 时间：2013-03-11T09:19:45.833
> 
> 标签：android, sqlite, cursor

我在游标对象中选择查询的结果。我在表中有一些布尔列。SQLite 中布尔类型的值是 0 或 1，具体取决于它们分别是 false 还是 true。也有 int 类型的列，其值可以为 0 或 1 或其他整数值。我想从光标返回列的值，

```
if column is of boolean type
   return true if value = 1
   return false if value = 0
else 
   return the same value 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:38:51.753

> 如何确定一列是否来自游标对象的布尔值？

所以起初，`SQLite`没有**布尔类型**，只有整数、字符串、浮点数、blob。所以我的建议只是测试 int 列的值并根据结果执行适当的操作。

```
Cursor c = db.rawQuery(query, whereArgs);
int value = 0;
String[] intColumnNames = {columns};
int index = 0;
if (c.moveToFirst()) {
   while (index < intColumnNames.length) {
      do {
         value = c.getInt(c.getColumnIndex(intColumnNames[index]));
         switch (value) {
            case 0:
               // do some action
            break;
            case 1:
               // do some action
            break;
            default:
               // do some action for other cases
            break;
         }
      } while(c.moveToNext());
      index++;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:55:46.123

因为我之前没有遇到过类似的问题所以我不能发布一个保证的答案。但是您的问题似乎真的很有趣，经过一番搜索后，我认为一种解决方案可能是一种选择..

在读取确定列的数据类型的数据之前的第一步。为此，以下链接可能会有所帮助

[https://stackoverflow.com/a/6298521/931982](https://stackoverflow.com/a/6298521/931982)

[https://stackoverflow.com/a/3106349/931982](https://stackoverflow.com/a/3106349/931982)

然后，如果您发现列类型为布尔类型，则遵循其他两个成员提供的任何解决方案。

注意这不是一个确定的答案，只是发表了我的想法。我会对此发表评论，但它太大而无法在评论中写:(

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T17:11:19.723

虽然 SQLite 确实没有 BOOLEAN 存储类型，但没有什么可以阻止您将 BOOLEAN 列定义为数据类型。它将被存储为 NUMERIC。您的应用程序可以使用 PRAGMA table_info( 来获取数据类型，并且只检查它是否为 BOOLEAN。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-11T09:23:00.593

试试这个

```
int columnNumber = 11;
while (cursor.moveToNext()) {
   if( cursor.getInt(columnNumber) > 0){
//true
}

} 
```

由于 sqlite 中没有布尔数据类型才能使用布尔值，因此您需要具有数据类型`INTEGER` `SQLite does not have a separate Boolean storage class. Instead, Boolean values are stored as integers 0 (false) and 1 (true).` [更多详细信息](http://www.sqlite.org/datatype3.html)

# css - Internet Explorer 吞下事件

> ID：15334876
> 
> 赞同：6
> 
> 时间：2013-03-11T09:19:50.780
> 
> 标签：css, internet-explorer, event-handling, z-index

我有一个 div 包含几个可点击、可拖动和可调整大小的元素。我还希望这些可移动元素消失在部分透明（背景）图像后面。除了 Internet Exploder，这一切都可以很好地工作。

我的代码（减少到产生问题的最低限度）如下所示：

```
<div id="container" style="z-index: 200; position: absolute">
    <div style="position:absolute; width: 20px; height: 80px; background-color: red; opacity: .2"></div>
    <div id="works">not works</div>
</div> 
```

我还在这里创建了一个小提琴：http: [//jsfiddle.net/ZUfp5/11/](http://jsfiddle.net/ZUfp5/11/)

正如您在控制台中看到的那样，直接单击元素将触发处理程序，但如果单击覆盖则不会。

事件不应该冒泡吗？

有什么办法可以让这个工作或互联网爆炸再次破坏它？

**更新：**

*我编辑了小提琴以使其与firefox一起使用，因此可以在其全部范围内解决问题*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:40:12.987

问题不在于事件冒泡。问题是您的叠加层隐藏了您的“无效图层”。[IE9 不支持非 SVG 元素的](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)[CSS`pointer-events`](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)。

当事件到达`#container`事件目标时 not `#works`，但您的叠加层和因此 jQuery 不会触发您的事件。

可以在这里描述一个解决方案：http: [//www.vinylfox.com/forwarding-mouse-events-through-layers/](http://www.vinylfox.com/forwarding-mouse-events-through-layers/)

本质上，他将事件绑定到叠加层，并通过以下方式处理它们：

1.  “隐藏覆盖”
2.  找出下面的元素
3.  将事件转发到下面的元素；

这是实现该示例的分叉小提琴。 [http://jsfiddle.net/QY69w/](http://jsfiddle.net/QY69w/)

如果您的事件例如“mousemove”等。也许有必要在 mousedown 上隐藏您的叠加层并仅在 mouseup 上显示它（而不是立即显示）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T09:47:33.533

[Roman](https://stackoverflow.com/users/913761/roman)的回答是正确的 - +1。您可以使用以下方法获得预期的行为：

```
position: relative; 
```

上`<div id="works">`。仅在 IE9 中测试过。

# c# - 如何从默认位置找到最近的向量？

> ID：15334878
> 
> 赞同：0
> 
> 时间：2013-03-11T09:19:56.930
> 
> 标签：c#, vector, directx

在我的 C# 项目中，我有一个 Vector3 数组。现在我想从相机位置找到最近的 Vector3。相机的位置也是一个 Vector3 对象。我怎么能做到这一点？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:32:04.263

我认为您可以将向量彼此相减以获得向量的长度（幅度）

```
Vector3 v1 = new Vector3(1,2,3);
Vector3 v2 = new Vector3(1,1,1);

Vector3 difference= new Vector3(v1.X - v2.X, v1.Y - v2.Y, v1.Z - v2.Z)

float distance = Math.Sqrt(
   Math.Pow(difference.x, 2f) +
   Math.Pow(difference.y, 2f) +
   Math.Pow(difference.z, 2f)); 
```

然后，您可以像上面的代码一样从坐标的幂中获取 sqrt 来计算距离。

如果您愿意，可以使用扩展方法

```
public static class Extensions
{
    public static double Distance(this Vector3 source, Vector3 target)
    {
        var difference = new Vector3(source.X - target.X, source.Y - target.Y, source.Z - target.Z);

        var distance = Math.Sqrt(
                Math.Pow(difference.X, 2f) +
                Math.Pow(difference.Y, 2f) +
                Math.Pow(difference.Z, 2f)
            );

        return distance;
    }
} 
```

我不确定它是否有效，因为我是用记事本++写的：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:26:29.637

您可以在循环中使用 Vector3.Distance(camera, otherObject) ，将最低距离对象保留在临时变量中，即

```
long closestDistance = -1;
Vector3 closestVector = null;

for(Vector3 otherVector : myCollection)
{
    long thisDistance = Vector3.Distance(camera, otherVector);

    if (thisDistance < closestDistance || closestDistance == -1)
    {
       closestDistance = thisDistance;
       closestVector = otherVector;
    }
} 
```

# iphone - 需要对 GSEvent 进行一些澄清

> ID：15334883
> 
> 赞同：1
> 
> 时间：2013-03-11T09:20:06.240
> 
> 标签：iphone, objective-c, c, jailbreak

我正在查看此处附加的文件[GSEvent.h：](https://github.com/kennytm/iphone-private-frameworks/blob/master/GraphicsServices/GSEvent.h)

当用户按下屏幕时，我很高兴知道以下参数。即像 pathPressure pathMajorRadius pathProximity 等。（我不想自己设置这些值，而是在他/她按下屏幕时从用户那里接收它们。）

```
typedef struct GSPathInfo {
    unsigned char pathIndex;        // 0x0 = 0x5C
    unsigned char pathIdentity;     // 0x1 = 0x5D
    unsigned char pathProximity;    // 0x2 = 0x5E
    CGFloat pathPressure;               // 0x4 = 0x60
    CGFloat pathMajorRadius;        // 0x8 = 0x64
    CGPoint pathLocation;           // 0xC = 0x68
    GSWindowRef pathWindow;         // 0x14 = 0x70
} GSPathInfo;   // sizeof = 0x18. 
```

如果我在文件下方（GSEvent.h）

```
GSPathInfo GSEventGetPathInfoAtIndex(GSEventRef event, CFIndex index); 
```

我想知道我需要在`GSEventRef event`and`CFIndex index`

所以我搜索`GSEventRef`滚动到文件顶部，我看到它是一个指向`__GSEvent`

```
typedef struct __GSEvent* GSEventRef; 
```

我被困在这里，我要创建什么事件以及如何...

```
GSEventRef* eventRef = malloc(sizeof(GSEventRef)); 
```

或者我需要做类似的事情

```
__GSEvent* GSEventRef = malloc(sizeof(__GSEvent)); 
```

分配内存后如何设置？我的意思是我应该为它设置什么值？

# django - 如何将外键绑定到对象？

> ID：15334885
> 
> 赞同：0
> 
> 时间：2013-03-11T09:20:17.673
> 
> 标签：django, django-models

我有一个模型`Order`，

```
class Order(SmartModel):
    date = models.DateTimeField(...)
    status = models.IntegerField(...)
    restaurant = models.ForeignKey(Restaurant,null=True,blank=True,default = None,help_text="The restaurant the customer order from")
    email = models.EmailField(...)
    mobile = PhoneNumberField(...) 
```

我正在像这样保存对象，

```
orders = Order()
    checkout_form = forms.CheckoutForm(request.POST,instance=orders)
    orders = checkout_form.save(commit=False)
    anon_user = User.objects.get(id=settings.ANONYMOUS_USER_ID)
    orders.created_by = anon_user
    orders.modified_by = anon_user
    orders.status = Order.SUBMITTED
    orders.save() 
```

如您所见，我没有保存餐厅（fk 字段），我应该怎么做。我看过这个（[https://groups.google.com/forum/?fromgroups=#!topic/django-users/PcSDKZhPVmc](https://groups.google.com/forum/?fromgroups=#!topic/django-users/PcSDKZhPVmc)）和其他几个例子，但它们让我更加困惑。

我需要绑定 ~Restaurant~ 来点菜，这样当我查找订单时，我就知道它属于哪家餐厅。

烦人的事情是我无法加载 djangoproject.com，已经一个星期了。

表格.py,

```
class CheckoutForm(forms.ModelForm):
    class Meta:
        model = Order
        exclude = ('created_by','modified_by','is_active','status','restaurant','date') 
```

模板，

```
<table>
  {{ form.errors }}
  {{ form.non_field_errors }}
  {% form_table_row form.email %}
  {% form_table_row form.mobile %}
  </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:37:25.753

在您看来，您需要获取`Restaurant`对象并将其保存在`order`. 由于您尚未显示完整的视图代码，因此我不确定如何获取该`Restaurant`对象。

这是示例代码...

```
orders = Order()
checkout_form = forms.CheckoutForm(request.POST,instance=orders)
orders = checkout_form.save(commit=False)

#get restaurant obj
restaurant = Restaurant.objects.get(name = "some_restaurant")
orders.restaurant = restaurant

anon_user = User.objects.get(id=settings.ANONYMOUS_USER_ID)
orders.created_by = anon_user
orders.modified_by = anon_user
orders.status = Order.SUBMITTED
orders.save() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:57:38.943

我想我只是在这里猜测或创建示例场景：

在用户创建信息并选择他们的餐厅后。他们必须在用户选择订单的下一个表单上进行。餐厅 ID 必须在下一个表单中传递，以便当用户提交订单时，我们将使用该餐厅 ID 来保存他们的订单。

```
def save_order(request, restaurant_id):
    anon_user = User.objects.get(id=settings.ANONYMOUS_USER_ID)
    orders = Order(restaurant_id=restaurant_id)

    checkout_form = forms.CheckoutForm(request.POST, instance=orders)
    checkout = checkout_form.save(commit=False)

    checkout.created_by = anon_user
    checkout.modified_by = anon_user
    checkout.status = Order.SUBMITTED
    checkout.save() 
```

# authentication - WebApi ActionFilterAttribute、HttpActionContext 访问用户名（IPrincipal）

> ID：15334892
> 
> 赞同：11
> 
> 时间：2013-03-11T09:20:47.907
> 
> 标签：authentication, asp.net-web-api, actionfilterattribute, iprincipal

**我需要在我的操作过滤器中访问当前登录的用户**。身份由`DelegatingHandler`执行链的更上层设置。

**我*可以*`IPrincipal`使用`HttpContext.Current.User`. _** 到目前为止，我避免使用`HttpContext.Current`它，因为它在我看来是不好的风格。首先，您的代码只有在 IIS 中托管时才能工作，其次，它包含一个`System.Web`我认为不会受到伤害的引用，但`System.Net.Http`如果可能的话，我更愿意坚持使用。 *光靠老好“ `HttpContext`”*感觉不对。

**有没有其他方法可以访问用户的身份`ActionFilter`？或者`HttpContext`如果您不打算运行自托管应用程序，是否可以使用？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-11T09:26:57.543

我忽略了明显的。我没有意识到`ControllerContext`.

```
var username = ((ApiController)context.ControllerContext.Controller).User.Identity.Name; 
```

# excel - VBA HasNextCell 函数

> ID：15334894
> 
> 赞同：0
> 
> 时间：2013-03-11T09:20:51.773
> 
> 标签：excel, vba, function

我曾尝试寻找解决方案，但找不到。

我有一个产品清单，每个产品都有很多部分。VBA中是否有HasNext函数来查看产品是否有更多零件？例如，对于鸡肉汉堡，我想挑选出所有的部分，将它们放在一个数组中并显示在另一张表中。

我不能对数组进行硬编码，因为客户将来会添加更多产品。可能有 15、20、23 个部分等。是否有 HasNext 函数来获取下一列中的值并将其添加到数组中？

```
Product        | Part 1 | Part 2 | Part 3
Chicken Burger | Veggie | Bun    | Patty 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:37:04.153

您可以使用[`Range.End`](http://msdn.microsoft.com/en-us/library/aa214585%28v=office.11%29.aspx)属性来检测标题行的“长度”：

```
Dim col
col=Range("A1").End(xlToRight).Column
For i = 1 to col
    If Cells(1, col).Value <> "" Then
    '...
End 
```

PS我想知道为什么MSDN将其称为“属性”而不是“方法”......

# c# - 优势错误 6082

> ID：15334896
> 
> 赞同：2
> 
> 时间：2013-03-11T09:20:53.177
> 
> 标签：c#, .net, advantage-database-server

我正在创建一个 Windows 服务。该服务必须每天从 Advantage 数据库中读取一次数据。

我在我的计算机上复制了 Advantage 数据库，它工作正常，但是当我在服务器上尝试该服务时，出现以下错误：

> “AdsException：错误 6082：加载 Advantage 本地服务器库时出错。”

根据文档（[链接](http://devzone.advantagedatabase.com/dz/WebHelp/Advantage11.1/index.html?error_6082_error_loading_the_advantage_local_server_dll.htm)），我必须将 ADSLOC32.DLL 放在 \WINDOWS\SYSTEM 目录中。

我尝试这样做，但它不起作用。

有任何想法吗？

编辑：我创建了一个控制台应用程序，它执行与我的 Windows 服务完全相同的代码，并且它完全按照它应该的方式工作。似乎问题出在我的服务上，但我不知道我的服务的哪一部分出了问题......

编辑2：我检查了进程监视器，我的服务没有尝试加载adsloc32.dll，它尝试加载adsloc64.dll。我没有找到 adsloc64.dll 文件，所以我将 adsloc32.dll 复制到我的应用程序目录并将其命名为 adsloc64.dll 但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:29:32.380

我找到了解决方案。

我使用[Windows Sysinternals](http://technet.microsoft.com/en-US/sysinternals)的 Process Monitor来了解程序尝试从何处加载 dll 文件。它不是在尝试加载 adsloc32.dll，而是在加载 adsloc64.dll。

我只是将 adsloc64.dll 文件放到我的应用程序目录中，它现在可以工作了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:10:08.733

尝试将 adsloc32.dll 放在与您的应用程序相同的目录中。可能权利有问题

# controls - 如何动态更改 InstallShield 控件属性？

> ID：15334901
> 
> 赞同：0
> 
> 时间：2013-03-11T09:20:56.863
> 
> 标签：controls, installshield, installscript

我的 IS 安装程序中有一个自定义对话框，我想根据文本区域中写入的文本（在运行时）更改一些属性，例如高度、顶部等。

是否有任何 InstallScript 函数可以处理这些参数（例如用于更改文本的 CtrlSetText）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T12:53:41.703

假设您使用的是 Windows Installer 项目类型，则可以使用临时表和数据。如果您了解基础表架构，则可以使用 InstallScript 编写自定义操作，在安装期间更改此架构。对于初学者，请参阅：

[Q103295：在运行时动态添加和删除组合框中的值](http://kb.flexerasoftware.com/selfservice/viewContent.do?externalID=Q103295)

# jqgrid - 如何使用 JqGrid

> ID：15334903
> 
> 赞同：0
> 
> 时间：2013-03-11T09:21:11.980
> 
> 标签：jqgrid

我有一个简单的表格，如何使用 JqGrid 呢？我下载了插件，但是不知道怎么用。

```
<table id="table-to-grid">
<tr>
            <td>something</td>
            <td>something else</td>
        </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:10:30.827

愚蠢的我，我没有包括标题和tbody>。现在可以了。

```
<table id="table-to-grid">
<tr>
<th>Heading 1</th>
<th>Heading 2</th>
</tr>
<tbody>
<tr>
            <td>something</td>
            <td>something else</td>
        </tr>
</tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:12:29.557

我不建议您使用`tableToGrid`. 您应该更好地将网格与表示输入数据的`datatype: "local", data: mydata`选项一起使用。`mydata`您必须指定`colModel`哪些描述网格的列（名称、排序类型、格式等）。将需要放置在网格中的纯数据与数据的表示区分开来是很重要的。例如，您可以将布尔数据显示为复选框。您只需`formatter: "checkbox"`在相应列的定义中添加属性。

# dart - 如何指定函数参数的默认值？

> ID：15334908
> 
> 赞同：10
> 
> 时间：2013-03-11T09:21:41.063
> 
> 标签：dart

这个函数应该用给定的函数变换来变换列表的每个元素：

```
void _doSomething(List<Something> numbers, [transform(Something element)]) {...} 
```

因为我不想在不`transform`应该做任何事情时跳过这个方法，所以我想给这个`transform`方法一个默认值，如下所示：

```
void _doSomething(List<Something> numbers, 
                  [transform(Something element) = (v) => v]) {...} 
```

不幸的是，编辑告诉我

> 预期常数 预期

是否有一些解决方法或根本不可能（或根本不应该这样做）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-07-31T13:10:03.950

如果你想初始化一个 Function 参数，它也是你的类的一个字段，我建议：

```
class MyClass{
  Function myFunc;
  MyClass({this.myFunc = _myDefaultFunc}){...}
  static _myDefaultFunc(){...}
} 
```

或者更适合：

```
typedef SpecialFunction = ReturnType Function(
                              FirstParameterType firstParameter, 
                              SecondParameterType secondParameter);

class MyClass{
  SpecialFunction myFunc;
  MyClass({this.myFunc = _myDefaultFunc}){...}
  static ReturnType _myDefaultFunc(FirstParameterType firstParameter, 
                                   SecondParameterType secondParameter){...}
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T09:34:42.857

您可以将默认函数定义为私有方法：

```
_defaultTransform(Something v) => v;
void _doSomething(List<Something> numbers, 
                  [transform(Something element) = _defaultTransform]) {...} 
```

或者像这样检查参数：

```
void _doSomething(List<Something> numbers, [transform(Something element)]) {
  if (!?transform) transform = (v) => v;
  ...
} 
```

或者像[Ladicek](https://stackoverflow.com/users/742081/ladicek)建议的那样：

```
void _doSomething(List<Something> numbers, [transform(Something element)]) {
 transform ??= (v) => v;
  ...
} 
```

# ascii - 在 Coq 中将函数从字符串转换为 nat

> ID：15334909
> 
> 赞同：1
> 
> 时间：2013-03-11T09:21:41.663
> 
> 标签：ascii, coq

我想写一个函数转换类型`string -> nat`。`coq`如果字符串内容只有数字将返回`nat`，否则它将返回`0`字母或带数字的字母或任何不包含数字的情况（例如：'、-、...）。

例如：

`"0", "1", "2", "3", ... "99",..`将返回 ：`0, 1, 2, 3, ..., 99, ...`

`"a", "bc", "..0d"`，... 将返回 ：`0`

我可以写这个函数`Coq`吗？

我自己试过，但我不知道如何只转换数字而不像我的例子那样转换字母？

```
Require Import Ascii String.

  Definition nat_of_string (s : string) : nat :=
    match s with
      | EmptyString  => 0
      | String (s) _ => nat_of_ascii s
    end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:55:14.200

这是我非常低效的版本（为了清楚起见）：

```
Require Import String Ascii.

Open Scope string_scope. 
```

`ascii`在 Coq 中是 ascii 字符的 8 位表示，因此您可以进行模式匹配以仅将 0 转换为 9，其余发送到`None`

```
Definition num_of_ascii (c: ascii) : option nat :=
 match c with
(* Zero is 0011 0000 *)
   | Ascii false false false false true true false false => Some 0
(* One is 0011 0001 *)
   | Ascii true false false false true true false false => Some 1
(* Two is 0011 0010 *)
   | Ascii false true false false true true false false => Some 2
   | Ascii true true false false true true false false => Some 3
   | Ascii false false true false true true false false => Some 4
   | Ascii true false true false true true false false => Some 5
   | Ascii false true true false true true false false => Some 6
   | Ascii true true true false true true false false => Some 7
   | Ascii false false false true true true false false => Some 8
   | Ascii true false false true true true false false => Some 9
   | _ => None
end. 
```

要从“123”计算 123，我发现以相反的顺序解析字符串更容易：
12345 = 5 + 10 * (4 + 10 * (3 + 10 * (2 + 10 * 1)))

```
(* Inefficient string reversal *)
Fixpoint string_rev (s : string) : string :=
 match s with
 | EmptyString => EmptyString
 | String c rest => append (string_rev rest) (String c EmptyString)
end.

Fixpoint num_of_string_rec (s : string) : option nat :=
  match s with
    | EmptyString => Some 0
    | String c rest => 
       match (num_of_ascii c), (num_of_string_rec rest) with
          | Some n, Some m => Some (n + 10 * m)
          | _ , _ => None
       end
   end.

Definition num_of_string (s : string) := 
  match num_of_string_rec (string_rev s) with
    | Some n => n
    | None => 0
  end.

Eval vm_compute in num_of_string "789". 
```

最后，你有你想要的。小心不要尝试大量数字，这可能需要一段时间，但你明白了！

最好的，V.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T01:00:10.457

前面的答案很好，但写和读有点无聊，而且因为它使用自然数，所以非常有限。为什么不直接转向整数？

首先将每个 ascii 字符映射到一个整数：

```
Require Import ZArith String Ascii.
Open Scope Z_scope. 

Definition Z_of_bool (b : bool) := if b then 1 else 0.

(* This coercion is used to make the next function shorter to write and read *)

Coercion Z_of_bool : bool >-> Z.

Definition Z_of_ascii a :=
  match a with
   Ascii b1 b2 b3 b4 b5 b6 b7 b8 =>
     b1 + 2 * (b2 + 2 * (b3 + 2 * (b4 + 2 *
      (b5 + 2 * (b6 + 2 * (b7 + 2 * b8))))))
  end. 
```

只需要完成一种情况，并且数字按照您获得的顺序一个接一个地整齐地放置（ascii 代码就是这样设计的，早在 Coq 发明之前）。

```
Definition Z_of_0 := Eval compute in Z_of_ascii "0".

Definition Z_of_digit a := 
   let v := Z_of_ascii a - Z_of_0 in
   match v ?= 0 with
     Lt => None | Eq => Some v | 
     Gt => match v ?= 10 with Lt => Some v | _ => None end
   end. 
```

这是在不反转列表的情况下处理具有多个数字的字符串的另一种尝试。

```
Fixpoint num_prefix_and_length (s : string) : option (Z * Z) :=
  match s with
    EmptyString => None
  | String a s' => 
    match Z_of_digit a with
      None => None
    | Some va =>
      match num_prefix_and_length s' with
        None => Some (va, 1)
      | Some (vs, n) => Some (va * 10 ^ n + vs, n+1)
      end
    end
  end. 
```

在这种情况下，该函数接受具有任何尾随字符的字符串。

```
Compute num_prefix_and_length "31415926 remind me of Pi". 
```

返回一些 (31415926, 8)。

# c# - 在后台上传图片，使用 Thread

> ID：15334910
> 
> 赞同：0
> 
> 时间：2013-03-11T09:21:44.680
> 
> 标签：c#, asp.net, .net, multithreading

我的网站上有一个上传表单，允许用户插入一些项目（通常是树），并且他们可以选择在添加这些项目**后上传图片。**上传图片大约需要 15 秒，但我想让用户选择在他们等待图片上传时添加另一个项目。所以我想使用线程，因为：上传完成后，页面将刷新并且表单将重置，所以如果他们想添加另一个项目，他们必须等到它完成上传。

我试过这段代码：

```
 protected void UploadFile(Object s, EventArgs e)
        {
    Thread t = new Thread(delegate()
    {
      //code for upload the image
    )};
    t.Start();
} 
```

但它不起作用，甚至现在都没有上传文件。有人知道原因吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:30:09.553

只有在收到完整的请求后才会调用您的服务器端代码。
因此，使用线程不会有太大帮助。

如果您想在上传时保持页面交互，您应该寻找基于 ajax 的解决方案。

一个非常简单的选项是[uploadify](http://www.uploadify.com/)。您可以将其连接到 HttpHandler 并在应用程序保持交互时在后台进行上传。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:27:54.097

上传文件所需的大量时间不在处理它——您可能只是将文件保存在某个地方——而是通过网络传输文件。

所以我建议不要在这里尝试进行后台处理，只需以正常方式处理即可，它的性能也一样。用户只需等待图像通过网络发送。

如果用户在上传图片时需要添加其他项目，您可以随时让您的网站在浏览器的选项卡/窗口中打开另一个页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:34:02.483

也许您可以看看[HTML5 可以为您做](http://www.matlus.com/html5-file-upload-with-progress/)什么，以向用户提供更多反馈，说明他的文件已上传。就像 Roy 指出的那样，传输时间很重要，用户无论如何都必须等待。但是使用 HTML5 或许您可以提供一些不错的进度条来改善上传页面的用户体验。

希望这可以帮助。

# user-interface - 我应该在 GUI 代码中为组件的变量名添加前缀吗？

> ID：15334913
> 
> 赞同：0
> 
> 时间：2013-03-11T09:21:52.030
> 
> 标签：user-interface, prefix, naming-conventions

一些编码书籍提到我们不应该在名称中为类型添加前缀，因为当前的 IDE 能够使这些可见和清晰。我完全同意原始类型，但我仍然倾向于为我的 GUI 组件变量名称添加前缀。在处理有关 GUI 组件变量命名的 GUI 代码时，最佳实践是什么？

例如，我应该命名我的

```
Button btnSubmit
TextField tfName
Checkbox cbActive 
```

或者

```
Button submit
TextField name
Checkbox active 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:37:59.640

我发现通常，在命名 GUI 组件时，在变量名称前加上 GUI 组件的类型可以简化编写代码的过程，因为当我编写引用它们的代码时，我不必记住每个的确切名称零件。例如，我经常知道我会从特定的文本中获取文本`TextBox`，但我不记得它的确切名称。我开始输入`TextBox`并在 IntelliSense 中出现一系列`TextBox`es，从中我可以轻松识别出我需要的确切一个。

关于是否有任何最佳实践；这取决于

1.  如果您的公司有任何标准，我认为它们将是这种情况下的最佳实践。
2.  如果这是一个私人项目，请选择您认为最好的。

我的 0.02 美元

# java - 默认情况下，JAX-WS 代理不是线程安全的。Metro的实施情况如何？

> ID：15334916
> 
> 赞同：2
> 
> 时间：2013-03-11T09:22:02.933
> 
> 标签：java, thread-safety, jax-ws, cxf, java-metro-framework

根据我的研究，JAX-WS 客户端代理不是线程安全的。因此，代理的线程安全性留给它的实现。根据[Apache CXF](http://cxf.apache.org/faq.html#FAQ-AreJAXWSclientproxiesthreadsafe?)，他们的代理是线程安全的。Metro的代理呢？它们是线程安全的吗？我相信 Metro 是捆绑在 JDK 和其他 Java EE 容器中的默认 JAX-WS 实现。（如果我错了，请纠正我。）

只是一个附加信息，根据我的研究，Metro 代理不是线程安全的。但是，我没有找到任何官方文档来支持它。另外，我尝试通过与 100 个线程共享一个端口来测试 Metro，但没有遇到任何问题。难道是因为我只使用了 100 个线程？还是因为我没有对它进行任何修改`BindingProvider`？在线程中，我只使用端口来调用 Web 服务方法。我没有对`BindingProvider`. 仅在 Metro 端口中是否有特定部分不是线程安全的？

# php - PHP 从联系表单中去除变量编码

> ID：15334919
> 
> 赞同：0
> 
> 时间：2013-03-11T09:22:24.880
> 
> 标签：php, post, utf-8, stripslashes

在我的 PHP 联系表单脚本中，

我正在使用`_POST`提交一个 PHP 变量，其中包含必须转义的引号，并且在到达时，它的值成为`$formSubject`表单中变量的值，并且它的斜杠用`stripslashes`.

以下是显示变量的表格摘录`$formSubject`，以及标题。

```
<input type="text" name="formSubject" id="formSubject" value="<?php if(isset($_POST['formSubject']))  echo stripslashes($_POST['formSubject']);?>" />

if (($resp->is_valid) && (!isset($hasError))) {
  $emailTo = 'yourEmail@address.com';
  $subject = 'A new message from: ' . $formAuthor . ' | ' . $formSubject;
  $body = "Email: $formEmail \n\nContent: $formContent  \n\n$formAuthor";
  $headers = 'From: <'.$formEmail.'>' . "\r\n" . 'Reply-To: ' . $formEmail . "\r\n" . 'Return-Path: ' . $formEmail; 
```

由于我已经开始使用`stripslashes`echoed 变量，因此表单页面上的主题是正确的，但是一旦电子邮件到达，主题中的 ASCII 就无法正确解析。

```
THIS IS A \&#39;SUBJECT\&#39; 
```

应该：

```
THIS IS A 'SUBJECT' 
```

这是声明正确编码的问题吗？这仅在我开始使用时才发生，`stripslashes`所以 stripslashes 是否忽略编码？我读到了一个`<form>`用于设置的属性`UTF-8`，但这没有用。是否有特定于 stripslashes 的修复程序，或者我必须对脚本编码进行整体更改？

谁能告诉我问题是什么？

谢谢您的帮助。

# android - HttpURLConnection 的 setRequestProperty 函数

> ID：15334920
> 
> 赞同：1
> 
> 时间：2013-03-11T09:22:25.977
> 
> 标签：android, post, request

我在 Android 中实现了 POST 请求，并将图片上传到服务成功。

我没有使用 setRequestProperty 函数；但是我想知道这个功能的效果是什么。

这是代码：

```
URL url = new URL("http://192.168.191.104:8080/myapp/servlet/MyServlet");
HttpURLConnection connection = ((HttpURLConnection) url
        .openConnection());
connection.setDoInput(true);
connection.setDoOutput(true);
connection.setUseCaches(false);
connection.setRequestMethod("POST");
connection.connect();
OutputStream out = connection.getOutputStream();
int len;
byte[] buffer = new byte[1024];
// 读取文件
FileInputStream fileInputStream = new FileInputStream(Environment
        .getExternalStorageDirectory().getAbsolutePath() + "/123.jpg");
while ((len = fileInputStream.read(buffer, 0, 1024)) != -1) {
    out.write(buffer);
}
out.flush();
out.close();
fileInputStream.close();
InputStream input = connection.getInputStream();
while ((len = input.read(buffer)) != -1) {
    Log.i("tag", "data:" + new String(buffer, 0, len));
}
input.close();
connection.disconnect(); 
```

谁能解释一下 HttpURLConnection 中 setRequestProperty 函数的作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:34:18.983

主要是 setRequestProperty 用于根据要求设置以下内容

```
connection.setRequestProperty("Connection", "Keep-Alive");
connection.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary); 
```

或者

```
Connection.setRequestProperty("Content-Type", "text/plain; charset=utf-8"); 
```

有时，您必须为连接指定 Content-type。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:27:04.570

设置指定请求头字段的值。该值将仅由当前 URLConnection 实例使用。该方法只能在连接建立之前调用。

[更多细节](http://developer.android.com/reference/java/net/URLConnection.html#setRequestProperty%28java.lang.String,%20java.lang.String%29)

# ios - 使用 Adob e AIR 在移动设备上捕获视频

> ID：15334921
> 
> 赞同：4
> 
> 时间：2013-03-11T09:22:35.540
> 
> 标签：ios, air, flash-cs5, video-capture, air-native-extension

我的任务是为移动设备（iPhone、iPad、Android）创建一个视频录制应用程序，要求用户使用他们的手机/平板电脑录制一个短片。

然后将视频上传到服务器（在同一应用程序或辅助应用程序/站点内或通过电子邮件）

AIR 应用程序是否可以录制高质量的视频和音频并将其保存到相机胶卷/画廊，或者从 AIR 应用程序中打开内置的录像机应用程序？

我在尝试使用 Flash CS5.5 和使用一个代码库部署到 iOS 和 Android，或者构建本机应用程序并可能复制我的工作量之间陷入困境。

如果我尝试 AIR 路线，我会遇到质量/分辨率/可用性等问题吗？还是我应该坚持构建原生应用程序？时间也很重要：）

我做了很多研究，并没有真正找到任何可以改变我决定的东西。

预先感谢。

磷

# javafx-2 - 折线图和散点图重叠图

> ID：15334924
> 
> 赞同：1
> 
> 时间：2013-03-11T09:22:44.010
> 
> 标签：javafx-2, scatter-plot, linechart

此代码绘制 LineChart 并通过单击“添加系列”按钮添加 ScatterChart

看起来一切正常，但只需向左/向右或向上/向下移动场景（鼠标左键单击并拖动）X、Y 轴和图表都会移位。

如何修复此代码以便始终获得轴重叠以及两个图表？

谢谢。

```
import java.util.Set;
import javafx.application.Application; 
import javafx.beans.property.SimpleDoubleProperty; 
import javafx.event.ActionEvent;
import javafx.event.EventHandler; 
import javafx.geometry.Side;
import javafx.scene.Group;
import javafx.scene.chart.NumberAxis; 
import javafx.scene.chart.XYChart; 
import javafx.stage.Stage; 
import javafx.scene.Scene; 
import javafx.scene.Node; 
import javafx.scene.chart.*; 
import javafx.scene.control.Button;
import javafx.scene.input.MouseEvent; 
import javafx.scene.layout.BorderPane; 
import javafx.scene.layout.StackPane;

public class RescalingSeries extends Application {

StackPane               mainGraphStackPane = null;
Button btnAdd;
BorderPane pane; 

XYChart.Series series1 = new XYChart.Series(); 

SimpleDoubleProperty rectinitX = new SimpleDoubleProperty(); 
SimpleDoubleProperty rectinitY = new SimpleDoubleProperty(); 

protected static Axis _duplicateAxis(Axis axis, Axis result) {

    result.setAnimated(axis.animatedProperty().get());
    result.setAutoRanging(axis.isAutoRanging());
    result.setLabel(axis.getLabel());
    result.setSide(axis.getSide());
    result.setTickLabelFill(axis.getTickLabelFill());
    result.setTickLabelFont(axis.getTickLabelFont());
    result.setTickLabelGap(axis.getTickLabelGap());
    result.setTickLength(axis.getTickLength());
    return result;
}

protected static ValueAxis _duplicateValueAxis(ValueAxis axis, ValueAxis result) {
    _duplicateAxis(axis, result);
    result.setLowerBound(axis.getLowerBound());
    result.setUpperBound(axis.getUpperBound());
    result.setMinorTickCount(axis.getMinorTickCount());
    result.setMinorTickLength(axis.getMinorTickLength());
    result.setTickLabelFormatter(axis.getTickLabelFormatter());
    return result;
}

/**
 * Duplicate a number axis.
 * @param axis The source axis.
 * @return A {@code NumberAxis}, never {@code null}.
 */
public static NumberAxis duplicateNumberAxis(NumberAxis axis) {
    NumberAxis result = new NumberAxis();
    _duplicateValueAxis(axis, result);
    result.setTickUnit(axis.getTickUnit());
    result.setForceZeroInRange(axis.isForceZeroInRange());
    return result;
}

/**
 * Duplicate a category axis.
 * @param axis The source axis.
 * @return A {@code CategoryAxis}, never {@code null}.
 */
public static CategoryAxis duplicateCategoryAxis(CategoryAxis axis) {
    CategoryAxis result = new CategoryAxis(axis.getCategories());
    _duplicateAxis(axis, result);
    result.setStartMargin(axis.getStartMargin());
    result.setEndMargin(axis.getEndMargin());
    result.setGapStartAndEnd(axis.gapStartAndEndProperty().get());
    return result;
}

@Override 
public void start(Stage stage) { 

final NumberAxis xAxisLC = new NumberAxis(1, 12, 1); 
final NumberAxis yAxisLC = new NumberAxis(0.53000, 0.53910, 0.0005);
yAxisLC.setSide(Side.RIGHT);

yAxisLC.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxisLC) { 

    @Override 
    public String toString(Number object) { 
        return String.format("%7.5f", object); 
    } 
}); 

final LineChart<Number, Number> lineChart = new LineChart<>(xAxisLC, yAxisLC); 

lineChart.setCreateSymbols(false); 
lineChart.setAlternativeRowFillVisible(false); 
lineChart.setAnimated(true); 
lineChart.setLegendVisible(false);

series1.getData().add(new XYChart.Data(1, 0.53185)); 
series1.getData().add(new XYChart.Data(2, 0.532235)); 
series1.getData().add(new XYChart.Data(3, 0.53234)); 
series1.getData().add(new XYChart.Data(4, 0.538765)); 
series1.getData().add(new XYChart.Data(5, 0.53442)); 
series1.getData().add(new XYChart.Data(6, 0.534658)); 
series1.getData().add(new XYChart.Data(7, 0.53023)); 
series1.getData().add(new XYChart.Data(8, 0.53001)); 
series1.getData().add(new XYChart.Data(9, 0.53589)); 
series1.getData().add(new XYChart.Data(10, 0.53476)); 
series1.getData().add(new XYChart.Data(11, 0.530123)); 
series1.getData().add(new XYChart.Data(12, 0.531035)); 

pane = new BorderPane(); 
pane.setCenter(lineChart);
mainGraphStackPane = new StackPane();
mainGraphStackPane.getChildren().add(pane);
Scene scene = new Scene(mainGraphStackPane, 800, 600); 
lineChart.getData().addAll(series1); 

stage.setScene(scene);         

scene.setOnMouseClicked(mouseHandler); 
scene.setOnMouseDragged(mouseHandler); 
scene.setOnMouseEntered(mouseHandler); 
scene.setOnMouseExited(mouseHandler); 
scene.setOnMouseMoved(mouseHandler); 
scene.setOnMousePressed(mouseHandler); 
scene.setOnMouseReleased(mouseHandler); 

Group root = new Group();
btnAdd = new Button();
btnAdd.setText("Add serie");
root.getChildren().add(btnAdd);
pane.getChildren().add(root);              

btnAdd.setOnAction(new EventHandler<ActionEvent>() {
    @Override
    public void handle(ActionEvent event) {        
        NumberAxis xAxisBC = duplicateNumberAxis(xAxisLC);
        NumberAxis yAxisBC = duplicateNumberAxis(yAxisLC);
        ScatterChart<Number, Number> scatterChart = new ScatterChart<>(xAxisBC, yAxisBC); 

        scatterChart.setAlternativeRowFillVisible(false); 
        scatterChart.setAnimated(true); 
        scatterChart.setLegendVisible(false);

        XYChart.Series series2 = new XYChart.Series();

        series2.getData().add(new XYChart.Data(1, 0.53185)); 
        series2.getData().add(new XYChart.Data(2, 0.532235)); 
        series2.getData().add(new XYChart.Data(3, 0.53234)); 
        series2.getData().add(new XYChart.Data(4, 0.538765)); 
        series2.getData().add(new XYChart.Data(5, 0.53442)); 
        series2.getData().add(new XYChart.Data(6, 0.534658)); 
        series2.getData().add(new XYChart.Data(7, 0.53023)); 
        series2.getData().add(new XYChart.Data(8, 0.53001)); 
        series2.getData().add(new XYChart.Data(9, 0.53589)); 
        series2.getData().add(new XYChart.Data(10, 0.53476)); 
        series2.getData().add(new XYChart.Data(11, 0.530123)); 
        series2.getData().add(new XYChart.Data(12, 0.531035));

        scatterChart.getData().addAll(series2);

        Set<Node> chartNode = scatterChart.lookupAll(".chart-plot-background");
        for(final Node chr : chartNode){
            chr.setStyle("-fx-background-color: transparent;");                           
        }                                                
        chartNode = lineChart.lookupAll(".chart-plot-background");
        for(final Node chr : chartNode){
            chr.setStyle("-fx-background-color: transparent");                            
        }
        mainGraphStackPane.getChildren().add(scatterChart);

        xAxisBC.lowerBoundProperty().bind(xAxisLC.lowerBoundProperty());
        yAxisBC.lowerBoundProperty().bind(yAxisLC.lowerBoundProperty());      
    }
});

stage.show(); 
} 

EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() { 

@Override 
public void handle(MouseEvent mouseEvent) { 
    boolean XScaling=false;
    boolean YScaling=false;

   if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED || mouseEvent.getEventType() == MouseEvent.MOUSE_MOVED ){ 
        LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane.getCenter(); 
        NumberAxis yAxis = (NumberAxis) lineChart.getYAxis(); 
        NumberAxis xAxis = (NumberAxis) lineChart.getXAxis(); 

        double Tgap = xAxis.getWidth()/(xAxis.getUpperBound() - xAxis.getLowerBound()); 
        double newXlower=xAxis.getLowerBound(), newXupper=xAxis.getUpperBound(); 
        double newYlower=yAxis.getLowerBound(), newYupper=yAxis.getUpperBound(); 

        double xAxisShift = xAxis.localToScene(0, 0).getX();
        double yAxisShift = yAxis.localToScene(0, 0).getY();

        double yAxisStep=yAxis.getHeight()/(yAxis.getUpperBound()-yAxis.getLowerBound());
        double CurrentPrice=yAxis.getUpperBound()-((mouseEvent.getY()-yAxisShift)/yAxisStep);

        double Delta=0.3;
        if(mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED && mouseEvent.getX()<xAxisShift+yAxis.getHeight() && mouseEvent.getY()<yAxisShift+yAxis.getHeight() && (XScaling==false || YScaling==false)){

  //==================================================== X-Axis Moving ==================================

            if(rectinitX.get() < mouseEvent.getX()){    
                newXlower=xAxis.getLowerBound()-Delta;
                newXupper=xAxis.getUpperBound()-Delta;
            }
            else if(rectinitX.get() > mouseEvent.getX()){    
                newXlower=xAxis.getLowerBound()+Delta;
                newXupper=xAxis.getUpperBound()+Delta;
            }    
            xAxis.setLowerBound( newXlower ); 
            xAxis.setUpperBound( newXupper ); 

//===================================================== Y-Axis Moving ====================================

            if(rectinitY.get() < mouseEvent.getY()){    
                newYlower=yAxis.getLowerBound()+Delta/1000;
                newYupper=yAxis.getUpperBound()+Delta/1000;
            }
            else if(rectinitY.get() > mouseEvent.getY()){    
                newYlower=yAxis.getLowerBound()-Delta/1000;
                newYupper=yAxis.getUpperBound()-Delta/1000;
            }
            yAxis.setLowerBound(newYlower);
            yAxis.setUpperBound(newYupper);
        }

 //----------------------------- Re-Scale the X-Axis when dragging below it ---------------------------------

        else if(mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED && mouseEvent.getY()>yAxisShift+yAxis.getHeight() ){
            if(rectinitX.get() < mouseEvent.getX()){    
                newXlower=xAxis.getLowerBound()+Delta;
                newXupper=xAxis.getUpperBound()-Delta;
            }
            else if(rectinitX.get() > mouseEvent.getX()){    
                newXlower=xAxis.getLowerBound()-Delta;
                newXupper=xAxis.getUpperBound()+Delta;
            }    
            xAxis.setLowerBound( newXlower ); 
            xAxis.setUpperBound( newXupper );           
        }

//--------------------------------- Re-Scale the Y-Axis when dragging to the left of it --------------------------

        else if(mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED && mouseEvent.getX()> (xAxisShift + xAxis.getWidth())){
            if(rectinitY.get() < mouseEvent.getY()){    
                newYlower=yAxis.getLowerBound()-Delta/1000;
                newYupper=yAxis.getUpperBound()+Delta/1000;
            }
            else if(rectinitY.get() > mouseEvent.getY()){    
                newYlower=yAxis.getLowerBound()+Delta/1000;
                newYupper=yAxis.getUpperBound()-Delta/1000;
            }
            yAxis.setLowerBound(newYlower);
            yAxis.setUpperBound(newYupper);                
        }             
        rectinitX.set(mouseEvent.getX()); 
        rectinitY.set(mouseEvent.getY()); 

        if(mouseEvent.getEventType() == MouseEvent.MOUSE_MOVED && mouseEvent.getY()>yAxisShift && mouseEvent.getY()<yAxisShift+yAxis.getHeight() && mouseEvent.getX()>xAxisShift && mouseEvent.getX()<xAxisShift+xAxis.getWidth()){

        double XX=((mouseEvent.getX() - xAxisShift) / Tgap) + xAxis.getLowerBound();
        double YY=CurrentPrice;
        series1.setName(String.format("%.2g%n",XX) + ", " + String.format("%.4g%n",YY));
        }          
     } 
} 
}; 

public static void main(String[] args) { 
launch(args);  
} 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:48:32.947

找到了解决方案：我错过了这部分

```
 xAxisBC.upperBoundProperty().bind(xAxisLC.upperBoundProperty());
    yAxisBC.upperBoundProperty().bind(yAxisLC.upperBoundProperty()); 
```

# java - 控制 TCP 连接上的远程客户端状态

> ID：15334926
> 
> 赞同：0
> 
> 时间：2013-03-11T09:22:50.153
> 
> 标签：java, ssl, rmi, jsse

我需要编写一个带有集中式服务器和大量远程客户端的平台来执行任务。我目前正在使用 RMI 连接，它是充当远程客户端（RMI 服务器）客户端的集中式服务器。它正在工作，但我担心在不久的将来会出现很多问题（使用 RMI 是个好主意吗？）所以我正在考虑将代码移动到 SSLSockets 并发送序列化类来做同样的事情。

我对这种方法的问题是如何控制活动客户列表。我需要有连接数据来发送任务，我需要知道它们是否还活着。任何的想法？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:19:05.373

没有“RMI 连接”之类的东西，但是您可以通过 RMI 远程会话模式（谷歌它）完成您想要的事情，并在远程会话对象上实现未引用接口，这将告诉您客户端何时不再当前，如果他们还没有调用会话注销方法，如果你提供了它。

有关远程会话模式的详细信息，请参阅[此答案](https://stackoverflow.com/a/14266658/207421)。

# jwplayer - jw player 6如何使用hd cc的组合

> ID：15334927
> 
> 赞同：0
> 
> 时间：2013-03-11T09:22:50.220
> 
> 标签：jwplayer

如何在 JW Player 6 中同时使用 HD 和 CC 的组合？

![在此处输入图像描述](../Images/533540dc168833c0ae73addbefac0488.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:14:46.630

基本上，您需要结合使用这两个示例：

[http://www.longtailvideo.com/support/jw-player/29248/sd-and-hd-qualities](http://www.longtailvideo.com/support/jw-player/29248/sd-and-hd-qualities)

[http://www.longtailvideo.com/support/jw-player/29360/basic-vtt-captions](http://www.longtailvideo.com/support/jw-player/29360/basic-vtt-captions)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:55:16.027

这是一些实际工作的代码。我所做的只是结合我上面提供的两个示例，所以是的，如果你真的尝试它，它就可以工作。

```
<html>
<head>
<title>Test Page</title>
</head>
<body>
<script type="text/javascript" src="http://www.longtailvideo.com/jwplayer/jwplayer.js"></script>
<p><div id="container"></div></p>
<script>
jwplayer("container").setup({
  playlist: [{
    image: "http://content.bitsontherun.com/thumbs/i8oQD9zd-640.jpg",
    sources: [{
      file: "http://content.bitsontherun.com/videos/i8oQD9zd-DZ7jSYgM.mp4",
      width: 1280,
      height: 720
    },{
      file: "http://content.bitsontherun.com/videos/i8oQD9zd-kNspJqnJ.mp4",
      width: 640,
      height: 360
    }],
    captions: [{
      file: 'http://www.longtailvideo.com/sites/default/files/jw6-captions.vtt',
      label: 'English'
    }]
  }]
});
</script>
</body>
</html> 
```

# c++ - 在子类中未检测到 C++ 纯虚函数

> ID：15334928
> 
> 赞同：0
> 
> 时间：2013-03-11T09:22:56.423
> 
> 标签：c++, inheritance, g++, pure-virtual

我有以下类结构：

```
class MyBase
{
   public:
      virtual ExportData exportData() = 0;
      virtual bool exportData(QString filepath)
      {
         ExportData data = exportData();
         data.save(filepath);
      }
};

class MyClass : public MyBase
{
   public:
      virtual ExportData exportData(){//some implementation}
};

class MySubClass : public MyClass
{
   public:
      virtual ExportData exportData(){//some implementation}
}; 
```

然后我导出数据如下：

```
MySubClass *sub = new MySubClass();
sub->exportData("/home/me/export.xml"); 
```

尝试使用 g++ 编译时，出现以下错误：

```
error: no matching function for call to ‘MySubClass::exportData(QString)’
note: candidate is: virtual ExportData MySubClass::exportData()
note:   candidate expects 0 arguments, 1 provided 
```

我没有看到我做错了什么，为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:27:58.650

我怀疑你的第一个虚函数隐藏了你的第二个函数，你应该在你的子类中这样做：

```
using MyBase::exportData; 
```

使这个函数对你的子类显式可见。

[现场示例](http://liveworkspace.org/code/2ehcbi%2419)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:28:27.243

通过在 中声明`virtual ExportData exportData()`，`MySubClass`您就是在隐藏`virtual bool exportData(QString filepath)`。您需要通过`using`声明将其纳入范围：

```
class MySubClass : public MyClass
{
   public:
      using MyBase::exportData;
      virtual ExportData exportData(){//some implementation}
}; 
```

# java - 跟踪对象生命周期

> ID：15334929
> 
> 赞同：0
> 
> 时间：2013-03-11T09:22:58.513
> 
> 标签：java, spring, profiling

我有一个带有几个spring bean服务的spring上下文。我正在跨许多服务传递一个实例化的对象引用。如何分析各种指标，例如将对象从一个服务传递到另一个服务所需的时间、对象传递到的服务数量等？我认为这比简单的分析要高级一些，因为我希望能够跟踪对象，而不仅仅是服务方法调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:16:48.733

您需要自己编写一些聪明的分析器：

*   为已分析对象添加包装类，并带有用于分析信息的附加字段
*   创建为一组`AspectJ`拦截器以填充分析信息（例如增量`numberOfServiceCalls`
*   将创建的方面放在服务上

# java - 调用存储过程时如何通过名称而不是其在 JDBC/JPA 中的位置来设置参数？

> ID：15334931
> 
> 赞同：0
> 
> 时间：2013-03-11T09:23:03.410
> 
> 标签：java, jpa, stored-procedures, jdbc, java-stored-procedures

我从java调用存储过程。现在我需要通过它的名字而不是它的位置索引来设置存储过程的参数，这可行吗？

我不想使用字符串连接，但处理起来既不安全也不丑陋。

注意：我也需要使用 OUT/INOUT 参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:40:09.237

我们可以使用格式命名参数

```
cstmt.setString("arg", name); 
```

其中 cstmt 是`CallableStatement`

其中 arg 是相应存储过程中的参数名称。

我们不需要以与存储过程中的参数相同的顺序命名参数，因为在这种情况下我们将使用 paramname。

您也可以在以下链接中浏览有关 CallableStatement 的教程 -

[http://publib.boulder.ibm.com/infocenter/idshelp/v10/index.jsp?topic=/com.ibm.jdbc_pg.doc/jdbc89.htm](http://publib.boulder.ibm.com/infocenter/idshelp/v10/index.jsp?topic=/com.ibm.jdbc_pg.doc/jdbc89.htm)

您可以阅读链接 - 链接中有 registerOutParameter 语句 -

```
// Register out parameter which should return the product is created.
  cstmt.registerOutParameter("prod_id", Types.FLOAT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:27:06.890

这是可行的，但不是在语言中原生的。您将需要编写自己的代码来提供此功能或依赖第三方代码（推荐方法）。我过去成功地使用了这篇[文章](http://www.javaworld.com/javaworld/jw-04-2007/jw-04-jdbc.html)中的简单代码。它不能处理所有情况，但很容易扩展。如果您正在寻找更强大的解决方案，SpringFramework 还提供了一些库来提供此功能。

# java - 使用 System.out.print() 在“控制台”上打印该行的确切方式

> ID：15334933
> 
> 赞同：5
> 
> 时间：2013-03-11T09:23:06.007
> 
> 标签：java

如果我想打印一行

> 这是Java编程语言

使用 到控制台`System.out.print()`，使用哪个进程和多少进程来打印这一行，以及我们如何将它与使用`FileWriter`or将同一行写入文件进行比较`BufferedWriter`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:28:57.093

检查 PrintStream.java 文件以了解**打印**方法的过程。

[在此处查看详细的流程流程](http://luckytoilet.wordpress.com/2010/05/21/how-system-out-println-really-works/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T09:30:36.043

`out``System`是类型为`PrintStream` [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html)的类的静态成员。您可以为文件创建`PrintStream`对象并以类似方式使用它们。[http://docs.oracle.com/javase/1.5.0/docs/api/java/io/PrintStream.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/PrintStream.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:28:40.113

Java 的不同实现可能有不同的方式来做相关的事情。如果您对它的完成方式感兴趣，可以查看他们的来源。

例如在`HotSpot`VM 中，`out`是一个`java.io.PrintStream`内部使用 a`java.io.BufferedWriter`写入标准输出的引用。

# mysql - 将恢复的 MySQL 表导入新的 MySQL 数据库

> ID：15334935
> 
> 赞同：0
> 
> 时间：2013-03-11T09:23:18.983
> 
> 标签：mysql, import

我有一个旧 MySQL 数据库（.frm、.MID、.MYI）的数据文件，取自服务器硬盘。无法确定 MySQL 版本：我无法访问服务器，我只知道服务器是 linux 机器，建于 2009 年或 2010 年，然后无人维护。

我下载并安装了最后一个 MySQL .MSI，但我对 MySQ 完全陌生。

我需要的第一步是将数据导入新的 MySQL 数据库，然后使用 Delphi 程序将数据移动到 SQL Server 数据库中。

如何导入这些数据表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:40:20.357

你可以停止mysql服务器，在mysql数据目录中创建一些像old_data这样的文件夹，把你所有的.frm、.MID、.MYI文件放在那里并启动mysql。这样做之后，您应该能够在`SHOW DATABASES`命令的结果中看到 old_data 数据库。

# android - android：无法启动活动组件信息

> ID：15334938
> 
> 赞同：0
> 
> 时间：2013-03-11T09:23:25.977
> 
> 标签：android, android-intent, android-activity

当我开始打算去下一个活动时。我收到上述错误。我无法进行下一个活动（请参阅下面的 SecondActivity.java）。

我的主要活动是：

```
package com.example.testflashfile;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import android.app.Activity;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.widget.Button;
import android.widget.TextView;
import android.view.MotionEvent;

public class MainActivity extends Activity
{
    Button nextButton;
    Button playButton;
    private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_MAX_OFF_PATH = 250;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;

    GestureDetector gestureDetector;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
        setContentView(R.layout.activity_main);

        gestureDetector = new GestureDetector(this.getApplicationContext(),new MyGestureDetector());
        View mainview = (View) findViewById(R.id.mainView);

        // Set the touch listener for the main view to be our custom gesture listener
        mainview.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                if (gestureDetector.onTouchEvent(event)) {
                    return true;
                }
                return false;
            }
        });

        playButton=(Button)findViewById(R.id.play);
        playButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent startAnimation=new Intent(MainActivity.this,PlayAnimationActivity.class);
                startAnimation.putExtra("SWF_NAME","a");
                startActivity(startAnimation);
            }
        });

        TextView helloTxt = (TextView)findViewById(R.id.displaytext);
        helloTxt.setText(readTxt());
        nextButton=(Button)findViewById(R.id.next);
        nextButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent=new Intent(MainActivity.this,SecondActivity.class);
                startActivity(intent);

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private String readTxt(){

        InputStream inputStream = getResources().openRawResource(R.raw.textone);

        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

        int i;
        try {
            i = inputStream.read();
            while (i != -1)
            {
                byteArrayOutputStream.write(i);
                i = inputStream.read();
            }

            inputStream.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return byteArrayOutputStream.toString();
    } 

    class MyGestureDetector extends SimpleOnGestureListener 
    {

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {

            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH) {
                return false;
            }

            // right to left swipe
            if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {

                Intent i= new Intent(MainActivity.this,SecondActivity.class);
                startActivity(i);

                //  left to right  swipe
            }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {

                Intent i= new Intent(MainActivity.this,FifthActivity.class);
                startActivity(i);

            }

            return false;
        }

        @Override
        public boolean onDown(MotionEvent e) {
            return true;
        }

    }

} 
```

第二个活动如下：

```
package com.example.testflashfile;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;

import android.app.Activity;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.view.GestureDetector;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.Window;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class SecondActivity extends Activity {

    Button nextButton2;
    Button backButton2;
    Button playButton2;
    private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_MAX_OFF_PATH = 250;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;
    GestureDetector gestureDetector; 

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
        setContentView(R.layout.second);

        gestureDetector = new GestureDetector(this.getApplicationContext(),new MyGestureDetector());
        View mainview = (View) findViewById(R.id.mainView);

        // Set the touch listener for the main view to be our custom gesture listener
        mainview.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                if (gestureDetector.onTouchEvent(event)) {
                    return true;
                }
                return false;
            }
        });

        TextView helloTxt = (TextView)findViewById(R.id.displaytexttwo);
        helloTxt.setText(readTxt());
        nextButton2=(Button)findViewById(R.id.nexttwo);
        nextButton2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent=new Intent(SecondActivity.this,ThirdActivity.class);
                startActivity(intent);

            }
        });

        playButton2=(Button)findViewById(R.id.play);
        playButton2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent startAnimation=new Intent(SecondActivity.this,PlayAnimationActivity.class);
                startAnimation.putExtra("SWF_NAME","b");
                startActivity(startAnimation);
            }
        });

        backButton2=(Button)findViewById(R.id.backtwo);
        backButton2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent=new Intent(SecondActivity.this,MainActivity.class);
                startActivity(intent);

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private String readTxt(){

        InputStream inputStream = getResources().openRawResource(R.raw.texttwo);

        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

        int i;
        try {
            i = inputStream.read();
            while (i != -1)
            {
                byteArrayOutputStream.write(i);
                i = inputStream.read();
            }
            inputStream.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return byteArrayOutputStream.toString();
    }

    class MyGestureDetector extends SimpleOnGestureListener 
    {

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {

            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH) {
                return false;
            }

            // right to left swipe
            if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {

                Intent i= new Intent(SecondActivity.this,ThirdActivity.class);
                startActivity(i);

                //  left to right  swipe
            }  else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {

                Intent i= new Intent(SecondActivity.this,MainActivity.class);
                startActivity(i);

            }

            return false;
        }

        @Override
        public boolean onDown(MotionEvent e) {
            return true;
        }

    }
} 
```

我不明白这里哪里出错了。我已经检查了与此错误相关的堆栈溢出的类似线程。但解释并不那么清楚。任何帮助/建议表示赞赏。提前感谢您抽出宝贵时间阅读如此冗长的帖子。

日志猫是：

```
03-11 10:03:18.599: D/dalvikvm(336): GC_EXTERNAL_ALLOC freed 66K, 52% free 2585K/5379K, external 2032K/2137K, paused 92ms
03-11 10:03:18.729: D/AndroidRuntime(336): Shutting down VM
03-11 10:03:18.729: W/dalvikvm(336): threadid=1: thread exiting with uncaught exception (group=0x40015560)
03-11 10:03:18.749: E/AndroidRuntime(336): FATAL EXCEPTION: main
03-11 10:03:18.749: E/AndroidRuntime(336): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.testflashfile/com.example.testflashfile.SecondActivity}: android.util.AndroidRuntimeException: requestFeature() must be called before adding content
03-11 10:03:18.749: E/AndroidRuntime(336):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-11 10:03:18.749: E/AndroidRuntime(336):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-11 10:03:18.749: E/AndroidRuntime(336):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-11 10:03:18.749: E/AndroidRuntime(336):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-11 10:03:18.749: E/AndroidRuntime(336):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-11 10:03:18.749: E/AndroidRuntime(336):  at android.os.Looper.loop(Looper.java:123)
03-11 10:03:18.749: E/AndroidRuntime(336):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-11 10:03:18.749: E/AndroidRuntime(336):  at java.lang.reflect.Method.invokeNative(Native Method)
03-11 10:03:18.749: E/AndroidRuntime(336):  at java.lang.reflect.Method.invoke(Method.java:507)
03-11 10:03:18.749: E/AndroidRuntime(336):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-11 10:03:18.749: E/AndroidRuntime(336):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-11 10:03:18.749: E/AndroidRuntime(336):  at dalvik.system.NativeStart.main(Native Method)
03-11 10:03:18.749: E/AndroidRuntime(336): Caused by: android.util.AndroidRuntimeException: requestFeature() must be called before adding content
03-11 10:03:18.749: E/AndroidRuntime(336):  at com.android.internal.policy.impl.PhoneWindow.requestFeature(PhoneWindow.java:181)
03-11 10:03:18.749: E/AndroidRuntime(336):  at android.app.Activity.requestWindowFeature(Activity.java:2729)
03-11 10:03:18.749: E/AndroidRuntime(336):  at com.example.testflashfile.SecondActivity.onCreate(SecondActivity.java:35)
03-11 10:03:18.749: E/AndroidRuntime(336):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-11 10:03:18.749: E/AndroidRuntime(336):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-11 10:03:18.749: E/AndroidRuntime(336):  ... 11 more
03-11 10:03:21.539: I/Process(336): Sending signal. PID: 336 SIG: 9
03-11 12:37:51.179: D/dalvikvm(382): GC_EXTERNAL_ALLOC freed 67K, 53% free 2581K/5379K, external 2032K/2137K, paused 199ms
03-11 12:37:51.478: D/AndroidRuntime(382): Shutting down VM
03-11 12:37:51.479: W/dalvikvm(382): threadid=1: thread exiting with uncaught exception (group=0x40015560)
03-11 12:37:51.722: E/AndroidRuntime(382): FATAL EXCEPTION: main
03-11 12:37:51.722: E/AndroidRuntime(382): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.testflashfile/com.example.testflashfile.SecondActivity}: android.util.AndroidRuntimeException: requestFeature() must be called before adding content
03-11 12:37:51.722: E/AndroidRuntime(382):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-11 12:37:51.722: E/AndroidRuntime(382):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-11 12:37:51.722: E/AndroidRuntime(382):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-11 12:37:51.722: E/AndroidRuntime(382):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-11 12:37:51.722: E/AndroidRuntime(382):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-11 12:37:51.722: E/AndroidRuntime(382):  at android.os.Looper.loop(Looper.java:123)
03-11 12:37:51.722: E/AndroidRuntime(382):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-11 12:37:51.722: E/AndroidRuntime(382):  at java.lang.reflect.Method.invokeNative(Native Method)
03-11 12:37:51.722: E/AndroidRuntime(382):  at java.lang.reflect.Method.invoke(Method.java:507)
03-11 12:37:51.722: E/AndroidRuntime(382):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-11 12:37:51.722: E/AndroidRuntime(382):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-11 12:37:51.722: E/AndroidRuntime(382):  at dalvik.system.NativeStart.main(Native Method)
03-11 12:37:51.722: E/AndroidRuntime(382): Caused by: android.util.AndroidRuntimeException: requestFeature() must be called before adding content
03-11 12:37:51.722: E/AndroidRuntime(382):  at com.android.internal.policy.impl.PhoneWindow.requestFeature(PhoneWindow.java:181)
03-11 12:37:51.722: E/AndroidRuntime(382):  at android.app.Activity.requestWindowFeature(Activity.java:2729)
03-11 12:37:51.722: E/AndroidRuntime(382):  at com.example.testflashfile.SecondActivity.onCreate(SecondActivity.java:35)
03-11 12:37:51.722: E/AndroidRuntime(382):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-11 12:37:51.722: E/AndroidRuntime(382):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-11 12:37:51.722: E/AndroidRuntime(382):  ... 11 more
03-11 12:37:57.159: I/Process(382): Sending signal. PID: 382 SIG: 9
03-11 12:40:41.579: W/ActivityThread(418): Application com.example.testflashfile is waiting for the debugger on port 8100...
03-11 12:40:41.649: I/System.out(418): Sending WAIT chunk
03-11 12:40:42.381: I/dalvikvm(418): Debugger is active
03-11 12:40:42.499: I/System.out(418): Debugger has connected
03-11 12:40:42.499: I/System.out(418): waiting for debugger to settle...
03-11 12:40:42.703: I/System.out(418): waiting for debugger to settle...
03-11 12:40:43.011: I/System.out(418): waiting for debugger to settle...
03-11 12:40:43.209: I/System.out(418): waiting for debugger to settle...
03-11 12:40:43.419: I/System.out(418): waiting for debugger to settle...
03-11 12:40:43.619: I/System.out(418): waiting for debugger to settle...
03-11 12:40:43.869: I/System.out(418): waiting for debugger to settle...
03-11 12:40:44.070: I/System.out(418): waiting for debugger to settle...
03-11 12:40:44.269: I/System.out(418): waiting for debugger to settle...
03-11 12:40:44.469: I/System.out(418): waiting for debugger to settle...
03-11 12:40:44.720: I/System.out(418): waiting for debugger to settle...
03-11 12:40:44.925: I/System.out(418): waiting for debugger to settle...
03-11 12:40:45.140: I/System.out(418): waiting for debugger to settle...
03-11 12:40:45.339: I/System.out(418): waiting for debugger to settle...
03-11 12:40:45.559: I/System.out(418): waiting for debugger to settle...
03-11 12:40:45.793: I/System.out(418): waiting for debugger to settle...
03-11 12:40:46.031: I/System.out(418): waiting for debugger to settle...
03-11 12:40:46.261: I/System.out(418): waiting for debugger to settle...
03-11 12:40:46.468: I/System.out(418): waiting for debugger to settle...
03-11 12:40:46.669: I/System.out(418): waiting for debugger to settle...
03-11 12:40:46.875: I/System.out(418): waiting for debugger to settle...
03-11 12:40:47.109: I/System.out(418): debugger has settled (1505)
03-11 12:49:24.089: D/dalvikvm(418): GC_EXTERNAL_ALLOC freed 68K, 52% free 2583K/5379K, external 2032K/2137K, paused 212ms
03-11 12:51:01.819: D/AndroidRuntime(418): Shutting down VM
03-11 12:51:01.839: W/dalvikvm(418): threadid=1: thread exiting with uncaught exception (group=0x40015560)
03-11 12:51:07.499: E/AndroidRuntime(418): FATAL EXCEPTION: main
03-11 12:51:07.499: E/AndroidRuntime(418): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.testflashfile/com.example.testflashfile.SecondActivity}: java.lang.NullPointerException
03-11 12:51:07.499: E/AndroidRuntime(418):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-11 12:51:07.499: E/AndroidRuntime(418):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-11 12:51:07.499: E/AndroidRuntime(418):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-11 12:51:07.499: E/AndroidRuntime(418):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-11 12:51:07.499: E/AndroidRuntime(418):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-11 12:51:07.499: E/AndroidRuntime(418):  at android.os.Looper.loop(Looper.java:123)
03-11 12:51:07.499: E/AndroidRuntime(418):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-11 12:51:07.499: E/AndroidRuntime(418):  at java.lang.reflect.Method.invokeNative(Native Method)
03-11 12:51:07.499: E/AndroidRuntime(418):  at java.lang.reflect.Method.invoke(Method.java:507)
03-11 12:51:07.499: E/AndroidRuntime(418):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-11 12:51:07.499: E/AndroidRuntime(418):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-11 12:51:07.499: E/AndroidRuntime(418):  at dalvik.system.NativeStart.main(Native Method)
03-11 12:51:07.499: E/AndroidRuntime(418): Caused by: java.lang.NullPointerException
03-11 12:51:07.499: E/AndroidRuntime(418):  at com.example.testflashfile.SecondActivity.onCreate(SecondActivity.java:69)
03-11 12:51:07.499: E/AndroidRuntime(418):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-11 12:51:07.499: E/AndroidRuntime(418):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-11 12:51:07.499: E/AndroidRuntime(418):  ... 11 more
03-11 12:56:07.749: I/Process(418): Sending signal. PID: 418 SIG: 9
03-11 14:17:47.570: D/dalvikvm(457): GC_EXTERNAL_ALLOC freed 68K, 53% free 2581K/5379K, external 2032K/2137K, paused 116ms
03-11 14:17:47.699: D/AndroidRuntime(457): Shutting down VM
03-11 14:17:47.699: W/dalvikvm(457): threadid=1: thread exiting with uncaught exception (group=0x40015560)
03-11 14:17:47.729: E/AndroidRuntime(457): FATAL EXCEPTION: main
03-11 14:17:47.729: E/AndroidRuntime(457): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.testflashfile/com.example.testflashfile.SecondActivity}: java.lang.NullPointerException
03-11 14:17:47.729: E/AndroidRuntime(457):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-11 14:17:47.729: E/AndroidRuntime(457):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-11 14:17:47.729: E/AndroidRuntime(457):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-11 14:17:47.729: E/AndroidRuntime(457):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-11 14:17:47.729: E/AndroidRuntime(457):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-11 14:17:47.729: E/AndroidRuntime(457):  at android.os.Looper.loop(Looper.java:123)
03-11 14:17:47.729: E/AndroidRuntime(457):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-11 14:17:47.729: E/AndroidRuntime(457):  at java.lang.reflect.Method.invokeNative(Native Method)
03-11 14:17:47.729: E/AndroidRuntime(457):  at java.lang.reflect.Method.invoke(Method.java:507)
03-11 14:17:47.729: E/AndroidRuntime(457):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-11 14:17:47.729: E/AndroidRuntime(457):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-11 14:17:47.729: E/AndroidRuntime(457):  at dalvik.system.NativeStart.main(Native Method)
03-11 14:17:47.729: E/AndroidRuntime(457): Caused by: java.lang.NullPointerException
03-11 14:17:47.729: E/AndroidRuntime(457):  at com.example.testflashfile.SecondActivity.onCreate(SecondActivity.java:44)
03-11 14:17:47.729: E/AndroidRuntime(457):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-11 14:17:47.729: E/AndroidRuntime(457):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-11 14:17:47.729: E/AndroidRuntime(457):  ... 11 more 
```

清单是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.testflashfile"
    android:versionCode="1"
    android:versionName="1.0"
     >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17"
         />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme"
        android:hardwareAccelerated="true" 
        android:debuggable="true">
        <activity
            android:screenOrientation="portrait"
            android:name="com.example.testflashfile.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.example.testflashfile.SecondActivity"
            android:screenOrientation="portrait"></activity>
         <activity android:name="com.example.testflashfile.ThirdActivity"
             android:screenOrientation="portrait"></activity>
          <activity android:name="com.example.testflashfile.FourthActivity"
              android:screenOrientation="portrait"></activity>
          <activity android:name="com.example.testflashfile.FifthActivity"
              android:screenOrientation="portrait"></activity>

<activity android:name="com.example.testflashfile.PlayAnimationActivity"
               android:screenOrientation="portrait"></activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:29:09.213

嗨，伙计们，我的问题已经解决了。但我似乎无法指出我的代码到底哪里错了。但我想向你们介绍一下什么对我有用（可能有比这更好的解决方案。随时可以编辑这篇文章）。

这是我现在的 MainActivity：

```
package com.example.testflashfile;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import android.app.Activity;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.widget.Button;
import android.widget.TextView;
import android.view.MotionEvent;
import com.example.testflashfile.GlobalVariables;

public class MainActivity extends Activity
{
    Button nextButton;
    Button playButton;
    Button backButton;

    GestureDetector gestureDetector;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
        setContentView(R.layout.activity_main);

        TextView helloTxt = (TextView)findViewById(R.id.displaytext);
        helloTxt.setText(readTxt());

        gestureDetector = new GestureDetector(this.getApplicationContext(),new MyGestureDetector());
        View mainview = (View) findViewById(R.id.mainView);

        // Set the touch listener for the main view to be our custom gesture listener
        mainview.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                if (gestureDetector.onTouchEvent(event)) {
                    return true;
                }
                return false;
            }
        });

        playButton=(Button)findViewById(R.id.play);
        playButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent startAnimation=new Intent(MainActivity.this,PlayAnimationActivity.class);
                startAnimation.putExtra("SWF_NAME","a");
                startActivity(startAnimation);
            }
        });

        nextButton=(Button)findViewById(R.id.next);
        nextButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent=new Intent(MainActivity.this,SecondActivity.class);
                startActivity(intent);

            }
        });

        backButton=(Button)findViewById(R.id.back);
        backButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent=new Intent(MainActivity.this,FifthActivity.class);
                startActivity(intent);

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private String readTxt(){

        InputStream inputStream = getResources().openRawResource(R.raw.textone);

        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

        int i;
        try {
            i = inputStream.read();
            while (i != -1)
            {
                byteArrayOutputStream.write(i);
                i = inputStream.read();
            }

            inputStream.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return byteArrayOutputStream.toString();
    } 

    public class MyGestureDetector extends SimpleOnGestureListener
    {

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {

            if (Math.abs(e1.getY() - e2.getY()) > GlobalVariables.SWIPE_MAX_OFF_PATH) {
                return false;
            }

            // right to left swipe
            if(e1.getX() - e2.getX() > GlobalVariables.SWIPE_MIN_DISTANCE && Math.abs(velocityX) > GlobalVariables.SWIPE_THRESHOLD_VELOCITY) {

                Intent i= new Intent(MainActivity.this,SecondActivity.class);
                startActivity(i);

                //  left to right  swipe
            }  else if (e2.getX() - e1.getX() > GlobalVariables.SWIPE_MIN_DISTANCE && Math.abs(velocityX) > GlobalVariables.SWIPE_THRESHOLD_VELOCITY) {

                Intent i= new Intent(MainActivity.this,FifthActivity.class);
                startActivity(i);

            }

            return false;
        }

        @Override
        public boolean onDown(MotionEvent e) {
            return true;
        }

    }

} 
```

这是第二个活动：

```
package com.example.testflashfile;

import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.GestureDetector;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class SecondActivity extends Activity
{
    Button nextButton,backButton,playButton;
    GestureDetector gestureDetector;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second);

        TextView helloTxt = (TextView)findViewById(R.id.displaytexttwo);
        helloTxt.setText(readTxt());

        gestureDetector = new GestureDetector(this.getApplicationContext(),new MyGestureDetector());
        View mainview = (View) findViewById(R.id.mainViewtwo);

        // Set the touch listener for the main view to be our custom gesture listener
        mainview.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                if (gestureDetector.onTouchEvent(event)) {
                    return true;
                }
                return false;
            }
        });

        playButton=(Button)findViewById(R.id.playtwo);
        playButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent startAnimation=new Intent(SecondActivity.this,PlayAnimationActivity.class);
                startAnimation.putExtra("SWF_NAME","b");
                startActivity(startAnimation);
            }
        });

        nextButton=(Button)findViewById(R.id.nexttwo);
        nextButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent=new Intent(SecondActivity.this,ThirdActivity.class);
                startActivity(intent);

            }
        });

        backButton=(Button)findViewById(R.id.backtwo);
        backButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent=new Intent(SecondActivity.this,MainActivity.class);
                startActivity(intent);

            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private String readTxt(){

        InputStream inputStream = getResources().openRawResource(R.raw.texttwo);

        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

        int i;
        try {
            i = inputStream.read();
            while (i != -1)
            {
                byteArrayOutputStream.write(i);
                i = inputStream.read();
            }

            inputStream.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return byteArrayOutputStream.toString();
    } 

    public class MyGestureDetector extends SimpleOnGestureListener
    {

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {

            if (Math.abs(e1.getY() - e2.getY()) > GlobalVariables.SWIPE_MAX_OFF_PATH) {
                return false;
            }

            // right to left swipe
            if(e1.getX() - e2.getX() > GlobalVariables.SWIPE_MIN_DISTANCE && Math.abs(velocityX) > GlobalVariables.SWIPE_THRESHOLD_VELOCITY) {

                Intent i= new Intent(SecondActivity.this,ThirdActivity.class);
                startActivity(i);

                //  left to right  swipe
            }  else if (e2.getX() - e1.getX() > GlobalVariables.SWIPE_MIN_DISTANCE && Math.abs(velocityX) > GlobalVariables.SWIPE_THRESHOLD_VELOCITY) {

                Intent i= new Intent(SecondActivity.this,MainActivity.class);
                startActivity(i);

            }

            return false;
        }

        @Override
        public boolean onDown(MotionEvent e) {
            return true;
        }

    }
} 
```

我为我的活动创建了一个全局变量类，因为它们在滑动方法中使用相同的变量

包 com.example.testflash 文件；

公共类 GlobalVariables {

```
static final int SWIPE_MIN_DISTANCE = 120;
static final int SWIPE_MAX_OFF_PATH = 250;
static final int SWIPE_THRESHOLD_VELOCITY = 200; 
```

}

这种变化以某种方式解决了我的问题。我还是不知道怎么办。但这是有效的。

我想知道这项工作背后的实际原因是什么。现在代码可以工作并且正在继续。

感谢大家的帮助和指点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:42:45.243

从清单中的第二个活动的标签中删除“screenOrientation =“portrait”。您已经在调用请求...方法之前设置了活动的方向属性。

# wpf - UserControl 父窗口 - 当此 UserControl 在多个窗口中使用时

> ID：15334940
> 
> 赞同：0
> 
> 时间：2013-03-11T09:23:32.287
> 
> 标签：wpf, windows, user-controls

我在`WPF`. 这应该在多个 Windows 中使用。我想在运行时获取当前的父窗口。

在用户控制代码隐藏文件中，正在使用以下行。

`MyWindow1 parentWindow = (MyWindow1)Window.GetWindow(this);`

如果使用相同的`UserControl`wud`MyWindow2`怎么办？在这种情况下，上述行将不正确。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:58:39.320

你可以这样做，尽管我认为让子控件以这种方式引用父母并不是一个很好的代码设计。

如果您有理由满足此类要求，则可以在 say`UserControl`的构造函数中执行类似的操作

```
 Loaded += (sender, args) => {
    Window win = Window.GetWindow(this);
    if (win == null)
      return;
    if (win is MyWindow1) {
      MessageBox.Show("Window 1");
    } else if (win is MyWindow2) {
      MessageBox.Show("Window 2");
    }
  }; 
```

您基本上使用`is`运算符来检查类型，然后执行您的操作。我再次建议不要沿着这条路线走，除非你有非常令人信服的理由。

# postgresql - 插入时间过长

> ID：15334942
> 
> 赞同：0
> 
> 时间：2013-03-11T09:23:39.323
> 
> 标签：postgresql, jpa, ejb, jboss7.x

我的设置是：JBOSS AS 7.1.1 和 PostGreSql

当表中没有或很少（几百个）记录时，我的插入/更新完成得非常快。但是当记录数达到几千条时，插入或更新需要非常长的时间。例如：插入一条记录需要超过 1 或 2 秒。

不确定问题出在哪里或从哪里开始。

我更新数据库的代码如下所示 -

```
public long updateRecord(long id, List<MyData> myDataList) {
    Event eventFromDB = findById(id).get(0);
    List<MyData> myDataListFromDB = eventFromDB.getMyData();
    for(MyData myData : myDataList) {
        myDataListFromDB.add(myData);
    }
    em.merge(eventFromDB);
    return myDataList.size();
} 
```

我是一个新手，据我所知，我已经建立了 jboss。

我还没有对 JBOSS AS 或 PostGreSQL 进行任何配置设置。

JBOSS AS 使用standalone-full.xml 配置文件以独立模式运行。

提前致谢。

```
jbossql=# \d event_mydata
         Table "public.event_mydata"
 Column          |          Type          | Modifiers 
-----------------+------------------------+-----------
 event_id        | bigint                 | not null
 date_time       | character varying(255) | 
 secs_since_1970 | double precision       | 
 value           | real                   | 
Foreign-key constraints:
    "fkcf2bc134ec016855" FOREIGN KEY (event_id) REFERENCES event(id) 
```

而List是一个元素集合

```
@ElementCollection
private List<MyData> myData;
public List<MyData> getMyData() {
    return myData;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:53:06.857

我认为问题在于，如果考虑填充大量数据，则使用 E​​lementCollection 并不是一个好主意。

[相关问题在这里](https://stackoverflow.com/questions/837433/how-can-i-add-an-element-to-a-lazily-loaded-collection-in-hibernate-without-caus?rq=1)

我重新构建了数据库，因此我现在使用具有双向关系的一对多。当子表中已有大量数据时，似乎有助于在子表中插入新条目。

希望它可以帮助某人。

感谢大家的关注和回复。

# ruby-on-rails - 在生产机器上安装rubygems（关闭网络）

> ID：15334946
> 
> 赞同：0
> 
> 时间：2013-03-11T09:24:06.503
> 
> 标签：ruby-on-rails, ruby, deployment, rubygems

我是 Ruby 和 RoR 的菜鸟，并且一直在尝试部署我构建的应用程序。

我需要部署我的应用程序的生产机器是一台新机器，因此需要在其上安装 gem。我一直在尝试通过将我需要的 gem 从远程机器复制到 prod 盒来安装 gem。所以我有一两个问题

1.  有没有更好的方法在防火墙后面的机器上安装 ruby​​gems？

2.  一旦我在 prod box 上安装了所有 gem，部署应用程序本身的最佳方式是什么？我是否需要设置某种 rsync/scp 等？还是有更好的行业标准方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T09:49:21.070

您可以使用[Capistrano](https://github.com/capistrano/capistrano)解决这两个问题。Capistrano 是一个 ruby​​ 脚本，允许您从工作副本或直接从远程存储库部署项目。它是通过 SSH 连接完成的。

它还使用 Bundler 处理 gems。如果您的某些 gem 是私有的（例如在 Github 帐户中），您可以设置 Capistrano 以使用您的本地 SSH 密钥 ( `ssh_options[:forward_agent] = true`)。另一种方法是使用 Capistrano 配方[Strategy Copy Bundled](https://github.com/rudionrails/capistrano-strategy-copy-bundled)在本地捆绑您的 gem，然后再将它们上传到远程服务器上。

总而言之，使用 Capistrano，可以设置一个部署，其中您的本地机器是一切（您的应用程序、您的 gems，...）通过的中介。

```
|------------|       |----------------|           |--------------|
|  Internet  |-------|  Your Machine  |---[SSH]---|  Production  |
|  (Github,  |       |----------------|           |--------------|
|   RubyGems,|
|   etc.)    |
|------------| 
```

**更新** 我在下面添加了一个`config/deploy.rb`做你想做的事的例子。但是，向您解释 capistrano 的所有细节远远超出了您的问题。我建议您阅读有关它的内容，我已经提供了一些参考资料，您可以开始。

```
require 'capistrano-strategy-copy-bundled'

set :application, "your application name" # name of the application

set :user, "deployer"  # The server's user for deploys
default_run_options[:pty] = true # Must be set for the password prompt
set :ssh_options, { :forward_agent => true } # Using SSH forward agent

set :repository, "git@github.com:account/repo.git"
set :scm, :git # type of scm used
set :deploy_via, :copy_bundled # Capistrano clones your git repo to /tmp on your
                       # local machine, tars & zips the result, and then
                       # transfers it to the server via sftp.

set :copy_dir, "/tmp/#{application}" # path where files are temporarily
                                     # put before sending them to the
                                     # servers
set :copy_exclude,  ".git*" # excluding the .git directory

set :deploy_to, "/var/www/" # Where to deploy on the server 
```

参考：

*   [https://help.github.com/articles/deploying-with-capistrano](https://help.github.com/articles/deploying-with-capistrano)
*   [https://github.com/capistrano/capistrano/wiki/2.x-Getting-Started](https://github.com/capistrano/capistrano/wiki/2.x-Getting-Started)
*   [https://github.com/capistrano/capistrano/wiki/2.x-From-The-Beginning](https://github.com/capistrano/capistrano/wiki/2.x-From-The-Beginning)
*   [https://github.com/rudionrails/capistrano-strategy-copy-bundled](https://github.com/rudionrails/capistrano-strategy-copy-bundled)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:36:12.617

无需将 gem 从本地复制到生产机器。您的应用程序中有一个`gemfile`为您的项目安装所有必需的 gem。

因此，您需要做的就是`bundle install`从 prod 的项目路径中将 gems 安装到生产机器上。

一旦你`bundle install`在 prod 上运行，你就可以在那里运行服务器，就像你通常在本地运行一样。

更清楚地说，如果你`rails server`在本地做，那么为了安装 gems 然后在生产中运行服务器-

```
bundle install
rails server -e production 
```

**注意：**不要忘记进行特定于生产的其他更改，例如更改`database.yml`设置。

# javascript - gjslint 在没有 jsdoc 的情况下不报告任何文件错误

> ID：15334947
> 
> 赞同：0
> 
> 时间：2013-03-11T09:24:08.700
> 
> 标签：javascript, google-closure-compiler, gjslint

我在某处读到，在你的 JavaScript 中使用 jsdoc 和谷歌关闭工具 gjslint，你可以强输入你的 javascript。它不是真正的强类型，但该工具将报告未注释的变量和/或参数。

这是测试文件：

```
var keywordLists = {
  hello: function($obj) {
    this.something = 22;
  }
}; 
```

在 gjslint 报告空白错误后，它会传递文件；以下命令：

```
c:\Python27\Scripts\gjslint.exe --strict --jsdoc js\test.js 
```

给出输出：

```
1 files checked, no errors found. 
```

我想用它作为一种编译时检查，但它所做的只是让我对错误的空格感到头疼。我希望它忽略白色间距并检查 jsdoc 和对具有有效/强类型参数的函数的调用。

我在带有 pythod 2.3.7 的 Windows 7-64 上使用它（python 3 在 Windows 上根本不起作用，因为它不会在没有大量错误的情况下安装，然后甚至无法打印 gjslint --help 后记） .

有谁知道我在这里做错了什么？

# tomcat - Liferay 部署描述符（使用 Tomcat）

> ID：15334950
> 
> 赞同：2
> 
> 时间：2013-03-11T09:24:14.177
> 
> 标签：tomcat, liferay, tomcat7, liferay-6

我已经从 SVN 主干检查了 Liferay 门户，并且我第一次使用成功构建了 Liferay

```
ant clean start deploy 
```

所以我的 Tomcat 包含 Liferay 下的爆战

```
 CATALINA_HOME/webapps/ROOT/* 
```

但是，我在启动 Tomcat 时遇到问题，并且它抱怨我的`CATALINA_HOME/conf/Catalina/localhost/ROOT.xml`部署描述符。

我应该手动更改它吗？如果我需要替换，在哪里可以找到 Liferay 部署描述符文件`ROOT.xml`？

这是我从 Tomcat 日志文件中的输出：

```
INFO: Deploying configuration descriptor C:\dev\projects\java\liferay_portal\apache-tomcat-7.0.37\conf\Catalina\localhost\ROOT.xml
Mar 11, 2013 8:50:57 AM org.apache.catalina.core.ContainerBase addChildInternal
SEVERE: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:657)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1637)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoClassDefFoundError: com/liferay/portal/kernel/bean/BeanLocator
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2300)
    at java.lang.Class.getDeclaredFields(Class.java:1745)
    at org.apache.catalina.util.Introspection.getDeclaredFields(Introspection.java:106)
    at org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:261)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationListenerAnnotations(WebAnnotationSet.java:90)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:65)
    at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:405)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:881)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5179)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more
Caused by: java.lang.ClassNotFoundException: com.liferay.portal.kernel.bean.BeanLocator
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1713)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1558)
    ... 25 more
Mar 11, 2013 8:50:57 AM org.apache.catalina.startup.HostConfig deployDescriptor
SEVERE: Error deploying configuration descriptor C:\dev\projects\java\liferay_portal\apache-tomcat-7.0.37\conf\Catalina\localhost\ROOT.xml 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T09:43:06.370

我希望您已按照[用户指南](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/lp-6-1-ugen11-installing-liferay-on-tomcat-7-0 "Liferay 6.1 用户指南")更新`catalina.properties`属性的说明进行操作，`common.loader`并将依赖项 jar 包含在`tomcat/lib/ext`.

[将我的评论转换为答案，以便可以解决此问题]

# javascript - 三个.js导入纹理

> ID：15334952
> 
> 赞同：0
> 
> 时间：2013-03-11T09:24:16.597
> 
> 标签：javascript, three.js, textures

我正在使用*three.js*，现在有一个带有地板和汽车的场景作为json加载。一切都很好，但是这辆车只是**黑色**的，而且没有搅拌机的质地。是否有可能直接使用搅拌机中的纹理导出它或之后添加纹理？

这是我使用的代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>three.js - pointerlock controls</title>
    <style>
        html, body {
            width: 100%;
            height: 100%;
        }

        body {
            background-color: #eeeeee;
            margin: 0;
            overflow: hidden;
            font-family: arial;
        }

        #blocker {

            position: absolute;

            width: 100%;
            height: 100%;

            background-color: rgba(0,0,0,0.5);

        }

        #instructions {

            width: 100%;
            height: 100%;

            display: -webkit-box;
            display: -moz-box;
            display: box;

            -webkit-box-orient: horizontal;
            -moz-box-orient: horizontal;
            box-orient: horizontal;

            -webkit-box-pack: center;
            -moz-box-pack: center;
            box-pack: center;

            -webkit-box-align: center;
            -moz-box-align: center;
            box-align: center;

            color: #ffffff;
            text-align: center;

            cursor: pointer;

        }

    </style>
</head>
<body>
    <script src="../build/three.min.js"></script>
    <script src="js/controls/PointerLockControls.js"></script>

    <div id="blocker">

        <div id="instructions">
            <span style="font-size:40px">Click to move</span>
            <br />
            (WASD or Arrow Keys = Move, SPACE = Jump, MOUSE = Look around)
        </div>

    </div>

    <script>

        var camera, scene, renderer;
        var geometry, material, mesh;
        var loader;
        var mesh2;
        var loadModel;
        var controls,time = Date.now();

        var objects = [];

        var ray;

        var blocker = document.getElementById( 'blocker' );
        var instructions = document.getElementById( 'instructions' );

        // http://www.html5rocks.com/en/tutorials/pointerlock/intro/

        var havePointerLock = 'pointerLockElement' in document || 'mozPointerLockElement' in document || 'webkitPointerLockElement' in document;

        if ( havePointerLock ) {

            var element = document.body;

            var pointerlockchange = function ( event ) {

                if ( document.pointerLockElement === element || document.mozPointerLockElement === element || document.webkitPointerLockElement === element ) {

                    controls.enabled = true;

                    blocker.style.display = 'none';

                } else {

                    controls.enabled = false;

                    blocker.style.display  = '-webkit-box';
                    blocker.style.display = '-moz-box';
                    blocker.style.display = 'box';

                    instructions.style.display = '';

                }

            }

            var pointerlockerror = function ( event ) {

                instructions.style.display = '';

            }

            // Hook pointer lock state change events
            document.addEventListener( 'pointerlockchange', pointerlockchange, false );
            document.addEventListener( 'mozpointerlockchange', pointerlockchange, false );
            document.addEventListener( 'webkitpointerlockchange', pointerlockchange, false );

            document.addEventListener( 'pointerlockerror', pointerlockerror, false );
            document.addEventListener( 'mozpointerlockerror', pointerlockerror, false );
            document.addEventListener( 'webkitpointerlockerror', pointerlockerror, false );

            instructions.addEventListener( 'click', function ( event ) {

                instructions.style.display = 'none';

                // Ask the browser to lock the pointer
                element.requestPointerLock = element.requestPointerLock || element.mozRequestPointerLock || element.webkitRequestPointerLock;

                if ( /Firefox/i.test( navigator.userAgent ) ) {

                    var fullscreenchange = function ( event ) {

                        if ( document.fullscreenElement === element || document.mozFullscreenElement === element || document.mozFullScreenElement === element ) {

                            document.removeEventListener( 'fullscreenchange', fullscreenchange );
                            document.removeEventListener( 'mozfullscreenchange', fullscreenchange );

                            element.requestPointerLock();
                        }

                    }

                    document.addEventListener( 'fullscreenchange', fullscreenchange, false );
                    document.addEventListener( 'mozfullscreenchange', fullscreenchange, false );

                    element.requestFullscreen = element.requestFullscreen || element.mozRequestFullscreen || element.mozRequestFullScreen || element.webkitRequestFullscreen;

                    element.requestFullscreen();

                } else {

                    element.requestPointerLock();

                }

            }, false );

        } else {

            instructions.innerHTML = 'Your browser doesn\'t seem to support Pointer Lock API';

        }

        init();
        animate();

        function init() {

            camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 1000 );

            scene = new THREE.Scene();
            scene.fog = new THREE.Fog( 0xffffff, 0, 750 );

            var light = new THREE.DirectionalLight( 0xffffff, 1.5 );
            light.position.set( 1, 1, 1 );
            scene.add( light );

            var light = new THREE.DirectionalLight( 0xffffff, 0.75 );
            light.position.set( -1, - 0.5, -1 );
            scene.add( light );

            controls = new THREE.PointerLockControls( camera );
            scene.add( controls.getObject() );

            ray = new THREE.Raycaster();
            ray.ray.direction.set( 0, -1, 0 );

            // floor

            geometry = new THREE.PlaneGeometry( 2000, 2000, 100, 100 );
            geometry.applyMatrix( new THREE.Matrix4().makeRotationX( - Math.PI / 2 ) );

            for ( var i = 0, l = geometry.vertices.length; i < l; i ++ ) {

                var vertex = geometry.vertices[ i ];
                vertex.x += Math.random() * 20 - 10;
                vertex.y += Math.random() * 2;
                vertex.z += Math.random() * 20 - 10;

            }

            for ( var i = 0, l = geometry.faces.length; i < l; i ++ ) {

                var face = geometry.faces[ i ];
                face.vertexColors[ 0 ] = new THREE.Color().setHSL( Math.random() * 0.2 + 0.5, 0.75, Math.random() * 0.25 + 0.75 );
                face.vertexColors[ 1 ] = new THREE.Color().setHSL( Math.random() * 0.2 + 0.5, 0.75, Math.random() * 0.25 + 0.75 );
                face.vertexColors[ 2 ] = new THREE.Color().setHSL( Math.random() * 0.2 + 0.5, 0.75, Math.random() * 0.25 + 0.75 );
                face.vertexColors[ 3 ] = new THREE.Color().setHSL( Math.random() * 0.2 + 0.5, 0.75, Math.random() * 0.25 + 0.75 );

            }

            material = new THREE.MeshBasicMaterial( { vertexColors: THREE.VertexColors } );

            mesh = new THREE.Mesh( geometry, material );
            scene.add( mesh );

            // objects
    loader = new THREE.JSONLoader(  );
    loadModel = function(geometry) 
        {                        
            mesh2 = new THREE.Mesh( geometry, new THREE.MeshBasicMaterial( { envMap: THREE.ImageUtils.loadTexture( 'textures/metal.jpg', new THREE.SphericalReflectionMapping() ) } ) );
            mesh2.scale.set(0.1, 0.1, 0.1);
            mesh2.position.set(0, 1, 0);
            mesh2.rotation.set(29.85, 3.14, 2);

            scene.add( mesh2 );
        };
    loader.load('blender.js/auto.js', loadModel );            

            //

            renderer = new THREE.WebGLRenderer();
            renderer.setSize( window.innerWidth, window.innerHeight );

            document.body.appendChild( renderer.domElement );

            //

            window.addEventListener( 'resize', onWindowResize, false );

        }

        function onWindowResize() {

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();

            renderer.setSize( window.innerWidth, window.innerHeight );

        }

        function animate() {

            requestAnimationFrame( animate );

            //

            controls.isOnObject( false );

            ray.ray.origin.copy( controls.getObject().position );
            ray.ray.origin.y -= 10;

            var intersections = ray.intersectObjects( objects );

            if ( intersections.length > 0 ) {

                var distance = intersections[ 0 ].distance;

                if ( distance > 0 && distance < 10 ) {

                    controls.isOnObject( true );

                }

            }

            controls.update( Date.now() - time );

            renderer.render( scene, camera );

            time = Date.now();

        }

    </script>
</body>
</html> 
```

部分`//objects`是我加载汽车的地方，我已经尝试添加一些示例纹理，但效果不佳。最好的办法是我可以简单地将搅拌器中的纹理与模型一起导入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T13:52:30.593

教程如何从搅拌机中导出：[这里](http://graphic-sim.com/B_basic_export.html)

加载带有纹理的对象：

```
var loader = new THREE.JSONLoader();          

loader.load( "obj.js", function(geometry, materials) {
     var material = new THREE.MeshFaceMaterial(materials);
     mesh = new THREE.Mesh(geometry, materials);
     scene.add(mesh)
}); 
```

单独添加纹理：

```
var loader = new THREE.JSONLoader();          

loader.load( "obj.js", function(geometry) {

     var texture = THREE.ImageUtils.loadTexture(textureUrl);
     var material = new THREE.MeshLambertMaterial({map: texture});
     mesh = new THREE.Mesh(geometry, material);
     scene.add(mesh)
}); 
```

# google-chrome - Chrome 自动登录

> ID：15334953
> 
> 赞同：0
> 
> 时间：2013-03-11T09:24:21.480
> 
> 标签：google-chrome, vba

chrome 是否有一个命令行开关可以自动将用户登录到他的谷歌驱动器？我正在构建一个 Excel 插件并运行 shell 命令来打开 chrome 并显示谷歌驱动器登录。或者也许还有另一种使用脚本的方法。如果这可以在后台完成，那就太好了。这是命令。

外壳（“C:\Program Files (x86)\Google\Chrome\Application\Chrome.exe -url https:drive.google.com”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:44:04.943

[当前的命令行选项列表](http://peter.sh/experiments/chromium-command-line-switches/)。“驱动器”的快速 ctrl+f 表示不幸的是答案是否定的。

# c# - Excel：您尝试打开的文件格式不同错误

> ID：15334954
> 
> 赞同：0
> 
> 时间：2013-03-11T09:24:29.950
> 
> 标签：c#, excel, vba

以下是将工作表复制到新的 excel 文件的代码，但是当我打开它时会引发错误，例如“您尝试打开的文件格式不同”。
这里有什么问题？

```
String startPath = System.IO.Path.GetDirectoryName(
System.Diagnostics.Process.GetCurrentProcess().MainModule.FileName);

String filePath = System.IO.Path.Combine(startPath, strPath);

wBook = xCel.Workbooks.Open(filePath);
this.xCel.DisplayAlerts = false;
wSheet = (Excel.Worksheet)wBook.Worksheets.get_Item(2);
wSheet.Copy(Type.Missing, Type.Missing);

wSheet = (Excel.Worksheet)wBook.Sheets[2];
wSheet.SaveAs(strFileCopyPath); 
```

请有人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:26:18.840

最有可能指向的文件`filePath`具有`.xlsx`扩展名，但实际上具有`xls`格式中的数据，反之亦然。

这发生在`Workbooks.Open`设置之前的行中`DisplayAlerts`（*我相信默认操作是“不打开”，所以`DisplayAlerts`更早的设置很可能无济于事。*）

# css - 防止浏览器重新渲染 CSS3 列

> ID：15334955
> 
> 赞同：1
> 
> 时间：2013-03-11T09:24:32.523
> 
> 标签：css, multiple-columns

我正在使用 CSS3 将文章（“卡片”）排列成列。这就是我现在拥有的[http://i.imgur.com/ygINTAv.jpg](http://i.imgur.com/ygINTAv.jpg)

对于每个“卡片”，都有一个操作按钮列表（带有图标的按钮）。其中一些（例如放大镜）将内容填充到卡片中。这就是问题发生的时候：卡片变长了，浏览器决定重新渲染列，导致卡片重新排列。例如，第一列底部的卡片一旦变长，就可以移动到第二列的顶部。结果，它可能会从当前视口中消失并让用户感到困惑。

有没有办法防止这种情况？提前致谢。

# wordpress - 如何将默认值添加到 wp 插件中的 add_option

> ID：15334963
> 
> 赞同：0
> 
> 时间：2013-03-11T09:24:50.463
> 
> 标签：wordpress

```
function update_ptechsol_details(){

    register_setting( 'ptechsol_copyright', 'ptechsolcopy_link');
    register_setting( 'ptechsol_copyright', 'ptechsolcopy_name');
    register_setting( 'ptechsol_copyright', 'ptechsolcopy_default');
    register_setting( 'ptechsol_copyright', 'ptechsolcopy_year');
    register_setting( 'ptechsol_copyright', 'ptechsolcopy_text');
}

function copyright() { ?>
<p><em><center><?php echo get_option('ptechsolcopy_default') ?> <?php echo  the_date('Y');?> <a href="<?php echo get_option('ptechsolcopy_link'); ?>"><?php echo get_option('ptechsolcopy_name')  ?></a> All Rights Reserved.</em></p></center>
<?php }
add_action('wp_footer',copyright);
function copyright_admin_page() {
    ?>
    <div class="wrap">
        <b>Pomegranate Technology Solutions Copyright Plugin</b>
        <form method="post" action="options.php">
        <?php settings_fields( 'ptechsol_copyright' ); 
        global $ptechsolcopy_default;
        $ptechsolcopy_default= "Copyright &copy";

        ?>
        <?php if(function_exists(do_settings)){do_settings( 'ptechsol_copyright' );} ?>
        <input type="hidden" name="post_id" value="copyright_admin_setup" />
        <table class="form-table setup">
                <tr width="auto" >

                    <td width="auto">Copyright Injection By Default</td>
                    <td><input type="text" name="ptechsolcopy_default" value="<?php echo get_option('ptechsolcopy_default');?>" disabled="disabled"/></td></tr>
                    <tr><td width="auto">Year From:</td>
                    <td><input type="text" name="ptechsolcopy_year" value="<?php echo get_option('ptechsolcopy_year');?>"/> To: <?php echo Date('Y')?></td>  </tr>
                    <tr>
                    <td width="auto">Anchor Text</td> 
                    <td width="auto"><input type="text" name="ptechsolcopy_name" value="<?php echo get_option('ptechsolcopy_name');?>"/></td></tr>
                    <tr>
                    <td width="auto">Anchor URL</td> 
                    <td width="auto">
                        <input type="text" name="ptechsolcopy_link" value="<?php echo get_option('ptechsolcopy_link'); ?>" />
                    </td></tr><tr>
                    <td width="auto">
                    Additional Text
                    </td><td><input type="text" name="ptechsolcopy_text" value="<?php echo get_option('ptechsolcopy_text'); ?>" /></td>

                </tr>
            </table>

            <p class="submit">
                <input type="submit" value="<?php _e('Save Changes') ?>" />
            </p>
        </form>
    </div>
<?php  

}

?> 
```

嗨，这是我创建的版权插件的上述代码我需要知道如何默认设置版权注入的默认值。我想设置为

激活插件时如何设置默认版权，我对代码的任何错误帮助会很棒。我为我的目的注册了设置。即使我尝试了 $ptechsolcopy_default= "Copyright©" 的默认值并回调它的工作，我也需要为将来的偏好进行编辑，任何帮助都可以

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:16:00.310

您可以使用[插件激活挂钩](http://codex.wordpress.org/Function_Reference/register_activation_hook)来设置插件激活时所需的值。将此添加到您的插件文件以在`set_up_options`激活插件时运行该功能。

```
register_activation_hook( __FILE__, 'set_up_options' );

function set_up_options(){
  add_option('name', 'value');
} 
```

# android - setUseWideViewPort(true) 在android中添加了不必要的滚动

> ID：15334970
> 
> 赞同：0
> 
> 时间：2013-03-11T09:25:14.393
> 
> 标签：android, webview

对于 webview 我正在应用`setUseWideViewPort(true)`属性，然后即使 body 较少（在屏幕中修复），它也会显示水平和垂直滚动。

如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:38:56.283

尝试这个 ：

> webView.getSettings().setLoadWithOverviewMode(true);
> webView.getSettings().setUseWideViewPort(true);

# c# - sqlexec 进程接收到的语句 ID 无效

> ID：15334972
> 
> 赞同：1
> 
> 时间：2013-03-11T09:25:18.340
> 
> 标签：c#, asp.net, performance, connection, informix

我在插入过程中遇到以下问题（多行）：（插入了一些记录，在随机数量的记录之后我得到一个错误）！

> sqlexec 进程接收到的语句 ID 无效。

* * *

```
 public static int InsertGroupDetails(List<GroupDetails> grp_det)
        {

            using (IfxConnection con = new IfxConnection(ConfigurationSettings.AppSettings["str_rm"].ToString()))
            {
                int affectedRow = -1;
                StringBuilder cmdTxt = new StringBuilder();
                cmdTxt.Append(" INSERT INTO rdm_groupdetails(group_id,dep_code,dep_year,dep_name,boss_num,boss_name) VALUES (?, ?, ?, ?, ?, ? ) ");
                foreach (GroupDetails grp in grp_det)
                {
                    if (con.State == ConnectionState.Closed)
                    {
                        con.Open();
                    }

                    IfxCommand myIfxCmd = new IfxCommand(cmdTxt.ToString(), con);

                    myIfxCmd.CommandType = CommandType.Text;
                    myIfxCmd.Parameters.Clear();

                    myIfxCmd.Parameters.Add("group_id", grp.Group_id);
                    myIfxCmd.Parameters.Add("dep_code", grp.Dep_code);
                    myIfxCmd.Parameters.Add("dep_year", grp.Dep_year);
                    myIfxCmd.Parameters.Add("dep_name", grp.Dep_name);
                    myIfxCmd.Parameters.Add("boss_num", grp.Boss_code);
                    myIfxCmd.Parameters.Add("boss_name", grp.Boss_name);

                    affectedRow = myIfxCmd.ExecuteNonQuery();

                }
                con.Close();
                con.Dispose();
                return affectedRow;
            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T09:35:50.933

最可能的情况是`grp.Group_id`, `grp.Dep_code`, `grp.Dep_year`,或`grp.Dep_name`中的一个至少用于一个。*不发送*带值的参数值；你可能会重写：`grp.Boss_code``grp.Boss_name``null``grp``null`

 *```
myIfxCmd.Parameters.Add("group_id", ((object)grp.Group_id) ?? DBNull.Value); 
```

等（即对于他们每个人）；这将为任何此类值传递一个数据库`null`（与 C# 不同）。`null`

我要做的第二件事是重用单个命令实例：

```
using(var myIfxCmd = new IfxCommand(cmdTxt.ToString(), con))
{
    myIfxCmd.CommandType = CommandType.Text;

    // declare parameters (without values; note you might need to declare types)
    var id = myIfxCmd.Parameters.Add("group_id");
    // ... times 6
    if (con.State == ConnectionState.Closed)
    {
        con.Open();
    }
    foreach (GroupDetails grp in grp_det)
    {
        // assign parameter values for this iteration
        id.Value = ((object)grp.Group_id) ?? DBNull.Value;
        // ... times 6
        myIfxCmd.ExecuteNonQuery();
    }
} 
```*

# php - PHP 工作流程 - 函数的执行顺序

> ID：15334973
> 
> 赞同：14
> 
> 时间：2013-03-11T09:25:21.337
> 
> 标签：php, workflow, execution

我想知道 PHP 引擎解释函数声明的顺序。我不知道为什么 somethimes PHP 显示 Call to undefined function 致命错误，而 somethimes 解释器看到该函数没有问题。

假设我的代码是：

```
echo theRest(4,3);

function theRest($a, $b)
{
   return $a % $b;
} 
```

请参阅调用后声明的函数，这可以正常工作。这意味着PHP在解释之前读取整个文件？

另一个例子：

```
echo theRest(4,3);

include('test2.php'); 
```

*test2.php*

```
function theRest($a, $b)
{
    return $a % $b;
} 
```

在这里我收到致命错误：调用未定义的函数 theRest()。这是为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T09:42:00.073

> 意味着PHP在解释之前正在读取整个文件？

是的，PHP 一次解析一个文件。并且“include”是一个语句，而不是在编译时发生的事情，因此一旦到达包含行，就会解析包含的文件。另一方面，函数定义不是语句，而是在编译时处理，**除非**它们位于控制结构中。这就是以下工作的原因：

```
if (!function_exists('ucwords')) {
    function ucwords($str) {
        //...
    }
} 
```

因此，文件中已解析**并**位于控制结构之外的每个函数和类定义都可以立即使用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-11T09:41:04.550

当 PHP 读取文件时，它会将其编译为字节码（编译时），然后执行（执行时/运行时）。

无条件函数声明是在编译时读取的，因此在执行代码时函数是已知的。

另一方面，包含在执行时执行，因此在包含文件中定义的函数在其`include()`本身执行之前不可用。不能在编译时执行包含，因为参数可能是动态的（例如`include $path_to_file;`）并且取决于[`include_path`](http://www.php.net/manual/en/ini.core.php#ini.include-path)您的代码可能修改的设置。

[该文档](http://www.php.net/manual/en/functions.user-defined.php)对此非常清楚：

> 函数在被引用之前不需要定义，**除非**一个函数是有条件地定义的，如下面的两个例子所示。

使用 时`include()`，您的函数实际上是有条件定义的（例如，`include "foo.php";`可以根据`include_path`设置包含一个文件或另一个文件）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T09:54:37.057

在这段代码中：

```
echo theRest(4,3);

function theRest($a, $b)
{
   return $a % $b;
} 
```

首先编译整个代码，然后运行您的代码。但是，在这段代码中：

```
echo theRest(4,3);

include('test2.php'); 
```

语句本身被`include`编译但直到代码到达执行点才被执行。

`include`在引用之前放置它可以修复它：

```
include('test2.php');

echo theRest(4,3); 
```

# linux - 如何逃脱“。” 在awk？

> ID：15334976
> 
> 赞同：0
> 
> 时间：2013-03-11T09:25:42.647
> 
> 标签：linux, bash, awk, escaping

由于某种原因，反斜杠不起作用。这适用于带有分隔数据的文件。

现在这是我的表达是：

```
output=$(awk -F '|''BEGIN {count=0;} $2==Smith {count++; print count $1}' customer)

echo $output 
```

给我

```
11001 21002 31003 
```

我希望输出看起来像：

```
1\. 1001
2\. 1002
3\. 1003 
```

这是我的尝试..

```
awk -F '|''BEGIN {count=0;} $2==Smith {count++; print count, '\.', $1}' customer 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T09:28:19.773

用双引号打印语句：

```
awk -F '|' 'BEGIN {count=0;} $2==Smith {count++; print count". "$1}' customer 
```

# asp.net-mvc-4 - 使用自引用类映射

> ID：15334986
> 
> 赞同：0
> 
> 时间：2013-03-11T09:26:15.327
> 
> 标签：asp.net-mvc-4, automapper

我正在尝试使用自动映射器将以下 Employee 域对象映射到 EmployeeViewModel。

我能够映射诸如 Id、FirstName、LastName 之类的属性。但无法映射下属属性。

使用`Mapper.CreateMap<Employee, EmployeeViewModel>()`过，但不知道如何映射下属属性。

任何人都可以帮助如何映射以下课程。

```
public class Employee
{
  public int Id {get; set;}
  public int FirstName{get; set;}
  public int LastName{get; set;}
  public Employee Manager{get; set;}
}

public class EmployeeViewModel
{
  public int Id {get; set;}
  public int FirstName{get; set;}
  public int LastName{get; set;}
  public List<Employee> Subordinates {get; set;}
} 
```

**看法**

```
@helper ShowTree(IEnumerable<EmployeeViewModel> emp)
{
<ul>
    @foreach (var e in emp)
    {
        <li>
            @e.FirsyName
            @if (e.Children.Any())
            {
                @ShowTree(e.Children)
            }
        </li>
    }
</ul>
} 
```

谢谢，-纳伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:05:54.283

因为 Employee 实体不包含名为 Subordinates 的 List 属性，所以它不会被自动映射。要将 映射到从属属性，您需要将视图模型从属属性更改为相同的类型，即一个名为 manager 的 Employee 对象。

```
public class Employee()
{
    public int Id {get; set;}
    public int FirstName{get; set;}
    public int LastName{get; set;}
    public Employee Manager {get; set;} 
}

public class EmployeeViewModel()
{
    public int Id {get; set;}
    public int FirstName{get; set;}
    public int LastName{get; set;}
    public Employee Manager {get; set;} 
} 
```

但是从上面看，映射对象是没有意义的，因为您的视图直接类似于您的域 Employee 对象。如果您需要更改域实体来表示视图，请仅使用视图模型。

不清楚您要做什么，如果您展示您的观点，那么我将能够提供更多帮助。

# core-data - NSLocalizedDescription = "操作无法完成。（Cocoa 错误 1550。）"

> ID：15334987
> 
> 赞同：1
> 
> 时间：2013-03-11T09:26:18.283
> 
> 标签：core-data

我有以下问题：

设置同一实体的元素之间的关系是可行的，但 2 个不同实体之间的关系往往会出错。这是尝试保存时的错误输出：

```
NSLocalizedDescription = "The operation couldn\U2019t be completed. (Cocoa error 1550.)";

NSValidationErrorKey = responsible;

NSValidationErrorObject = "<Actor: 0x8876840> (entity: Actor; id: 0x8875210 <x-coredata://599B45F7-F346-4674-B1B9-5BAEBD575E74/Actor/p2> ; data: {\n    belongings = \"<relationship fault: 0x8a0c660 'belongings'>\";\n    name = Sofie;\n    orderingValue = 2;\n    performsA = \"<relationship fault: 0x8a190d0 'performsA'>\";\n    performsC = \"<relationship fault: 0x8a19110 'performsC'>\";\n    performsI = \"<relationship fault: 0x8a19150 'performsI'>\";\n    performsR = \"<relationship fault: 0x8a19190 'performsR'>\";\n    responsible =     (\n        \"0x8884e10 <x-coredata://599B45F7-F346-4674-B1B9-5BAEBD575E74/Goal/p1>\"\n    );\n    supervisedBy = \"<relationship fault: 0x8a191f0 'supervisedBy'>\";\n    supervising = \"<relationship fault: 0x8a19230 'supervising'>\";\n    type = Person;\n})";

NSValidationErrorValue = "Relationship 'responsible' on managed object (0x8876840) <Actor: 0x8876840> (entity: Actor; id: 0x8875210 <x-coredata://599B45F7-F346-4674-B1B9-5BAEBD575E74/Actor/p2> ; data: {\n    belongings = \"<relationship fault: 0x8a0c660 'belongings'>\";\n    name = Sofie;\n    orderingValue = 2;\n    performsA = \"<relationship fault: 0x8a190d0 'performsA'>\";\n    performsC = \"<relationship fault: 0x8a19110 'performsC'>\";\n    performsI = \"<relationship fault: 0x8a19150 'performsI'>\";\n    performsR = \"<relationship fault: 0x8a19190 'performsR'>\";\n    responsible =     (\n        \"0x8884e10 <x-coredata://599B45F7-F346-4674-B1B9-5BAEBD575E74/Goal/p1>\"\n    );\n    supervisedBy = \"<relationship fault: 0x8a191f0 'supervisedBy'>\";\n    supervising = \"<relationship fault: 0x8a19230 'supervising'>\";\n    type = Person;\n}) with objects {(\n    <NSManagedObject: 0x8885d60> (entity: Goal; id: 0x8884e10 <x-coredata://599B45F7-F346-4674-B1B9-5BAEBD575E74/Goal/p1> ; data: {\n    concerning = \"<relationship fault: 0x8a1ba40 'concerning'>\";\n    conflictedBy = \"<relationship fault: 0x8a1c5c0 'conflictedBy'>\";\n    conflicting = \"<relationship fault: 0x8a1c600 'conflicting'>\";\n    higherLevelGoalAND = \"<relationship fault: 0x8a1c640 'higherLevelGoalAND'>\";\n    higherLevelGoalOR = \"<relationship fault: 0x8a1c680 'higherLevelGoalOR'>\";\n    lowerLevelGoalAND = \"<relationship fault: 0x8a1c6c0 'lowerLevelGoalAND'>\";\n    lowerLevelGoalOR = \"<relationship fault: 0x8a1c700 'lowerLevelGoalOR'>\";\n    name = \"Customer satisfaction\";\n    operationalization = \"<relationship fault: 0x8a1c740 'operationalization'>\";\n    orderingValue = 1;\n    responsibles =     (\n        \"0x8875210 <x-coredata://599B45F7-F346-4674-B1B9-5BAEBD575E74/Actor/p2>\"\n    );\n})\n)}"; 
```

这是我的一些代码：

```
Actor.h

...
@interface Actor (CoreDataGeneratedAccessors)
- (void)addResponsibleObject:(Goal *)value;

- (void)removeResponsibleObject:(Goal *)value;

- (void)addResponsible:(NSSet *)values;

- (void)removeResponsible:(NSSet *)values;
... 
```

ActorOverview.h

```
...
@interface ActorOverview : NSObject

{

NSMutableArray *allActors;

NSMutableArray *actorFetch;

NSManagedObjectContext *context;

NSManagedObjectModel *model;

}
@property (nonatomic, retain) NSManagedObjectContext *context;
...
-(void)relationshipBetweenActor:(Actor *)a andEntity:(NSManagedObject *)e withInfo:(NSString *)info action:(NSString *)action;
... 
```

（relationshipBetweenActor:andEntity:withInfo:action: 在设置 2 个演员之间的关系时工作正常）

但是，当我执行以下操作来设置目标和演员之间的关系时，它失败了（“演员对某个目标负责”）

在 ActorZoomViewController.m 中

```
// Define the actor

ActorOverview *ao = [[ActorOverview alloc]init];

Actor *actorInZoom = [ao fetchActorWithOrderingValue:currentActor];

// Define the goal

GoalOverview *go = [[GoalOverview alloc]init];

NSArray *goals = [[GoalOverview defaultOverview]allGoals];

Goal *goalInZoom = [goals objectAtIndex:0];

// Adding a new relationship

[ao relationshipBetweenActor:actorInZoom andEntity:goalInZoom withInfo:@"" action:@"add"];

// Save

[[ActorOverview defaultOverview]saveChanges]; 
```

在 ActorOverview.m 中调用 relationshipBetweenActor:andEntity:withInfo:action:

```
-(void)relationshipBetweenActor:(Actor *)a andEntity:(NSManagedObject *)e withInfo:(NSString *)info action:(NSString *)action

{
NSEntityDescription *ed = [e entity];

 if([[ed name] isEqualToString:@"Goal"])

     {

         if([action isEqualToString:@"add"])

         {

             NSLog(@"NEW relationship between Actor: %@ and Goal: %@", [a name], [e name]);

             [a addResponsibleObject:e];            

         }

         if([action isEqualToString:@"remove"])

         {

             NSLog(@"REMOVED relationship between Actor: %@ and Goal: %@", [a name], [e name]);

             [a removeResponsibleObject:e];

         }

     }

} 
```

这会导致保存时出错。

谁能给我一些建议？

# json - highcharts json 多个日期时间序列

> ID：15334993
> 
> 赞同：0
> 
> 时间：2013-03-11T09:26:31.830
> 
> 标签：json, graph, highcharts, series

我试图在同一张图上绘制 2 个系列，但运气不佳。系列数据来自 mysql php 后端 (json)。

下面是 json 输出的示例；

```
[
    {
        "name": [
            "Outside Temperature"
        ],
        "data": [
            "1362992572,9.708",
            "1362992752,9.948",
            "1362992936,9.995",
            "1362993292,10.19"
        ]
    },
    {
        "name": "inside",
        "data": [
            "1362992572,30",
            "1362992752,30.5",
            "1362992933,30.7",
            "1362993112,30.8",
            "1362993292,30.4"
        ]
    }
] 
```

我的 highcharts 代码中有以下内容 - [http://pastebin.com/BxQxhJmZ](http://pastebin.com/BxQxhJmZ)但这甚至不会生成图表。

如果有人可以提供帮助，将不胜感激。我真的很难通过绘制两组数据来做一些相对简单的事情！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:17:23.260

如果您使用日期时间 xAxis，则需要将 (1362992572) 等值乘以 1000，以实现 Javascript 时间戳格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T10:11:58.877

我认为您的数据格式不正确。我希望它看起来更像：

“数据”：[[1362992572,9.708]，[1362992752,9.948]，[1362992936,9.995]，[1362993292,10.19]]

或者

```
"data": [
        {x:1362992572,y:9.708},
        {x:1362992752,y:9.948},
        {x:1362992936,y:9.995},
        {x:1362993292,y:10.19}
    ] 
```

如果可以，请在您的 php 后端进行更改。如果没有，您将不得不在 javascipt 中重新格式化它，将字符串值拆分为逗号上的两个字段。

# android - 使用 GStreamer 在 Android 上的 Mpeg TS 播放器

> ID：15334995
> 
> 赞同：1
> 
> 时间：2013-03-11T09:26:38.963
> 
> 标签：android, ffmpeg, gstreamer, mpeg2-ts

我应该在我的 win 7 平台上使用 GStreamer 和 ffmpeg 的库在 android 中设计一个 MPEG-TS 解复用器和播放器。我在我的 win 7 系统中使用 eclipse juno 版本。现在，我成功地在 eclipse 中配置了 ffmpeg。我从 docs.gstreamer.com 下载了 GStreamer sdk，并在 eclipse 中成功配置了 gstreamer。事实证明，GStreamer 的第 5 个教程只是一个媒体播放器应用程序。但是当我执行那个项目时，我看不到视频。只能听到音频声音。因此，我的下一步应该是在我的 Eclipse 中配置 gst-ffmpeg 插件并编写一个接受传输流 (.ts) 文件的媒体播放器。但是在互联网上浏览了很多之后，我无法获得进一步移动的单一解决方案。我使用的是windows平台，所以问题增加了一点。我知道有接受 .ts 格式文件的 Vplayer。但我无法访问 Vplayer 的源代码。任何人都可以请进一步指导我吗？需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:14:58.003

尝试修改 jni 文件夹中的 Android.mk 以在 GSTREAMER_PLUGINS 中包含以下插件：

```
mpeg2dec mpegdemux2 mpegtsdemux mpegtsmux 
```

然后重新构建。TS 文件（在您的 SD 卡上找到）现在应该可以播放了。

如果您需要其他插件，请查看 GStreamerSDK/share/gst-android/ndk-build/ 中的 plugins.mk