# StackOverflow 问答 13953000-13953999

# c++-cli - 在 C++ 声明中使用 ^ 字符是什么意思？

> ID：13953002
> 
> 赞同：5
> 
> 时间：2012-12-19T12:59:52.923
> 
> 标签：c++-cli

> **可能重复：**
> [插入符号 ('^') 在 C++/CLI 中是什么意思？](https://stackoverflow.com/questions/202463/what-does-the-caret-mean-in-c-cli)
> [在 C++/CLR 中，帽子字符 ^ 有什么作用？](https://stackoverflow.com/questions/500580/in-c-clr-what-does-a-hat-character-do)

当应用于变量声明中的数据类型时， **^**字符在 C++ 中的含义是什么，如下所示：

```
String^ input; 
```

或者

```
List<String^>^ phoneNumbers; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T13:01:44.810

假设一个微软编译器，这不是来自 C++，而是来自微软自己的 C++ 方言，称为*C++/CLI*。它表示一个 .NET 垃圾收集对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T13:01:39.117

这是一个托管指针。类似于 *，但由 GC 收集。

哦，是的，显然它只适用于 C++/CLI（你的帖子已经被标记为 cli，但我觉得有必要明确说明这一点）。

# java - 内容 - 处置标头无法正常工作

> ID：13953004
> 
> 赞同：2
> 
> 时间：2012-12-19T12:59:57.803
> 
> 标签：java, image

我正在构建一个小型图像缩放工具，用户首先将图像上传到网页，并在提交该表单时显示放大的图像以供保存。但是，当用户发送请求以使用不同的宽度和高度参数缩放同一图像时，就会出现问题。在这种情况下，我在 servlet 中设置的内容处置标头似乎不起作用，并且第二个请求后的图像仅使用 servlet 的类名而不是我在内容处置中提到的文件名和扩展名发送标题。

```
response.setContentType("image/jpeg");
response.setHeader("Content-disposition","inline;filename="+filename); 
```

我也尝试在编写器本身中对其进行硬编码，但我使用的那个似乎没有任何文件名参数

```
private void doDownload(HttpServletResponse resp, BufferedImage bump,
            InputStream filecontent) throws IOException {

        //http://stackoverflow.com/questions/9340569/jpeg-image-with-wrong-colors
        OutputStream out = resp.getOutputStream();
        Iterator<ImageWriter> iter = ImageIO
                .getImageWritersByMIMEType("image/jpeg");
        ImageWriter writer = iter.next();
        ImageWriteParam iwp = writer.getDefaultWriteParam();
        iwp.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);
        iwp.setCompressionQuality(1);
        ImageOutputStream imgOut = new MemoryCacheImageOutputStream(out);
        writer.setOutput(imgOut);
        IIOImage image = new IIOImage(bump, null, null);
        writer.write(null, image, iwp);
        out.flush();
        out.close();
        writer.dispose();

    } 
```

有什么方法可以在将图像写入输出流时设置图像的文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:34:37.863

在这个类中声明一个静态整数变量。

```
private static int fileno=0;

private void doDownload(HttpServletResponse resp, BufferedImage bump,
            InputStream filecontent) throws IOException {

Iterator iter = ImageIO.getImageWritersByFormatName("jpeg");
ImageWriter writer = (ImageWriter)iter.next();
ImageWriteParam iwp = writer.getDefaultWriteParam();
iwp.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);
iwp.setCompressionQuality(1);
String OUTPUTFILE = "C:/Users/Harish/Desktop/jpegFile"+fileno++;
File file = new File(OUTPUTFILE);
//Your fileName will be jpegFile0; and next time jpegFile1 and so on.
FileImageOutputStream imgOut = new FileImageOutputStream(file);
writer.setOutput(imgOut);
IIOImage image = new IIOImage(bump, null, null);
writer.write(null, image, iwp);
writer.dispose();

 } 
```

# php - 在 PHP 5.2.6 中获取每月的第一天？

> ID：13953009
> 
> 赞同：1
> 
> 时间：2012-12-19T13:00:14.797
> 
> 标签：php, jquery, date, jquery-ui-datepicker

我有以下场景：用户选择年、月的日期选择器，并使用它来显示所选月份的记录。使用 Ajax 将所选值传递给 details_subcontractor.php。Datepicker 已从[jQuery UI DatePicker 中接受的答案修改为仅显示月份年份](https://stackoverflow.com/questions/2208480/jquery-ui-datepicker-to-show-month-year-only)。示例代码如下：

```
/**
 *  Datepicker in datepicker.php
 *
 */

$("#year_month").datepicker({"dateFormat":"yy-mm-dd",
    changeMonth: true,
    changeYear: true,
    dateFormat: 'yy-mm',
    showButtonPanel: true,
    onClose: function(dateText, inst) { 
        var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
        var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
        $(this).datepicker('setDate', new Date(year, month, 1));
    }
});

/**
 *  Ajax call
 *
 */

var year_month = $("#year_month").val();
$.ajax({
    url:"details_subcontractor.php",
    data:{
        year_month:year_month
    },
    success:function(data){
        $("#content_report").html(data);
    }
});

/**
 *  details_subcontractor.php
 *
 */

//$_GET['year_month']; //2012-12
$start = date('Y-m-d', strtotime($_GET['year_month']));                     //2012-12-18
$start = date('Y-m-d', strtotime('first day of ' . $_GET['year_month']));   //1970-01-01
$start = date('Y-m-d', strtotime($_GET['year_month'] . ' first day'));      //2012-12-19
$end   = date('Y-m-d', strtotime('last day of ' . $_GET['year_month']));    //1970-01-01
$end   = date('Y-m-d', strtotime($_GET['year_month'] . ' last day'));       //2012-12-17 
```

但是，正如内联评论所示，我无法获得本月的第一天和最后一天。我知道在 PHP 5.3 中引入了“of”，其中包含“of”的 2 行失败，但我不理解其他三个的输出。最后我附加了“-01”和“-31”来表示一个月的第一天和最后一天。有没有人有更好的解决方案，适用于 PHP 5.2.6？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:09:36.240

您可以放心地假设每个月的第一天是`1`. 采用

```
date('Y-m-t', strtotime($_GET['year_month'])); 
```

该月的最后一天。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:12:06.400

```
// The first day is always 01, so you can hardcode it
$start = date('Y-m-01', strtotime($_GET['year_month']));

// last day you can get by `t` format parameter, which contains total days count for given month.
$end = date('Y-m-t', strtotime($_GET['year_month'])); 
```

# php - 意外令牌非法多行字符串javascript + php

> ID：13953011
> 
> 赞同：0
> 
> 时间：2012-12-19T13:00:15.330
> 
> 标签：php, javascript, google-chrome

我将**多行字符串**从 PHP 传递到 Javascript，但`Unexpected Token Illegal`出现错误

我认为它的多行导致错误的事实，但我不确定。我什至不需要字符串是多行的，但它在数据库中存储为多行（我无法改变它）。

这就是我试图删除多行字符但它不起作用

```
$str= str_replace(array("",json_decode('\u000A'),json_decode('\u000B'),
                 json_decode('\u000C'),json_decode('\u000D'),
                 json_decode('\u0085'),json_decode('\u2028'),
                 json_decode('\u2029')),"",$str); 
```

基本上我试图从字符串中删除所有类型的换行符

我检查了其他问题，但他们似乎没有解决问题

我需要在 PHP 或 javascript 方面进行修复。使用 Chrome

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:05:38.207

这些字符串都不是有效的 JSON。他们会是如果你在里面有引号..即`json_decode('"\u000A"')`

# c++ - 通过他的 x 轴反转曲线

> ID：13953013
> 
> 赞同：-4
> 
> 时间：2012-12-19T13:00:32.800
> 
> 标签：c++, formula, curve

在java中通过x轴旋转曲线的公式是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:06:59.930

假设您将曲线作为 Points 数组，这里类似于伪代码：

```
Point[] curve;

double x_max = curve[0].x, x_min = curve[0].x;
for( point : curve) {
  x_max = max(x_max, point.x);
  x_min = max(x_min, point.x);
}

for (point : curve) {
  point.x = x_max - point.x + x_min;
} 
```

它是如何工作的？事实上，我尝试镜像曲线的归一化坐标 - 这是点从开始时的坐标`x = 0`（公式为`point.x - x_min`），然后从 x_max 中减去结果，以便现在从右到左定义曲线从左到右。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T13:04:47.637

很难知道这与 C++ 或 Java 有什么关系，但从数学上讲，如果您有一个`f(x)`想要沿 x 轴翻转的函数，您只需执行`f(-x)`.

# java - 我可以更改 typesafeEnumMemberName 生成的 bij cxf-xjc-plugin 吗？

> ID：13953017
> 
> 赞同：3
> 
> 时间：2012-12-19T13:00:53.580
> 
> 标签：java, enums, xsd, jaxb, cxf-xjc-plugin

我正在使用来自 xsd 的 org.apache.cxf:cxf-xjc-plugin 生成 java 类文件。我正在使用全局绑定`typesafeEnumMemberName="generateName"`，因此当插件无法为枚举成员创建有效的 Java 标识符时，插件会为枚举类生成成员名称。

我的问题是：
有没有办法改变这些类型安全枚举成员名称的生成方式？
例如，更改它以包含值？这样，成员就代表了值，而不仅仅是一个递增的数字。

* * *

附加信息：
我拥有的 xsd 指定了以下 simpleType：

```
<xs:simpleType name="CodeBurgelijkeStaat">
        <xs:annotation>
            <xs:documentation>COD366_NEN</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:string">
            <xs:enumeration value="0">
                <xs:annotation>
                    <xs:documentation>Onbekend</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
            <xs:enumeration value="1">
                <xs:annotation>
                    <xs:documentation>Ongehuwd en geen geregistreerd partner en nooit gehuwd of geregistreerd partner geweest</xs:documentation>
                </xs:annotation>
            </xs:enumeration>
        </xs:restriction>
    </xs:simpleType> 
```

这导致以下类：

```
@XmlType(name = "CodeBurgelijkeStaat")
@XmlEnum
public enum CodeBurgelijkeStaat {

    /**
     * Onbekend
     * 
     */
    @XmlEnumValue("0")
    VALUE_1("0"),

    /**
     * Ongehuwd en geen geregistreerd partner en nooit gehuwd of geregistreerd partner geweest
     * 
     */
    @XmlEnumValue("1")
    VALUE_2("1");

    private final String value;

    CodeBurgelijkeStaat(String v) {
        value = v;
    }

    public String value() {
        return value;
    }

    public static CodeBurgelijkeStaat fromValue(String v) {
        for (CodeBurgelijkeStaat c: CodeBurgelijkeStaat.values()) {
            if (c.value.equals(v)) {
                return c;
            }
        }
        throw new IllegalArgumentException(v);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:57:21.840

你的意思是这样的？这是由 maven jaxws:wsimport 插件完成的

XSD：

```
 <xs:simpleType name="Status">
                <xs:restriction base="xs:string">
                    <xs:enumeration value="FirstStatus"/>
                    <xs:enumeration value="SecondStatus"/>
                    <xs:enumeration value="ThirdStatus"/>
                </xs:restriction>
            </xs:simpleType> 
```

生成的java代码：

```
public enum Status {

    @XmlEnumValue("FirstStatus")
    FIRST_STATUS("FirstStatus"),
    @XmlEnumValue("SecondStatus")
    SECOND_STATUS("SecondStatus"),
    @XmlEnumValue("ThirdStatus")
    THIRD_STATUS("ThirdStatus");
    private final String value;

    Status(String v) {
        value = v;
    }

... 
```

# jquery - fancybox - 如何从打开的图像中放置链接？

> ID：13953018
> 
> 赞同：9
> 
> 时间：2012-12-19T13:00:53.203
> 
> 标签：jquery, image, hyperlink, fancybox

-largeAny Ideas 伙计们？我正在尝试在fancybox 中链接打开的图像。我到处都看过了！听起来很简单...

所以这是我正在使用的代码：

```
<a id="manual1" href="javascript:;"><img src="/example-thumb.png" alt="example" /></a>
<script type="text/javascript" src="/Cms_Data/Sites/Base/Files/js/fancyboxV2.1.0/jquery.fancybox.pack.js"></script>

<script type="text/javascript">

$("#manual1").click(function() {
$.fancybox([
    '/example-large.jpg',
    '/example-large2.jpg',
    {
        'href'  : '/example-large3.jpg',
        'title' : 'Lorem ipsum '
    }
    ], {
        padding : 38,
        nextEffect : 'fade',
        prevEffect : 'fade'
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T13:42:17.310

我仍然不确定你在追求什么，但是如果你点击锚点时你可以做两件事：你找到图像及其 src 并将 -thumb 替换为 -full 并使用它来触发你的fancybox方法，或者你可以使用 html5 数据属性并告诉你想要什么图像 url：

```
<a id="manual1" data-image="/example-full.jpg,/example-full-2.jpg'><img src="/example-thumb.png" alt="example" /></a>

<script type="text/javascript">
$('#manual1').click(function() {
    var data = $(this).data('images').split(','),
        options = {
            padding : 38,
            nextEffect : 'fade',
            prevEffect : 'fade',
            type: 'image'
        };
    $.fancybox.open(data , options );
})
 </script> 
```

和一个演示：http: [//jsfiddle.net/voigtan/jJpAM/2/](http://jsfiddle.net/voigtan/jJpAM/2/)

**如果您只使用一张图片，请进行演示**

```
$('.test').click(function() {
    var a = this,
        images = [],
        data = $(a).data('images').split(','),
        options = {
            padding : 38,
            nextEffect : 'fade',
            prevEffect : 'fade',
            type: 'image',
            afterShow: function() {
                $("img.fancybox-image").click(function() {
                    window.location.href = a.href;                        
                });
            }
        };
    $.fancybox.open(data , options );
    return false;
}) 
```

和另一个演示：http: [//jsfiddle.net/voigtan/jJpAM/3/](http://jsfiddle.net/voigtan/jJpAM/3/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T18:29:27.437

```
what I'm after is when the <a id="manual1"> is clicked the example-large is 
displayed in fancybox - the viewed example-large.jpg can then be clicked 
to go to a new page 
```

根据您的代码（fancybox 手动方法），另一种更简单、更简洁的方法是为每个图像添加自定义**链接**`beforeShow`选项，然后使用回调将图像与 an`<a>`及其对应的**链接**一起包装，例如：

```
$(document).ready(function() {
    $("#manual1").click(function() {
        $.fancybox.open([
            {
            href: 'http://fancyapps.com/fancybox/demo/1_b.jpg',
            title: 'this image links to bbc news',
            link: 'http://www.bbc.co.uk/news/'},
        {
            href: 'http://fancyapps.com/fancybox/demo/2_b.jpg',
            title: 'this image links to jquery',
            link: 'http://jquery.com'},
        {
            href: 'http://fancyapps.com/fancybox/demo/3_b.jpg',
            title: 'this image links to fancybox',
            link: 'http://fancyapps.com'}
        ], {
            beforeShow: function() {
                $(".fancybox-image").wrap('<a href="' + this.link + '" />')
            },
            padding: 38,
            nextEffect: 'fade',
            prevEffect: 'fade'
        });
        return false;
    });
}); // ready 
```

通过这种方式，您不需要`data-`在 html 中传递 long 属性（也不需要拆分）并保持简单：

```
<a id="manual1" href="javascript:;"><img src="/example-thumb.png" alt="example" /></a> 
```

见**[演示](http://jsfiddle.net/w6p49/)**

**请注意**，在我的演示中，我更改了导航箭头的 css 属性以避免与链接图像重叠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-24T10:32:32.667

这个更简单简短的代码

```
$.fancybox.open([
{
    href : 'http://fancyapps.com/fancybox/demo/1_b.jpg',
    link : 'http://jquery.com/'}
],{
    afterShow: function() {
    $(".fancybox-image").wrap('<a href="' + this.link + '" />')
        },   

    padding : 0   
}); 
```

# transactions - Ember-data：如何在控制器动作之间共享和更新事务中的对象？

> ID：13953019
> 
> 赞同：6
> 
> 时间：2012-12-19T13:01:15.030
> 
> 标签：transactions, ember.js, nested-attributes, ember-data

我在 GitHub 上找到了[https://github.com/dgeb/ember_data_example](https://github.com/dgeb/ember_data_example)下 ember-data 的一个很好的工作示例，并尝试通过嵌套资源（'has_many：comments'）对其进行扩展。在原始示例中，每次打开编辑视图时都会创建一个新事务，如果离开编辑模式，则会提交/回滚。

我想在 content.comments 中添加一条新评论 我不能这样做并且出现错误，因为“内容”已经在事务中（错误：断言失败：一旦记录发生更改，您就不能将其移动到不同的事务中）。

我试图实现的想法是错误的，我必须采取另一种方式吗？

```
App.EditContactController = Em.Controller.extend({
  content: null,

  addComment: function () {
    // ERROR here:
    this.get('content.comments').addObject(App.Comment.createRecord({body: ''}));
  },

  enterEditing: function() {
    this.transaction = this.get('store').transaction();
    if (this.get('content.id')) {
      this.transaction.add(this.get('content'));
    } else {
      this.set('content', this.transaction.createRecord(App.Contact, {}));
    }
  },

  exitEditing: function() {
    if (this.transaction) {
      this.transaction.rollback();
      this.transaction = null;
    }
  },

  updateRecord: function() {
    // commit and then clear the transaction (so exitEditing doesn't attempt a rollback)
    this.transaction.commit();
    this.transaction = null;
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:03:39.663

我认为您可以从我所做的事情中获得灵感：[https ://github.com/sly7-7/ember_data_example/commit/57ee7ea6ca44e3a2fbba96fff4ad088a8d786a3c](https://github.com/sly7-7/ember_data_example/commit/57ee7ea6ca44e3a2fbba96fff4ad088a8d786a3c)

也许简单地做`this.get('content.comments').createRecord({body: ''})`就行了。此调用引用 ManyArray.createRecord()，并使用关系所有者的事务来创建新记录。见[https://github.com/sly7-7/data/blob/master/packages/ember-data/lib/system/record_arrays/many_array.js#L163](https://github.com/sly7-7/data/blob/master/packages/ember-data/lib/system/record_arrays/many_array.js#L163)

# c# - 如果带有时区的时间戳，oracle odp.net SafeMapping 转换 - 如何获取偏移量而不是区域名称

> ID：13953020
> 
> 赞同：6
> 
> 时间：2012-12-19T13:01:16.080
> 
> 标签：c#, oracle, datetime, timezone, odp.net

在 c# 中，使用 odp.net，我调用了一个返回游标的 oracle 函数。一些列的类型是“带时区的时间戳”（TSTZ）。如果我直接使用[OracleDataAdapter](http://docs.oracle.com/cd/B19306_01/win.102/b14307/OracleDataAdapterClass.htm)，这些列将转换为 System.DateTime 并且时区信息会丢失。这是预期的行为，建议似乎是使用[SafeMapping](http://docs.oracle.com/cd/B28359_01/win.111/b28375/featSafeType.htm)强制转换为字符串，例如：

```
dataAdapter.SafeMapping.Add("column_name", typeof(string)); 
```

然后我确实将 TSTZ 作为字符串获取，但它使用的格式`DD-MON-YYYY HH:MI:SS.FF AM TZR`如下：

```
23-NOV-12 08.10.12.057868000 PM ASIA/CALCUTTA 
```

我想要的是偏移量（例如格式`DD-MON-YYYY HH:MI:SS.FF AM TZH:TZD`如下：

```
23-NOV-12 08.10.12.057868000 PM +04:30 
```

当我直接查询 oracle 时（比如在 Sql Developer 中），我可以使用

```
Alter Session Set Nls_Timestamp_Tz_Format='DD-MON-YYYY HH:MI:SS.FF AM TZH:TZM' 
```

得到我想要的格式。使用 odp.net 我尝试在 SetSessionInfo 中设置格式：

```
connection.Open();
OracleGlobalization glob = connection.GetSessionInfo();
glob.TimeStampTZFormat = "DD-MON-YYYY HH:MI:SS.FF AM TZH:TZM";
connection.SetSessionInfo(glob); 
```

以及`alter session`使用相同的连接执行命令，但都没有任何效果。我认为这是因为转换为字符串是在稍后阶段进行的，并且连接设置无效。

有没有其他方法可以让 odp.net 直接为我提供偏移量？我无法更改 oracle db 函数，因此在方法中使用例如 tz_offset 不是一个选项。

如果这是不可能的，将时区字符串转换为偏移量的最佳方法是什么？我目前正在考虑执行

```
select TZNAME, TZABBREV, tz_offset(TZNAME) as TZOFFSET
from V$TIMEZONE_NAMES 
```

一次建立一个查找表，但如果有更好的选择会很高兴。

我的数据检索代码，包括我尝试过的东西：

```
using (var connection = new OracleConnection(this.connectionString))
{
connection.Open();
OracleGlobalization glob = connection.GetSessionInfo();
glob.TimeStampTZFormat = "DD-MON-YYYY HH:MI:SS.FF AM TZH:TZM";
connection.SetSessionInfo(glob);
string sql = "ALTER SESSION " +
 "SET NLS_TIMESTAMP_TZ_FORMAT = 'YYYY-MM-DD\"T\"HH24:MI:SS\"Z\"'";

using (var cmd = connection.CreateCommand())
{
    cmd.CommandText = sql;
    cmd.ExecuteNonQuery();
}    

using (var cmd = connection.CreateCommand())
{
    cmd.CommandText = "fn_name";
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.BindByName = false;
    var output = cmd.Parameters.Add("return_value", OracleDbType.RefCursor);
    output.Direction = ParameterDirection.ReturnValue;
    cmd.Parameters.Add("id", id).Direction = ParameterDirection.Input;

    using (var dataAdapter = new OracleDataAdapter(cmd))
    {

        dataAdapter.SafeMapping.Add("TZ_COLUMN", typeof(string));
        dataAdapter.TableMappings.Add("Table", "Table");
        OracleGlobalization glob2 = connection.GetSessionInfo();
        glob2.TimeStampTZFormat = "DD-MON-YYYY HH:MI:SS.FF AM TZH:TZM";
        connection.SetSessionInfo(glob2);
        dataAdapter.Fill(dataSet);
    }
    foreach (DataRow row in dataSet.Tables[0].Rows)
    {
  // column is string with timezone name, I want offset
    }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T13:55:02.170

看起来一个非常简单的解决方案是设置

```
dataAdapter.ReturnProviderSpecificTypes = true; 
```

这似乎使 ODP.net 不执行到 .net System.DateTime 的有损转换，而是使用它自己的日期类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T03:50:24.580

也许以下链接可以提供帮助？

[http://docs.oracle.com/html/A96160_01/oratyp10.htm#1130922](http://docs.oracle.com/html/A96160_01/oratyp10.htm#1130922)

这告诉了 OracleTimeStampTZ 类型，它也可以存储时区信息。timezone 属性返回有关时区的信息。

# javascript - 图像映射不透明度

> ID：13953027
> 
> 赞同：1
> 
> 时间：2012-12-19T13:01:45.527
> 
> 标签：javascript, css, opacity, imagemapster

我正在开发一个项目，用户可以将鼠标悬停在不同的公寓上，并在每个区域旁边的工具提示框中查看价格等。

我为此使用 jquery+imagemapster，每个公寓都是地图上的一个区域，到目前为止效果很好。问题是客户端希望工具提示是透明的，当我在 div 样式中设置“不透明度”时没有任何反应，我尝试了所有主要浏览器。CSS 的其余部分效果很好，不透明度在常规 div 上有效，但不在工具提示内。如何在工具提示上设置不透明度？

我的 javascript 看起来像这样：

```
var image = $('#apartments1');
            image.mapster({
            toolTipClose: ["area-mouseout"],
            toolTipContainer: '<div style="border: 1px solid #ee6622; background: #FFFFFF; 
font-family:Arial; position:absolute; width:160px; padding:4px; margin: 4px;
 -moz-box-shadow: 0px 0px 7px #cc5511; ' + ' -webkit-box-shadow: 0px 0px 7px #cc5511; 
box-shadow: 0px 0px 7px #cc5511; -moz-border-radius: 6px 6px 6px 6px; 
-webkit-border-radius: 6px; ' +'border-radius: 6px 6px 6px 6px; opacity: 0.1;"></div>',
            clickNavigate: true, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:12:05.197

我为您构建了一个小演示（[jsFiddle](http://jsfiddle.net/ldaniell14260/3F88Q/)）。我刚刚复制了容器的 html 和 css。在这种情况下，不透明度有效，但您也可以看到将工具提示的不透明度设置为 10% 的问题：所有这些都将是 10%，文本也是如此。要更改此设置，请使用 png 作为背景或使用两个相互独立的 div 来获得效果。

顺便说一句：我会插入一个带有 id 的 div，然后在 css 文件中设置 div 的样式。而且`opacity: 0.1;`是每一个低点，你可能看不到它。

# java - JSF+Hibernate web应用开发环境

> ID：13953028
> 
> 赞同：1
> 
> 时间：2012-12-19T13:01:46.127
> 
> 标签：java, hibernate, jsf, ide, application-server

我想学习 JSF 并很快学习 Hibernate，我想知道人们通常将哪些 IDE（Netbeans、Eclipse、Jboss Developer Studio 等）和哪些应用程序服务器（EAP、Glassfish 等）用于这些框架。理想情况下，我希望已经有 java 文档支持的库。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:28:16.393

JSF + Hibernate 应该适用于任何应用程序服务器，而且它们也适用于 servlet 容器（Tomcat、Jetty）。您还应该决定使用哪个构建管理器 - Maven 或 Ant。

当我使用 maven + eclipse + Jetty 时，我将描述我会做什么：

1.  我已将 maven 配置为[下载源代码和 javadocs](https://stackoverflow.com/questions/5780758/maven-always-download-sources-and-javadocs)。因此，在我运行时编辑 pom.xml 后`mvn clean package`一切就绪
2.  要使其在 Eclipse 中工作（您需要安装 m2e 插件）：右键单击 Package Exploer->Import->Existing Maven Projects->Your project
3.  至于码头，您可以使用[maven-jetty-plugin并使用 mvn jetty:run 或](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin)[eclipse 本身](http://raymondhlee.wordpress.com/2011/09/17/setup-jettymaven-for-developing-web-applications-in-eclipse/)从命令行运行您的项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:10:35.120

虽然这篇文章可能会被关闭，因为它不是一个真正的问题并且受制于意见，但我仍然会为你提供我的意见。

我正在使用[Java EE 教程](http://docs.oracle.com/javaee/6/tutorial/doc/index.html)和[使用 GlassFish 3 开始 Java EE 6自己使用 NetBeans 和 Glassfish 学习 Java EE](https://rads.stackoverflow.com/amzn/click/com/143022889X)

对于应用程序服务器：JBoss 有很多托管选项，我还没有找到其他应用程序服务器这么多的选项。

如果您正在寻找已经支持的库，JBoss 和 Glassfish 都符合 Java EE 6 规范。Glassfish 是 EE6 的参考实现。

Jboss 偏爱 Eclipse 和 Maven（以及其他），而 Glassfish 偏爱 NetBeans 和 ANT（以及其他）。

话虽如此，我最后要说的是，任何选择都取决于您的目标以及您对工具链的熟悉程度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:11:40.957

我使用带有 Primefaces 的 Eclipse Enterprise、JSF 2.1.x，服务器的选择介于 Tomcat 7（用于简单的 webapps）和 JBoss 7.1（如果我想使用 EJB 技术）之间。

目前我确实使用 Eclipse Juno，但我有一些性能问题（这在很大程度上应该在待定的服务版本 2 中修复，或者我已经阅读过）。

# java - ApiProxy$ApplicationException: ApplicationError: 8 after created the API Access in google Cloud Storage

> ID：13953032
> 
> 赞同：3
> 
> 时间：2012-12-19T13:01:55.753
> 
> 标签：java, google-app-engine, google-cloud-storage

我创建了一个带有“可以编辑”的服务帐户名称来访问 Google 云存储。我使用[Complete sample Application](https://developers.google.com/appengine/docs/java/googlestorage/overview#Complete_Sample_App) for java 中提供的示例应用程序并部署在应用程序引擎中。在浏览器中调用 servlet 时出现这样的错误，

```
Uncaught exception from servlet
java.io.IOException
    at com.google.appengine.api.files.FileServiceImpl.translateException(FileServiceImpl.java:615)
    at com.google.appengine.api.files.FileServiceImpl.makeSyncCall(FileServiceImpl.java:588)
    at com.google.appengine.api.files.FileServiceImpl.create(FileServiceImpl.java:506)
    at com.google.appengine.api.files.FileServiceImpl.createNewGSFile(FileServiceImpl.java:153)
    at com.audioapp.ListpeopleServlet.doGet(ListpeopleServlet.java:36)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)

Caused by: com.google.apphosting.api.ApiProxy$ApplicationException: ApplicationError: 8: 
    at java.lang.Thread.getStackTrace(Thread.java:1495)
    at com.google.apphosting.runtime.ApiProxyImpl.doSyncCall(ApiProxyImpl.java:240)
    at com.google.apphosting.runtime.ApiProxyImpl.access$000(ApiProxyImpl.java:66)
    at com.google.apphosting.runtime.ApiProxyImpl$1.run(ApiProxyImpl.java:183)
    at com.google.apphosting.runtime.ApiProxyImpl$1.run(ApiProxyImpl.java:180)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java:180)
    at com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java:66)
    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:107)
    at com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:56)
    at com.google.appengine.api.files.FileServiceImpl.makeSyncCall(FileServiceImpl.java:584) 
```

谁能建议我解决这个问题。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:28:42.430

您是否按照文档 [1] -> 5 下的说明授予访问**权限。授予您的存储桶或对象的权限。**)?

您使用哪个 SDK 版本？可能是导致此异常的旧 SDK 版本。

[1] [https://developers.google.com/appengine/docs/java/googlestorage/overview](https://developers.google.com/appengine/docs/java/googlestorage/overview)

# jquery - 使用 jQuery 在 WordPress 中加载图像

> ID：13953033
> 
> 赞同：6
> 
> 时间：2012-12-19T13:01:57.543
> 
> 标签：jquery, wordpress, path

我正在为 WordPress 开发模板页面，当我单击路径是的按钮时`namesite.com/wordpress/test`需要加载图像并且我需要加载图像

```
$("<img src='wp-content/themes/twentytwelve/images/loader.gif' class='loader' />").appendTo("#contact"); 
```

问题是图像没有被搜索，`wordpress/wp-content/themes/twentytwelve/images/loader.gif`但`wordpress/test/wp-content/themes/twentytwelve/images/loader.gif`我有错误。我能怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T13:09:12.113

在 img src 前面加上“/”以从根目录开始。前任：

```
$("<img src='/wordpress/wp-content/themes/twentytwelve/images/loader.gif' class='loader' />").appendTo("#contact"); 
```

# php - Mysql PHP循环

> ID：13953038
> 
> 赞同：0
> 
> 时间：2012-12-19T13:02:32.380
> 
> 标签：php, mysql, loops

希望你能帮我解决这个问题。

我使用 Dreamweaver 来帮助我编写代码，因为我仍在学习 PHP，并且一直在尝试创建循环。

我有一个课程提供者表和一个发票表。

我正在尝试做的事情：

检查课程提供者 ID 的发票表 - 如果存在 - 检查上个月日期 - 如果存在 - 不要插入任何内容。

如果没有包含课程提供者 ID 和上个月日期的记录，请插入一条记录。

这是我第一次刷新页面时的代码，但是，如果我将日期更改为上个月以外的日期并再次刷新，即使记录已经存在，它也会继续添加。

请原谅我乱七八糟的代码：

```
mysql_select_db($database_dbconnect, $dbconnect);
$query_rs_get_cps = "SELECT tl_course_providers.cp_id FROM tl_course_providers ";
$rs_get_cps = mysql_query($query_rs_get_cps, $dbconnect) or die(mysql_error());
$row_rs_get_cps = mysql_fetch_assoc($rs_get_cps);
$totalRows_rs_get_cps = mysql_num_rows($rs_get_cps);

$invoiceDate = date("Y-m-d",strtotime("-1 months"));
$dueDate = date("Y-m-d",strtotime("+1 months"));

do{
    $cpid = $row_rs_get_cps['cp_id'];

    $cpid_rs_get_invoices = "-1";
    if (isset($cpid)) {
      $cpid_rs_get_invoices = $cpid;
    }
    mysql_select_db($database_dbconnect, $dbconnect);
    $query_rs_get_invoices = sprintf("SELECT * FROM tl_invoices WHERE tl_invoices.fk_cp_id = %s", GetSQLValueString($cpid_rs_get_invoices, "int"));
    $rs_get_invoices = mysql_query($query_rs_get_invoices, $dbconnect) or die(mysql_error());
    $row_rs_get_invoices = mysql_fetch_assoc($rs_get_invoices);
    $totalRows_rs_get_invoices = mysql_num_rows($rs_get_invoices);

    if($row_rs_get_invoices['invoice_date'] != $invoiceDate)
    {
    // for testing
    echo "CP Table: ".$cpid."<br />";
    echo "Invoice Table: ".$row_rs_get_invoices['fk_cp_id']."<br />";

    $insertSQL = sprintf("INSERT INTO tl_invoices (fk_cp_id, invoice_date, due_date, total, invoice_status) VALUES (%s, %s, %s, %s, %s)",
                           GetSQLValueString($row_rs_get_cps['cp_id'], "int"),
                           GetSQLValueString($invoiceDate, "date"),
                           GetSQLValueString($dueDate, "date"),
                           GetSQLValueString('0', "text"),
                           GetSQLValueString('Due', "text")
                           );

    mysql_select_db($database_dbconnect, $dbconnect);
    $Result1 = mysql_query($insertSQL, $dbconnect) or die(mysql_error());
    }else{
    break;
    }

}while($row_rs_get_cps = mysql_fetch_assoc($rs_get_cps)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:16:43.103

因此，您只想在课程提供者 ID 的上个月没有可用记录时才插入记录。

您获得课程提供者的所有发票，然后继续检查找到的（发票）记录中的一个。这是否与上个月的日期匹配似乎很随机。

我会修改您对 tl_invoices 的查询，并且只获取与您正在查找的日期匹配的行（通过将记录日期与您的发票日期匹配。

另一种方法是遍历所有找到的发票记录，如果它们都不匹配上个月的日期，则仅继续插入新记录。

那能解决你的问题吗？

# python - sort_options 仅在 query_string 不为空时应用？

> ID：13953039
> 
> 赞同：8
> 
> 时间：2012-12-19T13:02:32.620
> 
> 标签：python, google-app-engine, gae-search

试图弄清楚这是一个错误还是设计使然。当没有为查询指定 query_string 时，SearchResults 对象不按请求的列排序。例如，这里有一些日志来显示问题：

**结果未排序返回** `return index.search(query)`：

`query_string = ''`

`sort_options string: search.SortOptions(expressions=[search.SortExpression(expression=u'firstname', direction='ASCENDING', default_value=u'')], limit=36)`

**返回的结果按以下顺序排序** `return index.search(query)`：

`query_string = 'test'`

`sort_options string: search.SortOptions(expressions=[search.SortExpression(expression=u'firstname', direction='ASCENDING', default_value=u'')], limit=36)`

这就是我为这两种情况（`options`has`limit`和参数）构建查询`offset`的方式：`sort_options`

`query = search.Query(query_string=query_string, options=options)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:51:43.153

这可能是 dev_appserver 的错误，正如[这里](http://code.google.com/p/googleappengine/issues/detail?id=7456&q=index%20direction&colspec=ID%20Type%20Component%20Status%20Stars%20Summary%20Language%20Priority%20Owner%20Log)所建议的那样，但可以肯定的是，您应该在您的应用程序点上测试您的应用程序

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-19T14:51:22.743

可能是您构建查询的方式中的错误，因为它未显示。

可能是您没有针对不起作用的案例的索引。

# xcode - UITableView - 访问对象时出现数据错误

> ID：13953043
> 
> 赞同：1
> 
> 时间：2012-12-19T13:02:41.757
> 
> 标签：xcode, core-data

我在一个项目中使用 Core Data，该项目在导航栏中包含五个项目，每个项目都属于一个单独的导航控制器。每个项目都有以下结构：

```
Item1NavController » Item1RootTableView > Item1RootDetailView 
```

使用该应用程序一段时间后（例如更改导航栏中的项目、加载详细视图等），我遇到了问题，rootTableView 返回一个选定对象作为错误并导致详细视图崩溃。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Getting object in table view and load detail view
    _contact = [[self fetchedResultsController] objectAtIndexPath:indexPath];

    ContactDetailVC *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"ContactDetailVC"];
    vc.contact = _contact;
    [self.navigationController pushViewController:contactDetailVC animated:YES];
} 
```

日志显示以下消息：

```
 Selected contact: <Contact: 0x1f5e9d10> (entity: Contact; id: 0x1f5b38d0 <x-coredata://0F273F3F-708F-417F-915B-AE9EBB3133C0/Contact/p3828> ; data: <fault>)

 // Error message
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[_NSObjectID_64_1 matchcode]: unrecognized selector sent to instance 0x213b4e20' 
```

在阅读了有关 Core Data 故障的文档后，这种行为一方面似乎是正常的。但另一方面，Core Data 应该在我访问对象时自动重新获取它？

感谢您的任何想法！

**更新**

当我每次视图出现时都使用 NSFetchedResultsController 重新获取时，问题不会出现。

**更新二**

```
@class Contact;
//...
@property (strong, nonatomic) Contact *contact; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:52:48.123

显然，该`matchcode`属性在您的模型或托管对象子类（`.h`以及 中的`@dynamic`声明`.m`）中未正确映射。仔细检查此属性的名称是否正确（也许`@"matchCode"`？），并且您也尝试使用正确的名称访问它。检查您的`_contact`变量和详细视图控制器的属性是否属于正确类型。

# android - AChartEngine 图表在第一次触摸后失去自动跟随

> ID：13953049
> 
> 赞同：4
> 
> 时间：2012-12-19T13:03:18.577
> 
> 标签：android, charts, achartengine

我目前正在使用 AChartEngine 库动态地绘制我的传感器数据。它工作正常，当我收到新数据时，图表会滚动并正确更新 Y 轴值。问题是当我触摸图表以手动缩放、移动或其他任何操作时：图表失去了“自动跟随”智能，并且缩放控件中的“中心图表”按钮无法正确居中整个图表（但它专注于“旧数据”，在我第一次接触之前）。

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:03:08.517

手动更改可见区域后，将不再手动更新。如果您想保留更新功能，您可能会禁用缩放和平移。

```
renderer.setZoomEnabled(false, false);
renderer.setPanEnabled(false, false); 
```

# html - 使用 CSS3 连续向上动画气泡？

> ID：13953053
> 
> 赞同：9
> 
> 时间：2012-12-19T13:03:26.990
> 
> 标签：html, css, repeat, css-animations, continuous

见下图：

[http://i.imgur.com/3vTrB.png](http://i.imgur.com/3vTrB.png)

看到背景中那些透明的圆圈了吗？我想要做的是让它们从下往上动画，然后手动跳下（屏幕外）并重新开始动画。圆圈是用于制作圆圈效果的简单`<span>`元素。`border-radius`

这可能与CSS3有关，还是我需要javascript？如果可能的话，我还想在向上移动时在 X 范围内随机侧向移动圆圈。我想随机性需要javascript吗？

如果可能的话，我会很感激一些关于如何制作的建议/想法。如果不能使用 CSS，也欢迎使用 Javascript 库！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-19T13:42:41.613

这是一个依赖于该属性的纯 CSS[演示](http://jsfiddle.net/p5gpx/)（改编自本[教程）。](http://thecodeplayer.com/walkthrough/pure-css3-animated-clouds-background)*更新：感谢 TonioElGringo，气泡现在也向侧面移动，尽管动作是有节奏的，而不是随机的*：`animation`

 *```
html,
body,
#bubbles { height: 100% }
body { overflow: hidden }
#bubbles { padding: 100px 0 }
.bubble {
    width: 60px;
    height: 60px;
    background: #ffb200;
    border-radius: 200px;
    -moz-border-radius: 200px;
    -webkit-border-radius: 200px;
    position: absolute;
}

.x1 {
    -webkit-transform: scale(0.9);
    -moz-transform: scale(0.9);
    transform: scale(0.9);
    opacity: 0.2;
    -webkit-animation: moveclouds 15s linear infinite, sideWays 4s ease-in-out infinite alternate;
    -moz-animation: moveclouds 15s linear infinite, sideWays 4s ease-in-out infinite alternate;
    -o-animation: moveclouds 15s linear infinite, sideWays 4s ease-in-out infinite alternate;
}

.x2 {
    left: 200px;
    -webkit-transform: scale(0.6);
    -moz-transform: scale(0.6);
    transform: scale(0.6);
    opacity: 0.5;
    -webkit-animation: moveclouds 25s linear infinite, sideWays 5s ease-in-out infinite alternate;
    -moz-animation: moveclouds 25s linear infinite, sideWays 5s ease-in-out infinite alternate;
    -o-animation: moveclouds 25s linear infinite, sideWays 5s ease-in-out infinite alternate;
}
.x3 {
    left: 350px;
    -webkit-transform: scale(0.8);
    -moz-transform: scale(0.8);
    transform: scale(0.8);
    opacity: 0.3;
    -webkit-animation: moveclouds 20s linear infinite, sideWays 4s ease-in-out infinite alternate;
    -moz-animation: moveclouds 20s linear infinite, sideWays 4s ease-in-out infinite alternate;
    -o-animation: moveclouds 20s linear infinite, sideWays 4s ease-in-out infinite alternate;
}
.x4 {
    left: 470px;
    -webkit-transform: scale(0.75);
    -moz-transform: scale(0.75);
    transform: scale(0.75);
    opacity: 0.35;
    -webkit-animation: moveclouds 18s linear infinite, sideWays 2s ease-in-out infinite alternate;
    -moz-animation: moveclouds 18s linear infinite, sideWays 2s ease-in-out infinite alternate;
    -o-animation: moveclouds 18s linear infinite, sideWays 2s ease-in-out infinite alternate;
}
.x5 {
    left: 150px;
    -webkit-transform: scale(0.8);
    -moz-transform: scale(0.8);
    transform: scale(0.8);
    opacity: 0.3;
    -webkit-animation: moveclouds 7s linear infinite, sideWays 1s ease-in-out infinite alternate;
    -moz-animation: moveclouds 7s linear infinite, sideWays 1s ease-in-out infinite alternate;
    -o-animation: moveclouds 7s linear infinite, sideWays 1s ease-in-out infinite alternate;
}
@-webkit-keyframes moveclouds {
    0% {
        top: 500px;
    }
    100% {
        top: -500px;
    }
}

@-webkit-keyframes sideWays {
    0% {
        margin-left:0px;
    }
    100% {
        margin-left:50px;
    }
}

@-moz-keyframes moveclouds {     
    0% {
        top: 500px;
    }

    100% {
        top: -500px;
    }
}

@-moz-keyframes sideWays {
    0% {
        margin-left:0px;
    }
    100% {
        margin-left:50px;
    }
}
@-o-keyframes moveclouds {
    0% {
        top: 500px;
    }
    100% {
        top: -500px;
    }
}

@-o-keyframes sideWays {
    0% {
        margin-left:0px;
    }
    100% {
        margin-left:50px;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-16T07:32:08.417

我用纯 CSS 创建的一个非常漂亮的工作示例：

```
@keyframes greenPulse {
  0% {box-shadow:0 0 30px #4bbec8}
  50% {box-shadow:0 0 80px #4bbec8}
  100% {box-shadow:0 0 30px #4bbec8}
}
div#beaker span.glow {
  width:100%;
  height:100%;
  background:##222;
  position:relative;
  display:block;
  border-radius:200px;
  animation:greenPulse 2s infinite;
  -webkit-animation:greenPulse 2s infinite;
  -moz-animation:greenPulse 2s infinite;
  -o-animation:greenPulse 2s infinite;
}
@keyframes bubbleUp {
  0% {bottom:110px;-webkit-transform:scale(.9);opacity:0}
  1% {bottom:110px;-webkit-transform:scale(.3);opacity:0}
  30% {bottom:110px;-webkit-transform:scale(.8);opacity:1}
  95% {bottom:545px;-webkit-transform:scale(.3);opacity:1}
  99% {bottom:550px;-webkit-transform:scale(3);opacity:0}
  100% {bottom:110px;-webkit-transform:scale(.9);opacity:0}
}
div#beaker span.bubble {
  background:#fff;
  width:80px;
  height:80px;
  position:absolute;
  display:block;
  left:110px;
  bottom:110px;
  border-radius:100px; 
  background:-moz-radial-gradient(center 45deg, circle closest-corner, rgba(75,190,200,0), rgba(75,190,200,.1), rgba(75,190,200,.3), rgba(255,255,255,.7));
  background:-webkit-gradient(radial, center center, 0, center center, 100, from(rgba(75,190,200,.2)), to(rgba(255,255,255,.7)));
  background:gradient(center 45deg, circle closest-corner, rgba(75,190,200,0), rgba(75,190,200,.1), rgba(75,190,200,.3), rgba(255,255,255,.7));
  background: -ms-radial-gradient(center, ellipse cover, rgba(255,255,255,0) 0%, rgba(9,133,167,0.1) 51%, rgba(9,133,167,0.3) 71%, rgba(9,133,167,.7) 100%);
  animation:bubbleUp 4s infinite ease-in-out;
  -webkit-animation:bubbleUp 4s infinite ease-in-out;
  -o-animation:bubbleUp 4s infinite ease-in-out;
  -moz-animation:bubbleUp 4s infinite ease-in-out;
} 
```*

# asp.net-mvc - ASP.NET MVC Server.MapPath 在 Internet Explorer 中提供完整路径

> ID：13953058
> 
> 赞同：0
> 
> 时间：2012-12-19T13:03:39.643
> 
> 标签：asp.net-mvc, server.mappath

我正在上传一个文件

```
var filename = Server.MapPath(Path.Combine("~/Content/UserContent", Path.ChangeExtension(newName,Path.GetExtension(attachments.FileName))));
attachments.SaveAs(filename); 
```

它工作得很好，除了在 Internet Explorer 中它提供完整路径“C:\Users\okke\Desktop\GEWOONEENMAP OK\etags.txt”而不是只说“etags.txt”，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:05:59.670

在结果上调用[Path.GetFileName](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)以仅获取文件名，例如

```
attachments.SaveAs(Path.GetFileName(fileName)); 
```

如果 的值`fileName`是文件路径，它将返回文件名（带有 ext），如果它已经是有效的文件名，它将只返回相同的值。

# multidimensional-array - 将大量网页内容转换成数组（PHP）

> ID：13953064
> 
> 赞同：1
> 
> 时间：2012-12-19T13:04:04.053
> 
> 标签：multidimensional-array, foreach, file-get-contents, preg-match-all

我有一个包含 748 个 URL:s 的数组 ($x)。现在，我想从每个页面中获取特定部分并将所有这些部分放入一个新数组中。也就是说，一个包含 748 段文本的数组，每段都来自数组 $x 中定义的不同 URL。

这是我到目前为止的代码：

```
foreach ($x as $row) {
    $contents = file_get_contents($row);

    $regex = '/delimiter_start(.*?)delimiter_end/s';
    preg_match_all($regex, $contents, $output);
} 
```

如果我 var_dump $output 我得到一个奇怪的数组，它会不断循环内容，直到我在浏览器中按停止。数组如下所示：

```
array(2) {
[0]=>
array(1) {
[0]=>
string(4786) "string 1\. The one I want from the first page."}

[1]=>
array(1) {
[0]=>
string(4755) "string 1 again"}}

array(2) {
[0]=>
array(1) {
[0]=>
string(8223) "string 2\. The one I want from the second page."}

[1]=>
array(1) {
[0]=>
string(8192) "string 2 again"}} 
```

**编辑：**我实际上可以使用 $output[0] 检索我正在寻找的结果。但是如何创建一个与 $output[0] 内容相同且可在循环外访问的新数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:16:11.113

您从 preg_match_all 看到的输出是标准的，这是因为您在输出数组中收到了匹配项和完全匹配的内容。

```
$lines = Array();
foreach ($x as $row) {
$contents = file_get_contents($row);

$regex = '/delimiter_start(.*?)delimiter_end/s';
preg_match_all($regex, $contents, $output);
    if (is_array($output) && isset($output[0]) && !empty($output[0])){
    $lines[] = $output[0];
}
}
var_dump($lines); 
```

# java - 编译时Android SQLiteException“没有这样的表”：INSERT INTO表

> ID：13953073
> 
> 赞同：9
> 
> 时间：2012-12-19T13:04:16.397
> 
> 标签：java, android, database, eclipse, sqlite

该代码没有给出这样的表异常。我阅读了几乎所有关于这个例外的问题，按照它所说的做了所有的事情。但它仍然不起作用。我找不到问题所在。有谁能帮助我吗？

```
public class Butcegiris extends Activity {
    EditText bakici, krediAraba, krediOgrenim, krediTatil, faturaElektrik;
    EditText faturaSu, faturaInternet, aidat, kaskoSigorta;
    Spinner yillar,aylar;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.butcegiris);

        bakici = (EditText) findViewById(R.id.editTextBakici);
        krediAraba = (EditText) findViewById(R.id.editTextKrediAraba);
        krediOgrenim = (EditText) findViewById(R.id.editTextOgrenimKredisi);
        krediTatil = (EditText) findViewById(R.id.editTextTatilKredisi);
        faturaElektrik = (EditText) findViewById(R.id.editTextFaturaElektrik);
        faturaSu = (EditText) findViewById(R.id.editTextFaturaSu);
        faturaInternet = (EditText) findViewById(R.id.editTextFaturaInternet);
        aidat = (EditText) findViewById(R.id.editTextAidat);
        kaskoSigorta = (EditText) findViewById(R.id.editTextKaskoSigorta);
        yillar=(Spinner)findViewById(R.id.spinnerYillar);
        aylar=(Spinner)findViewById(R.id.spinnerAylar);

        Button ileri = (Button) findViewById(R.id.buttonIleri);
        ileri.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                boolean didItWork=true;
                try {
                    int bakicisql = Integer.valueOf(bakici.getText().toString());
                    int krediArabasql = Integer.valueOf(krediAraba.getText()
                            .toString());
                    int krediOgrenimsql = Integer.valueOf(krediOgrenim.getText()
                            .toString());
                    int krediTatilsql = Integer.valueOf(krediTatil.getText()
                            .toString());
                    int faturaElektriksql = Integer.valueOf(faturaElektrik
                            .getText().toString());
                    int faturaSusql = Integer
                            .valueOf(faturaSu.getText().toString());
                    int faturaInternetsql = Integer.valueOf(faturaInternet
                            .getText().toString());
                    int aidatsql = Integer.valueOf(aidat.getText().toString());
                    int kaskoSigortasql = Integer.valueOf(kaskoSigorta.getText()
                            .toString());
                    String yil=yillar.getSelectedItem().toString();
                    String ay= aylar.getSelectedItem().toString();

                    TemporaryDatabase entry = new TemporaryDatabase(Butcegiris.this);

                    entry.open();

                    entry.createEntryGiris(yil,ay,bakicisql, krediArabasql, krediOgrenimsql,
                            krediTatilsql, faturaElektriksql, faturaSusql,
                            faturaInternetsql, aidatsql, kaskoSigortasql);

                    entry.close();
                    Intent intent = new Intent(Butcegiris.this, Butcehesapla.class);
                    startActivity(intent);
                } catch (NumberFormatException e) {
                    didItWork=false;
                } finally {

                    if(didItWork){

                        Toast.makeText(Butcegiris.this,"Success", Toast.LENGTH_LONG).show();

                    }

                }

            }
        });
    }

    protected void onPause() {

        super.onPause();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.butcegiris_xml, menu);
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item) {

        switch (item.getItemId()) {

        case R.id.ikinciSayfa:

            Intent intent = new Intent(Butcegiris.this, Butcehesapla.class);
            startActivity(intent);
            return true;

        }
        return false;
    }
} 
```

临时数据库类

```
 public class TemporaryDatabase 

{

    public static final String TAG = DbHelperTemporary.class.getSimpleName();
    public static final String DB_NAME = "butcedb.sql";
    private static String DB_PATH = "/data/data/com.deitel.btc/assets/";
    public static final int DB_VERSION = 2;
    public static final String DB_TABLE = "harcamalar";

    public static final String C_ID = BaseColumns._ID;// Special for id
    public static final String C_YIL = "spinnerYillar";
    public static final String C_AY = "spinnerAylar";
    public static final String C_BAKICI = "editTextBakici";
    public static final String C_KREDIARABA = "editTextKrediAraba";
    public static final String C_KREDIOGRENIM = "editTextKrediOgrenim";
    public static final String C_KREDITATIL = "editTextKrediTatil";
    public static final String C_FATURAELEKTRIK = "editTextFaturaElektrik";
    public static final String C_FATURASU = "editTextFaturaSu";
    public static final String C_FATURAINTERNET = "editTextFaturaInternet";
    public static final String C_AIDAT = "editTextAidat";
    public static final String C_KASKOSIGORTA = "editTextKaskoSigorta";

    public static final String C_DIGERTAKSITLER = "editTextDigerTaksitler";
    public static final String C_DIGER = "editTextDiger";
    public static final String C_MAASSELO = "editTextMaasSelo";
    public static final String C_MAASHILAL = "editTextMaasHilal";
    public static final String C_DIGERGELIRLER = "editTextDigerGelirler";
    public static final String C_TOPLAMHARCAMA = "editTextToplamHarcama";
    public static final String C_TOPLAMGELIR = "editTextToplamGelir";
    public static final String C_ELDEKALAN = "editTextEldeKalan";

    public static final String CREATE_TABLE="CREATE TABLE ıf not exists harcamalar (C_ID int primary key autoincrement," +
            "C_YIL int,C_AY TEXT,C_BAKICI int,C_KREDIARABA int,C_KREDIOGRENIM int,C_KREDITATIL int," +
            "C_FATURAELEKTRIK int,C_FATURASU int,C_FATURAINTERNET int,C_AIDAT int,C_KASKOSIGORTA int," +
            "C_DIGERTAKSITLER int,C_DIGER int,C_MAASSELO int,C_MAASHILAL int,C_DIGERGELIRLER int," +
            "C_TOPLAMHARCAMA int,C_TOPLAMGELIR int, C_ELDEKALAN int);";

    private DbHelperTemporary dbHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    private static class DbHelperTemporary extends SQLiteOpenHelper {

        public DbHelperTemporary(Context context) {

            super(context, DB_NAME, null, DB_VERSION);

        }

        @Override
        public void onCreate(SQLiteDatabase db) {

            try {

                Log.d(TAG, "onCreate sql: " + CREATE_TABLE);
                db.execSQL(CREATE_TABLE);
            } catch (SQLException e) {

                e.printStackTrace();
            }
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

            db.execSQL("drop table if exists " + DB_TABLE);
            Log.w(TAG, "onUpdate drop table " + DB_TABLE);
            onCreate(db);
        }

    }

    public TemporaryDatabase(Context c) {
        ourContext = c;

    }
    public void openDatabase() throws SQLException {
        ourDatabase = SQLiteDatabase.openDatabase(DB_PATH + DB_NAME, null,
                SQLiteDatabase.OPEN_READWRITE);
    }

    public  void open() throws NumberFormatException {

        try {
            dbHelper = new DbHelperTemporary(ourContext);
            ourDatabase = dbHelper.getWritableDatabase();
            return ;
        } catch (Exception e) {
            Log.d(TAG,"Couldn't open database"+DB_NAME);
            e.printStackTrace();
        }
    }

    public void close() {

        dbHelper.close();
        ourDatabase.close();
    }

    public long createEntryGiris(String yilsql, String aysql, int bakicisql,
            int krediArabasql, int krediOgrenimsql, int krediTatilsql,
            int faturaElektriksql, int faturaSusql, int faturaInternetsql,
            int aidatsql, int kaskoSigortasql) {

        ContentValues cv = new ContentValues();
        cv.put(C_YIL, yilsql);
        cv.put(C_AY, aysql);
        cv.put(C_BAKICI, bakicisql);
        cv.put(C_KREDIARABA, krediArabasql);
        cv.put(C_KREDIOGRENIM, krediOgrenimsql);
        cv.put(C_KREDITATIL, krediTatilsql);
        cv.put(C_FATURAELEKTRIK, faturaElektriksql);
        cv.put(C_FATURASU, faturaSusql);
        cv.put(C_FATURAINTERNET, faturaInternetsql);
        cv.put(C_AIDAT, aidatsql);
        cv.put(C_KASKOSIGORTA, kaskoSigortasql);

        return ourDatabase.insert(DB_TABLE, null, cv);
    }

    public String[] getData() {

        String[] columns = new String[] { C_YIL, C_AY, C_BAKICI, C_KREDIARABA,
                C_KREDIOGRENIM, C_KREDITATIL, C_FATURAELEKTRIK, C_FATURASU,
                C_FATURAINTERNET, C_AIDAT, C_KASKOSIGORTA };
        Cursor c = ourDatabase.query(DB_TABLE, columns, null, null, null, null,
                null);
        String[] result = new String[10];

        //int i_yil = c.getColumnIndex(C_YIL);
        //int i_ay = c.getColumnIndex(C_AY);
        int i_bakici = c.getColumnIndex(C_BAKICI);
        int i_krediaraba = c.getColumnIndex(C_KREDIARABA);
        int i_krediogrenim = c.getColumnIndex(C_KREDIOGRENIM);
        int i_kreditatil = c.getColumnIndex(C_KREDITATIL);
        int i_faturaelektrik = c.getColumnIndex(C_FATURAELEKTRIK);
        int i_faturasu = c.getColumnIndex(C_FATURASU);
        int i_faturainternet = c.getColumnIndex(C_FATURAINTERNET);
        int i_aidat = c.getColumnIndex(C_AIDAT);
        int i_kaskosigorta = c.getColumnIndex(C_KASKOSIGORTA);

        if (c.moveToLast()) {
            result[0]=c.getString(i_bakici);
            result[1]=c.getString(i_krediaraba);
            result[2]=c.getString(i_krediogrenim);
            result[3]=c.getString(i_kreditatil);
            result[4]=c.getString(i_faturaelektrik);
            result[5]=c.getString(i_faturasu);
            result[6]=c.getString(i_faturainternet);
            result[7]=c.getString(i_aidat);
            result[8]=c.getString(i_kaskosigorta);

            /*result = c.getString(i_bakici) + " " + c.getString(i_krediaraba)
                    + " " + c.getString(i_krediogrenim) + " "+ c.getString(i_kreditatil) + " "+ c.getString(i_faturaelektrik) + " "
                    + c.getString(i_faturasu) + " "+ c.getString(i_faturainternet) + " "
                    + c.getString(i_aidat) + " " + c.getString(i_kaskosigorta);*/
        }

        return result;
    }

} 
```

这是xml文件

```
 <?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
 <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
            <TextView
                android:id="@+id/textButtonBakici"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textBakici"
                android:textAppearance="?android:attr/textAppearanceSmall" />
            <EditText
                android:id="@+id/editTextBakici"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:hint="@string/altiyuzyirmibes"
                android:inputType="numberDecimal" />

         </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
            <TextView
                android:id="@+id/textKrediAraba"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textKrediAraba"
                android:textAppearance="?android:attr/textAppearanceSmall" />

            <EditText
                android:id="@+id/editTextKrediAraba"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:hint="@string/besyuzdoksan"
                android:inputType="numberDecimal" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
            <TextView
                android:id="@+id/textOgrenimKredisi"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textOgrenimKredisi"
                android:textAppearance="?android:attr/textAppearanceSmall" />

            <EditText
                android:id="@+id/editTextOgrenimKredisi"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:hint="@string/dortyuzon"
                android:inputType="numberDecimal" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
            <TextView
                android:id="@+id/textTatilKredisi"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textTatilKredisi"
                android:textAppearance="?android:attr/textAppearanceSmall" />

            <EditText
                android:id="@+id/editTextTatilKredisi"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:hint="@string/yuzotuzbes"
                android:inputType="numberDecimal" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow5"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
            <TextView
                android:id="@+id/textFaturaElektrik"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textFaturaElektrik"
                android:textAppearance="?android:attr/textAppearanceSmall" />

            <EditText
                android:id="@+id/editTextFaturaElektrik"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:hint="@string/sifir"
                android:inputType="numberDecimal" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
            <TextView
                android:id="@+id/textFaturaSu"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textFaturaSu"
                android:textAppearance="?android:attr/textAppearanceSmall" />

            <EditText
                android:id="@+id/editTextFaturaSu"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:hint="@string/sifir"
                android:inputType="numberDecimal" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow7"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
            <TextView
                android:id="@+id/textFaturaInternet"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textFaturaInternet"
                android:textAppearance="?android:attr/textAppearanceSmall" />

            <EditText
                android:id="@+id/editTextFaturaInternet"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:hint="@string/otuz"
                android:inputType="numberDecimal" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow8"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
            <TextView
                android:id="@+id/textAidat"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textAidat"
                android:textAppearance="?android:attr/textAppearanceSmall" />

            <EditText
                android:id="@+id/editTextAidat"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:hint="@string/sifir"
                android:inputType="numberDecimal" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow9"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content">
            <TextView
                android:id="@+id/textKaskoSigorta"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/textKaskoSigorta"
                android:textAppearance="?android:attr/textAppearanceSmall" />

            <EditText
                android:id="@+id/editTextKaskoSigorta"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="3"
                android:layout_weight="1"
                android:ems="10"
                android:hint="@string/ikiyuzyirmibes"
                android:inputType="numberDecimal" >

                <requestFocus />
            </EditText>

        </TableRow>
        <TableRow
            android:id="@+id/tableRow10"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
         <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal"
            android:layout_weight="10">

         <Spinner
             android:id="@+id/spinnerYillar"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_weight="3"
             android:entries="@array/Yillar"
             android:prompt="@string/promptYillar" />

        <Spinner
            android:id="@+id/spinnerAylar"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:layout_weight="3"
            android:prompt="@string/prompt"
            android:entries="@array/Aylar"
             />
        </LinearLayout>

        <Button
            android:id="@+id/buttonIleri"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="right"
            android:gravity="right"
            android:layout_weight="0"
            android:background="@drawable/navigation_forward" />

        </TableRow>     

</TableLayout> 
```

我知道它很长，但我找不到问题。非常感谢您的帮助。

```
no such table: harcamalar
Error inserting spinnerYillar=2012 editTextFaturaSu=9 editTextKrediOgrenim=9 editTextAidat=9 editTextFaturaElektrik=99 editTextKaskoSigorta=9 editTextKrediAraba=9 spinnerAylar=Ocak editTextFaturaInternet=6 editTextBakici=9 editTextKrediTatil=9

android.database.sqlite.SQLiteException: no such table: harcamalar (code 1): , while compiling: INSERT INTO harcamalar(spinnerYillar,editTextFaturaSu,editTextKrediOgrenim,editTextAidat,editTextFaturaElektrik,editTextKaskoSigorta,editTextKrediAraba,spinnerAylar,editTextFaturaInternet,editTextBakici,editTextKrediTatil) VALUES (?,?,?,?,?,?,?,?,?,?,?)
at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:31)
at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1467)
at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1339)
at com.deitel.btc.TemporaryDatabase.createEntryGiris(TemporaryDatabase.java:131)
at com.deitel.btc.Butcegiris$1.onClick(Butcegiris.java:69)
at android.view.View.performClick(View.java:4202)
at android.view.View$PerformClick.run(View.java:17340)
at android.os.Handler.handleCallback(Handler.java:725)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5039)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-19 12:27:17.976: E/SQLiteDatabase(1023):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T13:15:59.450

您的 CREATE_TABLE 语句似乎不正确。

```
CREATE TABLE ıf 
```

也许应该是

```
CREATE TABLE if 
```

我之前在使用“如果不存在”表达式时遇到了问题，如果我的第一个建议无法尝试缩小范围，也许您可​​以尝试不使用它。您也可以尝试在 sql 语句中输入“integer”而不是“int”。不确定速记是否合法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T13:21:31.650

而不是 CREATE_TABLE 语句中的 int，您应该使用整数

所以使用

```
C_ID integer primary key autoincrement 
```

检查这个[文档](http://www.sqlite.org/datatypes.html)

引

> 您必须使用“INTEGER”而不是“INT”。INT PRIMARY KEY 类型的列是无类型的，就像任何其他列一样

代替

```
CREATE TABLE ıf not exists harcamalar (C_ID int primary key autoincrement," +
            "C_YIL int,C_AY TEXT,C_BAKICI int .. so on 
```

到

```
CREATE TABLE ıf not exists harcamalar (C_ID int primary key autoincrement," +
            C_YIL + "int," + C_AY + "TEXT,"+ C_BAKICI +" int .. so on 
```

您需要附加变量的值而不是变量名本身

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-26T22:10:13.123

我在构建我的应用程序时遇到了同样的问题，我尝试了一切，但没有任何效果。数据库与表名一起很好。

引起：android.database.sqlite.SQLiteException：没有这样的表：（代码1）Android

**解决方案：** 解决问题的唯一方法是从模拟器中卸载应用程序：

1-打开模拟器，转到设置 2-单击应用程序 3-滚动找到您的应用程序名称 4-双击它 5-强制停止 6-卸载它。

从 android studio 再次运行您的应用程序并尝试检查数据库连接。这对我有用，祝你好运。

# algorithm - 查找以指定字符串开头的单词数的最快方法（单词存储在 AVL 树中）

> ID：13953078
> 
> 赞同：2
> 
> 时间：2012-12-19T13:04:38.157
> 
> 标签：algorithm, avl-tree

我已经实现了自己的 AVL 树，并将其用作字典。我想知道，计算所有以某个字符串开头的单词的最快方法是什么。

例如：

```
string prefix = "fa"; 
```

![在此处输入图像描述](../Images/26e9384df70b44cc56b102add262af8f.png)

```
output: 4 
```

我已经让它在 O(n) 中工作，但是，我听说它可以做得更快。我当然可以在节点中保存额外的信息，比如下面的节点和其他类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:11:20.063

如果您想更改数据结构，则可以从[trie](http://en.wikipedia.org/wiki/Trie)获得卓越的性能。如果 trie 包含静态数据，您可以通过使用子树计数大小（使用动态编程生成）注释分支来获得更好的性能。

例如对于[竖琴，帽子，嗨]

```
 h(3)
      a(2)     i()
  r(1)    t()
p() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:17:42.010

可以修改 AVL 树，因此每个节点也将知道其“索引” ¹（如果集合是排序数组，则索引是元素编号）。

您现在要做的就是：

1.  搜索`"FA"`，获取树`i1`中最近但**更大**（或等于）元素的索引
2.  搜索`"FB"`，获取树`i2`中最接近但**更小**的元素的索引。
3.  `i1`找出和之间有差异的元素数`i2`（区分在 1 中找到“FA”的情况和不在 1 中的情况）。

1,2 都是`O(logn)`- 3 是常数，因此总复杂度是`O(logn)`（实际上`O(logn * |S|)`，因为每个比较都是 O(|S|) 本身，并且你有`O(logn)`比较）。

* * *

(1) 它是通过让每个节点“记住”它有多少个儿子来完成的，你可以使用这些信息来最终提取索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:29:06.797

如果您想在保持相同的渐近时间界限的同时尽可能减少内存占用，您可以为每个节点使用一个整数并仍然达到`O(log n)` 时间（假设恒定时间键比较）。

与每个节点一起存储其子树的大小。这可以在树修改期间轻松更新。

要查找给定范围内的键数：

*   查找此范围内的顶部元素。也就是说，在范围内但没有其祖先的唯一节点。将元素称为“顶部”。
*   如果不存在这样的元素，则返回 0
*   初始化 sum = 1（代表顶部）。
*   在 "top" 的左子树中找到范围的开始：
    *   如果从一个节点向左下降，则将其整个右子树的大小加到总和中，然后加一。
    *   如果你向右下降，什么都不加。
*   在 "top" 的右子树中找到范围的结尾：
    *   如果从一个节点向右下降，则将其整个左子树的大小加到总和中，然后加一。
    *   如果您向左下降，则不添加任何内容。
*   返回总和。

给定前缀的范围包含所有具有该前缀的元素。重要的是要注意，具有给定前缀的字符串集在其排序顺序上是连续的——也就是说，它确实是一个范围。

前缀范围的开始是前缀本身之前的位置。

前缀范围的结尾是在字典序上第一个不相交前缀之前的位置（`FA`=> `FB`;`FZ=>GA`当仅`A-Z`在字母表中时）。

Unicode 通过引入一个可能实际上不会出现在文本中的“顶部”字符来简化这一点，并在所有其他字符之上进行比较。即，`end = prefix + "\uFFFF"`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T19:56:30.490

AVL-tree 不是实现您想要的正确数据结构。还有另一种数据结构，称为基数树，它可以回答 O(lg N) 复杂度的前缀计数查询。基数树中的每个节点`n`都有 0 到 26 个子节点。它还有一个辅助变量 ，`prefix_count`它告诉我们在基数树中有多少词以前缀结尾`n`。例如，这是单词`abbaba`和的基数树`abbacba`

```
 X <-- root node: it has no value
        |
        a <-- prefix count: 2
        |
        b <-- prefix count: 2
        |
        b <-- prefix count: 2
        |
        a <-- prefix count: 2
       / \
      b   c <-- prefix count: 1, 1
      |   |
      a   b <-- prefix count: 1, 1
          |
          a <-- prefix count: 1 
```

因此，要检查树中有多少单词以前缀 example 开头`ab`，只需跟随节点`a --> b`，并返回该节点的前缀计数。如果找不到给定的前缀，则返回 0。

**实现技巧：**每个节点应该保留一个 26 个字符的数组，以提高所有操作的复杂性。

**psevdocode中的实现：**

```
struct node :
  let child -> array of 26 characters;
  let pc -> integer prefix counter;

struct radix-tree :
  node array[ MAXN ];
  let size -> integer size of the trie

init( rt ) :
  size := 1; // add the root

insert( rt, x ) :
  cn := 1; // root
  foreach i in x :
    if rt.array[ cn ].child[ i ] = null : // node doesn't exist
      rt.array[ cn ].child[ i ] := ++rt.size;
      cn := rt.size;
    else : // node exists
      cn := rt.array[ cn ].child[ i ];
    tr.array[ cn ].pc += 1; 
```

该`prefix_count`功能的实现将类似于插入过程。

```
prefix-count( rt, x ) :
  cn := 1; // root
  foreach i in x :
    if rt.array[ cn ].child[ i ] = null :
      return 0; // 0 prefixes found
    else :
      cn := rt.array[ cn ].child[ i ];
  return rt.array[ cn ].pc; 
```

# javascript - 如何在主干js中全局访问路由器？

> ID：13953080
> 
> 赞同：8
> 
> 时间：2012-12-19T13:04:44.923
> 
> 标签：javascript, backbone.js, singlepage

这是我的 app.js 文件。我需要`navigate`从类的`navigateToLogin`方法中访问路由器的方法`LandingView`。但是由于 appRouter 是在视图之后定义的，因此它无法从视图中识别路由器。所以我需要找到一种从任何类或方法全局访问路由器的方法。我怎样才能解决这个问题？

```
var LandingView = Backbone.View.extend({
    tagName: 'div', 
    id: 'landing',
    className: 'landingpad',
    events: {
        'click button#login': 'navigateToLogin',
    },
    render: function (){

        (this.$el).append("<button class='button' id='login'>Login</button><br/><br/><br/>");
        (this.$el).append("<button class='button' id='new'>New User?</button>");

        console.log(this.el);
        return this;
    },
    navigateToLogin: function(e){
        app.navigate("/login", true);
        return false; 
    },
});

var appRouter = Backbone.Router.extend({

initialize: function(){
    $('#content').html(new LandingView().render().el);
}
});

    app = new appRouter(); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-19T18:43:16.563

如果您深入研究 Backbone 的代码，您会注意到路由器的实现`navigate`依次调用`Backbone.history.navigate`：

```
// Simple proxy to `Backbone.history` to save a fragment into the history.
navigate: function(fragment, options) {
  Backbone.history.navigate(fragment, options);
} 
```

因此，不要显式破坏全局范围，而是使用`Backbone.history.navigate`：

```
var LandingView = Backbone.View.extend({
    ...
    navigateToLogin: function(e){
        Backbone.history.navigate("/login", true);
        return false; 
    },
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T13:21:21.323

如果您需要`appRouter`全局访问，则必须将其附加到某个全局对象。在网络浏览器中，这是`window`对象。

```
window.app = new appRouter(); 
```

并通过窗口访问它：

```
window.app.navigate(...); 
```

使用全局变量会导致代码难以维护。如果您的应用程序大小不一，请考虑使用一些解耦机制，例如[中介模式](http://addyosmani.com/largescalejavascript/#mediatorpattern)。

# php - 如何通过从另一个下拉列表中选择值来填充下拉列表？

> ID：13953085
> 
> 赞同：12
> 
> 时间：2012-12-19T13:05:02.457
> 
> 标签：php, javascript, html, mysql

我通过从 mysql 数据库中获取两个下拉列表的记录来构建两个下拉列表（如州和城市），并尝试构建该工具，同时从第一个下拉列表中选择任何值（即任何状态），当时在第二个下拉列表（城市）中，只有在第一个下拉列表中选择的值（州）下的那些值（城市）应该是可见的。

这是我的代码：

```
<tr>    
        <td id='hed'><span style="font-family:verdana,geneva,sans-  serif">State</state></td>
        <td>
        <?php 
        $dbcon = mysql_connect("@ip","@username","@password");

        if($dbcon)
        {
            mysql_select_db("@database", $dbcon);
        }
        else
        {
            die('error connecting to the database');
        }

        $qry = "select @value(state) from @tablename  ";
        $result = mysql_query($qry) or die(mysql_error());

        $dropdown = "<select name='@valuename' id='officeItemList' style='cursor:pointer;cursor:hand;'>";
        while($row = mysql_fetch_array($result))
        {           
            $dropdown .= "\r\n<option value='{$row['@value']}' > {$row['@value']} </option>";
        }
        $dropdown .= "\r\n</select>"; 
        echo $dropdown;
        mysql_close($dbcon);
        ?>
        </td> 
    </tr>

        <tr>
        <td id='hed'><span style="font-family:verdana,geneva,sans-serif">City</span></td>
        <td colspan="1"> 
        <?php 
        $dbcon = mysql_connect("@ip","@username","@password");

        if($dbcon)  
        {
            mysql_select_db("@database", $dbcon);
        }  
        else
        {
            die('error connecting to the database');
        }  

        $qry = "select value2(city) from @tablename where ";
        $result = mysql_query($qry) or die(mysql_error()); 

        $dropdown = "<select name='@value2' id='officeItemList' style='cursor:pointer;cursor:hand;'>";
        while($row = mysql_fetch_array($result)) 
        {

            $dropdown .= "\r\n<option value='{$row['@value2']}' > {$row['@value2']} </option>";
        }
        $dropdown .= "\r\n</select>"; 
        echo $dropdown;
        mysql_close($dbcon);
        ?>      

        </td>
    </tr> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T13:13:09.347

那是错误的方式。在向用户显示页面*之前*，您的 PHP 代码已完全执行。所以第二个查询永远不会知道用户选择了什么。

正确方法#1：分两页做。第一个页面包含第一个组合，当它被提交时，第二个页面被生成并显示第二个组合。

正确的方法#2 虽然不是最佳的：在一页纸上做。将第二个组合的所有可能记录加载到某个 JS 数组。将侦听器放置到第一个数组。当用户选择一些东西时，用 JS-array 中的正确记录填充第二个组合。

正确方法#3（其中最右边）：在包含 AJAX 请求的页面中执行此操作。用户在第一个组合中选择一个值。它的侦听器向某个服务器脚本发送请求，该脚本返回带有第二个组合记录的 JSON 对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T13:13:24.283

您可以使用 AJAX 获取所选州的城市。就像是：

```
$("select#state").change(
function(){
   var state = $(this).val();
   $.ajax({
  type: "GET",
  url: "get_cities.php/?state=" + state, 
// write a query according to the state selected and return the HTML for the OPTION's
  success: function(cities){
    $("select#cities").html(cities);
   }
}); 
}
); 
```

您还可以返回一个 json 对象（在这种情况下不要忘记添加`dataType:"json"`）并在客户端（即`success`函数内部）转换为 HTML

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:23:20.547

我会向您建议两种方法。

第一个仅使用 php，但需要在呈现页面之前存储每个州的所有可用城市。这是一个糟糕的解决方案！

我建议使用 AJAX 和对另一个 PHP 脚本的 Javascript 调用可以解决您的问题！

使用 jQuery 获得一个让生活更轻松的 javascript 框架！

您的 HTML：

```
<select id="select-state">
    <option value="0">Select a state</option>
    <option value="ohio">Ohio</option>
</select>
<select id="select-city">
    <option value="0">Select a state first</option>
</select> 
```

创建一个 php 脚本，通过 $_GET["state"] (或 $_POST) 以给定状态进行 mysql 查询。

将来自 mysql 的结果编码为 JSON 对象并回显它！

```
{
    cities: [
        'City 1',
        'City 2',
        ...
    ]
} 
```

php函数：[json_encode()](http://php.net/manual/en/function.json-encode.php)

然后，您可以执行以下操作：

```
$(function(){
    $('#select-state').on("change", function(){
        var state = $(this).val();
        if(state!=0) {
            $.get('your/path/to/cities/script.php?state='+state,function(data){
                if(data.cities) {
                    $('#select-city').empty(); //remove old entries first
                    for (var city in data.cities) {
                        $option = $('<option>').val(city);
                        $('#select-city').append($option);
                    }
                } 
            });
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T13:14:49.160

三个快速点：

1.  mysql 不安全（你应该使用 PDO 或 mysqli 代替）
2.  样式应该用 CSS 指定，而不是内联
3.  你最好使用异步请求，这样用户体验感觉更快

请注意，上述所有三点都可以通过使用框架轻松实现（至少在客户端，如 CakePHP 或 Zend，但您也可以寻找类似 Knockout.js 的 JavaScript 用于 UI 交互）

# c++ - 使用 libtorrent 下载特定片段

> ID：13953086
> 
> 赞同：2
> 
> 时间：2012-12-19T13:05:10.507
> 
> 标签：c++, p2p, bittorrent, libtorrent

好吧，我正在开发一个bittorent客户端，我正在尝试通过下载特定片段并从中提取图像来生成视频文件的缩略图，但我还没有找到这样做的方法。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T04:56:15.897

我认为您的意思是下载洪流的特定部分。

首先，您可能希望将文件的开头映射到一系列片段。您可以使用`torrent_info::map_file()`.

然后您可以选择要下载的部分`torrent_handle::prioritize_pieces()`。将一个片段的优先级设置为0，意味着不下载它。

请参阅[libtorrent 文档](http://www.rasterbar.com/products/libtorrent/manual.html)

# mysql - 如何清除 ibdata1 文件以及它如何影响性能？

> ID：13953091
> 
> 赞同：7
> 
> 时间：2012-12-19T13:05:35.890
> 
> 标签：mysql, database, innodb

我查看了 ibdata 文件，它是 128 GB。我取出每张桌子的大小，一张桌子有 500 万条记录，显示 90 GB。

我截断了该表，因为它不是必需的，并且我查看了 ibdata1 大小。它仍然显示 128 GB。然后我取出每个表的大小，然后总和只有 35-38 GB。

如何取回我的 Db 服务器上的 90 GB 空间。我在 red-hat Linux 服务器上使用 mysql 和 php。

我猜——如果我们删除数据库上的任何内容，它只会删除复制，但分配给它的空间在我们手动执行之前不会被释放。是不是办法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T13:12:43.033

一旦您的 ibdata 文件占用了空间，它就永远不会消失。'shink' 数据文件的唯一方法是转储您的 dbs，将它们全部删除，删除 ibdata 文件，重新启动 mysql 并重新加载转储。

如果您经常删除整个表，您可以将 innodb 配置为每个表使用一个数据文件。在这种情况下，当您删除一个表时，您可以删除该表特定的 ibdata 文件。

# serial-port - 使用标记/空间奇偶校验和无奇偶校验有什么区别？

> ID：13953095
> 
> 赞同：6
> 
> 时间：2012-12-19T13:05:45.520
> 
> 标签：serial-port, bit, parity

创建三种类型的奇偶校验位的目的是什么，它们都定义了一个奇偶校验位完全不使用的状态？

“如果奇偶校验位存在但未使用，则它可能被称为标记奇偶校验（当奇偶校验位始终为 1 时）或空间奇偶校验（该位始终为 0）” -[维基百科](http://en.wikipedia.org/wiki/Parity_bit)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-19T04:02:39.317

此处似乎忽略了标记或空间奇偶校验的一个非常简单且非常有用的原因：节点地址标记。

极低功耗和/或小型嵌入式系统有时会使用工业串行总线，如 RS485 或 RS422。也许许多非常小的处理器可能连接到同一条总线上。

这些微型设备不想浪费功率或处理时间来查看通过串行端口传入的每个字符。大多数时候，这不是他们感兴趣的东西。

因此，您设计了一个总线协议，例如使用 9 位... 8 个数据位和一个标记/空间奇偶校验位。每个数据包只包含一个带有标记奇偶校验位的字节或字（节点地址）。其他一切都是空间平价。然后，这些微型设备可以简单地等待奇偶校验错误中断。一旦它得到中断，它就会检查那个字节。那是我的地址吗？不行，回去睡觉。

这是一个非常省电的系统……而且仅浪费了 10% 的带宽。在许多环境中，这是一个很好的权衡。

所以...如果您有一个 PC 级系统试图与这些微型设备通信，您需要能够设置/清除该奇偶校验位。因此，您在传输节点地址时设置 MARK 奇偶校验，并在其他任何地方设置 SPACE 奇偶校验。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T13:20:36.173

所以有*五种*可能性，而不是三种：无奇偶、标记、空格、奇偶。在没有奇偶校验的情况下，帧中的额外位被省略，通常在协议已经使用校验和或 CRC 检查错误或认为数据损坏不太可能或不严重时选择。

没有人选择标记或空格，这只是在浪费带宽。模一些奇怪的标准，比如硬件供应商喜欢强迫你购买他们的硬件的 9 位数据协议，因为你没有真正的机会在不编写驱动程序的情况下即时重新编程 UART。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T14:09:24.857

如果您要生成数据以发送到需要奇偶校验位的硬件（可能是因为它在电子设备中内置了硬编码字长）但不关心其值是什么，则设置标记或空间奇偶校验很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-18T07:16:51.070

非常清晰和有用的答案和评论。对于那些认为这个概念有悖常理的人，请放松；该术语是语义问题，而不是信息论或工程问题，使用“平价”一词引起的困难。

“标记”和“空格”位在这些应用中不是奇偶校验位，并且该术语源于它们占据在其他上下文中可能期望奇偶校验位的位位置这一事实。实际上，它们与奇偶校验无关，但用于需要恒定位值的任何相关目的，例如标记字节或其他信号的开始，或作为延迟，或指示状态信号作为数据或地址等。

因此，它们有时更合乎逻辑地称为“固定（奇偶校验）位”，被固定在“开”或“关”状态。有时他们真的“不在乎”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-07T09:21:56.790

如上所述，RS485 需要 9 位传输。RS485 广泛用于工业应用，无论受控设备的“尺寸”如何（例如，许多空调或冰箱都提供 RS485 接口，而不是真正的“小”东西）。RS485 允许高达 10Mbs 的吞吐量或高达 4000 英尺的距离。使用奇偶校验位来区分地址/数据字节简化了硬件实现，只有当线路上的地址字节与节点的地址匹配时，网络的每个节点都可以拥有自己的硬件来生成中断。

# .net - 如何从具有 PowerShell 版本 3.0 的计算机强制加载 System.Management.Automation.dll v1.0？

> ID：13953102
> 
> 赞同：1
> 
> 时间：2012-12-19T13:06:24.927
> 
> 标签：.net, powershell, appdomain, .net-assembly, assembly-resolution

我试图让 [poshrunner.exe] 能够在安装了 PowerShell 3.0 版的机器上的 PowerShell 2.0 版环境中运行脚本。PowerShell.exe 支持这一点，[尽管对 PowerShell 1.0 的独特支持似乎是可疑的](https://stackoverflow.com/questions/5415259/why-is-powershell-2-0-installed-in-the-same-location-as-powershell-1-0)。

我正在运行 Windows 8。我的 GAC 中有两个版本的 System.Management.Automation.dll：

*   System.Management.Automation，版本=3.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35（由 加载`powershell.exe -version 3.0`）
*   System.Management.Automation，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35（由`powershell.exe -version 1.0`and加载`powershell.exe -version 2.0`）

据我所知，我没有System.Management.Automation.dll 的[发布者策略程序集](http://support.microsoft.com/kb/891030)

```
C:\Windows\assembly\GAC_MSIL>dir C:\Windows\assembly\GAC_MSIL\policy*
 Volume in drive C has no label.
 Volume Serial Number is 0207-A8AA

 Directory of C:\Windows\assembly\GAC_MSIL

11/16/2012  11:49 PM    <DIR>          Policy.12.0.Microsoft.Office.Interop.Access.Dao
12/13/2012  11:49 PM    <DIR>          policy.2.1.Microsoft.Web.PlatformInstaller
12/13/2012  11:49 PM    <DIR>          policy.3.0.Microsoft.Web.PlatformInstaller
10/29/2012  03:33 PM    <DIR>          policy.3.5.System.Data.SqlServerCe
10/29/2012  03:33 PM    <DIR>          policy.3.5.System.Data.SqlServerCe.Entity
               0 File(s)              0 bytes
               5 Dir(s)  51,204,710,400 bytes free

C:\Windows\assembly\GAC_MSIL> 
```

但是，这样做[`AppDomain.CurrentDomain.Load("System.Management.Automation, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35");`](http://msdn.microsoft.com/en-us/library/36az8x58.aspx)是加载程序集的版本 3。[Assembly.Load()](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.load.aspx)具有相同的结果。

在调用程序集之前：

[ ![在逐步通过之前](../Images/cbad9c2b53f4f37eecd2e9c92a6bc7e2.png)]

调用程序集后：

[ ![步入后](../Images/b901ecf3163bb15e5518344f812a11b7.png)]

该代码恰好在辅助应用程序域中运行，因此我愿意并且能够对 AppDomain 设置进行很多操作。如何强制 System.Management.Automation, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35 在运行时有条件地加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:23:17.840

随着时间的推移，我在 System.Management.Automation 方面遇到了各种各样的问题。我最近再次点击它，并决定找到一种替代方法，使用批处理文件从 .NET 运行 PowerShell。有关代码示例，请参阅此博客文章： [http ://www.nootn.com.au/2013/01/run-powershell-from-net-program-without.html](http://www.nootn.com.au/2013/01/run-powershell-from-net-program-without.html)

这还提到了如何强制它运行特定版本的 PowerShell，因此如果此解决方案适合您，它可能是您问题的答案（假设您乐于尝试避免使用 System.Management.Automation）。

我希望这有助于解决您的问题或解决它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T22:56:11.970

如果您访问项目中的参考资料，请找到参考资料并告诉它复制到本地，这也应该有所帮助。

# magento - 在 Magento 中按类别自定义分层导航

> ID：13953103
> 
> 赞同：1
> 
> 时间：2012-12-19T13:06:28.563
> 
> 标签：magento, layered-navigation

我正在为我的**magento**商店中的一个类别使用分层导航。但有些产品有多个类别。

说我有一类*她*。同样，我还有一些其他类别，例如*T 恤*、*化妆品*等*。T 恤*可能同时具有*T 恤*和*她*的类别。同样，*化妆品*项目可能同时具有*她*和*化妆品*类别。因此，当我显示*她*的类别页面时，我想在分层导航中显示*T 恤*和*化妆品类别。*当用户点击其中一个类别（比如*t-shirt*）时，它将显示所有也属于*她*类别的*T 恤。*

 *这个怎么做？

**编辑**：这里我需要澄清一件事。她、T恤、化妆品都是独立的品类。没有一个是另一个的子类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:11:23.777

这是 Magento 的一项功能，如果它不起作用，那是因为您在代码中停用了一些会破坏此功能的东西。

这应该作为名称 = 'cat' 和值 = 类别 ID 的普通过滤器。

此致，*

# android - 使用适配器在 Listview 中打印行

> ID：13953106
> 
> 赞同：0
> 
> 时间：2012-12-19T13:06:41.367
> 
> 标签：android, android-listview, listadapter

每次按下按钮时，我都需要从 ListView 中的 cm1 和 cm2 行输出数据。行应显示在各种 TextView 中。

代码 TEST.java：

```
public String cm1;
public String cm2;

public class TEST extends Activity {
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        MyList = (ListView) this.findViewById(R.id.listStrings);
         setListAdapter();

        // button
        Button setup = (Button) this.findViewById(R.id.send);
        setup.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
        cm1 = "cm1text";
        cm2 = "cm2text";
        //xxxx
        }
        });
}

// adapter
private void setListAdapter() {
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
    R.layout.row //idknow what im must writehere to set cm1 string to cm1text tv
    List.setAdapter(adapter);
    } 
```

代码 TEST.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<ListView
    android:id="@+id/listStrings"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_weight="1" />

    <Button
        android:id="@+id/send"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Send" />
</LinearLayout> 
```

代码row.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<TextView
    android:id="@+id/cm1tv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/cm2tv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

</RelativeLayout> 
```

单击 2 次后应查看 ListView：

```
cm1
cm2
cm1
cm2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:55:21.940

也许你应该/可以做的是拥有这个；

```
String cm = cm1 + "\n" + cm2 
```

应该输出哪个；
`cm1`
`cm2`

然后您将 xml 更改为只有一个 textview 和适配器代码，如下所示；

```
ArrayList<String> listItems = new ArrayList<String>();
ArrayAdapter<String> aa = new ArrayAdapter<String>(this, R.layout.row, R.id.textViewCM, listItems);
yourListView.setAdapter(aa); 
```

然后，无论何时按下按钮；

```
// ...code to initialise/change cm
listItems.add(cm);
aa.notifyDataSetChanged(); // notifies listView to update it's view 
```

除非您必须拥有两个单独的 textView，否则[这](http://fizzbuzz.it/?p=48)应该可以满足*您*的需求关联。

# git - git合并是如何工作的？

> ID：13953107
> 
> 赞同：0
> 
> 时间：2012-12-19T13:06:43.087
> 
> 标签：git

我想了解 git 在与两个不同的代码合并时会寻找什么。

什么时候删除代码或插入

所以如果我有代码

Foo.java（这是我的代码）

```
class Foo {
     void hello(){}
     void bye(){}
     void gone(){}
} 
```

Foo.java（正在获取和合并的代码）

```
class Foo{
     void hello(){}
     void wait(){}
     void bye(){}
} 
```

如果我合并上面的代码，这会

1.  它会删除消失和再见的方法吗？
2.  如果在 hello 方法中进行了更改，它是否会删除我的 'hello' 并用获取的 hello 重写它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:08:45.647

首先，它不会删除 bye，它会在其上方插入 wait()。它不会删除gone()，除非它存在于上一个版本中并且在后续版本中被删除而你没有在两者之间触及它。如果您自己添加了 got()（即 git 没有收到任何应删除的指示），那么将在合并文件的底部找到 got()。像这样：

```
class Foo{
     void hello(){}
     void wait(){}
     void bye(){}
     void gone(){}
} 
```

其次，它不会删除你的 hello，它只会将所做的更改放入已经存在的 hello() 中。

记住，如果不能合并，就会引发冲突，你得自己去合并。它不只是删除/添加没有人工输入就没有意义的东西。

# applescript - 使用 Applescript 将数据写入文件时出错

> ID：13953108
> 
> 赞同：1
> 
> 时间：2012-12-19T13:06:55.113
> 
> 标签：applescript

我正在使用以下脚本编写文件，但有时会出现如下所述的错误，请建议..

```
set filepath to POSIX path of "Macintosh HD:Library:Application Support:Macromedia:mms.cfg"
try
    tell application "System Events"
        if file filepath exists then
            set myFile to open for access file filepath with write permission
            set fileData to read myFile
            set eof myFile to 0
            write "blah blah" to myFile
            close access myFile
        else
            return "File Not Found"
        end if
    end tell
on error
    return false
end try 
```

错误：

```
 "Network file permission error." number -5000 from file "Macintosh HD:Library:Application Support:Macromedia:mms.cfg" 
```

有时我会收到此错误，无法关闭打开的文件

```
"File file Macintosh HD:Library:Application Support:Macromedia:mms.cfg is already open." number -49 from file "Macintosh HD:Library:Application Support:Macromedia:mms.cfg" 
```

当我尝试关闭 offile 时，出现此错误：

```
on openAFile(filepath)
    try
        set fp to open for access filepath with write permission

    on error errstr number errNum
        if errNum = -49 then
            close access filepath
            set fp to open for access filepath with write permission
        else
            display dialog errstr
            return false
        end if
    end try

    return fp
end openAFile

set pointer to openAFile("Macintosh HD:Library:Application Support:Macromedia:mms.cfg"
set fileContents to read pointer 
```

错误

```
"Can’t make \"Macintosh HD:Library:Application Support:Macromedia:mms.cfg\" into type file." number -1700 from "Macintosh HD:Library:Application Support:Macromedia:mms.cfg" to file 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:54:29.620

我无法解释您收到的“网络文件权限错误”。

“文件文件 Macintosh HD:Library:Application Support:Macromedia:mms.cfg 已打开。” 当您在脚本编辑器中停止脚本而不关闭文件时会发生错误。如果有一些其他逻辑错误阻止 AppleScript 到达`close access`您的块中的命令`on error`（或者您在不合时宜的时间按下停止按钮），则会发生这种情况。当脚本停止时，Apple 的 AppleScript 编辑器不会为您关闭泄露的文件引用。

您在打开文件之前尝试关闭文件的解决方法可能有效，但您传递的是字符串而不是文件路径的`file`or `alias`。使用`open for access file filepath`和`close access file filepath`。

# testing - 移动网站测试本地主机

> ID：13953113
> 
> 赞同：0
> 
> 时间：2012-12-19T13:07:12.957
> 
> 标签：testing, visual-studio-2012, localhost, mobile-website

移动网站本地测试的最佳解决方案

注意：我正在使用带有 Visual Studio 2012 的 Windows 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:06:49.043

一个很好的方法是简单地将您的移动设备连接到您的机器所在的网络，然后访问与您端口上的机器相关联的 IP 地址。

请注意，在这方面配置 IIS Express 很麻烦，因此如果您可以将站点设置为在主机上的 IIS 上运行，并将其配置为绑定在端口 80 上的默认网站（如果您没有其他任何东西），那就太好了，或另一个唯一端口，因此不需要主机名。

# jsp - 使用jsp中的显示标签将图像导出为pdf

> ID：13953115
> 
> 赞同：2
> 
> 时间：2012-12-19T13:07:16.560
> 
> 标签：jsp, displaytag

在我的 jsp 上有包含问题的数据和一些图像作为对问题反馈的图形分析。当我尝试使用*显示标签将其导出为 pdf*时，我可以成功创建一个提及问题的 pdf，但如果是图像，我会得到图像的 url。

如何将图像导出为 pdf？

这是我的jsp代码：

```
 <display:table id="data" name="${questions}" requestURI="" pagesize="10" export="true" >
      <display:column property="label" title="Question" sortable="true"/>
      <display:column title="Graph Analysis" media="">
         <img src="${imagePath}${reportData.clientName}/${data.label}.png"/>  
      </display:column>
      <display:setProperty name="export.pdf" value="true" />
 </display:table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:08:05.340

我没有对此进行测试，但尝试添加另一个将 media 属性设置为 pdf 的列，并将该列的属性设置为图像 blob 或 clob。

```
 <display:table id="data" name="${questions}" requestURI="" pagesize="10" export="true" >
      <display:column property="label" title="Question" sortable="true"/>
      <display:column title="Graph Analysis" media="">
         <img src="${imagePath}${reportData.clientName}/${data.label}.png"/>  
      </display:column>
      <display:column property="imageBlob" title="Photo/Image" media="pdf"/>
      <display:setProperty name="export.pdf" value="true" />
 </display:table> 
```

# ajax - 限制用户对 JSP 的直接访问

> ID：13953116
> 
> 赞同：2
> 
> 时间：2012-12-19T13:07:35.400
> 
> 标签：ajax, jsp, servlets

我无法限制用户访问某些页面。我向 servlet 发送 ajax 请求。在 ajax 成功中，我想根据条件将页面重定向到另一个页面。但是我在 web xml 中设置了一个 servlet 约束，所以重定向会导致 403 代码错误。response.sendredirect 也不起作用，因为它是一个 ajax 请求。

有任何想法吗？请帮助我在相关限制下进行此重定向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T05:29:03.357

您的问题有一个非常简单的解决方案。
那就是将jsp文件（您不希望用户直接访问）放在WEB-INF文件夹中。原因？好吧，WEB-INF 文件夹中的所有内容默认都是整个应用程序的私有成员。这意味着，这些文件只能由程序（即 servlet）访问。
因此，如果任何用户尝试直接访问 jsp 页面，他/她将收到“Http 404”错误。
通过这种方式，您可以限制用户对特定文件的访问。

# apache-flex - BlazeDS 消息传递 Channel.Connect.Failed 错误

> ID：13953123
> 
> 赞同：0
> 
> 时间：2012-12-19T13:08:01.817
> 
> 标签：apache-flex, blazeds

我在互联网上搜索，这个错误的任何答案都无法解决我的问题。

我在 Openshift 中有一个 blazeds 服务器，我正在通过 Flash Builder 连接到它。我想制作一个应用程序，它将向使用我的应用程序的所有其他用户发送消息。

我的意思是我有2个应用程序。一个将向服务器发送消息，这个将在桌面上，另一个是移动项目，将接收我通过服务器从桌面应用程序发送的消息。

我尝试使用 BlazeDS 消息传递，但它给了我这个错误：

```
(mx.messaging.messages::ErrorMessage)#0
  body = (Object)#1
  clientId = (null)
  correlationId = "96461BC6-7288-A95C-923B-B32FCDDC9CE3"
  destination = ""
  extendedData = (null)
  faultCode = "Client.Error.MessageSend"
  faultDetail = "Channel.Connect.Failed error NetConnection.Call.Failed: HTTP: Failed: url: 'http://ainApp.swf/messagebroker/amfpolling'"
  faultString = "Send failed"
  headers = (Object)#2
  messageId = "147C1B6F-6877-79D8-3BCA-B32FCDF5E3F9"
  rootCause = (mx.messaging.events::ChannelFaultEvent)#3
    bubbles = false
    cancelable = false
    channel = (mx.messaging.channels::AMFChannel)#4
      authenticated = false
      channelSets = (Array)#5
      connected = false
      connectTimeout = -1
      enableSmallMessages = true
      endpoint = "http://ainApp.swf/messagebroker/amfpolling"
      failoverURIs = (Array)#6
      id = "my-polling-amf"
      mpiEnabled = false
      netConnection = (flash.net::NetConnection)#7
        client = (mx.messaging.channels::AMFChannel)#4
        connected = false
        httpIdleTimeout = 0
        maxPeerConnections = 8
        objectEncoding = 3
        proxyType = "none"
        uri = "http://ainApp.swf/messagebroker/amfpolling"
      piggybackingEnabled = false
      polling = false
      pollingEnabled = true
      pollingInterval = 4000
      protocol = "http"
      reconnecting = false
      recordMessageSizes = false
      recordMessageTimes = false
      requestTimeout = -1
      uri = "http://{server.name}:{server.port}/messagebroker/amfpolling"
      url = "http://{server.name}:{server.port}/messagebroker/amfpolling"
      useSmallMessages = false
    channelId = "my-polling-amf"
    connected = false
    currentTarget = (mx.messaging.channels::AMFChannel)#4
    eventPhase = 2
    faultCode = "Channel.Connect.Failed"
    faultDetail = "NetConnection.Call.Failed: HTTP: Failed: url: 'http://ainApp.swf/messagebroker/amfpolling'"
    faultString = "error"
    reconnecting = false
    rejected = false
    rootCause = (Object)#8
      code = "NetConnection.Call.Failed"
      description = "HTTP: Failed"
      details = "http://ainApp.swf/messagebroker/amfpolling"
      level = "error"
    target = (mx.messaging.channels::AMFChannel)#4
    type = "channelFault"
  timestamp = 0
  timeToLive = 0 
```

这是我尝试从以下位置发送消息的桌面应用程序：

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx">
    <fx:Script>
        <![CDATA[
            import mx.messaging.events.ChannelEvent;
            import mx.messaging.events.MessageFaultEvent;
            import mx.messaging.messages.AsyncMessage;

            protected function cons_faultHandler(event:MessageFaultEvent):void
            {
                trace(event.message + ' fault')
            }

        ]]>
    </fx:Script>
    <fx:Declarations>
        <s:Consumer id="cons" destination="cricket"  message="messages.text += event.message.body.msg + '\n'" fault="cons_faultHandler(event)"/>
        <s:Producer id="prod" destination="cricket" fault="cons_faultHandler(event)" />
    </fx:Declarations>

    <s:VGroup verticalScrollPosition="0" horizontalScrollPosition="0">
        <s:TextArea id="messages" width="100%" height="50%"/>
        <s:TextInput id="mesgSender" />
        <s:Button id="send" label="send" click="prod.send(new AsyncMessage({msg:mesgSender.text+'asdasd'}))"/>
    </s:VGroup>

</s:WindowedApplication> 
```

这是我的messaging-config.xml 和services-config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<services-config>

    <services>
        <service-include file-path="remoting-config.xml" />
    </services>

    <security>
        <login-command class="flex.messaging.security.TomcatLoginCommand" server="Tomcat"/>
    </security>

    <channels>

        <channel-definition id="my-amf" class="mx.messaging.channels.AMFChannel">
            <endpoint url="http://{server.name}:{server.port}/{context.root}/messagebroker/amf" class="flex.messaging.endpoints.AMFEndpoint"/>
        </channel-definition>
    </channels>

    <logging>
        <target class="flex.messaging.log.ConsoleTarget" level="Error">
            <properties>
                <prefix>[BlazeDS] </prefix>
                <includeDate>false</includeDate>
                <includeTime>false</includeTime>
                <includeLevel>false</includeLevel>
                <includeCategory>false</includeCategory>
            </properties>
            <filters>
                <pattern>Endpoint.*</pattern>
                <pattern>Service.*</pattern>
                <pattern>Configuration</pattern>
            </filters>
        </target>
    </logging>

    <system>
        <redeploy>
            <enabled>false</enabled>
        </redeploy>
    </system>

</services-config>

<?xml version="1.0" encoding="UTF-8"?>
<service id="message-service" 
    class="flex.messaging.services.MessageService">

    <adapters>
        <adapter-definition id="actionscript" class="flex.messaging.services.messaging.adapters.ActionScriptAdapter" default="true" />
        <!-- <adapter-definition id="jms" class="flex.messaging.services.messaging.adapters.JMSAdapter"/> -->
    </adapters>

    <default-channels>
        <channel ref="my-polling-amf"/>
    </default-channels>

    <destination id="cricket">
        <channel ref="my-amf"/>
    </destination>

</service> 
```

我不知道我做错了什么以及为什么在错误消息中，端点 url 是“http://ainApp.swf/messagebroker/amfpolling”。顺便说一下，我的桌面应用程序名称是 MainApp。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T07:46:38.403

在 services-config.xml 中，您应该定义您的频道网址。

```
url="http://{server.name}:{server.port}/{context.root}/messagebroker/amf" 
```

喜欢这个

```
url="/yourContextRootName/messagebroker/amf" 
```

不要定义 server.name 和 server.port，它会带来类似的问题。

# sql-server - 如何获取ms sql中浮点列中小数点后的位数？

> ID：13953129
> 
> 赞同：5
> 
> 时间：2012-12-19T13:08:27.077
> 
> 标签：sql-server

我必须在 MS Sql Server 托管的数据库中计算小数点后的数字（2005 或 2008 无关紧要），以纠正用户犯的一些错误。我在 Oracle 数据库上遇到了同样的问题，但事情没有那么复杂。底线在 Oracle 上，选择是：

```
select length( substr(to_char(MY_FIELD), instr(to_char(MY_FILED),'.',1,1)+1, length(to_char(MY_FILED)))) as digits_length
from MY_TABLE 
```

其中提交的 My_filed 是 float(38)。

在 Ms Sql 服务器上，我尝试使用：

```
select LEN(SUBSTRING(CAST(MY_FIELD AS VARCHAR), CHARINDEX('.',CAST(MY_FILED AS VARCHAR),1)+1, LEN(CAST(MY_FIELD AS VARCHAR)))) as digits_length
from MY_TABLE 
```

问题是在 MS Sql Server 上，当我将 MY_FIELD 转换为 varchar 时，浮点数仅被 2 位小数截断，并且数字的计数是错误的。有人可以给我任何提示吗？

最好的祝福。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-04T09:17:47.603

```
SELECT 
LEN(CAST(REVERSE(SUBSTRING(STR(MY_FIELD, 13, 11), CHARINDEX('.', STR(MY_FIELD, 13, 11)) + 1, 20)) AS decimal)) 
from TABLE 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T09:31:33.590

我从朋友那里收到了一个非常简单的解决方案，非常棒。因此，我将发布解决方法，以帮助与我处于相同位置的其他人。

首先，制作函数：

```
create FUNCTION dbo.countDigits(@A float) RETURNS tinyint AS
BEGIN
declare @R tinyint
IF @A IS NULL 
   RETURN NULL
set @R = 0
while @A - str(@A, 18 + @R, @r) <> 0
begin
   SET @R = @R + 1
end
RETURN @R
END
GO 
```

第二：

```
select MY_FIELD,
dbo.countDigits(MY_FIELD) 
from MY_TABLE 
```

使用该函数将为您提供小数点后的确切位数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T13:22:58.123

首先是切换到 using[`CONVERT`](http://msdn.microsoft.com/en-us/library/ms187928.aspx)而不是`CAST`. 不同之处在于，`CONVERT`您可以使用 指定格式代码。`CAST`使用任何默认格式代码：

> 当表达式为浮点数或实数时，样式可以是下表中显示的值之一。其他值被处理为 0。

没有一种格式特别吸引人，但我认为最适合您使用的是`2`. 所以它会是：

```
CONVERT(varchar(25),MY_FIELD,2) 
```

不幸的是，这将为您提供科学计数法的值，并且始终使用 16 位数字，例如`1.234567890123456e+000`. 要获得“真实”位数，您需要将这个数字分开，计算出小数部分的位数，然后用指数中提供的数字偏移它。

* * *

当然，在处理具有已定义*二进制*表示的数字时，插入关于尝试谈论*数字的常见警告/警告。*特定“数字”的数量可能会因计算方式而异。*`float`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-07T16:05:18.007

我不确定速度。等等或这段代码的优雅。这是为了一些临时测试来找到第一个十进制值。但是可以更改此代码以遍历所有小数并轻松找到最后一次值大于零的时间。

```
DECLARE @NoOfDecimals       int             = 0 
Declare @ROUNDINGPRECISION  numeric(32,16)  = -.00001000

select @ROUNDINGPRECISION = ABS(@ROUNDINGPRECISION)
select @ROUNDINGPRECISION = @ROUNDINGPRECISION - floor(@ROUNDINGPRECISION)

while @ROUNDINGPRECISION < 1
Begin
    select @NoOfDecimals = @NoOfDecimals +1
    select @ROUNDINGPRECISION =  @ROUNDINGPRECISION * 10

end;

select @NoOfDecimals 
```*

# mysql - ActiveRecord 迁移 - 日期时间到时间戳

> ID：13953132
> 
> 赞同：2
> 
> 时间：2012-12-19T13:08:48.820
> 
> 标签：mysql, ruby-on-rails, activerecord

我正在尝试将 MySQL 中的一些日期时间列迁移到时间戳类型。在 ActiveRecord 迁移中，我有：

```
change_column(:oe_tags, :created_on, :timestamp) 
```

但是它生成的sql是

```
ALTER TABLE `oe_tags` CHANGE `created_on` `created_on` datetime DEFAULT NULL 
```

这显然不是时间戳类型，而是日期时间（它已经是）。我如何获得更改`timestamp`？根据文档 :timestamp 是一个有效的符号。

编辑：也许我没有说清楚（道歉）。我想知道 Rails 中 ActiveRecord 迁移中正确的 change_column 规范。我已经知道我期望的正确 SQL。如何通过 ActiveRecord 迁移来实现它是个问题。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-19T13:15:38.967

试试`modify`关键字 ::

```
ALTER TABLE `oe_tags` MODIFY `created_on` datetime DEFAULT NULL 
```

# sql - 将 Access TRANSFORM/PIVOT 查询转换为 SQL Server

> ID：13953134
> 
> 赞同：17
> 
> 时间：2012-12-19T13:09:01.100
> 
> 标签：sql, sql-server, tsql, ms-access, pivot

```
TRANSFORM Avg(CASE WHEN [temp].[sumUnits] > 0 
                   THEN [temp].[SumAvgRent] / [temp].[sumUnits] 
                   ELSE 0 
              END) AS Expr1
SELECT [temp].[Description]
  FROM [temp] 
GROUP BY [temp].[Description]
PIVOT [temp].[Period]; 
```

需要将此查询转换为 sql server

我已阅读所有其他帖子，但无法将其转换为相同的

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-19T13:45:05.200

[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.90%29.aspx)这是使用表运算符的等效版本：

```
SELECT *
FROM
(
  SELECT 
    CASE 
      WHEN sumUnits > 0 
      THEN SumAvgRent / sumUnits ELSE 0 
  END AS Expr1,
  Description,
  Period
  FROM temp
) t
PIVOT
(
  AVG(Expr1)
  FOR Period IN(Period1, Period2, Period3)
) p; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/e3f83/1)

例如，这将为您提供：

```
| DESCRIPTION | PERIOD1 | PERIOD2 | PERIOD3 |
---------------------------------------------
|          D1 |      10 |       0 |      20 |
|          D2 |     100 |    1000 |       0 |
|          D3 |      50 |      10 |       2 | 
```

* * *

**请注意，**当使用 MS SQL Server`PIVOT`表运算符时，您必须输入透视列的值。然而，在 MS Access 中，这是 do 的工作`TRANSFORM`，`PIVOT`它动态地获取旋转列的值。在这种情况下，您必须使用运算符动态地执行此`PIVOT`操作，如下所示：

```
DECLARE @cols AS NVARCHAR(MAX);
DECLARE @query AS NVARCHAR(MAX);

SELECT @cols = STUFF((SELECT distinct 
                        ',' +
                        QUOTENAME(Period)
                FROM temp
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'');

SET @query =  ' SELECT Description, ' + @cols + '
    FROM 
    (
      SELECT 
        CASE 
          WHEN sumUnits > 0 
          THEN SumAvgRent / sumUnits ELSE 0 
      END AS Expr1,
      Description,
      Period
      FROM temp
    ) t
    PIVOT
    (
      AVG(Expr1)
      FOR Period IN( ' + @cols + ') 
    ) p ';

Execute(@query); 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/e3f83/10)

这应该会给您相同的结果：

```
| DESCRIPTION | PERIOD1 | PERIOD2 | PERIOD3 |
---------------------------------------------
|          D1 |      10 |       0 |      20 |
|          D2 |     100 |    1000 |       0 |
|          D3 |      50 |      10 |       2 | 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-09-02T14:19:32.373

```
TRANSFORM SUM(s2+s1) 
SELECT PlanoContas.Conta AS Conta,
SPACE(LEN(PlanoContas.Conta)/2) + PlanoContas.Extenso AS Extenso,
PlanoContas.Tipo,SUM(s2+s1) AS [01/04/14] 
FROM PlanoContas 
INNER JOIN TEMP ON 
PlanoContas.Conta=LEFT(Temp.Conta,LEN(PlanoContas.Conta)) 
WHERE LEN(PlanoContas.Conta)<=16 AND (s1<>0 OR s2<>0) 
GROUP BY PlanoContas.Conta,Extenso,Tipo 
ORDER BY PlanoContas.Conta PIVOT Filial 
```

# knockout.js - Knockout.js 是否仅适用于单页应用程序？

> ID：13953138
> 
> 赞同：4
> 
> 时间：2012-12-19T13:09:13.383
> 
> 标签：knockout.js

Knockout JS 是否只适合构建单页 Web 应用程序？我找不到任何在多页 Web 应用程序中使用它的示例（例如，您可以使用 Knockout 构建类似 stackoverflow.com 的东西吗？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:18:18.333

这可能看起来像一个广泛的问题，但它的答案可能很短：**不**，Knockout.js 不仅适用于单页应用程序。Knockout.js 是一个模板库，为您提供使用 MVVM 模式创建动态视图的工具。

无论您是想将 Knockout 用于单页应用程序还是多页网站，都没有任何限制。请注意，在后者中，Knockout 上下文不会在页面之间共享。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:15:41.560

嗯，这是一个非常广泛的问题，但我本人目前正在开发一个基于 knockout.js 的门户。不是全部——它有一个 MVC3 后端，它甚至可以与另一个基于 WCF 服务的后端进行通信。所以，不，knockout.js 并不是那里唯一的技术 :)

然而，数据绑定一次又一次地证明自己是创建以数据为中心的门户网站的一种舒适且有用的方法。在早期版本的淘汰赛中会出现问题，不支持模型值偷看等，但现在一切正常。

可以说，我们的每个范围都是一个单页应用程序，具有自己的模型和元素。尽管有一些用于请求长轮询等的常见组件，但它们往往会修改模型值。因此，我们不再需要基于诸如 css 类之类的周引用来更新诸如活动计数之类的信息。我们宁愿更新模型，让其他一切自行处理。

所以，简而言之，是的：通过正确组合其他优秀技术，您可以制作大型的多页面网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T13:15:30.850

您可以将 Knockout 用于您想要的任何类型的应用程序。我在我的 MVC 项目中使用它没有任何问题，而且它们不是单页应用程序模板。我知道微软默认包含带有单页应用程序项目模板的 Knockout，但您也可以在其他地方使用它，没有问题。

# android - 在 Eclipse 中使用不会产生警告的模拟数据

> ID：13953141
> 
> 赞同：2
> 
> 时间：2012-12-19T13:09:18.913
> 
> 标签：android, eclipse, user-interface, mocking

如何使用数据创建布局文件并用一些示例数据填充它们，以便我可以看到我所做的事情而不会产生警告。

这是一个例子：

![简单的安卓用户界面](../Images/8b0c6056bb9f6ef40d835e6d5d9b2cab.png)

如果我删除文本（需要 Android Lint）我有一个纯蓝屏，这根本没有帮助。

顺便说一句，这是警告：

> [I18N] 硬编码字符串“Foobar”，应使用 @string 资源 example.xml /Example/res/layout 第 42 行 Android Lint 问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:14:40.473

在您的 strings.xml 中为您的每个示例字符串创建一个条目。

另一方面，这是一个 Lint 警告。您可以放心地忽略这一点，而不会立即对您的应用程序造成损害，因为这些只是为了指导您进行最佳实践。

![在此处输入图像描述](../Images/9b37ecbdae17097b0cc000aa42de5ed0.png)

转到 Eclipse 首选项，进入`Android`子菜单，然后进入`Lint Error Checking`菜单并禁用`HardcodedText`警告。

**第二种方法**

不是通过 XML 设置示例文本，而是通过 Java 代码使用 setText()，并将其包含在 if 条件中，如下所示：

```
if(BuildConfig.DEBUG) {
    view.setText("My example text");
} 
```

BuildConfig.DEBUG 是在 ADT 17 中添加的，每当您进行调试构建时都是如此。导出 apk 时，它设置为 false。由于该变量设置为 false 并且从不重新分配，Java 编译器将优化您的代码并删除这些语句。它们不会被编译到生产应用程序中。

# scala - 在 CRUD Web 应用程序中使用 Akka Actor

> ID：13953143
> 
> 赞同：23
> 
> 时间：2012-12-19T13:09:26.777
> 
> 标签：scala, playframework-2.0, akka

我正在开发一个用 Scala 编写的 Web 应用程序，使用 Play！框架和 Akka。代码基本上是这样组织的：播放控制器向 Akka 演员发送消息。参与者依次与抽象数据库访问的持久层对话。在应用程序中使用这些组件的典型示例：

```
class OrderController(orderActor: ActorRef) extends Controller {
  def showOrders(customerId: Long) = {
    implicit request => Async {
      val futureOrders = orderActor ? FindOrdersByCustomerId(id)

      // Handle the result, showing the orders list to the user or showing an error message.
    }
  }
}

object OrderActor extends Actor {
  def receive = {
    case FindOrdersByCustomerId(id) => 
      sender ! OrderRepository.findByCustomerId(id)
    case InsertOrder(order) =>
      sender ! OrderRepository.insert(order)
      //Trigger some notification, like sending an email. Maybe calling another actor.
  }
}

object OrderRepository {
  def findByCustomerId(id: Long): Try[List[Order]] = ???
  def insert(order: Order): Try[Long] = ???
} 
```

如您所见，这是基本的 CRUD 模式，与您在其他语言和框架中看到的非常相似。查询被传递到下面的层，当应用程序从数据库中获取结果时，该结果会返回，直到它到达 UI。唯一相关的区别是参与者和异步调用的使用。

现在，我对演员的概念很陌生，所以我还不太明白。但是，根据我所读到的，这不是演员应该被使用的方式。但是请注意，在某些情况下（例如，在插入订单时发送电子邮件）我们确实需要真正的异步消息传递。

所以，我的问题是：以这种方式使用演员是个好主意吗？利用 Futures 和 Akka 的其他并发功能，在 Scala 中编写 CRUD 应用程序的替代方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T13:41:57.593

虽然基于actor的并发不适合开箱即用的事务操作，但是如果你很好地使用持久层，这并不能阻止你以这种方式使用actor。如果您可以保证**插入**（ write ）是原子的，那么您可以安全地让一个演员池为您做这件事。通常数据库具有线程安全读取，因此**find**也应该按预期工作。除此之外，如果**插入**不是线程安全的，您可以拥有一个专门用于写入操作的 WriteActor，并且消息的顺序处理将确保您的原子性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T14:24:56.493

需要注意的一件事是参与者一次处理一条消息，在这种情况下这将是相当有限的。您可以通过使用[路由器](http://doc.akka.io/docs/akka/2.1.0-RC6/scala/routing.html)来使用参与者池。

您的示例定义了存储库的阻塞 api，这可能是您唯一可以做的事情，具体取决于您的数据库驱动程序。如果可能的话，您也应该在那里使用异步 api，即返回 Futures。然后，在 actor 中，您将通过[管道](http://doc.akka.io/docs/akka/2.1.0-RC6/scala/actors.html#Ask__Send-And-Receive-Future)将 Future 的结果发送给发送者。

# java - 字符不会存储在列表中

> ID：13953145
> 
> 赞同：4
> 
> 时间：2012-12-19T13:09:29.343
> 
> 标签：java, arrays, list

```
List<String> commandList = new ArrayList<String>();
int num = 0;
String command;

command = JOptionPane.showInputDialog(null, "Enter your commands here: ");

while (command.length() > num) {
    commandList.add(num, command.substring(num, num+1));
    num++;
} 
```

我让用户输入一个字符串，我想将字符串中的每个单独的字符存储到列表中。

我现在所拥有的并不能正确地做到这一点。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T13:13:29.410

你可以做以下事情

```
String [] myarray = command.split("");
List<String> commandList = Arrays.asList(myarray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:12:33.723

你应该`charAt()`这样使用：

```
List<Character> commandList = new ArrayList<Character>();
for(int i = 0; i < command.length(); i++) {
    commandList.add(command.charAt(i));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T13:12:59.290

```
char[] charArray = command.toCharArray();
Character[] charObjectArray = ArrayUtils.toObject(charArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T13:48:17.383

似乎并没有错。

我运行了你的代码，一切都很好......你有正常和工作的代码......

# solr - Solr 通配符配置问题

> ID：13953146
> 
> 赞同：2
> 
> 时间：2012-12-19T13:09:32.587
> 
> 标签：solr, wildcard, stemming

嗨，谁能像文本编辑器一样配置 solr 来查找所有内容？

我有一个包含

```
... text texct blah Computer-Zeitalter blah text m00h ... 
```

我已经这样配置了

```
<fieldType name="text" class="solr.TextField" positionIncrementGap="100">
    <analyzer>
        <tokenizer class="solr.WhitespaceTokenizerFactory" />
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" />
        <filter class="solr.WordDelimiterFilterFactory" 
                generateWordParts="1" generateNumberParts="0" catenateWords="1"
                catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"
                splitOnNumerics="0" stemEnglishPossessive="1"/>
        <filter class="solr.LowerCaseFilterFactory" />
        <filter class="solr.TrimFilterFactory" />   
        <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt" />
        <filter class="solr.RemoveDuplicatesTokenFilterFactory" />
        <filter class="solr.ReversedWildcardFilterFactory" />
        <filter class="solr.LengthFilterFactory" min="2" max="100" />
    </analyzer>
</fieldType> 
```

但

```
select/?q=volltext:*eitalter&version=2.2&start=0&rows=10&indent=on
select/?q=volltext:eitalter&version=2.2&start=0&rows=10&indent=on 
```

没有结果，为什么？

我正在使用 solr 1.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:50:57.740

由于您使用`EnglishPorterFilterFactory`，它会从*Zeitalter中删除**“er”*后缀并将其索引为*zeitalt*。所以，如果你想找到这个关键字，那么

 ***   您应该将查询更改为`...q=volltext:*eitalt&...`
*   或者您应该`EnglishPorterFilterFactory`从字段定义中删除并使用搜索`...q=volltext:*eitalter&...`**

# java - 接口方法映射 Java

> ID：13953148
> 
> 赞同：0
> 
> 时间：2012-12-19T13:09:42.933
> 
> 标签：java, interface, shadow

我在接口方面遇到了一些有趣的问题，请帮助我理解这个概念。

我有三个接口Itest、Itest3、Itest4。接口 Itest 扩展了 Itest3 和 Itest4 接口。他们两个接口都有一个共同的方法`public void one();`现在一个类 Test 实现了 Itest 接口并覆盖了方法`one()`

现在它继承了哪个接口的方法？如果我想继承特定接口的通用方法怎么办。它对多态性有什么影响？如果另一个类只继承 Itest3 怎么办。我认为这会在运行时中断。

请帮助我了解这样做的好处是什么？

代码在这里...

```
public interface ITest extends Itest4,Itest3 {
    public static interface ITest2{

    }
}

public interface Itest3 {
    public void one();
}

public interface Itest4 {
    public void one();
}

public class Test implements ITest {    

    @Override
    public void one() {
        //Which interface method it overrides?
    }

public static void main(String... arg) {
        new Test();
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:14:18.967

答案是：没关系。

接口只是声明，而不是代码。两个接口都声明了一个方法`public void one()`。当您有一个实现此方法的实现类时，它会同时为两个接口实现它。这个实现`class Test`不会覆盖任何东西。这是第一个实现。它可以覆盖的接口中没有实现 - 只有两个相同的声明。

当另一个类实现 ITest3 时，它将需要自己的`public void one()`. 就像任何其他实现 ITest4 或 ITest 的类一样。唯一不需要自己实现的情况是，当您有一个扩展类 Test 的类时，因为它可以从 Test 继承实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:30:44.053

宣言

```
public interface Itest3 {
    public void one();
} 
```

简单地说，任何 Itest3 的实现者都将提供一个名为 one 的方法，不接受任何参数，并返回 void。

以完全相同的方式

宣言

```
public interface Itest4 {
    public void one();
} 
```

还指出，任何 Itest4 的实现者都将提供一个名为 one 的方法，不接受任何参数，并返回 void。

接口只是为了指定行为契约而存在，而与所述行为的实现无关。因此，

```
public class Test implements ITest {    

    @Override
    public void one() {
        //Defines the behavior of both interfaces
    }
} 
```

定义一个实现两个接口的类。这是因为方法实现满足两个接口的要求。

# c# - datagridview 事件的枚举索引

> ID：13953152
> 
> 赞同：3
> 
> 时间：2012-12-19T13:09:47.923
> 
> 标签：c#, datagridview, enums, indexing, switch-statement

在 C# 中，我使用枚举并将它们作为字符串添加到列表中。我将列表与 datagridview 绑定。在 datagridview 事件中，我想单击单元格并执行操作。

我将如何使用枚举作为索引而不是行来做到这一点？

```
public enum QSystems { WindowsSystem, systemCheck, QDependencies }
_items = new List<string>();
_items.Add(QSystems.WindowsSystem.ToString());
_items.Add(QSystems.systemCheck.ToString());
_items.Add(QSystems.QDependencies.ToString()); 
```

在datagridview中

```
private void dataGridView2_CellMouseDoubleClick(object sender, DataGridViewCellMouseEventArgs e)
{
    _ckecklist = new List<FileStatus>();

    switch (e.RowIndex) //this is wrong
    {
        case (short)QSystems.WindowsSystem:
            _ckecklist.Clear();
            ShowSystemStatus();
            dataGridView1.DataSource = _ckecklist;
            SetDatagriDview();
            dataGridView1.Show();
            break;

        case (short)QSystems.systemCheck:
            _ckecklist.Clear();   
            ShowNStatus();
            dataGridView1.DataSource = _ckecklist;
            SetDatagriDview();
            dataGridView1.Show();
            break;

        case (short)QSystems.QDependencies:
            _ckecklist.Clear();
            ShowQDependencies();
            dataGridView1.DataSource = _ckecklist;
            SetDatagriDview();
            dataGridView1.Show();
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:30:41.587

您可以获取选择的字符串并使用解析将其转换为枚举值，例如：

```
Colors colorValue = (Colors) Enum.Parse(typeof(Colors), colorString); 
```

另一个例子：

```
String WhatDayItIs = DayOfWeek.Monday.ToString();     

DayOfWeek WhatDayItIsDOW;

if (Enum.IsDefined(typeof(DayOfWeek), WhatDayItIs)) 
        WhatDayItIsDOW = (DayOfWeek)Enum.Parse(typeof(DayOfWeek), WhatDayItIs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:05:33.377

我用

```
_items = Enum.GetValues(typeof(QSystems)).Cast<QSystems>().ToList(); 
```

和

```
dataGridView2.DataSource = _items.Select(x => new { Value = x }).ToList(); 
```

有了这个开关状态正在唤醒:)

# eclipse - 逆时针在eclipse中不使用步进调试器？

> ID：13953160
> 
> 赞同：4
> 
> 时间：2012-12-19T13:10:28.367
> 
> 标签：eclipse, debugging, clojure, read-eval-print-loop, counterclockwise

逆时针文档[包含](http://code.google.com/p/counterclockwise/wiki/Documentation#Debug_clojure_code)以下语句：

```
use the out-of-the-box Eclipse debugger possibilities to launch your launch configurations (Debug instead of Run

What you can currently do is being able to place breakpoints in clojure code edited either via the standard text editor 
```

这对我来说建议使用 eclipse 单步调试器。所以我设置了以下 Clojure 代码：

```
 (ns ccwdebugtest)

   (def a 1)

X) (def b 2)

X) (def c 3)

X) (def d 4) 
```

在每个标记的点设置调试点`X)`- 然后我选择通过“调试为 > Clojure 应用程序”运行代码。

我期望得到的是启动 Eclipse 调试模式的提示 - 而是在底部启动了一个新的 REPL。

当我输入时，`(println d)`我得到了结果`4`。

这告诉我，我的断点当时未能中断。

我的期望不成立吗？难道我做错了什么？

（我正在运行 Eclipse Juno，在 OS X 10.8.2 上使用 Java 1.7，CCW 版本为 0.10.2.STABLE001）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:52:47.503

并非每个 Clojure 行都被编译（由 Clojure 编译器，这里与 CCW / Eclipse 无关）带有用于调试的行信息。

尝试创建一个函数，并为包含表达式的行添加断点，例如 (+ 2 3)。

# c# - 问题比较两个 System.Drawing.Image 集合中的项目以查看它们是否匹配

> ID：13953162
> 
> 赞同：0
> 
> 时间：2012-12-19T13:10:40.023
> 
> 标签：c#, wpf, image, observablecollection

我正在 WPF 中制作具有拖放功能的图片益智游戏。上传图像时，它会被切割成 9 块，每个位图都添加到 System.Drawing.Images 的集合（collection1）中。我比较的是这个集合，看看重新排列时的图像是否正确。然后我将每个位图随机分配到网格上的一个位置并放入 System.Drawing.Images 的另一个集合（collection2）中。

当我将图像拖放到网格上时，我会更改图像在 collection2 中的位置。在网格上移动图像后，我检查（验证）以查看每个集合中的图像位置（索引）是否匹配。如果是这样，图片已重新排列。希望我有正确的解释。

我的问题是该方法总是返回 false，即使图像已被安排以完成图像。

如果我需要提供更多代码或更好地解释，请告诉我。我想清楚地理解这一点，但我的头是炸的

```
 public bool Validate(ObservableCollection<System.Drawing.Image> itemPlacement)
    {
        ObservableCollection<System.Drawing.Image> placement = itemPlacement;

        foreach (System.Drawing.Image item in placement)
        {
            if ((placement.IndexOf(item) != puzzlePiece.IndexOf(item) || placement.IndexOf(item) < 0))
            {
                return false;
            }
        }

        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:25:47.807

据我了解，您有一个集合以特定顺序存储一组已知图像，并且您有另一个集合（来自第一个集合的相同图像）代表用户放置它们的顺序，您想确定订单是否匹配。如果他们这样做了，用户就成功地解决了这个难题。

嗯......很容易 - 创建一个带有索引的类并进行比较。

```
public class PuzzlePiece
{
  public int Index { get; set; }
  public Image Piece { get; set; }
}

for(int i = 0; i < puzzlePieces.Count; i++)
{
  if(puzzlePieces[i].Index != playerPieces[i].Index) return false;
}
return true; 
```

此外，您可以实现 IComparable 并根据您的索引进行排序 - 但在按顺序添加图像时，在小型集合中可能不需要。但是， IComparable 将允许您说：

```
if(puzzlePieces[i].CompareTo(playerPieces[i]) != 0) return false; 
```

# android - 紧急情况，带有谷歌电子表格的阿克拉

> ID：13953166
> 
> 赞同：0
> 
> 时间：2012-12-19T13:11:04.203
> 
> 标签：android, acra

我明天必须决定如何处理我的崩溃报告，因为我的电子表格中保存了太多报告。而且我不想切换到错误感知或某事。否则，因为我还没准备好付钱？是否有一些技巧（如谷歌脚本）可以将每个报告自动保存在 1000 份以内？或者是否有一些免费的报告存储服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:41:09.977

最便宜的方法是将报告发送到 PHP 脚本，该脚本会将有用的数据写入数据库（ACRA 通过 HTTP POST 查询支持这一点）。

您可以在免费或廉价的共享托管服务提供商上托管此脚本。

当然，这需要在服务器端进行一些实现，但是您可以在 ACRA 页面上使用一些基本脚本。

# android - 使用 simpleCursorAdapter 插入新记录后更新列表视图 - requery()

> ID：13953171
> 
> 赞同：1
> 
> 时间：2012-12-19T13:11:16.340
> 
> 标签：android, sqlite, listview

我了解`requery()`机制，但我不了解实现：

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        datasource = new pollDataSource(this);
        datasource.open();

        Cursor values = datasource.getAllCategorie();

        String[] categorieColumns =
            {
                MySQLiteHelper.COLUMN_NOME   // Contract class constant containing the word column name

            };

            int[] mWordListItems = { R.id.categoria_label };

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(
                getApplicationContext(),               // The application's Context object
                R.layout.single_list_item,             // A layout in XML for one row in the ListView
                values,                                // The result from the query
                categorieColumns,                      // A string array of column names in the cursor
                mWordListItems,                        // An integer array of view IDs in the row layout
                0);                                    // Flags (usually none are needed)

        setListAdapter(adapter);
    }

      public void onClick(View view) {
          categorie categoria = null;
        switch (view.getId()) {
        case R.id.add:

            categoria = datasource.createCategoria("pluto") ;
          break;

        case R.id.categoria_label:

          break;

        }

      } 
```

在`categoria = datasource.createCategoria("pluto");`我必须定义另一个之后：

```
SimpleCursorAdapter adapter = new SimpleCursorAdapter(
                    getApplicationContext(),               // The application's Context object
                    R.layout.single_list_item,             // A layout in XML for one row in the ListView
                    values,                                // The result from the query
                    categorieColumns,                      // A string array of column names in the cursor
                    mWordListItems,                        // An integer array of view IDs in the row layout
                    0);                                    // Flags (usually none are needed)

            setListAdapter(adapter); 
```

**轮询数据源**：

```
public class pollDataSource {
    // Database fields
      private SQLiteDatabase database;
      private MySQLiteHelper dbHelper;
      private String[] allCategorieColumns = { MySQLiteHelper.COLUMN_ID,
          MySQLiteHelper.COLUMN_PREF, MySQLiteHelper.COLUMN_NOME };   
      private String[] allSondaggiColumns = { MySQLiteHelper.COLUMN_ID,
              MySQLiteHelper.COLUMN_CATID, MySQLiteHelper.COLUMN_DOMANDA };   
      private String[] allRisposteColumns = { MySQLiteHelper.COLUMN_ID, 
              MySQLiteHelper.COLUMN_SONDID, MySQLiteHelper.COLUMN_RISPOSTA, 
              MySQLiteHelper.COLUMN_SELEZIONATA };

      public pollDataSource(Context context) {
            dbHelper = new MySQLiteHelper(context);
          }

      public void open() throws SQLException {
            database = dbHelper.getWritableDatabase();
          }

      public void close() {
            dbHelper.close();
          }

      public categorie createCategoria(String categoria) {
            ContentValues values = new ContentValues();
            values.put(MySQLiteHelper.COLUMN_NOME, categoria);
            values.put(MySQLiteHelper.COLUMN_PREF, 0);
            long insertId = database.insert(MySQLiteHelper.TABLE_CATEGORIE, null,
                values);
            Cursor cursor = database.query(MySQLiteHelper.TABLE_CATEGORIE,
                allCategorieColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null);
            cursor.moveToFirst();
            categorie newCategoria = cursorToCategorie(cursor);
            cursor.close();
            return newCategoria;
          } 

      public void deleteCategoria(categorie categoria) {
            long id = categoria.getId();
            System.out.println("Categoria cancellata, id: " + id);
            database.delete(MySQLiteHelper.TABLE_CATEGORIE, MySQLiteHelper.COLUMN_ID
                + " = " + id, null);
          }

      public sondaggi createSondaggio(String domanda, int catid) {
            ContentValues values = new ContentValues();
            values.put(MySQLiteHelper.COLUMN_DOMANDA, domanda);
            values.put(MySQLiteHelper.COLUMN_CATID, catid);
            long insertId = database.insert(MySQLiteHelper.TABLE_SONDAGGI, null,
                values);
            Cursor cursor = database.query(MySQLiteHelper.TABLE_SONDAGGI,
                allSondaggiColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null);
            cursor.moveToFirst();
            sondaggi newSondaggio = cursorToSondaggi(cursor);
            cursor.close();
            return newSondaggio;
          }

      public void deleteSondaggio(sondaggi sondaggio) {
            long id = sondaggio.getId();
            System.out.println("Sondaggio cancellato, id: " + id);
            database.delete(MySQLiteHelper.TABLE_SONDAGGI, MySQLiteHelper.COLUMN_ID
                + " = " + id, null);
          } 

      public Cursor getAllCategorie() {
            List<categorie> categorie = new ArrayList<categorie>();

            Cursor cursor = database.query(MySQLiteHelper.TABLE_CATEGORIE,
                allCategorieColumns, null, null, null, null, null);

            cursor.moveToFirst();
            while (!cursor.isAfterLast()) {
              categorie categoria = cursorToCategorie(cursor);
              categorie.add(categoria);
              cursor.moveToNext();
            }
            // Make sure to close the cursor
           // cursor.close();
            return cursor;
          }

      private categorie cursorToCategorie(Cursor cursor) {
          categorie categorie = new categorie();
          categorie.setId(cursor.getLong(0));
          categorie.setPreferita(cursor.getLong(1));
          categorie.setNome(cursor.getString(2));
            return categorie;
          }
      private sondaggi cursorToSondaggi(Cursor cursor) {
          sondaggi sondaggi = new sondaggi();
          sondaggi.setId(cursor.getLong(0));
          sondaggi.setDomanda(cursor.getString(1));
          sondaggi.setCatid(cursor.getLong(2));
          return sondaggi;
          }

} 
```

输入相同？？所以基本上我将在同一个类的两个不同地方有相同的确切代码......我可以定义一个......“程序”或一个类吗？如果我太天真，我很抱歉，我是一个真正的菜鸟：D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T13:29:20.963

`requery`游标方法已弃用。但你是对的，你必须重新加载光标，然后确保你的新光标出现在你的`ListView`. 对于一个快速的'n脏解决方案，我建议你将你的适配器设为一个字段。然后使用以下方法：

```
private void requery() {
    Cursor values = datasource.getAllCategorie();
    adapter.changeCursor(values);
} 
```

它所做的是重新制作光标。然后通过调用`changeCursor`您将旧光标交换为新光标，旧光标会自动关闭。至少，您可以避免制作新的适配器。我认为所有修剪和修复的更复杂的方法是实现一个`CursorLoader`在数据库内容更改时自动执行该过程的方法。

# java - Java同步关键字问题

> ID：13953173
> 
> 赞同：1
> 
> 时间：2012-12-19T13:11:21.817
> 
> 标签：java, synchronized

我试图`synchronized`从以下示例中理解关键字

Java`Main`方法 -->

```
public int methodA(){

  Hello h = new Hello();
  h.callSomeSynchronizedMethod();    

  sysout("Main");
  return 0;    

} 
```

在`Hello`课堂上-->

```
public synchronized void callSomeSynchronizedMethod(){
   Hi h = new Hi();

   h.someMethod();

   sysout("Hello");

} 
```

在`Hi`课堂上

```
public void someMethod(){

    sysout("Hi");
} 
```

那么我将得到的输出列表是什么？

1.) 它的顺序是`Hi, Hello and Main`？

2.) 我对 synchronized 关键字的理解是它只会执行一个方法，然后执行另一个，没有多线程。它是否正确 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:18:52.850

你会得到“Hi”，然后是“Hello”，然后是“Main”，是的。synchronized 修饰符与调用方法的顺序无关；而且，除了增加一点开销之外，在单个线程中运行代码时它什么都不做。您可以在没有同步的情况下运行相同的测试并获得相同的结果。

现在，如果您在多个线程调用这些方法的情况下运行类似的测试，您的结果将不太确定。

同步意味着允许在多线程环境中更安全地执行代码和管理资源。

[http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:24:56.837

要真正了解什么是同步的，您需要运行该程序两次，一次同步，一次不同步。此外，您的程序应该使用多个线程。所以这里是这样一个测试的例子。

```
public class Synchro {

    public static void main(String args[]){
        new Synchro();
    }

    public Synchro(){
        final Moo moo = new Moo();
        Thread t = new Thread(new Runnable(){
           public void run(){
               moo.aMethod("Second");
           }
        });
        t.start();//calling the method in a thread

        moo.aMethod("First");//calling the same method from the same object in the main thread
     }

 class Moo{     
    public Moo(){            
    }

    public void aMethod(String name){
        //this loop just prints slowly so you can see the execution
        for(int i = 1; i <= 100; i++){
            System.out.println(String.format("%s : %d", name, i));
            try{
                Thread.sleep(50);
            }catch(InterruptedException e){}
        }
    }
  }

} 
```

现在，如果您运行上述代码，注意到该方法未同步，您将看到该方法的两次执行交错的打印输出。也就是说，您将看到 First 1，然后是 Second 1，然后是 First 2，依此类推。

现在，将 synchronized 关键字添加到制作它的方法中：

```
 public synchronized void aMethod(String name){ .... 
```

并再次运行代码。这一次，方法的一个执行在另一个开始之前完成。

仅当多个线程访问同一个对象时，才需要使用 synchronized 关键字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T13:18:30.360

所有这些方法都将在一个线程中执行，因此第一个问题的答案是“是”。

`synchronized`关键字 emans 表示该方法每时每刻只能在一个线程中执行。因此，如果您从另一个线程调用它 - 它会等到第一个线程中的执行完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T13:22:47.940

在 Java 中没有自动多线程：您必须显式地启动一个线程并向其传递一个`run`它将执行的方法。只有在这种情况下，`synchronized`关键字才会开始起作用，但它的含义并不像您所理解的那样：方法将在调用它们的任何线程中执行，但是当一个线程正在执行时，另一个线程将在它能够执行方法之前**阻塞**由同一把锁守卫。

# operating-system - 为什么我们需要为每个 CPU 提供单独的内核堆栈

> ID：13953175
> 
> 赞同：5
> 
> 时间：2012-12-19T13:11:23.687
> 
> 标签：operating-system, kernel, smp

在实践中，许多操作系统被设计为每个线程有一个内核堆栈，或者每个 CPU 至少有一个内核堆栈。但是对于一个内核在每次进程陷阱时都被锁定的操作系统，似乎没有必要为每个 CPU 设置单独的内核堆栈。由于内核（具有自己的堆栈）仅允许单个 CPU 访问，因此 CPU 永远不应同时处于内核模式。CPU 总是被阻塞，直到前一个 CPU 离开并清理内核堆栈，即使在嵌套陷阱情况下也是如此。那么在这种操作系统中，在哪种情况下需要多个内核堆栈呢？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T13:48:28.767

你是对的; 在这种情况下，只要您具有可靠的多核锁定功能，多个内核堆栈就不会有用。

我们通常有多个内核堆栈（即每个线程*至少有*一个内核堆栈）用于以下目的：

*   当您希望您的内核是线程化的和可中断的时，例如在微内核架构中。
*   当您想将线程从一个核心迁移到另一个核心时，例如在负载平衡时。将 CPU1 的内核堆栈复制到 CPU2 的内核堆栈会很麻烦。不用说它也会成为性能杀手，因为您为此目的冻结了两个内核。
*   根据底层架构，拥有多个内核堆栈使 MMU 的事情变得更容易（AS 管理，...）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T16:36:27.443

实际上，许多操作系统不限制运行内核级代码的线程数。事实上，设置这个限制会严重限制内核的可扩展性。如果没有此限制，则需要多个内核堆栈。

此外，在实践中，操作系统可能允许当前在内核模式下执行的线程的抢占和迁移，这再次将内核堆栈绑定到线程而不是处理器。

如果您正在设计一个不具备这些特性的操作系统，而是将内核级执行限制为单个线程，那么只需要一个堆栈即可。

# android - android错误视图未附加到窗口管理器并崩溃？

> ID：13953179
> 
> 赞同：0
> 
> 时间：2012-12-19T13:11:31.707
> 
> 标签：android, view

当我启动我的应用程序时，我的应用程序被强制关闭并给出未附加到窗口管理器的视图错误

> Logcat 错误

```
12-19 18:28:06.258: E/WindowManager(5960): Activity com.example.vixxa.HomeActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@419d0390 that was originally added here
12-19 18:28:06.258: E/WindowManager(5960): android.view.WindowLeaked: Activity com.example.vixxa.HomeActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@419d0390 that was originally added here
12-19 18:28:06.258: E/WindowManager(5960):  at android.view.ViewRootImpl.<init>(ViewRootImpl.java:349)
12-19 18:28:06.258: E/WindowManager(5960):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:267)
12-19 18:28:06.258: E/WindowManager(5960):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
12-19 18:28:06.258: E/WindowManager(5960):  at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
12-19 18:28:06.258: E/WindowManager(5960):  at android.view.Window$LocalWindowManager.addView(Window.java:537)
12-19 18:28:06.258: E/WindowManager(5960):  at android.app.Dialog.show(Dialog.java:285)
12-19 18:28:06.258: E/WindowManager(5960):  at android.app.ProgressDialog.show(ProgressDialog.java:116)
12-19 18:28:06.258: E/WindowManager(5960):  at android.app.ProgressDialog.show(ProgressDialog.java:99)
12-19 18:28:06.258: E/WindowManager(5960):  at android.app.ProgressDialog.show(ProgressDialog.java:94)
12-19 18:28:06.258: E/WindowManager(5960):  at com.example.vixxa.HomeActivity.onCreate(HomeActivity.java:370)
12-19 18:28:06.258: E/WindowManager(5960):  at android.app.Activity.performCreate(Activity.java:4492)
12-19 18:28:06.258: E/WindowManager(5960):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-19 18:28:06.258: E/WindowManager(5960):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
12-19 18:28:06.258: E/WindowManager(5960):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
12-19 18:28:06.258: E/WindowManager(5960):  at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3351)
12-19 18:28:06.258: E/WindowManager(5960):  at android.app.ActivityThread.access$700(ActivityThread.java:123)
12-19 18:28:06.258: E/WindowManager(5960):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1151)
12-19 18:28:06.258: E/WindowManager(5960):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-19 18:28:06.258: E/WindowManager(5960):  at android.os.Looper.loop(Looper.java:137)
12-19 18:28:06.258: E/WindowManager(5960):  at android.app.ActivityThread.main(ActivityThread.java:4424)
12-19 18:28:06.258: E/WindowManager(5960):  at java.lang.reflect.Method.invokeNative(Native Method)
12-19 18:28:06.258: E/WindowManager(5960):  at java.lang.reflect.Method.invoke(Method.java:511)
12-19 18:28:06.258: E/WindowManager(5960):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-19 18:28:06.258: E/WindowManager(5960):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-19 18:28:06.258: E/WindowManager(5960):  at dalvik.system.NativeStart.main(Native Method)
12-19 18:28:06.258: E/wifienabled(5960): wifitrue 
```

> HomeActivity.java

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

            wifiManager = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);
            Log.e("wifienabled","wifi"+wifiManager.isWifiEnabled());

                gps = new GPSTracker(HomeActivity.this);
                // check if GPS enabled
                if(gps.canGetLocation())
                {
                        latitude = gps.getLatitude();
                        longitude = gps.getLongitude();         // \n is for new line
                 Toast.makeText(getApplicationContext(), "Your Location is - \nLat: " + latitude + "\nLong: " + longitude, Toast.LENGTH_LONG).show();
             }

            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build(); 
            StrictMode.setThreadPolicy(policy); 

            alertDialog = new AlertDialog.Builder(this).create(); 
            flightalertDialog = new AlertDialog.Builder(this).create();
            loginalertDialog=new AlertDialog.Builder(this).create();

            if(CheckConnection.getInstance(this).isOnline(this))
            {
                progressdialogflight = ProgressDialog.show(HomeActivity.this, "Loading...", "Please Wait");

                 int displaymode=getResources().getConfiguration().orientation;
                    if(displaymode==1)
                    {
                        policy = new StrictMode.ThreadPolicy.Builder().permitAll().build(); 
                        StrictMode.setThreadPolicy(policy); 
                         new FlightListBack().execute("");
                        Log.e("Home", "You are  online!!!!");
                        Toast.makeText(this,"You are online!!!!",2000).show();

                    }
                    else
                    {

                         policy = new StrictMode.ThreadPolicy.Builder().permitAll().build(); 
                         StrictMode.setThreadPolicy(policy);
                         new FlightListBack().execute("");
                        Toast.makeText(this,"You are  online!!!!",2000).show();

                    }

            }
            else
            {
                Toast.makeText(this,"You are not online!!!!",2000).show();
                //alert();
            }

        int displaymode=getResources().getConfiguration().orientation;
        if(displaymode==1)
        {
            setContentView(R.layout.homeportrait);

            scrollView =(ScrollView)findViewById(R.id.scrollView);
             scrollView.setOnTouchListener(new View.OnTouchListener() {
             public boolean onTouch(View arg0, MotionEvent event)
            {
                findViewById(R.id.scrollView).getParent().requestDisallowInterceptTouchEvent(false);
                Log.e("SCroll View Touch","Work");
                return false;
            }
            });

            ListView lv =getListView();
            lv.setOnTouchListener(new View.OnTouchListener() {

                public boolean onTouch(View v, MotionEvent event)
                {
                    Log.e("ListView","Work");
                                        // Disallow the touch request for parent scroll on touch of child view
                    v.getParent().requestDisallowInterceptTouchEvent(true);
                    return false;
                }
            });
        }
        else
        {
            setContentView(R.layout.home);

            scrollView =(ScrollView)findViewById(R.id.scrollView);

            scrollView.setOnTouchListener(new View.OnTouchListener() {
             public boolean onTouch(View arg0, MotionEvent event)
            {
                findViewById(R.id.scrollView).getParent().requestDisallowInterceptTouchEvent(false);
                Log.e("SCroll View Touch","Work");
                return false;
            }
            });

            ListView lv =getListView();
            lv.setOnTouchListener(new View.OnTouchListener() {

                public boolean onTouch(View v, MotionEvent event)
                {
                    Log.e("ListView","Work");
                                        // Disallow the touch request for parent scroll on touch of child view
                    v.getParent().requestDisallowInterceptTouchEvent(true);
                    return false;
                }
            });

        }

        radiogroupsettings= (RadioGroup) findViewById(R.id.radiogroupsettings);

        editusername=(EditText)findViewById(R.id.editusername);
        editpassword=(EditText)findViewById(R.id.editpassword);
        headergobutton=(Button)findViewById(R.id.headergobutton);

        imageslider = (ImageView)findViewById(R.id.imageslider);
        imagefacebook_icon=(ImageView)findViewById(R.id.imagefacebookicon);
        imagetwitter_icon=(ImageView)findViewById(R.id.imagetwittericon);
        imageyoutube_icon=(ImageView)findViewById(R.id.imageyoutubeicon);

        imageappsheader=(ImageView)findViewById(R.id.imageappsheader);
        imagevisitor = (ImageView)findViewById(R.id.imagevisitor);
        imagerestaurant =(ImageView)findViewById(R.id.imagerestaurant);
        imageclubs =(ImageView)findViewById(R.id.imageclubs);
        imagespa =(ImageView)findViewById(R.id.imagespa);
        imagedeals=(ImageView)findViewById(R.id.imagedeals);
        imageshopping=(ImageView)findViewById(R.id.imageshopping);
        imagemagazine=(ImageView)findViewById(R.id.imagemagazine);
        imageairport =(ImageView)findViewById(R.id.imageairport);
        imageairport.setOnClickListener(this);
        imagehotel =(ImageView)findViewById(R.id.imagehotel);
        imagecategory=(ImageView)findViewById(R.id.imagecategory);
        imagecarrental=(ImageView)findViewById(R.id.imagecarrental);
        imagestation =(ImageView)findViewById(R.id.imagestation);

        imagefooter=(ImageView)findViewById(R.id.imagefooter);

        DisplayMetrics displaymetrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);

        height = displaymetrics.heightPixels;
        width = displaymetrics.widthPixels;

        headergobutton.setOnClickListener(this);

        imagegooglesearch=(ImageView)findViewById(R.id.imagegooglesearch);
        imagegooglesearch.setOnClickListener(this);

        imageyahoo=(ImageView)findViewById(R.id.imageyahoo);
        imageyahoo.setOnClickListener(this);

        imageespn=(ImageView)findViewById(R.id.imageespn);
        imageespn.setOnClickListener(this);

        imageamazon=(ImageView)findViewById(R.id.imageamazon);
        imageamazon.setOnClickListener(this);

        imageyoutube=(ImageView)findViewById(R.id.imageyoutube);
        imageyoutube.setOnClickListener(this);

        imagenetflix=(ImageView)findViewById(R.id.imagenetflix);
        imagenetflix.setOnClickListener(this);

        imagehulu=(ImageView)findViewById(R.id.imagehulu);
        imagehulu.setOnClickListener(this);

        imagelive365=(ImageView)findViewById(R.id.imagelive365);
        imagelive365.setOnClickListener(this);

        imagefacebook=(ImageView)findViewById(R.id.imagefacebook);
        imagefacebook.setOnClickListener(this);

        imageskype=(ImageView)findViewById(R.id.imageskype);
        imageskype.setOnClickListener(this);

        imagegames=(ImageView)findViewById(R.id.imagegames);
        imagegames.setOnClickListener(this);

        imagewifi=(ImageView)findViewById(R.id.imagewifi);
        imagewifi.setOnClickListener(this);

     //   buttontime=(Button)findViewById(R.id.buttontime);
     //  buttontime.setOnClickListener(this);
        // user layout textview in android

        textviewcity=(TextView)findViewById(R.id.textviewcity);
        textviewinfo=(TextView)findViewById(R.id.textviewinfo);
        textviewairport=(TextView)findViewById(R.id.textviewairport);

        text1=(TextView)findViewById(R.id.text1);
        text2=(TextView)findViewById(R.id.text2);
        text3=(TextView)findViewById(R.id.text3);
        text4=(TextView)findViewById(R.id.text4);
        text5=(TextView)findViewById(R.id.text5);
        text6=(TextView)findViewById(R.id.text6);

        //********** For Image Slide Image automatically Change *****************************

        final int []sliderImageArray={R.drawable.banner,R.drawable.banner01,R.drawable.banner02};
        final int []footerImageArray={R.drawable.bottomadv,R.drawable.sandwich,R.drawable.underbig};
        try 
        {

            Log.e("Land Scape Run","");
            Log.e("LandScape  Run","Handler ");
                final Handler imagehandler = new Handler();

                Runnable runnable;

                runnable = new Runnable()
                {

                    int i=0;
                    public void run()
                    {   // slider image run
                        imageslider.setImageResource(sliderImageArray[i]);  //Log.e("Image Run",""+sliderImageArray[i]);
                        i++;
                        if(i>sliderImageArray.length-1)
                        {
                                i=0;    
                                clear();
                        }
                        imagehandler.postDelayed(this, 4000); // for interval
                    }

                };
                imagehandler.postDelayed(runnable,10);

                final Handler footerimagehandler =new Handler();
                runnable = new Runnable()
                {   
                    int j=0;
                    public void run()
                    {   // footer image run
                        imagefooter.setImageResource(footerImageArray[j]); //   Log.e("Image Run",""+footerImageArray[j]);
                        j++;
                        if(j>footerImageArray.length-1)
                        {
                                j=0;    
                                clear();
                        }
                        footerimagehandler.postDelayed(this, 5000); // for interval
                    }
                };

                footerimagehandler.postDelayed(runnable, 10);

                // For ListView Change after 10 seconds;

                final Handler departurehandler =new Handler();
                runnable = new Runnable()
                {   

                    public void run()
                    {   

                        if(CheckConnection.getInstance(HomeActivity.this).isOnline(HomeActivity.this))
                        {

                                if(cheklist==0)
                                {   
                                                //Log.e("departure before chek List", "chek-->"+cheklist);
                                                 cheklist=1;
                                                // Log.e("departure  after chek List", "chek-->"+cheklist);
                                                if(!flightList.isEmpty())
                                                {

                                                                Log.e("listhandler departure","work");
                                                                int displaymode=getResources().getConfiguration().orientation;
                                                                if(displaymode==1)
                                                                {

                                                                        text1.setText("Destination");
                                                                        text4.setText("Schedule");
                                                                        textviewcity.setText(textcity);
                                                                        textviewairport.setText(textairport);
                                                                        textviewinfo.setText("Departure Flight List");

                                                                        ListAdapter departureadapter = new SimpleAdapter(HomeActivity.this,flightList,
                                                                                R.layout.listportrait,
                                                                                new String[] { TAG_MDESTINATION, TAG_MFLIGHT, TAG_MAIRLINE,TAG_MSCHEDULE,TAG_MTERMINALGATE,TAG_MFSTATUS  }, new int[] {
                                                                                        R.id.textdestination, R.id.textflight, R.id.textairline,R.id.textschedule,R.id.texttermgate,R.id.textstatus });
                                                                        setListAdapter(departureadapter);

                                                                }
                                                                else
                                                                {
                                                                            text1.setText("Destination");
                                                                            text4.setText("Schedule");  
                                                                           textviewcity.setText(textcity);
                                                                           textviewairport.setText(textairport);
                                                                           textviewinfo.setText("Departure Flight List");

                                                                        ListAdapter departureadapter = new SimpleAdapter(HomeActivity.this,flightList,
                                                                                R.layout.list,
                                                                                new String[] { TAG_MDESTINATION, TAG_MFLIGHT, TAG_MAIRLINE,TAG_MSCHEDULE,TAG_MTERMINALGATE,TAG_MFSTATUS  }, new int[] {
                                                                                        R.id.textdestination, R.id.textflight, R.id.textairline,R.id.textschedule,R.id.texttermgate,R.id.textstatus });
                                                                        setListAdapter(departureadapter);

                                                                  }
                                            } // for interval
                                    }
                                    else
                                    {   
                                        //Log.e("departure before chek List", "chek-->"+cheklist);
                                                cheklist=0;
                                        //Log.e("departure after List", "chek-->"+cheklist);        
                                                if(!arrivalList.isEmpty())
                                                {
                                                                Log.e("listhandler arrival","work");
                                                                    int displaymode=getResources().getConfiguration().orientation;
                                                                    if(displaymode==1)
                                                                    {
                                                                        text1.setText("Origin");
                                                                        text4.setText("Arrival");
                                                                        textviewinfo.setText("Arrival Flight List");

                                                                            ListAdapter arrivaladapter = new SimpleAdapter(HomeActivity.this,arrivalList,
                                                                                    R.layout.listportrait,
                                                                                    new String[] { TAG_MDESTINATION, TAG_MFLIGHT, TAG_MAIRLINE,TAG_MSCHEDULE,TAG_MTERMINALGATE,TAG_MFSTATUS  }, new int[] {
                                                                                            R.id.textdestination, R.id.textflight, R.id.textairline,R.id.textschedule,R.id.texttermgate,R.id.textstatus });
                                                                            setListAdapter(arrivaladapter);

                                                                    }
                                                                    else
                                                                    {
                                                                            text1.setText("Origin");
                                                                            text4.setText("Arrival");
                                                                            textviewinfo.setText("Arrival Flight List");

                                                                        ListAdapter arrivaladapter = new SimpleAdapter(HomeActivity.this,arrivalList,
                                                                                R.layout.list,
                                                                                new String[] { TAG_MDESTINATION, TAG_MFLIGHT, TAG_MAIRLINE,TAG_MSCHEDULE,TAG_MTERMINALGATE,TAG_MFSTATUS  }, new int[] {
                                                                                        R.id.textdestination, R.id.textflight, R.id.textairline,R.id.textschedule,R.id.texttermgate,R.id.textstatus });
                                                                        setListAdapter(arrivaladapter);

                                                                    }
                                                } 
                                    }

                        }                               
                        else
                        {

                            if(alertDialog.isShowing())
                            {   
                                alertDialog.dismiss();
                            }
                            else
                            {

                                alert();
                            }

                            scrollView.fullScroll(ScrollView.FOCUS_DOWN);

                        }

                        departurehandler.postDelayed(this, 10000);
                    }

                };  departurehandler.postDelayed(runnable, 100);

        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:20:22.387

下面的代码导致您的应用程序强制关闭

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build(); 
            StrictMode.setThreadPolicy(policy); 
```

问题是您试图从违反 android 线程策略的主线程调用 Web 服务。
因此，由于这个 StrictMode.ThreadPolicy 将强制关闭您的应用程序。
所以请在注释掉与strictmode相关的代码后检查，然后再次尝试运行。

# rest - 方法类型为 DELETE 时如何使用 Ext.Ajax.request 传递参数

> ID：13953181
> 
> 赞同：3
> 
> 时间：2012-12-19T13:11:42.047
> 
> 标签：rest, http, jersey, extjs4.1, http-delete

我正在尝试发送使用`Ext.Ajax.request`方法来删除服务器上的一些数据。我的请求方法如下所示：

```
Ext.Ajax.request({
      url: '/myserver/restful/service/delete',
      method: 'DELETE',
      headers: {
        'Content-Type': 'application/json'
      },
      params: {
        userId: 12345
      }
}); 
```

在我的球衣服务器上，我写了如下所示：

```
@Path("/delete")
  @DELETE
  @Consumes(MediaType.APPLICATION_JSON)
  @Produces(MediaType.APPLICATION_JSON)
  public Response deleteUser(final String userId) {
    System.out.println("user id = " + userId);
    return Response.ok().entity("success").build();
  } 
```

此方法以下列格式打印出用户 ID：

`user id = userId=12345`

所以我的期望值`userId`是`12345`，但它给了我`userId=12345`。由于我是球衣的新手，所以我现在无法决定要做什么。

谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T13:52:08.847

不确定泽西岛出了什么问题，但是...如果您尝试将 DELETE 与请求正文一起使用，那么无论如何您都走错了路。不。DELETE 的唯一相关参数应该是它被应用到的请求 URI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T14:00:07.673

@Julian 是正确的，您真的不应该使用带有 HTTP DELETE 动词的参数。

尝试这个：

```
@Path("/delete/{userId} 
```

然后在你的方法里面：

```
@PathParam("userId") String userId 
```

然后当您调用您的服务时，将您的 url 更改为 : `delete/(userId)`（不带括号）并删除参数。

# asp.net - 从 httpHandler 读取的 Ext.net 动态 gridPanel

> ID：13953195
> 
> 赞同：2
> 
> 时间：2012-12-19T13:12:53.250
> 
> 标签：asp.net, ext.net, gridpanel

我在单击按钮时将动态网格添加到视图端口，商店中的数据来自 ajax 代理，我使用与[http://examples.ext.net/#/GridPanel/Saving_Variations/中相同的代码HttpHandler/](http://examples.ext.net/#/GridPanel/Saving_Variations/HttpHandler/) 但不同的是我将它添加到代码后面。

第一个问题是所有图标都没有显示它是说它是找不到的。第二个问题是我得到了标题和按钮，它们运行正常，但网格中没有显示数据......

请帮助我在这里尝试了我所知道的一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T14:55:04.820

首先，可能需要注册图标才能呈现它们。使用以下代码。在动态加载图标时尤其如此。

```
protected void Page_Load(object sender, EventArgs e)
{
     if(!X.IsAjaxRequest)
     {     
          this.resourceManager.RegisterIcon(Icon.Lorry);

    }
} 
```

其次，如果您在网格中看到空白行，则表明正在加载数据，但您的 ModelField 和 Column DataIndex 值之间存在大小写不匹配。DataIndex 值区分大小写。

我希望这有帮助。

谢谢，

加夫

# java - Android - 为什么我在 SQLiteOpenHelper onCreate 中得到 NullPointerException？

> ID：13953197
> 
> 赞同：1
> 
> 时间：2012-12-19T13:13:00.460
> 
> 标签：java, android, sql, sqlite, sqliteopenhelper

我已经使用 LogCat 来确定问题所在。

我试图在 onCreate 中执行的 SQL 字符串是..

```
CREATE TABLE Routines(_id integer primary key autoincrement, json TEXT); 
```

当它尝试执行此操作时，会出现问题。

这很可能是导致`NullPointerException`. 如果您看不出有什么问题，请继续阅读以了解更多背景信息。

这个数据库还没有创建，我一直得到一个`NullpointerException`，我已经将它与以前的 SQLite 代码进行了比较，问题被证明是回避的。

但是，我提到这一点，因为它仍然必须通过 onCreate 方法。我在我的主代码中创建了一个新的`DatabaseOpenHelper`（扩展 SQliteOpenHelper）并调用助手的 open() 方法，如下所示。

```
public void open() throws SQLException
{
    ssDatabase = databaseOpenHelper.getWritableDatabase();
} 
```

如果我没记错的话，因为我的数据库尚未创建（我通过事先卸载它来确保这一点）。onCreate SQLiteHelper 在调用 open() 方法时被调用。

这是我调用该 open 方法的代码。

```
 try
    {                   
        dbConnector = new DatabaseConnector (this);
        debug = "2 ";

        // This on first start will invoke the database onCreate method - throws SQLException
        dbConnector.open();  /* PROBLEM LINE */
        debug = "3 ";
    }
    catch (Exception e)
    {
        textView1.setText(debug + e.toString());
    } 
```

这是包含我的 DatabaseOpenHelper 和 onCreate 方法的代码

```
private class DatabaseOpenHelper extends SQLiteOpenHelper
{
    public DatabaseOpenHelper(Context context, String name, CursorFactory factory, int version)
    {
        super(context, name, factory, version); 

        Log.i(TAG, "Constructor");
    }

    // On initial creation of database
    @Override
    public void onCreate(SQLiteDatabase db)
    {
        Log.i(TAG, "Before SQL command");

        String sqlCreateCommand = "CREATE TABLE Routines"
                + "(_id integer primary key autoincrement, "
                + "json TEXT);";

        Log.i(TAG, sqlCreateCommand); 

        // I believe this to be the PROBLEM LINE
        ssDatabase.execSQL(sqlCreateCommand); 

        Log.i(TAG, "Jab done");
    }

    // On upgrade - currently do nothing
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {}      
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:30:26.180

好像我没有权限发表评论。一个问题：`ssDatabase.execSQL(sqlCreateCommand);` --> 这不应该是`db.execSQL(sqlCreateCommand);` 因为参数是 SQLiteDatabase db。其次，您使用_id。这个索引不是默认创建的吗？没关系，如果这与它无关。这只是我的想法。:)

# java - Primefaces 异常信息：java.lang.ArithmeticException：/ 零 java.lang.ArithmeticException：/ 零

> ID：13953199
> 
> 赞同：8
> 
> 时间：2012-12-19T13:13:10.137
> 
> 标签：java, exception, jsf-2, primefaces, lazy-loading

我已经为数据表实现了 LazyLoading。当我使用分页运行数据表时，我得到以下异常。

```
com.sun.faces.context.PartialViewContextImpl processPartial
INFO: java.lang.ArithmeticException: / by zero
java.lang.ArithmeticException: / by zero
    at org.primefaces.model.LazyDataModel.setRowIndex(LazyDataModel.java:62)
    at org.primefaces.component.api.UIData.setRowModel(UIData.java:411)
    at org.primefaces.component.api.UIData.setRowIndex(UIData.java:403) 
```

托管豆

```
@PostConstruct
    public LazyDataModel<Request> getLazyModel() {
          if (lazyModel == null) {
           lazyModel = new LazyDataModel<Request>() {

            @Override
            public List<Request> load(int startingAt, int maxPerPage, String sortField,
                       SortOrder sortOrder, Map<String, String> filters) {
             return getRequestService().getRequest(startingAt, maxPerPage, sortField, sortOrder, filters);
            }
           };
           lazyModel.setRowCount(getRequestService().getRequestCount());           

          }
          return lazyModel;
         } 
```

JSF

```
<h:form>
        <p:dataTable id="dataTable" var="req" lazy="true" value="#{reqMB.lazyModel}"
            paginator="true" rows="10"
            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
            rowsPerPageTemplate="5,10,15"> 
```

DAO 用于获取行数。

```
int count = ((Long)sessionFactory.getCurrentSession().createQuery
("select count(*) from Request").uniqueResult()).intValue(); 
```

**更新 1**

```
com.sun.faces.context.PartialViewContextImpl processPartial
INFO: java.lang.ArithmeticException: / by zero
java.lang.ArithmeticException: / by zero
    at org.primefaces.model.LazyDataModel.setRowIndex(LazyDataModel.java:62)
    at org.primefaces.component.api.UIData.setRowModel(UIData.java:411)
    at org.primefaces.component.api.UIData.setRowIndex(UIData.java:403)
    at org.primefaces.component.api.UIData.processChildren(UIData.java:291)
    at org.primefaces.component.api.UIData.processPhase(UIData.java:263)
    at org.primefaces.component.api.UIData.processDecodes(UIData.java:229)
    at com.sun.faces.context.PartialViewContextImpl$PhaseAwareVisitCallback.visit(PartialViewContextImpl.java:506)
    at com.sun.faces.component.visit.PartialVisitContext.invokeVisitCallback(PartialVisitContext.java:183)
    at org.primefaces.component.api.UIData.visitTree(UIData.java:641)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIForm.visitTree(UIForm.java:344)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at javax.faces.component.UIComponent.visitTree(UIComponent.java:1601)
    at com.sun.faces.context.PartialViewContextImpl.processComponents(PartialViewContextImpl.java:376)
    at com.sun.faces.context.PartialViewContextImpl.processPartial(PartialViewContextImpl.java:252)
    at javax.faces.context.PartialViewContextWrapper.processPartial(PartialViewContextWrapper.java:183)
    at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:931)
    at com.sun.faces.lifecycle.ApplyRequestValuesPhase.execute(ApplyRequestValuesPhase.java:78)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:301)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.RequestEventsFilter.doFilter(RequestEventsFilter.java:27)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3730)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3696)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2273)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2179)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1490)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:221) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T07:13:04.917

根据[primefaces问题跟踪器中的评论#23，](http://code.google.com/p/primefaces/issues/detail?id=1544#c23)以下应该解决该问题

```
@Override
public void setRowIndex(int rowIndex) {
    /*
     * The following is in ancestor (LazyDataModel):
     * this.rowIndex = rowIndex == -1 ? rowIndex : (rowIndex % pageSize);
     */
    if (rowIndex == -1 || getPageSize() == 0) {
        super.setRowIndex(-1);
    }
    else
        super.setRowIndex(rowIndex % getPageSize());
} 
```

# android - Android：如何为 gridview 中的图像设置标签？

> ID：13953201
> 
> 赞同：5
> 
> 时间：2012-12-19T13:13:15.060
> 
> 标签：android

谁能告诉我如何为gridview中的图像设置标签和getTag。我已经编写了以下代码，但它不起作用。以下代码是否正确？

```
int jj=100;
    for(int j=0;j<imageid.length;j++)//imageid is the array of drawable images
        {
        griview1.getChildAt(j).setTag(jj);
        System.out.println(g.getChildAt(j).getTag());
        } 
```

这是我的 getView 方法

```
public View getView(int arg0, View arg1, ViewGroup arg2) {
    // TODO Auto-generated method stub

    ImageView imv;
    if(arg1!=null)
    {
        imv=(ImageView)arg1;
    }
    else
    {
        imv=new ImageView(cont);
        imv.setLayoutParams(new GridView.LayoutParams(40,40));
        imv.setScaleType(ScaleType.CENTER_CROP);
        imv.setPadding(0,0,0,0);

        }

    }
    imv.setImageResource(imageid[arg0]);
    return imv; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T13:35:29.077

最后我自己得到了我的问题的答案。感谢所有提出宝贵建议的人。

> 仅在网格视图的侦听器中，我通过检查条件为网格视图单元格设置标签

```
for example:    
if(position==20)

g.setTag("our tag"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:35:35.533

只需将您的标签设置在`getView`

```
public View getView(int arg0, View arg1, ViewGroup arg2) {

    if(arg1!=null)
    {
        ImageView imv = new ImageView(cont);
        imv.setLayoutParams(new GridView.LayoutParams(40,40));
        imv.setScaleType(ScaleType.CENTER_CROP);
        imv.setPadding(0,0,0,0);

        arg1 = imv;
    }
    arg1.setTag(arg0);
    return arg1;
} 
```

# sql - 加入多个表（以 1 行获取用户信息），但其中一个是可选的（用户头像）

> ID：13953204
> 
> 赞同：0
> 
> 时间：2012-12-19T13:13:25.363
> 
> 标签：sql, postgresql, join, left-join, postgresql-8.4

给定使用 PostgreSQL 8.4.13 的 Drupal 7.17 数据库中的用户名，我试图获取分布在多个表中的用户信息（uid、城市、性别、头像）。

然而，头像（下`f.filename`图）是可选的 - 有些用户没有它。

对于确实有头像的用户，我的查询效果很好：

```
#  select
        u.uid,
        /* u.pass, */
        f.filename,
        g.field_gender_value,
        c.field_city_value
from
        drupal_users u,
        drupal_file_managed f,
        drupal_field_data_field_gender g,
        drupal_field_data_field_city c
where
        u.name='Alex' and
        u.picture=f.fid and
        g.entity_id=u.uid and
        c.entity_id=u.uid
;
 uid |         filename         | field_gender_value | field_city_value
-----+--------------------------+--------------------+------------------
   1 | picture-1-1312223092.jpg | Male               | Bochum
(1 row) 
```

但是对于没有头像的用户，我得到空结果。

当我省略`drupal_file_managed f`表格时 - 它再次起作用：

```
#  select
        u.uid,
        /* u.pass, */

        g.field_gender_value,
        c.field_city_value
from
        drupal_users u,

        drupal_field_data_field_gender g,
        drupal_field_data_field_city c
where
        u.name='mvp' and

        g.entity_id=u.uid and
        c.entity_id=u.uid
;
  uid  | field_gender_value | field_city_value
-------+--------------------+------------------
 18539 | Male               | Moscow
(1 row) 
```

如何修改我的 join 语句以**确保它始终**为有效用户返回 1 行 - 无论他们是否有头像？对于后一种情况，该`f.filename`列可以为空。

我想要一个[左外连接](http://www.postgresql.org/docs/8.4/static/tutorial-join.html)吗？（恐怕它会返回几行而不是 1 行）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:16:27.937

是的，你想要一个左外连接。只有当用户拥有多个头像时，它才会返回多行，但对于内部连接也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:37:52.660

使用 COALESCE() 如果文件名似乎丢失，您甚至可以插入默认值：

```
SELECT u.uid AS uid
        , COALESCE(f.filename, 'goatsex.jpg') AS filename
        , g.field_gender_value AS gender_value
        , c.field_city_value AS city_value
FROM drupal_users u
JOIN drupal_field_data_field_gender g ON g.entity_id=u.uid 
JOIN drupal_field_data_field_city c ON c.entity_id=u.uid
LEFT JOIN drupal_file_managed f ON u.picture=f.fid 
WHERE u.name='Alex' 
        ; 
```

# javascript - 带有 jsonp 的主干.js

> ID：13953208
> 
> 赞同：2
> 
> 时间：2012-12-19T13:13:39.943
> 
> 标签：javascript, json, backbone.js, jsonp

在花了几个小时寻找解决方案之后，我终于在这里发布了问题。让我知道我的愚蠢程度:)。

这是代码：

```
Model and collection:
var app = app || {};
var metricsModel = Backbone.Model.extend({});
var MetricsList = Backbone.Collection.extend({
  model:metricsModel,
  sync: function(method, collections, options) {
    options.dataType = "jsonp";
    return Backbone.sync(method, collections, options);
  },
  url:<url>
});

View:
app.CommitmentView = Backbone.View.extend({
  initialize:function(){
    app.metrics = new MetricsList();
    app.metrics.bind("change", this.render, this);
    app.metrics.fetch({
      success: function(collection,response) {
        console.log("fetch successful" + response);
      },
      error: function(collection,response) {
        console.log("error" + JSON.stringify(response));
      }
    });
    app.metrics.on('all',this.render,this);
  }
}); 
```

> 结果：错误{"readyState":4,"status":200,"statusText":"success"}。

错误回调总是被调用。我对后端没有太多控制权。只需确保完成以下检查：

服务器以正确的 JSON 响应 - JSON 对象数组。在 FF 和 Chrome 上测试。JSON 键是字符串。

我该如何进一步调试呢？请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T06:22:04.370

所以碰巧后端返回了一个 json 对象。后端使用的 REST 框架非常灵活，我所要做的就是将 URL 中的 json 替换为 jsonp。

旧网址：http:///format/json 新网址：http:///format/jsonp

这是 REST 框架 [https://github.com/philsturgeon/codeigniter-restserver](https://github.com/philsturgeon/codeigniter-restserver)

感谢@dbaseman 的建议/评论

# messaging - thrift 是消息队列吗？thrift 与典型的消息传递系统有何不同？

> ID：13953209
> 
> 赞同：1
> 
> 时间：2012-12-19T13:13:43.590
> 
> 标签：messaging, message-queue, thrift

如果我在一台机器上使用 thrift 序列化我的消息并在另一台机器上反序列化，我怎么知道我的消息将以相同的顺序到达？而且由于我从第一台机器连续发送消息，如果第二台机器无法以相同的速度使用消息，我的消息将在哪里缓冲？

thrift 的行为类似于消息队列吗？thrift 和消息传递系统有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T08:45:43.603

Thrift 不是一个消息队列，它不像一个消息队列。Thrift 是一种 RPC（远程过程调用）。

在最常见的场景中，客户端发出的调用是通过 TCP 连接传输的，它们是按底层 TCP 连接排序的。

如果您为 Thrift 使用 HTTP 传输，则某些调用可能会乱序到达服务器。

# java - 从数据库中获取记录并自动生成树

> ID：13953213
> 
> 赞同：3
> 
> 时间：2012-12-19T13:14:11.087
> 
> 标签：java, jquery, database, servlets, logic

我有三张桌子：

**部门 ：**

![在此处输入图像描述](../Images/01f30840d87229b5f3333548e5ba39ed.png)

**指定 ：**

![在此处输入图像描述](../Images/5dd95c5b178c27889ebe76bcbd7c87e1.png)

**部门名称：**

![在此处输入图像描述](../Images/e35112f7c17852674723aa57ae0c4227.png)

**DesignationID**和**ReportTo**是表指定的外键，表示一个指定的指定报告给一个指定的指定。即**经理**（这是指定）向**首席执行官**报告（这也是指定）

现在我想生成一棵树，比如......

![在此处输入图像描述](../Images/9d8a6ce47ad9096d8ddd36609f388097.png)

我手动输入条目以显示上面的树。IE

![在此处输入图像描述](../Images/6590716bab47d7dcf875c521102f295c.png)

现在我的问题是，我无法以自动生成这棵树的方式编写函数。

简而言之，从数据库中获取记录后，我想生成如上图所示的树。

任何解决方案？

**注意：树的级别不是固定的，树的级别可能是无限的**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:17:45.680

它是 Java，因此您可以使该树尽可能深。

将查询与树的总体与 UI 渲染分开，您将没有问题。查询数据库，填充树并将其提供给 UI 进行渲染。

如果您尝试将一个部分与另一个部分混合，您将遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T08:41:43.257

我认为你可以使用 php 来绘制这棵树。例子。
编写用于选择数据到行的连接查询 ***这不是你的答案***，而是可以告诉逻辑的提示。`<li>
while(!empty($row))
{
echo'<li><ul>$row[designation name]';
while(!empty($next))
{echo'<li><ul>$next[designation name]';
//next sentence must be a select query }
echo'</ul></li>'
}
echo'</ul><li>' }`

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T13:24:25.433

这是一个提示。

> 这是一棵树，您需要在树项目上递归迭代，直到达到叶级别才能填充它，正如@duffymo 给出的答案中提到的那样，您应该将树填充的逻辑与查询分开。

如果您仍然无法解决，请[链接](http://bytes.com/topic/java/answers/17178-advanced-populating-printing-tree-structure)

好运 ：-）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T13:26:59.780

您可以使用这样的[树结构](https://stackoverflow.com/questions/3522454/java-tree-data-structure/3522481#3522481)，然后从查询中填充它。

然后，您将有不同的选择，例如：

1）您将树转换为 JSON 并[使用 jQuery 递归迭代它](https://stackoverflow.com/questions/2203958/jquery-recursive-iteration-over-objects)；

2）您直接在Java中迭代它（递归），构建输出服务器端（假设一个包含您的HTML的大字符串）。然后您只需将结果注入页面（由于服务器和客户端之间的耦合，效果不佳）

ETC...*

# blackberry-10 - 如何在黑莓 10 级联中将 var 从一个页面传递到另一个页面？

> ID：13953216
> 
> 赞同：2
> 
> 时间：2012-12-19T13:14:22.907
> 
> 标签：blackberry-10, blackberry-cascades

如何在黑莓 10 qml 中将数据（前用户 ID）从一个页面传递到另一个页面？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T06:09:49.673

您可以在目标页面上创建属性，也可以创建一个 java 脚本函数来执行此操作。如果您想在分配之前验证或执行任何其他操作，您应该使用 java 脚本功能。

```
Page {
    //targetPage

    property string userid //you can also use alias here

    function initialize(id) {
        userid = id
        //you can also set property of controls here
    }
} 
```

像这样在你的页面上调用它

```
targetPageid.userid = "user id" 
```

或者

```
targetPageid.initialize("user id") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T08:10:47.780

在你的创建一个对象`cpp`

```
qml->setContextProperty("MyApp",this); 
```

然后使用这个对象调用方法。我在我的按钮中调用了一个方法`main.qml`

```
Button{
        id : button
        text : "Connect"
        onClicked: 
            {   
                MyApp.PostData("46565652","sotho")
            }
        horizontalAlignment: HorizontalAlignment.Center
    } 
```

# iphone - 从 MapView 中删除 MKAnnotation

> ID：13953217
> 
> 赞同：2
> 
> 时间：2012-12-19T13:14:33.693
> 
> 标签：iphone, objective-c, ios, mkmapview, mkannotation

好的，我可以在地图的任何地方通过 LongPress 在我的地图上添加图钉。现在我需要删除图钉。所以我接下来要：当我点击我的 pin 时，会出现 pin 的名称和一个带十字的小按钮（（X），就像在所有要关闭的应用程序中一样），当用户点击这个按钮（X）时 - pin 必须被删除。我可以这样做吗？或者，也许还有另一种简单的方法可以为用户删除 pin，而无需查看此 pin 的详细信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:16:46.143

1.  要删除所有注释，请使用此代码。

    [yourMapView removeAnnotation:yourMapView.annotations];

2.  要删除一个注释，只需实现逻辑例如...

    首先删除所有注释，并从数组中删除您选择的引脚数据，然后添加这个新数组并添加注释..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-09T10:10:46.430

```
// REMOVING ALL ANNOTATION
    for (id <MKAnnotation>  myAnnot in [objMapView annotations])
    {
        if (![myAnnot isKindOfClass:[MKUserLocation class]])
        {
            [objMapView removeAnnotation:myAnnot];
        }
    } 
```

# doctrine-orm - Zend Framework 2 - Doctrine 2 模型形式

> ID：13953220
> 
> 赞同：0
> 
> 时间：2012-12-19T13:14:40.940
> 
> 标签：doctrine-orm, zend-form, zend-framework2, modelform

有没有办法根据我在 Doctrine 中定义的模型自动创建表单？

在`Django`它的一个基本特征。我发现了一些旧的资源，有人试图自己实现它......但没有最新的或官方的

这些模型形式可以节省大量时间。我确实问自己为什么人们不抱怨这个（可能）缺少的功能......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T08:41:08.403

Zend 2 不能从实体本身创建表单。Doctrine 2 甚至不是框架的一部分，也没有像 Symfony 2 那样与它紧密相连。

您可以在您的实体中使用注释来提示所有必要的信息，以便使用注释构建器从中创建表单。

[为了更深入地了解它是如何工作的，我建议您在Zend 2 文档](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.form.quick-start.html#using-annotations)中查找它。

# xml - 未定义 XML 实体和 CDATA

> ID：13953222
> 
> 赞同：0
> 
> 时间：2012-12-19T13:14:43.863
> 
> 标签：xml, parsing

我的 XML 向我显示有关未定义实体的错误，因为我的数据显示特殊字符，例如 & eacute; 和类似的......我该如何解决？

```
<track href="file.mp3" title="<?php echo $title;?> <?php echo $artist;?>" target="http://www.site.com" rel="hdefault.jpg">
  <meta>
    <![CDATA[ <a href="http://www.site.com/search" target="_blank">More info</a> ]]>
  </meta>
</track> 
```

我知道我必须使用 CDATA 但如果我尝试：

```
title="<![CDATA[ <?php echo $title;?> ]]>" 
```

它向我展示了：

第 7 行第 19 列的错误：属性值中不允许未转义的“<”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:21:11.587

`&eacute;`在 XML 中没有任何意义，除非有一个 DTD 描述了“eacute”是什么字符*，并且*XML 解析器是一个 DTD 解析器（这是一个很大的假设）。

如果您想在 XML 文档中可靠地表示一个 é，那么您需要：

*   使用文字 é
*   使用*数字*字符引用

如果要在 XML 文档中嵌入 HTML，则必须使用：

*   围绕元素内容（**不是**属性）的 CDATA 标记。（正如您为 meta 元素的值所做的那样）
*   HTML 中特殊字符的字符引用。`&`表示为`&amp;`所以如果您想`&eacute;`在 XML 文档中表示 HTML，那么您需要`&amp;eacute;`.

title 属性可能是“标题”而不是“标题的 HTML 表示”，因此在这里使用文字 é 可能是您最好的选择。

不幸的是，您的原始数据中似乎包含 HTML 而不是文本，因此您可能必须先清理传入的数据才能使用它。

# c++ - std::set 中的 unique_ptr 找不到 operator<，即使它在那里

> ID：13953224
> 
> 赞同：0
> 
> 时间：2012-12-19T13:14:50.317
> 
> 标签：c++, c++11, clang, unique-ptr

> **可能重复：**
> [Clang、std::shared_ptr 和 std::less/operator<](https://stackoverflow.com/questions/11115265/clang-stdshared-ptr-and-stdless-operator)

所以，是的，标题几乎是整个问题。正如您从下面的代码片段中看到的那样，我确实实现了`operator<`，所以我不知道发生了什么。

这是代码：

```
namespace {

struct Transition {
    string name;
    StatePtr toState;

    Transition(string s = string(), StatePtr state = nullptr)
      : name(move(s))
      , toState(move(state))
    {}

    friend bool operator==(Transition const& lhs, Transition const & rhs) {
      return lhs.name == rhs.name && lhs.toState == rhs.toState;
    }

    friend bool operator<(Transition const & lhs, Transition const & rhs);
  };

  struct State {
    string name;
    set<TransitionPtr> transitions;

    explicit State(string s = string())
      : name(move(s))
    {}

    void addTransition(string s, StatePtr sp = nullptr){
      TransitionPtr new_t = make_transition(s, sp);
      for(auto& t : transitions){
        if(t == new_t){
          return;
        }
      }

      transitions.insert(move(new_t)); // This is where the error happens.
    }

  };
}

bool operator<(StateMachine::Transition const & lhs, StateMachine::Transition const & rhs) {
 return lhs.toState.get() < rhs.toState.get();
} 
```

错误信息是：

> 在 ../llvm_opt_pass/cgd.cpp:3 中包含的文件中：在 /srv/scratch/sigubufo/clang/stable/3.1_src/llvm/include/llvm/Instructions.h:23 中包含的文件中：在/中包含的文件中srv/scratch/sigubufo/clang/stable/3.1_src/llvm/include/llvm/ADT/ArrayRef.h:13：在/srv/scratch/sigubufo/clang/stable/3.1_src/llvm/include/llvm中包含的文件中/ADT/SmallVector.h:24：在 /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/memory:85 中包含的文件中： /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/bits/unique_ptr.h:486:14：错误：没有匹配的调用函数到 'std::less<_CT>' 类型的对象返回 std::less<_CT>()(__x.get(), __y.get()); ^~~~~~~~~~~~~~~~
> 
> /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/bits/stl_function.h:237:20：注意：在函数模板的实例化中要求专门化 'std::operator<<::StateMachine::Transition, std::default_delete<::StateMachine::Transition>, ::StateMachine::Transition, std::default_delete<::StateMachine::Transition>>这里 { 返回 __x < __y; } ^
> 
> /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/bits/stl_tree.h:1285:13：注意：在成员函数的实例化中'std::less::StateMachine::Transition, std::default_delete<::StateMachine::Transition> > >::operator()' 在这里请求 __comp = _M_impl._M_key_compare(_KeyOfValue()(__v), _S_key(__x )); ^
> 
> /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/bits/stl_set.h:424:9：注意：>在函数的实例化中模板特化 'std::_Rb_tree::StateMachine::Transition, std::default_delete<::StateMachine::Transition>>, std::unique_ptr<::StateMachine::Transition, std::default_delete<::StateMachine::过渡> >，std::_Identity::StateMachine::Transition，std::default_delete<::StateMachine::Transition> > >，std::less::StateMachine::Transition，std::default_delete<::StateMachine: :Transition> > >, std::allocator::StateMachine::Transition, std::default_delete<::StateMachine::Transition> > ::_M_insert_unique::StateMachine::Transition, std::default_delete<::StateMachine: :Transition> > >' 在这里请求 _M_t._M_insert_unique(std::move(__x));^
> 
> ../llvm_opt_pass/cgd.cpp:72:17：注意：在成员函数 'std::set::StateMachine::Transition、std::default_delete<::StateMachine::Transition>>、std::less 的实例化中::StateMachine::Transition, std::default_delete<::StateMachine::Transition> > >, std::allocator::StateMachine::Transition, std::default_delete<::StateMachine::Transition> >> >::在此处请求插入'transitions.insert(move(new_t)); ^
> 
> /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/bits/stl_function.h:236:7：注意：候选函数不可行：对于第一个参数，没有从 'pointer' (aka '::StateMachine::Transition *') 到 '::StateMachine::Transition *&&&' > 的已知转换；运算符（）（常量_Tp& __x，常量_Tp& __y）常量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:17:44.200

好的，所以解决方案与这个问题相同：[Clang, std::shared_ptr 和 std::less/operator<](https://stackoverflow.com/questions/11115265/clang-stdshared-ptr-and-stdless-operator)。

基本上这是来自 libstdc++ 的 type_traits 中的一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:05:44.817

尝试提供自定义函子作为 std::less 的替代方案。

```
struct cmp  {
    bool operator() ( const Transition& lhs, const Transition& rhs )  {
        return lhs.toState.get() < rhs.toState.get();
     }
 };

std::set< Transition, cmp > transitions; 
```

# php - Yii Form 生日拆分日月年

> ID：13953226
> 
> 赞同：1
> 
> 时间：2012-12-19T13:14:52.883
> 
> 标签：php, yii

我会在表单（视图）中将用户的生日分为 3 个不同的字段：日、月和年。我想知道我是否做得对，是否有更简单的方法可以做到这一点。

性能上有没有更好的方法？对于所有人来说，它会分隔日期，尽管不是必需的。

* * *

模型.php：

```
public $birthday_day;
public $birthday_month;
public $birthday_year;

...

public function afterFind() {
    $this->birthday_day = date('j', strtotime($this->birthday));
    $this->birthday_month = date('n', strtotime($this->birthday));
    $this->birthday_year = date('Y', strtotime($this->birthday));
}

public function beforeValidate() {
    if ($this->birthday_day  AND  $this->birthday_month  AND  $this->birthday_year)
        $this->birthday = new DateTime($birthday_year.'-'$birthday_month'-'.$birthday_day);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:12:02.897

如果您只是为了输入目的将日期分成三部分，例如，另一种选择可能是使用[CJuiDatePicker](http://www.yiiframework.com/doc/api/1.1/CJuiDatePicker)允许用户选择完整日期；

```
$this->widget('zii.widgets.jui.CJuiDatePicker', array(
    'name'=>'birthday',
    'model'=>$model,
    'attribute'=>'birthday',
    'options'=>array(
        'showAnim'=>'fold',
    ),
    'htmlOptions'=>array(
        'style'=>'height:20px;'
    ),
)); 
```

然后，您可以将结果格式化为您想要的格式以插入到您的数据库中，例如；

```
...
public function actionCreate()
{
    $model=new Model;
    if(isset($_POST['Model']))
    {
        $model->attributes=$_POST['Model'];
        $model->save();
        ...
    }
    ...
}
... 
```

或更新；

```
...
public function actionUpdate($id)
{
    $model=$this->loadModel($id);
    if(isset($_POST['Model']))
    {
        $model->attributes=$_POST['Model'];
        $model->save();
        ...
    }
    ...
}
... 
```

为了将日期保存为正确的格式（即从用户友好的格式将 CJuiDatePicker dd/mm/yyyy 转换为您的 sql 表格式，很可能类似于 YYYY-mm-dd）然后您可以在保存模型之前进行转换, 像这样;

```
public function beforeSave() {

    $this->birthday=date('Y-m-d',strtotime($this->birthday); // Or however you want to insert it

    return parent::beforeSave();
} 
```

如果您随后需要特定的日/月/年在应用程序的其他位置显示，您可以像在示例中一样将它们设置为属性（`public $birthday_day;`等），这完全没有问题。或者，如果您不想在每次调用模型实例时转换日期，您可以为它们设置一个属性，如下所示；

```
public function getBirthday($part) {
    switch($part)
    {
        case 'day':
            return date('j', strtotime($this->birthday));
            break;
        case 'month':
            return date('n', strtotime($this->birthday));
            break;
        case 'year':
            return date('Y', strtotime($this->birthday));
            break;
        default:
            return date('d/m/Y', strtotime($this->birthday));
            break;
    }
} 
```

如果你想要这一天，只需打电话`$model->getBirthday('day');`……或者无论如何你想这样做，最后一点更个人喜好！

# c# - 如何在 VS2010 和 VS2012 中加载数据库项目？

> ID：13953235
> 
> 赞同：5
> 
> 时间：2012-12-19T13:15:16.860
> 
> 标签：c#, sql-server, visual-studio

我最近从 VS2010 切换到 VS2012，打开数据库项目时出现以下错误

```
C:\Trunk\Database\Database.dbproj : error  : Internal Error. The database platform service with type Microsoft.Data.Schema.Sql.Sql100DatabaseSchemaProvider is not valid. You must make sure the service is loaded, or you must provide the full type name of a valid database platform service. 
```

我猜它可能是项目文件中令人窒息的以下行

```
 <DSP>Microsoft.Data.Schema.Sql.Sql100DatabaseSchemaProvider</DSP> 
```

或者可能这个

```
 <Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v10.0\TeamData\Microsoft.Data.Schema.SqlTasks.targets" /> 
```

知道如何克服这个错误，以便我可以在 VS2012 中加载我的项目吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-30T21:16:50.713

显然微软在VS2012中有一个新的Sql1110 DSP。VS2010 有 Sql1100 版本。

要解决此问题，请在 .dbproj 文件中更改以下行：

```
<ProjectVersion>4.0</ProjectVersion>
<ProjectGuid>{a233d7e8-b460-4b72-a345-aaeee4fb3aca}</ProjectGuid>
<DSP>Microsoft.Data.Schema.Sql.Sql100DatabaseSchemaProvider</DSP>
...
<!--Import the settings-->
<Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v10.0\TeamData\Microsoft.Data.Schema.SqlTasks.targets" />
<ItemGroup> 
```

对此：

```
<ProjectVersion>4.1</ProjectVersion>
<ProjectGuid>{6cd7e290-f844-4410-97f6-e8fd6e63c5b5}</ProjectGuid>
<DSP>Microsoft.Data.Tools.Schema.Sql.Sql110DatabaseSchemaProvider</DSP>
...
<!--Import the settings-->
<Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v11.0\SSDT\Microsoft.Data.Tools.Schema.SqlTasks.targets" />
<ItemGroup> 
```

我在 VS2012 中创建了一个新的空白数据库项目文件，将 .sqlproj 文件与我的旧 .dbproj 文件进行比较，以上几行是主要区别。是的，微软更改了 proj 文件扩展名，但您不必更改旧的 dbproj 扩展名。它对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T14:46:33.320

由于我们没有要检查的完整代码集，因此很难理解确切的问题，但对于您的导入 - 您应该将其更改为：

```
 <Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v11.0\SSDT\Microsoft.Data.Schema.SqlTasks.targets" /> 
```

如果这不能解决问题，如果您安装了 Resharper，请同时更新，并尝试删除其缓存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-24T01:20:19.127

其他人也可能在 VS2013 上遇到同样的问题，在文本编辑器中打开您的数据库项目文件 .dbproj 或 .sqlproj：

改变：

```
<Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v10.0\TeamData\Microsoft.Data.Schema.SqlTasks.targets" /> 
```

至：

```
<Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v11.0\SSDT\Microsoft.Data.Tools.Schema.SqlTasks.targets" /> 
```

并且从

```
<ProjectVersion>4.0</ProjectVersion> 
```

至：

```
<ProjectVersion>4.1</ProjectVersion> 
```

并且从

```
<DSP>Microsoft.Data.Schema.Sql.Sql100DatabaseSchemaProvider</DSP> 
```

至：

```
<DSP>Microsoft.Data.Tools.Schema.Sql.Sql120DatabaseSchemaProvider</DSP> 
```

# object - 无法使用 httpHandler 在页面上显示 .swf 文件

> ID：13953236
> 
> 赞同：0
> 
> 时间：2012-12-19T13:15:17.750
> 
> 标签：object, video, flash, handler

请阅读最后的编辑。

我有一个页面，我应该在其中显示一些媒体数据。为此，我使用 html 标签，如下所示：

```
<object type="video/x-ms-wmv" width="320" height="240">
    <param name="src" value="some_media_url" />
    <param name="AutoSize" value="true">
    <param name="ShowDisplay" value="false">
    <param name="AutoStart" value="false">
    <param name="StretchToFit" value="true">
    <param name="bgcolor" value="#ffffff" />
</object> 
```

就我而言，我应该通过一些 MediaHandler.ashx http 处理程序从 SQL 服务器获取媒体数据。当我获得音频（.mp3，.wma）或视频（.flv，.mp4）流时，这可以正常工作。但我遇到了 .swf 闪存文件的一些问题。对于这种类型的文件，我将其更改`<object> type`为“application/x-shockwave-flash”。在这种情况下，当我使用一些远程路径时，例如[http://www.tizag.com/pics/example.swf](http://www.tizag.com/pics/example.swf)，它可以正常工作：

```
<object type="application/x-shockwave-flash" width="320" height="240">
    <param name="src" value='http://www.tizag.com/pics/example.swf' />
    <param name="AutoSize" value="true">
    <param name="ShowDisplay" value="false">
    <param name="AutoStart" value="false">
    <param name="StretchToFit" value="true">
</object> 
```

但是，它不适用于我的处理程序。它不适用于本地路径，例如“c:\videos\example.swf”

任何想法？

编辑：实际上媒体的 src 看起来像这样：

```
<object type="video/x-ms-wmv" width="320" height="240">
    <param name="src" value="http://localhost:11111/MediaHandler.ashx?Id=1111" />
    <param name="AutoSize" value="true">
    <param name="ShowDisplay" value="false">
    <param name="AutoStart" value="false">
    <param name="StretchToFit" value="true">
    <param name="bgcolor" value="#ffffff" />
</object> 
```

**编辑：**

如果我直接引用现有文件，这很好用：

```
 <object type="application/x-shockwave-flash" width="320" height="240">
        <param name="src" value="/videos/ETFflash1016.swf" />
        <param name="AutoSize" value="true">
        <param name="ShowDisplay" value="false">
        <param name="AutoStart" value="true">
        <param name="StretchToFit" value="true">
    </object> 
```

但是当我使用 httpHandler 从数据库中获取文件时：

```
<object type="application/x-shockwave-flash" width="320" height="240">       
    <param name="src" value="http://localhost:57031/MediaHandler.ashx?Id=512429" />
    <param name="AutoSize" value="true">
    <param name="ShowDisplay" value="false">
    <param name="AutoStart" value="true">
    <param name="StretchToFit" value="true">
</object> 
```

不显示闪光灯。

我已经比较了这些情况的输出 html，它们在两种情况下都是相同的（除了 src 参数值）。Fiddler 对 .swf 文件的请求显示相同的结果，并且浏览器显示（例如在 IE 开发工具的 Netwok 选项卡中）在这两种情况下文件已下载到客户端。但是在处理程序的情况下，没有显示闪光灯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T01:23:39.350

> Fiddler 对 .swf 文件的两个请求显示相同的结果

在 Fiddler 响应标头中，本地文件和 ASHX 处理程序是否返回相同的`Content-Type: application/x-shockwave-flash`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T06:26:54.177

我已经解决了！

在处理程序中，我将 Response Header 的参数设置为与直接引用现有文件的情况相同的值。

现在，我刚刚删除了所有这些值，它可以工作了！我仍然不明白为什么，但它有效:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T13:31:48.290

尝试这个：

```
<object type="application/x-shockwave-flash" data="file.swf" style="width:640px;height:480px;margin:10px 36px;">
<param name="movie" value="file.swf" />
<param name="AutoSize" value="true">
<param name="ShowDisplay" value="false">
<param name="AutoStart" value="false">
<param name="StretchToFit" value="true">
<param name="bgcolor" value="#ffffff" />
</object> 
```

它对我有用

# android - 如何通过 Powersafe 模式保持服务处于活动状态

> ID：13953239
> 
> 赞同：1
> 
> 时间：2012-12-19T13:15:27.360
> 
> 标签：android, service

我为 Android 编写了一个应用程序，但我的服务遇到了一些问题。下图可以更好地了解情况。我试图让它尽可能简单：

![问题的可视化](../Images/2f105e835887163bc2acc6fb5df24b09.png)

我有一个启动服务的活动。该服务启动一个对网页进行请求的线程。一旦启动此服务，它应该继续此过程。唯一的例外是来自活动的低内存杀手或人为请求。

我现在的问题：在 Android 设备激活其电源安全模式（屏幕变黑）的那一刻，线程被暂停/停止。重新激活设备后，线程恢复。

到目前为止我得到了什么：

*   使用模拟器，一切正常（即使在电源安全模式下也可以发送请求）
*   连接到 PC/笔记本电脑的 Android 设备（带和不带调试模式），一切正常
*   Android设备未连接到任何东西->一旦进入电源安全模式，线程就会暂停
*   重新激活设备，线程继续（例如不破坏低内存杀手）

我希望你能理解我的问题并能帮助我。我看不出它在一种特殊的给定情况下不起作用的原因。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:38:50.910

看看[PowerManagement](http://developer.android.com/reference/android/os/PowerManager.html)类。但请谨慎使用，因为：

> 使用此 API 将显着影响设备电池寿命。不要获取 PowerManager.WakeLocks，除非你真的需要它们，尽可能使用最低级别，并确保尽快释放它们。

# c++ - 如何在 C++ 中读取由要读取的字符数定义的文件段？

> ID：13953240
> 
> 赞同：2
> 
> 时间：2012-12-19T13:15:29.343
> 
> 标签：c++, ifstream

我在从文件中读取特定数据时遇到了一些问题。该文件的第一行和第二行有 80 个字符，第三行有未知数量的字符。以下是我的代码：

```
int main(){
    ifstream myfile;
    char strings[80];
    myfile.open("test.txt");
    /*reads first line of file into strings*/
    cout << "Name: " << strings << endl;
    /*reads second line of file into strings*/
    cout << "Address: " << strings << endl;
    /*reads third line of file into strings*/
    cout << "Handphone: " << strings << endl;
} 
```

我如何执行评论中的操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:21:57.360

`char strings[80]`只能容纳 79 个字符。让它`char strings[81]`。如果您使用`std::string`.

[`std::getline`](http://www.cplusplus.com/reference/string/getline/)您可以使用该功能读取行。

```
#include <string>

std::string strings;

/*reads first line of file into strings*/
std::getline( myfile, strings );

/*reads second line of file into strings*/
std::getline( myfile, strings );

/*reads third line of file into strings*/
std::getline( myfile, strings ); 
```

上面的代码忽略了第一行和第二行长度为 80 个字符的信息（我假设您正在阅读基于行的文件格式）。如果它很重要，您可以为此添加额外的检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:43:08.040

在您的情况下，使用字符串而不是 char[] 会更合适。

```
#include <string>
using namespace std;

int main(){
    ifstream myfile;
    //char strings[80];
    string strings;
    myfile.open("test.txt");

    /*reads first line of file into strings*/
    getline(myfile, strings);
    cout << "Name: " << strings << endl;
    /*reads second line of file into strings*/
    getline(myfile, strings);
    cout << "Address: " << strings << endl;
    /*reads third line of file into strings*/
    getline(myfile, strings);
    cout << "Handphone: " << strings << endl;
} 
```

# php - 创建函数然后在需要时调用它

> ID：13953242
> 
> 赞同：1
> 
> 时间：2012-12-19T13:15:31.027
> 
> 标签：php, function

我对 PHP 函数不太了解。我想在单击按钮时在函数内部打印名称。我尝试了不同的方法，甚至在 google 中搜索过。需要帮助...

```
<?PHP
function writeName()
{
echo "Kai Jim Refsnes";
}

Echo "<form>
<input type='button' onClick='writeName();' style='position:fixed;bottom:0px;left:0px;width:100%;'>
</form>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:16:59.890

您不能从 JavaScript 调用 PHP 函数。

PHP 在服务器端解释，JavaScript 在客户端解释。

您可以使用[AJAX 请求](http://api.jquery.com/jQuery.get/)，也可以在运行时使用 PHP 编写 JavaScript 函数

就像是：

```
echo <<<END
<form>
    <input type='button' onClick='function writeName() { document.write("{$php_var_name}") }' style='position:fixed;bottom:0px;left:0px;width:100%;'>
</form>
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:18:58.077

PHP 在服务器端运行，因此您应该使用 AJAX，它允许您在页面加载后运行 PHP。

AJAX 是异步 javascript - 您基本上使用 Javascript 来查询服务器上的 PHP 页面，然后您会收到一个响应，然后您可以将其打印到您的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-25T18:24:39.747

我可以为您提供三种选择：

**1.**使用***纯PHP*** .PHP是纯PHP的`server-side`变化发生在以下方式

*   数据被发送到服务器
*   数据在服务器上处理
*   处理后数据从服务器响应给用户
*   在上述过程中，页面重新加载以及在客户端接收到完整数据时停止重新加载。

所以使用纯PHP我只能找出一种在按钮点击时调用函数的方法。我可以按如下方式完成：

```
<?PHP
function writeName()
{
echo "Kai Jim Refsnes";
}

if(isset($_GET['submit']))
{
writeName();
}
?>

<form action="#">
<input type="submit" name="submit" value="submit" style="position:fixed;bottom:0px;left:0px;width:100%;" />
</form> 
```

**2.**使用***Javascript*** .Javascript 是 .It `client-side`doesn't reload the page。

```
<script>
function writeName()
{
document.write="Kai Jim Refsnes";
}
</script>
<button onclick="writeName();">submit</button> 
```

**3.**使用***AJAX*** 。使用 AJAX ，您可以结合 PHP 和 Javascript。为此，*简单地打印一条消息*AJAX 会太多，但对于服务器和客户端之间更大/复杂的数据传输而无需重新加载 AJAX 很有帮助。

AJAX 参考：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)；[http://www.w3schools.com/ajax/](http://www.w3schools.com/ajax/)

# php - PHP mb_substr() 无法正常工作？

> ID：13953248
> 
> 赞同：21
> 
> 时间：2012-12-19T13:15:48.297
> 
> 标签：php, string, utf-8, multibyte, mbstring

这段代码

`print mb_substr('éxxx', 0, 1);`

打印一个空白空间:(

它应该打印第一个字符，`é`. 然而，这似乎有效：

`print mb_substr('éxxx', 0, 2);`

但这是不对的，因为 (0, 2) 表示 2 个字符...

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-19T13:17:53.677

尝试将编码参数传递给 mb_substr，如下所示：

```
print mb_substr('éxxx', 0, 1, 'utf-8'); 
```

永远不会自动检测到编码。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-19T13:23:12.853

在实践中，我发现在某些系统中，多字节函数默认使用 ISO-8859-1 进行内部编码。这实际上破坏了他们处理多字节文本的能力。

设置一个好的默认值可能会解决这个问题和其他一些问题：

```
mb_internal_encoding('UTF-8'); 
```

# java - GWT ImageCell 转换为 CellTable

> ID：13953252
> 
> 赞同：2
> 
> 时间：2012-12-19T13:16:15.557
> 
> 标签：java, gwt

如何将图像单元格（具有 >1 个图像）放入 CellTable 的 1 个单元格中。gwt可以吗？任务是在不同的图像之间进行选择。感谢您提供任何帮助或更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:19:33.783

您需要创建一个自定义单元格。自定义单元格使用 HTML 模板，因此您可以实现 .render() 方法来显示您的图像 - 以及其他元素（如果需要）。

这是创建自定义单元格的指南：

[https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomCells](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomCells)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T14:12:48.870

我有一篇文章链接，它描述了如何使用多个图像创建自定义单元格：

*   [用于 CellTable 的具有多个图像的自定义 GWT 可单击单元格](http://webcentersuite.blogspot.in/2011/11/custom-gwt-clickable-cell-with-multiple.html)

希望能有所帮助。

# c - 按下按键后立即退出包含时间延迟的循环

> ID：13953257
> 
> 赞同：2
> 
> 时间：2012-12-19T13:16:30.340
> 
> 标签：c, loops, timedelay

我想实现一个函数，如果按下一个键或时间用完，它将退出倒数计时器循环。我正在使用时间延迟来制作倒数计时器，并且在时间延迟之后，控制台将刷新。但是，当我按下一个键时，它不会退出循环。谁能帮忙？

这是我的代码：

```
int b=0;

while(minutes_left>0)
{
    for(minutes_left=minutes_left;minutes_left>0 && b==0;minutes_left-=10)
    {
        system("cls");
        banner();
        printf("    TIME LEFT\n");
        printf("----------------\n");
        printf("     %d:%d0\n",(minutes_left/60), (minutes_left%60)/10);
        printf("----------------\n");
        printf("\nPress any key to enter you transaction code and finish parking\n");
        b=kbhit();
        Sleep(10000);
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T13:25:27.390

`kbhit()`不等待任何输入，如果在您进行测试的那一刻有按键按下，它只会返回。因此，在这种情况下，您永远不会在需要时准确地按下键，并且您会立即进入睡眠状态。

正常用法是这样的：

```
while (!kbhit()) 
```

所以你可以坐下来等待按键。在你的情况下，因为你想睡觉，你可能应该对按键进行某种“倒计时”操作检查......我没有一个很好的例子，所以让我们说：

```
int countdown;
for(minutes_left=minutes_left;minutes_left>0 && b==0;minutes_left-=10)
{
    countdown = 0;
    system("cls");
    ...
    while(countdown++ <= 1000){  // give a second to hit something
        if(b=kbhit())            // if the user presses a key
            break;               // leave the loop early
        Sleep(1);                // else, sleep for 1 ms and try again
    }
    if (b == 0)          // if nothing was pressed
        Sleep(9000);     // sleep for another 9s 
```

* * *

**编辑：** 我认为您的问题可能出在代码中的其他位置...我掸掉旧的 Windows 计算机并试一试：

```
int main()
{
    int i, b = 0, countdown;
    for(i = 0; i<10000 && b ==0; i++)
    {
         countdown = 0;
         system("cls");
         printf("menu stuff %d\n", i);
         while(countdown++ <= 1000) {
           if(b = kbhit())
              break;
           Sleep(1);
         }
         if(b == 0)
           Sleep(9000);
    }
    return 0;
} 
```

该程序适用于我获取输入并摆脱睡眠机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:46:40.780

做额外的循环等待更小的时间粒度：

```
int b=0;
int count;

while(minutes_left>0)
{
    for(minutes_left=minutes_left;minutes_left>0 && b==0;minutes_left-=10)
    {
        system("cls");
        banner();
        printf("    TIME LEFT\n");
        printf("----------------\n");
        printf("     %d:%d0\n",(minutes_left/60), (minutes_left%60)/10);
        printf("----------------\n");
        printf("\nPress any key to enter you transaction code and finish parking\n");

        // replacing your's
        //b=kbhit();
        //Sleep(10000);

        // with inner loop
        for(count=0; count<100&& (b=kbhit())==0; count++) {
            Sleep(100);
        }

        // this loop will wait for 10000 milliseconds but in portions of 100
        // periodically it will check keyboard
        // user will be required to keep key pressed for at least 0.1 second
        // to be caught by the loop

    }

} 
```

顺便说一句，你有什么`for`附加的内部`while`？

# asp.net-mvc - RenderSection 在 ASP.NET MVC3 的局部视图中不起作用

> ID：13953258
> 
> 赞同：11
> 
> 时间：2012-12-19T13:16:36.493
> 
> 标签：asp.net-mvc, asp.net-mvc-3, partial-views

在我的 ASP.NET MVC3 项目中，我有一个`_Layout.cshtml`由 Visual Studio 2010 生成的标准，在关闭我的`<body>`标签后，我放置了一个`RenderSection`：

_Layout.cshtml：

```
</body>
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
@RenderSection("ScriptContent", required: false)
</html> 
```

然后在我看来，`Index.cshtml`我有：

```
@model MyApp.ViewModels.MyViewModel
@{ Html.RenderPartial("MyPartial", Model);  } 
```

如果我把`@section ScriptContent`它放在 Index.cshtml 中，它会正确显示。如果我把它放在我的部分视图中`MyPartial.cshtml`：

```
@model MyApp.ViewModels.MyViewModel

@section ScriptContent {
     <script src="@Url.Content("~/Scripts/Filters.js")" type="text/javascript"></script>    
} 
```

在我的页面源中，我有：

```
</body>
     <script src="/Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>    
</html> 
```

表示`@section`未执行。可能是什么原因？谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T13:23:18.100

不能`@section`从局部视图中设置布局。作为一种解决方法，您可以改为调用呈现必要`<script>`和 HTML 的操作 - 尽管这不是很优雅。

# php - Zend 表单复选框元素自定义

> ID：13953261
> 
> 赞同：1
> 
> 时间：2012-12-19T13:16:42.580
> 
> 标签：php, zend-framework, zend-form

我有一个带有一些元素的 zend 表单，包括一个复选框。看起来很正常：

```
checkbox label [] 
```

我想在右侧添加一个链接，使其看起来像这样：

```
checkbox label [] thelink 
```

我尝试了以下方法，但不是将描述与复选框水平对齐，而是将其置于其下方：

```
$boolean->setDescription('desc');
        $boolean->setDecorators(array(
            'ViewHelper',
            'Description',
            'Errors',
            array('HtmlTag', array('tag' => 'dd')),
            array('Label', array('tag' => 'dt')),
        )); 
```

我是 Zend Forms 的初学者。知道我该如何实现吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:22:47.923

知道了！

我是这样做的：

```
 $boolean->setDescription('description');
        $boolean->setDecorators(array(
            'ViewHelper',
            'Description',
            'Errors',
            array('HtmlTag', array('tag' => 'dd')),
            array('Label', array('tag' => 'dt')),
            array('Description', array('escape' => false, 'tag' => '', 'placement' => 'append')),
        )); 
```

# hibernate - 休眠环境和有序列表

> ID：13953263
> 
> 赞同：1
> 
> 时间：2012-12-19T13:16:45.030
> 
> 标签：hibernate, lazy-loading, hibernate-envers

一段时间以来，我一直非常愉快地使用 Hibernate Envers 3.6。但是，我遇到了有序列表的问题，这似乎导致 Envers 失败。

我们有一个带有 B 列表的 A 类，例如在 A 类中一对多映射

```
 @OneToMany(mappedBy = "A", cascade = CascadeType.ALL, orphanRemoval = true)
public List<B> getB() {
    return this.B;
} 
```

当我检索修订时，我加载适当的 A 实例，然后显式初始化 B 的集合：例如，

```
for (B b: rvision.getB()){
   b.getClass();// init  fields
} 
```

最近虽然我们需要在 getB() 方法上添加一个“orderColumn”注释，以确保数据库中列表的顺序一致。

例如，

```
@OneToMany(mappedBy = "A", cascade = CascadeType.ALL, orphanRemoval = true)
 @OrderColumn(name="columnIndex")
    public List<B> getB() {
        return this.B;
    } 
```

这完全破坏了 Envers 中的集合初始化，失败并出现空指针异常：

```
java.lang.NullPointerException
at org.hibernate.envers.entities.mapper.relation.lazy.initializor.ListCollectionInitializor.addToCollection(ListCollectionInitializor.java:81)
at org.hibernate.envers.entities.mapper.relation.lazy.initializor.ListCollectionInitializor.addToCollection(ListCollectionInitializor.java:39)
at org.hibernate.envers.entities.mapper.relation.lazy.initializor.AbstractCollectionInitializor.initialize(AbstractCollectionInitializor.java:67)
at org.hibernate.envers.entities.mapper.relation.lazy.proxy.CollectionProxy.checkInit(CollectionProxy.java:50)
at org.hibernate.envers.entities.mapper.relation.lazy.proxy.CollectionProxy.size(CollectionProxy.java:55)
etc.... 
```

我们已将其隔离为单元测试；切换 OrderColumn 注释足以导致此问题。OrderColumn 与常规 Hibernate 一起工作正常。

问题似乎源于 org.hibernate.envers.entities.mapper.relation.component.MiddleSimpleComponentMapper 的第 47 行：

```
 return ((Map<String, Object>) data.get(verEntCfg.getOriginalIdPropName())).get(propertyName); 
```

基本上，它正在寻找的“propertyName”被称为“mapKey”，并且查找在不应该时返回 null。这不是我的对象的属性，所以它必须是一些内部 Envers 属性。

如果有人知道发生了什么，我将不胜感激！谢谢理查德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-23T15:39:27.563

我们在 Hibernate Envers 4.x 中遇到了这个问题。我们的解决方案是使用`@AuditMappedBy`注释来识别 Envers 的订单列。如[这里](http://www.solewing.org/blog/2015/07/hibernate-envers-onetomany-list-and-ordercolumn/)的示例所示，有必要将订单列值映射到引用实体上的字段中以使其全部工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T17:58:35.963

几周前我遇到了同样的问题。

我刚刚添加了 Envers 正在寻找的 @MapKey 注释，到目前为止我还没有看到任何进一步的问题。

# facebook - Facebook 未过期的访问令牌

> ID：13953265
> 
> 赞同：7
> 
> 时间：2012-12-19T13:16:49.640
> 
> 标签：facebook, token

我想在我的网站上显示最后一个 facebook 帖子。我有一个脚本，但它需要访问令牌才能工作。

我遵循了这篇文章中提到的步骤：

[https://neosmart-stream.de/de/facebook/how-to-create-a-facebook-access-token/comment-page-1/#comment-617](https://neosmart-stream.de/de/facebook/how-to-create-a-facebook-access-token/comment-page-1/#comment-617)

现在我有一个有效期为 60 天的访问令牌，但是当我打开[https://graph.facebook.com/me/accounts](https://graph.facebook.com/me/accounts)时，我收到此错误：

```
{
   "error": {
      "message": "An active access token must be used to query information about the current user.",
      "type": "OAuthException",
      "code": 2500
   }
} 
```

因为我的访问令牌有效期为 2 个月，所以它应该可以工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-05T22:56:37.843

1：使用您的网站 url 在 facebook 中创建一个应用程序

2：在浏览器中运行此链接

3：访问以下生成新的SHORT-LIVED（1小时）访问令牌：

```
https://www.facebook.com?client_id=[APPID]&client_secret=[APPSECRET]&redirect_uri[http://APPURL]&scope=manage_pages,read_stream&response_type=token 
```

4：获取该短期访问令牌并将其发送到此处：

```
https://graph.facebook.com/oauth/access_token?client_id=[APP_ID]&client_secret=[APP_SECRET]&grant_type=fb_exchange_token&fb_exchange_token=[EXISTING_ACCESS_TOKEN] 
```

5：然后，无论是在 FB 的 Graph API Explorer 中还是您自己，访问这里：

[https://graph.facebook.com/me/accounts?access_token=[TOKEN]](https://graph.facebook.com/me/accounts?access_token=[TOKEN])

然后将token和id粘贴到代码中，就可以得到结果了。

[您可以使用FaceBook Access Token Debugger](https://developers.facebook.com/tools/debug/accesstoken)调试和验证令牌的到期日期：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:31:03.507

> 当我打开[https://graph.facebook.com/me/accounts](https://graph.facebook.com/me/accounts) ...

您需要在 Graph API Explorer 中打开它并添加在前面步骤中检索到的访问令牌**或**将其附加到 url 的末尾

`https://graph.facebook.com/me/accounts?access_token=XXXX`

# java - 如何将多个下拉列表绑定到模型 - spring mvc

> ID：13953266
> 
> 赞同：2
> 
> 时间：2012-12-19T13:16:51.653
> 
> 标签：java, spring-mvc

JSP

```
<select name="requirements"  style="width:150px;" id="requirements1">
                                        <option selected="selected" value="o Special Assistance">No Special Assistance</option>
                                        <option value="Assistance climbing steps">Assistance climbing steps</option>
                                        <option value="Assistance within the plane">Assistance within the plane</option>
                                        <option value="Blind passenger">Blind passenger</option>
                                        <option value="Hearing impaired">Hearing impaired</option>
                                        <option value="Wheelchair within terminal">Wheelchair within terminal</option>
                                    </select>
<select name="requirements"  style="width:150px;" id="requirements2">
                                        <option selected="selected" value="o Special Assistance">No Special Assistance</option>
                                        <option value="Assistance climbing steps">Assistance climbing steps</option>
                                        <option value="Assistance within the plane">Assistance within the plane</option>
                                        <option value="Blind passenger">Blind passenger</option>
                                        <option value="Hearing impaired">Hearing impaired</option>
                                        <option value="Wheelchair within terminal">Wheelchair within terminal</option>
                                    </select><input type="text" name="specialrequest" id="specialrequest1" />
        </form> 
```

班级

```
public class PassengerDetailDTO {

    private String[] requirements;
    private String specialrequest;
} 
```

并在控制器中

```
@RequestMapping(value = "/manualbooking.htm", method = RequestMethod.POST)
    public String doManualBooking(HttpServletRequest httpServletRequest,
            PassengerDetailDTO passengerDetailDTO,  ModelMap map) {
        LOGGER.info("Manual Booking Request");

        LOGGER.info(passengerDetailDTO.toString());

        return "manualbooking";
    } 
```

当有多个下拉框时，提交表单后**要求**始终为空。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:22:45.090

确保您的`<select>`盒子名称代表 array `[]`。例如：

```
<select name="requirements[0]" ..>

<select name="requirements[1]" ..> 
```

检查这个演示：[Spring MVC Multi Row Form](http://viralpatel.net/blogs/spring-mvc-multi-row-submit-java-list/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T13:24:40.213

您可以将 2 个不同的字符串字段添加到您的支持 bean，即

```
private String requirement1;
private String requirement2; 
```

然后使用类似于此的构造

```
 <form:select path="requirement1" multiple="false" id="requirement1">
    <form:options items="${yourRequirementsAsACollection}" />
 </form:select>

 <form:select path="requirement2" multiple="false" id="requirement2">
    <form:options items="${yourRequirementsAsACollection}" />
 </form:select> 
```

将所选值分别写入第一个或第二个字段。

另一方面，您可以使用多选框，在这种情况下，所有选定的值最终将在单个字段中以逗号分隔。

```
 private String requirements; // Ends up comma-separated, ie "req1, req2"

 <form:select path="requirements" multiple="true" id="requirements">
    <form:options items="${yourRequirementsAsACollection}" />
 </form:select> 
```

# python - 在 debian 中守护一个 python 脚本

> ID：13953268
> 
> 赞同：3
> 
> 时间：2012-12-19T13:16:56.843
> 
> 标签：python, debian, daemon, raspberry-pi, init.d

我有一个 python 脚本，我想在启动时在后台运行。这是脚本：

```
#!/usr/bin/python
from Adafruit_CharLCD import Adafruit_CharLCD
from subprocess import * 
from time import sleep, strftime
from datetime import datetime
from datetime import timedelta
from os import system
from os import getloadavg
from glob import glob

#Variables
lcd = Adafruit_CharLCD() #Stores LCD object
cmdIP = "ip addr show eth0 | grep inet | awk '{print $2}' | cut -d/ -f1" #Current IP
cmdHD = "df -h / | awk '{print $5}'" # Available hd space
cmdSD = "df -h /dev/sda1 | awk '{print $5}'" # Available sd space
cmdRam = "free -h"
temp = 0

#Run shell command
def run_cmd(cmd):
    p = Popen(cmd, shell=True, stdout=PIPE)
    output = p.communicate()[0]
    return output

#Initalises temp device     
def initialise_temp():
    #Initialise
    system("sudo modprobe w1-gpio")
    system("sudo modprobe w1-therm")
    #Find device
    devicedir = glob("/sys/bus/w1/devices/28-*")
    device = devicedir[0]+"/w1_slave"
    return device

#Gets temp  
def get_temp(device):
    f = open (device, 'r')
    sensor = f.readlines()
    f.close()

    #parse results from the file
    crc=sensor[0].split()[-1]
    temp=float(sensor[1].split()[-1].strip('t='))
    temp_C=(temp/1000.000)
    temp_F = ( temp_C * 9.0 / 5.0 ) + 32

    #output
    return temp_C

#Gets time
def get_time():
    return datetime.now().strftime('%b %d  %H:%M:%S\n')

#Gets uptime
def get_uptime():
    with open('/proc/uptime', 'r') as f:
        seconds = float(f.readline().split()[0])
        array = str(timedelta(seconds = seconds)).split('.')
        string = array[0].split(' ')
        totalString = string[0] + ":" + string[2]
    return totalString

#Gets average load
def get_load():
    array = getloadavg()
    average = 0
    for i in array:
        average += i
    average = average / 3
    average = average * 100
    average = "%.2f" % average
    return str(average + "%")

#def get_ram():
def get_ram():
    ram = run_cmd(cmdRam)
    strippedRam = ram.replace("\n"," ");
    splitRam = strippedRam.split(' ')
    totalRam = int(splitRam[52].rstrip("M"))
    usedRam = int(splitRam[59].rstrip("M"))
    percentage = "%.2f" % ((float(usedRam) / float(totalRam)) * 100)
    return percentage + "%"

#Gets the SD usage
def get_sd():
    sd = run_cmd(cmdSD)
    strippedSD = sd.lstrip("Use%\n")
    return strippedSD

#Gets the HD usage
def get_hd():
    hd = run_cmd(cmdSD)
    strippedHD = hd.lstrip("Use%\n")
    return strippedHD

def scroll():
    while(1):
        lcd.scrollDisplayLeft()
        sleep(0.5)

#Uptime and IP
def screen1():
    uptime = get_uptime()
    lcd.message('Uptime %s\n' % (uptime))
    ipaddr = run_cmd(cmdIP)
    lcd.message('IP %s' % (ipaddr))

#Ram and load
def screen2():
    ram = get_ram()
    lcd.message('Ram Used %s\n' % (ram))
    load = get_load()
    lcd.message('Avg Load %s' % (load))

#Temp and time
def screen3():
    time = get_time();
    lcd.message('%s\n' % (time))
    lcd.message('Temp %s' % (temp))

#HD and SD usage
def screen4():
    sd = get_sd()
    lcd.message('SD Used %s\n' % (sd))
    hd = get_hd()
    lcd.message('HD Used %s' % (hd))

#Pause and clear
def screenPause(time):
    sleep(time)
    #In here to reduce lag
    global temp
    temp = str(get_temp(device));
    lcd.clear()
###########################################################################################################

#Initialise
lcd.begin(16,2)
device = initialise_temp()
lcd.clear()

#Testing

#Main loop
while(1):
    screen1()
    screenPause(5)
    screen2()
    screenPause(5)
    screen3()
    screenPause(5)
    screen4()
    screenPause(5) 
```

我知道我可能没有以写方式做事，但这是第一次尝试。我的启动脚本在 /etc/init.d 这是脚本：

```
#! /bin/sh
### BEGIN INIT INFO
# Provides:          LCD looping
# Required-Start:    $remote_fs $syslog
# Required-Stop:     $remote_fs $syslog
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: LCD daemon
# Description:       This file should be used to construct scripts to be
#                    placed in /etc/init.d.
### END INIT INFO

# Author: Foo Bar <foobar@baz.org>
#
# Please remove the "Author" lines above and replace them
# with your own name if you copy and modify this script.

# Do NOT "set -e"

# PATH should only include /usr/* if it runs after the mountnfs.sh script
PATH=/sbin:/usr/sbin:/bin:/usr/bin
DESC="Loops the LCD screen through LCD.py"
NAME=startup.py
DAEMON=/home/pi/Programming/LCD/startup.py
DAEMON_ARGS=""
PIDFILE=/var/run/daemonLCD.pid
SCRIPTNAME=/etc/init.d/daemonLCD

# Exit if the package is not installed
[ -x "$DAEMON" ] || exit 0

# Read configuration variable file if it is present
[ -r /etc/default/daemonLCD ] && . /etc/default/daemonLCD

# Load the VERBOSE setting and other rcS variables
. /lib/init/vars.sh

# Define LSB log_* functions.
# Depend on lsb-base (>= 3.2-14) to ensure that this file is present
# and status_of_proc is working.
. /lib/lsb/init-functions

#
# Function that starts the daemon/service
#
do_start()
{
        # Return
        #   0 if daemon has been started
        #   1 if daemon was already running
        #   2 if daemon could not be started
        start-stop-daemon --start --quiet --pidfile $PIDFILE --exec $DAEMON --test > /dev/null \
                || return 1
        start-stop-daemon --start --quiet --pidfile $PIDFILE --exec $DAEMON -- \
                $DAEMON_ARGS \
                || return 2
        # Add code here, if necessary, that waits for the process to be ready
        # to handle requests from services started subsequently which depend
        # on this one.  As a last resort, sleep for some time.
}

#
# Function that stops the daemon/service
#
do_stop()
{
        # Return
        #   0 if daemon has been stopped
        #   1 if daemon was already stopped
        #   2 if daemon could not be stopped
        #   other if a failure occurred
        start-stop-daemon --stop --quiet --retry=TERM/30/KILL/5 --pidfile $PIDFILE --name $NAME
        RETVAL="$?"
        [ "$RETVAL" = 2 ] && return 2
        # Wait for children to finish too if this is a daemon that forks
        # and if the daemon is only ever run from this initscript.
        # If the above conditions are not satisfied then add some other code
        # that waits for the process to drop all resources that could be
        # needed by services started subsequently.  A last resort is to
        # sleep for some time.
        start-stop-daemon --stop --quiet --oknodo --retry=0/30/KILL/5 --exec $DAEMON
        [ "$?" = 2 ] && return 2
        # Many daemons don't delete their pidfiles when they exit.
        rm -f $PIDFILE
        return "$RETVAL"
#
# Function that sends a SIGHUP to the daemon/service
#
do_reload() {
        #
        # If the daemon can reload its configuration without
        # restarting (for example, when it is sent a SIGHUP),
        # then implement that here.
        #
        start-stop-daemon --stop --signal 1 --quiet --pidfile $PIDFILE --name $NAME
        return 0
}

case "$1" in
  start)
        [ "$VERBOSE" != no ] && log_daemon_msg "Starting $DESC" "$NAME"
        do_start
        case "$?" in
                0|1) [ "$VERBOSE" != no ] && log_end_msg 0 ;;
                2) [ "$VERBOSE" != no ] && log_end_msg 1 ;;
        esac
        ;;
  stop)
        [ "$VERBOSE" != no ] && log_daemon_msg "Stopping $DESC" "$NAME"
        do_stop
        case "$?" in
                0|1) [ "$VERBOSE" != no ] && log_end_msg 0 ;;
                2) [ "$VERBOSE" != no ] && log_end_msg 1 ;;
        esac
        ;;
  status)
        status_of_proc "$DAEMON" "$NAME" && exit 0 || exit $?
        ;;
  #reload|force-reload)
        #
        # If do_reload() is not implemented then leave this commented out
        # and leave 'force-reload' as an alias for 'restart'.
        #
        #log_daemon_msg "Reloading $DESC" "$NAME"
        #do_reload
        #log_end_msg $?
        #;;

  restart|force-reload)
        #
        # If the "reload" option is implemented then remove the
        # 'force-reload' alias
        #
        log_daemon_msg "Restarting $DESC" "$NAME"
        do_stop
        case "$?" in
          0|1)
                do_start
                case "$?" in
                        0) log_end_msg 0 ;;
                        1) log_end_msg 1 ;; # Old process is still running
                        *) log_end_msg 1 ;; # Failed to start
                esac
                ;;
          *)
                # Failed to stop
                log_end_msg 1
                ;;
        esac
        ;;
  *)
        #echo "Usage: $SCRIPTNAME {start|stop|restart|reload|force-reload}" >&2
        echo "Usage: $SCRIPTNAME {start|stop|status|restart|force-reload}" >&2
        exit 3
        ;;
esac

: 
```

我想我错过了一些东西，因为当我输入 daemonLCD start 时，它说找不到命令。任何输入都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T15:30:31.900

假设您将来可能想要管理多个守护程序，让我推荐[Supervisord](http://supervisord.org/running.html#adding-a-program)。它比编写和管理自己的 init.d 脚本要简单得多。

例如，启动脚本就像在 conf 中包含以下内容一样简单：

```
[program:myscript]
command=/usr/bin/python /path/to/myscript.py 
```

[我使用此处提供](https://gist.github.com/176149)的 init.d 脚本。将其重命名为 supervisord 并将其复制到您的 /etc/init.d/ 然后运行：

```
sudo update-rc.d supervisord defaults 
```

我相信init脚本默认以root身份运行supervisord。如果你愿意，你可以让它作为另一个用户运行。如果孩子们以 root 身份运行，我不是，尽管我假设不是。继续检查，但如果他们不这样做，您可以在您调用脚本的 supervisord.conf 中的 python 命令之前粘贴一个 sudo。

它不运行，（或者如果您希望 supervisord 以非 root 身份运行但仍希望您的脚本以 root 身份运行）您可以允许任何人（或一组用户）以 root 身份运行 python 脚本（尽管你应该非常确定这个脚本不能被 root 以外的任何人编辑）。

使用“sudo visudo”编辑您的 sudoers 文件，并将以下内容添加到末尾：

```
USERS ALL=(ALL) NOPASSWD: /path/to/myscript.py 
```

然后确保在 python 脚本的开头有一个 shebang 并更改命令以省略 python 调用，即：

```
[program:myscript]
command=sudo /path/to/myscript.py 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-14T17:21:45.040

这是一篇很好的博客文章，它处理了这个问题：[Getting a Python script to run in the background (as a service) on boot](http://blog.scphillips.com/2013/07/getting-a-python-script-to-run-in-the-background-as-a-service-on-boot/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-14T20:11:21.987

`daemontools`从 djb使用。它比提供的其他答案容易得多。对于初学者，您可以使用 apt-get 安装守护程序工具，这样您就不必担心从 gist 中获取未知脚本，并且您可以像往常一样通过 debian 获取更新。daemontools 还负责在服务死亡时重新启动服务并提供日志记录。这里有对 daemontools 和 debian 的描述：

[http://blog.rtwilson.com/how-to-set-up-a-simple-service-to-run-in-the-background-on-a-linux-machine-using-daemontools/](http://blog.rtwilson.com/how-to-set-up-a-simple-service-to-run-in-the-background-on-a-linux-machine-using-daemontools/)

djb 的页面 aout `daemontools`:

[http://cr.yp.to/daemontools.html](http://cr.yp.to/daemontools.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T15:32:41.007

这是 Unix/Linux 新手常犯的典型错误。`/etc/init.d`不在您的路径中，这就是为什么您不能只运行 daemonLCD。尝试使用完整路径 ( `/etc/init.d/daemonLCD start`) 或前置 ./ ( `./daemonLCD start`)。

该脚本必须是可执行的才能使上述任何一种工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-26T02:54:45.263

感谢上面的代码。我一直在用它来弄清楚如何在 linux 机器上设置一个守护进程。

通过一些调整，我可以让它工作得很好。

但是有件事让我很困惑。那是通过检查 /var/run/myfile.pid 的存在来检查进程是否正在运行

那只是 pidfile - 不是过程，对吧？

看看 /lib/lsb/init-functions.status_of_proc

```
status_of_proc () {
local pidfile daemon name status OPTIND

pidfile=
OPTIND=1
while getopts p: opt ; do
    case "$opt" in
        p)  pidfile="$OPTARG";;
    esac
done
shift $(($OPTIND - 1))

if [ -n "$pidfile" ]; then
    pidfile="-p $pidfile"
fi
daemon="$1"
name="$2"

status="0"
pidofproc $pidfile $daemon >/dev/null || status="$?"
if [ "$status" = 0 ]; then
    log_success_msg "$name is running"
    return 0
elif [ "$status" = 4 ]; then
    log_failure_msg "could not access PID file for $name"
    return $status
else
    log_failure_msg "$name is not running"
    return $status
fi
} 
```

那只是处理访问PID文件的成功或失败。

现在，我正在构建这个守护进程以在小型设备上运行。我发现它正在使用 BusyBox 并且我没有初始化函数 :-( 但我确实有 pidof。

所以我加了

```
 log_success_msg "pidof $NAME is $(pidof -x $NAME)" >> $LOGFILE
       log_success_msg "PIDFILE of $NAME is" >> $LOGFILE
       sed -n '1p' < $PIDFILE >> $LOGFILE 
```

并检查了 $LOGFILE 和你看，数字是不同的。

我对两个数字都做了 pstree -s -p

pidof 数字吐出一棵很短的树，所以它是针对根级进程的

但是 $PIDFILE 编号会在一个分支后吐出一个分支，所以我认为 pstree 找不到该进程。

是的，Joseph Baldwin Roberts 代码中的 do_stop 会杀死这两个进程。但是如果进程以另一种方式被杀死，例如 kill -9 12345，$PIDFILE 仍然存在。因此，守护进程会错误地认为进程已经在运行拒绝启动。

# python - python pandas date read_table

> ID：13953276
> 
> 赞同：4
> 
> 时间：2012-12-19T13:17:29.337
> 
> 标签：python, date, pandas

我有以下输入文件：

```
2012,10,3,AAPL,BUY,200
2012,12,5,AAPL,SELL,200 
```

如何将其读入带有以下列的熊猫数据框中：

```
index: default int range # 0
column1: datetime(2012,10,3,16) # 2012-10-03 16:00
column2: string # AAPL
column3: string # BUY
column4: integer # 200 
```

例子：

```
0 2012-10-03 16:00 AAPL BUY  200
1 2012-12-05 16:00 AAPL SELL 200 
```

尝试过（熊猫 0.7）：

```
In[2]: pandas.io.parsers.read_csv("input.csv", parse_dates=[[0,1,2]], header=None)
Out[2]: 
    X.1  X.2  X.3   X.4   X.5  X.6
0  2012   10    3  AAPL   BUY  200
1  2012   12    5  AAPL  SELL  200 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T13:21:07.607

尝试使用[read_csv()](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.io.parsers.read_csv.html#pandas.io.parsers.read_csv)函数。确保您的 csv 包含标题或传递`header=None`以进行正确解析。`parse_dates=[[0,1,2]]`将有助于所需的 dattime 解析。

```
In [4]: pandas.io.parsers.read_csv("input.csv", parse_dates=[[0,1,2]], header=None)
Out[4]: 
              X0_X1_X2    X3    X4   X5
0  2012-10-03 00:00:00  AAPL   BUY  200
1  2012-12-05 00:00:00  AAPL  SELL  200 
```

# javascript - 带有“openInfoWindowHtml”的 Google Maps api V3 XML 和地理编码器

> ID：13953277
> 
> 赞同：0
> 
> 时间：2012-12-19T13:17:36.450
> 
> 标签：javascript, xml, google-maps, google-geocoder

所以现在在 V3 中，现在我无法让标记出现！在警报中获得正确的结果。

```
var infowindow;
var map;
var latlng;
var lat;
var lng;

function initialize() {
var myLatlng = new google.maps.LatLng(51.949344,7.846573);
var myOptions = {
zoom: 7,
center: myLatlng,
mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
downloadUrl("example.xml", function(data) {
var markers = data.documentElement.getElementsByTagName("marker");
for (var i = 0; i < markers.length; i++) {
    var address = markers[i].getAttribute("address");
    var geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 'address': address}, function(results, status) {
if (status == google.maps.GeocoderStatus.OK) {
    lat = parseFloat(results[0].geometry.location.lat());
    lng = parseFloat(results[0].geometry.location.lng());

    latlng = new google.maps.LatLng(lat,lng);

alert('Geocode succesful ' + latlng);
} else {
alert("Geocode was not successful for the following reason: " + status);
        }
    });  

   var marker = createMarker(markers[i].getAttribute("name"), latlng);

}
});
}

function createMarker(name, latlng) {
var marker = new google.maps.Marker({position: latlng, map: map});
google.maps.event.addListener(marker, "click", function() {
if (infowindow) infowindow.close();
infowindow = new google.maps.InfoWindow({content: name});
infowindow.open(map, marker);
});
return marker;
} 
```

这个 XML 布局：

```
 <markers>
    <marker address="XXXXX 2, Rotterdam" name="Info">
    <marker address="XXXXX 25, Amsterdam" name="Info2">
    <marker address="XXXX 52, Rotterdam" name="Info3">
    </markers> 
```

希望您能提供帮助，如果这是一个非常简单的解决方案，请原谅，但我对此有点陌生。

谢谢，E

# grid - Telerik Kendo UI 网格：分组和排序在 grid.refresh() 中仍然存在，但折叠的组得到扩展；如何保存状态

> ID：13953278
> 
> 赞同：5
> 
> 时间：2012-12-19T13:17:36.567
> 
> 标签：grid, refresh, datasource, grouping, kendo-ui

与监视动态变化数据的“仪表板”应用程序中的网格一样，我的 (Telerik) Kendo UI 网格每隔 60 秒定期用新数据刷新：

```
grid.dataSource.data(freshData);
grid.refresh();  // have been informed this refresh may not be necessary 
```

架构不会更改，但一些新行可能会显示在数据集中，而一些新行可能已被删除。

尽管`grid.refresh()`保留分组完好无损，并且排序状态也被保留，但任何折叠的组都会被扩展。

问题：如何保留（或恢复）组的展开/折叠状态（因此，专注于特定展开组而其他组折叠的用户不会因每个组被重新展开的定期更新而感到不便/沮丧默认）？

编辑：一些 Winforms 网格提供了一种在刷新数据之前对组展开/折叠状态“拍摄快照”的方法，然后在数据源刷新后重新应用该状态。**如果 Kendo UI 网格中的组标题行具有 UID（在刷新后仍然存在），则可以完成。** 但请参阅下面不涉及持久 UID 的建议方法。

用例：这是此功能的一个典型但有些戏剧性的用例。疾病控制中心正在按城市实时监测特定流感病毒的爆发情况。每 15 秒刷新一次数据集。他们碰巧现在专注于洛杉矶，并扩大了那个城市，而其他城市则倒塌了。如果整个网格每 15 秒膨胀一次，就会激怒 CDC 的医生，他们进去勒死程序员，然后回家打高尔夫球，洛杉矶的每个人都屈服了。剑道真的要为那场灾难负责吗？

可能的功能增强建议：忽略我对上述 UID 的建议。这是一个更好的方法。网格有

```
<div class="k-group-indicator" data-field="{groupedByDataFieldName}">
    ...
</div> 
```

现在，如果该 k-group-indicator div 可以包含不同值的列表，`data-field`每个键的关联数据是相应部分的展开/折叠状态，则可以在制作之前将该列表保存到缓冲区中调用 dataSource.data(someNewData) 方法，然后在监听 dataBound 事件的事件处理程序中，可以重新应用这些展开状态。要找到分组值的相应分组部分，如果`k-grouping-row`可以有一个名为的属性`group-data-value`来保存特定分组部分的分组值，例如“销售”或“市场营销”，如果一个按数据分组 -字段称为部门。

```
<div class="k-group-indicator" data-field="dept" data-title="Dept" data-dir="asc">
       ...
   <div class="k-group-distinct-values">
     <div group-data-value="Sales" aria-expanded="false" />
     <div group-data-value="Events Planning" aria-expanded="true" />
   </div>  
</div> 
```

然后在`k-grouping-row`： `<tr class="k-grouping-row" group-data-value="Sales">`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T03:15:06.783

可以理解，这不是内置功能。这非常复杂，因为如果您有嵌套的分组，您将必须记住它所在的层次结构中的每个折叠组。由于项目将移入和移出 DataSource，这将是一个痛苦的跟踪。

* * *

也就是说，只要您不要变得太复杂，这是一种非常骇人听闻的方式来完成您想要的事情。它只是使用该`groupHeaderTemplate`属性为每个分组行添加一个 UID。我只是使用列名 + 值作为 UID，如果您进入多个分组，这在技术上是错误的，但对于一个示例来说已经足够了。

从那里，在您刷新之前，您可以从 Kendo 现在拥有的 ARIA 属性中找到折叠的组（旁注，您必须使用 2012 Q3 才能工作）。然后向下钻取并获取模板添加的 UID。

刷新后，您可以找到具有匹配 UID 的行并将它们传递给网格的`.collapseGroup()`函数以重新折叠它。

[这是一个有效的 jsFiddle 演示了这一点。](http://jsfiddle.net/rally25rs/jGkQt/2/)

以及来自 jsFiddle 复制/粘贴的代码**（请注意，我仅在 City 列上设置模板，因此在此示例中只有 City 列将保留分组折叠！）**：

HTML：

```
<button id="refresh">Refresh</button>
<div id="grid" style="height: 380px"></div> 
```

JavaScript：

```
var _getCollapsedUids = function () {
    var collapsedUids = [];
    $("#grid .k-grouping-row span[data-uid]")
        .each(function(idx, item) {
            if($(item)
               .closest(".k-grouping-row")
               .children("td:first")
               .attr("aria-expanded") === "false") {
                collapsedUids.push($(item).data("uid"));
            }
        }
    );
    return collapsedUids;
};

var _collapseUids = function (grid, collapsedUids) {
    $("#grid .k-grouping-row span[data-uid]")
        .each(function(idx, item) {
            if($.inArray($(item).data("uid"), collapsedUids) >= 0) {
                console.log("collapse: " + $(item).data("uid"))
                grid.collapseGroup($(item).closest("tr"));
            }
        }
    );
};

var refresh = function () {
    var collapsedUids = _getCollapsedUids();
    var grid = $("#grid").data().kendoGrid;
    grid.dataSource.data(createRandomData(50));
    _collapseUids(grid, collapsedUids);
};

$("#refresh").click(refresh);

$("#grid").kendoGrid({
    dataSource: {
        data: createRandomData(50),
        pageSize: 10
    },
    groupable: true,
    sortable: true,
    pageable: {
        refresh: true,
        pageSizes: true
    },
    columns: [ {
            field: "FirstName",
            width: 90,
            title: "First Name"
        } , {
            field: "LastName",
            width: 90,
            title: "Last Name"
        } , {
            width: 100,
            field: "City",
            groupHeaderTemplate: '<span data-uid="City-#=value#">#= value #</span>'
        } , {
            field: "Title"
        } , {
            field: "BirthDate",
            title: "Birth Date",
            template: '#= kendo.toString(BirthDate,"dd MMMM yyyy") #'
        } , {
            width: 50,
            field: "Age"
        }
    ]
}); 
```

* * *

就个人而言，我根本不喜欢这个解决方案。这太 hacky 并且太多 DOM 遍历。但是，如果不重新实现网格小部件，我想不出更好的方法来做到这一点。也许它对于你想要完成的事情或者给你一个更好的想法来说已经足够好了。

* * *

最后一点；我检查了 Kendo UI 源代码，它似乎没有跟踪哪些分组被展开/折叠。他们做的事情类似于我对 aria 属性所做的事情，而是检查驱动图标状态的类：

```
 if(element.hasClass('k-i-collapse')) {
                that.collapseGroup(group);
            } else {
                that.expandGroup(group);
            } 
```

如果您没有使用 Kendo 2012 Q3 并且无法使用 aria-expanded 属性，则可以更改代码以检查图标类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-08T10:54:56.147

我已经启动了一个健壮的组状态保存网格扩展，该扩展旨在与 Kendo Grid 和 ASP.Net RadGrid（利用通用功能的特定于控件的实现）一起使用。

此扩展对[Telerik 的组状态保存示例](http://docs.telerik.com/kendo-ui/web/grid/how-to/persist-grouped-grid-collapsed-details-state)进行了重大改进，并增强了 RadGrid，没有其他可用的功能甚至可以与 Kendo UI 示例相提并论。您可以在[此处查看改进列表，也可以在](https://github.com/alight-eskillz/telerik-extensions/wiki/Group-State-Preservation-(Common))[此处](https://github.com/alight-eskillz/telerik-extensions)查看代码。

我想知道你的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T14:11:16.833

“回答”我自己的问题只是为了让答案编辑器中的代码格式更易读。这是讨论的延伸。

我同意嵌套分组更复杂。如果每个`k-grouping-row`都有一个属性，其中包含分组所基于的不同数据值数组的 JSON 表示，那么开发人员就有可能从每个折叠的 k 分组行中提取不同的数据值组合。（如果 k-grouping-row 直接指示它是展开还是折叠，但可以从它包含的单元格中获取该信息，这会有所帮助，对吧？）

有了这组折叠组的不同值，人们可以构建自己的折叠组映射。不同的数据值可以作为该映射中对象的键；每个不同的数据组合都是唯一的，并且仅与网格中的一个分组部分相关联，无论涉及多少嵌套级别。

例如，对于两层嵌套`by Department by ProductType`，我们会看到如下内容：

```
<tr class="k-grouping-row" data-distinct-values="['Sales','Toys, Games and Videos']">. 
```

Department 值为“Sales”，ProductType 值为“Toys, Games and Videos”。JSON 处理数据值中的逗号。

对于三层分组，`state, city, zipcode`我们将有：

```
 ...  data-distinct-values="['California','Beverly Hills','90210']" 
```

这些数据值在创建组时是已知的，因此可以将它们作为唯一句柄注入到 k-grouping-row 中。

`k-grouping-row`尽管 distinct-values 是一个唯一的句柄，但它们并没有消除遍历 DOM 的需要，当人们想要重新应用折叠状态时访问每一个。然而剑道网格在默认情况下不必执行崩溃状态的恢复，如果认为这是一项过于昂贵的操作。但是您将为开发人员提供一种使用 来完成它的简单方法`data-distinct-values=[...]`，并且开发人员可以自行决定性能下降（如果有的话）是否符合应用程序的要求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-17T20:59:12.893

开箱即用不支持此功能，但可以通过维护扩展组（或折叠集群）的数组来实现。

在高级别 - 您使用标记来查找组是折叠还是展开。然后维护一个扩展的组列表，并且仅在刷新网格时才扩展这些组。

在我的例子中，我使用默认的剑道图标，扩展组 (.ki-collapse) 与折叠组 (.ki-expand) 不同。

```
var expandedGroups = []; 
```

我可以在全球范围内使用扩展组。根据您的需要修改它。然后在保存或丢弃剑道网格的更改时，我调用以下方法，即 - 在您的代码执行触发分组状态丢失的 grid.refresh() 或grid.dataSource.read() 之前调用它。

```
 function updateExpandedGroupsList() {
    expandedGroups = []; // reset state

    // find the list of group labels adjacent to expanded group icons
    var listOfExpandedGroupsLabels = $("#gridId .k-icon.k-i-collapse~span");
    for (i = 0; i < listOfExpandedGroupsLabels .length; i++) {
        expandedGroups.push(listOfExpandedGroupsLabels [i].innerHTML);
    }
  } 
```

所以我在上述方法中所做的是找到所有指向下方的小扩展箭头的实例，然后找到具有组名称的兄弟跨度，我们需要将其存储在扩展组数组中以供以后使用.

现在我们有了它，您将执行重置网格的操作，并且可能会触发 dataBound 或其他事件。在那段代码中，你有一些东西（比如说）默认折叠所有组。在那里，您需要执行相反的过程：从迭代组控件中查找跨度和组名，并检查它是否在扩展组列表中。如果是，则不要折叠它（或展开它）。

```
 collapseGroups(expandedGroups); 
```

调用折叠组并传递数组后：

```
 // method collapse groups, excluded groups will not be touched
    function collapseGroups(listOfExcludedGroups) {
    var grid = $("#gridId").data("kendoGrid");   
    if (!listOfExcludedGroups) {
        listOfExcludedGroups = [];
    }
        $(".k-grouping-row").each(function () {            
            var groupName = $(this).find("span")[0].innerHTML;
            if (groupName && listOfExcludedGroups.indexOf(groupName) > -1) {
                return; // continue
            }
            grid.collapseGroup(this);
        });   
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T08:13:11.430

首先，您很少需要从代码中调用 refresh。网格（以及所有数据绑定的 Kendo 小部件）正在侦听数据源的更改，并将相应地刷新。

**按照设计，不会**保留组的展开/折叠状态。更改数据源将导致所有组扩展（这是它们的默认状态）。

# ruby-on-rails - 如何仅为移动设备传递 css

> ID：13953280
> 
> 赞同：0
> 
> 时间：2012-12-19T13:17:39.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的网络应用程序中，我想为移动设备和计算机传递差异 css。我怎样才能做到这一点？

例如：

如果有人在计算机上访问我的网站，则通过“screen.css”，当有人在移动设备上访问我的网站时，则通过差异 css“screen1.css”

我怎样才能做到这一点？请帮助我提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:21:16.193

找出媒体查询。这是一种可能性：

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:48:11.457

尝试这个：

在**Javascript**中：

```
<script type="text/javascript">
var mobile_device = 0;
var mobile = (/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()));
if (mobile){ mobile_device = 1; }
</script> 
```

在**HTML**中：

```
<div id="show_this_when_mobile_device" style="display:none;">
   <link rel="stylesheet" href="mobile_css_path" type="text/css">
</div> 
```

在**Javascript**中：

```
if(mobile_dev == 1){$("#show_this_when_mobile_device").show();} 
```

# html - HTML - 以恒定的视图宽度水平滚动表格视图

> ID：13953281
> 
> 赞同：1
> 
> 时间：2012-12-19T13:17:41.243
> 
> 标签：html

我必须创建一个宽度为 800 像素的网页。所以我使用了以下标签，它使视图的宽度为 800。

```
<div style="width:800px"> 
```

这工作正常。

但有时，我必须展示一个有 20 列的表格视图。当我添加占用超过 800 像素的表格视图时，

```
<table border=1> 
```

整个视图正在滚动。

我只想滚动表格，因为视图的宽度固定为 800 像素。

我尝试使用`<table border=1 width=800px>`，但它仍然无法正常工作。

有人可以指出我正确的教程或示例来解决问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:23:25.740

`overflow-x: scroll`在 div / table 上使用

参考**[现场演示](http://jsfiddle.net/SivaCharan/EjQAh/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:30:57.150

您可以将表格放在 div 中，如下所示，并为其设置**overflox-x:scroll**样式。

```
<div style="width:800px; overflow-x:scroll">
  <table>
    // Your table content comes here.
  </table>
</div> 
```

希望，这个对你有帮助！

# iphone - 在 iphone 中将文本从英语翻译成另一种语言

> ID：13953287
> 
> 赞同：0
> 
> 时间：2012-12-19T13:17:45.337
> 
> 标签：iphone, google-translate

我已经使用谷歌 api `"https://www.googleapis.com/language/translate/v2?key=&target=ar&q=hello"`

但它给出了这样的回应

`"error": { "errors": [ { "domain": "usageLimits", "reason": "accessNotConfigured", "message": "Access Not Configured" } ], "code": 403, "message": "Access Not Configured" } }`

我在谷歌群里读到现在已经付费了。是真的吗？如果现在是真的，那有什么选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:23:55.600

是的，谷歌翻译从第 2 版开始就不是免费的了

尝试使用微软翻译[http://www.microsofttranslator.com/dev/](http://www.microsofttranslator.com/dev/)

# asp.net - 母版页加宽和删除边距 RSS

> ID：13953289
> 
> 赞同：-1
> 
> 时间：2012-12-19T13:17:56.727
> 
> 标签：asp.net, css

我有一个在我的 webform 和 webcontrol 上使用的 Masterpage。我在导航窗格的左侧有一个很大的左边距，在右侧有另一个很大的边距。如何降低保证金以最大化所有房地产？

谢谢， 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:21:46.800

尝试在您的页面上应用 css，以更改此元素上当前 css 类的状态。使用 设置 css 类`!important`以覆盖当前的 css 类。

在您的网络表单上，试试这个：

```
<style>

.your_left_column_style {
    margin-left: 10px !important;
}

</style> 
```

# jquery - 类似的 JSON 请求，但一个发送空对象

> ID：13953296
> 
> 赞同：6
> 
> 时间：2012-12-19T13:18:22.483
> 
> 标签：jquery, asp.net-mvc, json

我正在 ASP.NET MVC4 上开发。我的代码中有两个提交 JSON 对象的 JSON 请求。其中一个工作正常，另一个由于某种原因传递了一个空值。有任何想法吗？

注意：在这两种情况下，请求实际上都到达了预期的控制器。只是第二个传递了一个 NULL，而不是我很好填充的对象。

工作的JavaScript：

```
 $('#btnAdd').click(function () {
            var item = {
                Qty: $('#txtQty').val(),
                Rate: $('#txtRate').val(),
                VAT: $('#txtVat').val()
            };

            var obj = JSON.stringify(item);
            $.ajax({
                type: "POST",
                url: "<%:Url.Action("AddToInvoice","Financials")%>",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                data: obj,
                success: function (result) {
                    alert(result);                    
                },
                error: function (error) {
                    //do not add to cart
                    alert("There was an error while adding the item to the invoice."/* + error.responseText*/);
                }
            });
        }); 
```

工作控制器动作：

```
[Authorize(Roles = "edit,admin")]
public ActionResult AddToInvoice(InvoiceItem item)
{
    return Json(item);
} 
```

传递 NULL 对象的 javascript：

```
$('#btnApplyDiscount').click(function () {
            var item = { user: $('#txtAdminUser').val(),password: $('#txtPassword').val(), isvalid: false };

            var obj = JSON.stringify(item);
            alert(obj);
            $.ajax({
                type: "POST",
                url: "<%:Url.Action("IsUserAdmin","Financials")%>",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                data: obj,
                success: function (result) {
                    if (result.isvalid)
                    {
                        //do stuff
                    }
                    else
                    {
                        alert("invalid credentials.");
                    }
                },
                error: function (error) {
                    //do not add to cart
                    alert("Error while verifying user." + error.responseText);
                }
            });

        }); 
```

接收空对象的控制器操作：

```
[Authorize(Roles = "edit,admin")]
    public ActionResult IsUserAdmin(myCredential user)
    {
        //validate our user
        var usercount = (/*some LINQ happening here*/).Count();
        user.isvalid = (usercount>0) ? true : false;
        return Json(user);
    } 
```

更新：发票项目

```
public partial class InvoiceItem
{
    public Guid? id { get; set; }
    public string InvCatCode { get; set; }
    public string Description { get; set; }
    public decimal Amount { get; set; }
    public decimal VAT { get; set; }
    public int Qty { get; set; }
    public decimal Rate { get; set; }
    public Nullable<decimal> DiscountAmount { get; set; }
    public string DiscountComment { get; set; }
    public Nullable<bool> IsNextFinYear { get; set; }
    public Nullable<System.DateTime> ApplicableFinYear { get; set; }
} 
```

我的凭据：

```
public partial class myCredential
{
    public string user     { get; set; }
    public string password { get; set; }
    public bool? isvalid    { get; set; }
} 
```

路线值：

```
public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );

    } 
```

Firebug 显示 item 是 JSON 对象，正如预期的那样。也是一个“字符串化”的对象。调试服务器端代码显示 myCredential 参数为空。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T13:29:23.800

您不需要对对象进行字符串化，因为 jQuery 会为您执行此操作。我的猜测是字符串化（如果这是一个词）正在做的事情正在混淆 ModelBinder。试试这个：

```
var obj = { 
    'user': $('#txtAdminUser').val(), 
    'password': $('#txtPassword').val(), 
    'isvalid': false 
};

$.ajax({
    data: obj,
    // rest of your settings...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:37:59.967

试试这个......出于测试目的：

改变这个：

```
public ActionResult IsUserAdmin(myCredential user) 
```

为了这：

```
public ActionResult IsUserAdmin(myCredential item) 
```

# android - 即使只有一个应用程序，android如何显示“使用完整操作”对话框

> ID：13953298
> 
> 赞同：3
> 
> 时间：2012-12-19T13:18:25.493
> 
> 标签：android

我的申请有一些文件要显示。该活动有一个按钮：“打开方式”。当我单击此按钮时，应显示一些弹出窗口，如“使用完成操作”对话框，以列出支持该文档的应用程序。当我选择适当的应用程序时，应该只显示带有该图标的文档。

我使用了以下代码。如果有多个应用程序支持该文档，它工作正常。但是如果只有一个应用程序，文档是直接打开的，不会弹出。

如何始终显示“使用完整操作”对话框？

```
Intent docViewIntent = new Intent();                
docViewIntent.setAction(Intent.ACTION_VIEW);
File file = new File("/sdcard/docs/myfile.pdf"); 
Uri fileUri = Uri.fromFile(file);
docViewIntent.setDataAndType(fileUri, "application/pdf");
docViewIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
try
{
    Intent chooser = Intent.createChooser(docViewIntent, "Choose application");                     
    startActivity(chooser);
} 
catch (ActivityNotFoundException e)
{
    Toast.makeText(this,  "No Application Available to View file", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:23:53.430

`PackageManager`您必须使用来自和的数据来实现自己的“选择器”式对话框（或以对话框为主题的活动）`queryIntentActivities()`。

从 Android 的角度来看，强迫用户点击作为他们唯一选择的选项没有任何价值，这就是为什么在单个匹配活动的情况下会跳过选择器的原因。

# swing - windowtester 点击所有同名按钮

> ID：13953300
> 
> 赞同：-1
> 
> 时间：2012-12-19T13:18:30.703
> 
> 标签：swing, findall, window-tester

我正在使用窗口测试器，并且我有一个带有三个按钮的向导，其文本相同：“全选”。如果只有一个按钮，我会 ui.click(new JButtonLocator("Select all"));

三个，我试图使用 IWidgetLocator[] allSelectAll = ui.findAll(new JButtonLocator("Select all")); 然后使用 IWidgetLocator 单击其中一个或全部。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T15:28:09.097

您可以为此使用以下构造函数：

`JButtonLocator(String label, int index, SwingWidgetLocator parent)`

指定索引（从零开始）和父窗口小部件（例如 JFrame）：

`ui.click(new JButtonLocator("Select all", 0, new SwingWidgetLocator(JFrame.class)));`

这应该让您单击第一个“全选”按钮。只需更改索引以对其他按钮执行相同操作。

高温高压

# c# - 带有 Include 方法的实体框架

> ID：13953301
> 
> 赞同：1
> 
> 时间：2012-12-19T13:18:34.540
> 
> 标签：c#, linq, entity-framework

我对 Include Method 有问题，给定的场景

表仓库有列

1.  Id--> 唯一标识符和 PK
2.  仓库编号--nvarchar(50)

--更多的列

表仓库链接记录器

1.  Id-->PK,唯一标识符
2.  仓库UniqueId-->(FK,Unique Identifier)，与“仓库”表Id列有关系
3.  地位

仓库模型具有以下代码

```
public class Warehouse
{
    public Warehouse()
    {
        this.WarehouselnkedEcorders = new List<WarehouselnkedEcorder>();
    }
    //Some stuff

    public virtual ICollection<WarehouselnkedEcorder> WarehouselnkedEcorders 
    { get; set; }
} 
```

WarehouselnkedEcOrdeMap 有以下代码

```
 // Relationships
        this.HasOptional(t => t.Warehouse)
            .WithMany(t => t.WarehouselnkedEcorders)
            .HasForeignKey(d => d.warehouseUniqueId); 
```

询问

我需要检索状态 = true 的仓库实体列表。我尝试了以下方式，但无法获得结果。我怎样才能做到这一点？

```
 List<Warehouse> lstObjWarehouse = objWMSContext.Warehouses.Include("WarehouselnkedEcorders").Where(//o=>SomeCondition)
                                                       .Where(o => SomeCondition)
                                                       .Where(o => o.Deleted == false).ToList(); 
```

这里我需要比较“WarehouselnkedEcorder”每一行的status=true的值，它应该返回结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:30:33.070

在查询中使用 Any：

```
List<Warehouse> lstObjWarehouse = db.Warehouses.Include("WarehouselnkedEcorder")
.Where(o => o.invoicePath == "SomeCondition" 
&& o.Deleted == false 
&& o.WarehouselnkedEcorders.Any(p => p.id == o.id 
&& p.Deleted == false)).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:33:05.923

固定匹配 1:many 条件

```
List<Warehouse> lstObjWarehouse =   objWMSContext.Warehouses.Include("WarehouselnkedEcorder")
                    .Where(o => o.somefield == "SomeCondition"
                  &&       o => o.Deleted == false
                  &&       o=>o.WarehouselnkedEcorders.Where(dep=>dep.status==true)
                 .ToList(); 
```

# ruby-on-rails-3 - 什么时候触发 Rails 中的 belongs_to 的触摸？

> ID：13953302
> 
> 赞同：25
> 
> 时间：2012-12-19T13:18:35.120
> 
> 标签：ruby-on-rails-3

我有一个问答应用程序。每次有人添加问题的答案时，我都想更新问题的 updated_at 时间戳。

因此，我在 Answer 模型中使用了触摸。

```
 belongs_to :question, :touch => true 
```

但是，似乎在没有添加答案时时间戳正在更新。我试图弄清楚如何/为什么。这只是在添加此触摸方法后才发生。

所以我想确认何时触发触摸？是否仅在创建、编辑或销毁答案对象时？还有其他活动吗？即在特定情况下不应该仅通过查看答案对象来触发它吗？

我找不到任何可靠的文档来描述 touch 在 belongs_to 关系的上下文中是如何工作的。

这有点令人费解的原因是该应用程序相对简单，并且在提交后不给用户任何编辑或销毁答案的功能。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-19T13:25:01.513

来自：[http ://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

> :touch 如果为 true，则在保存或销毁此记录时，将触摸关联的对象（updated_at/on 属性设置为 now）。如果您指定了一个符号，那么除了 updated_at/on 属性之外，该属性还将使用当前时间进行更新。

`belongs_to :company, :touch => true`

`belongs_to :company, :touch => :employees_last_updated_at`

# java - JavaMail 重复发送的邮件最终进入垃圾邮件文件夹

> ID：13953303
> 
> 赞同：1
> 
> 时间：2012-12-19T13:18:43.613
> 
> 标签：java, jakarta-mail, spam

我正在使用 JavaMail 从 JSP 页面内部发送邮件，如下所示：

```
String from= request.getParameter("from");
String to= request.getParameter("to");
String thanks= request.getParameter("thanks");
String subject= request.getParameter("subject");

try{
    SmtpClient client = new SmtpClient("smtp.example.com");
    client.from(from);
    client.to(to);
    PrintStream message = client.startMessage();
    message.println("From: " + from);
    message.println("To: " + to);
    message.println("Subject: " + subject);
    message.println();
    Enumeration paramNames = request.getParameterNames();

    while(paramNames.hasMoreElements()) {
        String paramName = (String) paramNames.nextElement();
        String paramValue = request.getParameter(paramName);

        if (request.getParameter(paramName) != null && 
            request.getParameter(paramName) != "") {
            message.println(paramName + ": " + paramValue);
            message.println();
        }
    }

    client.closeServer();
}
catch (IOException e){    
    System.out.println("ERROR IN DELIVERING THE FORM:"+e);
} 
```

这首先工作正常并将数据发送到我的收件箱，但经过多次试验和微不足道的更改，现在帖子进入我的垃圾邮件文件夹。

如果有人能告诉我问题出在哪里以及导致此问题的原因，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:51:33.607

这是什么原因造成的？您的垃圾邮件过滤器！

根据您/您的邮件提供商用作垃圾邮件过滤器的内容，您可能会从邮件标头中学到一些东西——我记得 spamassassin 提供了一些关于过滤器得分多高的信息，以及由此产生的垃圾邮件得分。其他人也可能这样做。

如果您将其从垃圾邮件文件夹中删除，您还可以训练您的垃圾邮件过滤器将该邮件识别为非垃圾邮件 (ham)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-10T09:07:51.300

当 Google 发现任何不安全的 IP 或链接时，邮件会进入垃圾邮件，请确保您没有任何其他未经身份验证的 IP（可以通过 https://"IP" 访问）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-31T07:11:43.253

如果有溢出的 emailId，那么大多数时候它都会进入垃圾邮件，它是由谷歌完成的。但是您仍然可以通过谷歌通过以下方法更改该协议：

第一次你需要去你的垃圾邮件并打开邮件然后交叉选项将在邮件上方（这意味着从垃圾邮件中取消该邮件）点击它 [（在屏幕截图中提到：](https://i.stack.imgur.com/E46R4.png)。从下一次开始，它不会去到您的垃圾邮件。

# codeigniter - 在codeigniter中插入活动记录数据库

> ID：13953304
> 
> 赞同：1
> 
> 时间：2012-12-19T13:18:49.213
> 
> 标签：codeigniter, activerecord

我正在做一个项目（使用 codeigniter），我使用了很多 Active record 。

我面临的问题如下：

我收到一组数据，我必须使用以下方法填充几个表：

```
$this->db->insert('db_name', $data); 
```

现在有时 $data 包含表内不可用的元素，所以我必须执行以下操作：

```
unset($data['action']);
unset($data['date']); 
```

在插入之前，或者我只是构建另一个包含特定表的完全相同元素的数组。

```
$arr = array( 'x' => $data['x']) 
```

我之前已经使用过 Kohana，我知道当您使用 ORM 插入时，它只会忽略特定表中不可用的元素。

Codeigniter 中有类似的东西吗？

PS）不使用任何外部库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:04:46.990

CI ActiveRecord 不是 ORM。如果您想将 ORM 与 codeignter 一起使用，您唯一的选择*是*使用第三方库：[http ://datamapper.wanwizard.eu/](http://datamapper.wanwizard.eu/)

您始终可以在将数组发送到数据库之前循环遍历数组并取消设置不包含任何内容的数据（如果实际上轮廓符是一个空元素）：

```
foreach($data as $k => $v){
    if($v == ''){
        unset($data[$k]);
    }
} 
```

否则，您可以创建`switch`意大利面条以根据数据库和发送数据的页面取消设置元素：

```
switch ($page){
    case "page1":
        unset($data['blah']);
    break;
    ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:14:58.987

据我所知，CI 的 Active Record 中不存在这样的内置功能（顺便说一下，它不是 ORM）。

如果手动取消设置数组元素太麻烦，自动过程将如下所示：

```
function my_insert ($table, $data) {
    $query = $this->db->query('SHOW columns FROM '.$table);
    $columns = array();
    foreach ($query->result_array() as $row) {
        $columns[] = $row['Field'];
    }

    foreach ($data AS $key => $value) {
        if (!in_array($key, $columns)) {
            unset($data[$key]);
        }
    }

    $this->db->insert($table, $data);
} 
```

它没有经过测试，可能需要进行一些其他检查，但这应该可以帮助您起飞。

# sql - 在 sql 的聚合函数中捕获空警告

> ID：13953307
> 
> 赞同：14
> 
> 时间：2012-12-19T13:19:05.727
> 
> 标签：sql, sql-server-2008

如何使用 sql 2008 / 2012 中的调试器来捕获记录中的空值？

看：

```
drop table abc

create table abc(
a  int
)
go 
insert into abc values(1)
insert into abc values(null)
insert into abc values(2)

select max(a) from abc

(1 row(s) affected)
Warning: Null value is eliminated by an aggregate or other SET operation. 
```

现在可以通过执行以下操作来纠正：

```
SELECT max(isNull(a,0)) FROM abc 
```

这很好，直到我遇到具有多个嵌套级别的 200 行查询，以及 2000 条奇数记录的结果集。- 然后不知道哪个列正在抛出警告。

如何在 SQL 调试器中添加条件断点（或警告中断）？（如果可能的话）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-25T12:36:48.827

第 1 部分：关于聚合警告...
考虑到您的多个级别嵌套，恐怕没有直接的方法可以查看哪些记录触发了这些警告。

我认为你最好的办法是从顶级语句的 SELECT 部分中删除每个聚合函数，一次一个，然后运行查询，这样你就可以看到哪个聚合在顶层引起警告（如果有的话）

之后，您应该继续进行嵌套查询并将每个提供顶级聚合的子查询移动到单独的窗口并在那里运行它，检查警告。您应该对其他级别的嵌套重复此操作，以找出实际导致警告的原因。

您也可以采用以下方法。

第 2 部分：关于条件断点...
为了调试，您将每个嵌套表移出并将其数据放入临时表。之后，您检查该临时表中的空值。在 IF 语句中设置断点。我相信这是接近条件断点的最好的事情。（可以更改 IF 子句以构建其他条件）

这是一个可靠的例子，
而不是这个：

```
SELECT A.col1, A.col2, SUM(A.col3) as col3
FROM (SELECT X as col1, Y as col2, MAX(Z) as col3 
      FROM (SELECT A as X, B as Y, MIN(C) as Z
            FROM myTableC
           ) as myTableB
     ) as myTableA 
```

做这个：

```
SELECT A as X, B as Y, MIN(C) as Z
INTO #tempTableC
FROM myTableC

IF EXISTS (SELECT * 
           FROM #tempTableC
           WHERE A IS NULL ) BEGIN
     SELECT 'A' --- Breakpoint here
END

SELECT X as col1, Y as col2, MAX(Z) as col3
INTO #tempTableB
FROM #tempTableC

IF EXISTS (SELECT *  
           FROM #tempTableB
           WHERE X IS NULL ) BEGIN
     SELECT 'B' --- Breakpoint here
END

SELECT col1, col2, SUM(col3) as col3 
FROM #tempTableB as myTableA 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:43:40.093

聚合函数根据定义排除空值，因此您可以编写

```
select max (a) from abc 
```

代替

```
SELECT max(isNull(a,0)) FROM abc 
```

除非 abc 中 a 的所有值都为 null，其中第二个查询将返回零而不是 null。

如果要防止输入空值，请对表列使用非空约束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-26T17:06:07.190

您可以通过执行以下命令关闭警告：

```
set ansi_warnings off 
```

这是解释[here](http://msdn.microsoft.com/en-us/library/ms190368%28v=sql.105%29.aspx)。这至少在我测试过的系统上有效，可以在聚合 NULL 值时删除警告。

据说这对将数字溢出和除以 0 转换为 NULL 而不是错误有另一个影响。但是，除以 0 和算术溢出时，我仍然会遇到错误。

顺便说一句，在使用 SQL Server Management Studio 时，很少会看到此消息。查询成功后，消息显示在“消息”选项卡上。但是，SSMS 默认为“结果”选项卡，通常没有理由查看消息（尽管存在警告）。只有在查询中出现错误时才会自动看到警告，并且 SSMS 默认为消息选项卡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T14:12:29.180

您必须编写第二个查询来提取您要查找的数据。

```
SELECT * FROM abc WHERE a IS NULL 
```

您可以将其放入 IF 语句中以写入错误消息或记录到表中。除此之外，你运气不好。对不起。：/

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T10:49:55.607

相反，您可以忽略具有空值的行

```
SELECT MAX(a) FROM abc WHERE a IS NOT NULL 
```

# c++ - Homebrew 公式逐步安装以进行调试

> ID：13953308
> 
> 赞同：7
> 
> 时间：2012-12-19T13:19:14.567
> 
> 标签：c++, macos, homebrew

我想逐步安装公式，从 zip 中获取文件提取的文件夹，运行配置，然后使用公式设置的选项进行 make 和 make install。

当我运行时：

```
brew install -vd formula 
```

它只是显示输出，我想在每个阶段停下来。有可能的 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T18:27:15.250

当安装出现问题时，Homebrew 会自动给你一个检查的机会。因此，要让自己四处游荡，您所要做的就是在您希望的任何时候*强迫*某些事情出错。例如，您可以将其包含在您的公式中：

```
system "false" 
```

Homebrew 将显示一个菜单，询问您想要做什么。选择“shell”选项来检查构建环境。

您也可以尝试[在 Ruby 调试器中](https://stackoverflow.com/q/3955688/33732)[运行该`brew`](https://stackoverflow.com/q/3955688/33732)命令。然后你可以在任何你想要的地方设置断点。

# html - Twitter-Bootstrap：内容重叠粘性页脚

> ID：13953309
> 
> 赞同：5
> 
> 时间：2012-12-19T13:19:15.797
> 
> 标签：html, css, sticky-footer

我的内容与我的页脚重叠（很粘）。但它应该有一个正常的填充顶部。我如何使用 CakePHP（不相关）和 Twitter Bootstrap。在某些页面上它可以工作，而在其他页面上则不行。我怎样才能解决这个问题？

**CSS**

```
body {
    padding-top: 60px;
}
.sidebar-nav {
    padding: 9px 0;
}

html, body {
    height: 100%;
}
footer {
    padding: 17px 0 18px 0;
    border-top: 1px solid #000;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -63px;
}
.push {
    height: 63px;
} 
```

**HTML**

```
<div class="container-fluid wrapper">
    <div class="row-fluid">
        <div class="span11">
            //content
        </div>
    </div>
</div>

<footer class="footer">          
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span8">
            </div>
            <div class="span4">
                <div class="footer-links pull-right>
                  //content
                </div>
            </div>
        </div>
    </div>
    <div class="footer-floor">
        <div class="container-fluid">
                //content
        </div>
    </div>
</footer> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:39:06.400

为了使粘性页脚起作用，您必须为`.push`和设置高度`.footer`。尝试将`63px`高度添加到您的页脚。

```
.push, footer {
height: 63px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-30T17:05:18.603

以某种方式使您的页脚 z-index 超过侧边栏 z-index。

# objective-c - 在 ObjC 中格式化非常大的十进制数字的意外行为

> ID：13953310
> 
> 赞同：6
> 
> 时间：2012-12-19T13:19:22.013
> 
> 标签：objective-c

我在使用 NSNumberFormatter 在 ObjC 中格式化非常大的数字时遇到了意外行为。

无论小数位数如何，数字格式化程序似乎都会在第十五位数之后舍入小数（NSDecimalNumber）。

以下测试在值 1,3 和 5 上失败。

两个请求：

*   任何关于替代代码的建议将不胜感激？
*   我认为问题是由于在 NSNumberFormatter 中使用了硬编码的数字限制而发生的？

[如果出现问题，此处](https://stackoverflow.com/questions/9385783/ios-formatting-decimal-numbers)的帖子列出了没有足够描述的解决方法。此外，我们的应用程序（银行业）在多个国家/地区运行，我们将格式链接到后端配置的用户区域设置。这种解决方法意味着我们编写自己的数字格式化程序来处理要求。我不想做的事情。

```
- (void)testFormatterUsingOnlySDK {
    NSDecimalNumber *value1 = [NSDecimalNumber decimalNumberWithMantissa: 9423372036854775808u exponent:-3 isNegative:YES];
    NSDecimalNumber *value2 = [NSDecimalNumber decimalNumberWithMantissa: 9999999999999990u exponent:-3 isNegative:YES];
    NSDecimalNumber *value3 = [NSDecimalNumber decimalNumberWithMantissa: 9999999999999991u exponent:-3 isNegative:YES];
    NSDecimalNumber *value4 = [NSDecimalNumber decimalNumberWithMantissa: 99999999999999900u exponent:-4 isNegative:YES];
    NSDecimalNumber *value5 = [NSDecimalNumber decimalNumberWithMantissa: 11111111111111110u exponent:-4 isNegative:YES];

    NSNumberFormatter *formatter = [[[NSNumberFormatter alloc] init] autorelease];
    formatter.allowsFloats = YES;
    formatter.maximumFractionDigits = 3;

    [self assertStringAreEqualWithActual:[formatter stringFromNumber:value1] andExpeted: @"-9423372036854775.808"];
    [self assertStringAreEqualWithActual:[formatter stringFromNumber:value2] andExpeted: @"-9999999999999.99"];
    [self assertStringAreEqualWithActual:[formatter stringFromNumber:value3] andExpeted: @"-9999999999999.991"];
    [self assertStringAreEqualWithActual:[formatter stringFromNumber:value4] andExpeted: @"-9999999999999.99"];
    [self assertStringAreEqualWithActual:[formatter stringFromNumber:value5] andExpeted: @"-1111111111111.111"];
}

- (void)assertStringAreEqualWithActual:(NSString *)actual andExpeted:(NSString *)expected {
    STAssertTrue([expected isEqualToString:actual], @"Expected %@ but got %@", expected, actual);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:36:18.250

不幸的是，`NSNumberFormatter`不能与`NSDecimalNumber`. 问题（很可能）是它做的第一件事就是调用`doubleValue`它想要格式化的数字。

另请参阅[NSDecimalNumber 舍入长数字](https://stackoverflow.com/questions/3727142/nsdecimalnumber-round-long-numbers)

经过多次尝试`NSNumberFormatter`，我创建了自己的格式化程序，实际上非常简单：

1.  处理`NaN`。
2.  圆形使用`roundToScale:`
3.  得到`stringValue`
4.  检查是否为负，删除前导`-`
5.  查找小数点 ( `.`)
6.  本地化小数点 ( `[locale objectForKey:NSLocaleDecimalSeparator]`)
7.  添加分组分隔符 ( `[locale objectForKey:NSLocaleGroupingSeparator]`)
8.  如果为负数，则在格式化货币时添加前导`-`或将数字放入括号中。
9.  完毕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:29:36.193

你应该从这个开源代码编译你自己的 NSNumberFormatter，改变前缀。这应该允许您调试格式并了解发生这种情况的原因。在最坏的情况下，您可以向 Apple 提交补丁。

[http://code.google.com/p/cocotron/source/browse/Foundation/NSNumberFormatter.m?r=7542c3a7ef0ef75479e6154a75d304113f5a9738](http://code.google.com/p/cocotron/source/browse/Foundation/NSNumberFormatter.m?r=7542c3a7ef0ef75479e6154a75d304113f5a9738)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:29:39.017

你已经设置`maximumFractionDigits`为两个。所有失败的测试在预期值中都有三个小数位。期望或代码都需要更改以匹配。如果我进行此更改：

```
formatter.maximumFractionDigits = 3; 
```

然后满足您的所有测试用例。

# ios - 当启动多个 UITableViewCell 时，如何停止 UICollectionView 超出界限？

> ID：13953312
> 
> 赞同：2
> 
> 时间：2012-12-19T13:19:30.603
> 
> 标签：ios, uitableview, uicollectionview

我有一个`UITableView`扩展每个单元格的高度并`UICollectionView`在选择单元格时显示一个。但是，当我一个接一个地选择一个 tableCell 并且它们都被扩展时，它可以毫无错误地完成上述所有操作。当`UICollectionView`'s 填充有 Cells 并且每个都有不同数量的项目（因此 James 有 3 个见解而 Tim 有 4 个）时，当我用更少的项目扩展 TableViewCell 然后尝试滚动 Tim's`UICollectionView`时，它超出了界限。这是因为当我启动一个新的集合视图时，它们都采用了`numberOfItemsInSection:`最近创建的`UICollectionView`. 我希望创建的视图能够保持`numberOfItemsInSection:`它最初创建时的状态，而不是所有的都`UICollectionView`采用最新的`numberOfItemsInSection:`. 我希望这是有道理的，但我会粘贴我的代码以便更好地理解我的意思，下面是来自 UITableViewController 的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
leaderboardCell *leaderCell = (leaderboardCell *) [self.tableView cellForRowAtIndexPath:indexPath];
isSelected = ![self cellIsSelected:indexPath];
    if ([self cellIsSelected:indexPath]) {
        [leaderCell.collectionView removeFromSuperview];
        leaderCell.collectionView = nil;
[[NSNotificationCenter defaultCenter] removeObserver:self name:@"PostCellInformation" object:nil];
    } else {
if (isSelected) {
            leaderCell.collectionView = [[UICollectionView alloc] initWithFrame:CGRectMake(320, 65, 322, 200) collectionViewLayout:leaderCell.flowLayout];
            [leaderCell.collectionView registerClass:[userCell class] forCellWithReuseIdentifier:@"userCellID"];
            leaderCell.flowLayout = [[UICollectionViewFlowLayout alloc] init];
            [leaderCell.flowLayout setScrollDirection:UICollectionViewScrollDirectionHorizontal];
            UIColor *collectionViewColour = [UIColor colorWithRed:0.17 green:0.28 blue:0.40 alpha:1.0];
            UIColor *borderColour = [UIColor colorWithRed:0.37 green:0.48 blue:0.60 alpha:1.0];
            [leaderCell.collectionView setBackgroundColor:collectionViewColour];
            [leaderCell.collectionView.layer setBorderColor:[borderColour CGColor]];
            [leaderCell.collectionView.layer setBorderWidth:1.0];
            [leaderCell.collectionView setDataSource:leaderCell];
            [leaderCell.collectionView setDelegate:leaderCell];
            }
 }
// Store cell 'selected' state keyed on indexPath
    NSNumber *selectedIndex = [NSNumber numberWithBool:isSelected];
    [selectedIndexes setObject:selectedIndex forKey:indexPath];

    [self.tableView beginUpdates];
    [self.tableView endUpdates]; 
```

`leaderCell`是`UITableViewCell`包含`UICollectionView`. 我希望将每个`UICollectionView`'s`numberOfItemsInSection:`应用于每个而不是全部。有没有人遇到过类似的问题？提前致谢！

**编辑**我得出的结论是，为了成功实现我想要的，我需要解决的是将数据源分配给正确的对象，但是，我不确定我需要将它分配给什么......我基本上需要数据源分别寻址每个单元格。目前我的数据源设置为 TableViewCell 这应该是正确的，因为它分配给每个单独的单元格......

# php - Ctrl + 键在我的 PHPStorm 应用程序上不起作用

> ID：13953314
> 
> 赞同：12
> 
> 时间：2012-12-19T13:19:38.333
> 
> 标签：php, phpstorm

我正在使用 PHPStorm 开发我的网站。

它的工作非常好。

最近我在这个软件上遇到了一个大问题。

当我使用这个键`Ctrl`+ `A`, `Ctrl`+ `Z`, `Ctrl`+ `V`,...

不要在组合键之上工作。

使用键盘映射时我也遇到了这个错误......

![在此处输入图像描述](../Images/38aecf568ec2e9347173ac175fabc5e6.png)

请给我一个解决方案...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-02T08:14:20.387

只需转到 settings/keymap 并选择**default**而不是*Vim*，无需删除所有设置。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-19T13:23:18.863

卸载**IdeaVim**插件`Settings`| `Plugins`并重新启动 PhpStorm。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-07T11:13:51.473

1.  转到文件 -> 设置 -> 键盘映射（在窗口的左侧）。
2.  将 Keymaps(Drop Down) 值设置为“默认”。完毕。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-07T14:53:13.440

我在 phpstorm 中遇到了这个问题，但在其他基于 java 的 IDE 中没有（Intellij 工作正常）。

如果您有双/多键盘布局，请确保您的第一个键盘布局是英语。出于某种原因，首先使用非 en/us 布局会污染 jvm。

[https://youtrack.jetbrains.com/issue/WI-11716](https://youtrack.jetbrains.com/issue/WI-11716)

我在 linux-3.19.0 上使用 phpstorm-8.0.3 与 gnome-3.14.3 和 java-1.8.0_45

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-15T12:48:31.923

我在 WebStorm 中遇到了同样的问题，快捷键突然停止为我工作。我所要做的就是重新启动 WebStorm。一旦我开始备份，键盘快捷键又开始工作了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-17T17:57:37.267

只需转到`C:\Users\<user>\.WebIde70\config\keymaps`并删除或重命名 Vim.xml 文件。如果您在重新启动 PHPStorm 后仍然有问题并且此处还有任何其他文件，那么对这些文件执行相同的操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-11-19T16:24:53.197

如果您想要像其他代码编辑器一样的常规行为，请执行以下操作：

1.  去; 文件 -> 设置 -> 键盘映射（在窗口左侧）。
2.  将键盘映射（下拉）值设置为“默认”。完毕。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-10T15:30:39.083

卸载**IdeaVim**

要删除配置文件，请转到 ~/.PyChrarm.****(version) 并删除此文件夹**rm -rf ~/.PyChrarm.****(version)**

然后打开 Pycharm 并在没有**IdeaVim**的情况下配置你的 IDE 这行得通！！！

# javascript - 如何在 javascript 中调用窗口子函数？

> ID：13953321
> 
> 赞同：8
> 
> 时间：2012-12-19T13:20:03.160
> 
> 标签：javascript, frames

我正在`window.parent.functionname();`从子页面调用父函数。如何`window.child.function()`从父页面调用子页面。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T13:29:24.927

给你的 iFrame 一个 id 并尝试

```
document.getElementById("iFrameId").contentWindow.functionname() 
```

即使您在同一页面中有多个 iFrame，无论它们的顺序如何，这也有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T13:22:32.980

你有 iframe 吗？

做这样的事情：

```
window.frames[0].contentDocument.functionname(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T13:30:27.127

**父页面**

```
var windowRef = null;

function openChildWindow() {
    if ((windowRef != null) && (windowRef.closed == false)) {
        if (windowRef.closed == false) windowRef.close();
        windowRef = null;
    }

    var windowUrl = 'ChildPage.aspx';
    var windowId = 'NewWindow_' + new Date().getTime();
    var windowFeatures = 'channelmode=no,directories=no,fullscreen=no,' + 'location=no,dependent=yes,menubar=no,resizable=no,scrollbars=yes,' + 'status=no,toolbar=no,titlebar=no,' + 'left=0,top=0,width=400px,height=200px';

    windowRef = window.open(windowUrl, windowId, windowFeatures);

    windowRef.focus();

    // Need to call on a delay to allow
    // the child window to fully load...
    window.setTimeout(callChildWindowFunction(), 1000);
}

function callChildWindowFunction() {
    if ((windowRef != null) && (windowRef.closed == false)) windowRef.childWindowFunction();
}​ 
```

**子页面**

```
function childWindowFunction() {
    alert('Hello from childWindowFunction()');
}​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-04T08:58:48.447

```
var win = null;
function openAndCall(id){
    if (win!=null && win.closed==false){
        win.close();
    }
    win = window.open("/somePage");
    win.onload = function(){
        win.callSome(id);
    };
} 
```

# html - 底部的按钮被切片

> ID：13953324
> 
> 赞同：0
> 
> 时间：2012-12-19T13:20:16.267
> 
> 标签：html, css, button, sass

为什么在底部我的按钮被切片？我需要它在每个角落都被舍入......现在我有了这个： ![在此处输入图像描述](../Images/5a656c444d864f2a488027b4fb7f1c1d.png) 但如果我写到橙色按钮类 css 属性浮动：左，我得到结果，我需要什么......但这是个坏主意。 ![在此处输入图像描述](../Images/c24d28a006e1a02002870e59bfffd853.png) 如何以正常方式进行？

（我也使用 sass+haml）

```
.orange-button{
  padding: 6px;
  @include gradient-background(bottom, $or1, #fbb752); 
  //background: url('button-carbon-bg.png') no-repeat, -webkit-linear-gradient(bottom, $or1, #fbb752);
  @include border-radius(5px, 5px, 5px, 5px);
  //background: transparent url('button-carbon-bg.png') no-repeat;
  border: 1px solid #d27d00;
  font-family: “Myriad Pro”, Arial, Helvetica, Tahoma, sans-serif;
  font-weight: bold;
  font-size: 16px;
  color: $or3;
  text-align: center;
  text-shadow: 0 1px 0 rgba(255, 255, 255, .70);
  font-style: normal;
  @include box-shadow(inset 0 1px 0 rgba(255,255,255,0.5));
  border-bottom:2px solid #B16900;
}
.orange-button:hover{
  @include gradient-background(bottom, #eba641, #fcc97d); 
} 
```

和小提琴：http: [//jsfiddle.net/Zfq73/](http://jsfiddle.net/Zfq73/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T13:25:06.737

如果您不想使用包装器或溢出，另一种解决方案是添加`display: inline-block`到`.orange-button`.

查看更新的小提琴：http: [//jsfiddle.net/Zfq73/2/](http://jsfiddle.net/Zfq73/2/)

PS 我总是喜欢在名为 `.inline-block`and的样式表中添加单独的 css 元素显示类`.block`。

```
 .inline-block {
 display: inline-block;
 }

.block {
display: block;
} 
```

HTML：

```
<button class="orange-button inline-block">only THIS orange button is an inline button!</button> 
```

这样，您可以附加`display: inline-block`或添加`display: block`到单个按钮，而无需制作所有橙色按钮`display: inline-block`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T13:23:53.933

在`.wrapper .center .right`规则上删除`overflow: hidden;`

发生这种情况是因为您的按钮位于元素区域之外（溢出，因此被隐藏）。

**[代码示例](http://jsfiddle.net/Zfq73/3/)**

# java - 如何在 JAVA 中将 JSON 和文件传递给 REST API？

> ID：13953325
> 
> 赞同：7
> 
> 时间：2012-12-19T13:20:15.390
> 
> 标签：java, rest, wcf-rest

我的主要问题是如何传递 JSON 以及 File 以将请求发布到 REST API？Spring框架中需要什么才能作为客户端工作并通过使用JSON和文件传递帖子来等待响应？

选项：

1.  我需要将 FileRepresentation 与 ClientResource 一起使用吗？但是我怎样才能传递文件以及 JSON 呢？
2.  通过使用 RestTemplate 来传递 JSON 和 File？它如何用于发布 JSON 和文件？

还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:25:57.887

听起来像是您试图公开的可怕资源。我的建议是将它们分成 2 个不同的请求。也许 JSON 具有随后被请求的文件的 URI……</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:02:40.863

从 REST(ish) 的角度来看，听起来您传递的资源是[多部分/混合](http://en.wikipedia.org/wiki/MIME#Mixed)内容类型。一种子类型是 application/json，另一种是文件的任何类型。一个或两个都可以是base64编码的。

您可能需要编写特定的提供程序来序列化/反序列化这些数据。根据特定的 REST 框架，[本文](http://bill.burkecentral.com/2008/10/23/jax-rs-multipart-support-with-resteasy/)可能会有所帮助。

另一种方法是创建一个封装 json 和文件数据的类。然后，编写特定于该类的提供程序。您可以选择为其创建一个新的内容类型，例如“application/x-combo-file-json”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-20T07:55:57.040

你基本上有三个选择：

1.  Base64 对文件进行编码，代价是数据大小增加了大约 33%。
2.  首先在 multipart/form-data POST 中发送文件，然后将 ID 返回给客户端。然后客户端发送带有 ID 的元数据，服务器重新关联文件和元数据。
3.  先发送元数据，然后返回一个 ID 给客户端。然后客户端发送带有 ID 的文件，服务器重新关联文件和元数据。

# c# - 比较三个数组并显示差异

> ID：13953328
> 
> 赞同：-1
> 
> 时间：2012-12-19T13:20:42.823
> 
> 标签：c#, .net, arrays, string, comparison

> **可能重复：**
> [比较两个列表的差异](https://stackoverflow.com/questions/675699/compare-two-lists-for-differences)

我有以下一组数组

```
string[] arr1 = { 1155717, 5184305, 2531291, 1676341, 1916805 ... } 
string[] arr2 = { 1155717, 1440230, 2531291, 8178626, 1916805 ... }
string[] arr3 = { 1155717, 5184305, 4025514, 1676341, ... } 
```

数组计数以百万计，也可以包含字符。我想在 csv 中创建这样的报告

```
diff.csv

arr1,arr2,arr3
1155717,1155717,1155717
5184305,--N/A--,5184305
--N/A--,1440230,--N/A--
--N/A--,--N/A--,4025514
1676341,--N/A--,1676341
--N/A--,8178626,--N/A--
1916805,1916805,--N/A-- 
```

我想在每个和比较中申请循环并不是那么好的方法。有什么想法吗？
我错过了几件事：
1.订单无关紧要。
2\. 单个列表中的元素将是唯一的。
3\. 我计划尽可能地跳过循环并在 LINQ/Generics 中寻找 .NET 3.5 / 4.0 的新功能，我可以在这里应用！

**对于那些投反对票或结束这个问题的人，请解释一下？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:42:39.977

我用 int 类型的数组做了一个小例子，但这可以应用于字符串

```
 int[] arr1 = { 1155717, 5184305, 2531291, 1676341, 1916805 } ;
        int[] arr2 = { 1155717, 1440230, 2531291, 8178626, 1916805 };
        int[] arr3 = { 1155717, 5184305, 4025514, 1676341 };

        foreach (int i in arr1)
        {
            Console.Write(i + "  ");
            foreach (int b in arr2)
            {
                if (i == b)
                    Console.Write(b + "  ");

            }
            foreach (int c in arr3)
            {
                if (i == c)
                    Console.Write(c + "  ");
            }
            Console.WriteLine();
        }
        Console.ReadLine(); 
```

唯一的问题是您在循环中使用循环，因此如果您的数组很大，那么您的性能将受到影响。这只是一个让你思考的简单想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:50:53.837

您可以使用此 Linq 查询和`string.Join`：

```
string[][] all = new[] { arr1, arr2, arr3 };
int maxLength = all.Max(arr => arr.Length);
string separator = ",";
string defaultValue = "N/A";

var csvFields = all.Select(arr => Enumerable.Range(0, maxLength)
                   .Select(i => arr.Length <= i ? defaultValue : arr[i]));
string csv = string.Join(Environment.NewLine, 
                        csvFields.Select(f => string.Join(separator, f)));
File.WriteAllText(path, csv); 
```

[**演示**](http://ideone.com/jZ4l52)

我将所有数组放在一个锯齿状数组中。然后我使用一个`int`范围作为起点（样本中的 0-4，因为最大的数组有 5 个元素）。然后我从每个数组中获取 5 个元素，`"N/A"`如果数组小于该索引，则使用默认值。

最后一个阶段是使用分隔符 ( )链接每个数组*的*`string.Join`所有部分，并使用.`","`*`Environment.NewLine`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T14:00:01.817

我会在 O(4N) 或其他情况下做这样的事情，但也许有人知道更快的方法。

```
private void PrintDiff()
{
        public Dictionary<string, Model> dictionary = new Dictionary<string, Model>();

        foreach (var entry in Array1)
        {
            dictionary.Add(entry, (new Model()).Add(entry, "Array1"));
        }
        foreach (var entry in Array2)
        {
            if (!dictionary.ContainsValue(entry))
                 dictionary.Add(entry, (new Model()).Add(entry, "Array2"));
        }
        foreach (var entry in Array3)
        {
            if (!dictionary.ContainsValue(entry))
                 dictionary.Add(entry, (new Model()).Add(entry, "Array3"));
        }

        //now print 
        foreach (var model in dictionary)
        {
            model.ToString();
        }
    }

public class Model
{

    public Model()
    {
        Dictionary = new Dictionary<string, string>();
    }

    private Dictionary<string, string> Dictionary
    {
        get;
        set;
    }

    public bool ContainsEntry(string entry)
    {
        return Dictionary.ContainsValue(entry);
    }

    public void Add(string entry, string arrayName)
    {
        Dictionary.Add(arrayName, entry);
    }

    public override string ToString()
    {
        return "FORMATED AS YOU WANT THEM";
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T14:02:13.377

您可以使用 linq 到 GroupJoin：

```
string[] arr1 = { "1155717", "5184305", "2531291", "1676341", "1916805" };
string[] arr2 = { "1155717", "1440230", "2531291", "8178626", "1916805" };
string[] arr3 = { "1155717", "5184305", "4025514", "1676341" };

var allPossibleTerms = arr1.Union(arr2).Union(arr3);

allPossibleTerms
    .GroupJoin(arr1, all => all, a1 => a1, (all, a1) => new { Number = all, A1 = a1 })
    .SelectMany(joined => joined.A1.DefaultIfEmpty(), (collection, result) => new { collection.Number, A1 = result})
    .GroupJoin(arr2, joined => joined.Number, a2 => a2, (collection, a2) => new { Number = collection.Number, A1 = collection.A1, A2 = a2 })
    .SelectMany(joined => joined.A2.DefaultIfEmpty(), (collection, result) => new { collection.Number, A1 = collection.A1, A2 = result})
    .GroupJoin(arr3, joined => joined.Number, a3 => a3, (collection, a3) => new { Number = collection.Number, A1 = collection.A1, A2 = collection.A2, A3 = a3 })
    .SelectMany(joined => joined.A3.DefaultIfEmpty(), (collection, result) => new { collection.Number, A1 = collection.A1, A2 = collection.A2, A3 = result});; 
```

基本上，这会创建所有术语的主列表，并随时加入每个数组。

```
╔══════════════════════════════════════╗
║ Number   A1       A2       A3        ║
╠══════════════════════════════════════╣
║ 1155717  1155717  1155717  1155717   ║
║ 5184305  5184305  -------  5184305   ║
║ 2531291  2531291  2531291  -------   ║
║ 1676341  1676341  -------  1676341   ║
║ 1916805  1916805  1916805  -------   ║
║ 1440230  -------  1440230  -------   ║
║ 8178626  -------  8178626  -------   ║
║ 4025514  -------  -------  4025514   ║
╚══════════════════════════════════════╝ 
```*

# wpf - 如何访问 WPF 类库中的资源字典？

> ID：13953329
> 
> 赞同：3
> 
> 时间：2012-12-19T13:20:42.247
> 
> 标签：wpf, resourcedictionary, class-library

这是场景。我有一个 WPF 项目 A，它是启动项目。以及一个包含视图和图像的类库 B。A 和 B 都有图像。我已将它们设置为资源。在 ai 中，我使用合并的资源字典在 App.xaml 中声明了我的 A 资源。

现在我想在 B 中声明一个资源字典并在 B 中定义的视图中使用资源。请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:46:07.227

查看[Pack URI Syntax](http://msdn.microsoft.com/en-us/library/aa970069.aspx)以创建对位于单独程序集中的 XAML 资源的引用。

# linux - 跟踪后台进程的PID并将其与进程名称一起存储在linux中

> ID：13953330
> 
> 赞同：1
> 
> 时间：2012-12-19T13:20:46.253
> 
> 标签：linux, shell, centos

我想保存后台进程的 PID 并将其与 linux 中的进程名称一起保存到文件中。这样做的命令是什么？有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:22:52.107

我不确定你所说的“进程名称”是什么，但在 Bourne shell 中，你可以通过 shell 变量获得后台进程的 PID `$!`。例如：

```
sleep 1000 &
echo "$! sleep 1000" >>/tmp/save_file.txt 
```

# asp.net-mvc - kendoui 网格仅使用创建（不删除或更新）

> ID：13953341
> 
> 赞同：1
> 
> 时间：2012-12-19T13:21:34.897
> 
> 标签：asp.net-mvc, grid, kendo-ui

```
$("#grid").kendoGrid({
            dataSource: {
                transport: {
                    read: function(options) {
                        $.ajax( {
                            url: "/api/mygetfunction",
                            data: options.data,
                            success: function(result) {
                                options.success(result);
                            }
                        });
                    },
                    update: function (options) {
                        $.ajax({
                            url: "/api/myupdatefunction",
                            data: options.data,
                            success: function (result) {
                                options.success(result);
                            }
                        });
                    },
                    destroy: function (options) {
                        $.ajax({
                            url: "/api/mydestroyfunction",
                            data: options.data, 
                            success: function (result) {
                                options.success(result);
                            }
                        });
                    },
                    create: function (options) {
                        $.ajax({
                            url: "/api/mycreatefunction",
                            type: 'POST',
                            data: ...
                        });
                    },
                    parameterMap: function (options, operation) {
                        if (operation !== "read") {
                            return JSON.stringify(options);
                        }
                    }
                },
                schema: {
                    id: "Id",
                    model: {
                        fields: {
                            Id: { type: "string" },
                            Description: { type: "string" }
                        }
                    }
                },
                pageSize: 10,
                serverPaging: false,
                serverFiltering: false,
                serverSorting: false,
                batch: false
            },
            toolbar: ["create"],
            filterable: true,
            sortable: true,
            pageable: true,
            columns: [
                 {
                    field: "Description",
                    title: "Description"
                 },
                 { command: ["edit", "destroy"], title: "&nbsp;", width: "210px" }
            ],
            editable: "inline"
        }); 
```

网格有 3 行。当我单击编辑时，我更改了描述列。然后我单击更新，网格会调用传输配置的“创建”。我已将批处理设置为 false，奇怪的是，有 3 个创建而不是更改的行。

编辑网格导致创建而不是更新的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T08:11:16.077

如果您的记录没有`Id`正确设置字段，则可能会发生这种情况。数据源认为所有没有 id 的记录都是“新的”。

# ruby-on-rails - 设计中的令牌认证

> ID：13953344
> 
> 赞同：0
> 
> 时间：2012-12-19T13:21:51.883
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2

我是 Rails 世界的初学者。有人可以像我2岁一样向我解释一下。令牌认证到底是做什么的？从安全的角度来看，它是推荐给您的应用程序，还是没有它就可以了？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:28:46.627

令牌身份验证通常用于在您的电子邮件中创建自动登录链接。

用户点击[http://example.com/some_page?auth_token=some-very-secret-token 之](http://example.com/some_page?auth_token=some-very-secret-token)类的链接，其中包含令牌并由令牌值识别。

因此，例如，无需记住密码即可取消订阅您的站点电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:37:32.293

安全令牌在 2 因素/多因素解决方案中提供“你所拥有的”组件。

就像和一个两岁的孩子说话一样，

你想进屋。您需要一个“密钥”——系统可以用来识别您的令牌。

# reporting-services - SQL Server 报告服务母版页

> ID：13953345
> 
> 赞同：1
> 
> 时间：2012-12-19T13:21:55.803
> 
> 标签：reporting-services, birt

如何在 SSRS 中创建母版页？你有什么想法吗？我在 BIRT 中创建了粘贴页面，但在 SSRS 中找不到

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:30:45.340

我认为你能得到的最接近的是定义一个报告并将其用作每个报告标题中的子报告。然后，您可以在此报告中使用共同值（执行时间、公司图像和文本等），并将其包含在所有其他值中。

你到底想完成什么？

# c - Arduino EthernetServer read() 仅在初始化 Serial 并打印读取字符时有效

> ID：13953346
> 
> 赞同：4
> 
> 时间：2012-12-19T13:21:56.060
> 
> 标签：c, embedded, serial-port, arduino, ethernet

我有一个 Arduino 项目，我从网络服务器读取数据。

我有一个`EthernetClient`在回调函数中逐字符读取数据的方法。

我的工作代码看起来像（只有相关部分）：

```
void setup() {
  Serial.begin(9600);
  ...
}

void loop() {
  char* processedData = processData(callback); // this is in a external lib
}

boolean callback(char* buffer, int& i) {
  ...

  if (Client.available()) {
    char c      = client.read();
    buffer[i++] = c;

    Serial.print(c);
  }

  ...
} 
```

这可以正常工作（读取和处理数据），但是当我删除它`Serial.begin(9600);`并`Serial.print(c);`停止工作并且我不知道为什么？唯一改变的`char c`是没有打印。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:49:58.583

当看似无关的代码被更改时，回调函数改变其行为的一个常见原因是与优化器相关的错误。

许多嵌入式编译器无法理解回调函数（或中断服务例程）将在程序中被调用。他们看不到对该函数的显式调用，然后假设它从未被调用过。

当编译器做出这样的假设时，它会优化被回调函数改变的变量，因为它看不到变量在初始化点和访问点之间被程序改变了。

```
// Bad practice example:

int x; 

void main (void)
{
  x=5;
  ...

  if(x == 0) /* this whole if statement will get optimized away, 
                the compiler assumes that x has never been changed. */
  {
    do_stuff();
  }
}

void callback (void)
{
  x = 0;
} 
```

当这个错误发生时，几乎不可能找到它，它可能会导致任何奇怪的症状。

解决方案是*始终*将 main() 和中断/回调/线程之间共享的所有文件范围（“全局”）变量声明为`volatile`. 这使得编译器不可能做出不正确的优化器假设。

* * *

（请注意，该`volatile`关键字不能用于实现同步，也不保证任何内存屏障。*这个答案与此类问题没有丝毫关系！*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:44:08.820

一个猜测：因为没有启动串行驱动程序，没有数据要处理，因此你的回调没有命中。

您希望串行回调在没有数据的情况下做什么？

提供更多信息可能`Client`会`processData`有所帮助。

# html - 如何将来自我的 RSS 提要的谷歌日历条目的链接重定向到另一个网页？

> ID：13953352
> 
> 赞同：0
> 
> 时间：2012-12-19T13:22:11.290
> 
> 标签：html, url, redirect, iframe

我有一个 RSS 提要，由 RSS Pump 从我的 Google 日历中绘制内容提供支持。现在它通过使用一些带有“iframe”的HTML来做到这一点，我想知道如何将RSS新闻项目上的所有链接重定向到另一个网页，而不是谷歌日历条目。我需要在它周围放置一些特殊代码来重定向它吗？这是代码：

```
<iframe src="http://s1.rsspump.com/rss.aspx?s=e0431bb0-cd2b-4f8f-ab47-619c3d841bab&amp;speed=1&amp;t=0&amp;d=0&amp;u=0&amp;p=1&amp;b=0&amp;ic=5&amp;font=Verdana&amp;fontsize=12px&amp;bgcolor=&amp;color=000000&amp;type=typewriter&amp;su=0&amp;sub=0&amp;sw=0" frameborder="0" width="100%" height="18" scrolling="no" allowtransparency="true"></iframe>
<noframes>
  <div style="background-color: none transparent;">
    <a href="http://news.rsspump.com/" title="Latest News">News</a>
  </div>
</noframes> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:28:39.873

数据位于 iframe 中，从另一个域加载，不受您的控制。您无法更改链接的去向（否则会带来可怕的安全风险）。

# android - HTML5 - 安卓屏幕尺寸

> ID：13953359
> 
> 赞同：3
> 
> 时间：2012-12-19T13:22:31.010
> 
> 标签：android, jquery, html, jquery-mobile, screen

我正在使用 jquery mobile 为 android 手机（HTML 5）创建一个网络应用程序。只是想知道我的页面宽度和长度应该是多少，以便它适合所有具有不同屏幕分辨率的手机。

请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:30:01.313

看看这篇文章：[http](http://dev.opera.com/articles/view/an-introduction-to-meta-viewport-and-viewport/) ://dev.opera.com/articles/view/an-introduction-to-meta-viewport-and-viewport/ 。在那里，您将找到有关 HTML 视口元标记以及如何使用分辨率处理的所有信息。

标记示例：

```
<meta name="viewport" content="width=device-width, height=device-height"> 
```

您还想查看 css 媒体语法，它将帮助您更好地适应您的内容做不同的分辨率。

然后是这篇关于布局优化的文章：[http](http://www.slideshare.net/andreasbovens/optimizing-your-layout-for-phones-and-tablets-using-viewport-and-media-queries) ://www.slideshare.net/andreasbovens/optimizing-your-layout-for-phones-and-tablets-using-viewport-and-media-queries 。这是一个很好的演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:25:06.177

使用[Twitter BootStrap](http://twitter.github.com/bootstrap/)设计您的 html5 页面，其中定义的 css 将处理所有屏幕尺寸。

检查[这个](http://twitter.github.com/bootstrap/scaffolding.html)

# spring - 规范化 Spring 资源以与 JUnit 和战争一起使用？

> ID：13953361
> 
> 赞同：1
> 
> 时间：2012-12-19T13:22:37.137
> 
> 标签：spring

我可能想错了，但这就是我所反对的：

我将 Spring Resource 对象注入到我的应用程序中，这些对象为我提供了安全证书的位置，例如：`<property name="certificateResource" value="SomeCert.p12" />`where certificateResource is of type`org.springframework.core.io.Resource`

在 JUnit 下运行 Resource 是一个类路径资源，一切都很好。当在 Tomcat 下部署为战争时，资源位于 Servlet 上下文中，并且需要`WEB-INF/classes/`预先添加到证书中。

我尝试了许多资源前缀和通配符组合，但无法找到满足两种上下文的单个字符串。到目前为止，“解决方案”是覆盖`src/test/resources/test-applicationContext.xm`l 中的 bean 定义，但这意味着在两个位置维护字符串。

任何指向更好解决方案的指针将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:19:20.833

我尝试使用 spring-test 和 spring-webmvc 并使用 xml 配置中引用的资源制作一个小但描述性的应用程序，而这些 xml 被生产和测试 spring 配置重用。这是我收到的：[github.com/isopov/spring-resource-test](https://github.com/isopov/spring-resource-test)

中心是来自测试配置的 prodcution xml 配置的引用：

```
<import resource="file:src/main/webapp/WEB-INF/applicationContext.xml" /> 
```

也可以不从另一个导入一个 xml，但给每个测试几个配置：

```
@ContextConfiguration(locations = { "classpath:test-applicationContext.xml",
                       "file:src/main/webapp/WEB-INF/applicationContext.xml" }) 
```

资源本身位于`src/main/resources`（我假设您使用的是 Maven 或从“标准目录布局”派生的东西），因此始终可以`"classpath:hello.txt"`从任何 spring 配置中访问。

我使用 Maven 构建测试了这个，作为 Web 应用程序并在 Eclipse 中运行 UT。

# oauth - MVC 4 中带有自定义 oauth 提供程序的 OAuth

> ID：13953370
> 
> 赞同：7
> 
> 时间：2012-12-19T13:23:07.320
> 
> 标签：oauth, asp.net-mvc-4, trello

我正在 MVC 4 中编写一个简单的 Web 应用程序，我想[使用 Trello 进行 OAuth，](https://trello.com/docs/gettingstarted/oauth.html)以便我可以要求用户使用他们的 trello 详细信息登录，然后查看他们的一些卡片。

任何人都可以提供有关创建自定义 oauth 提供程序以支持非开箱即用 oauth 提供程序的信息吗？从我所见，我*认为*我需要创建一个自定义 Oauth 提供程序（子类`IAuthenticationClient`并使用它） - 对吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T01:54:07.837

好的，自从我发表评论以来，我花了 11 个小时为 SO 编写自定义 oAuth 类。明天我要做一名销售人员。我不兴奋。

这是我所做的：

1.  为您预期的 Json/Xml 创建一个 DataContract 类。我继续实现了 SO 返回的所有内容，但如果您只是进行授权，您可能可以将其缩减为 ID 和 DisplayName。

2.  创建一个从 DotNetOpenAuth.AspNet.Clients 扩展 OAuth2Client 的类。使用[DotNetOpenAuth GitHub 页面](https://github.com/DotNetOpenAuth/DotNetOpenAuth)获取示例。这是最长、最痛苦的一步，尤其是当您的 json 序列化已生锈时。

3.  打开`/App_Start/AuthConfig.cs`并输入该部分`OAuthWebSecurity.RegisterClient(new YourClass(Your, Initalization, Params), "The Name You Want to Show Up On Your oAuth Login Button", ExtraDataIfYouNeedIt;`的某处。`RegisterAuth()`我还没有确定 ExtraData 参数的用途，但在我的情况下我不需要它。希望你不需要它。

编辑：更新了 github 链接。

# php - 验证失败，即使密码正确，使用 bcrypt 哈希方法

> ID：13953381
> 
> 赞同：0
> 
> 时间：2012-12-19T13:23:30.403
> 
> 标签：php, mysql, login, bcrypt

我遇到了**bcrypt** hash method 和**mysql**的问题。我正在使用[这个答案](https://stackoverflow.com/a/6337021/1338292)`Bcrypt`中的课程。

我正在创建登录脚本并检查密码是否正确。我正在比较来自输入的密码和来自数据库的哈希密码。

```
$username= $_POST['username']; //username from input
$pass= $_POST['pass'];         //username from input

$query= mysql_query("SELECT pass FROM users WHERE username='$username'");
    $row=  mysql_fetch_row($query);

$row[0];// hashed password, I echo $row[0] and it shows correct hashed password

$bcrypt = new Bcrypt(15);
$isGood = $bcrypt->verify($pass, $row[0]);

if ($isGood){
echo "Authentication succeeded";
          }
else { 
    echo"Authentication failed";
   } 
```

即使 $pass 是正确的，我总是得到“身份验证失败”。任何想法，有什么问题？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:23:52.420

表中的`pass`列`users`不够宽，无法存储完整的哈希；它应该至少有 60 个字符宽，即`VARCHAR(60)`.

顺便说一句，您还应该查看由[ircmaxell](https://stackoverflow.com/users/338665/ircmaxell)编写和维护的[PasswordLib](https://github.com/ircmaxell/PHP-PasswordLib)，它也很好地支持 Bcrypt。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:38:19.640

尝试这样的事情：

```
$bcrypt = new Bcrypt(15);
$hash = $bcrypt->hash($pass);

echo $hash.' =? '.$row[0]; 
```

看看它是否相等

如果是，请尝试以下操作：

```
var_dump($hash);
var_dump($row[0]); 
```

必须相等

# java - 在 java/android 中解析文件

> ID：13953384
> 
> 赞同：-1
> 
> 时间：2012-12-19T13:23:39.753
> 
> 标签：java

我有一个文本文件，如下所示

```
Title - Welcome to the Dibb
Date - 13/03/11
Information - Hello and welcome to our website.

Title - Welcome to student room
Date - 06/05/11
Information - Hello and welcome to the student room. We are a online forum that allows previous and current students to ask questions. 
```

我需要解析这个文本文件并保存标题行、日期行等内容，其余内容将保存为信息。我知道如何读取文件并将完整文件保存为字符串，但我一直在获取选择信息。

**代码**

这是我用来读取文本文件的代码

```
helloTxt.setText(readTxt());

}

private String readTxt() {

    InputStream inputStream = getResources().openRawResource(R.raw.pages);

    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

    int i;
    try {
        i = inputStream.read();
        while (i != -1) {
            byteArrayOutputStream.write(i);
            i = inputStream.read();
        }
        inputStream.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    String str = byteArrayOutputStream.toString();

    return str;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:25:56.020

逐行读取文件

```
BufferedReader br = new BufferedReader(new FileReader(file));
String line;
while ((line = br.readLine()) != null) {
   // process the line.
}
br.close(); 
```

如果您可以保证每行最多有一个，`-`那么您可以使用以下模式。

```
String[] tokens = line.split("\s-\s"); 
```

对于这条线

> 标题 - 欢迎来到 Dibb

它会给你

```
tokens[0] = "Title";
tokens[1] = "Welcome to the Dibb"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:51:53.763

我尝试编写一些可以帮助您解决问题的类

```
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.List;

public class Test4 {

    private List<Information> parser(String data) {

        List<Information> informations = new ArrayList<Information>();
        String blocks[] = data.split("\n\r");

        for(String block : blocks) {
            String[] lines = block.split("\n");
            Information information = new Information();
            information.setTitle((lines[0].split("-"))[1].trim());
            information.setDate((lines[1].split("-"))[1].trim());
            information.setInfo((lines[2].split("-"))[1].trim());
            informations.add(information);
        }

        return informations;
    }

    private  void runner() throws IOException {
        InputStream inputStream = getClass().getResourceAsStream("input.txt");
        String input = "";
        int cc;
        while((cc = inputStream.read()) != -1) {
            input += (char) cc;
        }

        List<Information> informations = parser(input);
        for(Information information : informations) {
            System.out.println(information);
        }

    }

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        Test4 test4 = new Test4();
        test4.runner();
    }

    class Information {

        private String title;

        private String date;

        private String info;

        public String getTitle() {
            return title;
        }

        public void setTitle(String title) {
            this.title = title;
        }

        public String getDate() {
            return date;
        }

        public void setDate(String date) {
            this.date = date;
        }

        public String getInfo() {
            return info;
        }

        public void setInfo(String info) {
            this.info = info;
        }

        @Override
        public String toString() {
            return "Information [" + (title != null ? "title=" + title + ", " : "")
                    + (date != null ? "date=" + date + ", " : "") + (info != null ? "info=" + info : "") + "]";
        }

    }

} 
```

# html - HTML - 带有图像和文本的表格

> ID：13953387
> 
> 赞同：-1
> 
> 时间：2012-12-19T13:23:52.110
> 
> 标签：html, image, html-table

我有一个网页，其中有一个只有 2 行和 1 列的表格。第一行将显示动态图像，第二行将显示与图像相关的标题。

我想按原样显示图像而不会失真，因此我没有为此指定 andy 的高度和宽度。

现在，如果标题文本长度更长，则行宽将大于图像行宽。我想要的是，我想在不增加行宽的情况下以多行显示标题。因此该图像及其标题行的宽度相同。

有什么解决方案吗....我是 HTML 新手，无法找到解决此问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:25:01.853

这真的不是我会做的事情，但是呃......

如果您知道希望行有多大，请尝试为表格行添加样式，例如...

```
<tr style="height:300px" ... 
```

这样，他们将保持相同的高度。但是如果你想要它动态，那么我能想到的唯一方法是使用 JavaScript 来计算图像的高度，然后适当地调整表格行样式。使用 jQuery，您可以执行类似...

```
var img_height = $('table img').height();
$('table tr').height(img_height); 
```

（也就是说只有一张桌子，里面有一张img。你可能需要适当调整这段代码，这只是一个例子！）

**编辑：**如果标题可能大于图像...

首先，给标题行一个类，`caption`给你的图像行一个类`image`，然后使用下面的 jQuery 代码：

```
var img_height = $('.image').height();
var caption_height = $('.caption:first').height();

if (img_height > caption_height) {
    $('.caption').height(img_height);
} else {
    $('.image').height(caption_height);
} 
```

也许阅读以下内容以了解如何使用 jQuery 代码：[http ://docs.jquery.com/Tutorials:Getting_Started_with_jQuery](http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:32:50.100

试试这个：

```
<table>
  <tr><td> ...image goes here...</td></tr>
  <tr><td style="width:1px">
    Caption!      
  </td></tr>
 </table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T14:58:51.360

使用这个给表格一个固定的像素或动态图像的宽度。这会有所帮助。not caption 不应该是没有空格的单词，比如这个 mmmmmmmm。它会自动变成多行

```
<table>
  <tr><td> ...image goes here...</td></tr>
  <tr><td style="width:1px">
    Caption!      
  </td></tr>
 </table> 
```

# eclipse - 将 .java 文件导入正确的包中

> ID：13953400
> 
> 赞同：17
> 
> 时间：2012-12-19T13:24:43.430
> 
> 标签：eclipse, package

我有一堆`*.java`源文件，其中包含各种包中的类。我正在尝试将所有这些文件导入 Eclipse 项目，但 Eclipse 总是将它们放在默认包中。

**如何告诉 Eclipse 将每个文件放在适当的包子目录中，这样我就不必手动创建所有各种包？**

我已经尝试过从*文件系统*功能导入以及将文件复制到项目中，所有这些都会将文件放在`default`包中，而不是在`package`每个文件顶部的语句中明确说明的那些。

相关的 SO 问题仅涉及在项目[目录层次结构](https://stackoverflow.com/questions/10910160/source-folder-is-not-on-the-java-build-class-path-creating-java-package)[之外引用包`src`](https://stackoverflow.com/questions/10910160/source-folder-is-not-on-the-java-build-class-path-creating-java-package)、在合适的包目录中[手动创建文件](https://stackoverflow.com/questions/6997524/the-declared-package-does-not-match-the-expected-package)、[缺少`import`语句](https://stackoverflow.com/questions/2681161/how-to-import-a-package-from-eclipse)或[批量重命名包](https://stackoverflow.com/questions/11047841/how-to-add-prefix-to-package-names)，但似乎还没有讨论过这个问题。

**更新：**根据评论中的要求，这里有一些示例文件：

测试1.java

```
package some.random.pkg;

public class Test1 {
} 
```

Test2.java

```
package some.other.pkg;

public class Test2 {
} 
```

Test3.java

```
package yet.another.pkg;

public class Test3 {
} 
```

将它们全部放在同一个目录中，然后尝试将它们导入 Eclipse 中的 Java 项目，而无需手动为各种包创建目录。

**更新 2：**为了澄清规模，假设实际上每周大约有 100 个这样的文件（当然，内容更多;-)），这就是我寻找自动化解决方案的原因。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T18:00:39.063

我有点无聊，所以我创建了一个 Java 应用程序来从它的当前工作文件夹中获取所有 .java 文件并将它们放在适当的子文件夹中。

然后，您可以将新创建​​的文件夹/文件复制/粘贴到 Eclipse 中。

源代码和可运行的.jar：[https ://github.com/felipeweber/OrganizeJavaSources](https://github.com/felipeweber/OrganizeJavaSources)

要执行它，您需要将可运行的 .jar 复制/粘贴到您拥有所有 .java 文件的文件夹中，然后使用 java -jar OrganizeJavaSources.jar 从提示符或命令行运行它。它应该适用于 Linux 和 Windows（也可能是 MacOS）。

在我的测试中，它与健全的文件完美配合。请注意，我没有做任何错误处理，所以第四，但随时贡献。

祝你好运

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T09:59:18.873

好吧，我们是这里的程序员，对吧？到目前为止，我进行了一项研究，在任何 IDE 中都很难找到这种功能，因为必须警告程序员他将 java 文件放在不正确的包中，并且不能自动为程序员安排它。

好吧，我建议您创建一个简单的 java 控制台程序，它可以为您进行文件操作，我知道这对您来说很容易。这将是程序的可能算法

1.  读取 .java 文件
2.  检查该行，直到该.java 文件上`package`的终止符`;`
3.  根据包名称重新定位该文件，`.`用目录分隔符替换可以用作您将重新定位文件的地址。
4.  如果文件的重定位文件夹不存在，则创建文件夹
5.  重复执行此操作，直到重新定位所有文件。

好吧，我不仅希望在 Eclipse 中而且在其他 IDE 上也希望这种功能，我将等待这个问题的进一步答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T11:40:41.893

根据此[链接](http://ubuntuforums.org/showthread.php?t=738544)，您可以获得您真正想要做的事情。

文件 -> 新建项目/动态 Web 项目

然后

文件 -> 新建文件夹，单击“高级”并选择“链接到文件系统中的文件夹”。

之后右键单击该文件夹并选择 BuildPath -> 用作源文件夹..就是这样..

或者

您可以创建一个新文件夹，复制包含 *.java 文件的最顶层文件夹并将其粘贴。然后右键单击它，选择 BuildPath -> 用作源文件夹...

我希望这个对你有用！！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-06T23:46:39.860

你需要一个黑客。我希望你使用的是 linux，否则会更难:)

1- 创建一个读取和执行 .sh 文件的小 Java 程序 这里的片段显示了如何临时从脚本中读取

```
 ProcessBuilder pb = new ProcessBuilder("myshell.sh", "myArg1", "myArg2");
 Process p = pb.start(); 
```

2-创建.sh脚本并确保java正确选择它（只需在脚本中放置一些回显消息并确保它被打印）

3- 这个 hack 的目标是尝试使用**grep**读取所有扩展名为 .java 的文件并将其通过管道传送到**mv**程序，该程序会将它们放入正确的文件夹中。

4-您将了解如何将内容放入哪个文件夹（包）的方式，因为您可以使用**cat**读取每个文件，并通过这种方式确定它们应该去哪里。**mkdir**命令应该可以帮助您在移动文件之前正确创建文件夹。

5- 如果您不确定这个解决方案，让我告诉您，这是一项非常复杂的任务，需要您仔细检查并识别所有模式。我相信这是可能的，你可以使用条件管道逻辑和一些令人放松的放松音乐来帮助你集中注意力。

在这里，我给你一些[BASH 指南](http://www.faqs.org/docs/Linux-HOWTO/Bash-Prog-Intro-HOWTO.html#ss6.2)以刷新你的想法

祝你好运，2013新年快乐

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-31T10:51:47.210

当文件位于错误的包中时，Eclipse 将通过移动文件来让您修复错误。使用“快速修复”功能（在错误视图中选择，按 CTRL+1），您可以轻松移动它们。尝试一次选择它们，也许你的 Eclipse 版本比我的更新，并且可以一次性修复它们。如果没有，它仍然比手动创建包要快。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-04T17:04:09.613

**所以这就是我所做的......**

1.  新建 -> Java 项目（选项：单击“使用项目文件夹作为源和类文件的根目录”）

2.  下一个

3.  选择“链接其他来源”（在详细信息下）

4.  浏览“链接文件夹位置”并选择顶部文件夹（包含所有包等）

5.  结束

**如果您已经创建了一个项目，那么...**

1.  在包资源管理器中右键单击项目并选择属性

2.  选择“Java 构建路径”

3.  选择“链接源”（在“源”选项卡上）

4.  浏览“链接文件夹位置”并选择顶部文件夹（包含所有包等）

5.  结束

**如果您的文件不在与其中定义的包对应的目录中，请备份您的文件（即将它们全部复制到另一个目录）并尝试以下操作：**

**使用javac MakePackDirs.java**编译以下程序并使用**java MakePackDirs**运行，将根据包声明创建目录和文件结构，然后使用上述过程。

```
import java.util.regex.*;
import java.util.*;
import java.io.*;

public class MakePackDirs {

    public static void main(String[] args) throws Exception {

        String pkg;

        for (File f : new File(".").listFiles(
            new FilenameFilter () {
               public boolean accept (File dir, String name) {
                   return name.endsWith(".java");
               } })) {

            if (f.isDirectory()) continue;

            System.out.println("Processing " + f.getName());
            Scanner s = new Scanner(f);
            try {
                Pattern p = Pattern.compile("^[ ]*package +[^;]*", 
                            Pattern.MULTILINE);
                if ((pkg = s.findWithinHorizon(p,0))==null) continue;
            }
            finally {
                s.close();
            }

            System.out.println("Found " + pkg);

            pkg = pkg.split(" ")[1];
            pkg = pkg.replaceAll("\\.","/").trim();

            System.out.println("Creating " + pkg);

            File dir = new File(pkg);
            boolean created = dir.mkdirs();

            if (!created && !dir.exists()) 
                throw new Exception("Can't create package directory");

            // Moving file
            File dest = new File(dir, f.getName());
            boolean renamed = f.renameTo(dest);

            if (!renamed) 
                throw new Exception("Can't move file to " + dest.getPath());

            System.out.println(f.getName() + " moved to " + dir.getPath());
        }
    }
} 
```

# matlab - 是否可以在不将单元格加载到内存的情况下将数据添加到 matlab 单元格中？

> ID：13953405
> 
> 赞同：4
> 
> 时间：2012-12-19T13:25:05.007
> 
> 标签：matlab, memory

我有一个大的 .mat 文件。我称之为**D.mat**。它里面有一个单元格（`D.X`是一个单元格数组）。我需要在*其唯一列*的末尾添加更多数据，但我无法将其加载到内存中。

我读到了这个函数：[memmapfile](http://www.mathworks.com/help/matlab/import_export/constructing-a-memmapfile-object.html)和*Mapping Multiple Data Types and Arrays*部分，但似乎我应该知道数据的结构，实际上 DX 元素没有明确的结构。

我想在这种情况下可能有一个像[fgetl](http://www.mathworks.com/help/matlab/ref/fgetl.html) 这样的函数（我的意思是把文件读到它的最后一个索引（或行）然后写入它）。

是否可以？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T13:32:23.193

如果您可以访问版本 R2011b 或更高版本，则可以使用该`matfile`命令将部分变量加载并保存在 .mat 文件中，而无需将数据加载到内存中。有关`doc matfile`更多信息和一些示例，请参阅。

`fgetl`不是您需要的：它用于从文本中读取行，而不是 .mat 文件。`memmapfile`还要求数据文件以常规结构布局，而 .mat 文件则不是这种情况。

在 R2011b 之前，我无法知道你需要做什么。

# apache - 使用静态文件名查询时将静态页面重定向到动态页面

> ID：13953416
> 
> 赞同：1
> 
> 时间：2012-12-19T13:25:38.313
> 
> 标签：apache, mod-rewrite

例如，已添加书签的人

```
http://www.dogs.bark/breeds.cfm/12700_female_rottweiler.htm 
```

或者

```
http://www.dogs.bark/whatevertext/12700_female_rottweiler.htm
(use female + rottweiler) 
```

将此定向到：

```
http://www.dogs.bark/search/result/?q=female+rottweiler 
```

所以基本上它应该将用下划线分隔的最后一个词（可以是多个）作为关键字

我知道这应该使用 mod.rewrite 来完成，但仅此而已。我发现很难理解 mod rewrite 是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:57:55.560

您可以使用 mod_alias 执行此操作：

```
RedirectMatch 301 ^/.*?/[0-9]+_(.*)\.html?$ /search/result/?q=$1 
```

`301`如果您不希望它成为永久重定向，请删除。你也可以使用 mod_rewrite，它看起来几乎一样：

```
RewriteRule ^/?.*?/[0-9]+_(.*)\.html?$ /search/result/?q=$1 [L,R=301] 
```

`=301`同样，如果您不想要永久重定向，则可以删除该位。

* * *

编辑：

为了`_`用字符替换查询字符串的字符，`+`您肯定需要坚持使用 mod_rewrite 并且需要一些额外的规则：

```
# perform the initial rewrite, but don't redirect
RewriteRule ^/?.*?/[0-9]+_(.*)\.html?$ /search/result/?q=$1 [L]

# replace "_" with "+"
RewriteCond %{QUERY_STRING} ^q=([^_]*)_(.*)$
RewriteRule ^/?search/result/$ /search/result/?q=%1+%2 [L,NE]

# don't redirect until all "_" is replaced with "+"
RewriteCond %{QUERY_STRING} ^q=([^_]+)$
RewriteRule ^/?search/result/$ /search/result?q=%1 [L,R=301] 
```

# visual-c++ - 在 MFC 中处理 OnSize 函数或可调整大小的对话框

> ID：13953417
> 
> 赞同：0
> 
> 时间：2012-12-19T13:25:40.080
> 
> 标签：visual-c++, mfc, visual-c++-2005

在一个 MFC 应用程序中有一个窗格窗口。在那扇窗户上，

我添加了一个菜单栏和一个工具栏以及许多其他控件。窗格窗口可重新调整大小。

现在对于可调整大小的窗口，我已经覆盖了函数 OnSize()。在那里，我检索了顶部窗口大小，然后在其下方等等......然后对于每个控件，我检索了它的窗口并调用了 MoveWindow()。

我只是想确保它是在 MFC 中处理可调整大小的窗口/对话框的正确方法，还是有其他一些可用的方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:41:03.743

一次移动大量控件时，最好使用[`DeferWindowPos`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632681(v=vs.85).aspx)最小化重绘。[我在https://stackoverflow.com/a/5739620/5987](https://stackoverflow.com/a/5739620/5987)有一个如何将其用于可调整大小的 MFC 对话框的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:21:27.397

而不是重新发明轮子：尝试[ResizableLib](http://www.codeproject.com/Articles/1175/ResizableLib)。它可以以非常简单的方式处理对话框的大小调整，您不必自己担心每个细节。

# php - 如何检查codeigniter中的文件字段是否为空？

> ID：13953421
> 
> 赞同：18
> 
> 时间：2012-12-19T13:26:00.557
> 
> 标签：php, codeigniter, file-upload

我有一个带有名为 的文件字段的表单`image`，但此字段不是必需的。
当用户在表单中没有选择任何文件时，`do_upload()`总是返回错误。
如何在控制器中执行上传操作之前检查用户是否选择了文件？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-19T13:28:48.077

请使用**空（）**

```
if (empty($_FILES['userfile']['name'])) {
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T13:28:13.677

尝试使用 . 检查文件是否有效[`is_uploaded_file()`](http://php.net/manual/en/function.is-uploaded-file.php)。例如：

```
if(is_uploaded_file($_FILES['userfile']['tmp_name'])) 
{  
   do_upload();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-19T13:28:27.220

在您的控制器中，在接收提交表单的函数上：

```
if (isset($_FILES['image']['name']) && !empty($_FILES['image']['name'])) {
    // do_upload

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-22T13:13:45.297

这是检查文件字段是否在php中为空的完整脚本

```
<!DOCTYPE html>
<html>
<body>

<form action="#" method="post" enctype="multipart/form-data">
    Select image to upload:
    <input name="my_files[]" type="file" multiple="multiple" />
    <input type="submit" value="Upload Image" name="submit">
</form>

<?php

 if (isset($_FILES['my_files']))
  {
    $myFile = $_FILES['my_files'];
    $fileCount = count($myFile["name"]);

        for ($i = 0; $i <$fileCount; $i++)
         {
           $error = $myFile["error"][$i]; 

            if ($error == '4')  // error 4 is for "no file selected"
             {
               echo "no file selected";
             }
            else
             {

               $name =  $myFile["name"][$i];
               echo $name; 
               echo "<br>"; 
               $temporary_file = $myFile["tmp_name"][$i];
               echo $temporary_file;
               echo "<br>";
               $type = $myFile["type"][$i];
               echo $type;
               echo "<br>";
               $size = $myFile["size"][$i];
               echo $size;
               echo "<br>";

               $target_path = "uploads/$name";   //first make a folder named "uploads" where you will upload files

                 if(move_uploaded_file($temporary_file,$target_path))
                  {
                   echo " uploaded";
                   echo "<br>";
                   echo "<br>";
                  }
                   else
                  {
                   echo "no upload ";
                  }

              }
        }  
}
        ?>

</body>
</html> 
```

但要警惕。用户可以上传任何类型的文件，也可以通过上传恶意或 php 文件来入侵您的服务器或系统。在这个脚本中应该有一些验证。

参考[http://www.techzigzag.com/how-to-check-that-user-has-upload-any-file-or-not-in-php/](http://www.techzigzag.com/how-to-check-that-user-has-upload-any-file-or-not-in-php/)

希望它会帮助你。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-24T05:26:41.673

只需使用本机 php 代码来检查文件上传。

```
if(!file_exists($_FILES['myfile']['tmp_name']) || !is_uploaded_file($_FILES['myfile']['tmp_name'])) {
echo 'No upload';
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T13:26:51.997

使用[empty()](http://php.net/manual/en/function.empty.php)空函数确实检查文件字段是否为空

```
if ( ! empty($_FILES)) {...}

if(!empty($_FILES['myFileField'])) {
    // file field is not empty..
} else {
    // no file uploaded..
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-22T17:02:29.190

由于文件上传错误“未选择文件”是第 4 号，因此正确的做法是：

```
if ($_FILES['my_image_field_name']['error'] !== 4){
    if ($this->upload->do_upload('my_image_field_name')) { ... 
```

按名称或 tmp_name 检查时，可能还有其他原因导致这些字段未填充，您可能会错过这些。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-04-13T06:26:24.433

```
if(!empty($_FILES[$file_name]['name'])){
  // TODO your logic

}else{
  echo "empty";
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-06T14:44:12.963

```
$file['file']->isValid() 
```

[CI4 用户指南链接](https://codeigniter4.github.io/userguide/libraries/uploaded_files.html#verify-a-file)

# ontology - 为粘性语言创建本体

> ID：13953426
> 
> 赞同：0
> 
> 时间：2012-12-19T13:26:29.407
> 
> 标签：ontology

如果问题含糊不清，我很抱歉，但我对这个概念很陌生，不知道该去哪里。

如果您正在开发一种粘合语言的本体，那么识别这些术语的正确方法是什么？

英文的例子不多，但是：

`telling`，`tell`并且 `told`基本上是指相同的概念。你怎么处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:37:43.643

寻找变形或派生词的基础或词根形式（词干）的过程称为[词干提取](http://en.wikipedia.org/wiki/Stemming)。有一些库可以做到这一点，例如[NLTK stem package](http://nltk.org/api/nltk.stem.html)。

# javascript - XHR2 withCredentials - 发送哪些 cookie？

> ID：13953428
> 
> 赞同：1
> 
> 时间：2012-12-19T13:26:32.043
> 
> 标签：javascript, authentication, cookies, xmlhttprequest, credentials

希望这很容易回答。

使用 XHR2 中的凭据请求，发送哪些 cookie？

我一直在关注[MDN 关于 credentialed requests 的文章](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS?redirectlocale=en-US&redirectslug=HTTP_access_control#Requests_with_credentials)，它显示 cookie`pageAccess=2`是随请求一起发送的。但是，它没有解释该 cookie 的来源，以及为什么专门发送该 cookie。是否只是页面设置的所有 cookie 都在任何凭据请求中发送？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T14:11:30.740

[来自CORS](http://www.html5rocks.com/en/tutorials/cors/#toc-withcredentials)上的 HTML5 Rocks 页面：

> 该`.withCredentials`属性将在请求中包含来自远程域的任何 cookie，它还将设置来自远程域的任何 cookie。

我假设“任何 cookie”的意思是“所有 cookie”（可能受 cookie 上的 HTTPS-only 标志的影响），因为没有使用 XHR2 指定 cookie 的机制。

发送的 cookie 是*由远程域*设置的 cookie ：如果`foo.com`向 发送一个请求凭据请求`bar.com`，则发送设置的任何 cookie `bar.com`。实际上，假设`facebook.com`有一个 CORS 感知 API，需要您登录才能使用。我之前在浏览器会话中登录了 Facebook，但现在我正在浏览`foo.com`，它将代表我使用 Facebook 的 API。*要求浏览器向我的所有**cookie*`foo.com`发送跨域请求，以便 Facebook 知道我是谁，并且我已经向 Facebook 进行了身份验证。`facebook.com` *`facebook.com`*

# .net - 如何获取csv文件的编码？

> ID：13953430
> 
> 赞同：1
> 
> 时间：2012-12-19T13:26:37.637
> 
> 标签：.net, csv, character-encoding

> **可能重复：**
> [使用 BULK INSERT 未正确导入重音字符](https://stackoverflow.com/questions/13949875/accented-characters-not-correctly-imported-with-bulk-insert)

在我的系统中运行的 .net 程序为我提供了一个 csv 文件。我想知道那个文件的编码。

csv 文件包含`é`, `ä`, `å`,`æ`字符，但显示为 �(UTF8-with BOM)。有没有可能我可以将这些字符押回其原始字符或类似英语的字符。

csv 文件是由同一用户在同一台​​机器上运行的 .net 程序创建的，但在创建文件后我看不到原始字符。

[相关问题。](https://stackoverflow.com/questions/13949875/is-it-possible-to-change-the-characters-not-rightly-encoded-maks-all-of-them)

```
sample data (UTF8-Without BOM) from csv file. 

Pok�mon Black Version
TGC � Nintendo
on H�tel de R�ve  
La Reine Masqu�e et la Tour des Miroirs 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T14:47:15.380

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:32:07.357

I agree with Esailija. Appears this data was single byte before it got to SQL.

In case the SQL was the problem will post as answer.

In SQL:

char and nchar are both single byte (ansii).

nchar and nvarchar are double byte (unicode).

If you load unicode into char it get packed into single byte.
I have loaded unicode into char and any uncode > 255 was translated to �.

[Using Unicode Data](http://msdn.microsoft.com/en-us/library/aa223981%28v=sql.80%29.aspx)

How to test

SELECT CAST('a' AS char(1))

SELECT CAST('é' AS char(1))
notice this works as extended ASCII (<255)

SELECT CAST(N'Ƶ' AS char(1))

SELECT CAST(N'Ƶ' AS nchar(1))

SELECT CAST(N'Ƹ' AS char(1))

SELECT CAST(N'Ƹ' AS nchar(1))

notice Ƶ and Ƹ both cast to same ? (for don't know)

# active-directory - ActiveDirectory 对象的允许属性列表

> ID：13953432
> 
> 赞同：2
> 
> 时间：2012-12-19T13:26:45.617
> 
> 标签：active-directory

我想知道是否可以通过仅提供目录条目的 schemaClass 字符串来查询 ActiveDirectory 以获取目录条目具有的属性列表。例如，我有一个 string =“user”，并且想查询 AD 以获取可以为 SchemaClassName 设置为“user”的对象读取/设置的属性列表。希望它有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:30:57.957

不幸的是，使用 AD 并不是那么简单。开始此任务的最佳方法是[确定与对象实例关联的类 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675895%28v=vs.85%29.aspx)

AD通过以下方式定义辅助类： [静态链接的辅助类](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677962%28v=vs.85%29.aspx) 和 [动态链接的辅助类](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676289%28v=vs.85%29.aspx)

-吉姆

# c# - 使用 (Try)Parse 将空字符串加倍

> ID：13953435
> 
> 赞同：4
> 
> 时间：2012-12-19T13:26:51.123
> 
> 标签：c#, parsing, double, tryparse

我在这里有一个 1.1 的构建系统，使用 Parse 来转换值（现在是 3.5）。

```
string myString = String.Empty;
double myValue = double.Parse(myString); 
```

抛出一个 FormatException （我期望 0.0）。

如果我使用 2.0+ 重写它

```
string myString = String.Empty;
double myValue;
if (double.TryParse(myString, out myValue))
    //do something 
```

我得到了想要的 0.0，但不幸的是，我失去了获得有意义的错误消息的可能性（在 else 树中）。

为什么给我 Parse 一个错误而 TryParse 我的期望值？有什么方法可以从 TryParse 中获取错误消息（时间不是问题）？

我不想这样解决它：

*   使用 if...then 避免错误

    ```
    myValue = myString.Length == 0 ? 0.0 : double.Parse(myString); 
    ```

*   如果发生错误，两次调用

    ```
    if (!double.TryParse(myString, out myValue))
        myValue = double.Parse(myString); 
    ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T13:31:42.547

`Parse`如果无法解析字符串，则抛出异常并`TryParse`返回`bool`. 您可以处理此布尔值（如果解析成功，则为 true，否则为 false）以显示您想要显示的成功/错误消息。

由于它`myValue`是一个`out`必须由方法设置的参数，因此如果无法解析字符串，TryParse 会将其设置为 0.0，这就是您在使用 TryParse 方法时获得该数字的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:31:34.940

不，不可能得到确切的错误消息。您只想知道*是否*可以转换为 double 以及结果（如果可能）。转换失败的确切原因对您来说是隐藏的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T13:32:32.970

TryParse 允许您在不抛出异常的情况下进行转换，如果成功则返回 true。你采取的行动取决于你

```
if (!double.TryParse(myString, out myValue))
{
//throw exception here
} 
```

当您不确定输入是否始终是数字时，它很有用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T13:31:17.397

> 为什么给我 Parse 一个错误而 TryParse 我的期望值？

因为这就是界面的设计方式。`TryParse`如果输入的格式无效，则不会引发异常。相反，它返回`false`.

> 有什么方法可以从 TryParse 中获取错误消息（时间不是问题）？

不，但您可以自己制作错误消息。

```
if (double.TryParse(myString, out myValue))
{
    //do something
}
else
{
    throw new FooException("Problem!");
} 
```

但是如果你想在出现错误时抛出异常，那么使用`Parse`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T13:48:02.893

必须设置 Out 参数，因此如果 TryParse 失败，它将在返回之前将输出初始化为其默认值，但是您将在“else”循环中......这意味着它失败了......

尝试运行下面的代码，这将显示 TryParse 实际上覆盖了该值，但表明解析失败......

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;

    namespace ConsoleApplication1
    {
        class Program
        {
            static void Main(string[] args)
            {
                ParseAndOutput("");
                ParseAndOutput("1.0");
                ParseAndOutput("ABC");
            }

            private static void ParseAndOutput(string input)
            {
                double value = -1;
                if (double.TryParse(input, out value))
                {
                    Console.WriteLine("Parse succeeded for '"+input+"', try parse changed to: " + value);
                }
                else
                {
                    Console.WriteLine("Parse failed for '" + input + "', try parse changed to:  " + value);
                }
            }
        }
    } 
```

所以 Parse 和 TryParse 在 string.Empty 上都失败了，他们只是以不同的方式报告失败，这就是 TryParse 的全部意义，它永远不会引发异常......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T13:34:57.070

`TryParse`以某种方式实现如下：

```
try
{
    Parse(...);
    return true;
}
catch
{
    return false;
} 
```

所以你可以用同样的方法来做：

```
try
{
    double.Parse(str, out dbl);
}
catch (Exception ex)
{
    // Do something with ex.Message
    dbl = 0.0;
}

// Continue with dbl. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-19T13:35:27.967

忘记`double.TryParse`，因为它不会（按设计）告诉您解析失败的*原因。*做旧方式：

```
string myString = String.Empty;
double myValue = 0.0;

try
{
    myValue = double.Parse(myString);
}
catch (FormatException)
{
    // Now you have a meaningful story here!
} 
```

# java - Java：如何以实时方式正确计算文件大小

> ID：13953437
> 
> 赞同：1
> 
> 时间：2012-12-19T13:26:56.300
> 
> 标签：java, file

我正在用 Java 编程。我想定期计算特定文件夹中所有文件的大小。周期不是恒定的，而且很短。我的代码如下：

```
//get Index Size
index_byte_size = 0;
File index = new File(indexPath);
String[] files = index.list();
File f = null;
for(int i=0; i < files.length; i++) {
    f = new File(index, files[i]);
    index_byte_size += f.length();
} 
```

`index_byte_size`是我想要得到的。`indexPath`是文件夹的路径。

代码在一个循环中。我`index_byte_size`在每个循环后输出总数。据我所知，文件大小应该不断增加。但是，我得到的结果是这样的：

```
IndexSize(byte) Time(ms)
0   297
0   802
0   1293
0   1710
7769547 2952
7769547 4330
7769547 4431
7769547 4785
7769547 4901
7769547 5213
7769547 5279
7769547 5446
7769547 5660
7769547 5861
7769547 6155
24041054    8763
24041054    9203
24041054    10439
24041054    10820
24041054    11685
36708630    13662
36708630    14309
36708630    16065
36708630    16192
36708630    16374
36708630    16691
36708630    16899
... 
```

如您所见，文件大小只是增加，然后保持不变，然后增加......我不知道发生了什么，我猜操作系统发生了一些事情。我的操作系统是 Windows 7。

* * *

**[背景]**

我想用Lucene做一个实验，看看它的索引能力，特别是它的索引大小和索引效率。

我有很多小文本文件（每个 2-10M 大小）。而且我想看看Lucene需要多长时间才能对它们中的每一个进行索引，以及索引会有多大。所以我写了这个程序。

我不想在索引更改时收到通知（因为它们当然会更改）。我只是在很短的时间内知道它们有多长和多大。

* * *

有谁知道为什么？以及如何实时计算大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:57:30.100

应用程序通常会缓冲输出并仅批量推出数据。

我怀疑这里不是这种情况。相反，我怀疑 Lucene 正在使用内存映射文件。当您增长内存映射文件时，它会随着您所做的每次分配而增长。由于分配是昂贵的，但分配超过您需要的成本相当便宜（因为它使用虚拟内存并且仅在您触摸它时使用主内存和磁盘）最有效的做法是分配大块然后填充它们懒洋洋地起来。（例如，我使用 64 位 JVM 一次分配 128 MB）

File.length 为您提供文件的范围，而不是实际使用了多少或什至使用了多少磁盘空间。您可以看到在 unix 上使用了多少磁盘空间`du`，可能还有 Java 7 中的一些工具（我只找到了用于文件系统根目录的空间，而不是文件）

即便如此，这仍会告诉您已触摸了多少页。准确知道使用了多少的唯一方法是读取文件，如果在您阅读文件时正在修改文件，则准确性有限。

编辑：在 Windows 7 上，空间似乎立即被保留，因此您无法创建大于文件系统大小的稀疏文件（就像在 ext4 文件系统上一样）

# objective-c - 按日期搜索 SIGABRT

> ID：13953439
> 
> 赞同：0
> 
> 时间：2012-12-19T13:27:03.040
> 
> 标签：objective-c, core-data, nsdate

我正在使用这个具有 timeStamp 属性的实体，该属性恰好是 Date 类型

![在此处输入图像描述](../Images/76d18f566cf7d393991dd96bb95f6361.png)

当我尝试按日期执行搜索时，问题就出现了：

```
NSDate *today = [NSDate date];
NSDate *end_day = [today dateByAddingTimeInterval: -5*one_day]; // the last 5 days
result = [helper fetchObjectsForEntityName:@"MyEntity" withPredicate:
[NSPredicate predicateWithFormat:@"timestamp > %f", [end_day ] ]]; 
```

当我打印出谓词的值时，我得到的只是：

```
timestamp > CAST(378132723.717909, "NSDate") 
```

但是当语句被执行时，它会崩溃。我在代码的其他部分使用相同的方法，它没有问题，显然如果我删除 NSPredicate，它又可以工作了。

为了这个问题，这里也是*fetchObjectsForEnittyName: WithPredicate 的代码：*

```
- (NSSet *)fetchObjectsForEntityName:(NSString *)newEntityName
                       withPredicate:(id)stringOrPredicate, ...
{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:newEntityName];
    if (stringOrPredicate)
    {
        NSPredicate *predicate;
        if ([stringOrPredicate isKindOfClass:[NSString class]])
        {
            va_list variadicArguments;
            va_start(variadicArguments, stringOrPredicate);
            predicate = [NSPredicate predicateWithFormat:stringOrPredicate
                                               arguments:variadicArguments];
            va_end(variadicArguments);
        } else {
            NSAssert2([stringOrPredicate isKindOfClass:[NSPredicate class]],
                      @"Second parameter passed to %s is of unexpected class %@",
                      sel_getName(_cmd), @"Whatevah");
            predicate = (NSPredicate *)stringOrPredicate;
        }
        [request setPredicate:predicate];
    }

    NSError *error = nil;
    NSArray *results = [self.managedObjectContext executeFetchRequest:request error:&error];
    if (error != nil)
    {
        [NSException raise:NSGenericException format:[error description]];
    }

    return [NSSet setWithArray:results];
} 
```

有没有人知道问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:44:31.020

首先是您将对象与标量进行比较并且有一些额外的括号，请尝试以下操作：

```
[NSPredicate predicateWithFormat:@"timestamp > %@", end_day]; 
```

要尝试的第二件事是属性的格式说明符，例如：

```
[NSPredicate predicateWithFormat:@"%K > %@", @"timestamp", end_day]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:45:42.830

复杂的问题似乎是最简单的答案。

我正在使用

```
 [NSPredicate predicateWithFormat:@"timestamp > %@", end_day]; 
```

没有大写的 S，就像在我的实体中描述的一样！所以应该是

```
 [NSPredicate predicateWithFormat:@"timeStamp > %@", end_day]; 
```

案子解决了。

# autofac - 重用 autofac 的 find ctor 逻辑

> ID：13953440
> 
> 赞同：0
> 
> 时间：2012-12-19T13:27:09.060
> 
> 标签：autofac

Autofac 在注册这样的组件时找到“最佳”ctor

```
builder.RegisterType<MyType>()...;
or
builder.RegisterType(typeof(MyType))...; 
```

我正在寻找一种方法来重用 Autofac 的反射代码来查找 ctor 参数。这个逻辑在某些公共 API 中可用吗？

**我想要上面的原因...**

我在编译时有一些类型未知的组件（=动态代理）。目前我像这样注册它们

```
builder.Register(c =>
{
  var dep1 = c.Resolve<IFoo>();
  var dep2 = c.Resolve<IBar>();
  var dep3 = c.Resolve<IFooBar>();
  return someProxyFactory.CreateProxyFrom<MyType>(dep1, dep2, dep3);
}...; 
```

---**编辑**---

如果不涉及代理但无法使用 RegisterType，则相同的问题是有效的。例如...

```
builder.Register(c =>
{
  [...]
  if(something)
   return new SomeType(dep1, dep2, dep3);
  else
   return new SomeOtherType(dep1, dep4, dep2, dep5);
} 
```

在这里，如果可能的话，我还想重用 Autofac 的“查找 ctor 逻辑”。

---**结束编辑**---

它工作正常，但如果可能的话，我想使用 autofac 的逻辑来为我找到 ctor 依赖项。我想写类似的东西

```
builder.Register(c =>
{
  object[] ctorDependencies = letAutofacDoTheSimilarWorkAsInRegisterType(typeof(MyType));
  return someProxyFactory.Create<MyType>(ctorDependencies);
} 
```

这是可能的还是我必须为此编写自己的逻辑？或者是否有一些完全不同的方法可用于这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T08:11:27.097

我猜这不是您想要的答案，但是您可以使用[现有的 DynamicProxy2](http://code.google.com/p/autofac/wiki/DynamicProxy2)吗？这使您能够将拦截器附加到已注册的接口，就像您使用代理工厂所做的一样。

**更新：**您可以使用Autofac.Core.Activators.Reflection 命名空间中的`IConstructorFinder`和接口，分别由和实现。`IConstructorSelector``PublicConstructorFinder``MostParametersConstructorSelector`

# r - 将列表中的数据框相互合并

> ID：13953443
> 
> 赞同：5
> 
> 时间：2012-12-19T13:27:26.440
> 
> 标签：r, merge, dataframe, plyr

### 我需要的：

我有一个巨大的数据框，其中包含以下列（还有更多，但这些并不重要）。这是一个例子：

```
 user_id video_id group_id    x   y
1         1        0        0   39 108
2         1        0        0   39 108
3         1       10        0  135 180
4         2        0        0   20 123 
```

当然，用户、视频和组 ID 是因素。例如，有 20 个视频，但每个视频对每个用户和组都有几个“观察”。

我想将此数据框转换为以下格式，其中有多少`x.N`个`y.N`用户（`N`）。

```
video_id  x.1   y.1  x.2  y.2  …
       0   39   108   20  123 
```

因此，对于 video `0`，来自用户 1 的 x 和 y 值分别位于`x.1`和列`y.1`中。对于用户 2，它们的值位于 、 等列`x.2`中`y.2`。

### 我试过的：

我为自己制作了一个数据框列表，这些数据框仅由每个数据框的所有`x, y`观察结果组成`video_id`：

```
summaryList = dlply(allData, .(user_id), function(x) unique(x[c("video_id","x","y")]) ) 
```

这就是它的样子：

```
List of 15
 $ 1 :'data.frame': 20 obs. of  3 variables:
  ..$ video_id: Factor w/ 20 levels "0","1","2","3",..: 1 11 8 5 12 9 20 13 7 10 ...
  ..$ x       : int [1:20] 39 135 86 122 28 167 203 433 549 490 ...
  ..$ y       : int [1:20] 108 180 164 103 187 128 185 355 360 368 ...
 $ 2 :'data.frame': 20 obs. of  3 variables:
  ..$ video_id: Factor w/ 20 levels "0","1","2","3",..: 2 14 15 4 20 6 19 3 13 18 ...
  ..$ x       : int [1:20] 128 688 435 218 528 362 299 134 83 417 ...
  ..$ y       : int [1:20] 165 117 135 179 96 328 332 563 623 476 ... 
```

### 我被困在哪里：

剩下要做的是：

*   ~~`summaryList`基于 . 将每个数据帧彼此合并`video_id`。我找不到访问列表中实际数据框的好方法，这些数据框是`summaryList[1]$`1``,`summaryList[2]$`2``等等。~~

    @James 找到了部分解决方案：

    ```
    Reduce(function(x,y) merge(x,y,by="video_id"),summaryList) 
    ```

*   确保在用户 ID 之后重命名列名，而不是保持原样。现在 my`summaryList`不包含有关用户 ID 的任何信息，并且输出`Reduce`具有重复的列名`x.x y.x x.y y.y x.x y.x`，诸如此类。

我该怎么做呢？或者有没有比我目前正在做的更简单的方法来获得结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:57:19.540

我还是有些迷茫。但是，我猜你只是想要`melt`and `dcast`。

```
library(reshape2)
d <- melt(allData,id.vars=c("user_id","video_id"), measure.vars=c("x","y"))
dcast(d,video_id~user_id+variable,value.var="value",fun.aggregate=mean) 
```

导致：

```
 video_id  1_x 1_y  2_x 2_y  3_x 3_y  4_x 4_y  5_x 5_y  6_x 6_y  7_x 7_y  8_x 8_y  9_x 9_y 10_x 10_y 11_x 11_y 12_x 12_y 14_x 14_y 15_x 15_y 16_x 16_y
1         0   39 108  899 132   61 357  149 298 1105 415  148 208  442 200  210 134   58 244  910  403  152   52 1092  617 1012  114 1105  424  548  394
2         1 1125  70  128 165 1151 390  171 587  623 623   80 643  866 310  994 114  854 129  781  306  672   -1 1096  354  525  524  150 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T13:59:46.003

`Reduce`诀窍：

```
reducedData <- Reduce(function(x,y) merge(x,y,by="video_id"),summaryList) 
```

…但你需要在`names`之后修复：

```
names(reducedData)[-1] <- do.call(function(...) paste(...,sep="."),expand.grid(letters[24:25],names(summaryList))) 
```

结果是：

```
 video_id  x.1 y.1  x.2 y.2  x.3 y.3  x.4 y.4  x.5 y.5  x.6 y.6  x.7 y.7  x.8
1         0   39 108  899 132   61 357  149 298 1105 415  148 208  442 200  210
2         1 1125  70  128 165 1151 390  171 587  623 623   80 643  866 310  994 
```

# ruby-on-rails - 为什么nginx找不到我的资产？

> ID：13953454
> 
> 赞同：4
> 
> 时间：2012-12-19T13:28:16.680
> 
> 标签：ruby-on-rails, nginx, unicorn, assets

我在 Rails 3.2 上，我的生产设置使用 nginx 和 unicorn。

我对名为 sidekiq 的 ruby​​ gem 使用的一些资产有疑问。但是，当我请求这些资产时，它们并没有得到正确的服务。我的 nginx 配置如下所示：

```
upstream unicorn {
  server unix:/tmp/unicorn.myapp.sock fail_timeout=0;
}

server {
  listen 80 default deferred;
  # server_name example.com;
  root /home/deployer/apps/myapp/current/public;

  if (-f $document_root/system/maintenance.html) {
    return 503;my
  }
  error_page 503 @maintenance;
  location @maintenance {
    rewrite  ^(.*)$  /system/maintenance.html last;
    break;
  }

  location ~ ^/assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @unicorn;
  location @unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://unicorn;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;

  if (-f $document_root/system/maintenance.html) {
    return 503;
  }
  error_page 503 @maintenance;
  location @maintenance {
    rewrite  ^(.*)$  /system/maintenance.html last;
    break;
  }
} 
```

从我的浏览器中，我可以看到它正在
请求`http://www.myapp.com/admin/sidekiq/stylesheets/application.css`.

如果我 ssh 进入服务器并写入：

```
ls /home/deployer/apps/myapp/current/public/admin/sidekiq/stylesheets
application.css  bootstrap.css 
```

你可以看到它确实存在。那么为什么不提供服务呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T15:19:09.737

**解决了它**，这完全是由于我在 rails 中的 production.rb 设置错误，导致默认行为失败，因此无论如何都不需要手动将资产放入 /public 中。

我有：

```
config.action_dispatch.x_sendfile_header = "X-Sendfile" 
```

而对于 nginx 应该是：

```
config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' 
```

感谢所有帮助:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:25:53.890

对不起，尼尔斯，我想我需要更多信息才能帮助你。您能否启用日志记录，然后将记录的回复发布到您的问题中。

要启用日志记录，请在配置中包含以下行，然后重新加载配置或重新启动 NginX。

```
 log_format my_log_format
        '$host $remote_addr - $remote_user [$time_local]  $status '
        '"$request" $body_bytes_sent "$http_referer" '
        '"$http_user_agent" "$http_x_forwarded_for"';

    error_log  /home/deployer/myapp_error.log;
    access_log /home/deployer/myapp_access.log my_log_format; 
```

我将根据我们在日志中找到的内容修改我的答案。

# sql - 如何使用 dtexec.exe 在 32 位模式下执行包？

> ID：13953455
> 
> 赞同：1
> 
> 时间：2012-12-19T13:28:25.347
> 
> 标签：sql, sql-server

我创建了存储在我的硬盘上的 SSIS 包 (.dtsx)。我想使用命令提示符实用程序来执行它。

它在 64 位环境中创建并使用 Excel 连接管理器（JET 提供程序）。因此不能将其作为 64 位执行。

我想以 32 位执行它。命令提示符是否像 GUI 一样具有此选项？

```
C:\Users\Administrator>dtexec.exe /FILE "C:\Program Files (x86)\AGSFeedReaders\ICICISendEmail.dtsx" /DECRYPT "<password>" /X86  /CHECKPOINTING OFF /REPORTING E 
```

错误 ：-

```
 Description: SSIS Error Code DTS_E_OLEDB_EXCEL_NOT_SUPPORTED: The Excel Connection Manager is not supported in the 64-bit version of SSIS, as no OLE DB provider is available. 
```

**我可以使用命令提示符在 32 位模式下执行相同的操作吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:24:28.553

您可以安装 32 位版本的 dtexec。

[http://msdn.microsoft.com/en-en/library/ms162810(v=sql.105).aspx](http://msdn.microsoft.com/en-en/library/ms162810(v=sql.105).aspx)

# android - android外部SDCARD没有写权限？

> ID：13953460
> 
> 赞同：0
> 
> 时间：2012-12-19T13:28:36.680
> 
> 标签：android, permissions, sd-card

我正在三个不同的设备上开发应用程序 1) Toshiba excite 平板电脑，型号为 AT300
2) Android TV BOX 3) Android 电视加密狗和迷你电脑

东芝激发平板电脑和安卓电视盒作为 SD 卡插槽，我们需要将 SD 卡插入适配器并放置它。这两个设备都是只读访问。

Android tv dongle 和 Mini PC 作为 SD 卡插槽，如果我们不使用适配器，我们可以直接插入 sdcard，无需任何适配器。该设备具有对 sd 卡的读写访问权限。

有人知道如果我将我的 SD 卡与适配器一起使用，为什么它只给我读取权限吗？而且我还需要在清单文件中写入任何权限吗？现在我有两个权限

```
uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"  
uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" 
```

给我一个解决方案，如果我可以对我的所有设备进行写访问

# web - 如何记住非注册用户的选择？

> ID：13953461
> 
> 赞同：1
> 
> 时间：2012-12-19T13:28:37.267
> 
> 标签：web, choice

我的网站收集用户对某些图像的评论。非注册用户可以点击“好”按钮。系统记住用户选择的最佳方式是什么？一个人只能点击一次“好”。饼干？会议？另一种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:41:08.500

首先，您必须意识到所有会话技术*都是*基于 cookie 的。这都是很好的技术。这意味着它们都有缺点，即在 cookie 不工作的情况下它们将无法工作，用户选择将被遗忘。在那些（希望很少见）情况下，您可以将这些选择存储在 URL 中或作为 CGI 参数。在任何情况下，您都无法使其真正安全。

话虽如此，您需要权衡取舍。

# 饼干

如果您使用纯粹的基于 cookie 的存储，那么您可能会限制可以存储在单个域名下的 cookie 中的用户选择的数量。[RFC 6265 声明了一些](https://www.rfc-editor.org/rfc/rfc6265#section-6.1 "HTTP 状态管理机制/实施注意事项/限制")关于这些的应该和实现匹配这些将给你最多 200KB 这应该足够了。较早的[RFC 2965](https://www.rfc-editor.org/rfc/rfc2965 "HTTP 状态管理机制/实施注意事项/实施限制")说实现应该给你 80KB。还请记住，浏览器会针对您网站的*每个*请求向您发送 cookie。这可能意味着您的用户浏览速度较慢。

假设一个 24 位图像 ID（1600 万个可能的图像），base64 编码为 4 个字节，您可以将近 20,000 个选择打包到 cookie 中。对于 32 位图像 ID，编码为 6 个字节，您仍然可以在 cookie 中获得超过 10,000 个选择。

当 cookie 被证明太麻烦时，比如说在 1,000 票之后，您可以将浏览器切换到会话技术……或者考虑他在没有注册的情况下永远不会做到这一点;-)

# 会话

如果您决定将用户选择存储在会话中，那么您将不得不在服务器上专用一些存储区域。缺点是：

1.  您无法安全地知道何时不再使用会话。因此，您需要一些机制来回收未使用的会话，通常是在固定数量的不活动后过期会话，

2.  如果您想在多个 HTTP 服务器之间分配负载，则更难以扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:33:29.860

您创建一个独特的“令牌”，将其保存为 cookie（例如 IP 的哈希值 + 时间戳）。该值也与投票一起保存到数据库中。

# macos - Mac OSX：如何以编程方式将应用程序图标添加到停靠？

> ID：13953475
> 
> 赞同：1
> 
> 时间：2012-12-19T13:29:25.240
> 
> 标签：macos, icons

> **可能重复：**
> [在运行时从扩展坞添加/删除应用程序图标？](https://stackoverflow.com/questions/8317101/add-remove-application-icon-from-dock-at-runtime)
> [以编程方式将应用程序图标添加到安装时停靠](https://stackoverflow.com/questions/13451234/programmatically-add-application-icon-to-dock-on-install)

我想知道如何以编程方式将我的应用程序图标添加到扩展坞（以便它保留在扩展坞中，除非用户将其删除）。请不要回答禁止这样做，我真的需要为特定需要这样做:)

我看过这些线程：

[以编程方式将应用程序图标添加到安装时停靠](https://stackoverflow.com/questions/13451234/mac-osx-auto-add-app-in-dock-bar-after-install-app)

[在运行时从扩展坞添加/删除应用程序图标？](https://stackoverflow.com/questions/8317101/add-remove-application-icon-from-dock-at-runtime)

但他们没有回答这个问题。

任何想法？

# c++ - 找到立方体顶点的优雅方式

> ID：13953476
> 
> 赞同：12
> 
> 时间：2012-12-19T13:29:26.993
> 
> 标签：c++, algorithm, opengl, cube, vertices

几乎每个 OpenGL 教程都可以让您实现绘制立方体。因此需要立方体的顶点。在示例代码中，我看到一个定义每个顶点的长列表。但我想计算立方体的顶点，而不是使用预先计算的坐标的超长列表。

一个立方体由八个顶点和十二个三角形组成。顶点由 x、y 和 z 定义。每个三角形由三个顶点的索引定义。

有没有一种优雅的方法来计算立方体的顶点和[元素](http://open.gl/drawing#Elementbuffers)索引？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T14:43:21.553

当我将[csg.js](https://github.com/evanw/csg.js/blob/master/csg.js)项目“移植”到 Java 时，我发现了一些可爱的代码，它生成了具有选定中心点和半径的立方体。（我知道是JS，但无论如何）

```
// Construct an axis-aligned solid cuboid. Optional parameters are `center` and
// `radius`, which default to `[0, 0, 0]` and `[1, 1, 1]`. The radius can be
// specified using a single number or a list of three numbers, one for each axis.
// 
// Example code:
// 
//     var cube = CSG.cube({
//       center: [0, 0, 0],
//       radius: 1
//     });
CSG.cube = function(options) {
  options = options || {};
  var c = new CSG.Vector(options.center || [0, 0, 0]);
  var r = !options.radius ? [1, 1, 1] : options.radius.length ?
           options.radius : [options.radius, options.radius, options.radius];
  return CSG.fromPolygons([
    [[0, 4, 6, 2], [-1, 0, 0]],
    [[1, 3, 7, 5], [+1, 0, 0]],
    [[0, 1, 5, 4], [0, -1, 0]],
    [[2, 6, 7, 3], [0, +1, 0]],
    [[0, 2, 3, 1], [0, 0, -1]],
    [[4, 5, 7, 6], [0, 0, +1]]
  ].map(function(info) {
    return new CSG.Polygon(info[0].map(function(i) {
      var pos = new CSG.Vector(
        c.x + r[0] * (2 * !!(i & 1) - 1),
        c.y + r[1] * (2 * !!(i & 2) - 1),
        c.z + r[2] * (2 * !!(i & 4) - 1)
      );
      return new CSG.Vertex(pos, new CSG.Vector(info[1]));
    }));
  }));
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-15T13:15:36.423

我用这段代码（C#）解决了这个问题：

```
public CubeShape(Coord3 startPos, int size) {
    int l = size / 2;
    verts = new Coord3[8];
    for (int i = 0; i < 8; i++) {
        verts[i] = new Coord3(
            (i & 4) != 0 ? l : -l,
            (i & 2) != 0 ? l : -l,
            (i & 1) != 0 ? l : -l) + startPos;
    }

    tris = new Tris[12];
    int vertCount = 0;
    void AddVert(int one, int two, int three) =>
        tris[vertCount++] = new Tris(verts[one], verts[two], verts[three]);

    for (int i = 0; i < 3; i++) {
        int v1 = 1 << i;
        int v2 = v1 == 4 ? 1 : v1 << 1;
        AddVert(0, v1, v2);
        AddVert(v1 + v2, v2, v1);
        AddVert(7, 7 - v2, 7 - v1);
        AddVert(7 - (v1 + v2), 7 - v1, 7 - v2);
    }
} 
```

如果你想了解更多发生了什么，你可以查看我写的解释它[的 github 页面。](https://catonif.github.io/cube/)

# fortran - FORTRAN 分段错误

> ID：13953477
> 
> 赞同：1
> 
> 时间：2012-12-19T13:29:29.340
> 
> 标签：fortran

用 Fortran 编写的项目可以在不同的机器上正常运行，但在其他一些 Linux 机器上却不能。其中一个上写着`segmentation fault`，另一个上写着`segmentation fault (core dumped)`。我`gdb`对我的程序做了，令人惊讶的是，它将段错误指向程序的第一行，它应该打印保存在模块中的变量的值。

我将它们全部编译如下：

```
gfortran -mcmodel=large -fPIC -fopenmp -lgfortran ... 
```

你知道为什么会这样吗？Ubuntu 12.10 上的 gfortran 版本是 4.7.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:22:39.023

也许您需要增加这些机器上的堆栈大小。Stackoverflow 上有关于这个主题的答案。检查超限。

# vba - VBA将另一个excel文件内容复制到当前工作簿

> ID：13953478
> 
> 赞同：0
> 
> 时间：2012-12-19T13:29:33.710
> 
> 标签：vba, excel

这就是我想要实现的目标：

我想将整个第一张表的内容复制到指定目录中最近修改的 excel 文件中。然后，我想将此复制操作的值粘贴到当前工作簿的第一张纸上。

我知道有宏可以获取目录中最后修改的文件，但我不确定实现这一点的快速而干净的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T14:51:28.773

见下文。这将使用当前活动的工作簿并查找`C:\Your\Path`具有最新修改日期的 Excel 文件。然后它将打开文件并从第一张表中复制内容并将它们粘贴到您的原始工作簿中（在第一张表上）：

```
Dim fso, fol, fil
Dim wkbSource As Workbook, wkbData As Workbook

Dim fileData As Date
Dim fileName As String, strExtension As String

Set wkbSource = ActiveWorkbook

Set fso = CreateObject("Scripting.FileSystemObject")
Set fol = fso.GetFolder("C:\Your\Path")

fileData = DateSerial(1900, 1, 1)

    For Each fil In fol.Files

        strExtension = fso.GetExtensionName(fil.Path)
        If Left$(strExtension, 3) = "xls" Then

            If (fil.DateLastModified > fileData) Then
                fileData = fil.DateLastModified
                fileName = fil.Path
            End If

        End If

    Next fil

Set wkbData = Workbooks.Open(fileName, , True)

wkbData.Sheets(1).Cells.Copy 
wkbSource.Sheets(1).Range("A1").PasteSpecial Paste:=xlValues

Application.CutCopyMode = False

wkbData.Close

Set fso = Nothing
Set fol = Nothing
Set flc = Nothing
Set wkbData = Nothing 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T14:41:54.367

我的午餐没有更好的事情可做——所以就这样吧。

要触发它，请使用：`getSheetFromA()`

把它放在当前文件中：

```
Dim most_recent_file(1, 2) As Variant
Sub getSheetFromA()

    ' STEP 1 - Delete first sheet in this workbook
    ' STEP 2 - Look through the folder and get the most recently modified file path
    ' STEP 3 - Copy the first sheet from that file to the start of this file

    ' STEP 1
    ' Delete the first sheet in the current file (named incase if deleting the wrong one..)
    delete_worksheet ("Sheet1")

    ' STEP 2
    ' Now look for the most recent file
    Dim folder As String
    folder = "C:\Documents and Settings\Chris\Desktop\foldername\"

    Call recurse_files(folder, "xls")

    ' STEP 3
    Dim most_recently_modified_sheet As String
    most_recently_modified_sheet = most_recent_file(1, 0)
    getSheet most_recently_modified_sheet, 1
End Sub

Sub getSheet(filename As String, sheetNr As Integer)
    ' Copy a sheet from an external sheet to this workbook and put it first in the workbook.
    Dim srcWorkbook As Workbook

    Set srcWorkbook = Application.Workbooks.Open(filename)
    srcWorkbook.Worksheets(sheetNr).Copy before:=ThisWorkbook.Sheets(1)

    srcWorkbook.Close
    Set srcWorkbook = Nothing
End Sub

Sub delete_worksheet(sheet_name)
    ' Delete a sheet (turn alerting off and on again to avoid prompts)
    Application.DisplayAlerts = False
    Sheets(sheet_name).Delete
    Application.DisplayAlerts = True
End Sub

Function recurse_files(working_directory, file_extension)
    With Application.FileSearch
        .LookIn = working_directory
        .SearchSubFolders = True
        .filename = "*." & file_extension
        .MatchTextExactly = True
        .FileType = msoFileTypeAllFiles

        If .Execute() > 0 Then
            number_of_files = .FoundFiles.Count
            For i = 1 To .FoundFiles.Count
                vFile = .FoundFiles(i)

                Dim temp_filename As String
                temp_filename = vFile

                ' the next bit works by seeing if the current file is newer than the one in the array, if it is, then replace the current file in the array.
                If (most_recent_file(1, 1) <> "") Then
                    If (FileLastModified(temp_filename) > most_recent_file(1, 1)) Then
                        most_recent_file(1, 0) = temp_filename
                        most_recent_file(1, 1) = FileLastModified(temp_filename)
                    End If
                Else
                    most_recent_file(1, 0) = temp_filename
                    most_recent_file(1, 1) = FileLastModified(temp_filename)
                End If
            Next i
        Else
            MsgBox "There were no files found."
        End If
    End With
End Function

Function FileLastModified(strFullFileName As String)
    ' Taken from: http://www.ozgrid.com/forum/showthread.php?t=27740
    Dim fs As Object, f As Object, s As String

    Set fs = CreateObject("Scripting.FileSystemObject")
    Set f = fs.GetFile(strFullFileName)

    s = f.DateLastModified
    FileLastModified = s

    Set fs = Nothing: Set f = Nothing

End Function 
```

# java - 一个字符串包含另一个字符串多少次

> ID：13953485
> 
> 赞同：8
> 
> 时间：2012-12-19T13:30:06.333
> 
> 标签：java, regex, string

> **可能重复：**
> [字符串中出现子字符串](https://stackoverflow.com/questions/767759/occurences-of-substring-in-a-string)

在主题中如何检查一个字符串包含另一个字符串多少次？例子：

```
s1 "babab"
s2 "bab" 
Result : 2 
```

如果我使用 Matcher 它只识别第一次出现：

```
String s1 = JOptionPane.showInputDialog(" ");
String s2 = JOptionPane.showInputDialog(" ");
Pattern p = Pattern.compile(s2);
Matcher m = p.matcher(s1);
int  counter = 0;
while(m.find()){
    System.out.println(m.group());
    counter++;
}
System.out.println(counter); 
```

我可以这样做，但**我想在下面使用 Java 库，例如 Scanner、StringTokenizer、Matcher 等：**

```
String s1 = JOptionPane.showInputDialog(" ");
String s2 = JOptionPane.showInputDialog(" ");
String pom;
int count = 0;
for(int  i = 0 ; i< s1.length() ; i++){
    if(s1.charAt(i) == s2.charAt(0)){
        if(i + s2.length() <= s1.length()){
            pom = s1.substring(i,i+s2.length());
            if(pom.equals(s2)){
                count++;
            }
        }
    }
 }

 System.out.println(count); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:45:05.863

lulz 的一种衬垫解决方案

`longStr`是输入字符串。`findStr`是要搜索的字符串。没有假设，除了`longStr`and`findStr`必须**不是**`null`而且必须`findStr`至少有 1 个字符。

```
longStr.length() - longStr.replaceAll(Pattern.quote(findStr.substring(0,1)) + "(?=" + Pattern.quote(findStr.substring(1)) + ")", "").length() 
```

由于两个匹配项只要从不同的索引开始就被认为是不同的，并且可能发生重叠，因此我们需要一种方法来区分匹配项并允许匹配的部分重叠。

诀窍是只使用搜索字符串的第一个字符，并使用前瞻来断言搜索字符串的其余部分。这允许重新匹配重叠部分，并且通过删除匹配的第一个字符，我们可以计算匹配的数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:38:07.473

我认为如果您知道在字符串中要查找的单词，这可能会起作用，您可能需要编辑正则表达式模式。

```
String string = "hellohellohellohellohellohello";
Pattern pattern = Pattern.compile("hello"); 
Matcher matcher = pattern.matcher(string);
int count = 0;
while (matcher.find()) count++; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:37:22.163

[Matcher](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)类有两个方法“ [start](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#end%28%29) ”和“ [end](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#end%28%29) ”，它们返回最后一个匹配的开始索引和结束索引。此外，[find](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28int%29)方法有一个可选参数“start”，从该参数开始搜索。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T13:41:02.160

你可以这样做

```
private int counterString(String s,String search) {
    int times = 0;
    int index = s.indexOf(search,0);
    while(index > 0) {
        index = s.indexOf(search,index+1);
        ++times;
    }
    return times;
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T13:36:46.377

一些快速的 Bruce Forte 解决方案：

```
 String someString = "bababab";
    String toLookFor = "bab";
    int count = 0;
    for (int i = 0; i < someString.length(); i++) {
        if (someString.length() - i >= toLookFor.length()) {
            if (someString.substring(i, i + toLookFor.length()).equals(toLookFor) && !"".equals(toLookFor)) {
                count++;
            }
        }
    }
    System.out.println(count); 
```

这会打印出 3。**请注意**，我假设没有一个`String`s 为空。

# java - 可扩展列表视图 setOnChildClickListener 的问题

> ID：13953487
> 
> 赞同：4
> 
> 时间：2012-12-19T13:30:12.420
> 
> 标签：java, android, expandablelistview

我正在开发具有可扩展列表视图的应用程序并很好地在此列表视图中获取显示数据，但问题在于`setOnChildClickListener`哪个不起作用。没有导致焦点问题的交互式小部件（复选框或edittex），我们需要假焦点，不，我没有只在父列表和子列表中使用Texview。我也试过做所有的texview`focusable as false`但没有成功。你能解决这个问题吗

代码 ：

```
mlvInstructionlist = (ExpandableListView)amviInstruction. findViewById(R.id.lvInsListofInstruction);
        AssetsWiseInstructionListAdapter adapter = new AssetsWiseInstructionListAdapter(getActivity(),mlvInstructionlist, mlstGroupCollection);

        mlvInstructionlist.setAdapter(adapter);
        mlvInstructionlist.setOnChildClickListener(this);
@Override
    public boolean onChildClick(ExpandableListView parent, View v,
            int groupPosition, int childPosition, long id) {
        // TODO Auto-generated method stub

         Toast.makeText(getSherlockActivity(), "Child click Header",Toast.LENGTH_LONG).show();
         AppLog.showLogI(TAG, "Child click Header");
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:59:56.857

您可以尝试用滚动视图替换您的列表视图。这应该可以解决它或尝试参考这篇文章：[Focusable EditText inside ListView](https://stackoverflow.com/questions/2679948/focusable-edittext-inside-listview)。

这讨论了为后代设置 onClick 和 focussable。

# c# - 在 C# 和 F# 之间交换大列表

> ID：13953488
> 
> 赞同：2
> 
> 时间：2012-12-19T13:30:15.020
> 
> 标签：c#, list, dll, f#, data-exchange

我有历史股票数据的大数据文件，我想通过 C# GUI 加载这些文件，然后在 F# 中使用不同的算法进行处理。随着时间的推移，附加值会附加到列表中。

列表是二维的，形式为

```
[[id, Open,High,Low,Close], [id, Open,High,Low,Close], ...] 
```

F# 代码位于库中，无法使用 C# 列表（我无法在 F# 中获取列表第二维的值）。每次发生 F# 操作时都转换整个列表，成本太高。这些值也不能存储在 F# 列表中，因为 C# 无法处理它们。

建议的解决方案是：

1.  要么将 F# 列表存储在 C# 中，仅出于存储目的，因为库无法存储值，以及包含相同值的 C# 列表，并根据需要转换列表的一部分。这里的主要问题是文件的大小可能是数 GB。

2.  直接从 F# 中的文件读取所需的值并将计算值保存在其他文件中。这里的问题是文件的有效组织，以便可以快速选择要加载的行（例如，用于移动平均计算）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:17:49.453

内部序列是否需要是一个列表？如果它总是具有相同的元素（OHLC），最好使用元组（或自定义类型），因为它明确了它的固定性质。我可能会做这样的事情：

```
module Stock =
  let (!) s = DateTime.Parse(s)

  let getOHLC() : unit -> seq<DateTime * float * float * float * float> =
    seq [
      !"18-Dec-12",27.25,27.63,27.14,27.56
      !"17-Dec-12",26.79,27.22,26.68,27.10
      !"14-Dec-12",27.11,27.13,26.70,26.81
      //...
    ] 
```

如果你真的需要每个元素都是一个列表，你可以通过`Seq.map seq`.

`seq`函数定义为：

```
let seq (x:seq<'T>) = x 
```

所以它只会向上转换，而不是复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T23:31:14.117

> 每次发生 F# 操作时都转换整个列表，成本太高。

你量过吗？

> 这些值也不能存储在 F# 列表中，因为 C# 无法处理它们。

您应该能够从 C# 枚举 F# 列表的元素，因为它只是另一个可枚举的。

> C# 中的类型`System.Generics.List<System.Generics.List<Double>>`被传递`IEnumerable`给 F#。不是调用`OfSeq()`转换列表值，而是强迫我遍历整个列表，调用`OfSeq()`每个元素，从而复制它。

调用类似的东西`Array.ofSeq`会创建一个新集合，但您不需要这样做来迭代内容。

请注意，您提供的类型的 F# 名称是`ResizeArray<ResizeArray<float>>`.

例如，您可以这样做：

```
let f (xss: ResizeArray<ResizeArray<float>>) =
  for xs in xss do
    for x in xs do
      printfn "%A" x 
```

无需复制即可使用 F# 中的数据。

# android - 在模拟器上运行 APK：“很遗憾，YourAPP 已停止。”

> ID：13953490
> 
> 赞同：2
> 
> 时间：2012-12-19T13:30:20.467
> 
> 标签：android, android-emulator, coronasdk

我的 APK 在我朋友的设备上运行良好，但抛出“不幸的是，YourAPP 已停止”。错误。如何在模拟器中解决这个问题？我没有安卓设备，所以我需要让它工作。我不能总是借用别人的设备。

该应用程序已作为草稿在 Google Play 中，并已准备好应用内购买。我只是想进一步测试一些东西（我与 Corona Cloud/Game Minion 的集成）

该应用程序是使用 Corona SDK 制作的，我下载了 Android SDK 来运行模拟器。模拟器出现，APK安装成功，只是它不会运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:58:49.070

发现了什么问题！

我打开 DDMS 并看到这些行：

> 12-19 13:44:52.775: E/AndroidRuntime(2445): 致命异常: GLThread 144
> 12-19 13:44:52.775: E/AndroidRuntime(2445): java.lang.IllegalArgumentException: 没有配置匹配 configSpec

快速的谷歌搜索显示我只需要打开 GPU 仿真。天哪！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:50:48.573

如果您的应用程序使用蓝牙，它将无法在模拟器上正常运行，因为它们不支持蓝牙。

# c# - 如何在 Windows 7 机器上测量 VS 2008 C++ 和 Unity C# 程序的执行时间？

> ID：13953491
> 
> 赞同：1
> 
> 时间：2012-12-19T13:30:21.467
> 
> 标签：c#, c++, .net, visual-studio-2008, profiling

我有两个程序通过在 Windows 7 机器上运行的 UDP 进行通信。一个是使用 C++ 在 VS 2008 中构建的，另一个是使用 C# 脚本的 Unity3D 程序。我想对同一时间线上的两个程序的执行时间进行最高精度的测量，这样我就可以测量两个程序的各种事件之间经过的时间。

我不能使用 .NET 的 System.Diagnostics.Stopwatch 类，就像我通常所说的 Unity C# 脚本一样，因为秒表必须在程序中“启动”，因此不会与其他程序同步。同时，System.Environment.TickCount 以系统启动后的毫秒数为单位进行测量，这听起来很有希望，但不是很精确，实际粒度（显然）约为 15 毫秒。

我应该做什么？

# ios - NSDecimalNumber 出现 NaN

> ID：13953495
> 
> 赞同：2
> 
> 时间：2012-12-19T13:30:29.947
> 
> 标签：ios, core-data, nsdecimalnumber

保存`NSDecimalNumber`时`EditViewController`，出现 in`DisplayTableViewController`值`NaN`

请需要建议来解决此问题。谢谢

我的代码：

```
- (IBAction)saveChanges:(id)sender {
    editGift.nameOfGift = nameTextField.text;
    editGift.priceOfGift = [NSDecimalNumber decimalNumberWithString:priceTextField.text];

    AppDelegate *myApp = (AppDelegate *) [[UIApplication sharedApplication]delegate];
    [myApp saveContext];
    [self.delegate editGiftViewControllerDidSave:self];
} 
```

[请看视频解释](http://www.youtube.com/watch?v=WGFEmZrIECc)

输入值：

```
currencyFormatter = [[NSNumberFormatter alloc]init]; 

[currencyFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];

 personGift.priceOfGift = [NSDecimalNumber decimalNumberWithString:priceTextField.text]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:06:02.850

您的代码不清楚何时应用货币格式，但鉴于您的视频，文本字段的值很可能是“$6,000”。那不是一个数字（因此是“NaN”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T15:08:01.940

**NSDecimalNumber**文档说：

> 除了数字之外，numericString 还可以包含开头的“+”或“-”；单个“E”或“e”，以科学计数法表示数字的指数；和一个单独的 NSDecimalSeparator 用于将小数部分与数字的整数部分相除。

您必须验证 in 中的字符串是否`priceTextField.text`仅包含**有效字符**- 并且顺序有效。特别要检查的一件事是您是否有小数点或小数点逗号，具体取决于用户区域设置。因此，您可能需要考虑使用：

```
+ (NSDecimalNumber *)decimalNumberWithString:(NSString *)numericString
locale:(NSDictionary *)locale 
```

# css - 如何在 Sencha Touch 中为列表使用自定义 gif 加载器？

> ID：13953497
> 
> 赞同：3
> 
> 时间：2012-12-19T13:30:35.070
> 
> 标签：css, sencha-touch, gif, preloader, sencha-architect

当您`Ext.dataview.List`在 Sencha 中使用时，它会在数据加载时自动插入一个漂亮的加载微调器。这一切都很好而且很花哨，但我想知道如何使用自定义加载器`.gif`。

我环顾四周，认为我需要更改负载掩码，但不是积极的，因为我是新手。请参阅[此链接](http://www.sencha.com/forum/showthread.php?229684-loading-mask-animtated-gif)。

下面是我的列表之一的代码。我希望能够将建议的代码添加到一个地方，以便所有列表都受到影响并拥有新的微调器。

```
 {
        xtype: 'list',
        height: '',
        id: 'categoryList',
        itemId: '',
        width: '100%',
        scrollable: false,
        emptyText: '<div class="pdtsListHtml" style="margin-top:30%">Product List Empty</div>',
        itemTpl: [
          '<div ><div class="pdtsListHtml" style="display:inline;">{navigationElementItemName}&nbsp;({navigationElementItemRecordCounts})</div><div style="display:inline;float:right;margin-right:5px;"><img src="resources/image/arrow.png" width="11" height="11"></div></div>'
        ],
        store: 'productListStore',
        allowDeselect: true,
        onItemDisclosure: false
      } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T14:00:37.593

这是一个[**小提琴**](http://jsfiddle.net/aatiis/pNY7y/)，它向您展示了一个带有使用 gif 的加载掩码的示例列表。

基本上你应该定义你自己的`Ext.LoadMask`子类并在列表中使用它：

```
Ext.define("Test.MyLoadMask", {
    extend: "Ext.LoadMask",
    alias: "widget.myloadmask",
    getTemplate: function() {
        var prefix = Ext.baseCSSPrefix;

        return [
            {
                reference: 'innerElement',
                cls: prefix + 'mask-inner',
                children: [
                    {
                        reference: 'indicatorElement',
                        cls: prefix + 'loading-spinner-outer',
                        children: [
                            { tag: 'img', src: "http://example.com/my-spinner.gif" }
                        ]
                    },
                    {
                        reference: 'messageElement'
                    }
                ]
            }
        ];
    }
}); 
```

然后你应该[`applyMasked`](http://docs.sencha.com/touch/2-1/#!/api/Ext.Container-method-applyMasked)在你的列表中定义一个来修改`xtype`并将其设置为`myloadmask`而不是`loadmask`。

# ant - 如何从构建器中删除此错误：模块：put-selector/node-html; 依赖：dojox

> ID：13953502
> 
> 赞同：2
> 
> 时间：2012-12-19T13:30:52.187
> 
> 标签：ant, builder, dojo

我知道我可以忽略这个错误：

> 错误（311）缺少依赖项。模块：put-selector/node-html；依赖：dojox

但是有可能消除这个错误吗？因为这个错误让我感到不安。我有一个 ANT 构建器，我想在其中捕获真正的错误。然后，在捕获真正的错误之后停止构建器。

但是我的 ANT builder 总是停止，因为有这个错误可以忽略。

# heroku - heroku 多个 web 进程

> ID：13953505
> 
> 赞同：5
> 
> 时间：2012-12-19T13:31:01.160
> 
> 标签：heroku

是否可以在一个实例中运行 2 个不同的 Web 进程，例如

`for /url1/ some process`

和

`for /url2/ another`

或一些端口操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:12:41.407

Heroku 有[Dynos](https://devcenter.heroku.com/articles/dynos)的概念。它们可以粗略地被认为是过程。

每个 Dyno 下可以运行多个进程。Heroku 对请求进行负载平衡。无需特殊配置。

例如，可以将[Unicorn Web 服务器](http://unicorn.bogomips.org/)配置为生成“工作”进程。每个“worker”服务一个 HTTP 请求。因此，如果您将 Unicorn 配置为拥有 3 个工作人员，则 2 个 Dynos 将为您提供 6 个进程来服务 HTTP 请求。

这些文章应该可以帮助您了解 Heroku 的工作原理：

*   [测功机和测功机歧管](https://devcenter.heroku.com/articles/dynos)
*   [过程模型](https://devcenter.heroku.com/articles/process-model)

# java - android java宏或“在编译时替换之前”可能吗？

> ID：13953506
> 
> 赞同：0
> 
> 时间：2012-12-19T13:31:08.487
> 
> 标签：java, android, macros

我的目标如下：

我想使用类似的东西

```
if (!checkLicense())
{
   ... close app and show some informations/links...
} 
```

在我的代码中的一些随机位置......但我想防止有人反编译apk，`checkLicense()`用类似的东西替换Funktion`checkLicense(){ return true; }`并重新编译apk......

在java中可能有这样的事情吗？

顺便说一句，如果这种方法没有意义，请不要麻烦告诉我并向我解释......或者有人可以告诉我，其他人是如何做到的？没有找到太多有用的信息...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:33:59.053

保护您的应用的推荐方法是使用[Google 应用程序许可](http://developer.android.com/google/play/licensing/index.html)

# c# - Visual Studio csproj 结构 - 编译元素包含对已删除文件的引用

> ID：13953509
> 
> 赞同：1
> 
> 时间：2012-12-19T13:31:17.140
> 
> 标签：c#, visual-studio, visual-studio-2012

我在我的解决方案中删除了一个类。
csproj 文件仍然包含对它的引用。

如下

```
<ItemGroup>
    <Compile.. >
    <Compile Include="MyPath\MyDeletedFile.cs" />
    <Compile.. >
</ItemGroup> 
```

为什么这个文件没有被删除？
如何删除它？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:36:29.393

只需从 csproject 文件中删除该行。那应该做魔术

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:36:34.283

右键单击项目选择**“卸载项目”**

右键单击项目选择**“编辑”** ... hack away...

右键单击项目选择**“重新加载”**

# node.js - 如何让 websocket 在 Node.js 中等待

> ID：13953510
> 
> 赞同：3
> 
> 时间：2012-12-19T13:31:22.370
> 
> 标签：node.js

我正在尝试在网络套接字上建立连接。但我无法让它等到服务器 Started 。每当我在没有服务器运行的情况下启动我的客户端时，我就会陷入错误事件。我应该怎么做才能让我的客户端等到服务器启动？

我在 Node.js 中的客户端

```
var WebSocket = require('ws');
var ws = new WebSocket('ws://localhost:90');

ws.on('open', function() {
     console.log('Client 1 Started');
});

ws.on('message', function(message) {
     console.log(message);
});

ws.on('error', function(err) {
     console.log('Client Error :- ',err.code);
});

ws.on('close', function() {
 console.log('Connection terminated..Closing Client 1');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T14:39:00.933

我认为民意调查是要走的路。尝试这样的事情：

```
var WebSocket = require('ws'),
    ws;

var poll = function( ) {

    ws = new WebSocket('ws://localhost:90');

    ws.on('open', function() {
        console.log('Client 1 Started');
    });

    ws.on('message', function(message) {
        console.log(message);
    });

    ws.on('error', function(err) {
        // Check error code? Maybe put it in close event?
        setTimeout( poll, 1000);
    });

    ws.on('close', function() {
        console.log('Connection terminated..Closing Client 1');
    });
} 
```

毕竟为了等待服务器启动，你必须从服务器接收一些事件，比如“嘿，我起来了”，但是你必须已经连接到它。所以我认为没有其他方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:42:22.550

为您从法语翻译成英语 ^ ^ 来自[http://www.atinux.fr/2011/08/28/tutoriel-socket-io-debutant/的 node.js 上 tchat 的小话题（抱歉用法语发表评论）](http://www.atinux.fr/2011/08/28/tutoriel-socket-io-debutant/)

**服务器端**

```
var io = require('socket.io'); 
```

然后，在使用 Node JS 创建 HTTP 服务器后，必须使用 Socket.IO 来监听它：

```
io = io.listen(app); 
```

**客户端**

您需要在标题中插入指向库的链接。html:

```
<script type="text/javascript" src="/socket.io/socket.io.js"> 
```

然后你有一个新的连接到服务器：

```
<script type="text/javascript">
    var socket = io.connect();
</script> 
```

**傍晚**

要创建事件，只需执行以下操作：

```
 socket.on('monEvenement', maFonction); 
```

如您所见，套接字变量尚未在服务器端声明，事实上，它应该由于事件“连接”而恢复

```
io.sockets.on('connection', function (socket) {

}); 
```

**呼叫晚会**

```
socket.emit('monEvenement', mesDonnees); 
```

其他广播

```
socket.broadcast.emit('monEvenement', mesDonnees); 
```

**示例服务器端**

```
var html = require('fs').readFileSync(__dirname+'/app.html');
var app = require('http').createServer(function(req, res){ res.end(html); });
app.listen(8080);
var io = require("socket.io");
var io = io.listen(app);
io.sockets.on('connection', function (socket) {
    socket.emit('faitUneAlerte');
}); 
```

**客户端示例**

```
<script type="text/javascript" src="/socket.io/socket.io.js"></script>
<script type="text/javascript">
    var socket = io.connect();
    socket.on('faitUneAlerte', function () {
        alert('Je fais une alerte car on m\'a appelé !');
    });
</script> 
```

**最后** * *Tchat Html* *

```
<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Tchat avec Socket.IO</title>
    <script type="text/javascript" src="/socket.io/socket.io.js"></script>
    <style type="text/css">
    body {
        background-color : rgb(50,50,80);
        color : white;
        text-align : center;
    }
    #tchat {
        background-color : white;
        opacity : 0.8;
        width : 500px;
        height : 300px;
        margin : auto;
        border : 3px rgb(40,40,40) solid;
        overflow : auto;
    }
    .line {
        border-bottom : 1px rgb(80,80,80) solid;
        padding : 4px;
        text-align:left;
        color : rgb(40,40,40);
    }
    </style>
</head>
<body>
  <h1>Tchat avec Socket.IO</h1>
  <div id="tchat"></div>
  <form onsubmit="return (envoiMessage());">
    <b>Message : </b><input type="text" name="message" id="message" style="width:250px;" /> <input type="submit" value="Envoyer" />
  </form>
  <script type="text/javascript">
  // On demande le pseudo de l'utilisateur
  var pseudo = prompt('Votre pseudo ?') || 'Utilisateur';
  // On se connecte au serveur
  var socket = io.connect();
  // On creer l'evenement recupererMessages pour recuperer direcement les messages sur serveur
  socket.on('recupererMessages', function (messages) {
  // messages est le tableau contenant tous les messages qui ont ete ecris sur le serveur
  var html = '';
  for (var i = 0; i < messages.length; i++)
    html += '<div class="line"><b>'+messages[i].pseudo+'</b> : '+messages[i].message+'</div>';
  document.getElementById('tchat').innerHTML = html;
  });
  // Si quelqu'un a poste un message, le serveur nous envoie son message avec l'evenement recupererNouveauMessage
  socket.on('recupererNouveauMessage', function (message) {
    document.getElementById('tchat').innerHTML += '<div class="line"><b>'+message.pseudo+'</b> : '+message.message+'</div>';
  });
  // Quand on veut envoyer un message (quand il a valider le formulaire)
  function envoiMessage(mess) {
  // On recupere le message
  var message = document.getElementById('message').value;
  // On appelle l'evenement se trouvant sur le serveur pour qu'il enregistre le message et qu'il l'envoie a tous les autres clients connectes (sauf nous)
  socket.emit('nouveauMessage', { 'pseudo' : pseudo, 'message' : message });
    // On affiche directement notre message dans notre page
    document.getElementById('tchat').innerHTML += '<div class="line"><b>'+pseudo+'</b> : '+message+'</div>';
    // On vide le formulaire
    document.getElementById('message').value = '';
    // On retourne false pour pas que le formulaire n'actualise pas la page
    return false;
    }
  </script>
</body>
</html> 
```

**最后** * *app.js* *

```
var http    =   require('http');
var fs      =   require('fs');

// Creation du serveur
var app = http.createServer(function (req, res) {
    // On lit notre fichier app.html
    fs.readFile('./tchat.html', 'utf-8', function(error, content) {
        res.writeHead(200, {'Content-Type' : 'text/html'});
        res.end(content);
    });
});

// Variables globales
// Ces variables resteront durant toute la vie du seveur pour et sont commune pour chaque client (node server.js)
// liste des messages de la forme { pseudo : 'Mon pseudo', message : 'Mon message' }
var messages = [];

//// SOCKET.IO ////

var io      =   require('socket.io');

// Socket io ecoute maintenant notre application !
io = io.listen(app); 

// Quand une personne se connecte au serveur
io.sockets.on('connection', function (socket) {
    // On donne la liste des messages (evenement cree du cote client)
    socket.emit('recupererMessages', messages);
    // Quand on recoit un nouveau message
    socket.on('nouveauMessage', function (mess) {
        // On l'ajout au tableau (variable globale commune a tous les clients connectes au serveur)
        messages.push(mess);
        // On envoie a tout les clients connectes (sauf celui qui a appelle l'evenement) le nouveau message
        socket.broadcast.emit('recupererNouveauMessage', mess);
    });
});

///////////////////

// Notre application ecoute sur le port 8080
app.listen(8080);
console.log('Live Chat App running at http://localhost:8080/'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T05:07:55.373

它为我工作......现在客户端可以等待服务器启动......

```
var WebSocket = require('ws');
var ws = new WebSocket('ws://localhost:90');

 ws.on('error', function(err) {
    console.log('Waiting For Connection..');
    setTimeout( poll, 1000);
});

var poll = function( ) {

ws = new WebSocket('ws://localhost:90');

ws.on('open', function() {
    console.log('Client 1 Started');
});

ws.on('message', function(message) {
    console.log(message);
});

ws.on('error', function(err) {
    // Check error code? Maybe put it in close event?
    setTimeout( poll, 1000);
});

ws.on('close', function() {
    console.log('Connection terminated..Closing Client 1');
});
} 
```

# java - jboss服务器的Java文档？

> ID：13953519
> 
> 赞同：1
> 
> 时间：2012-12-19T13:31:57.873
> 
> 标签：java, eclipse, jakarta-ee, jboss, javadoc

我只是想知道我在哪里可以获得 jboss 库的 javadocs？每当我将鼠标悬停在某个框架（例如 servlet）上的某个元素上时，就会弹出

> 注意：该元素既没有附加源也没有附加 Javadoc，因此找不到 Javadoc。

我目前正在使用 Eclipse。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:37:17.757

您需要 Java EE 规范的 javadoc，因为 JBoss 是它的实现。

因此，请获取 JBoss 正在实施的 Java EE 规范的 javadocs。

您可以从这里下载 Java EE 6 的 javadoc：

[Java EE 6 更新 2 Javadocs](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-eedocs-419425.html#java_ee_sdk-6u2-docs-JPR)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:38:38.903

您实际上应该考虑将通用**JavaEE** API 文档放入 Eclipse，而不是 JBoss 特有的文档。毕竟（在一个完美的世界中）您的代码应该只依赖于通用 JavaEE 特性，而不是 JBoss 实现。

至于如何获取JavaEE Javadoc，这两个问题应该说明一切：

*   [在 Eclipse 中启用 Java EE 的完整文档](https://stackoverflow.com/questions/2558748/enabling-full-documentation-for-java-ee-in-eclipse)
*   [将 Javadoc for Java EE 6 API 集成到 Eclipse 中](https://stackoverflow.com/questions/9519013/integrating-javadoc-for-java-ee-6-api-into-eclipse)

# javascript - XHR2 凭证请求 - 安全/可伪造？

> ID：13953520
> 
> 赞同：1
> 
> 时间：2012-12-19T13:32:10.790
> 
> 标签：javascript, ajax, security, xmlhttprequest, credentials

我正在尝试了解凭证式 XHR2 请求的安全性如何。

具体来说，**我可以确定请求来自浏览器运行时环境**，而不是机器人（即服务器端程序），还是后者可以伪造请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:34:48.053

从来没有任何方法可以告诉（几乎可以确定）哪种类型的客户端发出了 HTTP 请求。

使用凭据的重点是只有您信任的用户才能拥有它们。因此，您信任提出请求的用户，而不是他们使用的软件。

# android - 上传新 APK 后无法从 Play 商店更新应用

> ID：13953523
> 
> 赞同：2
> 
> 时间：2012-12-19T13:32:11.740
> 
> 标签：android, google-play

我们正面临应用程序更新的问题。我们已在 Play 商店中上传了最新版本的应用程序，其中包含更新版本代码和名称。但是当用户尝试更新他们现有的应用程序时，Play 不会显示“更新”选项，而是显示“打开”和“卸载”。用户卸载现有应用后，即可成功安装应用。仅当用户尝试更新其现有应用程序时才会出现此问题。

请分享你的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:35:40.127

Google Play 最多可能需要 24 小时才能在其所有服务器上推送应用程序更新。

稍等片刻，所有符合条件的用户都会收到更新。但是，如果您的更新添加了某些设备不支持的功能请求，它们将不会获得更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:27:08.027

我发现在另一个论坛讨论中，很少有应用程序面临类似的问题，这是由于 Google Play 中的错误。

当具有较低版本的用户登陆 Google Play 时，用户将看到卸载/打开选项。如果用户访问设置 > 应用程序 > Google Play，则安装在设备中的 Google Play 客户端具有“卸载更新”选项（附截图）。单击“卸载更新”后，应用程序的版本信息将被刷新，并且

以下是参考链接：

参考：[http ://productforums.google.com/forum/#!topic/mobile/z94celd1kTo](http://productforums.google.com/forum/#!topic/mobile/z94celd1kTo)

希望这对您有所帮助。

# javascript - Plupload & jQuery UI : 在对话框的按钮点击时触发上传

> ID：13953525
> 
> 赞同：0
> 
> 时间：2012-12-19T13:32:25.497
> 
> 标签：javascript, jquery-ui, plupload

我试图`plupload.start()`从 jQuery 模态对话框按钮触发事件，但似乎`plupload`无法识别该对象，因此给了我以下错误：

```
TypeError: Object #<Object> has no method 'start' 
```

`plupload`我在对话框的打开事件中初始化了对象，我可以使用原始按钮正确上传文件，但我更喜欢以标准布局发送文件和表单（而不是有两个“上传”按钮，一个用于表单，一个用于对于 plupload 插件）。

我也不想在 FileAdded 事件上触发上传权。任何人都知道如何进行？

初始化代码：

```
$("#uploader").plupload({
                // General settings
                runtimes : 'flash,html5,html4',
                url : 'pagesPub/update_pub.php',
                max_file_size : '25mb',
                chunk_size : '25mb',
                unique_names : true,

                // Specify what files to browse for
                filters : [
                    {title : "Images", extensions : "jpg,jpeg,gif,png"}
                ],

                // Flash settings
                flash_swf_url : 'js/moxie/plupload.flash.swf',

                // Silverlight settings
                silverlight_xap_url : 'js/moxie/plupload.silverlight.xap',

                FilesAdded : function (up, files) {
                    var fileCount = up.files.length,
                    i = 0,
                    ids = $.map(up.files, function (item) { return item.id; });

                    for (i = 0; i < fileCount; i++) {
                        uploader.removeFile(uploader.getFile(ids[i]));
                    }

                    // Do something with file details
                }

            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:41:27.473

`plupload.start()`是调用该方法的错误方式（因为它是一个 jQuery 对象）。

你必须这样称呼它：

```
$('#uploader').plupload('start'); 
```

# c++ - 如何使用 quazip 压缩目录/文件夹？

> ID：13953528
> 
> 赞同：4
> 
> 时间：2012-12-19T13:32:31.550
> 
> 标签：c++, qt, quazip

我有一个目录，其中包含要压缩的文件和文件夹。我正在使用 qt-project quazip。所以我想我写了一个函数来打包一个目录的所有内容，包括文件结构。

如何在 zip 文件中创建文件夹？我用 QuaZipNewInfo 尝试过，但无法正常工作。

例如，我想用以下内容压缩 tmp 文件夹：

```
tmp/1.txt
tmp/folder1/2.txt
tmp/folder1/3.txt
tmp/folder2/4.txt
tmp/folder2/folder3/5.txt 
```

使用通用存档工具（存档实用程序）提取文件后得到的是：

```
tmp/1.txt
tmp/2.txt
tmp/3.txt
tmp/4.txt
tmp/5.txt 
```

这是我到目前为止所拥有的：

```
void Exporter::zipFilelist(QFileInfoList& files, QuaZipFile& outFile, QFile& inFile, QFile& inFileTmp)
{
    char c;
    foreach(QFileInfo file, files) {
        if(file.isDir()  && file.fileName() != "." && file.fileName() != "..") {
            QFileInfoList infoList = QDir(file.filePath()).entryInfoList();
            zipFilelist(infoList, outFile, inFile, inFileTmp);
        }
        if(file.isFile()) {
            inFileTmp.setFileName(file.fileName());
            inFile.setFileName(file.filePath());

            if(!inFile.open(QIODevice::ReadOnly)) {
                qDebug() << "testCreate(): inFile.open(): " << inFile.errorString().toLocal8Bit().constData();
            }
            QuaZipNewInfo info(inFileTmp.fileName(), inFile.fileName());
            if(!outFile.open(QIODevice::WriteOnly, info)) {
                qDebug() << "testCreate(): outFile.open(): " << outFile.getZipError();
            }
            while(inFile.getChar(&c)&&outFile.putChar(c)) ;
            if(outFile.getZipError()!=UNZ_OK) {
                qDebug() << "testCreate(): outFile.putChar(): %d"<< outFile.getZipError();
            }

            outFile.close();
            if(outFile.getZipError()!=UNZ_OK) {
                qDebug() << "testCreate(): outFile.close(): %d"<< outFile.getZipError();
            }
            inFile.close();
        }
    }
} 
```

这就是我调用函数的方式：

```
QFileInfoList files = QDir(sourceFolder).entryInfoList();
QFile inFile;
QFile inFileTmp;
QuaZipFile outFile(&zip);
zipFilelist(files, outFile, inFile, inFileTmp); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T14:21:43.120

> 我没有收到任何错误。当我想解压缩文件时，它不会提取文件夹（因为我可能不会将它们打包到 zip 中！？）。因此，我将所有子文件夹的所有文件解压缩到一个文件夹中。

似乎在您的函数中，您递归地获取了**文件**夹中的文件，而**不是**文件夹本身。当您递归查找子目录中的文件时，请尝试创建一个文件夹以将文件压缩到其中。

你可能想看看这个答案： [https ://stackoverflow.com/a/2598649/1819900](https://stackoverflow.com/a/2598649/1819900)

QuaZip 提供的实用程序怎么样？ [http://quazip.sourceforge.net/classJlCompress.html](http://quazip.sourceforge.net/classJlCompress.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T14:52:05.277

创建 QuaZipNewInfo 对象时，将文件的路径和文件名指定为您希望将其存储在 zip 中的第一个参数，并将磁盘上文件的路径和文件名指定为第二个参数。例子：

在 zip 中添加**C:/test/myFile.txt**作为**test/myFile.txt**：

`QuaZipNewInfo("test/myFile.txt", "C:/test/myFile.txt")`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T18:30:04.813

为了在您的 zip 文件中创建一个文件夹，您需要创建一个名称以“/”结尾的空文件。答案不包括文件/文件夹列表，而是专注于在 zip 文件中创建文件夹。

```
QDir sourceRootDir("/path/to/source/folder");

QStringList sourceFilesList; // list of path relative to source root folder
sourceFilesList << "relativePath.txt" << "folder" << "folder/relativePath";

QualZip zip("path/to/zip.zip");

if(!zip.open(QuaZip::mdCreate)){
  return false;
}

QuaZipFile outZipFile(&zip);

// Copy file and folder to zip file

foreach (const QString &sourceFilePath, sourceFilesList) {

    QFileInfo sourceFI(sourceRootDir.absoluteFilePath(sourceFilePath));

    // FOLDER (this is the part that interests you!!!)
    if(sourceFI.isFolder()){
        QString sourceFolderPath = sourceFilePath;
        if(!sourceFolderPath.endsWith("/")){
            sourceFolderPath.append("/");
        }

        if(!outZipFile.open(QIODevice::WriteOnly, QuaZipNewInfo(sourceFolderPath, sourceFI.absoluteFilePath()))){
            return false;
        }
        outZipFile.close();

    // FILE
    } else if(sourceFI.isFile()){

        QFile inFile(sourceFI.absoluteFilePath());
        if(!inFile.open(QIODevice::ReadOnly)){
            zip.close();
            return false;
        }

        // Note: since relative, source=dst
        if(!outZipFile.open(QIODevice::WriteOnly, QuaZipNewInfo(sourceFilePath, sourceFI.absoluteFilePath()))){
            inFile.close();
            zip.close();
            return false;
        }

        // Copy
        qDebug() << "         copy start";
        QByteArray buffer;
        int chunksize = 256; // Whatever chunk size you like
        buffer = inFile.read(chunksize);
            while(!buffer.isEmpty()){
            qDebug() << "         copy " << buffer.count();
            outZipFile.write(buffer);
            buffer = inFile.read(chunksize);
        }

        outZipFile.close();
        inFile.close();
    } else {
        // Probably simlink, ignore
    }
}
zip.close();
return true; 
```

# c# - 不同的是不使用 LINQ

> ID：13953535
> 
> 赞同：13
> 
> 时间：2012-12-19T13:33:13.143
> 
> 标签：c#, linq

我想使用 distinct 从 LIST 中删除重复的行。

这是**结果集**（如您所见，索引 12 和 14 重复）

```
id  idIndice    idName         idTipo   tamanho     caminho
12  11          Processo       3        10          C:\Program Files\Empenho\Senha.txt
13  13          Endereço       1        250         C:\Program Files\Empenho\Senha.txt
14  12          Número         2        5           C:\Program Files\Empenho\Senha.txt
15  9           Cep            5        8           C:\Program Files\Empenho\Senha.txt 
16  10          Dt. de Nasc.   4        0           C:\Program Files\Empenho\Senha.txt
12  11          Processo       3        10          C:\Program Files\Empenho\Senha.txt
14  12          Número         2        5           C:\Program Files\Empenho\Senha.txt 
```

这是我要归档的**sql （这可以完成工作）**

```
select DISTINCT u.id, u.idIndice, t.idName, t.idTipo, t.tamanho, l.caminho
from  tgpwebged.dbo.sistema_Indexacao as u
join  tgpwebged.dbo.sistema_Indexes as t on u.idIndice = t.id
join  tgpwebged.dbo.sistema_Documentos as l on u.idDocumento = l.id
join  tgpwebged.dbo.sistema_DocType_Index as v on t.id = v.indexId
where u.idDocumento = 10 
```

这是我正在尝试适应的**LINQ**

```
var docObj = from u in context.sistema_Indexacao
join t in context.sistema_Indexes on u.idIndice equals t.id
join l in context.sistema_Documentos on u.idDocumento equals l.id
join v in context.sistema_DocType_Index on t.id equals v.indexId
join m in context.sistema_DocType on v.docTypeId equals m.id
where u.idDocumento == id
select new Gedi.Models.OperacoesModel.getDocIndex
{ ...  }; 
```

这就是我正在尝试的：

```
List<Gedi.Models.OperacoesModel.getDocIndex> docIndexModelDup = docObj.ToList();
List<Gedi.Models.OperacoesModel.getDocIndex> docIndexModel =
docIndexModelDup.Distinct().ToList(); 
```

但是我仍然得到相同的 7 行，就好像根本没有 DISTINCT 一样。

为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T13:38:22.493

如果要在 sql 中执行 Distinct，请在 ToList() 之前调用 Distinct()。

```
var docObj = (from u in context.sistema_Indexacao
    join t in context.sistema_Indexes on u.idIndice equals t.id
    join l in context.sistema_Documentos on u.idDocumento equals l.id
    join v in context.sistema_DocType_Index on t.id equals v.indexId
    join m in context.sistema_DocType on v.docTypeId equals m.id
    where u.idDocumento == id
    select new Gedi.Models.OperacoesModel.getDocIndex
    { ...  }).Distinct().ToList(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T13:41:30.990

```
var docIndexModel = docIndexModelDup
    .GroupBy(x => x.Id)
    .Select(g => g.First()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:36:02.897

尝试：

```
var distinctRowsById = docObj.Select(i => i.Id)
    .Distinct()
    .Select(i => docObj.First(o => o.Id == i) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T18:11:05.063

每当使用 sql 时，请在 .ToList() 之前使用 .Distinct()。这可能会解决问题。例如：

```
var ans = (from x in xyx
             where ...
             select new ...
             {
                a = ...,
                b = ...
             }).Distinct().ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T13:46:28.303

在您的 getDocIndex 对象上，您需要实现接口 [IEquatable。](http://msdn.microsoft.com/en-us/library/ms131187.aspx)这将告诉 Distinct 方法在进行比较时您的对象是否彼此相等。这是与 Distinct 进行比较的正确方法，而且更简洁。

```
public class getDocIndex: IEquatable<getDocIndex> 
{
    ....
    public bool Equals(getDocIndex otherModel)
    {
        if (otherModel == null) 
            return false;
        return this.idName == otherModel.idName && this.idTipo == otherModel.idTipo
        && this.tamanho == otherModel.tamanho && this.caminho == otherModel.caminho;
    } 
} 
```

实现这个接口后，可以继续调用 distinct ，它会正常工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-20T09:26:41.430

Distinct 仅适用于 Lambda ..like this

```
var data =_CustomerCompanyRepository.GetAll().Where(p => (p.PrimaryUser == userid || p.SecondayUser == userid)).Distinct(); 
```

如果我们想删除 linq 查询中的重复项 ..use 组

```
 var Account = (from c in depa join u in UserManager.Users on c.Id equals u.DepartmentId
                               group c by c into g
                               select new datadto{ Id = g.Key.Id, Name = g.Key.DepatmentName }).ToArray(); 
```

# php - 有没有办法在我的 PHP MVVM 设计中使用 jQuery？

> ID：13953536
> 
> 赞同：2
> 
> 时间：2012-12-19T13:33:20.567
> 
> 标签：php, jquery, mvvm

一些背景知识：我来自一个 .Net 环境，我们必须在所有项目中使用 MVVM 来将视图与视图模型分开。现在我正在处理我自己的个人 PHP 项目，我决定使用相同的设计并将视图和视图模型分开。

因此，在视图上，我创建了一个视图模型对象并在必要时调用后台函数，而在视图中，代码仅用于提供显示。

例子：

视图.php

```
<?php
include('viewmodel.php');

$vm = new viewmodel.php();

if(some condition)
{
  $vm->doSomething();
}
?>
<html>
<body>
//some form code
</body>
</html> 
```

视图模型.php

```
<?php
//includes

class viewmodel
{
  function viewmodel()
  {
  }

  function doSomething()
  {
  }
}
?> 
```

现在我已经学习了 jQuery，我想用它来使我的页面更加动态，减少往返服务器的流量，减少页面刷新的需要。

我见过这样的调用，它允许 jQuery 调用带有一些发布数据的 php 页面：

```
$.ajax({ url: '/my/site',
         data: {action: 'test'},
         type: 'post',
         success: function(output) {
                      alert(output);
                  }
}); 
```

但是，这不再是面向对象的设计，我必须从我的视图模型中删除所有类定义才能使其正常工作。

jQuery 有没有办法对视图模型进行这些调用，或者使用 jQuery 是否意味着您必须返回到程序化的编程风格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:44:45.900

> 但是，这不再是面向对象的设计，我必须从我的视图模型中删除所有类定义才能使其正常工作。

什么让你有那个想法？向服务器发出 AJAX 请求并没有本质上是面向对象或非面向对象的。这些客户端发起的请求也与服务器端代码的架构没有任何关系。

在您的视图中，您可以拥有任何您想要的 JavaScript 代码。它不会对渲染视图的服务器端代码产生影响，因为 JavaScript 就它而言只是文本，与 HTML 没有什么不同。

至于服务器端处理程序，您可能想要做的是为 jQuery 代码调用的“页面”（“资源”是一个更准确的词）创建全新的视图和视图模型。

因此，例如，您可能会收到来自浏览器的请求，该请求`/my/site`将使用您现有的架构填充视图模型以绑定到视图并将该视图返回给客户端。该视图将包含一些 JavaScript 代码，其中一些调用另一个资源。假设其他资源类似于`/api/products`返回用户可用的“产品”列表。

请注意，我将资源放在不同的路径下，`api`而不是`my`. 这是一个相当武断的决定，它仅用于说明在这种情况下您返回的不是“页面”，而是自动化 API 的 JSON 数据。当然，资源的实际名称可以是您喜欢的任何名称。

该资源仍然可以是视图并绑定到视图模型，但在这种情况下，视图是 JSON 数据而不是 HTML。与任何事情一样，有很多方法可以做到这一点。一个快速的谷歌搜索出现了[另一个问题](https://stackoverflow.com/questions/2574728/serialize-or-json-in-php)，它讨论了几种生成 JSON 数据的方法之间的差异。实际上，在这种情况下，您的“视图”可能完全是空的，您所做的只是将视图模型序列化为 JSON 并返回它。（我的 PHP 相当生疏，但 ASP.NET MVC 等价物将返回一个`ActionResult`of`Json()`而不是`View()`.）

Keep in mind that, from the perspective of the server-side code, there is no difference between returning a view in HTML vs. returning one in JSON (or XML, or raw text, or anything else). A view is a view, each one independent from the others.

# extjs - 远程组合框第一次给AJAX调用，即使是级联的

> ID：13953537
> 
> 赞同：0
> 
> 时间：2012-12-19T13:33:23.033
> 
> 标签：extjs

团队，

我有奇怪的问题。

我有两个组合框，我想使用其他的值级联其中一个。

因此，在一个组合框的选择事件中，我得到另一个组合框并加载该商店。

但我观察到的是以下情况。

1.  用户第一次选择第一个组合框值，因此为第二个组合框加载存储。
2.  当用户第一次选择第二个组合框时，会进行 AJAX 调用，不知道为什么？
3.  再一次，如果用户选择第一个组合框，则为第二个组合框加载存储
4.  当用户再次选择第二个组合框时，不进行 AJAX 调用（为什么第一次进行 AJAX 调用）

在第 2 步中，我无法理解为什么要为第二个组合进行 AJAX 调用，因为它已在第 1 步中加载。

代码详情

```
 xtype: 'combo',id='firstcombo', name: 'DEFAULT_VALUE' ,minChars:2, value: decodeHtmlContent('') ,width:200 ,listWidth:500, resizable: true,
 valueField : 'id', displayField: 'id', pageSize: 15,forceSelection:true, enableKeyEvents: true,
 store: new Ext.data.Store({reader: new Ext.data.CFQueryReader({id: 'NAME', 
            fields:[{name:'id', mapping:'id'}]}), 
            fields: [{name:'id', mapping:'id'}], 
            url:'server/ajax/Params'
            }

 }),
 listeners : {
         select:function(combo, record, index) {
            this.setRawValue(decodeHtmlContent(record.get('id')));
            cascadeFields();
        }

 xtype: 'combo',id='secondcombo', name: 'DEFAULT_VALUE' ,minChars:2, value: decodeHtmlContent('') ,width:200 ,listWidth:500, resizable: true,
 valueField : 'id', displayField: 'id', pageSize: 15,forceSelection:true, enableKeyEvents: true,
 store: new Ext.data.Store({reader: new Ext.data.CFQueryReader({id: 'NAME', 
            fields:[{name:'id', mapping:'id'}]}), 
            fields: [{name:'id', mapping:'id'}], 
            url:'server/ajax/Params',
            baseParam:{valuefirst:''}
            },
            listeners: {

                beforeload: function(store, options) {
                    var value = Ext.getCmp('fistcombo').value;
                    Ext.apply(options.params, {

                                valuefirst:value
                            });

                }, 

 }),
 listeners : {
         select:function(combo, record, index) {
            this.setRawValue(decodeHtmlContent(record.get('id')));
        }

function cascadeFields()
{

  var combo = Ext.getCmp('secondcombo');

  if(combo.store)
  {

  var store = combo.store;

  combo.setDisabled(true);
  combo.clearValue('');
  combo.store.removeAll();
  combo.store.load();        
  combo.setDisabled(false);

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:32:18.647

您应该在商店中指定不自动加载：

> 自动加载：假

在组合框中，您应该将查询模式设置为本地：

> 查询模式：'本地'

编辑：您可能希望在第一个组合商店上自动加载。

# dynatree - 撤消拖放项目

> ID：13953538
> 
> 赞同：1
> 
> 时间：2012-12-19T13:33:26.817
> 
> 标签：dynatree, jquery-dynatree

我有一个功能齐全的动态树，其中数据通过 ajax（数据库源）加载，现在我为树启用了拖放功能。当一个项目被删除时，我会发出一个 ajax 请求来更新数据库，以便更新节点数据。但是我在 php 中做了几次检查，看看是否允许将节点放置在它的“新位置”上。

如果php拒绝删除节点的新位置，我如何恢复节点的原始位置？可以重新加载完整的树，但我想避免这种情况，只恢复特定项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:21:03.043

好的，我找到了正确的方法来做到这一点。我只是向 php 发出 ajax 请求，但将其设置为同步（异步错误），因此 dynatree 代码将等待结果。然后我对 dynatree 的移动功能进行了检查：

```
$.ajax({
        url: "xxx,
        async: false,
        success: function(data){
            if(data.error == 0){
                showModalOk(data.message);
                phpres = true;
            }else
                phpres = false;
            }

        }
    });

if(phpres == true){
    sourceNode.move(node, hitMode);
    node.expand(true);
} 
```

这样节点只有在允许的情况下才会被移动，所以之后不需要恢复节点

# grails - grails中的多对多关系和每个记录的状态

> ID：13953539
> 
> 赞同：0
> 
> 时间：2012-12-19T13:33:27.697
> 
> 标签：grails

我有 2 个与自己有多对多关系的域模型

```
Candidate{
   String name
   static hasMany = [positions:Position]
}

Position{

   static hasMany = [candidates:Candidate]
   static belongsTo = [Candidate]
} 
```

我的要求是获取每个职位的每个候选人的入围状态，但是 grails 自己创建中间表，所以知道如何实现它。

任何评论、想法、示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:27:18.193

如果要将状态存储在关系上，您可以为该关系创建一个映射域类，如本[答案](https://stackoverflow.com/a/7877197/901257)中所述。

然后可以通过（假设为 CandidatePosition 类名）检索状态：

```
def candidatePositionList = CandidatePosition.findAllByCandidate(candidateInstance)
candidatePositionList.each {
    it.position.name // Position name
    it.status        // Status of candidate for Position
} 
```

# java-me - zayit.exe 尝试打开 HttpConnection 时应用程序崩溃

> ID：13953542
> 
> 赞同：1
> 
> 时间：2012-12-19T13:33:34.547
> 
> 标签：java-me, midp, j2mepolish, java-wireless-toolkit

尝试在我的 J2ME 应用程序中打开 HttpConnection 时遇到问题。

我正在使用模拟器运行应用程序，但是当涉及到打开 HttpConnection 的代码行时：

HttpConnection 连接 = (HttpConnection)Connector.open(URL);

出现一个对话框，提示应用程序已崩溃 (zayit.exe)。

我缺少什么配置？

# python - 在 Python 中将 2012-12-19 字符串转换为日期时间对象

> ID：13953544
> 
> 赞同：1
> 
> 时间：2012-12-19T13:34:06.200
> 
> 标签：python

我有以下工作代码：

```
import datetime

d = "2012-12-19"                
f = map(int,  d.split('-') )
day = datetime.date( f[0], f[1], f[2] )

print day 
```

但是当我尝试这样写时：

```
day = datetime.date( f ) 
```

我得到一个异常：TypeError：需要一个整数

为什么会这样，我怎样才能写得更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T13:36:08.527

最好是使用以下`datetime.strptime()`方法：

```
datetime.datetime.strptime(d, '%Y-%m-%d').date() 
```

演示：

```
>>> import datetime
>>> d = "2012-12-19"                
>>> datetime.datetime.strptime(d, '%Y-%m-%d').date()
datetime.date(2012, 12, 19) 
```

但是，您没有通过`f[0]`等，如果您这样做了，您的方法会起作用，或者：

```
datetime.date(*f) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:35:51.430

打包参数列表，而不是按`date()`原样传递：

```
day = datetime.date(*f) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:35:59.760

好吧，至少这更具可读性：

```
day = datetime.date(year=f[0], month=f[1], day=f[2]) 
```

# objective-c - xcode 导航按钮网址

> ID：13953545
> 
> 赞同：0
> 
> 时间：2012-12-19T13:34:21.087
> 
> 标签：objective-c, ios, uinavigationbar

我正在尝试向我的应用程序添加一个“主页”按钮，如果您单击工具栏中的按钮，则会将您带到特定的网址“google.com”。

所以我可以在导航栏中放一个按钮，让它说家。

我可以把它放在 viewcontroller.m 中：

```
-(void)openGoogleURL
{
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"https://www.google.com"]];
} 
```

我放入视图控制器的内容是否正确？如何连接我的按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:50:17.663

`UINavigationController`使用`UINavigationItem`每个对象`UIViewController`在导航栏中显示项目。因此，您可以通过在视图控制器上执行以下操作来在栏中添加所需的按钮：

```
[self.navigationItem setRightBarButtonItem:[[UIBarButtonItem alloc] initWithTitle:@"Home" style:UIBarButtonItemStylePlain target:self action:@selector(openGoogleURL)]]; 
```

这样按钮目标操作将与您在 UIViewController 中定义的功能链接。

请注意，对于要添加此按钮的每个视图控制器，您都需要此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:44:24.277

您可以通过编程或使用 Interface Builder 将按钮单击事件连接到您的代码。以下是来自 Apple 网站的一些文档：[https ://developer.apple.com/library/mac/#documentation/General/Conceptual/Devpedia-CocoaApp/TargetAction.html](https://developer.apple.com/library/mac/#documentation/General/Conceptual/Devpedia-CocoaApp/TargetAction.html)

# php - 在 javascript 原型中将 json 字符串从 javascript 发布到 ajax

> ID：13953551
> 
> 赞同：0
> 
> 时间：2012-12-19T13:34:47.730
> 
> 标签：php, javascript, json, prototype

我在原型中将 json 对象传递给 ajax 时遇到问题。
这是情况：
PHP：

```
<?php
    $a = array(k1=>v1, k2=>v2);
    $a = json_encode($a);
?>//JS 
<script>
    var a_js = <?= $a ?>
</script>
<?
    echo '<input type:"button" onclick='save(a_js) value='save js''>';
?> 
```

JS

```
function save(a_json) {
    AJAX_ACTIONS_URL = 'ajax_action.php';
    params = {
        act: 'save_filters_status',
        a_json: a_json
    };
    new Ajax.Request(AJAX_ACTIONS_URL, {
        method: 'post',
        parameters: params,
        onSuccess: function (transport) {
            alert(transport.responseText);
        }
    });
} 
```

Ajax_actions.php

```
if(var_post('act')=='save_filters_status') {
    $x = explode(',',var_post('a_js'));
    print_r($x);
} 
```

现在，我没有看到任何关于`a_js`火狐的帖子，没有来自 ajax 的响应，我有点迷茫，谢谢你的帮助。注意我在 JavaScript 原型框架工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:45:17.003

您`echo`的 'd 按钮有一些错误的引用嵌套：

```
 echo '<input type:"button" onclick='save(a_js) value='save js''>'; 
```

应该：

```
 echo '<input type="button" onclick="save(a_js)" value="save js">'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T12:50:49.383

嘿，我认为我的问题是在从 php 获取 var 之后，我没有在 js 部分使用 JSON.stringify .. 所以这仍然是一个对象。因为这是 php -> js 之间的默认输出。感谢您的帮助。抱歉发布语法错误..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T13:40:59.073

```
 <?php
  $a=array(k1=>v1, k2=>v2)
  $a = json_encode($a)
  ?>//JS 
  <script>
    var a_js='<?=$a?>';
  </script>
  <?
  echo '<input type:"button" onclick='save(a_js) value='save js''>';
 ?> 
```

# api - 如何使用 curl 在 Salesforce 中创建任务？

> ID：13953555
> 
> 赞同：2
> 
> 时间：2012-12-19T13:34:58.870
> 
> 标签：api, curl, salesforce, task

我应该将请求发送到哪个 URL？（我已经有了我的实例，我需要路径）。我有 oauth 令牌，我有数据。谢谢！H

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:51:17.900

好的，我明白了：

```
curl -H 'Authorization: Bearer <oauth token>' \
     https://<your instance url>/services/data/v20.0/sobjects/Task 
```

# java - 如何创建一个方法来显示 ArrayList 对象的内容？

> ID：13953556
> 
> 赞同：2
> 
> 时间：2012-12-19T13:35:03.170
> 
> 标签：java, methods, arraylist

我有一个关于创建一个函数来显示 ArrayList 对象内容的方法的问题。

谁能帮我？简而言之，我不知道如何进一步解释它，需要几页代码（不同的类）才能准确地向您展示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:42:50.797

我相信你正在寻找这个：

```
 List<String> list = new ArrayList<String>();
    list.add("elmement0");
    list.add("elmement1");
    list.add("elmement2");
    System.out.println(Arrays.deepToString(list.toArray())); 
```

`deepToString()`是递归的。例如，Eclipse 在您调试代码时使用此方法。

这将打印出：

> [elmement0，elmement1，elmement2]

您还必须覆盖`toString()`您存储在`List`.

# c# - 尝试在实体框架中使用泛型

> ID：13953558
> 
> 赞同：7
> 
> 时间：2012-12-19T13:35:07.607
> 
> 标签：c#, entity-framework, generics

让我开始吧，我不确定这是否可能。我正在学习泛型，我的应用程序中有几个存储库。我正在尝试制作一个采用泛型类型并将其转换为所有存储库都可以继承的接口的接口。现在谈谈我的问题。

```
public interface IRepository<T>
{
    IEnumerable<T> FindAll();
    IEnumerable<T> FindById(int id);
    IEnumerable<T> FindBy<A>(A type);
} 
```

是否可以使用泛型来确定要查找的内容？

```
public IEnumerable<SomeClass> FindBy<A>(A type)
{
    return _context.Set<SomeClass>().Where(x => x. == type); // I was hoping to do x.type and it would use the same variable to search.
} 
```

为了更好地澄清一点，我正在考虑成为一个字符串、整数或我想要搜索的任何类型。我希望的是我可以说 x.something 等于传入的变量。

我可以使用

```
public IDbSet<TEntity> Set<TEntity>() where TEntity : class
{
    return base.Set<TEntity>();
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:46:07.930

如果您使用`Expression<Func<T, bool>>`而不是`A`这样：

```
public interface IRepository<T>
{
    ... // other methods
    IEnumerable<T> FindBy(Expression<Func<T, bool>> predicate);
} 
```

您可以使用 linq 查询类型，并在调用存储库类的代码中指定查询。

```
public IEnumerable<SomeClass> FindBy(Expression<Func<SomeClass, bool>> predicate)
{
    return _context.Set<SomeClass>().Where(predicate);
} 
```

并这样称呼它：

```
var results = repository.FindBy(x => x.Name == "Foo"); 
```

鉴于它是一个通用表达式，您不必在每个存储库中实现它，您可以将它放在通用基础存储库中。

```
public IEnumerable<T> FindBy(Expression<Func<T, bool>> predicate)
{
    return _context.Set<T>().Where(predicate);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:45:50.927

我使用接口和抽象类的组合来实现这一点。

```
public class RepositoryEntityBase<T> : IRepositoryEntityBase<T>, IRepositoryEF<T> where T : BaseObject
 // 
public RepositoryEntityBase(DbContext context)
    {
        Context = context;
//etc

public interface IRepositoryEntityBase<T> : IRepositoryEvent where T : BaseObject //must be a model class we are exposing in a repository object

{
    OperationStatus Add(T entity);
    OperationStatus Remove(T entity);
    OperationStatus Change(T entity);
   //etc 
```

那么派生类可以有一些对象特定的方法，或者实际上什么都没有，只是工作

```
public class RepositoryModule : RepositoryEntityBase<Module>, IRepositoryModule{
    public RepositoryModule(DbContext context) : base(context, currentState) {}
}
//etc 
```

# asp.net - 回发时只读文本框值消失

> ID：13953559
> 
> 赞同：0
> 
> 时间：2012-12-19T13:35:12.297
> 
> 标签：asp.net

我想以网络形式保留`TextBox`属性`Read Only`。但是当我保留这个时`Read Only`，`PostBack`它的值会消失并且我得到空文本。如何在不丢失`TextBox`价值的情况下实现相同的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:42:11.303

您可以通过阻止用户在文本框中输入值来实现此目的，从而将以下属性添加到文本框中。即使在回发时，它也会保持值。

```
onkeypress="return false;" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-21T21:48:51.003

通过从标签中删除 ReadOnly=”true” 来更改它，我们将在代码中添加它。

现在在代码中添加以下内容： TextBox1.Attributes.Add(“readonly”, “readonly”);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T13:48:27.367

你现在可能是这样的：

```
<asp:TextBox ID="MyTextBox" runat="server" Enabled="false" /> 
```

只需将其更改为：

```
<asp:TextBox ID="MyTextBox" runat="server" ReadOnly="true" /> 
```

并且它将像所有其他表单元素一样通过回发发送其值，同时仍然是只读的。

# php - 使用 COM“InternetExplorer.Application”对象保存 .html 文件

> ID：13953564
> 
> 赞同：1
> 
> 时间：2012-12-19T13:35:28.917
> 
> 标签：php, html, internet-explorer, com

我尝试获取此页面的 HTML 代码（[http://www.google.com/search?tbs=simg:CAESEgmbKK4nJ8pyZiGCp1jyKj6SXg&tbm=isch](http://www.google.com/search?tbs=simg:CAESEgmbKK4nJ8pyZiGCp1jyKj6SXg&tbm=isch)），但`file_get_contents($url);`无法在此页面上工作。

所以我觉得使用InternetExplorer.Application是一种方式，我找了一个关于网站截图的php脚本：

```
<?php $Browser = new COM('InternetExplorer.Application');
$Browserhandle = $Browser->HWND; $Browser->Visible = true;
$Browser->Fullscreen = true;
$Browser->Navigate('http://www.google.com/search?tbs=simg:CAESEgmbKK4nJ8pyZiGCp1jyKj6SXg&tbm=isch');

while($Browser->Busy){   com_message_pump(4000); }

$img = imagegrabwindow($Browserhandle, 0); $Browser->Quit();
imagepng($img, 'screenshot.png'); ?> 
```

但是**如何保存 .html 文件或使用“InternetExplorer.Application”获取 HTML 代码？**

英语不好，对不起，谢谢。

# xcode - 'opencv2/opencv.hpp' 文件未找到

> ID：13953570
> 
> 赞同：11
> 
> 时间：2012-12-19T13:35:39.400
> 
> 标签：xcode, opencv

我在 Mac OS X 10.8.2 上成功安装了 OpenCV。

之后，我按照[SSteve的这个](http://opencv.willowgarage.com/wiki/SSteve)[指南](http://opencv.willowgarage.com/wiki/UsingOpenCVUnderOSX "在 OS X 下使用 OpenCV")配置了 Xcode 4.5.2，即使这个指南是针对 Xcode 3.5.1 的——一切都像假设的那样。

我的 openCV dylib 位于：/usr/lib

1.  始终搜索用户路径：是
2.  框架搜索路径：/usr/lib**（**代表递归搜索）
3.  Header Search Path：/usr/lib**（**代表递归搜索）

完整的错误信息：

```
Lexical or Preprocessor Issue
'opencv2/opencv.hpp' file not found 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T13:57:23.020

> Header Search Path：/usr/lib**（**代表递归搜索）

这绝对是错误的。您应该像这样设置此路径：

```
/usr/local/include/opencv2** 
```

或者：

```
/usr/include/opencv2** 
```

从您的链接：

> 在 Search Paths 部分中，将 Header Search Paths 设置为 /usr/local/include（如果您使用 MacPorts，则为 /opt/local/include）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-27T12:48:50.037

就我而言，我写道：

```
/usr/local/include/opencv4 
```

标题搜索路径。我使用了opencv4，所以我需要更深入地添加search_path

# css - 使用 css 3 矩阵旋转超过 360 度

> ID：13953572
> 
> 赞同：4
> 
> 时间：2012-12-19T13:35:53.520
> 
> 标签：css, css-transitions, css-transforms

我正在使用这样的 CSS 过渡：

```
div
{
   -webkit-transform: rotate(0deg);
   -webkit-transition: -webkit-transform 2s;
}
div:hover
{
   -webkit-transform: rotate(720deg);
} 
```

这有效地使 div 旋转 2 次，持续 2 秒。现在我想使用矩阵来旋转和缩放图像；但是矩阵不使用度数，而是 cos(a) 和 sin(a)，众所周知， cos(0) = cos(360) = cos(720) 等。所以使用矩阵我无法旋转图像超过 359 度。

所以我决定聪明一点，用 JavaScript 从一个旋转的元素（720°）中取出矩阵，它看起来像这样：

```
-webkit-transform: matrix(1, -0.0000000000000004898587196589413, 0.0000000000000004898587196589413, 1, 0, 0); 
```

但是，使用此矩阵我无法旋转元素 - 我稍后将计算大小并应用它。

所以问题是 - 如何使用 css 3 矩阵变换将元素旋转超过 359 度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T14:39:23.247

Matrices in CSS 3 define

> a mathematical mapping from one coordinate system into another

([W3C reference](http://dev.w3.org/csswg/css3-transforms/#transform)),

which implies that 720deg is exactly equivalent to 360deg as you pointed out. So you will not be able to do this directly with a matrix.

However, this syntax should work for your need :

```
div:hover {
    transform: scale(1.5,1.5) rotate(720deg);
    transition: transform 3s;
} 
```

# asp.net - SqlDataSource-Query 在转发器中使用转发器元素

> ID：13953573
> 
> 赞同：1
> 
> 时间：2012-12-19T13:35:55.977
> 
> 标签：asp.net, repeater, sqldatasource

我想用 asp.net 和 C# 做以下事情：

SqlDataSource 从数据库中获取模板列表。然后，在转发器中，为每个模板创建一个 DropDownList 元素，其中包含为每个模板找到的类型。这可能吗？

```
<asp:SqlDataSource ID="src_template" runat="server" ConnectionString="<%$ ConnectionStrings:VConStr %>" SelectCommand="SELECT [template] FROM [template]" />
<asp:Repeater ID="rpt_template" runat="server" DataSourceID="src_template" OnItemCommand="rpt_template_ItemCommand">
    <ItemTemplate>
        <p>
            <asp:SqlDataSource ID="src_types" runat="server" ConnectionString="<%$ ConnectionStrings:VConStr %>" SelectCommand='SELECT [type] FROM [templatetype] WHERE [template] = <%# Eval("template") %>' />
            <label for="DropDownList1"><%# Eval("template") %></label>
            <asp:DropDownList ID="DropDownList1" runat="server"  DatasourceID="src_types" DataTextField="type" DataValueField="type" />
        </p>
    </ItemTemplate>
</asp:Repeater> 
```

如何正确填写 where-part？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:11:56.397

尝试这样的事情：

```
<ItemTemplate>
    <asp:HiddenField ID="template" runat="server" 
        Value='<%# Eval("template") %>' 
    />

    <asp:SqlDataSource ID="src_types" runat="server" 
        ConnectionString="<%$ ConnectionStrings:VConStr %>" 
        SelectCommand="SELECT [type] FROM [templatetype] WHERE [template] = @template"
    >
        <SelectParameters>
            <asp:ControlParameter
                Name="template"
                Type="String"
                ControlID="template"
                PropertyName="Value"
            />
        </SelectParameters>
    </asp:SqlDataSource>

    ...
</ItemTemplate> 
```

# c# - 如何在 C# 模块中嵌入 ms-access 表单？

> ID：13953577
> 
> 赞同：10
> 
> 时间：2012-12-19T13:36:05.477
> 
> 标签：c#, ms-access

我们开发了一个相当繁重的 ms-access 应用程序，有大约 300 个表单（是的！）。由于代码实例化了这些表单（而不只是“打开”它们），我们可以在屏幕上显示同一表单的多个实例。

为了绕过 VBA 的限制，以及它对一些面向对象概念（如继承、接口、封装等）的糟糕实现，代码管理：

*   由我们表单的所有活动实例组成的 Windows 集合。
*   一个“幽灵窗口”对象，它包含我们代码所需的所有额外属性和方法。

因此，作为一个例子，当我想达到我的一个实例的标准属性时，我可以写：

```
MyWindows.accessWindow(hWnd).name 
```

其中 hWnd 是 Windows 给出的句柄，并命名标准 form().name 属性

但是，如果我想访问我的一个实例的特定属性，我可以写：

```
MyWindows.ghostWindow(hWnd).originalRecordset 
```

'originalRecordset' 包含在表单首次实例化时加载的原始 ADODB.recordset（意味着在用户进行任何更改之前......可能很有趣！）

它工作得很好，但是编码它可以是一个真正的 PITA，特别是当一个人知道在 C# 中做类似的事情是多么的简单时，只要可以将 MS-Access 表单对象封装到一个更通用的 C# 对象中。所以这是一个问题：可以将 MS-Access 表单嵌入到自制的 C# dll 中吗？可行吗？

我不期待一个完整的答案，但我期待一些帮助以走上正轨。有想法的朋友吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T09:32:03.513

这应该可以通过办公自动化来实现。

简而言之，您使用 c# 启动您的访问应用程序，然后为您的表单获取正确的对象模型，就像您在 vba 中使用它们一样。

如果您想使用更多的 c#（好）和更少的 vba（meh）来逐步改进/重构您的访问应用程序，这可能是第一步。

MS 知识库文章[“如何使用 Visual C# 自动化 Microsoft Access”中的更多详细信息](http://support.microsoft.com/kb/317114/en-us)

# dojo - 如何关闭 dojox.grid.DataGrid

> ID：13953578
> 
> 赞同：1
> 
> 时间：2012-12-19T13:36:05.463
> 
> 标签：dojo, dojox.grid.datagrid

我有一个从搜索事件填充的网格，我希望能够通过简单地在右上角添加一个 X 来关闭网格，类似于关闭任何浏览器或窗口的方式。我认为这就像添加 X 一样简单，根据我的喜好对其进行样式设置，然后创建一个关闭或隐藏网格的 onclick 事件......但我似乎无法让它工作。任何帮助，将不胜感激。

我的 JS 是：

```
dojo.require("dojox.grid.DataGrid"); //FindTask
dojo.require("dojo.data.ItemFileReadStore"); //FindTask
dojo.require("esri.tasks.find"); //FindTask

var findTask, findParams;
var grid, store;
var searchExtent;

function doFind() {

            //Show datagrid onclick of search button and resize the map div.
            esri.show(datagrid);
            dojo.style(dojo.byId("content"), "height", "83%");
            searchExtent = new esri.geometry.Extent ({
            "xmin":-9196258.30121186,"ymin":3361222.57748752,"xmax":-9073959.055955742,"ymax":3442169.390441412,"spatialReference":{"wkid":102100}
            });

            map.setExtent(searchExtent);

    //Set the search text to the value in the box
    findParams.searchText = dojo.byId("parcel").value;
            grid.showMessage("Loading..."); //Shows the Loading Message until search results are returned.
    findTask.execute(findParams,showResults);
  }

  function showResults(results) {
    //This function works with an array of FindResult that the task returns
    map.graphics.clear();
    var symbol = new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID, new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID, new dojo.Color([98,194,204]), 2), new dojo.Color([98,194,204,0.5]));

    //create array of attributes
    var items = dojo.map(results,function(result){
      var graphic = result.feature;
      graphic.setSymbol(symbol);
      map.graphics.add(graphic);
      return result.feature.attributes;
    }); 

    //Create data object to be used in store
    var data = {
      identifier: "Parcel Identification Number",  //This field needs to have unique values. USES THE ALIAS!!!
      label: "PARCELID", //Name field for display. Not pertinent to a grid but may be used elsewhere.
      items: items
    };

     //Create data store and bind to grid.
    store = new dojo.data.ItemFileReadStore({ data:data });
    var grid = dijit.byId('grid');
    grid.setStore(store);

    //Zoom back to the initial map extent
    map.setExtent(searchExtent);

  }

  //Zoom to the parcel when the user clicks a row
  function onRowClickHandler(evt){
    var clickedTaxLotId = grid.getItem(evt.rowIndex).PARCELID;
    var selectedTaxLot;

    dojo.forEach(map.graphics.graphics,function(graphic){
      if((graphic.attributes) && graphic.attributes.PARCELID === clickedTaxLotId){
        selectedTaxLot = graphic;
        return;
      }
    });
    var taxLotExtent = selectedTaxLot.geometry.getExtent();
    map.setExtent(taxLotExtent);
  } 
```

我的 HTML 是：

```
<div id ="datagrid" data-dojo-type="dijit.layout.AccordionPane" splitter="true" region="bottom"
        style="width:100%; height:125px;">
        <table data-dojo-type="dojox.grid.DataGrid" data-dojo-id="grid"  id="grid" data-dojo-props="rowsPerPage:'5', rowSelector:'20px'">
  <thead>
    <tr>
      <th field="Parcel Identification Number" width="10%">
                        Parcel ID
                    </th>
                    <th field="Assessing Neighbornood Code" width ="20%">
                        Neighborhood Code
                    </th>
                    <th field="Property Class Code" width="10%">
                        Property Class
                    </th>
                    <th field="Site Address" width="100%">
                        Address
                    </th>
    </tr>
  </thead>
</table>
    </div> 
```

这是我对添加内容的最佳猜测：

```
 <tr>
                <td align="right">
                    <div class="divOk" onclick="dijit.byId('tocDiv').hide();">
                        OK</div>
                </td>
            </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:40:09.617

我最终通过创建一个新列并在标题中放置一个关闭图标来解决我想要的问题。我将它连接到一个函数，这样当我单击它时，网格会关闭并且地图会调整大小：

```
function closeGrid() {
        esri.hide(datagrid);
        dojo.style("map", {"height": "100%"});
        } 
```

HTML

```
<th field="" width="2%"> <div class="GridCloseIcon" title="Close Grid" onclick="closeGrid();"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T14:32:32.167

这个怎么样？（假设 OK 线实际出现）

**HTML**

```
 <tr>
        <td align="right">
            <div class="divOk" onclick="hideGrid();">OK</div>
        </td>
    </tr> 
```

**JS**

```
 function hideGrid() {
        var widget = dijit.byId('datagrid');
        dojo.fadeOut({
            node: widget.domNode
        }).play();

        dojo.style(widget.domNode, 'display', 'none');
    } 
```

# gwt - 为什么静态 GWT 字段不传输到客户端？

> ID：13953579
> 
> 赞同：2
> 
> 时间：2012-12-19T13:36:06.360
> 
> 标签：gwt

`ConfigProperty.idPropertyMap`在服务器端填充。（通过日志输出验证）
在客户端访问它显示它是空的。:-( （通过日志输出验证）

这是一些默认行为吗？（我不这么认为）问题可能与内部类`ConfigProperty.IdPropertyMap`、`java.util.HashMap`用法、序列化或某些字段访问修饰符问题有关吗？

谢谢你的帮助

```
    // 传输对象

    公共类 ConfigProperty 实现 IsSerializable、Comparable {

        ...

    静态公共类 IdPropertyMap 扩展 HashMap
             实现 IsSerializable
        {
           ...
        }

    受保护的静态 IdPropertyMap idPropertyMap = new IdPropertyMap();

        ...
    }

    // 服务器服务

    公共类 ManagerServiceImpl 扩展 RemoteServiceServlet 实现
        经理服务
    {
        ...

        公共 IdPropertyMap getConfigProps(String timeToken)
            抛出 ConfiguratorException
        {
            ...
        }
    }

```

在一些好的答案之后从下面添加（谢谢！）：

**回答底线**：目前未实现/支持静态字段同步。某人/我必须提交功能请求

只是我的观点（GWT 的一个坠入爱河的新手 :-)）：

我非常了解（不完美！;-)）“全局”变量同步的可能含义（依赖图或注释的使用可能很有用）。但是对于一个新的（其他经验丰富的 Java EE/web）用户来说，它看起来像这样：

*   您创建了一些`myapp.shared.dto.MyClass`类（dto = 数据传输对象）

*   您在其中添加一些静态字段，这些字段仅代表这些对象的集合（可能还有其他一些 DTO）

*   您也可以在客户端执行此操作，并且所有其他静态方法也可以正常工作

*   唯一不起作用的是同步（首先这还不错）

但是：一些提供的注释，比方说`@Transfer static Collection<MyClass> myObjList;`会很方便，因为我似乎知道这会带来的影响和好处。

在我的情况下，它相当简单，因为客户端更加静态，但如果 GWT 框架可以做到，则希望在不明确实现的情况下拥有这些数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:49:16.107

RPC 的想法不是您可以将客户端和服务器视为完全相同的 JVM，而是它们可以共享您通过网络传递的对象。要通过线路从服务器发送静态字段到客户端，存储在该字段中的对象必须从 RPC 方法返回。

静态属性不会序列化并通过网络发送，因为它们不属于单个对象，而是属于类本身。

```
public class MyData implements Serializable {
    protected String name;//sent over the wire, each MyData has its own name
    protected String key;

    protected static String masterKey;//All objects on the server or client 
    // share this, it cannot be sent over RPC. Instead, another RPC method
    // could access it
} 
```

但是请注意，只有一个实例将被共享 - 如果服务器上的其他内容更改了该字段，则所有请求副本的客户端都需要更新

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T13:45:24.853

静态变量是纯类变量，与单个实例无关。序列化仅适用于对象。

所以，你总是空一个 ConfigProperty.idPropertyMap

# ios - 字体大小和类型不适用于 CATextLayer

> ID：13953582
> 
> 赞同：8
> 
> 时间：2012-12-19T13:36:10.463
> 
> 标签：ios, text, fonts, layer

我正在尝试修改图层中文本的字体属性，但没有发生。有人可以帮忙吗？请在下面找到代码：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];

if (self)
{

    // All HypnosisViews start with a clear background color

    [self setBackgroundColor:[UIColor clearColor]];
    [self setCircleColor:[UIColor lightGrayColor]];

    // Create the new layer object
    boxLayer = [[CATextLayer alloc] init];

    // Give it a size
    [boxLayer setBounds:CGRectMake(0.0, 0.0, 300.0, 85.0)];

    // Give it a location
    [boxLayer setPosition:CGPointMake(160.0, 350.0)];

    // Make half-transparent red the background color for the layer
    UIColor *reddish = [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.75];

    // Get CGColor object with the same color values
    CGColorRef cgReddish = [reddish CGColor];
    [boxLayer setBackgroundColor:cgReddish];

    // Make it a sublayer on the view's layer
    [[self layer] addSublayer:boxLayer];

    NSString *text2 = @"You are me.";
    UIFont *font2 = [UIFont fontWithName:@"Times New Roman" size:10.0];
    [text2 sizeWithFont:font2];

    [boxLayer setString:text2];

}
return self;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T21:46:19.693

要更改 CATextLayer 的字体/字体大小，您必须为图层的“font”和“fontSize”属性分配值。

或者您必须使用 NSAttributedString 在这种情况下使用该字符串对象的值。

您使用的“sizeWithFont”调用是一个 NSString 添加，它只计算并返回一个 CSSize，其中包含您给它的字体的宽度和高度。由于您没有在代码中使用返回的 CGSize，因此它完全没有任何作用。

[Apple 文档](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CATextLayer_class/Introduction/Introduction.html)中的参考资料。

# azure - 如何使用 REST API 添加虚拟机角色？

> ID：13953586
> 
> 赞同：-1
> 
> 时间：2012-12-19T13:36:28.780
> 
> 标签：azure

如何使用 REST API 添加虚拟机角色？

我无法使用此[http://msdn.microsoft.com/en-us/library/windowsazure/jj157184.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj157184.aspx)删除 VM。我需要一些其他步骤吗？

而且我还想获​​得一些代码，用于将 VM 角色添加到现有的 VM 角色服务中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:53:40.370

我认为自动缩放将在这里解决您的所有问题。查看[本指南](https://www.windowsazure.com/en-us/develop/net/how-to-guides/autoscaling/)以帮助您入门。

通过自动缩放，您可以设置规则以根据某些事件或约束在部署中添加/删除实例。这可以在本地或单独的工作人员角色上运行。如果您使用 WASABi，那么您将不必自己进行角色管理 API 调用。

我希望这会有所帮助，如果您有任何具体问题，请提出，我会尽力回答。

我还在我的[博客](http://robertgreiner.com)上提出了一些我遇到的错误和解决方案。

# python - 我应该使用 .rank 还是 .order_id？

> ID：13953590
> 
> 赞同：2
> 
> 时间：2012-12-19T13:36:38.890
> 
> 标签：python, google-app-engine, google-search-api

访问对象中对象`order_id`的属性会在日志中生成以下错误：`ScoredDocument``SearchResults`

`DeprecationWarning: order_id is deprecated; use rank instead logging.debug(document.order_id)`

但是这里的文档是指`order_id`：[https ://developers.google.com/appengine/docs/python/search/scoreddocumentclass](https://developers.google.com/appengine/docs/python/search/scoreddocumentclass)

哪个是对的？我正在使用 SDK 1.7.3。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:41:12.580

文档更新比代码慢，您应该按照最新代码建议您执行的操作进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:12:12.837

在 2012 年 5 月 22 日版本 1.6.6 的[SdkReleaseNotes](http://code.google.com/p/googleappengine/wiki/SdkReleaseNotes)中写道：

“搜索 API 已弃用`order_id`Document 类的属性。它已被`rank`属性替换。”

所以显然你应该使用`rank`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T23:58:47.743

你应该使用`rank`. 我已经提交了一个错误来修复该文档。（我在搜索 API 上工作）

# java - Android上的任何HAVAL哈希实现？

> ID：13953592
> 
> 赞同：0
> 
> 时间：2012-12-19T13:36:44.067
> 
> 标签：java, android, hash

在 Android SDK（或一些开源 Java 库）上是否有任何本地或第 3 方的[HAVAL散列实现？](http://en.wikipedia.org/wiki/HAVAL)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:47:05.917

[GNU Crypto](https://www.gnu.org/software/gnu-crypto/)似乎在其算法选择中包含了[Haval](https://www.gnu.org/software/gnu-crypto/manual/api/gnu/crypto/hash/Haval.html)。

# c# - 如何使用 ASP.Net 在 Java 脚本文件中获取另一个表单会话值？

> ID：13953596
> 
> 赞同：-1
> 
> 时间：2012-12-19T13:36:51.657
> 
> 标签：c#, javascript, jquery, asp.net, session

我有 Sample.aspx 和 sample.js 都在不同的目录中。

如何在 sample.js 文件中获取 Sample.aspx 页面会话值？

我无法获得以下类型的值

```
 function session() {
        alert('<%=Session.getAttribute("hdn_CheckedData")%>');
        alert(document.getElementbyId("hdn_CheckedData").value);
        alert('<%=Session["CheckedData"]%>');
        alert('<%=Session("CheckedData")%>');
        alert('<%=Session["CheckedData"].ToString()%>');
        alert('<%=Session("CheckedData").ToString()%>');
    }; 
```

CheckedData - 是会话

hdn_CheckedData - 是隐藏字段

我都试过了。

有可能然后请帮助我......

Hiddenfiled，会话，视图状态或任何东西............

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:40:27.607

一种简单的解决方案是在加载 javascript 文件之前和在 aspx 页面内声明会话变量。例如在 sample.aspx 你有

```
<script>
var sessionCheckData = "<%=session["CheckedData"].ToString()%>";
</script>
<script type="text/javascript" src="sample.js"></script> 
```

`sample.js`你有

```
 function session() {
        alert(sessionCheckData);
    }; 
```

类似的答案：[How to get asp.net client id at external javascript file](https://stackoverflow.com/questions/3845900/how-to-get-asp-net-client-id-at-external-javascript-file/3851247#3851247)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:28:11.637

我会编写一个通用处理程序并使用 JSONP 将任何数据传递给外部 Javascript。

请看[这里](https://stackoverflow.com/questions/12953397/how-to-access-session-from-generic-handler)，[这里](https://stackoverflow.com/questions/3702959/asp-net-generic-http-handler-ashx-supporting-jsonp)和[这里](https://stackoverflow.com/questions/2499567/how-to-make-a-json-call-to-a-url)。

由于它不是跨域的，因此 JSON 也应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T05:38:27.273

您必须将会话值分配给隐藏字段

之后，您可以使用该值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T13:40:02.630

您可以将会话数据保存到页面上的隐藏字段中。之后，您可以直接访问 js 文件中的该字段。

**或者您可以按照Aristos**的建议声明会话变量。这实际上会更直接。

# haskell - HDBC-ODBC SQL Server 需要在 quickQuery 之后提交

> ID：13953598
> 
> 赞同：3
> 
> 时间：2012-12-19T13:37:04.833
> 
> 标签：haskell, sql-server-2012, hdbc

我正在使用 ODBC 连接到本地 SQL Server 进入 HDBC。

上连接后`quickQuery`，我不能`close`它。我需要执行`commit`第一个。

这是应该的方式吗？`commit`当我只执行查询时，为什么有必要？

在 GHCi 上：

```
m + Database.HDBC Database.HDBC.ODBC
conn <- connectODBC "Driver={SQL Server};Server=thiagon\\sqlserver2012;Database=senior;UID=framework;PWD=framework;"
vals <- quickQuery conn "SELECT TOP 5 * FROM whatever;" []
print vals
commit conn
disconnect conn 
```

如果删除该`commit conn`行，则会出现异常：

```
*** Exception: SqlError {seState = "[\"25000\"]", seNativeError = -1, seErrorMsg = "disconnect: [\"0: [Microsoft][ODBC SQL Server Driver]Estado de transa\\65533\\65533o inv\\65533lido\"]"} 
```

该消息是葡萄牙语，意思是“无效的交易状态”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:37:40.120

A `quickQuery` *could* modify the table. I don't think the API analyses the string itself, or checks the database, to see whether or not the table was modified. And HDBC doesn't support autocommit.

You could use `withTransaction`, which will automatically handle this detail for you.

EDIT: Try using `quickQuery'`, which is the strict version of `quickQuery`. In an example on [http://book.realworldhaskell.org/read/using-databases.html](http://book.realworldhaskell.org/read/using-databases.html) (scroll down to ch21/query.hs), they didn't need a commit after a plain SELECT statement, but they were using `quickQuery'`.

# iphone - 在 iOS 中使用控件播放音频

> ID：13953599
> 
> 赞同：0
> 
> 时间：2012-12-19T13:37:09.753
> 
> 标签：iphone, ios, audio, controls, audio-streaming

我正在构建一个播放 mp3 文件（托管在 上`http://<somewhere>/<audio>.mp3`）的应用程序，而用户正在观看一些不断变化的标签（想想一个歌词应用程序，它会写出与歌曲同步的歌词）。

在屏幕的底部，我想显示音频控件（播放/暂停、ff、rew），以及一个用于指示文件下载部分和播放点的栏。

最简单的方法是如何做到的？我已经尝试过使用 AVAudioPlayer、AVplayer 和 MPMoviePlayerController，但它们都没有解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:44:13.343

您可以使用 MPVolumeView 类。阅读此处的文档[http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPVolumeView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPVolumeView_Class/Reference/Reference.html)

# c# - 访问 wcf-rest 函数时出错

> ID：13953603
> 
> 赞同：0
> 
> 时间：2012-12-19T13:37:16.690
> 
> 标签：c#, asp.net, wcf, web-services

当我尝试访问 wcf-rest 时出现以下错误。

**合同“SelectorFront”中的“登录”操作指定 WebGetAttribute/WebInvokeAttribute 上的“Get”方法，但 Method 的唯一允许值是 GET 或 POST。“System.ServiceModel.Description.WebScriptEnablingBehavior”不支持其他值。**

我创建了一个 wcf-rest，有 1 个方法“登录”并有一个参数“用户名”这是我的函数调用。

**localhost:2664/FrontService.svc/Login?Username=max**

我的 wcf 如下

**界面**

```
[OperationContract]
[WebInvoke(Method = "Get", UriTemplate = "/Login/{UserName}", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)] 
string Login(string UserName); 
```

**服务**

```
public string Login(string UserName)
{
tblUser obj = (from m in dataContext.tblUsers
where m.UserName == UserName
select m).First();
JavaScriptSerializer oSerializer = new JavaScriptSerializer();
string sJSON = oSerializer.Serialize(obj);
return sJSON;
} 
```

这个问题的解决方案是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:38:45.347

尝试使用“GET”而不是“Get”

显然是区分大小写的。

```
[WebInvoke(Method = "GET" ... 
```

# c# - 异步 HTTP 服务器接收虚假请求

> ID：13953612
> 
> 赞同：0
> 
> 时间：2012-12-19T13:37:41.260
> 
> 标签：c#, html, asynchronous, .net-4.0, httpserver

[我按照这个示例](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=784)将同步 HTTP 服务器（使用 .NET 的 HttpListener）转换为异步。它可以工作，但是对于我从 Google Chrome 发出的每个请求，无论是在地址栏按 Enter 还是按 F5，我都会收到两个请求。第一个处理得很好，响应在浏览器中渲染得很好。

但是，甚至不应该出现的第二个请求有一个空的查询字符串（我的服务器是一个控制台应用程序，所以我看到所有这一切都在使用`Console.WriteLine`）。

当服务器同步时，这一切都没有发生，所以我在迁移到异步模型时一定搞砸了。

这是代码：

```
using System;
using System.Diagnostics;
using System.Net;

namespace MyWebServer{

    internal static class MyHTTPServer {
        private static int mPortNumber = 7091;
        private static HttpListener mListener;
        private static MyCustomHttpHandler mHttpHandler;

        //Omitted some auxiliary methods to print stuff to Console,
        //like WriteError and WriteRequestHeaderInformation

        public static void Main( String[] pArg ) {
            AppDomain.CurrentDomain.UnhandledException += UnhandledExceptionTrapper;
            HttpHandler = new MyCustomHttpHandler();
            mPortNumber = Convert.ToInt32( pArg[0] );
            Console.WriteLine( "Starting the HttpListener on port:{0}", mPortNumber );
            InitialiseListener();
            Console.WriteLine( "Listener started on port: {0}, waiting for requests.", mPortNumber );
            Console.WriteLine( "Listening. Press Enter to stop." );
            Console.ReadLine();
            if( mListener.IsListening )
                mListener.Stop();
        }

        private static void InitialiseListener() {
            try {
                mListener = new HttpListener {
                    AuthenticationSchemes = AuthenticationSchemes.Basic
                };
                string prefix = string.Format( "http://+:{0}/", mPortNumber );
                mListener.Prefixes.Add( prefix );
                mListener.AuthenticationSchemes = AuthenticationSchemes.Anonymous;
                mListener.Start();
                mListener.BeginGetContext( RequestReceived, null );
            } catch( Exception ex ) {
                WriteError( ex.Message );
            }
        }

        private static void RequestReceived( IAsyncResult result ) {
            var timer = new Stopwatch();
            Console.WriteLine( "---Request Received----" );
            timer.Reset();
            timer.Start();
            //Retrieve context; on error, print message and wait for another request
            HttpListenerContext context = null;
            try {
                context = mListener.EndGetContext( result );
            } catch( HttpListenerException e ) {
                WriteError( e.ToString() );
                if( mListener.IsListening )
                    mListener.BeginGetContext( RequestReceived, null );
                return;
            }
            //Process request and send response
            mListener.BeginGetContext( RequestReceived, null );
            try {
                WriteRequestHeaderInformation( context );
                CreateResponseDocument( context );
            } catch( Exception ex ) {
                WriteError( ex.Message );
            }
            Console.WriteLine( "----Request processed in {0} milliseconds ----", timer.ElapsedMilliseconds );
        }

        private static void CreateResponseDocument( HttpListenerContext pHttpListenerContext ) {
            try {
                byte[] htmlOutput = HttpHandler.ProcessRequest( pHttpListenerContext.Request.Url.LocalPath.Replace( "/", "" ), pHttpListenerContext.Request.Url.Query.Replace( "?", "" ) );
                if( htmlOutput != null && pHttpListenerContext.Response.OutputStream.CanWrite ) {
                    pHttpListenerContext.Response.Headers.Add( "Access-Control-Allow-Origin", "*" );
                    //pHttpListenerContext.Response.ContentType = "image/jpg";
                    pHttpListenerContext.Response.ContentType = "text/plain";
                    pHttpListenerContext.Response.OutputStream.Write( htmlOutput, 0, htmlOutput.Length );
                }
                pHttpListenerContext.Response.Close();
            } catch( Exception ex ) {
                WriteError( ex.Message );
            }
        }    
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:13:02.427

似乎只有当响应只是一堆字节（在这种情况下代表 jpeg 图像）时才会发生这种情况。如果不是直接在地址栏中输入 http 请求，而是打开一个这样的 HTML 页面......

```
 <html>
     <head/>
        <body>
            <img src="http://localhost:serverPort/queryParametersGoHere" />
        </body>
</html> 
```

...我的服务器收到一个且只有一个请求。（我匿名了我的端口和参数；它说 queryParametersGoHere，我实际上有`?param1=value1&param2=value2`，等等。

# c# - 变更跟踪实施

> ID：13953618
> 
> 赞同：2
> 
> 时间：2012-12-19T13:37:57.227
> 
> 标签：c#, sql-server-2008

我有一个应用程序需要识别表上发生了什么变化。更改跟踪将适合我的需求，但我假设我需要测试（和你们一起！）。

我认为我需要保留我在应用程序中“某处”获得的更改的最新版本。这是正确的吗？我怎样才能保存它？

然后，我将在下一次对 CHANGETABLE( ......, @last_sync_version) 的同步调用中使用它来获取自上次同步以来发生的所有更改。

# c - 设置指针值而不在之后更改它

> ID：13953619
> 
> 赞同：0
> 
> 时间：2012-12-19T13:38:05.720
> 
> 标签：c, pointers, strtok

我正在使用该`strtok`函数读取一个以空格作为分隔符的字符串。

我的代码如下所示：

```
char * pch = strtok (text," ");
int i = 0;
while (pch != NULL)
{
  if (i == 0)
     strcpy(name, pch);
  else
     others[i - 1] = pch;
  pch = strtok (NULL, " ");
} 
```

字符串看起来像这样：`TCP 1 2 3 4`，并且`name`是`char*`我在函数中收到的类型。

我希望分配`name`为`TCP`（即第一个分隔符之前的第一部分），但是由于 pch 指针继续，`name`变量在更改时`pch`会更改。如何在指针更改时分配`pch`指针值`name`而不更改它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:40:46.560

你忘了我++。你永远不会增加 i。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:39:49.910

您的描述与您的代码不符。

您的代码清楚地使用 复制*数据*（字符）`strcpy()`，而不仅仅是指针。后者看起来像：

```
if (i == 0)
  name = pch; 
```

但这仍然有效，因为您已将指针复制到第一个标记，并且副本不会更改。

`others`另一方面，如果循环后内容发生变化，则数组是有风险的，`text`因为您只存储指针。

*编辑*：D'oh，正如其他人指出的那样，您没有增加`i`，这可能解释了这种奇怪之处。不知道为什么我错过了这个，我想我对描述和代码之间的脱节感到很困惑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T13:40:42.387

您永远不会递增`i`，因此每个循环最终都会复制`pch`into的最新值`name`。

`i`您可以通过为循环的每次迭代递增来修复它：

```
char * pch = strtok (text," ");
int i = 0;
while (pch != NULL)
{
  if (i++ == 0) // ++ is the only change from your code
     strcpy(name, pch);
  else
     others[i - 1] = pch;
  pch = strtok (NULL, " ");
} 
```

# java - swing组件的模型如何请求重绘？

> ID：13953626
> 
> 赞同：2
> 
> 时间：2012-12-19T13:38:22.057
> 
> 标签：java, swing, model, onchange

我有我的自定义组件，它在我的自定义数据类中保存它的数据。我的组件`extends JComponent`，而数据是完全自定义的。

数据类可以通知组件它已更改的常规模式是什么？我是否应该在数据类中实现一些事件并在设置数据时让组件订阅它？或者有预定义的模式是 Swing 库？

例如，我正在查看`ListModel<E>`interface 并看到它只是 has`addListDataListener(ListDataListener l)`和`removeListDataListener(ListDataListener l)`. 这是机制模型通知的`List`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:15:03.267

作为记录，这主要是我的个人意见（因为这更多是一个意见问题）。

通常对于 Swing 应用程序，最好将代码分离到模型/视图/控制 (MVC) 中。这意味着实际的 Swing 组件是您的 Viow，您的侦听器是您的控件，而您实际执行操作的代码是模型。在这种情况下，您的视图和模型都只知道控件（并且控件知道视图和模型）。

因此，如果您的模型更新 - 它会通知控件，它会更新视图。视图也是如此（视图中的侦听器执行，通知控制，控制更新模型）。

这样做的好处是它松散地耦合了视图和模型（视图只关心向用户展示东西，模型只关心数据，他们不关心彼此在做什么，只要他们获取正确的信息）。

这是一个示例（为简单起见，它们都在一个文件中，但通常您至少每个 MVC 都在它们自己的文件中）：

```
import java.awt.event.*;
import java.util.ArrayList;
import javax.swing.*;

public class MVCSeparation {

    // Model:  (Number crunching math-y) or (data processing) stuff
    public static class Model{
        ArrayList<String> data = new ArrayList<String>();
        public void addData(String value){
            data.add(value);
        }

        public int getCount(){
            return data.size();
        }

        public String randomValue(){
            String result = "";
            if(data.size() > 0){
                int index = (int)(Math.random() * data.size());
                System.out.println(index);
                result = data.get(index);
            }
            System.out.println("Getting Value: " + result);
            return result;
        }
    }

    // View:  Pretty graphics and visuals
    public static class View extends Box{
        JLabel text = new JLabel("Random Value:");
        JTextField newItem = new JTextField(10);
        JButton submit = new JButton("Submit");

        public View(){
            super(BoxLayout.Y_AXIS);
            add(text);
            add(newItem);
            add(submit);
        }

        public void setSubmitAction(ActionListener submitAction){
            submit.addActionListener(submitAction);
        }

        public void setDisplayText(String value){
            text.setText("Random Value: " + value);
        }

        public String getText(){
            String result = newItem.getText();
            newItem.setText("");
            return result;
        }

        public void startupApp(){
            JFrame frame = new JFrame();
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setContentPane(this);
            frame.validate();
            frame.pack();
            frame.setVisible(true);
        }
    }

    // Processing User Interactions and Data Updates (links two above together)
    public static class Control{
        Model m = new Model();
        View v = new View();

        public Control(){
            SwingUtilities.invokeLater(new Runnable(){

                @Override
                public void run() {
                    v.setSubmitAction(new SubmitText());
                    v.startupApp();
                }});

            //Randomly update label
            while(true){
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                SwingUtilities.invokeLater(new Runnable(){
                    @Override
                    public void run() {
                        v.setDisplayText(m.randomValue());
                    }});
            }
        }

        // Listener to notify us of user interactions on the View
        public class SubmitText implements ActionListener{
            @Override
            public void actionPerformed(ActionEvent e) {
                m.addData(v.getText());
            }
        }
    }

    public static void main(String[] args) {
        new Control();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:39:13.613

您可以使用`Observable`或`PropertyChangeListener`。

# forms - Play Framework 2.1 Scala - 日期的表单绑定

> ID：13953629
> 
> 赞同：2
> 
> 时间：2012-12-19T13:38:24.050
> 
> 标签：forms, scala, playframework-2.0, playframework-2.1

我想在 Play Framework 2.1 中为具有日期/时间字段的表单创建一个表单绑定。是否有日期/时间输入的标准验证器？我了解页面表单还应该以特定格式发送日期/时间。有谁知道任何预制解决方案？或者可以描述如何自己实现一个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T13:55:10.830

Play 2.1[内置了](http://www.playframework.org/documentation/2.0/ScalaFormHelpers)对 Twitter Bootstrap 的支持；如果您采用该路线，那么[Bootstrap Date Picker](http://www.eyecon.ro/bootstrap-datepicker)对客户端来说是一个很好的调用（即确保日期以`yyyy-mm-dd`或其他有效日期格式发送）。

照顾好客户端后，服务器端 Play 2.1 支持[JodaTime](http://joda-time.sourceforge.net/)，因此您可以像这样绑定 post'd 表单日期：

```
object FooForm {
  import play.api.data.{Form, Forms}, Forms._
  val mapper = mapping(
    'fooDate-> jodaDate("yyyy-MM-dd")
  )(Foo.apply)(Foo.unapply)
  val form = Form( mapper )
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-18T15:18:00.163

就像@virtualeyes 所说，从客户端，[DatePicker](http://jqueryui.com/datepicker/)将生成正确的数据格式（默认为 dd/MM/yyyy）。

但是，Play 框架需要使用 `bindFronRequest`（客户端 -> 服务器）正确解组日期格式。

另外Play在生成Form的时候需要生成正确的Date字符串表示，会被发送到视图（控制器->视图）。在**java**中，这可以通过提供[DataBinder](http://www.playframework.com/documentation/2.2.x/JavaForms)来完成。

可以[**在 GitHub 上打开的那个问题中找到一个示例**](https://github.com/playframework/playframework/issues/3097#issuecomment-47441276)

# windows - 在 Windows 服务中使用 C++ 获取默认打印机更改通知

> ID：13953630
> 
> 赞同：1
> 
> 时间：2012-12-19T13:38:28.527
> 
> 标签：windows, service, printing, notifications, default

我需要点击默认打印机更改通知，可以吗？

我的情况是，只要在窗口中更改默认打印机，我就想执行一个命令。我的命令所做的是，它只是从注册表中获取默认打印机信息并将其保存在 HKLM 中。

所以，我有这方面的服务。使用此服务，我如何在更改默认打印机时点击通知。我正在使用 C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:34:03.150

在常规应用程序中，我会监听一条[`WM_SETTINGCHANGE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms725497%28v=vs.85%29.aspx)消息，然后调用[`GetDefaultPrinter`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144876%28v=vs.85%29.aspx)以查看默认打印机是否已实际更改。

我不知道您是否可以从服务中查看该消息。默认打印机可以是每用户设置，因此您的服务必须作为该用户而不是本地系统运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-13T15:00:34.387

拦截消息WM_WININICHANGE，然后获取新的打印机：

```
PRINTDLGW *pd;
pd = (PRINTDLGW *)malloc(sizeof(PRINTDLGW));
pd->lStructSize = sizeof(PRINTDLGW);
pd->hDevMode = NULL;
pd->hDevNames = NULL;
pd->Flags = PD_RETURNDEFAULT;
PrintDlgW(pd); 
```

# css - 渲染 dijit 小部件的最快方法

> ID：13953631
> 
> 赞同：1
> 
> 时间：2012-12-19T13:38:32.283
> 
> 标签：css, render, dojo

渲染 dijit 小部件的最快方法是什么？我知道编程方式比声明方式更快。（[一些参考](http://davidwalsh.name/dojo-widget)）

我有一个加载太慢的自定义小部件（它是一个带有组合框、按钮和其他用于添加过滤器等的小型 dijit 小部件的数据网格）。
查看源代码，我看到所有 dijit 小部件都是以编程方式创建的，但插入它们的 DOM 节点也是以编程方式创建的。这是“正确”的方式吗？

我正在尝试加快这个小部件的渲染速度，目前我的选择是结合**速度模板**（我的公司使用 struts2 + velocity）来创建 DOM 节点，以及以**编程方式创建的小部件**（使用 placeAt 和类似方法插入将小部件放入已构建的 DOM 节点中）。
它可以正常工作，但遗憾**的是所有 css 类都被 dijit 覆盖，所以我必须再次覆盖它们，这会导致合理的开销**。

在模板中我写了这样的东西：

```
<input id="idOfAnExistingDomNode" class="myCssClass" /> 
```

要在该 DOM 节点中插入 FilteringSelect，我必须这样写：

```
var fieldSelect = new dijit.form.FilteringSelect({
    store : jsonStore,
    searchAttr : "caption",
    labelAttr : "caption",
    selectOnClick : true,
    value : "Content"
}, "idOfAnExistingDomNode");
fieldSelect.domNode.className += " myCssClass"; 
```

最后一行是必需的，因为 myCssClass 在创建 FilteringSelect 期间被覆盖。
有没有办法避免这个问题？
或者，也许，我试图以错误的方式做这件事？我不完全确定“速度模板”的事情。

注意：Dojo 版本是 1.5，不，遗憾的是我们不能将它升级到更新的版本。

请原谅我糟糕的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:16:52.363

通常，实例化小部件的更快方法之一是在临时 div 中创建它们，然后将该 div 移动到 DOM 上。您是否尝试过分析此实例化中到底是什么慢？我的一部分想知道是否花费了太多时间来等待数据，因为一些小部件 + 具有合理页面大小参数的网格应该不会花费很长时间来加载。

至于您的班级问题，奇怪的是dojo没有混入现有班级。也就是说，您可以先在节点上进行查找，获取类属性，然后在创建 FilteringSelect 时将其指定为您的 mixin 对象中的类属性。如果这样做，请确保将类括在引号中，否则较旧的 IE 将拒绝它。

# java - 在不使用任何内置类的情况下获取系统时间

> ID：13953633
> 
> 赞同：-7
> 
> 时间：2012-12-19T13:38:39.950
> 
> 标签：java

如何在不使用 Java 中的任何内置类的情况下获取系统时间？

请提供一些提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:41:15.313

不可能的。您应该使用`System`类，它是静态方法或其他类。否则，您可以访问依赖于操作系统的本机代码，但这需要使用`JNI`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:47:38.853

Java中的所有内容都没有扩展`Object`吗？

不是`Object`内置类吗？

因此，你无法实现你想要的。

（一个有争议的答案，但证明了一点）

# python - 检查给定字符串中是否有回车

> ID：13953639
> 
> 赞同：4
> 
> 时间：2012-12-19T13:38:56.807
> 
> 标签：python, python-2.7

我，我从一个文件中读取一些行，我正在检查每一行是否有 Windows 类型的 CRLF。如果任何一行中没有“\n”或“\r”，则必须报告错误。我尝试使用下面的代码，即使该行没有'\r'，它也没有报告任何错误

```
Open_file = open(File_Name,'r').readlines()
while Loop_Counter!= Last_Line:
        Line_Read = Open_file[Loop_Counter]
        if('\r\n' in Line_Read):
            pass
        else:
            print Loop_Counter 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T13:50:51.600

这是行不通的，因为`Loop_Counter`根本没有调整过；无论初始值是什么，它都不会改变，`while`循环要么无限期运行，要么永远不会通过。您的代码在这里很不清楚；我不确定你为什么要这样构造它。

你建议这样做会更容易：

```
infile = open(filename, 'rb')
for index, line in enumerate(infile.readlines()):
    if line[-2:] != '\r\n':
        print index 
```

该`'rb'`参数是必要的，以确保换行符被读取为`\r\n`而不仅仅是`\n`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:41:01.737

试试这个

```
Open_file = open(File_Name,'rb').readlines() 
```

你必须以二进制模式打开文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:12:15.613

应该是

```
if ('\r' not in Line_Read or '\n' not in Line_Read): 
    print Loop_Counter 
```

?? 此外，正如 jdotjdot 指出的那样， Loop_Counter 根本没有增加。

# nhibernate - 对于流利的 NHibernate 专家：加入 where 条件

> ID：13953641
> 
> 赞同：1
> 
> 时间：2012-12-19T13:39:01.920
> 
> 标签：nhibernate, join, where, fluent

SQL Server 语法是：

```
select tableAColumn1, tableAColumn2, tableBColumn1
from tableA, tableB
where ISNUMERIC(tableAColumn1) = 1
and CONVERT(INT, tableAColumn1) = tableBColumn1
and tableAColumn2 = 'something' 
```

在 Fluent NHibernate 中实现这一目标的最佳方法是什么？我需要多少类来帮助获得生成的 ClassMap 以及它的外观？

**编辑：**

```
public class BarausInfoMap : ClassMap<BarausInfo>
    {
        public BarausInfoMap()
        {
            Table("BARAUS");

            Id(x => x.nr);

            Map(x => x.betrag);

            Join("BARAUSLANG", m =>
            {
                m.Fetch.Join();

                m.KeyColumn("Ula");
                m.Map(x => x.bezeichnung);
                m.Map(x => x.sprache);
                m.Map(x => x.la);
                this.Where("m.la = 'SPE'");
            });
        }
    } 
```

nr 列是 int 并且 ula 列是字符串，但我需要加入这 2 个。此外，this.where 指的是我猜的外部表，但它应该指的是内部表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:55:13.193

也许最好使用单独的实体和单独的映射，而不是像这样构建查询

```
queryOver<BarausInfo>.JoinQueryOver(x => x.BarauslangObject, barauslangAlias, JoinType.InnerJoin, conjunction) 
```

并且连词将包含`ISNUMERIC(tableAColumn1) = 1`and tableAColumn2 = 'something'。在 BarausInfo 映射中，您可以指定类似 References(v => v.BarauslangObject).Formula("CONVERT(INT, tableAColumn1) = tableBColumn1") 之类的内容。只需了解如何正确指定公式中的列即可。

# web-services - Glassfish Log4j JNDI：找不到附加程序

> ID：13953646
> 
> 赞同：0
> 
> 时间：2012-12-19T13:39:19.903
> 
> 标签：web-services, spring, log4j, glassfish-3, jndi

我正在使用 Glassfish，并创建了一个名为 log4j 的 JNDI 自定义资源，它具有以下属性：

```
Name: log4j.appender.LOG Value: org.apache.log4j.RollingFileAppender
Name: log4j.appender.LOG.layout Value: org.apache.log4j.PatternLayout
Name: log4j.rootLogger Value: WARN, LOG
Name: log4j.appender.LOG.layout.conversionPattern Value: %d{MMM dd, yyyy HH:mm:ss} %p %m%n
Name: log4j.appender.LOG.File Value: ${com.sun.aas.instanceRoot}/logs/RestWebServices.log
Name: log4j.appender.LOG.MaxFileSize Value: 10MB
Name: log4j.appender.LOG.MaxBackupIndex Value: 10 
```

JNDI 资源类型是 java.util.Properties 并且我的 spring 应用程序上下文包含这些行以找到它们：

```
<jee:jndi-lookup id="log4jJndi" jndi-name="log4j" resource-ref="true" />
<jee:jndi-lookup id="configurationsJndi" jndi-name="configurations" resource-ref="true" />

<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="propertiesArray">
        <list>
            <ref bean="configurationsJndi"/>
            <ref bean="log4jJndi"/>
        </list>
    </property>
</bean> 
```

它适用于我的配置 JNDI 资源，但 log4j 在启动 Glassfish 时给了我这个错误：

```
SEVERE: log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).  
SEVERE: log4j:WARN Please initialize the log4j system properly.  
SEVERE: log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

调试时根记录器不是我在 JNDI 资源中设置的。我尝试添加 spring Log4jConfigListener 来解决这个问题，但它没有用。我使用的 Glassfish 版本是 3.1。

有谁知道为什么 log4j 是一个问题？

编辑：现在我尝试使用具有文件位置的 JNDI 到我的 log4j 属性文件，并且我的 Spring 应用程序上下文从 JNDI 获取值。我的问题是我一直在使用 log4j 时遇到此错误：

```
Exception while loading the app : java.lang.IllegalStateException:  
ContainerBase.addChild: start: org.apache.catalina.LifecycleException:
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'log4jJndi': Invocation of init method failed; 
nested exception is javax.naming.CommunicationException: Communication exception for SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is java.lang.IllegalAccessException: value cannot be null]|#] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:33:34.367

尝试以下操作，看看是否有帮助：

1-创建一个名为 log4j.properties 的文件并将其放在 /src/main/resources

2-复制该文件中的以下行：

```
# #Default log level
log4j.rootCategory=INFO, console

log4j.appender.console=org.apache.log4j.ConsoleAppender
log4j.appender.console.layout=org.apache.log4j.PatternLayout
log4j.appender.console.layout.ConversionPattern=%-5p %d [%t] %c: %m%n

################################################
# #You can set custom log levels per-package here
################################################

# #Apache Commons tend to make a lot of noise which can clutter the log.
log4j.logger.org.apache=WARN

# #Shuts up some innocuous messages if using the JBPM transport
log4j.logger.org.hibernate.engine.StatefulPersistenceContext.ProxyWarnLog=ERROR

# #Reduce startup noise
log4j.logger.org.springframework.beans.factory=WARN

# #Your custom classes if you have one
log4j.logger.com.mycompany=DEBUG 
```

# javascript - jquery-cycle左右交替

> ID：13953647
> 
> 赞同：0
> 
> 时间：2012-12-19T13:39:26.980
> 
> 标签：javascript, jquery, jquery-cycle

警告：我没有任何严肃的 JS 知识。

目前，我们使用以下代码进行循环：

```
 $('#slogans').cycle({
        fx     : 'scrollHorz',
        speed  : 500,
        timeout: 5000,
        next   : '.block_slogans .next',
        prev   : '.block_slogans .prev',
        pause  : 1,
        rev    : 1
    }); 
```

它本身总是向右滚动，下一个和上一个按钮按预期处理。

我想做它自动向右滚动，然后向左，然后向右，然后向左滚动，总是带有新内容，所以看起来有点令人惊讶，因为人们通常希望以这种方式只看到两个项目，但隐藏的一个被一个新项目取代。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:52:58.753

以下是您应该使用的内容：

```
$('#slogans').cycle({
        fx     : 'scrollLeft',
        speed  : 500,
        timeout: 5000,
        next   : '.block_slogans .next',
        prev   : '.block_slogans .prev',
        pause  : 1,
        rev    : 1
    }); 
```

**底线**：您应该使用`scrollLeft`而不是`scrollHorz`

[**演示**](http://jquery.malsup.com/cycle/scrollhv.html)

# regex - 提取 IP:PORT

> ID：13953649
> 
> 赞同：0
> 
> 时间：2012-12-19T13:39:28.903
> 
> 标签：regex, delphi, delphi-xe2

**如何从给定网站中提取所有 IP:PORT？** 我有这个当前的正则表达式模式，但我认为它并没有抓住所有..

或者这是一个更好的方法吗？

```
PATTERN = '((?:1?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:1?\d{1,2}|2[0-4]\d|25[0-5]):\d{2,5}'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T15:13:46.410

您可以使用 Internet Direct (Indy) 单元 IdURI 代替 RegEx。它可以将任何 URI 解析为其协议部分。它支持 IPv4 和 IPv6。该单元非常独立。

```
MyURI := TIdURI.Create('http://127.0.0.1:8080');
try
  MyHost := MyURI.Host;
  MyPort := MyURI.Port; 
finally
  MyURI.Free;
end; 
```

属性公开有关 URI 的详细信息：

```
property Bookmark : string read FBookmark write FBookMark;
property Document: string read FDocument write FDocument;
property Host: string read FHost write FHost;
property Password: string read FPassword write FPassword;
property Path: string read FPath write FPath;
property Params: string read FParams write FParams;
property Port: string read FPort write FPort;
property Protocol: string read FProtocol write FProtocol;
property URI: string read GetURI write SetURI;
property Username: string read FUserName write FUserName;
property IPVersion : TIdIPVersion read FIPVersion write FIPVersion; 
```

另请参阅此警告，但我认为它不会影响简单的 host:port URI 解析：

[https://stackoverflow.com/a/502011/80901](https://stackoverflow.com/a/502011/80901)

我建议下载当前版本的 Indy 以获得最新修复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T13:59:20.070

如果IP 后面*总是*有一个端口，这将起作用：

```
\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\:\d{2,5}\b 
```

火柴：

```
1.2.3.4:80
001.002.003.004:2345
255.255.255.255:13245 
```

不匹配：

```
1.2.3
1.2.3:01
1.2.3.4.5:99
299.299.299.299:123 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T14:29:10.067

正则表达式不是你应该在与字符串有关的每个问题上挥舞的魔杖。在这种情况下，您使用的语言可能支持 URL 解析。

`parse_url()`在 PHP 中，您使用该函数解析 URL 。[http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

在 Perl 中，您使用 URI::URL 类[http://search.cpan.org/dist/URI/](http://search.cpan.org/dist/URI/)

如果你真的想使用正则表达式，Perl 模块[http://search.cpan.org/dist/Regexp-Common/](http://search.cpan.org/dist/Regexp-Common/)已经为你构建了正则表达式来检测 IP 地址。

无论您使用哪种语言，有人已经编写、调试和测试了已经可以满足您需求的代码。使用现有代码而不是编写自己的代码。

# perl - Perl中不存在的文件的原子打开

> ID：13953652
> 
> 赞同：9
> 
> 时间：2012-12-19T13:39:34.063
> 
> 标签：perl, file-io, concurrency

我想向一个名称在变量中的文件写一些东西`$filename`。我不想覆盖它，所以我先检查它是否存在，然后打开它：

```
#stage1
if(-e $filename)
{
    print "file $filename exists, not overwriting\n";
    exit 1;
}

#stage2
open(OUTFILE, ">", $filename) or die $!; 
```

但这不是原子的。理论上有人可以在`stage1`和之间创建这个文件`stage2`。是否有一些`open`命令变体可以以原子方式完成这两件事，因此如果文件存在，它将无法打开文件进行写入？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T14:13:52.717

这是打开文件的原子方式：

```
#!/usr/bin/env perl
use strict;
use warnings qw(all);

use Fcntl qw(:DEFAULT :flock);

my $filename = 'test';
my $fh;

# this is "atomic open" part
unless (sysopen($fh, $filename, O_CREAT | O_EXCL | O_WRONLY)) {
    print "file $filename exists, not overwriting\n";
    exit 1;
}

# flock() isn't required for "atomic open" per se
# but useful in real world usage like log appending
flock($fh, LOCK_EX);

# use the handle as you wish
print $fh scalar localtime;
print $fh "\n";

# unlock & close
flock($fh, LOCK_UN);
close $fh; 
```

调试会话：

```
stas@Stanislaws-MacBook-Pro:~/stackoverflow$ cat test
Wed Dec 19 12:10:37 2012
stas@Stanislaws-MacBook-Pro:~/stackoverflow$ perl sysopen.pl 
file test exists, not overwriting
stas@Stanislaws-MacBook-Pro:~/stackoverflow$ cat test
Wed Dec 19 12:10:37 2012 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T14:05:46.900

如果您担心多个 Perl 脚本修改同一个文件，只需使用每个脚本中的[flock()](http://perldoc.perl.org/functions/flock.html)函数来锁定您感兴趣的文件。

如果您担心可能无法控制的外部进程，可以使用[sysopen()](http://perldoc.perl.org/functions/sysopen.html)函数。根据*Programming Perl*书（顺便说一句，我强烈推荐）：

> 要解决这个覆盖问题，您需要使用`sysopen`，它可以单独控制是创建新文件还是破坏现有文件。我们将放弃该`–e`文件存在测试，因为它在这里没有任何用处，只会增加我们对竞争条件的暴露。

他们还提供了这个示例代码块：

```
use Fcntl qw/O_WRONLY O_CREAT O_EXCL/;
open(FH, "<", $file)
    || sysopen(FH, $file, O_WRONLY | O_CREAT | O_EXCL)
    || die "can't create new file $file: $!"; 
```

在这个例子中，他们首先引入了一些常量（在`sysopen`调用中使用）。接下来，他们尝试用 . 打开文件`open`，如果失败，他们再尝试`sysopen`. 他们继续说：

> 现在，即使文件在打开失败和`sysopen`尝试打开新文件进行写入之间以某种方式突然存在，也不会造成任何伤害，因为提供的标志`sysopen`将拒绝打开已经存在的文件。

因此，为了让您的情况更清楚，请完全删除文件 test（不再是第 1 阶段），并且*只*使用类似于上面块的代码执行打开操作。问题解决了！

# javascript - JS高亮文本字符串

> ID：13953655
> 
> 赞同：3
> 
> 时间：2012-12-19T13:39:49.463
> 
> 标签：javascript, jquery, regex, string, highlighting

使用一个小插件来突出显示表单中输入字段中的文本字符串。

[JavaScript 文本高亮 jQuery 插件](http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html)

我稍微修改了代码，以允许用户通过用逗号分隔多个字符串来将多个字符串添加到输入字段中，这将突出显示多个关键字。

这在这种情况下效果很好：stack,overflow,js

但是，如果我要输入 stack,overflow,js, （注意最后一个字符串之后的 , ）它会挂起浏览器并变得无响应。

我正在使用的代码是：

```
$(function() { 
    if ( $("input#searchterm").val().length > 0 ) {
        $("input#searchterm").addClass('marked-purple');
        var arrayOfKeyWords= $("input#searchterm").val().split(',');
        for (var i=0;i<arrayOfKeyWords.length;i++) {
            $('.message p.messagecontent').highlight(arrayOfKeyWords[i]);
        }
    }           
}); 
```

如果用户添加了最后一个逗号，是否有人知道如何忽略它？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:42:30.613

您可以在调用之前进行空值检查`highlight()`，如下所示：

```
if ($("#searchterm").val().length > 0) {
    $("#searchterm").addClass('marked-purple');
    var arrayOfKeyWords = $("#searchterm").val().split(',');
    for (var i = 0; i < arrayOfKeyWords.length; i++) {
        if (arrayOfKeyWords[i] !== "") { // ensure there is a value to highlight
            $('.message p.messagecontent').highlight(arrayOfKeyWords[i]);
        }
    }
} 
```

或者，如果有的话，您可以去掉尾随逗号。

```
if ($("#searchterm").val().length > 0) {
    $("#searchterm").addClass('marked-purple');
    var arrayOfKeyWords = $("#searchterm").val().replace(/,+$/, '').split(',');
    for (var i = 0; i < arrayOfKeyWords.length; i++) {
        $('.message p.messagecontent').highlight(arrayOfKeyWords[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:45:03.027

这就是如何删除字符串的最后一个逗号：

```
var str = "stack,overflow,js,"; 
if(str.charAt( str.length-1 ) == ",") {
  str = str.slice(0, -1);
} 
```

# iphone - 如何从 IMEI 获取 iPhone 信息（特别是 SIM 卡锁定状态）？

> ID：13953657
> 
> 赞同：-1
> 
> 时间：2012-12-19T13:39:58.320
> 
> 标签：iphone, imei

我的意思是我想从 iPhone 的 IMEI 号码（或序列号）中获取一些关于 iPhone 的信息（尤其是 SIM 卡锁定状态）。

换句话说，我想重现这些网站的一个非常基本的功能：[http://emag.radiom.ru/](http://emag.radiom.ru/)，[http://www.imei.info/check-warranty-unlock/](http://www.imei.info/check-warranty-unlock/) [http://www .s-url.ro](http://www.s-url.ro)。

首选语言是：Objective-C/C、bash、AppleScript、filemaker 和 python。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:01:22.563

Apple 不允许应用程序访问 IMEI 号码或手机序列号等信息，因此很遗憾，您无法实现您想要做的事情。

但是，如果您不是为 App Store 编程，则可以访问 Erica Sadun[在此处描述的 IMEI 号，以及](http://github.com/erica/uidevice-extension/blob/master/UIDevice-IOKitExtensions.m)[此处](https://stackoverflow.com/a/7127711/267892)描述的序列号。

# python - 从 PIL 图像或 StringIO 将图像插入 Reportlab

> ID：13953659
> 
> 赞同：24
> 
> 时间：2012-12-19T13:40:09.510
> 
> 标签：python, python-imaging-library, reportlab

我正在尝试将条形码图像插入 Reportlab。我知道对此有很多问题，但**他们都假设**您已经在目录或文件系统中拥有图像文件。

由于 Reportlab 在 EAN13 条形码方面存在问题，我决定使用另一个名为 pyBarcode 的包为我生成图像。

最初我将图像保存在 StringIO 实例中并将其直接传递给，`reportlab.platypus.flowables.Image`但这似乎不起作用。然后我阅读了文档：

> 支持 PIL/Java 1.4（Python/Java Imaging Library）支持的格式。

这是否意味着如果我通过 PIL 图像，这应该可以工作？当我尝试以下操作时出现异常：

```
>>> import PIL
>>> from reportlab.platypus.flowables import Image
>>> fp = StringIO(the_barcode.getvalue())
>>> barcode_image = PIL.Image.open(fp)
>>> doc = SimpleDocTemplate('barcode.pdf')
>>> story = [Image(barcode_image)]
>>> Traceback (most recent call last):
  File "create.py", line 57, in <module>
    main()
  File "create.py", line 24, in main
    save_pdf(fp, STYLE, ART, COLOR, SIZE)
  File "create.py", line 28, in save_pdf
    fp = StringIO(fp.getvalue())
  File "/home/mark/.virtualenvs/barcode/local/lib/python2.7/site-packages/reportlab-2.6-py2.7-linux-i686.egg/reportlab/platypus/flowables.py", line 402, in __init__
    if not fp and os.path.splitext(filename)[1] in ['.jpg', '.JPG', '.jpeg', '.JPEG']:
  File "/home/mark/.virtualenvs/barcode/lib/python2.7/posixpath.py", line 95, in splitext
    return genericpath._splitext(p, sep, altsep, extsep)
  File "/home/mark/.virtualenvs/barcode/lib/python2.7/genericpath.py", line 91, in _splitext
    sepIndex = p.rfind(sep)
  File "/home/mark/.virtualenvs/barcode/local/lib/python2.7/site-packages/PIL/Image.py", line 512, in __getattr__
    raise AttributeError(name)
AttributeError: rfind 
```

不知何故，PIL Image 似乎也不起作用。如果我没有图像的文件名（因为我的图像是在内存中创建的），我应该将什么作为第一个参数传递给 Reportlab 的 Image 函数？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-11-26T22:15:04.767

我对建议的方法没有运气。

检查 pdfdoc.py 中的代码显示，AttributError 是由于将 StringIO 视为文件名造成的：

```
 if source is None:
        pass # use the canned one.
    elif hasattr(source,'jpeg_fh'):
        self.loadImageFromSRC(source)   #it is already a PIL Image
    else:
        # it is a filename 
```

进一步检查源代码，发现 jpeg_fh 是 reportlab.lib.utils 中类 ImageReader 的属性。ImageReader 接受 StringIO 和 PIL 图像。

所以将 StringIO 包装在 ImageReader 中为我解决了这个问题：

```
import PIL
from reportlab.lib.utils import ImageReader

io_img = StringIO(data)
pil_img = PIL.Image.open(StringIO(data))

reportlab_io_img = ImageReader(io_img)
reportlab_pil_img = ImageReader(pil_img)

canvas.drawImage(reportlab_io_img, ...)
canvas.drawImage(reportlab_pil_img, ...) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-20T03:18:33.070

重复声明“支持 PIL/Java 1.4（Python/Java 映像库）支持的格式”仅表示支持的数据格式受`PIL`支持`reportlab`（因为它用于`PIL`读取它们）。

现在，从`reportlab.platypus.flowables.Image`代码中可以看出它接受文件名或文件对象作为输入。前者不是你想要的，所以让我们关注后者。你说`StringIO`的似乎没有用，但如果你小心一点，它就可以了。您可能做错了什么，这里有两种正确的使用方法`StringIO`：

```
import sys
import PIL
from cStringIO import StringIO
from reportlab.platypus.flowables import Image

# Method 1
data = open(sys.argv[1]).read()
img1 = StringIO(data)

# Method 2
img2 = StringIO()
PIL.Image.open(sys.argv[2]).save(img2, 'PNG')
img2.seek(0)

# Method 3 (fails)
img3 = StringIO(PIL.Image.open(sys.argv[2]).tostring())

story = [Image(img1), Image(img2)]
#Image(img3) 
```

方法 3 失败，因为`img3`现在保存了图像的原始数据，因此它不知道该数据的实际格式。没有理由尝试将此方法用于此类任务。

如果您有原始数据并且您知道数据的图像模式（“L”、“RGB”等）以及它的宽度、高度，那么您可以使用基于`PIL.Image.fromstring(...).save(mystrio, 'someformat')`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T14:23:54.473

我相信 PIL 文档的意思是它在内部使用 PIL 来处理图像数据。

从我在源代码中看到的，你可以直接传递一个文件对象，所以，有一个`read()`方法：

[https://github.com/ejucovy/reportlab/blob/master/src/reportlab/platypus/flowables.py#L314](https://github.com/ejucovy/reportlab/blob/master/src/reportlab/platypus/flowables.py#L314)

我想您可以以某种方式将原始图像数据包装在类似文件的对象（StringIO 等）中。

**编辑：**我想这就是你之前所做的，对不起。无论如何，这似乎是正确的方法。也许如果您告诉我们这种情况下的问题是什么，我们将能够解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-22T04:21:31.117

我发现两种不同的模式很有用，这取决于我是在画布上绘图还是为 multiBuild 构建可流动的元素。我正在使用保存到 BytesIO 缓冲区的 matplotlib 数字，但我假设相同的缓冲区将满足您的条形码需求。

对彼此而言：

```
import io 
```

对于画布：

```
from reportlab.lib.units import inch
from reportlab.lib.utils import ImageReader

# assume a proper Canvas object is instantiated as c

buf = io.BytesIO(the_barcode.getvalue())
buf.seek(0)
c.drawImage(ImageReader(buf), 0.5*inch, 5.5*inch, ) 
```

对于文档的可流动元素：

```
from reportlab.platypus.flowables import Image

# assume story is a list of flowable elements for multiBuild

buf = io.BytesIO(the_barcode.getvalue())
buf.seek(0)
story.append(Image(buf)) 
```

经过多次试验和错误，这些对我有用。

# iphone - 如何在 tableView 中添加 5 个不同的自定义单元格

> ID：13953664
> 
> 赞同：7
> 
> 时间：2012-12-19T13:40:32.957
> 
> 标签：iphone, ios, ios5, uitableview

我想在我的表格视图中显示来自网络的不同数据，但我不知道如何在表格的一个部分的单独单元格中显示它们，任何人都可以帮助我在一个单元格中显示

```
cell.textLabel.text=app.i_name; 
```

在第二个单元格中

```
cell.textLabel.text=app.i_phone; 
```

在第三个牢房

```
cell.textLabel.text=app.i_hours; 
```

在第四个单元格中

```
cell.textLabel.text=app.i_address; 
```

在第五个牢房

```
cell.textLabel.text=app.i_email; 
```

我在索引处的行单元格是

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Single Cell";
    SingleCell *cell =(SingleCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        UIViewController *c = [[UIViewController alloc] initWithNibName:@"SingleCell" bundle:nil];
        cell = (SingleCell *) c.view;
        //[c release];

    }
appDC * application = [dataArray objectAtIndex:[indexPath row]];

        //cell.namelbl.text=application.application_name;

return cell;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T13:51:11.647

试试这个代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Single Cell";
    SingleCell *cell =(SingleCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        UIViewController *c = [[UIViewController alloc] initWithNibName:@"SingleCell" bundle:nil];
        cell = (SingleCell *) c.view;
        //[c release];

    }
    appDC * application = [dataArray objectAtIndex:[indexPath row]];

    //cell.namelbl.text=application.application_name;
    if (indexPath.row == 0)
    {
        cell.textLabel.text=application.i_name;
    }
    else if (indexPath.row == 1)
    {
        cell.textLabel.text = application.i_iphone;
    }
    else if (indexPath.row == 2)
    {
        cell.textLabel.text = application.i_hours;
    }
    else if (indexPath.row == 3)
    {
        cell.textLabel.text = application.i_address;
    }
    else
    {
        cell.textLabel.text = application.i_email;
    }

    return cell;
} 
```

希望这个答案会有所帮助。干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T06:58:33.733

我通过执行此代码解决了这个问题感谢所有提供建议

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"CellForInfo";
    CellForInfo *cell =(CellForInfo *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        UIViewController *c = [[UIViewController alloc] initWithNibName:@"CellForInfo" bundle:nil];
        cell = (CellForInfo *) c.view;
        //[c release];

     }

    appDC * application = [dataArray objectAtIndex:0];
    if (indexPath.row == 0)
    {
        cell.lblinfo.text=application.i_name;
    }
     if (indexPath.row == 1)
    {
        cell.lblinfo.text = application.i_phone;
    }
     if (indexPath.row == 2)
    {
        cell.lblinfo.text = application.i_hours;
    }
     if (indexPath.row == 3)
    {
        cell.lblinfo.text = application.i_address;
    }
    if (indexPath.row == 4)
    {
        cell.lblinfo.text = application.i_email;
    }

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T15:04:53.950

IKQ 的代码示例应该可以工作。但我建议试试我的[TableKit](https://github.com/onegray/UITableKit)库。这样代码会更加清晰和优雅：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    TKStaticCell* nameCell = [TKStaticCell cellWithStyle:UITableViewCellStyleValue1 text:@"Name" detailText:app.i_name];
    TKStaticCell* phoneCell = [TKStaticCell cellWithStyle:UITableViewCellStyleValue1 text:@"Phone" detailText:app.i_phone];
    TKStaticCell* hoursCell = [TKStaticCell cellWithStyle:UITableViewCellStyleValue1 text:@"Hours" detailText:app.i_hours];
    TKStaticCell* addressCell = [TKStaticCell cellWithStyle:UITableViewCellStyleValue1 text:@"Address" detailText:app.i_address];
    TKStaticCell* emailCell = [TKStaticCell cellWithStyle:UITableViewCellStyleValue1 text:@"email" detailText:app.i_email];
    TKSection* section = [TKSection sectionWithCells:nameCell, phoneCell, hoursCell, addressCell, emailCell, nil];
    self.sections = [NSArray arrayWithObject:section];
} 
```

该库还允许定义自定义单元格而不是`TKStaticCell`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-27T04:07:06.427

您可以简称使用此代码

```
 CellForInfo * cellForInfo = (CellForInfo *)[tableView dequeueReusableCellWithIdentifier:nil];

            if (cellForInfo ==nil) {
                NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CellForInfo" owner:self options:nil];
                cellForInfo = [nib objectAtIndex:0];
            } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-05-13T10:24:38.970

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    [self tableInfo];
}

- (void) tableInfo
{

    NSArray *keysArray = @[@"CampaignsName",@"BusinessName",@"BusinessType",@"CampaignsType",@"Distance",@"Daysleft",@"CampaignImage",];

    NSArray *valuesArray1 =[NSArray arrayWithObjects:@"5 % OFF ",@"Coffe Shop",@"1",@"1",@"0.10 Miles",@"5 days Left",@"b2.png", nil];

    NSArray *valuesArray2 = [NSArray arrayWithObjects:@"win $2 for you & charity ",@"Red Tommato",@"2",@"2",@"20 Miles",@"2 days Left",@"b1.png", nil];

    NSArray *valuesArray3 = [NSArray arrayWithObjects:@"Buy dogs food & get a one more",@"Pet Care",@"3",@"3", @"30 Miles",@"10 days Left",@"b2.png", nil];

    NSArray *valuesArray4 =[NSArray arrayWithObjects:@"win $2 for you & charity ",@"Red Tommato",@"1",@"1",@"0.10 Miles",@"7 days Left",@"b2.png", nil];

    NSDictionary *dict1 = [NSDictionary dictionaryWithObjects:valuesArray1 forKeys:keysArray];

    NSDictionary *dict2 = [NSDictionary dictionaryWithObjects:valuesArray2 forKeys:keysArray];

    NSDictionary *dict3 = [NSDictionary dictionaryWithObjects:valuesArray3 forKeys:keysArray];

    NSDictionary *dict4 = [NSDictionary dictionaryWithObjects:valuesArray4 forKeys:keysArray];

    self.tableArray = [[NSArray alloc]initWithObjects:dict1,dict2,dict3,dict4,dict3,dict1,dict4,dict2,nil];
    NSLog(@"Array %@",tableArray);
    [self.tableObj reloadData];
}

#pragma  mark table view datasource

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.tableArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [self tableCustomView:tableView cellForRowAtIndexPath:indexPath];
    return cell;
}

- (UITableViewCell *)tableCustomView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *mainCell ;

    static NSString *CellIdentifier1 = @"CustomCellIdentifier";
    static NSString *CellIdentifier2 = @"CustomCellIdentifier2";

    if (indexPath.row % 2 != 0)
    {
        CustomCell2 *cell2 = [tableView dequeueReusableCellWithIdentifier:CellIdentifier2];
        if (cell2 == nil)
        {

            NSArray *topObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell2" owner:self options:nil];
            cell2 = [topObjects objectAtIndex:0];
        }

        id object = [self.tableArray objectAtIndex:indexPath.row];

        cell2.CampaignsNameLbl.text = [NSString stringWithFormat:@"%@",[object valueForKey:@"CampaignsName"]];
        cell2.BusinessNameLbl.text = [NSString stringWithFormat:@"%@",[object valueForKey:@"BusinessName"]];
        cell2.DistanceLbl.text = [NSString stringWithFormat:@"%@",[object valueForKey:@"Distance"]];
        cell2.DaysleftLbl.text = [NSString stringWithFormat:@"%@",[object valueForKey:@"Daysleft"]];

        cell2.cellBackImg.image = [UIImage imageNamed:[NSString stringWithFormat:@"%@",[object valueForKey:@"CampaignImage"]]];

        int businessType = [[NSString stringWithFormat:@"%@",[object valueForKey:@"BusinessType"]] integerValue];

        NSLog(@": %d",businessType);

        switch (businessType)
        {

            case 1:

                cell2.cellBusinessTypeImg.image = [UIImage imageNamed:@"RETL@2x.png"];

                break;
            case 2:

                cell2.cellBusinessTypeImg.image = [UIImage imageNamed:@"BTY.png"];

                break;
            case 3:

                cell2.cellBusinessTypeImg.image = [UIImage imageNamed:@"t1.png"];

                break;

            default:
                break;
        }

        int CampaignsType = [[NSString stringWithFormat:@"%@",[object valueForKey:@"CampaignsType"]] integerValue];

        switch (CampaignsType)
        {

            case 1:

                cell2.cellOverLayBusinessTypeImg.image = [UIImage imageNamed:@"t3.png"];

                break;
            case 2:

                cell2.cellOverLayBusinessTypeImg.image = [UIImage imageNamed:@"t2.png"];

                break;
            case 3:

                cell2.cellOverLayBusinessTypeImg.image = [UIImage imageNamed:@"t1.png"];

                break;

            default:
                break;
        }

        mainCell = cell2 ;

    }

    else
    {
        CustomCell1 *cell1 = [tableView dequeueReusableCellWithIdentifier:CellIdentifier1];
        if (cell1 == nil)
        {

            NSArray *topObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell1" owner:self options:nil];
            cell1 = [topObjects objectAtIndex:0];
        }

        id object = [self.tableArray objectAtIndex:indexPath.row];

        cell1.CampaignsNameLbl.text = [NSString stringWithFormat:@"%@",[object valueForKey:@"CampaignsName"]];
        cell1.BusinessNameLbl.text = [NSString stringWithFormat:@"%@",[object valueForKey:@"BusinessName"]];
        cell1.DistanceLbl.text = [NSString stringWithFormat:@"%@",[object valueForKey:@"Distance"]];
        cell1.DaysleftLbl.text = [NSString stringWithFormat:@"%@",[object valueForKey:@"Daysleft"]];

        cell1.cellBackImg.image = [UIImage imageNamed:[NSString stringWithFormat:@"%@",[object valueForKey:@"CampaignImage"]]];

        int businessType = [[NSString stringWithFormat:@"%@",[object valueForKey:@"BusinessType"]] integerValue];

        NSLog(@": %d",businessType);

        switch (businessType)
        {

            case 1:

                cell1.cellBusinessTypeImg.image = [UIImage imageNamed:@"RETL@2x.png"];

                break;
            case 2:

                cell1.cellBusinessTypeImg.image = [UIImage imageNamed:@"BTY.png"];

                break;
            case 3:

                cell1.cellBusinessTypeImg.image = [UIImage imageNamed:@"t1.png"];

                break;

            default:
                break;
        }

        int CampaignsType = [[NSString stringWithFormat:@"%@",[object valueForKey:@"CampaignsType"]] integerValue];

        switch (CampaignsType)
        {

            case 1:

                cell1.cellOverLayBusinessTypeImg.image = [UIImage imageNamed:@"t3.png"];

                break;
            case 2:

                cell1.cellOverLayBusinessTypeImg.image = [UIImage imageNamed:@"t2.png"];

                break;
            case 3:

                cell1.cellOverLayBusinessTypeImg.image = [UIImage imageNamed:@"t1.png"];

                break;

            default:
                break;
        }

        mainCell = cell1 ;
    }

    return mainCell;

    NSLog(@"Index Path is :%d %d", indexPath.section,indexPath.row);
} 
```

# tcl - 如何使 config.txt 文件在 tcl 中正确可读

> ID：13953667
> 
> 赞同：0
> 
> 时间：2012-12-19T13:40:48.337
> 
> 标签：tcl

我在 config.txt 文件中有一个开关配置。我已经用`set fd [open config.txt r]`and 和 o/p 将此文件打开到 tcl 中`puts $fd`，

```
switchport
switchport access vlan 333
switchport mode access
switchport port-security
switchport port-security maximum 5 
```

现在我想将此 o/p 解析为另一个名为 newconfig.txt 的文件，它应该如下所示，

```
switchport

switchport access vlan 333

switchport mode access

switchport port-security

switchport port-security maximum 5 
```

谁能告诉我怎么做，因为这个文件非常大，我想让它更具可读性。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:07:48.467

如果我理解正确，您希望生成的文件包含源文件中的所有行，并用空行分隔。这可以通过在源文件的每一行附加一个额外的换行符 ( `\n`) 并将其写入结果文件来完成，如下所示：

```
set in [open config.txt]
set out [open newconfig.txt w]

while {[gets $in line] >= 0} {
   append line \n
   puts $out $line
}
close $in
close $out 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T22:54:43.100

我认为替代方法可能是：

```
set in    [open config.txt]
set out   [open newconfig.txt w]
set data  [read $in]
puts $out [join [split $data "\n"] "\n\n"]
close $in
close $out 
```

这不会在文件的最后一行添加额外的新行:)

# java - 试图让一个全新的 android 项目与 SlidingMenu (jfeinstein10) 和 ActionbarSherlock 一起工作

> ID：13953668
> 
> 赞同：2
> 
> 时间：2012-12-19T13:40:51.800
> 
> 标签：java, android, eclipse, menu, actionbarsherlock

我创建了一个全新的 android 项目，并向其中添加了 SherlockActionBar 和 SlidingMenu。

我以为我已经从示例文件中复制了所有内容，但它仍然无法正常工作。它显示了我的主要片段，但是当我单击图标时菜单根本不显示。

**我错过了什么？？**

这是类和 XML。除了这些类/xml 文件之外，项目是空的。

第一类（主要活动）：

```
import android.os.Bundle;   
import com.slidingmenu.lib.SlidingMenu;
import com.slidingmenu.lib.app.SlidingFragmentActivity;

public class Main extends SlidingFragmentActivity {

    protected MenuFragment mFrag;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mFrag = new MenuFragment();

        setContentView(R.layout.activity_main);

        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.content_frame, new SectionOneFragment())
        .commit();

        //  set the Behind View
        setBehindContentView(R.layout.activity_menu);

        getSupportFragmentManager()
        .beginTransaction()         
        .replace(R.id.menu_frame, mFrag)
        .commit();

        // customize the SlidingMenu
        SlidingMenu sm = getSlidingMenu();
        sm.setMode(SlidingMenu.LEFT);
        sm.setShadowWidthRes(R.dimen.shadow_width);
        sm.setShadowDrawable(R.drawable.shadow);
        sm.setBehindOffsetRes(R.dimen.slidingmenu_offset);
        sm.setFadeDegree(0.35f);
        sm.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);

        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        setSlidingActionBarEnabled(false);
    }
} 
```

第 2 类（菜单片段）：

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class MenuFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        return inflater.inflate(R.layout.fragment_menu, null);
    }
} 
```

第 3 类（SectionOne 片段）

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class SectionOneFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        return inflater.inflate(R.layout.fragment_main, null);
    }
} 
```

XML 1 (res->layout->activity_main.xml):

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/content_frame"
android:layout_width="match_parent"
android:layout_height="match_parent" /> 
```

XML 2 (res->layout->activity_menu.xml):

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/menu_frame"
android:layout_width="match_parent"
android:layout_height="match_parent" /> 
```

XML 3 (res->layout->fragment_main.xml):

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_centerHorizontal="true"
android:layout_centerVertical="true"
android:text="@string/hello_world"
android:textColor="#ff00ff"
tools:context=".Main" /> 
```

XML 4 (res->layout->fragment_menu.xml):

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_centerHorizontal="true"
android:layout_centerVertical="true"
android:text="TEST"
android:textColor="#00ff00" /> 
```

显现：

```
<uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock" >
        <activity
            android:name=".Main"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application> 
```

Shadow.xml、dimens.xml 是从示例项目中复制而来的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:38:45.470

问 jfeinstein10，我发现我忘了添加 onOptionsItemSelected 方法。

正确打开代码（修复我上面的课程）：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        toggle();
        return true;        
    }
    return super.onOptionsItemSelected(item);
} 
```

应该在 onCreate 之后的 MainActivity 类中。

# asp.net - 表单中的表单和 JSON 调用

> ID：13953673
> 
> 赞同：12
> 
> 时间：2012-12-19T13:41:04.460
> 
> 标签：asp.net, json, forms, jquery

在我的页面中，我有一个表格：

```
 <form method="post" id="confirm-order-form" name="confirm-order-form"> 
```

在表单中，我编写了一些脚本来进行 JSON 调用：

```
<script type="text/javascript"><xsl:text disable-output-escaping="yes"><![CDATA[
    $(function() {
        $('#submit').click(function() {
             if ($('#nlapproved').attr('checked')) {
                newsletter();
            }
        });

        function newsletter()
        {
            $form = $('<form action="http://mydomain.createsend.com/t/j/s/jtes/" method="post" id="subForm" />');
            $form.append('<input type="hidden" name="cm-name" id="hidName" />');
            $form.append('<input type="hidden" name="cm-jtes-jtes" id="hidEmail" />');
            $form.append('<input type="hidden" name="cm-fo-pikty" id="hidPrivateBusiness" />');

            $form
                .find("#hidName")
                .val(']]></xsl:text><xsl:value-of select="$context//checkoutinformation/info[key='name']/value" disable-output-escaping="yes"/><xsl:text disable-output-escaping="yes"><![CDATA[');

            $form
                .find("#hidEmail")
                .val(']]></xsl:text><xsl:value-of select="$context//checkoutinformation/info[key='email']/value" disable-output-escaping="yes"/><xsl:text disable-output-escaping="yes"><![CDATA[');

            $form
                .find("#hidPrivateBusiness")
                .val(']]></xsl:text><xsl:value-of select="$acctype"/><xsl:text disable-output-escaping="yes"><![CDATA[');

            $.getJSON(
                $($form).get(0).action + "?callback=?",
                $($form).serialize(),
                function (data) {
                    if (data.Status === 400) {
                        alert("Error: " + data.Message);
                    } else { 
                        // 200
                        alert("Success: " + data.Message);
                    }
                }
            );
        }
    });
    ]]>
    </xsl:text>
</script> 
```

我的问题是，当外部形式存在时，这个东西不起作用——否则代码可以正常工作。注意：我将这个页面重定向到外部表单后面的另一个物理服务器，并且我在第一个表单中有很多其他控件，所以我不能简单地避免这种情况。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:32:52.580

正在提交实际表格。不要那么做：

```
$("#confirm-order-form").on('submit', function (e) { e.preventDefault(); }); 
```

编辑：提交ajax，然后是正常形式：

```
...ajax.done(function () {
   $("#confirm-order-form").off('submit').trigger('submit');
}); 
```

ajax成功完成后，解除对表单提交的阻止，触发一次提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:33:04.933

1）在具有该属性`div`的表单之外添加一个。`runat="server"`

```
<form runat="server">

    <!-- stuff here -->

</form>

<div id="target"></div> 
```

2）编写你的jQuery选择器来定位那个div。

```
$('#target').append('<form id="newform"></form>');

// add your controls...

$.post(
    'your_action', 
    $('#newform').serialize(), 
    function(result){ 
        // handle result... 
    }, 
    'json'); 
```

3）对服务器表单做任何你需要做的事情......

# java - 需要将网络应用程序与所有主要的 ERP 和 CRM 系统集成

> ID：13953674
> 
> 赞同：0
> 
> 时间：2012-12-19T13:41:03.360
> 
> 标签：java, integration, esb, eai

我有一个 Web 应用程序，它需要与所有主要的 CRM 和 ERP 系统交互才能发送和接收数据。

根据您的说法，这将是一个更好的方法。

1.  在 Web 应用程序中设计整个逻辑，也许每个界面都有一个组件
2.  使用 ESB。

请建议什么是实现这一点的最佳方法，任何其他解决方法，也欢迎设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:43:35.413

Web 服务几乎是为解决许多不同系统之间的通信和集成问题而量身定制的，因此这似乎是最合乎逻辑的解决方案。

如果您需要有序的消息传递、有保证的消息传递等，那么 ESB 可能是您最好的选择。否则，您的 Web 应用程序应该能够通过 Web 服务直接与其他系统集成。

最后，您可能无论如何都希望在您的 Web 应用程序中创建组件以封装每个系统的逻辑（现在这样做将有助于确保在/当您更换一个外部系统时需要进行最小的更改）。例如，对于最近与会计系统的集成，我创建了接口和抽象类来概括所有会计系统固有的功能，然后为我当时正在集成的特定会计系统创建实现该功能的具体类。这样做的好处是，如果我的客户将来更改会计系统，我需要做的就是创建另一个具体的实现——我不需要在我的客户端应用程序中重写代码。

# c# - 建模多态关联数据库优先与代码优先

> ID：13953675
> 
> 赞同：19
> 
> 时间：2012-12-19T13:41:05.757
> 
> 标签：c#, ef-code-first, foreign-keys, entity-framework-5, ef-database-first

我们有一个数据库，其中一个表包含可以是其他几个表的子记录。它有一个由所有者 ID 和表名组成的“软”外键。这种（反）模式被称为“多态关联”。我们知道这不是最好的数据库设计，我们会在适当的时候改变它，但不会在不久的将来。让我展示一个简化的例子：

![在此处输入图像描述](../Images/a6353f395b91e30d8e6b0e0c9f5e2b55.png)

`Event`、`Person`和都`Product`在 Comment 中有记录。如您所见，没有硬性 FK 约束。

`Comment`在实体框架中，可以通过子类化到等来支持此模型，`EventComment`并让`Event`有一个`EventComments`集合等：

![在此处输入图像描述](../Images/aafd574bb6cc97cdbc0a74b3b04cce27.png)

从数据库生成基本模型后，手动添加子类和关联。`OwnerCode`是这个**TPH**模型中的判别器。请注意`Event`,`Person`和`Product`是完全不同的实体。为它们提供一个通用的基类是没有意义的。

这是数据库优先的。我们现实生活中的模型就是这样工作的，没问题。

好的。现在我们要转向代码优先。所以我开始将数据库逆向工程为代码优先模型（EF Power Tools），然后继续创建子类并映射关联和继承。试图连接到 Linqpad 中的模型。这时候麻烦就开始了。

当尝试使用此模型执行查询时，它会抛出一个`InvalidOperationExeception`

> 外键组件“OwnerId”不是“EventComment”类型的声明属性。验证它没有被明确地从模型中排除，并且它是一个有效的原始属性。

当我有双向关联并被`OwnerId`映射为`Comment`. `EventMap`我的类 ( )中的映射`EntityTypeConfiguration<Event>`如下所示：

```
this.HasMany(x => x.Comments).WithRequired(c => c.Event)
    .HasForeignKey(c => c.OwnerId); 
```

所以我试图`OwnerId`在模型中不映射关联：

```
this.HasMany(x => x.Comments).WithRequired().Map(m => m.MapKey("OwnerId")); 
```

这抛出一个`MetaDataException`

> 指定的架构无效。错误：（10,6）：错误 0019：类型中的每个属性名称必须是唯一的。已定义属性名称“OwnerId”。(11,6) : 错误 0019: 类型中的每个属性名称必须是唯一的。已定义属性名称“OwnerId”。

如果我删除了三个实体评论关联中的两个，就可以了，但这当然不是治愈方法。

一些进一步的细节：

*   通过添加 DbContext 生成器项，可以从 edmx 创建一个有效的 DbContext 模型（“第二个代码”）。（这暂时是一种解决方法）。
*   当我将工作代码优先模型（具有一个关联）导出到 edmx ( `EdmxWriter`) 时，关联似乎在存储模型中，而在原始 edmx 中它们是概念模型的一部分。

那么，我怎样才能先创建这个模型呢？我认为关键是如何指示代码优先映射概念模型中的关联，而不是存储模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-22T13:36:38.567

在这种复杂程度的任何模式上使用 EF 时，我个人首先坚持使用数据库。关于代码，我遇到了复杂模式的问题。也许较新的版本更好一些，但担心如何尝试和编码复杂的关系似乎不那么直接，而是让引擎为您生成它。此外，当关系变得如此复杂时，我倾向于避免尝试使用 EF 生成它，并尝试使用存储过程来更轻松地对可能出现的性能瓶颈进行故障排除。

# windows - 来自 Win32::Service 模块 GetStatus() 调用的 Perl 服务状态代码与 Services.msc 小程序的不匹配

> ID：13953678
> 
> 赞同：1
> 
> 时间：2012-12-19T13:41:09.867
> 
> 标签：windows, perl, winapi, service

我一直在尝试编写一个 Perl 脚本来检查远程服务器的服务状态。我正在使用[Win32::Service](http://search.cpan.org/perldoc/Win32%3a%3aService)模块来实现我的目标。

我发现返回的某些服务值`Win32::Service::GetStatus` `CurrentStatus`与从 services.msc 小程序中观察到的值不完全相同。

这是我正在使用的一段脚本以及来自 script 和`servics.msc`.

```
use Data::Dumper;
use Win32;
use Win32::Service;
use strict;
use warnings;

my %statcodeHash = (     '1' => 'stopped.',
                     '2' => 'start pending.',
                     '3' => 'stop pending.',
                     '4' => 'running.',
                     '5' => 'continue pending.',
                     '6' => 'pause pending.',
                     '7' => 'paused.'            );

my @serviceNames = qw(NNMAction RpcEptMapper smstsmgr SNMPTRAP);

foreach my $serv (@serviceNames)
{   my %status;
    my $ret = Win32::Service::GetStatus('nnmi.hclt.corp.hcl.in', $serv, \%status);
    if ($ret)
    {   print "success\t$statcodeHash{$status{CurrentState}}\t$serv\n";
    }
    else
    {       print Win32::FormatMessage(Win32::GetLastError()), "\n";
    }
} 
```

*脚本的输出*

```
D:\AVI MEHENWAL\PERL\SCRIPTS\PROJECTS\Serve Management>perl -w perl_RemoteServiceStatus.pl
success stopped.        NNMAction
success running.        RpcEptMapper
success stopped.        smstsmgr
success stopped.        SNMPTRAP 
```

*来自 Services.msc 的输出*

```
Name       Descrition   Status   StartupType  LogOnAs
NNMAction  bla bla bla  Started  Manual       LocalSystem 
```

谁能建议我应该遵循什么方法来实现我的目标，我的方法是错误的还是从 Perl 模块的角度来看我缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T14:25:41.877

### 更新

我注意到这`nnmi.hclt.corp.hcl.in`似乎是一个域名，而不是 Windows 风格的机器名称。首先，找出对应的IP地址`nnmi.hclt.corp.hcl.in`。假设它是`x.x.x.x`。

现在，运行`nbtstat -A x.x.x.x`。那应该告诉您机器的名称。假设它是`NNMI`。然后，您应该在`my $remote`下面的行中指定，替换`MYREMOTE`为`NNMI`，然后重试。

我假设您拥有正确的权限等。如果您遇到与授权相关的错误，恐怕我无法帮助您，但您可以在[ServerFault](http://serverfault.com)上询问以了解您需要做什么，以便能够查询服务域中的远程计算机。

```
use strict;
use warnings;
use Data::Dumper;
use Win32;
use Win32::Service;

my %status_codes = reverse (
    SERVICE_STOPPED          => 0x00000001,
    SERVICE_START_PENDING    => 0x00000002,
    SERVICE_STOP_PENDING     => 0x00000003,
    SERVICE_RUNNING          => 0x00000004,
    SERVICE_CONTINUE_PENDING => 0x00000005,
    SERVICE_PAUSE_PENDING    => 0x00000006,
    SERVICE_PAUSED           => 0x00000007,
);

my $remote = '\\\\MYREMOTE';

my @services = qw(Fax ClipSrv AcrSch2Svc);

foreach my $svc (@services) {
    my %status;
    my $ret = Win32::Service::GetStatus($remote, $svc, \%status);

    if ($ret) {
        printf(
            "success\t%s\t%s\n",
            $status_codes{ $status{CurrentState} },
            $svc
        );
    }
    else
    {
        warn sprintf(
            "failed to get '%s' status: %s\n",
            $svc,
            Win32::FormatMessage(Win32::GetLastError())
        );
    }
} 
```

作为参考，[`SERVICE_STATUS`结构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685996%28v=vs.85%29.aspx)记录[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685996%28v=vs.85%29.aspx)。

# python - 文档真的“按订单 ID 的降序返回”吗？

> ID：13953683
> 
> 赞同：0
> 
> 时间：2012-12-19T13:41:16.220
> 
> 标签：python, google-app-engine, google-search-api

根据[文档](https://developers.google.com/appengine/docs/python/search/scoreddocumentclass)。

然而，实际情况似乎并非如此。例如，这是`order_id`我在遍历`ScoredDocuments`搜索查询返回的列表时发送到日志的属性列表：

```
62083050
62083026
62083044
62083032
62083043
62083057
62083055
62083013
62083049
62083047 
```

我正在使用 SDK 1.7.3。

# javascript - 如何在 CKEDITOR 中为 RichCombo 动态生成选项？

> ID：13953691
> 
> 赞同：3
> 
> 时间：2012-12-19T13:41:43.097
> 
> 标签：javascript, ckeditor

我的页面上有一个带有 textarea (CKEDITOR) 和 select field 的表单`<select id="_photogalleries" multiple="multiple"></select>`。我希望 RichCombo 中的选项取决于在 select with id 中选择的选项`#_photogalleries`。有没有办法动态地重新生成 RichCombo？提前致谢。

```
CKEDITOR.plugins.add('style_plugin', {
        requires: ['richcombo'],
        init: function(editor) {
            var pluginName = 'style_plugin';
            var config = editor.config,
                lang = editor.lang.format;

            editor.ui.addRichCombo('photogalleries', {
                label: "Фоторепортаж",
                title: "Фоторепортаж",
                voiceLabel: "Фоторепортаж",
                className: 'cke_format',
                multiSelect: false,
                icon: CKEDITOR.plugins.getPath('style_plugin') + 'photo-list-horizontal.png',

                panel: {
                    css: [config.contentsCss, CKEDITOR.getUrl(editor.skinPath + 'editor.css')],
                    voiceLabel: lang.panelVoiceLabel
                },

                init: function () {
                    this.startGroup("Фоторепортаж");
                    var list=this;
                    $("#_photogalleries option:selected").each(function(index, value){
                        console.log(index, value);
                        list.add("#HORIZONTAL_GALLERY_"+ $(value).val()+"#", "(Г) " + $(value).text(), "(Г) " + $(value).text());
                        list.add("#VERTICAL_GALLERY_"+ $(value).val()+"#",   "(В) " + $(value).text(), "(В) " + $(value).text());
                    });
                },

                onClick: function (value) {
                    editor.focus();
                    editor.fire('saveSnapshot');
                    editor.insertHtml(value);
                    editor.fire('saveSnapshot');
                }
            });
        }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-15T03:27:19.430

这对我有用，您不必保留全局变量。

```
 CKEDITOR.plugins.add('systemdata', {
        init: function (editor) {

            var fnData = editor.config.fnData;

            if (!fnData || typeof (fnData) != 'function')
                throw "You must provide a function to retrieve the list data.";

            editor.ui.addRichCombo('systemDataCmb',
                {
                    allowedContent: 'abbr[title]',
                    label: "System Data",
                    title: "System Data",
                    multiSelect: false,
                    init: function () {

                        var self = this;

                        var content = fnData();

                        $.each(content, function(index, value) {
                            // value, html, text
                            self.add(value.name, value.name, value.name)
                        });
                    }
} 
```

然后设置函数来获取数据把它放在你设置ckeditor的地方

```
 CKEDITOR.replaceAll(function(element, config) {
                            config.startupFocus = true;
                            config.fnData = function() {

                                var returnData = null;

                                $.ajax({
                                    url: "/GetData",
                                    async: false,
                                    data: { id: 1 },
                                }).done(function(result) { returnData= result; });

                                return returnData;
                            };
                        }); 
```

它假设您带回一个 json 响应，其中包含一组具有 value 属性的项目，但可以轻松更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T15:29:50.773

我想我找到了一个适合我的解决方案。它是将列表对象保留在全局变量中，然后在外部选择中触发 onchange 事件时对其进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-05T12:47:59.397

我用一行解决了这个问题：

```
YOURCOMBO.createPanel(editor); 
```

例如：

```
var comboTeam = editor.ui.get("team"); 

comboTeam.createPanel(editor);//This is important, if not, doesnt works 
```

现在您可以将项目添加到组合

```
comboTeam.add("name","name","name");

comboTeam.add("name2","name2","name2");

comboTeam.add("name3","name3","name3"); 
```

# sharepoint - 我们是否应该使用备用访问映射在同一区域中创建两个 url？

> ID：13953693
> 
> 赞同：-1
> 
> 时间：2012-12-19T13:41:48.230
> 
> 标签：sharepoint, alternate-access-mappings

我们可以通过使用可用的不同区域的备用访问映射来为站点创建不同的 url。但我试图在同一区域中创建两个 url，用于内部和外部目的。但是我找不到创作的方法。是否可以创建？如果是这样，任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T07:09:23.027

和之前一样难过：

> 每个区域只能有一个 URL...

对于两个不同的 URL，您可以改用[主机站点标头集合](http://technet.microsoft.com/en-us/library/cc424952%28v=office.14%29.aspx)。

这将使您能够为每个站点创建具有适当 URL 的不同站点集合。请注意，如果您使用主机标头集合解决方案，则不能再使用“AAM”！

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T14:22:06.423

您可以为一个映射分配不同的 URL。每个区域只能有一个 URL。看这个例子：

![在此处输入图像描述](../Images/adf1d2a81bcd5f57a8a6f4346b0f1202.png)

我的访问映射集合“SharePoint Portal”（一个 Web 应用程序）的默认 URL 是`http://sp.dev`自定义 URL 是`http://blabla.com`. 您可以通过使用中央管理中的“编辑公共 URL”来编辑这些。

# javascript - 从同一网站的外部页面加载 div 中的内容

> ID：13953700
> 
> 赞同：2
> 
> 时间：2012-12-19T13:42:12.023
> 
> 标签：javascript, ajax, jquery

我尝试根据选择框中的选择将内容加载到 Intex 中的 div 中。它不起作用，所以出了点问题。我做了一个四页的例子来基本展示它是如何的：

```
Index.html
one.html
two.html
three.html 
```

在索引中，我有一个 ID 为“selectchoice”的选择元素：

```
<select id="selectchoice>
<option>Select a choice</option>
<option>1</option>
<option>2</option>
<option>3</option>
</select> 
```

我在索引中也有一个 id 为“get_content”的 div：

```
<div id="get_content"></div> 
```

当我将选择元素更改为选项 1 或 2 或 3 时，我想将 one.html 或 two.html 或 three.html 加载到 div get_content 中。

然后，如果 Index.html，我将此代码放在标头中，在 jQuery 文件链接之后。

```
<script>
$("#selectchoice").change(function(){
    $("#get_content").load("");
    $("#get_content").load("one.html");
    $("#get_content").load("two.html");
    $("#get_content").load("three.html");
}); 
```

然后我运行该站点（在具有其他加载脚本的服务器上运行在同一站点上），但它不工作。怎么了？：/

对于脚本和编程来说有点新，所以如果有任何标准错误，不要感到惊讶。

有人发现错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:50:56.990

首先应该关闭选择标签的 id 属性，并且应该优化您的 javascript 函数。就像是

```
<script>
$("#selectchoice").change(function(){
    var page = this.selectedIndex;
    if(page == 1) { 
       $("#get_content").load("one.html");
       return;
    }
    else if(page == 2) {
      $("#get_content").load("two.html");
      return;
   }
   ....  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:47:26.153

您的`select`标签未正确关闭。在您的 id 之后添加`"`以关闭 id 属性。然后它看起来像这样：

`<select id="selectchoice">`...

尝试用这个替换你的javascript：

```
$(document).ready(function (){
    $("#selectchoice").change(function(){

        var selectedOption = $('#selectchoice :selected').val();
        $containerDiv = $('#get_content');
        $containerDiv.html("");

        switch (selectedOption)
        {
            case "1": 
                $containerDiv.load( "one.html" );
                break;

            case "2":
                $containerDiv.load( "two.html" );
                break;

            case "3":
                $containerDiv.load( "three.html" );
                break;

            default:
                $containerDiv.load( "whatever.html" );
                break;
       }

        return true;
    });​
}); 
```

`$(document).ready(...)`使代码在页面加载后执行，这意味着它将在您加载页面时将函数绑定到 onChange 事件，而之前它不会执行脚本，因为它没有在任何地方调用。

此代码尊重大多数[Object Calisthenics 实践](http://www.bennadel.com/blog/2374-Object-Calisthenics-In-JavaScript-An-Introduction.htm)。我让自己松了一些，因为它只是一个小片段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T13:50:27.793

```
$(function(){ // do it after page load
   $("#selectchoice").change(function(e){
     if(e.target.value=="select a choice"){ // you can use switch instead of if
       $("#get_content").load("");
     }else if(e.target.value=="1"){
       $("#get_content").load("one.html");
     }
     //....
}); 
```

# jquery - ASCX 中的 jQuery 对话框不会关闭

> ID：13953703
> 
> 赞同：0
> 
> 时间：2012-12-19T13:42:18.557
> 
> 标签：jquery, .net, jquery-ui, user-controls, jquery-ui-dialog

我正在处理一个加载外部页面的对话框，其中包含一个小的 2 页表单。打开对话框并使用表单可以正常工作，直到我关闭对话框。我在第二页中有一个按钮，用于调用对话框（“关闭”），但它从不关闭对话框。

我将这一切都包含在 .Net 用户控件中，我曾希望它能解决问题，但似乎没有任何效果。控制代码如下。

我已经尝试了一些在这里找到的解决方案。我尝试仅在 ASCX 以及父页面和母版中保留 jQuery 和 jQuery UI 的脚本标签。我也尝试过对话框的按钮选项，但也没有用。

现在我没有收到任何错误，只是没有任何反应。如果我尝试做一个 $("#dialog").dialog("close"); 在控制台中，我收到错误消息：“错误：在初始化之前无法调用对话框上的方法；试图调用方法‘关闭’”

有谁知道我可以做些什么来让这个对话框正确关闭？

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="SchedulerPopup.ascx.cs" Inherits="sandbox.SchedulerPopup" %>

<script type="text/javascript" src="//code.jquery.com/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="//code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<link rel="Stylesheet" href="//code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<style type="text/css">
.hidden { display: none; }
#header { float: left; width: 600px; }
ul { padding: 0; margin: 0; }
#dayList {
    font: normal 13px Arial;
    background-color: #EEE;
    background-image: -webkit-gradient(linear,0 0,0 100%,from(#FAFAFA),to(#DADADA));
    background-image: -moz-linear-gradient(top,#FAFAFA,#DADADA);
    border: 1px solid #BBB;
    border-radius: 3px;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    display: inline-block;
    zoom: 1;
    list-style: none;
    padding: 0;
    vertical-align: middle;
}
#dayList li { 
    border-top: 1px solid transparent;
    border-right: 1px solid #BBB;
    border-bottom: 1px solid transparent;
    border-left: 1px solid white;
    color: #222;
    cursor: pointer;
    display: block;
    float: left;
    font-size: 13px;
    height: 20px;
    line-height: 20px;
    min-width: 15px;
    padding: 0px 9px;
    margin: 0;
    text-align: center;
    text-decoration: none;
    text-shadow: 0 1px 0px #EEE;
    }
#dayList li:first-of-type { 
    border-left: 0;
    border-radius: 3px 0 0 3px;
    -webkit-border-radius: 3px 0 0 3px;
    -moz-border-radius: 3px 0 0 3px;
    box-shadow: inset 1px 0 white;
    -webkit-box-shadow: inset 1px 0 white;
    -moz-box-shadow: inset 1px 0 #fff; 
    }
#dayList li:last-of-type {
    border-right: 0;
    border-radius: 0 3px 3px 0;
    -webkit-border-radius: 0 3px 3px 0;
    -moz-border-radius: 0 3px 3px 0;
}
#dayList li.click {
    background-color: #787878;
    background-image: -webkit-gradient(linear,0 0,0 100%,from(#989898),to(dimGray));
    background-image: -moz-linear-gradient(top,#989898,dimGray);
    border-color: #666;
    box-shadow: none;
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    color: white;
    font-weight: bold;
    margin: -1px 0 -1px -1px;
    padding: 1px 9px 1px 9px;
    text-shadow: 0 1px 0px #4C4C4C;
}
#content {
    float: left;
    width: 450px;
    clear: both;
}
.input { width: 320px; }
#lblReportName { font-style: italic; }
#dayOfWeek { margin: 0; }
#dayOfMonth { height: 26px; }
#btnSubmit, #btnClose { cursor: pointer; }
</style>
<script type="text/javascript">
$(document).ready(function () {
    $("#dialog").dialog({
        autoOpen: false,
        modal: true,
        width: 485,
        height: 280,
        resizable: false,
        draggable: false,
        title: "Email Scheduler",
        open: function (event, ui) {
            $(this).load("EmailSchedulerPopup.aspx")
        }
    });
    $("#popupScheduler").click(function () {
        $("#dialog").dialog("open");
    });
    $("#ddlFrequency").change(function () {
        var freq = $("#ddlFrequency").val();
        switch (freq) {
            case "once":
                $("#dayOfWeek").hide("fade", {}, 150);
                $("#dayOfMonth").hide("fade", {}, 150);
                break;
            case "daily":
                $("#dayOfWeek").hide("fade", {}, 150);
                $("#dayOfMonth").hide("fade", {}, 150);
                break;
            case "weekly":
                $("#dayOfMonth").hide("fade", {}, 150, function () {
                    $("#dayOfWeek").show("fade", {}, 300);
                });
                break;
            case "monthly":
                $("#dayOfWeek").hide("fade", {}, 150, function () {
                    $("#dayOfMonth").show("fade", {}, 300);
                });
                break;
            case "quarterly":
                $("#dayOfWeek").hide("fade", {}, 150);
                $("#dayOfMonth").hide("fade", {}, 150);
                break;
        }
    })
    $("#dayList li").click(function () {
        var interval = $(this).attr("class");
        $("#dayList li").addClass("click").not(this).removeClass("click");
        $("#txtDayInterval").val(interval);
    });
    $("#btnSubmit").click(function () {
        console.log("button clicked");
        var from = $("#txtFrom").val();
        var to = $("#txtTo").val();
        var subject = $("#txtSubject").val();
        var interval = $("#ddlFrequency").val();
        var day = $("#txtDayInterval").val();
        var data = "{ \"sFrom\" : \"" + from + "\", \"sTo\" : \"" + to + "\", \"sSubject\" : \"" + subject + "\", \"sInterval\" : \"" + interval + "\", \"iDay\" : \"" + day + "\"}";
        $.ajax({
            type: "POST",
            url: "EmailSchedulerPopup.aspx/CreateEmailSchedule",
            data: data,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: true,
            cache: false,
            success: function (msg) {
                $("#formTable").hide();
                $("#message").show();
                $("#btnClose").click(function () {
                    console.log("close button clicked");
                    $("#dialog").dialog("close");
                });
                $("#lnkCancel").click(function () {
                    console.log("close link clicked");
                    $("#dialog").dialog("close");
                });
                console.log("The call to the server side succeeded.");
            },
            error: function (x, e) {
                console.log("The call to the server side failed. " + x.responseText);
            }
        });
    });
});
</script>

<a id="popupScheduler" href="#" >clicky</a>

<div id="dialog">
<div id="wrap">
    <div id="content">
        <input id="txtDayInterval" type="hidden" runat="server" value="0" />
        <table id="formTable" runat="server">
            <tr>
                <td><label>Email Report:</label></td>
                <td><asp:Label ID="lblReportName" runat="server" CssClass="input">Gain on Sale</asp:Label></td>
            </tr>
            <tr>
                <td><label>From</label></td>
                <td><asp:TextBox ID="txtFrom" runat="server" CssClass="input"></asp:TextBox></td>
            </tr>
            <tr>
                <td><label>To</label></td>
                <td><asp:TextBox ID="txtTo" runat="server" CssClass="input"></asp:TextBox></td>
            </tr>
            <tr>
                <td><label>Subject</label></td>
                <td><asp:TextBox ID="txtSubject" runat="server" CssClass="input"></asp:TextBox></td>
            </tr>
            <tr>
                <td><label>Frequency</label></td>
                <td>
                    <asp:DropDownList ID="ddlFrequency" runat="server" >
                        <%--<asp:ListItem Value="once">Once</asp:ListItem>--%>
                        <asp:ListItem Value="daily">Daily</asp:ListItem>
                        <asp:ListItem Value="weekly">Weekly</asp:ListItem>
                        <asp:ListItem Value="monthly">Monthly</asp:ListItem>
                        <asp:ListItem Value="quarterly">Quarterly</asp:ListItem>
                    </asp:DropDownList>
                </td>
            </tr>
            <tr id="dayOfWeek" class="hidden">
                <td><label>Day of Week</label></td>
                <td>
                    <ul id="dayList">
                        <li class="0">Sun</li>
                        <li class="1">Mon</li>
                        <li class="2">Tues</li>
                        <li class="3">Wed</li>
                        <li class="4">Thurs</li>
                        <li class="5">Fri</li>
                        <li class="6">Sat</li>
                    </ul>
                </td>
            </tr>
            <tr id="dayOfMonth" class="hidden">
                <td><label>Day of Month</label></td>
                <td>
                    <asp:DropDownList ID="ddlDayOfMonth" runat="server" >
                        <asp:ListItem Value="0">1st</asp:ListItem>
                        <asp:ListItem Value="1">2nd</asp:ListItem>
                        <asp:ListItem Value="2">3rd</asp:ListItem>
                        <asp:ListItem Value="3">4th</asp:ListItem>
                        <asp:ListItem Value="4">5th</asp:ListItem>
                        <asp:ListItem Value="5">6th</asp:ListItem>
                        <asp:ListItem Value="6">7th</asp:ListItem>
                        <asp:ListItem Value="7">8th</asp:ListItem>
                        <asp:ListItem Value="8">9th</asp:ListItem>
                        <asp:ListItem Value="9">10th</asp:ListItem>
                        <asp:ListItem Value="10">11th</asp:ListItem>
                        <asp:ListItem Value="11">12th</asp:ListItem>
                        <asp:ListItem Value="12">13th</asp:ListItem>
                        <asp:ListItem Value="13">14th</asp:ListItem>
                        <asp:ListItem Value="14">15th</asp:ListItem>
                        <asp:ListItem Value="15">16th</asp:ListItem>
                        <asp:ListItem Value="16">17th</asp:ListItem>
                        <asp:ListItem Value="17">18th</asp:ListItem>
                        <asp:ListItem Value="18">19th</asp:ListItem>
                        <asp:ListItem Value="19">20th</asp:ListItem>
                        <asp:ListItem Value="20">21st</asp:ListItem>
                        <asp:ListItem Value="21">22nd</asp:ListItem>
                        <asp:ListItem Value="22">23rd</asp:ListItem>
                        <asp:ListItem Value="23">24th</asp:ListItem>
                        <asp:ListItem Value="24">25th</asp:ListItem>
                        <asp:ListItem Value="25">26th</asp:ListItem>
                        <asp:ListItem Value="26">27th</asp:ListItem>
                        <asp:ListItem Value="27">28th</asp:ListItem>
                        <asp:ListItem Value="31">Last Day</asp:ListItem>
                    </asp:DropDownList>
                </td>
            </tr>
            <tr>
                <td>
                    <asp:HyperLink ID="btnSubmit" runat="server"><img src="Images/buttonAddSchedule.JPG" /></asp:HyperLink>
                </td>
                <td>
                    <asp:HyperLink ID="lnkCancel" runat="server" Text="cancel" NavigateUrl="#"></asp:HyperLink>
                </td>
            </tr>
        </table>
        <div id="message" runat="server" class="hidden">
            <p>
                Your email has successfully been scheduled.
            </p>
            <p>
                <asp:HyperLink ID="btnClose" runat="server"><img src="Images/buttonClose.JPG" /></asp:HyperLink>
            </p>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:29:48.213

改变

```
$("#dialog").dialog("close"); 
```

到

```
$("#dialog").dialog("destroy"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:56:30.553

尝试以下操作而不是关闭。

```
$(this).dialog('destroy'); 
```

或者也许尝试在对话框内添加关闭按钮。

```
 $("#dialog").dialog({
    autoOpen: false,
    modal: true,
    width: 485,
    height: 280,
    resizable: false,
    draggable: false,
    title: "Email Scheduler",
    buttons: {
      "Close": function () {
          $(this).dialog('close');
      }
    },
    open: function (event, ui) {
        $(this).load("EmailSchedulerPopup.aspx")
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T14:32:55.047

尝试添加一个变量来保存对脚本顶部控件的引用：

```
var OpenDialog = $("#dialog"); 
```

然后在您使用的每个地方将`$("#dialog")`其替换为`OpenDialog`.

我在自引用对话框中遇到过这个问题。通过对元素进行全局引用，您可能会更幸运地访问它。

# matlab - 在matlab中重命名ui文件

> ID：13953704
> 
> 赞同：0
> 
> 时间：2012-12-19T13:42:21.057
> 
> 标签：matlab, user-interface

我正在使用 matlab 中的指南制作 gui。在这之间，我决定将文件命名为不同的名称并重命名它。我还将所有函数重命名为 .m 文件中的新文件名以及 .fig 文件中的所有对象。

但是，当我启动应用程序时，我仍然看到此错误

```
??? Undefined function or method 'uiSchwingungen' for input arguments of type 'char'.

Error in ==>     
@(hObject,eventdata)uiSchwingungen('edit1_CreateFcn',hObject,eventdata,guidata(hObject)) 
```

`uiSchwingungen`旧的不存在的文件名在哪里。

此代码部分隐藏在哪里（它不在 .m 文件中，并且 .fig 是二进制文件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:01:09.563

您需要`.fig`在 GUIDE 中打开，右键单击一个元素（如按钮），进入属性浏览器，查找`CallBack`属性，单击其字段进行编辑，您会发现文字说

```
@(hObject,eventdata)uiSchwingungen('edit1_CreateFcn',hObject,eventdata,guidata(hObject)) 
```

您将需要替换`uiSchwingungen`为该元素的名称（将在 Property Inspector 的 Tag 字段中）。

浏览所有按钮、文本框等，因为这个错误可能不止一次发生。

# php - array_shift 从数组中的数组

> ID：13953706
> 
> 赞同：4
> 
> 时间：2012-12-19T13:42:22.127
> 
> 标签：php, arrays

我试图删除最后一个数组的第一个元素

**数组：**

```
$harbours = array(
              '67' => array('boat1', 'boat2'),
              '43' => array('boat3', 'boat4')
            ); 
```

我想删除并返回`boat3`

```
$last = end($harbours);
$boat = array_shift($last); 
```

如果我那时`print_r ($harbours)`，'boat3' 仍然存在。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T13:45:20.970

那是因为`array_shift`您正在更改 end 数组的**副本**。

您需要获取 end 数组的引用才能移动它。

试试这个：

```
end($array);

$currKey = key($array); //get the last key

array_shift($array[$currKey]); 
```

见演示：[http ://codepad.org/ey3IVfIL](http://codepad.org/ey3IVfIL)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T13:49:15.453

```
$last = end($harbours);<br />

//First reverse the array and then pop the last element, which will be the first of original array.<br />
array_pop(array_reverse($last)); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-19T13:49:18.573

此代码应按预期工作：

```
$harbours = array('67' => array('boat1', 'boat2'), '43' => array('boat3', 'boat4'));

end($harbours);

$key = key($harbours);

$x = $harbours[$key];

array_shift($x);

$harbours[$key] = $x;

print_r($harbours); 
```

# mingw - -Wundef 和 -Werror=undef 在 MinGw 4.4.1 中不能一起工作

> ID：13953707
> 
> 赞同：2
> 
> 时间：2012-12-19T13:42:26.030
> 
> 标签：mingw, compiler-warnings

根据 GCC 文档 -Wundef 在 #if 指令中使用未定义的标识符时发出警告，并且 -Werror= 将指定的警告显示为错误

但是它们在 MinGW 4.4.1 中并没有一起工作。虽然 -Wundef 有效并且 -Werror（将所有警告显示为错误）有效。

这是一个已知的问题？有什么可用的解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:56:28.210

看起来 MinGW 4.4.1 有问题 在 4.6.2 中像魅力一样工作

# forms - FORM范围总是空的？URL范围好吗？

> ID：13953710
> 
> 赞同：7
> 
> 时间：2012-12-19T13:42:34.610
> 
> 标签：forms, jetty, railo, tuckey-urlrewrite-filter, cfml

我在带有 Java 1.7 的 Mac OS X 10.8 上的带有 Jetty 8 的 Railo 4.0.2.002 Express 中运行旧版 CF Fusebox 5.5 应用程序。我也在使用码头 urlrewrite [http://tukey.org/urlrewrite/](http://tuckey.org/urlrewrite/)（如果相关的话）

为什么`FORM`提交表单时范围总是空白？但如果我使用`URL`范围，它工作正常。

该应用程序在所有其他版本的 CF 中运行良好，在这里也应该运行良好。

**更新1：**
另外，当我在`onRequestStart`里面做`Application.cfc`并且我转储`FORM`范围时，它在那里也是空的。

有人有这个问题吗？我认为它不一定是“保险丝盒”，所以我想知道这是否是 Railo 4 兼容性问题？

**更新 2：**
当表单发布到 /admin/index.cfm?event=Main.Login
时，表单范围工作正常。但是当它发布到 /admin/event/Main.Login 时，表单范围就消失了。

```
<?xml version="1.0" encoding="utf-8"?>

 <!DOCTYPE urlrewrite
     PUBLIC "-//tuckey.org//DTD UrlRewrite 3.0//EN"
     "http://tuckey.org/res/dtds/urlrewrite3.0.dtd">

<urlrewrite>
    <rule>
        <from>^/admin/event/(.*)</from>
          <to last="false">/admin/index.cfm?event=$1</to>
    </rule>
  <rule>
      <from>^/lms/event/(.*)</from>
      <to last="false">/lms/index.cfm?event=$1</to>
  </rule>
</urlrewrite> 
```

**更新 3：**
还应注意，查尔斯（代理）正在正确检测“POST”请求，其中包含正确发送到服务器的电子邮件/密码和其他表单元素。
Jetty 服务器根本看不到它们，或者没有正确地将它们转发到 Railo 引擎或其他什么？

**更新 4：**
这是他们告诉您放置在`web.xml`. 我实际上把它放在了 Railo Express 的`webdefault.xml`in`etc/`目录中，我猜它可能只是 Jetty 文件。

```
<filter>
    <filter-name>UrlRewriteFilter</filter-name>
    <filter-class>org.tuckey.web.filters.urlrewrite.UrlRewriteFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>UrlRewriteFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
</filter-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:48:07.150

I had a number of issues with Tuckey and ended up using Apache and modrewrite for features that Tuckey just didn't support. That being said Railo + Tomcat/Jetty is not ColdFusion with Jrun and the configuration was challenging to ensure that mod_rewrite had all the request information and even had the request at all. Even Adobe had to patch CF10 after release because they were missing original functionality from CF9-+JRUN connectors.

However, for your solution, you need to reach up and out. See the thread here.

[https://groups.google.com/forum/#!msg/railo/uw-U9hCFu5k/bEmr_I2Kl8sJ](https://groups.google.com/forum/#!msg/railo/uw-U9hCFu5k/bEmr_I2Kl8sJ)

Other people have the same problem, and have worked around it by placing this in onRequestStart:

```
<cfscript>
    if(gethTTPRequestData().method eq "POST") {
            if(NOT structKeyExists(form,"fieldnames")) {
                    var paramMap = getPageContext().getRequest().getParameterMap();
                    var paramMapKeys = structKeyList(paramMap);
                    form.fieldnames = paramMapKeys;
                    for(x =1; x lte listLen(paramMapKeys); x++) {
                            param = listGetAt(paramMapKeys,x);
                            form[param] = paramMap[param][1];
                    }
            }
    }
</cfscript> 
```

It's not clear if this is a bug in Jetty, Railo, or Tuckey.

# java - 调整形状几乎可以工作

> ID：13953713
> 
> 赞同：4
> 
> 时间：2012-12-19T13:42:43.020
> 
> 标签：java, swing

我正在尝试完成形状调整任务我几乎得到了我想要的结果，只有在鼠标变为调整大小光标后才拖动首先绘制另一个相同类型的形状并调整第二个绘制形状的大小。导致这样的图片：

![在此处输入图像描述](../Images/2bcb8c00229b833a6a83e0cc73017fb9.png)

这是我的相关代码：

```
 @Override
public void mouseMoved(MouseEvent e) {

    if (e.isControlDown()) {
        updateShapeUnderMouse(e.getX(), e.getY());
    } // deals with drawing shape if control button held

    //deals with identifying shape to resize
        int x = e.getX();
         int y = e.getY();

    for (int i = myShapes.size() - 1; i >= 0; i--) {
        Shape s = (Shape) myShapes.get(i);
            if (s.isedgePoint(x, y)) {
            ShapetoResize = s;
            setCursor(crnw);
            prevDragX = x;
            prevDragY = y;
            return;
        }
    }

@Override
public void mouseDragged(MouseEvent event) {

         if (event.isControlDown()) {
            if (shapeUnderMouse != null) {
            shapeUnderMouse.setXPos(event.getX());
            shapeUnderMouse.setYPos(event.getY());
            repaint();
        }
    } // deals with moving the shape

  //deals with identifying and resizing shape
    int x = event.getX();
    int y = event.getY();

     if (ShapetoResize != null) {
         if (ShapetoResize instanceof Square) {
            ShapetoResize.resizeSE(x - prevDragX, y - prevDragY);
        } else if (ShapetoResize instanceof Rectangle) { // SAME CODE FOR EACH SHAPE
   }

  repaint();
    }
} 
```

知道会发生什么吗？

```
public ArrayList<Shape> myShapes = new ArrayList();

@Override
public void paintComponent(Graphics g) {

    super.paintComponent(g);
    int length = myShapes.size();

    for (int i = 0; i < length; i++) {

        myShapes.get(i).paint(g);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:29:15.640

没有看到这部分代码，这只是一个猜测，但我认为您正在您的`ShapetoResize.resizeSE(int x, int y);`方法中创建一个新形状，从而创建两个形状。

我假设这是您自己的方法，因为在或 界面（两个内置形状）上没有`resizeSE`可用的方法。当然interface 上没有方法，因此您可能也在使用自定义接口（这会令人困惑，因为您没有为此 Shape 接口提供代码）。如果您发布这些方法的代码，我们可以确认。`Rectangle``Shape``paint``Shape`

这是一个以工作方式（和 SSCCE）将代码组合在一起的示例。我仅将其限制为 Rectangles（因为它们是唯一内置的`Shape`）并删除了许多与调整大小无关的内容。如果您仍然遇到问题，请尝试使用以下示例重现问题：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.ArrayList;

public class ShapeResizer extends Box{
    Dimension preferredSize = new Dimension(400,300);
    public ArrayList<Shape> myShapes = new ArrayList();
    //Shape that's targeted for editing
    Shape currentShape;

    public ShapeResizer(){
        super(BoxLayout.X_AXIS);

        //Shapes (because I don't want to make write code for the user to make shapes)
        myShapes.add(new Rectangle(100, 100, 20, 20));
        myShapes.add(new Rectangle(200, 200, 30, 30));

        addMouseMotionListener(new MouseMotionListener() {
            @Override
            public void mouseMoved(MouseEvent e) {

                //deals with identifying shape to resize
                int x = e.getX();
                int y = e.getY();

                boolean foundShape = false;
                for (int i = myShapes.size() - 1; i >= 0; i--) {
                    Shape s = (Shape) myShapes.get(i);
                    if (s.contains(e.getPoint())) {
                        //We found a shape to target
                        currentShape = s;
                        foundShape = true;
                    }
                }

                if(!foundShape){
                    //Reset the shape and cursor only if needed
                    if(currentShape != null){
                        currentShape = null;
                        setCursor(Cursor.getPredefinedCursor(Cursor.DEFAULT_CURSOR));
                    }
                } else {
                    setCursor(Cursor.getPredefinedCursor(Cursor.SE_RESIZE_CURSOR));
                }

            }

            @Override
            public void mouseDragged(MouseEvent event) {
                if (currentShape != null) {
                    resizeShape(currentShape, event.getPoint());
                }
                repaint();
            }
        });
    }

    public void resizeShape(Shape s, Point p){
        if(s instanceof Rectangle){
            Rectangle r = (Rectangle)s;
            r.setSize(p.x - r.x, p.y - r.y);
        }
    }

    public void drawShape(Graphics g, Shape s){
        if(s instanceof Rectangle){
            Rectangle r = (Rectangle)s;
            g.drawRect(r.x, r.y, r.width, r.height);
        }
    }

    @Override
    public void paintComponent(Graphics g) {

        super.paintComponent(g);
        int length = myShapes.size();

        for (int i = 0; i < length; i++) {
            drawShape(g, myShapes.get(i));
        }

    }

    public Dimension getPreferredSize(){
        return preferredSize;
    }   

    public static void main(String[] args) {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(new ShapeResizer());
        frame.validate();
        frame.pack();
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:30:08.037

添加形状背后的逻辑是什么？是否通过左键单击绘图画布添加形状？如果是这样，您的问题可能是单击时添加了一个形状，而这就是正在调整大小的形状。您可以通过在拖动对象后中断执行来调试它。您的列表将包含两个形状而不是一个。

# java - JDK1.7 ClassLoader 内存泄漏

> ID：13953714
> 
> 赞同：12
> 
> 时间：2012-12-19T13:42:44.307
> 
> 标签：java, memory-leaks, classloader

我有孩子优先的 UrlClassLoader 来动态加载 jar 文件。然后我进行反射以调用加载的 jar 文件中的方法。完成后，我更喜欢卸载类加载器。然后我尝试做一些压力测试代码以确保我的代码运行顺利。基本上，我尝试做的是在循环语句中加载和卸载 jar。这是我的代码：

```
 for (int i = 0; i < 1000; i++) {
        //Just to show the progress
        System.out.println("LOAD NUMBER : " + i);

        ChildFirstURLClassLoader classLoader = null;
        try {
            File file = new File("C:\\library.jar");
            String classToLoad = "com.test.MyClass";
            URL jarUrl = new URL("file:" + file.getAbsolutePath());

            classLoader = new ChildFirstURLClassLoader(new URL[] {jarUrl}, null);
            Class<?> loadedClass = classLoader.loadClass(classToLoad);
            Method method = loadedClass.getDeclaredMethod("execute",
                    new Class[] {});

            ClassLoader currCl= Thread.currentThread().getContextClassLoader();
            Thread.currentThread().setContextClassLoader(classLoader);
            method.invoke(null);
            Thread.currentThread().setContextClassLoader(currCl);

            method = null;
            loadedClass = null;
        } finally {
            if (classLoader != null) {
                classLoader.close();
                classLoader = null;
            }
        }
    } 
```

当我在 JDK1.6 下运行此代码时，无需`classLoader.close();`声明，该代码运行完美。但是当我转入JDK1.7时，有时会`java.lang.OutOfMemoryError: PermGen space`出错。不幸的是，它以不一致的方式发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T09:11:58.917

确认泄漏来源的最简单方法是使用分析器来监控内存使用情况。试试 JProfiler 或 VisualVM。它将使您能够查明泄漏的确切位置，并为您提供有关是否以及如何修复它的线索。

# visual-studio - Visual Studio - 找不到“导出模板”选项

> ID：13953715
> 
> 赞同：4
> 
> 时间：2012-12-19T13:42:46.973
> 
> 标签：visual-studio, visual-studio-2012, windows-phone-8

我想将 Phonegap 应用程序移植到 Windows Phone 8。我需要在 Visual Studio 2012 for Windows Phone 8 中打开一个 Microsoft Visual Studio 解决方案文件，然后选择文件 -> 导出模板。

但是，此菜单项不存在。我用谷歌搜索了一下，发现我可以使用工具-> 选项-> 键盘创建一个指向 File.ExportTemplate 的热键。但是列表中没有 File.ExportTemplate 条目。

我发现的第二个故障排除是在工具 -> 自定义 -> 命令选项卡 -> 类别“文件”中查找，但同样没有 File.ExportTemplate 条目。

**编辑：** 我应该提到我在虚拟机 VMWare Player 5.0.0 上运行 Windows 8。

**编辑 2：** 我给自己买了一个试用版 Visual Studio 2012，我也找不到该选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-04-27T11:21:51.443

导出模板可以在 VS 2017 的“项目”类别下找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T09:30:16.593

您可以从工具->自定义菜单中手动添加导出模板选项。

首先选择要添加菜单项的位置（即文件菜单）：

![自定义窗口](../Images/8ee8942f2b20966c9aa4efd053d784b0.png)

找到导出模板选项并添加它：

![添加命令窗口](../Images/85d009b0e08d4900bd416452a46e1967.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-05T11:58:18.293

请让我告诉你，现在 Visual Studio 2017“导出模板...”工作正常。您应该打开模板项目，然后单击“项目”>“导出模板...”并按照[Microsoft](https://docs.microsoft.com/en-us/visualstudio/ide/how-to-create-project-templates)的说明进行操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T18:57:21.710

根据[此支持页面](http://connect.microsoft.com/VisualStudio/feedback/details/529592/missing-export-template-in-file-menu)，您可能需要重置设置。

> 我已将设置重置为“Visual Basic 开发设置”，这确实解决了问题

如果这不起作用，那么您正在编辑的解决方案可能会隐藏此菜单选项。如果重置不起作用，请发布有关您尝试从中导出的项目的更多详细信息。

# iphone - 保留财产时的内存泄漏

> ID：13953716
> 
> 赞同：5
> 
> 时间：2012-12-19T13:42:46.980
> 
> 标签：iphone, ios, memory-management

我正在尝试在我的应用程序中的每个按钮单击时播放单击声音为此我创建了一个实用程序类，其 .h 和 .m 如下

.h 文件

```
@interface SoundPlayUtil : NSObject<AVAudioPlayerDelegate,AVAudioSessionDelegate>
{
    AVAudioPlayer *audioplayer;   
}
@property (retain, nonatomic) AVAudioPlayer *audioplayer;
-(id)initWithDefaultClickSoundName;
-(void)playIfSoundisEnabled;
@end 
```

.m 文件

```
@implementation SoundPlayUtil
@synthesize audioplayer;

-(id)initWithDefaultClickSoundName
{
self = [super init];
    if (self)
{
    NSString* BS_path_blue=[[NSBundle mainBundle]pathForResource:@"click"   ofType:@"mp3"];
    self.audioplayer =[[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:BS_path_blue]  error:NULL];
   [self.audioplayer prepareToPlay];
}
return self;
}

-(void)playIfSoundisEnabled
{
if ([[NSUserDefaults standardUserDefaults] boolForKey:soundStatus]==YES)
{
    [self.audioplayer play];
}
}

-(void)dealloc
{
[audioplayer release];
[super dealloc];
}
@end 
```

并在按钮上单击我正在做的任何课程

```
 SoundPlayUtil *obj = [[SoundPlayUtil alloc] initWithDefaultClickSoundName];
 [obj playIfSoundisEnabled];
 [obj release]; 
```

它工作正常，我成功播放声音。当我分析代码时出现问题。编译器显示实用程序类的 .m 中的**initWithDefaultClickSoundName**方法存在内存泄漏，因为我将 alloc 方法发送到**self.audioplayer**并且不释放它。

释放此对象的最佳位置是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:48:16.170

问题是当您分配对象时，它的 retainCount 将为 1，您将该对象分配给一个保留属性对象。然后它将再次保留对象，因此retainCount 将为2。

保留属性的设置器代码类似于：

```
- (void)setAudioplayer: (id)newValue
{
    if (audioplayer != newValue)
    {
        [audioplayer release];
        audioplayer = newValue;
        [audioplayer retain];
    }
} 
```

更改：

```
self.audioplayer =[[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:BS_path_blue]  error:NULL]; 
```

喜欢;

```
self.audioplayer =[[[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:BS_path_blue]  error:NULL] autorelease]; 
```

或喜欢：

```
 AVAudioPlayer *player = [[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:BS_path_blue]  error:NULL];
 self.audioplayer = player;
 [player release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:49:06.383

```
self.audioplayer =[[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:BS_path_blue]  error:NULL]; 
```

在这里，您创建一个新对象，然后将其分配给保留属性。但是，除了属性之外，您没有再次引用该对象，因此它会泄漏。您已将保留计数增加了两次。

要修复，按优先顺序：

1.  转换为 ARC ;)
2.  创建一个局部变量，将其分配给属性，然后释放它。

    ```
    Object *object = [[Object alloc] init];
    self.property = object;
    [object release]; 
    ```

3.  在添加对象时向对象添加自动释放调用：`self.property = [[[Object alloc] init] autorelease];`

# mysql - 如何在 MySQL 工作台中执行 SQL 查询

> ID：13953719
> 
> 赞同：3
> 
> 时间：2012-12-19T13:42:49.100
> 
> 标签：mysql, mysql-workbench

我正在使用 Django 框架开发一个应用程序。您可能知道工作流程是您首先在 Python 类中描述您的对象，然后同步数据库。

我制作了一个 MySQL Workbench EER 图。此后我继续开发应用程序，因此 EER 图中的数据库模型和 MySQL Workbench 模型都没有更新。

我尝试使用 MySQL Workbench 的内置功能“与任何源同步”来同步它，但该功能由于某种原因无法正常工作并导致分段错误。将显示要在 MySQL Workbench 模型中执行的查询，但在最后一步我得到一个空的 SQL 更改脚本。我尝试手动复制该脚本中的查询并单击“执行”按钮，但我没有运气。我认为 MySQL 在内部存储查询。反正。[我在这里](http://bugs.mysql.com/bug.php?id=66707)向 MySQL Workbench 开发人员提交了错误，现在它已修复，但尚未发布。我现在在等待下一个版本时寻找解决方法。

*虽然我有一个具体的问题，但这个问题仍然是笼统的。*

**是否可以在 MySQL Workbench 模型上执行查询以更改它？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:51:18.677

您是否尝试过“ **[Forward Engineer](http://dev.mysql.com/doc/workbench/en/wb-forward-engineering.html)** ”选项？它允许您将对表关系所做的所有更改直接反映到数据库，这是一个非常有用的功能。

虽然有一些问题，例如每次执行正向工程时都无法维护现有数据，但这可以通过输入一些示例数据来弥补，这些示例数据将在您下次执行“正向工程”时随 ER 图一起提供。

# opengl - Opengl地形高度/顶点

> ID：13953721
> 
> 赞同：-1
> 
> 时间：2012-12-19T13:42:52.770
> 
> 标签：opengl, collision-detection

我有一个由位于 xz 平面上的三角形组成的地形。给定 ax 和 z 坐标或点，我将如何获得该点的 y 坐标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:54:41.520

通过对三角形的点进行重心插值。

# node.js - 关于node.js开发环境和部署策略的一些问题

> ID：13953722
> 
> 赞同：1
> 
> 时间：2012-12-19T13:42:55.267
> 
> 标签：node.js, deployment, editor

我是 node 新手，正在阅读一些关于它的书籍。现在我认为是时候用它做一些开发工作了。我正计划实施一个我想在云中部署的小项目（AWS、Heroku、...）。

我还没有弄清楚以下几点（我有一台装有 OS X 10.7 的 MacBook Pro）：

*   我应该使用哪个开发环境？我想到了 Aptana Studio（据我所知没有节点支持）并通过 ssh 将文件传输到本地 VirtualBox CentOS 6.3 机器，该机器上安装了 node.js 和一些模块
*   在云中托管我的应用程序有什么好的部署策略吗？例如，如果我正在使用 Aptana Studio 进行开发，我认为没有插件可以让您将代码部署在 AWS 或 Heroku 云中的某个虚拟服务器上，不是吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:16:58.673

我不使用 IDE 本身。我的编辑器只使用了 Sublime Text。

部署过程将取决于您托管站点的位置。我不确定 Heroku，但是使用 Nodejitsu 就像从终端运行“jitsu deploy”一样简单，就是这样。

如果您在 Linux 机器上自己托管站点（即没有 Heroku 或 Nodejitsu），您需要考虑如何确保在机器重新启动或崩溃后站点重新启动。我在我的博客上写过这个。这是可行的，但有点麻烦：http: [//hectorcorrea.com/blog/running-a-node-js-web-site-in-production-a-beginners-guide](http://hectorcorrea.com/blog/running-a-node-js-web-site-in-production-a-beginners-guide)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T15:18:14.703

*   您可以而且应该在您的 Mac 上本地开发和运行您的应用程序。处理 2 台机器、2 个操作系统和持续的文件传输是开发过程中的一件麻烦事，而且没有任何好处。它还削弱了诸如用于观看文件的 fsevents 和良好的文本编辑器集成之类的好东西。
*   如果您喜欢整个 IDE，也许可以考虑[https://c9.io/](https://c9.io/)
*   您可以考虑几家云平台即服务公司
    *   [http://nodejitsu.com/](http://nodejitsu.com/)
    *   [https://devcenter.heroku.com/articles/nodejs](https://devcenter.heroku.com/articles/nodejs)
    *   [https://www.dotcloud.com/](https://www.dotcloud.com/)
    *   [http://www.cloudfoundry.com/](http://www.cloudfoundry.com/)
    *   [http://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/](http://www.windowsazure.com/en-us/develop/nodejs/tutorials/getting-started/)
*   这里有一些博客文章回顾了其中一些 PaaS 产品
    *   [http://mrdanadams.com/2012/node-js-paas-hosting-services/](http://mrdanadams.com/2012/node-js-paas-hosting-services/)
    *   [http://ocdevel.com/blog/nodejs-paas-comparison](http://ocdevel.com/blog/nodejs-paas-comparison)
*   在部署方面，这些 PaaS 公司大多会与 npm 和 github 集成，因此部署最多只需要几个命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T00:33:43.303

谢谢你的帮助！

在对您发布的主题进行了大量研究之后，我只想让您知道我开发节点应用程序的设置现在是什么样的：

*   Sublime Text 2 Text-Editor with Package Manager 和以下插件：git、nodejs、SublimeLinter（顺便说一句：还有其他一些你不能没有的“基本”插件吗？）
*   用于所有控制台工作的 iTerm 2 终端（执行节点检查器、ssh 到服务器等）
*   我想用于我的应用程序的 node.js、npm 和其他模块

在我的 MacBook Pro 上本地运行所有内容。就我可以测试这个解决方案而言，它似乎运行得非常顺利，但最值得注意的是：FAST :-)

关于节点部署，我将 Heroku 和 nodejitsu 考虑在内，因为成本低、管理工作少以及自动缩放等功能。Heroku 的唯一缺点是缺少 websocket 支持，我打算在我的应用程序中本地使用它。

最好的祝福！

# c# - 构建期间未知的命名空间（但智能感知知道）

> ID：13953723
> 
> 赞同：2
> 
> 时间：2012-12-19T13:42:55.823
> 
> 标签：c#, asp.net-mvc-3, visual-studio, intellisense, signalr

我目前正在使用 SignalR 进行一个项目。在我的生产服务器上，它缺少一个自动生成的 .js 文件`~/signalr/hubs`。我想试试这个解决方案： [SignalR not working on production server](https://stackoverflow.com/questions/12444664/signalr-not-working-on-production-server)

但是当我尝试将此行添加到我的`application_start`方法中时`global.asax`，我的项目将不再构建。虽然智能感知知道并建议扩展方法！

我用`using SignalR;`. 我尝试将其作为扩展方法调用，并将其作为静态方法调用，并将对象实例作为第一个参数。确切的错误消息：

作为扩展方法调用时：

```
Error   1   'System.Web.Routing.RouteCollection' does not contain a definition for 'MapHubs' and no extension method 'MapHubs' accepting a first argument of type 'System.Web.Routing.RouteCollection' could be found (are you missing a using directive or an assembly reference?) 
```

作为静态方法调用时：

```
Error   1   The type or namespace name 'RouteExtensions' does not exist in the namespace 'SignalR' (are you missing an assembly reference?) 
```

有谁知道为什么会发生这种情况以及如何解决这个问题？提前谢谢了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T14:11:46.817

我很确定这可能是以下原因之一：

*   您的项目需要对未添加到项目中的程序集的引用。
*   您的项目是否使用与引用程序集兼容的 .NET Framework 版本？

根据您提供的信息，很难确定确切的原因，但我相信我为您提供了一些有用的提示。

智能感知向您建议任何类似扩展方法的事实并不意味着该项目具有正常工作所需的引用。

# c# - 如何从确切的子目录中获取文件

> ID：13953724
> 
> 赞同：4
> 
> 时间：2012-12-19T13:42:58.060
> 
> 标签：c#, getfiles

我已经设法从“根”文件夹子目录中获取文件，但我也从这些子目录目录中获取文件，这是我不想要的。

例子：`RootDirectory>Subdirectories (wanted files)>directories2 (unwanted files)`

我用过这段代码：

```
public void ReadDirectoryContent() 
{
  var s1 = Directory.GetFiles(RootDirectory, "*", SearchOption.AllDirectories);
  {
  for (int i = 0; i <= s1.Length - 1; i++)
  FileInfo f = new FileInfo(s1[i]); 
  . . . etc
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T13:45:24.193

试试这个 ：

```
var filesInDirectSubDirs = Directory.GetDirectories(RootDirectory)
    .SelectMany(d=>Directory.GetFiles(d));

foreach(var file in filesInDirectSubDirs)
{
    // Do something with the file
    var fi = new FileInfo(file);
    ProcessFile(fi);
} 
```

这个想法是首先选择第一级子目录，然后使用[Enumerable.SelectMany](http://msdn.microsoft.com/en-us/library/bb534336.aspx)方法“聚合”所有文件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T13:45:09.007

您必须更改`SearchOption.AllDirectories`为`SearchOption.TopDirectoryOnly`，因为第一个意味着它从当前目录和所有子目录中获取文件。

**编辑：**

> op 想要在直接子子目录中搜索，而不是根目录。

```
public void ReadDirectoryContent() 
{
    var subdirectories = Directory.GetDirectories(RootDirectory);
    List<string> files = new List<string>();

    for(int i = 0; i < subdirectories.Length; i++)
       files.Concat(Directory.GetFiles(subdirectories[i], "*", SearchOption.TopDirectoryOnly));
} 
```

# ios - 在 iOS 5 下 accountTypeWithAccountTypeIdentifier 为 Twitter 返回 nil

> ID：13953726
> 
> 赞同：1
> 
> 时间：2012-12-19T13:43:06.037
> 
> 标签：ios, null, ios5

我在使用一种用于 Twitter 访问的方法时遇到问题。更具体地说，使用以下方法：

```
- (ACAccountType *)accountTypeWithAccountTypeIdentifier:(NSString *)typeIdentifier 
```

此方法在 iOS 6 下正常工作，但`nil`在 iOS 5 下返回。文档中没有说明何时会出现这种行为，也没有任何迹象表明此方法在 iOS 5 下不受支持。

我的代码片段：

```
- (void)preferredAccountWithSelectionHandler:(SSTwitterHelperAccountSelectionHandler)selectionHandler
{   
    ACAccountType* accountType = [self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    [self.accountStore requestAccessToAccountsWithType:accountType options:nil completion:^(BOOL granted, NSError *error)
    {
         // Some more code
     }];
} 
```

直觉上，我认为即使没有配置帐户，此方法也不应该返回 nil，因为它只返回帐户类型，该类型在所有相同类型的帐户之间共享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:08:06.553

我要回答我自己的问题。我只是添加了一个 IF 条件以防它返回 nil，这似乎是一个有效的结果。

```
- (void)preferredAccountWithSelectionHandler:(SSTwitterHelperAccountSelectionHandler)selectionHandler
{   
    ACAccountType* accountType = [self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    if (accountType)
    {
        [self.accountStore requestAccessToAccountsWithType:accountType options:nil completion:^(BOOL granted, NSError *error)
        {
             // Some more code
         }];
    }
    else
    {
        // No accounts for the type specified
    }
} 
```

# unity3d - 在平面上保持动画在关卡之间进行动画处理

> ID：13953727
> 
> 赞同：1
> 
> 时间：2012-12-19T13:43:06.290
> 
> 标签：unity3d

我有一架上面有材料的飞机；材质移动它的偏移量，使其看起来像动画一样。

我想在场景之间创建一个“加载器”，并在加载下一个级别时使用

> Application.LoadLevelAsync

我希望我飞机上的加载动画在我的屏幕上持续存在。

我试着不破坏我使用动画的飞机

> DontDestroyOnLoad(GameObject.Find("planeWithAnimation"))

但飞机仍然在下一级负载上消失。我该怎么做才能使我的游戏对象`planeWithAnimation`不会被破坏并且仍然能够迭代抛出附加到它的脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:18:52.490

我相信您需要从附加到您想要在负载之间保留的 GameObject（您的飞机）的脚本中调用 DontDestroyOnLoad，例如：

```
DontDestroyOnLoad(this.gameObject); 
```

至少这是我们使用它的方式，并且效果很好。我们有一个贯穿所有关卡的应用程序上下文。这在 Start 或 Awake 上调用。

hth

# css - WordPress菜单的响应式设计

> ID：13953730
> 
> 赞同：1
> 
> 时间：2012-12-19T13:43:12.597
> 
> 标签：css, responsive-design

我正在开发一个 WordPress 二十一主题的子主题。现场演示可以在[这里](http://modulesoft.info/projects/valuepayroll/)看到。由于 WordPress 已经有了响应式支持，我也在做我的主题以响应我正在定制我的主题 CSS。对于某些部分，我已经完成了。在我的菜单部分，我面临一些问题。我有两种类型的菜单。一个没有下拉菜单，另一个有下拉菜单。现在我在响应式下拉菜单中面临问题。那么有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:30:04.290

这似乎更像是一个设计问题，而不是技术问题。我建议 1）将下拉菜单变成手风琴菜单（例如，[小手风琴](http://sandbox.scriptiny.com/javascript-accordion/index.html)），或 2）扩展下拉菜单区域并增加其 z-index，以便您只能将鼠标悬停在下拉菜单上而不激活任何内容出现在它下面。对于您的设计，这可能意味着增加 z-index 并`margin-top: -2px;`在下拉菜单的子项上使用类似的东西。

然而，响应式设计的理念是让它可用于小型设备，如智能手机。由于使用触摸的智能手机没有悬停状态，因此您可能最好使用上面的建议 1，即用户单击初始菜单，然后显示其子菜单。

# c# - 测试驱动设计和分层架构

> ID：13953733
> 
> 赞同：6
> 
> 时间：2012-12-19T13:43:46.403
> 
> 标签：c#, wpf, wcf, architecture, tdd

如何在具有分层架构的企业应用程序上应用 TDD？

我想知道如何将 TDD 应用于具有以下内容的应用程序

1.  WPF 应用程序（6-7 个屏幕）
2.  3-4 模块（棱镜模块）
3.  一些应用服务（日志、异常处理、安全、授权、核心业务服务库）
4.  数据访问层（使用实体框架）
5.  一堆 WCF 服务

据我了解，首先是使架构正确。结果，组件被识别。接下来是独立开发组件，*我卡在那里*。

使用 TDD，（组件的）设计会随着时间而发展。对于组件，以下是（我认为）使用 TDD 的方式

1.  识别所有用例
2.  识别所有测试用例
3.  对于每个测试用例，编写所有场景，并为每个场景编写一个失败的测试用例。编写少量代码，以便通过测试用例。添加到列表，如果发现新场景
4.  遵循 Red-Green-Refactor 直到所有测试用例（对应所有场景）都通过
5.  在重构中，不要忘记 DRY、YAGNI、Mocking、DI 等。
6.  最终结果是设计良好的组件（设计得有多好取决于开发人员的经验和技能）。

我面临的问题是，对于一个组件，在我到达 TDD 过程的第 6 步之前，我不知道接口。由于有多个组件，多个团队，没有人确定他们会想出什么。

现在根据上述情况总结问题

1.  我缺少一些基础知识吗？如果是，请向我指出适当的资源。
2.  如何在分层架构上应用 TDD？
3.  如何做多个组件的并行开发
4.  使用 WPF UI (PRISM) 的 TDD 最佳实践
5.  带数据库的 TDD 最佳实践（使用实体框架）
6.  使用 TDD 时如何确定 WCF 服务合同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:37:44.133

我觉得你的顺序错了。您正在选择架构，然后尝试使用 TDD 实现目标。TDD 背后的理念是从无开始，并在需要时达到分层架构。

当然，当您查看一个非常大的项目时，这可能无济于事，因为这一切都必须有一些组织。我通常的方法是尝试将工作划分为对真实的人（而不是程序员）有意义的东西。不，我说的不是完整的领域驱动设计。我指的是只是像局外人一样思考不同的部分。

例如，如果我想制作一个代表收银机的程序（可以容纳钱和数字总数的东西）。

我想让它做的第一件事是什么？持有并分发钱。所以，我需要一个抽屉（第一个组件，给一个团队）。我需要一个按钮来打开它（第二个组件，第二个团队）等等......关键是关注它应*该做什么*，而不是它应该如何做*。*

是的，有很多合同/协议谈判必须进行。这些是相关团队在遇到问题时必须解决的问题。关键是专注于你想要它做的事情。解决现在的问题。不要预先优化。您可能会发现并非所有组件都需要所有层。

最佳实践问题的简短回答是“视情况而定”。（俗气、常见和过度使用的 IT 答案。）一般规则是您要关注行为，而不是实施。确保您可以信任测试（它们始终产生正确的结果）。确保尽可能多地进行测试......或者，编号......

1.  从测试开始，而不是设计。Roy Osherove 和其他人有大量关于这个主题的著作。他的书，连同迈克尔羽毛是最好的起点。
2.  如果您从测试开始，并且随着您完成更多测试而不断发展，那么您最终会在分层架构上使用 TDD。
3.  以有意义的方式划分它们。我的规则是坚持在现实世界中有意义的事情。发动机队得到发动机，轮胎队得到轮胎。确保人们交流。
4.  我不使用棱镜。
5.  我不使用 EF，但可以说数据库测试是一整罐蠕虫。集成测试涉及很多环境配置等。Ayende 有很多关于此的博客文章。
6.  危险威尔罗宾逊。是什么让您如此确定需要 WCF 服务合同？

对不起，如果这真的很模糊。谷歌我删除的名字，它们是开始的好地方。如果您想在 TDD 上有所帮助，请聘请一些经验丰富的编码人员并使用结*对编程。*如果您负担不起，请雇人来做一些培训，然后进行*结对编程。*不能这样做吗？获取一些书籍并使用*结对编程。*

然后，击败他们以确保他们首先编写测试。

归根结底，它是关于决定你想要做什么，然后让测试发展架构。不是反过来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:22:13.267

我认为到目前为止，您的所有计划都朝着正确的方向前进。我建议您在前期设计上花费足够的时间，以便您确实定义了每个层之间的接口。没有它就开始进行任何开发（更不用说 TDD）是不切实际的。一旦所有团队都同意接口，您就可以通过使用模拟对象来实现接口轻松过渡到 TDD。有许多完善的模拟框架可用，例如 Rhino Mocks。预先创建接口的想法说起来容易做起来难，毫无疑问，您最终将不得不在此过程中进行更改。但是你需要有一个起点。这是一种挑战，正是组件模型图变得有用的地方。通过让团队一起合作来创造这个前期，

另外，我会特别考虑您的数据库层。这是一个值得商榷的话题，值得单独讨论。使用 EF，您会发现不能简单地“模拟”整个图层。为此，您必须在 EF 的 TOP 上创建一个完全独立的抽象。这样做可能会给您的应用程序增加不必要的复杂性。您应该非常仔细地考虑是否需要这样做 - 如果您可以使用测试数据填充测试数据库，那么没有理由不让您的自动化测试直接调用数据库。

# c# - 计算 WriteableBitmap.WritePixels 方法所需的缓冲区大小

> ID：13953735
> 
> 赞同：18
> 
> 时间：2012-12-19T13:43:49.323
> 
> 标签：c#, wpf, buffer, writeablebitmap

如何计算 WriteableBitmap.WritePixels 方法所需的缓冲区大小？

我正在使用采用四个参数的重载，第一个是 Int32Rect，下一个是包含颜色的 RGBA 数字的字节数组，第三个是步幅（这是我的可写位图的宽度乘以每像素位数除以8），最后一个是缓冲区（在 Intellisense 中称为偏移量）。

我在下面的代码中收到**Buffer size is not enough运行时错误：**

```
byte[] colourData = { 0, 0, 0, 0 };

var xCoordinate = 1;
var yCoordinate = 1;

var width = 2;
var height = 2;

var rect = new Int32Rect(xCoordinate, yCoordinate, width, height);

var writeableBitmap = new WriteableBitmap(MyImage.Source as BitmapSource);

var stride = width*writeableBitmap.Format.BitsPerPixel/8;

writeableBitmap.WritePixels(rect, colourData, stride,0); 
```

我需要使用什么公式来计算上述代码中所需的缓冲区值？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-19T13:55:28.273

步幅值计算为写入矩形中每“像素行”的字节数：

```
var stride = (rect.Width * bitmap.Format.BitsPerPixel + 7) / 8; 
```

所需的缓冲区大小是每行的字节数乘以行数：

```
var bufferSize = rect.Height * stride; 
```

假设您有一个 2x2 写入矩形和一个每像素 32 位的格式，例如`PixelFormats.Pbgra32`，您得到`stride`8 和 bufferSize 为 16。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T10:11:53.083

步幅只是输入缓冲区的字节宽度。之所以称为stride，是因为有时每行图像后面都有额外的内存，这使得无法使用图像的宽度来读取图像的每一行。

因此，在您的示例中，这是 2。您不需要使用位图的每像素位数计算任何内容，WritePixels 方法知道所有这些信息。您需要提供有关输入数据结构的信息。

但是，如另一个答案中所述，如果位图也是 2x2，则您的示例将不起作用。那么起始坐标将是 0,0。

**编辑：**

当我仔细查看您的示例时，我发现了错误。你说 colourData 是输入*颜色*。但这是*每个像素的输入*。因此，如果要更改 2x2 的矩形，则需要以下输入数据：

```
byte[] colourData = { 0, 0, 0, 0, 0, 0, 0, 0,
                      0, 0, 0, 0, 0, 0, 0, 0 }; 
```

然后每个像素的字节数等于位图的字节数，即 4，乘以每行的宽度 (2)，总计 8。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-20T13:44:03.563

这是执行检查的 Microsoft 反映的代码`CopyPixels`

```
 int num = ((sourceRect.Width * this.Format.BitsPerPixel) + 7) / 8;
        if (stride < num)
        {
            throw new ArgumentOutOfRangeException("stride", MS.Internal.PresentationCore.SR.Get("ParameterCannotBeLessThan", new object[] { num }));
        }
        int num2 = (stride * (sourceRect.Height - 1)) + num;
        if (bufferSize < num2)
        {
            throw new ArgumentOutOfRangeException("buffer", MS.Internal.PresentationCore.SR.Get("ParameterCannotBeLessThan", new object[] { num2 }));
        } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-22T19:09:32.343

尽管用户 Clemens 回答了有关缓冲区大小的问题，但提问者并不知道他计算的缓冲区大小已经正确，而问题出在其他地方。

虽然在评论中给出并讨论了细节，但缺少一个全面的片段（以及 .WritePixels 的完整使用示例（也没有 .CopyPixels））。在这里（我扫描了类似的问题，但这是最好的地方）：

```
var dpiX = 96;

var writeableBitmap = new WriteableBitmap(width, height, dpiX, dpiX, PixelFormats.Bgra32, null); // Pixelformat of Bgra32 results always in 4 bytes per pixel
int bytesPerPixel = (writeableBitmap.Format.BitsPerPixel + 7) / 8; // general formula
int stride = bytesPerPixel * width; // general formula valid for all PixelFormats

byte[] pixelByteArrayOfColors = new byte[stride * height]; // General calculation of buffer size

// The numbers in the array are indices to the used BitmapPalette, 
//     since we initialized it with null in the writeableBitmap init, they refer directly to RGBA, but only in this case.
// Choose a light green color for whole bitmap (for not easy to find commented MSDN example with random colors, see https://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap(VS.85).aspx
for (int pixel = 0; pixel < pixelByteArrayOfColors.Length; pixel += bytesPerPixel)
{
    pixelByteArrayOfColors[pixel] = 0;        // blue (depends normally on BitmapPalette)
    pixelByteArrayOfColors[pixel + 1] = 255;  // green (depends normally on BitmapPalette)
    pixelByteArrayOfColors[pixel + 2] = 0;    // red (depends normally on BitmapPalette)
    pixelByteArrayOfColors[pixel + 3] = 50;   // alpha (depends normally on BitmapPalette)
}

writeableBitmap.WritePixels(new Int32Rect(0, 0, width, height), pixelByteArrayOfColors, stride, 0); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-13T06:36:41.763

我正在处理这个。60z 飞速

```
 this.playerOpacityMaskImage.WritePixels(
                new Int32Rect(0, 0, this.depthWidth, this.depthHeight),
                this.greenScreenPixelData,
                this.depthWidth * ((this.playerOpacityMaskImage.Format.BitsPerPixel + 7) / 8),
                0); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-19T13:56:38.913

我不确定，但试试这个适用于 24 位 rgb

```
 {
     //your code
       var stride = width * 3;
       WriteableBitmap bmp = new WriteableBitmap(width, height, 96, 96, PixelFormats.Bgr24, null);
       bmp.WritePixels(new System.Windows.Int32Rect(0, 0, width , height),byte[],stride,0));

   } 
```

# ruby-on-rails - 在rails应用程序中销毁对象失败时销毁关联记录的测试

> ID：13953739
> 
> 赞同：14
> 
> 时间：2012-12-19T13:44:10.387
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

我坚持在 Michael Hartls ruby​​ on rails 教程 ( [http://ruby.railstutorial.org/chapters/user-microposts#code-micropost_dependency_test](http://ruby.railstutorial.org/chapters/user-microposts#code-micropost_dependency_test) ) 清单 10.15 中的测试。我的 user_spec.rb 如下

```
require 'spec_helper'

describe User do
  before { @user = User.new(name: "Example User", email: "user@example.com",password: "foobar", password_confirmation: "foobar") }

  subject { @user }

  it { should respond_to(:name) }
  it { should respond_to(:email) }
  it { should respond_to(:password_digest) }
  it { should respond_to(:password) }
  it { should respond_to(:password_confirmation) }
  it { should respond_to(:remember_token) }
  it { should respond_to(:admin) }
  it { should respond_to(:authenticate) }
  it { should respond_to(:microposts) }

  it { should be_valid }
  it { should_not be_admin }

  describe "with admin attribute set to 'true'" do
    before do
      @user.save!
      @user.toggle!(:admin)
    end

    it { should be_admin }
  end

  describe "when name is not present" do
    before { @user.name = " " }
    it { should_not be_valid }
  end

  describe "when email is not present" do
    before { @user.email = " " }
    it { should_not be_valid }
  end

  describe "when name is too long" do
    before { @user.name = "a" * 51 }
    it { should_not be_valid }
  end

  describe "when email format is invalid" do
    it "should be invalid" do
      addresses = %w[user@foo,com user_at_foo.org example.user@foo. foo@bar_baz.com foo@bar+baz.com]
      addresses.each do |invalid_address|
        @user.email = invalid_address
        @user.should_not be_valid
      end
    end
  end

  describe "when email format is valid" do
    it "should be valid" do
      addresses = %w[user@foo.COM A_US-ER@f.b.org first.lst@foo.jp a+b@baz.cn]
      addresses.each do |valid_address|
        @user.email = valid_address
        @user.should be_valid
      end
    end
  end

  describe "when email address is already taken" do
    before do
      user_with_same_email = @user.dup
      user_with_same_email.email = @user.email.upcase
      user_with_same_email.save
    end

    it { should_not be_valid }
  end

  describe "when password is not present" do
    before { @user.password = @user.password_confirmation = " "}
    it { should_not be_valid }
  end

  describe "when password doesn't match confirmation" do
    before { @user.password_confirmation = "mismatch" }
    it { should_not be_valid }
  end

  describe "when password confirmation is nil" do
    before { @user.password_confirmation = nil }
    it { should_not be_valid }
  end

  describe "return value of authenticate method" do
    before { @user.save }
    let(:found_user) { User.find_by_email(@user.email) }

    describe "with valid password" do
      it { should == found_user.authenticate(@user.password) }
    end

    describe "with invalid password" do
      let(:user_for_invalid_password) { found_user.authenticate("invalid") }
      it { should_not == user_for_invalid_password }
      specify { user_for_invalid_password.should be_false }
    end
  end

  describe "with a password that's too short" do
    before { @user.password = @user.password_confirmation = "a" * 5 }
    it { should be_invalid }
  end

  describe "remember token" do
    before { @user.save }
    its(:remember_token) { should_not be_blank }
  end

  describe "micropost associations" do
    before { @user.save }
    let!(:older_micropost) do
      FactoryGirl.create(:micropost, user:@user, created_at: 1.day.ago)
    end
    let!(:newer_micropost) do
      FactoryGirl.create(:micropost, user:@user, created_at: 1.hour.ago)
    end

    it "should have the right microposts in the right order" do
      @user.microposts.should == [newer_micropost, older_micropost]
    end

    it "should destroy the associated microposts" do
      microposts = @user.microposts.dup
      @user.destroy
      microposts.should_not be_empty
      microposts.each do |micropost|
        Micropost.find_by_id(micropost.id).should be_nil
      end
    end
  end

end 
```

当我运行测试时，出现以下错误：

```
 1) User micropost associations should destroy the associated microposts
     Failure/Error: Micropost.find_by_id(micropost.id).should be_nil
       expected: nil
            got: #<Micropost id: 2, content: "Lorem ipsum", user_id: nil, created_at: "2012-12-19 09:49:24", updated_at: "2012-12-19 10:49:24">
     # ./spec/models/user_spec.rb:133:in `block (4 levels) in <top (required)>'
     # ./spec/models/user_spec.rb:132:in `each'
     # ./spec/models/user_spec.rb:132:in `block (3 levels) in <top (required)>' 
```

在我的 user.rb 中，我添加了依赖项 :destroy 如下，这是测试通过所必需的。

```
has_many :microposts, dependent: :destroy 
```

为什么测试仍然失败？

谢谢你

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2016-06-09T23:17:48.727

我鼓励你*不要*做类似的事情：

```
expect { @user.destroy }.to change(User, :count).by(-1) 
```

这仅测试任何用户被删除，它不确认删除了正确的记录。相反，我会做这样的事情

```
@user.destroy
expect { @user.reload }.to raise_error ActiveRecord::RecordNotFound 
```

这可确保删除了正确的用户。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-19T14:15:12.757

考虑使用更简短的`expect .. to change`测试进行测试：

```
it "destroys the associated microposts" do
  expect { @user.destroy }.to change(Micropost, :count).by(-2)
end 
```

将 替换为`-2`您期望的任何更改值。例如，如果它删除 1 条`Micropost`记录，则将其更改为`-1`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T14:17:36.497

由于某种原因，微博没有链接到用户，您可以通过以下方式查看`user_id: nil`：

```
Micropost id: 2, content: "Lorem ipsum", user_id: nil, created_at: "2012-12-19 09:49:24", updated_at: "2012-12-19 10:49:24" 
```

我相信`belongs_to: user`Micropost 模型中缺少该关联。

# android - File.mkdir() 和 mkdirs() 正在创建文件而不是目录

> ID：13953744
> 
> 赞同：10
> 
> 时间：2012-12-19T13:44:28.490
> 
> 标签：android, java-io

我使用以下代码：

```
final File newFile = new File("/mnt/sdcard/test/");
newFile.mkdir(); // if I use mkdirs() result is the same 
```

它会创建一个空文件！为什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-19T13:47:49.540

除非您希望创建结构中的每个文件夹，否则您不会使用 mkdirs()。尝试不要在字符串末尾添加额外的斜杠，看看是否有效。

例如

```
final File newFile = new File("/mnt/sdcard/test");
newFile.mkdir(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-25T06:47:43.147

当我需要确保文件的所有目录都存在，但我只有文件路径时 - 我有

```
 new File(FileName.substring(0,FileName.lastIndexOf("/"))).mkdirs(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T13:57:01.710

首先你不应该使用带有“/mnt/sdcard/test”的文件路径，这可能会导致一些安卓手机出现问题。改用：

```
public final static String APP_PATH_SD_CARD = "/Test";

String fullPath = Environment.getExternalStorageDirectory().getAbsolutePath() + APP_PATH_SD_CARD; 
```

自从您添加破折号后，它会创建一个空文件。

现在您有了路径，请使用以下代码：

```
try {
    File dir = new File(fullPath);
    if (!dir.exists()) {
         dir.mkdirs();
    }
}
catch(Exception e){
    Log.w("creating file error", e.toString());
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T13:54:02.643

尝试使用

```
 String rootPath=Environment.getExternalStorageDirectory().getAbsolutePath()+"/test/";
            File file=new File(rootPath);
if(!file.exists()){
file.mkdirs();
} 
```

# facebook-graph-api - Bugs：Safari无法打开页面，因为地址无效

> ID：13953750
> 
> 赞同：0
> 
> 时间：2012-12-19T13:45:00.443
> 
> 标签：facebook-graph-api, ios5, xcode4.3

有一个应用程序用于测试我们的 IOS 应用程序与 Facebook 的集成。它工作正常。我们创建了一个新的 Facebook 应用程序用作生产应用程序，但在 IOS 应用程序中遇到了问题。用户输入登录名/密码后，授予应用程序权限并按 okey - Safari 显示以下错误：Safari 无法打开页面，因为地址无效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T12:52:11.620

在运行应用程序之前，请确保在 plist 中。你输入正确

1.FacebookAppId

2.URLSchemas

# iphone - glGenVertexArraysOES 在 iOS 上返回零 VAO，有时

> ID：13953755
> 
> 赞同：1
> 
> 时间：2012-12-19T13:45:11.033
> 
> 标签：iphone, ios6, ios-simulator, opengl-es-2.0

我在 iOS 上创建 VAO 时遇到问题。有时它工作得很好，glGenVertexArraysOES 通过第二个参数返回一个非零 VAO，但其他时候，它只是通过 glGetError() 返回零并且没有错误

我有两个案例。一个有效，另一个无效。它们都在初始化代码中，并且它们或多或少都是相同的代码：

在职的：

```
glGenBuffers(1, &m_vertexBufferObject);
errorCheck();

GLuint vao = 0;
glGenVertexArraysOES(1, &vao);
errorCheck();
glBindVertexArrayOES(vao);
errorCheck();

(vao set up goes here)

(vao != 0) 
```

不工作：

```
glBindBuffer(GL_ARRAY_BUFFER, 0);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);
glBindVertexArrayOES(0);

errorCheck();
GLuint vao = 0;
glGenVertexArraysOES(1, &vao);
errorCheck();
glBindVertexArrayOES(vao);
errorCheck();

(vao == 0) 
```

非工作块中的 glBind* 函数在很大程度上只是试图通过减轻任何先前绑定的状态来解决问题。它没有帮助。

代码是多线程的。我有一个上下文，并且一次只允许一个线程通过互斥锁使用它。当线程获取上下文时，我锁定互斥体并调用 setCurrentContext。之后我将当前上下文恢复为零。我相信这应该是我在别处读到的可接受的多线程设置。无论如何，禁用线程并在同一线程上运行所有内容都没有区别！

成功的案例发生在刚开始的时候，也就是初始化的时候。这很好......另一种情况发生在加载期间，同时渲染循环正在进行（但仍被所述关键部分和上下文分配编组），这就是失败的情况。

我基本上假设glGenVertexArrayOES的执行必须有某种先决条件没有得到满足。我不认为这真的是在后一种情况下设置的 VAO 的主体，我认为这是在成功的初始 VAO 设置和后来的尝试设置之间发生的事情。

它在 sim 卡和手机上都失败了，所以显然发生了一些事情......然而，这是一个无声的错误，所以它让我没有调查的角度。它在 OS X 的 OpenGL 上工作得很好。此外，尝试复制错误或类似情况（例如，各种示例代码中的线程都失败了。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T11:02:08.497

这是从 GLKViewController 派生的视图类。

```
@interface IncubeViewController : GLKViewController {
      ...
} 
```

这就是我加载vao的方式：

```
- (void) loadGeometry
{
        /* Pieces */
        for (int i = ptFirst; i < ptLast; i++) {
                glGenVertexArraysOES(1, &pieceObject[i].array);
                glBindVertexArrayOES(pieceObject[i].array);

                glGenBuffers(1, &pieceObject[i].buffer);
                glBindBuffer(GL_ARRAY_BUFFER, pieceObject[i].buffer);

                glBufferData(GL_ARRAY_BUFFER, vertextData[i].vertNumber * sizeof(Vertex),
                             vertextData[i].vertArray, GL_STATIC_DRAW);

                glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_TRUE,
                                      sizeof(Vertex), (void *)offsetof(Vertex, position));
                glEnableVertexAttribArray(GLKVertexAttribPosition);
                glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_TRUE,
                                      sizeof(Vertex), (void *)offsetof(Vertex, normal));
                glEnableVertexAttribArray(GLKVertexAttribNormal);
        }

        /* Cube */
        glGenVertexArraysOES(1, &cubeObject.array);
        glBindVertexArrayOES(cubeObject.array);

        glGenBuffers(1, &cubeObject.buffer);
        glBindBuffer(GL_ARRAY_BUFFER, cubeObject.buffer);

        glBufferData(GL_ARRAY_BUFFER, CubeDataNumberOfVertices * sizeof(Vector3),
                     CubeData, GL_STATIC_DRAW);

        glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE,
                              0, (void *)0);
        glEnableVertexAttribArray(GLKVertexAttribPosition);

        /* Sphere */
        glGenVertexArraysOES(1, &sphereObject.array);
        glBindVertexArrayOES(sphereObject.array);

        glGenBuffers(1, &sphereObject.buffer);
        glBindBuffer(GL_ARRAY_BUFFER, sphereObject.buffer);

        glBufferData(GL_ARRAY_BUFFER, SphereDataNumberOfVertices * sizeof(Vertex),
                     SphereData, GL_STATIC_DRAW);

        glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE,
                              sizeof(Vertex), (void *)offsetof(Vertex, position));
        glEnableVertexAttribArray(GLKVertexAttribPosition);
        glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE,
                              sizeof(Vertex), (void *)offsetof(Vertex, normal));
        glEnableVertexAttribArray(GLKVertexAttribNormal);

        /* Diagonal grid */
        glGenVertexArraysOES(1, &diagonalGridObject.array);
        glBindVertexArrayOES(diagonalGridObject.array);

        glGenBuffers(1, &diagonalGridObject.buffer);
        glBindBuffer(GL_ARRAY_BUFFER, diagonalGridObject.buffer);

        glBufferData(GL_ARRAY_BUFFER, sizeof(diagonalGridData),
                     diagonalGridData, GL_STATIC_DRAW);

        glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE,
                              sizeof(Vector3), (void *)0);
        glEnableVertexAttribArray(GLKVertexAttribPosition);

        glBindVertexArrayOES(0);
}

- (void) unloadGeometry
{
        glDeleteBuffers(1, &diagonalGridObject.buffer);
        glDeleteVertexArraysOES(1, &diagonalGridObject.array);
        glDeleteBuffers(1, &cubeObject.buffer);
        glDeleteVertexArraysOES(1, &cubeObject.array);
        glDeleteBuffers(1, &sphereObject.buffer);
        glDeleteVertexArraysOES(1, &sphereObject.array);
        for (int i = ptFirst; i < ptLast; i++) {
                glDeleteBuffers(1, &pieceObject[i].buffer);
                glDeleteVertexArraysOES(1, &pieceObject[i].array);
        }
} 
```

虽然它没有显示你做错了什么，但如果有人需要，我在这里添加它只是为了参考。

我的一种解释是，您试图在应用程序初始化的错误时刻创建您的 vao，或者 init 不太正确（例如，未设置上下文）。

我在这里有以下堆栈：

```
- (void)setupGL
{
        [EAGLContext setCurrentContext:self.context];

        self.effect = [[[GLKBaseEffect alloc] init] autorelease];
        if (self.effect) {
                self.effect.useConstantColor = GL_TRUE;
                self.effect.colorMaterialEnabled = GL_TRUE;
                self.effect.light0.enabled = GL_TRUE;
                self.effect.light0.diffuseColor = GLKVector4Make(1.0f, 1.0f, 1.0f, 1.0f);
        }

        ((GLKView *)self.view).drawableMultisample = GLKViewDrawableMultisample4X;
        self.pauseOnWillResignActive = YES;
        self.resumeOnDidBecomeActive = YES;
        self.preferredFramesPerSecond = 30;

        glDisable(GL_DITHER);
        glEnable(GL_CULL_FACE);
        glEnable(GL_DEPTH_TEST);
        glLineWidth(2.0f);
        [self loadGeometry];
}

- (void)viewDidLoad
{
        [super viewDidLoad];
        self.context = [[[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2] autorelease];
        if (!self.context)
                NSLog(@"Failed to create ES context");

        GLKView *view = (GLKView *)self.view;
        view.context = self.context;
        view.drawableDepthFormat = GLKViewDrawableDepthFormat24;

        [self setupGL];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T07:56:08.487

好的，我终于破解了这个。

事实证明，我有一些类似 RAII 的代码会在线程上的一些 OpenGL 操作之前和之后调用 setCurrentContext。至关重要的是，当一个范围结束时它会 [EAGLContext setCurrentContext:nil] ......但是这些范围可以嵌套，并且它对每个嵌套范围都这样做，而不是最后一个范围。

其结果是调用 OpenGL 时当前上下文为 nil。OpenGL 调用只会“什么都不做”，而“什么也不做”包括“不抛出错误”——你会认为 glGetError() 至少可能已经说了些什么。

所以，如果你没有设置当前的上下文，那么 Mac 上的 GL 似乎崩溃了，但 IOS 上的 GLES 只是提前退出，没有错误。

# complexity-theory - 扩展欧几里得算法运行时间 O(log(m)^2)

> ID：13953757
> 
> 赞同：1
> 
> 时间：2012-12-19T13:45:13.873
> 
> 标签：complexity-theory, big-o

我对维基百科文章中以下行的理由感兴趣：

“这个算法 [扩展欧几里得算法] 在 O(log(m)^2) 时间内运行，假设 |a| < m，并且通常比指数更有效。” [http://en.wikipedia.org/wiki/Modular_multiplicative_inverse](http://en.wikipedia.org/wiki/Modular_multiplicative_inverse)

为什么会这样？谁能给我解释一下？我完全理解算法和所有数学，只是我不知道如何确定这些算法的复杂性。还有更一般的提示吗？

此外，另外：log 是自然对数 (ln) 还是以 2 为底的对数？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-19T14:53:06.860

流行的算法简介书 ( [http://mitpress.mit.edu/books/introduction-algorithms](http://mitpress.mit.edu/books/introduction-algorithms) ) 有一整章是关于证明算法复杂性的（但是该主题的内容比本书要多得多）。如果您一般对此事感兴趣，可以阅读它。

您也可以尝试遵循本文的参考资料：http: [//itee.uq.edu.au/~havas/cats03.pdf](http://itee.uq.edu.au/~havas/cats03.pdf)

# php - 使用 PDO 记录具有执行时间的查询 - 自动完成功能不起作用

> ID：13953760
> 
> 赞同：4
> 
> 时间：2012-12-19T13:45:23.903
> 
> 标签：php, pdo

我正在尝试创建一个中间类，它将查询及其执行时间记录在一个数组中。一切都很好，而且效果很好。但是当我尝试访问中间类时，自动完成不起作用。如何让自动完成工作。我正在使用 Netbeans。

中间类名是 Model。

在我的应用程序中，我有一个名为 Users 的类，它扩展了 Model。

```
class Users extends Model
{
    function __construct() {
        parent::__construct();
        $stmt = $this->prepare('SELECT * FROM users WHERE id=? ');

        $stmt->bindValue(1, 1); //$stmt-> auto-complete is unavailable
        $stmt->execute();

        $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);

        print_r($rows); //i get results
    }
} 
```

我的模型类看起来像这样。

```
class Model extends PDO
{
    public static $log = array();
    private $query_cache = array();

    public function __construct() {
        parent::__construct(
            "mysql:dbname=".MYSQL_DB.";host=".MYSQL_HOST,
            MYSQL_USER, MYSQL_PASSWORD
        );
    }

    public function query($query) {
        $time = "";
        $query = mysql_real_escape_string(preg_replace( '/\s+/', ' ', $query ));

        if (key_exists($query,$this->query_cache)
            && is_object($this->query_cache[$query]))
        {
            $result = $this->query_cache[$query];
        } else {
            $start = microtime(true);
            $result = parent::query($query);
            $time = microtime(true) - $start;
            $this->query_cache[$query] = $result;
            Logger::$logText['DATABASE'][] = array(
                'QUERY' => $query,
                'TIME'  => number_format($time,4)
            );
        }
        return $result;
    }

    /**
     * @return LoggedPDOStatement
     */
    public function prepare($query) {
        return new LoggedPDOStatement(parent::prepare($query));
    }
} 
```

我的 LoggedPDOStatement 看起来像这样。

```
class LoggedPDOStatement
{
    /**
     * The PDOStatement we decorate
     */
    private $statement;

    public function __construct(PDOStatement $statement) {
        $this->statement = $statement;
    }

    /**
     * When execute is called record the time it takes and
     * then log the query
     * @return PDO result set
     */
    public function execute() {
        $start = microtime(true);
        $result = $this->statement->execute();
        $time = microtime(true) - $start;
        Model::$log[] = array(
            'query' => '[PS] ' . $this->statement->queryString,
            'time'  => round($time * 1000, 3)
        );
        return $result;
    }
    /**
     * Other than execute pass all other calls to the PDOStatement object
     * @param string $function_name
     * @param array $parameters arguments
     */
    public function __call($function_name, $parameters) {
        return call_user_func_array(
            array($this->statement, $function_name), $parameters
        );
    }
} 
```

他们有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:02:20.843

我已经修复了来自@cilosis 和@Touki 的建议

@Touki，我同意我不应该扩展 PDO 类。@cilosis，感谢您的评论。

这就是我写我的课的方式。我还没有粘贴完整的代码，因为它还没有完成。但我已经检查过它是否有效。我也可以记录我的查询。但是我不确定我是否能够记录执行时间。

```
class Model
{
    /**
     * The singleton instance
     *
     */
    static private $PDOInstance;

    public function __construct($dsn="", $username = false, $password = false, $driver_options = false) {
        if (!self::$PDOInstance) {
            try {
                self::$PDOInstance = new PDO(
                    "mysql:dbname=".MYSQL_DB.";host=".MYSQL_HOST,
                    MYSQL_USER, MYSQL_PASSWORD
                );
            } catch (PDOException $e) {
                die("PDO CONNECTION ERROR: " . $e->getMessage() . "<br/>");
            }
        }
        return self::$PDOInstance;
    }

    /**
     * Initiates a transaction
     *
     * @return bool
     */
    public function beginTransaction() {
        return self::$PDOInstance->beginTransaction();
    }

    public function prepare($statement, $driver_options = false) {
        //log the $statement
        if (!$driver_options)
            $driver_options = array();
        return self::$PDOInstance->prepare($statement, $driver_options);
    }
} 
```

# objective-c - 我可以在同一个会话中使用 AVCaptureVideoDataOutput 和 AVCaptureMovieFileOutput 吗？

> ID：13953763
> 
> 赞同：2
> 
> 时间：2012-12-19T13:45:25.103
> 
> 标签：objective-c, ios, avfoundation

我正在开发 iOS 应用程序。我需要从相机捕捉视频，我需要将该视频记录到一个文件中，并获得未压缩的帧，这就是为什么我需要同时使用 AVCaptureOutput ...

我在苹果的文档中读到这个“你可以配置多个输入和输出，由一个会话协调：”所以我认为它一定是可行的，但我遇到了问题......

我将两者都设置为会话：

```
self.fileOutput.maxRecordedDuration =  CMTimeMake(5000,1 );;
self.fileOutput.minFreeDiskSpaceLimit = 3000;

if([self.captureSession canAddOutput:self.fileOutput]){
    [self.captureSession addOutput:self.fileOutput];
    NSLog(@"Added File Video Output");
}else{
    NSLog(@"Couldn't add video output");
}

if ([self.captureSession canAddOutput:videoOutput]){
    [self.captureSession addOutput:videoOutput];
    NSLog(@"Added Data Video Output");
}else{
    NSLog(@"Couldn't add video output");
} 
```

我收到两个“肯定”的确认消息。之后我打电话给：

```
NSString *assetPath         = [self createAssetFilePath:@"mov"];
NSURL *outputURL            = [[NSURL alloc] initFileURLWithPath:assetPath];
[self.fileOutput startRecordingToOutputFileURL:outputURL recordingDelegate:self];
[self.captureSession startRunning]; 
```

然后我有我的委托功能：

```
- (void)captureOutput:(AVCaptureFileOutput *)captureOutput didFinishRecordingToOutputFileAtURL:(NSURL *)outputFileURL fromConnections:(NSArray *)connections error:(NSError *)error {

NSLog(@"Output File URL: %@ ", outputFileURL);

BOOL recordedSuccessfully = YES;

    if ([error code] != noErr) {

        NSLog(@"Error: %@", error);
        id value = [[error userInfo] objectForKey:AVErrorRecordingSuccessfullyFinishedKey];
        NSLog(@"Error: %@", value);
        if (value) {
            recordedSuccessfully = [value boolValue];
        }

    }
} 
```

而且我没有收到任何错误，但是在添加“AVCaptureMovieFileOutput”之前“AVCaptureVideoDataOutput”正在工作，现在它不是......

那么……这两者都有可能吗？！任何的想法？！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T21:39:31.613

这个问题的答案：[Simultaneous AVCaptureVideoDataOutput 和 AVCaptureMovieFileOutput](https://stackoverflow.com/questions/3968879/simultaneous-avcapturevideodataoutput-and-avcapturemoviefileoutput)表明您不能同时在会话中使用 AVCaptureVideoDataOutput 和 AVCaptureMovieFileOutput。不幸的是，我无法在 Apple 文档中验证这一点。我的经验是，在我将 AVCaptureMovieFileOutput 添加到会话的输出后，我不再接收到我的 AVCaptureVideoDataOutput 的 sampleBufferDelegate 的消息，这似乎支持了该断言。

# jquery - History.js 重写 location.hash 值

> ID：13953766
> 
> 赞同：0
> 
> 时间：2012-12-19T13:45:31.877
> 
> 标签：jquery, history.js

我正在使用 HTML5 jQuery 捆绑的[History.js](https://github.com/browserstate/history.js)插件。它工作正常，但我需要能够使用类似的链接（没有 History.js 也能正常工作）

```
http://website/url#popup=/url/some/more/params/ 
```

暂时，如果我尝试使用它，我的哈希页面将在没有哈希的情况下重新加载——我刚刚在只有 History.js 插件的环境中测试了它（以确保这是一个 History.js 问题）。

```
http://website/popup=/url/some/more/params/ 
```

但是，如果我尝试不带“/”符号的哈希，一切都会好起来的，location.hash 将保持不变，不会重新加载页面：

```
http://website/#popup=url 
```

问题是我想在#popup 参数中使用本机网址。易于处理和显示这种方式链接对用户来说一目了然，打开弹出窗口后每个人都可以分享链接。

是否可以禁用此类 location.hash 更改和重定向？我真的不认为使用带有特殊分隔符的链接是个好主意：

```
http://website/#popup=url:param:values 
```

PS 在将其添加到 location.hash 之前，我尝试将 encodeURIComponent() 应用于弹出 url，以下 url 也会删除哈希并进行重定向：

```
http://website/#popup%3D%2Ftest%2Furl 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:49:12.093

您的 URL 无效，如果它位于哈希之后，则正斜杠应为 %2F。

此外，在地址栏中输入

`http://stackoverflow.com/questions/13953766/history-js-rewrites-location-hash-value#popup=eerste/tweede/derde`

将`#popup=eerste/tweede/derde`在 location.hash 中创建，这是正确的。

在我看来，您应该向 History.js 的作者提交错误报告

# jquery - href vs 脚本页面转换和按钮突出显示

> ID：13953768
> 
> 赞同：3
> 
> 时间：2012-12-19T13:45:40.440
> 
> 标签：jquery, jquery-mobile, knockout.js, single-page-application

我正在构建许多 jQuery Mobile SPA 以及 knockout.js，并且总体上取得了巨大的成功。我确实注意到主要是一个外观问题，现在希望解决它。

通过链接的锚标签`href`产生一个漂亮的按钮突出显示（默认主题为蓝色）在页面转换期间影响，但通过敲除的`click`绑定导航/ `$.mobile.changePage`不会产生这样的突出显示。我意识到这可能与淘汰赛无关。

是否有任何通用方法可以使脚本页面转换以相同的方式工作？`click`鉴于我使用了淘汰赛，我有大量的绑定。

```
<div id="page1" data-role="page">
    <div data-role="content">   
        <h1>Page 1</h1>
        <a href="#page2" data-role="button">
                Page 2 via href (with highlight)</a>
    </div>
</div>

<div id="page2" data-role="page">
    <div data-role="content">   
        <h1>Page 2</h1>
        <a data-role="button"
            onclick="$.mobile.changePage('#page3');">
               Page 3 via script (no highlight)</a>
    </div>
</div>

<div id="page3" data-role="page">
    <div data-role="content">   
        <h1>Page 3</h1>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:31:11.013

这个问题显然还没有解决。由于某种原因，changePage 函数会干扰按钮样式。当我创建我的最后一个应用程序时，这也是导航栏和更改页面的问题。

你可以用一点 jQuery 修复来解决它，你会在我的[示例](http://jsfiddle.net/Gajotres/y4GLt/)中找到所有内容：

```
$('#index').live('pagebeforeshow',function(e,data){  
    $('#custom-highlight').live('click', function(e) {
        $(this).addClass("ui-focus ui-btn-active");
        setTimeout(function(){$.mobile.changePage('#second');},50)
    });
});

$("[data-role=page]").live('pagebeforeshow', function (e,data) {
    data.prevPage.find('#custom-highlight').removeClass("ui-focus ui-btn-active");
}); 
```

要根据您的需要调整示例，请在每个具有自定义类名的元素上使用 .each(。超时功能是必需的，没有它 changePage 会在应用样式之前触发。您可以玩一下超时。有时，如果您降低它changePage 将在应用样式之前触发。

你想在带有 href 的按钮上看到这个问题，因为它们已经有一点延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T21:11:09.753

在云雀中，我尝试同时提供`href`和`onclick`属性，这似乎解决了问题。只要`href`指向正确/生成的页面，JavaScript 调用仍然有效并且按钮会突出显示。我很想对这种方法发表一些评论。

```
<a data-role="button" href="#page4"
    onclick="$.mobile.changePage('#page4');">
    Page via script and href (with highlight)
</a> 
```

根据测试，href 和 onclick 似乎都在触发。

# android - 更改光标后Android ListView不刷新

> ID：13953773
> 
> 赞同：4
> 
> 时间：2012-12-19T13:45:56.433
> 
> 标签：android, listview, android-cursoradapter, mergecursor

以下代码用于填充无穷无尽的 ListView。当用户到达列表末尾时，应用程序调用异步任务以获取更多项目，然后在执行后返回新光标并与前一个光标合并。问题是这段代码不适用于 ICS 和 Jelly Bean，但适用于 Froyo 和 Gingerbread。在 ICS 和 JellyBean 上，列表视图为空，但如果您记录光标大小，您将获得合并光标的大小。

```
Cursor[] cursors = new Cursor[2];   
//actual cursor   
cursors[0] = resourceCursor.getCursor();   
//new cursor returned by async task   
cursors[1] = result;   
MergeCursor mergeCursor = new MergeCursor(cursors);   
resourceCursor.changeCursor(mergeCursor); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:47:49.127

好的，我找到了一个解决方案，似乎是一个丑陋的解决方案，但它有效。在我的研究中，所有问题似乎都解决了 Honeycumb 之后的问题，所以我将 API 级别更改为 11，以获取 swapCursor 可用，然后，在我的代码上：

```
Cursor[] cursors = new Cursor[2];   
//actual cursor   
cursors[0] = resourceAdapterCursor.getCursor();   
//new cursor returned by async task   
cursors[1] = result;   
MergeCursor mergeCursor = new MergeCursor(cursors);   
if (android.os.Build.VERSION.SDK_INT > android.os.Build.VERSION_CODES.GINGERBREAD){
    resourceAdapterCursor.swapCursor(mergeCursor);
} else {
    resourceAdapterCursor.changeCursor(mergeCursor);
} 
```

谢谢！
最好的祝福。
罗德里戈

# java - 我正在尝试在我的“点击计数器”Android 应用程序中实现最大计数功能

> ID：13953776
> 
> 赞同：0
> 
> 时间：2012-12-19T13:46:15.387
> 
> 标签：java, android

到目前为止，我有以下 java 代码。我是java新手。我希望最大计数为 500，之后计数返回“0”，您可以再次开始计数。

```
import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.view.View.OnClickListener;
import android.widget.EditText;

public class wazeefa extends Activity
{
    TextView txtCount;
    Button btnCount;
    int count = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.wazeefa);

        //button sound
        final MediaPlayer mpButtonClick = MediaPlayer.create(this, R.raw.countbutton);

        txtCount = (TextView)findViewById(R.id.wcount);
        txtCount.setText(String.valueOf(count));
        btnCount = (Button)findViewById(R.id.wclick);

        btnCount.setOnClickListener(new OnClickListener()
        {
            public void onClick(View V)
            {
                count++;
                txtCount.setText(String.valueOf(count));
                mpButtonClick.start();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:48:02.767

使用 %（[模数/提醒](http://en.wikipedia.org/wiki/Modulo_operation#Remainder_calculation_for_the_modulo_operation)）运算符。

```
count = (count + 1) % 500; //count will be in range [0,499] inclusive 
```

或者，如果您也想允许 500：

```
count = (count + 1) % 501; //count will be in range [0,500] inclusive 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:48:15.703

```
if(count > 500) {
    count = 0;
} 
```

这是 if 语句，基本上括号内的代码只有在顶部所说的内容为真时才会执行。它是编程的基础，如果你是 Java 新手，你的代码还不错

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:49:35.043

```
import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.view.View.OnClickListener;
import android.widget.EditText;

public class wazeefa extends Activity{

TextView txtCount;
Button btnCount;
int count = 0;  

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.wazeefa);

    //button sound
    final MediaPlayer mpButtonClick = MediaPlayer.create(this, R.raw.countbutton);

    txtCount = (TextView)findViewById(R.id.wcount); 
    txtCount.setText(String.valueOf(count));
    btnCount = (Button)findViewById(R.id.wclick);       

    btnCount.setOnClickListener(new OnClickListener() {
         public void onClick(View V) {
            count++; 
            txtCount.setText(String.valueOf(count));
            mpButtonClick.start();

            if (count >= 500) {
               count = 0;
            }
        }
        });
}} 
```

# c# - 使用蓝牙耳机控制 WP7 和 WP8 应用程序

> ID：13953787
> 
> 赞同：0
> 
> 时间：2012-12-19T13:46:57.150
> 
> 标签：c#, windows-phone-7, audio, bluetooth, windows-phone-8

我已经为 Windows Phone 7.5 和 Windows Phone 8 开发了一个音乐播放器应用程序。现在我想用各种蓝牙设备听音乐。我可以将它连接到我的手机并听音乐，所以效果很好。但它在某些情况下表现得很奇怪。如果音乐暂停，如果我断开蓝牙，它将在扬声器上恢复。我可以在我的日志中看到它接收到用户操作到`UserAction.SEEK`我关闭蓝牙时的位置。在这一点上，`player.Position`变量不知何故变成了 0，所以它变成了 0 并回到了我原来的位置。我不会做任何会导致这种行为的事情。

我要问的是：有没有办法接管控制权或获得任何控制权，以控制`AudioPlaybackAgent`我使用蓝牙设备做某事时发生的事情。是否发生了任何事件，或者所有这些都由操作系统处理？如果是这样，为什么我的应用程序的行为与股票应用程序不同？另外，为什么我`UserAction.SEEK`在打开蓝牙设备时会收到一个？

如果我的问题不清楚，请不要犹豫！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-18T09:00:50.913

这是平台的一个已知问题，但在 WP8 GDR2 中已修复。您可以通过检测*OnUserAction*序列来解决此问题`Pause` `Seek` `Play`。一旦检测到，您可以在下次调用*OnPlayerStateChanged*时暂停。需要注意的几点：

*   不能保证在同一个*AudioPlayer实例上调用**OnUserAction*的连续调用，因此任何状态都应该以静态状态存储。
**   曲目将从扬声器播放片刻，因此您可能需要将音量设置为 0（当然，在记下它之前的值之后）*

 *我已经在[GitHub 上发布了一个完整实现的要点](https://gist.github.com/richardszalay/6260553)。[我的博客上提供了](http://blog.richardszalay.com/2013/08/18/working-around-the-windows-phone-bluetooth-disconnection-issue/)示例用法和更详细的问题概要。*

# nosql - 无法为 ElasticSearch 成功运行 YCSB

> ID：13953789
> 
> 赞同：3
> 
> 时间：2012-12-19T13:47:08.703
> 
> 标签：nosql, elasticsearch, benchmarking, ycsb

我是 YCSB 和 ElasticSearch 的新手。我能够轻松地为 Cassandra 运行 YCSB。但是，我无法对 ES 做同样的事情（或者也许我有，但我不确定）。

按照 YCSB/elasticsearch 中记录的步骤，我能够开始测试，甚至得到了结果。我不确定它在哪个 ES 实例上运行？对于 Cassandra，我必须自己启动 Cassandra 服务器，然后运行测试（提供主机详细信息以及 ycsb 命令）。另一方面，ES 不要求我们做任何此类事情。那么 YCSB 如何运行这些测试。我什至没有启动本地 ES 实例，但测试给出了结果。

任何见解真的会有所帮助吗？

谢谢！

# c - 为什么第二个代码中有分段错误？

> ID：13953790
> 
> 赞同：-2
> 
> 时间：2012-12-19T13:47:08.353
> 
> 标签：c, string, segmentation-fault

> **可能重复：**
> [为什么这个 C 代码会导致分段错误？](https://stackoverflow.com/questions/1614723/why-is-this-c-code-causing-a-segmentation-fault)

```
char array[6] = "kapil";  
array [0] =  'K'; 
```

此代码运行正常。
但**以下代码会产生分段错误？**

```
char* array = "kapil";  
array [0] =  'K'; 
```

为什么首先不产生段错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:48:30.100

`char* array = "kapil";`声明一个字符串文字并且等价于`const char*`. 这很可能存在于只读存储器中并且无法修改。

严格来说，尝试修改它会导致未定义的行为，但实际上可能会出现段错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:50:30.217

`char* array = "kapil";``kapil`使用这种类型的声明，它在只读上下文中复制，您可以更改其内容。

# c# - 如何在 TabControl 中更改大小和图像

> ID：13953792
> 
> 赞同：3
> 
> 时间：2012-12-19T13:47:19.507
> 
> 标签：c#, user-interface, size, tabcontrol, designer

我想改变`TabPage`我的大小`TabControl`，![在此处输入图像描述](../Images/6fdc3f6f7411d760750fc501906f1f49.png)

每个选项卡应该在一行中，没有滚动。

第二个问题是关于如何像这里一样将文本更改为图像（请忽略绿线）：

![在此处输入图像描述](../Images/f3444c652e3cc784c8e61d905427b2b4.png)

编辑。我用过Winforms。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:54:01.847

广告 1。

无法自动调整标签页的宽度以适应您想要的宽度，因此您只需进行一些数学运算即可实现这一点。

广告 2。

首先，您必须创建一个`ImageList`对象，然后将其传递给您的`TabControl`：

```
ImageList il = new ImageList();
il.Images.Add("your_graphics_name", Image.FromFile(@"C:\Graphics\example.png"));
(...)
yourTabControl.ImageList = il; 
```

然后，您可以通过提供密钥从标签页上的图像列表中设置特定图像：

```
yourTabControl.TabPages.Add("title", "text", "your_graphics_name"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:51:06.657

选项卡的大小和布局在 WinForms 中受到严格控制。您当然可以更改字体和字体大小，这将对选项卡的大小产生隐含的影响，但这不是您想要通过事物的声音来做的。

现在显然 Windows 确实允许您调节最小默认选项卡宽度，但您不能直接使用开箱即用的 WinForm 控件来执行此操作。本文解释了如何：[如何使 WinForms TabPage 标题宽度适合它的标题？](https://stackoverflow.com/questions/6745193/how-can-i-make-winforms-tabpage-header-width-fit-its-title).

如果这开始给您的设计带来严重问题，您可能需要考虑使用 3rd 方选项卡控件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T14:07:20.143

就像其他人说你不能改变你的标签的宽度。但是，如果它们与屏幕不匹配，您可以将标签设置为例如两行：

```
tabControl.Multiline = true; 
```

# unix - 如何在unix管道中实时传输数据？

> ID：13953793
> 
> 赞同：0
> 
> 时间：2012-12-19T13:47:23.250
> 
> 标签：unix, pipeline

据我所知，如果我们执行例如“./program | grep someoutput”，它会在程序处理完成后 greps。你知道，如何按收入来做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:50:01.317

shell 将同时生成两个进程，并将第一个进程的输出连接到第二个进程的输入。如果您有两个长时间运行的进程，那么您将在进程表中看到这两个进程。没有中间步骤，没有存储第一个程序的数据。这是一个*管道*，而不是一个*桶*。

注意 - 可能涉及一些缓冲。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:52:51.143

实际上， grep 可以“实时”使用，因为通过管道传递的数据没有被缓冲，所以类似的东西`tail -f /var/log/messages | grep something`会起作用。

如果您没有得到预期的输出，则很可能前面的命令正在缓冲其输出。以双重grep为例：

```
tail -f /var/log/messages | grep something | grep another 
```

输出不会立即出现，因为[grep 将在 stdout 未连接到终端时缓冲其输出，](http://www.pixelbeat.org/programming/stdio_buffering/)这意味着第二个 grep 在刷新缓冲区之前不会看到任何数据。强制行缓冲模式解决了这个问题：

```
tail -f /var/log/messages | grep --line-buffered something | grep another 
```

根据缓冲的完成方式，可以使用[stdbuf](http://www.gnu.org/software/coreutils/manual/html_node/stdbuf-invocation.html)修改命令的缓冲模式，例如：

```
stdbuf -oL ./program | grep something 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:49:58.800

你错了。

管道立即接收数据，但是如果另一端（接收器）没有足够快地读取数据，源进程写入管道当然会阻塞。

当然，这并不一定意味着管道适合“硬实时”使用，但也许这不是您的意思。

# csv - Mathematica：如何对 RC 建模并从 CSV 获取 R 和 C 值

> ID：13953807
> 
> 赞同：4
> 
> 时间：2012-12-19T13:48:12.560
> 
> 标签：csv, wolfram-mathematica, response

我希望有一个人可以帮助我。

我有一个包含电压响应和电流阶跃值的 CSV 文件。我必须在mathematica中制作一个RC模型并找到R和C值。

如何在数学中对 RC 进行建模并从 CSV 文件中的值中提取参数？

我这样做了：

```
Data=Import["T:/file.csv","CSV"]; 
```

我的数据有一个标题和 2 列。电流列和电压响应列。

```
Voltage=data[[35;;,1]];Current=data[[35;;,2]]; 
```

我的文件有一个标题，这就是为什么我写 35 来删除标题。 ![Hier ist my Current step](../Images/3b1edd89ba4467226c39f30fd96c8c71.png) ![Hier ist my 电压响应](../Images/72270663477d5d6fe46b68b93360e21f.png)

所以现在我有一个 RC 模型，其中电阻器与电容器并联并与其他电阻器串联 ![我的遥控模型](../Images/b42ba5fda300a612a37d0c37f7134b8d.png)

```
Z= Ri+Rt//Ct  --> complex Form (Ri+Rt/1+jwR2Ct) 
```

我在数学中的模型看起来像：

```
OutputResponse[StateSpaceModel[TransferFunction[{{Ri+Rt+sRt}/{1+sRt}},s,SamplingPeriod->0.1,SystemsModelLabels->None]],current]; 
```

如何从电压响应中提取 Ri Rt 和 Ct 以将它们放入我的传递函数中以获得与图[2所示相同的电压响应](https://i.stack.imgur.com/fb2Kk.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-06T12:44:23.970

我不确定我是否完全理解你的问题。
是否如下：您有一个包含变量值表的 CSV 数据文件`Ri`，`Rt`并且`Ct`您想将这些值插入您的公式中？

如果是这种情况，您可以先定义一个函数

```
response[Ri_ , Rt_, Ct_] := OutputResponse[... (as above) 
```

然后假设您`Data`的表在第 1、2 和 3 列中具有这些值（您可能需要采用此方法）。

然后你可以：

```
Map[Function[r, response[r[[1]], r[[2]], r[[3]]], Data] 
```

获取包含结果的表格。

# vb.net - 如何在 VB.NET 中剪切字符串？

> ID：13953812
> 
> 赞同：0
> 
> 时间：2012-12-19T13:48:18.453
> 
> 标签：vb.net

我有那个字符串...

```
C:\Users\ApplicationData\Folder1\Myapp.exe 
```

我怎么能像这样剪：

```
C:\Users\ApplicationData\Folder1 
```

我试过`s.split("\Myapp.exe")`了，在`s`哪里`C:\Users\ApplicationData\Folder1\Myapp.exe`

请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T13:50:05.657

使用`Path`类：

```
Path.GetDirectoryName("C:\Users\ApplicationData\Folder1\Myapp.exe") 
```

在这里检查：

*   [http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:58:42.900

您可以使用[System.IO.FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)类。
它包含一个函数 FullName，它返回目录全名。检查这个[链接](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.fullname.aspx)

# iphone - 如何在 iphone sdk 的数据库中插入肥皂响应

> ID：13953817
> 
> 赞同：1
> 
> 时间：2012-12-19T13:48:28.320
> 
> 标签：iphone, objective-c, ios, soap

**我收到了这样的回复：**

```
2012-12-19 19:04:39.253 SwimboardDemo[4507:f803] <?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns="http://tempuri.org/"><soap:Body><GetAtheletDetailByUserKey><UserProfileKey>3</UserProfileKey></GetAtheletDetailByUserKey></soap:Body></soap:Envelope>
2012-12-19 19:04:51.678 SwimboardDemo[4507:f803] <?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><GetAtheletDetailByUserKeyResponse xmlns="http://tempuri.org/"><GetAtheletDetailByUserKeyResult><AtheletDetailList><WAthelet_Detail><AtheletDetail_PK>1</AtheletDetail_PK><Athelet_FK>2</Athelet_FK><Dist>50S</Dist><Stroke>Free</Stroke><PF>F</PF><Time>47.75</Time><place>0</place><Points>0</Points><Date>2011-04-29T00:00:00</Date><Meet>Luke Jeffrey Memorial Trophy 2</Meet><Course>S</Course><IsSyncronized>true</IsSyncronized><CreatedDate>2012-12-10T15:52:20.833</CreatedDate><UpdatedDate>2012-12-19T17:34:48.733</UpdatedDate><TeamMaster_FK>1</TeamMaster_FK><ResultID>4108</ResultID></WAthelet_Detail> 
```

**我在插入数据库时​​得到了响应：**

```
2012-12-19 19:10:53.024 SwimboardDemo[4507:f803] GetAllAtheleteHandler returned the value: (
    "<WAthelet_Detail><AtheletDetail_PK>1</AtheletDetail_PK><Athelet_FK>2</Athelet_FK><Dist>50S</Dist><Stroke>Free</Stroke><PF>F</PF><Time>47.75</Time><place>0</place><Points>0</Points><Date>2011-04-29T00:00:00.000</Date><Meet>Luke Jeffrey Memorial Trophy 2</Meet><Course>S</Course><IsSyncronized>true</IsSyncronized><CreatedDate>2012-12-10T15:52:20.833</CreatedDate><UpdatedDate>2012-12-19T17:34:48.733</UpdatedDate><TeamMaster_FK>1</TeamMaster_FK><ResultID>4108</ResultID></WAthelet_Detail>",
    "<WAthelet_Detail><AtheletDetail_PK>0</AtheletDetail_PK><Athelet_FK>0</Athelet_FK><place>0</place><Points>0</Points><IsSyncronized>false</IsSyncronized><TeamMaster_FK>0</TeamMaster_FK><ResultID>0</ResultID></WAthelet_Detail>",
    "<WAthelet_Detail><AtheletDetail_PK>0</AtheletDetail_PK><Athelet_FK>0</Athelet_FK><place>0</place><Points>0</Points><IsSyncronized>false</IsSyncronized><TeamMaster_FK>0</TeamMaster_FK><ResultID>0</ResultID></WAthelet_Detail>"
)
2012-12-19 19:10:53.281 SwimboardDemo[4507:f803] Result Count :: 3
2012-12-19 19:11:03.785 SwimboardDemo[4507:f803] Athelet Handler Done 0
2012-12-19 19:11:05.272 SwimboardDemo[4507:f803] Insertion Failed 
```

**代码如下：**

```
- (IBAction)btnSync:(id)sender {

//    if(![[NSUserDefaults standardUserDefaults] valueForKey:@"SychTeam"])
//    {

    SBSwimboardService* service = [SBSwimboardService service];
    service.logging = YES;
    [service GetAtheletDetailByUserKey:self action:@selector(GetAllAtheletDetailHandler:) UserProfileKey:3];
    //}
    //[service GetSplitDataByUserKey:self action:@selector(GetAllSplitDataHandler:) UserProfileKey:3];

}
#pragma mark - Delegate Methods

-(void)GetAllAtheletDetailHandler:(id)value
{
    int j;
    if([value isKindOfClass:[NSError class]]) {
        NSLog(@"%@", value);
        return;
    }

    // Handle faults
    if([value isKindOfClass:[SoapFault class]]) {
        NSLog(@"%@", value);
        return;
    }
    NSMutableArray* result = (NSMutableArray*)value;
    NSLog(@"GetAllAtheleteHandler returned the value: %@", result );
//    if([[NSString stringWithFormat:@"%@",result] isEqualToString:@"1"]){

         NSLog(@"Result Count :: %d",[result count]);
        for (int i =0; i<[result count]; i++) {

        NSMutableDictionary *dic=[[NSMutableDictionary alloc]init];

        [dic setValue:[[result objectAtIndex:i] valueForKey:@"AtheletDetail_PK"] forKey:@"AtheletDetail_PK"];
        [dic setValue:[[result objectAtIndex:i] valueForKey:@"Athelet_FK"] forKey:@"Athelet_FK"];

        DAL *objDAL=[[DAL alloc]initDatabase:@"Abc.sqlite"];
      j    = [objDAL insertRecord1:dic inTable:@"Abc"];

              NSLog(@"Athelet Handler Done %d",i);
            if (j == 0) {
                NSLog(@"Inserted Successfully");

            }
            else if(j == -1)
            {
                 NSLog(@"Insertion Failed");
            }
          }
    [[NSUserDefaults standardUserDefaults]setBool:YES forKey:@"SychTeam"];
    [[NSUserDefaults standardUserDefaults]synchronize];

}
-(int)insertRecord1:(NSDictionary *)record inTable:(NSString *)table {

    NSString *query = [NSString stringWithFormat:@"INSERT INTO %@ (", table];
    NSString *values = @"(";

    int ctr = 1;
    int totalKeys = [[record allKeys] count];
    for (NSString *key in [record allKeys]) {

        //NSObject *object = [record objectForKey:key];

        NSString *value1 = [record valueForKey:key];

        NSObject *object = value1;
        NSString *value = [self getValueOfObject:object];

        query = [query stringByAppendingFormat:@"%@", key];
        values = [values stringByAppendingFormat:@"%@", value];

        if (ctr != totalKeys) {
            query = [query stringByAppendingString:@", "];
            values = [values stringByAppendingString:@", "];
        }
        else {
            query = [query stringByAppendingString:@") VALUES "];
            values = [values stringByAppendingString:@");"];
        }

        ctr++;
    }

    query = [query stringByAppendingString:values];
    //  NSLog(@"%@",query);
    return [self executeScalar:query];
}

    - (SoapRequest*) GetAtheletDetailByUserKey: (id) _target action: (SEL) _action Abc: (int) Abc
    {
        NSMutableArray* _params = [NSMutableArray array];

        [_params addObject: [[[SoapParameter alloc] initWithValue: [NSNumber numberWithInt: Abc] forName: @"Abc"] autorelease]];
        NSString* _envelope = [Soap createEnvelope: @"Abc" forNamespace: self.namespace withParameters: _params withHeaders: self.headers];
        SoapRequest* _request = [SoapRequest create: _target action: _action service: self soapAction: @"http://tempuri.org/Abc" postData: _envelope deserializeTo: [[SBArrayOfWAthelet_Detail alloc] autorelease]];
        [_request send];
        return _request;
    } 
```

**问题：**

在数据库中插入数据失败。

你能帮忙吗？

执行此查询时出现错误：

> INSERT INTO Athelet_Detail (AtheletDetail_PK, Athelet_FK, CreatedDate, TeamMaster_FK, Date, UpdatedDate, Meet, place, Time, IsSyncronized, Points, Stroke, PF, ResultID, Course, Dist) 值 (1, 2, '2012-12-10 10: 22:20 +0000', 1, '2011-04-28 18:30:00 +0000', '2012-12-19 12:04:48 +0000', '卢克杰弗里纪念奖杯 2', 0, ' 47.75', 1, 0, '免费', 'F', 4108, 'S', '50S');

**错误：**

> *** 断言失败 -[Settings GetAllAtheletDetailHandler:], /Users/romaudernani/Documents/All my Stuffs/Roma/Swimboard Sqlite/Projects/SB Project/SwimboardDemo/../SwimboardSettings/Settings.m:127 2012-12-20 10 ：51：23.782 SwimboardDemo [660：f803] ***由于未捕获的异常'NSInternalInconsistencyException'而终止应用程序，原因：'插入失败'（null）'。

# java - 如何在 Mac 版 MatLab 中使用命令 xlswrite？

> ID：13953822
> 
> 赞同：2
> 
> 时间：2012-12-19T13:48:56.077
> 
> 标签：java, excel, matlab, xls

当我使用 Mac 版本的 MatLab 时，我想将矩阵存储到“.xls”文件中。但它失败并显示警告说它无法启动 Excel 服务器进行导出。

我想知道是否有任何解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:09:04.090

MATLAB 因[在 Mac 上不支持此功能](http://www.mathworks.com/support/solutions/en/data/1-2SJUON/index.html?solution=1-2SJUON)而臭名昭著。查看[此博客](http://undocumentedmatlab.com/blog/xlswrite-for-mac-linux/)或[FileExchange 中的此条目](http://www.mathworks.com/matlabcentral/fileexchange/37560-xlwrite-export-data-to-excel-from-matlab-on-macwin)

或者，您可以使用`csvwrite`编写 CSV 文件并将其导入 Excel。AFAIK，`csvwrite`独立于平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T14:21:26.783

来自[MathWorks 解决方案支持](http://www.mathworks.com/support/solutions/en/data/1-2SJUON/index.html?solution=1-2SJUON)：

> 在 Mac 系统上使用 XLSWRITE 创建 Excel 文件的功能在 MATLAB 7.12 (R2011a) 中不可用。XLSWRITE 在 Mac 上使用时会创建 CSV（逗号分隔值）文件，并提供与在 Linux 和 UNIX 平台上相同的功能。
> 
> XLSWRITE 的全部功能取决于将 Microsoft Excel 实例化为 COM 服务器的能力。COM 是为 Windows 平台开发的技术，不适用于 Mac。因此，XLSWRITE 和 XLSREAD 在 Mac 平台上的功能有限，并且在基本模式下工作。
> 
> 未来版本的 MATLAB 可能会考虑在 Mac OS X 上支持 XLSREAD。不幸的是，目前没有解决此问题的方法。

# django - dajaxice.core.js 未使用 ajax.py 中的函数进行更新

> ID：13953832
> 
> 赞同：1
> 
> 时间：2012-12-19T13:49:24.317
> 
> 标签：django, dajaxice, dajax

我正在使用 dajaxice (0.5.4) 运行 Django (1.4.3)。`ajax.py`我在名为 的主项目文件夹中有一个包含我的函数的文件`prj`，如下所示：

```
from dajax.core import Dajax
from dajaxice.decorators import dajaxice_register
from django.utils import simplejson
from dajaxice.core import dajaxice_functions
from django.core.urlresolvers import reverse, resolve

def getContent(request, *args, **kwargs):
    url = kwargs['url']
    try:
        v = resolve(url)
    except:
    data = []
    data.append(('some','data'))
    return simplejson.dumps(data)
dajaxice_functions.register(getContent) 
```

我跑了`python manage.py collectstatic`，我得到以下输出：

```
Copying '/tmp/tmpm8OlOw' 
```

但是，`dajaxice.core.js`生成的根本*没有*我的功能`getContent`。我哪里错了？我希望我已经正确安装了 dajaxice 和一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T01:31:59.850

Seems you forgot to call `dajaxice_autodiscover()` from `urls.py` (this is the place recommended by dajaxice author)

this call will load ajax.py module and make it's method discoverable by JS code generator

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T08:41:59.417

您需要使用 @dajaxice_register 装饰器或文档中提到的其他方法向 dajaxice 注册函数。

[http://django-dajaxice.readthedocs.org/en/latest/quickstart.html#create-your-first-ajax-function](http://django-dajaxice.readthedocs.org/en/latest/quickstart.html#create-your-first-ajax-function)

# c++ - 编译器如何知道物理地址的对齐方式？

> ID：13953834
> 
> 赞同：11
> 
> 时间：2012-12-19T13:49:30.120
> 
> 标签：c++, compiler-construction, alignment, memory-alignment

我知道某些 CPU 架构不支持未对齐的地址访问（例如，ARM 4 之前的 ARM 架构没有访问内存中半字对象的指令）。并且该架构的某些编译器（例如，某些版本的 GCC）在发现未对齐的地址时会使用一系列内存访问，因此未对齐的访问对开发人员几乎是透明的。（请参阅[The Definitive Guide to GCC，作者 William冯哈根](http://books.google.com.hk/books?id=wQ6r3UTivJgC&pg=PA412&lpg=PA412&dq=ARM%20gcc%20misaligned&source=bl&ots=EKXoVm5zEs&sig=1GCVN4LP2_ybth-821bnMWugQsQ&hl=en&sa=X&ei=nbfRUKWKMMyXiAe17YCYBg&ved=0CDAQ6AEwAA#v=onepage&q&f=false)）

但我想知道编译器如何知道地址是否对齐？毕竟，编译器看到的是虚拟地址（有效地址，EA），如果它可以看到任何东西的话。当程序运行时，EA 可以被操作系统映射到任何物理地址。即使虚拟地址对齐，生成的物理地址也可能未对齐，不是吗？物理地址的对齐是真正重要的，并且在 CPU 地址线上传输。

因为编译器根本不知道物理地址，它怎么能聪明到知道变量的地址是否对齐呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T13:53:36.700

虚拟地址不只是映射到任何物理地址。虚拟内存位于以对齐方式映射到物理页面的页面中。（通常与 4096 对齐）。

请参阅：[虚拟内存和对齐 - 它们如何组合在一起？](https://stackoverflow.com/questions/8191533/virtual-memory-and-alignment-how-do-they-factor-together)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T14:57:00.767

对齐对于目标代码来说是一个非常有用的属性，部分原因是一些机器坚持“对齐访问”，但在现代计算机中，因为缓存行对性能有巨大影响，因此代码/循环/数据/锁的缓存对齐是一个要求您本地友好的编译器。

世界上几乎所有的加载器都支持在大小适中的 2 次方对齐边界处加载代码，甚至更大。（汇编器和链接器也通过各种 ALIGNMENT 指令支持这一点）。通常，链接器和加载器只是将第一个加载的值与众所周知的边界大小对齐；具有虚拟内存的操作系统通常根据 VM 页面大小提供方便的边界（与其他答案相关）。

因此，编译器基本上可以知道其发出的代码/数据的对齐方式是什么。通过跟踪它发出了多少代码，它可以知道任何发出的值的对齐方式。如果它需要对齐，它可以发出链接器指令，或者对于适度的大小，只需填充直到发出的代码量适当对齐。

正因为如此，您可以非常确定大多数编译器不会将代码或数据构造放置在跨越缓存线（或其他架构强加）边界的方式中，这种方式会严重影响性能，除非有指示这样做。

# database - 显示从 servlet 到 jsp 的 Oracle 查询结果

> ID：13953837
> 
> 赞同：0
> 
> 时间：2012-12-19T13:49:43.013
> 
> 标签：database, jsp, servlets

我喜欢做的是有一个jsp页面。此页面有一个菜单栏。

当用户单击菜单栏中的某个项目时，应该在 servlet 中调用一段 java 代码。这个java代码应该查询db。

此查询的结果应添加到 request.setattribute()

这样就可以在jsp页面中显示了。

谁能给我安排这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:53:33.513

只需使用查询字符串中的数据链接到 servlet。

```
<a href="/path/to/servlet?dataKey=dataValue"> Link text </a> 
```

# python - Django：将 ManyToManyField 转换为 ForeignKey

> ID：13953838
> 
> 赞同：4
> 
> 时间：2012-12-19T13:49:44.643
> 
> 标签：python, django, django-models

假设我创建了两个模型：

```
class Car(models.Model):
    name =  models.CharField(max_length=50)
    size =  models.IntegerField()

class Manufacturer(models.Model):
    name =  models.CharField(max_length=50)
    country =  models.CharField(max_length=50)
    car = models.ManyToManyField(Car) 
```

我在两个模型中都添加了条目，然后我意识到每辆车只与一个唯一的制造商相关。因此，我应该将 ManyToManyField 转换为 ForeignKey：

```
class Car(models.Model):
    name =  models.CharField(max_length=50)
    size =  models.IntegerField()
    manufacturer = models.ForeignKey(Manufacturer)

class Manufacturer(models.Model):
    name =  models.CharField(max_length=50)
    country =  models.CharField(max_length=50) 
```

我怎样才能做到这一点而不会丢失我的条目？我试图查看 South 文档，但没有找到这种转换方式...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T13:56:30.580

这很重要，我认为您将需要三个迁移：

1.  添加`ForeignKey`.
2.  转换`ManyToMany`为`ForeignKey`（使用`forwards`方法）。
3.  删除`ManyToMany`.

您可以将 1 和 2 或 2 和 3 合并在一起，但我不建议这样做。
此外，您还应该`backwards`为 2 实现一个方法。

2\. 的一个**例子**`forwards`是：

```
class Migration(SchemaMigration):
    def forwards(self, orm):
        for manufacturer in orm.Manufacturer.objects.all():
             for car in manufacturer.car.all():
                  car.manufacturer = manufacturer
                  car.save() 
```

请注意：

*   这里还没有`backwards`方法。
*   这需要进行广泛的测试：迁移是您应该格外小心的事情。
*   如果汽车有两个制造商，则将保留最后一个。
*   这是非常低效的，我们对每个制造商的每辆车进行查询！

* * *

您还需要在步骤 2./3 中更新使用这些关系的代码。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-19T16:23:05.307

基于 Thomas Orozco 提供的出色答案，我想为 Django>=1.7 提供解决方案（基本上第 2 点将*ManyToMany 转换为 ForeignKey*是在较新版本的 Django 中有所不同）。所以这里是**第二次**迁移的代码：

```
class Migration(migrations.Migration):

    def migrate_m2m_to_fk(apps, schema_editor):
        Manufacturer = apps.get_model("app", "Manufacturer")
        for manufacturer in Manufacturer.objects.all():
             for car in manufacturer.car.all():
                  car.manufacturer = manufacturer
                  car.save()

    def migrate_fk_to_m2m(apps, schema_editor):
        Car = apps.get_model("app", "Car")
        for c in Car.objects.all():
            if c.manufacturer:
                c.manufacturer.car.add(c)
                c.manufacturer.save()

    operations = [
        migrations.RunPython(migrate_m2m_to_fk, migrate_fk_to_m2m)
    ] 
```

其中“app”是模型所在的 Django 应用程序。显示了正向和反向迁移代码（正如 Thomas 所提到的，如果事先存在多个关系，则运行此迁移可能会导致数据丢失，因此请注意）。

# asp.net - 为什么线程在 response.write 之前

> ID：13953841
> 
> 赞同：2
> 
> 时间：2012-12-19T13:49:53.737
> 
> 标签：asp.net, vb.net

当我运行代码时，response.write 之前的线程进程！为什么以及如何使它们按顺序排列？

```
insertUser.ExecuteNonQuery()
con.Close()
Response.Write("Done successfully ...")
Thread.Sleep(4000)
Response.Redirect("Default.aspx") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:20:03.383

响应是 Web 应用程序中的一次性事件。你不能“回应一点，做点别的，再回应一些”。当您考虑`Response.Redirect()`修改响应*标头之类的内容时尤其如此。*（基本上，`Response.Redirect()`将完全“破坏”您添加到响应中的任何内容，以便用户永远不会看到它。）

看起来您在这里尝试做的是：

1.  向用户显示一条消息。
2.  等待几秒钟。
3.  将用户发送到另一个页面。

有几种标准方法可以实现这一点。您可以使用包含步骤 1 的页面进行响应，该页面在客户端代码中执行步骤 2 和 3，或者您可以在服务器端代码中执行步骤 3，然后在第二个页面上执行步骤 1（可能还有两个，隐藏几秒钟后的消息）。

例如，假设您想在页面 A 上显示消息，等待几秒钟，然后将用户发送到页面 B。然后在页面 A 中您可能包含如下内容：

```
<script type="text/javascript">
    $(function() {
        $('#dialog-message').dialog({
            modal: true,
            buttons: {
                Ok: function() {
                    $(this).dialog('close');
                }
            },
            close: function() {
                window.location.href='Default.aspx';
            }
        });
    });
</script>
<div id="dialog-message">Done successfully ...</div> 
```

使用 jQuery，它的作用是向用户显示一个带有预期消息的对话框（使用[jQuery UI 对话框](http://jqueryui.com/dialog/)），当用户关闭对话框时，它会执行重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:53:18.820

您可以在代码中使用客户端功能来完成此操作，请参考以下链接

[http://social.msdn.microsoft.com/Forums/da/sharepointdevelopmentprevious/thread/087c6b95-fe8d-48ea-85e6-b7fbcb777a5c](http://social.msdn.microsoft.com/Forums/da/sharepointdevelopmentprevious/thread/087c6b95-fe8d-48ea-85e6-b7fbcb777a5c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T13:59:50.590

Web Response只有在webrequest处理完成后才会出现在页面上，即代码执行完成后才能看到响应。所以你的代码执行了正确的顺序。你可以通过insert Response.End()方法测试它，如下所示

```
insertUser.ExecuteNonQuery()
con.Close()
Response.Write("Done successfully ...")
Response.End();
Thread.Sleep(4000)
Response.Redirect("Default.aspx") 
```

# iphone - 将 UIView 移动到另一个 UIView

> ID：13953847
> 
> 赞同：4
> 
> 时间：2012-12-19T13:50:14.417
> 
> 标签：iphone, objective-c, ios, uiview

例如，我有一个`UIViewController`包含 2`UIScrollViews`的 , 。`scrollView1``scrollView2`

`scrollView1`包含很多`UIViews`，当点击其中一个时，`UIViews`我希望它进入`scrollView2`

当点击`UIView`属于 的a 时，将调用`scrollView1`内部的方法并将作为参数传递。`UIViewController``view`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T13:56:07.293

在该方法中，您应该编写如下内容：

```
[view removeFromSuperview];
[scrollView2 addSubview:view]; 
```

**编辑**：

对于动画移动，您应该尝试以下操作：

```
CGPoint originalCenter = [self.view convertPoint:view.center fromView:scrollView1];
[view removeFromSuperView];
[self.view addSubview:view];
view.center = originalCenter;

CGPoint destinationPointInSecondScrollView = ; // Set it's value
CGPoint finalCenter = [self.view convertPoint:destinationPointInSecondScrollView fromView:scrollView2];
[UIView animateWithDuration:0.3
                      delay:0
                    options:UIViewAnimationOptionCurveEaseInOut
                 animations:^{
                     view.center = finalCenter;
                 } completion:^(BOOL finished) {
                         [view removeFromSuperView];
                         [scrollView2 addSubview:view];
                         view.center = destinationPointInSecondScrollView;
                     }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:00:54.053

假设您将这两个滚动视图声明为属性：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UITapGestureRecognizer *gesture = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(viewTapped:)]
    for (UIView *view in self.scrollView1.subviews) {
        [view addGestureRecognizer:gesture];
    }
}

- (void)viewTapped:(UITapGestureRecognizer *)gesture
{
    UIView *view = gesture.view;
    [self moveToScrollView2:view];
}

- (void)moveToScrollView2:(UIView *)view
{
    [view removeFromSuperview];
    [self.scrollView2 addSubview:view];
} 
```

# jquery - 使用 jQuery 选择 JSF SelectOneMenu 的选项

> ID：13953854
> 
> 赞同：0
> 
> 时间：2012-12-19T13:50:39.573
> 
> 标签：jquery, jsf, selectonemenu

我有一个 JSF `selectOneMenu`，需要使用 jQuery 动态选择选项 2（共 3 个）。我使用`$('[id$=tripple_choice]').show();` `$('[id$=tripple_choice]').hide();`来显示/隐藏整个菜单。

更新：

生成的 HTML 是：

```
<select name="view:custform:tripple_choice" size="1" class="" id="view:custform:tripple_choice">
  <option value="" selected="true">-- Select --</option>
  <option value="opt1">opt1</option>
  <option value="opt2">opt2</option>
</select> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:54:47.137

大概是这样的吧？

```
$('[id$=tripple_choice]').eq(1).show(); 
```

`:eq`您也可以在选择器中使用表达式...

```
$('[id$=tripple_choice]:eq(1)').show(); 
```

...但这实际上是 jQuery 不鼓励的：

> 因为 :eq() 是 jQuery 扩展而不是 CSS 规范的一部分，所以使用 :eq() 的查询不能利用原生 DOM querySelectorAll() 方法提供的性能提升。为了在现代浏览器中获得更好的性能，请改用 $("your-pure-css-selector").eq(index) 。

更新：在您的情况下，您需要更新`selectedIndex`HTMLSelectObject 的属性。用这条线就完成了...

```
$('[id$=tripple_choice]')[0].selectedIndex = 1; 
```

# c++ - C++中多维数组的问题再次出现

> ID：13953855
> 
> 赞同：3
> 
> 时间：2012-12-19T13:50:40.777
> 
> 标签：c++

我在反向调用中将多维数组传递给函数，如下所示：

```
template<int size>
void print_multidimension_array(int A[][size], int &cnt){
  if(cnt <= 0){
       return;
  }
  else{
      int (*B)[size];
      print_multidimension_array(B, cnt--);
  }

}
int main(int argc, const char * argv[])
{
  int A[3][3] = {{1,2,3}, {4,5,6}, {7,8,9}};
  int count = 5;
  print_multidimension_array(A, count);
} 
```

我没有得到任何编译错误，但是在我运行它之后，我被告知“没有匹配的函数来调用'print_multidimension_array'”。感谢您的任何帮助或建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T13:55:36.257

`cnt--`返回的旧值的*副本*`cnt`。这是一个不能绑定到引用的临时*右值*- 所以它不能用作函数的第二个参数。

我怀疑你想要`--cnt`. 这给出了一个引用新值的*左*值，它可以绑定到一个引用。

按值取参数将修复编译器错误；但是您仍然需要预先递减以避免无限循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T13:55:14.077

改变：

```
void print_multidimension_array(int A[][size], int &cnt){ 
```

至：

```
void print_multidimension_array(int A[][size], int cnt){ 
```

# android - Android、VideoView、内部存储

> ID：13953856
> 
> 赞同：2
> 
> 时间：2012-12-19T13:50:42.017
> 
> 标签：android, permissions, media-player, android-videoview, file-descriptor

目前我正在开发一个应用程序，该应用程序应该将视频下载到其内部存储中（不幸的是他们没有 sd 卡）并简单地播放它们。到目前为止我尝试过的是：

标准 VideoView，将 /data/data/.../file.mp4 设置为路径 - 不起作用。使用带有 SurfaceView 的 MediaPlayer，使用路径或文件描述符 - 不起作用。

我现在在这里有一个稍微修改过的 VideoView 版本，它有以下变化：

```
 if(mUri != null)
        {
            mMediaPlayer.setDataSource(mContext, mUri);
        }
        else
        {
            mMediaPlayer.setDataSource(mFd);
        } 
```

还有一个 setFD 方法允许我设置我的文件描述符。这比将整个 MediaPlayer/SurfaceView 放入我的活动更容易和更清洁 - imo。问题如下：

内部存储中的文件是这样创建的：

```
 FileInputStream fis = openFileInput(Downloader.TMP_FILENAME);
                FileOutputStream fos = openFileOutput(Downloader.FILENAME
                        + ext, Context.MODE_WORLD_READABLE);
                byte[] buf = new byte[2048];
                while (fis.read(buf) > 0) {
                    fos.write(buf);
                }
                fis.close();
                fos.close();
                deleteFile(Downloader.TMP_FILENAME);
                Log.d(TAG, "Replacement done!"); 
```

基本上它正在读取一个临时文件（因为我不想覆盖当前播放的文件..但这并不重要）并将其（在 onCompletion 之后）写入新文件，然后删除临时文件。

到目前为止，我已经在 3 种不同的 Android 版本和设备上对其进行了测试： - 装有 Android 2.2 的平板电脑 - 装有 Android 4.2 的 Nexus 7 - 装有 Android 4.1.2 的 HTC Sensation

它根本不起作用。它播放可以说视频的前 100 毫秒，包括。声音然后弹出一个弹出窗口，logcat告诉我：

```
12-19 14:33:48.074: W/MediaPlayer(5560): info/warning (3, 0)
12-19 14:33:48.074: I/MediaPlayer(5560): Info (3,0)
12-19 14:33:48.394: E/MediaPlayer(5560): error (1, -1007)
12-19 14:33:48.394: E/MediaPlayer(5560): Error (1,-1007) 
```

但我真的不知道这应该是什么意思。我在整个互联网上搜索它，我发现的只是“使用 WORLD_READABLE，它会解决问题！” 或“只使用文件描述符，似乎不在乎权限！”。但对我来说，它不起作用。

我真的很感激任何帮助。

编辑：

```
 FileInputStream fid = new FileInputStream((getFilesDir() + "/"
                    + Downloader.FILENAME + ext)));

            mVideoView.setVideoFD(fid.getFD()); 
```

This is how I add the File Descriptor to the MediaPlayer.

After reencoding the file, this is what I get:

```
12-19 15:06:45.664: E/MediaPlayer(7616): Unable to to create media player
12-19 15:06:45.664: W/System.err(7616): java.io.IOException: setDataSourceFD failed.: status=0x80000000
12-19 15:06:45.664: W/System.err(7616):     at android.media.MediaPlayer.setDataSource(Native Method)
12-19 15:06:45.664: W/System.err(7616):     at android.media.MediaPlayer.setDataSource(MediaPlayer.java:976) 
```

* * *

This is how I download it from my webserver:

```
Log.i(TAG, "Opening remote connection to " + mFile.getHost()
                + mFile.getPath());
        URLConnection c = mFile.openConnection();
        c.connect();
        final long lastModified = c.getLastModified();
        final String mExtension;
        if (c.getHeaderField("Content-Disposition") != null) {
            final String mFilename = c
                    .getHeaderField("Content-Disposition").split("=")[1];
            Log.i("Downloader", "Filename is " + mFilename
                    + ", split length is " + mFilename.split("\\.").length);
            mExtension = mFilename.split("\\.")[mFilename
                    .split("\\.").length - 1];
        } else {
            mExtension = "mp4";
        }

        InputStream is = c.getInputStream();

        Log.i(TAG, "Creating temporary local file");
        // create local temporary file
        FileOutputStream fos = mContext.openFileOutput(TMP_FILENAME,
                Context.MODE_WORLD_READABLE);

        // start reading
        byte[] buf = new byte[BUFFER_SIZE];
        int bytesRead = 0;
        int curRead = 0;
        Log.i(TAG, "Starting download.. to " + TMP_FILENAME);
        if (mDownloadChangeListener != null)
            mDownloadChangeListener.onDownloadStart();

        while ((curRead = is.read(buf)) > -1) {
            fos.write(buf);
            bytesRead += curRead;
        }
        Log.i(TAG, "Read " + bytesRead + " bytes in total.");
        Log.i(TAG, "Download finished!");
        // end of stream, tell app to rename file.
        if (mDownloadChangeListener != null)
            mDownloadChangeListener.onDownloadFinished(TMP_FILENAME,
                    mExtension);

        is.close();
        fos.close(); 
```

After downloading it, on the onDownloadFinished listener, I execute the following code:

```
 FileInputStream fis = openFileInput(Downloader.TMP_FILENAME);
                FileOutputStream fos = openFileOutput(Downloader.FILENAME
                        + ext, Context.MODE_WORLD_WRITEABLE);
                byte[] buf = new byte[2048];
                while (fis.read(buf) > 0) {
                    fos.write(buf);
                }
                fis.close();
                fos.close();
                deleteFile(Downloader.TMP_FILENAME);
                Log.d(TAG, "Replacement done!"); 
```

Any ideas what could possibly go wrong? My only other idea would be that it's because of the internal storage-thing.. but the error message says something else?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:55:38.617

Error `-1007` stands for [MEDIA_ERROR_MALFORMED](http://developer.android.com/reference/android/media/MediaPlayer.html#MEDIA_ERROR_MALFORMED). It means that the file you're trying to play doesn't conform to the file specification put down in the official documentation. Something is either wrong with the media you're receiving, or in your method of saving it.

Personally, your method of saving it looks fine to me, so I'm guessing that the source file itself is the problem.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T19:05:09.927

Found the solution. Every way I've tested worked probably, because all errors I received came from "wrong downloaded media files"...

```
while((curRead = in.read(buf)) {
   out.write(buf);
} 
```

Was simply missing a ",0 ,curRead" - all working now. It's obviously because read() can always return less than BUFFER_SIZE and then writes 0-bytes into the rest or something...

Thanks!

# java - 将一行映射到多个工作表中的行

> ID：13953865
> 
> 赞同：0
> 
> 时间：2012-12-19T13:51:10.440
> 
> 标签：java, apache-poi

我需要读取一个包含 3 张工作表的 Excel 文件，并且我需要将数据表示如下：例如，每行跨越所有 3 张工作表

```
row1 = sheet[0].getRow(1) +  sheet[1].getRow(1) + sheet[2].getRow(1) 
```

以下是我到目前为止所做的，但正如您所看到的，该行是每张纸定义的，这是错误的，我也需要它来从其他纸上获取数据。这怎么能优雅地完成？

```
LinkedHashMap<String, List<LinkedHashMap<String, Object>>> records = 
             new LinkedHashMap<String, List<LinkedHashMap<String, Object>>>();
for (int sIndex = 0; sIndex < wb.getNumberOfSheets(); sIndex++) {
                // System.out.println(sIndex);
                Sheet sheet = wb.getSheetAt(sIndex);
                String key;
                String value = null;
                List<LinkedHashMap<String, Object>> sheetRecords = new ArrayList<LinkedHashMap<String, Object>>();
                for (Row row : sheet) {

                    LinkedHashMap<String, Object> record = new LinkedHashMap<>();
                    for (Cell cell : row) {

                        switch (cell.getCellType()) {
                        case Cell.CELL_TYPE_STRING:
                            key = sheet.getRow(sheet.getFirstRowNum())
                                    .getCell(cell.getColumnIndex()).toString();
                            value = cell.getStringCellValue();
                            record.put(key, value);
                            sheetRecords.add(record);
                            break;
                        case Cell.CELL_TYPE_NUMERIC:
                            key = sheet.getRow(sheet.getFirstRowNum())
                                    .getCell(cell.getColumnIndex()).toString();
                            double number = cell.getNumericCellValue();

                            record.put(key, number);
                            sheetRecords.add(record);
                        case Cell.CELL_TYPE_BLANK:
                            break;
                        default:
                            break;
                        }

                    }

                }

                records.put(sheet.getSheetName(), sheetRecords);

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:12:15.690

您必须使用外部 for 循环按索引迭代行。在伪代码中：

```
maxRows := firstSheetInWorkbook->getNumberOfRows();
for (row := 0..maxRows)
   rowResult := new RowResult
   for (sheet := 0..maxSheets)
      rowResult->add(processRowForSheet(row, sheet)) 
```

# jquery - SlideToggle 不会在 Chrome 和/或 Safari 中下推内容

> ID：13953868
> 
> 赞同：0
> 
> 时间：2012-12-19T13:51:18.223
> 
> 标签：jquery, google-chrome, opera, slidetoggle

我有一个带有隐藏 div 的站点和一个链接，单击该链接时会显示隐藏的 div。

这适用于 PC 和 Mac 上的 IE 和 Firefox。但是，在 Safari、Opera 和 Chrome 中单击时，它不会将内容向下移动。

这是Javascript：

```
$(document).ready(function() {
    $(".slidingDiv").hide();
    $(".show_hide").show();

    $('.show_hide').click(function() {
        $(".slidingDiv").slideToggle(500);
        $('html,body').animate({
            scrollTop: $(".slidingDiv").offset().top + $('window').height()
        }, 1000);
    });
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:55:11.673

修复了问题！它根本不是 JQuery，只是 CSS 上用于 html 属性的溢出-x。

# styles - 隐藏 Disqus 2012 上的功能

> ID：13953879
> 
> 赞同：1
> 
> 时间：2012-12-19T13:52:08.660
> 
> 标签：styles, disqus

有没有办法从 Disqus 2012 面板中隐藏某些功能？我似乎在 Disqus 网站上找不到任何相关规定，但也没有提到如何去做。我特别想隐藏/停用的是：
- “为这个讨论加注星标”链接
- 订阅（到电子邮件）链接
- 添加到 RSS 提要链接
- “分享这个讨论”链接

这些功能对于网站来说是不必要的我正在努力，我希望设计尽可能简单。引入 Disqus 面板的 iframe 似乎忽略了我自己的 CSS 样式表；设置要显示的元素之一： none 似乎没有效果，即使在文档准备好后使用 jQuery 也是如此。
想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:52:20.063

我们在 iframe 中加载 Disqus，因此不能将样式强加于嵌入的标记。我们确实提取了字体样式/颜色和锚点颜色以帮助使其适应嵌入的站点，但我们不允许删除任何元素。

我们这样做是为了促进一致性，因此我们看到了更好的整体参与度。我们确实理解某些元素并不适合每个站点，但它们在 Disqus 生态系统中具有非常深思熟虑的目的。

# c# - 何时在 asp.net 自定义服务器控件中绑定数据

> ID：13953885
> 
> 赞同：1
> 
> 时间：2012-12-19T13:52:31.410
> 
> 标签：c#, asp.net, data-binding, custom-server-controls

我们的网站解决方案中有许多 asp.net 自定义服务器控件。其中大部分是从 DropDownList 继承、调用存储过程并绑定到结果的类文件。现在我正在尝试优化它们，但很难找出最好的工作地点。

这里的目标是执行数据库查询零次或一次。

零：某些具有自定义服务器控件的页面实际上最终会根据某些变量在页面加载时隐藏它们。因此，如果我将绑定代码放在控件的页面加载（或页面初始化）中，即使托管页面从不显示它，它也会触发，如果不需要，我不想执行查询工作。

一：所以，我已经尝试通过覆盖控件中的 RenderContents 事件来进行绑定。这似乎解决了如果托管页面隐藏控件，则该事件不会触发的问题。但是，如果控件在页面*上*可见，则它会触发并且控件绑定。但是......它也会在每次回发时触发，我只想进行一次数据库查询。因此，通常，在第一次通过时，我会将 DataTable 存储在 ViewState 中，然后随后使用它。

但我的测试表明，如果我在 RenderContents 方法中设置 ViewState，那么它似乎在后续回发中不存在（参见下面的代码示例）。并且每次都会发生数据库查找（这是我试图避免的）。

我假设在页面事件生命周期中为时已晚，.NET 无法注意到它。

任何指导将不胜感激！

```
protected override void RenderContents(System.Web.UI.HtmlTextWriter writer)
    {
        buildList();
        base.RenderContents(writer);
    }

    private void buildList()
    {
        DataTable dt;

        if (ViewState["data"] == null)
        {
            dt = GetData();         // assume this executes a stored proc on SQL Server and returns a DataTable of results
            ViewState["data"] = dt;
        }
        else
        {
            dt = (DataTable)ViewState["data"];
        }

        this.DataSource = dt;
        this.DataTextField = "Description";
        this.DataValueField = "ID";
        this.DataBind();
    } 
```

# android - 自动启动和通知栏

> ID：13953887
> 
> 赞同：0
> 
> 时间：2012-12-19T13:52:37.850
> 
> 标签：android

我创建了一个应用程序，在启动完成后启动一个意图、一个警报管理器和一个通知栏。重新启动后，通知类运行，但在固定时间我没有在栏上看到通知。

另一个问题：我可以从 Notify 类启动通知栏而不调用 AlarmReceiver 类吗？

自动启动

```
public class AutoStart extends BroadcastReceiver{

@Override
public void onReceive(Context context, Intent intent) {
        Intent i = new Intent(context, Notify.class);  
        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(i);  
} 
```

通知

```
public class Notify extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

Calendar cal1 = Calendar.getInstance();
cal1.set(Calendar.HOUR_OF_DAY, 05);
cal1.set(Calendar.MINUTE, 45);
cal1.set(Calendar.SECOND, 00);

Calendar cal2 = Calendar.getInstance();
cal2.set(Calendar.HOUR_OF_DAY, 17);
cal2.set(Calendar.MINUTE, 30);
cal2.set(Calendar.SECOND, 00);

Calendar now = Calendar.getInstance();
if(now.after(cal1))
    cal1.add(Calendar.HOUR_OF_DAY, 24);
if(now.after(cal2))
    cal2.add(Calendar.HOUR_OF_DAY, 24);

Intent intent = new Intent(this, AlarmReceiver.class);
PendingIntent morningAlarm = PendingIntent.getBroadcast(getApplicationContext(), 0, intent, 0);
PendingIntent eveningAlarm = PendingIntent.getBroadcast(getApplicationContext(), 1, intent, 0);

AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, cal1.getTimeInMillis(), DateUtils.DAY_IN_MILLIS, morningAlarm);
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, cal2.getTimeInMillis(), DateUtils.DAY_IN_MILLIS, eveningAlarm); 
```

报警接收器：

```
public class AlarmReceiver extends BroadcastReceiver {

    final String not1[] = new String[37];
    int not1end = 36;
    int x;

    public void onReceive(Context context, Intent intent) {

not1[0]="one";
        not1[1]="two";
        not1[2]="three";

     String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(ns);

        int icon = R.drawable.ic_launcher;
        CharSequence tickerText = "Votre vidange approche";
        long when = System.currentTimeMillis();

        Notification notification = new Notification(icon, tickerText, when);

        CharSequence contentTitle = "Notification";
        CharSequence contentText = "Vérifier votre kilométrage";
        Intent notificationIntent = new Intent("org.gortcloud.perledisaggezza");
//        PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
        PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);

        notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

        final int HELLO_ID = 1;

        mNotificationManager.notify(HELLO_ID, notification);
     } 
```

显现

```
<receiver 
    android:name=".Notify"
    android:exported="false" >
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver>

<receiver android:name="AlarmReceiver" >
            <intent-filter>
                <action android:name="com.example.AlarmReceiver" />
            </intent-filter>

<intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:20:09.893

在`AlarmReceiver.onReceive()`您创建`Notification`对象时，您从不排队。你需要这样调用`NotificationManager.notify()`：

```
mNotificationManager.notify(MY_NOTIFICATION_ID, notification); 
```

其中`MY_NOTIFICATION_ID`是任何整数值。稍后，如果您需要取消通知，您将使用此值，如下所示：

```
mNotificationManager.cancel(MY_NOTIFICATION_ID); 
```

# android - Facebook分享小姐EXTRAS

> ID：13953892
> 
> 赞同：3
> 
> 时间：2012-12-19T13:53:10.740
> 
> 标签：android, facebook

我正在做一个在社交网络中共享内容的应用程序。我使用这段代码：

```
final Intent intent = new Intent(Intent.ACTION_SEND);
 intent.setType("text/plain");
 intent.putExtra(Intent.EXTRA_SUBJECT, subject);
 intent.putExtra(Intent.EXTRA_TEXT, text);
 ctx.startActivity(Intent.createChooser(intent, ctx.getString(R.string.tit_share))); 
```

但是当 Facebook 打开时，它不会显示 EXTRA_TEXT。

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:00:26.160

这是适用于 Android 的 Facebook 应用程序的问题。他们不支持这种共享。您必须在您的应用程序中使用 facebook API。

# javascript - 传单：添加标记的链接

> ID：13953895
> 
> 赞同：8
> 
> 时间：2012-12-19T13:53:20.797
> 
> 标签：javascript, maps, leaflet

非常简单的问题：如何使 Leaflet 中的地图标记可点击并将用户路由到其他页面？每个标记都有自己的页面。

我尝试了以下但没有成功；不知何故，所有标记都指向同一个页面，这是最后分配的 URI。

```
var markers = [
    { coords: [51.505, -0.09], uri: '/some-page' },
    ...
];

for(x in markers)
{
    L.marker(markers[x].coords).on('click', function() {
        window.location = markers[x].uri;
    }).addTo(map);
} 
```

这个问题真的让我抓狂。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T15:38:36.797

好的，我终于找到了解决方案；当标记添加到地图时，它会被分配一个名为“_leaflet_id”的 ID。这可以通过目标对象获取，也可以在添加到地图*后设置为自定义值。*

所以最终的解决方案很简单：

```
var x = markers.length;

while(x--)
{
    L.marker(markers[x].coords).on('click', function(e) {
        window.location = markers[e.target._leaflet_id].uri;
    }).addTo(map)._leaflet_id = x;
} 
```

（我用反向的while循环替换了for-in循环）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-23T18:14:05.500

您还可以使用可以显示 HTML 的弹出窗口

marker.bindPopup(htmlString);

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-18T09:00:27.007

我发现了一个类似的代码可以帮助你。这是 jsfiddle 链接[http://jsfiddle.net/farhatabbas/qeJ78/](http://jsfiddle.net/farhatabbas/qeJ78/)

```
 $(document).ready(function () {
        init_map();
        add_marker();
    });
    var map;

    function init_map() {
        map = L.map('map').setView([37.8, -96], 4);
        L.tileLayer('http://{s}.tile.cloudmade.com/{key}/22677/256/{z}/{x}/{y}.png', {
            attribution: 'Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2012 CloudMade',
            key: 'BC9A493B41014CAABB98F0471D759707'
        }).addTo(map);
    }

    function add_marker() {
        var points = [
            ["P1", 43.059908, -89.442229, "http://www.url_address_01.com/"],
            ["P2", 43.058618, -89.442032, "http://www.url_address_02.com/"],
            ["P3", 43.058618, -86.441726, "http://www.url_address_03.com/"]
        ];
        var marker = [];
        var i;
        for (i = 0; i < points.length; i++) {
            marker[i] = new L.Marker([points[i][1], points[i][2]], {
                win_url: points[i][3]
            });
            marker[i].addTo(map);
            marker[i].on('click', onClick);
        };
    }

    function onClick(e) {
        console.log(this.options.win_url);
        window.open(this.options.win_url);
    } 
```

# r - 加载 ffdf 数据占用大量内存

> ID：13953901
> 
> 赞同：1
> 
> 时间：2012-12-19T13:53:45.857
> 
> 标签：r

我面临一个奇怪的问题：我`ffdf`使用保存数据

```
save.ffdf() 
```

从`ffbase`包中，当我在新的 R 会话中加载它们时，做

```
load.ffdf("data.f") 
```

与 R中的对象相同的数据相比，它被加载到 RAM 中大约 90% 的内存`data.frame`。遇到这个问题，使用它没有多大意义`ffdf`，不是吗？我不能使用`ffsave`，因为我在服务器上工作并且上面没有 zip 应用程序。

```
packageVersion(ff) # 2.2.10
packageVersion(ffbase) # 0.6.3 
```

有什么想法吗？

*[编辑]一些代码示例以帮助澄清：*

```
data <- read.csv.ffdf(file = fn, header = T, colClasses = classes) 
# file fn is a csv database with 5 columns and 2.6 million rows,
# with some factor cols  and some integer cols. 
data.1 <- data 
save.ffdf(data.1 , dir = my.dir) # my.dir is a string pointing to the file. "C:/data/R/test.f" for example. 
```

关闭 R 会话...再次打开：

```
load.ffdf(file.name) # file.name is a string pointing to the file. 
#that gives me object data, with class(data) = ffdf. 
```

然后我有一个数据对象 ffdf[5] ，它的内存大小几乎和：

```
data.R <- data[,] # which is a data.frame. 
```

*[编辑结束]*

*** [第二次编辑::完整的可复制代码:::]

由于我的问题还没有回答，我仍然发现问题，我举一个可重现的例子::

```
dir1 <- 'P:/Projects/RLargeData';
setwd(dir1);
library(ff)
library(ffbase)

memory.limit(size=4000)
N = 1e7; 
df <- data.frame( 
 x = c(1:N), 
 y = sample(letters, N, replace =T), 
 z = sample( as.Date(sample(c(1:2000), N, replace=T), origin="1970-01-01")),
 w = factor( sample(c(1:N/10) , N, replace=T))   )

df[1:10,]
dff <- as.ffdf(df)
head(dff)
#str(dff)

save.ffdf(dff, dir = "dframeffdf")
dim(dff)
# on disk, the directory "dframeffdf" is : 205 MB (215.706.264 bytes)

### resetting R :: fresh RStudio Session 
dir1 <- 'P:/Projects/RLargeData';
setwd(dir1);
library(ff)
library(ffbase)
memory.size() # 15.63 
load.ffdf(dir = "dframeffdf")
memory.size() # 384.42
gc()
memory.size() # 287 
```

所以我们有 384 Mb 的内存，在 gc() 之后有 287，这大约是磁盘中数据的大小。（也在 Windows 的“进程资源管理器”应用程序中检查）

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: i386-w64-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=Danish_Denmark.1252  LC_CTYPE=Danish_Denmark.1252    LC_MONETARY=Danish_Denmark.1252 LC_NUMERIC=C                    LC_TIME=Danish_Denmark.1252    

attached base packages:
[1] tools     stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] ffbase_0.7-1 ff_2.2-10    bit_1.1-9 
```

***[结束第二次编辑]***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:24:09.533

在 ff 中，当您有因子列时，因子水平始终在 RAM 中。ff 字符列当前不存在，字符列被转换为 ffdf 中的因子。

关于您的示例：“dff”中的“w”列包含超过 6 个 Mio 级别。这些级别都在 RAM 中。如果您没有具有很多级别的列，您将不会看到 RAM 增加，如下所示，使用您的示例。

```
N = 1e7; 
df <- data.frame( 
 x = c(1:N), 
 y = sample(letters, N, replace =T), 
 z = sample( as.Date(sample(c(1:2000), N, replace=T), origin="1970-01-01")),
 w = sample(c(1:N/10) , N, replace=T))   
dff <- as.ffdf(df)
save.ffdf(dff, dir = "dframeffdf")

### resetting R :: fresh RStudio Session 
library(ff)
library(ffbase)
memory.size() # 14.67
load.ffdf(dir = "dframeffdf")
memory.size() # 14.78 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:34:11.550

ffdf 包具有在“物理”和“虚拟”存储中隔离对象的机制。我怀疑您是在物理内存中隐式构造项目，但是由于您没有提供有关如何创建此工作区的编码，因此只能进行很多猜测。

# apache - php YII Apache2 或 Nginx

> ID：13953904
> 
> 赞同：1
> 
> 时间：2012-12-19T13:54:06.210
> 
> 标签：apache, nginx, yii, apache2

我对 YII 完全陌生，我想在这个框架上进行自我教育。

但是首先，我应该将 Nginx 的 Apache2 与 YII 一起使用吗？有一个页面提供有关两者的信息，但没有选择哪个（[http://www.yiiframework.com/doc/guide/1.1/en/quickstart.apache-nginx-config](http://www.yiiframework.com/doc/guide/1.1/en/quickstart.apache-nginx-config)）

你们有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T23:07:29.770

任何一个都可以正常工作。Apache 往往得到更好的了解和更广泛的支持。如果内存不是您的开发盒的问题，请选择 Apache，它可以更快地启动和运行。

如果您需要尽可能快地运行您的服务器，Nginx 是一个不错的选择。

因为您只是想自学，所以使用 Apache 可能更简单。

# jquery - 带有域字段的 CORS cookie 仅在使用 jQuery AJAX 的 Firefox 中设置

> ID：13953908
> 
> 赞同：10
> 
> 时间：2012-12-19T13:54:43.300
> 
> 标签：jquery, ajax, cookies, cross-domain

`domain`使用跨站点请求添加归档时，我无法设置 cookie 。我试图通过 jquery ajax 调用请求来实现这一点。

是否有可能让它在Firefox以外的其他浏览器中工作？

**一些请求标头：**

```
Accept:application/json, text/javascript, */*; q=0.01
Content-Length:55
Content-Type:application/x-www-form-urlencoded; charset=UTF-8
Host:localhost:53862
Origin:http://localhost:54265
Referer:http://localhost:54265/ 
```

**响应标头：**

```
Access-Control-Allow-Credentials:true
Access-Control-Allow-Headers:x-requested-with, origin, content-type, accept, Proxy-Connection
Access-Control-Allow-Methods:GET,POST,PUT,OPTIONS, DELETE
Access-Control-Allow-Origin:http://localhost:54265
Set-Cookie:Auth=l_hash=123456&user=xyzl&remember_me=false; expires=Fri, 18 Jan 2013 13:42:10 GMT; domain=localhost; path=/ 
```

**代码：**

```
$.ajax({
    type: "PUT",
    url: apiHost + "api/account/login/",
    data: $("#loginBarForm").serialize(),
    dataType: "json",
    contentType: "application/x-www-form-urlencoded; charset=UTF-8",
    crossDomain: true,

    xhrFields: {
        withCredentials: true
    },
}); 
```

Firefox中的一切都很好。Chrome 没有设置 cookie。仅当域字段被删除时，所有浏览器都可以正常工作。我可以看到在下一个请求中（设置 cookie 之后）该 cookie 出现在标题中。响应设置 cookie 后的 firefox 请求示例（当响应具有域字段时）：

```
Cookie: Auth=l_hash=123456&user=xyz&remember_me=false 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T07:33:45.553

我认为问题可能出在`localhost`，这不是`Set-Cookie`标头的有效域。根据[RFC](http://www.ietf.org/rfc/rfc2109.txt)，它必须包含至少一个“嵌入式”点。FireFox 可能会以一种限制较少的方式实现这一点。请尝试使用您的 IP 地址。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-19T12:59:28.377

我遇到了同样的问题，结果是浏览器设置阻止了第三方 cookie（Chrome > 设置 > 高级设置 > 隐私 > 内容设置 > 阻止第三方 cookie 和站点数据）。允许cookies解决了这个问题！

# linux - UNIX 域 STREAM 和 DATAGRAM 套接字之间的区别？

> ID：13953912
> 
> 赞同：70
> 
> 时间：2012-12-19T13:54:55.977
> 
> 标签：linux, sockets, unix, tcp, udp

这个问题**不是**针对 STREAM 类型和 DATAGRAM 类型 INTERNET 套接字之间的区别。我知道 STREAM 套接字使用 TCP，数据报套接字使用 UDP 以及所有 TCP、UDP 内容、按顺序到达的数据包、ACK、NACK 等。我了解这些在互联网上的重要性。

Q1) 当我创建一个本地套接字的 UNIX 域套接字时，该套接字是 STREAM 套接字还是 DATAGRAM 套接字有什么关系。这种类型的套接字会将数据写入套接字文件，在这种情况下协议是否重要，因为我没有通过网络传输数据？如果我使用基于 UNIX 的 DATAGRAM 套接字，在这种情况下是否有可能丢失数据？

Q2) UNIX DATAGRAM 套接字是否提供比 UNIX STREAM 套接字更好的性能？

Q3) 如何在我的应用程序中决定使用基于 STREAM/DATAGRAM UNIX 的套接字？

谢谢

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-12-19T14:31:16.930

正如[手册页](http://www.kernel.org/doc/man-pages/online/pages/man7/unix.7.html)所说，Unix 套接字总是可靠的。`SOCK_STREAM`和之间的区别在于`SOCK_DGRAM`从套接字中消费数据的语义。

流套接字允许读取任意数量的字节，但仍保留字节序列。换句话说，发送者可能会向套接字写入 4K 的数据，而接收者可以逐字节地使用该数据。反之亦然——发送方可以将几条小消息写入套接字，接收方可以在一次读取中使用这些消息。流套接字不保留消息边界。

另一方面，数据报套接字确实保留了这些边界 - 发送方的一次写入始终对应于接收方的一次读取（即使接收方的缓冲区给予[`read(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/read.2.html)或[`recv(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/recv.2.html)小于该消息）。

因此，如果您的应用程序协议包含具有已知消息大小上限的小消息，那么您最好使用它，`SOCK_DGRAM`因为这样更易于管理。

如果您的协议需要任意长的消息负载，或者只是一个非结构化流（如原始音频或其他内容），则选择`SOCK_STREAM`并执行所需的缓冲。

性能应该是相同的，因为这两种类型都只是通过本地内核内存，只是缓冲区管理不同。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-19T15:59:41.490

主要区别在于一个是**基于****连接**的（`STREAM`**`DGRAM`**

 **您仍然可以获得所有连接处理，`SOCK_STREAM`即`listen`/`accept`并且您可以判断连接是否被另一方关闭。

请注意，还有一种`SEQPACKET`套接字类型仍然是面向连接的，但保留了消息边界（这可能使您免于在套接字之上实现面向消息的层`STREAM`）。

我希望所有这些类型的数据传输性能都相似，主要区别在于您想要什么语义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T14:30:23.040

1.  一个可能的区别是消息边界。数据报将作为一个整体交付，数据报是自然的消息边界。使用流套接字，您可以读取 N 个字节，并且套接字将阻塞，直到 N 个字节准备好。但这意味着没有明显的消息边界。

2.  一切都是平等的，如果速度是一个问题，仪器和措施。（我假设您已经知道只有流套接字提供内置的可靠按序传输，并且只有数据报套接字可以用于发送到*多个*接收器）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T05:51:38.550

如果客户端和服务器总是在同一台机器上，并且目标是最小延迟和最大带宽，请使用共享内存。**

# javascript - 如何在 Opera 12（适用于桌面 Windows）中查找页面宽度？

> ID：13953913
> 
> 赞同：2
> 
> 时间：2012-12-19T13:54:55.407
> 
> 标签：javascript, cross-browser, opera, browser-detection, document-body

我想在 Opera 中访问整个页面的宽度和高度。注意我不是在询问视口的高度或宽度，我想要页面/文档的宽度和高度。我正在使用 Opera 12.12

我尝试了以下方法：

1.  document.body.scrollWidth/Height
2.  document.body.offsetWidth/Height
3.  window.innerWidth/高度
4.  document.body.clientWidth/Height

所有这些都给出了视口的宽度/高度。

请使用以下链接：http: [//jsfiddle.net/RQhYR/](http://jsfiddle.net/RQhYR/)

或使用以下 HTML 页面

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<body>
    <div style="width:2000px;height:2000px;background-color: blue;"></div>
</body>
<script type="text/javascript">
    alert(window.outerWidth + "," + window.outerHeight);
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:59:03.803

试穿这些尺寸：

```
window.outerHeight;
window.outerWidth; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:30:05.147

我从`body.offsetWidth/Height`,`body.scrollWidth/Height`和`body.clientWidth/Height`(使用与您相同的构建) 中获取正确的值。只有[`window.innerWidth`](https://developer.mozilla.org/en-US/docs/DOM/window.innerWidth)/*应该*返回浏览器窗口视口[`Height`](https://developer.mozilla.org/en-US/docs/DOM/window.innerHeight)。

 *也许你有一些奇怪的 CSS 将 body 的尺寸设置为视口，并将滚动条放在内部某处的元素上。在您的情况下，我从 中获得 2000 x 2000 px 的预期值`scrollWidth/Height`，`<html>`请参阅[demo](http://jsfiddle.net/RQhYR/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T06:57:22.097

感谢[Bergi](https://stackoverflow.com/users/1048572/bergi)，我得到了问题的答案。我一直在对不同浏览器中的页面和视口大小进行一些调查，这就是我发现的：[Google Doc Spreadsheet](https://docs.google.com/spreadsheet/ccc?key=0AsiIb2IL4qASdDczbW56a1d6NFpPTTNXX1pjOHJpZFE)*

# javascript - 如何将 jQuery 方法应用于 javascript 声明的变量？

> ID：13953914
> 
> 赞同：1
> 
> 时间：2012-12-19T13:54:57.930
> 
> 标签：javascript, jquery

我声明：

`var iframe = document.createElement("iframe");`

现在我想使用这个 var`iframe`来应用 jQuery 方法：

```
 $("iframe").on("load", function () {
        // DO SOMETHING
    }); 
```

像这样是行不通的。我必须如何引用我的`iframe`var

更新：我不能更改`iframe`声明方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:56:51.607

您需要先将元素放入文档中，然后才能使用`$("iframe")`：

```
$(document).append(iframe); 
```

不过，可以在将元素放入 DOM 之前将处理程序添加到元素（您迟早必须这样做）。您只需将存储在的实际 DOMElement 传递`iframe`给`$`，而不是选择器字符串：

```
$(iframe).on("load", function () {
    // DO SOMETHING
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:56:44.557

我建议使用 JQuery 而不是 document.createElement 创建元素。

语法是

```
var iframe = $('<iframe>'); 
```

然后您可以访问 JQuery 函数而无需先包装它

```
iframe.on('load', function() {
    // Do Something
}); 
```

# blackberry-10 - 黑莓 10 未解决的包含

> ID：13953916
> 
> 赞同：7
> 
> 时间：2012-12-19T13:54:59.523
> 
> 标签：blackberry-10

我正在使用新版本的 Blackberry (Blackberry 10) 。我正在尝试将 c++ 代码与 QML 集成，但我遇到了一些我认为与其他 . 在.h 文件Q_OBJECT 中，Q_PROPERTY 信号和槽显示存在语法错误。在我尝试使用这种类型的 QML 文件中（例如，导入 CustomTimer 1.0）我遇到了这个问题 module "CustomTimer" is not installed 。这个问题怎么解决？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-13T02:03:53.687

I'm using QNX Momentics Version 10.1.0

I resolved my errors by right-clicking on my project folder, then selecting `Configure -> Add Library...`, and then choose Standard BlackBerry Platform Library. Choose the relevant library to include and click `Finish`.

For `QObject`, I found it under `Platform > Qt Core`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-01T09:52:10.727

我用以下方式纠正了这个问题：

1.  在 Project Explorer 中右键单击您的项目。
2.  转到索引。
3.  单击重建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-02T21:49:03.687

这对我有用：
我右键单击我的项目，并在下拉菜单中选择：

```
Index > Re-resolve Unresolved Includes
Index > Rebuild 
```

![索引 > 重新解析未解析的包含](../Images/35d5e1117a705e831a8208ebbc8a239f.png)

（使用 Momentics 2.1.1）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T04:39:28.903

对于您在 QNX Momentics 中报告的 Q_OBJECT 宏和其他 Qt 宏的语法错误，这些错误在更新到最新的 Momentics 和 SDK 版本后对我来说消失了。但是，仍有一些其他人似乎有此问题，并且一些解决方法已发布在 Blackberry 开发人员支持论坛中：

[http://supportforums.blackberry.com/t5/Cascades-Development/Beta-4-Momentics-IDE-autocompletion-does-not-work-for-Qt-classes/td-p/2014793](http://supportforums.blackberry.com/t5/Cascades-Development/Beta-4-Momentics-IDE-autocompletion-does-not-work-for-Qt-classes/td-p/2014793)

对于 QML 文件中的错误，我认为您在 QML 预览中遇到了一个已知限制，用于从 C++ 注册并导入 QML 的自定义组件。QML 预览只了解如何显示核心 Cascades 组件。这不应影响您的代码在模拟器或实际设备上的运行方式。

看：

[https://developer.blackberry.com/cascades/download/releasenotes/](https://developer.blackberry.com/cascades/download/releasenotes/)

在“已知限制”下：

> 带有 C++ 对象的 QML 预览 QML 预览可以加载和渲染仅基于 Cascades 插件的组件（在 bb.cascades 1.0 中）。QML 预览不理解在您的项目中以 C++ 注册的对象，并且无法加载和呈现。

在某些情况下，为了查看 QML 文档其余部分的预览，作为一种解决方法，您可以`import MyLibrary 1.0`在使用 QML 预览时将其注释掉。但是在某些情况下，这可能意味着注释掉一半的文档。对于非常基本的 QML 布局，通常在初始设计阶段之后，我发现构建和启动我的应用程序以查看实际工作的 QML UI 更有效。

# android - 使用 maven 构建时 APK 缺少一些类

> ID：13953917
> 
> 赞同：4
> 
> 时间：2012-12-19T13:54:59.350
> 
> 标签：android, maven, pom.xml

*这是[此问题](https://stackoverflow.com/questions/11264887/classnotfoundexception-in-apk-build-with-maven-android-maven-plugin)的副本，但该答案并不能解决我的问题。*

我的特定构建环境的一些背景：

我正在使用[Android maven 插件](http://code.google.com/p/maven-android-plugin/)和[这个](https://github.com/jayway/maven-android-plugin-samples)示例项目。该项目由一个 parent 组成`pom.xml`，然后是`pom.xml`三个子模块（项目）中的每一个。每个子模块都将父模块定义为父模块。

当我`mvn clean install`在原始下载的项目上运行时，它会在手机上构建和安装/运行良好。

但是我没有将源代码添加到 Eclipse 中，它运行良好以使 mvn 构建脚本不再工作（即 apk 更小并且缺少类）。

任何关于如何解决此问题的想法将不胜感激。

这是`POM`父级的文件，然后`POM`是应用程序项目的文件。*很抱歉发布这么大的代码块，但我不确定问题出在哪里。*

**更新**对于面临类似问题的人，我已经开始对位于[此处](https://groups.google.com/forum/?fromgroups=#!topic/maven-android-developers/kvajLrZLjpE)的 Google Group [Maven Android Developers] 进行转换。我可能会先在那里得到答案。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.simpligility.android.morse</groupId>
    <artifactId>morseflash-parent</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>pom</packaging>
    <name>MorseFlash - Parent</name>

    <properties>
        <server_schema>http</server_schema>
    </properties>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>junit</groupId>
                <artifactId>junit</artifactId>
                <version>4.8.1</version>
            </dependency>
            <dependency>
                <groupId>com.google.android</groupId>
                <artifactId>android</artifactId>
                <version>2.3.1</version>
            </dependency>
            <dependency>
                <groupId>com.google.android</groupId>
                <artifactId>android-test</artifactId>
                <version>2.3.1</version>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <build>

        <pluginManagement>
            <plugins>
                <plugin>
                    <artifactId>maven-jarsigner-plugin</artifactId>
                    <version>1.2</version>
                </plugin>
                <plugin>
                    <artifactId>maven-resources-plugin</artifactId>
                    <version>2.5</version>
                    <configuration>
                        <encoding>UTF-8</encoding>
                    </configuration>
                </plugin>

                <plugin>
                    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                    <artifactId>android-maven-plugin</artifactId>
                    <version>3.4.1</version>

                    <configuration>
                        <sdk>
                            <platform>10</platform>
                        </sdk>
                        <emulator>
                            <avd>23</avd>
                            <wait>10000</wait>
                            <!--<options>-no-skin</options> -->
                        </emulator>
                        <zipalign>
                            <verbose>true</verbose>
                        </zipalign>
                        <undeployBeforeDeploy>true</undeployBeforeDeploy>
                    </configuration>
                </plugin>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>build-helper-maven-plugin</artifactId>
                    <version>1.5</version>
                </plugin>
                <!--This plugin's configuration is used to store Eclipse m2e settings 
                    only. It has no influence on the Maven build itself. -->
                <plugin>
                    <groupId>org.eclipse.m2e</groupId>
                    <artifactId>lifecycle-mapping</artifactId>
                    <version>1.0.0</version>
                    <configuration>
                        <lifecycleMappingMetadata>
                            <pluginExecutions>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                                        <artifactId>android-maven-plugin</artifactId>
                                        <versionRange>[3.2.0,)</versionRange>
                                        <goals>
                                            <goal>manifest-update</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <execute />
                                    </action>
                                </pluginExecution>
                            </pluginExecutions>
                        </lifecycleMappingMetadata>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
    </build>

    <profiles>
        <profile>
            <!-- the standard profile runs the instrumentation tests -->
            <id>standard</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <modules>
                <module>morse-lib</module>
                <module>morseflash-app</module>
                <module>morseflash-instrumentation</module>
            </modules>
            <properties>
                <!-- when i will try to enter this address the app will start :) -->
                <!-- for development i want to use my local host -->
                <!-- server schema is defined globally for all profiles but can be overridden
                    here for the local profile -->
                <!-- this properties are good for all the maven modules -->
                <server_host>192.168.1.12</server_host>
                <server_path></server_path>
            </properties>
        </profile>
        <profile>
            <!-- the release profile does sign, proguard, zipalign ... but does not 
                run instrumentation tests -->
            <id>release</id>
            <!-- via this activation the profile is automatically used when the release 
                is done with the maven release plugin -->
            <activation>
                <property>
                    <name>performRelease</name>
                    <value>true</value>
                </property>
            </activation>
            <modules>
                <module>morse-lib</module>
                <module>morseflash-app</module>
            </modules>
            <properties>
                <!-- when i will try to enter this address the app will start :) -->
                <!-- for release i want to use my git -->
                <!-- server schema is defined globally for all profiles but can be overridden
                    here for the local profile -->
                <!-- this properties are good for all the maven modules -->
                <server_host>github.com</server_host>
                <server_path>/jayway/maven-android-plugin-samples</server_path>
            </properties>
        </profile>
    </profiles>

</project> 
```

现在对于应用程序项目：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>com.simpligility.android.morse</groupId>
        <artifactId>morseflash-parent</artifactId>
        <version>1.0.0-SNAPSHOT</version>
    </parent>

    <artifactId>morseflash-app</artifactId>
    <packaging>apk</packaging>
    <name>MorseFlash - App</name>

    <properties>
        <environment>development</environment>
    </properties>

    <dependencies>
        <dependency>
            <groupId>com.simpligility.android.morse</groupId>
            <artifactId>morse-library</artifactId>
            <version>${project.version}</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android-test</artifactId>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>

    <!-- <sourceDirectory>src</sourceDirectory> -->

    <finalName>${project.artifactId}</finalName>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <executions>
                    <execution>
                        <!-- use the copy resources instead of resources, which adds it to 
                            the eclipse buildpath -->
                        <phase>initialize</phase>
                        <goals>
                            <goal>copy-resources</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${project.basedir}/res</outputDirectory>
                            <resources>
                                <resource>
                                    <directory>${project.basedir}/src/templates/res</directory>
                                    <targetPath>${project.basedir}/res</targetPath>
                                    <filtering>true</filtering>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <extensions>true</extensions>
                <configuration>
                    <manifest>
                        <debuggable>true</debuggable>
                    </manifest>
                </configuration>
                <executions>
                    <execution>
                        <id>manifestUpdate</id>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>manifest-update</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>alignApk</id>
                        <phase>package</phase>
                        <goals>
                            <goal>zipalign</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <profiles>
        <profile>
            <id>development</id>
            <!-- using this since activeByDefault does not work well with multiple 
                profiles -->
            <activation>
                <property>
                    <name>environment</name>
                    <value>!production</value>
                </property>
            </activation>
            <properties>
                <deployment.stage>In Development</deployment.stage>
            </properties>
        </profile>
        <profile>
            <id>production</id>
            <properties>
                <deployment.stage>In Production</deployment.stage>
            </properties>
        </profile>
        <profile>
            <id>release</id>
            <!-- via this activation the profile is automatically used when the release 
                is done with the maven release plugin -->
            <activation>
                <property>
                    <name>performRelease</name>
                    <value>true</value>
                </property>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-jarsigner-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>signing</id>
                                <goals>
                                    <goal>sign</goal>
                                    <goal>verify</goal>
                                </goals>
                                <phase>package</phase>
                                <inherited>true</inherited>
                                <configuration>
                                    <removeExistingSignatures>true</removeExistingSignatures>
                                    <archiveDirectory />
                                    <includes>
                                        <include>${project.build.directory}/${project.artifactId}.apk</include>
                                    </includes>
                                    <keystore>${sign.keystore}</keystore>
                                    <alias>${sign.alias}</alias>
                                    <storepass>${sign.storepass}</storepass>
                                    <keypass>${sign.keypass}</keypass>
                                    <verbose>true</verbose>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                    <!-- the signed apk then needs to be zipaligned and we activate proguard 
                        and we run the manifest update -->
                    <plugin>
                        <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                        <artifactId>android-maven-plugin</artifactId>
                        <inherited>true</inherited>
                        <configuration>
                            <sign>
                                <debug>false</debug>
                            </sign>
                            <zipalign>
                                <skip>false</skip>
                                <verbose>true</verbose>
                                <inputApk>${project.build.directory}/${project.artifactId}.apk</inputApk>
                                <outputApk>${project.build.directory}/${project.artifactId}-signed-aligned.apk
                                </outputApk>
                            </zipalign>
                            <manifest>
                                <debuggable>false</debuggable>
                                <versionCodeAutoIncrement>true</versionCodeAutoIncrement>
                            </manifest>
                            <proguard>
                                <skip>false</skip>
                            </proguard>
                        </configuration>
                        <executions>
                            <execution>
                                <id>manifestUpdate</id>
                                <phase>process-resources</phase>
                                <goals>
                                    <goal>manifest-update</goal>
                                </goals>
                            </execution>
                            <execution>
                                <id>alignApk</id>
                                <phase>package</phase>
                                <goals>
                                    <goal>zipalign</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>build-helper-maven-plugin</artifactId>
                        <configuration>
                            <artifacts>
                                <artifact>
                                    <file>${project.build.directory}/${project.artifactId}-signed-aligned.apk</file>
                                    <type>apk</type>
                                    <classifier>signed-aligned</classifier>
                                </artifact>
                                <artifact>
                                    <file>${project.build.directory}/proguard/mapping.txt</file>
                                    <type>map</type>
                                    <classifier>release</classifier>
                                </artifact>
                            </artifacts>
                        </configuration>
                        <executions>
                            <execution>
                                <id>attach-signed-aligned</id>
                                <phase>package</phase>
                                <goals>
                                    <goal>attach-artifact</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>
</project> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T15:07:17.163

所以事实证明，我只是在 Eclipse 中手动设置项目时打乱了项目结构。一个同事偶然提到了这个`mvn eclipse:eclipse`命令，把我所有的问题都解决了。

参考[这个](https://github.com/jayway/maven-android-plugin-samples/tree/master/morseflash)示例项目。我做了以下工作以使一切在 Eclipse 和 Maven 中正常工作。

1.  `cd`进入每个项目 { morse-lib, morseflash-app, morseflash-instrumentation } 并运行`mvn eclipse:eclipse`。

2.  在 Eclipse 中单独导入每个项目。不是 *-app 和 *-instrumentation 是 Android 项目， *-lib 是 Java 项目。所有项目都应设置为 Java 编译器 1.6。

3.  对于Eclipse中的每个项目*右键单击*->*配置*->*转换为Maven*

4.  对于项目 { *-app, *-instrumentation }, *target/generated-sources/r -> 右键单击​​ -> 属性 -> 资源 -> 资源过滤器 -> 添加组 -> { 排除所有，文件和文件夹，所有子项（递归）* }

5.  *清理所有项目*然后*构建所有项目*

6.  您现在应该能够将*morseflash-app*项目作为 Android 应用程序运行。

7.  从*morseflash*文件夹（包含 *-lib、*-app、*-instrumentation）中的命令行，您应该能够执行`mvn clean install android:deploy`以在手机上获取应用程序。

希望这可以帮助其他人。如果没有，请联系我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:38:14.357

尝试升级到 3.5，我建议你去。我还将指定语言级别的源和目标。当我的 Eclipse 完全配置为不同的版本时，我曾经遇到过这样的问题。

```
<plugin>
    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
    <artifactId>android-maven-plugin</artifactId>
    <version>3.4.1</version>
    <configuration>
        <sdk>
            <platform>10</platform>
        </sdk>
        <configuration>
            <source>1.7</source>
            <target>1.7</target>
        </configuration>
        <emulator>
            <avd>23</avd>
            <wait>10000</wait>
            <!--<options>-no-skin</options> -->
        </emulator>
        <zipalign>
            <verbose>true</verbose>
        </zipalign>
        <undeployBeforeDeploy>true</undeployBeforeDeploy>
    </configuration>
</plugin> 
```

# java - 无法解析 Java 小程序项目中的 JSObject

> ID：13953920
> 
> 赞同：9
> 
> 时间：2012-12-19T13:55:03.047
> 
> 标签：java, javascript, applet, javafx-2, jsobject

我正在尝试调用`JSObject.getWindow(this)`的`init`方法，`JApplet`但它无法解析符号`getWindow`。

这个问题特别发生在通过 netbeans 创建的 javafx 应用程序项目中，如果在 java 应用程序项目中使用 getWindow 将得到解决。

我还包括了`plugin.jar`from path `Java\jdk1.7.0_07\jre\lib`。

这是我在 netbeans 中创建的 javafx 应用程序项目。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-23T09:17:16.097

原因是 jfxrt.lib 还有一个名为 JSObject 的类。这个 JSObject 没有定义 getWindow 函数，而 plugin.jar 有。如果你改变 JAR 的依赖顺序并使 java 将 JSObject 解析为 plugin.jar 那么 java 就可以调用 getWindow 函数。

以下是两个类的 javadocs 的链接。请注意，jfxrt 一个没有定义 getWindow。

[http://docs.oracle.com/javafx/2/api/netscape/javascript/JSObject.html](http://docs.oracle.com/javafx/2/api/netscape/javascript/JSObject.html)

[http://www.oracle.com/webfolder/technetwork/java/plugin2/liveconnect/jsobject-javadoc/netscape/javascript/JSObject.html](http://www.oracle.com/webfolder/technetwork/java/plugin2/liveconnect/jsobject-javadoc/netscape/javascript/JSObject.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T11:47:10.353

我正在使用 IntelliJ，只是遇到了类似的问题。

我认为正在发生的是 jfxrt.jar 和 plugin.jar 都有`netscape.javascript.JSObject`类，但是这两个类有不同的签名。IntelliJ 按字母顺序将 jre/lib 中的 jar 添加到类路径中。

通过告诉 IntelliJ 不要将 jfxrt.jar 添加到类路径中，我能够解决我的问题，因为我没有使用 JavaFX。

这表明JavaFX需要一种不同的方法来使用JSObject——我不是JavaFX的专家（甚至不是初学者），但下面的页面看起来很有用，并向我建议在JavaFX中调用Javascript的方式不同`WebEngine.executeScript()`：[https： //blogs.oracle.com/javafx/entry/communicating_between_javascript_and_javafx](https://blogs.oracle.com/javafx/entry/communicating_between_javascript_and_javafx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T13:59:03.910

你有`import netscape.javascript.*;`吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T16:46:52.210

> 试图调用`JSObject.getWindow(this)`该`init`方法

`JSObject`通常在被调用之前不可用`start()`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-08T05:49:37.510

@deorvatsingh 这是netbeans的问题，不是您添加jar的顺序。在 JavaFx 应用程序中，jfxar.jar 首先在 netbeans 案例中可见，这就是您无法获得范围的原因`JSObject.getWindow(this)`，

要使用 netbeans 和 fxappication 执行此操作，您首先添加 plugin.jar 然后将 jfxrt.jar 添加到您的应用程序中，然后它将识别。

# asp.net - asp.net 下拉列表转换为 MVC3 下拉列表

> ID：13953921
> 
> 赞同：1
> 
> 时间：2012-12-19T13:55:03.580
> 
> 标签：asp.net, asp.net-mvc-3, drop-down-menu

我在 asp.net 中有一个静态下拉列表，如下所示：

```
<asp:DropDownList runat="server" ID="ddlSource" Width="278px">
                    <asp:ListItem Value="NONE" Text="- Selct-" />
                    <asp:ListItem Text="" disabled="disabled">Old customer</asp:ListItem>
                    <asp:ListItem Text="got sms" Value="OLD_SMS" />
                    <asp:ListItem Text="got email" Value="OLD_EMAIL" />
                    <asp:ListItem Text="othe" Value="OLD_OTHER" />

                    <asp:ListItem Value="" disabled="disabled">Heard in radio</asp:ListItem>
                    <asp:ListItem Text="radio ad" Value="RADIO_AD" />
                    <asp:ListItem Text="radio programme" Value="RADIO_SHOW" />
                    <asp:ListItem Text="other" Value="RADIO_OTHER" />
          </asp:DropDownList> 
```

如何在 MVC3 中实现相同的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:01:26.660

如果它是一个静态列表，那么您需要做的就是：

```
<select id="ddlSource" style="width:278px;">
    <option value="NONE">- Selct-</option>
    <option disabled="disabled">Old customer</option>
    <option value="OLD_SMS">got sms</option>
  ....
</select> 
```

这只是简单的html。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T14:07:17.617

您可以使用`Html.DropDownList()`或`Html.DropDownListFor()`。两种方法都以 a`IEnumerable<SelectListItem>`作为参数。“for”选项采用`Func`指向模型中集合的 a，而非 for 选项直接采用集合。可以像这样创建一个集合：

```
var selectList = new SelectListItem[]
{
    new SelectListItem()
    {
        Selected = true,
        Text = "Text",
        Value = "Value"
    },

    new SelectListItem()
    {
        Selected = true,
        Text = "Text1",
        Value = "Value1"
    },
}; 
```

不用说，您也可以`<select><option>...`使用普通的旧 HTML 进行基本操作，但是通过将集合`SelectListItem`放入您的模型并使用`@Html.DropDownListFor()`，您可以利用使 MVC 如此出色的强类型模型绑定。

# c# - C#类中处理控制事件的问题

> ID：13953928
> 
> 赞同：0
> 
> 时间：2012-12-19T13:55:35.403
> 
> 标签：c#, visual-studio, visual-studio-2008

我在 class 中创建了一个包含诸如表单、按钮等的**类**。然后我在课堂上创建它们的句柄事件。看看下面我的类代码：

```
 public static class InputBox
    {
        static Form form = new Form();
        static Label label = new Label();
        static TextBox textBox = new TextBox();
        static Button buttonOk = new Button();
        static Button buttonCancel = new Button();
        public static DialogResult Show(string title, string promptText, ref string value)
        {
            form.Text = title;
            label.Text = promptText;
            textBox.Text = value;

            buttonOk.Text = "OK";
            buttonCancel.Text = "Cancel";
            buttonOk.DialogResult = DialogResult.OK;
            buttonCancel.DialogResult = DialogResult.Cancel;

            label.SetBounds(9, 20, 372, 13);
            textBox.SetBounds(12, 36, 372, 20);
            buttonOk.SetBounds(228, 72, 75, 23);
            buttonCancel.SetBounds(309, 72, 75, 23);

            label.AutoSize = true;
            textBox.Anchor = textBox.Anchor | AnchorStyles.Right;
            buttonOk.Anchor = AnchorStyles.Bottom | AnchorStyles.Right;
            buttonCancel.Anchor = AnchorStyles.Bottom | AnchorStyles.Right;

            form.ClientSize = new Size(396, 107);
            form.Controls.AddRange(new Control[] { label, textBox, buttonOk, buttonCancel });

            form.FormBorderStyle = FormBorderStyle.FixedDialog;
            form.StartPosition = FormStartPosition.CenterScreen;

            buttonOk.Click += new EventHandler(buttonOk_Click); //this is the handle code
            buttonCancel.Click += new EventHandler(buttonCancel_Click);//this is the handle code

            form.MinimizeBox = false;
            form.MaximizeBox = false;
            form.AcceptButton = buttonOk;
            form.CancelButton = buttonCancel;

            DialogResult dialogResult = form.ShowDialog();
            value = textBox.Text;
            return dialogResult;
        }

        static void buttonCancel_Click(object sender, EventArgs e)
        {
            form.Close();
        }

        static void buttonOk_Click(object sender, EventArgs e)
    {
        MessageBox.Show("If u click this, You Will Get many Messages as many as you call the class"); 
    }
    } 
```

然后，我在自己的表单代码中这样称呼它：

```
string strbuffer; // Global Variable

        InputBox.Show("Hi..?", "What Is Your Name?",ref strbuffer);
            //do something...
            InputBox.Show("Hi..?", "What Is Your Age?",ref strbuffer);
            //do something
            InputBox.Show("Hi..?", "How Many Cars do you have?",ref strbuffer);
            //do something 
```

如果我调用该类的次数与调用它的次数一样多，则旧处理程序将永远不会被释放，因此处理程序控制中的代码将与调用该类的次数一样多

**我猜当类不再使用时变量不会被释放所以变量总是在你每次调用它时累积**

**解决这种情况的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:02:53.927

我不确定你在问什么，但如果它的事件相关问题我会建议解除分配事件。

```
static void buttonCancel_Click(object sender, EventArgs e)
{
        form.Close();
    buttonOk.Click -= new EventHandler(buttonOk_Click); 
        buttonCancel.Click -= new EventHandler(buttonCancel_Click);
}

static void buttonOk_Click(object sender, EventArgs e)
{
    MessageBox.Show("If u click this, You Will Get many Messages as many as you call the class"); 
    buttonOk.Click -= new EventHandler(buttonOk_Click); 
    buttonCancel.Click -= new EventHandler(buttonCancel_Click);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T14:06:53.167

在这里，我将表单、标签、文本框等的静态变量移到了 Show 方法中。这意味着每次调用此方法时都会获得这些的新实例。因此，事件尚未附加到它。

然后事件处理程序必须更改为不引用静态表单（不再存在），所以我们从按钮中获取了对表单实例的引用。

```
public static class InputBox
        {

    public static DialogResult Show(string title, string promptText, ref string value)
    {
        Form form = new Form();
        Label label = new Label();
        TextBox textBox = new TextBox();
        Button buttonOk = new Button();
        Button buttonCancel = new Button();

        form.Text = title;
        label.Text = promptText;
        textBox.Text = value;

        buttonOk.Text = "OK";
        buttonCancel.Text = "Cancel";
        buttonOk.DialogResult = DialogResult.OK;
        buttonCancel.DialogResult = DialogResult.Cancel;

        label.SetBounds(9, 20, 372, 13);
        textBox.SetBounds(12, 36, 372, 20);
        buttonOk.SetBounds(228, 72, 75, 23);
        buttonCancel.SetBounds(309, 72, 75, 23);

        label.AutoSize = true;
        textBox.Anchor = textBox.Anchor | AnchorStyles.Right;
        buttonOk.Anchor = AnchorStyles.Bottom | AnchorStyles.Right;
        buttonCancel.Anchor = AnchorStyles.Bottom | AnchorStyles.Right;

        form.ClientSize = new Size(396, 107);
        form.Controls.AddRange(new Control[] { label, textBox, buttonOk, buttonCancel });

        form.FormBorderStyle = FormBorderStyle.FixedDialog;
        form.StartPosition = FormStartPosition.CenterScreen;

        buttonOk.Click += new EventHandler(buttonOk_Click); //this is the handle code
        buttonCancel.Click += new EventHandler(buttonCancel_Click);//this is the handle code

        form.MinimizeBox = false;
        form.MaximizeBox = false;
        form.AcceptButton = buttonOk;
        form.CancelButton = buttonCancel;

        DialogResult dialogResult = form.ShowDialog();
        value = textBox.Text;
        return dialogResult;
    }

    static void buttonCancel_Click(object sender, EventArgs e)
    {
        (sender as Button).FindForm().Close();
    }

    static void buttonOk_Click(object sender, EventArgs e)
{
    MessageBox.Show("If u click this, You Will Get many Messages as many as you call the class"); 
}
} 
```

# unicode - SQL db 从 ASCII 到 Unicode

> ID：13953930
> 
> 赞同：0
> 
> 时间：2012-12-19T13:55:41.193
> 
> 标签：unicode, sql-server-2008-r2, ascii, type-conversion

我的 SQL Server 2008 R2 数据库具有字符串列 (nvarchar)。一些旧数据显示 ASCII。我需要在我的站点中向用户展示它，并且我更喜欢将数据库中的数据转换为 Unicode。有没有快速的方法来做到这一点？我应该注意哪些缺点？

我的问题的例子：

在数据库中，我看到特殊字符而不是常规字符。我有一个应该是的用户名`Amédée`，而是显示`Am?d??`。

在其他情况下，我看到`&#x22;`的不是引号 ( `"`)，或者是字符`&#`而不是单词`"and"`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:57:45.470

我构建了以下功能：

```
 public static string FixString(string textString)
        {
            textString = Regex.Replace(textString, "[\t\r\n]*", String.Empty);
            textString = Regex.Replace(textString, "(\\&nbsp;)+", " ").Replace("  ", " ").Trim(); // .Replace("-", " ");
            textString = Regex.Replace(textString, "\\(.*?\\)", String.Empty);
            textString = HttpUtility.HtmlDecode(textString).Trim();
            textString = Regex.Replace(textString, "<.*?>", String.Empty);
            return textString;
        } 
```

那成功了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:08:39.763

好吧，如果您的数据库中有重音字符，那肯定不是 ASCII。首先找出您/他们在旧数据库中使用的代码页，并将其转换为 UTF-8，然后保存到新数据库。

# netbeans-7 - 在 netbeans 7 项目中导入库

> ID：13953933
> 
> 赞同：0
> 
> 时间：2012-12-19T13:55:44.330
> 
> 标签：netbeans-7

我在 netbeans 中的项目中添加了以下 jar 文件：

*json-lib-2.4-jdk15-sources.jar*

我通过右键单击“库”并单击“添加 JAR/文件夹”来做到这一点

我遇到的问题是当我尝试在我的代码中访问这个库时。我尝试以下方法：

`import net.sf.json.JSONObject;`

但我收到消息“包 net.sf.json.JSONObject 不存在”。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:56:28.680

好的，我刚刚想通了！

我导入了错误的 JSON jar 文件

文件 'json-lib-2.4-jdk15-sources.jar' 是错误的。

它应该是“json-lib-2.4-jdk15.jar”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:59:26.847

利用

> CTRL + SHIFT + 我

netbeans 会自动导入所需的库。

# geospatial - 可视化高分辨率数据

> ID：13953935
> 
> 赞同：1
> 
> 时间：2012-12-19T13:55:56.823
> 
> 标签：geospatial, data-visualization, data-warehouse

我正在寻找一种存储（利用 SQLServer2008）和可视化来自制造过程的高分辨率数据的方法。

这些数据与木条的表面有关。具体来说，我有高频收集的数据（每个木条测量 250 个工艺参数 3500 次），这些数据与木条的工艺参数和表面缺陷有关。

我想要回答如下查询： - 在包含数千条木条的整个生产周期内检索某个木材区域内的所有可用 HR 数据。或更好 - 在包含大量加工木条的生产期间检索木条特定区域（由 X、Y 坐标定义）内的所有高分辨率数据。

我知道 DW 解决方案的潜力，但我不知道经典 DW 是否有助于处理此类问题，或者对此进行一些空间假设的利用，即每次测量的 X 坐标。

谢谢，

恩科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:53:11.863

你可以试试：

```
create table strips (strip_id int primary key, [other strip parameters]);

create table parameters (parameter_id int primary key, parameter_description varchar(200));

create table strip_hr_data (strip_id int, parameter_id int, x int, y int, value whatever(), primary key(strip_id,parameter_id,x,y)); 
```

这样，您可以通过条获得任意数量的参数和任意数量的样本。

为了可视化您的数据，您

```
select strip_id, parameter_dscription ,x,y, value 
from strips a 
inner join strip_hr_data b on (a.strip_id = b.strip_id)
inner join parameters c on (b.parameter_id = c.parameter_id)
where (whatever filters you want...) 
```

以及 C&P 数据或 ODBC 数据以生成数据透视表。您将获得一个包含所有选定行程的表格，其中包含每个位置的参数值

向前迈出一步，您可以为每个参数创建维度并聚合数据，创建真正的 DW 而不仅仅是存储库。

干杯

# iphone - 如何在 UIscrollView 中以不同方式增加每个页面的高度

> ID：13953936
> 
> 赞同：1
> 
> 时间：2012-12-19T13:55:58.633
> 
> 标签：iphone, ios, ipad, cocoa-touch

我在单个 uiscrollView 中有四个页面，并且启用了分页。每个页面可能有不同的高度，我试图在 scrollViewDidEndDecelerating 委托中增加滚动视图的内容大小，但这对我没有帮助。

任何人都可以建议如何以不同的方式增加每个页面中滚动视图的内容大小吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:22:09.483

那是不可能的，内容大小是滚动视图的边界，是一个矩形，每个页面怎么会改变呢？为什么不缩放页面以使它们具有相同的大小并使用缩放？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:54:59.230

我不认为你可以在本地做到这一点。但是，您可以尝试禁用分页并手动执行。

有一个有用的委托方法：

`-(void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset;`

这让您可以设置 scrollView 将在何处结束其滚动。

```
-(void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset{
    float offsetY = floorf((*targetContentOffset).y);
    float yGoto = 0.0;

    // Find out, based on that offsetY in which page you are
    // and set yGoto accordingly to the start of that page
    // In the following example my pages are 320px each

    // I start by only allowing to go 1 page at a time, so I limit
    // how far the offsetY can be from the current scrollView offset

    if(offsetY > scrollView.contentOffset.y + 160){
        // Trying to scroll to more than 1 page after
        offsetY = scrollView.contentOffset.y + 160;
    }
    if(offsetY < scrollView.contentOffset.y - 160){
        // Trying to scroll to more than 1 page before
        offsetY = scrollView.contentOffset.y - 160;
    }
    if(offsetY < 0){
        // Trying to scroll to less than the first element
        // This is related to the elastic effect
        offsetY = 0;
    }
    if(offsetY > scrollView.contentSize.height-320){
        // Trying to scroll to more than the last element
        // This is related to the elastic effect
        offsetY = scrollView.contentSize.height - 1;
    }

    // Lock it to offsets that are multiples of 320
    yGoto = floorf(offsetY);
    if((int)offsetY % 320 > 160){
        int dif = ((int)offsetY % 320);
        yGoto = offsetY + 320 - dif;
    }else{
        int dif = ((int)offsetY % 320);
        yGoto = offsetY - dif;
    }

    yGoto = floorf(yGoto); // I keep doing this to take out non integer part
    scrollView.decelerationRate = UIScrollViewDecelerationRateFast;
    (*targetContentOffset) = CGPointMake(scrollView.contentOffset.x,yGoto);
} 
```

希望能帮助到你！

# jquery - 如何在javascript中强制添加而不是串联

> ID：13953939
> 
> 赞同：69
> 
> 时间：2012-12-19T13:56:07.877
> 
> 标签：jquery, scope, concatenation, addition

我正在尝试在我的 javascript 中添加所有卡路里内容，如下所示：

```
$(function() {
    var data = [];

    $( "#draggable1" ).draggable();
    $( "#draggable2" ).draggable();
    $( "#draggable3" ).draggable();

    $("#droppable_box").droppable({
        drop: function(event, ui) {
            var currentId = $(ui.draggable).attr('id');
            var total = 0;
            data.push($(ui.draggable).attr('id'));

            if(currentId == "draggable1"){
            var myInt1 = parseFloat($('#MealplanCalsPerServing1').val());
            }
            if(currentId == "draggable2"){
            var myInt2 = parseFloat($('#MealplanCalsPerServing2').val());
            }
            if(currentId == "draggable3"){
            var myInt3 = parseFloat($('#MealplanCalsPerServing3').val());
            }
        if ( typeof myInt1 === 'undefined' || !myInt1 ) {
        myInt1 = parseInt(0);
        }
        if ( typeof myInt2 === 'undefined' || !myInt2){
        myInt2 = parseInt(0);
        }
        if ( typeof myInt3 === 'undefined' || !myInt3){
        myInt3 = parseInt(0);
        }
        total = parseFloat(myInt1 + myInt2 + myInt3);
        $('#response').append(total);
        }
    });
    $('#myId').click(function(event) {
        $.post("process.php", ({ id: data }), function(return_data, status) {
            alert(data);
            //alert(total);
        });
    });
}); 
```

他们没有添加变量，而是将它们连接起来。我尝试过使用 parseInt、parseFloat 和 Number，但我仍然只是得到连接而不是加法。请查看[http://maureenmoore.com/momp_112412/121912_800.html上的视图源](http://maureenmoore.com/momp_112412/121912_800.html)

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-12-19T13:59:19.697

您的代码连接三个字符串，然后将*结果*转换为数字。

您需要通过调用每个变量将**每个变量**`parseFloat()`转换为一个数字。

```
total = parseFloat(myInt1) + parseFloat(myInt2) + parseFloat(myInt3); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-03-28T03:14:03.393

也应该能够做到这一点：

```
total += eval(myInt1) + eval(myInt2) + eval(myInt3); 
```

这帮助了我在不同但相似的情况下。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T14:21:34.683

以下语句将值附加到 id 为的元素`response`

```
$('#response').append(total); 
```

这使得您看起来像是在连接字符串，但实际上并非如此，您实际上是在将它们附加到元素

将其更改为

```
$('#response').text(total); 
```

您需要更改 drop 事件，以便将元素的值替换为总数，您还需要跟踪总数是多少，我建议如下

```
$(function() {
    var data = [];
    var total = 0;

    $( "#draggable1" ).draggable();
    $( "#draggable2" ).draggable();
    $( "#draggable3" ).draggable();

    $("#droppable_box").droppable({
        drop: function(event, ui) {
        var currentId = $(ui.draggable).attr('id');
        data.push($(ui.draggable).attr('id'));

        if(currentId == "draggable1"){
            var myInt1 = parseFloat($('#MealplanCalsPerServing1').val());
        }
        if(currentId == "draggable2"){
            var myInt2 = parseFloat($('#MealplanCalsPerServing2').val());
        }
        if(currentId == "draggable3"){
            var myInt3 = parseFloat($('#MealplanCalsPerServing3').val());
        }
        if ( typeof myInt1 === 'undefined' || !myInt1 ) {
            myInt1 = parseInt(0);
        }
        if ( typeof myInt2 === 'undefined' || !myInt2){
            myInt2 = parseInt(0);
        }
        if ( typeof myInt3 === 'undefined' || !myInt3){
        myInt3 = parseInt(0);
        }
        total += parseFloat(myInt1 + myInt2 + myInt3);
        $('#response').text(total);
        }
    });

    $('#myId').click(function(event) {
        $.post("process.php", ({ id: data }), function(return_data, status) {
            alert(data);
            //alert(total);
        });
    });
}); 
```

我将`var total = 0;`语句从 drop 事件中移出，并从此更改了赋值语句

```
total = parseFloat(myInt1 + myInt2 + myInt3); 
```

对此

```
total += parseFloat(myInt1 + myInt2 + myInt3); 
```

这是一个工作示例[http://jsfiddle.net/axrwkr/RCzGn/](http://jsfiddle.net/axrwkr/RCzGn/)

# windows-8 - Windows 8 应用商店应用程序 — 使用哪种类型的存储？

> ID：13953940
> 
> 赞同：3
> 
> 时间：2012-12-19T13:56:11.097
> 
> 标签：windows-8, microsoft-metro

我对 Windows 应用商店应用程序可用的各种类型的存储有点困惑。

假设我有一个记事本应用程序，用户可以在其中查看、创建和编辑笔记。我将使用什么存储类型来存储笔记？本地存储？将注释写到用户的 Documents 文件夹中的文件中？另外，如果我想通过云同步用户的笔记怎么办？我了解漫游数据的大小限制相当低。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T14:15:29.613

您提到的几乎所有选项都适用于记事本应用程序。除了漫游数据选项外，它只允许您存储 100KB 的数据。

我将尝试总结您拥有的选项并添加更多选项：

**Localstorage** 您可以轻松地将这些文件添加到[localstorage](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh700361%28v=win.10%29.aspx)，您可以将其存储为文件格式或序列化您的对象并存储该文件。很容易实现。缺点是只有您的应用可以访问这些文件。

**Documents 文件夹** 也是一个选项。通过使用不同的文件选择器变得容易。例如[FileOpenPicker](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.pickers.fileopenpicker.aspx)或[FileSavePicker](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.pickers.filesavepicker.aspx)。文件可以以您喜欢的格式存储，并且可以由其他应用程序或通过文件资源管理器访问。

**漫游数据** 由于空间有限，文件没有选项

**Skydrive API** 如果您想将文件存储在云端并在任何地方访问它们，您可以考虑使用[skydrive api](http://msdn.microsoft.com/nl-nl/library/live/hh826521.aspx)。另请注意，如果您使用文件选择器，您还可以选择将这些文件保存/加载到 skydrive。（尽管在这种情况下，用户选择存储文件的位置。）

**Windows Azure 移动服务** 如果您想在云中存储数据，另一种选择。使您能够将数据存储在一个/多个表中。很容易实现。更多关于移动服务的信息可以在[这里找到](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-data-dotnet/)

**SQL Lite** 如果您需要一个本地数据库来存储您的数据，那么 SQLLite 可能是一个选择。Tim Heuer 写了一篇关于如何在 Windows 8 应用程序中使用 SQLLite 的精彩博文。你可以在[这里找到](http://timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx)

希望这能让事情变得更清楚，并让您对为您的应用程序选择什么提供一些想法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:53:37.470

在像这样的应用程序（记事本风格的应用程序）中，将文件存储在用户的文档文件夹中的逻辑位置。这样，用户就可以从其他应用程序以及当前应用程序访问它们。当然，您也可以选择滚动您自己的方法将数据上传到 SkyDrive，但您真的不应该依赖它作为您唯一的数据源 - 如果用户离线怎么办？

# ios - 设置初始 NSUserDefaults

> ID：13953949
> 
> 赞同：4
> 
> 时间：2012-12-19T13:56:50.113
> 
> 标签：ios, nsuserdefaults

我看过一些指南说要这样做，而另一些指南则说以这种方式设置 NSUserDefaults 的初始值和键会在更新应用程序时导致问题。我希望我能在这里明确地回答这个问题。在我的 appdelegate didFinishLaunchingWithOptions 方法中，我有：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    if (![defaults integerForKey:@"totalDays"]) {

        // if there is no value for the key, set it to 1
        [defaults setInteger:0 forKey:@"totalDays"];

    }
    if (![defaults objectForKey:@"currentDate"]) {
        [defaults setObject:@"32 01" forKey:@"currentDate"];
    }
    if (! [defaults boolForKey:@"marked"]) {
        [defaults setBool:NO forKey:@"marked"];

    }
    if (![defaults arrayForKey:@"checkedrows"]) {
        NSMutableArray *arr1  = [NSMutableArray arrayWithArray:[defaults arrayForKey:@"checkedrows"]];
    }
[defaults synchronize]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:20:24.300

注意也可能会有所帮助，您不需要“需要”默认值来使用它们。它可能会节省您稍后在应用程序中检查它们的空值或零值的时间。

正如另一个答案所述，一旦将值保存为用户默认值，它应该从更新到更新以及从备份到备份持续存在。我多年来一直在使用它们，没有丢失或损坏数据的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T18:22:07.017

您根本不应该设置默认值！相反，使用 NSUserDefaults 提供的方便的方法来实现这个目的：-registerDefaults:。在程序启动的早期使用默认值字典调用它。

这样做的好处是，因为 -registerDefaults: 是瞬态的，您可以区分“用户尚未自定义此首选项”和“用户明确将此首选项设置为默认值”之间的区别，如果您更改默认值，这一点很重要在较新版本的程序中设置。由于不需要保存到磁盘，它也快一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T14:17:19.957

如果用户更新应用程序，则会保存存储在用户默认值中的数据。更新后您的代码不会出现任何问题。

# html - 格式化 div 和 span 元素

> ID：13953955
> 
> 赞同：-3
> 
> 时间：2012-12-19T13:57:08.987
> 
> 标签：html, css

这是我要格式化的小提琴： [jsfiddle](http://jsfiddle.net/W6ATN/35/)

我正在寻找以下内容：

*   `logo`和`text`div之间有一些距离。如果我使用`margin-top`属性相对不起作用。
*   跨越`text`div 下的换行符。将这些跨度与`<br/>`所需的距离分开。如果我改变`line-height property`它，它会给其他跨度带来问题。我希望我没有`line-height`为每个指定`span`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:01:51.947

房产就是你的`margin`答案。将您的文本放入跨度内的段落标签中并像这样自定义它们的边距

```
p, span, div[name="logo"] {
    margin: 5px 2px 5px 2px;
} 
```

边距以顺时针循环方式设置。`margin: 'top' 'right' 'bottom' 'left';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T14:28:34.623

在您的 Jfiddle 中使用它：

```
.box {
  background-color: #000000;
  color: #FF0000;
  width: 300px;
  height: 400px; 
  border-radius:5px;
  -moz-border-radius:5px;
  -webkit-border-radius:5px;
  -o-border-radius:5px;
  -ms-border-radius:5px;
}
.logo{
    width:80%;
    margin:0% 4% 0% 15%;  
    font-size:20px;   
}
.inlineDiv{
    display:inline-block; 
    width:48%;
    vertical-align:middle;
    margin:0px;
    padding:0px;
}
.inlineDiv > img{
    float:right;   
}
#text{
     text-align:center;   
} 
```

编辑：

进一步的html：

```
<div class="box">
<div class="logo">
  <div class="inlineDiv">
   <img src="c:\work\img\logo3.jpg" width="80" height="80" />
  </div>
  <div class="inlineDiv">
      <span class="spanTop">
          <p>YAD</p>
          <p>HIM</p>
      </span>
  </div>
   </div>
     <div id='text'>
         <span class="tag">
             <p>Try this now with the</p>
             <p> help of something then</p>
         </span>
  </div> 
```

​</p>

# javascript - Wordpress 中基于 JavaScript 的拆分测试（a/b 测试）？

> ID：13953959
> 
> 赞同：2
> 
> 时间：2012-12-19T13:57:20.617
> 
> 标签：javascript, wordpress

我们有一个 WordPress 博客；有一条消息我们想向我们的一些用户展示。它由 JS 动态呈现（一种滑块）。我们想对该通知的两种可能的设计进行拆分测试，但我们有点迷失在细节上。

似乎现有的 WordPress 测试插件仅适用于页面内容，而不适用于 JavaScript 等动态位。我们确实找到了 Genetify，但它似乎陈旧且无人维护。

有没有一种很好的当前方法来拆分测试由 JS 呈现的内容？

谢谢！

# wpf - 使用 DataTemplate 的 ListBox 的 WPF 双向绑定

> ID：13953962
> 
> 赞同：3
> 
> 时间：2012-12-19T13:57:23.347
> 
> 标签：wpf, xaml, binding, listbox, datatemplate

> **可能重复：**
> [绑定到 List<string> 时如何使 ListBox 可编辑？](https://stackoverflow.com/questions/5793438/how-to-make-listbox-editable-when-bound-to-a-liststring)

我正在尝试在名为“ListStr”对象的列表和 ListBox WPF 控件之间设置两个绑定。此外，我希望这些项目是可编辑的，所以我添加了一个带有 TextBoxes 的 DataTemplate，希望它可以通过 TextBoxes 直接修改 ListStr 项目。

但是当我试图编辑其中一个时，它不起作用......

任何想法 ？

PS：我已经尝试添加 Mode=TwoWay 参数，但它仍然无法正常工作

这是 XAML：

```
<ListBox ItemsSource="{Binding Path=ListStr}" Style="{DynamicResource ResourceKey=stlItemTextContentListBoxEdit}" /> 
```

这是样式代码：

```
<Style x:Key="stlItemTextContentListBoxEdit" TargetType="{x:Type ListBox}">
<Setter Property="Background" Value="#FF0F2592" />
<Setter Property="BorderBrush" Value="Transparent" />
<Setter Property="Foreground" Value="White" />
<Setter Property="Height" Value="150" />
<Setter Property="Width" Value="200" />
<Setter Property="HorizontalContentAlignment" Value="Left" />
<Setter Property="ItemTemplate" Value="{DynamicResource ResourceKey=dtplItemTextContentListBoxEdit}" /></Style> 
```

和数据模板：

```
<DataTemplate x:Key="dtplItemTextContentListBoxEdit">
    <TextBox Text="{Binding Path=.}" Width="175" />
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T14:08:39.713

使用时两种方式绑定不起作用`{Binding Path=.}`（对于 来说很长`{Binding}`）。记住正在发生的事情。

`ListBox`给定一个对象列表，然后为每个项目创建一个`ListBoxItem`。然后将`DataContext`的`ListBoxItem`设置为该对象。当你使用时`{Binding}`，你是说只使用`DataContext`. 当您在 TextBox 中键入内容时，它会更新什么？它无法设置 DataContext 并且不知道对象来自哪里（因此它无法更新您的列表/数组）。

两种方式绑定起作用的地方是当您绑定到该对象上的属性时。但不是当你绑定到对象本身时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T15:11:55.367

```
 public class ViewModel
{
    ObservableCollection<TextItem> _listStr = new ObservableCollection<TextItem> { new TextItem("a"), new TextItem("b"), new TextItem("c") };

    public ObservableCollection<TextItem> ListStr
    {
        get  { return _listStr; }  // Add observable and propertyChanged here also if needed
    }
}

public class TextItem : NotificationObject // (NotificationObject from Prism you can just implement INotifyPropertyChanged)
{
    public TextItem(string text)
    {
        Text = text;
    }

    private string _text;
    public string Text
    {
        get { return _text; }
        set
        {
            if (_text != value)
            {
                _text = value;
                RaisePropertyChanged(() => Text);
            }
        }
    }
} 
```

xml:

```
 <DataTemplate>
    <TextBox Text="{Binding Text}" Width="175" />
 </DataTemplate> 
```

# python - SCons 生成可变数量的目标

> ID：13953964
> 
> 赞同：7
> 
> 时间：2012-12-19T13:57:26.397
> 
> 标签：python, code-generation, scons

我正在尝试`SCons`生成多个目标（直接在中未知的数字`SConscript`）。

我有这样的目录：

```
headers/
  Header1.h
  Header2.h
  Header3.h
  Header4.h
meta/
  headers_list.txt 
```

现在，我希望 SConscript`headers_list.txt`根据其内容从`headers/`目录中选择文件（即它可能只包含`Header1`and `Header3`）来读取我想使用某些函数生成源的每个文件。

我一直在尝试`env.Command`这样做，但问题是它需要调用者指定目标列表，由于显而易见的原因，在调用`env.Command`.

我唯一能想到的就是运行：

```
for header in parse( headers_file ):
    source = mangle_source_name_for_header( header )
    env.Command( source, header, generator_action ) 
```

但这意味着我`parse( headers_file )`每次调用时都会运行`scons`. 如果解析成本高且文件不经常更改，则可以轻松缓存此步骤。

我缺少什么 SConsc 构造/类/技术来实现缓存？

**编辑：**

看来我的问题类似于[SCons 目标的构建时确定](https://stackoverflow.com/questions/13870092/build-time-determination-of-scons-targets)，但是没有人工虚拟文件的技术吗？

此外，即使使用临时文件，我也看不到我应该如何将`target`变量从中`Command`生成可变数量的目标传递给第二个将迭代它们的目标。

**编辑2：**

[这](http://www.scons.org/wiki/DynamicSourceGenerator)看起来很有希望。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T13:44:01.843

我发现我能做到的唯一方法是使用`emitter`. 下面的示例由 3 个文件组成：

```
./
|-SConstruct
|-src/
| |-SConscript
| |-source.txt
|-build/ 
```

**`SConstruct`**

```
env = Environment()

dirname = 'build'
VariantDir(dirname, 'src', duplicate=0)

Export('env')

SConscript(dirname+'/SConscript') 
```

**`src/SConscript`**

```
Import('env')

def my_emitter( env, target, source ):
    data = str(source[0])
    target = []
    with open( data, 'r' ) as lines:
        for line in lines:
           line = line.strip()
           name, contents = line.split(' ', 1)
           if not name: continue

           generated_source  = env.Command( name, [], 'echo "{0}" > $TARGET'.format(contents) )
           source.extend( generated_source )
           target.append( name+'.c' )

    return target, source

def my_action( env, target, source ):
    for t,s in zip(target, source[1:]):
        with open(t.abspath, 'w') as tf:
            with open(s.abspath, 'r') as sf:
                tf.write( sf.read() )

SourcesGenerator = env.Builder( action = my_action, emitter = my_emitter )
generated_sources = SourcesGenerator( env, source = 'source.txt' )

lib = env.Library( 'functions', generated_sources ) 
```

**`src/source.txt`**

```
a int a(){}
b int b(){}
c int c(){}
d int d(){}
g int g(){} 
```

**输出**：

```
$ scons
scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
echo "int a(){}" > build/a
echo "int b(){}" > build/b
echo "int c(){}" > build/c
echo "int d(){}" > build/d
echo "int g(){}" > build/g
my_action(["build/a.c", "build/b.c", "build/c.c", "build/d.c", "build/g.c"], ["src/source.txt", "build/a", "build/b", "build/c", "build/d", "build/g"])
gcc -o build/a.o -c build/a.c
gcc -o build/b.o -c build/b.c
gcc -o build/c.o -c build/c.c
gcc -o build/d.o -c build/d.c
gcc -o build/g.o -c build/g.c
ar rc build/libfunctions.a build/a.o build/b.o build/c.o build/d.o build/g.o
ranlib build/libfunctions.a
scons: done building targets. 
```

还有一件事我不太喜欢，那就是`headers_list.txt`每次`scons`执行都要解析。我觉得只有在文件更改时才应该有一种方法来解析它。我可以手动缓存它，但我仍然希望有一些技巧可以让 SCons 为我处理缓存。

而且我找不到不重复文件的方法（`a`并且`a.c`相同）。一种方法是简单地在 my_action 而不是源中生成库（这是我在最终解决方案中使用的方法）。

# java - JPopupMenu 的区域是否太小？

> ID：13953968
> 
> 赞同：0
> 
> 时间：2012-12-19T13:57:50.663
> 
> 标签：java, swing, popup, jframe, jpopupmenu

在最后一个问题中，我问社区为什么我`JPopupMenu`没有出现在屏幕上。
我无法想出一个简单、可运行、可编译的示例。
所以，这是我为你们所做的：
![在此处输入图像描述](../Images/21276ef20b7df6083a767b1009cbef5c.png)

*   该区域是否太小而无法绘制弹出窗口？
我希望我的弹出窗口是这样的：
![流行音乐](../Images/fcd4e8b87ef1657d9cedd2e4925281be.png) 我所做的代码在第一张照片中可见。

### 代码：

```
/* The old code entered here has been removed */ 
```

完整的代码可以在[这里找到](https://docs.google.com/open?id=0BzY15ZB0eWxFTFEyWk1RQWRwVkk)

### 编辑 2

`JRadioButtonMenuItem`我将各种和复制`setupJPopup()`到一个新文件中并运行。有用。为什么它在 ScreenRecorder 类中不起作用？ **代码** 包演示；

```
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.ButtonGroup;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JPopupMenu;
import javax.swing.JRadioButtonMenuItem;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public class PopupTrial {

    public PopupTrial(){
        setupJPopup();
        JFrame frame = new JFrame();
        try{
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        }catch(Exception e){

        }
        frame.getContentPane().add(label);
        label.addMouseListener(new MouseAdapter(){
            @Override
            public void mouseClicked(MouseEvent e){
                popup.show(e.getComponent(), e.getX(), e.getY());
            }
        });
        frame.setVisible(true);
        frame.setSize(300, 300);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run(){
                new PopupTrial();
            }
        });
    }
    public void setupJPopup(){
        encodingGroup.add(avi);
        encodingGroup.add(quicktime);

        popup.add(avi);
        popup.add(quicktime);
        popup.addSeparator();

        recordingAreaGroup.add(entireScreen);
        recordingAreaGroup.add(custom);

        popup.add(entireScreen);
        popup.add(custom);
        popup.addSeparator();

        cursorGroup.add(selectBlackCursor);
        cursorGroup.add(selectWhiteCursor);
        cursorGroup.add(selectNoCursor);

        selectCursor.add(selectBlackCursor);
        selectCursor.add(selectWhiteCursor);
        selectCursor.add(selectNoCursor);

        popup.add(selectCursor);
        popup.pack();
    }
    JLabel label = new JLabel("Click Me");
    ButtonGroup recordingAreaGroup = new ButtonGroup();
    ButtonGroup cursorGroup = new ButtonGroup();
    ButtonGroup encodingGroup = new ButtonGroup();
    JPopupMenu popup = new JPopupMenu();
    JRadioButtonMenuItem avi = new JRadioButtonMenuItem("AVI",true);
    JRadioButtonMenuItem quicktime = new JRadioButtonMenuItem("QuickTime",false);
    JRadioButtonMenuItem entireScreen = new JRadioButtonMenuItem("Entire Screen",true);
    JRadioButtonMenuItem custom = new JRadioButtonMenuItem("Custom...",false);
    JMenuItem selectCursor = new JMenu("Select a cursor");
    JRadioButtonMenuItem selectWhiteCursor = new JRadioButtonMenuItem("White Cursor",true);
    JRadioButtonMenuItem selectBlackCursor = new JRadioButtonMenuItem("Black Cursor",false);
    JRadioButtonMenuItem selectNoCursor = new JRadioButtonMenuItem("No Cursor",false);
} 
```

![在此处输入图像描述](../Images/ed42b65b4a54ae8df95c57b42ffb4a6d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:13:28.793

不， 的大小与不显示`JFrame`的原因`PopupMenu`无关。这是一个示例，显示了与您想要的（并使用类似的方法）工作类似的东西：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class PopupMenu extends Box{

    Dimension preferredSize = new Dimension(400,30);

    public PopupMenu(){
        super(BoxLayout.Y_AXIS);

        final JPopupMenu menu = new JPopupMenu("Options");
        for(int i = 1; i < 20; i++)
            menu.add(new JMenuItem("Option" + i));

        JLabel clickMe = new JLabel("ClickMe");
    clickMe.setAlignmentX(RIGHT_ALIGNMENT);
        clickMe.addMouseListener(new MouseAdapter(){

            @Override
            public void mouseClicked(MouseEvent e) {
                menu.show(e.getComponent(), e.getX(), e.getY());
            }});

        add(clickMe);       
    }

    public Dimension getPreferredSize(){
        return preferredSize;
    }

    public static void main(String[] args) {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setContentPane(new PopupMenu());
        frame.validate();
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# python - 与 Arduino 的串行通信仅在屏幕运行时有效

> ID：13953969
> 
> 赞同：6
> 
> 时间：2012-12-19T13:57:51.793
> 
> 标签：python, linux, serial-port, arduino

我在 Linux 上，出于某种原因，我只能在屏幕监控时使用串行端口。当屏幕不运行时，Python 代码不会崩溃或其他什么。Arduino 只是没有回应。有什么我想念的吗？

```
pi@raspberrypi ~ $ screen "/dev/ttyACM0" 115200

pi@raspberrypi ~ $ sudo python
>>> import serial
>>> s = serial.Serial("/dev/ttyACM0", 115200)
>>> s.write("EXP\n")
4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:14:25.900

你确定它没有睡着？

有些机器在低功耗模式下会禁用 USB 之类的东西（屏幕保护程序可能是这样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T14:29:05.090

在示例中，您会看到其他选项。特别是超时似乎总是被使用：

```
s = serial.Serial("/dev/ttyACM0", 115200, timeout=2) 
```

# git - Git post-receive hook失败：不允许操作

> ID：13953976
> 
> 赞同：1
> 
> 时间：2012-12-19T13:58:18.830
> 
> 标签：git, bash, githooks

我有一个 post-receive 挂钩，它调用我的 bash 脚本（它将拉取本地 repo 并重新启动 Java 服务器）。

这是 post-receive 挂钩的所有者信息：

```
-rwsr-x--x 1 cyril devs   676 19 dec.  14:45 post-receive 
```

如您所见，我`setuid bit`在此脚本上设置了 ，以便`cyril/devs`也可以为其他用户运行。

这个脚本的内容很简单：

```
echo "Running post-receive hook"
echo "Server will be up and running in about 1 minute"
/home/project/start_dev restart & 
```

我的脚本`start_dev`有这些权利：

```
-rwsr-x---  1 cyril devs 1515 19 dec.  14:41 start_dev 
```

注：也是`setuid.`

如果我使用该帐户将某些内容推送到服务器`cyril`，则它可以完美运行。

如果其他人使用其他帐户推送到服务器，他们得到：

```
remote: /home/project/start_dev: line 52: kill: (11490) - Operation not allowed 
```

*（kill 用于停止实例。）*

为什么他们有这个错误，脚本应该以`cyril`，而不是用户身份运行，因此他们应该有权杀死这个实例，对吧？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:31:59.797

显然，大多数 Linux 发行版都禁用`setuid`了 shell 脚本，因为它可能导致大量安全漏洞。更多信息[在这里](http://www.tuxation.com/setuid-on-shell-scripts.html)和来自[setuid 维基百科页面](http://en.wikipedia.org/wiki/Setuid#setuid_on_executables)。

> 虽然 setuid 功能在许多情况下都非常有用，但如果将 setuid 属性分配给未经仔细设计的可执行程序，则其使用不当可能会带来安全风险。由于潜在的安全问题，许多操作系统在应用于可执行 shell 脚本时会忽略 setuid 属性。

Tuxation 页面中一种可能的解决方案是执行以下操作：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <unistd.h>

int main()
{
   setuid( 0 );
   system( "/path/to/script.sh" );

   return 0;
} 
```

然后`setuid`生成 C 程序并将其用作您的钩子。不过，Tuxation 页面上也有此评论：

> With all that said, running shell scripts with setuid isn't very safe, and the distro designers had a pretty good idea of what they were doing when many of them disabled it.

# java - 在java中将EST时间转换为本地时间

> ID：13953978
> 
> 赞同：3
> 
> 时间：2012-12-19T13:58:22.217
> 
> 标签：java, datetime, timezone, simpledateformat

我无法将（美国东部标准时间 2012 年 12 月 19 日上午 8:57）转换为当地时间（现为印度时间）。转换时我的时间不对（2012 年 12 月 19 日 11:27）。我正在使用以下代码：

```
private void convertEdtToLocalTime(String pubDate)
{
    //pubDate = 12/19/2012 8:57am EST;
    String localPubDate;
    try
    {
        SimpleDateFormat sdf = new SimpleDateFormat(
            "MM/dd/yyyy HH:mma z");
        TimeZone timeZone = TimeZone.getDefault();
        sdf.setTimeZone(timeZone);
        if (pubDate != null)
        {
            Date date = sdf.parse(pubDate);
            sdf = new SimpleDateFormat("MMM dd yyyy HH:mm");
            localPubDate = sdf.format(date);
        }
    }
    catch (ParseException e)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:17:05.963

您不需要设置 timeZone，因为时区已在 pubDate 字符串中指定。当您想使用不同的 SDF 进行格式化时，默认时区会将其转换为默认时区本身。例如。如果您在印度，IST 时间 = 2012 年 12 月 19 日 19:27

```
private static  void convertEdtToLocalTime(String pubDate)
    {
        //pubDate = 12/19/2012 8:57am EST;
        String localPubDate=null;
        try
        {
            SimpleDateFormat sdf = new SimpleDateFormat(
                "MM/dd/yyyy HH:mma z");
//          TimeZone timeZone = TimeZone.getDefault(); // No need to do it
//          sdf.setTimeZone(timeZone);
            if (pubDate != null)
            {
                Date date = sdf.parse(pubDate);
                sdf = new SimpleDateFormat("MMM dd yyyy HH:mm");
                localPubDate = sdf.format(date);
            }
        }
        catch (ParseException e)
        {
        }
        System.out.println(localPubDate);
    } 
```

# ios - ipad 应用程序奇怪的行为

> ID：13953979
> 
> 赞同：1
> 
> 时间：2012-12-19T13:58:26.503
> 
> 标签：ios, ipad

我的 ipad 项目是基于主细节视图的。详细视图的工具栏上有一个按钮，当用户点击该按钮时，它会弹出一个弹出视图以显示四个按钮（作为菜单）。三个按钮的动作如下（三个按钮显示三个不同的模型表单）：

```
- (void) showOnlineSgf
{
    NSLog(@"showOnlineSgf");
    TGOOnlineSgfViewController *dlg =
    [[TGOOnlineSgfViewController alloc] initWithNibName:@"TGOOnlineSgfViewController"
                                                 bundle:nil];
    UINavigationController *nav = [[UINavigationController alloc]initWithRootViewController:dlg];

    [nav setModalPresentationStyle:UIModalPresentationFormSheet];
    [self presentViewController:nav animated:YES completion:nil];
    dlg = nil;
    nav = nil;
} 
```

另一个按钮的作用是显示一个 MFMailComposeViewController。代码如下：

```
- (void) emailCurrentGame
{
    NSLog(@"email current game");
    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
    picker.mailComposeDelegate = self;
    [self presentModalViewController:picker animated:YES];
    picker = nil;
} 
```

奇怪的行为是，当我点击按钮时应该执行 showOnlineSgf()，但实际上执行了 emailCurrentGame()。当我在 showOnlineSgf() 中设置断点时，它被命中，并且逐步执行 showOnlineSgf() 中的每个语句。但是屏幕上的结果是 MFMainComposeViewController 出现了。

我知道这个问题很难回答。任何想法都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:22:01.790

检查您的`UIButton`触发器的插座连接`showOnlineSgf`。很可能您`UIButton`在 Interface Builder 中复制粘贴了您的内容，这会导致它也复制其分配的操作。然后你连接了你的另一个动作，导致你`UIButton`有两个动作。

要解决此问题，只需断开您`UIButton`的触发器`showOnlineSgf`与`emailCurrentGame`操作的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:24:53.317

听起来您在界面构建器中复制粘贴了一个已连接的按钮。检查按钮是否分配了多个操作。

# c# - WCF 显示来自 DataMember 的 DisplayAttribute 或 DisplayName

> ID：13953980
> 
> 赞同：4
> 
> 时间：2012-12-19T13:58:28.250
> 
> 标签：c#, asp.net-mvc, wcf, asp.net-mvc-4, wcf-binding

如何让 DisplayName / Name Attribute 显示在我的 WCF 服务上？

这是 WCF 服务中的对象。

```
[DataContract]
public class Person
{
    [DataMember]
    public int PersonId { get; set; }
    [DataMember]
    [Display(Name = "Name")]
    public string Name { get; set; }
    [DataMember]
    [DisplayName("Date of Birth")]
    public DateTime? DateOfBirth { get; set; }
    [DataMember]
    public string Gender { get; set; }
    [DataMember]
    public string Telephone { get; set; }
    [DataMember]
    public string Email { get; set; }
} 
```

我希望描述性名称显示在我基于 WCF 服务创建的表单上。我怎样才能做到这一点？

在 MVC4 视图上显示代码

```
<div id="online">

        @Html.EditorFor(m => m.Name)

        @Html.EditorFor(m => m.Telephone)
        @Html.EditorFor(m => m.Fax)
        @Html.EditorFor(m => m.Email)

</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T14:17:59.487

> 我希望描述性名称显示在我基于 WCF 服务创建的表单上。我怎样才能做到这一点？

你不能。

这些属性由序列化程序读取，但它们是在您的服务程序集中定义的。发送到客户端的内容取决于使用的绑定，但在例如 SOAP 消息 (*HttpBinding) 中，您将需要该`[DataMember(Name = "Foo")]`属性，因为这会导致序列化程序更改 XML 中元素的名称。

您必须将适当的属性应用于客户端代理中的类。

另一种方法是在生成参考时打勾`Reuse Types`；那么您的客户端将使用服务使用的同一程序集中的类，因此可以在客户端中访问这些属性。

# image - 多轴上的 Matlab GUI roipoly

> ID：13953983
> 
> 赞同：4
> 
> 时间：2012-12-19T13:58:35.740
> 
> 标签：image, matlab, user-interface

如果我的窗口`axes`上有多个`Matlab GUI`，并且每个窗口都有不同的图像。

我怎样才能设法`roipoly`在每个人身上发挥作用？

这个解决方案应该不需要`imshow`再`roiploy`为每个人回忆，因为：

*   所有图像都`axes`使用循环显示，如果我一个接一个地处理轴，`GUI`就会显得如此难看。
*   重做`imshow`会花费时间，因为图像非常大，并且每次在显示之前都会对其进行处理，因此在重复处理中浪费时间将是一个非常糟糕的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T08:01:08.580

使用`impoly`代替`roipoly`：

```
polyH = impoly( hAxes );
position = wait( polyH ); 
```

`impoly`有关更多功能，请参阅 Matlab 的文档。

# jquery - 在焦点输入上使用淡入淡出显示隐藏 div 和关闭

> ID：13953984
> 
> 赞同：-1
> 
> 时间：2012-12-19T13:58:36.093
> 
> 标签：jquery

嗨，我正在使用此代码在输入焦点上显示隐藏 div

这里是 html 请也看一下[@jsfiddle](http://jsfiddle.net/RU4kC/)

```
<div id="divone">
    <input class="url_field" />
</div>
<div id="first" class="content">
    First
    <input class="close" type="button" value="X"/>
</div>
<div id="last" class="content">
    Last
    <input class="close" type="button" value="X"/>
</div> 
```

Javascript 片段：

```
$(document).ready(function() {
    $(".url_field").focus(function() {
        $(this).next(".content").fadeout('slow').css('display', 'inline');
    });

    $('.url_field').focus(function() {
        $('.content').hide();
        $('#' + this.rel + '').show();
        return false;
    });
    $('.content input.close').click(function() {
        $(this).parent().hide();
    });
}); 
```

请帮助我，它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:11:42.957

```
$(document).ready(function() {

    $('.url_field').focus(function() {
        //$(this).next(".showdiv").fadout('slow').css('display', 'inline');  not sure what this does so commented it out
        $('.content').hide();
        $('#' + $(this).attr('rel')).show(); // you also don't have a rel on the input so this won't do anything
        return false;
    });

    $('.content input.close').click(function() {
        $(this).parent().hide();
    });
}); 
```

您也可能希望您的 css 从显示块开始，除非您将它们隐藏然后显示它们 - 但是您需要在输入中添加 rel="last" 或 rel="first"

# objective-c - 无法在 2 个表视图控制器之间切换

> ID：13953987
> 
> 赞同：1
> 
> 时间：2012-12-19T13:58:46.060
> 
> 标签：objective-c, ios, uitableview

我有一个包含部分的 TableView。我已经在第一个表格视图的单元格和另一个表格视图之间连接了一个推送序列，但是当我推送单元格时没有任何反应。我试图做这样的事情：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"ROW: %d",indexPath.row);
    [self performSegueWithIdentifier:@"mySegue" sender:self];
        NSLog(@"ROW2: %d",indexPath.row);
} 
```

我可以看到检测到行，但仍然没有从一个 vc 推送到另一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:04:42.247

`performSegueWithIdentifier:`如果 Storyboard 中的 segue 位于单元格和下一个 TableViewController 之间，则不必调用。它是自动完成的。确保您从单元格中拖动 segue，而不是从视图控制器中。

# c# - 使用 NAudio 压缩音频 WAV - 错误 AcmNotPossible 调用 acmStreamOpen

> ID：13953991
> 
> 赞同：2
> 
> 时间：2012-12-19T13:58:52.980
> 
> 标签：c#, codec, naudio, wave

我必须使用 NAudio 使用最好的编解码器压缩音频 WAV。我使用 WaveFormatConversionStream，但我总是得到这个错误：
`"AcmNotPossible calling acmStreamOpen"` 我已经阅读了很多关于这个错误的答案，但我没有找到解决方案。

这是我的代码，我错在哪里？

所有的帮助都会很好，欢迎:)

```
private void InvokeOnNewAudioData(byte[] data, AudioFormat audioFormat)
{
    WaveFormat waveFormat = new WaveFormat(audioFormat.NumberSamplesPerSec, audioFormat.NumberBitsPerSample, audioFormat.NumberChannels);

    WaveFormat targetFormat = WaveFormat.CreateCustomFormat(WaveFormatEncoding.Vorbis1,
                                                            22000, //SampleRate
                                                            audioFormat.NumberChannels,     //Channels
                                                            48000,    //Average Bytes per Second
                                                            2,     //Block Align
                                                            16);    //Bits per Sample   

    using (MemoryStream dataStream = new MemoryStream(data))
    {
        using (WaveStream inputStream = new RawSourceWaveStream(dataStream, waveFormat))
        {
            try
            {
                using (WaveFormatConversionStream converter = new WaveFormatConversionStream(targetFormat, inputStream))
                {

                }
            }
            catch (Exception)
            {
                throw;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T15:52:54.660

这意味着您的系统上没有 ACM 编解码器可以执行请求的转换。您可以使用 NAudio 附带的 NAudioDemo 应用程序来检查您系统上安装的所有 ACM 编解码器及其支持的输入和输出格式。Windows 肯定不附带 Vorbis ACM 编解码器，这可能是您的代码无法工作的原因。即使您安装了 Vorbis ACM 编解码器，您也需要确保 WaveFormat*完全*正确，否则您将收到 ACM not possible 错误。

无论如何，您最好尝试使用 NVorbis 附带的 NAudio[支持](http://nvorbis.codeplex.com/)。

# php - 如何检查流是否有任何数据？

> ID：13953995
> 
> 赞同：5
> 
> 时间：2012-12-19T13:59:02.340
> 
> 标签：php

这就是我想要做的：

```
$output = '';
$stream = popen("some-long-running-command 2>&1", 'r');
while (!feof($stream)) {
  $meta = stream_get_meta_data($stream);
  if ($meta['unread_bytes'] > 0) {
    $line = fgets($stream);
    $output .= $line;
  }
  echo ".";
}
$code = pclose($stream); 
```

看起来这段代码不正确，因为它在调用`stream_get_meta_data()`. 检查流是否有一些数据要读取的正确方法是什么？这里的重点是避免锁定在`fgets()`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T14:03:21.410

正确的方法是[`stream_select()`](http://php.net/manual/en/function.stream-select.php)：

```
$stream = popen("some-long-running-command 2>&1", 'r');
while (!feof($stream)) {
  $r = array($stream);
  $w = $e = NULL;

  if (stream_select($r, $w, $e, 1)) {
    // there is data to be read
  }
}
$code = pclose($stream); 
```

不过要注意的一件事（我对此不确定）是它可能`feof()`是“阻塞”的检查 - 可能是循环永远不会结束，因为子进程没有关闭其 STDOUT 描述符。