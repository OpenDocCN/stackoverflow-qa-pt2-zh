# StackOverflow 问答 13123000-13123999

# php - PHP在获取Facebook JSon时专门从其中删除属性

> ID：13123004
> 
> 赞同：0
> 
> 时间：2012-10-29T13:54:59.983
> 
> 标签：php, json, facebook-graph-api

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:09:35.840

[PREG_MATCH](http://us.php.net/manual/en/function.preg-match.php) 是一个很好的起点。我相信有一些预制的课程会为你去掉这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:10:20.660

我会做一个 foreach 循环并使用 PREG_MATCH 来摆脱不需要的点击。

# ios - 获取 UIWebView 内容的高度

> ID：13123009
> 
> 赞同：24
> 
> 时间：2012-10-29T13:55:09.100
> 
> 标签：ios, uiwebview, height, xcode4.3

我有一个使用 loadHtmlString 函数加载数据的 uiwebview。问题是我从 sqlite 数据库加载数据，每次我加载不同长度的不同字符串时，Web 视图自然会获得不同的高度。
现在我每次都需要知道 uiwebview 的确切高度，以便在 webView 正下方加载 imageView。我努力了

```
- (void)webViewDidFinishLoad:(UIWebView *)aWebView {
    CGRect frame = aWebView.frame;
    frame.size.height = 1;
    aWebView.frame = frame;

    CGSize fittingSize = [aWebView sizeThatFits:CGSizeZero];
    frame.size = fittingSize;
    aWebView.frame = frame;

    NSLog(@"Size: %f, %f", fittingSize.width, fittingSize.height);
} 
```

但我总是得到相同的结果。我需要知道如何在每次加载时动态获取 Web 视图的高度。谢谢

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-29T14:00:33.677

尝试这个

```
NSString *result = [webView stringByEvaluatingJavaScriptFromString:@"document.body.offsetHeight;"];

int height = [result integerValue]; 
```

在您的 webViewDidFinishLoad 方法中。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-10-29T13:58:06.203

您可以通过访问 Web 视图的`scrollView`属性来获取 Web 视图中内容的高度：

```
NSLog(@"%f",myWebView.scrollView.contentSize.height); 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-11-12T08:17:25.253

这不是处理这种情况的正确方法。而不是在图像视图中加载图像并且必须始终牢记高度和宽度以及所有这些东西......最简单和最可靠的解决方案就是将图像加载到 html 字符串中，就是这样！只要确保 baseURL 如此，无论您采取什么方向，一切都会好起来的：

```
 NSString* extension = @"gif";
    NSString* strRR = [NSString stringWithFormat:@"%@.%@", authorNAme2,extension];
    NSString *path = [[NSBundle mainBundle] bundlePath];
    //NSLog(@"This is the path %@", path);
    NSURL *baseURL = [NSURL fileURLWithPath:path];
    //  NSLog(@"this is the base URL %@",baseURL);

    NSString *cachePath = [NSString stringWithFormat:@"%@/%@", path,strRR];

            NSString * htmlString = [NSString stringWithFormat:@"\
                                     <html>\
                                     <table width='100%%'>\<tr>\<td>\
                                     <body>\
                                     <p style = 'font-size:30px;'> %@ <\p>\
                                     </td></tr><tr><td><br></td></tr><tr><td align ='center'><br><img src='%@' width='60%%' \></td></tr></body>\
                                     </table>\
                                     </html>",authorNAme , cachePath];

            //          NSString *selection = [WebV2 stringByEvaluatingJavaScriptFromString:@"window.getSelection().toString()"];
            //          NSLog(@"*/*/*/*/**/*/*/*/*/*/*//*/ This is your selection mate %@" , selection);

            WebV.opaque = NO;
            WebV.backgroundColor = [UIColor clearColor];  
            [self.WebV setScalesPageToFit:YES];
            [self.WebV loadHTMLString:htmlString baseURL:baseURL]; 
```

# wpf - 如何在silverlight的代码中为图像添加png？

> ID：13123011
> 
> 赞同：0
> 
> 时间：2012-10-29T13:55:12.993
> 
> 标签：wpf, silverlight, silverlight-5.0

尝试在代码中创建图像，如下所示：

```
sp = new StackPanel() { Orientation = Orientation.Horizontal };
Image myImage = new Image() { HorizontalAlignment = HorizontalAlignment.Left, Width = 16, Height = 16, Margin = new Thickness(1, 0, 0, 0) };
MyImage.Source = new BitmapImage(new Uri("/MyAssembly;component/folder/image1.png", UriKind.RelativeOrAbsolute));
sp.Children.Add(MyImage); 
```

然后运行应用程序，图像不显示。用 Fiddler 检查数据，得到 404 错误。上图的来源是这样的：

```
http://localhost:80/MyAssembly;component/folder/image1.png 
```

但是这个图像被编译成一个程序集 MyAssembly。

可以使用以下标记从程序集中获取图像 xaml：

```
<Image Source="/MyAssembly;component/folder/image1.png"/> 
```

使困惑。不知道为什么。如何在代码中获取动态图像？

**更新：**感谢克莱门斯提供的信息。试试下面的代码：

```
sp = new StackPanel() { Orientation = Orientation.Horizontal };
ImageSourceConverter converter = new ImageSourceConverter();
Image myImage = new Image() { HorizontalAlignment = HorizontalAlignment.Left, Width = 16, Height = 16, Margin = new Thickness(1, 0, 0, 0) }; 
MyImage.Source = (ImageSource)converter.ConvertFromString("/MyAssembly;component/folder/image1.png");
sp.Children.Add(MyImage); 
```

结果和以前一样。来自 Fiddler 的消息：您要查找的资源已被删除、名称已更改或暂时不可用。

这个资源仍然是

```
 http://localhost:80/MyAssembly;component/folder/image1.png. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:08:56.037

不知道在 Silverlight 中为该 Uri 使用什么方案，你会`pack://application,,,/MyAssembly;component/folder/image1.png`在 WPF 中编写类似的东西。

但幸运的是，你总是可以这样写：

```
ImageSourceConverter converter = new ImageSourceConverter();
MyImage.Source = (ImageSource)converter.ConvertFromString(
                     "/MyAssembly;component/folder/image1.png"); 
```

当然也可以显式设置相对 URI：

```
MyImage.Source = new BitmapImage(
    new Uri("/MyAssembly;component/folder/image1.png", UriKind.Relative)); 
```

但是请注意，在任何情况下都必须将[Build Action](http://msdn.microsoft.com/en-us/library/0c6xyb66.aspx)`image1.png`设置为。`Resource`

# php - 向谷歌的 SMTP 服务器发送电子邮件时出现问题（使用自己的 php 脚本）

> ID：13123014
> 
> 赞同：1
> 
> 时间：2012-10-29T13:55:24.597
> 
> 标签：php, email, smtp

我写了一个连接到 SMTP 服务器并发送电子邮件的小 php 脚本。特别是连接到谷歌的 smtp 服务器。显然，从下面显示的 SMTPD 集中出现了问题。

```
[data2] => 501 5.5.2 Cannot Decode response o47sm22737144eem.11 
```

我在我的电子邮件正文中做错了吗，即。格式错误？这是php脚本：

```
// SMTP settings
define( 'SMTP_SERVER', "ssl://smtp.gmail.com" );
define( 'SMTP_PORT', '465' );
define( 'SMTP_USER', 'XXX@gmail.com' ); // my gmail account
define( 'SMTP_PWD', 'XXX' ); // my gmail password

class Mail
{
    public static function send( $smtpServer, $smtpPort, $smtpUser, $smtpPwd,
        $from, $to, $subject, $message )
    {
        // Establish connection to SMTP server
        $smtpConn = fsockopen( $smtpServer, $smtpPort );
        $smtpLog['connect'] = fgets( $smtpConn );

        // In case of success start SMTP communication
        if ( $smtpConn !== false )
        {
            // Say hello to SMTP
            fputs( $smtpConn, 'EHLO ' . $_SERVER['SERVER_ADDR'] . NL );
            $smtpLog['hello'] = fgets( $smtpConn );

            // Require authentication
            fputs( $smtpConn, 'AUTH LOGIN' . NL );
            $smtpLog['auth'] = fgets( $smtpConn );

            // Send username
            fputs( $smtpConn, base64_encode( $smtpUser ) . NL );
            $smtpLog['user'] = fgets( $smtpConn );

            // Send password
            fputs( $smtpConn, base64_encode( $smtpPwd ) . NL );
            $smtpLog['pwd'] = fgets( $smtpConn );

            // Send email from
            fputs( $smtpConn, "MAIL FROM: <$from>" . NL );
            $smtpLog['from'] = fgets( $smtpConn );

            // Send email to
            fputs( $smtpConn, "RCPT TO: <$to>". NL );
            $smtpLog['to'] = fgets( $smtpConn );

            // Send "the email"
            fputs( $smtpConn, 'DATA' . NL );
            $smtpLog['data1'] =  fgets( $smtpConn );

            fputs( $smtpConn,
                "To: <$to>\r\nFrom: <$from>\r\nSubject: $subject\r\n$message\r\n.\r\n" );
            $smtpLog['data2'] =  fgets( $smtpConn );

            fputs( $smtpConn, 'QUIT' . NL );
            $smtpLog['quit'] =  fgets( $smtpConn );

            fclose( $smtpConn );
        }

        return $smtpLog;
    }
}

$log = Mail::send( SMTP_SERVER, SMTP_PORT, SMTP_USER, SMTP_PWD,
   'XXX@gmail.com', 'XXX@yahoo.com', 'Subject', 'Message' );

print_r( $log ); 
```

以及来自谷歌 SMTP 服务器的完整响应日志：

```
[connect] => 220 mx.google.com ESMTP o47sm22737144eem.11
[hello] => 250-mx.google.com at your service, [XX.XX.XX.XX]
[auth] => 250-SIZE 35882577
[user] => 250-8BITMIME
[pwd] => 250-AUTH LOGIN PLAIN XOAUTH XOAUTH2
[from] => 250 ENHANCEDSTATUSCODES
[to] => 334 XXX
[data1] => 334 XXX
[data2] => 501 5.5.2 Cannot Decode response o47sm22737144eem.11
[quit] => 530-5.5.1 Authentication Required. Learn more at 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:19:58.843

伙计，您在多行的地方阅读单行回复。

**多行回复**：

```
250-LINE #1 // lines that have - after ### continue on the next
250-LINE #2 // lines that have - after ### continue on the next
250 LINE #3 // last line has space after ### 
```

**单行回复**：

```
220 LINE #1 // one reply with code 220
250 LINE #2 // another reply with code 250
// no ### code is followed by - as that means: not the last line! 
```

**您的命令不同步。**所以像这样修复：

```
if($smtpLog['hello'] = fgets( $smtpConn )){
    // handle multiline reply
    while($smtpLog['hello']{4} !== ' '){
        $smtpLog['hello'] .= PHP_EOL.fgets( $smtpConn );
    }
} 
```

这适用于您收到的每个响应，但在您的情况下，命令会在**EHLO**处中断同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:16:38.490

尝试使用漂亮且经过测试的 php-class [phpmailer](http://phpmailer.worxware.com/index.php?pg=phpmailer)，这很酷

# java - 有人打破了我对列表的排序 - 现在选择哪种方法：返回不可修改的列表还是一个新的列表？

> ID：13123016
> 
> 赞同：2
> 
> 时间：2012-10-29T13:55:28.070
> 
> 标签：java, list, sorting, unmodifiable

我正在使用 jsf Web 服务器上的列表来例如从网页访问数据模型。对这些列表的访问也可以从其他各种地方（Web 服务、工具）完成。

有一段代码被我返回的列表破坏了。我说的是我的开发团队中的某个人——我们是唯一使用此代码的人。我对这个函数有大约 300 个引用，它可能与性能相关，可以很好地进行修复：

该列表可以是 1 到 10'000 个条目之间的任何地方，通常我可能会有 10-100 个这样的列表。实际上，我可能经常有大约 20 个列表，每个列表有 8 个条目 - 所以没什么大不了的。但有时我可以拥有更多

我顺便说一下这样的功能：

```
public List<MyObject> getMyObjectList() {
    if (this.myObjects== null) {
        myObjects = new ArrayList<MyObject>(myObjectsMap.values());
    }
    return myObjects;
} 
```

现在我当然可以像这样返回：

```
 public List<MyObject> getMyObjectList() {
        if (this.myObjects== null) {
            myObjects = new ArrayList<MyObject>(myObjectsMap.values());
        }
        return Collections.unmodifiableList(myObjects );
} 
```

但这最终会在不同项目/应用程序的几个地方中断。恕我直言，返回不可修改、添加 javadoc 并修复所有损坏的东西是最干净的。但是 :-D 这是工作。我可能需要测试大约 10 个应用程序。

另一方面，我可以只返回一个新列表，例如

```
public List<MyObject> getMyObjectList() {
    return new ArrayList<MyObject>(myObjectsMap.values());
} 
```

这不是什么小工作——但是这方面的性能问题呢？除此之外 - 如果有人从我返回的列表中删除东西，它会默默地破坏应用程序。

那么：性能问题是什么？这是一个问题吗？

你会怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:38:19.477

> 你会怎么做？

如果我理解正确，这是一个用于多个应用程序的生产库。而且，不管你喜不喜欢，事实上的约定`getMyObjectList()`是用户可以对列表进行排序而不会出现错误或异常。

我会立即更改此方法并返回一个防御性副本：

```
// good idea
public List<MyObject> getMyObjectList() {
    return new ArrayList<MyObject>(myObjectsMap.values());
} 
```

您现在已经解决了有人对您的内部收藏进行分类并且您没有违反合同的问题。事实上，您甚至可以更新 Javadoc 并告诉用户他们可以对副本做任何他们想做的事情。

这可能会或可能不会导致性能问题。请记住，集合中的对象没有被复制——它们仍然被共享。您只是在创建一个新的数组列表以及跟踪对象所需的任何内部对象。

如果事实证明这些副本会导致性能问题，那么您可以考虑增强您的类以包含内部集合的只读缓存。要访问它，您必须给该方法一个新名称 - 例如`getMySharedObjectList`，您可以逐步更新客户端代码以根据性能需要使用此新方法。

但不要这样做。我认为这种方法特别糟糕：

```
// bad idea
public List<MyObject> getMyObjectList() {
    if (this.myObjects== null) {
        myObjects = new ArrayList<MyObject>(myObjectsMap.values());
    }
    return Collections.unmodifiableList(myObjects );
} 
```

您已经创建了 myObjects 很容易与 myObjectsMap 不同步的情况。*（在有人调用 getMyObjectList之后*将项目添加到 myObjectsMap 会发生什么情况？）同时，每次有人调用该方法时，您都在制作列表的副本。因此，您首先放弃了任何理论上的性能提升。

无论如何，祝你好运。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:08:07.453

如果您有能力测试应用程序，我会选择 unmodifiableList。它将在将来使您免于其他相关问题。

# java - Weblogic 10.3.5 Web 应用程序启动错误

> ID：13123017
> 
> 赞同：0
> 
> 时间：2012-10-29T13:55:33.127
> 
> 标签：java, jakarta-ee, weblogic-10.x

我正在尝试将 Web 应用程序部署到 Weblogic 10.3.5 中，当我尝试启动应用程序时出现以下错误：

```
####<Oct 29, 2012 5:27:12 AM PDT> <Warning> <HTTP> <ip-0A2E9E72> <AdminServer> <[STANDBY] ExecuteThread: '4' for queue: 'weblogic.kernel.Default (self-tuning)'> 
<<WLS Kernel>> <> <> <1351513632838> <BEA-101162> 
<User defined listener artemispm.web.ui.gwt.server.A7WebStartupListener failed: java.lang.NullPointerException.
java.lang.NullPointerException
at java.util.Hashtable.put(Hashtable.java:394)
at java.util.Properties.setProperty(Properties.java:143)
at java.lang.System.setProperty(System.java:729) 
```

上面的错误是由以下代码摘录引起的，它是 ServiceContextListener 类实现的一部分：

```
System.setProperty(A7WebConstants.PROP_OUTPUT_DIR_PATH, outputDirPath); 
```

outputDirPath 变量不为空，所以有人知道这里发生了什么吗？我正在使用 JDK6，该应用程序在 Tomcat 6 和 7 上也运行良好。另外，我没有更改 web.xml 文件中的任何配置。

**更新：

我刚刚注意到，当我尝试部署我的应用程序时，在上述错误之前出现此错误：

```
####<Oct 29, 2012 7:03:25 AM PDT> <Error> <Console> <ip-0A2E9E72> <AdminServer> <[ACTIVE] ExecuteThread: '3' for queue: 'weblogic.kernel.Default (self-tuning)'> <weblogic> <> <9fceb15ac10fa447:5dceb4c5:13aac5c55aa:-7ff7-0000000000000005> <1351519405088> <BEA-240003> <Console encountered the following error java.lang.IllegalArgumentException: Getting Deployment configuration...
at com.bea.console.utils.DeploymentConfigurationHelper.getDeploymentConfiguration(DeploymentConfigurationHelper.java:911)
at com.bea.console.utils.DeploymentConfigurationHelper.isSchemaBased(DeploymentConfigurationHelper.java:1930)
at com.bea.console.actions.app.DeploymentPlanAction.execute(DeploymentPlanAction.java:136) 
```

谢谢，

乔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:08:17.920

最好的猜测是密钥为空，因为`java.util.Properties.set`正在使用`HashTable.put`操作，请参阅 javadoc： [http ://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html#put%28K,%20V%29](http://docs.oracle.com/javase/6/docs/api/java/util/Hashtable.html#put%28K,%20V%29)

如果不是这种情况，你能检查一下`System.getProperty("dummy")`返回什么吗？如果下面代码片段中的 props 为 null（来自 java 源代码），那么上面的代码也会抛出`NullPointer`.

```
package java.lang;
...
import java.util.Properties;
...
private static Properties props;
....
public static String setProperty(String key, String value) {
checkKey(key);
SecurityManager sm = getSecurityManager();
    if (sm != null) {
    sm.checkPermission(new PropertyPermission(key,
    SecurityConstants.PROPERTY_WRITE_ACTION));
}

return (String) props.setProperty(key, value); //line 729
} 
```

# java - 将进程附加到调试会话：空进程列表

> ID：13123019
> 
> 赞同：1
> 
> 时间：2012-10-29T13:55:40.207
> 
> 标签：java, c, debugging, java-native-interface, eclipse-cdt

*   视窗 xp sp3
*   带有 CDT 的 Eclipse Junu

我一直在尝试使用进程附件功能调试 JNI 项目。首先，我启动 Java 程序，然后，当我启动 C 程序时，我想选择 javaw.exe 进程。

[我用于JNI调试的教程](https://community.jboss.org/wiki/DebuggingJNICAndJavaCodeInEclipse)

问题是，当我想选择正确的进程时，进程列表似乎是空的： ![空列表](../Images/80baf27b3612015a6e51585d684961d8.png)

这是我的调试配置： ![调试配置](../Images/255406a37ce251fcd92726691a3f1bad.png)

我能做些什么？我应该更换调试器吗？

在此先感谢，马克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:51:56.510

我在 Windows 上的 Eclipse Juno 中使用 eclipse CDT 插件遇到了这个问题。使用 sysinternals 进程监视器我发现 eclipse 正在寻找一个类文件：

```
C:\Program Files\eclipse\plugins\org.eclipse.cdt.core.win32.x86_64_5.2.0.201209170703\org\eclipse\cdt\internal\core\win32\ProcessList.class 
```

但没有找到它（Eclipse 安装在我的系统上的 C:\Program Files\eclipse 中）。缺少的类文件存在于 jar 文件中：

```
C:\Program Files\eclipse\plugins\org.eclipse.cdt.core.win32_5.3.0.201209170703.jar 
```

我不确定为什么eclipse在jar中找不到文件。我将整个“org”目录树从`org.eclipse.cdt.core.win32_5.3.0.201209170703`jar 复制到文件系统中。完成后，eclipse现在可以找到该文件

```
C:\Program Files\eclipse\plugins\org.eclipse.cdt.core.win32.x86_64_5.2.0.201209170703\org\eclipse\cdt\internal\core\win32\ProcessList.class 
```

（以及该 jar 中的其他文件），现在填充了进程选择列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T05:14:25.070

这对我不起作用。我能够找到罐子并提取罐子，但仍然遇到同样的错误。

我用 CDT 切换回 Eclipse v3.7 (Indigo)，一切正常。相同的 GCC 工具链和项目，我所做的只是更改我正在使用的 eclipse 版本，并且附加到进程工作正常。我会向 CDT 团队报告这个错误，但 Juno 确实花费了我一些工时（对于 CPP 和 Java ......）

祝其他 CDT 用户好运！

更新：

我能够让您的解决方法起作用。我提取了指定的 jar，它作为插件文件夹中的“org”目录出现。但实际上，它需要提取到与 Jar 同名的目录/文件夹中。这很奇怪...

好吧，Juno+CDT 又开始工作了……我想我不应该这么讨厌 ;-)

# c# - 更改对象正在影响 foreach 循环中对象的先前版本

> ID：13123026
> 
> 赞同：6
> 
> 时间：2012-10-29T13:56:04.000
> 
> 标签：c#, reference, foreach

所以，我认为这个很简单。

这是我的代码：

```
Dictionary<int, IEnumerable<SelectListItem>> fileTypeListDict = new Dictionary<int, IEnumerable<SelectListItem>>();

foreach (PresentationFile pf in speakerAssignment.FKPresentation.PresentationFiles)
{
    IEnumerable<SelectListItem> fileTypes = Enum.GetValues(typeof(PresentationFileType))
                .Cast<PresentationFileType>().Select(x => new SelectListItem
        {
             Text = x.ToString(),
             Value = Convert.ToString((int)x),
             Selected = pf.Type == (int)x
        });

        fileTypeListDict.Add(pf.ID, fileTypes);
} 
```

发生的事情是，最终字典将拥有所有正确的键，但所有值都将设置为`fileTypes`在循环的最终迭代期间创建的列表。我确信这与用作参考的对象有关，但在我使用 C# 之前从未见过这个问题。任何人都愿意解释为什么会发生这种情况以及我应该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T13:58:42.770

这是臭名昭著的“`foreach`捕获问题”，在 C# 5 中已“修复”（“修复”是一个强词，因为它暗示它以前是一个“错误”：实际上 - 规范现在已更改为承认这是一个混淆的常见原因）。在这两种情况下，lambda 都会捕获**变量** `pf`，*而不是*“`pf`在此迭代期间的值”-但在 C# before-5 中，变量`pf`在*技术上*被限定在循环*之外*（因此只有其中一个，句点），其中C# 5 及更高版本的变量在循环内的范围*内*（因此有一个不同的变量，用于捕获目的，每次迭代）。

在 C# 4 中，作弊：

```
foreach (PresentationFile tmp in speakerAssignment.FKPresentation.PresentationFiles)
{
    PresentationFile pf = tmp;
    //... as before 
```

now`pf`范围在 内`foreach`，它可以正常工作。没有它，只有一个`pf`- 由于您已将执行推迟到最后，所以 single的*值*`pf`将是最后一次迭代。

另一种解决方法是：不要推迟执行：

```
fileTypeListDict.Add(pf.ID, fileTypes.ToList()); // note the ToList 
```

现在它*在`pf`"current"*时被评估，所以会有你期望的结果。

# c# - 如何限制文件只能从服务器访问？

> ID：13123030
> 
> 赞同：0
> 
> 时间：2012-10-29T13:56:14.293
> 
> 标签：c#, iis

我需要一个 C# 代码，仅当我的应用所在的服务器将向该文件发送请求时才允许访问该文件。如果来自浏览器的用户试图访问它，它将给出“403 Forbidden”错误消息。

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:28:10.773

您可以禁用对位于受限制文件目录中的本地 web.config 文件中文件的外部访问。ASP.MET MVC Views 文件夹中使用了类似的方法。

**本地 web.config**

```
<configuration>
<system.web>
    <httpHandlers>
    <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>
    </httpHandlers>
</system.web>

<system.webServer>
    <handlers>
      <remove name="BlockViewHandler"/>
      <add name="BlockViewHandler" path="*" verb="*" preCondition="integratedMode" type="System.Web.HttpNotFoundHandler" />
    </handlers>
</system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:59:49.267

只需确保该文件位于文件系统上 IIS 无法访问的位置（如果使用默认目录：在*wwwroot*之外），然后使用 C# 访问该文件。

这样他们就无法浏览到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:16:43.513

如果是用于 IIS，请查看[ipSecurity Element [IIS Settings Schema]](http://msdn.microsoft.com/en-us/library/ms691353%28v=vs.90%29.aspx)

```
<ipSecurity allowUnlisted="false">

   <clear/>

   <!-- Allow only requests from the local machine. -->
   <add ipAddress="127.0.0.1" allowed="true"/> 

</ipSecurity> 
```

# displaytag - Displaytag Export Pdf 不显示希腊字符

> ID：13123031
> 
> 赞同：1
> 
> 时间：2012-10-29T13:56:17.390
> 
> 标签：displaytag

我正在使用 displaytag 库来显示数据库中的数据。我也使用导出选项来导出 excel 和 pdf。编码是 ISO-8859-7，我可以在导出的 excel 文件中正确看到结果，但我在 pdf 文件中遇到希腊语问题：我看到的是 blancs，而不是希腊字符。知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:53:55.653

解决方案是创建一个自定义 PdfView 类，在其中创建字体 BaseFont.createFont(FONT,"Cp1253", BaseFont.EMBEDDED); 新字体（BF，12）；FONT 是 ARIALBD.TTF 文件的路径，它适用于希腊字符。

# c# - Mono 和 Linq 聚合方法。尝试将项目添加到新列表时出错

> ID：13123041
> 
> 赞同：2
> 
> 时间：2012-10-29T13:57:26.920
> 
> 标签：c#, linq, list, mono, accumulate

为什么这段代码不起作用？

```
public static IList<float> CreateModifiedList(IList<float> list)
{
    IList<float> modifiedList= list.Aggregate(new List<float> (), (l, item) =>l.Add(++item));

    return modifiedList;
} 
```

当我尝试使用 Mono 编译它时，出现以下错误：

> 错误 CS0029：无法隐式转换类型`void' to` System.Collections.Generic.List'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:01:11.367

它不起作用，因为`l.Add(++item)`没有返回您的聚合（浮动列表） - 它返回`void`. 第二个参数应该是 type `Func<List<float>, float, List<float>>`。更改代码以返回聚合变量：

`(l, item) => { l.Add(++item); return l; }`

*顺便说一句*，您正在做的事情可以通过这种方式实现：

```
IList<float> modifiedList = list.Select(item => ++item).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:03:45.787

改变

```
l.Add(++item) 
```

到

```
{ l.Add(++item); return l; } 
```

因为您需要在聚合的后面返回一个列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:04:57.377

根据 的签名[`IEnumerable.Aggregate`](http://msdn.microsoft.com/en-us/library/bb548651.aspx)，第二个参数应该是`Func<TSource, TSource, TSource>`- 在您的情况下，`(float, float) => float`. But[`List.Add`](http://msdn.microsoft.com/en-us/library/3wcytfd1%28v=vs.80%29.aspx)是一个`void`函数，并且不返回一个`float`. 因此编译错误。

# delphi - 这个程序花费了太多时间，甚至没有反应，有什么办法可以改善吗？

> ID：13123043
> 
> 赞同：1
> 
> 时间：2012-10-29T13:57:32.193
> 
> 标签：delphi, popup

1、添加弹出菜单命名`PopupMenu1`

2、添加菜单项命名`TestMI`

3、添加按钮

和代码：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  MItems: array of TMenuItem;
  SList: TStringList;
  FileRec: TSearchrec;
  i: integer;
begin

  SList := TStringList.Create;
 //3000+ files 
  if FindFirst('C:\Windows\System32\*', faNormal or faDirectory, FileRec) = 0
    then
    repeat
      if (FileRec.Name = '.') or (FileRec.Name = '..') then
        Continue;

      SList.Add(FileRec.Name);

    until FindNext(FileRec) <> 0;
  FindClose(FileRec);

  if SList.Count > 0 then
  begin
    SetLength(MItems, SList.Count);
    for i := 0 to SList.Count - 1 do
    begin

      MItems[i] := TMenuItem.Create(TestMI);
      MItems[i].Caption := SList[i];

    end;

    TestMI.Add(MItems);

  end;
end; 
```

当我点击按钮时，它是好的，但是当我弹出 `PopupMenu1`并继续时 `TestMI`，因为文件太多它没有响应。

有什么办法可以解决吗？

更新：

我必须使用 PopupMenu 来执行此操作。

我找了个程序，能快点，150ms

[https://docs.google.com/open?id=0B1sDNMAzGE2oZWpTWlpWNHJGZzQ](https://docs.google.com/open?id=0B1sDNMAzGE2oZWpTWlpWNHJGZzQ)

它使用[**BarMenu 组件**](http://www.vclcomponents.com/Delphi/Menus/BarMenu_Components-info.html)

但我无法在 Delphi 2009 中编译。错误：

库\栏菜单：

```
{$IFDEF MSWINDOWS}
  {$IFNDEF DFS_COMPILER_5_UP}
     {$MESSAGE FATAL 'You need Delphi 5 or higher in order to compile this unit.'}
  {$ENDIF}
  Windows, SysUtils, Classes, Graphics, Menus, Forms;
{$ENDIF} 
```

更新到@Sertac Akyuz

在第一种情况下，您的解决方案很有用。非常感谢。我改变了那个案例代码：

```
unit Unit1;

interface

uses
  Windows,
  Messages,
  SysUtils,
  Variants,
  Classes,
  Graphics,
  Controls,
  Forms,
  Dialogs,
  StdCtrls,
  Menus;

type
  TForm1 = class(TForm)
    Button1: TButton;
    PopupMenu1: TPopupMenu;
    TestMI: TMenuItem;
    procedure Button1Click(Sender: TObject);
    procedure CreMI(MI: TMenuItem);
    procedure IMonClick(Sender: TObject);
    procedure AddSubEmpItem(MI: TMenuItem);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.IMonClick(Sender: TObject);
begin

  CreMI(TMenuItem(Sender));

end;

procedure TForm1.AddSubEmpItem(MI: TMenuItem);
var
  EmpIM: TMenuItem;
begin

  EmpIM := TMenuItem.Create(MI);
  with EmpIM do
  begin
    Caption := '(Folder empty)';
    Enabled := False;
    Hint := '';
    MI.Add(EmpIM);
  end;

end;

procedure TForm1.CreMI(MI: TMenuItem);
var
  MItems: array of TMenuItem;
  SList: TStringList;
  FileRec: TSearchrec;
  i: integer;
begin

  if (MI.Items[0].Caption = '(Folder empty)') and (MI.Count = 1) then
  begin

    SList := TStringList.Create;

    if FindFirst(MI.Hint + '\*', faNormal or faDirectory, FileRec) = 0
      then
      repeat
        if (FileRec.Name = '.') or (FileRec.Name = '..') then
          Continue;

        SList.Add(FileRec.Name);

      until FindNext(FileRec) <> 0;

    FindClose(FileRec);

    if SList.Count > 0 then
    begin

      SetLength(MItems, SList.Count);
      for i := 0 to SList.Count - 1 do
      begin

        MItems[i] := TMenuItem.Create(MI);
        MItems[i].Caption := SList[i];
        MItems[i].Hint := MI.Hint + SList[i] + PathDelim;
        AddSubEmpItem(MItems[i]);
        MItems[i].OnClick := IMonClick;
        MItems[i].AutoHotkeys := maManual;

      end;

      MI.Add(MItems);
      MI.AutoHotkeys := maManual;

    end;
  end;
  //Button1.Caption := IntToStr(MI.Count);

end;

procedure TForm1.Button1Click(Sender: TObject);

begin

  AddSubEmpItem(TestMI);
  CreMI(TestMI);

end;

end. 
```

放`TestMI.Hint := C:\`

单击按钮，当我继续前进时`C:\ -> Windows -> System32` 也没有响应。你能给点建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:28:51.390

快速测试显示时间花费在`InternalRethinkHotkeys`. 热键对超过 3000 个项目的菜单没有帮助。只需禁用它：

```
 ..
    TestMI.Add(MItems);
    TestMI.AutoHotkeys := maManual; // <--

  end;
end; 
```

话虽如此，还可以考虑使用其他一些 gui 元素，如列表框等，滚动菜单中的这么多项目实际上是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:25:54.517

首先，假设你真的很聪明，知道创建一个包含一百万个项目的菜单是愚蠢的，所以让我们借此机会讨论技术问题，因为正如所有评论者所说，你的想法不是可行，但也许在您的实际程序中，您将仅在计算机上的文件夹中构建一个 word 文档列表，因此您选择 Windows 文件夹只是为了说明。那么让我们继续：

一个刚入门的 Delphi 程序员可能会在其中插入`Application.ProcessMessages`调用，现在，您的应用程序将不会显示“无响应”，但是您将引入一些潜在的坏事（包括崩溃）发生，这取决于您其余部分的情况应用。如果这是一个一次性程序，我会很想简单地添加“Application.ProcessMessages”调用（通过循环大约一次 100 次），并且我的应用程序不会显示“无响应”。

但是，在真正稳定的生产代码环境中，您应该将 UI 构建代码（视图构建器）与后台工作线程分开。

并且工作线程也不会很容易实现，因为您正在有效地使用不应从后台线程访问的 VCL 类构建菜单。如果你真的想生成一个包含 100,000 个项目的弹出菜单，那么没有什么好的快速方法可以做到这一点。

我建议你应该考虑一些面向对象的设计：

1.  工作线程限制了它将构建的项目列表的大小。
2.  当工作线程完成`FindFirst`循环并继续创建菜单项时，考虑使用`TThread.Synchronize()`或其他一些安全的方法来确保从后台线程调用的添加菜单项的方法可以安全地执行此操作。

**更新**对此问题的编辑使这个答案相当过时。可悲的是，这个问题是一个移动的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:33:52.187

你说：

> 当我点击按钮时，没关系

所以我假设文件搜索很快，并且它快速添加菜单选项，所以后台线程不会解决你的问题。您的问题是您将数千个条目填充到菜单中，这是行不通的。你需要重新思考。也许列表框会更好。请务必使用 BeginUpdate/EndUpdate 来封闭您的循环。

# google-chrome - 在 chrome 扩展中，twitter bootstrap css 发生冲突

> ID：13123044
> 
> 赞同：5
> 
> 时间：2012-10-29T13:57:33.910
> 
> 标签：google-chrome, google-chrome-extension, twitter-bootstrap

我正在将引导程序用于我正在编写的 chrome 扩展。当作为内容脚本导入时，css 似乎与我正在查看的许多网站发生冲突（即使在谷歌搜索结果页面中）。

想知道我是否可以做些什么来将其范围仅限于我使用内容脚本注入的 dom 元素？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-31T17:48:39.093

解决方案是使用`<style scoped>`.

本质上，它允许您将样式应用于 DOM 节点及其子节点，**但不能应用于其父节点**。[有一篇关于CSS-Tricks](http://css-tricks.com/saving-the-day-with-scoped-css/)的好文章解释了如何使用它。

问题是它没有得到很好的支持，即使在 Chrome 中也是如此，所以你必须使用 jQuery polyfill。这基本上是一个 jQuery 插件，可以模拟您期望从`<style scoped>`.

这是一个使用 Bootstrap 完成的工作[JSFiddle 。](http://jsfiddle.net/Yqvm7/)

这是一个如何在扩展中实现它的示例：

**content_script.js**：

```
$.scoped(); // Initialize the plugin
...
bootstrapped = document.createElement("div");
bootstrapped.innerHTML = "<style scoped>";
bootstrapped.innerHTML += "@import url('http://twitter.github.com/bootstrap/assets/css/bootstrap.css');";
bootstrapped.innerHTML += "</style>";
document.body.appendChild(bootstrapped);    
...
document.body.appendChild(myDOM); // Will not possess Bootstrap styles
bootstrapped.appendChild(myDOM); // Will possess Bootstrap styles 
```

现在，请确保在您的页面中包含 jQuery 以及 Scoped Plugin：

```
"content_scripts": [ {
    "js": [ "jquery.min.js", "jquery.scoped.min.js", "content_script.js" ],
    "matches": [ "http://*" ]
}] 
```

# javascript - 如果函数的类型等于未定义，我如何返回 false？

> ID：13123054
> 
> 赞同：0
> 
> 时间：2012-10-29T13:58:03.053
> 
> 标签：javascript

在 JavaScript 中，如果对象或函数的类型未定义，有没有办法显示消息或返回 false？似乎如果某个对象或函数不存在，则无法在屏幕上显示错误消息，而是在 Web 控制台中显示错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T13:59:17.797

这应该有助于：

```
if (typeof foo === "undefined") {
    // foo is undefined
} 
```

或者（参见[Otto 的回答](https://stackoverflow.com/a/13123156/535871)），您也可以使用：

```
if (foo === void(0)) {
    // foo is undefined
} 
```

您不应该*使用*，`if (foo === undefined)`因为（正如[Alnitak 指出的那样](https://stackoverflow.com/a/13123084/535871)），全局属性`undefined`在某些浏览器中可能具有非默认值（从 JavaScript 1.8.5-Firefox 4 开始，它是只读属性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T13:59:26.623

运算符将为您提供变量的类型，如果未定义变量`typeof`，则为您提供字符串。`"undefined"`

```
if (typeof myvar === 'undefined') {
    // it's not defined
} 
```

或者，如果你想要一个布尔值：

```
var itsDefined = (typeof myvar !== 'undefined'); 
```

这名义上比测试更安全：

```
if (var === undefined) 
```

因为在某些浏览器上`undefined`可能会被覆盖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T14:04:10.550

（强制性回答，包括过度杀伤第三方库）

[下划线.js _.isUndefined()](http://underscorejs.org/#isUndefined)

有趣的是，它使用的方法与此处提供的其他答案略有不同：

```
_.isUndefined = function(obj) {
    return obj === void 0;
  };
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T14:01:52.703

在访问变量的任何方法或孙属性之前，您应该检查它是否使用`typeof`检查 ( `typeof x==="undefined"`) 或 try catch 定义：

```
try{
    x.method();
}catch(e){
    /*You could check the error message to see if the exception was thrown because x is undefined.*/
} 
```

# c# - 从 C# 中的 A 类更新 B 类中的 GUI 组件

> ID：13123061
> 
> 赞同：-2
> 
> 时间：2012-10-29T13:58:31.057
> 
> 标签：c#, .net, class

编辑：我看到我在这篇文章上得到了很多反对意见。我试图解释我试图做什么，我的错误在哪里以及想往哪个方向发展。我要求深入了解我做错了什么。如果您投反对票；请告诉我为什么，这样我就可以改进这个问题。谢谢。

我正在创建一个应用程序，其中有一个主窗体和几个不同的用户控件供用户使用。这有助于我拆分代码，管理程序的不同部分。以后扩展应用程序很容易。

我正在尝试创建一个类，在其中管理我想调用该类中的一个函数的活动控件，并将应该变为活动的表单作为参数。

一张图片可以说明我如何尝试设置这个应用程序。![插图](../Images/ae8d62629a4699e2f6f1163bf7af9abc.png)请注意，控制管理器类不是我在下面显示的代码中的单独类，而是主窗体的部分类。非常欢迎任何关于如何在图像中获得它的提示:)

管理所有活动表单的类如下所示： 请注意，所有用户控件只是一个用户控件，上面有一些按钮/文本框等。还没有添加任何代码。

```
 public partial class STP2Main 
        {
// I make each UserControl accessable for the whole class
            SetupDeviceControl.SetupDevice SetupDev = new SetupDeviceControl.SetupDevice();
            GenConfigFileControl.GenConfigFileControl GenConfFile = new GenConfigFileControl.GenConfigFileControl();
            Monitoring.MonitoringControl Monitor = new Monitoring.MonitoringControl();
            GenEncKeyControl.GenEncKeyControl GenEncKey = new GenEncKeyControl.GenEncKeyControl();
            MenuControl.MenuControl MenuControl = new MenuControl.MenuControl();        

            public void SelectActiveWindow()
            {
                // Any active control should be hidden thats what this function does:
                HideCurrentActiveControl();
                // Check whether the window is already created
                if (!WindowExists())
                { // if not created; create the windows: 
                    switch (STP_Design.ProgramParameters.C.NextActiveControl)
                    {
                        case STP_Data.Data.SetupDeviceControl: // control 1:
                            STP_Design.ProgramParameters.C.CurrentActiveControl = STP_Data.Data.SetupDeviceControl;
                            STP_Design.ProgramParameters.C.SetupDeviceControlIsCreated = true;
                            SetupDev.Parent = this;
                            SetupDev.Location = new Point(3, 30);
                            SetupDev.Show();
                            SetupDev.BringToFront();
                            break;
                        case STP_Data.Data.MonitoringControl: //control 2:
                            STP_Design.ProgramParameters.C.CurrentActiveControl = STP_Data.Data.MonitoringControl;
                            STP_Design.ProgramParameters.C.MonitoringControlIsCreated = true;
                            Monitor.Parent = this;
                            Monitor.Location = new Point(3, 125);
                            Monitor.Show();
                            Monitor.BringToFront();
                            break;
                        case STP_Data.Data.MenuControl: // control 3
                            STP_Design.ProgramParameters.C.CurrentActiveControl = STP_Data.Data.MenuControl;
                            STP_Design.ProgramParameters.C.MenuControlIsCreated = true;  
                            MenuControl.Location = new Point(3, 30);
                            MenuControl.Parent = this;
                            MenuControl.Show();
                            MenuControl.BringToFront();
                            break;
                    }
                }
                else
                { // window is already created so needs to be called to front again:
                    switch (STP_Design.ProgramParameters.C.NextActiveControl)
                    {
                        case STP_Data.Data.SetupDeviceControl:
                            STP_Design.ProgramParameters.C.CurrentActiveControl = STP_Data.Data.SetupDeviceControl;
                            SetupDev.BringToFront();
                            break;
                        case STP_Data.Data.MonitoringControl:
                            STP_Design.ProgramParameters.C.CurrentActiveControl = STP_Data.Data.MonitoringControl;
                            Monitor.Visible = true;
                            Monitor.BringToFront();
                            break;
                        case STP_Data.Data.AdvancedMenu:
                            STP_Design.ProgramParameters.C.CurrentActiveControl = STP_Data.Data.AdvancedMenu;
                            tabControl1.Visible = true;
                            tabControl1.BringToFront();
                            break;

                        case STP_Data.Data.MenuControl:
                            STP_Design.ProgramParameters.C.CurrentActiveControl = STP_Data.Data.MenuControl;
                            MenuControl.Visible = true;
                            MenuControl.BringToFront();
                            break;
                    }

                }
                btnMenu.BringToFront();

            }
    // some functions which are called above are not shown; not relevant for this question
    } 
```

我的经验如下：我完全没有错误。但控制根本没有改变。如果我调用一个窗口，它只会创建一次，因为我确实将它作为我的 Mainform 的部分类。（我尝试了一个完整的单独类，这确实导致了线程错误，因为我不是一个有经验的 c# 程序员，我试图避免使用部分类。）

我将添加另一个功能；它根本不做任何事情：

```
 private void HideCurrentActiveControl()
    {
        switch (STP_Design.ProgramParameters.C.CurrentActiveControl)
        {
            case STP_Data.Data.SetupDeviceControl:
                SetupDev.Visible = false;
                break;
            case STP_Data.Data.MonitoringControl:
                tabControl1.Visible = false;
                Monitor.Visible = false;
                break;
            case STP_Data.Data.GenConfFileControl:
                GenConfFile.Visible = false;
                break;
            case STP_Data.Data.GenEncKeyControl:
                GenEncKey.Visible = false;
                break;
            case STP_Data.Data.MenuControl:
                MenuControl.Visible = false;
                break;
            case STP_Data.Data.AdvancedMenu:
                tabControl1.Visible = false;
                break;
            default:
                tabControl1.Visible = false;
                break;

        }
    } 
```

我已经尝试调试这部分代码并执行语句，但我根本看不到任何变化。

我想我已经展示了我正在尝试做的事情；以及我如何尝试做到这一点。我的问题是：我如何访问这些表单，以便我可以从一个单独的类（或者在这种情况下是主表单的部分类）管理它们。

然后我有最后一个函数，它做了一些奇怪的事情。在调用 SelectActiveWindow() 函数之前，我将变量 STP_Design.ProgramParameters.C.NextActiveControl 更新为例如：...AdvancedMenu。（这是在那之前...MenuControl）但它总是表明它仍然是MenuControl。除了在我启动函数之前，我的代码中没有任何地方可以更改该值。（我也尝试将 nextcontrol 作为函数 SelectActiveWindow() 的参数，但这也是一样的）

```
 private bool WindowExists()
    {
        switch (STP_Design.ProgramParameters.C.NextActiveControl)
        {
            case STP_Data.Data.SetupDeviceControl:
                if (STP_Design.ProgramParameters.C.SetupDeviceControlIsCreated)
                    return true;
                else
                    return false;
            case STP_Data.Data.MonitoringControl:
                if (STP_Design.ProgramParameters.C.MonitoringControlIsCreated)
                    return true;
                else
                return false;
            case STP_Data.Data.GenConfFileControl:
                if (STP_Design.ProgramParameters.C.GenConfFileIsCreated)
                    return true;
                else
                    return false;
            case STP_Data.Data.GenEncKeyControl:
                if (STP_Design.ProgramParameters.C.GenEncKeyControlIsCreated)
                    return true;
                else
                    return false;
            case STP_Data.Data.AdvancedMenu:
                return true;
            case STP_Data.Data.MenuControl:
                if (STP_Design.ProgramParameters.C.MenuControlIsCreated)
                    return true;
                else
                    return false;

            default:
                return false;
        }
    } 
```

我正在寻找的总结：我有一个主窗体，其中显示不同的用户控件。我正在尝试创建一个单独的类，可以从我的项目中的每个控件/窗体访问。此类应管理显示的控件。在上面的代码中，我说明了我是如何尝试这样做的，但这不会产生预期的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:09:36.293

好的，现在我了解所需的上下文。我们实际上在我的程序中做了一些非常相似的事情。这是我们如何做到这一点的基本概述......

**布局**

在主窗体上，我们有一个*Panel*容器，我们称之为`pnlMain`. 正是这个控件，我们从中添加和删除活动用户控件。我们在*表示*`curActiveControl`.

**代码**

当用户通过其中一个菜单选择一个窗口时，我们运行一个看起来像这样的函数

```
switch (UserSelection)
{
    case "Page 1":
        if(curActiveControl.GetType() != typeOf(Page1Control))
        {
            pnlMain.Controls.Remove(curActiveControl);
            curActiveControl = new Page1Control();
            //do setup and configuration things
            pnlMain.Controls.Add(curActiveControl);
        }
        //do some post processing things
        break;
    //other pages/specific page controls
}

Refresh(); 
```

这种特定方法的缺点是页面本身不是持久的，因此如果您希望在会话中而不是仅在页面上激活条目或变量，则必须将它们存储在其他一些全局对象中并重新加载它们来自用户控件的 Load 或 Constructor 方法。

你可以做同样的事情，但不是每次都创建一个新的控件实例，`curActiveControl`你可以简单地将它替换为新控件的备用实例。不过要小心引用和覆盖，这不是我个人以前尝试过的。

我们使用的方法中的关键是保存用户控件的面板。与其调整大量用户控件的可见性和 Z-Order，我们只需更改主面板中显示的控件，而其他控件甚至在任何给定时间点都不存在。

另一个问题是这个功能直接在我们的主窗体上。我不知道这作为另一个部分课程会有多好。不过，它绝对值得一试。

# excel - 我想使用 VBA 将值放入网络表单

> ID：13123062
> 
> 赞同：-1
> 
> 时间：2012-10-29T13:58:36.687
> 
> 标签：excel, vba

我编写了以下 VBA 代码来自动登录到第三方应用程序。当我运行下面的代码时，它只打开 Internet Explorer 浏览器并导航到链接，然后什么也不做。这是我的代码：

```
Sub Login_Aravo()

Dim ie

Dim sURL As String

On Error GoTo Err_Clear

sURL = "https://demo.aravo.com/"

Set ie = CreateObject("InternetExplorer.Application")

ie.Visible = True

ie.navigate sURL

Do

' Wait till the Browser is loaded

Loop Until ie.readyState = READYSTATE_COMPLETE

ie.Document.all.Item("j_username").Value = "Nothing" 'Enter your username here

ie.Document.all.Item("j_password").Value = "Nothing" 'Enter your password here

ie.Document.all.Item("login").Click

' oBrowser.Refresh ' Refresh If Needed

Err_Clear:

If Err <> 0 Then

'Debug.Assert Err = 0

Err.Clear

Resume Next

End If

End Sub 
```

您的帮助将不胜感激。

感谢奥雅纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:07:29.603

如果你慢慢地通过它，你的代码就可以工作。

问题是您正在加载一个重定向的页面，因此在加载第一页后它错误地触发了 READYSTATE 完成。

纠正此问题的最简单方法是仅加载您最终加载的页面。如果您将您的 sURL 更改为： `sURL = "https://demo.aravo.com/aems/login.do"`代码完美运行。

或者，您可以在第一个循环之后进行第二个循环，以确保您的登录页面已加载。像这样的东西：

```
On Error Resume Next
 'This will loop until the correct page loads.
 Do
     Err.Clear
     ie.document.all.Item("j_username").Value = ""
 Loop Until Err.Number = 0 
```

# razor - 如何使用剃刀语法动态地将类添加到 html 元素？

> ID：13123067
> 
> 赞同：23
> 
> 时间：2012-10-29T13:58:50.137
> 
> 标签：razor

我想`<tr>`根据模型的属性向元素添加类：

```
<table>
  <tbody>
   @foreach (var item in Model)
   {
     if (item.Level == 1)
     {
       <tr class="classA">
     }
     else if (item.Level == 2)
     {
       <tr class="classB">
     }
     else
     {
       <tr>
     }

     <td>...</td>
     <td>...</td>         

     </tr>
   </tbody>
</table> 
```

我的 IDE 告诉我我的`<tr>`元素没有关闭。如何使用剃刀动态添加类值？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-29T14:10:02.443

我会使用三元运算符吗？并写出类似的东西。

```
<tr class="@(item.Level==1?"classA":item.Level == 2?"classB":"")"> 
```

它的可读性不是很好，并且不适用于复杂的比较。在这些情况下，我建议您在剃刀视图中声明一个方法

```
@functions{ 
  public string GetClassFromLevel(int level) 
    {
        return level == 1 ? "classA" : level == 2 ? "classB" : "";
  }
}

<tr class"@GetClassFromLevel(item.Level)"> 
```

# jquery - 更改类后的jQuery id和类选择器

> ID：13123069
> 
> 赞同：4
> 
> 时间：2012-10-29T13:58:52.240
> 
> 标签：jquery

我是这个论坛的新手，对 jQuery 也很陌生，所以它（我认为）是一个基本问题，但我找不到答案，我尝试的一切都没有奏效。

我在页面上有一个按钮，应该做某些事情并更改课程。并通过新课程恢复这些东西。

这是代码：

```
 $("#info_button.buttonOff").click(function() {
    $(".content").slideUp(300, function() {
        $("#info").slideDown(300);
        $("#info").addClass("contentOn");
        $("#info_button").removeClass("buttonOff").addClass("buttonOn");
        $("#overlay").fadeIn(300);
    });
});

$("#info_button.buttonOn").click(function() {
    $(".content").slideUp(300);
    $("#info").removeClass("contentOn");
    $("#info_button").removeClass("buttonOn").addClass("buttonOff");
    $("#overlay").fadeOut(300);
}); 
```

第一个事件单独工作。但是，一旦我添加了第二个事件，就不再起作用了。我想我必须用 .unbind() 做点什么，但不知道怎么做。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T14:00:29.807

问题是 jQuery 集合只计算一次。

采用

```
$(document).on('click', "#info_button.buttonOff", function() { 
```

和

```
$(document).on('click', "#info_button.buttonOn", function() { 
```

这样，每次点击时都会测试选择器。

由于您的元素有一个 ID，一个更轻的解决方案可能是

```
$("#info_button").click(function() {
    if ($(this).hasClass('buttonOn')) {
       // do something
    } else {
       ... 
```

但我通常更喜欢第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:03:57.507

最简单的解决方案是在按钮的单击处理程序中测试类：

```
$("#info_button").click(function() {
  if ($(this).hasClass('buttonOff')) {
    // ...
  } else if ($(this).hasClass('buttonOn')) {
    // ...
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:04:44.937

采用 ：

```
$(document).on('click', "#info_button", function() {
    $(".content").slideUp(300, function() {
        if ($("#info").is(':visible'))
            $("#info").slideUp(300);
        else
            $("#info").slideDown(300);
        $("#info").toggleClass("contentOn");
        this.toggleClass("buttonOn").toggleClass("buttonOff");
        if ($("#overlay").is(':visible'))
            $("#overlay").fadeOut(300);
        else
            $("#overlay").fadeIn(300);
    });
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-29T14:04:48.123

可能发生的情况是您的两个绑定事件都引用同一个元素，因此这些函数可能会相互干扰。

你可以尝试做这样的事情：

```
$("#info_button").click(function() {
if($(this).hasClass('buttonOff') {
    $(".content").slideUp(300, function() {
        $("#info").slideDown(300);
        $("#info").addClass("contentOn");
        $("#info_button").removeClass("buttonOff").addClass("buttonOn");
        $("#overlay").fadeIn(300);
    });
} else if($(this).hasClass('buttonOn') {
$(".content").slideUp(300);
    $("#info").removeClass("contentOn");
    $("#info_button").removeClass("buttonOn").addClass("buttonOff");
    $("#overlay").fadeOut(300);
    });
}
}); 
```

# javascript - 在一个链接上同时运行 jQuery 和 JavaScript（不是按钮）

> ID：13123070
> 
> 赞同：-2
> 
> 时间：2012-10-29T13:58:52.487
> 
> 标签：javascript, jquery

我正在尝试使用一个链接同时运行 jQuery 和 Javascript 代码。基本上导航栏将从屏幕中间开始，然后单击菜单后，导航栏和徽标将动画到顶部并显示该页面的内容。谁能帮我？

我也可以说我只是一个初学者，所以我的知识非常糟糕！任何帮助，将不胜感激！

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
       <title>****</title>
    <link href="design/style.css" rel="stylesheet" type="text/css"/>
    <script type="text/jquery" src="design/scripts/jquery.js"> </script>
    <script type="text/javascript" src="design/scripts/homes.js"> </script>
        <script>
        $(document).ready(function(){
        $(".topPage").click(function(){
        $("#headingBlock").animate({marginTop:"=0px"});
         });
         $("#midPage").click(function(){
     $("#headingBlock").animate({marginTop:"=150px"});
     });
    });
    </script>

</head>
<body>
    <div id="headingBlock">
    <div id="logo">
    <a href="index.html"> <img src="design/images/pmb_logo.png" alt="****"/>
    </a>
    </div>
    </div>

<div id="navStrip">
    <div id="navBlock">
    <div id="nav">
        <a href="index.html" id="midPage">Home</a>
        <a href="#" class="topPage" onclick="switchMain1()">Our Homes</a>
        <a href="#" class="topPage" onclick="switchMain2()">Displays</a>
        <a href="#" class="topPage" onclick="switchMain3()">Where we build</a>
        <a href="#" class="topPage" onclick="switchMain4()">Why PMB?</a>
        <a href="#" class="topPage" onclick="switchMain5()">Style</a>
        <a href="#" class="topPage" onclick="switchMain6()">Contact Us</a>
     </div>
    </div>
</div>

<div id="mainContainerHomes" style="visibility:hidden">

<div class="mainContent" > 

<p> Lorem Ipsum is simply dummy text of the printing and typesetting industry.<br> 
Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, <br>
when an unknown printer took a galley of type and scrambled it to make a type <br>
specimen book. It has survived not only five centuries, but also the leap into <br>
electronic typesetting, remaining essentially unchanged. It was popularised in the <br>
1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more <br>
recently with desktop publishing software like Aldus PageMaker including versions of <br>
Lorem Ipsum. </p>

</div>

</div>

<div id="mainContainerDesign" style="visibility:hidden">

<div class="mainContent" > 

<p> Lorem Ipsum is simply dummy text of the printing and typesetting industry.<br> 
Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, <br>
when an unknown printer took a galley of type and scrambled it to make a type <br>
specimen book. It has survived not only five centuries, but also the leap into <br>
electronic typesetting, remaining essentially unchanged. It was popularised in the <br>
1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more <br>
recently with desktop publishing software like Aldus PageMaker including versions of <br>
Lorem Ipsum. </p>

</div>

</div>

<div id="footer">

<h1> Designed by *** </a> </h1>

</div>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:07:41.863

一种选择是删除您的`onclick="..."`并尝试以下操作：

```
jQuery(document).ready(function($){
    $(".topPage").click(function(){
        $("#headingBlock").animate({marginTop:"0px"});
        switchMain($(this).index());
        return false; // stop propagation and page jump
    });
    $("#midPage").click(function(){
         $("#headingBlock").animate({marginTop:"150px"});
    });
}); 
```

然后创建一个`switchMain`根据传入的索引执行每个 1-6 执行的操作（在给定示例中为 0-6）

# c++ - 如何使用 C++ 在 ActiveDirectory 中获取 maxpwdAge 属性值？

> ID：13123075
> 
> 赞同：0
> 
> 时间：2012-10-29T13:59:00.057
> 
> 标签：c++, windows, winapi, active-directory

我正在使用 AD 服务器，我想获取**maxpwdAge 属性**值...

我已经为此尝试过 ADSi，但它给出了一个问题。

```
VARIANT var;
bsNamingContext=L"maxpwdAge";

hr = ADsGetObject(pszADsPath, IID_IADsUser, (void**) &pUser);
if(SUCCEEDED(hr))
{
VariantInit(&var);
hr = pUser->Get(bsNamingContext, &var);  
} 
```

但是，它给出了-2147463155（8000500d）错误......

但我正在使用 `bsNamingContext=L"cn";` 它正确地给出 CN 值......

任何人都可以解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:14:13.633

[maxpwdAge](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676863%28v=vs.85%29.aspx)不包含在 user/contact/person LDAP 类中，因此您无法以这种方式检索它。

您需要从**域**对象而不是**用户**对象中查询它

尝试这个：

```
Const ONE_HUNDRED_NANOSECOND = .000000100   ' .000000100 is equal to 10^-7
Const SECONDS_IN_DAY = 86400

Set objDomain = GetObject("LDAP://DC=fabrikam,DC=com")     ' LINE 4
Set objMaxPwdAge = objDomain.Get("maxPwdAge")              ' LINE 5

If objMaxPwdAge.LowPart = 0 Then
  WScript.Echo "The Maximum Password Age is set to 0 in the " & _
               "domain. Therefore, the password does not expire."
  WScript.Quit
Else
  dblMaxPwdNano = Abs(objMaxPwdAge.HighPart * 2^32 + objMaxPwdAge.LowPart)
  dblMaxPwdSecs = dblMaxPwdNano * ONE_HUNDRED_NANOSECOND   ' LINE 13
  dblMaxPwdDays = Int(dblMaxPwdSecs / SECONDS_IN_DAY)      ' LINE 14
  WScript.Echo "Maximum password age: " & dblMaxPwdDays & " days"
End If 
```

**更新：**

要将大整数转换为人类可读的值，请使用[IADsLargeInteger](http://msdn.microsoft.com/en-us/library/windows/desktop/aa706037%28v=vs.85%29.aspx)调度接口

**注 1**：示例是在 VB 中，但您可以轻松地重写它，因为 COM。

**注 2**：maxpwdAge 不是按用户配置，而是按域配置（直到启用细粒度密码策略）

**进一步阅读：**

*   [http://msdn.microsoft.com/en-us/library/ms974598.aspx](http://msdn.microsoft.com/en-us/library/ms974598.aspx) **[推荐]**
*   [http://msdn.microsoft.com/en-us/library/cc220201%28prot.20%29.aspx](http://msdn.microsoft.com/en-us/library/cc220201%28prot.20%29.aspx)
*   [http://ldapwiki.willeke.com/wiki/AD%20Determining%20Password%20Expiration](http://ldapwiki.willeke.com/wiki/AD%20Determining%20Password%20Expiration)
*   [http://ldapwiki.willeke.com/wiki/Domain%20Wide%20Account%20Policies](http://ldapwiki.willeke.com/wiki/Domain%20Wide%20Account%20Policies)

# java - 集合的唯一约束 与休眠

> ID：13123076
> 
> 赞同：2
> 
> 时间：2012-10-29T13:59:09.107
> 
> 标签：java, hibernate

我有一个包含如下集合的实体：

```
@ElementCollection
Set<String> branches; 
```

现在 Hibernate 所做的是创建一个表`project_branches`(project_id | 分支) 并在`branches`. 有没有办法告诉hibernate唯一约束应该同时涉及`project_id` **和** `branches`？

我找不到这个问题的答案，虽然我认为我不是第一个遇到这个问题的人......谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:57:39.983

好的，我找到了解决方案：实体字段支持注释`@CollectionTable`，所以我能够像这样解决它：

```
@ElementCollection(fetch = FetchType.EAGER)
@CollectionTable(name = "project_branches", uniqueConstraints = @UniqueConstraint(columnNames = {
        "project_id", "branches" }))
Set<String> branches = new HashSet<String>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T14:14:42.623

这取决于映射中涉及的列。

还有另一种配置。`UniqueConstraint`请考虑在实体级别添加注释，例如：

```
 @Table(name="project_branches",
    uniqueConstraints = {@UniqueConstraint(columnNames={"project_id", "branches"})}
  ) 
```

**编辑：**尝试使用`@CollectionTable`注释。

```
 @ElementCollection
 @CollectionTable(
    name="project_branches",
    joinColumns=@JoinColumn(name="branches"),
    uniqueConstraints = {@UniqueConstraint(columnNames={"project_id", "branches"})}
  )
  Set<String> branches; 
```

# c# - 非标量时ServiceStack反序列化获取请求

> ID：13123080
> 
> 赞同：1
> 
> 时间：2012-10-29T13:59:22.330
> 
> 标签：c#, web-services, servicestack

假设我有一个 Order 对象，具有唯一的 OrderNo（实际上是一个 id）。它看起来像这样：

```
[Route("/orders/{OrderNo}", "GET")]
class Order
{
    OrderNo OrderNo;
}

class OrderNo
{ 
  ulong Value {get;set;}
} 
```

现在有一个像这样的常规 GET 请求：

```
www.myservice.com/orders/123 
```

我收到反序列化错误，因为 Order 的 OrderNo 属性不是标量。我想知道如何自定义反序列化以适应额外的层。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T17:33:53.813

问题出在哪里应该很明显，您无法在路由映射中的对象图上进行匹配。使 OrderNo 成为标量变量（例如 int、long 等）。

# c# - SQL 脚本兼容 SQL Server 2005

> ID：13123082
> 
> 赞同：0
> 
> 时间：2012-10-29T13:59:25.220
> 
> 标签：c#, unit-testing, sql-server-2005

我有一个应用程序，这会将一些存储过程“安装”到本地数据库中。

我想进行单元测试以验证存储过程，以便从 SQL Server 2005 及更高版本开始有效。

有没有办法在有/没有 SQL Server 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:07:13.880

Data Dude (Gert Drapers) 在此处描述了如何在您的应用程序中使用内置的 SQL Server T-SQL 解析器：

*   [前往皇冠珠宝](http://blogs.msdn.com/b/gertd/archive/2008/08/21/getting-to-the-crown-jewels.aspx)

如果您只想检查您拥有的 SQL 代码的有效性 - 这可能是一个不错的方法，并且它不需要在您运行单元测试的地方安装 SQL Server 本身。

# ssl - CAS + SSLHandshakeException + ValidatorException + PKIX 路径构建失败 + 无法找到请求目标的有效证书路径

> ID：13123083
> 
> 赞同：4
> 
> 时间：2012-10-29T13:59:25.950
> 
> 标签：ssl, spring-security, ssl-certificate, single-sign-on, cas

我正在开发中央身份验证系统 (jasig.org) 以为我的 Intranet Web 应用程序实施单点登录功能。我有两个 tomcat 实例在我的同一台机器（Windows）上运行。两个 tomcat 实例都已配置为使用 SSL 并使用自签名证书（使用 java keytool 创建）。

# 雄猫1

Cas 服务器。

## 服务器.xml

```
<Connector port="8443" maxHttpHeaderSize="8192" SSLEnabled="true"
               maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
               enableLookups="false" disableUploadTimeout="true"
               acceptCount="100" scheme="https" secure="true"
               clientAuth="false" sslProtocol="TLS" 
           keystoreFile="C:/Users/sandip.paul/.keystore"
           keystorePass="changeit"
           truststoreFile="C:/Program Files/Java/jdk1.6.0_20/jre/lib/security/cacerts" /> 
```

# 雄猫2

myWebApp（使用弹簧安全）

## 服务器.xml

```
<Connector port="8663" maxHttpHeaderSize="8192" SSLEnabled="true"
               maxThreads="150" minSpareThreads="25" maxSpareThreads="75"
               enableLookups="false" disableUploadTimeout="true"
               acceptCount="100" scheme="https" secure="true"
               clientAuth="false" sslProtocol="TLS" /> 
```

下面是 myWebApp 的 applicationContext-security.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:security="http://www.springframework.org/schema/security"
    xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
                        http://www.springframework.org/schema/security
                        http://www.springframework.org/schema/security/spring-security-2.0.4.xsd">

    <!--
        Enable security, let the casAuthenticationEntryPoint handle all intercepted urls.
        The CAS_FILTER needs to be in the right position within the filter chain.
    -->
    <security:http entry-point-ref="casProcessingFilterEntryPoint" auto-config="true">
        <security:intercept-url pattern="/protected/**" access="IS_AUTHENTICATED_FULLY" />
    </security:http>

    <!--
        Required for the casProcessingFilter, so define it explicitly set and
        specify an Id Even though the authenticationManager is created by
        default when namespace based config is used.
    -->
    <security:authentication-manager alias="authenticationManager" />

    <!--
        This section is used to configure CAS. The service is the
        actual redirect Client URL that will be triggered after the CAS login sequence.
    -->
    <bean id="serviceProperties" class="org.springframework.security.ui.cas.ServiceProperties">
        <property name="service" value="https://obll1973.abc.com:8663/myWebApp/j_spring_cas_security_check"/>
        <property name="sendRenew" value="false"/>
    </bean>

    <!-- 
        The customUserDetailsService provides ROLE & other Details and 
        create an object of UserDetail for this application.
    -->
    <bean id="customUserDetailsService"
        class="edu.sandip.cas.client.authentication.CustomUserDetailsService">
    </bean>

    <!-- 
        The CasProcessingFilter has very similar properties to the 
        AuthenticationProcessingFilter (used for form-based logins).

        The CAS Processing filter handles the redirect from the CAS server 
        and starts the ticket validation.
    -->
    <bean id="casProcessingFilter" class="org.springframework.security.ui.cas.CasProcessingFilter">
        <security:custom-filter after="CAS_PROCESSING_FILTER"/>
        <property name="authenticationManager" ref="authenticationManager"/>
        <property name="authenticationFailureUrl" value="/casfailed.jsp"/>
        <property name="defaultTargetUrl" value="/"/>
    </bean>

    <!--
        The entryPoint intercepts all the CAS authentication requests.
        It redirects to the CAS loginUrl for the CAS login page.
    -->
    <bean id="casProcessingFilterEntryPoint" 
        class="org.springframework.security.ui.cas.CasProcessingFilterEntryPoint">
        <property name="loginUrl" value="https://obll1973.abc.com:8443/cas/login"/>
        <property name="serviceProperties" ref="serviceProperties"/>
    </bean>

    <!-- 
        Handles the CAS ticket processing.
    -->
    <bean id="casAuthenticationProvider" 
        class="org.springframework.security.providers.cas.CasAuthenticationProvider">
        <security:custom-authentication-provider />
        <property name="userDetailsService" ref="customUserDetailsService" />
        <property name="serviceProperties" ref="serviceProperties" />
        <property name="ticketValidator">
            <bean class="org.jasig.cas.client.validation.Cas20ServiceTicketValidator">
                <constructor-arg index="0" value="https://obll1973.abc.com:8443/cas" />
            </bean>
        </property>
        <property name="key" value="an_id_for_this_auth_provider_only"/>    
    </bean>

    <!-- 
        To access request.getRemoteUser() from client application  
    -->
    <bean id="wrappingFilter" class="org.jasig.cas.client.util.HttpServletRequestWrapperFilter" />
</beans> 
```

我面临的问题是以下异常：

```
java.lang.RuntimeException: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    org.jasig.cas.client.util.CommonUtils.getResponseFromServer(CommonUtils.java:341)
    org.jasig.cas.client.util.CommonUtils.getResponseFromServer(CommonUtils.java:305)
    org.jasig.cas.client.validation.AbstractCasProtocolUrlBasedTicketValidator.retrieveResponseFromServer(AbstractCasProtocolUrlBasedTicketValidator.java:50)
    org.jasig.cas.client.validation.AbstractUrlBasedTicketValidator.validate(AbstractUrlBasedTicketValidator.java:207)
    org.springframework.security.providers.cas.CasAuthenticationProvider.authenticateNow(CasAuthenticationProvider.java:145)
    org.springframework.security.providers.cas.CasAuthenticationProvider.authenticate(CasAuthenticationProvider.java:131)
    org.springframework.security.providers.ProviderManager.doAuthentication(ProviderManager.java:188)
    org.springframework.security.AbstractAuthenticationManager.authenticate(AbstractAuthenticationManager.java:46)
    org.springframework.security.ui.cas.CasProcessingFilter.attemptAuthentication(CasProcessingFilter.java:94)
    org.springframework.security.ui.AbstractProcessingFilter.doFilterHttp(AbstractProcessingFilter.java:258)
    org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    org.springframework.security.ui.logout.LogoutFilter.doFilterHttp(LogoutFilter.java:89)
    org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    org.springframework.security.context.HttpSessionContextIntegrationFilter.doFilterHttp(HttpSessionContextIntegrationFilter.java:235)
    org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    org.springframework.security.util.FilterChainProxy.doFilter(FilterChainProxy.java:175)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:236)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167) 
```

复制上述异常的步骤：1）我尝试使用[https://obll1973.abc.com:8663/myWebApp/protected/](https://obll1973.abc.com:8663/myWebApp/protected/)访问 myWebApp 2）它被重定向到 cas 服务器，即[https://obll1973.abc.com： 8443/cas/login](https://obll1973.abc.com:8443/cas/login)并在提供用户名/密码后在这里捕获异常，一旦 myWebApp 再次向 cas 服务器发送请求以验证生成的令牌。

任何建议/帮助都会受到高度评价。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T09:19:31.553

您的 Spring-CAS 配置看起来不错。

**出现SSLHandshakeException**的唯一原因是 SSL 密钥不正确地导入到创建的密钥库或 JVM 密钥库中。

## *在创建密钥期间，您是否遵循以下*

注意：CN 的别名（这里是 cas）应该与机器的主机名相同。

要查找机器的主机名，在控制台或命令提示符中只需键入不带引号的“主机名”。

在根目录下创建一个名为 app 的目录

> [root@localhost app]# keytool -genkey -alias cas -keyalg RSA -keystore .cas -storepass caspasswd
> 
> 你的名字和姓氏是什么？[未知]: cas 你的组织单位叫什么名字？[未知]：MYCOMPANY 贵组织的名称是什么？[未知]：MYCOMPANY 您所在城市或地区的名称是什么？[未知]：班加罗尔 您所在的州或省的名称是什么？[未知]：卡纳塔克邦这个单位的两个字母的国家代码是什么？[未知]：IN CN=cas、OU=MYCOMPANY、O=MYCOMPANY、L=Bangalore、ST=Karnataka、C=IN 是否正确？[否]：是的
> 
> Enter key password for (给出上面提到的密码——在这种情况下是 caspasswd) (如果与 keystore 密码相同则返回): 重新输入新密码:
> 
> [root@localhost app]# keytool -exportcert -alias cas -file cas.crt -keystore .cas 输入密钥库密码：证书存储在文件中
> 
> [root@localhost app]# ls cas.crt softwares test.class test.java tomcat7027CAS
> 
> [root@localhost app]# keytool -import -alias cas -file cas.crt -keystore /app/softwares/jdk1.6.0_27/jre/lib/security/cacerts 输入密钥库密码： Owner: CN=cas, OU=MYCOMPANY , O=MYCOMPANY, L=Bangalore, ST=Karnataka, C=IN 发行人：CN=cas, OU=MYCOMPANY, O=MYCOMPANY, L=Bangalore, ST=Karnataka, C=IN 序列号：510a6a63 有效期自：周四一月31 18:28:11 IST 2013 直到：Wed May 01 18:28:11 IST 2013 证书指纹：MD5: 52:8E:2E:74:C6:57:CD:B3:B0:B6:6C:17:D9 :0D:77:F3 SHA1: 1F:AA:4C:22:B9:16:DC:AA:D4:87:07:CF:DD:B2:11:A6:AE:36:9A:DB 签名算法名称: SHA1withRSA 版本: 3 信任这个证书吗？[否]：是 证书已添加到密钥库
> 
> [root@localhost app]# keytool -list -keystore /app/softwares/jdk1.6.0_27/jre/lib/security/cacerts -alias cas 输入密钥库密码：cas，2013 年 1 月 31 日，trustedCertEntry，证书指纹（MD5） : 52:8E:2E:74:C6:57:CD:B3:B0:B6:6C:17:D9:0D:77:F3
> 
> [root@localhost 应用程序]#

在您的 tomcat server.xml 中，您还可以使用 https 连接器，如下所示

```
<Connector port="8443" protocol="org.apache.coyote.http11.Http11Protocol" SSLEnabled="true"
               maxThreads="150" scheme="https" keystoreFile="/app/.cas" keystorePass="mykeypassword" 
    secure="true" connectionTimeout="240000" 
               clientAuth="false" sslProtocol="TLS" allowUnsafeLegacyRenegotiation="true" />
    <!-- Define an AJP 1.3 Connector on port 8009 -->
    <Connector port="8069" protocol="AJP/1.3" redirectPort="8443" /> 
```

上述密钥用于 CAS 服务器。您可以为应用程序创建自己的单独密钥。

但是这两个密钥都应该导入到 JVM cacerts 密钥库中（如何：在下面提到）

**现在最重要的部分：** 假设您的 CAS 服务器别名是 cas

并且您的应用程序服务器别名是 myapp

将密钥 cas.crt 和 myapp.crt 保留在两个服务器中以导入 JVM

**在两个服务器中执行以下操作：**

> 1) keytool -import -alias cas -file /app/cas.crt -keystore /usr/java/jdk1.5.0_22/jre/lib/security/cacerts
> 
> 2) keytool -import -alias myapp -file /app/cas.crt -keystore /usr/java/jdk1.5.0_22/jre/lib/security/cacerts

**要验证使用以下命令 -**

> 1) keytool -list -v -keystore /usr/java/jdk1.5.0_22/jre/lib/security/cacerts -alias cas
> 
> 2) keytool -list -v -keystore /usr/java/jdk1.5.0_22/jre/lib/security/cacerts -alias myapp

如果使用多个版本的 java，请确保 Java--JRE--LIB--SECURITY--CACERTS 文件

这将消除您的错误。

笔记 ：

**如果在提供正确的用户凭据后浏览器显示空白页面，请修改系统的主机文件（Linux 中的 /etc/hosts 和 Windows 中的 c:\windows\system32\driver\etc\hosts）**

在那里添加 cas 服务器 ip

例如。

162.25.250.60 myapp 162.25.250.81 cas

任何疑问都可以澄清。

您可以参考以下内容：

[https://wiki.jasig.org/display/CASUM/SSL+Troubleshooting+and+Reference+Guide](https://wiki.jasig.org/display/CASUM/SSL+Troubleshooting+and+Reference+Guide)

# sharepoint-2010 - 删除计算列表中的空格

> ID：13123089
> 
> 赞同：3
> 
> 时间：2012-10-29T13:59:46.387
> 
> 标签：sharepoint-2010

我创建了一个计算列，该列创建一个 URL，该 URL 调用一个名为“Pitch Name”的列，并从中创建 URL，但我必须从需要显示为 URL 的音高中删除单词之间的空格/空格。例如，“可口可乐”需要是“可口可乐”，因此站点名称可以是“http://sitename.com/CocaCola”。我尝试过使用 TRIM 功能，但这不起作用。我也尝试过 REPLACE 功能，但这似乎也不起作用。任何解决方案？

（取自尝试编辑答案：）
**更新：** REPLACE 和 FIND 函数有效，但前提是字符串包含所需字符的数量。如果字符出现的次数与公式要求的次数不同，您将始终得到字符串#VALUE，这意味着它没有工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T14:59:59.510

SharePoint 计算字段使用 Excel 函数，而不是 .NET 函数，因此您可能希望使用[SUBSTITUTE](http://office.microsoft.com/en-us/excel-help/substitute-function-HP010062578.aspx)而不是 REPLACE。

尝试这样的事情：

```
=SUBSTITUTE([Pitch Name], " ", "") 
```

**更新：**

根据 Xue-Mei Chang 在[计算场误差](http://social.technet.microsoft.com/Forums/en/sharepointgenerallegacy/thread/5487889f-5fc8-48e1-8ea2-28f8c9c8ad0c)中的说法：

> SharePoint 中不提供“SUBSTITUTE”功能。

作为一种解决方法，他建议：

> 对于“SUBSTITUTE”功能，您必须将“REPLACE”功能与“FIND”功能结合使用。“FIND”将返回所需字符在字符串中的位置，然后将其传递给“REPLACE”函数，以便它可以用新字符替换它。

# c - 文件之间的变量

> ID：13123094
> 
> 赞同：1
> 
> 时间：2012-10-29T14:00:03.987
> 
> 标签：c

> **可能重复：**
> [如何在不同的 .c 文件之间共享变量？](https://stackoverflow.com/questions/1045501/how-do-i-share-variables-between-different-c-files)

如果我有两个源文件和一个头文件：file1.c、file2.c 和 header.h，并且：

--header.h--

```
int i; 
```

--file1.c--

```
#include <header.h>
i = 10;

int main() {
func();
return 0;
} 
```

--file2.c--

```
#include <header.h>

void func() {
printf("i = %d\n", i);
return;
} 
```

我收到`i`默认为`int`. 如果我想拥有`i`例如，我该怎么办`float`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:03:48.770

做了

```
extern int i; 
```

在标题和

```
int i = 10; 
```

在`file1.c`.

警告意味着对于 中的（不完整）声明`i = 10;`，`file1.c`应用“隐式 int”规则，特别是，该行被解释为声明（因为赋值不能出现在函数范围之外）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:03:50.000

您的代码中有几个错误。首先是你在头文件中*定义*变量`i`，这意味着它将在所有包含头文件的源文件中定义。相反，您应该将变量*声明*为`extern`：

```
extern int i; 
```

另一个问题是您不能只分配给 file1.c 中全局范围内的变量。相反，您应该在那里定义变量：

```
int i = 10; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T14:04:53.783

**在标题中声明**它`extern`（这意味着它的内存被保留在其他地方）：

```
/* header.h */
extern int i; 
```

然后只在一个文件中**定义**`.c`它，即实际为它保留内存：

```
/* file1.c */
int i = <initial value>; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T14:08:26.270

在 99.9% 的情况下，在文件之间共享非常量的全局变量是糟糕的程序设计。您真正需要这样做的情况很少：它们非常罕见，以至于我无法提出任何有效的案例。可能是硬件寄存器的声明。

在大多数情况下，您应该使用（可能是内联的）setter/getter 函数（“public”）、文件范围内的静态变量（“private”）或不完整的类型实现（“private”）。

在极少数情况下，当您需要在文件之间共享变量时，请执行以下操作：

```
// file.h
extern int my_var;

// file.c
#include "file.h"
int my_var = something;

// main.c
#include "file.h"
use(my_var); 
```

切勿将任何形式的变量定义放在 h 文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T14:05:57.020

1.  在标题中使用

    外部国际我；

2.  在`file1.c`或者`file2.c`有

    诠释 i = 20;

3.  如果您`float`只想更改`int`为`float`

# telerik - 有一个 RadGrid 需要向列行添加工具提示

> ID：13123095
> 
> 赞同：2
> 
> 时间：2012-10-29T14:00:05.940
> 
> 标签：telerik, telerik-grid

我正在使用 RadGrid。有一个名为 Comments 的列，我目前将其作为 Y/N，如果他们将鼠标悬停在 Comments 标题行上，我想添加一个工具提示。有没有一种简单的方法可以做到这一点？对于名为 CommentsY/NI 的列，其值为 Y/N。我还有一个名为“评论”的专栏，我正在隐藏它。当用户将鼠标悬停在 CommentsY/N 上时，我喜欢显示 Comments 字段值。

到目前为止，我有以下内容：

我想要做的是将鼠标悬停在 Notes 列行上，然后显示 Comments，这也是网格上的绑定列。由于注释可能很长，我想在用户将鼠标悬停在注释上时显示它。一旦悬停工作，我将使评论字段不可见。这就是我所拥有的，但问题是当我将鼠标悬停在注释上时，我只看到它说 Cmmts 并且它不显示给定行的注释内容。

```
 if (e.Item is GridDataItem)
    {
        GridDataItem gridItem = e.Item as GridDataItem;
        foreach (Telerik.Web.UI.GridColumn column in WtrClients.MasterTableView.RenderColumns)
        {
            if (column is GridBoundColumn)
            {
                //this line will show a tooltip based on the CustomerID data field
                if (column.UniqueName == "Notes")
                {
                    gridItem[column.UniqueName].ToolTip = "Cmmts:" + 
                        Convert.ToString(gridItem.OwnerTableView.DataKeyValues[gridItem.ItemIndex]["Comments"]);
                }

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:59:16.607

你可以`Label ItemTemplate`在网格中做一个，评估你的评论中是否有任何东西来显示一个`Y`或`N`，然后设置工具提示。：

```
<ItemTemplate>
<asp:Label ID="lblOnGrid" runat="server" Text='<%#Convert.ToString(Eval("comments_column")).Equals("") ? "N" : "Y" %>'                                
ToolTip='<%#Eval("comments_column")%>'>
</asp:Label>
</ItemTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:22:14.497

Telerik 在他们的网站上有一个演示，其中应该包含完成此操作所需的一切:)

[http://demos.telerik.com/aspnet-ajax/tooltip/examples/targetcontrolsandajax/defaultcs.aspx?product=grid#qsf-demo-source](http://demos.telerik.com/aspnet-ajax/tooltip/examples/targetcontrolsandajax/defaultcs.aspx?product=grid#qsf-demo-source)

没有平台标签，所以我假设（根据您的用户名进行更多猜测）ASP.NET

# drupal - drupal ctools 多步向导

> ID：13123101
> 
> 赞同：0
> 
> 时间：2012-10-29T14:00:32.690
> 
> 标签：drupal, drupal-ctools

我正在尝试编写一个 ctools 多步向导，这是我的向导功能；

```
function _mymodule_adv_wizard($js=NULL, $step="step1") {

  $form_info = array();
  $form_info["id"]              = SK_ADV_WIZARD_ID;
  $form_info["path"]            = "tests/adv/mymodule/%step";

  $form_info["show trail"]      = TRUE;
  $form_info["show back"]       = TRUE;
  $form_info["show cancel"]     = TRUE;
  $form_info["show return"]     = TRUE;

  $form_info["next callback"]   = "_my_module_adv_wizard_on_next";
  $form_info["finish callback"] = "_my_module_adv_wizard_on_finish";
  $form_info["cancel callback"] = "_my_module_adv_wizard_on_cancel";

  $form_info["order"]           = array("step1" => t("Stap 1"), "step2" => t("Stap 2"), "step3" => t("Stap 3"), "step4" => t("Stap 4"), "step5" => t("Stap 5"), "step6" => t("Stap 6"), "step7" => t("Stap 7"), "step8" => t("Stap 8"));

  $form_info["forms"]           = array(); 
  $form_info["forms"]["step1"]  = array("form id" => "_my_module_adv_step1_form");
  $form_info["forms"]["step2"]  = array("form id" => "_my_module_adv_step2_form");
  $form_info["forms"]["step3"]  = array("form id" => "_my_module_adv_step3_form");
  $form_info["forms"]["step4"]  = array("form id" => "_my_module_adv_step4_form");
  $form_info["forms"]["step5"]  = array("form id" => "_my_module_adv_step5_form");
  $form_info["forms"]["step6"]  = array("form id" => "_my_module_adv_step6_form");
  $form_info["forms"]["step7"]  = array("form id" => "_my_module_adv_step7_form");
  $form_info["forms"]["step8"]  = array("form id" => "_my_module_adv_step8_form");

  $form_state = array("ajax" => FALSE, "object_id" => SK_ADV_OBJECT_ID, "object" => new stdClass());

  //initialize ctools wizard
  ctools_include("wizard");
  $form = ctools_wizard_multistep_form($form_info, $step, $form_state); 
  return theme('my_module_wrapper', array('formwrapper'  =>  $form, 'page'  =>  $step));
} 
```

一切都很好，我可以单独访问页面，但没有打印按钮，所以我不能去提交和验证功能。我有另一个具有差异的向导。id 和 form defs 但它就像一个魅力。可能是什么原因。

ps 所有函数和变量都在上面的代码中声明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:58:22.617

您是否在第一步重置表单数组？

```
function _my_module_adv_step1_form($form, &$form_state){
    $form = array(); // this remove your submit-buttons. Delete this line and your bottons will appear.
    //... your form elements...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:09:04.903

*这不是答案，而是作为答案发布，因为评论框不足以解决此问题。*

我最好的猜测是您需要在您的韩元上添加按钮。

```
function _my_module_adv_step1_form($form, &$form_state){
  ... your form elements...
  $form['next'] = array(
    '#type' => 'submit',
    '#value' => t('Next'),
    '#submit' => array('_my_module_adv_wizard_on_next'),
  );
} 
```

# vbscript - 从具有多个用户的远程计算机中删除快捷方式

> ID：13123106
> 
> 赞同：0
> 
> 时间：2012-10-29T14:00:54.003
> 
> 标签：vbscript

***警告我的 VB 知识为零***

所以今天早上我发现了这个方便的脚本：

```
InputFile = "C:\MachineList.Txt"
Const DeleteReadOnly = True
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile(InputFile)
Do While Not (objFile.AtEndOfStream)
strComputer = objFile.ReadLine
On Error Resume Next
Set objFSO = CreateObject("Scripting.FileSystemObject")
objFSO.DeleteFile("\\" & strComputer & "\c$\Documents and Settings\all users\Desktop\Malwarebytes Anti-Malware.LNK")
Err.Clear
Loop

MsgBox "Done" 
```

它做得很好。我面临的问题是快捷方式并不总是在所有用户下，或者他们的名字让我们称之为 user1

因此，我希望它通过 MachineList.txt 并浏览所有配置文件以搜索 Malwarebytes Anti-Malware.LNK。我已经看到了一些关于此的脚本，但我无法在很短的时间内围绕 VB 进行思考。我很感激任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:27:43.377

我假设你提供的结果是有效的路径......因此这应该有效：

```
InputFile = "C:\MachineList.Txt"
Const DeleteReadOnly = True
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile(InputFile)
Do While Not (objFile.AtEndOfStream)
    strComputer = objFile.ReadLine
    For Each objsubfolder In objFSO.GetFolder("\\" & strComputer & "\c$\Documents and Settings\").subfolders
        If objFSO.FileExists(objsubfolder.Path & "\desktop\Malwarebytes Anti-Malware.LNK") Then
            objFSO.DeleteFile (objsubfolder.Path & "\desktop\Malwarebytes Anti-Malware.LNK")
        End If
        'To check another file uncomment this
        'Add as many of these as you like here
        'If objFSO.FileExists(objsubfolder.Path & "\desktop\Otherfile.LNK") Then
        '    objFSO.DeleteFile (objsubfolder.Path & "\desktop\Otherfile.LNK")
        'End If
    Next
Loop

MsgBox "Done" 
```

# shopify - shopify ScriptTag 可以做到这一点吗？

> ID：13123107
> 
> 赞同：1
> 
> 时间：2012-10-29T14:00:59.127
> 
> 标签：shopify

我考虑将 Shopify 平台与第三方忠诚度/奖励提供商集成。为此，我需要能够让客户在购买时兑换他的积分。这将涉及向购物车添加额外的控制，例如按钮 [Redeem your points]

我可以使用 ScriptTag 注入来：

1.  访问有关当前登录客户的信息（客户电子邮件）？
2.  修改当前购物车总金额，让客户支付的金额少于总金额（让他申请积分）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:04:41.240

任意修改购物车/订单的成本是不可能的。基于此限制，我不建议尝试集成/实现积分卡功能。

# opencv - OPENCV：IplImage* 可以保持双值吗？？？

> ID：13123110
> 
> 赞同：1
> 
> 时间：2012-10-29T14:01:08.923
> 
> 标签：opencv, double, iplimage

我必须创建一个图像来保存双值（即`-0.0001`or `0.005`）。我用过

```
IplImage* temp = cvCreateImage(size, IPL_DEPTH_32F, 1) 
```

但效果不好。你有什么好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:13:23.453

它可以正常工作，尽管您无法可视化`32F`图像，但您必须将其转换为`8U`. 请参阅[此页面](http://docs.opencv.org/doc/user_guide/ug_mat.html?highlight=32f#primitive-operations)。[`CV_32F`顺便说一句，现在](http://docs.opencv.org/modules/core/doc/basic_structures.html#mat-depth)调用 const 。

# sql - 该行必须根据列值在结果集中以相同的顺序显示

> ID：13123118
> 
> 赞同：3
> 
> 时间：2012-10-29T14:01:23.983
> 
> 标签：sql, sql-server-2008-r2

我正在使用 SQL Server 2008 R2。我有以下数据：

```
ID   Value   OrderNumber
1      A         NULL
2      E          4
3      C         NULL
4      B         NULL
5      F          2
6      D         NULL 
```

我想编写一个查询，该查询必须考虑 OrderNumber 值按 OrderNumber 列获取数据排序。查询结果必须如下：

```
ID      Value     OrderNumber
1         A           NULL
5         F            2  --indicates row must be second in result set. 
3         C           NULL
2         E            4  --indicates row must be fourth in result set.
4         B           NULL
6         D           NULL 
```

感谢您的阅读和您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:40:22.813

我尝试了许多不同的方法，但我能找到的唯一能保证产生所需结果的方法是：

```
declare @t table (ID int not null,Value char(1) not null,OrderNumber int null)
insert into @T(ID,Value,OrderNumber) values
(1,'A',NULL),
(2,'E',4),
(3,'C',NULL),
(4,'B',NULL),
(5,'F',2),
(6,'D',NULL)

;With Nbrs as (
    select ROW_NUMBER() OVER (ORDER BY ID) as n from @t
), AvailableNbrs as (
    select n,ROW_NUMBER() OVER (ORDER BY n) as rn from Nbrs where n not in (select OrderNumber from @t where OrderNumber is not null)
), RequiredOrders as (
    select ID,ROW_NUMBER() OVER (ORDER BY ID) as rn from @t where OrderNumber is null
)
select
    *,COALESCE(OrderNumber,an.n) as FinalOrder
from
    @t t
        left join
    RequiredOrders ro
        on
            t.ID = ro.ID
        left join
    AvailableNbrs an
        on
            ro.rn = an.rn
order by COALESCE(OrderNumber,an.n) 
```

我们使用一些 CTE 来查找`OrderNumber`当前未分配的 s，并将那些 1-1 与没有 的行匹配`OrderNumber`。

结果：

```
|--------- @t --------------| |----- RequiredOrders ---------| |----- AvailableNbrs -------------------| |- COALESCE -------|
ID          Value OrderNumber ID          rn                   n                    rn                   FinalOrder
----------- ----- ----------- ----------- -------------------- -------------------- -------------------- --------------------
1           A     NULL        1           1                    1                    1                    1
5           F     2           NULL        NULL                 NULL                 NULL                 2
3           C     NULL        3           2                    3                    2                    3
2           E     4           NULL        NULL                 NULL                 NULL                 4
4           B     NULL        4           3                    5                    3                    5
6           D     NULL        6           4                    6                    4                    6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:03:47.610

找到了比接受的答案更好的解决方案：

```
declare @t table(id int, value char, ordernumber int)

insert @t values(1,'A', null)
insert @t values(2,'E',4)
insert @t values(3,'C',NULL)
insert @t values(4,'B',NULL)
insert @t values(5,'F',2)
insert @t values(6,'D',NULL)

;with a as
(
select *, row_number() over (order by id)+.1 rn1 from @t
where ordernumber is null
union all
select *, ordernumber - rank() over (order by ordernumber)+1 rn1 from @t
where ordernumber is not null
)
select * from a order by rn1, ordernumber 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:19:11.920

试试这个：

```
SELECT   *
FROM     tableName
Order BY  CASE WHEN OrderNumber IS NULL THEN ID ELSE OrderNumber END 
```

# android - 为什么xml布局页面不起作用

> ID：13123121
> 
> 赞同：0
> 
> 时间：2012-10-29T14:01:49.017
> 
> 标签：android, xml, android-layout, android-relativelayout

为什么xml布局不起作用？我打开布局页面时收到错误消息，请帮助我，什么问题，我不明白，有什么想法吗？谢谢你的回答...

我的 xml 布局代码；

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<android.support.v4.view.ViewPager
    android:id="@+id/myfivepanelpager"
    android:layout_width="match_parent"
    android:layout_height="440dp" >
</android.support.v4.view.ViewPager>

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="46dp"
    android:background="@drawable/bck2" >

    <Button
        android:id="@+id/buttonprevious"
        android:layout_width="62dp"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/lefticon" />

    <Button
        android:id="@+id/buttonnext"
        android:layout_width="62dp"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/righticon" />
</RelativeLayout>

</LinearLayout> 
```

Logcat 错误信息；

```
10-29 16:26:13.422: E/AndroidRuntime(2187): FATAL EXCEPTION: main
10-29 16:26:13.422: E/AndroidRuntime(2187): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.hayvansesleri/com.hayvansesleri.Pictures}:     java.lang.ClassCastException: android.widget.Button cannot be cast to     android.support.v4.view.ViewPager
10-29 16:26:13.422: E/AndroidRuntime(2187):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
10-29 16:26:13.422: E/AndroidRuntime(2187):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
10-29 16:26:13.422: E/AndroidRuntime(2187):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
10-29 16:26:13.422: E/AndroidRuntime(2187):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
10-29 16:26:13.422: E/AndroidRuntime(2187):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-29 16:26:13.422: E/AndroidRuntime(2187):     at android.os.Looper.loop(Looper.java:137)
10-29 16:26:13.422: E/AndroidRuntime(2187):     at android.app.ActivityThread.main(ActivityThread.java:4441)
10-29 16:26:13.422: E/AndroidRuntime(2187):     at java.lang.reflect.Method.invokeNative(Native Method)
10-29 16:26:13.422: E/AndroidRuntime(2187):     at java.lang.reflect.Method.invoke(Method.java:511)
10-29 16:26:13.422: E/AndroidRuntime(2187):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-29 16:26:13.422: E/AndroidRuntime(2187):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-29 16:26:13.422: E/AndroidRuntime(2187):     at dalvik.system.NativeStart.main(Native Method)
10-29 16:26:13.422: E/AndroidRuntime(2187): Caused by: java.lang.ClassCastException: android.widget.Button cannot be cast to android.support.v4.view.ViewPager
10-29 16:26:13.422: E/AndroidRuntime(2187):     at com.hayvansesleri.Pictures.onCreate(Pictures.java:38)
10-29 16:26:13.422: E/AndroidRuntime(2187):     at android.app.Activity.performCreate(Activity.java:4465)
10-29 16:26:13.422: E/AndroidRuntime(2187):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-29 16:26:13.422: E/AndroidRuntime(2187):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
10-29 16:26:13.422: E/AndroidRuntime(2187):     ... 11 more 
```

图片.class;

```
public class Pictures extends Activity implements OnPageChangeListener,OnClickListener  {
protected static final Context Context = null;

private static final int count = 23;
private AdController myController;
SoundManager snd; 

View view=null;

final Activity act = this;  
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInsta,mknceState);
    setContentView(R.layout.picturespage);

 MyPagerAdapter adapter = new MyPagerAdapter();
 final ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
 myPager.setAdapter(adapter);
 myPager.setCurrentItem(12); 
 myPager.setOnPageChangeListener(this);
 snd = new SoundManager(this);
 this.setVolumeControlStream(AudioManager.STREAM_MUSIC);

 Button next = (Button) findViewById(R.id.buttonnext);
 next.setOnClickListener(new View.OnClickListener(){

     public void onClick(View v) {
         myPager.setCurrentItem(myPager.getCurrentItem()+1);
     }
 }); 

 Button previous = (Button) findViewById(R.id.buttonprevious);
 previous.setOnClickListener(new View.OnClickListener(){

     public void onClick(View v) {
         myPager.setCurrentItem(myPager.getCurrentItem()-1);
     }
 }); 
 }; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T14:17:59.740

juned 可能是对的，请尝试在您的项目上运行 «ant clean»。有时 R.java 会在构建系统没有注意到的情况下变得过时。例如，您可以在您的 xml 文件中交换 Button 和 ViewPager 的顺序，但是在 R.id 类中生成的 id 保持错误的顺序。«ant release»/«ant debug» 之前的 «ant clean» 修复了该问题。

# azure - 设置 Windows Azure 私有云

> ID：13123122
> 
> 赞同：1
> 
> 时间：2012-10-29T14:01:49.637
> 
> 标签：azure

我想使用 Windows Azure。但是，我的管理员正在与我使用它作斗争。据我了解，我可以设置一个私有云，以便我可以使用 Azure 的功能，但在内部环境中。我说服他让我试试。我有一台可以试用的 Windows Server 2008 服务器。不幸的是，我不知道如何设置私有云。

有谁知道如何执行此操作的分步演练？还是我误解了私有云的概念？非常感谢您的任何见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:39:28.140

正如@Alan 所指出的，您无法创建 Windows Azure 私有云。但是：如果您是托管服务提供商，您现在可以开始在 Windows Server+System Center 上使用两个 Windows Azure 服务：网站和虚拟机配置，以及服务管理 API 和门户。更多细节在[这里](http://www.microsoft.com/hosting/en/us/services.aspx)。

此外：您可以创建混合环境：云中的 Windows Azure 服务和您自己的数据中心中的本地服务，通过虚拟网络 VPN 桥接。这是来自 MSDN 的有关虚拟网络的[一些信息。](http://msdn.microsoft.com/en-us/library/windowsazure/jj156007.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:25:21.317

您无法使用 Windows Azure 设置私有云。

如果您想在 Server 2008 上进行内部设置，您应该查看 System Center 或 Hyper V 来托管 VM。可靠地做到这一点将是一个相当大的工作，如果你是这项技术的新手，将会有很多东西需要学习。

如果您想使用 Windows Azure，您目前可以在 Windows Azure 数据中心安装虚拟机。这很容易上手，比创建本地解决方案更有效率。

您可以在此处注册免费的 90 天 Azure 试用帐户：http: [//www.windowsazure.com/en-us/pricing/free-trial/](http://www.windowsazure.com/en-us/pricing/free-trial/)

这里有一些关于 Windows Azure 虚拟机的信息：http: [//www.windowsazure.com/en-us/home/scenarios/virtual-machines/](http://www.windowsazure.com/en-us/home/scenarios/virtual-machines/)

此处的 Windows Azure 培训工具包中有一些 VM 实验室：http: [//www.microsoft.com/en-us/download/details.aspx?id=8396](http://www.microsoft.com/en-us/download/details.aspx?id=8396)

在 Azure 中启动并运行您的第一个 Windows Server 2008 虚拟机可能需要大约 15 分钟。

问候，

艾伦

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-17T07:20:38.317

如果您拥有数据中心，则可以借助 windows azure pack 设置私有云。

WAP 只是一个管理云的控制面板。它提供了在您的数据中心创建和管理 VM"S 的选项。

Vconnect 与 vm ware 和有关 azure pack 的计费集成的详细信息可在以下链接中找到。在此处注册以获取免费演示试用访问 [http://www.cloudassert.com/Solutions/VConnect](http://www.cloudassert.com/Solutions/VConnect)

根据我的个人经验，我建议使用[Cloud Assert](http://www.cloudassert.com)，这是一个由前 Microsoft 经理的创始人组成的团队，他们在 Windows Azure 上设计、构建和运行真正的大规模托管服务方面拥有多年的实践经验。

他们帮助我建立了自己的私有云，并通过最适合我的用例的定制解决方案进行教育。

此外，Cloud Assert 也将有助于创建混合云环境。[更多细节](http://www.cloudassert.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-31T21:22:35.773

Microsoft Azure 适用于公共云。对于私有云，微软的解决方案是 Azure Stack ( [https://azure.microsoft.com/en-us/overview/azure-stack/](https://azure.microsoft.com/en-us/overview/azure-stack/) )。在采取行动之前，请仔细检查硬件要求。

# matlab - 从 Matlab 文件导入时，“LapackError：参数 a 在 lapack_lite.dgesdd 中具有非本机字节顺序”

> ID：13123124
> 
> 赞同：2
> 
> 时间：2012-10-29T14:01:56.943
> 
> 标签：matlab, numpy, python-2.7, scipy

从 Matlab 中导入[这个数据文件](https://www.dropbox.com/s/1xkqq1vsubyz8aa/dati-esercizio1.mat)`scipy.io.loadmat`后，一切似乎都很好，直到我们尝试计算其中一个矩阵的条件数。

这是为我们重现的最少代码量：

```
import scipy
import numpy

stuff = scipy.io.loadmat("dati-esercizio1.mat")
numpy.linalg.cond(stuff["A"]) 
```

这是 iPython 提供的扩展堆栈跟踪：

```
In [3]: numpy.linalg.cond(A)
---------------------------------------------------------------------------
LapackError                               Traceback (most recent call last)
/snip/<ipython-input-3-15d9ef00a605> in <module>()
----> 1 numpy.linalg.cond(A)

/snip/python2.7/site-packages/numpy/linalg/linalg.py in cond(x, p)
   1409     x = asarray(x) # in case we have a matrix
   1410     if p is None:
-> 1411         s = svd(x,compute_uv=False)
   1412         return s[0]/s[-1]
   1413     else:

/snip/python2.7/site-packages/numpy/linalg/linalg.py in svd(a, full_matrices, compute_uv)
   1313         work = zeros((lwork,), t)
   1314         results = lapack_routine(option, m, n, a, m, s, u, m, vt, nvt,
-> 1315                                  work, -1, iwork, 0)
   1316         lwork = int(work[0])
   1317         work = zeros((lwork,), t)

LapackError: Parameter a has non-native byte order in lapack_lite.dgesdd 
```

所有明显的想法（如扁平化和重塑矩阵或从头开始重新创建矩阵，逐个元素重新分配它）都失败了。那么，为了使它更适合 numpy，我该如何处理数据呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T20:55:01.690

这是一个错误，前段时间修复：[https ://github.com/numpy/numpy/pull/235](https://github.com/numpy/numpy/pull/235)

解决方法：

```
np.linalg.cond(stuff['A'].newbyteorder('=')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T15:13:05.793

这对我有用：

```
In [33]: stuff = loadmat('dati-esercizio1.mat')

In [34]: a = stuff['A']

In [35]: try: np.linalg.cond(a)
   ....: except: print "Fail!"
Fail!

In [36]: b = np.array(a, dtype='>d')

In [37]: np.linalg.cond(b)
Out[37]: 62493201976.673141

In [38]: np.all(a == b)  # Verify they hold the same data.
Out[38]: True 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-29T14:06:20.280

显然，*结果 ndarray 中每个数字*的字节顺序（字节序？）有问题，而不仅仅是 ndarray 对象本身。

像这样但更优雅的东西应该可以解决问题：

```
n, m = A.shape()
B = numpy.empty_like(A)

for i in xrange(n):
  for j in xrange(m):
    B[i,j] = float(A[i,j])

del A
B = A

print numpy.linalg.cond(A) # 62493210091.354507 
```

（由于某种原因，就地替换仍然会给出该错误 - 所以整个对象的字节顺序也有问题。）

# java - 创建一个字节列表[]

> ID：13123126
> 
> 赞同：0
> 
> 时间：2012-10-29T14:02:11.887
> 
> 标签：java

如何创建`byte[]`（不是`Byte`）列表？*

我想要的是这样的：

```
byte[] deb = new byte[Byte.MIN_VALUE];
List<byte[]> begin = new LinkedList<>();
begin.add(deb); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T14:04:11.077

这会很好用，因为**数组是**Java 中的对象，所以你可以用它们构建`List`s。

* * *

请注意，只有在 Java 7 中才能执行

```
List<byte[]> begin = new LinkedList<>(); 
```

在旧版本中，您必须重新声明`byte[]`：

```
List<byte[]> begin = new LinkedList<byte[]>(); 
```

* * *

这已经提出，但我将在这里重申。`Byte.MIN_VALUE`小于`0`；您不能创建长度小于的数组`0`（它会导致运行时错误，特别是 a `NegativeArraySizeException`）。你的意思是`Byte.MAX_VALUE`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:03:59.640

问题在下面一行

```
 byte[] deb = new byte[Byte.MIN_VALUE]; <---Byte.MIN_VALUE -127 
```

你应该用正值声明你的数组，否则你会得到**NegativeArraySizeException**。

```
byte[] deb = new byte[Some positive value]; 
```

`Byte.MIN_VALUE`是`-127`。您不能在 java 中创建负索引数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:04:44.840

java中的数组是对象。byte[] 是一个保存字节值的数组。集合接受对象，因此 List 是一个包含 byte[] 的集合。您的代码应该可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T14:05:03.893

这应该可以正常工作：

```
List<byte[]> begin = new LinkedList<byte[]>(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T14:08:15.787

首先，`Byte.MIN_VALUE`是`-128`。如果你尝试创建一个负长度的数组，你会得到一个错误。

其次，正如其他答案中提到的，创建列表的代码应该是

```
List<byte[]> begin = new LinkedList<byte[]>(); 
```

# java - 如何使用 FragmentActivity 实现 onTouchEvent

> ID：13123129
> 
> 赞同：2
> 
> 时间：2012-10-29T14:02:21.483
> 
> 标签：java, android, touch-event, android-fragmentactivity

**我的问题：**是否有在 FragmentActivity 中使用 onTouchEvent 的解决方法？

**我的情况：**我正在编写一个简单的手电筒应用程序，并且我有一个 FragmentActivity，用户可以在其中在颜色之间滑动（整个屏幕只是一种颜色。这个应用程序是为了个人改进）。我希望能够`onLongPress`为选项做一个事件，一个`onDoubleTap`隐藏导航栏的事件，*最重要*的是一个控制应用程序亮度的触摸事件（我想让用户上下滚动以改变亮度，这里有任何想法不客气！这个`onFling`活动有好处吗？）

**我尝试过的：**我有`GestureDetector`一个`SimpleOnGestureListener`. 我覆盖了`onTouchEvent`in `FragmentActivity`，但我刚刚发现这个方法从来没有在 a 中调用过`FragmentActivity`（我也在`Log.print`方法中用 a 测试过它，它从来没有被调用过）。有解决办法吗？谢谢！

**显着代码：**

主要活动：

```
public class MainActivity extends FragmentActivity {

  private GestureDetector gestureDetector;
  private FragmentPagerAdapter mAdapter;

  /**
   * Called when the activity is first created.
   */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    gestureDetector = new GestureDetector(getApplicationContext(), new MyGestureListener(getWindow()));

    mAdapter = new ColorFragmentAdapter(getSupportFragmentManager(), getDefaultColorList());
    ViewPager pager = (ViewPager) super.findViewById(R.id.viewpager);
    pager.setAdapter(mAdapter);
    pager.setCurrentItem(Math.round(mAdapter.getCount() / 2)); //Set current fragment to middle fragment
  }

  @Override
  public boolean onTouchEvent(MotionEvent event) {
    print("Sending touch event to gestureDetector.");
    //This line is never run.
    return gestureDetector.onTouchEvent(event);
  }

  /**
   * Prints the given object to the log with the debug priority with the tag FLASHLIGHT
   *
   * @param object
   */
  public static void print(Object object) {
    Log.println(Log.DEBUG, "FLASHLIGHT", object.toString());
  }
} 
```

我的手势监听器：

```
public class MyGestureListener extends SimpleOnGestureListener {

  private final Window window;

  public MyGestureListener(Window window) {
    super();
    this.window = window;
  }

  @Override
  public void onLongPress(MotionEvent e) {
    //onLongPress code
  }

  @Override
  public boolean onDoubleTap(MotionEvent e) {
    //onDoubleTap code
  }

  @Override
  public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {
    //onFling cod
  }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical"
  >
  <android.support.v4.view.ViewPager
        android:id="@+android:id/viewpager"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        />
</LinearLayout> 
```

我认为您不需要其他任何东西来回答这个问题，但如果您需要，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-01T15:48:39.880

所以解决这个问题相对容易。问题是 ViewPager 正在吃触摸事件。所以我所做的是编写自己的 ViewPager 实现，并`onTouchEvent(MotionEvent event)`通过调用`super.onTouchEvent(event)`然后将事件传递给类中的gestureDetector 来覆盖该方法。

**相关代码：**

主要活动

```
public class MainActivity extends FragmentActivity {

  private FragmentPagerAdapter mAdapter;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_main);
    mAdapter = new FragmentAdapter(getSupportFragmentManager());
    MyViewPager pager = (MyViewPager) findViewById(R.id.viewpager);
    pager.setGestureDetector(new GestureDetector(this, new MyGestureListener(this)));
    pager.setAdapter(mAdapter);
    pager.setCurrentItem(Math.round(mAdapter.getCount() / 2));
  }
} 
```

MyViewPager

```
public class MyViewPager extends ViewPager {

  private GestureDetector gestureDetector;

  public MyViewPager(Context context) {
    super(context);
  }

  public MyViewPager(Context context, AttributeSet attrs) {
    super(context, attrs);
  }

  @Override
  public boolean onTouchEvent(MotionEvent e) {
    return super.onTouchEvent(e) && gestureDetector.onTouchEvent(e);
  }
} 
```

我的手势监听器

```
public class MyGestureListener extends SimpleOnGestureListener {

  private final Activity activity;

  public MyGestureListener(Activity activity) {
    super();
    this.activity = activity;
  }

  @Override
  public boolean onDoubleTap(MotionEvent e) {
    //...
  }

  @Override
  public boolean onSingleTapConfirmed(MotionEvent e) {
    //...
  }

//... etc...

} 
```

layout_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical"
>
  <com.kentcdodds.flashlight.MyViewPager
    android:id="@+android:id/viewpager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
        />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:40:24.083

尝试这样做：

```
gestureDetector = new GestureDetector(this); 
```

在 TouchEvent 上：

```
 @Override
   public boolean onTouchEvent(MotionEvent me) {
    return gestureDetector.onTouchEvent(me);
} 
```

[来源](http://www.androidsnippets.com/gesturedetector-and-gesturedetectorongesturelistener)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-11T23:32:23.867

如果您只想简单地检测用户何时触摸 fragmentActivity，请使用以下方法：

```
public void onUserInteraction(){
  Log.d("FragmentActivity","touched");
} 
```

更多信息：http: [//developer.android.com/reference/android/support/v4/app/FragmentActivity.html](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html)

# ruby-on-rails - Rails + 从远程站点读取 json

> ID：13123130
> 
> 赞同：0
> 
> 时间：2012-10-29T14:02:22.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我想知道是否可以使用 rails 读取外部 Joomla 网站的 json 内容？

我需要使用 Nokogiri 来完成这样的任务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:36:19.900

好吧，Nokogiri 是用来解析 html 的。这就是您将如何使用纯红宝石（在 Rails 中您可能甚至不需要这些）：

```
require 'open-uri'
require 'json'

response = open("http://path.to.website/file.json").read
JSON.parse(response) 
```

# java - Android：自定义列表视图项 - 强制一行

> ID：13123131
> 
> 赞同：2
> 
> 时间：2012-10-29T14:02:22.453
> 
> 标签：java, android, listview

我的列表视图有一个自定义单元格，其中包含 TEXT NUMBER - 工作正常，但是当 TEXT 超过一行时，右手数字也超过一行，这看起来很傻。是否有属性可以解决此问题？

![在此处输入图像描述](../Images/515bea00d78c7d295cb83ba63114dd6a.png)

我的 XML 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout   xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >
    <TextView
        android:id="@+id/txtOption"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="7"
        android:paddingBottom="5dp"
        android:paddingTop="5dp"
        android:text="Medium Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/txtCount"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="3"
        android:paddingBottom="5dp"
        android:paddingLeft="25dp"
        android:paddingRight="15dp"
        android:paddingTop="5dp"
        android:text="[21]"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:10:49.993

好像你`layout_weight`的意见没有开始。为此，我认为您在定义中缺少`android:weightSum="10"`定义`LinearLayout`。此外，您需要将`android:layout_width="0dp"`两者都设置为`TextView`.

# haskell - 字符串随机播放函数中的类型错误

> ID：13123133
> 
> 赞同：0
> 
> 时间：2012-10-29T14:02:23.993
> 
> 标签：haskell, types

我试图创建自己的字符串洗牌功能：

```
import System.Random

-- usage case: my_shuffle "something" ""

my_shuffle :: [Char] -> [Char] -> [Char]
my_shuffle [] result = result
my_shuffle s result = do 
    pos <- randomRIO (1, length s)
    my_shuffle (remove_char pos) (result ++ (get_char pos))

get_char :: [Char] -> Int -> Char
get_char s pos  = s !! (pos - 1)

remove_char :: [Char] -> Int -> [Char]
remove_char s pos = take (pos - 1) s ++ drop pos s 
```

它返回错误消息：

```
substitution_cipher.hs:8:16:
    Couldn't match expected type `[t0]' with actual type `IO a0'
    In the return type of a call of `randomRIO'
    In a stmt of a 'do' expression: pos <- randomRIO (1, length s)
    In the expression:
      do { pos <- randomRIO (1, length s);
           my_shuffle (remove_char pos) (result ++ (get_char pos)) } 
```

我看到它与 IO 有关，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T14:25:47.123

首先，您没有将字符串参数传递给`remove_char`and `get_char`。此外，您需要将结果`get_char`转换为列表才能使用`++`. 递归调用`my_shuffle`应如下所示：

```
my_shuffle (remove_char s pos) (result ++ [get_char s pos]) 
```

其次，您需要使用 IO monad for `randomIO`，因此 的签名`my_shuffle`应该是：

```
my_shuffle :: [Char] -> [Char] -> IO [Char] 
```

然后最后你需要`return`在基本情况下使用（因为你需要返回一个`IO [Char]`）：

```
my_shuffle [] result = return result 
```

应用了修复：

```
import System.Random

my_shuffle :: [Char] -> [Char] -> IO [Char]
my_shuffle [] result = return result
my_shuffle s result = do
     pos <- randomRIO (1, length s)
     my_shuffle (remove_char s pos) (result ++ [get_char s pos])

get_char :: [Char] -> Int -> Char
get_char s pos  = s !! (pos - 1)

remove_char :: [Char] -> Int -> [Char]
remove_char s pos = take (pos - 1) s ++ drop pos s 
```

# sql - BLOB 检索中的错误 ORA-06502

> ID：13123134
> 
> 赞同：0
> 
> 时间：2012-10-29T14:02:36.820
> 
> 标签：sql, oracle, blob, oracleforms

我正在尝试开发一个程序，该程序将读取表的 BLOB 字段并编写一个 RTF 文档，该文档将用作另一个程序的模板，但是当程序启动 select 语句时，我遇到了 ORA-06502 错误.

阅读文档后，此错误是由字段之间的不兼容引起的（数字或值错误字符串）

但是我在互联网上到处都看到了这个例子，而且我对导致它的原因一无所知。

我的程序的源代码如下：

```
PROCEDURE p_transfer_db_client(pcPath IN VARCHAR2,
                               pnSequence IN NUMBER) IS

   v_src_blob BLOB;
   v_file UTL_FILE.FILE_TYPE;
   v_offset INTEGER := 1;
   v_amount BINARY_INTEGER := 32766;
   v_binary_buffer RAW(32767);

BEGIN

   SELECT model 
     INTO v_src_blob
     FROM models
    wHERE id = pnSequence;

   v_file := UTL_FILE.FOPEN(pcPath, 'model.rtf', 'wb', v_amount); 

   LOOP
      BEGIN
          DBMS_LOB.READ(v_src_blob, v_amount, v_offset, v_binary_buffer);
          UTL_FILE.PUT_RAW(v_file, v_binary_buffer);
          v_offset := v_offset + v_amount;
      EXCEPTION
          WHEN NO_DATA_FOUND THEN
               EXIT;
      END;
   END LOOP;

   UTL_FILE.FFLUSH(v_file);
   UTL_FILE.FCLOSE(v_file);

END p_transfer_db_client; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:39:48.077

**编辑**：我没有看到您将此问题标记为`forms`.

您的代码在表单中不起作用：UTL_FILE 和 DBMS_LOB 在 DB 服务器上运行，而不是在表单客户端上运行，因此它们应该在 PL/SQL 过程中，而不是在 Forms 过程中。

我很确定 BLOB 数据类型不是像这样在表单中管理的，事实上我很惊讶它甚至可以编译！

看一下这个[例子，它展示了如何处理表单](http://fdegrelle.over-blog.com/article-2615079.html)中的 blob，你会发现你需要在 PLSQL 过程中定义和查询 blob，而不是直接通过表单。

我建议您在 DB 中将过程创建为 PLSQL 包，并从您的表单客户端调用此包。

* * *

还有其他事情发生，我不明白为什么 SELECT 语句不起作用。

如果您注释掉所有变量声明和所有以下语句，您是否仍然会收到错误消息，即：

```
SQL> create table models (
  2     inst_num_instituicao NUMBER(2) not null,
  3     id                   NUMBER(3) not null,
  4     model                BLOB not null);

Table created.

SQL> insert into models values (1, 1, hextoraw('FFFF'));

1 row created.

SQL> declare
  2     b blob;
  3  begin
  4     select model into b from models where id = 1;
  5  end;
  6  /

PL/SQL procedure successfully completed. 
```

# javascript - 虚拟键盘和加载缓慢的 jQuery

> ID：13123135
> 
> 赞同：1
> 
> 时间：2012-10-29T14:02:42.647
> 
> 标签：javascript, jquery, jquery-ui, keyboard

我尝试使用 jQuery 在我的代码中添加一个虚拟键盘，实际上我有几个文本字段，我在这个键盘上添加了每个字段。我的问题是当我加载页面时需要很多次（~ 10 秒）才能显示。

这是我的[演示](http://jsfiddle.net/Mils/TUAHC/12/)。

代码：

```
var table = document.getElementById("Table-1");
var rowCount = table.rows.length;

for(var i=0;i<150;i++) {   
row = table.insertRow(rowCount);
cell1 = row.insertCell(0);
cell1.name = "animate";
cell1.id = i ;
var values = document.createElement("input");                
values.type = "text" ;
cell1.appendChild(values);
rowCount++;            
}

$('input[type=text]').keyboard({
  layout: "qwerty"
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:29:45.547

我的问题的第一个解决方案；我只在单击文本框时才调用键盘。

[演示](http://jsfiddle.net/Mils/TUAHC/13/)。

但是还是有点慢。。。

代码 ：

```
var table = document.getElementById("Table-1");
var rowCount = table.rows.length;

for(var i=0;i<150;i++) {   
row = table.insertRow(rowCount);
cell1 = row.insertCell(0);
cell1.name = "animate";
cell1.id = i ;
var values = document.createElement("input");                
values.type = "text" ;
cell1.appendChild(values);
rowCount++;    

$('#'+i).click(function() {
         $('input[type=text]').keyboard({
      layout: "qwerty"
   });
});

} 
```

# css - css3 元素在 IE9 上不起作用

> ID：13123138
> 
> 赞同：1
> 
> 时间：2012-10-29T14:02:57.713
> 
> 标签：css, cross-browser

我知道在 IE9 中我可以在一个 div 中添加多个图像，并且可以在 IE9 中使用背景位置和背景图像。但是我的代码不起作用，单击 div 时我看不到向下滚动的动画。为什么？这是代码：（在 Firefox 和 Chrome 中工作正常）

[演示](http://jsfiddle.net/QGA8Z/)

HTML：

```
<script type="text/javascript">
$(document).ready(function(){
    var bg = $('.second').css('background-image');
    $('.second').css('background-image',bg+', url(http://www.dummyimage.com/643x12/001aff/ffffff.png)');
    $('.second').css('background-position', '0 0px, 0 -100px'); 

    $(".second").on("click", function() {
        $(".second").css('background-position', '0 200px, 0 100px'); 
    });

});

</script>
</head>
<body>
<div class="second">

</div> 
```

CSS：

```
.second{
     position: absolute;
    border: solid;
    top:0;
    left:0;
    z-index: 2;
    height: 100%;
    width: 1000px;
    overflow: hidden;
    background:url(http://www.dummyimage.com/643x12/001aff/ffffff.png) no-repeat;

    transition-property: background-position; /*standard*/
    transition-duration: 1s;

    -webkit-transition-property: background-position; /*Safari e Chrome */
    -webkit-transition-duration: 1s;

    -o-transition-property: background-position;      /*Opera*/
    -o-transition-duration: 1s;

    -moz-transition-property: background-position;    /*Firefox*/
    -moz-transition-duration: 1s;   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:07:35.130

转换在 IE9 中不起作用。只有现代浏览器，最后是 IE10。

# android - 使用数组在地图上显示不同的点

> ID：13123139
> 
> 赞同：0
> 
> 时间：2012-10-29T14:02:58.320
> 
> 标签：android

我正在制作一个应用程序，其中我有一个导航屏幕，用户可以在多个位置提供。这些位置存储在数组字符串中。我在我的地图类中使用该字符串，我想用标记显示地图上的所有位置。仅显示存储在数组中的最后一个位置。任何人都可以帮助我吗？

我的导航课

```
public class Navigatie extends Activity{

public static String plaats1;
public static String plaats2;
public GeoPoint p;
public static String[] plaats;
public int i = 0;
static final String[] COUNTRIES = new String[] 
         {
            "Antwerpen", "Aalst", "Aartselaar", "Brussel", "Charleroi","duinkerke", "Gent", "Hasselt", "Ieper", ""
         };

// Here we create the layout, everything that's needed on the form is loaded in here.
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.navigatie);

    // Create an instance of the AutoCompleteTextView which is created in the layout file
     AutoCompleteTextView textView=(AutoCompleteTextView)findViewById(R.id.autocomplete);
     // Create an ArrayAdapter which we are using to autocomplete the textview
     ArrayAdapter<String>adapter=new ArrayAdapter<String>(this,R.layout.item_list,COUNTRIES);
     // put the adapter created above in the AutoCompleteTextView
     textView.setAdapter(adapter);

    // We create a new ImageButton which links to the map.java class 
    ImageButton imageButton = (ImageButton) findViewById(R.id.imageButton1);
    // We give a onclicklistener method to the button imageButton
    imageButton.setOnClickListener(new OnClickListener() {

        // if the imageButton is clicked we start a new activity called "Map"
        public void onClick(View v) {
            /*
            for (int j = 0; j<plaats.length; j++)
            {
                Map.plaats[j] = plaats[j];
            }
            */
            startActivity(new Intent(Navigatie.this, Map.class));
        }
    });

    Button add = (Button)findViewById(R.id.toevoegen);

    add.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            EditText text1 = (EditText)findViewById(R.id.autocomplete);
            plaats1 = text1.getText().toString();

            if (plaats1 != "")
            {
            EditText text2 = (EditText)findViewById(R.id.editText1);

            text2.append(plaats1 + "\n");

            plaats = new String[20];
            plaats[i] = plaats1;
            Toast.makeText(Navigatie.this,  plaats[i], Toast.LENGTH_SHORT).show();
            i++;
            text1.setText("");
            }
        }
    });

    Button clear = (Button)findViewById(R.id.verwijderen);

    clear.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            EditText text2 = (EditText)findViewById(R.id.editText1);
            text2.setText("");
            Arrays.fill(plaats, null);
        }
    });
} 
```

}

我的地图类：

```
public class Map extends MapActivity {
private MapView mapView;
private MapController mc;
LocationManager locMgr;
MyLocationListener locLstnr;
private TextView tvlat;
private TextView tvlong;
public Navigatie nav;
public String locatie;
public int coordinates[] = new int[100];
public int counter = 0;
int gplat;
int gplon;
static final String[] COUNTRIES = new String[] 
     {
        "Antwerpen", "Aalst", "Aartselaar", "Brussel",    "Charleroi","duinkerke", "Gent", "Hasselt", "Ieper", ""
     };

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
 super.onCreate(savedInstanceState);
 // set the layout screen to map
 setContentView(R.layout.map);

 // Create an instance of the AutoCompleteTextView which is created in the layout file
 AutoCompleteTextView textView=(AutoCompleteTextView)findViewById(R.id.autocomplete_country);
 // Create an ArrayAdapter which we are using to autocomplete the textview
 ArrayAdapter<String>adapter=new ArrayAdapter<String>(this,R.layout.item_list,COUNTRIES);
 // put the adapter created above in the AutoCompleteTextView
 textView.setAdapter(adapter);

 // Setting the mapview1 to the instance of MapView
 mapView = (MapView) findViewById(R.id.mapview1);
 // giving a controller to mc
 mc = mapView.getController();

 // String location2 = Navigatie.getVariable();

 for (int i = 0; i<Navigatie.plaats.length; i++)
 {
     if(Navigatie.plaats[i]!=null && !Navigatie.plaats[i].equals(""))
     {
         FindLocation(Navigatie.plaats[i]); 
     }
     else
     {
         System.out.println("Locatie niet gevonden");
     }
 }

 // create an instance of the find button created in the layout file
 Button btn_find = (Button) findViewById(R.id.btn_find);

 // Defining button click event listener for the find button
 OnClickListener findClickListener = new OnClickListener() 
 {
     public void onClick(View v) 
     {
         // Getting reference to EditText to get the user input location
         EditText etLocation = (EditText) findViewById(R.id.autocomplete_country);

         // Getting user input location
         String location = etLocation.getText().toString();

         if(location!=null && !location.equals(""))
         {
             Toast.makeText(Map.this, "Inzoomend op " + location, Toast.LENGTH_SHORT).show();
            new GeocoderTask().execute(location);
         }
         else
         {
             Toast.makeText(Map.this, "Locatie niet gevonden", Toast.LENGTH_SHORT).show();
         }
     }
 };

 // Setting button click event listener for the find button
 btn_find.setOnClickListener(findClickListener);

 // redraws the map
 mapView.invalidate();

 // sets the built in zoomcontrols on the screen
 mapView.setBuiltInZoomControls(true);

 Drawable makerDefault = this.getResources().getDrawable(R.drawable.pushpin);
 MirItemizedOverlay itemizedOverlay = new MirItemizedOverlay(makerDefault);
 GeoPoint point = null;

 for (int i = 0; i<100; i++)
 {
     point = new GeoPoint(coordinates[i], coordinates[i+1]);
     OverlayItem overlayItem = new OverlayItem(point, "new place added", null);
     itemizedOverlay.addOverlayItem(overlayItem);
     i++;
 }
 mapView.getOverlays().add(itemizedOverlay);
 MapController mc = mapView.getController();
 mc.setCenter(point);

 /*
String provider = LocationManager.GPS_PROVIDER; 
locMgr = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
locLstnr = new MyLocationListener();
locMgr.requestSingleUpdate(provider, null);
  */

 List<Overlay> mapOverlays = mapView.getOverlays();
 Projection projection = mapView.getProjection(); 
```

}

```
// when the form is created we put in the menu from the resources menu.
@Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    // we get the menu called main from the resources menu
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

// we set the options for the menu parts
@Override
public boolean onOptionsItemSelected(MenuItem item) 
{
    switch (item.getItemId()) 
    {
    // if my location is touched, this code is executed
    case R.id.my_location:
         // creates a toast that displays "moving to current location"
         Toast.makeText(Map.this, "Moving To Current location", Toast.LENGTH_SHORT).show();
         String provider = LocationManager.GPS_PROVIDER; 
            locMgr = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
            locLstnr = new MyLocationListener();
            locMgr.requestSingleUpdate(provider, null);
         // locLstnr.gpsCurrentLocation();
         return true;
    // if normal view is touched, this code is executed
    case R.id.normalview:
         // creates a toast that displays "Map Normal Street View"
         Toast.makeText(Map.this, "Map Normal Street View", Toast.LENGTH_SHORT).show();
         // if the satellite view is enabled, we disable the satellite view so the normal view popups again
         if(mapView.isSatellite()==true){
         mapView.setSatellite(false);
         }
         return true;
    case R.id.satellite:
         // creates a toast that displays "Map Satellite view"
         Toast.makeText(Map.this, "Map Satellite View", Toast.LENGTH_SHORT).show();
         // if the satellite view is disabled we enable the satellite view
         if(mapView.isSatellite()==false){
         mapView.setSatellite(true);
    }

}
return true; 
```

}

```
@Override
protected boolean isRouteDisplayed() 
{
    // TODO Auto-generated method stub
    return true;
}

public class MyLocationListener implements LocationListener
{
    public void onLocationChanged(Location loc)
    {
        loc.getLatitude();
        loc.getLongitude();
        String Text = "My current location is: " +
                "Latitud = " + loc.getLatitude() +
                "Longitud = " + loc.getLongitude();
        Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show();

        String coordinates[] = {""+loc.getLatitude(), ""+loc.getLongitude()};
        double lat = Double.parseDouble(coordinates[0]);
        double lng = Double.parseDouble(coordinates[1]);

        GeoPoint p = new GeoPoint(
                (int) (lat * 1E6),
                (int) (lng * 1E6));

        mc.animateTo(p);
        mc.setZoom(7);
        mapView.invalidate();

    }

    public void onProviderDisabled(String provider)
    {
        Toast.makeText( getApplicationContext(),
                "Gps Disabled",
                Toast.LENGTH_SHORT ).show();
    }

    public void onProviderEnabled(String provider)
    {
        Toast.makeText( getApplicationContext(),
                "Gps Enabled",
                Toast.LENGTH_SHORT).show();
    }

    public void onStatusChanged(String provider, int status, Bundle extras)
    {
    }
}

// My overlay Class starts
class MyMapOverlays extends com.google.android.maps.Overlay
{   
    GeoPoint location = null;

    public MyMapOverlays(GeoPoint location)
    {
        super();
        this.location = location;
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow)
    {
        super.draw(canvas, mapView, shadow);
        // translate the screen pixels
        Point screenPoint = new Point();
        mapView.getProjection().toPixels(this.location, screenPoint);
        //add the image
        canvas.drawBitmap(BitmapFactory.decodeResource(getResources(), R.drawable.pushpin),
                screenPoint.x, screenPoint.y , null); //Setting the image &nbsp;location on the screen (x,y).
    }
}
// My overlay Class ends

private class MirItemizedOverlay extends ItemizedOverlay 
{
    private List<OverlayItem> mOverlays = new ArrayList<OverlayItem>();
    public MirItemizedOverlay(Drawable defaultMarker) 
    {
        super(boundCenterBottom(defaultMarker));
    }

    @Override
    protected OverlayItem createItem(int i) 
    {
        return mOverlays.get(i);
    }
    @Override
    public int size() 
    {
        return mOverlays.size();
    }
    public void addOverlayItem(OverlayItem overlayItem) 
    {
        mOverlays.add(overlayItem);
        populate();
    }
    public void addOverlayItem(int lat, int lon, String title) 
    {
        GeoPoint point = new GeoPoint(lat, lon);
        OverlayItem overlayItem = new OverlayItem(point, title, null);
        addOverlayItem(overlayItem);
    }

    /*
    @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView)
    {
        //---when user lifts his finger---
        if (event.getAction() == 1) 
        {
            GeoPoint p = mapView.getProjection().fromPixels(
            (int) event.getX(),
            (int) event.getY());

            Toast.makeText(getBaseContext(),
            p.getLatitudeE6() / 1E6 + "," +
                    p.getLongitudeE6() /1E6 ,
                    Toast.LENGTH_SHORT).show();

            Geocoder geoCoder = new Geocoder(getBaseContext(), Locale.getDefault());
            try 
            {
                List<Address> addresses = geoCoder.getFromLocation(p.getLatitudeE6() / 1E6, p.getLongitudeE6() / 1E6, 1);

                String strCompleteAddress= "";
                if (addresses.size() > 0)
                {
                    for (int i=0; i<addresses.get(0).getMaxAddressLineIndex();i++)
                    strCompleteAddress+= addresses.get(0).getAddressLine(i) + "\n";
                }
                Log.i("MyLocTAG => ", strCompleteAddress);
                Toast.makeText(getBaseContext(), strCompleteAddress, Toast.LENGTH_LONG).show();
            }
            catch (IOException e) 
            {
                Log.i("MyLocTAG => ", "this is the exception part");
                e.printStackTrace();
            }
            return true;
        }
        else
        return false;
    }*/
}

//An AsyncTask class for accessing the GeoCoding Web Service
private class GeocoderTask extends AsyncTask<String, Void, List<Address>>
{
    protected List<Address> doInBackground(String... locationName) 
    {
        // Creating an instance of Geocoder class
        Geocoder geocoder = new Geocoder(getBaseContext());
        List<Address> addresses = null;

        try {
            //Getting a maximum of 3 Address that matches the input text
            addresses = geocoder.getFromLocationName(locationName[0], 3);
        } 
        catch (IOException e) {
        e.printStackTrace();
        }
        return addresses;
    }

    protected void onPostExecute(List<Address> addresses) 
    {
        //Getting Reference to MapView of the layout activity_main
        MapView mapView = (MapView) findViewById(R.id.mapview1);

        // Setting ZoomControls
        mapView.setBuiltInZoomControls(true);

        // Getting MapController for the MapView
        MapController mc = mapView.getController();

        // Getting Drawable object corresponding to a resource image
        Drawable drawable = getResources().getDrawable(R.drawable.pushpin);

        // Getting Overlays of the map
        List<Overlay> overlays = mapView.getOverlays();

        // Creating an ItemizedOverlay
        LocationOverlay locationOverlay = new LocationOverlay(drawable,getBaseContext());

        // Clearing the overlays
        overlays.clear();

        if(addresses==null || addresses.size()==0)
        {
            Toast.makeText(getBaseContext(), "No Location found", Toast.LENGTH_SHORT).show();

            // Redraws the map to clear the overlays
            mapView.invalidate();
        }

        // Adding Markers on Google Map for each matching address
        for(int i=0;i<addresses.size();i++)
        {
            Address address = (Address) addresses.get(i);

            // Creating an instance of GeoPoint, to display in Google Map
            GeoPoint p = new GeoPoint((int)(address.getLatitude()*1E6), (int)(address.getLongitude()*1E6));

            String addressText = String.format("%s, %s",
                address.getMaxAddressLineIndex() > 0 ? address.getAddressLine(0) : "",
                address.getCountryName());

            // Creating an OverlayItem to mark the point
            OverlayItem overlayItem = new OverlayItem(p, "Location",addressText);

            // Adding the OverlayItem in the LocationOverlay
            locationOverlay.addOverlay(overlayItem);

            // Adding locationOverlay to the overlay
            overlays.add(locationOverlay);

            // Locate the first location
            if(i==0)
            mc.animateTo(p);
            mc.setZoom(15);
        }

        // Redraws the map
        mapView.invalidate();
    }
}

public void FindLocation(String plaats)
{

    Geocoder geoCoder = new Geocoder(this, Locale.getDefault());    
    try {
        List<Address> addresses = geoCoder.getFromLocationName(
            plaats, 5);
        //String add = "";
        if (addresses.size() > 0) {
            coordinates[counter] = (int) (addresses.get(0).getLatitude() * 1E6);
            counter++;
            coordinates[counter] = (int) (addresses.get(0).getLongitude() * 1E6);
            counter++;
        }    
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:27:43.077

一些提示：

*   在 FindLocation 添加一个 else 来捕获未找到的位置：

    公共无效查找位置（字符串 plaats）{

    ```
     Geocoder geoCoder = new Geocoder(this, Locale.getDefault());    
            try {
                List<Address> addresses = geoCoder.getFromLocationName(
                plaats, 5);
            //String add = "";
            if (addresses.size() > 0) {
                coordinates[counter] = (int) (addresses.get(0).getLatitude() * 1E6);
                counter++;
                coordinates[counter] = (int) (addresses.get(0).getLongitude() * 1E6);
                counter++;
            } else {
               Log.v(TAG, "Site " + plaats + " not found!");
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
    ```

同样在 onCreate() 循环中已经定义的位置，而不是整个数组：

```
 for (int i = 0; i<count; i+=2)
 {
     point = new GeoPoint(coordinates[i], coordinates[i+1]);
     OverlayItem overlayItem = new OverlayItem(point, "new place added", null);
     itemizedOverlay.addOverlayItem(overlayItem);
 } 
```

# ruby-on-rails - 在rails中为FormTagHelper提供特定的ID

> ID：13123141
> 
> 赞同：0
> 
> 时间：2012-10-29T14:03:12.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3, haml

我有一个用这样的**HAML**文件编写的表格

```
= form_tag "ratings_form", movies_path, :method => :get do
  Include: 
  - @all_ratings.each do |rating|
    = rating 
    = check_box_tag "ratings[#{rating}]", 'yes', @ratings.keys.include?(rating)
  = submit_tag 'Refresh' 
```

我想给每个**表单**和**提交按钮**一个特定的**id**

我检查了[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html)，发现给定的参数

**form_tag**或**submit_tag** 不包含 id 。

* * *

正确的答案是添加 :id => "id_u_want" 到任何标签，显然它会在我做的时候起作用

```
= form_tag movies_path, :id => "ratings_form" , :method => :get do
  Include: 
  - @all_ratings.each do |rating|
    = rating 
    = check_box_tag "ratings[#{rating}]", 'yes', @selected_ratings.keys.include?(rating)
  = submit_tag 'Refresh' , :id => "ratings_submit" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:07:31.863

试试看`:id=>"someid"`它是否适合你。

# asp.net - 控制器 MVC3 链接到文件夹/控制器/视图

> ID：13123142
> 
> 赞同：1
> 
> 时间：2012-10-29T14:03:21.783
> 
> 标签：asp.net, asp.net-mvc, namespaces, global-asax

我目前在将其添加到 global.asax 中的命名空间有问题：

```
routes.MapRoute(
 "Admin",
 "Admin/{controller}/{action}/{id}",
 new { controller = "Home", action = "Index", id = UrlParameter.Optional }, 
        null, new string[] {"project.Controllers.Admin"}
); 
```

现在，当我输入 url localhost/Admin/Controller/ 时，我的控制器正在被访问***** 放置我的控制器没有给我正确的视图。它给了我控制器/视图中的视图。我想要位于 Admin/Controller/Views 中的视图。我尝试直接链接到它们，但这并不好。知道这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:14:37.603

如果您使用的是 ASP.Net 2 或更高版本，您可能应该将此 Admin 部分添加为[ASP.Net MVC Area](http://msdn.microsoft.com/en-us/library/ee671793%28v=vs.100%29.aspx)。区域就像在单独的文件夹中的迷你 MVC 站点，应该可以解决您的问题。

# c# - 在 c# 中将 uchar[] 从本机 dll 编组为 byte[] 的正确方法

> ID：13123151
> 
> 赞同：2
> 
> 时间：2012-10-29T14:03:51.923
> 
> 标签：c#, .net, pinvoke, marshalling

我正在尝试将我的本机 dll 通过 CoTaskMemAlloc 分配的一些数据编组到我的 c# 应用程序中，并想知道我这样做的方式是否完全错误，或者我错过了方法 c# 方面的一些微妙装饰。

目前我有 c++ 方面。

```
extern "C" __declspec(dllexport) bool __stdcall CompressData(  unsigned char* pInputData, unsigned int inSize, unsigned char*& pOutputBuffer, unsigned int& uOutputSize)
{ ...
    pOutputBuffer = static_cast<unsigned char*>(CoTaskMemAlloc(60000));
    uOutputSize = 60000; 
```

在 C# 方面。

```
 private const string dllName = "TestDll.dll";

    [System.Security.SuppressUnmanagedCodeSecurity]
    [DllImport(dllName)]
    public static extern bool CompressData(byte[] inputData, uint inputSize, out byte[] outputData, out uint outputSize );
    ...
    byte[] outputData;
    uint outputSize;
    bool ret = CompressData(packEntry.uncompressedData, (uint)packEntry.uncompressedData.Length, out outputData, out outputSize); 
```

这里 outputSize 是 60000 正如预期的那样，但 outputData 的大小为 1，当我对缓冲区 c++ 端进行 memset 时，它似乎只复制了 1 个字节，所以这是错误的，我需要使用IntPtr + outputSize，还是我缺少一些微妙的东西来开始我已经拥有的工作？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T14:48:32.267

有两件事。

首先，P/Invoke 层不处理 C++ 中的引用参数，它只能处理指针。最后两个参数 (`pOutputBuffer`和`uOutputSize`) 特别不能保证正确编组。

我建议您将 C++ 方法声明更改为（或创建表单的包装器）：

```
extern "C" __declspec(dllexport) bool __stdcall CompressData(  
    unsigned char* pInputData, unsigned int inSize, 
    unsigned char** pOutputBuffer, unsigned int* uOutputSize) 
```

也就是说，第二个问题来自这样一个事实，即 P/Invoke 层也不知道如何封送[`SAFEARRAY`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221482%28v=vs.85%29.aspx)在非托管代码中分配的“原始”数组（而不是说，COM 中知道它的大小） .

这意味着在 .NET 方面，您必须编组返回的*指针*，然后手动编组数组中的元素（以及处置它，如果这是您的责任，看起来确实如此）。

您的 .NET 声明如下所示：

```
[System.Security.SuppressUnmanagedCodeSecurity]
[DllImport(dllName)]
public static extern bool CompressData(byte[] inputData, uint inputSize, 
    ref IntPtr outputData, ref uint outputSize); 
```

一旦你有了`outputData`as `IntPtr`（这将指向非托管内存），你可以通过调用[类](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.aspx)上的[`Copy`方法](http://msdn.microsoft.com/en-us/library/ms146631.aspx)将其转换为字节数组，如下所示：[`Marshal`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.aspx)

```
var bytes = new byte[(int) outputSize];

// Copy.
Marshal.Copy(outputData, bytes, 0, (int) outputSize); 
```

请注意，如果您有责任释放内存，则可以调用[`FreeCoTaskMem`方法](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.freecotaskmem.aspx)，如下所示：

```
Marshal.FreeCoTaskMem(outputData); 
```

当然，你可以把它包装成更好的东西，像这样：

```
static byte[] CompressData(byte[] input, int size)
{
    // The output buffer.
    IntPtr output = IntPtr.Zero;

    // Wrap in a try/finally, to make sure unmanaged array
    // is cleaned up.
    try
    {
        // Length.
        uint length = 0;

        // Make the call.
        CompressData(input, size, ref output, ref length);

        // Allocate the bytes.
        var bytes = new byte[(int) length)];

        // Copy.
        Marshal.Copy(output, bytes, 0, bytes.Length);

        // Return the byte array.
        return bytes;
    }
    finally
    {
        // If the pointer is not zero, free.
        if (output != IntPtr.Zero) Marshal.FreeCoTaskMem(output);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:14:19.767

pinvoke 编组器无法猜测返回的 byte[] 可能有多大。C++ 中指向内存的原始指针没有指向内存块的可发现大小。这就是您添加 uOutputSize 参数的原因。对客户端程序很好，但对 pinvoke 编组器来说还不够好。您必须帮助并将 [MarshalAs] 属性应用于 pOutputBuffer，指定**SizeParamIndex**属性。

请注意，编组器正在复制数组。这不是那么理想，您可以通过允许客户端代码传递数组来避免它。编组器将固定它并将指针传递给托管数组。唯一的麻烦是客户端代码没有像样的方法来猜测数组的大小。典型的解决方案是让客户端调用它两次，第一次用 uOutputSize = 0，函数返回所需的数组大小。这将使 C++ 函数看起来像这样：

```
extern "C" __declspec(dllexport) 
int __stdcall CompressData(
     const unsigned char* pInputData, unsigned int inSize, 
     [Out]unsigned char* pOutputBuffer, unsigned int uOutputSize) 
```

# python - pymongo 中使用了 py3compat ise 吗？

> ID：13123155
> 
> 赞同：1
> 
> 时间：2012-10-29T14:04:03.950
> 
> 标签：python, pymongo

今天早上我收到了这个错误，这很奇怪！

```
Traceback (most recent call last):
File "app.py", line 9, in <module>
import handlers, os
File "G:\Mon projet\sog\handlers.py", line 5, in <module>
import gridfs
File "build\bdist.win-amd64\egg\gridfs\__init__.py", line 23, in <module>

File "build\bdist.win-amd64\egg\gridfs\errors.py", line 17, in <module>
File "build\bdist.win-amd64\egg\pymongo\__init__.py", line 61, in <module>

File "build\bdist.win-amd64\egg\pymongo\connection.py", line 44, in <module>
ImportError: No module named py3compat 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:38:37.403

有问题，

这是因为我已经[为 python 安装了 bson，](http://pypi.python.org/pypi/bson/0.3.3)所以它没有在 bson 模块中找到文件 py3compat.py，因为它不是 pymongo 的文件。

谢谢你，再次抱歉。

# legacy - 旧版连接身份验证停止工作

> ID：13123158
> 
> 赞同：1
> 
> 时间：2012-10-29T14:04:10.960
> 
> 标签：legacy, facebook-oauth, facebook-login

我正在使用使用旧版连接身份验证构建并集成到 Facebook 的应用程序：

[https://www.facebook.com/login.php?api_key=](https://www.facebook.com/login.php?api_key=) {appkeyhere}

从 2012 年 10 月 22 日那一周的某个时间开始，使用上述 URL 登录应用程序的现有用户将被重定向到[https://www.facebook.com/login.php?login_attempt=1](https://www.facebook.com/login.php?login_attempt=1)并出现空白屏幕。首次注册该应用程序的新用户会被重定向回应用程序站点。

我让维护站点的人员检查部署日志，以查看是否有重大更改部署到为后端 OAuth 提供服务的页面，并且他们没有进行任何更改。

关于从哪里开始尝试调试此问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:50:38.563

[仅支持登录](https://developers.facebook.com/docs/concepts/login/)文档中当前记录的身份验证流程- 上周删除了最后一个遗留端点（其中大部分已在 2011 年 10 月弃用） - 对于桌面应用程序，在[https://developers.facebook 上有更具体的文档。 com/docs/howtos/login/login-for-desktop/](https://developers.facebook.com/docs/howtos/login/login-for-desktop/)包含详细信息

# java - Proguard 混淆 + getJarEntry

> ID：13123159
> 
> 赞同：0
> 
> 时间：2012-10-29T14:04:24.703
> 
> 标签：java, jar, obfuscation, proguard

我有一个 jar 文件，其中包含一个名为“kaza”的包。在这个罐子里有代码说：

```
JarFile jfile = new JarFile(fileName);
jfile.getJarEntry("kaza/"); 
```

从我的 jar 运行时，此行返回 jarEntry。当我使用 Proguard 混淆这个 jar 时，这一行返回 null 虽然当我打开混淆的 jar 时，我在那里找到了“kaza”文件夹！

我尝试将其更改为：

```
jfile.getJarEntry("kaza\\"); 
```

或者

```
jfile.getJarEntry("kaza"); 
```

但是没有任何效果！

可能是什么问题呢？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T00:13:47.017

默认情况下，ProGuard 会从 jar 中删除目录条目。您应该仔细检查您是否已指定`-keepdirectories`以及目录条目是否存在于已处理的 jar 中。确保显示此类条目的不是 zip 存档查看器，即使它们不存在。如果这仍然不起作用，您可以尝试手动解压缩 jar 并再次压缩它，看看它是否有所作为。

# c++ - 通过 odbc 连接到 linux 上的 mssql

> ID：13123161
> 
> 赞同：0
> 
> 时间：2012-10-29T14:04:31.163
> 
> 标签：c++, sql-server, odbc

我在 linux redhat 64bit 上通过 odbc 连接了 MSSQL（在 Windows 上）。
下面是 odbc 和 freetds 配置文件。

`freetds.conf`：

```
[FreeTDS]  
host=172.21.32.20  
port=1433  
tds version=7.2  
client charset = GB2312 
```

`odbcinst.ini`：

```
[TDS]  
Description = TDS  
Driver = /usr/local/lib/libtdsodbc.so  
Trace = Yes  
TraceFile=/tmp/odbcinst.log  
UsageCount = 1 
```

`odbc.ini`：

```
[SQLSERVER]  
Driver = TDS  
Description = sql server dsn  
Trace = NO  
Server = 172.21.32.20  
Database = Live  
Port = 1433  
TDS_Version = 7.2  
TraceFile=/tmp/sqlserver.log 
```

片段：

```
QString f3ErpDsn = QString::fromLocal8Bit("Driver={SQLSERVER};server=172.21.32.20;database=Live;uid=inp;pwd=inp;");
QSqlDatabase f3ErpDb= QSqlDatabase::addDatabase("QODBC");
f3ErpDb.setDatabaseName(f3ErpDsn);
// f3ErpDb.setDatabaseName("SQLSERVER");
f3ErpDb.setUserName("inp");
f3ErpDb.setPassword("inp");
QString sqlCmdStr = "select * from dbo.Table_Drilling_Data01 where status=1";
if ( ! f3ErpDb.open() )
{
        qDebug() << f3ErpDb.lastError().text();
        return 1;
}
QSqlTableModel model;
model.setTable("dbo.Table_Drilling_Data01");
model.setFilter("status=3");
model.select();
qDebug() << model.lastError().text(); 
```

错误信息：

1.  `f3ErpDb.setDatabaseName(f3ErpDsn);`
    如果`setDatabaseName`是`f3ErpDsn`错误消息是：

    > “QODBC3：无法连接”、“[unixODBC][驱动程序管理器]未找到数据源名称，且未指定默认驱动程序”）

    我在 odbc.ini 中定义了 SQLSERVER。为什么它找不到呢？

2.  但如果我改变了`f3ErpDb.setDatabaseName("SQLSERVER");`，错误信息是：

    > “[FreeTDS][SQL Server]传入的表格数据流 (TDS) 远程过程调用 (RPC) 协议流不正确。参数 1 (""): 数据类型 0x00 未知。QODBC3: 无法执行语句”

这让我很困惑，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:07:33.257

我不确定 QSqlDatabase 是什么。但似乎您的 SQL 连接字符串不正确。

尝试这样的事情：

```
UID=inp;PWD=inp;DSN=SQLSERVER;database=Live;SERVER=AMIN\SQLEXPRESS;charset=UTF-8 
```

`DSN=SQLSERVER`因为`SQLSERVER`是您的唯一定义的 DSN`odbc.ini`

`SERVER=AMIN\SQLEXPRESS`- 尝试 SQL Server 的 Windows 名称，而不是主机的 IP 地址（我不确定此处不允许使用 IP，但 Windows 名称 100% 有效）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T14:17:18.580

我遇到了同样的问题，当我将 TDS 协议更改为 8.0 时解决了它，之前是 7.0。我通过 Qt 使用 freetds、unixodbc 连接到 MSSQL 数据库。

# javascript - 如何在一个新的 URL 中弹出一个窗口，同时隐藏当前窗口并防止点击（可能使用 jQuery）

> ID：13123162
> 
> 赞同：4
> 
> 时间：2012-10-29T14:04:31.987
> 
> 标签：javascript, jquery

我通常习惯于“window.open”打开一个弹出窗口到一个新的 URL。如何在新 URL 中打开一个窗口，使当前窗口变暗/变灰，并在关闭时移除阴影背景。

最好使用jQuery来做到这一点？我可以在不使用 jquery 插件的情况下使用默认库吗？

我想做这样的事情，然后在卸载时“禁用”我的影子。希望使用核心 jQuery 库或标准 javascript 调用。我想避免使用除 jQuery 之外的任何插件。

```
var popup = window.open('http://google.com', 'popup');
showShadow();
$(window).unload(function() {
    if(!popup.closed) {
        disableShadow();
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T01:58:35.247

基本上，您可以打开弹出窗口并将该窗口设置为 beforeunload。简而言之，是这样的：

```
popup = window.open("", "name", "width=400, height=300")
popup.onbeforeunload = function() { $('#shadow').hide();} 
```

我为你创造了一个小提琴。

[http://jsfiddle.net/DDksS/](http://jsfiddle.net/DDksS/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T21:44:05.320

所以你想用jQuery而不是使用现有的插件来构建你自己的模态框？...好吧，让我们玩吧（正如已经指出的那样，使用弹出窗口不是用户友好的解决方案）：

你的清单：

```
 - the trigger
 - the shadow layer
 - the modal box size and position
 - add content to modal and display it along the shadow 
```

1）触发器是一个简单的html链接，用于打开modal里面的内容

```
<a href="http://jsfiddle.net" class="myModal" data-width="400" data-height="300">open url</a> 
```

...我们将通过`data-width`和`data-height`(HTML5) 属性传递模态框的大小。

2）`shadow`图层是我们将在触发后附加到正文的html结构。我们可以在 js 变量中设置结构

```
var shadow = "<div class='shadow'></div>"; 
```

3）正如我们提到的，模态框的大小是通过`data-*`链接中的一些属性来设置的。我们需要做一些数学运算

```
var modalWidth = $(this).data("width");
var modalHeight = $(this).data("height");
var modalX = (($(window).innerWidth()) - modalWidth) / 2; // left position
var modalY = (($(window).innerHeight()) - modalHeight) / 2; // top position 
```

**注意**：是我们稍后将进入方法`$(this)`的触发器选择器。BTW，该方法需要jQuery v1.7+`.myModal``.on("click")``.on()`

4) 现在我们需要创建 modal 的 html 结构并传递内容`href`。我们将创建一个函数

```
function modal(url) {
    return '<div id="modal"><a id="closeModal" title="close" href="javascript:;"><img src="http://findicons.com/files/icons/2212/carpelinx/64/fileclose.png" alt="close" /></a><iframe src="' + url + '"></iframe></div>';
} 
```

...如您所见，我们的结构包含一个关闭按钮，用于移除模态层和阴影层。该函数在被调用时还获取一个参数 ( `url`)，该参数允许设置标签的`src`属性。`iframe`

**注意**：我们必须使用`iframe`标签来打开外部 url，但是在使用 iframe 时我们应该始终考虑[相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)和[其他安全限制。](https://stackoverflow.com/a/9372804/1055987)

所以现在，我们需要在单击`.myModal`触发器后将所有事件放在一起，它们将阴影和模态框都附加到正文中，并在单击关闭按钮时将其删除，因此

```
$(".myModal").on("click", function(e) {
    e.preventDefault();
    // get size and position
    modalWidth = $(this).data("width");
    modalHeight = $(this).data("height");
    modalX = (($(window).innerWidth()) - modalWidth) / 2;
    modalY = (($(window).innerHeight()) - modalHeight) / 2;
    // append shadow layer
    $(shadow).prependTo("body").css({
        "opacity": 0.7
    });
    // append modal (call modal() and pass url)
    $(modal(this.href)).appendTo("body").css({
        "top": modalY,
        "left": modalX,
        "width": modalWidth,
        "height": modalHeight
    });
    // close and remove
    $("#closeModal").on("click", function() {
        $("#modal, .shadow").remove();
    });
}); // on 
```

**样式**：当然我们需要一些基本的 CSS 样式来使我们的模态元素正常工作：

```
.shadow {width: 100%; height: 100%; position: fixed; background-color: #444; top: 0; left:0; z-index: 400}
#modal {z-index: 500; position: absolute; background: #fff; top: 50px;}
#modal iframe {width: 100%; height: 100%}
#closeModal {position: absolute; top: -15px; right: -15px; font-size: 0.8em; }
#closeModal img {width: 30px; height: 30px;} 
```

***观看[演示](http://jsfiddle.net/8b3Zj/)**

**奖励**：您还可以绑定事件以使用键`keyup`关闭模式`escape`

```
$(document).keyup(function(event) {
    if (event.keyCode === 27) {
        $("#modal, .shadow").remove();
    }
}); //keyup 
```

**最后注意**：代码经过许多改进和优化，但它是许多灯箱所做的基本布局。我的最后一个建议：使用[fancybox](http://fancyapps.com/fancybox/)获得更高级的功能……有时不值得重新发明轮子；）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T15:34:52.143

使用 Javascript 创建新的弹出窗口是如此 1990 年代，更不用说不是非常用户友好。您正在寻找的，无论是 UI 方面还是外观方面都是模态对话框；有数十亿个关于如何创建模态对话框的示例和预打包的 jquery 片段，并且大多数客户端 UI 框架（如 jQuery UI、YUI 和 Bootstrap）都内置了模态对话框功能。我建议深入研究这些。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T14:05:29.313

试试jquery插件，比如fancybox [http://fancybox.net/](http://fancybox.net/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-01T23:47:06.257

基本上，您需要将一个事件侦听器附加到您的新窗口以在您的网页中运行 disableShadow() 函数。

如果您将此添加到您的代码中，我认为它应该可以工作。

```
popup.unload(function() { disableShadow() }); 
```

改编自：[在 Javascript 打开的窗口上附加一个 onload 处理程序](https://stackoverflow.com/questions/3233455/attach-an-onload-handler-on-a-window-opened-by-javascript)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-05T16:49:29.253

您应该使用调用返回的实例的`beforeUnload`事件，如下所示：`window``window.open()`

```
popup = window.open('relative_url', 'popup');
$(popup).bind('beforeunload', function() {
    disableShadow();
}); 
```

请注意，URL 必须在**同一个域中**，以便打开器窗口与弹出窗口交互！

在这里查看小提琴：http: [//jsfiddle.net/hongaar/QCABh/](http://jsfiddle.net/hongaar/QCABh/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-06T14:26:27.707

您所需要的只是标准的 javascript 函数[showModalDialog](https://developer.mozilla.org/en-US/docs/DOM/window.showModalDialog "模态对话框")。然后你的代码看起来像

```
var url = 'http://google.com';
showShadow();
var optionalReturnValue = showModalDialog(url);

//Following code will be executed AFTER you return (close) popup window/dialog
hideShadow(); 
```

**更新** 正如 hongaar 所说，Opera 不喜欢 showModalDialog。当弹出窗口关闭时，它也不会在（之前）卸载时触发。要解决此问题，您需要计时器 (window.setTimeout) 来定期检查窗口是否仍然存在。更多详情请看[这里](https://stackoverflow.com/questions/3291712/is-it-possible-to-open-a-popup-with-javascript-and-then-detect-when-the-user-clo)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-06T20:15:30.397

您可以打开一个新窗口，当它关闭时，您可以在打开窗口中执行一个功能。

我将通过将脚本直接写入新窗口来做一个简单的示例，但如果为弹出窗口提供了链接，您也可以将其包含在用于新窗口的 HTML 中：

```
$("#popupBtn").on('click', openPopup); //using a button to open popup

function openPopup() {
    $('#cover').fadeIn(400);
        var left = ($(window).width()/2)-(200/2),
            top = ($(window).height()/2)-(150/2),
            pop = window.open ("", "popup", "width=400, height=300, top="+top+", left="+left),
            html  = '<!DOCTYPE html>';
            html += '<head>';
            html += '<title>My Popup</title>';
            html += '<scr'+'ipt type="text/javascript">';
            html += 'window.onbeforeunload = function() { window.opener.fadeoutBG(); }';
            html += '</sc'+'ript>';
            html += '</head>';
            html += '<body bgcolor=black>';
            html += '<center><b><h2 style="color: #fff;">Welcome to my most excellent popup!</h2></b></center><br><br>';
            html += '<center><b><h2 style="color: #fff;">Now close me!</h2></b></center>';
            html += '</body></html>';

        pop.document.write(html);
}

window.fadeoutBG = function() { //function to call from popup
    $('#cover').fadeOut(400);
} 
```

使用淡入的固定封面也将阻止对页面上元素的任何点击，您甚至可以将点击处理程序附加到封面，`pop.close()`以在点击封面时关闭弹出窗口，就像如果您点击模态框会关闭一样在它之外。

从弹出窗口调用父页面上的函数的优点之一是可以将值从弹出窗口传递到父页面，并且您可以做很多其他方式做不到的事情。

[**全屏_FIDDLE**](http://jsfiddle.net/mGqgT/8/embedded/result/)

[**小提琴**](http://jsfiddle.net/mGqgT/8/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-11-07T12:02:42.643

为什么不直接使用 jQuery UI？我知道您不想要另一个库，而是 jQuery 的扩展而不是另一个库，因为它可以在没有它的情况下生存。它有很多小部件，每个小部件都可以更改、配置。最好的是它可以查看不同的主题，甚至您可以使用主题滚轮快速轻松地创建一个，并且可以模块化。只需在当前项目中获取您需要的东西。看一下这个：

[http://jqueryui.com/dialog/#modal-form](http://jqueryui.com/dialog/#modal-form)

使用起来真的很简单。有了这个，您可以打开带有框架的模态对话框到不同的 url。在关闭事件中，您可以做任何您想做的事情。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-11-07T18:57:06.227

试试彩盒

它简单易用

[http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

快速示例：

```
<link rel="stylesheet" href="http://www.jacklmoore.com/colorbox/example1/colorbox.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://www.jacklmoore.com/colorbox/colorbox/jquery.colorbox.js"></script>
<script>
    $(document).ready(function(){
        //Examples of how to assign the ColorBox event to elements
        $(".iframe").colorbox({iframe:true, width:"80%", height:"80%"});
    });
</script>

<a class='iframe' href="http://google.com">Outside Webpage (Iframe)</a> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-29T14:12:55.940

你也可以试试这个... [http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

[这里的](http://fancyapps.com/fancybox/#examples)例子

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-11-07T15:31:11.293

在模态类型中尝试[http://thickbox.net/](http://thickbox.net/) ，示例：[http ://thickbox.net/#examples](http://thickbox.net/#examples)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-11-07T22:24:02.163

我也这样做了。

首先，一些 URL 在（iframe）模式窗口中根本不起作用；我不能说它是否可以在浏览器支持的本机模式窗口中工作，因为我还没有尝试过。在 iframe 中加载 google 或 facebook，看看会发生什么。

其次，诸如 window onunload 事件之类的事情并不总是会触发（正如我们已经看到的一些人）。

**接受的答案版本也仅适用于静态页面。任何重新加载（甚至是页面上的 F5）都会导致阴影隐藏。** 由于我无法对已接受的答案发表评论，因此我至少希望其他任何查看这些结果的人都知道这一点。

过去我采取了一种技术含量较低的方法来解决这个问题：轮询。

[http://jsfiddle.net/N8AqH/](http://jsfiddle.net/N8AqH/)

```
<html>
    <head>
        <script type="text/javascript">
            function openWindow(url)
            {
                var wnd = window.open(url);
                var timer = null;

                var poll = function()
                {
                    if(wnd.closed) { alert('not opened'); clearInterval(timer); }
                };  

                timer = setInterval(poll, 1000);
            }
        </script>
    </head>
    <body>
        <a href="#" onclick="openWindow('http://www.google.com'); return false;">click me</a>
    </body>
</html> 
```

有关示例，请参见上面的链接。我在 IE、FF 和 Chrome 中进行了测试。我的计时器是每 1 秒一次，但是浏览器上的工作量非常低，如果你想让它感觉更即时，你可以轻松地将其降低到 100 毫秒左右。

在这个例子中你所要做的就是，在调用 window.open 之后，调用你的“显示阴影”函数，而不是在你关闭时发出警报，调用你的“隐藏阴影”函数，它应该可以实现你正在寻找的东西.

# html - CSS HTML 问题 - 工具栏扩展得太远

> ID：13123166
> 
> 赞同：1
> 
> 时间：2012-10-29T14:04:41.533
> 
> 标签：html, css

这是我正在使用的代码：

[http://jsfiddle.net/BTYA7/](http://jsfiddle.net/BTYA7/)

我无法弄清楚为什么工具栏（蓝色）超出了文本框的右侧。似乎没有任何填充或边距错过。

我将它应用为蓝色和粉红色以帮助显示它：

```
.uEditorToolbar {background-color: blue;} 
```

有人可以给一些指导吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:11:10.073

uEditorToolbar 有两个额外的填充像素。`width:100%`设置不包括填充的宽度。如果需要填充，您可以删除`width:100%`，并且蓝色条不会延伸太远。

这是你需要的，还是我错过了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:11:51.050

CSS 标准指定的默认布局样式意味着宽度和高度属性仅包括内容，但不包括边框、边距或填充。因此 和 的组合`width:100%`将`padding: 0 0 0 2px;`内容推出 2px。

的默认显示`<ul>`是块，所以`width:100%`无论如何可能是不必要的。

如果您删除`width:100%`或`padding-left`将解决问题。

[`box-sizing`](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)或者，可以使用CSS3属性来更正布局`box-sizing: border-box;`（如果您所针对的所有浏览器都[支持该属性](http://caniuse.com/#search=border-box)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T14:18:29.407

似乎有一个 2px 的填充。如果我删除填充，那么它看起来没问题。

```
.uEditor .uEditorToolbar
{
    list-style: none;
    width: 100%;
    height: 48px;
    margin: 0;
    padding: 0 0 0 2px;
} 
```

[http://jsfiddle.net/BTYA7/5/](http://jsfiddle.net/BTYA7/5/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T14:21:35.567

`width:100%; padding: 2px;`从`.uEditor .uEditorToolbar`CSS 类中删除。它会起作用的。

# javascript - Jquery 负载一直在工作，直到我重新启动 Wampserver，然后不再

> ID：13123167
> 
> 赞同：0
> 
> 时间：2012-10-29T14:04:43.027
> 
> 标签：javascript, jquery, ajax, wordpress

感谢 Jquery，我尝试在 Wordpress 上加载一些内容`.load()`。有时，当我的代码正常时，第二天它就不再工作了......

我试图缩小原因。首先，我认为这是语法问题或单/双引号混淆，但由于它工作过一次，因此没有理由涉及语法或错误。我考虑过糟糕的缓存设置，但 shift+F5 不会破坏我的工作代码。

现在我刚刚尝试使用完美运行的代码关闭并重新启动 WAMPserver。还有宾果游戏，当我重新启动服务器时，我的加载功能无法正常工作（与 1 分钟前一样......）！

**编辑：**我刚刚用我现在使用的代码替换了代码（下面）

```
$(document).ready(function(){
    $.ajaxSetup({cache:false});
    $("#portfolio-list li:not(#DrawerContainer)").click(function(){
        var post_link = $(this)
             //.parentsUntil(".ProjectWrap") 
             //.parent()
             .find('.mosaic-backdrop')
             .attr("href");
    console.debug(post_link); //to get post_link info in the console
    $('#DrawerContainer').remove(); // remove existing, if any
    $('<li/>').attr('id', 'DrawerContainer').css({display: 'none'}).data('citem', this).html("loading...").load(post_link + " #container > * ").insertAfter(LastInRow).slideDown(500);
    return false; 
    });
}); 
```

当该功能不起作用时，我尝试删除该部分`.load(post_link + " #container > * ");`并将其替换为紧随其后的部分（完整的 url）。通常它可以工作，至少我可以继续设计我的页面，但我必须解决这个问题。

什么会导致这种奇怪的行为？WAMPserver 可以在关闭时重写某些内容吗？有没有我可以检查的选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:43:19.567

尽管这已在问题的评论中得到解决，但对于浏览该页面的任何人来说，这里都是一个答案。

跨不同域运行 ajax 请求存在问题。您的 WAMPserver 不喜欢它，除非您另有说明，否则它将停止它。尽管您在本地工作，但 WAMPserver 认为`http://localhost/`与`http://127.0.0.1/`.

为了解决这个问题，在处理 ajax 的文件中添加：
`<?php header('Access-Control-Allow-Origin: *'); ?>`

请注意，您也可以更改`*`URL（例如`http://127.0.0.1/`

如果这不起作用，您可能必须[更改服务器上的设置。](http://enable-cors.org/)

# grails - 可搜索索引在手动更新时被锁定 (LockObtainFailedException)

> ID：13123173
> 
> 赞同：3
> 
> 时间：2012-10-29T14:04:51.237
> 
> 标签：grails, compass-lucene, grails-searchable, searchable-plugin

我们有一个在负载均衡器后面运行的 Grails 项目。服务器上运行着三个 Grails 应用程序实例（使用单独的 Tomcat 实例）。每个实例都有自己的可搜索索引。因为索引是分开的，所以自动更新不足以保持应用程序实例之间的索引一致。因此，我们禁用了可搜索的索引镜像，并且索引的更新是在计划的石英作业中手动完成的。根据我们的理解，应用程序的其他部分不应修改索引。

石英作业每分钟运行一次，它从数据库中检查应用程序更新了哪些行，并重新索引这些对象。该作业还检查同一个作业是否已经在运行，因此它不会执行任何并发索引。应用程序在启动后几个小时内运行良好，然后在作业开始时突然抛出 LockObtainFailedException：

> 22.10.2012 11:20:40 [xxxx.ReindexJob] 错误无法更新可搜索索引，类 org.compass.core.engine.SearchEngineException：无法打开子索引 [产品] 的编写器；嵌套异常是 org.apache.lucene.store.LockObtainFailedException：锁定获取超时：SimpleFSLock@/home/xxx/tomcat/searchable-index/index/product/lucene-a7bbc72a49512284f5ac54f5d7d32849-write.lock

根据上次执行作业的日志，重新索引已完成，没有任何错误，作业成功完成。尽管如此，这次re-index操作还是抛出了锁定异常，就好像之前的操作没有完成，锁还没有被释放一样。在应用程序重新启动之前，锁不会被释放。

我们尝试通过手动打开锁定的索引来解决问题，导致日志打印如下错误：

> 22.10.2012 11:21:30 [manager.IndexWritersManager] 错误非法状态，将索引编写器标记为打开，而另一个标记为打开子索引 [产品]

在此之后，工作似乎正常工作并且不会再次陷入锁定状态。但是，这会导致应用程序不断使用 100% 的 CPU 资源。以下是石英作业代码的缩短版本。

任何帮助将不胜感激，以解决问题，在此先感谢。

```
class ReindexJob {

def compass
...

static Calendar lastIndexed

static triggers = {
    // Every day every minute (at xx:xx:30), start delay 2 min
    // cronExpression:                           "s  m h D M W [Y]"
    cron name: "ReindexTrigger", cronExpression: "30 * * * * ?", startDelay: 120000
}

def execute() {
    if (ConcurrencyHelper.isLocked(ConcurrencyHelper.Locks.LUCENE_INDEX)) {
        log.error("Search index has been locked, not doing anything.")
        return
    }

    try {
        boolean acquiredLock = ConcurrencyHelper.lock(ConcurrencyHelper.Locks.LUCENE_INDEX, "ReindexJob")
        if (!acquiredLock) {
            log.warn("Could not lock search index, not doing anything.")
            return
        }

        Calendar reindexDate = lastIndexed
        Calendar newReindexDate = Calendar.instance
        if (!reindexDate) {
            reindexDate = Calendar.instance
            reindexDate.add(Calendar.MINUTE, -3)
            lastIndexed = reindexDate
        }

        log.debug("+++ Starting ReindexJob, last indexed ${TextHelper.formatDate("yyyy-MM-dd HH:mm:ss", reindexDate.time)} +++")
        Long start = System.currentTimeMillis()

        String reindexMessage = ""

        // Retrieve the ids of products that have been modified since the job last ran
        String productQuery = "select p.id from Product ..."
        List<Long> productIds = Product.executeQuery(productQuery, ["lastIndexedDate": reindexDate.time, "lastIndexedCalendar": reindexDate])

        if (productIds) {
            reindexMessage += "Found ${productIds.size()} product(s) to reindex. "

            final int BATCH_SIZE = 10
            Long time = TimeHelper.timer {
                for (int inserted = 0; inserted < productIds.size(); inserted += BATCH_SIZE) {
                    log.debug("Indexing from ${inserted + 1} to ${Math.min(inserted + BATCH_SIZE, productIds.size())}: ${productIds.subList(inserted, Math.min(inserted + BATCH_SIZE, productIds.size()))}")
                    Product.reindex(productIds.subList(inserted, Math.min(inserted + BATCH_SIZE, productIds.size())))
                    Thread.sleep(250)
                }
            }

            reindexMessage += " (${time / 1000} s). "
        } else {
            reindexMessage += "No products to reindex. "
        }

        log.debug(reindexMessage)

        // Re-index brands
        Brand.reindex()

        lastIndexed = newReindexDate

        log.debug("+++ Finished ReindexJob (${(System.currentTimeMillis() - start) / 1000} s) +++")
    } catch (Exception e) {
        log.error("Could not update searchable index, ${e.class}: ${e.message}")
        if (e instanceof org.apache.lucene.store.LockObtainFailedException || e instanceof org.compass.core.engine.SearchEngineException) {
            log.info("This is a Lucene index locking exception.")
            for (String subIndex in compass.searchEngineIndexManager.getSubIndexes()) {
                if (compass.searchEngineIndexManager.isLocked(subIndex)) {
                    log.info("Releasing Lucene index lock for sub index ${subIndex}")
                    compass.searchEngineIndexManager.releaseLock(subIndex)
                }
            }
        }
    } finally {
        ConcurrencyHelper.unlock(ConcurrencyHelper.Locks.LUCENE_INDEX, "ReindexJob")
    }
}
} 
```

根据 JMX CPU 示例，Compass 似乎在幕后进行了一些调度。从 1 分钟的 CPU 样本来看，在比较正常和 100% CPU 实例时似乎几乎没有什么不同：

*   org.apache.lucene.index.IndexWriter.doWait() 正在使用大部分 CPU 时间。
*   Compass Scheduled Executor Thread 显示在线程列表中，这在正常情况下是看不到的。
*   一个 Compass Executor 线程正在执行 commitMerge，在正常情况下，这些线程都没有执行 commitMerge。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:13:29.257

您可以尝试增加“compass.transaction.lockTimeout”设置。默认值为 10（秒）。

另一种选择是禁用 Compass 中的并发性并使其同步。这由 'compass.transaction.processor.read_committed.concurrentOperations': 'false' 设置控制。您可能还必须将“compass.transaction.processor”设置为“read_committed”

这些是我们当前使用的指南针设置：

```
compassSettings = [
'compass.engine.optimizer.schedule.period': '300',
'compass.engine.mergeFactor':'1000',
'compass.engine.maxBufferedDocs':'1000',
'compass.engine.ramBufferSize': '128',
'compass.engine.useCompoundFile': 'false',
'compass.transaction.processor': 'read_committed',
'compass.transaction.processor.read_committed.concurrentOperations': 'false',
'compass.transaction.lockTimeout': '30',
'compass.transaction.lockPollInterval': '500',
'compass.transaction.readCommitted.translog.connection': 'ram://'
] 
```

这已关闭并发。您可以通过将“compass.transaction.processor.read_committed.concurrentOperations”设置更改为“true”来使其异步。（或删除条目）。

指南针配置参考： [http ://static.compassframework.org/docs/latest/core-configuration.html](http://static.compassframework.org/docs/latest/core-configuration.html)

read_committed 处理器的并发文档：http: [//www.compass-project.org/docs/latest/reference/html/core-searchengine.html#core-searchengine-transaction-read_committed](http://www.compass-project.org/docs/latest/reference/html/core-searchengine.html#core-searchengine-transaction-read_committed)

如果要保持异步操作，还可以控制它使用的线程数。使用 compass.transaction.processor.read_committed.concurrencyLevel=1 设置将允许异步操作，但只使用一个线程（默认为 5 个线程）。还有 compass.transaction.processor.read_committed.backlog 和 compass.transaction.processor.read_committed.addTimeout 设置。

我希望这有帮助。

# php - PHP在数组中查找字符串？

> ID：13123177
> 
> 赞同：1
> 
> 时间：2012-10-29T14:04:59.677
> 
> 标签：php

我有一个字符串（url路径），例如`/recipes/cheese/cheese-meat-loaf`，我有一个巨大的路径数组，例如

```
'/recipes/',
'/content/'
... 
```

我想走我的路径并在数组中找到与路径的一部分匹配的路径。所以对于这个例子，它会`/recipes/`在数组中匹配，因为路径包含/recipes/，但数组也可能包含`/recipes/cheese/`在这种情况下它应该匹配它。

所以几乎我想通过路径减去之间的所有内容`/`并尝试匹配它......所以它会做

```
`/recipes/cheese/cheese-meat-loaf` then if not found
`/recipes/cheese/` then if not found
`/recipes/` then if not found
return default 
```

它将返回巨型数组中的值（键是路径）。

我希望它倒退，因为我只想要一个值，并且可能有多个`/recipes/*/`

但我不确定该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:12:26.793

由于我们不是来为您编写代码的，所以让我为您编写一个“食谱”，让您自己编写代码。然后，如果您在此过程中遇到问题，您可以回到这里提出更具体的问题，我们可以更好地帮助您。

1.  在您的数组中搜索当前的搜索字符串
2.  如果找到，则返回数组中的值
3.  如果您还没有找到它，请在搜索字符串中搜索最后一次出现的斜杠字符，然后将其连同其后的所有内容一起删除
4.  使用新的搜索字符串从 1 重新开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:11:06.360

尝试通过切断最后一个 / 并使用该值在您的数组中搜索来缩短您的 URL：

```
$arr = array([with many elements]);
$url = '/recipes/cheese/cheese-meat-loaf';
$found = false;
while ($found === false && $url !== '') {
  if (in_array($url, $arr)) $found = $url;
  else {
    $shorten = preg_replace('/(\/[^\/]*)$/', '', $url);
    if ($shorten === $url) break;
    else $url = $shorten;
  }
}
echo $found !== false ? 'found: ' . $url : 'not found'; 
```

[活生生的例子](http://codepad.org/dXZT7zEs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:11:47.890

PHP中有一个函数`explode`可以将字符串分解成碎片。 `explode("/",$inputstring)`将返回一个数组。例如：

```
explode("/",'/recipes/cheese/cheese-meat-loaf');

array(
    [0]=>"recipies"
    [1]=>"cheese"
    [2]=>"cheese-meat-loaf"
) 
```

你也可以爆炸`cheese-meat-loaf`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T16:40:17.460

对路径数组进行排序，以使最长的路径排在第一位。然后通过并返回第一场比赛：

```
$array = array(
    '/recipies',
    '/recipies/cheese'
    );

$url = "/recipies/cheese/fondue";

function lsort($a,$b){
    $diff = strlen($b) - strlen($a);
    return $diff;
}

usort($array,'lsort');

foreach( $array as $path ){
    echo "Testing $path<br/>";
    if( !strncmp($url, $path, strlen($path)) ){    
       echo "Best match is $path</br/>";
       break;
    }
} 
```

样本输出：

```
Testing /recipies/cheese
Best match is /recipies/cheese 
```

# java - Java中的重载是什么？

> ID：13123180
> 
> 赞同：3
> 
> 时间：2012-10-29T14:05:19.103
> 
> 标签：java

我不明白Java中的重载。与多态性有关系吗？这对我来说似乎很抽象。我更多来自 Javascript 语言？这适用于 Javascript 吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T14:06:14.607

重载意味着可以使用多个*签名*定义相同的方法名称——形式参数列表（及其类型）。

重载在不同的语言中意味着不同的东西。Java 是强类型的（实际上有些人可能会说“强类型”）。这只是意味着一个函数可以有不同的版本，编译器可以通过查看函数（方法）调用中的参数类型来判断哪个版本是预期的。

JavaScript 不是那样的。函数的形式参数只是函数体中的名称引用，但除此之外它们没有什么特别之处，任何函数都可以用任何参数和任意数量的参数调用。

一些语言使用“重载”作为运行时概念。在 Erlang 中，从函数的多个替代版本中进行选择时，参数的*类型并不重要。*这是*价值观*。

*编辑*——@MarkoTopolnik 指出问题不在于类型系统的“强度”（或“凶猛”:-)，而在于它的静态程度。Java 坚持几乎在任何地方都明确声明类型，而 JavaScript（一些新的类型化数组结构除外）则不然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:13:51.757

具有多个定义的同名方法称为重载

可能与参数类型和参数数量不同。

**例子**

```
import java.io.*;
class demoOverloading
{
    int add(int x,int y) //method definition
    {
        return (x+y);
    }
    double add(double x,double y) //method definition
    {
        return (x+y);
    }
}
public class JavaApplication4 
{
    public static void main(String[] args) 
    {
       demoOverloading demo=new demoOverloading(); //creating object for above class
       System.out.println("Sum of Integer "+demo.add(10,20)); //calling integer add method
       System.out.println("Sum of double "+demo.add(33.44,67.5)); //calling double add method
    }
} 
```

上面的例子有两个同名的方法**add**但一个包含 int 另一个包含双参数，像这样我们可以用不同的参数，，

也可能在参数数量上有所不同..

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T14:26:49.693

重载是允许在一个类中有两个具有相同名称和不同签名的方法的功能，例如

```
public void foo();
public void foo(int i); 
```

现在您可以调用`foo()`不带参数或带一个 int 参数的方法，并且将执行不同的方法。

您可能对重载和覆盖感到困惑。压倒一切确实与多态性有关。这是将基类的功能覆盖（更改）为子类的能力。例如，如果`Child extends Base`和两者都有方法`foo()`，则`foo()`子项会覆盖 Base 的实现。JavaScript 中确实存在类似的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T14:31:42.093

如果您在课堂上有以下方法

> `public void calculate() {}`

以下是它的一些重载版本。（注意同名）

> `public void calculate(int i) {}`
> `public void calculate(int i, int j) {}`

但以下不是上述方法的重载之一。此方法与原始方法的不同之处仅在于返回类型。java中不允许具有相同签名但具有不同返回类型的方法。

> `public int calculate(int i) {}`

# javascript - 在 iPad 上自动向右滚动网站（隐藏左侧菜单）

> ID：13123181
> 
> 赞同：0
> 
> 时间：2012-10-29T14:05:23.017
> 
> 标签：javascript, jquery, css

我们的网站左侧有一个 200 像素的菜单，非常有用，但在 iPad 等较小的设备上占用了太多空间。所以在 iPad 上自动将网站水平向右滚动 200px 会很好。

我尝试了使用`@media (max-width: ????px) { .. }`CSS 和隐藏/显示菜单并让它使用按钮显示的类似解决方案，但这并不那么优雅。也许jQuery中有一个更简单的解决方案？

更清楚地说：我**希望**菜单始终可以访问，所以如果我想使用它，我可以简单地向左滚动，但在任何其他情况下它都不会填满我的屏幕。

非常感谢您的帮助，乔希

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:09:23.593

这个故事的寓意是你不能使用 CSS 将网页移动 200 像素。您可以使用 javascript 媒体查询解决方案并执行此操作。但这将毫无意义，因为实际上您只是想隐藏菜单，并且会有一段时间显示菜单，然后页面会发生变化，这将是可怕的。

所以使用 CSS 媒体查询并隐藏菜单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T14:10:52.333

如果设备宽度在 768 和 1024px 之间（iPad 尺寸，根据我的[来源](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)） ，以下将隐藏 #menu div

```
@media only screen 
  and (min-device-width : 768px) 
  and (max-device-width : 1024px) {

  #menu {
    display: none;
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:10:12.307

我发现下面的 jQuery 代码似乎可以工作：

```
 $(document).ready(function() {
     window.scrollTo(228,0);
  }); 
```

# javascript - 在 NPObject 上调用方法未捕获的错误

> ID：13123186
> 
> 赞同：3
> 
> 时间：2012-10-29T14:05:41.403
> 
> 标签：javascript, google-chrome, methods, applet, call

问题是 - 为什么这个特定的小程序无法在以下环境下运行：Google Chrome 22.0.1229.94（官方版本 161065）、OS Linux、WebKit 537.4、JavaScript V8 3.12.19.15、Flash 11.4.31.110、Java SE 6 Update 37、Linux 3.2 .0-32 通用，64 位。

![在此处输入图像描述](../Images/92f4c563e76241fda5d4180d85ead272.png)

不得不说，这个小程序在linux和windows下的32位环境下运行良好。

我还有另一个小程序，它在有问题的 64 位环境中运行良好，这使我得出结论，即尝试从 javascript 函数调用小程序方法导致的失败。

我也尝试过不同的标签 - 对象，但没有任何改变。小程序源代码也很好（它在不同的环境中运行良好）。

我该如何解决？

# php - 在 Wordpress 中执行一个不存在的钩子？

> ID：13123188
> 
> 赞同：0
> 
> 时间：2012-10-29T14:05:47.263
> 
> 标签：php, wordpress

在我的情况下，插件是否有任何理由拥有`do_action();`一个不存在的钩子/动作？

来自 WooCommerce 的示例 writepanel-product-data.php：

```
do_action('woocommerce_product_options_sku'); 
```

如果我搜索后`woocommerce_product_options_sku`找不到它。所以它只是调用一个不存在的钩子，但为什么呢？

*我已经多次看到这一点。但不知道为什么要这样做。也许有人可以启发我？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:20:48.493

这样您就可以与 woocommerce 插件进行交互，而无需修改插件的源代码。

也就是说，woocommerce 插件程序员已经考虑到开发人员可能需要一些额外的选项，因此您可以编写一个使用 add_action('woocommerce_product_options_sku', 'your_function'); 的插件；这将在 do_action ('woocommerce_product_options_sku') 被插入的地方被调用。

如果您需要更多信息：

*   [http://wp.smashingmagazine.com/2011/10/07/definitive-guide-wordpress-hooks/](http://wp.smashingmagazine.com/2011/10/07/definitive-guide-wordpress-hooks/)
*   [http://wcdocs.woothemes.com/codex/extending/introduction-to-hooks-actions-and-filters/](http://wcdocs.woothemes.com/codex/extending/introduction-to-hooks-actions-and-filters/)

# ruby-on-rails - Rails：每个随机顺序

> ID：13123197
> 
> 赞同：11
> 
> 时间：2012-10-29T14:06:20.683
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这是我的代码：

```
 <% question.answers.each do |answer| %>

      <li><%= answer.content %></li>

    <% end %> 
```

我想随机订购答案对象。考虑到可能答案的数量少于 10 个，最有效的方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-29T14:07:21.870

您可以使用这样的[`shuffle`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-shuffle)方法：

```
question.answers.shuffle.each do |answer| 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T14:08:10.363

这个怎么样

```
<% question.answers.shuffle.each do |answer| %>

      <li><%= answer.content %></li>

    <% end %> 
```

# css - 浮动 DIV 会导致下面的相对 DIV 定位错误

> ID：13123200
> 
> 赞同：0
> 
> 时间：2012-10-29T14:06:27.923
> 
> 标签：css

我以这个 JS fiddle 为例： [JS FIDDLE 示例](http://jsfiddle.net/G7kdB/7/)

```
.column {
width: 100px;
height: 100%;
float: left; 
```

}

当列 div 的高度为 100% 时，您可以看到黄色页脚没有出现在浮动列 div 的下方，而是出现在相同的位置。如果有人可以帮助我，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:10:10.457

您需要在页脚 div 中添加一个 clear：

```
clear: both; 
```

[http://jsfiddle.net/G7kdB/8/](http://jsfiddle.net/G7kdB/8/)

# doxygen - 如何在 doxygen 中禁用“警告：发现未知命令”

> ID：13123202
> 
> 赞同：5
> 
> 时间：2012-10-29T14:06:38.563
> 
> 标签：doxygen

我想避免让这个烦人：

```
Generating docs for compound bla_param...
/home/mathieu/Projects/bla_parser.h:57: warning: Found unknown command `\0'
/home/mathieu/Projects/bla_parser.h:57: warning: Found unknown command `\0' 
```

我能想到的唯一选择是双重转义，并且具有：

```
/** Query parameters */
typedef struct bla_param{
  char *cclose;                               /**< list of params, separated by '\\0' */ 
```

但这使我的代码难以阅读，并且在记录 API 时给开发人员增加了额外的工作......

我没有想到的任何其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:26:44.650

更新到最新版本的 Doxygen 可能会解决此问题。我能够使用 Doxygen 1.6.2 重现此警告，但在以后的版本中没有出现（我测试了 1.7.6.1、1.8.0 和 1.8.2）。

# android - 在 Android 上动态创建的 UI 元素的方法

> ID：13123203
> 
> 赞同：1
> 
> 时间：2012-10-29T14:06:48.983
> 
> 标签：android, user-interface, dynamic

我有一个疑问......在我的Android应用程序中，我有一个活动，它的GUI是从我的SQLite数据库中的某些数据动态创建的......我没有遇到任何问题并且工作正常......

在这个活动中，有一堆 TextView's 和 RadioGroup's 和 RadioButton's 是在 for 循环内创建的，并且 RadioButton 的数量会因此循环内的条件而有所不同......就像这样：

```
for(int i=0;i<numFilasFormulario;i++){

            TextView pregunta = new TextView(this);
            pregunta.setText(c.getString(c.getColumnIndex("texto")));
            pregunta.setGravity(Gravity.LEFT);
            pregunta.setTextColor(Color.rgb(0, 0, 0));
            pregunta.setTextSize(15);
            pregunta.setLayoutParams(params);
            ll.addView(pregunta);

            if(c.getString(c.getColumnIndex("tipopregunta")).equals("Si o No")){

                RadioGroup rg = new RadioGroup(this);
                ll.addView(rg);

                RadioButton b1 = new RadioButton(this);
                b1.setText("SI");
                rg.addView(b1);

                RadioButton b2 = new RadioButton(this);
                b2.setText("NO");
                rg.addView(b2);

            }else{

                if(c.getString(c.getColumnIndex("tipopregunta")).equals("Seleccion Simple")){

                    RadioGroup rg = new RadioGroup(this);
                    ll.addView(rg);

                    RadioButton b1 = new RadioButton(this);
                    b1.setText("SI");
                    rg.addView(b1);

                    RadioButton b2 = new RadioButton(this);
                    b2.setText("NO");
                    rg.addView(b2);

                    RadioButton b3 = new RadioButton(this);
                    b3.setText("N/A");
                    rg.addView(b3);

                }
            }
            c.moveToNext();
        } 
```

所以我的问题是如何获取用户选择的 RadioButton 的值......我的意思是，我是否必须为每个 RadioButton 调用 setOnClickListener() 方法？或者我必须为每个 RadioGroup 做这件事？我在哪里声明这些语句：在 for 循环内部还是外部？还是有其他方法？

我非常非常迷失在这里！任何形式的帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:34:45.263

只有一种方法可以使用[OnCheckedChangeListener](http://developer.android.com/reference/android/widget/RadioGroup.OnCheckedChangeListener.html) 您可以创建每个侦听器并将其分配给循环中的 RadioGroup，但我不建议这样做。您可以在资源中创建多个 ID，并在循环之前只创建一个侦听器，并在循环中将其分配给您的 RadioGroup（您的 Radiogroup 需要设置在资源中创建的 ID）。这是示例：

```
 OnCheckedChangeListener listener = new OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) {
            switch (group.getId()) {
            case R.id.myradio_group1:
                // DO your work here
                break;

            default:
                break;
            }
        }
    };

    // your loop is here
    for(int i=0;i<numFilasFormulario;i++){
        ....
        RadioGroup rg = new RadioGroup(this);
        rg.setId(R.id.myradio_group1); // or simply just using rg.setId(i+1000);
        // make sure 1000, 1001, 1002, ... is already create at Resource
        ....
    } 
```

# jquery - 如何从父元素id，jquery更改下一个元素背景颜色

> ID：13123204
> 
> 赞同：0
> 
> 时间：2012-10-29T14:06:53.040
> 
> 标签：jquery

背景颜色？，如果我们知道 `<li id="li508e1d87e91d040750687eef">`id 值

```
 <li id="li508e1d87e91d040750687eef" style="background-color: rgb(0, 118, 163);">
        <span >
        Skill044
        <a onclick="OnBtnShowPopupClick(this.id);" id="508e1d87e91d040750687eef">Edit</a>
        <span class="Experience" id="Exp508e1d87e91d040750687eef">4</span>
        </span>
    </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:08:40.163

您可以通过[`:first`](http://api.jquery.com/first-selector/)以下方式使用选择器：

```
var span = $("#li" + idNo + " span:first");
span.css("background-color", "#790000"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:09:16.717

如果您知道`id`parent`li`的，那将是：

```
$("#li" + idNo + " .Skill").css("background-color", "#790000"); 
```

# ios - 应用内购买 - 自动更新订阅演示？

> ID：13123207
> 
> 赞同：3
> 
> 时间：2012-10-29T14:07:07.067
> 
> 标签：ios, in-app-purchase

是否有可用的示例代码/示例项目如何构建自动更新订阅应用内购买？

谢谢！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-20T07:45:59.040

[这是来自 Raywenderlich 的应用内购买的好教程。](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)您可以在创建应用内购买 ID 时更改订阅类型。 [http://www.raywenderlich.com/2797/introduction-to-in-app-purchases](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

另一个演示是[EBPurchase for iOS](http://www.cocoacontrols.com/controls/ebpurchase)。点击以下链接： http: [//www.cocoacontrols.com/controls/ebpurchase](http://www.cocoacontrols.com/controls/ebpurchase)

# java - 使用 AJAX 在 JSP 中下载文件

> ID：13123211
> 
> 赞同：1
> 
> 时间：2012-10-29T14:07:13.767
> 
> 标签：java, jsp, servlets

我有一个简单的 JSP 页面，其中包含 2 个按钮：查看和导出。单击查看按钮时，我将从数据库中获取数据，将副本保存到会话中，并将 HTML 代码写入带有数据的标签中。稍后当用户单击导出时，我想在服务器中生成一个 excel 文件（使用会话中的数据）并将其下载到客户端。

Excel 文件在服务器端成功创建。我正在使用来自客户端的 AJAX 请求从服务器下载 Excel 文件。

JSP代码：

```
 try{                           

                    String filepath=ExportToExcel(session.getAttribute("InvestmentDetails"));

                    //Setting file to download
                    response.setContentType( "application/x-download");

                    response.setHeader("Content-Disposition","attachment; filename=\"SIPInvestment_531.xls\"");                                                                             
                    response.setStatus(200);
                    InputStream in = null;
                    ServletOutputStream outs = response.getOutputStream();                        

                    try {                            
                        File filetodownload=new File(filepath);
                        response.setContentLength(Integer.parseInt(String.valueOf(filetodownload.length())));                                
                        in = new BufferedInputStream(new FileInputStream(filetodownload));                            
                        int ch;
                        while ((ch = in.read()) != -1) {
                            outs.print((char) ch);
                        }
                    }
                    finally {
                        if (in != null) in.close(); 
                    }
                    outs.flush();
                    outs.close();                                                

                }
                catch(Exception ex){
                    str=ex.getMessage();                                          
                } 
```

这是Javascript：

```
 xmlhttp=new XMLHttpRequest();
            xmlhttp.onreadystatechange=function(){
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                    {

                    }
            }
            xmlhttp.open("POST","/SIP/rptClientInvestmentDetails.jsp?requesttype=export",false);
            xmlhttp.send(); 
```

请求到达 JSP 页面。并且无一例外地写入响应输出流。但是浏览器没有弹出下载。可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:13:38.310

Ajax 应该用于元语言，而不是二进制文件。

一个简单的

```
 <a href="/SIP/rptClientInvestmentDetails.jsp?requesttype=export"
    target="_blank">Export</a> 
```

是你所需要的全部。

如果您确定您说过，`response.setHeader("Content-Disposition","attachment`您应该按照 BalusC 的建议删除目标属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T17:45:49.730

我认为您可以使用 location.href="Provide the java class function name"。这会将控制从 jsp 转移到 java 函数，而无需使用 ajax 调用

# android - 布局顶部的 Android 键盘

> ID：13123214
> 
> 赞同：1
> 
> 时间：2012-10-29T14:07:18.277
> 
> 标签：android, layout

我希望软键盘在我的布局之上，而不是在弹出时移动我的布局。我该怎么做呢？我查看了清单，但从未设置 android:windowSoftInputMode="adjustResize"

此外，我还有其他几项几乎相同但工作正常的活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:12:24.763

它的默认行为。您需要明确包含`android:windowSoftInputMode="adjustPan"`以使其不调整窗口大小，[请参阅文档](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-27T21:30:04.523

我刚刚修复了布局中只有一个 RecyclerView 的情况。默认行为是adjustResize

```
android:windowSoftInputMode="adjustNothing" 
```

成功了

# jbpm - 在 jBpm 5.3 中调用 ksession.dispose 后无法完成任务

> ID：13123215
> 
> 赞同：1
> 
> 时间：2012-10-29T14:07:20.637
> 
> 标签：jbpm

> 你好，
> 
> 在处理创建任务拥有进程的知识会话后，我无法完成任务。我使用的是 jBPM 5.3 版本。请在堆栈跟踪下方找到。
> 
> java.lang.IllegalStateException：非法方法调用。此会话先前已处理。
> 
> ```
>  org.drools.reteoo.DisposedReteooWorkingMemory.
>                                      getWorkItemManager(DisposedReteooWorkingMemory.java:386)
> 
>       org.drools.impl.StatefulKnowledgeSessionImpl.
>                                      getWorkItemManager(StatefulKnowledgeSessionImpl.java:311)
> 
>      org.drools.command.runtime.process.CompleteWorkItemCommand.
>                                      execute(CompleteWorkItemCommand.java:69) 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:42:16.083

那是因为在你 dispose() 一个 ksession 之后你就不能再使用它了。如果您仍有待处理的任务，您有 2 个选项：

1.  在所有任务完成之前（或其中不再运行流程实例），请勿释放会话。
2.  如果您已释放会话，并且正在使用持久会话，则可以在完成任务之前使用 JPAKnowledgeService 类从数据库中重新加载它。

当任务在 jBPM5 中完成时，创建任务的会话必须处于活动状态（必须在内存中）并且可用（未释放）。

此致，

# focus - 移动 Safari 自动关注文本输入

> ID：13123216
> 
> 赞同：0
> 
> 时间：2012-10-29T14:07:20.430
> 
> 标签：focus, mobile-safari, safari

我想在页面加载时立即关注文本输入字段。但是，适用于桌面浏览器的以下代码不适用于移动 Safari（在 iOS 6 上）：

```
 <input type="text" name="q" class="search" id="focusme" />

  ...

  <script type="text/javascript">
    window.onload=function(){var a=document.getElementById("focusme");a.focus();}
  </script> 
```

我已经尝试为此实施几个建议的修复程序。但是我无法让它工作。当它处于焦点时，它确实会显示对字段的 CSS 更改，但是不会弹出键盘。

我怀疑这可能是由于我目前对 JavaScript 的理解非常有限，但我认为它可能仍然是 Safari 中的一个错误。

*问题：*

**在 iOS 6 上的 Safari 中，您知道在页面加载时自动关注文本输入字段的任何方法吗？**

谢谢您的帮助 ：-）

更新：

如果需要，该页面确实有 jquery 和 mobile-jquery 可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:36:37.657

为什么使用 JavaScript？`<input type="text" autofocus />`应该这样做！

# active-directory - 获取组及其子组的所有成员

> ID：13123218
> 
> 赞同：3
> 
> 时间：2012-10-29T14:07:23.660
> 
> 标签：active-directory, ldap, pentaho, kettle

我有这样的组：

*   A组
    *   B组
        *   用户
    *   G组
        *   用户

因此，目标是获取属于父组 GroupA 的所有用户。

我有以下过滤器：

```
(&(objectCategory=Person)(objectClass=User)(mail=*MyEmailDomain.com)(memberOf=CN=GroupB,OU=MyOU3,OU=MyOU2,OU=MyOU1,DC=MyDomain,DC=LOCAL)) 
```

这适用于最低级别的群体。

从研究来看，这似乎应该有效，但不会：

```
(&(objectCategory=Person)(objectClass=User)(mail=*MyEmailDomain.com)(memberof:1.2.840.113556.1.4.1941:=(CN=GroupA,OU=MyOU3,OU=MyOU2,OU=MyOU1,DC=MyDomain,DC=LOCAL))) 
```

如果重要的话，我会使用 Active Directory Explorer 来获取专有名称，并使用 Pentaho 的数据集成工具 (Kettle/PDI) 中的 LDAP 输入步骤来检索数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T14:22:43.033

我喜欢这样一个事实，即一旦我将问题发布到某个地方，我总能找到答案。我需要学会早点发帖，也许我会花更少的时间搜索:)

发现了一个随机的 stackoverflow 帖子，表明 msdn 文章中有一个错误，并且括号太多。

这不起作用：

```
(&(objectCategory=Person)(objectClass=User)(mail=*MyEmailDomain.com)(memberof:1.2.840.113556.1.4.1941:=(CN=GroupA,OU=MyOU3,OU=MyOU2,OU=MyOU1,DC=MyDomain,DC=LOCAL))) 
```

但这确实有效：

```
(&(objectCategory=Person)(objectClass=User)(mail=*MyEmailDomain.com)(memberof:1.2.840.113556.1.4.1941:=CN=GroupA,OU=MyOU3,OU=MyOU2,OU=MyOU1,DC=MyDomain,DC=LOCAL)) 
```

（专有名称周围没有括号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T10:54:29.847

嗨，这不会递归地获取用户。这只是给出父组的用户列表而已。

```
(&(objectCategory=Person)(objectClass=User)(mail=*MyEmailDomain.com)(memberof:1.2.840.113556.1.4.1941:=CN=GroupA,OU=MyOU3,OU=MyOU2,OU=MyOU1,DC=MyDomain,DC=LOCAL)) 
```

# php - 日历PHP脚本修改

> ID：13123219
> 
> 赞同：2
> 
> 时间：2012-10-29T14:07:28.140
> 
> 标签：php, mysql, calendar, pdo

我正在开发这个有**日历系统**的项目。为了更高效地开发，我[从这个站点](http://www.newmediacampaigns.com/page/create-a-jquery-calendar-with-ajax-php-and-a-remote-data-source)获得了日历代码。

原始代码很好：我做了一些修改，但我陷入了我的项目所需的修改之一。由于日历与**数据库对话框**一起使用，我希望它在其特定日期内显示数据库表的某些列。例如，如果我在 2012/10/28 记录了一个足球赛事（类似于我提到的网站的原始数据库代码），我希望它的标题显示在它的相对日期中。我真的很努力，但我没有找到解决方案。请帮忙！

我用来显示日历的代码是这样的：

```
$db = new PDO('mysql:host=localhost;dbname=calendar','root','');

$stmt = $db->prepare('SELECT time FROM events');
$stmt->execute();

$rawTimeStamps = $stmt->fetchAll(PDO::FETCH_ASSOC);
$cleanDateArray = array();

foreach ($rawTimeStamps as $t) {
$rawDate = $t['time'];
$rawDate = getdate($rawDate);
$cleanDate = mktime(0,0,0,$rawDate['mon'],$rawDate['mday'],$rawDate['year']);
$cleanDataArray[] = $cleanDate;
}
    /* draw table */
$calendar = '<table cellpadding="0" cellspacing="0" class="calendar">';

/* table headings */
$headings = array('Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday');
$calendar.= '<tr class="calendar-row"><td class="calendar-day-head">'.implode('</td><td class="calendar-day-head">',$headings).'</td></tr>';

/* days and weeks vars now ... */
$running_day = date('w',mktime(0,0,0,$month,1,$year));
$days_in_month = date('t',mktime(0,0,0,$month,1,$year));
$days_in_this_week = 1;
$day_counter = 0;
$dates_array = array();

/* row for week one */
$calendar.= '<tr class="calendar-row">';

/* print "blank" days until the first of the current week */
for($x = 0; $x < $running_day; $x++):
    $calendar.= '<td class="calendar-day-np"> </td>';
    $days_in_this_week++;
endfor;

/* keep going with days.... */
for($list_day = 1; $list_day <= $days_in_month; $list_day++):

    $calendar.= '<td class="calendar-day">';

        /*
         * Assign a unique id to the day number. This unique id will be
         * used by jQuery to locate events from the database that are
         * on this day. The unique id is the timestamp for the first minute
         * of $list_day of $month of $year.
         *
         * @author Josh Lockhart, http://www.newmediacampaigns.com, lines 40-41
         */

        $timestamp = mktime(0,0,0,$month,$list_day,$year);

        if (in_array($timestamp, $cleanDataArray)) {
        $calendar.= '<div class="day-number day-number-event"><a id="'.$timestamp.'" href="#">'.$list_day.'</a></div>';
        } else {
        $calendar.= '<div class="day-number day-number-noevent">'.$list_day.'</div></div><div id="calendar-events"></div>';
        }

    $calendar.= '</td>';
    if($running_day == 6):
        $calendar.= '</tr>';
        if(($day_counter+1) != $days_in_month):
            $calendar.= '<tr class="calendar-row">';
        endif;
        $running_day = -1;
        $days_in_this_week = 0;
    endif;
    $days_in_this_week++; $running_day++; $day_counter++;
endfor;

/* finish the rest of the days in the week */
if($days_in_this_week < 8):
    for($x = 1; $x <= (8 - $days_in_this_week); $x++):
        $calendar.= '<td class="calendar-day-np"> </td>';
    endfor;
endif;

/* final row */
$calendar.= '</tr>';

/* end the table */
$calendar.= '</table>';

/* all done, return result */
return $calendar;
    } 
```

我一直在尝试我的知识允许的每一种方式，但是我在 PHP 和 MySQL 方面有点受限。

# sql-server-2008 - SQL Server 存储过程参数数据类型错误

> ID：13123224
> 
> 赞同：0
> 
> 时间：2012-10-29T14:07:34.943
> 
> 标签：sql-server-2008, stored-procedures

SQL Server 2008 中的以下存储过程引发错误

```
/****** Object:  StoredProcedure [dbo].[UpdateCPA]    ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[pdateCPA_INT]
    @CPAColumn_Name nvarchar(100), @value Int, @RecordNum nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;
    --declare @CPAColumn_Name nvarchar(100) = 'UsrsID'
    --declare @value Int = 3575
    --declare @RecordNum int = 1

    declare @thedate smalldatetime
    set @thedate = GETDATE()
    --select @thedate as NOW

    declare @cmd nvarchar(max)

    set @cmd = 'Update tblTimeCPAReport 
    set ' + @CPAColumn_Name + ' = '+@value+' 
    set ReportLastUpdate = ' + @thedate + '
    where RecordNum='+@RecordNum

    exec sp_executesql @cmd
    select @cmd
END 
```

它抛出这个错误

> *将 nvarchar 值 'Update tblTimeCPAReport set UsrsID = ' 转换为数据类型 int 时转换失败。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:12:13.643

每当服务器看到 a`+`时，它都会检查双方的类型，如果它们不同，则必须执行转换。

因为`' = '+@value+'`，在左边，我们在右边有一个字符串 ( `nvarchar(max)`) `int`。它决定将字符串转换为`int`.

为防止这种情况，请自行将其转换`int`为字符串：`' = '+CONVERT(nvarchar(10),@value)+'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:13:05.780

您需要参数-- `cast()`：`int``cast(@value as nvarchar(100))`

```
/****** Object:  StoredProcedure [dbo].[UpdateCPA]    ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[pdateCPA_INT]
    @CPAColumn_Name nvarchar(100), @value Int, @RecordNum nvarchar(100)
AS
BEGIN
    SET NOCOUNT ON;
    --declare @CPAColumn_Name nvarchar(100) = 'UsrsID'
    --declare @value Int = 3575
    --declare @RecordNum int = 1

    declare @thedate smalldatetime
    set @thedate = GETDATE()
    --select @thedate as NOW

    declare @cmd nvarchar(max)

    set @cmd = 'Update tblTimeCPAReport 
    set ' + @CPAColumn_Name + ' = '''+cast(@value as nvarchar(100))+''' 
       ,  ReportLastUpdate = ''' + convert(nvarchar(25), @thedate, 120) + '''
    where RecordNum='''+@RecordNum+''''

    exec sp_executesql @cmd
    select @cmd
END 
```

由于您`@cmd`是数据类型，因此使用的`nvarchar(max)`所有参数都需要相似，包括：

```
@value  -- use cast(@value as nvarchar(100))
@thedate --- use convert(nvarchar(25), @thedate, 120) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T14:21:01.287

1）您应该将 @value 转换为 varchar

2）第二个“set”会导致错误，propt 语法是`SET <col> = <values> [, <col> = Value>, …]`

3) 将 @thedate 转换为 varchar，并将其括在引号中

4) 如果@Recordnum 是字符串，也要加上引号，否则很好

使用以上所有内容，以下内容：

```
set @cmd = 'Update tblTimeCPAReport 
set ' + @CPAColumn_Name + ' = ''' + cast(@value as varchar(10)) + '''
set ReportLastUpdate = ''' + convert(varchar(50), @thedate, 109) + '''
where RecordNum = ''' + @RecordNum + '''' 
```

应该产生一个字符串，如：

```
Update tblTimeCPAReport 
 set <CPAColumn_Name> = <@value>
  ,ReportLastUpdate = '<@thedate>'
 where RecordNum = '<@RecordNum>' 
```

（如果 @RecordNum 包含数值，则将引号括起来）

# animation - 图像的jQuery动画

> ID：13123227
> 
> 赞同：0
> 
> 时间：2012-10-29T14:07:39.920
> 
> 标签：animation

好的，我正在做一个简单的 JQuery 动画。当用户点击图片时，图片会向左移动 1000px。下面是代码：

```
function cloud2 () {    
$('#cloud2').animate({left:'1000px'},40000);
        setTimeout(cloud2,2000);
}

$(document).ready(function() {
  $('#cloud2').click(function() {
   cloud2();
});
}); 
```

非常好，没有任何问题，一切都像 BOSS 一样工作！当图像达到 1000px 时，它会停止。都好！我现在想要的是在完成 1000px 动画后停止时将图像替换为另一个图像。怎么做？例如，一旦它停止，图像就会更改为另一个图像，例如 image2.jpg。

感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:13:14.657

animate() 有一个结束动画的事件。例如，您有类似的东西：

`<img src="image1.jpg" id="myimg">`

```
function moveimg() {
    $('#myimg').animate({left: '1000px'}, 40000, function() {
        $('#myimg').attr('src', 'image2.jpg');
    });
}

setTimeout("moveimg()", "2000") 
```

# c# - 在 expanderView 上获取所选项目

> ID：13123229
> 
> 赞同：1
> 
> 时间：2012-10-29T14:07:42.977
> 
> 标签：c#, xaml, windows-phone-7.1, onclicklistener, expander

我正在使用 ExpanderView 在我的应用程序中显示一些数据。但是我在尝试找出在选择 ExpanderViewItem 后如何获取它的数据时遇到了一些困难。

在 ListBox 上，您可以在 xaml 代码中调用 SelectionChanged="yourFunction" 。但是对于 expanderview，我不知道该怎么做？

这是我的扩展器 XAML 代码：

```
 <!--Custom header template-->
    <DataTemplate x:Key="CustomHeaderTemplate">
        <TextBlock Text="" FontSize="28" />            
    </DataTemplate>

    <!--Custom expander template-->
    <DataTemplate x:Key="CustomExpanderTemplate">

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Rectangle Width="400" Height="60" Fill="#FFF1F1F1" HorizontalAlignment="Stretch" StrokeThickness="0" Grid.Row="0" Grid.Column="0" />
            <TextBlock Text="{Binding procedureName}" FontSize="30" Foreground="#FF00457C" FontWeight="Normal" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" Margin="10,0,0,0" />

        </Grid>

    </DataTemplate>

    <!--Custom expander items template-->
    <DataTemplate x:Key="ExpanderViewItems" >

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="15" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto" />
                <ColumnDefinition Width="auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Image Source="{Binding flagIcon}" Grid.Row="0" Grid.RowSpan="3" Grid.Column="0" />
            <TextBlock FontSize="26" Text="{Binding N}" Foreground="Black" FontWeight="Normal" Grid.Row="0" Grid.Column="1"/>
            <TextBlock FontSize="20" Text="{Binding RNG}" Foreground="Black" FontWeight="Normal" HorizontalAlignment="Right" Grid.Row="0" Grid.Column="2"/>                
            <TextBlock FontSize="26" Text="{Binding ValueAndUnit}" Foreground="Black" FontWeight="Medium" HorizontalAlignment="Right" Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2"/>
            <TextBlock FontSize="18" Text="{Binding COM}" Foreground="Black" FontWeight="Normal" Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="2" TextWrapping="Wrap" />
            <Line StrokeThickness="1" Stroke="#C4C6CC" Stretch="Fill" X1="0" X2="1" Y1="0" Y2="0" VerticalAlignment="Center" Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3" />
        </Grid>
    </DataTemplate>

<!--Listbox Containing ExpanderViews-->
            <ListBox Name="testsList" Grid.Row="3" Grid.Column="0" >
                <ListBox.ItemTemplate>
                    <DataTemplate>

                        <!--ExpanderView-->
                        <toolkit:ExpanderView Header="{Binding}"                                                   
                                              HeaderTemplate="{StaticResource CustomHeaderTemplate}"
                                              Expander="{Binding}"
                                              ExpanderTemplate="{StaticResource CustomExpanderTemplate}"
                                              x:Name="expander" 
                                              FontSize="36" 
                                              Foreground="#FF00457C" 
                                              ItemsSource="{Binding testItems}"
                                              ItemTemplate="{StaticResource ExpanderViewItems}" >                          
                        </toolkit:ExpanderView>

                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

我真的很感激在正确方向上的任何帮助！这似乎是一个在网络上不容易回答的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T23:01:09.373

@Frederik 我已经使用 ListBox 的 SelectionChanged 事件实现了您在上面的代码中所做的事情 - 它对我来说仍然很好。我一直在用头撞墙一段时间，但最终设法解决了它。首先，对于 ItemTemplate，我确保将模板放置在 ListBoxItem 元素中，如下所示：

```
<DataTemplate x:Key="ExpanderViewItems" >
<ListBoxItem DataContext="{Binding}" Tap="ListBoxItem_Tap_1">
<Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="15" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto" />
            <ColumnDefinition Width="auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Image Source="{Binding flagIcon}" Grid.Row="0" Grid.RowSpan="3" Grid.Column="0" />
        <TextBlock FontSize="26" Text="{Binding N}" Foreground="Black" FontWeight="Normal" Grid.Row="0" Grid.Column="1"/>
        <TextBlock FontSize="20" Text="{Binding RNG}" Foreground="Black" FontWeight="Normal" HorizontalAlignment="Right" Grid.Row="0" Grid.Column="2"/>                
        <TextBlock FontSize="26" Text="{Binding ValueAndUnit}" Foreground="Black" FontWeight="Medium" HorizontalAlignment="Right" Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2"/>
        <TextBlock FontSize="18" Text="{Binding COM}" Foreground="Black" FontWeight="Normal" Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="2" TextWrapping="Wrap" />
        <Line StrokeThickness="1" Stroke="#C4C6CC" Stretch="Fill" X1="0" X2="1" Y1="0" Y2="0" VerticalAlignment="Center" Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3" />
    </Grid>
</ListBoxItem>
</DataTemplate> 
```

一旦到位，进入后面的代码并在为 ListBoxItem 声明的 Tap 事件中使用如下内容：

```
ListBoxItem item = sender as ListBoxItem;
ExpanderItemModel model = item.DataContext as ExpanderItemModel; 
```

当然，ExpanderItemModel 将是您用于扩展器项目的任何东西......

这对我来说很好

希望这可以帮助！

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T21:53:54.653

您可以在列表框上使用“点击”事件：

在您的 XAML 文件中添加一个点击事件监听器：

```
<!--Listbox Containing ExpanderViews-->
        <ListBox Name="testsList" Grid.Row="3" Grid.Column="0" Tap="testsList_Tap" >
            <ListBox.ItemTemplate>
                <DataTemplate>

                    <!--ExpanderView-->
                    <toolkit:ExpanderView Header="{Binding}"
                    ... 
```

在您的代码隐藏文件中，实现点击处理程序：

```
 private void testsList_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        someModel selectedItem = (someModel)this.testsList.SelectedItem;
        // Do something with your seleted data
        ...
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:32:30.307

您可以通过列表框 selectionchanged 或 expanderview 扩展事件获取选定的值。对于列表框：

```
 private void lstExams_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (e.AddedItems.Count > 0)
        {
            Model.ExamTitles data = (sender as ListBox).SelectedItem as Model.ExamTitles;
           }
     } 
```

这里的 ExamTitles 是一个包含集合的类

对于 expanderview 展开

```
 private void ExpanderView_Expanded(object sender, RoutedEventArgs e)
    {
        ExpanderView expview = (sender as ExpanderView);
        Model.ExamTitles data = expview.Header as Model.ExamTitles;
    } 
```

希望这可以帮助！

# vba - 通过 Access VBA 将公式写入 Excel

> ID：13123230
> 
> 赞同：2
> 
> 时间：2012-10-29T14:07:46.590
> 
> 标签：vba, ms-access, excel

我想在“A1”中插入一些文本“ABC”和“B1”中的以下单元格一个`if`语句。但是，我只插入了第一个条目“ABC”，然后在`FormulaR1C2 "Object doesn't support this property or method"`. 我不确定我是否使用`R1C2`正确。我假设它代表第 1 行第 2 列，有人可以帮助我。

```
Dim Excel_App  As Object
Dim strExcel As String
Set Excel_App = CreateObject("Excel.Application")
Excel_App.Visible = True
Excel_App.Workbooks.Add
With Excel_App
 .Range("A:B").EntireRow.ColumnWidth = 25
 .Range("A2").EntireRow.Font.FontStyle = "Bold"
 .ActiveCell.FormulaR1C1 = "ABC"
  strExcel = "=IF(A1 = """"," & """EMPTY""" & "," & """FILLED""" & ") "
 .ActiveCell.FormulaR1C2 = strExcel
End With 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T14:28:41.003

`FormulaR1C1`是公式的写法。

`Formula`指在A1中写一个公式，如`=B1+C1`。

要使用符号编写相同的公式`R1C1`，您将编写`=RC[1] + RC[2]`. 此外，要`=B2+C2`在 A1 中写入，请写入`=R[1]C[1] + R[1]C[2]`->，这样您就可以看到您正在偏移您希望公式从中返回值的列和行。

你想要在你的代码中做的是偏移公式的放置位置，而不是它的计算方式，所以你应该这样写：

```
.ActiveCell.Offset(,1).Formula = strExcel 
```

实际上，您应该完全摆脱`ActiveCell`它，除非您绝对需要它。

我会这样编写您的代码，以便更好、更准确地执行：

```
Dim Excel_App As Object
Dim strExcel As String
Dim wkb as Object, wks as Object

Set Excel_App = CreateObject("Excel.Application")
Excel_App.Visible = True
Set wkb = Excel_App.Workbooks.Add
Set wks = wkb.Sheets(1) 'assumes you want first sheet, can modify for sheet index or name

With wks

 .Range("A:B").EntireRow.ColumnWidth = 25 
  'I think this will actually set every row to 25, is that what you want?

 .Range("A2").EntireRow.Font.FontStyle = "Bold"

 .Range("A1").Value = "ABC" 'don't need to write Value, but just to show you the property

  strExcel = "=IF(A1 = """"," & """EMPTY""" & "," & """FILLED""" & ") "

 .Range("B1").Formula = strExcel

End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:32:31.297

`FormulaR1C1`是一个属性，它返回以`R1C1`公式样式表示的单元格的公式。

您需要`cells`使用`Workbook.WorkSheet.Range`语法进行引用。

因此，首先您需要指定您正在使用的工作簿，在您的情况下是由语句添加的工作簿`Excel_App.Workbooks.Add`。您的新工作簿会自动命名为“Book1”，并自动添加默认数量的工作表，命名为“Sheet1”到“Sheetn”，其中 n 是默认的工作表数。

因此，您要写入该行的最终代码是

```
Excel_App.Workbooks(1).Worksheets("Sheet1").Cells(1, 1) = "ABC"
Excel_App.Workbooks(1).Worksheets("Sheet1").Cells(1, 2).Formula = "=IF(A1 = """"," & """EMPTY""" & "," & """FILLED""" & ")" 
```

# c# - 如何在选择更改事件中选择组合框值

> ID：13123231
> 
> 赞同：0
> 
> 时间：2012-10-29T14:07:51.207
> 
> 标签：c#, wpf

```
I have 3 ComboBoxes in WPF form... 
```

当我选择第一个组合框框值时，它填充第二个组合框...

但是在选择第一次comboxBox 值时，它的SelectionChanged 事件不起作用......在选择第二次后它的工作......

```
 private void cmbBoard_SelectionChanged(object sender, SelectionChangedEventArgs e)
    { cmbClass.ItemsSource = dt.DefaultView;
                    cmbClass.DisplayMemberPath = "Class";
                    cmbClass.SelectedValuePath = "ClassID";
                    cmbClass.SelectedIndex = 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T16:09:41.790

这是一个更详细的示例：

我写了一个学生和班级的例子。你有一个有名字和学生集合的班级。每个学生都有一个名字。我的课程：

```
public class Class
{
  public string Name
  {
    get;
    set;
  }

  public Collection<Student> Students
  {
    get;
    set;
  }

  public Class( string name, Collection<Student> students )
  {
    this.Name = name;
    this.Students = students;
  }
}

public class Student
{
  public string Name
  {
    get;
    set;
  }

  public string FirstName
  {
    get;
    set;
  }

  public string Fullname
  {
    get
    {
      return string.Format( "{0}, {1}", this.Name, this.FirstName );
    }
  }

  public Student(string name, string firstname)
  {
    this.Name = name;
    this.FirstName = firstname;
  }
} 
```

我的 from 包含两个组合框，我希望第一个包含所有班级，第二个应该包含所选班级的所有学生。我在后面的代码中解决了这个问题（又快又脏）。我为我的所有课程编写了一个属性并模拟了一些数据。以下是重要部分：

```
public Collection<Class> Classes
{
  get;
  set;
}

public MainWindow()
{
  this.InitializeComponent( );
  this.Classes = new Collection<Class>( )
  {
    new Class("Class 1",
      new Collection<Student>()
      {new Student("Caba", "Milagros"),
        new Student("Wiltse","Julio"),
        new Student("Clinard","Saundra")}),

    new Class("Class 2",
      new Collection<Student>()
      {new Student("Cossette", "Liza"),
        new Student("Linebaugh","Althea"),
        new Student("Bickle","Kurt")}),

    new Class("Class 3",
      new Collection<Student>()
      {new Student("Selden", "Allan"),
        new Student("Kuo","Ericka"),
        new Student("Cobbley","Tia")}),
  };
  this.DataContext = this;
    } 
```

现在我创建了第一个名为 cmbClass 的组合框。

```
<ComboBox x:Name="cmbClass"
              ItemsSource="{Binding Classes}"
              DisplayMemberPath="Name"
              Margin="10"
              Grid.Row="0"/> 
```

之后，我创建了第二个组合框。但是要获取 itemsSource，我需要第一个框中的值。所以我使用元素绑定从第一个框中获取值。

```
Binding ElementName=cmbClass 
```

我对第一个框的 SelectedItem 很感兴趣，因为该项目包含所有需要的学生的集合（参见上面的课程）。所以我使用 path 属性来解决这个问题。我的第二个组合框：

```
<ComboBox ItemsSource="{Binding ElementName=cmbClass, Path=SelectedItem.Students}"
          DisplayMemberPath="Fullname"
          Margin="10"
          Grid.Row="1"/> 
```

结束！！！

希望这个更详细的解决方案可以帮助您理解我的方式。

# elasticsearch - 弹性搜索查询

> ID：13123233
> 
> 赞同：0
> 
> 时间：2012-10-29T14:07:58.133
> 
> 标签：elasticsearch

我正在尝试创建弹性搜索查询并对搜索结果应用过滤器，如下所示：

```
"query" : {
        "custom_filters_score" : {
            "query" : {"match" : {"country" : {"query" : "usa","operator" : "and"}}},
            "filters" : [
                {
                    "filter" : {"query" : {"match" : {"state" : {"query" : "statename","operator" : "and"}}} },
                    "boost" : "3"
                },
                {
                    "filter" : {"query" : {"match" : {"city" : {"query" : "cityname","operator" : "and"}}} },
                    "boost" : "3"
                }
            ],
            "score_mode" : "first"
        }
    } 
```

这里过滤器不起作用。它不会过滤特定州和城市的数据，并不会返回美国国家/地区的所有州和城市的数据。

请提供任何帮助！

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:10:15.100

我认为您误解了[自定义过滤器分数](http://www.elasticsearch.org/guide/reference/query-dsl/custom-filters-score-query.html)查询的作用。过滤器不是用来过滤数据的，而是给匹配它们的文档一个特定的分数。因此，elasticsearch 将所有这些文档返回给您是正常的。他们的分数将根据您提供的过滤器计算。

如果您只想过滤您的文档，您需要使用[普通过滤器](http://www.elasticsearch.org/guide/reference/api/search/filter.html)。elasticsearch[查询 DSL](http://www.elasticsearch.org/guide/reference/query-dsl/)也为过滤器提供了很多选项（请看页面底部）。例如，查看[bool 过滤器](http://www.elasticsearch.org/guide/reference/query-dsl/bool-filter.html)以组合多个过滤器。

# c# - WPF中的3D边框装饰器

> ID：13123239
> 
> 赞同：0
> 
> 时间：2012-10-29T14:08:10.113
> 
> 标签：c#, .net, wpf, vb.net, decorator

我需要提供一个 WPF 控件的 3D 效果，我将在另一个 WPF 控件中使用它。

```
<UserControl>
    <ScrollViewer>
        <Border BorderThickness="0">
            <Border.Effect>
                <DropShadowEffect Color="Black"
                                  ShadowDepth="3"
                                  Direction="270" />
            </Border.Effect>
            <my:MyChildWpfControl x:Name="myControl"/>
        </Border>
    </ScrollViewer>
</UserControl> 
```

有没有办法**直接**放入`myControl`，**不使用 Border 子**`ScrollViewer`节点？关于*装饰器*和装饰器的*东西*......最简单的方法是什么？

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:25:36.667

你的意思是？

```
<UserControl>
    <ScrollViewer>
        <my:MyChildWpfControl>
            <my:MyChildWpfControl.BitmapEffect>
                <DropShadowEffect Color="Black"
                                  ShadowDepth="3"
                                  Direction="270" />
            </my:MyChildWpfControl.BitmapEffect>
        </my:MyChildWpfControl>
    </ScrollViewer>
</UserControl> 
```****

# sql - 带填充的每组最大 N

> ID：13123243
> 
> 赞同：1
> 
> 时间：2012-10-29T14:08:19.163
> 
> 标签：sql, sqlite, aggregate-functions, greatest-n-per-group

周末我一直在尝试解决这个问题，到目前为止还没有运气。我有两张桌子：

`TopOffers:`

```
OfferId    RetailerId      Order
1          38              0
2          8               3
3          17              2
4          22              1 
```

和`Offers:`

```
Id     RetailerId       Name            Description          etc...
1      3                Strawberry      Red and smelly
2      38               Cookie          Crunchy
3      17               Onion           Of the nice kind
4      22               Apple           Cheap
5      8                Toothbrush      Lasts extra long! 
```

我的目标是获得每个零售商 ID 的前 10 个优惠。它们的列出顺序由`Order`TopOffer 表中的字段指定（排序顺序为升序）。最重要的是，当零售商的 TopOffer 记录少于 10 条时，应将结果填充到 10 个优惠。TopOffer 表始终包含每个零售商 10 条或更少的记录。

到目前为止，我已经成功地做到了这一点（我意识到它没有进入前 10 名，而是 TopOffer 表中的所有内容，这没关系，因为 TopOffer 表总是等于或小于任何零售商的前 10 名）：

```
SELECT b.*
FROM
(
    SELECT o.Id, to.`Order` FROM Offer AS o
    LEFT JOIN TopOffer AS to
    ON o.Id = to.OfferId
) AS a,
(
    SELECT o.*, to.`Order` FROM Offer AS o
    LEFT JOIN TopOffer AS to
    ON o.Id = to.OfferId
) AS b
WHERE a.`Order` >= b.`Order` AND a.Id = b.Id
GROUP BY b.RetailerId, b.Id
HAVING Count(1) BETWEEN 1 AND 10
ORDER BY RetailerId, `Order` ASC 
```

不幸的是，如果该零售商没有 10 条 TopOffer 记录，我似乎找不到任何方法来填充此查询的结果，这些商品在 TopOffer 表中没有条目。

我最诚挚的感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:17:17.060

如果您创建一个带有数字 1-10 的虚拟表，您可以左连接到您的结果以获得每个 10

```
 select number, results.*
   from
       (select 1 as number union select 2 union select 3 ... union select 10) numbers
            left join
       (your query here) results
            on numbers.number = results.rank 
```

# iphone - 将 UIImage 与另一个图像重叠

> ID：13123244
> 
> 赞同：0
> 
> 时间：2012-10-29T14:08:19.793
> 
> 标签：iphone, ios, ipad

> **可能重复：**
> [如何在图像上实现 alpha 渐变？](https://stackoverflow.com/questions/5908731/how-to-implement-alpha-gradient-on-a-image)

我在下面有 2 张图片

![在此处输入图像描述](../Images/d182a33ebc8bd651c52f295ce9f9c684.png) ![在此处输入图像描述](../Images/75120223d0cfe5ab4b71ff30ef236a3d.png)

有了这两张图片，我想创建以下效果。您认为掩盖这些图像以创建所需效果的任何技术。

![在此处输入图像描述](../Images/88f99ac9bc43e06fd521969cf3befdbb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:39:04.377

您可以使用渐变蒙版来创建类似这样的内容，但您不会获得在最终图像中看到的光泽和阴影：

![在此处输入图像描述](../Images/c6e7d9ddabf45d4424268ab0c0e7d2b8.png)

# php - 表达式引擎：将用户与成员组匹配

> ID：13123245
> 
> 赞同：1
> 
> 时间：2012-10-29T14:08:24.497
> 
> 标签：php, codeigniter, expressionengine

嗨，我目前正在为各种钩子编写一些函数，例如

*   [safecracker_submit_entry_end](http://expressionengine.com/user_guide/modules/safecracker/development.html#safecracker-submit-entry-end)
*   [entry_submission_ready](http://expressionengine.com/user_guide/development/extension_hooks/api/channel_entries/index.html#entry-submission-ready)

我需要弄清楚当前用户属于哪个成员组。到目前为止，为了让扩展程序启动并运行，我一直在编写带有硬编码 id 的 IF 语句，如下所示

**代码示例：**

```
if($this->EE->session->userdata('group_id') == 5){ //do something } 
```

是否有将用户与成员组匹配的标准方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:29:45.763

如果您使用的是 PHP，那确实是唯一的方法。

您还可以通过这样的数组访问它：

`$this->EE->session->userdata['group_id']`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T15:54:42.407

如果您正在制作扩展或模块，并且需要在设置页面上选择可用组的列表，那么您可以加载成员模型并使用 get_member_groups() 获取列表。

EE 安装程序将默认组安装为

```
(1) Super Admins
(2) Banned
(3) Guests (visitors)
(4) Pending (registered, but not yet validated)
(5) Members 
```

您提出的任何其他组的 ID 都将高于 5。为“成员”选择硬编码值可能是安全的。

# iphone - UITableView setContentOffset 在 vi ewDidLoad 中不起作用

> ID：13123257
> 
> 赞同：0
> 
> 时间：2012-10-29T14:09:09.880
> 
> 标签：iphone, ios, xcode, cocoa-touch, uitableview

我正在从 nib 文件加载我的表格，并且`viewDidLoad`我无法对表格做任何事情。我可以使用 table 的委托方法来设置 contentOffset，它们可以工作，但在`viewDidLoad`.

那么表格是否已加载`viewDidLoad`？可能不是。知道如何修复它，或检查表是否已加载？（没有子类化）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:06:54.700

表视图在 viewDidLoad 中加载，但通常其中还没有数据。在 viewDidLoad 中调用 reloadData 将导致加载数据并填充行。

一旦表中有数据，并且表的contentSize大于bounds.size，tableview会适当响应setContentOffset。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-02T12:13:30.887

我遇到了同样的问题，但上面的解决方案对我不起作用。这可能是因为我正在使用自动布局，或者因为这个问题已经有好几年没有回答了。

对我有用的是使用 viewDidLayoutSubviews。只有这样 setOffset 才起作用。

# text - 如何在我的文本编辑器中找到特殊字符的字符代码？

> ID：13123261
> 
> 赞同：11
> 
> 时间：2012-10-29T14:09:18.747
> 
> 标签：text, utf-8, character-encoding, textmate, sublimetext2

将外部来源的文本粘贴到纯文本编辑器（例如 TextMate 或 Sublime Text 2）时，一个常见问题是特殊字符也经常被粘贴。其中一些字符呈现良好，但根据来源，有些可能无法正确显示（通常显示为一个问号，周围有一个框）。

所以这实际上是2个问题：

1.  给定一个特殊字符（例如，' 或 ♥），我能否确定用于从我的文本编辑器中显示该字符的 UTF-8 字符代码，和/或将这些字符转换为它们的字符代码？

2.  对于那些作为垃圾进入的“额外特殊”字符，有没有办法弄清楚在源文本中使用什么编码来显示该字符，并且这些字符可以以某种方式转换为 UTF-8？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-01T03:45:41.497

我最喜欢查找字符的网站是[fileformat.info](http://www.fileformat.info/info/unicode/char/search.htm)。他们有一个很棒的 Unicode 字符搜索，包括很多关于每个字符及其各种编码的有用信息。

如果您看到带方框的问号，则表示您粘贴了一些无法解释的内容，通常是因为它不是合法的 UTF-8（并非每个字节序列都是合法的 UTF-8）。一种可能性是它是 UTF-16，具有您的编辑器不期望的字节序模式。如果您可以将完整的原始源代码放入文件中，那么该`file`命令通常是确定编码的最佳工具。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-06T16:28:41.650

在[&what](http://amp-what.com)我构建了一个专注于搜索角色的工具。它索引了所有的 Unicode 和 HTML 实体表，还补充了黑客词典和我收集的关键字数据库，因此您可以搜索诸如[`heart`](http://amp-what.com#q=heart)、[`quot`](http://amp-what.com#q=quot)、`weather`、`umlaut`、之类的词`hash`，`cloverleaf`并得到您想要的。通过专注于搜索，它避免了在 Unicode 页面周围寻找，这可能会令人沮丧。试试看。

# xml - 有多种选择，但在满足特定条件时需要单个 xsl:value-of

> ID：13123263
> 
> 赞同：0
> 
> 时间：2012-10-29T14:09:22.790
> 
> 标签：xml, xslt, xpath

我有一个 xml 文件，其中包含多个具有相似子元素的相似元素。例如

```
<root>
    <elem>
        <condition>A</condition>
        <value>111</value>
    </elem>
    <elem>
       <condition>B</condition>
        <value>555</value>
    </elem>
    <elem>
        <condition>A</condition>
        <value>222</value>
    </elem>
</root> 
```

其中一个元素包含我需要在 xsl 中提取的值。该值必须由元素子节点中的另一个元素中声明的条件来标识。假设条件是'B'，我需要那个元素'555'的值。

我知道如何在我使用的 xml 编辑器 XPath 中获得正确的值（Rinzo - Eclipse）=>

```
/root/elem[condition='B']/value 
```

但是当我尝试在 xsl => 中获得它时，我无法获得（任何）价值

```
<xsl:value-of select="/root/elem[condition='B']/value"/> 
```

xsl 中的值将在单个元素中，因此不能使用 for-each 循环。恕我直言，原始 xml 格式不正确，但我对此无能为力。

所以问题是，如何使用 xsl:value-of 在 xsl 文件中获取该值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:35:10.307

我们看不到您的 XML 或 XSL 的其余部分，但您的 value-of 语句可以正常工作。

```
<xsl:template match="/">
  <xsl:value-of select="/root/elem[condition='B']/value"/>
</xsl:template> 
```

有效并返回：555

正如**Flynn1179**指出的那样，在评论中，您的 XML 可能包含一个默认名称空间，而 XPATH 中没有考虑到这一点。

尝试将命名空间添加到 XPATH 内联（将[http://yournamespace-here.example.com](http://yournamespace-here.example.com)替换为实际 URL）：

```
/*[namespace-uri()='http://yournamespace-here.example.com' and local-name()='root']/*[namespace-uri()='http://yournamespace-here.example.com' and local-name()='elem'][condition='B']/*[namespace-uri()='http://yournamespace-here.example.com' and local-name()='value'] 
```

或者在你的 XSL 中给它一个前缀

```
xmlns:myPrefix="http://yournamespace-here.example.com" 
```

然后将其添加到您的 XPATH

```
/myPrefix:root/myPrefix:elem[condition='B']/myPrefix:value 
```

# c# - 在局部视图内发生操作后刷新主视图中的局部视图

> ID：13123266
> 
> 赞同：1
> 
> 时间：2012-10-29T14:09:37.703
> 
> 标签：c#, asp.net-mvc-3, entity-framework, razor

我的主视图中有一个局部视图，如下所示：

```
 <div id="complaintlist">
    @Html.Action("ShowCaseComplaints", "Cases", new { caseid = Model.CasesID })
</div> 
```

这是部分视图：

```
@model IEnumerable<cummins_db.ViewModels.CaseComplaintsViewModel>

<table width="100%">
 <tr>
    <th></th>
    <th></th>
    <th>Complaint Code</th>
    <th>Complaint Description</th>
    <th>Delete</th>
</tr>  
@foreach (var item in Model)
    {
<tr>
    <td>
         @Html.HiddenFor(modelItem => item.CasesID )    
    </td>
    <td>
        @Html.HiddenFor(modelItem => item.CaseComplaintID )    
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.ComplaintCode )    
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.ComplaintType)
    </td>
    <td>
        @Ajax.ActionLink("Delete", "RemoveCodeFromCase", "Cases", new { caseid = item.CasesID, id = item.CaseComplaintID }, null)
    </td>        
 </tr>
    }
 </table> 
```

此局部视图具有允许用户从局部视图中的模型中删除记录的操作。这是名为 RemoveCodeFromCase 的操作：

```
public ActionResult RemoveCodeFromCase(int caseid, int id)
        {
        if (ModelState.IsValid)
            {
            CaseComplaint c = db.CaseComplaints.Find(id);
            db.CaseComplaints.Remove(c);
            db.SaveChanges();

            var data = (from C in db.CaseComplaints
                        where C.CasesID == caseid
                        select new CaseComplaintsViewModel()
                        {
                            CasesID = C.CasesID,
                            CaseComplaintID = C.ComplaintCodeID,
                            ComplaintCode = C.ComplaintCode.ComplaintCodeName,
                            ComplaintType = C.ComplaintCode.ComplaintType
                        }).ToList();

            return PartialView("_CaseComplaintCodes", data);

            }

        return PartialView("_CaseComplaintCodes");
        } 
```

我试图了解如何在此操作运行后刷新我的部分视图。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T16:03:32.917

您正在使用的 Ajax 扩展方法将使用 jQuery Unobtrusive Ajax 扩展，这将允许您在客户端呈现结果。您需要在视图中包含 jquery.unobtrusive-ajax.js，然后指定要在其中呈现操作结果的目标 ID。假设它是原始容器，它看起来像这样：

```
@Ajax.ActionLink("Delete", "RemoveCodeFromCase", "Cases", new { caseid = item.CasesID, id = item.CaseComplaintID },  new AjaxOptions { UpdateTargetId = "complaintlist" }, null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:17:47.550

我您必须使用 ajax 才能实现您想要实现的目标，因为没有页面无法在您的操作发生时刷新，请阅读本文

[http://www.codemein.net/2012/05/how-to-refresh-partial-view-with-ajax-asp-net/](http://www.codemein.net/2012/05/how-to-refresh-partial-view-with-ajax-asp-net/)

# ruby-on-rails - 如何为不同类型的对象渲染不同的部分属于控制器中的其他对象

> ID：13123268
> 
> 赞同：1
> 
> 时间：2012-10-29T14:09:40.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我构建的应用程序允许用户创建问题类型：True/False、Single 和 Multiple Choice。所以，我创建了一些模型：

```
class QuestionType < ActiveRecord::Base
  attr_accessible :name, :shorcut
end

class Question < ActiveRecord::Base
  attr_accessible :content, :mark, :topic_id, :question_type_id, :answers_attributes
  belongs_to :topic
  belongs_to :user
  belongs_to :question_type
  has_many :answers, dependent: :destroy
  accepts_nested_attributes_for :answers
end

class Answer < ActiveRecord::Base
  attr_accessible :content, :question_id, :correct

  belongs_to :question
end 
```

现在我要建立一个问题的索引页面，有 3 个链接来为 3 种类型的问题添加问题，当用户单击一个链接时，他们将转到页面以创建问题，并且页面将具有适合该问题类型的表格。在问题控制器中，我想存储问题类型 ID 以保存到问题。
我认为地址是这样的：

[http://example.com/questions/index](http://example.com/questions/index)：索引页面将有 3 个链接来创建问题。

[http://example.com/question_types/1/questions/new](http://example.com/question_types/1/questions/new)：将为真/假问题呈现部分形式

[http://example.com/question_types/2/questions/new](http://example.com/question_types/2/questions/new)：将为单选问题呈现部分形式

[http://example.com/question_types/1/questions/new](http://example.com/question_types/1/questions/new)：将为多项选择问题呈现部分形式

我认为我必须将嵌套资源放在具有问题类型和问题模型的路线中才能具有上述类型的链接，但我不知道如何像上面那样构建视图和分离。请帮助我或给我一个想法，更好的方法:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:23:02.003

根据我对您问题的理解，这可能会解决您的问题：

在你的 app/views/questions/new.html.erb 你可以这样做：

```
 case params[:question_type_id]
    when 1
    render :partial=>"/questions/new_true_false_question"
    when 2
    render :partial=>"/questions/new_single"
    when 3
    render :partial=>"/questions/new_multi"
    end 
```

然后按照 abow 或您喜欢的任何名称创建三个部分。

或者，您可以通过将渲染：部分更改为渲染：模板在控制器中执行此操作。

:)

# c# - 在 Windows 窗体中绘制带有调整大小点的控件选择矩形

> ID：13123271
> 
> 赞同：1
> 
> 时间：2012-10-29T14:09:44.310
> 
> 标签：c#, .net, windows, winforms

我想用所选控件的调整大小点绘制一个矩形，如下图所示。

![在此处输入图像描述](../Images/c549f795f88c9007f43ffe247584ef42.png)

我利用了控件的绘制事件，并且能够为选定的控件绘制一个边框矩形。

```
 Rectangle borderRectangle = new Rectangle(0, 0, this.Width, this.Height);
 ControlPaint.DrawBorder(e.Graphics, borderRectangle, Color.Black,System.Windows.Forms.ButtonBorderStyle.Dotted); 
```

我们是否可以选择包含 Windows 窗体设计器中的功能？

请给我建议一个相同的方法。

提前致谢，

ķ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:15:15.723

这是一个自定义实现，可以在 codeproject 上具有可调整大小的控件：

[允许用户在运行时调整控件大小](http://www.codeproject.com/Articles/20716/Allow-the-User-to-Resize-Controls-at-Runtime)

以下是有关如何在 .NET 中构建成熟的表单设计器的一些官方信息：

[通过使用 .NET 构建自定义表单设计器来定制您的应用程序](http://msdn.microsoft.com/en-us/magazine/cc163871.aspx)

# mongodb - mongodb聚合框架流水线如何工作？

> ID：13123274
> 
> 赞同：2
> 
> 时间：2012-10-29T14:09:56.373
> 
> 标签：mongodb, aggregation-framework

我可能对 mongodb 聚合框架管道的工作方式有一个基本的误解。我的期望是每一步都会消耗前一步的输出。[这是一个使用http://media.mongodb.org/zips.json](http://media.mongodb.org/zips.json)提供的示例集合的具体示例：

```
> db.zipcodes.aggregate({$match:{state:"CA"}}); 
```

产生这样的结果。

```
 {
        "city" : "TRUCKEE",
        "loc" : [
            -120.295031,
            39.319321
        ],
        "pop" : 199,
        "state" : "CA",
        "_id" : "96162"
    } 
```

到目前为止，一切都很好。然后我决定通过运行添加另一个步骤来获得上述投影：

```
> db.zipcodes.aggregate({
    $match:{state:"CA"}, 
    $project: {city: 1, pop: 1, state: 1}
}); 
```

投影有效，但忽略了第一个 $match 步骤。它基于原始输入，并包含 state != CA 的文档：

```
 {
        "city" : "THAYNE",
        "pop" : 505,
        "state" : "WY",
        "_id" : "83127"
    } 
```

是我的期望错位了，还是我一直盯着语法问题而没有看到它？我正在运行 2.2.0 版：

```
> db.version();
2.2.0 
```

示例查询似乎有效。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:27:48.083

这是一个语法问题，你正在做：

```
db.zips.aggregate({$match:{state:"CA"}, $project: {city: 1, pop: 1, state: 1}}) 
```

... 在同一个文档中包含 $match 和 $project 这两个字段。聚合命令采用一系列不同的文档来描述管道的各个阶段：

```
db.zips.aggregate({$match:{state:"CA"}}, {$project: {city: 1, pop: 1, state: 1}}) 
```

显然，如果您将多个字段放在管道阶段，MongoDB 只使用最后一个。这是已在下一个开发分支上修复的错误：[https ://jira.mongodb.org/browse/SERVER-6861](https://jira.mongodb.org/browse/SERVER-6861)

# facebook - 我的网络应用程序未显示在 Facebook 原生应用程序上

> ID：13123293
> 
> 赞同：1
> 
> 时间：2012-10-29T14:10:55.517
> 
> 标签：facebook, ruby-on-rails-3

我的应用程序显示在 facebook 桌面 m.facebook.com 上，但不在本机应用程序上？

我的意思是不在书签或收藏夹上显示。当我在本机应用程序中搜索它时，我可以找到它。

根据文档，它也应该出现在本机 Facebook 应用程序书签上？

谁能告诉我我做错了什么？我已经设置了移动网络设置。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:17:36.370

如果您的应用有原生应用，它将显示在 Facebook 应用书签列表中。如果您的应用程序是桌面或画布应用程序，它会显示在桌面上。如果您的应用是移动网站，那么它会显示在 m.facebook.com 上。您需要在应用程序的开发人员仪表板中指定您支持/拥有/存在的应用程序类型。

# iphone - 在 IOS 中缩放 HTML 滚动框

> ID：13123300
> 
> 赞同：0
> 
> 时间：2012-10-29T14:11:16.637
> 
> 标签：iphone, ios, ipad, uiwebview, uiscrollview

我正在尝试缩放与此处类似的滚动框

[http://www.quackit.com/html/codes/html_scroll_box.cfm](http://www.quackit.com/html/codes/html_scroll_box.cfm)

在 UIWebview 中。

假设我已将上述页面设置为我的 UIWebview 的 URL。我可以在滚动框内放大吗？我可以通过设置 scalesPagesToFit = YES 来缩放整个网页。我尝试将作为 UIScrollViews 的 UIwebview 子视图的委托设置为 self 并在 viewForZoomingInScrollView 中返回 self.webview。但我无法实现它。是否可以在 UIWebview 的 HTML 页面中缩放滚动框或滚动区域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:07:57.483

我通过处理 Javascript 文件中的鼠标移动事件来实现缩放，并且我正在缩放适当的 DIV。现在，问题是，我无法水平滚动缩放的内容。我的 HTML 页面有位置：在 CSS 中固定，我将其更改为相对并尝试给出溢出：自动和滚动。, 溢出-x 作为滚动。但问题仍然没有解决

# c# - C# JSON 响应执行第二个 JSON 请求

> ID：13123301
> 
> 赞同：2
> 
> 时间：2012-10-29T14:11:18.150
> 
> 标签：c#, json

我现在正在使用 JSON 一段时间，但这是我无法解决的问题。

该程序是用 C# 编写的，并有一个名为 CreateWebRequest() 的方法：

```
public void CreateWebRequest()
    {
        CurrentTime = DateTime.Now;
        target = link;
        request = WebRequest.Create(target) as HttpWebRequest;
        request.ContentType = "application/json; charset=utf-8";
        request.Method = "PUT";
        request.ServicePoint.Expect100Continue = false;
        string postData = jsonString;
        System.Console.WriteLine("POSTDATA: " + postData);
        StreamWriter requestWriter;
        using (requestWriter = new StreamWriter(request.GetRequestStream()))
        {
            requestWriter.Write(postData);
        }

    } 
```

另一个获取结果的函数被调用：CreateWebResponse()：

```
public void CreateWebResponse()
    {
        WebResponse response;

        string text;
        try
        {
            response = (HttpWebResponse)request.GetResponse();
        }

        catch (WebException e)
        {
            MessageBox.Show(e.Message);
            return;
        }

        using (var sr = new StreamReader(response.GetResponseStream()))
        {
            text = sr.ReadToEnd();
        }

        APIresult apiresult = JsonConvert.DeserializeObject<APIresult>(text); //Deserialize the text

    } 
```

这些功能都可以正常工作，只有一个问题：代码执行了两个请求。

当我在 mozilla FireFox 的 RESTClient 中放入相同的 JSON 时，JSON 工作正常。当我只使用 CreateWebRequest() 时它也很有效，但是当我同时使用这两种方法时，代码似乎创建了第二个请求？

是否可以只创建一个响应？将这两个功能组合成一个直接产生响应的功能？

我尝试了其他解决方案并将它们放在一起，它们似乎都不起作用。当我要求响应时，代码不再正常工作并创建两个请求。

有没有人有解决方案？

提前致谢。

我调用的 JSON 函数有几个 if 语句，并且根据 Firefox 中的 RESTClient 可以正常工作。下面的代码显示了被 RESTClient 调用的代码是正确的，并且被 C# 代码调用了两次：

```
$sql = 'SELECT...';
        $result = $db->sql_query($sql);//search for member id.
        if($row = $db->sql_fetchrow($result)){//when found, the user has access.
            $member_id = $row['member_id'];
            $sql = 'SELECT ...';
            $result = $db->sql_query($sql);//search for last login today.
            if($row = $db->sql_fetchrow($result)){//if the user has logged in today update the row. 
                $row_check_in_timestamp = $row['check_in_timestamp'];
                $sql = 'UPDATE ...';//update the row with the check out timestamp
                $db->sql_query($sql);
                break;
            }else{//the user hasn't logged in yet today, log in.
                $start_session_array = array(
                    'club_id'   => (int)$club_id,
                    'member_id' => (int)$member_id,
                    'check_in_timestamp' => (int)time(),
                );
                $sql = 'INSERT ...';//check user in and add a new row in the database
                $db->sql_query($sql);
                break;
            }
        }else{
            break;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:24:08.090

已解决：我很抱歉，感谢所有回复，但我发现了问题。我有一个旧版本作为服务一直在运行，并进行了第二次 JSON 调用。

我通过在服务器端记录调用和阻塞代码找到了它，这些调用和阻塞代码在我自己的代码中调用 JSON 来解决这个问题。

# mysql - MySQL 数据库加载速度很慢

> ID：13123305
> 
> 赞同：0
> 
> 时间：2012-10-29T14:11:34.740
> 
> 标签：mysql, wordpress, joomla

我有一个 wordpress 安装，里面有超过 5000 个帖子。最近几天，数据库加载非常缓慢。我使用了数据库优化插件以及后端优化的数据库表。但问题仍然存在。在我重新启动 MySQL 服务器后，一切似乎都运行良好。我的另一个网站存在同样的问题，该网站是在另一台服务器（亚马逊）上安装的 Joomla，并且有超过 50,000 篇文章。即使在这里，我也会定期进行数据库优化，但页面加载速度仍然很慢。有时超过1分钟。两个站点上都有页面缓存，但我仍然遇到这个问题。还有其他网站也在同一台服务器上运行，但与这两个网站相比，它们相对较新且内容较少，加载速度非常快。问题仅出在这两个网站上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:49:14.623

查看：

*   连接池。也许您的连接用完了并遇到瓶颈
*   服务器的缓存
*   慢查询审计

...这只是提示，要获得真正的帮助，您应该指出更多系统性能信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:49:01.187

可能有很多原因，例如：“托管服务器问题（为此类站点使用专用服务器）”、“为 joomla 和 wordpress 使用可用的良好缓存插件”、“使用 db 优化插件”

您也可以参考以下网站 - [http://www.sparringmind.com/speed-up-wordpress/](http://www.sparringmind.com/speed-up-wordpress/) http://wpmu.org/too-many-wordpress-plugins/ [http://www.joomlaperformance.com/文章/性能/so_you_want_to_speed_up_joomla_3_14.html](http://www.joomlaperformance.com/articles/performance/so_you_want_to_speed_up_joomla_3_14.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:51:23.017

我不确定 Wordpress 站点配置设置，但对于 Joomla，如果您尚未运行 MySQLi，我建议您在全局配置中启用。尝试清除站点缓存，如果您在 Joomla 1.5 上运行，那么如果可能，请升级到 Joomla 2.5，因为它在运行查询时会快一点。最后，这可能只是因为您在共享主机上，所以如果您愿意，VPS 服务器会加快速度。

# iphone - (iOS) 什么是superview，什么是subviews

> ID：13123306
> 
> 赞同：6
> 
> 时间：2012-10-29T14:11:39.433
> 
> 标签：iphone, ios, xcode, view, objective-c++

什么是超级视图，什么是子视图？

当我添加此代码时：

```
[self.view addSubview:self.frontView];
// what does that mean ? 
```

和...

```
@property (nonatomic, strong) IBOutlet UIImageView *frontView;
[self.frontView superview] != nil // means ? 
```

什么是superview？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-29T14:41:22.517

**超级视图**是在其上保存其他视图的视图，子**视图**是在视图上保存/添加的**视图**。

假设我们有一个名为**MyView**的视图，其中包含一个**UIButton**（名为**loginButton**）。这里**MyView**被认为是**loginButton的****超级视图，而 loginButton**被认为**是**MyView的**子****视图**。

 ******[更多，你应该从这里开始](http://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/WindowsandViews/WindowsandViews.html#//apple_ref/doc/uid/TP40009503-CH2-SW24)

根据提供的代码片段。

```
[self.view addSubview:self.frontView]; 
```

因此**视图**（控制器的视图）是一个**超级****视图**，而前视图是一个**子视图**

 ***** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T14:26:25.910

“superview”是指持有当前视图的视图。“子视图”是指当前视图所持有的视图。

例如，您有一个包含按钮的视图（将其称为 MyView）。Button 也是一种视图（UIButton 是一种视图）。所以， MyView 是按钮的超级视图。Button 是 MyView 的子视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T14:19:30.160

请参阅 Apple 的[View Programming Guide](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009503-CH1-SW2)，部分[View Hierarchies and Subview Management](http://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/WindowsandViews/WindowsandViews.html#//apple_ref/doc/uid/TP40009503-CH2-SW24)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T13:25:10.697

子视图是子视图（添加在任何视图上）

superview 是 parentview （在其上添加子视图）**********

# hadoop - 托管 BigQuery 实例

> ID：13123312
> 
> 赞同：3
> 
> 时间：2012-10-29T14:11:55.067
> 
> 标签：hadoop, google-bigquery, bigdata

有什么方法可以在我的公司服务器上托管大型查询软件？该公司不希望数据位于自己的数据中心以外的任何其他地方。

什么是 BigQuery 替代品？（云以及托管）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T14:54:57.227

> 有什么方法可以在我的公司服务器上托管大型查询软件？

[Google Big Query](https://cloud.google.com/products/big-query)是[Google Dremel Paper](http://research.google.com/pubs/pub36632.html)的实现，但作为服务提供，不能作为软件安装在本地。

> 什么是大查询替代方案？（云以及托管）

[Apache Drill](http://incubator.apache.org/drill/)是上述 Dremel 的一个实现，但刚刚开始，可能需要一些时间才能实现。

Cloudera 最近宣布了 Imapala 用于 Hadoop 上的实时查询。查看[博客](http://blog.cloudera.com/blog/2012/10/cloudera-impala-real-time-queries-in-apache-hadoop-for-real/)了解更多详情。

*有兴趣了解大数据实时查询的其他一些替代方案。*

[编辑：这是来自InfoWorld](http://www.infoworld.com/print/205879)的一篇有趣的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T18:54:55.927

Hive 和 Pig 是制作可查询系统的两种常见解决方案，但由于您提到了 Google 的 Big Query，我假设您的意思是实时查询。

除了 Praveen 提到的实时解决方案之外，还有一些变通方法可以通过以标准化方式编写冗余存储来使其他面向列的解决方案更快。可以这样想：您可以“预先加入”列族中的数据，只要您了解您正在交易快速访问以应对过多的数据量和较慢的插入速度。

-t。

# .net - .NET 4.5 问题中的日期时间

> ID：13123314
> 
> 赞同：0
> 
> 时间：2012-10-29T14:12:08.553
> 
> 标签：.net, date, datetime

我正在尝试在 .NET 4.5 中解析 DateTime。这是代码。

```
var rawDatetime = "10-11-2012, 11:19 AM";
var format = "MM-dd-yyyy, hh:mm tt";
var ok = DateTime.TryParseExact(rawDateTime, format, new CultureInfo("en-US"), DateTimeStyles.None, out dateTime); 
```

这给出`ok==false`和`dateTime=010101`。我究竟做错了什么？框架有bug吗？

使用“DateTime.TryParseExact(rawDateTime, format, CultureInfo.InvariantCulture, DateTimeStyles.None, out dateTime);”修复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:16:29.363

您确定这不是`rawDatetime`vs的错字`rawDateTime`（它们是不同的变量并且可能具有不同的值）吗？

这对我来说可以：

```
var rawDateTime = "10-11-2012, 11:19 AM";
var format = "MM-dd-yyyy, hh:mm tt";
DateTime dateTime;
var ok = DateTime.TryParseExact(rawDateTime, format, new CultureInfo("en-US"),
    DateTimeStyles.None, out dateTime);
if (ok)
{   // following prints correctly
    Console.WriteLine(dateTime);
} 
```

# javascript - 无法将 json 转换为 javascript 对象/数组

> ID：13123316
> 
> 赞同：0
> 
> 时间：2012-10-29T14:12:16.540
> 
> 标签：javascript, json

我的页面中有以下几行，我希望它转换为 javascript 数组/对象。但我无法帮助自己

```
<script language="javascript" src="json2.js"></script>
<script>
json={"status":"error","message":"there was an error","type":"unclassified"};
alert(json.stringify(json));
</script> 
```

我错过了什么吗？，我想在我做的时候得到这个`"error"`值，当我这样做的时候`alert(newvar.error)`我想得到“有一个错误”的部分`alert(newvar.message)`，变量 json，应该被转换成 javascript 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:15:17.793

您对 JSON 是什么感到困惑。这是：

> 一种完全独立于语言的文本格式，但使用 C 系列语言（包括 C、C++、C#、Java、JavaScript、Perl、Python 等）的程序员所熟悉的约定。这些属性使 JSON 成为一种理想的数据交换语言。

所以：

```
json={"status":"error","message":"there was an error","type":"unclassified"}; 
```

是一个 javascript 对象。

这是 JSON：

```
"{\"status\":\"error\",\"message\":\"there was an error\",\"type\":\"unclassified\"}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:13:25.920

那已经是一个对象了。当你对它进行字符串化时，你会得到它的 JSON 表示。此外，本机对象是 JSON，而不是 json。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T14:15:31.040

您可能希望将对象转换为 JSON 表示。然后你需要：

```
JSON.stringify(json) 
```

在 Javascript 中，变量名区分大小写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T14:13:33.380

> 我希望它将 [JSON 字符串] 转换为 javascript 数组/对象

为此，您可以使用[`JSON.parse()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse). 要将其转换回 JSON 字符串，您可以使用[JSON.stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)。

**注意：**您提供的应该已经是一个 JavaScript 对象。

```
json={"status":"error","message":"there was an error","type":"unclassified"};
​alert(json.type);​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T14:15:44.440

`json={"status":"error","message":"there was an error","type":"unclassified"};` **是**一个 JavaScript 对象。

如果 JSON 以字符串的形式出现，您只需要解析它。

如果要将其转换为包含 JSON 文本的字符串，则只需序列化 JavaScript 对象（使用`JSON.stringify`，而不是任意对象上的方法）。`stringify`

# c++ - 通过 int 值访问枚举成员

> ID：13123321
> 
> 赞同：1
> 
> 时间：2012-10-29T14:12:28.617
> 
> 标签：c++, enums

我有

```
enum Direction { NONE = 0, LEFT, RIGHT, FORWARD }; 
```

并且有一个功能

```
void displayDirection(int dir)
{ ... } 
```

此函数将采用一个 int 值并根据该值打印“Direction”的成员。怎么可能？提前致谢。

例如：如果 dir = 0 打印无；如果 dir = 1，打印 RIGHT；等等

PS：我对 C++ 很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:17:47.570

您需要它们的“字符串”版本来打印...例如`char* szArray[] = { "NONE", "LEFT", "RIGHT", "FORWARD" };`，然后`displayDirection`通过`szArray[dir]`. 边界检查也是合适的......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T14:14:26.390

是的，这是可能的，因为`enum`值在幕后是整数类型。转换是隐式的，所以你应该可以直接调用

```
displayDirection(3);  //FORWARD 
```

但是，我建议将函数签名更改为

```
void displayDirection(Direction dir) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:19:17.550

如果要打印文本值，“NONE”、“LEFT”等，这是不可能的。

在编译的可执行文件中，名称已被优化掉，您无法将它们取回，就像您无法按名称引用变量一样（例如示例中的“dir”）。

所以你应该做的是通过将名称存储在字符串数组中来将它们放入程序中。

# c++ - FILETIME 结构中的负 dwLowDateTime 是什么意思？

> ID：13123322
> 
> 赞同：2
> 
> 时间：2012-10-29T14:12:30.160
> 
> 标签：c++, c, winapi, datetime

我知道该`FILETIME`结构从 1601 年 1 月 1 日开始以 100 纳秒的步长形成日期时间值。但是小于 0 的值是什么意思`dwLowDateTime`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T15:26:28.530

这意味着您将其视为 int 而不是 unsigned int，因此它可能显示为负数。

正如 Matteo Italia 所说，您最好将其放在 ULARGE_INTEGER 中，如下所示：

```
ULARGE_INTEGER uli;
uli.LowPart  = ft.dwLowDateTime;
uli.HighPart = ft.dwHighDateTime;
__int64 filetime64 = uli.QuadPart; 
```

您甚至可以使用 memcpy 执行此操作，如下所示：

```
__int64 fileTime64;
memcpy( &fileTime64, &ft, sizeof( __int64 ) ); 
```

# javascript - 保存的 Java Script 计数计时器

> ID：13123323
> 
> 赞同：-4
> 
> 时间：2012-10-29T14:12:30.883
> 
> 标签：javascript

嗨，我需要帮助，我希望我的网站有一个计数计时器，例如 [https://www.quickiepaydayloans.co.uk/index1.html](https://www.quickiepaydayloans.co.uk/index1.html)

看讲话泡泡

在分钟计时器计数但它不是我想要的我想要的是一个计数器，我可以设置为从说“2,000”或者我需要的任何东西它刷新每隔这么多毫秒并随机上升 1,2，一次 3,4，所以我可以设置速度，我可以让它每小时增加 50 或 100，或者永远不会结束，除非我改变计数时间。

我需要它是一个恒定的东西，比如倒数计时器，所以如果我要刷新页面，它不会重置。

我也希望它在每 3 个 0 之间添加一个逗号，所以当它达到千时，它将读取 1,000 和 1,000,000 等等：D

如果这对任何人都有意义希望有人可以提供帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:37:23.473

我假设您正在寻求一般帮助并“为我指明大方向”而不是“向我发送代码”，并做出相应的回应。

首先，您所要求的将需要比 javascript 更多的东西，事实上，它比您想象的要复杂得多。考虑：

*   刷新页面时计时器不刷新意味着您需要将其绑定到日期/时间，或者您需要某种形式的永久性。您必须使用的两种持久性是 cookie 和服务器端。Cookies 是特定于用户的版本，并且会产生很大的开销。它们的设计并不像他们必须更新那样频繁地更新以实现刷新之间的合理一致性。服务器端（同时访问该页面的每个人都获得相同的计数器）可能是可行的，但这意味着您必须在服务器端使页面动态，您必须有一个独立的线程来更新计数器，并且您需要运行近乎恒定的异步调用以保持页面和服务器同步。再一次，不是那个' s 意味着以毫秒为单位运行。将它绑定到日期/时间（同样，每个人都一样）很酷，并且是大多数此类计数器会使用的，但它遇到了另一个问题。

*   你说过你希望定时器增加一个随机数。不幸的是，这会直接将其与日期/时间联系起来，因为日期/时间方法不会记录您所做的事情。您可以调用 rand 函数并进行适当的更新，但无法在两次刷新之间保留信息。

那么，基本上，你可以放弃持久性，在这种情况下，你可以为你的 1-4 使用一个 rand 函数，并在客户端运行它，一切都会正常工作，或者你可以放弃计数随机性，在这种情况下，您可以将其与日期/时间联系起来，一切都会正常工作，或者您可以尝试使用 cookie 或服务器端恶作剧来处理持久性，在这种情况下，这会变*得很难看*。

逗号是一个格式问题，并不是很困难。我相信有一种简单的开箱即用解决方案，即使没有，javascript 中的所有内容都作为字符串处理，您可以在获得号码后手动插入逗号。

向上而不是向下计数也很简单。

# javascript - 道场。显示搜索状态

> ID：13123324
> 
> 赞同：0
> 
> 时间：2012-10-29T14:12:35.203
> 
> 标签：javascript, dojo

我有一个搜索功能，它需要大约 10 秒来运行数据库。有没有办法在 dojo 中显示搜索状态，以便用户知道搜索实际上正在执行？

**澄清**

在显示结果的窗口中寻找显示带有百分比的进度条、旋转圆圈或只是简单的搜索...的内容，以便用户知道他们的按钮单击实际上触发了搜索，然后搜索完成并填充窗口时消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:17:13.123

顺便说一句，您需要提供有关您实际想要实现的目标的更多信息。

话虽如此，我猜测您可能想要使用 Standby 小部件来清空页面。

## 解决方案 1 - 备用小部件

在执行搜索之前，您可以显示备用小部件。

例如：

```
 <div data-dojo-props="target: dojo.byId("someTargetNode")" data-dojo-type="dojox/widget/Standby" id="standby" ></div> 
```

然后，您可以通过调用 show(); 显示 Standby 小部件，该小部件将使用加载器覆盖您的目标 domNode；显然，当您收到回复时，您也必须手动调用 hide。

```
dijit.byId("standby").show(); 
```

[dojox/widget/Standby](http://download.dojotoolkit.org/release-1.8.1/dojo-release-1.8.1/dojox/widget/tests/test_Standby.html)演示（请耐心等待页面加载。演示是 Dojo 的未构建版本，因此可能需要几秒钟）；

## 解决方案 2 - 烤面包机小部件

您可以使用的第二个解决方案是 Toaster 小部件，它会从页面中弹出以显示您正在加载某些内容。

[dojox/widget/Toaster](http://download.dojotoolkit.org/release-1.8.1/dojo-release-1.8.1/dojox/widget/tests/test_Toaster.html)的演示

在我的应用程序中，我使用自定义样式的烤面包机来实现加载。

**使用备用小部件的示例**

这是待机的快速屏幕截图

![在此处输入图像描述](../Images/b5756e6fbc21d9d1a2029eca21ce9a29.png)

**使用烤面包机的示例**

这是烤面包机的快速截图

![在此处输入图像描述](../Images/9239e5cda7fe224cc758312464983830.png)

# iphone - 想要去除标签的边框和锚点

> ID：13123331
> 
> 赞同：0
> 
> 时间：2012-10-29T14:13:04.817
> 
> 标签：iphone, ios

我正在创建一个标签，该标签将根据用户的需要调整大小，我已经使用来自 github的[这个项目中的类来完成它。](https://github.com/spoletto/SPUserResizableView)

但它在标签上显示锚点和边框，我希望当使用点击背景时，这个锚点和边框将被删除..hlp。

**编辑**

UserResizableView.h 文件

```
@interface UserResizableView : UIView {
    SPGripViewBorderView *borderView;
    UIView *contentView;
    CGPoint touchStart;
    CGFloat minWidth;
    CGFloat minHeight;

    BOOL shouldDrawAnchorPoint;
    // Used to determine which components of the bounds we'll be modifying, based upon where the user's touch started.
    SPUserResizableViewAnchorPoint anchorPoint;

    id <UserResizableViewDelegate> delegate;
} 
```

UserResizableView.m 文件

```
@implementation SPGripViewBorderView

- (id)initWithFrame:(CGRect)frame {
    if ((self = [super initWithFrame:frame])) {
        // Clear background to ensure the content view shows through.
        self.backgroundColor = [UIColor clearColor];
        shouldDrawAnchorPoint = NO;
    }

    return self;
}

- (void)drawRect:(CGRect)rect {
    if(shouldDrawAnchorPoint)
    {
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSaveGState(context);

    // (1) Draw the bounding box.
    CGContextSetLineWidth(context, 1.0);
    CGContextSetStrokeColorWithColor(context, [UIColor clearColor].CGColor);
    CGContextAddRect(context, CGRectInset(self.bounds, kSPUserResizableViewInteractiveBorderSize/2, kSPUserResizableViewInteractiveBorderSize/2));
    CGContextStrokePath(context);

    // (2) Calculate the bounding boxes for each of the anchor points.
    CGRect upperLeft = CGRectMake(0.0, 0.0, kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize);
    CGRect upperRight = CGRectMake(self.bounds.size.width - kSPUserResizableViewInteractiveBorderSize, 0.0, kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize);
    CGRect lowerRight = CGRectMake(self.bounds.size.width - kSPUserResizableViewInteractiveBorderSize, self.bounds.size.height - kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize);
    CGRect lowerLeft = CGRectMake(0.0, self.bounds.size.height - kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize);
    CGRect upperMiddle = CGRectMake((self.bounds.size.width - kSPUserResizableViewInteractiveBorderSize)/2, 0.0, kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize);
    CGRect lowerMiddle = CGRectMake((self.bounds.size.width - kSPUserResizableViewInteractiveBorderSize)/2, self.bounds.size.height - kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize);
    CGRect middleLeft = CGRectMake(0.0, (self.bounds.size.height - kSPUserResizableViewInteractiveBorderSize)/2, kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize);
    CGRect middleRight = CGRectMake(self.bounds.size.width - kSPUserResizableViewInteractiveBorderSize, (self.bounds.size.height - kSPUserResizableViewInteractiveBorderSize)/2, kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize);

    // (3) Create the gradient to paint the anchor points.
    CGFloat colors []= { 
        0.4, 0.8, 1.0, 1.0, 
       0.0, 0.0, 1.0, 1.0
    };
    CGColorSpaceRef baseSpace = CGColorSpaceCreateDeviceRGB();
    CGGradientRef gradient = CGGradientCreateWithColorComponents(baseSpace, NO, NULL, 2);
    CGColorSpaceRelease(baseSpace), baseSpace = NULL;

    // (4) Set up the stroke for drawing the border of each of the anchor points.
    CGContextSetLineWidth(context, 1);
    CGContextSetShadow(context, CGSizeMake(0.5, 0.5), 1);
    CGContextSetStrokeColorWithColor(context, [UIColor blackColor].CGColor);

    // (5) Fill each anchor point using the gradient, then stroke the border.
    CGRect allPoints[8] = { upperLeft, upperRight, lowerRight, lowerLeft, upperMiddle, lowerMiddle, middleLeft, middleRight };
    for (NSInteger i = 0; i < 8; i++) {
        CGRect currPoint = allPoints[i];
        CGContextSaveGState(context);
        CGContextAddEllipseInRect(context, currPoint);
        CGContextClip(context);
        CGPoint startPoint = CGPointMake(CGRectGetMidX(currPoint), CGRectGetMinY(currPoint));
        CGPoint endPoint = CGPointMake(CGRectGetMidX(currPoint), CGRectGetMaxY(currPoint));
        CGContextDrawLinearGradient(context, gradient, startPoint, endPoint, 0);
        CGContextRestoreGState(context);
        CGContextStrokeEllipseInRect(context, CGRectInset(currPoint, 1, 1));
    }

    CGGradientRelease(gradient), gradient = NULL;
    CGContextRestoreGState(context);
    }
}
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    shouldDrawAnchorPoint = YES;
    // Notify the delegate we've begun our editing session.
    if (self.delegate && [self.delegate respondsToSelector:@selector(userResizableViewDidBeginEditing:)]) {
        [self.delegate userResizableViewDidBeginEditing:self];
    }

    [borderView setHidden:NO];
    UITouch *touch = [touches anyObject];
    anchorPoint = [self anchorPointForTouchLocation:[touch locationInView:self]];

    // When resizing, all calculations are done in the superview's coordinate space.
    touchStart = [touch locationInView:self.superview];
    if (![self isResizing]) {
        // When translating, all calculations are done in the view's coordinate space.
        touchStart = [touch locationInView:self];
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    shouldDrawAnchorPoint = NO;
    // Notify the delegate we've ended our editing session.
    if (self.delegate && [self.delegate respondsToSelector:@selector(userResizableViewDidEndEditing:)]) {
        [self.delegate userResizableViewDidEndEditing:self];
        [borderView setHidden:YES];
        UITouch *touch = [touches anyObject];
        anchorPoint = [self anchorPointForTouchLocation:[touch locationInView:self]];
    }
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    shouldDrawAnchorPoint = NO;
    // Notify the delegate we've ended our editing session.
    if (self.delegate && [self.delegate respondsToSelector:@selector(userResizableViewDidEndEditing:)]) {
        [self.delegate userResizableViewDidEndEditing:self];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:22:15.633

首先，在**SPGripViewBorderView**界面中添加一个布尔值 "shouldDrawAnchorPoint" ：

```
@interface SPGripViewBorderView : UIView
{
  BOOL shouldDrawAnchorPoint;
}

@property(nonatomic, readwrite) BOOL shouldDrawAnchorPoint;

@end 
```

现在在**SPGripViewBorderView**实现中默认设置布尔属性，并在 drawRect 方法中添加一条指令，仅在 shouldDrawAnchorPoint 为 true 时绘制：

```
@implementation SPGripViewBorderView

@synthesize shouldDrawAnchorPoint;

- (id)initWithFrame:(CGRect)frame {
    if ((self = [super initWithFrame:frame])) {
        // Clear background to ensure the content view shows through.
        self.backgroundColor = [UIColor clearColor];
        shouldDrawAnchorPoint = NO;
    }
    return self;
}

- (void)drawRect:(CGRect)rect {

    if(shouldDrawAnchorPoint)
    {
        CGContextRef context = UIGraphicsGetCurrentContext();
        CGContextSaveGState(context);

        // (1) Draw the bounding box.
        CGContextSetLineWidth(context, 1.0);
        CGContextSetStrokeColorWithColor(context, [UIColor blueColor].CGColor);
        CGContextAddRect(context, CGRectInset(self.bounds, kSPUserResizableViewInteractiveBorderSize/2, kSPUserResizableViewInteractiveBorderSize/2));
        CGContextStrokePath(context);

        // (2) Calculate the bounding boxes for each of the anchor points.
        CGRect upperLeft = CGRectMake(0.0, 0.0, kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize);
        CGRect upperRight = CGRectMake(self.bounds.size.width - kSPUserResizableViewInteractiveBorderSize, 0.0, kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize);
        CGRect lowerRight = CGRectMake(self.bounds.size.width - kSPUserResizableViewInteractiveBorderSize, self.bounds.size.height - kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize);
        CGRect lowerLeft = CGRectMake(0.0, self.bounds.size.height - kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize);
        CGRect upperMiddle = CGRectMake((self.bounds.size.width - kSPUserResizableViewInteractiveBorderSize)/2, 0.0, kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize);
        CGRect lowerMiddle = CGRectMake((self.bounds.size.width - kSPUserResizableViewInteractiveBorderSize)/2, self.bounds.size.height - kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize);
        CGRect middleLeft = CGRectMake(0.0, (self.bounds.size.height - kSPUserResizableViewInteractiveBorderSize)/2, kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize);
        CGRect middleRight = CGRectMake(self.bounds.size.width - kSPUserResizableViewInteractiveBorderSize, (self.bounds.size.height - kSPUserResizableViewInteractiveBorderSize)/2, kSPUserResizableViewInteractiveBorderSize, kSPUserResizableViewInteractiveBorderSize);

        // (3) Create the gradient to paint the anchor points.
        CGFloat colors [] = {
        0.4, 0.8, 1.0, 1.0,
        0.0, 0.0, 1.0, 1.0
        };
        CGColorSpaceRef baseSpace = CGColorSpaceCreateDeviceRGB();
        CGGradientRef gradient = CGGradientCreateWithColorComponents(baseSpace, colors, NULL, 2);
        CGColorSpaceRelease(baseSpace), baseSpace = NULL;

        // (4) Set up the stroke for drawing the border of each of the anchor points.
        CGContextSetLineWidth(context, 1);
        CGContextSetShadow(context, CGSizeMake(0.5, 0.5), 1);
        CGContextSetStrokeColorWithColor(context, [UIColor whiteColor].CGColor);

        // (5) Fill each anchor point using the gradient, then stroke the border.
        CGRect allPoints[8] = { upperLeft, upperRight, lowerRight, lowerLeft, upperMiddle, lowerMiddle, middleLeft, middleRight };
        for (NSInteger i = 0; i < 8; i++) {
            CGRect currPoint = allPoints[i];
            CGContextSaveGState(context);
            CGContextAddEllipseInRect(context, currPoint);
            CGContextClip(context);
            CGPoint startPoint = CGPointMake(CGRectGetMidX(currPoint), CGRectGetMinY(currPoint));
            CGPoint endPoint = CGPointMake(CGRectGetMidX(currPoint), CGRectGetMaxY(currPoint));
            CGContextDrawLinearGradient(context, gradient, startPoint, endPoint, 0);
            CGContextRestoreGState(context);
            CGContextStrokeEllipseInRect(context, CGRectInset(currPoint, 1, 1));
        }
        CGGradientRelease(gradient), gradient = NULL;
        CGContextRestoreGState(context);
    }
}
@end 
```

现在在**SPUserResizableView**实现中，通过以下方法将布尔值设置为 true 或 false（取决于用户开始使用屏幕还是结束使用屏幕）：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    borderView.shouldDrawAnchorPoint = YES;
    [borderView needsDisplay];

    // Notify the delegate we've begun our editing session.
    if (self.delegate && [self.delegate respondsToSelector:@selector(userResizableViewDidBeginEditing:)]) {
        [self.delegate userResizableViewDidBeginEditing:self];
    }

    [borderView setHidden:NO];
    UITouch *touch = [touches anyObject];
    anchorPoint = [self anchorPointForTouchLocation:[touch locationInView:self]];

    // When resizing, all calculations are done in the superview's coordinate space.
    touchStart = [touch locationInView:self.superview];
    if (![self isResizing]) {
        // When translating, all calculations are done in the view's coordinate space.
        touchStart = [touch locationInView:self];
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    borderView.shouldDrawAnchorPoint = NO;
    [borderView needsDisplay];

    // Notify the delegate we've ended our editing session.
    if (self.delegate && [self.delegate respondsToSelector:@selector(userResizableViewDidEndEditing:)]) {
        [self.delegate userResizableViewDidEndEditing:self];
    }
}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {
    borderView.shouldDrawAnchorPoint = NO;
    [borderView needsDisplay];

    // Notify the delegate we've ended our editing session.
    if (self.delegate && [self.delegate respondsToSelector:@selector(userResizableViewDidEndEditing:)]) {
        [self.delegate userResizableViewDidEndEditing:self];
    }
} 
```

事情是添加一个布尔值，当用户点击屏幕（touchesBegan）时将布尔值设置为true，当用户停止在屏幕上使用手指时（touchesEnded），将布尔值设置为false。并且仅当布尔值为真时才绘制锚点。

# list - SELECT COUNT ... WHERE ... in SharePoint List

> ID：13123346
> 
> 赞同：0
> 
> 时间：2012-10-29T14:13:52.190
> 
> 标签：list, sharepoint-2010, count

I got some really big lists where I need Counts from specific queries without collecting the data.

In SQL it would be something like

```
SELECT COUNT(*) FROM MyTable WHERE column1Value=536; 
```

As CAML does not seem to have any possibilities to do that, how would you achieve that goal with a standard SharePoint List.

To be clear: I do NOT want to collect all corresponding items and then do a count on them

Thx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:28:03.860

According to a similar question, [Determine Total Count Of Items Returned By SPQuery](https://stackoverflow.com/questions/4031998/determine-total-count-of-items-returned-by-spquery), it is not possible to get a count without selecting the items.

# html - Aptana 插件对我们在 Eclipse 中的 iphone 开发有帮助吗？

> ID：13123348
> 
> 赞同：0
> 
> 时间：2012-10-29T14:13:57.353
> 
> 标签：html, ios, css, xcode, eclipse

我想知道，我们如何在 Eclipse 中为 iOS 开发进行编码？我听说aptana插件会对此有所帮助，如果是真的如何使用该插件？

我想在 html 中创建在 iphone/ipad 上运行的网络应用程序（感谢[Jacky boy](https://stackoverflow.com/users/491239/jacky-boy)提醒我这一点）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:17:28.763

我认为这里有一个误解。要么你想为 iPhone/iPad 开发原生应用，要么你使用 Xcode 和 iOS SDK。或者，您想创建针对相同设备的 Web 应用程序。由于我没有在问题的标签中看到 HTML、CSS 或 JavaScript，我假设您想要原生，在这种情况下您应该使用 Xcode。

# remote-desktop - 在 2003 和 2008 的 RDP 中运行对话框

> ID：13123351
> 
> 赞同：1
> 
> 时间：2012-10-29T14:14:01.663
> 
> 标签：remote-desktop, autohotkey

从技术上讲，这不是 Autohotkey 问题，但我认为这些观众可能知道答案…… RDP 和 RDP 会话中有很多热键，但令人惊讶的是，对于 RUN 对话框却没有。

我正在寻找*一种*将 RDP 会话中的 RUN 对话框呈现给 2003 或 2008 服务器的方法。在 2003 目标中，ALT HOME R 会显示实际运行对话框。在 2008 年 ALT HOME 中打开开始菜单对话框，该对话框默认为类似于运行的字段，这可以满足我的需要。但是在 2008 年 ALT HOME R 会在开始菜单中找到以开头的第一项。我也探索过使用箭头键，但 2008 是 2 个向上箭头，而 2003 是 3 个向上箭头。

我正在寻找的是在两个操作系统上打开“运行”对话框的*单个击键（我可以自动热键）？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-20T13:02:08.297

除非您处于全屏模式，否则它通常不会捕获大多数 Windows 热键击键，因为本地端会在 RDP 窗口看到它们之前“吞下”它们。
您可以尝试使用`ControlSend`将输入路由到 RDP 窗口，但我认为您不会有太多运气。

如果您在非全屏模式下进行剪贴板共享工作，那么您可能会在每个监控剪贴板的远程服务器上运行一个脚本，如果它找到一些魔术字符串，则执行一些命令。

如果所有其他方法都失败了，当您想要发送到远程会话的键被击中时，您总是可以在 RDP 是活动窗口（因此它不会在本地会话上执行）时使用上下文阻止键`#IfWinActive`，然后全屏显示 RDP窗口，然后发送键序列，然后将 RDP 窗口恢复到其原始大小。

附带说明 - 为什么不使用全屏 RDP 窗口？
如果您的原因是在您打开的各个窗口之间切换很痛苦，那么我有一个解决方案：
[此脚本](https://autohotkey.com/boards/viewtopic.php?t=10025)将让您通过将鼠标指针放在 RDP 窗口的边缘来在全屏 RDP 窗口之间切换，并且滚动鼠标滚轮。它只需要在本地机器上运行。

# grails - 使用域类绑定在运行时评估 GString

> ID：13123354
> 
> 赞同：1
> 
> 时间：2012-10-29T14:14:18.803
> 
> 标签：grails, groovy

我想存储一个用户可配置的 GString ，该 GString 将绑定到一个域类，但我在找到一个很好的解决方案时遇到了问题。

示例（**概念/伪/非工作**）

```
class Person{
    ...

    String displayFooAs;  //<-- contains a java.lang.String like '${name} - ${address}'
}

class Foo{

    String name;
    String address;
    String city;

    public String getDisplayAs(def person){

        return doStuff(this, person.displayFooAs); //<-- Looking for something simple.

    }

} 
```

更新：

经过审查，我认为这种灵活性会带来**安全风险**。它将允许用户基本上将 sql 注入脚本写入“dispalyFooAs”。回到绘图板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:05:57.280

你的意思是像：

```
public String getDisplayAs(def person){
  doStuff( this, person?.displayFooAs ?: "$name - $address" )
} 
```

这在 Groovy 中有效，但我从未在 Grails 中将 SimpleTemplateEngine 嵌入到类似的东西中，因此需要进行大量测试以确保它按预期工作并且不会占用内存。

```
import groovy.text.SimpleTemplateEngine

class Person {
  String displayAs = 'Person $name'
}

class Foo {
  String name = 'tim'
  String address = 'yates'

  String getDisplayAs( Person person ) {
    new SimpleTemplateEngine()
          .createTemplate( person?.displayAs ?: '$name - $address' )
          .make( this.properties )
          .toString()
  }
}

def foo = new Foo()

assert foo.getDisplayAs( null )         == 'tim - yates'
assert foo.getDisplayAs( new Person() ) == 'Person tim' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:01:14.610

我需要类似的东西，我将在闭包循环内评估 GString，以便模板引用它的属性值。我采用了上面的示例并将其形式化为用于后期 GString 评估的标准化类。

```
import groovy.text.SimpleTemplateEngine

class EvalGString {
    def it
    def engine

    public EvalGString() {
        engine = new SimpleTemplateEngine()
    }

    String toString(template, props) {
        this.it = props
        engine.createTemplate(template).make(this.properties).toString()        
    }
}    

def template = 'Name: ${it.name} Id: ${it.id}'
def eval = new EvalGString()

println eval.toString(template, [id:100, name:'John')
println eval.toString(template, [id:200, name:'Nate') 
```

输出：

姓名：约翰 ID：100

姓名：内特 ID：200

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:24:39.913

你已经定义了

`private static final String DEFAULT_DISPLAY_AS = '${name} - ${address}'`

**静态**和**最终**- 当然它不起作用？

将其定义为闭包

```
private def DEFAULT_DISPLAY_AS = {->'${name} - ${address}'} 
```

并调用代码

```
DEFAULT_DISPLAY_AS() 
```

# c# - 阅读器关闭时调用 Read 的尝试无效

> ID：13123359
> 
> 赞同：0
> 
> 时间：2012-10-29T14:14:34.270
> 
> 标签：c#, sql-server, parallel-extensions

我在不同的类中有几部分代码，它们使用这个或非常相似的代码从 SQL Server 数据库中提取一些数据。他们中的大多数都可以工作，但我遇到了一些问题，真的不明白为什么。上面的代码将执行 60-64 次，检索行，但随后会因无效读取错误而崩溃。我追踪了任何令人兴奋的记录，但它似乎只是在这些记录和停止之间的任何地方命中。这个类没有调用任何其他类函数，本质上，这是唯一运行的东西。

我的连接字符串的超时时间为 600 秒，并且我也设置了 mars。另一个注释；这是从 Parallel.ForEach 调用的，并行度设置为 2。

正如我所说，我在整个程序中的多个地方都使用了这种代码结构，其中大部分都运行良好，让我担心的不仅仅是错误，而是它出现的不一致。

当我摆脱 Parallel.ForEach 并将其作为 foreach 运行时，它就可以工作了。不过我需要这些线程，否则这需要很长时间。我也很好奇读者在哪里关闭。

**异常**：System.InvalidOperationException--阅读器关闭时调用 Read 的尝试无效。

**调用代码：**

```
 public string GetUnderwritingType(string id)
    {
        UnderwritingType uwt = new UnderwritingType();
        GetRequiredPercent(id, ref uwt);
        GetParticipation(id, ref uwt);
        return CalculateUnderwritingType(ref uwt);
    }
    private void GetRequiredPercent(string id, ref UnderwritingType uwt)
    {
        DataCommon common = new DataCommon(Settings.Default.ReqPercentSP, id);
        try
        {
      /******* Error on this reader statement ********/      
using (SqlDataReader reader = common.Command.ExecuteReader(CommandBehavior.CloseConnection))               {
                /* no data */
                if (reader.HasRows == false) return;
                while (reader.Read())
                {
                    uwt.RequiredPercent.Add(Double.Parse(reader[REQ_PERCENT_FIELD].ToString()));
                    uwt.MinimumCount.Add(Int32.Parse(reader[MIN_COUNT_FIELD].ToString()));
                    uwt.UWType.Add(Int32.Parse(reader[UW_LEVEL_FIELD].ToString()));
                }
            }
        }
        catch (InvalidOperationException)
        {
            if (common.Connection.State == ConnectionState.Open) common.Connection.Close();
            throw;
        }
        catch (SqlException)
        {
            if (common.Connection.State == ConnectionState.Open) common.Connection.Close();
            throw;
        }
    } 
```

**建立连接的代码：**

```
 public class DataCommon
    {
        private readonly SqlCommand _command;
        private SqlConnection _connection;

        public DataCommon(string storedProcedure, string id)
        {
            SetConnection();
            _command = new SqlCommand(storedProcedure, Connection);
            if (_command != null) _command.CommandType = CommandType.StoredProcedure;
            _command.Parameters.Add("@Id", SqlDbType.NVarChar).Value = id;
        }
        /// <summary>
        ///   Gets the database connection.
        /// </summary>
        public SqlConnection Connection
        {
            get { return _connection; }
        }
        /// <summary>
        ///   Gets the database command object.
        /// </summary>
        public SqlCommand Command
        {
            get { return _command; }
        }
        /// <summary>
        ///   Sets the database connection.
        /// </summary>
        private void SetConnection()
        {
            _connection = new SqlConnection {ConnectionString = Settings.Default.TestConnection};
            _connection.Open();
            if (_connection.State != ConnectionState.Open)
                throw new DataException(Settings.Default.ConnectionErrorMessage);
        }
    } 
```

**连接字符串：**数据源=xxxxx；初始目录=yyyyy；Trusted_Connection=True；MultipleActiveResultSets=True；连接超时=600；

**堆栈跟踪：** .Data.SqlClient.SqlDataReader.ReadInternal(Boolean setTimeout) at System.Data.SqlClient.SqlDataReader.Read() at GroupDataAccess.EligibilityClassData.GetEligibilityClass(String id) in C:\Subversion\branches\Fimmas\FimmasToInfoHub\GroupHubFeed \GroupData\EligibilityClassData.cs:C:\Subversion\branches\Fimmas\FimmasToInfoHub\GroupHubFeed\GroupLogic\GroupExtract.cs:GroupLogic.GroupExtract.BuildEligibilityClass(String id, Group& group) 的第 95 行：GroupLogic.GroupExtract 的第 188 行。< >c_ *DisplayClass2.b* _1() 在 C:\Subversion\branches\Fimmas\FimmasToInfoHub\GroupHubFeed\GroupLogic\GroupExtract.cs: System.Threading.Tasks.Task.InnerInvoke() 在 System.Threading.Tasks.Task 的第 113 行。执行（）

**初始调用通过循环**（当转换为正常的 foreach 时，一切都很好）：

```
ParallelOptions options = new ParallelOptions();
options.MaxDegreeOfParallelism = 2;
Parallel.ForEach(ids, options, id => BuildGroup(id)); 
```

**来电**

```
private void BuildGroup(string id)
{
   Group[] group = { new Group() };
    Task eligibilityBlock = Task.Factory.StartNew(() =>
                                            BuildEligibilityClass(id, ref @group[0]));
            Task.WaitAny(eligibilityBlock);
             GroupList.Add(@group[0]);
} 
```

**哪个电话**

```
 private static void BuildEligibilityClass(string id, ref Group group)
    {
        EligibilityClassData eligClassData = new EligibilityClassData();
        group.EligibilityClassList = eligClassData.GetEligibilityClass(id);

    } 
```

命中其中一个读数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:34:41.213

您可以在以下两个位置增加超时值并尝试吗？

1.  组件服务中的 MSDTC 超时。
2.  应用服务器的 machine.config 中的 System.Transactions。

参考：

1.  [“阅读器关闭时调用读取无效”错误（仅适用于长时间操作）](https://stackoverflow.com/questions/6775136/invalid-attempt-to-call-read-when-reader-is-closed-error-for-lengthy-operatio)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T15:58:17.380

我同意这个...“CommandBehavior.CloseConnection”将在第一个完成的线程上关闭您的连接（这解释了不一致）。尝试删除此并删除关闭“catch”中的连接（仅用于测试）。

# javascript - jquery.each() - “this” vs valueOfElement

> ID：13123360
> 
> 赞同：7
> 
> 时间：2012-10-29T14:14:37.390
> 
> 标签：javascript, jquery

在[jQuery.each()](http://api.jquery.com/jQuery.each/)循环中，我一直认为这`this`相当于`valueOfElement`. 有人可以解释其中的区别吗？

例子：

```
$.each(object, function(i, val){
    $('body').append('<b>valueOfElement:</b> ' + typeof val + ' - ' +  
    '<b>this: </b>' + typeof this + '<br/>');
}); 
```

结果：

```
valueOfElement: string - this: object
valueOfElement: boolean - this: object
valueOfElement: object - this: object 
```

[小提琴](http://jsfiddle.net/8mfqe/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-29T14:15:59.987

答案在您链接到的文档中：

> 该值也可以通过 this 关键字访问，但 Javascript 将始终将 this 值包装为一个对象，即使它是一个简单的字符串或数字值。

当以 . 访问时，所有值都嵌入到对象中`this`。

真正的原因可以在这行[jQuery 源码](http://code.jquery.com/jquery-latest.js)中找到：

```
callback.call( obj[ i ], i, obj[ i++ ] ) === false ) { 
```

你可以把它比作

```
(function(){console.log(this)}).call(1); 
```

它构建 a `Number`，因为您不能在不是对象的东西上调用函数。

从[MDN 上调用函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)：

> **这个参数**：
> 
> 请注意，这可能不是方法看到的实际值：如果方法是非严格模式代码中的函数，null 和 undefined 将被替换为全局对象，原始值将被装箱。

我在使用`this`而不是看到的唯一优点`valueOfElement`是：

*   简单：你不必记住给回调的参数的顺序
*   `this`即使`valueOfElement`是原始类型，也可以直接使用函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:18:12.480

关键字将`this`作为 JavaScript 对象访问元素。您可以像获取任何其他 JavaScript 对象一样获取它的值，或者您可以将其包装 ( `$(this)`) 以使其成为 jQuery 对象。

# xml - 使用 XSLT 从 XML 中提取信息时无法摆脱命名空间

> ID：13123364
> 
> 赞同：1
> 
> 时间：2012-10-29T14:14:46.307
> 
> 标签：xml, xslt, xml-namespaces

我在使用 XSLT 从 XML 中提取信息时遇到了问题。命名空间也出现在输出中，这是不可接受的。

我从另一个系统收到的 XML

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>  
        <ns1:DeptResponse xmlns:ns1="http://samplecomp.com" xmlns="http://mycomp.org">
            <Department>
                <Building bid="b_1579">
                <DeptName>Sports</DeptName>
                <DeptHead>
                    <Person pid="123">
                        <Name>David Shephard</Name>
                        <Address>
                            <Street>Test</Street>
                            <State code="18">Georgia</State>            
                        </Address>              
                    </Person>
                </DeptHead>
                <DeptYear>1925</DeptYear>
            </Department>
        </ns1:DeptResponse>
    </soap:Body>
</soap:Envelope> 
```

我的 XSL 从上述 xml 中提取所需信息：

```
<xsl:stylesheet version="2.0"      
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"    
    xmlns:ns1="http://samplecomp.com" 
    xmlns:dept="http://mycomp.org"
    exclude-result-prefixes="ns1 xsl dept">  

    <xsl:template match="/">         
        <xsl:apply-templates select="//dept:Person"/>     
    </xsl:template>
    <xsl:template match="@*|node()">        
        <xsl:copy copy-namespaces="no"  >             
            <xsl:apply-templates select="@*|node()"/>        
        </xsl:copy>    
    </xsl:template> 
</xsl:stylesheet> 
```

我在 XSL 之后收到的响应：响应包含一个 xmlns:="http://myccomp.org" 我想摆脱它。我试过使用 copy-namespaces="no" 但没用。:(

```
<Person xmlns="http://mycomp.org" pid="123">
    <Name>David Shephard</Name>
    <Address>
        <Street>Test</Street>
        <State code="18">Georgia</State>            
    </Address>
</Person> 
```

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:25:45.307

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"    
    xmlns:ns1="http://samplecomp.com" 
    xmlns:dept="http://mycomp.org"
    exclude-result-prefixes="ns1 xsl dept">
<xsl:output method="xml"/>
   <xsl:template match="/">         
        <xsl:apply-templates select="//dept:Person"/>     
    </xsl:template>   
     <xsl:template match="*">
    <xsl:element name="{local-name()}">
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates/>
    </xsl:element>
</xsl:template>
<xsl:template match="@*">
    <xsl:attribute name="{local-name()}">
      <xsl:value-of select="."/>
    </xsl:attribute>
</xsl:template> 
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T14:30:53.080

好吧，如果您使用`xsl:copy`创建上下文节点的副本，则在元素的情况下，这意味着您创建一个具有相同名称的元素，并且该名称由命名空间和本地名称组成。`copy-namespaces="no"`仅有助于不复制范围内的任何其他名称空间，但不会更改要复制的元素的名称。因此，在您的情况下，您想要将元素从某个命名空间转换为具有相同本地名称但没有命名空间的元素，即

```
<xsl:template match="dept:*">
  <xsl:element name="{local-name()}">
    <xsl:apply-templates select="@* | node()"/>
  </xsl:element>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T14:27:11.033

`xsl:copy`将包括绑定到该元素的命名空间。`copy-namespaces="no"`只会从文档中排除在被复制的上下文元素中未使用的无关名称空间。

如果要在输出中创建未绑定到命名空间的元素（或属性），则需要使用它们作为@name重新构成元素`xsl:element`和新属性：`xsl:attribute``local-name()`

```
 <xsl:stylesheet version="2.0"      
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"    
    xmlns:ns1="http://samplecomp.com" 
    xmlns:dept="http://mycomp.org"
    exclude-result-prefixes="ns1 xsl dept">  

    <xsl:template match="/">         
        <xsl:apply-templates select="//dept:Person"/>     
    </xsl:template>

    <xsl:template match="*">        
        <xsl:element name="{local-name()}">             
            <xsl:apply-templates select="@*|node()"/>        
        </xsl:element>    
    </xsl:template> 

    <xsl:template match="@*">        
        <xsl:attribute name="{local-name()}" select="." />  
    </xsl:template> 

    <xsl:template match="text()|processing-instruction()|comment()">        
        <xsl:copy>             
            <xsl:apply-templates select="@*|node()"/>        
        </xsl:copy>    
    </xsl:template> 

</xsl:stylesheet> 
```

# matlab - MATLAB 的 gpuArray；计算能力不足

> ID：13123368
> 
> 赞同：1
> 
> 时间：2012-10-29T14:15:02.030
> 
> 标签：matlab, ubuntu, parallel-processing, cuda, gpu

我在 2 岁的 Macbook Pro 上的 Ubuntu 12.04 上运行 MATLAB R2011b。我想利用 MATLAB 的 GPU 功能。但是，当我尝试时，我发现我的 GPU 似乎不够强大：

```
>> gpuArray(rand(10))
Error using gpuArray (line 28)
No device supporting CUDA was found.

>> gpuDevice
Warning: The device selected (device 1, "GeForce GT 330M") does not have sufficient compute
capability to be used. Compute capability 1.3 (or greater) is required, the selected device
has compute capability 1.2\. 
```

这是否意味着我永远无法在我的机器上使用 MATLAB 的 GPU 函数？有哪些替代方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T14:26:44.047

[GT330m 是计算能力 1.2](https://developer.nvidia.com/cuda-gpus) 来自 mathworks 的 MATLAB GPU 支持需要计算能力 1.3（或更高），正如您所发现的。我不知道“从不”该说什么。那是很长一段时间。但是[这个线程](http://www.mathworks.com/matlabcentral/newsreader/view_thread/291689)表明来自 acceleyes 的[夹克](http://www.accelereyes.com/products/jacket)可能是一种替代方案，并且还给出了 Mathworks 对 cc 1.3 或更高版本的限制的观点。

# php - 尝试像 Wordpress 循环一样制作我自己的 while 循环

> ID：13123375
> 
> 赞同：0
> 
> 时间：2012-10-29T14:15:21.537
> 
> 标签：php, mysql, wordpress, while-loop

我最近阅读了这篇文章：[如何像 Wordpress 循环一样制作自己的 while 循环？](https://stackoverflow.com/questions/1516181/how-to-make-my-own-while-loop-just-like-wordpress-loop)到目前为止，我正在尝试自己制作循环，但没有任何成功。

文章中给出的答案推荐了一种 OOP 方法，而不是使用全局变量。

我对 OOP 方法没有运气，但**下面的全局变量方法**几乎可以工作。

而不是显示来自 MySQL 表的 'item_title' 和 'item_desc' 值，而是出现字母。请注意，这些字母采用正确的 while 循环格式。

我究竟做错了什么？

非常感谢

```
<?php
//CONNECT TO DATABASE
$mysqli = mysqli_connect("localhost", "username", "password", "testDB");

//VALIDATE ITEMS FROM STORE_ITEMS TABLE
$get_item_sql = "SELECT * FROM store_items";
$get_item_res = mysqli_query($mysqli, $get_item_sql) or die(mysqli_error($mysqli));

//DEFINE VARIABLES
$posts = mysqli_fetch_array($get_item_res);
$post = null;
$post_count = 0;
$post_index = 0;

//HAVE_POST FUNCTION
function have_post() {
global $posts, $post_count, $post_index;

if ($posts && ($post_index <= $post_count)){
    $post_count = count($posts);
    return true;
}
else {
    $post_count = 0;
    return false;
}
}

//THE_POST FUNCTION
function the_post() {
global $posts, $post, $post_count, $post_index;

// make sure all the posts haven't already been looped through
if ($post_index > $post_count) {
    return false;
}

// retrieve the post data for the current index
$post = $posts[$post_index+1];

// increment the index for the next time this method is called
$post_index++;
return $post;

}

//THE_TITLE FUNCTION
function the_title() {
global $post;
return $post['item_title'];
}

//THE_CONTENT FUNCTION
function the_content() {
global $post;
return $post['item_desc'];
}

//OUTPUT
if(have_post()) : while(have_post()) : the_post();
echo '<h2>'.the_title().'</h2>';
echo '<p>'.the_content().'</p>';
endwhile; endif;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:20:30.383

你做错了MySQL。mysqli_fetch_array 获取单行数据。它不会检索查询结果中的所有行。您的查询也效率低下。如果您只想计算有多少帖子，您可以这样做

```
$result = mysqli_query("SELECT * FROM ...");
$rows = mysqli_num_rows($result); 
```

但这是低效的——假设您实际上将要使用它，您正在强制 DB 库开始获取行数据。然而你只是把它扔掉了。更好的方法是

```
$result = mysqli_query("SELECT count(*) AS cnt FROM ...") or die(mysqli_error());
$row = mysqli_fetch_assoc($result);
$rows = $row['cnt']; 
```

稍后您将`$posts`其视为包含所有查询结果，但由于它仅包含一行，您只需迭代/获取该行的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:24:48.790

正如我所看到的，您只是通过使用查询一行

`$posts = mysqli_fetch_array($get_item_res);`

你需要用这种方式用所有这些行填充一个数组。

```
$posts = array();
while ($row  = mysqli_fetch_array($get_item_res) ){
    $posts[] = $row;
} 
```

# c# - 覆盖自定义文本框中的光标属性

> ID：13123377
> 
> 赞同：2
> 
> 时间：2012-10-29T14:15:29.090
> 
> 标签：c#, properties, cursor, overriding

我在自定义 Texbox 中覆盖 Cursor 属性时遇到问题。问题是，当我将自定义文本框添加到表单并更改 Cursur 的值时，该属性不会显示在设计器中，它没有被序列化。

```
public new Cursor Cursor
{
    get { return this.cursor; }
    set { this.cursor = value; }
} 
```

我希望设计师像这样：

```
... 
customTextBox1.Cursor = System.Windows.Forms.Cursors.Hand;
... 
```

如果我覆盖其他属性，问题不会持续存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:26:48.130

您不是`override`用来创建属性，而是在使用`new`，因此只要将类视为 a`Control`或 a `Textbox`，它将使用该`Control`属性的类版本，而不是您的，这...通常，在这个环境的类型。

如果你真的确定要改变 a`Control`对它的看法`Cursor`，你需要使用`override`，而不是 new 。如果您只想添加一个额外的属性，您应该考虑给该属性一个完全不同的名称，而不是隐藏现有的属性。

# javascript - 在 Opera 中避免在 Ctrl+Enter(Click) 上出现新标签

> ID：13123383
> 
> 赞同：4
> 
> 时间：2012-10-29T14:15:48.757
> 
> 标签：javascript, tabs, opera, enter, ctrl

有很多网站`Ctrl+Enter`用于发送 Web 表单。但在 Opera 中，从[11.50 build 1018](http://my.opera.com/desktopteam/blog/2011/05/27/fixes-and-improvements-on-demand-plug-in-sitepref-ctrl-click-support)开始，此热键将表单发送到新的后台选项卡中。

Opera Next (12.50) 甚至打开**了几个**新的背景标签！
示例代码如下所示：

```
<form method="post" id="form">
    <textarea id="text"></textarea><br /><br />
    <input type="submit" value="submit" id="submit" /> 
</form>

<script type="text/javascript">
    $(document).ready(function(){
        $('#text').keypress(function(event){
            if (event.ctrlKey && (event.which == 10 || event.which == 13)) {
                event.preventDefault();
                event.stopPropagation(); 
                event.ctrlKey = false;
                $('#submit').click();
            }
        });

        $("#submit").click(function(event){
            event.ctrlKey = false;
        });
    });
</script> 
```

链接以查看[http://jsfiddle.net/8pYsv/](http://jsfiddle.net/8pYsv/)

我怎样才能避免这种行为？作为 Opera 用户，而不是网站管理员。

Opera 中没有配置选项`Ctrl``Click`，并且`event.ctrlKey = false;`无法正常工作。

只有用`$("#submit").click()`帮助`$("#form").submit()`替换。

但是有很多网站不会只为 Opera 更改代码。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:19:32.640

您可以在 Opera 的设置中更改您的组合键：

```
Ctrl-F12 
-> Shortcuts
-> Keyboard Setup 
-> Edit 
-> Type 'background'
-> Edit or delete the desired key combination. 
```

# asp.net - 从中继器中的控件获取自定义事件

> ID：13123388
> 
> 赞同：0
> 
> 时间：2012-10-29T14:16:02.610
> 
> 标签：asp.net

我有这个标记 Main.ascx：

```
asp:Repeater ID="rptSource" runat="server">
  <ItemTemplate>
    <uc1:CustomControlsUC ID="CustomControlsUC1" runat="server" DataSource='<%#Container.DataItem %>' />
  </ItemTemplate>
</asp:Repeater> 
```

并在 CustomControlsUC.ascx

```
Public Event Entered(ByVal sender As Object, ByVal e As CommandEventArgs) 
```

和

```
 Public Sub CustomValidation(sender As Object, args As CommandEventArgs)

    RaiseEvent Entered(Me, args)
  End Sub 
```

在我的 Main.ascx 中，转发器在哪里，我尝试处理此事件。

```
Protected Sub rptSource_ItemDataBound(sender As Object, e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles rptSource.ItemDataBound
    Dim rpt As inc_CustomControlsUC = CType(e.Item.Controls(1), inc_CustomControlsUC)

    AddHandler rpt.Entered, AddressOf HandleThis
  End Sub 
```

但是在这部分 AddHandler rpt.Entered, AddressOf HandleThis，我没有这个 Entered 事件：

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:18:45.590

尝试这样的事情：

```
<asp:Repeater ID="rptSource" runat="server">
<ItemTemplate>
   <uc1:CustomControlsUC 
      ...
      OnEntered="HandleThis"
   />
</ItemTemplate>
</asp:Repeater> 
```

# java - 在 Java 中显示 PostScript

> ID：13123390
> 
> 赞同：1
> 
> 时间：2012-10-29T14:16:13.077
> 
> 标签：java, postscript

是否有某种显示 PostScript 元素可以添加到 Java 中的 GUI 中？我在 PostScript 方面比在 Java 方面更流利，而且我需要做一些更复杂的形状和命中检测，使用 Display PostScript 系统会容易得多。

有这样的图书馆吗？如果有，它是什么/我在哪里可以找到它？

我已经在谷歌上搜索过它，但我找不到任何真正可以做我想做的事情，因为我的搜索出现了大量仅部分相关的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T23:24:30.690

当然你可以用 Ghost4J 做到这一点：

```
// load PDF document
PDFDocument document = new PDFDocument();
document.load(new File("input.pdf"));

// create renderer
SimpleRenderer renderer = new SimpleRenderer();

// set resolution (in DPI)
renderer.setResolution(300);

// render
List<Image> images = renderer.render(document); 
```

如果您想渲染 Postscript 而不是 PDF：请使用 PSDocument 类。完整示例可[在此处](https://github.com/zippy1978/ghost4j/blob/master/src/main/java/org/ghost4j/example/SimpleRendererExample.java)获得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T07:52:49.023

您可以使用[Ghost4J](http://ghost4j.sourceforge.net/)。它提供了诸如将 .ps 转换为 .pdf 和使用 ImageIO 渲染 .pdf-s 等功能，这些功能可以作为您问题的解决方案。

# php - 基本 HTTP 身份验证

> ID：13123393
> 
> 赞同：2
> 
> 时间：2012-10-29T14:16:32.217
> 
> 标签：php, authorization

我在让 HTTP 授权工作时遇到了一些困难。由于某种原因，我一直得到的只是弹出框询问用户名和密码。这是我正在使用的代码。有人可以告诉我哪里出错了吗？

```
if (  !isset(  $_SERVER['PHP_AUTH_USER']  )  || !isset(  $_SERVER['PHP_AUTH_PW']  ) )
{
    authorizeUser();
    //if no result, there is no user
}
else
{
    $user = htmlentities( trim( $_SERVER['PHP_AUTH_USER'] ) );
    $pass = htmlentities( trim( $_SERVER['PHP_AUTH_PW'] ) );
    $pass = md5( $_SERVER['PHP_AUTH_PW'] );

    //connect to MySQL data here//

    $sql = "SELECT user_name,pwd FROM tableName WHERE user_name='$user' AND pwd='$pass'";
    $result = mysql_query( $sql );
    if( mysql_num_rows( $result ) == 0 )
    {
        authorizeUser();
    }
    else
    {
        header( "Location: somepage" );
    }
}

function authorizeUser(  )
{
    header( 'WWW-Authenticate: Basic realm="Restricted Area"' );
    header( 'HTTP/1.0 401 Unauthorized' );
            echo "text if cancel button used";
}//end authorizedUser 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:24:08.777

我现在将跳过 SQL 注入演讲，但不要`htmlentities()`在查询之前使用密码或用户。它用于将字符串显示回浏览器或在 url 中传递，而不是用于转义与 SQL 结果进行比较或插入数据库的数据。`html_entity_decode ()`如果用户名或密码中可能包含特殊的 html 字符，则您需要在使用之前对其进行解码 。

回到注入保护...为了防止注入而不通过 mysqli 或 pdo 移动到准备好的语句，使用`mysql_real_escape_string()`代替`htmlentities()`;

```
$user = mysql_real_escape_string( html_entity_decode (trim( $_SERVER['PHP_AUTH_USER'] ) ));
$pass = mysql_real_escape_string( html_entity_decode (trim( $_SERVER['PHP_AUTH_PW'] ) ));
$pass = md5( $pass ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:25:54.750

我认为这可能是一个问题，因为您只是将 $pass 的值设置了两次，

```
$pass = htmlentities( trim( $_SERVER['PHP_AUTH_PW'] ) );
$pass = md5( $_SERVER['PHP_AUTH_PW'] ); 
```

你的意思是这样做吗？

```
$pass = htmlentities( trim( $_SERVER['PHP_AUTH_PW'] ) );
$pass = md5( $pass ); 
```

# c# - 获取 INSERT 语句与 SaveChanges() 上的 FOREIGN KEY 冲突

> ID：13123397
> 
> 赞同：0
> 
> 时间：2012-10-29T14:16:39.767
> 
> 标签：c#, sql-server-2008, entity-framework, exception-handling, foreign-keys

我是使用 SQL Server 使用实体框架的新手，在将记录插入数据库时​​遇到问题。问题在于 3 个与主键和一个外键链接的表，过去我没有使用带外键的数据库。

我现在只是想将一些测试数据输入数据库，但我不断收到错误消息：

> *INSERT 语句与 FOREIGN KEY 冲突*

谁能帮我开始插入我的数据库吗？这是我正在使用的代码：

```
private void button3_Click(object sender, EventArgs e)
{
    TaxiDBEntities db = new TaxiDBEntities(); //connection to database
    DriverStatus newDriverStatus = new DriverStatus(); // driver status object

    /*populate the new driver object*/
    //newDriverStatus.DriverID = Convert.ToInt32(driverComboBox.Text);
    //newDriverStatus.Status = statusTextBox.Text;
    //newDriverStatus.Area = areaTextBox.Text;

    Driver driver = new Driver();

    int driverIDInt = Convert.ToInt32(driverComboBox.Text);

    //driver = db.Drivers.SingleOrDefault(p => p.DriverId == driverIDInt);
    //if (driver == null)
    //{
        driver.DriverId = driverIDInt;
        driver.Fname = "test";
        driver.Lname = "test";
    //}

    db.DriverStatus.AddObject(newDriverStatus); // add driver object to entity model

    DriverLog driverLog = new DriverLog();

    driverLog.driverLogID = driverIDInt;
    driverLog.DriverID = driverIDInt;
    driverLog.date = DateTime.Now;

    db.DriverLog.AddObject(driverLog);

    DriverStatus driverStatus = new DriverStatus();

    driverStatus.DriverID = driverIDInt;
    driverStatus.Status = "1";
    driverStatus.Area = "1";

    db.DriverStatus.AddObject(driverStatus);

    try
    {
        db.SaveChanges();
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:25:17.113

`driver`似乎缺少将对象实际插入数据库的情况。线后

```
driver.notes = "test"; 
```

你应该有类似的东西

```
db.Driver.AddObject(driver); 
```

然后继续创建`driverLog`和`driverStatus`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:26:13.607

您需要先将驱动程序插入数据库，然后才能添加状态或日志。填充驱动程序对象后，您要做的第一件事是添加状态

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T14:28:55.473

1）您从文本框中获取您的 ID `int driverIDInt = Convert.ToInt32(driverComboBox.Text)`，. 这不是最佳解决方案，请考虑将其设为 IDENTITY 列。

2）您的模型表明 Drive-DriverLog 为 1-n，但您的代码不允许超过 1 个日志：

```
driverLog.driverLogID = driverIDInt;
driverLog.DriverID = driverIDInt; 
```

3）您正在添加`newDriverStatus`到 Db，但没有设置键。

4）如果您打算链接`newDriverStatus`到，`driver`那么添加`driverStatus`也会出现冲突。

而且，就像其他人已经指出的那样，您忘记添加`driver`到数据库中。

总之，将列定义为 INDENTITY 并让 fx 处理外键要容易得多。只需使用`newDriverStatus.Driver = driver;`和`driverLog.Driver = driver;`

# html - 如何使按钮看起来像一个链接 - 特别是：文本装饰下划线/底部边框

> ID：13123399
> 
> 赞同：2
> 
> 时间：2012-10-29T14:16:44.670
> 
> 标签：html, css

如何使按钮看起来像锚标签？

我尝试了下面的 HTML，但是当我将鼠标悬停在按钮上时，底部边框看起来与其他锚标记不同。边框底部看起来在文本下方大约 3px，而在锚标签上，它们之间只有 1px。

我只会使用一个链接，但我已经读过一个按钮在我的情况下在语义上会更正确。

```
<style>
.epUnsubscribe {
    float: left;
}

    .epUnsubscribe button {
        background: none!important;
        border: none;
        padding: 0!important;
        cursor: pointer;
        border-bottom: 1px solid #ffffff;
        color: #5C8C9B;
    }

        .epUnsubscribe button:hover {
            border-bottom: 1px solid #5C8C9B;
        }
</style>

<div style="float: left" class="epUnsubscribe">
        <button id="BtnUnsubscribe">Unsubscribe</button>
    </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T14:18:55.693

它不是超链接的边界，而是下划线，试试这个：

```
.epUnsubscribe button:hover {
  border: none;
  text-decoration: underline;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:18:07.637

使用实际链接并使用`onclick="..."`回调为其提供一些按钮功能可能会更容易。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-29T14:20:45.387

链接没有底部边框，它们有下划线

```
text-decoration:underline 
```

# excel - 如何从excel文件中读取单元格值

> ID：13123400
> 
> 赞同：2
> 
> 时间：2012-10-29T14:16:47.587
> 
> 标签：excel, vba

我有一个文件夹，其中包含每个员工的一个 Excel 工作簿（工作簿中只有一个工作表）。我想打开每个员工工作簿并读取 1 美元的单元格，然后写入另一个工作表。最终，我将有一个工作表，其中包含每个工作簿的所有 $A$1 单元格。我编写了以下代码，但我指出的行由于某种原因不起作用。你能建议怎么做吗？谢谢

```
Private Sub CommandButton1_Click()
Const FOLDER As String = "c:\Junk\Employee Files\"

On Error GoTo ErrorHandler

Dim i As Integer
i = 0

Dim fileName As String

fileName = Dir(FOLDER, vbDirectory)
   Do While Len(fileName) > 0

    If Right$(fileName, 4) = "xlsx" Then
        i = i + 1

        Dim currentWkbk As Excel.Workbook
         Set currentWkbk = Excel.Workbooks.Open(FOLDER & fileName)
         Cells(i, 1) = "Employee " & 1
        'The line above works perfectly
         Cells(i, 2) = currentWkbk.Range("A1").Value   
        'The line doesn't work.  above works perfectly
    End If
    fileName = Dir
  Loop

ProgramExit:
   Exit Sub
ErrorHandler:
  MsgBox Err.Number & " - " & Err.Description
  Resume ProgramExit

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:26:18.913

布拉德确实有一点，但我认为您的错误更有可能是由于缺少指定的工作表 - 尝试使用这个：

```
Cells(i, 2) = currentWkbk.worksheets(1).Range("A1").Value 
```

而不是这个

```
Cells(i, 2) = currentWkbk.Range("A1").Value 
```

但是，您也应该考虑使用 Brads 的建议；）

有些人可能会建议对工作表选择使用动态解决方案。我没有使用一个，因为您明确说过，只有一个工作表。但无论如何，您当然可以使其动态化或使用工作表的实际名称来代替`1`- 任何适合您需要的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:22:48.710

您需要完全限定您的范围参考。由于您正在引用两个工作簿，因此您不能使用类似的术语，`cells(i,2)`因为默认情况下引用活动工作簿通常不是您想要的，在这种情况下，特别是当您打开新文件时，`Set currentWkbk = Excel.Workbooks.Open(FOLDER & fileName)`它成为活动工作簿。

在你的例行程序开始时尝试这样的事情

```
Dim destWorksheet as Worksheet
Set destWorksheet = Thisworkbook.Sheets("Name of sheet") 
```

然后像这样使用它

```
If Right$(fileName, 4) = "xlsx" Then
    i = i + 1

    Dim currentWkbk As Excel.Workbook
     Set currentWkbk = Excel.Workbooks.Open(FOLDER & fileName)
     destWorksheet.Cells(i, 1) = "Employee " & 1
    'The line above works perfectly
     destWorksheet.Cells(i, 2) = currentWkbk.Range("A1").Value   
    'The line doesn't work.  above works perfectly
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-13T05:21:12.420

我遇到了一个新的挑战，我们收到了 100 个 excel 文件，在单元格 A3:A3 的文件中有文件名请求者。所以我必须只为特定的请求者加载数据，并且数据从 Cell A35 的文件开始。

[![在此处输入图像描述](../Images/a6b6a68e1a24550ebbb9009eb914e527.png)](https://i.stack.imgur.com/qrV0R.jpg)

我现在为该循环中的每个循环创建了一个，我将文件名和工作表名称保存到变量中，并在从变量读取数据时使用该变量。现在我创建了另一个变量，在表达式中我使用了语法："SELECT "+ "["+@[User::SheetName]+"A3:A3]"+".F1" +" AS COL1 FROM "+ " ["+@[用户::工作表名称]+"A3:A3]"

[![在此处输入图像描述](../Images/3d83b6a8b44671a9371ba0c82eb99516.png)](https://i.stack.imgur.com/56ehB.jpg)

现在设置 ResultSet=Single Row 并将结果集分配给另一个变量 P_id。现在在优先约束中，我们等于该变量，如果值匹配，它将通过流程，否则我们可以根据条件移动或删除该文件：

[![在此处输入图像描述](../Images/1cec35be813acd294ddc61da9df09453.png)](https://i.stack.imgur.com/yCW8f.jpg)

# jquery - 在 mouseEnter / Leave 上显示/隐藏绝对菜单

> ID：13123402
> 
> 赞同：0
> 
> 时间：2012-10-29T14:16:52.140
> 
> 标签：jquery, mouseevent, show-hide

我的代码中有一个小问题，我不知道如何解决它。

这是一个带有详细评论的小提琴：http: [//jsfiddle.net/4aZbp/](http://jsfiddle.net/4aZbp/)

基本上，我有一个元素列表，当您将每个元素悬停时，会显示一个“+”图标。

当您单击该按钮时，会出现一个小菜单。

该菜单不在*li*内，它是我使用 jQuery 定位的页面顶部的绝对隐藏菜单。因此，所有元素的一个菜单。

该菜单应保持打开状态，直到用户将鼠标离开`<li>`. 到现在为止还挺好，

我的问题是当用户尝试单击该菜单时它需要保持打开状态。我无法让它工作，因为菜单在 div 之外，它需要保留在那里。

有什么解决办法吗？请检查小提琴

[http://jsfiddle.net/4aZbp/](http://jsfiddle.net/4aZbp/)

```
$(document).ready( function() {

    // Position the menu & show it at the right place when you click on the "+" button

    $(".open-playlist-link").click(function() {       
        var offset = $(this).offset();
        var offsetTop = Math.round(offset.top);
        var offsetLeft = Math.round(offset.left);

        var menu = $('.add-to-playlist-menu');

        menu.css( {
            top : offsetTop +20,
            left : offsetLeft }
        );
        menu.toggleClass('display-none');      
    });

    // Hide the "+" button when you leave the wrapper of the <li> 

    $(".wrap").mouseenter(function() {
            $(this).children('.add-to-playlist-icon').removeClass('display-none');
        }).mouseleave(function(){
            $(this).children('.add-to-playlist-icon').addClass('display-none');
    });

    // Hide the menu when you leave the wrapper, but you need to be able to click the link inside the menu. When you leave the menu, we hide it. ISSUE HERE.

    $('.wrap').mouseleave(function(){
        $('.add-to-playlist-menu').addClass('display-none');
    });
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:30:14.167

假设让它像你想要的那样工作的最简单方法是将菜单移动到`li`.

[这里](http://jsfiddle.net/4aZbp/1/)还没有完全完成演示，但添加所需的行为应该很容易（比如在 LI 离开后隐藏菜单）

主要更新在这里（新行`$(this).parent().append(menu);`并删除了 css 定位）：

```
 $(".open-playlist-link").click(function() {       
        var offset = $(this).offset();
        var offsetTop = Math.round(offset.top);
        var offsetLeft = Math.round(offset.left);

        var menu = $('.add-to-playlist-menu');    

        menu.toggleClass('display-none');      
        $(this).parent().append(menu);
    }); 
```

由于菜单 div 不在里面`LI`- 只要您将鼠标移动到菜单 div，就会发生该事件。为避免这种情况，您应该在里面有菜单 div `LI`（实际上，`div.wrap`根据提供的代码）。

# jsf-2 - 如何在 jsf2 中处理 viewExpirationException

> ID：13123404
> 
> 赞同：1
> 
> 时间：2012-10-29T14:17:01.967
> 
> 标签：jsf-2

我正在研究jsf2。

如果我在会话超时之前不使用页面，那么页面会给出 ViewExpirationException 并且页面已损坏。那么如何处理这个错误。我试图重定向到 ErrorPage.xhtml

```
<error-page>
     <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/error.xhtml</location>
</error-page> 
```

我创建了用于显示的 error.xhtml 页面。

但我无法看到这个错误页面。我的错误可能是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:27:09.437

写在下面的代码中

## 索引.xhtml

```
 <meta http-equiv="refresh" content="#{session.maxInactiveInterval};url=faces/error.xhtml" /> 
```

## web.xml

```
<error-page>
     <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/error.xhtml</location>
</error-page> 
```

创建一个错误页面并编写您要显示的错误消息。

# newline - 生成文件中的回声和反冲转义

> ID：13123405
> 
> 赞同：0
> 
> 时间：2012-10-29T14:17:03.347
> 
> 标签：newline, echo

当变量包含命令的输出时，使用 echo 打印此变量会抑制新行。转义反斜杠`echo -e`不起作用。设置`SHELL`变量也无济于事。

例子 ：

```
$ cat log1.txt 
terminated
terminator

$ gmake
terminated terminator 
```

使用以下生成文件：

```
all:
    @ab=`cat log1.txt`;\
    echo -e $$ab 
```

生成文件版本：*GNU Make 3.82*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:03:30.793

绝对是外壳问题。shell 脚本中的相同代码也不起作用。

# ruby-on-rails - Gem Spree_i18n 在服务器启动时抛出错误：无法加载翻译

> ID：13123406
> 
> 赞同：1
> 
> 时间：2012-10-29T14:17:08.727
> 
> 标签：ruby-on-rails, internationalization, translation, spree

**宝石文件：**

```
gem 'spree', '1.2.0' #:git => 'git://github.com/spree/spree.git'
gem 'spree_auth_devise', :git => 'git://github.com/spree/spree_auth_devise'
# original repository not compatible at the moment, use fork
# gem 'spree_i18n', :git => 'git://github.com/spree/spree_i18n.git'
gem 'spree_i18n', :git => 'git://github.com/kares/spree_i18n.git' 
```

**应用程序.rb：**

```
config.i18n.default_locale = :de 
```

**Spree.rb：（初始化器**）

```
Spree.config do |config|
  ...
  config.default_locale = "de"
end 
```

**还有什么：**

*   我已将所有可能的语言 yml 文件复制到 app/config/locale
*   我已经跑了“ `rake spree_i18n:update_default`”
*   我已经跑了“ `rake spree_i18n:sync`”

**错误：**

```
$ rails s
=> Booting WEBrick
=> Rails 3.2.8 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server Exiting c:/Ruby193/lib/ruby/gems/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/base.rb:158:in ` load_file': can not load translations from c:/Ruby193/lib/ruby/gems/1.9.1/bundle r/gems/spree_i18n-d0ce127166d0/config/locales/cs-CZ.yml, expected it to return a  hash, but does not (I18n::InvalidLocaleData)
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/bas e.rb:15:in `block in load_translations'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/bas e.rb:15:in `each'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/bas e.rb:15:in `load_translations'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/sim ple.rb:57:in `init_translations'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/sim ple.rb:71:in `lookup'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/bas e.rb:26:in `translate'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/i18n-0.6.1/lib/i18n.rb:156:in ` block in translate'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/i18n-0.6.1/lib/i18n.rb:152:in ` catch'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/i18n-0.6.1/lib/i18n.rb:152:in ` translate'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/devise-2.0.4/lib/devise/rails.r b:99:in `block (2 levels) in <class:Engine>'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/lazy_load_hooks.rb:34:in `call'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/lazy_load_hooks.rb:34:in `execute_hook'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/lazy_load_hooks.rb:42:in `each'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/lazy_load_hooks.rb:42:in `run_load_hooks'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/applic ation/finisher.rb:59:in `block in <module:Finisher>'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:30:in `instance_exec'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:30:in `run'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:55:in `block in run_initializers'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:54:in `each'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/initia lizable.rb:54:in `run_initializers'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/applic ation.rb:136:in `initialize!'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/railti e/configurable.rb:30:in `method_missing'
        from c:/RoRDev/dip/config/environment.rb:5:in `<top (required)>'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/polyglot-0.3.3/lib/polyglot.rb: 63:in `require'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/polyglot-0.3.3/lib/polyglot.rb: 63:in `require'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/dependencies.rb:251:in `block in require'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/dependencies.rb:236:in `load_dependency'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_ support/dependencies.rb:251:in `require'
        from c:/RoRDev/dip/config.ru:4:in `block in <main>'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb: 51:in `instance_eval'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb: 51:in `initialize'
        from c:/RoRDev/dip/config.ru:1:in `new'
        from c:/RoRDev/dip/config.ru:1:in `<main>'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb: 40:in `eval'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb: 40:in `parse_file'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:2 00:in `app'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/comman ds/server.rb:46:in `app'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:3 01:in `wrapped_app'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:2 52:in `start'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/comman ds/server.rb:70:in `start'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/comman ds.rb:55:in `block in <top (required)>'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/comman ds.rb:50:in `tap'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/comman ds.rb:50:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

**问题：**

*   他为什么要寻找 cs-CZ.yml？
*   为什么他不能加载翻译？cs-CZ.yml 文件存在于 app/config/locale 下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:35:51.617

我认为您最好只删除 spree_i18n gem 并将您需要的文件放入其中，`config/locales`因为无论您是否使用它们，gem 都会将它们全部加载到内存中。

该错误表明`cs-CZ.yml`格式不正确。如果您需要该语言环境，您可以从[http://www.localeapp.com/projects/1795](http://www.localeapp.com/projects/1795)下载一个应该有效的版本。

# php - PHP Inotify 非阻塞方式

> ID：13123409
> 
> 赞同：6
> 
> 时间：2012-10-29T14:17:13.667
> 
> 标签：php, linux

我正在读取 linux 中的一个文件，该文件是一个日志文件，它不断更新文件已更改的天气并将其输出到网页。我使用 php inotify 来做，但我的问题是它被阻塞了。

如何使 php inotify 非阻塞，以便在监视文本文件时可以做其他事情？

```
<?php

$fd = inotify_init();

$watch_descriptor = inotify_add_watch($fd, '/tmp/temp.txt', IN_MODIFY);

touch('/tmp/temp.txt');

    $events = inotify_read($fd);

    $contents = file_get_contents('/tmp/temp.txt');
    echo $contents;

inotify_rm_watch($fd, $watch_descriptor);
fclose($fd)

?> 
```

或者我可以在java中做到这一点吗？..谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T15:47:44.017

是的你可以。你看手册了吗？它提供了非阻塞事件回调示例？如果此答案不能充分回答您，请添加更多信息。

[http://php.net/manual/en/function.inotify-init.php](http://php.net/manual/en/function.inotify-init.php)

```
// Open an inotify instance
$fd = inotify_init();

// - Using stream_set_blocking() on $fd
stream_set_blocking($fd, 0);

// Watch __FILE__ for metadata changes (e.g. mtime)
$watch_descriptor = inotify_add_watch($fd, __FILE__, IN_ATTRIB);

// generate an event
touch(__FILE__);

// this is a loop
while(true){

  $events = inotify_read($fd); // Does no block, and return false if no events are pending  

  // do other stuff here, break when you want...
}

// Stop watching __FILE__ for metadata changes
inotify_rm_watch($fd, $watch_descriptor);

// Close the inotify instance
// This may have closed all watches if this was not already done
fclose($fd); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T11:02:02.383

就像莱克说的那样。你可以让它阻塞或非阻塞。如果它是非阻塞的，你必须轮询。我认为您想要的是以多线程方式阻塞。一个线程以阻塞或非阻塞、频繁轮询模式工作，而另一个线程则执行其他操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-18T03:48:43.937

我建议通过使用这件事会容易得多`node.js.`

您只需要以下代码：（文件名：watch.js）

```
 var fs = require('fs');
    var file = '/tmp/temp.txt/';
    fs.watchFile(file, function (curr, prev) {
        console.log('the current mtime is: ' + curr.mtime);
        console.log('the previous mtime was: ' + prev.mtime);
    }); 
```

然后你可以运行它：

```
 node watch.js 
```

它将持续运行。

使用`node.js`javascript编写`server-side`程序，它有`non-blocking I/O`模型。它可以帮助您轻松完成此类事情。

这是一些相关文件[`fs.watchFile`](http://nodejs.org/api/fs.html#fs_fs_watchfile_filename_options_listener)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-19T10:10:46.657

你可以看看 React 库，它在 PHP 中提供了一个基于反应器模式的事件驱动、非阻塞 I/O Api： [http ://reactphp.org/](http://reactphp.org/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-18T20:53:25.037

我对这样的事情的偏好是使用 Java，因为我发现像你描述的那样管理后台任务更容易。

**后端**

我的方法是使用 Java EE 创建一个实现调度程序服务的单例启动线程。使用单例启动线程的原因是您的作业可以作为后台进程运行，因此是非阻塞的，从而为应用程序的其余部分释放资源。也可以使用简单地调用类上的方法来访问线程。您可以安排任务每隔“n”秒/分钟等读取您的文件以获取任何更新，然后可以将这些更新提供给您的前端。

基本示例：

```
@Singleton
@Startup
public class Scheduler {

    private static int count = 0;
    private Weather weather;

    public Weather getWeather() {
        return weather;
    }

    @PostConstruct
    public void onStartup() {
        System.out.println("Initialization success.");
    }

   @Schedule(second="*/10", minute="*", hour="*")
   public void execute() {

      byte[] encoded = Files.readAllBytes(Paths.get("weather_updates.txt"));
      String weatherUpdateStr = encoding.decode(ByteBuffer.wrap(encoded)).toString();

      weather = new Weather();
      weather.parse(weatherUpdateStr);

      // Possible addition of logic for push to web socket
   }
} 
```

这个基本示例会在您的 Web 应用程序容器（我建议使用 JBoss 7）启动时创建一个 sigleton 线程。然后它会创建一个每 10 秒执行一次的计划任务。提供的代码将基本的 Java 7 文件读取到字符串，并且`weather.parse()`应该包含一些将字符串转换为 Weather 对象的逻辑。然后，天气对象就可以通过 Web 套接字推送或通过前端的一些 AJAX 请求进行轮询。

**前端**

我会在这里建议两种可能的方法：

1.  使用 HTML5 的 Web 套接字
2.  AJAX 调用

**1.网络套接字**

Web 套接字被引入 HTML5 作为一种在页面上提供动态内容而无需刷新或使用 AJAX 调用的方式。[这](http://www.html5rocks.com/en/tutorials/websockets/basics/)是对 HTML5 中的 websockets 的一个很好的介绍。[这是另一个如何使用 Java 设置 HTML5 websockets 的好例子](http://www.sitepoint.com/introduction-to-the-html5-websockets-api/)。

**2\. AJAX 调用**

jQuery 为 AJAX 提供了一个很棒的 AP​​I。你可以在 jQuery 中实现一个[Timeout](http://www.w3schools.com/jsref/met_win_settimeout.asp)任务，它会间歇性地执行一些功能。您将要实现的功能是[AJAX Get request](http://api.jquery.com/jQuery.get/)。

基本示例：

```
$.ajax({
    url: "getWeatherUpdate.html",
    error: function(){
        // will fire when timeout is reached
    },
    success: function(){
        // Update your webpage with weather info
    },
    timeout: 3000 // sets timeout to 3 seconds
}); 
```

# authentication - 使用带有电子邮件或用户名的 SQLAlchemyAuthenticatorPlugin 登录

> ID：13123412
> 
> 赞同：2
> 
> 时间：2012-10-29T14:17:24.387
> 
> 标签：authentication, sqlalchemy

现在我正在一个使用 SQLAlchemyAuthenticatorPlugin 的网站上工作。您需要用户名和密码才能登录。我想添加一个带有电子邮件和密码的登录名。所以最后应该可以使用电子邮件/密码或用户名/密码登录。现在它看起来像这样：

```
sqlauth = SQLAlchemyAuthenticatorPlugin(model.User, model.meta.Session)
sqlauth.translations['user_name'] = 'email'
sql_user_md = SQLAlchemyUserMDPlugin(model.User, model.meta.Session)
sql_user_md.translations['user_name'] = 'email' 
```

使用 sqlauth.translations，我现在可以使用电子邮件/密码成功登录。但是当然用户名/密码不再起作用了。关于如何使这两个选项同时起作用的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:03:52.383

SQLAlchemy[插件相当简单](http://svn.repoze.org/whoplugins/whoalchemy/trunk/repoze/who/plugins/sa.py)；您可以对其进行猴子补丁或实现您自己的插件版本，例如

```
from sqlalchemy.orm.exc import NoResultFound, MultipleResultsFound
import repoze.who.plugins.sa
class _EmailBaseSQLAlchemyPlugin(object)
    default_translations = {'user_name': "user_name", 'email': 'email',
                            'validate_password': 'validate_password'}

    def get_user(self, login):
        login_type = 'email' if '@' in login else 'user_name'
        login_attr = getattr(self.user_class, self.translations[login_type])
        query = self.dbsession.query(self.user_class)
        query = query.filter(login_attr == login)

        try:
            return query.one()
        except (NoResultFound, MultipleResultsFound):
            # As recommended in the docs for repoze.who, it's important to
            # verify that there's only _one_ matching userid.
            return None

class EmailSQLAlchemyAuthenticatorPlugin(_EmailBaseSQLAlchemyPlugin,
          repoze.who.plugins.sa.SQLAlchemyAuthenticatorPlugin):
    pass
class EmailSQLAlchemyUserMDPlugin(_EmailBaseSQLAlchemyPlugin,
          repoze.who.plugins.sa.SQLAlchemyUserMDPlugin):
    pass

sqlauth = EmailSQLAlchemyAuthenticatorPlugin(model.User, model.meta.Session)
sql_user_md = SQLAlchemyUserMDPlugin(model.User, model.meta.Session) 
```

# android - 如何在 Android 应用程序中向表单添加条件字段和部分

> ID：13123413
> 
> 赞同：1
> 
> 时间：2012-10-29T14:17:24.327
> 
> 标签：android, forms, conditional-statements

我正在构建一个包含表单的 android 应用程序。该表单有一些字段，只有当用户对上一个问题回答“是”时才会包含这些字段。例如，用户正在申请贷款。所以要求用户输入姓名和地址。然后问用户`What is your employment status`？如果用户回答`employed`或`self-employed`THEN 部分`employment`应该添加到用户将输入数据的表单中，例如`job title`, `employer name`,`salary`等。

这是一个例子：

```
first name: John
last name: Smith
marital status: (if user selects married, then a section about spouse should be added to the form)
employment status: (if user selects employed, then a section about employer should be added to the form)
date of birth:
email: 
```

请注意，`conditional sections`不会在触发它们的问题下添加。相反，它们被添加到表单的稍后位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:31:30.293

您需要为需要添加表单部分的控件实现 onClick 侦听器。定义布局文件中的所有部分，但将它们包装在具有 id 和`android:visibility="gone"`. 当用户单击控制这些部分之一的视图时，将其设置为可见。请记住，如果您使用的是复选框，您可能需要手动调用`checkbox.toggle()`onClick 方法。

# shortest-path - 最短路径树之间的差异

> ID：13123417
> 
> 赞同：0
> 
> 时间：2012-10-29T14:17:37.037
> 
> 标签：shortest-path

我试图找到两个节点的最短路径树之间的差异。

带有边的 5 个节点的样本无向图，边权重：

(4 1) 2 (1 2) 3 (3 2) 4 (1 3) 8 (4 3) 5 (2 4) 1 (5 4) 6 (1 5) 4 (2 5) 7

节点名称/标签为： 标签：节点 1：s 节点 2：u 节点 3：x 节点 4：v 节点 5：y

我已经计算了节点 1 和 2 的最短路径。

节点 1 的最短路径为：{[1],[1 2],[1 3],[1 2 4],[1 5]} 节点 2 的最短路径为：{[1],[2] ,[2 4 3],[2 4],[2 5]}

鉴于最短路径可以表示为顶点标签的向量 T=[tk],k=1..N 使得 tk 是顶点 k 的父节点的标签，符号 0 表示根。我需要找到不同之处，即 T1 和 T2 中相应标签不匹配的位置数量。

任何人都可以帮助我吗？

我对将 T 表示为顶点标签向量感到困惑。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:43:21.640

您的向量 T 是包含每个节点的父标签的向量。对于您的示例，T1 看起来像 [0,0,0,2,0]，这表明为了到达 4，您必须遵循到节点 2 的路径，然后获取到 4 的链接。

这是表示路径的一种相当简单的方法。如果您需要找到两个向量之间的差异，您可以逐元素比较它们或在两个向量之间进行异或。如果您采用这种差异，您会发现差异是具有不同父节点的节点。

# android - 从已经打开的活动中的通知中接收意图？

> ID：13123418
> 
> 赞同：3
> 
> 时间：2012-10-29T14:17:41.207
> 
> 标签：android

我有一个使用以下代码创建通知的活动：

```
Notification notification = new Notification(icon,
                        tickerText, 0);
                notification.flags |= Notification.FLAG_AUTO_CANCEL;
                Context context = getApplicationContext();
                CharSequence contentText = getString(R.string.subtitle);
                Intent notificationIntent = new Intent(getBaseContext(),
                        MainActivity.class);
                notificationIntent.putExtra("num", Integer.toString(i));
                Intent deleteIntent = new Intent(getBaseContext(),
                        DeleteActivity.class);
                deleteIntent.putExtra("num", Integer.toString(i));
                PendingIntent contentIntent = PendingIntent.getActivity(
                        getBaseContext(), ran, notificationIntent, 0);
                PendingIntent deletePendingIntent = PendingIntent
                        .getActivity(getBaseContext(), ran, deleteIntent, 0);
                notification.setLatestEventInfo(context, text, contentText,
                        contentIntent);
                notification.deleteIntent = deletePendingIntent;
                final int NOTIF_ID = ran;
                mNotificationManager.notify(NOTIF_ID, notification); 
```

我保留了我的应用程序中当前显示的所有通知的列表。

单击通知时，它将打开 MainActivity。我在 onResume() 中有一些代码可以从列表中删除通知。这工作正常。

当通知被解除时，它会触发 DeleteActivity，这也会将其从我的列表中删除。这也很好用。

问题是，如果 MainActivity 已经打开，并且单击了通知，则 onResume() 不会再次运行，因此通知消失了，但它并没有从应用程序认为正在显示的通知列表中删除。

我想知道在收到意图时是否有任何方法可以执行特定的代码（甚至只是重新启动整个活动）。我知道我可以将它设置为使用 DeleteActivity，但我宁愿让它打开 MainActivity。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:25:38.133

您可以通过覆盖[onNewIntent](http://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29)来捕获 Activity 中的通知点击。这就是我在我的应用程序中所做的。

# c# - 获取包含 PdfTextField 的 PDF 页面

> ID：13123424
> 
> 赞同：0
> 
> 时间：2012-10-29T14:17:52.343
> 
> 标签：c#, .net, pdf, pdfsharp

我们需要获取包含特定 PdfTextField 的 PpdfPage，我们该怎么做呢？

代码：

```
PdfDocument document = PdfReader.Open("C:\\filex.pdf", PdfDocumentOpenMode.Modify);

// Get the root object of all interactive form fields
PdfAcroForm form = document.AcroForm;

// Get all form fields of the whole document
PdfAcroField.PdfAcroFieldCollection fields = form.Fields;

PdfTextField textfield1= (PdfTextField)fields["textfield1"];

//how to get the correct page reference respect the especified field?
PdfPage page = textfield1.Owner.Pages[???]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:46:47.353

最后我们解决了它创建这个函数：

```
 protected int PaginaCampo(string campofirma, PdfDocument document)
{
    for (int i = 0; i < document.Pages.Count; i++)
    {
        PdfAnnotations anotations = document.Pages[i].Annotations;
        for (int j = 0; j < anotations.Count; j++)
        {
            if (anotations[j].Title != campofirma) continue;
            return i;
        }
    }
    return -1;
} 
```

不是最好的解决方案，但它有效......如果有人添加了更好的解决方案，我们将为他/她提供正确的答案

# android - 循环时监听按钮

> ID：13123429
> 
> 赞同：3
> 
> 时间：2012-10-29T14:18:07.863
> 
> 标签：android, loops

我的节拍器应用程序有问题。应用程序需要在按下开始按钮时循环，并继续循环直到按下停止按钮。我试过循环调用方法，但它甚至不听按钮，因为它卡在循环中。我目前的代码是。

```
public class MainActivity extends Activity {
    // constant
    final int MINUTE = 60000;

    // variables
    SeekBar seekbar1, seekbar2;
    EditText txtBPM1, txtBPM2;
    Spinner spnTop, spnBottom;
    int value1, value2;
    boolean playing = false;
    int tick;
    int beat;
    SoundPool sp;

    // loop variable
    int i = 0;
    int tickCount = 0;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        sp = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);
        tick = sp.load(this, R.raw.tick, 1);
        beat = sp.load(this, R.raw.beat, 1);

        final Spinner spnTop = (Spinner) findViewById(R.id.spnTop);
        // Create an ArrayAdapter using the string array and a default spinner
        // layout
        ArrayAdapter<CharSequence> adapter1 = ArrayAdapter.createFromResource(
                this, R.array.times1, android.R.layout.simple_spinner_item);
        // Specify the layout to use when the list of choices appears
        adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        // Apply the adapter to the spinner
        spnTop.setAdapter(adapter1);
        spnTop.setSelection(2);

        final Spinner spnBottom = (Spinner) findViewById(R.id.spnBottom);
        // Create an ArrayAdapter using the string array and a default spinner
        // layout
        ArrayAdapter<CharSequence> adapter2 = ArrayAdapter.createFromResource(
                this, R.array.times2, android.R.layout.simple_spinner_item);
        // Specify the layout to use when the list of choices appears
        adapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        // Apply the adapter to the spinner
        spnBottom.setAdapter(adapter2);

          ////////////////////////////////////////////////
         //Seekbar/EditText//////////////////////////////
        ////////////////////////////////////////////////
        seekbar1 = (SeekBar) findViewById(R.id.skbBPM1);
        txtBPM1 = (EditText) findViewById(R.id.txtBPM1);

        txtBPM1.setText("" + 120, TextView.BufferType.EDITABLE);

        seekbar1.setVerticalScrollbarPosition(value1);

        seekbar1.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
            public void onProgressChanged(SeekBar seekbar, int progress,
                    boolean fromUser) {
                value1 = progress + 30;
                txtBPM1.setText("" + value1, TextView.BufferType.EDITABLE);
            }

            @Override
            public void onStartTrackingTouch(SeekBar arg0) {
                // TODO Auto-generated method stub
                // stops metronome if playing
                i = 1;
            }

            @Override
            public void onStopTrackingTouch(SeekBar arg0) {
                // set the textbox to a new value
                txtBPM1.setText("" + value1, TextView.BufferType.EDITABLE);
            }
        });

        Button btnStart1 = (Button) findViewById(R.id.btnStart1);
        btnStart1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                value1 = Integer.parseInt(txtBPM1.getText().toString());
                if (value1 > 250 || value1 < 30) {
                    Toast.makeText(
                            getApplicationContext(),
                            "BPM value must be at least 30 and no more than 250.",
                            Toast.LENGTH_LONG).show();
                } else {
                    // set frequency and timers

                    int tickTime = MINUTE / value1;
                    int n = Integer.parseInt(spnBottom.getSelectedItem()
                            .toString());
                    int beat = Integer.parseInt(spnTop.getSelectedItem()
                            .toString());

                    tickTime = (tickTime * 4) / n;

                    // loop to play sound every specified incriment
                    for (i = 0; i > 0; i += 0)
                    {
                        tickCount++;
                        if (tickCount == beat) {
                            try
                            {
                                Thread.sleep(tickTime);
                            }
                            catch (InterruptedException e)
                            {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                            sp.play(beat, 1, 1, 0, 0, 1);
                            tickCount = 0;
                            }
                        else
                        {
                            try
                            {
                                Thread.sleep(tickTime);
                            }
                            catch (InterruptedException e)
                            {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }//end catch
                            sp.play(tick, 1, 1, 0, 0, 1);
                            tickCount++;

                        }//end else
                    }//end loop
                }//end else
            }
        });

        Button btnStop1 = (Button) findViewById(R.id.btnStop1);
        btnStop1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                if (playing == true) {
                    i = 1;
                } else {
                    Toast.makeText(
                            getApplicationContext(),
                            "Metrenome is not playing. To begin playing press the Start button.",
                            Toast.LENGTH_LONG).show();
                }
            }
        });

        //////////////////////////////////////////////
        //Second spinner boxes/buttons////////////////
        //////////////////////////////////////////////
        /*
        seekbar2 = (SeekBar) findViewById(R.id.skbBPM2);
        txtBPM2 = (EditText) findViewById(R.id.txtBPM2);

        txtBPM2.setText("" + 120, TextView.BufferType.EDITABLE);

        value2 = Integer.parseInt(txtBPM2.getText().toString());

        seekbar2.setVerticalScrollbarPosition(value2);

        seekbar2.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
            public void onProgressChanged(SeekBar seekbar, int progress,
                    boolean fromUser) {
                value2 = progress + 30;
                txtBPM2.setText("" + value2, TextView.BufferType.EDITABLE);
            }

            @Override
            public void onStartTrackingTouch(SeekBar arg0) {
                // TODO Auto-generated method stub
                // Nothing happens
            }

            @Override
            public void onStopTrackingTouch(SeekBar arg0) {
                // set the textbox to a new value
                txtBPM2.setText("" + value2, TextView.BufferType.EDITABLE);
            }
        });
            */
    }// end onCreate
}// end class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:25:03.347

我很确定你做错了什么是在 UI 线程中启动一个循环。当您在 UI 线程中执行全职操作时 - 您会阻止所有按钮并且它们不再可点击。您应该做的是启动 AsyncTask 或 FutureTask （异步实现可能更容易）并在“停止按钮”上中断并取消它。在您的循环中，您必须检查 Thread.getCurrentThread().isInterrupted() 以便它可以尽快停止。

我会给你一些伪代码：

```
 onStartClickListener{
        onClick(){
            //make some checks (if (value1 > 250 || value1 < 30) etc..)
            myTask = new MyTask();
            myTask.execute();
        }
    }

    onStopClickListener{
        onClick(){
            myTask.cancel(true);
        }
    }

    class MyTask extends AsyncTask<Void,Void,Void>{
        doInBackground(){
            while(true){
                // WE ARE IN DIFFERENT (non UI) thread in this method

                // looping and playing sound or whatever else you want
                // remember you cant do UI actions here
                // when you want to update UI from here you need to do a mHandler = new Handler()
                // in onCreate and do mHandler.post(new Runnable()) here
                if (Thread.currentThread().isInterrupted()) break;
            }
        }

        onPostExecute(){
            // use it when you want to update UI when background task was finished
        }

        onCancelled(){
            // use it when you want to update UI when task was canceled. This is your case I think.
        }
    } 
```

希望有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:22:53.720

似乎循环和事件处理程序可能正在使用同一个线程，因此线程卡在循环中并拒绝将控制权交给事件处理程序。

我的建议是在新线程中启动循环，以便留给 UI 线程来执行事件处理。如果这样做，事件处理程序将在 UI 线程上处理，并且循环将继续在单独的线程上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:34:39.307

您可以使用线程来执行此操作。这是一个很好的教程：

[http://www.vogella.com/articles/JavaConcurrency/article.html](http://www.vogella.com/articles/JavaConcurrency/article.html)

```
// create a thread to execute the metronome tick
ThreadPoolExecutor threadPoolExecutor = Executors.newSingleThreadExecutor();
Runnable makeTheMetronomeTick = new Runnable();

// add the thread to the thread pool:
Future makeTheMetronomeTickFuture = threadPoolExecutor.submit(makeTheMetronomeTick );

...

// when you want to cancel it
makeTheMetronomeTickFuture.cancel(true); 
```

# blackberry-10 - 如何使用级联以编程方式在 BlackBerry 10 上截屏？

> ID：13123438
> 
> 赞同：1
> 
> 时间：2012-10-29T14:18:51.873
> 
> 标签：blackberry-10, blackberry-cascades

是否可以使用 Blackberry 10 cascades API 截取屏幕截图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T08:37:48.983

屏幕截图 API 现在在 SDK 10.2 Beta 上：[*http*](http://developer.blackberry.com/cascades/reference/bb__system__screenshot.html) [:](http://developer.blackberry.com/cascades/reference/bb__system__screenshot.html) [//developer.blackberry.com/cascades/reference/bb_system_screenshot.html](http://developer.blackberry.com/cascades/reference/bb__system__screenshot.html)

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T15:49:29.727

目前这是不可能的，但正在考虑在发布后进行。*

# javascript - JS Flot 图表：具有相同数据的 2 个 y 轴。一个带有数字数据，一个带有百分比

> ID：13123443
> 
> 赞同：5
> 
> 时间：2012-10-29T14:19:12.840
> 
> 标签：javascript, charts, flot

我正在尝试用[Flot](http://www.flotcharts.org/)重新创建这样的东西：

![在此处输入图像描述](../Images/faae1971d7dd659f94229970eea0f6ae.png)

左侧 y 轴代表金钱，右侧 y 轴是基于目标的百分比（绿线）

所以在这个例子中，目标是 20000 美元（100%），所以右 y 轴需要对齐。

我设法得到了这个**[jsFiddle](http://jsfiddle.net/Rr7vT/9/)**，但如您所见，显示百分比的右侧 y 轴与真实数据没有“对齐”。

格式化轴不是问题：

```
var percFormatter = function(val, axis) {
    return (val * 100).toFixed() + '%';
} 
```

但是我怎样才能让一个系列相对于两个轴呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:39:19.760

您可以绘制绘图以获得第一个轴的最大值。然后使用第二个轴的新最大值编辑选项。两个轴的最小值始终为 0。

```
var plot = $.plot($("#placeholder"), [series.money, series.goal], options);

options.yaxes[1].max = plot.getYAxes()[0].max;

$.plot($("#placeholder"), [series.money, series.goal], options); 
```

它正在处理我的一些评论：http: [//jsfiddle.net/LXrLf/1/](http://jsfiddle.net/LXrLf/1/)

# css - 请解释移动 Safari 中的文本对齐怪异

> ID：13123444
> 
> 赞同：3
> 
> 时间：2012-10-29T14:19:14.377
> 
> 标签：css, mobile-safari, text-alignment

我有一个简单的登录表单，其中包含一个“取消”按钮，使用以下代码创建：

```
var cancelButton = document.createElement("input"); 
cancelButton.setAttribute('type',"button");
cancelButton.setAttribute('value',"Cancel");
cancelButton.setAttribute("id", "user-cancel-button"); 
```

按钮的css如下：

```
#user-cancel-button{
  left: 3px;
  top:3px;
  text-align: center;   
  position: absolute; 
```

}

在每个桌面浏览器中它看起来都很好，但是，在 Mobile safari 中，“取消”文本总是向右对齐（即使我设置了 text-align: left）。

另一方面，如果我为按钮添加一些填充（填充：1px），它会在移动 safari 中呈现。谁能解释发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-06T03:27:35.617

尝试这样做：

```
<button id="user-cancel-button"><div align="center">cancel</div><button> 
```

这应该可以解决移动 safari 的问题。

# java - 永久设置 DatePickerDialog 标题

> ID：13123445
> 
> 赞同：17
> 
> 时间：2012-10-29T14:19:16.093
> 
> 标签：java, android

当我尝试永久设置 DatePickerDialog 标题时遇到问题。

DatePickerFragment.java

```
public class DatePickerFragment extends DialogFragment implements DatePickerDialog.OnDateSetListener {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {

    // Use the current date as the default date in the picker
    final Calendar c = Calendar.getInstance();
    int year = c.get(Calendar.YEAR);
    int month = c.get(Calendar.MONTH);
    int day = c.get(Calendar.DAY_OF_MONTH);

    // Create a new instance of DatePickerDialog and return it
    DatePickerDialog dpd = new DatePickerDialog(getActivity(), this, year, month, day);
    dpd.setTitle("set date");
    return dpd;
    }

    public void onDateSet(DatePicker view, int year, int month, int day) {
    // Do something with the date chosen by the user
    }
} 
```

MainActivity.java

```
public class MainActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button btn = (Button) findViewById(R.id.button1);

        btn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                DialogFragment newFragment = new DatePickerFragment();
                newFragment.show(getSupportFragmentManager(), "datePicker");

            }
        });
    }
} 
```

当我单击按钮 DatePickerDialog 显示并且对话框标题是“设置日期”但是当我更改日期时，标题包含选定日期而不是“设置日期”。如何永久设置此对话框标题？

在 API 8-10 上测试。

提前谢谢你，对不起我的英语。帕特里克

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-29T14:46:45.030

如何扩展`DatePickerDialog`和添加一种`setPermanentTitle`方法来存储在日期更改时将强制执行的永久标题？

```
public class MyDatePickerDialog extends DatePickerDialog {

    private CharSequence title;

    public MyDatePickerDialog(Context context, OnDateSetListener callBack, int year, int monthOfYear, int dayOfMonth) {
        super(context, callBack, year, monthOfYear, dayOfMonth);
    }

    public void setPermanentTitle(CharSequence title) {
        this.title = title;
        setTitle(title);
    }

    @Override
    public void onDateChanged(DatePicker view, int year, int month, int day) {
        super.onDateChanged(view, year, month, day);
        setTitle(title);
    }
} 
```

然后使用新`setPermanentTitle`方法：

```
 MyDatePickerDialog dpd = new MyDatePickerDialog(this, null, 2012, 10, 10);
    dpd.setPermanentTitle("set date"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-25T12:00:31.027

扩展 DatePickerDialog 并覆盖 setTitle() 方法。

```
public class MyDatePickerDialog extends DatePickerDialog {

   public MyDatePickerDialog(Context context, OnDateSetListener callBack, int year, int monthOfYear, int dayOfMonth) {
       super(context, callBack, year, monthOfYear, dayOfMonth);
   }

   public void setTitle(CharSequence title) {
       super.setTitle(*<whatever title you want>*);
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-17T11:39:24.093

您始终可以使用 a`AlertDialog`并调用`setView`传递`DatePicker`.

请参见下面的示例代码：

```
DatePicker datePicker = new DatePicker(getActivity());
    datePicker.setCalendarViewShown(false);

new AlertDialog.Builder(getActivity())
    .setTitle("Your title")
    .setView(datePicker)
    .create().show(); 
```

这将确保标题仅由您设置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-10T17:53:52.223

创建自定义标题，如下所示：

```
TextView title = new TextView(getActivity());
title.setText(getResources().getString(R.string.calendar_start_title));
datePickerDialog.setCustomTitle(title); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-16T15:26:04.660

考虑到小屏幕上的用户体验，我建议不要永久保留标题。这是对约翰代码的修改：

```
public class MyDatePickerDialog extends DatePickerDialog {

    private CharSequence title;

    public MyDatePickerDialog(Context context, OnDateSetListener callBack, int year, int monthOfYear, int dayOfMonth, CharSequence title) {
        super(context, callBack, year, monthOfYear, dayOfMonth);
        this.title = title;
        setTitle(title);
    }

    @Override
    public void onDateChanged(DatePicker view, int year, int month, int day) {
        super.onDateChanged(view, year, month, day);
        if (getDatePicker().getCalendarViewShown()) {
            setTitle(title);
        }
    }
} 
```

并调用`DatePickerDialog`如下：

```
MyDatePickerDialog datePickerDialog = new MyDatePickerDialog(this, null, 2012, 10, 10, "My Title"); 
```

# java - 如何从列表中过滤元素

> ID：13123449
> 
> 赞同：3
> 
> 时间：2012-10-29T14:19:34.063
> 
> 标签：java, guava

我正在尝试实现一个相当简单的方法，我想在其中过滤列表。这是一个 File 对象的列表，并且应该只有一个以 .asp 结尾的文件——我希望将那个从列表中排除。请记住，我实际上并不想从列表中删除此文件，我只是希望能够在该列表的特定迭代中忽略它。

我原来的（蛮力）实现是这样的：

```
public List<File> getSurveyFiles() throws Exception {
    List<File> surveyFiles = new ArrayList<File>(files.size() - 1);

    for ( File f : files ) {
        if ( !f.getName().endsWith(".asp") ) {
            surveyFiles.add(f);
        }
    }

    return surveyFiles;
} 
```

它有效，但感觉非常浪费，因为我正在创建第二个列表并从一个列表复制到另一个列表。

我玩过的另一个选择是使用 guava-libraries (http://code.google.com/p/guava-libraries/) 并利用它们的过滤器功能，如下所示：

```
public class SurveyFileControllerPredicate implements Predicate<File> {

    @Override
    public boolean apply(File file) {
        return file.getName().endsWith(".asp");
    }
}

...

public Iterable<File> getSurveyFiles() throws Exception {

    return Iterables.filter(
        files,
        Predicates.not(new SurveyFileControllerPredicate())    
    );

} 
```

过滤器的实现是在迭代的时候，而不是提前删除.asp文件，所以这段代码的好处是不用再做第二个List，但是我觉得它让我的代码更复杂了。

还有其他我没有考虑的更简单的实现吗？

在整个方案中，我选择哪种实现可能并不重要。我只是好奇其他开发人员将如何解决这个问题以及他们会选择什么选项。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T15:48:06.207

您可以使用该函数组成一个正则表达式匹配谓词`toString()`：

```
public Iterable<File> getSurveyFiles() {
  return Iterables.filter(files, Predicates.compose(
      Predicates.not(Predicates.containsPattern("\\.asp$")),
      Functions.toStringFunction()));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T14:50:11.647

在某些时候，我给自己写了两个非常通用的帮助类来处理这样的问题：

```
public abstract class IteratorFilter<E> implements Iterator<E> {
  private final Iterator<E> iterator;

  private E next = null;

  public IteratorFilter(Iterator<E> iterator) {
    this.iterator = iterator;
  }

  @Override
  public boolean hasNext() {
    if (next!=null) return true;
    while (iterator.hasNext()) {
      next = iterator.next();
      if (keep(next)) return true;
    }
    return false;
  }

  @Override
  public E next() {
    if (next==null)
      do next = iterator.next(); while (!keep(next));
    E result = next;
    next = null;
    return result;
  }

  @Override
  public void remove() {
    iterator.remove(); // Specs require: throw new UnsupportedOperationException();
  }

  protected abstract boolean keep(E item);
} 
```

和：

```
public abstract class IterableFilter<T> implements Iterable<T> {

  private final Iterable<T> iterable;

  public IterableFilter(Iterable<T> iterable) {
    this.iterable = iterable;
  }

  @Override
  public Iterator<T> iterator() {
    return new IteratorFilter<T>(iterable.iterator()) {
      @Override
      protected boolean keep(T item) {
        return IterableFilter.this.keep(item);
      }
    };
  }

  protected abstract boolean keep(T item);
} 
```

有了这些，你可以简单地做到这一点：

```
public Iterable<File> getSurveyFiles() {
  return new IterableFilter<File>(files) {
    @Override
    protected boolean keep(File item) {
      return !item.getName().endsWith(".asp");
    }
  };
} 
```

它与 Guava Predicate 方法基本相同，不同之处在于您不需要跟踪谓词对象并且不引入新的库依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-05T00:07:07.690

如果您愿意在迭代站点编写过滤（而不是编写返回过滤副本或视图的函数），Java 8 流使这变得非常简单：

```
files.stream().filter(f -> !f.getName().endsWith(".asp")).forEachOrdered(f -> {
    //process file f
}); 
```

如果只在少数几个地方做这个过滤，这比写一个返回过滤后的副本或视图的方法更简洁，并保持过滤操作靠近使用过滤列表的地方。如果您在许多地方执行此过滤，并且以后可能希望以不同的方式过滤列表，那么编写一个方法可能会更好——但它可以是一个返回 Stream 的方法：

```
public Stream<File> getSurveyFiles() {
    return files.stream().filter(f -> !f.getName().endsWith(".asp"));
} 
```

然后，您可以调用`forEachOrdered`返回值。如果您需要非流操作，请调用`iterator`以获取迭代器或`.collect(Collectors.toList())`获取列表的过滤副本。

# c++builder - 没有匹配的 DOM 供应商

> ID：13123450
> 
> 赞同：1
> 
> 时间：2012-10-29T14:19:36.347
> 
> 标签：c++builder

我正在开发一个与 SOAP 服务通信的 C++ 应用程序。客户端已在 C++ Builder 中从提供的 WSDL 生成，它在开发机器上运行良好。

但是在其他几台机器上，它失败并显示消息：没有匹配的 DOM 供应商：“”

谷歌上的一些搜索指向 msxml 库或那里的初始化问题，但我无法解决它。我还检查了服务器流量，但应用程序从不发送任何请求。

有什么想法会导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:08:22.807

将 xmlrtl 包添加到运行时包列表解决了该问题。

# ruby-on-rails - Rails 中的两层模型和控制器

> ID：13123451
> 
> 赞同：0
> 
> 时间：2012-10-29T14:19:41.780
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller

Rails 新手，很难想象如何进行项目。我想创建一个简单的页面，其中用户：

a) 选择一个“项目”，发送到项目页面 b) 从项目页面，可以重复查询一个 API 并得到结果

由于我仍在围绕脚手架并创建模型和控制器，我想知道以下是否有意义：

```
rails generate Project person:string
rails generate API_call title:string response:text 
```

我想我的问题是，如何将 API_call 表中的条目链接到特定项目？这是“参考”选项吗？

提前谢谢了...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:35:40.050

您的脚手架命令不正确。生成完整资源：

```
rails g scaffold Project person:string 
```

这将生成模型、控制器、迁移、视图等。

只生成一个模型：

```
rails g model ApiCall title:string response:text 
```

要列出其他生成器，请运行

```
rails g 
```

注意：您可以使用`g`或`generator`

对于关联对象，您需要使用关联。请查看此链接以获取基本概念[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)。如果您想使用它，则没有其他选择可以学习文档。

# visual-studio-2012 - Visual Studio 2012 层图

> ID：13123452
> 
> 赞同：1
> 
> 时间：2012-10-29T14:19:54.277
> 
> 标签：visual-studio-2012, data-modeling

我非常喜欢 VS 中的建模工具，在过去的几个月里，我一直面临着哼哼让我们称之为颜色上下文问题。好吧，让我们更具体一点，假设我使用图层图，我将一个图层框拖到画布上，它的默认颜色是蓝色，161| 199| 231.

但是当你保存它时，关闭图表并重新打开它，它会变成白色！颜色变成238| 238| 253.

这也发生在其他符号上，例如注释框、依赖箭头……

任何人都面临类似的问题？我最初认为更新会解决这个问题，或者可能是 VisualSVN 集成的一些问题.. 不知道。提前致谢。

# javascript - Javascript没有获取属性值

> ID：13123453
> 
> 赞同：1
> 
> 时间：2012-10-29T14:19:53.367
> 
> 标签：javascript, jquery, ruby-on-rails

多亏了这里的帮助，我得到了一段示例代码，当我尝试将它应用到真实的东西时，有些东西不能正常工作。

在我看来（new.html.erb），我有以下内容：

```
<%= f.hidden_field :addtl_attendee_payment, :value => Addtl_attendee_charge %> 
```

（addtl_attendee_charge 来自配置文件）

在我的 javascript 文件中，我有以下内容：

```
function display_value() {
    var a = $("#addtl_attendee_payment");
    alert(a.val());
} 
```

在我的 new.html.erb 的另一个位置，我有以下内容：

```
<script><%= "display_value()" %></script> 
```

当我运行它时，我在警报框中得到“未定义”。如果我查看 HTML（使用萤火虫），这就是我得到的：

```
<input id="payment_addtl_attendee_payment" type="hidden" value="500" name="payment[addtl_attendee_payment]"> 
```

付款是型号名称。这与适用于测试代码的代码类型相同。有任何想法吗？

# 笔记：

再次注意模型名称是 Payment，虽然我没有在属性名称中添加 payment，但 Rails 自动添加了它。我确实尝试了 javascript 文件的另一种变体：

```
function display_value() {
    var a = $("#payment_addtl_attendee_payment");
    alert(a.val());
} 
```

但这也不起作用（得到相同的消息）。我认为添加 payment_ 是正常的，是由 Rails 完成的（但我可能是错的，作为一个新手）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T14:20:58.707

请注意，您在呈现的标记中有不同的 ID：

```
var a = $("#payment_addtl_attendee_payment"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:40:30.897

嗨，如果您的 ID 是固定的，那么您可以使用

```
 var a = $("#payment_addtl_attendee_payment"); 
```

获取价值，或者您可以使用这段代码

```
 var a = $("#_addtl_attendee_payment"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T18:29:43.273

为什么不能为隐藏字段添加唯一的类属性并通过它访问值。

```
<%= f.hidden_field :addtl_attendee_payment, :class="some_unique_class_id", :value => Addtl_attendee_charge %> 
```

您可以访问以下值。

```
function display_value() {
    var a = $(".some_unique_class_id");
    alert(a.val());
} 
```

# java - JVM锯齿空闲进程

> ID：13123457
> 
> 赞同：3
> 
> 时间：2012-10-29T14:20:26.260
> 
> 标签：java, garbage-collection, jvm

我目前正在进行一项涉及 JVM 以及它的内存使用如何工作的研究。我不明白的是，JVM 在空闲时用什么填充它的内存，只是为了在几乎达到堆时释放它？为什么没有一条平坦的已用内存线？顺便说一句，这个 java 应用程序托管在 glassfish 上，但是当我只有一个简单的“hello world”swing 应用程序时，我有相同的图表。所以 GlassFish 不必对它做任何事情。

![在此处输入图像描述](../Images/33c09c1c7242c694064c4c818c26e8b6.png)

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T14:34:51.080

> JVM在空闲时用什么填充它的内存，只是在几乎达到堆时释放它？

如果您的应用程序真正空闲，最可能的情况是 VisualVM。尝试降低采样率，看看消耗的速率内存是否也会下降。

> 为什么没有一条平坦的已用内存线？

JMX 是用 Java 编写的，因此当它收集统计数据并序列化数据时，会产生相当多的垃圾。您可以打开内存分析以确认所有内存消耗都与 JMX 和 VisualVM 相关。如果您使用使用本机代理来监控 JVM 的商业分析器，您不会看到此行为。例如YourKit 不这样做。

# apache-flex - ComboBoxEditor 中的选择更改在 DataGrid 中选择的行

> ID：13123458
> 
> 赞同：1
> 
> 时间：2012-10-29T14:20:27.443
> 
> 标签：apache-flex, internet-explorer, advanceddatagrid, itemeditor

## 这是一个很好的问题：

我有一个带有 Combobox 作为 ItemEditor 的 AdvancedDatagrid（直到那里，没有问题......）。这个 ComboBoxEditor 得到这个行为：**选择 = 关闭编辑器**

## 但

当我单击 ComboBox 中的一个值时，它会选择它并根据需要关闭，但单击也会将选择放在下面的数据网格行中，然后打开该行的编辑器。

此评论仅在*Internet Explorer* (8 & 9)中出现

知道为什么 IE 会这样，更重要的是，如何解决这个问题？

非常感谢

# security - 可以通过发送 NULL 字节绕过 recaptcha 吗？

> ID：13123469
> 
> 赞同：3
> 
> 时间：2012-10-29T14:20:51.740
> 
> 标签：security, recaptcha

我们正在运行 Atomic Secured Linux，它一直在捕获在 recaptcha_response_field 中发送 NULL 字节的帖子。有问题的帖子肯定是垃圾邮件，但唯一获得空字节的字段是“recaptcha_response_field”。特别是，以下内容在 POST 正文中出现两次：

```
recaptcha_response_field=%00%00%00%00%00%00%00%00 
```

我想知道这是否是针对 recaptcha 的已知攻击，或者是已知的破坏 Web 服务器的方法。如果是这样，它打算做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:07:27.790

我不这么认为，至少在recaptcha后端不是。Google 非常重视安全，尤其是在公共服务方面。所以你的 recaptcha 实现，它与谷歌后端通信可能是可攻击的，但我仍然不这么认为。

**去尝试一下。记录每次尝试，您将查看 NULL 是否成功。**

# visual-studio-2012 - VS 2012 中的格式代码（Strg K + D）

> ID：13123479
> 
> 赞同：1
> 
> 时间：2012-10-29T14:21:29.487
> 
> 标签：visual-studio-2012

如果我在 VS2010 中按`STRG` `K`+ `D`，代码（例如 HTML、ASPX）将被格式化，空行将被删除。

如果我在 VS2012 中使用此快捷方式，则不会删除空行。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:35:10.130

我使用以下组合在 VS2012 中自动格式化我的代码的缩进。

`Ctrl`+`A`选择要格式化的文件中的所有代码。或者您可以只选择一段代码。

`Ctrl`+ `K`，然后`Ctrl`+`F` 将使用适当的缩进格式化代码。

虽然没有删除空行。

# javascript - 谷歌地图信息窗口中的jqGrid？

> ID：13123490
> 
> 赞同：0
> 
> 时间：2012-10-29T14:22:28.100
> 
> 标签：javascript, google-maps, jqgrid

我试图在 Google 地图的 InfoWindow 中使用 jqGrid，但不知何故我无法使其工作。

我有以下代码：

```
function infoClosure(map, marker, val) {
    return function() {
        content = [];

        content.push('<div class="infowin">');
        content.push('<table id="list1"></table>');
        content.push('<div id="pager1"></div>');
        content.push('<script type="text/javascript">');
        content.push('jQuery("#list1").jqGrid({');
        content.push('url:"getdata.php?lat=' + val.lat + '&long=' + val.long + '",');
        content.push('datatype: "xml",');
        content.push('colNames:["Project id","Project name"],');
        content.push('colModel:[');
        content.push('{name:"projectID",index:"projectID", width:75}');
        content.push('],');
        content.push('rowNum:10,');
        content.push('autowidth: true,');
        content.push('rowList:[10,20,30],');
        content.push('pager: "#pager1",');
        content.push('sortname: "id",');
        content.push('viewrecords: true,');
        content.push('sortorder: "desc",');
        content.push('caption:"Current projects"');
        content.push('});');
        content.push('jQuery("#list1").jqGrid("navGrid","#pager1",{edit:false,add:false,del:false});');
        content.push('</script>');

        infoWindow.setContent(content.join(''));
        infoWindow.open(map, marker);
    }
} 
```

我们正在使用`content.push`将 jqGrid 的 java 脚本位传递到信息窗口，但这样的代码使谷歌地图无法显示。

知道如何使它工作吗？

问候，卡洛斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:22:59.187

我错过了代码中第二列（“项目名称”）的定义`colModel`。而且你有`sortname: "id"`而不是可能`sortname: "projectID"`。我建议你也包括额外的`gridview: true`选项。

下一个问题是`<div class="infowin">`不会关闭。您使用的 HTML 片段是

```
<div class="infowin">
    <table id="list1"></table>
    <div id="pager1"></div>
??? where is </div> ??? 
```

我建议您另外做的是先调试网格*而不*动态创建代码。我的意思是，您也可以像通常那样创建*静态创建 jqGrid。* `<div class="infowin"><table id="list1"></table><div id="pager1"></div></div>`只有在代码工作后，您才能包含一行代码，**将**网格移动到`infoWindow`其中`infoWindow.setContent`：

```
infoWindow.setContent($("#list1").closest(".infowin")[0]); // move div over grid 
```

# powershell - 使用 powershell 自动执行 Splunk oneshot 命令

> ID：13123491
> 
> 赞同：1
> 
> 时间：2012-10-29T14:22:30.613
> 
> 标签：powershell, splunk

我正在尝试编写一个 powershell 脚本来自动化 Splunk 的`oneshot`命令，该命令将明确地重新索引包含在受监视目录中的日志文件。给定一个日期范围，脚本将遍历保存日志文件的目录，并`oneshot`为每个以该日期为目标的文件执行一次（通常每天有 50 到 110 个左右）。无论如何，我绝对不是你所说的“powershell guru”，这就是把我带到这里的原因。

仔细观察时，`Invoke-Expression` [似乎](http://screencast.com/t/L8rpy63fDeeN)每次调用它时都会启动一个单独的 cmd.exe 实例。这会导致 splunkd 守护程序崩溃，或者导致 cmd.exe 崩溃。

话虽这么说，是否有更好的替代方案来使用`Invoke-Expression`？看来我的脚本在触发下一个表达式之前并没有等待每个调用的表达式完成，这对服务器造成了不利影响。我已经读过在使用`Invoke-Expression`调用外部非控制台应用程序时会发生这种情况。在这种情况下，我调用 splunk.exe 来执行命令，所以这是有道理的。

我正在考虑使用脚本主机而不是使用`Invoke-Expression`，但首先想向 StackOverflow 的专业人士询问一些潜在的替代方案 :)

话虽这么说，过去有没有人遇到过类似的问题，如果有的话，你有什么替代方案？或者，是否有其他我可以使用的 powershell 工具来代替`Invoke-Expression`它，不仅可以完成这项工作，而且可以提供更稳定的执行？非常感谢任何帮助/建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:55:50.123

尝试以下方法：

```
& cmd /c "full path to splunk.exe" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T23:58:57.753

您没有尝试使用 Splunk CLI 从命令中执行“oneshot”，而是查看了 Splunk Powershell 资源工具包？

[https://github.com/splunk/splunk-reskit-powershell](https://github.com/splunk/splunk-reskit-powershell)

# macos - aptana 无法从 mac 打开网络驱动器上的项目

> ID：13123496
> 
> 赞同：0
> 
> 时间：2012-10-29T14:23:11.740
> 
> 标签：macos, networking, project, aptana, drive

当我尝试打开我的项目时，我收到以下错误消息：

缺少“项目名称”的项目描述文件 (.project)。该文件包含有关项目的重要信息。在恢复此文件之前，该项目将无法正常运行。

我使用的是 Mac（OS 10.8.2），项目代码 php 文件驻留在网络驱动器上，而不是我的本地驱动器上。

我应该如何设置我的项目，以免出现这些错误？
一些背景知识： - 上周我没有收到这个错误，这个星期一早上我是，上周我升级了我的 mac OS，所以可能那里发生了一些事情，或者可能与我通过 wifi 连接的事实有关现在，也许上周我不是，我不确定。

理想情况下，我想我会从本地驱动器上运行一个本地副本，然后将我的代码更改通过 git 推送到公共开发服务器，然后再推送到生产环境，但这不是我们做事的方式，我不确定如何设置所有这些无论如何 - 该网站也如此参与，让一切从本地工作可能是一个真正的挑战。

那么，如何设置我的 aptana 项目，以便它在项目设置文件驻留在本地时从网络驱动器读取代码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T14:39:50.927

好的，没关系，我没有修复损坏的链接，而是将文件夹作为新项目导入，现在它可以像以前一样工作了。

# jquery - jQuery点击并显示点击的数据

> ID：13123499
> 
> 赞同：0
> 
> 时间：2012-10-29T14:23:33.853
> 
> 标签：jquery, click

我想在单击该行时显示该行的数据。我用 jQuery 做到了这一点，但我不确定如何使它更通用。现在我给第一行一个 id 和目标也一个 id，但是你怎么能在不为每一行使用不同的 id 的情况下为每一行做这个通用的呢？

```
$(document).ready(function () {
  $('#d01').click(function() {
  $('#c01').css('display', 'block');
  });
}); 
```

我的[小提琴](http://jsfiddle.net/hvNev/35/)。

希望我清楚....

问候，肯尼斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:29:07.470

为每一行分配一个类并处理该类的单击事件。为行分配 id 'd01'，为要显示的表分配 'd01_data'，并为可点击的元素分配一个类 'row'。

```
$(document).ready(function () {
  $('.row').click(function() {
    var table_id = '#'+$(this).attr('id')+'_data';
    $(table_id).show();
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:31:13.883

我会将`aside`您希望显示的唯一 ID 分配为`data-`每个可点击行上的隐藏属性：

```
<tr data-details="c01" class="customer">
...
<table id="c01" class="aside hidden"> 
```

[`.data('details')`](http://api.jquery.com/data/)然后，您可以使用并仅显示该表来提取它：

```
$(document).ready(function () {
    $('tr.customer').click(function() {
        var id = $(this).data('details');
        $('table.hidden').hide();
        $('#'+id).show();
    });
}); 
```

[http://jsfiddle.net/mblase75/7x3CZ/](http://jsfiddle.net/mblase75/7x3CZ/)

我更喜欢这种方法，因为它可以让您尽可能地将 HTML 与 JavaScript 分开，并让您可以灵活地根据自己的喜好分配 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:29:06.423

您可以在选择器中使用 CSS 类而不是 ID。

例如

```
...
<tr class="myClassToIndicateIWantThisClickable">...</tr>
... 
```

然后在你的 JS 中使用：

```
 $(document).ready(function () {
  $('.myClassToIndicateIWantThisClickable').click(function() {
  // do my stuff here
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T14:32:09.683

当您想在许多元素上放置相同的事件时，您可以使用类而不是 ID。

所以给每个`<tr>`一个类（例如class="clickable"），然后使用这个类绑定一个点击事件。单击元素后，您可以使用`this`关键字获取特定对象数据。

看到[这个](http://jsfiddle.net/hvNev/50/)小提琴。

**HTML：**

```
<table>
<thead>
    <tr class="grey">
        <th width="140px">Achternaam</th>
        <th width="80px">Initialen</th>
        <th width="80px">Tussenv.</th>
        <th width="80px">Geslacht</th>
        <th width="100px">Geb.dat.</th>
    </tr>
</thead>
<tbody>
    <tr id="d01" class="customer clickable">
        <td>Pietersen</td>
        <td>M.</td>
        <td>Van</td>
        <td>Male</td>
        <td>18-07-1956</td>
    </tr>
    <tr class="customer grey clickable">
        <td>Janssen</td>
        <td>A.</td>
        <td>&nbsp;</td>
        <td>Female</td>
        <td>16-12-1972</td>
    </tr>
    <tr class="customer clickable">
        <td>Puk</td>
        <td>P.L.</td>
        <td>Van der</td>
        <td>Female</td>
        <td>16-07-1965</td>
    </tr>
</tbody>
</table>
<br /><br />
<table id="c01" class="aside hidden">
    <tbody>
        <tr>
            <td width="115px">Achternaam</td>
            <td width="115px">Pietsersen</td>
        </tr>
        <tr>
            <td>Tussenvoegsel</td>
            <td>Van</td>
        </tr>
        <tr>
            <td>Initialen</td>
            <td>M.</td>
        </tr>
        <tr>
            <td>Geslacht</td>
            <td>Man</td>
        </tr>
        <tr>
            <td>Geboortedatum</td>
            <td>18-07-1956</td>
        </tr>
    </tbody>
</table> 
<table class="aside hidden">
    <tbody>
        <tr>
            <td width="115px">Achternaam</td>
            <td width="115px">Pietsersen</td>
        </tr>
        <tr>
            <td>Tussenvoegsel</td>
            <td>Van</td>
        </tr>
        <tr>
            <td>Initialen</td>
            <td>M.</td>
        </tr>
        <tr>
            <td>Geslacht</td>
            <td>Man</td>
        </tr>
        <tr>
            <td>Geboortedatum</td>
            <td>18-07-1956</td>
        </tr>
    </tbody>
</table>  
<table class="aside hidden">
    <tbody>
        <tr>
            <td width="115px">Achternaam</td>
            <td width="115px">Pietsersen</td>
        </tr>
        <tr>
            <td>Tussenvoegsel</td>
            <td>Van</td>
        </tr>
        <tr>
            <td>Initialen</td>
            <td>M.</td>
        </tr>
        <tr>
            <td>Geslacht</td>
            <td>Man</td>
        </tr>
        <tr>
            <td>Geboortedatum</td>
            <td>18-07-1956</td>
        </tr>
    </tbody>
</table>  ​ 
```

**JS：**

```
$(document).ready(function () {
    $('.clickable').click(function() {
        var $this = $(this);
        $this.find('td').each(function(){
         //inside the each loop, the 'this' keyword refers to the current <td>
         alert($(this).text());
        });
    $('#c01').css('display', 'block');
    });
});    
​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T14:36:34.320

试试这个，我已经更新了小提琴：

[工作文件](http://jsfiddle.net/hvNev/73/)

我给了

```
id=c01 
```

到

```
id=c03 
```

对于不同的表。并且还在表中添加了一个自定义字段，该字段具有需要显示的表 ID。

在每次 tr 单击时，都会显示您的表格。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-29T14:31:58.893

```
$(document).ready(function () {
 $('#anyid').click(function() {
 $(this).css('display', 'block');
 }); 
```

});

```
<tr id="anyid">
 <td>hello</td>
 <td>world</td>
</tr>
<tr id="anyid">
 <td>hello1</td>
 <td>world1</td>
</tr> 
```

# wordpress - wordpress 订购自定义帖子

> ID：13123507
> 
> 赞同：0
> 
> 时间：2012-10-29T14:24:32.440
> 
> 标签：wordpress

我究竟做错了什么...

这是一件很愚蠢的事情。

我想订购我的帖子，但无论我订购什么和订购什么，都没有任何效果！GRRR

```
<?php  
        $postCount = 0;   

        remove_filter('get_the_excerpt', 'replace_ellipsis');    
        remove_filter('excerpt_length', 'my_excerpt_length');

        add_filter('get_the_excerpt', 'replace_ellipsis2');    
        add_filter('excerpt_length', 'my_excerpt_length2');

        $args = array( 
            'post_type' => 'news', 
            'posts_per_page' => 9999,
            'order' => 'ASC',
        );                                                       

        $loop = new WP_Query( $args );
        while ( $loop->have_posts() ) : $loop->the_post();
        $postCount++; 
?>

            <div class = "anArticle" style = "<?php if(!$postCount % 3 == 1){ echo 'margin-right:0px;'; } ?>" onclick = "location.href='<?php echo the_permalink(); ?>';">
                <div class = "title"><a href = "<?php echo the_permalink(); ?>"><?php if(!get_field('short_title')){echo limit_length(get_the_title(), 48);}else{echo get_field('short_title') . '...';} ?></a></div>
                <div class = "theDate"><? the_time(get_option('date_format')); ?></div>                                                                                               
                <?php if(!get_field('caption')){the_excerpt();}else{the_field('caption'); echo '...';} ?> 
                <div class = "readMore"><a href = "<?php echo the_permalink(); ?>">Read more... </a></div>  
            </div> 
<?php
        endwhile;
?> 
```

有什么让你觉得愚蠢的事情吗？

您知道通常可以阻止帖子正确排序的任何事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:32:02.547

您没有指定要排序的字段——您只是想简单地说“按升序”而不说要使用哪个字段。

从这里改变它：

```
 $args = array( 
        'post_type' => 'news', 
        'posts_per_page' => 9999,
        'order' => 'ASC',
    ); 
```

对此：

```
 $args = array( 
        'post_type' => 'news', 
        'posts_per_page' => 9999,
        'order' => 'ASC',
        'orderby' => 'title',
    ); 
```

看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:42:44.083

needed to use get_posts

```
<?php      
    global $post;                                        
    $postCount = 0;  
    $args = array( 'post_type' => 'news', 'order' => 'DESC' );
    $myposts = get_posts( $args );                      

    remove_filter('get_the_excerpt', 'replace_ellipsis');    
    remove_filter('excerpt_length', 'my_excerpt_length');

    add_filter('get_the_excerpt', 'replace_ellipsis2');    
    add_filter('excerpt_length', 'my_excerpt_length2');

    foreach( $myposts as $post ) :  setup_postdata($post);

        $postCount++;

    ?>     
        <div class = "anArticle" style = "<?php if(!$postCount % 3 == 1){ echo 'margin-right:0px;'; } ?>" onclick = "location.href='<?php echo the_permalink(); ?>';">
            <div class = "title"><a href = "<?php echo the_permalink(); ?>"><?php if(!get_field('short_title')){echo limit_length(get_the_title(), 48);}else{echo get_field('short_title') . '...';} ?></a></div>
            <div class = "theDate"><? the_time(get_option('date_format')); ?></div>                                                                                               
            <?php if(!get_field('caption')){the_excerpt();}else{the_field('caption'); echo '...';} ?> 
            <div class = "readMore"><a href = "<?php echo the_permalink(); ?>">Read more... </a></div>  
        </div> 
    <?php endforeach;
?> 
```

# java - 使用 Mockito 模拟由 Spring 应用程序上下文创建的本地对象

> ID：13123510
> 
> 赞同：0
> 
> 时间：2012-10-29T14:24:40.197
> 
> 标签：java, spring, mockito

我正在尝试使用 Mockito 框架模拟一个本地对象，该对象是从 spring 应用程序上下文创建的；但是每次我运行应用程序时，它都无法用模拟对象替换原始对象。

这是原始类的代码尖峰：

```
public void executeMyJob(){
    ApplicationContext springContext = ApplicationContextUtil.getApplicationContext();

    MusicEAO music= (MusicEAO) springContext.getBean("MusicEAO");
    List<Brand> dataList =music.getAll();

    ......
} 
```

我想模拟，`MusicEAO`所以当`getAll()`调用该方法时，它将使用模拟对象。

下面是我的测试类代码片段：

```
@Mock
MusicEAO musicEAO;
when(musicEAO.findAll()).thenReturn(myDefinedList); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:54:32.310

很难从您发布的 cod 中分辨出来，但问题可能是您在测试中模拟 MusicEAO，但您正在执行的代码使用 Spring ApplicationContext 来获取对 MusicEAO bean 的引用。

您的原始类不应该使用`MusicEAO music= (MusicEAO) springContext.getBean("MusicEAO");`，而是让 Spring`@Autowired`通过构造函数或 setter 方法（或其他依赖注入方法）注入 bean。然后您的测试将能够轻松地注入模拟版本。

```
 class MyJobClass {

   MusicEAO music;

   @Autowired
   public MyJobClass(MusicEAO musicEao) {
      this.music = musicEao;
   }

   public void executeMyJob(){

       List<Brand> dataList =music.getAll();

       ......
   } 
} 
```

当你说

> 每次我运行应用程序时，它都无法用模拟对象替换原始对象

你不应该运行应用程序来运行这个类的单元测试——你是在问如何将模拟注入到正在运行的应用程序中？

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:07:55.023

这种方式行不通。在您当前的代码中：

*   以下实例是您的测试中的实例： `@Mock MusicEAO musicEAO;`

*   但是在您的生产代码中，您使用 Spring 来获取 Music 实例： `MusicEAO music= (MusicEAO) springContext.getBean("MusicEAO");`

您似乎没有对 spring 说您希望 Music mock 受到`MusicEAO`bean 名称的影响。

如果您正在进行单元测试，我会建议您避免弄乱 Spring，如果这是一个集成测试，那么您必须找到一种方法来创建模拟并将其传递给 Spring。

例如，您可以在 Spring 上下文中创建模拟，在您的测试中自动装配它。

此外，我不建议在这种情况下使用静态调用来获取 Spring 上下文以最终获得对`Music`对象的控制。它让我认为 Spring 是一个注册表，但事实并非如此。Spring是一个容器。相反，您应该尝试重构代码，使`Music`bean 连接（`@Autowired`、setter 等）在`ExecutionJob`.

然后使用 JUnit 和 Mockito 编写单元测试会更容易，并带有 和 之类的`@Mock`注释`@InjectMocks`。

希望有帮助。

# java - Java中的服务器客户端：无法启动客户端

> ID：13123513
> 
> 赞同：0
> 
> 时间：2012-10-29T14:24:50.133
> 
> 标签：java, multithreading, virtual-machine, working-directory

我编写了一个基于线程的微型 TCP 服务器和一个客户端，但我无法启动客户端。Java VM 似乎有问题。

```
chris@chris-UX31E:~/workspace/verteilte/build$ java Client localhost 9000 9002
Error occurred during initialization of VM
java.lang.Error: Properties init: Could not determine current working directory.
    at java.lang.System.initProperties(Native Method)
    at java.lang.System.initializeSystemClass(System.java:1115) 
```

环境/工作目录有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:52:21.603

记录在案：重新启动解决了问题。

# asp.net-mvc-4 - 添加后未在 ASP.Net MVC 4 应用程序上创建 .mdf 文件 Web.config 上的标记

> ID：13123515
> 
> 赞同：4
> 
> 时间：2012-10-29T14:25:02.223
> 
> 标签：asp.net-mvc-4

我正在尝试[ASP.Net MVC 4 教程](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-model)。当我添加以下代码并构建应用程序时，我期望 Movies.mdf 文件将在**解决方案资源管理器的****App_Data**文件夹下创建。但是，该目录中没有创建任何内容。知道为什么吗？

 **```
<connectionStrings>
  <add name="DefaultConnection" 
   connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-MvcMovie-2012213181139;Integrated Security=true" 
   providerName="System.Data.SqlClient"/>    
  <add name="MovieDBContext" 
   connectionString="Data Source= (LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\Movies.mdf;Integrated Security=True" 
   providerName="System.Data.SqlClient" /> 
 </connectionStrings> 
```

使用：.NET 框架 4 VS 2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:28:54.553

问题已经解决了。问题是项目的位置。我正在处理来自共享驱动器的文件，该驱动器显然没有在**App_Data**文件夹中创建数据库。连接字符串代码绝对没问题，因为它在教程中显示，不需要更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-25T18:09:59.550

在我的机器上拥有一个完整的 MS SQL 2012 实例，而不是 SqlExpress，我遇到了这个问题。我发现通过让应用程序继续运行（而不是在 VS 捕获异常时在 Visual Studio 中停止它），我在浏览器中收到了一条有用的消息：

> 文件“c:\users\chris\documents\visual studio 2012\Projects\MvcApplication1\MvcApplication1\App_Data\aspnet-MvcApplication1-20140225162244.mdf”的目录查找失败，出现操作系统错误 5（访问被拒绝。）。创建数据库失败。无法创建列出的某些文件名。检查相关错误。

这说明问题在于 sql 服务没有对​​我的应用程序目录的写入权限。

授予它权限有点棘手，因为需要的用户名没有出现在资源管理器 GUI 中（在 Windows 8 Pro 中）以确保安全。Sql Server 的默认实例的用户名是`NT SERVICE\MSSQLSERVER`（对于一个实例，它是`NT SERVICE\MSSQL$InstanceName`），我必须手动输入它，然后给它写权限。我只是在 App_data 目录上这样做的。

然后它起作用了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-07T12:27:46.307

在您实际将第一条记录添加到您的一个表之前，不会创建数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-11T06:49:14.287

当 Visual Studio 和 MSSQL 在不同权限下运行时会出现此错误。因此，您的应用程序没有创建`.mdf`数据库文件的写入权限。

**解决方案**

1.  打开`SQL Server Configuration Manager`
2.  选择`SQL Server Services`
3.  查看`Log On As`标签

    *该值将类似于`NT AUTHORITY\NETWORKSERVICE`（取决于）*

* * *

获取用户名后，

1.  然后转到目标文件夹。（如果默认，`App_Data`在您的项目目录中）
2.  右键 -> 属性窗口 -> 安全选项卡
3.  单击编辑->检查用户或组名

    *您不会看到`Network Service`用户或组名称列表中没有*

您所要做的就是添加用户名并为该用户或组授予写入权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T15:01:33.647

可能是 AttachDBFilename 的情况......我的项目有这个，它工作正常。

```
... connectionString="Data Source=(LocalDb)\v11.0;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|Movies.mdf" providerName="System.Data.SqlClient" 
```

还要验证您的模型是否正确。如果您的模型未启动此连接，则它不会创建数据库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T22:07:11.800

我已经通过修改连接字符串解决了这个问题，如下所示

```
 <add name="MovieDBContext"
    connectionString="Data Source=.;Initial Catalog=Movies;AttachDbFilename=|DataDirectory|\Movies.mdf;Integrated Security=True"
    providerName="System.Data.SqlClient" /> 
```

我确实从 nuget 安装了 Microsoft SQl Server Compact 4.0。但我不确定是否真的需要安装它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-03T03:38:14.480

在本`MVC`教程中，只需添加“ `Initial Catalog=Movies`;” （不带引号）到`connection string`，它会运作良好。

```
<add name="MovieDBContext"    connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=Movies;AttachDbFilename=|DataDirectory|\Movies.mdf;Integrated Security=True" providerName="System.Data.SqlClient"/> 
```**

# security - 用 wapiti 测试我的网站？

> ID：13123517
> 
> 赞同：3
> 
> 时间：2012-10-29T14:25:08.343
> 
> 标签：security, wapiti

我用这些参数运行 wapiti。在短短几秒钟内它就完成了，报告说没有漏洞。我记得有一次扫描需要几分钟（它不在我的本地机器上）并且我有很多漏洞。我不记得我使用的参数。我可以使用哪些参数来测试更多攻击？

```
wapiti.py http://localdev.com/ -s / -o o2/ 
```

# .net - 同步多个可观察流

> ID：13123519
> 
> 赞同：2
> 
> 时间：2012-10-29T14:25:11.217
> 
> 标签：.net, system.reactive

我对使用 Reactive Extensions 很陌生，所以这可能是一个新手问题，但我有以下情况：

我从数据库中获取 3 个 IEnumerable 列表（不同类型）并填充视图模型。但是，我想协调订阅以在所有列表完成加载后触发某些事情。反应式扩展是否可以做到这一点，或者我是否以错误的方式思考？代码看起来像这样：

```
GetCustomers()
    .ToObservable(Scheduler.Default)
    .Buffer(20).ObserveOn(SynchronizationContext.Current)
    .Subscribe(View.Model.AddRange);
GetCountries()
    .ToObservable(Scheduler.Default)
    .Buffer(20).ObserveOn(SynchronizationContext.Current)
    .Subscribe(View.Model.AddRange);
GetTransports()
    .ToObservable(Scheduler.Default)
    .Buffer(20).ObserveOn(SynchronizationContext.Current)
    .Subscribe(View.Model.AddRange); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T00:59:46.427

您可以尝试使用可观察连接。像这样的东西：

```
var plan =
    Observable.Start(() => GetCountries())
        .And(Observable.Start(() => GetCustomers()))
        .And(Observable.Start(() => GetTransports()))
        .Then((countries, customers, transports)
            => new { countries, customers, transports });

var query =
    Observable.When(new [] { plan });

query
    .Subscribe(cct =>
    {
        View.Model.AddRange(cct.countries);
        View.Model.AddRange(cct.customers);
        View.Model.AddRange(cct.transports);
    }); 
```

它并行运行，最后您将所有结果合二为一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:02:09.257

我不确定为什么要将已经同步的 Enumerable 更改为 Observable，但是在 Rx 习惯用法中，您可以：

```
Observable.Merge(Add(GetCustomers()), Add(GetCountries())..., Add(GetTransports()))
           .Subscribe(() => { }, Completed); 
```

其中 Add 可能是：

```
 private IObservable<Unit> Add<T>(IObservable<T> o)
    {
        return o.Buffer(20)
                .ObserveOn(SynchronizationContext.Current)
                .Do(View.Model.AddRange)
                .Select(_ => Unit.Default);
    } 
```

# rvm - RVM 不改变加载的红宝石

> ID：13123520
> 
> 赞同：0
> 
> 时间：2012-10-29T14:25:16.187
> 
> 标签：rvm

我有一个 .rvmrc 文件：

```
rvm use 1.9.3-p286@refinery --create 
```

并更改为该文件夹会产生：

```
Using /Users/neil/.rvm/gems/ruby-1.9.3-p286 with gemset refinery
$ ~/code/visioneng/ master* ruby -v
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]
$ ~/code/visioneng/ master* 
```

然而，这显然不是我所要求的。是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:29:58.553

检查您是否没有覆盖`PATH`任何 shell 脚本/函数/别名

# mysql - 如果存在于过程中，则mysql删除表

> ID：13123527
> 
> 赞同：5
> 
> 时间：2012-10-29T14:25:23.300
> 
> 标签：mysql, procedure, sql-drop

我正在尝试将嵌套集模型示例与过程一起应用。我用这种技术找到了很多，在这个过程中我发现了一个问题。每次我调用我得到的程序时`unknown table XXX`。当我创建程序时，我完全没有问题。快速示例：

```
CREATE PROCEDURE `sp_getRoleTree` (IN root INT)
  READS SQL DATA
BEGIN
    DECLARE rows SMALLINT DEFAULT 0;
    DROP TABLE IF EXISTS ROLE_TREE;
    CREATE TABLE ROLE_TREE (
        nodeID INT PRIMARY KEY
    ) ENGINE=HEAP;

    INSERT INTO ROLE_TREE VALUES (root);

    SELECT * FROM ROLE_TREE;
    DROP TABLE ROLE_TREE;
END; 
```

所以我的问题是，我在这里做错了吗（它是示例代码），如果代码没问题，我可以禁用 if exists 上的警告吗？导致此类警告的过程中是否存在特殊循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:35:22.030

作为解决方法：尝试截断表而不是重新创建。

不要使用`DROP TABLE`/ `CREATE TABLE`。创建此表一次（或在需要时）并使用`TRUNCATE TABLE`命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T17:58:17.320

`DROP TABLE IF EXISTS tbl;`当表不存在时，MySQL 会在使用时生成警告。这可能会令人困惑，甚至可能违反直觉，但这是预期的行为。

来自[http://dev.mysql.com/doc/refman/5.5/en/drop-table.html](http://dev.mysql.com/doc/refman/5.5/en/drop-table.html)

> 使用 IF EXISTS 可防止不存在的表发生错误。使用 IF EXISTS 时，会为每个不存在的表生成一个 NOTE。请参阅第 13.7.5.41 节，[显示警告语法](http://dev.mysql.com/doc/refman/5.5/en/show-warnings.html)。

IF EXISTS 防止 MySQL 抛出错误，这很好，但如果表不存在，它会导致警告。没有选项可以禁止显示此警告。

# amazon-ec2 - Elasticsearch 部署环境设置

> ID：13123528
> 
> 赞同：2
> 
> 时间：2012-10-29T14:25:25.993
> 
> 标签：amazon-ec2, elasticsearch

我们正在努力为生产环境设置我们的弹性搜索后端。直到几周前，我们还在使用 Solr，但我们决定使用 Elasticsearch 有几个原因，但最大的原因是后端的分布式特性。

话虽如此，我们一直在寻找一些关于使用亚马逊服务部署弹性搜索的文档和最佳实践。

目前，我们正在考虑使用一个超大的盒子，然后从那里向外扩展，但我们不确定这是最好的方法。例如，拥有三个中号可能比一个特大号更好。

我们打算每天索引大约 100K 到 150K 的文档，最多大约 1000 万份文档。

问题是，任何人都可以提供弹性搜索的一般环境/部署图或一般最佳实践吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:15:23.750

elasticsearch 有一些关于[EC2 部署](http://www.elasticsearch.org/tutorials/2011/08/22/elasticsearch-on-ec2.html)的文档。有一个基于 EC2 标签或安全组或您喜欢的任何东西的自动发现插件。您也可以选择 S3 来实现持久性，尽管这可能不是必需的。

我建议在 VPC 中启动它，这样您就可以拥有永久的内部 IP，在常规 EC2 中，即使您使用弹性 IP，您的内部 IP 也会随着每次重启而改变。

# java - 接口中方法的参数（没有泛型）？

> ID：13123533
> 
> 赞同：0
> 
> 时间：2012-10-29T14:25:45.007
> 
> 标签：java, singleton

我完全坚持我的业余项目。我有 MySingleton 实现`MyInterface`和调用`MyMethod()`. `MyMethod()`应该将任何一个`MySubcls`作为参数。问题是如何在`MyMethod()`没有泛型的情况下声明？应该使用许多带有不同参数的声明还是没有泛型就没有办法？

Main.java => 需要从单个方法打印所有子类的值

```
public class Main{
    public static void main(String[] args){
        MySubcls01 subCls01 = new MySubcls01();
        MySubcls02 subCls02 = new MySubcls02();
        MySingleton.INSTANCE.MyMethod(subCls01);
        MySingleton.INSTANCE.MyMethod(subCls02);
    }
}

enum MySingleton implements MyInterface
{
    INSTANCE;

    @Override
    public void MyMethod();// TODO - need to pass subCls01 or subCls02

    {
        System.out.println(subCls01.value);
        System.out.println(subCls02.value);
    }

}

interface MyInterface
{

    void MyMethod(); // TODO - what parameter for any subclass???

    // void MyMethod(MySubcls01 subCls01);
    // void MyMethod(MySubcls02 subCls02); => brute-force approach

    // <T> void MyMethod(T type); => shouldn't use generics

}

class MySupercls
{
    // some stuff
}

class MySubcls01 extends MySupercls
{
    String subValue = "i'm from subclass01";
}

class MySubcls02 extends MySupercls
{
    String subValue = "i'm from subclass02";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:28:50.580

我认为您需要使用超类类型作为参数并使用 instanceof 来确定真实类型。

例子：

```
@Override
    public void MyMethod(MySupercls inst)// TODO - need to pass subCls01 or subCls02

    {
        if (inst instanceof MySubcls01)
        {
         //cast it subclass01
        System.out.println(subCls01.value);
        }else{
         //cast it subclass02
        System.out.println(subCls02.value);
       }
    } 
```

注意：您的代码有`public void MyMethod();`while 实现方法。您应该删除分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:29:27.617

使用超类作为参数，现在您可以将所有子类实例传递给 myMethod()

```
public void MyMethod(MySuperClass yourInstance);// TODO - need to pass subCls01 or subCls02 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:30:24.170

如果我正确理解您的问题，您应该期待两者`MySubcls01`和的共同类型`MySubcls02`，在这种情况下`MySupercls`。

所以，你应该有`MyMethod(MySupercls obj);`你的方法签名。

# session - Tomcat / Java EE：会话意外停止

> ID：13123535
> 
> 赞同：0
> 
> 时间：2012-10-29T14:25:44.873
> 
> 标签：session, tomcat, jsf-2, tomcat6

我们遇到了突然注销的问题。它带有一个版本切换，以前的应用程序运行 JSF 1.2，而这个运行 JSF 2.1。由于这是一次重大的重构，因此无法跟踪任何特定的代码更改。但是已经对代码进行了重大更新（尽管主要是视图而不是 bean）。

如果我们使会话无效，我们可以控制每个地方，它们被记录并且不是原因。

我们使用会话 bean 进行身份验证，它实现了`HttpSessionBindingListener`.

我们记录 valueUnbound 并且可以判断注销是由会话生命周期结束引起的。我们正在努力寻找原因。

Tomcat 6.0.26 已被分析，一切正常。这也发生在负载很小的小客户身上。

```
<session-timeout> 
```

适当设置为 30 分钟。

```
 <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value> 
```

不确定这有什么影响，但他们都使用客户端。

我们尝试绕过负载平衡，但问题仍然存在。

[我的会话怎么会随机为空？](https://stackoverflow.com/questions/3080203/how-could-randomly-my-session-is-null)

我们尝试了建议的标志 emptySessionPath 但它没有帮助。

此外，我们不确定如何按照建议继续记录请求标头。

在我们的应用程序中，出于调试原因，我尝试终止会话 cookie：

```
HttpServletResponse response = (HttpServletResponse) getFacesContext().getExternalContext().getResponse();
Map<String, Object> cookies = getFacesContext().getExternalContext().getRequestCookieMap();
Cookie cookie = (Cookie) cookies.get("JSESSIONID");
cookie.setValue("");
cookie.setPath("/");
cookie.setMaxAge(0);
response.addCookie(cookie); 
```

似乎它没有被破坏或重新创建。我也尝试在登录时删除浏览器中的cookie，仍然没有问题。

希望得到一些关于如何进一步调试的具体提示？基本上现在我们所知道的是 valueUnbound 是突然被调用的。

雄猫 6.0.26

JSF 2.1.10

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:37:23.083

毕竟是令人尴尬的过滤器之一。我想这就是当每个人都假设其他人都检查过某些东西时可能发生的事情

# javascript - 通过JS触发，现有表单的FormData在IE10中失败

> ID：13123537
> 
> 赞同：3
> 
> 时间：2012-10-29T14:25:52.360
> 
> 标签：javascript, html, internet-explorer-10

我只是使用 HTML5 提供的新 FormData 类创建一个 webapp。

为了有一个自定义样式的“选择你的文件”按钮，我想通过 javascript 在文件输入元素上触发点击事件。

这适用于 IE10 和 Chrome，但是当我尝试使用表单创建 FormData 实例时，它在 IE10 中失败，并在此行显示消息“SCRIPT5 'Access Denied'”：

```
var fd = new FormData(f.get(0)); 
```

如果我使用本机输入元素触发文件打开对话框，它也适用于 IE10。

对于测试，请参阅此 jsfiddle：http: [//jsfiddle.net/s9aTg/2/](http://jsfiddle.net/s9aTg/2/)

是否有一个选项可以在 IE10 中进行这项工作，或者我是否坚持使用丑陋的默认“选择文件”按钮？

在此先感谢，麦克法兰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T11:03:29.693

另一种解决方法：

```
var input = document.querySelector('input[type=file]');
var fd = new FormData();
for (var i = 0, l = input.files.length; i < l; i++) {
    fd.append('file', input.files[i]);
} 
```

即使在单击样式按钮后选择了文件，它也可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:23:16.240

我无法检查，但尝试附加数据。

```
var formData = new FormData();
var files = event.originalEvent.target.files || event.originalEvent.dataTransfer.files;
$.each(files, function () {
  formData.append("files[]", this);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T15:43:07.907

IE 有自己的风格，即使是在版本 10 中 :)

我不知道解决方案，但也许这种解决方法会对您有所帮助：尝试将透明输入元素放在样式按钮上方。

```
<span class="open-wrapper">
    <input type="file" name="file" />
    <span class="open">open Dialog</span>
</span> 
```

...

```
.open-wrapper {
    position: relative;
    display: inline-block;
    overflow: hidden;
    vertical-align: middle;
}
.open-wrapper input {
    position: absolute;
    right: 0;
    opacity: 0;
} 
```

[http://jsfiddle.net/UKV3B/](http://jsfiddle.net/UKV3B/)

# ios - 自定义 UITableViewCell 的高度

> ID：13123540
> 
> 赞同：0
> 
> 时间：2012-10-29T14:25:54.717
> 
> 标签：ios, uitableview

如何根据其中的内容量缩放 UITableViewCells？在我的单元格中，我使用了 3 个代表论坛的标签。这些标签被命名为“别名”、“日期”和“评论”。第三个标签注释，可以是任意数量的大小。因此，我的单元格需要根据“评论”标签的大小动态变化。以下是我的相关代码：

```
- (UITableViewCell *)tableView:(UITableView *)pTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"ForumthreadCell";
UITableViewCell *cell = [pTableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

Feedback *item = [self.items objectAtIndex:indexPath.row];

UILabel *aliasLabel = (UILabel *)[cell viewWithTag:1];
UILabel *commentLabel = (UILabel *)[cell viewWithTag:2];
UILabel *dateLabel = (UILabel *)[cell viewWithTag:3];

[aliasLabel setText:item.alias];
[commentLabel setText:item.comment];
[dateLabel setText:[self.dateFormatter stringFromDate:[NSDate    dateWithTimeIntervalSince1970:(double)item.time]]];

commentLabel.numberOfLines = 0;
[commentLabel sizeToFit];

CGSize textHeight = [commentLabel.text sizeWithFont:commentLabel.font  constrainedToSize:CGSizeMake(maxWidth, lineHeight *    commentLabel.numberOfLines)lineBreakMode:UILineBreakModeWordWrap];

return cell;
} 
```

如您所见，我使用 textHeight 设置了 commentsLabel 的高度。但是从现在开始我该怎么办？如果我知道标签的高度，如何根据commentLabel 的高度设置单元格的高度？请根据我的代码给出代码示例。我想我应该使用以下方法，但我不知道该怎么做：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T15:06:13.430

使用该方法获取文字的文字高度

```
-(CGFloat)getLabelHeightForText:(NSString *)text andWidth:(CGFloat)labelWidth
{

CGSize maximumSize = CGSizeMake(labelWidth, 10000);

//provide appropriate font and font size
CGSize labelHeighSize = [text sizeWithFont: [UIFont fontWithName:@"Trebuchet MS" size:13.0f]
                         constrainedToSize:maximumSize
                             lineBreakMode:UILineBreakModeTailTruncation];
return labelHeighSize.height;
} 
```

此方法将返回您传递的文本的高度。在您的课程中添加此方法。并使用 **tableView:heightForRowAtIndexPath:**委托方法来设置每个单元格的高度

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
   Feedback *item = [self.items objectAtIndex:indexPath.row];

   CGFloat textHeight = [self getLabelHeightForText:item.comment andWidth:162];//give your label width here
    return textHeight;
} 
```

我认为这可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:06:30.120

您可以在实现中进行标签声明：

```
@implementation pTableView
{
    UILabel *aliasLabel;
} 
```

然后在行高中你可以使用默认的 Height (44) + aliasLabel.Height

```
return 44 + aliasLabel.frame.size.height; 
```

然后，如果您需要区分表格中的标签

```
aliasLabel.tag = indexpath.row 
```

# php - 确定按下哪个键并保存到数据库

> ID：13123541
> 
> 赞同：0
> 
> 时间：2012-10-29T14:26:00.820
> 
> 标签：php, javascript, database

我有一个代码可以帮助确定按下了哪个键。但是我很困惑，我不知道如何保存这个键-（按钮）被按下-。这可能吗？我可以在 javascript 中使用 php 代码在我的 mysql 数据库中创建一个新行吗？

```
<script type="text/javascript">
    function textsizer(e) {
        var evtobj = window.event ? event : e;
        var unicode = evtobj.charCode? evtobj.charCode : evtobj.keyCode;
        var actualkey = String.fromCharCode(unicode);
        if (actualkey == "a") {
            //database code needed
        }
    }
    document.onkeypress = textsizer;
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:38:54.657

您的主要问题是 JavaScript 是一种客户端语言（它在用户计算机上运行的浏览器中运行）而 PHP 是一种服务器端语言（它在您的 Web 服务器上运行）。您不能将两者混合在一起，因为它们在不同的时间运行。

您可以做的是使用 AJAX 将请求从您的 JavaScript 代码发送到您的 Web 服务器，而无需导航离开页面，只要按下一个键。您只需发送一个键码（或键码代表的字符）作为请求的参数，然后您的 Web 服务器将处理将该信息保存到您的数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:34:06.013

这里有一些代码可以帮助你开始工作。我选择使用 jquery，它会让这更直接。

```
 window.bind('keydown', function(event){
    $.ajax(
        {
            url: 'http://asite.com/script_to_save_codes_to_db.php',
            data: event.keyCode,
            type: 'POST',
            success: function (data){
                //have the server respond with a boolean indicating that the keycode was saved to the db or not and decide what to do next
            }
        }
    );
}); 
```

这在服务器端是如何工作的，完全是另一种蠕虫，因为它取决于您的服务器端语言和数据库选择。

对于一个完全客户端的解决方案，您可以将 keyCodes 作为 json 字符串保存到 localStorage 或 cookie 中，然后用它做您想做的事情......但是这些可以随时擦除，我不会称它们为数据库。

# regex - 如何找到具有所有指定字符的单词，并重复？

> ID：13123542
> 
> 赞同：3
> 
> 时间：2012-10-29T14:26:03.330
> 
> 标签：regex

有没有办法用正则表达式找到包含所有给定字符的单词，包括重复的字符？例如，我想从列表中查找所有单词

```
aabc, abbc, bbbc, aaac, aaab, baac, caab, abca 
```

正好包含一个'b'和两个'a'，即，，，和`aabc`（但不是因为它有一个额外的'a'）。字长无关紧要。`baac``caab``abca``aaab`

虽然这个问题

[GREP 如何只检索仅包含指定字母的单词？](https://stackoverflow.com/questions/10566812/grep-how-do-i-only-retrieve-words-with-only-the-specified-letters)

可以给我一些提示，我无法扩展它，所以它会找到重复的字符。

我只是在玩 Python 中的 re 模块，但是对于这个问题没有语言/工具的限制。

编辑：

一个更好的例子/用例是：给定一个单词列表，只显示那些包含用户输入的所有字母的单词，例如我想找到所有包含一个'a'，两个'd'和一个's'的单词. 这是正则表达式的能力吗？（我已经知道如何在没有正则表达式的情况下做到这一点。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:41:18.343

If your regex flavor supports lookaheads, then you can use this:

```
\b(?=.*b)(?=([^a]*a){2}[^a]*\b)[abc]+\b 
```

This requires at least one b and exactly 2 a's, and allows only a, b and c in the string. If you want to require exactly one b and exactly 4 characters in total, use this:

```
\b(?=[^b]*b[^b]*\b)(?=([^a]*a){2}[^a]*\b)[abc]{4}\b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:22:31.807

要完全匹配输入字符串中的 2 a 和 1 b（以任何顺序），请使用此正则表达式：

```
(?=^(?:[^a]*a){2}[^a]*$)(?=^[^b]*b[^b]*$)^.+$ 
```

[这是给你的现场演示](http://www.rubular.com/r/ANsuPNaIEi)。

# javascript - 使按钮单击一次

> ID：13123547
> 
> 赞同：1
> 
> 时间：2012-10-29T14:26:22.817
> 
> 标签：javascript, jquery

编辑**

在我的游戏中，我希望我的按钮在单击后禁用，但由于某种原因，我查看的所有方法都不起作用。

这是我目前所拥有的..

```
$('.minibutton').click(function() {

$(this).attr('disabled','disabled');
$('.minibutton').prop('disabled', false);
$('.picstyle').show();
$('td').removeClass('spellword');
var r = rndWord;
while (r == rndWord) {
    rndWord = Math.floor(Math.random() * (listOfWords.length));
}

$('td[data-word="' + listOfWords[rndWord].name + '"]').addClass('spellword');
$('td[data-word=' + word + ']').removeClass('wordglow').removeClass('wordglow4').removeClass('wordglow3').css('color', 'transparent');

var noExist = $('td[data-word=' + listOfWords[rndWord].name + ']').hasClass('wordglow2');
if (noExist) {
    $('.minibutton').click();

} else {

    $("#mysoundclip").attr('src', listOfWords[rndWord].audio);
    audio.play();
    $("#mypic").attr('src', listOfWords[rndWord].pic);
    jQuery(pic).show();
}

}).trigger("click"); 
```

我尝试将点击功能更改为..

```
$('.minibutton').one("click", function() { 
```

我也尝试过绑定和解除绑定，但它不起作用

小提琴[http://jsfiddle.net/7Y7A5/9/](http://jsfiddle.net/7Y7A5/9/)

您使用图片作为线索拼写突出显示的单词。如果你把这个词弄错了 3 次，你就有机会继续前进，因为“小按钮”出现了。此时我只希望用户能够在它再次消失之前单击它一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:29:15.370

看看 jQuery`.on()`和`.off()`方法。在 jQuery 网站上的文档中，应该有一个关于命名空间的部分——这部分涵盖了您正在寻找的内容。

下面，我已经为您提供了您正在寻找的解决方案，但无论如何都要查看文档，以便您更好地理解它。

首先，在您的点击处理程序上方添加此变量声明：

```
var timesClicked = 0; 
```

然后，将您的处理程序声明更改为：

```
$('.minibutton').on("click.oneclick", function () {...}); 
```

并在您的处理程序中添加这些行：

```
if (timesClicked > 0) {
    $(this).off("click.oneclick");
} else {
    timesClicked++;
} 
```

基本上，这里发生的事情是您为单击事件处理程序提供了一个独特的名称，以将其与页面上的所有其他单击事件处理程序（即所有其他没有该名称空间的单击处理程序）区分开来。您可以应用命名空间“foo”——我选择应用命名空间“oneclick”。结果是您能够删除特定的单击事件处理程序，而无需删除任何其他单击事件处理程序（即，任何其他没有给定名称空间的处理程序）。

试试这个[更新](http://jsfiddle.net/7Y7A5/20/)的解决方案。

**更新：**

为了帮助您解决重新启用单击事件的问题，首先执行以下操作（注意：您的代码中有很多东西需要清理，但我确实指出了一件事，这是一个空的单击处理程序设置为小按钮）：

```
var clickOnceTest = 0;
function enableMinibutton() {
    $('.minibutton').on("click.clickOnceNS", function() {
        if (clickOnceTest > 0) {
            $(this).off("click.clickOnceNS");
        } else {
            clickOnceTest++;
        }
        $('.minibutton').prop('disabled', false);
        $('.picstyle').show();
        $('td').removeClass('spellword');
        var r = rndWord;
        while (r == rndWord) {
            rndWord = Math.floor(Math.random() * (listOfWords.length));
        }

        $('td[data-word="' + listOfWords[rndWord].name + '"]').addClass('spellword');
        $('td[data-word=' + word + ']').removeClass('wordglow').removeClass('wordglow4').removeClass('wordglow3').css('color', 'transparent');

        var noExist = $('td[data-word=' + listOfWords[rndWord].name + ']').hasClass('wordglow2');
        if (noExist) {
            /////
            /////
            /////
            /////
            /////        
            ////// Is this supposed to trigger a click? because all this does is set another click handler (which does nothing) to minibutton..
            /////
            /////
            /////
            /////
            /////
            $('.minibutton').click();

        } else {

            $("#mysoundclip").attr('src', listOfWords[rndWord].audio);
            audio.play();
            $("#mypic").attr('src', listOfWords[rndWord].pic);
            pic.show();
        }

    });
}

enableMinibutton();
$(".minibutton").trigger("click"); 
```

完成此操作后，当您准备好重新启用时，`minibutton`您所要做的就是调用方法`enableMinibutton()`。如果您需要`trigger("click")`再次调用该方法，请这样做（我不完全确定为什么它首先存在）。您可以在第二次显示按钮之前/之后立即调用此方法（我的偏好 - 我不喜欢不必要的处理程序减慢我的脚本速度），或者您可以在隐藏按钮后立即调用它。

至于其他需要清理的东西：在你的代码中你有一些东西，比如我指出的空点击处理程序，这是不必要的，减慢你的程序，抛出错误，或者根本不起作用。尽快删除或注释掉这些东西。一旦你这样做了，你的代码将运行得更流畅，你的测试/实验将更有可能成功/失败，而不会受到不良代码的影响。

此外，我不能再强调这一点，您需要将元素选择器设置为变量。您选择`minibutton`并`minibutton2`以及在您的代码中数十次的一堆其他项目。只需将它们的选择器设置为顶部的变量并使用所述变量来引用您的元素，而不是一遍又一遍地选择它们。每次调用 jQuery 选择器时，实际上都是在 DOM 中搜索满足选择器的元素。如果您的集合中总是包含相同的元素，请将选择器设置为变量并调用该变量。这样，您只需在 DOM 中搜索这些元素一次。在重量级程序中，性能差异非常明显，尤其是在这样的程序中。如果您不熟悉此语法，这里有两个示例，使用`minibutton`and `minibutton2`：

```
var $minibutton = $(".minibutton");
var $minibutton2 = $(".minibutton2");
....
$minibutton.on("click.click.......
...
$minibutton.trigger(....
...
$minibutton2.prop(...
... 
```

如您所见，我喜欢在选择器变量前面加上前缀，`$`以便更容易看到并记住它们所保存的变量是选定元素。这不是必需的，您可以将变量名称设置为您想要的任何名称。

这样做的唯一问题是，如果您计划向选择器返回的 DOM 添加更多项目，则必须“更新”变量；该变量将引用选择器在最初调用选择器时返回的所有元素。这意味着，如果您有一个特定类的元素集合并设置一个变量来引用该集合，那么在向该类添加其他元素之前，为了引用稍后将由该选择器返回的其他元素，您将不得不重新设置。是的，我知道这很长而且令人困惑，但它实际上很简单，网上有很多关于它的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:30:32.200

```
<input type="submit" onclick="this.disabled = true" value="Save"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-24T21:24:04.173

## 使用现代 Js，带有“禁用”或“一次”！

```
button.disabled = true; 
```

或者

```
button.addEventListener("click", function() {
    // Fire event
}, {once : true}); 
```

[文档](https://developers.google.com/web/updates/2016/10/addeventlistener-once),[可以使用](http://caniuse.com/#feat=once-event-listener)

# php - .htaccess 重写影响html图片源的url

> ID：13123552
> 
> 赞同：0
> 
> 时间：2012-10-29T14:26:39.987
> 
> 标签：php, html, apache, .htaccess, redirect

我正在尝试重定向一个链接`www.mywebsite.com/phpfile/uservalue/`，例如`www.mywebsite.com/phpfile.php?param=uservalue`

所以我的 .htaccess 文件是

```
Options -Indexes
Options +FollowSymLinks  
RewriteEngine On  
RewriteCond %{SCRIPT_FILENAME} !-d  
RewriteCond %{SCRIPT_FILENAME} !-f  
RewriteRule ^phpfile/(\w*)$ ./phpfile.php?param=$1 
```

重定向效果很好。现在我有一个问题。我的 phpfile.php 包含以下 html 代码以及其他内容

```
<html xmlns="http://www.w3.org/1999/xhtml">
<body>
<img src="logo.png">
</body>
</html> 
```

现在，如果我`www.mywebsite.com/phpfile.php?param=uservalue`在浏览器中输入，图像就会加载。但如果我输入`www.mywebsite.com/phpfile/uservalue/`图像不加载。

在检查元素时，我发现 php 试图`http://mywebsite.com/phpfile/logo.png`在图像实际存在时加载`http://mywebsite.com/logo.png`

如何防止将额外的“phpfile”文件夹添加到图像 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:30:12.670

您可以使用相对 url 而不是`<img src="logo.png"/>`use来解决这个`<img src="www.mywebsite.com/logo.png"/>"`问题，以后您将没有问题。

或者如果你想可以`base`这样使用元素 `<base href="http://www.mywebsite.com">`，你可以像使用它一样使用它`<img src="logo.png"/>`

# matlab - 两个数据集的交集

> ID：13123553
> 
> 赞同：3
> 
> 时间：2012-10-29T14:26:40.193
> 
> 标签：matlab, date, matching, intersect

我有两个时间序列的股价，`Price1`和`Price2`。`Tday`是两个价格都匹配的日期的时间序列。现在我正在尝试将每个价格与新建立的`tday`（匹配日期时间序列）相匹配。我正在按照构建索引的说明进行操作。`cl1`然后，我通过创建基本上匹配索引日期的新集来继续匹配它们，`price1`如下所示。我的问题是，在我的旧 Matlab 上，这曾经可以正常工作。现在`cl1`结果是一个非常不稳定的时间序列，类似于它应该是的，但是从一个数据点到下一个数据点的波动幅度为 20-40%。我现在正在使用 Matlab 7.12 R2011a。`cl1`任何人都可以帮助我纠正这种波动`cl2`吗？

```
[tday, idx1, idx2]=intersect(tday1, tday2);

cl1 = adjcls1(idx1);

cl2 = adjcls2(idx2); 
```

![在此处输入图像描述](../Images/bab235b093d291e90c5953869c7c5880.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:09:47.903

根据您显示数据的方式，tday 可能没有按照您认为的方式排序。尝试对 tday 进行排序，然后使用排序后的索引对 idx1 和 idx2 进行排序。

# elasticsearch - 相当于 ElasticSearch 上 Solr 的 copyField？

> ID：13123555
> 
> 赞同：12
> 
> 时间：2012-10-29T14:26:46.603
> 
> 标签：elasticsearch, search, solr, lucene, elasticsearch-5

有人可以告诉我 ElasticSearch 上是否有等效的 Solr copyField 指令？

我知道有多字段类型： [http](http://www.elasticsearch.org/guide/reference/mapping/multi-field-type.html) : //www.elasticsearch.org/guide/reference/mapping/multi-field-type.html 当您想在同一字段上应用多个分析器时，这很好。

但它并不完全相同。Solr 允许将多个字段“合并”为一个：

```
<field name="id" type="string" indexed="true" stored="true"/>
<field name="name" type="string" indexed="true" stored="true"/>
<field name="subject" type="string" indexed="true" stored="true"/>
<field name="location" type="string" indexed="true" stored="true"/>
<field name="all" type="text" indexed="true" stored="true" multiValued="true"/>
<copyField source="*" dest="all"/> 
```

* * *

这个插件很有前途： [https ://github.com/yakaz/elasticsearch-analysis-combo](https://github.com/yakaz/elasticsearch-analysis-combo)

因为它允许在使用 ElasticSearch 多值字段时将结果作为单个字段取回。但它仍然不完全相同，因为它不允许“合并”多个字段。

* * *

我想要组合分析器和 Solr copyField 的组合。

我有一个博客文章模型（标题/描述字段），并且想将标题和描述复制到单个字段“blogContent”上，我将在该字段上应用 2 个不同的分析器。

ElasticSearch 中有解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T14:49:35.967

默认情况下，有一个[特殊`_all`字段](http://www.elasticsearch.org/guide/reference/mapping/all-field.html)会获取所有其他字段的副本。`_all`您可以使用`include_in_all`属性控制包含到字段中。但是，您仅限于这样的一个领域。如果您需要多个字段，则需要在搜索端通过搜索多个字段来处理它。

`multi_field`也可以通过使用`"path": "just_name"`属性来实现类似于 copyField 的功能：

```
curl -XPUT localhost:9200/test-idx -d '{
    "settings": {
        "index": {
            "number_of_shards": 1,
            "number_of_replicas": 0
        }
    },
    "mappings": {
        "doc": {
            "properties": {
                "first_name": {
                    "type": "multi_field",
                    "path": "just_name",
                    "fields": {
                        "first_name": {"type": "string", "index": "analyzed"},
                        "name": {"type": "string","index": "analyzed"}
                    }
                },
                "last_name": {
                    "type": "multi_field",
                    "path": "just_name",
                    "fields": {
                        "last_name": {"type": "string", "index": "analyzed"},
                        "name": {"type": "string","index": "analyzed"}
                    }
                }
            }
        }
    }
}'
echo
curl -XPUT localhost:9200/test-idx/doc/1 -d '{
    "first_name": "Sebastien",
    "last_name": "Lorber"
}'
echo
curl -XPOST localhost:9200/test-idx/_refresh
echo
curl "localhost:9200/test-idx/doc/_search?q=name:Sebastien"
echo
curl "localhost:9200/test-idx/doc/_search?q=name:Lorber" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-20T13:35:48.820

弹性搜索支持 copyTo：

*   旧链接（死）：[http ://www.elasticsearch.org/guide/en/elasticsearch/reference/current/mapping-core-types.html#copy-to](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/mapping-core-types.html#copy-to)
*   当前参考链接：[https ://www.elastic.co/guide/en/elasticsearch/reference/current/copy-to.html](https://www.elastic.co/guide/en/elasticsearch/reference/current/copy-to.html)
*   指南中的当前链接：[https ://www.elastic.co/guide/en/elasticsearch/guide/current/custom-all.html](https://www.elastic.co/guide/en/elasticsearch/guide/current/custom-all.html)

您可以在要复制到的字段上添加分析器。

# ios - EKEvent 没有在日历 ios 中保存提醒

> ID：13123558
> 
> 赞同：0
> 
> 时间：2012-10-29T14:26:54.387
> 
> 标签：ios, ekeventkit

我正在尝试将提醒保存在日历中。它已保存但日期和时间错误。

**编辑基本上我想在日历中保存提醒，开始日期从 startDate 选择器中选择，结束日期从 endDate 选择器中选择。和从提醒时间选择器中选择的时间。任何日期和时间。**

下面是我的代码。我在这里做错了什么

```
EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
event.title = productTextField.text;

   [event setCalendar:[eventStore defaultCalendarForNewEvents]];

NSCalendar *calendar = [NSCalendar currentCalendar];
[calendar setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT"]];//This is working

NSDateComponents *components = [calendar components:(NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:[reminderTime getDate]];

NSInteger hour = [components hour];
NSInteger minute = [components minute];
NSDate *reminderDateAndTime = [NSDate dateWithTimeIntervalSince1970: [[startDate getDate] timeIntervalSince1970] + (minute * 60) + (hour * 60 * 60)];
 NSDate *endDateAndTime = [NSDate dateWithTimeIntervalSince1970: [[endDate getDate] timeIntervalSince1970] ];
 event.startDate = reminderDateAndTime;

event.endDate   = endDateAndTime;

    [eventStore saveEvent:event span:EKSpanThisEvent error:&err]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T11:49:50.490

**基本上我想在日历中保存提醒，其中开始日期从 startDate 选择器中选择，结束日期从 endDate 选择器中选择。和从提醒时间选择器中选择的时间。任何日期和时间。**

您也不需要 2 或 3 个选择器，您可以只使用一个选择器来完成所有这些操作。

当您使用 3 个选择器时，分配似乎需要很多时间，一个用于开始日期，一个用于结束日期，另一个用于时间，并且 UI 看起来也很时髦。

那你为什么用`dateWithTimeIntervalSince1970:`. 它返回一个 NSDate 对象，该对象设置为从 1970 年 1 月 1 日（格林威治标准时间）的第一时刻开始的给定秒数。你不需要它。

以 BOOL 为例：`BOOL dateValue`

如果 dateValue 为 true，则获取您的开始日期，如果为 false，则获取您的结束日期。

只需获取第一个选定的日期，例如：

```
NSDate *startDate = [datePicker date]; 
```

注意：选择开始日期后，将选择器的最小日期设置为您选择的第一个开始日期。

然后用户不能在开始日期之前选择结束日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T14:56:04.847

我弄清楚我做错了什么。下面的代码工作正常（在这里为其他用户发布代码）

```
NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];

// Break the date up into components
NSDateComponents *dateComponents = [calendar components:( NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit )
                                               fromDate:[startDate getDate]];
NSDateComponents *timeComponents = [calendar components:( NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit )
                                               fromDate:[reminderTime getDate]];

NSDateComponents *dateComponentsEnd = [calendar components:( NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit )
                                               fromDate:[endDate getDate]];

 [event setCalendar:[eventStore defaultCalendarForNewEvents]];

// Set up the fire time
NSDateComponents *dateComps = [[NSDateComponents alloc] init];
[dateComps setDay:[dateComponents day]];
[dateComps setMonth:[dateComponents month]];
[dateComps setYear:[dateComponents year]];
[dateComps setHour:[timeComponents hour]];
// Notification will fire in one minute
[dateComps setMinute:[timeComponents minute]];
[dateComps setSecond:[timeComponents second]];
NSDate *startDatee = [calendar dateFromComponents:dateComps];
NSDateComponents *dateCompsEnd = [[NSDateComponents alloc] init];
[dateCompsEnd setDay:[dateComponentsEnd day]];
[dateCompsEnd setMonth:[dateComponentsEnd month]];
[dateCompsEnd setYear:[dateComponentsEnd year]];
NSDate *endDatee = [calendar dateFromComponents:dateCompsEnd];
event.startDate=startDatee;
event.endDate=endDatee;
[eventStore saveEvent:event span:EKSpanThisEvent error:&err]; 
```

# php - getRequest() 在发布表单时返回“GET”

> ID：13123559
> 
> 赞同：2
> 
> 时间：2012-10-29T14:26:53.800
> 
> 标签：php, symfony

我们正在 Symfony2 上开发两个独立的站点，在处理提交的表单时都遇到了一个奇怪的问题。

两个站点都有一个用于显示表单和处理提交的操作。因为它同时处理 GET 和 POST 请求，`$this->getRequest()->getMethod()`所以被选中。如果是 GET，我们显示表单。如果是 POST，我们将其持久化到实体中。

但是，即使在发布数据时`getMethod()`似乎总是返回。`GET`我知道请求方法应该是`POST`因为浏览器的网络检查器说它以 POST 请求的形式发送了表单，并`var_dump($_POST);`输出了我们刚刚提交的表单的内容。

这些站点运行在不同的服务器上，都是 CentOS 6.3。我有第三个类似的服务器运行第三个站点，可以很好地处理提交。这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:37:32.300

我已经多次遇到这样的问题并尝试了不同的方法。这是我的最后一个：

```
public function formAction(Request $request)
{
} 
```

```
{% render 'Bundle:Controller:form' with {'request': app.request} %} 
```

请注意，在这种情况下，您需要将请求作为参数获取——而不是从容器中获取它。如果您习惯性地使用 Symfony，那么您已经在这样做了。

如果你能找到解决这个问题的更好方法，我很想知道。:)

# batch-file - 在 Sketchup 中，是否可以像使用 view.write_image 一样自动导出场景的 dwg 2D 线？

> ID：13123565
> 
> 赞同：0
> 
> 时间：2012-10-29T14:27:17.220
> 
> 标签：batch-file, export, scene, sketchup, dwg

我想要一个将我的 Sketchup Pro 8 场景导出到单个 2D dwg 文件的一键式解决方案，类似于使用 view.write_image？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:44:06.290

不幸的是，SketchUp Ruby API 没有公开任何导出 2D DWG 的方法。您只能导出 3D。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-28T11:48:16.693

我认为您可以使用[sketchup-dxf-stl-exporter](https://github.com/NB70/sketchup-dxf-stl-exporter)来控制.dxf 格式的导出。例如，您可以将所有 2D 实体移动到特殊层

```
autocad_entities = Array.new

Sketchup.active_model.entities.each do |entitie|
    autocad_entities.push entitie if entitie.layer.name == 'AutoCad Layer'
end 
```

并使用**skp_to_dxf.rb**导出这些实体。

希望对您有所帮助。

# php - 从 Python 到 PHP 的 GREP 函数

> ID：13123568
> 
> 赞同：3
> 
> 时间：2012-10-29T14:27:32.150
> 
> 标签：php, python

我有一个我写的python脚本，我需要移植到php。它递归搜索给定目录并基于正则表达式搜索构建字符串。我要移植的第一个功能如下。它需要一个正则表达式和一个基本目录，递归地在该目录中的所有文件中搜索正则表达式，并构建一个字符串匹配列表。

```
def grep(regex, base_dir):
    matches = list()
    for path, dirs, files in os.walk(base_dir):
        for filename in files:
            fullpath = os.path.join(path, filename)
            with open(fullpath, 'r') as f:
                content = f.read()
                matches = matches + re.findall(regex, content)
    return matches 
```

除了基本的 GET 参数操作外，我从不使用 PHP。我从网上抓取了一些目录遍历代码，由于我完全缺乏 php API，我正在努力让它像上面的 python 函数一样工作。

```
function findFiles($dir = '.', $pattern = '/./'){
  $prefix = $dir . '/';
  $dir = dir($dir);
  while (false !== ($file = $dir->read())){
    if ($file === '.' || $file === '..') continue;
    $file = $prefix . $file;
    if (is_dir($file)) findFiles($file, $pattern);
    if (preg_match($pattern, $file)){
      echo $file . "\n";
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:11:39.237

这是我的解决方案：

```
<?php 

class FileGrep {
    private $dirs;      // Scanned directories list
    private $files;     // Found files list
    private $matches;   // Matches list

    function __construct() {
        $this->dirs = array();
        $this->files = array();
        $this->matches = array();
    }

    function findFiles($path, $recursive = TRUE) {
        $this->dirs[] = realpath($path);
        foreach (scandir($path) as $file) {
            if (($file != '.') && ($file != '..')) {
                $fullname = realpath("{$path}/{$file}");
                if (is_dir($fullname) && !is_link($fullname) && $recursive) {
                    if (!in_array($fullname, $this->dirs)) {
                        $this->findFiles($fullname, $recursive);
                    }
                } else if (is_file($fullname)){
                    $this->files[] = $fullname;
                }
            }
        }
        return($this->files);
    }

    function searchFiles($pattern) {
        $this->matches = array();
        foreach ($this->files as $file) {
            if ($contents = file_get_contents($file)) {
                if (preg_match($pattern, $contents, $matches) > 0) {
                    //echo $file."\n";
                    $this->matches = array_merge($this->matches, $matches);
                }
            }
        }
        return($this->matches);
    }
}

// Usage example:

$fg = new FileGrep();
$files = $fg->findFiles('.');               // List all the files in current directory and its subdirectories
$matches = $fg->searchFiles('/open/');      // Search for the "open" string in all those files

?>
<html>
    <body>
        <pre><?php print_r($matches) ?></pre>
    </body>
</html> 
```

意识到：

*   它读取每个文件以搜索模式，因此可能需要大量内存（检查 PHP.INI 文件中的“memory_limit”配置）。
*   它不适用于 unicode 文件。如果您正在使用 unicode 文件，您应该使用“mb_ereg_match”函数而不是“preg_match”函数。
*   它不遵循符号链接

总之，即使它根本不是最有效的解决方案，它也应该有效。

# php - 创建 WSDL PHP 请求返回内部错误

> ID：13123570
> 
> 赞同：2
> 
> 时间：2012-10-29T14:27:37.710
> 
> 标签：php, soap, wsdl, xsd

我在执行此搜索请求时遇到了很大的问题。

首先，我需要对自己进行身份验证，并且工作正常。

然后我需要将安全令牌添加到请求标头中，这也很容易。

但是当我尝试创建搜索请求时，我可以得到服务器的积极响应。

```
$url = 'http://devapi.stellatravelgateway.stellatravelservices.co.uk/AirService.svc?wsdl';
$search = new SoapClient($url , array('trace' => true));

$header =  new SoapHeader('http://devapi.stellatravelgateway.stellatravelservices.co.uk','AuthHeader', $token, true);
$search->__setSoapHeaders(array($header)); ?>
<h1>Search</h1> <?php var_dump($search);

$ser_par = array(
    'request'=>array(
            'SelectedAirlines' => array(),
        'MaximumConnectionTimeMins' => '',
        'MaxResultsPerAirline' => '',
        'JourneyDetails' => array(
              'JourneyDetail'=> array(
                'DepartureDateTime' => '2012-12-01T17:20:58',
                'DeparturePoint' => 'LON',
                'DeparturePointIsCity' =>   false,
                'DestinationPoint' => 'MLE',
                'DestinationPointIsCity' => false,
                'ViaPointAirportCode' => ''),
              'JourneyDetail' => array(
                'DepartureDateTime' => '2012-12-15T17:20:58',
                'DeparturePoint' => 'MLE',
                'DeparturePointIsCity' =>   false,
                'DestinationPoint' => 'LON',
                'DestinationPointIsCity' => false,
                'ViaPointAirportCode' => ''
                )),
        'SearchType' => 'Availability',
            'FlexiDays' => 0,
            'FareType' => 'All',
            'SearchSource' =>'Default',
            'ReturnIncompleteResults' => false,
            'SortOrder' => 'Price',
            'ChildPaxCount' => 1,
            'AdultPaxCount' => 1,
            'DirectFlightsOnly' => false,
            'CabinClass' => 'All',
            'InfantWithSeatPaxCount' => 0,
            'InfantPaxCount' => 1,
            'MaxResultsPerAirline' => '',
            'MaxResults' => '',
            'IncludePriorDepartues' => false,
            'SessionID'=> '070ed09a-ec58-4eee-a7d9-31942e968a3c',
));

try{
    $search->Search(array($ser_par));
}catch(SoapFault $e){
    echo '<h1> Errors: </h1>';
        var_dump($e);
} 
```

这是输出：

```
Search

object(SoapClient)#218 (4) { ["trace"]=> int(1) ["_soap_version"]=> int(1) ["sdl"]=> resource(108) of type (Unknown) ["__default_headers"]=> array(1) { [0]=> object(SoapHeader)#219 (4) { ["namespace"]=> string(60) "http://devapi.stellatravelgateway.stellatravelservices.co.uk" ["name"]=> string(10) "AuthHeader" ["data"]=> string(36) "149db61f-c1d6-49e2-bf37-430ec3526053" ["mustUnderstand"]=> bool(true) } } }
Errors:

object(SoapFault)#220 (9) { ["message":protected]=> string(433) "The server was unable to process the request due to an internal error. For more information about the error, either turn on IncludeExceptionDetailInFaults (either from ServiceBehaviorAttribute or from the configuration behavior) on the server in order to send the exception information back to the client, or turn on tracing as per the Microsoft .NET Framework 3.0 SDK documentation and inspect the server trace logs." ["string":"Exception":private]=> string(0) "" ["code":protected]=> int(0) ["file":protected]=> string(96) "/home/sites/simplymaldivesholidays.co.uk/public_html/feeds/wp-content/themes/responsive/page.php" ["line":protected]=> int(151) ["trace":"Exception":private]=> array(5) { [0]=> array(6) { ["file"]=> string(96) "/home/sites/simplymaldivesholidays.co.uk/public_html/feeds/wp-content/themes/responsive/page.php" ["line"]=> int(151) ["function"]=> string(6) "__call" ["class"]=> string(10) "SoapClient" ["type"]=> string(2) "->" ["args"]=> array(2) { [0]=> string(6) "Search" [1]=> array(1) { [0]=> array(1) { [0]=> array(1) { ["request"]=> array(19) { ["SelectedAirlines"]=> array(0) { } ["MaximumConnectionTimeMins"]=> string(0) "" ["MaxResultsPerAirline"]=> string(0) "" ["JourneyDetails"]=> array(1) { ["JourneyDetail"]=> array(6) { ["DepartureDateTime"]=> string(19) "2012-12-15T17:20:58" ["DeparturePoint"]=> string(3) "MLE" ["DeparturePointIsCity"]=> bool(false) ["DestinationPoint"]=> string(3) "LON" ["DestinationPointIsCity"]=> bool(false) ["ViaPointAirportCode"]=> string(0) "" } } ["SearchType"]=> string(12) "Availability" ["FlexiDays"]=> int(0) ["FareType"]=> string(3) "All" ["SearchSource"]=> string(7) "Default" ["ReturnIncompleteResults"]=> bool(false) ["SortOrder"]=> string(5) "Price" ["ChildPaxCount"]=> int(1) ["AdultPaxCount"]=> int(1) ["DirectFlightsOnly"]=> bool(false) ["CabinClass"]=> string(3) "All" ["InfantWithSeatPaxCount"]=> int(0) ["InfantPaxCount"]=> int(1) ["MaxResults"]=> string(0) "" ["IncludePriorDepartues"]=> bool(false) ["SessionID"]=> string(36) "070ed09a-ec58-4eee-a7d9-31942e968a3c" } } } } } } [1]=> array(6) { ["file"]=> string(96) "/home/sites/simplymaldivesholidays.co.uk/public_html/feeds/wp-content/themes/responsive/page.php" ["line"]=> int(151) ["function"]=> string(6) "Search" ["class"]=> string(10) "SoapClient" ["type"]=> string(2) "->" ["args"]=> array(1) { [0]=> array(1) { [0]=> array(1) { ["request"]=> array(19) { ["SelectedAirlines"]=> array(0) { } ["MaximumConnectionTimeMins"]=> string(0) "" ["MaxResultsPerAirline"]=> string(0) "" ["JourneyDetails"]=> array(1) { ["JourneyDetail"]=> array(6) { ["DepartureDateTime"]=> string(19) "2012-12-15T17:20:58" ["DeparturePoint"]=> string(3) "MLE" ["DeparturePointIsCity"]=> bool(false) ["DestinationPoint"]=> string(3) "LON" ["DestinationPointIsCity"]=> bool(false) ["ViaPointAirportCode"]=> string(0) "" } } ["SearchType"]=> string(12) "Availability" ["FlexiDays"]=> int(0) ["FareType"]=> string(3) "All" ["SearchSource"]=> string(7) "Default" ["ReturnIncompleteResults"]=> bool(false) ["SortOrder"]=> string(5) "Price" ["ChildPaxCount"]=> int(1) ["AdultPaxCount"]=> int(1) ["DirectFlightsOnly"]=> bool(false) ["CabinClass"]=> string(3) "All" ["InfantWithSeatPaxCount"]=> int(0) ["InfantPaxCount"]=> int(1) ["MaxResults"]=> string(0) "" ["IncludePriorDepartues"]=> bool(false) ["SessionID"]=> string(36) "070ed09a-ec58-4eee-a7d9-31942e968a3c" } } } } } [2]=> array(4) { ["file"]=> string(90) "/home/sites/simplymaldivesholidays.co.uk/public_html/feeds/wp-includes/template-loader.php" ["line"]=> int(43) ["args"]=> array(1) { [0]=> string(96) "/home/sites/simplymaldivesholidays.co.uk/public_html/feeds/wp-content/themes/responsive/page.php" } ["function"]=> string(7) "include" } [3]=> array(4) { ["file"]=> string(77) "/home/sites/simplymaldivesholidays.co.uk/public_html/feeds/wp-blog-header.php" ["line"]=> int(16) ["args"]=> array(1) { [0]=> string(90) "/home/sites/simplymaldivesholidays.co.uk/public_html/feeds/wp-includes/template-loader.php" } ["function"]=> string(12) "require_once" } [4]=> array(4) { ["file"]=> string(68) "/home/sites/simplymaldivesholidays.co.uk/public_html/feeds/index.php" ["line"]=> int(17) ["args"]=> array(1) { [0]=> string(77) "/home/sites/simplymaldivesholidays.co.uk/public_html/feeds/wp-blog-header.php" } ["function"]=> string(7) "require" } } ["previous":"Exception":private]=> NULL ["faultstring"]=> string(433) "The server was unable to process the request due to an internal error. For more information about the error, either turn on IncludeExceptionDetailInFaults (either from ServiceBehaviorAttribute or from the configuration behavior) on the server in order to send the exception information back to the client, or turn on tracing as per the Microsoft .NET Framework 3.0 SDK documentation and inspect the server trace logs." ["faultcode"]=> string(22) "a:InternalServiceFault" } 
```

这里只有我得到的资源文件。

文档： [http ://devapi.stellatravelgateway.stellatravelservices.co.uk/documentation/](http://devapi.stellatravelgateway.stellatravelservices.co.uk/documentation/)

XML 文档： [http ://devapi.stellatravelgateway.stellatravelservices.co.uk/AirService.svc?wsdl](http://devapi.stellatravelgateway.stellatravelservices.co.uk/AirService.svc?wsdl)

这是示例搜索请求。我尝试使用这些值但不成功。

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header>
    <Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://stellatravelgateway.stellatravelservices.co.uk/AirService/IAirService/Search</Action>
    <AuthHeader xmlns="http://stellatravelgateway.stellatravelservices.co.uk">a80681e2-e70f-4bf0-ab0f-df81a6449c6d</AuthHeader>
  </s:Header>
  <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <Search xmlns="http://stellatravelgateway.stellatravelservices.co.uk/AirService">
      <request SearchType="Availability" FlexiDays="0" FareType="All" SearchSource="Default" ReturnIncompleteResults="false" SortOrder="Price" ChildPaxCount="1" AdultPaxCount="1" DirectFlightsOnly="false" CabinClass="All" InfantWithSeatPaxCount="0" InfantPaxCount="1">
        <SelectedAirlines />
        <MaxResultsPerAirline xsi:nil="true" />
        <JourneyDetails>
          <JourneyDetail DepartureDateTime="2012-12-01T17:20:58" DeparturePoint="LON" DeparturePointIsCity="false" DestinationPoint="MLE" DestinationPointIsCity="false" ViaPointAirportCode="" />
          <JourneyDetail DepartureDateTime="2012-12-15T17:20:58" DeparturePoint="MLE" DeparturePointIsCity="false" DestinationPoint="LON" DestinationPointIsCity="false" ViaPointAirportCode="" />
        </JourneyDetails>
        <MaxResults xsi:nil="true" />
        <IncludePriorDepartues>false</IncludePriorDepartues>
        <SessionID>070ed09a-ec58-4eee-a7d9-31942e968a3c</SessionID>
      </request>
    </Search>
  </s:Body>
</s:Envelope> 
```

我的问题是：我在这里做错了什么？任何帮助将非常感激。最好的问候 PawikSD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:29:44.397

非常感谢您的帮助。我已经设法解决了。我使用 SoapUI 来获取正确的请求格式。接下来，我将其复制并作为 curl 请求发送。奇迹般有效。谢谢

# asp.net-mvc - 用于主题的 ASP MVC 区域

> ID：13123573
> 
> 赞同：1
> 
> 时间：2012-10-29T14:27:42.027
> 
> 标签：asp.net-mvc, layout, themes, asp.net-mvc-areas

我目前正在寻找一种解决方案，用户可以根据自己的喜好选择主题和布局。

假设我有一个提供 2 个主题的网站：黄色和绿色。

这两者有 2 种不同的布局：2 列和 3 列布局，并且一些局部视图的结构不同并且具有不同的功能方面。

我认为最好的方法是使用区域，但是我不希望 URL 结构发生变化。我会使用一个变量来设置执行操作时的幕后区域。

例如，我将布局设置为 3 列并使用绿色主题。我会使用 3Cols 区域和它的特定视图，但控制器实现与 2Cols 布局相同的代码，所以我不想复制控制器。

所以，我想要实现的目标是这样的：

*   使用区域切换布局和主题
*   为每个布局使用单个控制器
*   独立于所选布局具有相同的 url

对此有何想法/建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:55:59.217

我已经设法得到我正在寻找的工作，我认为这很简单！

我创建了一个 BaseController 类：

```
public class BaseController : Controller
{
    protected override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        filterContext.RouteData.DataTokens["area"] = CurrentLayout;
        base.OnActionExecuting(filterContext);
    }

    public string CurrentLayout
    {
        get
        {
            //Set a default layout if no layout is specified
            if(Session["CurrentLayout"]==null)
                Session["CurrentLayout"] = "Layout1";
            return Session["CurrentLayout"].ToString();
        }

        set
        {
            if (string.IsNullOrWhiteSpace(value) || string.IsNullOrEmpty(value))
                throw new NullReferenceException("CurrentLayout");
            CurrentLayout = value;
        }
    }
} 
```

然后，在会话开始时，我读取用户的配置文件并将其选择的布局放入 BaseController 正在读取的会话变量中。

不需要其他任何东西！

希望这对其他人有帮助。

谢谢！

# java - 将 JSONObject 转换为 List 或 JSONArray 的简单代码？

> ID：13123581
> 
> 赞同：4
> 
> 时间：2012-10-29T14:28:13.217
> 
> 标签：java, json, json-simple

我已经阅读了各种线程并发现了类似的问题，但是在为我的特定问题找到解决方案方面非常不成功。

```
JSONObject orr = (JSONObject)orderRows.get("orderRows");
System.out.println("data in orr = " + orr + "orr's type = " + orr.getClass()); 
```

回报：

> orr 中的数据 = {"470":[{"locationId":2,"quantity":1,"productId":1007}],"471":[{"locationId":2,"quantity":1," productId":1008}]}orr 的类型 = 类 org.json.simple.JSONObject

我正在尝试将这些数据放入一个数组/列表/任何我可以使用键 470,471 来检索数据的地方。

任何建议或指示非常感谢非常感谢...

澄清：

```
JSONObject orr = (JSONObject)orderRows.get("orderRows");
        JSONArray orderOne = (JSONArray)orr.get("471");
        System.out.println(orderOne);
        System.out.println(orderOne.get(0));
        JSONObject orderOneKey = (JSONObject)orderOne.get(0);
        System.out.println(orderOneKey.get("productId")); 
```

这就是我所追求的，但显然我不能做 orr.get("471") 因为我不知道这个数字是多少。

编辑：显然我不能回答我自己的问题 8 小时：

感谢朋友的帮助和一些摆弄，我找到了一个解决方案，我敢肯定这不是最有说服力的，但这正是我所追求的：

```
for(Object key: orr.keySet()) {

                JSONArray orderOne = (JSONArray)orr.get(key);
                JSONObject ordervalue = (JSONObject)orderOne.get(0);
                System.out.println(ordervalue.get("productId"));
        } 
```

感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:04:12.790

感谢朋友的帮助和一些摆弄，我找到了一个解决方案，我敢肯定这不是最有说服力的，但这正是我所追求的：

```
for(Object key: orr.keySet()) {

                JSONArray orderOne = (JSONArray)orr.get(key);
                JSONObject ordervalue = (JSONObject)orderOne.get(0);
                System.out.println(ordervalue.get("productId"));
        } 
```

感谢您的帮助和建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:58:11.963

您的响应中的数据属于 JSONObject 类型（请参阅花括号 {}）。所以顶层对象有两个“字段”，470和471。这些字段返回的数据都是数组。这些数组每个只有一个项目，它们都是对象。所以这里是一个获取数据的例子：

```
JSONObject jsonObject = (JSONObject)orderRows.get("orderRows");
JSONArray firstArray = jsonObject.getJSONArray("470");
JSONArray secondArray = jsonObject.getJSONArray("471");
JSONObject firstObject = firstArray.get(0);
int locationId = firstObject.getId("locationId");
/*...etc...*/ 
```

现在，一旦您将其拉出，您就可以将这些数据转换为您喜欢的任何结构，以便从现在开始更友好地访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:01:08.810

您可以使用提供数据绑定支持的库。你可以试试 Genson [http://code.google.com/p/genson/](http://code.google.com/p/genson/)，它速度快、易于使用并且有几个不错的功能。这是您的问题的示例：

```
// first define a class matching your json
class Product {
  private int locationId;
  private int quantity;
  private int productid;

  // setter & getters
}

// then use genson
Map<String, Product[]> productsMap = new Genson().deserialize(jsonStream, new GenericType<Map<String, Product[]>>() {}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-22T13:45:19.487

你也可以这样做：

```
JSONArray jsonArr = new JSONArray();
jsonArr.put(jsonObj); 
```

如果您想将整个 JSON 对象放入 JSON 数组中。

# javascript - jqGrid卡隆排序

> ID：13123583
> 
> 赞同：0
> 
> 时间：2012-10-29T14:28:28.967
> 
> 标签：javascript, jquery, sorting, jqgrid

我对 jqGrid 有问题，当我希望对 caron 字符（š、ž、č、ć、đ、...）进行排序时。我使用“caronCharacters”功能用代码替换那些caron...什么时候`caronCharacters(data, sortableColumns[sortIndex], false);`comment它排序没问题..但在这种情况下我们在word中没有caron但是一些“zxxx”代码...但是当我想替换这段代码回到卡隆字符然后我得到相同的结果，就好像我没有做任何事情一样......我想触发器“reloadGrid”再次对数据进行排序......希望你理解我......

```
$('#sortAZ,#sortZA').click(function(){
    var order='asc';
    if ($(this).attr('id')=='sortZA'){
        var order='desc';
    }
    if (sortIndex==''){
        return;
    }
    // change caron character into some code..like zž or zxxx
    var data = $('#gridTable').jqGrid('getGridParam').data;

    caronCharacters(data, sortableColumns[sortIndex], true);
    jQuery("#gridTable").jqGrid('setGridParam',{sortname:sortableColumns[sortIndex],sortorder:order});

    // change code back to caron...if next line is in comment it works sorting, but no carons...
    caronCharacters(data, sortableColumns[sortIndex], false);
    jQuery("#gridTable").trigger('reloadGrid');
    $('#dropMenuFilter').hide();

    function caronCharacters(data, sortableColumn, direction){
        if(direction){
            for(var i in data){
                data[i][sortableColumn] = replaceCaron(data[i][sortableColumn]);
                $('#gridTable').jqGrid('getLocalRow', i)[sortableColumn] = data[i][sortableColumn];
            }
        }
        else{
            for(var i in data){
                data[i][sortableColumn] = replaceCaronCode(data[i][sortableColumn]);
                $('#gridTable').jqGrid('getLocalRow', i)[sortableColumn] = data[i][sortableColumn];
            }
        }
    }
});

function replaceCaron(word){
    word = word.replace(/Č/g, "Cxxx");
    word = word.replace(/Ć/g, "Cxxx");
    word = word.replace(/Đ/g, "Dxxx");
    word = word.replace(/Š/g, "Sxxx");
    word = word.replace(/Ž/g, "Zxxx");
    word = word.replace(/č/g, "cxxx");
    word = word.replace(/ć/g, "cxxx");
    word = word.replace(/đ/g, "dxxx");
    word = word.replace(/š/g, "sxxx");
    word = word.replace(/ž/g, "zxxx");
    return word;
}

function replaceCaronCode(word){
    word = word.replace(/Cxxx/g, "Č");
    word = word.replace(/Cxxx/g, "Ć");
    word = word.replace(/Dxxx/g, "Đ");
    word = word.replace(/Sxxx/g, "Š");
    word = word.replace(/Zxxx/g, "Ž");
    word = word.replace(/cxxx/g, "č");
    word = word.replace(/cxxx/g, "ć");
    word = word.replace(/dxxx/g, "đ");
    word = word.replace(/sxxx/g, "š");
    word = word.replace(/zxxx/g, "ž");
    return word;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:43:03.827

如果我正确理解您的要求，您可以通过以下两种方式之一解决问题：

*   `sorttype`按定义为函数的用法实现自定义排序。请参阅提供示例[的答案。](https://stackoverflow.com/a/5296935/315935)
*   jqGrid 在比较或字符串期间使用的“子类”内部方法。请参阅相应示例的[另一个答案](https://stackoverflow.com/a/5822685/315935)。

# delphi - 如何停止通过 SndPlaySound 开始的音乐

> ID：13123587
> 
> 赞同：3
> 
> 时间：2012-10-29T14:28:38.957
> 
> 标签：delphi, delphi-7, playback

在这个[网站](http://delphi.about.com/od/objectpascalide/a/embed_resources_2.htm)上，我发现了如何将音乐添加到 .res 文件中，然后在您的 delphi .exe 中使用它。这是启动 WAVE 歌曲的代码。

```
procedure TForm2.FormActivate(Sender: TObject);
var
   hFind, hRes: THandle;
   Song: PChar;
 begin
  hFind := FindResource(HInstance, 'SonicSong', 'WAVE') ;
  if hFind <> 0 then begin
    hRes:=LoadResource(HInstance, hFind) ;
    if hRes <> 0 then begin
      Song:=LockResource(hRes) ;
      if Assigned(Song) then SndPlaySound(Song, snd_ASync or snd_Memory) ;
      UnlockResource(hRes) ;
    end;
    FreeResource(hFind) ;
  end;
end; 
```

所以我想知道的是如何在不关闭应用程序的情况下停止音乐？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T14:33:31.263

调用[`sndPlaySound`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd798676(v=vs.85).aspx)第一个参数设置为 的函数`nil`，这会导致当前播放的声音停止。作为第二个参数使用`SND_ASYNC`标志，因为正如参考所说，您必须使用此标志来终止您在代码中播放的异步播放波形声音：

```
sndPlaySound(nil, SND_ASYNC); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T23:09:01.667

您可以通过使用`SND_RESOURCE`功能来简化您的代码，`PlaySound()`而不是`sndPlaySound()`：

```
procedure TForm2.FormActivate(Sender: TObject);
begin
  PlaySound('SonicSong', HInstance, SND_AYNC or SND_RESOURCE);
end;

procedure TForm2.FormDeactivate(Sender: TObject);
begin
  PlaySound(nil, HInstance, SND_AYNC or SND_RESOURCE);
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-26T23:22:27.390

测试：

```
PlaySound(nil, 0, 0); 
```

# java - java中的随机标识符

> ID：13123593
> 
> 赞同：5
> 
> 时间：2012-10-29T14:28:57.923
> 
> 标签：java, security, random, statistics

我想在java中生成随机标识符。标识符应该有一个固定的大小，两次生成相同标识符的概率应该很低（系统大约有50万用户）。另外；标识符应该很长，以至于通过暴力攻击“猜测”它是不可行的。

到目前为止，我的方法是这样的：

```
String alphabet = "0123456789ABCDE....and so on";
int lengthOfAlphabet = 42; 
long length = 12; 

public String generateIdentifier(){
    String identifier = "";
    Random random = new Random(); 
    for(int i = 0;i<length;i++){
        identifier+= alphabet.charAt(random.nextInt(lengthOfAlphabet));
    }
    return identifier; 
} 
```

我通过数据库中的约束来强制执行唯一性。如果我点击了一个已经创建的标识符，我将继续生成，直到找到一个未使用的标识符。

我的假设是我可以调整 lenghtOfAlpahbet 和 length 以获得我正在寻找的属性：

1.  罕见的碰撞
2.  用蛮力是不可行的
3.  标识符应尽可能短，因为系统用户必须键入它。

这是一个好方法吗？有人对“长度”的价值有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T00:55:51.033

我认为 randomUUID 是你的朋友。它是固定宽度。[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/UUID.html#randomUUID](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/UUID.html#randomUUID) ()

如果我没记错的话，因为 UUID 是 32 个十六进制数字（0-f），那么排列的数量是 16^32，这是一个很大的数字，因此很难猜到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T20:48:52.693

我建议保持简单，并使用内置方法来表示编码为字符串的普通伪随机整数：

```
Random random = new Random(); 

/**
 * Generates random Strings of 1 to 6 characters. 0 to zik0zj
 */
public String generateShortIdentifier() {
    int number;
    while((number=random.nextInt())<0);
    return Integer.toString(number, Character.MAX_RADIX);
}

/**
 * Generates random Strings of 1 to 13 characters. 0 to 1y2p0ij32e8e7
 */
public String generateLongIdentifier() {
    long number;
    while((number=random.nextLong())<0);
    return Long.toString(number, Character.MAX_RADIX);
} 
```

`Character.MAX_RADIX`是 36，这将等于所有 0 到 9 和 A 到 Z 的字母表。简而言之，您会将随机整数转换为以 36 为底的数字。

如果需要，您可以调整所需的长度，但只需 13 个字符，您就可以编码 2^63 个数字。

**编辑**：修改它只生成 0 到 2^63，没有负数，但这取决于你。

# java - 内容辅助在 Eclipse 中不起作用

> ID：13123599
> 
> 赞同：2
> 
> 时间：2012-10-29T14:29:15.000
> 
> 标签：java, eclipse, eclipse-juno, content-assist

当我`Ctrl-Space`在 Eclipse June 中输入 Java 文件时，我收到“没有建议”。同时，如果我这样做，`Edit->Content Assist->Java Proposals`我有正常的提案清单。

即，由于某种原因，默认提案不是 Java。

它可以是什么以及如何设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-30T03:55:46.607

当我升级到 Eclipse Kepler 时，这发生在我身上。转到您的首选项。相应的页面应该是 Java -> Editor -> Content Assist -> Advanced。

有两个提案类型列表。检查第一个列表中的类型允许该建议在检测到您按下触发键时自动出现。如果在任何选中的提案类型中都找不到任何辅助选项，则不会出现“内容辅助”框。

选中第二个列表中的类型允许该提案类型在其已在屏幕上时出现在 Content Assist 框中，通过按命令循环当前提案类型进行访问。您甚至可以更改出现的顺序。

为了解决您的问题，至少，确保 Java 提案已在第一个列表中进行检查（从技术上讲，您可以只在第二个列表中进行检查，但这意味着您需要手动调出 Content Assist 并循环到 Java时间）。选中后，应自动将其选为 .java 文件的默认内容辅助。

# java - Hibernate 删除/插入数据库阻塞锁

> ID：13123601
> 
> 赞同：3
> 
> 时间：2012-10-29T14:29:25.837
> 
> 标签：java, hibernate, oracle11g, hibernate-mapping, database-locking

我们正在使用`Hibernate 3.6.1.FINAL`反对`Oracle 11g`.

我们在数据库中遇到阻塞锁，我认为这是由 Hibernate 的意外副作用引起的。

这是我们需要解决的关键问题，因为数据库阻塞锁迅速滚雪球，事务开始超时，导致生产中断。

**我试图弄清楚是否存在 Hibernate 可以在幕后删除和重新插入一组子项的特定场景，或者以某种方式可能导致删除/插入上的阻塞锁。**

我正在寻找有关可能原因的想法/建议/见解，不一定是确切的答案。

我已经隔离了所涉及的实体及其映射。不幸的是，由于我们有一个包含大量代码的庞大遗留系统，我不得不想出一个简化的例子：

**父.hbm.xml**

```
// Parent has a unique ID generated with a Sequence,
// an index column called ORD, and a Version column called UPDATE_COUNTER.
<!-- bi-directional one-to-many association to Child -->
<bag
    name="children"
    lazy="false"
    inverse="true"
    cascade="all-delete-orphan"
    order-by="ord asc">
    <key column="PARENT_ID" />
    <one-to-many class="Child" />
</bag> 
```

**Child.hbm.xml**

```
// Child has a unique ID generated with a Sequence, 
// and a Version column called UPDATE_COUNTER.
<!-- bi-directional many-to-one association to Parent -->
<many-to-one
    name="parent"
    class="Parent"
    not-null="true"
>
    <column name="PARENT_ID" />
</many-to-one> 
```

我们的 DBA 报告说他们看到以下内容：

阻塞的 SQL：

```
insert into CHILD (UPDATE_COUNTER, ORD, PARENT_ID, ID) values (:1 , :2 , :3 , :4) 
```

阻塞 SQL：

```
delete from CHILD where ID=:1  and UPDATE_COUNTER=:2 
```

这是我迄今为止尝试过的：

1.  对我们的代码库进行了全面审核，确定我们无法删除和插入具有相同主键的行。我们所有的 INSERT for Child 都是在 ID 设置为 null 的情况下完成的，在这种情况下，Sequence 将生成唯一 ID。

2.  打开 show_sql。此外，DBA 在 Child 上设置了一个触发器来捕获所有 DML 活动，因此我们可以在开发中获取绑定变量。

    我发现以下文章说 Hibernate 可以删除所有然后重新插入包和列表：

    [为什么 Hibernate 会“删除所有然后重新插入”](http://assarconsulting.blogspot.com/2009/08/why-hibernate-does-delete-all-then-re.html)

    [Hibernate - 设置、地图、包和列表差异](http://dannylesnik.blogspot.com/2010/10/hibernate-set-map-bag-list-differences.html)

    但是，我确定这不会发生。我编写了测试代码，删除了中间的一个子对象（ORD=5，包含 10 个 ORD=0 到 ORD=9 的子对象），然后保存父对象。

    我在 DML 活动表中看到，对已删除的子项发出了删除操作，并对其余 9 个将其 ORD 设置为正确值的子项执行了更新。

正如我所提到的，我不是在寻找确切的答案。如果任何对 Hibernate 有丰富经验的人可以就我可能遇到的其他路径或途径提供任何见解或建议，我将非常感激。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:35:04.207

您可能需要考虑采用[**悲观锁定**](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/transactions.html#transactions-locking)。一旦完成...`Hibernate will always use the locking mechanism of the database; it never lock objects in memory.`

# cocos2d-x - 如何从 cocos2dx 中的自定义类中获取 CCBAnimationManager

> ID：13123604
> 
> 赞同：0
> 
> 时间：2012-10-29T14:29:38.823
> 
> 标签：cocos2d-x

我正在从我的 Cocos2d-x 项目中加载一个 CCB 文件，但我无法从自定义类访问 CCBAnimationManager。

在 Cocos2d 中使用 Objective-C 很简单：

CCBAnimationManager* animationManager = self.userObject;

但是 C++ 中的相同实现返回一个空值，执行会导致崩溃......

任何的想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T01:00:55.987

是的，它不像 obj-C 那样简单。新的 TestCpp 项目为此提供了一个示例。查看（CocosBuilderTest->AnimationsTest）。

基本上，您需要创建一个 CCNodeLoaderLibrary 并将其注册到您的自定义加载器类中。

```
CCNodeLoaderLibrary * ccNodeLoaderLibrary = CCNodeLoaderLibrary::newDefaultCCNodeLoaderLibrary();

ccNodeLoaderLibrary->registerCCNodeLoader("TestAnimationsLayer", AnimationsTestLayerLoader::loader()); 
```

然后用那个 ccNodeLoaderLibrary 创建一个 CCBReader

```
cocos2d::extension::CCBReader * ccbReader = new cocos2d::extension::CCBReader(ccNodeLoaderLibrary); 
```

现在，您将能够通过此 ccbReader 获取 CCBAnimationManager

```
ccbReader->getAnimationManager() 
```

# mysql - 创建表为（使用列和表名）

> ID：13123607
> 
> 赞同：4
> 
> 时间：2012-10-29T14:29:48.957
> 
> 标签：mysql, sql

我需要从 MySql 中的几个表构建一个表，我希望它有两列，例如：

```
------------------
姓名 | 表名 |
------------------
```

我正在这样做：

```
Create table teams as 
(
Select name from table1
union
Select name from table2
union
Select name from table3); 
```

如何将每个表名包含为第二列？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:32:45.333

包括带引号的字符串文字。确保还给它一个列别名，它将用作结果表中的列名。

```
CREATE TABLE teams AS 
  /* Quoted string literal with column alias */
  (SELECT name, 'table1' AS `tablename` FROM table1)
  UNION 
  (SELECT name, 'table2' AS `tablename` FROM table2)
  UNION
  (SELECT name, 'table3' AS `tablename` FROM table3); 
```

请注意，由于您实际上为每一行添加了第二个值，以将其与其他表中可能相似的行区分开来，`UNION`因此现在是 a 的等效项`UNION ALL`，并且不会像计划`UNION`那样对重复行进行重复数据删除。请注意，结果可能与您原来的结果不同`UNION`。

# c++ - 如何重载 new 运算符以在堆栈上分配？

> ID：13123609
> 
> 赞同：0
> 
> 时间：2012-10-29T14:29:56.040
> 
> 标签：c++, memory-management

如何为类类型重载 new 运算符，以便它在堆栈而不是堆上分配内存（基本上这样用户就不必在之后调用 delete）。

像这样的东西怎么样：

```
class A{
    private:
        A(int i):
           this->i(i);
        {}
        A a;
        int i;

    public:
        void* operator new(size_t sz){
            a(12);
        }
}; 
```

上述解决方案有效吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T14:33:53.783

# 不！

### 使用自动存储...

该`new`运算符旨在实现动态分配（您称之为“堆上”），尽管您可以提供自己的分配器，但您不能将其扭曲为遵守自动存储持续时间对象的范围规则（您是什么调用“在堆栈上”）。

相反，写：

```
MyType myobject;  // automatic storage duration 
```

### ...或智能指针...

或者，如果您不介意动态存储持续时间，但*只想*避免以后手动销毁，请使用智能指针：

```
std::unique_ptr<MyType> myptr(new myobject());  // unique, dynamic storage duration
std::shared_ptr<MyType> myptr(new myobject());  // shared, dynamic storage duration 
```

这两者都可以在 C++11 ( `std::`) 和 Boost ( `boost::`) 中找到。

### ...或安置`new`？

另一种方法可能是*安置新*的，但这是一条黑暗而危险的旅行路径，我现阶段当然不推荐。或者，坦率地说，任何阶段......你通常仍然需要手动销毁。您所获得的只是使用关键字`new`，这似乎毫无意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T14:35:39.020

我认为这里的好答案是：

**不要重载 operator new。**

如果你*还想*走那条路，可以看看[这个问题](https://stackoverflow.com/questions/583003/overloading-new-delete)。

如果没有，您始终可以使用智能指针或共享指针来避免用户不得不删除分配的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T14:34:48.973

看来你不知道你在问什么。根据定义，new 运算符在堆上分配内存。要在堆栈上创建对象，只需将其声明为局部变量。

看看你*真正*想做的事情，你说你认为这很棒的原因是：

> 基本上这样用户就不必在之后调用 delete

并且该功能是使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer#C.2B.2B_smart_pointers)实现的。我强烈建议你花时间学习这些。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T14:35:16.983

为什么不只是自动变量（它是“在堆栈上”并且不需要手动调用析构函数：

```
int foo() {
  A a;
  int i;
  ...
  // don't need to call delete 
```

}

* * *

从字面上回答你的问题，有一个新的位置，它从用户那里获取内存 - 所以你可以把这个内存作为自动缓冲区：

```
 alignas(int) char buffer[sizeof(int)];
  int* p = new (buffer) int;
  //           ^^^^^^^^ 
```

对于非 POD 对象 - 你不需要调用 delete - 但你必须手动调用析构函数：

```
 class A { public: ~A(){} };
  alignas(A) char buffer[sizeof(At)];
  A* p = new (buffer) A;
  //         ^^^^^^^^
  p->~A(); 
```

`alignas`在 C++11 中是新的——在 C++03 中，你必须以不同的方式处理正确的对齐。必须返回正确对齐的内存`new`- 否则行为未定义。

# jquery - 水平滚动推文

> ID：13123612
> 
> 赞同：1
> 
> 时间：2012-10-29T14:30:13.193
> 
> 标签：jquery, html, scroll, tweets

我正在尝试在我的网站顶部集成一个滚动推文栏，到目前为止，我已经遵循了几个似乎都遵循相同材料的教程，但我无法让它工作。

会发生什么是设施出现但只是说“加载”我想我所有的代码都设置正确了，但我可能遗漏了一些东西，有人可以在正确的方向上轻推一下吗？:)

这是提要的标头代码：

```
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js'></script>
  <script src='js/jquery.marquee.js'></script> 
  <script type='text/javascript'>
      //<![CDATA[ 
   var Twitter = {
    init: function () {
     // Pass in the username you want to display feeds for
   this.insertLatestTweets('GumBumRadio');
    }, 

    // This replaces the <p>Loading...</p> with the tweets
    insertLatestTweets: function (username) {
     var limit = 5; // How many feeds do you want?
     var url  = 'http://api.twitter.com/1/statuses/user_timeline.json?screen_name=GumBumRadio' + username + '&count=' + limit + '&callback=?';

     // Now ajax in the feeds from twitter.com
     $.getJSON(url, function (data) {
      // We'll start by creating a normal marquee-element for the tweets
      var html = '<marquee behavior="scroll" scrollamount="1" direction="left">';

      // Loop through all the tweets and create a link for each
      for (var i in data) {
       html += '<a href="http://twitter.com/' + username + '#status_' + data[i].id_str + '">' + data[i].text + ' <i>' + Twitter.daysAgo(data[i].created_at) + '</i></a>';
      }

      html += '</marquee>';

      // Now replace the <p> with our <marquee>-element
      $('#twitter p').replaceWith(html);

      // The marquee element looks quite shite so we'll use Remy Sharp's plug-in to replace it with a smooth one
      Twitter.fancyMarquee();
     });
    }, 

    // Replaces the marquee-element with a fancy one
    fancyMarquee: function () {
     // Replace the marquee and do some fancy stuff (taken from remy sharp's website)
     $('#twitter marquee').marquee('pointer')
      .mouseover(function () {
       $(this).trigger('stop');
      })
      .mouseout(function () {
       $(this).trigger('start');
      })
      .mousemove(function (event) {
       if ($(this).data('drag') == true) {
        this.scrollLeft = $(this).data('scrollX') + ($(this).data('x') - event.clientX);
       }
      })
      .mousedown(function (event) {
       $(this).data('drag', true).data('x', event.clientX).data('scrollX', this.scrollLeft);
      })
      .mouseup(function () {
       $(this).data('drag', false);
      });
    }, 

    // Takes a date and return the number of days it's been since said date
    daysAgo: function (date) {
     // TODO: Fix date for IE...
     if ($.browser.msie) {
      return '1 day ago';
     }

     var d = new Date(date).getTime();
     var n = new Date().getTime();

     var numDays = Math.round(Math.abs(n - d) / (1000 * 60 * 60 * 24));
     var daysAgo = numDays + ' days ago';

     if (numDays == 0) {
      daysAgo = 'today';
     }
     else if (numDays == 2) {
      daysAgo = numDays + ' day ago';
     }

     return daysAgo;
    }
   };

   Twitter.init();
   //]]>
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:05:05.293

生成的推特链接似乎有问题。在我的浏览器中，它要求：

[http://api.twitter.com/1/statuses/user_timeline.json?screen_name=?GumBumRadio&count=5&callback=jQuery16106500070334877819_1351522993556&_=1351522993562](http://api.twitter.com/1/statuses/user_timeline.json?screen_name=?GumBumRadio&count=5&callback=jQuery16106500070334877819_1351522993556&_=1351522993562)

返回

```
jquery16106500070334877819_1351522993556({"errors":[{"message":"Sorry, that page does not exist","code":34}]}); 
```

编辑：

是吗？在 screen_name 变量中标记。此外，您还将用户名包含`GumBumRadio`在一个变量中，该变量也在 URL 链接中硬编码。

# cakephp - 注意（8）：CakePHP 2.2 中的 session_start()

> ID：13123615
> 
> 赞同：3
> 
> 时间：2012-10-29T14:30:18.393
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2

随机，有时，当我加载页面时，它会显示此错误：

```
Notice (8): session_start(): ps_files_cleanup_dir: opendir(C:\Windows\TEMP) failed: No such file or directory (2) [CORE\Cake\Model\Datasource\CakeSession.php, line 615] 
```

我使用的是 CakePHP 2.2。这里发生了什么？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T20:02:09.567

PHP 中有一个会话垃圾收集器，它有可能在访问 PHP 站点时执行。这是在 php.ini 中定义的：

```
session.gc_probability
session.gc_divisor
session.gc_maxlifetime
session.save_path 
```

[http://www.php.net/manual/en/session.configuration.php](http://www.php.net/manual/en/session.configuration.php)

如果位于 save_path 中的 sess_<PHPSESSID> 文件早于 gc_maxlifetime，则您有 gc_probability/gc_divisor 机会删除它们。

默认情况下 session.save_path 在 Windows 服务器上设置为 C:\Windows\Temp。我怀疑这几乎总是存在的。

您需要为执行 PHP 脚本的任何帐户（如果我们正在谈论 IIS，则默认为 IUSR）提供高级安全下的“列表文件夹”权限。PHP 使用此权限列出 C:\Windows\Temp（或您配置的任何位置）中的文件，以确定它需要解析的 sess_<PHPSESSID> 的实际名称。然后它将遍历这些文件中的每一个，如果修改日期早于 maxlifetime 它将删除该文件。它具有默认情况下所需的所有权限，但列表文件夹*除外。*奇怪的是，IIS_IUSRS（我相信一个用于应用程序池的组）被授予了这个权限，而不是 IUSR。

如果您好奇，IUSR 能够创建这些 sess_<PHPSESSID> 文件，因为“用户”被授予遍历文件夹权限和创建文件权限（到目前为止，它从未执行列表操作）。[从这里](http://forums.iis.net/t/1147103.aspx)执行的测试来看，IUSR 似乎是 Authenticated Users 或 Users 组的不言而喻的成员。还有一个特殊的“CREATOR OWNER”权限集，赋予所有者对他们创建的文件的完全权限。这是IUSR获得实际删除文件的特​​权的地方。这有点令人费解，但您唯一需要担心的是“列表文件夹”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:52:53.013

似乎保存会话文件的目录设置为您的 php.ini 中不存在的目录。所以要么创建它抱怨的目录，要么为`session.save_path`php config 指定另一个目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-19T15:05:03.953

您可以在 Config/core.php 中更改 cackphp 中的会话保存路径。

检查该文件中的以下评论。

```
* The built in defaults are:
 *
 * - 'php' - Uses settings defined in your php.ini.
 * - 'cake' - Saves session files in CakePHP's /tmp directory.
 * - 'database' - Uses CakePHP's database sessions.
 * - 'cache' - Use the Cache class to save sessions.
 *
 * To define a custom session handler, save it at /app/Model/Datasource/Session/<name>.php.
 * Make sure the class implements `CakeSessionHandlerInterface` and set Session.handler to <name>
 *
 * To use database sessions, run the app/Config/Schema/sessions.php schema using
 * the cake shell command: cake schema create Sessions
 *
 */
    Configure::write('Session', array(
        'defaults' => 'cake'
    )); 
```

# php - FuelPHP 查询构建器加入多个字段

> ID：13123616
> 
> 赞同：1
> 
> 时间：2012-10-29T14:30:21.110
> 
> 标签：php, mysql, sql, fuelphp

我需要使用各种参数的连接创建查询，例如：

```
SELECT foo.*, bar.* FROM foo LEFT JOIN bar ON foo.c1 = bar.c1 AND foo.c2 = bar.c2 WHERE foo c3 = "somedata"; 
```

问题是我找不到如何使用 FuelPHP Query Builder 创建“AND”。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:37:32.760

可以在一个连接中使用多个 ->on。在这种情况下，Builder 将使用“AND”组合它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:18:55.077

他们编译 on 条件的方式使得无法设置像`status`= 1这样的值

我将函数 on_string 添加到 \Fuel\Core\Database_Query_Builder_Join

```
public function on_string($string) { 
    $this->_on_string = $string;
    return $this;
} 
```

在编译（）

```
 if ($this->_on_string == "") { //yau add on string
        $conditions = array();
        foreach ($this->_on as $condition) {
            // Split the condition
            list($c1, $op, $c2) = $condition;

            if ($op) {
                // Make the operator uppercase and spaced
                $op = ' ' . strtoupper($op);
            }

            // Quote each of the identifiers used for the condition
            $conditions[] = $db->quote_identifier($c1) . $op . ' ' . $db->quote_identifier($c2);
        }

        // Concat the conditions "... AND ..."
        $sql .= '(' . implode(' AND ', $conditions) . ')';
    } else {            
        $sql .= '(' . $this->_on_string . ')'; //yau add on string
    } 
```

也要将您的方法公开给 Database_Query_Builder_Select。

```
 public function on_string($string)
{
    $this->_last_join->on_string($string);

    return $this;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T16:54:59.100

我认为这不是陈顺佑所必需的。您可以根据字符串进行选择，但您需要像这样转义值：

`->on('t.object_property', '=', \DB::quote($property));`

# c# - 基于文件C#的位置获取目录

> ID：13123622
> 
> 赞同：3
> 
> 时间：2012-10-29T14:30:43.607
> 
> 标签：c#, directory, ncrunch

我正在尝试从文件中写入相对路径，但我能获得的唯一相对路径来自正在运行的应用程序文件。

这会导致问题，因为 NCrunch 从不​​同的目录运行它的测试，所以它失败了我的所有测试，因为它找不到与我的代码文件相关的文件。

这是一个相对路径很重要，因为有几个人在这个项目上工作，所以绝对路径不起作用。

有没有办法使路径相对于编写代码的 .cs 文件？

直到现在我一直在使用

```
 private static readonly string MyDocumentsRoot =      Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
        public static readonly string ApplicationRoot = MyDocumentsRoot + @"\Visual Studio 2012\Projects\"; 
```

但真的需要它是相对的一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:53:49.520

该解决方案在 NCRUNCH 文档中有详细记录：

[隐式文件依赖](http://www.ncrunch.net/documentation/considerations-and-constraints_implicit-file-dependencies)

其他解决方案迟早会失败。（我在使用 MSTest 时遇到了类似的问题，它提供了类似的解决方案）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:34:16.943

您可以尝试使用此代码 - 基于`GetExecutingAssembly`方法

```
string path  = System.Reflection.Assembly.GetExecutingAssembly().Location;
string directory= Path.GetDirectoryName( path ); 
```

或者

```
 string path  = System.Reflection.Assembly.GetAssembly(YourClass).Location; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:34:34.620

您可以使用`str=Directory.getdirectory`which 将为您提供应用程序的路径（直到 Release 或 Debug 之前的文件夹（您的应用程序所在的位置）并将其保存在字符串中（该方法返回一个字符串）。之后，您可以使用`str.replace(str1,str2)`方法 which定位`str1`并用 . 替换它`str2`。只是不要忘记`\`在字符串中是`\\`因为`\`是转义字符。如果您需要转义字符方面的帮助，请告诉我，以便我也可以为您提供帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T14:34:45.190

[文档](http://wiki.ncrunch.net/component-configuration.ashx)显示路径是相对于项目文件的：

> 例如，您可以指定要包含的以下文件：
> 
> ```
> SpecialConfiguration\ImportantConfigFile.config
> ..\CustomBuild\**.*
> ..\..\TestResources\Spreadsheets\*.xls 
> ```
> 
> 这将包括单个文件 (ImportantConfigFile.config)、`..\CustomBuild`目录的全部内容、其所有子目录以及目录中的所有 .xls 文件`..\..\TestResources\Spreadsheets`。
> 
> **所有文件路径必须相对于磁盘上项目文件的路径指定。**当 NCrunch 构建工作空间时，它会自动排列所有相关文件，使它们在工作空间中的相对路径与它们在原始位置中的相对路径相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T14:54:42.153

我通常会在我的可执行文件所在的位置放置一个老式的 ini 文件。这里我存储了应用程序所需的文件和文件夹的绝对路径。这也使我能够在生产环境（在客户站点上）与在我的开发环境中以不同的方式配置这些路径。在 NCrunch 运行程序集的文件夹中仅保留此 ini 文件的副本即可解决问题。

我的 ini 文件实现搜索所有文件夹，从可执行文件所在的文件夹开始，一直到根文件夹，直到找到 ini 文件。这使我能够使用通用的 ini 文件拥有不同的可执行文件。例如，如果将 ini 文件放在`bin`文件夹中，则`Debug`和`Release`版本将自动访问相同的 ini 文件。

# php - PHP 邮件 utf-8 来自

> ID：13123623
> 
> 赞同：0
> 
> 时间：2012-10-29T14:30:50.610
> 
> 标签：php, email, utf-8

> **可能重复：**
> [如何使用 PHP 邮件从地址更改信封？](https://stackoverflow.com/questions/179014/how-to-change-envelope-from-address-using-php-mail)

我的PHP代码：

```
function send ( $from, $to, $subject, $message ) {

    $header = array ();
    $header [] = "MIME-Version: 1.0";
    $header [] = "Content-type: text/html; charset=UTF-8";
    $header [] = "From: =?UTF-8?B?" . base64_encode ( $from [ 'name' ] ) . "?= <" . $from [ 'mail' ] . ">";
    return mail ( $to, "=?UTF-8?B?" . base64_encode ( $subject ) . "?=", $message, implode ( "\r\n", $header ) );

}

send ( array ( 'name' => 'oóöőuúüűÁÉÍ', 'mail' => 'from@mail.mail' ), 'to@mail.mail', 'oóöőuúüűÁÉÍ', 'oóöőuúüűÁÉÍ.' ); 
```

这是可行的，但是... from 不是“oóöőuúüűÁÉÍ”，而是“from@mail.mail”。信源没问题，根据姓名和邮件进行编码。mail.com 账户中查看失败，但信源正常。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-29T14:59:29.827

尝试：

$headers []= '内容类型：文本/html; 字符集=iso-8859-1';

我希望能有所帮助！

# php - XML CDATA 部分

> ID：13123625
> 
> 赞同：0
> 
> 时间：2012-10-29T14:30:53.307
> 
> 标签：php, xml, rss

```
$description = $dom->createElement("description");
$descriptionText = $dom->createTextNode($row['description']);
$description->appendChild($descriptionText);
$item->appendChild($description); 
```

我承认（再次），我将 CDATASection 放在哪里用于我的 XML 描述？我已经玩了几个小时了，我是不是太复杂了？帮助！

先感谢您

斯图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:34:07.953

不完全确定你在问什么，但也许是[http://docs.php.net/domdocument.createcdatasection](http://docs.php.net/domdocument.createcdatasection)

```
$descriptionText = $dom->createCDATASection($row['description']); 
```

# r - 有pmin和pmax各取na.rm，为什么没有psum？

> ID：13123638
> 
> 赞同：37
> 
> 时间：2012-10-29T14:31:44.597
> 
> 标签：r

似乎 R 可能缺少一个明显的简单功能：`psum`. 它是作为不同的名称存在，还是在某个包中？

```
x = c(1,3,NA,5)
y = c(2,NA,4,1)

min(x,y,na.rm=TRUE)    # ok
[1] 1
max(x,y,na.rm=TRUE)    # ok
[1] 5
sum(x,y,na.rm=TRUE)    # ok
[1] 16

pmin(x,y,na.rm=TRUE)   # ok
[1] 1 3 4 1
pmax(x,y,na.rm=TRUE)   # ok
[1] 2 3 4 5
psum(x,y,na.rm=TRUE)
[1] 3 3 4 6                             # expected result
Error: could not find function "psum"   # actual result 
```

我意识到这`+`已经很像`psum`了，但是呢`NA`？

```
x+y                      
[1]  3 NA NA  6        # can't supply `na.rm=TRUE` to `+` 
```

有什么要补充的`psum`吗？或者我错过了什么。

这个问题是这个问题的后续：
[Using `:=`in data.table to sum the values of two columns in R, ignoring NAs](https://stackoverflow.com/questions/13106645/using-in-data-table-to-sum-the-values-of-two-columns-in-r-ignoring-nas)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-29T14:39:05.917

在@JoshUlrich 对上一个问题的评论之后，

```
psum <- function(...,na.rm=FALSE) { 
    rowSums(do.call(cbind,list(...)),na.rm=na.rm) } 
```

**编辑**：来自斯文·海恩斯坦：

```
psum2 <- function(...,na.rm=FALSE) { 
    dat <- do.call(cbind,list(...))
    res <- rowSums(dat, na.rm=na.rm) 
    idx_na <- !rowSums(!is.na(dat))
    res[idx_na] <- NA
    res 
}

x = c(1,3,NA,5,NA)
y = c(2,NA,4,1,NA)
z = c(1,2,3,4,NA)

psum(x,y,na.rm=TRUE)
## [1] 3 3 4 6 0
psum2(x,y,na.rm=TRUE)
## [1] 3 3 4 6 NA

n = 1e7
x = sample(c(1:10,NA),n,replace=TRUE)
y = sample(c(1:10,NA),n,replace=TRUE)
z = sample(c(1:10,NA),n,replace=TRUE)

library(rbenchmark)
benchmark(psum(x,y,z,na.rm=TRUE),
          psum2(x,y,z,na.rm=TRUE),
          pmin(x,y,z,na.rm=TRUE), 
          pmax(x,y,z,na.rm=TRUE), replications=20)

##                          test replications elapsed relative 
## 4  pmax(x, y, z, na.rm = TRUE)           20  26.114    1.019 
## 3  pmin(x, y, z, na.rm = TRUE)           20  25.632    1.000 
## 2 psum2(x, y, z, na.rm = TRUE)           20 164.476    6.417
## 1  psum(x, y, z, na.rm = TRUE)           20  63.719    2.486 
```

Sven 的版本（可以说是正确的版本）要慢一些，尽管它是否重要显然取决于应用程序。有人想破解内联/Rcpp 版本吗？

至于为什么它不存在：不知道，但祝你好运让 R-core 做这样的添加......我不能随便想到一个足够广泛的`*misc`包可以用来......

Matthew 在 r-devel 上的后续线程在这里（这似乎证实了）：
[r-devel：有 pmin 和 pmax 各取 na.rm，psum 怎么样？](http://r.789695.n4.nabble.com/There-is-pmin-and-pmax-each-taking-na-rm-how-about-psum-tp4647841.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-05-16T08:11:02.760

在 CRAN 上快速搜索后，至少有 3 个包具有`psum`功能。`rccmisc`,`incadata`和`kit`. `kit`似乎是最快的。下面再现了 Ben Bolker 的例子。

```
benchmark(
  rccmisc::psum(x,y,z,na.rm=TRUE),
  incadata::psum(x,y,z,na.rm=TRUE),
  kit::psum(x,y,z,na.rm=TRUE), 
  psum(x,y,z,na.rm=TRUE),
  psum2(x,y,z,na.rm=TRUE),
  replications=20
)
#                                    test replications elapsed relative
# 2 incadata::psum(x, y, z, na.rm = TRUE)           20   20.05   14.220
# 3      kit::psum(x, y, z, na.rm = TRUE)           20    1.41    1.000
# 4           psum(x, y, z, na.rm = TRUE)           20    8.04    5.702
# 5          psum2(x, y, z, na.rm = TRUE)           20   20.44   14.496
# 1  rccmisc::psum(x, y, z, na.rm = TRUE)           20   23.24   16.482 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-09T17:17:04.190

另一种方法的优点是**也可以使用矩阵**，就像`pmin`and一样`pmax`。

```
psum <- function(..., na.rm = FALSE) {
  plus_na_rm <- function(x, y) ifelse(is.na(x), 0, x) + ifelse(is.na(y), 0, y)
  Reduce(if(na.rm) plus_na_rm else `+`, list(...))
}

x = c(1,3,NA,5)
y = c(2,NA,4,1)

psum(x, y)
#> [1]  3 NA NA  6
psum(x, y, na.rm = TRUE)
#> [1] 3 3 4 6

# With matrices
A <- matrix(1:9, nrow = 3)
B <- matrix(c(NA, 2:8, NA), nrow = 3)

psum(A, B)
#>      [,1] [,2] [,3]
#> [1,]   NA    8   14
#> [2,]    4   10   16
#> [3,]    6   12   NA
psum(A, B, na.rm = TRUE)
#>      [,1] [,2] [,3]
#> [1,]    1    8   14
#> [2,]    4   10   16
#> [3,]    6   12    9 
```

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0）于 2020 年 3 月 9 日创建)

一个警告：如果一个元素`NA`跨越所有求和的对象 and `na.rm = TRUE`，结果将是`0`（而不是`NA`）。

例如：

```
psum(NA, NA, na.rm = TRUE)
#> [1] 0 
```

# java - 在 Java swing GUI 中将 ActionListener 类添加到多个 JButton？

> ID：13123642
> 
> 赞同：1
> 
> 时间：2012-10-29T14:31:53.523
> 
> 标签：java, swing, user-interface, actionlistener, calculator

我用Java做了一个计算器，但是有些代码非常重复。这是我用来添加 ActionListener 的内容

```
 one.addActionListener(handlerOne);
    two.addActionListener(handlerOne);
    three.addActionListener(handlerOne);
    four.addActionListener(handlerOne);
    five.addActionListener(handlerOne);
    six.addActionListener(handlerOne);
    seven.addActionListener(handlerOne);
    eight.addActionListener(handlerOne);
    nine.addActionListener(handlerOne);
    zero.addActionListener(handlerOne);

    add.addActionListener(handlerOne);
    subtract.addActionListener(handlerOne);
    multiply.addActionListener(handlerOne);
    divide.addActionListener(handlerOne);
    sqrt.addActionListener(handlerOne);
    exp.addActionListener(handlerOne);
    equals.addActionListener(handlerOne);
    cls.addActionListener(handlerOne);
    modulus.addActionListener(handlerOne); 
```

有什么办法可以缩短这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T14:36:49.487

您可以将所有组件（按钮）放在 List 中，并通过一些代码附加侦听器，例如

```
for( Component c : componentsList ) {
  c.addActionListener(yourListener);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:37:49.843

将 a`JButton[]`用于所有或部分（可能只有数字按钮）按钮。然后遍历该数组并添加`ActionListener`到按钮：

```
JButton[] buttons = new JButton[10]; // For digit buttons.

int i = 0;

for(JButton button: buttons)
   buttons[i++].addActionListener(handlerOne); 
```

同样，您可以将 a`JButton[]`用于操作员按钮。我认为，通过使用不同的数组，您可以避免可能的混淆。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:35:21.860

创建一个将创建按钮并为其分配侦听器的方法。您仍然会得到一堆调用，但至少所有按钮创建和初始化代码都将驻留在同一个方法中，因此您可以更轻松地为每个按钮修改它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T14:41:32.767

可能还有另一种选择 - 将所有按钮添加到单个容器并将侦听器添加到该容器。

# php - 无法从 PHP json_encode 转换或访问 JSON 对象

> ID：13123647
> 
> 赞同：0
> 
> 时间：2012-10-29T14:32:03.207
> 
> 标签：php, javascript, arrays, json

无法从 PHP json_encode 转换或访问 JSON 对象

```
<?php
$f_array = array();   // ---- Custom Line 1
for ($i=0; $i < $interval; ++$i) 
{
    $t_date = date('Y-m-d', strtotime($k_date1 . "+ $i day"));    

    $f_array = array();
    $f_query = mysql_query("select COUNT(j.job_id) as `job_count`
                            from jobs j
                            where j.job_posted_date 
                            LIKE '%$t_date%' and j.job_status = 3");

    if (mysql_num_rows($f_query) > 0) 
    {
        $f_query_data = mysql_fetch_array($f_query);
        $f_count = $f_query_data['job_count'];

        $f_array = array_push($f_array, $f_count);   // ---- Custom Line 2
        // $f_array[] = $f_count;   // ---- Custom Line 3
    }
}

$j_array = json_encode($f_array);
?> 
```

我只得到一个值，即`1`在 Javascript 中，使用`enabling` `Custom Line 1`& `Custom Line 2`。

当 i`enabled` `Custom Line 3`和禁用`Custom Line 1`& `Custom Line 2`。然后我得到像从数据库一样好的输出

```
<script>
var j_array = "<?php echo $j_array; ?>";
</script> 
```

## 结果 1

```
<script>
var j_array = "1";
</script> 
```

## 结果 2

```
<script>
var j_array = "["0","0","0","2","0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","2","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","25","0","0","0","0","0","7","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1","0","0","1","1","47","0","1","1","0","0","0","0","0","0","3","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"]";
</script> 
```

我在下面附上了一张图片..

![在此处输入图像描述](../Images/257502f6492dcb8fd16eb5d1dfa6a54b.png)

现在我如何`Result 2`按顺序`Array`或任何其他方法访问。

我尝试在下面使用

```
<script>
    alert(j_array);
</script>

<script>
    alert(j_array.0); // as an Object mightbe .. or I dont have any idea on it, so experimenting ..
</script> 
```

**我需要什么或需要帮助**

它没有给出任何结果，因为`0`它`integer`不是`string`..如果它是一个`Array`那么它也很棘手..有`n`很多`String 0`..所以我怎么能一个一个地打电话。或转换成 Javascript 数组。

***注意：`Result 2`是所需的输出，但它不在`Array`***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:38:28.820

看看 php 手册[`array_push()`](http://php.net/manual/en/function.array-push.php)。

> 返回数组中元素的新数量。

所以正确的语法是：

```
array_push($f_array, $f_count);   // without `$f_array = ` at the beginning 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T14:40:36.783

任何一个：

```
array_push($f_array, $f_count); 
```

或者

```
$f_array[] = $f_count; 
```

绝对*不是* `$f_array = array_push($f_array, $f_count)`。

接下来，JSON 数组周围没有引号，因为它变成了 Javascript 字符串：

```
var j_array = <?php echo $j_array; ?>; 
```

接下来，访问 Javascript 数组元素，如下所示：

```
j_array[0] 
```

*不是* `j_array.0`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T14:37:47.543

查看 的函数签名[`array_push()`](http://php.net/manual/en/function.array-push.php)。

它不返回扩展数组，而是使用第一个参数作为变量引用并返回一个整数。在*Custom Line 2*上，您将返回值分配`array_push()`给您的数组，这就是为什么您总是得到`1`结果。

删除自定义行 2 上的分配，如下所示，您将得到您所期望的：

```
array_push($f_array, $f_count); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T14:38:07.120

```
var j_array = <?php echo $j_array; ?>; 
```

没有 ” ”

当您放置括号时，您会在 javascript 中转义 json_encoded 数组。

# c++ - 使用 Boost datetime 在 C++ 中超时

> ID：13123648
> 
> 赞同：0
> 
> 时间：2012-10-29T14:32:07.787
> 
> 标签：c++, datetime, boost, timeout

如何使用 boost::datetime 在 C++ 中实现超时 while 循环？

就像是：

```
#define TIMEOUT 12

while(some_boost_datetime_expression(TIMEOUT))
{
    do_something(); // do it until timeout expires
}

// timeout expired 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:35:50.617

使用[Boost::deadline_timer](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/overview/timers.html)超时。不断检查循环中的值对 CPU 来说是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:41:18.603

You'll first want to mark the time you start, then calculate the difference between the current time and the time you started. No built-in boost datetime expression will work exactly like you describe. In boost datetime terminology: [http://www.boost.org/doc/libs/1_51_0/doc/html/date_time.html](http://www.boost.org/doc/libs/1_51_0/doc/html/date_time.html) the duration of your timeout is a "time duration", and the point you start is a "time point".

Suppose you want to be accurate to within a second, and have a 4 minute 2 second interval.

```
using namespace boost::posix_time;
ptime start = second_clock::local_time(); 
```

gives you a time point to start your timing

```
ptime end = start + minutes(4)+seconds(2); 
```

gives you a point in time 4 minutes and 2 seconds from now.

And then

```
( second_clock::local_time() < end ) 
```

is true if and only if the current time is before the end time.

(Disclaimer: this is not based off actually writing any boost datetime code before, but just reading the docs and example code over at the boost website.)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T14:42:03.673

You can just check the time difference:

```
boost::posix_time::ptime now = boost::posix_time::microsec_clock::local_time();
while((boost::posix_time::microsec_clock::local_time() - now) < boost::posix_time::milliseconds(TIMEOUT ) )
{
    // do something
} 
```

But instead of doing something like that you might rethink your design.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T06:06:57.353

这可以通过[boost.Asio](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio.html)轻松完成。作为一个异步进程启动一个[deadline_timer 。](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/deadline_timer.html)它在事件循环到期时取消事件循环。继续将您的工作发布到同一个事件循环，直到它运行为止。一个可行的解决方案：

```
#include <iostream>
#include <boost/asio.hpp>
#include <boost/bind.hpp>
#include <boost/date_time/posix_time/posix_time.hpp>

class timed_job
{
    public:
        timed_job( int timeout ) :
            timer_( io_service_, boost::posix_time::seconds( timeout ) )  // Deadline timer
        {
        }

        void start()
        {  

            // Start timer
            timer_.async_wait
                (
                 boost::bind
                 (
                  &timed_job::stop, this
                 )
                );

            // Post your work
            io_service_.post
                (
                 boost::bind
                 (
                  &timed_job::do_work, this
                 )
                );

            io_service_.run();
            std::cout << "stopped." << std::endl;
        }

    private:
        void stop()
        {  
            std::cout << "call stop..." << std::endl;
            io_service_.stop();
        }

        void do_work ()
        {  
            std::cout << "running..." << std::endl;

            // Keep posting the work.
            io_service_.post
                (
                 boost::bind
                 (
                  &timed_job::do_work, this
                 )
                );
        }

    private:
        boost::asio::io_service io_service_;
        boost::asio::deadline_timer timer_;
};

int main()
{
    timed_job job( 5 );
    job.start();

    return 0;
} 
```

# android - 保持 DialogFragment 打开直到用户输入是有效的 Android？

> ID：13123652
> 
> 赞同：4
> 
> 时间：2012-10-29T14:32:30.090
> 
> 标签：android, android-dialogfragment

我将 DialogFragment 子类化以向用户显示输入字段。

如果用户没有提供任何输入，我想保持对话框打开并在输入字段上显示错误。当用户按下肯定的“保存”按钮时，无论输入字段是否为空，对话框都会自动关闭。

如何覆盖此默认行为？

代码片段（完整的代码很长，但你明白了）：

```
public class SurveySingleQuestionDialog extends DialogFragment implements DialogInterface.OnClickListener {

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    return (builder.setTitle(mArgs.getString("question_body"))
            .setView(layout)
            .setPositiveButton(R.string.save, this)
            .setNegativeButton(android.R.string.cancel, null)
            .setCancelable(false)
            .show());

}

@Override
public void onClick(DialogInterface dialog, int which) {

if(validInputs()){

//dismiss dialog and save inputs

}
else{

//show error on input field

}

}

} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:51:53.747

我认为 setNegative / setPositive 按钮旨在在回调返回后关闭对话。您可能会更好地在视图中包含自己的按钮并自己关闭对话

# python - 在python中并排加入txt文件

> ID：13123657
> 
> 赞同：-4
> 
> 时间：2012-10-29T14:33:02.770
> 
> 标签：python

我在 txt 文件中有 2 个数据数组：

> A1 A2 A3
> A4 A5 A6
> A7 A8 A9

和

> B1 B2 B3
> B4 B5 B6
> B7 B8 B9

我想将它们并排组合：

> A1 A2 A3 B1 B2 B3
> A4 A5 A6 B4 B5 B6
> A7 A8 A9 B7 B8 B9

（这些空格实际上是我的 txt 文件中的制表符）

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T14:35:00.313

从任一文本文件中同时读取行。连接您每次读取的行，并将结果写入一个新的文本文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T14:37:43.283

像这样的东西：

```
>>> with open("data1.txt") as f1,open("data2.txt") as f2,open("out.txt","w") as f3:
...     for x,y in zip(f1,f2):
...          f3.write(x.strip()+" "+y.strip()+'\n') 
```

**输出：**

```
A1 A2 A3 B1 B2 B3
A4 A5 A6 B4 B5 B6
A7 A8 A9 B7 B8 B9 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:42:39.503

To abstract @Ashwini's answer to any number of files:

```
filepaths = list_of_filepaths
with open('path/to/output') as f:
    for lines in zip(*[open(fpath for fpath in filepaths)]):
        outfile.write('\t'.join(line.strip() for line in lines) + '\n') 
```

# xcode - 使用数组数组填充 NSTableView

> ID：13123660
> 
> 赞同：0
> 
> 时间：2012-10-29T14:33:07.417
> 
> 标签：xcode, nsmutablearray, nstableview, populate, multiple-columns

我目前有许多数组，每个数组都包含节目标题、描述和持续时间。我将它们放在另一个“显示”数组中，我正在使用这个数组来填充我的`NSTableView`. 我想做的是从我的每个数组中提取表格第一列的显示标题，第二列的描述，依此类推。

我目前拥有的代码虽然采用我的数组数组中的第一个数组并填充第一列，第二列的第二个数组等。我将如何修改我到目前为止的内容以使表格正确填充？我试图用`indexOfObject`它来代替，`objectAtIndex`但是这样做会引发和异常。这是我的（简化的）代码：

AppDelegate.m

```
- (void)applicationDidFinishLoading:(NSNotification *)aNotification
{
    NSArray *show1 = [[NSArray alloc] initWithObjects:@"Title", @"A description", nil];
    NSArray *show2...
    NSArray *show3...
    NSArray *show4...

    self.array = [[NSMutableArray alloc] initWithObjects: show1, show2, show3, show4, nil];
    [self.tableView reloadData];
}

- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView
{
    return [self.array count];
}

- (NSView *)tableView:(NSTableView *)tableView viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
    NSString *identifier = [tableColumn identifier];

    if([identifier isEqualToString:@"title"]) {
        NSTableCellView *title = [tableView makeViewWithIdentifier:@"title" owner:self];
        title.textField.stringValue = [self.array objectAtIndex:0];
        return title;
    } else if {...}

    return nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T20:08:39.157

Michele Percich 的评论是正确答案： [self.array objectAtIndex:0] 将返回第一个显示数组。你想要的是 "NSArray * show = [self.array objectAtIndex:row]'" 来获取节目，然后 "[show objectAtIndex:0]" 来获取节目标题。只是一个建议，但我会使用 NSDictionary 的 NSArray，其中键是列标识符。然后你可以只使用“[self.array objectAtIndex:row] valueForKey:identifier];”

另请注意，您要覆盖的方法需要返回 NSView（或子类）的实例（阅读 NSTableView.h 标头中的注释）。您可能想改用 tableView:objectValueForTableColumn:row: 方法，只返回适当的 NSString （基于行和列标识符）。

# javascript - 使用 Highcharts，我想覆盖一条显示条形最佳值的线

> ID：13123665
> 
> 赞同：1
> 
> 时间：2012-10-29T14:33:26.720
> 
> 标签：javascript, jquery, charts, highcharts

我试图在负堆积条形图的顶部覆盖 2 条对角线。这些线的目的是显示每个条的最佳值应该在哪里。

图表将始终沿 x 轴从 -10% 到 10%，因此如果图表增长，线条不需要缩小。（虽然如果它是一个小的补充，也很高兴知道如何做到这一点）

我对 HighCharts 比较陌生，我似乎无法确定这是否可能。

![在此处输入图像描述](../Images/c7327d8a6beb0449725a631abfbbfcb0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T16:25:44.937

鉴于线的交点总是会在我做[这个](http://jsfiddle.net/wergeld/4tTWH/3/)的同一点相交。我所做的是创建两个额外的系列，从 -10 到 0 和 10 到 0。你也可以用一个系列来做到这一点，但也许男性/女性投影线不同？你的选择。

现在，因为我不知道两条线应该在哪里相交，所以我让它们在最后一个类别结束。您可以通过给两个系列不同的端点来调整它。另一个技巧是为中间点填充 2 条投影线，并允许连接 2 个端点。我还隐藏了标记，从图例中隐藏了系列，并允许使用不同的线条样式。重要位：

```
{
        name: 'line1',
        type: 'line',
        color: 'black',
        dashStyle: 'dot',
        connectNulls: true,
        showInLegend: false,
        marker: {
            enabled: false
        },
        data: [0, null},
            ...
            , 10]} 
```

由于这些数据系列是堆叠的，我们需要确保只有这些系列被堆叠，否则 2 条投影线也会被堆叠。通过以下方式执行此操作：

```
plotOptions: {
    bar: {
        stacking: 'normal',
        //pointWidth: 20
    }
}, 
```

请注意，仅将堆叠应用于“条形”类型。更新[jsFiddle](http://jsfiddle.net/G2MRy/3/)。

# c# - 用 List 调用控制器方法 通过ajax参数

> ID：13123666
> 
> 赞同：0
> 
> 时间：2012-10-29T14:33:27.897
> 
> 标签：c#, javascript, ajax, asp.net-mvc

我的 c# 代码中有这个类：

```
public class MyItem
    {
        public int LocationId { get; set; }
        public int Value { get; set; }
        public int ddlId { get; set; }
    } 
```

这是我的 Js/Ajax 代码：

```
var array = new Array();
grid.forEachRow(function (id) {
        var object = {
            LocationId: id,
            Value: someValue,
            ddlId: otherValue
        };
        array.push(object);
    });

$.ajax({
    type: "POST",
    url: "/MyController/SaveTheList",
    data: { myList: array },
    success:function() { }
 }); 
```

这是控制器中的方法：

```
 [HttpPost]
 public ActionResult SaveTheList(List<MyItem> myList)
 { } 
```

该方法被命中，并且 myList 具有确切的长度，但对象中的所有值都是 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:45:12.960

我建议您使用提琴手（或类似工具）检查在 POST 正文中的 AJAX 请求中究竟发送了哪些数据，

有件事告诉我

> 数据：{我的列表：数组}

看起来像“Object#1,Object#2,Object#3”，因为 jQuery 将如何尝试序列化您的对象数组

作为一种解决方案，尝试将youj jQuery请求上的数据作为JSON字符串传递，而不是MVC binder应该能够绑定数据；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-28T22:55:12.390

在这之前：

```
$.ajax({
    type: "POST",
    url: "/MyController/SaveTheList",
    data: { myList: array },
    success:function() { }
 }); 
```

用这个：

```
$.ajaxSetup({ traditional:true }); 
```

我有同样的问题，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:38:58.430

您可以将其作为`JSON`请求发送，也可以发送`stringify`您的数据：

```
$.ajax({
    type: "POST",
    url: "/MyController/SaveTheList",
    contentType: 'application/json',
    data: JSON.stringify({ myList: array }),
    success: function (result) {

    }
}); 
```

# javascript - Javascript绑定功能到鼠标滚轮

> ID：13123670
> 
> 赞同：1
> 
> 时间：2012-10-29T14:33:35.010
> 
> 标签：javascript, html, anchor, internal-link

我有一个单页网站，它使用内部锚点来产生多页的错觉。我编写了一个 javascript 函数，该函数从用户向上/向下读取鼠标滚轮，并基于此将用户发送到当前页面上方/下方的锚点。该功能如所述正常工作，但是鼠标滚轮非常敏感，以至于最轻微的移动将触发多个鼠标滚轮事件并向用户发送多个页面向上/向下而不是一个。

我需要一种方法来限制我的鼠标滚轮功能可以执行多少次，以便用户只在鼠标滚轮上的任一方向移动一页，而不管使用鼠标滚轮的快/慢。我的javascript在下面。

```
<script>
$(document).ready(function(){
$("#main").bind('mousewheel', function(event) {
if (event.originalEvent.wheelDelta >= 0) {
var currentPage = $(".active").attr('href');
switch(currentPage){
case "#publications":
    window.location = $("#menu-item-290 a").attr('href');
    break;
case "#branding":
    window.location = $("#menu-item-106 a").attr('href');
    break;
case "#website-development":
    window.location = $("#menu-item-110 a").attr('href');
    break;
case "#about-us":
    window.location = $("#menu-item-109 a").attr('href');
    break;
case "#contact":
    window.location = $("#menu-item-108 a").attr('href');
    break;
}

}
else {
var currentPage = $(".active").attr('href');
switch(currentPage){
case "#home":
    window.location = $("#menu-item-106 a").attr('href');
    break;
case "#publications":
    window.location = $("#menu-item-110 a").attr('href');
    break;
case "#branding":
    window.location = $("#menu-item-109 a").attr('href');
    break;
case "#website-development":
    window.location = $("#menu-item-108 a").attr('href');
    break;
case "#about-us":
    window.location = $("#menu-item-107 a").attr('href');
    break;
}

}
 });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:59:13.820

你已经在查询了`wheelDelta`，为什么不使用它呢？[根据 MSDN](http://msdn.microsoft.com/en-us/library/ie/ms535142%28v=vs.85%29.aspx)，它“表示车轮旋转的距离，以 120 的倍数表示”。因此，只需将您的 if 语句更改为类似的内容，然后在您的负数中`>= 360`添加一个。`if``else`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:45:26.643

除了直接在鼠标滚轮上转到页面的一部分，您可以设置一个非常短的时间`setTimeout`（例如 50 毫秒左右）去您想去的地方，如下所示：

```
case "#home":
    var timeout = null;
    timeout = setTimeout('window.location = $("#menu-item-106 a").attr("href")', 50);
    break; 
```

这样，如果快速连续发生 20 个鼠标滚轮事件，您只需触发一次您想要执行的操作。

# jquery - 如何隐藏相同的 div，同时只显示一个？

> ID：13123671
> 
> 赞同：0
> 
> 时间：2012-10-29T14:33:36.523
> 
> 标签：jquery

我选择了带有条件的子选择，它将选定的子选择显示为 div。但是，每个 div 都有相同的类名，我无法更改。每个相同的 div 内的 div 可以有一个唯一的 id。如何在隐藏所有其他 div 的同时显示所选内容？此描述可能没有意义 - 请参阅[此处的 jsFiddle](http://jsfiddle.net/F6ZWF/16/)。

```
<div class="container">
<div id="two" class="phone">Content one</div>
</div>

<div class="container">
<div id="one" class="phone">Content two</div>
</div> 
```

我可以隐藏未选择的 div 的内容，但不能隐藏类名为 .container 的外部 div。我要显示的 div 也有类名 .container。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:36:26.263

基本 DOM：DOM 树中的每个元素都有一个父节点。如果您想（比如说）隐藏`one`节点的父节点，那么您只需执行

```
$('#one').parent().hide(); 
```

这适用于`div.container`包含`one`节点的。如果您有多层父节点，则需要遍历，例如

```
<div class="container">
   <div>
      <div>
         <div id="one">...</div>
 etc... 
```

然后`$('#one').parent('.container')`将搜索所有父节点以找到匹配的节点，并完成相同的事情。

# javascript - 在javascript中构建多维数组

> ID：13123672
> 
> 赞同：0
> 
> 时间：2012-10-29T14:33:43.737
> 
> 标签：javascript, jquery, arrays, loops

我正在检索一个 Json 数据集，需要构建一个名为“arrProducts”的 javascript 数组。我下面的代码是错误的，但在正确的行上。有人可以帮忙吗？？

```
var allProducts = $.get("http://localhost:8888/web/app_dev.php/api/v1/search/search.json",
function(data) {
    var productsArray = data.products;
    var arrProducts = '';
    $.each(productsArray, function(index, product) {
        arrProducts['name'] = product.name;                        
        arrProducts['title'] = product.title;
        arrProducts['price'] = product.price;           
    });     
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:41:05.993

```
 var allProducts = $.get("http://localhost:8888/web/app_dev.php/api/v1/search/search.json",
function(data) {
    var productsArray = data.products;
    var arrProducts = []; //This needs to be an array not a string.
    $.each(productsArray, function(index, product) {
        var prod = {};//make a new product for each iteration
        prod['name'] = product.name;                        
        prod['title'] = product.title;
        prod['price'] = product.price;    
        arrProducts.push(prod); //add the product to thearray of products       
    });     
}); 
```

As Kevin B points out, it looks like data.products is already an array of objects in the format you are going to, so this "conversion" seems pointless.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:38:10.317

这应该做你想要的：

```
var allProducts = $.get("http://localhost:8888/web/app_dev.php/api/v1/search/search.json",
function(data) {
    var productsArray = data.products;
    var arrProducts = productsArray;
}); 
```

`productsArray`已经是您尝试构建的格式，因此您应该`data.products`直接使用。

```
var allProducts = $.get("http://localhost:8888/web/app_dev.php/api/v1/search/search.json",
function(data) {
    console.log(data.products);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:41:37.097

How about this ?

```
var arr;
var allProducts = $.getJSON("http://localhost:8888/web/app_dev.php/api/v1/search/search.json",
function(data) {
    arr = jQuery.makeArray(data);
}); 
```

Note :

You need to use getJSON method so that your end up with an already Parsed Object that you then can use in the callback. As for makeArray method [http://api.jquery.com/jQuery.makeArray/](http://api.jquery.com/jQuery.makeArray/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T14:36:56.857

您只需使用以下代码创建一个数组：

```
var arrProducts = []; 
```

您的其余代码将服务于您的目的

但是，正如评论所述，这将创建一个三元素关联数组，该数组将在每个迭代中被覆盖。你需要重新考虑你的结构：multidimensioanl array？对象数组？

# php - wp + 滑块 + url + jquery 模糊

> ID：13123674
> 
> 赞同：1
> 
> 时间：2012-10-29T14:33:47.063
> 
> 标签：php, jquery

我有一个 wp 网站。带有标题 + url 的滑块。我想在每张幻灯片上添加一个带有“阅读更多”的按钮和滑块中的 url（在管理面板中输入）。

我有以下代码：

```
<script>
$(document).ready(function(){
var imgLink = $("#flex-container-43 ul li a").blur(function() {$("#flex-container-43 ul li a").attr("href")});
console.log(imgLink);
$('#flex-container-43').prepend('<a href="' + imgLink + '"><img src="<?php bloginfo( 'template_url' ); ?>/img/button.png" class="buttonimg" /></a>');
});
</script> 
```

然后我得到了博客网址`/[object Object]`

有什么想法/手吗？提前感谢你们的时间！干杯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:36:56.150

您正在将 imgLink 变量分配给一个元素（或者更准确地说是一个代表元素及其关联方法的 jQuery 对象）。

改变：

```
var imgLink = $("#flex-container-43 ul li a").blur(function() {$("#flex-container-43 ul li a").attr("href")}); 
```

至：

```
var imgLink = "";
$("#flex-container-43 ul li a").blur(function() {
   imgLink = $("#flex-container-43 ul li a").attr("href")
}); 
```

这将在所需范围内为 imgLink 创建一个变量，然后`href`在事件触发时将属性放入该变量中。

PS：您的代码可能仍然无法执行您想要的操作，我只回答了为什么您返回对象而不是 href 属性。当前格式的代码似乎没有多大意义。

# iis - 从 IIS 服务器运行我的 SSL 站点时出现 SSL 证书错误

> ID：13123678
> 
> 赞同：1
> 
> 时间：2012-10-29T14:34:00.760
> 
> 标签：iis, ssl, browser, certificate

当我浏览我的网站时，证书被识别并且一切正常。Exept 如果我直接从 IIS 服务器浏览它，我会收到以下证书错误：

```
"The security certificate presented by this website was issued for a different website's address." 
```

这是打印功能的问题，在后台进程中有一个 webBrowser 对象，它导航到我的一个页面以创建视图的图像。

有没有其他人已经遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-23T11:30:31.527

请确认您是否在 IIS 上单击

浏览 *.443 (https) 。如果是，则它以[https://localhost](https://localhost)打开，并使用您使用端口 443 绑定到实际网站的证书。

Common 与证书不匹配，因为显示的 Url 将显示 localhost，但证书 Common Name 将显示不同的 URL。

# r - 在 scale_color_discrete 中更改颜色条的文本位置

> ID：13123679
> 
> 赞同：0
> 
> 时间：2012-10-29T14:34:02.407
> 
> 标签：r, colors, ggplot2

我在我的 ggplot2 图中生成图例

```
scale_colour_discrete(name=textCF) 
```

我喜欢我可以看到哪种颜色属于哪个值，但它会占用情节中的很多空间。

![传说不适合](../Images/556cc6c49746f71b87a809788703cf28.png)

我也尝试了这个`scale_colour_gradientn`方案，但是这个方案太简洁了，我无法再区分这些值了。如果我只能更改此颜色条的宽度。

```
scale_colour_gradientn(name=textCF,colours = rainbow(nrow(mydf), start=2/6), breaks=round(mydf$CF)) + 
```

![蜱虫要关闭](../Images/9c5ffcda47ac6c6323fc77be66ce0ac4.png)

如何改善瞭望？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:35:30.687

可以使用`barwidth`和`barheight`参数控制颜色条的大小。

从一个可重现的例子开始，看看效果：

```
ggplot(mtcars, aes(x=wt, y=mpg, colour=qsec)) +
  geom_point() +
  scale_colour_gradient() +
  theme(legend.position = "bottom") 
```

![](../Images/8e5192d4c359937a4536f7633fa9f907.png)

我正在使用`scale_colour_gradient`，但这通常有效。

`guide`您可以通过一定比例的论点来控制指南的各个方面。`guide_colourbar`有关您可以设置的所有参数，请参阅帮助。

```
ggplot(mtcars, aes(x=wt, y=mpg, colour=qsec)) +
  geom_point() +
  scale_colour_gradient(guide = guide_colourbar(barwidth=20, barheight=2)) +
  theme(legend.position = "bottom") 
```

![在此处输入图像描述](../Images/a07004c1f3d06eed5c32c306a4d3515b.png)

# sql-server-2008 - 为 SQL Server 2008 创建用户？

> ID：13123682
> 
> 赞同：11
> 
> 时间：2012-10-29T14:34:20.320
> 
> 标签：sql-server-2008

我正在使用此代码创建一个新用户。

```
/****** Object:  User [primebox] ******/
IF NOT EXISTS (SELECT * FROM sys.database_principals WHERE name = N'primebox')
CREATE USER [primebox] FOR LOGIN [primebox] WITH DEFAULT_SCHEMA=[primebox]
GO 
```

当我尝试创建此特定用户时出现以下错误。

> *Msg 15007, Level 16, State 1, Line 1*
> *'primebox' 不是有效的登录或您没有权限。*

我不明白的部分是，我可以创建其他用户，但这个特别看起来无效

我试图重命名我的数据库并收到此错误

> *无法重命名primebox。（对象浏览器）*
> 
> *数据库“primebox”重命名失败。(Microsoft.SqlServer.Smo)*
> 
> *执行 Transact-SQL 语句或批处理时发生异常。(Microsoft.SqlServer.ConnectionInfo)*
> 
> *无法以独占方式锁定数据库以执行该操作。（Microsoft SQL Server，错误：5030）*

我的猜测是问题出在数据库名称上……但是我从另一个数据库（我正在创建一个“想要的”备份）中获得了具有相同用户名和数据库名的代码。所以我在这里的一个角落......任何帮助将不胜感激=）

PS：我的电脑名是box，windows 7。使用SQL Server 2008

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-03-31T20:47:14.867

**登录与用户不同，这里是如何创建一个新的登录。**

1.  右键单击 SQL Server Management Studio 并选择 -> 以管理员身份运行。

2.  使用默认的 Windows 身份验证正常登录。

3.  选择数据库 -> 系统数据库 -> 主数据库。点击左上角的“新建查询”按钮。

4.  将此查询粘贴到那里。（有关 SQL 登录选项的更多信息，[请参见此处](http://msdn.microsoft.com/en-us/library/ms189751.aspx)）：

    ```
    CREATE LOGIN youruser WITH PASSWORD = 'yourpassword' 
    ```

5.  你应该得到这样的回应：

    ```
    Command(s) completed successfully. 
    ```

6.  检查以确保它已添加到`dbo.syslogins`

    ```
    select * from master.dbo.syslogins 
    ```

7.  关闭并重新启动 SQL 管理服务器（以管理员身份）并通过转到 SQL Server 配置面板并单击重新启动来重新启动 SQL Server。

8.  在对象资源管理器中单击主 EL-PC\SQLEXPRESS -> Security -> Logins。

9.  您新创建的登录应该在那里，右键单击并转到属性，您必须授予该用户访问默认数据库的权限，并设置默认数据库。

10.  关闭 SQL Server 并使用 SQL Server 身份验证选项和用户名/密码再次登录。您现在应该使用新用户登录。

**如何创建新用户**

1.  以管理员身份启动 SQL Server Management Studio。
2.  展开要创建新数据库用户的数据库。
3.  右键单击“安全”文件夹选择“新用户”，如果该选项不可用，您可能单击了服务器的安全文件夹。
4.  添加名称和配置，然后单击确定。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-29T14:36:59.313

在 SQL Server 中，用户不同于登录。

要为数据库创建用户，首先必须使用以下[`create login`](http://msdn.microsoft.com/en-us/library/ms189751.aspx)语法为服务器创建登录名

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-30T07:20:17.447

此外，您还可以通过 Sql Server Management Studio 的 UI 通过单击主安全文件夹来创建新登录名![在此处输入图像描述](../Images/0c07b17bd8780d98446d1efb7bf51f38.png)

并在创建用户之后

# python - 如何在 django 中包含一个模板 n 次？

> ID：13123696
> 
> 赞同：0
> 
> 时间：2012-10-29T14:34:50.483
> 
> 标签：python, django, partial

我想在 django 应用程序中包含部分 n 次（我是新手/学习 django）。我在rails方面更有经验，我会简单地写：

```
 <% 3.times do %>
    render 'feeds/feature'
 <% end %> 
```

我想知道如何在 django 中做类似的事情。这是我想做的事情：

```
 {% i = 1%}
 {% for i =< 9 %}
   {% include 'feeds/feature.html'%}
   {% i += 1%}
 {% end %} 
```

但是，这不起作用 - 我收到模板语法错误 Invalid block tag: 'i', expected 'endblock'

我可以像在 Rails 中那样将 python 嵌入到 django 页面中吗？而且，更重要的是，我将如何在 django 中包含第 n 次（或在本例中为 9 次）的 feature.html 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:44:45.880

只需将范围放在视图的上下文中，然后：

在视图中：

```
render_to_response('foo.html', {..., 'range': range(9), ...}, ...) 
```

在模板中：

```
{% for i in range %}
    {% include 'feeds/feature.html'%}
{% endfor %} 
```

你也可以这样做：

```
{% for i in "123456789" %}
    {% include 'feeds/feature.html'%}
{% endfor %} 
```

是的，非常丑陋。

或者您可以定义模板标签：

[片段 1](http://djangosnippets.org/snippets/779/)

[片段 2](http://djangosnippets.org/snippets/1357/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:57:29.327

也许我错过了一些东西，但我无法想象我会以这种方式需要它的情况。如果您有来自数据库的功能列表并希望显示其中的特定数量，您可以通过以下方式执行此操作：

```
{% for feature in feature_list|slice:":3" %}
    {% include "template.html" %}
{% endfor %} 
```

或者简单地在下面写三个包含。但正如我所说，这不是一种常见的编程模式，可以有更好的解决方案。

# c# - 如何添加实现 C++ 接口的标签？

> ID：13123697
> 
> 赞同：1
> 
> 时间：2012-10-29T14:34:56.283
> 
> 标签：c#, c++, wpf

我的 C# 经验非常有限，所以也许这是一个常见的错误，但是，我在任何其他主题中都找不到答案。

在我的 WPF 应用程序中，我尝试创建一个标签，该标签继承自默认 WPF 标签并实现在 dll（托管 c++）中定义的接口。我的目标是将这个对象的一个​​实例传递给 c++ 代码并让它在不使用单独线程的情况下更新 UI。

```
using System;
using System.Windows.Controls;
using System.Windows;

namespace WPFTest
{
    //my class : default WPF Label, C++ interface (dll)
    class ObservationResultLabel : Label, IObservationResult
    {
        Boolean od;

        public Boolean ObjectIsDetected(){
            return od;
        }
        public void setObservationResult(Boolean od){
            this.od = od;
            this.Dispatcher.Invoke((Action)(() =>
            {
                this.InvalidateVisual();
            }));
        }
        protected override void  OnRender(
                System.Windows.Media.DrawingContext drawingContext){
            if (od){
                Visibility = Visibility.Visible;
            }else{
                Visibility = Visibility.Hidden;
            }
            base.OnRender(drawingContext);
        }
    }
} 
```

但是在尝试构建时，我得到一个“'ObservationResultLabel' 类型的值不能添加到'UIElementCollection' 类型的集合或字典中。” 错误。如果我使用 C# 接口尝试相同的操作，则不会出现错误。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:45:32.997

开发 WPF GUI 的最简单方法是使用[Model-View-ViewModel](http://en.wikipedia.org/wiki/Model_View_ViewModel "模型-视图-视图模型")模式。将 WPF 元素传递到托管 C++ 库中只是为了更新它们的属性是我不建议这样做的。也不建议覆盖 OnRender()。我建议你看看一些 WPF 介绍性教程，例如[这个](http://wpftutorial.net/ "这个"). 如果你打算在 WPF 中进行开发，你需要熟悉“WPF 思维方式”和 WPF 框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T22:47:58.300

我认为可能是 C++ 托管接口正在使用 c# 或 WPF 无法使用的托管 C++ 语言功能，如果可以，请尝试将[[CLSCompliant]](http://msdn.microsoft.com/en-us/library/system.clscompliantattribute%28v=vs.71%29.aspx)属性添加到您的 c++ 接口，然后尝试编译并查看编译器说。我也会考虑@HighCore 所说的话。

# apache-flex - 为什么 Object 类在 Flex 4.5 中具有 init 功能？

> ID：13123702
> 
> 赞同：2
> 
> 时间：2012-10-29T14:35:07.123
> 
> 标签：apache-flex, function, init

在 Flex 4.5 中创建新对象，如下所示：

![在此处输入图像描述](../Images/10c5791c878d11f5dc555069061e4d77.png)

如您所见，第 5 行 int 标记为已覆盖的函数，我们为什么需要它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T03:06:05.763

这应该是您的 IDE 的错误。

只需使用 Flex SDK 4.6 尝试 FB 4.7，没问题。 ![在此处输入图像描述](../Images/a972645084efb916c70d6429f9e77fe4.png)

# multivariate-testing - 如何有效使用Route53进行在线实验？

> ID：13123703
> 
> 赞同：8
> 
> 时间：2012-10-29T14:35:08.537
> 
> 标签：multivariate-testing, amazon-route53

作为每月拥有超过 200 万个独立网站的产品所有者，我想做一些 A/B 测试，我可以通过 Google Analytics 目标进行跟踪，而无需为其他在线测试服务支付高额费用。使用 Google 自己的内容实验需要使用 JS 进行重定向，我不想冒页面加载性能受到影响的风险，并且可以自由使用 CE 限制您使用的 5 种以上的变体。

这个答案激起了我使用 Route53 来避免 Google 内容实验的兴趣：

[Google Analytics Content Experiments A/B 测试服务器端代码，无需刷新页面](https://stackoverflow.com/questions/11403778/google-analytics-content-experiments-a-b-testing-server-side-code-without-page-r/12956940#12956940)

我想知道如何服务和跟踪这些变化。

据我所知，Route53 在 DNS 级别运行，可以将流量负载平衡到不同的 IP，因此我可以将 mydomain.com 50% / 50% 提供给 200.0.0.1 和 200.0.0.2。然后，我可以使用服务器端代码来确定正在使用的 IP，并为 Google Analytics 提供不同的 JS 跟踪代码。

那么如果用户到达或没有到达我的 GA 目标页面，我可以衡量我的广告系列的有效性吗？

这是正确的还是我在 GA 或站点设置中遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-26T03:47:34.353

如果您已经在使用 Route53 并且不介意单独跟踪不同的跟踪代码，那么您可以使用一些服务器端代码来为该 ID 选择正确的跟踪代码。这是 PHP 中的一个示例。

```
<?php
    var $serverIp_trackingCodes_map = array(
        '192.168.1.1' => 'UA-XXXXX-1',
        '192.168.1.2' => 'UA-XXXXX-2',
        '192.168.1.3' => 'UA-XXXXX-3',
        '192.168.1.4' => 'UA-XXXXX-4'
    );
?>

<script type="text/javascript">
    //The usual ga tracking code
    var _gaq = _gaq || [];
    //Pass in the tracking code for that server
    _gaq.push(['_setAccount', '<?php echo $serverIp_trackingCodes_map[ $_SERVER["SERVER_ADDR"] ] ?>']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

</script> 
```

但是使用一个跟踪代码并使用服务器名称或 ip 设置自定义变量可能会容易得多。这可以在以后用作报告中的过滤器。

```
<script type="text/javascript">
    //The usual ga tracking code
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-XXXXX-X']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    //Set the custom variable
    _gaq.push(['_setCustomVar', 1, 'ServerIP','<? echo $_SERVER["SERVER_ADDR"]?>']);

</script> 
```

# jsf-2 - 在 ViewScope 中未正确添加数据表值

> ID：13123707
> 
> 赞同：0
> 
> 时间：2012-10-29T14:35:14.550
> 
> 标签：jsf-2, datatable

表格和表格在同一页上。当用户添加表单详细信息并单击添加时，应将数据复制到表中。

当用户输入详细信息并第二次单击添加时（表中已经存在数据），第一个值被新值覆盖，列表中的下一个为空。

我们如何在表格上显示这两个值。

**名称.xhtml**

```
<h:form>
  <h:inputText value="#{bean.fName}"/>
  <h:inputText value="#{bean.lName}"/>

   <h:dataTable value="#{bean.list}" var="name">
     <h:column>
       <h:outputText value="#{name.fName}">
     </h:column> 
   </h:dataTable>
   <h:commandLink action="#{bean.add}"/>
 </h:form> 
```

**Bean.java** //Bean类是ViewScoped

@ManagedProperty(value="#{buyerTO}") protected BuyerTo BuyerTO；

列出买家TOList = new ArrayList(); // BuyerTO 在 ViewScope 中

```
public String addBuyer(){
 buyerTOList.add(buyerTO);
 buyerTO = new BuyerTO();
 return ""; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:09:06.017

您通过返回非`null`/来结束视图范围`void`。您需要返回`null`或`void`以保留后续请求的视图范围。

代替

```
return ""; 
```

经过

```
return null; 
```

或者

```
public void addBuyer() {
    // ...
    // No return statement.
} 
```

# spring - 构造函数主体中的Scala Spring @Value

> ID：13123714
> 
> 赞同：6
> 
> 时间：2012-10-29T14:35:37.147
> 
> 标签：spring, scala

我有以下 spring 伪代码有线 scala 类。

```
@Service
class Something {

@Value("${some.property}")
val someString : String

// do something with someString in the body
} 
```

但是，这不起作用，因为 someString 是构造函数主体的一部分，并且在构造函数执行之前，spring 无法连接值。

我如何连接@Value 以便它工作，并且不可怕（我当前的解决方案使用包含我需要的所有值的自定义构造函数只是感觉不到“scala”并且看起来很糟糕。

编辑：澄清一下，我目前的解决方案是这样的：

```
@Service
class Something { 
  @Autowired 
  def this(@Value("${some.prop}") prop : String) { 
    this() 
    // do other construction stuff here
  }
} 
```

我只是觉得它看起来很丑，觉得有更好的方法。当我宁愿在主构造函数上强制执行时，我也不喜欢创建这些辅助构造函数。

编辑2：为了进一步澄清，我希望有一种方法可以做这样的事情：

```
@Service
class Something(@Value("${some.property}") string : String) {
// use the value in your constructor here
} 
```

因为这看起来要优雅得多。我只是无法让它工作:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T13:18:57.263

好的，经过所有的来回，我*想*我更了解你想要什么，所以这是我的看法：

```
import scala.annotation.BeanProperty
import scala.annotation.target.beanSetter
class Something @Autowired() (@(Value @beanSetter)("{some.property}") @BeanProperty var prop: String) 
```

这本质上是 Paolo Falabella 的解决方案，只是我尽量避免让 Spring 访问私有字段。为此，我让 scala 使用`@BeanProperty` **并**应用`@Value`它自动生成一个类似 java 的公共 setter。您还可以通过使用类型别名来稍微改进语法：

```
type Value = org.springframework.beans.factory.annotation.Value @beanSetter @beanGetter
class Something @Autowired() ( @BeanProperty@Value("{some.property}") var prop: String) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T19:17:33.547

您需要初始化`someString`一个值，以便在类中生成一个真实的字段。或者，您可以使用 a`var`而不是 a `val`，但无论哪种方式，您都必须对其进行初始化。

例如：

```
@Service
class TestService {
  @Value("${testService.foo:bar}")
  val foo: String = null
  //var foo: String = _
} 
```

[反编译](http://java.decompiler.free.fr/?q=jdgui)TestService.class 文件你会看到它把注解放在一个`private final String`字段上（你也可以使用[jclasslib 字节码查看器](http://sourceforge.net/projects/jclasslib/)）：

```
@Service
@ScalaSignature(bytes="\006\001!3A!\001\002\001\023\tYA+Z:u'\026\024h/[2f\025\t\031A!\001\005tKJ4\030nY3t\025\t)a!A\002osbT\021aB\001\004G>l7\001A\n\004\001)\021\002CA\006\021\033\005a!BA\007\017\003\021a\027M\\4\013\003=\tAA[1wC&\021\021\003\004\002\007\037\nTWm\031;\021\005M1R\"\001\013\013\003U\tQa]2bY\006L!a\006\013\003\027M\033\027\r\\1PE*,7\r\036\005\0063\001!\tAG\001\007y%t\027\016\036 \025\003m\001\"\001\b\001\016\003\tAqA\b\001C\002\023\005q$A\002g_>,\022\001\t\t\003C\021r!a\005\022\n\005\r\"\022A\002)sK\022,g-\003\002&M\t11\013\036:j]\036T!a\t\013\t\r!\002\001\025!\003!\003\0211wn\034\021)\t\035R\003(\017\t\003WYj\021\001\f\006\003[9\n!\"\0318o_R\fG/[8o\025\ty\003'A\004gC\016$xN]=\013\005E\022\024!\0022fC:\034(BA\0325\003=\031\bO]5oO\032\024\030-\\3x_J\\'\"A\033\002\007=\024x-\003\0028Y\t)a+\0317vK\006)a/\0317vK\006\n!(\001\f%wR,7\017^*feZL7-\032\030g_>T$-\031:~\021\025a\004\001\"\001>\003)Ig.\033;jC2L'0\032\013\002}A\0211cP\005\003\001R\021A!\0268ji\"\022\001A\021\t\003\007\032k\021\001\022\006\003\013J\n!b\035;fe\026|G/\0379f\023\t9EIA\004TKJ4\030nY3")
public class TestService
  implements ScalaObject
{

  @Value("${testService.foo:bar}")
  private final String foo;

  public String foo()
  {
    return this.foo;
  }

  public TestService()
  {
    null; this.foo = null;
  }
} 
```

我一直用`@Value`在班上，很方便。

# c++ - 插入加密的 USB 驱动器后，如何使用 WMI 查找“启动器”逻辑磁盘？

> ID：13123719
> 
> 赞同：2
> 
> 时间：2012-10-29T14:35:40.530
> 
> 标签：c++, winapi, wmi, disk

我正在使用 WMI 来确定何时插入/放入各种形式的媒体（USB 驱动器、CD 等）。然而，诸如“SanDisk Enterprise FIPS USB”之类的加密驱动器做了一些时髦的事情：看起来它们将自己表现为一个可以启动解锁应用程序的 CD 驱动器。解锁实用程序完成后，新的 USB 逻辑磁盘可用于读/写。所以我从 WMI 看到的事件顺序是：

1.  USB 已插入
2.  Win32_DiskDrive 对象被创建（参见下面的 \.\PHYSICALDRIVE2）
3.  创建了不同的 Win32_LogicalDisks，一个我复制到下面 (G:) 并保存启动器，另一个（M:，在我的例子中）是最终可以访问的驱动器。

**但是**，在实用程序运行之前不存在 Win32_DiskDriveToDiskPartition 条目，这是从硬件 ID 定位卷的常用方法。经过多次谷歌搜索和[一些试验和错误](http://savant7.com/wp-content/uploads/2009/02/keyboardsmasher.gif)，我一直无法找到将 PHYSICALDRIVE2 关联到 G: 的架构合理的方法。网上普遍的共识是你不应该期望这样的映射存在，因为物理媒体不需要分区或卷等，但在我的情况下，我基本上知道它*确实*存在，并且如果预期会以某种有意义的方式出错映射丢失。

在这一点上，我唯一的策略是枚举所有卷并在所有 CD 驱动器中查找适当的文件，也许跟踪在我的加密 USB 驱动器连接后已识别的任何此类设备。显然，这是一个丑陋的 hack。建议？

```
TargetInstance = 
instance of Win32_LogicalDisk
{
    Caption = "G:";
    CreationClassName = "Win32_LogicalDisk";
    Description = "CD-ROM Disc";
    DeviceID = "G:";
    DriveType = 5;
    MediaType = 11;
    Name = "G:";
    SystemCreationClassName = "Win32_ComputerSystem";
};

instance of Win32_DiskDrive
{
    Caption = "SanDisk Enterprise FIPS USB Device";
    ConfigManagerErrorCode = 0;
    ConfigManagerUserConfig = FALSE;
    CreationClassName = "Win32_DiskDrive";
    Description = "Disk drive";
    DeviceID = "\\\\.\\PHYSICALDRIVE2";
    FirmwareRevision = "6.61";
    Index = 2;
    InterfaceType = "USB";
    Manufacturer = "(Standard disk drives)";
    MediaLoaded = TRUE;
    Model = "SanDisk Enterprise FIPS USB Device";
    Name = "\\\\.\\PHYSICALDRIVE2";
    Partitions = 0;
    SerialNumber = "u";
    Signature = 0;
    Status = "OK";
    SystemCreationClassName = "Win32_ComputerSystem";
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:09:46.223

我有一个以类似方式工作的 USB 3G 加密狗。

它以两个完全独立的设备呈现给计算机：一个 CD-ROM 驱动器和一个 3G 加密狗。在您的情况下，它是一个 CD-ROM 驱动器和一个硬盘驱动器。

Windows 认为`G:`实际上是一个物理 CD-ROM 驱动器。 `G:`不是`PHYSICALDISK2`.

这就是为什么您无法在`G:`and之间找到直接联系的原因`PHYSICALDISK2`：没有。

如果你挖掘得足够深，你会发现 CD-ROM 和磁盘在同一个 USB 总线上。我不知道您是否可以通过软件最终证明它们实际上是同一设备。

# java - 使用方法，我无法让它读取两个不同的输入

> ID：13123727
> 
> 赞同：0
> 
> 时间：2012-10-29T14:36:01.337
> 
> 标签：java, methods

我目前正在尝试创建一个 bmi 计算器，但由于我不知道如何捕捉两个不同的值（英尺和英寸）然后验证他们。

公共类 BMI {

```
public static void main (String[] args)
{
    System.out.println("Value between 2 and 7: " + heightInInches(2,7));
    System.out.println("Value between 0 and 11: " + heightInInches(0,11));

    System.out.println("Value between 3 and 30: " + weightInPounds(3,30));
    System.out.println("Value between 0 and 13: " + weightInPounds(0,13));
}

public static int heightInInches(int lower, int upper)
{
    Scanner kybd = new Scanner(System.in);
    System.out.printf("Enter your height between %d and %d: ", lower, upper);
    int height = kybd.nextInt();

    while (height < lower || height > upper)
    {
        System.out.printf("Retry between %d and %d:" , lower, upper);
        height = kybd.nextInt();
    }     

    return height;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:43:05.403

这看起来不对`while (height < inches || height > inches)`

事实上，整个`heightInInches()`必须被修改。您通过显示英尺和英寸来接受用户输入的方式是不正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:45:24.520

如果你想保留你的代码，我不推荐。像这样将扫描仪保持在while循环中

```
while(yourcond){
   kybd = new Scanner(System.in);//take the input again
     height = kybd.nextInt();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:58:41.260

可能您想查询用户的英尺，将其存储在成员变量中，然后查询英寸并进行计算。例子：

修改后的主类：

```
 package feetinch;

    public class FeetInch {

    public static void main(String[] args) {
        HeightQuery heightQuery = new HeightQuery();

        heightQuery.queryForFeet();
        heightQuery.queryForInches();

        System.out.println("Result=" + heightQuery.getHeight());

    }
} 
```

新班级：

```
 package feetinch;

import java.util.Scanner;

public class HeightQuery {
    private int feet, inches;

    public void queryForFeet() {
        Scanner kybd = new Scanner(System.in);
        System.out.printf("Enter your height in feet: ");
        feet = kybd.nextInt();
    }

    public void queryForInches() {
        Scanner kybd = new Scanner(System.in);
        System.out.printf("Enter your height in inches: ");
        inches = kybd.nextInt();
    }

    public int getHeight() {
        return (feet * 12 )  + inches;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T15:29:44.003

以下是一个简单的BMI计算器，您可以通过修改自己的条件来玩。

```
static int heightInInches( int f,int i){
            int in=f*12;
            int inches=i+in;
            return inches;
        }
        static int weightInPounds(int stone, int p){
            int po=stone*14;
            int pounds=p+po;
            return pounds;
        }
        static int calculateBMI(int height,int weight ){
            int w=weight*703;
            int h=height*height;
            int bmi = w/h;
            return bmi;
        }
        public static void main(String[] args){
            Scanner input=new Scanner(System.in);
            System.out.print("Enter height in feet (2-7): ");
            int feet=input.nextInt();
            while( !(feet>= 2 && feet<=7))
            {
                System.out.println("Retry between 2 and 7 :");
                feet=input.nextInt();
            }
            System.out.print("Enter height in inch(0-11): ");
            int inch=input.nextInt();
            while( !(inch>= 0 && inch<=11))
            {
                System.out.println("Retry between 0 and 11 :");
                inch=input.nextInt();
            }
            System.out.print("Enter weight in stone: ");
            int stone=input.nextInt();
            System.out.print("Enter weight in pound: ");
            int pound=input.nextInt();
            int height=heightInInches(feet,inch);
            int weight=weightInPounds(stone,pound);
            int bmi=calculateBMI(height,weight);
            System.out.println("BMI is: "+bmi);
        } 
```

# c# - SQL 到 NHibernate HQL

> ID：13123728
> 
> 赞同：-1
> 
> 时间：2012-10-29T14:36:08.730
> 
> 标签：c#, nhibernate, hql

我是休眠和 hql 的新手。谁能帮我以下查询的 hql 等效项是什么？

```
SELECT  CONVERT(DATETIME,
LEFT(CAST([run_date] AS VARCHAR),4) + '-' +  
SUBSTRING(CAST([run_date] AS VARCHAR),5,2) + '-' + 
SUBSTRING(CAST([run_date] AS VARCHAR),7,2) + ' ' + 
LEFT(RIGHT('000000' + CAST([run_time] AS VARCHAR),6),2) + ':' + 
SUBSTRING(RIGHT('000000' + CAST([run_time] AS VARCHAR),6),3,2) + ':' + 
SUBSTRING(RIGHT('000000' + CAST([run_time] AS VARCHAR),6),5,2)
,121)
FROM sysjobhistory 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:39:47.470

我不会为此创建 HQL 查询。相反，我只会使用简单的 hql 来读取`run_time`并使用带有一些 Date Fromate 的 ResultTransfomer 来获得最终结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:43:55.793

你真的在这里折磨NHibernate。诚然，与s`sysobjhistory`有一些奇怪的模式，但你正在做的不是 NHibernate 方式。`run_date``run_time``int`

我这样做的方式是编写一个自定义来在本机实例和这两列[`IUserType`](http://lostechies.com/rayhouston/2008/03/23/mapping-strings-to-booleans-using-nhibernate-s-iusertype/)之间进行转换。`DateTime`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T14:31:47.747

由于 sysjobhistory 特定于特定的 RDBMS，因此尝试将其定义为 DB 本身中的存储过程或用户函数，然后简单地从 HQL 调用它可能是一个好主意。

# php - Android：带有blob字段的php非关联数组输出到sqlite

> ID：13123729
> 
> 赞同：1
> 
> 时间：2012-10-29T14:36:11.910
> 
> 标签：php, android, json, sqlite, blob

从 PHP 脚本我得到一个非关联数组输出

```
...
$data[8] = base64_encode($data[8]..
.
.
array_push($CuNames, $data);
echo json_encode($CuNames); 
```

MySql 表中的字段是 Name varChar(30)、Country varchar(5)、PicHome Blob、FuzzyHome varchar(3)。

```
 [["Manne","Swiss", "KDKJJRNNN\KSHFHAAA....",null],["Adam","USA","HKKKHJIIDD\jkJ\jk.....",null]] 
```

有没有办法忽略 http 流中的 Blob 数据并仅提取字段名称、国家/地区、FuzzyHome 并将其放入 JSON 数组中，是否可以从 JSON 对象或 JPG 中的 http 流中获取 Blob 字段 PicHome或其他格式，以便我可以在 sqlite 表中将其用作 Blob 字段以及如何执行此操作。不要问性能和其他事情。PHP 是一个给定的脚本，而不是我的宝贝，我不能更改它。我知道有两个 http 流的解决方案，一个用于数据，一个用于 pict...

# java - 一个 log4j.xml - 许多脚本

> ID：13123734
> 
> 赞同：0
> 
> 时间：2012-10-29T14:36:30.663
> 
> 标签：java, xml, log4j

我的实用程序 jar 文件之一由位于不同类别的不同 nix 脚本使用。

问题：无法初始化 log4j 框架（无法找到 log4j.xml）。解决方案，允许在通过不同脚本启动 jar 类时正确配置记录器 - 使用环境变量和强制配置使用`DOMConfigurator.configure(pathToConfXml)`方法。是否可以避免路径硬编码并在脚本中配置记录器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:57:28.087

您可以`log4j.configuration`按照 log4j[默认初始化过程](http://logging.apache.org/log4j/1.2/manual.html#Default_Initialization_Procedure)中的说明将系统属性设置为配置文件，例如

```
-Dlog4j.configuration=log4j.xml               Classpath-Resource
-Dlog4j.configuration=file:/c:/log4j.xml      FileSystem-Resource 
```

如果您不想将路径硬编码到脚本中，而不是将其作为脚本参数/参数。

# objective-c - 首先在 NSString 中添加文本

> ID：13123735
> 
> 赞同：0
> 
> 时间：2012-10-29T14:36:32.613
> 
> 标签：objective-c, ios, xcode

我需要向 NSString 添加常量文本并将其传递给我的方法。这个想法是我需要有“ *X1* ”，然后是动态的字符串。我应该如何将它们融合到一根弦上？

好吧，这是代码，也许它会比我对我正在尝试做的解释更清楚。

```
 NSString *name = [[NSUserDefaults standardUserDefaults] stringForKey:@"Name"];
 [self sendSMS:[@"*X1*%@" name]]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:39:13.923

我不是 100% 清楚你在问什么，但这有帮助吗？

```
NSString *name = [@"X1" stringByAppendingString:[[NSUserDefaults standardUserDefaults] stringForKey:@"Name"]];
[self sendSMS:name]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T14:42:17.110

你有很多选择可以做到这一点

例如，您可以使用 NSString stringWithFormat。

```
[NSString stringWithFormat:@"X1%@", name]; 
```

但我真的建议你研究[NSString 类](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)，以了解什么是最适合你的选择。不仅适用于本案，而且适用于您将面临的所有未来案件。

您的代码的一些选项是：

```
NSString *name = [[NSUserDefaults standardUserDefaults] stringForKey:@"Name"];
[self sendSMS:[NSString stringWithFormat:@"X11%@",name]]; 
```

或者

```
NSMutableString *name = [[NSUserDefaults standardUserDefaults] stringForKey:@"Name"];
[name insertString:@"X11" atIndex:0];
[self sendSMS:name]; 
```

# c++builder - 生成器 C++ 调用 VC++ 类

> ID：13123737
> 
> 赞同：0
> 
> 时间：2012-10-29T14:36:35.103
> 
> 标签：c++builder, c++builder-2006

我已经用 VC++ 编译了一个 Hunspell DLL，其中包含一个类......现在我想在 Builder C++ 2006 中调用该 DLL 来使用它的功能......我该怎么做？

我试过：

```
typedef Hunspell * (CALLBACK *fpoint)(char *aff_file, char *dict_file);
fp pHunspell = (fp)GetProcAddress(handle_Hunspell, "hunspell_initialize");
if (pHunspell) {
  Hunspell* obj = (Hunspell *)pHunspell("..\hunspelldic\en_US.aff", "..\hunspelldic\en_US.dic");
  obj->add_dic("..\hunspelldic\it_IT.aff", "..\hunspelldic\it_IT.dic");
} 
```

问题是，如果在 BuilderC++ 2006 中，我可以在 obj-> 之后按 shift-space 后显示函数，但看起来它并不能真正识别类函数，并且它一直发出 Unresolved external '__fastcall Hunspell::add_dic(...); ' 参考自……

将 VC++ dll 调用到 Builder C++ 中的确切方法是什么？在此先感谢大家...

干杯，路易吉诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T08:10:52.480

首先，您必须`#include`为您的**DLL**导入头文件（包括类、常量定义...）

之后有两种方法：

1.  **静态 DLL 链接**

    很容易，但有时不适用于**MSVC++ DLL**。**您需要为您的DLL**添加项目的**LIB**文件，您可以在 Borland bin 文件夹中使用**implib.exe**创建该文件，但您可能必须使用命令行开关来正确转换使用的 mangling，直到构建器可以解析所有外部文件。例如：

     ****```
    implib.exe -c -f -a glut32.lib glut32.dll 
    ```

    如果您有不正确的 lib 文件，那么编译器将添加您未解决的外部错误。此外，来自**MSVC++的****obj/lib**文件与 Borland/Intel 不兼容，因为 MS 使用它们的非标准格式。在这种情况下，Borland 会喊出**错误的 OMF**之类的东西，因此使用**implib**实用程序**** 
*******   **动态 DLL 链接**

    **在下面的示例中，我从DLL**链接 2 个函数。对于链接类，您必须链接您导入的所有类的所有使用方法。此外，您可能会遇到**DLL 中名称修改的**问题（类似于静态链接），因此**请使用一些工具来探索 dll**（我使用 DLL Export Viewer），它会向您显示**DLL**中您必须在`GetProcAddress`. 这里有一个例子：

    ```
    HANDLE hdll;
    typedef BOOL(__stdcall *_InitRemoteCtrl)(HWND); _InitRemoteCtrl InitRemoteCtrl;
    typedef DWORD(__stdcall *_ReadRemoteData)();    _ReadRemoteData ReadRemoteData;

    __fastcall TForm1::TForm1(TComponent* Owner):TForm(Owner)
        {
        hdll=LoadLibrary("./RemtCtrl.dll");
        if (hdll==0) Application->Terminate();
        InitRemoteCtrl=(_InitRemoteCtrl)GetProcAddress(hdll,"InitRemoteCtrl");
        ReadRemoteData=(_ReadRemoteData)GetProcAddress(hdll,"ReadRemoteData");
        }

    void __fastcall TForm1::FormDestroy(TObject *Sender)
        {
        FreeLibrary(hdll);
        } 
    ```****** 

 ****如果可以，请使用第一个选项，因为它更安全。也不要忘记在**DLL**头文件中导出/导入类，导出**DLL**源和导入**DLL**使用。

```
class __declspec(dllimport/dllexport) myClass
    {
    ...
    }; 
```

**附言**

**在MSVC++**和**Borland**之间构建**API**时要小心导出/导入的内容，避免使用展台平台中未使用的非标准数据类型（或以相同的方式，...）。****`AnsiString`********

# settings - Magento：从总额中扣除的优惠券（回扣）增值税？

> ID：13123738
> 
> 赞同：0
> 
> 时间：2012-10-29T14:36:35.193
> 
> 标签：settings, magento-1.4

我的 Magento 以某种方式计算我的回扣增值税并从总额中扣除，请看下面的示例：

小计：188 欧元
回扣 10 欧元
运费 0 欧元
增值税：28,12 欧元 (19%)
总计：176,10 欧元

总计应该是 178 欧元 (188 -10)，但它是 188 - 10 - 1.90，这是错误的。也许有些东西没有以正确的方式配置，但我没有更多的想法去哪里看。我已经在系统 > 配置 > 税中将“应用客户税”设置为“折扣后”，这不是解决方案。

有任何想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:17:02.673

如果您的 Magento 版本低于 1.4.2，那么您将度过一段糟糕的时光。他们在 1.4.2 版本中对税收计算进行了巨大的改写，解决了很多问题。

无论如何，试试这个设置：

*   计税方法基于：总计
*   应用客户税：折扣前
*   对价格应用折扣：含税

让我知道它是如何工作的。

# linux - 如何在 Linux 中从 MSI 中获取文件的真实名称（或者，如何读取 MSI 数据库）？

> ID：13123739
> 
> 赞同：1
> 
> 时间：2012-10-29T14:36:39.540
> 
> 标签：linux, visual-studio-2010, windows-installer, cab

**更新：**我更改了这个问题的标题，以反映以下一些答案的真正需要。

我希望能够在 Linux 中从 Visual Studio 2010 的本机部署工具中生成的 MSI 获取特定的可执行文件。但是 cabextract 得到的名字都很时髦：

```
-rw-r--r-- 1 root wheel     159 Jul 16 17:26 _07DAC52BD05CC8A8D6B2195350CC8C13
-rw-r--r-- 1 root wheel   34304 Oct 29 12:10 _09C75789ECE59A0AC891A85289474E75
-rw-r--r-- 1 root wheel    8704 Oct 29 12:10 _0CB147FD23752DEFAC3B73925E1E38DB
-rw-r--r-- 1 root wheel     766 Oct 29 12:10 _1D0B16C3296C400D9FD4018E77AC0B05
-rw-r--r-- 1 root wheel   10752 Oct 29 12:10 _24792622E94742D68A455C4F1D54D51F
-rw-r--r-- 1 root wheel     159 Oct 29 12:10 _90A663D25084CD22A230CCB8F55A3700
-rw-r--r-- 1 root wheel   12800 Oct 29 12:10 _BC47FBF48B42E5E71C9901188422814A
-rw-r--r-- 1 root wheel  873984 Oct 29 12:10 _EAFFD36EAA914E7F9D3DAC8BA13DFB6A
-rw-r--r-- 1 root wheel    4608 Oct 29 12:10 _F434E52DDE0AB5C2D68CE7A78B0B2477
-rw-r--r-- 1 root wheel  467456 Oct 29 12:10 _F90AF0EB7EEF445A92623132D00191EA
-rw-r--r-- 1 root wheel  421200 Oct 29 12:10 F_CENTRAL_msvcp100_x86.AFA96EB4_FA9F_335C_A7CB_36079407553D
-rw-r--r-- 1 root wheel  773968 Oct 29 12:10 F_CENTRAL_msvcr100_x86.AFA96EB4_FA9F_335C_A7CB_36079407553D 
```

与解决方案的 Release 目录相比，我可以看到我想要的文件 (itragent.exe) 实际上是 _F90AF0EB7EEF445A92623132D00191EA - 有没有办法在 Linux 中以编程方式得出这个结论？使用 cabextract 还是借助其他实用程序？那里有两个 XML 文本文件，但它们只有 .NET Framework 版本信息，没有别的。

或者，有没有办法强制 VS 2010 在 MSI 中使用正确的名称归档可​​执行文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:19:44.887

cab 文件以 .msi 数据库中的主键命名。要找到他们的真实姓名，您必须查看数据库。如果您只需要（从 查找），则需要的表包括[File](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368596.aspx)，或者对于相对路径，您还需要[Directory （](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368295.aspx)[目录](http://blogs.msdn.com/b/robmen/archive/2005/06/21/431294.aspx)位置的自链接树；如果您需要帮助理解它）和[组件](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368007.aspx)作为多对多查找表。`FileName``File`

请注意，在某些病理情况下，一旦完成，cab 中的多个条目可能具有相同的路径名，因此您可能必须特别处理这些。这应该是比较少见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:11:56.587

有问题，cab 不包含有关文件“真实”名称的信息。但它包含这些文件的顺序。MSI 文件有表`File`，其中每个压缩文件都有`Sequence`编号。此编号应与文件柜内文件的序号相同。

我认为，您可以打开 MSI，从列中获取真实文件名`FileName`及其`Sequence`编号，并以某种方式将它们等同于 cab 序列。

有用的链接：[CAB 格式的描述](http://msdn.microsoft.com/en-us/library/bb417343.aspx)、[有关文件表](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368596%28v=vs.85%29.aspx)和[Windows Installer SDK的信息](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370834%28v=vs.85%29.aspx)

# ajax - Internet Explorer 不会从 AJAX 请求发送 cookie

> ID：13123740
> 
> 赞同：3
> 
> 时间：2012-10-29T14:36:41.293
> 
> 标签：ajax, http, cookies

我有一个 HTML 页面，它发出 AJAX 请求并获得带有 cookie 的响应。问题是当我转到同一域上的另一个页面时，Firefox 发送 cookie，但 IE (9) 没有。和它的安全配置有关吗？我尝试使用 cookie 权限进行一些操作，但无济于事。

# python - ListCtrl 中的自定义标题组织或 wxPython 中的其他小部件

> ID：13123746
> 
> 赞同：3
> 
> 时间：2012-10-29T14:37:09.947
> 
> 标签：python, user-interface, wxpython, listctrl

我在 wxPython 中为 ListCtrl 编写了代码：

![列表控件](../Images/a046dd76dd6cf3beaf64e3158285cb76.png)

```
...
self.list_ctrl = wx.ListCtrl(panel, size=(-1,150), style=wx.LC_REPORT|wx.BORDER_SUNKEN)
self.list_ctrl.InsertColumn(0, 'Name')
self.list_ctrl.InsertColumn(1, 'Old value')
self.list_ctrl.InsertColumn(2, 'New value')
self.list_ctrl.InsertColumn(3, 'Old percent')
self.list_ctrl.InsertColumn(4, 'New percent')
... 
```

但我想获得具有以下标题组织的 ListCtrl （或其他小部件）：

![标头组织](../Images/4deb34af66a1ec6df3523757c369abfc.png)

我认为使用 ListCtrl 很难解决这个问题，可能是在 wxPython 中使用另一个小部件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:32:30.560

正如我在您交叉发布的 wxPython 邮件列表中指出的那样，ListCtrl 不提供此功能。您可以使用列跨越技术和您自己的排序算法通过 Grid 控件 (wx.grid.Grid) 来完成此操作。您可能可以破解 UltimateListCtrl 来执行此操作，因为它是纯 Python 而不是包装的 C++ 对象，但这将是一个不平凡的补丁/破解。

可能最好的方法是滚动您自己的小部件。在 wxPython wiki、wxPython 演示和他们的邮件列表中有自定义小部件的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T04:20:15.377

好吧，您可以使用 wx.html.HtmlWindow 小部件制作自己的小部件。这是示例链接：http: [//zetcode.com/wxpython/advanced/](http://zetcode.com/wxpython/advanced/)。

# objective-c - Objective-C 显示数组

> ID：13123748
> 
> 赞同：0
> 
> 时间：2012-10-29T14:37:17.073
> 
> 标签：objective-c, nsmutablearray, nslog, viewdidload

我创建了一个`NSMutableArray`调用的`myArray`地方，我使用 SQL 语句插入三个变量。一个变量是一个字符串，另外两个是双精度变量。然后在`viewDidLoad`我要显示的数组中。

具体来说，我使用过：

```
- (void)viewDidLoad  {  
    NSLog(@"%@",myArray);  
    [super viewDidLoad];  
} 
```

但它显示`"<0x16145a70>"' "<0x16145ab0>"`等等......

我认为问题在于`myArray`包含两种格式（字符串和双精度）。

代码需要什么来显示数组的可读数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:58:56.230

这是有趣的输出。NSObject-description 通常提供比对象的物理地址更多的信息。当您的代码到达 NSLog 时，您可能会遇到 myArray 不再是有效 NSArray 的问题。同样重要的是，将双精度数包装到 NSNumber 中以插入数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:46:02.587

由于您有不同类型的数据，您应该自己打印出来

这将为您提供类似于您所追求的输出：

```
for(id element in myArray) {
    NSLog(@"%@", [element description]);
} 
```

# sql-server-2008 - 使用count then 除法时遇到除以零错误

> ID：13123752
> 
> 赞同：0
> 
> 时间：2012-10-29T14:37:25.667
> 
> 标签：sql-server-2008

我想对一个字段进行计数，然后 1 除以这个数字，所以我得到一个小数。使用下面的代码时，我收到错误“遇到除以零错误。”

```
COUNT(1/isnull(nullif(current_balance,0),0)) as BALANCE_CURRENT_NU 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:40:18.677

在某些情况下，您的表达式指示 SQL Server 除以 0。

```
COUNT(1/isnull(nullif(current_balance,0),0)) 
```

这减少到

```
COUNT (1/0) 
```

在某些情况下，这显然是除以 0。

**更新**

如果您尝试获取具有非空 current_balance 的帐户数，请尝试

```
SELECT COUNT(*) as BALANCE_CURRENT_NU FROM MyTable 
WHERE current_balance IS NOT NULL 
```

如果这不是您想要的，请澄清您要完成的工作。

# push-notification - 一段时间后GCM停止接收

> ID：13123755
> 
> 赞同：3
> 
> 时间：2012-10-29T14:37:40.943
> 
> 标签：push-notification

最近，我尝试使用运行良好的 GCM 服务。但是，如果我 1 天不使用它，它就会停止接收。我需要重新启动应用程序。那么如何避免这种情况呢？我检查了注册 ID 始终相同，而不是 ID 问题。

谢谢亚历克斯

# android - 找不到表 Android

> ID：13123757
> 
> 赞同：1
> 
> 时间：2012-10-29T14:37:44.593
> 
> 标签：android, sqlite

我有一个类 DatabaseHandler。我已经使用以下代码覆盖了 onCreate(SQLiteDatabase db) 方法：

```
 String CREATE_TABLE = "CREATE TABLE IF NOT EXISTS " + TABLE_SONG + "(" + ID + " INTEGER PRIMARY KEY AUTOINCREMENT," +
                            SONG_TITLE + " TEXT," + ARTIST_NAME + " TEXT," + GENRE + " TEXT," +
                            SONG_PATH + " TEXT" + ")";
    db.execSQL(CREATE_TABLE); 
```

但是我发现每次打开模拟器时都会在 TABLE_SONG 中附加额外的项目，结果即使我在 sdcard 中有 6 首歌曲，数据库也显示了 454 首歌曲。这迫使我放下桌子，想重新创建它。但是现在我被困住了，找不到表，或者说没有创建表。当我创建此类的对象时，不应该每次都调用 onCreate() 方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:43:48.220

参考`SQLiteOpenHelper`实现，该`onCreate`方法仅在找不到数据库文件时调用一次，导致它创建一个。稍后，`onUpgrade`每当发现数据库版本号增加时调用。

要快速解决您的问题，只需卸载并重新安装该应用程序即可。这将导致您的数据库消失，因此允许`onCreate`再次调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:44:26.110

`onCreate`如果数据库已经创建，则不会被调用，例如在您之前运行应用程序期间。

卸载您的应用程序并重新安装 - 它也会删除 db 文件

或增加您的数据库版本，这将导致`onUpgrade`被调用。`onUpgrade`您可以删除所有表格并调用onCreate

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:49:04.290

我同意 waqas 请在下面找到示例代码

```
 @Override
        public void onCreate(SQLiteDatabase db) {
       String CREATE_TABLE = "CREATE TABLE " + TABLE_NAME
                    + ... ) ";
db.execSQL(CREATE_TABLE);}

@Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Drop older table if exists
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
                onCreate(db);
} 
```

**编辑** onUpgrade() 的使用

当你构造一个版本比打开的数据库版本新的 SQLiteOpenHelper 时，它会被调用。做什么取决于在旧版本和新版本之间对数据库所做的更改。唯一不删除已更改表的情况是，更改不仅仅是添加的列。然后您可以使用 ALTER TABLE 语句将新列添加到表签名中。

# ruby-on-rails-3 - Mongoid 渲染引用的完整对象

> ID：13123762
> 
> 赞同：0
> 
> 时间：2012-10-29T14:38:06.200
> 
> 标签：ruby-on-rails-3, json, hash, reference, mongoid3

我在 rails 3 应用程序中使用 mongoid 3。

我有一个带有引用对象“文件”的客户端类（因此是自定义“LocalisedFile”类的实例。）

客户端.rb：

```
class Client
    include Mongoid::Document
    include Mongoid::Timestamps
    store_in collection: 'clients'

    field :name, type: String

    has_many :files, class_name: 'LocalisedFile', inverse_of: :owner
end 
```

本地化文件.rb：

```
class LocalisedFile
    include Mongoid::Document
    include Mongoid::Timestamps
    include Geocoder::Model::Mongoid
    store_in collection: 'files'

    belongs_to :owner, class_name: 'Client', inverse_of: :files
end 
```

管理我的文件没问题。

但是当我想渲染一个文件数组时，我只得到一个带有客户端字符串 id 的“owner_id”字段......

```
[(2)
    {
        "_id": "508e85e412e86a2607000005",
        "created_at": "2012-10-29T13:34:29Z",
        "owner_id": "508c06e4bcd7ac4108000009",
        "title": "Try",
        "updated_at": "2012-10-29T13:34:29Z",
    },-
    {
        "_id": "508e8c5312e86a2607000006",
        "created_at": "2012-10-29T14:01:56Z",
        "owner_id": "508c06e4bcd7ac4108000009",
        "title": "2nd Try",
        "updated_at": "2012-10-29T14:01:56Z",
    }-
] 
```

这可能很正常，但我想获取客户信息，以便在带有 Google Maps API 的 JS 应用程序中使用它，如下所示：

```
[(2)
    {
        "_id": "508e85e412e86a2607000005",
        "created_at": "2012-10-29T13:34:29Z",
        "owner": {
            "_id": "508c06e4bcd7ac4108000009",
            "name": "Client 1"
        },
        "title": "Try",
        "updated_at": "2012-10-29T13:34:29Z",
    },-
    {
        "_id": "508e8c5312e86a2607000006",
        "created_at": "2012-10-29T14:01:56Z",
        "owner": {
            "_id": "508c06e4bcd7ac4108000009",
            "name": "Client 1"
        },
        "title": "2nd Try",
        "updated_at": "2012-10-29T14:01:56Z",
    }-
] 
```

有人有想法吗？我想测试类似 to_hash 方法的东西，但它不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:23:55.103

由于您使用 和 之间的引用关系`Client`，`LocalisedFile`因此客户端的数据不会在文件对象中复制，只有`owner_id`, 才能使关系正常工作。您需要通过您在模型`owner`上定义的关系来访问客户端数据。`LocalisedFile`例如：

```
l = LocalisedFile.first
l.owner.id # returns the id of the owner
l.owner.name # returns the name of the owner 
```

要创建您需要的那种输出，我建议将其抽象为一个实例方法，例如：

```
class LocalisedFile
  def as_hash_with_owner
    hash = self.to_hash
    hash[:owner] = { _id: self.owner.id, name: self.owner.name }
    hash.except[:owner_id]
  end
end 
```

然后您可以执行以下操作：

```
files = LocalisedFile.all.entries # or whatever criteria
files.map { |f| f.as_hash_with_owner } 
```

这应该为您提供一个 ruby​​ 哈希数组，然后您可以将其转换为 JSON 或您需要的任何格式。

# javascript - 即时验证和修改时间输入

> ID：13123766
> 
> 赞同：5
> 
> 时间：2012-10-29T14:38:20.677
> 
> 标签：javascript, regex

在 Javascript 中，如何使用正则表达式和`string.replace`函数验证和修改用户时间输入，以便它不会告诉用户任何内容，而是即时验证和修改输入？

例如，用户输入可能是`1.12p` `13:12` `1,12PM`，但最终结果应该始终是`1:12 PM`。

有没有人有如何做到这一点的例子？

PS。我知道使用 timepicker 是一种更有效的方式，但在这种情况下我必须使用用户输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:33:32.437

您可以使用一个简单的正则表达式作为起点：

```
(\d{1,2})\s*[.,:;]\s*(\d{1,2})\s*(([Aa]|[Pp])[Mm]?)? 
```

```
^        ^  ^     ^  ^        ^  ^ ^         ^
Hour group  |     |  Minutes  |  | |         M is optional
         |  Valid separators  |  | Case-insensitivity
         |        |           |  AM/PM group
         ------------------------------Allow spaces 
```

您仍然需要验证时间是否有效（59:99 可能无效），但这至少可以更容易地在 javascript 中解析字符串。解析后，您可以根据需要将其打印回来。

*编辑：哎呀。忘记了 javascript 不支持命名组。只需使用编号组来达到相同的效果。*

**示例**
干草...这是一个完整的工作示例。何时验证（以及如何处理无效输入）由您决定：

```
<html>
    <head>
        <script>
function parseTime( timeString ){
    var timePattern = /(\d{1,2})\s*[.,:;]\s*(\d{1,2})\s*(([Aa]|[Pp])[Mm]?)?/;
    var timeMatch = timePattern.exec( timeString );

    var INVALID = null;

    if ( timeMatch !== null ){
        var hour = timeMatch[1];
        var minute = timeMatch[2];
        var ampm = timeMatch[3];

        if ( minute < 0 || minute > 59 )
            return INVALID;

        if ( ampm != "" ){
            if ( hour < 1 || hour > 12 )
                return INVALID;

            ampm = ampm.substring(0,1).toUpperCase() == "A" ? "AM" : "PM";
        } else {
            if ( hour > 23 )
                return INVALID;

            ampm = ( hour < 13 ? "AM" : "PM" );
            hour = hour % 12;
            if ( hour == 0 ) hour = 12;
        }

        return hour + ":" + minute + " " + ampm;
    } else {
        return INVALID;
    }
}

function unitTest(){
    var testStrings = [
        ["1:30 PM", "1:30 PM"],
        ["1.30p", "1:30 PM"],
        ["1;30a", "1:30 AM"],
        ["59:99 PM", null],
        ["0,30", "12:30 AM"],
        ["15:00", "3:00 PM"],
        ["abc", null] ];

    var testResults;
    testResults = "<table><tr><th>Input</th><th>Expected</th><th>Actual</th></tr>";

    for (var i = 0; i < testStrings.length; i++){
        testResults +=
            "<tr>" +
                "<td>" + testStrings[i][0] + "</td>" +
                "<td>" + testStrings[i][1] + "</td>" +
                "<td>" + parseTime( testStrings[i][0] ) + "</td>" +
                "<td>" + ( testStrings[i][1] == parseTime( testStrings[i][0] ) ?
                            "<span style='color:green'>Success</span>" :
                            "<span style='color:red'>Failure</span>" ) +
                "</td>" +
            "</tr>";
    }

    testResults += "</table>";

    this.document.getElementById("results").innerHTML = testResults;
}
        </script>
    </head>
    <body onload="unitTest();">

        <div id="results">
        </div>

    </body>
</html> 
```

**输出：**

> 输入 预期 实际
> 1:30 PM 1:30 PM 1:30 PM 成功
> 1.30p 1:30 PM 1:30 PM 成功
> 1;30a 1:30 AM 1:30 AM 成功
> 59:99 PM null null 成功
> 0,30 12 :30 AM 12:30 AM 成功
> 15:00 3:00 PM 3:00 PM 成功
> abc null null 成功

# android - 在android中访问v4l2？

> ID：13123768
> 
> 赞同：2
> 
> 时间：2012-10-29T14:38:23.300
> 
> 标签：android, v4l2

出于性能原因，我试图直接访问 android 中的 video 4 linux 设备并在其上执行传统的 v4l2 控制命令，根据我的 htc 需求，该设备被称为 /dev/msm_camera/config0 并且我设法打开它，但是当我在它上面尝试任何 ioctl 时，我总是得到“无效参数”，但它是在任何 linux 系统上都可以正常工作的相同代码，那么 android 有什么区别？以下是查询设备功能的代码示例：

```
static struct v4l2_capability x_vcap;

if (ioctl(x_conffd, VIDIOC_QUERYCAP, &x_vcap) < 0)
{
   __android_log_write(ANDROID_LOG_ERROR, "libcamera", strerror(errno));
   __android_log_write(ANDROID_LOG_ERROR, "libcamera", "Could not get camera capabitilites.");
}
else
{
    __android_log_write(ANDROID_LOG_INFO, "libcamera", "Got capabilities.");
    sprintf(message, "driver info: %s %d.%d.%d / %s @ %s", x_vcap.driver, (x_vcap.version >> 16) & 0xff, (x_vcap.version >>  8) & 0xff, x_vcap.version & 0xff, x_vcap.card, x_vcap.bus_info);
    __android_log_write(ANDROID_LOG_INFO, "libcamera", message );
} 
```

我真的需要访问 v4l2 以获得比 Camera java 类提供的更好的帧速率，所以请不要直接告诉我 Camera android 类。

感谢您的任何提示，sevy

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T13:25:04.430

在通用 Linux 操作系统中，还有另一个驱动程序控制用户空间和相机硬件（easycap 和 videodev）之间的通信。您使用的 IOCTL 命令特定于该驱动程序。
对于 Qualcomm 平台（意味着您的 HTC Desire 与 Qualcomm 处理器），他们为他们的摄像头模块构建了一个自定义摄像头驱动程序，该驱动程序与硬件有不同的接口（不同的 IOCTL 命令集）。该界面可以在[这里](https://code.google.com/p/android-source-browsing/source/browse/libc/kernel/common/media/msm_camera.h?spec=svn.platform--bionic.bf8709f54b1eabbd4e9bb81e91b9385a9863f505&repo=platform--bionic&r=bf8709f54b1eabbd4e9bb81e91b9385a9863f505)找到，或者至少是它的一个版本。

因此，您的 IOCTL 调用返回“无效参数”，因为它找不到“VIDIOC_QUERYCAP”命令。

如果答案来得太晚，我希望它会有所帮助。

# php - 如何在 PHP 函数中使用 jQuery 设置 cookie

> ID：13123771
> 
> 赞同：0
> 
> 时间：2012-10-29T14:38:35.073
> 
> 标签：php, jquery, jquery-cookie

我有一个使用 PHP 的非常基本的验证脚本，如果它们被验证，我想使用 jQuery Cookie 插件设置一个 cookie。作为 PHP 新手，我不知道如何在这里编写 Javascript 函数：

```
if($validated) {
  //SET jQUERY COOKIE HERE: $.cookie('COOKIE_NAME', 'COOKIE_INFO', { expires: 1, path: '/' });)
  header("Location: correct.php");
} else {
  header("Location: incorrect.php");
} 
```

我知道我可以为此使用 PHP，但后来我需要在 jQuery 函数中访问 c​​ookie，并且对客户端更加熟悉，我希望使用 jQuery Cookie 插件来完成。

任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:44:29.890

我猜你是在混合概念。

您可以在服务器端和客户端设置 cookie。并且这个 cookie 可以再次被两个部分读取。

因此，您可以使用 PHP (http://php.net/manual/en/function.setcookie.php) 设置 cookie 并使用 jQuery (https://github.com/carhartl/jquery-cookie) 读取它。

希望能帮助到你。问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:43:38.830

它可以用 JavaScript 完成，但没有理由不使用 PHP。[手册](http://php.net/manual/en/function.setcookie.php)页非常简单。

如果您确实在 JavaScript 中实现它，只需拆分成一个常规页面并以您通常的方式包含您的脚本。设置 cookie 后，您需要[`window.location.href`](https://stackoverflow.com/questions/7077770/window-location-href-and-window-open-methods-in-javascript)在那里调用重定向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:42:27.860

请使用谷歌： [PHP函数](http://php.net/manual/en/function.setcookie.php)

句法： `bool setcookie ( $name , $value , $expire , $path );`

# java - java gwt图像不可见

> ID：13123772
> 
> 赞同：0
> 
> 时间：2012-10-29T14:38:37.050
> 
> 标签：java, image, gwt

我正在尝试填充一个 CellTable，并且我想在一列中显示一个图像。应该为除一个之外的每一行显示此图像。有谁知道如何添加这样的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T07:32:30.447

这就是我所做的：

```
Column column = new Column<RowObject, ImageResource>(new ImageResourceCell()) {

    @Override
    public ImageResource getValue(RowObject object) {
        if (showImageFor(object)) {
            return getImageResource();
        } else {
            return null;
        }
    }
};

cellTable.addColumn(column); 
```

如果您不知道如何获取 ImageResource，请查看[此处](https://developers.google.com/web-toolkit/doc/latest/DevGuideClientBundle#ImageResource)的文档。

**更新**：如果你想使用自定义单元格，你应该决定是否在单元格的渲染方法中绘制图像：

```
public class CustomCell extends AbstractCell<ColumnObject> {
    @Override
    public void render(Context context, ColumnObject value, SafeHtmlBuilder sb) {
        if (showImageFor(value)) {
            // Render the image
        }
    }
} 
```

然后您可以像这样将该列添加到您的单元格中：

```
Column column = new Column<RowObject, ColumnObject>(new CustomCell()) {
    @Override
    public ColumnObject getValue(RowObject object) {
        return getColumnObjectFrom(object);
    }
};

cellTable.add(column); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:45:18.517

使用 ImageCell 或 ImageResourceCell。在 getValue() 中，您要么返回 null（不会显示图像），要么返回 URL/ImageResource。

# c# - 获取多线程中线程的状态

> ID：13123774
> 
> 赞同：-2
> 
> 时间：2012-10-29T14:38:51.083
> 
> 标签：c#, multithreading

我已经动态地创建了线程。

```
static void Main(string[] args)
{

    int ThreadCount =Convert.ToInt32ConfigurationManager.AppSettings["Threads"]);
    List<Thread> th = new List<Thread>();
    for (int i = 0; i < ThreadCount; i++)
    {
      Thread t = new Thread(print);
      th.Add(t);
    }
    foreach (Thread t in th)
    {
       t.Start();
    }
 }
 public static void print()
 {
    console.writeline("123");
 } 
```

我想知道这个线程什么时候完成。完成这些线程后，我想打印一条“DONE”消息

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T14:42:13.000

Thread.Join() 可以提供帮助；请参阅[http://msdn.microsoft.com/en-us/library/95hbf2ta.aspx](http://msdn.microsoft.com/en-us/library/95hbf2ta.aspx)。

```
foreach (var t in th)
   t.Join();

Console.WriteLine("DONE"); 
```

您可能想查看更高级别的 TPL（任务并行库）API；请参阅[http://msdn.microsoft.com/en-us/library/dd537609.aspx](http://msdn.microsoft.com/en-us/library/dd537609.aspx)。从长远来看，它可能更容易使用。

```
var tasks[] = new Task[n];
for (int i = 0; i < n; ++i)
{
   tasks[i] = new Task(() => Console.WriteLine(123));
   tasks[i].Start();
}

Tasks.WaitAll(tasks);
Console.WriteLine("DONE"); 
```

或在 PLINQ 中， http: [//msdn.microsoft.com/en-us/library/dd460688.aspx](http://msdn.microsoft.com/en-us/library/dd460688.aspx)，（尚未编译代码）

```
Parallel.ForEach(Enumerable.Range(1, n), i => Console.WriteLine(i));
Console.WriteLine("DONE"); 
```

# c++ - 如何在 C++ 中检索证书指纹

> ID：13123777
> 
> 赞同：5
> 
> 时间：2012-10-29T14:38:56.363
> 
> 标签：c++, certificate

我正在开发一个 C++ 应用程序，我需要检查证书的指纹。

我发现此解决方案使用 CryptQueryObject()[检查特定签名。](https://stackoverflow.com/questions/1072540/winverifytrust-to-check-for-a-specific-signature)但我仍然找不到检索指纹的方法。

在 C# 中，我可以使用[GetCertHashString](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate.getcerthashstring.aspx)方法来获取哈希（这是我需要的）或使用属性[X509Certificate.Thumbprint](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.thumbprint.aspx)

我知道我需要获取公钥的哈希值，但我不知道如何检索公钥..

我如何在 C++ 中做到这一点？有办法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-29T19:46:20.197

找到了怎么做。

你应该使用[CryptHashCertificate](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380200%28v=vs.85%29.aspx)

像那样：

```
DWORD* thumbPrintSize;
BYTE* thumbPrint;   
if (!CryptHashCertificate(0, hashAlg, 0,pCertContext->pbCertEncoded,
     pCertContext->cbCertEncoded, thumbPrint, thumbPrintSize)) {
        return false;
} 
```

其中pCertContext是证书，hashAlg是哈希算法（通常是sha-1）

# joomla - Joomla 自定义 JForm。使用 foreach 循环生成值

> ID：13123781
> 
> 赞同：0
> 
> 时间：2012-10-29T14:39:11.300
> 
> 标签：joomla, jform

谁能告诉我为什么这不起作用？错误出现在 foreach 循环中的某个地方。

```
jimport('joomla.form.formfield');

class JFormFieldCity extends JFormField {

        protected $type = 'city';

        public function getInput() {
        $db = JFactory::getDBO();
        $db->setQuery(
            'SELECT title' .
            ' FROM #__content'
        );
        $title = $db->loadObjectList;

                return '<select id="'.$this->id.'" name="'.$this->name.'">'.
                                           foreach ($title as $titlex)
                       {
                       '<option value="6" >'.$titlex.'</option>'
                       }
                       '</select>';} } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:10:55.740

下面是一个编辑过的代码，如果您从 xml 创建自定义字段，这将很有帮助。试一试，如果它不起作用，请告诉我。

```
 // No direct access to this file
        defined('_JEXEC') or die;

        // import the list field type

   jimport('joomla.form.helper');
    JFormHelper::loadFieldClass('list');

    class JFormFieldCity extends JFormFieldList
    {
        /**
         * The field type.

     *
     * @var     string
     */
    protected $type = 'city';

    /**
     * Method to get a list of options for a list input.
     *
     * @return  array       An array of JHtml options.
     */
    protected function getOptions() 
    {
        $db = JFactory::getDBO();
        //$query = new JDatabaseQuery;
        $query = $db->getQuery(true);
        $query->select('id,title');
        $query->from('#__content');         
        $query->order('title'); 
        $db->setQuery((string)$query);
        $messages = $db->loadObjectList();

        $options = array();
        if ($messages)
        {
            foreach($messages as $message) 
            {
                $options[] = JHtml::_('select.option', $message->title, $message->title);
            }
        }

        $options = array_merge(parent::getOptions(), $options);     
        return $options;
    }
} 
```

# c++ - C++ 并发外播

> ID：13123782
> 
> 赞同：1
> 
> 时间：2012-10-29T14:39:13.423
> 
> 标签：c++, boost, concurrency, parallel-processing, mutex

`boost`我使用and编写了一个小类`std::stringstream`来提供并发`std::ostream`支持。该类需要提前知道线程的数量（即使这种行为可以调整），并且该类使用通道的概念来识别不同的线程，以最大限度地减少资源并发，输出整个块并避免阻塞，该类缓冲对象中每个线程的输入`stringstream`。当线程调用 flush() 时，如果`ostream`资源不忙或缓冲区已满，缓冲区将被刷新。

您是否看到此实现有任何（性能）​​问题？特别是，使用通道我试图限制`stringstream`对象构造的数量。有没有一种好方法可以告诉`stringstream`对象要分配的字符串的长度？是否值得使用 char 数组进行缓冲？我选择`stringstream`它不仅是因为它易于使用，而且因为我`ostream`在 ()-operator 成员函数中实现了完全兼容。

```
#include <boost/thread.hpp>
#include <boost/ptr_container/ptr_vector.hpp>
#include<ostream>
#include<sstream>

class ConcurrentOutStream {
  public:
    ConcurrentOutStream( std::ostream& os, const uint channels, const uint buffer_size ) :
      os_( os ),
      max_buffer_size_( buffer_size ),
      buffers_( channels )
      {
        for ( uint i=0; i<threads; ++i ) buffers_.push_back( new std::ostringstream ); //because streams are not copyable
      };

    ~ConcurrentOutStream() {
      for ( uint i=0; i<buffers_.size(); ++i ) forceFlush( i );
    }

    std::ostream& operator()( const uint channel ) { return buffers_[channel]; }

    void flush( const uint channel ) {
      if ( buffers_[channel].str().size() < max_buffer_size_ ) tryFlush( channel );
      else forceFlush( channel );
    }

    const uint channels() { return buffers_.size(); };

  protected:
    void tryFlush( const uint channel ) { // write if ostream not busy
      if ( mutex_.try_lock() ) {
        os_ << buffers_[channel].str();
        buffers_[channel].str("");
        mutex_.unlock();
      }
    }

    void forceFlush( const uint channel ) {
      if ( ! buffers_[channel].str().empty() ) {
        boost::mutex::scoped_lock( mutex_ );
        os_ << buffers_[channel].str();
        buffers_[channel].str("");
      }
    }

    std::ostream& os_;
    const uint max_buffer_size_;
    boost::ptr_vector< std::ostringstream > buffers_;
    boost::mutex mutex_;
}; 
```

# ios - 具有许多不同视图的 iOS 应用程序

> ID：13123796
> 
> 赞同：0
> 
> 时间：2012-10-29T14:39:58.437
> 
> 标签：ios, ios5, view

我正在开发一个 iOS 应用程序，我希望它有超过 10 个视图。在 Android 中，您必须先创建一个布局，然后再创建它的类。我一直试图在 XCode 中实现这一点，但我不知道该怎么做......

这个想法是有一个视图类，以便每个类管理自己的视图。到目前为止我所做的是：

1- 创建一个名为 Overview 的新 Objective-C 类和 UIViewController 子类，然后检查 Witch XIB 的用户界面。

2-为了显示我使用的视图：`[[NSBundle mainBundle] loadNibNamed:@"Overview" owner:self options:nil];`

3-在 viewDidLoad 我用这个：`self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"overview_portrait.jpg"]];`改变背景图片

我可以看到视图，但背景没有改变，当我添加按钮并单击它们时，它会引发错误：`-[ViewController push:]: unrecognized selector sent to instance 0x7427220`

怎样才能达到我想要的？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:56:25.373

您正在显示视图，但没有加载它的控制器，这就是控制器的方法没有被调用的原因。您必须创建控制器类的实例并从当前控制器推送它。像这样的东西：

```
Overview *overview = [[Overview alloc] initWithNibName:@"Overview" bundle:nil];
[self pushViewController:overview animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:49:04.073

推送 ViewControllers 用于导航控制器，因此如果您正在查看界面构建器，如果您的屏幕视图（我不确定您是否使用故事板或 XIB）如果您可以更改的视图附加到标有“导航控制器”的灰色框，那么您可以利用：

```
 [self.navigationController pushViewController:myNewViewInstance animated:YES]; 
```

使用背景图像，您最好使用：

```
UIImageView *myBackground = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.width)];
            [self.view addSubview:myBackground];
            [self.view sendSubviewToBack:myBackground]; 
```

如果您不使用导航控制器，您可以使用：

```
 [self presentModalViewController:<#(UIViewController *)#> animated:<#];(BOOL)#>]; 
```

这将呈现新的视图控制器，然后返回使用：

```
[self dismissModalViewControllerAnimated:<#(BOOL)#>]; 
```

对于很多视图，我发现故事板是最好的，在创建新项目时勾选使用故事板框，然后您可以轻松查看所有视图并通过按钮推送创建模态转换以及不使用 CTRL+单击并从按钮上拖动`view1`并在任意位置取消拖动`view2`并单击模式，这将让您过渡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:49:43.470

我不确定 Android 的设置，但对于 iOS，您想要实例化视图控制器，而不是 nib 文件。您要做的是创建一个新的概览类并使用 nib 对其进行初始化。

```
Overview *overviewController = [[Overview alloc] initWithNibName:@"Overview" bundle:nil]; 
```

# tomcat - tomcat 6.0.14服务器远程部署

> ID：13123800
> 
> 赞同：0
> 
> 时间：2012-10-29T14:40:15.747
> 
> 标签：tomcat, deployment, ant, build

我正在寻找在 tomcat 6.0.14 应用程序服务器中进行远程部署的实时教程或步骤。我已经有一个基于 spring2 的 webapp，它是通过 ant 脚本手动部署的——我想自动化它。如何从我的 Windows 桌面 PC 远程部署、远程启动和远程停止 tomcat 6.0.14 服务器（在 windows VM 中运行）？

样品会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:55:44.670

这是将`ANT`应用程序远程部署到 tomcat 的脚本：

```
<target name="tomcat-deploy-war" description="Deploy the App to Tomcat">
    <deploy url="${tomcat.manager.url}"
            username="${tomcat.manager.username}"
            password="${tomcat.manager.password}"
            path="${web.context.path}"
            war="file:${build.destdir}/${web.war.name}.war"/>
  </target> 
```

[这篇文章](http://bill.dudney.net/roller/bill/entry/ant_stuff_for_tomcat_remote)包含您需要的所有信息。

# release - 我应该对 JSON.NET 等第三方 DLL 进行数字签名吗？

> ID：13123801
> 
> 赞同：9
> 
> 时间：2012-10-29T14:40:17.227
> 
> 标签：release, digital-signature, code-signing, digital-certificate

我有一个使用各种第三方库（例如 JSON.NET）构建的应用程序。

我想确保构成我的应用程序的所有 DLL 都经过数字签名，包括第三方的。鉴于这些不是作者签名的，我可以/应该自己简单地签署第三方吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-03-25T00:58:39.903

只是试图（不成功）在互联网上找到相同问题的答案。

结果，我检查了 Google 和 Adob​​e 如何交付他们的产品，发现他们文件夹中的每个二进制文件都经过签名，包括第三方的。

几个例子： 1\. Google Chrome 包含 pepflashplayer.dll，它的版权归 Adob​​e，但由“Google Inc.”进行数字签名。2\. Adob​​e Reader 包含ic​​udt40.dll，版权归IBM所有，但由“Adobe Systems”进行数字签名

因此，我认为最好的做法是对构成您的应用程序的所有二进制文件进行签名，包括第三方的。这是有道理的，因为它可以帮助您避免或至少轻松检测到发生在客户机器上的篡改。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T14:56:18.963

您是在谈论强命名还是关于身份验证签名？后者的问题是，当加载验证码签名的程序集时，.NET 会验证证书，并且在某些配置中（例如，当需要检查 OCSP 并且无法访问时）这可能需要几十秒。因此，我们不得不停止使用验证码和 X.509 证书对我们的程序集进行签名。

另一个缺点是，如果已签名的程序集被恶意软件以某种方式使用，反病毒公司中一些不称职的想成为专家的人可以 (a) 将程序集标记为恶意软件，并且 (b) 更糟糕的是，向证书颁发机构投诉颁发您的代码签名证书，该证书将被吊销。

.NET 强命名（使用没有证书的密钥对）或多或少是您的私人业务。

更新：Authenticode 通常应用于 PE 格式文件（EXE 和 DLL）、SYS 和 CAB。强命名是纯 .NET 技术。

警告消息涉及 Authenticode 签名。对安装程序进行签名是必要的（这是肯定的），并且足以消除该消息，除非系统策略设置为仅允许运行签名的应用程序（在这种情况下，您的应用程序的 EXE 也必须签名）。

# c# - 为什么我的 for 循环在尝试填充数据表时不起作用

> ID：13123804
> 
> 赞同：-1
> 
> 时间：2012-10-29T14:40:24.760
> 
> 标签：c#

我有填写我`DataColumn`的 s 的代码。但是我创建的 for 循环不起作用。第一个`DataTable`是用 SQL 查询填充的。第二个`DataTable`需要部分填充来自第一个的数据`DataTable`。所以我`DataTable`用for循环手动构建了第二个来填充它，但它不起作用？

```
using System;
using System.IO;
using System.Text;
using System.Data;
using System.Data.Common;
using System.Data.SqlClient;
using System.Configuration;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Xml.Linq;
using System.ComponentModel;

public partial class _Planning : System.Web.UI.Page
{
ConnectionStringSettings Leerstoftabel;
SqlConnection connection;
int cursusID = 2;
DataTable LeerstofTabel;
DataTable Planning;

protected void Page_Load(object sender, EventArgs e)
{
Leerstoftabel = ConfigurationManager.ConnectionStrings["CursusPlanner"];
connection = new SqlConnection(Leerstoftabel.ConnectionString);

SqlCommand cmd = connection.CreateCommand();
cmd.CommandType = CommandType.Text;
cmd.CommandText = "SELECT cursus.naam AS [Cursus Naam], vak.vaknaam, cursusvak.volgnummer, les.dagnummer, les.hoofdstuknummer, les.naam AS [Les Naam], les.lesomschrijving FROM cursus INNER JOIN cursusvak ON cursus.cursusID = cursusvak.cursusID INNER JOIN vak ON cursusvak.vakID = vak.vakID INNER JOIN les ON vak.vakID = les.vakID WHERE(cursus.cursusID = @cursusID)ORDER BY cursusvak.volgnummer";

//int cursusID = Convert.ToInt32(DropDownList1.SelectedValue);
cmd.Parameters.Add("@cursusID", SqlDbType.Int, 0).Value = cursusID;

connection.Open();

//het creeëren van een datatabel
DbDataReader rdr = cmd.ExecuteReader();
LeerstofTabel = new DataTable();
LeerstofTabel.Load(rdr);

connection.Close();
}

protected void Calendar1_DayRender(object sender, DayRenderEventArgs e)
{
// weekend days can't be selected in calendar
if (e.Day.IsWeekend)
    e.Day.IsSelectable = false;
}

protected void Button1_Click(object sender, EventArgs e)
{
//create the DataTable named "Planning"
Planning = new DataTable ("Planning");

//Add the DataColumn using defaults
DataColumn datum = new DataColumn("Datum");
datum.DataType = typeof(DateTime);
datum.AllowDBNull = false;
datum.Caption = "Datum";
Planning.Columns.Add(datum);

//Add the DataColumn using defaults
DataColumn hoofdstuk = new DataColumn("Hoofdstuk");
hoofdstuk.AllowDBNull = false;
hoofdstuk.Caption = "Hoofdstuk";
Planning.Columns.Add(hoofdstuk);

//Add the DataColumn using defaults
DataColumn omschrijving = new DataColumn("Omschrijving");
omschrijving.AllowDBNull = false;
hoofdstuk.Caption = "Omschrijving";
Planning.Columns.Add(omschrijving);

//Add the DataColumn using defaults
DataColumn lessen = new DataColumn("Lessen");
lessen.AllowDBNull = false;
lessen.Caption = "Lessen";
Planning.Columns.Add(lessen);

for (int i = 0; i < LeerstofTabel.Rows.Count; i++)
{
    if (LeerstofTabel ["vaknaam"]).ToString() != vorigvak  // this statement doesn't work
    {
        DataRow newplannning = Planning.NewRow();
        newplannning["Datum"] = "";
        newplannning["Hoofdstuk"] = "*" + LeerstofTabel["vaknaam"];
        newplannning["Omschrijving"] = "";
        newplannning["Lessen"] = "";
        Planning.Rows.Add(newplannning);

    }

    Vorigvak = (LeerstofTabel["vaknaam"])ToString();
}

GridView1.DataSource = Planning;
GridView1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:48:55.470

首先抱歉，如果这是错误的。由于语言的原因，很难理解您的代码。

```
 if (LeerstofTabel ["vaknaam"]).ToString() != vorigvak 
```

应该

```
 if (LeerstofTabel.Rows[i]["vaknaam"]).ToString() != vorigvak 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:47:59.753

如果 vaknaam 是您的列名，则需要连续使用它

```
var r = LeerstofTabel.Rows[i]
if (r["vaknaam"]).ToString() != vorigvak) { // ... 
```

# silverlight-4.0 - MVVMLight：如何断开事件处理程序

> ID：13123808
> 
> 赞同：1
> 
> 时间：2012-10-29T14:40:32.597
> 
> 标签：silverlight-4.0, mvvm-light, eventtocommand

我使用 MVVMLight EventToCommand 将命令连接到 MouseEnter 事件：

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="MouseEnter">
        <GalaSoft_MvvmLight_Command:EventToCommand Command="{Binding DragHandleMouseEnterCommand}"  />
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

如何以编程方式解开处理程序？
viewObject.MouseEnter -= viewObject.GetViewModel().DragHandleMouseEtnerCommand 给出类型不匹配错误。

更新：看起来我需要以某种方式使用 viewObject.Triggers 集合。建议...？
更新二：不，触发器集合中没有任何内容......

感谢您的任何见解...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T16:27:43.013

为什么不在视图模型中简单地将 DragHandleMouseEnterCommand 设置为 null？

触发器会保留，但不会触发任何东西。如果您想重新激活命令，您只需要“新建”一个新命令并将其绑定到属性并调用 RaisePropertyChanged("DragHandleMouseEnterCommand")。

# c# - C# 中的文本文件打印格式？

> ID：13123810
> 
> 赞同：0
> 
> 时间：2012-10-29T14:40:37.890
> 
> 标签：c#, printing, format, text-files

我在 CSharp 上制作的应用程序中有一个打印功能。但是我不喜欢文档的格式化方式，并且很难将文本专门格式化为打印机或类似的方式。

这是我格式化它的方式。我希望有一种更动态和更有效的方式来做到这一点，以便它可以兼容所有使用它的计算机或笔记本电脑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:51:54.203

您是否正在寻找已经格式化空格的东西..例如，如果我想 WriteLine(" ***** *** HELLO ***** *** ); 我会做这样的事情

```
string s = new string( '*', 8 )
WriteLine(s+ HELLO + s) 
```

所以在你的情况下，你可以按照这个例子计算出你想要的空格数，如果你需要创建一些新的字符串变量来保存不同数量的空格，而且阅读时会更干净。这是一个简单的例子

```
string strSpaces = new string(' ', 20) for example.. 
```

只玩你需要的东西

# java - 从数组中填充 JTable

> ID：13123811
> 
> 赞同：1
> 
> 时间：2012-10-29T14:40:42.407
> 
> 标签：java, swing, jtable

环顾四周，但找不到任何解释如何做这样的事情的东西：

```
Object rowData[] = { "Row1-Column1", "Row1-Column2", "Row1-Column3" };

Object columnNames[] = { "Column One", "Column Two", "Column Three" }; 
```

我已经用编辑器做了一个表格，名字：“jTable1”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T14:45:06.080

这样的事情会帮助你：

```
DefaultTableModel model = new DefaultTableModel(columnNames, 0);
model.addRow(rowData);
jTable1.setModel(model); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T14:45:50.693

您需要一个二维数组来存储行数据。尝试这个：

```
Object rowData[][] = {{ "Row1-Column1", "Row1-Column2", "Row1-Column3" }};
Object columnNames[] = { "Column One", "Column Two", "Column Three" };
JTable table = new JTable(rowData, columnNames); 
```

# objective-c - 转换为 Storyboard，rootviewcontroller 问题

> ID：13123812
> 
> 赞同：0
> 
> 时间：2012-10-29T14:40:49.160
> 
> 标签：objective-c

这是我得到的错误：“应用程序窗口应该在应用程序启动结束时有一个根视图控制器”

根据我的阅读，我需要使用 rootviewcontroller 将委托传递给视图控制器，但显然我做错了。

我在我的项目中添加了一个新的故事板，并在夏季将其更改为 main。这是我的 Appdelegate.m：

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = _window;

- (void)dealloc
{
    [_window release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.window.backgroundColor = [UIColor whiteColor];

    menu.delegate = self;
    [self.window addSubview:menu];
    [menu release];

    [self.window makeKeyAndVisible];
    return YES;
}
@end 
```

# jquery - 如何删除以前的类并在 jquery 中添加新类？

> ID：13123814
> 
> 赞同：4
> 
> 时间：2012-10-29T14:40:57.220
> 
> 标签：jquery, asp.net, jquery-ui

我将我的主键存储为类名

每次调用这个函数时，我都会有新的主键键，

```
 function OnBtnShowPopupClick(elementID) {
                ASPxClientPopupControl1.ShowAtElementByID(elementID);
                $("#hiddenTag").addClass(elementID);
            } 
```

我想要的是删除以前的类名并添加新的类名

如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T14:42:27.870

Have you looked at [removeClass](http://api.jquery.com/removeClass/)

i.e

```
$("#hiddenTag").removeClass('someclass').addClass(elementID); 
```

And if you don't know the class name:

```
$("#hiddenTag").removeAttr('class').addClass(elementID); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T14:42:05.143

```
var tag = $("#hiddenTag");

tag.removeClass('oldclassname');
tag.addClass('newclassname'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T14:42:35.373

You can use removeAttr if you do not know the name of class,

```
 function OnBtnShowPopupClick(elementID) {
            ASPxClientPopupControl1.ShowAtElementByID(elementID);
            $("#hiddenTag").removeAttr('class');
            $("#hiddenTag").addClass(elementID);
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T14:48:02.517

可以使用`data()`方法将类存储在元素中，以便在下次更新标签时将其删除。这用于元素可能有多个类并且您只希望删除一个的情况。的使用`removeAttr('class')`会带走应用于元素的所有类

```
function OnBtnShowPopupClick(elementID) {
    ASPxClientPopupControl1.ShowAtElementByID(elementID);
    var $tag = $("#hiddenTag"), currClass = $tag.data('currClass');
        if (currClass) {
            $tag.removeClass(currClass);
        }

        $tag.addClass(elementID).data('currClass', elementID) ;

}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T14:42:57.447

您可以通过以下方式一举“删除”和“添加”一个类：

```
var tag = $("#hiddenTag");
tag.removeClass('oldclassname').addClass(elementID); 
```

# java - 在 Java 中存储也可以读写的资源

> ID：13123817
> 
> 赞同：2
> 
> 时间：2012-10-29T14:41:02.030
> 
> 标签：java

我在决定如何处理资源文件时遇到问题。我们在 4 个独立的项目中拥有带有编辑器的游戏基础：

*   游戏通用
*   游戏逻辑
*   GL游戏
*   编辑

GameCommon 是编辑器使用的唯一项目。现在资源（图像和 xml 文件）作为资源位于该项目中。

问题是编辑器应该创建游戏使用的 xml 文件，所以我们需要一个可以写入和读取的公共位置。

我们应该在这里采取什么方法？我很难创建一个单独的 jar 文件来仅存储可以由两个程序编写的资源，但我只发现对此有负面看法。或者也许使用 jar 文件附近的公共文件夹。但是，如果我不使用家庭，它会在每个操作系统上正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:52:27.663

由于您正在使用资源平面文件进行操作，包括读取和写入，我假设所有项目都需要写入和读取资源文件？

我将创建一个具有读取和写入这些平面文件的专有权利的单例，以消除写入争用或读取脏数据。这样，所有四个项目都有访问资源文件的明确方式。

本质上，对资源文件的读写需要简单且非常基础。如果有比这更大的要求，也许这些信息应该保存在 DBMS 中。

至于我希望这些文件包含在项目中还是外部化，这是可维护性的问题。我是否需要在部署期间将它们外部化和单独管理？或者这些文件是否被放置在每个登录用户的主目录中？如果他们需要重新部署，我会将他们放在项目之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:46:04.297

Java 提供

```
File.separator; 
```

这将帮助您创建一个相对于您的 jar 的文件夹并相对访问它，而不必担心当前操作系统的路径分隔符是什么。

这种文件夹方法可能是最容易实现的，因为可以轻松处理读取和写入操作。

# linux - mongodb EBS on EC2

> ID：13123818
> 
> 赞同：4
> 
> 时间：2012-10-29T14:41:03.180
> 
> 标签：linux, node.js, mongodb, amazon-ec2

I use mongodb and nodejs on ec2,I would like to deploy it in order to support 10,000 request a day. I would like to make sure that if the instance terminates or reboots(?) somehow the database won't be lost. I understand that i need to create an EBS volumes for storing the data.

I tried [http://www.mongodb.org/display/DOCS/Amazon+EC2+Quickstart#AmazonEC2Quickstart-ConfigureStorage](http://www.mongodb.org/display/DOCS/Amazon+EC2+Quickstart#AmazonEC2Quickstart-ConfigureStorage) but it didn't work. I get to the point where i should run [ec2-user@domU-... ~]$ sudo chown mongod:mongod /data but I get : chown: invalid user: `mongod:mongod'

solved it by : sudo chown mongod.mongod /data still can't run mongod working :

```
$sudo /etc/init.d/mongod start
Starting mongod: forked process: 1694
all output going to: /log/mongod.log
                                                           [FAILED][ec2-user@domU-... /]$ sudo mongod --dbpath=/data
Mon Oct 29 21:46:56 [initandlisten] MongoDB starting : pid=1675 port=27017 dbpath=/data 64-bit host=domU-...
Mon Oct 29 21:46:56 [initandlisten] db version v2.2.0, pdfile version 4.5
Mon Oct 29 21:46:56 [initandlisten] git version: f5e83eae9cfbec7fb7a071321928f00d1b0c5207
Mon Oct 29 21:46:56 [initandlisten] build info: Linux ... c8xen #1 SMP Fri Nov 20 17:48:28 EST 2009 x86_64 BOOST_LIB_VERSION=1_49
Mon Oct 29 21:46:56 [initandlisten] options: { dbpath: "/data" }
Mon Oct 29 21:47:00 [initandlisten] journal dir=/data/journal
Mon Oct 29 21:47:00 [initandlisten] recover : no journal files present, no recovery needed
Mon Oct 29 21:47:00 [initandlisten] 
Mon Oct 29 21:47:00 [initandlisten] ERROR: Insufficient free space for journal files
Mon Oct 29 21:47:00 [initandlisten] Please make at least 3379MB available in /data/journal or use --smallfiles
Mon Oct 29 21:47:00 [initandlisten] 
Mon Oct 29 21:47:00 [initandlisten] exception in initAndListen: 15926 Insufficient free space for journals, terminating
Mon Oct 29 21:47:00 dbexit: 
Mon Oct 29 21:47:00 [initandlisten] shutdown: going to close listening sockets...
Mon Oct 29 21:47:00 [initandlisten] shutdown: going to flush diaglog...
Mon Oct 29 21:47:00 [initandlisten] shutdown: going to close sockets...
Mon Oct 29 21:47:00 [initandlisten] shutdown: waiting for fs preallocator...
Mon Oct 29 21:47:00 [initandlisten] shutdown: lock for final commit...
Mon Oct 29 21:47:00 [initandlisten] shutdown: final commit...
Mon Oct 29 21:47:00 [initandlisten] shutdown: closing all files...
Mon Oct 29 21:47:00 [initandlisten] closeAllFiles() finished
Mon Oct 29 21:47:00 [initandlisten] journalCleanup...
Mon Oct 29 21:47:00 [initandlisten] removeJournalFiles
Mon Oct 29 21:47:00 [initandlisten] shutdown: removing fs lock...
Mon Oct 29 21:47:00 dbexit: really exiting now 
```

I DON'T UNDERSTAND A WORD IN THE GUIDE... is it only me...? Is there a more simple to understand guide for achieving this goal? Thank you!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T10:50:12.520

我遇到的问题描述在： [http ://doubleclix.wordpress.com/2012/05/04/notes-on-mongo-at-aws/](http://doubleclix.wordpress.com/2012/05/04/notes-on-mongo-at-aws/)

最后我按照指南： [http ://d36cz9buwru1tt.cloudfront.net/AWS_NoSQL_MongoDB.pdf](http://d36cz9buwru1tt.cloudfront.net/AWS_NoSQL_MongoDB.pdf)

mongo 正在运行！除了根卷 ebs 之外，我只创建了一个 EBS (20 GiB) 并将其挂载到 /data/db

我希望我的部署能够与 nodejs 和每天 10,000 个客户端请求一起正常工作。（如果我错了，或者如果有人对我描述的部署有任何建议，我将不胜感激）

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T14:50:04.047

步骤

> sudo yum -y 安装 mongo-10gen-server

应该已经创建了一个用户来运行 mongodb。但是，10Gen 的文档对于该用户是被称为*mongod*还是*mongo*存在冲突。

请尝试以下操作：

> sudo chown mongo:mongo /数据

该步骤将*/data*目录的所有权更改为用户*mongo*和组*mongo*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T16:20:50.353

[使用像Scalegrid.io](https://scalegrid.io)这样的 mongodb 管理解决方案可能更容易，它在您的 EC2 帐户中创建 mongodb 实例。让实例运行实际上是工作中更容易的部分。你需要考虑

1.  备份
2.  恢复
3.  监控
4.  高可用性，以防您的区域出现故障。

# xslt - Maven TestNG XSLT plugin issue - Plugin Not found error

> ID：13123829
> 
> 赞同：1
> 
> 时间：2012-10-29T14:41:41.917
> 
> 标签：xslt, selenium, maven-2, testng

I am trying to generate TestNG XSLT report using the Maven setup for selenium Tests.

[http://code.google.com/p/testng-xslt/](http://code.google.com/p/testng-xslt/)

I have configured the pom file with Maven plugin specified as above, but I am always getting plugin not found error. I am getting default TestNT report and not the XSLT report with chart.

Pom.xml used for the Test

```
<modelVersion>4.0.0</modelVersion>
<groupId>uk.co.newsint.acs.admin.test</groupId>
<artifactId>ACS</artifactId>
<packaging>jar</packaging>
<version>1.0</version>

<dependencies>

    <dependency>
        <groupId>org.testng</groupId>
        <artifactId>testng</artifactId>
        <version>6.1.1</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.seleniumhq.selenium</groupId>
        <artifactId>selenium-java</artifactId>
        <version>2.25.0</version>
    </dependency>
</dependencies>

<pluginRepositories>
    <pluginRepository>
        <id>testng-xslt-plugin</id>
        <url>http://www.cosminaru.ro/maven/</url>
    </pluginRepository>
</pluginRepositories>

<build>
    <plugins>
        <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.4</version>
           <configuration>
                 <testFailureIgnore>true</testFailureIgnore>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.5</source>
                <target>1.5</target>
            </configuration>
        </plugin>
    </plugins>
</build>

<reporting>
    <plugins>
        <plugin>
            <groupId>org.testng.xslt</groupId>
            <artifactId>testng-xslt-plugin</artifactId>
            <version>1.1</version>
            <configuration>
                <showRuntimeTotals>true</showRuntimeTotals>
                <sortTestCaseLinks>true</sortTestCaseLinks>
                <testDetailsFilter>FAIL,PASS,SKIP,CONF</testDetailsFilter>
            </configuration>
        </plugin>
    </plugins>
</reporting> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T17:58:51.730

首先，您为什么要使用这么旧的[maven-surefire-plugin](http://maven.apache.org/plugins/maven-surefire-plugin/)版本？当前版本是 2.12.4...此外，您不应该[在 pom 中定义存储库，](http://www.sonatype.com/people/2009/02/why-putting-repositories-in-your-poms-is-a-bad-idea/)最好使用存储库管理器。根据[文档](http://code.google.com/p/testng-xslt/wiki/MavenPlugin)，您对存储库的定义是错误的。它应该是：

```
<pluginRepositories>
   <pluginRepository>
       <id>testng-xslt-plugin</id>
       <url>http://uhftopic.com/maven/</url>
   </pluginRepository>
</pluginRepositories> 
```

BTW：你怎么称呼maven？mvn 网站获取新报告？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-27T09:41:37.647

对不起，khmarbaise 的帖子不是答案。我没有足够的声望点来添加评论，但我想提醒一下，使用[http://uhftopic.com/maven/](http://uhftopic.com/maven/)是不正确的，因为它显示为离线。请看这篇文章 [Unable to generate XSLT in maven project](https://stackoverflow.com/questions/18916367/unable-to-generate-xslt-in-maven-project/18960344?noredirect=1#comment28148403_18960344)

# css - 使用 css 和背景图像创建箭头

> ID：13123830
> 
> 赞同：0
> 
> 时间：2012-10-29T14:41:51.963
> 
> 标签：css, html, background-image

![即图像](../Images/415dcf4959598553ba766982036fa346.png): IE
![火狐图片](../Images/07d606436b1443f620f7aa7db8caf125.png): 火狐

我正在尝试创建一个可能会水平改变大小的箭头。它应该使用代表以下内容的 3 个图像：< --- >

我正在尝试使用 div 和 css 来做到这一点，但它在 IE 中不起作用。身体图像没有居中，看起来像是一个下划线。但这不会发生在 Firefox 或 chrome 中，身体居中，并与左右图像的尖端对齐。< ____ >：IE（错误）< ----- >：Firefox（正确）

我有以下内容：

```
.bodyArrow {
    width: 38px;
    background: url("../../images/ArrowBody.png") repeat-x center;
    height: 5px;
}
.arrowLeft {

    height: 5px;
    padding-left: 38px;
    background: url("../../images/ArrowLeft.png") no-repeat 0 0;
}
.arrowRight {
    height: 5px;
    font-style: normal;
    padding-right: 3px;
    background: url("../../images/ArrowRight.png") no-repeat 100% 0;
}

<table>
<tr>
<td> something </td>
<td>
    <DIV  class="bodyArrow">
    <DIV  class="ArrowLeft">
    <DIV  class="ArrowRight">
    </DIV></DIV></DIV>

</td>
<td> something </td>
</tr> 
</table> 
```

关于如何制作它的任何建议？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:43:39.823

您可以使用[`background-size`](https://developer.mozilla.org/en-US/docs/CSS/background-size)属性来拉伸背景图像

```
background-size:width height; 
```

对于定位背景图像，您可以使用[`Background-position`](https://developer.mozilla.org/en-US/docs/CSS/background-position)属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:53:58.673

您应该使用 :after 和 :before 以避免不必要的标记。它适用于 IE8，但您的文档必须具有 doctype。

```
.arrow {
    position: relative;
    width: 38px;
    background: url("../../images/ArrowBody.png") repeat-x center;
    height: 5px;
}

.arrow:before {
    content: "";
    position: absolute;
    height: 5px;
    width: 5px;
    left: *what you need*;
    background: url("../../images/ArrowLeft.png") no-repeat 0 0;
}

.arrow:after {
    content: "";
    position: absolute;
    height: 5px;
    width: 5px;
    right: *what you need*;
    background: url("../../images/ArrowRight.png") no-repeat 0 0;
} 
```

然后在html中你只需要：

```
<div class="arrow"></div> 
```

根据您的需要调整值。更多信息在这里：[http ://www.w3schools.com/cssref/sel_after.asp](http://www.w3schools.com/cssref/sel_after.asp)

这适用于 IE8 及更高版本。（和其他浏览器）

编辑：忘记了可能对您的情况最重要的事情：使用 top 属性来调整箭头的对齐方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:43:58.860

这可能会奏效。您的 div 不正确。

```
<div class="bodyArrow"></div>
<div class="ArrowLeft"></div>
<div class="ArrowRight"></div> 
```

然后你必须添加 float:left; 我猜你的div。

```
.bodyArrow {
width: 38px;
background: url("../../images/ArrowBody.png") repeat-x center;
height: 5px;
float:left;
}
.arrowLeft {

height: 5px;
padding-left: 38px;
background: url("../../images/ArrowLeft.png") no-repeat 0 0;
float:left;
}
.arrowRight {
height: 5px;
font-style: normal;
padding-right: 3px;
background: url("../../images/ArrowRight.png") no-repeat 100% 0;
float:left;
} 
```

# jquery - Hover on one element, make another element slide down

> ID：13123831
> 
> 赞同：0
> 
> 时间：2012-10-29T14:41:55.067
> 
> 标签：jquery, menu, hover, slidedown, slideup

I have a top-level navigation that is being made using a Wordpress built-in function. I then have another function that is taking one of the top level navigation's page id to create a list of it's children pages. I want this div to slide down on hover of the corresponding top menu item.

```
<header>
...
   <nav class="clear screen">
      <?php wp_nav_menu( array( 'theme_location' => 'primary', 'depth' => 1,) ); ?>
   </nav>
</header>

<div id="dropdown-contain">
        <ul class="solutions-dropdown">
            <li><a href="/solutions/">By Industry</a></li>
            <li><a href="/solutions/by-module/">By Module</a></li>
        </ul>
        <?php 
            // use wp_list_pages to display parent and all child pages all generations (a tree with parent)
            $parent = 85;
            $args=array(
              'child_of' => $parent
            );
            $pages = get_pages($args);
            if ($pages) {
            $pageids = array();
            foreach ($pages as $page) {
                 $pageids[]= $page->ID;
            }

            $args=array(
              //'title_li' => 'Tree of Parent Page ' . $parent,
              'include' => implode(",", $pageids)
            );
            wp_list_pages($args);
            }
        ?>
</div> 
```

#dropdown-contain is being hidden in my style sheet. Since the wp_nav_menu is creating my top-level list, I cannot make my sub-list a nested list, which is why I just made it as a separate div.

Here is the jquery I have at the moment:

```
$(document).ready(function() {

    $("li.page-item-6").mouseenter(function(){
        $('#dropdown-contain').slideDown().clearQueue();
        $("#dropdown-contain").mouseover(function(){
            $('#dropdown-contain').stop().css('display', 'block');
        });
    });

    $("#dropdown-contain").mouseout(function(){
        $('#dropdown-contain').clearQueue().slideUp();
    });

}); 
```

The problem here is that the sub-nav will stay open if you don't hover onto it before exiting. If I just hover over the top level element and don't hover over the sub menu, the sub menu will stay open until I hover on and off of it. So, I tried to include this:

```
$("li.page-item-6").mouseout(function(){
        $('#dropdown-contain').clearQueue().slideUp();
}); 
```

When I include this, the sub menu behaves a little strangely. If I hover over the top list item and off too quickly before the menu has finished sliding down, on the next hover it will only slide to that same point. So after a few hasty hovers, the menu stops sliding completely until I refresh the page.

So in summary, I want to hover over one list item, triggering the slide down of a completely separate div. On mouse out of either the list item or the div, the menu will slide back up without any awkward jumping. If anyone could help me out or find me a link that may be helpful I'd really appreciate it!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:51:43.800

试试这个代码：

```
$(document).ready(function() {
    $("li.page-item-6").mouseenter(function(){
        $('#dropdown-contain').stop(true).slideDown();
    });

    $("#dropdown-contain, li.page-item-6").mouseleave(function(){
        $('#dropdown-contain').stop(true).slideUp();
    });
}); 
```

> .stop() - 停止匹配元素上当前正在运行的动画。[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

# jquery - reorder the rows classes after deleting an item from the list

> ID：13123832
> 
> 赞同：1
> 
> 时间：2012-10-29T14:41:56.077
> 
> 标签：jquery

I want to delete an entry from a user list and the rows classes should be rearrange, so that no two consecutive rows have the same class. How can I reorder the rows classes after deleting an item from the list? For example: If I delete the item 'five', the elements 'four' and 'six' have the same rows classes.

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
<script type="text/javascript" src="jquery-1.8.2.min.js" charset="utf-8"></script>
<style type="text/css">

ul#users { list-style:none; margin:0 auto; width:50%; }
ul#users li { padding:3px; cursor:pointer; }

ul#users li a.delete { float:right; }
ul#users li.col0 { background:#ffffff; }
ul#users li.col1 { background:#fbfbfb; }
ul#users li.col2 { background:#fdffce; }

</style>
<script type="text/javascript">

$(document).ready(function(){

    // hover class
    var clshover = "col2";

    // confirm message
    var msgconfirm = "You really want to delete this entry?";

    // Hover effect
    $('ul#users > [class^=col]').hover(
        function () {
            $(this).addClass(clshover);
        },
        function () {
            $(this).removeClass(clshover);
        }
    );

    // Delete a defined entry
    $('ul#users > li > a.delete').click(function (){
        if (confirm(msgconfirm)) {
            $(this).parents('li').remove();
        }
    });

});

</script>
</head>

<body>

<ul id="users">
    <li id="users0" class="col0">one<a href="javascript:;" class="delete" title="Delete">&nbsp;x&nbsp;</a></li>
    <li id="users1" class="col1">two<a href="javascript:;" class="delete" title="Delete">&nbsp;x&nbsp;</a></li>
    <li id="users2" class="col0">three<a href="javascript:;" class="delete" title="Delete">&nbsp;x&nbsp;</a></li>
    <li id="users3" class="col1">four<a href="javascript:;" class="delete" title="Delete">&nbsp;x&nbsp;</a></li>
    <li id="users4" class="col0">five<a href="javascript:;" class="delete" title="Delete">&nbsp;x&nbsp;</a></li>
    <li id="users5" class="col1">six<a href="javascript:;" class="delete" title="Delete">&nbsp;x&nbsp;</a></li>
    <li id="users6" class="col0">seven<a href="javascript:;" class="delete" title="Delete">&nbsp;x&nbsp;</a></li>
    <li id="users7" class="col1">eight<a href="javascript:;" class="delete" title="Delete">&nbsp;x&nbsp;</a></li>
    <li id="users8" class="col0">nine<a href="javascript:;" class="delete" title="Delete">&nbsp;x&nbsp;</a></li>
    <li id="users9" class="col1">ten<a href="javascript:;" class="delete" title="Delete">&nbsp;x&nbsp;</a></li>
</ul>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:55:05.617

尝试将您的 JS 更改为以下内容：

```
<script type="text/javascript">

$(document).ready(function(){

    function reassign()
    {
    var i =0;
    $.each($('ul#users > li'), function() {
            $(this).attr('class', 'col' + (i % 2));
            i++;
    });
    }

    // hover class
    var clshover = "col2";

    // confirm message
    var msgconfirm = "You really want to delete this entry?";

    // Hover effect
    $('ul#users > [class^=col]').hover(
        function () {
            $(this).addClass(clshover);
        },
        function () {
            $(this).removeClass(clshover);
        }
    );

    // Delete a defined entry
    $('ul#users > li > a.delete').click(function (){
        if (confirm(msgconfirm)) {
            $(this).parents('li').remove();
            reassign();
        }
    });

});

</script> 
```

# session - ember.js - 如何处理会话

> ID：13123839
> 
> 赞同：1
> 
> 时间：2012-10-29T14:42:21.997
> 
> 标签：session, ember.js

我已经看到了一些关于使用[路由器方法](http://jsfiddle.net/brundage/dYEJe/)在 ember 中实现会话的示例，还有一些关于简单地使用[StateManager](http://docs.emberjs.com/symbols/Ember.StateManager.html)的陈述。鉴于我有一个 Restful 后端，我必须每次都将我的凭据发送到我的服务。为此，我只想将凭据存储在前端的会话中。我应该将凭据存储在“登录”状态`StateManager`还是使用其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:53:43.797

你应该隔离你的需求，因为在我看来你试图在这里解决两个方面：

*   身份验证，将凭据传递到您的后端，
*   经过身份验证的状态和属性。

*顺便说一句，即使您只是想管理第一点，以下内容仍然适用...* :-)

Ember 非常擅长使用路由器和 al 管理应用程序的状态。但是在谈到身份验证时，它*必须*与后端打交道，并且几乎与您的 SPA 状态无关。这是一种横向问题，根本不由您的 Ember 路由器实例管理，IMO（我并不孤单：请参阅[此推文和回复](https://twitter.com/trek/status/250592682198581250)）。您应该在 Ember 应用程序之外管理身份验证，甚至*在*提供 SPA 之前，使用类似`Devise`, `Sorcery`, ...

话虽如此，一旦您在浏览器和后端之间建立了会话，您将能够在页面内静态包含来自您登录用户的一些数据，您的应用程序可以访问这些数据以供使用（用户名、个人资料数据、 ...）。

如果您仍然*想*在路由器中管理登录（输入/输出）状态，您也可以查看[这个答案](https://stackoverflow.com/a/11192467/90741)，但正如我之前解释的那样，我最终改变了对这个主题的看法。

# java - Simple proxy in Java

> ID：13123842
> 
> 赞同：0
> 
> 时间：2012-10-29T14:42:30.250
> 
> 标签：java, proxy

I want to build a simple proxy (127.0.0.3:1234) to transfer my database connections from my app to specific database servers (127.0.0.1:1234 and 127.0.0.2:1234). Is that possible in Java? I'm worry about the persistence connections between dbs and application...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:45:02.987

如果要一个代理来平衡两个 TCP 连接之间的负载，那就比较简单了。我建议您尝试一下，并在遇到问题时发布问题。

> 我担心数据库和应用程序之间的持久连接......

你不必担心。

# c - Merge two arrays of pointers into a third array of pointers in C

> ID：13123844
> 
> 赞同：0
> 
> 时间：2012-10-29T14:42:36.460
> 
> 标签：c, pointers

I'm writing a program in C and I can't find out how to do the following. I have two NULL terminated arrays of pointers to strings, namely

```
char *tokens1[size1]
char *tokens2[size2] 
```

I want to merge them into a third array of pointers to strings, namely

```
char **tokens; 
```

I've tried the following but it doesn't work:

```
char *tokens1[size1]
char *tokens2[size2]
char **tokens;

/* code to fill the *tokens1[] and *tokens2[] arrays with string values */

tokens = (char*) malloc(size1+size2+1);
strcpy(tokens, tokens1);
strcat(tokens, tokens2); 
```

Could you please help me?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T14:48:12.210

您正在复制指针值，而不是字符串，因此您需要使用`memcpy`而不是`strcpy`/ `strcat`：

```
int i, j;
/* Find the current size of tokens1 and tokens 2 */
for (i=0; tokens1[i] != NULL; i++) 
   ;
for (j=0; tokens2[j] != NULL; j++) 
   ;
/* Allocate enough memory to hold the result */
tokens = calloc(i + j + 1, sizeof(char*));
/* Copy the arrays */
memcpy(tokens, tokens1, i * sizeof(char*));
memcpy(tokens + i, tokens2, j * sizeof(char*));
/* Since we used calloc, the new array is initialized with NULL:s. Otherwise we would have to NULL-terminate it like so: */
tokens[i+j] = NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:46:25.597

使用

```
char *tokens[size1+size2] 
```

和

```
tokens = (char*) malloc(size1+size2+1); 
```

是不正确的。. 如果您使用第一个，那么您已经定义了具有静态分配`(size1+size2)`字符串指针的指针数组。所以你不能用 malloc 动态重新分配。

如果要使用 malloc 动态分配字符串指针数组，则必须这样定义`tokens`：

```
char **tokens 
```

双指针。这意味着指向包含指向字符串的指针的数组的指针

对于您的分配，您可以这样做：

```
tokens = (char**) malloc((size1+size2+1)*sizeof(char *)); 
```

为了：

```
strcpy(tokens, tokens1); 
```

您想将指针数组复制到另一个指针数组。但是您已经使用函数将 char 数组复制到 char 数组。而且char类型和指针类型不一样。char 的大小为 1 字节，指针的大小为 4bytes/8bytes（取决于您使用的系统）

同样的`strcat`

`memcpy`无法帮助您，因为您想复制数组`tokens1`直到找到`NULL`地址而不是复制整个数组

如果您只想复制字符串的指针（地址）：在您如何操作之后

```
//to copy tokens1 (terminated with NULL address)
for (i=0;tokens1[i]!=NULL;i++)
{
   tokens[i]=tokens1[i];
}
//to concat tokens2 (terminated with NULL address)
for (j=0;tokens2[j]!=NULL;j++)
{
   tokens[i+j]=tokens2[j];
}
tokens[i+j]=NULL; 
```

如果你想复制 and 的字符串，`tokens1`你`tokens2`可以`tokens`使用`strdup()`function: here after you can do it

```
for (i=0;tokens1[i]!=NULL;i++)
{
   tokens[i]=strdup(tokens1[i]);
}
for (j=0;tokens2[j]!=NULL;j++)
{
   tokens[i+j]=strdup(tokens2[j]);
}
tokens[i+j]=NULL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T14:49:04.250

我只是假设`memory`每个人都分配得很好`pointers`

```
 int i;
    for (i=0 ; i< size1 ;i++)
    {
     strcpy (tokens[i],tokens1[i]);
    }
    int j=i;
    for(i=0;i<size2;i++,j++)
    {
     strcpy(tokens[j],tokens2[i]);
    }
    tokens[j]='\0'; 
```

# javascript - 如何用空格附加长的html文件？

> ID：13123847
> 
> 赞同：0
> 
> 时间：2012-10-29T14:42:41.920
> 
> 标签：javascript, jquery

如果这个html代码长达300行。您必须编写没有空格的代码。但是任何代码编辑器都会在标签之间留出空间。我必须删除所有空间。有什么解决办法吗？

```
$("body").append($("<div id='dzndiv'><div style='position:absolute;left:0px;top:0px;width:100%;height:800px;'>
                <img src='img/transparent.png' width='100%' height='100%'/></div></div>")); 
```

这不是真的，但像这样或相等的解决方案示例？：

```
$("body").append($.load("longstuff.html")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:48:26.293

实际上非常接近；）尝试

```
$("body").load("longstuff.html"); 
```

或者更好地在某处创建一个 div 并执行

```
$("#yourDivId").load("longstuff.html"); 
```

或看看

[http://api.jquery.com/load/](http://api.jquery.com/load/)

# javascript - 处理哈希 url 更改的更有吸引力的方式？

> ID：13123852
> 
> 赞同：0
> 
> 时间：2012-10-29T14:42:58.073
> 
> 标签：javascript, jquery

在我正在开发的当前网站上，我只是将#whatever 附加到我的网址，所以 www.example.com/product#doughdough 或 www.example.com/product#sweet

不要误会我的意思，使用后退按钮时它工作正常并且功能很好，但我很好奇是否还有其他“创造性”的呈现方式？也许像 www.example.com/products/#/doughdough 或 www.example.com/#/products/doughdough 之类的？添加的斜线会改变什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:46:24.037

[哈希技术有很多问题](http://isolani.co.uk/blog/javascript/BreakingTheWebWithHashBangs)，以至于[Twitter 已经停止使用它](http://www.webpronews.com/twitter-hashbang-urls-will-soon-be-a-thing-of-the-past-2012-02)，转而使用[历史 API](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)，它可以让你拥有真正的 URI 来回退到（搜索引擎友好的）服务器端解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:47:04.083

如果您不介意仅支持 HTML5，您可以查看 pushState 方法。

[使用 HTML5 History API 的好教程（Pushstate？）](https://stackoverflow.com/questions/4015613/good-tutorial-for-using-html5-history-api-pushstate)

[https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

# c# - MVC3 单选按钮验证

> ID：13123859
> 
> 赞同：1
> 
> 时间：2012-10-29T14:43:30.853
> 
> 标签：c#, javascript, asp.net-mvc, radio-button, validation

我有一个关于单选按钮和检查的问题。

所以首先，在我看来，我有一个带有登录值的文本框。在这个文本框和提交按钮之间，我有 5 个单选按钮。这些 rb 中的每一个都引用了我的 ViewModel 中的一个属性。

所以这里是代码。我的 ViewModel 具有以下属性：

```
public class DeleteUAInfosViewModel
{

    [Display(Name = "UserAccountDeleteInfos", ResourceType = typeof(UserAccountResources))]
    public string UserLeave
    {
        get { return UserAccountResources.UserLeave; }
    }

    [Display(Name = "UserAccountDeleteInfos", ResourceType = typeof(UserAccountResources))]
    public string UserTransfer
    {
        get { return UserAccountResources.UserTransfer; }
    }

    [Display(Name = "UserAccountDeleteInfos", ResourceType = typeof(UserAccountResources))]
    public string UserDetachment
    {
        get { return UserAccountResources.UserDetachment; }
    }

    [Display(Name = "UserAccountDeleteInfos", ResourceType = typeof(UserAccountResources))]
    public string UserRetirement
    {
        get { return UserAccountResources.UserRetirement; }
    }

    [Display(Name = "UserAccountDeleteInfos", ResourceType = typeof(UserAccountResources))]
    public string UserStatus
    {
        get { return UserAccountResources.UserStatus; }
    }
} 
```

我在其中链接 DeleteUAInfosViewModel 的 IndexViewModel：

```
public class IndexViewModel
{
        [Display(Name = "DeleteUAInfos", ResourceType = typeof(UserAccountResources))]
        public DeleteUAInfosViewModel DeleteUAInfosGroup { get; set; }

        public IndexViewModel()
        {
            DeleteUAInfosGroup = new DeleteUAInfosViewModel();
        }

        ...
} 
```

我对 rb 声明的部分看法：

```
@model MyPath.UserAccount.DeleteUAInfosViewModel

<div id="UserDeleteInfosField">
    <p>
        @Html.RadioButton("RbDeleteGroup", Model.UserLeave)
        @UserAccountResources.UserLeave
        @Html.HiddenFor(x => x.UserLeave)   
    </p>
    <br />
    <p>
        @Html.RadioButton("RbDeleteGroup", Model.UserTransfer)
        @UserAccountResources.UserTransfer
        @Html.HiddenFor(x => x.UserTransfer)   
    </p>
    <br />
    <p>
        @Html.RadioButton("RbDeleteGroup", Model.UserDetachment)
        @UserAccountResources.UserDetachment
        @Html.HiddenFor(x => x.UserDetachment)   
    </p>
    <br />
    <p>
        @Html.RadioButton("RbDeleteGroup", Model.UserRetirement)
        @UserAccountResources.UserRetirement
        @Html.HiddenFor(x => x.UserRetirement)   
    </p>
    <br />
    <p>
        @Html.RadioButton("RbDeleteGroup", Model.UserStatus)
        @UserAccountResources.UserStatus
        @Html.HiddenFor(x => x.UserStatus)   
    </p>
</div> 
```

我用这条线在另一个视图中调用这个局部视图：

```
@Html.Partial("_DeleteUAInfos", Model.DeleteUAInfosGroup) 
```

目前，我检查了登录名是否为空或为空。

但现在我需要包括对单选按钮的检查。示例：我想验证登录是否正确并且至少检查了一个 rb（并检索了值）。

换句话说：我想将单选按钮的检查与登录值的检查结合起来（在我的情况下，登录部分已经完成）。

那你能帮我吗？

提前致谢 ！

Ars_n

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:50:48.150

那么你所做的只是创建一个非常长的布尔表达式，所以在验证你的登录的函数中添加

```
if(!radio1&&!radio2...&&!radion)
{
    ModelState.AddModelError("HTMLModelComponentYouWantToValidate", "ErrorMessage");
} 
```

然后在继续添加之前

```
if(ModelState.IsValid){...}
else{ return View();} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T11:37:33.620

最后我完全改变了做事的方式，使用枚举。所以，我按照以下步骤操作：

1) 在 ViewModel 中声明一个公共枚举（其中包含“UserLeave”、“UserTransfer”等）。

2) 使用属性引用枚举（在 ViewModel 中）：`public MyEnum myEnum{ get; set; }`

3) 在视图中调用此枚举：`@Html.RadioButtonFor(m => m.myEnum, MyEnum.UserLeave);` 对每个单选按钮重复此操作。

4) 现在，我可以直接在我的 ViewModel 中执行检查（是否选中单选按钮）。

所以我希望它能帮助遇到同样问题的人..

问候，

Ars_n

# c# - 在 IIS 中托管 WCF 服务时协议映射错误

> ID：13123861
> 
> 赞同：41
> 
> 时间：2012-10-29T14:43:35.820
> 
> 标签：c#, wcf, web-services, iis, wcf-binding

我使用 VS 2010 开发了一个简单的 WCF 服务。我通过添加应用程序托管在 IIS 的默认网站中并设置物理路径

我试图浏览 .svc 文件，它给了我以下错误：

“*无法读取配置节‘protocolMapping’，因为它缺少节声明*”

![协议映射错误](../Images/b984f3331f1a8441f81d646b3d750dec.png)

我尝试了很多解决方案，但它不起作用

我创建的 WCF 服务库有一个 App.config，其中包含：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <services>
      <service name="EvalServiceLibrary.EvalService">
        <clear />
        <endpoint address="basic" binding="basicHttpBinding" contract="EvalServiceLibrary.IEvalService"
          listenUriMode="Explicit">
          <identity>
            <dns value="localhost" />
            <certificateReference storeName="My" storeLocation="LocalMachine"
              x509FindType="FindBySubjectDistinguishedName" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"
          listenUriMode="Explicit">
          <identity>
            <dns value="localhost" />
            <certificateReference storeName="My" storeLocation="LocalMachine"
              x509FindType="FindBySubjectDistinguishedName" />
          </identity>
        </endpoint>
        <endpoint address="ws" binding="wsHttpBinding" contract="EvalServiceLibrary.IEvalService"
          listenUriMode="Explicit">
          <identity>
            <dns value="localhost" />
            <certificateReference storeName="My" storeLocation="LocalMachine"
              x509FindType="FindBySubjectDistinguishedName" />
          </identity>
        </endpoint>
        <endpoint address="net.tcp://localhost:8888/evalservice" binding="netTcpBinding"
          contract="EvalServiceLibrary.IEvalService" listenUriMode="Explicit">
          <identity>
            <dns value="localhost" />
            <certificateReference storeName="My" storeLocation="LocalMachine"
              x509FindType="FindBySubjectDistinguishedName" />
          </identity>
        </endpoint>
        <endpoint address="net.pipe://localhost/evalservice" binding="netNamedPipeBinding"
          bindingConfiguration="" contract="EvalServiceLibrary.IEvalService" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8080/evalservice" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="True" httpsGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

我在 WCF 网站（我的客户端）中托管的 WCF 服务库应用程序有一个带有以下内容的 Web.config：

```
<?xml version="1.0"?>
<configuration>

  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="false" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web>
  <system.serviceModel>
    <services>
      <service name="EvalServiceLibrary.EvalService">
        <endpoint address="" binding="wsHttpBinding" bindingConfiguration="" contract="EvalServiceLibrary.IEvalService" />
        <endpoint address="mex" binding="mexHttpBinding" bindingConfiguration="" contract="IMetadataExchange" />
        <endpoint address="basic" binding="basicHttpBinding" bindingConfiguration="" contract="EvalServiceLibrary.IEvalService" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <protocolMapping>
      <add binding="basicHttpsBinding" scheme="https" />
    </protocolMapping>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-29T14:58:41.120

阿米尔，

听起来您在运行 .svc 的文件夹中可能存在权限问题，请您检查一下是否存在以下权限：

*   \IIS_IUSERS
*   \IIS_IUSR ---如果在匿名模式下运行 web 服务

对于协议映射的问题，请确保您用于 IIS 站点的应用程序池设置为使用 .net 4，因为据我了解协议映射仅在 .net 4 中可用。

希望这可以帮助

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-12T13:58:10.800

我遇到了同样的问题，但最终发现您必须将默认应用程序池设置为 .Net 4.0，而不仅仅是单个网站的应用程序池。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-09-04T05:47:25.200

对于协议映射问题，请确保您用于 IIS 站点的应用程序池设置为使用 .net 4。

[![在此处输入图像描述](../Images/ae40afcc0e856d8278e82c6f53f09167.png)](https://i.stack.imgur.com/JU1Z6.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-28T05:36:55.590

我也面临同样的问题。通过将应用程序池 .net 框架从 2.0 更改为 4.o 解决了我的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-30T12:11:49.387

```
<configSections>
    <sectionGroup name="system.serviceModel" type="System.ServiceModel.Configuration.ServiceModelSectionGroup, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <section name="protocolMapping" type="System.ServiceModel.Configuration.ProtocolMappingSection, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    </sectionGroup>
</configSections> 
```

添加到 web.config 文件为我解决了

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-28T09:43:15.887

.[![在此处输入图像描述](../Images/cbfcc374b2046239ac7bb0a1524e64ec.png)](https://i.stack.imgur.com/BBpWp.png)

我也有同样的问题，但最后我可以通过打开一些 Windows 功能来解决它​​。

# r - 使用 qplot / ggplot2 循环

> ID：13123869
> 
> 赞同：1
> 
> 时间：2012-10-29T14:44:01.613
> 
> 标签：r, plot, ggplot2

我想通过使用循环来绘制一堆变量，并`par(ask=T)`在每次鼠标点击后更新绘图。

以下代码使用该`plot()`函数可以正常工作：

```
require(ggplot2)
df1 <- data.frame(id=seq(1,10,1)
    ,col1 = runif(10)
    ,col2 = runif(10)
    ,col3 = runif(10)
    ,col4 = runif(10)
    ,col5 = runif(10)
    ,col6 = runif(10)
    ,col7 = runif(10)
    ,col8 = runif(10)
    ,col9 = runif(10)
    ,col10 = runif(10)
    )

par(ask=TRUE)
for(i in 2:9){
colName2 <- paste("col",i,sep="")
plot(df1$col1, df1[,colName2])
flush.console()
}
par(ask=FALSE) 
```

但是，如果我运行相同的代码并使用`qplot()`而不是`plot()`，则绘图窗口永远不会更新。

任何想法为什么或解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:24:51.623

`ggplot2`图形不仅仅通过调用`qplot`(or `ggplot`) 来显示；当打印此函数返回的值时（默认情况下在命令行上发出此值），然后绘制绘图。在循环中，默认情况下不打印函数的返回值，因此不显示任何内容。显式打印它，它会显示出来。

这在[R FAQ 7.22](http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-do-lattice_002ftrellis-graphics-not-work_003f)中有介绍。

```
par(ask=TRUE)
for(i in 2:9){
  colName2 <- paste("col",i,sep="")
  print(qplot(df1$col1, df1[,colName2]))
  flush.console()
}
par(ask=FALSE) 
```

# asp.net - 在 ASP.NET MVC 3 中模型的验证规则中，如何添加翻译成更多语言的错误消息？

> ID：13123871
> 
> 赞同：0
> 
> 时间：2012-10-29T14:44:02.487
> 
> 标签：asp.net, asp.net-mvc-3, validation, class, model

当我向模型类添加验证规则时，可以向其中添加错误消息，但只能使用一种语言；如何为单个属性添加翻译成更多语言的错误消息？我是否要编写更多类“副本”或存在更好的方法来实现它？

```
Public Class Movie
    Public Property ID() As Integer

    <Required(ErrorMessage:="Title is required")>
    Public Property Title() As String

    <Required(ErrorMessage:="Date is required")>
    Public Property ReleaseDate() As Date

    <Required(ErrorMessage:="Genre must be specified")>
    Public Property Genre() As String

    <Required(ErrorMessage:="Price Required"), Range(1, 100, ErrorMessage:="Price must be between $1 and $100")>
    Public Property Price() As Decimal

    <StringLength(5)>
    Public Property Rating() As String
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:47:58.757

您可以使用 ErrorMessageResourceType 和 ErrorMessageResourceName 参数来指向具有给定字符串的资源文件 (.resx)：

```
<Required(ErrorMessageResourceType:=GetType(Namespace.ResxFile),ErrorMessageResourceName:="GenreMustBeSpecified")>
Public Property Genre() As String 
```

然后，您必须为每种语言创建一个 *.resx 文件，例如：

*   ResxFile.resx - 默认
*   ResxFile.en-US.resx - 英语
*   ResxFile.de-DE.res - 德语
*   ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:58:30.577

使用资源文件并在 .resx 扩展名之前添加您的语言代码`Resources1.en-US.resx`

然后参考一下

`[Required(ErrorMessage = MvcApplication1.Properties.Resources.ExampleResource)]`

# android - 我的应用中 GoogleAds 的所有者

> ID：13123873
> 
> 赞同：0
> 
> 时间：2012-10-29T14:44:15.923
> 
> 标签：android, admob, apk, ads

今天我发现我的应用程序分布在一些匿名网站上。我下载了它并使用apk工具对其进行了反编译。

我如何判断此 apk 中投放的广告是否是我的广告。在反编译应用程序或任何签名后，我是否可以获得任何发布者 ID。

使用的广告：谷歌广告

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:59:23.520

当你创建`AdMob`横幅时，你通常会使用这样的东西，其中包括你的个人代码：

```
adView = new AdView(this, AdSize.BANNER, "b12398345897ac32 <-- here's the code"); 
```

因此，如果此代码与原始应用程序中的代码相同，则为您提供广告，如果不是，则为其他人提供广告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:24:56.263

顺便说一句，还有另一种检查你的应用程序是否被篡改的好方法——检查应用程序文件签名的证书，如果它是你的证书——你可以跳过反编译并停止担心。

# .net - 依赖注入和代码混淆

> ID：13123874
> 
> 赞同：2
> 
> 时间：2012-10-29T14:44:18.450
> 
> 标签：.net, design-patterns, architecture, dependency-injection

在 Mark Seemann 的[.NET 中的 Dependency Injection](https://rads.stackoverflow.com/amzn/click/com/1935182501)一书中，他指出越来越多的人正在使用具有 AUTO-REGISTRATION 支持的 DI 容器，其中容器可以解析所需具体类型的实例，而无需几乎任何类型的事先配置，这符合约定过度配置架构方法。但这让我想知道如果我使用了混淆器，这会不会破坏代码库并导致容器失败，因为约定已经改变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T15:02:04.033

您通常仍然可以使用依赖注入，即使您以模糊的方式发布您的应用程序程序集。这将起作用，因为您通常会使用泛型类型（例如`Register<IService, Impl>()`）或`typeof`参数（例如`Register(typeof(IService), typeof(Impl))`）来注册类型。换句话说，编译器可以为您检查的所有内容仍然可以工作（当混淆器正常工作时）。

您应该密切关注的是编译器无法检查的所有内容。事情如：

*   通过使用字符串文字指定参数的名称来覆盖构造函数参数。
*   任何基于名称而不是类型信息的配置方法的约定，例如[使用“AppSetting”或“ConnectionString”为构造函数参数的名称添加后缀](http://blog.ploeh.dk/2012/07/02/PrimitiveDependencies/)，期望所有类型的名称以“Controller”结尾，期望要在特定命名空间中的类型。

所以你必须仔细观察这些问题。不要忘记通过[创建可验证的配置](https://simpleinjector.readthedocs.org/en/latest/howto.html#verify-the-container-s-configuration)来保护自己，在您的情况下，我将在应用程序启动时验证此配置（或添加命令行开关，以便应用程序可以进行自检）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:51:29.260

这完全取决于您的 DI 是如何工作的。如果您基于类或接口名称（例如基类和标记接口）进行 DI，并且这些类或接口位于混淆库中，那么是的，您的 DI 将中断。如果您有一个单独的库，可能是某种通用库或某种核心，它没有被混淆，并且它的类和接口在 ID 中使用，那么即使使用库被混淆，您也可以。外部的、未混淆的库的名称不会改变。

要查看示例，请使用反编译器查看混淆的库或 exe。您将看到对外部库（如 .NET）的引用不会也不能被混淆。

# python - Python中不同十六进制类型/表示之间的区别

> ID：13123877
> 
> 赞同：20
> 
> 时间：2012-10-29T14:44:28.500
> 
> 标签：python, types, hex

通过一些 Python 代码，我注意到十六进制值有许多不同的表示形式。例如，如果我选择这样的数字：

```
xx = '\x03\xff' 
```

然后是以下命令（我用来将小端转换为大端的版本）

```
yy = hex(struct.unpack('>H', xx)[0]) 
```

将返回：

```
'0x3ff' 
```

但是，这个命令

```
zz = xx.encode('hex') 
```

将返回：

```
'03ff' 
```

最后，只打印值将返回这个

```
'\x03\xff' 
```

从外观上看，有三种不同类型的十六进制。

1.  `'\xFF'`
2.  `'0xFF'`
3.  `'FF'`

**有什么不同？**

*如果有人可以提出将小端数转换为大端数的更好方法，则加***分。***上面的方法对于`yy`大于两个字节的数字并不适用，我正在使用一些 16 字节长的十六进制字符串（包括不对应于 ascii/整数值的值）*

 ** * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T15:09:44.030

任何使用`\x`都是字符串转义码，恰好使用十六进制表示法；其他转义码包括`\n`换行符、`\'`文字引号等。python 字符串是一个字节序列，您可以使用这些字符指定 ASCII 可打印范围之外的文字值。当 Python 在解释器中回显一个字符串值，或者你打印`repr()`一个字符串调用的结果时，Python 将使用这种转义来表示任何不能打印为 ASCII 字符的字节：

```
>>> chr(65)
'A'
>>> chr(11)
'\x0b' 
```

该`hex()`函数返回一个非常具体的字符串表示，`.encode('hex')`不同之处在于前者包含`0x`前缀。还有两种方法可以产生这样的字符串表示；使用`'%x'`and`'%X'`字符串格式化程序，它们使用小写或大写字母表示。

```
>>> hex(11)
'0xb'
>>> '\x0b'.encode('hex')
'0b'
>>> '%x' % (11,)
'b'
>>> '%X' % (11,)
'B' 
```

尽管这些都是字符串表示（一系列 ASCII 字符），并且与原始数据的关系与`str(number)`整数数据的关系相同；您已经更改了类型，并且离更改字节顺序的目标更远了。

将一条二进制信息从小端转换为大端需要您知道该信息的*大小*。如果你只有短整数，那么你需要每两个字节翻转一次，但如果你有普通（长）整数，那么每个值有 4 个字节，你需要每 4 个字节反转。

我认为使用`struct`模块是一种很好的方法，因为您必须指定值类型。以下将解释`xx`为 big-endian unsigned short int，然后将其打包回二进制表示为 little-endian unsigned short int：

```
>>> import struct
>>> xx = '\x03\xff'
>>> struct.pack('<H', *struct.unpack('>H', xx))
'\xff\x03' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T15:00:42.273

'\xFF' 表示包含 ASCII 码为 255 的字符的字符串。

例如： `print '\x41'`给出 'A'（因为这是 ASCII 码 41 的字符）

并且`xx.encode('hex')`只`hex(struct.unpack('>H', xx)[0])`给出字符串 xx 包含的 ASCII 代码的人类可读的十六进制表示。这意味着生成的字符串包含 a 和 f 或 0 和 9 之间的许多字符。*

# google-api - 将 Google API 添加到流星项目

> ID：13123881
> 
> 赞同：2
> 
> 时间：2012-10-29T14:44:48.147
> 
> 标签：google-api, meteor

我正在尝试将 Google API 链接到我的流星项目，但似乎无法加载。文档说要添加

```
script src="https://apis.google.com/js/client.js?onload=OnLoadCallback"></script> 
```

到头球，我们不能直接在流星中做到这一点。

我尝试获取脚本的本地副本并将其添加到客户端文件夹，但在加载时仍然得到“未定义 gapi”。这种方法适用于 filepicker.io，但不适用于这个。

知道在哪里或如何加载库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:38:12.287

发现：最好的方法是使用 Google RESTful api。[您可以在This SO Question](https://stackoverflow.com/questions/14227222/unauthorized-access-to-google-calendar-api-post-request)看到一个工作示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T19:50:40.907

您可以使用 Meteor 的内置外部服务进行身份验证，他们为 google 提供了一个特定的服务：http: [//docs.meteor.com/#meteor_loginwithexternalservice](http://docs.meteor.com/#meteor_loginwithexternalservice)

要加载客户端 API，只需将其包含在`<head>`应用程序主 html 文件的部分中。

```
<script src="https://apis.google.com/js/client.js?onload=OnLoadCallback"></script> 
```

`gapi`您可以通过在控制台中运行来确认它已正确加载

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-17T11:56:29.383

```
// Create the script tag, set the appropriate attributes
var script = document.createElement('script');
script.src = 'https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap';
script.async = true;

// Attach your callback function to the `window` object
window.initMap = function() {
  // JS API is loaded and available
};

// Append the 'script' element to 'head'
document.head.appendChild(script); 
```

请参阅[参考资料](https://developers.google.com/maps/documentation/javascript/overview#Dynamic)。

# regex - 子字符串的正则表达式，例如 "value1...valueN":"$SpecifcWord"

> ID：13123882
> 
> 赞同：0
> 
> 时间：2012-10-29T14:44:48.997
> 
> 标签：regex

我有一个带有一些 HTML 数据的长字符串，我需要在其中找到这种模式：

```
"AnyWord1 ... AnyWordN":"$SpecificWord" 
```

必须有任意数量的 AnyWordN 词，但之后总是只有一个词“$SpecificWord”

我试过了

```
\".*\"\$SpecifcWord\" 
```

但这仅适用于“AnyWord”之前的第一个“之前的数据中没有引号符号”

所以它适用于这个例子：[http ://regexr.com?32kqh](http://regexr.com?32kqh)

但如果此模式之前的文本包含其他引号，则不起作用，例如：[http ://regexr.com?32kqk](http://regexr.com?32kqk)

我敢肯定，文本中没有 " 字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:59:01.680

我不太明白你的问题（什么是“value1”，你的意思是`" symbol near value1`什么？），但总的来说，你的正则表达式应该正确匹配，如果你正在查看的页面的源代码确实包含本文。

为了涵盖一些极端情况，可能值得使正则表达式的某些部分更明确：

```
var myregex = /"[^"]*":"\$SpecificWord"/ 
```

可能会更好。

另一个潜在问题：您确定`"`字符串中有实际字符吗？或者它们实际上可能是`&quot;`角色实体？

请澄清你的问题。

# caching - asp.net 4.5 中的数据缓存对象

> ID：13123885
> 
> 赞同：0
> 
> 时间：2012-10-29T14:44:59.337
> 
> 标签：caching

为什么我找不到命名空间 System.Web.Caching.Cache （当我查看引用时）来为我的 asp.net 4.5 Web 项目中的对象进行数据缓存？

# javascript - 回调函数的默认值应该在对象中是什么？

> ID：13123886
> 
> 赞同：2
> 
> 时间：2012-10-29T14:44:59.460
> 
> 标签：javascript, jquery, callback, extend

## 问题

我正在尝试为对象方法指定选项，其中一个选项是回调函数。我正在使用 jQuery`extend`方法将我的默认值应用于选项参数，但我不确定我应该为回调参数设置什么值。

这就是我目前所拥有的：

```
var options = $.extend({
    wrapper:    '#wrapper', // Define the default wrapper to prepend to
    fade:       true, // Fade the overlay by default
    callback:   function(){} // Define the callback function
},options); 
```

## 问题

以上是为回调分配默认值的最佳方法吗？或者将其设置为false会更好吗？我想如果您尝试调用`options.callback()`并且回调设置为 false 那么您会收到错误消息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:47:26.433

具有非函数默认值需要在调用之前进行显式检查。

拥有一个空函数需要调用它的开销*（尽管很小）*。

没有正确的方法。这完全取决于你。如果你确实使用了一个空函数，你可以使用它[`$.noop`](http://api.jquery.com/jquery.noop/)来重用一个现有的函数。

```
var options = $.extend({
    wrapper:    '#wrapper', // Define the default wrapper to prepend to
    fade:       true, // Fade the overlay by default
    callback:   $.noop // Define the callback function
},options); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:47:27.913

[jQuery 有一个名为$.noop](http://api.jquery.com/jQuery.noop/)的内置函数，它什么都不做。

# wpf - 在 Bing 地图控件上绘图

> ID：13123888
> 
> 赞同：1
> 
> 时间：2012-10-29T14:45:00.950
> 
> 标签：wpf, windows-7, bing-maps

我正在编写一个在 WPF 中的 Windows 7 平板电脑上运行的软件（使用 Bing 地图）。

我想在拖动鼠标时进行绘制，我想使用此指南：[在 bing 地图上绘图](http://ngjon.wordpress.com/2010/02/05/interactive-drawing-on-the-silverlight-map-control/)但我在 Map 控件上找不到 mouseTap 事件。我猜它只在 Silverlight 版本中可用。我应该如何追踪鼠标？

另外，我需要冻结地图（因为现在触摸它会改变地图的显示）。有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:11:40.787

WPF 中没有 Tap 事件。您将不得不处理以下鼠标事件。

*   [鼠标按下](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mousedown.aspx)
*   [鼠标移动](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mousemove.aspx)
*   [鼠标向上](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mouseup.aspx)

还有一些更专业的活动

*   [MouseLeftButtonDown](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mouseleftbuttondown.aspx)
*   [鼠标左键向上](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mouseleftbuttonup.aspx)
*   [MouseRightButtonDown](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mouserightbuttondown.aspx)
*   [MouseRightButtonUp](http://msdn.microsoft.com/en-us/library/system.windows.uielement.mouserightbuttonup.aspx)

如果您需要在 Bing 地图控件之前处理事件，您可能需要使用下面列出的适当隧道事件。为了防止 Bing 地图控件进一步处理事件，请将[RoutedEventArgs.Handled](http://msdn.microsoft.com/en-us/library/system.windows.routedeventargs.handled.aspx)标志设置为 true。

*   [预览鼠标按下](http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewmousedown.aspx)
*   [预览鼠标移动](http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewmousemove.aspx)
*   [PreviewMouseUp](http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewmouseup.aspx)
*   等与 LeftButton 和 RightButton

# c++ - 如何停止重新定义类

> ID：13123892
> 
> 赞同：1
> 
> 时间：2012-10-29T14:45:03.157
> 
> 标签：c++

我有一个名为“Animal”的类，它是一个超类和纯多态。我还有其他类“狗”、“猫”、“仓鼠”等。它们都继承自“动物”类。

在一个程序中，我需要包含所有子类（狗、猫、仓鼠），但是，当我这样做时：

```
#include "Hamster.h"
#include "Dog.h"
...
... 
```

我得到错误：

> 'class Animal' 的先前定义</p>

有没有办法防止这种情况？

PS我想过做一个：

```
#ifdef 
```

但是，如果使用了该类，则将其包含在内。例如，如果程序试图创建一个 Cat 类，则执行包含。

抱歉，如果没有很好地解释。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T14:46:25.200

在头文件中使用包含保护：

```
#ifndef ANIMAL_H
#define ANIMAL_H

//definitions

#endif 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T14:50:25.513

在每个标题的顶部，放置一个

```
#pragma once 
```

国际标准只是说如果编译器不理解它就必须忽略它。

但[几乎所有编译器都理解它](http://en.wikipedia.org/wiki/Pragma_once#Portability)，这是一个*事实上*的标准。

的替代方法`#pragma`是使用

```
#ifndef MYHEADER_H
#define MYHEADER_H

// Contents of header

#endif 
```

哪个更丑陋，更冗长，更不容易正确，可能因名称冲突而失败，效率可能更低，但这是完全标准的。

无论如何，这个想法是防止标题内容，如类定义，被包含在*同一个翻译单元*中两次或更多次。

但是请注意，您*可以*在同一个翻译单元中执行相同`typedef`的 s。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T14:47:07.477

您可以`#pragma once`在头文件中使用，但它不可移植为`#ifndef`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-17T20:49:07.853

`#pragma once`在你的头文件中使用。

# c - 使用 C 检索内存插槽的数量

> ID：13123896
> 
> 赞同：0
> 
> 时间：2012-10-29T14:45:07.183
> 
> 标签：c, windows

如何使用 C 语言而不是通过 WMI 检索我的计算机具有的内存插槽数？当我尝试通过命令提示符使用 WMI 检索内存插槽数量时，

```
C:>wmic
wmic:root\cli> path Win32_PhysicalMemoryArray get MemoryDevices 
```

(http://msdn.microsoft.com/en-us/library/aa394348%28v=vs.85%29.aspx)

但它没有给我正确数量的内存插槽。我只有 2 个内存插槽，但它给了我 4 个。

内存阵列、内存插槽和内存插槽有什么区别？因为在 msdn（上面提供的链接）中，它声明 MemoryDe​​vices 是“此内存阵列中可用的物理插槽或套接字的数量”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T15:27:32.033

**使用 WMI：**

```
wmic:root\cli>memorychip get *
BankLabel  Capacity    Caption          CreationClassName     DataWidth  Description      DeviceLocator   FormFactor  HotSwappable  InstallDate  InterleaveDataDepth  InterleavePosition  Manufacturer  MemoryType  Model  Name             OtherIdentifyingInfo  PartNumber        PositionInRow  PoweredOn  Removable  Replaceable  SerialNumber  SKU  Speed  Status  Tag                TotalWidth  TypeDetail  Version
BANK 0     4294967296  Physical Memory  Win32_PhysicalMemory  64         Physical Memory  ChannelA-DIMM0  12                                     0                    0                   Samsung       0                  Physical Memory                        M47132156CH0-CH9  1                                                 CAC74CFC           1333           Physical Memory 0  64          128

wmic:root\cli> 
```

按照[此链接](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390423%28v=vs.85%29.aspx)在您的 C/C++ 应用程序中使用本机 win32 API 调用。

此链接也可以帮助您[。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa392903%28v=vs.85%29.aspx)

# xpages - Xpages 设置数据源属性

> ID：13123898
> 
> 赞同：1
> 
> 时间：2012-10-29T14:45:11.020
> 
> 标签：xpages, xpages-ssjs

我想在我的页面上有某些数据源，其属性为loaded="false"，然后使用onClick 例如将其设置为true。我听说有人这样做，但我似乎找不到 SSJS 的例子？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T10:16:44.430

您可以使用会话范围的变量来切换数据源的加载。onclick，更改此值。

由于您使用的是加载的属性，我相信您必须重新打开页面（完全刷新还不够）。例如通过重定向。

# php - Symfony2 基于提交数据的表单验证组

> ID：13123900
> 
> 赞同：4
> 
> 时间：2012-10-29T14:45:13.873
> 
> 标签：php, forms, validation, symfony

我有一些复杂的表单，有几个子表单，我希望能够根据在主表单中选择的单选按钮分别验证每个子表单。我想通过验证组来实现这一点。

注意：我没有`data_class`模型，我使用数组。

这是我的简化表格：

```
class MyType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('xxx', 'text', array(
                'constraints' => array(
                    new Constraints\NotBlank(),
                ),
                'validation_groups' => array(
                    'xxx',
                )
            ))
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'validation_groups' => function(FormInterface $form) {
                return array('xxx');
            },
        ));
    }
} 
```

问题是没有触发对该字段的验证。

`setDefaultOptions`当这工作时，我可以根据提交的数据轻松更改以验证所需的组：

```
public function setDefaultOptions(OptionsResolverInterface $resolver)
{
    $resolver->setDefaults(array(
        'validation_groups' => function(FormInterface $form) {
            $data = $form->getData();

            return array($data['type']);
        },
    ));
} 
```

任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T17:28:49.073

您必须将验证组名称传递给约束，而不是表单本身。通过将组名分配给表单，您可以指定在验证中使用哪些约束。

代替

```
$builder->add('xxx', 'text', array(
        'constraints' => array(
            new Constraints\NotBlank(),
        ),
        'validation_groups' => array(
            'xxx',
        )
    ))
; 
```

和

```
$builder->add('xxx', 'text', array(
        'constraints' => array(
            new Constraints\NotBlank(array(
                'groups' => 'xxx'
            )),
        ),
    ))
; 
```

默认情况下，约束具有“*默认*”（大写）组，并且表单使用该组来验证是否未指定。如果您希望其他没有明确组的约束与指定的组一起验证，则传递“*默认*”一个。

```
$resolver->setDefaults(array(
    'validation_groups' => function(FormInterface $form) {
        $data = $form->getData();

        return array($data['type'], 'Default');
    },
)); 
```

# java - 为什么我不能为这个特定项目生成 javadoc？没有错误信息

> ID：13123905
> 
> 赞同：1
> 
> 时间：2012-10-29T14:45:35.193
> 
> 标签：java, api, logging, documentation, javadoc

我正在尝试为我的一些项目生成一些 javadoc。评论等已经在里面了，但是当我点击

eclipse中的“项目->生成Javadoc-> ...”

javadoc 根本没有为我的一个项目生成，而其他项目都很好。

它甚至试图打开 index.html 文件，但由于没有创建任何文件，我的浏览器只是收到一条未找到的消息。

由于也没有错误输出，我不知道问题是什么，也不知道我现在可以做什么来为这个特定项目生成 javadoc。

我记得我曾经遇到过这个问题，但遗憾的是我不记得当时我是如何解决它的。这有可能必须处理无效字符吗？

你们当中有人经历过这种行为吗？你做了什么来解决它？你对我有什么提示或技巧吗，我怎样才能找出是什么阻止了这个项目的 javadoc 生成？此外，是否可能有一个日志文件或任何类似的东西，我可以在其中看到创建过程中发生的错误。

非常感谢你的帮助

编辑：或者我可以以某种方式激活控制台上的创建输出，以便以这种方式找到错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-17T21:57:45.090

万一有人遇到同样的问题，这对我来说一切都恢复正常

我删除了所有库（ Project、libraries ），清理了项目，以便所有缺少的依赖项都显示为错误，然后添加它们并再次清理配置文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:02:58.867

解决了我的问题。

我发现当我使用

“文件 -> 导出 -> Javadoc -> ...”方式。

在收到的错误消息中，我可以弄清楚我的一个 Arraylist 中确实有一个他无法处理的字符（尽管我不知道为什么 javadoc 生成器应该关心我的方法中的代码）。

一旦我删除了无效字符，javadoc 生成就很好了。

非常感谢

# android - Android 记住以前的登录帐户

> ID：13123907
> 
> 赞同：0
> 
> 时间：2012-10-29T14:45:46.703
> 
> 标签：android

我正在开发一个安卓应用程序。要使用我的应用程序，您必须有一个 id，所以我选择使用 AccountManager。 [安卓开发者](http://developer.android.com/reference/android/accounts/AccountManager.html)。

从这个经理我可以检索一个帐户（谷歌、推特或其他）。

这行得通，但我不知道存储此帐户选择的最佳方式是什么，这样它就不会在每次启动应用程序时都要求选择一个帐户。

我是否创建一个文件并将选择存储在其中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:55:56.360

我认为您在谈论 SharedPreferences。请参阅[文档](http://developer.android.com/guide/topics/data/data-storage.html#pref)以保存即使应用程序被终止也仍然存在的键值对。然后您可以保存上次登录的帐户。

# bash - 使用 bash 脚本更改子网

> ID：13123908
> 
> 赞同：-1
> 
> 时间：2012-10-29T14:45:47.797
> 
> 标签：bash, sed, awk

我希望将文件中 192.168.XXX 的每个实例更改为 192.168.yyy。在使用 bash 脚本的网络配置文件中。让我感到困惑的是，我不确定 xxx 会是什么。例如，它可以是 192.168.122.1 或 192.168.123.1。也可以是 192.168.122.2 或 192.168.122 等。我认为这可以通过一个命令来完成。

这是默认的网络文件：

```
 <network>
      <name>default</name>
      <bridge name="virbr0" />
      <forward/>
      <ip address="192.168.122.1" netmask="255.255.255.0">
        <dhcp>
          <range start="192.168.122.2" end="192.168.122.254" />
        </dhcp>
      </ip>
    </network> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:59:11.290

以下`sed`一行将更改 IP 的第 3 部分*（在本例中为 15）*，而其他 2 或 3 部分保持不变。

`sed -r 's/192\.168(\.??[0-9]*){2}/192.168.15\1/g'`

输出：

```
192.168.0.12
192.168.15.12

192.168.25.34
192.168.15.34

192.168.0
192.168.15 
```

所以要在运行中将所有 IP 从`192.168.XXX.YYY`to`192.168.15.YYY`或`192.168.XXX`to更改为`192.168.YYY``network.conf`

`sed -r 's/192\.168(\.??[0-9]*){2}/192.168.15\1/g' network.conf`

这将显示文件`stdout`的更改，如果您对更改感到满意，请使用`-i`选项将更改保存到文件。

`sed -r -i 's/192\.168(\.??[0-9]*){2}/192.168.15\1/g' network.conf`

请记住更改`192.168.15.\1`为您`192.168.XXX.\1`需要`XXX`的实际数字*（不是 15）*并更改文件名*（来自 network.conf）。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:11:17.837

sed 命令

```
NEWIP=YYY
sed "s/192\.168\.[0-9]*/192.168.$NEWIP/g" filename 
```

（用一些数字代替 YYY）会将 192.168.XXX 更改为 192.168.YYY，这样做也会将表单 192.168.XXX.ZZZ 更改为 192.168.YYY.ZZZ。`g`in表示要更改一行上的`s/.../.../g`所有匹配项，而不仅仅是第一个匹配项。如图所示，它将在标准输出上输出结果。如果要就地编辑文件，请使用 -i 开关：

```
sed -i "s/192\.168\.[0-9]*/192.168.$NEWIP/g" filename 
```

如果您想在使用扩展名 ~ 备份原始文件后就地编辑文件，您可以说：

```
sed -i~ "s/192\.168\.[0-9]*/192.168.$NEWIP/g" filename 
```

请注意，更改表格 192.168.122 的条目（即条目包含三个部分而不是四个部分）已按照相关要求进行；然而，这样的改变不一定有意义。正如[LarsH](https://superuser.com/a/486904)对 [为什么 ping 192.168.072（只有 2 个点）的回答中所述，会返回来自 192.168.0.58 的响应？](https://superuser.com/questions/486788)IP 点分形式`A.B.C`等效于`A.B.0.C`，如果遵循该约定，将 192.168.122（值为 192.168.0.122）更改为 192.168.15（值为 192.168.0.15）是没有意义的。

# c - 指向结构的指针

> ID：13123910
> 
> 赞同：0
> 
> 时间：2012-10-29T14:45:53.427
> 
> 标签：c, pointers, struct

我是 ANSI-C 的新手，我试图弄清楚它是如何工作的：

```
bd_t *bd = gd->bd; 
```

这是否告诉我`bd_t`= value of a structure value `bd`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:52:49.080

在某处，有一个 typedef：

```
typedef something bd_t; 
```

该行：

```
bd_t *bd = gd->bd; 
```

声明一个称为`bd`指向 a 的指针的变量，并使用指向结构变量的指针`bd_t`的值对其进行初始化。该结构包含一个可能也是.`gd->bd``gd``bd``bd_t *`

从单行来看，您无法说出有关 type 的更多信息`bd_t`。

# excel - excel 2007 的 Mime 类型

> ID：13123912
> 
> 赞同：3
> 
> 时间：2012-10-29T14:46:01.697
> 
> 标签：excel, types, header, mime

如何设置适用于 excel 2007 的正确 MIME 类型？现在我有这个：

```
header("Content-type: application/vnd.ms-excel; charset=UTF-8"); 
```

我的浏览器一直告诉我这是一个 97 2003 文件，但是当我尝试使用 excel 2007 打开该文件时，程序显示一些警告，我可以看到该文档，但我试图避免该警告。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T15:28:26.990

应用程序/vnd.openxmlformats-officedocument.spreadsheetml.sheet

[http://support.microsoft.com/?id=936496](http://support.microsoft.com/?id=936496)

# jquery - 检查是否选中了一项单选按钮

> ID：13123917
> 
> 赞同：1
> 
> 时间：2012-10-29T14:46:11.300
> 
> 标签：jquery, html

我有一些单选按钮：

```
<input type="radio" id="rdoLevel" name="rdoSelect" />
<input type="radio" id="rdoBase" name="rdoSelect" />
<input type="radio" id="rdoSchool" name="rdoSelect" />
<input type="radio" id="rdoTypeRegistre" name="rdoSelect" /> 
```

我想通过 id 检查每个项目，例如我想检查 rdoLevel 是否等于检查了某些代码执行例如这样：

```
 $("input:radio").click(function () {
                    var id = $(this).attr("id");
                    if (id == "rdoLevel") {
                        //some code
                    }
                }); 
```

我怎样才能做到这一点？
**谢谢你的建议！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T14:48:39.300

```
$("input[name='rdoSelect']").change(function() {
    switch (this.id) {
        case "rdoLevel":
            // ...
            break;
        case "rdoBase":
            // ...
            break;
        // etc
    }
});​ 
```

**演示：http:** [//jsfiddle.net/kQC9L/](http://jsfiddle.net/kQC9L/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T14:48:31.003

```
 $("input:radio").click(function () {
                var id = $(this).attr("id");
                if (id == "rdoLevel" && $(this).is(':checked')) {
                    //some code
                }
            }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T14:49:10.643

将单击更改为以下内容。（类型选择器不正确。）

```
$("input[type=radio]").click(function() {
    var id = $(this).attr("id");
    alert(id);

});​ 
```

# hibernate - 如何使用带有 CriteriaBuilder 的枚举查询 M:N 关系

> ID：13123920
> 
> 赞同：6
> 
> 时间：2012-10-29T14:46:21.893
> 
> 标签：hibernate, jpa-2.0, criteria-api

我目前正在研究一个包含区域枚举值列表的公司实体。这些是公司正在工作的领域。它们被映射为`@ElementCollection`。

```
@Entity
public class Company {

  @ElementCollection
  @CollectionTable(name = "company2area")
  @Enumerated(EnumType.STRING)
  private List<Area> areas = new ArrayList<Area>();

  ...
} 
```

Area 是一个简单的枚举，包含可用区域。

```
 public enum Area {
    ASIA,
    AMERICA,
    EUROPE;
} 
```

我试图查询目前在亚洲和美洲工作的所有公司，如下所示：

```
CriteriaQuery<Company> query = this.entityManager.getCriteriaBuilder()
                                             .createQuery(Company.class);
query.where(query.from(Company.class)
        .get("areas")
        .in(Arrays.asList(Area.ASIA, Area.AMERICA)));
List<Company> result = entityManager.createQuery(q)
                                    .getResultList(); 
```

但我得到的只是一个例外：

```
Caused by: java.lang.IllegalArgumentException: Parameter value [ASIA]
did not match expected type [java.util.Collection]  at
org.hibernate.ejb.AbstractQueryImpl.validateParameterBinding(AbstractQueryImpl.java:375)
    at
org.hibernate.ejb.AbstractQueryImpl.registerParameterBinding(AbstractQueryImpl.java:348)
    at org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:375)     at
org.hibernate.ejb.criteria.CriteriaQueryCompiler$1$1.bind(CriteriaQueryCompiler.java:195)
    at
org.hibernate.ejb.criteria.CriteriaQueryCompiler.compile(CriteriaQueryCompiler.java:241)
    at
org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:587)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)     at
org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
    at $Proxy61.createQuery(Unknown Source)     ... 29 more 
```

我究竟做错了什么？枚举有什么特别的技巧吗？

我很清楚[如何查询与 JPA2 的 M:N 关系？](https://stackoverflow.com/questions/11297241/how-to-query-an-mn-relationship-with-jpa2)几个月前我问过。不幸的是，那里的解决方案不适用于枚举。

谢谢你的帮助。:)

编辑：

这是我的 MySQL 数据库的描述：

```
create table company2area (
    Company_fk bigint not null,
    areas varchar(255)
) ENGINE=InnoDB;

create table company (
    id bigint not null auto_increment,
    fullName varchar(255),
    ...,
    primary key (id)
) ENGINE=InnoDB;

alter table company2area 
    add index FK52BA7162CE087250 (Company_fk), 
    add constraint FK52BA7162CE087250 
    foreign key (Company_fk) 
    references company (id); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T14:00:08.900

如果我明确加入表格，它会起作用：

```
query.where(query.from(Company.class)
    .join("areas", JoinType.INNER)
    .in(Arrays.asList(Area.ASIA, Area.AMERICA))); 
```

据我所知，这两种方式都应该产生相同的查询，因为默认的内连接是，但显然，这里只有这个有效。

# excel - 将对象传递给 Excel VBA Sub 导致参数不是可选错误

> ID：13123924
> 
> 赞同：0
> 
> 时间：2012-10-29T14:46:26.510
> 
> 标签：excel, vba

我有以下子：

```
Public Function Log(sdsMessage As CStandardPropertySet2)
' Only print the fields contained int he sdsMessage
End Function 
```

我像这样使用它：

```
Log(anSdsMessage) 
```

但是，这会导致`Argument not optional`错误。

但如果我有这样的子：

```
Public Function Log(sdsMessage As CStandardPropertySet2) As CStandardPropertySet2
' Only print the fields contained int he sdsMessage
Set Log = sdsMessage
End Function

Set anSdsMessage = Log(anSdsMessage) 
```

然后错误消失。这对我来说看起来很尴尬，因为我根本不需要修改消息，只想打印其中的字段。

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T14:51:52.497

这是愚蠢的混淆 VBA 语法。当您将 jsut`Log`作为方法调用并且没有返回类型时，您省略括号。

所以`Log anSdsMessage`当没有设置返回值时

并且（正如您已经拥有的那样正确）`Set anSdsMessage = Log(anSdsMessage)`设置返回值时。

解决丹尼尔的评论

我可以写这段代码

```
Public Function Log(sdsMessage As Collection)
' Only print the fields contained int he sdsMessage
End Function

Sub tester()
    Dim o As Collection
    Set o = New Collection
    Log (o)
End Sub 
```

并尝试运行`tester`子程序，我收到错误消息“编译错误：参数不是可选的”

删除括号并运行`Log o`实际上允许编译并删除错误。

# git - Git Workflow - 远程共享仓库和登台服务器？

> ID：13123929
> 
> 赞同：1
> 
> 时间：2012-10-29T14:46:58.397
> 
> 标签：git, workflow, production-environment, staging, repository

遵循[git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)并阅读[git staging & production question](https://stackoverflow.com/questions/3844369/git-production-staging-server-workflow)。我的远程仓库也被用作我的临时仓库。这是一个 BARE 回购。

当前工作流程
`Workstations 1,2,3,4 - non-bare, cloned from remote, PUSHes to remote
Remote Repo - bare repo, neither pushes nor pulls, serves as staging repo
Production server - non-bare, PULLs from remote`

是否应该有单独的远程仓库和暂存仓库？如果是这样，哪一个应该是裸露的，因为它们都不能？

# sql-server-2008 - 处理外键约束时出错

> ID：13123930
> 
> 赞同：0
> 
> 时间：2012-10-29T14:46:58.717
> 
> 标签：sql-server-2008, c#-4.0, ef-code-first, foreign-keys, data-migration

我目前正在处理的项目中遇到外键问题。我首先使用实体​​代码来创建我的数据库。这是我到目前为止所拥有的。

## 表

单位：身份证，...

类别：身份证，...

CategoryUnits：Id、CategoryId、UnitId

## 代码优先

类别.cs

```
public partial class Category : BaseEntity, ILocalizedEntity
{
    private ICollection<CategoryUnits> _categoryUnits;

    ...

    public virtual ICollection<CategoryUnits> CategoryUnits
    {
        get { return _categoryUnits ?? (_categoryUnits = new List<CategoryUnits>()); }
        protected set { _categoryUnits = value; }
    }
} 
```

单位.cs

```
public class Units : BaseEntity
{
    ...
} 
```

类别单位.cs

```
public partial class CategoryUnits : BaseEntity, ILocalizedEntity
{
    public virtual int UnitId { get; set; }
    public virtual int CategoryId { get; set; }

    public virtual Units Unit { get; set; }
    public virtual Category Category { get; set; }
} 
```

CategoryUnitsMap.cs

```
public partial class CategoryUnitsMap : EntityTypeConfiguration<CategoryUnits>
{
    public CategoryUnitsMap()
    {
        this.ToTable("CategoryUnits");
        this.HasKey(cu => cu.Id);

        this.HasRequired(cu => cu.Unit)
            .WithMany()
            .HasForeignKey(cu => cu.UnitId);

        this.HasRequired(cu => cu.Category)
            .WithMany(c => c.CategoryUnits)
            .HasForeignKey(cu => cu.CategoryId);
    }
} 
```

目前发生的情况是，当我在数据迁移程序期间尝试插入数据时收到以下消息：

INSERT 语句与 FOREIGN KEY 约束“CategoryUnits_Category”冲突。冲突发生在数据库“NopDB3”、表“dbo.Category”、“Id”列中。

这是我实际将数据放入表中的代码。

程序.cs

```
private static void AddDefaultOfficeSuppliesUnitRights()
    {
        try
        {
            var unitIds = new List<int>();
            var sqlSelectStatement = "Select * From Units With(NoLock)";
            var units = new DataSet();

            using (var sqlCommand = new SqlCommand(sqlSelectStatement, sqlCon))
            {
                var sqlAdapter = new SqlDataAdapter();
                sqlAdapter.SelectCommand = sqlCommand;
                sqlCon.Open();
                sqlAdapter.Fill(units);
                sqlCon.Close();
            }

            foreach (DataRow dr in units.Tables[0].Rows)
            {
                var unitId = Int32.Parse(dr["Id"].ToString());
                unitIds.Add(unitId);
            }

            var sqlInsertStatement = GenerateCategoryUnitsForOfficeSupplies("Insert Into CategoryUnits (UnitId, CategoryId) Values (cuUnitId, 19)", unitIds);
            using (var sqlCommand = new SqlCommand(sqlInsertStatement, sqlCon))
            {
                sqlCon.Open();
                sqlCommand.ExecuteNonQuery();
                sqlCon.Close();
            }

            Console.WriteLine("Default Office Supply CategoryUnits Added");
        }
        //Something went wrong
        catch (Exception ex)
        {
            Console.WriteLine("Error in Add Default Category Units for Office Supplies: " + ex.Message);
        }
        //Close out sql connection
        finally
        {
            if (sqlCon.State != ConnectionState.Closed) sqlCon.Close();
        }
    }

private static string GenerateCategoryUnitsForOfficeSupplies(string sqlInsertStatement, List<int> unitIds)
    {
        var sqlInsertStatements = string.Empty;
        foreach (var unitId in unitIds)
        {
            sqlInsertStatements += sqlInsertStatement.Replace("cuUnitId", unitId.ToString()) + "; ";
        }

        return sqlInsertStatements;
    } 
```

最奇怪的是，当我通过 sql 语句手动插入数据时，它工作正常并且没有错误。任何的意见都将会有帮助。

# python - 是否有一个相当于在rails中包含局部变量的django？

> ID：13123937
> 
> 赞同：0
> 
> 时间：2012-10-29T14:47:19.463
> 
> 标签：python, django

我正在学习 Django，我来自 Rails 背景。因此，我问了一堆问题，试图在 django 中找到一些基础。

当您在 rails 中调用 partial 时，您可以选择在调用中包含一些局部变量：

```
 render 'folder_name/partial_name', :local_variable_name => 6 #or @variable or "a string" etc.." 
```

然后在部分中，变量“local_variable_name”可用：

```
 <h1><%= local_variable_name %></h1> 
```

django include 中是否有一些等价物？例如，任何改变它来完成这个任务的方法：

```
 {% include 'folder_name/partial_name.html' %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:55:44.797

根据[Django 文档](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#include)：

> 您可以使用关键字参数将其他上下文传递给模板：
> 
> `{% include "name_snippet.html" with person="Jane" greeting="Hello" %}`
> 
> 如果您只想使用提供的变量（甚至根本没有变量）呈现上下文，请使用 only 选项：
> 
> `{% include "name_snippet.html" with greeting="Hi" only %}`

享受！

# jquery - 在 asp.net 文本框中放置 jQuery 触发器图标

> ID：13123942
> 
> 赞同：0
> 
> 时间：2012-10-29T14:47:37.857
> 
> 标签：jquery, asp.net, datepicker, custom-controls

我想使用[jQuery**默认**日期选择器](http://jqueryui.com/datepicker/#icon-trigger)，它很棒，但我想将触发器图标放在右侧的 asp.net 文本框中。我怎样才能做到这一点？也许使用自定义 asp.net 控件？

谢谢你。

```
<asp:textbox id="sht" runat="server" />
<script> $('#sht').datepicker();</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:59:30.347

看这个例子[here](http://jsfiddle.net/oscarj24/zy7YP/1/)

CSS：

```
.icon {
background:#FFFFFF url(http://icons.iconarchive.com/icons/gakuseisean/ivista-   2/16/Start-Menu-Search-icon.png) no-repeat 4px 4px;
padding:4px 4px 4px 22px;
height:18px;
} 
```

​HTML：

```
<input type="text" name="sample" class="icon">​ 
```

# vb.net - VS2010 WebSetup 在安装期间未将 AppPool 分配给应用程序

> ID：13123943
> 
> 赞同：1
> 
> 时间：2012-10-29T14:47:42.633
> 
> 标签：vb.net, iis, web-setup-project

当我在 VS2005 下编译我的项目时，以下代码帮助我配置我的 IIS 以设置 ApplicationPool 并成功地将我的 WebApplication 分配给它（使用 InstallerClass）。

现在我在VS2010下编译时遇到了麻烦！当我运行我的安装设置时，我现在变成了一个 DropDownList 来为站点选择一个应用程序池（我以前没有这个）并且在列表中没有我正在创建的 AppPool。

AppPool 将在安装后创建，我可以看到它，但我的应用程序没有绑定到它。

有人知道我错过了什么吗？非常感谢您的帮助。问候，胺

PS：代码：

```
Private Const _appPoolName As String = "MyPool001"

Public Overrides Sub Install(ByVal stateSaver As System.Collections.IDictionary)
    MyBase.Install(stateSaver)
    SetIISApplicationPool(_appPoolName, Me.Context)
End Sub

Public Shared Sub SetIISApplicationPool(ByVal AppPoolName As String, ByVal context As System.Configuration.Install.InstallContext)
    Dim targetSite As String = context.Parameters("targetsite")
    Dim targetVDir As String = context.Parameters("targetvdir")
    Dim targetDirectory As String = context.Parameters("targetdir")

    If targetSite Is DBNull.Value Then
        Throw New System.Configuration.Install.InstallException("IIS Site Name Not Specified!")
    End If

    If targetSite.StartsWith("/LM/") Then
        '// Sets the virtual directory to .NET 2.0
        targetSite = targetSite.Substring(4)
        Dim info As New ProcessStartInfo
        info.FileName = IO.Path.Combine(System.Environment.GetEnvironmentVariable("SystemRoot"), "Microsoft.NET\Framework\v2.0.50727\aspnet_regiis.exe")
        info.Arguments = String.Format("-s {0}/ROOT/{1}", targetSite, targetVDir)
        info.CreateNoWindow = True
        info.UseShellExecute = False
        Process.Start(info)
        Try
            CreateApplicationPool("IIS://localhost/W3SVC/AppPools", AppPoolName)
        Catch : End Try
        Try
            AssignVDirToAppPool("IIS://localhost/" & targetSite & "/Root/" & targetVDir, AppPoolName)
        Catch : End Try
    End If
End Sub
Private Shared Sub CreateApplicationPool(ByVal strMetabasePath As String, ByVal strAppPoolName As String)
    Try
        If strMetabasePath.EndsWith("/W3SVC/AppPools") Then
            Dim blExists As Boolean = AppPoolExists(strMetabasePath, strAppPoolName)
            If blExists = False Then
                Dim objNewPool As System.DirectoryServices.DirectoryEntry
                Dim objAppPools As New System.DirectoryServices.DirectoryEntry(strMetabasePath)
                objNewPool = objAppPools.Children.Add(strAppPoolName, "IIsApplicationPool")
                objNewPool.CommitChanges()
            End If

        Else
            Throw New Exception("Application pools can only be created in the */W3SVC/AppPools node.")
        End If
    Catch exError As Exception
        Throw New Exception("Failed in CreateAppPool with the following exception: " & exError.Message)
    End Try

End Sub
Private Shared Sub AssignVDirToAppPool(ByVal strMetabasePath As String, ByVal strAppPoolName As String)
    Try
        Dim objVdir As New System.DirectoryServices.DirectoryEntry(strMetabasePath)
        Dim strClassName As String = objVdir.SchemaClassName.ToString()
        If strClassName.EndsWith("VirtualDir") Then
            Dim objParam As Object() = {0, strAppPoolName, True}
            objVdir.Invoke("AppCreate3", objParam)
            objVdir.Properties("AppIsolated")(0) = "2"
        Else
            Throw New Exception("Only virtual directories can be assigned to application pools")
        End If
    Catch exError As Exception
        Throw New Exception("Failed in AssignVDirToAppPool with the following exception: " & exError.Message)
    End Try
End Sub
Private Shared Function AppPoolExists(ByVal strMetabasePath As String, ByVal strAppPoolName As String) As Boolean
    strMetabasePath += "/" & strAppPoolName
    Dim blExists As Boolean = False
    If System.DirectoryServices.DirectoryEntry.Exists(strMetabasePath) = True Then
        blExists = True
    End If
    Return blExists
End Function 
```

# javascript - localStorage 中的数据保存多长时间？

> ID：13123945
> 
> 赞同：-2
> 
> 时间：2012-10-29T14:47:47.450
> 
> 标签：javascript, jquery

在 JavaScript 中，你有 object `localStorage`。

该对象将活动多长时间？里面的数据保存了多久？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T14:51:04.103

这个问题最正确的答案是：你不知道。

用户可以随时擦除他/她的本地数据，并且任何类型的本地存储都受用户偏好的影响，并且被认为是极不稳定的。但是，根据 Web Storage 规范，**没有定义过期时间：**

> **过期的存储数据**
> 
> > 如果用户如此配置，用户代理可以在一段时间后自动删除存储的数据。
> > 
> > 例如，用户代理可以配置为将第三方本地存储区域视为仅会话存储，一旦用户关闭所有可以访问它的浏览上下文，就会删除数据。
> > 
> > 这会限制站点跟踪用户的能力，因为当用户向站点本身进行身份验证时（例如，通过购买或登录服务），站点将只能跨多个会话跟踪用户。
> > 
> > 但是，这也降低了 API 作为长期存储机制的实用性。如果用户不完全了解数据过期的影响，它还可能使用户的数据面临风险。

来源：[http ://dev.w3.org/html5/webstorage/](http://dev.w3.org/html5/webstorage/)

# xml - XSLT 2：将具有递增值的元素添加到列表中

> ID：13123946
> 
> 赞同：1
> 
> 时间：2012-10-29T14:47:48.620
> 
> 标签：xml, xslt, xslt-2.0

我是 XSLT 的新手，我花了好几个小时试图找出一个看似微不足道的问题的解决方案。

我有一个 xml 文档，其中包含这样的列表：

```
 <Header>
    <URLList>
      <URLItem type="type1">
        <URL></URL>
      </URLItem>
      <URLItem type="type2">
        <URL>2</URL>
      </URLItem>
    </URLList>
  </Header> 
```

如果它不存在，我现在需要为每个 URLItem 添加一个“ID”元素。ID 元素的值必须是递增的值。

xml 最终应如下所示：

```
 <Header>
    <URLList>
      <URLItem type="type1">
        <ID>1</ID>
        <URL></URL>
      </URLItem>
      <URLItem type="type2">
        <ID>2</ID>
        <URL>2</URL>
      </URLItem>
    </URLList>
  </Header> 
```

我一直在尝试各种事情，但无法使其正常工作。

例如，如果我尝试使用模板来匹配列表，我无法获得正确的增量值。ID 值是 [2,4]，但不是应该的 [1,2]... 这是 xslt：

```
 <xsl:template match="/Header/URLList/URLItem[not(child::ID)]">
    <xsl:copy>
      <ID> <xsl:value-of select="position()"/></ID>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template> 
```

我也一直在尝试使用这样的 for-each 循环：

```
 <xsl:template match="/Header/URLList">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
    <xsl:for-each select="/Header/URLList/URLItem">
        <xsl:if test="not(ID)">
          <xsl:element name="ID"><xsl:value-of select="position()" /></xsl:element>
        </xsl:if>
    </xsl:for-each>
  </xsl:template> 
```

这样我似乎得到了正确的增量，但新的 ID 元素出现在父节点上。我一直无法找到将它们附加为 URLItem 元素的子元素的方法。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T16:02:51.780

代替

```
 <xsl:template match="/Header/URLList/URLItem[not(child::ID)]">
    <xsl:copy>
      <ID> <xsl:value-of select="position()"/></ID>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template> 
```

采用

```
 <xsl:template match="/Header/URLList/URLItem[not(child::ID)]">
    <xsl:copy>
      <xsl:apply-templates select="@*"/>
      <ID><xsl:number/></ID>
      <xsl:apply-templates/>
    </xsl:copy>
  </xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T16:38:54.590

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml"/>
<xsl:template match="/">
<Header>
<xsl:apply-templates select="//URLList"/>
</Header>
</xsl:template>
<xsl:template match="URLList">
<URLList>
<xsl:for-each select="URLItem[not(child::ID)]">
<xsl:copy>
    <xsl:apply-templates select="@*"/>
      <ID> <xsl:value-of select="position()"/></ID>
      <xsl:copy-of select="URL"/>
    </xsl:copy>
  </xsl:for-each>
  </URLList>
  </xsl:template>
  <xsl:template match="@*">
<xsl:copy-of select="."/>
  </xsl:template>
</xsl:stylesheet> 
```

# facebook - 如何将 OpenGraph 中的多个图像设置为一个对象？

> ID：13123953
> 
> 赞同：0
> 
> 时间：2012-10-29T14:48:02.717
> 
> 标签：facebook, object, action, facebook-opengraph

OpenGraph：我有一个对象 A，我在其上执行了两个不同的操作：B 和 C。两个操作的对象具有相同的 url，但我想设置不同的图标 (og:image)。

可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:47:12.250

是的，当然可以。在发布操作时，传递带有图像参数的 object_url，您可以获取并放入对象脚本中的 og:image 标记中。例如，如果您使用[php](/questions/tagged/php "显示标记为“php”的问题")：

发布动作：

```
$facebook->api("me/app_namaspace:action_name","POST",array('object_name'=>"$object_url?pic=$image_url, 'access_token'=>$access_token)); 
```

假设 object_name.php 有对象元标记：

```
//object_name.php
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# postappfg: http://ogp.me/ns/fb/app_namespace#">
<title></title> 
  <meta property="fb:app_id"     content="appid" /> 
  <meta property="og:type"       content="app_namespace:object_name" /> 
  <meta property="og:title"      content="title" />
  <meta property="og:image"      content="<?php echo $_GET['pic'];?>"/> 
   </head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:15:32.077

Smita 你忘了缓存。一旦注册了一个对象， og:image 就是曾经注册过的，而不是新的。当然，如果您使用 Facebook 调试器，您会看到不同的画面，但这是因为 Facebook 调试器“重新抓取”对象并重置数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:08:37.097

如果我们遵循 Open graph 协议，一个 Open Graph 对象由一张图片定义。但它存在一种改变 Open Graph 对象图片的方法：

为您的对象定义一个默认的 og:image，因为它是强制性的，并且当您发布活动时，您必须添加一个带有图片 URL 的“image[0][url]”属性。og:image 图片将被覆盖。例子：

https://graph.facebook.com/me/mywhiskyapp:buy?whisky=http://samples.ogp.me/306369449462168&access_token=[...]&method=post&image[0][url]=http://img .diytrade.com/cdimg/339590/1362083/0/1144228175/WHISKY.jpg

# symfony - Symfony2：如何强制路由参数不在模式中？

> ID：13123956
> 
> 赞同：1
> 
> 时间：2012-10-29T14:48:16.313
> 
> 标签：symfony, routing

我想给一些路由规则加一个参数*xyz*，但是pattern中没有指定这个参数，如下：

```
homepage:
    pattern:   /
    defaults:  { _controller: MyBundle:Page:home, xyz: true }

contact:
    pattern:   /contact
    defaults:  { _controller: MyBundle:Page:contact }

gallery:
    pattern:   /gallery
    defaults:  { _controller: MyBundle:Page:gallery, xyz: true } 
```

我尝试了此路由配置，但在调用*主页*或*图库*URL时未发布我的参数*xyz 。*

 **这是我的 Twig 页面（例如）：

```
...
<a href="{{ path('gallery') }}">my test link</a>
... 
```

结果是：

```
<a href="/gallery">我的测试链接</a>

```

我的例外是当我点击这个链接时，我的*xyz*参数会被发送。

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T14:51:11.847

使用`attributes`参数包而不是*GET*一个

```
$request->attributes->get('xyz') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T01:27:06.490

如果您将 $xyz 添加到控制器操作方法签名中，则 $xyz 将存在并可访问。

`public function homeAction($xyz) { // Code goes here }`

`public function galleryAction($xyz) { // Code goes here }`**

# delay - .Net 4.5 和 Task.Yield vs Task.Delay 作为 DoEvents 的替代品？使用哪个？

> ID：13123957
> 
> 赞同：3
> 
> 时间：2012-10-29T14:48:19.400
> 
> 标签：delay, .net-4.5, yield, doevents, async-await

我一直在阅读 .Net 4.5 中引入的 async/await 语法并有所了解。

我找到了简单的示例，其中 Task.Yield 是要走的路，而不是 Application.DoEvents。我尝试了其中一个样本（填空）

带有 1 个按钮的 Form1 上的代码：

```
public async void button1_Click(object sender, EventArgs e) {
    var list = new List<int>();
    for (int i = 0; i < 10000; i++) {
        list.Add(i);
    }
    for (int i = 0; i < list.Count; i++) {
        Process(list[i]);
        await Task.Yield();
        //await Task.Delay(1);
    }
}

public static void Process(int i) {
    Debug.WriteLine(i);
} 
```

但是，运行此代码时，UI 线程被阻塞，或者我认为它被阻塞，因为在代码运行时我无法移动窗口。如果我注释掉 Task.Yield() 并改用 Task.Delay(1) 行，则 GUI 会响应。

那么我在这里误解了什么吗？我知道使用 DoEvents 等是不好的做法，但我有一些我负责的遗留代码使用它，我的目标是用 Yield 替换它，因为它是最佳选择。但首先我需要用 async/await 暖和起来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T15:13:15.203

`async`不会神奇地使您的代码变好。`Yield`不是`DoEvents`（这是邪恶的）的直接替代品。更改代码的对齐方式需要一些工作。

只要您不需要 UI 上下文，您就可以将您的工作推送到线程池：

```
public async void button1_Click(object sender, EventArgs e) {
  await Task.Run(() => {
    var list = new List<int>();
    for (int i = 0; i < 10000; i++) {
      list.Add(i);
    }
    for (int i = 0; i < list.Count; i++) {
      Process(list[i]);
    }
  });
} 
```

`IProgress<T>`或者，您可以考虑使用或`Task.Run`用于非 UI 工作来分解特定于 UI 的部分：

```
public async void button1_Click(object sender, EventArgs e) {
  var list = new List<int>();
  await Task.Run(() => {
    for (int i = 0; i < 10000; i++) {
      list.Add(i);
    }
  });

  for (int i = 0; i < list.Count; i++) {
    await ProcessAsync(list[i]);
  }
}

public static async Task ProcessAsync(int i) {
  await Task.Run(() => { ... }); // background
  myUi.Text = i.ToString() + " working"; // ui
  await Task.Run(() => { ... }); // more background
  myUi.Text = i.ToString() + " complete"; // ui
} 
```

# c# - 实现 IErrorHandler 时出错 - 无法添加行为扩展

> ID：13123958
> 
> 赞同：1
> 
> 时间：2012-10-29T14:48:21.760
> 
> 标签：c#, wcf, ierrorhandler

我使用这两篇​​文章作为实现 IErrorHandler 的参考：

[ErrorHandler 似乎没有...](https://stackoverflow.com/questions/3036692/ierrorhandler-doesnt-seem-to-be-handling-my-errors-in-wcf-any-ideas)

[罗伊·普里姆罗斯的博客文章](http://www.neovolve.com/post/2008/04/07/implementing-ierrorhandler.aspx)

**（我正在使用 .net Framework 3.5。）**

但是，我遇到了一些麻烦 - 每当我尝试启动服务时，都会收到以下错误：

*System.Configuration.ConfigurationErrorsException：无法将行为扩展“errorHandlerExtension”添加到名为“Test.TestService.Service1Behavior”的服务行为，因为基础行为类型未实现 IServiceBehavior 接口。*

这是我的代码和配置文件：

**错误处理程序扩展.cs：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel.Configuration;
using System.Configuration;
using System.ServiceModel;
using System.ServiceModel.Channels;
using System.ServiceModel.Description;
using System.ServiceModel.Dispatcher;
using System.Collections.ObjectModel;

namespace Test.TestService
{
class ErrorHandlerExtension:BehaviorExtensionElement,IServiceBehavior
{
    public override Type BehaviorType
    {
        get { return typeof(ErrorHandler); }
    }
    protected override object CreateBehavior()
    {
        return new ErrorHandler();
    }
    void IServiceBehavior.AddBindingParameters(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase, Collection<ServiceEndpoint> endpoints, BindingParameterCollection bindingParameters)
    {

    }
    private IErrorHandler GetInstance()
    {
        return new ErrorHandler();
    }
    void IServiceBehavior.ApplyDispatchBehavior(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
        IErrorHandler errorHandlerInstance = GetInstance();
        foreach (ChannelDispatcher dispatcher in serviceHostBase.ChannelDispatchers)
        {
            dispatcher.ErrorHandlers.Add(errorHandlerInstance);
        }
    }

    void IServiceBehavior.Validate(ServiceDescription serviceDescription, ServiceHostBase serviceHostBase)
    {
        foreach (ServiceEndpoint endpoint in serviceDescription.Endpoints)
        {
            if (endpoint.Contract.Name.Equals("IMetadataExchange") &&
                endpoint.Contract.Namespace.Equals("http://schemas.microsoft.com/2006/04/mex"))
                continue;

            foreach (OperationDescription description in endpoint.Contract.Operations)
            {
                if (description.Faults.Count == 0)
                {
                    throw new InvalidOperationException("FaultContractAttribute not found on this method");
                }
            }
        }
    }

} 
```

}

**网络配置：**

```
<system.serviceModel>  
  <extensions>
      <behaviorExtensions>
        <add name="errorHandlerExtension"
          type="Test.TestService.ErrorHandlerExtension, Test.TestService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
      </behaviorExtensions>
    </extensions>

    <behaviors>
      <serviceBehaviors>
        <behavior name="Test.TestService.Service1Behavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <errorHandlerExtension />
       </behavior>
     </serviceBehaviors>
    </behaviors>
</system.serviceModel> 
```

每当我摆脱 errorHandlerExtension / 元素时，该服务都可以正常工作，但是只要我包含 errorHandlerExtension 元素（带有错误），它就无法启动。我是 WCF 的新手，很困惑。有任何想法吗？

编辑：添加**ErrorHandler.cs**：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;
using System.ServiceModel.Channels;
using System.ServiceModel.Description;
using System.ServiceModel.Dispatcher;
using System.Collections.ObjectModel;

namespace Test.TestService
{
public class ErrorHandler:IErrorHandler
{

    public bool HandleError(Exception error)
    {

        LogError("UnhandledError: "+ error);
        return true;
    }

    public void ProvideFault(Exception error, MessageVersion version, ref Message fault)
    {
        FaultException faultException = new FaultException("Exception message:ProvideFault");
        MessageFault messageFault = faultException.CreateMessageFault();
        fault = Message.CreateMessage(version, messageFault, faultException.Action);
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T20:04:19.070

就像我上面所说的，在 ErrorHandler 中实现 IServiceBehavior 而不是 ErrorHandlerExtension 解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-11T20:04:03.013

我遇到了完全相同的问题。原来我犯了复制+粘贴错误。你的问题 - 就像我的一样 - 如果`BehaviorType`会返回`typeof(ErrorHandlerExtension)`并且`CreateBehavior`会返回也可以解决`new ErrorHandlerExtension()`

# django - django数据库连接错误与sql 2003

> ID：13123964
> 
> 赞同：0
> 
> 时间：2012-10-29T14:48:36.213
> 
> 标签：django

我正在使用 django 1.3.3 python 2.7 django-mssql = 1.2 我正在尝试连接到 sql2003。

我收到以下异常：

渲染时捕获 OperationalError：(com_error(-2147352567, '发生异常。', (0, u'Microsoft SQL Server Native Client ClientName', u'无法支持请求的属性。', None, 0, -2147217887), None ), '打开连接时出错：DATA SOURCE=host;Initial Catalog=DatabaseName;UID=userid;PWD=password;PROVIDER=SQLNCLI10;MARS Connection=True;DataTypeCompatibility=80;MARS Connection=True;')

是否有任何额外的东西应该安装

# java - 休眠会话保存

> ID：13123968
> 
> 赞同：0
> 
> 时间：2012-10-29T14:48:45.630
> 
> 标签：java, hibernate, session

我正在尝试向我的论坛添加主题，每次创建论坛对象时都会收到此错误：

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.hibernate.AssertionFailure: null id in com.versusfootball.hibernate.entity.ForumTopic entry (don't flush the Session after an exception occurs)
    org.hibernate.event.def.DefaultFlushEntityEventListener.checkId(DefaultFlushEntityEventListener.java:82)
    org.hibernate.event.def.DefaultFlushEntityEventListener.getValues(DefaultFlushEntityEventListener.java:190)
    org.hibernate.event.def.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:147)
    org.hibernate.event.def.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:219)
    org.hibernate.event.def.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:99)
    org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:50)
    org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1216)
    com.versusfootball.dao.DAO.rollback(DAO.java:46)
    com.versusfootball.dao.ForumTopicDAO.create(ForumTopicDAO.java:31)
    com.versusfootball.struts.main.forum.SaveForumSubject.execute(SaveForumSubject.java:46)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:616)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:133)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:142)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:166)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:485)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:395)
    com.versusfootball.filters.InitSession.doFilter(InitSession.java:81)
    com.versusfootball.filters.DisableUrlSessionFilter.doFilter(DisableUrlSessionFilter.java:87)
note The full stack trace of the root cause is available in the Apache Tomcat/6.0.29 logs.

Apache Tomcat/6.0.29 
```

这是我的论坛构造函数：

```
public Forum create (Forum forum) throws AppException {
    try {
        begin();
        if(forum.getId() != null) {
            getSession().merge(forum);
        }
        else {
            getSession().save(forum);
        }
        commit();
        close();
        return forum;
    }
    catch (HibernateException e) {
        log.error("Error creating forum : " + e.getCause().getMessage());
        rollback();
        throw new AppException(e.getCause().getMessage());
    }
} 
```

这是我的提交执行：

```
package com.versusfootball.struts.main.forum;

import java.util.Date;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;

import org.apache.log4j.Logger;
import org.apache.struts2.interceptor.ServletRequestAware;

import com.opensymphony.xwork2.ActionSupport;
import com.versusfootball.dao.ForumDAO;
import com.versusfootball.dao.ForumMessageDAO;
import com.versusfootball.dao.ForumTopicDAO;
import com.versusfootball.exceptions.AppException;
import com.versusfootball.hibernate.entity.Forum;
import com.versusfootball.hibernate.entity.ForumMessage;
import com.versusfootball.hibernate.entity.ForumTopic;
import com.versusfootball.hibernate.entity.Personne;

public class SaveForumSubject extends ActionSupport implements ServletRequestAware {
    /**
     * 
     */
    private static final long serialVersionUID = -2131201082127318301L;
    private static final Logger log = Logger.getLogger(SaveForumSubject.class);  

    public String execute() {
        try {
            HttpSession session = request.getSession();
            Personne usager = (Personne)session.getAttribute("usagerFoot");
            if(usager == null) {
                return ERROR;
            }

            Date today = new Date();

            forum = forumDAO.getById(forumId);
            ForumTopic newTopic = new ForumTopic();
            newTopic.setNbMessages(0);
            newTopic.setNbViews(0);
            newTopic.setForum(forum);
            newTopic.setCreationDate(today);
            newTopic.setTitle(msgTitle);
            newTopic.setAuthor(usager);
            newTopic = ftDAO.create(newTopic);
            subjectId = newTopic.getId();
            ForumMessage newMsg = new ForumMessage();

            newMsg.setAuthor(usager);            
            newMsg.setMessageDate(today);
            message = message.replaceAll("\n", "<br />");
            newMsg.setText(message);            
            newMsg.setTopic(newTopic);
            newMsg.setNiveau(0);
            newMsg = fmDAO.create(newMsg);

            messageId = newMsg.getId();

            forum.setNbMessages(forum.getNbMessages() + 1);
            forum.setNbTopics(forum.getNbTopics() + 1);
            forum.setLastMessage(newMsg);
            newTopic.setLastMessage(newMsg);
            newTopic = ftDAO.create(newTopic);

            forumDAO.create(forum);

        } catch (AppException e) {
            // TODO Auto-generated catch block
            log.error(e.getMessage());
        }
        return SUCCESS;     
    }

    private ForumDAO forumDAO = new ForumDAO();
    private ForumMessageDAO fmDAO = new ForumMessageDAO();
    private ForumTopicDAO ftDAO = new ForumTopicDAO();

    private HttpServletRequest request;

    private String msgTitle = "";
    private String message = "";
    private Integer forumId;
    private Integer messageId;
    private Integer subjectId;

    private Forum forum;

    public void setMsgTitle(String msgTitle) {
        this.msgTitle = msgTitle;
    }
    public String getMsgTitle() {
        return msgTitle;
    }

    public void setMessage(String message) {
        this.message = message;
    }
    public String getMessage() {
        return message;
    }

    public void setForumId(Integer forumId) {
        this.forumId = forumId;
    }
    public Integer getForumId() {
        return forumId;
    }

    public Integer getMessageId() {
        return messageId;
    }

    public Forum getForum() {
        return forum;
    }

    public Integer getSubjectId() {
        return subjectId;
    }

    @Override
    public void setServletRequest(HttpServletRequest request) {
        this.request = request;        
    }
} 
```

有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:24:37.080

您需要检查您的 id（与主键对应的字段）。它必须为空。你是如何生成id的？您是否为它定义了适当的策略？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T15:02:05.130

从你的 catch 块调用 rollback() 时发生异常。

`getSession().save(forum);`通话中或`commit();`通话中可能存在异常。

（消息说 id 为空）。

无论如何，您只是通过记录`getMessage()`而不是整个异常来隐藏真正的异常。

尝试打印原始异常，以便弄清楚发生了什么。

# c++ - 用 C++ 字符串函数自动替换 s printf 函数

> ID：13123972
> 
> 赞同：4
> 
> 时间：2012-10-29T14:49:02.503
> 
> 标签：c++, string, emacs, sed, text-editor

我们有大量使用 sprintf 和 cstrings 来构造文件名的“演示”代码。我想用 c++ 字符串替换它以允许非常长的文件名，并且因为它提供了更简洁的语法。

所以本质上我们需要像这样转换块

```
ofstream some_file;
char filename[100];
sprintf(filename,"%s/soln%i.dat",a.c_str(), b);
some_file.open(filename); 
```

变成类似的东西

```
ofstream some_file((a + "soln" + to_string(b) + ".dat").c_str()); 
```

然而，因为这在很多地方都使用过，所以我想使用某种自动转换（即 sed 表达式、emacs 函数/宏、Visual Studio？等）。困难（我可以看到）是：

1.  sprintf 语句的内容可以是任何内容。（所以我们需要解析一个 sprintf 语句？）

2.  some_file 和 filename 可以在任何地方声明，可以命名为任何名称，并且经常被重用于输出到多个文件。（所以我们需要解析C++？）

这可能/可行吗？

对于加分，我们是否可以避免在字符串上调用 .c_str() （不更改 ofstream 构造函数）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:43:41.980

使用[Boost 格式](http://www.boost.org/doc/libs/1_51_0/libs/format/doc/format.html)库。它在 C++ 中实现 printf 类型的格式，生成 C++ 字符串作为输出。调用类似，但略有不同。你的例子是：

```
string fname = boost::format("%s/soln%i.dat") % a % b;
ofstream some_file(fname.c_str()); 
```

所以基本上，您需要识别字符缓冲区，并将其替换为字符串；识别 sprintf 语句，将其标记为参数（同时注意引号等），并使用 % 而不是 重写它，第一个参数包含在 boost::format 中。听起来有点吓人，但并非不可能。一个更大的问题是你的块可能并不都是那样的，通常识别这些情况会非常困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T09:37:23.817

这里有一些更简单的东西，没有 Yassnippet：

```
(defun sprintf-to-ofstream (file)
  (interactive "sFile to print to: ")
  (back-to-indentation)
  (let* ((start (point))
         arglist
         sprintf-args
         ofstream-args
         (end 
          (save-excursion
            (move-end-of-line 1)
            (point)))
         (line (buffer-substring-no-properties start end)))
    (unless (string= (substring line 0 7) "sprintf")
      (error "No `sprintf' at this line"))
    (setq arglist
          (split-string
           (substring line (1+ (position ?\( line))
                      (position ?\) line :from-end t))
           "\\s-*,\\s-*")
          sprintf-args
          (split-string (substring (cadr arglist) 1 -1)
                        "%[^[:alpha:]%#]*[[:alpha:]%#]")
          ofstream-args
          (with-output-to-string
            (princ (concat "\"" (car sprintf-args) "\""))
            (setq sprintf-args (cdr sprintf-args))
            (dotimes (i (length sprintf-args))
              (princ " + ")
              (when (< (+ i 2) (length arglist))
                (princ (nth (+ i 2) arglist))
                (princ " + "))
              (princ (concat "\"" (nth i sprintf-args) "\"")))))
    (kill-region start end)
    (insert (concat "ofstream " file "((" ofstream-args ").c_str());" )))) 
```

您可以将其绑定到您喜欢的任何键并像这样使用：

*   将点移动到包含`sprintf`您要替换的行，例如通过执行`M-%``sprintf`，然后调用此函数。它会提示你给它你想要打印消息的文件的名称（可能我可以让它更复杂，并向上搜索声明 ofstream 的地方，但如果你说它可能已经在随意的地方，这听起来像是浪费精力）。
*   按`RET`，在此之后，该函数会将行更改为如下所示：

```
ofstream foo(("" + a.c_str() + "/soln" + b + ".dat").c_str()); 
```

给出你原来的例子。显然，如果您认为添加`to_string()`环绕参数的可能性更大，那么这很容易做到，只要付出更多努力，也很容易避免连接空字符串，但有时它可能会改变效果 /操作员的解释`+`，所以我决定保持这样。今天晚些时候，我将尝试将其制成一个 yassnippet 脚本，以便可以交互地跳转到被替换字符串中的不确定位置，并且也可以进行一些预定义的替换。

# ruby - Ruby/Gmail gem 抓取已发送消息

> ID：13123977
> 
> 赞同：2
> 
> 时间：2012-10-29T14:49:04.480
> 
> 标签：ruby, gmail

如何从 gmail gem 收到发送的消息？我在文档中看不到该选项：[http ://rubydoc.info/gems/gmail](http://rubydoc.info/gems/gmail)

有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T14:50:49.833

已发送消息应该是一个标签。

```
gmail.label("Sent Mail").emails 
```

我现在确定这个名字了。您可以使用获取所有标签的列表

```
gmail.labels.all 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T14:53:57.010

可能这应该适合你

```
gmail.label("sent").emails {|email| ... } 
```

# mysql - 查找两个样本之间的值差异

> ID：13123985
> 
> 赞同：1
> 
> 时间：2012-10-29T14:49:26.963
> 
> 标签：mysql

表 EXPRESSION2 包含两个样本的数据。

表格格式：

```
Number  ProbeID     SampleID  ExperimID  Value  Type
  1     27574       1         2          6.35   AFFE
  2     35574       1         2          3.25   AFFE 
```

...ETC

如何找到这两个样本之间探针表达（值）的前 100 个最大差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T15:23:26.850

```
SELECT MAX(`Value`)-MIN(`Value`) AS `delta`
FROM `EXPRESSION2`
GROUP BY `ExperimID`
ORDER BY `delta` DESC
LIMIT 100; 
```

# android - 中心地图转到错误的坐标

> ID：13123988
> 
> 赞同：0
> 
> 时间：2012-10-29T14:49:37.853
> 
> 标签：android, openstreetmap, osmdroid

我正在制作一个使用 OpenStreetMap 的 android 应用程序。我有自己的瓷砖服务器，用于提供街道地图。

当我通过将坐标作为 GeoPoint 传递来告诉应用程序以地图上的特定区域为中心时，它以非洲的某个地方为中心，而它应该以爱丁堡为中心。

这是代码：

// osm 地图视图 MapView osmMap;

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    osmMap = (MapView) findViewById(R.id.mapview);
    osmMap.setMultiTouchControls(true);

    // Create custom map source pointing to Tile Server
    XYTileSource myMapSource = new XYTileSource("myMap", null, 0, 16, 256, ".png", Constants.LOCAL_SERVER_URL);

    // Set the source and default map coordinates/zoom
    osmMap.setTileSource(myMapSource);

    osmMap.getController().animateTo(new GeoPoint(55.95223359877632*1e6, -3.188550710678032*1e6));
    osmMap.getController().setZoom(Constants.DEFAULT_ZOOM); 
} 
```

有谁知道我怎样才能让坐标与地图正确对齐？

谢谢

# c - 透明地将多个流视为一个（流大小已知）

> ID：13123990
> 
> 赞同：3
> 
> 时间：2012-10-29T14:49:45.203
> 
> 标签：c, stream, intercept

我要解决的问题是优化某些第 3 方代码的输入，该代码具有命令行“program input_file output_file”。第 3 方代码使用标准 fopen、fseek、fread 等处理 input_file。我希望能够使用多个输入文件，将它们视为单个文件，就好像它们按照提供的顺序连接起来一样。我有第 3 方代码，但想尽可能少地修改它。目前正在连接文件，然后使用连接文件作为输入调用程序，我试图消除连接，因为文件可能很大并且需要时间。从标准输入读取并不能满足我的要求，因为程序将标准输入写入文件以允许搜索。

我正在研究的解决方案是接受 input_file 命令行参数作为连接的多个文件（？分隔），并将 concat_stream.h 添加到程序源的开头（包括 stdio 之后）。concat_stream.h 通过拦截标准调用实现了将多个流透明地视为一个流，并使用流的一些全局数组和伴随数据实现连接流。下面以 concat_stream.h 的一小部分为例：

```
 FILE * fopen_concat_streams (char * filename, char * mode )
    {
      if( strchr(filename, '?')!=NULL )/*do we want a concat_stream?*/
        return concat_streams_init(filename, mode);/*setup concat_stream, return first stream as id*/
      else
        return fopen(filename, mode);/*standard library implementation*/
    }

    long int ftell_concat_streams( FILE * stream )
    {
      unsigned int index=is_stream_concat(stream);/*work out if stream refers to a concat_stream or regular stream*/
      if(index!=CONCAT_STREAMS_MAX)/*is stream a concat_stream?*/
      {
        ...
        return answer;/*work out and return location in concat_stream*/
      }
      else
        return ftell(stream);/*standard library implementation*/
    }

    #define fopen(x, y) fopen_concat_streams(x, y)
    #define ftell(x) ftell_concat_streams(x) 
```

我的问题是我是否走在正确的轨道上，有没有更简单的方法呢？如果有一个图书馆可以帮我解决这个问题，我会改用它，它似乎应该是一件很受欢迎的事情，但到目前为止我还没有找到任何东西。解决初始问题的完全不同的方法也将被接受，多个流作为一个只是我对最简单解决方案的最佳猜测。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T15:04:57.630

如果您知道所有文件的路径和大小，那么这可能会起作用。您尝试实现的是创建一个由所有单独部分组成的虚拟文件。

您将需要创建一个数据结构，其中包含每个文件的文件句柄和偏移量（在虚拟文件中）。然后你可以在这个结构中搜索真正的文件句柄并计算正确的偏移量。

需要注意的问题：

*   如果您通过一次`fread()`调用读取文件的末尾

其他选项：

*   如果您不需要`fseek()`，您可以尝试教代码理解`-`为别名`stdin`并用于`cat`连接文件：`cat file1 file2 file3 | program - output`

*   [使用FUSE API](http://fuse.sourceforge.net/)编写文件系统。在您的情况下，这并不像听起来那么可怕。这将允许您保持原始代码不变。相反，您将使用 FUSE 使文件看起来像一个巨大的文件。

    *   [FUSE Python 教程](http://sourceforge.net/apps/mediawiki/fuse/index.php?title=FUSE_Python_tutorial)
    *   [FUSE - 用户空间中的文件系统第 1](http://pysnippet.blogspot.ch/2009/11/fuse-filesystem-in-userspace-part-1.html)部分（[第 2 部分](http://pysnippet.blogspot.ch/2009/11/fuse-filesystem-in-userspace-part-2.html)）（[第 3 部分](http://pysnippet.blogspot.ch/2009/12/fuse-filesystem-in-userspace-part-3.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:34:38.523

听起来您想`bash`通过“进程替换”来实现 4.x 实现的目标：

```
the_program <(cat file1 file2 file3) output 
```

也就是说，您已将输入文件作为程序可以打开和读取的`cat`命名流（它可能是一个名称，例如）发送。`/dev/fd/64`这避免了对程序的所有修改。

这是否满足您的要求（除了需要C代码来实现效果）？一个可能的问题是程序是否需要可查找的文件；目前尚不清楚您是否能够在打开的文件流上进行搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T10:02:25.093

这是一个实现基础的截断拦截解决方案。有限的测试，有限的错误检查，几乎像羽毛一样健壮。并非所有功能都是完整的，并且很多功能都丢失了（如果您的代码使用 fseeki64，请在此处实现等）。这是我回避的解决方案（将按照建议尝试 fuse），但如果其他人想这样做，这可能是一个起点。

主要的

```
#include <stdio>
#include "concat_streams.h"
int main(int argc, char*argv[])
{
  char buf[16];
  concat_streams_global_init('?');
  FILE* file = fopen( "file1?file2?file3?file4", "rb" );
  ...
  fseek( file, 12, SEEK_SET);
  ...
  fread(buf, 1, 16, file);
  ...
  fclose(file);
} 
```

concat_streams.h

```
#define CONCAT_STREAMS_MAX 10 /*max number of concat streams*/
FILE*** concat_streams=NULL;
size_t** concat_streams_boundaries=NULL;
size_t* concat_streams_count=NULL;
size_t* concat_streams_selector=NULL;
size_t* concat_streams_tot_size=NULL;
char concat_streams_delim='?';

/*return index of stream if it is concat, CONCAT_STREAMS_MAX otherwise*/
int is_stream_concat(FILE* stream)
{
  unsigned int index=0;
  while(index<CONCAT_STREAMS_MAX)
  {
    if(concat_streams[index]!=NULL)
    {
      if(concat_streams[index][0]==stream)
        break;
    }
    ++index;
  }
  return index;
}

/*Initialise concat_stream store*/
void concat_streams_global_init(char delim_use)
{
  concat_streams_delim=delim_use;

  concat_streams=(FILE***) malloc(sizeof(FILE**)*CONCAT_STREAMS_MAX);
  concat_streams_boundaries=(size_t**) malloc(sizeof(size_t*)*CONCAT_STREAMS_MAX);
  concat_streams_count=(size_t*) malloc(sizeof(size_t)*CONCAT_STREAMS_MAX);
  concat_streams_selector=(size_t*) malloc(sizeof(size_t)*CONCAT_STREAMS_MAX);
  concat_streams_tot_size=(size_t*) malloc(sizeof(size_t)*CONCAT_STREAMS_MAX);

  memset(concat_streams, 0, sizeof(FILE**)*CONCAT_STREAMS_MAX );
  memset(concat_streams_boundaries, 0, sizeof(size_t*)*CONCAT_STREAMS_MAX);
  memset(concat_streams_count, 0, sizeof(size_t)*CONCAT_STREAMS_MAX );
  memset(concat_streams_selector, 0, sizeof(size_t)*CONCAT_STREAMS_MAX );
  memset(concat_streams_tot_size, 0, sizeof(size_t)*CONCAT_STREAMS_MAX );
}

/*The meat of fopen*/
FILE* concat_streams_init(char* files_question_delim, char * mode)
{
  unsigned int concat_streams_next_set=0;
  while(concat_streams_next_set<CONCAT_STREAMS_MAX)
  {
    if(concat_streams[concat_streams_next_set]==NULL)
      break;
    ++concat_streams_next_set;
  }
  if(concat_streams_next_set==CONCAT_STREAMS_MAX)
    return NULL;
  char*files_question_delim_cpy=NULL;
  unsigned int i=0;
  while(files_question_delim[i]!=0)
  {
    if(files_question_delim[i]=='?')
      ++concat_streams_count[concat_streams_next_set];
    ++i;
  }
  ++concat_streams_count[concat_streams_next_set];

  files_question_delim_cpy=(char*)malloc(i);
  memcpy(files_question_delim_cpy, files_question_delim, i);

  concat_streams[concat_streams_next_set]=(FILE**)malloc(sizeof(FILE*)*concat_streams_count[concat_streams_next_set]);
  concat_streams_boundaries[concat_streams_next_set]=(size_t*)malloc(sizeof(size_t)*(concat_streams_count[concat_streams_next_set]+1));
  concat_streams_boundaries[concat_streams_next_set][0]=0;

  char* next_file;
  next_file=strtok(files_question_delim_cpy, "?");
  while(next_file!=NULL)
  {
    concat_streams[concat_streams_next_set][concat_streams_selector[concat_streams_next_set]]=fopen(next_file, "rb");
    if(concat_streams[concat_streams_next_set][concat_streams_selector[concat_streams_next_set]]==NULL)
    {
      fclose_concat_streams(concat_streams[concat_streams_next_set][0]);
      return NULL;/*fopen failed*/
    }
    fseek(concat_streams[concat_streams_next_set][concat_streams_selector[concat_streams_next_set]], 0, SEEK_END);
    concat_streams_boundaries[concat_streams_next_set][1+concat_streams_selector[concat_streams_next_set]] = concat_streams_boundaries[concat_streams_next_set][concat_streams_selector[concat_streams_next_set]] + ftell(concat_streams[concat_streams_next_set][concat_streams_selector[concat_streams_next_set]]);
    concat_streams_tot_size[concat_streams_next_set]+=ftell(concat_streams[concat_streams_next_set][concat_streams_selector[concat_streams_next_set]]);
    rewind(concat_streams[concat_streams_next_set][concat_streams_selector[concat_streams_next_set]]);
    ++concat_streams_selector[concat_streams_next_set];
    next_file=strtok(NULL, "?");
  }
  concat_streams_selector[concat_streams_next_set]=0;

  free(files_question_delim_cpy);
  return concat_streams[concat_streams_next_set][0];
}

FILE * fopen_concat_streams (char * filename, char * mode )
{
  if( strchr(filename, '?')!=NULL )
    return concat_streams_init(filename, mode);
  else
    return fopen(filename, mode);
}

/*only implemented origin==SEEK_SET*/
int fseek_concat_streams( FILE * stream, long int offset, int origin )
{
  unsigned int i=0;
  unsigned int index=is_stream_concat(stream);
  if(index!=CONCAT_STREAMS_MAX)
  {
    switch(origin)
    {
      case SEEK_SET:
        while(i<concat_streams_count[index])
        {
          if(offset>=concat_streams_boundaries[index][i] && offset<concat_streams_boundaries[index][i+1])
            break;
          ++i;
        }
        if(i==concat_streams_count[index])
          return 1;/*out of range*/
        concat_streams_selector[index]=i;
        return fseek(concat_streams[index][concat_streams_selector[index]], offset-concat_streams_boundaries[index][concat_streams_selector[index]], SEEK_SET);
      default:
          puts("error, Only SEEK_SET supported when using cat streams");
        return 1;/*not implemented*/
    }
  }
  else
    return fseek(stream, offset, origin);/*just a normal file*/
}

long int ftell_concat_streams( FILE * stream )
{
  unsigned int index=is_stream_concat(stream);
  if(index!=CONCAT_STREAMS_MAX)
  {
    /*Found*/
    return concat_streams_boundaries[index][concat_streams_selector[index]] + ftell(concat_streams[index][concat_streams_selector[index]]);
  }
  else
    return ftell(stream);
}

int feof_concat_streams( FILE * stream )
{
  unsigned int index=is_stream_concat(stream);
  if(index!=CONCAT_STREAMS_MAX)
  {
    if(concat_streams_selector[index]==concat_streams_count[index])
      return 1;/*EOF*/
    else
      return 0;
  }
  else
    return feof(stream);
}

size_t fread_concat_streams (void * ptr, size_t size, size_t count, FILE * stream )
{
  size_t mult=size*count;
  size_t num_to_go=mult;
  char* buffer=NULL;
  unsigned int index=is_stream_concat(stream);
  unsigned int num_read;
  char* out_ptr=(char*)ptr;

  if(index!=CONCAT_STREAMS_MAX)
  {
    if(concat_streams_selector[index]==concat_streams_count[index])
      return 0;/*at eof*/

    buffer=(char*)malloc(2048*4096);
    while(num_to_go!=0)
    {
      num_read=fread(buffer, 1, num_to_go>=2048*4096?2048*4096:num_to_go, concat_streams[index][concat_streams_selector[index]]);
      if( num_read != (num_to_go>=2048*4096?2048*4096:num_to_go) )
      {
        if( feof(concat_streams[index][concat_streams_selector[index]])==0 )
        {
          puts("EOF not set, read error");
          memcpy(out_ptr, buffer, num_read);
          out_ptr+=num_read;
          num_to_go-=num_read;
          free(buffer);
          return mult-num_to_go;
        }
        else
        {
          rewind(concat_streams[index][concat_streams_selector[index]]);
          ++concat_streams_selector[index];
          if(concat_streams_selector[index]==concat_streams_count[index])
          {
            memcpy(out_ptr, buffer, num_read);
            out_ptr+=num_read;
            num_to_go-=num_read;
            free(buffer);
            return mult-num_to_go;
          }
          else
            rewind(concat_streams[index][concat_streams_selector[index]]);
        }
      }
      memcpy(out_ptr, buffer, num_read);
      out_ptr+=num_read;
      num_to_go-=num_read;
    }
    free(buffer);  
    return mult;
  }
  else
    return fread(ptr, size, count, stream);
}

size_t fwrite_concat_streams ( const void * ptr, size_t size, size_t count, FILE * stream )
{
  unsigned int index=is_stream_concat(stream);
  if(index!=CONCAT_STREAMS_MAX)
  {
    puts("error, writing to cat_streams not supported");
    return 0;
  }
  else
    return fwrite(ptr, size, count, stream);
}

int fclose_concat_streams ( FILE * stream )
{
  unsigned int i=0;
  unsigned int index=is_stream_concat(stream);
  if(index!=CONCAT_STREAMS_MAX)
  {
    while(i<concat_streams_count[index])
    {
      fclose(concat_streams[index][i]);
      ++i;
    }
    free(concat_streams[index]);
    concat_streams[index]=NULL;
    free(concat_streams_boundaries[index]);
    concat_streams_boundaries[index]=NULL;
    concat_streams_count[index]=0;
    concat_streams_selector[index]=0;
    concat_streams_tot_size[index]=0;
  }
  else
    return fclose(stream);
}

#define fseek(x, y, z) fseek_concat_streams(x, y, z)
#define fread(w, x, y, z) fread_concat_streams(w, x, y, z)
#define fwrite(w, x, y, z) fwrite_concat_streams(w, x, y, z)
#define fopen(x, y) fopen_concat_streams(x, y)
#define ftell(x) ftell_concat_streams(x)
#define feof(x) feof_concat_streams(x)
#define fclose(x) fclose_concat_streams(x) 
```

# ios - 创建自定义 UITableViewCell 时出现我无法识别的错误？

> ID：13123991
> 
> 赞同：0
> 
> 时间：2012-10-29T14:49:47.880
> 
> 标签：ios, xcode, uitableview

我`UITableViewCell`在我的项目中创建了一个自定义项，并使用 .xib 文件创建了它，这里有几个设置图像：

![背景、选定和主单元格视图](../Images/b1410900a3f0b92930f624d2b019250d.png)

![在此处输入图像描述](../Images/4af4c49b969fa916aaba6cf90e1f1015.png)

这是我的主单元格的图像，选定的，以及所述单元格的背景。这是主单元的链接。

据我所知，这部分工作正常。

这是我得到的错误： ![错误信息](../Images/78ec1ff88bf976a593c84aac0f8c9cee.png)

我以为是因为我试图在表格视图之前加载单元格？但是当 rootViewController 这样做时我的表格视图会加载，这不可能......这是我的表格视图代码（相关代码）：

键： `GroupCell`= 我的单元格的 .h、.m、.xib 文件的名称。

`objectivenameArray`= 包含使用 NSMutableArray 执行的 NSString 收集的服务器数据的数组。

```
- (NSInteger)tableView: (UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{  
    return [objectivenameArray count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *cellID = @"cellID";

    GroupCell *groupCell = [tableView dequeueReusableCellWithIdentifier:cellID];
    if (groupCell == nil) {
        groupCell = [[GroupCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellID];
    }

        groupCell.objectiveLabel.text = [objectivenameArray objectAtIndex:indexPath.row];

    return groupCell;
} 
```

我将补充一点，我正在使用服务器 API AFNetworking 但这应该会产生问题，因为我的所有 URLData 都已正确链接。当我尝试加载自定义单元格时，问题开始出现。有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:05:20.327

回答我自己的问题；我收到的错误是因为我仍然在我的自定义单元格 .xib 文件上打开了自动布局功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:52:46.200

看起来错误消息很清楚。

> GroupCell的-layoutSubviews的实现需要调用super

我假设您已经在 GroupCell 中覆盖了 layoutSubviews 并且您忘记将 [super layoutSubviews] 放在方法的开头。把它放进去，错误就会消失。

# c++ - C++ char 数组和向量字符串

> ID：13123994
> 
> 赞同：-3
> 
> 时间：2012-10-29T14:49:59.180
> 
> 标签：c++, arrays, string, char

我想将 chars 数组中的单词复制到向量字符串中。我编写了以下代码，它给了我错误，即未在此范围内声明字符串、向量、单词，并且我在头文件中声明了函数你可以帮助？？

这是代码：

```
vector<string> split(char sentence[])
{
    vector<string> ans(100);
    int count=0;
    for(unsigned int i=0;i<sentence.size();i++)
    {
    if(sentence[i]==' ')
        count=count+1;
    ans[count]=ans[count]+sentence[i];
    }
    return ans;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T14:52:02.360

A`char[]`是原始类型，没有成员函数，例如没有`.size()`...

你确定你知道你在做什么吗？这一点，以及缺少标题（Luchian 已经评论过）给人的印象是你没有，真的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:50:59.570

您需要包含标题`<vector>`并`<string>`限定使用 with`std::`或 use`using`指令。应优先考虑全名资格：

```
std::string
std::vector 
```

编辑：我没有注意到`char*::size`错误，因为我专注于您发布的错误消息（“未在此范围内声明”）。有些人认为这值得一票否决......无论如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T15:51:52.503

你真的应该只使用内置库或其他东西，并用正则表达式拆分字符串。

而不是使用 a`char[]`使用 a `string`。它很容易转换`char[]`成那个，而且它可能是一个字符串开头，所以你应该早点把它剪掉。

要形成你的`vector<string>`，你所要做的就是：

```
#include <regex.h>
#include <string.h>
#include <vector.h>

using namespace std;

vector<string> split(string s){
    regex r ("\\w+"); //regex matches whole words, (greedy, so no fragment words)
    regex_iterator<string::iterator> rit ( s.begin(), s.end(), r );
    regex_iterator<string::iterator> rend; //iterators to iterate thru words
    vector<string> result<regex_iterator>(rit, rend);
    return result;  //iterates through the matches to fill the vector
} 
```

这可能需要解决一两个错误（我只是有点生疏），并且还可以使用内联语句大大压缩。

记住：c++ 的魔力有两种形式：迭代器和内联语句。