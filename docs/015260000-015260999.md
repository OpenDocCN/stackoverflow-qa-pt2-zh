# StackOverflow 问答 15260000-15260999

# python - Swig 和 Python - 不同的对象实例化

> ID：15260000
> 
> 赞同：1
> 
> 时间：2013-03-06T23:09:04.983
> 
> 标签：python, swig

我有一个关于在 Python 端生成的 swig 包装对象和在 C++ 端生成的包装对象的问题。假设我有以下简单的 C++ 类定义

```
#include <vector>

class Sphere
{
public:
    Sphere(){};
};

class Container
{
public:
    Container() : data_(0) {};

    void add() {
        data_.push_back(Sphere());
    }

    Sphere & get(int i) { return data_[i]; }

    std::vector<Sphere> data_;
}; 
```

和以下 swig 设置

```
%module engine
%{
#define SWIG_FILE_WITH_INIT
#include "sphere.h"
%}

// -------------------------------------------------------------------------
// Header files that should be parsed by SWIG
// -------------------------------------------------------------------------
%feature("pythonprepend") Sphere::Sphere() %{
    print 'Hello'
%}
%include "sphere.h" 
```

如果我然后在 Python 中执行以下操作

```
import engine
sphere_0 = engine.Sphere()
container = engine.Container()
container.add()
sphere_1 = container.get(0) 
```

然后包装的 Sphere 类的第一个实例确实调用了Python 包装接口的**init**方法（打印了“Hello”）。

但是，在 C++ 端生成实例的第二种情况不会（不打印“Hello”）。

由于我的目标是能够在构造对象时为其添加额外的 Python 功能，因此我很高兴听到是否有人对实现这一目标的正确方法有任何指示 - 对于上述两种实例化场景。

最好的祝福，

麦兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:52:37.383

`pythoncode` 我通常用接口文件中的显式块来做这样的事情：

```
%pythoncode %{
def _special_python_member_function(self):
     print "hello"
     self.rotate() # some function of Sphere
Sphere.new_functionality=_special_python_member_function
%} 
```

因此，除了 SWIG 接口提供的功能之外，您还可以向该类添加任意 python 功能。您可能想要/需要`rename`一些 C 功能，但这可以让您获得所需的所有成员*函数*。

我从来没有尝试过以`__init__`这种方式重新映射，所以我不知道它会如何表现。假设它不起作用，您将无法确保 python 对象在构造时具有给定的内部状态（成员变量）。

你将被迫做的是懒惰的评估：

```
def function_that_depends_on_python_specific_state(self, *args):
   if not hasatttr( self, 'python_data'):
        self.python_data = self.make_python_data() # construct the relevant data
   pass # do work that involves the python specific data 
```

并检查是否存在 python 特定数据。如果只有少数情况，我只是把它放在上面的函数中。但是，如果这最终变得混乱，您可以进行修改`__getattr__`，以便在访问特定于 python 的数据成员时构造它们。

```
def _sphere_getattr(self, name):
    if name=='python_data':
         self.__dict__[name]=self.make_python_data()
         return self.__dict__[name]
    else:
        raise AttributeError
Sphere.__getattr__ = _sphere_getattr 
```

恕我直言，在您拥有大量新功能和独立于底层 C 实现的数据的限制中，您实际上是在问“我怎样才能使我的 python Sphere 类成为 C Sphere 类的子类但是让它们保持同一类型？”

# c++ - 这两种比较 STL 向量的方法有什么区别？

> ID：15260003
> 
> 赞同：5
> 
> 时间：2013-03-06T23:09:06.933
> 
> 标签：c++, std

很少有在线可用的示例使用相等运算符来比较两个 STL`vector`对象的内容，以验证它们是否具有相同的内容。

```
vector<T> v1;
// add some elements to v1

vector<T> v2;
// add some elements to v2

if (v1 == v2) cout << "v1 and v2 have the same content" << endl;
else cout << "v1 and v2 are different" << endl; 
```

相反，我阅读了[`std::equal()`](http://www.cplusplus.com/reference/algorithm/equal/)使用该函数的其他示例。

```
bool compare_vector(const vector<T>& v1, const vector<T>& v2)
{
    return v1.size() == v2.size()
           && std::equal(v1.begin(), v1.end(), v2.begin());
} 
```

这两种比较 STL 向量的方法有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T23:11:56.190

两者的行为方式完全相同。容器要求（表 96）说`a == b`具有以下操作语义：

```
distance(a.begin(), a.end()) == distance(b.begin(), b.end()) &&
equal(a.begin(), a.end(), b.begin()) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T23:12:08.573

好问题。我怀疑人们不使用`==`它是因为他们不知道它在那里，但它确实与手动编码版本一样。它一直存在于序列容器和关联容器中。

# javascript - JS 是否总是每个字符使用两个字节来存储字符串？

> ID：15260006
> 
> 赞同：8
> 
> 时间：2013-03-06T23:09:26.457
> 
> 标签：javascript, performance, memory-management

我在内存中将一个非常大（>1MB）的位掩码作为字符串存储，并且对 JS 如何在内部存储字符串感到好奇。我有一种感觉，基于以下事实

```
String.fromCharCode( 65535 ).charCodeAt( 0 ) === 65535 
```

，所有字符串都是unicode，但我不确定。基本上，我试图找出在内存使用方面，对 16 位字符的位掩码是否比 8 位字符更有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:13:42.473

看一下这个：

[https://developer.mozilla.org/en-US/docs/Mozilla_internal_string_guide#IDL_String_types](https://developer.mozilla.org/en-US/docs/Mozilla_internal_string_guide#IDL_String_types)

我相信它非常依赖于浏览器，但 Mozilla 文档揭示了他们如何在内部为 JS 字符串执行此操作。

简短的回答是他们使用 UTF-16

[http://en.wikipedia.org/wiki/UTF-16](http://en.wikipedia.org/wiki/UTF-16)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:26:33.857

看看这个讨论。

[JavaScript 字符串 - UTF-16 与 UCS-2？](https://stackoverflow.com/questions/8715980/javascript-strings-utf-16-vs-ucs-2)

简而言之，仅仅因为某些 Javascript 引擎使用 16 位编码并不能使其成为 UTF16。边缘情况代理对在两者之间的处理方式大不相同。

# wicket - 如何检查页面是否已安装在检票口中？

> ID：15260009
> 
> 赞同：1
> 
> 时间：2013-03-06T23:09:53.953
> 
> 标签：wicket, wicket-1.5

我正在`IInitializer`为共享包配置一个。我有几个在应用程序中基本相同的挂载点。我想将它们安装在我的应用程序中，`IInitializer`但前提是它们尚未被我的应用程序安装。

因此，给定`Foo.class`或`"/bar"`作为所需的挂载点，我如何检查是否采用了挂载点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:06:07.720

我不相信任何版本的 Wicket 都内置了这种能力。您*可以*轻松地将这种能力构建到`WebApplication`所有应用程序的子类中，然后扩展。

基本过程是在调用 super 之前或之后覆盖[`mountPage`](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/protocol/http/WebApplication.html#mountPage%28java.lang.String,%20java.lang.Class%29)内置方法`WebApplication`以将参数值存储在映射（或您选择的某些数据结构）中`mountPage`。

# bash - 有没有办法在退出时执行命令（不管脚本如何退出）？

> ID：15260014
> 
> 赞同：7
> 
> 时间：2013-03-06T23:10:25.807
> 
> 标签：bash, exit

我有一个脚本可以写入临时文件以帮助其执行。在我的脚本结束时，我只是调用`rm filename`来清理我创建的临时文件。问题是脚本因错误而结束或被中断。在这些情况下，`rm`永远不会到达该语句，因此永远不会清理文件。有没有办法可以指定一些命令在退出时运行，无论它是否成功退出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T23:14:02.083

是的，你可以[**`trap`**](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_12_02.html)这样使用：

```
trap "rm -f filename" EXIT 
```

* * *

脚本可能如下所示：

```
#/bin/bash
trap "rm -f filename" EXIT   # remove file when script exits
touch filename               # create file
some-invalid-command         # trigger an error 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T23:13:51.473

是的; 你可以写：

```
trap 'rm filename' EXIT 
```

（参见[*Bash 参考手册*](http://www.gnu.org/software/bash/manual/bashref.html#Bourne-Shell-Builtins)[§4.1 “Bourne Shell Builtins” 中的](http://www.gnu.org/software/bash/manual/bashref.html#Bourne-Shell-Builtins)`trap`描述。）[](http://www.gnu.org/software/bash/manual/bashref.html#Bourne-Shell-Builtins)

 *当然，在某些极端情况下命令不会运行——例如，如果有人突然拔掉机器，或者只是发送`SIGKILL`到运行脚本的 Bash 实例——但这几乎是你能得到的最可靠的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T23:13:41.177

对于中断，您可以使用`onintr`指定删除文件然后退出的处理程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T23:14:16.743

对于中断：设置脚本以捕获 SIGHUP 和 SIGTERM 等信号。这将帮助您处理除 SIGKILL （无法被捕获）之外的所有问题。谷歌“bash 脚本陷阱信号”

对于不成功的退出：构造您的代码，以便在退出脚本之前调用一个函数来 rm 文件名（或只是放置语句）*

# symfony - 复杂类型“服务”：内容模型不是确定性的

> ID：15260017
> 
> 赞同：8
> 
> 时间：2013-03-06T23:10:47.567
> 
> 标签：symfony

我在 Symfony2 中遇到了这个奇怪的错误。在 localhost 中一切正常，但是当我在我的服务器中尝试它时，我得到了这个 PHP 错误：

```
[06-Mar-2013 22:04:50 UTC] PHP Fatal error:  Uncaught exception 'Symfony\Component\DependencyInjection\Exception\InvalidArgumentException' with message  '[ERROR 3070] complex type 'service': The content model is not determinist. (in file:////home/neuronas/public_html/miramos.tv/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Loader/schema/dic/services/services-1.0.xsd - line 75, column 0)
[ERROR 3070] complex type 'argument': The content model is not determinist. (in file:////home/neuronas/public_html/miramos.tv/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Loader/schema/dic/services/services-1.0.xsd - line 131, column 0)
[ERROR 3070] complex type 'call': The content model is not determinist. (in file:////home/neuronas/public_html/miramos.tv/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Loader/schema/dic/services/services-1.0.xsd - line 144, column 0)' in /home/neuronas/public_html/miramos.tv/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Loader/XmlFileLoader.php:370
Stack trace:
#0 in /home/neuronas/public_html/miramos.tv/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Loader/XmlFileLoader.php on line 370
[06-Mar-2013 22:13:36 UTC] PHP Fatal error:  Uncaught exception 'Symfony\Component\DependencyInjection\Exception\InvalidArgumentException' with message '[ERROR 3070] complex type 'service': The content model is not determinist. (in file:////home/neuronas/public_html/miramos.tv/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Loader/schema/dic/services/services-1.0.xsd - line 75, column 0)
[ERROR 3070] complex type 'argument': The content model is not determinist. (in file:////home/neuronas/public_html/miramos.tv/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Loader/schema/dic/services/services-1.0.xsd - line 131, column 0)
[ERROR 3070] complex type 'call': The content model is not determinist. (in file:////home/neuronas/public_html/miramos.tv/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Loader/schema/dic/services/services-1.0.xsd - line 144, column 0)' in /home/neuronas/public_html/miramos.tv/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Loader/XmlFileLoader.php:370
Stack trace:
#0 in /home/neuronas/public_html/miramos.tv/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Loader/XmlFileLoader.php on line 370 
```

这似乎是关于 XMLFile Loader 的东西，但我没有对他的文件进行任何更改

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-07T16:12:40.150

这是 libxml2 中的一个错误 - 您使用的是 RHEL 还是 CentOS？查看[https://rhn.redhat.com/errata/RHBA-2013-0591.html](https://rhn.redhat.com/errata/RHBA-2013-0591.html)如果您等不及通过 发布更新`yum update`，那么您可以降级到早期版本：

`yum downgrade libxml2-2.6.26-2.1.21.el5_9.1`

非常感谢 @denkiryokuhatsuden 在这个[GitHub 问题](https://github.com/symfony/symfony/issues/7291)上的修复。

# facebook - 如何使我的网站 Facebook 喜欢与我的 Facebook 页面喜欢相对应？

> ID：15260018
> 
> 赞同：0
> 
> 时间：2013-03-06T23:10:55.977
> 
> 标签：facebook, api, facebook-graph-api, facebook-like

我确信这个问题在整个互联网上都得到了回答，但我一定有很糟糕的研究技能，因为我在任何地方都找不到它，而且我一直在寻找几个小时。我有一个网站 avidest.com，顶部有一个类似 facebook 的按钮。我有一个 facebook 页面，也称为 avidest，位于[https://www.facebook.com/pages/Avidest/491828310878179](https://www.facebook.com/pages/Avidest/491828310878179) 如何制作它，以便 Facebook 页面上的点赞与主页上的点赞相同反之亦然？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:00:14.173

The like button on your website needs to refer to your facebook page. To do this just change

```
<fb:like href="http://www.avidest.com" send="true" layout="button_count" width="450" show_faces="false"></fb:like> 
```

to

```
<fb:like href="https://www.facebook.com/pages/Avidest/491828310878179" send="true" layout="button_count" width="450" show_faces="false"></fb:like> 
```

and users who click the like button on your homepage will like your Facebook page.

Check out "Can I link the Like button to my Facebook page?" on [https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

# zend-framework2 - 如何从 Zend 框架 2 中的 globa.php 访问自定义配置信息

> ID：15260022
> 
> 赞同：0
> 
> 时间：2013-03-06T23:11:17.530
> 
> 标签：zend-framework2

我似乎无法理解如何访问控制器中 global.php 中的自定义配置数据。我正在使用zf2。每当我尝试：

```
$config = $this->getServiceLocator()->get('config'); 
```

我收到以下错误：

```
Fatal error: Call to a member function get() on a non-object 
```

我知道这与服务管理器/定位器有关，但我对 ZF2 和整个 DI 精神非常陌生。我完全被卡住了，需要一个简单的例子来说明如何配置 SM 以允许访问它以提取我的自定义配置值。下面是我的 module.config.php 我不知道在空数组中放什么。我没有使用任何数据库。我想将 ldap 选项存储在 global.php 中，我可以在控制器中访问这些选项并传递给模型以创建新的 ldap 实例。

```
<?php
class Module
{
    public function getConfig()
    {
        return include __DIR__ . '/config/module.config.php';
    }

    public function getAutoloaderConfig()
    {
        return array(
            'Zend\Loader\StandardAutoloader' => array(
                'namespaces' => array(
                    __NAMESPACE__ => __DIR__ . '/src/' . __NAMESPACE__,
                ),
            ),
            'Zend\Loader\ClassMapAutoloader' => array(
              __DIR__ . '/autoload_classmap.php',
            ),
        );
    }

    public function getServiceConfig()
    {
      return array();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:40:11.033

在构造函数中访问 getServiceConfig 方法会产生一个空对象。我搬家了

```
$config = $this->getServiceLocator()->get('config'); 
```

到控制器的 get 方法，并且能够访问我需要的配置数据。

# octave - 如何在 GNU Octave 中查看函数体

> ID：15260023
> 
> 赞同：4
> 
> 时间：2013-03-06T23:11:21.117
> 
> 标签：octave

GNU Octave 中有没有办法打印用户定义函数的源代码？

例如，我在交互式提示中定义了一个函数：

```
octave:nn> function y = f(x); y = x; endfunction; 
```

现在有没有办法在提示符后面查找这个函数定义？就像是

```
octave:nn> showsource("f")
ans = function y = f(x); y = x; endfunction; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-18T22:17:54.947

要显示任何函数的内容，请使用[type](https://www.gnu.org/software/octave/doc/interpreter/XREFtype.html)函数：

```
 >> function y = f(x); y = x; endfunction;
    >> type ("f")
    f is the command-line function:

    function y = f (x)
      y = x;
    endfunction 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T13:58:26.233

如果函数是用 定义的`inline`，您可以使用`formula`或`char`查看函数的主体：

```
>> f = inline("x");
>> formula(f)
ans = x
>> char(f)
ans = x 
```

# c# - 如何使用实体树结构递归枚举子属性？

> ID：15260024
> 
> 赞同：1
> 
> 时间：2013-03-06T23:11:21.910
> 
> 标签：c#, linq, entity-framework

实体框架（代码优先）C#

我有一个树结构，其节点采用一对多结构。

```
Node
|
\--- Children 
```

我需要枚举所有的孩子（ICollection）。目前，这就是我查看代码的方式：

```
using (DBContext context = new DBContext()
{
    parentNode = (from query in context.Tree
                  where query.IsSomeWayToIDTheParentNode
                  select query).ToArray();

}

var tree = SomeRecursiveTreeBuilderMethod(parentNode); 
```

在此代码中，枚举了 parentNode 上的第一级 Children 属性，但未枚举实际子节点的 Children 属性，因此引发 ContextDisposed 异常。

我尝试将 .Include(inc => inc.Children) 添加到整个查询（在括号之后）和 context.Tree 之后，但没有运气。我可以很容易地在 using 语句中调用递归 'ChildEnumerator(parentNode)' 方法来强制枚举，但我觉得必须有更好的方法来确保对象和子对象（n-deep）都完全在转义上下文范围时填充。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T07:39:00.920

这应该可以按您的预期工作：

```
List<Tree> parentNodes = new List<Tree>();

using (DBContext context = new DBContext()
{
    parentNodes = (from query in context.Tree
                   where query.IsSomeWayToIDTheParentNode
                   select query).ToList();
}

var tree = SomeRecursiveTreeBuilderMethod(parentNodes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:39:08.457

如果格式正确，包含应该可以工作，所以像这样：

```
using (DBContext context = new DBContext()
{
    parentNode = context.
        .Tree
        .Include(inc => inc.Children)
        .Where(query => query.IsSomeWayToIDTheParentNode)
        .ToArray();
} 
```

[这是DbExtensions.Include](http://msdn.microsoft.com/en-us/library/gg671236%28v=vs.103%29.aspx)的官方文档

# php - 我可以在扩展异常类中添加什么？

> ID：15260027
> 
> 赞同：1
> 
> 时间：2013-03-06T23:11:36.680
> 
> 标签：php, error-handling, try-catch

我可以在`extend Exception`课堂上放什么以及如何使用它？正如你所看到的，我已经在`catch`块中包含了错误。

例如：

```
class Manager {

    private $socket = null;

    private $config = array();

    public function connect($host = null, $port = null) {

        if ($host == null || $port == null) {
            throw new PortHostNotGivenException('Host or Port is missing');
        }

        $this->socket = fsockopen($host,$post);

    }
}

class PortHostNotGivenException extends Exception {
    // What to put here??
 } 
```

测试：

```
$ast = new Manager();

    try {
      $ast->connect();
    } catch (PortHostNotGivenException $e) {
       // Log Error to File
       // Log Error to Linux Console
       echo $e . '/r/n';
       exit();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:19:39.403

您可以捕获多个不同的异常并区别对待它们，例如

```
try {
    $this->db->save();
} catch (ConnectionException $e) {
    if ($this->db->reconnect()) {
        // try again
    } else {
        throw new CannotReconnectException();
    }
} catch (ValidationException $e) {
    // display validation error messages
} catch (Exception $e) {
    // save failed with a general or unexpected error
} 
```

您还可以静默处理预期错误，同时不干扰意外错误：

```
try {
  ...
} catch (VendorApiException $e) {
    return false;
} 
```

在上面的例子中，如果 a`VendorApiException`被抛出 - 代码只会返回 false。如果抛出任何其他异常 - 它不会被此`catch`块捕获，而是冒泡。如果没有更高的 try/catch 块，它将由进程[异常处理程序处理](http://php.net/manual/en/function.set-exception-handler.php)。

## 用户定义异常的主体

> // 这里放什么？？

任何东西或什么都没有——如果你没有理由重写任何[异常属性](http://www.php.net/manual/en/language.exceptions.extending.php)——不要在里面放任何东西。通常，您可以定义 a `code`and `message`，如果您传递的 a`$message`不是字符串，则可能会覆盖构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:24:06.030

你不需要在那里放任何东西。扩展和异常的目的主要是“过滤”你正在捕获的异常。

例如，您有一个 CustomConfigNotFoundException 和一个 DatabaseException ，您可以在其中说我不需要自定义配置，因为我暂时可以使用默认值，但是没有数据库，您就搞砸了……所以您可以使用 catch(CustomConfigNotFoundException e) 加载默认配置，只要让 DatabaseException 停止你的程序/脚本/页面，无论你使用你的异常。

# php - 使用 if 语句检查变量类型

> ID：15260036
> 
> 赞同：0
> 
> 时间：2013-03-06T23:12:26.553
> 
> 标签：php

嗨，我有一个关于数组的简单问题。

我正在尝试使用`foreach`循环来回显`vars`. 但是，有时 我创建了一个语句`variable`来检查类型，但我不确定这是否是最佳实践。`array``if``variable`

有没有更好的方法来做我需要的事情？非常感谢！

我的代码

```
$test = $_GET['testVar'];

if(is_array($test)){
 foreach($test as $t){
   echo $t;
 }
}else{
   echo $test;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:14:08.043

`is_array`是检查变量是否为数组的最佳方法。所以你的代码没问题。

* * *

但是，这里有一个通用解决方案，它适用于所有数据类型，而不仅仅是具有函数的数组`gettype()` 如果 $type 是“对象”，则可以使用该函数来优化结果`get_class()`

```
$type = gettype($var);

// get class name for objects if so desired
if($type === 'object') {
    $type = get_class($var);
} 
```

# php - PHP 数组操作，为 foreach() 提供的参数无效

> ID：15260039
> 
> 赞同：1
> 
> 时间：2013-03-06T23:12:42.710
> 
> 标签：php, codeigniter, foreach

我在 PHP 的 codeigniter 中设置了一个 MVC 结构。但是，出于某种原因，我的模型结果不喜欢被人提出来，给我；`Invalid argument supplied for foreach()`. 这是我的模型的粗略代码：

```
class some_model extends CI_Model
{
    function __construct()
    {
        // Call the Model constructor
        $this->load->database();
    }

    function some_func()
    {
       //Prepare return
       $return = array();

       //Do query
       $query = $this->db->query('SELECT tbl.* from tbl');

       //Get array of values
       $result = $query->result_array();

       foreach($result as $row)
       {
           $return[] = array(

               'a'                    => $row['a'],
               'b'                    => $row['b'],
               'c'                    => $row['c']
           );
       }

    return $return;
} 
```

和控制器：

```
$this->load->model('some_model');
$stuff = $this->some_model->some_func();

foreach($stuff as $row)
{
   //Do something
} 
```

但是我总是在控制器的 foreach 循环中遇到错误。有谁知道为什么会发生这种情况？我已经检查过了，PHP 确实将`$stuff`其视为一个数组（`is_array($stuff)`返回 true），所以我不知道会发生什么。我确实知道模型中的 foreach 循环不是问题，因为它不会给我任何错误，只有控制器中的那个会。任何提示将不胜感激。预先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:42:23.813

所以，经过大量的寻找，我发现了我的问题，并决定把它放在这里，以防有人遇到同样的问题。基本上，事实证明我在问题中发布的那个循环中有一些嵌套的 foreach 循环，所以我有这样的代码：

```
foreach($stuff1 as $row)
{
   foreach($stuff2 as $row2)
   {
      //Some code
   }
} 
```

我的错误发生在我的第二个（嵌套）foreach 中，但由于某种原因，PHP 给了我一个错误，就好像它发生在第一个（行号和所有内容）中一样。唯一让我意识到这个问题的事实是，错误打印的次数与其中的行数相同`$stuff1`......有人可以就 PHP 的错误行报告功能评论这种行为吗？谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:27:15.560

当变量不是数组时，为 foreach 循环提供了无效参数。在使用 foreach 循环之前添加检查

```
if (is_array($stuff)) {...foreach loop...} 
```

你确定它出错的 $stuff 部分吗？也许它的**$result**以某种方式保存从查询返回的非数组值。

**检查result_array**的返回值是什么

# xsd - 元素具有不同父级的 XSD 选择验证

> ID：15260043
> 
> 赞同：1
> 
> 时间：2013-03-06T23:13:15.220
> 
> 标签：xsd, xsd-validation

有没有一种方法可以使用选择（或其他技术）进行验证，其中您需要至少一个具有不同父级的 2 个值。例如...

```
<?xml version="1.0" encoding="UTF-8"?>
<DOC>
    <GROUP1>
        <VAL1>TEST</VAL1>
        <DATE1>20130306</DATE1>
    </GROUP1>
    <GROUP2>
        <VAL2>TEST2</VAL2>
        <DATE2>20130405</DATE2>        
    </GROUP2>
</DOC> 
```

如何验证此文档至少包含 DATE1 和/或 DATE2 之一？即如果 DATE1 和 DATE2 都为空，则文档无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:19:48.430

它不能在 XSD 1.0 中完成。您必须使用 Schematron 扩充您的 XSD 1.0，或者迁移到 XSD 1.1（非常有限的支持）并使用断言。

以下是根据您的描述使用 XSD 1.1 的一种可能方式（空值，所以我假设 DATEx 是必填字段）：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">       
    <xsd:element name="DOC">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="GROUP1">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="VAL1" type="xsd:string"/>                        
                            <xsd:element name="DATE1" type="date"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
                <xsd:element name="GROUP2">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="VAL2" type="xsd:string"/>
                            <xsd:element name="DATE2" type="date"/>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </xsd:sequence>

            <xsd:assert test="string-length(concat(GROUP1/DATE1, GROUP2/DATE2)) gt 0"/>
        </xsd:complexType>
    </xsd:element>

    <xsd:simpleType name="date">
        <xsd:restriction base="xsd:string">
            <xsd:pattern value="|[0-9]{8}"/>        
        </xsd:restriction>
    </xsd:simpleType>       
</xsd:schema> 
```

# python - 在 Selenium 上运行 chrome headless

> ID：15260054
> 
> 赞同：1
> 
> 时间：2013-03-06T23:13:56.467
> 
> 标签：python, selenium, selenium-chromedriver, xvfb, pyvirtualdisplay

我想使用无头铬运行硒测试。

首先，我下载了 chromedriver 并将其位置作为参数传递：

```
null=open('/dev/null','wb')
cmd = ['java','-Djava.security.egd=file:/dev/./urandom','-jar','-Dwebdriver.chrome.driver=res/chromedriver_x64_26.0.1383.0','selenium-server-standalone.jar')]
proc = subprocess.Popen(cmd,stderr=null,stdout=null,preexec_fn=os.setsid) 
```

驱动器和显示器：

```
sel.driver = webdriver.Remote(
command_executor = 'http://127.0.0.1:4444/wd/hub',
desired_capabilities={'browserName': 'chrome'
                            })
display = Display(visible=0, size=(1024, 768))
display.start() 
```

测试运行良好，但是 chrome 不是无头的，并且在第一次测试时打开。

# ruby-on-rails - 对于我的 heroku rails 应用程序上的 unicorn::clientshutdown 错误，我该怎么办？

> ID：15260055
> 
> 赞同：11
> 
> 时间：2013-03-06T23:13:57.797
> 
> 标签：ruby-on-rails, heroku, unicorn

我有一个接受图像上传的应用程序。这是 Heroku 上使用 Unicorn 的 rails 3 应用程序。我偶尔会遇到`unicorn::clientshutdown`异常，我真的不知道是什么原因导致它们或如何处理它们。我应该怎么办？

这是我的`unicorn.rb`文件：

```
before_fork do |server, worker|
  # Replace with MongoDB or whatever
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.connection.disconnect!
    Rails.logger.info('Disconnected from ActiveRecord')
  end

  # If you are using Redis but not Resque, change this
  if defined?(Resque)
    Resque.redis.quit
    Rails.logger.info('Disconnected from Redis')
  end
end

after_fork do |server, worker|
  # Replace with MongoDB or whatever
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.establish_connection
    Rails.logger.info('Connected to ActiveRecord')
  end

  # If you are using Redis but not Resque, change this
  if defined?(Resque)
    Resque.redis = ENV['REDIS_URI']
    Rails.logger.info('Connected to Redis')
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-01T23:05:50.107

图片上传、Heroku 和 Unicorn，哦，我的。

**问题**

这是此错误的三连胜。Heroku 日志中可能存在相关的 H12 错误 ( [https://devcenter.heroku.com/articles/error-codes#h12-request-timeout](https://devcenter.heroku.com/articles/error-codes#h12-request-timeout) )。发生的情况是请求完成的时间太长（Heroku 有一个不可避免的 30 秒超时），所以它断开连接并且那个独角兽工人被杀死了。此外，Unicorn 不适合处理缓慢/长时间运行的请求（请参阅[http://rainbows.rubyforge.org](http://rainbows.rubyforge.org)）

**解决方案**

诀窍是在前端上传图像而不访问服务器（CORS/AJAX/jquery.fileupload.js/etc），将上传的文件位置与表单提交一起传递，然后作为后台作业执行任何处理并重新上传，不受 30 秒超时限制。其他人对此进行了更广泛的报道。此外，您可以使用 Cloudinary 之类的服务为您执行此操作。

**附言**

YMMV，但您也应该将其添加到您的独角兽配置中（[https://devcenter.heroku.com/articles/rails-unicorn](https://devcenter.heroku.com/articles/rails-unicorn)）

```
before_fork do |server, worker|
  Signal.trap 'TERM' do
    puts 'Unicorn master intercepting TERM and sending myself QUIT instead'
    Process.kill 'QUIT', Process.pid
  end
  # ...
end

after_fork do |server, worker|
  Signal.trap 'TERM' do
    puts 'Unicorn worker intercepting TERM and doing nothing. Wait for master to sent QUIT'
  end
  # ...
end 
```

# android - Backstack 上的 NullpointerException

> ID：15260059
> 
> 赞同：1
> 
> 时间：2013-03-06T23:14:15.030
> 
> 标签：android, android-fragments, nullpointerexception, back-stack

我使用 API 级别 16，在我尝试替换一些选项卡下方的一些片段，其中已经是一些片段。我真的找不到原因，但有时我会收到这样的异常：

```
E/AndroidRuntime(27395): java.lang.NullPointerException
E/AndroidRuntime(27395):    at android.app.BackStackRecord.run(BackStackRecord.java:604)
E/AndroidRuntime(27395):    at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1399)
E/AndroidRuntime(27395):    at android.app.FragmentManagerImpl$1.run(FragmentManager.java:426)
E/AndroidRuntime(27395):    at android.os.Handler.handleCallback(Handler.java:615)
E/AndroidRuntime(27395):    at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(27395):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(27395):    at android.app.ActivityThread.main(ActivityThread.java:4921)
E/AndroidRuntime(27395):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(27395):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(27395):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1038)
E/AndroidRuntime(27395):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:805)
E/AndroidRuntime(27395):    at dalvik.system.NativeStart.main(Native Method) 
```

我没有添加空片段，并且在那里运行的代码很简单：

```
 final Fragment newFragment = Fragment.instantiate(anContext, clazz.getName(), arguments);
            final FragmentTransaction transaction = manager.beginTransaction();
            transaction.disallowAddToBackStack();
            transaction.replace(R.id.fragment_content_center, newFragment);
            transaction.commit(); 
```

如果您愿意，请查看 Grepcode，因为发生异常：http: [//grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/应用程序/BackStackRecord.java#604](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/app/BackStackRecord.java#604)

我没有在那里使用任何动画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T08:55:54.747

问题是不同的，

在进行替换调用时，我在每个事务中都使用了一个**片段标签。**在上面的代码上**我没有**。这导致了这个 NullPointerException。

看起来你不能混合交易，文档对此并不清楚。

谢谢，风筝冲浪者

# windows - 使用 rawSystem 和 cmd.exe；“/c”后的 Arg 前面有引号，导致错误

> ID：15260061
> 
> 赞同：3
> 
> 时间：2013-03-06T23:14:18.140
> 
> 标签：windows, haskell, cmd

在 Haskell 中，运行`rawSystem "cmd.exe" ["/c", "dir"]`会产生 cmd 无法识别的命令消息，如下所示：

```
Prelude System.Cmd> rawSystem "cmd.exe" ["/c", "dir"]
'"dir' is not recognized as an internal or external command,
operable program or batch file.
ExitFailure 1 
```

如错误消息所示，问题在于我的第二个参数前面带有引号 ( `"`)。`["/c", ""]`论据也是如此；它说`'"' not recognized`。

我猜这更多是 cmd 的错，而不是 Haskell 的错，但是我需要一个 Haskell 解决方案来处理这个问题，所以：

为什么会这样？

更重要的是，我能做些什么来避免这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:44:03.857

CMD 在一个参数中需要“/C dir”

cmd.exe "/c 目录"

如果你使用

```
cmd.exe "/c" "dir" 
```

它会被解释为

```
/c" "dir 
```

其中“dir 不是有效的命令

# java - 我的 jframe 不显示

> ID：15260062
> 
> 赞同：-5
> 
> 时间：2013-03-06T23:14:24.333
> 
> 标签：java, swing, jframe

我是java编程的初学者

我试图让我的 jframe 节目，但它没有

```
jframe.setVisible(true); 
```

它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:23:16.320

我认为您没有正确声明您的 JFrame。这是一个创建简单框架的示例：

```
public static void main(String[] args)
{
    // Creating a frame
    JFrame frame = new JFrame("Example");
    // Setting the position and the size of the frame
    frame.setBounds(0,0,800,600);
    // This will terminate the program when closing the frame
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    // Then you can display your frame
    frame.setVisible(true);
} 
```

# c++ - 分配受控内存 - 数组大小（以字节为单位）

> ID：15260065
> 
> 赞同：0
> 
> 时间：2013-03-06T23:14:33.643
> 
> 标签：c++, memory, allocation

我想学习如何处理内存分配和解除分配。我的第一个“任务”是体验一下。

基本上，我想使用`new`运算符分配 1 kB 内存，直到引发异常。我不太确定如何做到这一点，但我希望它会与此类似：

```
int main(){
unsigned int counter = 0;
try{
    for (int i = 0; i < 10; i++){
            int *p_array = new int[1024*i];
            cout << sizeof(p_array);
            counter++
        }
    delete[] p_array; 
}catch (std::bad_alloc& ba){
    std::cerr << "bad_alloc caught: " << ba.what() << endl << "Allocated 1KB " << counter << " times";
}
return 0;
} 
```

**错误：**

```
test.cpp: In function ‘int main()’:
test.cpp:24:12: error: ‘p_array’ was not declared in this scope
make: *** [out_Executable] Error 1 
```

相当简单的程序，但我仍然卡住了。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:16:39.400

你有一些形式（简化）

```
{
  int * p = ...; // p only exists in this scope
}
delete p; // p doesn't exist here 
```

您正在声明 a`int*`并为循环的每次迭代分配一个数组。唯一的`int*`生命在单次迭代中。不过，数组本身会一直存在到程序结束。

# sql-server - 在不使用 GROUPING BY 的情况下在 SQL Server 中透视或转置表

> ID：15260067
> 
> 赞同：3
> 
> 时间：2013-03-06T23:14:40.537
> 
> 标签：sql-server, pivot, transpose

我需要在 SQL Server 中使用以下结构对表进行透视：

```
CREATE TABLE table1 (
    ColumnNumber int,
    RowNumber int,
    CellData nvarchar(50)
)

INSERT INTO table1 VALUES
(1, 1, 'Orange'),
(2, 1, 'Apple'),
(3, 1, 'Banana'),
(1, 2, 'Grape'),
(2, 2, 'Corn'),
(3, 2, 'Lemon'),
(1, 3, 'Tomato'),
(2, 3, 'Lettuce'),
(3, 3, 'Onion') 
```

我需要结果表如下所示：

![在此处输入图像描述](../Images/ecd6fbfeca4ff8b6f8086b2509763b4c.png)

所以`ColumnNumber`行中的单元格现在是结果表的列名。最困难的部分是不同列号的数量是可变的（所以现在，我们有 3 个列号，但明天可能有 6 个或 10 个）。

我一直在研究 PIVOT 函数，但所有示例都包含`GROUP BY`, 并且，正如您在此处看到的，我需要更像“转置”excel 函数的东西。

谢谢 ！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T23:22:39.820

这可以使用[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数来完成。这`GROUP BY`将起作用，因为您有一个使每一行都不同的指示器。对于您的数据，指标是`rowNumber`列。

如果您有一定数量的列，那么您将需要使用静态枢轴对它们进行硬编码。代码将类似于以下内容：

```
select [1], [2], [3]
from
(
  select colNumber, RowNumber, CellData
  from yourtable
) src
pivot
(
  max(CellData)
  for colnumber in ([1], [2], [3])
) piv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/4803e/1)。

在您的情况下，您声明您将拥有未知数量的列。如果这是您的情况，那么您将需要使用动态 sql 来构建要透视的列列表。我演示了静态版本，因为它可以更轻松地将代码转换为动态 SQL。

动态 sql 版本的关键是获取列列表，这是通过查询表并创建列名字符串来完成的。这是使用`FOR XML PATH`：

```
select @cols = STUFF((SELECT distinct ',' + QUOTENAME(colNumber) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') 
```

然后将此列表添加到您生成的查询字符串中，最终代码为：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(colNumber) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ' + @cols + ' 
             from 
             (
                select colNumber, rowNumber, CellData
                from yourtable
            ) x
            pivot 
            (
                min(CellData)
                for colNumber in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/52935/5)。

两者都给出结果：

```
|      1 |       2 |      3 |
-----------------------------
| Orange |   Apple | Banana |
|  Grape |    Corn |  Lemon |
| Tomato | Lettuce |  Onion | 
```

# javascript - jQuery 不影响 CSS 属性

> ID：15260069
> 
> 赞同：1
> 
> 时间：2013-03-06T23:15:19.043
> 
> 标签：javascript, jquery, html, css

所以，我正在尝试使用 jQuery 让文本有条件地不可见。有问题的文本在 html 中，如下所示：

```
<div class="info">
    <div class="bad-pass">Password is incorrect.</div>
    <div class="good-pass">Password is correct.</div>
</div> 
```

相关的css如下：

```
.info {
    visibility: hidden;
    line-height: 0;
}
.info div:first-child {
    color: red;
}
.info div:last-child {
    color: green;
} 
```

然后，我调用以下函数，传入 true 或 false（无论哪个都不起作用。）

```
function updatePass(correct) {
    if(correct) {
        $(".good-pass").css("visibility", "visible");
        $(".good-pass").css("line-height", "1");
        $(".bad-pass").css("visibility", "hidden");
    }
    else {
        $(".good-pass").css("visibility", "hidden");
        $(".bad-pass").css("visibility", "visible");
        $("#bad-pass").css("line-height", "1");
    }
} 
```

有人可以解释为什么当我调用函数让 jQuery 更改它们时 CSS 属性没有改变吗？

编辑：

我最终放弃了 jQuery 并在 PHP 中获得了理想的结果，因为我已经在文档的其他地方使用了 PHP。然而，正如 Travis J. 指出的那样，代码在 jsFiddle 中工作，这让我彻底困惑。有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:22:15.187

他们似乎都为我工作，这是一个演示：http: [//jsfiddle.net/tTrcL/](http://jsfiddle.net/tTrcL/)

`$(".bad-pass").css("line-height", "1");`需要注意的一件事是，您的目标定位不正确`$("#bad-pass").css("line-height", "1");`

js

```
function updatePass(correct) {
if(correct) {
    $(".good-pass").css("visibility", "visible");
    $(".good-pass").css("line-height", "1");
    $(".bad-pass").css("visibility", "hidden");
}
else {
    $(".good-pass").css("visibility", "hidden");
    $(".bad-pass").css("visibility", "visible");
    $(".bad-pass").css("line-height", "1");
}
}
updatePass(false);
setTimeout(function(){updatePass(true);},3000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:19:22.367

确保您正在加载 jQuery，并使用 dom 就绪事件，例如：

```
$(document).ready(function() {
    ...
}); 
```

您还可以像这样合并前两个调用：

```
$('.good-pass').css({visibility:'visible',lineHeight:'1'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T23:21:26.893

你在你的CSS上犯了一个错误。更改自：

```
.info {
    visibility: hidden;
    line-height: 0;
}
.info div:first-child {
    color: red;
}
.info div:last-child {
    color: green;
} 
```

到：

```
.info div{
    visibility: hidden;
}
.info div:first-child {
    color: red;
}
.info div:last-child {
    color: green;
} 
```

您的 jquery 代码更改了 .bad-pass 和 .good-pass 的可见性，但 .info 块始终处于隐藏状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T23:43:52.833

**选项 1** 在您的 CSS 中创建一个类并修复不正确的类

```
.info div:first-child {
    color: red;
}
.info div:last-child {
    color: green;
}
.shown{
   visibility:visible;
   line-height: 1;
}
.notshow{
     visibility:hidden;
     line-height: 0;
} 
```

现在使用这些类：

首先在您的文档准备调用期间添加它：

```
$('.info div').addClass("notshown"); 
```

然后使用你的函数来切换 em：

```
function updatePass(correct) {
    if(correct) {
        $(".good-pass").addClass"shown").removeClass("notshown");
        $(".bad-pass").addClass"notshown").removeClass("shown");
    }
    else {
        $(".bad-pass").addClass"shown").removeClass("notshown");
        $(".good-pass").addClass"notshown").removeClass("shown");
    }
} 
```

**选项 2** 或者，简单地隐藏和显示 em：CSS：

```
.info div:first-child {
    color: red;
}
.info div:last-child {
    color: green;
} 
```

代码：

```
$('.info div').hide();

function updatePass(correct) {
    if(correct) {
        $(".good-pass").show();
        $(".bad-pass").hide();
    }
    else {
        $(".good-pass").hide();
        $(".bad-pass").show();
    }
} 
```

注意这也适用于更简单的 CSS（检查颜色 - 想要红色好？对我来说似乎很奇怪，但这就是你所拥有的）

```
.good-pass {
    color: red;
}
.bad-pass {
    color: green;
} 
```

# paypal - PrestaShop Paypal 模块：交易后页面未加载

> ID：15260073
> 
> 赞同：1
> 
> 时间：2013-03-06T23:15:34.897
> 
> 标签：paypal, prestashop

我正在使用 PrestaShop 1.5.2.0 和 PayPal 3.4.5 模块。客户通过 PayPal 模块使用信用卡或 PayPal 帐户完成交易后，它会成功处理交易，向客户收费并下订单，但随后会将客户带到一个错误页面。

**在 Chrome 中：**

> No data received 无法加载网页，因为服务器未发送数据。错误 324 (net::ERR_EMPTY_RESPONSE)：服务器关闭连接而不发送任何数据。

**在火狐中：**

> 连接已重置 在页面加载时，与服务器的连接已重置。

我向 PayPal 发送了一张支持票，他们回复说：

> “这似乎是您购物车退货页面上的脚本错误。买家被重定向到的退货页面由您的购物车在交易请求中传递给 PayPal 的退货 URL 控制。买家在退货时收到此错误消息付款后的页面，这需要在购物车级别进行调查。请联系购物车供应商进一步调查为什么购物车的退货页面返回该错误。

有什么帮助吗？谢谢。- 瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:41:25.907

当买家被重定向到页面时，您的退货页面是否期望收到数据？如果是这样，您使用什么方法将数据返回到您的站点？如果您使用 rm 变量或使用 PDT，请确保在您的帐户中正确配置了这些。

# c++ - 将 Excel 列字母转换为相应的列号

> ID：15260075
> 
> 赞同：0
> 
> 时间：2013-03-06T23:15:42.390
> 
> 标签：c++, excel, visual-c++

我正在创建一个类来帮助创建 excel 文件（第二个问题）。我有一个成员函数，它在特定的行和列位置创建一个单元格并将其保存到一个数组中。

```
ExcelSheet::SetValue(int row, int column, std::string szValue) {
    myWorksheet[row][column] = szValue;
} 
```

但是我通过将列指定为字母/数字组合的选项来重载该函数，就像在 Excel 中一样。我希望能够将“A3”之类的输入转换为第 3 行第 1 列，或将 AB19 转换为第 19 行第 28 列。即，

```
ExcelSheet::SetValue(std::string szCell, std::string value) {
    // search for the alphabetical part of szCell using regex and
    // convert it to a column number
    myWorksheet[row][column] = szValue;
} 
```

Excel 列模式如下所示：

```
A, B, C, D, E... Z (1-26)  
AA, AB, AC, AD, AE... AZ (27-52)  
BA, BB, BC, BD, BE... BZ (53-78)  
...  
ZA, ZB, ZC... ZZ  
AAA, AAB, AAC... AAZ  
ABA, ABB, ABC... ABZ  
...  
AZA, AZB, AZC... AZZ  
BAA, BAB, BAC... BAZ  
... 
```

所以我认为某种基于 26 的循环可以解决问题，但我什至不确定在实现它时从哪里开始。

### 更新：

我几乎可以工作的代码：它可以编译，但由于某些不清楚的原因没有正确获取行。

```
#include <vector>
#include <string>
#include <iostream>
#include <regex>

class VectorClass {
    std::vector<std::string> vectorString;
public:
    void PrintVector(std::string szValue) {
        std::string str = "space";
        vectorString.push_back(szValue);
        vectorString.push_back(str);
        std::cout << "Loop:" << std::endl;
        for(int i=0; i < vectorString.size(); i++) {
            std::cout << vectorString[i] << std::endl;
        }
    }
    int GetColumn(std::string szValue) {
        std::regex rgx("^([a-zA-Z]+)");
        std::smatch result;
        if( regex_search(szValue, result, rgx) ) {
            std::string szResult = result[0];
            int numletters = szResult.length();
            const char * colstr = szResult.c_str();
            //char colstr[5];
            //int numofletters = 0;
            //for(int n=0;n<szResult.length();n++) {
            //  colstr[n] = szResult.substr(n,1);
            //  numofletters++;
            //}
            //char colstr[]="AEF";
            int col=0;
            for(int i=0; i<numletters; i++) {
                col = 26*col + colstr[i] - 'A' + 1;
            }
            return col;
            //return atoi(szResult.c_str());
        }
        else
            return -1;
    }
    int GetRow(std::string szValue)  {
        std::regex rgx("^[a-zA-Z]+(\d+)$");
        std::smatch result;
        if( regex_search(szValue, result, rgx) ) {
            std::cout << "test: " << result.size() << std::endl;
            for(size_t i=0; i<result.size(); ++i) {
                std::cout << result[i] << std::endl;
            }
            std::string szResult = result[0];
            return atoi(szResult.c_str());
        }
        else
            return -1;
    }
};

int main () {
    VectorClass myclass;
    //myclass.PrintVector("ship");
    std::cout << "A1 = Column " << myclass.GetColumn("A1") << ", Row " << myclass.GetRow("A1") << std::endl;
    std::cout << "B32 = Column " << myclass.GetColumn("B32") << ", Row " << myclass.GetRow("B32") << std::endl;
    std::cout << "Z65 = Column " << myclass.GetColumn("Z65") << ", Row " << myclass.GetRow("Z65") << std::endl;
    std::cout << "AA12 = Column " << myclass.GetColumn("AA12") << ", Row " << myclass.GetRow("AA12") << std::endl;
    std::cout << "AB366 = Column " << myclass.GetColumn("AB366") << ", Row " << myclass.GetRow("AB366") << std::endl;
    std::cout << "FAB43 = Column " << myclass.GetColumn("ZAB43") << ", Row " << myclass.GetRow("ZAB43") << std::endl;
    std::cout << "ZZZ43456 = Column " << myclass.GetColumn("XDE43456") << ", Row " << myclass.GetRow("XDE43456") << std::endl;
    std::cin.get();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T23:21:12.723

请注意，字符具有 ASCII 值，您可以从以下内容中获取该列：

```
char colstr[]="AEF";
int ii, col=0;
for(ii=0; ii<3; ii++) {
    col = 26*col + colstr[ii] - 'A' + 1;
} 
```

需要注意的几点： - 我使用 char[] - 一个字符数组 - 来存储字符串。这使得访问 ASCII 值变得微不足道。- 我将循环硬连接到 3 - 如果您的列标签长度不同，您可能想要解决这个问题 - 单引号中的值“A”是字符“A”，因此 ASCII 值 65。

编辑：由于您似乎无法获取行值，因此这里有一个非常简单的 (C) 函数，可以让您两者兼得 - 以及一些显示一些示例的代码。我无法编译您的代码 - 显然我的机器上没有库......我假设传递给函数的标签格式正确：只有字母后跟只有数字。它确实使用该函数处理小写字母`toupper()`（注意 - 这是您的代码没有做的事情......）。我弄清楚最后一个字母在哪里，然后对这两个部分进行操作。`row`我在和参数指向的位置返回行和列的值`col`。

```
#include <stdio.h>
#include <stdlib.h>

void rc(char * cellAddr, int *row, int *col) {
  int ii=0, jj, colVal=0;
  while(cellAddr[ii++] >= 'A') {};
  ii--;
  // ii now points to first character of row address
  for(jj=0;jj<ii;jj++) colVal = 26*colVal + toupper(cellAddr[jj]) -'A' + 1;
  *col = colVal;
  *row = atoi(cellAddr+ii);
}

int main() {
    int row, col;
    char cellAddr1[] = "A123";
    char cellAddr2[] = "aB321";
    char cellAddr3[] = "ABCA6543";
    rc(cellAddr1, &row, &col);
    printf("for %s the row is %d and the column is %d\n", cellAddr1, row, col);
    rc(cellAddr2, &row, &col);
    printf("for %s the row is %d and the column is %d\n", cellAddr2, row, col);
    rc(cellAddr3, &row, &col);
    printf("for %s the row is %d and the column is %d\n", cellAddr3, row, col);
} 
```

这给我的输出是：

```
for A123 the row is 123 and the column is 1
for aB321 the row is 321 and the column is 28
for ABCA6543 the row is 6543 and the column is 19007 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-11T03:04:52.067

在**Java**中，以防万一有人想要一个 java 版本

```
import java.util.*;
import java.lang.*;
import java.io.*;

class Ideone
{
public static void main (String[] args) throws java.lang.Exception
{
    rowColFromA1("C5");
    rowColFromA1("$AB123456789");
    rowColFromA1("$C$5");
    rowColFromA1("C$5");
    rowColFromA1("$C5");
    rowColFromA1("$D5");
    rowColFromA1("$aC$5");
    rowColFromA1("$c$5");
    rowColFromA1("cBa$99");
    rowColFromA1("cBa$");
    rowColFromA1("99");
    rowColFromA1("$K$34");
}

public static int[] rowColFromA1(String a1ref) {
      int ii=0, jj, colVal=0;
      char[] cellAddr = a1ref.toCharArray();
      int[] rowCol = new int[2];
      int endOfCol;

      try {       
        while(cellAddr[ii] >= 'A' || cellAddr[ii] == '$' ) { ii++;};
        endOfCol = (cellAddr[ii-1] == '$') ? ii-1 : ii;
      } catch (ArrayIndexOutOfBoundsException aiobe) 
      { rowCol[0] = 1; rowCol[1] = 1; return rowCol;} 
      // skip $ of col, if any
      jj = (cellAddr[0] == '$') ? 1 : 0;

      // ii now points to first character of row address
      for(;jj<endOfCol;jj++) colVal = 26*colVal + Character.toUpperCase(cellAddr[jj]) -'A' + 1;
      rowCol[1] = (colVal > 0) ? colVal : 1;

      int rowVal = 0;
      for (;ii < cellAddr.length; ii++)
        rowVal = rowVal * 10 + cellAddr[ii] - '0';

      rowCol[0] = (rowVal > 0) ? rowVal : 1;
      System.out.println("R"+ rowCol[0]+"C"+rowCol[1]);

      return rowCol;
    }

} 
```

在线java ide：http: [//ideone.com/69ISK8](http://ideone.com/69ISK8)

# sql-server-2008 - 发布者未分区时订阅者表的分区

> ID：15260079
> 
> 赞同：0
> 
> 时间：2013-03-06T23:16:24.667
> 
> 标签：sql-server-2008, partitioning, transactional-replication

我在第三方数据库中有一个非常大的、非分区的、事务复制的表，我对其进行管理但无法更改。

虽然我不能更改发布者，但我想在订阅者上对这个表进行分区。我发现了很多与保留已在发布者上以这种方式设置的表的分区有关的文档，但我没有看到与此相关的任何内容。

我不太关心这样做的机制，而是关心可能会咬我的长期后果。

有没有人成功地做到了这一点，或者我会在 3 个月后恨自己吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T10:32:09.177

定义发布时，您可以设置不复制分区方案和功能的选项。您可以在新建发布向导或发布属性对话框中选择它。或使用 SP 设置`@schema_option`变量（0x40000 ,0x80000 ,0x100000 - 表、函数、模式）

*   `[sp_addarticle][1]`或`[sp_changearticle][2]`用于事务复制

*   `sp_addmergearticle`或`sp_changemergearticle`用于合并复制

进一步阅读：[复制分区表和索引](http://msdn.microsoft.com/en-us/library/cc280940.aspx)

# php - 如何在php中延迟exec命令

> ID：15260081
> 
> 赞同：-1
> 
> 时间：2013-03-06T23:16:37.467
> 
> 标签：php, command, exec, delay, iptables

我知道这种问题已经被问过很多次了，但我还没有找到合适的答案。这里是：

我有一个站点 - debian 上的 apache/php/mysql。我已经设法允许 www-data 执行 iptables 命令。现在我需要确定是否可以在不让用户/浏览器等待的情况下延迟这样的命令。

重点是什么？- 当用户认证时，php 将获得他的公共 IP 地址并在防火墙中打开一个端口。我希望这个端口打开（比方说）2 分钟（足够的时间来建立 VPN 连接），然后我希望关闭端口。

所以，基本上，我希望 PHP 执行一个命令，然后在 2 分钟后执行另一个命令 - 所有这一切都不会让浏览器等待这两分钟。

从用户的角度来看：John 在 test.com 进行身份验证并立即关闭他的浏览器并启动他的 vpn 连接。如果他在 2 分钟后关闭 VPN 连接，他必须重新登录。

这可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:26:54.763

使用`at`：

```
shell_exec('echo "iptables --something 1.2.3.4" | at now + 2 minutes'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T23:18:50.467

让 php 在睡眠 2 分钟后执行一个 bash 脚本，为您运行 iptables 命令？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T23:26:38.253

将其作为单独的脚本运行，不要等待它完成，

```
exec("/usr/bin/php script.php &"); 
```

# ruby-on-rails - 如何重构长 where 子句？

> ID：15260088
> 
> 赞同：2
> 
> 时间：2013-03-06T23:17:02.830
> 
> 标签：ruby-on-rails

如何重构此代码？有没有办法拆分 where 子句、includes 和 order 函数？

```
def self.product_search(query, console, genre, sort, order)
        if query
            #search(query)
            if !console.nil? && console != "all" && !genre.nil? && genre != "all"
                where("name_en ilike :q AND console_id = :c AND genre_id = :g OR ean ilike :q AND console_id = :c AND genre_id = :g", q: "%#{query}%", c: console, g: genre).includes(:genre, :console, :brand, :images).order("#{sort} #{order}")
            elsif !console.nil? && console != "all"
                where("name_en ilike :q AND console_id = :c OR ean ilike :q AND console_id = :c", q: "%#{query}%", c: console).includes(:genre, :console, :brand, :images).order("#{sort} #{order}")
                elsif !genre.nil? && genre != "all"
                where("name_en ilike :q AND genre_id = :g OR ean ilike :q AND genre_id = :g", q: "%#{query}%", g: genre).includes(:genre, :console, :brand, :images).order("#{sort} #{order}")
            else
                where("name_en ilike :q OR ean ilike :q", q: "%#{query}%").includes(:genre, :console, :brand, :images).order("#{sort} #{order}")
            end
        end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:32:01.740

您可以分段构建 AREL 表达式；它们仅在被迭代或以其他方式使用时才会执行。例如，您可以执行以下操作：

```
def self.product_search(query, console, genre, sort, order)
  if query
    clause = all # Start with all, filter down.
    if !console.nil? && console != "all" && !genre.nil? && genre != "all"
      clause = clause.where("name_en ilike :q AND console_id = :c AND genre_id = :g OR ean ilike :q AND console_id = :c AND genre_id = :g", q: "%#{query}%", c: console, g: genre)
    elsif !console.nil? && console != "all"
      clause = clause.where("name_en ilike :q AND console_id = :c OR ean ilike :q AND console_id = :c", q: "%#{query}%", c: console)
    elsif !genre.nil? && genre != "all"
      clause = clause.where("name_en ilike :q AND genre_id = :g OR ean ilike :q AND genre_id = :g", q: "%#{query}%", g: genre)
    else
      clause = clause.where("name_en ilike :q OR ean ilike :q", q: "%#{query}%")
    end
    clause.includes(:genre, :console, :brand, :images).order("#{sort} #{order}")
  end
end 
```

您可以继续链接和分配，直到您构建了您想要的整个搜索子句。这可以进一步优化，但我认为这足以证明链接 AREL 表达式的要点。

`nil`如果您颠倒某些逻辑并首先检查`console.nil?`and `genre.nil?`，然后在子句中，例如`else`仅检查 ，您也可以放弃其中的许多检查。`genre == "all"`

也可以将其中的一些定义为模型上的命名范围（或查看这篇名为[Named Scopes Are Dead](http://www.railway.at/2010/03/09/named-scopes-are-dead/)的博客文章以获得更好的方法），以干燥一些代码并使其更具可读性。

我上面的示例仍然需要大量工作，但我认为您可以按照该模式组装一些不错的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:30:48.747

这可能会让你走得太远，但我会将该代码移动到另一个对象中

```
# code in Product model
def self.product_search(search_criteria, console, genre, sort, order)
  return nil unless search_criteria.present?
  ProductSearch.new(search_criteria, genre, sort, order).find
end

# new class to handle Product search
class ProductSearch
  def initialize(search_criteria, console, genre, sort, order)
    @search_criteria = search_criteria
    @console = console
    @genre = genre
    @sort = sort
    @order = order
  end

  attr_reader :search_criteria, :console, :genre, :sort, :order

  def core_query_for_product_search
    # WARNING: .order("#{sort} #{order}") is open to sql injection attacks
    self.includes(:genre, :console, :brand, :images)
      .order("#{sort} #{order}")
      .where("name_en ilike :q OR ean ilike :q", q: "%#{search_criteria}%")
  end

  def with_console?
    !console.nil? && console != "all"
  end

  def with_genre?
    !genre.nil? && genre != "all" # you might want genre.present? instead of !genre.nil?
  end

  def find
    query = core_query_for_product_search
    query = query.where("genre_id = :g", g: genre) if with_genre?
    query = query.where("console_id = :c", c: console) if with_console?

    query
  end
end 
```

需要注意的几点：

1) order 子句中的 sql 注入，rails 擅长保护 where 子句但不保护 order，请参阅[rails 3 activerecord order - 什么是正确的 sql 注入解决方法？](https://stackoverflow.com/questions/7771103/rails-3-activerecord-order-what-is-the-proper-sql-injection-work-around)

2）这不再创建与您的查询完全相同的 sql，但我猜结果是相同的，rails AREL 链接总是会正确`AND xxxxx`添加`OR`可能会更困难，但在您的示例代码中，它出现`OR ean ilike :q`在每个这些查询中没有使用括号，所以我将 i 放在核心中，也许您实际上想要括号和不同的结果，不明白为什么`AND console_id = :c`在其中一些查询中出现两次

# sql - 如何在 SQL 中重复执行任务？

> ID：15260091
> 
> 赞同：1
> 
> 时间：2013-03-06T23:17:26.820
> 
> 标签：sql, sql-server-2008

有一个带有一些已声明变量的 SQL 脚本。我想为这些变量的各种值集运行此脚本并查看输出。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:21:17.050

请注意：此答案是从[此处](https://stackoverflow.com/questions/5912346/type-of-loops-in-sql-server)复制的，但对于您所要求的内容来说是一个很好的资源。

有关基于集合与程序的更多示例，请参见[此处](http://www.codeproject.com/Articles/34142/Understanding-Set-based-and-Procedural-approaches)、[此处](http://blogs.msdn.com/b/simonince/archive/2009/03/30/procedural-versus-set-based-sql.aspx)和[此处](http://ask.sqlservercentral.com/questions/34340/diff-between-cursor-based-approch-and-set-based.html)。

这是 SQL 代码中的一个实际示例：

```
DECLARE @someFlag INT
SET @someFlag = 0
WHILE (@someFlag <=5)
BEGIN
PRINT @someFlag 
SET @someFlag = @someFlag + 1
END
GO 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:24:39.810

如果您具有执行此操作的适当权限，则可以将脚本设置为存储过程，然后多次运行该过程。如何做到这一点的参考：http: [//msdn.microsoft.com/en-us/library/ms187926 (v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms187926(v=sql.100).aspx)

您也不必制作永久 proc，如果您不需要它或希望它在您运行它的任何数据库中，您可以将其设置为临时 proc。

所以不是 CREATE PROCEDURE dbo.usp_SomeProcedure AS .... 你会做 CREATE PROCEDURE #usp_SomeProcedure

您的另一个选择是将您的脚本放入一个 nvarchar(max) 变量中，并将它与您的其他变量一起使用来运行 sp_executesql ( [http://msdn.microsoft.com/en-us/library/ms188001.aspx](http://msdn.microsoft.com/en-us/library/ms188001.aspx) )。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T23:29:47.070

我会使用光标或 While 循环（首选是 While）。会是这样的

```
DECLARE @i INT
SET @i = 1

WHILE (@i <=10)
BEGIN    
   -- do whatever you need to do
   SET @i = @i + 1
END 
```

# jquery - 当我将鼠标悬停在图像或链接上时使文本淡入

> ID：15260094
> 
> 赞同：0
> 
> 时间：2013-03-06T23:17:45.857
> 
> 标签：jquery, html, css

`<p>`当我将鼠标悬停在某个图像上时，我试图在标签中获取一些文本。我无法显示文本，并且代码对我来说看起来不错。谁能帮我找出为什么文字没有显示/

这是HTML

```
<div class="iconcontainerhover">
        <a rel="left" href="#"><img style="margin-right: 160px;" src="img/facebookicon.png" /></a>
        <a rel="middle" href="#"><img src="img/Twittericon.png" /></a>
        <a rel="right" href="#"><img style="margin-left: 160px" src="img/google_plus_icon.png" /></a>
    </div>
    <div id="descripinfo">
        <div id="lefticoncontent">
            <p id="left">This is information about the left icon</p>
        </div>
        <div id="middleiconcontent">
            <p id="middle">This is information about the middle icon</p>
        </div>
        <div id="righticoncontent">
            <p id="right">This is information about the right icon</p>
        </div> 
```

这是jquery

```
$(function(){
     $('.iconcontainerhover a').mouseenter()(function(){
         var toShow = '#' + $(this).attr('rel');
         $('#discripinfo').show();
         $(toShow).show();
     }).mouseleave(function(){
         $('#discripinfo').hide();
     });
}); 
```

`#discripinfo`因此，当匹配的 img from`iconcontainerhover`悬停在上方时，我试图让文本淡入。

顺便说一句，`#discripinfo`标签设置为`display: none;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:20:21.680

`()`在那之后你有一个额外的东西`mouseenter`不应该在那里。除此之外，它看起来还不错，尽管您可能应该查看[`.hover`](http://api.jquery.com/hover/).

编辑：另外，请确保您也隐藏了打开的评论，否则您最终会立即显示所有描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:21:18.073

您可以使用`$('#descripinfo').fadeIn();`

从文档：[http ://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T23:25:29.650

`**[LIVE DEMO](http://jsbin.com/ewazej/1/edit)**`

```
$(function(){
     $('.iconcontainerhover a').on('mouseenter mouseleave', function( e ){

         $('#descripinfo > div').hide();       
         if(e.type=='mouseenter') $( '#'+this.rel+'iconcontent' ).show().siblings().hide();

     });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T23:26:50.283

您的 JavaScript 中有一些拼写错误。这是你应该写的。

```
$(function(){
    $('.iconcontainerhover a').mouseenter(function(){   
        var toShow = '#' + $(this).attr('rel') +'iconcontent';
        $('#descripinfo').show();
        $(toShow).show();
     }).mouseleave(function(){
        $('#descripinfo').hide();
     });
}); 
```

**更改 #1)`descripinfo`而不是`discripinfo`#2) 在左/右之后添加“iconcontent”。** 我添加 iconcontent 的原因是您可能实际上想要隐藏/显示整个外包装而不是内包装。从视觉上看，应用样式后它可能看起来更正确。

我仍然认为它没有达到您的预期，因为您显示的是左/右中心。当您执行#descripinfo 时，您真的应该隐藏和显示这些内容。要获得您想要的感觉，请将这个隐藏添加到您的 mouseenter。

```
 var toShow = '#' + $(this).attr('rel') +'iconcontent';
        $('#descripinfo').show();
        $('#descripinfo div').hide();
        $(toShow).show(); 
```

[这是最终的 jsFiddle。](http://jsfiddle.net/8bctf/)

# sql - Oracle SQL - 多次运行查询

> ID：15260098
> 
> 赞同：1
> 
> 时间：2013-03-06T23:18:04.290
> 
> 标签：sql, oracle

我有这个查询：

```
select '2012-Nov-01' As "Week_Of",
count(player_id) as cohort_size ,
count(case 
    when trunc(init_dtime)-trunc(create_dtime) >= 0 
    then player_id 
  end) as Day_0_Ret,
count(case 
    when trunc(init_dtime)-trunc(create_dtime) >= 1 
    then player_id 
  end) as Day_1_Ret,
count(case 
    when trunc(init_dtime)-trunc(create_dtime) >= 2
    then player_id 
  end) as Day_2_Ret,
count(case 
    when trunc(init_dtime)-trunc(create_dtime) >= 3
    then player_id 
  end) as Day_3_Ret
from player
where trunc(create_dtime) > To_Date('2012-Nov-01','yyyy-mon-dd')-7
and trunc(create_dtime) <= To_Date('2012-Nov-01','yyyy-mon-dd')
and world_flag != '1'
Which outputs:

Week_Of       Cohort_size    Day_0_Ret    Day_1 Ret    Day_2_Ret    Day_3_Ret
2012-Nov-01    2426           2426        1412         1349          1316 
```

我希望能够针对多组日期运行此查询，以便我的输出看起来像：

```
Week_Of       Cohort_size    Day_0_Ret    Day_1 Ret    Day_2_Ret    Day_3_Ret
2012-Nov-01    2426           2426        1412         1349          1316
2012-Nov-08    5106           2458        1945         1379          1248
2012-Nov-15    3580           1476        1412         1349          1146 
```

而不是在特定的一周内每次都重新运行查询。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T23:26:12.887

以下查询将您的逻辑更改为 a`group by`而不是 where：

```
select to_char(max(create_dtime), 'yyyy-mm-dd') As "Week_Of",
       count(player_id) as cohort_size ,
count(case 
    when trunc(init_dtime)-trunc(create_dtime) >= 0 
    then player_id 
  end) as Day_0_Ret,
count(case 
    when trunc(init_dtime)-trunc(create_dtime) >= 1 
    then player_id 
  end) as Day_1_Ret,
count(case 
    when trunc(init_dtime)-trunc(create_dtime) >= 2
    then player_id 
  end) as Day_2_Ret,
count(case 
    when trunc(init_dtime)-trunc(create_dtime) >= 3
    then player_id 
  end) as Day_3_Ret
from player
where trunc(create_dtime) >= To_Date('2012-Nov-01','yyyy-mon-dd') - 6
and world_flag != '1'
group by trunc((trunc(create_dtime) - (To_Date('2012-Nov-01','yyyy-mon-dd') -  6))/7)
order by 1 
```

它选择最后一个可用的日期来描述一周....

# c++ - gstreamer、glib 和 gtk 的错误。

> ID：15260100
> 
> 赞同：0
> 
> 时间：2013-03-06T23:18:29.657
> 
> 标签：c++, gtk, shared-libraries, gstreamer

我有在 Ubuntu-10.04 上编译的代码以及我随它安装的任何东西。我让突触升级了我 12.04，现在在编译 c++ Gstreamer 程序时出现这些错误。该代码在 linux 上构建一个 .so 并在 windows 上交叉编译一个 .dll。so 实现了一种对讲机。

```
(process:18707): GLib-GObject-CRITICAL **: /build/buildd/glib2.0-2.32.3
/./gobject/gtype.c:2722: You forgot to call g_type_init()

(process:18707): GLib-CRITICAL **: g_once_init_leave: assertion 
`result != 0' failed

(process:18707): GLib-GObject-CRITICAL **: /build/buildd/glib2.0-2.32.3
/./gobject/gtype.c:2722: You forgot to call g_type_init()

(process:18707): GLib-CRITICAL **: g_once_init_leave: assertion 
`result != 0' failed

(process:18707): GStreamer-CRITICAL **: gst_element_get_state: assertion 
`GST_IS_ELEMENT (element)' failed 
```

在我的代码中，我有一个包含接收器管道的类和另一个用于发送器管道的类。实际的 Gstreamer 内容是在不同线程中启动的 run() 方法中。

抛出这些错误的关键是第一次调用构造函数（它们是对称的），我在其中声明了一些 GstXXXX（例如 GstElement）变量，但尚未启动另一个线程。这需要调用 start() 方法。

我尝试使用 gtk_init() 作为一个论坛条目的建议。我将所有 pkg​​-config 调用添加到 eclipse，但它仍然说 gtk_init() 是一个未知调用。显然我并没有那么工作，但我**不应该**需要它。我不习惯。我现在把它注释掉了。

那么，有人可以建议可能导致 gtk/gst 抱怨的原因。

我注意到 g_type_init() 在 glib 2.36 版之后被弃用（我认为他们的意思是 glib）。那么，我如何知道安装了哪个版本的 glib？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:58:49.843

过错。我有一个调用引用了一个尚未创建的 gvariable。哑的。现在一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:54:59.133

您必须安装了旧的 glib，因为在较新的版本中，没有这样的警告。在你的电脑上找到所有的 glib 库，一个一个地重命名并构建，然后你就可以找出哪个现在在你的项目中工作了。然后检查您的构建选项和 glib 的相关 .pc 文件，以找出错误的库是如何参与您的构建的。警告在 gtype.c 中定义为 g_log (G_LOG_DOMAIN, G_LOG_LEVEL_CRITICAL, \"%s: You forgot to call g_type_init()", \ G_STRLOC); \

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T12:33:19.527

对于出现此错误的其他人，请确保您正在调用 gst_init。

# wpf - 用于从父菜单绑定子 ViewModel 上的命令的模式

> ID：15260109
> 
> 赞同：0
> 
> 时间：2013-03-06T23:19:13.603
> 
> 标签：wpf, mvvm, caliburn.micro, eventaggregator

我正在使用 Caliburn Micro 创建一个 WPF MVVM 应用程序。我在一个菜单（功能区）中有一组按钮，它们位于我的 shell 视图模型的视图中，它是一个 ScreenConductor。基于当前活动的屏幕视图模型，如果功能区按钮可用于活动屏幕，我希望禁用/启用它们，并在活动屏幕上调用操作或命令。

这似乎是一个常见的场景。是否有创建这种行为的模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:37:14.200

你为什么不做相反的事情，而不是检查当前活动屏幕支持哪些命令，让活动屏幕使用它支持的所有控件填充菜单或功能区选项卡，（我会让它注入自己的用户控件本身可能只是一个完整的菜单或功能区选项卡），这也将增强用户体验，因为它只会向用户显示他可以在当前活动屏幕上使用的控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:55:37.973

编辑：再次查看您的问题，我认为这比看起来要简单得多

我可以看到您遇到的唯一问题是子 VM 上缺少处理程序（和保护）方法将意味着在当前活动的 VM 上没有实现的按钮仍将启用。

CM 的默认策略是尝试找到匹配的方法名称（在解析操作文本之后），如果找不到，则不理会按钮。如果您要自定义该行为以便默认禁用按钮，则只需在 shell 中实现命令按钮即可轻松使其工作，确保将命令目标设置为活动项：

在 shell 中定义你的按钮，确保它们有一个指向活动子虚拟机的目标

```
<Button cal:Message.Attach="Command1" cal:Action.TargetWithoutContext="{Binding ActiveItem}" /> 
```

然后像往常一样在您的子虚拟机中实现该方法

```
public void Command1() { } 
```

以及可选的 CanXX 警卫

```
public bool CanCommand1 
{ 
    get 
    { 
        if(someCondition) return false; 

        return true; 
    } 
} 
```

假设你没有比这更复杂，它应该适合你

我将快速查看 CM 源代码，看看我是否能想出一些适用于此的东西

编辑：

好的，您可以自定义`ActionMessage.ApplyAvailabilityEffect`func 以获得您想要的效果 - 在您的 bootstrapper.Configure() 方法（或启动时的某处）中使用：

```
 ActionMessage.ApplyAvailabilityEffect = context =>
        {
            var source = context.Source;

            if (ConventionManager.HasBinding(source, UIElement.IsEnabledProperty))
            {
                return source.IsEnabled;
            }

            if (context.CanExecute != null)
            {
                source.IsEnabled = context.CanExecute();
            }
            // Added these 3 lines to get the effect you want
            else if (context.Target == null)
            {
                source.IsEnabled = false;
            }
            // EDIT: Bugfix - need this to ensure the button is activated if it has a target but no guard
            else 
            {
                source.IsEnabled = true;
            }

            return source.IsEnabled;
        }; 
```

这似乎对我有用 - 没有不能绑定到命令的方法的目标，所以在这种情况下我只是设置`IsEnabled`为 false。仅当在活动子 VM 上找到具有匹配签名的方法时才会激活按钮 - 显然在使用它之前给它一个很好的测试:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T10:44:01.840

在 shell 视图模型中为活动屏幕定义一个属性（比如说 ActiveScreen）。假设您有每个按钮的属性，例如 DeleteButton、AddButton。Screen 是屏幕的视图模型。

```
 private Screen activeScreen;

    public Screen ActiveScreen
    {
        get
        {
            return activeScreen;
        }
        set
        {
            activeScreen= value;

            if (activeScreen.Name.equals("Screen1"))
            {
                 this.AddButton.IsEnabled = true; 
                 this.DeleteButton.IsEnabled = false; 
            }
            if else (activeScreen.Name.equals("Screen2"))
            {
                 this.AddButton.IsEnabled = true; 
                 this.DeleteButton.IsEnabled = true; 
            }

            NotifyPropertyChanged("ActiveScreen");
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T08:16:18.850

在这种情况下，我会使用 Caliburn.Micro 事件聚合，如下所示：

*   创建一个以`ScreenCapabilities`一堆布尔属性命名的类（例如`CanSave`,`CanLoad`等）
*   创建一个`ScreenActivatedMessage`带有 type 属性的消息`ScreenCapabilities`
*   为您的功能区创建一个视图模型，该视图模型订阅（处理）`ScreenActivatedMessage`

在功能区视图模型的`Handle`方法中，根据提供的`ScreenCapabilities`.

它看起来像这样（手动输入的代码，未经测试）：

```
public class ScreenCapabilities
{
  public bool CanSave { get; set; }
  // ...
}

public class ScreenActivatedMessage
{
  public ScreenCapabilities ScreenCapabilities { get; set; }
  // ...
}

public class RibbonViewModel : PropertyChangedBase, IHandle<ScreenActivatedMessage>
{
  private bool _canSave;
  public bool CanSave
  {
    get { return _canSave; }
    set { _canSave = value; NotifyPropertyChanged(() => CanSave); }
  }

  // ...

  public void Handle(ScreenActivatedMessage message)
  {
    CanSave = message.ScreenCapabilities.CanSave;
    // ...
  }
} 
```

然后，在适当的地方，当屏幕发生变化时，发布消息。有关更多信息，请[参阅 Caliburn.Micro wiki](http://caliburnmicro.codeplex.com/wikipage?title=The%20Event%20Aggregator "Caliburn.Micro 维基")。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T01:20:22.140

为 shell 视图模型上的每个命令创建方法和附带的布尔属性。（参见下面的代码示例。）Caliburn.Micro 的约定会自动为您将它们连接到按钮。然后，当您更改视图以重新评估它们时，只需为布尔属性引发属性更改事件。

例如，假设您有一个保存按钮。您的 xaml 中该按钮的名称将是 Save，并且在您的视图模型中，您将有一个 Save 方法和一个 CanSave 布尔属性。见下文：

```
public void Save()
{
    var viewModelWithSave = ActiveItem as ISave;
    if (viewModelWithSave != null) viewModelWithSave.Save();
}

public bool CanSave { get { return ActivateItem is ISave; } } 
```

然后，在您的指挥中，每当您更改活动屏幕时，您都会调用`NotifyOfPropertyChange(() => CanSave);`. 这样做会导致您的按钮被禁用或启用，具体取决于活动屏幕是否能够处理该命令。在此示例中，如果活动屏幕未实现`ISave`，则保存按钮将被禁用。

# c# - SocketException 连接 SFTP 服务器：名称有效，但未找到请求类型的数据

> ID：15260111
> 
> 赞同：1
> 
> 时间：2013-03-06T23:19:17.853
> 
> 标签：c#, .net, sockets, sftp, socketexception

我正在尝试使用 SharpSsh 库连接我的 sftp 服务器，但出现以下错误：

```
System.Net.Sockets.SocketException (0x80004005):
The requested name is valid, but no data of the requested type was found 
```

我正在使用以下代码进行连接

```
Tamir.SharpSsh.Sftp sftp = new Tamir.SharpSsh.Sftp("ftp.simptr.us", "username", "password"); 
```

为什么会抛出这个异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:56:53.153

此错误消息与 Winsock`WSANO_DATA`错误代码相关联。这意味着，您尝试连接的域名的 DNS 记录存在问题。

另请参阅
[https://docs.microsoft.com/en-us/windows/win32/winsock/windows-sockets-error-codes-2#WSANO_DATA](https://docs.microsoft.com/en-us/windows/win32/winsock/windows-sockets-error-codes-2#WSANO_DATA)

这不太可能与 SharpSsh 库有关。

尝试 telnet 验证，你应该得到同样的错误：

```
telnet ftp.simptr.us 22 
```

# iis-7 - Siteminder 根资源规则

> ID：15260112
> 
> 赞同：1
> 
> 时间：2013-03-06T23:19:17.977
> 
> 标签：iis-7, siteminder

我有一个使用 Siteminder SOO 运行的 ASP.NET MVC 网站。除主页外，Al 安全工作正常。

在 SiteMinder 配置中，我只有一个具有资源过滤器的领域：“/”和默认资源保护：“受保护”。因此，所有 uris 都受到保护。我对每个 uri 都有规则，以及一组适用于这些规则的域策略。问题是根页面；我不知道如何编写允许访问主页的规则，例如：“ [http://misite.com/](http://misite.com/) ”。

如果我使用资源 =“/”创建规则，则有效资源为：“my-siteminder-agent//”。具有此规则的政策永远不会适用。

¿ 如何创建规则以允许经过身份验证的用户访问主页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T02:36:11.333

您还可以创建一个不受保护的规则以允许特定的主页...即 index.htm

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T13:21:32.130

我使用 SiteMinder 上的规则解决了它，以允许访问“/ Home”并使用 IIS 重写模块进行重定向。

```
<rewrite>
    <rules>
        <rule name="Root Hit Redirect" stopProcessing="true">
            <match url="^$" />
            <action type="Redirect" url="/Home" />
        </rule>
    </rules>
</rewrite> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-18T16:18:16.917

将规则更改为 * 而不是 /*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-19T10:37:33.977

如果需要保护整个站点，则无需为不同路径创建多个规则。涵盖所有内容的标准规则就足够了。请参阅@bcarroll 的答案进行设置。当您以后必须更改政策等时，这将使您的生活更轻松。

# mysql - 我应该使用什么类型的连接？

> ID：15260114
> 
> 赞同：0
> 
> 时间：2013-03-06T23:19:31.487
> 
> 标签：mysql, sql, database

我的加入知识很糟糕，我找不到正确的。我想加入 TableA.userID 和 TableB.otherID 上的两个表以匹配所需的输出。我没有在表上设置任何外键或主键。我应该在这里使用什么？

```
TableA:
+--------+--------+---------+
| userID | field1 | field2  |
+--------+--------+---------+

TableB:
+--------+----------+---------+---------+---------+
| userID | otherID  | myData1 | myData2 | myData3 | 
+--------+----------+---------+---------+---------+

Desired Output:
+--------+----------+---------+---------+---------+--------+--------+
| userID | otherID  | myData1 | myData2 | myData3 | field1 | field2 |
+--------+----------+---------+---------+---------+--------+--------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:23:34.963

这应该这样做：

```
select a.userID, b.otherID, b.myData1, b.myData2, b.myData3, a.field1, a.field1
from TableA a
inner join TableB b
on a.userID = b.otherID 
```

我建议在 TableA.userID 和 TableB.otherID 上添加索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:26:12.003

也许我误解了这个问题，但假设 USERID 和 OTHERID 是相同的数据类型并且您不需要执行任何数据转换，您就不能只使用简单的 INNER JOIN。

```
SELECT A.userID, B.otherID, B.myData, B.myData2, B.myData3, A.field1, A.field2
FROM   TableA as A
       INNER JOIN TableB as B
       ON A.UserId = B.OtherId 
```

# jpa - 具有唯一约束的 ebean 单向 @OneToOne 关系

> ID：15260116
> 
> 赞同：5
> 
> 时间：2013-03-06T23:19:36.100
> 
> 标签：jpa, playframework, playframework-2.0, ebean

我有一个用户类：

```
@Entity
public class User extends Model {

@Id
public Long id;
public String email;
public String name;
public String password;
} 
```

和一个司机班

```
@Entity
public class Driver extends Model {
@Id
public Long id;

@OneToOne (cascade = CascadeType.ALL)
@Column(unique = true)
public User user;
} 
```

我想确保 user_id 在 Drivers 表中是唯一的。但是上面的代码并没有强制执行。（我可以创建多个具有相同用户 ID 的驱动程序）。

理想情况下，我不想在 User 类中添加 @OneToOne 关系，因为我的应用程序中有几个不同的角色（例如司机、教师、代理等），我不想用所有这些关系污染用户类。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T04:27:12.570

我已经在模型上为我尝试了这段代码，并且它有效。需要注意的一件事是，您必须使用`@OneToOne`注释让 ORM 知道您有对其他模型的外键引用。

该模型如下所示：

```
@Entity
// add unique constraint to user_id column
@Table(name = "driver", 
       uniqueConstraints = @UniqueConstraint(columnNames = "user_id")
)
public class Driver extends Model {
   @Id
   public Long id;

   @OneToOne
   @JoinColumn(name = "user_id")
   public User user;
} 
```

它将生成这样的进化脚本：

```
create table driver (
   id            bigint not null,
   user_id       bigint,

   constraint uq_driver_1 unique (user_id), # unique database constraint
   constraint pk_driver primary key (id)
); 
```

因此，使用这种方法，您可以确保您在桌子上拥有唯一的`user`参考。`driver`

* * *

> ### 附加信息
> 
> 因为有一个额外的约束，不是由框架处理而是由应用在模型上的数据库处理（*例如* `unique` *约束*），为了验证输入或处理发生的异常，您可以包围`Model.save()`或`form.get().save()`表达（*保存模型*） with`try-catch`块来处理**PersistenceException**。

# json - 将大型 json 文件导入 MongoDB

> ID：15260127
> 
> 赞同：1
> 
> 时间：2013-03-06T23:20:34.397
> 
> 标签：json, mongodb, mongoimport, database

所以我有一个包含多条记录的 json 文件，看起来像这样......

```
{"2597401":[{
"jobID":"2597401",
"account":"TG-CCR120014",
"user":"c",
"pkgT":{"pgi/7.2-5":{"libA":["libpgc.so"],"flavor":["default"]}},
"startEpoch":"1338497979",
"runTime":"1022",
"execType":"user:binary",
"exec":"/share/home/01482/c/appker/ranger/NPB3.3.1/NPB3.3-MPI/bin/ft.D.64",
"numNodes":"4",
"sha1":"5a79879235aa31b6a46e73b43879428e2a175db5",
"execEpoch":1336766742,
"execModify":"Fri May 11 15:05:42 2012",
"startTime":"Thu May 31 15:59:39 2012",
"numCores":"64",
"sizeT":{"bss":"1881400168","text":"239574","data":"22504"}},

{"jobID":"2597401",
"account":"TG-CCR120014",
"user":"c",
"pkgT":{"pgi/7.2-5":{"libA":["libpgc.so"],"flavor":["default"]}},
"startEpoch":"1338497946",
"runTime":"33",
"execType":"user:binary",
"exec":"/share/home/01482/c/appker/ranger/NPB3.3.1/NPB3.3-MPI/bin/cg.C.64",
"numNodes":"4",
"sha1":"caf415e011e28b7e4e5b050fb61cbf71a62a9789",
"execEpoch":1336766735,
"execModify":"Fri May 11 15:05:35 2012",
"startTime":"Thu May 31 15:59:06 2012",
"numCores":"64",
"sizeT":{"bss":"29630984","text":"225749","data":"20360"}},

{"jobID":"2597401",
"account":"TG-CCR120014",
"user":"c",
"pkgT":{"pgi/7.2-5":{"libA":["libpgc.so"],"flavor":["default"]}},
"startEpoch":"1338500447",
"runTime":"145",
"execType":"user:binary",
"exec":"/share/home/01482/appker/ranger/NPB3.3.1/NPB3.3-MPI/bin/mg.D.64",
"numNodes":"4",
"sha1":"173de32e1514ad097b1c051ec49c4eb240f2001f",
"execEpoch":1336766756,
"execModify":"Fri May 11 15:05:56 2012",
"startTime":"Thu May 31 16:40:47 2012",
"numCores":"64",
"sizeT":{"bss":"456954120","text":"426186","data":"22184"}},

{"2597401":[{.... 
```

每条记录都在一行上。所以json文件的一般格式如下：

```
{"1111111: [{"jobID":value,"account":value,"user":value,"pkgT":{value:{"libA":[VALUES],"flavor":[value]}},"startEpoch":value,"runTime":value,"execType":value,"exec":value,"numNodes":value,"sha1":value,"execEpoch":value,"execModify":value,"startTime":value,"numCores":value,"sizeT":{"bss":value,"text":value,"data":value}} 
```

我正在尝试使用 mongoimport 使用以下命令将这些导入数据库：

```
mongoimport --db dbName --collection collectionName fileName --jsonArray 
```

我读到每条记录都应该在它自己的行上，就是这样。但是，当我导入文件时，它会将其作为单个文档（也称为记录）导入。如何让 mongo 将此文件解释为包含多个记录而不是单个大文档？谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:45:16.623

我能够修复它。我在文件中的所有文本周围都有大括号。当我删除它们时，它成功地单独导入了记录。

# css - 我的简单 CSS 有什么问题

> ID：15260128
> 
> 赞同：0
> 
> 时间：2013-03-06T23:20:38.553
> 
> 标签：css

我将以下内容放在我的html开头，它不起作用。要点应该很明显，将顶部和底部边距设置为 25px，将左右边距设置为 75px。以及缩进段落。但是没有任何效果，无论我做什么，它看起来都不像是在尝试运行代码。

```
<style>
  <!--
    p {text-indent:10px;}
    margin:25px 75px;
  -->
</style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:22:50.747

```
<style>

    p {
        text-indent:10px;
        margin:25px 75px;
    }

</style> 
```

然后确保你`<p>`的 HTML 中有一个标签来应用它。

在进一步推进之前，我会专注于完成一些基本的 HTML/CSS 教程 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:23:25.900

`<style>`应该在里面，`<head>`它应该看起来像这样：

```
<head>
  <style>
    p {
      text-indent: 10px;
      margin: 25px 75px;
    }
  </style>
</head> 
```

# rest - 像 Servlet 过滤器一样休息 WS 过滤器？

> ID：15260133
> 
> 赞同：0
> 
> 时间：2013-03-06T23:20:55.523
> 
> 标签：rest, servlets, glassfish, jersey

我在 Glassfish 上运行 Jersey。如何通过过滤器运行每个 Web 服务请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:14:57.367

有一种东西叫做 ContainerRequestFilter

```
 com.sun.jersey.spi.container.ContainerRequestFilter; 
```

# css - CSS子级大于父级允许？

> ID：15260134
> 
> 赞同：0
> 
> 时间：2013-03-06T23:20:57.983
> 
> 标签：css, w3c

快速提问。

我知道我可以使子 div 大于父级，但是 w3c 允许吗？是否违反某些规则？有性能问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:25:13.323

在许多情况下，您需要在 parent 中溢出，`div`而 child 较大`div`：例如，固定位置的内容框架。

并且不应该有性能障碍；它应该与将孩子渲染为父母的兄弟姐妹大致相同`div`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T23:29:00.173

如果标准不允许这样做，则标准不会定义[`overflow`](http://www.w3.org/TR/CSS2/visufx.html#overflow)CSS 属性。

# java - 如何在android XML中定位一个按钮？

> ID：15260140
> 
> 赞同：-1
> 
> 时间：2013-03-06T23:21:21.903
> 
> 标签：java, android, xml

嘿，我的 XML 按钮的代码如下，我希望将 Anthem 按钮移动到靠近底角的左侧，我将在右下角添加一个停止按钮，谁能告诉我如何做这？

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:text="@string/country1"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="45sp" />

<ImageView
    android:id="@+id/ivFlag1"
    android:layout_width="match_parent"
    android:layout_height="64dp"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="55dp"
    android:src="@drawable/sflag" />

<Button
    android:id="@+id/bEdinburgh"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/ivFlag1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="29dp"
    android:gravity="center"
    android:text="@string/Edinburgh"
    android:textSize="20sp" />

<Button
    android:id="@+id/bGlasgow"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/bEdinburgh"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="29dp"
    android:gravity="center"
    android:text="@string/Glasgow"
    android:textSize="20sp" />

<Button
    android:id="@+id/bAberdeen"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/bGlasgow"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="29dp"
    android:gravity="center"
    android:text="@string/Aberdeen"
    android:textSize="20sp" />

<Button
    android:id="@+id/bAnthem"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/bAberdeen"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="29dp"
    android:background="@drawable/custom"
    android:textSize="20sp" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:41:37.153

在 Anthem 按钮中设置以下属性

```
android:layout_alignParentLeft="true"
android:layout_alignParentBottom="true" 
```

并跟随停止按钮

```
android:layout_alignParentRight="true"
android:layout_alignParentBottom="true" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:36:13.183

在您的 Anthem Button 中，设置`android:layout_alignParentLeft`或设置`android:layout_alignParentRight`即可`true`。

# javascript - 将 JSON 数据打印到 HTML div？

> ID：15260144
> 
> 赞同：0
> 
> 时间：2013-03-06T23:21:34.013
> 
> 标签：javascript, jquery, html, css

所以我的控制台日志正确显示了所有信息，所以我知道我的代码工作，但现在我想将数据输出到我的 HTML 中的某个 div 以显示正在播放的播放列表的歌曲。如何将 JSON 数据从 sound[i​​].title 打印到 div？

```
widget.bind(SC.Widget.Events.PAUSE, function(){
    $("#{STORIES.story_id}6 :image").removeClass('buyy')
        .removeClass('buyyy')
        .addClass('buy');

    widget.getSounds(function(sound) {
        var a = sound.length;
        for(var i=0; i<a; i++){
            console.log(sound[i].title);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:23:24.257

缺少关于您实际希望将数据放在 DOM 树中何处的任何信息......

```
$('#someElement').append($('<div>', {text: sound[i].title })); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:23:17.080

在许多现代浏览器中，使用 jQuery，您可以执行以下操作：

```
$('#myDiv').text(JSON.stringify(myJson)); 
```

此外，如果您希望格式化 JSON，您可以使用：

```
JSON.stringify(myJson, undefined, 2);
// JSON -------^       ^          ^
// no filter ----------^          ^
// indent two spaces -------------^ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T23:28:04.060

像这样的东西

```
 <script type="text/javascript">
  //stuff and more stuff//

   for(var i=0; i<a; i++){
      document.getElementById('myList').append= sound[i].title+', ';
    }

</script>
<p>My playlist: <span id='myList'>Empty</span> </p> 
```

# c# - File.Delete 对路径的访问被拒绝

> ID：15260146
> 
> 赞同：8
> 
> 时间：2013-03-06T23:21:44.040
> 
> 标签：c#, file

我的控制台应用程序在工作时正在创建一些运行时文件，所以我想做的是在应用程序启动时删除所有这些文件。我试过这个：

```
public static void Empty(string targetDir)
{
    var directory = new DirectoryInfo(targetDir);
    if (!directory.Exists) return;
    foreach (var file in directory.GetFiles()) file.Delete();
    foreach (var subDirectory in directory.GetDirectories()) subDirectory.Delete(true);
} 
```

...只是在给定路径（位于程序执行路径的子目录中）中查找所有文件/文件夹，然后将其删除。但是，我得到以下异常：

> 拒绝访问路径“文件”。

我试图以管理员身份运行该程序，但没有成功；但是，我想要一个无需使用管理员权限即可工作的解决方案。

备注：

1.  该文件未在其他应用程序中运行。
2.  该文件不在受保护的文件夹中。
3.  该文件可以毫无问题地手动删除，这就是我在这里的原因。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-08T14:47:23.250

我收到此错误，发现这是因为我的测试文件是只读的。改变了这一点，我现在可以使用 fileinfo 删除它们，不用担心。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T00:36:21.370

您说文件未在另一个应用程序中打开，但必须在您的应用程序中打开：

```
//Create some directories to delete
Directory.CreateDirectory("C:/Temp/DeleteMe");
Directory.CreateDirectory("C:/Temp/DeleteMe/DeleteMe");
File.Create("C:/Temp/DeleteMe/DeleteMeFile");//FileStream still open!!

//Delete the files
var directory = new DirectoryInfo("C:/Temp/DeleteMe");
if (!directory.Exists) return;
foreach (FileInfo file in directory.GetFiles())
{
    file.Delete();
}
foreach (DirectoryInfo dir in directory.GetDirectories())
{
    dir.Delete(true);
} 
```

确保在创建文件时释放文件流

```
//Create some directories to delete
Directory.CreateDirectory("C:/Temp/DeleteMe");
Directory.CreateDirectory("C:/Temp/DeleteMe/DeleteMe");
using (File.Create("C:/Temp/DeleteMe/DeleteMeFile")) { }

//Delete the files
var directory = new DirectoryInfo("C:/Temp/DeleteMe");
if (!directory.Exists) return;
foreach (FileInfo file in directory.GetFiles())
{
    file.Delete();
}
foreach (DirectoryInfo dir in directory.GetDirectories())
{
    dir.Delete(true);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-08-10T02:25:59.933

```
if (File.Exists(filePath))
{
    File.SetAttributes(filePath, FileAttributes.Normal);
    File.Delete(filePath);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T23:31:43.103

使用 Windows API MoveFileEx 可能是一个潜在的解决方案，其参数 MOVEFILE_DELAY_UNTIL_REBOOT 仅在重新启动后删除文件。

请检查[http://msdn.microsoft.com/en-us/library/aa365240%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa365240%28v=vs.85%29.aspx)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T23:49:42.793

尝试使用这些`Microsoft.VisualBasic.FileIO.FileSystem`方法，因为它有一个方便的`DeleteDirectory`方法，我前段时间遇到了访问问题，这是解决我的问题的方法。

```
var directory = new DirectoryInfo(targetDir);
if (directory.Exists)
{
    Microsoft.VisualBasic.FileIO.FileSystem.DeleteDirectory(targetDir, Microsoft.VisualBasic.FileIO.DeleteDirectoryOption.DeleteAllContents);
} 
```

# arrays - 在位图中查找子位图？

> ID：15260148
> 
> 赞同：0
> 
> 时间：2013-03-06T23:21:58.457
> 
> 标签：arrays, windows, search, bitmap

我正在尝试编写一个算法来确定从文件加载的 24 位位图中的位是否存在于内存中已经存在的位数组中。这并不像听起来那么容易：数组`memBmp`是从 中返回的`GetDIBits`，所以它是一系列行和填充；因此，查找子位图是否存在不仅仅涉及比较`memBmp`.

例子：

内存Bmp：

0 0 0 0 0 1 0 1 0 0

0 0 0 0 0 1 0 1 0 0

0 0 0 0 0 1 0 1 0 0

如果从文件加载的位图包括：

1 0 1

1 0 1

1 0 1

该算法需要识别这是 memBmp 的“子位图”。

我已经设置了基本大纲，但我完全不知道如何编写该算法的匹配检查部分：

```
int FindBitmap(TCHAR *file, BYTE *memBmp, int membmpWidth, int membmpHeight)
{
    HBITMAP hBitmap = (HBITMAP) LoadImage(NULL, file, IMAGE_BITMAP, 0, 0, LR_LOADFROMFILE);

    BITMAP bm;
    HDC hDC1 = CreateCompatibleDC(NULL);
    BITMAPINFO bi;
    BYTE *data;
    if(!hBitmap)
    {
        return -1;
    }
    GetObject(hBitmap, sizeof(bm), &bm);
    SelectObject(hDC1, hBitmap);
    bi.bmiHeader.biSize = sizeof(BITMAPINFOHEADER);
    bi.bmiHeader.biWidth = bm.bmWidth;
    bi.bmiHeader.biHeight = -bm.bmHeight;
    bi.bmiHeader.biPlanes = 1;
    bi.bmiHeader.biBitCount = 24;
    bi.bmiHeader.biCompression = BI_RGB;        
    bi.bmiHeader.biSizeImage = 0;        

    data = (BYTE*)malloc(4*bm.bmWidth*bm.bmHeight);
    GetDIBits(hDC1, hBitmap, 0, bm.bmHeight, data, &bi, DIB_RGB_COLORS);

    // Now what?

    free(data);
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:46:51.003

搜索第一行，然后在找到后比较后续行

```
for (i = 0; i < ImgWidth - TrgtWidth; i ++)
{
    for (j = 0; j < ImgHeight - TrgtHeight; j++)
    {
        // find first row of trgt[0] at location img[i][j]
        // if you find it iterate over the other rows to confirm they also match.
        // otherwise continue looking for match only for the first row.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:26:30.237

将您的阵列翻转过来并添加第四列零。对您的子位图执行相同的操作。现在认识到一行中的四位代表一个十六进制数字，为两者构造十六进制字符串（一个为 8 个元素，另一个为一些值）。使用字符串匹配函数来查看一个是否存在于另一个中。

您提供的位图示例：

```
00010100
00010100
00010100 
```

打开它的一侧，添加零：

```
0000 = '0'
0000 = '0'
0000 = '0'
1110 = 'E'
0000 = '0'
0000 = 'E'
0000 = '0'
0000 = '0' 
```

对子数组执行相同操作：

```
1110 = 'E'
0000 = '0'
0000 = 'E' 
```

所以你现在可以在“000E0E00”中搜索“E0E”——这将匹配。

您实际上不需要添加零 - 您可以将连续的三位视为八进制数 (0-7)。但是对最后的“X是否属于Y”使用字符串匹配函数会让你的生活更轻松......

# css - HTML：使用条件注释

> ID：15260151
> 
> 赞同：0
> 
> 时间：2013-03-06T23:22:10.297
> 
> 标签：css, internet-explorer-8, comments, conditional

再会，

我想应用两个不同的 CSS 代码来修复 IE8 中的一些字体渲染问题（假粗体），如果它们具有相同的名称，后者无法识别所有字体系列，而是只识别第一个字体系列，所以我正在尝试使用条件注释来解决这个问题：

第一个代码适用于旧版本的 IE（包括 IE8）：

```
<!--[if lte IE 8]>
     <link href="IE8fonts.css" rel="stylesheet" type="text/css">
<![endif]--> 
```

第二个适用于 IE9、IE10 和所有非 IE 浏览器（Chrome、Firefox、Opera、Safari ......），它们都没有这个虚假的粗体问题：

```
<!--[if IE 9 | !IE]><!-->
     <link href="fonts.css" rel="stylesheet" type="text/css">
<!--<![endif]--> 
```

我知道第一个代码是正确的（或者可能不是：p），所以我想知道第二个代码是否也正确，因为当我在 IE 中更改兼容模式时，我没有得到我期望的结果，肯定有问题条件 [如果 IE 9 | !IE] 我也想知道放置这两个条件注释的正确顺序（如果有的话）。请帮助我，因为我在与兼容性相关的任何事情上都是新手：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:41:27.503

您可以先为 IE9+ 和其他浏览器应用 css，然后为 IE8 或更低应用条件注释，因此如果浏览器小于或等于 IE8，则in 的规则将被`font-family`in的规则覆盖。这样您就可以避免复杂和不必要的条件注释。`fonts.css``IE8fonts.css`

```
<link href="fonts.css" rel="stylesheet" type="text/css">
<!--[if lte IE 8]>
     <link href="IE8fonts.css" rel="stylesheet" type="text/css">
<![endif]--> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:37:11.030

条件注释是 IE 特有的功能。其他浏览器只是将它们视为普通注释。请记住，HTML 注释以 . 开头`<!--`和结尾`-->`。因此`<!--[anything]>`是正常评论的*开始*，非 IE 用户代理将忽略之后的任何内容，直到下一次出现`-->`. 另一方面`<!--[anything]><!-->`是完整的注释，非 IE 浏览器将处理之后的任何内容。

所以我建议你使用：

```
<!--[if gte IE 9]><!-->
  <link href="fonts.css" rel="stylesheet" type="text/css">
<!--<![endif]--> 
```

从常规 HTML 解析器（非 IE）的角度来看，这是包含一个链接元素的两个常规注释。

# jquery - 向上滚动时动画的元素，向下滚动时反转

> ID：15260152
> 
> 赞同：2
> 
> 时间：2013-03-06T23:22:10.943
> 
> 标签：jquery, jquery-animate

我正在尝试做一些我确信很简单的事情......我正在慢慢地自学 JQuery，所以我整天都在阅读论坛和谷歌搜索不同的术语，但我似乎无法实现！

当以下 div 向上滚动（没问题）时，我需要标志的图像向左滑动（看不见）......但是，当用户向下滚动时，我希望动作反转。

这个小提琴实现了初始动画：http: [//jsfiddle.net/fr2Sw/](http://jsfiddle.net/fr2Sw/)

我已经尝试了一大堆不起作用的方法......像这样的功能：

```
var canSee = false;

$(window).scroll(function() {
    if ($(this).scrollTop() > 100) {
        $("#box").animate({left:"-=200px"});
        canSee = true;
    } else if (!canSee) {
        $("#box").animate({left:"=0px"});
    }
}); 
```

非常感谢您，非常感谢您的帮助！如果您不介意，请尽可能用“英文”解释每个功能中发生的情况：o）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T23:44:35.543

Maybe something like this:

```
var canSee = true;

$(window).scroll(function() {
    if ($(this).scrollTop() > 100 && canSee) {
        $("#box").animate({left:"-=200px"});
        canSee = false;
    } else if ($(this).scrollTop() <= 100 && !canSee) {
        $("#box").animate({left:"+=200px"});
        canSee = true;
    }
}); 
```

Initialize casSee to true, because the user can see the image. When the user scrolls, do the following:

If the Windows's scrollTop is over 100 and the image is still visible, hide it by sliding it left out of the screen, so it only happens once--it will never scroll beyond 200px. When the user scrolls back up, if the image is out of the viewport and canSee is set to false, slide the image back in and set canSee to true, because the user can see it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:02:12.843

如果您只想在滚动条位于顶部时显示图像，请使用以下命令：

```
$(document).ready(function () {
    $(window).scroll(function () {
        if ($(window).scrollTop() === 0) {
            $("#box").animate({
                left: "0px"
            });
        } else if ($("#box").css("left") == "0px") {
            $("#box").animate({
                left: -$("#box").width()
            });
        }
    });
}); 
```

# android - 如何在 Android 上读取文本文件 (.txt) 并在字符串变量中设置单词？

> ID：15260156
> 
> 赞同：-2
> 
> 时间：2013-03-06T23:22:36.550
> 
> 标签：android, string, set, text-files, words

我正在尝试读取文本文件（.txt），我已经完成了。

但是我需要在文本文件中的每个单词中设置字符串变量。

例如，这些单词位于名为 words.txt 的文本文件中：

```
whatsup; superman; heroe; batman; 
```

这是我用来阅读 words.txt 的代码：

```
 File directory = Environment.getExternalStorageDirectory();
    File file = new File(directory.getAbsolutePath()+"/HiMom", "words.txt");        
    try {
        FileInputStream fIn = new FileInputStream(file);         
        InputStreamReader file = new InputStreamReader(fIn);
        BufferedReader br=new BufferedReader(file);
        String line = br.readLine();
        String text = "";
        while (line!=null)
        {
            text = text + line + "\n";
            line = br.readLine();
        }
        br.close();
        file.close();
        etContentArchivo.setText(text);

    } catch (IOException e) {
    } 
```

现在我需要阅读文本文件并将每个单词都设置在“;”之前 在字符串变量中，例如：

```
String get1 = whatsup;
String get2 = superman;
String get3 = heroe;
String get4 = batman; 
```

它也可以是一个字符串数组。但我不知道如何在字符串变量中设置单词。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:36:14.697

你可以做`String[] words = text.split(";");`

# javascript - 使用 primefaces 和 oncomplete 将表单目标更改为 _blank

> ID：15260159
> 
> 赞同：1
> 
> 时间：2013-03-06T23:22:43.090
> 
> 标签：javascript, forms, jsf, primefaces

这个话题已经出现在其他帖子中，但没有提到的解决方案对我有用，所以我在这里，希望有人能指出我正确的方向。

基本上，我有一个带有 Primefaces 3.5 的应用程序，带有 2 个命令按钮，它们执行支持 bean 方法以生成两个不同的报告作为输出流（没有可用的 GET）。此报告之一作为附件生成，而另一个应显示在另一个选项卡中。两者形式相同。

我的问题来自在单独的选项卡中生成的报告：由于报告共享相同的表单，我不能在表单定义中使用 target=blank 并且由于我必须在我的支持 bean 中进行验证，我必须在主选项卡，仅在一切顺利的情况下打开新选项卡。

我在表单页面中尝试了以下js：

```
function test() {
    document.getElementById("formRep3_1").target = '_blank';
} 
```

由 bean 调用

```
RequestContext.getCurrentInstance().execute("test()"); 
```

验证成功后。但它不起作用。

我还尝试在报告按钮上设置一个 oncomplete="test()"，稍微修改一下 js，如下所示：

```
function test() {
    var v = '<h:outputText value="#{repReqStatus.resultCheck}" />';
    if (v.value == "success") {
        document.getElementById("formRep3_1").target = '_blank';
    }
    else {
        alert('no');
    }
    } 
```

但似乎 oncomplete 根本没有被调用！即使我再做一次检查也不会

```
oncomplete="if (!args.validationFailed){test()}" 
```

所以，是的，我迷路了。非常感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:09:56.667

在调用链接的操作**期间**，您不能更改链接的目标。太晚了。

最好的办法是避开，而是在所需的 URL 上`target="_blank"`调用 JavaScript 。`window.open()`您可以将 PDF 报告存储在会话中，或者为 URL 准备请求参数，以便它可以根据这些请求参数生成所需的 PDF 报告。

# ajax - D3.js 忽略重复值

> ID：15260162
> 
> 赞同：1
> 
> 时间：2013-03-06T23:23:03.583
> 
> 标签：ajax, d3.js

我正在探索 D3.js。我主要使用他们的[教程](http://mbostock.github.com/d3/tutorial/bar-1.html)来获得我所拥有的。但是我做了一些调整。我正在做的是计算特定表中活动和非活动项目的数量。然后它会显示一个包含这些值的图表。大多数情况下都可以正常工作。我有两个问题：

1.  删除项目时，它不会通过我的 AJAX 调用自动更新。仅在添加项目时更新。但对于这篇文章，我并不担心这一点。
2.  我的主要问题：重复值不被视为单独的数字。相反，它看到 [10,10] 并将其作为图表中的单个条输出为 10（而不是 2 个条）。

查看 D3 文档，似乎问题出在 .data 上。文档提到它连接数据。

```
$(document).on("DOMSubtreeModified DOMNodeRemoved", ".newsfeed", function() {
    var columns = ['created','deleted'];
    var data = [numN, numD];
    var y = d3.scale.linear()
            .domain([0, d3.max(data)])
            .range([0, 420]);
    var x = d3.scale.ordinal()
            .domain(columns)
            .rangeBands([0, 120]);
    chart.selectAll("rect")
            .data(data)
 //.enter().append("rect")
            .attr("x", x)
            .attr("height", y)
            .attr("width", x.rangeBand())
            .attr("rx", 10)
            .attr("ry", 10);
    chart.selectAll("text")
            .data(data)
 //.enter().append("text")
            .attr("y", y)
            .attr("x", function(d) {
        return x(d) + x.rangeBand() / 2;
    }) //offset
            .attr("dy", -10) // padding-right
            .attr("dx", ".35em") // vertical-align: middle
            .attr("text-anchor", "end") // text-align: right
            .text(String);
}); 
```

如何使每个值显示？如果我传入两个不同的值，图表将按应有的方式显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:37:29.987

你的问题在`.attr("x", x)`. 所以你这样做的方式为两个s分配了相同的`x`坐标。`rect`

所以尝试偏移`x`坐标。

```
.attr("x", function(d, i) { x + i * width_of_your_rect); }) 
```

# security - 通过电子邮件从任何地址接受图像文件。

> ID：15260164
> 
> 赞同：8
> 
> 时间：2013-03-06T23:23:11.557
> 
> 标签：security, file, email, transfer

我正在尝试构建一项服务，任何人都可以从电子邮件地址/客户端发送图像文件并进行处理。想想这项服务有点像***Flickr*****在通过电子邮件发送的仪表板中**显示图像

 **从可用性的角度来看，这个机制提供了很大的优势，但我想了解**这种操作的安全后果。**一些问题是：

*   我需要将所有这些文件验证为图像
*   人们可能会发送一个带有漏洞/代码的文件，这可能是一个问题。但在我的情况下，我主要是打开一个文件并保存并让浏览器显示图像

我在这里采取了正确的方法吗？我应该承担严重的后果吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T21:47:56.753

你应该做和考虑的事情。

1.  确保您的邮件服务器已配置为进行病毒扫描，并保持最新状态。这将是第一道防线。

2.  当电子邮件进来时，尝试在已知的坚如磐石的库中处理图像。

3.  请注意，许多电子邮件包含多张图片，其中一些可能与他们发送的那张完全没有关系。例如，我们公司的电子邮件都在底部包含我们的徽标。我不确定这里的解决方案是什么，但您需要考虑一下。

4.  不同的电子邮件客户端处理图像附件的方式不同。有时它是一种正常的依恋，有时它是嵌入身体的。即使在同一个客户端中，图像的处理方式也可能不同，具体取决于他们将电子邮件作为带有附件的纯文本还是 HTML 邮件发送。

5.  人们会测试你的系统。他们将发送 .js 文件，他们将发送标头被劫持的图像，以溢出您的图像处理库...

6.  考虑强制执行某些电子邮件限制，例如[SPF 检查](http://en.wikipedia.org/wiki/Sender_Policy_Framework)。

7.  准备好接收绝对巨大的图像。今天的相机拍摄非常大的照片，很多人不知道裁剪或调整大小是什么意思。您可以考虑将每封进入服务器的电子邮件设置为 15MB 或更大的上限。然后，结合上面的＃2，将图像大小自动调整到更容易接受的程度。

8.  确定您实际要用于通知用户任何问题的机制。请记住，此机制可能会被滥用。例如，考虑发送到您的机器的垃圾邮件，其中回复标头发送给受害者。

如果您使用的是 .net，请参阅此处以了解确认文件是否为图像的可能方法：[如何确定文件是否为 .NET 中的图像文件？](https://stackoverflow.com/questions/9354747/how-can-i-determine-if-a-file-is-an-image-file-in-net)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T09:15:44.807

我并不是说这是 100% 安全的（你能做到 100% 安全吗？），但您可以尝试以下方法：

假设您的后缀（或任何邮件系统）上有一个别名，它将传入的电子邮件重定向到 php/bash/python 脚本以进行进一步处理。

我要做的第一件事是使用图像处理库（比如 imagemagick）并将所有传入的文件转换为 .png 格式或其他格式，并且只有在转换成功时才继续执行您的逻辑。

这样，如果有人向您发送任何恶意附件（php 漏洞利用程序、jar 文件、swf 文件等），转换将失败，因此您的系统将忽略它。

编辑：ImageMagick 具有完全符合您要求的“识别”命令。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T12:44:10.837

电子邮件也很容易`spoofed`，这意味着我可以从不属于我的电子邮件地址发送电子邮件。

这也可能有帮助：[在 PHP 中上传图像的安全方式...](https://stackoverflow.com/questions/14434517/secure-way-to-upload-image-in-php-and-htaccess/14583167#14583167)**

# java - 在java中拆分像push1234这样的字符串

> ID：15260171
> 
> 赞同：-1
> 
> 时间：2013-03-06T23:23:28.797
> 
> 标签：java, string, split

所以，请多多包涵，因为我在这里有一个很长的问题，我在 java 中有一些代码使用数组列表来实现堆栈。我需要能够输入命令“push”来将东西添加到堆栈中。但是我的问题是它必须采用 pushSTUFF 格式。

“STUFF”是任何东西，大写、小写、字符串、int 等。我一直试图实现这一点的方法是使用字符串拆分方法，其中 PUSH 是分隔符。然后命令被传递到一个开关盒。

我很快意识到拆分被丢弃了，至少据我所知，并且开关盒正在将 pushSTUFF 而不是 push 作为 case 输入。

在考虑这个问题时，我想出了几种方法可以做到这一点。我只是不知道它们是否可能或如何去做。

所以，

1.  有没有办法拆分像 pushSTUFF 这样的字符串并保留两个部分（push 和 STUFF）

2.  有没有办法从字符串中拆分长度或内容未知的东西（因为我不知道用户将输入什么东西是未知的）

3.  有没有办法告诉开关盒寻找 pushSTUFF 而不是仅仅推动（再次因为 STUFF 是未知的）。

这些甚至有可能做到吗？如果是这样，你会推荐什么？

我确信有更好的方法，但由于我仍在学习 java，这些似乎是目前最好的方法。我也没有发布任何代码，因为我觉得这个问题没有必要。如果你需要的话，我会发布一些。只要问，我会很乐意效劳。

(tl;dr) 是否可以执行上述 1、2 或 3 中的任何一项，如果可以，怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:28:30.303

除了拆分字符串之外，您还可以将正则表达式与组一起使用并迭代它的匹配部分（如您所见，拆分的字符被丢弃）。

对于＃1，您可以执行类似（伪代码）的操作：

```
 regex = (push)(.*)
   stuff = groups[1] 
```

这也应该涵盖#2，因为它将匹配推送后的所有字符。

我不完全确定您在＃3中要问什么。

如果您不熟悉 java 正则表达式，[这里](http://docs.oracle.com/javase/tutorial/essential/regex/)有一个正则表达式教程。

您还可以查看[StringTokenizer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html#StringTokenizer%28java.lang.String,%20java.lang.String,%20boolean%29)，它具有保留分隔符的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:39:24.570

如果格式总是 push* *SOMETHING* * 你为什么不使用 String.substring()？

你可以做：

`String something = "pushSTUFF".substring(4);`

这样，您将始终得到*push*背后的任何内容。

如果没有看到实际代码，我真的不明白你想要实现什么，但你的问题似乎很简单，可以通过这种方式解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T23:28:43.687

您可以搜索任何大写字母并使用 String.substring(...)

[查找字符串中的第一个字符是否为大写，Java](https://stackoverflow.com/questions/4452939/find-if-first-character-in-a-string-is-upper-case-java)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T23:34:39.573

使用[.indexOf](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)并找到推送：

```
public class splitstring {
 public static void main(String[] args){
  String tosplit, part1, part2 = new String();
  int ind = 0;
  tosplit = "push1234";
  ind = tosplit.indexOf("push");
  part1 = tosplit.substring(ind,ind + 4);
  part2 = tosplit.substring(ind + 4, tosplit.length());
 }
} 
```

# python - Python。弄清楚如何输入正确的电话号码

> ID：15260174
> 
> 赞同：3
> 
> 时间：2013-03-06T23:23:38.363
> 
> 标签：python

所以我是 python 的新手，我正在编写一个程序，它接受 XXX-XXX-XXXX 格式的电话号码，并将任何字母更改为相应的数字。我需要检查条目并确保其格式正确，如果不正确，请允许重新输入。我很难让它提示我输入一个新号码，即使有时这有效，它仍然会翻译原始的错误电话号码。

到目前为止，这是我的代码：

```
def main():
    phone_number= input('Please enter a phone number in the format XXX-XXX-XXXX: ')
    validNumber(phone_number)
    translateNumber(phone_number)

def validNumber(phone_number):
    for i,c in enumerate(phone_number):
        if i in [3,7]:
            if c != '-':
                phone_number=input('Please enter a valid phone number: ')
            return False
        elif not c.isalnum():
            phone_number=input('Please enter a valid phone number: ')
        return False
    return True

def translateNumber(phone_number):
    s=""
    for char in phone_number:
        if char is '1':
            x1='1'
            s= s + x1
       elif char is '-':
            x2='-'
            s= s + x2
       elif char in 'ABCabc':
           x3='2'
           s= s + x3 
```

.....等等这部分并不重要

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:37:10.623

您可能希望使用 while 循环来强制用户输入有效数字。就像是：

```
def main():
    phone_number = ""
    while not validNumber(phone_number):
        phone_number = input('Please enter a phone number in the format XXX-XXX-XXXX: ')
    translateNumber(phone_number) 
```

（如果您使用的是 Python 2.7，则可能需要替换`input`为）`raw_input`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:37:23.200

这是一个完整的工作解决方案。

```
import re
from string import maketrans

phone_match = re.compile("^(\w{3}-\w{3}-\w{4})$")

def validPhone(number):
    match = phone_match.match(number)
    if match:
        return match.groups(0)[0]
    return None

phone_number = ''
while not validPhone(phone_number):
    phone_number = raw_input("Give me your digits!: ")

phone_in = "abcdefghijklmnopqrstuvwxyz"
phone_out = "22233344455566677778889999"
transtab = maketrans(phone_in, phone_out)

print phone_number.lower().translate(transtab) 
```

例子：

```
Give me your digits!: 949-POO-PTOO
949-766-7866

Give me your digits!: 555-HOT-KARL
555-468-5275 
```

# oracle - Oracle SQL 加载器 - 在同一列中加载不一致的日期格式

> ID：15260178
> 
> 赞同：0
> 
> 时间：2013-03-06T23:24:18.173
> 
> 标签：oracle, date, format, sql-loader

客户站点提供了以下提取文件供我们加载到我们的数据库中。

问题是，对于某些行（例如第二行），CREATED_DATE 和 LAST_UPDATE_DATE 采用“dd Mmm YYYY...”日期格式，而其余行（例如顶部）采用“YYYY- MM-DD HH24.MI.SSXFF"

```
PRIMARY_ID  ID VALUE       CREATED_DATE          LAST_UPDATE_DATE
20166267    20834830491    2012-04-30 08:18:00   2012-04-30 08:18:00
20166536    9112           01 Oct 2010 17:27:04  01 Oct 2010 17:27:04 
```

我的问题是：Q1。为了避免必须请求提取，我们可以在导入时使用 .ctl 脚本在 SQL 加载器中处理这些“dd Mmm YYYY...”格式的日期吗？目前我的 .ctl 是

我的 .ctl 文件被编写为使用以下脚本导入：

```
IDENTIFIER_START_DATE   TIMESTAMP "YYYY-MM-DD HH24.MI.SSXFF",
LAST_UPDATE_DATE        TIMESTAMP "YYYY-MM-DD HH24.MI.SSXFF" 
```

Q2。只是要求他们按照在这种情况下的最佳实践要求重新提取所有日期格式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:09:09.917

是否请求重新提取数据取决于许多因素。

*   这是一次性过程还是持续的数据馈送？尝试使用一次性加载的数据尽最大努力可能是完全合理的，这样更容易观察异常值。如果您要管理持续的数据馈送，通常更有意义的是就文件的严格标准达成一致，而不是尝试手动检查有问题的行。
*   客户是否有动力让您的加载过程简单且可重复？或者客户是否以固定价格出售，以他们想要提供的任何格式加载数据？如果客户有动力使加载过程简单且可重复，那么他们花时间生成干净的文件是有意义的。另一方面，如果您以固定价格向他们出售将文件转换为连贯数据所需的任何工作，那么如果您将大量工作推回给他们，他们可能不会高兴。
*   是否存在数据不明确的行？例如，“01-02-03”可以指 2003 年 1 月 2 日或 1903 年 1 月 2 日或 2001 年 2 月 3 日或许多其他日期。如果有歧义，请求重新提取是有意义的。

至于如何加载数据，虽然可以一步完成，但您通常不希望这样做。通常将数据加载到登台表（或使用外部表）中更有意义，其中所有列都声明为`VARCHAR2`，然后编写一些 ETL 逻辑将数据转换为适当的数据类型（并记录数据的错误不能转换）。例如，如果您将数据加载到所有列都定义为 的临时表中`VARCHAR2`，您可以[在此线程中使用类似 my_to_date 函数](https://stackoverflow.com/questions/4077959/oracle-date-field-cleaning/4078158#4078158)来尝试许多不同的格式掩码以找到一个有效的掩码（如果有很多对于可能的掩码，您可能希望遍历一个集合，而不是像我在那个示例中那样对两个掩码进行硬编码）。

另外一点...... Oracle`DATE`将时间存储到秒，这似乎是您所获得数据的精度。因此，将数据加载到`DATE`列而不是`TIMESTAMP`列中似乎更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:28:16.043

使用这个 .ctl 脚本：

```
load data
append
into table schema_name.table_name
fields terminated by ';' optionally enclosed by '"'
(
PRIMARY_ID,
ID_VALUE,
CREATED_DATE "to_date(:CREATED_DATE, case when regexp_substr(:CREATED_DATE,'\w+',1,2)=regexp_substr(:CREATED_DATE,'\d+',1,2) then 'YYYY-MM-DD HH24:MI:SS' else 'dd Mon YYYY HH24:MI:SS' end)",
LAST_UPDATE_DATE "to_date(:LAST_UPDATE_DATE, case when regexp_substr(:LAST_UPDATE_DATE,'\w+',1,2)=regexp_substr(:LAST_UPDATE_DATE,'\d+',1,2) then 'YYYY-MM-DD HH24:MI:SS' else 'dd Mon YYYY HH24:MI:SS' end)"
) 
```

# postgresql - 使用 WHERE ST_IsValid 是否有性能提升？

> ID：15260180
> 
> 赞同：1
> 
> 时间：2013-03-06T23:24:27.937
> 
> 标签：postgresql, postgis

我在 Windows 上使用 PostgreSQL 9.2 和 PostGIS 2.0.1。

考虑一个包含名为`some_table`的`GEOMETRY`列的表`geom`。

查询一：

```
UPDATE some_table
SET geom = ST_MakeValid(geom) 
```

查询 2：

```
UPDATE some_table
SET geom = ST_MakeValid(geom)
WHERE NOT ST_IsValid(geom) 
```

调用`ST_IsValid`作为过滤器（如在查询 2 中）是否提供任何性能提升（超过查询 1）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T13:57:35.437

扩展克雷格的评论，答案是“也许”。这里有很多可能的答案，这取决于很多事情。

例如，假设 80% 的表是无效的，而您关心那 20%。现在假设 ST_IsValid 占用了 ST_MakeValid 所用 CPU 时间的 60%。您将在所有表 (0.6 * 1) 上运行 ST_IsValid 并在其他 20% (1 * 0.2) 上运行 ST_MakeValid 函数。如果没有索引，这将为您节省大约 20% 的时间。如果您有一个功能索引，它可能会为您节省大量时间（这些数字当然是假设的）。

另一方面，假设您的表的一半无效。您将在所有行 (0.6 * 1) 上运行更便宜的函数，而在另一行 (1 * 0.5) 上运行更昂贵的函数，导致查询的净速度下降约 10%。这也意味着，如果几乎所有行都有效，那么检查在性能方面不会有任何好处。

所以答案是你真的需要检查`EXPLAIN ANALYSE`你的特定集合。

# java - 通过静态分析识别错误处理的 InterruptedExceptions

> ID：15260181
> 
> 赞同：1
> 
> 时间：2013-03-06T23:24:38.327
> 
> 标签：java, static-analysis, findbugs, interrupted-exception

有没有办法识别（通过静态分析，例如 findbugs 甚至可能是 checkstyle）何时未正确处理 InterruptedException（例如将线程标记为中断或抛出异常或可选：有注释解释原因。后一个选项可以忽略吗？）

# javascript - Chrome 在 window.scrollTo() 处的奇怪行为

> ID：15260184
> 
> 赞同：1
> 
> 时间：2013-03-06T23:24:56.303
> 
> 标签：javascript, html

我正在使用这个：

```
<head>
    <meta http-equiv="refresh" content="5; URL=<?php $_SERVER['PHP_SELF'] ?>">
</head> 
```

用于每 5 秒重新加载一次页面。
我正在使用这个：

```
<script type="text/javascript">
    window.scrollTo(0, document.body.scrollHeight);
</script> 
```

必要时向下滚动。
它适用于 Firefox 和 Internet Explorer，但 Chrome 在第一次加载页面时只滚动一次。只有当我切换选项卡（例如 Ctrl+t）并在 5 秒后返回（Ctrl+w）时，Chrome 才会向下滚动到底部。这很奇怪！我是否错误地使用了 window.scroll 或 Chrome 的行为不正确？
还有其他滚动到底部的可能性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:15:14.417

我发现了问题：在页面加载时，Chrome 的滚动命令有问题。解决方案：

```
<body onload="setTimeout(function(){window.scrollTo(0,document.body.scrollHeight)}, 1000);"> 
```

如果页面加载持续时间不超过 1 秒（1000 毫秒），则此方法有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:28:29.910

您是否尝试过使用`window.scroll()`它作为替代品？

```
window.scroll(x, y); 
```

# php - 在本地主机上运行 PHP

> ID：15260189
> 
> 赞同：-1
> 
> 时间：2013-03-06T23:25:44.517
> 
> 标签：php, html, ajax

在我的 Mac 上，我创建了一个简单的 index.html 文件，该文件对本地 php 文件进行 ajax 调用。我收到此错误：

```
POST http://127.0.0.1:8020/TestApana/command.php 500 (Internal Server Error) 
```

我可以通过执行以下操作直接在浏览器（Chrome）中访问 php 文件：

```
http://127.0.0.1:8020/TestApana/command.php 
```

我在一个单独的网络浏览器上测试了这个设置，它可以工作。我需要配置什么来让浏览器检测/执行 PHP 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:08:23.393

检查您正在使用的网络浏览器的代理设置

或者

将您的 php 文件的名称更改为其他名称

或者

这意味着 php 无法在您的 mac 上的 apache web 服务器上运行。

这是您可以在服务器上启用 php 的方法。

打开终端应用程序。

```
sudo -s then your password
cd /etc/apahce2 
```

通过键入 cp http.conf http.conf.backup 备份您的 http.conf 文件

```
then open this file in text editor like vi or nano

vi http.conf 
```

然后找到 LoadModule php5_module libexec/apache2/libphp5.so 并删除 #infront 这一行。

保存文件

重启apache服务器

```
apachectl graceful 
```

这将重新启动您的 apache 网络服务器

# mvvm - 如何绑定到 WPF TreeView 的 SelectedItem 属性？

> ID：15260191
> 
> 赞同：3
> 
> 时间：2013-03-06T23:25:47.943
> 
> 标签：mvvm, treeview, inotifypropertychanged, selecteditem, selecteditemchanged

我已经调整了[此处](http://www.codeproject.com/Articles/26288/Simplifying-the-WPF-TreeView-by-Using-the-ViewMode)的 TreeView 控件示例项目，以便与实体框架对象一起使用。它工作得很好，但就像许多其他人试图在基于 ParentViewModels 的`SelectedItem`更改上更新集合或属性一样，我也无法弥合理解的鸿沟。

我在 MVVM 中工作，并希望我的代码隐藏没有任何混乱。作为一个初学者，我喜欢实现`PropertyChanged`通知的简洁性，但由于它们没有绑定到 的固有“SelectedItem”属性`TreeView`，因此我无法像通常使用`ListBox`.

我的 ChildViewModel 上也有一个 SelectedItem 属性（实际上成功捕获了 isSelected = true 的对象）（请参阅 HB[对此问题](https://stackoverflow.com/q/7153813/1751090)的回答）。我的 ParentViewModel 上还有一个 ChildViewModel 类型的 SelectedItem，它绑定到我的视图（请参阅@Martin Liversage 的帖子[）](https://stackoverflow.com/a/9143193/1751090)。我无法让它们同步。

请帮助我了解如何将`SelectedItem`ChildViewModel 的属性传达给 ParentViewModel。我没有将 TreeView 绑定到 a `CollectionView`，因此我无法`CurrentItem`在视图集合中获取 。

我正在处理的视图模型集合非常需要查询，所以我现在没有包含任何代码。请让我知道清楚需要什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T08:10:37.387

所以，至少你开始习惯你每天的 MVVM-WTF ......“为什么我必须在 SO 上发布像这样基本的东西”。有一天，你会爱上 MVVM，我保证；）

话虽这么说：如您所知，TreeView 不支持同步`SelectedItem`属性。它确实存在，但它是只读的。您想要做的是扩展 TreeView 的行为，以将其选定的项目与其 ViewModel 上的属性同步。

此问题描述为您指明了正确的方向：行为。行为（或者，准确地说，System.Windows.Interactivity.Behavior<>s）允许您扩展任何`DependencyObject`. （[好介绍](http://wpftutorial.net/Behaviors.html)）

可以在此处找到通过行为将 TreeView 与选定项目同步的方法：

[所以线程](https://stackoverflow.com/questions/1000040/selecteditem-in-a-wpf-treeview)

这应该已经为你做了。您可以复制并粘贴*Steve GreatRex*的代码并继续使用它。如果您需要有关该方法的帮助，请发表评论。学习愉快！

# mongodb - 如何获得不同的值列表以及低于该不同值的所有文档？

> ID：15260195
> 
> 赞同：0
> 
> 时间：2013-03-06T23:26:08.570
> 
> 标签：mongodb

了解 MongoDB 文档设计并试图弄清楚如何做某事，或者我是否在找错树。

我正在创建一个迷你 CMS。该站点将包含按类别分组的文档或网址，即有一个名为“商店”的组，其中包含指向另一个站点上的项目的链接列表，还有一个名为“艺术”的类别，其中包含艺术作品列表，每个都有幻灯片的标题、摘要和图像。

因此，一种可能的方法是拥有一个看起来像这样的集合：

```
[{category: 'Products',
  title: 'Thong',
  href: 'http://www.thongs.com'
},{
  category: 'Products',
  title: 'Incredible Sulk',
  href:'http://www.sulk.com'
},{
  category: 'Art',
  title: 'Cool art',
  summary: 'This is a summary to display',
  images: [...]
}] 
```

但是，问题是……当我构建网页时，这种结构对我来说并没有多大用处。主页包含按类别分组的“事物”列表，列表......菜单......类似的东西。为了能够轻松地做到这一点，我需要有一些看起来更像的东西：

```
[
 {'Products':[
      {title:'thong', href:'http://www.thongs.com'},
      {title:'Incredible Sulk'}
  ]
 },
 {'Art':[
      {title:'Cool art',summary:'This is a summary to display',images:[...]}
  ]
 }
] 
```

所以问题是，我可以在 MondoDB 中以某种方式进行这种转换吗？如果我不能，那么在我的应用程序服务器层中执行此操作是否很糟糕（我会得到一个唯一类别的分组列表，然后循环通过它们查询 Mongo 以获取该类别的文档）？我猜应用服务器层很糟糕，毕竟如果我幸运的话，mongodb 会把它全部保存在内存中。如果这些都不好，那么我是否做错了，我应该首先存储这样的结构吗？

我需要让用户轻松地动态创建类别，并考虑如果他们开始添加大量文档会发生什么，我要么需要限制我为每个类别拉回的文档数量，要么以某种方式限制返回的字段，以便当我查询 mongodb 时，它不会返回相对较大的数据块，这些数据既慢又浪费，而是返回创建所需页面所需的最小值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:00:36.677

我想出了一个组查询，它将给我几乎我想要的结构，但足以用于模板。

```
db.things.group({
    key:{category:true},
    initial:{articles:[]},
    reduce: function(doc, aggregator) {
        aggregator.articles.push(doc);
    }
}) 
```

# html - 不可见的 HTML 元素

> ID：15260205
> 
> 赞同：0
> 
> 时间：2013-03-06T23:26:46.653
> 
> 标签：html, css

在以下 HTML 文件中，内部 div 中包含的文本（例如“Argentina”或“Test Two”）不可见；我不知道为什么。任何关于为什么它们不可见的帮助将不胜感激。

```
<!DOCTYPE html>
<html>
<body>
    <div class="GLH-2XVBBO">
        <div
            style="position: absolute; left: 5px; width: 190px; top: 2px; height: 25px;">
            <div class="gwt-Label GLH-2XVBEO">Latest Contribution</div>
        </div>
        <div
            style="position: absolute; left: 0px; width: 200px; top: 35px; bottom: 5px;">
            <div class="GLH-2XVBDO" style="overflow: auto; position: relative;">
                <div style="position: relative;">
                    <div class="GLH-2XVBCO" style="position: relative;">
                        <div aria-hidden="true"
                            style="position: absolute; z-index: -32767; top: -20ex; width: 10em; height: 10ex;">&nbsp;</div>
                        <div
                            style="position: absolute; overflow: hidden; left: 0px; top: 0px; right: 0px; height: 45px;">
                            <div class="GLH-2XVBPO"
                                style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px;">
                                <div aria-hidden="true"
                                    style="position: absolute; z-index: -32767; top: -20ex; width: 10em; height: 10ex;">&nbsp;</div>
                                <div
                                    style="position: absolute; overflow: hidden; left: 0px; top: 0px; width: 200px; height: 20px;">
                                    <div
                                        style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px;"
                                        class="gwt-Label GLH-2XVBAP">Argentina</div>
                                </div>
                                <div
                                    style="position: absolute; overflow: hidden; left: 0px; top: 25px; width: 200px; height: 20px;">
                                    <div
                                        style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px;"
                                        class="gwt-Label GLH-2XVBOO">Test Two</div>
                                </div>
                            </div>
                        </div>
                        <div
                            style="position: absolute; overflow: hidden; left: 0px; top: 55px; right: 0px; height: 45px;">
                            <div class="GLH-2XVBPO"
                                style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px;">
                                <div aria-hidden="true"
                                    style="position: absolute; z-index: -32767; top: -20ex; width: 10em; height: 10ex;">&nbsp;</div>
                                <div
                                    style="position: absolute; overflow: hidden; left: 0px; top: 0px; width: 200px; height: 20px;">
                                    <div
                                        style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px;"
                                        class="gwt-Label GLH-2XVBAP">General Audience</div>
                                </div>
                                <div
                                    style="position: absolute; overflow: hidden; left: 0px; top: 25px; width: 200px; height: 20px;">
                                    <div
                                        style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px;"
                                        class="gwt-Label GLH-2XVBOO">Test Two</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html> 
```

关于嵌套 div 的道歉。它是 GWT 生成的 HTML 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:36:47.193

你的班级`.GLH-2XVBCO`需要一个定义的高度。

所以这：

`<div class="GLH-2XVBCO" style="position: relative;">`

变成类似的东西

`<div class="GLH-2XVBCO" style="position: relative; height: 50px;">`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:38:37.733

删除此样式`style="position: absolute; z-index: -32767; top: -20ex; width: 10em; height: 10ex;"`

从 div

```
<div aria-hidden="true" style="position: absolute; z-index: -32767; top: -20ex; width: 10em; height: 10ex;">&nbsp;</div> 
```

然后你可以看到阿根廷。

顺便说一句，你为什么要创建如此复杂的 HTML？您应该将样式移至 CSS 文件并删除所有不需要的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T23:38:01.417

好吧，我可以通过禁用一些“位置：相对”样式来修复它，特别是 GLH-2XVBDO 和 GLH-2XVBCO 中的样式，以及它们之间的 DIV，但我不确定你想用什么来完成所有这些嵌套的 DIV。

# text - NLP 寻找实体之间的关系

> ID：15260212
> 
> 赞同：8
> 
> 时间：2013-03-06T23:27:10.173
> 
> 标签：text, nlp, stanford-nlp, opennlp, information-extraction

我目前的理解是，可以使用 OpenNLP、Stanford NLP 等工具包从文本文档中提取实体。

但是，有没有办法找到这些实体之间的*关系？*

例如考虑以下文本：

*“你们有些人可能知道，我上周在欧洲高能物理实验室 CERN 度过，著名的希格斯玻色子在去年 7 月被发现。每次去 CERN，我都会感到深深的敬意。除了快速参观之外多年来，我在 1990 年代后期作为访问科学家在那里呆了三个月，从事早期宇宙物理学的研究，试图弄清楚如何将我们今天看到的宇宙与其婴儿期可能发生的事情联系起来。”*

实体：**我**（作者）、**欧洲核子研究中心**、**希格斯玻色子**

关系： - 我“**访问过**”CERN - CERN“**发现了**”希格斯玻色子

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-10-28T20:58:12.953

是的，一点没错。这称为**关系提取**。斯坦福大学开发了几种有用的工具来解决这个问题。

这里有网站：[http](http://deepdive.stanford.edu/relation_extraction) ://deepdive.stanford.edu/relation_extraction 这里是 github 存储库：[https ://github.com/philipperemy/Stanford-OpenIE-Python](https://github.com/philipperemy/Stanford-OpenIE-Python)

一般来说，这是该过程的工作方式。

```
results = entract_entity_relations("Barack Obama was born in Hawaii.")
print(results)
# [['Barack Obama','was born in', 'Hawaii']] 
```

一些重要的是只提取形式的三元组`(subject,predicate,object)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T11:16:11.357

例如，您可以使用 Stanford Parser 提取动词及其依赖项。例如，您可能会得到“依赖链”，例如

```
"I :: spent :: at :: CERN". 
```

认识到“我在 CERN 度过”、“我访问了 CERN”和“CERN 主持了我的访问”（等等）表示相同类型的事件是一项艰巨的任务。了解如何做到这一点超出了 SO 问题的范围，但您可以阅读释义识别文献（[这里](http://www.jair.org/media/2985/live-2985-5001-jair.pdf)是一篇概述论文）。还有一个关于 SO的[相关问题。](https://stackoverflow.com/questions/4633391/paraphrase-recognition-using-sentence-level-similarity)

一旦你可以聚集相似的链，你就需要找到一种方法来标记它们。您可以简单地选择集群中最常见链的动词。

但是，如果您有一组要提取的预定义关系类型以及为这些关系手动注释的大量文本，那么方法可能会非常不同，例如，使用机器学习来学习如何识别基于关系类型在注释数据上。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-24T04:44:37.593

不知道您是否仍然感兴趣，但 CoreNLP 添加了一个名为 OpenIE（开放信息提取）的新注释器，它应该可以完成您正在寻找的内容。看看：[OpenIE](https://nlp.stanford.edu/software/openie.shtml)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-31T19:41:18.233

与斯坦福解析器类似，您也可以使用 Google 语言 API，在其中发送字符串并获取依赖关系树响应。

您可以先测试此 API 以查看它是否适用于您的语料库： [https ://cloud.google.com/natural-language/](https://cloud.google.com/natural-language/)

这里的结果是一个主谓宾 (SPO) 三元组，您的谓词在其中描述了关系。您需要遍历依赖关系图并编写一个脚本来解析出三元组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-26T16:19:10.567

There are many ways to do relation extraction. As colleagues mentioned that you have to know about NER and coreference resolution. Different techniques require different approaches. Nowadays, Distant Supervision is most common, and for detecting the relation between entities, they used FREEBASE.

# mysql - 在 MySQL DB 中存储标签和 URL 的最佳字符集和排序规则

> ID：15260216
> 
> 赞同：1
> 
> 时间：2013-03-06T23:27:27.067
> 
> 标签：mysql, url, utf-8, latin1

我正在从 Flickr 检索照片信息到我的网站。对于每张照片，URL、标题和标签都保存在 MySQL 数据库中。

我阅读了很多关于最适合此类值的字符集的内容，我发现它主要在使用 utf8 或 latin1 之间。

一些标题和标签包括版权（或类似的）等符号。我可以使用 Latin1 字符集吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:29:57.997

**始终**在您的数据库、文本编辑器、html 元数据、字符集标题中的任何地方使用 utf-8。

这是我能给你的唯一建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-21T20:03:07.700

****如果**存储的文本是 100% ascii，**切勿**在数据库中使用 utf-8 。如果文本被索引，使用 utf-8 膨胀每个字符可能意味着显着的性能损失。**

# perl - 如何在每个空格上拆分数组的每个条目？

> ID：15260217
> 
> 赞同：0
> 
> 时间：2013-03-06T23:27:29.427
> 
> 标签：perl

我有一个这样的文件：

```
This is is my "test"
file with a lot
words separeted by whitespace. 
```

现在我想实现拆分这个，以便我创建一个数组，其中每个元素包含一个单词并且所有重复的单词都被删除

所需的数组：

```
This
is
my
test
etc... 
```

我将文件读入一个数组，但我不知道如何拆分整个数组，以便结果是一个新数组。以及如何删除重复的单词？

```
#!/usr/bin/perl
package catalogs;
use  Log::Log4perl;
Log::Log4perl->init("log4perl.properties");

open(FILE, "<Source.txt") || die "file Sources.txt konnte nicht geoeffnet werden";

my @fileContent = <FILE>;
close FILE;

my $log = Log::Log4perl->get_logger("catalogs");

@fileContent = split(" "); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:30:45.233

要提取单词，您可以使用

```
my @words = $str =~ /\w+/g; 
```

至于删除重复项，

```
use List::MoreUtils qw( uniq );
my @uniq_words = uniq @words; 
```

或者

```
my %seen;
my @uniq_words = grep !$seen{$_}++, @words; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:13:16.790

您正在将文件的文本加载到数组中，但将文件加载到单个字符串中可能更有意义。这将使您能够利用@ikegami 提供的解决方案。要将所有这些结合在一起，请尝试以下操作。

```
use List::MoreUtils qw( uniq );
my $filecontent = do
{
  local $/ = undef;
  <STDIN>;
};
my @words = $filecontent =~ /\w+/g;
my @uniqword = uniq(@words); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T06:46:26.170

```
my $log = Log::Log4perl->get_logger("catalogs");
@fileContent = split(/\s+/, $log); 
@filecontent = uniq(@filecontent); 
```

要使单词独一无二，您可以使用`uniq`子例程或将其映射到`hash`. 由于散列的键始终是唯一的，因此将覆盖重复项。

```
use strict;
use warnings;
use Data::Dumper;

my @a = (1,1,1,2,3,4,4);
my %hash = ();
%hash = map $_=>'1', @a;
my @new = keys(%hash );
print Dumper(@new); 
```

# c# - 使用 SQL Server 打开锁定的文本文件

> ID：15260219
> 
> 赞同：1
> 
> 时间：2013-03-06T23:27:39.100
> 
> 标签：c#, sql-server, locking

当我尝试

```
BULK INSERT table FROM 'c:\file.txt' 
```

我明白了

```
Msg 4861, Level 16, State 1, Line 1
Cannot bulk load because the file "c:\file.txt" could not be opened. Operating system error code 32(The process cannot access the file because it is being used by another process.). 
```

错误，因为该文件是另一个进程打开的日志文件。

但是，使用 C#，我可以使用以下方式打开文件`System.IO.FileShare.ReadWrite`：

```
using (System.IO.FileStream fileStream = new System.IO.FileStream("c:\\file.txt", System.IO.FileMode.Open, System.IO.FileAccess.Read, System.IO.FileShare.ReadWrite))
        {
            using (System.IO.StreamReader streamReader = new System.IO.StreamReader(fileStream))
            {
                file = streamReader.ReadToEnd();
            }
        } 
```

有没有办法让 SQL Server 中的读写共享功能（批量插入或任何其他）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:31:44.687

由于您无法控制 SQL Server 在后台使用的 OpenFile 标志，因此您可能必须在执行批量插入之前将文件复制到临时文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T17:39:45.467

^(（由于您删除了问题，因此从我对 DBA.SE 的回答中重新发布。）)

[`BULK INSERT`](http://msdn.microsoft.com/en-us/library/ms188365.aspx)尝试对源文件进行写锁定，以确保在读取发生时没有其他进程同时修改文件。这样做是为了稳定文件格式，因为读取可能最终会尝试处理由并发写入器写入的部分行。

因为已经打开了日志文件以供另一个进程写入，所以这是不兼容的访问，并且您会收到该错误。

关于代码：

*   [`FileAccess`](http://msdn.microsoft.com/en-us/library/4z36sx0f.aspx)确定*您*要对文件执行的操作。
*   [`FileShare`](http://msdn.microsoft.com/en-us/library/system.io.fileshare.aspx)确定在您打开文件时允许*其他人对文件执行的操作。*

记录过程将使用`FileAccess.Write`or `FileAccess.ReadWrite`，并且假设您的代码成功，可能`FileShare.Read`- 这将阻止其他人同时写入文件，但允许他们读取内容。您的代码仅请求读取访问权限，因此这是兼容的。如果您重新运行代码并请求写入权限 ( `FileAccess.Write`)，则代码将失败。

要用于`BULK INSERT`导入此文件，您必须复制并导入该文件，这样就不会涉及任何文件锁定。

# javascript - Youtube - 检查视频何时加载

> ID：15260221
> 
> 赞同：2
> 
> 时间：2013-03-06T23:27:48.347
> 
> 标签：javascript, youtube, youtube-javascript-api

我正在使用 AJAX 动态更改我的 Youtube 视频的视频 ID。我的 AJAX 调用几乎是即时的，但我注意到在 Youtube 发出我的请求以获取我的下一个视频的内容时存在延迟。因此，我想在等待 Youtube 的回复时隐藏我的 Youtube 播放器。

我的问题是如何检测我的 Youtube 视频何时通过 JavaScript 完成加载？

`<iframe id="ytplayer" class="hide" type="text/html" width="840" height="470" src="https://www.youtube.com/embed/" frameborder="0" allowfullscreen>`

编辑 - 我的 AJAX 是如何工作的：

当用户点击我网站上的视频按钮时，会出现一个模式。当模态加载时，我的 AJAX 从我的数据库中提取一个视频 ID，并修改`#ytplayer`src 属性以包含此视频 ID。然后将模态渲染到页面上，但我仍在等待 Youtube 的响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:30:35.273

不知道你是如何加载它的，但 AJAX 确实有一个本机回调：

```
$.ajax({
  url: 'myYouTubeData.html',
  success: function(){
    alert('success');
  },
  error: function(){
    alert('failure');
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:34:42.780

如果您使用的是[iframe API](https://developers.google.com/youtube/iframe_api_reference)，您也许可以使用`player.getPlayerState():Number`或者您可以在同一页面中使用 Events API。或许使用`onStateChange`并监听`YT.PlayerState.ENDED`用 CSS 隐藏播放器。当它切换到其他状态时，您`YT.PlayerState.PLAYING`可以`YT.PlayerState.BUFFERING`再次显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-14T14:48:42.713

我正在做的是在加载视频时将背景与视频混合，以使过渡更平滑。

```
 // set up iframe player, use global scope so YT api can talk
    window.player;
    window.onYouTubeIframeAPIReady = function () {
        player = new YT.Player('tubular-player', {
            width: options.width,
            height: Math.ceil(options.width / options.ratio),
            videoId: options.videoId,
            playerVars: {
                controls: 0,
                showinfo: 0,
                modestbranding: 1,
                wmode: 'transparent'
            },
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        });
    }

    window.onPlayerReady = function (e) {
        resize();
        if (options.mute)
            e.target.mute();
        e.target.seekTo(options.start);
        e.target.playVideo();
    }

    window.onPlayerStateChange = function (state) {
        if (state.data === 0 && options.repeat) { // video ended and repeat option is set true
            player.seekTo(options.start); // restart
        }
        if (state.data == YT.PlayerState.PLAYING) { // video ended and repeat option is set true
            $(".initial-video-image").fadeTo(1000, 0);
        }
    } 
```

# regex - 如何解析 Pig 中的列以创建其他列

> ID：15260229
> 
> 赞同：0
> 
> 时间：2013-03-06T23:28:33.727
> 
> 标签：regex, parsing, apache-pig

新的 Apache Pig 用户在这里。我基本上有某种格式的数据，需要将其拆分为 6 列以创建我想要的模式，然后加载到 Pig 以运行我现有的脚本。

抱歉，如果以下格式不整洁，由于声誉评分，我无法上传图片。

现有格式有 3 列
**User-Equipment values::key:bytearray values:value:bytearray**
user1-mobile 20130306-AC 9
user1-mobile 20130306-AT 21
user2-laptop 20130306-BC 0

所需格式：
**用户设备日期类型“计数或时间”值**

user1 手机 20130306 AC 9

user1 手机 20130306 AT 21

关于如何完成这项工作的任何建议？我需要写一个正则表达式吗？这里的棘手之处在于，除了“类型”和“C 或 T”列之外，所有列之间都有一个分隔符 (-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T10:23:32.053

如果您没有通用分隔符，我可以想到两种可能性：

1.  您可以按照此处的说明实现自己的 LoadFunc：http: [//ofps.oreilly.com/titles/9781449302641/load_and_store_funcs.html](http://ofps.oreilly.com/titles/9781449302641/load_and_store_funcs.html)

2.  您可以按照此处的说明使用[REGEX_EXTRACT_ALL](http://pig.apache.org/docs/r0.8.1/piglatin_ref2.html#REGEX_EXTRACT_ALL)：[Apache Pig：来自网络日志的额外查询参数](https://stackoverflow.com/questions/5305086/apache-pig-extra-query-parameters-from-web-log)

给你 2.:

```
A = LOAD 'abc.txt' AS (line:CHARARRAY);
B = FOREACH A GENERATE FLATTEN(REGEX_EXTRACT_ALL(line, '^(.+?)\\-(.+?)\\s(.+?)\\-(.)(.)\\s(.+)$')) AS (User:CHARARRAY,Equipment:CHARARRAY,Date:CHARARRAY,Type:CHARARRAY,CountorTime:CHARARRAY,Value:CHARARRAY); 
```

# python - 在 Python 函数中访问循环创建的字典的特定值

> ID：15260235
> 
> 赞同：0
> 
> 时间：2013-03-06T23:28:59.610
> 
> 标签：python, function, loops, dictionary

我对 Python 很陌生，作为练习，我尝试使用代码解决基本的金融练习。我的目标是获得一本即期汇率字典，然后是从中计算出的贴现率字典。我曾想过这样的事情：

```
discountrates={}

def discountrates(n):
    spotrates={}
    for x in range(1,n+1):
        spotrates['s'+str(x)]=float(input('What is s'+str(x)+'? (not in percentage)'))
    for y in range(1,n+1):
         discountrates['d(0,'+str(y)+')']= 1/((1+float(spotrates['s'+str(y)]))**y)
    for key, value in discountrates.items():
        print (key, value) 
```

现在的问题是无法在函数中访问字典项。当我查看您的论坛时，我找到了解包字典的解决方案，但这在我的情况下不起作用，因为我需要访问字典的特定元素，其名称无法完全指定（正如我在 Python 手册中看到的那样）因为它是循环的一部分，为了使公式能够工作而无需手动插入任何其他内容。我首先使用字典来创建自动生成的名称，但现在我似乎无法从中获取信息。

什么是最好的解决方案？

在此先感谢您的帮助。这让我快疯了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:34:21.020

这是因为您`discountratesdict`没有调用全局变量`discountrates`（这是您的函数的名称）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T08:53:32.890

我建议你不要像你的函数一样命名你的字典，因为后者会覆盖前者。在第 1 行你说`discountrates`是一个空`dict`，在第 2 行你说`discountrates`是一个函数对象。如果它们，你需要在 python 中给它们不同的名称在同一范围内。

此外，你为什么`discountrates`需要`global`？`n`如果低于以前的价格，您愿意保留旧价格`n`吗？为了性能，我建议您将两个循环结合起来。除此之外，没有理由为什么第二个循环也不能读取`for x ...`，因为 zou 无论如何都不再使用 x 了。作为进一步的提示，如果您得出结论，全局是它可能有助于添加的唯一方法`global discountratesdict`，因此更容易发现这里是全局的，即使在您的特定情况下这不是必需的，因为`[]`-operator 需要一个对象，因此它已经引用了您的全局对象。

将所有这些放在一起产生：

```
discountratedict={}

def discountrates(n):
    global discountratedict
    spotrates={}

    for x in range(1,n+1):
        spotrates['s'+str(x)]=float(input('What is s'+str(x)+'? (not in percentage)'))
        discountratedict['d(0,'+str(x)+')']= 1/((1+float(spotrates['s'+str(x)]))**x)

    for key, value in discountratedict.items():
        print (key, value) 
```

# ios - 如何在 GMSMapView 上添加工具栏

> ID：15260238
> 
> 赞同：0
> 
> 时间：2013-03-06T23:29:09.883
> 
> 标签：ios, map, toolbar

我正在制作一个使用 GMSMapView 的 iPhone 应用程序，并且我希望能够在地图顶部添加一个工具栏。这是我的代码：

```
#import "MapViewController.h"
#import <GoogleMaps/GoogleMaps.h>

@interface MapViewController ()

@end

@implementation MapViewController
{
GMSMapView *mapView_;
id<GMSMarker> myMarker;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (IBAction)back:(id)sender
{
[self dismissViewControllerAnimated:YES completion:NULL];
}

// You don't need to modify the default initWithNibName:bundle: method.

- (void)loadView
{
GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:30.616083 longitude:-96.338908 zoom:13];

mapView_ = [GMSMapView mapWithFrame:CGRectZero camera:camera];
mapView_.myLocationEnabled = YES;
mapView_.delegate = self;
self.view = mapView_;

GMSMarkerOptions *options = [[GMSMarkerOptions alloc] init];
options.position = CLLocationCoordinate2DMake(30.616083, -96.338908);
options.title = @"College Station";
options.snippet = @"Texas";
[mapView_ addMarkerWithOptions:options];
}

#pragma mark - GMSMapViewDelegate
- (void)mapView:(GMSMapView *)mapView
didTapAtCoordinate:(CLLocationCoordinate2D)coordinate
{
[myMarker remove];

NSLog(@"You tapped at %f,%f", coordinate.latitude, coordinate.longitude);
GMSMarkerOptions *marker = [[GMSMarkerOptions alloc] init];
marker.position = CLLocationCoordinate2DMake(coordinate.latitude, coordinate.longitude);
marker.title = @"Tap Event";
// (icon for marker) marker.icon = [UIImage imageNamed:@"house"];
myMarker = [mapView_ addMarkerWithOptions:marker];
}

@end 
```

在我的故事板中，我有一个工具栏，但我不知道如何让它显示在 GMSMapView 上。我是 iOS 新手，已经在网上搜索过解决方案，但 GMSMapView 没有任何运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T08:28:48.880

因为您将视图设置为 mapView_，所以在 StoryBoard 中创建的视图将被覆盖。我使用以下代码添加了一个带有分段控件和按钮的工具栏：

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];

UINavigationBar  *navBar = [[UINavigationBar alloc]initWithFrame:CGRectMake(0, 0, screenBounds.size.width, 44)];
UINavigationItem *navItems = [[UINavigationItem alloc]init];
UIBarButtonItem *barButtonRight = [[UIBarButtonItem alloc]initWithTitle:@"" style:UIBarButtonItemStylePlain target:self action:@selector(SettingsButtonPressed)];
UISegmentedControll *segControl = [[UISegmentedControl alloc]initWithItems:[NSArray arrayWithObjects:@"Opt1",@"Opt2",@"Opt3", nil]];
UIImage *imageSettings= [UIImage imageNamed:@"36-toolbox.png"];

[segControl setSegmentedControlStyle:UISegmentedControlStyleBar];
[segControl setSelectedSegmentIndex:0];
[segControl setFrame:CGRectMake(10, 5, 150, 32)];
[segControl addTarget:self action:@selector(KiesVC:) forControlEvents:UIControlEventValueChanged];

[barButtonRight setImage:imageSettings];

[navItems setRightBarButtonItem:barButtonRight];
[navItems setTitleView:segControl];

[navBar setItems:[NSArray arrayWithObject:navItems] animated:NO]; 
```

然后通过调用添加工具栏：

[self.view addSubview:navBar];

希望能帮助到你

# wpf - 针对 INotifyCollectionChanged 类型的数据绑定

> ID：15260240
> 
> 赞同：2
> 
> 时间：2013-03-06T23:29:21.527
> 
> 标签：wpf, mvvm, inotifycollectionchanged

我想要一个域模型集合类和一个视图模型类，它们只反映和投影域模型的元素——但它本身是只读的。

我的想法是这两种类型都实现了 INotifyCollectionChanged 接口，然后视图模型类型只是充当代理和投影仪，将模型元素包装在元素视图模型类型中。

问题是：实现 INotifyCollectionChanged 是否足以启用 WPF 数据绑定到例如 DataGrid 或 ListView 或者启用基于集合的数据绑定所需的最小接口集是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T23:54:16.977

`INotifyCollectionChanged`如果集合中元素内的属性发生更改，则不会更新您的 UI，仅当从您的集合中添加或删除整个元素时。

因此，如果您乐于跟踪整个元素的更改，那么`INotifyCollectionChanged`任何进一步的粒度就足够了，您需要`INotifyPropertyChanged`在属性设置器中实现。

值得注意的另一点是，如果您使用 an`ObservableCollection`来存放您的列表，这已经`INotifiyCollectionChanged`为您实现了。

**编辑：**

以下是微软的看法；

> `IEnumerable` 您可以枚举实现该接口的任何集合。但是，要设置动态绑定以便集合中的插入或删除自动更新 UI，集合必须实现`INotifyCollectionChanged`接口。此接口公开一个事件，只要基础集合发生更改，就应该引发该事件。
> 
> WPF 提供类，它是公开接口`ObservableCollection(Of T)`的数据集合的内置实现 。`INotifyCollectionChanged`
> 
> 请注意，要完全支持将数据值从源对象传输到目标，集合中支持可绑定属性的每个对象也必须实现该`INotifyPropertyChanged`接口。
> 
> 在实现您自己的集合之前，请考虑使用`ObservableCollection(Of T)`现有集合类之一，例如`List(Of T)`、`Collection(Of T)`和 `BindingList(Of T)`等。如果您有一个高级场景并想要实现自己的集合，请考虑使用`IList`，它提供了一个非泛型对象集合，可以通过索引单独访问，从而获得最佳性能。

从..

[http://msdn.microsoft.com/en-us/library/ms752347.aspx#binding_to_collections](http://msdn.microsoft.com/en-us/library/ms752347.aspx#binding_to_collections)

# c# - 无法将类型“void”隐式转换为“string”

> ID：15260241
> 
> 赞同：1
> 
> 时间：2013-03-06T23:29:28.593
> 
> 标签：c#, data-access-layer, bll

我已经尝试了一段时间，我真的不明白。我收到错误“无法将类型 'void' 隐式转换为 'string'” 我已经尝试了字符串、int、nothing、void、public、static 的多种变体，不，我真的不明白。

我想从我的数据库中获取一个值，尽管我的 DAL 和 BLL，我的代码看起来像这样。

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Repeater1.DataSource = BLL.getGames();
        Repeater1.DataBind();
        var culture = CultureInfo.GetCultureInfo("sv-SE");
        var dateTimeInfo = DateTimeFormatInfo.GetInstance(culture);
        var dateTime = DateTime.Today;
        int weekNumber = culture.Calendar.GetWeekOfYear(dateTime, dateTimeInfo.CalendarWeekRule, dateTimeInfo.FirstDayOfWeek);
        string mroundY = dateTime.Year.ToString();
        string mroundW = weekNumber.ToString();
        string mrounddate = mroundY + mroundW;

        string mround = BLL.getMroundGames(mrounddate);  <-- Here's the error

    }
    protected void Repeater1_ItemCommand(object source, RepeaterCommandEventArgs e)
    {

    }
} 
```

我的 BLL 看起来像这样；

```
 public class BLL
{
    public static void getMroundGames(string mrounddate)
    {
        SqlCommand getMroundGames = new SqlCommand("SELECT mround FROM gameTB where mround = @mrounddate");
        DAL.ExecuteNonQuery(getMroundGames);
     }
} 
```

也试过这个；

```
public class BLL
{
    public static DataTable getMroundGames(string mrounddate)
    {
        SqlCommand getMroundGames = new SqlCommand("SELECT mround FROM gameTB where mround = @mrounddate");
        getMroundGames.Parameters.Add("@mrounddate", SqlDbType.VarChar, 10).Value = mrounddate;
        return DAL.GetData(getMroundGames);
    }
} 
```

最后我的 DAL 看起来像这样；

```
public class DAL
    {
    public static SqlConnection GetConnection()
        {
            SqlConnection conn = new
            SqlConnection(ConfigurationManager.ConnectionStrings["tiptopConnectionString"].ConnectionString);
            conn.Open();
            return conn;
        }

    public static DataTable GetData(SqlCommand command)
    {
        try
        {
            using (SqlConnection conn = GetConnection())
            {
                using (DataSet ds = new DataSet())
                {
                    using (SqlDataAdapter da = new SqlDataAdapter())
                    {
                        da.SelectCommand = command;
                        da.SelectCommand.Connection = conn;
                        da.Fill(ds);
                        return ds.Tables[0];
                    }
                }
            }
        }
        catch (Exception err)
        {
            throw new ApplicationException(string.Format("Felmeddelande:{0}", err.Message));
        }
    }

    public static object ExecuteScalar(SqlCommand command)
    {
        using (SqlConnection conn = GetConnection())
        {
            command.Connection = conn;
            object result = command.ExecuteScalar();
            return result;
        }
    }

    public static void ExecuteNonQuery(SqlCommand command)
    {
        using (SqlConnection conn = GetConnection())
        {
            command.Connection = conn;
            command.ExecuteNonQuery();
        }
    }

} 
```

从哪里开始？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-06T23:31:19.413

对此的签名是错误的；

```
public static void getMroundGames(string mrounddate) 
```

您需要将其更改为类似于 ;

```
public static string getMroundGames(string mrounddate) 
```

从 DAL 中检索字符串值并相应地返回给使用者。

```
var dt = Dal.GetData();
return (string)dt.Rows[0]["field"]; 
```

但是，老实说，我不会将数据表从您的 DAL 传递到您的 BLL。我会直接返回字符串或引入 DTO，然后通过 BLL 从 DAL 填充它，然后返回给消费者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T23:40:47.920

您需要将返回类型的字符串添加到 getMroundGameas(string mrounddate)。

目前尚不清楚 DAL 是什么类型的对象，但您也应该使用 ExecuteReader 方法， http: [//msdn.microsoft.com/en-us/library/bb344397.aspx](http://msdn.microsoft.com/en-us/library/bb344397.aspx) 而不是 ExecuteNonQuery。这将返回一个 Reader，可以查询 select 语句返回的值。

最后，您应该返回该值。

# jquery - jQuery（'html.body'），动画不起作用

> ID：15260242
> 
> 赞同：2
> 
> 时间：2013-03-06T23:29:36.987
> 
> 标签：jquery, animation, scrolltop

我有一个包含三个 div 的页面。我想使用动画和每个 div 的偏移位置将每个 div 带入视野。我可以告诉链接属性正在被传递，并且我得到了偏移量。（通过 window.alerts 验证）问题是，div 容器不会移动到视图中。

这是链接

```
<div id="minibar" class="minibar">
<a href="#main" class="rarrow">Main</a>
<a href="#slide1" class="rarrow">Creative Showcase</a>
<a href="#slide2" class="rarrow">News</a>
</div> 
```

内容 div

```
<div id="main" class="main" ><content></div>
<div id="slide1" class="main"><content></div>   
<div id="slide2" class="main"><content></div> 
```

内容的 css

```
.main{
      width:800px;
      padding:10px;
      color:#000;
      background:rgba(255,255,255,.85);
      height:405px;
      overflow:auto;
      position: relative;
      -webkit-border-radius: 20px;
  border-radius: 20px;
      -moz-box-shadow: 1px 2px 7px rgba(0, 0, 0, 0.35);
      -webkit-box-shadow: 1px 2px 7px rgba(0, 0, 0, 0.35);
      box-shadow: 1px 2px 7px rgba(0, 0, 0, 0.35);
      text-shadow:none;
      margin-top:175px;
      font-weight:bold;
} 
```

JS：

```
<script>
$(document).ready(function(){
   $('#minibar a').click(function(){
      var el = $(this).attr('href');
      var offset = $(el).offset();
      var top = offset.top - 100;
      $('body,html').animate({scrollTop:offset.top,scrollLeft:offset.left},500);
      return false;       
   });   
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:09:54.470

发现一个位置：fixed；在样式表中为 html 设置。删除它，动画按设计工作。谢谢您的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:42:10.637

```
var el = $( this.getAttribute('href') ); 
```

或者使用 jQuery：

```
var el = $( $(this).attr('href') ); 
```

`**[LIVE DEMO](http://jsbin.com/ezakin/2/edit)**`

```
$(document).ready(function(){
   $('#minibar a').click(function( e ){
      e.preventDefault();
      var el = $( this.getAttribute('href') );
      var offs = el.offset();
      $('html, body').stop().animate({ scrollTop: offs.top-100 },500);    
   });   
}); 
```

你从来没有使用你的`top`var，我真的不知道为什么`scrollLeft`. 如果需要，请使用它：

```
$('html, body').stop().animate({
    scrollTop: offs.top-100,
    scrollLeft: offs.left
},500); 
```

# meteor - Accounts.OnCreateUser() 没有触发

> ID：15260243
> 
> 赞同：2
> 
> 时间：2013-03-06T23:29:41.720
> 
> 标签：meteor

我正在关注这个关于自定义登录的精彩教程，作为这篇文章的答案 - [http://goo.gl/VLO34](http://goo.gl/VLO34) - 但它对我不起作用。

我逐字复制了所有文件，甚至添加了诸如下划线`_.pick`和 http之类的补充智能包，`Meteor.http.get`以防万一，被错误地遗漏了。

Anyhoo - 我让 github 授权我的应用程序，但是 Web 控制台和`db.users.findOne()`本地 mongo 实例中的 Meteor.users 显示`Accounts.OnCreateUser()`没有向我的用户配置文件添加任何新信息[我从 github 中提取]。换句话说，`{{currentUser.profile.avatar_url}}`并且`{{currentUser.profile.login}}`不会在该教程之后透露任何内容。所以我在屏幕上得到空白信息。

我第一次尝试了截屏视频，并注意到它`{loginButtons}}`返回了`{{currentUser.profile.login}}`. 我已经多次检查代码是否有错别字，但觉得有些地方不太对劲`Accounts.onCreateUser(fn)`……

我正在使用 Meteor 0.5.7，如果其他人在截屏后遇到此问题，请告诉我。谢谢，

编辑：我已经将该项目部署到 - [http://rptest-customlogin.meteor.com/](http://rptest-customlogin.meteor.com/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T21:13:39.300

截屏视频的作者在这里。几秒钟前，您的网站上有一个新用户:-)。因此，看起来登录正在您的网站上工作。但我猜您的应用程序中发生的事情是登录信息在渲染时或打印到控制台时尚不可用。原因是所有这些信息都是异步填充的。该过程需要几秒钟才能完成。如果您在模板中依赖 Meteor.user().profile 数据，则需要首先检查登录过程是否仍在进行中。

为此，您可以使用`Meteor.loggingIn()`javascript 函数或`{{#if loggingIn}}`车把块助手。该功能是“反应式”的，这意味着一旦结果更改`true`为`false`您的 UI 就会更新。所以模板可能看起来像这样：

```
<template name="loginDependentWidget">
  {{#if loggingIn}}
     Logging In
  {{else}}
     {{currentUser.profile.avatar_url}}
  {{/if}}
</template> 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T07:53:06.523

可能是错字，但`Accounts.OnCreateUser(fn);`应该是`Accounts.onCreateUser(fn);` Meteor 文档：[http ://docs.meteor.com/#accounts_oncreateuser](http://docs.meteor.com/#accounts_oncreateuser)

然后是关于同一主题的另一篇文章： [使用外部服务登录 Meteor：如何获取个人资料信息？](https://stackoverflow.com/questions/13660219/meteor-login-with-external-service-how-to-get-profile-information)

编辑：由于以下代码的格式而发布为编辑。与此同时，我用这段代码让它在我自己的项目上运行：

```
Accounts.onCreateUser(function(options, user) {
       if(!options || !user) {
        console.log('error creating user');
        return;
    } else {
        if(options.profile) {
            user.profile = options.profile;
        }
    }
    return user;
}); 
```

哪个工作得很好。有没有放在`Accounts.onCreateUser();`服务器上？

# r - R将文本字段转换为函数

> ID：15260245
> 
> 赞同：3
> 
> 时间：2013-03-06T23:29:53.677
> 
> 标签：r

我想使用字段中的信息并将其包含在 R 函数中，例如：

```
data #name of the data.frame with only one raw

"(if(nclusters>0){OptmizationInputs[3,3]*beta[1]}else{0})" # this is the raw 
```

如果我想在函数中使用这些信息，我该怎么做？

```
Another example:
A=c('x^2')
B=function (x) A
B(2)
"x^2"  # this is the return. I would like to have the return something like 2^2=4. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T00:14:31.803

使用`body<-`和解析

```
A <- 'x^2'

B <- function(x) {}

body(B) <- parse(text = A)

B(3)
## [1] 9 
```

[这里](https://stackoverflow.com/questions/12982528/how-to-create-an-r-function-programmatically)有更多的想法

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T00:18:56.413

另一个选项使用`plyr`：

```
A <- 'x^2'
library(plyr)
body(B) <- as.quoted(A)[[1]]
> B(5)
[1] 25 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T03:06:58.693

```
A  <- "x^2"; x <- 2
BB <- function(z){ print( as.expression(do.call("substitute", 
                                            list( parse(text=A)[[1]], list(x=eval(x) ) )))[[1]] ); 
               cat( "is equal to ", eval(parse(text=A)))
              }
 BB(2)
#2^2
#is equal to  4 
```

在 R 中管理表达式非常奇怪。`substitute`拒绝评估其第一个参数，因此您需要使用`do.call`允许在替换之前进行评估。此外，表达式的印刷表示隐藏了它们的基本表示。`[[1]]`尝试在结果之后删除相当神秘的（以我的思维方式）`as.expression(.)`。

# java - 声纳、QAPlug、IntelliJ 集成 - 多个配置文件？

> ID：15260246
> 
> 赞同：1
> 
> 时间：2013-03-06T23:29:54.463
> 
> 标签：java, intellij-idea, sonarqube

我已经在我们的构建服务器上安装了 Sonar，以便我们可以维护关于我们的编码规则合规性、代码覆盖率等的报告。

我想要做的是维护这个 Sonar 安装作为我们的 checkStyle、findBugs 和 PMD 规则的主要来源。Sonar 通过让您修改其使用的规则并导出它们来支持这一点。然后，我可以使用 QAPlug 插件将这些规则导入运行 IntelliJ Idea 的开发人员机器。

问题是我必须单独导入配置文件。这意味着我必须使用 checkStyle 配置文件运行 QAPlug，然后是 PMD 插件，然后是 findBugs 插件。这是期望开发人员一直做的太多步骤。

我可以将它们组合在插件本身中，以便它同时执行 PMD、checkStyle 和 findBugs 规则。但是随后维护配置文件的步骤量变得太大。IE。修改 Sonar 中的规则，导出 3 个配置文件，将 3 个配置文件合二为一，分发给开发者。

有没有更好的方法来实现这个目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:55:05.773

事实证明，您可以导入到已经存在的配置文件中。所以我只需要将所有 3 个文件导入 QAPlug，现在我就有了一个组合配置文件。

# azure - 如何在 Windows Azure 中创建备份

> ID：15260247
> 
> 赞同：0
> 
> 时间：2013-03-06T23:29:54.687
> 
> 标签：azure, azure-sql-database, azure-storage

我试图创建一个 WindowsAzure 备份，但我没有成功，因为只创建没有数据的表结构。这是我遵循的程序：

```
1.Select the database you want to back up in new portal of windows azure https://manage.windowsazure.com
2.In the footer you will have an option to import/export. Click export. This opens a modal popup. Select the storage account you want to use and type in a appropriate name to save the *.bacpac file.
3.Once the file is saved to storage, download it to local, open sql server 2012 management studio. Select the database server. Right click on it and in the context menu you will find Import Data-Tier Application. Select the bacpac file from you local and follow the settings. 
```

如何创建备份同时保存数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:31:12.043

`CREATE DATABASE XXXXXX AS COPY OF YYYYY`

MSDN 链接有一篇完整的文章，介绍了您可以执行此操作的所有不同方式，以上只是其中之一。LMGTFY：http: [//msdn.microsoft.com/en-us/library/windowsazure/ff951624.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ff951624.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:40:19.813

除了 T-SQL 脚本方法之外，还有一些方法，Red Gate 提供的两种方法是：

*   [SQL Azure 备份应用程序](http://www.red-gate.com/dynamic/products/dba/sql-azure-backup/download)- 免费的桌面应用程序以及命令行工具，允许您将 SQL Azure 数据库的完整备份传输到本地环境或您有权访问的其他环境。
*   [SQL Azure Backup Hosted](http://www.red-gate.com/products/dba/sql-azure-backup/) - 一种托管解决方案变体，具有许多功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:08:53.793

微软最近做了一个非常全面的博客，涵盖了备份 SQL Azure 数据库的所有方法。

[http://blogs.msdn.com/b/windows_azure_technical_support_wats_team/archive/2013/03/04/different-ways-to-backup-your-windows-azure-sql-database.aspx](http://blogs.msdn.com/b/windows_azure_technical_support_wats_team/archive/2013/03/04/different-ways-to-backup-your-windows-azure-sql-database.aspx)

只是让您知道-我开发了选项号 7 :)

# r - 重新安装 R linux ubuntu：未满足的依赖项 R

> ID：15260250
> 
> 赞同：9
> 
> 时间：2013-03-06T23:30:13.983
> 
> 标签：r, ubuntu, packages, apt-get

我使用 aptitude install 安装了一个包 Ubuntu 11.10 oneiric，显然由于依赖关系我无法安装。我在执行此操作时删除了更多库。我卸载了 Rstudio，但仍然无法在我的机器上安装 R。我在 ubuntu 上，这是我在运行 sudo apt-get install r-base 时得到的

以下软件包具有未满足的依赖关系： r-base : Depends: r-base-core (>= 2.15.3-1quantal0) 但不会安装 Depends: r-recommended (= 2.15.3-1quantal0) 但它不会安装 推荐：r-base-html 但不会安装 E：无法纠正问题，您持有损坏的软件包。

任何想法如何从头开始并让 R 再次运行？

更多错误日志：以下软件包具有未满足的依赖关系 r-base-core ：取决于：libblas3 但它不可安装或 libblas.so.3 但不可安装或 libatlas3-base 但不可安装取决于：libc6（ >= 2.15) 但要安装 2.13-20ubuntu5.3 取决于：liblapack3 但它不可安装或 liblapack.so.3 但不可安装或 libatlas3-base 但不可安装取决于：liblzma5 (>= 5.1\. 1alpha+20120614) 但无法安装 -</p>

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-25T17:16:31.503

尝试这个

如果您已将新 ubuntu 存储库中的一行添加到 /etc/apt/sources.list，请删除该行。然后，运行命令

```
sudo add-apt-repository ppa:marutter/rrutter 
sudo apt-get update 
sudo apt-get upgrade 
```

它对我有用，答案来自这里 [http://r.789695.n4.nabble.com/Upgrading-on-Ubuntu-from-2-11-1-to-2-15-1-td4636965.html](http://r.789695.n4.nabble.com/Upgrading-on-Ubuntu-from-2-11-1-to-2-15-1-td4636965.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-12T23:44:56.417

1.  卸载以前的 R 安装：

    ```
    sudo R --no-save
    pkgList <- installed.packages(priority='NA')
    remove.packages(pkgList)
    q()
    sudo apt-get remove --purge r-cran* r-base* 
    ```

2.  按照以下说明（针对 R 部分）： [如何在 Ubuntu 中安装 R、JGR 和 Deducer](http://r-interface.blogspot.com/2012/04/install-r-jgr-and-deducer-in-ubuntu.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T02:36:57.163

要列出您使用 aptitude 安装的内容，请键入以下内容

```
xyz@sxyzcom~$ sudo apt-get remove 
```

这应该列出您的 R 安装的剩余内容以及可能缺少的其他任何依赖项然后您可以运行

```
xyz@sxyzcom~$ sudo apt-get autoremove 
```

这应该让你回到第一方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T04:18:47.487

如果您遇到有关损坏包的问题，​​那么首先通过检查依赖关系来删除该包，然后强制删除该包，并且当您对系统进行重大更改时不要忘记重新启动。要删除该软件包，请使用这些 shell 命令

```
$ sudo su 
```

然后输入你的密码

```
# apt-cache rdepends package-name
# apt-get --purge remove --force package-name 
```

使用这些 shell 命令

```
# apt-get clean
# apt-get autoclean
# apt-get update
# apt-get upgrade
# apt-get dist-upgrade
# reboot 
```

这对我有用，试试这个，我相信这会解决你所有的问题，祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-20T03:54:04.640

如果你想强行删除包，你可以这样做

```
sudo dpkg --remove --force-remove-reinstreq package_name 
```

接着

```
sudo apt-get update 
```

# php - 如何从 php/Zend 为 LDAP 使用多个 TLS 证书？

> ID：15260252
> 
> 赞同：3
> 
> 时间：2013-03-06T23:30:31.310
> 
> 标签：php, zend-framework, ldap, certificate

在我们基于 Web 的应用程序中，我们支持 LDAP 身份验证。它适用于下面的代码。现在我们要支持 LDAP over TLS。我们在 SUSE Linux Enterprise Server 11 上为客户托管我们的产品，每个客户可以拥有不同的 TLS 证书。

我的问题是：

*   如何**设置 SUSE 服务器**（即 LDAP 客户端） - 为每个客户放置证书的位置，我需要编辑任何 conf 文件吗？
*   如何**使用来自 php 的不同证书通过 TLS 进行 LDAP 身份验证**。什么是确切的 php 语法？
*   什么类型的服务器有关系吗？交换、OpenLDAP 等？
*   现在我们有来自 Exchange 的 .cer 证书。对于 OpenLDAP 是否可以，或者必须将其（如何）转换为 .pem？

**SUSE 服务器 = LDAP 客户端配置**

*   SUSE Linux Enterprise Server 11 (x86_64)
*   ldapsearch：@（#）$OpenLDAP：ldapsearch 2.4.26（2012 年 9 月 26 日 13:14:42）
*   PHP 版本 5.4.9
*   Zend 引擎 v2.4.0

* * *

通过阅读[http://php.net/ldap_connect](http://php.net/ldap_connect)我了解到我可以使用不同的证书，但我不知道如何使用。

```
function authenticateZendAuth($username, $password){
   require_once 'Zend/Auth.php';
   $auth = Zend_Auth::getInstance();

   $ldapOptions = getConfigVariableValue('->ldap');

   $options = $ldapOptions->toArray();
   unset($options['log_path']);

   require_once 'Zend/Auth/Adapter/Ldap.php';
   $adapter = new Zend_Auth_Adapter_Ldap($options, $username, $password);

   $authenticated = $auth->authenticate($adapter);

   $log_path = $ldapOptions->log_path;
   if ($log_path) {
       $messages = $authenticated->getMessages();

       require_once("Zend/Log.php");
       require_once("Zend/Log/Writer/Stream.php");
       require_once("Zend/Log/Filter/Priority.php");
       $logger = new Zend_Log();
       $logger->addWriter(new Zend_Log_Writer_Stream($log_path));
       $filter = new Zend_Log_Filter_Priority(Zend_Log::DEBUG);
       $logger->addFilter($filter);

       foreach ($messages as $i => $message) {
           if ($i-- > 1) { // $messages[2] and up are log messages
               $message = str_replace("\n", "\n  ", $message);
               $logger->log("Ldap: $i: $message", Zend_Log::DEBUG);
           }
       }
   }

   return $authenticated;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:05:12.463

*如何设置我们的 SUSE 服务器（即 LDAP 客户端） - 为每个客户放置证书的位置，我需要编辑任何 conf 文件吗？*

如果您使用的是openssl（slapd），那么将证书放在哪里并不重要，只要您可以将配置文件设置为指向即可。它可能看起来像这样：

```
TLSCACertificateFile    /usr/var/openldap-data/cacert.pem 
TLSCertificateFile          /usr/var/openldap-data/servercrt.pem 
TLSCertificateKeyFile   /usr/var/openldap-data/serverkey.pem 
```

您将需要请求（或创建自己的）证书，这些证书与您用于 HTTPS 的证书相同。这是导入域名的地方，当您创建/请求证书时，它需要与您将要使用它的域名相匹配。有关详细信息，请参阅：[http ://www.openldap.org/pub/ksoper/OpenLDAP_TLS.html。](http://www.openldap.org/pub/ksoper/OpenLDAP_TLS.html)

*如何使用来自 php.ini 的不同证书通过 TLS 进行 LDAP 身份验证。什么是确切的 php 语法？*

你真的不需要在这里做任何特别的事情。确保使用适当的域名证书设置 LDAP 服务器。并确保您的本地 openladap 客户端（运行您的 php）通过其配置文件识别该证书的签名权限。然后注意许多 Zend 示例 ( [http://files.zend.com/help/Zend-Framework/zend.auth.adapter.ldap.html](http://files.zend.com/help/Zend-Framework/zend.auth.adapter.ldap.html) ) 使用配置文件来设置 Zend LDPA 客户端并打开 TLS . 您也可以使用 Zend_Ldap::setOptions() - 请参阅[http://framework.zend.com/manual/1.12/en/zend.auth.adapter.ldap.html上的注释](http://framework.zend.com/manual/1.12/en/zend.auth.adapter.ldap.html)

*什么类型的服务器重要吗？交换、OpenLDAP 等？* 不，不是。我的意思是，配置 LDAP 服务器很重要，但 php 客户端根本不关心。

*现在我们有来自 Exchange 的 .cer 证书。对于 OpenLDAP 是否可以，或者必须将其（如何）转换为 .pem？*

见：[http ://www.sslshopper.com/article-most-common-openssl-commands.html](http://www.sslshopper.com/article-most-common-openssl-commands.html)

```
openssl x509 -inform der -in certificate.cer -out certificate.pem 
```

# mysql - 从查询字符串设置的 Perl 变量在子程序中不可用（在某些子程序中可用！）

> ID：15260258
> 
> 赞同：0
> 
> 时间：2013-03-06T23:31:07.583
> 
> 标签：mysql, perl, subroutine

Perl 今天打败了我，我有一个问题。我正在通过来自另一个 perl 脚本的链接访问一个 perl 脚本。agent.pl?agentid=40

在 agent.pl 脚本中，我以两种不同的方式使用显示查询字符串而没有问题：

```
my $thatagent = $q->param('agentid');
$form{agentid} 
```

我在所有子程序之外的脚本的开头设置了词法变量。然后，我使用 $thatagent 在脚本运行时显示 HTML 的“默认”子例程中显示代理 ID 号。我这里没有任何问题。

```
$dbh->{AutoCommit} = 0;

my $q = CGI->new;

my $thatagent = $q->param('agentid');

my %form = $q->Vars;

if (! $q->param("savebtn")) {
&ViewAgent();
exit;
}

&UpdateAgent(); 
```

我从 viewagent 子例程中调用两个子例程，并在 select 语句中使用 $form{agentid} 也没有问题。

```
my $sth = $dbh->prepare("select a.name, a.paidcommission, a.paidreferral, paddy.address1, paddy.address2, paddy.city, paddy.state, paddy.zipcode, maddy.address1, maddy.address2, maddy.city, maddy.state, maddy.zipcode, bc.name, bc.phonenumber, bc.phoneext, bc.phonenumber2, bc.phoneext2, bc.fax, bc.email, sc.name, sc.phonenumber, sc.phoneext, sc.phonenumber2, sc.phoneext2, sc.fax, sc.email from agent a inner join entity e on entityid = agentid inner join address paddy on paddy.addressid = physicaladdressid inner join address maddy on maddy.addressid = mailingaddressid inner join contact bc on bc.contactid = billingcontactid inner join contact sc on sc.contactid = salescontactid where a.agentid = $form{agentid};") or die "prepare statement failed: $DBI::errstr\n"; 
```

和

```
my $sth = $dbh->prepare("select agentid, note, createdt, createuser from agentnote where agentid = $form{agentid};") or die "prepare statement failed: $DBI::errstr\n"; 
```

然后问题来了，我全局调用另一个子例程（上面列出的&updateagent）并尝试使用 $thatagent 但它失败了。如果我硬编码一个数字，它工作得很好。

```
sub UpdateAgent {

my $sth = $dbh->prepare("UPDATE agent SET name=?, paidcommission=?, paidreferral=?    WHERE agentid=?;") or die "prepare statement failed: $DBI::errstr\n";

$sth->execute($form{'name'}, $form{'paidcommission'}, $form{'paidreferral'}, $thatagent) or die "prepare statement failed: $DBI::errstr\n";

$sth->finish;

} 
```

我觉得我必须与我的子程序“看到”我的脚本的其余部分有某种脱节，但我不确定。请帮忙！

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:40:28.807

我猜您是在某种系统（例如 mod_perl）下运行此脚本，其中 .pl 文件被编译为根据需要调用的子例程。实际代码最终看起来像这样：

```
sub invoke_agent_pl {
    ...
    my $thatagent = ...;
    ...

    sub updateagent {
        ...
        # do something with $thatagent
        ...
    }
} 
```

这里发生的情况是 updateagent 使用的 $thatagent 变量并不总是与自动创建的包装程序 invoke_agent_pl 设置的 $thatagent 变量相同。

最简单的解决方法是说`our $thatagent`，不是`my`。最好不要在脚本中使用本质上是全局变量的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:47:59.890

好的，所以我添加了

```
my @thatagent = split(/=/,$ENV{'QUERY_STRING'});

my $thatagent = $thatagent[1]; 
```

它在整个脚本中保留了变量。

我对 Perl 了解不多，但看起来很奇怪。就像我说的，在显示 HTML 的初始子程序（以及从 HTML 子程序调用的两个子程序）中，我可以使用

```
$form{agentid} 
```

从那里我没有问题地将我的 cgi 参数读入哈希。

# amazon-web-services - 在 CloudFormation 模板中命名 EC2 实例？

> ID：15260263
> 
> 赞同：57
> 
> 时间：2013-03-06T23:31:22.810
> 
> 标签：amazon-web-services, amazon-ec2, amazon-cloudformation

我有一个可以工作并生成堆栈的模板，但我找不到要设置的属性或其他允许我为我创建的 EC2 实例提供名称的东西。生成时，名称为空。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-03-26T04:46:26.090

`Name`您需要在云形成模板中添加带有密钥的标签。像这样...

```
"ec2-instance" : {
    "Type" : "AWS::EC2::Instance",
    "Properties" : {
        "ImageId" : "ami-0102022,
        "SecurityGroupIds" : [{ "Ref" : "SecurityGroup" }],
        "SubnetId" : { "Ref" : "Subnet" },
        "InstanceType" : "m1.medium",
        "Tags" : [
            {"Key" : "Name", "Value" : "Instance name"},
            {"Key" : "Environment", "Value" : { "Ref" : "Environment" }},
            {"Key" : "Owner", "Value" : { "Ref" : "Owner" }}
        ]
    }
} 
```

# user-interface - IO 流到 JPanel，带有 JPanel JTextField 和 JTextArea 中 InputStream 和 OutputStream 的 GUI

> ID：15260266
> 
> 赞同：0
> 
> 时间：2013-03-06T23:31:32.533
> 
> 标签：user-interface, inputstream, jtextfield, jtextarea, outputstream

我正在尝试编写一个 GUI，用户可以在其中看到 JTextArea 中的系统输出，并且他在 JTextField 中写入输入，这两个对象都位于 JPanel 中。如何将系统输出流连接到 JTextArea 并将系统输入流连接到 JTextField？我已经用谷歌搜索并搜索了这些论坛，但没有找到解决方案。如果有人可以帮助我，我会很高兴。

我有一个使用 GUI 调用 JPanel 的 Master 类，稍后我将在不同的线程中执行工作，但现在我正在努力解决将 IO 流连接到 JPanel 的基本问题。下面是2个类：

```
public class MainTest {

public static void main(String[] args) throws IOException {

    JPanelOUT testpanel = new JPanelOUT();
    JFrame frame = new JFrame();
    frame.add(testpanel);
    frame.setVisible(true);
    frame.pack();

    /*
    System.setOut(CONVERT TEXTAREA TO AN OUTPUTSTREAM SOMEHOW??(JPanelOUT.textArea)));

    System.setIn(CONVERT STRING TO AN INPUTSTREAM SOMEHOW?? JPanelOUT.textField);
    */
    String text = Sreadinput();
    System.out.println(text);   
}

public static String Sreadinput() throws IOException {
    BufferedReader in = new BufferedReader(new InputStreamReader(JPanelOUT.is));
    String input=in.readLine();
    return input;
} 
```

}

```
public class JPanelOUT extends JPanel implements ActionListener {
protected static JTextField textField;
protected static JTextArea textArea;
public static InputStream is;
private final static String newline = "\n";

public JPanelOUT() throws UnsupportedEncodingException, FileNotFoundException {
    super(new GridBagLayout());

    JLabel label1 = new JLabel("OUTPUT:");;
    JLabel label2 = new JLabel("INPUT:");;

    textField = new JTextField(20);
    textField.addActionListener(this);
    textArea = new JTextArea(10, 20);
    textArea.setEditable(false);
    textArea.setBackground(Color.black);
    textArea.setForeground(Color.white);
    JScrollPane scrollPane = new JScrollPane(textArea);
    scrollPane.setPreferredSize(new Dimension(500,200));

    GridBagConstraints c = new GridBagConstraints();
    c.gridwidth = GridBagConstraints.REMAINDER;
    c.fill = GridBagConstraints.HORIZONTAL;
    add(label1, c);
    c.fill = GridBagConstraints.BOTH;
    c.weightx = 1.0;
    c.weighty = 1.0;
    add(scrollPane, c);
    c.weightx = 0;
    c.weighty = 0;
    c.fill = GridBagConstraints.HORIZONTAL;
    add(label2, c);
    c.fill = GridBagConstraints.HORIZONTAL;
    add(textField, c);

    String WelcomeText1 = "Hello and welcome to the TEST";
    String WelcomeText2 = "Trying to get the input field below to become the System.in and this output";
    String WelcomeText3 = "field to become the System.out (preferrably both with UTF-8 encoding where";
    String WelcomeText4 = "the scrollpane automatically scrolls down to the last output line)!";
    textArea.append(WelcomeText1 + newline + newline + WelcomeText2 + newline + WelcomeText3 + newline + WelcomeText4 + newline + newline);

    String text = textField.getText();
    is =new ByteArrayInputStream(text.getBytes("UTF-8"));
}

public void actionPerformed(ActionEvent evt) {
    String text2 = textField.getText();

    textArea.append(text2 + newline);
    textField.selectAll();
    textArea.setCaretPosition(textArea.getDocument().getLength());
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T20:07:41.243

我是 java 新手，也在尝试处理流 :) 抱歉，我来自俄罗斯，英语不好。可能这个代码会帮助你。

```
public class NewJFrame extends javax.swing.JFrame {

/**
 * Creates new form NewJFrame
 */
public MyPrintStream myPrintStream;
public NewJFrame()throws FileNotFoundException{
    initComponents();
    this.myPrintStream = new MyPrintStream("string");
}
private class MyPrintStream extends PrintStream {        
    MyPrintStream(String str)throws FileNotFoundException{
        super(str);
    }
    public void println(String s){
        textArea1.append(s+'\n');
    }
} .. continuation class code 
```

主要方法：

```
public static void main(String args[]){
    /* Set the Nimbus look and feel... */

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run(){
            try{
            NewJFrame myJFrame = new NewJFrame();
            myJFrame.setVisible(true);                    
            System.setOut(myJFrame.myPrintStream);
            System.out.println("its work");
            System.out.println("its work2");
            System.out.print("str"); //does not work, need to override
            }catch (FileNotFoundException e){System.out.println (e.getMessage());}
        }
    }); 
```

# file - 写入数据后，有没有办法清除文件上下文？

> ID：15260270
> 
> 赞同：0
> 
> 时间：2013-03-06T23:31:48.377
> 
> 标签：file, matlab, cmd

我有这个程序，我在其中打开一个文件并在其中写入数据点，但问题是我必须在循环中执行此操作。它去：

```
file1=importdata('myfile.txt','%s')

for k=1:1:128

fid=fopen('myfile2.txt','w+') % I write input to that file and pass it to my exe file

fprintf(fid,'input1')

fprintf(fid,'input2')

fprintf(fid,'input3')

 the 4th input (input4) is being taken from a diff file.txt and 

input4=sscanf(file1{k},'%s')

Val=str2double(input4)

fprintf(fid,'%.3f',Val)

fclose(fid)

[status,result]=system('command<myfile2.txt') 

M= sscanf(result,'%s')

more_result=[ Val M]

Fid2=fopen(myfile3.txt,'w+')

frpintf(Fid2,'%s', more_result)

end 
```

这是一个模糊的代码概念。然后我`sscanf`得到我想要的特定值（M）的结果。

我想在另一个文件中写入 Val 和 Z，但我只得到文件中每个的最后一个值，因为`fopen(fid,'w+')`在循环内不断更新。使用`a+`加号并没有帮助，并且在程序运行完成后它会一直附加并且永远不会更新。

现在我正在使用a+，然后在我完成运行后手动删除该文件的内容。在循环外写入会给我错误。有没有办法在每次运行后清除文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:31:17.597

我想如果你只打开一次`w+`，你可以写多次。第一次将是文件的开头，之后将附加数据。

将打开和关闭放在循环之外。在你放的循环之前

```
fid=fopen('myfile2.txt','w+')
Fid2=fopen('myfile3.txt','w+') 
```

你可以在循环之后关闭

```
fclose(fid)
fclose(Fid2) 
```

如果这真的不起作用，那么我建议在循环之前打开文件一次，`w'`这将清空内容。然后你可以`a+`在循环内使用来追加数据。每次你都会有一个干净的文件。

# ios - 解析推送通知 iOS

> ID：15260273
> 
> 赞同：2
> 
> 时间：2013-03-06T23:32:00.600
> 
> 标签：ios, xcode, push-notification, apple-push-notifications

[我在Parse.com](http://parse.com)上完成了 Push 的事情（一切正常）然后我被要求为公司创建一个解析帐户并进行设置，以便他们可以自行管理。好吧，没有意识到网站上有一个导出按钮，我删除了我帐户上的应用程序并为他们创建了一个帐户并将该应用程序添加到他们的帐户中。我添加了所有正确的证书并更新了应用程序和客户端密钥，但它不会发送它，并且在推送通知选项卡上，它会显示我有收件人（我的测试设备）但是当我点击发送时，它会说完成，但我的设备上不会出现任何内容。所以，不太聪明，我删除了那个应用程序并在我的帐户上重新创建它（认为另一个帐户可能有问题）。好吧，现在它甚至无法在我的帐户上使用。我已经创建了所有新证书和所有内容，但我不知道为什么它不起作用。同样，在推送通知选项卡上，它会显示我有收件人（我的测试设备），但是当我点击发送时，它会说完成，但我的设备上不会出现任何内容。帮助？

我的想法可能是设备正在记住旧帐户的 APNS 权限，我是对的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T15:42:40.170

我不久前遇到了这个问题。对我来说，这是开发人员构建和发布构建之间的区别。您将在 Apple 的配置门户中看到可以为您的应用设置 2 个推送证书。一种用于生产发布，另一种用于开发人员测试。当您构建应用程序进行测试时，它会自动查找开发人员证书。当您进行发布构建时，它会查找发布证书。

所以...确保您已将正确的推送证书上传到 Parse。就我而言，Parse 会说消息已发送到设备，但我从未看到它们通过，因为 Parse 将它们发送给 Apple 时使用的证书与我的特定构建类型不匹配。

# export - hbase 导出和导入，在导入前不创建新表

> ID：15260275
> 
> 赞同：0
> 
> 时间：2013-03-06T23:32:01.923
> 
> 标签：export, hbase

我正在尝试使用 LoadIncrementalHFiles （这样我不需要在导入之前创建表）来导入导出的文件。

```
hbase org.apache.hadoop.hbase.mapreduce.Export t2 /user/backup6/test2

hbase org.apache.hadoop.hbase.mapreduce.LoadIncrementalHFiles   /user/backup6/test2 tb2 
```

当我尝试加载它时出现以下错误

```
13/03/06 23:18:46 WARN mapreduce.LoadIncrementalHFiles: Bulk load operation did not find any files to load in directory /user/backup6/test2\.  Does it contain files in subdirectories that correspond to column family names? 
```

在 hdfs 目录上，我可以看到导出步骤创建的 3 个文件夹 _SUCESS、_logs/history、part-m-0000 文件。

当我尝试使用`org.apache.hadoop.hbase.mapreduce.Import`时，它抱怨新表不存在。

有没有办法在不创建新表的情况下进行导入（即仅使用导出的文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:37:24.277

Import 只能导入到现有表。如果表丢失，LoadIncrementalHFiles 将创建一个新表。

# grails - Grails 更新依赖关系：错误编译错误：启动失败 | 使用 javac 编译时出现编译错误

> ID：15260277
> 
> 赞同：2
> 
> 时间：2013-03-06T23:32:07.253
> 
> 标签：grails, workspace

我正在尝试运行 grails 2.1.1 Web 应用程序。从 SVN 存储库签出项目时，它尝试更新依赖项并失败并出现以下错误：

```
| Loading Grails 2.1.1
| Configuring classpath
| Error SLF4J: Class path contains multiple SLF4J bindings.
| Error SLF4J: Found binding in [jar:file:/Users/sm026588/.grails/ivy-cache/org.grails/grails-plugin-log4j/jars/grails-plugin-log4j-2.1.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
| Error SLF4J: Found binding in [jar:file:/Users/sm026588/.grails/ivy-cache/org.slf4j/slf4j-log4j12/jars/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
| Error SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
| Configuring classpath.
| Environment set to development.....
| Compiling 45 source files.
| Error Compilation error: startup failed:
Compile error during compilation with javac.
error: error reading /Users/../.grails/ivy-cache/com....intent/intent-processing-protobuf/jars/intent-processing-protobuf-2.10.2.jar; cannot read zip file entry
1 error
1 error 
```

我曾尝试删除 jar 并重新运行“刷新依赖项”，但没有奏效。尝试查看jar文件是否可以解压，我可以成功解压，这告诉我jar没有损坏。在 Mac OS X 上尝试使用 Eclipse Juno、STS 和 Eclipse Indigo，它们都给出了相同的错误。已经在这一点上停留了很长一段时间，任何帮助将不胜感激。

# php - FOSRestBundle 中的路由如何工作？

> ID：15260278
> 
> 赞同：16
> 
> 时间：2013-03-06T23:32:18.640
> 
> 标签：php, symfony, fosrestbundle

有人可以清楚地解释如何使用 FOSRest 为 REST 请求配置路由吗？每个教程似乎都有不同的做法。

我的控制器：

```
<?php
namespace Data\APIBundle\Controller;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;

class DatasetController extends Controller{

 protected function postDatasetAction(Request $request){
  //Query here
} 
```

URL 应该是这样的：Symfony/web/app_dev.php/api/dataset。所以我认为路线应该是......

*应用程序/配置/路由.yml*

```
data_api:
  resource: "@DataAPIBundle/Resources/config/routing.yml"
  prefix: /api
  type: rest 
```

和....

*数据/APIBundle/Resources/config/routing.yml*

```
data_query:
  type: rest
  pattern:  /dataset
  defaults: {_controller: DataAPIBundle:Dataset:datasetAction, _format: json }
  requirements:
     _method: POST 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-07T22:11:15.157

请按照下一个 URL 阅读官方文档： [http ://symfony.com/doc/master/bundles/FOSRestBundle/index.html](http://symfony.com/doc/master/bundles/FOSRestBundle/index.html)

从这个捆绑包开始，我建议遵循*单个 restful 控制器*文档： [http ://symfony.com/doc/master/bundles/FOSRestBundle/5-automatic-route-generation_single-restful-controller.html](http://symfony.com/doc/master/bundles/FOSRestBundle/5-automatic-route-generation_single-restful-controller.html)

您还将找到有关此捆绑包可以提供什么的清晰示例 ( [https://github.com/liip/LiipHelloBundle )。](https://github.com/liip/LiipHelloBundle)

* * *

您发布的片段中的几件事引起了我的注意：

您的控制器方法的可见性受到保护，而它应该是公开的（[http://symfony.com/doc/current/book/controller.html](http://symfony.com/doc/current/book/controller.html)）

```
public function postDatasetAction(Request $request) {
     // your code
} 
```

为配置您的路由而创建的“routing.yml”文件应包含上述控制器方法的名称（*postDatasetAction*而不是*DatasetAction*）：

```
# routing.yml
data_query:
    type: rest
    pattern:  /dataset
    defaults: {_controller: DataAPIBundle:Dataset:postDatasetAction, _format: json }
    requirements:
        _method: POST 
```

* * *

请在下面找到一个示例来设置如下路线：

get_items 获取任何 /items.{json}

```
# config.yml
fos_rest:
    allowed_methods_listener: true

    format_listener:
        default_priorities: ['json', html, '*/*']
        fallback_format: json
        prefer_extension: true

    param_fetcher_listener: true

    routing_loader:
        default_format: json

    view:
        formats:
            json: true
        mime_types:
            json: ['application/json', 'application/x-json']
        force_redirects:
            html: true
        view_response_listener: force 
```

* * *

```
# routing.yml
categories:
    type:     rest
    resource: Acme\DemoBundle\Controller\ItemController 
```

* * *

```
<?php

namespace Acme\DemoBundle\Controller

use FOS\RestBundle\Request\ParamFetcher;
use FOS\RestBundle\Controller\Annotations as Rest;

class ItemController 
{
    /**
     * Get items by constraints
     *
     * @Rest\QueryParam(name="id", array=true, requirements="\d+", default="-1", description="Identifier")
     * @Rest\QueryParam(name="active", requirements="\d?", default="1", description="Active items")
     * @Rest\QueryParam(name="from", requirements="\d{4}-\d{2}-\d{2}", default="0000-00-00", description="From date")
     * @Rest\QueryParam(name="to", requirements="\d{4}-\d{2}-\d{2}", default="0000-00-00", description="End date")
     * @Rest\QueryParam(name="labels", array=true, requirements="\d+", default="-1", description="Labels under which items have been classifed")
     *
     * @Rest\View()
     *
     * @param  ParamFetcher                                          $paramFetcher
     */
    public function getItemsAction(ParamFetcher $paramFetcher) {
        $parameters = $paramFetcher->all();

        // returns array which will be converted to json contents by FOSRestBundle
        return $this->getResource($parameters);
    }
} 
```

PS：您需要添加一个视图以将资源显示为 HTML 页面

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-04-11T12:35:23.713

您在控制器中缺少 FOSRestbundle 的路由部分：

```
protected function postDatasetAction(Request $request){

  //Query here

} // "post_dataset"      [POST] /dataset 
```

# java - 将 Char 转换为 Java KeyEvent KeyCode

> ID：15260282
> 
> 赞同：16
> 
> 时间：2013-03-06T23:32:42.227
> 
> 标签：java, key

我正在编写一个要求用户输入字符串的基本程序，并且我正在尝试使用一个机器人（来自`java.awt.Robot`），它会在延迟后将此消息输入到另一个文档中。我现在遇到的问题是我需要将我得到的任何内容转换`message.charAt(i)`为`KeyEvent.VK_[insert Char]`KeyCode。有没有更好的方法来做我想做的事情？我想我总是可以有一个巨大的 switch 语句来获取适当的 KeyCode，但我希望会有一种更优雅的方式。我的第一个想法，做了一段时间的 python，是创建一个字符串`"KeyEvent.VK_" + message.charAt(i)`并以某种方式将其转换为代码，但我认为唯一的方法是使用不鼓励的反射。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-11-08T02:29:37.170

如果我有一个 unicode 字符并且我只想知道它的击键，那么我使用

```
int keyCode = java.awt.event.KeyEvent.getExtendedKeyCodeForChar(charCode); 
```

我从来不需要另一种更复杂的方法来做到这一点。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-06T23:37:09.770

你可以解决这个问题：

```
KeyStroke ks = KeyStroke.getKeyStroke('k', 0);
System.out.println(ks.getKeyCode()); 
```

或者只是使用这个：

```
private void writeString(String s) {
    for (int i = 0; i < s.length(); i++) {
        char c = s.charAt(i);
        if (Character.isUpperCase(c)) {
            robot.keyPress(KeyEvent.VK_SHIFT);
        }
        robot.keyPress(Character.toUpperCase(c));
        robot.keyRelease(Character.toUpperCase(c));

        if (Character.isUpperCase(c)) {
            robot.keyRelease(KeyEvent.VK_SHIFT);
        }
    }
    robot.delay(delay);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-01T16:50:36.013

更详细但更可定制

```
import java.awt.AWTException;
import java.awt.Robot;
import java.awt.event.KeyEvent;
import java.util.HashMap;
import java.util.Map;

public class AsciiKeyTyper {

    private Map<Character,KeyStroke> strokeMap;
    private Robot robot;
    public AsciiKeyTyper() throws AWTException{
        robot=new Robot();
        //initialize a map from the input char to the keystroke,
        //using the fact that sometimes the KeyEvent key codes correspond to ASCII
        strokeMap=new HashMap<Character,KeyStroke>(){
                private static final long serialVersionUID = 1L;{
            put('\n',new KeyStroke(KeyEvent.VK_ENTER,false));
            put('\t',new KeyStroke(KeyEvent.VK_TAB,false));
            put('\r',new KeyStroke(KeyEvent.VK_HOME,false));
            put(' ',new KeyStroke(KeyEvent.VK_SPACE,false));
            put('!',new KeyStroke(KeyEvent.VK_1,true));
            put('"',new KeyStroke(KeyEvent.VK_QUOTE,true));
            put('#',new KeyStroke(KeyEvent.VK_3,true));
            put('$',new KeyStroke(KeyEvent.VK_4,true));
            put('%',new KeyStroke(KeyEvent.VK_5,true));
            put('&',new KeyStroke(KeyEvent.VK_7,true));
            put('\'',new KeyStroke(KeyEvent.VK_QUOTE,false));
            put('(',new KeyStroke(KeyEvent.VK_9,true));
            put(')',new KeyStroke(KeyEvent.VK_0,true));
            put('*',new KeyStroke(KeyEvent.VK_8,true));
            put('+',new KeyStroke(KeyEvent.VK_EQUALS,true));
            put(',',new KeyStroke(KeyEvent.VK_COMMA,false));
            put('-',new KeyStroke(KeyEvent.VK_MINUS,false));
            put('.',new KeyStroke(KeyEvent.VK_PERIOD,false));
            put('/',new KeyStroke(KeyEvent.VK_SLASH,false));
            for(int i=(int)'0';i<=(int)'9';i++){
                put((char)i,new KeyStroke(i,false));
            }
            put(':',new KeyStroke(KeyEvent.VK_SEMICOLON,true));
            put(';',new KeyStroke(KeyEvent.VK_SEMICOLON,false));
            put('<',new KeyStroke(KeyEvent.VK_COMMA,true));
            put('=',new KeyStroke(KeyEvent.VK_EQUALS,false));
            put('>',new KeyStroke(KeyEvent.VK_PERIOD,true));
            put('?',new KeyStroke(KeyEvent.VK_SLASH,true));
            put('@',new KeyStroke(KeyEvent.VK_2,true));
            for(int i=(int)'A';i<=(int)'Z';i++){
                put((char)i,new KeyStroke(i,true));
            }
            put('[',new KeyStroke(KeyEvent.VK_OPEN_BRACKET,false));
            put('\\',new KeyStroke(KeyEvent.VK_BACK_SLASH,false));
            put(']',new KeyStroke(KeyEvent.VK_CLOSE_BRACKET,false));
            put('^',new KeyStroke(KeyEvent.VK_6,true));
            put('_',new KeyStroke(KeyEvent.VK_MINUS,true));
            put('`',new KeyStroke(KeyEvent.VK_BACK_QUOTE,false));
            for(int i=(int)'A';i<=(int)'Z';i++){
                put((char)(i+((int)'a'-(int)'A')),new KeyStroke(i,false));
            }
            put('{',new KeyStroke(KeyEvent.VK_OPEN_BRACKET,true));
            put('|',new KeyStroke(KeyEvent.VK_BACK_SLASH,true));
            put('}',new KeyStroke(KeyEvent.VK_CLOSE_BRACKET,true));
            put('~',new KeyStroke(KeyEvent.VK_BACK_QUOTE,true));
        }};
    }
    public void typeKey(char key){
        try{
            strokeMap.get(key).type();
        }catch(NullPointerException ex){
            System.err.println("'"+key+"': no such key in mappings");
        }
    }
    private class KeyStroke{
        int code;
        boolean isShifted;
        public KeyStroke(int keyCode,boolean shift){
            code=keyCode;
            isShifted=shift;
        }
        public void type(){
            try{
                if (isShifted) {
                    robot.keyPress(KeyEvent.VK_SHIFT);
                }
                robot.keyPress(code);
                robot.keyRelease(code);
                if (isShifted) {
                    robot.keyRelease(KeyEvent.VK_SHIFT);
                }
                if(code==KeyEvent.VK_ENTER){
                    robot.keyPress(KeyEvent.VK_HOME);
                    robot.keyRelease(KeyEvent.VK_HOME);
                }

            }catch(IllegalArgumentException ex){
                String ch="";
                for(char key:strokeMap.keySet()){
                    if(strokeMap.get(key)==this){
                        ch=""+key;
                        break;
                    }
                }
                System.err.println("Key Code Not Recognized: '"+ch+"'->"+code);
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-07-14T16:24:48.527

使用反射！

```
KeyEvent.class.getField("VK_"+keyName); 
```

# java - 什么时候开窗？如何在不监听窗口事件的情况下知道窗口是否打开？

> ID：15260285
> 
> 赞同：1
> 
> 时间：2013-03-06T23:33:08.710
> 
> 标签：java, swing

下面的示例允许显示、隐藏、处置和关闭窗口（通过发送事件）。

示例显示，该窗口仅打开一次 - 在第一次可见时。即使一个窗口被释放，然后再次显示，它也不会发生“打开”事件。

为什么？

如何在不编写处理程序并跟踪此事件的情况下知道窗口是否打开？

如何关闭窗口以使其在可见集上再次经历打开事件？即如何将窗口对象返回到初始状态？

是否有任何其他状态或事件可以具有所需的属性？

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.AbstractAction;
import javax.swing.AbstractListModel;
import javax.swing.ComboBoxModel;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.event.ListDataListener;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

public class Tester_JFrame_Closing_01 {

    private static Logger log = LoggerFactory.getLogger(Tester_JFrame_Closing_01.class);

    protected static Toolkit toolkit = Toolkit.getDefaultToolkit();
    protected static EventQueue eventQueue = toolkit.getSystemEventQueue();

    public static enum CloseOperation {

        DO_NOTHING_ON_CLOSE(JFrame.DO_NOTHING_ON_CLOSE),
        HIDE_ON_CLOSE(JFrame.HIDE_ON_CLOSE),
        DISPOSE_ON_CLOSE(JFrame.DISPOSE_ON_CLOSE),
        EXIT_ON_CLOSE(JFrame.EXIT_ON_CLOSE)
        ;

        public static ComboBoxModel newModel() {

            return new ComboBoxModel() {
                private CloseOperation selected = HIDE_ON_CLOSE;

                @SuppressWarnings("serial")
                private final AbstractListModel core = new AbstractListModel() {

                    @Override
                    public int getSize() {
                        return values().length;
                    }

                    @Override
                    public Object getElementAt(int index) {
                        return values()[index];
                    }

                };

                @Override
                public int getSize() {
                    return core.getSize();
                }

                @Override
                public Object getElementAt(int index) {
                    return core.getElementAt(index);
                }

                @Override
                public void addListDataListener(ListDataListener l) {
                    core.addListDataListener(l);
                }

                @Override
                public void removeListDataListener(ListDataListener l) {
                    core.removeListDataListener(l);
                }

                @Override
                public void setSelectedItem(Object anItem) {
                    selected = (CloseOperation) anItem;
                }

                @Override
                public Object getSelectedItem() {
                    return selected;
                }

            };

        }

        public final int Value;

        private CloseOperation(int value) {
            this.Value = value;
        }

        @Override
        public String toString() {
            switch(this) {
            case DISPOSE_ON_CLOSE:
                return "DISPOSE_ON_CLOSE";
            case HIDE_ON_CLOSE:
                return "HIDE_ON_CLOSE";
            case DO_NOTHING_ON_CLOSE:
                return "DO_NOTHING_ON_CLOSE";
            case EXIT_ON_CLOSE:
                return "EXIT_ON_CLOSE";
            default:
                return "<UNKNOWN>";
            }
        }
    }

    public static void main(String[] args) {

        WindowAdapter windowAdapter = new WindowAdapter() {
            @Override
            public void windowClosed(WindowEvent e) {
                log.debug("windowClosed");
            }

            @Override
            public void windowClosing(WindowEvent e) {
                log.debug("windowClosing");
            }

            @Override
            public void windowOpened(WindowEvent e) {
                log.debug("windowOpened");
            }

        };

        final JFrame frame = new JFrame("Controlled window");
        frame.setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);
        frame.addWindowListener(windowAdapter);

        final WindowEvent closeEvent = new WindowEvent(frame, WindowEvent.WINDOW_CLOSING);

        @SuppressWarnings("serial")
        AbstractAction closeAction = new AbstractAction("close") {
            @Override
            public void actionPerformed(ActionEvent e) {
                eventQueue.postEvent(closeEvent);
            }
        };

        @SuppressWarnings("serial")
        AbstractAction hideAction = new AbstractAction("hide") {
            @Override
            public void actionPerformed(ActionEvent e) {
                frame.setVisible(false);
            }
        };

        @SuppressWarnings("serial")
        AbstractAction showAction = new AbstractAction("show") {
            @Override
            public void actionPerformed(ActionEvent e) {
                frame.setVisible(true);
            }
        };

        @SuppressWarnings("serial")
        AbstractAction disposeAction = new AbstractAction("dispose") {

            @Override
            public void actionPerformed(ActionEvent e) {
                frame.dispose();
            }
        };

        JButton closeButton = new JButton(closeAction);
        JButton hideButton = new JButton(hideAction);
        JButton showButton = new JButton(showAction);
        JButton disposeButton = new JButton(disposeAction);

        ComboBoxModel closeOperationModel = CloseOperation.newModel();

        final JComboBox closeOperationCombo = new JComboBox(closeOperationModel);
        closeOperationCombo.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                log.debug("closeOperationCombo.actionPerformed({})", e);
                frame.setDefaultCloseOperation(((CloseOperation)closeOperationCombo.getSelectedItem()).Value);
            }
        });

        JPanel buttonPanel = new JPanel();
        buttonPanel.setLayout(new FlowLayout());

        buttonPanel.add(showButton);
        buttonPanel.add(hideButton);
        buttonPanel.add(disposeButton);
        buttonPanel.add(closeButton);
        buttonPanel.add(closeOperationCombo);

        JFrame controlFrame = new JFrame("Controller window");
        controlFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        controlFrame.setLayout(new FlowLayout());
        controlFrame.add(buttonPanel, BorderLayout.SOUTH);
        controlFrame.pack();
        controlFrame.setLocation(100, 100);
        controlFrame.setVisible(true);

        frame.setBounds(100, 100 + controlFrame.getHeight(), controlFrame.getWidth(), 480);

    }
} 
```

**极好的**

他们有一个名为的字段`Window.state`，他们甚至没有初始化（因此它为零），然后他们在`show()`方法中对其进行一次测试并将其设置为`1`if it is `0`。这是唯一`state`使用的地方，这里`windowOpened`被解雇了。没有代码可以返回`state`到`0`任何地方。此外，他们在子类中放弃了这个`state`变量，`Frame`并用具有相同名称的新变量覆盖它，该变量按位保存一些新状态，包括图标化和类似状态，忘记打开位！凉爽的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T04:06:12.433

> 如何将窗口对象返回到初始状态？

如果您想将变量和组件返回到初始状态，那么我认为您需要重新创建窗口。

> 如何关闭窗口以使其在可见集上再次经历打开事件？

您可以通过执行以下操作自己跟踪窗口的关闭/打开：

```
 WindowAdapter windowAdapter = new WindowAdapter()
    {
        boolean closed = false;

        @Override
        public void windowClosed(WindowEvent e) {
            closed = true;
            System.out.println("windowClosed");
        }

        @Override
        public void windowClosing(WindowEvent e) {
            System.out.println("windowClosing");
        }

        @Override
        public void windowOpened(WindowEvent e) {
            System.out.println("windowOpened");
            closed = false;
        }

        @Override
        public void windowActivated(WindowEvent e) {
            System.out.println("windowActivated");

            if (closed)
                windowOpened(e);

        }
    }; 
```

为了使“关闭”按钮起作用，您还需要使用：

```
 frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:42:38.890

你可以用这个

要在 java swing 应用程序中找到活动窗口（无论是框架还是对话框），您可以使用以下递归方法：

```
Window getSelectedWindow(Window[] windows) {
    Window result = null;
    for (int i = 0; i < windows.length; i++) {
        Window window = windows[i];
        if (window.isActive()) {
            result = window;
        } else {
            Window[] ownedWindows = window.getOwnedWindows();
            if (ownedWindows != null) {
                result = getSelectedWindow(ownedWindows);
            }
        }
    }
    return result;
} 
```

参考这篇文章 [在Java中获取当前活动窗口的标题](https://stackoverflow.com/questions/1354254/get-current-active-windows-title-in-java)

# python - 有没有办法对彼此对应的列表进行排序？

> ID：15260286
> 
> 赞同：0
> 
> 时间：2013-03-06T23:33:09.297
> 
> 标签：python, list, sorting

我有一个函数（w），它返回文本中的单词及其频率。我需要编写另一个函数（W，F，N），其中 W 是文本中的单词，F 是它们的频率，N 是我想要返回的数量。我认为最好的方法是按降序对函数（W，F，N）中的 W 和 F 进行排序。这可能吗？我需要创建自己的函数来做到这一点吗？我对排序没有太多经验，但我想也许在他们排序之后

```
def function(W,F,N):
    .......
    finalList = sortedList[:N]:
    return finalList 
```

这是一个家庭作业，所以我真的需要解释，这样我才能理解如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:37:11.400

压缩、排序、解压缩：

```
W = ["wolverine", "cat", "dog"]
F = [3, 2, 1]

f, w = zip(*sorted(zip(F, W))) 
```

`w`现在是按频率排序的单词列表。

# ruby - Ruby 1.8 与 1.9：确定 Ruby 单例类是否是另一个类的子类

> ID：15260287
> 
> 赞同：2
> 
> 时间：2013-03-06T23:33:23.827
> 
> 标签：ruby, inheritance, subclass, superclass, eigenclass

如[前一个问题的答案中所述](https://stackoverflow.com/a/4545583/582414)，`B < A`这是确定一个类是否是另一个类的最简单方法。`B`但是，当是单例类（即特征类）时，这在 Ruby 1.8（也是 REE 1.8）中似乎失败了。为了显示：

```
class A; end
class B < A; end

b = B.new

B.ancestors                         # => [B, A, Object, Kernel] (also BasicObject in 1.9)
(class << b; self; end).ancestors   # => [B, A, Object, Kernel] (also BasicObject in 1.9)

B < A                               # => true
(class << b; self; end) < A         # => true in 1.9; false in 1.8 
```

如您所见，即使`A`被列为单例类 ( `class << b; self; end`)的祖先，`false`当您检查它是否是`A`Ruby 1.8 中的子类时，它也会返回（但`true`在 1.9 中正确返回）。遵循`#superclass`链条似乎显示了为什么会这样：

```
B.superclass
  # => A

(class << b; self; end).superclass
  # => B in 1.9
  # => singleton class of B in 1.8

(class << b; self; end).superclass.superclass
  # => A in 1.9
  # => singleton class of Class in 1.8 
```

有谁知道这是 1.8 中的一个错误，恰好在 1.9 中修复，或者可能是在 1.9 中有意改变的预期行为？我尝试在其他地方找到有关此问题的提及或文档，但找不到任何东西。

由于这个问题，有谁知道**检查单例类是否是`A`Ruby 1.8 中的子类的最佳方法是什么？**我一直在做`(class << b; self; end).ancestors.include?(A)`一种解决方法，尽管它在技术上并不“正确”，因为祖先列表也包含包含的模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:36:11.633

我会建议：

```
class Object; def metaclass; class << self; self; end; end; end

class A; end
class B < A; end

b = B.new

b.metaclass < A.metaclass || b.metaclass < A 
```

在 Ruby 1.8、1.9 和 2.0 中测试。

# javascript - 将 webkit 滚动条样式应用于 textarea

> ID：15260288
> 
> 赞同：2
> 
> 时间：2013-03-06T23:33:34.203
> 
> 标签：javascript, html, css

有没有办法使用[这些 shadow dom 元素](http://glazkov.com/2011/01/14/what-the-heck-is-shadow-dom/)将 css 仅应用于特定元素。我在想我希望在我的页面上实现[webkit 客户滚动条](http://css-tricks.com/custom-scrollbars-in-webkit/)，但`textarea`希望它们的宽度小于它们在文档正文上的宽度。

所以如果我有一个带有样式的页面

```
::-webkit-scrollbar {
    width: 12px;
}

::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    border-radius: 10px;
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5); 
}

div{
    height:5000px;
    width:150px;
    background-color:red;
    float:left;
}
textarea{
float:left;    
    max-height:150px;
    height:150px;
} 
```

和 HTML

```
<div id="theDiv">
    asdf
</div>

<textarea id="thebox">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum</textarea> 
```

我想将样式表直接应用到 textarea 而不会影响任何其他元素。

```
 function ImportStyleFile () {
            var el = document.getElementById('thebox');
            var linkTag = el.createElement ("link");
            linkTag.href = "new.css";
            linkTag.rel = "stylesheet";
            var head = document.getElementsByTagName ("head")[0];
            head.appendChild (linkTag);
        } 
```

哪里`new.css`有一种风格，比如，

```
::-webkit-scrollbar-thumb {
    border-radius: 0px;
    -webkit-box-shadow: inset 0 0 6px rgba(20,20,20,0.5); 
} 
```

不幸的是，这并不是那么简单。我猜您无法创建样式表并将其附加到文本区域。关于如何让它发挥作用的任何想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:35:45.940

是`::-webkit-scrollbar`伪元素，可以应用于单个元素，如下：

```
textarea::webkit-scrollbar { ... } 
```

# ruby - pry 或 irb 是否允许您在块内以交互方式工作？

> ID：15260290
> 
> 赞同：0
> 
> 时间：2013-03-06T23:33:59.563
> 
> 标签：ruby, irb, pry

我知道 pry 允许您“cd”到其他范围。

```
pry(main)> cd Object
pry(Object)> ls
constants: 
  ARGF               Encoding          GC              NIL                  
  ArgumentError      EncodingError     Gem             NilClass             
  ARGV               Enumerable        Hash            Noexec               
  Array              Enumerator        IndexError      NoMemoryError        
... 
```

但是有没有办法将交互式会话移动到传递给方法的块中？

```
pry(main)> cd some_instance.some_method do |some_argument|
pry(block)> ls
  some_argument        some_other_vars_available_within_block
pry(block)> end
  result_of_block
pry(main)> 
```

如果可能的话，这将非常有帮助。我试过让 binding.pry 以这种方式自己工作，但没有运气，但我想确保在继续之前我走的是正确的道路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:00:31.900

事实上，嵌套`pry`效果很好。向`pry`团队致敬。

一旦我解决了我的小 binding.pry 问题（完全是我的错）。

**嵌套`pry`：（** *注意`exit`需要的 2 个语句）*

```
Hershwild:~ jstillwell$ pry
[1] pry(main)> binding.pry
[1] pry(main)> exit
=> nil
[2] pry(main)> exit
Hershwild:~ jstillwell$ 
```

**从一个块`pry`内产生：**

```
Hershwild:~ jstillwell$ pry
[1] pry(main)> def test
[1] pry(main)*   yield true
[1] pry(main)* end  
=> nil
[2] pry(main)> test do |inside|
[2] pry(main)*   binding.pry
[2] pry(main)* end  
# after that end statement, pry resumes inside the block
[1] pry(main)> inside
=> true
[2] pry(main)> exit
=> nil
[3] pry(main)> exit
Hershwild:~ jstillwell$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T18:22:41.763

不确定我是否完全理解你，但你可以试试这个，例如：

```
(master ✘)✹✭ ᐅ pry
[1] pry(main)> def hello(&block)
             |   Object.new.instance_exec(&block)
             | end  
=> nil
[2] pry(main)> block_binding = nil
=> nil
[3] pry(main)> hello { |some_argument = "testing"| u = 20; block_binding = binding }
=> #<Binding:0x007fdd33b1f680>
[4] pry(main)> cd block_binding
[5] pry(#<Object>):1> ls
locals: _  __  _dir_  _ex_  _file_  _in_  _out_  _pry_  _super  block_binding  some_argument  u
[6] pry(#<Object>):1> some_argument
=> "testing"
[7] pry(#<Object>):1> u
=> 20
[8] pry(#<Object>):1> self
=> #<Object:0x007fdd33b1f888>
[9] pry(#<Object>):1> 
```

# css - 容器内的两列

> ID：15260291
> 
> 赞同：0
> 
> 时间：2013-03-06T23:34:06.383
> 
> 标签：css, html, margin

我想要做的是有`<div>`一个`container`类和一个固定宽度，持有一个类`<div>`以`block`防止其他内容侵占任何不均匀的空白空间，然后两列（`<div>`'s）并排在里面`block`，并且是宽度的 50% `block`。

当我创建这个时，我在第一个块之后得到了看起来是一个边距，这是我不想要的。我希望块收拾得很紧，没有利润。

[我在这里](http://www.scottydawg.co.uk/web_dev/columns.htm)有一个到目前为止的示例，如果代码如下：

```
<html>
<head>
<title>Columns</title>
<style>
    div {
        margin: 0;
        padding: 0;
}
    .container {
        background: #DDD;
        width: 1200px;
        margin: 0 auto;
        padding: 2% 0;
}
    .block {
        background: #555;
        width: 100%;
        display: block;
}
    .col {
        width: 49%;
        display: inline-block;
        background: #333;
}
</style>
</head>
<body>
<div class="container">
<div class="block">

    <div class="col left">
        <h1>Left</h1>
    </div>

    <div class="col right">
        <h1>Right</h1>
    </div>

</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T23:38:36.123

您的问题是由 引起的`inline-block`，使用它会使中间出现一个空格。

尝试使用`float:left`来解决这个问题：

[参见 jsFiddle](http://jsfiddle.net/VBqNU/1/)

```
.col {
    width: 50%;
    float: left;
    box-sizing: border-box;
    background: #333;
} 
```

请注意，我添加了，`box-sizing:border-box;`这意味着当您使用`padding`它时，它将包含在 中`width`，而不是在它之上。无需额外的内部即可有效地使用它`div`。

请记住在之后包含一个明确的修复程序以“清除”浮动。

**CSS**

```
.clear {
    clear:both;
} 
```

**HTML**

```
<div class="block">
    <div class="col left">
         <h1>Left</h1>

    </div>
    <div class="col right">
         <h1>Right</h1>

    </div>
    <div class="clear"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T23:42:24.977

尝试替换这些类：

```
.block {
    background: none repeat scroll 0 0 #555555;
    display: block;
    overflow: auto;
    width: 100%;
}

.col {
    width: 49%;
    float: left;
    background: #333;
} 
```

# google-chrome - Chrome、Youtube 和 AppleScript

> ID：15260293
> 
> 赞同：1
> 
> 时间：2013-03-06T23:34:12.577
> 
> 标签：google-chrome, youtube, applescript

我正在尝试使用 applescript 设置 youtube 视频播放点。例如，当您在此视频中按 0 - 9 键时，播放点会发生变化。

我已经设法用这个告诉 chrome 击​​键 1

```
tell application "Google Chrome"
    activate
tell application "System Events" to tell process "Google Chrome" to key code 83
end tell 
```

它返回一个 1，但只有地址栏被突出显示。所以我的问题是，我如何专注于 youtube 视频？

我绝对不是程序员，这也是我第一次使用苹果脚本！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:35:00.650

对您来说，一个很好的练习是验证输入。（确保用户文本符合要求的格式，然后对话框接受答案并继续执行下一个命令）。

```
set videoUrl to "https://www.youtube.com/watch?v=o6xchtAsq4U"
set AppleScript's text item delimiters to ":"
set {min, sec} to text items of (text returned of (display dialog "Enter start time… minutes:seconds" default answer "1:15"))
set AppleScript's text item delimiters to {""}

tell application "Google Chrome"
    if not (exists window 1) then reopen
    set URL of active tab of window 1 to videoUrl & "&t=" & min & "m" & sec & "s"
end tell 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:00:31.217

Maybe try and use keystroke tab to tab its way to the video instead of address bar Make sure you put this at the start after page load.

# vim - 在片段中扩展片段（vim 或 sublime）

> ID：15260295
> 
> 赞同：0
> 
> 时间：2013-03-06T23:34:22.467
> 
> 标签：vim, sublimetext2, code-snippets

我正在尝试稍微改进我的工作流程，我正在尝试完成一些事情，但我真的不知道从哪里开始。

我是片段的忠实粉丝，我一直在自定义很多自己的片段，它确实帮助我更快地编写代码，并且实际上也避免了错误。

但是，我希望能够在我仍在浏览当前片段时扩展片段。

知道我能做什么吗？是否有一个版本的 vim 片段可以做到这一点？有没有我可以放入 sublime 的键绑定可能有帮助？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:28:09.397

我不确定，`snipmate`但你绝对可以用[Ultisnips](http://www.vim.org/scripts/script.php?script_id=2715)做到这一点。

# jquery - 如何找到匹配多个条件的元素

> ID：15260296
> 
> 赞同：14
> 
> 时间：2013-03-06T23:34:28.007
> 
> 标签：jquery, jquery-selectors, dom-traversal

我需要做的是在页面上找到所有在 href 属性中包含“标签”的元素，并且该元素的文本包含某个单词。

例如

```
<a href="/my/tag/item2">cars</a> 
```

我知道我可以像这样在 href 中获取所有带有标签的元素：

```
$("a[href*=tag]"); 
```

我还可以在文本中找到所有带有“汽车”的元素，如下所示：

```
$("a:contains('cars')"); 
```

但是如何将这两个条件组合成一个语句：查找所有在 href 中包含“tag”并在文本中包含“cars”的元素？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-06T23:36:01.163

你试过`$("a[href*=tag]:contains('cars')");`吗？

你可以一直这样下去，即

```
$("a.className.anotherClass[href*=tag][title=test]:contains('cars'):visible"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-06T23:43:14.853

正如其他人所说，或者，如果需要分别应用这两个条件，例如中间有一些其他代码，那么......

```
var $tags = $("a[href*=tag]"); 
```

然后后来...

```
var $carTags = $tags.filter(":contains('cars')"); 
```

`.filter()`是减少现有 jQuery 选择的通用方法。

像许多其他 jQuery 方法一样`.filter()`，它返回一个 jQuery 对象，因此它将链接：

```
var $foo = $("a[href*=tag]").filter(":contains('cars')").filter(".myClass"); 
```

`.filter()`由于我不打算解释的原因，我也不需要解释，因为@bažmegakapa 刚刚做得非常雄辩。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T23:47:12.800

其他答案显示了很好的工作示例。[但是这里有一个有趣的怪癖，原生 CSS 选择器](http://www.w3.org/TR/selectors/)（也被 native 支持`querySelectorAll()`）和[jQuery 定义的](http://api.jquery.com/category/selectors/jquery-selector-extensions/)选择器之间的区别。

混合它们可能并不幸运，因为这样就无法使用更快的原生引擎。例如在[`:has()`](http://api.jquery.com/has-selector/)jQuery 文档状态：

> 因为 :has() 是 jQuery 扩展而不是 CSS 规范的一部分，所以使用 :has() 的查询不能利用原生 DOM querySelectorAll() 方法提供的性能提升。

出于这个原因，您最好使用本机方法进行查询，然后使用任何 jQuery 特定选择器进行[过滤：](http://api.jquery.com/filter/)

```
var $res = $("a[href*=tag]").filter(":contains('cars')"); 
```

# php - Selenium：在 facebook php-webdriver 中使用 IE 处理 javascript 警报

> ID：15260301
> 
> 赞同：1
> 
> 时间：2013-03-06T23:34:56.687
> 
> 标签：php, selenium, selenium-webdriver

我需要使用 php webdriver for selenium 接受 IE javascript 警报 这适用于 FF 和 Chrome，但 IE 失败

这是我正在使用的代码：

```
$web_driver = new WebDriver();
// opens Internet explorer browser
$session = $web_driver->session('internet explorer');
// Navigates to page that has JS alert on close.
$session->open('http://mypage.com/');
// Closes Offer window
$session->deleteWindow();
// Accepts alert to leave page
$session->accept_alert(); // Except accept_alert isn't working correctly in IE
// Closes last window
$session->close();
// Kill session for garbage collection
unset($session); 
```

我知道[Java](https://stackoverflow.com/questions/10682904/handling-javascript-alerts-in-selenium)有[这个答案，C#](https://stackoverflow.com/questions/7114037/selenium-webdrive-and-checking-alert-messages)有这个答案，但是我正在寻找一个 PHP 特定的解决方案，因为 Java 方法不一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:46:46.750

这让我永远想通了。我之前所做的是在`deleteWindow()`通话之后，抓住最新的窗口句柄并将焦点设置在它上面。一旦您获得焦点警报，您就可以调用`accept_alert()`它，窗口将按预期关闭。这是想法。

```
$web_driver = new WebDriver();
$session = $web_driver->session('internet explorer');
$session->open('http://mypage.com/');
$session->deleteWindow();

// Here's the new part
$handles = $this->_session->window_handles(); // stores array of window handles
$new_handle = end($handles); // grabs the newest handle, in this case our alert
$this->_session->focusWindow($new_handle); // gives the alert window focus

// Should now work as expected
$session->accept_alert();
$session->close();
unset($session); 
```

这也适用于 firefox 和 chrome 驱动程序，因此如果您愿意，可以对所有驱动程序使用相同的代码。祝你好运！

# ios - “没有可见的@interface 声明选择器”错误

> ID：15260307
> 
> 赞同：1
> 
> 时间：2013-03-06T23:35:30.770
> 
> 标签：ios, xcode, uiimageview, xcode4.5

我在视图控制器中插入了一个图像视图，但实际上并不知道如何在其上显示图像。

我试过这个：

```
- (void)viewDidLoad
{
[super viewDidLoad];

id path = @"http://thestylishdog.com/wp-content/uploads/2009/07/cute-dog2.jpg";
NSURL *url = [NSURL URLWithString:path];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImageView *firstImage = [[UIImage alloc] initWithData:data cache:NO];
} 
```

但随后它说'UIimage 没有可见的@interface 声明了选择器 initwithData:cache'

我尝试将此行添加到 .h 文件中，但也不起作用：

```
@property (nonatomic, retain) UIImageView *firstImage; 
```

我知道最后一步是将 .h 创建类分配给视图控制器中的 UIimage。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:43:37.933

您可以尝试使用此代码从您的路径中添加图像`imageview`

```
 NSURL *url = [NSURL URLWithString:@"http://thestylishdog.com/wp-content/uploads/2009/07/cute-dog2.jpg"];
 NSData *data = [NSData dataWithContentsOfURL:url];
 UIImage *image = [UIImage imageWithData:data];
 imageView = [[UIImageView alloc] initWithImage:image]; 
```

如果您通过 GUI 添加，请不要忘记显示您`imageView`的出口，否则将其添加到您的视图中`xib``subview`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:44:15.453

尝试`[[UIImage alloc] initWithData:data];` 您可以使用`NSCachedURLResponse`用于响应的缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T23:45:31.037

您可以使用它从 URL 加载图像：

```
UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://..."]]];
UIImageView *imageView = [[UIImageView alloc] initWithImage:image]; 
```

但这会阻止您的应用程序，直到您的图像加载。使用来自网络的图像时，最好异步加载图像。如果图像是在不同的线程中下载的，用户可以继续与应用程序交互。您可以从苹果查看这个关于延迟加载图像的示例：[LazyTableImages](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

或者您可以查看本教程以进行异步图像下载： [带有下载图像的 UItables](http://www.markj.net/iphone-asynchronous-table-image/)

# javascript - 突出显示所选图像

> ID：15260310
> 
> 赞同：0
> 
> 时间：2013-03-06T23:35:52.107
> 
> 标签：javascript, css, forms

我试图用一个框突出一个选定的图像，与“悬停”显示的完全相同。有任何想法吗？我已经尝试了一些东西，但似乎没有任何效果。悬停功能完美运行，但是当单击时，即使光标移开，我也需要在图像周围出现一个框。我在下面粘贴了我的代码。先感谢您！！

```
<html><head>

<style type="text/css">
.event {
display: inline-block;
float: left;
}

.swatch {
width: 57px;
height: 45px;
display: inline-block;
float: left;
background-repeat: no-repeat;
padding: 5px;
background-position: center center;
margin-top: 8px;
}

 .swatch:hover {
border: thin solid #999;
background-position: center center;
}

.selected {
border: thin solid #999;
}

.sq562-white {
background-image: url(../images/products/women/lifeguard_girlstee_white.jpg);
}

.sq562-red {
background-image: url(../images/products/women/lifeguard_girlstee_red.jpg);
}
</style>

<script type="text/javascript">
$(window).load(function(){
$(document).ready(function() {
// hide all the events
$("#bigCal p").hide();

$(".event a").click(function(evt) {
    evt.preventDefault();
    $("#bigCal p").hide();
    var id = $(this).attr('id');

    $("." + id).show();
});
});
});//]]>  

</script>

</head>
<body>
<li class="event">
    <a id="red" href="#" >
        <div class="swatch sq562-white"></div>
    </a>
 </li>

 <li class="event">
    <a id="blue" href="#">
        <div class="swatch sq562-red"></div>
    </a>
</li>
</ul> 

<div id="bigCal">
<p style="display: block; margin-top:25px; margin-bottom:-54px;" class="all blue"><a    title="Red">Red</a></p>
<p style="display: none; margin-top:25px; margin-bottom:-54px;" class="all red"><a title="White">White</a></p>

</div>

</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:40:03.690

用于`onclick`添加`.selected`类（使用 jQuery，也可以仅使用 JavaScript）：

```
$(".swatch").click(function() {
    $(this).addClass("selected");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:51:04.577

您好，您也可以测试此代码：

```
$(document).ready(function() {
// hide all the events
$("#bigCal p").hide();

$(".event a").click(function(evt) {
    evt.preventDefault();
    //remove the previous selected item
    $(".swatch").removeClass("selected");
    //select the current item
    $(".swatch", this).addClass("selected");
    $("#bigCal p").hide();
    var id = $(this).attr('id');
    $("." + id).show();
  });
}); 
```

还有一个示例：http: [//jsfiddle.net/SNUhB/2/](http://jsfiddle.net/SNUhB/2/)

# c# - 下载数千张图像时的性能

> ID：15260312
> 
> 赞同：0
> 
> 时间：2013-03-06T23:36:06.450
> 
> 标签：c#, asp.net, image, stream

我有一个从第三方来源一次下载数千张图像的功能。每次运行的图像数量范围为 2,500-250,000。您可以想象，这个过程需要一些时间，并且我希望尽我所能进行优化。

它的工作方式是我获取图像路径列表，循环遍历它们并从第 3 方请求图像。目前，在我发出请求之前，我会检查图像是否已经存在于服务器上……如果存在，它会跳过该图像……如果不存在，它会下载它。

我的问题是，是否有人知道下载前的检查是否会减慢进程（或可能加快进程）？下载文件并让它覆盖已经存在的图像会更有效，从而减少检查存在的步骤吗？

如果其他人有任何下载此数量图像的提示，欢迎他们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:54:04.603

真正的答案取决于三件事：
1：你多久遇到一个已经存在的图像。击中的次数越少，检查的用处就越少。2：目标存储的延迟。目标存储位置是本地还是远方？如果它在印度，延迟为 300 毫秒（并且可能丢包率很高），则相对于下载而言，检查变得更加昂贵。智能线程可以显着缓解这种情况。3：从源到目的地的带宽/吞吐量。您的带宽越高，下载文件的两倍成本就越少。

如果您对已经存在的图像的命中率低于 1%，则您不会从检查中获得太多收益（最大约为 1%），但如果 90% 的图像已经存在，则可能是即使目标文件存储在远程/很远，也值得检查。无论哪种方式，这都是一种平衡行为，但是如果您的命中率足够高，那么检查您是否已经拥有该文件可能会很有用。

如果您已经拥有的图像没有被删除，那么最好的方法可能是保留您已下载的图像数据库，并根据该数据库检查要下载的文件列表。

如果这不可行，因为图像被删除/重命名或其他原因，请通过线程化检查来最小化检查的影响。对于高延迟的操作，foreach 和 Parallel.ForEach 之间的性能差异是巨大的。

最后，如果是大图像，250k 图像可能是大量数据。发送物理媒体可能会更快（即将数据放在硬盘驱动器上并发送驱动器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:40:34.997

做一个

```
 System.IO.File.Exists(pathName); 
```

比下载便宜很多。因此，它可以通过避免下载时间来加快进程。

# c - 对 C 指针的疑惑

> ID：15260320
> 
> 赞同：3
> 
> 时间：2013-03-06T23:36:56.590
> 
> 标签：c

我正在尝试理解 C 中的基本概念。我有两个问题：

1.为什么下面一段代码可以工作而另一段不行？

```
/* This works fine */
typedef int SortTableRows[20]; 

SortTableRows* SortTableRowsPtr;

/* This will give error --> subscripted value is neither array nor pointer*/
int SortTableRows[20]; 

SortTableRows* SortTableRowsPtr; 
```

1.  第二个问题是第三行代码在做什么？

    ```
    typedef int SortTableRows[20]; 

    SortTableRows* SortTableRowsPtr;

    SortTableRowsPtr[2][3]=2; //Why the compiler doesnt give any error?how can we use a     pointer as a 2d array. 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:41:49.427

您已定义`SortTableRows`为`ints`with的数组`int SortTableRows[20]`。该标识符现在固定为一个数组，它不能用于其他任何东西。然后，您尝试将其用作声明指针的类型（我认为）。如果你想声明一个指向整数数组的指针，你可以这样做：

```
int *SortTableRowsPtr;
SortTablesRowPtr = SortTablesRows; 
```

在第二个问题中，您将一个值分配给指向您视为二维数组的指针的指针，这对您的编译器没有真正的影响（尽管在这种情况下它没有真正的意义），如 '多维数组以线性方式存储在内存中，与单维数组相同。您`typedef`在这里没有任何实际意义，因为您正在定义一种数组类型，然后创建一个指向它的未初始化指针（这会创建一个`int **`），并像指向有效的东西一样访问它（这将编译，但肯定会崩溃）。

要进行这项工作，您需要定义一个包含 20 个整数的数组，然后指向它：

```
SortTablesRows table[10] = {};  // equivalent to int table[10][20];
SortTablesRowPtr = table; 
```

这是有效的，因为您声明了一个指向 20 个整数数组的指针，即

```
int (*SortTablesRowPtr)[20]; 
```

我已经扩展了这个答案。它有助于一步一步地更简单地解释它。取一张 3 行 10 列的表格。这是定义的：

```
int table[3][10]; 
```

然后，您可以设置指向该表的指针。因为它是二维的，所以这是不对的：

```
int *ptr = table; // wrong - incompatible pointer 
```

但这将指向第二行（和第一列）：

```
int *ptr = table[1]; 
```

换句话说，您想要一个指向 10 个整数数组的指针，即您想要一个指向`int n[10]`. 为此，您可以编写：

```
int (*ptr2)[10] = table; 
```

现在，您可以使用`ptr2`指针、数组或两者来直接访问表。就目前而言，它指向第一行和第一列。如果您添加一个，`ptr2`它将选择下一行。

```
ptr2[1][3] = 3;  // change row 2, column 4
(*(ptr2 + 1))[4] = 10 // row 2, column 5 (yuck) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T23:43:44.157

问题 1。

首先，您告诉它 SortTablesRow 是一个 20 个整数的数组。所以 SortTablesRow 是一种类型。在第二个中，您将创建一个名为 SortTablesRow 的变量，它是一个包含 20 个整数的数组。这不能用作类型，因为它是一个变量。

问题2。

在这里，您将 SortTablesRow 类型定义为 20 个整数的数组。然后你说 SortTablesRowPtr 是一个指向它的指针。所以现在你有一个指向 20 个整数的数组的指针。这本质上是一个int**。所以第一个数组索引索引第一个指针，第二个数组索引索引第二个指针（或数组），因此在 20 元素 int 数组中查找。

# php - 标头重定向后会话变量丢失

> ID：15260321
> 
> 赞同：0
> 
> 时间：2013-03-06T23:36:57.287
> 
> 标签：php, session, session-variables

标头重定向后会话变量丢失即使我使用过`session_start(); in All Pages`

**这是我的代码..**

```
<?php 
session_start();
$id=$_REQUEST['id'];
$pid=$_POST['pid'];
$_SESSION['pid']=$_POST['pid']; 
```

**加入购物车功能**

```
include("cart/functions.php");
if($_REQUEST['command']=='add' && $_REQUEST['id']>0){
$id=$_REQUEST['id'];
addtocart($id,1);
header('location:shoppingcart.php');
exit();
} 
```

**单击此按钮后 $_SESSION['pid']=$_POST['pid'];` 从所有页面中消失？**

```
<input type="button" class="button1" value="Add To Cart" 
 onclick="addtocart(<?php echo $row3['id']?>);" />
</div>
</div></form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:44:58.640

`header('location:shoppingcart.php');`是强制重定向，发生这种情况时没有 POST，因此该行将`$_SESSION['pid']=$_POST['pid'];`不起作用。如果您必须进行无 cookie 会话，请查看`use-trans-sid`：[http ://www.php.net/manual/en/session.configuration.php#ini.session.use-trans-sid](http://www.php.net/manual/en/session.configuration.php#ini.session.use-trans-sid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:22:18.460

您可能`$_SESSION['pid'] = $_POST['pid']`在每个请求中都设置了 - 即使您的 POST 甚至没有`pid`。

尝试改变这一点

```
$_SESSION['pid']=$_POST['pid']; 
```

对此

```
if (isset($_POST['pid'])) {
  $_SESSION['pid'] = $_POST['pid'];
} 
```

# php - 某些幻灯片无法在 Firefox 中运行 - Wordpress Revolution Slider

> ID：15260323
> 
> 赞同：0
> 
> 时间：2013-03-06T23:37:09.927
> 
> 标签：php, javascript, css, wordpress

目前在网站[realinstitute.com.au](http://realinstitute.com.au/)上工作，如果您在 Firefox 中查看它，您会发现前 3 张幻灯片无法正常工作。在包括 IE 在内的其他浏览器中运行良好，它只是 Firefox。

我注意到它只发生在某些元素超出边界的幻灯片上，但我尝试改变它，它似乎没有效果，但我觉得它可能是相关的。

有什么建议么？真的迷失了这个，对不起，我通常会对我的问题更有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:39:59.147

这是您的第一张图片的路径：

`<img src="http://realinstitute.com.au\/wp-content/uploads/2013/01/hero-bg.png" />`

注意错误的路径？

尝试：

`<img src="http://realinstitute.com.au/wp-content/uploads/2013/01/hero-bg.png" />`

# matlab - Matlab中可变宽度的线

> ID：15260329
> 
> 赞同：1
> 
> 时间：2013-03-06T23:37:45.527
> 
> 标签：matlab

如何在 Matlab 中绘制一条粗细不同的线？我需要绘制一条平均线，然后将标准偏差绘制为它下方的阴影。有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:04:16.213

这是我前一阵子写的——有点长，但你可以直接复制整个内容。它处理可变大小的输入并生成漂亮的阴影图 - 带有 std 和 min/max。信号应该是二维的。如果您需要用于绘制两个信号的版本 - 请询问 :)

```
function H = plotp(varargin)

switch nargin
    case{1}
        signal = varargin{1};
        time = 1:size(signal,2);
        prop = 'r-';
        new_figure = true;
    case{2}
        time = varargin{1};
        signal = varargin{2};
        prop = 'r-';
        new_figure = true;
    case{3}
        time = varargin{1};
        signal = varargin{2};
        prop = varargin{3};
        new_figure = true;
    case{4}
        time = varargin{1};
        signal = varargin{2};
        prop = varargin{3};
        new_figure = varargin{4};
end

if ischar(new_figure)
    temp7 = regexpi(new_figure,'true');
    if isempty(temp7)
        new_figure = false;
        H = get(0,'CurrentFigure');
    else
        new_figure = true;
    end
elseif isnumeric(new_figure)
    H = new_figure;
    new_figure = false;
end

% prepare vectors for plotting
time2 = [time fliplr(time)];

sigm = nanmean(signal);
sigs =  nanstd(signal);
sigms = [sigm-sigs fliplr(sigm+sigs)];

sigmin = nanmin(signal);
sigmax = nanmax(signal);
sigmm = [sigmin fliplr(sigmax)];

%  check color
if strcmpi(prop(1),'r')
    c1 = [1 0 0];
elseif strcmpi(prop(1),'g')
    c1 = [0 1 0];
elseif strcmpi(prop(1),'b')
    c1 = [0 0 1];
else
    c1 = [1 1 1];
end

color1 = c1 + .7*(1-c1);
color2 = c1 + .8*(1-c1);

%
if length(prop) == 1
    prop(2) = '-';
end
if new_figure
    H = figure;
else
    figure(H);
end

whole_screen = get(0,'ScreenSize');
% max figure size - add
fig_size = whole_screen + [-4 -4+2*32 +4+4 4+4-2*32];
set(H,'OuterPosition',fig_size);

plot(time,sigm,prop,'LineWidth',1.5)
hold all
fill(time2(~isnan(sigms)), sigms(~isnan(sigms)),color1,'EdgeColor',color1,'FaceAlpha', 0.4);
fill(time2(~isnan(sigmm)), sigmm(~isnan(sigmm)),color2,'EdgeColor',color2,'FaceAlpha', 0.3);
legend([{'Mean'}  {'\pm Stddev'} {'Min/Max'} ],'Location','Best') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:46:58.947

你能画出三条线，一条作为平均值，另外两条作为+和-标准偏差。

如果你感觉特别受虐，你可以计算你的线的置信区间并绘制它。

# .net - 决定 .NET 框架版本涉及哪些因素？

> ID：15260331
> 
> 赞同：3
> 
> 时间：2013-03-06T23:37:50.390
> 
> 标签：.net

我的标题总结了它。我有一个简单的业务线应用程序，我将开发它，并且很好奇如何确定我应该定位哪个版本的 .NET。对 Win XP SP3 的支持会很好，但不是必需的。它将用于索引多页 tiff，因此导入一批 tiff，然后在数据库中对它们进行索引。然后，用户可以进行简单的搜索以找到这些 tiff。

大多数开发人员在尝试确定他们将针对这样的新应用程序的 .NET 框架时会看什么？我是否只针对 4.5，因为它是支持我需要的最新或最高版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:41:53.410

它总是更好地定位（如果你有预算）最新版本的 .NET，因为在几年内，它将是旧版本 :)。最新版本将具有新的库以及新的方法和属性，这将使您的编码变得容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:49:20.427

4.0 + 4.5 有很多以前没有的很棒的功能——特别是任务和等待/异步——我认为 2012 的 UI 似乎也更快。我提倡从最新的开始，因为升级可能会很痛苦，而且会为你争取一些时间。

补充 - 目前阻止我的工作升级的一件事是缺乏对我们目前使用的视觉工作室设置项目的支持（.net 3.5）。当我们搬家时，我们可能会硬着头皮改用 WIX。

如果您以这种方式安装了任何较旧的项目，请记住这一点。（[没有更多的 vs 设置支持](http://blogs.msdn.com/b/buckh/archive/2011/03/17/visual-studio-setup-projects-vdproj-will-not-ship-with-future-versions-of-vs.aspx)）

# sql - 合并日期

> ID：15260334
> 
> 赞同：1
> 
> 时间：2013-03-06T23:38:04.670
> 
> 标签：sql, sql-server-2008

你能帮我吗，我有两个日期列：

```
Name  Member_type  start_date  end_date
----  -----------  ----------  ----------
a     1            03-01-2007  25-12-2008
a     2            01-01-2010  07-07-2010
a     1            15-08-2010  31-12-2013 
```

对于 person `a`，我想返回他的第一个开始日期。如果他自结束日期起离开一年以上，那么我想返回此结束日期之后的开始日期。如果不到 1 年，我想返回他之前的开始日期。

在上面的例子中，他的开始日期应该是 01-01-2010。

他从2007年开始创业，2008年离开，2010年回来，也就是一年多。所以在这里，他的开始日期将是他在 1 年间隔之后开始的日期，即 01-01-2010。

他在 2010 年 7 月 7 日再次离开，但在 2010 年 8 月 15 日回来，不到一年。因此，开始日期仍将是 01-01-2010。

希望这很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:05:37.283

您要查找的是最近的记录，其中在该记录开始日期之前一年没有开始日期。此记录包含您想要的开始。

这是一种通过查找这些记录，然后获取最新日期的方法：

```
select t.name, max(t.startdate) as mostRecentRealStart
from t
where not exists (select 1
                  from t t2
                  where t2.name = t.name and t2.enddate between t.startdate - 365 and t.startdate - 1
                 )
group by t.name 
```

# java - 为什么要打印此输出，似乎不合适

> ID：15260338
> 
> 赞同：-1
> 
> 时间：2013-03-06T23:38:38.693
> 
> 标签：java

```
//Question4 
correct = false;
System.out.println("how many feet are in a yard?");
while (!correct)
{
    x1 = input.nextInt();
    if (x1==3)
    {
        System.out.println("correct.");
        correct = true;
    }
    else
    {
        System.out.println("incorrect. try again.");
    }
}

    //Question5
correct = false;
System.out.println("What gets wetter and wetter the more it dries?");
while (correct == false)
{

   s1 = input.nextLine();
   if (s1.equalsIgnoreCase("a towel")) // cheating is bad!
    {
        System.out.println("correct");
        correct = true;
    }

    else
    {
        System.out.println("incorrect. try again.");
    }
} 
```

**输出** 一码有多少英尺？3 正确。什么东西越干越湿？ **不正确。再试一次。**甚至在询问用户输入之前就被打印出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:41:41.337

像这样更改您的第一个问题：

```
while (!correct)
{
    x1 = input.nextInt();
    input.nextLine(); //NEW CODE
    if (x1==3)
    {
        System.out.println("correct.");
        correct = true;
    }
    else
    {
        System.out.println("incorrect. try again.");
    }
} 
```

您必须始终在 a`nextLine()`之后执行 a `nextInt()`。换行符尚未被吞入`nextInt()`，因此以下内容`nextLine()`正在吞下，而不是您想要的。

# qt - Qt 调试器在调试给定的 Qt 示例时显示分段错误

> ID：15260341
> 
> 赞同：0
> 
> 时间：2013-03-06T23:38:53.780
> 
> 标签：qt, gdb, segmentation-fault

我正在调试`"examples/itemviews/simpletreemodel"`示例。

在 main.cpp 文件行

```
view.setWindowTitle(QObject::tr("Simple Tree Model")); 
```

导致调试器显示分段错误。如果我注释掉这一行并再次运行调试器，它会正常运行。如果我在正常模式下运行（无调试），它会正常运行。

可能是什么问题呢？我正在使用带有 gdb 7.3.1 调试器的 Qt 4.7.4。

我`setWindowTitle`在一个单独的程序中使用它，它也会导致调试器在那里中断。

# python - 在 ODEINT 中启用 full_output 时遇到问题

> ID：15260342
> 
> 赞同：1
> 
> 时间：2013-03-06T23:38:56.543
> 
> 标签：python, arrays, odeint, keyerror

启用 full_output 应该是一项微不足道的任务，但是，像往常一样，问题有些复杂。不幸的是，除了向您展示我的代码之外，没有任何简单的方法可以描述我的问题。

```
y_initial = pylab.array([th1,th2,th3,phi1,phi2,phi3])
t = pylab.arange(0.0, tmax, dt)
ylist = odeint (derivs, y_initial, t)

th1 = [ylist[j][0] for j in range(0,len(t))]
th2 = [ylist[j][1] for j in range(0,len(t))]
th3 = [ylist[j][2] for j in range(0,len(t))]
phi1 = [ylist[j][3] for j in range(0,len(t))]
phi2 = [ylist[j][4] for j in range(0,len(t))]
phi3 = [ylist[j][5] for j in range(0,len(t))] 
```

编写 odeint (derivs, y_initial, t, full_output = 0) 不会导致任何问题，但编写 odeint (derivs, y_initial, t, full_output = 1) 会给出：

```
Traceback (most recent call last):
th1 = [ylist[j][0] for j in range(0,len(t))]
KeyError: 0 
```

我认为由于我定义 odeint 的方式（使用数组等）而发生此错误。如果我要创建一个循环来计算 odeint 值并将它们存储在一个数组中然后让它继续到下一行，这个问题会得到解决吗？如果是这样，这样的代码会是什么样子？

如果你不明白我为什么用这种奇怪的方式写了它，这就是为什么：

```
def dth2dt (t,th1,th2,th3,phi1,phi2,phi3):
    return *some math dependent on switching the six variables around*

def dphi2dt (t,th1,th2,th3,phi1,phi2,phi3):
    return **some math dependent on switching the six variables around**

def derivs(y,t):

    dydt[0] = dth2dt(t,y[2],y[1],y[0],y[5],y[4],y[3])
    dydt[3] = dphi2dt(t,y[2],y[1],y[0],y[5],y[4],y[3])

    dydt[1] = dth2dt(t,y[0],y[1],y[2],y[3],y[4],y[5])
    dydt[4] = dphi2dt(t,y[0],y[1],y[2],y[3],y[4],y[5])

    dydt[2] = dth2dt(t,y[1],y[2],y[0],y[4],y[5],y[3])
    dydt[5] = dphi2dt(t,y[1],y[2],y[0],y[4],y[5],y[3])

    return dydt 
```

我希望你很清楚这种方法使我能够切换变量而不必重复写出数学。但现在我无法在 odeint 中启用 full_output。

感谢您的宝贵时间，感谢您的回复！

龙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T15:30:47.797

odeint 的输出取决于 full_output 是 False 还是 True。您已经习惯了 full_output 被禁用时的行为。启用后，输出为元组 (u, d)，其中 u 是微分方程的解，d 是由 full_output 提供的输出字典。出现 key_error 是因为您所指的 ylist 是这个元组，而不仅仅是您期望的 ode 结果。如果你改变，

```
ylist = odeint (derivs, y_initial, t) 
```

至

```
(ylist, d) = odeint (derivs, y_initial, t, full_output=True) 
```

你应该得到你期望的ylist。

# php - 测试 AJAX Post 的简单方法？

> ID：15260345
> 
> 赞同：-1
> 
> 时间：2013-03-06T23:39:25.323
> 
> 标签：php, ajax, post

我有一个应用程序设置，它通过 AJAX POST 不断发送一个值。

我需要知道 POST 是否正在发生并发送正确的值。

有没有不涉及建立数据库来存储接收到的值的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:41:47.900

在 PHP 方面只做一个

```
 var_dump($_POST); 
```

或者如果你需要在文件中

```
// Make sure that 'debug.txt' is writable
file_put_contents('debug.txt', print_r($_POST), true)); 
```

* * *

更新：似乎我没有仔细阅读这个问题。我首先认为您正在寻找一些用于测试的客户端工具。所以我写了以下答案..但是它对你来说可能也很有趣，因此我没有删除它......

如果您使用的是 firefox，我喜欢[海报插件](https://addons.mozilla.org/de/firefox/addon/poster/)。这是一个测试各种 HTTP 请求的好工具

如果您更喜欢命令行（像我一样），我建议您使用 wget 或 curl

使用卷曲：

```
curl --data "param1=value1&param2=value2" http://yourserver/your.php 
```

使用 wget：

```
wget -O - --post-data="param1=value1&param2=value2" http://yourserver/your.php 
```

# mysql - 结果中具有多个计数的 MySql 查询

> ID：15260346
> 
> 赞同：1
> 
> 时间：2013-03-06T23:39:32.870
> 
> 标签：mysql, sql

我有一张桌子

```
create table posts (
   text varchar(20),
   created_at datetime,
   user_id integer
);

create table users (
   id integer,
   name varchar(20),
   important bolean
);

create table categories (
   id integer,
   name varchar(20),
);
create table categories_posts (
   category_id integer,
    post_id integer
); 
```

想要计算特定时间之间每个类别的帖子数量，结果如下

```
START_TIME_PERIOD, category, count_all, count_important, count_normal
'2013-03-06 23:40', 'dogs',    20,       5,               15
'2013-03-06 23:40', 'cats',    22,       6,               16
'2013-03-06 23:40', 'birds',   24,       7,               17 
```

其中重要性基于用户的重要性。

得到一个计数，例如重要的

```
select '2013-03-06 23:40', categories.name, count(*)
from posts, users, categories
where posts.id = categories_posts.post_id
and categories.id = categories_posts.category_id
and posts.user_id = users.id
and users.important = true
and posts.created_at BETWEEN '2013-03-06 23:40' AND  '2013-03-06 23:20'
group by 1, 2 
```

在单个结果集中获得三个计数的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:52:42.557

```
SELECT ..... , count(*), SUM(IF(user.important,1,0)) as count_important, COUNT(*) - SUM(IF(user.important,1,0)) as count_normal 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:51:15.227

除了 using `COUNT`，您还可以使用`SUM`with `CASE`，例如

```
SELECT COUNT(*) AS count_all, 
    SUM(CASE WHEN important = 1 THEN 1 ELSE 0 END) AS count_important 
```

# scala - scala.util.Random 线程安全吗？

> ID：15260354
> 
> 赞同：3
> 
> 时间：2013-03-06T23:40:28.927
> 
> 标签：scala, random, thread-safety

我可以`scala.util.Random`在多个线程中使用同一个对象吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T23:46:19.737

PRNG 的重要特征之一是在给定相同种子时的可重复性。想象一下，您的代码在启动时遇到异常或崩溃。您想重复该行为，以便调试问题。如果您让自己控制种子，则可以在调试问题时一遍又一遍地使用相同的种子启动程序。如果您从单个线程访问生成器，它将看到给定种子的相同序列。如果您从多个线程访问它，您将无法控制每个线程访问生成器的顺序，因此它们将看到序列的不同子集。所以你可能不想利用 Random 的线程安全，即使你可以依赖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-10T18:03:53.913

我完全同意@BenJackson，但我认为重要的是要提到它[`scala.util.Random`](https://github.com/scala/scala/blob/2.13.x/src/library/scala/util/Random.scala#L22)是线程安全的。作为@tc。评论中提到，`scala.util.Random`只是[`java.util.Random`](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/Random.java#L77). [正如对Is Random 类线程安全](https://stackoverflow.com/q/5819638/2359227)的许多答案中所阐述的那样？它表明它是线程安全的，但在[此评论](https://stackoverflow.com/questions/5819638/is-random-class-thread-safe#comment25645331_5819668)中有一个指向 javadoc 的链接，其中指出：

> 的实例`java.util.Random`是线程安全的。但是，跨线程并发使用同一个 java.util.Random 实例可能会遇到争用，从而导致性能下降。考虑改为在多线程设计中使用[ThreadLocalRandom](https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadLocalRandom.html)。

因此，只要你使用 JDK 7 或更高版本，它就是线程安全的。

# asp.net - 为什么我的 ASP.NET 保持活动逻辑不起作用？

> ID：15260357
> 
> 赞同：0
> 
> 时间：2013-03-06T23:40:36.643
> 
> 标签：asp.net

为了确保我的会话始终保持打开状态，我创建了一个简单的 stayalive.aspx 页面。页面标题包含每 5 分钟刷新一次页面的元数据。

在我的页面加载逻辑中，我只是在会话中设置了一个值。

```
protected void Page_Load(object sender, EventArgs e) {
    System.Web.HttpContext.Current.Session["Alive"] = 1;
} 
```

我的理解是，只要您继续在会话中赋予价值，会话将继续保持活力。但是，这似乎不起作用。我仍然在大约 30 分钟后得到会话超时。

我想知道是否有人对为什么不起作用有任何见解。

请注意，web.config 中的 sessionstate 和表单身份验证超时值设置为 300（5 小时）。

我的一个想法是，我每次都设置一个不同的值，而不是在会话上设置相同的值：

```
 System.Web.HttpContext.Current.Session["Alive"] = DateTime.Now; 
```

你认为这会有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:47:16.027

会话活动不需要向会话中添加值。如果您继续刷新 aspx 页面，会话应该会自动扩展。

# php - CI - 将变量从 1 个控制器传递到两个模型/视图

> ID：15260364
> 
> 赞同：0
> 
> 时间：2013-03-06T23:41:09.930
> 
> 标签：php, codeigniter

谁能解释为什么我不能将一个名为 $siteID 的变量传递给同一控制器中的另一个函数？

在名为“get_orders_by_site”的第三个函数中，我加载了一个不同的模型，它返回有关在当前查看的建筑物/站点/财产中提出的“订单”的信息。

站点控制器完美运行，第一个函数列出了一个包含我所有属性的表，然后单击一个函数 - 第二个函数获取该选择的站点 ID，并返回更多“详细信息/数据” - 站点控制器函数 1/2 都与相同的模型，并从 SAME 表返回信息。

我正在尝试实现第三个函数，它将执行类似的任务，但返回来自不同表的信息/数据（site.siteID，也是我在 phpmyadmin 中创建的 orders.siteID 表中的 FK） .

如果我需要进一步解释，请告诉我 - 非常感谢！

**修改后的代码**

**站点控制器**

```
<?php
class Sites extends CI_Controller {

//Searches for a list of sites
public function search($sort_by = 'site_title', $sort_order = 'asc', $offset = 0)
{
$limit = 20;
$data['columns'] = array(
    'site_title' => 'Site Name',
    'site_uprn' => 'Unique Property Reference'
);
$this->load->model('site_model');
    $results = $this->site_model->get_sites($limit, $offset, $sort_by, $sort_order);

    $data['sites'] = $results['rows'];
    $data['num_results'] = $results['num_rows'];

    //pagination for list returned

    $this->load->library('pagination');
    $config = array ();
    $config['base_url'] = site_url("Sites/search/$sort_by/$sort_order");
    $config['total_rows'] = $data['num_results'];
    $config['per_page'] = $limit;
    $config['uri_segment'] = 5;
    $this->pagination->initialize($config);
    $data['pagination'] = $this->pagination->create_links();

    $data['sort_by'] = $sort_by;
    $data['sort_order'] = $sort_order;

    $this->load->view('search', $data);

}

//Displays individual site details

//passes selected siteID to the model, and returns only database/info for that particular building/property
public function details($siteID){
$this->load->model('site_model');

    $data['site']=$this->site_model->get_site($siteID);

    $this->load->view('site', $data);
    $this->load->view('orders', $data);     
} 
```

// 这第二个函数应该执行与上面类似的方法，但是我加载了不同的模型，因为我从不同的数据库表中获取信息 - 但我仍然希望返回的数据受到建筑物/站点 ID 的限制用户选择的。

```
public function orders_by_site($siteID, $sort_by = 'orderID', $sort_order = 'asc', $offset = 0)
    {   
        $this->load->model('site_model');
        $this->load->model('order_model');
        $limit = 20;
        $data['columns'] = array(
            'orderID' => 'Order No.',
            'initiated_date' => 'Initiated Date',
            'target_date' => 'Target Date',
            'status' => 'Status',
            'priority' => 'Priority',
            'trade_type' => 'Trade Type'
        );

            $results = $this->site_model->get_site($siteID);
            $results = $this->order_model->get_orders($siteID, $limit, $offset, $sort_by, $sort_order);

            $data['orders'] = $results['rows'];
            $data['num_results'] = $results['num_rows'];

    //pagination for orders table

        $this->load->library('pagination');
        $config = array ();
        $config['base_url'] = site_url("Orders/orders_by_site/$sort_by/$sort_order");
        $config['total_rows'] = $data['num_results'];
        $config['per_page'] = $limit;
        $config['uri_segment'] = 6;
        $this->pagination->initialize($config);
        $data['pagination'] = $this->pagination->create_links();

        $data['sort_by'] = $sort_by;
        $data['sort_order'] = $sort_order;

        $this->load->view('orders', $data);
}
} 
```

**终端站点控制器**

**场地模型**

//获取所有站点数据

```
function get_sites($limit, $offset, $sort_by, $sort_order){

    $sort_order = ($sort_order == 'desc') ? 'desc' : 'asc';
    $sort_columns = array('site_title', 'site_uprn');
    $sort_by = (in_array($sort_by, $sort_columns)) ? $sort_by : 'site_title';

     $q = $this->db->select('siteID, site_title, site_uprn')
        ->from('sites')
        ->limit($limit, $offset)
        ->order_by($sort_by, $sort_order);

    $ret['rows'] = $q->get()->result();

     //count query for sites

    $q = $this->db->select('COUNT(*) as count', FALSE)
        ->from('sites');

    $tmp = $q->get()->result();

    $ret['num_rows'] = $tmp[0]->count;

    return $ret;
    } 
```

//获取单个站点数据

```
function get_site($siteID){

    $this->db->select()->from('sites')->where(array('siteID' => $siteID));
    $query = $this->db->get();
    return $query->first_row('array');
    } 
```

}

**订单模型**

```
//order table

function get_orders($siteID, $orderID, $limit, $offset, $sort_by, $sort_order){

    $sort_order = ($sort_order == 'desc') ? 'desc' : 'asc';
    $sort_columns = array('orderID', 'initiated_date', 'target_date','completion_date','status','priority','total_amount','job_description','requestor_name','requestor_telno','trade_type');
    $sort_by = (in_array($sort_by, $sort_columns)) ? $sort_by : 'orderID';

    $q = $this->db->select()->from('orders')->where(array('siteID' => $siteID))->limit($limit, $offset)->order_by($sort_by, $sort_order);

    $ret['rows'] = $q->get()->result();
    }

//order details
function get_order($orderID){

$this->db->select()->from('orders')->where(array('orderID' => $orderID));
$query = $this->db->get();
return $query->first_row('array');
} 
```

}

**站点视图 - 仅显示我尝试嵌入订单视图的摘录**

```
<h5>Order Details</h5>
 <?php include('orders.php')?>
 </div>  
      </div>
</div> 
```

**订单视图**

```
 <div id="site_filter">
  <div class="result_counter">
  <h5>Found <?php echo $num_results; ?> Orders</h5>
  </div>
   <div class="pagination">
   <?php if(strlen($pagination)): ?>
Page: <?php echo $pagination; ?>
    <?php endif; ?>
    </div>  
  </div>
  <div class="clear_float"></div>

    <table class="table">
    <thead>
        <?php foreach($columns as $column_name => $column_display): ?>
        <th <?php if ($sort_by == $column_name) echo "class=\"sort_$sort_order\"" ?>>
            <?php echo anchor("Sites/orders_by_site/$column_name/" .
                (($sort_order == 'asc' && $sort_by == $column_name) ? 'desc' : 'asc') ,
                $column_display); ?>
        </th>
        <?php endforeach; ?>
    </thead>

        <tbody>
        <?php foreach($orders as $order): ?>
        <tr>
            <td><a href="<?php echo base_url(); ?>Orders/order_detail/<?php echo $order->orderID; ?>"><?php echo $order->orderID; ?></a></td>
            <td><?php echo $order->initiated_date; ?></td>
            <td><?php echo $order->target_date; ?></td>
            <td><?php echo $order->status; ?></td>
            <td><?php echo $order->priority; ?></td>
            <td><?php echo $order->trade_type; ?></td>
        </tr>
        <?php endforeach; ?>
        </tbody>
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:00:55.823

好的，这里有几件事 - 我需要一些帮助

在该`orders_by_site`方法中，您将覆盖`results`变量：

```
$results = $this->site_model->get_site($siteID);
$results = $this->order_model->get_orders($siteID, $limit, $offset, $sort_by, $sort_order); 
```

此外，您加载视图的方式不正确。您正在像这样加载您的视图：

```
$this->load->view('site', $data);
$this->load->view('orders', $data); 
```

你需要做的是：

```
// you need to get the "contents" of the `orders` view in a variable 
// and pass that to the `site` view
$data['orders'] = $this->load->view('orders', $data, TRUE);
$this->load->view('site', $data); 
```

并将您的站点视图更改为：

```
<h5>Order Details</h5>
 <?php echo $orders; ?>
 </div>  
      </div>
</div> 
```

我敢肯定还有更多的事情发生，但这就是我从你的问题和评论中看到的全部内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:46:25.450

@swatkins -

非常感谢您的帮助，您强调了我忽略的一些问题 - 我现在以不同的方式解决了这个问题。

最初我试图使用 Active Record（我相信）从一个表中选择数据，基于从另一个表中选择记录 - 然后将此选择传递给另一个模型并在 get_where 语句中使用它。

我已经设法使用控制器中的 $this->uri->segment() 方法使其工作，然后将其传递给相应的模型。

现在我可以利用用户选择的“建筑物/财产”名称、地址等 - 然后我有第二个模型，它检索在该建筑物中提出的“订单/工作”。

# java - Scala 有 floatToIntBits 和 intBitsToFloat 方法吗？

> ID：15260373
> 
> 赞同：2
> 
> 时间：2013-03-06T23:41:44.533
> 
> 标签：java, scala, floating-point, bit-manipulation

`floatToIntBits`并且`intBitsToFloat`是 Java 的 Float 类中的方法。Scala 有这些功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T00:20:59.680

由于 Scala 是一种 JVM 语言，因此您可以访问您正在使用的任何 Java 运行时的任何和所有功能。这是在 JVM 之上运行的所有语言的特征，这就是它如此受欢迎的原因（JRuby、Clojure 等）

您可能必须明确声明要访问 Java Float 类型的静态方法，因为 Scala 也有一个 Float 类，但除此之外您应该没问题。

```
java.lang.Float.floatToIntBits() 
```

换句话说，Scala 没有理由实现这一点，因为 Java 已经做到了。如果您需要 Java 中已经存在的功能，只需使用 Java 实现即可。

关于您的澄清评论：

`Integer.parseInt`是`Integer`类上的静态方法，以 a`String`作为其输入，而 Scala`toInt`是在字符串之外的许多不同类的实例上常用的实例方法，用于提取整数表示。他们只是在非常松散的意义上“做”同样的事情；使用 a`String`作为输入`Integer.ParseInt`或调用`toInt`a`String`将获得相同的结果，但它们*不是*一回事，所以这不是一个非常恰当的比较。从设计角度和整体语言来看，它们公开了两个非常不同的接口。有一些重叠，正如我们在特定于字符串的情况中看到的那样，但在一般情况下，[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)哲学在这里非常重要，Scala 绝对不需要重新实现特定的东西，比如`floatToIntBits`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:21:18.133

Scala 可以从 Java 中使用它们。

```
scala> java.lang.Float.floatToIntBits(1.0f)
res0: Int = 1065353216

scala> java.lang.Float.intBitsToFloat(1)
res1: Float = 1.4E-45 
```

# jquery - primefaces 数据表中的可拖动行 - 一种保存表顺序的方法？

> ID：15260379
> 
> 赞同：0
> 
> 时间：2013-03-06T23:42:05.037
> 
> 标签：jquery, jsf-2, primefaces, datatable

我正在尝试在 primefaces 的数据表上实现可拖动的行。我知道 Primefaces 在“计划在未来发布”的数据表中有可拖动的行。我目前正在尝试自己寻找某种方法来实现此功能。

我使用以下 jquery 代码使行可拖动

```
$(".ui-datatable.sortable tbody").sortable(); 
```

但是，一旦您离开页面，这不会保存行的顺序。我有一个按钮被按下来保存表格，我想看看我是否可以编写一个保存行顺序的函数。

类似于此处最后一篇文章中实现的内容：http: [//forum.primefaces.org/viewtopic.php?f=3](http://forum.primefaces.org/viewtopic.php?f=3&t=2678) &t=2678 。但不是每次交换行时都这样做，我想在按下下面的“保存”按钮时保存一次表格。这有可能实现吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T15:30:29.740

如果您已经有答案的提示，我真的不明白您为什么决定发布这个问题。但由于没有人决定接受这个问题的答案，我会这样做。

基本上，您所要做的就是将重新排序的列表索引的计算与命令按钮的 onclick 事件联系起来，并在您的操作方法中获取新的顺序来处理重新排序的列表。我使用托管 bean 的专用字段来保持顺序，但这绝对没有必要。下面是设置。

**观点**：

```
<h:head>
    <h:outputScript name="js/pf.js" target="body"/>
    <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.min.js"></script>
</h:head>
<h:body>
    <h:form id="form">
        <p:dataTable id="table" var="data" value="#{sortableDatatableBean.list}" widgetVar="tabSort" rowIndexVar="rowIndex">
            <p:column headerText="##">
                <h:outputText styleClass="row" value="#{rowIndex}"/>
            </p:column>
            <p:column headerText="Name">
                <h:outputText value="#{data.name}" />
            </p:column>
            <p:column headerText="Value">
                <h:outputText value="#{data.value}" />
            </p:column>
        </p:dataTable>
        <h:inputHidden id="order" value="#{sortableDatatableBean.order}"/>
        <p:commandButton value="Submit" ajax="false" onclick="return doOrder()" action="#{sortableDatatableBean.action}"/>
    </h:form>
</h:body> 
```

**javascript** ( `pf.js`):

```
$(document).ready(function() {
    $(tabSort.jqId + '.ui-datatable tbody').sortable();
    $(tabSort.jqId + '.ui-datatable tbody').disableSelection();
});

function doOrder() {
    var order = '';
    var len = $('.row').length;
    $('.row').each(function(index) {
        order += ($(this).text() + ((index == (len - 1)) ? '' : ';'));
    });
    $('#form\\:order').val(order);
    return true;
} 
```

**托管bean**：

```
@ManagedBean
@RequestScoped
public class SortableDatatableBean {

    private String order = "0;1";//getter+setter
    private List<Data> list;//getter+setter

    public SortableDatatableBean() {
        list = new ArrayList<Data>();
        Data d;
        d = new Data("name", "value");
        list.add(d);
        d = new Data("name1", "value1");
        list.add(d);
    }

    public String action() {
        //String order = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("form:order");
        List<Data> reordered = new ArrayList<Data>();
        for(String s : order.split(";")) {
            try {
                Integer i = Integer.parseInt(s);
                Data data = list.get(i);
                reordered.add(data);
            } catch(NumberFormatException nfe) {
            }
        }
        this.list = reordered;
        return null;
    }

} 
```

**型号**：

```
public class Data {

    private String name;
    private String value;

    public Data() {
    }

    public Data(String name, String value) {
        this.name = name;
        this.value = value;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-10T19:18:50.573

将此添加到您的 xhtml 文件中，它将完美运行。它可能对使用 primefaces 4.0 或更低版本的其他人有所帮助。

```
<script type="text/javascript">
            jQuery(function() {
                jQuery('.ui-datatable tbody').sortable();
            });
</script> 
```

# math - FFT bin 中包含的信息

> ID：15260384
> 
> 赞同：0
> 
> 时间：2013-03-06T23:42:37.530
> 
> 标签：math, signal-processing, fft, fftw

我正在使用 FFTW 库进行分析。非常感谢任何建议。

让我们假设我们有一个函数`f[k] = A_k*sin(kwT) + B_k*cost(kwT)`，我想用采样率对它进行 FFT `N = 4`。这里，`w`是地球的恒星频率，`T`是我感兴趣的事件的恒星时间。如果我绘制 FFT 的输出，每个 bin（总共 4 个）将包含一些信息。我如何知道哪个 bin 包含有关特定`A_k`或的信息`B_k`？例如，输出的第一个 bin 对应于关于或两者的信息，这是真的`A_1`吗`B_1`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:45:15.933

第`k`- 个频率箱对应于 的中心频率`k * fs / N`，其中`fs`是您的采样频率，并且`N`是您的 FFT 长度。

请记住，“第一个”垃圾箱位于`k == 0`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:52:57.073

假设您以对应于波形周期的 1/4（幅度和相位未知）的四次采样，并且观察到的值为 a1...a4，则

```
A = (a1-a3)/2;
B = (a2-a4)/2; 
```

分别给你余弦和正弦幅度（如果第一个样本在 t=0）。

# r - 在 R 中使用 ggplot2 创建多个 y 轴刻度（或替代方法？）

> ID：15260389
> 
> 赞同：2
> 
> 时间：2013-03-06T23:43:00.867
> 
> 标签：r, ggplot2, axes

我试图在图形中显示两种不同的信息。这是一个MWE，然后我会解释：

```
library(ggplot2)
p = 1:10/10-.05
X = matrix(0,nrow=100,ncol=10)
for( i in 1:10 ) X[,i] = rbinom(100,1,p[i])
d = data.frame(X)
coef = runif(10,min=1,max=2)
d$Y = X %*% coef + rnorm(100)
plot( Y ~ X1, data=d )
fit = glm( Y ~ ., data=d )
coeff.df = data.frame( summary(fit)$coeff )
coeff.df$Count = c(NA,apply(d, 2, sum)[-11] )
coeff.df$Name = row.names(coeff.df)
coeff.df$Count.Scaled =
    coeff.df$Count/max(coeff.df$Count,na.rm=T)*max(coeff.df$Estimate)
ggplot( coeff.df, aes(x=Name) ) + geom_point(aes(y=Estimate)) +
    geom_bar(aes(weight=Count.Scaled),alpha=.3) 
```

所以，我想在图中传达两件事：模型的系数以及体积或比例的另一种度量。现在我的问题是：我想要两个轴，这样我就可以解释系数和音量（在这种情况下，我必须修改音量数字，以便它们干净地缩放到数据）。

我听说 ggplot 目前没有像这样显示两个轴的功能，对吗？什么是表示这样的数据的好方法？

# java - 如何在不缓存 hadoop 1.0.3 的情况下多次迭代 hadoop reduce 值？

> ID：15260391
> 
> 赞同：2
> 
> 时间：2013-03-06T23:43:18.270
> 
> 标签：java, hadoop, iterator, mapreduce, amazon-emr

我有一个问题，我基本上想做这样的事情：

```
 public void reduce(Text key, Iterable<Text> iterValues, Context context){

           for (Text val : iterValues){
               //do something
           }

           iterValues.reset()
           for (Text val : iterValues){
               //do something else
           }
} 
```

我知道最好避免这些情况，或者简单地在内存中实例化对象，但是我遇到了一个问题，我可能有太多东西要保存在内存中，而且将其分解为结构上会变得更加复杂更多减少步骤。

似乎我并不是唯一一个在寻找这个功能的人，事实上，它看起来像是一个不久前实现的功能： [https ://issues.apache.org/jira/browse/HADOOP-5266](https://issues.apache.org/jira/browse/HADOOP-5266)

MarkableIterator 类似乎正是我正在寻找的：[http ://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapreduce/MarkableIterator.html](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapreduce/MarkableIterator.html)

然而，它似乎只在 hadoop 2.0.3-alpha 中可用。我希望在仅支持 1.0.3（我目前使用的）或 0.20.205 的 EMR 中运行它。我一直在尝试各种事情，但我在 1.0.3 中没有找到任何可以为我提供类似功能的东西。我最接近的是使用 StreamBackedIterator，它仍然在内存中累积对象，但似乎比 ArrayList 内存效率更高。

有人知道在 Hadoop 1.0.3 中执行此操作的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:25:55.777

这有点小技巧，但是您可以让 Mapper 发出每个值两次，但在一个中设置一些标志，而不是另一个。然后首先根据该标志对值进行排序，然后根据您想要的任何自然排序。然后，一旦您达到第二组值，您就必须执行一些自定义逻辑来停止第一个循环。

除此之外，不，如果不简单地将它们自己存储在内存中，我看不到一种简单的方法。主要问题是迭代器实际上并没有返回新对象，它返回相同的对象，但在对`next()`. 在幕后，Hadoop 甚至可能不会缓存整组值，因此重置迭代器将需要重新扫描文件（我猜他们正在新版本中这样做）。

# sql - 连接 2 个 SQL 表之间的数据

> ID：15260392
> 
> 赞同：1
> 
> 时间：2013-03-06T23:43:26.683
> 
> 标签：sql, sql-server, tsql

好吧，我不像我应该的那样精通 SQL，但我熟悉 Joins、Unions 等的工作原理，我只是想不出一个解决方案。我试图从两个不同的表中获取数据，但猴子扳手是右侧表的行数可能比我在结果集中实际想要的行数多。我必须加入这两个表的唯一条件是电子邮件地址。这是代码：

```
CREATE TABLE #PPEInfo(StudentEmail nvarchar(128), StudentName nvarchar(128), DevUnits int)

INSERT INTO #PPEInfo (StudentEmail, DevUnits)
SELECT e.StudentEmail AS Email, sum(ck.DevelopmentUnits) AS DevUnits
FROM Enrollments e, CourseKeys ck
WHERE e.CertGenerated = 'true'
AND e.CourseId = ck.CourseId
GROUP BY e.StudentEmail
ORDER BY DevUnits DESC

SELECT p.StudentEmail, p.DevUnits, s.StudentName  
FROM #PPEInfo p
RIGHT OUTER JOIN Surveys s
ON p.StudentEmail = s.StudentEmail
ORDER BY DevUnits DESC, StudentName ASC

DROP TABLE #PPEInfo 
```

问题是我收到了多个学生姓名，因为他们在提交时可能没有使用同一个。例如：

```
Email Address   James R. Salvati
Email Address   James Salvati 
```

我想出的唯一解决方案是先用电子邮件地址填充我的临时表，然后使用“TOP(1)”在“调查”表中查询姓名，只得到一个学生姓名。它确实有效，但它非常占用 CPU，而且我正在处理大量记录。这是代码（尽管此时我并不关心 DevUnits 只是想提出一些建议）：

```
CREATE TABLE #PPEInfo(ID int IDENTITY(1,1), StudentEmail nvarchar(128), StudentName nvarchar(128), DevUnits int)

INSERT INTO #PPEInfo (StudentEmail)
SELECT DISTINCT StudentEmail FROM Enrollments
WHERE CertGenerated = 'true'

DECLARE @rowID int
DECLARE @email nvarchar(128)

SET @rowID = (SELECT max(ID) FROM #PPEInfo)

WHILE (@rowID > 0)
BEGIN
    SET @email = (SELECT StudentEmail FROM #PPEInfo WHERE ID = @rowID)
    UPDATE #PPEInfo
    SET StudentName = (SELECT TOP(1) s.StudentName FROM Surveys s
                       WHERE s.StudentEmail = @email)
    WHERE ID = @rowID
    SET @rowID = @rowID - 1
END

SELECT * FROM #PPEInfo
ORDER BY DevUnits DESC

DROP TABLE #PPEInfo 
```

我从来不需要在其中一个板上发帖。我通常会找到解决方案或想出一个解决方案，但这个解决方案超出了我的 SQL 能力。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:45:42.910

这取决于您要如何确定在有多个名称时选择哪个名称。一种可能的方法如下：

```
SELECT p.StudentEmail, p.DevUnits, MAX(s.StudentName)
FROM #PPEInfo p
RIGHT OUTER JOIN Surveys s
ON p.StudentEmail = s.StudentEmail
ORDER BY DevUnits DESC, StudentName ASC
GROUP BY p.studentEmail, p.devUnits 
```

在这里，您按电子邮件和单位分组，并获取“MAX”学生姓名。

同样在您的第一个查询中，您应该停止使用隐式连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:55:37.080

如果我错了，请纠正我，但我很确定你可以这样做来实现你想要的：

```
select * from enrollments
inner join coursekeys on 
enrollments.studentemail = coursekeys.studentemail 
where coursekeys.studentname=(
    select top 1 studentname from coursekeys 
    where studentemail=enrollments.studentemail
); 
```

我目前无法访问 SQL Server，但我已经在具有与您的表相似的表的 MySQL 服务器上成功地实现了这一点。

# python - python中的依赖注入（依赖于模块可用性）

> ID：15260395
> 
> 赞同：3
> 
> 时间：2013-03-06T23:43:45.170
> 
> 标签：python, python-2.7

我正在为 GPS IDE 开发插件，我想要它的两个版本：1\. GPS 插件 - 使用 GPS 运行 2\. 独立应用程序 - 不使用 GPS 运行

插件的功能之一是行高亮。当插件作为独立应用程序运行时，这是不可能的。我为此创建了 gpshelper 类，它导入 GPS 模块。Import 在作为独立应用程序运行时抛出 ImportException（因为 GPS 模块不可用）。我想知道如何将这个 gpshelper 模块注入我的插件。

在高亮方法调用期间执行高亮显示（此方法调用 gpshelper）。

可以吗，当在高亮方法中我这样做时：

```
try:
    import gpshelper
except ImportError:
    warnings.warn('Program is running as python app (not GPS plugin)') 
```

也许还有其他/更好的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T08:37:28.327

定义一个 gps_highlight 例程作为导入 gpshelper 的尝试部分的一部分。然后从现有代码中调用该例程。在 except 部分定义一个虚拟 gps_highlight 函数。这样你就可以保持你的调用代码干净：

```
import warnings

try:
    import gpshelper
    def gps_highlight(*args, **kw):
        return gpshelper.highlight(*args, **kw)
except ImportError:
    warnings.warn('Program is running as python app (not GPS plugin)')
    def gps_highlight(*args, **kw):
        return None

# after this you can safely call gps_highlight with the right parameters
# as needed by gpshelper.highlight 
```

# magento - 在 Magento 中以编程方式创建自动生成的优惠券代码？

> ID：15260397
> 
> 赞同：7
> 
> 时间：2013-03-06T23:43:58.340
> 
> 标签：magento, coupon

基于其他 stackoverflow 帖子，我已经能够使用以下代码在 Magento 中以编程方式生成单个购物车价格规则优惠券。

如何以编程方式调用“自动生成优惠券”功能，为我制定的每条定价规则创建 100 张独特的优惠券？谢谢！

```
$coupon = Mage::getModel('salesrule/rule');
$coupon->setName($_coupon['name'])
       ->setDescription('this is a description')
       ->setFromDate(date('Y-m-d'))
       ->setCouponType(2)
       ->setCouponCode($_coupon['code'])
       ->setUsesPerCoupon(1000)
       ->setUsesPerCustomer(100)
       ->setCustomerGroupIds(array(1)) //an array of customer groupids
       ->setIsActive(1)
       //serialized conditions.  the following examples are empty
       ->setConditionsSerialized('a:6:{s:4:"type";s:32:"salesrule/rule_condition_combine";s:9:"attribute";N;s:8:"operator";N;s:5:"value";s:1:"1";s:18:"is_value_processed";N;s:10:"aggregator";s:3:"all";}')
       ->setActionsSerialized('a:6:{s:4:"type";s:40:"salesrule/rule_condition_product_combine";s:9:"attribute";N;s:8:"operator";N;s:5:"value";s:1:"1";s:18:"is_value_processed";N;s:10:"aggregator";s:3:"all";}')
       ->setStopRulesProcessing(0)
       ->setIsAdvanced(1)
       ->setProductIds('')
       ->setSortOrder(0)
       ->setSimpleAction('by_percent')
       ->setDiscountAmount(100)
       ->setDiscountQty(null)
       ->setDiscountStep('0')
       ->setSimpleFreeShipping('0')
       ->setApplyToShipping('0')
       ->setIsRss(0)
       ->setWebsiteIds(array(1));      
$coupon->save(); 
```

例如，这个价格规则可能有一个完整的自动生成优惠券代码列表（htgf-7774、htgf-2345 等），使用在管理面板中手动创建价格规则时可用的功能。

**编辑：**

我已经接近了，使用下面的代码。仍然不知道如何具体分配自动生成模式

```
->setName('Name')
->setDescription('this is a description')
->setFromDate('2013-03-06')
->setToDate(NULL)
->setUsesPerCustomer('100')
->setIsActive('1')
->setConditionsSerialized('a:6:{s:4:"type";s:32:"salesrule/rule_condition_combine";s:9:"attribute";N;s:8:"operator";N;s:5:"value";s:1:"1";s:18:"is_value_processed";N;s:10:"aggregator";s:3:"all";}')
->setActionsSerialized('a:6:{s:4:"type";s:40:"salesrule/rule_condition_product_combine";s:9:"attribute";N;s:8:"operator";N;s:5:"value";s:1:"1";s:18:"is_value_processed";N;s:10:"aggregator";s:3:"all";}')
->setStopRulesProcessing('0')
->setIsAdvanced('1')
->setProductIds(NULL)
->setSortOrder('0')
->setSimpleAction('by_percent')
->setDiscountAmount('100.0000')
->setDiscountQty(NULL)
->setDiscountStep('0')
->setSimpleFreeShipping('0')
->setApplyToShipping('0')
->setTimesUsed('1')
->setIsRss('0')
->setCouponType('2')
->setUseAutoGeneration('1')
->setUsesPerCoupon('1000')
->setCustomerGroupIds(array('1',))
->setWebsiteIds(array('1',))
->setCouponCode(NULL) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-15T15:37:29.793

感谢我在谷歌搜索时发现的一篇漂亮的帖子（[http://fragmentedthought.com/fragments/programatically-creating-sales-rule-coupon-code](http://fragmentedthought.com/fragments/programatically-creating-sales-rule-coupon-code)），我回答了我自己的问题：

```
// Get the rule in question
$rule = Mage::getModel('salesrule/rule')->load(21); //21 = ID of coupon in question

// Define a coupon code generator model instance
// Look at Mage_SalesRule_Model_Coupon_Massgenerator for options
$generator = Mage::getModel('salesrule/coupon_massgenerator');

$parameters = array(
    'count'=>5,
    'format'=>'alphanumeric',
    'dash_every_x_characters'=>4,
    'prefix'=>'ABCD-EFGH-',
    'suffix'=>'-WXYZ',
    'length'=>8
);

if( !empty($parameters['format']) ){
  switch( strtolower($parameters['format']) ){
    case 'alphanumeric':
    case 'alphanum':
      $generator->setFormat( Mage_SalesRule_Helper_Coupon::COUPON_FORMAT_ALPHANUMERIC );
      break;
    case 'alphabetical':
    case 'alpha':
      $generator->setFormat( Mage_SalesRule_Helper_Coupon::COUPON_FORMAT_ALPHABETICAL );
      break;
    case 'numeric':
    case 'num':
      $generator->setFormat( Mage_SalesRule_Helper_Coupon::COUPON_FORMAT_NUMERIC );
      break;
  }
}

$generator->setDash( !empty($parameters['dash_every_x_characters'])? (int) $parameters['dash_every_x_characters'] : 0);
$generator->setLength( !empty($parameters['length'])? (int) $parameters['length'] : 6);
$generator->setPrefix( !empty($parameters['prefix'])? $parameters['prefix'] : '');
$generator->setSuffix( !empty($parameters['suffix'])? $parameters['suffix'] : '');

// Set the generator, and coupon type so it's able to generate
$rule->setCouponCodeGenerator($generator);
$rule->setCouponType( Mage_SalesRule_Model_Rule::COUPON_TYPE_AUTO );

// Get as many coupons as you required
$count = !empty($parameters['count'])? (int) $parameters['count'] : 1;
$codes = array();
for( $i = 0; $i < $count; $i++ ){
  $coupon = $rule->acquireCoupon();
  $code = $coupon->getCode();
  $codes[] = $code;
}
return $codes; 
```

这成功生成了以下代码：

```
ABCD-EFGH-ZC6V-ZJWD-WXYZ
ABCD-EFGH-4XMX-353L-WXYZ
ABCD-EFGH-XCJB-5GQI-WXYZ
ABCD-EFGH-UEAO-L1NJ-WXYZ
ABCD-EFGH-59B3-50T2-WXYZ 
```

# javascript - 如果选中复选框，请按 Enter 提交表单

> ID：15260398
> 
> 赞同：0
> 
> 时间：2013-03-06T23:44:00.977
> 
> 标签：javascript, jquery, html, forms

我有一个使用按钮提交的表单，但如果已选中复选标记，我还想允许通过键入 ENTER 键来提交。

我已经让输入部分工作了：

```
<form action="index.php">
  <textarea onkeydown="pressed(event)"></textarea>
</form>
<input type="checkbox" id="enterCheckbox" />

<script>
  function pressed(e) { 
    if ( (window.event ? event.keyCode : e.which) == 13) { document.forms[0].submit() }
  }
</script> 
```

现在我只想在 #enterCheckbox 已被选中的情况下运行该函数，但我无法正确执行它。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:47:56.277

除了添加额外条件之外，您的工作是否按预期工作？如果是这样，您应该能够`&&`在当前支票中添加额外`if(...)`支票。

类似的东西`$('#enterCheckbox').attr('checked')`应该告诉你复选框是否被选中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:50:39.583

你应该能够做这样的事情：

```
if(document.getElementById(enterCheckbox).checked)) {
    // do all the good stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T23:53:42.883

你的函数应该包括一个额外的条件..比如：

```
<script>
  function pressed(e) { 
    if ( ( (window.event ? event.keyCode : e.which) == 13) AND (document.getElementById('enterCheckbox').checked) ){ document.forms[0].submit() }
  }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T23:49:24.077

要检查该框是否被选中，使用 jQuery：

```
$("#enterCheckbox").is(":checked") 
```

所以你的`<script>`意愿是：

```
function pressed(e) { 
    if (($("#enterCheckbox").is(":checked")) && ((window.event ? event.keyCode : e.which) == 13)) {
        document.forms[0].submit()
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T23:50:12.420

如果使用 jQuery，我建议使用选择器让生活更轻松。但是您要检查是否`#enterCheckbox`已检查的是[`.is(':checked')`](http://api.jquery.com/is/).

**更新的 HTML**

```
<form id="myForm" action="index.php">
  <textarea id="myTextarea"></textarea>
</form>
<input type="checkbox" id="enterCheckbox" /> 
```

**jQuery 实现**

```
$('#myTextarea').on('keydown', function(e) {
    var key = window.event.keyCode || e.which;

    if($('#enterCheckbox').is(':checked') && key == 13) {
        $('#myForm').submit();
    }
}); 
```

# php - RijndaelManaged.CreateEncryptor 密钥扩展

> ID：15260399
> 
> 赞同：2
> 
> 时间：2013-03-06T23:44:07.757
> 
> 标签：php, .net, encryption, rijndael

有两种方法可以为`RijndaelManaged`对象指定键和 IV。一种是通过调用`CreateEncryptor`：

```
var encryptor = rij.CreateEncryptor(Encoding.UTF8.GetBytes(key), Encoding.UTF8.GetBytes(iv))); 
```

另一种是直接设置`Key`和`IV`属性：

```
rij.Key = "1111222233334444";
rij.IV = "1111222233334444"; 
```

只要 和 的长度`Key`为`IV`16 个字节，两种方法都会产生相同的结果。但是，如果您的密钥短于 16 个字节，第一种方法仍然允许您对数据进行编码，第二种方法会失败并出现异常。

现在这听起来像是一个绝对抽象的问题，但我必须使用`PHP`只有 10 个字节长的密钥才能将加密消息发送到使用第一种方法的服务器。

那么问题来了：怎么`CreateEncryptor`扩展key，有没有PHP实现？我无法更改 C# 代码，所以我不得不在 PHP 中复制这种行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-25T23:02:44.660

我将不得不从一些假设开始。（TL；DR - 解决方案大约下降了三分之二，但旅程更*凉爽*）。

首先，在您的示例中，您将 IV 和 Key 设置为字符串。这是做不到的。因此，我假设我们在字符串上调用 GetBytes()，顺便说一下，这是一个糟糕的主意，因为可用 ASCII 空间中的潜在字节值少于一个字节中所有 256 个值的值；这就是 GenerateIV() 和 GenerateKey() 的用途。我会在最后谈到这一点。

接下来，我将假设您使用 RijndaelManaged 的​​默认块、键和反馈大小：分别为 128、256 和 128。

现在我们将反编译 Rijndael CreateEncryptor() 调用。当它创建 Transform 对象时，它根本不会对键做任何事情（除了 set m_Nk，我稍后会谈到）。相反，它直接从给定的字节生成密钥扩展。

现在变得有趣了：

```
switch (this.m_blockSizeBits > rgbKey.Length * 8 ? this.m_blockSizeBits : rgbKey.Length * 8) 
```

所以：

```
128 > len(k) x 8 = 128
128 <= len(k) x 8 = len(k) x 8 
```

128 / 8 = 16，所以如果 len(k) 为 16，我们可以期望打开 len(k) x 8。如果更多，那么它也会打开 len(k) x 8。如果它更小，它将打开块大小，128。

有效的开关值是 128、192 和 256。这意味着如果它的长度超过 16 个字节并且不是某种有效的块（非键）长度，它只会降为默认值（并引发异常）。

换句话说，它从不检查 RijndaelManaged 对象中指定的密钥长度。它直接进入密钥扩展并开始在块级别运行，只要密钥长度（以位为单位）是 128、192、256 或*小于 128*之一。这实际上是对块大小而不是密钥大小的检查。

那么现在我们显然没有检查密钥长度会发生什么？答案与密钥时间表的性质有关。当您在 Rijndael 中输入密钥时，需要扩展密钥才能使用。在这种情况下，它将扩展到 176 字节。为了实现这一点，它使用了一种专门设计用于将短字节数组转换为更长字节数组的算法。

其中一部分涉及检查密钥长度。反编译更有趣，我们发现这定义为 m_Nk。听起来很熟悉？

```
this.m_Nk = rgbKey.Length / 4; 
```

对于 16 字节的密钥，Nk 为 4，当我们输入较短的密钥时，Nk 为 4。那是 4 个*词*，对于任何想知道神奇数字 4 来自哪里的人来说。这会导致密钥调度程序中出现奇怪的分叉，Nk <= 6 有一条特定的路径。

在不深入细节的情况下，这实际上发生在密钥长度小于 16 字节的“工作”（即不会在火球中崩溃）......直到它低于 8 字节。

然后整个事情轰然倒塌。

所以我们学了什么？当您使用 CreateEncryptor 时，您实际上是在将一个完全无效的密钥直接扔到密钥调度程序中，而且有时它不会彻底崩溃（或严重违反合同完整性，具体取决于您的 POV），这是偶然的；可能是由于短密钥长度有特定的分叉这一事实的意外副作用。

为了完整起见，我们现在可以查看在 RijndaelManaged 对象中设置 Key 和 IV 的其他实现。这些存储在 SymmetricAlgorithm 基类中，该基类具有以下设置器：

```
if (!this.ValidKeySize(value.Length * 8))
    throw new CryptographicException(Environment.GetResourceString("Cryptography_InvalidKeySize")); 
```

答对了。合同得到妥善执行。

显而易见的答案是，除非该库碰巧包含相同的明显问题，否则您无法在另一个库中复制它，我将在 Microsoft 的代码中称为错误，因为我真的看不到任何其他选项。

但这个答案将是一个警察。通过检查密钥调度程序，我们可以弄清楚实际发生了什么。

初始化扩展密钥时，它会使用 0x00s 填充自身。然后它使用我们的密钥写入前 Nk 个字（在我们的例子中 Nk = 2，因此它填充前 2 个字或 8 个字节）。然后它通过填充超出该点的其余扩展键进入扩展的第二阶段。

所以现在我们知道它本质上是用 0x00 填充超过 8 个字节的所有内容，我们可以用 0x00s 填充它吗？不; 因为这会将 Nk 向上移动到 Nk = 4。结果，尽管我们的前 4 个字（16 个字节）将按预期填充，但第二阶段将从第 17 个字节开始扩展，而不是第 9 个！

那么解决方案是完全微不足道的。与其用 6 个额外字节填充我们的初始密钥，不如去掉最后 2 个字节。

所以你在 PHP 中的直接答案是：

```
$key = substr($key, 0, -2); 
```

很简单，对吧？:)

现在您可以与此加密功能进行互操作。但是不要。它可以被破解。

假设您的密钥使用小写字母、大写字母和数字，您将拥有一个只有 218 万亿个密钥的详尽搜索空间。

62 个字节 (26 + 26 + 10) 是每个字节的搜索空间，因为您从不使用其他 194 (256 - 62) 个值。因为我们有 8 个字节，所以有 62^8 种可能的组合。218万亿。

我们能以多快的速度尝试该空间中的所有键？让我们问问 openssl 我的笔记本电脑（运行很多杂物）可以做什么：

```
Doing aes-256 cbc for 3s on 16 size blocks: 12484844 aes-256 cbc's in 3.00s 
```

那是 4,161,615 次传球/秒。218,340,105,584,896 / 4,161,615 / 3600 / 24 = 607 天。

好吧，607天还不错。但我总是可以启动一堆亚马逊服务器，然后通过询问 607 个等效实例来计算 1/607 的搜索空间，将其缩短到大约 1 天。那要花多少钱？不到 1000 美元，假设每个实例在某种程度上只和我忙碌的笔记本电脑一样高效。否则更便宜，更快。

还有一个实现是 openssl [1](http://cr.yp.to/aes-speed/aesspeed-20080926.pdf)速度的两倍，所以将我们最终得到的数字减半。

然后我们必须考虑，在用尽整个搜索空间之前，我们几乎肯定会找到密钥。因此，据我们所知，它可能会在一小时内完成。

在这一点上，我们可以断言数据是否值得加密，破解密钥可能是值得的。

所以你去。

# javascript - JavaScript：如何确定运行时（又名浏览器）的性能？

> ID：15260403
> 
> 赞同：3
> 
> 时间：2013-03-06T23:44:19.597
> 
> 标签：javascript, browser

我有一个 JavaScript 应用程序，它运行良好，但肯定需要一些内存/CPU 性能（它基于谷歌地图）。

所以基本上它在台式机/笔记本电脑上运行良好，iPad 工作正常。但是现在有了所有这些不同的设备，较小的设备肯定会过载。

所以基本上我想确定可用的运行时并决定是启动我的 JavaScript 应用程序，还是显示一条消息。

1.  好的，我可以检查浏览器，但这是一个永无止境的故事
2.  我可以检查操作系统信息，但这又是非常乏味的。还有一些操作系统在高性能设备和低端硬件上运行。
3.  我可以检查屏幕大小并排除手机，但随后就变得困难了

**那么有没有办法确定客户端的性能呢？**为了清楚起见，我不关心它是否是平板电脑，但如果它是 CPU 性能/内存很少的低性能平板电脑（因此[使用 javascript 检测手机/平板电脑/网络客户端](https://stackoverflow.com/questions/15100234/detect-phone-tablet-web-client-using-javascript)无济于事）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-09T10:57:46.847

在 javascript 中，如果设备内存不足，您可以检查功能列表并根据该列表得出结论。

例如：

1.  使用 window.navigator.hardwareConcurrency 检查核心数量（为了获得更好的覆盖率，请添加[Core Estimator polyfill](https://github.com/oftn/core-estimator)）

2.  检查 WebGL 支持（我喜欢 user2070775 的建议）：[检测 WebGL 支持的正确方法？](https://stackoverflow.com/questions/11871077/proper-way-to-detect-webgl-support)

3.  检查它是台式机还是移动设备。很可能桌面不会有任何内存问题。

4.  检查屏幕分辨率 - 小分辨率很可能出现在低内存设备上。

# c++ - C++ delete[] void* curiosity

> ID：15260405
> 
> 赞同：1
> 
> 时间：2013-03-06T23:44:31.943
> 
> 标签：c++, arrays, dynamic-allocation

I've got a rather simple, though large, system setup. It stores it's data in a `void*` array because the data it's storing could vary between `float` or `double` depending on how much accuracy is needed.

just doing `delete [] data` raises a `warning: deleting 'void*' is undefined [enabled by default]` using MinGW. And I've got another variable to tell me if `data` is a `float*` or a `double*`, but does it matter which I use?

In other words, could I use the fallowing code without worrying about memory-leak's, or other errors/damage not caught by the compiler?

```
double* d_data = new double[length];
data = (void*)d_data;
delete [] (float*)data; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:52:21.347

这当然很重要；您使用的指针`delete[]`必须与您分配的指针具有相同的类型。所以强制转换`double*`为有效（但容易出错）；强制转换为`float*`给出未定义的行为。

*[对于类类型的单个对象（不是数组）有一个例外 -如果*该基类具有虚拟析构函数，它可以是指向基类的指针。但这不适用于原始类型，如`double`, 或数组。]

至于内存泄漏：手动内存管理*总是*存在内存泄漏的危险，除非您非常小心，不要做任何可能引发异常的事情。我强烈推荐使用[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)来管理所有动态资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T23:46:56.010

看来您可能想使用[union](http://www.cplusplus.com/doc/tutorial/other_data_types/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T23:55:26.140

是的，这很重要（并且转换为其他数据类型本质上与 leave 一样糟糕`void*`），因为您本质上是在丢失/搞砸额外的元数据（如实际长度）。它可能不一定会崩溃（例如，您可以使用`delete data;`而不是`delete [] data;`也可以，除非编译器注意到错误，否则它会泄漏），因为它本质上是未定义的行为（不同的编译器或版本可能会产生不同的结果）。

正如 Jorge 建议的那样，您可能只想为此使用联合，因此两种数据类型可以共享相同的内存：

```
union my_union {
    double d_double;
    float d_float;
}; 
```

根据编译器的不同，这个结构通常与内部最大的数据类型大小相同（在这种情况下（在 32 位机器上）可能是 8 个字节的双精度，4 个字节的浮点数；所以总大小为 8字节，因为这些变量本质上是重叠的）。请记住，您不能将其用于某种自动转换。

# git - GIT un-rollback a commit

> ID：15260407
> 
> 赞同：3
> 
> 时间：2013-03-06T23:44:36.270
> 
> 标签：git

I did a commit and push on my git repo.

I then needed to rollback that commit which I did like this:

```
git reset --hard b1b5768c9687455f01bab242ff177a5ee403104f 
```

Is it possible to find the SHA of the first commit? and go back to it again?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T23:49:14.597

使用`git log -g`或`git reflog`查看 reflog - 给定的所有值的日志`HEAD`。将其视为 HEAD 的按时间顺序排列的历史，而不是签入历史。

一旦你找到它，你就可以`git reset`回到它（可能在创建一个专门指向它的分支之后）或者挑选你想要的部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T23:51:10.793

直接的方式（紧接着）是

```
git reset --hard HEAD@{1} 
```

这只是从 reflog 中获取 HEAD 的先前引用

# vb.net - How to document Visual Basic with Doxygen

> ID：15260408
> 
> 赞同：5
> 
> 时间：2013-03-06T23:44:37.403
> 
> 标签：vb.net, vba, vb6, documentation, doxygen

I am trying to use some Doxygen filter for Visual Basic in Windows.

I started with Vsevolod Kukol filter, based on gawk. There are not so many directions. So I started using his own commented VB code [VB6Module.bas](https://github.com/sevoku/Doxygen-VB-Filter/blob/master/samples/ClassicVB/VB6Module.bas) and, by means of his [vbfilter.awk](https://github.com/sevoku/Doxygen-VB-Filter/blob/master/vbfilter.awk), I issued:

```
gawk -f vbfilter.awk VB6Module.bas 
```

This outputs a C-like code on stdin. Therefore I redirected it to a file with:

```
gawk -f vbfilter.awk VB6Module.bas>awkout.txt 
```

I created this Doxygen `test.cfg` file:

```
PROJECT_NAME      = "Test"
OUTPUT_DIRECTORY  = test
GENERATE_LATEX    = NO
GENERATE_MAN      = NO
GENERATE_RTF      = NO
CASE_SENSE_NAMES  = NO
INPUT             = awkout.txt
QUIET             = NO
JAVADOC_AUTOBRIEF = NO
SEARCHENGINE      = NO 
```

To produce the documentation I issued:

```
doxygen test.cfg 
```

Doxygen complains as the "name 'VB6Module.bas' supplied as the second argument in the \file statement is not an input file." I removed the comment `@file VB6Module.bas` from `awkout.txt`. The warning stopped, but in both cases the documentation produced was just a single page with the project name.

I tried also the alternative filter by Basti Grembowietz in Python [vbfilter.py](http://home.in.tum.de/~grembowi/vbfilter/vbfilter.py). Again without documentation, again producing errors and without any useful output.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T11:03:48.567

经过反复试验，我解决了这个问题。

我无法将`.bas`文件转换为可以将其作为输入传递给 Doxygen 的格式。无论如何，按照@doxygen 用户的建议，我能够创建一个 Doxygen 配置文件，以便它可以`.bas`正确解释文件注释。

给定文件[VB6Module.bas](https://github.com/sevoku/Doxygen-VB-Filter/blob/master/samples/ClassicVB/VB6Module.bas)（由 Doxygen-VB-Filter 作者 Vsevolod Kukol 编写），使用适用于 Visual Basic 的 Doxygen 样式进行注释，我编写了 Doxygen 配置文件，`test.cfg`如下所示：

```
PROJECT_NAME      = "Test"
OUTPUT_DIRECTORY  = test
GENERATE_LATEX    = NO
GENERATE_MAN      = NO
GENERATE_RTF      = NO
CASE_SENSE_NAMES  = NO
INPUT             = readme.md VB6Module.bas
QUIET             = YES
JAVADOC_AUTOBRIEF = NO
SEARCHENGINE      = NO
FILTER_PATTERNS   = "*.bas=vbfilter.bat" 
```

在哪里：

*   `readme.md`是任何可以用作主要文档页面的 Markdown 文件。
*   `vbfilter.bat`包含：

    @echo off gawk.exe -f vbfilter.awk "%1%"

*   [假设过滤器作者的vbfilter.awk](https://github.com/sevoku/Doxygen-VB-Filter/blob/master/vbfilter.awk)与要记录的输入文件位于同一文件夹中，显然 [gawk](http://gnuwin32.sourceforge.net/packages/gawk.htm)应该在路径中。

跑步：

```
doxygen test.cfg 
```

一切都很顺利，除了两个看似无害的警告：

```
gawk: vbfilter.awk:528: warning: escape sequence `\[' treated as plain `[' 
gawk: vbfilter.awk:528: warning: escape sequence `\]' treated as plain `]' 
```

现在`test\html\index.html`包含由“.bas”和 Markdown 文件提取的正确文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-23T14:58:56.143

好吧，我做了一些工作：

您可以下载[此 .zip 文件](https://dl.dropboxusercontent.com/u/30731675/VBADoxy.zip)。它包含：

*   **MakeDoxy.bas**使这一切发生的宏
*   **makedoxy.cmd**将由 MakeDoxy 执行的 shell 脚本
*   **包含创建 doxygen 文档所需的 doxygen 和 gawk 二进制文件的配置**文件夹，以及一些已被 OP 使用的附加过滤文件。
*   **source**包含 doxygen 示例源代码的文件夹

* * *

# 如何使用：

**注意：**我用 Excel 2010 对其进行了测试

1.  提取**VBADoxy.zip** somehwere（`<root>`从现在开始引用）

2.  **将 MakeDoxy.bas**导入您的 VBA 项目。
    *您还可以从**源代码**导入文件或使用您自己的 doxygen 文档化 VBA 代码文件，但您需要在同一个 VBA 项目中至少有一个文档化文件。*

    ![在此处输入图像描述](../Images/7ee44a7156cf59735a1cf1763aaebde3.png)
3.  将“Microsoft Visual Basic for Applications Extensibility 5.3”或更高版本添加到您的 VBA 项目参考中（未使用较低版本对其进行测试）。导出部分（[VBProject](http://msdn.microsoft.com/en-us/library/aa443985%28v=vs.60%29.aspx)，[VBComponent](http://msdn.microsoft.com/en-us/library/aa443982%28v=vs.60%29.aspx)）需要它。

    ![在此处输入图像描述](../Images/e2968ac850b818bef9cf06ee8cf994e2.png)

4.  运行宏*MakeDoxy*

* * *

# 将会发生什么：

1.  系统将要求您提供`<root>`文件夹。
2.  `<root>\source`之后会询问您是否要删除
    *删除这些文件是可以的。它们**不会**从您的 VBA 项目中删除。*
3.  *MakeDoxy*会将所有`.bas`,`cls`和`.frm`文件导出到位置：
    `<root>\source\<modulename>\<modulename>(.bas|.cls|.frm)`
4.  `cmd.exe`如果您选择的方式将共同生成您想要的文档，则将被命令运行`makedoxy.cmd`和删除。`<root>\source`

*每次执行MakeDoxy*`MakeDoxy.bas.log`时都会重新创建一个日志文件。

 *`configuration\vbdoxy.cfg`如果你想改变 doxygens 的行为，你可以玩一点。

还有一些改进的空间，但我想这是可以使用的。*

# sql - 按分钟排序不起作用

> ID：15260409
> 
> 赞同：0
> 
> 时间：2013-03-06T23:44:42.703
> 
> 标签：sql, hour, datepart, minute

我试图按小时和分钟对我的照片进行排序，但它不会抓住分钟 - 它只是一直说那个小时和分钟不存在任何东西。如果我只想在下班后进行排序，那效果很好。我已经测试过`WHERE DATEPART(minute, exif_taken) = "'.$_GET['min'].'"`，但我不断收到以下错误消息：

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1305 FUNCTION gallery.DATEPART does not exist' in ... 
```

我正在使用具有默认设置的 WAMP 服务器，除了为 Apache 和 PHP 激活的一些模块，如 mod_rewrite 和 php_exif。这是我的 SQL 查询的样子：

```
SELECT *
FROM photos
WHERE HOUR(exif_taken) = "'.$_GET['h'].'"
AND MINUTE(exif_taken) = "'.$_GET['min'].'"
ORDER BY exif_taken DESC 
```

`$_GET['h']`是小时和`$_GET['min']`分钟。

我该如何解决我的问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:50:14.043

你在使用 MySQL 吗？如果为真，则 DATEPART() 函数不存在。你应该使用 MINUTE() 函数..

这是完整的文档。

[https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

顺便说一句，看在上帝的份上，在发送到 SQL 查询之前清理你的 _GET 变量。您正在将您的系统暴露给 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:19:10.203

以某种奇怪的方式，它现在与我在我的问题 Oo 中发布的 SQL 查询完美配合

# ios - 如何在用户退出 iPhone 应用程序时执行最后的操作？

> ID：15260410
> 
> 赞同：1
> 
> 时间：2013-03-06T23:44:48.590
> 
> 标签：ios, terminate

当用户在 iPhone 上杀死应用程序时，有没有办法执行一些最后的操作？

在 UIApplicationDelegate 中有 applicationWillTerminate: 但据我了解，不能保证在应用程序终止时调用它。还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T00:10:57.337

你不能依赖`applicationWillTerminate`被召唤。从文档中：

> 对于不支持后台执行或链接到 iOS 3.x 或更早版本的应用程序，当用户退出应用程序时始终调用此方法。对于支持后台执行的应用程序，当用户退出应用程序时通常不会调用此方法，因为在这种情况下应用程序只是移动到后台。但是，在应用程序在后台运行（未挂起）并且系统出于某种原因需要终止它的情况下，可能会调用此方法。

保存任何状态的正确位置是应用程序进入后台时。一旦发生这种情况，就无法知道应用程序是否会返回前台，或者它是否会被杀死然后从头开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:59:51.173

All methods concerning your app state are in your **AppDelegate** when you use one of the project templates.

Put the code in the `applicationWillResignActive:` method. It will get called if your app goes to an inactive state (terminating or no).

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T00:43:42.977

保存状态的“正确”位置在**和** `-applicationDidEnterBackground:`中`-applicationWillTerminate:`。不用担心双重储蓄；通常只调用其中一个（IME，`-applicationWillTerminate:`当您的应用在后台被杀死时不会调用）。

**警告**：`-applicationDidEnterBackground:`不*保证*会被调用，因为它是*在*您的应用程序进入后台后调用的（因此有资格在不通知的情况下被杀死！）。如果您的应用程序在后台运行时设备内存不足，它可能会被杀死。避免这种情况的最好方法是首先不要使用太多内存。

您*可以*使用 `-applicationWillResignActive:`，但我不建议这样做：应用程序变得非常频繁地处于非活动状态。一个明显的是系统对话框（位置/隐私提示、Wi-Fi、显示为警报、警报的通知）、TWTweetSheet，我怀疑 MFMailComposeViewController、MFMessageComposeViewController、通知中心、应用程序切换栏（例如，更改曲目/启用方向锁定）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-07T00:09:54.380

您可以在 appdelegate 中使用 applicationWillResignActive 方法，或者您可以执行以下操作，如果您想保存内容，但由于某种原因，您不想在 app 委托中执行此操作：

```
- (void) viewDidLoad/init { 
    [[NSNotificationCenter defaultCenter]
        addObserver:self
        selector:@selector(myApplicationWillResign)
        name:UIApplicationWillResignActiveNotification 
        object:NULL];
}

- (void) myApplicationWillResign {
    NSLog(@"About to die, perform last actions");
} 
```

# python - 获取烧瓶内容块以仅显示选定数量的项目

> ID：15260411
> 
> 赞同：0
> 
> 时间：2013-03-06T23:44:49.413
> 
> 标签：python, flask

我正在编写我的第一个烧瓶应用程序，我有一个如下所示的块：

```
{%- block content %}
<ol> 
{%- for item in items | sort(reverse=True, attribute=date) %}
    {%- if item in items[:3] %}
        <li>

            blah blah

        </li>
    {%- endif %}
{%- endfor %}
</ol>
{%- endblock content %} 
```

我只想显示按日期排序的前三个项目。目前，我只能通过删除 来显示所有项目`items[:3]`，而不是最新的 3 个。我怎样才能只显示三个项目？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T01:08:16.907

使用烧瓶的内置循环上下文变量：

```
{%- for item in items | sort(reverse=True, attribute=date) %}
    {%- if loop.index <= 3 %}
        <li>
            blah blah
        </li>
    {%- endif %}
{%- endfor %} 
```

更多信息：http: [//jinja.pocoo.org/docs/templates/#for](http://jinja.pocoo.org/docs/templates/#for)

# ruby - 如何仅通过一个救援语句就捕获所有异常

> ID：15260414
> 
> 赞同：3
> 
> 时间：2013-03-06T23:45:12.783
> 
> 标签：ruby, exception-handling

我知道如何捕捉异常，但我们所做的是将“救援”放在代码的可疑部分之后。如果你有很多函数通过 mysql2 gem 向 mysql 发送查询，并且你想捕获它们的异常。您可以做的一件事是在每个文件中添加“救援”声明。但我只想通过一份救援声明来做到这一点。所以我在代码末尾放了一个“救援”，并将所有代码放在“开始”和“结束”中，但它没有用。

这是我的代码，正如您所见，mysql 查询中存在问题，仅仅因为“rescue”是文件的结尾，它没有捕获异常，但是当我将它放在该查询之后它可以工作。

```
 require 'mysql2'
require 'colored'

begin

def log(string)
  p "["+string.cyan+"]"
end

def err
  p "["+"FAIL".red+"]"
end

def done
  p "["+"DONE".red+"]"
end

class SqlClient
  def initialize()
    log "SqlClient/initialize"
    puts "Host: \n"
    @host = gets.strip
    puts "User: \n"
    @user = gets.strip
    puts "Pass: \n"
    @pass = gets.strip
    @client = Mysql2::Client.new(host: @host , username: @user , password: @pass)

  end

  def list_databases()
    puts "We are listing your databases(not just projects) \n \n \n "
    @client.query("ELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA").each do |row|
      p row["SCHEMA_NAME"]
    end

    puts "\n \n \n"

  end

end

    rescue Mysql2::Error
    err
    abort

end

    `query': You have an error in your SQL syntax; check the manual that corresponds to your 
MySQL server version for the right syntax to use near 'ELECT SCHEMA_NAME FROM 
INFORMATION_SCHEMA.SCHEMATA' at line 1 (Mysql2::Error) 
```

我不是在寻找类似的东西：

```
begin
  # my code
rescue # this line is right after the code which is going to have problem and we catch it.

end 
```

我正在寻找这样的东西：

```
begin
  # first method
  # second method
  # thrid method
  # rest of code and etc ...
  # now this is end of file: 
rescue
end 
```

但正如您在我的代码中看到的那样，它不起作用。

**更新：我在**[这里](http://www.ruby-forum.com/topic/556154)发现了一个类似的问题，似乎没有答案：| 也许这是一种红宝石弱点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T23:55:53.480

如果您想查看**任何**错误，请使用`e`例如

```
begin
  # your call to a method of Mysql2 gem. for example:
  client = Mysql2::Client.new(:host => "localhost", :username => "root", etc...)

rescue => e
  puts e.message
  puts e.backtrace.inspect 

end 
```

为了捕获每个异常，您需要用`begin` `rescue` `end`. 当引发异常时，它会退出执行，因此它不会命中下一个方法。

为了捕捉所有错误，我想我会做这样的事情。请记住，这很丑陋，我建议您**不**要这样做，但是...如果您想尝试，也许可以尝试以下方法：

```
all_errors = []

# first method you call
begin
  # some error might happen here
  first_response = Mysql2::Client.new(:host => "localhost", :username => "root", etc...)
rescue => e
  all_errors << e
end

# second method you call
begin
  # some error might happen here
  second_response = Mysql2::Client.new(:host => "localhost", :username => "root", etc...)
rescue => e
  all_errors << e
end

puts all_errors.inspect 
```

经过快速搜索，我发现：（[http://coderrr.wordpress.com/2008/11/07/the-simple-way-to-print-exceptions-in-ruby/](http://coderrr.wordpress.com/2008/11/07/the-simple-way-to-print-exceptions-in-ruby/)）

```
# catch all exceptions (anything that derives from Exception)
begin
  ...
rescue Exception
  puts $!, $@
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T00:15:53.353

您可以使用 at_exit 处理程序，它可以访问 $! 中的最后一个异常！

喜欢

```
 at_exit {
   puts "the exception that killed us is", $! 
 } 
```

如果您想在“一旦发生”（而不是在它们被捕获后）捕获异常，您可以使用 ruby​​ 的“调试模式”（当它们发生到控制台时输出消息）或 ruby​​-debug 请参阅[Is there any way to异常时启动 Ruby 调试器？](https://stackoverflow.com/questions/2327096/is-there-any-way-to-start-the-ruby-debugger-on-exception)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T00:08:00.900

似乎没有人注意到它，但`rescue`不使用类将捕获所有 StandardError 并且还有更多。

如果你想捕获**所有**你需要做的异常

```
begin
  # your code where you call SqlClient.new etc
rescue Exception => e
  puts "error raised"
  puts [e, e.backtrace].flatten.join("\n")
end 
```

所有错误类别的列表：

```
例外
 无内存错误
 脚本错误
   加载错误
   未实现错误
   语法错误
 信号异常
   打断
 标准错误
   参数错误
   IO错误
     EOF错误
   索引错误
   本地跳转错误
   名称错误
     无方法错误
   范围错误
     浮动域错误
   正则表达式错误
   运行时错误
   安全错误
   系统调用错误
   系统堆栈错误
   线程错误
   类型错误
   零除法错误
 系统退出
 致命的

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T23:50:36.557

只需将所有代码包装在：

```
begin

   #yourcode
   #as much as you want
rescue 

end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T00:17:59.830

你试过在你的课堂上添加一个 at_exit 方法吗？这将允许您在 ruby​​ 退出时做一些事情。就像在这篇文章中一样。

[Ruby at_exit](https://stackoverflow.com/a/1154665/793330)

或者

[来自 Ruby 2.0 API 文档](http://ruby-doc.org/core-2.0/Kernel.html#method-i-at_exit)

但是要小心巧妙地从异常中拯救！

当您试图弄清楚为什么您的代码在应该失败时没有失败时，您将开始在路上（或其他开发人员会）拉出您的头发。我更喜欢用明亮的闪亮标志大量失败，**说明代码在这里失败**！呵呵。

祝你好运！

# .net - File.Exists UNC 共享文件夹存在问题

> ID：15260417
> 
> 赞同：0
> 
> 时间：2013-03-06T23:45:17.913
> 
> 标签：.net

我们最近在 Windows 2008 r2 服务器上将一个 asp.net 2.0 项目升级到 .net 4.0，我们发现的问题之一是对 UNC 共享文件夹的 File.Exists() 调用。它在 Windows 2003 服务器上的 .net 2 上运行良好。该代码的作用是使用 Windows 模拟来访问由 Web 服务创建的文件的共享文件夹。即使文件存在于刚刚由 Web 服务创建的共享文件夹中，似乎 File.Exists() 也会返回 false。现在我认为当本地代码尝试访问该文件时，Web 服务中的 File 对象可能不会关闭。那么如何使用 File.Exists 方法的 .net 4 实现来解决此问题，我尝试将线程设置为休眠几秒钟但没有帮助，无论如何这不是一个好的解决方案。

有任何想法吗？

更新：

好的，所以我添加了一个 while 循环来等待 Web 服务关闭文件。现在 File.Exits 在 while 循环期间返回 true。有趣的是，它在 asp.net 2.0 中运行良好。不确定 .net 4 是否有不同的实现或服务器差异导致这种不同的行为。

# javascript - 如何使用 JavaScript 隐藏/显示 div 标签？

> ID：15260418
> 
> 赞同：10
> 
> 时间：2013-03-06T23:45:21.897
> 
> 标签：javascript, html

基本上，我正在尝试创建一个链接，当按下该链接时，它将隐藏当前的 body div 标签并在其位置显示另一个，不幸的是，当我单击链接时，第一个 body div 标签仍然出现。这是HTML代码：

```
<div id="body">
    <h1>Numbers</h1>
</div>
<div id="body1">
    Body 1
</div> 
```

这是CSS代码：

```
#body {
    height: 500px;
    width: 100%;
    margin: auto auto;
    border: solid medium thick;
}

#body1 {
    height: 500px;
    width: 100%;
    margin: auto auto;
    border: solid medium thick;
    display: hidden;
} 
```

这是 JavaScript 代码：

```
function changeDiv() {
  document.getElementById('body').style.display = "hidden"; // hide body div tag
  document.getElementById('body1').style.display = "block"; // show body1 div tag
  document.getElementById('body1').innerHTML = "If you can see this, JavaScript function worked"; // display text if JavaScript worked
} 
```

注意：CSS 标签在不同的文件中声明

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-06T23:50:18.333

你有没有尝试过

`document.getElementById('body').style.display = "none";`

代替

`document.getElementById('body').style.display = "hidden";`?

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-20T14:04:05.157

只需使用 jquery 事件列表器，单击事件。让链接的类是 lb ...我正在考虑将 body 作为 div 正如你所说的...

```
$('.lb').click(function() {
    $('#body1').show();
    $('#body').hide();
 }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-19T17:34:23.517

使用以下代码：

```
function hide {
document.getElementById('div').style.display = "none";
}
function show {
document.getElementById('div').style.display = "block";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-28T10:20:31.620

您可以使用 Js 功能隐藏/显示 Div。下面的示例

```
 <script>
        function showDivAttid(){

            if(Your Condition)
            {
             document.getElementById("attid").style.display = 'inline';
            }
            else
            {
            document.getElementById("attid").style.display = 'none';
            }

        }

    </script> 
```

HTML - 显示/隐藏此文本

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-06T23:54:26.327

考虑使用`jQuery`. 生活更轻松：

```
$('body').hide(); $('body1').show(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-16T11:21:12.877

将您的 HTML 设置为

```
 <div id="body" hidden="">
 <h1>Numbers</h1>
 </div>
 <div id="body1" hidden="hidden">
 Body 1
 </div> 
```

现在将javascript设置为

```
 function changeDiv()
      {
      document.getElementById('body').hidden = "hidden"; // hide body div tag
      document.getElementById('body1').hidden = ""; // show body1 div tag
      document.getElementById('body1').innerHTML = "If you can see this, JavaScript function worked"; 
      // display text if JavaScript worked
       } 
```

检查，它有效。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2015-01-18T20:34:49.550

> 试试你写 document.getElementById('id').style.visibility="hidden";

# c# - 使用 LINQ 处理大型 SQL 查询

> ID：15260419
> 
> 赞同：4
> 
> 时间：2013-03-06T23:45:22.267
> 
> 标签：c#, .net, sql-server, linq, entity-framework

我正在尝试通过实体数据模型从具有大约 2000 万个条目的 MS SQL 数据库中的表中获取每条记录。我最初的想法是按块检索数据，如下所示：

```
public IEnumerable<IEnumerable<device>> GetDevicesInChunks(int chunkSize)
{
    using (var db = new AccountsEntities())
    {
        for (int i = 0; i < db.devices.Count(); i += chunkSize)
        {
            yield return db.devices.Skip(i).Take(chunkSize);
        }
    }
} 
```

但是，从我使用上述方法时抛出的异常来看，我似乎必须在调用`OrderBy`之前调用`Skip`

```
The method 'Skip' is only supported for sorted input in LINQ to Entities. The method 
'OrderBy' must be called before the method 'Skip'. 
```

我确信调用`OrderBy`我检索到的每个记录子集都会很昂贵，因为这些设备没有特定的顺序 - 我觉得我在这里走错了路。

通过 LINQ 处理大型 SQL 查询的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T00:05:50.760

发生错误是因为方法 Skip 需要在 OrderBy 之后运行。如果没有 OrderBy，您将无法运行 Skip。方法Skip需要知道第一个取什么，如果你放什么是第一个需要知道select的顺序来知道第一个是从头到尾还是从尾到头的那个数字。

[你可以在这里](http://msdn.microsoft.com/en-us/library/bb358985.aspx)阅读更多

因此，您的代码如下所示：

```
public IEnumerable<IEnumerable<device>> GetDevicesInChunks(int chunkSize)
{
    using (var db = new AccountsEntities())
    {
        for (int i = 0; i < db.devices.Count(); i += chunkSize)
        {
            yield return db.devices.OrderByDescending(y => y).Skip(i).Take(chunkSize);
        }
    }
} 
```

如果您认为这是一个繁重的查询，请记住 Entity Framework 可以**缓存查询和数据**。如果您不喜欢该方法的 sql，您可以[手动运行查询](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.executestorecommand.aspx)。

*个人经验：* 我将它与具有 2 bi 行的数据库一起使用，并且......它并不慢。但我的表中有索引，我总是使用缓存。

*更多信息：* 如果您愿意，可以使用程序。[在这里](http://weblogs.asp.net/dwahlin/archive/2011/09/23/using-entity-framework-code-first-with-stored-procedures-that-have-output-parameters.aspx)查看更多

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T00:18:09.187

您可能不必执行 an `OrderBy`- 您可能只需要在执行`Skip`and之前填充列表`Take`。我认为您可以使用 a`.Count()`来填充查询，之后您可以使用`Skip`and `Take`。

# image - Titanium]如何在不每次上传图片的情况下添加多个标记？

> ID：15260420
> 
> 赞同：0
> 
> 时间：2013-03-06T23:45:25.870
> 
> 标签：image, map, upload, titanium

我正在使用 Titanium Studio，构建：3.0.1 并尝试制作一个 android 应用程序。

在这张地图上，我添加了许多标记。我在我的数据库中找到了这些标记的属性。

这是它的工作原理：

```
 var i = 1;
while(i<qr.rowCount) //I use i because qr.validRow always return false....
{
    var marker = Ti.Map.createAnnotation({
        latitude: qr.fieldByName('lat'),
        longitude: qr.fieldByName('lng'),
        title: qr.fieldByName('nom')+' '+ qr.fieldByName('prix_hh')+' €',
        subtitle: qr.fieldByName('adresse'),
        pincolor:Titanium.Map.ANNOTATION_RED,
        animate:true,
        image: 'images\\'+qr.fieldByName('prix_hh')+'_app.png',
        myid: qr.fieldByName('id') // Custom property to uniquely identify this annotation.
    });
    mapView.addAnnotation(marker);
    qr.next();
    i++;
} 
```

对于每个标记，我给出了图标的路径，同时说：

```
image: 'images\\'+qr.fieldByName('prix_hh')+'_app.png' 
```

它工作得很好，但是对于每个标记，Titanium 都会上传图像，所以当我得到超过 180 个标记时，它需要很长时间（30 秒）。如您所见，我总是使用相同的图标，所以我想我可以将它们存储在某个地方，然后不需要再次上传它们。我试图这样做，但我没有成功。

```
[INFO] [2013-03-07 00:39:09,921] get images\3_app.png: C:\Users\Bomp\My Documents\Titanium_Studio_Workspace\MGB\Resources\android\images\3_app.png
[INFO] [2013-03-07 00:39:10,062] get images\2_app.png: C:\Users\Bomp\My Documents\Titanium_Studio_Workspace\MGB\Resources\android\images\2_app.png
[INFO] [2013-03-07 00:39:10,177] get images\2_app.png: C:\Users\Bomp\My Documents\Titanium_Studio_Workspace\MGB\Resources\android\images\2_app.png
[INFO] [2013-03-07 00:39:10,226] get images\3_app.png: C:\Users\Bomp\My Documents\Titanium_Studio_Workspace\MGB\Resources\android\images\3_app.png
[INFO] [2013-03-07 00:39:10,358] get images\3_app.png: C:\Users\Bomp\My Documents\Titanium_Studio_Workspace\MGB\Resources\android\images\3_app.png
[INFO] [2013-03-07 00:39:10,404] get images\3_app.png: C:\Users\Bomp\My Documents\Titanium_Studio_Workspace\MGB\Resources\android\images\4_app.png
[INFO] [2013-03-07 00:39:10,519] get images\3_app.png: C:\Users\Bomp\My Documents\Titanium_Studio_Workspace\MGB\Resources\android\images\3_app.png
[INFO] [2013-03-07 00:39:10,779] get images\3_app.png: C:\Users\Bomp\My Documents\Titanium_Studio_Workspace\MGB\Resources\android\images\3_app.png
[INFO] [2013-03-07 00:39:10,864] get images\3_app.png: C:\Users\Bomp\My Documents\Titanium_Studio_Workspace\MGB\Resources\android\images\3_app.png
[INFO] [2013-03-07 00:39:10,966] get images\2_app.png: C:\Users\Bomp\My Documents\Titanium_Studio_Workspace\MGB\Resources\android\images\2_app.png
[INFO] [2013-03-07 00:39:11,053] get images\2_app.png: C:\Users\Bomp\My Documents\Titanium_Studio_Workspace\MGB\Resources\android\images\2_app.png
[INFO] [2013-03-07 00:39:11,148] get images\3_app.png: C:\Users\Bomp\My Documents\Titanium_Studio_Workspace\MGB\Resources\android\images\3_app.png
[INFO] [2013-03-07 00:39:11,207] get images\2_app.png: C:\Users\Bomp\My Documents\Titanium_Studio_Workspace\MGB\Resources\android\images\2_app.png 
```

# python - 使用 py.test xdist 控制测试的分布

> ID：15260422
> 
> 赞同：3
> 
> 时间：2013-03-06T23:45:29.180
> 
> 标签：python, testing, nose, pytest

我有几千个测试要并行运行。测试都是编译后的二进制文件，返回代码为 0 或非零（失败时）。它们中的一些未知子集尝试使用相同的资源（文件、端口等）。每个测试都假定它是独立运行的，如果资源不可用，则只报告失败。

我正在使用 Python 使用 subprocess 模块启动每个测试，并且连续运行非常好。我研究了 Nose 进行并行化，但我需要自动生成测试（将 1000 多个二进制文件中的每一个包装到使用子进程的 Python 类中），并且 Nose 的多处理模块不支持并行化自动生成的测试。

我最终选择了 PyTest，因为它可以使用 xdist 插件通过 SSH 在远程主机上运行自动生成的测试。

但是，据我所知，xdist 似乎不支持对测试的分发方式进行任何控制。我想给它一个由 N 台机器组成的池，并在每台机器上运行一次测试。

PyTest/xdist 可以实现我想要的吗？如果没有，是否有可以做我正在寻找的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T05:23:29.530

我不确定这是否会有所帮助。但是，如果您提前知道要如何划分测试，而不是让 pytest 分发您的测试，您可以使用持续集成服务器为每台不同的机器调用不同的 pytest 运行。使用 -k 或 -m 选择测试子集，或者简单地指定不同的测试目录路径，您可以控制哪些测试一起运行。

# linux - Drupal 7 重写不使用 .htaccess

> ID：15260424
> 
> 赞同：3
> 
> 时间：2013-03-06T23:45:31.800
> 
> 标签：linux, apache, drupal

我正在尝试在不使用 .htaccess 文件的情况下启用 drupal 7 中的重写功能，因为只有在您没有对服务器的 root 访问权限时才应该使用它（根据 apache 的网站）

没有任何进一步的告别，这是我的配置

```
<VirtualHost *:80>
  ServerName  www.example.com
  ServerAlias example.com

  DirectoryIndex index.php
  DocumentRoot /var/www/example.com/public

  ErrorDocument 404 /index.php

  LogLevel warn
  ErrorLog  /var/www/example.com/log/error.log
  CustomLog /var/www/example.com/log/access.log combined

  <Directory "/var/www/example.com/public">
    Options -Indexes +FollowSymLinks +ExecCGI
    AllowOverride None
    Order allow,deny
    Allow from all

    RewriteEngine on

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} !=/favicon.ico
    RewriteRule ^(.*)$ /index.php?q=$1 [L,QSA]
  </Directory>
</VirtualHost> 
```

当我将它放在 .htaccess 文件中时，重写配置有效，但当我将它放在 vhost 文件中时却没有。

大家能看出这里有什么不对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:05:35.113

我认为您的重写规则不应该包含`'/'`前缀，因为它不再是 .htaccess 了。Soo 尝试：

```
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA] 
```

删除 .htaccess 引用是个好主意。您应该将`AllowOverride None`on`<Directory />`指令放在文件系统的根目录下。如果认为你不需要`+ExecCGI`也。如果您想在不使用 .htaccess 的情况下更深入地了解 Drupal 的 apache 配置，请查看[此详细资源](http://www.makina-corpus.org/blog/better-rewriterules-drupal)。

# java - 如何使用带参数的 exitValue()？

> ID：15260426
> 
> 赞同：0
> 
> 时间：2013-03-06T23:45:41.817
> 
> 标签：java, nonblocking, processbuilder

一篇非常好的文章（当 Runtime.exec() 不会）说：您使用 exitValue() 而不是 waitFor() 的唯一可能时间是当您不希望您的程序阻止等待外部进程时可能永远不会完成。我宁愿不使用 waitFor() 方法，而是将一个名为 waitFor 的布尔参数传递给 exitValue() 方法，以确定当前线程是否应该等待。布尔值会更有益，因为 exitValue() 是该方法更合适的名称，并且两个方法不必在不同条件下执行相同的功能。这种简单的条件判别是输入参数的域。

我有完全相同的情况，我的系统调用将启动一个进程，该进程将继续运行，直到用户决定终止它。如果我使用 '(process.waitFor() == 0)' 它将在那里阻止程序，因为进程不会完成。上面文章中的作者建议 exitValue() 可以与 'waitFor' 参数一起使用。有人试过吗？任何示例都会有所帮助。

代码：

// 启动 ProcessBuilder，'str' 包含一个命令

```
ProcessBuilder pbuilder = new ProcessBuilder(str);
pbuilder.directory(new File("/root/workspace/Project1"));
pbuilder.redirectErrorStream(true);
Process prcs = pbuilder.start();
AForm.execStatustext.append("\n=> Process is:" + prcs);

// Read output
StringBuilder out = new StringBuilder();
BufferedReader bfrd = new BufferedReader(new InputStreamReader(process.getInputStream()));
String current_line = null, previous_line = null;
while ((current_line = bfrd.readLine()) != null) {
    if (!line.equals(previous_line)) {
        previous_line = current_line;
        out.append(current_line).append('\n');
        //System.out.println(line);
    }
}
//process.getInputStream().close();
// Send 'Enter' keystroke through BufferedWriter to get control back
BufferedWriter bfrout = new BufferedWriter(new OutputStreamWriter(prcs.getOutputStream()));
bfrout.write("\\r");
bfrout.newLine();
bfrout.flush();
bfrout.write("\\r");
bfrout.newLine();
bfrout.flush();
//process.getOutputStream().close();*/

if (prcs.waitFor() == 0)
    System.out.println("Commands executed successfully");
System.exit(0); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T02:30:23.563

这是我用来启动外部进程的一些库代码的“粗略”示例。

基本上，这使用三个线程。第一个用于执行实际命令，然后等待它存在。

另外两个处理进程输出和输入流。这使得它们彼此独立，防止了一个阻止另一个的能力。

然后将整个事情与一个侦听器联系在一起，当事情发生时，该侦听器会收到通知。

错误处理可能会更好（因为失败条件有点不清楚究竟是什么/谁失败了），但基本概念就在那里......

这意味着您可以启动该过程而无需关心...（直到您想要）

```
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.ReentrantLock;

public class TestBackgroundProcess {

    public static void main(String[] args) {
        new TestBackgroundProcess();
    }

    public TestBackgroundProcess() {
        BackgroundProcess bp = new BackgroundProcess("java", "-jar", "dist/BackgroundProcess.jar");
        bp.setListener(new ProcessListener() {
            @Override
            public void charRead(BackgroundProcess process, char value) {
            }

            @Override
            public void lineRead(BackgroundProcess process, String text) {
                System.out.println(text);
            }

            @Override
            public void processFailed(BackgroundProcess process, Exception exp) {
                System.out.println("Failed...");
                exp.printStackTrace();
            }

            @Override
            public void processCompleted(BackgroundProcess process) {
                System.out.println("Completed - " + process.getExitValue());
            }
        });

        System.out.println("Execute command...");
        bp.start();

        bp.send("dir");
        bp.send("exit");

        System.out.println("I'm not waiting here...");
    }

    public interface ProcessListener {
        public void charRead(BackgroundProcess process, char value);
        public void lineRead(BackgroundProcess process, String text);
        public void processFailed(BackgroundProcess process, Exception exp);
        public void processCompleted(BackgroundProcess process);
    }

    public class BackgroundProcess extends Thread {

        private List<String> commands;
        private File startIn;
        private int exitValue;
        private ProcessListener listener;
        private OutputQueue outputQueue;

        public BackgroundProcess(String... cmds) {
            commands = new ArrayList<>(Arrays.asList(cmds));
            outputQueue = new OutputQueue(this);
        }

        public void setStartIn(File startIn) {
            this.startIn = startIn;
        }

        public File getStartIn() {
            return startIn;
        }

        public int getExitValue() {
            return exitValue;
        }

        public void setListener(ProcessListener listener) {
            this.listener = listener;
        }

        public ProcessListener getListener() {
            return listener;
        }

        @Override
        public void run() {

            ProcessBuilder pb = new ProcessBuilder(commands);
            File startIn = getStartIn();
            if (startIn != null) {
                pb.directory(startIn);
            }

            pb.redirectError();

            Process p;
            try {

                p = pb.start();
                InputStreamConsumer isc = new InputStreamConsumer(p.getInputStream(), this, getListener());
                outputQueue.init(p.getOutputStream(), getListener());
                outputQueue.start();

                p.waitFor();
                isc.join();
                outputQueue.terminate();
                outputQueue.join();

                ProcessListener listener = getListener();
                if (listener != null) {
                    listener.processCompleted(this);
                }

            } catch (InterruptedException ex) {

                ProcessListener listener = getListener();
                if (listener != null) {
                    listener.processFailed(this, ex);
                }

            } catch (IOException ex) {

                ProcessListener listener = getListener();
                if (listener != null) {
                    listener.processFailed(this, ex);
                }

            }

        }

        public void send(String cmd) {
            outputQueue.send(cmd);
        }
    }

    public class OutputQueue extends Thread {

        private List<String> cmds;
        private OutputStream os;
        private ProcessListener listener;
        private BackgroundProcess backgroundProcess;
        private ReentrantLock waitLock;
        private Condition waitCon;
        private boolean keepRunning = true;

        public OutputQueue(BackgroundProcess bp) {

            backgroundProcess = bp;
            cmds = new ArrayList<>(25);

            waitLock = new ReentrantLock();
            waitCon = waitLock.newCondition();

        }

        public ProcessListener getListener() {
            return listener;
        }

        public OutputStream getOutputStream() {
            return os;
        }

        public BackgroundProcess getBackgroundProcess() {
            return backgroundProcess;
        }

        public void init(OutputStream outputStream, ProcessListener listener) {
            os = outputStream;
            this.listener = listener;
        }

        public void send(String cmd) {
            waitLock.lock();
            try {
                cmds.add(cmd);
                waitCon.signalAll();
            } finally {
                waitLock.unlock();
            }
        }

        public void terminate() {
            waitLock.lock();
            try {
                cmds.clear();
                keepRunning = false;
                waitCon.signalAll();
            } finally {
                waitLock.unlock();
            }
        }

        @Override
        public void run() {
            try {
                Thread.sleep(500);
            } catch (InterruptedException ex) {
            }
            BackgroundProcess backgroundProcess = getBackgroundProcess();
            ProcessListener listener = getListener();
            OutputStream outputStream = getOutputStream();
            try {
                while (keepRunning) {
                    while (cmds.isEmpty() && keepRunning) {
                        waitLock.lock();
                        try {
                            waitCon.await();
                        } catch (Exception exp) {
                        } finally {
                            waitLock.unlock();
                        }
                    }

                    if (!cmds.isEmpty()) {
                        waitLock.lock();
                        try {
                            while (!cmds.isEmpty()) {
                                String cmd = cmds.remove(0);
                                System.out.println("Send " + cmd);
                                outputStream.write(cmd.getBytes());
                                outputStream.write('\n');
                                outputStream.write('\r');
                                outputStream.flush();
                            }
                        } finally {
                            waitLock.unlock();
                        }
                    }

                }
            } catch (IOException ex) {
                if (listener != null) {
                    listener.processFailed(backgroundProcess, ex);
                }
            }
        }
    }

    public class InputStreamConsumer extends Thread {

        private InputStream is;
        private ProcessListener listener;
        private BackgroundProcess backgroundProcess;

        public InputStreamConsumer(InputStream is, BackgroundProcess backgroundProcess, ProcessListener listener) {

            this.is = is;
            this.listener = listener;
            this.backgroundProcess = backgroundProcess;

            start();

        }

        public ProcessListener getListener() {
            return listener;
        }

        public BackgroundProcess getBackgroundProcess() {
            return backgroundProcess;
        }

        @Override
        public void run() {

            BackgroundProcess backgroundProcess = getBackgroundProcess();
            ProcessListener listener = getListener();

            try {

                StringBuilder sb = new StringBuilder(64);
                int in = -1;
                while ((in = is.read()) != -1) {

                    char value = (char) in;
                    if (listener != null) {
                        listener.charRead(backgroundProcess, value);
                        if (value == '\n' || value == '\r') {
                            if (sb.length() > 0) {
                                listener.lineRead(null, sb.toString());
                                sb.delete(0, sb.length());
                            }
                        } else {
                            sb.append(value);
                        }
                    }

                }

            } catch (IOException ex) {

                listener.processFailed(backgroundProcess, ex);

            }

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:14:35.243

在主线程中使用 waitFor 之前，创建另一个线程（子线程）并在这个新线程中为您的终止案例构建逻辑。例如，等待 10 秒。如果满足条件，则从子线程中断主线程，并在主线程上处理以下逻辑。

以下代码创建一个子线程来调用该进程，并且主线程执行其工作，直到子线程成功完成。

```
 import java.io.IOException;

    public class TestExecution {

        public boolean myProcessState = false;

        class MyProcess implements Runnable {

            public void run() {
                //------
                Process process;
                try {
                    process = Runtime.getRuntime().exec("your command");
                    process.waitFor();
                    int processExitValue = process.exitValue();

                    if(processExitValue == 0) {
                        myProcessState = true;
                    }

                } catch (IOException e) {
                    e.printStackTrace();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

            }

        }

        public void doMyWork() {

            MyProcess myProcess = new MyProcess();

            Thread myProcessExecuter = new Thread(myProcess);
            myProcessExecuter.start();

            while(!myProcessState) {
                // do your job until the process exits with success
            }
        }

        public static void main(String[] args) {

            TestExecution testExecution = new TestExecution();
            testExecution.doMyWork();
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T00:42:01.967

> 如果我使用 '(process.waitFor() == 0)' 它将在那里阻止程序，因为进程不会完成。

不，不会的。它会阻塞*线程。*这就是为什么你有线程。

> 上面文章中的作者建议 exitValue() 可以与 'waitFor' 参数一起使用

不，他没有。他正在谈论如果有人问他，他会如何设计它。但他们没有，他也没有。

> 有人试过吗？

你不能。它不存在。

# r - 有没有办法“压缩”一个 lm() 对象以供以后预测？

> ID：15260429
> 
> 赞同：11
> 
> 时间：2013-03-06T23:45:44.907
> 
> 标签：r, memory, compression

有没有办法“压缩”lm 类的对象，以便我可以将其保存到磁盘并稍后加载以供 predict.lm 使用？

我有一个 lm 对象，保存后最终约为 142mb，我很难相信 predict.lm 需要所有原始观测值/拟合值/残差等来进行线性预测。我可以删除信息以使保存的模型更小吗？

我尝试将一些变量（fitted.values、residuals 等）设置为 NA，但它似乎对保存的文件大小没有影响。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T00:33:05.633

您可以使用`biglm`来拟合您的模型，`biglm`模型对象小于 lm 模型对象。您可以使用`predict.biglm`创建一个函数，您可以将新数据设计矩阵传递给该函数，该矩阵返回预测值。

另一种选择是用来`saveRDS`保存文件，文件看起来要小一些，因为它们的开销较小，是单个对象，不像 save 可以保存多个对象。

```
 library(biglm)
 m <- lm(log(Volume)~log(Girth)+log(Height), trees)
 mm <- lm(log(Volume)~log(Girth)+log(Height), trees, model = FALSE, x =FALSE, y = FALSE)
 bm <- biglm(log(Volume)~log(Girth)+log(Height), trees)
 pred <- predict(bm, make.function = TRUE)
 save(m, file = 'm.rdata')
 save(mm, file = 'mm.rdata')
 save(bm, file = 'bm.rdata')
 save(pred, file = 'pred.rdata')
 saveRDS(m, file = 'm.rds')
 saveRDS(mm, file = 'mm.rds')
 saveRDS(bm, file = 'bm.rds')
 saveRDS(pred, file = 'pred.rds')

 file.info(paste(rep(c('m','mm','bm','pred'),each=2) ,c('.rdata','.rds'),sep=''))
#             size isdir mode mtime               ctime               atime               exe
#  m.rdata    2806 FALSE  666 2013-03-07 11:29:30 2013-03-07 11:24:23 2013-03-07 11:29:30  no
#  m.rds      2798 FALSE  666 2013-03-07 11:29:30 2013-03-07 11:29:30 2013-03-07 11:29:30  no
#  mm.rdata   2113 FALSE  666 2013-03-07 11:29:30 2013-03-07 11:24:28 2013-03-07 11:29:30  no
#  mm.rds     2102 FALSE  666 2013-03-07 11:29:30 2013-03-07 11:29:30 2013-03-07 11:29:30  no
#  bm.rdata    592 FALSE  666 2013-03-07 11:29:30 2013-03-07 11:24:34 2013-03-07 11:29:30  no
#  bm.rds      583 FALSE  666 2013-03-07 11:29:30 2013-03-07 11:29:30 2013-03-07 11:29:30  no
#  pred.rdata 1007 FALSE  666 2013-03-07 11:29:30 2013-03-07 11:24:40 2013-03-07 11:29:30  no
#  pred.rds    995 FALSE  666 2013-03-07 11:29:30 2013-03-07 11:27:30 2013-03-07 11:29:30  no 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T01:30:54.300

有几件事：

1.  这个问题真的是重复的。

2.  在狭义上`model=FALSE`，正如在另一个问题中已经回答的那样。

3.  从更广泛的意义上说，`predict(fit, newdata)`实际上只是进行矩阵向量乘法，因此您可以*只保存预测向量*并将其与矩阵相乘。

4.  有替代的拟合函数。下面是`fastLm()`RcppArmadillo 中的一个例子，它也恰好更快。

请参阅下面的插图。

```
R> library(RcppArmadillo)
Loading required package: Rcpp
R> flm <- fastLm(Volume ~ Girth, data=trees)
R> predict(flm, newdata=trees[1:5,])             ## can predict as with lm()
[1]  5.10315  6.62291  7.63608 16.24803 17.26120
R> object.size(flm)                              ## tiny object size ...
3608 bytes
R> stdlm <- lm(Volume ~ Girth, data=trees)
R> object.size(stdlm)                            ## ... compared to what lm() has
20264 bytes
R> stdlm <- lm(Volume ~ Girth, data=trees, model=FALSE)
R> object.size(stdlm)                            ## ... even when model=FALSE
15424 bytes
R> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-06T23:53:29.473

原来我解决了我自己的问题。使用以下内容：

```
model<-lm(form,data=ct,model=FALSE,x=FALSE,y=FALSE) 
```

大大减小了我的模型的大小。

# functional-programming - 如何在 OCaml 中使用列表实现二进制堆？

> ID：15260430
> 
> 赞同：2
> 
> 时间：2013-03-06T23:45:50.693
> 
> 标签：functional-programming, ocaml

我`binary heap`在 OCaml 中实现了一个使用列表，只是为了提高我的 OCaml 技能。

使用list感觉很吃力，苦苦挣扎了2天，不得不来这里寻求建议和提示。

* * *

## 到目前为止，这是我的想法

显然，我不能使用原始`array based`算法使用 list 来实现它。

我试图利用的是`binary tree`. 我一直`invariant`认为一个节点应该大于任何级别低于其的节点。

我大致想出了如何实现`insert`，虽然我不确定它是否正确。

对于二叉树，每个节点都有`two children`，`value`而**它****`size n`的总数是`offsprings`**。这`n`用于平衡树。

插入时`x`，我与一个节点（从根，递归）进行比较。假设`x < the value of the node`，那么

如果节点的一个或两个子节点是`Leaf`，那么我将 插入`x`到那个 Leaf 位置。

如果`none`节点的孩子是叶子，那么我会选择n小于的孩子然后`recursively insert`。

* * *

## 这是我的代码

```
type 'a heap = 
  | Node of 'a * 'a heap * 'a heap * int
  | Leaf 

exception EmptyHeapException

let create_heap () = Leaf;;

let rec insert x = function
  | Leaf -> Node (x, Leaf, Leaf, 0)
  | Node (v, l, r, n) ->
    let (stay, move) = if x > v then (x, v) else (v, x)
    in 
    match (l, r) with 
      | (Leaf, Leaf) -> 
        Node (stay, Node (move, Leaf, Leaf, 0), Leaf, 1)
      | (Leaf, _) -> 
        Node (stay, Node (move, Leaf, Leaf, 0), r, n+1)
      | (_, Leaf) ->
        Node (stay, l, Node (move, Leaf, Leaf, 0), n+1)
      | (Node (_, _, _, n1), Node (_, _, _, n2)) ->
        if n1 <= n2 then
          Node (stay, (insert move l), r, n1+1)
        else 
          Node (stay, l, (insert move r), n2+1);; 
```

* * *

好的，我有以下问题。

1.  我是否朝着正确的方向前进？我的想法或实施是否正确？
2.  我陷入了实现`get_top`功能。我不知道如何继续。任何提示？
3.  ocaml 电池实现了一个高效的[batHeap.ml](https://github.com/ocaml-batteries-team/batteries-included/blob/master/src/batHeap.ml)。我看过，但我觉得它的方式与我的完全不同，我无法理解。任何人都可以帮助我理解它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T00:22:54.637

这个插入代码对我来说看起来很不错。（我有一段时间对计数感到困惑，但现在我看到他们正在计算后代的数量。）

删除最大元素（根）的功能基本上是删除，这始终是最困难的。本质上，您需要在保持不变性的同时合并两棵树。我现在没有时间详细研究它，但我认为这将是可能的。

如果您查看冈崎（如果您遇到困难，您可以这样做！），您会看到他的树有一个额外的不变量，可以更轻松地执行这些操作。我很确定这不是我马上想出来的。他的实现基于合并两棵树的操作。它用于插入和删除。

快速浏览一下，电池堆代码基于“二叉树”，实际上要复杂得多。冈崎也有说明。

**更新**

Okasaki 的书*Purely Functional Data Structures*是他博士论文的详细阐述。似乎优先级队列只出现在书中——对不起。如果你真的对 FP 感兴趣，并且不缺钱，那么这本书真的值得拥有。

正如我所说，您的插入代码对我来说看起来很棒。在我看来，您实际上有两个不变量：

*   节点中的值小于或等于其子树根部的值（排序不变）。

*   一个节点的子树的种群最多相差 1（平衡不变）。

正如我所说，我没有时间详细验证，但在我看来，您的插入代码维护了不变量，因此是 O( *log n* )。

这种结构的有用性取决于您能够在保持这两个不变量的同时删除 O( *log n ) 中的根。*

删除的草图将是这样的：

```
let pop = function Leaf -> 0 | Node (_, _, _, p) -> p

let rec merge a b =
  (* populations of a, b differ by at most one. pop a >= pop b *)
  match a, b with
  | Leaf, Leaf -> Leaf
  | Leaf, _ -> b
  | _, Leaf -> a
  | Node (av, al, ar, ap), Node (bv, bl, br, bp) ->
      if av >= bv then Node (av, merge al ar, b, ap + bp)
      else Node (bv, merge al ar, insert av (delete_min b), ap + bp)

and delete_min = function
  | Leaf -> Leaf
  | Node (_, Leaf, Leaf, _) -> Leaf
  | Node (_, l, Leaf, _) -> l
  | Node (_, Leaf, r, _) -> r
  | Node (_, l, r, _) ->
    if pop l >= pop r then merge l r else merge r l 
```

我仍然没有很多时间，所以这可能需要一些修复以确保正确性或复杂性。

**更新**

作为一个纯粹的大脑人，我（真的）从未想过克里斯冈崎在现实生活中是什么样的。他在西点军校任教，在那里找到他的个人页面并不难。它可能会满足你的一些好奇心。

# programming-languages - Smalltalk 中的 ":=" 和二进制消息优先级

> ID：15260437
> 
> 赞同：4
> 
> 时间：2013-03-06T23:46:20.757
> 
> 标签：programming-languages, smalltalk, squeak, seaside

我正在尝试通过 Dolphin Smalltalk X6 附带的教程来学习 Smalltalk。

我的问题涉及对具有多条消息的表达式的评估。

我的理解是首先评估简单消息，然后是二进制消息，最后是关键字消息（括号中的代码除外）。但是，我无法将此理解应用于以下示例中的第二行（在[Dolphin Smalltalk 教程](http://www.mimuw.edu.pl/~sl/teaching/00_01/Delfin_EC/BeginnersGuide/PlayingWithObjects.htm)中找到）。

```
 playground := Playground new.
    teresa := playground add: Triangle new.       "Misunderstood code"
    teresa class.                                 "Evaluates to 'Triangle'" 
```

如果我的理解是正确的，那么将评估第二行：

```
 1\. Simple message 'new' sent to Triangle, triangle object as response
    2\. Binary message ':=' with parameter 'playground' sent to 'teresa'.
    3\. Keyword message 'add:' with parameter 'triangle object' sent to 'teresa'.
    4\. teresa class. "evaluates to 'Playground'". 
```

我的误解是“teresa”是如何指代匿名 Triangle 对象而不是“playground”所指的 Playground 对象。

我查找了 Smalltalk 评估的第二种解释，提到了 := 或添加：是没有成功的特殊情况，而我能想到的唯一其他解释是一个基本的误解。

任何帮助理顺我？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T01:23:05.417

赋值运算符 (:=) 不是消息。（它不会发送到对象，而是表示应将变量*设置*为值）。它的优先级是最后一个整体。

所以会发生什么：

1.  简单消息“新”发送到三角形，三角形对象作为响应
2.  关键字 message add: 发送到游乐场，并且有一个约定 add: messages 回答添加的对象，这似乎遵循，因此返回新创建的三角形。
3.  变量 teresa 设置为新三角形
4.  特蕾莎班。“评估为三角形”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-07T01:24:54.453

虽然 := 看起来像二进制消息，因为它使用中缀字符......它不是。它是语言语法的一部分，就像括号和句点一样（例如）。

将 := 视为赋值运算符（有时称为“gets”）。这不是任何优先级的消息。它在任何消息发送后进行评估。它的左值必须是直接变量引用（不是消息发送的结果）。

# java - 在 Android 中使用正则表达式提取更多字符串

> ID：15260438
> 
> 赞同：1
> 
> 时间：2013-03-06T23:46:35.527
> 
> 标签：java, android, regex

输入是这样的：

```
String text = "{\"definitions\":[{\"id\":\"com.sample.evaluationa\",\"name\":\"Evaluationa\",\"vers}{\"id\":\"com.sample.evaluationb\",\"name\":\"Evaluationb\",\"vers}"; 
```

和一些报价，使其更透明

```
String definitions = "{\"definitions\":[";
String id = "{\"id\":\"";
String name = "\",\"name\":\"";
String rest = "\",\"vers}"; 
```

然后我的正则表达式如下所示：

```
Pattern pattern = Pattern.compile((Pattern.quote(definitions)) +"("+ (Pattern.quote(id)) +"(.+)" +(Pattern.quote(name))+"(.+)"+(Pattern.quote(rest))+")*"); 
```

我正在寻找 id (com.sample.evaluation)

```
Matcher regexMatcher = pattern.matcher(text);
    while (regexMatcher.find()) {
        title = regexMatcher.group(2);
        System.out.println(title);
        System.out.println("The pattern is " + pattern.pattern());
    } 
```

我的输出如下所示：

```
com.sample.evaluationa","name":"Evaluationa","vers}{"id":"com.sample.evaluationb
The pattern is \Q{"definitions":[\E(\Q{"id":"\E(.+)\Q","name":"\E(.+)\Q","vers}\E)* 
```

但我想要：

```
com.sample.evaluationacom.sample.evluationb 
```

还有什么也很有趣，但不是很好，在循环改变目标群体之后

```
title = regexMatcher.group(2); 
```

我得到了（当然还有图案线）

```
Evaluationb 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:52:08.513

`.+`表示**1**到**无限**个字符，并且正则表达式引擎默认是**贪婪**的，因此它将匹配尽可能多的字符。

最好定义您可以在那里期望的字符类：
`[a-z\.]+`for`id` 和`[A-Z][a-z]+`for`name`
那些将自行工作，因为当点击`\`正则表达式引擎时，它将停止，因为`\`它不是最后一个类的一部分

如果您出于任何原因想要使用`.+`但尽早停止，请添加一个`?`after 以便它切换到**惰性**行为。（例如。`.+?`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T05:16:03.800

您可以在 java 中处理该字符串，只需下载[Apache commons lang](http://commons.apache.org/proper/commons-lang/)库并将 `commons-lang3-3.1.jar`文件粘贴到您的**libs**文件夹

并像这样使用它

```
String formatedjsonstring=StringEscapeUtils.unescapeJava(yourjsonstring); 
```

不要让事情变得复杂..使用这个库，它会自动对字符进行转义

在你 java 转义字符后，像这样创建 Json 对象

```
JSONObject obj=new JSONObject(formatedjsonstring);
JSONArray jsonArray=obj.getJSONArray("definitions"); 
```

比使用 for 循环来解析那些 json 对象

```
for(int i=0;i<jsonArray.length();i++)
{
JSONObject obj=jsonArray.getJSONObject(i);
String id=obj.getString("id");
} 
```

# redirect - 用户登录后重定向

> ID：15260439
> 
> 赞同：17
> 
> 时间：2013-03-06T23:46:42.027
> 
> 标签：redirect, login, angularjs, angularjs-routing, angularjs-authentication

我对 Angular 还是很陌生，现在我只是想设置我所有的路线并按照我的意愿工作。

**设置：** 当用户导航到某些页面（`/settings`在本例中）时，应用程序应检查是否有用户已登录。如果有，则照常继续。否则，用户应该转到登录页面 ( `/login`)。

**我想要什么：** 用户成功登录后，他们应该转到他们最初尝试访问的页面（`/settings`）

**我的问题：** 是否有一种“角度方式”来记住用户试图去哪里？

**相关代码：**

应用程序.js

```
 .when('/settings', {
      templateUrl: '/views/auth/settings.html',
      controller: 'SettingsCtrl',
      resolve: {
        currentUser: function($q, $location, Auth) {
          var deferred = $q.defer();

          var noUser = function() {
            //remember where the user was trying to go
            $location.path("/login")
          };

          Auth.checkLogin(function() {
            if (Auth.currentUser()) {
              deferred.resolve(Auth.currentUser());
            } else {
              deferred.reject(noUser());
            }
          });

          return deferred.promise;
        }
      }
    }) 
```

登录.js

```
 $scope.submit = function() {
    if(!$scope.logInForm.$invalid) {
      Auth.login($scope.login, $scope.password, $scope.remember_me)
      //go to the page the user was trying to get to
    }
  }; 
```

非常感谢 John Lindquist[的视频](http://www.youtube.com/watch?v=P6KITGRQujQ)让我走到了这一步。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-07T01:42:10.720

首先，您不想将用户重定向到登录页面。

单页 Web 应用程序中的理想流程如下：

1.  用户访问网站。网站在特定路径（例如 /profile/edit）回复 Angular 应用程序的静态资产。

2.  控制器（对于给定的路由）使用 $http、$route 或其他机制（例如，通过 GET 到 /api/v1 的已登录用户帐户的详细信息预先填写编辑配置文件表单）调用 API /用户/个人资料）

3.  如果/当客户端从 API 收到 401 时，显示一个登录模式，并重放 API 调用。

4.  API 调用成功（在这种情况下，用户可以查看其帐户的预填编辑配置文件表单。）

你怎么能做到#3？答案是 $http**响应拦截器**。

> 出于全局错误处理、身份验证或接收响应的任何类型的同步或异步预处理的目的，希望能够在 http 请求的响应被移交给启动这些请求的应用程序代码之前拦截它们。**响应拦截器**利用Promise api 来满足同步和异步预处理的需求。

[http://docs.angularjs.org/api/ng.$http](http://docs.angularjs.org/api/ng.%24http)

既然我们知道理想的用户体验应该是什么，我们该怎么做呢？

这里有一个例子： [http ://witoldsz.github.com/angular-http-auth/](http://witoldsz.github.com/angular-http-auth/)

该示例基于这篇文章：

[http://www.espeo.pl/2012/02/26/authentication-in-angularjs-application](http://www.espeo.pl/2012/02/26/authentication-in-angularjs-application)

祝你好运，快乐 Angularing！

# java - Sun JDK 和 Open JDK 的区别

> ID：15260446
> 
> 赞同：3
> 
> 时间：2013-03-06T23:47:07.050
> 
> 标签：java, jasper-reports, openjdk, sun

我遇到如下错误：

> 线程“Thread-1”java.lang.IncompatibleClassChangeError 中的异常：找到类 com.sun.image.codec.jpeg.JPEGImageEncoder，但需要接口

我已经使用*Sun JDK*构建了我的 JAR ，并且我在*OpenJDK*上运行。我有点被这种环境困住了。

有没有简单的方法解决这个问题？我必须在*OpenJDK上编译**和*运行代码吗？

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:24:21.657

从表面上看，Jasper Reports 正在深入研究并使用它不应该使用的内部类/方法。这显然不适用于所有平台……这不足为奇，因为 Sun / Oracle 特别声明这样做可能会破坏。

你该怎么办？

*   检查[支持的平台数据表](http://www.jaspersoft.com/download/supported-platforms-datasheet)。我注意到它列出了 OpenJDK 6，但没有列出 OpenJDK 7。也许您应该坚持使用 JasperSoft 支持的平台。

*   我发现[这个页面](http://community.jaspersoft.com/jasperreports-library/issues/2950-0)似乎在谈论这个问题......或类似的东西......并提供了一种解决方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T23:52:47.543

`com.sun.image.codec.jpeg.JPEGImageEncoder`顾名思义，它是一个特定于 Sun 的包，因此不能保证（实际上极不可能）任何其他 JDK\JRE 都会提供该类。你是直接用的吗？如果是这样，您将应用程序限制为仅限 Sun 的 JVM。*

# java - 以简单的方式调用 MyAdapter？

> ID：15260450
> 
> 赞同：1
> 
> 时间：2013-03-06T23:47:25.340
> 
> 标签：java, android, android-adapter

我想为我所在城市的公共汽车制作一个时间表应用程序。但是，我的代码太长了。我有一`MyAdapter`堂课，但由于每条总线需要不同的适配器，我的代码开始看起来像这样：

```
MyAdapter list1 = new MyAdapter<String>(this,
        android.R.layout.simple_list_item_1, R.id.timelist, List1);
MyAdapter list2 = new MyAdapter<String>(this,
        android.R.layout.simple_list_item_1, R.id.timelist, List2);
MyAdapter list3 = new MyAdapter<String>(this,
        android.R.layout.simple_list_item_1, R.id.timelist, List3);
// ... 
```

对于每一个我都有：

```
setAdapter(listx); 
```

在常规的地方。有没有更简单的方法来编写`MyAdapter`需要更少复制粘贴的对象？（我不能称之为代码。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:24:05.080

您可能想使用[`ExpandableListView`](http://developer.android.com/reference/android/widget/ExpandableListView.html)“总线”来分组。所以您只需要管理一个适配器。

# objective-c - 为什么我的函数不改变我的外部变量的值？

> ID：15260451
> 
> 赞同：0
> 
> 时间：2013-03-06T23:47:31.847
> 
> 标签：objective-c, function, xcode4.6

我正在使用 Xcode 4.6 版。在我正在为 iPhone 和 iPad 制作的应用程序中，我制作了一个名为 dealCard 的函数。这里是：

```
- (void)dealCard : (UIImageView *)cardImage : (int)card : (int)suit : (BOOL)aceBool : (int) cardValue : (int)total
{
suit = arc4random() % 4;
card = arc4random() % 13;
if (suit == 0)
{
    //set images

if (suit == 1)
{
   //set images
}

if (suit == 2)
{
    //set images
}

if (suit == 3)
{
    //set images
}
if (card < 10 && card != 0)
{
    NSLog(@"Setting cardValue");
    cardValue = card+1;
}
else if (card != 0)
{
    NSLog(@"Setting cardValue");
    cardValue = 10;
}
else
{
    NSLog(@"Setting cardValue");
    aceBool = YES;
    if (total + 11 <= 21)
    {
        cardValue = 11;
    }
    else
    {
        cardValue = 1;
    }

}
total = total + cardValue;
NSLog(@"Total = %d cardValue = %d",total,cardValue);
NSLog(@"playerTotal = %d playerCard3Value = %d",playerTotal,playerCard3Value);
} 
```

在我放的页面下方：

```
[self dealCard: playerCard3Image : playerCard3 : playerSuit3 : playerCard3ace : playerCard3Value : playerTotal]; 
```

我的问题出在cardValue 中。输出显示“Setting cardValue”，然后实例变量编号都正确，但其他两个错误。playerTotal 读取这张牌发出前的总数，而 playerCard3Value 读取 0。为了给你一些上下文，这个函数不是在发出第一张或第二张牌时调用，而是在第三张及以后的时候调用。前两个不在函数中处理。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:02:53.080

面向对象编程是一件美好的事情。快速编码，向您展示它是如何工作的......

```
//
//  PlayingCard.h
//

#import <Foundation/Foundation.h>

@interface PlayingCard : NSObject

- (id)initWithSuit:(NSInteger)suit value:(NSInteger)value;
- (BOOL)isAce;
- (BOOL)isFace;

@end

//
//  PlayingCard.m
//

#import "PlayingCard.h"

@interface PlayingCard ()
@property(nonatomic, assign) NSInteger suit;
@property(nonatomic, assign) NSInteger value;

@end

@implementation PlayingCard

- (id)initWithSuit:(NSInteger)suit value:(NSInteger)value {
    self = [self init];
    if (self) {
        _suit = suit;
        _value = value;
    }
    return self;
}

- (BOOL)isAce {
    return self.value == 0;
}

- (BOOL)isFace {
    return self.value > 10;
}

- (NSString *)suitName {
    switch (self.suit) {
        case 0:
            return @"spades";
            break;
        case 1:
            return @"diamonds";
            break;
        case 2:
            return @"clubs";
            break;
        case 3:
            return @"hearts";
            break;

        default:
            return @"";
            break;
    }
}

// so it prints nicely.  you should consider making the suits enums
- (NSString *)description {
    return [NSString stringWithFormat:@"%@: suit:%@, value:%d", [super description], [self suitName], self.value];
}

@end

//
//  CardDeck.h
//

#import <Foundation/Foundation.h>

@class PlayingCard;

@interface CardDeck : NSObject

+ (id)cardDeck;
- (void)shuffle;
- (NSUInteger)count;
- (PlayingCard *)dealOne;

@end

//
//  CardDeck.m
//

#import "CardDeck.h"
#import "PlayingCard.h"

@interface CardDeck ()
@property(nonatomic,strong) NSMutableArray *cards;
@end

@implementation CardDeck

+ (id)cardDeck {

    CardDeck *deck = [[self alloc] init];
    for (NSInteger suit = 0; suit < 4; suit++) {
        for (NSInteger value = 0; value < 13; value++) {
            PlayingCard *card = [[PlayingCard alloc] initWithSuit:suit value:value];
            [deck.cards addObject:card];
        }
    }
    return deck;
}

- (id)init {
    self = [super init];
    if (self) {
        _cards = [NSMutableArray array];
    }
    return self;
}

- (void)shuffle {
    NSMutableArray *shuffledCards = [NSMutableArray array];
    for (int i=0; i<52; i++) {
        int randomIndex = arc4random_uniform(52-i);
        [shuffledCards addObject:[self.cards objectAtIndex:randomIndex]];
        [self.cards removeObjectAtIndex:randomIndex];
    }
    self.cards = shuffledCards;
}

- (NSUInteger)count {
    return self.cards.count;
}

- (PlayingCard *)dealOne {

    PlayingCard *card = [self.cards lastObject];
    [self.cards removeLastObject];
    return card;
}

@end 
```

像这样称呼它...

```
CardDeck *deck = [CardDeck cardDeck];
// try it with and without shuffle
[deck shuffle];
while (deck.count) {
    PlayingCard *card = [deck dealOne];
    NSLog(@"%@", card);
} 
```

# wcf-client - 在 App.Config 中设置的 WCF 客户端证书

> ID：15260455
> 
> 赞同：2
> 
> 时间：2013-03-06T23:48:03.850
> 
> 标签：wcf-client, x509certificate, client-certificates

我正在与公开 Java Web 服务的供应商合作。我创建了一个 WCF 客户端来使用他们的服务，但是客户端证书存在一些问题。供应商声称我们的请求不包含客户端证书并拒绝我们的请求。我不是 100% 相信这是在我们这边，但想确保我没有遗漏证书配置中的任何内容。

**应用程序配置**

```
 <system.serviceModel>
    <behaviors>
      <endpointBehaviors>
        <behavior name="NewBehavior">
          <clientCredentials>
            <clientCertificate findValue="[CLIENT_CERT_NAME]" storeLocation="LocalMachine" storeName="My" x509FindType="FindBySubjectName" />
          </clientCredentials>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <diagnostics>
      <messageLogging
           logEntireMessage="true"
           logMalformedMessages="false"
           logMessagesAtServiceLevel="true"
           logMessagesAtTransportLevel="false"
           maxMessagesToLog="3000"
           maxSizeOfMessageToLog="2000"/>
    </diagnostics>
    <bindings>
      <basicHttpBinding>
        <binding name="VendServiceBinding" closeTimeout="00:01:00" openTimeout="00:01:00"
            receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
            bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
            maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="Transport">
            <transport clientCredentialType="None" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>
    <client>
      <endpoint address="https://[SERVICE_URL]/Vend/VendService"
          binding="basicHttpBinding" bindingConfiguration="VendServiceBinding"
          contract="VendService" name="VendService" behaviorConfiguration="NewBehavior" />
    </client>
  </system.serviceModel> 
```

**客户端.cs**

```
VendServiceClient client = new VendServiceClient("VendService");
createMemberResponse response = new createMemberResponse();
createMember member = new createMember();

// Check Certificate Just Before Executing
string certCheck = Environment.NewLine + "Check Certificate Just Before Executing - ClientCredentials Name: " + client.ClientCredentials.ClientCertificate.Certificate.GetNameInfo(
    System.Security.Cryptography.X509Certificates.X509NameType.SimpleName
    , false) + Environment.NewLine;

member = GetCreateMember(reader, siteConfig, recordID);
response = client.createMember(member);
returnStatus = response.VendHeader.ReturnStatus;
DetailedErrorMessage = response.VendBody.Vend.DetailedErrorMessage; 
```

在执行过程中，我可以检查“certCheck”并查看证书的名称，所以我知道我是从证书存储中取出它的。我还假设这意味着当我向“client.createMember()”发出请求时应该附加证书。我得到的错误是通过对供应商正在执行的证书的一些自定义验证......也许问题出在他们的验证上？？？

当我安装证书（.pfx）时，我需要输入密码，我是否也需要这个密码才能使用证书？我没有在配置或代码中的任何地方添加它。

关于如何确认我的请求包含客户证书的任何想法？

[更新] 我终于能够运行 Fiddler，我期待在标题中看到一些证书详细信息，但这就是我所拥有的。这是否意味着我没有发送证书？

```
<?xml version="1.0" encoding="UTF-8"?>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Header>
      <ActivityId xmlns="http://schemas.microsoft.com/2004/09/ServiceModel/Diagnostics" CorrelationId="10afd012-1130-42ea-aaa8-281c9fab723a">395f129c-fd59-48b1-a19d-387bbffe1465</ActivityId>
   </s:Header>
   <s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <createMember xmlns="http://[SERVICE_URL]/Vend/VendService">
         <createMember xmlns="">
            <VendHeader> 
```

[更新]我有提琴手工作，看着“隧道到”行我可以看到服务器的证书，但我自己的客户端证书没有。还是一头雾水，应该是这里吧？

```
HTTP/1.1 200 Connection Established
FiddlerGateway: Direct
StartTime: 10:37:08.575
Connection: close

Encrypted HTTPS traffic flows through this CONNECT tunnel. HTTPS Decryption is enabled in Fiddler, so decrypted sessions running in this tunnel will be shown in the Web Sessions list.

Secure Protocol: Tls
Cipher: Rc4 128bits
Hash Algorithm: Md5 128bits
Key Exchange: RsaKeyX 2048bits

== Server Certificate ========== 
```

# windows-8 - VB6 数据网格在 Windows 8 中为空或不可见

> ID：15260457
> 
> 赞同：0
> 
> 时间：2013-03-06T23:48:07.420
> 
> 标签：windows-8, datagrid, vb6

在 Windows 8 上，我遇到以下问题：

在我客户的旧 VB6 应用程序中，有一个有 3 行的数据网格。这些行以 3 种不同的黄色“阴影”显示。一切都很好，直到您将数据加载到数据网格中。行变为灰色并且不显示任何数据。

其中，使用了以下参考： - Microsoft DataGrid Control 6.0 (OLEDB) - Microsoft DataList Control 6.0 (OLEDB) - Microsoft FlexGrid Control 6.0

在 Windows 7 下一切正常。我应该提一下，我们总是在 Windows 7 中使用经典主题。我在 Windows 8 下尝试了一些经典风格的主题，但没有一个能解决问题。我还尝试从 W7 导入“HKCU\控制面板\颜色”注册表项。我实际上不认为它与主题相关。此外，“c:\windows\syswow64”中存在 msflxgrd.ocx 和 msdatgrd.ocx

有什么建议么？VB6 应该仍然受支持，所以我还没有放弃希望。

# mysql - 跨表移动行的有效方法？

> ID：15260462
> 
> 赞同：-1
> 
> 时间：2013-03-06T23:48:41.737
> 
> 标签：mysql, database-design

这是一个有点长的问题，因为我想解释问题的所有细节。

## 系统描述

我们有一个来自外部系统的传入消息队列。消息会立即存储在例如 INBOX 表中。很少有线程工作者从表中获取作业块（首先用 UPDATE 标记一些消息，然后 SELECT 标记的消息）。工作人员不处理消息，他们根据消息命令将它们分派到不同的内部组件（称为“处理器”）。

每条消息都包含几个文本字段（最长的是 200 个 varchars）、几个 id 和一些时间戳等；总共 10-15 列。

每个处理消息的内部组件（即处理器）的工作方式不同。有些会立即处理消息，有些会触发一些长时间的操作，甚至通过 HTTP 与系统的其他部分进行通信。换句话说，我们不能只处理来自收件箱的消息，然后将其删除。我们必须使用该消息一段时间（异步任务）。

尽管如此，系统中的处理器并不多，最多 10 个。

消息都是内部的，即用户浏览它们、分页等并不重要。用户可能需要处理过的相关消息的列表，但这不是关键任务功能，因此它不必很快。有时可能会删除一些无效的消息。

重要的是要强调预期的流量可能会非常高——我们不希望因为糟糕的数据库设计而出现瓶颈。数据库是MySql。

# 决定

其中一个决定是不要为所有消息提供一个大表，其中有一些标志列将指示各种消息状态。想法是每个处理器都有表；并移动消息。例如，收到的消息将存储在 INBOX 中，然后由调度程序移动到某个例如 PROCESSOR_1 表，最后移动到 ARCHIVE 表。此类动作不应超过 2 个。W

在处理状态下，我们确实允许使用标志来指示特定于处理的状态（如果有）。换句话说，PROCESSOR_X 表可以跟踪消息的状态；因为当前正在处理的消息的数量将大大减少。

这样做的原因是不要对所有事情都使用一个 BIG 表。

# 问题

由于我们正在四处移动消息，我想知道这对于大容量来说有多昂贵。以下哪种情况更好：

(A) 将所有类似的表分开，就像解释的那样，并移动完整的消息行，例如从收件箱中读取完整的行，写入处理器表（带有一些附加列），从收件箱中删除。

或者

(B) 为了防止内容的物理移动，如何拥有一个只存储内容（并且仍然不是状态）的大 MESSAGES 表。如上所述，我们仍然有其他表，但它们只包含消息的 ID 和其他列。所以现在，当消息即将移动时，我们在物理上移动的数据要少得多——只是 ID。消息的其余部分始终未修改地保留在 MESSAGE 表中。

换句话说，一个小表和一个大表之间的 sql join 是否有惩罚？

感谢您的耐心等待，希望我足够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:21:06.570

解决方案 B 原因如下：

1.  移动大量数据不会占用内存
2.  I/O 操作更少
3.  数据库碎片更少

在表格列中使用标志：布尔字段（读取、存档、删除...）并适当地设置它们。另一个优化是在服务器不忙时推迟执行冗长/繁重的任务。这种优化不能由操作系统或数据库完成，因为它需要业务意识。

# java - Android应用程序在图库中保存和存储图像？

> ID：15260463
> 
> 赞同：-2
> 
> 时间：2013-03-06T23:48:44.043
> 
> 标签：java, android, camera, gallery

如何将相机通过我的应用程序拍摄的照片保存到设备的图库中？

问题是应用程序目前在拍照后崩溃，并且只能在指定的目录中保存单个图像。我是否正确地假设应用程序崩溃是因为它不知道保存文件后该做什么？我该如何解决这个问题，return 语句之后的任何内容都是“无法访问的代码”。

编码：

```
public class Activity_Camera extends Activity implements View.OnClickListener {

        public static final int cameraData = 1;

        ImageButton ib;
        ImageView iv;
        Intent i;
        Bitmap bmp;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_camera);
                initialise();
        }

        private void initialise() {
                iv = (ImageView) findViewById(R.id.ivPicReturn);
                ib = (ImageButton) findViewById(R.id.ibTakePic);

                ib.setOnClickListener(this);
        }

        public void onClick(View v) {
                switch (v.getId()) {
                case R.id.ibTakePic:
                        i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                        //
                        i.putExtra(MediaStore.EXTRA_OUTPUT, getOutputMediaFileUri());              
                        //
                        startActivityForResult(i, cameraData);
                        break;
                }
        }
        //
        private Uri getOutputMediaFileUri() {
            File imagesFolder = new File(Environment.getExternalStorageDirectory(), "DCIM/TradeIt");
            imagesFolder.mkdirs();  
            File image = new File(imagesFolder, "image.jpg");
            Uri uriSavedImage = Uri.fromFile(image);
            return uriSavedImage;

        }
        //
        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
                super.onActivityResult(requestCode, resultCode, data);
                if (resultCode == RESULT_OK) {
                        Bundle extras = data.getExtras();
                        bmp = (Bitmap) extras.get("data");
                        iv.setImageBitmap(bmp);

                }

        }

} 
```

日志猫

```
W/dalvikvm(919): threadid=1: thread exiting with uncaught exception (group=0x41d7d930) 
03-07 00:00:24.704: E/AndroidRuntime(919): FATAL EXCEPTION: main 
03-07 00:00:24.704: E/AndroidRuntime(919): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=null} to activity {com.hyperlocal.tradeit/com.hyperlocal.tradeit.Activity_Camera}: java.lang.NullPointerException 
03-07 00:00:24.704: E/AndroidRuntime(919): at android.app.ActivityThread.deliverResults(ActivityThread.java:3319) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:10:12.257

您必须增加一个变量并将其保存并将其添加到您的文件名中，以便在您获取 Uri 时制作更多图片，并且要让图片显示在您的图库中，请执行以下操作：

```
 sendBroadcast(new Intent(
                Intent.ACTION_MEDIA_MOUNTED,
                Uri.parse("file://" +    Environment.getExternalStorageDirectory()))); 
```

如果你拍照后不发送这样的广播，画廊将不会更新，直到下次手机打开

# php - php变量数据输出空白

> ID：15260469
> 
> 赞同：1
> 
> 时间：2013-03-06T23:49:11.023
> 
> 标签：php, sql-server

我有一个包含变量“$vid”的 php 页面（“index.php”）。

我还有一个包含在“index.php”中的包含文件（“vars.php”），它在填充时将 $video 设置为 $vid。“vars.php”然后包含在一个 php 文件（“cta_settings.php”）中，当我的 flash swf 调用该文件时，它会查询我的 sql server 数据库以检索列表并形成一个 XML DomDocument。

Vars.php 包含以下内容，广告包含在设置“$video”变量的页面中：

变量.php

```
<?php
if(isset($vid))
{   
    $video = $vid;
    echo "CTA Vars Video: " . $video;   
}
?> 
```

cta_settings.php：

```
<?php
include("vars.php");

echo "Settings Video Number: " . $video;
?> 
```

echo 显然存在变量，因为在页面上可以看到该值。

我的问题是在 cta_settings.php 中的变量“$video”是空白的。我使用了萤火虫，在响应下的 NET 面板中，我看到的只是“设置视频编号：”。我还尝试创建 XML 文件并让 swf 调用它。这样做时，文件被写入，但我需要的变量在它们的节点中是空白的。我认为这与变量的输出有关，因为我可以回显它但在萤火虫响应面板中看不到它。

我尝试过 strval()、更改标题类型（文本/纯文本）、全局变量，甚至会话。我花了 3 天的时间试图弄清楚这一点。任何帮助将不胜感激。

谢谢

# javascript - IE8 上的 JavaScript / Jquery 点击事件无法正常工作

> ID：15260472
> 
> 赞同：0
> 
> 时间：2013-03-06T23:49:20.680
> 
> 标签：javascript, internet-explorer-8, click, jquery

我是网络开发的新手。

我在项目的按钮上遇到了一些问题。这行代码适用于所有网络浏览器，IE8 除外：

```
$("#SampleBtn").live("click", function(){
     console.log('It works!');
}); 
```

单击时它没有响应应有的方式。在示例中，它应该打印“It works！”，显然没有任何反应。但是，如果用户单击按钮而不松开（keydown）超过 1 秒，它就可以工作。

我不确定问题出在哪里。它与 .live 或 click 事件有关吗？

任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:59:53.560

IE8 有很多问题，但这绝对可以。我最好的猜测是 console.log 调用失败（因为我在评论中提到的原因）。

尝试更改`console.log`为an `alert`，看看它是否有效。

也尝试使用[on 的委托版本](http://api.jquery.com/on/)

```
$(document).on('click', '#SampleBtn', function(){
     console.log('It works!');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T01:55:17.113

我们发现在本地，按钮没有问题，但是，当应用程序在我们的 node.js 服务器中运行时，问题就出现了。这导致了 IE8 上的错误：

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='image.png',sizingMethod='scale'); 
```

似乎预加载器导致自定义按钮图像的响应延迟。也许，在获取图像之前需要一些时间。无论如何，我们可以通过更改为：

```
 background-image: url('images.png'); 
```

但是感谢大家花时间分享您的想法。:)

# java - Java Swing - 如何更改 JPanel 的 TitledBorder 上的字体大小？

> ID：15260484
> 
> 赞同：6
> 
> 时间：2013-03-06T23:49:59.543
> 
> 标签：java, swing, border, title, font-size

我需要能够以编程方式更改 Swing 应用程序中所有组件的字体大小。我无法以通常的方式（使用 UIManager 或 putClientProperty）执行此操作，因为我正在使用 Nimbus 外观，因此我使用以下方法来分别增加我的应用程序中每个组件的字体大小......

```
private void enlargeFont(java.awt.Component c, float factor) {
    c.setFont(c.getFont().deriveFont(c.getFont().getSize() * factor));
} 
```

我遇到的问题是我在我的 JPanel 上使用了 TitledBorder 并且（可以预见地）将我的 JPanel 传递给上述方法不会调整 JPanel 的边框标题的大小。

那么有什么办法可以改变边框上的字体大小吗？（如果我能得到边框的文本，我可以创建一个新的 TitledBorder （使用更大的字体），然后用 JPanel 的 setBorder() 方法应用它......但似乎不可能得到边框文本（？）。

有人对如何解决有任何建议吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-07T00:19:48.593

以下对我有用：

```
 private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    ((javax.swing.border.TitledBorder) jPanel1.getBorder()).
        setTitleFont(new Font("Arial", Font.ITALIC, 14));

    jPanel1.repaint();
} 
```

我已经在 NetBeans 6.9.1 中对此进行了测试![在此处输入图像描述](../Images/063b90fd31d13264aea9069be3ad0253.png)

# javascript - 如何从a点到b点动画？

> ID：15260485
> 
> 赞同：0
> 
> 时间：2013-03-06T23:50:06.417
> 
> 标签：javascript, html, animation, jquery-animate

如何使用纯 JavaScript 将图片从 a 点动画到 b 点。如果没有，我可以使用除 jQuery 之外的任何框架吗？这是我到目前为止所拥有的[http://jsfiddle.net/kmHZt/10/](http://bit.ly/YGAn2T)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:46:11.850

除了 Alfred 的回答之外，您还应该查看 CSS 动画（而不是过渡）。

这是一个很好的教程：[https ://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_animations](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_animations)

Css 动画/过渡结合使用 javascript 添加类名应该就足够了，除非您要为很多东西设置动画，那么我建议使用[HTML 5 Canvas](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CE4QFjAA&url=http://www.w3schools.com/html/html5_canvas.asp&ei=dRs4UerCMIyalQWiroCACw&usg=AFQjCNGf087N828N1tTcJCWSr6R5HgvXyg&sig2=L1v916Dm5xcmAm-fh08ZIg&bvm=bv.43287494,d.dGI)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T23:55:49.473

您可以结合使用 JavaScript 和 CSS 过渡：

CSS：

```
.slide-elem {
    position: relative;
    -webkit-transition: 0.5s left;
    -moz-transition: 0.5s left;
    -o-transition: 0.5s left;
    transition: 0.5s left;
}
.slide-elem.triggered {
    left: 50px; // Your animation here
} 
```

JS：

```
document.querySelector(".slide-elem").className += " triggered"; 
```

当然，您可以自定义所有这些来做任何您想做的事情。更多关于 CSS 过渡：[http ://www.w3schools.com/css3/css3_transitions.asp](http://www.w3schools.com/css3/css3_transitions.asp)

# backbone.js - Marionette.js appRouter 未在应用启动时触发

> ID：15260488
> 
> 赞同：2
> 
> 时间：2013-03-06T23:50:17.597
> 
> 标签：backbone.js, marionette

我目前正在将 Marionette 集成到现有的 Backbone 应用程序中。

我有一个现有的 Backbone 路由器，但我正在尝试实现一个 Marionette.AppRouter 来代替它。问题是，在新 Marionette 路由器应该获取的 URL 上的“硬刷新”上，它不会触发。如果我导航到另一个页面，然后返回到硬刷新时未触发的 url，它会正确触发。在我导航到另一个页面并再次返回*后，*我无法弄清楚它为什么会起作用。这是我的代码示例：

```
TestApp = new Backbone.Marionette.Application();
    var testAppController = {
        testLoadPage: function(){
            console.log('testLoadPage Fired'); //<---- DOES NOT FIRE ON HARD REFRESH
        }
    };
    TestAppRouter = Backbone.Marionette.AppRouter.extend({          
        appRoutes: {
            "!/:var/page": "testLoadPage",
            "!/:var/page/*path": "testLoadPage"
        },
        controller: testAppController,
        route: function(route, name, callback) {
            return Backbone.Router.prototype.route.call(this, route, name, function() {
                if (!callback) callback = this[name];
                this.preRoute();
                this.trigger.apply(this, ['beforeroute:' + name].concat(_.toArray(arguments)));
                callback.apply(this, arguments);
            });
        },
        preRoute: function() {
            app.showLoader(name, arguments);
        }
    });
    TestApp.addRegions({
        contentContainer: '#container'
    });
    TestApp.addInitializer(function(options){
        new TestAppRouter();
    });
    TestApp.start(); 
```

当我加载页面时：`http://mysamplesite.com/#!/123/page`直接，Marionette 路由器不会按应有的方式触发。

但是，如果我加载 page:`http://mysamplesite.com/#!/123`然后导航到`http://mysamplesite.com/#!/123/page`，Marionette 路由器会正确触发。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T04:07:50.180

您`Backbone.history.start()`在创建路由器实例后调用了吗？如果没有，您需要这样做。在你的应用程序中调用它之前，路由器不会运行，并且在至少一个路由被实例化之前你不能调用它。我通常这样做：

```
 TestApp.on("initialize:after", function(){
  if (Backbone.history){ Backbone.history.start(); }
}); 
```

hth

# jquery - 如果父元素也有鼠标悬停，如何让子元素触发鼠标悬停事件？

> ID：15260493
> 
> 赞同：5
> 
> 时间：2013-03-06T23:50:26.820
> 
> 标签：jquery, html-table, hover, mouseevent, mouseover

我的页面上有一个“帮助”区域，只要用户将鼠标悬停在表格上，就应该更新帮助信息。问题出在表格中，我在每行的 1 个单元格中有一个复选框，当用户将鼠标悬停在该复选框上时，我希望复选框的 mouseover 事件覆盖表格事件并显示复选框帮助。目前表格鼠标悬停工作正常，但当我将鼠标悬停在复选框上时没有任何反应。

```
<table class="myTable">
   <tr>
      <th>Col1</th>
      <th>Col2</th>
   </tr>
   <tr>
      <td><input class="myCheckbox" type="checkbox" /></td>
      <td>Cell 2</td>
   </tr>
   <tr>
      <td><input class="myCheckbox" type="checkbox" /></td>
      <td>Cell 3</td>
   </tr>
</table>

<div class="myHelpMenu"></div>

$('.myCheckbox').mouseover(function() {
    $('.myHelpMenu').html("this is my checkbox help");
});

$('.myTable').mouseover(function() {
   $('.myHelpMenu').html("this is my tables help");
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T00:02:12.413

`**[LIVE DEMO](http://jsbin.com/esesov/1/edit)**`

`mouseover`这是一种使用悬停的当前`target`元素检测的好方法，而不是使用纯 JS 来检索`.tagName`您可以创建一个*消息列表*对象并检索所需的对象。

```
$('.myTable').mouseover(function( e ) {

  var tag = e.target.tagName;

  var messages = {
    "INPUT" : "this is my checkbox help",
    "TABLE" : "this is my tables help"
  };

  $('.myHelpMenu').text( messages[tag] );

}); 
```

* * *

如果您想清除您的信息消息，请执行以下操作：

```
$('.myTable').on('mouseover mouseleave',function( e ) {

  var tag = e.target.tagName;

  var messages = {
    "INPUT" : "this is my checkbox help",
    "TABLE" : "this is my tables help"
  };

  $('.myHelpMenu').text( messages[tag] );

  if(e.type=='mouseleave')
    $('.myHelpMenu').empty();

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T23:56:53.723

听起来您想让复选框的鼠标悬停停止传播到表格？

如果是这样，这应该这样做。

```
$('.myCheckbox').mouseover(function(e) {
    $('.myHelpMenu').html("this is my checkbox help");
    e.stopPropagation();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T23:55:02.230

由于`mouseover`for table 是针对整个区域的，因此只需调用即可`mouseenter`。`mouseout`然后，您可以在他们离开餐桌后添加一个重新更新。

# c++ - 如何在堆栈展开时调用函数？

> ID：15260497
> 
> 赞同：2
> 
> 时间：2013-03-06T23:50:55.090
> 
> 标签：c++, boost

我想写的是

```
void foo()
{
    int a = 5;
    ExecuteOnUnwind eou(bind(&cleanupFunc, a));
} 
```

当函数返回或抛出`cleanupFunc(a)`异常时调用它。是否有一些可用的设施可以为我做这件事？我无法在谷歌上找到正确的短语，但似乎可能有一些东西可以做到这一点。如果没有，我很快在下面整理了一个解决方案。奇怪的是，它似乎不能在发布模式下工作，但在 vc10 上的调试中工作 - 我如何调整实现以使其在两者上一致地工作而不冒额外调用临时文件的风险？

编辑：修复涉及使用 shared_ptr; 也减轻了对临时破坏的任何担忧。新代码如下

```
template <typename T>
struct ExecuteOnUnwindHelper
{   
    ExecuteOnUnwindHelper(const T & _functor) : mFunctor(_functor)
    {
    }

    ~ExecuteOnUnwindHelper()
    {
        mFunctor();
    }

    const T & mFunctor;
};

template <typename T>
boost::shared_ptr<ExecuteOnUnwindHelper<T>> ExecuteOnUnwind(const T & _functor)
{
    return boost::shared_ptr<ExecuteOnUnwindHelper<T>>(new ExecuteOnUnwindHelper<T>(_functor));
}

void cleanupFunc(int a)
{
    wcout << L"cleanup" << endl;
}

void foo()
{
    int a = 5;
    auto eou = ExecuteOnUnwind(boost::bind(&cleanupFunc, 5));
}

int main()
{
    foo();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:43:26.990

编译器必须以某种方式优化堆栈上变量的创建，因为它认为它没有被使用。也许它只是内联对函数的调用并跳过创建/销毁部分（我会说这是最有可能的）。它认为保留了全局语义，但实际上它不是您的示例所示的安全优化。

我认为这是一个错误的优化，因为它显然改变了高级语义。用各种编译器测试会很有趣。当我在家里有机会时，我会尝试使用 VS2012。

无论如何，要强制它通过创建/销毁序列，只需使用 a `boost::shared_ptr`，它会负责创建对象并在对象超出范围时销毁它，无论是通过`return`语句还是通过异常抛出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:41:38.297

最简单的解决方案是将所需的功能放入类型的析构函数中。在您的情况下，不需要自动/智能指针，堆栈就足够了，并且可能会消除您可能遇到的编译器问题。

```
class ExecuteOnUnwind
{
public:
~ExecuteOnUnwind()
{
/** Do something */
}

int data;

};

void foo()
{
  ExecuteOnUnwind runOnExit;

/** Functions code here */
runOnExit.data = 5;

} 
```

如果这不起作用/不起作用，那么您可以禁用围绕受影响代码（即析构函数）的优化。：

```
#pragma optimize( "", off )
...
#pragma optimize( "", on ) 
```

# java - UndoManager 手动添加 UndoableEdit 以使其与 JTabbedPane 一起使用

> ID：15260498
> 
> 赞同：1
> 
> 时间：2013-03-06T23:51:03.280
> 
> 标签：java, undo, jtabbedpane, undo-redo

编辑：请看帖子的末尾...

首先，请原谅我的英语不好...

我正在尝试用 Java 制作一个文本编辑器，使用 JTabbedPane 来编辑多个文件。在这种情况下，我在 Internet 上没有找到使用 UndoManager 的好帮助。

所以我尝试了一些东西，但它似乎不起作用。

事实上，我试图通过在更改选项卡时收听来保存所有 UndoableEdit。当我更改选项卡时，我会为之前打开的选项卡保存 UndoableEdits，然后清理 UndoManager 的编辑，最后，我恢复新活动选项卡的 UndoableEdits。

我遇到的问题是，当我调用更新撤消/重做按钮状态的函数时，canUndo()/canRedo() 方法总是返回 false，但列表中有编辑...而且我不知道为什么发生这种情况，我不明白我忘了做什么......

显然，尽管 UndoableEdits 存在于“编辑”向量中，但 UndoManager 并不关心这一点。当我试图强制启用按钮时，抛出异常......（javax.swing.undo.CannotUndoException / javax.swing.undo.CannotRedoException）

请问你能帮帮我吗 ？

如果您需要，请随时向我询问更多信息。

谢谢你。

我对 UndoManager 类的扩展：

```
public class UndoManagerPerso extends UndoManager
{
private static final long serialVersionUID = 8386145389216281754L;

public ArrayList<UndoableEdit> getEdits()
{
    ArrayList<UndoableEdit> listEdits = new ArrayList<UndoableEdit>();

    listEdits.addAll(this.edits);

    return listEdits;
}

public void setEdits(ArrayList<UndoableEdit> listEdits)
{
    for(UndoableEdit ue:listEdits)
    {
        this.addEdit(ue);
    }
}

} 
```

在我的主窗口类中调用这些函数：

```
 tabbedPane_editeur.addChangeListener(new ChangeListener()
    {
        @Override
        public void stateChanged(ChangeEvent e)
        {
            if (e.getSource() instanceof JTabbedPane)
            {
                JTabbedPane pane = (JTabbedPane) e.getSource();
                int previousTab = f_principale.this.activeTab;
                int activeTab = pane.getSelectedIndex();

                System.out.println("Selected paneNo : " + pane.getSelectedIndex() + ", précédent : " + previousTab);

                f_principale.this.listEditeurs.get(previousTab).setListEdits( f_principale.this.undoManager.getEdits());
                f_principale.this.undoManager.setEdits(f_principale.this.listEditeurs.get(activeTab).getListEdits());

                f_principale.this.activeTab = activeTab;

                f_principale.this.updateButtons();
            }
        }

    });
public void updateButtons()
 {
     this.btnUndo.setText(undoManager.getUndoPresentationName());
     this.btnRedo.setText(undoManager.getRedoPresentationName());
     this.btnUndo.setEnabled(undoManager.canUndo());//returns false
     this.btnRedo.setEnabled(undoManager.canRedo());//returns false
 } 
```

编辑：（1天后）我今天再次测试了UndoManader，我注意到了一些东西。事实上，手动插入 UndoableEdit 就可以了！但是编辑数量增加得太快以至于无法正常...

我很快就达到了默认限制（100），这就是为什么我昨天认为它根本不起作用：当达到限制时， canUndo() / canRedo() 似乎返回 false 并且当按钮被强制启用时，抛出异常。

也许当我切换标签时，发生了一些错误......但是什么？你有什么主意吗 ？我要去看看这个...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T01:52:30.657

您应该为每个选项卡创建一个单独的 UndoManager。

# objective-c - 基于文本标签和详细文本标签的行高 - 目标 c

> ID：15260501
> 
> 赞同：0
> 
> 时间：2013-03-06T23:51:06.227
> 
> 标签：objective-c, height, tablerow

您好我正在尝试根据 textlabel 和 detailtextlabel 动态更改我的行高。

以下是我的代码：

```
 NSString *title = [NSString stringWithFormat:@"%@%@%@",_note.committeeStaffName,@"  -  ",_note.dateCreated];
    cell.textLabel.text = title;
    cell.detailTextLabel.text = _note.note; 
```

我正在尝试根据 textLabel 和 detailTextLabel 调整表格的行高。textLabel 不超过一行。detailTextLabel 包含不同长度的大文本。我已经阅读了委托方法 heightForRowAtIndexPath 的几个示例，但没有一个明确说明在方法 heightForRowAtIndexPath 中必须做什么以及应该在 cellForRowAtIndexPath 中执行哪些代码。任何人都可以清楚地解释一下heightForRowAtIndexPath和cellForRowAtIndexPath这两种方法应该使用什么代码来根据包括textLabel和detailTextLabel的内容来调整表格行的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T13:14:05.913

我试图给你解决问题的想法。希望它会帮助你。

```
 -(CGFloat)getLabelHeightForIndex:(NSString*)strTemplate{
CGSize maximumSize = CGSizeMake(tblView.frame.size.width-50, 20000);
NSString* result  = [strTemplate stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
strTemplate = result;
CGSize labelHeighSize = [strTemplate sizeWithFont: [UIFont fontWithName:@"HelveticaNeue-Light" size:14.0] constrainedToSize:maximumSize lineBreakMode:NSLineBreakByWordWrapping];
return labelHeighSize.height; 
```

您应该使用上述方法来获取任何一个标签的高度，即 textLabel 或 defaulttestLabel 然后在 tableView 单元格的其他中心管理另一个视图。

# javascript - 卡在 Javascript 中的动画

> ID：15260504
> 
> 赞同：0
> 
> 时间：2013-03-06T23:51:15.177
> 
> 标签：javascript

我想为图片设置动画，这样当用户输入一个 X 和 Y 偏移值时，图片将从窗口的左上角开始，然后从左向右移动，最后将图片从上向下移动到最终位置一次一个像素。

这是我的代码，[http://jsfiddle.net/nMdNk/3/](http://jsfiddle.net/nMdNk/3/)

在我的 javascript 中，我有：

```
function moveRight() {
    hx = document.getElementById("xval").value;
    imgx = document.getElementById("picture").clientX; //get current X from image
    for (a = 0; a <= imgx; a++;) {

        if (imgx == hx) {
            moveDown();
        } else {
            setTimeOut(moveRight, 1000);
        }
    }
}

function moveDown() {
    hy = document.getElementById("yval").value;
    imgy = document.getElementById("picture").clientY; //get current Y from image
    for (b = 0; b <= imgy; b++;) {

        if (imgy = hy) {
            return; //stop when reach to final destination 
        } else {
            setTimeOut(moveDown, 1000);
        }
    }
} 
```

我想我正在为图片的 x 和 y 坐标检索错误的元素，但不太确定。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:55:54.623

我已经为您修改了代码并将其放入此[JSFiddle](http://jsfiddle.net/JQTeG/)中。我做了一些改变，但不是太剧烈。主要的是你的 for 循环是不必要的，并且会导致奇怪的行为 - 通过在 setTimeout 中调用你的函数，for 循环基本上被绕过了。因此，对于 for 循环中的每次迭代，您都将通过 setTimeout 启动一个全新的操作链。例如，如果您没有检查 (imgx == hx)，您的脚本将无限期地运行，即使那里有 for 循环。

```
function init(){
    document.getElementById("picture").style.left = '0px';
    document.getElementById("picture").style.top = '0px';
    moveRight();
}
function moveRight() {
    hx = 1 * document.getElementById("xval").value;
    imgx = document.getElementById("picture").offsetLeft; //get current X from image
    document.getElementById("picture").style.left = (imgx + 1) + 'px';
    if (imgx == hx) {
        moveDown();
    } else {
        setTimeout(moveRight, 10);
    }
}

function moveDown() {
    hy = 1 * document.getElementById("yval").value;
    imgy = document.getElementById("picture").offsetTop; //get current Y from image
    document.getElementById("picture").style.top = (imgy + 1) + 'px';
    if (imgy == hy) {
        return; //stop when reach to final destination 
    } else {
        setTimeout(moveDown, 10);
    }
} 
```

# mysql - 无法在 JDBC 中更新结果集

> ID：15260505
> 
> 赞同：0
> 
> 时间：2013-03-06T23:51:26.430
> 
> 标签：mysql, sql, jdbc

```
com.mysql.jdbc.NotUpdatable: Result Set not updatable. 
```

> 此结果集必须来自使用 ResultSet.CONCUR_UPDATABLE 结果集类型创建的语句，查询必须只选择一个表，不能使用函数并且必须从该表中选择所有主键。有关更多详细信息，请参阅 JDBC 2.1 API 规范，第 5.6 节。
> 
> 此结果集必须来自使用 ResultSet.CONCUR_UPDATABLE 结果集类型创建的语句，查询必须只选择一个表，不能使用函数并且必须从该表中选择所有主键。有关更多详细信息，请参阅 JDBC 2.1 API 规范，第 5.6 节。

以上是我得到的错误。我的桌子上有一个主键。我明白`ResultSet.CONCUR_UPDATABLE`了，如果我想更新结果集，是否需要使用不同的对象？

# c++ - C++ *& 在类函数或结构错误中

> ID：15260513
> 
> 赞同：0
> 
> 时间：2013-03-06T23:52:01.743
> 
> 标签：c++, pointers, operator-keyword

这是我的代码的一部分：

```
class Node{
   public:
   Node* parent;
   Node* left;
   Node* right;
   int key;
};

(...)

/*
* Ps.: v1 is parent of v2!
* and assume that v1->parent is NULL
*/
void somefunction(Node*& v1,Node*& v2){
    (...)
    v2->parent = v1->parent; // The problem is here, more details below
    (...)
} 
```

问题是当我调用 时`v2->parent`，由于 的`<type>*&`参数`somefunction()`，编译器解释`v2->parent`为相等`v1`（谁是 v2 的父亲），并且它修改`v1`为`NULL`，但我只想修改`v2->parent`value 而不是`v1`。

PS.：我需要`<type>*&`在代码下面的某些部分使用，我不能只修改参数类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:57:07.997

似乎您可能正在调用这样的函数：

```
somefunction(v2->parent, v2); 
```

这意味着`v2->parent`函数内部与函数内部完全相同的对象`v1`。当您设置`v2->parent`为`v1->parent`（即`NULL`）时，您也在修改`v1`。

你说你不能修改参数类型，但我建议你这样做。对指针的引用是一个非常糟糕的迹象。您的代码似乎需要重新设计。

`v2->parent`另一种方法是在将其传递给函数之前进行复制：

```
Node* v1 = v2->parent;
somefunction(v1, v2); 
```

现在`v1`函数里面是这个副本，`v2->parent`不会修改原来的。

# mongodb - 如何在基本案例中使用主干和 mongoDB 模式正确管理集合

> ID：15260514
> 
> 赞同：0
> 
> 时间：2013-03-06T23:52:03.400
> 
> 标签：mongodb, backbone.js, mongoose

我尝试了 2 种不同的方法来管理收藏，第二种方法对我来说听起来更干净，但我无法让它发挥作用。

我来这里是为了了解在这种非常基本的情况下，在骨干网和 mongoDB 模式上组织代码的最佳方法是什么（以及为什么第二个不起作用）

在我的两个示例中，情况都`collection Friends`在`Model User`

**第一个例子（效果很好）**

**客户端**

```
App.Models.User = Backbone.Model.extend({
    defaults : {
        username : "example",
        Friends: []
    },
}); 
```

**服务器端**

```
UserSchema : {
        name: {
            type: String,
            required: true,
            unique: true
        },
        Friends:
        [ {
            user_id: {
                type: mongoose.Schema.Types.ObjectId,
                ref: 'User'
            },
            status: {
                type: Boolean
            },
        }] 
```

`Friends references`使用这种方法，当我从客户端填充`User document`集合时，主干可以很好地收集集合。

**第二个示例（对我来说似乎更干净，但在获取集合时失败）**

**客户端**

```
App.Models.User = Backbone.Model.extend({
    defaults : {
        username : "example",
        status: [], //Since Friends is now a collection i build an array to index each user_id according to its status.
        Friends: new App.Collections.User()
    },
}); 
```

**服务器端**

```
UserSchema : {
        name: {
            type: String,
            required: true,
            unique: true
        },
        status: [ {
          user_id: {
                type: mongoose.Schema.Types.ObjectId,
                ref: 'User'
            },
          value: Bolean 
        } ],
        Friends:
        [ {
            user_id: {
                type: mongoose.Schema.Types.ObjectId,
                ref: 'User'
            }
        }] 
```

**应用程序集合用户**

```
App.Collections.User = Backbone.Collection.extend({
    model: App.Models.User,

    initialize : function() {

    },

    getFriends: function(callback) {
        console.log('getFriends called!');
        this.url = App.url+'friends';
        this.fetch({
            success: function(collection, response, options) {
                console.log('fetch OK');
                console.log(collection.toJSON());
                callback(true);
            },
            error: function(collection, response, options) {
                console.log('fetch KO');
                callback(false);
            }
        });
    }
}); 
```

使用这种方法，当我获取 时`Friends collection`，我得到一个错误`Uncaught TypeError: undefined is not a function (on chrome)`或者`TypeError: this.model is not a constructor (on firebug)`，两者都在`backbone-0.9.9.js (ligne 26)`

`success callback`它发生在from方法内部之前，`collection's fetch`并且仅当从服务器 ide 返回一个集合时（当它为 null 时，没有问题，例如骨干网无法解析它）。

返回的 JSON 如下所示：

```
 [
      {
          "__v": 0,
          "_id": "5137cdf1538238073f000005",
          "username": "Someone Else",
          "status": [
           {
             "user_id": "5137cb9b730754a666000006",
              value: true
           }
          ],
          "Friends": [
            {
              "user_id": "5137cb9b730754a666000006",
              "_id": "5137cf2e0399fd7c3f000005"
            }
          ],
        },
        "_id": "5137cf2e0399fd7c3f000006"
      }
    ] 
```

那么在这两种方法之间组织代码的最佳方法是什么？为什么你认为我在第二个错误时会出现这个错误（我的 JSON 无效吗？）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T10:04:30.503

确保您的集合 api 的返回是有效的 json。您提供的示例 json 返回无效

您可以通过在此处复制粘贴示例 json 字符串来检查有效性

[http://jsonlint.com/](http://jsonlint.com/)

# php - 允许注册和注销的网站的邮件列表代码

> ID：15260519
> 
> 赞同：-1
> 
> 时间：2013-03-06T23:52:36.867
> 
> 标签：php, html, list, mailing

我已经建立了一个网站，但我不太了解 HTML 或 PHP。我已经设法获得了一个邮件列表注册功能，但我希望人们也能够删除自己。这可能吗？只有一个邮件列表，所以它所要做的就是接受一个电子邮件地址，用于注册或注销。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:18:43.597

我假设您正在使用文件系统进行保存。在这种情况下，您可能需要遍历每一行以找到匹配的字符串并将其删除。

幸运的是，由于您使用的是 PHP，因此使用 MySQL 之类的数据库可能更容易。搜索“PHP MySQL CRUD”或“PHP MySQL 教程”，您应该会找到比您需要的更多的帮助。

之后就变成了这样：

```
$db = (MySQL Connection from the tutorials, usually PDO or mysqli);

function saveEmail($db, $name, $email){
    // Simple email validation, you will probably want to validate or sanitize other fields too
    if(!filter_var($email, FILTER_VALIDATE_EMAIL)){
        return 'Email is not valid';
    }

    // Straight query, you may want to look into prepared statements too
    // You may also wish to check for duplicate emails or to set the field as UNIQUE
    $sql = "INSERT INTO table (name, email) VALUES ('$name', '$email')";
    if($db->query($sql)){
        return true;
    }else{
        return 'DB Insert Failed';
    }
}

function deleteEmail($db, $email){
    $sql = "DELETE FROM table WHERE email = '$email'";
    if($db->query($sql)){
        return true;
    }else{
        return 'DB Delete Failed';
    }
} 
```

# css - 使用 Ember.js 更新 CSS 属性

> ID：15260521
> 
> 赞同：2
> 
> 时间：2013-03-06T23:52:39.177
> 
> 标签：css, data-binding, properties, ember.js

我想将文本输入与 CSS 链接以重新创建 WordPress 主题（实时）定制器，其中更改输入中的值会更新特定的 CSS 值。

我在我的模板中创建了一个 {{ Ember.TextField }} 和一个`<style>`带有正确 CSS 声明的标签，其中包含 Ember 变量，以更新 CSS。我收到一条错误消息，告诉我 Ember 无法访问我的`<style>`标签中的变量，因为它不在 DOM 中；这是有道理的，生成的代码是一个`<script>`inside a `<style>`inside another `<script>`，有点难看。

我想知道是否有一种（干净的）Ember 方法可以将输入/文本区域/选择字段与 CSS 属性链接起来。我阅读[了 Ember.js - Update CSS width based on an object property](https://stackoverflow.com/questions/12902229/ember-js-update-css-width-based-on-an-object-property)，但是将 {{bindAttr}} 添加到我想更新的每个标签可能会适得其反，所以我问 Ember 专家是否有办法分组所有这些变化都以某种方式做我需要的。

否则，我想这将是一个 jQuery 自制插件，但我更愿意在放弃 Ember 魔法之前完全确定这样做；）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T05:08:50.403

我认为在这种情况下使用观察者会很好。

```
App.StyleTextField = Ember.TextField.extend({

  valueDidChange: function() {
    var value = this.get('value');
    var cssText = 'h1 { color: ' + value + '; }'; // You could even use Mustache to generate this if you were so inclined

    // create a <style /> tag with cssText and dump it into the <head />
  }.observes('value')
}); 
```

# android - 如何防止视图在旋转过程中发生变化

> ID：15260522
> 
> 赞同：0
> 
> 时间：2013-03-06T23:52:40.647
> 
> 标签：android, rotation, views, android-activity

我编写了一个简单的应用程序，它有一个 TextView，当点击它时，它会变成一个 EditText。

```
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.TextView;

public class Main extends Activity {
    static Context context;
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        context = this;
        LinearLayout lL = new LinearLayout(this);
        TextView tv1 = new TextView(this);
        tv1.setText("tv1");
        tv1.setClickable(true);
        lL.addView(tv1);
        setContentView(lL);
        tv1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                LinearLayout parent = (LinearLayout) v.getParent();
                parent.removeAllViews();
                EditText eT = new EditText(context);
                eT.setHint("Enter text here");
                parent.addView(eT, -1, -2);
                eT.requestFocus();
            }
        });
    }
} 
```

但是，当我旋转手机时，我输入的文本消失了，视图返回到 TextView。

我知道，当我旋转手机时，活动会暂停、停止、被破坏、重新创建、重新启动、再次恢复。但是我怎样才能让我的 EditView 保持它的文本，焦点......？

我知道这是一个愚蠢的问题，因为我很可能错过了 developer.android.com 的活动生命周期指南中的一些内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T23:59:23.563

基本概念是，您需要在 Activity 被销毁之前发生的生命周期事件期间捕获并保存应用程序的当前状态，然后在旋转后重新创建后将保存的状态应用于新创建的 Activity

这是解决此问题的（许多）好的SO问题之一： [Android：高效的屏幕旋转处理](https://stackoverflow.com/questions/8997822/android-efficient-screen-rotation-handling)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T06:51:00.270

您可以在清单文件中进行修改。这将有助于不改变方向。我认为会解决您的问题

```
<activity
            android:name="com.example.bizzapp.StitchdMain"
            android:alwaysRetainTaskState="true"
            android:keepScreenOn="true"
            android:screenOrientation="landscape" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

//希望能帮助到你

# php - zf2 插入使用 $db->insert($table, $data); 风格

> ID：15260525
> 
> 赞同：4
> 
> 时间：2013-03-06T23:52:47.853
> 
> 标签：php, database, insert, zend-framework2

您好，有什么方法可以在 zf2 上使用 zf1 样式在 db 表中插入数据？

```
$db->insert('tablename', $data); 
```

关联数组在哪里`$data`包含（**列**，**值**）

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T19:35:49.670

要在 zf2 中插入：

```
 use Zend\Db\Sql\Sql;

    $sql = new Sql($this->dbAdapter);
    $insert = $sql->insert('table');
    $newData = array(
    'col1'=> 'val1',
    'col2'=> 'val2',
    'col3'=> 'val3'
    );
    $insert->values($newData);
    $selectString = $sql->getSqlStringForSqlObject($insert);
    $results = $this->dbAdapter->query($selectString, Adapter::QUERY_MODE_EXECUTE); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-07T00:10:27.997

我使用 TableGateway 的提议：

```
 $adapter = $this->tableGateway->getAdapter();
    $otherTable = new Zend\Db\TableGateway\TableGateway('table_name', $adapter);
    $otherTable->insert($data)); 
```

# python - 列表索引必须是整数，而不是 str

> ID：15260526
> 
> 赞同：1
> 
> 时间：2013-03-06T23:52:54.203
> 
> 标签：python, list, merge, indexing

我有两种类型的列表：名称和分数，我正在尝试合并分数，以便将所有分数合并到现有列表中

我不断收到“列表索引必须是整数，而不是 str”错误

```
name1= [jim, bob, john, smith]

score1= [4,7,3,11]

name2= [bob, cahterine, jim, will, lucy]

score2= [6,12,7,1,4] 
```

我希望结果是：

```
name1 = [jim, bob, john, smith, catherine, will, lucy]

score2 = [11, 13 ,3 ,11 ,12 ,1 ,4]

def merge(name1,score1, name2,score2):

     for i in name2:
        if i in name1:
           indexed= name1.index(i)
           score2[i] =score1[int(indexed)]+score2[i]
        if i not in name1:
           name1.append(i)
           score1.append(score2[(name1.index(i))]) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T00:09:14.990

您可能需要考虑将此类数据放在模块中的[`Counter`](http://docs.python.org/2/library/collections.html#collections.Counter)类中。[`collections`](http://docs.python.org/2/library/collections.html)例如：

```
#! /usr/bin/env python
from collections import Counter

name1 = ["jim", "bob", "john", "smith"]
score1 = [4,7,3,11]
name2 = ["bob", "cahterine", "jim", "will", "lucy"]
score2 = [6,12,7,1,4]

first_set = dict(zip(name1, score1))
second_set = dict(zip(name2, score2))

print Counter(first_set) + Counter(second_set) 
```

这将打印以下内容：

```
Counter({'bob': 13, 'cahterine': 12, 'jim': 11, 'smith': 11, 'lucy': 4, 'john': 3, 'will': 1}) 
```

另外，看看[卡尔的回答](https://stackoverflow.com/a/15260748/1062948)。它更加简化了这一点。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-07T00:12:37.540

您的分数在概念上**与**名称相关联。这告诉您您使用了错误的数据结构。特别是，数字代表你将要加起来的分数，或者更重要的是，*加起来*。

Python为此提供了一个内置工具。

```
from collections import Counter

results_1 = Counter(jim = 4, bob = 7, john = 3, smith = 11)
results_2 = Counter(bob = 6, catherine = 12, jim = 7, will = 1, lucy = 4)

results_1 + results_2 # yes, it's really this easy. 
```

至于你的错误信息，它的意思正是它所说的，@BryanOakley 已经彻底解释过了。但我需要指出的是，*在编程中，你必须精确、一致，并不断关注细节*。良好的习惯可以避免这些错误，因为你一直在思考你在做什么以及*它究竟意味着什么*。样式约定也有帮助：

*   在它实际包含的东西之后命名你的迭代器。因为，在 Python 中，迭代列表*实际上会为您提供列表中的项目*（不是整数索引），所以请使用暗示实际列表项目的名称，而不是像`i`.

*   用复数名称命名您的列表和其他容器，以便您的代码自然地描述正在发生的事情。因此，编写类似`for name in names:`.

但我提到“注意细节”是因为

*   当你发布你的代码时，不要输入它；复制和粘贴，以便我们可以准确地看到您拥有的内容。

*   拼写计数。错别字伤害（`cahterine`）。

*   字符串周围有引号。不要将字符串与变量名混淆。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-06T23:57:25.443

相信错误信息：它准确地告诉你问题出在哪里。当你这样做时`score2[i]`，问问自己“我是什么？”

在这种情况下，i 是 name2 的一个元素。即使您的示例代码显示为`[bob, cahterine, jim, will, lucy]`，我猜这些是字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T03:42:14.297

```
def sum(index, name):
    score2[index] += score1[name1.index(name)]

name1= ["jim", "bob", "john", "smith"]
score1= [4,7,3,11]
name2= ["bob", "cahterine", "jim", "will", "lucy"]
score2= [6,12,7,1,4]

[sum(index, _name) for index, _name in enumerate(name2) if _name in name1 and _name in name2] 
```

你可以使用列表推导

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T00:09:41.703

我得到了这个工作，但我不知道这是否是你要找的？

```
name1= ['jim', 'bob', 'john', 'smith']
name2= ['bob', 'cahterine', 'jim', 'will', 'lucy']
score1= [4,7,3,11]
score2= [6,12,7,1,4]
def merge (name1,score1, name2,score2):
    for x in range(0,len(name1)):
        name2.append(name1[x])
    for x in range(0,len(score1)):
        score2.append(score1[x])
    print name2
    print score2
merge(name1,score1, name2,score2) 
```

# jquery - jQuery UI DatePicker 拆分为多个动态字段

> ID：15260529
> 
> 赞同：0
> 
> 时间：2013-03-06T23:53:02.320
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我有重复日期字段的表单，使用 3 个单独的字段分别表示月、日和年。我拥有它，因此它将日期拆分为 3 个字段，但一个大问题是系统在表单上呈现多个日期选择器，并且我无法更改月日和年字段的 html 或表单字段类。我怎样才能做到这一点，以便我们可以使用一个周围的 div 类，它只更新每个日期选择器 div 组中的日期字段？

示例 HTML：

```
<div class="date-picker">
 <label for="preferredDate">Date</label>
 <input type="text" class="date_month" />/
 <input type="text" class="date_day" />/ 
 <input type="text" class="date_year" /> 
</div>
<div class="date-picker">
 <label for="preferredDate">Date</label>
 <input type="text" class="date_month" />/
 <input type="text" class="date_day" />/ 
 <input type="text" class="date_year" /> 
</div>
<div class="date-picker">
 <label for="preferredDate">Date</label>
 <input type="text" class="date_month" />/
 <input type="text" class="date_day" />/ 
 <input type="text" class="date_year" /> 
</div> 
```

这是我的 jQuery：

```
$(document).ready(function(){
  $(".date-picker .date_year").datepicker({
     showOn: 'button', 
     //buttonImage: "calendar_icon.png", 
     buttonText: 'Cal',
     buttonImageOnly: false, 
     showAnim: 'fadeIn',
     altField: '.date_year', 
     altFormat: 'YYYY',
     altField: '.date_month', 
     altFormat: 'mm',
     onClose: function(dateText,picker) {
                 $.this('.date_month').val( dateText.split(/\//)[0] );
                 $.this('.date_day').val( dateText.split(/\//)[1] );
                 $.this('.date_year').val( dateText.split(/\//)[2] );
              }
    });
}); 
```

请记住...我不能更改呈现的 HTML 以在字段上添加新的类或 id。

任何帮助是极大的赞赏！:)

编辑：在这里添加了一个例子，这样你就可以看到发生了什么[http://jsfiddle.net/4KzXs/](http://jsfiddle.net/4KzXs/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:35:46.010

```
$(".date_year").datepicker({
    showOn: 'button',
    //buttonImage: "calendar_icon.png", 
    buttonText: 'Cal',
    buttonImageOnly: false,
    showAnim: 'fadeIn',
    dateFormat: 'mm/dd/yy',
    onClose: function (dateText, picker) {
        dateArr = dateText.split('/');
        $(this).siblings('.date_month').val(dateArr[0]);
        $(this).siblings('.date_day').val(dateArr[1]);
        $(this).val(dateArr[2]);
    }
}); 
```

[小提琴](http://jsfiddle.net/barmar/n9sRy/3/)

# c# - Listview 项目未显示

> ID：15260532
> 
> 赞同：0
> 
> 时间：2013-03-06T23:53:21.020
> 
> 标签：c#, wpf-controls, listviewitem

我无法确定为什么我的数据没有显示。这是我的 xaml.cs 文件。当它编译并运行良好时，我放弃了引用。

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        string[] firstRecord = new string[3] {"1", "2", "3"};
        listview1.Items.Add(firstRecord);

    }
} 
```

这是xml

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="300" Width="400">
<Grid>
    <ListView Name="listview1">

        <ListView.View>

            <GridView AllowsColumnReorder="true"
          ColumnHeaderToolTip="Employee Information">

                <GridViewColumn DisplayMemberBinding=
                      "{Binding Path=listview1.Items[0]}" 
                  Header="Column1" Width="100"/>

                <GridViewColumn DisplayMemberBinding=
                      "{Binding Path=listview1.Items[1]}" 
                  Header ="2nd Column" Width="100">
                </GridViewColumn>

                <GridViewColumn DisplayMemberBinding=
                      "{Binding Path=listview1.Items[2]}" 
                  Header="3rd Column" Width="100"/>
            </GridView>

        </ListView.View>
    </ListView>
</Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:40:17.193

如果您已将 an 添加`Array`到`ListView`您的`Column`绑定中，则只需成为您想要的索引

```
<ListView Name="listview1">
    <ListView.View>
        <GridView AllowsColumnReorder="true" ColumnHeaderToolTip="Employee Information">
            <GridViewColumn DisplayMemberBinding="{Binding Path=[0]}" Header="Column1" Width="100"/>
            <GridViewColumn DisplayMemberBinding="{Binding Path=[1]}" Header ="2nd Column" Width="100" />
            <GridViewColumn DisplayMemberBinding="{Binding Path=[2]}" Header="3rd Column" Width="100"/>
        </GridView>
    </ListView.View>
</ListView> 
```

结果：

![在此处输入图像描述](../Images/59428ef57d5e42a49afda7676b65c13b.png)

## 使用数据绑定

**但是**，您应该使用`DataBinding`您的`ListView`，因为`UI`在`WPF`.

这是正确绑定字符串数组的示例

xml:

```
<Window x:Class="WpfApplication9.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Name="UI">
    <Grid>
        <ListView ItemsSource="{Binding ElementName=UI, Path=Records}">
            <ListView.View>
                <GridView AllowsColumnReorder="true" ColumnHeaderToolTip="Employee Information">
                    <GridViewColumn DisplayMemberBinding="{Binding Path=[0]}" Header="Column1" Width="100"/>
                    <GridViewColumn DisplayMemberBinding="{Binding Path=[1]}" Header ="2nd Column" Width="100" />
                    <GridViewColumn DisplayMemberBinding="{Binding Path=[2]}" Header="3rd Column" Width="100"/>
                </GridView>
            </ListView.View>
        </ListView>
    </Grid>
</Window> 
```

代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        Records.Add(new string[3] { "1", "2", "3" });
        Records.Add(new string[3] { "10", "20", "30" });
        Records.Add(new string[3] { "100", "200", "300" });
    }

    private ObservableCollection<string[]> _records = new ObservableCollection<string[]>();
    public ObservableCollection<string[]> Records
    {
        get { return _records; }
        set { _records = value; }
    }
} 
```

结果

![在此处输入图像描述](../Images/dfdc79c1fe09fcc79c8833456713ee3c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:05:27.090

Listviews 使用字符串数组不会给你很好的结果。我会创建一个对象并绑定到它，如下所示：

```
class Item
{
    public string Item1 { get; set; }
    public string Item2 { get; set; }
    public string Item3 { get; set; }
} 
```

然后你可以像这样添加到你的 UI 中：

```
listview1.Items.Add(new Item() { Item1 = "1", Item2 = "2", Item3 = "3" }); 
```

然后将每一列绑定到对象的字符串属性：

```
<ListView Name="listview1">
    <ListView.View>
        <GridView AllowsColumnReorder="true" ColumnHeaderToolTip="Employee Information">
            <GridViewColumn DisplayMemberBinding="{Binding Item1}"
            Header="Item1" Width="100"/>
            <GridViewColumn  DisplayMemberBinding="{Binding Item2}"
            Header ="Item2" Width="100"/>
            <GridViewColumn   DisplayMemberBinding="{Binding Item3}"
            Header="Item3" Width="100"/>
        </GridView>
    </ListView.View>
</ListView> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-06T23:57:37.990

你的绑定是错误的。

您绑定第一列：

```
{Binding Path=listview1.Items[0]} 
```

它将包含 {"1", "2", "3"} 而不是 "1" 因为 {"1", "2", "3"} 是您作为第一项添加到项目列表中的字符串数组.

会更好

```
{Binding Path=listview1.Items[0][0]} 
```

第一个，但这将始终只绑定您的第一个列表项。

但是你现在肯定看到了错误吗？

也许如果你只绑定

```
{Binding Path=listview1.Items} 
```

控件知道要做什么，因为二维数据将适合列表视图的二维数据模式。（但我还没有使用它，也不确切知道。）

# php - UTF-8 未按应有的方式表示数据

> ID：15260537
> 
> 赞同：0
> 
> 时间：2013-03-06T23:54:09.010
> 
> 标签：php, mysql, database, utf-8, character-encoding

我需要在 MySQL 数据库中插入克罗地亚语字符。

我已经完成了大部分工作，但是当我想插入一些克罗地亚字符时仍然遇到问题。

到目前为止我做了什么：

1.  我已经下载并安装了 MySQL Server 5.6，希望我能看到克罗地亚排序规则，但我找不到它......
2.  我已经在 UTF8-default 排序规则上设置了整个数据库和每一列
3.  我已将其放入我的 php 脚本中：`header("Content-Type: text/html;charset=utf-8");`
4.  我已经尝试了所有组合，例如（在 cp1250、latin2-croatian-ci 上设置所有内容）但仍然没有运气

插入数据库的一些输入是：`æèæžš`它应该是`ćčćžš`..这只是为了测试......

有谁知道我接下来可以做什么？我真的希望对于这种特殊类型的问题有某种解决方案。

我敢肯定，当我们谈论 MySQL 数据库中的克罗地亚语字符时，很多人都像我一样碰壁。

编辑：插入代码（这只是为了测试，所以很简单）

```
<?php
header("Content-Type: text/html;charset=utf-8");
$con=mysqli_connect("127.0.0.1:3306","root","admin","test");

 if (!$con)
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

 $sql="INSERT INTO test(test) VALUES('ćčćžš')";
 if (!mysqli_query($con,$sql))
      {
            die('Error: ' . mysqli_error($con));
      }else 
      {
        print '<script type="text/javascript">alert("ok")</script>';
      }

    mysqli_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T00:00:37.653

对于克罗地亚语：

1.  您在数据库中的表必须是`utf8_general_ci`.
2.  您的文件必须保存为`utf8 (without BOM)`.
3.  使用 PHP 连接到数据库后，添加`query('SET NAMES utf8');`.
4.  在您的文档`<head>`标签中添加`<meta charset="utf-8" />`.

经过测试，它可以工作（克罗地亚语）。

日维奥

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T07:45:44.490

要正确读取 UTF-8 字符，您可以像这样创建表：

```
create table patient(
/* your columns  */
)character set utf8 collate utf8_unicode_ci; 
```

`set_charset('utf8')`并通过添加php来插入/检索您的数据：

```
$mysqli=new mysqli($host,$user,$password,$database);
$mysqli->set_charset('utf8');
if(mysqli_connect_errno()){
    echo 'Could not connect to database. Error: '.mysqli_connect_error();
    exit();
}

$query="select * from YOURTABLE";
$result=$mysqli->query($query);

if($result->num_rows>0){
    while($row=$result->fetch_assoc()){
        //reading $row data
    }
    $result->close();
}

$mysqli->close(); 
```

另外，记得将你的 html 字符集设置为 UTF-8：

```
<meta charset="UTF-8"> 
```

# iphone - 保存新的变量值

> ID：15260538
> 
> 赞同：-3
> 
> 时间：2013-03-06T23:54:10.720
> 
> 标签：iphone, objective-c, xcode, macos, cocoa-touch

我有一个值为零的全局变量，然后我使用此代码更改值并放入标签：

```
- (IBAction)costSST
{
    // add cost to global variable "totalCost"
    float sstCost = totalCost + 3.50;
    self.lblcurCost.text = [NSString stringWithFormat:@"%.02f",  sstCost];
} 
```

但是，我不知道如何保持全局变量的新值——在本例中为 3.50——而不是仍然为 0。有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:23:28.340

要`totalCost`保留它的值，您必须实际设置它的值，而不是在算术中引用它：

```
- (IBAction)costSST
{
    // add cost to global variable "totalCost"  Because of that, sstCost is unnecessary
    totalCost = 3.50f;
    self.lblcurCost.text = [NSString stringWithFormat:@"%.02f",  totalCost];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:24:20.660

您不应该使用“全局变量”。将持久值存储在实例变量中。

# opencv - 使用 OpenCV 进行焦点检测

> ID：15260539
> 
> 赞同：6
> 
> 时间：2013-03-06T23:54:11.307
> 
> 标签：opencv, focus, detection

我试图确定图片的哪些部分是焦点，哪些部分是模糊的，如下所示： ![焦点检测](../Images/473485d4e68d64d80d42ce9a7f0b5c60.png)

但是怎么做呢？关于如何测量这个的任何想法？我读过一些关于寻找高频的东西，但它怎么能产生这样的图像呢？

干杯，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T01:25:27.117

任何图像在其最佳焦点处都将是最清晰的。利用这一点 - 运行 Sobel 算子或 Laplace 算子，任何类型的差分（导数）过滤器。将结果逐个像素相加，总和最高的图像是最佳聚焦的图像。

编辑：将有额外的限制，具体取决于您拥有多少额外信息，例如多个样本、图像中对象的相似性等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-04-06T22:57:26.570

查看这篇论文，了解更多关于拉普拉斯滤波器的精度。在我的 4K 图像问题中，拉普拉斯滤波器不足以检测模糊和失焦区域。

[https://github.com/facebookresearch/DeepFocus](https://github.com/facebookresearch/DeepFocus)

编辑：深度学习的模糊检测有多种方法。选择最适合您需要的方法：）

# objective-c - 如何将 \x 插入 NSString 对象

> ID：15260540
> 
> 赞同：0
> 
> 时间：2013-03-06T23:54:14.590
> 
> 标签：objective-c, io

我正在尝试将数据打印到蓝牙打印机。为此，我需要将十六进制发送到打印机。我已经通过发送诸如之类的命令成功地做到了这一点

@"\x1b\x7b\x01" @"\x1b\x7b\x00"

这些都是静态命令。我现在需要获取一些数据，一个 NSString，将其转换为十六进制，然后将其发送到打印机。我尝试了几种不同的方法，其中大部分来自该站点，但无法使其正常工作。

我知道这不起作用，但我想做以下事情：

```
for(NSUInteger i = 0; i < [str length]; i++ )
{
    [hexString appendString:[NSString stringWithFormat:@"\x%@",[str characterAtIndex:i]]];
} 
```

*   *   hexString 是我试图创建和返回的字符串。str 是我试图变成十六进制的字符串。例如，11111111 或 abcdefg。

我尝试了各种各样的事情，但都没有运气。

任何帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T23:58:38.110

dreamlax is right, you should use `NSData`. You could do something like this:

```
NSDictionary *hexTable = @{@"0" : @0,
                           @"1" : @1,
                           @"2" : @2,
                           @"3" : @3,
                           @"4" : @4,
                           @"5" : @5,
                           @"6" : @6,
                           @"7" : @7,
                           @"8" : @8,
                           @"9" : @9,
                           @"a" : @10,
                           @"b" : @11,
                           @"c" : @12,
                           @"d" : @13,
                           @"e" : @14,
                           @"f" : @15};

NSMutableData *data = [[NSMutableData alloc] init];
for(NSUInteger i = 0; i < str.length; i+=2 ) {
    NSString *substring1 = [str substringWithRange:NSMakeRange(i, 1)];
    NSString *substring2 = [str substringWithRange:NSMakeRange(i+1, 1)];
    char valueHigh = [hexTable[substring1] charValue];
    char valueLow = [hexTable[substring2] charValue];
    char result = valueHigh*0x10 + valueLow;
    [data appendBytes:&result length:1];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T00:00:56.397

for using "\" you need to escape one "\" more in your format it should be looking like this `"\\x%@"` basically `\` is a [escape character](http://en.wikipedia.org/wiki/Escape_character) using in many of the languages

e.g if you use

```
NSLog(@"\\"); // output is one backslash
NSLog(@"\\\\"); // output is two backslashes 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T00:12:14.770

字符串用于存储文本。如果要存储任意字节，请`NSData`改用。特别是，在与外部硬件接口时，我认为通常您希望避免使用，`NSString`特别是因为字符串总是被假定包含文本，但看起来您的打印机需要二进制数据（您只是**用**十六进制表示）。像`NUL`字节（`\x00`或`\0`）这样的东西不能很好地配合使用，`NSString`但它们确实可以很好地配合`NSData`.

```
const char boldOnBytes[] = { 0x1b, 0x7b, 0x01 };
NSData *boldOn = [NSData dataWithBytes:boldOnBytes length:sizeof boldOnBytes];

const char boldOffBytes[] = { 0x1b, 0x7b, 0x00 };
NSData *boldOff = [NSData dataWithBytes:boldOffBytes length:sizeof boldOffBytes]; 
```

（我不知道你的实际代码是做什么的）

要再次获取字节，您可以使用例如：

```
// assume you have a function called sendFunction which accepts a handle to the
// printer, the bytes to send, and a length of how many bytes to send.
sendFunction(printerHandle, [boldOn bytes], [boldOn length]); 
```

# web-services - Prestashop api - 如何获取当前购物车内容

> ID：15260551
> 
> 赞同：4
> 
> 时间：2013-03-06T23:54:50.737
> 
> 标签：web-services, shopping-cart, prestashop

我是 Prestashop 的新手，我无法在任何地方找到有关如何获取当前购物车内容的示例。我可以获得所有购物车的列表，但是如何获得当前用户的购物车？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T06:39:27.297

这很容易和简单。我正在考虑您使用的是 PS 1.5.x

在购物车控制器以外的控制器中

```
 $cart = new Cart($this->context->cookie->id_cart); 
```

或在课堂上

```
 $context = new Context();
 $cart = new Cart($context->cookie->id_cart); 
```

现在 $cart 是一个对象，它拥有所有当前的购物车数据。

您还可以通过调用 getProducts 来获取购物车产品，如下所示

```
 $cartProducts = $cart->getProducts(); 
```

希望这会有所帮助。

请注意，代码未经测试，只是您想法的示例代码。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T13:52:52.560

对于**PS 1.4.X**，您可以使用`getProducts()`

```
$product_array = $this->getProducts();

print_r($product_array); 
```

例子 ：

```
public function getSubTotal() {
    $product_array = $this->getProducts();

    foreach($product_array as $product_item) {
            $sub_total += $product_item['price'] * $product_item['cart_quantity'];
    }

    return $sub_total;
} 
```

# c# - 在 chrome 中滚动 ListBox 时回发

> ID：15260552
> 
> 赞同：5
> 
> 时间：2013-03-06T23:55:00.797
> 
> 标签：c#, asp.net, google-chrome, listbox, autopostback

使用滚动列表框，页面将刷新（不需要）。

此问题仅存在于 chrome 中（版本 27）。在其他浏览器中它可以正常工作。

.aspx 文件：

```
<asp:Label runat="server" ID="label1" ></asp:Label>
<asp:ListBox ID="ListBox1" runat="server"
    OnSelectedIndexChanged="ListBox1_SelectedIndexChanged"
    DataValueField="f1" DataTextField="f2" DataSourceID="SqlDataSource1" 
    Rows="15" AutoPostBack="true" >
</asp:ListBox>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    SelectCommand="sp1" SelectCommandType="StoredProcedure"
    ConnectionString="<%$ ConnectionStrings:ConnectionString1 %>">
</asp:SqlDataSource> 
```

.cs 文件：

```
protected void ListBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    label1.Text = ListBox1.SelectedItem.Text;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T17:18:04.350

我们最近才注意到这个不幸的错误，在一个已经运行了很长时间没有问题的页面上。它特定于 Google Chrome 27 版，我目前使用的是 26 版。

错误：（单击控件内的任意位置 - 滚动条是问题的焦点 - 会导致完整的回发 [假设您将 AutoPostBack 属性设置为 true]）

该错误可能存在于更高级别的脚本中，我不确定它会影响我们所有的列表框。这似乎不太可能，因为我们有很多，在多个页面上，如果所有页面都表现出这种行为，我们就会接到电话。

我们的解决方案包含两个选项，另一个选项不太优雅：1) 不切实际：等待 Google Chrome 的更新，或明确使用版本 26。这对于没有安装权限或回滚到以前版本的能力的大型用户群来说是不切实际的。如果您出于某种原因绝对必须针对最新版本的 Chrome 进行测试，它也不起作用。

2）我们可以访问 Telerik 控件，这使我们能够使用 RadListBox 来代替，稍微多一点的视图状态开销，这对您来说可能不是一个好的解决方案，如果它是一个选项的话。这是我们选择的选项，因为 RadListBox 逃避了问题行为。

一个遥远的第三个，明显不那么吸引人的解决方案：找到一些其他的显示数据的替代方法，例如下拉列表，如果您正在处理特别大的信息集，可能带有辅助子选择控件。在此期间，这需要更多的工作，并且您可能希望在进行修复时恢复您的更改。

我知道所有这些都是平庸的解决方案，但它们是可能的解决方法。抱歉，如果这没有多大帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-19T15:08:08.933

这是某些 Chrome 版本中的错误（正如其他人所指出的）。在早期的 v27 版本中，我在 Chrome 上得到了相同的行为。

您应该将 Chrome 升级到最新版本：我的版本目前是 v 27.0.1453.116 m，这个问题似乎在这个版本中得到了解决。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-27T08:42:58.777

这是 Chrome v27 中的一个问题，更新到最新版本应该可以解决这个问题。

[http://googlechromereleases.blogspot.co.uk/2013/06/stable-channel-update_18.html](http://googlechromereleases.blogspot.co.uk/2013/06/stable-channel-update_18.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-20T11:37:15.503

这绝对是 Chrome 中的一个[错误](http://code.google.com/p/chromium/issues/detail?id=244406)（egv27.0.1453.110 m）。也看到[这个答案](https://stackoverflow.com/a/16900271/286114)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-29T20:14:10.947

禁用 ListBox 的 AutoPostBack，使用 ListBox 的 onClick 属性运行 javascript 为它执行 __doPostBack。这是一个解决方法。我认为谷歌应该修复这个 Chrome 错误（版本 27 和 28，...）。它是 ListBox 的 AutoPostBack True，在所有其他浏览器上都可以正常工作。TY 皮恩。

```
<script type="text/javascript">
function mypostback(id, parameter)
{
  __doPostBack(id, parameter)
}
</script>

<asp:ListBox ID="lstbox_id" runat="server" onclick="mypostback('lstbox_id','')">
</asp:ListBox> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-01T17:54:04.153

如果列表框有，JavaScript 函数 mypostback 不起作用`SelectionMode="Multiple"`

# python - Matplotlib - 一个“colobar”上的标题

> ID：15260554
> 
> 赞同：3
> 
> 时间：2013-03-06T23:55:02.873
> 
> 标签：python, matplotlib, colorbar

我需要在一个文本上添加一些文本`colobar`以获得它的标题。可能吗 ？

这是来自[这篇文章](https://stackoverflow.com/questions/15235630/matplotlib-pick-up-one-color-associated-to-one-value-in-a-colorbar/15236334#comment21482421_15236334)的一个起始代码。

```
from matplotlib.pylab import *
import matplotlib.cm as cm

min_val = 0
max_val = 1

# See : http://www.scipy.org/Cookbook/Matplotlib/Show_colormaps
my_cmap = cm.get_cmap('jet') # or any other one
norm = matplotlib.colors.Normalize(min_val, max_val) # the color maps work for [0, 1]

cmmapable = cm.ScalarMappable(norm, my_cmap)
cmmapable.set_array(range(min_val, max_val))

figure()
ax = gca()

cbar = colorbar(cmmapable, ticks=[0, 1])
cbar.ax.set_yticklabels(['Min', 'Max'])

show() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T00:26:20.817

`set_title`应该做你想做的[（doc）](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.set_titlehttp://)

```
cbar.ax.set_title('title') 
```

# javascript - 水平格式化 JavaScript 输出而不是垂直列表

> ID：15260557
> 
> 赞同：0
> 
> 时间：2013-03-06T23:55:08.247
> 
> 标签：javascript, html, css

如何将此对象输出格式化为水平列出而不是垂直列出？

```
for(var i=0; i<a; i++){
$('#{STORIES.story_id}6').append($('<div>', {text: sound[i].title})); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:00:31.273

This is not so much a JavaScript question than it is a HTML/CSS question. The output is vertical is most likely due to the use of `<div>` tag. It is a *block* level element, therefore there will always be space before and after this element. (Read more about `block` vs `inline` here: [http://www.impressivewebs.com/difference-block-inline-css/](http://www.impressivewebs.com/difference-block-inline-css/) )

Try using an *inline* element. Eg. `<span>`

Keep in mind that in order to be valid markup, any `inline` level element must be contained in a `block` level element. *Edit:* To clarify, you can't have a `block` level element inside an `inline` level element.

# python - python TCPServer 地址已在使用中，但我关闭服务器并使用 `allow_reuse_address`

> ID：15260558
> 
> 赞同：19
> 
> 时间：2013-03-06T23:55:12.000
> 
> 标签：python, tcp, port, bind

这是我运行服务器的代码：

```
class MyRequestHandler(SimpleHTTPServer.SimpleHTTPRequestHandler):
    #....

PORT = 8089

httpd = SocketServer.TCPServer(("", PORT), MyRequestHandler)
httpd.allow_reuse_address = True

print "Serving forever at port", PORT
try:
    httpd.serve_forever()
except:
    print "Closing the server."
    httpd.server_close()
    raise 
```

然而这就是发生的事情：

```
^CClosing the server.
Traceback (most recent call last):
  File "server.py", line 118, in <module>
    self.send_error(400, "Unimplemented GET command: %s" % (self.path,))
  File "/home/claudiu/local/lib/python2.6/SocketServer.py", line 224, in serve_forever
    r, w, e = select.select([self], [], [], poll_interval)
KeyboardInterrupt
(.virtualenv)claudiu@xxx:~/xxx$ python server.py
Traceback (most recent call last):
  File "server.py", line 122, in <module>
    httpd = SocketServer.TCPServer(("", PORT), MyRequestHandler)
  File "/home/claudiu/local/lib/python2.6/SocketServer.py", line 402, in __init__
    self.server_bind()
  File "/home/claudiu/local/lib/python2.6/SocketServer.py", line 413, in server_bind
    self.socket.bind(self.server_address)
  File "<string>", line 1, in bind
socket.error: [Errno 98] Address already in use 
```

为什么？我关闭服务器并设置`allow_reuse_address`为 True... 使用 python 2.6.8。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-07T17:54:04.293

感谢其他答案，我想通了。`allow_reuse_address`应该在类上，而不是在实例上：

```
SocketServer.TCPServer.allow_reuse_address = True
httpd = SocketServer.TCPServer(("", PORT), MyRequestHandler) 
```

不过，我仍然不确定为什么关闭套接字并没有为服务器的下一次运行释放它。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-02-09T22:17:29.780

这`[Err 98] Address already in use`是因为套接字是，`.close()`但它仍在等待足够的时间来确保远程 TCP 收到其连接终止请求的确认（请参阅[TIME_WAIT](https://en.wikipedia.org/wiki/Transmission_Control_Protocol)）。默认情况下，如果有套接字绑定到该端口，则不允许绑定套接字，但您可以使用`allow_reuse_address`(SO_REUSEADDR)覆盖它

尽管可以进行变异`TCPServer.allow_reuse_addr`（如[其他答案](https://stackoverflow.com/a/15278302/90580)中所建议的那样），但我认为您自己的`TCPServer`where子类`allow_reuse_address`设置为更干净`True`：

```
import SocketServer
import SimpleHTTPServer
import time

class MyRequestHandler(SimpleHTTPServer.SimpleHTTPRequestHandler):
    def do_GET():
        time.sleep(60)
        self.request.sendall("I'm here!")

class ReuseAddrTCPServer(SocketServer.TCPServer):
    allow_reuse_address = True

PORT = 8089

httpd = ReuseAddrTCPServer(("", PORT), MyRequestHandler)
httpd.daemon_threads = True

print "Serving forever at port", PORT
try:
    httpd.serve_forever()
except:
    print "Closing the server."
    httpd.server_close()
    raise 
```

您可以在实例本身上使用绝对设置`allow_reuse_address`（不会弄乱类），但您需要使用`TCPServer(..., bind_and_activate=False)`，否则套接字将在您有机会更改`allow_reuse_address`设置之前被绑定。然后你需要手动调用`.server_bind()`and `.server_activate()`before `serve_forever()`：

```
...
httpd = SocketServer.TCPServer(("", PORT), MyRequestHandler, bind_and_activate=False)
httpd.allow_reuse_address = True
httpd.daemon_threads = True
...
httpd.server_bind()
httpd.server_activate()
httpd.serve_forever() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T04:25:31.817

这是因为 TCP [TIME_WAIT](http://dev.fyicenter.com/Interview-Questions/Socket-4/Explain_the_TIME_WAIT_state_.html)。

[有人发现了这个确切的问题。](http://brokenbad.com/2012/01/address-reuse-in-pythons-socketserver/)

> 但是，如果我尝试停止并再次启动服务器以测试任何修改，我会收到一个随机的“socket.error: [Errno 98] Address already in use”错误。仅当客户端已连接到服务器时才会发生这种情况。
> 
> 通过 netstat 和 ps 检查，我发现虽然它自己的进程不再运行，但套接字仍在侦听状态为“TIME_WAIT”的端口。基本上，操作系统会等待一段时间以确保此连接在途中没有剩余的数据包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T05:11:19.027

这是因为您必须在绑定套接字*之前设置 SO_REUSEADDRESS。*当您一步创建和绑定套接字然后设置它时，已经太晚了。

# javascript - 为什么我的 Javascript 电子邮件验证不起作用

> ID：15260560
> 
> 赞同：-2
> 
> 时间：2013-03-06T23:55:26.310
> 
> 标签：javascript, jquery, forms, validation, input

我用 jquery 和 javascript 制作了一个简单的表单，但电子邮件验证（确保它有`@`或`.`在其中，似乎不起作用。

这是 JSFiddle：http: [//jsfiddle.net/LCBradley3k/xqcJS/11/](http://jsfiddle.net/LCBradley3k/xqcJS/11/)

这是验证的代码。是不是在错误的地方？

```
function validateForm() {
  var x = document.forms["signup"]["email"].value;
  var atpos = x.indexOf("@");
  var dotpos = x.lastIndexOf(".");
  if(atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= x.length) {
    $('#answer').html('Not a valid email')
    return false;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T00:04:49.923

首先，您的代码包含错误，因为您缺少`}`. `validateForm`其次，单击按钮时不要调用`join`。

```
$('#join').click(function () {

            var correct = true;
            var validEmail = true;

            $('input[type="text"]').each(function (indx) {
                var $currentField = $(this);
                if ($currentField.val() === '') {
                    $currentField.addClass('empty');
                    correct = false;
                    $currentField.one('keydown', function () {
                        $currentField.removeClass('empty');
                    });
                } else {
                    $currentField.removeClass('empty');
                }

            });              

            function validateForm() {
                var x = document.forms["signup"]["email"].value;
                var atpos = x.indexOf("@");
                var dotpos = x.lastIndexOf(".");
                if (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= x.length) {                       
                    correct = false;
                    validEmail = false;
                }
            }

            validateForm();

            if (correct) {
                $('#answer').html('Thank You!');
                setTimeout(function () {
                    $('.inputs').hide("slide", { direction: "up" }, 1000);
                }, 2000);
            } else {
                if(validEmail)
                     $('#answer').html('Please fill highlighted fields.');
                else
                     $('#answer').html('Not a valid email');
            }
        }); 
```

# c++ - 如何在“向量”的元素上调用“删除” " 当每个字符串由“new char[]”创建时？

> ID：15260561
> 
> 赞同：2
> 
> 时间：2013-03-06T23:55:32.687
> 
> 标签：c++, memory-management, vector

我有一个`vector`字符串，但是这些字符串是通过为它们分配一个字符数组来创建的。这个数组是在堆中动态创建的`new`。我知道释放在堆中分配的内存是一个好习惯，但是我不确定应该如何释放 this 的内存`vector`。

当我尝试做这样的事情时：

```
for(i = 0; i < myVector.size(); i++)
     delete myVector[i]; 
```

它给了我这个错误：

> 表达式必须有指针类型

这是我声明向量的方式

```
vector<string> myVector;
char* s1 = new char[2];
s1[0] = 'a';
s1[1] = '\0';
myVector.push_back(s1);
char* s2 = new char[2];
s2[0] = 'b';
s2[1] = '\0';
myVector.push_back(s2);
//etc.. 
```

在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T00:00:05.653

Since you use a `vector<string>` and because `std::string` objects manage their own memory, you do not need to `delete` the elements of the vector: the strings have *copied* the content that you passed to them on creation.

However, you need to delete the C strings that you allocated with `new[]`. You should do it right after you created your `string` object: once the string is created, the character data can be safely deleted:

```
char s1 = new char[2];
s1[0] = 'a';
s1[1] = '\0';
myVector.push_back(s1);
delete[] s1;  // Here 
```

Note that you picked a rather roundabout way of creating strings: you can accomplish the same exact thing by calling

```
myVector.push_back("a"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:00:27.927

Another possibility would be the use of `std::string`, i.e. `std::vector<std::string>`.

In that case you can't delete the initial memory anymore, unless you kept the pointers (which is pointless, because the `std::string` will keep ist own string copy anyway).

* * *

Considering your posted code, you should keep in mind that `std::string` will create ist own copy of the string you passed in the constructor, even though the constructor isn't visible due to using implicit type conversion.

Just free (`delete`) the memory right after you've put the string inside the vector. The string won't be affected by this.

# linux - 如何创建没有所有文件夹的 tar.gz

> ID：15260562
> 
> 赞同：2
> 
> 时间：2013-03-06T23:55:33.403
> 
> 标签：linux, bash, file, ubuntu, directory

好的，所以我想做的（在 ubuntu 服务器 12.04 中）是获取“服务器”文件夹中的所有目录并分别创建所有目录的 tar.gz。例如：在服务器文件夹内还有 3 个文件夹。服务器 1、服务器 2 和服务器 3。我想在 tar.gz 中压缩 server1、server2 和 server3 的内容。所以在 server1 文件夹中，我有一个 test.txt 文件。我希望这是 server.tar.gz 中唯一的内容。
这是我到目前为止在 bash 中的代码

```
servers=(servers/*)
for i in "${servers[@]}"
do
NAME=${i:8} <-- to trim off the /servers/ part of /servers/servernumber
tar -C servers/$NAME/ -cvzf $NAME.tar.gz $NAME
done 
```

你能做的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:11:06.243

```
for dir in servers/*
do
  tar -C $dir -cvzf "$(basename $dir).tar.gz" .
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:11:14.473

我相信这是你想做的：

```
for my_dir in servers/server*; do
    tar -C $my_dir -czvf "${my_dir:8}.tar.gz" .
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T00:12:14.233

```
cd /path/top
for dir in server1 server2 server3
do
     cd $dir
     tar -cvfz /tmp/${dir}.tar.gz  *
     cd -
done
ls -lrt /tmp/*.tar.gz 
```

这似乎是你想要的。请尝试并告诉我们

# r - 更友好的切割结果为 1,2,3，而不是难以审查的范围

> ID：15260569
> 
> 赞同：0
> 
> 时间：2013-03-06T23:56:23.270
> 
> 标签：r

```
d <- c(3,4,2,5,4,7,6,5,8,9,5,6,3,1,2,6,3) 
```

`cut(d,3)`产生以下三个级别：`(0.992,3.66] (3.66,6.34] (6.34,9.01]`。有没有办法将结果显示为 1、2、3 级而不是这些范围？

我希望看到结果看起来像这样`(1,2,1,2,2,3,2,2,3,3,2,2,1,1,1,2,1)`，表明元素 d.1 位于切割 1 中，元素 d.2 位于切割 2 或中间层...

在`cut()`它的帮助中说“如果指定了标签参数，则其值用于命名因子级别”，所以我尝试`cut(d,3,lables=c(1,2,3))`了，但这没有用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T23:59:19.517

Try `factor(cut(d,3), labels=1:3)`

For details, `?factor`

By the way, `cut(d, 3, labels=1:3)` works for me as well.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T00:23:29.987

设置`labels=FALSE`，你会得到一个很好的输出：

```
d <- c(3,4,2,5,4,7,6,5,8,9,5,6,3,1,2,6,3)
cut(d, 3, labels=FALSE)
 [1] 1 2 1 2 2 3 2 2 3 3 2 2 1 1 1 2 1 
```

看`?cut`

> 如果标签 = FALSE，则返回简单的整数代码而不是因子。

**编辑**

为了避免对数值的错误解释，这里有另一种选择

```
cut(d, 3, labels=LETTERS[1:3])
[1] A B A B B C B B C C B B A A A B A 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T00:51:44.933

我认为这也可以：

```
d <- c(3,4,2,5,4,7,6,5,8,9,5,6,3,1,2,6,3)
as.numeric(factor(cut(d,3))) 
```

# c++ - char[] 杂乱的输出

> ID：15260571
> 
> 赞同：1
> 
> 时间：2013-03-06T23:56:30.360
> 
> 标签：c++, arrays, iterator, maps, char

我创建了一个将 int 映射到 char 的映射。0-25 到字母 az 和 26-35 0-9。

```
for(int i = 0; i<26; i++)
{
    letters.insert(Match::value_type(i,static_cast<char>(letter + x)));

    x++;
}

for(int i = 26; i<36; i++)
{

    letter = '0' + a;
    letters.insert(Match::value_type(i,letter));
    a++;
} 
```

在这里`i`输入`pin[]`其中包含一个数字并查找该值。

```
std::map<int, char >::const_iterator it1 = letters.find(pin[0]);
std::map<int, char >::const_iterator it2 = letters.find(pin[1]);
std::map<int, char >::const_iterator it3 = letters.find(pin[2]);
std::map<int, char >::const_iterator it4 = letters.find(pin[3]);
char fourth  = it4->second;
char third   = it3->second;
char second  = it2->second;
char first   = it1->second;
char combo[] = { first, second, third, fourth};
cout << combo << endl; 
```

一切正常，但我`cout<< combo`给了我“abcd[[[[[a[[[[[b[[[[c[[[[[d]]]]]pPP”。我不明白为什么......我在输出中想要的只是“abcd”我该如何清理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:01:14.760

您需要*空终止*您的字符串才能在 C 样式模式下使用它。所以这将变为：

```
char combo[] = { first, second, third, fourth, '\0'}; 
```

现在，您正在输出内存中的垃圾，`fourth`直到`null`找到一个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:00:55.150

```
char combo[] = { first, second, third, fourth}; 
```

定义一个包含 4 个字符序列的数组，但不是可以打印的以*null 结尾的字符串。*执行时`cout << combo`，输出流将此数组视为普通
C 样式字符串，即它尝试打印所有字符，直到达到`'\0'`. 尝试：

```
char combo[] = { first, second, third, fourth, '\0'}; 
```

# css - 查找我的错误边距：50px 自动；

> ID：15260574
> 
> 赞同：2
> 
> 时间：2013-03-06T23:56:40.923
> 
> 标签：css, layout, centering

您好，我需要将 img 放在该 div 的中心。我不能.. :(

我使用边距：Xpx 自动；用相对定义，显示：块，还有什么？

css。

```
 .items div {
      float:left;
      width:380px;
  }

  /* single scrollable item */
  .scrollable img {
      float:left;
      position:relative;
      margin:50px auto;
      margin-bottom:0px;
      padding:2px;
      border:0px solid #ccc;
      max-width:335px;
      display:block;
      width:auto;
  } 
```

HTML

```
 <div class="scrollable" id="navigator">
   <div class="items">

    <!-- 1 -->
    <div>
      <img src="images/design/balanza.jpg"  />
      <br clear="left"  />
      <p class="galdescr">Caperucita y la Abuela<br />
Raúl Caudillo<br />
Oil, acrilic, colored pencil and graphite on paper<br />
2010</p>
    </div>

    </div>

  </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T23:58:29.267

You can't really center something that is floated. It is either floated to the left or the right.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:06:18.473

您可以尝试将其更改为 inline-block 而不是块。或者您使用宽度的静态值（即`width`代替`max-width`），您可以设置`margin-left`为使其居中的东西

# objective-c - Objective-C：如何将对象作为块参数传递给期望其基类的方法？

> ID：15260578
> 
> 赞同：7
> 
> 时间：2013-03-06T23:57:13.227
> 
> 标签：objective-c, objective-c-blocks

如果我有以下对象：

```
@interface Simple : NSObject

@end

@interface Complex : Simple

@end 
```

还有另一个对象，例如：

```
@interface Test : NSObject 

+(void) doSomething:(void (^)(Simple*)) obj;

@end 
```

如果我调用如下方法，一切正常：

```
[Test doSomething:^(Simple * obj) {

}]; 
```

当我尝试改为这样称呼它时：

```
[Test doSomething:^(Complex * obj) {

}]; 
```

编译器说：

`Incompatible block pointer types sending 'void (^)(Complex *__strong)' to parameter of type 'void (^)(Simple *__strong)'`

因为`Complex`extends `Simple`，我认为这会起作用，就像在 Java 中一样。

有没有办法以某种方式实现这一目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T00:00:39.583

不幸的是，这是 Blocks API 的限制。如果您愿意，您可以选择完全放弃类型安全并将块声明为：

```
+(void) doSomething:(void (^)(id)) obj; 
```

它允许您设置块参数的类。但同样，这在类型方面是**完全不安全**的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T23:59:18.783

使用`id`代替`Complex *`or `Simple *`。块参数类型的处理方式与方法参数类型不同（感谢@CodaFi）

# jquery-ui - jquery ui 手风琴滚动条

> ID：15260579
> 
> 赞同：0
> 
> 时间：2013-03-06T23:57:21.897
> 
> 标签：jquery-ui, scrollbar, accordion

我有一个看起来很棒的 jqueryUI 手风琴。我将有大约 10 个部分（标题），它们正好适合屏幕。但是，在较小的屏幕上，它会切断我的一些部分标题。（我已经可以通过缩小浏览器窗口来模拟这个）。如果手风琴标题不垂直放置，如何显示滚动条？

手风琴被包裹在一个没有设置选项的 div 中。就好像 div 需要一个 MIN 高度以确保所有标题都可以出现，并为部分内容留出一些空间。

我的完整代码如下：

```
 <script>
  $(function() {
    $( "#settingsnavigation" ).accordion({ 
      heightStyle: "fill",
      clearStyle: true, 
      autoHeight: false }
    );
  });
  </script>

<div id="settingsnavigation" style="width:220px">
  <h3>General</h3>
  <div>
      <div class="settingsubsection">User</div>
      <div class="settingsubsection">Security</div>
      <div class="settingsubsection">Units &amp; Ranges</div>
      <div class="settingsubsection">Notifications</div>
      <div class="settingsubsection">Vehicles</div>
      <div class="settingsubsection">Device</div>
  </div>
  <h3>Financial</h3>
  <div>
      <div class="settingsubsection">Balance</div>
      <div class="settingsubsection">History</div>
      <div class="settingsubsection">Purchase</div>
  </div>
  <h3>Vehicle: Cadillac Seville STS</h3>
  <div>
      <div class="settingsubsection">General</div>
      <div class="settingsubsection">Units &amp; Ranges</div>
      <div class="settingsubsection">Select Reminders</div>
      <div class="settingsubsection">Edit Reminders</div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:42:45.783

容器 div 的 CSS 应该是

```
overflow: auto; 
```

# css - 在 chrome 中的 web 检查器中显示 css 注释

> ID：15260580
> 
> 赞同：0
> 
> 时间：2013-03-06T23:57:23.960
> 
> 标签：css, google-chrome, comments, web-inspector

有没有办法在 websinspector 中显示我的 css 文件中生成的评论，当我在资源选项卡中查看 css 文件时可以看到评论，但我在元素样式侧边栏中看不到它们，这可能吗？让我的生活变得超级轻松。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T00:04:14.463

代替`/* ... */`评论，制作以 开头的假样式`-`，例如

```
.foo {
  -my-comment1: Make all foos red;
  color: red;
} 
```

这些将通过删除线显示在检查器中，因为它无法识别它们。

# python - Django Mongodb ListField not saving or updating

> ID：15260584
> 
> 赞同：0
> 
> 时间：2013-03-06T23:57:51.900
> 
> 标签：python, django, mongodb, django-models, pymongo

I am starting to create a webapp using Django and MongoDB. Everything is working fine when I create a model and save it into the Database. Now, I do a "Class.objects.get()" to get the object I need from my DB and I have one field called "media" which is a ListField(). I had tried doing either:

```
Concert.media.append(list) 
```

or

```
Concert.media.extend(list) 
```

and then

```
Concert.save() 
```

This is my "Concert" object in my models.py:

```
class Concert(models.Model):
main_artist = models.CharField(max_length=50)
concert_id = models.AutoField(primary_key=True)
openers = ListField(EmbeddedModelField('Opener'))
concert_date = models.DateField()
slug = models.SlugField(unique=True)
media = ListField() 
```

And when I go to see the results in does not update the object. No values where saved. If someone can help me I going to give a super cyber fist bump.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:02:52.187

`Concert`是一个类，而不是一个实例。您无法保存课程。您需要创建该类的一个实例并保存它。就像是

```
c = Concert()
c.media.append(list)
c.save() 
```

（顺便说一句，这`list`是一个不好的变量名，因为 list 是 python 中的一种类型。永远不要使用类型作为变量名（尽管每个人都曾在某一时刻犯过这一点，包括我在内。））

# iphone - Grouped Style UITableView doesn't clip subviews

> ID：15260588
> 
> 赞同：-1
> 
> 时间：2013-03-06T23:58:26.080
> 
> 标签：iphone, ios, objective-c, uitableview

I have a design issue with grouped uitableview, I add uiviews to the leftmost side of each cell extending little over the cell bounds and I want them to be clipped. But neither setting clip subviews in IB nor setting clipsToBounds property in code didn't help.

So far I have set clipsToBounds (for both uitableview itself and individual uitabviewcells) in a number of places but none helped:

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    ...
    [cell setClipsToBounds:TRUE];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:defaultIdentifier];

    if (cell == nil)
    {
        cell = [self reuseTableViewCellWithIdentifier:defaultIdentifier withIndexPath:indexPath];
    }
    ...
    [cell setClipsToBounds:TRUE];
    ...
    return cell;
}

- (void)viewDidLoad
{
    ...
    [mainTableView setClipsToBounds:TRUE];
} 
```

Is it possible without changing tableview style to plain?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:40:30.203

更新：我之前的回答是错误的。这是一个答案，它实际上显示了如何做你所要求的。

[https://stackoverflow.com/a/401271/350467](https://stackoverflow.com/a/401271/350467)

…………

上一个答案

如果您要向单元格的 contentView 添加视图（除非您有充分的理由，否则您应该这样做），您需要设置`cell.contentView.clipsToBounds = YES;`

# ios - Adding an EKAlarm to EKReminder with a recurrence rule

> ID：15260593
> 
> 赞同：5
> 
> 时间：2013-03-06T23:58:40.637
> 
> 标签：ios, xcode, eventkit

I have a quick question for someone familiar with Event Kit...

I'm creating recurring reminders and I'd like an alarm to sound at each recurrence. However, the documentation suggests I can only create an alarm with an absolute date or a relative offset. Is there any way to get an alarm to fire every time the reminder reoccurs? Does it do this automatically?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-14T20:59:36.613

由于`EKReminder`是您的子类，`EKCalendarItem`您可以使用该`addRecurrenceRule:`方法添加重复规则，以便重复提醒。不幸的是，您无法创建重复警报，因为相对偏移警报基于提醒的开始日期，而不是每个重复提醒的日期。但是，您可以向对象添加多个`EKAlarm`'，`EKReminder`因此如果您的事件重复离散次数，您可以为每个添加警报。如果它永远重复，你可能会不走运，因为 Apple 的文档说：

> 请注意，某些日历只能允许某个最大数量的警报。保存此项目后，它将截断阵列中的任何额外警报。

# java - Java中的通用回调

> ID：15260596
> 
> 赞同：3
> 
> 时间：2013-03-06T23:58:55.487
> 
> 标签：java, generics, callback

`Java`可以用作**通用回调机制**的更可取的接口或类似模式应该是什么？

例如，它可能类似于

```
public interface GenericCallback
{
    public String getID();
    public void callback(Object notification);
    // or public void callback(String id, Object notification);
} 
```

对于覆盖方法的情况，将需要 ID，`hashCode()`以便被调用者识别调用者。

像上面这样的模式对于需要向类报告它们是从某个条件（例如，处理结束）产生的类的对象很有用。

在这种情况下，“父”类将使用`getID()`这些对象中的每一个的方法`GenericCallback`来跟踪它们，`Map<String, GenericCallable>`并根据收到的通知添加或删除它们。

另外，这样的接口实际上应该如何命名？

很多人似乎更喜欢[Java Observer 模式](http://docs.oracle.com/javase/7/docs/api/java/util/Observer.html)，但是其中定义的[Observable 类](http://docs.oracle.com/javase/7/docs/api/java/util/Observable.html)并不方便，因为它不是规避单一继承的接口，而且它具有比上述简单场景实际需要的更多功能。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-07T00:36:58.847

我会根据传递的 Object 类型对回调进行泛化。这对于侦听不同类别事件的 EventListener 尤其有用。例如

```
public interface Callback<T> {
   public void callback(T t);
} 
```

您*可以*使用类型 T 作为 Map 中的键。当然，如果您想区分采用相同参数的两个回调，例如字符串，那么您需要类似`getID()`.

[这是我的旧博客关于将这个用于事件侦听器](http://flyingspaniel.blogspot.com/2012/07/java-event-handling-revisited.html) 的接口[Events.Listener](https://www.assembla.com/code/hastur/subversion/nodes/trunk/Hastur_A22/src/com/flyingspaniel/event/Events.java)对应于`Callback<T>`上面。[Broadcasters](https://www.assembla.com/code/hastur/subversion/nodes/trunk/Hastur_A22/src/com/flyingspaniel/event/Broadcasters.java)使用 Map 根据他们接受作为参数的类来跟踪多个听众。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T00:45:37.833

我推荐使用**观察者模式**，因为观察者模式是解耦的黄金标准——分离相互依赖的对象。

但如果您正在寻找通用回调机制，我建议避免使用**Java.util.Observable 类。**因为 Observable 有几个弱点：它不是一个接口，并且迫使你使用 Object 来表示事件。

您可以像这样定义自己的事件侦听器：

```
public class MyEvent extends EventObject {
    public MyEvent(Object source) {
        super(source);
    }
}

public interface MyEventListener {
    void handleEvent(EventObject event);
}

public class MyEventSource {
    private final List<MyEventListener> listeners;
    public MyEventSource() {
        listeners = new CopyOnWriteArrayList<MyEventListener>();
    }
    public void addMyEventListener(MyEventListener listener) {
        listeners.add(listener);
    }
    public void removeMyEventListener(MyEventListener listener) {
        listeners.remove(listener);
    }
    void fireEvent() {
        MyEvent event = new MyEvent(this);
        for (MyEventListener listener : listeners) {
            listener.handleEvent(event);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T00:10:39.440

看起来你想实现观察者模式。在[这个 url](http://javarevisited.blogspot.com.ar/2011/12/observer-design-pattern-java-example.html)中是 Java 中观察者模式的完整实现。在您的情况下，观察者将是回调。

此外，如果您需要实现更复杂的东西，您最终将使用事件/通知模式。看看这里的其他[模式](http://www.marco.panizza.name/dispenseTM/slides/exerc/eventNotifier/eventNotifier.html)。

谢谢，@leo。

# jquery - PhotoSwipe - How to make slideshow stop at last slide instead of going to next gallery

> ID：15260597
> 
> 赞同：0
> 
> 时间：2013-03-06T23:58:55.653
> 
> 标签：jquery, gallery, photoswipe, business-catalyst

I'm using PhotoSwipe on a page where I have four different galleries (Business Catalyst gallery modules, actually). When I open the gallery and click through the images, it doesn't stop at the end of that gallery but continues to the next gallery. I want the slideshow to stop at the last picture in the gallery so the user must close it to view the next gallery.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T18:00:56.220

附加照片滑动时，您需要将循环选项设置为 false。像这样：

```
Code.PhotoSwipe.attach(_Pictures, 
    {
        target: $('#carousel'),
        loop: false
    } 
```

# android - Android: SQLite, cursor.moveToNext() always returns false

> ID：15260598
> 
> 赞同：7
> 
> 时间：2013-03-06T23:59:08.510
> 
> 标签：android, sql, sqlite

The following statement `cursor.moveToNext()` is always false. I expect the loop to execute once. I've tested that the query actually returns data.

Does anyone know what is the matter?

```
 String query ="SELECT(SELECT COUNT(*) FROM Table1) as count1, (SELECT COUNT(*) FROM Table2) as count2;";

    Cursor mCursor = mDb.rawQuery(query, null);

    if (mCursor != null) {
        mCursor.moveToFirst();
    }

    while (cursor.moveToNext()) {   //<---------------return false here???
        String result_0=cursor.getString(0);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T04:34:43.070

您可以通过这种方式迭代光标。

```
 if(moveCursor.moveToFirst()){
        do{
            //your code

        }while(moveCursor.moveToNext());
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T02:26:39.943

我知道你已经解决了你的问题，但这里是发生的事情的演练：

```
Cursor mCursor = mDb.rawQuery(query, null);

// At this point mCursor is positioned at just before the first record.

if (mCursor != null) {
    mCursor.moveToFirst();
    // mCursor is now pointing at the first (and only) record
}

while (mCursor.moveToNext()) {
    String result_0=cursor.getString(0);
}

// The loop above was skipped because `.moveToNext()` caused mCursor
// to move past the last record. 
```

因此，在您只需要一条记录的情况下，您只需要`mCursor.moveToFirst()` *OR*您的`mCursor.moveToNext()`.

# tdd - 如何为 keyPairValue 编写 TestCase nunit 测试

> ID：15260599
> 
> 赞同：0
> 
> 时间：2013-03-06T23:59:12.730
> 
> 标签：tdd, nunit, testcase, key-pair

我正在寻找一种使用 TestCase 将 keyValuePair 传递给我的测试的方法

```
[TestCase<KeyValuePair<int,string>>(1,"XX")]
public void someTest(KeyValuePair<int,string> expectedkeyValuePairs)
{
    // do some thing;
} 
```

答案是

```
[TestCase(1,"XXX")]
public void someTest(int key,string value)
{
    var expectedkeyValuePairs = new KeyValuePair<int, string>(key, value);
    // do some thing;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:05:32.190

只需使用两个单独的参数：一个用于键，一个用于值。然后在您的测试中从它们创建 KeyValuePair。

# php - XMLHttpRequest POST method to PHP server receives no POST params but GET fine

> ID：15260609
> 
> 赞同：0
> 
> 时间：2013-03-07T00:00:04.487
> 
> 标签：php, javascript, post, xmlhttprequest

I am a newbie attempting to use XMLHttpRequest. I have studied numerous examples scattered across the Internet. I have no problems using the GET method, but when I tried switching to POST it fails to transfer the parameters. :(

Here is my stripped down example which replicates the problem:

Javascript:

```
function GetPostTest(url)
{
  var req       = null;
  var postParms = 'p1=x&p2=y';
  var getParms  = '';
  getParms = 'g1=a&g2=b';
  if ( getParms )  url += '?'+getParms;
  req = new XMLHttpRequest
  if ( req )
  {
    req.open( 'POST', url, true );
    req.setRequestHeader( "Content-type", "application/x-www-form-urlencoded" );
    req.setRequestHeader( "Content-length", postParms.length );
    req.setRequestHeader( "Connection", "close" );
    req.onreadystatechange = function()
    {
      if ( req.readyState == 4 && req.status == 200 )
      {
        alert( 'Got Stuff Back: ' + req.responseText );
      }
    }
    req.send( postParms );
  }
} 
```

Server:

```
<?php
foreach ( $_POST as $key=>$value )      echo htmlspecialchars(' _POST['.$key.']=['.$value.']');
foreach ( $_GET as $key=>$value )       echo htmlspecialchars(' _GET['.$key.']=['.$value.']');
foreach ( $_REQUEST as $key=>$value )   echo htmlspecialchars(' _REQUEST['.$key.']=['.$value.']');
exit;
?> 
```

In this example, the server just reports back all of the GET and POST parameters it received which are then shown in the alert box. I have thrown a couple of GET parameters in there also. The parameters I pass are:

*   GET: g1=a&g2=b
*   PUT: p1=x&p2=y

The alert box shows: "Got Stuff Back: _GET[g1]=[a] _GET[g2]=[b] _REQUEST[g1]=[a] _REQUEST[g2]=[b]". This tells me that it is sending to the server okay, and coming back okay, just that the POST variables are not coming through.

I turn off the getParms so I only send POST parameters and then I see no variables. I turn off any combination of the three setRequestHeader()'s or other variations I see in sample code, and it does not change anything.

I am testing with Google Chromium Version 24.0.1312.56 Ubuntu 11.10 (24.0.1312.56-0ubuntu0.11.10.1) and Apache on Xubuntu 2.2.20-1ubuntu1.3 with PHP.

Thanks for your analysis. What does it take to fix this to push the POST parameters through?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:24:12.500

我刚刚复制了你的代码并尝试了它，它工作得很好。

# php - 如何使用 index.php?-url 和 colorbox

> ID：15260622
> 
> 赞同：0
> 
> 时间：2013-03-07T00:00:59.650
> 
> 标签：php, javascript, jquery, css

我得到了像`www.***.com/index.php?task=login`.

我的问题是如何将它们与[colorbox](http://www.jacklmoore.com/colorbox)一起使用？我想将登录页面中的内容加载到我的模式弹出窗口中，但我得到了意想不到的结果：它在弹出窗口中显示了完整的网站。与此类 URL 一起使用时，如何将内容正确加载到我的模式弹出窗口中？

目前我的代码如下所示：

```
$(document).ready(function(){
    $(".login_link").colorbox({

        href: "<?php echo $setting['site_url'];?>/index.php?task=login",

        onOpen: function(){
            $("#colorbox").css("opacity", 0);
        },
        onComplete: function(){

            var title = 'Login';
            $('#cboxTitle').text(title);
            $("#colorbox").animate({"opacity": 1});
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:55:56.630

现在我们知道您在模态中看到整个站点的原因是因为您正在将整个站点加载到其中（与忽略参数无关），我们需要看看如何仅加载您想要的组件。

我假设您正在使用某种 CMS 框架？这可能有一个内置的方法来提供这样的东西（例如，Joomla 允许您将 &tmpl=component 添加到 url，它会神奇地提供您所要求的内容。我不知道您使用的是什么框架，所以我不能具体建议。这将是执行任务的“正确”方式。

现在假设文件 /includes/misc/misc.inc.php 位于您的文档根目录下，您应该能够使用以下内容调用它：

[http://your.site.domain/includes/misc/misc.inc.php](http://your.site.domain/includes/misc/misc.inc.php)

as the url. HOWEVER!!!! This is unlikely to work. The chances are that other parts of the framework are instantiated by the calling of index.php, which will not happen if you call the include file directly. Indeed, unlike WordPress, Joomla has measures in place which prevent execution of any of its included files unless they have been invoked via index.php.

# c++ - C++ SSE2 内在函数

> ID：15260623
> 
> 赞同：1
> 
> 时间：2013-03-07T00:01:02.437
> 
> 标签：c++, gcc, parallel-processing, intrinsics

我刚刚了解到有一种方法可以使用内在函数实现一些并行化。我找到了以下代码并想通过它，但我可以理解很多。我试图使操作为单精度，但我该怎么做？

```
#include <stdio.h>
#include <stdlib.h>
#include <xmmintrin.h>

inline double pi_4 (int n){
        int i;
        __m128d mypart2,x2, b, c, one;
        double *x = (double *)malloc(n*sizeof(double));
        double *mypart = (double *)malloc(n*sizeof(double));
        double sum = 0.0;
        double dx = 1.0/n;
        double x1[2] __attribute__((aligned(16)));
        one = _mm_set_pd1(1.0); // set one to (1,1)
        for (i = 0; i < n; i++){
                x[i] = dx/2 + dx*i;
        }
        for (i = 0; i < n; i+=2){
                x1[0]=x[i]; x1[1]=x[i+1];
                x2 = _mm_load_pd(x1);
                b = _mm_mul_pd(x2,x2);
                c = _mm_add_pd(b,one);
                mypart2 = _mm_div_pd(one,c); 
                _mm_store_pd(&mypart[i], mypart2);
        }
        for (i = 0; i < n; i++)
                sum += mypart[i];       
        return sum*dx;
}

int main(){
        double res;
        res=pi_4(128);
        printf("pi = %lf\n", 4*res);
        return 0;
} 
```

我正在考虑将所有内容从 double 更改为 float 并调用正确的内部函数，例如，而不是 _mm_set_pd1 -> _mm_set_ps1。我不知道这是否会使程序从双精度变为单精度。

**更新**

我尝试如下，但我遇到了分段错误

```
#include <stdio.h>
#include <stdlib.h>
#include <xmmintrin.h>

inline float pi_4 (int n){
        int i;
        __m128 mypart2,x2, b, c, one;
        float *x = (float *)malloc(n*sizeof(float));
        float *mypart = (float*)malloc(n*sizeof(float));
        float sum = 0.0;
        float dx = 1.0/n;
        float x1[2] __attribute__((aligned(16)));
        one = _mm_set_ps1(1.0); // set one to (1,1)
        for (i = 0; i < n; i++){
                x[i] = dx/2 + dx*i;
        }
        for (i = 0; i < n; i+=2){
                x1[0]=x[i]; x1[1]=x[i+1];
                x2 = _mm_load_ps(x1);
                b = _mm_mul_ps(x2,x2);
                c = _mm_add_ps(b,one);
                mypart2 = _mm_div_ps(one,c); 
                _mm_store_ps(&mypart[i], mypart2);
        }
        for (i = 0; i < n; i++)
                sum += mypart[i];       
        return sum*dx;
}
int main(){
        float res;
        res=pi_4(128);
        printf("pi = %lf\n", 4*res);
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T17:32:54.307

还需要一些修复：

*   `x1`需要用 4 个元素声明。
*   第二个 for 循环需要增加 4（这是导致段错误的原因）。
*   需要对`x1`数组进行 4 个分配。

这些变化都是因为单精度将 4 个值打包到一个 16 字节的向量寄存器中，而双精度只打包 2 个值。我想就是这样：

```
#include <stdio.h>
#include <stdlib.h>
#include <xmmintrin.h>

inline float pi_4 (int n){
   int i;
   __m128 mypart2,x2, b, c, one;
   float *x = (float *)malloc(n*sizeof(float));
   float *mypart = (float*)malloc(n*sizeof(float));
   float sum = 0.0;
   float dx = 1.0/n;
   float x1[4] __attribute__((aligned(16)));
   one = _mm_set_ps1(1.0); // set one to (1,1,1,1)
   for (i = 0; i < n; i++){
      x[i] = dx/2 + dx*i;
   }
   for (i = 0; i < n; i+=4){
      x1[0]=x[i]; x1[1]=x[i+1];
      x1[2]=x[i+2]; x1[3]=x[i+3];
      x2 = _mm_load_ps(x1);
      b = _mm_mul_ps(x2,x2);
      c = _mm_add_ps(b,one);
      mypart2 = _mm_div_ps(one,c); 
      _mm_store_ps(&mypart[i], mypart2);
   }
   for (i = 0; i < n; i++)
      sum += mypart[i];       
   return sum*dx;
}
int main(){
   float res;
   res=pi_4(128);
   printf("pi = %lf\n", 4*res);
   return 0;
} 
```

击鼓...

```
$ ./foo
pi = 3.141597 
```

关于使用的一句话`malloc()`。我认为大多数实现将根据 SSE 加载和存储的要求返回在 16 字节边界上对齐的内存，但这可能无法保证，因为 __m128 不是 C/C++ 类型（保证与“正常”类型对齐） . `memalign()`使用or会更安全`posix_memalign()`。

# javascript - Meteor/Handlebars jQuery 更新 DOM

> ID：15260626
> 
> 赞同：0
> 
> 时间：2013-03-07T00:01:15.387
> 
> 标签：javascript, jquery, dom, meteor

使用*jQuery*和*Meteor*我正在尝试将[TokenInput](http://loopj.com/jquery-tokeninput/)插件绑定到 DOM，如下所示：

```
$(function(){
     console.log("binding tokeninput");
     $(".nameInput").tokenInput(friendsList.data)
}); 
```

问题是特定的 DOM 元素偶尔会被重绘（从 DOM 中删除，然后快速重新添加）。**我需要确保插件始终对该输入有效。**

我想到了几件事：

*   我可以使用 Meteor 的回调在它更新时重新应用它吗？当模板对象被刷新时，我还没有找到来自 Meteor 的回调。
*   我可以使用某种反应绑定吗（例如 .on，虽然 .on 仅用于事件）？
*   我这样做完全错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:37:59.937

如果你的 DOM 元素被一些反应性的东西删除了。如果`mytiem`更改它会触发“[渲染](http://docs.meteor.com/#template_rendered)”模板回调

例如

```
<template name="MeteorIsAwesome">
    {{#each myitem}}
        <div class="dom element meteor">

        </div>
    {{/each}}

    {{!comment - you can put it here or above}}
    <input class="nameInput" type="text">
</template> 
```

Js（您可能正在寻找的回调类型）

```
Template.MeteorIsAwesome.rendered = function () {
    $(".nameInput").tokenInput(friendsList.data)
} 
```

唯一让我担心的一件事是，如果它在重绘时忽略了标记框的状态，那么它可能会变成双重标记

# ruby-on-rails - 应用程序在本地主机和 heroku 上运行良好，但在 heroku 上缺少用户数据？

> ID：15260627
> 
> 赞同：0
> 
> 时间：2013-03-07T00:01:20.343
> 
> 标签：ruby-on-rails, heroku

我正在创建一个应用程序，当我在本地主机上登录时它工作正常；但是，当我在 heroku 上登录该站点时，它表明该用户不存在。基本上，该应用程序在本地运行良好，在 heroku 上也运行良好，但在 heroku 上缺少用户数据。

我运行了“run rake db:migrate”，然后是“heroku run rake db:migrate”，然后是“heroku restart”，然后是“heroku open”

$ heroku run rake db:migrate Running`rake db:migrate`附加到终端... up, run.2704 弃用警告：您在供应商/插件中有 Rails 2.3 风格的插件！Rails 4.0 将删除对这些插件的支持。将它们移出并将它们捆绑到您的 Gemfile 中，或者将它们作为 lib/myplugin/* 和 config/initializers/myplugin.rb 折叠到您的应用程序中。有关更多信息，请参阅发行说明：[http](http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released) ://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released 。（从 /app/Rakefile:7 调用） 弃用警告：您在供应商/插件中有 Rails 2.3 风格的插件！Rails 4.0 将删除对这些插件的支持。将它们移出并将它们捆绑到您的 Gemfile 中，或者将它们作为 lib/myplugin/* 和 config/initializers/myplugin.rb 折叠到您的应用程序中。有关更多信息，请参阅发行说明：[http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released](http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released)。（从 /app/Rakefile:7 调用）连接到由 DATABASE_URL 指定的数据库 迁移到 DeviseCreateUsers (20130305200211) 迁移到 AddNameToUsers (20130306015906) 迁移到 CreatePins (20130306222042)'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:06:32.853

我的猜测是，您希望 Heroku 上的用户表中有用户，但尚未创建任何用户或运行`rake db:seed`（如果您有任何种子用户）。

请记住，应用程序的本地版本与在 Heroku 上运行的应用程序版本具有完全独立的代码库*和*数据库，因此您不必期望在两个应用程序中看到相同的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:11:57.537

您可以使用`heroku db:push`. 他们发布的关于它的博客文章中有更多细节。基本上它所做的就是将您的本地数据库推送到 heroku 应用程序。您可能必须先运行`gem install taps`。

# php - 来自不同服务器上的外部 PHP 文件的 PHP 回显变量

> ID：15260628
> 
> 赞同：2
> 
> 时间：2013-03-07T00:01:22.193
> 
> 标签：php, variables, fopen

我在单独的服务器（服务器 1）上有一个非常基本的 PHP 文件，它实际上包含以下内容：

```
<?php $version = "1.0.0"; ?> 
```

在服务器 2 上的我的 PHP 文件中，我想做的只是回显这个变量。我尝试过使用`get_file_contents()`，但我认为这是用于同一服务器上的文件。所以我也尝试使用类似但也使用的东西`fopen()`，这导致了**Resource id #93**。

在谷歌上环顾四周，我发现了很多不同的例子，但我基本上想有一个简短的例子。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T00:04:20.863

服务器 1：

```
<?php
$version = "1.0.0";
echo $version; 
```

服务器 2：

```
<?php
$version = file_get_contents('http://server1.com/script.php'); 
```

（假设服务器 1 可以从服务器 2 访问网络）

* * *

编辑：从评论开始，如果您希望访问多个变量，您可以使用：

服务器 1：

```
<?php
$version = "1.0.0";
$name = 'this is my name';
echo json_encode(compact('version','name')); 
```

服务器 2：

```
<?php
$data= json_decode(file_get_contents('http://server1.com/script.php'),true);
echo 'my version is:'.$data['version']; 
```

这应该是不言自明的-通过评论提出任何问题..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:12:24.843

file_get_contents 仅用于读取文件的输出，并且您显示的示例没有任何类型的输出。如果您真的想这样做，您应该回显某种数据，以便您可以使用 get_file_contents 获取它。

另一种方法是 include() 它，但这是一个很大的安全漏洞，php.ini 默认不允许此选项。

Mabe 这对你有用，而不是上面的代码，你应该做类似的事情

`<?php echo "1.0.0"; ?>`

然后在其他地方你可以这样做：

```
<?php
    $path = "http://www.somepage.com/version.php";
    $version = file_get_contents(urlencode($path)); 
?> 
```

但请注意，如果您希望 file_get_contents 处理远程文件，则需要修改 php.ini。您需要将指令**allow_url_fopen**修改为 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T00:05:41.977

远程服务器上的 PHP 文件是否托管在 apache 之类的网络服务器上？它是如何托管的？您可以尝试使用 curl

```
$url = "http://<ip_or_domain_of_remote_server>/your_file.php";
$ch = curl_init();  
curl_setopt($ch,CURLOPT_URL, $url);
$result = curl_exec($ch);
echo $result 
```

您还应该确保您的端口在远程服务器上打开并且您的文件具有适当的权限

此外，使用 curl，您可以将变量传递给远程 php 脚本，如下所示：

```
 $url = "http://<ip_or_domain_of_remote_server>/your_file.php";
 $data = array("key0"=>"val0","key1"=>"val1");
 $ch = curl_init(); 
 curl_setopt($ch,CURLOPT_URL, $url);
 curl_setopt($ch,CURLOPT_POST, count($data));       
 curl_setopt($ch,CURLOPT_POSTFIELDS, $data);
 $result = curl_exec($ch);
 echo $result 
```

# java - 在自定义适配器列表视图中检查时吐司

> ID：15260629
> 
> 赞同：1
> 
> 时间：2013-03-07T00:01:38.277
> 
> 标签：java, android, android-layout

我希望当我选中复选框时，代码只返回同一行中的文本视图字符串。

我正在使用 LayoutInflater 和另一个具有创建包含字符串的列表的代码的类。

我的代码：

```
 public class InteractiveArrayAdapter extends ArrayAdapter<model> {

private final List<model> list;
  private final Activity context;

  public InteractiveArrayAdapter(Activity context, List<model> list) {
    super(context, R.layout.rep, list);
    this.context = context;
    this.list = list;

  }

  static class ViewHolder {
        protected TextView text;
        protected CheckBox checkbox;
      }

  public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;
        if (convertView == null) {
          LayoutInflater inflator = context.getLayoutInflater();
          view = inflator.inflate(R.layout.rep, null);
          final ViewHolder viewHolder = new ViewHolder();
          viewHolder.text = (TextView) view.findViewById(R.id.TextView07);
          viewHolder.checkbox = (CheckBox) view.findViewById(R.id.CheckBox05);
          viewHolder.checkbox
              .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

                @Override
                public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                  model element = (model) viewHolder.checkbox
                      .getTag();
                  element.setSelected(buttonView.isChecked());

                }
              });
          view.setTag(viewHolder);
          viewHolder.checkbox.setTag(list.get(position));
        } else {
          view = convertView;
          ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));
        }
        ViewHolder holder = (ViewHolder) view.getTag();
        holder.text.setText(list.get(position).getName());
        holder.checkbox.setChecked(list.get(position).isSelected());
        return view;

      }
} 
```

我的 xml：

```
 <?xml version="1.0" encoding="utf-8"?>
  <AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TableLayout
android:id="@+id/h103"
android:layout_width="match_parent"
android:layout_height="27dp"
android:layout_x="0dp"
android:layout_y="0dp"
android:background="@drawable/back1" >

<TableRow
    android:id="@+id/TableRow05"
    android:layout_width="match_parent"
    android:layout_height="27dp"
    android:layout_marginTop="4dp" >

    <CheckBox
        android:id="@+id/CheckBox05"
        android:layout_width="20dp"
        android:layout_height="20dp"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="-4dp"
        android:button="@drawable/test" />

    <TextView
        android:id="@+id/TextView07"
        android:layout_width="220dp"
        android:layout_height="22dp"
        android:layout_marginLeft="23dp"
        android:layout_marginTop="-6dp"
        android:text="" />

    <TextView
        android:id="@+id/TextView08"
        android:layout_width="110dp"
        android:layout_height="22dp"
        android:layout_marginLeft="0dp"
        android:layout_marginTop="-4dp"
        android:text="095110263" />

</TableRow>

</TableLayout>

</AbsoluteLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T05:12:24.557

您必须在 checkbox.onclicklistener 而不是 checkbox.onCheckedChanged 上工作，因为如果您在列表视图中使用它，那么它将自动调用，然后您选中的复选框将隐藏。

```
 new OnClickListener()
    {
         @Override
         public void onClick(View view)
         {}
    } 
```

在 onclicklistener 中，您将 view 作为参数，这是一个复选框。这里 view 有一个 getparent() 方法，它返回一个视图，其中设置了复选框。您可以通过在日志中打印来检查它。如果您有复选框的父级，那么您还可以获得父级的所有子视图，其中 1 个子视图是复选框。从所有子视图中，您可以获取值以在吐司中显示它们。如果复选框的父级在列表项视图中有另一个父级，那么您也可以通过调用 getparent() 方法来获取父级视图的父级。

请记住，视图有父子关系，所以如果你想要所有的孩子，那么你必须得到父母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T09:55:51.237

首先在您的列表视图底部添加 1 个按钮 btnOk

```
btnOk.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) 
            {
                // TODO Auto-generated method stub
                 StringBuffer responseText = new StringBuffer();

                 ArrayList<model> almodel = adapter.almodel;
                 responseText.append("The following were selected...\n");

                 for(int i=0;i<almodel.size();i++)
                 {
                     model m = almodel.get(i);
                     if(m.isSelected())
                     {

                      responseText.append("\n" + m.getName());

                     }

                  }

         Toast.makeText(getApplicationContext(),responseText,Toast.LENGTH_LONG).show(); 
```

# c - C 编程：如何使用带有 Makefile 和命令行参数的 gdb？

> ID：15260630
> 
> 赞同：7
> 
> 时间：2013-03-07T00:01:44.923
> 
> 标签：c, makefile, gdb, command-line-arguments

要创建 .out 可执行文件，我必须输入：

```
$: make
$: myprogram.out name.ged 
```

我的程序包含一个命令行参数，因此是“name.ged”。

每当我在遇到分段错误（核心转储）后运行 gdb 时，我都会输入：

```
$: gdb a.out core
(gdb): bt 
```

然后我使用 back trace 命令，gdb 返回：

```
#0 0x4a145155 in ?? ()
#1 0x08a16ce0 in ?? () 
```

我什至尝试使用 up 命令向上移动堆栈，但仍然没有运气。我不知道我的程序中的哪一行给了我段错误。gdb 与我的其他不涉及 Makefile 和命令参数的程序一起使用，所以我想知道我的命令是否不正确。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T07:06:49.533

*总结评论（在其他人之前:)。*

您的可执行文件缺少 gdb 显示相关源代码所需的符号信息。您需要将`-g`选项添加到编译命令并生成新的可执行文件。然后重新运行失败的测试以生成新的核心文件。**带有这个可执行文件和核心的gdb**将能够使用`backtrace`.

在 makefile 中，最简单的方法是添加（到）`CFLAGS`与隐式 .oc 规则一起使用的变量。

```
CFLAGS= -g -Wall -Wextra 
```

您也可以将其直接添加到命令行（假设一个不错的 shell :)。`make`这会在命令（和子命令）执行期间将该值设置为环境变量。

```
$ CFLAGS='-g -Wall -Wextra' make 
```

我实际上建议您将其添加到您的 bash .profile 中，这样您总是可以从编译器中获得最多的信息。

```
CFLAGS='-Wall -Wextra' 
```

然后，当您需要它时，将其放入 makefile 以生成可调试的可执行文件：

```
CFLAGS+= -g 
```

# ruby-on-rails - Sidekiq 多环境配置

> ID：15260634
> 
> 赞同：19
> 
> 时间：2013-03-07T00:02:24.253
> 
> 标签：ruby-on-rails, ruby, sidekiq

我查看了多个来源并尝试了各种方案，但无法解决此问题。请指出我正确的方向。

像每个人一样，我有 3 个环境（开发、登台和生产）。

我的 sidekiq.yml 文件中有以下内容

```
# Options here can still be overridden by cmd line args.
#   sidekiq -C config.yml  
---
:verbose: false
:namespace: xyz
:logfile: log/sidekiq.log
:concurrency:  25
:strict: false
:pidfile: tmp/pids/sidekiq.pid
:queues:
  - [stg_xyz_tests_queue, 10]
  - [stg_default_xyz_queue, 2]
  - [stg_xyz_default_queue, 3]
development:
  :verbose: true
  :concurrency:  15
  :queues:
    - [dev_xyz_queue, 10]
    - [dev_default_xyz_queue, 2]
    - [dev_xyz_default_queue, 3]
staging:
  :queues:
    - [stg_xyz_queue, 10]
    - [stg_default_xyz_queue, 2]
    - [stg_xyz_default_queue, 3]
production:
  :queues:
    - [prod_xyz_queue, 10]
    - [prod_default_xyz_queue, 2]
    - [prod_xyz_default_queue, 3] 
```

有了这个，我希望当我用命令启动sidekiq时

```
RAILS_ENV=#{rails_env} bundle exec sidekiq -C config/sidekiq.yml 
```

它将从配置文件中获取所有值并使用适当的队列和日志文件在 log/sidekiq.log 启动 sidekiq，但这不起作用。Sidekiq 启动，但无论我们使用什么环境，它都只会创建 stg_xyz_tests_queue、stg_default_xyz_queue 和 stg_xyz_default_queue。

我尝试的另一种方法是在 config/environments/development.rb 中使用以下代码

```
 #configure Sidekiq for dev environment
  Sidekiq.configure_server do |config|
    config.options[:namespace] = "xyz"
    config.options[:concurrency] = 25
    config.options[:verbose] = true
    config.options[:strict] = false
    config.options[:logfile] = "log/sidekiq.log"
    config.options[:pidfile] = "tmp/pids/sidekiq.pid"

    queues = Array.new
    10.times do
      queues.push "dev_xyz_queue"
    end

    2.times do
      queues.push "dev_default_xyz_queue"
    end

    3.times do
      queues.push "dev_xyz_default_queue"
    end

    config.options[:queues] = queues
    puts "Sidekiq server config options for development => #{config.options.to_yaml}"
  end 
```

有了这个，队列创建好了，但日志文件没有创建或写入，我需要为所有 3 个环境复制此代码。

什么是让 sidekiq 为我的设置无缝工作的最佳方法提前感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-23T11:25:57.417

使用 -e 选项

```
bundle exec sidekiq -e beta -C config/sidekiq.yml 
```

如果所有环境（开发、登台和生产）都在同一台服务器上，则使用命名空间。在您的初始化程序/sidekiq.rb 文件中，

```
Sidekiq.configure_server do |config|
    config.redis = { url: 'redis://localhost:6379/0', namespace: "sidekiq_app_name_#{Rails.env}" }
end

Sidekiq.configure_client do |config|
    config.redis = { url: 'redis://localhost:6379/0', namespace: "sidekiq_app_name_#{Rails.env}" }
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-07T19:49:13.660

使用 -e 传递环境。

```
bundle exec sidekiq -e production -C config/sidekiq.yml 
```

感谢[mperham](https://github.com/mperham)的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-11T13:17:51.840

用于设置日志和环境支持：

```
bundle exec sidekiq -d -L log/sidekiq.log -e production -C config/sidekiq.yml 
```

# file - 从流中间加载 Texture2D

> ID：15260638
> 
> 赞同：1
> 
> 时间：2013-03-07T00:02:36.937
> 
> 标签：file, xna, texture2d

我想知道是否可以在 XNA 中使用 Texture2D.FromStream() 从流中间加载纹理。这个想法是我有一个动画系统，可以将肢体的纹理直接保存到包含其他信息的文件中，比如时间、名称等......我的问题是在尝试加载文件时，当它到达加载纹理。我得到一个 InvalidOperationExecption，但没有真正的细节。到目前为止，这是我的代码：

写作：

```
...         
//writes the name
binWriter.Write(name);

if (texture != null)
{
    binWriter.Write(true);
    //save the texture into the stream
    texture.SaveAsPng(binWriter.BaseStream, texture.Width, texture.Height);
}
else
    binWriter.Write(false);

//writes the ID of the parent limb
binWriter.Write(system.getParentID((Limb)parent));
... 
```

阅读：

```
...
string name = binReader.ReadString();

Texture2D tex = null;

//gets the texture if it exists
bool texture = binReader.ReadBoolean();
if (texture)
    tex = Texture2D.FromStream(graphics, binReader.BaseStream);

//finds the index of the parent limb
int parentID = binReader.ReadInt32();
... 
```

有任何想法吗？

-编辑-解决了！我使用了 getData() 和 setData() 方法，并将数据写入和读取为一个 uint 数组。

# windows - ubuntu 上的 windows virtualboxes 或 windows 上的 ubuntu virtualboxes 提供更好的性能

> ID：15260641
> 
> 赞同：2
> 
> 时间：2013-03-07T00:03:00.113
> 
> 标签：windows, performance, ubuntu, virtualization, virtualbox

我正计划使用多台 Windows 机器和多台执行相关/相互依赖任务的 ubuntu 机器开发一个自动化测试解决方案。要启动这个项目，我想在一个桌面上运行一两台 Windows 机器（虚拟）和几台 ubuntu 机器（虚拟）。看来我可能会将单个桌面推到极限，所以我试图猜测如果我的主机操作系统是 ubuntu 还是 Windows 7，我是否会有更好的运气。我将能够使用主机操作系统作为我环境中的一台机器。台式机是某种高于平均水平的戴尔，但没有什么真正令人印象深刻的。

有人对此有任何见解吗？过去我主要使用 VMWare，我的主机和我的虚拟机一起是 windows。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T02:43:30.270

注意：VirtualBox 是一种类型 2 管理程序（它在主机操作系统上运行，而不是像类型 1 管理程序那样在硬件上运行）并且往往提供比 Hyper-V、ESX 或 XEN（类型 1管理程序）。

因此，如果性能是一个相当重要的问题，您可能会从运行 Win8 或 Windows Server 2012 的机器（例如 Hyper-V）中榨取更多汁液。进一步阅读[这里](http://luhman.org/blog/2012/05/01/performance-hyper-v-vs-esxi-vs-kvm-vs-virtualbox)和[这里](https://forums.virtualbox.org/viewtopic.php?f=1&t=32904)（YMMV）。

坦率地说，当你的环境由 Windows 和 Linux 主机托管时，你的环境将如何运行是不可能的。我建议您构建您的虚拟机并尝试在 Windows 和 Linux 中双启动您的机器并测量您的场景。确保主机中有足够的 RAM 来为每个 VM 分配足够的工作 RAM 和足够的 IO 吞吐量，这样如果一个 VM 使机器的 IO 饱和，您的主机最终不会拖累所有 VM 的性能。

最后要注意的是：不要完全相信在 VM 上测量的细粒度性能结果——即使是最好的虚拟机管理程序也无法真正复制在裸机上运行的代码的性能特征。仅将您的测量值作为指导。

测量，然后再测量。再次测量以确保...然后调整您的配置并重新测量、测量、测量；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T02:21:52.563

我的 0.02 美元：如果您使用的是 VirtualBox，我肯定会选择 Ubuntu。我有一个 AMD 945 Phenom 和 16GB 内存和 12.04LTS 64bit 。我通常可以让 2 个 VM 运行 Windows 和/或 Ubuntu 来宾，并且永远不会消耗超过 7 GB 的 RAM。如果您在测试解决方案中运行它们，您可能会看到 12 GB 或 13 GB 的 RAM，但 CPU 可能是您的问题。我的 AMD Phenom 运行良好，但肯定会达到极限。我在工作和笔记本电脑上使用 VMWare，如果您运行的是 Windows 主机，我建议您使用。我的 Ubuntu 主机上也有 VMWare，但它的运行不如在 Windows 上好，至少对我来说是这样。

# php - 如何从 PayPal IPN 添加结果以更新数据库

> ID：15260642
> 
> 赞同：0
> 
> 时间：2013-03-07T00:03:02.580
> 
> 标签：php, mysql, paypal

我希望能够从 PayPal IPN 帖子中获取信息，并使用某些项目来更新我的数据库。这是我的 ipn.php 的当前代码

```
<?php
// tell PHP to log errors to ipn_errors.log in this directory
ini_set('log_errors', true);
ini_set('error_log', dirname(__FILE__).'/ipn_errors.log');

// intantiate the IPN listener
include('ipnlistener.php');
$listener = new IpnListener();

// tell the IPN listener to use the PayPal test sandbox
$listener->use_sandbox = true;

// try to process the IPN POST
try {
$listener->requirePostMethod();
    $verified = $listener->processIpn();
} catch (Exception $e) {
    error_log($e->getMessage());
    exit(0);
}

if ($verified) {

$errmsg = '';   // stores errors from fraud checks

// 1\. Make sure the payment status is "Completed" 
if ($_POST['payment_status'] != 'Completed') { 
    // simply ignore any IPN that is not completed
    exit(0); 
}

// 2\. Make sure seller email matches your primary account email.
if ($_POST['receiver_email'] != 'PRIMARY EMAIL ADDRESS') {
    $errmsg .= "'receiver_email' does not match: ";
    $errmsg .= $_POST['receiver_email']."\n";
}

// 3\. Make sure the currency code matches
if ($_POST['mc_currency'] != 'USD') {
    $errmsg .= "'mc_currency' does not match: ";
    $errmsg .= $_POST['mc_currency']."\n";
}

// 4\. Ensure the transaction is not a duplicate.
mysql_connect('localhost', '[DB_USER]', '[DB_PW') or exit(0);
mysql_select_db('DB_NAME') or exit(0);

$txn_id = mysql_real_escape_string($_POST['txn_id']);
$sql = "SELECT COUNT(*) FROM orders WHERE txn_id = '$txn_id'";
$r = mysql_query($sql);

if (!$r) {
    error_log(mysql_error());
    exit(0);
}

$exists = mysql_result($r, 0);
mysql_free_result($r);

if ($exists) {
    $errmsg .= "'txn_id' has already been processed: ".$_POST['txn_id']."\n";
}

if (!empty($errmsg)) {

    // manually investigate errors from the fraud checking
    $body = "IPN failed fraud checks: \n$errmsg\n\n";
    $body .= $listener->getTextReport();
    mail('NOTIFICATION EMAIL ADDRESS', 'IPN Fraud Warning', $body);

} else {

    <?php 
    $csvData = file_get_contents($_POST['custom']); 
    $csvNumColumns = 3; 
    $csvDelim = ";"; 
    $data = array_chunk(str_getcsv($csvData, $csvDelim), $csvNumColumns); 
    ?>

    // add this order to a table
    $user_id = mysql_real_escape_string($_POST['item_name']);
    $credit_amount = mysql_real_escape_string($_POST['item_number']);
    $type = mysql_real_escape_string($_POST['custom']);

    $sql = "INSERT INTO TABLE_NAME VALUES 
         (NULL, '$user_id', '$credit_amount', '$type')";

    if (!mysql_query($sql)) {
        error_log(mysql_error());
        exit(0);

    }

}

} else {
    // manually investigate the invalid IPN
    mail('NOTIFICATION EMAIL ADDRESS', 'Invalid IPN', $listener->getTextReport());
}

?> 
```

当使用 PayPal Sandbox 的 IPN 测试服务对其进行测试时，这似乎工作正常，我可以输入 item_name、item_number 和 custom 所需的值（或使用以下代码时）

```
<form name="_xclick" action="https://www.sandbox.paypal.com/cgi-bin/webscr" 
    method="post">
    <input type="hidden" name="cmd" value="_xclick">
    <input type="hidden" name="business" value="SANDBOX EMAIL ADDRESS">
    <input type="hidden" name="currency_code" value="USD">
    <input type="hidden" name="amount" value="9.99">
    <input type="hidden" name="custom" value="<?=$this->package['0']['delivered'];?>"
    <input type="hidden" name="item_name" value="<?=$_SESSION["user_id"]?>"
    <input type="hidden" name="item_number" value="<?=$this->package['0']['number'];?>"
    <input type="hidden" name="return" value="WEBSITE_URL/success">
    <input type="hidden" name="notify_url" value="WEBSITE_URL/ipn.php">
    <input type="image" src="http://www.paypal.com/en_US/i/btn/btn_buynow_LG.gif" 
    border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
</form> 
```

然而，我很快意识到，让“item_name”成为客户可识别的东西，而不是将其定义为“user_id”会好得多。是否可以将“自定义”传递定义为我需要的所有 3 个变量，并在 PayPal 按钮中用分号分隔它们（如下所示）

```
<input type="hidden" name="custom" value="<?=$_SESSION["user_id"]?>;<?=$this->package['0']['number'];?>;<?=$this->package['0']['delivered'];?>" 
```

然后使用类似的东西

```
<?php 
    $csvData = file_get_contents($_POST['custom']); 
    $csvNumColumns = 3; 
    $csvDelim = ";"; 
    $data = array_chunk(str_getcsv($csvData, $csvDelim), $csvNumColumns); 
    ?> 
```

给我单独的变量，然后可以将其定义为“user_id”、“credit_amount”和“type”

一旦这些变量被分离和定义，它们将被发布到数据库，但是，如果表中已经有一个列具有与试图发布的相同的“user_id”以及相同的“类型”正在尝试发布，那么它应该只通过将“credit_amount”添加到旧行中相应的“credit_amount”单元格来更新该行（尝试添加之前表中已经存在的行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:44:48.763

您可以传递多个值，并将它们填充到单个变量中，例如变量“custom”。这不会有问题。过去我自己也这样做过。当我对此进行编码时，我使用了 | 分离这些值，然后让我的 IPN 解析出我的 IPN 脚本中的值。

# jakarta-ee - Jax RS 的空指针异常

> ID：15260643
> 
> 赞同：0
> 
> 时间：2013-03-07T00:03:06.607
> 
> 标签：jakarta-ee, jpa, jax-rs, jboss7.x

我编写了一段简单的代码，让 JAX RS 与 JPA 对话以从数据库中检索客户列表。我不断收到空指针异常。请有人查看下面的日志文件并告知错误的根源。

谢谢

```
@Path("/customers")
public class CustomerResource {

    @PersistenceContext(unitName = "classicmodels", type = PersistenceContextType.EXTENDED)
    private EntityManager em;

    @GET
    @Produces("application/xml")    
    public List<Customer> getAllCustomers() {
        List<Customer>  result = null;
        try{
        result = em.createQuery("select c from Customers c",Customer.class).getResultList();
        }
        catch(NoResultException e){

        }
        return result;
    }
} 
```

堆栈跟踪：

```
23:58:09,141 ERROR [org.apache.catalina.core.ContainerBase.[jboss.web].[default-host].[/HelloWorld].[com.JaxActivator]] (http-localhost-127.0.0.1-8080-1) Servlet.service() for servlet com..JxActivator threw exception: org.jboss.resteasy.spi.UnhandledException: java.lang.NullPointerException
    at org.jboss.resteasy.core.SynchronousDispatcher.handleApplicationException(SynchronousDispatcher.java:340) [resteasy-jaxrs-2.3.1.GA.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.handleException(SynchronousDispatcher.java:214) [resteasy-jaxrs-2.3.1.GA.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.handleInvokerException(SynchronousDispatcher.java:190) [resteasy-jaxrs-2.3.1.GA.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:540) [resteasy-jaxrs-2.3.1.GA.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:502) [resteasy-jaxrs-2.3.1.GA.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119) [resteasy-jaxrs-2.3.1.GA.jar:]
    at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:208) [resteasy-jaxrs-2.3.1.GA.jar:]
    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55) [resteasy-jaxrs-2.3.1.GA.jar:]
    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50) [resteasy-jaxrs-2.3.1.GA.jar:]
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [jboss-servlet-api_3.0_spec-1.0.0.Final.jar:1.0.0.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.10.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:154) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.10.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.10.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.10.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.10.Final.jar:]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_15]
Caused by: java.lang.NullPointerException
    at com.CustomerResource.getAllCustomers(CustomerResource.java:31) [classes:]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_15]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) [rt.jar:1.7.0_15]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.7.0_15]
    at java.lang.reflect.Method.invoke(Method.java:601) [rt.jar:1.7.0_15]
    at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:155) [resteasy-jaxrs-2.3.1.GA.jar:]
    at org.jboss.resteasy.core.ResourceMethod.invokeOnTarget(ResourceMethod.java:257) [resteasy-jaxrs-2.3.1.GA.jar:]
    at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:222) [resteasy-jaxrs-2.3.1.GA.jar:]
    at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:211) [resteasy-jaxrs-2.3.1.GA.jar:]
    at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:525) [resteasy-jaxrs-2.3.1.GA.jar:]
    ... 20 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T08:16:50.313

JPA 和 JAX-RS 都不会[`@PersistentContext`](http://docs.oracle.com/javaee/6/api/javax/persistence/PersistenceContext.html)在运行时处理注释。它只是被忽略并且`em`属性仍然设置为`NULL`- 这就是 NPE 的原因。您应该向应用程序添加一些 EJB 容器，例如[OpenEJB](http://tomee.apache.org/)，或者去掉注释并`em`在您的 JAX-RS 资源中实例化（并启动/停止事务）。

# c - 这个表达式在 C 预处理器中是否正确

> ID：15260644
> 
> 赞同：-5
> 
> 时间：2013-03-07T00:03:14.623
> 
> 标签：c, embedded, c-preprocessor

**当我发送变量时，我想在C**预处理器包含语句中执行以下算术函数`x`。

```
#define calc_addr_data_reg (x) ( base_offset + ((x/7) * 0x20) + data_reg_offset) 
```

我将如何使用位移来实现除法和乘法运算？在除法运算中，我只需要商。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T01:25:45.757

为了回答问题，

> “这个表达式在 C 预处理器中正确吗？”

我看不出有什么问题。

> 我将如何使用位移来实现除法和乘法运算？在除法运算中，我只需要商。

在几乎所有情况下，编译器都会比您更好地优化您的代码。如果你不得不问 StackOverflow 如何做到这一点，那么你的知识还不足以胜过 GCC。我知道我当然不知道。但是因为你问这里是 gcc 如何优化它。

@EdHeal，

这需要更多的空间来正确响应。您在给出的示例（getter 和 setter）中是绝对正确的，但是在这个特定的示例中`inline`，假设它被调用了几次，该函数会稍微增加二进制文件的一侧。

GCC 将该函数编译为：

```
mov ecx, edx
mov edx, -1840700269
mov eax, edi
imul    edx
lea eax, [rdx+rdi]
sar eax, 2
sar edi, 31
sub eax, edi
sal eax, 5
add esi, eax
lea eax, [rsi+rcx]
ret 
```

这比用于调用函数并从函数获取返回值的程序集要多字节，这是 3 个`push`语句，一个调用，一个返回和一个 pop 语句（大概）。

使用 -Os 它编译成：

```
mov eax, edi
mov ecx, 7
mov edi, edx
cdq
idiv    ecx
sal eax, 5
add eax, esi
add eax, edi
ret 
```

这比调用返回推送和弹出的字节少。

因此，在这种情况下，内联时代码是更小还是更大，他使用什么编译器标志真的很重要。

再次操作：

解释那里的代码是什么意思：

这篇文章的下一部分直接来自： http: [//porn.quiteajolt.com/2008/04/30/the-voodoo-of-gcc-part-i/](http://porn.quiteajolt.com/2008/04/30/the-voodoo-of-gcc-part-i/)

* * *

对这种怪物的正确反应是“等等”。我认为可以使用更多解释的一些具体说明：

```
movl $-1840700269, -4(%ebp) 
```

-1840700269 = -015555555555 八进制（由前导零表示）。我将使用八进制表示，因为它看起来更酷。

```
imull %ecx 
```

这将 %ecx 和 %eax 相乘。这两个寄存器都包含一个 32 位的数字，因此这种乘法可能会产生一个 64 位的数字。这不能放入一个 32 位寄存器，因此结果被分成两个：乘积的高 32 位放入 %edx，低 32 位放入 %eax。

```
leal (%edx,%ecx), %eax 
```

这将添加 %edx 和 %ecx 并将结果放入 %eax。lea 表面上的目的是用于地址计算，将其写成两条指令会更清楚：一个 add 和一个 mov，但这需要两个时钟周期来执行，而这只需要一个。

另请注意，该指令使用前一条指令（存储在 %edx 中）乘法的高 32 位，然后覆盖 %eax 中的低 32 位，因此只使用乘法的高位。

```
sarl $2, %edx   # %edx = %edx >> 2 
```

从技术上讲，sar（算术右移）是否等同于 >> 运算符是实现定义的。gcc 保证运算符是有符号数的算术移位（“Signed `>>' 通过符号扩展作用于负数”），并且由于我已经使用过一次 gcc，让我们假设我在其余部分使用它这篇文章的（因为我是）。

```
sarl $31, %eax 
```

%eax 是一个 32 位寄存器，因此它将对 [-231, 231 - 1] 范围内的整数进行操作。这产生了一些有趣的东西：这个计算只有两个可能的结果。如果数字大于或等于 0，则无论如何移位都会将数字减少到 0。如果数字小于 0，则结​​果将为 -1。

这是将此程序集直接重写为 C 的方法，为了安全起见，有一些整数宽度的偏执狂，因为其中一些步骤依赖于正好为 32 位宽的整数：

```
int32_t divideBySeven(int32_t num) {
    int32_t eax, ecx, edx, temp; // push %ebp / movl %esp, %ebp / subl $4, %esp
    ecx = num; // movl 8(%ebp), %ecx
    temp = -015555555555; // movl $-1840700269, -4(%ebp)
    eax = temp; // movl -4(%ebp), %eax

    // imull %ecx - int64_t casts to avoid overflow
    edx = ((int64_t)ecx * eax) >> 32; // high 32 bits
    eax = (int64_t)ecx * eax; // low 32 bits

    eax = edx + ecx; // leal (%edx,%ecx), %eax
    edx = eax; // movl %eax, %edx
    edx = edx >> 2; // sarl $2, %edx

    eax = ecx; // movl %ecx, %eax
    eax = eax >> 31; // sarl $31, %eax

    ecx = edx; // movl %edx, %ecx
    ecx = ecx - eax; // subl %eax, %ecx
    eax = ecx; // movl %ecx, %eax
    return eax; // leave / ret
} 
```

现在这里显然有一大堆低效的东西：不必要的局部变量，一堆不必要的变量交换，以及 eax = (int64_t)ecx * eax1; 根本不需要（我只是为了完成而将其包括在内）。所以让我们清理一下。下一个清单只是消除了大部分杂物，每个块上方都有相应的组件：

```
int32_t divideBySeven(int32_t num) {
    // pushl %ebp
    // movl %esp, %ebp
    // subl $4, %esp
    // movl 8(%ebp), %ecx
    // movl $-1840700269, -4(%ebp)
    // movl -4(%ebp), %eax
    int32_t eax, edx;
    eax = -015555555555;

    // imull %ecx
    edx = ((int64_t)num * eax) >> 32;

    // leal (%edx,%ecx), %eax
    // movl %eax, %edx
    // sarl $2, %edx
    edx = edx + num;
    edx = edx >> 2;

    // movl %ecx, %eax
    // sarl $31, %eax
    eax = num >> 31;

    // movl %edx, %ecx
    // subl %eax, %ecx
    // movl %ecx, %eax
    // leave
    // ret
    eax = edx - eax;
    return eax;
} 
```

和最终版本：

```
int32_t divideBySeven(int32_t num) {
    int32_t temp = ((int64_t)num * -015555555555) >> 32;
    temp = (temp + num) >> 2;
    return (temp - (num >> 31));
} 
```

我还没有回答一个明显的问题，“他们为什么要这样做？” 答案当然是速度。第一个列表中使用的整数除法指令 idiv 需要 43 个时钟周期才能执行。但是 gcc 生成的无除法方法有更多的指令，那么总体上它真的更快吗？这就是我们有基准的原因。

```
int main(int argc, char *argv[]) {
    int i = INT_MIN;
    do {
        divideBySeven(i);
        i++;
    } while (i != INT_MIN);

    return 0;
} 
```

遍历每一个可能的整数？当然！我为这两种实现运行了五次测试，并随着时间的推移对其进行计时。gcc 的用户 CPU 时间分别为 45.9、45.89、45.9、45.99 和 46.11 秒，而我使用 idiv 指令进行汇编的时间分别为 62.34、62.32、62.44、62.3 和 62.29 秒，这意味着天真的实现运行了大约 36%平均较慢。哟。

编译器优化是一件美妙的事情。

* * *

好的，我回来了，现在为什么会这样？

```
int32_t divideBySeven(int32_t num) {
    int32_t temp = ((int64_t)num * -015555555555) >> 32;
    temp = (temp + num) >> 2;
    return (temp - (num >> 31));
} 
```

我们来看看第一部分：

```
int32_t temp = ((int64_t)num * -015555555555) >> 32; 
```

为什么是这个数字？

好吧，让我们把 2^64 除以 7，看看会出现什么。

```
2^64 / 7 = 2635249153387078802.28571428571428571429 
```

看起来很乱，如果我们把它转换成八进制呢？

```
0222222222222222222222.22222222222222222222222 
```

这是一个非常重复的模式，这肯定不是巧合。我的意思是我们记得 7 是`0b111`，而且我们知道当我们除以 99 时，我们往往会得到以 10 为底的重复模式。因此，当我们除以 7 时，我们会得到以 8 为底的重复模式是有道理的。

那么我们的号码是从哪里来的呢？

`(int32_t)-1840700269`是相同的`(uint_32t)2454267027`

`* 7 = 17179869189`

最后 17179869184 是`2^34`

这意味着 17179869189 是 7 2^34 的最接近的倍数。或者换句话说，**2454267027 是适合的最大数字，`uint32_t`当乘以 7 时，它非常接近 2 的幂**

这个八进制数是多少？

```
0222222222223 
```

为什么这很重要？好吧，我们想除以 7。这个数字是 2^34/7... 大约。因此，如果我们乘以它，然后左移 34 次，我们应该得到一个非常接近确切数字的数字。

最后两行看起来像是为了修补近似误差而设计的。

也许在这个领域有更多知识和/或专业知识的人可以加入这一点。

```
>>> magic = 2454267027
>>> def div7(a):
...   if (int(magic * a >> 34) != a // 7):
...     return 0
...   return 1
... 
>>> for a in xrange(2**31, 2**32):
...   if (not div7(a)):
...     print "%s fails" % a
... 
```

故障从 3435973841 开始，有趣的是 0b11001100110011001100110011010001

# javascript - 将行添加到表格并更改其背景颜色

> ID：15260645
> 
> 赞同：0
> 
> 时间：2013-03-07T00:03:19.727
> 
> 标签：javascript, jquery, css, tablerow

我有一个 html 字符串，我想使用 jquery 作为一行附加到表中，并且我还想将这个新添加的行的背景颜色更改为红色。这就是我目前只需添加没有背景颜色的行所得到的：

```
$(outputString).appendTo('#billTable tbody').hide().fadeIn(2000); 
```

但是当我尝试使用下面的代码时，我收到一条错误消息“未捕获的语法错误，意外字符串”：

```
$(outputString).appendTo('#billTable tbody').css({"background-
color":"red"}).hide().fadeIn(2000); 
```

关于如何添加背景颜色的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:04:52.050

嗯，这很奇怪——你的代码应该可以正常工作。您可以尝试改用它：

```
$(outputString).appendTo('#billTable tbody').css('background-color', 'red').hide().fadeIn(2000); 
```

我已经换了

```
.css({"background-color":"red"}) 
```

和

```
.css('background-color', 'red') 
```

# c++ - make文件编译错误

> ID：15260648
> 
> 赞同：0
> 
> 时间：2013-03-07T00:03:21.773
> 
> 标签：c++, eclipse, makefile, g++

我已经使用 eclipse 开发了一个 C++ 项目。当我`Run`从 IDE 中启动命令时，一切都会正常运行，并且程序会成功退出。这是使用 Eclipse 的 make 文件获得的构建输出：

```
**** Build of configuration Debug for project IVPM ****

make all 
Building file: ../IVPM.cpp
Invoking: GCC C++ Compiler
g++ -I/usr/local/include/opencv -I/usr/include/c++/4.5.2 -O0 -g3 -Wall -c -fmessage-length=0 -std=c++0x -MMD -MP -MF"IVPM.d" -MT"IVPM.d" -o "IVPM.o" "../IVPM.cpp"
Finished building: ../IVPM.cpp

Building file: ../TemplateMatx3.cpp
Invoking: GCC C++ Compiler
g++ -I/usr/local/include/opencv -I/usr/include/c++/4.5.2 -O0 -g3 -Wall -c -fmessage-length=0 -std=c++0x -MMD -MP -MF"TemplateMatx3.d" -MT"TemplateMatx3.d" -o "TemplateMatx3.o" "../TemplateMatx3.cpp"
Finished building: ../TemplateMatx3.cpp

Building file: ../main.cpp
Invoking: GCC C++ Compiler
g++ -I/usr/local/include/opencv -I/usr/include/c++/4.5.2 -O0 -g3 -Wall -c -fmessage-length=0 -std=c++0x -MMD -MP -MF"main.d" -MT"main.d" -o "main.o" "../main.cpp"
Finished building: ../main.cpp

Building target: IVPM
Invoking: GCC C++ Linker
g++ -L/usr/local/lib -o "IVPM"  ./IVPM.o ./Matx3.o ./TemplateMatx3.o ./main.o   -lopencv_core -lpng -lopencv_highgui
Finished building target: IVPM

**** Build Finished **** 
```

我现在试图自己编写一个makefile，但无法成功编译。这是我到目前为止所做的：

```
all:main

main:IVPM.o TemplateMatx3.o
    g++ IVPM.o TemplateMatx3.o -L/usr/local/lib -lopencv_core -lpng -lopencv_highgui -o main -c main.cpp

TemplateMatx3.o:TemplateMatx3.cpp
    g++ -I/usr/local/include/opencv -I/usr/local/include/opencv2 -I/usr/include/c++/4.5.2 -O0 -g3 -Wall -fmessage-length=0 -std=c++0x -c TemplateMatx3.cpp

IVPM.o:IVPM.cpp
    g++ -I/usr/local/include/opencv -I/usr/local/include/opencv2 -I/usr/include/c++/4.5.2 -O0 -g3 -Wall -fmessage-length=0 -std=c++0x -c IVPM.cpp

clean:
    rm -rf *o main 
```

但是使用命令在shell上编译`make`会导致以下错误：

```
g++ -I/usr/local/include/opencv -I/usr/local/include/opencv2 -I/usr/include/c++/4.5.2 -O0 -g3 -Wall -fmessage-length=0 -std=c++0x -c IVPM.cpp
g++ -I/usr/local/include/opencv -I/usr/local/include/opencv2 -I/usr/include/c++/4.5.2 -O0 -g3 -Wall -fmessage-length=0 -std=c++0x -c TemplateMatx3.cpp
g++ IVPM.o TemplateMatx3.o -L/usr/local/lib -lopencv_core -lpng -lopencv_highgui -o main -c main.cpp
In file included from /usr/include/c++/4.5/type_traits:35:0,
                 from IVPM.h:39,
                 from main.cpp:8:
/usr/include/c++/4.5/bits/c++0x_warning.h:31:2: error: #error This file requires compiler and library support for the upcoming ISO C++ standard, C++0x. This support is currently experimental, and must be enabled with the -std=c++0x or -std=gnu++0x compiler options.
In file included from main.cpp:9:0:
IVPM.cpp: In member function ‘void IVPM<Matx3DataType>::loadImagesFromFileAndProcessAndSave(const std::string&, const std::string&, const std::string&, IVPM<Matx3DataType>::loadImageType, IVPM<Matx3DataType>::saveImageFormat, IVPM<Matx3DataType>::imageOperationType, float, float, IVPM<Matx3DataType>::interpolationType)’:
IVPM.cpp:140:39: error: no matching function for call to ‘std::basic_ifstream<char>::open(const std::string&, const std::ios_base::openmode&)’
/usr/include/c++/4.5/fstream:526:7: note: candidate is: void std::basic_ifstream<_CharT, _Traits>::open(const char*, std::ios_base::openmode) [with _CharT = char, _Traits = std::char_traits<char>, std::ios_base::openmode = std::_Ios_Openmode]
IVPM.cpp: In member function ‘std::vector<TemplateMatx3<Matx3DataType>*>* IVPM<Matx3DataType>::loadImagesFromFileAndProcessAndReturn(const std::string&, const std::string&, IVPM<Matx3DataType>::loadImageType, IVPM<Matx3DataType>::imageOperationType, float, float, IVPM<Matx3DataType>::interpolationType)’:
IVPM.cpp:208:39: error: no matching function for call to ‘std::basic_ifstream<char>::open(const std::string&, const std::ios_base::openmode&)’
/usr/include/c++/4.5/fstream:526:7: note: candidate is: void std::basic_ifstream<_CharT, _Traits>::open(const char*, std::ios_base::openmode) [with _CharT = char, _Traits = std::char_traits<char>, std::ios_base::openmode = std::_Ios_Openmode]
IVPM.cpp: In member function ‘void IVPM<Matx3DataType>::convertMatx3VectorAndProcessAndSave(std::vector<TemplateMatx3<Matx3DataType>*>*, const std::string&, IVPM<Matx3DataType>::saveImageFormat, IVPM<Matx3DataType>::imageOperationType, float, float, IVPM<Matx3DataType>::interpolationType)’:
IVPM.cpp:555:58: error: there are no arguments to ‘to_string’ that depend on a template parameter, so a declaration of ‘to_string’ must be available
IVPM.cpp:555:58: note: (if you use ‘-fpermissive’, G++ will accept your code, but allowing the use of an undeclared name is deprecated)
IVPM.cpp: In member function ‘void IVPM<Matx3DataType>::loadMatx3FromFileAndProcessAndSave(const std::string&, const std::string&, IVPM<Matx3DataType>::matx3FileType, const std::string&, IVPM<Matx3DataType>::saveImageFormat, IVPM<Matx3DataType>::imageOperationType, float, float, IVPM<Matx3DataType>::interpolationType)’:
IVPM.cpp:704:38: error: no matching function for call to ‘std::basic_ifstream<char>::open(const std::string&, const std::ios_base::openmode&)’
/usr/include/c++/4.5/fstream:526:7: note: candidate is: void std::basic_ifstream<_CharT, _Traits>::open(const char*, std::ios_base::openmode) [with _CharT = char, _Traits = std::char_traits<char>, std::ios_base::openmode = std::_Ios_Openmode]
IVPM.cpp: In member function ‘std::vector<TemplateMatx3<Matx3DataType>*>* IVPM<Matx3DataType>::loadMatx3FromFileAndProcessAndReturn(const std::string&, const std::string&, IVPM<Matx3DataType>::matx3FileType, IVPM<Matx3DataType>::imageOperationType, float, float, IVPM<Matx3DataType>::interpolationType)’:
IVPM.cpp:740:38: error: no matching function for call to ‘std::basic_ifstream<char>::open(const std::string&, const std::ios_base::openmode&)’
/usr/include/c++/4.5/fstream:526:7: note: candidate is: void std::basic_ifstream<_CharT, _Traits>::open(const char*, std::ios_base::openmode) [with _CharT = char, _Traits = std::char_traits<char>, std::ios_base::openmode = std::_Ios_Openmode]
IVPM.cpp: In member function ‘void IVPM<Matx3DataType>::loadVideoAndProcessAndSave(const std::string&, const std::string&, IVPM<Matx3DataType>::saveImageFormat, float, float, float, bool, IVPM<Matx3DataType>::imageOperationType, float, float, IVPM<Matx3DataType>::interpolationType) [with Matx3DataType = double, std::string = std::basic_string<char>]’:
main.cpp:84:2:   instantiated from here
IVPM.cpp:315:118: error: ‘to_string’ was not declared in this scope
make: *** [main] Error 1 
```

显然编译器无法找到标准库的匹配函数。但是我已经在我的编译选项中包含了 std 库，那么为什么编译器会抱怨呢？正确的程序是什么？

# php - 登录后以新用户身份重新连接到 postgreSQL

> ID：15260650
> 
> 赞同：0
> 
> 时间：2013-03-07T00:03:38.210
> 
> 标签：php, postgresql

我正在使用 postgreSQL 9.1。我在数据库上创建了四个角色/用户，每个角色/用户在不同的表上都有不同的权限。

当有人尝试登录时，php 以“guest”（第一个角色/用户）身份连接到数据库，例如

```
$conn = pg_connect("host=localhost port=5432 dbname=mydb user=guest password=guest")or die('no connection, sorry'); 
```

来宾只能从“用户”表中“选择”以检查登录。成功登录后，我想根据“用户”表上名为“级别”的 int 将用户重新连接到数据库。如果在表中找到的“级别”为 1，我想将用户重新连接为“低”角色/用户，例如

```
$conn = pg_connect("host=localhost port=5432 dbname=mydb user=low password=low")or die('no connection, sorry'); 
```

“低”角色/用户只能在某些表上插入和更新。

随后用于其他角色/用户。如果在 users 表上找到的“级别”为 2，则以“中”连接（可以插入/更新/删除），如果是 3，则以“高”（超级用户）连接。

简而言之，就像：以“访客”身份连接，因此您可以“选择”并验证登录 > 登录成功 > 根据“级别”，重新连接为“低”，因此您可以插入/更新或作为“中”所以你可以插入/更新/删除或作为“高”所以，超级用户。

我怎样才能做到这一点？成功登录后重新连接，以便用户获得所需的权限，以便他可以执行正确的操作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T14:30:24.623

简单的事情是 GRANT USAGE 您希望来宾用户将权限更改为的角色：

```
GRANT ROLE my_app_user1 TO guest; 
```

然后在成功认证后，您可以：

```
SET ROLE my_app_user1; 
```

您可以同时运行身份验证检查。

# python - 如何用一个字符替换多个空格？

> ID：15260652
> 
> 赞同：11
> 
> 时间：2013-03-07T00:03:44.893
> 
> 标签：python, python-3.x

到目前为止，这是我的代码：

```
input1 = input("Please enter a string: ")
newstring = input1.replace(' ','_')
print(newstring) 
```

因此，如果我将输入输入为：

```
I want only    one     underscore. 
```

它目前显示为：

```
I_want_only_____one______underscore. 
```

但我希望它像这样显示：

```
I_want_only_one_underscore. 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-07T00:05:29.313

此模式将用单个下划线替换任何空白组

```
newstring = '_'.join(input1.split()) 
```

如果您只想替换空格（不是制表符/换行符/换行符等），使用正则表达式可能更容易

```
import re
newstring = re.sub(' +', '_', input1) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T00:08:08.107

肮脏的方式：

```
newstring = '_'.join(input1.split()) 
```

更好的方式（更可配置）：

```
import re
newstring = re.sub('\s+', '_', input1) 
```

使用功能的额外超脏方式`replace`：

```
def replace_and_shrink(t):
    '''For when you absolutely, positively hate the normal ways to do this.'''
    t = t.replace(' ', '_')
    if '__' not in t:
        return t
    t = t.replace('__', '_')
    return replace_and_shrink(t) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-16T13:17:06.937

**第一种方法（不起作用）**

```
>>> a = '213         45435             fdgdu'
>>> a
'213         45435                            fdgdu                              '
>>> b = ' '.join( a.split() )
>>> b
'213 45435 fdgdu' 
```

如您所见，变量 a 在“有用的”子字符串之间包含大量空格。不带参数的 split() 函数和 join() 函数的组合清除了多个空格中的初始字符串。

当初始字符串包含特殊字符（例如 '\n'）时，前面的技术会失败：

```
>>> a = '213\n         45435\n             fdgdu\n '
>>> b = ' '.join( a.split() )
>>> b
'213 45435 fdgdu'   (the new line characters have been lost :( ) 
```

为了纠正这个问题，我们可以使用以下（更复杂的）解决方案。

**第二种方法（作品）**

```
>>> a = '213\n         45435\n             fdgdu\n '
>>> tmp = a.split( ' ' )
>>> tmp
['213\n', '', '', '', '', '', '', '', '', '45435\n', '', '', '', '', '', '', '', '', '', '', '', '', 'fdgdu\n', '']
>>> while '' in tmp: tmp.remove( '' )
... 
>>> tmp
['213\n', '45435\n', 'fdgdu\n']
>>> b = ' '.join( tmp )
>>> b
'213\n 45435\n fdgdu\n' 
```

**第三种方法（作品）**

在我看来，这种方法有点pythonic。核实：

```
>>> a = '213\n         45435\n             fdgdu\n '
>>> b = ' '.join( filter( len, a.split( ' ' ) ) )
>>> b
'213\n 45435\n fdgdu\n' 
```

# r - 添加一个标识个人的新列

> ID：15260654
> 
> 赞同：5
> 
> 时间：2013-03-07T00:03:56.263
> 
> 标签：r

我的数据集由每个人的三种治疗方法（C、S 和 E）组成。看起来像这样。

```
 Year   Cultivar   Site   Distance   Plant   Treat    yield1   yield2
1   2011   Blue       ABR    0m         1       C        0.879    1.5
2   2011   Blue       ABR    0m         1       S        0.384    2.3
3   2011   Blue       ABR    0m         1       E        0.03     0.5
4   2011   Blue       ABR    0m         2       C        0.923    1.2
5   2011   Blue       ABR    0m         2       S        0.344    0.5
6   2011   Blue       ABR    0m         2       E        0.07     0.7
7   2011   Blue       ABR    50m        1       C        0.255    3.4
8   2011   Blue       ABR    50m        1       S        1.00     2.4
9   2011   Blue       ABR    50m        1       E        0.1      0.9
.
.
. 
```

我有两年的数据，2 个品种，15 个地点，每个地点 3 个距离，每个距离 10 株植物。基本上我有很多数据（>1400 行）。我想要做的是添加一个新列，为整个研究中的每个人分配一个新数字。我希望我的数据最终看起来像这样。

```
 Individual  Year   Cultivar   Site   Distance   Plant   Treat    yield1   yield2
1   1           2011   Blue       ABR    0m         1       C        0.879    1.5
2   1           2011   Blue       ABR    0m         1       S        0.384    2.3
3   1           2011   Blue       ABR    0m         1       E        0.03     0.5
4   2           2011   Blue       ABR    0m         2       C        0.923    1.2
5   2           2011   Blue       ABR    0m         2       S        0.344    0.5
6   2           2011   Blue       ABR    0m         2       E        0.07     0.7
7   3           2011   Blue       ABR    50m        1       C        0.255    3.4
8   3           2011   Blue       ABR    50m        1       S        1.00     2.4
9   3           2011   Blue       ABR    50m        1       E        0.1      0.9
.
.
. 
```

我对 R 比较陌生，所以如果这应该相对容易做到，我深表歉意。我知道我应该能够“找到”每个个体作为植物*距离*地点*品种*年份的独特组合，但老实说，我不知道我将如何进行编码，而且我还没有设法找到任何类似的帮助页面。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T00:20:07.117

以及使用的`data.table`解决方案`.GRP`

> .GRP 是一个整数，长度为 1，包含一个简单的组计数器。第 1 组 1 个，第 2 组 2 个，依此类推。

```
library(data.table)
DT <- data.table(df)

DT[,grp :=.GRP,by = list(Year,Cultivar, Site, Distance, Plant)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T00:16:05.213

这是使用的解决方案`plyr`：

```
library(plyr)
df$id <- id(df[c("Year","Cultivar", "Site", "Distance", "Plant")], drop=TRUE) 
#Add whichever columns contain the unique combination you require
df

 Year Cultivar Site Distance Plant Treat yield1 yield2 id
1 2011     Blue  ABR       0m     1     C  0.879    1.5  1
2 2011     Blue  ABR       0m     1     S  0.384    2.3  1
3 2011     Blue  ABR       0m     1     E  0.030    0.5  1
4 2011     Blue  ABR       0m     2     C  0.923    1.2  2
5 2011     Blue  ABR       0m     2     S  0.344    0.5  2
6 2011     Blue  ABR       0m     2     E  0.070    0.7  2
7 2011     Blue  ABR      50m     1     C  0.255    3.4  3
8 2011     Blue  ABR      50m     1     S  1.000    2.4  3
9 2011     Blue  ABR      50m     1     E  0.100    0.9  3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T00:23:10.133

不使用额外包的解决方案：

```
df$id <- factor(apply(df[,c("Year","Cultivar", "Site", "Distance", "Plant")], 1, paste, collapse=""))
levels(df$id) <- 1:length(levels(df$id)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T00:50:00.957

这里不是最好的解决方案，而是一个解决方案：

```
library(qdap)
df$id <- as.numeric(factor(paste2(df[qcv(terms="Year Cultivar Site Distance Plant")]))) 
```

# jquery - 在 li 元素中选择 div 并在 li-click 上执行操作

> ID：15260655
> 
> 赞同：0
> 
> 时间：2013-03-07T00:04:04.543
> 
> 标签：jquery, events, dom, select

我觉得我选择有问题。实际上我有一个 div 包含两个相同大小的其他 div（正面和背面）。我想创建一个点击事件，就像拥有一张卡片的两面一样。没有翻转效果，只需要在点击时覆盖/显示。

我的 html 与此相关：

```
enter code here`enter code here`<ul id="boxes">
    <li></li>
    <li></li>
    <li></li>
    <li class="rotate">
<div class="flip-container">
<div class="front">
<img src="kuh.jpg">
</div>  
<div class="back">
<p>Oohh...behave!"Austin Powers"</p>
</div>
</div>      
</ul>

enter code here$(function() { 
```

这将是 jQuery。添加类“goaway”在 z-index -2 上设置相应的元素，从而显示背后的 div。我试过用 CSS 设置它。

```
$("#boxes li").on("click", function(){
    if($(this).next(".front").hasClass("goaway")){
        $(this).next(".front").removeClass("goaway");
    }else{
        $(this).next(".front").addClass("goaway");  
    }
}); 
```

感谢您提供任何有用的链接。我确信这是正确的方向，但无法弄清楚为什么它不起作用。

BR

**带有fadeToggle、delay 和clearQueue 和stop 的新JS。**

```
$(function() {$("#boxes li").on("click", 
function(){$(this).find(".front,.back").clearQueue().stop().fadeToggle(800)
.delay(10000).fadeToggle(800);});}); 
```

当更频繁地点击 li 时，它会按预期中止该功能，但在 10 秒延迟后切换到后面。我认为它会放弃每一步，因此应该显示正面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:10:08.183

您是否尝试过重置 z-index？

`.comehere { z-index: 2; }`

```
$(document).on('click', '.flip-container', function() {
    $(this).child('.front').toggleClass('comehere').toggleClass('goaway');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:14:14.213

使用所需的 CSS 进行演示以显示其正常工作[http://jsfiddle.net/VRu6X/1/](http://jsfiddle.net/VRu6X/1/)

需要少量的 jQuery

```
$("#boxes li").on("click", function(){
    $(this).find('.front,.back').toggleClass('goaway');
}); 
```

HTML，需要重新开始上课

```
<ul id="boxes">
    <li class="rotate">
        <div class="flip-container">
            <div class="front">
                FRONT
           </div>  
            <div class="back goaway">
                BACK
            </div>
        </div>      
    </li>
</ul> 
```

**编辑**

*“还有一件事，由于过渡非常艰难，我一直在寻找一个更顺畅地切换课程的选项。我可以在你的解决方案上应用一些褪色吗”*

您可以更流畅地显示和隐藏
设置回不显示

```
 <div class="flip-container">
        <div class="front">
            FRONT
       </div>  
       <div class="back" style="display:none">
            BACK
       </div>
    </div> 
```

[并](http://jsfiddle.net/VRu6X/3/)使用`fadeToggle()` [http://jsfiddle.net/VRu6X/2/](http://jsfiddle.net/VRu6X/2/)
或者`slideToggle()`http://jsfiddle.net/VRu6X/3/

```
$("#boxes li").on("click", function(){
    $(this).find('.front,.back').fadeToggle(1000);
}); 
```

**或者**，您可以翻转卡片[http://jsfiddle.net/VRu6X/5/](http://jsfiddle.net/VRu6X/5/)

```
<ul id="boxes">
    <li class="rotate">
        <div class="flip-container">
            <div class="front">
                <img src="http://www.madore.org/~david/images/cards/english/king-clubs.png" />
           </div>  
           <div class="back" style="display:none;">
                <img src="http://chetart.com/blog/wp-content/uploads/2012/05/playing-card-back.jpg" />
            </div>
        </div> 
    </li>
</ul> 
```

CSS

```
#boxes li{
    display:block;
}
.flip-container{
    position:relative;
}
.flip-container div{
    z-index:2;
    position:absolute;
    height:200px;
    width:130px;
}

.front img, .back img{
    width:100%;
    height:100%;
} 
```

JS

```
$("#boxes li").on("click", function(){
    //$(this).find('.front,.back').slideToggle(500);
    var $showing=$(this).find('.front:visible, .back:visible');
    var $notshowing=$(this).find('.front:not(:visible), .back:not(:visible)')
    $showing.animate({height:0, marginTop:100}, 300, function(){
        $(this).hide();
        $notshowing.show().css({height:0, marginTop:100}).animate({height:200, marginTop:0}, 300);
    });
}); 
```

请注意 jQuery 中的高度和边距是设置的，而不是被查找的，所以如果你更改 CSS，你必须将其更改为，或者以正确的方式进行（让 jQuery 第一次发现高度）

# ios - Open GL ES，多个着色器

> ID：15260656
> 
> 赞同：0
> 
> 时间：2013-03-07T00:04:13.440
> 
> 标签：ios, objective-c, xcode, opengl-es

我很好奇您是否可以在 Open GL ES 2.0 程序中拥有多个着色器。

这是我的着色器代码。然而，属性和制服仅从rigid.vert 和rigid.frag 着色器中检索变量：

```
- (BOOL)loadShaders
{
GLuint rigidVertShader, rigidFragShader, skinningVertShader, skinningFragShader;
NSString *rigidVertShaderPathname, *rigidFragShaderPathname, *skinningVertShaderPathname, *skinningFragShaderPathname;

// Create shader program.
_program = glCreateProgram();

// Create and compile rigid vertex shader.
rigidVertShaderPathname = [[NSBundle mainBundle] pathForResource:@"rigid" ofType:@"vert"];
if (![self compileShader:&rigidVertShader type:GL_VERTEX_SHADER file:rigidVertShaderPathname]) {
    NSLog(@"Failed to compile rigid vertex shader");
    return NO;
}

// Create and compile rigid fragment shader.
rigidFragShaderPathname = [[NSBundle mainBundle] pathForResource:@"rigid" ofType:@"frag"];
if (![self compileShader:&rigidFragShader type:GL_FRAGMENT_SHADER file:rigidFragShaderPathname]) {
    NSLog(@"Failed to compile rigid fragment shader");
    return NO;
}

// Create and compile skinning vertex shader.
skinningVertShaderPathname = [[NSBundle mainBundle] pathForResource:@"skinning" ofType:@"vert"];
if (![self compileShader:&skinningVertShader type:GL_VERTEX_SHADER file:skinningVertShaderPathname]) {
    NSLog(@"Failed to compile skinning vertex shader");
    return NO;
}

// Create and compile skinning fragment shader.
skinningFragShaderPathname = [[NSBundle mainBundle] pathForResource:@"skinning" ofType:@"frag"];
if (![self compileShader:&skinningFragShader type:GL_FRAGMENT_SHADER file:skinningFragShaderPathname]) {
    NSLog(@"Failed to compile skinning fragment shader");
    return NO;
}

// Attach rigid vertex shader to program.
glAttachShader(_program, rigidVertShader);

// Attach rigid fragment shader to program.
glAttachShader(_program, rigidFragShader);

// Attach skinning vertex shader to program.
glAttachShader(_program, skinningVertShader);

// Attach skinning fragment shader to program.
glAttachShader(_program, skinningFragShader);

// Link program.
if (![self linkProgram:_program]) {
    NSLog(@"Failed to link program: %d", _program);

    if (rigidVertShader) {
        glDeleteShader(rigidVertShader);
        rigidVertShader = 0;
    }
    if (rigidFragShader) {
        glDeleteShader(rigidFragShader);
        rigidFragShader = 0;
    }
    if (skinningVertShader) {
        glDeleteShader(skinningVertShader);
        skinningVertShader = 0;
    }
    if (skinningFragShader) {
        glDeleteShader(skinningFragShader);
        skinningFragShader = 0;
    }
    if (_program) {
        glDeleteProgram(_program);
        _program = 0;
    }

    return NO;
}

// GET UNIFORM LOCATIONS
// Dictionary to store each active uniform
NSMutableDictionary *m_uniforms = [[NSMutableDictionary alloc] init];
int m_nUniforms = -1;
glGetProgramiv( _program, GL_ACTIVE_UNIFORMS, &m_nUniforms );

for(GLuint i = 0; i < m_nUniforms; i++)  {
    int name_len=-1, num=-1;
    GLenum type = GL_ZERO;
    char uniformName[100];

    glGetActiveUniform( _program, i, sizeof(uniformName)-1, &name_len, &num, &type, uniformName );

    uniformName[name_len] = 0;

    GLuint uniform = glGetUniformLocation( _program, uniformName );

    [m_uniforms setObject:[NSNumber numberWithUnsignedInt:uniform]
                   forKey:[NSString stringWithUTF8String:uniformName]];    
}

// GET ATTRIBUTE LOCATIONS
// Dictionary to store each active attribute
NSMutableDictionary *m_attributes = [[NSMutableDictionary alloc] init];
int m_nAttributes = -1;
glGetProgramiv( _program, GL_ACTIVE_ATTRIBUTES, &m_nAttributes );

for(GLuint i = 0; i < m_nAttributes; i++)  {
    int name_len=-1, num=-1;
    GLenum type = GL_ZERO;
    char attributesName[100];

    glGetActiveAttrib( _program, i, sizeof(attributesName)-1, &name_len, &num, &type, attributesName );

    attributesName[name_len] = 0;

    GLuint attributes = glGetAttribLocation( _program, attributesName );

    [m_attributes setObject:[NSNumber numberWithUnsignedInt:attributes]
                     forKey:[NSString stringWithUTF8String:attributesName]];
}

// Release vertex and fragment shaders.
if (rigidVertShader) {
    glDetachShader(_program, rigidVertShader);
    glDeleteShader(rigidVertShader);
}
if (rigidFragShader) {
    glDetachShader(_program, rigidFragShader);
    glDeleteShader(rigidFragShader);
}
if (skinningVertShader) {
    glDetachShader(_program, skinningVertShader);
    glDeleteShader(skinningVertShader);
}
if (skinningFragShader) {
    glDetachShader(_program, skinningFragShader);
    glDeleteShader(skinningFragShader);
}

return YES;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:17:06.113

OpenGL ES 不允许在一个程序中使用多个相同类型的着色器，这[与“桌面”OpenGL 不同](https://stackoverflow.com/questions/9168252/attaching-multiple-shaders-of-the-same-type-in-a-single-opengl-program)（但它只允许您声明通用函数/变量，因此无论如何它与连接着色器源大致相同）。从[glAttachShader() 规范](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glAttachShader.xml)：

> 同一类型的多个着色器对象不能附加到单个程序对象。
> 
> ...
> 
> ### 错误
> 
> ...`GL_INVALID_OPERATION`如果*着色器*已附加到程序，或者与着色器相同类型的另一个着色器对象已附加到程序，*则*生成。

我强烈怀疑第三次和第四次调用`glAttachShader()`set `GL_INVALID_OPERATION`。

检查你的错误！我`glGetError()`循环调用，直到它返回`GL_NO_ERROR`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:13:35.500

在 OpenGL ES 中，每个着色器程序只能使用一个片段和一个顶点着色器。否则它只是行不通。

# c# - 关于在while循环中覆盖数据

> ID：15260661
> 
> 赞同：1
> 
> 时间：2013-03-07T00:04:30.297
> 
> 标签：c#, list

我在输出到 WebGrid 时遇到问题，因为我的列表被覆盖了，所以到最后，我为网格上的每一行写入了最后一行数据。我必须使用 while 循环，因为数据不断被添加到，我们正在查看大量数据，所以我试图不写入另一个列表。

```
public class ChemData
{
    string strSQLconnection = "Server=Server;Database=data;Uid=Username;Pwd=Password";

    public int productId { get; set; }
    public string productName { get; set; }

    public List<ProdData> ProdList = new List<ProdData>();

    public List<ProdData> ProdDataPull()
    {
        ProdData Analysis = new ProdData();
        SqlDataReader reader = null;
        SqlConnection conn = new SqlConnection(strSQLconnection);
        SqlCommand query = new SqlCommand("Select * from producttable");

        conn.Open();
        query.Connection = new SqlConnection(strSQLconnection);
        query.Connection.Open();
        reader = query.ExecuteReader();
        while (reader.Read())
        {
            if (!reader.IsDBNull(0)) Analysis.productId = reader.GetInt32(0);
            if (!reader.IsDBNull(1)) Analysis.productName = reader.GetString(1);

            ProdList.Add(Analysis);
         } 
         return ChemList;
   } 
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:10:01.103

这是因为`Analysis`只创建一次。每次将其添加到列表中都会添加对同一对象的引用。将创建移动到while循环内应该可以解决这个问题

```
while (reader.Read())
{
    ProdData Analysis = new ProdData();
    if (!reader.IsDBNull(0)) Analysis.productId = reader.GetInt32(0);
    if (!reader.IsDBNull(1)) Analysis.productName = reader.GetString(1);

    ProdList.Add(Analysis);
} 
```

这会在循环的每次迭代中创建一个新`ProdData`对象并将其分配给`Analysis`，然后更新其内容并将该引用添加到列表中。

随着`Analysis`循环外的创建`Analysis`继续指向同一个`ProdData`对象，该对象被一遍又一遍地添加到列表中，而其值每次都被覆盖。

请参阅：[引用类型与值类型](http://www.codeproject.com/Articles/76153/Six-important-NET-concepts-Stack-heap-value-types#Value%20types%20and%20reference%20types)

# sharepoint-2010 - 错误：访问被拒绝，在主页上，可以看到其他页面共享点在线

> ID：15260662
> 
> 赞同：0
> 
> 时间：2013-03-07T00:04:38.877
> 
> 标签：sharepoint-2010

错误：访问被拒绝，在主页上，可以看到其他页面，当前用户您当前登录为：amark@microsoft.com 以其他用户身份登录 SharePoint online 有趣的可以看到子网站但看不到主页，请任何人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:17:22.200

不，是系统管理员从主页删除了所有用户，没想到，他应该进监狱:)

# java - 如何更改首选项活动的背景？

> ID：15260663
> 
> 赞同：0
> 
> 时间：2013-03-07T00:04:42.767
> 
> 标签：java, android, android-preferences

我有一个 prefs xml 活动，其中有一个用于打开和关闭声音的复选框，以及一个供用户输入其姓名的编辑框。有没有办法让首选项活动全屏并设置背景？如果可能的话，我想设置自己的 png 背景。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T00:29:36.850

使用主题并`android:theme="@style/CustomTheme"`在您的 styles.xml 中使用以下项目`<activity>` 创建一个`CustomTheme`

```
<style name="CustomTheme">
<item name="android:windowBackground">@drawable/backgroundimage</item>
<item name="android:windowFullscreen">true</item>
</style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T00:11:11.260

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/backgroundimage"
android:gravity="center_horizontal"
android:orientation="vertical" > 
```

这里的“背景图像”是来自您的资源的图像。

在 oncreate() -

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                            WindowManager.LayoutParams.FLAG_FULLSCREEN) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T02:23:04.870

我的 pref.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

<EditTextPreference
    android:title="Ime"
    android:key="ime"
    android:summary="Upišite svoje ime">
</EditTextPreference>

<CheckBoxPreference
    android:title="Zvuk"
    android:defaultValue="true"
    android:key="checkbox"
    android:summary="Ukljucite ili iskljucite zvukove u igri"/>

</PreferenceScreen> 
```

# php - 使用 PHP SQLBuilder 更新多行

> ID：15260665
> 
> 赞同：0
> 
> 时间：2013-03-07T00:04:46.380
> 
> 标签：php, sql, google-fusion-tables, sqlbuilder

我需要编辑一些不是我编写的 PHP，我已经完成了大部分工作，但有一点我无法弄清楚正确的语法。

基本上，我们从 Google Fusion Table 中获取数据并用它填充表格，一旦我们编辑了表格中的数据，我们就可以将该信息更新到同一表格的生产版本。更新查询之一如下所示：

```
if($table_row[12]=="New"){
  $tableid1 = '1bsSleKDBdkhQZfn-oADx0tUtoOc32RqIyiX05Bo';
 $insertresults = $ftclient->query(SQLBuilder::insert($tableid1, 
    array('SUBURB'=> $table_row[1],
    'ROAD_NAME' => $table_row[2],
    'DESCRIPTION' => $table_row[3],
    'DIRECTION' => $table_row[4],
    'STATUS' => $table_row[5],
    'SITE_ID' => $table_row[6],
    'COMMON_NAME' => $table_row[7],
    'Lat' => $table_row[8],
    'Long' => $table_row[9],
        'OPERATING_DAY' => $table_row[10],
    'OPERATING_HOURS' => $table_row[11],
    'Version' => "current")));
  $insertresults = explode("\n", $insertresults);
  $rowid1 = $insertresults[1];
     $updateresults = $ftclient->query(SQLBuilder::update($tableid, 
    array('SUBURB'=> $table_row[1],
    'ROAD_NAME' => $table_row[2],
    'DESCRIPTION' => $table_row[3],
    'DIRECTION' => $table_row[4],
    'STATUS' => $table_row[5],
    'SITE_ID' => $table_row[6],
    'COMMON_NAME' => $table_row[7],
    'Lat' => $table_row[8],
    'Long' => $table_row[9],
        'OPERATING_DAY' => $table_row[10],
    'OPERATING_HOURS' => $table_row[11],
    'Version' => "current",
    'Edited_By' => $table_row[13],
    'Date_Edited' => $table_row[14]),$table_row[0]));
  $updateresults = explode("\n", $updateresults);
  $rowid2 = $updateresults[1]; 
  } 
```

我需要做的是编写一个类似类型的 SQLBuilder 查询，当 SUBURB 在其中一个中更改时，它将更新具有相同 SITE_ID 的每条记录（即，如果一条记录具有 SUBURB Sydney，SITE_ID 1，则每条具有 SITE_ID 1 的记录必须是如果一条记录的 SUBURB 值从悉尼更改为墨尔本，则更改）。不确定如何在语法上表达这一点，或者我将如何使用 SQLBuilder 编写查询。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:20:55.207

SQLBuilder 显然是一个本地包含的类。您需要查看它的文档或更新方法本身，以了解它如何期望 where 子句被编码。

用于此的 SQL 将是：

```
"UPDATE tableid SET SUBURB = '{$table_row[1]}' WHERE SITE_ID = '{$table_row[6]}'" 
```

如果您能够运行纯 SQL，那么就可以了。否则我需要查看类库。

# php - 使用 Xdebug 配置 cachegrind 时遇到问题

> ID：15260675
> 
> 赞同：0
> 
> 时间：2013-03-07T00:05:35.073
> 
> 标签：php, linux, xdebug, cachegrind

我正在尝试为 cachegrind 配置 Xdebug，但我无法启用探查器功能以转储执行的网页。

我正在使用[官方指南](http://xdebug.org/docs/profiler)（以及更多类似设置的指南），但它似乎不起作用。

我在我的两台 Linux 机器（Ubuntu 和 Fedora）上都试过了。Xdebug 可以很好地进行调试，我可以启动`valgrind --tool=cachegrind`应用程序，因此两者都应该正确安装。

我在 php.ini 中激活和停用 profiler_enable 和 profiler_enable_trigger 选项并重新启动服务器，没有运气。更改了输出目录，因为我认为它可能与权限有关。使用`?XDEBUG_PROFILER=1`URL 中的标志作为参数似乎也无济于事。

与 cachegrind 的配置相关的任何其他线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:18:49.190

以下基本的 xdebug.ini 应该可以解决问题：

```
; check that the path is ok for you
zend_extension=/usr/lib/php5/20090626/xdebug.so
xdebug.profiler_enable=1
xdebug.profiler_output_name = cachegring.out.%s
xdebug.profiler_output_dir = /tmp 
```

请注意，它为每个请求启用分析器，这是一个重要的性能问题。但是，您应该先测试这是否有效。如果您发现它有效，请默认禁用它。

* * *

关于 valgrind。

请注意，您尝试执行的操作是不可能的。xdebug 分析器不是为使用/连接到 valgrind 而设计的。它只是使用与 valgrind 相同的输出格式。因此，格式与示例相同：

```
valgrind --tool=cachegrind --cachegrind-out-file=test.cachegrind ls -al 
```

`kcachegrind`通常你会使用linux 和`wincachegrind`windows上的 GUI 程序来分析 cachegrind 文件。

# recurring-events - Martin Fowler 的重复事件论文中的“String eventArg”参数是什么？

> ID：15260679
> 
> 赞同：2
> 
> 时间：2013-03-07T00:05:59.397
> 
> 标签：recurring-events

我正在尝试编写 Martin Fowler[在此处找到](https://martinfowler.com/apsupp/recurring.pdf)的定期事件日历的实现，我了解其中的大部分内容，但在他的所有抽象类中，他传递了一个名为 eventArgs 的字符串作为参数。

例如：

```
class Schedule {
    public boolean isOccuring( String eventArg, Date aDate )
    public Vector dates( String eventArg, DateRange during )
    public Date nextOccurence( String eventArg, Date aDate )
} 
```

有谁知道它是干什么用的？是否只是为了表明这只是伪代码而我应该把我的论点放在那里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-15T02:56:11.410

In your comment, you write:

> Okay so I think when he creates an instance of ScheduleEvent he would have you add a string sort of like event = new ScheduleEvent('myEvent') which would then be stored in the "event" variable. When you call isOccuring on the Schedule you pass the name of your event and it'll cycle through each SE object and see if they have the same name to then check if it is occuring.

Correct. It's simply a label for the event whose recurrence you're describing with a `TemporalExpression`. If you wanted to integrate your implementation with arbitrary existing systems, you might even make that an `Object` instead of a `String`, and then you could pass in some `Event` object defined elsewhere.

# javascript - Bazinga Expose 翻译包不翻译

> ID：15260684
> 
> 赞同：2
> 
> 时间：2013-03-07T00:06:24.960
> 
> 标签：javascript, symfony, translation

我有一个通过 ajax 创建的 DOM 元素，如下所示：

```
$('.inner').append('<p>Salva Foto</p>'); 
```

我的 Twig 是组成的

```
{% javascripts
***my js***
%}
<script src="{{ asset_url }}"></script>
{% endjavascripts %}

<script type="text/javascript" src="{{ asset('bundles/bazingaexposetranslation/js/translator.min.js') }}"></script>
<script type="text/javascript" src="{{ url('bazinga_exposetranslation_js') }}"></script> 
```

我的语言环境就是这样，在我的包中我有messages.en.yml（我尝试使用.xlf）：

```
Salva Foto: Save Photo 
```

默认语言环境是它，现在我正在尝试翻译英语

如果我查看从浏览器上传的文件，我会看到一个 javascript 文件：en 并包含

```
Translator.locale = 'en';
Translator.defaultDomains = ["messages"];
Translator.add("messages:Salva Foto", "Save Photo"); 
```

但通过 javascript 创建的段落未翻译

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T09:00:15.043

在您的 JS 中，您必须使用使用 Bazinga 创建的对象转换器。如果你试试

```
<script type="text/javascript">
    alert(Translator.get("messages:Salva Foto"));
</script> 
```

在您看到的对话框中

```
Save Photo 
```

# c++ - SFINAE 适用的 C++11 标准中提到的“直接上下文”到底是什么？

> ID：15260685
> 
> 赞同：43
> 
> 时间：2013-03-07T00:06:31.283
> 
> 标签：c++, templates, c++11, language-lawyer, sfinae

C++11 标准的第 14.8.2/8 段规定了替换失败应或不应导致“硬”编译错误（从而导致编译失败）或“软”错误的条件导致编译器从一组候选者中丢弃模板以进行重载解析（不会导致编译失败并启用众所周知的 SFINAE 习惯用法）：

> 如果替换导致无效的类型或表达式，则类型推导失败。无效类型或表达式是如果使用替换参数编写的格式错误的类型或表达式。[ 注意：访问检查是替换过程的一部分。—尾注]**只有在函数类型及其模板参数类型的直接上下文中的无效类型和表达式会导致推导失败**。[...]

“*直接上下文*”这个词在整个 C++11 标准中只出现了 8 次，每次它们后面都跟着（或作为一部分出现）以下（非规范）文本的实例：

> [注意：*替换类型和表达式的求值可能会导致副作用，例如类模板特化和/或函数模板特化的实例化，隐式定义函数的生成等。这些副作用不在“立即上下文”，并可能导致程序格式错误。*——尾注]

*该注释给出了关于直接上下文*的含义的（不是非常慷慨的）提示，但至少对我而言，这通常不足以决定替换是否会导致“硬”编译错误。

**问题：**

您能否提供解释、决策过程和/或一些具体示例，以帮助确定在函数类型及其模板参数类型的“*直接上下文*”中发生和不发生替换错误的情况下？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-07T01:04:06.283

如果您考虑确定模板参数替换结果所需的所有模板和隐式定义的函数，并想象它们是在替换开始之前首先生成的，那么第一步中发生的任何错误都不在直接上下文中，并导致硬错误。

如果所有这些实例化和隐式定义（可能包括将函数定义为已删除）都可以正确完成，那么在替换期间发生的任何进一步“错误”（即在引用函数模板中的实例化模板和隐式定义函数时）签名）不是错误，但会导致扣减失败。

所以给定一个这样的函数模板：

```
template<typename T>
void
func(typename T::type* arg); 
```

以及如果其他功能的扣减失败将使用的“后备”：

```
template<typename>
void
func(...); 
```

和这样的类模板：

```
template<typename T>
  struct A
  {
    typedef T* type;
  }; 
```

调用`func<A<int&>>(nullptr)`将替代and`A<int&>`为了`T`检查是否`T::type`存在，它必须实例化`A<int&>`。如果我们想象在调用之前放置一个显式实例化`func<A<int&>(nullptr)`：

```
template class A<int&>; 
```

那么这将失败，因为它试图创建类型`int&*`并且不允许使用指向引用的指针。我们没有到检查替换是否成功的地步，因为实例化存在一个硬错误`A<int&>`。

现在假设有一个明确的专业化`A`：

```
template<>
  struct A<char>
  {
  }; 
```

调用`func<A<char>>(nullptr)`需要实例化`A<char>`，所以想象一下调用之前程序中某处的显式实例化：

```
template class A<char>; 
```

这个实例化没问题，没有错误，所以我们继续进行参数替换。工作的实例化`A<char>`，但`A<char>::type`不存在，但这没关系，因为它只在 的声明中被引用`func`，所以只会导致参数推导失败，`...`而是调用后备函数。

在其他情况下，替换可能会导致特殊成员函数被隐式定义，可能被删除，这可能会触发其他实例化或隐式定义。如果在“生成实例化和隐式定义”阶段发生错误，那么它们就是错误，但如果成功但在替换过程中，函数模板签名中的表达式被证明是无效的，例如因为它使用了不存在的成员或被隐式定义为删除的东西，这不是错误，只是演绎失败。

所以我使用的心智模型是替换需要首先做一个“准备”步骤来生成类型和成员，这可能会导致硬错误，但是一旦我们完成了所有必要的生成，任何进一步的无效使用都不是错误。当然，这一切只是将问题从“*直接上下文*是什么意思？”转移开来。到“在检查此替换之前需要生成哪些类型和成员？” 所以它可能会也可能不会帮助你！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-07T00:18:41.107

*直接上下文*基本上就是您在模板声明本身中看到的内容。除此之外的一切都是一个硬错误。硬错误示例：

```
#include <type_traits>

template<class T>
struct trait{ using type = typename T::type; };

template<class T, class U = typename trait<T>::type>
void f(int);
void f(...);

template<class T, class U = typename T::type>
void g(int);
void g(...);

template<class>
struct dependent_false : std::false_type{};

template<class T>
struct X{
    static_assert(dependent_false<T>(), "...");
    using type = void;
};

int main(){
    f<int>(0);
    g<X<int>>(0);
} 
```

[现场版。](https://ideone.com/De8ega)

# ios - AFNetworking 没有成功和错误

> ID：15260687
> 
> 赞同：0
> 
> 时间：2013-03-07T00:06:36.290
> 
> 标签：ios, afnetworking, put

我正在尝试将 png 图像和一些参数上传到我的 rails 服务器，我从[http://nsscreencast.com/episodes/31-posting-multi-part-forms-with-afnetworking遵循这个示例](http://nsscreencast.com/episodes/31-posting-multi-part-forms-with-afnetworking)

我的代码片段如下

当代码运行时，我看到进度从 0% 到 95..98%（看起来它从未完成过）。它从来没有碰到我的 rails 控制器。它也会冻结我的 IOS 应用程序......知道为什么它会冻结我的应用程序吗？我究竟做错了什么？谢谢，欢迎/赞赏任何评论或意见。

```
NSData *imageData = UIImagePNGRepresentation(image);

NSDictionary *params = @{
                         @"latte[location]" : @"value1",
                         @"latte[submitted_by]" : @"value2",
                         @"latte[comments]" : @"value3"
                         };

NSURLRequest *putRequest = [[MApiClient sharedInstance] multipartFormRequestWithMethod:@"PUT"
                                                                                  path:@"somepath.json"
                                                                            parameters:params
                                                             constructingBodyWithBlock:^(id formData) {
                                                                 [formData appendPartWithFileData:imageData
                                                                                             name:@"latte[photo]"
                                                                                         fileName:@"latte.png"
                                                                                         mimeType:@"image/png"];
                                                             }];

AFHTTPRequestOperation *operation = [[AFJSONRequestOperation alloc] initWithRequest:putRequest];
[operation setUploadProgressBlock:^(NSUInteger bytesWritten, long long totalBytesWritten, long long totalBytesExpectedToWrite) {
    NSLog(@"%f", (totalBytesWritten / (float) totalBytesExpectedToWrite));

}];

[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    if (operation.response.statusCode == 200 || operation.response.statusCode == 201) {
        NSLog(@"whats here, %@", responseObject);
    } else {
        NSLog(@"whats here, %@", responseObject);
    }
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"whats here, %@", error);

}];

[[MyApiClient sharedInstance] enqueueHTTPRequestOperation:operation]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:04:58.373

我会分析你的项目，它可能会抛出一些块变量的问题。

# android - 如何传递 ArrayList > 活动之间？

> ID：15260689
> 
> 赞同：1
> 
> 时间：2013-03-07T00:06:58.960
> 
> 标签：android, android-intent, arraylist

我正在尝试`ArrayList<HashMap<String, String>>`在活动之间传递。我将如何使用 Intents 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:13:18.070

ArrayList 是可序列化的（以及 HashMap 和字符串），所以试试[`putExtra(String, Serializable)`](https://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20java.io.Serializable%29).

```
ArrayList<HashMap<String, String>> list = new ArrayList<HashMap<String, String>>();
Intent intent = new Intent(this, MyActivity.class); 
intent.putExtra("key", list); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-12T11:25:51.100

用于在and方法`putExtra(String, Serializable)`中传递值以检索数据。`Intent``getSerializableExtra(String)`

**将 ArrayList> 从 Activity A 传递给 Activity B**

```
Intent intent = new Intent(this, B.class);
HashMap<String, String> hm = new HashMap<String, String>();
hm.put("sunil", "sahoo");
ArrayList<HashMap<String, String>> arl = new ArrayList<HashMap<String, String>>();
arl.add(hm);
intent.putExtra("arraylist", arl);
startActivityForResult(intent, 500); 
```

**检索活动 B 中的数据**

```
ArrayList<HashMap<String, String>> arl = (ArrayList<HashMap<String, String>>) getIntent().getSerializableExtra("arraylist");
System.out.println("...serialized data.."+arl); 
```

# iphone - 如何进行链式转换？

> ID：15260690
> 
> 赞同：0
> 
> 时间：2013-03-07T00:07:08.657
> 
> 标签：iphone, ios5, uiview

我在屏幕上有 40 个 UIView 平铺对象。然后在视图控制器中，我有例程使用`transitionFromView`消息翻转这些图块。如果我在循环中一次翻转它们，在模拟器上它看起来很流畅，但在 iPhone 上它正在努力翻转它们。那是因为 iPhone CPU/GPU 速度较慢，一次无法处理这么多的转换。所以我想要的是进行某种链式转换，最终在任何给定时间转换 5-10。现在每次翻转需要 0.4 秒。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:22:06.307

UIView`transition...`动画方法需要一个`completion`块。有你的链子。排列您的块并将它们设置为链中连续调用的完成块。

或者构建一个分组动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T02:26:27.680

我可能会采取仅将动画一对一错开的方法。

只需维护`NSArray *views`所有要制作动画的视图，然后开始序列`[self transformViewAtIndex:[NSNumber numberWithInt:0]];`

```
- (void)transformViewAtIndex:(NSNumber *)index {
    // Make sure we're not out of bounds
    if ([index intValue] >= [views count]) return;

    // Get the view we want to work on
    UIView *view = [views objectAtIndex:[index intValue]];

    // Perform the animation
    [UIView animateWithDuration:0.4 animations:^{ // Whatever duration you want
        // ... This is where your actual transformation code goes
    }];

    // Schedule the next animation
    NSNumber *newIndex = [NSNumber numberWithInt:[index intValue] + 1];
    [self performSelector:@selector(transformViewAtIndex:) withObject:newIndex afterDelay:0.2]; // Set delay to a number that is effective
} 
```

# java - 以字符串形式读入并存储为 Base64 的二进制文件

> ID：15260695
> 
> 赞同：0
> 
> 时间：2013-03-07T00:07:37.000
> 
> 标签：java, android, string, base64, binaryfiles

我对旧程序有疑问。该程序从磁盘读取文件作为字符串并将文件编码为 Base64 并将文件保存到磁盘。问题是读入的文件是二进制文件。有没有办法扭转这个过程？

这是有问题的代码行：

```
String sig = android.util.Base64.encodeToString(
    utility.readFileAsString(file.getPath()).getBytes(),
    android.util.Base64.DEFAULT); 
```

我们已更新应用程序以将文件读取为字节，但这对已创建的文件没有帮助。

任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:07:44.197

您可以将文件 Base64 解码为字符串，然后调用 String.getBytes() 或 String.getBytes(charset) 如果您知道`utility.readFileAsString()`使用了什么字符集，但您必须接受很多（如果不是全部）文件已损坏的可能性.

# codeigniter - CodeIgniter JQuery $.post

> ID：15260696
> 
> 赞同：2
> 
> 时间：2013-03-07T00:07:46.383
> 
> 标签：codeigniter, .post

我正在尝试检查用户输入的名称是否已经存在于数据库中，并且正在使用 AJAX 来执行此操作。但是，如果名称确实存在于数据库中（我知道哪些在数据库中），它永远不会返回 true。我只是想知道我是否做得正确。

这是我的文本字段：

```
<input type="text" name="name" id="name"/>
                <div id='check'></div> 
```

这是 $.post 请求：

```
<script>
$(document).ready(function() {

$('#name').keyup(function(){
    isAvailable();

});

function isAvailable()
{
    var name = $('#name').val();

    $.post("controller/check", { name: name },
        function(result)
        {
            if(result == 1)
            {
                $('#check').html('It is available.');
            }
            else
            {
                $('#check').html('It's not available.');
            }

        });
} 
```

});

这是在控制器中调用的函数：

```
public function check()
{
    $name = $this->input->post('name');
    return $this->model->check_title();
} 
```

这是模型：

```
function check_title()
{
    $this->db->select('name');
    $this->db->from('products');
    $this->db->where('name', $this->input->post('name'));
    $result = $this->db->get();

    $rows = $result->num_rows();
    if($rows > 0)
    {
        return 0;
    }
    else
    {
        return 1;
    }
} 
```

我想我知道问题出在哪里，可能是`$name`控制器中的 没有被识别？或者传入的数据`$.post`不正确，即密钥应该是数据库中的字段名称？真的很困惑，希望能得到一些帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:11:29.310

您需要实际回显控制器函数中的值。不使用控制器函数的返回值。

# javascript - 使用相同的函数创建多个对象

> ID：15260699
> 
> 赞同：0
> 
> 时间：2013-03-07T00:08:02.627
> 
> 标签：javascript, jquery

我有一个倒计时到 0 的计时器。它适用于一个，但我想在同一页面上创建第二个计时器。我可以创建第二个计时器，但它不会倒计时，第一个倒计时的速度是两倍。我该怎么做。这是我的代码

```
<script>
var Timer;
var TotalSeconds;

function CreateTimer(TimerID, Time) {
  Timer = document.getElementById(TimerID);
  TotalSeconds = Time;
  UpdateTimer()
  window.setTimeout("Tick()", 1000);
}

function Tick() {
  if(TotalSeconds <= 0) {
    TotalSeconds = 0;
    return;
  }

  TotalSeconds -= 1;
  UpdateTimer()
  window.setTimeout("Tick()", 1000);
}

function UpdateTimer() {
  var Seconds = TotalSeconds;
  var Days = Math.floor(Seconds / 86400);
  Seconds -= Days * 86400;
  var Hours = Math.floor(Seconds / 3600);
  Seconds -= Hours * (3600);
  var Minutes = Math.floor(Seconds / 60);
  Seconds -= Minutes * (60);
  var TimeStr = ((Days > 0) ? Days + " days " : "") + LeadingZero(Hours) + ":" + LeadingZero(Minutes) + ":" + LeadingZero(Seconds)
  Timer.innerHTML = TimeStr;
}

function LeadingZero(Time) {
  return(Time < 10) ? "0" + Time : +Time;
}
</script>

<?php 
$tomorrow  = mktime(0, 0, 0, date("m")  , date("d")+1, date("Y"));
$currentTime = time();
$today = $tomorrow - $currentTime;
?>

<div id="timer"></div>

<script type="text/javascript">
  var today = <?php echo $today; ?>
  window.onload = CreateTimer("timer", today);
</script>

<div id="timer2"></div>

<script type="text/javascript">
  var today = <?php echo $today; ?>
  window.onload = CreateTimer("timer2", today);
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:14:57.730

它的滴答速度快两倍的原因是因为两个倒计时共享相同的`TotalSeconds`变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T01:21:48.730

这是一个如何制作独立计时器的示例。参数传递给`start`，它们可能更好地传递给`getTimer`或传递给`init`函数。还可以调用`stop`随时停止计时器的方法，`clear`并且`restart`可以很容易地添加方法。

```
function getTimer() {
  var el, currentNum, lag, timerRef;

  function start(id, startNum, delay) {
    el = document.getElementById(id);
    currentNum = startNum;
    lag = delay;
    run();
  }

  function run() {
    if (timerRef) stop();
    el.innerHTML = currentNum;
    if (currentNum--) {
      timerRef = setTimeout(run, lag);
    }
  }

  function stop() {
    if (timerRef) clearTimeout(timerRef);
  }

  return {
    start: start,
    run: run, 
    stop: stop
  };
}

window.onload = function() {

  var t0 = getTimer();
  t0.start('d0', 10, 1000);

  var t1 = getTimer();
  t1.start('d1', 20, 500);

  var t2 = getTimer();
  t2.start('d2', 40, 250);
} 
```

HTML：

```
<div id="d0"></div>
<div id="d1"></div>
<div id="d2"></div> 
```

# javascript - Highslide.js 如何启用禁用的箭头按钮

> ID：15260700
> 
> 赞同：0
> 
> 时间：2013-03-07T00:08:04.380
> 
> 标签：javascript, highslide

我有画廊的网站。每个画廊都有ajax分页。我已经从下一页或上一页制作了幻灯片放映图片。当您到达页面上的最后一个图像并按键盘上的右箭头键时，图像列表将更新，highslide 将自动重新打开新图像。我可以按键盘上的右键，但不能单击箭头，因为它已被禁用。

我想启用禁用的箭头，但取决于某些条件。这个有可能？

谢谢你。

# algorithm - 递归关系：T(n) = 2T(n/2) + log(n)

> ID：15260702
> 
> 赞同：2
> 
> 时间：2013-03-07T00:08:13.863
> 
> 标签：algorithm, recurrence

我有一个递归关系，如下所示：

> T(n) = 2T(n/2) + log [2] n

我正在使用递归树方法来解决这个问题。最后，我想出了以下等式：

T(n)=(2log [2] n)(n-1)-(1*2 + 2*2 ² + ... + k*2 ^k ) 其中 k=log [2] n。

我正在尝试为这个方程找到一个 theta 符号。但我找不到总和的封闭公式（1*2 + 2*2 ² + ... + k*2 ^k）。我怎样才能找到 T(n) 的大 theta 符号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:54:30.007

如果你知道一些微积分，你应该能够很容易地解决这个问题。

1 + x + x^2 + ... + x^(n+1) = (x^(n+2) - 1) / (x - 1)

乘以 x，x + x^2 + x^3 + ... + x^(n + 2) = (x^(n + 3) - x) / (x - 1)

微分 LHS 将为您提供 x = 2 的系列。微分 RHS 将为您提供封闭形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T12:48:53.540

根据我的计算，我想您犯了一些错误：

> T(n)=(k-1)*log(n/(2^(k-1)))+2^k*T(n/2^k)。

把 k=log(n)

如果您愿意，我可以发布我的解决方案的图片。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T00:13:47.293

你应该使用[主定理](http://en.wikipedia.org/wiki/Master_theorem)来计算你的复杂性，它会容易得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-16T11:16:09.180

这些递归可以用[大师定理](https://en.wikipedia.org/wiki/Master_theorem)解决。在你的情况下`a = 2`，`b = 2`因此`c = logb(a) = 1`。

你的`f(n) = log n`and 因为`n^c`增长得比你的快`f`，所以它在解决方案中占主导地位，你属于第一种情况。所以复杂度是`O(n)`。

# java - 如何在相机捕获的图像上叠加图像或视图

> ID：15260706
> 
> 赞同：13
> 
> 时间：2013-03-07T00:08:58.537
> 
> 标签：java, android, eclipse, image, android-activity

我正在做的是将相机中的图像绘制到 a 上`canvas`，然后将`view`包含图像的 a 转换为 a`bitmap`并将其绘制在画布上。然后最终`bitmap`保存到外部存储。

问题是`canvas`似乎将自身调整为预览窗口大小，而不是保存的图像大小。

这是我的活动类中将捕获的视图合并到相机图像顶部的部分：

```
 Bitmap myImage = BitmapFactory.decodeByteArray(imageData, 0,
                imageData.length, options);
        Bitmap mutableBitmap = myImage.copy(Bitmap.Config.ARGB_8888, true);

        Paint paint = new Paint();
        Canvas canvas = new Canvas(mutableBitmap);

        view.setDrawingCacheEnabled(true);
        viewCapture = Bitmap.createBitmap(view.getDrawingCache());
        view.setDrawingCacheEnabled(false);
        canvas.drawBitmap(viewCapture, 0, 0, paint);

        fileOutputStream = new FileOutputStream(dir + "/" + imgName + ".jpg");

        BufferedOutputStream bos = new BufferedOutputStream(fileOutputStream);
        mutableBitmap.compress(CompressFormat.JPEG, quality, bos); 
```

这会将位图保存在捕获的图像之上，但由于大小不同，它会偏移到左上角。

我通过在我的 surfaceChanged 中执行以下操作来设置不同的大小

```
 Camera.Parameters p = mCamera.getParameters();
  Camera.Size myBestPreviewSize = getBestPreviewSize(w, h, p);
  p.setPreviewSize(myBestPreviewSize.width, myBestPreviewSize.height);
  Camera.Size myBestPictureSize = getBestPictureSize(w, h, p);
  p.setPictureSize(myBestPictureSize.width, myBestPictureSize.height); 
```

显然，通过这样做，我得到了预览窗口的最佳分辨率，以及捕获图像的最佳分辨率。我相信这个问题是由两种不同的解决方案引起的，但要弄清楚为什么我被困在哪里。

希望下面的图片能更好地描述这个问题：

此图像显示预览窗口。如您所见，Android 处于图像的中间。 ![在此处输入图像描述](../Images/e59f43e059627f00c5269786752b4308.png)

我捕获了上面的图像并保存了它。我去查看它，这就是它的样子： ![在此处输入图像描述](../Images/534ae6a4d17ea38827a27de6c0b92ba6.png)

请注意，Android 不再位于中间，而是位于左上角。

作为另一项测试，我将 android 部分移出屏幕，如下一个相机预览所示 ![在此处输入图像描述](../Images/8d78beda6a61cf6cc6a9cbbe88eca527.png)

我完全按照上图所示捕获了图像，在查看它时，android 被完全切断了它在预览窗口中的样子，但是当它应该是全屏时，它又在左上角 ![在此处输入图像描述](../Images/90b98f810f61d0db573e4a3bd5a52904.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T19:54:41.043

从相机检索到的位图将会很大（2000+ 像素宽）。您绘制图像的 SurfaceView 仅与您的设备分辨率一样大（约 1000 像素宽）。当您将一个绘制到另一个上时，您需要对其进行缩放，否则它将最终变为应有大小的 1/2（如您的屏幕截图所示）。这是我修改代码的方法。

```
view.setDrawingCacheEnabled(true);
viewCapture = Bitmap.createBitmap(view.getDrawingCache());
view.setDrawingCacheEnabled(false);
//Source Rect sized to the surface view.
Rect src = new Rect(0, 0, viewCapture.getWidth(), viewCapture.getHeight());
//Destination RectF sized to the camera picture
RectF dst = new RectF(0, 0, myImage.getWidth(), myImage.getHeight());
canvas.drawBitmap(viewCapture, src, dst, paint); 
```

我知道您在设置相机参数和尺寸方面付出了一些努力，但要么它不起作用，要么您需要采取不同的方法。不过，我认为这应该可行。您的第二个屏幕截图，其中两个图像中都夹有 Android 家伙，这表明这只是一个简单的缩放问题。

希望有帮助！

# javascript - 为选定字段禁用 DropKick.js

> ID：15260708
> 
> 赞同：1
> 
> 时间：2013-03-07T00:09:06.597
> 
> 标签：javascript, jquery-plugins, jquery-dropkick

DropKick 使选择框很漂亮，但是当它们是多选或定义大小的选择框时，它的作用相同，它们都变成了单个选择框。有什么方法可以禁用所选字段的 DropKick 吗？

例如，如果类包含“nokick”，则不要触摸该字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-18T12:59:04.500

这个问题很老了，但是有人可以搜索答案。我认为作者是在询问某些领域的“不启用”dropkick，而不是像每个人都认为的那样禁用它们（例如“禁用”属性）。

如果这是真的，那么：

在您的应用程序中，dropkick 可能由 jQuery 代码（或类似代码）初始化：

```
$("select").dropkick(); 
```

只需将类“nokick”（如您所写）添加到您希望被 dropkick 忽略的“选择”，并将初始化更改为：

```
$("select").not('.nokick').dropkick(); 
```

使用该 jQuery 将采用所有选择元素，但不是那些具有“nokick”类的元素。最好阅读有关此的文档：http: [//api.jquery.com/not/](http://api.jquery.com/not/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T19:25:36.877

希望此时您已经找到了问题的解决方案。

实际上，我也有同样的要求，即即时禁用 dropkick 下拉菜单。

因此，我采用的方法是在由 dropkick 框架在 Select 标记上创建的 div 标记中动态添加一个类 -“gd-disable”。

```
.gd-disable{
opacity:0.4;
}

.gd-disable a{
cursor: no-drop !important;
} 
```

你的 div 标签看起来像这样

```
<div style="display: block;" class="dk_container gd-disable dk_theme_default" id="dk_container_color" tabindex="4"> <!-- Interal Code --> </div> 
```

如需更多参考，您可以查看[此处提到的此示例](https://github.com/gunjanpatel/Supreme-Disable-Dropdown-feature-for-DropKick)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T01:54:40.693

是的 Dropkick 非常好。但是对于多选框或其他类型，您不需要空手而归。Chosen.js 非常适合：http: [//harvesthq.github.io/chosen/](http://harvesthq.github.io/chosen/)

祝你好运。

# java - android java.lang.IllegalArgumentException 在 HttpGet

> ID：15260718
> 
> 赞同：5
> 
> 时间：2013-03-07T00:09:58.080
> 
> 标签：java, android, httpclient

我正在尝试从远程服务器获得响应。这是我的代码：

```
private static String baseRequestUrl = "http://www.pappico.ru/promo.php?action=";

    @SuppressWarnings("deprecation")
    public String executeRequest(String url) {
        String res = "";
        HttpClient httpClient = new DefaultHttpClient();
        HttpResponse response;      

        try {   
            //url = URLEncoder.encode(url, "UTF-8");
            HttpGet httpGet = new HttpGet(url);

            response = httpClient.execute(httpGet);
            Log.d("MAPOFRUSSIA", response.getStatusLine().toString());

            HttpEntity entity = response.getEntity();

            if (entity != null) {
                InputStream inStream = entity.getContent();
                res = streamToString(inStream);

                inStream.close();
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        return res; 
    }

    public String registerUser(int userId, String userName) {
        String res = "";
        String request = baseRequestUrl + "RegisterUser&params={\"userId\":" +
                 userId + ",\"userName\":\"" + userName + "\"}";

        res = executeRequest(request);

        return res; 
    } 
```

我得到以下异常`HttpGet httpGet = new HttpGet(url)`：

> java.lang.IllegalArgumentException：索引 59 处查询中的非法字符：http: [//www.pappico.ru/promo.php](http://www.pappico.ru/promo.php?action=RegisterUser&params=) ?action=RegisterUser¶ms= {"userId":1,"userName":"Юрий Клинских"}

'{' 字符有什么问题？我已经阅读了一些有关此异常的帖子并找到了解决方案，但是此解决方案会导致另一个异常：如果我取消注释行`url = URLEncoder.encode(url, "UTF-8");`，它会在`response = httpClient.execute(httpGet);`出现此类异常的情况下出现：

> java.lang.IllegalStateException：目标主机不能为空，或在参数中设置。方案=null，主机=null，路径= [http://www.pappico.ru/promo.php?action=RegisterUser¶ms=](http://www.pappico.ru/promo.php?action=RegisterUser&params=) {"userId":1,"userName":"Юрий+Клинских"}

不知道我该怎么做才能让它工作。任何帮助，将不胜感激：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T01:15:51.273

您必须对 URL 参数进行编码：

```
String request = baseRequestUrl + "RegisterUser&params=" +    
        java.net.URLEncoder.encode("{\"userId\":" + userId + ",\"userName\":\"" + userName + "\"}", "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:18:32.247

尝试：

```
public String registerUser(int userId, String userName) {
        String res = "";

        String json = "{\"userId\":" +
                 userId + ",\"userName\":\"" + userName + "\"}";
        String encodedJson = URLEncoder.encode(json, "utf-8");

        String request = baseRequestUrl + "RegisterUser&params=" + encodedJson;

        res = executeRequest(request);
        return res;
    } 
```

（这会将 URL 片段编码为 params=...），而不是整个 URL。您还可以查看上述可能的[重复项](https://stackoverflow.com/questions/10786042/java-url-encoding)。

* * *

奖励：请注意，JSON 通常通过 POST（而不是 GET）传输。您可以使用“Live Headers”之类的程序并手动执行这些步骤（例如注册用户）以查看幕后发生的情况。在这种情况下，您将在实体正文中发送 {..} 信息。这是一种方法 -[在 Java 中使用 JSON 的 HTTP POST](https://stackoverflow.com/questions/7181534/http-post-using-json-in-java)

此外，另一种编写 JSON 的方法（尤其是当它变得更复杂时）是使用模型类，然后使用 ObjectMapper（例如 Jackson）将其转换为字符串。这很方便，因为您可以避免在字符串中使用像 \" 这样的格式。

下面是一些例子：[JSON to Java Objects, best practice for modeling the json stream](https://stackoverflow.com/questions/9844494/json-to-java-objects-best-practice-for-modeling-the-json-stream)

# google-chrome - Chrome 扩展弹出窗口停止正确显示

> ID：15260721
> 
> 赞同：3
> 
> 时间：2013-03-07T00:10:09.557
> 
> 标签：google-chrome, google-chrome-extension

直到最近，扩展程序的所有弹出窗口都可以正常工作。

我摆弄了一些整洁的书签扩展的 .css（在 users/.../chrome/user data/default/extensions/...中）试图增加它的高度。增加了高度，但出现了滚动条，所以我只是撤消了所有更改并保存了 .css。

不确定何时，但在所有扩展的所有弹出窗口显示一个小空框而不是它们通常的功能之后不久：

截图

![](../Images/fcf30cdddb22bf1c808f673addecaf46.png)

检查它们（检查组）显示没有错误，在“元素”选项卡上我可以看到 html 很好，它似乎加载正常，只是没有显示。

我尝试禁用所有扩展，重新启动 Chrome 并重新启用它们。完全删除扩展，然后重新安装一个来检查。重新安装最新的（开发）Chrome。清空 Chrome 缓存。没有任何效果。我使用的是 27.0.1430.3 dev-m 版本。想不出还有什么可做的。

关于可能是什么问题的任何想法？或者我能做些什么来解决它？

# google-chrome - Chrome 中的背景位置与 Firefox 或 IE 不同

> ID：15260724
> 
> 赞同：1
> 
> 时间：2013-03-07T00:10:41.360
> 
> 标签：google-chrome, background

我有一个 1322x622 的背景图片，我将内容放在中间 660 像素。这适用于 Firefox 19（Windows 和 Ubuntu）和 IE 8，但不适用于 Chrome 25。在 Chrome 中，背景图像位置似乎是固定的。当浏览器窗口被调整为更小时，工作浏览器会剪掉背景，反之亦然。

我认为相对的CSS如下：

```
html {
    position: relative;
    left: 50%;
    margin-left: -661px;
    overflow-y: scroll;
} 

body {
    padding-top: 39px;
    overflow: hidden;
    position: absolute;
    width: 1322px;
    background: $mkdBrown;
    background-image: url("banana_tree.jpg");
    background-repeat: no-repeat;
}

#wrapper {
    padding-top: 39px;
    min-height: 550px;
    float: center;
    position: relative;
    margin: 0 auto 0 auto;
}

.container {
    width: 660px;
} 
```

该网站是[http://www.monkeykateanddaves.com/](http://www.monkeykateanddaves.com/)。

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:29:15.227

您可以尝试使用`background-position`CSS 中的属性定位背景。

例如：

```
body {
    background-position : 660px 50px;
} 
```

您还可以使用以下 hack 使其特定于 Chrome：

```
@media screen and (-webkit-min-device-pixel-ratio:0) {
    body { 
        background-position : 660px 50px;
    }
} 
```

# postgresql - Postgres < 9.0 的 DO 块相当于什么

> ID：15260725
> 
> 赞同：3
> 
> 时间：2013-03-07T00:10:43.350
> 
> 标签：postgresql

Postgres 8.4.8 相当于什么

```
DO $$
BEGIN
IF NOT EXISTS (...) THEN
    EXECUTE ...;
END IF;
END; $$; 
```

?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T00:16:35.790

```
create function f() returns void as $$
BEGIN
IF NOT EXISTS (...) THEN
    EXECUTE ...;
END IF;
END;
$$ language plpgsql;

select f(); 
```

# typescript - Typescript 是否支持 ?. 操作员？（而且，它叫什么？）

> ID：15260732
> 
> 赞同：495
> 
> 时间：2013-03-07T00:11:24.400
> 
> 标签：typescript

Typescript 目前（或是否有计划）支持[安全导航](http://mrhaki.blogspot.com.au/2009/08/groovy-goodness-safe-navigation-to.html)操作符`?.`

IE：

```
var thing = foo?.bar
// same as:
var thing = (foo) ? foo.bar : null; 
```

此外，该运算符是否有更通用的名称（谷歌很难找到）。

* * *

## 回答 #1

> 赞同：287
> 
> 时间：2013-03-07T00:21:21.980

**是的。**从 TypeScript 3.7（[2019 年 11 月 5 日](https://devblogs.microsoft.com/typescript/announcing-typescript-3-7/)发布）开始，支持此功能，称为**Optional Chaining**：

> 在其核心，可选链让我们编写代码，如果遇到 a `null`or ，TypeScript 可以立即停止运行某些表达式`undefined`。可选链中的明星是*可选属性访问*`?.`的新操作符。

 *有关更多详细信息，请参阅[TypeScript 3.7 发行说明](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#optional-chaining)。

* * *

在 3.7 版之前，TypeScript 不支持此功能，尽管早[在 TypeScript 存储库的第 16 期](http://github.com/Microsoft/TypeScript/issues/16)（可追溯到 2014 年）中就提出了要求。

至于**如何称呼这个运营商**，似乎还没有达成共识。除了“可选链接”（这也是它[在 JavaScript 中](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining)的名称）之外，还有一些其他示例：

*   CoffeeScript 将其称为[**存在运算符**](https://coffeescript.org/#existential-operator)（特别是存在运算符的“访问器变体”）：

> 存在运算符的访问器变体`?.`可用于吸收属性链中的空引用。`.`在基值可能为**null**或**undefined**的情况下，使用它代替点访问器。

*   C# 将此称为[**空条件运算符**](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/member-access-operators#null-conditional-operators--and-)。

> 仅当操作数的计算结果为非 null 时，空条件运算符才将成员访问`?.`、或元素访问、操作应用于其操作数；`?[]`否则，它返回`null`。

*   Kotlin 将其称为[**安全调用运算符**](https://kotlinlang.org/docs/null-safety.html#safe-calls)。

可能还有很多其他的例子。

* * *

## 回答 #2

> 赞同：154
> 
> 时间：2013-03-08T12:34:45.250

现在可以了，请参阅用户“甜甜圈”的回答。

旧答案：关于布尔运算符的标准 JavaScript 行为可能会有所帮助。布尔方法在比较对象时不返回 true 或 false，但在 OR 的情况下第一个等于 true 的值。

不如单个？，但它有效：

```
var thing = foo && foo.bar || null; 
```

您可以根据需要使用任意数量的 &&：

```
var thing = foo && foo.bar && foo.bar.check && foo.bar.check.x || null; 
```

默认值也是可能的：

```
var name = person && person.name || "Unknown user"; 
```

* * *

## 回答 #3

> 赞同：115
> 
> 时间：2013-03-07T06:27:46.573

这是在 ECMAScript 可选链接规范中定义的，所以我们在讨论这个问题时可能应该参考*可选链接。*可能的实施：

```
const result = a?.b?.c; 
```

总而言之，TypeScript 团队正在等待 ECMAScript 规范收紧，因此他们的实现在未来不会中断。如果他们现在实现了某些东西，那么如果 ECMAScript 重新定义他们的规范，最终将需要进行重大更改。

请参阅[可选的链接规范](https://tc39.github.io/proposal-optional-chaining/)

在某些东西永远不会成为标准 JavaScript 的地方，TypeScript 团队可以按照他们认为合适的方式实现，但是对于未来的 ECMAScript 添加，即使他们提供早期访问权限，他们也希望保留语义，就像他们对许多其他功能所做的那样。

# 捷径

因此，所有 JavaScript 时髦的运算符都可用，包括类型转换，例如...

```
var n: number = +myString; // convert to number
var b: bool = !!myString; // convert to bool 
```

# 手动解决方案

但回到问题。我有一个迟钝的例子来说明如何在 JavaScript（以及 TypeScript）中做类似的事情，尽管我绝对不是说它是一个优雅的功能，因为你真正追求的功能。

```
(foo||{}).bar; 
```

因此，如果`foo`结果`undefined`是`undefined`并且如果`foo`已定义并且具有名为的属性，则该属性`bar`具有值，结果就是该值。

我[在 JSFiddle 上举了一个例子](http://jsfiddle.net/86sWN/)。

对于更长的示例，这看起来很粗略。

```
var postCode = ((person||{}).address||{}).postcode; 
```

# 连锁功能

如果您在规范尚未制定时迫切需要更短的版本，我在某些情况下会使用这种方法。它评估表达式并在链无法​​满足或最终为 null/undefined 时返回默认值（注意`!=`这里很重要，我们*不想*使用`!==`，因为我们想要在这里进行一些积极的杂耍）。

```
function chain<T>(exp: () => T, d: T) {
    try {
        let val = exp();
        if (val != null) {
            return val;
        }
    } catch { }
    return d;
}

let obj1: { a?: { b?: string }} = {
    a: {
        b: 'c'
    }
};

// 'c'
console.log(chain(() => obj1.a.b, 'Nothing'));

obj1 = {
    a: {}
};

// 'Nothing'
console.log(chain(() => obj1.a.b, 'Nothing'));

obj1 = {};

// 'Nothing'
console.log(chain(() => obj1.a.b, 'Nothing'));

obj1 = null;

// 'Nothing'
console.log(chain(() => obj1.a.b, 'Nothing')); 
```

* * *

## 回答 #4

> 赞同：107
> 
> 时间：2015-02-12T04:53:45.363

# 更新：是的，现在支持！

它刚刚与 TypeScript 3.7 一起发布：[https ://devblogs.microsoft.com/typescript/announcing-typescript-3-7/](https://devblogs.microsoft.com/typescript/announcing-typescript-3-7/)

它被称为*可选链*：[https ://devblogs.microsoft.com/typescript/announcing-typescript-3-7/#optional-chaining](https://devblogs.microsoft.com/typescript/announcing-typescript-3-7/#optional-chaining)

有了它：

```
let x = foo?.bar.baz(); 
```

相当于：

```
let x = (foo === null || foo === undefined) ?
    undefined :
    foo.bar.baz(); 
```

# 旧答案

在 github 上有一个开放的功能请求，您可以在其中表达您的意见/愿望：[https ://github.com/Microsoft/TypeScript/issues/16](https://github.com/Microsoft/TypeScript/issues/16)

* * *

## 回答 #5

> 赞同：41
> 
> 时间：2016-11-01T13:27:37.813

# 2019 年 11 月 13 日编辑！

截至 2019 年 11 月 5 日，TypeScript 3.7 已经发布，它**现在支持** `?.`可选的链接运算符！！！

[https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#optional-chaining](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#optional-chaining)

* * *

## 仅用于历史目的：

**编辑：**感谢fracz评论，我已经更新了答案。

TypeScript 2.0 发布`!.`与`?.`（C#中的Safe Navigator）不一样

有关更多详细信息，请参阅此答案：

[https://stackoverflow.com/a/38875179/1057052](https://stackoverflow.com/a/38875179/1057052)

这只会告诉编译器该值不为空或未定义。这**不会**检查值是否为空或未定义。

[TypeScript 非空断言运算符](https://github.com/Microsoft/TypeScript/wiki/What's-new-in-TypeScript#non-null-assertion-operator)

```
// Compiled with --strictNullChecks
function validateEntity(e?: Entity) {
    // Throw exception if e is null or invalid entity
}

function processEntity(e?: Entity) {
    validateEntity(e);
    let s = e!.name;  // Assert that e is non-null and access name
} 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2019-10-02T15:45:24.713

**TypeScript 3.7 支持 Elvis (?.) 可选链接运算符。**

您可以使用它来检查 null 值：`cats?.miows`如果 cat 为 null 或未定义，则返回 null。

您也可以将其用于可选方法调用：`cats.doMiow?.(5)`如果存在 doMiow，将调用它。

财产访问也是可能的：`cats?.['miows']`。

参考：[https ://devblogs.microsoft.com/typescript/announcing-typescript-3-7-beta/](https://devblogs.microsoft.com/typescript/announcing-typescript-3-7-beta/)

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2019-11-12T06:44:49.260

终于来了！

这里有一些例子：

```
// properties
foo?.bar
foo?.bar()
foo?.bar.baz()
foo?.bar?.baz()

// indexing
foo?.[0]
foo?.['bar']

// check if a function is defined before invoking
foo?.()
foo.bar?.()
foo?.bar?.() 
```

但这与您的假设并不完全相同。

而不是评估

```
foo?.bar 
```

对于这个我们都习惯写的小代码片段

```
foo ? foo.bar : null 
```

它实际上评估为

```
(foo === null || foo === undefined) ?
    undefined :
    foo.bar 
```

它适用于所有虚假值，如空字符串、0 或 false。

我只是没有解释为什么他们不编译它`foo == null`

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2017-01-17T01:50:25.753

**TypeScript 2.0 版**`?.`不支持运算符。

 **所以我使用以下功能：

```
export function o<T>(someObject: T, defaultValue: T = {} as T) : T {
    if (typeof someObject === 'undefined' || someObject === null)
        return defaultValue;
    else
        return someObject;
} 
```

用法如下所示：

```
o(o(o(test).prop1).prop2 
```

另外，您可以设置默认值：

```
o(o(o(o(test).prop1).prop2, "none") 
```

它与 Visual Studio 中的 IntelliSense 配合得非常好。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-07-28T15:15:43.693

[我们在使用Phonetradr](http://www.phonetradr.com)时创建了这个 util 方法，它可以让您使用 Typescript 对深层属性进行类型安全的访问：

```
/**
 * Type-safe access of deep property of an object
 *
 * @param obj                   Object to get deep property
 * @param unsafeDataOperation   Function that returns the deep property
 * @param valueIfFail           Value to return in case if there is no such property
 */
export function getInSafe<O,T>(obj: O, unsafeDataOperation: (x: O) => T, valueIfFail?: any) : T {
    try {
        return unsafeDataOperation(obj)
    } catch (error) {
        return valueIfFail;
    }
}

//Example usage:
getInSafe(sellTicket, x => x.phoneDetails.imeiNumber, '');

//Example from above
getInSafe(foo, x => x.bar.check, null);
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-11-12T07:33:10.330

我通常不推荐这种方法（注意性能问题），但您可以使用扩展运算符浅克隆对象，然后您可以访问该对象上的属性。

```
 const person = { personId: 123, firstName: 'Simon' };
 const firstName = { ...person }.firstName; 
```

这是有效的，因为“名字”的类型是“传播”的。

当我有一个`find(...)`可以返回 null 的表达式并且我需要它的单个属性时，我会最频繁地使用它：

```
 // this would cause an error (this ID doesn't exist)
 const people = [person];
 const firstName2 = people.find(p => p.personId == 999).firstName;

 // this works - but copies every property over so raises performance concerns
 const firstName3 = { ...people.find(p => p.personId == 999) }.firstName; 
```

打字稿推断类型的方式可能存在一些边缘情况，这不会编译，但这通常应该有效。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-11-01T13:41:12.493

它被称为可选链接，它在[Typescript 3.7中](https://devblogs.microsoft.com/typescript/announcing-typescript-3-7-rc/#optional-chaining)

> 可选链接让我们编写代码，如果遇到 null 或 undefined，我们可以立即停止运行某些表达式

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-04-19T19:56:23.127

正如之前回答的那样，它目前仍在考虑中，但它[已经死在水中](https://github.com/Microsoft/TypeScript/issues/16)几年了。

在现有答案的基础上，这是我能想到的最简洁的*手动版本：*

[jsfiddle](https://jsfiddle.net/plantface/3ghtyj8q/)

```
function val<T>(valueSupplier: () => T): T {
  try { return valueSupplier(); } catch (err) { return undefined; }
}

let obj1: { a?: { b?: string }} = { a: { b: 'c' } };
console.log(val(() => obj1.a.b)); // 'c'

obj1 = { a: {} };
console.log(val(() => obj1.a.b)); // undefined
console.log(val(() => obj1.a.b) || 'Nothing'); // 'Nothing'

obj1 = {};
console.log(val(() => obj1.a.b) || 'Nothing'); // 'Nothing'

obj1 = null;
console.log(val(() => obj1.a.b) || 'Nothing'); // 'Nothing' 
```

它只是在缺少属性错误时默默地失败。它回退到用于确定默认值的标准语法，也可以完全省略。

* * *

虽然这适用于简单的情况，但如果您需要更复杂的东西，例如调用函数然后访问结果的属性，那么任何其他错误也会被吞没。糟糕的设计。

在上述情况下，此处发布的其他答案的优化版本是更好的选择：

[jsfiddle](https://jsfiddle.net/plantface/qqqayo43/)

```
function o<T>(obj?: T, def: T = {} as T): T {
    return obj || def;
}

let obj1: { a?: { b?: string }} = { a: { b: 'c' } };
console.log(o(o(o(obj1).a)).b); // 'c'

obj1 = { a: {} };
console.log(o(o(o(obj1).a)).b); // undefined
console.log(o(o(o(obj1).a)).b || 'Nothing'); // 'Nothing'

obj1 = {};
console.log(o(o(o(obj1).a)).b || 'Nothing'); // 'Nothing'

obj1 = null;
console.log(o(o(o(obj1).a)).b || 'Nothing'); // 'Nothing' 
```

一个更复杂的例子：

```
o(foo(), []).map((n) => n.id) 
```

* * *

你也可以换一种方式使用 Lodash' 之类的东西[`_.get()`](https://lodash.com/docs/4.17.5#get)。简洁，但编译器将无法判断所用属性的有效性：

```
console.log(_.get(obj1, 'a.b.c')); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-09-30T15:55:57.967

还没有（截至 2019 年 9 月），但由于“安全导航运算符”[现在处于第 3 阶段](https://github.com/microsoft/TypeScript/issues/16#issuecomment-515160784)，它正在 TypeScript 中实现。

观看此问题以获取更新：

[https://github.com/microsoft/TypeScript/issues/16](https://github.com/microsoft/TypeScript/issues/16)

几个引擎有早期的实现：

JSC：[https ://bugs.webkit.org/show_bug.cgi?id=200199](https://bugs.webkit.org/show_bug.cgi?id=200199)

V8：[https ://bugs.chromium.org/p/v8/issues/detail?id=9553](https://bugs.chromium.org/p/v8/issues/detail?id=9553)

SM：[https ://bugzilla.mozilla.org/show_bug.cgi?id=1566143](https://bugzilla.mozilla.org/show_bug.cgi?id=1566143)

（通过[https://github.com/tc39/proposal-optional-chaining/issues/115#issue-475422578](https://github.com/tc39/proposal-optional-chaining/issues/115#issue-475422578)）

您现在可以安装一个插件来支持它：

```
npm install --save-dev ts-optchain 
```

在您的 tsconfig.json 中：

```
// tsconfig.json
{
    "compilerOptions": {
        "plugins": [
            { "transform": "ts-optchain/transform" },
        ]
    },
} 
```

我希望这个答案在接下来的 6 个月左右会过时，但希望它同时对某人有所帮助。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-05-03T07:36:28.060

我想这就是你要找的。[Powerbite](https://powerbite.co.za/model/iphone-12-pro/)上的类似示例

```
/**
 * Type-safe access of deep property of an object
 *
 * @param obj                   Object to get deep property
 * @param unsafeDataOperation   Function that returns the deep property
 * @param valueIfFail           Value to return in case if there is no such property
 */
export function getInSafe<O,T>(obj: O, unsafeDataOperation: (x: O) => T, valueIfFail?: any) : T {
    try {
        return unsafeDataOperation(obj)
    } catch (error) {
        return valueIfFail;
    }
}

//Example usage:
getInSafe(sellTicket, x => x.phoneDetails.imeiNumber, '');

//Example from above
getInSafe(foo, x => x.bar.check, null); 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2019-04-20T02:17:10.003

`_.get(obj, 'address.street.name')`适用于没有类型的 JavaScript。但是对于 TypeScript *，我们需要*真正的 Elvis 运算符！***

# python - Heroku 入门 - git push heroku master 无限期挂起？

> ID：15260734
> 
> 赞同：2
> 
> 时间：2013-03-07T00:11:29.373
> 
> 标签：python, git, heroku, heroku-toolbelt

[我一直在关注位于此处](https://devcenter.heroku.com/articles/python)的“Heroku 上的 Python 入门”教程，一切都按预期工作。但是，当我尝试执行最终的“git push heroku master”命令时，什么也没有发生。没有输出，它只是挂起。

当我执行 'git remote -v' 时，我的 heroku 远程会出现，我的 Procfile 和 requirements.txt 已经就位，我从终端推送到 Github 没有任何问题。

有什么我想念的吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:35:13.087

你创建了一个应用程序`heroku create <appname>`吗？

你的终端/命令行上有 git setup 吗？

也许尝试重新安装 Heroku。

你没有提供太多信息，所以这就是我现在能提供的全部帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T23:54:00.673

我在阅读相同的教程时遇到了这个问题。我的解决方案是更改网关/路由器上的防火墙设置。

# ruby-on-rails - sqlite3 1.3.6 从heroku推送拒绝

> ID：15260737
> 
> 赞同：1
> 
> 时间：2013-03-07T00:11:44.693
> 
> 标签：ruby-on-rails, heroku, sqlite

```
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.3.0.pre.5
       Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin --deployment
       You are trying to install in deployment mode after changing
       your Gemfile. Run `bundle install` elsewhere and add the
       updated Gemfile.lock to version control.
       You have added to the Gemfile:
       * pg
       * sqlite3
       You have deleted from the Gemfile:
       * sqlite3 (= 1.3.6)
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app 
```

即使在使用此答案中建议的更新修复我的 Gemfile 之后，这也是我遇到的问题

[HEROKU - 无法运行 git push heroku master](https://stackoverflow.com/questions/7963561/heroku-stack-cedar-cannot-run-git-push-heroku-master)

即使在如上所述添加 Gemfile.lock 之后！我收到了这组错误。尝试编译 sqlite3 时失败。

```
Installing sqlite3 (1.3.7)
       Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /usr/local/bin/ruby extconf.rb
       checking for sqlite3.h... no
       sqlite3.h is missing. Try 'port install sqlite3 +universal'
       or 'yum install sqlite-devel' and check your shared library search path (the
       location where your sqlite3 shared library is located).
       *** extconf.rb failed ***
       Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options.
       Provided configuration options:
       --with-opt-dir
       --without-opt-dir
       --with-opt-include
       --without-opt-include=${opt-dir}/include
       --with-opt-lib
       --without-opt-lib=${opt-dir}/lib
       --with-make-prog
       --without-make-prog
       --srcdir=.
       --curdir
       --ruby=/usr/local/bin/ruby
       --with-sqlite3-dir
       --without-sqlite3-dir
       --with-sqlite3-include
       --without-sqlite3-include=${sqlite3-dir}/include
       --with-sqlite3-lib
       --without-sqlite3-lib=${sqlite3-dir}/lib
       --enable-local
       --disable-local
       Gem files will remain installed in /tmp/build_1u9pbycs3fav1/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.7 for inspection.
       Results logged to /tmp/build_1u9pbycs3fav1/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.7/ext/sqlite3/gem_make.out
       An error occurred while installing sqlite3 (1.3.7), and Bundler cannot continue.
       Make sure that `gem install sqlite3 -v '1.3.7'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app 
```

我猜我可能需要更改一些依赖项？或者我应该怎么做，我以前从来没有做过。！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:54:25.887

就像我在[这里](https://stackoverflow.com/questions/14844227/compile-deploying-to-heroku-with-sqlite3-errors/14844324#14844324)写的：

Heroku 不支持 sqlite 数据库。您需要在生产中使用[postgres](http://www.postgresql.org)。在 Rails 中，切换数据库很容易：

```
group :production do
  gem "pg"
end

group :development, :test do
  gem "sqlite3"
end 
```

像上面一样更改您的 gemfile，然后运行`bundle`​​并将您的更改提交到`Gemfile`and `Gemfile.lock`。然后，`git push heroku master`再次运行。

这将允许您在开发和测试环境中本地使用 sqlite，并根据需要在 heroku 上使用 postgres。

顺便说一句，rails 的主要优点之一是它可以让您轻松切换数据库。在其他框架中，这样做可能会花费您数小时。

# javascript - scrollTop 和 getSelection()

> ID：15260741
> 
> 赞同：0
> 
> 时间：2013-03-07T00:12:01.687
> 
> 标签：javascript, jquery, scrolltop, getselection

好的，所以我有两个代码，两者都有问题。他们齐头并进，所以请不要说做两个单独的帖子。在第二个代码完成后，我需要 scrollTop 工作。谢谢你

* * *

这部分完成了~！

```
$('html,body').animate({
   scrollTop: '+=' + $('a[name="quickreply"]').offset().top + 'px'
 }, '3000'); 
```

将其更改为

```
$('html,body').animate({
   scrollTop: $('a[name="quickreply"]').offset().top;
 }, '3000'); 
```

* * *

接下来我在stackoverflow上找到了这段代码，我相信是从蒂姆下来的？

更新小提琴：http: [//jsfiddle.net/dKaJ3/340/](http://jsfiddle.net/dKaJ3/340/)

我需要它只能在我选择的某个 div 中进行选择，并且只能选择文本而不是 HTML，因为我的网站只接受 BBcode。

这是我使用的完整代码，但抓取了整个帖子，而我只想要用户选择的内容。

```
$('.post').each(function() {
  var text = $('#text_editor_textarea');
  var uid = $(this).find('.username a').text();
  var usermess = $(this).find('.entry-content div div').text();
    $(this).find('.quote').click(function() {
    text.val(text.val()+'[quote="'+ uid +'"]'+ usermess +'[/quote]');
 $('html,body').animate({
    scrollTop: '+=' + $('a[name="quickreply"]').offset().top + 'px'
  }, '3000');
 });
}); 
```

任何帮助都会很好，因为我已经在 .getSelection 上工作了几个小时，这是我第一次使用它。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T05:44:50.060

我认为它不应该说`+=`室内动画呼叫而只是`=`。这是因为偏移量不是相对于文档的可见顶部计算的，而是相对于文档的绝对顶部计算的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:11:54.427

首先，如果您将其拆分为各个组成部分，您的问题会得到更多关注。

无论如何，第1部分：在用户的选择中，格式是否需要转换为bbcode？那可能会变得复杂。或者纯文本可以吗？您可以为此使用正则表达式来删除 html 标签。

第 2 部分：这里有几个关于如何防止/允许选择文本的问题：

*   [如何阻止文本被选中？](https://stackoverflow.com/questions/3469900/how-can-i-stop-text-from-being-selected)
*   [防止文本表突出显示](https://stackoverflow.com/questions/1319126/prevent-highlight-of-text)
*   [如何使用 JavaScript 暂时禁用文本选择？](https://stackoverflow.com/questions/891581/how-can-i-disable-text-selection-temporarily-using-javascript)

第 3 部分：滚动。我看不出你发布的代码有什么问题。您的 JSFiddle 似乎没有涵盖这个问题。你有没有机会把你所拥有的东西提取出来？我认为这是您代码的另一部分问题。

# python - 如何提取/删除行的一部分并保存到python中的新文件？

> ID：15260742
> 
> 赞同：0
> 
> 时间：2013-03-07T00:12:06.470
> 
> 标签：python

我这里有这个数据：

```
'**Otolemur_crassicaudatus**_/7977-8746 gi|238809369|dbj|**AB371093.1**|':0.00000000,'**Otolemur_crassicaudatus**/7977-8746 gi|238866848|ref|**NC_012762.1**|': 
```

它都在文件的一行中`.txt`。我想知道如何提取名称（即`Otolemur`和`AB`和`NC`数字（粗体）以打印到新文件但没有所有其他列。这是我所拥有的一小部分，并且能够这样做会节省很多时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:15:16.940

假设你想要保留的东西有一些可预测性，你想要某种[正则表达式](http://docs.python.org/2/library/re.html#regular-expression-syntax)来匹配好东西。然后，您可以获取匹配对象列表并将其全部写入一个新文件，但是您想要。我的数据看起来不够好，无法为您制作正则表达式模式，但基本转换看起来像这样：

```
import re
infile = open('input.txt', 'r')
outfile = open('output.txt', 'w')
for line in infile:
    # Write each matching piece to its own line in the new file
    outfile.write('\n'.join(re.findall('PATTERN', line)))
infile.close()
outfile.close() 
```

# amazon-web-services - 使用用户名和密码担任 IAM 角色

> ID：15260746
> 
> 赞同：1
> 
> 时间：2013-03-07T00:12:20.583
> 
> 标签：amazon-web-services, amazon-iam

在实例或任何其他地方存储永久 IAM 访问凭证（密钥、秘密）似乎真的不安全。

我理解角色的方式 - 如果我可以使用角色管理执行某些任务的权限，那将是有意义的：

*   设置角色，设置具有承担该角色的权限的用户组，将用户添加到该组
*   从命令行输入类似“ec2_assume_role rolename time_till_expiration”
*   然后在提示符下输入我的用户名和密码
*   获取那些临时密钥（可以通过脚本将它们直接设置到环境中）

根据我在 IAM 文档中找到的内容 - 假设角色需要一组密钥 - 所以实际上并不适合人类。我可以设置一个服务器来启用与上述类似的功能，但该服务器必须存储自己的密钥或至少在内存中，而且我必须复制 IAM 已经做得很好的用户名/密码管理。

我错过/误解了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:13:23.193

听起来您正在寻找[代币自动售货机](http://aws.amazon.com/code/7351543942956566)。

> 令牌自动售货机 (TVM) 是一个基于服务器的参考应用程序，它为远程客户端提供临时凭证以签署对 Amazon Web Services (AWS) 的 Web 请求。TVM 对于使用临时凭证访问 AWS 的移动客户端设备特别有用。适用于 Android 的 AWS 开发工具包和适用于 iOS 的 AWS 开发工具包都提供了一个示例客户端，您的移动应用程序可以使用它来访问 TVM 和接收安全令牌。

# ios - iOS - Apple App Sandbox 不适用？

> ID：15260749
> 
> 赞同：0
> 
> 时间：2013-03-07T00:12:37.783
> 
> 标签：ios, cocos2d-iphone

在进行一些测试时，我注意到我的`Cocos2D`应用程序非常糟糕。这很奇怪，因为应用程序本身并没有进行密集计算，每次更新都没有安排项目，而且通常很简单。

除了我没有使用`TexturePacker`等优化图像这一事实之外，我想不出任何可能发生这种情况的原因。

在使用内存分析器进行进一步测试后`Instruments`，我发现无论设备当前处于什么状态（运行应用程序、坐在主屏幕等），地图都使用了 20-30MB 的设备内存。App Store 和 Springboard 的使用量也相同。我明白为什么 Springboard 需要在内存中保持运行，但究竟为什么 Maps 和 App Store 在我的应用程序的沙箱中运行？

我认为一旦退出应用程序，它就不再位于主内存中。一直以来，我一直相信任何应用程序都可以在其沙箱中运行，仅此而已 - 并且您不需要双击主屏幕并从快速菜单中“强制退出”应用程序。但是，强制退出地图和 App Store 是释放必要内存的唯一方法。我的假设一直都是错误的吗？这只是Apple的东西，我被迫为内存密集型应用程序工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T02:03:49.443

应用程序未在“您的沙盒中”运行；它们要么在自己的沙盒中运行，要么是没有沙盒的幸运 Apple 应用程序（我怀疑内置的应用程序是沙盒的，而 App Store 安装的则不是）。

iOS“沙盒”的目的是防止应用程序访问它们不应该访问的数据（读取和覆盖），而不是防止“退出”的应用程序使用 RAM。自 iOS 4（在 3GS+ 上）以来，“退出”的应用程序默认保持在后台加载，另外，Apple 至少从 iOS 3 开始就允许 Safari 在后台保持加载（我怀疑从 iOS 1 开始——每次都重新加载页面你切换到浏览器非常糟糕）。

非关键后台应用程序也无法阻止您的应用程序使用“必要内存”——操作系统将在必要时终止后台应用程序以释放内存。与典型的桌面不同，iOS 不使用交换——后台应用程序“正在使用”的内存不应该固有地减慢你的应用程序的速度。

我能想到几件事：

*   后台应用程序仍然可以使用 CPU（仪器会告诉您它们是否可用）。这真的不应该是一个问题。我相信它们运行的​​优先级低于前台应用程序。
*   新地图使用 OpenGL。如果 iOS 没有有效地处理后台 GL 上下文，它*可能会*导致问题。这将是一个非常严重的错误。
*   您的应用程序加载的纹理*刚好足以*触发内存警告，并通过丢弃所有纹理来处理内存警告（添加`NSLog()`to`-applicationDidReceiveMemoryWarning:`以找出答案）。如果您的应用程序位于前台，请不要丢弃下一帧所需的纹理。这可能是一个 Cocos2D 错误。

如果不是内存警告，我会尝试分析应用程序以确定哪些位很慢。

*ps*内存警告也有不同的“级别”，但我不确定你是否可以访问它（也许它在 dict 的`userInfo`dict 中`UIApplicationDidReceiveMemoryWarningNotification`）。在这种情况下，这无关紧要——如果你在下一秒再次使用它，它只会适得其反。

# java - 在 AppEngine 中合并多个 GCM 消息

> ID：15260750
> 
> 赞同：0
> 
> 时间：2013-03-07T00:12:59.503
> 
> 标签：java, google-app-engine, google-cloud-messaging, google-cloud-endpoints

我有一个 Android 应用程序，它使用 Google Cloud Endpoints 在设备之间同步数据。目前在每个 api 调用中，都会向所有其他设备发送 GCM 消息。通常，一个设备不仅会进行一次 api 调用，而且会直接进行多次调用。在这种情况下，在每次调用中发送消息的效率极低，因为所有其他设备都会多次调用以获取新数据，而不是全部调用一次。

所以我的想法基本上是在一个 api 调用等待大约 10 秒之后，然后发送一条 GCM 消息。每当有新呼叫进来并且计时器被重置时。

我的问题是我真的不知道如何在 AppEngine 中执行此操作。我的第一个想法是一个任务队列，它的任务以某种方式命名并有 10 秒的延迟。在 API 调用中，我检查任务是否在队列中，如果是，我将其删除并插入一个新任务。这是不可能的，因为即使任务不再存在，也无法再次使用任务名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:16:27.983

让设备明确指示何时发送 GCM 消息不是更容易吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T03:42:25.567

如果您的 Android 应用程序知道其端点调用之间的区别：知道哪个是“最终”调用，那么它可以告诉服务器是否通知其他设备。

即使没有，你也可以在客户端做一些类似于你在服务器上做的事情：继续延迟，直到确定最后一次调用已经完成（例如，用户完成更新数据）和然后执行导致通知发送的“最终”服务器调用。如果您担心应用程序会在最终调用之前被终止，则可以在服务中完成此操作。

或者，您可以在客户端的接收代码中做同样的事情：当它接收到 GCM 通知时，它可能会在对其采取行动之前延迟。

无论哪种方式，我认为在客户端处理此问题并保持服务器事务处理确实更容易（也更便宜）。

# android - 为什么尝试在自定义类中显示对话框时出现 WindowLeaked？

> ID：15260751
> 
> 赞同：1
> 
> 时间：2013-03-07T00:13:02.747
> 
> 标签：android, android-alertdialog

我正在尝试创建一个`AlertDialog`，我已经这样做了数百次，但这次它不起作用。我`onResume()`在我的活动中的方法上有这个代码：

```
@Override
protected void onResume() {
    super.onResume();
    if (DEBUG)
        Log.i("BrazoRobot", "onResume()");
    isSystemRdy = false;

    mBluetoothHelper = new BluetoothHelper(this, bluetoothName);
    mBluetoothHelper.connect();
    mBluetoothHelper.setOnBluetoothConnected(this);
} 
```

`BluetoothHelper`正确创建了不是 Activity 类的对象，我将 Activity 上下文传递给它：

```
public BluetoothHelper (final Context ctx, final String bluetoothName) {
    mActivity = ((Activity)ctx);
    this.ctx = ctx;
    this.bluetoothName = bluetoothName;
} 
```

问题出`connect()`在我创建对话框的方法上：

```
if (!mBluetoothAdapter.isEnabled()) {
    AlertDialog.Builder mDialog = new AlertDialog.Builder(ctx);
    mDialog.setTitle(ctx.getString(R.string.BTRequestTitle));
    mDialog.setMessage(ctx.getString(R.string.BTRequestSummary));
    mDialog.setPositiveButton(ctx.getString(R.string.Yes), new OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            if (DEBUG)
                Log.i("BrazoRobotBT", "Turning on Bluetooth...");
            mBluetoothAdapter.enable();     // Enciendo el Bluetooth
        }
    });
    mDialog.setNegativeButton(ctx.getString(R.string.No), new OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            if (DEBUG)
                Log.i("BrazoRobotBT", "Exit");
            mActivity.finish();
        }
    });
    mDialog.show();
} 
```

我在`mDialog.show()`. `ctx`是我在构造函数中传递的活动上下文，我也尝试传递`mActivity`is `((Activity) ctx)`to`AlertDialog.Builder`但我得到了同样的异常。

该对话框是要求用户启用蓝牙。我知道正确的方法是使用调用 startActivityForResult() 的内置方法，但我希望将所有内容都放在我的自定义类中，如果它不是 Activity，我就不能在我的类上使用 onActivityResult()，那就是为什么我要这样做。

为什么会这样？AFAIK 我正在 UI 线程上创建对话框。我也尝试在方法中创建对话框，`onCreate()`但它仍然是一样的。

```
03-06 21:06:20.320: E/WindowManager(31411): Activity com.roboticarm.andres.BrazoRobot has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{4130de20 V.E..... R.....ID 0,0-495,244} that was originally added here
03-06 21:06:20.320: E/WindowManager(31411): android.view.WindowLeaked: Activity com.roboticarm.andres.BrazoRobot has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView{4130de20 V.E..... R.....ID 0,0-495,244} that was originally added here
03-06 21:06:20.320: E/WindowManager(31411):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:354)
03-06 21:06:20.320: E/WindowManager(31411):     at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:216)
03-06 21:06:20.320: E/WindowManager(31411):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
03-06 21:06:20.320: E/WindowManager(31411):     at android.app.Dialog.show(Dialog.java:281)
03-06 21:06:20.320: E/WindowManager(31411):     at android.app.AlertDialog$Builder.show(AlertDialog.java:951)
03-06 21:06:20.320: E/WindowManager(31411):     at com.bluetoothutils.andres.BluetoothHelper.connect(BluetoothHelper.java:119)
03-06 21:06:20.320: E/WindowManager(31411):     at com.roboticarm.andres.BrazoRobot.onResume(BrazoRobot.java:247)
03-06 21:06:20.320: E/WindowManager(31411):     at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1185)
03-06 21:06:20.320: E/WindowManager(31411):     at android.app.Activity.performResume(Activity.java:5217)
03-06 21:06:20.320: E/WindowManager(31411):     at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2862)
03-06 21:06:20.320: E/WindowManager(31411):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2901)
03-06 21:06:20.320: E/WindowManager(31411):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2364)
03-06 21:06:20.320: E/WindowManager(31411):     at android.app.ActivityThread.access$600(ActivityThread.java:153)
03-06 21:06:20.320: E/WindowManager(31411):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1247)
03-06 21:06:20.320: E/WindowManager(31411):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-06 21:06:20.320: E/WindowManager(31411):     at android.os.Looper.loop(Looper.java:137)
03-06 21:06:20.320: E/WindowManager(31411):     at android.app.ActivityThread.main(ActivityThread.java:5204)
03-06 21:06:20.320: E/WindowManager(31411):     at java.lang.reflect.Method.invokeNative(Native Method)
03-06 21:06:20.320: E/WindowManager(31411):     at java.lang.reflect.Method.invoke(Method.java:511)
03-06 21:06:20.320: E/WindowManager(31411):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:799)
03-06 21:06:20.320: E/WindowManager(31411):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
03-06 21:06:20.320: E/WindowManager(31411):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

**编辑 1 (onWindowFocusChanged)**

按照建议尝试了此代码：

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
    if(hasFocus){
        // Conecto al dispositivo bluetooth
        mBluetoothHelper = new BluetoothHelper(this, "linvor");
        mBluetoothHelper.connect();
        if(DEBUG) Log.i("BrazoRobotBT", "Interface");
        mBluetoothHelper.setOnNewBluetoothDataReceived(this);
        setPreferences();

        // Indico que entro en el Analizador lógico
        mBluetoothHelper.write(logicAnalyzerMode);
    }
} 
```

但我不断收到完全相同的错误。

* * *

**编辑 2（活动测试）**

我尝试在 Activity 中的 onCreate() 和 onResume() 中创建一个对话框，它是用这个简单的代码完美创建的：

```
 public class CustomDialog extends Activity{

        private static final boolean DEBUG = true;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            AlertDialog.Builder mDialog = new AlertDialog.Builder(this);
            mDialog.setTitle(getString(R.string.BTRequestTitle));
            mDialog.setMessage(getString(R.string.BTRequestSummary));

            mDialog.setPositiveButton(getString(R.string.Yes), new OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    if(DEBUG) Log.i("BrazoRobotBT", "Turning on Bluetooth...");
                }
            });
            mDialog.setNegativeButton(getString(R.string.No), new OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    if(DEBUG) Log.i("BrazoRobotBT", "Exit");
                }
            });
            mDialog.show();
        }
    }

But, if I put this code inside my class method called from my Activity I get the exception. 
```

* * *

**编辑 3（奇怪的事实）**

这是我的 connect() 方法，当我从我的 Activity 调用它并显示对话框时，我得到了异常：

```
public void connect (){
        // Compruebo que el dispositivo tenga Bluetooth
        mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        if (mBluetoothAdapter == null) {
            // Si no hay Bluetooth en el dispositivo muestro un dialogo alertando al usuario y salgo de la Activity
            AlertDialog.Builder dialog = new AlertDialog.Builder(mActivity);
            dialog.setTitle(ctx.getString(R.string.NoBTAlertTitle));
            dialog.setMessage(ctx.getString(R.string.NoBTAlertText));
            dialog.setPositiveButton(ctx.getString(R.string.Ok), new OnClickListener(){
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    mActivity.finish(); // Cierro porque no existe un módulo Bluetooth
                }
            });
        }
        // Si el dispositivo tiene Bluetooth me conecto
        else{
            // Compruebo que el Bluetooth esté activado, sino pido al usuario que lo active
            if (!mBluetoothAdapter.isEnabled()) {

                //mActivity.startActivity(new Intent(mActivity, CustomDialog.class));

                AlertDialog.Builder mDialog = new AlertDialog.Builder(ctx);
                mDialog.setTitle(ctx.getString(R.string.BTRequestTitle));
                mDialog.setMessage(ctx.getString(R.string.BTRequestSummary));

                mDialog.setPositiveButton(ctx.getString(R.string.Yes), new OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        if(DEBUG) Log.i("BrazoRobotBT", "Turning on Bluetooth...");
                        mBluetoothAdapter.enable();     // Enciendo el Bluetooth
                    }
                });
                mDialog.setNegativeButton(ctx.getString(R.string.No), new OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        if(DEBUG) Log.i("BrazoRobotBT", "Exit");
                        mActivity.finish();
                    }
                });
                mDialog.show();
            }
            // Compruebo si el dispositivo no esta en los dispositivos emparejados (paired)
            Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
            if (pairedDevices.size() > 0) {
                // Loop a travez de los dispositivos emparejados (paired)
                for (BluetoothDevice device : pairedDevices) {
                    if(DEBUG) Log.i("BrazoRobotBT", "Name: " + device.getName() + " -- Address:  " + device.getAddress());
                    // Si el dispositivo coincide con el que busco lo asigno
                    if(device.getName().equals(bluetoothName)){
                        mBluetoothDevice = device;
                        // Establezco una conexión Bluetooth para enviar datos
                        establishConnection();
                        break;
                    }
                }
            }
            // Sino salgo, debe estar en los dispositivos emparejados
            else{
                mActivity.finish();
            }
        }
    } 
```

但是，如果我创建一个单独的方法并从 Activity 调用，当显示对话框时我不会得到异常：

```
public void dialog(){
    AlertDialog.Builder mDialog = new AlertDialog.Builder(ctx);
    mDialog.setTitle(ctx.getString(R.string.BTRequestTitle));
    mDialog.setMessage(ctx.getString(R.string.BTRequestSummary));

    mDialog.setPositiveButton(ctx.getString(R.string.Yes), new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            if(DEBUG) Log.i("BrazoRobotBT", "Turning on Bluetooth...");
        }
    });
    mDialog.setNegativeButton(ctx.getString(R.string.No), new OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            if(DEBUG) Log.i("BrazoRobotBT", "Exit");
            mActivity.finish();
        }
    });
    mDialog.show();
} 
```

并使用它：

```
mCustomClass.dialog();      // Dialog is shown, no exception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:58:51.963

好的，稍作休息后我解决了。又是我的错。问题基本上是我正在显示对话框，在它显示之前我完成了活动：

```
public void connect (){
        // Compruebo que el dispositivo tenga Bluetooth
        mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        if (mBluetoothAdapter == null) {
            // Si no hay Bluetooth en el dispositivo muestro un dialogo alertando al usuario y salgo de la Activity
            AlertDialog.Builder dialog = new AlertDialog.Builder(mActivity);
            dialog.setTitle(ctx.getString(R.string.NoBTAlertTitle));
            dialog.setMessage(ctx.getString(R.string.NoBTAlertText));
            dialog.setPositiveButton(ctx.getString(R.string.Ok), new OnClickListener(){
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    mActivity.finish(); // Cierro porque no existe un módulo Bluetooth
                }
            });
        }
        // Si el dispositivo tiene Bluetooth me conecto
        else{
            // Compruebo que el Bluetooth esté activado, sino pido al usuario que lo active
            if (!mBluetoothAdapter.isEnabled()) {

                //mActivity.startActivity(new Intent(mActivity, CustomDialog.class));

                AlertDialog.Builder mDialog = new AlertDialog.Builder(ctx);
                mDialog.setTitle(ctx.getString(R.string.BTRequestTitle));
                mDialog.setMessage(ctx.getString(R.string.BTRequestSummary));

                mDialog.setPositiveButton(ctx.getString(R.string.Yes), new OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        if(DEBUG) Log.i("BrazoRobotBT", "Turning on Bluetooth...");
                        mBluetoothAdapter.enable();     // Enciendo el Bluetooth
                    }
                });
                mDialog.setNegativeButton(ctx.getString(R.string.No), new OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        if(DEBUG) Log.i("BrazoRobotBT", "Exit");
                        mActivity.finish();
                    }
                });
                mDialog.show();
            }
            // Compruebo si el dispositivo no esta en los dispositivos emparejados (paired)
            Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
            if (pairedDevices.size() > 0) {
                // Loop a travez de los dispositivos emparejados (paired)
                for (BluetoothDevice device : pairedDevices) {
                    if(DEBUG) Log.i("BrazoRobotBT", "Name: " + device.getName() + " -- Address:  " + device.getAddress());
                    // Si el dispositivo coincide con el que busco lo asigno
                    if(device.getName().equals(bluetoothName)){
                        mBluetoothDevice = device;
                        // Establezco una conexión Bluetooth para enviar datos
                        establishConnection();
                        break;
                    }
                }
            }
            // Sino salgo, debe estar en los dispositivos emparejados
            else{
                mActivity.finish();
            }
        }
    } 
```

我在“mDialog.show()”上显示对话框，但在我按下确定按钮之前，蓝牙仍未启用，因此没有配对设备，所以我完成了活动，但仍在绘制对话框，所以我得到了异常。我知道愚蠢的错误，我有时应该休息一下。

所以'connect()'方法现在是：

```
public void connect (){
    if(DEBUG) Log.i("BrazoRobotBT", "connect()...");
    // Compruebo que el dispositivo tenga Bluetooth
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    if (mBluetoothAdapter == null) {
        // Si no hay Bluetooth en el dispositivo muestro un dialogo alertando al usuario y salgo de la Activity
        AlertDialog.Builder dialog = new AlertDialog.Builder(mActivity);
        dialog.setTitle(ctx.getString(R.string.NoBTAlertTitle));
        dialog.setMessage(ctx.getString(R.string.NoBTAlertText));
        dialog.setPositiveButton(ctx.getString(R.string.Ok), new OnClickListener(){
            @Override
            public void onClick(DialogInterface dialog, int which) {
                if(DEBUG) Log.i("BrazoRobotBT", "No bluetooth on device");
                mActivity.finish(); // Cierro porque no existe un módulo Bluetooth
            }
        });
    }
    // Si el dispositivo tiene Bluetooth me conecto
    else{
        // Compruebo que el Bluetooth esté activado, sino pido al usuario que lo active
        if (!mBluetoothAdapter.isEnabled()) {
            final AlertDialog.Builder mDialog = new AlertDialog.Builder(ctx);
            mDialog.setTitle(ctx.getString(R.string.BTRequestTitle));
            mDialog.setMessage(ctx.getString(R.string.BTRequestSummary));

            mDialog.setPositiveButton(ctx.getString(R.string.Yes), new OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    if(DEBUG) Log.i("BrazoRobotBT", "Turning on Bluetooth...");
                    mBluetoothAdapter.enable();     // Enciendo el Bluetooth

                    // Espero a que encienda el Bluetooth
                    while(!mBluetoothAdapter.isEnabled());

                    // Compruebo si el dispositivo no esta en los dispositivos emparejados (paired)
                    Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
                    if (pairedDevices.size() > 0) {
                        // Loop a travez de los dispositivos emparejados (paired)
                        for (BluetoothDevice device : pairedDevices) {
                            if(DEBUG) Log.i("BrazoRobotBT", "Name: " + device.getName() + " -- Address:  " + device.getAddress());
                            // Si el dispositivo coincide con el que busco lo asigno
                            if(device.getName().equals(bluetoothName)){
                                mBluetoothDevice = device;
                                // Establezco una conexión Bluetooth para enviar datos
                                establishConnection();
                                break;
                            }
                        }
                    }
                    // Sino salgo, debe estar en los dispositivos emparejados
                    else{
                        if(DEBUG) Log.i("BrazoRobotBT", "Finish Activity not in paired devices");
                        mBluetoothAdapter.disable();
                        mActivity.finish();
                    }
                }
            });

            mDialog.setNegativeButton(ctx.getString(R.string.No), new OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    if(DEBUG) Log.i("BrazoRobotBT", "Exit");
                    mActivity.finish();
                }
            });

            mDialog.show();
        }
    }
} 
```

它工作正常且符合预期。非常感谢 Waqas 的帮助，但我在 AlertDialog.Builder 上没有“mDialog.dismiss()”方法，因为它是自动完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:21:32.770

为了避免此错误，您应该调用`mDialog.dismiss()`活动的**onStop**方法。

原因：因为您不能简单地完成对话框所有者活动或跳转到新的活动而不正确处理对话框窗口。

# javascript - Javascript文本框悬停在鼠标上

> ID：15260752
> 
> 赞同：1
> 
> 时间：2013-03-07T00:13:07.500
> 
> 标签：javascript, html, css, textbox, hover

我有一个非常简单的 javascript 代码，我的网站需要它，但它不能像我希望的那样工作......它是关于一个文本悬停框，当我将鼠标悬停在按钮上时会出现和消失。该代码使用一个按钮，但我需要更多。似乎当我添加具有相同悬停框效果的第二个按钮时，它不再起作用（当我将鼠标悬停在任何按钮上时，它只悬停第二个文本）。我的问题是我可以将相同的悬停框效果添加到多个按钮上，但每个框上的文本不同。这是我到目前为止所得到的......

Javascript：

```
var oVTog = 
{
    toggle: function (el) 
    {
        oVTog.container = el.parentNode;
        oVTog.para = oVTog.container.getElementsByTagName('p')[0];  
        oVTog.para.style.display = "none";

        el.onmouseover = function () 
        {
            oVTog.para.style.display = '';
            return false;
        };

        el.onmouseout = function () 
        {
            oVTog.para.style.display = 'none';
            return false;
        };

        el.onclick = function () 
        {
            oVTog.para.style.display = oVTog.para.style.display == 'none' ? '' : 'none';
            return false;
        };
    }
};

window.onload = function () 
{
    var l = document.getElementById('togTrigger');
    oVTog.toggle(l);
    var l = document.getElementById('togTrigger2');
    oVTog.toggle(l);
}; 
```

CSS：

```
a 
{
    text-decoration: none;
 outline: none;
}

div#page 
{
    margin: 60px auto;
    border: 1px solid #dedede;
    width: 910px;
}

.TogWrap 
{
    width: 400px;
    padding: 22px;
}

#togTrigger 
{
    border: 1px solid #bebebe;
    padding: 7px 8px;
    background: #df7623;
    color: #fff;
}

.togContent  
{
    margin-top: 9px;
    border: 1px solid #bebebe;
    padding: 16px 10px 10px 10px;
    background: #ededed;
} 
```

和 HTML：

```
<body id="bd">
    <div id="theTog" class="TogWrap">
        <a href="#" id="togTrigger">Lorem ipsum One</a>
        <p class="togContent">
            Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Mauris magna. 
            Suspendisse accumsan elit non tellus. Curabitur eros justo, malesuada 
            convallis, sagittis vitae, convallis sit amet, lectus.
        </p>
    </div>

    <div id="theTog" class="TogWrap">
        <a href="#" id="togTrigger2">Lorem ipsum One</a>
        <p class="togContent">
            Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Mauris magna. 
            Suspendisse accumsan elit non tellus. Curabitur eros justo, malesuada 
            convallis, sagittis vitae, convallis sit amet, lectus.
        </p>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:20:32.757

tl;博士;

***[工作演示](http://jsfiddle.net/upF8P/)***

* * *

解释

这不起作用的原因是使用对象而不是局部范围并且变量被声明了两次。另一个问题是某些 DOM 不正确，它影响了正确应用样式的能力。

*   *使用局部变量而不是将它们附加到对象*

    持有触发功能的对象不应用于承载元素。而是将它们设置为触发函数的本地。它们的范围将保持在您附加到传入元素的事件的本地。

    ```
    toggle: function (el) {
     var container = el.parentNode;
     var para = container.getElementsByTagName('p')[0];
     ...etc. 
    ```

    *   *避免两次声明一个变量*

    一个变量不应该被声明两次。`var`如果变量已经用`var`. 这段代码

    ```
    var l = ...
    var l = ... 
    ```

    应该成为

    ```
    var l = ...
    l = ... 
    ```

    *   *保持`id`独一无二*

    dom 元素上的 ID 应该是唯一的，而不是重复的。

    应该是

    ```
    <div id="theTog1"
    <div id="theTog2" 
    ```

    *   *使用 css 类名广泛应用样式*

    您的样式仅适用于`id=togTrigger`css 定义

    ```
    #togTrigger {...} 
    ```

    您可能希望将 a 分配给`class="togTrigger"`您想要使用此功能的那些元素，然后您可以让您的 css 定义为

    ```
    .togTrigger {...} 
    ```

    最后，一切都像这样，工作演示：http: [//jsfiddle.net/upF8P/](http://jsfiddle.net/upF8P/)

    * * *

    jsfiddle代码

    html

    ```
    <div id="theTog" class="TogWrap">
        <a href="#" id="togTrigger" class="togTrigger" >Lorem ipsum One</a>
        <p class="togContent">
          Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Mauris magna. 
          Suspendisse accumsan elit non tellus. Curabitur eros justo, malesuada 
          convallis, sagittis vitae, convallis sit amet, lectus.
        </p>
    </div>

    <div id="theTog" class="TogWrap">
        <a href="#" id="togTrigger2" class="togTrigger">Lorem ipsum One</a>
        <p class="togContent">
          Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Mauris magna. 
      Suspendisse accumsan elit non tellus. Curabitur eros justo, malesuada 
      convallis, sagittis vitae, convallis sit amet, lectus.
        </p>
    </div> 
    ```

    css

    ```
    a {
    text-decoration: none;
    outline: none;
    }
    div#page {
    margin: 60px auto;
    border: 1px solid #dedede;
    width: 910px;
    }
    .TogWrap {
    width: 400px;
    padding: 22px;
    }
    .togTrigger {
    border: 1px solid #bebebe;
    padding: 7px 8px;
    background: #df7623;
    color: #fff;
    }
    .togContent  {
    margin-top: 9px;
    border: 1px solid #bebebe;
    padding: 16px 10px 10px 10px;
    background: #ededed;
    } 
    ```

    js

    ```
    var oVTog = {
     toggle: function (el) {
      var container = el.parentNode;
      var para = container.getElementsByTagName('p')[0];
      para.style.display = "none";
      el.onmouseover = function () {
       para.style.display = '';
        return false;
       };
       el.onmouseout = function () {
        para.style.display = 'none';
        return false;
       };
       el.onclick = function () {
        para.style.display = para.style.display == 'none' ? '' : 'none';
        return false;
       };
      }
    };
    window.onload = function () {
     var l = document.getElementById('togTrigger');
     oVTog.toggle(l);
     l = document.getElementById('togTrigger2');
     oVTog.toggle(l);
    }; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:31:38.710

问题是您将要隐藏的段落和容器存储在全局变量中，`oVTog.container`并且`oVTog.para`. 因此，当您尝试将它用于两个不同的节点时，它们会相互覆盖。

最简单的解决方案是将这些值存储在局部变量[http://jsfiddle.net/Mchhs/](http://jsfiddle.net/Mchhs/)

```
var oVTog = {
    toggle: function (el) {    
        var para  = el.parentNode.getElementsByTagName('p')[0];
        para.style.display = "none";

        el.onmouseover = function () {
            para.style.display = '';
            return false;
        };
        el.onmouseout = function () {
            para.style.display = 'none';
            return false;
        };
        el.onclick = function () {
            para.style.display = para.style.display == 'none' ? '' : 'none';
            return false;
        };
    }
}; 
```

# windows-phone-7 - Windows Phone 全景图首先加载第二项

> ID：15260756
> 
> 赞同：0
> 
> 时间：2013-03-07T00:13:27.607
> 
> 标签：windows-phone-7, xaml

我的应用程序有一个奇怪的问题。即使我使用 Visual Studio 2012 中的模板创建全景页面，当我加载应用程序时，第 2 项首先出现很短的时间，然后视图切换到第 1 项。我很确定它不应该是像这样行事。任何想法发生了什么？

```
 <Grid x:Name="LayoutRoot">
    <controls:Panorama Title="my application">

        <!--Panorama item one-->
        <controls:PanoramaItem Header="item1">
            <Grid/>
        </controls:PanoramaItem>

        <!--Panorama item two-->
        <controls:PanoramaItem Header="item2">
            <Grid/>
        </controls:PanoramaItem>
    </controls:Panorama>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T12:24:10.867

这是标准全景行为。但是您可以通过以下方式修复它：

```
<phone:PhoneApplicationPage 
    ... some lines missed ...
    Loaded="MainPage_OnLoaded">
    <Grid x:Name="LayoutRoot">
        <controls:Panorama x:Name="MainPanorama" Title="my application">

            <controls:PanoramaItem x:Name="DefaultItem" Header="item1">
                <Grid/>
            </controls:PanoramaItem>

            <controls:PanoramaItem Header="item2">
                <Grid/>
            </controls:PanoramaItem>
        </controls:Panorama>
    </Grid>
</phone:PhoneApplicationPage> 
```

Item1 有一个名称，并添加了对 Loaded 事件的订阅。

然后在代码隐藏中：

```
public partial class MainPage : PhoneApplicationPage
    {
        public MainPage()
        {
            InitializeComponent();
        }

        private void MainPage_OnLoaded(object sender, RoutedEventArgs e)
        {
            MainPanorama.DefaultItem = DefaultItem;
        }
     } 
```

# clojure - 您如何在更大的 Clojure 程序中以实用的方式使用 core.logic？

> ID：15260758
> 
> 赞同：6
> 
> 时间：2013-03-07T00:13:37.343
> 
> 标签：clojure, clojure-core.logic

我很难理解如何混合 clojure 和 core.logic。

例如说我有以下问题：

我有一个带有附加分数的键值对列表：

```
(:foo "10" 2)
(:bar "20" 3)
(:baz "30" 7) 
```

我还有一张地图：

```
{:foo "10",
 :bar "42",
 :baz "30"} 
```

我想做的是根据根据地图评估的分数列表返回分数列表。

使用核心逻辑我可以做这样的事情：

```
(defrel score key value score)
(fact score :foo "10" 2)
(fact score :bar "20" 3)
(fact score :baz "30" 7)

(run* [q]
  (conde 
    ((score :foo "10" q))
    ((score :baz "30" q)))) 
```

我得到了预期的结果：

```
(2 7) 
```

我的问题是我不知道如何把它变成我可以在更大的程序中动态运行的东西。这意味着我将在不同的时间应用不同的地图和不同的约束。我想我可以通过编写一个接受地图并输出约束的函数来创建 conde 的参数，但是我如何让 run* 在一组临时事实的上下文中进行评估？

我当然可以编写一个函数来返回我想要的没有 core.logic 的东西，但这似乎不太优雅。也许我在叫错树（我对 Clojure 和 core.logic 都是新手），这根本不是一个约束问题。

所以我的问题是：

当您从直到运行时才知道的来源中提取事实和约束时，您如何混合核心逻辑？

与此相关的是，您如何在一个新的事实环境中评估一组约束的环境中这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T05:27:23.030

要记住的最重要的事情是：关系只是返回目标的函数。目标是可以`succeed`或的函数`fail`，所以基本上关系只是高阶函数。

现在，您可以制作示例，使关系和各种事实都在一个函数中，并且没有可能相互干扰的“全局”关系/事实：

```
(defn find-things []
  (letfn [(scoref [key value score]
            (conde
             [(== key :foo) (== value "10") (== score 2)]
             [(== key :bar) (== value "20") (== score 3)]
             [(== key :baz) (== value "30") (== score 7)]))]
    (run* [q]
          (conde 
           ((scoref :foo "10" q))
           ((scoref :baz "30" q)))))) 
```

`score`只是一个返回目标的函数（使用`conde`宏）

这解决了局部/全局关系问题，但事实和查询仍然被硬编码到我们希望作为参数传递的函数中。一种可能的方法是了解 core.logic API，它允许您定义动态逻辑变量并统一它们等。我没有使用过那个 API，所以我无法使用它来回答。另一种方法是使用宏和评估魔法：

```
(defmacro find-things-generator [data query]
  (let [key (gensym) value (gensym) score (gensym) q (gensym)]
    `(letfn [(~'scoref [~key ~value ~score]
               (conde
                ~@(map #(-> [`(== ~key ~(% 0))
                             `(== ~value ~(% 1))
                             `(== ~score ~(% 2))]) data)
                ))]
       (run* [~q]
             (conde
              ~@(map #(-> [`(~'scoref ~(% 0) ~(% 1) ~q)]) query)
              )))))

(defn find-things [data query]
  (eval `(find-things-generator ~data ~query)))

(def data [[:foo "1" 2]
           [:bar "2" 3]
           [:baz "3" 7]])

(def query {:foo "1",
            :bar "2",
            :baz "3"})

(find-things data query) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T02:52:47.423

我有一个类似的问题，这就是我想出的，翻译成你的问题。

定义您的分数集合。

```
(def scores
  [[:foo "10" 2]
   [:bar "20" 3]
   [:baz "30" 7]]) 
```

接下来，定义一个将分数转换为关系形式的函数。

```
(defn scoreso [key value score scores]
  (conde
    [(fresh [a]
       (firsto scores a)
       (== [key value score] a))]
    [(fresh [d]
      (resto scores d)
       (scoreso key value score d))])) 
```

最后，确定向量中的哪些分数与给定的键和值匹配。

```
(run* [score]
  (fresh [key value]
    (scoreso key value score scores)
    (conde
      [(== key :foo) (== value "10")]
      [(== key :baz) (== value "30")]))) 
```

这个结果是 (2 7)。

该查询的措辞不同，但它是等效的。

# ssrs-2008 - SSRS 2008R2下引用System.Core(4.0)报部署错误如何解决

> ID：15260761
> 
> 赞同：8
> 
> 时间：2013-03-07T00:13:49.490
> 
> 标签：ssrs-2008, reporting-services

**前言：**

**开发环境：** Visual Studio 2010 with BIDS + MSSQL 2012 on local box

**生产环境：** MSSQL 2008 R2 For Live Report Server

在我的报告中引用 System.Core 时，我在部署报告时遇到问题。错误如下。

> 加载代码模块时出错：'System.Core，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089'。详细信息：无法加载文件或程序集“System.Core，Version=4.0.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”或其依赖项之一。此程序集由比当前加载的运行时更新的运行时构建，无法加载。

我在报告中引用了 System.Core，以便可以使用 TimeZoneInfo 类。我已经看到有关在 SSRS 中使用此类的其他问题，并且按照这些问题中的任何建议，我无法解决该问题。

**参考**

[在 SSRS 中使用时区](https://stackoverflow.com/questions/2969689/working-with-time-zones-in-ssrs)

[SSRS 2k8，自定义 dll，找不到文件](https://stackoverflow.com/questions/4995425/ssrs-2k8-custom-dll-file-not-found)

[Reporting Services 2012 部署错误：“加载代码模块时出错”](https://stackoverflow.com/questions/13992373/reporting-services-2012-deploy-error-error-while-loading-code-module)

我可以参考 System.Core 4.0 并在本地运行，没有任何问题；但是，当我部署时，我收到上述错误消息。进一步澄清..这发生在部署过程中，而不是在部署并尝试在服务器上运行报告之后。

**编辑**

CodeModules 的报告 RDL xml 如下所示：

```
<CodeModules>
<CodeModule>System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 
```

这就是我可以说的尽可能多的“嵌入”。从外观上看，它实际上只是对程序集的引用。

协助将不胜感激。

**解决方案** 由于您不能引用 4.0，您可以引用 3.5 来访问 TimeZoneInfo 类。

步骤 1\. 为您希望使用的 TimeZoneInfo 逻辑创建一个包装类

步骤 2\. 目标 3.5

步骤 3\. 构建发布版本并将其复制到您的 [DRIVE]:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies 目录，以便您的设计人员可以加载它

步骤 4\. 将相同的程序集部署到 SQL Server @ 以下文件夹 [DRIVE]:\Program Files\Microsoft SQL Server\MSRS10.SQL2008\Reporting Services\ReportServer\bin\

现在您可以部署您的报告了。所以我的错误如下

1.  我没有参考 3.5

2.  我没有复制到我的 Visual Studio 实例的正确目录来获取程序集。我已将我的安装移动到另一个目录，但我没有将它放在新路径中。

**更新** 如果有人试图引用 .NET 4.0 ins SSRS 2012 及更高版本但仍然出现错误，答案很简单。SSRS 2012 和 2014（？）仍然不支持 .NET 4.0

[资源](https://stackoverflow.com/questions/10851474/ssrs-2012-custom-code-net-framework-4-0-not-supported)

这似乎表明 SSRS 2014 也不支持它（我无语，微软！） [MS KB](https://support.microsoft.com/en-us/kb/2869522)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-29T14:32:56.123

按照要求：

**解决方案**

由于无法引用 4.0，因此可以引用 3.5 来访问 TimeZoneInfo 类。

步骤 1\. 为您希望使用的 TimeZoneInfo 逻辑创建一个包装类

步骤 2\. 目标 3.5

步骤 3\. 构建发布版本并将其复制到您的 [DRIVE]:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies 目录，以便您的设计人员可以加载它

步骤 4\. 将相同的程序集部署到 SQL Server @以下文件夹 [DRIVE]:\Program Files\Microsoft SQL Server\MSRS10.SQL2008\Reporting Services\ReportServer\bin\

现在您可以部署您的报告了。所以我的错误如下

我没有参考 3.5

我没有复制到我的 Visual Studio 实例的正确目录来获取程序集。我已将我的安装移动到另一个目录，但我没有将它放在新路径中。

# ruby-on-rails - 将数据推送到 content_tag 时跳过了 jbuilder 模板

> ID：15260766
> 
> 赞同：2
> 
> 时间：2013-03-07T00:14:16.847
> 
> 标签：ruby-on-rails, jbuilder, content-tag

我正在使用 jbuilder 来构建 json。当我向控制器发出`.json`请求时，它运行良好，并且我得到了适当的 json 响应。现在我正在尝试将 json 推入 html5 数据属性（以便为我保存第二个获取 json 的请求）。这在`content_tag`. 我的`content_tag`样子：

```
<%= content_tag "section", id: "people-container", data: { people: @people } do %>
  Loading people...
<% end %> 
```

在其中，`content_tag`它不再命中我放在一起的 jbuilder 模板，而是似乎调用了`to_json`对象数组 ( `@people`) 上的默认值。因此，我没有得到我在点击时所做的 json `.json`。有没有办法强制它通过jbuilder？

# batch-file - 批处理 - 使用一个可变变量创建文件夹

> ID：15260767
> 
> 赞同：0
> 
> 时间：2013-03-07T00:14:18.747
> 
> 标签：batch-file, cmd, dos

所以我想创建很多不同的文件夹（很多！），它们的格式如下：

```
RobocopyVAR          -  where VAR will be a letter, or number etc. 
```

仅出于学习目的，我如何创建一个基本的批处理文件来自动创建文件夹：

```
RobocopyA       through to           RobocopyZ 
```

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:21:03.910

将其放入批处理文件中：

```
for %%L in (A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z) DO (md Robocopy%%L) 
```

# java - DisplaySingle.setLcdValueFont 在 SteelSeries 中无效

> ID：15260770
> 
> 赞同：1
> 
> 时间：2013-03-07T00:14:35.853
> 
> 标签：java, swing, steelseries

我正在使用 SteelSeries 仪表 Java 库。在我的代码中 DisplaySingle.setLcdValueFont() 无效：无论我设置什么字体，始终使用默认字体。有没有人设法使 setLcdValueFont 工作？

详细信息：我通过以下方式使用 DisplaySingle：

```
public class ScoreDisplay {
private DisplaySingle display = new DisplaySingle();
    public ScoreDisplay() {
        display.setLcdUnitString("");
        Font font =  new Font("serif", Font.PLAIN,30);
        if (font == null) {
            System.out.println("Font is null");
        }
        System.out.println(font.toString());
        display.setLcdValueFont(font);
        display.setLcdColor(LcdColor.AMBER_LCD);
        display.setLcdValue(99);
        display.setLcdDecimals(0);
        display.setLcdValueFont(font);
    }
    public DisplaySingle getDisplay() {
        return display;
    }
} 
```

稍后在代码中，显示被添加到 JPanel：

```
ScoreDisplay scoreDisplay = new ScoreDisplay();
JPanel panel = new JPanel(new GridLayout(4, 1));
[...]
panel.add(scoreDisplay.getDisplay()); 
```

我查看了 DisplaySingle 的源代码，并注意到它的 init() 方法总是将 lcdValueFont 重置为 LCD_DIGITAL_FONT 或 LCD_STANDARD_FONT 的派生值，从而覆盖通过调用 .setLcdValueFont 设置的值。方法 init() 在很多地方被调用，包括各种 set* 方法。

我认为 DisplaySingle 中存在错误，但也许我无法使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:48:30.693

这看起来像一个错误。在[setLcdValueFont()中设置的字体在](https://github.com/HanSolo/SteelSeries-Swing/blob/master/src/main/java/eu/hansolo/steelseries/gauges/DisplaySingle.java#L946)[init()](https://github.com/HanSolo/SteelSeries-Swing/blob/master/src/main/java/eu/hansolo/steelseries/gauges/DisplaySingle.java#L269)方法中被覆盖为默认`LCD_STANDARD_FONT`字体。这是那行：

```
lcdValueFont = LCD_STANDARD_FONT.deriveFont(0.625f * getInnerBounds().height); 
```

总是如此`Verdana 24`。不过，您应该能够更改单位字体。

# c# - 数据绑定和重构代码

> ID：15260774
> 
> 赞同：3
> 
> 时间：2013-03-07T00:15:28.343
> 
> 标签：c#, .net, data-binding, visual-studio-2005

我只是对将数据绑定到组合框（或我猜的其他可绑定对象）背后的一些编码实践感到好奇。假设我创建了一个对象，我想将它们添加到组合框中。所以我创建了我的对象并给它一些属性。

```
public class ObjectForList
{
    public string ObjectName { get; set; }
    public int ObjectID { get; set; }
    public string SomeOtherProperty { get; set; }
    public ObjectForList()
    {
    }
} 
```

因此，我列出了它们并将其设置为我的组合框的来源

```
List<ObjectForList> myObjects= new List<ObjectForList> { ...bunch of ObjectForList objects...};

comboBox1.DataSource = myObjects;
comboBox1.DisplayMember = "ObjectName";
comboBox1.ValueMember = "ObjectID"; 
```

我就是这么理解的，至少应该这样做。我在网上找到的所有解释中都看到了该实现。

但是让显示和值成员作为变量名称的硬编码字符串对我来说似乎并不容易。如果几年后有人在 Visual Studio 中出现并重构 ObjectID 属性（成为“MyID”或其他东西），那么组合框绑定将会中断。而且它仍然会编译，所以在加载带有组合框的表单之前没有人会注意到。同样，您将无法使用“查找引用”找到该属性的用途，因为它只是一个字符串。

人们对此有何看法？如何使用它并保持代码可维护？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:03:00.983

可以在不传递成员类型的情况下完成吗？

```
 comboBox1.ValueMember = GetPropName(() => ObjectForListObject.ObjectID);

  public static string GetPropName<T>(Expression<Func<T>> propExp)
  {
     return (propExp.Body as MemberExpression).Member.Name;
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T01:12:57.060

使用常量。就我而言，我将所有这些硬编码的字符串放入一个单独的类中，如下所示：

```
public static class Constants
{
    public static class MyObjects
    {
        public const string DisplayMember = "ObjectName";
        public const string ValueMember = "ObjectID";
    }
} 
```

使用这种方式：

```
comboBox1.DataSource = myObjects;
comboBox1.DisplayMember = Constants.MyObjects.DisplayMember;
comboBox1.ValueMember = Constants.MyObjects.ValueMember; 
```

现在，属性名称的自动重构仍然无济于事。然而，拥有一个常量类确实意味着两件好事：

1.  如果您在多个地方使用相同的字符串，那么您只需要在一个地方更新它.. 不多
2.  任何未来的开发人员都应该知道，您只能将硬编码的字符串保存在一个地方。所以，他们去常量，看看那里有什么，如果你已经很好地命名了东西，那么任何需要改变的东西对他们来说都应该是显而易见的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T00:53:54.437

在仍然是强类型的同时获取属性名称的一种方法可能是使用 linq 表达式。在您的示例中，它可能类似于以下内容：

```
Expression<Func<ObjectForList, String>> exp = o => o.ObjectName;
MemberExpression member = (MemberExpression)exp.Body;
comboBox1.DisplayMember = member.Member.Name; 
```

当然，您可能希望将其封装为一种方法，这样您就不必每次都重新编写这些内容。

```
class Tools
{
    public static String GetMemberName<ObjType, MemberType>(Expression<Func<ObjType, MemberType>> expression)
    {
        MemberExpression member = (MemberExpression)expression.Body;
        return member.Member.Name;
    }
} 
```

那么你就可以使用

```
List<ObjectForList> myObjects= new List<ObjectForList> { ...bunch of ObjectForList objects...};

comboBox1.DataSource = myObjects;
comboBox1.DisplayMember = Tools.GetMemberName<ObjectForList, String>(o => o.Objectname);
comboBox1.ValueMember = Tools.GetMemberName<ObjectForList, int>(o => o.ObjectID); 
```

缺点是您必须同时传入对象类型和成员类型，但是编译器应该会为您捕捉到这一点。这也应该能够通过自动重构来处理。

# html - Ripple Blackberry webworks 10不加载javascript

> ID：15260776
> 
> 赞同：0
> 
> 时间：2013-03-07T00:15:38.377
> 
> 标签：html, blackberry, blackberry-webworks, ripple

我正在使用`Ripple`Chrome 插件来试用带有 webworks 10 sdk 的 HTML5 应用程序。我似乎无法下载任何外部 javascript，我试图获取

```
 <script type="text/javascript" 
src="http://www.blackberry.com/app_includes/asdk/adBanner.js"></script> 
```

和

```
<script type="text/javascript" 
src="http://media.admob.com/api/v1/google_mobile_app_ads.js"></script> 
```

但两者都不起作用，它总是说无法加载资源，失败等。我在 config.xml 中有这个

```
<access subdomains="true" uri="http://www.blackberry.com/"> 
       <feature id="blackberry.advertising" required="true" version="1.0.0" /> 
    </access> 
    <accesss subdomains="true" uri="http://media.admob.com" /> 
```

任何帮助，将不胜感激。如果有任何其他更好的替代方案和在 HTML5 和 BlackBerry 中显示广告的示例，那就更好了！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T14:04:30.050

听起来 Chrome 可能会阻止您的请求。我过去遇到过这个问题，并通过将以下内容添加到我的 Chrome 快捷方式来解决它

```
-–allow-file-access-from-files 
```

如果您使用 localhost 方式运行 Ripple，则根本不应该有这个问题。我们的开发者网站上有很多文档，您也可以参考[@http://developer.blackberry.com/html5/documentation/getting_started_with_ripple_1866966_11.html](http://developer.blackberry.com/html5/documentation/getting_started_with_ripple_1866966_11.html)

# php - 无法获得适用于 CodeIgniter 2 日历类的下一个/上一个链接

> ID：15260782
> 
> 赞同：0
> 
> 时间：2013-03-07T00:16:14.250
> 
> 标签：php, codeigniter, calendar, codeigniter-2

**引用这个：** [http ://ellislab.com/codeigniter/user-guide/libraries/calendar.html](http://ellislab.com/codeigniter/user-guide/libraries/calendar.html)

> 要允许您的日历通过下一个/上一个链接动态增加/减少，您需要设置类似于此示例的日历代码：

```
$prefs = array (
    'show_next_prev'  => TRUE,
    'next_prev_url'   => 'http://example.com/index.php/calendar/show/'
);

$this->load->library('calendar', $prefs);

echo $this->calendar->generate($this->uri->segment(3), $this->uri->segment(4)); 
```

> 您会注意到有关上述示例的一些内容：
> 
> *   您必须将“show_next_prev”设置为 TRUE。
> *   您必须在“next_prev_url”首选项中向包含您的日历的控制器提供 URL。
> *   您必须通过它们出现的 URI 段向日历生成函数提供“年”和“月”（注意：日历类会自动将年/月添加到您提供的基本 URL。）。

以上是 CodeIgniter 2 文档中关于如何在日历上生成“下一个/上一个”链接的总和。

* * *

这是我尝试实现这一点的方式。

在我的`events.php`控制器文件中：

```
public function calendar()
{
    $prefs = array (
        'month_type'    => 'long',
        'day_type'      => 'short',
        'show_next_prev'=> TRUE,
        'next_prev_url' => 'http://mydomain.com/events/calendar/'
    );
    $this->load->library('calendar', $prefs);
    echo $this->calendar->generate($this->uri->segment(3), $this->uri->segment(4));
} 
```

在我的`routes.php`文件中：

```
$route['events/calendar'] = 'events/calendar'; 
```

当我转到 时`/events/calendar/`，我会看到当月的日历。

但是，当我单击`next`链接时，我会`/events/calendar/2013/04`按预期进入，但这只是一个 404 页面。

我认为文档中的示例做了一个很大的假设，即读者应该自动知道这里还需要做什么。目前尚不清楚该示例是否完整并且应该可以工作，或者我是否应该知道缺少关键部分。我应该创建一个名为的函数`show()`吗？或者我应该以`calendar()`某种方式将 URL 段传递回我的原始函数并在那里用它们做其他事情？路线？我不确定是什么。

任何人都可以对此有所了解吗？请尽可能详细。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:36:54.410

您可能想在路由文件中再添加一条规则。像这样的东西：

```
$route['events/calendar'] = 'events/calendar';
$route['events/calendar/(:any)'] = 'events/calendar'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:52:04.253

我有两个问题，都在我的路由文件中。

1）我需要添加这条路线......

```
$route['events/calendar/(:num)/(:num)'] = 'events/calendar/$1/$2'; 
```

2）我*错误地*将以下路线放置在*上面*#1 的路线上方，这压倒一切......

```
$route['events/(:any)'] = 'events/view/$1'; 
```

* * *

在职的...

```
$route['events/calendar'] = 'events/calendar';
$route['events/calendar/(:num)/(:num)'] = 'events/calendar/$1/$2';
$route['events/(:any)'] = 'events/view/$1';
$route['events'] = 'events'; 
```

# php - 成功地将 json_encode 的变量从 PHP 传递到外部 .js 文件？

> ID：15260786
> 
> 赞同：0
> 
> 时间：2013-03-07T00:16:47.987
> 
> 标签：php, jquery, ajax, json

首先让我说，我以前从未使用过 JSON 或 AJAX，但我想我至少理解了这个概念。

我只是想将一些 PHP 值传递给 jquery 函数（位于外部 .js 文件中）。我已经尝试了我能想到的一切，不知道这里出了什么问题。

在 index.php 我有：

```
<?php
$data = array(1 => 'thisor', 2 => 'thatttt');
echo json_encode($data);
?> 
```

..这显然不是我想要传递的真实数据，但这只是为了测试。在我的 .js 文件中，我具有以下功能：

```
 $.getJSON("index.php", function(data){
     alert('data loaded' + data);
  })
  .error(function() { alert("error"); }); 
```

每次，它都会抛出错误。但是我注意到，如果我使用 $.post 并在其后使用相同的确切代码，它就不会再抛出错误，而是返回数据。

另外，是否有必要“回显”json_encode？如果我不想在我的网页上显示此信息怎么办？或者..我可能在这里误解了一些东西。

还有x2，如果值得注意的话，我读到了'header('Content-type: application/json');' 这可能需要进入 PHP 文件。但是当我这样做时，它不再在浏览器中呈现网页，而是仅以纯文本形式输出内容。我需要在其他地方执行此操作/制作另一个外部 PHP 文件吗？

对任何荒谬的问题表示歉意，这真的是我尝试学习这件事的第一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:40:59.013

这对我来说可以。您确定唯一的输出是 jon 字符串吗？index.php 文件中还有其他内容吗？

使用 $.post 时，尝试将警报更改为：

```
 alert('data loaded(' + JSON.stringify(data)+')'); 
```

并检查你看到的只是 json 字符串。

由于您已经说过 index.php 文件还输出其他内容，因此这里有一个您可以做的示例（我并不是说这是一种好习惯）。所以你可以编写类似这样的 index.php 文件：

```
<?php
if(isset($_GET['ajax'])) {
  $data = array(1 => 'thisor', 2 => 'thatttt');
  echo json_encode($data);
  exit;
  }
?>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js">
</script>
<script type="text/javascript">
<!--
$.post("index.php?ajax", function(data){
     alert('data loaded(' + JSON.stringify(data)+')');
  })
  .error(function() { alert("error"); });
// -->
</script> 
```

# c# - DI、IoC 的五个 W，因为它让我的大脑爆炸

> ID：15260789
> 
> 赞同：5
> 
> 时间：2013-03-07T00:16:58.957
> 
> 标签：c#, interface, dependency-injection, inversion-of-control

所以*控制反转*是一个模糊的描述，所以*依赖注入*成为了新的定义。这是一个非常非常强大的解决方案，很可能对从未遇到过它的人感到困惑。

因此，为了不成为头灯中的鹿，我阅读了。我发现了几本很棒的书和在线帖子。但就像所有美妙的事情一样，更多的问题出现了，而不是答案。

问题是从未知项目中吸收变量，一旦它们被引入我的项目中就可以实施。

解决方案：

```
public interface ISiteParameter
{
    Guid CustomerId { get; set; }
    string FirstName { get; set; }
    string LastName { get; set; }
    string Phone { get; set; }
} 
```

我的注射器：

```
public interface IInjectSiteParameter
{
     void InjectSite(ISiteParameter dependant);
} 
```

然后我创建了这个：

```
public class SiteContent : IInjectSiteParameter
{
    private ISiteParameter _dependent;

    #region Interface Member:
    public void InjectSite(ISiteParameter dependant)
    {
        _dependant = dependant;
    }
    #endregion
} 
```

然后使用*共享引用来实现它作为 Fed 变量*，我创建了一个要实现的类，例如：

```
public class SiteParameters : ISiteParameter
{    
   public Guid Customer Id { get; set; }
   public string FirstName { get; set; }
   public string LastName  { get; set; }
   public string Phone { get; set; }
} 
```

现在`SiteParameters Class`将被另一个项目引用；这将允许我随时随地通过以下方式实际调用这些属性：

```
ISiteParameter i = new ISiteParameter();
MessageBox.Show(i.Guid + i.FirstName + i.LastName + i.Phone); 
```

那是实现，但我的问题是……**我什么时候使用？**

*   构造函数注入
*   二传手注入
*   接口注入

您什么时候使用其中一种？对于我提到的任务，我是否应该实施如此艰巨的任务来调整对其他项目所做的任何更改？

我是否在思考过程中偏离了曲线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T00:32:30.933

摘自Mark Seemann[的 .NET 中的依赖注入的](https://rads.stackoverflow.com/amzn/click/com/1935182501)第 4 章

构造函数注入应该是 DI 的默认选择。它解决了一个类需要一个或多个依赖项的最常见场景。如果依赖的类在没有依赖的情况下绝对不能运行，那么保证是有价值的。

仅当您正在开发的类具有良好的本地默认值并且您仍希望使调用者能够提供类依赖项的不同实现时，才应使用属性注入。属性注入也可用于框架要求您具有默认构造函数的情况，例如 ASP.NET 页面。

当依赖项可能随每个方法调用而变化时，最好使用方法注入。当依赖项本身表示一个值时，可能会出现这种情况，但当调用者希望向消费者提供有关调用操作的上下文的信息时，通常会出现这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:41:09.130

在可能的情况下，我使用构造函数来传递依赖关系，而不是通过方法调用进行注入。

例如：

```
public interface IWebHost 
{ 
   string DoSomething(string input); 
} 

public class FooManager 
{
   private IWebHost _host; 
   public FooManager(IWebHost host)
   {  
      _host = host; 
   } 

   public void Process()
   { 
      // do something with _host 
   }
} 
```

这样做有很多好处，但我认为最有益的有两个：

*   我的依赖项是预先指定的，错过的可能性较小。
*   我可以使用依赖注入存储库自动为我进行构建。

在某些情况下，这样做是不可能或不切实际的，但大多数情况都可以通过注入为我进行构造的工厂来解决。

另一个例子：

```
public interface IConnection : IDisposable 
{
   string DoSomething(string input); 
   // implement IDisposable
}

public interface IConnectionFactory 
{
   IConnection CreateConnection(); 
} 

public class DerpConnection : IConnection 
{
    // implementation
} 

public class DerpConnectionFactory : IConnectionFactory 
{
  // We only return DerpConnections from this factory.  

  IConnection CreateConnection() { return new DerpConnection(); } 
}

public class BarManager 
{ 
   private IConnectionFactory _connectionFactory; 
   public BarManager(IConnectionFactory connectionFactory)
   {   
      _connectionFactory = connectionFactory;
   } 

   public void Manage()
   {
      using(var connection = _connectionFactory.CreateConnection()) 
      { 
        // do something here. 
      } 
   }
} 
```

DI框架只需要知道`IConnectionFactory`这个例子中的，Factory实现直接构造`DerpConnection`. 在单元测试中，我可以轻松地模拟工厂和 IConnection 响应。

不可能的场景，*通常*表明某种[横切关注点](http://en.wikipedia.org/wiki/Cross-cutting_concern)，或者该类比它需要的复杂得多（并且违反了[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)）

# php - 将用户从网站注销时，在注销页面上是否需要在销毁会话之前启动会话？

> ID：15260790
> 
> 赞同：0
> 
> 时间：2013-03-07T00:17:01.607
> 
> 标签：php, security, authentication

在 logout.php 中只需要

```
session_destroy(); 
```

或者应该是

```
session_start();
session_destroy(); 
```

我担心如果用户直接导航到此页面，如果尚未创建会话，则销毁会话可能会出错。另一方面，会`session_destroy()`破坏上面一行中创建的会话吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:20:11.997

您不需要先调用 session_start() ... session_destroy() 将完全删除服务器上的会话，因此事先调用 session_start() 可能会导致额外的处理来创建会话，以便稍后仅将其销毁。

我建议在[手册页](http://php.net/manual/en/function.session-destroy.php)上查看有关清除任何相关 cookie/会话超全局变量的更多详细信息

# php - PHP通过MYSQLI插入记录，但总是在回显中出错

> ID：15260808
> 
> 赞同：0
> 
> 时间：2013-03-07T00:19:20.667
> 
> 标签：php, mysqli

在我的 MYSQL 表中插入记录时遇到了一个小问题。数据正常，但是当代码查询以查看是否已输入时，我不断收到错误消息。

```
$sql = mysqli_query($connect,"INSERT INTO testtable (fnhusband,fnwife,surname,email,address,suburb,city,postcode,region,number,altnumber)
VALUES ('$fnhusband','$fnwife','$surname','$email','$address','$suburb','$city','$postcode','$region','$number','$altnumber')");

if (!mysqli_query($connect,$sql))
  {
  die('Error:' . mysqli_error());
  }
else { 
    echo "1 record added";
    mysqli_close($connect);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:23:39.847

假设 $connect 是链接：

```
$connect = new mysqli("localhost", "my_user", "my_password", "world"); 
```

尝试改变

```
$sql = mysqli_query($connect,"INSERT INTO testtable (fnhusband,fnwife,surname,email,address,suburb,city,postcode,region,number,altnumber)
VALUES ('$fnhusband','$fnwife','$surname','$email','$address','$suburb','$city','$postcode','$region','$number','$altnumber')");
$result = mysqli_query($connect,$sql); 
```

到：

```
$sql = "INSERT INTO testtable (fnhusband,fnwife,surname,email,address,suburb,city,postcode,region,number,altnumber)
VALUES ('$fnhusband','$fnwife','$surname','$email','$address','$suburb','$city','$postcode','$region','$number','$altnumber')";
$result = $connect->query($sql); 
```

或程序：

```
$sql = "INSERT INTO testtable (fnhusband,fnwife,surname,email,address,suburb,city,postcode,region,number,altnumber)
VALUES ('$fnhusband','$fnwife','$surname','$email','$address','$suburb','$city','$postcode','$region','$number','$altnumber')";
$result = mysqli_query($connect, $sql); 
```

# javascript - 在 Node.js 中的 ReadSync 调用期间长度超出缓冲区错误

> ID：15260809
> 
> 赞同：0
> 
> 时间：2013-03-07T00:19:25.070
> 
> 标签：javascript, node.js, buffer, rtp

我正在尝试为 MJPEG 视频创建 RTP 数据包。首先，我读取了文件的前 5 个字节，它给出了帧的长度，然后我读取了返回的大小。

这是我的代码：

```
 while(totalSizeScanned < totalSize){

            var tmp_buf = Buffer(5)
            fs.readSync(fd,tmp_buf,totalSizeScanned,5);

            totalSizeScanned += 5;

            var stringBuffer = tmp_buf.toString("utf-8");
            this.total_len = parseInt(stringBuffer, 10);

            var frame_buf = Buffer(this.total_len);

            fs.readSync(fd, frame_buf, totalSizeScanned, this.total_len);
            file_content[frameNo] = frame_buf;

            frameNo++;
            totalSizeScanned += this.total_len;

        } 
```

这在第二次 readSync 调用中给了我一个“长度超出缓冲区”错误。我不明白为什么会这样，因为我读取的大小应该是缓冲区的大小。我一直在搜索文档和谷歌大约一个小时，但找不到任何东西。我是 Node 新手，所以这可能是微不足道的，但我不确定。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:22:52.327

取出长度的字节，在新缓冲区中从 0 开始，并添加 null 作为位置

```
fs.readSync(fd, frame_buf, 0, this.total_len-5,null); 
```

# vb.net - Imports 'iTextSharp.text.SimpleTable' 错误中指定的命名空间或类型

> ID：15260817
> 
> 赞同：3
> 
> 时间：2013-03-07T00:20:22.427
> 
> 标签：vb.net, html-to-pdf

我正在使用 Visual Studio Pro 2005 尝试访问 iTextSharp.dll 以将 HTML 转换为 PDF。问题是 VS 无法识别返回此消息的 DLL：

> “在 Imports 'iTextSharp.text' 中指定的命名空间或类型不包含任何公共成员或找不到。确保命名空间或类型已定义并包含至少一个公共成员。确保导入的元素名称不”不要使用任何别名。”

这可以防止对我的 .Net VB 代码中的对象进行任何访问。iTextSharp 版本是我今天下载的 5.4.0。

问题在于所需的两个组件：

*   导入 iTextSharp.text
*   导入 iTextSharp.text.pdf

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-08T13:28:11.167

我对 CuteFM32.dll 也有类似的问题。VB.NET 项目中的引用指向，`\obj\debug\interop.cuteformcolib.dll`但我认为当我运行 Build > Clean solution 命令时，它删除了 dll，因此引用不再有效。请注意，“复制本地”设置为 False 以引用此 DLL。

幸运的是，简单地删除和添加引用对我有用，但我必须打开“显示所有文件”才能看到导入的 DLL 丢失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:50:11.180

由于引用适用于新项目，因此创建一个新项目并添加所有类、表单等，检查引用是否仍然有效。要么您将添加所有内容并解决问题，要么您将找到造成问题的原因。

# c - 在静态库中定义枚举

> ID：15260818
> 
> 赞同：1
> 
> 时间：2013-03-07T00:20:25.940
> 
> 标签：c, windows, eclipse, static-libraries

我有一个`foo.h`文件`enum`：

```
#ifndef FOO_H
#define FOO_H

enum foo_e { foo_a, foo_b, foo_c };
typedef enum foo_e foo_t;

foo_t get_foo(char bar);

#endif 
```

该文件`foo.c`导入它 ( `#include "foo.h"`) 并毫无问题地使用它。

我通过 Eclipse 导出了这个项目的静态库，给了我一个`libFoo.a`.

在其他项目中，我使用该库并且所有符号都已解析、编译并且工作正常。只有`enum`声明不被识别。Eclipse 告诉我 , `foo_t`, `foo_a`,是未定义的，而已`foo_b`定义。`foo_c``get_foo`

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-01T15:43:58.293

这是 Eclipse 如何索引项目的问题。您可以通过刷新项目的 Eclipse 索引来解决此问题。

1.  右键单击给出错误的项目（不是静态库）并选择`Index > Freshen All Files`
2.  再次右键单击`Index > Rebuild`

您的项目现在应该能够在任何包含的静态库中找到所有符号。

# java - Hibernate外键是主键

> ID：15260819
> 
> 赞同：3
> 
> 时间：2013-03-07T00:20:27.797
> 
> 标签：java, hibernate

```
DB Table REQUEST:
{
   primary key REQUEST_ID,
   String REQUEST_DETAILS
}

DB Table INVALID_REQUEST_DETAILS{
   (foreign key, primary key) fk_req_id references REQUEST.REQUEST_ID,
   String INVALID_COMMENTS,
   String APPROVER_NAME
} 
```

如您所见，一个 INVALID_REQUEST_DETAILS 对应一个 REQUEST。出于某种我不明白的原因，我听说 Hibernate 将此映射为多对一关系。我的 .hbm.xml 文件有以下代码：

```
<hibernate-mapping>
  <class name="InvalidRequestDetails" table="INVALID_REQUEST_DETAILS">  
  <id name="id" column="fk_req_id">
    <generator class="foreign">
        <param name="property">request</param>
    </generator>
  </id>

  ... (other column mappings omitted) ...    

  <many-to-one name="request" class="Request" unique="true" not-null="true" />
 </class>
</hibernate-mapping> 
```

除非您还提供一些解释，否则请不要让我参考“阅读休眠文档”，它包含非常稀疏的概念解释并且我已经阅读过它。我遇到的问题是我的映射文件显然是错误的，因为我无法将任何记录插入到我的表中。

问题：

1.  如何修复我的 .hbm.xml 文件？为什么？
2.  如果我在上面解释了逻辑上的一对一关系，为什么我需要一个多对一标签？多对一和一对一之间的真正区别是什么？你什么时候用哪个？如果我的外键不是主键，会有什么变化吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T15:08:42.853

不确定您从哪里获得信息，但您当然可以将其建模为一对一。 [这是](http://www.mkyong.com/hibernate/hibernate-one-to-one-relationship-example/)一个如何做的例子。

```
<hibernate-mapping>
  <class name="InvalidRequestDetails" table="INVALID_REQUEST_DETAILS">  
  <id name="id" column="fk_req_id">
    <generator class="foreign">
        <param name="property">request</param>
    </generator>
  </id>

  ... (other column mappings omitted) ...    

  <one-to-one name="request" class="Request" constrained="true" />
 </class>
</hibernate-mapping> 
```

# wcf - WCF 服务在本地机器上工作，但在远程机器上不起作用

> ID：15260829
> 
> 赞同：1
> 
> 时间：2013-03-07T00:21:25.767
> 
> 标签：wcf

我有一个简单的 WCF 服务。它托管在 IIS 中。远程客户端能够获取元数据，并生成代理代码。但是当进行服务调用时，服务没有响应。我的 WCF 服务代码永远不会被命中。问题甚至在那之前就发生了。这是堆栈跟踪。我怎样才能解决这个问题？该服务在本地工作（即，在托管该服务的同一台机器上）。我没有进行任何身份验证等。

```
The open operation did not complete within the allotted timeout of 00:01:00\. The
 time allotted to this operation may have been a portion of a longer timeout.

Server stack trace:
   at System.ServiceModel.Channels.ReliableRequestor.ThrowTimeoutException()
   at System.ServiceModel.Channels.ReliableRequestor.Request(TimeSpan timeout)
   at System.ServiceModel.Channels.ClientReliableSession.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ClientReliableDuplexSessionChannel.OnOpen(Tim
eSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.CallOpenOnce.System.ServiceMod
el.Channels.ServiceChannel.ICallOnce.Call(ServiceChannel channel, TimeSpan timeo
ut)
   at System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeS
pan timeout, CallOnceManager cascade)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean on
eway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan tim
eout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCall
Message methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message) 
```

添加配置文件以响应评论：

```
<?xml version="1.0"?>
<configuration>
  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web>
  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true">
      <serviceActivations>        
        <add relativeAddress="Service1.svc" service="WcfService1.Service1"/>
      </serviceActivations>
    </serviceHostingEnvironment>
    <services>      
      <service name="WcfService1.Service1">
        <host>
          <baseAddresses>
            <add baseAddress="http://mymachine.mydomain.com/Service1/" />            
          </baseAddresses>                    
        </host>
        <endpoint address="Service1"
                  binding ="customBinding"
                  bindingConfiguration="NetHttpBinding"
                  contract="WcfService1.IService1"/>
      </service>
    </services>
    <bindings>
      <!-- http://msdn.microsoft.com/en-us/library/vstudio/hh323713(v=vs.100).aspx
           You must add the binding elements in the following order: Transaction Flow, Reliable Session, Security,
           Composite Duplex, One-way, Stream Security, Message Encoding, and Transport.-->
      <customBinding>
        <binding name="NetHttpBinding">
          <reliableSession />          
          <compositeDuplex />
          <oneWay />
          <binaryMessageEncoding />          
          <httpTransport maxBufferSize="2147483647"  maxReceivedMessageSize="2147483647"  />
        </binding>
      </customBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the values below to false before deployment -->
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>
</configuration> 
```

客户端可以访问静态html文件，元数据页面wsdl也可以创建代理。

编辑：如果我将绑定更改为 basicHttpBinding，它可以工作。但我需要让它与这个自定义绑定一起工作。

编辑：罪魁祸首似乎是`<compositeDuplex/>`and`<oneWay/>`元素。如果我将它们从绑定中删除，它就可以工作（现在就是；为什么它不适用于元素 - 我不知道）。为了完整起见，如果我只删除一个`<oneWay/>`或`<compositeDuplex/>`（**但不是两个**）我在尝试访问元数据时会收到此错误：

```
Binding 'CustomBinding' doesn't support creating any channel types. This often indicates that the BindingElements in a CustomBinding have been stacked incorrectly or in the wrong order. A Transport is required at the bottom of the stack. The recommended order for BindingElements is: TransactionFlow, ReliableSession, Security, CompositeDuplex, OneWay, StreamSecurity, MessageEncoding, Transport. 
```

如果两者都留在绑定中，则服务在本地工作，但远程客户端在调用方法时永远不会得到响应。

# ios - 由于输入字节不属于输入代码集 UTF-8，Objective-c 输入转换停止

> ID：15260833
> 
> 赞同：0
> 
> 时间：2013-03-07T00:21:31.847
> 
> 标签：ios, objective-c

我正在尝试将十六进制命令发送到蓝牙打印机。其中一个字符决定了我可以传递的数据的大小。字符串是：

> @"\x1d\x28\x6b\xff\x00\x31\x50\x30\x66\x61\x72\x74\x20\x70\x6f\x6f\x70\x79\x20\x66\x61\x72\x74\x20 \x70\x6f\x6f\x70\x79\x20\x66\x61\x72\x74\x20\x70\x6f\x6f\x70\x79\x20\x66\x61\x72\x74\x20\x70\x6f\x6f \x70\x79\x20\x66\x61\x72\x74\x20\x70\x6f\x6f\x70\x79\x20\x66\x61\x72\x74\x20\x70\x6f\x6f\x70\x79\x20 \x66\x61\x72\x74\x20\x70\x6f\x6f\x70\x79\x20\x66\x61\x72\x74\x20\x70\x6f\x6f\x70\x79\x20\x66\x61\x72 \x74\x20\x70\x6f\x6f\x70\x79\x20\x66\x61\x72\x74\x20\x70\x6f\x6f\x70\x79\x20\x66\x61\x72\x74\x20\x70 \x6f\x6f\x70\x79\x2e\x2e\x2e\x2e"

当我这样做时，我得到标题中的错误。原因是我传递了 ff （第一行 - 16 个字符），它在 UTF-8 的代码集之外。如果我将其设置为代码集中的 7f，则一切正常。

我尝试了几种不同的方法，但无法解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:33:38.657

将您的代码更改为以下内容：

```
uint8_t bytes[] = { 0x1d, 0x28, 0x6b, 0xff, 0x00, 0x31, 0x50, 0x30, 0x66, ... };
NSData *data = [[NSData alloc] initWithBytes:bytes length:sizeof(bytes)]; 
```

现在您可以使用`NSData`发送十六进制命令。

# android - 如何在我的 textview 周围添加边框并创建两个选项卡？安卓

> ID：15260836
> 
> 赞同：0
> 
> 时间：2013-03-07T00:21:52.427
> 
> 标签：android, android-layout, tabs

我的问题是我的文本视图周围没有边框。我想模拟一个基本的短信应用程序。另外，我将如何添加允许您滑动或按下它们的选项卡？先感谢您！

XML:

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">
     <TextView
        android:text="" 
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="14sp"
         />
    <EditText android:id="@+id/edit_message"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message" 
        android:layout_gravity="bottom"
         />

    <Button
        android:id="@+id/button_send"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="sendMessage"
        android:text="@string/button_send" 
        android:layout_gravity="bottom"/>

</LinearLayou 
```

爪哇：

```
import android.app.Activity;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

public void sendMessage(View v){

    EditText editMessage=(EditText)findViewById(R.id.edit_message);
    TextView textView = (TextView) findViewById(R.id.textView1);

    //get text from edittext and convert it to string
    String messageString=editMessage.getText().toString();

    //set string from edittext to textview
    textView.append(messageString+"\n");

    //clear edittext after sending text to message
    editMessage.setText("");

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:00:32.690

实现选项卡的最简单方法是使用 TabHost/TabWidget 作为 user1934637 提到的。Android 开发者指南非常详尽地介绍了这一点：

[http://developer.android.com/guide/topics/ui/layout/tabs.html](http://developer.android.com/guide/topics/ui/layout/tabs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:40:23.510

您可以尝试在文本视图上设置背景，只需将背景设置为尺寸合适且有边框的图像。

# python - Python - 元组索引错误的过滤器（lambda）列表

> ID：15260837
> 
> 赞同：0
> 
> 时间：2013-03-07T00:21:53.537
> 
> 标签：python, filter, tuples

我正在尝试按如下方式过滤元组......为简洁起见，未包含一些代码：

```
 1) print >> sys.stderr, "audio", audio
    2) print >> sys.stderr, "audio[0]", audio[0]
    3) print >> sys.stderr, "audio[1]", audio[1]
    4) audio_lang = filter(lambda a: a[1]==LANG, audio) 
```

它被传递一个包含 2 个元素的元组，运行如下：

```
 D:\Staging\Test>cleanMKV.py .
 audio [('fre',), ('eng',)]
 audio[0] ('fre',)
 audio[1] ('eng',)
 Traceback (most recent call last):
 File "D:\Staging\Test\cleanMKV.py",
 audio_lang = filter(lambda a: a[1]
 File "D:\Staging\Test\cleanMKV.py",
 audio_lang = filter(lambda a: a[1]
 IndexError: tuple index out of range 
```

元组是用 RE 正确创建的，我正处于我想要过滤的点，如第 4 行所示。它试图在音频中引用音频 a[1]。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:35:05.647

首先，你定义

```
audio = [('fre',), ('eng',)] 
```

这实际上是两个元素的列表`('fre',)`和`('eng',)`，它们都是仅包含单个元素的元组，分别是`'fre'`和`'eng'`。

现在，如果你这样做

```
audio_lang = filter(lambda a: a[1]==LANG, audio) 
```

你是说只保留音频元素，其中第二个元素等于`LANG`. 但是作为你的列表元素`('fre',)`并且`('eng',)`是长度为 1 的元组，你得到

```
IndexError: tuple index out of range 
```

因为您正在尝试访问不存在的第二个元素。

你可以做

```
audio_lang = filter(lambda a: a[0]==LANG, audio) 
```

即访问第一个元素或重新定义音频并执行

```
audio = ['fre', 'eng']
audio_lang = filter(lambda a: a == LANG, audio) 
```

但我不明白，你想完成什么，所以这可能不是你想要的。但希望这可以解释您遇到的错误的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:33:51.330

`a`是一个元组，但`audio`它是一个列表。组成 的两个元组中的每个元组中只有一个项目`audio`。因此，评估`audio[0][1]`or`audio[1][1]`将返回`tuple index out of range`。

```
>>> audio = [('fre',),('eng',)]

>>> audio
[('fre',), ('eng',)]
>>> audio[0]
('fre',)
>>> audio[0][0]
'fre'
>>> audio[0][1]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: tuple index out of range 
```

... 但：

```
>>> audio = [('fre',1),('eng',2)]
>>> audio[0][1]
1 
```

# .net - 如何在线自动从 TFS 下载最后一个版本？

> ID：15260839
> 
> 赞同：3
> 
> 时间：2013-03-07T00:22:01.427
> 
> 标签：.net, tfs, msbuild, build-process

作为持续集成过程的一部分，我们希望在线下载最后一个构建表单 TFS，以便在本地执行自动化测试。

不知道有没有办法自动下载？

在 TFS ODATA SDK 中看起来没有办法做到这一点。我们正在尝试通过编码来做到这一点，但是处理**实时身份验证**是一个问题，并且一旦我们有了 URL 路径，**替代凭据**似乎就不能替代下载文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:29:36.730

为此，您需要使用常规的 TFS .NET 客户端对象模型。我在[http://blogs.msdn.com/b/buckh/archive/2013/01/07/how-to-connect-to-tf-service-without-上发布了有关使用备用凭据和一些示例代码的信息a-prompt-for-liveid-credentials.aspx](http://blogs.msdn.com/b/buckh/archive/2013/01/07/how-to-connect-to-tf-service-without-a-prompt-for-liveid-credentials.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T05:18:16.337

通常 TFS 定义一个放置文件夹，该文件夹通常是一个网络共享，可能会进一步受到 Windows 访问控制的限制。既然 drop 目录代表了最新的成功构建，为什么不直接从那里复制呢？Xcopy 工作正常。

例如，对于部署到网站，将定义一个附加任务，将构建复制到目标目录

# php - cakephp 2 cookie 仅适用于 Chrome 或 IE

> ID：15260841
> 
> 赞同：1
> 
> 时间：2013-03-07T00:22:08.440
> 
> 标签：php, internet-explorer, google-chrome, cakephp

我有一个奇怪的问题，似乎只发生在 chrome 中。基本上我正在设置一个 cookie 来记住一个 id，这样我就可以在我的用户访问我的网站时向他们展示正确的信息。

在我的控制器动作中：

```
$currentcookie = $this->Cookie->read('mixes');
if ($currentcookie == '') {
    //write a new cookie with a new id etc
} else {
    //show them info relating to the id in the cookie
} 
```

因此，如果这是某人第一次访问 if ($currentcookie == '') 应该评估为 true 并且应该创建一个新的 cookie。如果已经有一个 cookie 'else' 就会运行。

我在视图中输出 id，这样我就知道它是否是新创建的，它应该在第一次访问时出现，但在后续访问时应该保持不变。

这适用于 FF Opera 和 safari，但奇怪的是不适用于 chrome 或 IE。我没有关闭浏览器或任何东西。我错过了什么？

**新 --- 以下是我读取和写入 cookie 的方式：**

```
$currentcookie = $this->Cookie->read('mixes'); 

$this->Cookie->write('mixes', array('idofthemix' => $newTempMixId)); 
```

在我的 appController 中，我在之前的过滤器中有：

```
 $this->Cookie->name = 'tempmix';
    $this->Cookie->time = '30 days';  // or '1 hour'
    $this->Cookie->domain = 'localhost';
    $this->Cookie->key = 'li8&*^iih^456%$^%$fsgatfjmi@#@##@@:LLLkjljkjlj87^*&^*6768!£"&^*()%$&';
    $this->Cookie->httpOnly = true; 
```

因此它在大多数浏览器中显示为 tempmix[mixes]，其值类似于 Q2FrZQ%3D%3D.b8LRe4GareCnq54%3D。只是不在 Chrome 或 IE 中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:27:20.720

检查您的浏览器设置，有时浏览器设置为不允许任何 cookie。

另外，尝试手动转到每个浏览器中的 cookie 列表，查看您的站点 cookie 是否存在。（每个浏览器访问 cookie 的方式都不同）

可能值得注意的是，一些安全软件，如防病毒软件或互联网安全套装，可能会扰乱浏览器传输请求的方式。

**编辑**

编辑后，尝试以下操作：

```
$currentcookie = unserialize($this->Cookie->read('mixes')); 

$this->Cookie->write('mixes', serialize(array('idofthemix' => $newTempMixId))); 
```

# python - 如何为具有复合主键的表构建外键？

> ID：15260842
> 
> 赞同：4
> 
> 时间：2013-03-07T00:22:30.643
> 
> 标签：python, sqlalchemy, flask-sqlalchemy

我在弄清楚如何为我正在定义的表正确构建我的 ForeignKey 列时遇到了很多麻烦。我在这里概述了我的模型（并在我的 PhoneNumber 模型中有问题的行旁边添加了注释）：

```
class AreaCode(db.Model):
    __tablename__ = 'areacodes'
    area_code = db.Column(db.Integer, primary_key=True)
    exchanges = db.relationship('Exchanges', backref='area_code')

class Exchange(db.Model):
    __tablename__ = 'exchanges'
    exchange = db.Column(db.Integer, primary_key=True)
    area_code_pk = db.Column(db.Integer, db.ForeignKey('areacodes.area_code'), primary_key=True)

class PhoneNumber(db.Model):
    __tablename__ = 'phonenumbers'
    phone_number = db.Column(db.Numeric(precision=4, scale=0), primary_key=True)
    exchange_pk = db.Column(db.Integer, db.ForeignKey('exchanges.exchange'), primary_key=True) # this doesnt work since Exchange has two primary keys 
```

这是正在发生的事情：

我的 Exchange 表有一个复合主键。这是我的用例所必需的。

我试图定义的 PhoneNumber 表需要 Exchange 表的 ForeignKey，但由于 Exchange 表有一个复合主键，我无法弄清楚如何使关系工作。

任何指导将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T20:51:21.947

因此，在与 sqlalchemy 邮件列表中的几位伟人交谈后，我终于弄清楚了上述问题。下面是我的代码的最终版本，它允许我在表之间正确关联：

```
class AreaCode(db.Model):
    __tablename__ = 'areacodes'

    area_code = db.Column(db.Integer, primary_key=True)

class Exchange(db.Model):
    __tablename__ = 'exchanges'

    exchange = db.Column(db.Integer, primary_key=True)
    area_code_pk = db.Column(db.Integer, db.ForeignKey('areacodes.area_code'),
                             primary_key=True)
    area_code = db.relationship('AreaCode', backref=db.backref('exchanges', lazy='dynamic'))

class PhoneNumber(db.Model):
    __tablename__ = 'phonenumbers'
    __table_args__ = (
        db.ForeignKeyConstraint(
            ['exchange_exchange', 'exchange_area_code_pk'],
            ['exchanges.exchange', 'exchanges.area_code_pk'],
        ),
    )

    phone_number = db.Column(db.Integer, primary_key=True)
    exchange_exchange = db.Column(db.Integer, primary_key=True)
    exchange_area_code_pk = db.Column(db.Integer, primary_key=True)
    exchange = db.relationship('Exchange', backref=db.backref('phone_numbers', lazy='dynamic')) 
```

# autocomplete - Sublime 编辑器：如何通过 vi 之类的快捷方式（CTRL+p、CTRL+n）精确地完成上一个/下一个匹配？

> ID：15260843
> 
> 赞同：1
> 
> 时间：2013-03-07T00:22:32.250
> 
> 标签：autocomplete, match, sublimetext2, vi

在 vi 中有一个非常有用的选项，它允许您通过按 ctrl+p（或 n 用于下一个匹配）来完成上一个匹配

例如，采用以下代码

```
$res = mysql_query("SELECT * from TABLE_1");
while(list($a, $b) = mysql_fetch_row($res){
  // do something
}

$res1 = mysql_query("SELECT * from TABLE_2");
while(list($a, $b) = mysql_f 
```

让我们假设光标在上面的“f”字母旁边。如果你按下`control+p`vi，它会完成`mysql_fetch_row`上面找到的。

sublime 中是否有类似的快捷方式，或者可能是为其制作宏的简单方法？我对python一无所知，所以每一个帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:48:42.723

创建菜单本质上就像正常的弹出自动完成，不是吗？通过插件获取上一个/下一个匹配是可行的。[我将以下（链接](https://gist.github.com/skuroda/5105635)）放在一起，应该得到上一场比赛（一次）。`previous_keyword_match`您可以使用as 命令将其绑定到键绑定。请记住，control+p（取决于您的系统）是映射的默认命令。我添加了用于测试键映射的内容，尽管您可能想要更改它。

哦，作为一个小的配置说明，我硬编码了 5000（它允许向后搜索视图 5000 个字符或直到它再次到达起点）。如果您发现自己需要的不止这些，请随时调整。尽管我认为这没有必要，因为您只能获得一场比赛。

# html - 输入元素首先出现

> ID：15260846
> 
> 赞同：-1
> 
> 时间：2013-03-07T00:22:56.807
> 
> 标签：html

我不知道为什么`input`元素会出现在第一行，即使我将它们放在第二行。

```
<body>    
    <h1>Fill out Your Time-card</h1>
    <table>
        <tr>
            <td>Monday</td>
            <td>Tuesday</td>
        </tr>
        <tr>
            <input type=text id="monday"/>
            <input type=text id="tuesday"/>
        </tr>
    </table>
</body> 
```

[http://jsfiddle.net/ugrWP/](http://jsfiddle.net/ugrWP/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:25:12.553

表格内的标记无效。您需要在行中包含`<td>...</td>`每个单元格的标签。`<tr>`像这样：

```
<body>    
    <h1>Fill out Your Time-card</h1>
    <table>
        <tr>
            <td>Monday</td>
            <td>Tuesday</td>
        </tr>
        <tr>
            <td><input type=text id="monday"/></td>
            <td><input type=text id="tuesday"/></td>
        </tr>
    </table>
</body> 
```

# windows - 使用从另一个目录拖放到批处理文件不起作用

> ID：15260847
> 
> 赞同：12
> 
> 时间：2013-03-07T00:23:07.387
> 
> 标签：windows, batch-file

我有一个看起来像这样的文件夹结构：

```
project
    bin
        my_program.exe
        misc_stuff.exe
    DROP_OVER_ME.bat
    input_file.txt 
```

基本上，我希望能够将输入文件拖放到`DROP_OVER_ME.bat`批处理文件的顶部，并将输入文件的路径传递给 exe。

这是我的批处理文件的样子：

```
@echo off
start bin/my_program.exe %1
exit 
```

当我拖放`input_file.txt`批处理文件时，一切正常——`my_program.exe`成功接收输入文件的路径并运行。

但是，当`input_file.txt`位于项目文件夹之外时，拖放它会使批处理文件弹出一条消息说

> Windows 找不到“bin/my_program.exe”。请确保您输入了正确的名称，然后重试。

如何修复批处理文件，以便可以从文件系统中的任意位置拖放文件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T01:30:11.397

听起来批处理脚本将当前工作目录作为您从中拖动*的*目录，而不是包含脚本的目录。`echo %cd% && pause`（如果您愿意，可以通过在脚本中添加一个来测试这一点。）尝试如下修改您的脚本以消除有关文件路径的任何歧义：

```
@echo off
cd /d "%~dp0"
start "" "bin\my_program.exe" "%~f1"
exit /b 
```

# mysql - 对存储过程参数 SQL 使用“IN”语句

> ID：15260853
> 
> 赞同：0
> 
> 时间：2013-03-07T00:23:34.250
> 
> 标签：mysql, sql

我有一个带有一个名为“@IDs”的输入参数的存储过程。这是从我的应用程序中填充的，它将以以下格式填充它：'2、30、105'。这个参数里面的值的个数当然会有所不同（例如：有时@IDs 会是'100, 2005, 2, 510'） 我的存储过程很简单。我有一张名为“Persons”的表。我正在尝试编写此查询：

```
Select * From Persons Where P_Id in (@IDs) 
```

P_ID 是我表中的主键。我得到的错误是“将 varchar 值 '2, 3, 4' 转换为数据类型 int 时转换失败。” 任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:26:42.030

一种方法是使用动态 SQL。那就是将 SQL 生成为字符串，然后执行它。

一种更简单的方法（也许）是使用`like`：

```
where concat(', ', @IDS, ', ') like concat('%, ', id, ', %') 
```

请注意，这会将分隔符放在表达式的开头和结尾，因此“10”不会匹配“11010”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:27:26.460

1）显示您的代码。

2) 您可能已尝试将所有值作为一个参数传递。那是行不通的。您必须将它们列为单独的参数，然后将它们绑定为单独的参数。

`in`是的，当参数的数量可能发生变化时，这使得使用存储过程变得很困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T00:32:59.657

你可能需要做一个准备好的陈述。这个想法是构建选择语句然后执行它。这是有关如何执行此操作的示例...

```
USE mydb;

DROP PROCEDURE IF EXISTS execSql;
DELIMITER //
CREATE PROCEDURE execSql (
                 IN sqlq VARCHAR(5000)
                  ) COMMENT 'Executes the statement'
BEGIN
  SET @sqlv=concat(concat('select abc from yourtable where abc in (',sqll),')');
  PREPARE stmt FROM @sqlv;
  EXECUTE stmt;
  DEALLOCATE PREPARE stmt;
END //
DELIMITER ; 
```

只需更改要执行的查询即可。

# android - 一项活动，两种观点。我如何以及在哪里膨胀第二个视图？

> ID：15260855
> 
> 赞同：1
> 
> 时间：2013-03-07T00:23:51.233
> 
> 标签：android, xml, layout-inflater

我有一个可以显示两种不同布局的活动。两种布局都是预定义的 (XML)。基本上，如果满足条件，则应显示布局 A。如果条件失败，则应显示布局 B。

布局 A 是一个简单的线性布局——可以这么说，它是我的主要“形式”。布局 B 是一个简单的相对布局 - 它是一个占位符，直到可以下载一些数据。下载数据（并发送通知）后，我想删除布局 B 并显示布局 A。

我尝试在我的`invalidate()`方法中调用布局 B 上的`onResume()`方法，`Activity`但这不起作用。

我不确定我应该采取什么方法，（1）在哪里“正确”切换布局，以及（2）我应该如何去显示它。我假设我需要在满足我的条件时为布局 A 充气，但我对此不是 100% 确定的。

编辑：剪掉我的`onCreate()`方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layoutA); // will happen 99% of the time
    ...
    if (!dbHelper.tableIsPopulated()) {
        setContentView(R.layout.layoutB); // show placeholder bc no data exists
        getData();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:37:50.150

除非你有理由不使用背景`Thread`，否则我建议使用`AsyncTask`和使用进度条。在您获得数据之前，它会比使用假人`Layout`作为占位符更便宜。你说它不会被使用，但只有 1% 的时间。在我看来似乎是一种浪费

```
 public class TalkToServer extends AsyncTask<String, String, String> {
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        }

        @Override
        protected void onProgressUpdate(String... values) {
            super.onProgressUpdate(values);

        }

        @Override
        protected String doInBackground(String... params) {
        //do your work here
            return something;
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
               // do something with data here-display it or send to mainactivity
    } 
```

您显然知道，`AsyncTask`但[这里是](http://developer.android.com/reference/android/os/AsyncTask.html)面向未来访问者的文档，它有一个使用`ProgressDialog`.

**笔记**

因为它不是一个内部类，如果你要从那里展示你，你只需要将你的构造函数传递给你`Context`的构造函数。`AsyncTask``ProgressDialog`

# c++ - 打印地图矢量

> ID：15260856
> 
> 赞同：-1
> 
> 时间：2013-03-07T00:23:57.477
> 
> 标签：c++

如何打印多图矢量？例如，我有一个看起来像这样的向量：

```
typedef std::multimap<double,std::string> resultMap;
typedef std::vector<resultMap> vector_results; 
```

**编辑**

```
for(vector_results::iterator i = vector_maps.begin(); i!= vector_maps.end(); i++)
{
   for(vector_results::iterator j = i->first.begin(); j!= i->second.end(); j++)
   {
      std::cout << j->first << " " << j->second <<std::endl;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:55:42.130

`i`外循环中的变量`for`指向 a `resultMap`，这意味着`j`变量的类型需要是`resultMap::iterator`。将循环重写为

```
for(vector_results::const_iterator i = vector_maps.begin(); i != vector_maps.end(); ++i)
{
   for(resultMap::const_iterator j = i->begin(); j != i->end(); ++j)
   {
      std::cout << j->first << " " << j->second << std::endl;
   }
} 
```

我将迭代器类型更改为，`const_iterator`因为迭代器没有修改容器元素。

* * *

如果您的编译器支持 C++11 的基于范围的`for`循环，则可以更简洁地编写代码

```
for( auto const& i : vector_maps ) {
  for( auto const& j : i ) {
    std::cout << j.first << " " << j.second << std::endl;
  }
} 
```

# iphone - Sqlite 在实际设备上不起作用（在我的 iPhone 上）

> ID：15260858
> 
> 赞同：0
> 
> 时间：2013-03-07T00:24:14.127
> 
> 标签：iphone, ios, sqlite

我编写了一个使用 Sqlite 数据库的简单应用程序。它在 iPhone 模拟器上运行良好，但不适用于我的 iPhone。

```
-(NSString *) getFilePath
{
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
NSUserDomainMask,YES);
NSString *documentsDir=[paths objectAtIndex:0]; 

return [documentsDir stringByAppendingPathComponent:@"database.sql"];
}

-(void)openDatabase
{
    //Open

    if (sqlite3_open([[self getFilePath] UTF8String], &db) != SQLITE_OK ) {
        sqlite3_close(db);
        NSAssert(0, @"Database failed to open.");
    }
} 
```

启动应用程序后在 Xcode 上的输出：

```
2013-03-07 02:12:16.525 SqliteWorkApp[464:907] *** Assertion failure in -[SqliteWorkAppViewController insertRecord], /Users/cmltkt/Objective-C Apps/SqliteWorkApp/SqliteWorkApp/SqliteWorkAppViewController.m:77
2013-03-07 02:12:16.529 SqliteWorkApp[464:907] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Error updating table.'
*** First throw call stack:
(0x3398e2a3 0x3b82797f 0x3398e15d 0x34263ab7 0x19b3b 0x195bd 0x357b5595 0x357f5d79 0x357f1aed 0x358331e9 0x357f683f 0x357ee84b 0x35796c39 0x357966cd 0x3579611b 0x374885a3 0x374881d3 0x33963173 0x33963117 0x33961f99 0x338d4ebd 0x338d4d49 0x357ed485 0x357ea301 0x19147 0x3bc5eb20)
libc++abi.dylib: terminate called throwing an exception 
```

插入记录功能：

```
-(void)insertRecord
{
    NSString *sql = [NSString stringWithFormat:@"INSERT OR REPLACE INTO 'countries' ('name', 'flag') " "VALUES ('Sample Data','Sample Data')"];

    char *err;
    if (sqlite3_exec(db, [sql UTF8String], NULL, NULL, &err)
        != SQLITE_OK) {
        sqlite3_close(db);
        NSAssert(0, @"Error updating table.");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T06:14:00.183

我有同样的问题，

我在应用程序中使用了 SQLite Db 便携式文件，它在模拟器上运行得很好，但在真实设备上却不行。

所以在挖了很多之后，我发现，当我把sqlite db文件拖到我的项目中时，Xcode并没有将它添加到bundle资源中。

*请！走这条路*

1.  选择你的项目去“构建阶段”
2.  将你的**database.sqlite**（它应该是我知道的 sqlite）文件添加到 Bundle 资源中。

![在此处输入图像描述](../Images/4da26b0df497323d5c59783de41128f2.png)

并且为了处理所有 SQLite 的东西，我的数据库助手类代码是

```
#import "ASCODBHelper.h"
#import <sqlite3.h>

@implementation ASCODBHelper

static ASCODBHelper *db;

+(ASCODBHelper *)database{

    if (db == nil) {

        db = [[ASCODBHelper alloc] init];
    }

    return db;
}

- (id)init{

    self = [super init];

    if (self) {

        NSString *sqLiteDb = [[NSBundle mainBundle] pathForResource:@"IOSMeeting" ofType:@"sqlite"];

        if (sqlite3_open([sqLiteDb UTF8String], &db) != SQLITE_OK) {

            NSLog(@"Failed to open database!");       
        }

    }
    return self;
}

-(void)getPresentationDeatilById:(NSString *)presentationid andSessionId:(NSString *)sessionid{

    NSInteger pId = [presentationid integerValue];
    NSInteger sId = [sessionid integerValue];

    NSString *queryString = [[NSString alloc] initWithFormat:@"SELECT distinct mediaID,mediaURL,meetingName,trackName FROM Media WHERE presentationID='%d' and sessionID ='%d'",pId,sId];

    NSLog(@"query is  : %@",queryString);

    sqlite3_stmt *selectStatement;

    if (sqlite3_prepare_v2(db, [queryString UTF8String], -1, &selectStatement, nil) == SQLITE_OK) {
        while (sqlite3_step(selectStatement) == SQLITE_ROW) {

            char *mediaid = (char *) sqlite3_column_text(selectStatement, 0);
            char *mediaurl = (char *) sqlite3_column_text(selectStatement, 1);
            char *meetingname = (char *) sqlite3_column_text(selectStatement, 2);
            char *topicname = (char *) sqlite3_column_text(selectStatement, 3);

            NSString *mediaID = [[NSString alloc] initWithUTF8String:mediaid];
            NSString *mediaURL = [[NSString alloc] initWithUTF8String:mediaurl];
            NSString *topicName = [[NSString alloc] initWithUTF8String:topicname];
            NSString *meetingName = [[NSString alloc] initWithUTF8String:meetingname];

            //you can log here results            

        }
        sqlite3_finalize(selectStatement);
    }  
}        

@end 
```

这是我如何使用它的代码。

只需导入

```
#import "ASCODBHelper.h" 
```

并以这种方式调用我们的 db helper 方法

```
[[ASCODBHelper database] getPresentationDeatilById:presentationId andSessionId:sessionId]; 
```

让我知道是否需要帮助。

# data-mining - A-close 数据挖掘实现

> ID：15260863
> 
> 赞同：1
> 
> 时间：2013-03-07T00:24:44.213
> 
> 标签：data-mining, implementation, apriori

我需要在数据集上比较 Apriori 和 A-close 算法，所以我需要这两种算法的实现。我可以找到 Apriori 算法的实现，但我找不到 A-close 算法的实现。当我找到 A-close 算法的实现时，它为我节省了很多时间。有人有这个算法的实现并想分享它或找到这个实现的一些技巧吗？

# python - Gensim 主题打印错误/问题

> ID：15260864
> 
> 赞同：0
> 
> 时间：2013-03-07T00:24:44.577
> 
> 标签：python, topic-modeling, gensim

全部，

[这是对我在此线程](https://stackoverflow.com/questions/15016025/how-to-print-the-lda-topics-models-from-gensim-python)中回复的内容的重新发布。尝试在 gensim 中打印 LSI 主题时，我得到了一些完全错误的结果。这是我的代码：

```
try:
    from gensim import corpora, models
except ImportError as err:
    print err

class LSI:
    def topics(self, corpus):
        tfidf = models.TfidfModel(corpus)
        corpus_tfidf = tfidf[corpus]
        dictionary = corpora.Dictionary(corpus)
        lsi = models.LsiModel(corpus_tfidf, id2word=dictionary, num_topics=5)
        print lsi.show_topics()

if __name__ == '__main__':
    data = '../data/data.txt'
    corpus = corpora.textcorpus.TextCorpus(data)
    LSI().topics(corpus) 
```

这会将以下内容打印到控制台。

```
-0.804*"(5, 1)" + -0.246*"(856, 1)" + -0.227*"(145, 1)" + ...... 
```

我希望能够打印出@2er0[在这里](https://stackoverflow.com/questions/15016025/how-to-print-the-lda-topics-models-from-gensim-python)所做的主题，但我得到了这样的结果。请参见下文并注意打印的第二个项目是一个元组，我不知道它来自哪里。data.txt 是一个包含多个段落的文本文件。就这些。

对此的任何想法都会很棒！亚当

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T02:34:07.433

要回答为什么您的 LSI 主题是元组而不是单词，请检查您的输入语料库。

**它是从通过转换为语料库的文档列表创建的`corpus = [dictionary.doc2bow(text) for text in texts]`吗？**

因为如果不是，并且您只是从序列化语料库中读取它而不阅读字典，那么您将不会在主题输出中获得单词。

下面我的代码工作并打印出带有加权词的主题：

```
import gensim as gs

documents = ["Human machine interface for lab abc computer applications",
             "A survey of user opinion of computer system response time",
             "The EPS user interface management system",
             "System and human system engineering testing of EPS",
             "Relation of user perceived response time to error measurement",
             "The generation of random binary unordered trees",
             "The intersection graph of paths in trees",
             "Graph minors IV Widths of trees and well quasi ordering",
             "Graph minors A survey"]

texts = [[word for word in document.lower().split()] for document in documents]
dictionary = gs.corpora.Dictionary(texts)
corpus = [dictionary.doc2bow(text) for text in texts]

tfidf = gs.models.TfidfModel(corpus)
corpus_tfidf = tfidf[corpus]

lsi = gs.models.LsiModel(corpus_tfidf, id2word=dictionary, num_topics=5)
lsi.print_topics()

for i in lsi.print_topics():
    print i 
```

上述输出：

```
-0.331*"system" + -0.329*"a" + -0.329*"survey" + -0.241*"user" + -0.234*"minors" + -0.217*"opinion" + -0.215*"eps" + -0.212*"graph" + -0.205*"response" + -0.205*"time"
-0.330*"minors" + 0.313*"eps" + 0.301*"system" + -0.288*"graph" + -0.274*"a" + -0.274*"survey" + 0.268*"management" + 0.262*"interface" + 0.208*"human" + 0.189*"engineering"
0.282*"trees" + 0.267*"the" + 0.236*"in" + 0.236*"paths" + 0.236*"intersection" + -0.233*"time" + -0.233*"response" + 0.202*"generation" + 0.202*"unordered" + 0.202*"binary"
-0.247*"generation" + -0.247*"unordered" + -0.247*"random" + -0.247*"binary" + 0.219*"minors" + -0.214*"the" + -0.214*"to" + -0.214*"error" + -0.214*"perceived" + -0.214*"relation"
0.333*"machine" + 0.333*"for" + 0.333*"lab" + 0.333*"abc" + 0.333*"applications" + 0.258*"computer" + -0.214*"system" + -0.194*"eps" + -0.191*"and" + -0.188*"testing" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T13:46:37.920

它看起来很难看，但这可以完成工作（只是一种纯粹的基于字符串的方法）：

```
#x = lsi.show_topics()
x = '-0.804*"(5, 1)" + -0.246*"(856, 1)" + -0.227*"(145, 1)"'
y = [(j.split("*")[0], (j.split("*")[1].split(",")[0].lstrip('"('), j.split("*")[1].split(",")[1].strip().rstrip(')"'))) for j in [i for i in x.strip().split(" + ")]]

for i in y:
  print y 
```

上述输出：

```
('-0.804', ('5', '1'))
('-0.246', ('856', '1'))
('-0.227', ('145', '1')) 
```

如果没有，您可以尝试 lsi.print_topic(i) 而不是 lsi.show_topics()

```
for i in range(len(lsi.show_topics())):
  print lsi.print_topic(i) 
```

# java - Applet java 用 chrome 抛出异常

> ID：15260868
> 
> 赞同：0
> 
> 时间：2013-03-07T00:25:30.520
> 
> 标签：java, google-chrome, exception, japplet, invocationtargetexception

我正在开发一个带有小程序 Java 的 Django 站点。

几天前，小程序开始无法在我的 chrome 浏览器中加载。我还在开发中，我认为这是一个缓存问题，所以为了测试我开始使用 firefox。

今天，小程序开发率为 90%，在 Firefox 上运行流畅。完全没有问题。

所以我在处理一些 JS 并打开了 chrome（比如它的调试器），所以我清理了 chrome 的缓存文件夹和 java 插件缓存，然后打开了站点。

小程序加载失败。这是错误：

```
 java.lang.reflect.InvocationTargetException
     at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
     at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
     at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
     at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
     at sun.applet.PluginAppletSecurityContext$5.run(PluginAppletSecurityContext.java:943)
     at java.security.AccessController.doPrivileged(Native Method)
     at sun.applet.PluginAppletSecurityContext.handleMessage(PluginAppletSecurityContext.java:940)
     at sun.applet.AppletSecurityContextManager.handleMessage(AppletSecurityContextManager.java:70)
     at sun.applet.PluginStreamHandler.handleMessage(PluginStreamHandler.java:235)
     at sun.applet.PluginMessageHandlerWorker.run(PluginMessageHandlerWorker.java:78)
 Caused by: java.lang.NumberFormatException: For input string: "0,000000"
     at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1241)
     at java.lang.Double.valueOf(Double.java:504)
     at java.lang.Double.<init>(Double.java:597)
     ... 10 more
 java.lang.NullPointerException
     at sun.applet.PluginAppletViewer.getMember(PluginAppletViewer.java:1020)
     at netscape.javascript.JSObject.getMember(JSObject.java:155)
     at objects.CommunicationWithJS.parseFloors(CommunicationWithJS.java:75)
     at main.MapGenerator.start(MapGenerator.java:27)
     at sun.applet.AppletPanel.run(AppletPanel.java:476)
     at java.lang.Thread.run(Thread.java:722) 
```

奇怪的是，在 Firefox 上运行没有问题......

加载时，小程序调用页面上的一些 JS 以从站点加载 Json。然后将此 Json 传递给小程序。

小程序和页面之间的通信由**netscape**库管理。

加载 JSON 的 JS：

```
 function getFloors() {
            var xmlHttp = null;

            xmlHttp = new XMLHttpRequest();
            xmlHttp.open( "GET", GET_FLOORS, false );
            xmlHttp.send(null);
            var json = JSON.parse(xmlHttp.responseText);

            return json;
    } 
```

以及小程序上的代码：

```
public Floor[] parseFloors(URL codebase) {

    JSObject jsonFloors = (JSObject) window.eval(GET_FLOORS);

            // counter of the number of objects
    int i=0;
    for (; i < 50; i++) 
        try {
            if (jsonFloors.getSlot(i) == null)
                break;
        } catch (JSException jse) {
            break;
        }

    Floor[] floors = new Floor[i];

    for (int t=0; t < i; t++) {

        JSObject jsonFloor = (JSObject) jsonFloors.getSlot(t);
        try {
            int numero_di_piano = Integer.parseInt(jsonFloor.getMember(NUMERO_DI_PIANO)+"");
            URL link = new URL(codebase, jsonFloor.getMember(LINK).toString());
            float bearing = Float.parseFloat(jsonFloor.getMember(BEARING).toString());
            int id = Integer.parseInt(jsonFloor.getMember(ID).toString());

            Floor floor = new Floor(numero_di_piano, link, bearing, id);
            floors[t] = floor;

        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }   
    }
    return floors;
} 
```

错误*CommunicationWithJS.java:75*在

```
 int numero_di_piano = Integer.parseInt(jsonFloor.getMember(NUMERO_DI_PIANO)+""); 
```

从服务器返回的值 *NUMERO_DI_PIANO* 是一个整数，我不明白这种奇怪的行为。

**编辑：**

*我使用一些println*用 firefox 和 chrome 对 japplet 进行了交叉测试。结果表明，只有当我尝试从 Json 中提取一个**int**值时，才会出现异常。我成功提取了一个双精度和一个字符串。

在 Firefox 上，小程序仍在工作......在 chrome 上，0 变为“0,000000”，4 变为“4,000000”。

**添加**

我解决了强制服务器转换字符串中的整数的问题。但我认为这不是正确的工作方式，而是一种解决方法。所以，如果有人能给出一个有效的答案，我会分配分数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T00:05:06.690

这不是一个完整的答案，而是基于您遇到的错误以及我们在加载[http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=647706](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=647706)中详述的网站时遇到的类似问题我相信这个问题与系统语言环境有关。系统语言环境是否与 en_US 不同？

出于某种我还无法理解的原因，在 Firefox 中运行 Java 时，区域设置不会影响格式化方法，但在 Chrome/Chromium 上会影响，这会导致它生成区域设置格式的浮点数（“0,0”而不是巴西 pt_BR 语言环境中的“0.0”，例如）Java 无法正确解析（可能使用与语言环境无关的转换）。

另请参阅[使用 DecimalFormat 的问题](https://stackoverflow.com/questions/3735630/problems-using-decimalformat)

# oracle11g - Oracle - 使用带字母的Between - 在'A'和'C'之间

> ID：15260869
> 
> 赞同：2
> 
> 时间：2013-03-07T00:25:35.963
> 
> 标签：oracle11g, between, letter

这个疑问是非常基本的，但是，在阅读给定问题的答案后，我感到相当困惑（我不知道为什么，因为它是一个简单的主题）。

考虑这个基本查询：

```
SELECT * FROM emp WHERE ename BETWEEN ‘A’ AND ‘C’ 
```

返回的员工姓名将是姓名以A和B开头的员工，解释如下：

> 在这里，使用 BETWEEN 运算符将字符列与字符串进行比较，这相当于 ename >= 'A' AND ename < **=** 'C'。名称 CLARK 将不包含在此查询中，因为 'CLARK' 是 > 'C'。

*如果在解释中我们有这样的陈述： ename 小于或**等于***'C' ，为什么 Clark 会被认为大于*'C'*？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:32:23.573

因为当你按字母顺序排序时

```
Constant Clark C Claude 
```

你会得到

```
C Clark Claude Constant 
```

所以

```
C < Clark < Claude < Constant 
```

有关更正式的解释，请参见[Wikipedia ，本质是这样的（强调我的）：](http://en.wikipedia.org/wiki/Collation#Alphabetical_order)

> 为了决定两个字符串中的哪一个按字母顺序排在第一位，首先比较它们的第一个字母。第一个字母出现在字母表中较早的字符串按字母顺序排在第一位。如果第一个字母相同，则比较第二个字母，依此类推，直到确定顺序。（**如果一个字符串没有要比较的字母，则认为它在前；例如，“cart”在“carthorse”之前。**）将一组字符串按字母顺序排列的结果是相同的单词在前字母被组合在一起，在这样的组中，前两个字母相同的单词被组合在一起，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-29T19:12:16.407

**如果在解释中我们有这样的陈述： ename 小于或等于 'C' ，为什么 Clark 会被认为大于 'C' ？**

这里需要考虑一件事。出于显而易见的原因，我们有 ALLEN、BLAKE、CLARK、ADAMS、A、C。按字母顺序排序我们有

*亚当斯艾伦布莱克 C* 克拉克

这就是为什么 CLARK 不属于该范围的原因，因为它位于 C 之后。

# iphone - 延迟 iPhone 后执行操作

> ID：15260870
> 
> 赞同：0
> 
> 时间：2013-03-07T00:25:55.290
> 
> 标签：iphone, objective-c, xcode, cocoa

我有个问题。我想要做的是点击按钮几次，然后更新标签一次，但延迟 2 秒后，所以如果你快速点击，没有任何变化，但是当你停止时，标签会更新。

执行选择器方法仅创建队列，因此每次按下按钮时都会更新。

```
-(IBAction)clickButton {
    i++;
    [self updateLabel if clicking stop 3 seconds ago];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T00:31:28.107

```
[NSObject cancelPreviousPerformRequestsWithTarget:self];
// then
[self performSelector ...]; 
```

# xml - 如何在 xml 文件中搜索文本并使用 qml 进行更改？

> ID：15260871
> 
> 赞同：2
> 
> 时间：2013-03-07T00:25:56.260
> 
> 标签：xml, qml

我正在尝试为使用 QML 的 Ubuntu touch 编写应用程序。我现在要做的是搜索一个 xml 文件并更改文本。

这是我的 XML 文件：

```
<phonelist>
  <phone>
    <name>drewphone</name>
    <lost>no</lost>
  </phone>
  <phone>
    <name>sarahpone</name>
    <lost>yes</lost>
  </phone>
</phonelist> 
```

我想搜索 sarahphone 或 drawphone 然后将 lost 更改为 yes 或 no。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T16:53:33.250

由于 QML 没有文件 I/OI 很好奇您实际上是如何读取该文件的。

假设您从 XMLHttpRequest 获取此 XML，听起来您想在 javascript 中执行此操作。由于 javascript 在设计时并未考虑到数据操作任务，因此您可以访问的唯一可以帮助您的库是字符串操作库。如果您真的不想编写 C++（您可以访问实际的 XML 解析器库），并且您的 xml 保持非常简单，您可以使用正则表达式来查找和替换适当的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:38:48.503

您可以使用 XSLT 将 XML 转换为 QML。

参考：[http ://www.w3schools.com/xsl/](http://www.w3schools.com/xsl/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-11T14:18:37.617

QML`XmlListModel`用于从 XML 数据创建**只读模型。**它可以用作**视图元素（如ListView、PathView、GridView）和其他**与模型数据交互的元素（如Repeater）的数据源[参考：[XmlListModel](http://doc.qt.io/qt-5/qml-qtquick-xmllistmodel-xmllistmodel.html#details) ]。

最好的方法（即：操作 XML）是在 C++ 中创建一个**辅助类**（Qt 的 C++ 端有很好的 XML 库[Qt XML C++ 类](http://doc.qt.io/qt-5/qtxml-module.html)）来完成这项工作，然后在 qml 中通过使用`QQmlContext::setContextProperty(const QString &name, QObject *value)`. 有关简单且说明性的示例，请阅读本段“**将对象设置为上下文属性**”：[Embedding C++ Objects into QML with Context Properties](http://doc.qt.io/qt-5/qtqml-cppintegration-contextproperties.html)。

# c# - 组织大型 c# 解决方案

> ID：15260872
> 
> 赞同：9
> 
> 时间：2013-03-07T00:25:56.663
> 
> 标签：c#, .net

我有一个每天在 TFS 中构建的大型解决方案。该解决方案涵盖多个逻辑子解决方案 - 例如由项目 A、B、C、D 组成的 ApplicationA；ApplicationB 由项目 A、B、E、F 组成，ApplicationC 由项目 A、C、G、H 组成。

目前，我们在本地制作构建解决方案文件的副本并卸载我们不需要构建的项目来处理项目 - 因此对于 ApplicationA，我们将卸载除 A、B、C、D 之外的所有内容。

另一种方法是创建多个解决方案配置，这些配置只会为 ApplicationA 构建项目 A、B、C、D - 但我担心这会很麻烦，并且 .sln 文件最终会很大。

问题是许多项目被放在一个 wix 包中并一起安装 - 所以主 .sln 文件是有意义的，特别是从构建的角度来看，但也包括调试。

维护多个解决方案文件似乎并不正确，因为当添加新项目时，我们需要将它们添加到多个解决方案中。所以也许配置方法是要走的路，但感觉也不对。

有没有人有过类似情况的经历，你是如何解决的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T00:29:48.270

听起来有五个解决方案文件是有意义的：

*   Master.sln，包含所有项目
*   ApplicationA.sln，包含项目 A、B、C、D
*   ApplicationB.sln，包含项目 A、B、E、F
*   ApplicaitonC.sln，包含项目 A、C、G、H

可以将所有这些解决方案文件放在同一个顶级目录中。

> 但是维护多个解决方案文件是不可行的，因为当添加新项目时，我们需要将它们添加到多个解决方案中。

为什么这是个问题？您需要确定项目需要哪些应用程序......在主解决方案中创建项目（肯定需要它），然后对需要它的解决方案使用“添加现有项目”。这*真的*没有那么多工作——而且我也不希望经常添加新项目。（如果是，则表明存在更大的问题。）

# c - C - 使用 select 侦听多个端口的简单 ipv6 udp 服务器。从一个端口接收消息，而不是另一个

> ID：15260879
> 
> 赞同：3
> 
> 时间：2013-03-07T00:26:33.593
> 
> 标签：c, sockets, udp, client-server, ipv6

这是我的代码。

```
#include <sys/socket.h>
#include <netinet/in.h>
#include <sys/select.h>
#include <stdio.h>
#include <string.h>

int max(int socket_handle[]);

int main( void )
{
   int       max_clients_allowed = 2;
   int       socket_handle[max_clients_allowed];
   int       client_handle[max_clients_allowed];
   struct    sockaddr_in6 server_address[max_clients_allowed];
   struct    sockaddr_in6 client_address[max_clients_allowed];
   char      buffer[1000];
   socklen_t client_length;
   fd_set    read_handles;
   struct    timeval timeout_interval;
   int       bytes_received;
   int       port_number = 9000;
   int       retval;
   int       i;

   printf("Hello, human.\n");

   for (i = 0; i < max_clients_allowed; i++)
   {
       printf("Creating socket%d on port: %d\n", i, port_number + i);
       socket_handle[i] = socket(PF_INET6,SOCK_DGRAM,0);
       memset( &server_address[i], 0, sizeof( server_address[i] ) );
       server_address[i].sin6_family = AF_INET6;
       server_address[i].sin6_addr=in6addr_any;
       server_address[i].sin6_port=htons( port_number + i );

       if(bind( socket_handle[i], (struct sockaddr *)&server_address[i], sizeof( server_address[i] )) < 0)
       {
           perror("Unable to bind.");
           return -1;
       }
       else
       {
           printf("Bind %d successful.\n", i);
       }

   }

   while (1) {

       FD_ZERO(&read_handles);
       FD_SET(socket_handle[0], &read_handles);
       FD_SET(socket_handle[1], &read_handles);
       timeout_interval.tv_sec = 2;
       timeout_interval.tv_usec = 500000;
       retval = select(max(socket_handle) + 1, &read_handles, NULL, NULL, &timeout_interval);
       if (retval == -1)
       {
           printf("Select error\n");
           //error
       }
       else if ((retval = 0))
       {
           printf("timeout\n");
       }
       else
       {
           //good
           client_length = sizeof(struct sockaddr*);
           for (i = 0; i < max_clients_allowed; i++)
           {
              if (FD_ISSET(socket_handle[i], &read_handles))
              {
                  if((bytes_received = recvfrom(socket_handle[i],buffer,sizeof(buffer),0,(struct sockaddr *)&client_address[i], (socklen_t*)&client_length)) < 0)
                  {
                     perror("Error in recvfrom.");
                     break;
                  }
                  printf("\nData received:");
                  printf("\n--------------\n");
                  printf("%s", buffer);
            }
           }
       }
   }
}

int max(int socket_handle[])
{
    if (socket_handle[0] > socket_handle[1])
    {
        return socket_handle[0];
    }
        return socket_handle[1];
} 
```

此代码应该绑定到端口 9000 和 9001。它们使用 select 查看哪些套接字有传入数据，然后打印消息。

我假设它与我的 recvfrom 函数有关。我已经尝试过使用参数但无济于事。

另一个问题可能是当我设置套接字时，我使用的是 sin6.addr = in6addr_any。我很确定 PF_INET6 和 AF_INET6 是正确的，但这也可能是一个问题。我一直在玩这个，但我找不到错误。如果有人能指出我的错误以便我修复它，我将不胜感激。我知道我即将完成这件事。

这是一道作业题，老师给了我们测试程序，它所做的只是在端口 9000 上发送一条消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:36:01.737

调用 时`recvfrom()`，您`client_length`在输入时将 设置为错误的值。它需要设置为`sizeof(client_address[I])`。您还需要在`client_length`每次调用时重置`recvfrom()`。

当您打印 received`buffer`时，您需要`bytes_received`考虑，因为缓冲区不会以空值结尾（除非客户端正在发送以空值结尾的数据）。

试试这个：

```
#include <sys/socket.h>
#include <netinet/in.h>
#include <sys/select.h>
#include <stdio.h>
#include <string.h>

int main( void )
{
    int       max_servers = 2;
    int       server_handle[max_servers];
    int       max_server_handle = 0;
    struct    sockaddr_in6 server_address[max_servers];
    struct    sockaddr_in6 client_address[max_servers];
    char      buffer[1000];
    socklen_t client_length;
    fd_set    read_handles;
    struct    timeval timeout_interval;
    int       bytes_received;
    int       port_number = 9000;
    int       retval;
    int       i;

    printf("Hello, human.\n");

    for (i = 0; i < max_servers; i++)
    {
        printf("Creating socket %d on port: %d\n", i, port_number + i);

        server_handle[i] = socket(PF_INET6, SOCK_DGRAM, 0);
        if (server_handle[i] < 0)
        {
            perror("Unable to create socket.");
            return -1;
        }

        if (server_handle[i] > max_server_handle)
            max_server_handle = server_handle[i];

        memset( &server_address[i], 0, sizeof( server_address[i] ) );
        server_address[i].sin6_family = AF_INET6;
        server_address[i].sin6_addr = in6addr_any;
        server_address[i].sin6_port = htons( port_number + i );

        if (bind( server_handle[i], (struct sockaddr *)&server_address[i], sizeof( server_address[i] )) < 0)
        {
            perror("Unable to bind.");
            return -1;
        }

        printf("Bind %d successful.\n", i);
    }

    while (1)
    {
        FD_ZERO(&read_handles);
        for (i = 0; i < max_servers; i++)
            FD_SET(server_handle[i], &read_handles);

        timeout_interval.tv_sec = 2;
        timeout_interval.tv_usec = 500000;

        retval = select(max_server_handle + 1, &read_handles, NULL, NULL, &timeout_interval);
        if (retval == -1)
        {
            printf("Select error\n");
            //error
        }
        else if (retval == 0)
        {
            printf("timeout\n");
        }
        else
        {
            //good
            for (i = 0; i < max_servers; i++)
            {
                if (FD_ISSET(server_handle[i], &read_handles))
                {
                    client_length = sizeof(client_address[i]);

                    if ((bytes_received = recvfrom(server_handle[i], buffer, sizeof(buffer), 0, (struct sockaddr *)&client_address[i], &client_length)) < 0)
                    {
                        perror("Error in recvfrom.");
                        break;
                    }

                    printf("\nData received on socket %d:", i);
                    printf("\n--------------\n");
                    printf("%.*s", bytes_received, buffer);
                }
            }
        }
    }
} 
```

# django-forms - Django Admin - 使用中间形式添加

> ID：15260883
> 
> 赞同：1
> 
> 时间：2013-03-07T00:27:21.563
> 
> 标签：django-forms, django-admin, django-views, url-routing

我发布[了一个](https://stackoverflow.com/questions/15153599/django-refresh-modelform-in-admin-with-instance-derived-data)没有任何结果的问题。我担心这可能是我摆姿势的方式...

在管理员中，我希望添加按钮将用户引导到与普通表单不同的视图（该视图仅包含搜索字段和按钮）。在“搜索”表单被验证后，它会将用户发送到带有一些实例数据的标准添加/更改表单。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:26:29.850

所以，我得到了 Tumbleweeds 铜星，因为对这个问题没有回应。我最终部分解决了它，如下所示......

向我的模型管理员添加了一个 get_urls 方法

```
def get_urls(self):
    urls = super(MyModelAdmin, self).get_urls()
    addl = patterns(',
        (r'^add/$', 'MyApp.views.my_add_view)
    )

return addl + urls 
```

为“添加”视图创建了一个表单

```
from django import forms
from MyApp.models import MyModel

class LookupForm(forms.Form):
    pk = ''
    url = forms.URLField(max_length=_URLMAXLEN, label='Video URL', 
                widget=forms.TextInput(attrs={'size':'60', 'autofocus':'autofocus'}))

    def clean_url(self):
        value = self.cleaned_data['url']

        #    some validation of 'value' here
        #    ...

        self.pk = somefoo(value)
        return value 
```

在视图中，我在验证并保存模型实例后重定向到更改表单

```
from django.shortcuts import render
from django.core.urlresolvers import reverse
from django.http import HttpResponseRedirect
from MyApp.forms import LookupForm

def my_add_view(request):
    confirm = ''
    if request.method == 'POST':
        form = LookupForm(request.POST)

        if form.is_valid():
            if 'confirm_button' in request.POST:
                foo_save()  #   save model instance

                #   LookupForm's 'pk' property set during some clean_ method
                href = reverse('admin:MyApp_MyModel_change', args=(form.pk,))
                return HttpResponseRedirect(href)

            elif 'search_button' in request.POST:
                confirm = foo_context() #   some context from the search results

    else:
        form = LookupForm()

    return render(request, 'my_template.html', {'form': form, 'confirm': confirm}) 
```

不幸的是，我无法实现使用实例数据显示更改表单的目标。不必保存并重定向到change_form，我宁愿能够直接使用`MyModelForm(instance=some_instance)`

# ios - 将 StoryBoard 添加到现有的 UINavigation with Tab bar 项目

> ID：15260885
> 
> 赞同：0
> 
> 时间：2013-03-07T00:27:26.320
> 
> 标签：ios, xcode

我有一个带有标签栏的 UI 导航项目，每个标签栏都包含 XIB 和 ViewController，该项目通过此方法从 App 委托加载每个 ViewController：

```
MyFourthView *fourthViewController;
 fourthViewController = [[MyFourthView alloc] initWithTabBar];
localNavigationController = [[UINavigationController alloc]
                             initWithRootViewController:fourthViewController];
[localControllersArray addObject:localNavigationController]; 
```

现在我正在尝试将情节提要添加到我的项目中，并以编程方式从应用程序委托加载它以成为第五个选项卡栏视图，但我不知道该怎么做？因为storyBoard中没有XiB所以上面的方法行不通？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T02:04:09.267

如果您要添加到标签栏的第五个导航控制器是故事板中的根/初始视图控制器，您可以像这样实例化它：

```
UINavigationController *fifthNavigationController = [[UIStoryboard storyboardWithName:@"yourstoryboardname" bundle:nil] instantiateInitialViewController]; 
```

如果不是，给它一个故事板ID并像这样实例化它：

```
UINavigationController *fifthNavigationController = [[UIStoryboard storyboardWithName:@"yourstoryboardname" bundle:nil] instantiateViewControllerWithIdentifier:@"storyboardIdOfYourNavController"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:47:21.187

Apple 文档在此处切换为使用 Storyboard：http: [//developer.apple.com/library/ios/#releasenotes/Miscellaneous/RN-AdoptingStoryboards/index.html](http://developer.apple.com/library/ios/#releasenotes/Miscellaneous/RN-AdoptingStoryboards/index.html)

# jquery - jQuery 效果：当模态框打开和关闭时

> ID：15260887
> 
> 赞同：0
> 
> 时间：2013-03-07T00:27:29.400
> 
> 标签：jquery

我终于解决了我在使用 AJAX 和 jQuery 模式框时遇到的问题。

现在我只想添加典型效果......但我不知道代码。

**效果一：**当模态框打开时，我想让“背景”淡出

**效果二：**当你点击X关闭盒子时，我希望它慢慢褪色

看：

```
<script src="js/simplemodal.js" type="text/javascript"></script>
<script type="text/javascript">
    $(function() {
        $('#message-sent').hide();
        $('#contact-form').submit(function() {
            $.ajax({
                type: "POST",
                url: $(this).attr('action'),
                data: $(this).serialize(),
                success: function() {
                    $("#message-sent").modal({
                        onOpen: function(dialog) {
                            dialog.overlay.fadeIn('slow', function () {
                                dialog.container.fadeIn('slow', function () {
                                    dialog.data.fadeIn('slow');
                                });
                            });
                        },
                        onClose: function (dialog) {
                            dialog.data.fadeOut('slow', function () {
                                dialog.container.fadeOut('slow', function () {
                                    dialog.overlay.fadeOut('slow', function () {
                                        $.modal.close();
                                    });
                                });
                            });
                        },
                        closeClass: 'close-btn'
                    });
                }
            });
            $('#contact-form')[0].reset();
            return false;
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:42:26.560

您正在查看的是使用 SimpleModal 中内置的选项来实现您所需要的。

这部分代码：

```
success: function() {
    $("#message-sent").fadeIn().modal({
         closeClass: 'close-btn'
    });
} 
```

应该修改为使用 SimpleModal 提供的内置结构来启动模态框。这`dialog.overlay.fadeIn()`是您正在寻找使背景褪色的内容：

```
success: function() {
    $("#message-sent").modal({
        onOpen: function(dialog) {
            dialog.overlay.fadeIn('slow', function () {
                dialog.container.fadeIn('slow', function () {
                    dialog.data.fadeIn('slow');
                });
            });
        }
    });
} 
```

至于关闭模态框，您可以调用以关闭模态框，或者为您希望允许模态框在单击时关闭的任何元素`$.modal.close();`分配一个类。`simplemodal-close`SimpleModal 将自动将关闭操作绑定到它们。

您还可以使用以下命令在结束时添加动画：

```
onClose: function (dialog) {
    dialog.data.fadeOut('slow', function () {
        dialog.container.fadeOut('slow', function () {
            dialog.overlay.fadeOut('slow', function () {
                $.modal.close();
            });
        });
    });
} 
```

# python - Python 标准输入文件名

> ID：15260888
> 
> 赞同：8
> 
> 时间：2013-03-07T00:27:30.470
> 
> 标签：python, filenames, stdin

我正在尝试获取命令行中给出的文件名。例如：

> python3 ritwc.py < DarkAndStormyNight.txt

我正在尝试获取 DarkAndStormyNight.txt

当我尝试 fileinput.filename() 时，我得到了与 sys.stdin 相同的结果。这可能吗？我不是在寻找返回当前脚本名称的 sys.argv[0] 。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T04:29:52.250

*通常*，不可能以与平台无关的方式获取文件名。其他答案涵盖了明智的选择，例如在命令行上传递名称。

在 Linux 和一些相关系统上，您可以通过以下技巧获取文件名：

```
import os
print(os.readlink('/proc/self/fd/0')) 
```

`/proc`/ 是 Linux 上的一个特殊文件系统，它提供有关机器上进程的信息。`self`表示当前正在运行的进程（打开文件的进程）。`fd`是一个目录，其中包含进程中每个打开文件描述符的符号链接。0 是 的文件描述符编号`stdin`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T04:26:03.247

您可以使用`ArgumentParser`，它会自动为您提供带有命令行参数的界面，甚至提供帮助等

```
from argparse import ArgumentParser
parser = ArgumentParser()                                                                 
parser.add_argument('fname', metavar='FILE', help='file to process')
args = parser.parse_args()

with open(args.fname) as f:
    #do stuff with f 
```

现在你打电话`python2 ritwc.py DarkAndStormyNight.txt`。如果你`python3 ritwc.py`不带参数调用，它会给出一个错误，说它是预期的参数`FILE`。您现在也可以拨打电话`python3 ritwc.py -h`，它会说明 a`file to process`是必需的。

PS这里是如何使用它的一个很好的介绍：http: [//docs.python.org/3.3/howto/argparse.html](http://docs.python.org/3.3/howto/argparse.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T01:06:09.120

事实上，当从控制台重定向标准输入时，python 无法看到该文件名，因此您有一个替代方案：

像这样调用你的程序：

```
python3 ritwc.py -i your_file.txt 
```

然后添加以下代码以从 python 内部重定向标准输入，以便您可以通过变量“filename_in”访问文件名：

```
import sys 

flag=0
for arg in sys.argv:
    if flag:
        filename_in = arg
        break
    if arg=="-i":
        flag=1
sys.stdin = open(filename_in, 'r')

#the rest of your code... 
```

如果现在使用命令：

```
print(sys.stdin.name) 
```

你得到你的文件名；但是，当您在从控制台重定向标准输入后执行相同的打印命令时，您会得到结果：`<stdin>`，这将证明 python 无法以这种方式看到文件名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T00:46:25.860

我不认为这是可能的。就您的 python 脚本而言，它正在写入标准输出。您正在捕获写入 stdout 的内容并将其写入 shell 中的文件这一事实与 python 脚本无关。

# salesforce - 网站页面中的聊天帖子？

> ID：15260889
> 
> 赞同：0
> 
> 时间：2013-03-07T00:27:36.460
> 
> 标签：salesforce, apex-code, visualforce

可以在站点页面中访问 Chatter 帖子吗？既要阅读聊天帖子，又要从使用访客站点用户登录帐户的站点页面添加评论？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T16:59:19.213

如果您制作了一个[没有共享](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_keywords_sharing.htm)的 Apex 控制器，那么可以，您可以在站点页面上公开 Chatter 帖子（尽管您可能必须重新创建用户体验，但我不确定默认的 Visualforce 组件是否会以这种方式工作）。

不过，添加评论是另一回事——我怀疑你能否成功让来宾用户添加评论（尽管这纯粹是猜想——我自己还没有真正尝试过，所以谁知道，它可能会起作用）。在这种情况下，您可能必须编写控制器，以便将任何评论添加为系统中的某个现有常规用户。

此外，值得注意的是[Chatter Answers](http://na3.salesforce.com/help/doc/en/questions_portal_overview.htm)的存在，这是一种在站点上公开有限聊天源的方法。如果这映射到您正在尝试做的事情，那么它可能会为您节省一些时间。

# c - 视觉工作室快递抱怨缺少';' 输入c程序后

> ID：15260890
> 
> 赞同：2
> 
> 时间：2013-03-07T00:27:46.283
> 
> 标签：c

我的代码有什么问题？

```
#include<stdio.h>
#include<string.h>

int main() {
    FILE *file;

    char string[32] = "Teste de solução";

    file = fopen("C:\file.txt", "w");

    printf("Digite um texto para gravar no arquivo: ");
    for(int i = 0; i < 32; i++) {
        putc(string[i], file);
    }

    fclose(file);

    return 0;
} 
```

**错误：**

```
c:\users\guilherme\documents\visual studio 2010\projects\helloworld\helloworld\hello.c(13): error C2143: syntax error : missing ';' before 'type'
1>c:\users\guilherme\documents\visual studio 2010\projects\helloworld\helloworld\hello.c(13): error C2143: syntax error : missing ';' before 'type'
1>c:\users\guilherme\documents\visual studio 2010\projects\helloworld\helloworld\hello.c(13): error C2143: syntax error : missing ')' before 'type'
1>c:\users\guilherme\documents\visual studio 2010\projects\helloworld\helloworld\hello.c(13): error C2143: syntax error : missing ';' before 'type'
1>c:\users\guilherme\documents\visual studio 2010\projects\helloworld\helloworld\hello.c(13): error C2065: 'i' : undeclared identifier
1>c:\users\guilherme\documents\visual studio 2010\projects\helloworld\helloworld\hello.c(13): warning C4552: '<' : operator has no effect; expected operator with side-effect
1>c:\users\guilherme\documents\visual studio 2010\projects\helloworld\helloworld\hello.c(13): error C2065: 'i' : undeclared identifier
1>c:\users\guilherme\documents\visual studio 2010\projects\helloworld\helloworld\hello.c(13): error C2059: syntax error : ')'
1>c:\users\guilherme\documents\visual studio 2010\projects\helloworld\helloworld\hello.c(13): error C2143: syntax error : missing ';' before '{'
1>c:\users\guilherme\documents\visual studio 2010\projects\helloworld\helloworld\hello.c(14): error C2065: 'i' : undeclared identifier
========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T00:29:57.507

显然，您将其编译为 C，而不是 C++。VS 不支持 C99，在这种情况下你可能不会这样做：

```
for (int i = 0; i < 32; i++) 
```

你需要这样做：

```
int i;

...

for(i = 0; i < 32; i++) 
```

的声明`i`必须在函数中的所有语句之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T00:43:35.880

我认为 Oli Charlesworth 已经为您提供了所需的答案。

这里有一些提示：

*   如果在字符串中使用反斜杠，则必须放置两个反斜杠。

*   您应该检查 的结果`fopen()`，如果是，`NULL`您应该停止并出现错误。

*   你不应该为你的字符串指定数组的大小；让编译器计算要分配多少个字符。

*   在`for`循环中，你不应该硬编码字符串的大小；使用`sizeof()`并让编译器检查长度，否则循环直到看到终止的 nul 字节。我建议后者。

改写版：

```
#include<stdio.h>
#include<string.h>

int main() {
    FILE *file;
    int i;

    char string[] = "Teste de solução";

    file = fopen("C:\\tmp\\file.txt", "w");
    if (!file) {
        printf("error!\n");
    }

    printf("Digite um texto para gravar no arquivo: ");
    for(i = 0; string[i] != '\0'; i++) {
        putc(string[i], file);
    }

    fclose(file);

    return 0;
} 
```

# c++ - vim clang complete 看不到 opengl 的一些功能

> ID：15260891
> 
> 赞同：2
> 
> 时间：2013-03-07T00:27:51.420
> 
> 标签：c++, vim, autocomplete, clang

我已经安装了`vim`，`clang_complete`但由于某种原因，当我尝试自动完成时，它看不到 OpenGL 的某些功能，例如`glBindBuffer`或`glEnableVertexAttribArray`. 我按`CTRL`+`X`和`CTRL`+`U`强制自动完成，它会显示函数名称和参数，但它只是缺少一些函数。

即使有`glfw`，我尝试自动完成`GLFW_KEY_ESC`但它不存在，我不知道为什么，它只是说`User defined completion (^U^N^P) Pattern not found`

有没有人可以解决这个问题？这很烦人，因为我经常使用这些功能并且需要自动完成。

谢谢。

编辑：我的包含头文件也是这样的：

```
#include <iostream>
#include <string>
#include <GL/glew.h>
#include <GL/glfw.h>
#include <glm/glm.hpp> 
```

顺便说一句，我在`Arch Linux x64`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:56:35.510

好吧，我找到了答案。由于 clang_complete 无法完成 GLEW 创建的参数（因为函数定义为 #define FOO somefunction，而不是定义为：#define FOO(arg1, arg2, arg3) someFunction(arg1, arg2, arg3)）

要解决此问题，您必须将此选项添加到您的 ~/.vimrc 文件中。

```
let g:clang_complete_macros = 1 
```

现在，您将获得函数完成，但仍然没有参数完成。因此，您必须（遗憾地）将 GLEW 替换为

```
#define GL_GLEXT_PROTOTYPES
#include <GL/gl.h>
#include <GL/glext.h> 
```

这将最终完成争论，但是，如果有其他方法可以解决这个问题，我想听听。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T04:37:30.250

扩展 zero57 的答案。

您可以添加一个 clang_complete 特定的编译标志来为 clang_complete 定义一个宏

```
let g:clang_user_options = ' -DCLANG_COMPLETE_ONLY' 
```

然后在你的代码中你可以使用

```
#ifdef CLANG_COMPLETE_ONLY
    #define GL_GLEXT_PROTOTYPES
    #include <GL/gl.h>
    #include <GL/glext.h>
#else
    #include <GL/glew.h>
#endif 
```

这不是一个完美的解决方案，但 clang_complete 现在应该完成您的参数，并且在编译时您将使用 glew。这适用于 YouCompleteMe (YCM) 插件，所以我认为它适用于 clang_complete。

# java - Java 字符串作为路径的一部分

> ID：15260893
> 
> 赞同：-2
> 
> 时间：2013-03-07T00:27:58.830
> 
> 标签：java, string, methods, path

我想要一个目录路径是 A/%Name%/B，其中 %Name% 是我之前声明的字符串，是否有像 C# 中的 Path.Combine？或者我能用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:32:06.243

如果我理解正确，您正在尝试格式化字符串。

您可以使用

```
String directoryName = "test";
String path = "A/%s/B";

String.format(path,directory); 
```

或根据您的要求如下所示

```
File f = new File(String.format(path,directory)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:32:07.020

使用[`File`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)构造函数：

```
File combined = new File(new File("A", name), "B"); 
```

如果你愿意，你甚至可以编写一个方便的方法来做到这一点：

```
public static File combine(String base, String... sections)
{
    File file = new File(base);
    for (String section : sections) {
        file = new File(file, section);
    }
    return file;
} 
```

然后您可以将其称为：

```
File x = combine("A", name, "B"); 
```

请注意，使用这样的`File`构造函数通常被认为比*假设*目录分隔符更可取`/`，即使实际上它适用于我所知道的所有平台。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T00:33:04.230

您可以使用：

```
String yourString = ...;
File theFile = new File("A/" + yourString + "/B"); 
```

# grails - Groovy、STS 和调试信息、信息或符号

> ID：15260895
> 
> 赞同：0
> 
> 时间：2013-03-07T00:28:01.767
> 
> 标签：grails, groovy, spring-security, debug-symbols, debug-information

我试图在我的 Groovy 代码中包含调试信息或符号，以便我可以使用带有 SpEL 的 Spring Security 注释按名称访问带注释的方法的参数。例如：

```
@PreAuthorize("hasPermission(#id, 'View')")
public void doSomething(Integer id)
{
   ....
} 
```

当我使用使用 Groovy RunTest 脚本的 STS 'run-test' 命令时，一切正常。我的意思是我可以按名称访问方法的参数。但是，每当我尝试使用“run-app”命令时，调试信息都不包括在内。

我查看了 RunTest 脚本，该脚本显式调用了 Java 编译器，并将调试选项设置为 true。

如何为我的开发和生产环境启用调试信息？我是否需要修改 Groovy 脚本以在 Groovy 代码上调用 Java 编译器，或者有没有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:39:17.957

从来没有找到一个优雅的解决方案。相反，我只是使用过滤器，因为传递给我的方法的参数是由 Grails 从 URL 中提取的。

# python - 在 django 中服务媒体

> ID：15260904
> 
> 赞同：2
> 
> 时间：2013-03-07T00:29:17.887
> 
> 标签：python, django, django-templates

我正在使用 django 服务媒体，我遇到了一个使用这行代码的项目

```
href="{{STATIC_URL}}/custom/js/list.js" 
```

在设置中，STATIC_URL= /xexo/static/。这意味着网址将变为

```
127.0.0.1:8000/xexo/static//custom/js/list.js 
```

注意 //。令人惊讶的是，即使我这样做

```
127.0.0.1:8000/xexo/static///////custom/js/list.js 
or 
127.0.0.1:8000/xexo/static/////custom/////js/list.js 
```

在我的浏览器中，list.js 仍然会加载。我的问题是，这怎么可能？

编辑

这是我找到的另一个链接

[链接 1](http://powerful-earth-4121.herokuapp.com/AuShadha/static/////plugins/dojo-1.8.0/dijit/themes/claro/claro.css)

[链接 2](http://powerful-earth-4121.herokuapp.com/AuShadha/static/////plugins/////dojo-1.8.0////////dijit/themes/claro/claro.css)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:51:17.940

这个问题的网址是：

`http://stackoverflow.com/questions/15260904/serving-media-in-django`

我可以添加一些斜线，它工作正常......

`http://stackoverflow.com/questions/15260904///////serving-media-in-django`

我的观点是这*与*在 django 中提供媒体无关，这似乎是典型的浏览器行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T10:38:17.520

尽管在浏览器中出现多个斜杠似乎不会导致任何问题，但最好避免它并将该行更改为：

```
href="{{STATIC_URL}}custom/js/list.js" 
```

所以避免了双斜线。

# php - 如何对从 API 调用返回的 simplexml 进行排序

> ID：15260905
> 
> 赞同：0
> 
> 时间：2013-03-07T00:29:29.560
> 
> 标签：php, sorting, simplexml

我需要对这个多维数组进行排序，我在这个网站上或通过我的朋友 Google 找到的任何东西都没有让我找到正确的解决方案。

```
$url = file_get_contents('http://api.petfinder.com/shelter.getPets?key=&id=&status=A&output=full&count=999');
$xml = simplexml_load_string($url); 
// this is the returned array (see below for example)

foreach($xml->pets->pet as $pet) { 
// ->pet, or $pet is what needs to be sorted
    $data['id'] = (string)$pet->id;
} 
```

以下是上述 API 调用返回的数组示例...

```
SimpleXMLElement Object
(
[header] => SimpleXMLElement Object
    (
        [status] => SimpleXMLElement Object
            (
                [code] => 100
            )
    )
[lastOffset] => 82
[pets] => SimpleXMLElement Object
    (
        [pet] => Array
            (
                [0] => SimpleXMLElement Object
                    (
                        [id] => 10595710
                        [name] => Lizzie
                        [animal] => Dog
                        [options] => SimpleXMLElement Object
                            (
                                [option] => Array
                                    (
                                        [0] => altered
                                        [1] => hasShots
                                        [2] => housebroken
                                    )
                            )
                        [lastUpdate] => 2012-10-11T15:19:05Z
                        [media] => SimpleXMLElement Object
                            (
                                [photos] => SimpleXMLElement Object
                                    (
                                        [photo] => Array
                                            (
                                                [0] => http://photos.petfinder.com/photos/US/NC/NC416/10595710/NC416.10595710-1-x.jpg
                                                [1] => http://photos.petfinder.com/photos/US/NC/NC416/10595710/NC416.10595710-1-fpm.jpg
                                            )
                                    )
                            )
                        [contact] => SimpleXMLElement Object
                            (
                                [email] => jghfjhgf
                            )
                    )
                [1] => SimpleXMLElement Object
                    (
                        [id] => 11036032
                        [name] => Buddy
                        [animal] => Dog
                        [breeds] => SimpleXMLElement Object
                            (
                                [breed] => Array
                                    (
                                        [0] => Terrier
                                        [1] => Black Labrador Retriever
                                    )

                            )
                        [options] => SimpleXMLElement Object
                            (
                                [option] => Array
                                    (
                                        [0] => altered
                                        [1] => hasShots
                                        [2] => housebroken
                                    )
                            )
                        [lastUpdate] => 2012-10-11T15:19:05Z
                        [media] => SimpleXMLElement Object
                            (
                                [photos] => SimpleXMLElement Object
                                    (
                                        [photo] => Array
                                            (
                                                [0] => http://photos.petfinder.com/photos/US/NC/NC416/11036032/NC416.11036032-1-x.jpg
                                                [1] => http://photos.petfinder.com/photos/US/NC/NC416/11036032/NC416.11036032-1-fpm.jpg
                                            )
                                    )
                            )
                        [contact] => SimpleXMLElement Object
                            (
                                [email] => kfkhgkhjg
                            )
                    )
                [2] => SimpleXMLElement Object ... 
```

我需要能够按宠物名称或“lastUpdate”条目的字母顺序排序。这些将是单独的排序方法。

# jquery - jQuery动态滑块

> ID：15260907
> 
> 赞同：1
> 
> 时间：2013-03-07T00:29:37.600
> 
> 标签：jquery, jquery-slider

知道为什么这不起作用吗？我正在尝试做的是动态添加一些 div 标签，然后使用滑块应用它们。

```
 $(function () {

        var testarea =  $('<div id="testarea" />');

        for (var i = 0; i < 3; i++) {
            $('<div class="testslider"></div>').appendTo(testarea);
        }

        $('#somearea').html(testarea.html());

        $(".testslider").slider({
            value: 100,
            min: 0,
            max: 500,
            step: 100,
            slide: function (event, ui) {
            }
        });
   }); 
```

html:

```
<div id="somearea"></div> 
```

如果我只是像这样正常添加 div 标签，那么就可以了，所以我不太确定如何动态应用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:33:58.500

反正也可以一口气做完

```
$(function () {
    for (var i = 0; i < 3; i++) {
        $('<div class="testslider"/>').slider({
            value: 100,
            min: 0,
            max: 500,
            step: 100,
            slide: function (event, ui) {
            }
        }).appendTo('#testarea');
    }
}); 
```

# css - 从不同的元素触发 css 过渡

> ID：15260910
> 
> 赞同：1
> 
> 时间：2013-03-07T00:29:52.697
> 
> 标签：css, css-transitions

我有一个`div`里面有 2 个图像。两个图像都包含在一个`a`标签中。

第一个图像是一个实体图像，它有一个相对位置。第二个图像是一个透明的 PNG，它位于实体图像的顶部，具有绝对定位。两个图像的大小相同，并且两个图像的不透明度都降低了。

基本上我希望能够在悬停时将两个图像都转换为完全不透明，但是透明的 PNG 完全覆盖了实体图像。仅使用`:hover`会触发顶部图像的过渡，因为从技术上讲，我没有将鼠标悬停在下面的实心图像上。

有什么办法可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:35:54.840

改用父元素的`:hover`伪类：`a`

```
div a:hover img {opacity:1;} 
```

这将同时将过渡应用于两个子`img`元素。

# javascript - 在 jQuery 集合上使用 Zepto 方法

> ID：15260915
> 
> 赞同：0
> 
> 时间：2013-03-07T00:30:26.353
> 
> 标签：javascript, jquery, zepto

我同时使用 jQuery 和 Zepto。我想有条件地在 jQuery 集合上调用 Zepto 方法。任何人都有一个雄辩的解决方案？我的代码目前看起来像这样：

```
// Obtain jQuery Object
var $selector = jQuery('.selector');

// Desktop
$selector.click( ... );

// Mobile
if (window.Zepto){
  $selector.slideLeft( ... );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:46:07.520

它非常脆弱，但您可以使用`Function.call`Zepto 函数将其应用于 jQuery 对象。我做了一个概念验证小提琴（[http://jsfiddle.net/STnUQ/1/](http://jsfiddle.net/STnUQ/1/)），显然它适用于简单的`css`功能。

```
var div = jQuery('.test');
Zepto().css.call(div, 'color', 'red'); 
```

只要 jQuery 对象的底层数据结构与 Zepto 匹配，它就可以正常工作。但这并不能保证（甚至可能），您应该针对您的特定用途进行广泛的测试。

# android - android - 唤醒锁睡眠混乱

> ID：15260917
> 
> 赞同：1
> 
> 时间：2013-03-07T00:30:32.653
> 
> 标签：android, alarmmanager, wakelock, android-wake-lock

当从警报管理器调用唤醒时，我对设备到底发生了什么感到有点困惑。手机屏幕是否亮起/亮起？

我正在考虑让事情在一夜之间运行，我认为如果手机突然启动并且屏幕亮起，这可能会唤醒用户，这是非常糟糕的！

还是我没有完全理解唤醒或唤醒锁？

谢谢

拉斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T00:50:59.157

> 手机屏幕是否亮起/亮起？

`AlarmManager`，当它处理`_WAKEUP`警报时，使用`PARTIAL_WAKE_LOCK`不点亮屏幕的 。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T00:48:32.470

唤醒功能将使手机屏幕打开，唤醒锁定将阻止手机屏幕变暗或关闭。

# rest - Resftul API 结构，如果用户 ID 已经从会话令牌派生，是否需要路由？

> ID：15260919
> 
> 赞同：0
> 
> 时间：2013-03-07T00:30:35.383
> 
> 标签：rest, uri

我目前正在规划一个基于 REST 原则的 Web API。我正在使用会话令牌来正确识别正在发出请求的用户（当然是在身份验证之后），然后确定该用户是否有权访问给定资源。

假设提出请求的用户有一个`userID`of `7`，并且我想检索一个`presentations`他可以访问的列表，最好/正确的做法是：

**1** 、在路由中包含my `userID`，如：

`localhost:55555/api/users/7/presentations`

或者

**2.**不包括`userID`，如：

`localhost:55555/api/presentations`

每一个`presentation`都可以被任意数量的其他用户访问。出于这个原因，我倾向于选项 2，但在我最终确定结构之前想知道其他人的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T07:23:40.307

REST API 的一个非常常见的模式是两者兼有：

*   具有可选参数的列表资源，例如`/presentation/?by=Alice&since=2013-1-1`，
*   对象资源，如`/presentation/0AFF56E7`.

对于演示文稿，我不会使用包含用户 ID 的复合 ID，因为它似乎并不真正需要，并且它会阻止未来的功能，例如更改演示文稿的“所有者”（不更改其 ID）。

# batch-file - 带有延迟变量扩展的批处理文件 - URL 编码 - 等号 - RSA 令牌转换器

> ID：15260923
> 
> 赞同：2
> 
> 时间：2013-03-07T00:31:19.917
> 
> 标签：batch-file, cmd, rsa, url-encoding, delayedvariableexpansion

我正在自动化 RSA 软令牌转换并将转换字符串传递给 Outlook。我意识到我无法使用批处理到 Outlook 命令行将字符串转换为 URL，但这不是我的问题。我的问题是将讨厌的等号转换为它的 URL 编码等效项“%3D”。

```
@echo off
setlocal enableDelayedExpansion

set /p fname=Enter the Filename:
set /p pss=Enter the encryption pass:

IF NOT EXIST "%fname%".sdtid (
echo File Not Found!  Closing...
PING 1.1.1.1 -n 4 >NUL
exit
)

echo File Found! starting process...

REM tokenconverter %fname%.sdtid -iphone >> temp_batch.txt
tokenconverter %fname%.sdtid -p %pss% -iphone >> temp_batch.txt

set /p result= < temp_batch.txt
DEL temp_batch.txt
REM %result% | clip

set "stringclean1=!result:?=%%3F!"
set "stringclean2=!stringclean1::=%%3A!"
set "stringclean3=!stringclean2:/=%%2F!" 
```

以下行无法对等号进行编码：

```
 set "stringclean4=!stringclean3:==%%3D!" 
```

我试过了：

```
 set "stringclean4=!stringclean3:=^=%%3D!"
 set "stringclean4=!stringclean3:=%=%%3D!" 
```

但是等号仍然未编码。

```
echo Piping over to outlook..
REM passing stringclean3 since stringclean4 no worky.
pushd "C:\Program Files\Microsoft Office\Office12"
outlook.exe /c ipm.note /m "&subject=TEsT&body=%stringclean3%" 
```

使用延迟变量扩展对等号进行 URL 编码的正确方法是什么？

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T13:03:06.110

dbenham 对使用 JScript 的 encodeURIComponent 方法有一个好主意。在这里，填充到 OP 的示例脚本中：

```
@echo off
setlocal

set /p fname=Enter the Filename:
set /p pss=Enter the encryption pass:

IF NOT EXIST "%fname%".sdtid (
    echo File Not Found!  Closing...
    PING 1.1.1.1 -n 4 >NUL
    exit
)

echo File Found! starting process...

echo WScript.Stdout.WriteLine(encodeURIComponent(WScript.StdIn.ReadLine()));>uri.js
for /f "delims=" %%I in (
    'tokenconverter %fname%.sdtid -p %pss% -iphone ^| cscript /nologo uri.js'
) do set "result=%%I"
del uri.js 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T02:41:37.233

`=`抱歉，根本不存在用于批量替换的简单解决方案:-(

使用纯批处理可以做的最好的事情是逐个字符地循环遍历字符串，并根据需要进行替换。

这是一个蛮力解决方案，有一些优化空间。但这已经足够了。它首先检查是否`=`存在，然后再花时间进行编码`=`。

```
:: test if string contains =
:: only take the time to encode = if it exists
set "test=a!stringClean3!"
for /f "delims=" %%S in ("!test!") do if /i "!test:%%S=%%S!" neq "!test!" (

  :: compute length of string - 1
  set end=0
  for /l %%A in (12,-1,0) do (
    set /a "end|=1<<%%A"
    for %%B in (!end!) do if "!stringClean3:~%%B,1!"=="" set /a "end&=~1<<%%A"
  )

  :: replace = with %3D
  for /l %%N in (0 1 !end!) do (
    if "!stringClean3:~%%N,1!" equ "=" (
      set "stringClean4=!stringClean4!%%3D"
    ) else (
      set "stringClean4=!stringClean4!!stringClean3:~%%N,1!"
    )
  )

) else set stringClean4=!stringClean3! 
```

**编辑**

这是另一种完全不同的方法，它使用 CERTUTIL 将字符串编码和解码为十六进制。对十六进制字符串进行编码是一件简单的事情。我不认为 CERTUTIL 是随 XP 一起提供的。我不记得了，但 CERTUTIL 语法可能会根据 Windows 的版本略有变化。我在 Vista 上开发并测试了它。

```
set "tempFile=%temp%\replaceEqual%random%"

(>"%tempFile%.before" echo(!stringClean3!)
certutil -encodehex "%tempFile%.before" "%tempFile%.hex" >nul
>"%tempFile%.hex2" (
  for /f "usebackq tokens=1*" %%A in ("%tempFile%.hex") do (
    set ln=%%B
    set "ln=!ln:~0,48!"
    (echo !ln:3d=25 33 44!)
  )
)
certutil -decodehex "%tempFile%.hex2" "%tempFile%.after" >nul
<"%tempFile%.after" set /p "stringClean4="
del "%tempFile%.*" 
```

使用 SET /P 读取结果会导致以下限制：

*   字符串长度必须小于或等于 1021 个字符。
*   字符串不能以控制字符结尾（去除尾随控制字符）
*   字符串不能包含换行符

可以使用 FOR /F 读取结果，但是在扩展`!`FOR 变量时，延迟的扩展将损坏任何结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T04:37:55.137

```
SET result=qm?colon:slash/equal=qm?colon:slash/equal=end
set "stringclean0=!result!"
:loop3D
FOR /f "tokens=1,2*delims==" %%i IN ('SET stringclean0') DO (
  IF NOT "%%k"=="" set stringclean0=%%j%%3D%%k&GOTO loop3D
)
set "stringclean1=!stringclean0:?=%%3F!"
set "stringclean2=!stringclean1::=%%3A!"
set "stringclean3=!stringclean2:/=%%2F!"

SET stri 
```

# python - 如何在 python/nltk 中打印标记化的阿拉伯文本？

> ID：15260926
> 
> 赞同：0
> 
> 时间：2013-03-07T00:31:37.983
> 
> 标签：python, encoding, nltk, arabic

我正在做阿拉伯语的情感分析，我正在使用python /nltk和dream pie shell，当我应用标记化功能时会出现这个问题，如何显示这些单词？

```
>>> import nltk
>>> sentence = "مصادمات عنيفه في"
>>> tokens = nltk.word_tokenize(sentence)
>>> tokens
['\xd9\x85\xd8\xb5\xd8\xa7\xd8\xaf\xd9\x85\xd8\xa7\xd8\xaa', '\xd8\xb9\xd9\x86\xd9\x8a\xd9\x81\xd9\x87', '\xd9\x81\xd9\x8a'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:29:26.210

通过打印标记，您正在打印列表，并且`\x...`是字节码表示。如果要打印出阿拉伯形式，只需遍历列表并一一打印标记。

```
>>> import nltk
>>> sentence = "مصادمات عنيفه في"
>>> tokens = nltk.word_tokenize(sentence)
>>> tokens
['\xd9\x85\xd8\xb5\xd8\xa7\xd8\xaf\xd9\x85\xd8\xa7\xd8\xaa', '\xd8\xb9\xd9\x86\xd9\x8a\xd9\x81\xd9\x87', '\xd9\x81\xd9\x8a']
>>> for i in tokens:
...     print i
... 
مصادمات
عنيفه
في 
```

# javascript - javascript游戏中的异步/可变帧率

> ID：15260929
> 
> 赞同：0
> 
> 时间：2013-03-07T00:31:48.830
> 
> 标签：javascript, html5-canvas, frame-rate, 2d-games

这可能是一个愚蠢的/以前回答过的问题，但它一直困扰着我和我的朋友一段时间，我一直无法找到一个好的答案。

现在，我让我所有的 JS Canvas 游戏都在滴答声中运行。例如：

```
function tick(){
//calculate character position
//clear canvas
//draw sprites to canvas
if(gameOn == true)
    t = setTimeout(tick(), timeout)
} 
```

这适用于高端系统上的 CPU 低级游戏，但是当我尝试在每个刻度上多画一点时，它开始以慢动作运行。所以我的问题是，**如何在允许可变帧速率的同时保持 x、y 位置和命中检测计算全速进行？**

旁注：我曾尝试使用 requestAnimationFrame API，但老实说，它有点令人困惑（不是所有关于它的好教程），虽然它可能会加快您的处理速度，但它并不能完全解决问题。

谢谢大家 - 任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:57:11.973

正如科林克所说。`setTimeout`看起来像一个错误。假设这只是一个错字而不是真正的错误，我会说它不太可能是动画本身（也就是说，DOM 更新）真正减慢了你的代码。

多一点是多少？我在 1.2GHz Atom 上网本上的 VMWare 中的 IE7 上一次在屏幕上动画了数百个元素（我在最慢的机器上拥有最慢的浏览器，VMWare 是因为我使用 Linux）。

以我的经验，如果未正确完成命中检测，当您制作动画的元素数量增加时，会导致最慢的速度。这是因为一个简单的实现本质上是指数级的（它会尝试进行`n^n`比较）。解决这个问题的方法是过滤掉比较以避免不必要的比较。

在游戏引擎中执行此操作的最常见方法之一（无论语言如何）是将您的世界地图分割成一组更大的网格。然后，您只需对同一网格中的项目进行命中检测（如果您想要更准确，还可以检测相邻的网格）。这大大减少了您需要进行的比较次数，尤其是在您有很多字符的情况下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T01:22:37.933

RequestAnimationFrame 有**很大**的不同。这可能是您问题的解决方案。您还可以做两件事：设置第二个刻度系统来处理它的模型方面，例如命中检测。一个很好的例子是 PhysiJS 是如何做到的。它更进一步，并使用了一些新浏览器的一项功能，称为网络工作者。它允许您使用第二个 CPU 内核。[John Resig 有一个很好的教程](http://ejohn.org/blog/web-workers/)。但请注意，它很复杂，没有得到很好的支持（因此有问题，它往往会崩溃很多）。

真的，请求动画帧很简单，只要几行，一旦你设置了你就可以忘记它。它不应该更改您现有的任何代码。理解代码的作用有点挑战，但您几乎可以为那里的示例剪切和替换您的 setTimeout 代码。如果你问我，setTimeout 也一样复杂！它们几乎做同样的事情，除了 setTimeout 有延迟时间，而 requestAnimationFrame 没有 - 它只是在准备好时调用您的函数，而不是在设定的时间段之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T01:30:34.167

您实际上并没有使用刻度线。正在发生的事情是你一遍又一遍地反复打电话`tick()`。您需要删除`()`并离开 就`setTimeout(tick,timeout);`我个人而言，我喜欢用它`arguments.callee`来明确声明一个函数调用自己（从而消除知道函数名的依赖性）。

话虽如此，我在实现可变帧速率时喜欢做的是尽可能地简化底层引擎。例如，为了让一个球在墙上反弹，我检查从球的前一个位置到下一个位置的线是否撞到墙上，如果是，什么时候撞到。

话虽如此，您需要小心，因为某些浏览器会在打开 contaxt 菜单（或任何其他菜单）时停止所有 JavaScript 执行，因此您最终可能会在两个“帧”之间出现几秒钟甚至几分钟的间隙。我个人认为在大多数情况下，基于帧的计时是要走的路。

# javascript - 访问外部页面上的元素

> ID：15260932
> 
> 赞同：0
> 
> 时间：2013-03-07T00:31:54.713
> 
> 标签：javascript, jquery, dom, web

我有一个 html 页面，该页面通过在 url 中放置外部页面的链接访问 - 例如

[http://www.mydomain.com/mypage?external-page=encodedURL](http://www.mydomain.com/mypage?external-page=encodedURL)

我的页面有责任从它所传递的 URL 中抓取一些数据。

如何使用 javascript/jquery 访问传入的页面？我需要能够提取某些类和 id 的内容。

这是否违反了同源政策？如果是这样，还有其他方法可以处理这样的外部页面吗？对我来说似乎很奇怪，我可以在浏览器或终端命令中点击网页并接收内容，但不能在 js 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:35:58.780

如果外部页面和您的页面在**同一个域**上，那么您应该能够使用 JavaScript 访问该外部页面。否则，将不允许 JavaScript 访问外部站点，浏览器将阻止[跨站点脚本](http://en.wikipedia.org/wiki/Cross-site_scripting)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:40:36.140

您可以使用浏览器扩展来抓取外部页面，然后将数据发送到您的站点，或者在页面中显示它，以便您的页面的 javascript 通过 DOM 访问它。

您可以在您的域上使用代理来获取外部页面并将其交给您的 javascript，其来源也在您的域上。

您可以为可访问的外部页面使用 API。

您可以询问、命令、更改外部页面的代码（如果您可以访问它）以使用 Access-Control-Allow-Origin=* 提供页面服务

我想这就是你能做的。

*编辑： “看起来很奇怪”是直到你意识到**用户*和*进程*之间的预期区别*. 用户不被认为是恶意的，但进程可能是恶意的。例如，如果进程可以访问外部页面，则可以从用户登录的 gmail 会话中获取数据，并将该数据传输到服务器。由于终端上的用户可能（但不总是！）登录到该会话的用户，因此不认为该用户是恶意的。但是，其来源是用户导航到的某个网站的脚本不应该能够以与该用户相同的权限进行操作。由于该脚本也是一个代理，并且可以执行操作，但它不是由用户创建或指导的。这是隔离原产地和同源政策的最强有力的原因。*

 **例子*

**Bookmarklet 和 IFrame 的执行上下文** 如果您通过一个小书签将 JS 注入到每个页面中，那么注入的代码将表现得好像它与页面的其余部分具有相同的来源，或者至少是该页面的“顶部框架” . 它将在与顶部框架相同的上下文中执行。如果页面中有嵌套的 iframe，那么如果您的小书签尝试注入其中，您将收到“不安全地尝试从页面 x 访问”错误。这是因为小书签的来源在首页，而且首页无论如何都不能访问不同域上的嵌套 iframe。

因此，如果您希望抓取的网站的某些部分位于顶部框架下方的 iframe 中，您的小书签将无法获取它。

**使用小书签传输数据** 如果您想在一个页面上获取一个 url，在您的域上，然后从该 url，在另一个域上获取数据，然后在同一页面上显示该数据，您需要一种方法来获取数据. 您可以使用书签，但流程仍将涉及一些“用户帮助”。它会是这样的：

1.  加载您的域的页面，D. 用户将 url 放入输入框中。点击提交。
2.  D 上的 Javascript 打开一个指向用户提供的 url 的新选项卡/窗口。
3.  用户在该外部页面上*单击您的抓取书签*，该页面收集所需的数据 X。
4.  所需数据 X 通过 Ajax 发送到具有会话标识符 I 的“服务器”S。
5.  页面 D，轮询服务器 S，直到它收到通知，一些具有会话标识符 I 的数据已被抓取，然后它获取该数据并将其显示在 D 上。

需要一台服务器。您不能使用本地存储来传输信息，因为这是特定于域的。有一个不需要服务器的替代方案。它需要制作浏览器扩展。

**使用浏览器扩展传输数据 扩展**的“背景页面”基本上与所有浏览器选项卡的本地服务器相同，它允许跨针对不同域的选项卡传输信息。此设置中的“客户端”是加载到每个页面的“内容脚本”（就像书签一样，除了不需要用户实际*单击*书签来加载它。它会自动发生）。流程是这样的：

1.  又是 D 页。用户在输入框中输入 url。点击提交 -> 触发扩展中的一些代码。
2.  扩展背景页面指示一个选项卡打开并将其定位到 url。
3.  内容脚本会自动加载到该选项卡中，并在后台检查它应该获取的数据。它获取该数据，并通过消息（json 字符串）将其发送到后台页面。
4.  后台页面将该通知和数据推送到页面 D 上的原始内容脚本。其中显示了信息。
5.  可选地，后台页面还将信息传输到您的服务器以保存到该用户的数据存储中。

我用于浏览器扩展“背景页面”和“内容脚本”的语言主要集中在 Google Chrome 上。同样的概念在 Safari 和 Firefox 中也可用。如果您想支持 IE，您将不得不解决其他问题。IE10 甚至不打算支持扩展。*

# javascript - 我正在尝试通过单击表格行来定位谷歌地图

> ID：15260933
> 
> 赞同：-1
> 
> 时间：2013-03-07T00:31:59.623
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

在我的网页上，当页面加载时，它会加载由我的数据库中的内容生成的表格，并且所有标记都会立即加载到地图上，但我希望能够单击表格行以居中并放大标记它代表着，我正在努力弄清楚，但我是 JQuery/Javascript 的新手，我只是在学习。

这是我正在处理的 JQuery 函数..

```
$("table#listOfStops").find('tr').each(function() {
  $(this).on('click', function() {

      alert(arrMarkers.length);
      var num = $(this).data("num");
      for (var i = 0; i < arrMarkers.length; i++) {
        if ( arrMarkers.id == 'marker'+num) {
          map.setCenter(arrMarkers[i].position);
          map
        }
      }
  });
}); 
```

这是我的桌子：

```
 <table id="listOfStops" class="table table-striped">
  <thead>
  <tr>
    <th>Stop #</th>
    <th>Street Name</th>
  </tr>
  </thead>
  <tbody>
  <?php
  $i = 0;
  while($stmt -> fetch()) {
    echo '<tr  id="' . $i . '">';
    echo '<td>' . $gStopNumber . '</td>';
    echo '<td>' . $gStreetName . '</td>';
    echo '</tr>';
  $i++;} $stmt -> close(); $mysqli -> close(); ?>  
  </tbody>
  </table> 
```

在页面加载时，它会加载此初始化函数：

```
function initialize() {
  geocode = new google.maps.Geocoder();
 var mapOptions = {
  zoom: 10,
  center: new google.maps.LatLng(56.7626362, -111.379652),
  mapTypeId: google.maps.MapTypeId.ROADMAP,
  disableDefaultUI: false,
  zoomControl: true,
  zoomControlOptions: {
    style: google.maps.ZoomControlStyle.LARGE
  }
};

  map = new google.maps.Map(document.getElementById('gmaps'),
  mapOptions);

  google.maps.event.addListener(map, 'click', function(event) {
    var latitude = event.latLng.lat();
    var longitude = event.latLng.lng();
    deleteOverlays();
    addMarker(event.latLng);
    updateTextFields(latitude, longitude);
  });
  <?php while($stmt -> fetch()) { ?>
  var long = "<?php echo $gLongitude ?>";
  var lati = "<?php echo $gLatitude; ?>";
  var title = "<?php echo $gTitle; ?>"
  setMarker(lati, long, title);
  <?php } $stmt -> close(); $mysqli -> close();?>

} 
```

然后将每个标记设置到地图并使用 setMarker 函数将它们推送到数组中：

```
function setMarker(lat,lon, markerTitle) {
  var latLonMarker = new google.maps.LatLng(lat,lon);
  marker = new google.maps.Marker({
    position: latLonMarker,
    map: map,
    icon: 'icon.png',
    title: markerTitle
  });
  google.maps.event.addListener(marker, 'dragend', function() {
    $('#inputLatitude').val(this.getPosition().lat());
    $('#inputLongitude').val(this.getPosition().lng());
  });
  arrMarkers.push(marker);
} 
```

我只是很难将表格行与标记数组中的正确标记点匹配以设置类似的位置`map.setPosition(arrMarkers[i]);`

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:50:00.100

jquery.each 函数提供每个结果的索引。如果将查询修改为 .find('tbody tr') 索引应该与数组中的位置匹配所以类似于：

```
$("table#listOfStops").find('tbody tr').each(function(idx) {
  var rowNumber=idx;
  $(this).on('click', function() {  
        map.setCenter(arrMarkers[rowNumber].getPosition());
  });
}); 
```

# php - PHP 从 2 个字符串变量创建一个 zip 文件

> ID：15260935
> 
> 赞同：6
> 
> 时间：2013-03-07T00:32:04.447
> 
> 标签：php, zip, download

所以我要做的是获取 2 个字符串并创建 2 个文件。然后从这些文件中创建一个 zip 文件并让用户下载它们。

这是我所拥有的：

```
$string1 = 'Some data some data some data';
$string2 = 'Some data some data some data';

$zip = new ZipArchive();
$filename = "test.zip";

if ($zip->open($filename, ZIPARCHIVE::CREATE)!==TRUE) {
   exit("cannot open <$filename>\n");
}

$zip->addFromString("string1.txt", $string1);
$zip->addFromString("string2.txt", $string2);
$zip->close();

header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=\"".$filename."\"");
header("Content-Transfer-Encoding: binary");
header("Content-Length: ".filesize('test.zip')); 
```

到目前为止还没有运气。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T00:36:47.207

您错过了最重要的部分 -**输出**文件！:)

添加：

```
readfile('test.zip'); 
```

到 php 文件的末尾。

* * *

HTTP content-length 标头的计算也是错误的：

```
header("Content-Length: ".filesize($zip)); 
```

这将始终为您提供 0（或 false），因为文件大小需要文件名作为其参数。

将行更改为：

```
header("Content-Length: ".filesize('test.zip')); 
```

* * *

完成这两项操作后，zip 将成功下载并包含这两个文件。为了完整起见，这里有完整的工作示例：

```
$string1 = 'Some data some data some data';
$string2 = 'Some data some data some data';

$zip = new ZipArchive();
$filename = "test.zip";

if ($zip->open($filename, ZIPARCHIVE::CREATE)!==TRUE) {
   exit("cannot open <$filename>\n");
}

$zip->addFromString("string1.txt", $string1);
$zip->addFromString("string2.txt", $string1);
$zip->close();

header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=\"".$filename."\"");
header("Content-Transfer-Encoding: binary");
// make sure the file size isn't cached
clearstatcache();
header("Content-Length: ".filesize('test.zip'));
// output the file
readfile('test.zip'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:39:51.963

你有一个 PHP 错误（你可能没有打开错误报告或足够高的错误级别）。

filesize() 函数采用字符串而不是对象。filesize($filename) 将起作用。

要打开错误报告，请执行以下操作：

错误报告（E_ALL|E_STRICT）；ini_set('display_errors', 1);

或者在 php.ini 中执行此操作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T00:43:56.063

在所有这些 header() 调用之后，我认为您想要：

```
readfile($filename); 
```

# java - Java - 尝试创建简单的文件传输服务时遇到问题

> ID：15260937
> 
> 赞同：0
> 
> 时间：2013-03-07T00:32:05.070
> 
> 标签：java, ftp, file-transfer

正如我的标题中所述，我正在尝试在 java 中构建一个非常简单的文件传输服务。现在，我所能做的就是构建一个可以发送和接收文本字符串的简单客户端/服务器。这是代码：

UDPClient.java：

```
import java.io.*;
import java.net.*;
class UDPClient {
public static void main(String args[]) throws Exception
{
    BufferedReader inFromUser =
        new BufferedReader(new InputStreamReader
            (System.in));
    DatagramSocket clientSocket = new DatagramSocket();//port # is assigned by OS to the client
    InetAddress IPAddress = 
        InetAddress.getByName("localhost");
    byte[] receiveData = new byte[1024];
    String sentence = inFromUser.readLine();
    byte[] sendData = sentence.getBytes();
    DatagramPacket sendPacket =
        new DatagramPacket(sendData, sendData.length, 
                           IPAddress, 7777); //data with server's IP and server's port #
    clientSocket.send(sendPacket);
    DatagramPacket receivePacket =
        new DatagramPacket(receiveData,
                           receiveData.length);
    clientSocket.setSoTimeout(1000);
    clientSocket.receive(receivePacket);
    // we still need to catch the exception and retry
    String modifiedSentence =
        new String(receivePacket.getData(),
                   0,
                   receivePacket.getLength());
    System.out.println("FROM SERVER:" +
                       modifiedSentence);
    clientSocket.close();
    }
} 
```

UDPServer.java

```
import java.io.*;
import java.net.*;
class UDPServer {
public static void main(String args[]) throws Exception
{
    DatagramSocket serverSocket = new
        DatagramSocket(7777); //server will run on port #9876
    byte[] receiveData = new byte[1024];
    while(true)
        {
            DatagramPacket receivePacket =
                new DatagramPacket(receiveData, 
                                   receiveData.length);
            serverSocket.receive(receivePacket);
            String sentence = new String(
                                         receivePacket.getData(),
                                         0,
                                         receivePacket.getLength());
            InetAddress IPAddress =
                receivePacket.getAddress(); //get client's IP
            int port = receivePacket.getPort(); //get client's port #
  System.out.println("client's port # =" + port);
   System.out.println("client'sIP =" +IPAddress);
   System.out.println("client's message =" +sentence);

            String capitalizedSentence = 
                sentence.toUpperCase();
            byte[] sendData = capitalizedSentence.
                getBytes();
            DatagramPacket sendPacket =
                new DatagramPacket(sendData,
                                   sendData.length, 
                                   IPAddress, port);
            serverSocket.send(sendPacket);
        }
    }
} 
```

最终我想做的是将文件路径发送到服务器，让服务器返回文件，然后将其保存到预定位置，如 C:\Desktop\Folder。

我真的不知道如何超越我现在的位置，所以你可以分享的任何建议、指示或资源都会很棒。我对此很陌生，感觉超出了我的深度。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T01:12:45.927

与 TCP 不同，UDP 使用非持久连接。因此，您必须维护请求和响应数据包中的状态。

例如，请求数据包可能如下所示。

*   2 个字节 - 文件名长度
*   （变量） - 文件名 4 个字节 - 起始位置
*   4 个字节 - 序列。不。
*   4 字节 - 最大块大小

服务器将从“起始位置”读取最多“最大块大小”字节并以以下格式返回客户端。序列号。不。将从请求中回显，以便客户端可以将请求与响应相关联。

*   1 个字节 - 响应代码
*   4 字节 - 序列。不。
*   4 个字节 - 有效负载长度
*   （变量） - 有效载荷

# objective-c - CCLayer 为空

> ID：15260938
> 
> 赞同：0
> 
> 时间：2013-03-07T00:32:05.137
> 
> 标签：objective-c, macos, cocos2d-iphone

我正在尝试更改名为 bgColorLayer 的 CCLayerColor 的颜色，但是当我检查它是否已初始化时，它返回 null。我有一个调用该`setBGColor:`方法的颜色选择器。我知道颜色选择器正在调用该方法并且它正在吐出正确的颜色。我不知道为什么 bgColorLayer 为空。

这是 Cocos2D for Mac。

关于为什么的任何想法？

在我的 AppDelegeate 方法中，我有一个绑定到 NSColorWell 的 IBOUTLET

```
- (IBAction)colorwellBackground:(id)sender {
    NSLog(@"Color Well: %@", [sender color]);
    // Yes I know the sender color isn’t passing the correct value
    AnimationViewerLayer * bkg = [AnimationViewerLayer alloc];
    [bkg setBGColor:[sender color]];
} 
```

**AnimationViewerLayer.h**

```
@interface AnimationViewerLayer : CCLayer
{
  CCLayerColor * bgColorLayer;
}
+ (CCScene *) scene;
@end 
```

**动画视图层.m**

```
 #import "AnimationViewerLayer.h"
    @implementation AnimationViewerLayer

    +(CCScene *) scene
    {
        CCScene *scene = [CCScene node];
        AnimationViewerLayer *layer = [AnimationViewerLayer node];
        [scene addChild: layer];
        return scene;
    }

    -(id) init
    {
        if( (self=[super init])) {
            float red = 25.0 * 255;
            bgColorLayer = [CCLayerColor layerWithColor:ccc4(57, 109, 58, 255)];
            [self addChild:bgColorLayer z:1];     
    }
        return self;
    }

    - (void) setBGColor: (ccColor3B) color{
        NSLog(@"SET BG COLOR");
        [bgColorLayer setColor:ccRED];
    }

    - (void) dealloc {
        [super dealloc];
    }
    @end 
```

# javascript - 将 jQuery 添加到崇高文本 2

> ID：15260945
> 
> 赞同：2
> 
> 时间：2013-03-07T00:32:28.847
> 
> 标签：javascript, jquery, web, sublimetext2

我是 jQuery 世界的新手，直到今天才开始使用 sublime text 2。因此，我不知道我必须下载哪些包以及如何下载。因此，如果有人知道如何添加 jQuery 以在我的 sublime text 2 编辑器中使用它，我会很高兴地请求。如果你能给我一步一步的指导，那就太好了，就像我说我是新手一样。另外，如何获取 jQuery 的选择列表。

任何帮助将不胜感激。谢谢 ：]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T00:41:30.837

jQuery 是一个 JS 库。要使用它，您需要将其包含在您的文档中，例如：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script> 
```

比你能够操纵你的 DOM 元素/事件做这样疯狂的事情：

```
<script>
    $(function(){
        $('body').prepend('HELLO EVERYONE!');
    });
</script> 
```

或喜欢

## [这个演示](http://jsbin.com/aqopur/1/edit)

为了帮助你的工作，Sublime 可以通过创建*快捷方式片段*轻松地包含该 jQuery 库，我将向你展示如何：

`Tools`>`New Snippet...`

```
<snippet>
<content><![CDATA[
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
]]></content>
<tabTrigger>jquery</tabTrigger> <!-- the text that using [Tab] will paste the snippet -->
</snippet> 
```

`File`> `Save As...`
（在*Documents And Settings/yourUserName/Application Data/Sublime Text 2/Packages/User/*下）

`jquery.sublime-snippet`

重新启动 Sublime 类型`jquery`+`TAB`击键，jQuery 库**片段**将包含在您的文档中。

就像您可以创建自己的片段一样，您可以一遍又一遍地使用，例如

```
$(function(){

}); 
```

```
var intv = setInterval(function(){

}, 1000 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T00:56:20.743

Sublime Text 2 只是一个编辑器，你不需要使用包、片段等来使用 jQuery。在要使用 jQuery 的 HTML 文件中，您需要添加一个 script 标签，指向 jQuery 框架所在的位置（这可以是放置 jQuery 的本地路径，也可以是 jQuery 在 Internet 上的 url ）。

例如：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    jQuery(function(){
        // your code goes here, you can use jQuery at this point
    });
</script> 
```

至于真正取决于您使用的 HTML 标记的“选择”列表。在这一点上，我只能推荐你阅读 jQuery 文档。这是他们学习中心的链接：[http ://learn.jquery.com/](http://learn.jquery.com/)

# internet-explorer-8 - 为什么 jsfiddle 在 IE8 和以前的版本中根本不渲染？

> ID：15260947
> 
> 赞同：33
> 
> 时间：2013-03-07T00:32:54.300
> 
> 标签：internet-explorer-8, rendering, jsfiddle, ie8-browser-mode

我尝试使用开发人员工具在 IE8中打开[http://jsfiddle.net/ 。](http://jsfiddle.net/)在其他浏览器中运行良好，甚至在 IE9 中运行良好。但我在.`BrowserMode-- IE8``Document Mode--IE8``IE8 and older versions of IE`

```
SCRIPT1010: Expected identifier 
EditorCM.js?Spring, line 105 character 25

SCRIPT438: Object doesn't support property or method 'addEventListener' 
heyoffline.js?Spring, line 24 character 5

SCRIPT5009: 'MooShellEditor' is undefined 
jsfiddle.net, line 91 character 7

SCRIPT5007: Unable to get value of the property 'editor': object is null or undefined 
Actions.js?Spring, line 130 character 5 
```

这就是它的渲染方式`IE8` ![在此处输入图像描述](../Images/ad6498ade0c111ecd0fcf1857d515d9d.png)

jsfiddle 是否适用于 IE8 和旧版本？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-07T10:39:56.193

[你可以在这里](https://github.com/jsfiddle/jsfiddle-issues/issues/311)找到更多信息。简而言之：

> 对于所有不支持的浏览器（如 IE8 或手机），请使用 DRAFT 功能。
> 
> *   在您喜欢的浏览器上登录服务。
> *   创建小提琴并运行它
> *   在 IE8 上打开 http://jsfiddle.net/draft/

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-10T18:21:04.487

在现代浏览器上创建你的 jsfiddle，然后当你想在 IE8 上测试时使用全屏链接。

```
Share > Share full screen result. 
```

# sql-server-2008 - 尝试删除默认值，但收到一条消息说它在服务器上不存在

> ID：15260951
> 
> 赞同：9
> 
> 时间：2013-03-07T00:33:07.577
> 
> 标签：sql-server-2008, tsql, constraints

我需要将列的数据类型从 smallint 更改为 bigint（设计考虑不好，不要问）。我运行 TSQL

```
alter table dbo.Test alter column ProductionModeID bigint NULL 
```

但得到消息：

> 消息 5074，级别 16，状态 1，第 1 行对象“DF_Test_ProductionModeID”依赖于列“ProductionModeID”。
> 
> 消息 4922，级别 16，状态 9，第 1 行 ALTER TABLE ALTER COLUMN ProductionModeID 失败，因为一个或多个对象访问此列。

我`DF_Test_ProductionModeID`在 dbo.Test >> 约束中找到了。（我不知道是如何`DF_Test_ProductionModeID`创建的，也不相信我需要它存在）。我按 Delete，选择 OK 按钮，然后收到以下消息：

> ====================================
> 
> 服务器上不存在默认的“DF_Test_ProductionModeID”。(SqlManagerUI)
> 
> * * *
> 
> 如需帮助，请点击：http: [//go.microsoft.com/fwlink ?ProdName=Microsoft+SQL+Server&ProdVer=10.50.1447.4+((KJ_RTM).100213-0103+)&EvtSrc=Microsoft.SqlServer.Management.Smo.ExceptionTemplates .ObjectDoesNotExist&LinkId=20476](http://go.microsoft.com/fwlink?ProdName=Microsoft+SQL+Server&ProdVer=10.50.1447.4+((KJ_RTM).100213-0103+)&EvtSrc=Microsoft.SqlServer.Management.Smo.ExceptionTemplates.ObjectDoesNotExist&LinkId=20476)
> 
> * * *
> 
> 节目地点：
> 
> 在 Microsoft.SqlServer.Management.SqlManagerUI.DropObjects.DoDropObject(Int32 objectRowIndex) 在 Microsoft.SqlServer.Management.SqlManagerUI.DropObjects.DropAllObjects(Boolean stopOnError)

所以我现在很困惑，因为如果它不存在，那它怎么可能依赖一个列呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-07T00:40:18.347

运行以下命令时会发生什么？

```
ALTER table Test drop DF_Test_ProductionModeID 
```

另请参阅[如何命名默认约束以及如何在 SQL Server 中删除没有名称的默认约束以](http://blogs.lessthandot.com/index.php/DataMgmt/DBProgramming/how-to-name-default-constraints-and-how-)获取更多信息

# javascript - 如何在文本上定位闪光

> ID：15260953
> 
> 赞同：0
> 
> 时间：2013-03-07T00:33:24.913
> 
> 标签：javascript, html, css, flash

我有闪光灯，可能需要一些时间才能加载。我想通知用户它正在加载，他们应该等待。我在想的是我可以将文本放在 Flash 内容下，当 Flash 内容加载时，文本将被内容隐藏。这是我到目前为止所拥有的：

```
<object id="call-widget" type="application/x-shockwave-flash" data="https://clients4.google.com/voice/embed/webCallButton" width="230" height="85">
  <param name="movie" value="https://clients4.google.com/voice/embed/webCallButton" />
  <param name="wmode" value="transparent" />
  <param name="FlashVars"  value="id=a8dd9c58da5043dca0e879988f5cadc447e74f7a&style=0" />
</object>
<span style="z-index:-1;">Google Voice is loading...</span> 
```

这会将文本“Google Voice 正在加载...”放在Flash 内容**旁边而不是其****后面**。如果我把这个 html 放在一个[TINYBox2](http://www.scriptiny.com/2011/03/javascript-modal-windows/)`position:fixed`中或者我有这个 html并通过将位置设置为固定它可以将内容从 TINY 框中偏移（看起来不自然），它可以正常工作。有什么办法可以把它放在 TINYBox2 的中心并放在 Flash 内容的后面吗？`position:absolute``<span>`

**注意：**我无法控制闪光灯（由 Google Voice 提供）

* * *

以下是 TINYBox2 代码：

```
TINY.box.show({html: theHtmlYouSeeAbove}); 
```

它应该是这样的：

![后面有文字](../Images/a6feed89b453f75b37c66e7c64dd8a33.png)

只有在加载时才能看到 Flash 内容后面的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:07:20.873

由于您使用的是 TinyBox，因此将其应用于 tinner 类

```
.tinner {
  position:relative;
} 
```

现在，您可以将跨度设置为绝对位置，并给出相对于 div 的顶部/左侧/右侧/底部位置（.tinner 假设 TinyBox）。不用担心 z-index，因为 flash 文件肯定会在它之上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:46:25.553

也许你可以做相反的事情。首先加载 Flash，然后在 Flash 上将加载文本放在浮动 div 中。为此，只需使用 css z-index 属性。然后，当 Flash 被加载时，您可以简单地从 Flash 内部隐藏 div，方法是执行一些执行隐藏技巧的 javascript 函数。

对于顶部的 div，只需使用所需的 text/html 和 css 进行 div

```
<div id="splash" style="position:absolute;z-index:1000;top:10px;width:100px;height:200px;" >the flash is loading...</div> 
```

从 Flash 文件内部，加载后（例如在第一帧上），放置一些这样的代码......

```
getURL("javascript:myfunction();"); 
```

并将这个js放在你的html中......

```
<script language="javascript">
function myfunction() {
   $('splash').hide();
}
</script> 
```

谢谢！，

@leo。r

# css - Rails CSS 不使用 Ruby 2.0 加载

> ID：15260954
> 
> 赞同：0
> 
> 时间：2013-03-07T00:33:34.053
> 
> 标签：css, ruby-on-rails, ruby

我在 Rails 应用程序中加载 CSS 时遇到问题。我在两台机器上提取了相同的存储库。

在一台机器上，CSS 文件已正确加载。当我转到这台机器上的一个页面时，我在终端中得到以下信息：

```
Started GET "/" for 127.0.0.1 at 2013-03-06 19:03:32 -0500
Processing by HomeController#show as HTML
Compiled collaborators.css  (6ms)  (pid 862)
Compiled home.css  (145ms)  (pid 862)
Compiled patents.css  (0ms)  (pid 862)
Compiled projects.css  (64ms)  (pid 862)
Compiled users.css  (2ms)  (pid 862)
Compiled application.css  (308ms)  (pid 862)
Compiled jquery.js  (3ms)  (pid 862)
Compiled jquery_ujs.js  (0ms)  (pid 862)
Compiled collaborators.js  (129ms)  (pid 862)
Compiled home.js  (0ms)  (pid 862)
Compiled jquery.1.8.2.js  (5ms)  (pid 862)
Compiled patents.js  (186ms)  (pid 862)
Compiled projects.js  (0ms)  (pid 862)
Compiled users.js  (0ms)  (pid 862)
Compiled application.js  (1185ms)  (pid 862)
  User Load (1.4ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 13945 LIMIT 1
  Rendered layouts/_header.html.erb (95.7ms)
  Rendered home/show.html.erb within layouts/application (2088.1ms)
Completed 200 OK in 2114ms (Views: 2104.9ms | ActiveRecord: 8.3ms) 
```

当我在另一台机器上加载相同的页面时，我在终端中得到以下信息

```
Started GET "/" for 127.0.0.1 at 2013-03-06 19:31:19 -0500
Processing by HomeController#show as HTML
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 460 LIMIT 1
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered home/show.html.erb within layouts/application (5.8ms)
Completed 200 OK in 11ms (Views: 10.7ms | ActiveRecord: 0.3ms) 
```

但是没有一个 CSS 可以编译。它也不会显示在浏览器中。可能是什么问题呢？

更新：我在第二台机器上运行了 rake assets:precompile 并且它有效。但是，删除 public/assets 文件夹使其无法正常工作。这意味着它不是实时编译。知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T07:26:26.777

你 config/environments/development.rb 的内容是什么

具体来说——。

config.assets.compile = 假/真？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T19:51:53.030

我注意到一些与 ruby​​ 2.0 中的资产相关的问题，即在 1.9.3 中运行的应用程序没有出现 CSS 问题。

您能否尝试看看这是否有帮助：

添加到您的 Gemfile：

```
gem 'sprockets', '~> 2.9.0' 
```

然后捆绑安装并重试...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T00:36:00.310

第二台机器是否在`production`环境中运行？CSS 仅在开发中编译。

# java - 如何使用 Astyanax 进行 Cassandra CQL 查询？

> ID：15260955
> 
> 赞同：2
> 
> 时间：2013-03-07T00:33:34.800
> 
> 标签：java, nosql, cassandra, cql, astyanax

我正在使用 Astyanax 版本 1.56.26 和 Cassandra 版本 1.2.2

好的，一些情况概述：

1.  我使用 cqlsh 创建了一个非常简单的列族，如下所示：

    `CREATE TABLE users ( name text PRIMARY KEY, age int, weight int );`

2.  我填充了列族（没有空列）

3.  `users`通过 cqlsh查询产生预期结果

4.  现在我想以编程方式查询`users`，所以我尝试类似：

```
ColumnFamily<String, String> users =  
  new ColumnFamily<String, String>("users", StringSerializer.get(), StringSerializer.get());
OperationResult<ColumnList<String>> result = ks.prepareQuery(users)
  .getRow("bobbydigital") // valid rowkey
  .execute();
ColumnList<String> columns = result.getResult();
int weight = columns.getColumnByName("weight").getIntegerValue(); 
```

1.  在分配`weight`NPE 的过程中被抛出！:(

我的理解是应该包含与包含作为其行键`result`的行关联的所有列。`"bobbydigital"`然后我尝试将名为的列中的值分配给`"weight"`整数变量`weight`。我知道该变量`columns`正在被分配，因为当我在分配后立即添加一些调试代码时，如下所示：

```
System.out.println("Column names = " + columns.getColumnNames()); 
```

我得到以下输出：

`Column names = [, age, weight]`

那么为什么是空指针呢？有人能告诉我哪里出错了吗？另外，为什么有空白列名？

更新：
另外，如果我尝试以不同的方式查询，如下所示：

```
Column<String> result = ks.prepareQuery(users)
  .getKey("bobbydigital")
  .getColumn("weight")
  .execute().getResult();
int x = result.getIntegerValue(); 
```

我得到以下异常：
`InvalidRequestException(why:Not enough bytes to read value of component 0)`

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T06:44:08.743

我弄清楚我做错了什么。我尝试的查询方式不适用于 CQL 表。要使用 Astyanax 查询 CQL 表，您需要将`.withCQL`方法链接到您的`prepareQuery`方法；将 CQL 语句作为参数传递。

可以在[此处](https://github.com/Netflix/astyanax/wiki/Cql-and-cql3)找到特定于将 CQL 与 Astyanax 结合使用的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T20:27:37.187

I got this fixed by adding setCqlVersion

`this.astyanaxContext = new AstyanaxContext.Builder() .forCluster("ClusterName") .forKeyspace(keyspace) .withAstyanaxConfiguration( new AstyanaxConfigurationImpl().setCqlVersion( "3.0.0").setDiscoveryType(`

And adding `WITH COMPACT STORAGE` while creating the table.

# alfresco - 如何托管和发布 Alfresco WCM

> ID：15260960
> 
> 赞同：1
> 
> 时间：2013-03-07T00:34:09.647
> 
> 标签：alfresco, alfresco-share

我对 Alfresco 很陌生，并试图掌握它。我使用的是社区版 4.2，并且我使用 Alfresco Share 创建了一个网站，但我没有导入政府/金融网站数据。下面是截图—— ![在此处输入图像描述](../Images/a54015bd82c9e4134e872f46a07051cc.png)

现在，我在“文档库”选项卡下创建了两个文件夹，并将几个 PDF 上传到其中。它看起来像下面 -

![在此处输入图像描述](../Images/2066706096d97e163db2da0b7089366c.png)

现在，如果我单击发布链接，则会显示“此内容没有合适的频道”。我在创建此站点时输入了 ubswcm 作为 URL 名称。

我点击了链接[http://docs.huihoo.com/alfresco/Getting-Started-with-WCM-for-Alfresco-Commumity-Edition-3.2.pdf](http://docs.huihoo.com/alfresco/Getting-Started-with-WCM-for-Alfresco-Commumity-Edition-3.2.pdf)，其中谈到了陈述，但我在这个版本的 Alfresco 中找不到分期4.2.

我的问题

1.  如何发布此内容？
2.  我怎样才能在本地主机上运行这个网站？我需要创建war文件吗？如果是这样，请建议如何进行此操作。
3.  http://:8080/wcmqs 运行良好。我怎样才能在 http://:8080/ubswcm 中建立这样更苗条的网站？请建议您是否有任何关于此的教程。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T11:49:25.257

您需要遵循有关 Alfresco *Web 快速入门*功能的教程。您应该会发现这些功能在[docs.alfresco.com](http://docs.alfresco.com/4.2/index.jsp)上有详细记录，例如[Using Alfresco Web Quick Start](http://docs.alfresco.com/4.2/topic/com.alfresco.enterprise.doc/concepts/qs-intro.html)。

不要将 Web 快速入门与*社交发布*框架（与*发布*操作相关联）或旧的基于 AVM 的 WCM 服务（我假设 PDF 引用，但我无法确定，因为您的链接给了我） a 404) 在 Alfresco 4 中不再支持。

# c# - OpenCV：Matrix.cpp 中的未知数组类型错误

> ID：15260961
> 
> 赞同：0
> 
> 时间：2013-03-07T00:34:09.907
> 
> 标签：c#, c++, opencv, matrix, emgucv

我正在使用 EmguCV Matrix.Add 方法将一个矩阵附加到另一个矩阵。

```
Emgu.CV.Matrix<float> descriptors = new Emgu.CV.Matrix<float>(0, dictionarySize);
Emgu.CV.Matrix<float> BOWDescriptor = imageDescriptorExtractor.Compute(trainingImage, keyPoints);
descriptors.Add(BOWDescriptor); 
```

对应的OpenCV代码如下：

```
Mat bowDescriptor(0, dictionarySize, CV_32FC1);
Mat bowDescriptor;
bowDE.compute(img, keypoints, bowDescriptor);
descriptors.push_back(bowDescriptor); 
```

在编译期间，我不会得到任何异常。但是，在运行应用程序时，我收到以下错误：

> **Emgu.CV.dll 中出现“Emgu.CV.Util.CvException”类型的未处理异常附加信息：OpenCV：未知数组类型**

这与 CV_32FC1 数据类型有关吗？我的 OpenCV 到 EmguCV 的转换是否正确？

感谢您对此的帮助。

谢谢杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T01:35:41.820

CV_32FC1 仅表示单通道、32 位浮点数组，并且由于您不能有零通道，因此默认的 Matrix 构造函数应该没问题。

您是否尝试在“添加”调用上设置断点并检查这两个矩阵？我不确定 EmguCV 何时抛出该异常，但矩阵大小可能不匹配。

另外，我刚刚注意到“描述符”对象的构造函数有 0 行；这是一个错字吗？

# c++ - 碰撞问题c ++

> ID：15260962
> 
> 赞同：-1
> 
> 时间：2013-03-07T00:34:13.883
> 
> 标签：c++, geometry, collision-detection

我很难让一些基本的碰撞工作。我有一张以不同形状弹跳的图像。目前，我已经完成了矩形碰撞工作。这相对容易，因为直线是直的，所以我基本上只是将 obj 保持在一个矩形中，如果它超出 x1、x2、y1 或 y2 的范围，我将速度更改为相反。

我正在尝试在三角形内完成相同的事情，并且遇到了最困难的时间。我读过一些书，但由于某种原因，我大脑中的电灯开关没有打开！

所以我有一个三角形......我通过取（y2 - y1）/（x2 - x1）确定了斜率；但是，我无法在编程中使用斜率导致碰撞正确注册方面取得任何进展。

我会提供一些代码，但老实说，没有什么能接近工作哈哈。

关于如何让 obj 在三角形内反弹的任何建议？

或者，如何使 obj 从 / style 线反弹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T01:39:10.663

根据您希望获得的参与程度，您可能会发现游戏物理引擎开发很有帮助。这本书的优点是所有的源代码都可以通过[GitHub和用于](https://github.com/idmillington/cyclone-physics)[细粒度碰撞检测](https://github.com/idmillington/cyclone-physics/blob/master/src/collide_fine.cpp)的特定源文件获得。代码非常干净且可用。

# python - 使用递归函数，但我的终止是什么？

> ID：15260965
> 
> 赞同：0
> 
> 时间：2013-03-07T00:34:37.300
> 
> 标签：python

我试图弄清楚如何终止我的递归函数。如下图所示：

![在此处输入图像描述](../Images/65ac4e148d19b6eef92bf3eb65e1db6d.png)

`getEmpty[9]`将返回：

```
[6,10] 
```

但我需要它返回`[6,8,9,10,11]`

因为我想要所有的空盒子，只要它与之前的空盒子共享一条边。

如何终止此递归？

目前我有

```
getEmpty(9)
        #my code here
        return empties;

empties = [6,10] 
```

我添加了这个：

```
for cell in empties:

        if(getEmpty(cell) not in empties):
            empties = empties+getEmpty(cell) 
```

最后，但它给了我一个打印出来的无限循环：

```
[6,10]
[9] 
```

不停，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T00:42:58.190

编辑：对不起，你的问题很模棱两可。你需要的是一个简单的图遍历算法。这里是它的一瞥：

```
input : coordinate of a cell

function empty_cell_search(cell)
  for neighbor_cell in neighbors :
    if the_neighbor_cell is empty and is not already visited : 
      add the_neighbor_cell to set of visited cells
      union empty_cell_search(the_neighbor_cell) with current set of visited cells
  return the set of currently visited cells 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:47:46.740

您应该使用它（python 3，但 2 的想法相同）：

```
empty=[6,8,9,10,11]
start=9
done=[int(start)]
while True:
    complete=True
    for num0 in empty:
        for num1 in done:
            if (abs(num0-num1)==1 or abs(num1-num0)==3) and num0 not in done:
                complete=False
                done.append(num0)
    if complete=True:
         break
print(sorted(done)) 
```

# python - 加密文件中的行

> ID：15260966
> 
> 赞同：4
> 
> 时间：2013-03-07T00:34:46.013
> 
> 标签：python

我正在尝试编写一个程序来打开一个文本文件，并将文件中的每个字符向右移动 5 个字符。它应该只对字母数字字符执行此操作，并保留非字母数字字符。（例如：C 变为 H）我应该使用 ASCII 表来执行此操作，但当字符环绕时我遇到了问题。例如：w 应该变成 b，但我的程序给了我一个 ASCII 表中的字符。我遇到的另一个问题是所有字符都打印在不同的行上，我希望它们都打印在同一行上。我不能使用列表或字典。

这就是我所拥有的，我不确定如何做最后的 if 语句

```
def main():
    fileName= input('Please enter the file name: ')
    encryptFile(fileName)

def encryptFile(fileName):
    f= open(fileName, 'r')
    line=1
    while line:
       line=f.readline()
       for char in line:
           if char.isalnum():
               a=ord(char)
               b= a + 5
               #if number wraps around, how to correct it
               if 

                print(chr(c))
            else:
                print(chr(b))
        else:
            print(char) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T00:51:17.653

使用[str.translate](http://www.tutorialspoint.com/python/string_translate.htm)：

```
In [24]: import string

In [25]: string.uppercase
Out[25]: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

In [26]: string.uppercase[5:]+string.uppercase[:5]
Out[26]: 'FGHIJKLMNOPQRSTUVWXYZABCDE'

In [27]: table = string.maketrans(string.uppercase, string.uppercase[5:]+string.uppercase[:5])

In [28]: 'CAR'.translate(table)
Out[28]: 'HFW'

In [29]: 'HELLO'.translate(table)
Out[29]: 'MJQQT' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T00:46:29.250

首先，它是小写还是大写很重要。我将在这里假设所有字符都是小写的（如果不是，那么制作它们就很容易了）

```
if b>122:
    b=122-b  #z=122
    c=b+96   #a=97 
```

w=119 in ASCII and z=122 (decimal in ASCII) 所以 119+5=124 和 124-122=2 这是我们的新 b，然后我们将它添加到 a-1（如果我们得到 1回来，2+96=98 和 98 是 b。

对于在同一行上打印，而不是在您拥有它们时打印，我会将它们写入一个列表，然后从该列表创建一个字符串。

例如，而不是

```
 print(chr(c))
else:
    print(chr(b)) 
```

我会做

```
 someList.append(chr(c))
else: 
     somList.append(chr(b)) 
```

然后将列表中的每个元素连接到一个字符串中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T00:50:54.567

您可以创建一个[字典](http://docs.python.org/2/tutorial/datastructures.html?highlight=dictionary%20comprehension#dictionaries)来处理它：

```
import string
s = string.lowercase + string.uppercase + string.digits + string.lowercase[:5]
encryptionKey = {s[i]:s[i+5] for i in range(len(s)-5)} 
```

`s`( )的最后一个加数`+ string.lowercase[:5]`将前 5 个字母添加到密钥中。然后，我们使用简单的字典推导来创建加密密钥。

放入您的代码中（我也对其进行了更改，以便您遍历这些行而不是使用`f.readline()`：

```
import string
def main():
    fileName= input('Please enter the file name: ')
    encryptFile(fileName)

def encryptFile(fileName):
    s = string.lowercase + string.uppercase + string.digits + string.lowercase[:5]
    encryptionKey = {s[i]:s[i+5] for i in range(len(s)-5)}
    f= open(fileName, 'r')
    line=1
    for line in f:
       for char in line:
           if char.isalnum():
               print(encryptionKey[char])
           else:
                print(char) 
```

# python - 导入 numpy 可与解释器一起使用，但不能完全与 python 中的 pyscripter 一起使用

> ID：15260971
> 
> 赞同：0
> 
> 时间：2013-03-07T00:35:16.367
> 
> 标签：python, numpy, import, python-3.3, pyscripter

我正在使用 python 3.3 (x64) 和 pyscripter 2.5.3 (x64)，python 3.3 (x64) 的 numpy 1.7。当我在脚本中导入 numpy 时，我没有 numpy 的所有功能，只有少数几个（不是很多，也不是 array ）？好像它无法从 numpy 导入所有文件

如果我使用 IDLE，它可以正常工作，与 notepad++ 相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:07:34.747

取决于您在 pyscripter 中使用的 Python 引擎。IDE 提供了一个连接到它自己的 python 内部安装和一个远程安装（通常是你在安装 ide 之前的版本。你需要确保 pyscripter 连接到远程引擎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-03T11:25:21.557

我也有同样的问题，检查 PyScripter 中 python 的路径。它在工具 - > python路径中检查它是否引用了python的正确路径，如果它没有更正它并希望它会起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:11:31.067

该问题与pyscipter有关。尝试使用 Python Shell 导入 numpy

# xml - 如何将 Sitecore 网站导出为 XML 文件？

> ID：15260973
> 
> 赞同：0
> 
> 时间：2013-03-07T00:35:39.643
> 
> 标签：xml, export, sitecore

我需要从我们的 Sitecore 站点导出 XML 文件以进行本地化。我知道这不是最好的解决方案，但这是我们唯一的方法。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T01:12:38.170

1.  登录到 Sitecore 桌面。
2.  从 Sitecore 菜单中，选择“控制面板”。
3.  进入“全球化”类别。
4.  选择“将语言导出到文件”任务并按照说明进行操作。

可以在[此处](http://blog.globalizationpartners.com/sitecore-content-localization.aspx)找到带有屏幕截图的详细说明。

# javascript - 监听所有表单提交事件

> ID：15260974
> 
> 赞同：3
> 
> 时间：2013-03-07T00:35:44.057
> 
> 标签：javascript, jquery

jQuery`on('submit', ...)`正确拾取本机表单提交，即按下提交按钮时，但它不能很好地处理 JS 表单提交，至少在 FF&IE 上

考虑到这一点，如何“正确”添加提交侦听器？通过更改的行为修改 DOM 原型`HTMLFormElement.prototype.submit`在 IE7 上不起作用

[摆弄](http://jsfiddle.net/ovfiddle/5VXcz/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:44:11.243

使用 jQuery`.submit()`提交表单将解决这个问题。

```
$('#someForm').submit(); 
```

[jsFiddle 演示](http://jsfiddle.net/5VXcz/4/)

当然，如果你真的坚持使用原生 DOM 也无济于事`.submit()`。

# ios - 在 UITableViewCell 的左侧有重新排序符号

> ID：15260976
> 
> 赞同：0
> 
> 时间：2013-03-07T00:35:44.620
> 
> 标签：ios, uitableview

我希望重新排序的图形（三行）显示在 UITableViewCell 的左侧，因为右侧会被覆盖的 UIView 隐藏。

我发现的这段代码：

```
- (void) tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    for(UIView* view in cell.subviews)
    {
        if([[[view class] description] isEqualToString:@"UITableViewCellReorderControl"])
        {
            // Creates a new subview the size of the entire cell
            UIView *movedReorderControl = [[UIView alloc] initWithFrame:CGRectMake(0, 0, CGRectGetMaxX(view.frame), CGRectGetMaxY(view.frame))];
            // Adds the reorder control view to our new subview
            [movedReorderControl addSubview:view];
            // Adds our new subview to the cell
            [cell addSubview:movedReorderControl];
            // CGStuff to move it to the left
            CGSize moveLeft = CGSizeMake(movedReorderControl.frame.size.width - view.frame.size.width, movedReorderControl.frame.size.height - view.frame.size.height);
            CGAffineTransform transform = CGAffineTransformIdentity;
            transform = CGAffineTransformTranslate(transform, -moveLeft.width, -moveLeft.height);
            // Performs the transform
            [movedReorderControl setTransform:transform];
        }
    }
} 
```

第一次加载表格时工作得很好。但是，当单元格“重绘”时（例如前后滚动时），重新排序符号就会消失。

出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:15:28.067

您不断移动重新排序控件相对于其当前位置

```
CGSize moveLeft = CGSizeMake(movedReorderControl.frame.size.width - view.frame.size.width, movedReorderControl.frame.size.height - view.frame.size.height); 
```

所以它似乎将其移出屏幕。尝试存储初始帧，然后使用它来移动您的子视图：

```
CGSize moveLeft = CGSizeMake(initialFrame.width - view.frame.size.width, initialFrame.width.height - view.frame.size.height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T00:48:30.250

代码应该放在`drawRect:`UITableView 单元格的方法中，以便在单元格更新时调用它。绘制自己而不是视图应该是单元格的责任。

# ruby-on-rails - 关于在不适合任何地方的 Rails 应用程序中放置类的指南

> ID：15260984
> 
> 赞同：42
> 
> 时间：2013-03-07T00:36:35.880
> 
> 标签：ruby-on-rails, ruby, models, organization, directory

我想知道是否有关于将非标准 Ruby 文件放在 Rails 应用程序中的位置的最佳实践，那些不适合任何默认目录（`controllers`/`models`​​ 等）的文件。

我说的是控制器/模型等使用的类，但不是任何 Rails 基类的子类。包含从模型中提取的功能的类，以减少它们的脂肪。其中一些看起来像模型但不是 AR 模型，其中一些看起来更像“服务”，有些介于两者之间或其他东西。

一些随机的例子：

*   通过 facebook 等处理使用密码进行身份验证的“策略”类。
*   封装参数的“XParams”对象或处理参数处理以执行一些复杂动作的“XCreator”对象，最终创建一些AR模型
*   向外部 API 发出请求或封装这些请求和响应的类
*   可以替代真实 AR 模型的假模型（例如访客用户）
*   Resque 职位
*   从 Redis 存储和读取信息的类
*   执行某些特定操作（如处理数据、生成报告等）并从 Resque 作业或 rake 任务中调用的类

我现在有很多这样的东西，其中一些被添加到`lib`其中最终成为一堆随机的类和模块，一些潜入`app/models`. 我想以某种方式组织这个，但我不知道从哪里开始。

只有AR模型才能进入`app/models`吗？或者也可以放任何域或辅助模型？您如何确定某物是否为模型？

所有不适合的东西都应该`app`进入`lib`吗？或者也许我应该添加一些新的自定义子目录`app`？哪些子目录，以及如何划分自定义类？

你如何在你的项目中处理这个问题？我知道每个项目都有点不同，但一定有一些相似之处。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-07T00:59:30.990

好问题 - 我没有具体的答案给你

但我建议查看这篇文章 - [http://blog.codeclimate.com/blog/2012/02/07/what-c​​ode](http://blog.codeclimate.com/blog/2012/02/07/what-code-goes-in-the-lib-directory/) -goes-in-the-lib-directory / - 请务必阅读所有评论

在当前项目中，我在应用程序/模型下有大量非 ActiveRecord 对象，它可以工作但并不理想，我将“可重用”非应用程序特定代码放在 lib 下

我在辅助项目中尝试过的其他替代方案（比如我们有一堆命令对象）rails 对于应用程序下的命名空间来说很痛苦，默认情况下它会将所有内容加载到同一个命名空间中

```
app/
  commands/
    products/create_command.rb         # Products::CreateCommand
    products/update_price_command.rb   # Products::UpdatePriceCommand 
```

备用，除了 src 或 app_name 目录下的 rails 之外的所有内容

```
app/
  src/
    commands/
      create_product.rb         # Commands::CreateProduct
      update_product_price.rb   # Commands::UpdateProductPrice 
```

我还没有找到一个好的解决方案，理想情况下第二个更好，但最好不要在应用程序下有额外的目录，这样你就可以打开应用程序并查看控制器、命令、模型等......

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-07T00:45:52.180

您触及了许多不同的用例，我认为这部分是最接近“正确”答案的部分：

> 我现在有很多这样的东西，其中一些被添加到 lib 中，最终成为一堆随机的类和模块，一些潜入应用程序/模型中。我想以某种方式组织这个，但我不知道从哪里开始。

这在我的书中几乎是正确的。您没有提到的一件事是将各种碎片提取到单独的宝石中。与外部服务对话的类是提取的优秀候选者，如果策略类足够通用，它们也是如此。这些可以是私有的，因为运行您自己的 gem 服务器并不难，然后您显然可以在 ROR 应用程序中重用它们。

最后也是最具体的，resque 工作我塞进了 lib/jobs。

我的经验法则是，如果它是某种模型*，*它会进入`app/models`. 如果不是，它可能属于`lib`或属于它的某个适当命名的子目录，例如`lib/jobs`、`lib/extensions`、`lib/external`等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T00:44:43.263

我将任何模型类（如 STI 子类）放在`apps/models`. 我将其他课程放在 中`lib`，因为它似乎是放置它们的最佳位置。我很容易知道在哪里看。因为我的模型类都在一个地方，所以对我的测试进行分组也更容易。

按照惯例，我不愿意将辅助类放入`app/models`. 如果他们是演示者类，他们属于`app/helpers`. 如果他们不是，那么`lib`似乎对他们来说是最好的地方。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-08T12:14:14.183

如果您有兴趣，我稍后还写了一篇关于此的后续文章，总结了我的发现：[http ://blog.lunarlogic.io/2013/declutter-lib-directory/](http://blog.lunarlogic.io/2013/declutter-lib-directory/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T00:45:42.707

我的类通常会进入`lib`子目录，其中与子目录同名的模块负责包含它们。（当涉及到自动加载器时，Rails 对文件名和类名非常敏感。）

另一种选择是将每个模块封装到自己的 gem 中，然后通过 Gemfile 引用 gem。这允许跨项目共享代码。

# java - 线程“主”java.awt.AWTError 中的异常：未找到辅助技术

> ID：15260989
> 
> 赞同：7
> 
> 时间：2013-03-07T00:36:59.963
> 
> 标签：java, exception

如何解决这个错误？

```
线程“主”java.awt.AWTError 中的异常：未找到辅助技术：
 com.sun.java.accessibility.AccessBridge
    在 java.awt.Toolkit.loadAssistiveTechnologies(Toolkit.java:775)
    在 java.awt.Toolkit.getDefaultToolkit(Toolkit.java:861)
    在 java.awt.Window.getToolkit(Window.java:1127)
    在 java.awt.Window.init(Window.java:369)
    在 java.awt.Window.(Window.java:407)
    在 java.awt.Frame.(Frame.java:402)
    在 java.awt.Frame.(Frame.java:367)
    在 javax.swing.JFrame.(JFrame.java:163)
    在 FirstJavaProject.(FirstJavaProject.java:7)
    在 FirstJavaProject.main(FirstJavaProject.java:5)

```

它发生在以下程序的执行过程中：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class TenButtons extends JFrame{

    JButton [] btns= new JButton[10];

    public static void main(String args[]){
        new TenButtons();
    }
    public TenButtons(){
        this.setSize(500,500);
        this.setTitle("10 Buttons");
        this.setLayout(new GridLayout(5,2));
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        for(int i=0; i<btns.length; i++){
           btns[i]=new JButton("Button ");
           this.add(btns[i]);
        }
        this.setVisible(true);
    }
} 
```

我的`JDK_HOME/jre/lib/accessibility.properties`文件有以下内容：

```
## Load the Java Access Bridge class into the JVM ##
assistive_technologies=com.sun.java.accessibility.AccessBridge
#screen_magnifier_present=true 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T05:32:48.883

供将来参考，此异常的更常见原因之一是[Java Access Bridge](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136191.html)安装丢失或损坏。在这种情况下，标准配置文件 ( `JDK_HOME/jre/lib/accessibility.properties`) 中定义了以下访问网桥：

```
com.sun.java.accessibility.AccessBridge 
```

但除非所需的安装完成，否则它实际上不会起作用。请注意，标准访问桥实现*不*随 SDK 一起提供。[要解决您的特定问题，请按照安装页面](http://docs.oracle.com/javase/accessbridge/2.0.2/setup.htm)中的说明下载并安装 Oracle Access Bridge 。这应该可以解决程序中发生的启动错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-08-03T16:13:53.587

回答那些：

*   正在使用 Windows WSL2
*   并安装了 OpenJDK 8
*   已尝试启动 Gremlin 控制台或类似的 Java 应用程序

并且收到同样的错误，`Assistive technology not found AWTError`以前批准的答案都是正确的。

对于 WSL2 和 OpenJDK 8，您需要执行以下操作：

`sudo vim /etc/java-8-openjdk/accessibility.properties`

将配置行注释掉，如下所示：

`#assistive_technologies=org.GNOME.Accessibility.AtkWrapper`

无需重新启动 WSL 会话。只需重新启动 Java 应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-07T22:53:16.840

使用**Java 11**，很可能您使用的是**Java 8**，并且它没有**辅助技术**或**org.GNOME.Accessibility.AtkWrapper**。

此外，不要从辅助功能属性文件中注释掉辅助技术行，这不会解决您的问题，而是会错误配置您的布局，并且您将留下丑陋或无法使用的 UI。

# mysql - 使用多个 LIKE 和 NOT IN 条件进行查询

> ID：15260990
> 
> 赞同：3
> 
> 时间：2013-03-07T00:37:01.150
> 
> 标签：mysql, sql, select

我想在多个字段中搜索相同的值。但为最后一个事件逃脱铭文。是否可以？

我尝试了以下方法，但没有成功。

```
SELECT id, login
FROM PERSON
WHERE login like '%toto%'
OR nickname like '%toto%'
OR name like '%toto%'
AND id NOT IN (
    SELECT p.id
    FROM PERSONNE p, INSCRIPTION i, EVENT e
    WHERE p.id = i.id_person 
    AND i.id_event = e.id
    AND i.id_event = (
        SELECT MAX(id) FROM EVENT))
GROUP BY login, nom, pseudo 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T00:38:04.947

您只需要对`OR`条件进行分组。

```
SELECT id, login 
FROM   PERSON 
WHERE (login like '%toto%' OR nickname like '%toto%' OR name like '%toto%')
AND id NOT IN (SELECT p.id FROM PERSONNE p, INSCRIPTION i, EVENT e
               WHERE p.id = i.id_person 
               AND i.id_event = e.id
               AND i.id_event = (SELECT MAX(id) FROM EVENT))
GROUP BY login, nom, pseudo 
```

# java - 二叉搜索树更改插入方法返回类型

> ID：15260992
> 
> 赞同：1
> 
> 时间：2013-03-07T00:37:11.153
> 
> 标签：java, binary-search-tree

我为二叉搜索树编写了一个插入方法，即`void`. 我必须更改该方法以使其返回 a`boolean`但我很困惑，因为我的 insert 辅助方法返回 a `Node`。

有没有办法编写一些其他返回 a 的辅助方法`boolean`？如果没有，我将如何更改我的方法以返回 a `boolean`？

这是我的方法：

```
public void insert(E s) 
{
    root = insert(s, root);
    root.setParent(findParent(root.getData()));
} 

private Node<E> insert(E s, Node<E> T)
{
    //easiest case, empty tree, create new tree
    if(T == null)
    {
        T = new Node<E>(s);
    }
    //s is greater than T, insert on right subtree
    else if(s.compareTo(T.getData()) > 0)
    {
        T.setRight(insert(s, T.getRight()));
    }
    //s is less than T, insert on left subtree
    else if (s.compareTo(T.getData()) < 0)
    {
        T.setLeft(insert(s,T.getLeft()));
    }
    else
    {
        System.out.println("Item already present.");

    }
    return T;
}//Close insert 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T00:43:50.787

我假设`true`如果插入成功，您应该返回，`false`否则？将您的第一个函数更改`insert`为如下所示：

```
public boolean insert(E s) 
{
    try {
        root = insert(s, root);
        root.setParent(findParent(root.getData()));
        return true;
    } catch (Exception e) {
        return false;
    }
} 
```

并更改您的辅助函数，以便如果该项目已经存在，它会引发异常（以便主插入函数捕获并触发`false`返回）。

```
private Node<E> insert(E s, Node<E> T) throws Exception {
    ...
    else {
        System.out.println("Item already present.");
        throw new Exception("Item already present.");
    }
    return T;
} 
```

**或者**（如 Tutankhamen 建议的那样）`null`在插入不成功的情况下从辅助方法返回，所以你有：

```
public boolean insert(E s) 
{
    root = insert(s, root);
    if (root == null) {
        return false;
    }
    root.setParent(findParent(root.getData()));
    return true;
}

private Node<E> insert(E s, Node<E> T) {
    ...
    else {
        System.out.println("Item already present.");
        return null;
    }
    return T;
} 
```

# java - Java Map 键的奇怪输出

> ID：15260993
> 
> 赞同：0
> 
> 时间：2013-03-07T00:37:15.783
> 
> 标签：java, hash, map, hashmap

我正在尝试打印我的地图以显示每个打印语句的键和值。我有重复的键和重复的值。例如：

```
key -> value
house -> dog
house -> cat
dog -> house
dog -> cat
cat -> house
cat -> bike 
```

这是我的文本文件：

```
house   cat
house   dog
house   index
cat bike
cat house
cat index
dog house
dog cat
dog index 
```

出于某种原因，我的代码正在打印字符串“索引”而不是实际值。我的代码在这里：

```
//adding values from a text file of two words per line.
//those two words per line in the text file are tab delimitted

public static Map<String, String> animals = new HashMap<String, String>(); 
BufferedReader in = new BufferedReader(new InputStreamReader("animals.txt"));
String current_line;
String[] splitted_strings = new String[1];
while ((current_line = in.readLine()) != null){
   splitted_strings = current_line.split("\t");
   animals.put(splitted_strings[0], splitted_strings[1]);
}

//print statement
for(Map.Entry entry : animals.entrySet()) 
   System.out.println(entry.getValue() + " " + entry.getKey()); 
```

下面显示的代码中的简单打印语句的输出如下所示：

```
index cat
index house
index dog 
```

如何将这些值添加到数据结构中以保留上述密钥对？我怎样才能得到这样的输出？：

```
house cat
house dog
house index
cat bike
cat house
cat index
dog house
dog cat
dog index 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T00:39:40.170

> 我有重复的键和重复的值。

不，你没有。不在一个`Map<K,V>`. 根据定义，键是唯一的。

如果您*希望*每个键有多个值，则需要[Guava](http://guava-libraries.googlecode.com/)之类的东西[`Multimap`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Multimap.html)。

但是，如果您提供的代码确实为每个值打印“索引”，那么我强烈怀疑该地图一开始就不正确，并且您的人口代码中有一个错误（我们看不到） . （要么，要么你使用一些自定义类作为值，它的`toString`方法总是返回“索引”。）

你应该退后一步，看看你的人口代码。

编辑：我修改了您的示例代码，以便它可以编译，提出：

```
import java.io.*;
import java.util.*;

public class Test {

    public static void main(String[] args) throws IOException {
        Map<String, String> animals = new HashMap<String, String>(); 
        BufferedReader in = new BufferedReader
            (new InputStreamReader(new FileInputStream("animals.txt")));
        String current_line;
        String[] splitted_strings = new String[1];
        while ((current_line = in.readLine()) != null){
            splitted_strings = current_line.split("\t");
            animals.put(splitted_strings[0], splitted_strings[1]);
        }
        for(Map.Entry entry : animals.entrySet()) 
            System.out.println(entry.getValue() + " " + entry.getKey());
    }
} 
```

并使用animals.txt：

```
key1    value1
key2    value2
key3    value3
key4    value4 
```

输出是：

```
value4 key4
value3 key3
value2 key2
value1 key1 
```

根本没有“索引”的迹象。所以要么这不是你真正的人口代码（除了编译错误），要么你的文本文件对每个值都有“索引”......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T02:45:30.120

作为使用 Guava 的替代方法，您可以基于`Map<String,Set<String>>`.

添加键值对时，首先检查键是否已经存在。如果没有，请将其与仅包含新值的 Set 放在一起。如果键已经存在，则获取其 Set 并添加新值。

要检查是否存在一对，请获取键的 Set 并查看它是否包含该值。

# heroku - Heroku 上 Neo4j REST url 的“错误 401 未经授权”

> ID：15260994
> 
> 赞同：1
> 
> 时间：2013-03-07T00:37:18.623
> 
> 标签：heroku, neo4j, spring-data-neo4j

我正在使用正确的`NEO4J_URL`环境变量，如`heroku config`. 如果我通过浏览器使用相同的 neo4j url，它可以正常工作（没有身份验证失败）。但是，我的应用程序无法以 heroku 上的以下错误开始。（我正在使用 spring-data-neo4j）

URL 看起来像`http://username:password@123456ac6.hosted.neo4j.org:1234/db/data/`. 尝试在末尾不使用“/db/data”，也尝试使用和不使用斜杠。没有帮助。

如果有人已经遇到/解决了这个问题，请提供帮助。服务器启动时的堆栈跟踪：

```
←[36m2013-03-06T23:44:31+00:00 app[web.1]:←[0m Caused by:
←[36m2013-03-06T23:44:31+00:00 app[web.1]:←[0m  at org.neo4j.rest.graphdb.index.RestIndexManager.existsForNodes(RestIndexManager.java:45)
←[36m2013-03-06T23:44:31+00:00 app[web.1]:←[0m java.lang.RuntimeException: Error reading as JSON '<html>|<head>|<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>|<tit
le>Error 401 UNAUTHORIZED</title>|</head>|<body><h2>HTTP ERROR 401</h2>|<p>Problem accessing /db/data/index/node. Reason:|<pre>    UNAUTHORIZED</pre></p><hr /><i><small>Powered by Jetty://</
small></i><br/>                                                |<br/>                                                |<br/>                                                |<br/>
                                   |<br/>                                                |<br/>                                                |<br/>
       |<br/>                                                |<br/>                                                |<br/>                                                |<br/>
                                 |<br/>                                                |<br/>
←[36m2013-03-06T23:44:31+00:00 app[web.1]:←[0m  at org.neo4j.rest.graphdb.util.JsonHelper.jsonToSingleValue(JsonHelper.java:62)
←[36m2013-03-06T23:44:31+00:00 app[web.1]:←[0m  at org.neo4j.rest.graphdb.RequestResult.toEntity(RequestResult.java:114)
←[36m2013-03-06T23:44:31+00:00 app[web.1]:←[0m                      |<br/>                                                |<br/>                                                |<br/>
                                        |<br/>                                                |<br/>                                                |<br/>
            |<br/>                                                ||</body>|</html>|'
←[36m2013-03-06T23:44:31+00:00 app[web.1]:←[0m  at org.neo4j.rest.graphdb.RequestResult.toMap(RequestResult.java:120)
←[36m2013-03-06T23:44:31+00:00 app[web.1]:←[0m  at org.neo4j.rest.graphdb.util.JsonHelper.readJson(JsonHelper.java:57)
←[36m2013-03-06T23:44:31+00:00 app[web.1]:←[0m  at org.neo4j.rest.graphdb.index.RestIndexManager.indexInfo(RestIndexManager.java:50)
←[36m2013-03-06T23:44:31+00:00 app[web.1]:←[0m  at org.springframework.data.neo4j.support.typerepresentation.TypeRepresentationStrategyFactory.chooseStrategy(TypeRepresentationStrategyFactor
y.java:56)
←[36m2013-03-06T23:44:31+00:00 app[web.1]:←[0m  at org.neo4j.rest.graphdb.ExecutingRestAPI.indexInfo(ExecutingRestAPI.java:327)
←[36m2013-03-06T23:44:31+00:00 app[web.1]:←[0m  at org.springframework.data.neo4j.config.Neo4jConfiguration$$EnhancerByCGLIB$$36bc2a37.CGLIB$typeRepresentationStrategyFactory$7(<generated>)
←[36m2013-03-06T23:44:31+00:00 app[web.1]:←[0m  at org.springframework.data.neo4j.rest.SpringRestGraphDatabase.getIndex(SpringRestGraphDatabase.java:100 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T04:42:05.707

As suggested by @MichaelHunger I used other `SpringRestGraphDatabase` Constructor which takes username and password as separate parameters, now the neo database is accessible.

My earlier spring context looked like this

```
<bean id="graphDatabaseService" class="org.springframework.data.neo4j.rest.SpringRestGraphDatabase">
    <constructor-arg index="0" value="${NEO4J_URL}" />
</bean> 
```

Now I changed it to as below and everything works fine! Here I provide the username and password via two additional environment variables. Yes, there is a little manual work in terms of setting username and password environment variables on heroku(or less preferably, you can hard code the same in your application). This is in addition to the NEO4J_URL environment variable automatically available after adding neo4j heroku add-on.

```
<bean id="graphDatabaseService" class="org.springframework.data.neo4j.rest.SpringRestGraphDatabase">
    <constructor-arg index="0" value="${NEO4J_URL}" />
    <constructor-arg index="1" value="${NEO4J_USERNAME}" />
    <constructor-arg index="2" value="${NEO4J_PASSWORD}" />
</bean> 
```

Thanks @MichaelHunger!

# php - php 中的时区更新提前 11 小时

> ID：15260995
> 
> 赞同：-3
> 
> 时间：2013-03-07T00:37:20.813
> 
> 标签：php

我是新来的，没有 PHP 方面的知识。无论如何，我有一个网站，它显示从 XML 提要提供程序自动更新的体育比赛实时比分数据。问题是，应该在上午 12 点更新“今天的比赛”，但它会在晚上 11 点更新。以另一种方式，它显示昨天的比赛直到第二天晚上 11 点，我想在当前更新时间前 11 小时更新。这是代码：

```
<?php
    ob_start();
    include('header.php');
    $flagged1 = 0;
    $flagged2 = 0;
    if (isset($_GET["date"]) and $_GET["date"] != "")
    {
        $dtShow = $_GET["date"];
        if ($dtShow == "tomorrow")
        {
            $yest = date("y-m-d", time() + (60 * 60 * 48));
            $time = date("y-m-d", time() + (60 * 60 * 24));
        }
        else if ($dtShow == "yest")
        {
            $yest = date("y-m-d", time());
            $time = date("y-m-d", time() - (60 * 60 * 24));
        }
        else
        {
            $yest = $_GET["date"]." 00:00:00";
            $newDate = strtotime($yest);
            $yest = date('y-m-d', $newDate);
            $time = date("y-m-d", $newDate - (60 * 60 * 24));
        }
    }
    else
    {
        $yest = date("y-m-d", time() + (60 * 60 * 24));
        $time = date("y-m-d", time());
    }
?> 
```

注意：更具体地说，该站点由 Dreamhost 托管（美国时间），我的当地时间是 UTC +3。任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T00:43:04.087

如果服务器配置不匹配，则强制执行您需要的时区（通常，始终强制执行您需要的设置是一个好习惯，以避免服务器设置更改时出现问题）。date_default_timezone_set [()](http://www.php.net/manual/en/function.date-default-timezone-set.php)和[date_timezone_set()](http://www.php.net/manual/en/function.date-timezone-set.php)之类的函数可能就是您所需要的。

顺便说一句：“美国时间”？没有这样的事情。