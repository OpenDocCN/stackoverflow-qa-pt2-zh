# StackOverflow 问答 14848000-14848999

# android - 没有为我的应用程序创建 Android R.java 文件

> ID：14848000
> 
> 赞同：0
> 
> 时间：2013-02-13T06:49:02.997
> 
> 标签：android, r.java-file

我正在我的 Eclipse 中创建新的 Android 应用程序。应用程序已创建但 R.java 文件未创建，我收到错误 R 无法解决。

我的 android-sdk 有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:58:35.873

尝试 Clean and Build 如果它不起作用，请关闭 eclipse 并再次打开它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:53:50.743

您可以尝试以下内容。

1）在`project`选项卡（顶部栏）有一个**干净**的选项试试，*如果你的代码很好，它将重新生成 R.java 文件*

2）如果您导入`import android.R.*`了语句，请将其删除，您应该添加 your.project.name.R.* 代替；

*3)你的 xml 文件中*可能有错误，检查`error viewer`它应该`errors`在那里显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:54:40.440

检查这个。`import android.R;`你有没有在你的项目中导入。如果有意味着**删除**这个`import android.R;`。清理并重建您的项目

```
import android.R; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T06:54:58.553

[我的项目中没有生成 R.java 文件](https://stackoverflow.com/questions/4085959/no-generated-r-java-file-in-my-project)。 [R.Java 未生成](https://stackoverflow.com/questions/8318290/r-java-not-generated)。 [R.java 文件未生成](https://stackoverflow.com/questions/11869307/r-java-file-not-getting-generated)。

当您清理和构建项目时，R.java 会自动生成。试试上面的链接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T06:59:50.617

有2种方法可以解决这个问题：

> 1）在项目资源管理器中，右键单击您的项目，然后转到构建项目
> 
> 2）在项目选项卡中转到清理选项，如果您的代码很好，它将重新生成 R.java 文件

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T07:18:12.013

清理你的项目并重试它会帮助你

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-26T00:28:10.543

从 Eclipse 菜单栏；

使能够`Project -> Built -> Built Automatically`

# google-apps-script - 如何将脚本仅应用于谷歌电子表格中的一张工作表

> ID：14848006
> 
> 赞同：5
> 
> 时间：2013-02-13T06:49:23.353
> 
> 标签：google-apps-script, google-sheets

我有一个谷歌电子表格，里面有两张叫做 Robin 和 Lucy 的工作表。每次我将一些数据添加到 A 列时，我都制作/找到/修改了一个脚本来对工作表上的数据进行排序

```
function onEdit(event){

  var sheet = event.source.getActiveSheet();
  var editedCell = sheet.getActiveCell();

  var columnToSortBy = 1;
  var tableRange = "a2:I30";
    if(editedCell.getColumn() == columnToSortBy){   
   var range = sheet.getRange(tableRange);
   range.sort( { column : columnToSortBy } );
  }
} 
```

这个脚本很好用，但我只希望它应用在第一张纸上，罗宾。第二张表中的数据，露西，是不一样的，所以我要为那个不同的范围创建另一个脚本，一旦我解决了这个问题。

我想我需要使用 getSheetByName("Robin") 但我似乎无法让它工作。提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T08:02:44.270

您可以将整个函数置于这样的条件下：

```
function onEdit(event){

  var sheet = event.source.getActiveSheet();
  if(sheet.getName()=='Robin'){
  var editedCell = sheet.getActiveCell();

  var columnToSortBy = 1;
  var tableRange = "a2:I30";
    if(editedCell.getColumn() == columnToSortBy){   
   var range = sheet.getRange(tableRange);
   range.sort( { column : columnToSortBy } );
  }
}
} 
```

或者如果条件为假，您也可以返回，如下所示

```
...
  var sheet = event.source.getActiveSheet();
  if(sheet.getName()!='Robin'){return}
... 
```

两种方法都将以相同的方式工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-01T01:53:58.537

将接收到的[事件对象](https://developers.google.com/apps-script/guides/triggers/events#edit)转发`onEdit`到处理所需工作表上的事件的特定函数。

```
function onEdit(event) {
    var name = event.range.getSheet().getName();
    switch (name) {
      case "Robin":
        updateRobin(event);
        break;
      case "Lucy":
        updateLucy(event);
        break;
    }
}

function updateLucy(event) {
    // Code designed to handle edits to the "Lucy" sheet.
}

function updateRobin(event) {
    // Code designed to handle edits to the "Robin" sheet.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T09:38:11.387

我还建议替换这一行： var tableRange = "a2:I30"; 用这个： var tableRange = sheet.getDataRange();

随着范围的扩大， getDataRange() 返回的范围将进行调整以适应它。无需使用硬编码地址，使代码更灵活

仅供参考：我在这里找到了一些有用的例子：

[http://www.javascript-spreadsheet-programming.com](http://www.javascript-spreadsheet-programming.com)

# javascript - JavaScript：如何在内容页面内引用用户控件？

> ID：14848007
> 
> 赞同：0
> 
> 时间：2013-02-13T06:49:50.063
> 
> 标签：javascript

这是我的结构：

母版页 -> 内容页 -> 用户控件 -> Telerik 网格及其上下文菜单、隐藏字段。

这意味着：母版页包含内容页，内容页包含用户控件，用户控件包含 Telerik 网格及其上下文菜单和隐藏字段。

我通过单击 Telerik 网格上下文菜单中的选项打开弹出窗口。在该弹出窗口的组合框中选择某个选项后，我按确定并关闭它。但我不知道如何使用 Telerik 网格和隐藏字段来引用应该是用户控制的开启器。我想将隐藏字段设置为某个值。

这是我使用的 JavaScript 代码：

```
<script language="javascript" type="text/javascript">
    function ReturnValue() {
        var choice = document.getElementById("DropDownList1").value;
        if ((window.opener != null) && (!window.opener.closed)) {
            window.opener.document.getElementById("HiddenField1").value = choice;
        }
        window.close();
    }
</script> 
```

但是，它在这一行失败了，因为 opener 是母版页：

```
window.opener.document.getElementById("HiddenField1").value = choice; 
```

那么，我怎样才能让它工作呢？

# c# - 无法将日期时间转换为字符串

> ID：14848009
> 
> 赞同：0
> 
> 时间：2013-02-13T06:49:58.203
> 
> 标签：c#, entity-framework

我有一个包含一些日期的数据库，我想获取它们并将它们转换为字符串 [] 以在图表中使用。

```
 var Yaxis = db.Graphs
                    .Where(x => x.Node.Contains(Node))
                    .Select(x => x.Dates)
                    .ToArray();

        var data = new string[Yaxis.Length];
        for (int i = 0; i < Yaxis.Length ; i++)
        {
            data[i] = Yaxis[i].ToString;
        } 
```

.ToString 不适用于“非委托类型”错误。我不知道将数组解析为字符串 [] 的任何其他方法。

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T06:50:33.357

```
data[i] = Yaxis[i].ToString(); 
```

当您不包含括号时，编译器将假定您正在谈论**function** `ToString`，而您实际上是在谈论返回值。

当您谈论函数本身时，它被称为委托（类似于 C/C++ 中的函数指针），它解释了您遇到的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T06:53:26.467

正如 Antonijn 发布的那样，直接的问题是您在使用`ToString`时没有实际调用该方法。

但是，您可以通过在 LINQ 中执行它来做得比这更好：

```
var data = db.Graphs
             .Where(x => x.Node.Contains(Node))
             .Select(x => x.Dates.ToString())
             .ToArray(); 
```

请注意，我们在`ToString()`这里调用投影。如果这不能给出您想要的结果（例如，因为它在数据库中执行转换），您可以将其拆分为两个`Select`调用，其中一个`AsEnumerable`调用强制第二个调用在本地执行：

```
var data = db.Graphs
             .Where(x => x.Node.Contains(Node))
             .Select(x => x.Dates)
             .AsEnumerable()
             .Select(x => x.ToString())
             .ToArray(); 
```

当然，这将使用`DateTime`当前文化中的默认字符串表示。您可能需要考虑指定[标准](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)或[自定义](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)日期/时间格式字符串来更改输出格式，甚至可能是不同的文化……这取决于您将如何处理数据。

所有这些都假设您不需要`Yaxis`其他任何东西。如果你*确实*需要`Yaxis`，你仍然可以使用 LINQ 来简化你的代码：

```
var data = Yaxis.Select(x => x.ToString()).ToArray(); 
```

# android - 相机无法在实际设备上工作

> ID：14848015
> 
> 赞同：0
> 
> 时间：2013-02-13T06:50:19.497
> 
> 标签：android, android-camera

我已经在我的应用程序中集成了相机。当我在模拟器上运行并且我在 ADB 中选择网络摄像头作为我的摄像头时，以下代码工作正常。但是当我在 Nexus 7 等实际设备上运行时，我的应用无法检测到相机。相机在这款平板电脑上独立工作，但在我的应用程序中却不行。

CameraActivity.java

```
 //I've imported hardware camera class
   import android.hardware.Camera;
   import android.hardware.Camera.CameraInfo;

  // Some activity code
    if (!getPackageManager().
      hasSystemFeature(PackageManager.FEATURE_CAMERA)) { // Issue is coming from here. 
      Toast.makeText(this, "No camera on this device", Toast.LENGTH_LONG)
          .show();
    } else {
      cameraId = findFrontFacingCamera();
      if (cameraId < 0) {
        Toast.makeText(this, "No front facing camera found.",
            Toast.LENGTH_LONG).show();
      } else {
        camera = Camera.open(cameraId);
      }
    } 
```

Mainfest.xml

```
 <uses-permission android:name="android.permission.INTERNET" />
  <uses-permission android:name="android.permission.CAMERA"/>
  <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" >
  </uses-permission>

  <uses-feature android:name="android.hardware.camera" />
  <uses-feature android:name="android.hardware.camera.autofocus" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:23:44.793

在此处进行更改

尝试检查：

> hasSystemFeature(PackageManager.FEATURE_CAMERA_FRONT)

反而：

> hasSystemFeature（PackageManager.FEATURE_CAMERA）

Nexus 7 只有前置摄像头。

Android 摄像头选择算法默认为后置摄像头。

# php - 从 mySQL 中检索数据并在 PopUp 中显示

> ID：14848018
> 
> 赞同：-2
> 
> 时间：2013-02-13T06:50:37.377
> 
> 标签：php, javascript, jquery, mysql

我正在使用 PHP 从 mySQL 中检索数据并能够显示它，例如列表项中的职位。并希望在单击时在弹出窗口中显示工作技能和描述。每个职位都有独特的技能和描述。请帮我...

示例代码：

```
<?php

//including the database connection file
include_once("includes/db.php");

// Get all the data from the table
$result = mysql_query("SELECT * FROM job_posting ORDER BY id DESC") or die(mysql_error());  

echo "<ul>";
// keeps getting the next row until there are no more to get
while($row = mysql_fetch_array($result)) {
    // Print out the contents of each row into a table
    echo "<li> <a href='post_resume.php?id=".base64_encode($row['id'])."'>" . $row['title'] . "</a></li>";
}
echo "<ul>";

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:05:00.327

参考：http: [//jqueryui.com/dialog/](http://jqueryui.com/dialog/)

在你的 li 里面放一个 div 。

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
          <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
          <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>

      <script>
      $(function() {
        $( ".dialog" ).dialog({ autoOpen: false });
      });
      </script>
<body>

 <ul>   
  <li>   
    <div class="dialog" title="SOME TEXT">
      <p>

                     JOB SKILLS AND DESCRIPTION

       </p>
    </div>    </li>  </ul>  </body> 
```

# android - 将音频文件的资源名称转换为资源id

> ID：14848026
> 
> 赞同：1
> 
> 时间：2013-02-13T06:51:02.350
> 
> 标签：android, android-resources

我的应用程序从 xml 文件中读取指令并执行它们。其中一项说明是要播放的音频文件名。我的 xml 可能包含 sring @raw/filename 或您建议的任何内容。现在，一旦我在我的应用程序中阅读它，我如何将其转换为可与 PediaPlayer 对象一起使用的资源 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:05:50.547

利用

```
res = getResources().getIdentifier("filename without extension", "raw",packageName); 
```

raw 是它也可以是`String`或其他的资源类型。您可以使用`getPackageName()`for packagename 然后简单

```
mp = MediaPlayer.create(context, res);
mp.start(); 
```

# c# - 如何在aspx代码后面访问用户控件控件

> ID：14848031
> 
> 赞同：4
> 
> 时间：2013-02-13T06:51:35.800
> 
> 标签：c#, asp.net

我在我的项目中创建了一个带有选项卡容器的用户控件。由于禁用某些选项卡，我想从 aspx 页面访问选项卡容器。例如，我需要从 aspx 页面动态隐藏第一个选项卡和第三个选项卡。因为我对不同的页面使用相同的用户控件。请帮我解决这个问题。

```
<%@ Register TagPrefix="cust" TagName="Creation" Src="~/Cust_Creation.ascx" %>
<div>
   <cust:Creation ID="uc_more_pack" runat="server" />
</div> 
```

一世

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:59:33.180

在您的用户控件上添加一个公共方法，该方法可通过使用您的用户控件的页面或控件进行访问。此方法可以采用您想要确定子选项卡容器状态的任何参数。

```
public void SetTabStatuses (bool tab1Enabled, bool tab2Enabled...){/* set status here */} 
```

或者

```
public void SetTabStatuses (SomeStatusEnum status) {/* set status here */} 
```

将用户控件视为对象，您添加到其中的控件应视为该对象上的字段。我建议的方法是允许您封装他们的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:32:16.683

在用户控件上创建公共属性：例如。

```
 public bool ShowTab1 {get; set;}
 public bool ShowTab2 {get; set;}
 public bool ShowTab3 {get; set;}
 public bool ShowTab4 {get; set;} 
```

然后从 .aspx.cs 页面设置：

```
protected void Page_Load(object sender, System.EventArgs e)
{
  usercontrol1.ShowTab1 = false;
  usercontrol1.ShowTab2 = true;
  usercontrol1.ShowTab3 = false;
  usercontrol1.ShowTab4 = true;
} 
```

使用该属性设置 UserControl 中的控件：

```
protected void Page_Load(object sender, System.EventArgs e)
{
  Tab1.Visible = ShowTab1;
  Tab2.Visible = ShowTab2;
  Tab3.Visible = ShowTab3;
  Tab4.Visible = ShowTab4;
} 
```

# ios - 如何使用Json arry 到UITableview

> ID：14848036
> 
> 赞同：0
> 
> 时间：2013-02-13T06:51:59.377
> 
> 标签：ios, uitableview

我正在使用以下`JSON`值，我需要将此值显示为`UITableview`。

请帮我。

```
{"id":"58","appVersionId":"1102","averageRating":"4.0","reviews":{"reviews":[{"id":"58","userId":"1","reviewTitle":"Good application","reviewText":"nice","rating":"4.0","createdDate":"2013-02-11T00:00:00+08:00"},{"id":"102","userId":"252","reviewTitle":"Good","rating":"4.0","createdDate":"2013-02-13T00:00:00+08:00"}]}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:13:04.920

[从链接](https://github.com/stig/json-framework/)下载 SBJSon 库

导入这些文件

```
 #import "JSON.h"

 #import "SBJsonParser.h"

jsonurl=[NSURL URLWithString:@"http://sample.com/sample.php"]; //NSUrl declared in .h

jsondata=[[NSString alloc]initWithContentsOfURL:jsonurl encoding:NSUTF8StringEncoding error:&error];//NSData 
jsonarray=[[NSMutableArray alloc]init]; //NSmutableArray

self.jsonarray=[jsondata JSONValue];

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

{
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
     UILabel *description=[[UILabel alloc]initWithFrame:CGRectMake(5, 0, 210,44 )];
     description.text=[NSString stringWithFormat: @"%@",[[jsonarray objectAtIndex:indexPath.row] valueForKey: @"id"]];
     [description setFont:[UIFont systemFontOfSize:14]];
     description.backgroundColor=[UIColor clearColor];
     description.textColor=[UIColor whiteColor];
     // description.textColor=[UIColor colorWithRed:79.0f/255.0f green:66.0f/255.0f blue:55.0f/255.0f alpha:1];
     description.numberOfLines=3;
     [cell.contentView addSubview:description];
}

return cell;

 } 
```

希望这可以帮助！！！

# tridion - 如何在 Tridion 中获取所选项目的 itemxml

> ID：14848041
> 
> 赞同：5
> 
> 时间：2013-02-13T06:52:28.440
> 
> 标签：tridion, tridion-2011

我想从 Tridion CME获取并显示**所选项目的 itemxml 。**

当我在浏览器中提供 tcm id 时，我能够从我的 VM 服务器获取 Itemxml。

但是，我想从 Tridion GUI Extension 获得相同的信息。

我能够获得选定的项目 tcm id。有什么方法可以使用**coreservice**获取 itemxml吗？

还是有其他方法可以得到这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T07:58:44.430

目前，您无法通过核心服务获取 Item XML。您看到的项目 XML 是由 TCM 协议处理程序提供给您的，在未来的版本中可能不存在。如果您想在 CME 中显示项目 XML - 请查看 Yoaw 的此扩展：

[http://sdltridionworld.com/articles/sdltridion2011/tutorials/GUIextensionIn8steps.aspx](http://sdltridionworld.com/articles/sdltridion2011/tutorials/GUIextensionIn8steps.aspx)

另外，请记住，并非项目的所有属性都可能在 Xml 中公开，有时您在 Data 对象中有更多信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T11:59:59.383

查看 PowerTools，它有一个 ItemXML 查看器（由 Robert Curlette 编写），用于查看 SDL Tridion 中的所有项目

[http://code.google.com/p/tridion-2011-power-tools/wiki/ItemXML](http://code.google.com/p/tridion-2011-power-tools/wiki/ItemXML)

XML 使用 JavaScript 加载到选项卡上，如下所示：

```
ItemXmlTab.ItemXmlTab.prototype.updateView = function ItemXmlTab$updateView()
{
    if (this.isSelected()) 
    {
        var xslPath = $ptUtils.expandPath("/PowerTools/Client/ItemXml/ItemXmlTab.xslt", true);

        $xml.loadXsltProcessor(xslPath, function (value) 
        {
            var xmlSource = $display.getItem().getXml();

            // Filter out all spacing characters
            xmlSource = xmlSource.replace(/\t|\n|\r/g, "");

            var html = $xml.xsltTransform(value, $xml.getNewXmlDocument(xmlSource), null);

            $dom.setOuterHTML($("#itemXml"), html);
        });        
    }
}; 
```

[您可以在http://code.google.com/p/tridion-2011-power-tools/source/browse/#svn%2Ftrunk%2FPowerTools.Editor%2FPowerTools%2FClient%2FItemXml%253Fstate](http://code.google.com/p/tridion-2011-power-tools/source/browse/#svn%2Ftrunk%2FPowerTools.Editor%2FPowerTools%2FClient%2FItemXml%253Fstate%253Dclosed)查看扩展的源代码[%253D关闭](http://code.google.com/p/tridion-2011-power-tools/source/browse/#svn%2Ftrunk%2FPowerTools.Editor%2FPowerTools%2FClient%2FItemXml%253Fstate%253Dclosed)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T11:05:56.057

您可以通过 CoreService 获取项目 XML，但这将为您提供 Tridion R6 (2011) Xml 格式，这与您之前看到的不同。

[此处](http://code.google.com/p/tridion-practice/wiki/GettingTridionXmlFromCoreService)提供示例代码。

我倾向于在我的 Tcm 服务器上有一个页面“GetItemXml.aspx”，然后我使用 Uri 作为参数调用该页面，然后该页面将返回 Item Xml。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T06:50:05.227

Yoav Niran 撰写的文章（user978511 帖子中的 URL）非常适合您的要求。

如果您仍然面临任何问题并急于让它工作，只需执行以下步骤 -

1-下载[扩展](http://sdltridionworld.com/community/2011_extensions/ItemXmlDisplay.aspx)。

2- 应用本文的步骤 7 和 8 [来](http://sdltridionworld.com/articles/sdltridion2011/tutorials/GUIextensionIn8steps.aspx)配置此扩展。

# android - 从命令行 IDE 运行 NDK 本机活动示例

> ID：14848042
> 
> 赞同：1
> 
> 时间：2013-02-13T06:52:33.430
> 
> 标签：android, android-ndk

有人问过类似的问题：

[如何运行 NDK 示例？](https://stackoverflow.com/questions/9779368/how-to-run-ndk-samples)

[使用 NativeActivity 制作 Android NDK 应用程序？](https://stackoverflow.com/questions/7681822/making-android-ndk-apps-with-nativeactivity)

我的[命令行](http://developer.android.com/tools/projects/projects-cmdline.html)文档可以创建一个空的 Android 项目，我不知道如何在非 Eclipse 构建环境中构建-安装-运行 NDK 示例，尤其是[NativeActivity](http://developer.android.com/reference/android/app/NativeActivity.html)示例（ Ubuntu 10.0.04）。

所以我的问题是

1.  NativeActivity 示例是否“正常工作”或者除了 just 之外你还需要做些什么`$adb -d shell "am start -a android.intent.action.MAIN -n com.example.nativeActivity"`吗？
2.  您如何构建、安装、运行[NativeActivity](http://developer.android.com/reference/android/app/NativeActivity.html)示例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T09:47:22.037

我无法回答这个具体的例子。但这里是构建和安装使用 NDK 的 Android 应用程序的一般过程。

1.  `cd`到其源代码的根目录。
2.  运行`ndk-build`。这将构建本机代码，并应导致将一些`.so`文件放入`libs`目录中。
3.  `android update project --path . --name something`
4.  `ant debug`（或类似的）。这将构建 Java 代码并创建一个 .apk。至关重要的是，构建过程将拾取目录中`.so`留下的文件`libs`并将它们包含到 .apk 中。
5.  `adb install bin/name-of-project.apk`
6.  然后使用 Android GUI 或使用`am start`您提供的命令正常启动。

# java - MyBatis+Redis 缓存。是否可以？

> ID：14848044
> 
> 赞同：0
> 
> 时间：2013-02-13T06:52:43.837
> 
> 标签：java, spring, caching, redis, mybatis

我有一个小项目只是为了检查一切是如何工作的。我已经实现了 MyBatis 的使用并且该项目正常工作，我能够从数据库中检索一些数据。但现在我需要第二次缓存结果。我已经在 spring 中将 redis 测试为嵌入式缓存管理器（缓存抽象：[http](http://static.springsource.org/spring-data/data-redis/docs/current/reference/html/redis.html) : //static.springsource.org/spring-data/data-redis/docs/current/reference/html/redis.html 和 liker here ：[http ://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html](http://static.springsource.org/spring/docs/3.1.0.M1/spring-framework-reference/html/cache.html)）。我已经实现了一切并缓存了一种方法。但！！！我真的不明白它是否被缓存。第一次标记方法的时候，redis说db有变化，保存了。。后来改了key，也没啥变化。。。怎么理解，方法是缓存了还是没缓存?? 我会在这里放一些代码让你理解我在做什么。

弹簧上下文：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:cache="http://www.springframework.org/schema/cache"
       xmlns:c="http://www.springframework.org/schema/c"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:redis="http://www.springframework.org/schema/redis"
       xmlns:context="http://www.springframework.org/schema/context" 
       xmlns:jdbc="http://www.springframework.org/schema/jdbc" 
       xmlns:tx="http://www.springframework.org/schema/tx" 
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd 
       http://www.springframework.org/schema/context 
       http://www.springframework.org/schema/context/spring-context-3.1.xsd 
       http://www.springframework.org/schema/jdbc 
       http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd 
       http://www.springframework.org/schema/tx 
       http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
       http://www.springframework.org/schema/redis http://www.springframework.org/schema/redis/spring-redis.xsd
       http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd   
        ">

    <jdbc:embedded-database id="dataSource" type="H2"> 
        <jdbc:script location="file:src/main/java/schema.sql" /> 
        <jdbc:script location="file:src/main/java/test-data.sql" />
    </jdbc:embedded-database>

    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" /> 
    </bean>

    <tx:annotation-driven />

    <context:component-scan base-package="com.mycompany.mybatisproject.serviceimpl" />

    <!-- Define the SqlSessionFactory --> 
    <bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean"> 
        <property name="dataSource" ref="dataSource" />
        <property name="mapperLocations" value="file:src/main/java/com/mycompany/mybatisproject/persistence/ContactMapper.xml" />
        <property name="typeAliasesPackage" value="com.mycompany.mybatisproject.data" /> 
    </bean>

    <!-- classpath*:com/mycompany/mybatisproject/persistence/*.xml -->

    <!-- Scan for mappers and let them be autowired -->
    <bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
        <property name="basePackage" value="com.mycompany.mybatisproject.persistence" />
        <property name="sqlSessionFactory" ref="sqlSessionFactory" />
    </bean>

    <bean id="jedisConnectionFactory" class="org.springframework.data.redis.connection.jedis.JedisConnectionFactory"
    p:host-name="localhost" p:port="6379" />

    <bean id="redisTemplate" class="org.springframework.data.redis.core.RedisTemplate">
    <property name="connectionFactory" ref="jedisConnectionFactory" />
    </bean>

    <cache:annotation-driven />

    <bean id="cacheManager" class="org.springframework.data.redis.cache.RedisCacheManager" 
        c:template-ref="redisTemplate" />

</beans> 
```

服务实施：

```
@Service("contactService")
@Repository
@Transactional
public class ContactServiceImpl implements ContactService {

    private Log log = LogFactory.getLog(ContactServiceImpl.class);

    @Autowired
    private ContactMapper contactMapper;

    @Cacheable("pacan")
    @Transactional(readOnly=true)
    public List<Contact> findAll() {
        List<Contact> contacts = contactMapper.findAll();
        return contacts;
    }
} 
```

ContactMapper.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mycompany.mybatisproject.persistence.ContactMapper">

    <resultMap id="contactResultMap" type="Contact">
        <id property="id" column="ID" />
        <result property="firstName" column="FIRST_NAME" />
        <result property="lastName" column="LAST_NAME" /> 
        <result property="birthDate" column="BIRTH_DATE" />
    </resultMap>

    <select id="findAll" resultMap="contactResultMap">
        SELECT ID, FIRST_NAME, LAST_NAME, BIRTH_DATE 
        FROM CONTACT
    </select> 
```

最后是主要课程：

```
public class App {

    private static void ListContacts(List<Contact> contacts) {
        System.out.println("");
        System.out.println("Listing contacts without details: ");
        for (Contact contact : contacts) {
            System.out.println(contact);
            System.out.println();
        }
    }

    public static void main( String[] args ) {
        GenericXmlApplicationContext ctx = new GenericXmlApplicationContext();
        ctx.load("file:src/main/java/app-context.xml");
        ctx.refresh();

        ContactService contactService = ctx.getBean("contactService", ContactService.class);

        List<Contact> contacts;
        contacts = contactService.findAll(); 
        ListContacts(contacts);
    }    
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:03:04.830

您正在缓存 ContactServiceImpl.findAll 方法的调用。出于测试目的，您可以在 findAll 方法中添加 System.out.println("Method invoked") 。如果缓存有效，则 findAll 方法的主体应仅调用一次，下一次调用应从缓存中读取值（结果），因此您不应在控制台上看到“方法调用”。

不要使用 Spring 3.1.0.M1 文档，它与 3.1.0.RELEASE 不同：[http ://static.springsource.org/spring/docs/3.1.0.RELEASE/spring-framework-reference/html/cache .html](http://static.springsource.org/spring/docs/3.1.0.RELEASE/spring-framework-reference/html/cache.html)。

# mdx - 将参数传递给 MDX 查询的最佳方式

> ID：14848047
> 
> 赞同：1
> 
> 时间：2013-02-13T06:52:58.240
> 
> 标签：mdx

将参数传递给 MDX 查询的最佳方式？我试图找出可用于处理不同参数的多种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:30:02.793

您可以使用[**StrToMember**](http://msdn.microsoft.com/en-us/library/ms146022.aspx)或[**StrToValue**](http://msdn.microsoft.com/en-us/library/ms144951.aspx)。

# java - 声纳 CPD 检测块重复

> ID：14848048
> 
> 赞同：4
> 
> 时间：2013-02-13T06:53:11.747
> 
> 标签：java, sonarqube, cpd

我已经对声纳 cpd 如何检测重复块进行了很多分析。但我无法准确触发检测块或代码行所需的过程。是否有任何最小行数。

例如，如果我写如下，即使我重复超过 20 次，它也没有检测到任何代码重复。

```
 System.out.println("this is good");
        System.out.println("this is good");

        System.out.println("this is good");
        System.out.println("this is good");

        System.out.println("this is good");

        System.out.println("this is good");

        System.out.println("this is good");

        System.out.println("this is good");

        System.out.println("this is good");

        System.out.println("this is good"); 
```

后来我试着给块重复

```
 try
    {
    connection = null;
    }
    catch(Exception e){
        e.printStackTrace();
    }
    try
    {
    connection = null;
    }
    catch(Exception e){
        e.printStackTrace();
    }
    try{
    connection = null;
    }
    catch(Exception e){
        e.printStackTrace();
    }
    try{
    connection = null;
    }
    catch(Exception e){
        e.printStackTrace();
    } 
```

在这里它被视为两个块，即使它有很多块。

请让我知道声纳 3.4.1 在此重复检测中遵循的确切过程

在这个 [http://docs.sonarsource.org/3.1/apidocs/src-html/org/sonar/plugins/cpd/SonarEngine.html](http://docs.sonarsource.org/3.1/apidocs/src-html/org/sonar/plugins/cpd/SonarEngine.html)

我发现一个恒定的块大小为 10。但我能够在我的观察中将其联系起来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:02:45.937

块是平衡大括号之间的代码行。恒定的块大小意味着在块中必须有 10 行代码才能匹配。所以要复制试试这个。

```
public void foo(){
//... 10 lines of code
}

private void bar(){
//.... the same 10 lines of code
} 
```

# java - 用于连接两个单独查询的备用查询

> ID：14848052
> 
> 赞同：1
> 
> 时间：2013-02-13T06:53:32.103
> 
> 标签：java, sql, sql-server, hive, teradata

我可以将`q1`和`q2`合并到一个查询中吗？

我需要 Hive 中的替代查询。

```
SELECT q3.*
FROM   (
           (
               SELECT prod_id,
                      prod_name,
                      cust_id
               FROM   sell_info
               GROUP BY
                      prod_id,
                      prod_name,
                      cust_id
           )q1
           JOIN
           (
               SELECT cust_name,
                      cust_address
               FROM   cust_info
               WHERE  cust_type LIKE 'Reg%'
           )q2
           ON q1.cust_id = q2.cust_id
       ) q3; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:56:36.230

您可以直接使用`JOIN`这两个表`cust_info`而不`sell_info`需要子查询，如下所示：

```
Select DISTINCT *
FROM sell_info AS s
INNER JOIN cust_info AS c ON s.cust_id = c.cust_id
WHERE c.cust_type like 'Reg%'; 
```

**请注意：**不需要`GROUP BY prod_id, prod_name, cust_id`，同时您只选择*这*三列：

```
 SELECT prod_id,
          prod_name,
          cust_id
   FROM   sell_info
   GROUP BY
          prod_id,
          prod_name,
          cust_id 
```

这只需使用`DISTINCT`关键字即可实现，而无需`GROUP BY`. `DISTINCT`消除了由于`JOIN`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:56:54.977

如果您只想查看`cust_is`两个表中都存在的客户和产品数据，则可以使用内部联接。

```
Select prod_id,
       prod_name,
       cust_info.cust_id,
       cust_name,
       cust_address 
from  sell_info inner join cust_info 
      on sell_info.cust_id=cust_info.cust_id 
where cust_type LIKE 'Reg%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T16:12:33.380

使用内部连接的第一个答案是正确的。

如果您想要更快的查询，您可以使用 Intersect 如下：

select cust_id FROM sell_info 相交 select cust_id FROM cust_info;

它的速度是内部连接的两倍，但唯一的缺点是您只能获取两个表中共有的字段。如果您需要其他字段，那么最好的选择是内部联接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T07:15:18.160

你也可以使用它：

```
SELECT a.prod_id,
       a.prod_name,
       a.cust_id,
       b.cust_name, 
       b.cust_address
FROM  sell_info a 
inner join cust_info b on  a.cust_id = b.cust_id 
where b.cust_type LIKE 'Reg%' 
```

# java - 旋转后图像不在正确位置（图形）

> ID：14848053
> 
> 赞同：3
> 
> 时间：2013-02-13T06:53:33.470
> 
> 标签：java, swing, graphics, jframe, affinetransform

我正在尝试以不同的速率显示两个直径为 512untis 的旋转轮，但我无法删除先前绘制的图像图形并将旋转图形设置在正确的位置。现在我正在以任意角度进行旋转。我尝试了 affineTransform 并得到了旋转，但很奇怪，就像所有像素都散开了一样。我使用带有 thread.sleep() 的 while 循环。以下是代码： //drawSmallCircle 和 drawBigCircle 返回两个图像。

```
class MyFramePart2 extends JFrame

{ 

    String name;
    JPanel big_obj_panel,small_obj_panel;    
    JLabel bigLabel,smallLabel;BufferedImage imgRet,imgRetSmall;
    static double radians,angle,rev,fps,smallAngle,smallRadians;               
    int numLines,i=0;    

    MyFramePart2(String frameName,int numStrokes,double revolutions,double frameps)
    {       
        numLines=numStrokes;
        smallAngle=smallRadians=angle=radians=Math.toRadians(360/numLines);        
        rev=revolutions;
        fps=frameps; 

        setSize(1240,720);       
        setLocation(0,0);
        setLayout(null); 
        getContentPane().setBackground(Color.WHITE);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 

        big_obj_panel=new JPanel();
        big_obj_panel.setLayout(null);
        big_obj_panel.setSize(512,512);
        big_obj_panel.setLocation(100,100); 
        big_obj_panel.setBackground(Color.white);
        add(big_obj_panel);   

        imgRet=drawBigCircle();
        bigLabel = new JLabel(new ImageIcon(imgRet));
        bigLabel.setLayout(null);        
        bigLabel.setLocation(0,0);
        bigLabel.setSize(512,512);
        bigLabel.setOpaque(true);
        bigLabel.setBackground(Color.white);  
        big_obj_panel.add(bigLabel);

        small_obj_panel=new JPanel();
        small_obj_panel.setLayout(null);
        small_obj_panel.setSize(512,512);
        small_obj_panel.setLocation(700,100); 
        small_obj_panel.setBackground(Color.white);
        add(small_obj_panel);   

        imgRetSmall=drawSmallCircle();

        smallLabel = new JLabel(new ImageIcon(imgRetSmall));
        smallLabel.setLayout(null);        
        smallLabel.setLocation(0,0);
        smallLabel.setSize(512,512);
        smallLabel.setOpaque(true);
        smallLabel.setBackground(Color.white);  
        small_obj_panel.add(smallLabel);

        setVisible(true);               

        while(i!=5) // suppose to be while true, just checking 
      {                 
        setVisible(true);          
        bigLabel.setIcon(new ImageIcon(imgRet));         
        smallLabel.setIcon(new ImageIcon(imgRetSmall));
        try{
        Thread.sleep(10);        
        }
        catch(Exception e)
        {}
        i++;               
     }                         
 }

    @Override
    public void paint(Graphics g)
    {        
        super.paint(g);
        Graphics2D g2d=(Graphics2D)g;           
        g2d.translate(256,256);
        g2d.rotate(Math.toRadians(20));                       
        g2d.translate(-256,-256); 
        g2d.drawImage(imgRet,0,0,null);
        g2d.dispose();        

        super.paint(g);
        g2d=(Graphics2D)g;
        g2d.translate(256,256);
        g2d.rotate(Math.toRadians(30));
        g2d.translate(-256,-256);        
        g2d.drawImage(imgRetSmall,0,0,null);        
        g2d.dispose();
    }

    public static BufferedImage drawBigCircle()
    {
        BufferedImage img=new BufferedImage(512,512,BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2d=img.createGraphics();                
        g2d.setColor(Color.black);
        g2d.drawOval(0,0,511,511);

        Line2D l2d;
        while(angle <= 2*Math.PI)
        {
            l2d=new Line2D.Double(256,256,256+256*Math.cos(angle),256+256*Math.sin(angle));
            g2d.draw(l2d);
            angle=angle+radians;
        }               
        return img;
    }        
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T10:18:21.240

Swing 的第一条规则。不要阻塞事件调度线程。这样做会使您的应用程序看起来像是挂起并阻止 EDT 处理任何重绘请求。

这意味着，您需要某种方式来安排不阻止 EDT 的更新

Swing 的第二条规则。不要从除 EDT 之外的任何线程创建或修改任何 UI 组件。

通常，您应该避免覆盖`paint`顶级容器的方法，例如`JFrame`，除此之外，它们不是双缓冲的，这意味着您的绘画会随着更新而闪烁。相反，您应该使用其中一个`Swing`容器，例如`JPanel`

有很多不同的方法可以实现这一目标。基本上，我在这里使用了三个列表，但如果我是认真的，我会创建一个可以维护所有必需信息（图像、角度和增量）的对象

为了实现实际的动画，我使用了`javax.swing.Timer`. 这将至少每*n 个*周期触发一个事件，但更重要的是，它是在事件调度线程的上下文中执行的。这确保了对角度所做的所有更改都以防止在我们更新值时发生任何绘画可能性的方式完成......

此示例以不同（随机）速度旋转三个图像...

![在此处输入图像描述](../Images/f6babe7268b603d7b82b74d0bff71bb4.png)

```
public class TestRotation {

    public static void main(String[] args) {
        new TestRotation();
    }

    public TestRotation() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new AnimationPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class AnimationPane extends JPanel {

        private List<BufferedImage> images;
        private List<Double> angles;
        private List<Double> speed;

        public AnimationPane() {
            images = new ArrayList<>(5);
            images.add(createWheel(50, 4));
            images.add(createWheel(50, 3));
            images.add(createWheel(50, 6));
            angles = new ArrayList<>();
            speed = new ArrayList<>();
            for (int index = 0; index < images.size(); index++) {
                angles.add(0d);
                speed.add(Math.random() * 5d);
            }

            Timer timer = new Timer(40, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    for (int index = 0; index < angles.size(); index++) {
                        double angle = angles.get(index);
                        double delta = speed.get(index);
                        angle += delta;
                        angles.set(index, angle);
                    }
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            int x = 0;
            int y = 0;
            for (int index = 0; index < images.size(); index++) {
                BufferedImage image = images.get(index);
                double angle = angles.get(index);

                // This is important.  Basically we going to grab a isolated snap shot
                // of the current graphics context.  This means any changes we make
                // will not affect the original graphics context (other then painting)
                Graphics2D g2d = (Graphics2D) g.create();
                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                AffineTransform at = new AffineTransform();
                at.translate(x, y);
                at.rotate(Math.toRadians(angle), image.getWidth() / 2, image.getHeight() / 2);
                g2d.setTransform(at);
                g2d.drawImage(image, 0, 0, this);
                g2d.dispose();

                x += image.getWidth();

            }
        }

    }

    protected Point2D calculateOutterPoint(int radius, double angel) {

        int x = Math.round(radius / 2);
        int y = Math.round(radius / 2);

        double rads = Math.toRadians((angel + 90));

        // This determins the length of tick as calculate from the center of
        // the circle.  The original code from which this derived allowed
        // for a varible length line from the center of the cirlce, we
        // actually want the opposite, so we calculate the outter limit first
        double fullLength = (radius / 2d);

        // Calculate the outter point of the line
        double xPosy = (x + Math.cos(rads) * fullLength);
        double yPosy = (y - Math.sin(rads) * fullLength);

        return new Point2D.Double(xPosy, yPosy);

    }

    public BufferedImage createWheel(int radius, int spokes) {
        BufferedImage img = new BufferedImage(radius, radius, BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2d = img.createGraphics();
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setColor(Color.black);
        g2d.drawOval(0, 0, radius - 1, radius - 1);

        Point2D center = new Point2D.Double(radius / 2d, radius / 2d);
        double angle = 360d / spokes;
        for (int index = 0; index < spokes; index++) {
            Point2D p = calculateOutterPoint(radius, index * angle);
            g2d.draw(new Line2D.Double(center, p));
        }

        g2d.dispose();
        return img;

    }

} 
```

# java - 检查所有字符是否匹配？

> ID：14848057
> 
> 赞同：-2
> 
> 时间：2013-02-13T06:53:51.853
> 
> 标签：java

基本上，我必须编写一个方法来确定字符串中的所有字符是否相同，只使用库 String 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:00:25.967

使用[`matches`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29). 请阅读[`Pattern`](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#sum)类的文档以了解如何使用`matches`函数来检查您的输入。我给你一个直接的答案是没有用的，因为你没有从中学到很多东西。

在您了解正则表达式后，该方法将为您提供单线解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:00:20.403

解决此问题的一种方法是不使用循环或递归，即 [ab] 使用[String.replace](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace) ¹。

实际的实现留作练习。

* * *

¹它不需要您的代码循环，但*某些东西*必须循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:32:41.683

```
public static void main(String[] args) {
        String str = "aaaaa";

        int count = str.length() - str.replaceAll(String.valueOf(str.charAt(0)), "").length();
        if(count == str.length())
            System.out.println("All characters in a given String are same");
} 
```

试试这个：这是解决这类问题的最简单和最好的解决方案。

# java - Mysql将数据插入为未知值java

> ID：14848058
> 
> 赞同：0
> 
> 时间：2013-02-13T06:54:14.673
> 
> 标签：java

您好，我正在使用准备好的语句将值插入 mysql。

我在插入`"c2a054656e6e6973c2a0"`值的字符串中遇到问题，`" Tennis "`我尝试使用修剪来修剪“网球”前面的空白它不起作用。从这个问题[为什么修剪不起作用？](https://stackoverflow.com/questions/4728625/why-trim-is-not-working)我尝试使用该解决方案`poNumber.replace(String.valueOf((char) 160), " ").trim();`并且它有效。任何人都可以为此提供解决方案吗？

示例代码

```
CREATE TABLE `news1` (
  `article_id` int(11) NOT NULL AUTO_INCREMENT,
  `article_title` varchar(500) COLLATE utf8_bin NOT NULL,
  `article_subcategory` varchar(255) COLLATE utf8_bin DEFAULT NULL,
  PRIMARY KEY (`article_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_bin AUTO_INCREMENT=22 ; 
```

//示例类别将是“家»网球”

```
 String category = item.getArticle_category();
                String categoryArray[] = category.split("»");
                preparedStatement = connect
                        .prepareStatement("INSERT INTO news1 VALUES(default,?,?)");
                System.out.println(categoryArray[2].replace(String.valueOf((char) 160), " ")
                        .trim());
                preparedStatement.setString(1, item.getArticle_title());
                preparedStatement.setString(2, categoryArray[2]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:03:23.593

您`categoryArray[2].replace(String.valueOf((char) 160), " ") .trim()`在 sys out 中执行此操作，但您`preparedStatement.setString(2, categoryArray[2]);`在语句中执行此操作

```
String temp = categoryArray[2].replace(String.valueOf((char) 160), " ") .trim(); 
System.out.println(temp); 
```

并使用 temp in

```
preparedStatement.setString(2, temp); 
```

# php - 我应该如何包含来自文档根目录之外的文件？

> ID：14848060
> 
> 赞同：1
> 
> 时间：2013-02-13T06:54:32.490
> 
> 标签：php, linux, hosting

我想包括`pear/Mail.php`.
我要求托管支持为我提供路径，它是`"/usr/local/php-5.3.17/share/pear/"`. 但它不能独立工作或从文档根目录工作，而且似乎我无法使用`"../"`.

文档根目录有两个父文件夹：`/home/www/`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:17:34.217

你有两种方式

1）通过包含在 php.ini

喜欢

```
 ; UNIX: "/path1:/path2"
 ;include_path = ".:/php/includes"
 ;window
 include_path = ".;c:\php\includes;C:\wamp\ZendFramework-1.11.11\library" 
```

2）将梨目录添加为Apache Config中的有效目录，如

```
 <Directory "/usr/share/rrdtool/fonts/">
    Options All
    AllowOverride None
    Order allow,deny
    Allow from all
  </Directory> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:04:40.400

在重新联系支持团队后，他们表示错误

> require_once（/usr/local/php-5.3.17/share/pear/Mail.php）[function.require-once]：无法打开流：在...中没有这样的文件或目录

是由于 SMTP 传出服务器连接被禁用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T07:15:01.020

```
include '/usr/local/php-5.3.17/share/pear/Mail.php'; 
```

# c++ - 未提供副本时使用不安全移动调整 std::vector 大小

> ID：14848066
> 
> 赞同：2
> 
> 时间：2013-02-13T06:54:48.827
> 
> 标签：c++, move-semantics

我创建了一个类来封装 OpenGL 纹理的一些功能，我的要求非常简单，所以我只需要能够控制纹理数据和类型。我的课程如下（简化）：

```
class Texture
{
    std::vector<unsigned char> _data;
    [...]
    public:
        Texture(std::vector<unsigned char> data, vec2 size, GLint internal_format, GLenum format, GLenum type);
        Texture(const Texture& other)
        {
            //copies the data and creates a new buffer with OpenGL
        }
        Texture(Texture&& other) noexcept
        {
            //moves the data, copies the buffer id and set the old buffer id to 0
        }
} 
```

现在我有另一个类使用 std::vector 管理一些纹理，为了使我的大部分内存管理自动化，我意识到我不需要在堆中分配这些纹理，所以向量类型是`std::vector<Texture>`. 问题是当我向矢量添加新纹理时，它正在复制而不是移动。我找到了两个解决方案，如果删除复制构造函数/赋值运算符，std::vector 会移动。但是在某些情况下我需要复制。我也可以只保留矢量，因为我知道要保留多少纹理。这两种解决方案的问题是我不知道我可能还有什么其他情况，我希望移动语义能够正常工作。

我阅读了有关此问题的其他[其他](https://stackoverflow.com/questions/8001823/how-to-enforce-move-semantics-when-a-vector-grows "其他")答案，但使用`noexcept`并不能解决问题，正如我所说，如果删除复制构造函数，则将选择移动构造函数。即使我删除`noexcept`并从中扔东西。它是否正确？如果没有可用的复制构造函数，编译器是否应该使用不安全的移动构造函数？另外，为什么编译器不选择我提供的安全移动构造函数？

（我使用的是 GCC 4.7）

**[编辑]**

我做了一个例子：[http](http://liveworkspace.org/code/4bzSMD) ://liveworkspace.org/code/4bzS​​MD $6 并意识到如果我保留默认析构函数，那么将使用移动构造函数，但如果我提供析构函数，则它会复制。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T16:13:09.970

如果没有提供复制构造函数，我仍然不知道为什么 GCC 会选择不安全的移动构造函数，但移动问题来自 GCC 4.7 上的显式析构函数，默认情况下不是 noexcept(true)，所以当有可用的副本时，它会编译器认为更安全（因为复制不会破坏元素。）

更多关于这里[编译器用来决定移动操作是否安全的标准是什么？](https://stackoverflow.com/questions/14924827/what-is-the-criteria-that-the-compiler-uses-to-decide-if-a-move-operation-is-saf)

# android - Android - 在 ListView 中使用 onScrollListener 实现图像延迟加载

> ID：14848074
> 
> 赞同：0
> 
> 时间：2013-02-13T06:55:36.353
> 
> 标签：android, android-listview, lazy-loading

我已经使用 onScrollListener 实现了延迟加载。我遇到的一个问题是第一次活动开始时图像不显示。滚动列表视图时会显示图像。图像第一次未加载的任何原因。请告诉我。谢谢。

getView() 代码如下：

```
public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        ContentListHolder contentHolder = null;
        if(convertView==null)
        {
            vi = inflater.inflate(layoutItem, null);

            contentHolder = new ContentListHolder();
            contentHolder.textview = (TextView)vi.findViewById(idText);
            contentHolder.imageView =(ImageView)vi.findViewById(idImage);

            vi.setTag(contentHolder);
        }
        else
        {
            contentHolder = (ContentListHolder) convertView.getTag();
        }        
        contentHolder.textview.setText("item "+position);
        contentHolder.imageView.setImageResource(layoutstub);
        Bitmap bitmap = imageLoader.getBitmapFromCache(data[position]);
        notifyDataSetChanged(); 
        if(bitmap != null)
        {           contentHolder.imageView.setImageBitmap(bitmap);
        }       
        return vi;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:28:04.077

这只是因为您没有为 ImageView 设置标签。

尝试：

```
contentHolder.imageView.setTag(bitmap); 
```

# asp.net-mvc - 将 HTML 或脚本注入 MVC 页面生命周期？

> ID：14848085
> 
> 赞同：2
> 
> 时间：2013-02-13T06:56:23.420
> 
> 标签：asp.net-mvc, asp.net-mvc-4, page-lifecycle

有没有办法从 MVC 控制器拦截页面生命周期并在页面或 DOM 的某处注入代码？我想将 HTML、CSS 和 JavaScript 添加到页面页眉和页脚，但不将它们添加到嵌入在某个程序集中的 _Layout 视图中。所以我想从 Global.asax / Application_Start 的控制器中执行此操作。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:03:15.267

我做了类似的事情。

首先，您需要在布局文件中添加占位符（要在其中注入代码）

其次，您需要在 global.asax 中添加一个全局 ActionFilterAttribute。在 FilterAttribute 中，仅覆盖筛选 OnActionExecuted 并仅筛选 ViewResults。

第三，您需要更改 Response.Filter，使用一个新的过滤器来搜索 html 代码中的占位符，并将其替换为您自己的。

我就是这么写的，我添加了一种在代码中任意位置声明 Styles & Scripts 的方法，当结果完成后，资源被注入到 head 标签中。

```
public class DynamicHeaderHandler : ActionFilterAttribute
{
    private static readonly byte[] _headClosingTagBuffer = Encoding.UTF8.GetBytes("</head>");
    private static readonly byte[] _placeholderBuffer = Encoding.UTF8.GetBytes(DynamicHeader.SectionPlaceholder);

    public override void OnActionExecuted(ActionExecutedContext filterContext)
    {
        if (filterContext.Result is ViewResult)
        {
            filterContext.HttpContext.Response.Filter = new ResponseFilter(filterContext.HttpContext.Response.Filter);
        }

        base.OnActionExecuted(filterContext);
    }

    private class ResponseFilter : MemoryStream
    {
        private readonly Stream _outputStream;

        public ResponseFilter(Stream aOutputStream)
        {
            _outputStream = aOutputStream;
        }

        public override void Close()
        {
            _outputStream.Flush();
            _outputStream.Close();
        }

        public override void Write(byte[] buffer, int offset, int count)
        {
            var maxIndex = IndexOfSubArray(buffer, _headClosingTagBuffer);
            var index = IndexOfSubArray(buffer, _placeholderBuffer, maxIndex);

            if (index == -1)
            {
                _outputStream.Write(buffer, offset, count);
            }
            else
            {
                var html = DynamicHeader.GetHtml();
                var injectBytes = Encoding.UTF8.GetBytes(html);
                var newBuffer = buffer.Take(index).Concat(injectBytes).Concat(buffer.Skip(index + _placeholderBuffer.Length)).ToArray();
                _outputStream.Write(newBuffer, 0, newBuffer.Length);
            }
        }

        private static int IndexOfSubArray(byte[] aBuffer, byte[] aSubBuffer, int aMaxIndex = int.MaxValue)
        {
            if (aBuffer.Length < aSubBuffer.Length)
            {
                return -1;
            }

            for (var outerIndex = 0; outerIndex < aBuffer.Length && outerIndex < aMaxIndex; ++outerIndex)
            {
                var isEqual = true;
                for (int subInnerIndex = 0, innerIndex = outerIndex; subInnerIndex < aSubBuffer.Length && innerIndex < aBuffer.Length; ++subInnerIndex, ++innerIndex)
                {
                    if (aBuffer[innerIndex] != aSubBuffer[subInnerIndex])
                    {
                        isEqual = false;
                        break;
                    }
                }

                if (isEqual)
                {
                    return outerIndex;
                }
            }

            return -1;
        }
    }
} 
```

我附上了 ActionFilterAttribute，这可能与您相关。

如果您想查看整个代码，可以访问此处： [动态添加样式和脚本](http://amiryonatan.blogspot.co.il/2013/01/add-styles-scripts-dynamically-to-head.html)

# html - 为什么使用此 HTML 代码时右边距不对齐？

> ID：14848086
> 
> 赞同：0
> 
> 时间：2013-02-13T06:56:26.170
> 
> 标签：html, css

```
<table width="1168px" height="315px" bgcolor="#eeeeee" style="position:absolute;  top:19px; margin-left:96px; margin-right:96px;" > 
```

表格左对齐 96 像素，但它一直延伸到右侧的末尾！我没有为整个网页指定宽度。我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:00:54.977

从样式中删除这些：

```
position:absolute;
top:19px;
margin-left:96px;
margin-right:96px; 
```

并更改为：

```
width: 75%;
margin: auto; 
```

另外，删除您的`width`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:01:20.127

这个问题是由你的宽度引起的。如果你改变它，你应该得到想要的结果。我建议您将其设为 % 而不是固定值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:13:49.873

尝试这个

```
<table width="500px" height="315px" bgcolor="#eeeeee" style="  top:19px; margin-left:auto; margin-right:auto;" > 
```

# asterisk - 星号拨号计划中的多行注释

> ID：14848092
> 
> 赞同：6
> 
> 时间：2013-02-13T06:56:58.310
> 
> 标签：asterisk

我知道星号拨号计划中的单行注释是“;” 例如

```
 ;exten => s,1,Playback(project/eligibility_points_msc) 
```

但是拨号计划中的多行注释使用什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-13T07:11:48.890

Asterisk 还允许我们创建[块注释](https://wiki.asterisk.org/wiki/display/AST/Block+Comments)。块注释是从一行开始并持续多行的注释。块注释以字符序列开头

```
;-- 
```

并继续跨越多行，直到字符序列

```
--; 
```

遇到。块注释在 --; 之后立即结束 遇到。

```
[section-name]
setting=true
;-- this is a block comment that begins on this line
and continues across multiple lines, until we
get to here --; 
```

# jsf-2 - 页面显示白屏

> ID：14848093
> 
> 赞同：0
> 
> 时间：2013-02-13T06:57:00.260
> 
> 标签：jsf-2

当我从菜单打开一个 JSF 页面并尝试导航到下一页时，它显示一个空白（白色）屏幕。如果我使用其他菜单打开另一个页面，则会显示上一页（我的意思是第一页）。有人可以让我知道 JSF2.0 是否提供了任何配置，因为它在 JSF 的早期版本（1.1 和 1.2）上运行良好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:53:30.363

如果您右键单击并选择查看源代码，您会看到什么？如果您看到 JSF 标记，它没有通过 FacesServlet，因此不会创建 html 并且可能会出现白页。

你需要用谷歌搜索 faces-config 应该是这样的，你需要确保你在 web.xml 中正确配置了 facesServlet。

这是我的一个可行的小项目，但我不能保证它是正确的

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">

    <application>
        <locale-config>
            <default-locale>sv</default-locale>
            <supported-locale>sv_FI</supported-locale>
            <supported-locale>en_GB</supported-locale>
            <supported-locale>en</supported-locale>
            <supported-locale>sv</supported-locale>
        </locale-config>

</application>
</faces-config> 
```

# php - 谷歌地图 api v3 自动居中 自动缩放

> ID：14848099
> 
> 赞同：4
> 
> 时间：2013-02-13T06:57:22.477
> 
> 标签：php, google-maps

这基于 Google Maps API v3。页面每 10 秒刷新一次，并通过自动居中和自动缩放更新地图上的标记位置。以下是我面临的问题：

1.  每次页面加载（每 10 秒）时，地图最初以 (47.6145, -122.3418) 为中心，然后根据标记位置居中并缩放。如果取消注释以下地图根本不会加载：

> 中心：新 google.maps.LatLng(47.6145, -122.3418),

每次地图刷新时，如何停止地图加载初始纬度和经度坐标（47.6145，-122.3418）。

2\. 有没有办法控制缩放级别？

这是基于 google maps api v3 的代码

```
function load() {
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(47.6145, -122.3418),
    zoom: 14,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;

  downloadUrl("phpsqlajax_genxml2.php", function(data) {

    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    var bounds  = new google.maps.LatLngBounds();
    for (var i = 0; i < markers.length; i++) {
      var UID = markers[i].getAttribute("UID");
      var type = markers[i].getAttribute("type");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("latitude")),
          parseFloat(markers[i].getAttribute("longitude")));
      var html = "<b>" + UID + "</b> <br/>";
      var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
    bounds.extend(point);
      bindInfoWindow(marker, map, infoWindow, html);
    }
   map.fitBounds(bounds);
  });
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

  setInterval(load, 10000); 

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:11:27.810

首先要控制缩放级别，有一个方法称为`setZoom()`，您可以在地图对象上调用该方法，在您的示例中为`map`变量。

```
map.setZoom(5); 
```

但更多的是地图刷新的其他问题。我假设整个网页正在刷新以更新地图的内容 - 我认为您应该调查 ajax 调用以刷新地图中的*数据*而不刷新整个页面

通过使用该方法，您已经有了基础`downloadUrl()`- 现在只需将它放在 a 上`setInterval()`，让数据每 30 秒到 1 分钟刷新一次。

我还建议您在添加新标记之前清除标记的映射，否则每次刷新数据时都会出现内存泄漏，从而创建重复的 DOM 元素。我通常将我的标记引用放在一个数组中，然后遍历数组并运行`marker.setMap(null)`，这将从地图中删除标记。

**用代码片段编辑**

使用上面的代码片段，让我们尝试通过将代码分成单独的函数、加载函数和刷新函数来完成这项工作，同时确保您移动`map`并`infoWindow`进入全局范围。

```
var map;
var infoWindow;
function load() {
    map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(47.6145, -122.3418),
    zoom: 14,
    mapTypeId: 'roadmap'
    });
    infoWindow = new google.maps.InfoWindow;
    refresh();
}
function refresh(){

    downloadUrl("phpsqlajax_genxml2.php", function(data) {

    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    var bounds  = new google.maps.LatLngBounds();
    for (var i = 0; i < markers.length; i++) {
      var UID = markers[i].getAttribute("UID");
      var type = markers[i].getAttribute("type");
      var point = new google.maps.LatLng(
          parseFloat(markers[i].getAttribute("latitude")),
          parseFloat(markers[i].getAttribute("longitude")));
      var html = "<b>" + UID + "</b> <br/>";
      var icon = customIcons[type] || {};
      var marker = new google.maps.Marker({
        map: map,
        position: point,
        icon: icon.icon,
        shadow: icon.shadow
      });
    bounds.extend(point);
      bindInfoWindow(marker, map, infoWindow, html);
    }
   map.fitBounds(bounds);
  });
}
setInterval("refresh()",60000); 
```

# java - WebSphere Application Server / java.lang.ClassCastException

> ID：14848100
> 
> 赞同：0
> 
> 时间：2013-02-13T06:57:25.873
> 
> 标签：java, web-services, rest, websphere, classcastexception

© 编写 simole restful webservice 并将该服务部署在 websphere 应用服务器上，

但我得到以下异常：

```
Error 500: org.jboss.resteasy.spi.UnhandledException: 
    java.lang.ClassCastException: 
       org.apache.wink.common.internal.ResponseImpl incompatible with org.jboss.resteasy.core.ServerRespon 
```

我该如何解决？

谢谢。

日志在这里：

```
webapp       
 E com.ibm.ws.webcontainer.webapp.WebApp logServletError SRVE0293E: [Servlet Error]-[resteasy-servlet]: org.jboss.resteasy.spi.UnhandledException: java.lang.ClassCastException: org.apache.wink.common.internal.ResponseImpl incompatible with org.jboss.resteasy.core.ServerResponse
    at org.jboss.resteasy.core.SynchronousDispatcher.handleException(SynchronousDispatcher.java:241)
    at org.jboss.resteasy.core.SynchronousDispatcher.handleInvokerException(SynchronousDispatcher.java:190)
    at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:534)
    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:496)
    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119)
    at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:208)
    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55)
    at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1214)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:774)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:456)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1027)
    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3703)
    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:304)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:962)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:458)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:522)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:311)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:282)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
    at com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1783)
Caused by: java.lang.ClassCastException: org.apache.wink.common.internal.ResponseImpl incompatible with org.jboss.resteasy.core.ServerResponse
    at org.jboss.resteasy.core.ResourceMethod.invokeOnTarget(ResourceMethod.java:283)
    at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:220)
    at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:209)
    at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:519) 
```

和我的 web.xml 文件

```
<context-param>
    <param-name>resteasy.resources</param-name>
    <param-value>services.MapService</param-value>
</context-param>

<listener>
    <listener-class>org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap</listener-class>
</listener>

<servlet>
    <servlet-name>resteasy-servlet</servlet-name>
    <servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>resteasy-servlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T13:32:21.260

您正在部署一个与 WebSphere 中包含的（基于 Wink 的）JAX-RS 实现冲突的 Jboss JAX-RS 实现。

切换到内置的 JAX-RS 支持并将 web.xml 更改为引用 JAX-RS 类而不是特定于实现的类，或者将 WebSphere 类加载器更改为 PARENT_LAST 以首先在类路径中获取 Jboss 实现。

如果可以的话，推荐前者。也就是说，写入 JAX-RS 规范而不是它的任何特定实现。（这也将允许您获得 IBM 对 WebSphere 下的 JAX-RS 问题的官方支持。）

# php - 我在 fopen 中使用了错误的参数吗？

> ID：14848103
> 
> 赞同：0
> 
> 时间：2013-02-13T06:57:46.483
> 
> 标签：php, html, ajax, json, string

我将 json 值附加到外部文件。使用 ajax 和 post 变量捕获表单数据。我有一个小脚本可以分解 json 数据字符串，并尝试将文件与中间的 post 变量一起内爆（或实际上在末尾）。

```
<?php

$json_file = "data.json";
$json_data = $_POST["newUpload"]."]}"; 
//something like {"name":"foo","email":"foo@bar.com"}

$fh = fopen($json_file, 'r+'); //I think this is the problem???

$data = fread($fh, filesize($json_file));   
$jsonFrags = explode("]}",$data);
$new_data = implode($json_data,$jsonFrags);
fwrite($fh, $new_data);
fclose($fh);

?> 
```

这是我能想到的最简单的事情，允许用户列表在运行 XAMPP 的网站和互联网访问非常有限的 Windows 机器上增长。一天一次也许两次。

整个 JSON 看起来像这样：

```
{"uploads": [{"name":"foo","email":"foo@bar.com","imgurl":"http://placehold.it/50x50"}]} 
```

我将文件数据加载到文件`$data`字符串“]}”的末尾并将其分解。这样它总是附加到最后。但它不会爆炸/内爆给我带来问题。我可以使用 str_replace 并获得相同的结果。运行上面的 PHP 脚本后，我在 data.json 中得到了这个：

```
{"uploads": [{"name":"foo","email":"foo@bar.com","imgurl":"http://placehold.it/50x50"}]}{"uploads": [{"name":"bar","email":"bar@foo.com","imgurl":"http://placehold.it/100x100"}]} 
```

我已经能够改变 fopen 的论点以获得不同的结果，这些都不是我希望的结果。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:01:28.533

好吧，您根本没有定义变量`$json`。PHP 都知道，`$json`它是空的。您的代码正在尝试打开一个文件（用于读取），但该文件为空！

# php - 致命错误：允许的内存大小为 134217728 字节已用尽（尝试分配 35 字节）

> ID：14848109
> 
> 赞同：0
> 
> 时间：2013-02-13T06:58:12.797
> 
> 标签：php

我正在尝试将一些序列号插入数据库。我已经为此定义了范围，并且我创建了一个函数，如果我已经插入了相关的序列号，它会返回最后一条记录并增加它。但是，当我尝试增加结果时，代码中出现错误。如果我对其进行硬编码，它可以正常工作，但当我尝试增加值时则不行：

```
$batch = $_POST['batch'];
$serial=11111111;
if(array_key_exists('batch',$_POST)){
    $query="select serial from serials where serial like";
    $query.="'".$_POST['batch']."%'";
    $query.='order by serial DESC limit 0,1';
    $rs=mysql_query($query);
    while($row= mysql_fetch_assoc($rs)){
        $a =($row[serial]);
        $a = substr($a,0,2);// substring to match the string
        if($a == $batch){
        $a2 =($row[serial]);
        $a2 = substr($a2,2,-1);//substring to get the serial
        $serial =$a2;
        }
        else
        {
        $serial=11111111;
        };
    }
}
function createColumnsArray($end_column, $first_letters = ''){
    $columns = array();
    $length = strlen($v);
    $letters = range($serial,11111999); //(12847017, 12847027);
    foreach ($letters as $letter){
        $column = $first_letters.$_POST['batch'].$letter.'Z';
        $columns[].=$column;
        if ($column == $end_column)
        return $columns;
    }
    foreach ($columns as $column){
        if (!in_array($end_column, $columns) && strlen($column) < $length) {
        $new_columns = createColumnsArray($end_column, $column);
        // Merge the new columns which were created with the final columns array.
        $columns = array_merge($columns, $new_columns);
        }
    }
return $columns;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:05:15.377

这是因为你的内存限制尝试

```
ini_set('memory_limit', '256M'); 
```

134217728 字节 = 128 MB

或者考虑重写一个高效的代码，这样它会消耗更少的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-06T11:39:59.967

```
Try...
Allowed memory size maximum. Put the code top of the file
ini_set('memory_limit', '-1'); 
```

# chef-infra - 如何使用 Chef 更改文件？

> ID：14848110
> 
> 赞同：28
> 
> 时间：2013-02-13T06:58:16.980
> 
> 标签：chef-infra, chef-recipe

我有 7 个文件和 1 个战争。我需要在部署它们时更改值。我有这个：

```
##usuario
#alfresco.user=*****
alfresco.user=********
##pass 
#alfresco.password= sfsfs
alfresco.password=sfgsf

alfresco.rutaAnexos=/gthtfdh/dfgdf/cm:

#atributo.type.anexo=ANEXO_INFO_OBJETO
atributo.type.anexo=AN
atributo.type.observaciones=OBSERVACIONES 
```

我需要注释一些行并取消注释其他一些行。然后我需要制作七个模板并根据环境放置变量并在配方中创建一个文件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-10-03T19:00:28.847

Chef 实际上允许并使用它。您可以在 opscode 中找到一个示例

`cookbooks/chef-server/recipes/default.rb`：

```
ruby_block "ensure node can resolve API FQDN" do
  block do
    fe = Chef::Util::FileEdit.new("/etc/hosts")
    fe.insert_line_if_no_match(/#{node['chef-server']['api_fqdn']}/,
                               "127.0.0.1 #{node['chef-server']['api_fqdn']}")
    fe.write_file
  end
  not_if { Resolv.getaddress(node['chef-server']['api_fqdn']) rescue false }
end 
```

这是用例。从源代码安装后，我不得不取消注释某些创建的配置文件中的行，这些行在所有版本的软件中都不相同，因此不适合使用模板。我使用的方法是：

*   （对象）search_file_replace（正则表达式，替换）
*   （对象）search_file_replace_line（正则表达式，换行符）

您可以在这里找到完整的文档：

*   [http://rubydoc.info/gems/chef/Chef/Util/FileEdit](http://rubydoc.info/gems/chef/Chef/Util/FileEdit)

强调：此方法仅在使用模板和部分不合适时使用。正如@StephenKing 已经说过的，模板是这样做的常用方法。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-02-07T16:26:46.547

下面是一个示例，说明如何使用 Chef 取消注释配置文件中的一行。受`ruby_block`保护`::File::grep`。Debian 的测试只是为了好玩。

```
pam_config = "/etc/pam.d/su"
commented_limits = /^#\s+(session\s+\w+\s+pam_limits\.so)\b/m

ruby_block "add pam_limits to su" do
  block do
    sed = Chef::Util::FileEdit.new(pam_config)
    sed.search_file_replace(commented_limits, '\1')
    sed.write_file
  end
  only_if { ::File.readlines(pam_config).grep(commented_limits).any? }
end if platform_family?('debian') 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-09-17T08:12:53.187

截至 2020 年，不鼓励提供所提供的解决方案 - 请参阅[此处](https://github.com/chef/chef/issues/7043)和[此处](https://github.com/chef/chef/issues/10224)。

执行文件手动编辑的现代方式是使用官方的、社区维护的说明书[行](https://github.com/sous-chefs/line)。

例子：

```
replace_or_add "why hello" do
  path "/some/file"
  pattern "Why hello there.*"
  line "Why hello there, you beautiful person, you."
end 
```

在使用这种策略之前，100% 确定确实需要手动编辑是至关重要的，但这完全取决于用例。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-02-13T08:11:34.280

按照设计，您无需使用 Chef 修改文件。相反，您将占位符 ( `<%= ..%>`) 放入文件模板中，然后将其替换为动态值（所谓的属性）。

# asp.net-mvc - 在剑道模板（Razor）中渲染剑道控制

> ID：14848111
> 
> 赞同：8
> 
> 时间：2013-02-13T06:58:30.447
> 
> 标签：asp.net-mvc, templates, razor, kendo-ui, kendo-treeview

是否可以在剑道模板中渲染剑道控件？像这样的东西？

```
<script id="treeview-template" type="text/kendo-ui-template">  
 @{Html.Kendo().AutoComplete()
 .Name("test")
 .Render();
 }
</script> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T03:46:15.103

感谢佩奇卡的帮助！**ToClientTemplate()**扩展方法完成了这项工作。

```
<script id="treeview-template" type="text/kendo-ui-template">
         # var ctrlid= item.ControlId; #

         @(Html.Kendo().AutoComplete()
         .Name("#=ctrlid#")
         .ToClientTemplate()
         )
</script> 
```

但是由于某种原因，当我将“item.ControlId”直接放在名称属性上时，它无法呈现控件。所以我尝试将它存储在一个变量中并在 name 属性上使用它并且它有效。:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-13T18:23:16.570

是的，你可以，只是不要忘记最后调用**ToClientTemplate**方法。此方法应可用于任何 Kendo 小部件。

# html5-canvas - 将画布转换为 .EPS 格式

> ID：14848113
> 
> 赞同：0
> 
> 时间：2013-02-13T06:58:39.500
> 
> 标签：html5-canvas

```
var oCanvas = document.getElementById("canvas");
var oImgBMP = Canvas2Image.saveAsEPS(oCanvas, true); 
```

我尝试了上面的函数将其转换为 EPS 但这不起作用有任何简单的方法可以将画布保存到 EPS 中。或任何其他方法意味着 pdf 到 EPS ...感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:21:07.543

没有原生支持以 .EPS 格式获取画布。

.toDataURL 将获得 PNG 或 JPG 格式的画布，但不是 EPS。

```
canvas.toDataURL("image/jpg");

canvas.toDataURL("image/png"); 
```

要获得 EPS，您必须将 .png 或 .jpg 发送到您的服务器 (php/iis) 进行转换。

# android - 带复选框的部分标题

> ID：14848114
> 
> 赞同：1
> 
> 时间：2013-02-13T06:58:42.573
> 
> 标签：android, listview

我有一个列表视图，里面有带有复选框的部分标题。如果我将单击标题复选框，则应选中所有子复选框。如果我将复选框保留在列表视图中，那么我将面临问题。我已经附上了我需要实现的图像。这是我的我用于创建 [带有剖面视图的列表视图 Listview 的代码](http://www.mysamplecode.com/2012/07/android-listview-checkbox-example.html)

```
import java.util.ArrayList;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class ListViewCheckboxesActivity extends Activity {

 MyCustomAdapter dataAdapter = null;

 @Override
 public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  //Generate list View from ArrayList
  displayListView();

  checkButtonClick();

 }

 private void displayListView() {

  //Array list of countries
  ArrayList<Country> countryList = new ArrayList<Country>();
  Country country = new Country("AFG","Afghanistan",false);
  countryList.add(country);
  country = new Country("ALB","Albania",true);
  countryList.add(country);
  country = new Country("DZA","Algeria",false);
  countryList.add(country);
  country = new Country("ASM","American Samoa",true);
  countryList.add(country);
  country = new Country("AND","Andorra",true);
  countryList.add(country);
  country = new Country("AGO","Angola",false);
  countryList.add(country);
  country = new Country("AIA","Anguilla",false);
  countryList.add(country);

  //create an ArrayAdaptar from the String Array
  dataAdapter = new MyCustomAdapter(this,
    R.layout.country_info, countryList);
  ListView listView = (ListView) findViewById(R.id.listView1);
  // Assign adapter to ListView
  listView.setAdapter(dataAdapter);

  listView.setOnItemClickListener(new OnItemClickListener() {
   public void onItemClick(AdapterView<?> parent, View view,
     int position, long id) {
    // When clicked, show a toast with the TextView text
    Country country = (Country) parent.getItemAtPosition(position);
    Toast.makeText(getApplicationContext(),
      "Clicked on Row: " + country.getName(), 
      Toast.LENGTH_LONG).show();
   }
  });

 }

 private class MyCustomAdapter extends ArrayAdapter<Country> {

  private ArrayList<Country> countryList;

  public MyCustomAdapter(Context context, int textViewResourceId, 
    ArrayList<Country> countryList) {
   super(context, textViewResourceId, countryList);
   this.countryList = new ArrayList<Country>();
   this.countryList.addAll(countryList);
  }

  private class ViewHolder {
   TextView code;
   CheckBox name;
  }

  @Override
  public View getView(int position, View convertView, ViewGroup parent) {

   ViewHolder holder = null;
   Log.v("ConvertView", String.valueOf(position));

   if (convertView == null) {
   LayoutInflater vi = (LayoutInflater)getSystemService(
     Context.LAYOUT_INFLATER_SERVICE);
   convertView = vi.inflate(R.layout.country_info, null);

   holder = new ViewHolder();
   holder.code = (TextView) convertView.findViewById(R.id.code);
   holder.name = (CheckBox) convertView.findViewById(R.id.checkBox1);
   convertView.setTag(holder);

    holder.name.setOnClickListener( new View.OnClickListener() {  
     public void onClick(View v) {  
      CheckBox cb = (CheckBox) v ;  
      Country country = (Country) cb.getTag();  
      Toast.makeText(getApplicationContext(),
       "Clicked on Checkbox: " + cb.getText() +
       " is " + cb.isChecked(), 
       Toast.LENGTH_LONG).show();
      country.setSelected(cb.isChecked());
     }  
    });  
   } 
   else {
    holder = (ViewHolder) convertView.getTag();
   }

   Country country = countryList.get(position);
   holder.code.setText(" (" +  country.getCode() + ")");
   holder.name.setText(country.getName());
   holder.name.setChecked(country.isSelected());
   holder.name.setTag(country);

   return convertView;

  }

 }

 private void checkButtonClick() {

  Button myButton = (Button) findViewById(R.id.findSelected);
  myButton.setOnClickListener(new OnClickListener() {

   @Override
   public void onClick(View v) {

    StringBuffer responseText = new StringBuffer();
    responseText.append("The following were selected...\n");

    ArrayList<Country> countryList = dataAdapter.countryList;
    for(int i=0;i<countryList.size();i++){
     Country country = countryList.get(i);
     if(country.isSelected()){
      responseText.append("\n" + country.getName());
     }
    }

    Toast.makeText(getApplicationContext(),
      responseText, Toast.LENGTH_LONG).show();

   }
  });

 }

} 
```

![像这张图片一样，我注意实施](../Images/91367327eca9f708677cd042ada531c1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:46:59.747

好吧，您还没有发布您的真实代码，否则我会告诉您确切的解决方案。现在根据您的示例代码，我所能建议的就是寻找负责在 getview 方法中设置复选框状态的行：

```
holder.name.setChecked(country.isSelected()); 
```

现在在您的标题复选框单击侦听器上，您所要做的就是将该参数设置为 true。根据示例，它将是 country.setSelected(true); 对于应在标题单击时检查的所有项目。

然后打电话

```
dataAdapter.notifyDataSetChanged(); 
```

它将刷新您的列表视图并将所有这些复选框标记为选中。

编辑：

下面是使用SeparatedListAdapter 选择标题下所有项目的工作代码：

ListSample.java

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import android.app.Activity;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.CheckBox;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class ListSample extends Activity implements HeaderClickListener
    {

        public final static String ITEM_TITLE = "title";
        public final static String ITEM_CAPTION = "caption";

        // SectionHeaders
        private final static String[] days = new String[]{"Mon", "Tue", "Wed", "Thur", "Fri"};

        // MENU - ListView
        private ListView addJournalEntryItem;

        // Adapter for ListView Contents
        private SeparatedListAdapter adapter;

        // ListView Contents
        private ListView journalListView;

        public Map<String, ?> createItem(String title, String caption)
            {
                Map<String, String> item = new HashMap<String, String>();
                item.put(ITEM_TITLE, title);
                item.put(ITEM_CAPTION, caption);
                return item;
            }

        @Override
        public void onCreate(Bundle icicle)
            {
                super.onCreate(icicle);
                // Sets the View Layer
                setContentView(R.layout.main);
                // Interactive Tools
                final ArrayAdapter<String> journalEntryAdapter = new ArrayAdapter<String>(this, R.layout.add_journalentry_menuitem, new String[]{"Add Journal Entry"});
                // AddJournalEntryItem
                addJournalEntryItem = (ListView) this.findViewById(R.id.add_journalentry_menuitem);
                addJournalEntryItem.setAdapter(journalEntryAdapter);
                addJournalEntryItem.setOnItemClickListener(new OnItemClickListener()
                    {
                        @Override
                        public void onItemClick(AdapterView<?> parent, View view, int position, long duration)
                            {
                                String item = journalEntryAdapter.getItem(position);
                                Toast.makeText(getApplicationContext(), item, Toast.LENGTH_SHORT).show();
                            }
                    });

                // Create the ListView Adapter
                adapter = new SeparatedListAdapter(this);
                // Add Sections
                for (int i = 0; i < days.length; i++)
                {
                    ArrayList<CategoryList> categoryLists = new ArrayList<CategoryList>();
                    for(int j = 0; j < 10; j++)
                    {
                    CategoryList categoryList = new CategoryList();
                    categoryList.setSelected(false);
                    categoryList.setTitle(days[i] + j);
                    categoryLists.add(categoryList);
                    }
                    CustomBaseAdpater baseAdpater = new CustomBaseAdpater(categoryLists);
                    adapter.addSection(days[i], baseAdpater);
                }

                // Get a reference to the ListView holder
                journalListView = (ListView) this.findViewById(R.id.list_journal);

                // Set the adapter on the ListView holder
                journalListView.setAdapter(adapter);

                // Listen for Click events
                journalListView.setOnItemClickListener(new OnItemClickListener()
                    {
                        @Override
                        public void onItemClick(AdapterView<?> parent, View view, int position, long duration)
                            {
                                String item = (String) adapter.getItem(position);
                                Toast.makeText(getApplicationContext(), item, Toast.LENGTH_SHORT).show();
                            }
                    });
            }

        private class CustomBaseAdpater extends BaseAdapter
        {

            ArrayList<CategoryList> list = null;
            CustomBaseAdpater( ArrayList<CategoryList> categoryLists )
            {
                this.list = categoryLists;
            }

            @Override
            public int getCount() {
                return list.size();
            }

            @Override
            public Object getItem(int position) {
                return null;
            }

            @Override
            public long getItemId(int position) {
                return 0;
            }

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                ViewHolder viewHolder = null;
                if (null == convertView)
                {
                    viewHolder = new ViewHolder();
                    LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
                    convertView = inflater.inflate(R.layout.item_row, null);
                    viewHolder.checkBox = (CheckBox) convertView.findViewById(R.id.checkItem);
                    viewHolder.textView = (TextView) convertView.findViewById(R.id.textTitle);
                    convertView.setTag(viewHolder);
                }
                else
                    viewHolder = (ViewHolder) convertView.getTag();

                viewHolder.checkBox.setChecked(list.get(position).isSelected());
                viewHolder.textView.setText(list.get(position).getTitle());

                return convertView;
            }

            private class ViewHolder
            {
                CheckBox checkBox;
                TextView textView;
            }
            private void checkCompleteSection()
            {
                for(CategoryList categoryList : this.list)
                categoryList.setSelected(true);
            }
        }

        @Override
        public void refreshSection(String sectionName) {
            if(adapter.sections.get(sectionName) != null)
            {
                ((CustomBaseAdpater)(adapter.sections.get(sectionName))).checkCompleteSection();
                adapter.notifyDataSetChanged();
            }
        }

    } 
```

分离列表适配器.java

```
import java.util.LinkedHashMap;
import java.util.Map;

import android.content.Context;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Adapter;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.CheckBox;
import android.widget.Toast;

public class SeparatedListAdapter extends BaseAdapter
    {
        public final Map<String, Adapter> sections = new LinkedHashMap<String, Adapter>();
        public final ArrayAdapter<String> headers;
        public final static int TYPE_SECTION_HEADER = 0;
        Context context = null;

        public SeparatedListAdapter(Context context)
            {
                headers = new ArrayAdapter<String>(context, R.layout.list_header);
                this.context = context;
            }

        public void addSection(String section, Adapter adapter)
            {
                this.headers.add(section);
                this.sections.put(section, adapter);
            }

        public Object getItem(int position)
            {
                for (Object section : this.sections.keySet())
                    {
                        Adapter adapter = sections.get(section);
                        int size = adapter.getCount() + 1;

                        // check if position inside this section
                        if (position == 0) return section;
                        if (position < size) return adapter.getItem(position - 1);

                        // otherwise jump into next section
                        position -= size;
                    }
                return null;
            }

        public int getCount()
            {
                // total together all sections, plus one for each section header
                int total = 0;
                for (Adapter adapter : this.sections.values())
                    total += adapter.getCount() + 1;
                return total;
            }

        @Override
        public int getViewTypeCount()
            {
                // assume that headers count as one, then total all sections
                int total = 1;
                for (Adapter adapter : this.sections.values())
                    total += adapter.getViewTypeCount();
                return total;
            }

        @Override
        public int getItemViewType(int position)
            {
                int type = 1;
                for (Object section : this.sections.keySet())
                    {
                        Adapter adapter = sections.get(section);
                        int size = adapter.getCount() + 1;

                        // check if position inside this section
                        if (position == 0) return TYPE_SECTION_HEADER;
                        if (position < size) return type + adapter.getItemViewType(position - 1);

                        // otherwise jump into next section
                        position -= size;
                        type += adapter.getViewTypeCount();
                    }
                return -1;
            }

        public boolean areAllItemsSelectable()
            {
                return false;
            }

        @Override
        public boolean isEnabled(int position)
            {
                return (getItemViewType(position) != TYPE_SECTION_HEADER);
            }

        @Override
        public View getView(int position, View convertView, ViewGroup parent)
            {
                int sectionnum = 0;
                for (Object section : this.sections.keySet())
                    {
                        Adapter adapter = sections.get(section);
                        int size = adapter.getCount() + 1;

                        // check if position inside this section
                        if (position == 0) 
                        {
                         View headerView = headers.getView(sectionnum, convertView, parent);
                         headerView.setTag(section);
                         headerView.setOnClickListener(new OnClickListener() {
                                @Override
                                public void onClick(View v) {
                                    String sectionName = v.getTag().toString();
                                Toast.makeText(context,  sectionName ,2000).show();
                                ((HeaderClickListener) context).refreshSection(sectionName);    
                                }
                            });
                         return headerView;
                        }
                        if (position < size) return adapter.getView(position - 1, convertView, parent);

                        // otherwise jump into next section
                        position -= size;
                        sectionnum++;
                    }
                return null;
            }

        @Override
        public long getItemId(int position)
            {
                return position;
            }

    } 
```

item_row.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >
    <CheckBox 
        android:id="@+id/checkItem"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        />
    <TextView 
        android:id="@+id/textTitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        />

</LinearLayout> 
```

# android - 带有 ZooZ 应用内支付系统的 Android 应用程序

> ID：14848115
> 
> 赞同：0
> 
> 时间：2013-02-13T06:58:44.470
> 
> 标签：android, payment-gateway, payment-processing

我要将 ZooZ 支付处理器集成到我的应用程序中。这将是我的应用程序的演示版和完整版。确定用户是否购买了应用程序的最佳方法是什么，我认为如果在演示中检查 SharedPreferences 中的布尔值是否不安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:12:56.407

ZooZ（我是 CTO 和联合创始人的一家公司）有一个服务器 API，可以通过电子邮件地址检查付款状态。您可以使用该 API 和用户的电子邮件地址来匹配历史付款。

此外，最好有自己的服务器来管理它。

# javascript - 为什么 JavaScript 中的“this”被称为隐式参数？

> ID：14848116
> 
> 赞同：3
> 
> 时间：2013-02-13T06:58:46.110
> 
> 标签：javascript

我想知道为什么在[John Resig 的 JavaScript Ninja 的秘密](https://rads.stackoverflow.com/amzn/click/com/193398869X)一书中，p。48、据说：

> 每当调用一个函数时，... 一个名为的隐式参数`this` 也会传递给该函数。

我有点不解，因为之前，我读到这`this`实际上是一个关键字。也许这并不重要，除非我们尝试

```
function f() {
    this = {};
}

f(); 
```

那么 Chrome 或 Node.js 都会引发一个错误，即它是分配中的无效左侧。因此，如果`this`实际上是一个隐式参数，那么该行不应该引发错误吗？所以我想知道这本书是否确实存在这个错误`this`，而且应该是其他错误？

（**更新：**我还重新检查了 JavaScript：权威指南第 6 版和 ECMA-262，他们都说`this`是关键字）......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:02:46.080

这确实是一个隐含的论点，因为如果你写：

```
var foo = {
    bar: function() {
        console.log(this);  // Will be foo.
    }
};

foo.bar(); 
```

`this`隐式绑定到`foo`inside `bar()`，就好像您已明确编写：

```
foo.bar.call(foo); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:24:06.193

```
function foo(explicitVar /*, this */ ) {
}

// this will only be defined when foo is called
// default: this == window

// directly invoking a function will bind this to `window`
foo(1 /*, window */) // explicitVar == 1, this == window (inside foo)

var a = {
    fuu: foo
}

// invoking foo ON another object binds this to that object
a.fuu(2 /*, a */) // explicitVar == 2, this == a (inside a.fuu)

// even when you reuse a function that was assigned to another object,
// the this will only be bound when invoking
bar = a.fuu
bar(3 /*, window */) // explicitVar == 3, this == window (inside bar) 
```

从这些示例中您可以看到，为了解释`this`，您可以将其描述为具有特殊执行语义的魔术关键字，也可以将其解释为隐式参数，因为它仅在某些上下文中调用函数时才被分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:30:20.713

实际上，这些是同一概念的两个维度。

关键字 'this' => 供用户识别不应用作函数或变量名称的字符串。

隐式参数 'this' => 这是 javascript 引擎识别该对象的一种方式，而该对象又由您抽象出来，由用户像

```
 this.name //I don't care about which object. It is taken care of 
```

而不是让自己迷惑

```
 obj1.name // or is it, obj2 !!! ?? 
```

在这里，“照顾”部分成为用户的关键字，以及 javascript 引擎的隐式参数，以便它可以为您提供抽象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T07:05:55.387

两者都是！

这是一个隐式参数，因为它不是函数声明的一部分，例如

```
function foo()
{
    // this === window
}

foo(); 
```

然而，由于 JavaScript 的执行方式，它就像任何其他对象引用一样存在`foo()`：

```
foo.call(window) 
```

但它也是一个关键字，因为它受某些规则的约束，例如无法为其分配值。

# database - 增加标签

> ID：14848118
> 
> 赞同：1
> 
> 时间：2013-02-13T06:58:51.567
> 
> 标签：database, visual-studio-2010, sql-server-2008, increment

我的程序有问题，我需要`INCREMENT`某个值`Label`

```
 Dim p1num As Integer = 0
 M.Text = Format(Now, "MM")
 Y.Text = Format(Now, "yy")

txtPNumber.Text = Y.Text.ToString & M.Text.ToString & p1num.ToString("D4") 
```

我使用它来生成患者 ID，其中 M 代表月份，Y 代表年份 + p1num 以创建一个 4 位数字......所以输出将是这样的：

（让我们使用当前日期和年份）

```
13020001
13020002
13020003
13020004 
```

等等....

在此之后，我将使用这些代码将其插入到 SQL SERVER 中的数据库中：

```
Dim SQLcon As New SqlConnection
        Dim SQLdr As SqlDataReader
        Try
            SQLcon.ConnectionString = "Data Source=####;" & _
"Initial Catalog=####;Persist Security Info=True;User ID=####;Password="
            Dim SQLcmd As New SqlCommand("INSERT INTO dbo.Patients" & _
                                         "(pIDNo)" & _
                                         "VALUES(@pIDNo)", SQLcon)
            SQLcmd.Parameters.AddWithValue("@pIDNo", txtPNumber.Text)
 MsgBox("Patient Added!", MsgBoxStyle.Information)
            SQLdr = SQLcmd.ExecuteReader()
        Catch ex As Exception
            MessageBox.Show("Error Occured, Can't Add Patient!" & ex.Message)
        Finally
            SQLcon.Close()
        End Try
        Return "" 
```

现在的问题是，当我关闭程序时，生成的值`TextBox`总是从 13020001 开始。我想保留最近添加的值，然后将其增加到 +1，所以我计划显示刚刚添加到的当前 ID我的数据库使用这些：

```
 Dim querystring As String = "SELECT MAX(pIDNo) FROM dbo.Patients"

            Using connection As New SqlConnection("Data Source=####;" & _
    "Initial Catalog=####;Persist Security Info=True;User ID=####;Password=")
                Dim command As New SqlCommand(querystring, connection)
                connection.Open()
                Dim reader As SqlDataReader = command.ExecuteReader
                While reader.Read
                    txtCurrentID.Text = reader.GetString(0)
                End While
                reader.Close() 
```

我设法显示当前 ID，但现在的问题是我不能将其增加 1。

其他问题：我尝试复制显示的值并将其添加一个，但出现了另一个问题，月份和年份没有改变。如果我达到“三月”月，则生成的值仍然是

1302 + pnum1.text("D4") 应该是 1303 + pnum1.text("D4")

1302 代表 2 月 1303 代表 3 月

谁能解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:07:24.173

13020004 这是最后插入的值。之后你能告诉我们你的要求值是多少吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:13:47.770

取回价值`MAX(pIDNo)`。`String`

```
Dim value  = string.Empty
While reader.Read
    value = reader.GetString(0)
End While 
```

之后，您可以`value`根据需要进行解析：

```
dim year = value.Substring(0,2)
dim month = value.Substring(2,2)
dim patientId = value.Substring(4,4)
dim newPatientId as Integer = Integer.Parse(patientId) + 1
....... 
```

**编辑** 此代码为您提供了您想要的内容：

```
txtCurrentID.Text = Today.Year.ToString().Substring(2,2) & Today.Month.ToString().PadLeft(2, "0") & (Integer.Parse(value) + 1).ToString("D4") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T07:21:29.580

```
 While reader.Read       //you don't need that for aggregate functions. 
     txtCurrentID.Text = command.ExecuteScaler() //something like that... is enough 
     int p1num=integer.parse(txt.CurrentID.text.substring(4,4)) +1
 //  End While
 ...

txtPNumber.Text = Y.Text.ToString & M.Text.ToString & p1num.ToString("D4") 
```

如果你只想要日期：然后使用`Date.Today`

```
 pNumber.Text = Today.Date.Month.ToString + " " + Today.Date.Year.ToString 
```

IntelliSense 是您的第一本书，因此必须使用它。;)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T07:28:19.817

从数据库中检索患者 ID 并将其吐出，分配给另一个变量。此方法有效

```
dim p1num = patientId.Substring(4,7)
Dim M = Format(Now, "MM")
Dim Y = Format(Now, "yy") 
lblsample.Text = Y.ToString() & M.ToString() & p1num.ToString("D4") 
```

# sql-server - SQL 过程 - 开始事务并提交

> ID：14848128
> 
> 赞同：0
> 
> 时间：2013-02-13T06:59:55.990
> 
> 标签：sql-server, sql-server-2008

嗨，我正在其中编写一个过程“pro_reallocate_block”，我正在调用另一个过程“pro_remove_allocation”。如果我为主程序“pro_reallocate_block”放置BEGIN TRANSACTION，如果主程序发生任何错误，它将恢复子程序“pro_remove_allocation”。

```
Create procedure pro_reallocate_block(
@blockId int,
@blockName nvarchar(max)
)    
WITH EXECUTE AS CALLER      
AS      
Begin           

 SET XACT_ABORT, NOCOUNT ON;        
 BEGIN TRY          
 SET TRANSACTION ISOLATION LEVEL SERIALIZABLE        
 BEGIN TRANSACTION        

Declare @AllocatedBlockid int

 exec pro_remove_allocation @blockId 
 if((select COUNT(blockId) from blocks where blockId=@blockId)>0)
    select * from blocks where blockId=@blockId 
    else 
        select * from blocks where bdefault=1
 COMMIT TRANSACTION        
 SET TRANSACTION ISOLATION LEVEL READ COMMITTED        
 END TRY        

 BEGIN CATCH        
  IF XACT_STATE() <> 0        
  BEGIN        
   ROLLBACK TRANSACTION        

   DECLARE @ErrorMessage NVARCHAR(4000);        
   DECLARE @ErrorSeverity INT;        
   DECLARE @ErrorState INT;        

   SELECT @ErrorMessage = ERROR_MESSAGE(),        
       @ErrorSeverity = ERROR_SEVERITY(),        
       @ErrorState = ERROR_STATE();        

   RAISERROR (@ErrorMessage, @ErrorSeverity, @ErrorState);        
  END        
 END CATCH    
end 
```

# ruby - 在 Ruby Google Cloud Storage API 中使用“媒体”uploadType

> ID：14848129
> 
> 赞同：1
> 
> 时间：2013-02-13T06:59:56.840
> 
> 标签：ruby, google-api-ruby-client

我正在编写一些示例代码，但在让“媒体”uploadType 选项正常工作时遇到了一些麻烦。

我正在同时学习 Ruby 和 API，所以请耐心等待 - 但这（以及一些细微的变化）是我正在尝试的：

```
media = Google::APIClient::UploadIO.new('file.txt', 'text/plain')
media_insert_result = client.execute(
  api_method: storage.objects.insert,
  parameters: {
    uploadType: 'media', 
    bucket: BUCKET_NAME, 
    name: OBJECT_NAME
  },
  media: media
) 
```

对于可恢复、多部分和元数据上传，一切都很顺利，但我似乎无法让媒体正常工作。任何指向正确方向的指针都将不胜感激。

# css - CSS 3 水平手风琴

> ID：14848136
> 
> 赞同：0
> 
> 时间：2013-02-13T07:00:29.403
> 
> 标签：css, horizontal-accordion

我想知道 jQuery 是否以简单的方式提供了水平手风琴......就像他们提供常规手风琴功能的方式一样。在网上搜索后有一些插件可用。但是，我开始使用完全使用 CSS 3 运行的水平手风琴。可以在[此处](http://www.webarti.com/css3-horizontal-accordion-slider/a-simple-website/)找到它的演示由于我对 CSS 3 还是有点陌生​​，我仍然不完全确定它是如何工作的。我已经能够根据自己的喜好来设计它的大部分样式。但是，就幻灯片效果而言，似乎里面的内容

```
.accordion>ul>li>div 
```

关闭选项卡时仍然可见。[你可以在这里](http://sportannica.com/teams/nba/Cleveland%20Cavaliers)找到我的问题的一个工作示例。我使用 firebug 试图了解发生了什么，并认为它可能与 z-index 有关。但是，这对我没有太大帮助。

谢谢，

槊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:23:22.197

您需要在`.accordion>ul>li>div`. 目前它是透明的，因此下面的所有内容都“闪耀”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:25:37.933

我认为您指的是网站中间的选项卡，在“统计数据”内：“每场比赛的磅数”、“每场比赛的篮板数”等......

我试图修改你的 css 并放置下一个属性，我认为它有效:)

```
.accordion > ul > li {position:relative;}<br/>
.accordion > ul > li div {position:relative;background-color:#fff;} 
```

# android - 创建phonegap应用程序后已经出错，无法调用方法方法'querySelector'

> ID：14848138
> 
> 赞同：7
> 
> 时间：2013-02-13T07:00:37.950
> 
> 标签：android, cordova

在我创建了一个 phonegap 应用程序并运行它之后，logcat 中似乎有一个错误

```
Uncaught TypeError: Cannot call method 'querySelector' of null at file:///android_asset/www/js/index.js:41 
```

这是一个问题吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-17T11:34:52.613

我有这个错误，我认为你已经尝试过我所做的事情。我开始从示例应用程序代码构建应用程序，但并没有完全了解事件模型以及什么时候触发。

示例应用在 index.html 中包含一个 HTML 部分

```
 <div id="deviceready" class="blink">
            <p class="event listening">Connecting to Device</p>
            <p class="event received">Device is Ready</p>
        </div> 
```

这是 JS 中的事件触发更新的内容：

```
 onDeviceReady: function() {
        app.receivedEvent('deviceready');
    },
   //...  
   // Update DOM on a Received Event
    receivedEvent: function(id) {
        var parentElement = document.getElementById(id);
        app.receivedEvent('deviceready');
        var receivedElement = parentElement.querySelector('.received');

        listeningElement.setAttribute('style', 'display:none;');
        receivedElement.setAttribute('style', 'display:block;');

        console.log('Received Event: ' + id);
    } 
```

但是我取出了 ID 为“deviceready”的 div，因此 JS 因您描述的错误而失败。我删除了调用 app.receivedEvent... 一切正常。话虽如此，将 div 放回去会导致不同的最大调用堆栈错误，所以我没有卖掉我的 JS 仍然是正确的。

我（想！）我还学到的是不要试图使用经典的 $(document).ready(function() 来加载您的应用程序功能。这应该是从一段代码调用的函数，其中而是触发 onDeviceReady 事件。

# android - 如何取消选中组中的单选按钮？

> ID：14848144
> 
> 赞同：0
> 
> 时间：2013-02-13T07:00:57.587
> 
> 标签：android, radio-group

我正在做一个测验应用程序我有一个带有 4 个单选按钮的单选组，我有一个下一步按钮。

在显示第一个问题并回答检查时没有问题..当用户给出下一个时，单选组应取消选中。如何实施？

当用户选择该选项时，它应该验证答案是否正确。我已将正确答案存储在数组中。当用户切换选项时，它会在切换按钮中显示错误。如何实施？

> ```
>  btn_practicerg.setOnCheckedChangeListener(new OnCheckedChangeListener(){
>             @Override
>             public void onCheckedChanged(RadioGroup group, int checkedId) { 
>                 RadioButton radioButton = (RadioButton)group. findViewById(checkedId);
>                 String temp = radioButton.getText().toString();
>                 switch(btn_practicerg.getCheckedRadioButtonId()){
>                 case R.id.RB1:
>                     if (btn_practice1.isChecked()){
>                         btn_practice2.setChecked(false);
>                         btn_practice3.setChecked(false);
>                         btn_practice4.setChecked(false);
>                     }
>                     break;
>                 case R.id.RB2:
>                     if (btn_practice2.isChecked()){
>                         btn_practice1.setChecked(false);
>                         btn_practice3.setChecked(false);
>                         btn_practice4.setChecked(false);
>                     }
>                     break;
>                 case R.id.RB3:
>                     if (btn_practice3.isChecked()){
>                         btn_practice1.setChecked(false);
>                         btn_practice2.setChecked(false);
>                         btn_practice4.setChecked(false);
>                     }
>                     break;
>                 case R.id.RB4:
>                     if (btn_practice4.isChecked()){
>                         btn_practice1.setChecked(false);
>                         btn_practice2.setChecked(false);
>                         btn_practice3.setChecked(false);
>                     }
>                     break;
>                 }
>                 crrtans=new ArrayList<String>(new ArrayList<String>(crrtans));
>                 if (temp.equals(crrtans.get(l))){
>                 TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
>                 txtRadio.setText("" + radioButton.getText() + " IS CORRECT");   
>                 txtRadio.setTextColor(Color.parseColor("#008000"));
>                }else{
>               TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
>           txtRadio.setText("" + radioButton.getText() + "is INCORRECT");
>           txtRadio.setTextColor(Color.parseColor("#FF0000")); 
>               }
>             }
>      });
>     Button nextBtn = (Button) findViewById(R.id.nxt_btn);
>     nextBtn.setOnClickListener(new Button.OnClickListener(){
>     public void onClick(View v){
>          if (j == ques1.size() -1) {
>                 showAlert1();
>             }
>           else{ 
>             ++j;
>             ++num;
>             TextView txtque = (TextView) findViewById(R.id.que_txt); 
>             txtque.setText("Q" + num +ques1.get(j));
>                         }      
>          }); 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:10:07.607

问题在于`public void onCheckedChanged(RadioGroup group, int checkedId)` 您正在创建一个基于 checkedId 的选中单选按钮的实例，一旦您调用它就可以为空`clearCheck`。事实是，一旦您`clearCheck`在单击下一个按钮时调用您的单选组，该`onCheckedChanged`事件就会被触发并且它会得到一个空的checkedId。因此，当您执行此操作时，您会得到一个空单选按钮：`RadioButton radioButton = (RadioButton)group. findViewById(checkedId);`

**编辑（更好的解释）：**

将此方法添加到您的类中：

```
private void doProcessingWithRadioButton(int checkedId)
    {
        RadioButton radioButton = (RadioButton)group. findViewById(checkedId);
        String temp = radioButton.getText().toString();
        switch(btn_practicerg.getCheckedRadioButtonId()){
        case R.id.RB1:
            if (btn_practice1.isChecked()){
                btn_practice2.setChecked(false);
                btn_practice3.setChecked(false);
                btn_practice4.setChecked(false);
            }
            break;
        case R.id.RB2:
            if (btn_practice2.isChecked()){
                btn_practice1.setChecked(false);
                btn_practice3.setChecked(false);
                btn_practice4.setChecked(false);
            }
            break;
        case R.id.RB3:
            if (btn_practice3.isChecked()){
                btn_practice1.setChecked(false);
                btn_practice2.setChecked(false);
                btn_practice4.setChecked(false);
            }
            break;
        case R.id.RB4:
            if (btn_practice4.isChecked()){
                btn_practice1.setChecked(false);
                btn_practice2.setChecked(false);
                btn_practice3.setChecked(false);
            }
            break;
        }
        crrtans=new ArrayList<String>(new ArrayList<String>(crrtans));
        if (temp.equals(crrtans.get(l))){
            TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
            txtRadio.setText("" + radioButton.getText() + " IS CORRECT");   
            txtRadio.setTextColor(Color.parseColor("#008000"));
       }else{
          TextView txtRadio = (TextView) findViewById(R.id.rdtxt); 
          txtRadio.setText("" + radioButton.getText() + "is INCORRECT");
          txtRadio.setTextColor(Color.parseColor("#FF0000")); 
       }
    } 
```

现在像这样更改您的代码：

```
btn_practicerg.setOnCheckedChangeListener(new OnCheckedChangeListener(){
        @Override
        public void onCheckedChanged(RadioGroup group, int checkedId) { 
            if(checkedId != -1)
            {
                doProcessingWithRadioButton(checkedId);
            }
        }); 
```

希望这有帮助。如果它解决了您的问题，请不要忘记将此标记为答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:26:30.153

要清除所有单选按钮，即要检查的组中没有单选按钮，请使用

```
clearCheck() 
```

例如你的

```
radiogroupname.clearCheck(); 
```

# php - php中的会话变量和全局变量有什么区别？

> ID：14848145
> 
> 赞同：14
> 
> 时间：2013-02-13T07:00:58.937
> 
> 标签：php

php中的会话和全局变量有什么区别？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-13T07:09:41.647

**全局变量**是对整个应用程序保持通用的变量……它们的值可以在整个应用程序中使用，而**会话变量**是对整个应用程序保持通用但对一个特定用户而言的变量。它们也可以在整个应用程序中使用……但是当特定用户会话结束时它们就会消失。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-30T10:02:38.477

[`global`](http://php.net/manual/en/language.variables.scope.php#language.variables.scope.global)只是访问在顶级范围中声明且在实际范围中不可用的变量的关键字。这与会话没有任何关系：不要在页面之间持续存在。

```
$a = "test";
function useGlobalVar(){
    echo $a;   // prints nothing, $a is not availabe in this scope
    global $a;
    echo $a;   // prints "test"
} 
```

`$GLOBALS``global`是另一种不使用关键字访问顶级范围变量的方法：

```
$a = "test";
function useGlobalVar(){
    echo $GLOBAL['a'];   // prints "test"
} 
```

`global`和之间有一些混淆`superglobals`：[超全局变量](http://php.net/manual/en/language.variables.superglobals.php)（如 $GLOBALS、$_REQUEST、$_SERVER）在任何范围内都可用，而无需进行全局声明。同样，它们不会在页面之间持续存在（$_SESSION 除外）。

$_SESSION 是一个超全局数组，可以在不同的页面上持续存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T07:20:18.557

全局变量是在任何函数或类范围之外声明并通过使用`global`关键字在另一个函数内部使用的任何变量，例如

```
$a = 123; // this is a global variable
function foo()
{
    global $a; // and this is the explicit declaration
} 
```

超级全局变量类似于常规全局变量，只是它们在函数中隐式声明为全局变量，以便它们始终可用。

最后，会话变量可以通过超级全局访问，`$_SESSION`并通过发送和接受会话标识符来永久保存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T07:06:53.647

会话变量是存储在服务器端的变量，对于给定的客户端连接持续存在。

全局变量是在您的 php 代码中具有通用（全局...）范围的变量。这些变量不一定依赖于给定的客户端连接

会话见： [http ://www.php.net/manual/en/book.session.php](http://www.php.net/manual/en/book.session.php)

[对于全局变量，请参见： http](http://www.tutorialspoint.com/php/php_global_variables.htm) ://www.tutorialspoint.com/php/php_global_variables.htm

最后，这类问题不适合本论坛，请参阅： [https ://stackoverflow.com/faq#dontask](https://stackoverflow.com/faq#dontask)

“你应该只根据你所面临的实际问题提出实用的、可回答的问题。喋喋不休、开放式的问题会降低我们网站的实用性，并将其他问题推到首页之外。

你的问题应该有合理的范围。如果你能想象一本书可以回答你的问题，那你就问得太多了。

如果您提出问题的动机是“我想参加关于______的讨论”，那么您不应该在这里提问。但是，如果您的动机是“我希望其他人向我解释______”，那么您可能还可以。（当然欢迎在我们的实时网络聊天中讨论。）”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-07T08:21:21.823

全局变量是可以在所有 php 文件中访问的变量，php 定义了一些可用于所有 php 脚本的全局变量。例如 - $_POST 、 $_SESSION 、 $_REQUEST 。

global 也是一个关键字，当您想要访问在函数外部定义的变量时使用。

```
 <?php
  $name = "xyz" ;
  function hello(){
  global $name ;
  echo $name ;
  }

  ?> 
```

# linux - shell 脚本确实使用 cat 读取了文件

> ID：14848147
> 
> 赞同：1
> 
> 时间：2013-02-13T07:01:13.660
> 
> 标签：linux, bash

```
#!/bin/bash

# Reading Manthan Status
echo "Manthan cat started"
cat /var/www/symmetric-ds-3.1.6/bin/my_mon.txt | while read LINE

do
    echo "Inside my loop"
    echo "$LINE"
    if [ "$LINE" == "false" ]; then
        echo "startedif_my"
        sudo lsof -n -i:8082 | grep LISTEN | awk '{ print $2 }' | uniq |sudo  xargs kill -9;
        sleep 30;
        sudo sh /var/www/symmetric-ds-3.1.6/bin/sym --port 8082 --server;
        break
    fi
done

#Reading Panel Status
echo "Panel cat started"
cat /var/www/symmetric-ds-3.1.6/bin/panel_mon.txt | while read LINE

do
    echo "Inside panel loop"
    echo "$LINE"
    if [ "$LINE" == "false" ]; then

        sudo lsof -n -i:8082 | grep LISTEN | awk '{ print $2 }' | uniq |sudo  xargs kill -9;
        sleep 30;
        sudo sh /var/www/symmetric-ds-3.1.6/bin/sym --port 8082 --server;
        break
    fi
done
echo "end of script" 
```

当我运行上面的脚本时，脚本会读取第一个文件并回显 $Line。之后，它不会读取第二个文件，它只会执行脚本结尾的最后一个 echo。

你能建议为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:53:55.157

```
value=$(</var/www/symmetric-ds-3.1.6/bin/my_mon.txt)
if [ "$LINE" == "false" ]; then
echo"Inside loop"
fi 
```

这对我有用。我猜罪魁祸首是猫

# c++ - 在 32 位操作系统上生成 64 位可执行文件

> ID：14848153
> 
> 赞同：7
> 
> 时间：2013-02-13T07:01:34.527
> 
> 标签：c++, 32bit-64bit

我正在使用 C++ 开发 32 位 Windows XP 操作系统。但我必须为 64 位 Windows 7 操作系统构建一个可执行文件。我该怎么做呢？我不想运行可执行文件，我只想生成它。另外，如果还需要了解处理器，请询问我。

我在这些站点中阅读了一些关于它的内容，[x64 的交叉编译](http://cmake.3232098.n2.nabble.com/Cross-compiling-for-Windows-x64-amd64-on-32-bit-Windows-td7581877.html)和[关于交叉编译的 msdn 文章](http://blogs.msdn.com/b/windowssdk/archive/2007/09/08/updated-windows-sdk-visual-c-cross-compilers.aspx)。但我无法理解其中的许多内容。任何人都可以逐步解释我如何解决这个问题。

除此之外，谁能告诉我什么是cmake？也可以在安装结束后检查我是否有完整安装的 Visual Studio 或默认安装。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T07:19:26.517

如果您使用的是 Visual Studio，只需配置链接器即可为 64 位处理器构建代码。

打开项目属性并选择`Configuration properties | Linker | Advanced`并切换`Target Machine`到`MachineX64`.

或者，您可以添加新的构建平台，IDE 将为您配置这些选项。打开配置管理器，选择您的项目，然后在平台列上选择`<New...>`。然后选择64位处理器。

# android - 如何在 android 中为 webview 中的 epub 文本突出显示当前口语文本

> ID：14848157
> 
> 赞同：2
> 
> 时间：2013-02-13T07:02:17.703
> 
> 标签：android, android-webview, epub

我正在使用 webview 来呈现 epub 数据并能够显示数据并实现文本到文本的语音功能！现在我想在 webview 中突出显示当前阅读文本！为此，我尝试使用 like

```
webview.findall(...);
webview.setSelected(true);
webview.findNext(true); 
```

但是没用！！

# android - 我试图在我的天气应用程序中实现 AsyncTask。它显示以下错误 String weatherString = QueryYahooWeather();

> ID：14848160
> 
> 赞同：0
> 
> 时间：2013-02-13T07:02:44.163
> 
> 标签：android

我在以下行中收到错误 String weatherString = QueryYahooWeather(); 它显示“AndroidYahooWeatherDOMActivity 类型的方法 QueryYahooWeather() 未定义”

```
import java.io.BufferedReader;
import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.apache.http.HttpEntity;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;  
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.xml.sax.SAXException;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class AndroidYahooWeatherDOMActivity extends Activity {

TextView weather;
TextView txtcity;
TextView txtregion;
TextView txtcountry;
TextView txttemp;
TextView txtpressure;
TextView txthumidity;
TextView txtspeed;
TextView txtsunrise;
TextView txtsunset;
TextView txtcondition;

TextView day1;
TextView date1;
TextView low1;
TextView high1;
TextView text1;
TextView day2;
TextView date2;
TextView low2;
TextView high2;
TextView text2;

ImageView img;
ImageView nxtday1;
ImageView nxtday2;

class MyWeather {
    WeatherImageHandler im = new WeatherImageHandler(getApplicationContext());
    WeatherImageHandler im1 = new WeatherImageHandler(getApplicationContext());
    WeatherImageHandler im2 = new WeatherImageHandler(getApplicationContext());
    String description;
    String city;
    String region;
    String country;

    String windChill;
    String windDirection;
    String windSpeed;

    String sunrise;
    String sunset;

    String conditiontext;
    String conditiondate;

    String temp;
    String pressure;
    String humidity;
    String visibility;
    String code;

    String rising;

    // //<yweather:forecast day="Wed" date="28 Nov 2012" low="65" high="87"
    // text="Partly Cloudy" code="29" />
    String day;
    String date;
    String low;
    String high;
    String text;
    String code0;

    String day1;
    String date1;
    String low1;
    String high1;
    String text1;
    String code1;

    String day2;
    String date2;
    String low2;
    String high2;
    String text2;
    String code2;
    //String[] arrDay = { "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun" };

    public String toString() {

        return "\n- " + description + " -\n\n" + "city: " + city + "\n"
                + "region: " + region + "\n" + "country: " + country
                + "\n\n"

                + "Wind\n" + "chill: " + windChill + "\n" + "direction: "
                + windDirection + "\n" + "speed: " + windSpeed + "\n\n"

                + "Sunrise: " + sunrise + "\n" + "Sunset: " + sunset
                + "\n\n"

                + "Condition: " + conditiontext + "\n" + conditiondate
                + "\n\n" + "temp:" + temp + "\n" + "pressure:" + pressure
                + "\n" + "humidity" + humidity + "\n" + "rising" + rising
                + "\n" + "visibility" + visibility + "\n"+"code  :" +code+"\n\n"

                + "day  :" + day
                + "\n" + "date  :" + date + "\n" + "low  :" + low + "\n" + "high  :"
                + high+ "\n" + "text  :" + text+"\n"+"code"+code0+"\n\n"

                + "day  :" + day1
                + "\n" + "date  :" + date1 + "\n" + "low  :" + low1 + "\n" + "high  :"
                + high1+ "\n" + "text  :" + text1+"code"+code1+"\n\n"

                + "day  :" + day2
                + "\n" + "date  :" + date2 + "\n" + "low  :" + low2 + "\n" + "high  :"
                + high2+ "\n" + "text  :" + text2+"code"+code2;

    }
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //weather = (TextView) findViewById(R.id.weather);
    txtcity = (TextView) findViewById(R.id.city);
    txtregion = (TextView) findViewById(R.id.region);
    txtcountry = (TextView) findViewById(R.id.country);
    txttemp = (TextView) findViewById(R.id.temp);
    txtpressure = (TextView) findViewById(R.id.pressure);
    txthumidity = (TextView) findViewById(R.id.humidity);
    txtspeed = (TextView) findViewById(R.id.speed);
    txtsunrise = (TextView) findViewById(R.id.sunrise);
    txtsunset = (TextView) findViewById(R.id.sunset);
    txtcondition = (TextView) findViewById(R.id.condition);

    day1 = (TextView) findViewById(R.id.day1);
    date1 = (TextView) findViewById(R.id.date1);
    low1 = (TextView) findViewById(R.id.low1);
    high1 = (TextView) findViewById(R.id.high1);
    text1 = (TextView) findViewById(R.id.text1);

    day2 = (TextView) findViewById(R.id.day2);
    date2 = (TextView) findViewById(R.id.date2);
    low2 = (TextView) findViewById(R.id.low2);
    high2 = (TextView) findViewById(R.id.high2);
    text2 = (TextView) findViewById(R.id.text2);

    img = (ImageView) findViewById(R.id.imageView1);
    nxtday1 = (ImageView) findViewById(R.id.nextday1);
    nxtday2 = (ImageView) findViewById(R.id.nextday2);

    String weatherString = QueryYahooWeather();
    Document weatherDoc = convertStringToDocument(weatherString);

    MyWeather weatherResult = parseWeather(weatherDoc);
    txtcity.setText(weatherResult.city);
    txtregion.setText(weatherResult.region);
    txtcountry.setText(weatherResult.country);
    txttemp.setText(weatherResult.temp);
    txtpressure.setText(weatherResult.pressure);
    txthumidity.setText(weatherResult.humidity);
    txtspeed.setText(weatherResult.windSpeed);
    txtsunrise.setText(weatherResult.sunrise);
    txtsunset.setText(weatherResult.sunset);
    txtcondition.setText(weatherResult.date);

    day1.setText(weatherResult.day);
    date1.setText(weatherResult.date);
    low1.setText(weatherResult.low);
    high1.setText(weatherResult.high);
    text1.setText(weatherResult.text);

    day2.setText(weatherResult.day1);
    date2.setText(weatherResult.date1);
    low2.setText(weatherResult.low1);
    high2.setText(weatherResult.high1);
    text2.setText(weatherResult.text1);

    img.setImageDrawable(weatherResult.im.getWeatherImage());
    nxtday1.setImageDrawable(weatherResult.im1.getWeatherImage());
    nxtday2.setImageDrawable(weatherResult.im2.getWeatherImage());
}

    private MyWeather parseWeather(Document srcDoc) {

    MyWeather myWeather = new MyWeather();

    myWeather.description = srcDoc.getElementsByTagName("description")
            .item(0).getTextContent();

    Node locationNode = srcDoc.getElementsByTagName("yweather:location")
            .item(0);
    myWeather.city = locationNode.getAttributes().getNamedItem("city")
            .getNodeValue().toString();
    myWeather.region = locationNode.getAttributes().getNamedItem("region")
            .getNodeValue().toString();
    myWeather.country = locationNode.getAttributes()
            .getNamedItem("country").getNodeValue().toString();

    Node windNode = srcDoc.getElementsByTagName("yweather:wind").item(0);
    myWeather.windChill = windNode.getAttributes().getNamedItem("chill")
            .getNodeValue().toString();
    myWeather.windDirection = windNode.getAttributes()
            .getNamedItem("direction").getNodeValue().toString();
    myWeather.windSpeed = windNode.getAttributes().getNamedItem("speed")
            .getNodeValue().toString();

    Node atmosphereNode = srcDoc
            .getElementsByTagName("yweather:atmosphere").item(0);
    myWeather.humidity = atmosphereNode.getAttributes()
            .getNamedItem("humidity").getNodeValue().toString();
    myWeather.visibility = atmosphereNode.getAttributes()
            .getNamedItem("visibility").getNodeValue().toString();
    myWeather.pressure = atmosphereNode.getAttributes()
            .getNamedItem("pressure").getNodeValue().toString();
    myWeather.rising = atmosphereNode.getAttributes()
            .getNamedItem("rising").getNodeValue().toString();

    Node astronomyNode = srcDoc.getElementsByTagName("yweather:astronomy")
            .item(0);
    myWeather.sunrise = astronomyNode.getAttributes()
            .getNamedItem("sunrise").getNodeValue().toString();
    myWeather.sunset = astronomyNode.getAttributes().getNamedItem("sunset")
            .getNodeValue().toString();

    Node conditionNode = srcDoc.getElementsByTagName("yweather:condition")
            .item(0);
    myWeather.conditiontext = conditionNode.getAttributes()
            .getNamedItem("text").getNodeValue().toString();
    myWeather.conditiondate = conditionNode.getAttributes()
            .getNamedItem("date").getNodeValue().toString();
    myWeather.temp = conditionNode.getAttributes().getNamedItem("temp")
            .getNodeValue().toString();
    myWeather.code = conditionNode.getAttributes().getNamedItem("code")
            .getNodeValue().toString();
    myWeather.im.setWeatherImage(myWeather.code);

    Node forecastNode1 = srcDoc.getElementsByTagName("yweather:forecast")
            .item(0);
    myWeather.day = forecastNode1.getAttributes().getNamedItem("day")
            .getNodeValue().toString();
    myWeather.date = forecastNode1.getAttributes().getNamedItem("date")
            .getNodeValue().toString();
    myWeather.low = forecastNode1.getAttributes().getNamedItem("low")
            .getNodeValue().toString();
    myWeather.high = forecastNode1.getAttributes().getNamedItem("high")
            .getNodeValue().toString();
    myWeather.text = forecastNode1.getAttributes().getNamedItem("text")
            .getNodeValue().toString();
    myWeather.code0 = forecastNode1.getAttributes().getNamedItem("code")
            .getNodeValue().toString();
    myWeather.im1.setWeatherImage(myWeather.code0);

    Node forecastNode2 = srcDoc.getElementsByTagName("yweather:forecast")
            .item(1);
    myWeather.day1 = forecastNode2.getAttributes().getNamedItem("day")
            .getNodeValue().toString();
    myWeather.date1 = forecastNode2.getAttributes().getNamedItem("date")
            .getNodeValue().toString();
    myWeather.low1 = forecastNode2.getAttributes().getNamedItem("low")
            .getNodeValue().toString();
    myWeather.high1 = forecastNode2.getAttributes().getNamedItem("high")
            .getNodeValue().toString();
    myWeather.text1 = forecastNode2.getAttributes().getNamedItem("text")
            .getNodeValue().toString();
    myWeather.code1 = forecastNode1.getAttributes().getNamedItem("code")
            .getNodeValue().toString();
    myWeather.im2.setWeatherImage(myWeather.code1);

    return myWeather;
}

private Document convertStringToDocument(String src) {
    Document dest = null;

    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder parser;

    try {
        parser = dbFactory.newDocumentBuilder();
        dest = parser.parse(new ByteArrayInputStream(src.getBytes()));
    } catch (ParserConfigurationException e1) {
        e1.printStackTrace();
        Toast.makeText(AndroidYahooWeatherDOMActivity.this, e1.toString(),
                Toast.LENGTH_LONG).show();
    } catch (SAXException e) {
        e.printStackTrace();
        Toast.makeText(AndroidYahooWeatherDOMActivity.this, e.toString(),
                Toast.LENGTH_LONG).show();
    } catch (IOException e) {
        e.printStackTrace();
        Toast.makeText(AndroidYahooWeatherDOMActivity.this, e.toString(),
                Toast.LENGTH_LONG).show();
    }

    return dest;
}
public class weather extends AsyncTask<String, Integer, String>
{

@Override
protected String doInBackground(String... params) 
{
    // TODO Auto-generated method stub

    private String QueryYahooWeather () 
    {

    String qResult = "";
    String queryString = "http://weather.yahooapis.com/forecastrss?w=2295422";

    HttpClient httpClient = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet(queryString);

    try {
        HttpEntity httpEntity = httpClient.execute(httpGet).getEntity();

        if (httpEntity != null) {
            InputStream inputStream = httpEntity.getContent();
            Reader in = new InputStreamReader(inputStream);
            BufferedReader bufferedreader = new BufferedReader(in);
            StringBuilder stringBuilder = new StringBuilder();

            String stringReadLine = null;

            while ((stringReadLine = bufferedreader.readLine()) != null) {
                stringBuilder.append(stringReadLine + "\n");
            }

            qResult = stringBuilder.toString();
        }

    } catch (ClientProtocolException e) {
        e.printStackTrace();
        Toast.makeText(AndroidYahooWeatherDOMActivity.this, e.toString(),
                Toast.LENGTH_LONG).show();
    } catch (IOException e) {
        e.printStackTrace();
        Toast.makeText(AndroidYahooWeatherDOMActivity.this, e.toString(),
                Toast.LENGTH_LONG).show();
    }

    return qResult;
} 
```

}}

它还显示“语法错误，插入“}”以完成 MethodBody”，但每个大括号都完全闭合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:04:48.457

看这个：

```
@Override
protected String doInBackground(String... params) 
{
    // TODO Auto-generated method stub

    private String QueryYahooWeather () 
    { 
```

您试图在另一种方法中声明一种方法。你不能那样做。

这是你两个问题的主要根源。（大括号不正确，因为您需要`doInBackground`在开始`QueryYahooWeather`方法之前关闭，而`QueryYahooWeather`无法找到因为您没有正确声明它。）

接下来，您实际上已经发布了两个不同类的源代码（这并不明显，因为您没有适当地缩进代码，而且还有很多）。调用`QueryYahooWeather`是 within `AndroidYahooWeatherDOMActivity`，但方法本身是在`weather`类中声明的。

您应该*移动*该方法*或*使用 的实例`weather`来调用它。我不清楚你应该如何重新设计这段代码，尽管我怀疑你必须这样做。除此之外，您不应该在 UI 线程中同步进行任何网络调用。您可能应该让您的异步任务回调以在完成时填充您的 UI，而不是尝试仅同步获取结果。

考虑到这个设计问题，我*强烈*建议您开始第二个项目*只是*为了做到这一点。你现在有大量的代码，其中大部分都不需要为“我如何查询雅虎天气并在 UI 中显示结果”的问题获得正确的设计解决方案。一旦你在一个更简单的项目中制定了正确的设计，你就可以将它应用到你更复杂的项目中。

此外，我建议重命名该方法以`queryYahooWeather`符合 Java 命名约定。同样，`weather`该类应该*至少* `Weather`是，但最好是更具描述性的东西。最后，我建议将每个类放在自己的源文件中，以使您的项目更易于导航。

# iphone - 使用 ASIHTTPRequest 从 iPhone 上传多个图像到服务器

> ID：14848163
> 
> 赞同：0
> 
> 时间：2013-02-13T07:03:02.340
> 
> 标签：iphone, objective-c, asiformdatarequest

我无法将多个图像上传到服务器。我正在使用以下代码进行上传：

```
-(void)upload {
 NSString *path=[NSString stringWithFormat:@"%@.php",webserviceURL];
 ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:path]];
 [request addPostValue:@"306" forKey:@"id"];

 for (int i= 0; i<[imageArray count]; i++) {
    NSData *imgData = UIImageJPEGRepresentation([imageArray objectAtIndex:i],1.0);
    NSDate *date....

     .....

    NSLog(@"dateString");//for getting different file name..

    [request addData:imgData withFileName:[NSString stringWithFormat:@"%@.jpg",dateString] 
    andContentType:@"image/jpeg" forKey:@"image"];
  }

 [request setDelegate:self]; 
 [request startAsynchronous];
} 
```

使用此代码，我只能上传一张图片。如何使用同一个密钥上传多张图片？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:00:36.833

请求：ASIFormDataRequest 很旧，作者没有更新。您应该切换到[AFNetworking](https://github.com/AFNetworking/AFNetworking)。

如果您使用 PHP 作为后端以这种方式接收文件，您应该能够发送文件数组。

```
NSData *imageToUpload = UIImageJPEGRepresentation([UIImage imageNamed:@"profile-image-placeholder"], 10);
AFHTTPClient *client= [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:@"http://www.imthi.com"]];

NSMutableURLRequest *request = [client multipartFormRequestWithMethod:@"POST" path:@"/info.php" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
    [formData appendPartWithFileData: imageToUpload name:@"image[0]" fileName:@"temp.jpeg" mimeType:@"image/jpeg"];
    [formData appendPartWithFileData: imageToUpload name:@"image[1]" fileName:@"temp.jpeg" mimeType:@"image/jpeg"];
    [formData appendPartWithFileData: imageToUpload name:@"image[2]" fileName:@"temp.jpeg" mimeType:@"image/jpeg"];
}];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
[operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation * _operation, id responseObject) {
    NSString *response = [_operation responseString];
    NSLog(@"response: [%@]",response);
} failure:^(AFHTTPRequestOperation * _operation, NSError *error) {
    if([_operation.response statusCode] == 403){
        NSLog(@"Upload Failed");
        return;
    }
}];
[operation start]; 
```

诀窍是使用 image[0]、image [1](https://github.com/AFNetworking/AFNetworking)、image[2] 等作为添加更多文件的关键。尝试更改您的代码，它也应该适用于您当前的库。

```
[request addData:imgData withFileName:[NSString stringWithFormat:@"%@.jpg",dateString] andContentType:@"image/jpeg" forKey:[NSString stringWithFormat:@"image[%d]",i]]; 
```

在您的 PHP 上，您应该收到这样的文件..

```
(
[image] => Array
    (
        [name] => Array
            (
                [0] => temp.jpeg
                [1] => temp.jpeg
                [2] => temp.jpeg
            )

        [type] => Array
            (
                [0] => image/jpeg
                [1] => image/jpeg
                [2] => image/jpeg
            )

        [tmp_name] => Array
            (
                [0] => /tmp/php4XsVR8
                [1] => /tmp/phpDBPzVO
                [2] => /tmp/phpu26eZu
            )

        [error] => Array
            (
                [0] => 0
                [1] => 0
                [2] => 0
            )

        [size] => Array
            (
                [0] => 2207
                [1] => 2207
                [2] => 2207
            )

    ) 
```

)

希望这可以解决您的问题.. :-)

# jquery - 显示标签进度

> ID：14848166
> 
> 赞同：1
> 
> 时间：2013-02-13T07:03:04.717
> 
> 标签：jquery, lazy-loading, image, jquery-lazyload

我正在编写一个处理大图像的 Web 应用程序。为了使页面的加载有点响应，我使用了 Lazy Load Jquery 插件。（[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)）。

但似乎我需要的是显示图像加载的进度，因为图像加载时间超过 20 秒。

我将如何为 img 标签的进度添加事件侦听器？我想以百分比显示进度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:57:42.660

其他选项是在其位置显示低质量的快速加载图像，直到延迟加载替换它。如果你真的想监控进度，你可能不得不通过 AJAX 来做，像这样 - [http://blogs.adobe.com/webplatform/2012/07/10/image-progress-event-progress/](http://blogs.adobe.com/webplatform/2012/07/10/image-progress-event-progress/)

# r - 将列表附加到 R 中的列表列表

> ID：14848172
> 
> 赞同：66
> 
> 时间：2013-02-13T07:03:30.577
> 
> 标签：r, list, matrix, append, extend

我在将数据附加到已经采用列表格式的列表时遇到问题。我有一个程序将在模拟循环期间导出结果对象。数据本身存储为矩阵列表。我的想法是将这些列表存储在一个列表中，然后将此列表列表保存为 R 对象以供以后分析，但是我在正确实现这一点时遇到了一些问题。我将展示我对小型抽象示例所做的事情，仅使用值而不是模拟中的矩阵数据：

假设我已经运行了 3 次模拟循环。在迭代期间，需要将结果列表收集到我将保存为 R 对象的一个​​列表列表中：

List 包含其他列表并被保存： `outlist1 <- list()`

第一次迭代： `resultsa <- list(1,2,3,4,5)`

`outlist <- append(outlist1,resultsa)`

第二次迭代： `resultsb <- list(6,7,8,9,10)`

`outlist <- append(outlist1,b)`

第三次迭代： `resultsc <- list(11,12,13,14,15)`

`outlist <- list(outlist2,c)`

但是，此解决方案不适用于以这种方式增长包含列表的列表，所需的结果是：

```
>outlist
[[1]]
[[1]][[1]]
[1] 1

[[1]][[2]]
[1] 2

[[1]][[3]]
[1] 3

[[1]][[4]]
[1] 4

[[1]][[5]]
[1] 5

[[2]]
[[2]][[1]]
[1] 6

[[2]][[2]]
[1] 7

[[2]][[3]]
[1] 8

[[2]][[4]]
[1] 9

[[2]][[5]]
[1] 10

[[3]]
[[3]][[1]]
[1] 11

[[3]][[2]]
[1] 12

[[3]][[3]]
[1] 13

[[3]][[4]]
[1] 14

[[3]][[5]]
[1] 15 
```

然而，我得到的是：

```
> outlist3
[[1]]
[[1]][[1]]
[[1]][[1]][[1]]
[1] 1

[[1]][[1]][[2]]
[1] 2

[[1]][[1]][[3]]
[1] 3

[[1]][[1]][[4]]
[1] 4

[[1]][[1]][[5]]
[1] 5

[[1]][[2]]
[[1]][[2]][[1]]
[1] 6

[[1]][[2]][[2]]
[1] 7

[[1]][[2]][[3]]
[1] 8

[[1]][[2]][[4]]
[1] 9

[[1]][[2]][[5]]
[1] 10 
```

如何增加列表，以使格式化的结果列表类似于所需的结果？如果我对这些列表进行进一步分析，我需要能够轻松访问这些元素。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-02-13T07:12:57.167

会不会是这个，你想要的：

```
# Initial list:
myList <- list()

# Now the new experiments
for(i in 1:3){
  myList[[length(myList)+1]] <- list(sample(1:3))
}

myList 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-02-13T07:56:11.673

```
outlist <- list(resultsa)
outlist[2] <- list(resultsb)
outlist[3] <- list(resultsc) 
```

`append`的帮助文件说它是用于向量的。但它可以在这里使用。我以为我以前尝试过，但是 OP 的代码中有一些奇怪的异常可能会误导我：

```
outlist <- list(resultsa)
outlist <- append(outlist,list(resultsb))
outlist <- append(outlist,list(resultsc)) 
```

结果相同。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-02-13T16:08:57.307

还有其他两种解决方案涉及分配给列表末尾之后的索引。这是一个使用`append`.

```
resultsa <- list(1,2,3,4,5)
resultsb <- list(6,7,8,9,10)
resultsc <- list(11,12,13,14,15)

outlist <- list(resultsa)
outlist <- append(outlist, list(resultsb))
outlist <- append(outlist, list(resultsc)) 
```

这给出了您要求的格式

```
> str(outlist)
List of 3
 $ :List of 5
  ..$ : num 1
  ..$ : num 2
  ..$ : num 3
  ..$ : num 4
  ..$ : num 5
 $ :List of 5
  ..$ : num 6
  ..$ : num 7
  ..$ : num 8
  ..$ : num 9
  ..$ : num 10
 $ :List of 5
  ..$ : num 11
  ..$ : num 12
  ..$ : num 13
  ..$ : num 14
  ..$ : num 15 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2015-05-21T02:46:33.540

这个答案类似于公认的答案，但不那么复杂。

```
L<-list()
for (i in 1:3) {
L<-c(L, list(list(sample(1:3))))
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-10-28T23:35:39.377

通过首先将列表赋值给变量

```
myVar <- list() 
```

它开启了等级分配的可能性

```
myVar[[1]] <- list()
myVar[[2]] <- list() 
```

等等......所以现在可以做

```
myVar[[1]][[1]] <- c(...)
myVar[[1]][[2]] <- c(...) 
```

# 或者

```
myVar[[1]][['subVar']] <- c(...) 
```

等等

也可以直接指定名称（而不是 $）

```
myVar[['nameofsubvar]] <- list() 
```

进而

```
myVar[['nameofsubvar]][['nameofsubsubvar']] <- c('...') 
```

要记住的重要一点是始终使用双括号来使系统正常工作

那么获取信息很简单

```
myVar$nameofsubvar$nameofsubsubvar 
```

等等...

例子：

```
a <-list()
a[['test']] <-list()
a[['test']][['subtest']] <- c(1,2,3)
a
$test
$test$subtest
[1] 1 2 3

a[['test']][['sub2test']] <- c(3,4,5)
a
$test
$test$subtest
[1] 1 2 3

$test$sub2test
[1] 3 4 5 
```

R语言的一个很好的特性是它的层次定义......

我将它用于复杂的实现（具有两个以上的级别）并且它有效！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-24T07:05:51.437

只需在下面对 Brian 的回答进行注释，第一个分配 to`outlist`也可以是一个`append`语句，因此您也可以执行以下操作：

```
resultsa <- list(1,2,3,4,5)
resultsb <- list(6,7,8,9,10)
resultsc <- list(11,12,13,14,15)

outlist <- list()
outlist <- append(outlist,list(resultsa))
outlist <- append(outlist, list(resultsb))
outlist <- append(outlist, list(resultsc)) 
```

如果您想在循环中从头开始构建列表，这有时会很有帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-08-04T07:28:37.657

该`purrr`软件包具有许多用于处理列表的便捷功能。该`flatten`命令可以清除不需要的嵌套。

```
resultsa <- list(1,2,3,4,5)
resultsb <- list(6,7,8,9,10)
resultsc <- list(11,12,13,14,15)

nested_outlist <- list(resultsa, resultsb, resultsc)
outlist <- purrr::flatten(nested_outlist) 
```

# java - 正则表达式接受可选的 + 在手机号码的开头（也只接受数字）

> ID：14848174
> 
> 赞同：0
> 
> 时间：2013-02-13T07:03:41.123
> 
> 标签：java, regex

我有这个只接受数字的 mobileNumber 正则表达式`"[1-9][0-9]*"`。
但我需要在开始时有一个可选的 + 。但用户不能在开头输入 +。
例如。+9089098909
例如。9089098909
例如 +919089098909
我最多可以接受 13 个字符。
我正在做这件事。谁能告诉如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T07:05:13.720

放在`\+?`正则表达式的开头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T08:01:24.260

您在`^\+?\d{,13}$`. 这可确保您的号码不超过 13 位，并且前面有一个可选的 +。

# php - 是否可以从在 PHP 中发布的值获取 URL 值？

> ID：14848178
> 
> 赞同：1
> 
> 时间：2013-02-13T07:04:05.513
> 
> 标签：php, forms, post

我正在处理从一个域到另一个域的表单 POSTING 值（例如：`www.something1.com`to `www.something2.com`）。

如何验证请求是从哪里发布的`www.something1.com`？或者别的地方。

*   是否可以获取传入的请求 URL？
*   有没有其他验证方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T07:06:48.230

检查 的值`$_SERVER['HTTP_REFERER']`。一些浏览器可能会隐藏或欺骗此标头，但大多数浏览器会正确发送。

但是请记住，没有办法保证正确的推荐，很容易伪造。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T08:56:11.120

以答案形式发表我的评论，因为我不相信任何当前的答案都可以解决您的主要问题。您想要验证表单在提交到另一个域时出现的源域。

简短的回答是**No**，您无法验证它（至少出于安全原因）。`$_SERVER['HTTP_REFERER']`但是，根据[PHP 手册](http://php.net/manual/en/reserved.variables.server.php)，可以为您提供第一个域的可用选项是：

> 将用户代理引向当前页面的页面地址（如果有）。这是由用户代理设置的。不是所有的用户代理都会设置这个，有些提供修改 HTTP_REFERER 作为一个特性的能力。简而言之，它不能真正被信任。

问题在于表单是由客户端提交的，并且发送到“server2”的*所有*数据都可以/将被恶意用户修改，以绕过您可能拥有的任何安全/验证。唯一的其他选择是放置一些需要与表单一起提交的验证，但使其接近有效的唯一方法是更改​​它，并经常更改它。（即，也许每分钟？）。但无论您添加什么，都需要提交 - 恶意用户可以完全控制发送的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:19:35.397

您可以将 URL 作为参数传递[“http://site.com/page2.php?prevUrl=”.urlencode(“http://site.com/page1.php](http://site.com/page1.php) ” [)](http://site.com/page2.php?prevUrl=)。

希望有帮助

# python - 如何在 python 中处理 MySQL 从属故障转移？

> ID：14848182
> 
> 赞同：4
> 
> 时间：2013-02-13T07:04:25.170
> 
> 标签：python, mysql, failover

是否有一种普遍接受的方式来处理 python 代码中的 MySQL 从数据库故障转移？

SQLAlchemy 连接池（或其他方法）是否有任何好的包装器，它们知道副本并可以自动切换到它们？是否有可以执行此操作的 DB-API 游标的标准包装器？

我记得在 PHP 中使用了一个 Memcached 库来实现这种行为（你给它一个 memcached 主机列表，它会跟踪哪些主机已关闭）。是否有任何可接受的方式使用我缺少的 python 和 MySQL 执行此操作？

# c# - 在 Blend 中为现有 UI 创建示例数据？

> ID：14848184
> 
> 赞同：0
> 
> 时间：2013-02-13T07:04:26.710
> 
> 标签：c#, xaml, windows-phone-8, expression-blend, sample-data

我正在尝试在 Blend 中连接 WP8 应用程序的示例数据。

所有教程似乎都是围绕示例数据构建他们的 UI。我已经有一个 UI，只想填充示例数据。如果我将示例数据拖到 UI 控件，它会被连接到示例数据的中继器代替。

如何在不更改 ui 的情况下从 Blend 添加示例数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:59:56.193

魔术发生在拖动修饰键上。
**SHIFT** -drag 是我一直在寻找的。如果您只想绑定示例数据中的第一项，请添加**CTRL 。**

[这篇优秀的文章](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2010/11/26/blend-bits-18-sample-data.aspx)提供了截图。

# sql - 从 #temp 表更新变量表 - 在预期条件的上下文中指定的非布尔类型的表达式

> ID：14848186
> 
> 赞同：1
> 
> 时间：2013-02-13T07:04:36.030
> 
> 标签：sql, sql-server, sql-server-2005, sql-update

我有一张`#temp`包含订单详情的表格，例如

```
OrderID     CustomerID  DeliveredBy
1           10          12
2           13          14
3           15          14 
```

我有一个`@Orders` 表变量（在这个阶段只包含特定的订单号 - 但没有来自 DeliveryDetails 的客户的 ID），其列：

```
OrderID     CustomerName    DeliveredByName
1
2
3 
```

（这只是情况的一个例子）

我需要使用`@Orders`表中`CustomerName,DeliveredByName`的 ID更新`#temp`表

```
Update @Orders
set 
    CustomerName = c.Name,
    DeliveredByName = d.Name
from @Orders o1
         join #temp t                on o1.OrderID = t.OrderID
    left join Customers c on o1.CustomerID = c.CustomerID    
    left join DeliveryDetails d on o1.DeliveredByID = d.DeliveredByID 
```

但得到错误：

> 在预期条件的上下文中指定的非布尔类型表达式，靠近“更新”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:07:04.920

由于您为 指定了别名，因此`@orders`您必须在更新子句中使用它，否则删除该别名。试试这个：

```
UPDATE o1   <-------- here use UPDATE o1 instead of UPDATE @orders
SET o1.CustomerName    = c.Name,
    o1.DeliveredByName = d.Name
FROM @Orders AS o1
INNER JOIN #temp          AS t ON o1.OrderID       = t.OrderID
LEFT JOIN Customers       AS c ON o1.CustomerID    = c.CustomerID    
LEFT JOIN DeliveryDetails AS d ON o1.DeliveredByID = d.DeliveredByID; 
```

# c# - 如何打印按下了哪些键？

> ID：14848187
> 
> 赞同：3
> 
> 时间：2013-02-13T07:04:46.927
> 
> 标签：c#, hotkeys

大多数使用热键的程序都允许用户查看实际按下了哪些键，但我不确定它是如何完成的。作为参考，请参阅以下随机程序的屏幕截图，该程序捕获了按钮组合是什么：

![在此处输入图像描述](../Images/c0bc3ccec85f349a323801ec3f86ef5c.png)

我怎样才能实现这样的事情？我正在阅读的事件是 Type `System.Windows.Forms.KeyEventArgs`。有许多键没有描述其实际值，还有一些键的值不准确。除了找出每个键的代码并手动显示它们之外，没有其他解决方案吗？

编辑：为澄清起见，我想获得一个用户友好的字符串表示，如上面的屏幕截图所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:24:01.593

该事件具有和`Alt`的布尔属性。`Control``Shift`

`KeyCode`的类型是[System.Windows.Forms.Keys](http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx)。它有一个`[Flags]`属性，但仅适用于`Alt`,`Control`和`Shift`。所有其他键都有一个*常规*值。

```
private void showKeys(object sender, KeyEventArgs e)
{
    List<string> keys = new List<string>();

    if (e.Control == true)
    {
        keys.Add("CTRL");
    }

    if (e.Alt == true)
    {
        keys.Add("ALT");
    }

    if (e.Shift == true)
    {
        keys.Add("SHIFT");
    }

    switch (e.KeyCode)
    {
        case Keys.ControlKey:
        case Keys.Alt:
        case Keys.ShiftKey:
        case Keys.Menu:
            break;
        default:
            keys.Add(e.KeyCode.ToString()
                .Replace("Oem", string.Empty)
                );
            break;
    }

    e.Handled = true;

    textBox1.Text = string.Join(" + ", keys);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:13:58.807

[KeyEventArgs.KeyCode 属性....](http://msdn.microsoft.com/en-us/library/system.windows.forms.keyeventargs.keycode.aspx)

如果您可以使用 javascript，您将拥有每个键的代码

[javascript中的键码](https://stackoverflow.com/questions/5603195/full-list-of-javascript-keycodes)

我发现这很有趣 Keyeventargs.Keycode [http://www.asquare.net/javascript/tests/KeyCode.html](http://www.asquare.net/javascript/tests/KeyCode.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:19:43.107

您可以通过此代码按下女巫键（对于按下单个键或多个键，将表单 KeyPreview 设置为 true ）

```
 private void Form1_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
    {
        label1.Text = null;
        label1.Text=e.Modifiers.ToString();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T07:27:35.910

对于 win-form，您首先需要将属性[KeyPreview](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.keypreview.aspx)设置为`true`。这样，即使表单的其中一个孩子拥有焦点而表单本身没有焦点，也应该检测到按下的键。

然后，覆盖以下方法之一：[`OnKeyUp`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onkeyup.aspx)、[`OnKeyDown`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onkeydown.aspx)和[`OnKeyPress`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.onkeypress.aspx)。

```
protected override void OnKeyUp(KeyEventArgs e)
{
  switch (e.KeyCode)
  {
      case Keys.F1:
         showHelpTopics();
         break;
  }
} 
```

如果您没有对某些键的描述，只需执行 msdn 搜索，您就会找到它的详细信息。

# jquery - 通过选择多个 td 类在悬停时添加和删除类？

> ID：14848191
> 
> 赞同：0
> 
> 时间：2013-02-13T07:04:54.873
> 
> 标签：jquery, hover

有人可以帮我我的网站是：[zenart website](http://zenartwebdesigncompany.co.uk/)。应该发生的是在表格的每一列中添加一个悬停时的突出显示类。我已经为每个对应的每个 td 添加了相同的类以制作列。

这是我的 jQuery 代码：

```
$(document).ready(function() {          
var a = $

a('.column1, .column2, .column3, .column4, .column5').hover(
   function(){ a(this).addClass('highlight') },
   function(){ a(this).removeClass('highlight') })  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:10:58.090

我看到你的类名是`1column`而不是`column1`..所以选择器应该是

```
 a('.1column, .2column, .3column, .4column, .5column').hover({.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:15:26.880

```
$("[class*=column]").hover( function() { 
```

指定每个元素可能很困难。您可以`*=`匹配该元素的类与`column`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:24:49.733

你可以试试这个：

```
$('nav li').hover(function(){
   $(this).addClass('highlight');
},function(){
   $(this).removeClass('highlight');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T07:42:24.600

这应该适合你。您必须从所有类中提取类的名称并查看`xcolumn`当前选择了哪个类。然后将样式应用于该类。

```
$(".1column, .2column, .3column, .4column, .5column").hover(
        function () {
            var classes = $(this).attr('class');
            var n = classes.indexOf("column");
            var className = "." + classes.substring((n-1),(n+7));
            $(className).addClass("highlight");
        },
        function () {
            var classes = $(this).attr('class');
            var n = classes.indexOf("column");
            var className = "." + classes.substring((n-1),(n+7));
            $(className).removeClass("highlight");
        }
    ); 
```

# ruby-on-rails - Rails_Admin 显示路由错误“没有路由匹配 {:controller=>“home”}”

> ID：14848196
> 
> 赞同：4
> 
> 时间：2013-02-13T07:05:20.070
> 
> 标签：ruby-on-rails, ruby, rails-admin

我按照说明安装了 Rails_Admin，并且也在使用 Devise。当我尝试导航到“/admin”时，出现以下错误：

```
Routing Error

No route matches {:controller=>"home"} 
```

这是我的路线.rb：

```
Ot::Application.routes.draw do

  resources :badgeships
  resources :badges
  resources :profiles
  resources :universities
  resources :degrees
  resources :jobs
  resources :resources
  resources :communities
  resources :networks

  resources :topics do
        resources :posts
  end

  get 'topics/tag/:tag', to: 'topics#index', as: :topic_tag

  get 'resources/tag/:tag', to: 'resources#index', as: :resource_tag

  root :to => 'home#index'

  devise_for :users, path_names: {sign_in: "login", sign_out: "logout"}

  mount RailsAdmin::Engine => '/admin', :as => 'rails_admin'

end 
```

这是我的 rails_admin.rb 初始化程序：

```
RailsAdmin.config do |config|
  config.main_app_name = ["Cool app", "BackOffice"]
  # or somethig more dynamic
  config.main_app_name = Proc.new { |controller| [ "Cool app", "BackOffice - #{controller.params[:action].try(:titleize)}" ] }
end 
```

关于如何让 rails_admin 正常工作的任何想法？

**更新：这是我的耙子路线：**

```
[RailsAdmin] RailsAdmin initialization disabled by default. Pass SKIP_RAILS_ADMIN_INITIALIZER=false if you need it.
              badgeships GET    /badgeships(.:format)                      badgeships#index
                         POST   /badgeships(.:format)                      badgeships#create
           new_badgeship GET    /badgeships/new(.:format)                  badgeships#new
          edit_badgeship GET    /badgeships/:id/edit(.:format)             badgeships#edit
               badgeship GET    /badgeships/:id(.:format)                  badgeships#show
                         PUT    /badgeships/:id(.:format)                  badgeships#update
                         DELETE /badgeships/:id(.:format)                  badgeships#destroy
                  badges GET    /badges(.:format)                          badges#index
                         POST   /badges(.:format)                          badges#create
               new_badge GET    /badges/new(.:format)                      badges#new
              edit_badge GET    /badges/:id/edit(.:format)                 badges#edit
                   badge GET    /badges/:id(.:format)                      badges#show
                         PUT    /badges/:id(.:format)                      badges#update
                         DELETE /badges/:id(.:format)                      badges#destroy
                profiles GET    /profiles(.:format)                        profiles#index
                         POST   /profiles(.:format)                        profiles#create
             new_profile GET    /profiles/new(.:format)                    profiles#new
            edit_profile GET    /profiles/:id/edit(.:format)               profiles#edit
                 profile GET    /profiles/:id(.:format)                    profiles#show
                         PUT    /profiles/:id(.:format)                    profiles#update
                         DELETE /profiles/:id(.:format)                    profiles#destroy
            universities GET    /universities(.:format)                    universities#index
                         POST   /universities(.:format)                    universities#create
          new_university GET    /universities/new(.:format)                universities#new
         edit_university GET    /universities/:id/edit(.:format)           universities#edit
              university GET    /universities/:id(.:format)                universities#show
                         PUT    /universities/:id(.:format)                universities#update
                         DELETE /universities/:id(.:format)                universities#destroy
                 degrees GET    /degrees(.:format)                         degrees#index
                         POST   /degrees(.:format)                         degrees#create
              new_degree GET    /degrees/new(.:format)                     degrees#new
             edit_degree GET    /degrees/:id/edit(.:format)                degrees#edit
                  degree GET    /degrees/:id(.:format)                     degrees#show
                         PUT    /degrees/:id(.:format)                     degrees#update
                         DELETE /degrees/:id(.:format)                     degrees#destroy
                    jobs GET    /jobs(.:format)                            jobs#index
                         POST   /jobs(.:format)                            jobs#create
                 new_job GET    /jobs/new(.:format)                        jobs#new
                edit_job GET    /jobs/:id/edit(.:format)                   jobs#edit
                     job GET    /jobs/:id(.:format)                        jobs#show
                         PUT    /jobs/:id(.:format)                        jobs#update
                         DELETE /jobs/:id(.:format)                        jobs#destroy
               resources GET    /resources(.:format)                       resources#index
                         POST   /resources(.:format)                       resources#create
            new_resource GET    /resources/new(.:format)                   resources#new
           edit_resource GET    /resources/:id/edit(.:format)              resources#edit
                resource GET    /resources/:id(.:format)                   resources#show
                         PUT    /resources/:id(.:format)                   resources#update
                         DELETE /resources/:id(.:format)                   resources#destroy
             communities GET    /communities(.:format)                     communities#index
                         POST   /communities(.:format)                     communities#create
           new_community GET    /communities/new(.:format)                 communities#new
          edit_community GET    /communities/:id/edit(.:format)            communities#edit
               community GET    /communities/:id(.:format)                 communities#show
                         PUT    /communities/:id(.:format)                 communities#update
                         DELETE /communities/:id(.:format)                 communities#destroy
                networks GET    /networks(.:format)                        networks#index
                         POST   /networks(.:format)                        networks#create
             new_network GET    /networks/new(.:format)                    networks#new
            edit_network GET    /networks/:id/edit(.:format)               networks#edit
                 network GET    /networks/:id(.:format)                    networks#show
                         PUT    /networks/:id(.:format)                    networks#update
                         DELETE /networks/:id(.:format)                    networks#destroy
             topic_posts GET    /topics/:topic_id/posts(.:format)          posts#index
                         POST   /topics/:topic_id/posts(.:format)          posts#create
          new_topic_post GET    /topics/:topic_id/posts/new(.:format)      posts#new
         edit_topic_post GET    /topics/:topic_id/posts/:id/edit(.:format) posts#edit
              topic_post GET    /topics/:topic_id/posts/:id(.:format)      posts#show
                         PUT    /topics/:topic_id/posts/:id(.:format)      posts#update
                         DELETE /topics/:topic_id/posts/:id(.:format)      posts#destroy
                  topics GET    /topics(.:format)                          topics#index
                         POST   /topics(.:format)                          topics#create
               new_topic GET    /topics/new(.:format)                      topics#new
              edit_topic GET    /topics/:id/edit(.:format)                 topics#edit
                   topic GET    /topics/:id(.:format)                      topics#show
                         PUT    /topics/:id(.:format)                      topics#update
                         DELETE /topics/:id(.:format)                      topics#destroy
               topic_tag GET    /topics/tag/:tag(.:format)                 topics#index
            resource_tag GET    /resources/tag/:tag(.:format)              resources#index
                    root        /                                          home#index
        new_user_session GET    /users/login(.:format)                     devise/sessions#new
            user_session POST   /users/login(.:format)                     devise/sessions#create
    destroy_user_session DELETE /users/logout(.:format)                    devise/sessions#destroy
 user_omniauth_authorize        /users/auth/:provider(.:format)            devise/omniauth_callbacks#passthru {:provider=>/facebook/}
  user_omniauth_callback        /users/auth/:action/callback(.:format)     devise/omniauth_callbacks#(?-mix:facebook)
           user_password POST   /users/password(.:format)                  devise/passwords#create
       new_user_password GET    /users/password/new(.:format)              devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format)             devise/passwords#edit
                         PUT    /users/password(.:format)                  devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)                    devise/registrations#cancel
       user_registration POST   /users(.:format)                           devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)                   devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)                      devise/registrations#edit
                         PUT    /users(.:format)                           devise/registrations#update
                         DELETE /users(.:format)                           devise/registrations#destroy
             rails_admin        /admin                                     RailsAdmin::Engine

Routes for RailsAdmin::Engine:
    dashboard GET         /                                      rails_admin/main#dashboard
        index GET|POST    /:model_name(.:format)                 rails_admin/main#index
          new GET|POST    /:model_name/new(.:format)             rails_admin/main#new
       export GET|POST    /:model_name/export(.:format)          rails_admin/main#export
  bulk_delete POST|DELETE /:model_name/bulk_delete(.:format)     rails_admin/main#bulk_delete
history_index GET         /:model_name/history(.:format)         rails_admin/main#history_index
  bulk_action POST        /:model_name/bulk_action(.:format)     rails_admin/main#bulk_action
         show GET         /:model_name/:id(.:format)             rails_admin/main#show
         edit GET|PUT     /:model_name/:id/edit(.:format)        rails_admin/main#edit
       delete GET|DELETE  /:model_name/:id/delete(.:format)      rails_admin/main#delete
 history_show GET         /:model_name/:id/history(.:format)     rails_admin/main#history_show
  show_in_app GET         /:model_name/:id/show_in_app(.:format) rails_admin/main#show_in_app 
```

这是我安装 rails_admin 的方法：

```
 rails g rails_admin:install
        SECURITY WARNING: No secret option provided to Rack::Session::Cookie.
        This poses a security threat. It is strongly recommended that you
        provide a secret to prevent exploits that may be possible from crafted
        cookies. This will not be supported in future versions of Rack, and
        future versions will even invalidate your existing user cookies.

        Called from: /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/actionpack-3.2.9/lib/action_dispatch/middleware/session/abstract_store.rb:28:in `initialize'.

           -  Hello, RailsAdmin installer will help you set things up!
           -  I need to work with Devise, let's look at a few things first:
           -  Checking for a current installation of devise...
           -  Found it!
           -  Looks like you've already installed it, good!
           ?  Where do you want to mount rails_admin? Press <enter> for [admin] > manage
        gsub  config/routes.rb
       route  mount RailsAdmin::Engine => '/manage', :as => 'rails_admin'
           -  And you already set it up, good! We just need to know about your user model name...
           -  We found 'user' (should be one of 'user', 'admin', etc.)
           ?  Correct Devise model name if needed. Press <enter> for [user] > User
           -  Now setting up devise with user model name 'User':
    generate  devise
        SECURITY WARNING: No secret option provided to Rack::Session::Cookie.
        This poses a security threat. It is strongly recommended that you
        provide a secret to prevent exploits that may be possible from crafted
        cookies. This will not be supported in future versions of Rack, and
        future versions will even invalidate your existing user cookies.

        Called from: /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/actionpack-3.2.9/lib/action_dispatch/middleware/session/abstract_store.rb:28:in `initialize'.

      invoke  active_record
      create    db/migrate/20130214195616_add_devise_to_users.rb
      insert    app/models/user.rb
       route  devise_for :users
           -  Now you'll need an initializer...
           -  You already have a config file. You're updating, heh? I'm generating a new 'rails_admin.rb.example' that you can review.
      create  config/initializers/rails_admin.rb.example
/Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/activerecord-3.2.9/lib/active_record/reflection.rb:385:in `block in source_reflection': undefined method `klass' for nil:NilClass (NoMethodError)
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/activerecord-3.2.9/lib/active_record/reflection.rb:385:in `collect'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/activerecord-3.2.9/lib/active_record/reflection.rb:385:in `source_reflection'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/activerecord-3.2.9/lib/active_record/reflection.rb:375:in `rescue in foreign_key'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/activerecord-3.2.9/lib/active_record/reflection.rb:373:in `foreign_key'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/rails_admin-0.4.4/lib/rails_admin/adapters/active_record.rb:292:in `association_foreign_key_lookup'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/rails_admin-0.4.4/lib/rails_admin/adapters/active_record.rb:72:in `block in associations'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/rails_admin-0.4.4/lib/rails_admin/adapters/active_record.rb:65:in `map'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/rails_admin-0.4.4/lib/rails_admin/adapters/active_record.rb:65:in `associations'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/rails_admin-0.4.4/lib/rails_admin/config/fields/factories/association.rb:6:in `block in <top (required)>'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/rails_admin-0.4.4/lib/rails_admin/config/fields.rb:54:in `call'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/rails_admin-0.4.4/lib/rails_admin/config/fields.rb:54:in `block (2 levels) in factory'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/rails_admin-0.4.4/lib/rails_admin/config/fields.rb:54:in `each'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/rails_admin-0.4.4/lib/rails_admin/config/fields.rb:54:in `find'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/rails_admin-0.4.4/lib/rails_admin/config/fields.rb:54:in `block in factory'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/rails_admin-0.4.4/lib/rails_admin/config/fields.rb:50:in `each'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/rails_admin-0.4.4/lib/rails_admin/config/fields.rb:50:in `factory'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/rails_admin-0.4.4/lib/rails_admin/config/has_fields.rb:130:in `_fields'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/rails_admin-0.4.4/lib/rails_admin/config/has_fields.rb:128:in `_fields'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/rails_admin-0.4.4/lib/rails_admin/config/has_fields.rb:108:in `all_fields'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/rails_admin-0.4.4/lib/rails_admin/config/has_fields.rb:83:in `fields'
    from (erb):64:in `block in template'
    from (erb):53:in `map'
    from (erb):53:in `template'
    from /Users/iyerushalmi/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/erb.rb:838:in `eval'
    from /Users/iyerushalmi/.rvm/rubies/ruby-1.9.3-p374/lib/ruby/1.9.1/erb.rb:838:in `result'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/actions/file_manipulation.rb:117:in `block in template'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/actions/create_file.rb:54:in `call'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/actions/create_file.rb:54:in `render'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/actions/create_file.rb:63:in `block (2 levels) in invoke!'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/actions/create_file.rb:63:in `open'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/actions/create_file.rb:63:in `block in invoke!'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/actions/empty_directory.rb:133:in `call'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/actions/empty_directory.rb:133:in `invoke_with_conflict_check'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/actions/create_file.rb:61:in `invoke!'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/actions.rb:95:in `action'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/actions/create_file.rb:26:in `create_file'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/actions/file_manipulation.rb:116:in `template'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/rails_admin-0.4.4/lib/generators/rails_admin/install_generator.rb:66:in `install'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/task.rb:27:in `run'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/invocation.rb:120:in `invoke_task'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/invocation.rb:126:in `block in invoke_all'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/invocation.rb:126:in `each'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/invocation.rb:126:in `map'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/invocation.rb:126:in `invoke_all'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/group.rb:238:in `dispatch'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/thor-0.17.0/lib/thor/base.rb:434:in `start'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.9/lib/rails/generators.rb:171:in `invoke'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.9/lib/rails/commands/generate.rb:12:in `<top (required)>'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
    from /Users/iyerushalmi/.rvm/gems/ruby-1.9.3-p374/gems/railties-3.2.9/lib/rails/commands.rb:29:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T07:12:14.647

**编辑：**找到修复。请参阅[此 SO 讨论](https://stackoverflow.com/a/7670084/1372767 "为什么我的铁轨路线有点偏离？")。

进入您的主 ApplicationController 并更改

```
rescue_from CanCan::AccessDenied do |e|
  redirect_to root_path, alert: e.message
end 
```

至

```
rescue_from CanCan::AccessDenied do |e|
  redirect_to '/', alert: e.message
end 
```

给它*任何*符号路径名将导致 RoutingException，因为 Rails 正在*错误的路由表*中查找名称。指定字面根路径绕过查找，并让主应用程序的 ApplicationController 第一次处理它。这就是你想要的。

原帖如下`hr`：

* * *

我遇到了类似的错误，如果非管理员用户访问我的“/admin”路由，那么 ActiveAdmin+CanCan 会尝试将他踢出去。（顺便说一下，通过添加 Gem，您可以获得更清晰的错误报告`better_errors`。）我得到了异常报告，并且我可以在发生路由失败的地方在局部变量中看到正确的错误消息。

由于 better_errors 的“live shell”，我还可以看到生成 RoutingError 的 ActionController 是`RailsAdmin::MainController`. 这表明我们需要弄清楚如何告诉 RailsAdmin 重定向到*应用程序*根路径，而不是*引擎*根路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T18:23:03.930

您的路由不起作用的原因是因为您注入了

```
mount RailsAdmin::Engine => '/admin', :as => 'rails_admin' 
```

在`routes.rb`文件的底部。了解路线从上到下优先。当一个 url 被路由时，它将从列表的顶部开始并向下。一旦发现匹配的路由，Rails 就会将其发送给适当的控制器和动作。

一般来说，我发现将第三方 API 移到 API 列表顶部是最佳实践。如果最终出现冲突问题，我可以更改自己创建的路线。处理起来容易得多。

所以将 Devise 和 RailsAdmin 路由移到顶部并告诉我们你得到了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:22:50.520

我遇到了同样的问题，但只有当我使用我的用户模型登录时才会出现。如果我没有登录，它会重定向到我的登录页面。

**更新**

发生在我身上的是我的用户模型不允许`:manage`仪表板访问的资源。

一旦我包含了这个授权，管理面板就工作了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T12:37:54.383

尝试将设计和管理路由移动到路由文件的顶部。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-20T15:57:16.023

[如文档](https://github.com/sferik/rails_admin/wiki/Cancancan)中所述，在 中使用`main_app`以`routes.rb`引用主应用程序路由。

```
class ApplicationController < ActionController::Base
  rescue_from CanCan::AccessDenied do |exception|
    redirect_to main_app.root_path, :alert => exception.message
  end
end 
```

# objective-c - 为什么我不能在 Xcode 调试器变量窗口中查看字符串属性的值？

> ID：14848200
> 
> 赞同：0
> 
> 时间：2013-02-13T07:05:35.750
> 
> 标签：objective-c, macos, cocoa

我在使用以下代码时遇到问题

```
mediaFile.artist = [track artist];             

if(mediaFile.artist == nil || [mediaFile.artist isEqualToString:@""])
{
    // value 'unknown' is not assigned , when I see in the debugger
    mediaFile.artist = @"unknown";
} 
```

MediaFile 类中的属性 artist 被声明和定义如下

```
// In MediaFile class
//property defined in MediaFile  header
@property (retain) NSString* artist;

// in MediaFile.m file
@synthesize artist = _artist; 
```

当`[track artist]`返回一个非空的好值时，我可以看到存储在`mediafile.artist`属性中的值，但是当它返回 nil 或清空分配`@"unknown"`运行的代码时，指针会改变，`mediafile.artist`因为我在调试器中注意到，但值`"unknown"`不是可见的。有任何想法吗？

编辑： po [mediaFile artist] 显示值，但调试器变量窗口仅显示指针而不显示字符串值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:25:36.117

没有明确支持 ivars 的属性不会显示在调试器中。如果需要查看它们，可以在 .h 文件中显式声明 ivar，如下所示：

```
@interface MyClass : NSObject {
    NSString* _artist;
} 
```

然后，`@property`像往常一样声明并合成它。它应该出现在调试器中。

# java - javax.tools.JavaCompiler “参数” arg

> ID：14848202
> 
> 赞同：2
> 
> 时间：2013-02-13T07:05:40.593
> 
> 标签：java, compiler-construction, arguments

因此，我在 javax.tools.JavaCompiler 的 api 和 cmd 行编译器之间遇到了一个烦人的小问题（它们是同一回事！）。我只是想对 javac 使用一个参数，例如：***-d C:\compiled\ C:\programs\HelloWorld.java ***。这在 cmd 提示符下效果很好，但是我的代码失败了，说文件不存在。

```
public class Test {

    private static String programsDir = "C:\\programs\\";
    private static String compiledDir = "C:\\compiled\\";
    private static String fileName = "HelloWorld.java";

    public static void main(String[] args){

        JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();

        String arguments = "-d " + compiledDir + " " + programsDir + fileName ;
        compiler.run(System.in, System.out, System.err, arguments);
    } 
```

输出是：

```
javac: file not found: -d C:\compiled\ C:\programs\HelloWorld.java
Usage: javac <options> <source files>
use -help for a list of possible options 
```

但我可以将“-d C:\compiled\C:\programs\HelloWorld.java”剪切并粘贴到 javac 中。也就是说，**javac -d C:\compiled\ C:programs\HelloWorld.java**有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:08:55.380

`run`需要一个 args 列表，您是否尝试过：

```
String[] args = {"-d", compiledDir, programsDir + fileName};
compiler.run(System.in, System.out, System.err, args); 
```

# wordpress - 如何在没有 $args 的 wordpress 中按 slug 订购

> ID：14848204
> 
> 赞同：0
> 
> 时间：2013-02-13T07:05:43.997
> 
> 标签：wordpress, categories, cat, args

我是一个用 wordpress 构建的网站的管理员，由其他人构建。我只知道基础知识，我在这里和那里做了一些改变，但现在我碰壁了。我想做的是按slug订购一些类别。这是调用类别的代码。

```
 <?php foreach (get_categories('child_of='.get_query_var('cat')) as $cat): ?> 
```

我确定这不是最好的方法，同一网站中的另一个类别页面使用 $args 并且在那里，很容易解决相同的问题。但是我不明白这是如何工作的。希望有人可以帮助我，如果你是古玩，这将反映的页面是[http://tumbili.mx/p/products/bsj/](http://tumbili.mx/p/products/bsj/)

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:13:46.037

您可以使用以下代码进行订购

foreach (get_categories('orderby=slug&order=ASC&child_of='.get_query_var('cat')) as $cat):

# php - 图像如何在表格中回显

> ID：14848205
> 
> 赞同：-3
> 
> 时间：2013-02-13T07:05:47.613
> 
> 标签：php, echo

嗨，如何在表格中回显我想要 1 行 3 列这是图像库现在所有图像都列出垂直我想改变水平我如何改变请帮我解决这个问题

```
 echo '<div class="urbangreymenu">
    <ul><li><img src="wallpaper/' .$name . '/1.jpg" width="230" height="148" align="top"><a href="' .$path .'gallery.php?wallpapers=' .$name . '" >' . $name . '</a>'. $imgCount . 'Wallpapers</li></ul></div>';
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:09:22.467

如果我了解您的需求，您需要一张 1 行 3 列的表格；

```
<table>
<tr>
<td>
<img src="<?php echo $path . '/' . $image1;?>"/>
</td>
<td>
<img src="<?php echo $path . '/' . $image2;?>"/>
</td>
<td>
<img src="<?php echo $path . '/' . $image3;?>"/>
</td>
</tr>
</table> 
```

根据需要设置 img 属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:08:41.967

为 li 设置你的风格

```
.urbangreymenu > ul > li{
    float: left;
} 
```

默认情况下，除非另有说明，否则每个未定位为固定或绝对的新元素都将绘制在前一个元素的下方。[学到更多。](http://www.w3schools.com/css/css_float.asp)

# c# - 使用 HTML Helper 标签添加日历控件

> ID：14848210
> 
> 赞同：0
> 
> 时间：2013-02-13T07:05:54.780
> 
> 标签：c#, asp.net, asp.net-mvc-3

我需要知道如何添加`Calendar`使用`HTML helper`标签。[我找到了一个名为Kendo](http://www.kendoui.com/blogs/teamblog/posts/12-06-07/html_helper_basics_of_kendo_ui_for_asp_net_mvc_beta.aspx)的第三方库，但是我可以在它自己的 Visual Studio 工具箱中提供的组件中使用任何东西。

注意：我还需要为选定的日期着色，启用/禁用日历中的某些日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:21:03.930

如果您使用的是 Asp.net mvc3，请尝试此代码..

```
 using System;
  using System.Collections.Generic;
  using System.Globalization;
  using System.Linq;
  using System.Text;
  using System.Web;
  using System.Web.Mvc;

 namespace AntiYes.Helpers
{
public static class CalendarExtensions
{
    public static IHtmlString Calendar(this HtmlHelper helper, DateTime dateToShow)
    {
        DateTimeFormatInfo cinfo = DateTimeFormatInfo.CurrentInfo;
        StringBuilder sb = new StringBuilder();
        DateTime date = new DateTime(dateToShow.Year, dateToShow.Month, 1);
        int emptyCells = ((int)date.DayOfWeek + 7 - (int)cinfo.FirstDayOfWeek) % 7;
        int days = DateTime.DaysInMonth(dateToShow.Year, dateToShow.Month);
        sb.Append("<table class='cal'><tr><th colspan='7'>" + cinfo.MonthNames[date.Month - 1] + " " + dateToShow.Year + "</th></tr>");
        for (int i = 0; i < ((days + emptyCells) > 35 ? 42 : 35); i++)
        {
            if (i % 7 == 0)
            {
                if (i > 0) sb.Append("</tr>");
                sb.Append("<tr>");
            }

            if (i < emptyCells || i >= emptyCells + days)
            {
                sb.Append("<td class='cal-empty'>&nbsp;</td>");
            }
            else
            {
                sb.Append("<td class='cal-day'>" + date.Day + "</td>");
                date = date.AddDays(1);
            }
        }
        sb.Append("</tr></table>");
        return helper.Raw(sb.ToString());
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:15:58.560

如果我正确理解了您的问题，只需将日历控件从工具栏拖到您的表单上。然后您可以访问它的属性以相应地影响日历。

# excel - 当我使用 if 语句时出现奇怪的计算问题

> ID：14848219
> 
> 赞同：0
> 
> 时间：2013-02-13T07:06:55.030
> 
> 标签：excel, excel-formula

所以我有一个如下所示的excel表：（我已经取出了所有不相关的信息）

![在此处输入图像描述](../Images/05b6b2b2f85fb87a78f21dd81ab46806.png)

列`D`是一个公式，已经被拖到所有单元格（改变行号）：

`=IF(A2 = "",$D1-C2,A2 - C2)`

如果您看到单元格`D6`，您会注意到它有某种错误。我已经包括了 2 个例子。表格的下半部分使用相同的公式可以正常工作。第一部分不起作用，我假设它是因为 0.985，它似乎只发生在它高于 0.9 但低于 1 时。

有没有人能够帮助找出问题所在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:18:20.493

看起来像浮点数的舍入错误（有关更多信息，请参阅[IEEE 浮点数](http://en.wikipedia.org/wiki/IEEE_floating_point)）。`round`您可以通过使用特定数量的小数位 来解决此问题，例如`round(D6, 3)`，如果您需要，将 D6 舍入到小数点后 3 位以获得更好的精度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:13:39.663

这不是错误，这是科学记数法。它显示的值是`3.33*10^(-16)`, 或 0.00000000000000333067 （希望我算对了）。

这基本上是一个舍入错误。如果您希望该列显示接近零的值为零，则将该列格式化为具有有限小数位数的数字。

# c++ - 使用 STACK_OF(X509)

> ID：14848220
> 
> 赞同：0
> 
> 时间：2013-02-13T07:06:58.380
> 
> 标签：c++, x509certificate, x509, chain

我有一个`STACK_OF(X509)`要验证的证书链。但我似乎无法找到如何。我怎样才能从这个结构中取出单个证书并验证它们。还是整体验证整个结构？

我 `SSL_get_peer_cert_chain(ssl)`用来获取堆栈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:33:04.810

有[`openssl verify`](http://www.openssl.org/docs/apps/verify.html)验证证书链的实用程序。

您可以在[apps/verify.c的 git 存储库中查看源代码](http://git.openssl.org/gitweb/?p=openssl.git;a=blob;f=apps/verify.c;h=893670ff41321317e7a057e0a8c3fd64cb7d048a;hb=46ebd9e3bb623d3c15ef2203038956f3f7213620)

# c# - 如何保留动态创建的 ListBox ASP.NET C# 的状态

> ID：14848228
> 
> 赞同：1
> 
> 时间：2013-02-13T07:08:19.057
> 
> 标签：c#, asp.net, html, listbox

我想要一个从文件动态生成的表单中的列表框（多选），并且在提交后我希望仍然选择相同的字段。

这就是我现在的做法：

```
<select name="select" size="20" multiple style="Width: 100%">
  <% Response.WriteFile(@"~\Catalogs\"+usergroup+".htm"); %>
</select> 
```

但是这样选择在提交后就消失了。

有没有人对我的问题有更好的解决方案。（文件不一定是最终的 HTML 文件，我只是希望能够从文件中更改 ListBox 的值 + 文本）

非常感谢提前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:32:20.933

您可以在后面的代码中动态生成项目并将它们添加到您的列表中。为此，您需要将`runat="server"`属性添加到您的`select`, 或使用`asp:DropDownList`服务器控件。

看起来您正在将文件的内容逐字插入列表中。您可能需要将其更改为更结构化的数据，或者至少将其作为结构化数据读取。

例子：

```
<%-- in markup of control/page --%>
<asp:DropDownList  runat="server" id="ddlCatalogs" />

// in codebehind

// to make this work, you'll need to read the file one line/item as a time
foreach( var item in listOfItemsInFile ){
    var li = new ListItem();

    // TODO: populate "li" from the item's data

    // add it to the server control's collection...now it's a part of the ASP.Net
    // page lifecycle
    this.ddlCatalogs.Controls.Add( option );
} 
```

一旦您将下拉列表视为服务器控件，您可以通过多种方式维护状态（默认情况下 ViewState 会处理它，但是列表中的许多项目 ViewState 会变得非常大）。

或者，您可以采用不同的方向（不涉及服务器控件），只需查看原始`Request.Form`集合以查看它是否包含您的选择列表的数据，然后将其写回您的页面。

即使在这种情况下，也可能需要以更结构化的方式枚举输入文件，以便您可以选择正确的选项。

# android - android canvas删除上一个正在绘制的路径

> ID：14848229
> 
> 赞同：12
> 
> 时间：2013-02-13T07:08:21.007
> 
> 标签：android, canvas, bitmap

我正在制作一个绘图应用程序，并想实现一个撤消功能来删除前一个绘制的路径。

# 编码：

```
private HashMap<Integer, Path> pathMap; // current Paths being drawn
private HashMap<Integer, Point> previousPointMap; // current Points
private Bitmap bitmap; // drawing area for display or saving
private Canvas bitmapCanvas; // used to draw on bitmap
private Paint paintScreen; // use to draw bitmap onto screen
private Paint paintLine; // used to draw lines onto bitmap

public DrawView(Context context, AttributeSet attrs) 
{
     super(context, attrs); // pass context to View's constructor
     this.context_new=context;

      paintScreen = new Paint(); // used to display bitmap onto screen

      // set the initial display settings for the painted line
      paintLine = new Paint();
      paintLine.setAntiAlias(true); // smooth edges of drawn line
      paintLine.setColor(Color.BLACK); // default color is black
      paintLine.setStyle(Paint.Style.STROKE); // solid line
      paintLine.setStrokeWidth(5); // set the default line width
      paintLine.setStrokeCap(Paint.Cap.ROUND); // rounded line ends
      pathMap = new HashMap<Integer, Path>();
      previousPointMap = new HashMap<Integer, Point>();
} // end DrawView constructor

@Override
protected void onDraw(Canvas canvas)  
{
    canvas.drawBitmap(bitmap, 0, 0, paintScreen); 
    for (Integer key : pathMap.keySet()) 
    canvas.drawPath(pathMap.get(key), paintLine);
} 

// called when the user finishes a touch    
   private void touchEnded(int lineID)   
   {
      Path path = pathMap.get(lineID); // get the corresponding Path
      bitmapCanvas.drawPath(path, paintLine); // draw to bitmapCanvas
      path.reset(); // reset the Path
      rememberLineId = lineID;
   } // end method touch_ended

//undo       
   private void undo()
   {
      Path path = pathMap.get(rememberLineId); // get the corresponding Path
      pathMap.remove(rememberLineId);
      bitmapCanvas.clearPath(path, paintLine); 
      path.reset(); // reset the Path
   } 
```

## 问题：

不过，好像没有`bitmapCanvas.clearPath`这个方法？如果那样的话，它怎么能被修改？

## 代码修改：

**声明：**

```
private Bitmap bitmap; // drawing area for display or saving
private Canvas bitmapCanvas; // used to draw on bitmap
private Paint paintScreen; // use to draw bitmap onto screen
private Paint paintLine; // used to draw lines onto bitmap
private HashMap<Integer, Path> pathMap; // current Paths being drawn
private HashMap<Integer, Point> previousPointMap; // current Points

private Bitmap bitmapBackup; 
```

**OnSizeChanged**

```
@Override
public void onSizeChanged(int w, int h, int oldW, int oldH)
{ 
   super.onSizeChanged(w, h, oldW, oldH);
   DoodlzViewWidth = w;    
   DoodlzViewHeight = h;

   bitmapBackup = Bitmap.createBitmap(getWidth(), DoodlzViewHeight, Bitmap.Config.ARGB_8888);     
   bitmap =       Bitmap.createBitmap(getWidth(), DoodlzViewHeight, Bitmap.Config.ARGB_8888);

   bitmapCanvas = new Canvas(bitmap);
   bitmap      .eraseColor(Color.WHITE); // erase the BitMap with white 
   bitmapBackup.eraseColor(Color.WHITE); 
} 
```

**FirsttoBackup 方法，将在下面的 TouchedStart 执行时调用**

```
public void firsttobackup()
{ 
   bitmapBackup=bitmap;
       Toast message = Toast.makeText(getContext(), "backuped 123", Toast.LENGTH_SHORT);
   message.show(); //THIS TOAST CAN BE SUCESSFULLY PRESENTED when touching screen starting to draw
} 
```

**OnDraw**

```
@Override
protected void onDraw(Canvas canvas) 
{
canvas.drawBitmap(bitmap, 0, 0, paintScreen); 
    for (Integer key : pathMap.keySet()) 
     canvas.drawPath(pathMap.get(key), paintLine); 
```

}

**触摸事件**

```
@Override
public boolean onTouchEvent(MotionEvent event) 
{        
  int action = event.getActionMasked(); // event type 
  int actionIndex = event.getActionIndex(); // pointer (i.e., finger)

  if (action == MotionEvent.ACTION_DOWN || action == MotionEvent.ACTION_POINTER_DOWN) 
  {
      firsttobackup(); //TOAST CAN SHOW "BACKUP 123"

      touchStarted(event.getX(actionIndex), event.getY(actionIndex), 
        event.getPointerId(actionIndex));
  } 
```

**撤消：用户按下撤消按钮将调用此**

```
public void undo()
{
  bitmap = bitmapBackup.copy(Bitmap.Config.ARGB_8888, true);
  bitmapCanvas = new Canvas(bitmap);        
} 
```

## 问题修改：

现在使用了一种方法`firsttobackup()`，使得 bitmapBackup 在执行时会设置 = bitmap `OnTouchEvent` `touchStarted`。我在里面放了一个吐司，当用户按下屏幕并开始绘图时，它成功呈现“备份 123”。

当用户点击撤消按钮时，它会调用该`undo`方法，但现在按下撤消按钮，看不到任何动作......为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T07:42:27.870

我认为最简单的方法是拥有 2 个位图（1 个额外的备份位图用于恢复以前的状态）。

在开始新绘图之前，您需要保存位图的先前状态。

以下是我将如何修改您的代码：

```
 private HashMap<Integer, Path> pathMap; // current Paths being drawn
  private HashMap<Integer, Point> previousPointMap; // current Points
  private Bitmap bitmap; // drawing area for display or saving
  private Bitmap bitmapBackup; 
  private Canvas bitmapCanvas; // used to draw on bitmap
  private Canvas bitmapBackupCanvas; 

  // remember last bitmap before new drawings...    
     private void touchStarted()   
     {
        bitmapBackupCanvas.drawBitmap(bitmap, 0, 0, null);
     } 
  // called when the user finishes a touch    
     private void touchEnded(int lineID)   
     {
        Path path = pathMap.get(lineID); // get the corresponding Path
        bitmapCanvas.drawPath(path, paintLine); // draw to bitmapCanvas
        path.reset(); // reset the Path
        rememberLineId = lineID;
     } // end method touch_ended

  //undo       
     private void undo()
     {
        Path path = pathMap.get(rememberLineId); // get the corresponding Path
        pathMap.remove(rememberLineId);
        bitmapCanvas.drawBitmap(bitmapBackup, 0, 0, null); // restore from backup
        path.reset(); // reset the Path
     } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-01-19T14:40:33.177

这是一个旧帖子，但我也在寻找该问题的答案。我对该帖子选择的答案不满意，之后我自己找到了一个。我实际上认为将完整的位图作为备份在内存方面并不是很好，它会限制我们可以拥有的撤消步骤的数量。

我相信更好的解决方案是：

在您的班级中有一堆路径

```
private Stack<Path> m_pathHistory = new Stack<Path>(); 
```

在画布和画笔旁边（跳过初始化）：

```
private Canvas m_drawingCanvas;
private Paint m_paint; 
```

然后每次完成笔画（在修饰事件上）时，将路径的“克隆”添加到撤消历史记录：

```
m_pathHistory.Push(new Path(currentPath)); 
```

这是撤消功能：

```
public void Undo()
{
    if(m_pathHistory.Count > 0)
    {
        m_pathHistory.Pop(); // Remove the last path from the history

        m_drawingCanvas.DrawColor(Color.Transparent, PorterDuff.Mode.Clear); // Clear the canvas with a transparent color

        // Draw the paths which are still in the history
        foreach (Path p in m_pathHistory)
        {
            m_drawingCanvas.DrawPath(p, m_paint);
        }
     }
} 
```

存储在内存中的路径比完整的位图小得多，因此我们可以拥有更大的历史记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T07:36:34.620

乍一看，我看到以下问题：

> 通过在创建后立即添加空`Path`，`paths`一旦撤消就会遇到问题：您 `Path`首先弹出空，使第一个撤消似乎不起作用。然后，如果您将其绘制到 中`Path`，则它不会添加到`paths`. 解决方案是在创建新路径之前添加已完成`Path`的路径。`touch_up()`

也就是去掉

```
paths.add(mPath); 
```

从构造函数，并在`touch_up()`，改变

```
mPath = new Path();
paths.add(mPath); 
```

到

```
paths.add(mPath);
mPath = new Path(); 
```

您还需要添加

```
canvas.drawPath(mPath, mPaint); 
```

在你的`for`循环之后`onDraw()`，为了绘制 in-progress `Path`。

`undonePaths`当用户再次开始绘图时，您并没有清空。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-29T05:18:46.913

```
use path.reset()in the MotionEvent.ACTION_DOWN event of OnTouchEvent() method.

@Override
public boolean onTouchEvent(MotionEvent event) {
    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            mPath.reset();
            invalidate();
            break;
    }
    return true;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T07:27:11.883

看到这里可能会使用完整的这个如何绘制和清除油漆

[http://polamreddyn.blogspot.in/2012/11/simple-free-hand-paint-with-color.html](http://polamreddyn.blogspot.in/2012/11/simple-free-hand-paint-with-color.html)

还有这个

[http://polamreddyn.blogspot.in/2012/10/free-hand-graw.html](http://polamreddyn.blogspot.in/2012/10/free-hand-graw.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-22T15:08:07.363

如果您使用`PorterDuffXfermode`，将视图保存到您的`bitmapBackup`, 而不是以前的位图

```
public void undo (){
    bitmap.eraseColor(getDrawingCacheBackgroundColor());
    mCanvas.drawBitmap(bitmapBackup, 0, 0, null);
    invalidate();
    mPath.reset();
    undofresh=true;
}

private void touch_start(float x, float y) {
    View v1 = this;
    v1.setDrawingCacheEnabled(true);
    this.bitmapBackup = Bitmap.createBitmap(v1.getDrawingCache());
    v1.setDrawingCacheEnabled(false);
} 
```

# jquery - 在按钮单击时加载部分视图

> ID：14848231
> 
> 赞同：5
> 
> 时间：2013-02-13T07:08:36.027
> 
> 标签：jquery, asp.net-mvc, partial-views

这个问题可能会重复，但我有一些问题。我的页面中有一个下拉列表和搜索按钮。我在更改事件的下拉列表中将视图与模型绑定。并且当单击在下拉列表中选择的关于记录列表的搜索按钮值时，将显示在部分视图中。这一切都正确完成如下：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<ApricaCRMEvent.Models.CRM.DatabaseEntities.CRM_Doctor_Request>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    MDLNoDDLIndex
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <script src="../../Scripts/jquery.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery-migrate-1.0.0.js" type="text/javascript"></script>

    <script type="text/javascript">
        //script for binding drop down list value from view to model
        $("#viewlist").hide();
        function TestFun() 
        {
            var mdlno = $("#ddlMDLNo").val();
            var txtmdlno = document.getElementById("Request_For_Id");
            txtmdlno.value = mdlno;
            //alert(txtmdlno.value);
           $("#viewlist").hide();
        }
         var mdlno = $("#ddlMDLNo").val();
         function Datalist(mdlno) {
             $("#viewlist").show();
             $.ajax({
                 url: "/Search/MDLNoDataList", //url or controller with action
                 type: "POST",
                 data: mdlno,
                 dataType: "html",

                 success: function (data) {

                     $("#viewlist").html(data); //target div id
                 },
                 error: function () {
                     alert("No Projects Found");
                     $("#viewlist").html('there is error while submit');
                 }
             });
         }

        //$(function () { $("#btnclick").click(function () { $("#viewlist").load('/Search/MDLNoDataList') }); });

        //script for loading partial view into div tag "viewlist"

</script>
<div>
<h2>Search by MDLNo</h2>

    <% using (Html.BeginForm())
    { %>

         <%: Html.ValidationSummary(true, "Profile Updation was unsuccessful. Please correct the errors and try again.") %>

          Select MDLno 

            <%= Html.DropDownList("ddlMDLNo", ViewData["MDLno"] as SelectList, "--Select One--", new { onchange = "TestFun()" })%> 
            <%: Html.HiddenFor(model => model.Request_For_Id) %>

            <input type="submit" value="search" name="SearchMDLNo" id="btnclick" onclick ="Datalist(a)"/>    
            <div id="viewlist"><%Html.RenderAction("MDLNoDataList"); %> </div> <%--partial view should be loaded here.--%>

    <% } %> 

</div>

</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content> 
```

![在此处输入图像描述](../Images/659d243ecd7ed603264c00e65ab7f51c.png)

![在此处输入图像描述](../Images/44f6447c0b04fd8cef83b45e39887276.png)

一切正常，但.. div 标签的部分视图在单击搜索按钮之前显示。我想要那个..当我点击按钮时加载部分视图

为此，我尝试了以下代码：

```
$("#btnclick").click(function () { $("#viewlist").load('/Search/MDLNoDataList.ascx') }); 
```

而且我也尝试过 .show() 和 .hide() 但问题是.. 每当我点击按钮时整个页面都会刷新所以.. 加载部分视图没有正确完成。

**控制器：**

```
 public ActionResult MDLNoDDLIndex()
        {
            ViewData["MDLno"] = new SelectList(CRMSearchReportDL.getAllMDLno(), "Request_For_Id", "Request_For_Id");
            return View();
        }

        [HttpPost]
        public ActionResult MDLNoDDLIndex(CRM_Doctor_Request model)
        {
            ViewData["MDLno"] = new SelectList(CRMSearchReportDL.getAllMDLno(), "Request_For_Id", "Request_For_Id");

            //mdlnoObj = SearchMDLNoDL.getMDLData(model.Request_For_Id);
            return View();
        }

        public ActionResult MDLNoDataList()
        {
            List<CRM_Doctor_Request> drlist = new List<CRM_Doctor_Request>();
            return PartialView(drlist);
        }
        [HttpPost]
        public ActionResult MDLNoDataList(CRM_Doctor_Request model)
        {
            return PartialView(CRMSearchReportDL.getMDLNoWiseDetails(model.Request_For_Id));
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:12:14.827

我已将我所有的建议片段编译到我认为可以为您提供所需的标记中。如下。

*请记住，我刚刚在记事本中输入了此内容，因此可能存在语法错误，但该策略应该可以帮助您到达需要的位置。*

注意：我们正在尝试使用 AJAX 技术，所以**我们真的不想回发表单，因为这会导致整个页面刷新**，因此，**提交按钮必须变成一个普通按钮**。

所以我们的策略是：

*   渲染主要的表单元素和
*   处理：
    *   按钮单击事件或
    *   下拉更改事件——在这种情况下，我们必须完全省略按钮。

**如果我们只想在单击按钮后更新结果，那么：**

单击按钮时，我们会获取包含结果网格的局部视图，并将整个内部 HTML 替换`#viewlist`为局部视图的 HTML。

我们真的不需要隐藏`#viewlist`。我们可以将其留空，或者显示一些其他 HTML，其中包含没有结果的通知文本，或者告诉用户该做什么的说明。

**如果我们想在下拉列表中的值更改后立即更新结果，那么：**

我们保留下拉菜单的更改处理程序并省略按钮的单击处理程序（以及整个按钮）。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<ApricaCRMEvent.Models.CRM.DatabaseEntities.CRM_Doctor_Request>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    MDLNoDDLIndex
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <div>
        <h2>Search by MDLNo</h2>
        <% using (Html.BeginForm()) { %>
        <%: Html.ValidationSummary(true, "Profile Updation was unsuccessful. Please correct the errors and try again.") %>
            Select MDLno

            <%= Html.DropDownList("ddlMDLNo", ViewData["MDLno"] as SelectList, "--Select One--" }) %>
            <%: Html.HiddenFor(model => model.Request_For_Id) %>

            <!-- delete this line if you decide to keep the dropdown change event handler and omit the button click event handler -->
            <input id="btnclick" name="SearchMDLNo" type="button" value="search" />

            <div id="viewlist">
            <!-- this partial view should return the result grid or should return an element stating either "No data" or some instructions -->
            <%: Html.Action("MDLNoDataList") %>
            </div>
        <% } %> 
    </div>

    <script type="text/javascript" src="~/Scripts/jquery.js"></script>
    <script type="text/javascript" src="~/Scripts/jquery-migrate-1.0.0.js"></script>
    <script type="text/javascript">

        // NOTE : the document ready handler looks like this:
        // $(function () {
        //     code placed here waits for the DOM to fully load before it is executed
        //     this is very important so as to avoid race conditions where sometimes the code
        //     works but other times it doesn't work, or varies from browser to browser or
        //     based on connection speed
        // });

        $(function () {
            // NOTE : keep ONLY one of either $('#ddlMDLNo').change(...) or $('#btnclick').click(...)

            // attach the change event handler in an unobtrusive fashion, rather than directly on
            // the DOM element
            $('#ddlMDLNo').change(function () {
                var mdlno = $('#ddlMDLNo').val();

                $.ajax({
                    url: "/Search/MDLNoDataList",
                    type: "POST",
                    data: {
                        mdlno: mdlno
                    },
                    dataType: "html",
                    success: function (data) {
                        $("#viewlist").html(data);
                    },
                    error: function () {
                        alert("No Projects Found");
                        $("#viewlist").html('An error has occurred');
                    }
                });
            });

            // attach the click event handler in an unobtrusive fashion, rather than directly on
            // the DOM element
            $('#btnclick').click(function () {
                var mdlno = $('#ddlMDLNo').val();

                $.ajax({
                    url: "/Search/MDLNoDataList",
                    type: "POST",
                    data: {
                        mdlno: mdlno
                    },
                    dataType: "html",
                    success: function (data) {
                        $("#viewlist").html(data);
                    },
                    error: function () {
                        alert("No Projects Found");
                        $("#viewlist").html('An error has occurred');
                    }
                });
            });

        });
    </script>
</asp:Content>

<asp:Content ID="Content3" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:17:17.363

脚本

```
<script type="text/javascript">
$(function () {
    $('form').submit(function () {
        if ($(this).valid()) {
            $.ajax({
                url: this.action,
                type: this.method,
                data: $(this).serialize(),
                beforeSend: function () {

                },
                complete: function () {

                },
                success: function (result) {
                   $("#viewlist").html(result);
                }
            });
        }
        return false;
    });
});
</script> 
```

将 HtmlBeginForm 选项添加到 HtmlBegin 表单，如下所示：

```
<% using (Html.BeginForm("MDLNoDataList", "Search", FormMethod.Post, new { id = "form1" }))
    { %>

     <%: Html.ValidationSummary(true, "Profile Updation was unsuccessful. Please correct the errors and try again.") %>

    Select MDLno 

    <%= Html.DropDownList("ddlMDLNo", ViewData["MDLno"] as SelectList, "--Select One--", new { onchange = "TestFun()" })%> 
    <%: Html.HiddenFor(model => model.Request_For_Id) %>

     <input type="submit" value="search" name="SearchMDLNo" id="btnclick" />    
<% } %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T07:28:30.543

1.  `Onclick`html中的声明

    `@item.CategoryName`

2.  jQuery

    ```
    function projectlist(itemid) 

      $.ajax({
        url: "/Project/Projects"//url or controller with action
        type: "POST",
        data: { cid: itemid },
        dataType: "html",
        success: function (response) {

            $("#projectlist").html(response);//target div id
        },
        error: function () {
            alert("No Projects Found");
            $("#result").html('there is error while submit');
        }
      });
    } 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T07:45:53.690

你`#btnclick`的是一个`submit`按钮。因此，当您单击它时，它将导致回发。这就是为什么您的整个页面都令人耳目一新。将其类型更改为`button`，这将停止刷新整个页面。

**-- 从这里忽略 --**

其次，`#viewlist`如果我对您的理解正确，应该先隐藏起来。您可以通过将其设置为`display: none`这样来做到这一点：

```
<div id="viewlist" style="display: none'"> <%Html.RenderAction("MDLNoDataList"); %></div> 
```

然后，在您的 TestFun 中，当您需要这样显示时`#viewlist`：

```
function TestFun() {
  var mdlno = $("#ddlMDLNo").val();
  var txtmdlno = document.getElementById("Request_For_Id");
  txtmdlno.value = mdlno;
  //alert(txtmdlno.value);

  $('#viewlist').css('display', ''); // or something similar
} 
```

**-- 忽略到这里 --**

我认为您的主要问题是您的按钮是 type `submit`。

**更新：**

您不能使用`$('#viewlist').load(...)`，因为返回部分视图的控制器方法标有`[HttpPost]`。请改用以下内容：

```
$.ajax({
    url: "/Search/MDLNoDataList"
    type: "POST",
    data: {
        // NOTE : you will need to provide querystring items here
        // according to the properties in CRM_Doctor_Request so that
        // these parameters get bound to CRM_Doctor_Request by the 
        // DefaultModelBinder. If you paste the code for CRM_Doctor_Request
        // I can let you know what to put in here.
    },
    dataType: "html",
    success: function (response) {
      $("#viewlist").html(response);
    },
    error: function () {
      alert("No Projects Found");
      $("#viewlist").html('No results.');
  }
}); 
```

# java - 如何使用通配符从多个表中搜索值？

> ID：14848236
> 
> 赞同：6
> 
> 时间：2013-02-13T07:08:55.573
> 
> 标签：java, mysql, jsp, wildcard

我正在使用 JDBC 进行通配符搜索。

当我使用单个表时，代码工作正常。

当我尝试使用通配符搜索组合多个表时，代码不起作用。

例如，用户可以搜索任何关键字。

1.  如果用户搜索“*板球*”，则板球关键字在运动表中可用
2.  如果用户搜索“ *windows 8* ”，它在软件表中可用
3.  如果用户搜索“ *google, yahoo* ”，则关键字在网站表中可用

这是动态输入值：

```
where s1(cricket,windows 8,google) 
```

在单表搜索中，我在运动表中查找“*板球”。*

这是我的查询，效果很好：

```
"select * from sports WHERE feed LIKE '%" +s1 + "%'"; 
```

我的多表查询不起作用。

```
 "select * from  product  WHERE sitename LIKE '%"+s1+"%'" "OR 

    "select * from  sports     WHERE sitename LIKE '%"+s1+"%'" " OR

    "select * from  website  WHERE sitename LIKE '%"+s1+"%'" " OR

    "select * from  software  WHERE sitename LIKE '%"+s1+"%'" "OR

    "select * from   other   WHERE sitename LIKE '%"+s1+"%'" 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:19:47.463

尝试使用 a`UNION`而不是 a连接您的单个语句`OR`。有了这个，您可以连接多个 SQL 查询和具有相同列的表。例如：

```
"select * from  product  WHERE sitename LIKE '%"+s1+"%' UNION 

 select * from  sports   WHERE sitename LIKE '%"+s1+"%' UNION

 select * from  website  WHERE sitename LIKE '%"+s1+"%' UNION

 select * from  software  WHERE sitename LIKE '%"+s1+"%' UNION

 select * from   other   WHERE sitename LIKE '%"+s1+"%'" ; 
```

但请注意！您的单个表必须具有相同的列/列数，否则将无法正常工作！
也许更好的例子来澄清：

```
"select sitename, description from  product  WHERE sitename LIKE '%"+s1+"%' UNION 

 select sitename, description from  sports   WHERE sitename LIKE '%"+s1+"%' UNION

 select sitename, description from  website  WHERE sitename LIKE '%"+s1+"%' UNION

 select sitename, description from  software  WHERE sitename LIKE '%"+s1+"%' UNION

 select sitename, text as description from   other   WHERE sitename LIKE '%"+s1+"%'" ; 
```

正如您在语句 6 中看到的，您可以通过重命名其他列来引用您的结果，但列数必须相同。

希望这可以帮助你！

# java - 使用jxl为excel表中的单元格设置不同的颜色

> ID：14848241
> 
> 赞同：3
> 
> 时间：2013-02-13T07:09:19.823
> 
> 标签：java, jxl

我一直在学习如何使用 jXL API，因为我是新手。我有一个 excel 表，我想根据真/假条件为单元格的数据着色。例如，如果条件为真，则必须为绿色，如果条件失败，则为红色。

我试图在使用 jxl api 将数据写入 excel 工作表时实现这一点。

我一直在尝试完成的代码片段如下。

用于写入 Excel 工作表的代码片段。我创建了一个方法来为每个单元格定义格式属性，而 wcellFormat1 是相同的变量，其类型为 WritableCellFormat。

```
for(int i=1; i11; i++){
            String srnum = String.valueOf(rnum);
            wsheet.addCell(new jxl.write.Label(1, rc, srnum, wcellFormat1));
            wsheet.addCell(new jxl.write.Label(2, rc, "b", wcellFormat1));
            wsheet.addCell(new jxl.write.Label(3, rc, "c", wcellFormat1));
            wsheet.addCell(new jxl.write.Label(4, rc, "d", wcellFormat1));
            wsheet.addCell(new jxl.write.Label(5, rc, "e", wcellFormat1));
            wsheet.addCell(new jxl.write.Label(6, rc, "f", wcellFormat1));  

            rnum++;
            rc++;   
            System.out.println(""+rnum+"\n"+rc);
        }
        wbook.write();
        wbook.close(); 
```

此代码片段用于应用我之前提到的条件。wfontStatus 是 WritableFont 类型，而 fCellstatus 是 WritableCellFormat 类型，我用它来指定格式。

```
public void formatCellStatus(Boolean b) throws WriteException{

        if(b == true){
            wfontStatus = new WritableFont(WritableFont.createFont("Arial"), WritableFont.DEFAULT_POINT_SIZE, WritableFont.BOLD, false, UnderlineStyle.NO_UNDERLINE, Colour.GREEN);
        }else{
            wfontStatus = new WritableFont(WritableFont.createFont("Arial"), WritableFont.DEFAULT_POINT_SIZE, WritableFont.BOLD, false, UnderlineStyle.NO_UNDERLINE, Colour.RED);
        }

        fCellstatus = new WritableCellFormat(wfontStatus);
        fCellstatus.setWrap(true);
        fCellstatus.setAlignment(jxl.format.Alignment.CENTRE);
        fCellstatus.setVerticalAlignment(jxl.format.VerticalAlignment.CENTRE);
        fCellstatus.setBorder(jxl.format.Border.ALL, jxl.format.BorderLineStyle.MEDIUM, jxl.format.Colour.BLUE2);
    } 
```

我面临的问题是我不了解如何使用上述方法在写入工作表时应用必要的条件。

这个你能帮我吗。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T07:37:18.863

该方法应该类似于

```
public WritableCellFormat createFormatCellStatus(boolean b) throws WriteException{
    Colour colour = (b == true) ? Colour.GREEN : Colour.RED;
    WritableFont wfontStatus = new WritableFont(WritableFont.createFont("Arial"), WritableFont.DEFAULT_POINT_SIZE, WritableFont.BOLD, false, UnderlineStyle.NO_UNDERLINE, colour);
    WritableCellFormat fCellstatus = new WritableCellFormat(wfontStatus);

    fCellstatus.setWrap(true);
    fCellstatus.setAlignment(jxl.format.Alignment.CENTRE);
    fCellstatus.setVerticalAlignment(jxl.format.VerticalAlignment.CENTRE);
    fCellstatus.setBorder(jxl.format.Border.ALL, jxl.format.BorderLineStyle.MEDIUM, jxl.format.Colour.BLUE2);
    return fCellstatus;
} 
```

在创建标签的循环内

```
for(int i=1; i11; i++){
    String srnum = String.valueOf(rnum);
    wsheet.addCell(new jxl.write.Label(1, rc, srnum, createFormatCellStatus(true)));    //will create green cell
    wsheet.addCell(new jxl.write.Label(2, rc, "b", createFormatCellStatus(false))); //will create red cell
    wsheet.addCell(new jxl.write.Label(3, rc, "c", createFormatCellStatus(false)));
    wsheet.addCell(new jxl.write.Label(4, rc, "d", createFormatCellStatus(true)));
    wsheet.addCell(new jxl.write.Label(5, rc, "e", createFormatCellStatus(false)));
    wsheet.addCell(new jxl.write.Label(6, rc, "f", createFormatCellStatus(true)));  

    rnum++;
    rc++;   
    System.out.println(""+rnum+"\n"+rc);
}
wbook.write();
wbook.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:42:12.200

此方法只是更新`fCellstatus`变量。所以它可以通过以下方式使用：

```
formatCellStatus(condition);
wsheet.addCell(new jxl.write.Label(columnNumber, rowNumber, "cellvalue", fCellstatus)); 
```

我认为让字段参与这样的交互并不是一个好主意。我建议通过以下方式重新实现此方法：

```
public WritableCellFormat getCellFormatByCondition(boolean condition) {
    if(b == true){
        wfontStatus = new WritableFont(WritableFont.createFont("Arial"), WritableFont.DEFAULT_POINT_SIZE, WritableFont.BOLD, false, UnderlineStyle.NO_UNDERLINE, Colour.GREEN);
    }else{
        wfontStatus = new WritableFont(WritableFont.createFont("Arial"), WritableFont.DEFAULT_POINT_SIZE, WritableFont.BOLD, false, UnderlineStyle.NO_UNDERLINE, Colour.RED);
    }

    WritableCellFormat result = new WritableCellFormat(wfontStatus);
    result .setWrap(true);
    result .setAlignment(jxl.format.Alignment.CENTRE);
    result .setVerticalAlignment(jxl.format.VerticalAlignment.CENTRE);
    result .setBorder(jxl.format.Border.ALL, jxl.format.BorderLineStyle.MEDIUM, jxl.format.Colour.BLUE2);
    return result;
} 
```

这种方式使用更干净：

```
 wsheet.addCell(new jxl.write.Label(columnNumber, rowNumber, "cellvalue", getCellFormat(condition))); 
```

我不得不说，`WritableCellFormat`为每个单元创建新对象是一种资源浪费。此外，jxl 对单个工作簿中使用的格式数量有限制，因此您将在较大的工作表上遇到格式不正确的问题。

我建议重用格式对象：

```
private WritableCellFormat GREEN_CELL_FORMAT;
private WritableCellFormat RED_CELL_FORMAT;

private void createFormats() {
    //you'll need to call this before writing workbook
    //JXL has problems with using one format across several workbooks
    WritableFont greenFont = new WritableFont(WritableFont.createFont("Arial"), WritableFont.DEFAULT_POINT_SIZE, WritableFont.BOLD, false, UnderlineStyle.NO_UNDERLINE, Colour.GREEN);
    WritableFont redFont= new WritableFont(WritableFont.createFont("Arial"), WritableFont.DEFAULT_POINT_SIZE, WritableFont.BOLD, false, UnderlineStyle.NO_UNDERLINE, Colour.RED);
    GREEN_CELL_FORMAT = getCellFormat(greenFont);
    RED_CELL_FORMAT = getCellFormat(redFont);
}

private WritableCellFormat getCellFormat(WritableFont font) {
    WritableCellFormat result = new WritableCellFormat(font);
    result .setWrap(true);
    result .setAlignment(jxl.format.Alignment.CENTRE);
    result .setVerticalAlignment(jxl.format.VerticalAlignment.CENTRE);
    result .setBorder(jxl.format.Border.ALL, jxl.format.BorderLineStyle.MEDIUM, jxl.format.Colour.BLUE2);
    return result;
}

private WritableCellFormat getCellFormatByCondition(boolean condition) {
    return condition ? GREEN_CELL_FORMAT : RED_CELL_FORMAT;
} 
```

因此，每个工作簿只能使用两个 CellFormat 对象。

# regex - 名称文本字段的正则表达式 - 不允许数字，不能留空

> ID：14848243
> 
> 赞同：3
> 
> 时间：2013-02-13T07:09:21.207
> 
> 标签：regex, validation, textfield

我正在使用 RegEx 对名称的文本字段进行验证。我正在使用下面的 RegEx，但它不起作用：

```
^[a-zA-Z,'.\-\s]*$ 
```

还有这个：

```
(?! $)[a-zA-Z ] 
```

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T07:11:50.867

这应该工作：`^[^\d]+$`. 这意味着它将查看字符串，如果字符串由至少一个非数字字符组成，它将匹配它。

编辑：

根据@nhahtdh 的评论，上面的正则表达式将允许任何不是数字的东西。你可以使用这样的东西：`^[A-Za-z.-]+(\s*[A-Za-z.-]+)*$`. 这将只允许它们之间有空格的字符串。这将阻止用户提供一个充满空格的字段，但如果用户提供如下内容，它将起作用：`Hey there. My name is - foo bar`. 你所拥有的：`^[a-zA-Z,'.\-\s]*$`稍作调整`^[a-zA-Z,'.\-\s]+$`将允许用户提供空白字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:16:10.397

我想这就是你想要的

```
^(?!\s+$)[a-zA-Z,'. -]+$
  -------
     |->checks if the whole string is blank.if so it won't match 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-08T02:07:52.217

我将这个用于名称，因为在我的情况下，名称不包含特殊字符，它至少包含一个字符和任意数量的中间空格

```
[a-zA-Z]+[ a-zA-Z]* 
```

# google-translate - 标记为谷歌网络翻译选择框的背景图像

> ID：14848244
> 
> 赞同：1
> 
> 时间：2013-02-13T07:09:25.537
> 
> 标签：google-translate

我需要将相应的标志显示为 Google Web Translator Widget 的背景图像。

提供的代码是：

```
<div id="google_translate_element"></div><script type="text/javascript">
function googleTranslateElementInit() {
new google.translate.TranslateElement({pageLanguage: 'en', includedLanguages:'ar,de,en,es,fa,fr,it,zh-CN', layout: google.translate.TranslateElement.InlineLayout.SIMPLE, autoDisplay: false}, 'google_translate_element'); }
</script><script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

我该如何实施？

# wpf - WPF DataGrid 中选定索引的问题

> ID：14848248
> 
> 赞同：0
> 
> 时间：2013-02-13T07:09:44.990
> 
> 标签：wpf, mvvm, binding, datagrid, selectedindex

我有一个`wpf`数据网格。

在 DataGrid 上，选定的索引绑定到 ViewModel 中的变量。

这是代码：

```
<DataGrid DataContext="{Binding MyViewModel}" SelectedIndex="{Binding SelectedXIndex,Mode=TwoWay}"  ItemsSource="{Binding xList, Mode=TwoWay}" AutoGenerateColumns="False" GridLinesVisibility="Horizontal">
    <DataGrid.Columns>
      ...
    </DataGrid.Columns>
</DataGrid> 
```

在 ViewModel 中，我有一个 X 类（可观察集合）中的项目列表，并且我有选择的索引变量：

```
 private int _selectedXIndex;
    public int SelectedXIndex
    {
        get { return _selectedXIndex; }
        set
        {
            _selectedXIndex = value;
            NotifyPropertyChanged("SelectedXIndex");
        }
    } 
```

当我单击 DataGrid 中的一个项目时，选定的索引发生了变化，并且当我在 ViewModel 的构造函数中对其进行初始化时，DataGrid 中发生了更改，但是当我在某个函数上对其进行初始化时，仅在 ViewModel 中而不在 DataGrid 中更改：

```
 public void MoveDown()
    {
        SelectedXIndex++;         
    } 
```

我不明白为什么会这样！

**编辑：**

我在函数中添加了以下代码行：

```
xList[SelectedXIndex].Name = "Changest Name For Test"; 
```

它有效。

他更改了模型的 Selected Item 行上的名称，但他没有在 DataGird 上显示所选项目就是那个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:14:15.433

除非我弄错了，否则通过执行 SelectedXIndex++ 您不会再次重置 SelectedXIndex，因此不会调用 NotifyPropertyChanged。

要么做：SelectedXIndex = _selectedXIndex++;

或者：

继续你所拥有的，并在 MoveDown 的增量之后立即调用通知。

# ios - 我可以在自定义 uitableviewcell 中使用滑动删除功能吗？

> ID：14848250
> 
> 赞同：0
> 
> 时间：2013-02-13T07:10:06.017
> 
> 标签：ios, ios6, uitableview

我试过了，但刷卡不会触发 tableView:willBeginEditingRowAtIndexPath: ！并且删除按钮永远不会出现，是否有解决方法？

编辑：这是我的实现

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
     return YES;
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return UITableViewCellEditingStyleDelete;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView beginUpdates];
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        if(_itemsArray == nil)
            NSLog(@"\n\nNIL ARRAY\n\n");
        NSLog(@"\nindexPath.row = %d\nItemsArray Count:%d",indexPath.row,_itemsArray.count);
        int row = [[[_itemsArray objectAtIndex:indexPath.row]valueForKey:@"itemRow"] integerValue];
        [_itemsArray removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [[self delegate]didDeletedBillItemRow:row];
    }

    [tableView endUpdates];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T08:25:33.600

`tableView:willBeginEditingRowAtIndexPath:`不是处理这个问题的正确地方。从官方文档中，您需要在 UITableViewController 中实现此方法：

> **注意：**要启用表格视图的滑动删除功能（其中用户水平滑动一行以显示删除按钮），您必须实现[tableView:commitEditingStyle:forRowAtIndexPath:](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDataSource/tableView%3acommitEditingStyle%3aforRowAtIndexPath%3a) 方法。

就像这样：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        //add code here for when you hit delete
    }    
} 
```

# utf-8 - Drupal 6 db_query 问题检索 utf8 字符

> ID：14848261
> 
> 赞同：0
> 
> 时间：2013-02-13T07:10:49.577
> 
> 标签：utf-8, drupal-6

关于检索 UTF8 字符集中的字符，我对 drupal 6 有一个非常奇怪的问题。有趣的是，似乎只有 drupal API 在正确检索数据方面存在问题；当我直接使用 mysqli 以及从命令行获取数据时，一切似乎都很好。

数据库和表设置为正确的字符集和排序规则，如下所示：

```
 mysql> show variables like "collation_%";
+----------------------+-----------------+
| Variable_name        | Value           |
+----------------------+-----------------+
| collation_connection | utf8_general_ci |
| collation_database   | utf8_unicode_ci |
| collation_server     | utf8_unicode_ci |
+----------------------+-----------------+
3 rows in set (0.00 sec)

mysql> show variables like "char_%";
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | utf8                       |
| character_set_connection | utf8                       |
| character_set_database   | utf8                       |
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       |
| character_set_server     | utf8                       |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+
8 rows in set (0.00 sec) 
```

当我从命令行检索数据时，一切似乎都正常。

```
 mysql> select id, name from web_gfo_article_type;
   | 294 | ДОСЛОВНО                                                      |
   | 295 | EXAMEN                                                        |
   | 296 | REVISIÓN                                                      | 
```

在我的一个自定义 drupal 模块中，我使用 drupal API (db_query) 并使用直接方法使用 mysqli 检索相同的数据。

直接方法：

```
$mysqli = new mysqli("localhost", "my_db_user_name", "my_db_password", "my_db_name");
$r = $mysqli->query("select id, name from web_gfo_article_type");

while ($row = $r->fetch_object()) {
    print('<br/>' . $row->id . ' ' . $row->name);
} 
```

直接接近的结果：

```
294 ДОСЛОВНО
295 EXAMEN
296 REVISIÓN 
```

使用 drupal 数据库 API：

```
$r = db_query("select id, name from web_gfo_article_type");

while ($row = db_fetch_object($r)) {
    print('<br/>' . $row->id . ' ' . $row->name);
} 
```

drupal db API 调用的结果：

```
294 Ð”ÐžÐ¡Ð›ÐžÐ’ÐÐž
295 EXAMEN
296 REVISIÃ“N 
```

如您所见，drupal db API 检索数据的方式存在严重错误，这导致 UTF 数据在呈现时被咀嚼。以上所有结果都显示在已正确设置元标题信息的 HTML 页面中，即

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

有人可以为我指出可能发生的事情和做错的事情的正确方向。非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:26:30.743

只需确保您编写查询的 .module-file(?) 使用的是 utf-8？

# git - TortoiseGit 问题：git 没有干净地退出（退出代码 128）

> ID：14848263
> 
> 赞同：8
> 
> 时间：2013-02-13T07:11:00.307
> 
> 标签：git, github, tortoisegit, github-for-windows

这里有一点背景：

1.  我运行Win7
2.  我有私人 git repo 并安装了 Github for Windows
3.  我不喜欢 Github for Windows 客户端（缺乏功能）。我为 Windows 安装了 TortoiseGit（仍然保留 Github for Windows）
4.  我完全按照这里的步骤[http://dancingmonkeysaccelerated.blogspot.com/2012/03/git-for-windows-with-tortoisegit-and.html](http://dancingmonkeysaccelerated.blogspot.com/2012/03/git-for-windows-with-tortoisegit-and.html)
5.  我可以获取日志并在本地提交

![在此处输入图像描述](../Images/0b5336b637e288919af27cde29f2d921.png)

6.  然后我推

![在此处输入图像描述](../Images/e0fa6654d90dc56707771daf654133d3.png)

7.  但是它给出了错误`git did not exit cleanly (exit code 128)`

![在此处输入图像描述](../Images/8f99a3f279003e4dcf357933b2c5aff2.png)

我读了这个线程：

[如何解决 TortoiseGit 上的“git 没有完全退出（退出代码 128）”错误？](https://stackoverflow.com/questions/9617336/how-to-resolve-git-did-not-exit-cleanly-exit-code-128-error-on-tortoisegit)

实际上已经通过运行 Puttygen 三次来更改 SSH 密钥。我还在文件夹中为用户设置了完全权限。没有任何效果！！

这是我在环境路径中看到的

> PATH=(其他);C:\Users\myusername\AppData\Local\GitHub\PortableGit_93e8418133eb85e81a81e5e19c272776524496c6\libexec\git-core;
> 
> GIT_SSH=C:\Program Files\TortoiseGit\bin\TortoiseGitPLink.exe
> 
> SVN_SSH=C:\Program Files\TortoiseGit\bin\TortoiseGitPLink.exe
> 
> SSH_ASKPASS=C:\Program Files\TortoiseGit\bin\SshAskPass.exe
> 
> GIT_ASKPASS=C:\Program Files\TortoiseGit\bin\SshAskPass.exe

但是：如果我使用`Github for Windows`它可以正常工作。

有人可以指出解决这个 TortoiseGit 问题的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-29T13:13:17.470

# 通用答案

每次`git.exe`执行它都会返回一个退出代码（参见[git 是否返回特定的返回错误代码？](https://stackoverflow.com/q/4917871/3906760)）。

> 退出代码`0`表示成功。

在 StackOverflow 帖子中提到了退出代码 128，这表示错误：

> 这`(exit code 128)`是某种“意外错误”（参见[https://stackoverflow.com/a/8059956/3906760](https://stackoverflow.com/a/8059956/3906760)）。这意味着什么高度依赖于执行的 git 命令和它发出的输出。因此，对于如何解决这个问题，没有一个简单而简短的答案。

以下帖子包含与推送案例相关的特定答案，最后是更通用的答案（如果这没有帮助部分）。

* * *

# 回答最初的 Stackoverflow 帖子的情况

`git.exe`以下答案基于执行推送的事实。

## 通过 SSH 使用 TortoiseGit

这里需要区分 OpenSSH 和 PuTTY。（[见这里](https://tortoisegit.org/docs/tortoisegit/tgit-dug-settings.html#tgit-dug-settings-network)）

### 开放SSH

为了使用 OpenSSH，您必须`ssh.exe`在 TortoiseGit 设置 -> 网络上设置为“SSH 客户端”。
默认情况下， OpenSSH 使用`%HOME%/.ssh/id_rsa(.pub)`文件作为其公钥/私钥，这些文件必须由 OpenSSH`ssh-keygen`而不是 PuTTYGen 创建（PuTTY 密钥具有不同的格式，但是也可以使用 PuTTYGen 进行转换）。
如果`%HOME%`没有设置，TortoiseGit 会自动设置，如果你手动设置，`%HOME%`请确保它是有效的（你可能必须使用斜杠而不是反斜杠）。

建议已经拥有 OpenSSH 密钥的人使用此方法。

### 油灰

在 Windows 上首选的 PuTTY 要求使用 PuTTYGen（随 TortoiseGit 提供）创建公钥/私钥。
`TortoiseGitPlink.exe`需要在 TortoiseGit 设置 -> 网络上选择 ssh 客户端 - 这应该是默认设置。但是，公钥/私钥没有默认位置，因此*必须对其进行配置*。有（至少有两种方法可以做到这一点）：

1.  将您的密钥配置为基于 PuTTY 的应用程序中的默认密钥。为此，请打开 PuTTY（TortoiseGit 不附带，必须单独[下载](https://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)）。然后转到 Connection-> SSH -> Auth 配置页面并选择您的 .ppk 文件作为“用于身份验证的私钥”，返回“会话”配置页面，在那里选择“默认设置”并点击保存。-> 从现在开始，PuTTY 和 PLink 将使用此密钥进行身份验证。

2.  为了让 TortoiseGit 加载一个用于 PuTTY 的私钥，必须对其进行配置。

    *   *对于现有存储库：*选择一个存储库，打开 TortoiseGit 设置 -> 远程并在此处选择您的远程存储库配置（通常为“源”）。然后选择您的私人 .ppk 密钥并点击“添加新/保存”。
    *   *对于新存储库*，可以在克隆时选择密钥。*推/拉时*确保选中“Autoload putty key”。

[更多使用 PuTTY 的提示/技巧。](https://tortoisegit.org/docs/tortoisegit/tgit-ssh-howto.html)

* * *

# 如果这没有帮助

首先，我们需要确保`git.exe`调用了正确的 - 通常情况下应该是这样，因为 TortoiseGit`git.exe`在第一次启动时会努力在系统上找到正确的。这可以通过转到 TortoiseGit 设置 -> 常规来轻松完成。应该检查“ `git.exe`Path”是否指向“Git for Windows”的正确文件夹（必须指向 Git for Windows 安装的 bin 文件夹，而不是 cmd 文件夹 - 但这应该自动发生） - 如果 msysgit（使用“Git for Windows”的开发版本），必须`[MSYSGIT-INSTALL-PATH]\mingw\bin-folder`在路径上（即在 Extern DLL Path 文本框中输入）才能执行`git.exe`（否则需要的 .dll 文件）找不到。（参见[TortoiseGit 文档](https://tortoisegit.org/docs/tortoisegit/tgit-dug-settings.html)）

现在单击“立即检查”并检查按钮旁边是否显示正确的版本号（不是没有错误消息）。
如果这有效，`git.exe`则应正确配置并使用 https。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T14:17:28.920

我遇到了同样的问题，我通过以下方式解决了它......

我安装了 NVIDIA “Tegra Android Development Pack”，它似乎也有一个 mysysgit.exe 版本。TortoiseGit 自动找到安装位置（而不是标准的 git 安装）并在设置菜单中自动填充它。

要更正此问题，请转到：“设置 -> 常规”，并且有一个字段用于 mysysgit.exe 的路径。确保这指向正确的安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T08:48:09.417

我想我为 Windows 找到了更好的选择：[http ://www.syntevo.com/smartgithg/index.html](http://www.syntevo.com/smartgithg/index.html)

到目前为止它一直在工作。但如果我能让 TortoiseGit 工作，我仍然更喜欢它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-30T11:14:50.617

就我而言，我从 Git Bash 做出了那个提交（没有干净地退出的受害者）。并尝试了 Tortoise 的下一个提交，它奏效了！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-26T20:56:04.980

我无法将 git repo 克隆到我的本地文件夹中，下面是修复它的命令

git config --global http.sslverify false

# iphone - 如何将照片从 iPhone 上传到 Facebook？

> ID：14848269
> 
> 赞同：-1
> 
> 时间：2013-02-13T07:11:18.340
> 
> 标签：iphone, facebook, upload, photo

我想将任何 iphone 设备的照片上传到我的 facebook 帐户。我想创建自己的应用程序，可以在任何苹果设备上运行。建议 XCode 中的头文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:25:42.020

因为 Facebook 有 iOS6 框架。

如果您使用的是 Facebook SDK，那么下面是上传图片到 FB Wall 的方法。

```
[FBRequestConnection startForUploadPhoto:self.image
                           completionHandler:^(FBRequestConnection *connection,
                                               id result,
                                               NSError *error) {
           if (!error) {
               if([self.apiCallDelegate respondsToSelector:@selector(successPostPictureResponse:)])
                   [self.apiCallDelegate successPostPictureResponse:result];
           }
           else{
               if ([self.apiCallDelegate respondsToSelector:@selector(failedPostPictureResponse:)])
                   [self.apiCallDelegate failedPostPictureResponse:error];
           }
    }]; 
```

希望，对你有帮助。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:43:25.690

如果您使用的是 ios 6，那么您可以使用 Facebook 的默认框架。但如果你想支持所有设备，那么你可以使用 Facebook 开发者页面中的 Facebook sdk。如果有任何疑问，那么你可以问我。在 Facebook 开发者页面中，您必须为您的应用程序创建应用程序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T08:04:23.700

您还可以使用 Sharekit 2.0，它支持所有功能，例如：共享文件、共享图像、在墙上发布内容。您可以将 sharekit 2.0 集成到您的应用程序中：链接：[https](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit) ://github.com/ShareKit/ShareKit/wiki/Installing-sharekit 。我试过这个，它对我有用。

谢谢

# ios - 升级到 xcode 4.6 和 iOS 6.1 后的警告用作前一个参数的名称而不是选择器的一部分

> ID：14848273
> 
> 赞同：2
> 
> 时间：2013-02-13T07:11:43.447
> 
> 标签：ios, xcode, xcode4.6, ios6.1

它不是错误，它只是警告

例子：-

在 .h 文件中

```
-(void)updateFromTable:(NSManagedObject*)mObject:(NSString *)key:(NSString *)value; 
```

'mObject'用作前一个参数的名称而不是选择器的一部分

.m 文件

```
-(void)updateFromTable:(NSManagedObject*)mObject:(NSString *)key:(NSString *)value{

    [mObject setValue:value forKey:key];
    [self save];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T01:18:53.403

为了避免*Parse issue: 'aVariable' 用作前一个参数的名称而不是*编译时获得的选择器的一部分等警告，您应该使用：

在 .h 文件中：

```
-(void)updateFromTable:(NSManagedObject*)mObject key:(NSString *)key values:(NSString *)value; 
```

在你的 .m 文件中：

```
-(void)updateFromTable:(NSManagedObject*)mObject key:(NSString *)key values:(NSString *)value
{
// your cool code goes here!
} 
```

你应该使用：

```
[self updateFromTable:myObject key:myKeyString values:myStringWithValues]; 
```

或者为了更清楚：

```
[self updateFromTable:myObject 
                  key:myKeyString
                values:myStringWithValues]; 
```

# git - Git 日志仅获取特定分支的提交

> ID：14848274
> 
> 赞同：291
> 
> 时间：2013-02-13T07:11:46.467
> 
> 标签：git

我想列出仅属于特定分支的所有提交。

使用以下内容，它列出了来自分支的所有提交，也来自父级（主）

```
git log mybranch 
```

我发现的另一个选项是排除 master 可访问的提交并给我我想要的，但我想避免知道其他分支名称的需要。

```
git log mybranch --not master 
```

我试图使用`git for-each-ref`，但它也列出了 mybranch 所以实际上它排除了所有：

```
git log mybranch --not $(git for-each-ref --format '^%(refname:short)' refs/heads/) 
```

**更新：**

我正在测试我不久前发现的一个新选项，直到现在看来这可能是我一直在寻找的：

```
git log --walk-reflogs mybranch 
```

**更新（2013-02-13T15:08）：**

--walk-reflogs 选项很好，但我检查了 reflogs 是否过期（默认为 90 天，[gc.reflogExpire](http://www.kernel.org/pub/software/scm/git/docs/git-gc.html)）。

我想我找到了我正在寻找的答案：

```
git log mybranch --not $(git for-each-ref --format='%(refname)' refs/heads/ | grep -v "refs/heads/mybranch") 
```

我只是从可用分支列表中删除当前分支，并使用该列表从日志中排除。这样我只能得到**只有 mybranch 才能达到的提交**。

* * *

## 回答 #1

> 赞同：235
> 
> 时间：2014-07-10T04:18:00.470

从听起来你应该使用的内容来看`cherry`：

```
git cherry -v develop mybranch 
```

这将显示包含在*mybranch*中的所有提交，但不在*develop*中。如果您放弃最后一个选项（*mybranch*），它将改为比较当前分支。

正如 VonC 指出的那样，您总是将您的分支与另一个分支进行比较，因此请了解您的分支，然后选择要比较的分支。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-02-13T07:34:49.913

> 但我想避免知道其他分支名称的需要。

我认为这是不可能的：Git 中的一个分支总是基于另一个或至少基于另一个提交，正如“ [git diff 显示不够](https://stackoverflow.com/questions/5256249/git-diff-doesnt-show-enough/5257065#5257065)”中所解释的那样：

![在此处输入图像描述](../Images/fb26553c1c5b1e49b13529de34a313c0.png)

您需要日志的参考点来显示正确的提交。

如“ [GIT - 我从哪里分支？](https://stackoverflow.com/questions/9898093/git-where-did-i-branch-from) ” 中所述：

> 分支只是指向 DAG 中某些提交的指针

因此，即使`git log master..mybranch`是一个答案，它仍然会显示太多提交，如果`mybranch`基于`myotherbranch`，它本身基于`master`.

为了找到该引用（您的分支的来源），您只能解析提交并查看它们在哪个分支中，如下所示：

*   “ [Git：查找提交来自哪个分支](https://stackoverflow.com/a/2707110/6309)”。
*   “[我怎样才能看到另一个分支是从哪个分支分叉出来的？](https://stackoverflow.com/questions/4803492/how-can-i-see-what-branch-another-branch-was-forked-from) ”

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2016-08-31T03:09:09.207

我终于找到了做OP想要的方法。它很简单：

```
git log --graph [branchname] 
```

该命令将以图形格式显示从提供的分支可访问的所有提交。但是，您可以通过查看提交图来轻松过滤该分支上的所有提交，该提交图`*`是提交行中的第一个字符。

例如，让我们看一下以下`git log --graph master`on cakephp GitHub repo 的摘录：

```
D:\Web Folder\cakephp>git log --graph master
*   commit 8314c2ff833280bbc7102cb6d4fcf62240cd3ac4
|\  Merge: c3f45e8 0459a35
| | Author: José Lorenzo Rodríguez <lorenzo@users.noreply.github.com>
| | Date:   Tue Aug 30 08:01:59 2016 +0200
| |
| |     Merge pull request #9367 from cakephp/fewer-allocations
| |
| |     Do fewer allocations for simple default values.
| |
| * commit 0459a35689fec80bd8dca41e31d244a126d9e15e
| | Author: Mark Story <mark@mark-story.com>
| | Date:   Mon Aug 29 22:21:16 2016 -0400
| |
| |     The action should only be defaulted when there are no patterns
| |
| |     Only default the action name when there is no default & no pattern
| |     defined.
| |
| * commit 80c123b9dbd1c1b3301ec1270adc6c07824aeb5c
| | Author: Mark Story <mark@mark-story.com>
| | Date:   Sun Aug 28 22:35:20 2016 -0400
| |
| |     Do fewer allocations for simple default values.
| |
| |     Don't allocate arrays when we are only assigning a single array key
| |     value.
| |
* |   commit c3f45e811e4b49fe27624b57c3eb8f4721a4323b
|\ \  Merge: 10e5734 43178fd
| |/  Author: Mark Story <mark@mark-story.com>
|/|   Date:   Mon Aug 29 22:15:30 2016 -0400
| |
| |       Merge pull request #9322 from cakephp/add-email-assertions
| |
| |       Add email assertions trait
| |
| * commit 43178fd55d7ef9a42706279fa275bb783063cf34
| | Author: Jad Bitar <jadbitar@mac.com>
| | Date:   Mon Aug 29 17:43:29 2016 -0400
| |
| |     Fix `@since` in new files docblocks
| | 
```

如您所见，仅提交`8314c2ff833280bbc7102cb6d4fcf62240cd3ac4`并`c3f45e811e4b49fe27624b57c3eb8f4721a4323b`具有`*`提交行中的第一个字符。这些提交来自主分支，而其他四个来自其他一些分支。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-09-12T05:14:33.720

以下 shell 命令应该执行您想要的操作：

```
git log --all --not $(git rev-list --no-walk --exclude=refs/heads/mybranch --all) 
```

### 注意事项

如果您已`mybranch`签出，则上述命令将不起作用。那`mybranch`是`HEAD`因为`mybranch`. 要在`mybranch`签出时使其工作，您还必须添加排除`HEAD`：

```
git log --all --not $(git rev-list --no-walk \
    --exclude=refs/heads/mybranch \
    --exclude=HEAD \
    --all) 
```

但是，除非已签出，否则*不应*排除.`HEAD``mybranch``mybranch`

同样，如果您有一个名为`origin/mybranch`与本地`mybranch`分支相对应的远程分支，则必须将其排除：

```
git log --all --not $(git rev-list --no-walk \
    --exclude=refs/heads/mybranch \
    --exclude=refs/remotes/origin/mybranch \
    --all) 
```

如果远程分支是远程存储库的默认分支（通常仅适用于`origin/master`），您还必须排除`origin/HEAD`：

```
git log --all --not $(git rev-list --no-walk \
    --exclude=refs/heads/mybranch \
    --exclude=refs/remotes/origin/mybranch \
    --exclude=refs/remotes/origin/HEAD \
    --all) 
```

如果您已签出分支，*并且*有一个远程分支，*并且*远程分支是远程存储库的默认分支，那么您最终会排除很多：

```
git log --all --not $(git rev-list --no-walk \
    --exclude=refs/heads/mybranch \
    --exclude=HEAD
    --exclude=refs/remotes/origin/mybranch \
    --exclude=refs/remotes/origin/HEAD \
    --all) 
```

### 解释

该`git rev-list`命令是一个低级（管道）命令，它遍历给定的修订并转储遇到的 SHA1 标识符。认为它等同于`git log`除了它只显示 SHA1——没有日志消息、没有作者姓名、没有时间戳，没有任何“花哨”的东西。

`--no-walk`顾名思义，该选项可防止`git rev-list`走祖先链。因此，如果您键入`git rev-list --no-walk mybranch`它只会打印一个 SHA1 标识符：`mybranch`分支的提示提交的标识符。

`--exclude=refs/heads/mybranch --all`参数告诉`git rev-list`从每个引用开始，除了`refs/heads/mybranch`.

因此，当您运行 时`git rev-list --no-walk --exclude=refs/heads/mybranch --all`，Git 会打印除`refs/heads/mybranch`. 这些提交及其祖先是您*不*感兴趣的提交——这些是您不想看到的*提交*。

*其他*提交是您想要查看的，因此我们收集输出并`git rev-list --no-walk --exclude=refs/heads/mybranch --all`告诉 Git 显示除这些提交及其祖先之外的所有内容。

该`--no-walk`参数对于大型存储库是必要的（并且是对小型存储库的优化）：没有它，Git 将不得不打印，并且 shell 将不得不收集（并存储在内存中）比必要更多的提交标识符。对于大型存储库，收集的提交数量很容易超过 shell 的命令行参数限制。

### 吉特错误？

我本来希望以下工作：

```
git log --all --not --exclude=refs/heads/mybranch --all 
```

但事实并非如此。我猜这是 Git 中的一个错误，但也许是故意的。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2020-04-18T05:04:51.060

我正在使用以下命令：

```
git shortlog --no-merges --graph --abbrev-commit master..<mybranch> 
```

或者

```
git log --no-merges --graph --oneline --decorate master..<mybranch> 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-01-18T14:50:18.573

**快速回答：**

```
git log $(git merge-base master b2)..HEAD 
```

**比方说：**

1.  你有一个**主**分支

2.  做一些提交

3.  您创建了一个名为**b2的分支**

4.  做`git log -n1`; 提交 ID 是 b2 和 master 之间的合并基础

5.  **在b2**中做一些提交

***   `git log`将显示您的 b2 和 master 的日志历史记录

    *   使用提交范围，如果你不熟悉这个概念，我邀请你谷歌它或堆栈溢出它，

    对于您的实际情况，您可以执行例如

    ```
    git log commitID_FOO..comitID_BAR 
    ```

    “..”是 log 命令的范围运算符。

    这意味着，以简单的形式，给我所有比 commitID_FOO 更新的日志...

    *   查看第 4 点，合并基础

    所以：`git log COMMITID_mergeBASE..HEAD`将向您展示差异

    *   Git可以像这样为您检索合并基础

    ```
    git merge-base b2 master 
    ```

    *   最后你可以这样做：

    ```
    git log $(git merge-base master b2)..HEAD 
    ```** 

 *** * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-02-13T07:48:56.967

你可以尝试这样的事情：

```
#!/bin/bash

all_but()
{
    target="$(git rev-parse $1)"
    echo "$target --not"
    git for-each-ref --shell --format="ref=%(refname)" refs/heads | \
    while read entry
    do
        eval "$entry"

        test "$ref" != "$target" && echo "$ref"
    done
}

git log $(all_but $1) 
```

或者，借用[Git 用户手册中的配方](http://www.kernel.org/pub/software/scm/git/docs/user-manual.html#showing-commits-unique-to-a-branch)：

```
#!/bin/bash
git log $1 --not $( git show-ref --heads | cut -d' ' -f2 | grep -v "^$1" ) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-08-18T18:35:42.237

这将输出当前分支上的提交。如果传递了任何参数，它只会输出哈希值。

# git_show_all_commits_only_on_this_branch

```
#!/bin/bash
function show_help()
{
  ME=$(basename $0)
  IT=$(cat <<EOF

  usage: $ME {NEWER_BRANCH} {OLDER_BRANCH} {VERBOSE}

  Compares 2 different branches, and lists the commits found only 
  in the first branch (newest branch). 

  e.g. 

  $ME         -> default. compares current branch to master
  $ME B1      -> compares branch B1 to master
  $ME B1 B2   -> compares branch B1 to B2
  $ME B1 B2 V -> compares branch B1 to B2, and displays commit messages

  )
  echo "$IT"
  exit
}

if [ "$1" == "help" ]
then
  show_help
fi

# Show commit msgs if any arg passed for arg 3
if [ "$3" ]
then
  OPT="-v"
fi

# get branch names
OLDER_BRANCH=${2:-"master"}
if [ -z "$1" ]
then
  NEWER_BRANCH=$(git rev-parse --abbrev-ref HEAD)
else
  NEWER_BRANCH=$1
fi

if [ "$NEWER_BRANCH" == "$OLDER_BRANCH" ]
then
  echo "  Please supply 2 different branches to compare!"
  show_help
fi

OUT=$(\git cherry $OPT $OLDER_BRANCH $NEWER_BRANCH)

if [ -z "$OUT" ]
then
  echo "No differences found. The branches $NEWER_BRANCH and $OLDER_BRANCH are in sync."
  exit;
fi

if [ "$OPT" == "-v" ]
then
  echo "$OUT"
else
  echo "$OUT" | awk '{print $2}'
fi 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-07-22T16:29:23.957

```
git rev-list --exclude=master --branches --no-walk 
```

将列出不是的每个分支的提示`master`。

```
git rev-list master --not $(git rev-list --exclude=master --branches --no-walk) 
```

`master`将列出不在任何其他分支历史中的历史中的每个提交。

排序对于为提交选择设置过滤器管道的选项很重要，因此`--branches`必须遵循它应该应用的任何排除模式，并且`--no-walk`必须遵循提供提交 rev-list 不应该走的过滤器。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-07-18T10:26:11.150

我发现这种方法相对容易。

结帐到分行，然后

1.  跑

    ```
    git rev-list --simplify-by-decoration -2 HEAD 
    ```

这将只提供两个 SHA：

1) 分支的最后一次提交 [C1]

2）并将父提交到分支的第一个提交[C2]

2.  现在运行

    ```
    git log --decorate --pretty=oneline --reverse --name-status <C2>..<C1> 
    ```

这里 C1 和 C2 是您在运行第一个命令时将获得的两个字符串。将这些不带 <> 的值放在第二个命令中。

这将给出分支内文件更改历史的列表。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-01-11T16:05:46.607

在这里，我根据 Richard Hansen 的回答（和 Ben C 的建议）提供了一个别名，但我适应了排除标签。别名应该相当健壮。

```
# For Git 1.22+
git config --global alias.only '!b=${1:-$(git branch --show-current)}; git log --oneline --graph "heads/$b" --not --exclude="$b" --branches --remotes #'
# For older Git:
git config --global alias.only '!b=${1:-$(git symbolic-ref -q --short HEAD)}; b=${b##heads/}; git log --oneline --graph "heads/$b" --not --exclude="$b" --branches --remotes #' 
```

使用示例：

```
git only mybranch  # Show commits that are in mybranch ONLY
git only           # Show commits that are ONLY in current branch 
```

请注意，**ONLY**表示如果给定分支被删除（不包括标签的影响），提交将会**丢失**（垃圾回收之后）。即使不幸有一个名为的标签`mybranch`（感谢 prefix `heads/`），别名也应该起作用。另请注意，如果提交是任何远程分支（包括上游，如果有）的一部分，则不会显示提交，符合*ONLY*的定义。

别名将单行历史记录显示为所选提交的图表。

```
 a --- b --- c --- master
   \           \
    \           d
     \           \
      e --- f --- g --- mybranch (HEAD)
       \
        h --- origin/other 
```

通过上面的示例，`git only`将显示：

```
 * (mybranch,HEAD)
  * g
  |\
  | * d
  * f 
```

为了包含标签（但仍然不包括`HEAD`），别名变为（如上为旧 Git 调整）：

```
git config --global alias.only '!b=${1:-$(git branch --show-current)};  git log --oneline --graph --all --not --exclude="refs/heads/$b" --exclude=HEAD --all #' 
```

或者包含所有标签的变体，包括 HEAD （并默认删除当前分支，因为它不会输出任何内容）：

```
git config --global alias.only '!git log --oneline --graph --all --not --exclude=\"refs/heads/$1\" --all #' 
```

最后一个版本是唯一真正满足条件 commits-that-are-lost-if-given-branch-is-deleted 的版本，因为如果分支被签出，并且没有 HEAD 或任何指向的提交，则无法删除它其他标签将丢失。然而，前两个变体更有用。

最后，别名不适用于远程分支（例如。`git only origin/master`）。必须修改别名，例如：

```
git config --global alias.remote-only '!git log --oneline --graph "$1" --not --exclude="$1" --remotes --branches #' 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-07-23T04:15:24.060

在我的情况下，我们使用的是 Git Flow 和 GitHub。您需要做的就是：将您的功能分支与 GitHub 上的开发分支进行比较。

它将显示仅对您的功能分支所做的提交。

例如：

[https://github.com/your_repo/compare/develop...feature_branch_name](https://github.com/your_repo/compare/develop...feature_branch_name)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-10-07T07:48:53.977

我需要为特定分支导出一行日志。

所以我可能想出了一个更简单的解决方案。
这样做时，`git log --pretty=oneline --graph`我们可以看到当前分支中未完成的所有提交都是以`|`

所以一个简单`grep -v`的工作：
`git log --pretty=oneline --graph | grep -v "^|"`

当然，如果您需要其他信息，您可以更改 pretty 参数，只要将其保留在一行中即可。

您可能也想删除合并提交。
当消息以“合并分支”开头时，管道另一个`grep -v`，你就完成了。

在我的具体情况下，最终命令是：
`git log --pretty="%ad : %an, %s" --graph | grep -v "^|" | grep -v "Merge branch"`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-05-10T03:25:55.920

**选项 1**（似乎更快，但您可能会`bash: /mingw64/bin/git: Argument list too long`在 Git Bash 中遇到错误（尽管它在 Linux 中有效），具体取决于您的项目有多少分支）

`git log <your_branch> --not $(git branch -a | grep -v <your_branch> | grep -ve '->' | sed "s/\s//g")`

**选项 2**

`git rev-list <your_branch> | git name-rev --stdin | sed -E 's/~[0-9]+//g; s/\^[0-9]+//g' | grep " <your_branch>" | awk -F " " '{print $1}'`

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-01-11T15:09:49.797

这仍然在 2021 年讨论过，这个问题是 8 年前提出的。我很困惑为什么没有人建议使用 git --first-parent。这不是现在的解决方案吗？我目前有同样的问题，这对我来说看起来很好。我结合了这些选项：

```
git --first-parent --cherry  first-commit-on-branch.. 
```

我什至将来自 master 的进一步提交合并到我的功能分支中，但是由于cherry 是--cherry-pick、--right-only 和--no-merges 的组合，这些提交被过滤掉了。您需要手动查找分支上的第一个提交或从那时起您想要查找所有后续提交的提交。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-12-21T15:00:36.690

我设法通过使用 原始文档来做到这一点：`git log <branch>` git [-log](https://git-scm.com/docs/git-log)`--not <branch-name>`

**格式示例：**

```
git log branch-name  --date-order --format='%ai %an <%ae> %h %f'--format='%ai , %an ,<%ae> ,%h ,%f' >> c:\log.csv 
```**

# c# - 如何使用C#除法得到余数和模数

> ID：14848275
> 
> 赞同：21
> 
> 时间：2013-02-13T07:11:45.873
> 
> 标签：c#

我想使用 C# 将 5 除以 3。除法后，我可以使用什么运算符来获取余数或模数？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-13T07:17:09.330

你可以这样做：

```
 double answer = 5.0/3.0;

 int remainder = 5 % 3;

 int quotient = 5 / 3; 
```

# iphone - 使用 customCell 在 tableView 中加载三个图像

> ID：14848279
> 
> 赞同：1
> 
> 时间：2013-02-13T07:12:09.930
> 
> 标签：iphone, xcode

我创建了一个每行`tableView`有`customCell`三个图像的图像。我从文件夹中加载了图像。当我向上或向下滚动时，`tableView`需要时间向上或向下移动。我发现了一些概念，例如缓存和延迟加载，它们是从服务器加载的图像。我不知道如何在我的应用程序中使用它。

```
ImagesClass *Obj1 = [imageLists objectAtIndex:indexPath.row*noOfImageInRow];

    UIImage *image1 = [self getImageForImageId:Obj1.imageId FromPath:SAVEDIMAGE_DIR];
    Obj1.thumbImage = [self imageWithImage:image1 convertToSize:CGSizeMake(130, 130)];

    [cell setImage:1 :Obj1.thumbImage RowNo:indexPath.row*noOfImageInRow];

}

if ([imageLists count] > indexPath.row*noOfImageInRow+1) {

    ImagesClass *Obj2 = [imageLists objectAtIndex:indexPath.row*noOfImageInRow+1];
    UIImage *image1 = [self getImageForImageId:Obj2.imageId FromPath:SAVEDIMAGE_DIR];
    Obj2.thumbImage = [self imageWithImage:image1 convertToSize:CGSizeMake(130, 130)];

    [cell setImage:2 :Obj2.thumbImage RowNo:indexPath.row*noOfImageInRow+1];

}

if ([imageLists count] > indexPath.row*noOfImageInRow+2) {

    ImagesClass *Obj3 = [imageLists objectAtIndex:indexPath.row*noOfImageInRow+2];

    UIImage *image1 = [self getImageForImageId:Obj3.imageId FromPath:SAVEDIMAGE_DIR];
    Obj3.thumbImage = [self imageWithImage:image1 convertToSize:CGSizeMake(130, 130)];

    [cell setImage:3 :Obj3.thumbImage RowNo:indexPath.row*noOfImageInRow+2];

}

cell.selectionStyle = UITableViewCellSelectionStyleNone;
cell.delegate = self;
return cell; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:24:23.963

我建议你使用这个[AsyncImageView](https://github.com/nicklockwood/AsyncImageView)。要调用此 API：

```
ASyncImage *img_EventImag = alloc with frame;
NSURL *url = yourPhotoPath;
[img_EventImage loadImageFromURL:photoPath];
[self.view addSubView:img_EventImage]; // In your case you'll add in your TableViewCell. 
```

这与使用 UIImageView 相同。很简单，它可以为您完成大部分工作。AsyncImageView 包括 UIImageView 上的一个简单类别，用于在 iOS 上异步加载和显示图像，以便它们不会锁定 UI，以及用于更高级功能的 UIImageView 子类。AsyncImageView 与 URL 一起使用，因此它可以与本地或远程文件一起使用。

加载/下载的图像缓存在内存中，并在出现内存警告时自动清理。AsyncImageView 独立于 UIImage 缓存运行，但默认情况下，位于应用程序包根目录中的任何图像都将存储在 UIImage 缓存中，以避免缓存图像的任何重复。

该库还可用于独立于 UIImageView 加载和缓存图像，因为它提供对底层加载和缓存类的直接访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:30:02.103

试试这个简单的方法

如果您在本地加载图像，请尝试以下代码

在 ViewDidLoad 下执行此操作

```
 Image1Array=[[NSMutableArray alloc]initwithobjects:[UIImage imagenamed@"cell1stimage.png"],....nil];
 Image2Array=[[NSMutableArray alloc]initwithobjects:[UIImage imagenamed@"cell2ndimage.png"],....nil];
 Image3Array=[[NSMutableArray alloc]initwithobjects:[UIImage imagenamed@"cell3rdimage.png"],....nil];

 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
return [Image1Array count];
}

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

{
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    UIImageView *imageview=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 42, 42)];
    [imageview setImage:[Image1Array objectAtIndex:indexpath.row];
    [cell.contentView addSubview:imageview];
    [imageview release];

    UIImageView *imageview2=[[UIImageView alloc]initWithFrame:CGRectMake(85, 0, 42, 42)];
    [imageview setImage:[Image2Array objectAtIndex:indexpath.row];
    [cell.contentView addSubview:imageview];
    [imageview2 release];

    UIImageView *imageview3=[[UIImageView alloc]initWithFrame:CGRectMake(0, 120, 42, 42)];
    [imageview3 setImage:[Image3Array objectAtIndex:indexpath.row];
    [cell.contentView addSubview:imageview3];
    [imageview3 release];
    }

    return cell;
    } 
```

希望这可以帮助..！

如果您发现图像仍然加载缓慢，则在数组中添加 UIImageview 而不是 UIimage

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:05:18.657

有时我以前​​做过这个。我的经验是，无论是从文件夹加载还是从网络加载，都必须在本地保存缩略图副本。然后加载速度会更快。

对于每张图片，我都将缩略图副本保存在 /thumbnail 文件夹中。如果某些图像没有缩略图，我存储一个然后加载它们。通过这种方式，表格单元格加载图像的速度更快。

# asp.net - 从内存流上传文件到 SFTP

> ID：14848280
> 
> 赞同：0
> 
> 时间：2013-02-13T07:12:12.930
> 
> 标签：asp.net, c#-4.0, azure, sftp

如何将文件从内存流上传到 SFTP 服务器。本地路径不可用，因为我正在从 azure blob 上传文件。因为我得到了 .NET 不支持 SFTP 协议的信息，因此尝试了 3rd 方 dll，例如“SharpSSH”、“Routrek.granados”和“WinSCP”。但是没有一个适合我的场景。即 put 方法不支持 bit[] 或 stream。

任何人都可以建议我免费且适合我的情况的dll或我可以处理的方式。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:56:48.797

您可以继续使用 WinSCP 之类的解决方案，但不要尝试使用 MemoryStream / byte[]，只需先在本地下载文件：

```
var client = account.CreateCloudBlobClient();
var container = client.GetContainerReference("temp");
var blob = container.GetBlobReferenceFromServer("myblob.zip");

// This assumes you're using a Cloud Service and have a local resource called files
var dropFolder = RoleEnvironment.GetLocalResource("files").RootPath;
var filePath = Path.Combine(dropFolder, "myblob.zip");

// Download blob to a local resource first.
using (var fs = new FileStream(filePath, FileMode.Create))
{
    blob.DownloadToStream(fs);
}

var proc = new Process();
proc.StartInfo.FileName = "winscp.com";
proc.StartInfo.UseShellExecute = false;
proc.StartInfo.RedirectStandardInput = true;
proc.StartInfo.RedirectStandardOutput = true;
proc.StartInfo.CreateNoWindow = true;
proc.Start();
proc.StandardInput.WriteLine("option batch abort");
proc.StandardInput.WriteLine("option confirm off");
proc.StandardInput.WriteLine("open mysession");
proc.StandardInput.WriteLine("ls");
proc.StandardInput.WriteLine("put " + filePath);
proc.StandardInput.Close(); 
```

# asp.net-mvc - twitter bootstrap 2.2.2 typeahead 简单的内置函数数据源不起作用

> ID：14848281
> 
> 赞同：0
> 
> 时间：2013-02-13T07:12:17.210
> 
> 标签：asp.net-mvc, jquery, twitter-bootstrap

我正在尝试使用 bootstrap 2.2.2 typeahead，根据文档可以将其配置为 Source 选项的某些功能。

```
 $('#test').typeahead({           
        source: function (query, process) {
            return $.get('@Url.Action("Search")', { query: query }, function (data) {
                return process(data);
            });
        }
    }); 
```

这就是我正在尝试的。

我的服务器端有简单的动作

```
 public ActionResult Search(string query)
    {
        var teamMembers = new List<String>();
        for (int i = 1; i < 21; i++)
        {
            var teammember = "john doe + ( " + i +" )";                                    
            teamMembers.Add(teammember);
        };

        return new JsonResult()
        {
            Data = teamMembers.ToArray(),
            JsonRequestBehavior = JsonRequestBehavior.AllowGet
        };
    } 
```

没有比这更简单的了，但我的“搜索”操作根本没有受到影响。如果有人可以指导我做错了什么，TypeAhead 如何通过某些异步设置的 Source 来精确调用控制器 Action。仅使用 bootstrape 2.2.2 本机组件的功能。如果需要任何澄清，请告诉我。

静态数据工作得很好，所以显然这里没有我丢失的文件。您也可以在下面的标记中看到。

```
 <input type="text" data-provide="typeahead"                                 
            data-source='["Deluxe Bicycle", "Super Deluxe Trampoline", "Super Duper Scooter"]'> 
```

PS 请不要提及任何 typeahead 分叉，我只是想知道 twitter bootstrap 2.2.2 本机 typeAhead 功能。

**更新：完整代码** HomeController

```
 public class HomeController : Controller
    {
    public ActionResult Index()
    {
        return View();
    }        

    public ActionResult TypeAhead(string query)
    {
        var teamMembers = new List<String>();
        for (int i = 1; i < 21; i++)
        {
            var teammember = "john doe + ( " + i +" )";                                    
            teamMembers.Add(teammember);
        };

        return new JsonResult()
        {
            Data = teamMembers.ToArray(),
            JsonRequestBehavior = JsonRequestBehavior.AllowGet
        };
    }        
} 
```

我当前的视图标记。

```
 <script src="~/Scripts/jquery-1.7.1.js"></script>
    <script src="~/Scripts/bootstrap.js"></script>
    <link href="~/Content/bootstrap.css" rel="stylesheet" />

    <script type="text/javascript">

      $(document).ready(function() {

          $('#testSearch').typeahead({
              source: function (query, process) {
                  $.get('@Url.Action("TypeAhead")', { query: query }, function(data) {
                     process(data);
                  });
               }
          });        
      });

    </script>

    <ol class="round">               
      <li class="three">
        <input id="testSearch" data-provide="typeahead" >
     </li>        
   </ol> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:38:58.580

你的代码对我来说很好。

我创建了一个全新的项目，从 nuget 获得了 twitter bootstrap 2.2.2，并将以下代码添加到索引视图中。

```
<input type="text" id="test" data-provide="typeahead"/>

<script>
$('#test').typeahead({
    source: function (query, process) {
        return $.get('@Url.Action("Search")', { query: query }, function (data) {
            return process(data);
        });
    }
});
</script> 
```

然后我将您的搜索方法复制并粘贴到家庭控制器中

在文本框中输入字母 J 和 O 后，预输入功能按预期工作。

一定有其他东西给你带来了问题。

您是否使用网络检查器或 fiddler 之类的工具检查了当您在文本框中键入时是否向正确的搜索端点发出请求？

如果您创建一个新项目，它对您有用吗？

您可以在此处发布您认为的完整代码吗？

# ruby-on-rails - 如何从 JSON POST 中保存 rails 对象？

> ID：14848282
> 
> 赞同：0
> 
> 时间：2013-02-13T07:12:29.900
> 
> 标签：ruby-on-rails, json

我想知道如何通过 JSON POST 在 rails 3 中保存对象？

问题是**UsersController.rb**无法识别**JSON POST**参数并假定请求中没有参数。

我有两个相同的创建方法，只是为了调试问题。提前致谢！

**路由.rb**

```
post 'users'          => "users#create"
match 'users/create'  => "users#create_user", :via => [ :post] 
```

**用户.rb**

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable,
         :validatable, :token_authenticatable #, :omniauthable

  has_many :leader_boards

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :authentication_token , :first_name, :large_profile_image_url, :last_name, :profile_image_url, :provider, :uid

  validates :email, :uniqueness => { :case_sensitive => false }
  validates :email, :first_name, :last_name, :presence => true
  validates :password, :password_confirmation, :presence => true
  validates :password, :length => { :minimum => 8 }

  def name
    return self.first_name.to_s + ' ' + self.last_name.to_s
  end
end 
```

**用户控制器.rb**

```
module Api
  module V1
    class UsersController < ApplicationController
      before_filter :authenticate_user!, :except => [:create, :show, :update, :create_user, :facebook,:leader_board]
      respond_to :json

      def create
        @user = User.create(params[:user])
        begin
          @user.reset_authentication_token!
        rescue

        end
        respond_with @user
      end

      def create_user
        begin
          @user = User.new
          @user.email = params[:email]
          @user.password  = params[:password]
          @user.password_confirmation   = params[:password_confirmation]
          @user.first_name = params[:first_name]
          @user.last_name  = params[:last_name]
          @user.save
        rescue

        end
        respond_with @user
      end 
```

**JSON 发布**

> { “email”：“jordanpass@jordanpass.cpm”，“first_name”：“mike”，“last_name”：“jordan”，“密码”：“jordanpass”，“password_confirmation”：“jordanpass”}

**回复**

```
{"errors":{"email":["can't be blank","can't be blank"],"password":["can't be blank","can't be blank","is too short (minimum is 8 characters)"],"first_name":["can't be blank"],"last_name":["can't be blank"],"password_confirmation":["can't be blank"]}} 
```

**示例帖子替代屏幕截图**

[![](../Images/1cf4f6c586e7f63c72ad5e5a8a865c68.png)](https://i.stack.imgur.com/u78iu.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T07:14:59.927

您的 JSON 帖子：

> { “email”：“jordanpass@jordanpass.cpm”，“first_name”：“mike”，“last_name”：“jordan”，“密码”：“jordanpass”，“password_confirmation”：“jordanpass”}

是不正确的。由于控制器正在寻找`params[:user]`，您的 JSON 应该是：

> {“用户”：{“电子邮件”：“jordanpass@jordanpass.cpm”，“first_name”：“mike”，“last_name”：“jordan”，“密码”：“jordanpass”，“password_confirmation”：“jordanpass”} }

# java - JPA中没有组合的列关系

> ID：14848283
> 
> 赞同：0
> 
> 时间：2013-02-13T07:12:37.983
> 
> 标签：java, hibernate, jpa, one-to-many

我有一个机器表和一个应用程序表。在我的模型中，应用程序在机器上运行，因此应用程序包含机器引用。但是机器不知道自己运行了哪些应用程序。

所以我的类定义是这样的：

```
class Application{

     @ManyToOne(fetch = FetchType.EAGER,cascade={CascadeType.REFRESH})
     @JoinColumn(name = "machine_id",referencedColumnName="id",nullable=true)
     Machine machine
}

class Machine{
     @Id
     @Column(name = "id")
     int id 
} 
```

所以我希望，如果我删除一台机器，它的所有应用程序都应该被删除。

是否有任何可能的方法不将应用程序列表添加到 Machine 类中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:25:54.063

尝试低于 JPQL

```
query = entityManager.createQuery("select o from Application o where o.machine.id = :machineid");
query.setParameter("machineid", 100);

List<Application> obs = (    List<Application>)query.getResultList(); 
```

此查询将返回在具有给定 ID 的特定机器上运行的所有应用程序并删除这些应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:50:43.907

除了@Real 的回答，您还可以使用批量更新，首先删除应用程序，然后删除机器：

```
Query removeApplications = entityManager.createQuery("DELETE FROM Application a WHERE a.machine.id = :machineid");
removeApplications.setParameter("machineid", machineIdToBeDeleted);
removeApplications.executeUpdate();

Query removeMachine = entityManager.createQuery("DELETE FROM Machine m WHERE m.id = :machineid");
removeMachine.setParameter("machineid", machineIdToBeDeleted);
removeMachine.executeUpdate(); 
```

不要反过来删除，你可能会得到一个违反约束的异常。

**编辑**- 这样做的正确 JPA 方法是使关系双向并级联删除。为此，您需要将应用程序列表添加到`Machine`类并添加相应的级联属性，但是由于您明确询问如何在不添加的情况下执行此操作，因此我建议进行批量更新。

以下是级联的外观：

```
Machine machine = entityManager.find(machineId);
entityManager.remove(machine); 
```

# mysql - 使用 min() 查询未显示正确结果

> ID：14848284
> 
> 赞同：1
> 
> 时间：2013-02-13T07:12:40.710
> 
> 标签：mysql, sql

我有这张桌子：

```
CREATE TABLE IF NOT EXISTS `Vars` (
  `ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `code` varchar(15) NOT NULL,
  `userID` bigint(20) NOT NULL,
  `viewedT` bigint(20) NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ; 
```

我有这些价值观：

```
INSERT INTO `Vars` (`ID`, `code`, `userID`, `viewedT`) VALUES
(1, 'alex1234567', 1, 25),
(2, 'Dan1234567', 2, 15); 
```

现在奇怪的是，我不能用这个查询得到正确的结果：

```
select min(`viewedT`), `code` From Vars 
```

结果是：

```
 min(`viewedT`)     Code
 15                 alex1234567 
```

**编辑：**我需要的是选择`code`哪些有`min(viewsT)`

我确信我在语法中遗漏了一些非常小的东西，这会让我投票失败，但我需要知道我的错误并从中吸取教训。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:16:34.640

假设您想找到具有最小值的一行，请使用

```
select viewedT, code, id from vars
  where viewedT= (select min(viewedT) from vars) 
```

如果不止一行包含最小值，您将获得所有此类行。即，如果两行的值为 15 `viewedT`，您将得到两者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T07:36:23.370

```
select viewedT,Code from Vars 
where viewedT=(select MIN(V.viewedT) from Vars as V) 
```

它会给你以下结果

```
viewedT         Code

15          Dan1234567 
```

# arrays - 将 addChild () 添加到 arryas actionscript 3

> ID：14848292
> 
> 赞同：-1
> 
> 时间：2013-02-13T07:13:12.463
> 
> 标签：arrays, actionscript-3

我需要阵列中的这 2 个项目才能出现在舞台上。现在这些是数组中的所有项目。问题是如何使用数组将这两个对象添加到舞台？

```
for (var b:int = 0; b < csa.length; b++)
{
    addChild(csa[1]);
    addChild(csa[2]);
    csa[1].x = 27;
    csa[1].y = 214;
    csa[2].x = 9;
    csa[2].y = 833;
} 
```

目前，它给了我这个错误：

> TypeError：错误 #2007：参数 child 必须为非空。在 Flash.display::DisplayObjectContainer/addChild() 在 SkoolBook_fla::MainTimeline/frame26()[SkoolBook_fla.MainTimeline::frame26:10]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:24:29.033

数组索引从零开始，而不是从一开始。所以当 中有两个有效项时`csa`，有效元素是`csa[0]`和`csa[1]`。`csa[2]`无效。您需要使用 0, 1 而不是 1, 2 作为索引。`addChild`使用未定义的元素 ( `csa[2]`) 调用它时会引发错误。

只是与错误无关的注释：-当您直接访问两个元素时，我看不到任何使用循环的理由。

# ruby-on-rails - 使用点击事件更新数据库记录

> ID：14848293
> 
> 赞同：0
> 
> 时间：2013-02-13T07:13:18.173
> 
> 标签：ruby-on-rails, jquery, rails-activerecord, ujs

您好我正在尝试通过单击事件远程更新数据库中的元素。当点击事件被触发时，我收到以下错误，但我相信我使用了正确的方法

```
Started PUT "/availabilities/131/edit" for 124.168.74.144 at 2013-02-13 08:02:40 +0100

ActionController::RoutingError (No route matches [PUT] "/availabilities/131/edit"): 
```

haml 点击事件

```
.six.columns#named_players

 %h5 Named Players
  %table.twelve
    %thead
      %tr
        %th Change Status
        %th Attending
    %tbody
      - @availabilities.each do |a|
        %tr
          %td= full_name(a.user)
          %td
            %ul.button-group.two-up.even
              %li= button_to 'Accept', edit_availability_path(a), :remote => true, :method => :put, :class => 'button tiny success', :disable_with => 'Add'
              %li= link_to 'Decline', '#', :remote => true, :method => :put, :class => 'button tiny alert' 
```

控制器

```
def update
    @availability = Availability.find(params[:id])

    respond_to do |format|
      if @availability.update_attributes(params[:availability])
        format.html { redirect_to @availability, :notice => 'Availability was successfully updated.' }
        format.js
      else
        format.html { render :action => "edit" }
        format.js
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:42:21.117

它接缝你正在点击`[PUT] "/availabilities/131/edit"`而不是`[PUT] "/availabilities/131/update"`

# javascript - 如何逐个单元格地为表格中的元素设置动画？

> ID：14848299
> 
> 赞同：1
> 
> 时间：2013-02-13T07:13:42.650
> 
> 标签：javascript, jquery, animation, jquery-animate

我在表格单元格中有一个元素，我必须将它移动到另一个动画慢的单元格。我该怎么做。

```
<table>
<td ..

</table> 
```

看demo [DEMO](http://jsfiddle.net/QXdbK/1/)

我从上一个[线程中获得了一些资源](https://stackoverflow.com/questions/907279/jquery-animate-moving-dom-element-to-new-parent)

我想在表格中逐个单元格地缓慢移动元素？演示中是否缺少任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:53:39.177

您的小提琴中的代码可以正常工作，但是由于您在循环中运行动画的调用，它会很快，您或多或少地同时调用所有动画。我稍微改变了方法：

```
$("#move").bind("click",animate);

var direction=[4,7,8,11]
function animate(){
    // initalize with first element of direction array
    moveAnimate("#p11",0);
}

function moveAnimate(element, count){
    if(count >= direction.length) {return; }
        // set the newParent
        var newParent = '#pos' + direction[count],
            element = $(element); //Allow passing in either a JQuery object or selector

    newParent= $(newParent); //Allow passing in either a JQuery object or selector
    var oldOffset = element.offset();
    element.appendTo(newParent);
    var newOffset = element.offset();

    var temp = element.clone().appendTo('body');
    temp.css('position', 'absolute')
        .css('left', oldOffset.left)
        .css('top', oldOffset.top)
        .css('zIndex', 1000);
    element.hide();
    temp.animate( {'top': newOffset.top, 'left':newOffset.left}, 'slow', function(){
        element.show();
        temp.remove();
        // increase the counter
        count++;
        // call next animation after the current one is finished
        moveAnimate(element,count);
    });
} 
```

更新的[小提琴在这里](http://jsfiddle.net/axelmichel/QXdbK/2/)。

# iphone - Iphone 使用加速度计

> ID：14848305
> 
> 赞同：0
> 
> 时间：2013-02-13T07:14:16.957
> 
> 标签：iphone

我必须向服务器发送通知，以防 iphone 在这两种情况下自由落体应用程序在前台

和背景。这怎么可能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:41:21.760

除非在 Apple 允许的非常特殊的情况下（您的应用程序不是其中之一），否则不可能在后台持续运行应用程序，如下表所示：

*   **音频**——应用程序在后台向用户播放可听内容。（此内容包括使用 AirPlay 的流式音频或视频内容。）
*   **位置**- 该应用程序让用户随时了解他们的位置，即使它在后台运行时也是如此。
*   **Voip** — 该应用程序使用户能够使用 Internet 连接拨打电话。newsstand-content - 该应用程序是一个 Newsstand 应用程序，可在后台下载和处理杂志或报纸内容。
*   **外部附件**——该应用程序与需要通过外部附件框架定期提供更新的硬件附件配合使用。
*   **蓝牙中心**——该应用程序与需要通过核心蓝牙框架定期提供更新的蓝牙配件配合使用。
*   **Bluetooth-peripheral** - 该应用程序通过 Core Bluetooth 框架支持外围模式下的蓝牙通信。

如果你想实现你的应用程序，你可以阅读[应用程序编程指南，但如果你试图将应用程序发布到 Apple Store，它可能会被拒绝](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

# javascript - 将图像添加到 openlayers 地图

> ID：14848307
> 
> 赞同：5
> 
> 时间：2013-02-13T07:14:33.130
> 
> 标签：javascript, map, openlayers

这是我在 openlayers 地图上添加图像的代码。

```
var image = new OpenLayers.Layer.Image(
    'Image 1',
    'http://belocalat.com/wp-content/plugins/openlayers/data/baselayer-img1.png',
    //new OpenLayers.Bounds(27.418100,35.771100,28.388000,36.558500),
    new OpenLayers.Size(800,255),
    {isBaseLayer: false}
 );

map.addLayer(image); 
```

但是，我无法在 openlayers 上显示图像。谁能给我解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:02:08.123

我已经尝试过以下代码并且它已经工作了。[从fiddle](http://jsfiddle.net/aragon/N7dSu/)签出。不要忘记从图层切换器中选择图像图层。

```
var osm = new OpenLayers.Layer.OSM();

var graphic = new OpenLayers.Layer.Image(
    'Image',
    'http://belocalat.com/wp-content/plugins/openlayers/data/baselayer-img1.png',
    new OpenLayers.Bounds(27.418100,35.771100,28.388000,36.558500),
    new OpenLayers.Size(800,255),
    {numZoomLevels: 3}
);

map.addControl(new OpenLayers.Control.LayerSwitcher());
map.addLayers([osm, graphic]);
map.zoomToExtent(new OpenLayers.Bounds(27.418100,35.771100,28.388000,36.558500)); 
```

我希望它可以帮助你...

# c# - ASP.Net Web API 自定义模型绑定与 x-www-form-urlencoded 发布的数据 - 似乎没有任何工作

> ID：14848308
> 
> 赞同：12
> 
> 时间：2013-02-13T07:14:34.403
> 
> 标签：c#, asp.net-web-api, model-binding

`x-www-form-urlencoded`在发布数据时，我在让自定义模型绑定正常工作时遇到了很多麻烦。我已经尝试了所有我能想到的方法，但似乎没有任何东西能产生预期的结果。请注意，在发布 JSON 数据时，我的 JsonConverters 等都可以正常工作。当我发帖时`x-www-form-urlencoded`，系统似乎无法弄清楚如何绑定我的模型。

我的测试用例是我想将 TimeZoneInfo 对象绑定为我的模型的一部分。

这是我的模型活页夹：

```
public class TimeZoneModelBinder : SystemizerModelBinder
{
    protected override object BindModel(string attemptedValue, Action<string> addModelError)
    {
        try
        {
            return TimeZoneInfo.FindSystemTimeZoneById(attemptedValue);
        }
        catch(TimeZoneNotFoundException)
        {
            addModelError("The value was not a valid time zone ID. See the GetSupportedTimeZones Api call for a list of valid time zone IDs.");
            return null;
        }
    }
} 
```

这是我正在使用的基类：

```
public abstract class SystemizerModelBinder : IModelBinder
{
    public bool BindModel(HttpActionContext actionContext, ModelBindingContext bindingContext)
    {
        var name = GetModelName(bindingContext.ModelName);
        var valueProviderResult = bindingContext.ValueProvider.GetValue(name);
        if(valueProviderResult == null || string.IsNullOrWhiteSpace(valueProviderResult.AttemptedValue))
            return false;

        var success = true;
        var value = BindModel(valueProviderResult.AttemptedValue, s =>
        {
            success = false;
            bindingContext.ModelState.AddModelError(name, s);
        });
        bindingContext.Model = value;
        bindingContext.ModelState.SetModelValue(name, new System.Web.Http.ValueProviders.ValueProviderResult(value, valueProviderResult.AttemptedValue, valueProviderResult.Culture));
        return success;
    }

    private string GetModelName(string name)
    {
        var n = name.LastIndexOf(".", StringComparison.Ordinal);
        return n < 0 || n >= name.Length - 1 ? name : name.Substring(n + 1);
    }

    protected abstract object BindModel(string attemptedValue, Action<string> addModelError);
} 
```

我使用了这样的基类来简化创建其他自定义模型绑定器的过程。

这是我的模型绑定器提供程序。请注意，这是从我的 IoC 容器中正确调用的，因此我不会费心展示我的代码的这方面。

```
public class SystemizerModelBinderProvider : ModelBinderProvider
{
    public override IModelBinder GetBinder(HttpConfiguration configuration, Type modelType)
    {
        if(modelType == typeof(TimeZoneInfo))
            return new TimeZoneModelBinder();

        return null;
    }
} 
```

最后，这里是动作方法和模型类：

```
[DataContract)]
public class TestModel
{
    [DataMember]
    public TimeZoneInfo TimeZone { get; set; }
}

[HttpPost]
public HttpResponseMessage Test(TestModel model)
{
    return Request.CreateResponse(HttpStatusCode.OK, model);
} 
```

对于动作方法，我尝试过：

```
public HttpResponseMessage Test([FromBody] TestModel model) 
```

这会调用`FormUrlEncodedMediaFormatter`，它似乎完全忽略了我的自定义模型绑定器。

```
public HttpResponseMessage Test([ModelBinder] TestModel model) 
```

正如预期的那样，这调用了我的自定义模型绑定器，但是它只提供了 ValueProviders`RouteData`并且`QueryString`由于某种原因不为正文内容提供任何东西。见下文：

![价值提供者](../Images/13a3cbe6c842d698149a2171b9077e88.png)

我也尝试过用`ModelBinder(typeof(SystemizerModelBinderProvider))`

为什么模型绑定只在我使用 [ModelBinder] 属性时发生，为什么它只尝试读取路由和查询字符串值并忽略正文内容？为什么`FromBody`忽略我的自定义模型绑定器提供程序？

如何创建可以接收 POSTED`x-www-form-urlencoded`数据并使用自定义逻辑成功绑定模型属性的场景？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-16T10:10:10.660

我建议您阅读[`following blog post`](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)Mike Stall 详细解释模型绑定在 Web API 中的工作原理的文章：

> 绑定参数有两种技术：模型绑定和格式化程序。在实践中，WebAPI 使用模型绑定从查询字符串中读取，并使用格式化程序从正文中读取。
> 
> 以下是确定参数是使用模型绑定还是格式化程序读取的基本规则：
> 
> 1.  如果参数上没有属性，则纯粹根据参数的 .NET 类型做出决定。“简单类型”使用模型绑定。复杂类型使用格式化程序。“简单类型”包括：原语、TimeSpan、DateTime、Guid、Decimal、String 或具有从字符串转换的 TypeConverter 的东西。
> 2.  您可以使用`[FromBody]`属性来指定应从正文中读取参数。
> 3.  您可以使用参数的`[ModelBinder]`属性或参数的类型来指定参数应该是模型绑定的。此属性还允许您配置模型绑定器。`[FromUri]`是一个派生实例，`[ModelBinder]`它专门将模型绑定器配置为仅查看 URI。
> 4.  正文只能读取一次。因此，如果您在签名中有 2 个复杂类型，则其中至少一个必须具有 [ModelBinder] 属性。

因此，如果您的数据源是请求正文，那么您可以创建自定义 MediaTypeFormatter 而不是模型绑定器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-26T14:32:51.483

ModelBinder 似乎比 MediaTypeFormatter 更好用。您不需要在全球范围内注册它。

我找到了另一种使用模型绑定器在 Web API 中绑定复杂对象类型的替代方法。在模型绑定器中，我将请求正文作为字符串读取，然后使用 JSON.NET 将其反序列化为所需的对象类型。它也可用于映射复杂对象类型的数组。

我添加了一个模型活页夹，如下所示：

```
public class PollRequestModelBinder : IModelBinder
{
    public bool BindModel(HttpActionContext actionContext, ModelBindingContext bindingContext)
    {
        var body = actionContext.Request.Content.ReadAsStringAsync().Result;
        var pollRequest = JsonConvert.DeserializeObject<PollRequest>(body);
        bindingContext.Model = pollRequest;
        return true;
    }
} 
```

然后我在 Web API 控制器中使用它，如下所示：

```
 public async Task<PollResponse> Post(Guid instanceId, [ModelBinder(typeof(PollRequestModelBinder))]PollRequest request)
    {
       // api implementation  
    } 
```

# javascript - 为什么在 javascript 中使用 var { VariableName } = require('')？

> ID：14848309
> 
> 赞同：13
> 
> 时间：2013-02-13T07:14:38.087
> 
> 标签：javascript, firefox, coding-style, firefox-addon-sdk

我在 Firefox [addon-sdk](https://addons.mozilla.org/en-US/developers/docs/sdk/1.13/dev-guide/index.html)中看到了很多在声明变量时使用以下样式的示例。

```
var { Hotkey } = require("sdk/hotkeys"); 
```

它与`var { Hotkey }`using有什么区别`var HotKey`？为什么要使用额外的花括号？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T07:19:57.463

这是[解构赋值](https://developer.mozilla.org/en-US/docs/JavaScript/New_in_JavaScript/1.7#Destructuring_assignment_%28Merge_into_own_page.2Fsection%29)。

```
var {Hotkey} = require('sdk/hotkeys'); 
```

相当于：

```
var Hotkey = require('sdk/hotkeys').Hotkey; 
```

另见[和谐：解构](http://wiki.ecmascript.org/doku.php?id=harmony%3adestructuring)提案，其中包括以下示例：

```
// object destructuring
var { op: a, lhs: b, rhs: c } = getASTNode()

// digging deeper into an object
var { op: a, lhs: { op: b }, rhs: c } = getASTNode() 
```

# jqgrid - Jqgrid编辑弹出显示在具有空值的字段中

> ID：14848311
> 
> 赞同：1
> 
> 时间：2013-02-13T07:14:47.253
> 
> 标签：jqgrid, jqgrid-asp.net

我正在使用 jqgrid 进行列表和基本的 crud 操作。在其中一个页面上，表单上有许多可为空的字段。当添加实体时某些值留空时，它将这些字段保存在 db 中，并带有 null （这很好）。但是当在 jqgrid 编辑弹出窗口中编辑相同的字段时，这些字段的文本框包含 . 我怎么解决这个问题

下图是当我单击网格中的一行并选择编辑时出现的更新对话框

![在此处输入图像描述](../Images/294099f94570d9e5e0432b203ff3755f.png)

**更新 2**
我没有 jqgrid.editform.js 但 Oleg 提到的代码直接存在于 jquery.JQGrid.min.js 中。我删除了这些行，现在代码看起来像

```
switch(C[G].edittype)
{
    case "password":
    case "text":
    case "button":
    case "image":
    case "textarea":
        if(A=="&nbsp;"||A=="&#160;"||(A.length==1 && A.charCodeAt(0)==160)) {
            A = "";
            alert("here");
        }
        alert(A);
        a("#"+r,"#"+v).val(A);
        break;
    case "select": 
```

我已经放了两条警报消息来检查代码路径是否已执行，但在运行页面时我没有发现任何警报。这里可能有什么问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:22:00.953

我想您应该只使用相应的[editoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules#editoptions)选项来解决问题：

```
editoptions: {NullIfEmpty: true} 
```

**更新**：如果我现在正确理解您的问题，您可以使用`beforeSubmit`或`onclickSubmit`回调表单编辑来*修改*或删除`postdata`参数中的所有空值。例如，您可以使用`for-in`循环枚举`posdata`. 如果某些参数的值为空，您可以使用`delete`删除属性或`= null`将空字符串更改为`null`. 在这两种情况下，您都应该拥有`null`空编辑值的值。

**更新 2**：您使用的版本 3.6.5 真的**很旧**。幸运的是，我的存档中有 jqGrid 的版本。我希望您的问题的原因是旧版本代码中的错误。如果您使用 jqGrid 的非最小化版本，您可以打开`grid.formedit.js`文件并删除第 832-833 行：

```
$("#"+nm,"#"+fmid).val(tmp);
break; 
```

`case "image":`和之间`case "textarea":`。代码应该类似于当前版本的 jqGrid：请参见[此处](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.formedit.js#L575-L582)。要解决 jqGrid 的最小化版本中的问题，您应该搜索文本`case "button":case "image":`并删除`a("#"+r,"#"+v).val(A);break;`直接 after`case "button":case "image":`和 before的文本`case "textarea":`。

# javascript - 使用jquery在wiew端口中找到左上角第一个可见元素

> ID：14848320
> 
> 赞同：0
> 
> 时间：2013-02-13T07:15:38.443
> 
> 标签：javascript, jquery

我正在网页中显示电子书，并希望能够在文档中创建书签。为此，A 想在视口中找到第一个可见元素并将其用作书签。使用 jquery 或纯 javascript 实现此目的的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:19:55.533

有一个 jQuery 插件[Viewport Selectors for jQuery](http://www.appelsiini.net/projects/viewport)。它可能正是你想要的。

# codeigniter - 试图从 codeigniter 中的 URL 中删除 index.php

> ID：14848325
> 
> 赞同：1
> 
> 时间：2013-02-13T07:15:59.303
> 
> 标签：codeigniter

我正在尝试从 URL 中删除“index.php”。我试过制作

```
$config['uri_protocol'] = 'AUTO'; 
```

作为

```
$config['uri_protocol'] = 'REQUEST_URI'; 
```

和

```
$config['index_page'] = 'index.php'; 
```

作为

```
$config['index_page'] = ''; 
```

甚至尝试过推杆

```
RewriteEngine on
RewriteCond $1 !^(index\.php|[Javascript / CSS / Image root Folder name(s)]|robots\.txt)
RewriteRule ^(.*)$ /project/index.php/$1 [L] 
```

在 .htaccess 文件中，但它对我不起作用。谁能告诉我哪里出错了？提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:25:36.227

鉴于你告诉我你正在使用 Ubuntu ......

1.  使用 Ayman 提供的 .htaccess 配置。
2.  打开终端并键入`sudo a2enmod rewrite`以`mod_rewrite`在您的机器上启用。
3.  打开 000-default`sudo nano /etc/apache2/sites-enabled/000-default`并将第一次出现的更改`AllowOverride None`为`AllowOverride All`

然后用 重启 apache `sudo service apache2 restart`。

也可以使用：`$config['index_page'] = '';`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:02:52.613

删除 index.php 有 3 个步骤

1.在 application/config.php 文件中进行以下更改

```
$config['base_url'] = 'http://'.$_SERVER['SERVER_NAME'].'/Your Ci folder_name';
$config['index_page'] = '';
$config['uri_protocol'] = 'AUTO'; 
```

2.使用以下代码在根目录中制作 .htacces 文件

```
RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

3.启用重写模式

一世。首先，使用以下命令启动它：

**a2enmod 重写**

ii. 编辑文件 /etc/apache2/sites-enabled/000-default

将**AllowOverride None**更改为**AllowOverride All**。

iii. 使用以下命令重新启动服务器：

**须藤 /etc/init.d/apache2 重启**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:22:16.070

这是`.htaccess`我经常使用的文件。为我工作：

```
<IfModule mod_rewrite.c>
  DirectoryIndex index.php
  RewriteEngine on
  RewriteCond $1 !^(index\.php|images|css|js|robots\.txt|favicon\.ico)
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteBase /project/
  RewriteRule ^(.*)$ ./index.php/$1 [L,QSA]
</IfModule> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T08:34:33.180

得到了答案，我刚刚在我的 .htaccess 文件中插入了以下代码：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

并制作 `$config['index_page'] = '';`

在`config.php`

来源：[从 URL 中删除“index.php” - Codeigniter](https://stackoverflow.com/questions/6809373/remove-index-php-from-url-codeignite) ‌​r

回答者：@Akhilraj NS

# html - 空段落标签 - 我是否应该允许在 HTML 编辑器中使用？

> ID：14848326
> 
> 赞同：21
> 
> 时间：2013-02-13T07:16:07.227
> 
> 标签：html, blank-line

我正在使用 CKEditor 4，它似乎有一个默认设置，`<p></p>`用于指示空行。到目前为止，我一直在 HTML 中看到由`<p>&nbsp;</p>`- 表示的空行。不是空标签。

所以CKEditor的默认输出代表一个空行，例如：

```
<p>paragraph before blank line</p>
<p></p>
<p>paragraph after blank line</p> 
```

问题是，为了改变，IE7、8、9 似乎将此“正确”呈现为空白行，而 Firefox 和 Chrome 则没有——它们似乎在布局方面忽略了空`<p>`和`<div>`标签。

因此，目前，我必须告诉 CKEditor 包含`&nbsp;`在空行中（由于某种原因不是其默认设置），并在后端替换任何`<p>`可能漏掉的空标签。

我的问题是，在 HTML 中表示空行的黄金标准是什么？好旧的`<p>&nbsp;</p>`，还是别的什么？

另外，鉴于 CKEditor 的默认设置是`<p>`空白行的空标记，Chrome 和 Firefox 是否错误地忽略它们？或者 IE 将它们呈现为空行是错误的，CKEditor 的默认值真的应该是使用`<p>&nbsp;</p>`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-13T09:19:54.270

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T07:36:34.067

我会说 IE 有这个错误，空段落对我来说毫无意义。

来自 w3.org：

我们不鼓励作者使用空的 P 元素。用户代理应该忽略空的 P 元素。

我建议当您的用户创建空白行时，您将他们的文本包装在段落中。

所以而不是：

```
before line break<p>&nbsp;</p>after line break 
```

你应该生成

```
<p>before line break</p><p>after line break</p> 
```

说得通？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-16T18:50:19.120

当使用符合标准的 HTML 和 CSS 编码进行编码时，网站文本内容的关键因素将放置在正常的段落标签中。这写为`<p>`。为了在编写段落文本时使 SEO 友好的段落文本，需要查看前一个子标题，然后创建解释和扩展此标题文本的网页内容。是的，您必须在 HTML 编辑器中使用空段落标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T08:11:15.123

我认为导航器呈现空的 SEO 对 SEO 不利`<p>`。在将其保存到 ddbb 之前，我将其替换为 js 或 php :)

# c# - 使用推送通知更新 Web 应用程序

> ID：14848328
> 
> 赞同：2
> 
> 时间：2013-02-13T07:16:11.267
> 
> 标签：c#, asp.net, push-notification, duplex, wcf-callbacks

我正在 asp.net 3.5 中开发一个 Web 应用程序。现在我用 WCF 做推送通知。我已经成功开发了带有回调的 WCF。现在我的问题出现了，因为页面生命周期已经结束，所以我无法更新 Web 应用程序。所以请告诉我如何更新网络应用程序。

如需进一步参考，请检查此链接 [Display Messages after getting response from WCF](https://stackoverflow.com/questions/14806759/display-messages-after-getting-response-from-wcf)

如果不可能，那么我应该采取什么方法。我不想使用轮询，因为我们除了大约 800-1000 个用户在线。所以我们很关心性能，因为我们只有一个服务器。所以请告诉我一个好的解决方案，我现在也想知道谷歌、雅虎如何推送通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:24:08.893

看看[SignalR](http://signalr.net/)库。它应该让您朝着正确的方向开始。

但是，如果您确实想自己做，在 asp.net 中构建它的最有效方法是使用[IHttpAsyncHandler](http://msdn.microsoft.com/en-us/library/system.web.ihttpasynchandler.aspx)和 ajax 请求。

这是一个[完整的工作项目，它](http://www.codeproject.com/Articles/42734/Using-IHttpAsyncHandler-and-XMLHttpRequest-to-push)与 ajax 一起实现了这个。

# javascript - 使用输入类型文本以表单形式上传图像

> ID：14848329
> 
> 赞同：0
> 
> 时间：2013-02-13T07:16:25.940
> 
> 标签：javascript, html, ruby-on-rails, image

我是网页设计的新手。我正在制作一个关于 ruby​​ on rails 的项目。我想要一个特定列表的表单，我可以在其中上传该列表的图像。图像在另一个表中。现在一种方法是我可以使用文件上传但是当我编辑任何列表时，它将显示文件字段为空。所以，我正在考虑使用输入类型文本并关联浏览按钮和 javascript 来上传图像。此外，我还想要 javacsript 函数来添加新图像、编辑图像（特定）或删除图像（特别）。所以，正如你所看到的那样，它会给大脑带来痛苦。请解释一下容易做的事情并逐步明智。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:20:34.543

那是rails casts对你有帮助

[http://railscasts.com/episodes/134-paperclip](http://railscasts.com/episodes/134-paperclip)

[http://railscasts.com/episodes/253-carrierwave-file-uploads](http://railscasts.com/episodes/253-carrierwave-file-uploads)

[http://railscasts.com/episodes/381-jquery-file-upload](http://railscasts.com/episodes/381-jquery-file-upload)（专业演员）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:26:30.890

文本字段无法按照您描述的方式模仿输入类型文件。

您可能还想看看这篇关于使用 HTML、rails 和回形针上传图像的帖子 [How to POST files from HTML5 Drag-Drop to a Rails 3 App & Paperclip？](https://stackoverflow.com/questions/3764966/how-to-post-files-from-html5-drag-drop-to-a-rails-3-app-paperclip)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:49:53.627

令人敬畏的文件附件 ruby​​ gem`Paperclip`将为您做到这一点。

如果您不熟悉这些，我强烈建议您观看 Railscasts 的这两个截屏视频：

1) [http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

2) [http://railscasts.com/episodes/134-paperclip](http://railscasts.com/episodes/134-paperclip)

**图片删除**

[使用回形针删除图像](https://stackoverflow.com/questions/5343937/delete-an-image-with-paperclip)

**图片上传**

表单添加将用于上传图像的实际表单字段，使用`fields_for`. 还要编辑 form_for 调用并将表单标记为多部分，以便它可以接受文件上传。

```
<% form_for @user, :html => {:multipart => true} do |f| %>

…

<% f.fields_for :user_images do |builder| %>

<% if builder.object.new_record? %>

<%= builder.label :caption, "Image Caption" %>
<%= builder.text_field :caption %>

<%= builder.label :photo, "Image File" %>
<%= builder.file_field :photo %>

<% end %>

<% end %> 
```

# youtube-api - 如何使用 YouTube API 获取视频的字幕

> ID：14848333
> 
> 赞同：5
> 
> 时间：2013-02-13T07:16:43.763
> 
> 标签：youtube-api

是否可以从 YouTube API 检索（获取）YouTube 视频（不归用户所有）的字幕？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T15:42:23.413

*   在 v2 中，您只能访问视频字幕。

*   在 v3 中，尚不支持字幕，但很快就会支持。

这是服务条款问题，不提供这些字幕。

# cuda - 调用 cublasSgemm/clAmdBlasSgemm 例程时如何在 GPU 上映射线程/块？

> ID：14848334
> 
> 赞同：1
> 
> 时间：2013-02-13T07:16:55.517
> 
> 标签：cuda, opencl, gpgpu, blas, cublas

我有兴趣了解在计算矩阵乘法（C = A * B）时如何在 GPU 上映射`cublasSgemm`/例程。`clAmdBlasSgemm`

假设输入矩阵的维度 ::A_rows = 6144; A_cols = 12288; B_rows = 12288; B_cols = 15360;

和结果矩阵的维度 :: C_rows = 6144; C_cols = 15360;

假设我已经在主机上初始化了输入矩阵，并且我将矩阵数据复制到了设备内存中。之后，我调用以下程序`cuBlas`或`clAmdBlas`例程在 GPU 上进行矩阵乘法。

```
void cublasSgemm (char transa, char transb, int m, int n, int k, float alpha, const float *A, int lda, const float *B, int ldb, float beta, float *C, int ldc); 
```

其中 m = A_rows；和 n = B_cols;

所以我的疑问是：
1.）这些例程是如何在 GPU 上实现的？
2.) m 和 n 值是否映射在一个计算单元 (SM) 上？如果否，那么 m 和 n 的最大值是多少？
3.) 我们是否可以控制线程/块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:46:34.970

对于主机端 CUBLAS API（请注意，我不知道为什么您会假设 clAmdBlasSgemm 相同），您的问题的简短回答如下：

1.  现代 CUBLAS 是封闭源代码。有像[Magma](http://icl.cs.utk.edu/magma/index.html)这样的代码库，你至少可以了解一下 CUBLAS是*如何*实现的。您还可以在 NVIDIA 提供的分析器之一中运行 CUBLAS 代码，以查看它在 GPU 上的作用。但关键是你不需要知道它是如何工作的。有一个 API 和一些非常详尽的文档。这就是你需要知道的。
2.  您的示例问题需要大约 1.2Gb 的内存。如果您有一个具有这么多内存的 GPU，并且有足够的计算能力来避免[显示驱动程序看门狗计时器](https://stackoverflow.com/q/6913206/681865)，或者有一个计算专用的 GPU，它就会工作。内存和显示驱动程序时间限制（如果适用）是唯一的限制。
3.  不。

请注意，还有一个用于 K20 Kepler 设备的 CUBLAS 设备 API，我上面提供的答案不适用于该库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-12T18:21:08.417

在继续之前，您必须阅读 Volkov 和 Demmel 的论文，看看这里：[http](http://www.cs.berkeley.edu/~volkov/) ://www.cs.berkeley.edu/~volkov/查看他关于 SGEMM 的文章。自 2008 年以来，答案就在那里。

# ruby-on-rails - 在 Ruby 中，“作用域”是什么意思？

> ID：14848345
> 
> 赞同：2
> 
> 时间：2013-02-13T07:18:05.230
> 
> 标签：ruby-on-rails, ruby, scope, rails-activerecord

我遇到过这段代码：

```
def self.search(search)
    if search
      where(['title LIKE ? OR description LIKE ? ', "%#{search}%", "%#{search}%"])  
    else
      scoped
    end
  end 
```

“范围”语句指的是什么？谷歌很难做到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T07:18:05.230

我认为上述代码段的本质是：“如果提供了搜索参数，则创建一个限制返回记录的 ActiveRecord 查询。否则，返回一个空白查询。” 所以“作用域”是一个（名字很奇怪的）对象，它代表一个可以在最终执行之前进一步细化的查询。

[http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

# linked-list - 树遍历，从树的预排序生成一个链表并为其编写测试用例

> ID：14848347
> 
> 赞同：2
> 
> 时间：2013-02-13T07:18:11.977
> 
> 标签：linked-list, automated-tests, binary-tree

我正在寻找以下问题的最佳解决方案。

给定一棵二叉树，我们需要使用前序遍历从树中生成一个链表。还要写一个测试用例来检查它是否正确。

如果您可以提供特定于生成链表和测试的解决方案。此外，该解决方案可以实现的最佳复杂性是什么。

我尝试过这样的事情：

```
public void TraversePreOrder(TreeNode node, LinkedListNode head){

    if(node != null) return;

    //Insert current node into linkedList 
    head = insertNodeIntoLinkedList(head, node.data);
    PreOrder(node.left, head);
    PreOrder(node.right, head);
}

public LinkedListNode insertNodeIntoLinkedList(LinkedListNode head, int data){

    LinkedListNode newNode = new LinkedListNode(data);
    if(head == null) {
        head = newNode;
        return head;
    }

    Node currentNode = head;
    while(currentNode.next != null){
        currentNode = currentNode.next;
    }

    currentNode.next = newNode;
    return head;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T14:11:02.887

通常以任何遍历顺序，我们从屏幕上遇到的节点打印数据。但是，您可以轻松地将打印功能替换为插入功能。

创建一个链表和一个函数来在你的链表中插入数据。然后创建你的树，从用户那里输入数据（如果这是你想要的），然后创建一个用于预订遍历的函数，而不是在屏幕上打印日期，你可以将它添加到你的链接列表中。

# javascript - jquery 将元素转换为 xpath 查询

> ID：14848349
> 
> 赞同：1
> 
> 时间：2013-02-13T07:18:12.230
> 
> 标签：javascript, jquery, xpath

我有一个要用作书签的 html 元素，但我无法修改 html 文档。我想将此元素存储在其他地方并将其保留为 Xpath 查询。

有没有办法将 html 元素转换为指向它的 xpath 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:30:08.500

这是一个来自类似问题的[方法来接收这样的 DOM-Path：](https://stackoverflow.com/a/5178132/1846918)

```
function createXPathFromElement(elm) { 
    var allNodes = document.getElementsByTagName('*'); 
    for (segs = []; elm && elm.nodeType == 1; elm = elm.parentNode) 
    { 
        if (elm.hasAttribute('id')) { 
                var uniqueIdCount = 0; 
                for (var n=0;n < allNodes.length;n++) { 
                    if (allNodes[n].hasAttribute('id') && allNodes[n].id == elm.id) uniqueIdCount++; 
                    if (uniqueIdCount > 1) break; 
                }; 
                if ( uniqueIdCount == 1) { 
                    segs.unshift('id("' + elm.getAttribute('id') + '")'); 
                    return segs.join('/'); 
                } else { 
                    segs.unshift(elm.localName.toLowerCase() + '[@id="' + elm.getAttribute('id') + '"]'); 
                } 
        } else if (elm.hasAttribute('class')) { 
            segs.unshift(elm.localName.toLowerCase() + '[@class="' + elm.getAttribute('class') + '"]'); 
        } else { 
            for (i = 1, sib = elm.previousSibling; sib; sib = sib.previousSibling) { 
                if (sib.localName == elm.localName)  i++; }; 
                segs.unshift(elm.localName.toLowerCase() + '[' + i + ']'); 
        }; 
    }; 
    return segs.length ? '/' + segs.join('/') : null; 
}; 
```

还有一个用于测试的[小提琴](http://jsfiddle.net/axelmichel/4DyhX/)（路径显示在控制台中）。

# wpf - Visual Studio 插件 - 窗口孩子无法获得焦点

> ID：14848352
> 
> 赞同：0
> 
> 时间：2013-02-13T07:18:46.770
> 
> 标签：wpf, visual-studio-2010, sdk

我有一些用于 VS2010 的插件，它显示带有许多面板的窗口。我正在使用 Avalon 对接管理器来处理所有面板操作。

我的问题是我的窗口中的所有项目（列表框或项目控件）都无法获得焦点，即使我直接单击它们也是如此。当我尝试使用鼠标滚轮滚动窗口中的滚动视图时，就会出现此问题。

只想提一下，当我在独立应用程序（而不是 VS2010 插件）中使用我的窗口时，一切正常。

任何想法？这是阿瓦隆的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:21:14.770

这似乎是阿瓦隆的错误。更新到最新版本可以解决问题。

# javascript - 来自浏览器控制台的循环 javascript 攻击？

> ID：14848356
> 
> 赞同：0
> 
> 时间：2013-02-13T07:19:04.003
> 
> 标签：javascript, ajax, console

我正在开发一个类似 Facemash 的评级系统。最近我决定从简单的投票链接（`href=vote.php?v=left`或[存储在其中的](https://stackoverflow.com/questions/10932504/prevent-facemash-cheating-through-url/13873444#13873444)`right`）`id`切换到 AJAX。然后我意识到它非常容易受到攻击。在浏览器控制台中，作弊者可以调用一个无限循环来检查图片 url，然后，如果它与某个指定的 url 匹配，则为它投票，如果不匹配，则只为or投票。除了显然根本不实施ajax投票之外，还有什么办法可以防止这种情况发生？也许有一些命令可以打破控制台中的循环之类的？ `$_SESSION``left``right`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T07:21:04.667

这只是一般原则的一个具体示例：*您不能信任从客户端发送到服务器的任何内容*。您必须在服务器端实施检查以限制速率（或仅限制）、验证等，因为人们可以向您发送他们喜欢的任何信息（他们甚至不必使用 Web 浏览器来执行此操作）。

在这种情况下，如果您让人们对事物进行投票，您必须限制个人可以对特定项目投票的次数（并且可能会限制他们投票的频率，期限）。

# ios - 自定义透明UITabBar

> ID：14848361
> 
> 赞同：2
> 
> 时间：2013-02-13T07:19:27.993
> 
> 标签：ios, objective-c, cocoa-touch, uikit, uitabbar

我正在尝试创建一个标签栏透明（或看起来透明）的应用程序。为此，我在视图中使用图像的一部分。并将剩余部分设置为标签栏的背景。问题是标签栏出现较暗的阴影。我现在没有主意了。下面是屏幕截图

![在此处输入图像描述](../Images/277794f30a28b0d61286341543e687b8.png)

```
UIImageView *imgView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"tabbar_bg.png"]];
self.tabBar.backgroundColor=[UIColor whiteColor];
[self.tabBar insertSubview:imgView atIndex:1];
//    [self.tabBar setSelectionIndicatorImage:[UIImage imageNamed:@"transp.png"]];
//    [self.tabBar setSelectedImageTintColor:[UIColor clearColor]];
[[UITabBar appearance] setTintColor:[UIColor clearColor]];
[[UITabBar appearance] setSelectedImageTintColor:[UIColor clearColor]];
[[UITabBar appearance] setSelectionIndicatorImage:[UIImage imageNamed:@"transp.png"]]; 
```

`viewDidLoad`以上是我在自定义`UITabBarController`类中尝试过的代码。“tabbar_bg.png”是用作标签栏背景的图像，“transp.png”是用作 selectionIndicator 图像的透明图像。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-08T11:39:25.147

尝试

```
[self.tabBar setBackgroundImage:[UIImage new]]; 
```

这个技巧也适用于`UINavigationBar`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T00:03:39.753

您是否尝试过创建它的子类？

```
@implementation TabBarInvisible
-(id)init
{
    self = [super init];
    if (self)
    {
        self.opaque = NO;
        self.backgroundColor = [UIColor clearColor];
        self.backgroundImage = nil;
    }
    return self;
}
-(void)drawRect:(CGRect)rect
{

}

@end 
```

# perl - 带有附加配置文件的 perlcritic

> ID：14848364
> 
> 赞同：3
> 
> 时间：2013-02-13T07:19:41.213
> 
> 标签：perl, perl-critic

是否可以将另一个配置文件“添加”到 perlcritic 默认配置文件，或者使用多个配置文件运行 perlcritic？我不想跳过/替换默认配置文件。我需要向它添加一个额外的配置文件。

[我知道](https://stackoverflow.com/questions/51499/are-there-any-good-automated-frameworks-for-applying-coding-standards-in-perl)我可以导出当前配置文件并附加我的添加，然后将其用作默认配置文件。但在这种情况下，我应该确保在每次 perlcritic 更新后我都会做同样的事情，因为默认配置文件可能已经更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:35:16.730

您`.perlcriticrc`修改默认配置文件，而不是替换它。有`--only`命令行选项，告诉它只使用你列出的策略`.perlcriticrc`，并跳过默认配置文件。您也可以在您的`.perlcriticrc`,中指定此`only = 1`文件的第一个命名部分。如果您未`--only`在命令行或`only = 1`您的 中指定`.perltidyrc`，您`.perltidyrc`将修改默认配置文件，而不是将其丢弃并替换它。

有关详细信息，请参阅[perlcritic POD](http://search.cpan.org/~thaljef/Perl-Critic-1.118/bin/perlcritic)。

# combobox - zk：表单组合框在添加新对象的事件上不为空

> ID：14848369
> 
> 赞同：0
> 
> 时间：2013-02-13T07:19:58.537
> 
> 标签：combobox, zk, zul

我正在使用 zk 框架 mvvm 方法来添加、编辑对象。当我第一次单击添加按钮时，打开表单为空并且运行顺利。从列表中编辑记录后，我得到了预先选择的组合框值，并且不能选择已经选择的值，否则，我得到 null 并且我无法提交表单。这意味着我不能再次为成功的 crud 操作选择选定的值。我对每种情况的编辑功能都工作正常，没有问题，所有文本框和 intbox 都正常工作

我正在关注这篇文章 [http://books.zkoss.org/wiki/Small_Talks/2012/February/MVVM_in_ZK6:_Form_Binding](http://books.zkoss.org/wiki/Small_Talks/2012/February/MVVM_in_ZK6:_Form_Binding)

我有三个对象，newObject、selectedObject 和 editObject

我来自 zul 文件的表单片段

```
 <grid sizedByContent="true"
                                        form="@id('ds') 
                                              @load(vmc.newObject, after='addInvoke') @save(vmc.newObject, before='add') 
                                              @load(vmc.editObject, after='editInvoke') @save(vmc.editObject, before='edit')
                                              @validator('com.example.MyValidator')"
                                               >

<combobox model="@load(ds.unitList)" 
                                                    selectedItem="@bind(ds.abc.unit)" readonly="true" maxlength="50"/> 
```

我从 SampleViewModel 编辑和添加函数的方法片段如下

```
 @Command("edit")
    @NotifyChange({ "objectList", "selectedObject", "editObject" })
    @Override
    public void edit() {
        service.editKpi(editObject);
        editObject = null;
    }

@Command("addInvoke")
@NotifyChange("newObject")
@Override
public void onClickAddButton(){

    enableEditMode(false);
    isNewMode = true;

    newObject = new AbcDTO();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T04:24:42.360

我自己修好了。

解决方案也是组合框中的使用价值以及选定项

# symfony - Symfony2：如何在表单中使用“ckeditor”？

> ID：14848371
> 
> 赞同：0
> 
> 时间：2013-02-13T07:20:15.147
> 
> 标签：symfony, ckeditor, bundle

我安装了 TRsteelCkeditorBundle，当我在视图中手动构建表单时，它可以工作。

```
 <form method="post">
        <p>
            My Editor:<br>
            <textarea name="editor1">&lt;p&gt;Initial value.&lt;/p&gt;</textarea>
            <script>
                CKEDITOR.replace( 'editor1' );
            </script>
        </p>
        <p>
            <input type="submit">
        </p>
    </form> 
```

但是当我尝试使用 Symfony2 表单时，我得到了这个错误：

```
An exception has been thrown during the rendering of a template 
("Route "route_name" does not exist.") in 
lbTestBundle:Default:index.html.twig at line 8 
```

我的代码：在 Twig 模板中 {{ form_widget(form) }} Ligne 8 是 form_widget

在控制器中：

```
 public function indexAction()
  {
  $formBuilder = $this->createFormBuilder();

  $formBuilder
    ->add('date',        'date')
    ->add('title',       'text')
    ->add('content',     'ckeditor')
    ->add('author',      'text');

  $form = $formBuilder->getForm();
  $view['form'] = $form -> CreateView();

  return $this->render('lbTestBundle:Default:index.html.twig', $view);
  } 
```

我一步一步地按照他 github 页面中 Read_me.txt 的指示进行操作，并尝试在其他地方找到答案，但一无所获。如果有人可以帮助我解决这个问题，我仍然是 SF2 的初学者。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:44:40.330

这里同样的问题。今天花一整天的时间研究。最后，通过用 IvoryCKEditor 包替换 TRsteelCkeditor 包来修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:07:58.930

什么在`lbTestBundle:Default:index.html.twig at line 8`？

显然`route_name`，您的模板中有一条路由，该路由未在您的 routing.yml 文件中定义。

这就是错误消息的全部内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T22:56:14.130

在注释中添加该行

```
#route: route_name 
```

在 config.yml 中解决问题，这一行是我认为在服务器上上传图片的，见这个链接： [http://docs.cksource.com/CKEditor_3.x/Developers_Guide/File_Browser_(Uploader)](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/File_Browser_(Uploader))

但是现在我在语言方面遇到了一些问题，我想把它放在法语中，目前皮肤似乎依赖于语言，就像悬停在按钮上一样。

此外，如果您想配置它，您可以在 config.yml 或 /web/bundle 存储库中的 config.js 中进行配置（如果您已经安装了资产）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T21:57:22.833

我找到了错误的来源。route_name 来自

```
 #config.yml for TrsteelCkeditor
  filebrowser_image_browse_url:
      route: route_name
      route_parameters:
          type: image 
```

我想当你想在编辑器中上传图像时，我必须把编辑器去的路线放在哪里。我将继续测试这个 budle，直到我得到一些好的结果，我会给出结果

# c++ - 如何在不使用继承的情况下转换用户定义类的指针

> ID：14848381
> 
> 赞同：0
> 
> 时间：2013-02-13T07:21:14.083
> 
> 标签：c++, pointers, inheritance, casting

我有两个用户定义的类：

```
class A:class Base
{
type x;
doSomething();
}

class B
{
type x;
doSomething();
} 
```

我还有一个函数，它获取一个 Base 类型的变量并用于`dynamic_cast`将其转换为 A 类型并使用 doSomething()。

```
class D : class Base2
{
    D(Base _base1):Base2(Base _base1)
    {
         //here is the actual problem
    }
    void foo()
    {
       //b is a private member of class Base2 of type Base
       A *a=dynamic_cast(b);
       A->doSomething();
    }
} 
```

但我想将 B 传递给这个函数，同时我不希望 B 从 Base 继承。

ps 我无权更改 Base

这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T07:23:47.547

在不安全的不相关类之间进行转换。实现我认为您正在尝试做的最安全的方法是使用函数模板：

```
template <typename T>
void foo(const T& b)
{
   b.doSomething();
} 
```

# gmail - 使用 Google Apps 脚本的 Gmail 短信通知：如何显示电子邮件的内容？

> ID：14848383
> 
> 赞同：6
> 
> 时间：2013-02-13T07:21:24.267
> 
> 标签：gmail, google-apps-script, google-calendar-api

每次收到符合特定标准的电子邮件时，我都在处理 SMS 通知；我决定为此使用 Google App Scripts。

我特别受到以下文章 [https://developers.google.com/apps-script/articles/gmail_filter_sms](https://developers.google.com/apps-script/articles/gmail_filter_sms)的启发。我还检查了 StackOverflow [SMS Alerts for Important Mails in Gmail](https://stackoverflow.com/questions/12060620/sms-alerts-for-important-mails-in-gmail)中的相关问题。

我通过在下次运行脚本时清理事件来改进来自 developers.google.com 的原始脚本（每次运行脚本时我都会收到 SMS 警报）。该脚本当前正在使用标签“SendText”并在日历“AlertSMS”中创建事件。

但是，我收到的 SMS 仅包含电子邮件的主题和作者：我**需要显示电子邮件的内容**（或至少部分内容）。我尝试将其添加到事件的描述中，但没有成功。有人知道怎么做吗？

下面是我的脚本代码：

```
function sendText() {
  var now = new Date().getTime();

  // Delete old events
  var events = CalendarApp.openByName('AlertSMS').getEvents(new Date('January 1, 2010 EST'), new Date(now-30000));
  for (i in events) {
    events[i].deleteEvent();
  }  

  // Get list of emails to set alert for
  var label = GmailApp.getUserLabelByName('SendText');
  var threads = label.getThreads();

  // Create new events for emails alert
  for(i in threads){
    var message=threads[i].getMessages()[0];
    CalendarApp.openByName('AlertSMS').createEvent('[SMS] '+threads[i].getFirstMessageSubject()+' -from- '+message.getFrom(),
      new Date(now+60000), new Date(now+60000), { description:message.getBody() }).addSmsReminder(0);
  }
  label.removeFromThreads(threads);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T15:35:49.320

您可以使用（完全免费的）[IFTTT](http://ifttt.com)或（有点免费的）[Zapier](https://zapier.com)等服务在收到符合条件的电子邮件时触发 SMS 操作。

[以下](https://ifttt.com/connect/gmail/sms)是一些将 GMail 连接到 SMS 的 IFTTT “食谱”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T14:27:02.230

你真的不需要日历黑客来向自己发送任意文本消息 - 每个移动提供商都有一个电子邮件到文本网关。例如，对于 verizon，它的 5551234567@vtext.com（替换您的电话号码），其他运营商也存在类似的情况。只需使用 GmailApp 通过电子邮件发送这些号码，您就可以发送任何您想要的内容。

# bash - 如何在变量中使用变量？

> ID：14848384
> 
> 赞同：3
> 
> 时间：2013-02-13T07:21:26.740
> 
> 标签：bash, shell, variables, ubuntu

我正在 ubuntu 专用服务器上编辑/扩展我的防火墙 bash 脚本。

下面的代码只是一个摘录。下面的目的是为某些 IP 重新路由/打开我的（http、ftp、telnet 和 ssh）端口，用于/到 3 个盒子。

问题是我想在变量中使用变量。so`--dport ${i}_${j}_port_ext`被 fi 正确替换，`--dport box0_http_port_ext`但不被视为变量（当然）。实际上，我想要`--dport $box0_http_port_ext`的应该是（注意`$`开头）

我尝试了几件事 fi `--dport ${${i}_${j}_port_ext}`or`--dport $(${i}_${j}_port_ext)`但这并不好。

```
box0_http_port_ext="8080"
box0_ftp_port_ext="21"
box0_telnet_port_ext="23"
box0_ssh_port_ext="22"
#
allow_box0_http_port_ip="1.2.3.4 99.98.97.96 55.56.57.58"
allow_box0_ftp_port_ip="1.2.3.4 55.56.57.58"
allow_box0_telnet_port_ip="55.56.57.58"
allow_box0_ssh_port_ip="1.2.3.4"
#
for i in box0 box1 box2
do
  for j in http ftp telnet ssh
  do   
    for ips in $allow_${i}_${j}_port_ip
    do
      $IPTABLES -t nat -A PREROUTING -p tcp -i $LAN_IFACE -s $ips --dport ${i}_${j}_port_ext -j DNAT --to-destination ${i}_ip:${i}_${j}_port_int
    done
  done
done 
```

请不要看代码，因为它是摘录，因此不完整。
问题是：如何`--dport $box0_http_port_ext`使用`$i`for *box0*和`$j`for *http*进行编码。请记住，`$i`也可以是*box1/box2*，`$j`也可以替换为*ftp/telnet/ssh*。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T08:05:47.817

您可以使用***间接变量引用***来做到这一点（参见[http://tldp.org/LDP/abs/html/bashver2.html#EX78](http://tldp.org/LDP/abs/html/bashver2.html#EX78)）

这在*Bash 版本 2*及更高版本中可用`!`，在`${ }`.

```
name=${i}_${j}_port_ext
echo ${!name} 
```

***工作示例：***

```
#!/bin/bash
i=box0
j=http

box0_http_port_ext="hello1"
box2_telnet_port_ext="hello2"

name=${i}_${j}_port_ext
echo "varname: $name   value: ${!name}"

i="box2"
j="telnet"
name="${i}_${j}_port_ext"
echo "varname: $name   value: ${!name}" 
```

***输出***：

```
varname: box0_http_port_ext   value: hello1
varname: box2_telnet_port_ext   value: hello2 
```

在上面的示例`$name`中返回 sting `box0_http_port_ext`，它是初始变量的名称。这相当于 ${name}。运算符将`!`其右侧的字符串计算为变量名，并返回存储在变量中的值。所以返回的`${!name}`值为。`${box0_http_port_ext}``hello1`

不幸的是 bash 不支持多维数组，但可以使用这个技巧。

*与其他答案的不同之处在于`$i_$j_port_ext`更改为，`${i}_${j}_port_ext`以便 bash 知道变量名称的结束位置。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T07:35:55.237

尝试这个：

```
varname=${i}_${j}_port_ext
... --dport ${!varname} ... 
```

注意！在 - 的里面`${}`

已编辑：@user000001 关于分隔 i/j 变量名称的要点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:51:57.627

谢谢你帮了我很多。

顺便说一句，我确实注意到了 fi $name 和 {!name} 之间的区别。$name 给出了变量的名称，其中 ${!name} 给出了变量的内容。这是唯一的解释吗？

关于对我的问题的（好）评论，上面提到的摘录，这对我有用：

```
for i in box0 box1 box2
do
  for j in http ftp telnet ssh
  do
    ALLOWED_IPS=allow_${i}_${j}_port_ip
    for ips in ${!ALLOWED_IPS}; do
    do
      PORT_EXT=${i}_${j}_port_ext; PORT_INT=${i}_${j}_port_int; IP=${i}_ip
      $IPTABLES -t nat -A PREROUTING -p tcp -i $LAN_IFACE -s $ips --dport ${!PORT_EXT} -j DNAT --to-destination ${!IP}:${!PORT_INT}
    done
  done
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T07:33:51.033

请尝试转义`_`脚本中的字符

```
--dport $i\_$j\_port\_ext 
```

# c# - EF CodeFirst：参数@objname 不明确或声明的@objtype (COLUMN) 错误

> ID：14848385
> 
> 赞同：59
> 
> 时间：2013-02-13T07:21:28.763
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-migrations

我有一个名为的表`EducationTypes`和一个名为 的实体`EducationType`，我重命名了一个实体属性，现在我经常得到`Either the parameter @objname is ambiguous or the claimed @objtype (COLUMN) is wrong`. 我该如何解决这个问题？

生成的 SQL 脚本：

```
EXECUTE sp_rename @objname = N'dbo.EducationTypes.nvarchar', @newname = N'EducationTypeTitle', @objtype = N'COLUMN' 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-10-13T18:45:38.020

如果您使用 Code First 并且拥有（一个）现有的迁移脚本并试图覆盖已被删除的更改（即重命名列），那么您将获得该错误输出。最简单的方法是删除迁移脚本，通过 NuGet 添加-迁移，然后更新数据库。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-02-16T17:26:08.293

这是因为当自动创建表和 ... 时**，类（模型）名称与其他保留或生成的名称冲突。**

考虑到 EF Code First 创建干预表以使用派生干预表的表名关联 2 个或多个表，因此当您使用使用类似于干预表的名称的类名时，我们会得到这样的模棱两可的错误。

例如，如果您有一个具有*Answer导航属性的**Question*类，则内部模型元数据将包含一个名为*QUESTION_ANSWER的引用*

 ***要解决这个问题*，请尝试更改类名（用于生成表）并确保它们的唯一性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-19T12:08:32.383

当我尝试使用 Sql(" ... ") 方法在我的迁移脚本中重命名外键时，我在 Entity Framework 6 中得到了这个。我的解决方法是在名称周围使用方括号：

即改变这个：

```
sp_rename 'FK_dbo.tablename_dbo.othertablename_fieldname', 'FK_dbo.tablename_dbo.othertablenewname_fieldnewname', 'object' 
```

...对此：

```
sp_rename '[FK_dbo.tablename_dbo.othertablename_fieldname]', 'FK_dbo.tablename_dbo.othertablenewname_fieldnewname', 'object' 
```

SQL Server 然后能够找到外键。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-12T05:27:23.720

只是花了太多时间试图弄清楚为什么在我只能通过 mylittlesql 访问的生产数据库上发生这种情况。无法重现该问题，但从 sp_rename 的位中制作了此脚本，因此下次确实发生时，我可以确切地找出原因。是的有点矫枉过正，但可能会帮助其他人。

如果您以某种方式设法将 '[' 或 ']' 放入存储在 sys.columns 中的实际列名中，则会出现问题（？'nvarchar' 作为您的列名？？？？）。PARSENAME 无法处理 [] 并返回 null，因此 sp_rename 将不起作用。

这只会帮助诊断错误代码为 15248 的“列”案例的问题，这是我一直遇到此问题的地方：

```
declare @objname nvarchar(1035) = N'dbo.EducationTypes.nvarchar' -- input to sp_rename
declare @newname sysname = N'EducationTypeTitle' -- input to sp_rename

declare @UnqualOldName  sysname,
@QualName1      sysname,
@QualName2      sysname,
@QualName3      sysname,
@OwnAndObjName  nvarchar(517),  
@SchemaAndTypeName  nvarchar(517),  
@objid          int,
@xtype          nchar(2),
@colid          int,
@retcode        int

select @UnqualOldName = parsename(@objname, 1),
        @QualName1 = parsename(@objname, 2),
        @QualName2 = parsename(@objname, 3),
        @QualName3 = parsename(@objname, 4)
print 'Old Object Name = ''' + convert(varchar,isnull(@UnqualOldName ,'')) + ''''
-- checks that parsename is getting the right name out of your @objname parameter
print 'Table name:'
if @QualName2 is not null
begin
print QuoteName(@QualName2) +'.'+ QuoteName(@QualName1)
select @objid = object_id(QuoteName(@QualName2) +'.'+ QuoteName(@QualName1))
end
else
begin
print QuoteName(@QualName1)
select @objid = object_id(QuoteName(@QualName1))
end
-- check if table is found ok
print 'Table Object ID = ''' + convert(varchar,isnull(@objid ,-1)) + ''''
select @xtype = type from sys.objects where object_id = @objid
print '@xtype = ''' + convert(varchar,isnull(@xtype,'')) + ''' (U or V?)'
if (@xtype in ('U','V'))
begin
print 'select @colid = column_id from sys.columns where object_id = ' + 
    convert(varchar,isnull(@objid,0)) + ' and name = ''' +
        @UnqualOldName + ''''

    select * from sys.columns where object_id = @objid -- and name = @UnqualOldName
    select @colid = column_id from sys.columns 
    where object_id = @objid and name = @UnqualOldName
    print 'Column ID = ''' + convert(varchar,isnull(@colid,-1)) + ''''
end 
```

这将在 Messages 选项卡（SSMS 或您正在使用的任何内容）和 Results 选项卡中的表字段中输出一些有用的消息。

祝你好运。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-26T14:27:33.373

我只是在重构之后也遇到了同样的问题。对我来说，问题是由重构的迁移引起的。

结果是无法执行另一个迁移，因为该迁移正在通过搜索表的旧名称来查找表。

还原迁移中的更改解决了这个问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-04T18:13:53.077

避免在迁移标题中使用保留字或类名。

当我将迁移命名为“Init”时，这发生在我身上 - 重命名为“InitialCreate”并且一切正常

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-24T11:49:42.500

当我首先使用代码更新数据库时出现此错误。我用外键创建了一个表，其他人重命名了该外键。现在当我尝试更新数据库时，它抛出了这个异常。

我执行了这些步骤来克服这个问题：

*   不得不从我的数据库中删除该表
*   跟踪哪个迁移添加了该表并将其从 SQL Server 的迁移历史记录中删除
*   最后再次运行 update-database 并且我的数据库成功更新。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-12T15:55:06.790

对我来说，它发生在：

*   添加了新的迁移 (migatoin1)
*   在本地数据库上更新
*   然后删除了相同的迁移（migatoin1）
*   然后添加同名（migatoin1）另一个迁移
*   然后应用到本地数据库并发布。

删除迁移文件（migatoin1）解决了我的问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-03T01:00:43.190

我刚刚遇到这个错误并解决了修改迁移部分类的问题，迁移尝试重命名索引并且索引不存在，我只是像这样更改迁移代码：

1.  删除索引方法上的重命名
2.  在 Up void 中设置创建索引
3.  在 Down void 中设置 drop index

这解决了我的问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-01-01T17:48:41.307

实际上，当您刚刚删除数据库时也会发生此错误，并且您的上下文没有意识到您的数据库不存在。

我重新创建了数据库，现在错误已解决。

PS确保在尝试运行更新数据库时检查数据库是否仍然存在

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-05-30T23:37:02.370

我通过从 SQL Server 中的“我的数据库迁移历史记录”表中删除所有旧迁移，然后添加一个新迁移来解决此错误，但仅用于所需的更改，然后更新数据库。它工作正常。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-08-21T13:49:59.813

这发生在我身上，因为自动迁移被设置为 true，并且其中一位新添加迁移到项目的程序员在更新数据库时会感到困惑。通过从项目中删除现有迁移并再次依靠自动更新来解决它。**

# javascript - 添加了javascript，现在链接不起作用

> ID：14848388
> 
> 赞同：0
> 
> 时间：2013-02-13T07:21:42.753
> 
> 标签：javascript, jquery

我添加了 javascript 来检测何时单击链接，这可以正常工作，但是现在链接无法正常工作（即它们不会将用户带到链接页面）。

HTML：

```
<div class="designflow" style="padding-left:50px;padding-right:0px;padding-top:0px;padding-bottom:15px;margin-top:0px;float:left; font-size:18px; color: gray; height:150px; width:150px;margin-left:auto;margin-right:auto;display:inline-block;"> 
<a href = "/manufacturing/" class = "designflow" id = "manufacturing">
<img src="{{STATIC_URL}}pinax/images/manufacturing.png" width = "150px" style=margin-bottom:0px;" alt=""><br>
<p style="position:absolute;bottom:25px;padding-left: 0px; padding-right:0px; width:150px;text-align:center;">Manufacturing</p></a>
</div> 
```

查询：

```
jQuery( 'div.designflow a' )
    .click(function() {
        do_the_click( this.id );
        return false;
    });
function do_the_click( designstage )
{
    alert(designstage);
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T07:23:30.347

由于返回 false，点击处理程序会禁用它们

当您从事件处理程序返回 false 时，您告诉运行时停止处理它。这还包括停止默认操作。在这种情况下，停止链接成为链接。

如果您删除“return false”行。然后链接将像链接通常一样再次工作

```
jQuery( 'div.designflow a' )
    .click(function() {
        do_the_click( this.id );
    }); 
```

但是，从您可能确实想要返回 false 的方法的名称中获取，然后在事件处理程序中处理重定位。

在 JavaScript 中，您可以导航到一个新的 url，如下所示：

```
window.location = newUrl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T07:24:20.107

这是因为你`return false`在函数中编写，如果你想编写它，你必须将页面重定向到来自 javascript 的链接地址

例子

```
jQuery( 'div.designflow a' )
    .click(function() {
        do_the_click( this.id );
        window.location="/manufacturing";
return;
    });
function do_the_click( designstage )
{
    alert(designstage};
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T07:25:07.210

通过在你的事件函数中返回 false，你明确地抑制了事件的正常行为。您应该返回 true，以便在执行代码后浏览器正常处理事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T07:24:07.957

我改变了`function`返回true

```
jQuery( 'div.designflow a' )
    .click(function() {
       do_the_click( this.id );
       return true;
    }); 
```

# ssrs-2008 - 仅在最后一页显示页脚

> ID：14848394
> 
> 赞同：2
> 
> 时间：2013-02-13T07:22:48.003
> 
> 标签：ssrs-2008, reporting-services

我想在报告中添加页脚，但仅限于最后一页。我遵循[了这个成功的教程，但是它在](http://bi-person.com/9-ssrs-sql-server-reporting-services/22-how-to-display-footer-only-on-last-page)*所有*页面上都为页脚留出了空间。

我怎样才能摆脱除最后一个页面之外的所有页面上的页脚空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T07:45:20.530

对于您的问题，我只能想到以下解决方案：

首先 - 不要在页脚中使用构建。相反，请使用包含您的页脚详细信息的子报告。

现在，您需要在主报告中定义尽可能薄的子报告（而在实际的子报告中 - 根据需要排列数据）。

然后只需实现与您提供的链接中描述的相同的概念 - 意味着您需要在子报告可见性字段中定义一个表达式。

附上解释“使用子报告”想法的演示：

![在此处输入图像描述](../Images/3a0abb1cb3f08921d80e7b831bbe43f6.png)

**编辑** 我做了一些研究-如果您按照问题中链接提供的说明进行操作，但拉伸矩形以覆盖所有页脚区域，那么您很好-直到最后一页才会显示页脚：

**这就是我在页脚上排列矩形的方式：**

![](../Images/2910f7accbf04d6bfdf9b87aa27d67ca.png)

**中页（可以看到页脚的矩形被隐藏了：**

![在此处输入图像描述](../Images/1d54324e5c672903e065ddbcf5ad30c5.png)

**最后一页（页脚可见）：**

![在此处输入图像描述](../Images/995e36ce0aeab3da59728c533e9ea5f1.png)

# apache - .htaccess 无法正常工作

> ID：14848395
> 
> 赞同：1
> 
> 时间：2013-02-13T07:22:50.923
> 
> 标签：apache, .htaccess

我在我的网络服务器 ( [http://sample.org/myproject/](http://sample.org/myproject/) ) 上安装了一个 CodeIgniter 项目。

对于 CodeIgniters 路由规则（例如`index.php/controller/methode`），我在`myproject`使用 RewriteEngine 的文件夹中编写了一个 .htaccess-File。该文件构建如下：

```
AuthType Basic
AuthUserFile /home/www/myuser/html/myproject/.htpasswd01
AuthName "secured area"
require valid-user
Options -Indexes
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php/$0 [PT,L] 
```

现在我遇到的问题：如果我正常调用页面（[http://sample.org/myproject/index.php/somestuff](http://sample.org/myproject/index.php/somestuff)）它工作正常，但目前我只直接调用目录（[http:// sample.org/myproject/](http://sample.org/myproject/)），这只会在某些特定时间起作用。有时它可以工作（在此错误显示一段时间后），有时它不会工作。

这是否与浏览器重新读取 .htaccess 之前的时间有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:00:46.233

由于`myproject`实际上是您的真实目录，`$DOCUMENT_ROOT`并且您`RewriteCond %{REQUEST_FILENAME} !-d`在 .htaccess 中有（意味着如果请求不是针对目录则执行），因此您的 RewriteRule 甚至没有触发。

用这个替换你现有的代码：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . index.php/$0 [NC,L] 
```

# iphone - 如何显示从最新到最旧排列的相册

> ID：14848398
> 
> 赞同：3
> 
> 时间：2013-02-13T07:22:59.340
> 
> 标签：iphone, ios, xcode, ipad, uiimagepickercontroller

当我使用以下代码从 iphone 加载相册时遇到问题。虽然我加载得很好，但出现的第一张照片是最旧的照片。是否可以重新排列顺序，以便我可以先加载最新的照片，然后是时间，最后是最旧的照片？

```
- (IBAction)imageFromAlbum:(id)sender
  {    
    imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    [self presentViewController:imagePicker animated:YES completion:nil];
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T10:59:29.567

要实现您想要的，您必须使用资产库框架创建自己的自定义照片选择器。根据您使用的 ios 版本，您可以使用 UICollectionViewController（从 ios6 开始）或必须创建自己的。

要获取保存的相册中的所有照片/资产，请执行此方法，然后使用属性 ALAssetPropertyDate 使用对象的创建日期按降序对对象进行排序

`thisVC.assetArray`将是您的自定义表或集合视图控制器的数据源。这两个方法是异步的，所以你需要在数据源完成后刷新 tableView 或 collectionView

```
__block YourViewController *thisVC = self;
ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
[library enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *stop) {
        if (group) {
            [self enumerateAssetForGroup:group forFilter:[ALAssetsFilter allPhotos] withCompletionBlock:^(id object) {
                thisVC.assetArray = object;
                [thisVC.assetArray sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {
                            NSDate *date1 = [obj1 valueForProperty:ALAssetPropertyDate];
                            NSDate *date2 = [obj2 valueForProperty:ALAssetPropertyDate];

                            return ([date1 compare:date2] == NSOrderedAscending ? NSOrderedDescending : NSOrderedAscending);
                 }];
                //in case of table
                [thisVC.tableView reloadData];
                //in case of collection view
                //reload collection view controller data
            }];
        }
    } failureBlock:nil];

- (void)enumerateAssetForGroup:(ALAssetsGroup*)group forFilter:(ALAssetsFilter*)filter withCompletionBlock:(ALAssetsEnumeration)enumerationCompletionBlock {

    [group setAssetsFilter:filter];
    __block NSInteger assetsCount = [group numberOfAssets];
    __block NSMutableArray *assetArray = [[NSMutableArray alloc] init];
    [group enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {
        if (result) {
            [assetArray addObject:result];
            if (*stop) {
                enumerationCompletionBlock(assetArray);
                [assetArray release];
            }
        }
        else if (assetsCount == 0) {
            enumerationCompletionBlock(nil);
        }
    }];
} 
```

用第一种方法编写的这部分将按降序对数组进行排序，

```
[thisVC.assetArray sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {
                NSDate *date1 = [obj1 valueForProperty:ALAssetPropertyDate];
                NSDate *date2 = [obj2 valueForProperty:ALAssetPropertyDate];

                return ([date1 compare:date2] == NSOrderedAscending ? NSOrderedDescending : NSOrderedAscending);
}]; 
```

如果你真的想试试这个:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:37:33.657

[如此处](https://stackoverflow.com/questions/8242935/how-to-obtain-the-original-file-name-of-the-image-picked-by-uiimagepickercontrol)所示，您可以从 UIImagePicker 获取图像的实际文件名。由于您似乎能够按日期顺序访问它们，因此对该结果的反向枚举应该可以解决您的问题。希望有帮助...

# php - 无法呈现重量

> ID：14848399
> 
> 赞同：0
> 
> 时间：2013-02-13T07:23:01.593
> 
> 标签：php, magento, magento-1.7

我正在做一个网站。我的客户希望我展示产品的重量。但条件是如果重量小于一公斤，它应该显示克。如果超过一公斤，则应显示公斤以及分数点 i，即如果重量为 1 公斤 350 克，则应显示 1.35 公斤。我的代码是这样的。

```
<?php $_weight = $_product->getweight()?>
<?php if ($_weight >= 1) : ?>
<span><?php echo($_weight)?>Kg<span>
<?php else: ?>
<? $_weight1=($_weight * 1000) ?>
<span><?php echo(round($_weight1))?>grams<span>
<?php endif;?>
<br/> 
```

但我不知道如何只用两个分数来表示公斤。请帮我。我是一个崭露头角的开发者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:28:52.913

您几乎到了那里 - 当您使用该`round()`函数时，您可以将小数精度指定为第二个参数。

```
<span><?php echo($_weight)?>Kg<span> 
```

变成

```
<span><?php echo(round($_weight,2))?>Kg<span> 
```

[http://php.net/round](http://php.net/round)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:31:02.613

`<? $_weight1=($_weight * 1000) ?>`行替换`<?php $_weight1=($_weight * 1000) ?>`并尝试...

```
<?php $_weight = $_product->getweight(); ?>
<?php if ($_weight >= 1) { ?>
<span><?php echo round($_weight,2); ?>Kg<span>
<?php }else{ ?>
<?php $_weight1= round($_weight * 1000); ?>
<span><?php echo $_weight1; ?>grams<span>
<?php } ?>
<br/> 
```

# android - SQLite Context.MODE_PRIVATE

> ID：14848402
> 
> 赞同：7
> 
> 时间：2013-02-13T07:23:11.933
> 
> 标签：android, sqlite

我想知道：

我们可以`Context.MODE_PRIVATE`在`SQLite`创建数据库时使用以防止不必要的数据库访问。

我在谷歌上没有得到任何例子。
如何`Context.MODE_PRIVATE`在数据库中使用它。
请帮助我。提供任何链接或示例。

[在此链接](http://developer.android.com/reference/android/content/Context.html#MODE_PRIVATE)中，他们正在谈论文件。所以数据库也是文件。

我该如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T05:48:24.230

正如 commonsware 所提到的，内部存储上的 SQLite 数据库默认是私有的。但正如其他人提到的那样，植根手机始终可以访问您的文件。

相反，您可以使用任何加密算法将数据保存在数据库中，这将帮助您限制可读性，除非入侵者知道加密算法。

您不能在 SQLite 中设置“Context.MODE_PRIVATE”标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:55:45.213

创建数据库时，以下语法很有用

```
openOrCreateDatabase(String path, int mode, SQLiteDatabase.CursorFactory factory) 
```

例如，

```
openOrCreateDatabase("StudentDB",Context.MODE_PRIVATE,null); 
```

[在这个](http://www.c-sharpcorner.com/UploadFile/88b6e5/sqlitedatabase-connectivity/)网站上查看我的教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-22T05:22:23.447

**选项 1**：使用[SQLcipher](https://www.zetetic.net/sqlcipher/)。

**选项 2**：安全方法永远没有机会破解。它并不完美，但总比没有好。

> 1）使用此功能插入数据：

```
public static String getEncryptedString(String message) {
    String cipherText = null;

    try {
        Cipher cipher = Cipher.getInstance("AES/ECB/PKCS5Padding");
        cipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec(("YOUR-SECURE-PASSWORD-KEY").getBytes(), "AES"));
        byte[] bytes = cipher.doFinal(message.getBytes());
        cipherText = Base64.encodeToString(bytes, Base64.DEFAULT);
    } catch(Exception ex) {
        cipherText = "Error in encryption";
        Log.e(TAG , ex.getMessage());
        ex.printStackTrace();
    }

    return cipherText;
} 
```

> 2）从数据库中获取数据并传入该函数参数：

```
//This function returns output string 
public static String getDecryptedString(String encoded) {
    String decryptString = null;

    try {
        byte[] bytes = Base64.decode(encoded, Base64.DEFAULT);

        Cipher cipher = Cipher.getInstance("AES/ECB/PKCS5Padding");
        cipher.init(Cipher.DECRYPT_MODE, new SecretKeySpec(("YOUR-SECURE-PASSWORD-KEY").getBytes() , "AES"));
        decryptString = new String(cipher.doFinal(bytes), "UTF-8");
    } catch(Exception ex) {
        decryptString = "Error in decryption";
        ex.printStackTrace();
    }

    return decryptString;
} 
```

> 3) 这些方法的好处： - 没有正确的密钥就不可能解密。- AES 加密是一种非常安全的加密方法。
> 
> 4) 将您的 AES 密钥存储在 c++ 文件中。

# c++ - 如何在不格式化的情况下写入 std::ostream？

> ID：14848403
> 
> 赞同：2
> 
> 时间：2013-02-13T07:23:21.530
> 
> 标签：c++, c++11, io, formatting

例如，我想用完整的反斜杠-n（**无格式**`std::string my_str( "foobar\n" );`）直接写入。`std::ostream&`

 **也许我需要先`my_str`使用将反斜杠转换为双反斜杠的格式化函数进行转换？有没有一个标准的库函数呢？

或者也许有一个指令我可以传递给`std::ostream&`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T07:24:42.267

对于较大的字符串，最简单的方法是使用原始字符串文字：

```
std::string my_str(R"(foobar\n)"); 
```

如果要在其中使用括号，请使用分隔符：

```
R"delim(foobar\n)delim" 
```

我不知道有什么可以让您将转义码等保留在字符串中，但没有输出它，但`std::transform`有一个`std::ostream_iterator<std::string>`目的地和一个处理您想要的情况的函数应该这样做，就像在[这个例子](http://liveworkspace.org/code/2ZFKjF%241)中一样：

```
std::string filter(char c) {
   if (c == '\n') return "\\n";
   if (c == '\t') return "\\t";
   //etc
   return {1, c};
}

int main() {
   std::string str{"abc\nr\tt"};
   std::cout << "Without transform: " << str << '\n';

   std::cout << "With transform: ";
   std::transform(std::begin(str), std::end(str), std::ostream_iterator<std::string>(std::cout), filter);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T07:33:23.253

既然`"foobar\n"`是常量字面量，就写成`"foobar\\n"`, 这样`"\\"`就变成了`"\"`，让`n`离开。

你所说的“格式化”不是。

流不*格式化*字符串。`"\n"`with的替换`char(10)`是由编译器在从文字生成实际值时进行的。（如果底层平台需要，ostream 最多会转化`char(10)`为`{ char(10), char(13) }`，但这是另一回事）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T07:53:04.200

“反斜杠+n”没有被流格式化；例如长度`std::string("\n")`为**1**（而不是 2）。同样`'\n'`是单个*字符*。您编写反斜杠 + n 的事实只是表示不可打印（和非 ASCII）字符的快捷方式。

再举一个例子，`'\x0a' == '\n'`（因为`0a`是换行符的十六进制代码）。而且`std::string("\x0a").size() == 1`也是。

如果（在 Linux ¹上）您打开 a`std::ofstream`并写入`'\x0a'`该流，那么您最终将得到一个包含*单个*字节的文件；其十六进制值为`0a`。

因此，转换您编写的内容的不是您的流，而是编译器。根据您的用例，您可能想要：

*   更改代码中写入的字符串：使用`"foobar\\n"`（注意这将长度增加1）
*   在流式传输时执行转换以打印不可打印字符的十六进制或转义码

¹在 Windows 上，`'\n'`字符在文本模式下被转换为`"\r\n"`（回车 + 换行）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-13T07:43:28.043

这与`std::ostream`or无关`std::string`。`"foobar\n"`是一个`\n`已经意味着行尾的文字。

你有两个选择：

1.  转义`\n`符号`\`

    `std::string str("foobar\\n");`
2.  使用现代 C++11 原始字符串文字

    `std::string str(R"(foobar\n)");`**

# iphone - 将自定义属性添加到 MKAnnotation

> ID：14848404
> 
> 赞同：1
> 
> 时间：2013-02-13T07:23:24.787
> 
> 标签：iphone, ios, objective-c, mkmapview, mapkit

我正在尝试向我的 MKAnnotation 添加自定义值。我想让它存储该位置的唯一 ID。我使用标题和副标题设置注释的代码如下所示：

```
location.latitude = [dictionary[@"placeLatitude"] doubleValue];
location.longitude = [dictionary[@"placeLongitude"] doubleValue];

newAnnotation = [[MapViewAnnotation alloc] initWithTitle:dictionary[@"placeName"]
                                               andCoordinate:location];

newAnnotation.subtitle = dictionary[@"placeCity"]; 
```

如何添加自定义属性，例如“placeId”？这就是我所拥有的：

```
newAnnotation.placeId=dictionary[@"placeId"]; 
```

任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:12:08.880

如果 MapViewAnnotation 是 MKAnnotation/MKAnnotationView 的子类，那么只需为其创建属性，合成并使用。如果没有，则在 MKAnnotationView 上创建类别。

以下是创建类别类的步骤。

1.  右键单击项目并选择“新建文件”
2.  Cacoa Touch > Objective-C 分类 > Next
3.  给类别：category_name & 类别在：category_on_class
4.  在 .h 文件中只需创建 placeId 的属性
5.  在 .m 中使用 @dynamic 合成它
6.  在您的文件中导入该 .h 文件。

然后，您可以在该类的“classObject”对象上拥有“classObject.placeId”属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T08:26:06.753

做 Bhargavi 说的，但是对 MapViewAnnotation.m 和 MapViewAnnotation.h 做

# magento - Magento 可配置产品未显示在类别列表中？

> ID：14848405
> 
> 赞同：3
> 
> 时间：2013-02-13T07:23:29.413
> 
> 标签：magento

我有包含小尺寸和大尺寸的可配置产品。我完成了本文[http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product)中的所有步骤。

它运行良好，我可以直接访问该产品。

小问题是它没有显示在类别中。我确定接下来的几点。

1.  产品必须在目录中可见。
2.  产品必须启用。
3.  产品必须有库存数量。
4.  产品必须设置为有货。
5.  如果产品设置为不跟踪库存，它仍然必须有库存数量并设置为有库存。
6.  产品必须分配到目标类别。
7.  如果使用多网站模式（或者如果您通过数据流导入产品），则必须将产品分配到目标网站。
8.  您必须刷新您的缓存/索引。

还能做什么？=(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-04T10:46:03.880

您是否使用了 SimpleCONfigurableProducts 的 Organic Internet 扩展程序？如果是这样，最简单的修复将是对此文件进行更改`app/code/community/OrganicInternet/SimpleConfigurableProducts/Catalog/Model/Resource/Eav/Mysql4/Product/Indexer/Price/Configurable.php`

从：

```
$select->columns(array(
            'entity_id'         => new Zend_Db_Expr('e.entity_id'),
            'customer_group_id' => new Zend_Db_Expr('pi.customer_group_id'),
            'website_id'        => new Zend_Db_Expr('cw.website_id'),
            'tax_class_id'      => new Zend_Db_Expr('pi.tax_class_id'),
            'orig_price'        => new Zend_Db_Expr('pi.price'),
            'price'             => new Zend_Db_Expr('pi.final_price'),
            'min_price'         => new Zend_Db_Expr('pi.final_price'),
            'max_price'         => new Zend_Db_Expr('pi.final_price'),
            'tier_price'        => new Zend_Db_Expr('pi.tier_price'),
            'base_tier'         => new Zend_Db_Expr('pi.tier_price')
        )); 
```

至：

```
$select->columns(array(
            'entity_id'         => new Zend_Db_Expr('e.entity_id'),
            'customer_group_id' => new Zend_Db_Expr('pi.customer_group_id'),
            'website_id'        => new Zend_Db_Expr('cw.website_id'),
            'tax_class_id'      => new Zend_Db_Expr('pi.tax_class_id'),
            'orig_price'        => new Zend_Db_Expr('pi.price'),
            'price'             => new Zend_Db_Expr('pi.final_price'),
            'min_price'         => new Zend_Db_Expr('pi.final_price'),
            'max_price'         => new Zend_Db_Expr('pi.final_price'),
            'tier_price'        => new Zend_Db_Expr('pi.tier_price'),
            'base_tier'         => new Zend_Db_Expr('pi.tier_price'),
            'group_price'       => new Zend_Db_Expr('pi.group_price'),
            'base_group_price'  => new Zend_Db_Expr('pi.group_price')
        )); 
```

和...

从：

```
$outerSelect->columns(array(
    'customer_group_id',
    'website_id',
    'tax_class_id',
    'orig_price',
    'price',
    'min_price',
    'max_price'     => new Zend_Db_Expr('MAX(inner.max_price)'),
    'tier_price',
    'base_tier',
    #'child_entity_id'
)); 
```

至：

```
 $outerSelect->columns(array(
        'customer_group_id',
        'website_id',
        'tax_class_id',
        'orig_price',
        'price',
        'min_price',
        'max_price'     => new Zend_Db_Expr('MAX(inner.max_price)'),
        'tier_price',
        'base_tier',
        'group_price',
        'base_group_price' 
        #'child_entity_id'
    )); 
```

希望有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-16T04:42:36.057

甚至我之前也无法做到（现在解决了）。我有两个属性：形状和大小（之前应用于选定的产品：可配置产品）。据说形状和尺寸属性仅适用于“可配置产品”而不是“简单产品”（这是问题所在！）。

我们创建的相关产品（来自可配置产品）实际上是简单的产品。所以 Magento 要求我们为创建可配置产品创建的属性应该带有“简单产品”选项。

目录 > 属性 > 管理属性 > 尺寸 > 应用于 > 选定的产品类型 > 简单产品

然后这个属性可以用来创建属性集，进而创建一个可配置的产品（这用于创建简单的关联产品）。

请确保在管理员的“管理属性”部分中将产品属性应用于“简单产品”。

# c - 我的 curl 的结果未读为字符串

> ID：14848407
> 
> 赞同：0
> 
> 时间：2013-02-13T07:23:32.447
> 
> 标签：c, string-comparison, c-strings

我正在为 POS 机编写此代码

我将来自网络链接的返回数据设置为“坏”，以便我可以测试它是否真的有效。但是当我将结果与字符串“坏”进行比较时，它总是说它们不相等。当我将结果打印到屏幕上时购买，它显示两个结果都不好。

拜托我需要你的帮忙。下面的代码

```
void checklogin(void) {
    CURL *curl;
    CURLcode res;
        long timeout = 30;
        char buffer[50000];
    //Initializing the CURL module
    curl = curl_easy_init();

    if(curl){
    //Tell libcurl the URL
    curl_easy_setopt(curl,CURLOPT_URL, "http://website.org/login.php");
    curl_easy_setopt(curl, CURLOPT_POSTFIELDS, "username=su&password=ch");
        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, myfunc);
        curl_easy_setopt(curl, CURLOPT_WRITEDATA, buffer);
        curl_easy_setopt(curl, CURLOPT_TIMEOUT, timeout);
        curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L); //tell curl to output its progress

           res = curl_easy_perform(curl);

           CTOS_LCDTClearDisplay();

           char mai[30];
           char mai2[30];

           char *serverresponse = "bad";
           sprintf(mai2, "%s" , serverresponse);
           sprintf(mai, "%s" , buffer);

           if(mai2 == mai){
            CTOS_LCDTPrint("Invalid username");
            CTOS_KBDGet(&key); 
           }else{
               //loginname = buffer;
               //mainusername = username;
               CTOS_LCDTPrintXY(1, 1, "Login Success");
               CTOS_LCDTPrintXY(1, 2, "Welcome");
               CTOS_KBDGet(&key);
               }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:12:11.623

您所做的比较在 C++ 中有效，但是对于 C，您需要[`strcmp()`](http://en.cppreference.com/w/cpp/string/byte/strcmp)用于比较字符串。`0`如果您作为参数提供的两个字符串包含相同的内容，则返回值。另请记住，您可以在需要时使用其他`strcmp()`功能，例如`stricmp()`当您想要进行不区分大小写的比较时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:37:09.357

mai2 和 mai 是指向 char 数组的第一个字段的指针。由于这些是不同的数组，它们的地址当然是不同的。您想比较内容，因此您确实需要使用[strcmp](http://www.cplusplus.com/reference/cstring/strcmp/)

```
#include <string.h>
strcmp("hello", "hello"); //0 
```

如果两个 char 数组包含相同的内容，则结果将为 0。

```
if (strcmp(mai, mai2) == 0 ) {
    ...
} 
```

-汉内斯

# c# - 如何使用图形类在c#中写入文本文件

> ID：14848412
> 
> 赞同：0
> 
> 时间：2013-02-13T07:23:50.480
> 
> 标签：c#, text, graphics

我需要通过代码动态创建一个文档，然后打印并将其保存到 .doc 文件中。到目前为止，我已经设法使用图形类来打印文档，但我不知道如何让它以 .doc 或任何文本格式保存文件。是否有可能做到这一点？如果是的话怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:04:44.707

我不确定这是您要查找的内容，但如果您想将使用 Graphics 生成的内容保存在磁盘上，您可以使用 Windows 元文件 (wmf)。如果`g`是你的实例`Graphics`，是这样的：

```
 IntPtr hdc = g.GetHdc();
        Rectangle rect = new Rectangle(0, 0, 200, 200);
        Metafile curMetafile = new Metafile(@"c:\tmp\newFile.wmf", hdc);
        Graphics mfG = Graphics.FromImage(curMetafile);
        mfG.DrawString("foo", new Font("Arial", 10), Brushes.Black, new PointF(10, 10));
        g.ReleaseHdc(hdc);
        mfG.Dispose(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:06:52.143

假设您并不是真的要将图形保存为文本，而只是想创建一个 Word 文档，那么您需要查看`Microsoft.Office.Interop.Word`.

即来自[DotNetPearls](http://www.dotnetperls.com/word)：

```
using System;
using Microsoft.Office.Interop.Word;

class Program
{
    static void Main()
    {
    // Open a doc file.
    Application application = new Application();
    Document document = application.Documents.Open("C:\\word.doc");

    // Loop through all words in the document.
    int count = document.Words.Count;
    for (int i = 1; i <= count; i++)
    {
        // Write the word.
        string text = document.Words[i].Text;
        Console.WriteLine("Word {0} = {1}", i, text);
    }
    // Close word.
    application.Quit();
    }
} 
```

# jsp - 使用 Struts2 框架的 Jasper 报告

> ID：14848414
> 
> 赞同：1
> 
> 时间：2013-02-13T07:23:57.487
> 
> 标签：jsp, struts2, jasper-reports

我已经在带有报告的`Struts2`框架中创建了一个应用程序。`Jasper`

在索引页面中，当我单击一个按钮时，我会得到显示为 pdf 的报告。

但我非常关心我的实施。我所做的实施是正确的方法吗？

因为我在几个教程中注意到在 struts2 中调用 jasper 有点像：

```
 <action name="myJasperTest" class="com.acme.test.action.JasperAction">
        <result name="success" type="jasper">
            <param name="location">/jasper/our_compiled_template.jasper</param>
            <param name="dataSource">myList</param>
            <param name="format">PDF</param>
        </result>
  </action> 
```

但我不知道如何通过上述方式将参数传递给查询？谁能告诉我一些解决方案或建议

**索引.jsp**

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib uri="/struts-tags" prefix="s"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
       <s:form action="getUserDetails"  method="post">
            <s:submit value="Show" onclick="this.form.target='_blank';return true;"/>           
        </s:form>
    </body>
</html> 
```

**JasperReport.java**

```
package commonpackage;

import com.opensymphony.xwork2.ActionSupport;
import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;
import java.sql.Connection;
import java.sql.DriverManager;
import java.util.HashMap;
import java.util.Map;
import net.sf.jasperreports.engine.*;
import net.sf.jasperreports.engine.design.JasperDesign;
import net.sf.jasperreports.engine.xml.JRXmlLoader;
import org.apache.struts2.ServletActionContext;

public class JasperReport extends ActionSupport
{
     private String userid="1";
     public InputStream inputStream;
      public String getUserDetails() throws ClassNotFoundException{

            try {
            Class.forName("com.mysql.jdbc.Driver");
            Connection cn = DriverManager.getConnection("jdbc:mysql://localhost:3306/ortms", "root", "");
            String str;
            str = ServletActionContext.getServletContext().getRealPath("/reports/myreport.jrxml");
            JasperDesign jd=JRXmlLoader.load(str);
            Map parameters = new HashMap();
            parameters.put("userid", userid);
            net.sf.jasperreports.engine.JasperReport jr = JasperCompileManager.compileReport(jd);
            JasperPrint jp=JasperFillManager.fillReport(jr, parameters,cn);
            JRExporter exporter = new net.sf.jasperreports.engine.export.JRPdfExporter();
            exporter.setParameter(JRExporterParameter.JASPER_PRINT, jp);
            exporter.setParameter(JRExporterParameter.OUTPUT_FILE_NAME, ServletActionContext.getServletContext().getRealPath("/reports/myreport.pdf"));
            exporter.exportReport();
            File file = new File(ServletActionContext.getServletContext().getRealPath("/reports/myreport.pdf"));  
            inputStream = new DataInputStream( new FileInputStream(file));

            return SUCCESS;

        } catch (Exception e) {
            System.out.println("Exception in getUserDetails in JasperReport class");
            e.printStackTrace();
        }

   return SUCCESS;
}

      public void setInputStream(InputStream inputStream) {
        this.inputStream = inputStream;
    }

public InputStream getInputStream() {
        return inputStream;
    }
} 
```

**struts.xml**

```
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <include file="example.xml"/>
    <!-- Configuration for the default package. -->
    <package name="default" extends="struts-default">
      <action name="getUserDetails" class="commonpackage.JasperReport" method="getUserDetails">
         <result name="success" type="stream">
           <param name="contentType">application/pdf</param>
           <param name="inputName">inputStream</param>
           <param name="contentDisposition">inline;filename="UserReport.pdf"</param>
           <param name="bufferSize">1024</param>
         </result>
      </action>
    </package>
</struts> 
```

**我的报告.jrmxl**

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="70b2040b-a566-48b5-8e8e-a01d402007e3">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="userid" class="java.lang.String">
        <defaultValueExpression><![CDATA[0]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[SELECT
     table_users.`id` AS table_users_id,
     table_users.`user_code` AS table_users_user_code,
     table_users.`first_name` AS table_users_first_name,
     table_users.`last_name` AS table_users_last_name
FROM
     `table_users` table_users WHERE table_users.`id`=$P{userid}]]>
    </queryString>
    <field name="table_users_id" class="java.lang.Integer"/>
    <field name="table_users_user_code" class="java.lang.String"/>
    <field name="table_users_first_name" class="java.lang.String"/>
    <field name="table_users_last_name" class="java.lang.String"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="79" splitType="Stretch"/>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="20" splitType="Stretch">
            <staticText>
                <reportElement uuid="ca3f2664-22a6-4f31-b04b-f61b774d2dc3" x="33" y="0" width="100" height="20"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[ID]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="ca3f2664-22a6-4f31-b04b-f61b774d2dc3" x="132" y="0" width="100" height="20"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[CODE]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="ca3f2664-22a6-4f31-b04b-f61b774d2dc3" x="232" y="0" width="100" height="20"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[FIRST NAME]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="ca3f2664-22a6-4f31-b04b-f61b774d2dc3" x="332" y="0" width="100" height="20"/>
                <textElement>
                    <font isBold="true"/>
                </textElement>
                <text><![CDATA[LAST NAME]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement uuid="095242c4-b1b5-4545-897c-315f3bbe37a2" x="33" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{table_users_id}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="095242c4-b1b5-4545-897c-315f3bbe37a2" x="133" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{table_users_user_code}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="095242c4-b1b5-4545-897c-315f3bbe37a2" x="232" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{table_users_first_name}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="095242c4-b1b5-4545-897c-315f3bbe37a2" x="332" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{table_users_last_name}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:48:52.297

关于文档，您应该这样做：

```
reportParameters - (2.1.2+) OGNL expression used to retrieve a map of report 
parameters from the value stack. The parameters may be accessed in the report 
via the usual JR mechanism and might include data not part of the dataSource, 
such as the user name of the report creator, etc. 
```

所以你应该有这个配置：

```
<action name="myJasperTest" class="com.acme.test.action.JasperAction">
        <result name="success" type="jasper">
            <param name="location">/jasper/our_compiled_template.jasper</param>
            <param name="dataSource">myList</param>
            <param name="format">PDF</param>
            <param name="exportParameters">parameterMap</param>
        </result>
  </action> 
```

这是[文档](http://struts.apache.org/development/2.x/docs/jasperreports-plugin.html)

# jquery - 我在更改 css 属性的代码中做错了什么？

> ID：14848417
> 
> 赞同：1
> 
> 时间：2013-02-13T07:24:03.403
> 
> 标签：jquery, html, css

我正在使用以下 css 覆盖我的 jquerymobile 项目中列表视图的 css

```
li{
height:90px !important;
border-style: 0px !important;
border-width: 0px 5px 2px 0px !important;
-moz-border-image: url('images/FA-iPhone_my-goals_READY-(2)_02.png') 0 5 2 0 stretch     !important;
-webkit-border-image: url('images/FA-iPhone_my-goals_READY-(2)_02.png') 0 5 2 0 stretch     !important;
-o-border-image: url('images/FA-iPhone_my-goals_READY-(2)_02.png') 0 5 2 0 stretch     !important;
border-image: url('images/FA-iPhone_my-goals_READY-(2)_02.png') 0 5 2 0 fill stretch !important;} 
```

这样可行。但是，在每个列表视图中，我都有一个用作按钮的图像。我用 div 包裹了图像，并为该 div 赋予了“#selectbtn”的 id。我正在尝试在这里使用该方法：

[http://www.jquery4u.com/dynamic-css-2/change-css-jquery/](http://www.jquery4u.com/dynamic-css-2/change-css-jquery/)

因此，使用下面的代码，`#four1`页面的 id（jquerymobile 认为它是一个页面） `#selectbtn`当然是在列表视图中用作按钮的图像的名称。图像有文字，上面写着“选择”。所以我希望当我点击它时，它可以将上面 li 选择器的属性和值更改为下面的新属性和值。

```
<script>
$('#four1').live('pagecreate', function(e){
$("#selectbtn").click(function(e) {
$('li').css({'height': '90px !important'});
$('li').css({'border-style': '0px !important'});
$('li').css({'border-width': '0px 5px 2px 0px !important'});
$('li').css({'-moz-border-image':url('+images/goalsel_02.png+ !important')'});
$('li').css({'-webkit-border-image':url('+images/goalsel_02.png+ !important')'});
$('li').css({'-o-border-image':url('+images/goalsel_02.png+')' !important});
$('li').css({'border-image': 'url('+images/goalsel_02.png+')' !important});

    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:29:15.133

您应该正确分配属性。

```
$(element).css("property", "value"); //if assigning one property 
```

或者

```
$(element).css({ "property1" : "value1", "property2" : "value2" }); // more than 1 property and also keep that quotes right 
```

您还必须关心您的报价。

像

`$(element).css({ "background-image" : "url('path_to_image') !important" });`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:29:35.710

您需要以 JSON 格式分配，例如：

```
$(element).css({ "property1" : "value1", "property2" : "value2" }); 
```

或者，如果您只想添加一个属性，请使用以下命令：

```
$(element).css("property", "value"); 
```

不是单个属性的 JSON 格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:45:33.697

除了答案之外，不要多次选择您的元素。如答案所示，您可以在一个 css 函数中添加所有 css 样式。

如果您想将其他功能应用于给定元素，您可以使用链接（另请参见：[http](http://tobiasahlin.com/blog/quick-guide-chaining-in-jquery/) ://tobiasahlin.com/blog/quick-guide-chaining-in-jquery/ ）。这背后的原因是您不希望 jQUery 为您应用的每个函数搜索相同的元素。

# iphone - 是否可以在整个 iOS 应用程序上放置图像叠加层？

> ID：14848426
> 
> 赞同：3
> 
> 时间：2013-02-13T07:24:38.787
> 
> 标签：iphone, ios

我想在我的整个应用程序顶部有一个聚光灯效果的 PNG 图像。即使键盘弹出。

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T07:31:47.653

将 PNG 添加到覆盖其他所有内容的新窗口：

```
UIWindow *totalOverlayWindow = [[UIWindow alloc] init];
totalOverlayWindow.frame = [[UIScreen mainScreen] bounds];
totalOverlayWindow.userInteractionEnabled = NO;
totalOverlayWindow.windowLevel = UIWindowLevelStatusBar + 1;
[totalOverlayWindow makeKeyAndVisible]; 
```

这个窗口现在将高于一切。

# javascript - 非致命的 Javascript 错误？

> ID：14848440
> 
> 赞同：0
> 
> 时间：2013-02-13T07:25:58.177
> 
> 标签：javascript, syntax-error

我认为我的脚本中存在某种非致命错误，它不允许我使用 Firebug 和 b/ 调试脚本，导致 Firefox 在我在页面上时不断显示连接...（带有漩涡） . 该脚本似乎运行良好。

有什么想法可能导致这种情况吗？

```
<script type="text/javascript">
var xmlHttp;
var xmlDoc;

loadXMLFile();

function loadXMLFile()
{
    xmlHttp = new window.XMLHttpRequest();
    xmlHttp.open("GET", "myFile.xml", true);
    xmlHttp.onreadystatechange = StateChange;
    xmlHttp.send(null);
}

function StateChange()
{
    if ( xmlHttp.readyState == 4 )
    {
        xmlDoc = xmlHttp.responseXML;
        processXML();
    }
}

function processXML()
{
    var firstNames = xmlDoc.querySelectorAll("name");
    if (firstNames == null)
    {
        document.write("Oh poo. Query selector returned null.");
    }
    else
    {
        for (var i = 0; i < firstNames.length; i++)
        {
            document.write(firstNames[i].textContent + "<br>");
        }
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:08:21.857

您页面中的所有代码都已解析，但在页面完成之前不会执行。发生这种情况，因为您是`document.write()`从`onreadystatechange`事件处理函数调用而不是解析时间。

In this case `document.write()` implicitly calls `document.open()`, which wipes all the code out of the page, and only what is left is the text written by `document.write()`. Also `document` is left open, which causes the browser being "busy". This can be avoided by using `document.close()`, but it won't prevent the original content to vanish.

You need to add an element to the `body` and then use some "real" DOM manipulation method. Something like this:

```
<div id="qResult"></div> 
```

Then instead of `document.write()`:

```
document.getElementById('qResult').innerHTML = WHAT_EVER_NEEDED 
```

# typo3 - 如何升级 Typo3 4.2.6？

> ID：14848442
> 
> 赞同：1
> 
> 时间：2013-02-13T07:26:10.297
> 
> 标签：typo3

我有一个 Typo3 4.2.6 版本正在运行。

我应该升级到哪个版本？（我可以升级到 6.x 吗？）

我应该如何进行升级？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T09:40:15.673

您应该首先升级到 4.5。4.5 版是 LTS（长期支持）版本，维护结束日期为 3/2015（请参阅[https://typo3.org/download/](https://typo3.org/download/)）。我不建议现在更新到 6.0。许多扩展尚不兼容，并且发生了很大变化。至少维护结束与4.5相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T07:31:54.583

我建议将它升级到typo3 4.7的最新版本。将站点升级到typo3 6.x 不是一个好的选择，因为typo3 论坛中存在许多关于升级到typo3 6.x 的未解决问题。typo3 4.x 中的大多数扩展在typo3 6.x 中无法顺利运行。所以我建议升级到最新版本的typo3 4.7。对于**typo3 4.6 及以上版本需要PHP 5.3**，否则您可以升级到4.5.x。

如何升级typo3？

检查此链接：**[https ://sankartypo3.wordpress.com/2012/05/17/how-to-upgrade-typo3-version/](https://sankartypo3.wordpress.com/2012/05/17/how-to-upgrade-typo3-version/)**

我曾经一步一步成功地将typo3 4.2升级到4.7（4.2到4.4、4.4到4.5和4.5到4.7）。**使用上面链接中“一些简单的方法来找出升级typo3 后的错误/问题！** ”中提到的方法解决了typo3 升级后的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-04T06:53:37.267

移民

升级到 6.2 的步骤

1）备份旧站点（不要忘记备份数据库）

2）检查是否有任何全局安装的扩展使其成为本地方式（从 /typo3/ext/ 中删除扩展并从存储在文件夹 /typo3conf/ext/ 中的 TYPO3 TER 安装）

3）上传新下载的TYPO3版本的“typo3”文件夹

4）在根目录中创建文件夹“typo3_src”

5）删除“t3lib”文件夹

6）从根文件夹上传 index.php

7）去typo3 BE，去安装工具

8）点击“系统环境”，检查是否有错误。如果存在错误，请解决错误。

9）单击“文件夹结构”并尝试解决尽可能多的错误。

10）点击“升级向导”

11) 执行所有更新向导部分，例如“从 tt_content.image 和 pages.media 迁移所有文件关系”“将启用 RTE 的字段的所有文件链接迁移到 FAL”等...

12）点击“升级向导”页面末尾的“转到数据库分析器”链接。或点击“重要行动”

13）转到“数据库分析器”部分，然后单击“将当前数据库与规范进行比较”

14）在“数据库分析器”部分执行执行

15)单击“所有配置”并转到“$TYPO3_CONF_VARS['SYS']”并将“[SYS][compat_version]”的值更改为6.2

16）从“重要操作”中执行“清除所有缓存”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-19T15:40:50.413

我使用以下过程从 TYPO3 4.1 升级到 6.1：

1.  将所有内容导出到 .t3d。（如果太大，就分块）
2.  安装 6.1 和所有插件。（这可确保数据库具有所有需要的表）。
3.  将旧的 fileadmin/ 内容复制到 6.x fileadmin/
4.  导入 .t3d
5.  修复插件问题，即不推荐使用的功能等。

明智的做法是先在 Windows 本地计算机上尝试。

# android - Lazylist 中的图像显示为压缩

> ID：14848445
> 
> 赞同：0
> 
> 时间：2013-02-13T07:26:24.370
> 
> 标签：android, android-listview, imageview, lazy-loading

[我正在使用 Github 的Lazylist](https://github.com/thest1/LazyList)项目制作预订阅读器。一切正常。

*   但在横向模式下，图像会变小。目前打开书本的屏幕显示使阅读文本变得困难，主要是由于拉伸（展开）问题。

这是一张图片，可以让您清楚我要问的问题。

```
I am getting this result. which is hard to read. 
```

![在此处输入图像描述](../Images/55539b8a8549058f1fa75ea08a6bdb49.png)

```
I want this. 
```

![在此处输入图像描述](../Images/1cb2ceab05cedafc337c6ebbbcfee212.png)

我尝试了以下

```
 <ImageView
    android:id="@+id/image"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="fitXY"
    android:src="@drawable/stub" /> 
```

但工作不像我想要的那样。

我怎样才能做到这一点？

懒加载器.java

```
public class ImageLoader {

MemoryCache memoryCache=new MemoryCache();
FileCache fileCache;
private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
ExecutorService executorService; 

public ImageLoader(Context context){
    fileCache=new FileCache(context);
    executorService=Executors.newFixedThreadPool(5);
}

final int stub_id=R.drawable.stub;
public void DisplayImage(String url, ImageView imageView)
{
    imageViews.put(imageView, url);
    Bitmap bitmap=memoryCache.get(url);
    if(bitmap!=null)
        imageView.setImageBitmap(bitmap);
    else
    {
        queuePhoto(url, imageView);
        imageView.setImageResource(stub_id);
    }
}

private void queuePhoto(String url, ImageView imageView)
{
    PhotoToLoad p=new PhotoToLoad(url, imageView);
    executorService.submit(new PhotosLoader(p));
}

private Bitmap getBitmap(String url) 
{
    File f=fileCache.getFile(url);

    //from SD cache
    Bitmap b = decodeFile(f);
    if(b!=null)
        return b;

    //from web
    try {
        Bitmap bitmap=null;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
        conn.setConnectTimeout(30000);
        conn.setReadTimeout(30000);
        conn.setInstanceFollowRedirects(true);
        InputStream is=conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f);
        return bitmap;
    } catch (Throwable ex){
       ex.printStackTrace();
       if(ex instanceof OutOfMemoryError)
           memoryCache.clear();
       return null;
    }
}

//decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f){
    try {
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        FileInputStream stream1=new FileInputStream(f);
        BitmapFactory.decodeStream(stream1,null,o);
        stream1.close();

        //Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE=512;
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;
        while(true){
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        FileInputStream stream2=new FileInputStream(f);
        Bitmap bitmap=BitmapFactory.decodeStream(stream2, null, o2);
        stream2.close();
        return bitmap;
    } catch (FileNotFoundException e) {
    } 
    catch (IOException e) {
        e.printStackTrace();
    }
    return null;
}

//Task for the queue
private class PhotoToLoad
{
    public String url;
    public ImageView imageView;
    public PhotoToLoad(String u, ImageView i){
        url=u; 
        imageView=i;
    }
}

class PhotosLoader implements Runnable {
    PhotoToLoad photoToLoad;
    PhotosLoader(PhotoToLoad photoToLoad){
        this.photoToLoad=photoToLoad;
    }

    @Override
    public void run() {
        try{
            if(imageViewReused(photoToLoad))
                return;
            Bitmap bmp=getBitmap(photoToLoad.url);
            memoryCache.put(photoToLoad.url, bmp);
            if(imageViewReused(photoToLoad))
                return;
            BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
            Activity a=(Activity)photoToLoad.imageView.getContext();
            a.runOnUiThread(bd);
        }catch(Throwable th){
            th.printStackTrace();
        }
    }
}

boolean imageViewReused(PhotoToLoad photoToLoad){
    String tag=imageViews.get(photoToLoad.imageView);
    if(tag==null || !tag.equals(photoToLoad.url))
        return true;
    return false;
}

//Used to display bitmap in the UI thread
class BitmapDisplayer implements Runnable
{
    Bitmap bitmap;
    PhotoToLoad photoToLoad;
    public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
    public void run()
    {
        if(imageViewReused(photoToLoad))
            return;
        if(bitmap!=null)
            photoToLoad.imageView.setImageBitmap(bitmap);
        else
            photoToLoad.imageView.setImageResource(stub_id);
    }
}

public void clearCache() {
    memoryCache.clear();
    fileCache.clear();
}

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:58:37.903

试试这个 。

```
<ImageView
 android:id="@+id/image"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:src="@drawable/stub" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T12:33:55.897

这解决了我的问题

```
<ImageView
    android:id="@+id/image"
    android:layout_width="fill_parent"
    android:layout_height="800dp"
    android:scaleType="fitXY"
    android:src="@drawable/stub" /> 
```

# .net - 应用程序未在 WCF swrvice 中调用函数

> ID：14848446
> 
> 赞同：0
> 
> 时间：2013-02-13T07:26:30.220
> 
> 标签：.net, wpf, wcf, wcf-binding, wcf-security

我们有一个 WCF 服务，它提供有关已安装应用程序版本的详细信息。这个 WCF 服务安装在不同的机器上。我们的应用程序调用所有机器的 WCF 服务并检查所有机器上的版本。为了检查函数是否正在调用，我们添加了一个代码，将一些信息记录到一个文本文件中。但是当我们用我们的应用程序调用 WCF 函数时，没有日志被写入该文本文件。我们的假设是防火墙阻止应用程序访问服务，因此它不会进入该功能。我们也无法在该机器上关闭防火墙。因此，我们在防火墙中添加了一条入站规则，其中 TCP 作为协议，808 作为端口号。

请有人帮助我，如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:22:04.857

1.  我建议最初运行您在自己的机器上创建的服务，以确保该服务受到打击。您也可以在您的服务正在运行的端口上“附加进程”，以检查您的应用程序到服务调用是否成功。

2.  如果是，那么下一步是在另一台机器上设置服务并确保端点在您的应用程序中是否正确。请求您将远程机器的服务端点，并在运行应用程序的机器中进行检查。

3.  如果这也运行良好，那么只需禁用两台机器上的防火墙并尝试。

请让我知道它在哪一步失败，以便我们更好地指导您。

# actionscript-3 - 如何在 flex 4 中动态地使用数据网格的标题文本填充组合框？

> ID：14848449
> 
> 赞同：0
> 
> 时间：2013-02-13T07:26:34.943
> 
> 标签：actionscript-3, apache-flex, flex4

在单击填充我的数据网格时，我有一个“获取数据”按钮。我想同时用数据网格的列名填充组合框。在生成调用时，结果将存储在最后一个结果中，然后我将其存储到数组中。

```
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.controls.Alert;
        import mx.events.FlexEvent;
        import mx.events.ListEvent;
        import mx.rpc.events.ResultEvent;

        import services.ServiceManager;

        import spark.events.IndexChangeEvent;

        [Bindable] public var ArrColl_selectOptionComboBox:ArrayCollection = new ArrayCollection;
        [Bindable] public var SelectOption:ArrayCollection = new ArrayCollection;

        [Bindable] public var mainArrColl:ArrayCollection = new ArrayCollection;
        [Bindable] public var DGDataProvider:ArrayCollection = new ArrayCollection;
        [Bindable] public var DGDataProvider1:ArrayCollection = new ArrayCollection;

        public function clear():void
        {
            DGDataProvider = new ArrayCollection;
        }

        //clicking on the Get Data button to retrieve from the Jiraissue
        protected function button_clickHandler(event:MouseEvent):void
        {
            getAllJiraissueResult2.token=jiraissueService1.getAllJiraissue();

        }

        protected function getAllJiraissueResult2_resultHandler(event:ResultEvent):void
        {
            mainArrColl = getAllJiraissueResult2.lastResult as ArrayCollection;
            DGDataProvider = mainArrColl;

        }

    //protected function Combobox_Option_changeHandler(event:ListEvent):void
        //{

                //myLabel.text = "You selected: " +  ComboBox(event.target).selectedItem.label;

                    //Value.prompt="Select Value";
                    //Value.selectedIndex=-1; // reset so prompt shows

        //}

        ]]>

</fx:Script>

<fx:Declarations>
    <jiraissueservice1:JiraissueService1 id="jiraissueService1" fault="Alert.show(event.fault.faultString + '\n' + event.fault.faultDetail)" showBusyCursor="true"/>
    <s:CallResponder id="getAllJiraissueResult2" result="getAllJiraissueResult2_resultHandler(event)"/>

    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:Button x="59" y="49" label="GET DATA"  id="button" click="button_clickHandler(event)"/>
<mx:DataGrid x="60" y="299" width="800" id="dataGrid" dataProvider="{DGDataProvider}">
    <mx:columns>

        <mx:DataGridColumn headerText="pkey" dataField="pkey"/>
        <mx:DataGridColumn headerText="PROJECT" dataField="pname"/>
        <mx:DataGridColumn headerText="CREATED" dataField="CREATED"/>
        <mx:DataGridColumn headerText="defectType" dataField="stringvalue"/>
        <mx:DataGridColumn headerText="Reporter" dataField="REPORTER"/>
        <mx:DataGridColumn headerText="ASSIGNEE" dataField="ASSIGNEE"/>
        <mx:DataGridColumn headerText="SLA" dataField="SLA"/>

    </mx:columns>
</mx:DataGrid>

<s:Button x="214" y="49" label="RESET" click="clear()"/>
<s:Button x="557" y="168" label="Button"/>

<mx:ComboBox id="Combobox_Option" width="201"   dataProvider="{SelectOption}" labelField="label" 
                prompt="Select Option"
                 x="59" y="169"/>
<mx:ComboBox id="Value" width="201"  labelField="label" 
                prompt="Select Value" dataProvider="{DGDataProvider1}"
                 x="308" y="169"/>
<s:Label id="myLabel" text="You selected:" fontWeight="bold" x="59" y="275"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:09:58.567

如果我正确理解了您的问题，您只想在获取数据后使用 datagrid 的列名填充您的组合框。如果是这样，您可以使用网格的“列”属性作为组合框的数据提供者。“labelField”属性应设置为“headerText”。清除网格后，将 cb 的 dataprovider 设置为 null。

这是一个简单的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           minWidth="955" minHeight="600">
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.events.CollectionEvent;

        [Bindable]private var dp:ArrayCollection = new ArrayCollection([
            {artist:"Pavement",         album:"Slanted and Enchanted",  year:"2010",    price:39.1},
            {artist:"ABBA",             album:"Ring Ring",              year:"1973",    price:45.2},
            {artist:"The Betles",       album:"Please Please Me",       year:"1963",    price:29.1}]);

        private function onBtnLoad():void
        {
            myGrid.dataProvider = dp;

            cbCategories.dataProvider = myGrid.columns;
            cbCategories.labelField = "headerText";
        }

        private function onBtnReset():void
        {
            myGrid.dataProvider = null;

            cbCategories.selectedIndex = -1;
            cbCategories.dataProvider = null;
        }

    ]]>
</fx:Script>

<s:VGroup x="70" y="50">
    <s:DataGrid id="myGrid" width="420" height="100" >   
        <s:columns>
            <s:ArrayList>
                <s:GridColumn dataField="artist"    headerText="Artist's name" width="150"/>
                <s:GridColumn dataField="album"     headerText="Album"/>
                <s:GridColumn dataField="year"      headerText="Year" width="50"/>
                <s:GridColumn dataField="price"     headerText="Price" width="50"/>
            </s:ArrayList>
        </s:columns>       
    </s:DataGrid> 

    <s:HGroup>
        <s:Button id="btnLoad" label="Load Data" click="onBtnLoad()"/>
        <s:Button id="btnReset" label="Reset" click="onBtnReset()"/>
    </s:HGroup>

    <s:HGroup verticalAlign="bottom">
        <s:Label text="Categories:" width="70"/>
        <s:ComboBox id="cbCategories"/>
    </s:HGroup>
</s:VGroup>

</s:Application> 
```

# jaxb - 使用 eclipselink 解组为单个类

> ID：14848450
> 
> 赞同：1
> 
> 时间：2013-02-13T07:26:41.423
> 
> 标签：jaxb, eclipselink, moxy

我创建了一个使用编组生成如下 xml 的**Company**类：

```
<?xml version="1.0" encoding="UTF-8"?>
<ns2:company  xmlns:ns2="http://www.example.com/">
   <ns2:employee>
      <job>sogi</job>
      <name>togi</name>
      <age>22</age>
   </ns2:employee>
</ns2:company> 
```

**注意：我在Company**类中使​​用了 @XmlPath("employee/job/text()") 标记来获取所需的路径。

但是当我使用相同的**公司**类解组时，我没有得到正确的对象值。相反，我得到了空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:13:24.550

您需要在`@XmlPath`注释中包含命名空间信息。

**包信息**

由于您的 XML 文档具有命名空间限定，您将需要利用包级别`@XmlSchema`注释来指定命名空间信息。

```
@XmlSchema(
    namespace="http://www.example.com/",
    xmlns={
        @XmlNs(namespaceURI = "http://www.example.com/", prefix = "foo")
    }
)
package forum14848450;

import javax.xml.bind.annotation.*; 
```

**公司**

在`@XmlPath`命名空间限定的 XmlPath 片段的映射中，您需要利用您在`@XmlSchema`注释上定义的前缀。

```
package forum14848450;

import javax.xml.bind.annotation.XmlRootElement;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement
public class Company {

    @XmlPath("foo:employee/job/text()")
    private String employeeJob;

    @XmlPath("foo:employee/name/text()")
    private String employeeName;

    @XmlPath("foo:employee/age/text()")
    private int employeeAge;

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅： [http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

下面的演示代码将从您的问题中解组文档，然后将其编组回 XML。

```
package forum14848450;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Company.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14848450/input.xml");
        Company company = (Company) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(company, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出。请注意输出文档如何使用`@XmlPath`注释中定义的前缀。

```
<?xml version="1.0" encoding="UTF-8"?>
<foo:company xmlns:foo="http://www.example.com/">
   <foo:employee>
      <job>sogi</job>
      <name>togi</name>
      <age>22</age>
   </foo:employee>
</foo:company> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/09/xpath-based-mapping-geocode-example.html](http://blog.bdoughan.com/2010/09/xpath-based-mapping-geocode-example.html)

# vb.net - 如何防止 vb.net 桌面应用程序中的复选框更改事件

> ID：14848452
> 
> 赞同：2
> 
> 时间：2013-02-13T07:26:59.870
> 
> 标签：vb.net

我的 vb.net 桌面应用程序中有一个复选框，在检查更改事件时我正在执行一些操作。我希望在页面加载时检查更改事件不应该触发，它会在 gui 上显示 checkbox.checked。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:31:40.957

无论出于何种原因，Windows 有时会在表单加载期间触发一个事件。正如您可能已经注意到的那样，这真的很烦人。根据微软的说法，这是“设计使然”。

您可以将变量（全局或静态）初始化为 true，例如名为“Loading”的布尔值。然后，在表单显示事件中将其重置为 false。在事件处理程序的开头，检查该变量并在 Loading 为真时退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:43:19.813

`CheckBox`每次复选框更改状态时，您都可以使用 100% 安全的 Click 事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:35:32.493

我打赌您正在创建复选框，然后您将其设置为选中。你应该创建它已经检查。

如果您发布代码如何创建该复选框并将其设置为真，那就太好了。

# vim - 如何显示最后在 vim 中执行的命令？

> ID：14848454
> 
> 赞同：4
> 
> 时间：2013-02-13T07:27:02.540
> 
> 标签：vim, grep

有时当我写错剧本时，我真的不知道为什么它没有达到预期的效果。例如，以下脚本：

```
nnoremap gr :call Look_For_String()<CR><C-L>
function! Look_For_String()
    exe "grep -R " . expand("<cword>") . &dir
endfunction 
```

该功能是在目录中搜索光标下的当前单词`&dir`，但它没有按预期进行。所以我想知道它执行了什么命令。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T07:47:18.857

在这种情况下，我会做的是替换`:execute`with `:echomsg`，重新获取脚本 ( `:so %`)，然后重新执行。

对于更复杂的情况，您可以设置该`'verbose'`选项。值为 时`15`，将打印每个 Ex 命令。由于显示通常会干扰脚本的功能，因此通常建议也通过设置将诊断输出重定向到文件`'verbosefile'`。

# c# - 如何使用 itextsharp(pdfstamper) 将数字字段右对齐

> ID：14848457
> 
> 赞同：1
> 
> 时间：2013-02-13T07:27:30.687
> 
> 标签：c#, pdf, alignment, itextsharp

请参考我在pdf上写值的代码。但我想将数字字段向右对齐。
是否有任何属性/方法。我正在使用此属性`PdfFormField.MK_CAPTION_RIGHT`，但它不起作用。

```
var pdfReader = new PdfReader(outputPath);
string fontsfolder1 = @"D:\ItextSharp\Fonts\acmesab.TTF";
var pdfStamper1 = new PdfStamper(pdfReader, new FileStream(outputPath3, FileMode.Create));
BaseFont customfont1 = BaseFont.CreateFont(fontsfolder, BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
   AcroFields af = pdfStamper1.AcroFields;
   List<BaseFont> list1 = new List<BaseFont>();
   list.Add(customfont1);
   iTextSharp.text.Font bold1 = new iTextSharp.text.Font(customfont1, 6, 0, BaseColor.BLACK);
   af.SubstitutionFonts = list;
   foreach (var field1 in af.Fields)
   {
            af.SetFieldProperty(field1.Key, "textalignment", PdfFormField.MK_CAPTION_RIGHT, null);
     af.SetField(field1.Key, "123");
   }
     pdfStamper1.FormFlattening = false;
     pdfStamper1.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:48:54.160

我不知道如何使用 ItextSharp 属性直接执行此操作。但一种方法是在内容左侧添加空格，为此您可以获得字段长度并根据内容的长度和长度，您可以计算要添加到内容左侧的空格。它会自动将您的内容放在PDF字段的右侧。希望这种方式可以帮助您解决问题...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:56:29.067

您可以使用带有对齐参数的 ShowTextAligned 方法对齐文本，如下所示：

```
cb.ShowTextAligned(PdfContentByte.ALIGN_LEFT,"Text is left aligned",200,800,0);
cb.ShowTextAligned(PdfContentByte.ALIGN_RIGHT,"Text is right aligned",200,788,0); 
```

cb 在哪里`PdfContentByte`

[详情](http://www.c-sharpcorner.com/UploadFile/f2e803/basic-pdf-creation-using-itextsharp-part-ii/)

# iphone - 如何在xcode中查找mapview的经度和纬度？

> ID：14848458
> 
> 赞同：0
> 
> 时间：2013-02-13T07:27:33.853
> 
> 标签：iphone, objective-c, xcode4.5

在我的应用程序中，当我单击地图并知道该点的经度和纬度时，我需要首先固定注释，在经度和纬度之后，我只想在一个标签上打印，告诉我该怎么做？

我尝试了以下代码，但没有帮助。

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation 
  { 
    static NSString *identifier = @"MyLocation";
    if ([annotation isKindOfClass:[PlaceMark class]]) {

    MKPinAnnotationView *annotationView = (MKPinAnnotationView *) [myMapView dequeueReusableAnnotationViewWithIdentifier:identifier];
    if (annotationView == nil) {
        annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
    } else {
        annotationView.annotation = annotation;
    }

    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;

    return annotationView;
  }

  return nil; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:35:48.500

从这里你可以得到注释的纬度和经度

获得纬度使用这个

```
[[[view annotation] coordinate].latitude 
```

像这样的经度

```
 [[[view annotation] coordinate]. longitude 
```

# asp.net - 为什么 Telerik 控件的一些 WebResource.axd 文件最初没有加载？

> ID：14848464
> 
> 赞同：5
> 
> 时间：2013-02-13T07:28:20.770
> 
> 标签：asp.net

我的页面上有一些 Telerik 控件。当我第一次运行这个页面时，一些 WebResource.axd 文件没有加载。它显示 404 Not Found 错误。但是当我刷新我的页面几次时，丢失的文件来了，其他一些 WebResource.axd 显示 404 Not Found 错误。我检查了 web.config 中的 httpHandlers，它是正确编写的。

这是我的屏幕剪辑：-

![在此处输入图像描述](../Images/727a29956e68b8419cae27eed83037b1.png)

在其他选项卡中： -

![在此处输入图像描述](../Images/f7a34fd00045ab7359aabd614a331b87.png)

刷新几次后：-

![在此处输入图像描述](../Images/ac4f5e25a6e44c4bd8877202afb93ff8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:50:58.227

您是否在主布局文件中合并并压缩 Telerik javascript？如果是这样，您可以分享那段代码吗？

它应该类似于；

```
Html.Telerik().ScriptRegistrar()
    .Scripts(scripts => scripts
    .AddGroup("CalendarGroup", group =>group
        .Add("telerik.common.min.js")
        .Add("telerik.calendar.min.js")
        .Add("telerik.datepicker.min.js")
        .Combined(true)
        .Compress(true) 
```

您应该添加您在应用程序中使用的 Telerik 控件所需的所有 javascript。（**假设**：正在使用 Telerik MVC）

# wpf - 发生未捕获的异常时，如何向 NBug 添加自定义处理？

> ID：14848465
> 
> 赞同：2
> 
> 时间：2013-02-13T07:28:21.760
> 
> 标签：wpf, nbug

我们已经开始在我们的 WPF 应用程序中使用 NBug v1.1.1，并且希望在检测到未捕获的异常时包含来自正在运行的应用程序的一些附加信息。

根据在这个问题[NBug 文档](https://stackoverflow.com/questions/12253051/nbug-documentation)中找到的文档 ，“NBug.Settings”类应该包含一个静态事件“ProcessingException”，但我在引用的程序集中找不到它（通过 nuget 包含）。

'N Bug' 中是否有这样的事件？是不是被搬走了？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:57:39.113

是的，该事件已添加到最新的源代码中。您可以从 codeplex 下载并自行编译。您还可以在源代码中的 XML 文档中阅读有关该事件的信息（在`NBug.Settings`课堂上）

# web-services - 如何在 Web 服务调用中输入凭据（授权对象）？

> ID：14848470
> 
> 赞同：4
> 
> 时间：2013-02-13T07:28:47.940
> 
> 标签：web-services, matlab, soap, wsdl

我遵循了[这里提供](https://stackoverflow.com/questions/14532299/how-to-design-a-soap-call-in-matlab)的建议，它就像一个魅力。现在，我正在连接到服务器并调用名为*GetFunctionalityTest*的方法。它的唯一输入是一个字符串，可以在*GetFunctionalityTest.m*文件中看到。到目前为止，一切都很好。

然后我尝试调用名为 GetSections 的真实服务*，*根据文件*GetSections.m*其签名如下。

```
function GetSectionsResult = GetSections(obj,auth)
% GetSections(obj,auth)
% Input: auth = (Authorize)
% Output: GetSectionsResult = (ArrayOfString)

values = { auth, };
names = { 'auth', };
types = { '{WSPro.HostingWebservice}Authorize', };

soapMessage = createSoapMessage( ...
  'WSPro.HostingWebservice', ...
  'GetSections', values,names,types,'document');
response = callSoapService( obj.endpoint, ...
  'WSPro.HostingWebservice/GetSections', soapMessage);
GetSectionsResult = parseSoapResponse(response); 
```

服务器提供的定义如下。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi=...>
  <soap:Body>
    <GetSections xmlns="WSPro.HostingWebservice">
      <auth>
        <uid>string</uid>
        <pw>string</pw>
      </auth>
    </GetSections>
  </soap:Body>
</soap:Envelope> 
```

我的问题是我无法指定授权语法。据我了解，它应该以**某种方式**由两个字符串组成，但我还没有让它工作。我试图将它们组合如下。

```
myAuthorization = ['user', 'pass'];
myAuthorization = {'user', 'pass'};
myAuthorization = ['user' 'pass'];
myAuthorization = {'user' 'pass'}; 
```

没有任何帮助。我刚收到一堆错误。

> 使用 callSoapService 时出错（第 147 行）
> 未指定故障：SOAP 故障：服务器无法处理请求。
> ---> 参数化查询
> '(@uid nvarchar(99)) SELECT PassW FROM UserData WHERE UserId = @' 需要未提供的参数 '@uid'。

我浏览了为我自动创建的所有文件，并且没有*Authorize* not *ArrayOfString*的定义。我猜这是服务器定义的东西，因为我在 MatLab 文档中没有得到任何点击。

1.  如何指定授权凭据？
2.  我在哪里可以查看 MatLab 如何映射*Authorization*？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-03T06:51:10.843

如上所述：

> SOAP 身份验证通过 SOAP 标头而不是 SOAP 正文进行。此链接可能会让您了解 SOAP XML 在身份验证的情况下应该如何看待：

[Web服务soap头认证](https://stackoverflow.com/questions/2998480/1113772)

# cygwin - cygwin：我无法创建名为“daz”的文件

> ID：14848474
> 
> 赞同：0
> 
> 时间：2013-02-13T07:29:08.780
> 
> 标签：cygwin, filenames

我不知道问题可能是什么，但我无法命名文件“daz”，当我在系统上执行 ls 时，文件名变为：X~=@l9q5

有谁知道为什么那个特定的文件名会这样做？

# c# - 从 Fiddler 将图像发布到 WCF 服务

> ID：14848478
> 
> 赞同：2
> 
> 时间：2013-02-13T07:29:15.393
> 
> 标签：c#, asp.net, wcf, web-services, fiddler

我一直致力于 WCF 服务。我有一个接受一些参数的服务，包括 Image. 这是我的请求 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<GPProcess xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
   <Action>
      <Device />
      <GenopalAuthorization />
      <P1x>0</P1x>
      <P1y>0</P1y>
      <P2x>0</P2x>
      <P2y>0</P2y>
      <PalletName />
      <Picture i:nil="true" />
      <PictureShare>false</PictureShare>
      <PictureURL />
   </Action>
</GPProcess> 
```

问题是，我想在 Fiddler 上测试这个 Web 服务。我需要帮助，如何通过 Fiddler 将图像发布到 Web 服务？内容类型应该是什么？

最好的祝福

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:36:38.147

最好创建一个代理类来调用您的服务并构建一个使用该代理的简单客户端。然后，您可以使用 Fiddler 监控客户端和服务之间的流量...

# iphone - 如何像 iPhone 的默认电话应用程序那样实现电话动画？

> ID：14848480
> 
> 赞同：0
> 
> 时间：2013-02-13T07:29:18.563
> 
> 标签：iphone, animation

我的应用程序有 VOIP 呼叫。我想实现当用户点击拨号盘上的通话按钮和结束通话按钮上完成的动画时 iPhone 的默认电话应用程序所做的动画。

我对此进行了很多研究，但还没有找到任何东西。对此主题的任何帮助将不胜感激。

现在我已经实现了如下缩放动画：

```
- (void)animateFadingOut{

    self.view.transform = CGAffineTransformMakeScale(1.00, 1.00);
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationDelegate:self];

    [self performSelector:@selector(push) withObject:nil afterDelay:0.35];
    self.view.transform = CGAffineTransformMakeScale(0.00, 0.00);
    //set transformation
    [UIView commitAnimations];

}

- (void)push
{
    self.view.transform = CGAffineTransformMakeScale(1.00, 1.00);
    // push navigation controloller
    CallViewController *objCallViewController = [[CallViewController alloc] initWithNibName:@"CallViewController_iPhone" bundle:nil];
    [self setHidesBottomBarWhenPushed:YES];

    [self.navigationController pushViewController:objCallViewController animated:NO];
    [objCallViewController release];
    [self setHidesBottomBarWhenPushed:NO];
    [[AppDelegate shared] setTabHidden:TRUE];

} 
```

但是它并没有给我默认电话应用程序具有的确切动画

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:08:25.087

如果我尝试创建动画，这就是我可能会尝试的方法。

```
CGRect movementFrame = self.view.frame;
//Make position and size changes as needed to frame
movementFrame.origin.x = 0;

[UIView animateWithDuration:0.5
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseOut
                 animations:^{

                     /*
                       Animation you want to commit go here
                       Apply movementFrame info to the frame
                       of the item we want to animate
                     */

                     //If you wanted a fade
                     self.view.alpha = !self.view.alpha //Simply says I want the reverse.

                     self.view.frame = movementFrame;

                     //Example of what you could do.

                     self.view.transform =CGAffineTransformMakeScale(1.00, 1.00);

                 } completion:^(BOOL finished) {
                     //Things that could happen once the animation is finished
                     [self push];
                 }]; 
```

这尚未针对您的情况进行测试。因此，我也不确定它是否会帮助你，但希望它会。祝你好运。

*编辑*

所以我在 iPhone 上查看了动画，在我看来它是一系列同时发生的动画。

*   你有我认为的 UIActionSheet 动画。*   顶部覆盖在其 y 轴上滑动。*   然后你有，我还没有掌握，在后视图中的一个分裂，它在相反的方向上动画它的 x 轴，导致分裂。*   最后，您可以放大新视图以获取效果。

    我不能说他们是如何做到的 100%，但是如果我要尝试重新创建它，我可能会从这里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:01:38.310

您好，所以在快速制作动画后，我已经非常接近它可以使用一些调整。我花了三个视图来做一个 `topView, bottomView, and backView.` 还考虑到您将要加载的视图。`viewToLoadIn`

`-（无效）动画{

```
CGRect topMovementFrame = self.topView.frame; //Set dummy frame to modify 
CGRect bottomViewFrame = self.bottomview.frame;
topMovementFrame.origin.y = 0 - self.topView.frame.size.height; //modify frame's yAxis so that the frame sits above the screen.
bottomViewFrame.origin.y = self.view.frame.size.height; //modify frame's yAxis to the it will sit at the bottom of the screen.

[self.viewToLoadIn setFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

[UIView animateWithDuration:0.5
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseOut
                 animations:^{
                     //Animation
                     self.topView.frame = topMovementFrame; //Commit animations
                     self.bottomview.frame = bottomViewFrame;
                     self.backView.alpha = !self.backView.alpha;
                     self.backView.transform = CGAffineTransformMakeScale(100, 100);
                     self.viewToLoadIn.transform = CGAffineTransformMakeScale(2.0, 3.0);

                      *MAGIC*
                 } completion:^(BOOL finished) {
                     //Completion
                     //Clean up your views that you are done with here.
                 }]; 
```

}`

所以当他们按下我设置的按钮时，这个动画就会发生。

Also at first I thought that the setup might contain a `UIActionStyleSheet`. which it still might but this is a pretty handy built in functionality. But the fact that you can interact with the screen lead me to think a custom view. It would be easier in my opinion.

I hope this helps you even if it just a little bit. Take care ^^

# javascript - 寻找一种更有效的方式来编写这个 Javascript

> ID：14848481
> 
> 赞同：2
> 
> 时间：2013-02-13T07:29:24.413
> 
> 标签：javascript, html, css, dom-events, event-listener

有没有更好的方法让我写`toggleFullscreen()`. 我在每个浏览器上重复样式规则，这似乎非常不必要。

```
function toggleFullScreen() {   
  var elem = document.getElementById("video_container");
  var db = document.getElementById("defaultBar"); 
  var ctrl = document.getElementById("controls");

  if (!document.fullscreenElement &&    // alternative standard method
      !document.mozFullScreenElement && !document.webkitFullscreenElement) {  // current working methods
    if (document.documentElement.requestFullscreen) {
          db.style.background ='red';
          ctrl.style.width = '50%';
          ctrl.style.left = '25%';
          elem.requestFullscreen();
        } else if (document.documentElement.mozRequestFullScreen) {
          db.style.background ='red';
          ctrl.style.width = '50%';
          ctrl.style.left = '25%';
          elem.mozRequestFullScreen();
        } else if (document.documentElement.webkitRequestFullscreen) {
          db.style.background ='red';
          ctrl.style.width = '50%';
          ctrl.style.left = '25%';
          elem.webkitRequestFullscreen();
        }
  } else if (document.exitFullscreen) {
        db.style.background ='yellow';
        ctrl.style.width = '100%';
        ctrl.style.left = '0';        
        document.exitFullscreen();
        }
        else if (document.mozCancelFullScreen) {
        db.style.background ='yellow';
        ctrl.style.width = '100%';
        ctrl.style.left = '0'; 
        document.mozCancelFullScreen();
        }
        else if (document.webkitCancelFullScreen) {
        db.style.background ='yellow';
        ctrl.style.width = '100%';
        ctrl.style.left = '0';
        document.webkitCancelFullScreen();
        } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T07:33:37.453

> 页面加载后立即应用 out of fullScreen 样式规则。

那是因为这段代码：

```
full.addEventListener('click', toggleFullScreen(), false); 
```

If 立即执行`toggleFullScreen()`并将返回值传递给`addEventListener`而不是。代码可能应该是：

```
full.addEventListener('click', toggleFullScreen, false); 
```

此代码传递对函数的引用而不是其返回值。

**重构**

通过使用`||`运算符，您可以大大简化现有条件。

```
var fullScreenElement = document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement;

if (fullScreenElement) {
  var requestFullScreen = document.documentElement.requestFullscreen || document.documentElement.mozRequestFullScreen || document.documentElement.webkitRequestFullscreen

  db.style.background ='red';
  ctrl.style.width = '50%';
  ctrl.style.left = '25%';
  requestFullScreen.call(elem);
} else {
  var exitFullScreen = document.exitFullscreen || document.mozCancelFullScreen || document.webkitCancelFullScreen;

  db.style.background ='yellow';
  ctrl.style.width = '100%';
  ctrl.style.left = '0';        
  exitFullScreen.call(document);
} 
```

# ruby - Object#method 和 Object#methods 之间似乎不一致

> ID：14848482
> 
> 赞同：1
> 
> 时间：2013-02-13T07:29:32.730
> 
> 标签：ruby, sinatra

我认为这个 irb 会议最好地抓住了我的问题：

```
irb(main):001:0> require 'sinatra'
=> true
irb(main):002:0> method(:get)
=> #<Method: Object(Sinatra::Delegator)#get>
irb(main):003:0> methods.include?(:get)
=> false
irb(main):004:0> wtf?
NoMethodError: undefined method `wtf?' for main:Object
        from (irb):4
        from C:/Ruby193/bin/irb:12:in `<main>'
irb(main):005:0> 
```

我的问题，这真的是一个红宝石而不是一个特定于 sinatra 的问题，是如何在不包含在其返回的数组中的 `method(:get)`情况下返回一些东西？`methods``:get`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:56:23.547

好的。这有点让人头疼，但最终答案可以在 的[文档中`methods`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-methods)找到，其中说：

> 返回obj的**公共和受保护方法的名称列表。**这将包括 obj 的祖先中可访问的所有方法。

然后将它与 Sinatra 源结合起来：

```
module Delegator
  def self.delegate(*methods)
    methods.each do |method_name|
      define_method(method_name) do |*args, &block|
        ...
      end
      private method_name    # <- here
    end
  end

  delegate :get, :patch, :put, :post, :delete, :head, :options, ... 
end 
```

我们可以看到问题所在。那么解决方案就变成了：

```
private_methods.include?(:get)
=> true 
```

# solr - Tika 1.2 PDF 解析错误 - org.apache.pdfbox.cos.COSString 无法转换为 org.apache.pdfbox.cos.COSDictionary

> ID：14848487
> 
> 赞同：0
> 
> 时间：2013-02-13T07:29:48.300
> 
> 标签：solr, solrj, pdfbox, apache-tika

我将 Solr 4.0 和 DIH（数据导入处理程序）与 TikaProcessor 一起用于从存储在数据库中的 PDF 文件中提取文本。当我运行索引时，它无法解析一些 PDF 文件并得到下面提到的堆栈跟踪。

由于 Solr 4.0 使用 Tika 1.2，我编写了一个单元测试来使用 Tika 1.2 API 解析相同的 PDF 文件，我得到了同样的错误。

Tika 1.3 jars 也有同样的问题。但是当我尝试使用 Tika 1.1 jar 时，它工作正常。如果你们中有人看到这个错误，请告诉我，如何解决这个问题？

（我在 tika 邮件列表中发布了相同的内容，但运气不佳）

当我打开 PDF 文件时，它显示 PDF/A 模式。不确定这是否与问题有关。

这是一个例外：

```
org.apache.tika.exception.TikaException: Unexpected RuntimeException from org.apache.tika.parser.pdf.PDFParser@1fbfd6<mailto:org.apache.tika.parser.pdf.PDFParser@1fbfd6>
      at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:244)
      at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:242)
      at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:120)
      at com.pc.TikaWithIndexing.main(TikaWithIndexing.java:53)
Caused by: java.lang.ClassCastException: org.apache.pdfbox.cos.COSString cannot be cast to org.apache.pdfbox.cos.COSDictionary
      at org.apache.pdfbox.pdmodel.interactive.annotation.PDAnnotationLink.getAction(PDAnnotationLink.java:93)
      at org.apache.tika.parser.pdf.PDF2XHTML.endPage(PDF2XHTML.java:148)
      at org.apache.pdfbox.util.PDFTextStripper.processPage(PDFTextStripper.java:444)
      at org.apache.pdfbox.util.PDFTextStripper.processPages(PDFTextStripper.java:366)
      at org.apache.pdfbox.util.PDFTextStripper.writeText(PDFTextStripper.java:322)
      at org.apache.tika.parser.pdf.PDF2XHTML.process(PDF2XHTML.java:66)
      at org.apache.tika.parser.pdf.PDFParser.parse(PDFParser.java:153)
      at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:242)
      ... 3 more 
```

这是JAVA中的代码片段：

```
 String fileString = "C:/Bernard A J Am Coll Surg 2009.pdf";
 File file = new File(fileString );
 URL url = file.toURI().toURL();

 ParseContext context = new ParseContext();;
 Detector detector = new DefaultDetector();;
 Parser parser =  new AutoDetectParser(detector);;
 Metadata metadata = new Metadata();
 context.set(Parser.class, parser); //PPt,word,xlsx-- pdf,html
 ByteArrayOutputStream outputstream = new ByteArrayOutputStream();
 InputStream input = TikaInputStream.get(url, metadata);
 ContentHandler handler = new BodyContentHandler(outputstream);
 parser.parse(input, handler, metadata, context);

 input.close();
 outputstream.close(); 
```

# asp.net - 如何在地址栏中找到任何随机值，当我们重定向到错误页面时

> ID：14848488
> 
> 赞同：0
> 
> 时间：2013-02-13T07:29:52.567
> 
> 标签：asp.net

我们已经在我们的应用程序中设置了错误页面。当我们键入任何没有 .aspx 扩展名的字符串 时，它会重定向到错误页面，例如：http: [//www.demo.com/typeany](http://www.demo.com/typeany)当我们输入任何随机值时，它会重定向到错误页面和错误页面（[http://www.demo .com/typeany](http://www.demo.com/typeany) ) url 显示在地址栏中。现在我想在错误页面中获取 typeany 字符串。我试图获取，但当前 url 显示（Error.aspx），无法获取随机值。

谢谢：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T06:33:41.040

你可以试试

> 字符串 apppath = Server.HtmlEncode(Request.RawUrl);
> 
> string dummypath = apppath.Replace("/ErrorPage.aspx?aspxerrorpath=/", "");

# java - java如何实现finally块

> ID：14848489
> 
> 赞同：1
> 
> 时间：2013-02-13T07:29:55.220
> 
> 标签：java, exception, try-catch-finally, finally

我进行了很多搜索以找到 java 实现者对**finally 块**的实现。

我想知道java如何评估finally块。

有人知道finally块是如何用java语言定义的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:35:39.287

该实现将依赖于 JVM，但将遵循[JVM Specifications #3.13](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-3.html#jvms-3.13)。

`finally`在异常表中表现得像一个“包罗万象”，在字节码中有正确的重定向。

# php - Prestashop 中的内部联接查询

> ID：14848495
> 
> 赞同：0
> 
> 时间：2013-02-13T07:30:10.737
> 
> 标签：php, mysql, admin, prestashop, product

我想加入两个表并在 prestashop 后台显示另一个表中的数据。

> 目录 > 产品

我是新手，我想问一下如何在 prestashop 上插入或编码。

我有 2 张桌子：

*   `parts`: 不是`presta`来自其他网站的自定义表格。

* * *

```
parts
----------------------------
InvPartNo | InvPartDesc
#123      | testprod 
```

* * *

```
ps_products
----------------------------
Id | InvPartNo
1  | #123 
```

我想把它添加到(BO) |`InvPartDesc`中的产品列表的描述中 `Admin`目录 > 产品。

```
----------------------------
result
----------------------------
Id | InvPartNo | InvPartDesc
1  | #123      | testprod 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:35:38.970

像这样的东西应该工作

```
SELECT 
    ps_products.Id, ps_products.InvPartNo, parts.InvPartDesc, 
FROM ps_products
LEFT JOIN parts ON parts.InvPartNo=ps_products.InvPartNo
GROUP BY ps_products.Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T16:05:20.997

您的查询将是：

```
$query = Db::getInstance()->executeS(
            'SELECT p.Id, p.InvPartNo, pa.InvPartDesc, 
            FROM '._DB_PREFIX_.'products p 
            INNER JOIN parts pa ON (pa.InvPartNo=p.InvPartNo)'
         ); 
```

# ruby - 通过 sinatra 应用程序与小马一起发送文件 - 缺少文件

> ID：14848496
> 
> 赞同：1
> 
> 时间：2013-02-13T07:30:16.593
> 
> 标签：ruby, sinatra, pony

我想从我的 sinatra 应用程序中发送一封电子邮件。

这是代码：

```
 require 'pony'
    class Cms < Application

      get "/mail" do
        Pony.mail :to => 'to@gmail.com',
          :from => "from@gmail.com",
          :subject => "Thanks for signing my guestbook!",
          :via => :sendmail,
          :via_options => {
              :address     => 'smtp.gmail.com',
              :port     => '587',
              :user_name     => 'user@gmail.com',
              :pass     => 'pass',
              :enable_starttls_auto => false
          },
          :body => erb(:"cms/mail")
        redirect '/'
      end

    end` 
```

Thin 启动应用程序时没有错误，但是当我请求 myapp.local/mail 时出现错误：

```
 LoadError - no such file to load -- mail/network/delivery_methods/smtp:
        /var/lib/gems/1.8/gems/mail-2.4.4/lib/mail/configuration.rb:31:in lookup_delivery_method'
        /var/lib/gems/1.8/gems/mail-2.4.4/lib/mail/configuration.rb:25:in delivery_method'
        /var/lib/gems/1.8/gems/mail-2.4.4/lib/mail/mail.rb:111:in delivery_method'
        /var/lib/gems/1.8/gems/mail-2.4.4/lib/mail/message.rb:116:in initialize'
        /var/lib/gems/1.8/gems/mail-2.4.4/lib/mail/mail.rb:50:in new'
        /var/lib/gems/1.8/gems/mail-2.4.4/lib/mail/mail.rb:50:in new'
        /var/lib/gems/1.8/gems/pony-1.4/lib/pony.rb:174:in build_mail'
        /var/lib/gems/1.8/gems/pony-1.4/lib/pony.rb:138:in mail'
        ./app/controllers/cms.rb:8:in GET /mail' 
```

文件`/var/lib/gems/1.8/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb`存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-03T18:27:28.177

当我使用 Mail gem 的内联配置时，我遇到了同样的错误：

```
mail.delivery_method :sendmail
mail.deliver! 
```

删除第一行，并将配置移动到加载邮件 gem 后立即修复它。

无论在您的应用程序中的哪个位置，您都`require 'mail'`可以立即对其进行配置：

```
require 'mail'
Mail.defaults do
  delivery_method :sendmail
end 
```

更新：这工作了一段时间......但后来由于某种原因我开始看到这个错误： `rbenv/versions/1.8.7-p374/lib/ruby/gems/1.8/gems/mail-2.5.4/lib/mail/fields/common/common_address.rb:9:in `parse': no such file to load -- mail/elements/address_list (LoadError)`

Update2：故障似乎是随机发生的。Ruby 1.8.7-p374 中自动加载的工作方式导致它无法找到确实存在的文件。另外，我使用的是 slimgems 而不是 ruby​​gems。

到目前为止，这些是我必须实施的技巧，以便将 Mail 与多部分电子邮件和 sendmail 传递方法一起使用：

```
require 'mail'
require 'mail/network/delivery_methods/sendmail'
require 'mail/elements/address_list'
require 'mail/fields/common/common_address'
require 'mail/elements/content_type_element'
require 'mail/elements/address'
require 'mail/elements/content_transfer_encoding_element'

Mail.defaults do
  delivery_method :sendmail
end 
```

# api - Twitter Topsy API 结果

> ID：14848499
> 
> 赞同：1
> 
> 时间：2013-02-13T07:30:39.253
> 
> 标签：api, twitter, topsy

我们正在尝试分析 twitter Topsy API 以用于我们的应用程序的 twitter 搜索。结果返回 3 个日期，它们是：

```
a.) 'trackback_date'
b.) 'target_birth_date'
c.) 'firstpost_date' 
```

我需要提取推文的时间，不确定这些日期中的哪一个是指那个日期，它们是相同的还是在某些情况下可能不同。任何解释结果字段名称及其实际含义或至少对上述内容有所帮助的链接。

高度赞赏这方面的任何帮助

谢谢瓦巴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:07:28.147

您可能需要 trackback_date。

考虑推文： [https ://twitter.com/vipulved/status/314803292356096000](https://twitter.com/vipulved/status/314803292356096000)

如果您搜索“非本地平台”，Topsy API 将返回推文中共享的 gothick.org.uk URL。

结果的引用日期将是推文的日期。

target_birth_date 将是链接到 gothick.org.uk URL 的第一条推文的日期。这是创建链接时的代理。

# maven - 从 Maven Central 动态链接到最新的“jar-with-dependencies”

> ID：14848501
> 
> 赞同：4
> 
> 时间：2013-02-13T07:30:47.627
> 
> 标签：maven, nexus, sonatype, maven-central

我正在尝试使用[Maven 中央 API](http://search.maven.org/#api)为最新版本的工件提供动态下载链接。虽然这适用于普通 jar，但我似乎无法将其链接到工件的“jar-with-dependencies”版本。

使用`com.ning:nagios`神器，最新的可以在

[http://repository.sonatype.org/service/local/artifact/maven/redirect?r=central-proxy&g=com.ning&a=nagios&v=LATEST](http://repository.sonatype.org/service/local/artifact/maven/redirect?r=central-proxy&g=com.ning&a=nagios&v=LATEST)

我曾*假设*我可以使用`l`查询参数（基于链接的 API）来指定“jar-with-dependencies”分类器，但该链接仅下载普通 jar。

[http://repository.sonatype.org/service/local/artifact/maven/redirect?r=central-proxy&g=com.ning&a=nagios&v=LATEST&l=jar-with-dependencies](http://repository.sonatype.org/service/local/artifact/maven/redirect?r=central-proxy&g=com.ning&a=nagios&v=LATEST&l=jar-with-dependencies)

有没有办法链接到这个版本的工件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T10:10:24.820

事实证明分类器参数`'c'`用于重定向下载服务，而不是`'l'`在 Solr API 中使用（因为该 API`'c'`用于“类名”） - 所以这将起作用：

[https://search.maven.org/remote_content?g=com.ning&a=nagios&v=LATEST&c=jar-with-dependencies](https://search.maven.org/remote_content?g=com.ning&a=nagios&v=LATEST&c=jar-with-dependencies)

*（注意，在[Sonatype 将 BASIC auth 放在旧 url 上](https://twitter.com/JakeWharton/status/540439217600360448)后**更新**- 我们现在使用 maven.org 上的这个新的官方下载 url）*

它下载包含依赖项的 1.2MB jar（不是常规 jar）——当前最新版本是`nagios-0.0.2-jar-with-dependencies.jar`.

# javascript - 如何获取“SVG 路径”的数据值？

> ID：14848503
> 
> 赞同：0
> 
> 时间：2013-02-13T07:30:50.443
> 
> 标签：javascript, jquery, html, svg

我想提取数据`d="M75.5 299.5 111.5 299.5 111.5 311.5 75.5 311.5 z"`以在创建另一个元素时使用它。

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="670px" height="400px" style="position: relative; display: block; background-color: red;">
    <g>
        <path id="k19a56d40" data-model-id="k33d3f3bd" d="M75.5 299.5 111.5 299.5 111.5 311.5 75.5 311.5 z" stroke="#cc2900" stroke-width="1" stroke-linecap="square" stroke-linejoin="round" fill-opacity="1" stroke-opacity="1" fill="#FF3300"></path>
        <path id="k67a7e77a" data-model-id="k33d3f3bd" d="M75.5 299.5 111.5 299.5 111.5 311.5 75.5 311.5 z" stroke="#cc2900" stroke-width="1" stroke-linecap="square" stroke-linejoin="round" fill-opacity="1" stroke-opacity="1" fill="url(#kcd2b6a0)"></path>
    </g>
</svg> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:34:40.117

纯 JavaScript

```
function(pathElemId){
var path=document.getElementById(pathElemId);
return path.getAttribute("d")
} 
```

此函数为具有 pathElemId 的路径元素返回“d”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:32:08.657

使用这种方式：

```
$("#k19a56d40").attr("d"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:33:17.027

尝试这个：

```
$('svg').find('path').attr('d'); 
```

`.eq()`使用and找到第一个`.first()`：

```
$('svg').find('path').first().attr('d');
$('svg').find('path').eq(0).attr('d'); // <--change the index of your choice 
```

`.last()`如果您有两条路径，则可以使用。

# javascript - Javascript 时钟仅适用于嵌入代码？怎么会？

> ID：14848516
> 
> 赞同：0
> 
> 时间：2013-02-13T07:31:40.060
> 
> 标签：javascript, html

行。所以我正在学习如何制作时钟。去 W3schools 查看代码。现在我想从军事时间开始处理它等等。但我似乎无法让代码工作。当我获取代码并将其放入 JS 文件中时。我没有让代码运行。如果我将它作为嵌入的 HTML 放入它可以工作吗？我在这里做错了什么？

```
function startTime()
{
var today=new Date();
var h=today.getHours();
var m=today.getMinutes();
var s=today.getSeconds(); 
// add a zero in front of numbers<10
m=checkTime(m);
s=checkTime(s);
document.getElementById('txt').innerHTML=h+":"+m+":"+s;
t=setTimeout(function(){startTime()},500);
}

function checkTime(i)
{
if (i<10)
{
i="0" + i;
  }
return i;
} 
```

HTML如下

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">

<title>City Clock</title>
<link rel="stylesheet" href="clock.css">
</head>

<body>  
<h1> Austen's Clock</h1>

</head>

<body onload="startTime()">
<div id="txt"></div>
</body>
</html>

<script type="text/javascript" src="clock.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:35:36.293

移动`<script type="text/javascript" src="clock.js"></script>`到文档的头部

或者

像这样重写你的代码

```
window.onload = function  startTime() {..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:57:25.770

您已`<script>`在第一个结束`</html>`标记之后包含该标记 - 之后不应有任何其他元素，因此*应*忽略它们。

移动它，使其成为`</body>`标签内的最后一件事。

[FWIW，你的代码实际上在 MacOS X 上的 Chrome 和 Firefox*中*都对我有用。至少在 Chrome 中，`<script>`元素被浏览器自动移动到`</body>`标签内。]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:04:29.660

回顾之前的回复：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">

<title>City Clock</title>
<link rel="stylesheet" href="clock.css">
<script type="text/javascript" src="clock.js"></script>
</head>

<body onload="startTime()">

<h1> Austen's Clock</h1>
<div id="txt"></div>

</body>
</html> 
```

# grails - 将字符串传递给服务层中的 grailsApplication.config

> ID：14848525
> 
> 赞同：0
> 
> 时间：2013-02-13T07:32:33.023
> 
> 标签：grails, properties

谁能知道如何将字符串作为参数传递给 grailsApplication.config。

```
 I have tried the following.

class ConfigPropertiesLoader {
   def grailsApplication

   def getProperty(String property ){
           def properties=grailsApplication.config.${property}

    return properties;
} 
```

这是我得到的错误，

```
 Error 2013-02-13 12:59:29,850 [http-bio-8080-exec-10] ERROR 0].[grails]  -    Servlet.service() for servlet grails threw exception
   Message: Cannot get property 'config' on null object
   Line | Method
   ->>   30 | getProperty      in    com.nagra.ms.sam.config.ConfigPropertiesLoader$$ENxJABt5

   |     51 | <init>           in com.nagra.ms.sam.entity.account.controller.AccountController
   |    196 | getBean . . . .  in grails.plugin.cache.web.filter.AbstractFilter
   |    842 | lookupController in grails.plugin.cache.web.filter.PageFragmentCachingFilter
   |    176 | doFilter . . . . in     ''
   |     63 | doFilter         in grails.plugin.cache.web.filter.AbstractFilter
   |   1110 | runWorker . . .  in java.util.concurrent.ThreadPoolExecutor
   |    603 | run              in java.util.concurrent.ThreadPoolExecutor$Worker
   ^    722 | run . . . . . .  in java.lang.Thread 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T09:42:46.623

我不确定我是否理解您的确切问题，因此我将为您列出几个不同的场景并提供解决方案：

考虑 Config.groovy 中的以下两个条目

```
feedbackAddress="xyz@abcdefg.com"

blogs = {groupName->
        if(groupName == 'IT') {
            //return blog URLs for IT folks
        } else if(groupName == 'UX') {
            //return blog URLs for UX folks
        } else {
            //return others
        }
    } 
```

案例 1：使用字符串作为配置名称。您可以访问 feedbackAddress ，如：

```
def feedbackAddress = grailsApplication.config["feedbackAddress"] 
```

案例 2：将参数传递给配置。您可以列出特定组的博客，例如：

```
def groupName = "IT"
grailsApplication.config.blogs(groupName) //this will give you whatever's defined in the IT block of config. 
```

希望这可以帮助..

# php - 密码哈希 API 查询

> ID：14848526
> 
> 赞同：7
> 
> 时间：2013-02-13T07:32:36.507
> 
> 标签：php, mysql, hash, bcrypt, php-password-hash

所以我正在使用新的 PHP 5.5 Password Hashing API，但我不确定我是否正确理解了这一点。

我试过自动重新散列每次登录，有时我失败了，即使散列结果是一样的，我觉得我做错了什么。

这可能是我可能弄错了查询函数，因为当我检查 phpMyAdmin 时哈希甚至没有改变。

```
if (password_needs_rehash($result_row->user_password_hash, PASSWORD_DEFAULT))
{
    $newhash = password_hash(
        $_POST['user_password'], PASSWORD_BCRYPT, 
        ['cost' => 12, 'salt' => 'superfreakingsonicdude',]
    );

    // update hash in database
    $this->connection->query(
        "UPDATE users SET user_password_hash='" . $newhash .  
        "' WHERE user_name='".$result_row->user_name."'"
    );
} 
```

[在这里您可以找到所有功能。](https://github.com/MrXXIV/PHP-5.5-login/blob/master/app/Login/Classes/login.class.php)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T08:14:20.117

[`password_needs_rehash`](http://php.net/password_needs_rehash)已引入该功能以检查您是否需要升级：

```
password_needs_rehash($result_row->user_password_hash, PASSWORD_DEFAULT) 
```

> 此函数检查提供的哈希是否实现了提供的算法和选项。如果不是，则假定需要重新散列散列。

如果您在理解此函数的作用时遇到问题，请参阅 RFC 包含 PHP 代码中的函数。因此，如果您可以阅读 PHP 代码，您应该能够阅读以下内容（请参阅介绍的部分，因为*它可以通过以下方式在用户域中实现：*）：[https ://wiki.php.net/rfc/password_hash#password_needs_rehash](https://wiki.php.net/rfc/password_hash#password_needs_rehash)

测试数据库（存储）中的哈希是否与 in 具有相同的算法是有意义的`PASSWORD_DEFAULT`。这意味着检查在`PASSWORD_DEFAULT`上次存储哈希值和现在之间是否已更改。

现在`PASSWORD_DEFAULT` *是* `PASSWORD_BCRYPT`这样，它应该总是返回 false。在您的情况下，它返回 true，因为您在没有密码选项的情况下进行测试。

改变它，你应该没问题：

```
$options = ['cost' => 12, 'salt' => 'superfreakingsonicdude',];
########

if (password_needs_rehash($result_row->user_password_hash, PASSWORD_DEFAULT, $options))
                                                                             ########
{
    $newhash = password_hash($_POST['user_password'], PASSWORD_DEFAULT, $options);
                                                      ################  ########

    // update hash in database
    $this->connection->query(
        "UPDATE users SET user_password_hash='" . $newhash .
            "' WHERE user_name='".$result_row->user_name."'"
    );
} 
```

`PASSWORD_DEFAULT`如果您想从 PHP 核心中的默认散列算法更新中受益，也可以考虑继续使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T08:04:57.470

哈希的输入是密码和盐。相同的密码，相同的盐，相同的结果。
如果你不考虑这个`salt`参数，每次都会生成一个随机盐，你应该得到不同的结果。您不应该提供静态盐。这意味着所有用户都有相同的盐，这大大降低了它的有效性。每个单独的哈希~~需求~~都应该有一个随机盐。

# asp.net - Set handler for PDF in IIS

> ID：14848527
> 
> 赞同：0
> 
> 时间：2013-02-13T07:32:37.060
> 
> 标签：asp.net, iis, iis-7, httphandler

I developed an `HttpHandler` in order to count number of downloads for PDF files.

Now the problem is: How can I make IIS use my handler for PDF files?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:01:13.720

For IIS 7 it does depend on which mode you are running IIS in. Microsoft has a great tutorial on this [How to: Register HTTP Handlers](http://msdn.microsoft.com/en-us/library/46c5ddfy%28v=vs.100%29.aspx) which goes over all the different configuration scenarios but assuming you are running IIS 7 in integrated mode and your handler is a compiled binary you would need a web.config entry similar to the following:

```
<configuration>
  <system.webServer>
    <handlers>
      <add name="pdfCountHandler" verb="*" 
        path="*.pdf" 
        type="<your handler class name>, <your handler assembly name>" 
        resourceType="Unspecified" />
    </handlers>
  </system.webServer>
</configuration> 
```

# ios - XCode 4.6 显示方法 + (void)beginAnimations:(NSString *)animationID context:(void *)context; 的内存泄漏警告

> ID：14848532
> 
> 赞同：2
> 
> 时间：2013-02-13T07:32:47.917
> 
> 标签：ios, objective-c, xcode, memory-leaks

这个问题在这里[Iphone - 如何将参数传递给animationDidStop？](https://stackoverflow.com/questions/2297354/iphone-how-to-pass-a-parameter-to-animationdidstop)在上下文中提出整个问题。根据那里的最佳答案，我在我的 animationDidStopSelector 中发布了上下文。但自从我更新了我的 Xcode，我收到了这个警告

```
 - (void) helloThere: (int) myValue {

  // I am trying to pass myValue to animationDidStop
  [UIView beginAnimations:nil context:[[NSNumber alloc] initWithFloat:self.view.frame.origin.x]]; //Warning raised on this line
  [UIView setAnimationDuration:1.0];
  [UIView setAnimationDidStopSelector:@selector(animationDidStop:finished:context:)];
  [UIView setAnimationDelegate:self];

  // do stuff
  [UIView commitAnimations];
}

- (void)animationDidStop:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context {

  CGFloat usesThisValue = [(NSNumber *) context floatValue];
  [(NSNumber *) context release];
} 
```

日志中的警告说：

```
warning: Potential leak of an object       [UIView beginAnimations:nil context:[[NSNumber alloc] initWithFloat:self.view.frame.origin.x]]; //Warning raised on this line
 1 warning generated. 
```

有解决方案吗？如果没有，我怎样才能为我的项目关闭这个警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:48:31.570

问题是你在这个调用中分配了一个 NSNumber 。号码没有公布。尝试改变这个：

```
[UIView beginAnimations:nil context:[[NSNumber alloc] initWithFloat:self.view.frame.origin.x]]; 
```

**编辑** [这里是关于处理 (void *)context 的帖子的链接](https://stackoverflow.com/a/5189273/1144161)

因此，您需要一些方法来保留对您的 NSNumber 的引用，以便以后清理。

```
self.contextNumber = [[NSNumber alloc] initWithFloat:self.view.frame.origin.x];
[UIView beginAnimations:nil context:self.contextNumber]; 
```

并在你的 dealloc 中清理它

# javascript - Jquery：子菜单出现悬停功能但没有点击功能

> ID：14848535
> 
> 赞同：0
> 
> 时间：2013-02-13T07:33:21.720
> 
> 标签：javascript, jquery, click, hover, jquery-hover

我有一个多层导航，由`<ul>`相互嵌套的 3 个组成（显然是一个带有隐藏子菜单的菜单，点击时显示）。

`<ul>`如果单击第一个级别，我创建了一个脚本来显示第二个级别。这工作正常：

```
//CLICK MAIN NAV SHOW 2nd LAYER NAV
$("#ctamenu ul li").not("#ctamenu ul li ul li, .thirdsub").click(function() {
  $(this).children('ul').stop().delay(200).slideDown(300);
});//END CLICK FUNCTION 
```

但是当我对 3rd level 重复此操作时，`<ul>`它无法正常工作：

```
$("#ctamenu ul li ul li").click(function () {
    $(this).find('.thirdsub').stop().show(300);
  }); 
```

奇怪的是，当我检查浏览器中的元素时，`display: none`css 肯定会从 thirdsub 元素中删除。我什至得到了一个彩色轮廓，Chrome 向我展示了元素应该在哪里。

更奇怪的是，如果我将 .click 更改为 .hover 它可以正常工作：

```
$("#ctamenu ul li ul li").hover(
  function () {
    $(this).find('.thirdsub').stop().show(300);
  },
  function () {
    $(this).find('.thirdsub').stop().hide(300);
  }
); 
```

有谁知道为什么这可以使用悬停而不是单击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:45:17.400

```
$("#ctamenu ul li ul li").click(function (e) {
    $(this).find('.thirdsub').stop().show(300);
    e.stopPropagation();
  }); 
```

尝试`stopPropagation()`，因为您也已将`click`处理程序分配给它的父级。当您单击 时，它也会调用`#ctamenu ul li ul li`。

# spring - 如何让 Spring 从文件中读取字符串属性？

> ID：14848542
> 
> 赞同：0
> 
> 时间：2013-02-13T07:34:18.243
> 
> 标签：spring

我有一个 bean，它有一个我想设置的字符串属性，但我想从文件中设置它而不更改 bean 代码。豆子是这样的。

```
public class SomeBean {
    public void setSomeProperty(String string) { ... }
} 
```

我在 beans.xml 文件中寻找类似的东西

```
<beans>
   <bean class="SomeBean">
      <property name="someProperty">
         <util:string src="classpath:foo.txt" />
      </property>
   </bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:22:51.650

尝试使用`PropertyPlaceholderConfigurer`从属性文件加载值：

```
<bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PreferencesPlaceholderConfigurer">
        <property name="ignoreUnresolvablePlaceholders" value="true" />
        <property name="ignoreResourceNotFound" value="true" />
        <property name="locations">
            <list>
                <value>classpath:foo.properties</value>
            </list>
        </property>
        </bean>

<bean class="SomeBean">
       <property name="someProperty" value="${myBean.someProperty}" /> 
```

然后，在 foo.properties 文件中，将属性设置为所需的任何值：

```
myBean.someProperty = value 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:22:51.960

我找到了一种使用 Guava 类的方法，虽然它看起来很糟糕。

（value属性都在一行）

```
<property name="someProperty"
  value="#{ T(com.google.common.io.Resources).toString(
              T(com.google.common.io.Resources).getResource('foo.txt'),
              T(java.nio.charset.Charset).forName('UTF-8')) }"/> 
```

希望有人能找到更好的答案。

# ajax - ASP.Net MVC 验证（服务器端）

> ID：14848545
> 
> 赞同：0
> 
> 时间：2013-02-13T07:34:23.720
> 
> 标签：ajax, asp.net-mvc, validation

在浏览器中禁用 javascript 时，asp.net mvc 服务器端验证？我在我的模态类中使用了“远程”，它仅在启用 javascript 时验证它在禁用 javascript 时不验证。

我的问题的场景是我的数据库中有一个表，其中有一列“代码”，数据类型为 varchar。任何人插入他们必须插入唯一代码的数据。请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:51:12.657

我建议忘记，`remote`因为如果您使用的是代码优先实体框架，那么您的表中不能有超过一`unique`列。我会像这样为它编写代码：

```
[HttpPost]
[AllowAnonymous]
[ValidateAntiForgeryToken]
public ActionResult Register(RegisterModel model)
{
    if (ModelState.IsValid)
    {
        // Insert a new user into the database
        using (UsersContext db = new UsersContext())
        {
            UserProfile email = db.UserProfiles.FirstOrDefault(u => u.Email.ToLower() == model.Email.ToLower());
            try
            {
                // Check if email already exists
                if (email == null)
                {
                    WebSecurity.CreateUserAndAccount(model.UserName, model.Password, new { Email = model.Email });
                    WebSecurity.Login(model.UserName, model.Password);
                    return RedirectToAction("Index", "Home");
                }
                else
                {
                    ModelState.AddModelError("Email", "Email address already exists. Please enter a different email address.");
                }
            }
            catch (MembershipCreateUserException e)
            {

                ModelState.AddModelError("", ErrorCodeToString(e.StatusCode));
            }
        }
    } 
```

将电子邮件替换为您要验证的属性。在发布时，这将与数据库中已存在的条目进行比较，并根据结果为您提供反馈。如果存在此类数据，则引发异常。

# iphone - IPHONE 内部数组

> ID：14848547
> 
> 赞同：0
> 
> 时间：2013-02-13T07:34:41.113
> 
> 标签：iphone, ios5

我是 iphone 新手，我尝试了很多但没有找到任何解决方案。

我想要这样的输出

```
 [
        {
           "longitude" : -71.449162,
           "latitude" : 42.734752
        },
        {
           "longitude" : -71.447343,
           "latitude" : 42.735636
        },
        {
           "longitude" : -71.446246,
           "latitude" : 42.735807
        }
     ] 
```

但我得到这样的输出

```
"longitude":"(
   "42.713974",
   "-71.449432",
   "42.713757",
   "-71.449471",
   "42.713474",
   "-71.449516",

)", "latitude":"(
   "42.713974",
   "-71.449432",
   "42.713757",
   "-71.449471",
   "42.713474",
   "-71.449516",

) 
```

**我想要单独的数组中的经度和纬度值。**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T10:15:46.903

请试试这个：

```
NSMutableArray *mytest = [[NSMutableArray alloc]initWithObjects:@"-71.449162",@"-71.447343",@"-71.446246",nil];

NSMutableArray *mytest1 = [[NSMutableArray alloc]initWithObjects:@"42.734752",@"42.735636",@"42.735807",nil];

NSMutableArray *testArray = [[NSMutableArray alloc]init];
for (int i = 0; i< 3; i++) {
NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
[dict setObject:[mytest objectAtIndex:i] forKey:@"longitude"];
[dict setObject:[mytest1 objectAtIndex:i] forKey:@"latitude"];
[testArray addObject:dict];

 }

NSLog(@"my array is : %@",testArray);

NSError *error;

NSData *jsonData = [NSJSONSerialization dataWithJSONObject:testArray options:NSJSONWritingPrettyPrinted error:&error]; 

NSString *jsonString = [[NSString alloc]initWithData:jsonData encoding:NSUTF8StringEncoding]; 

NSLog(@"json string is : \n%@",jsonString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:48:18.400

将纬度和经度以字符串格式存储在单独的数组中并尝试使用此代码

```
NSMutableArray * totalArray=[[NSMutableArray alloc]init];
for(int i=0;i<3;i++)
{
NSArray* temp=[[NSArray alloc]initwithObjects:[NSString stringWithFormat:@"Latitude%@",[latitudearray objectAtIndex:i]],[NSString stringWithFormat:@"Longitudee%@",[longitudearray objectAtIndex:i]],nil];
[totalArray addObject:temp];
 }

  NSLog(@"%@",totalArray); 
```

希望这可以帮助...

# ios - 将循环中的按钮添加到 UIScrollView

> ID：14848560
> 
> 赞同：-1
> 
> 时间：2013-02-13T07:35:44.697
> 
> 标签：ios

我正在编写此代码以从循环创建按钮并将它们添加到 UIScrollView 但不知何故它不起作用，请有人帮忙。代码是

```
 scroll = [[UIScrollView alloc]init];
[self createurdulistfordisplay];

for(int i = 1;i<[urdulist count];i++)
{
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];

    [button setBackgroundImage:[UIImage imageNamed:@"2.png"] forState:UIControlStateNormal];

    [button addTarget:self
               action:@selector(playurduaudio:)
     forControlEvents:UIControlEventTouchDown];

    button.frame = CGRectMake(80.0, 210.0 + (30*i), 213.0, 46.0);

    [scroll addSubview:button];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:43:32.120

我认为您忘记添加滚动查看。像他的最后一行一样添加

```
[self.view addSubView:scroll]; 
```

在这里，您已经创建了滚动但没有添加到您的视图中，这意味着直到您将此滚动视图添加到主视图，即添加到 self.view 中，您才会将其显示在屏幕上

# jquery-plugins - jqgrid 在收到 2 个 ajax 调用时吓坏了

> ID：14848563
> 
> 赞同：0
> 
> 时间：2013-02-13T07:35:47.167
> 
> 标签：jquery-plugins, jqgrid

我正在为我的应用程序使用 jqgrid，它工作正常，当 jqgrid 一个接一个地获得 2 个不同的 ajax 调用但速度很快时，我遇到了问题，我希望它只与第二个 ajax 调用相关，但它吓坏了。有人有解决这个问题的想法吗？

我无法查看代码，但我的意思是他尝试重新加载数据，同时我按下花药按钮并希望他重新加载花药数据。我看看 Fiddler 和 2 个 ajax 调用都很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:55:49.377

在第二次通话中终止第一个请求。请参阅[使用 jQuery 中止 Ajax 请求](https://stackoverflow.com/questions/446594/abort-ajax-requests-using-jquery)作为终止 Ajax 请求的示例。

# android - 如何在安卓模拟器上运行PhoneGap程序？

> ID：14848565
> 
> 赞同：4
> 
> 时间：2013-02-13T07:35:48.147
> 
> 标签：android, cordova, android-emulator, emulation

当我尝试在 Eclipse 中运行 PhoneGap 程序时，我发现一个错误：

**[2013-02-13 12:51:21 - DeviceMonitor] Adb 连接错误：现有连接被远程主机强行关闭 [2013-02-13 12:51:22 - DeviceMonitor] 连接尝试：1**

或者

**找不到兼容的 AVD**

而我有android 4.2和API 17的相应模拟器..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:54:32.920

> [2013-02-13 12:51:21 - DeviceMonitor] Adb 连接错误：现有连接被远程主机强行关闭 [2013-02-13 12:51:22 - DeviceMonitor] 连接尝试：1

您需要重新启动 ADB 连接。打开命令提示符（适用于 Windows）

**/sdk/platform-tools> adb -kill 服务器**

然后再次启动 adb 服务器

**/sdk/platform-tools> adb -start 服务器**

现在说**找不到兼容的 AVD**

检查您的应用兼容的 android 版本并相应地创建虚拟设备或

1.在eclipse的项目资源管理器中右键项目。2.转到运行 -> 运行配置 -> 目标选项卡

然后选择单选按钮

**总是提示选择设备。**

应用设置，下次将要求您选择设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T04:24:20.970

去 DDMS 有一个重置 adb 选项，请看下图：

![重置亚行](../Images/6774d5fc3d0cd48a7809930b4c229109.png)

# database - 运行本地 SAS 数据库

> ID：14848569
> 
> 赞同：0
> 
> 时间：2013-02-13T07:36:00.663
> 
> 标签：database, database-design, sas

我对 SAS 编程很陌生。但是，我有兴趣使用该数据开发算法的数据集。但是，我不会总是连接到 Internet，因此无法通过 Web 访问数据库。

相反，我想知道：

1.  复制非常大的 SAS 数据库 (3 TB) 的最佳方法是什么？

2.  我是否可以使用我的 PC（而不是专用硬件）来运行本地 SAS 服务器并执行 SAS 脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:09:30.880

您当然可以在本地运行 SAS，尽管桌面许可证很昂贵（取决于您许可的产品，第一年可能需要 2000 美元）。您当然也可以将文件存储为 MYSQL 格式（或其他任何格式）；MYSQL 可以轻松读取逗号分隔文件 (CSV)，并且您可以非常快速地从 SAS 生成创建表脚本。

我会注意到您通常不会将 SAS 文件称为“数据库”，尽管这并没有什么不准确的地方；但是，它们比整个数据库更接近“表”（对于许多表来说，它们通常是一个独立的数据和元数据单元）。SAS 文件通常称为“数据集”，SAS 数据集和元数据（格式目录等）的集合称为“库”。

复制一个 3TB 的 SAS 数据集，如果它是一个单一的数据集，可以通过正常的文件传输方法（FTP、HTTP、windows 或 UNIX 复制等）来完成。SAS 数据集通常压缩得很好（即，一个 3TB 未压缩的 SAS 数据集可能很容易压缩低至 2-3GB，具体取决于具体细节）。您可能需要获取 SAS 格式目录以及数据集（存储值标签）；此外，这是特定于操作系统和位的（因此 Windows 32 位不能使用 Unix 甚至 Windows 64 位格式目录）；有一些方法可以在适当的版本中获取格式目录（或更常见的是，获取目录的数据集转储以在本地重新创建）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T07:42:26.243

是的，您可以为 PC 授权 SAS。

您是否建议将 3tb 数据集下载到本地环境？哇。如果您是 SAS 新手并想开发算法，为什么不从一些较小的数据集开始，例如 SAS 本身附带的数据集或您自己创建的数据集？然后，一旦你确定了一个好的算法，也许就需要在 3tb 数据集上运行它。

或者可能首先获取完整数据集的子集。

# jdbc - 我可以在 Vert.x 的 worker verticle 中使用 JDBC 阻塞调用吗？

> ID：14848583
> 
> 赞同：0
> 
> 时间：2013-02-13T07:36:48.863
> 
> 标签：jdbc, tcp, vert.x

我在 Vert.x 的手册中找到了下面这句话。

> Worker Verticle 也不允许使用 TCP 或 HTTP 客户端或服务器。

JDBC 也是一个 TCP 客户端，对吧？

那么我不能在worker Verticle中使用JDBC阻塞调用？

参考：http: [//vertx.io/manual.html#worker-verticles](http://vertx.io/manual.html#worker-verticles)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:58:57.327

不，您不能在 Verticle 中使用阻塞 JDBC 调用。有一个[JDBC 持久化模块](https://github.com/vert-x/vertx-mods/tree/gh-pages/mods/com.bloidonia.jdbc-persistor-v1.2)，它使用工作队列模块在多个处理器之间共享负载

Vert.x 2.0 将允许在模块中使用线程，因此这应该不会成为问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-14T13:11:39.747

您可以在工作程序 Verticle 中使用 HTTP 或 TCP 调用，但这些调用必须是“异步”的。你不能阻塞线程。正如 Kamil（上）所说，您必须将 Verticle 部署为工作人员，如果您有同步调用，则应该使用 vertx.executeBlocking(...)。在这里你有一些信息：[https ://developer.mastercard.com/blog/the-vertx-worker-model](https://developer.mastercard.com/blog/the-vertx-worker-model)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-06T13:15:23.723

目前（Vert.x 3.x）您可以将 verticle 部署为 worker verticle 或使用

```
vertx.executeBlocking(...) 
```

在这两种情况下，您的代码都将使用工作池中的线程运行，而不是在事件循环线程上运行，从而允许您调用阻塞代码。

[https://vertx.io/docs/vertx-core/java/#blocking_code](https://vertx.io/docs/vertx-core/java/#blocking_code)

# css - CSS - 背景图像不显示

> ID：14848584
> 
> 赞同：0
> 
> 时间：2013-02-13T07:36:51.817
> 
> 标签：css, html

这是我的 CSS：

```
body {

text-align:center;
vertical-align:central;
width:480px;
height:800px;
}

#content {
width:100px;
height:200px;
background-image:url("../App_GlobalResources/TopBanner.png");
display:inline-block;
} 
```

还有我的 HTML（母版页）：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Mobile.master.cs" Inherits="m.mysite" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>TestTitle</title>
<asp:ContentPlaceHolder ID="head" runat="server">
</asp:ContentPlaceHolder>
</head>
<body>
<div id="header">
    test1234
</div>
<form id="form1" runat="server">
<div id="content">
    <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">
    </asp:ContentPlaceHolder>
</div>
</form>
</body>
</html> 
```

我有一个使用我的母版页的 Default.aspx 站点，但它不会显示我的图像。

如果我在 html 中创建一个 img scr 标记，它显示得很好.. 所以路径是正确的.. 它还能是什么？' 这是输出 HTML：

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>
TestTitle
</title>
<link href="App_Themes/MobileTheme/MobileLayout.css" type="text/css" rel="stylesheet" />    </head>
<body>
<div id="header">
    test1234
</div>
<form method="post" action="" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTY1NDU2MTA1MmRkNWnHplPoHce7cSIeDENrnMaUn20Ibq7H6yKbaedCCPw=" />
</div>

<div id="content">

test

</div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:56:02.360

好的，它现在可以工作了，似乎 Internet Explorer 在错误的文件夹中查找.. 一定是某种我没有注意到的 Visual Studio 错误/设置..

# ios - 几个 UITableView 之间的水平滚动

> ID：14848586
> 
> 赞同：1
> 
> 时间：2013-02-13T07:36:59.203
> 
> 标签：ios, uitableview, uiscrollview, horizontalscrollview

我需要在应用程序中显示学生时间表；一个 TableView 包含一个完整的一周，从星期一到星期日。我希望学生能够在下周水平滑动，找到一个充满新一周的新 UITableView。

换句话说，我想像 Facebook 上的照片一样滚动，但使用完整的 UITableView 填充数据。

如何以编程方式执行此操作？在 UIScrollView 中嵌入几个 UITableView？

非常感谢...

真挚地，

埃尔韦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:54:05.610

我建议您将`UIPageView`控制器与`UIView`.... 一起使用，您可以在这些视图上使用任何您喜欢的动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:40:19.197

`UIScrollView`在使用启用分页功能之前，我已经这样做了。

另一种稍微复杂但更容易单独管理每个单独表的替代方法是使用`UIPageViewController`.

`TabBarController`它位于类似于 a或 a的视图控制器视图后面`NavigationController`。

您管理它有点像 a `UITableView`，因为它有 a`datasource`并且它会要求“索引处的视图控制器”。

当您查看完整尺寸的图像时，在照片应用程序中使用了这种方法。

# bash - 循环文件列表以根据其名称合并

> ID：14848588
> 
> 赞同：2
> 
> 时间：2013-02-13T07:37:17.303
> 
> 标签：bash, shell, unix

目录中的文件如下所示：

```
A_1_email.txt
A_1_phone.txt
A_2_email.txt
A_2_phone.txt
B_1_email.txt
B_1_phone.txt
B_2_email.txt
B_2_phone.txt 
```

我想要的：
合并文件`A_1_email.txt`和`A_1_phone.txt`；合并文件 `B_1_email.txt`等等`B_1_phone.txt`。
我的意思是：如果第一个文件名的标志匹配（例如 A 到 A；1 到 1）而不是合并文件。

我是如何尝试这样做的：

```
ls * | cut -d "_" -f 1-2  | sort | uniq -c | awk '{print $2}' > names && for name in   
$(cat names); do 
```

而我在这里迷路了，真的不知道我该如何继续下去。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T15:43:28.173

以下内容基于@MichaelJ.Barber 的回答（有一个很好的想法 using `join`），但其目的是避免[解析 ls 输出的危险做法](http://mywiki.wooledge.org/ParsingLs)：

```
# Simple loop: avoids subshells, pipelines
for file in *_email.txt; do
    if [[ -r "$file" && -r "${file%_*}_phone.txt" ]]; then
        join "$file" "${file%_*}_phone.txt"
    fi
done 
```

或者

```
##
# Use IFS and a function to avoid contaminating the global environment.
joinEmailPhone() {
    local IFS=$'\n'
    local -x LC_COLLATE=C # Ensure glob expansion sorting makes sense.
    # According to `man (1) bash`, globs expand sorted "alphabetically".
    # If we use LC_COLLATE=C, we don't need to sort again.
    # Use an awk test (!seen[$0]++) to ensure uniqueness and a parameter expansion instead of cut
    awk '!seen[$0]++{ printf("join %s_email.txt %s_phone.txt\n", $1, $1) }' <<< "${*%_*}" | sh
}
joinEmailPhone * 
```

但很可能（再次假设`LC_COLLATE=C`）你可以逃脱：

```
printf 'join %s %s\n' * | sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:56:05.140

我假设这些文件都有制表符分隔的名称-值对，其中的值是电子邮件或电话，视情况而定。如果不是这种情况，请进行一些预排序或以其他方式进行适当的修改。

```
ls *_{email,phone}.txt |
  cut -d "_" -f1-2 | # could also do this with variable expansion
    sort -u | 
      awk '{ printf("join %s_email.txt %s_phone.txt\n", $1, $1) }' |
        sh 
```

这样做是为了识别文件的唯一前缀并使用“awk”生成用于连接对的 shell 命令，然后通过管道输入`sh`这些命令以实际运行命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T12:56:21.653

您可以在给定的场景中使用`printf '%s\n' *_{email,phone}.txt | ...`而不是`ls *-...`，即文件路径名中不会出现换行符。至少少一个外部命令！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-13T13:43:02.407

使用`for`循环遍历电子邮件文件，使用`read`具有适当值的命令`IFS`将文件名拆分为必要的部分。请注意，这确实使用了一项提供的非 POSIX 功能`bash`，即使用 here-string ( `<<<`) 将值传递`$email`给`read`命令。

```
for email in *_email.txt; do
    IFS=_ read fst snd <<< $email
    phone=${fst}_${snd}_phone.txt
    # merge $email and $phone
done 
```

# android - 从另一个活动返回 MainActivity

> ID：14848590
> 
> 赞同：38
> 
> 时间：2013-02-13T07:37:20.473
> 
> 标签：android, android-activity

`MainActivity`包含一些按钮。每个按钮通过一个意图打开一个新活动。然后这些活动有一个按钮可以`MainActivity`通过意图返回。

但是当我按下一个按钮返回 时`MainActivity`，我会在屏幕上看到某种菜单！有人知道可能出了什么问题吗？一些帮助！谢谢！

编辑：其他活动之一中的返回按钮：

```
Button btnReturn1 = (Button) findViewById(R.id.btnReturn1);
btnReturn1.setOnClickListener(new View.OnClickListener() {      
    public void onClick(View v) {
        // TODO Auto-generated method stub
        Intent returnBtn = new Intent("android.intent.action.MAIN");
        startActivity(returnBtn);
    }
}); 
```

清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.kullaberg.test02"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Activity1"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.ACTIVITY001" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Activity2"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.ACTIVITY002" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Activity3"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.ACTIVITY003" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-02-13T16:03:51.033

这就是为什么您看到带有您在`onClick`方法中列出的代码的菜单的原因：

您正在使用构造函数创建一个 Intent，该构造函数接受一个字符串作为`Intent`'s的 action 参数`IntentFilter`。您将`"android.intent.action.MAIN"`作为参数传递给该构造函数，该构造函数指定`Intent`任何`Activity`具有 IntentFilter 包括`<action="android.intent.action.MAIN">`.

当您`startActivity`使用 that 调用时`Intent`，您实际上是告诉 Android 操作系统去寻找一个`Activity`（在系统上安装的任何应用程序中）指定`android.intent.action.MAIN`操作的。当有多个符合条件的活动时（在这种情况下，因为*每个*`Activity`应用程序都有一个`IntentFilter`包含该操作的主程序`"android.intent.action.MAIN"`），操作系统会显示一个菜单让用户选择要使用的应用程序。

至于如何回到您的主要活动的问题，与大多数事情一样，这取决于您的应用程序的具体情况。虽然接受的答案可能适用于您的情况，但我认为这不是最好的解决方案，它可能会鼓励您在 Android 应用程序中使用非惯用的 UI。如果您`Button`的`onClick()`方法*只*包含一个调用，`finish()`那么您很可能应该`Button`从 UI 中删除 并让用户按下硬件/软件后退按钮，该按钮具有相同的功能并且对于 Android 来说是惯用的。（您会经常看到用于模拟 iOS UINavigationController 导航栏行为的返回按钮，这在 Android 应用程序中是不鼓励的）。

如果您的主要活动启动了一个活动堆栈，并且您想提供一种简单的方法来返回主要活动而无需重复按下后退按钮，那么您希望`startActivity`在设置标志后调用，该标志`Intent.FLAG_ACTIVITY_CLEAR_TOP`将关闭调用堆栈中的所有活动它们在您的主要活动之上，并将您的主要活动带到调用堆栈的顶部。见下文（假设您的主要活动子类称为 MainActivity：

```
btnReturn1.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        Intent i=new Intent(this, MainActivity.class);
        i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(i);
    }
)}; 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-02-13T08:00:34.320

你为什么不打电话`finish();`

当你想返回 MainActivity

```
 btnReturn1.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        finish();
    }
}); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-02-13T07:54:49.070

采用

```
Intent returnBtn = new Intent(getApplicationContext(),
                    MainActivity.class);

startActivity(returnBtn); 
```

如果您不想每次都创建新活动`launchmode`，请在 Android Manifest 中创建主要活动。`singleTask`

```
android:launchMode="singleTask" 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-02-08T12:56:31.497

我已经使用它并且工作得很好......

```
startActivity(new Intent(getApplicationContext(),MainActivity.class).setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)); 
```

因为 Finish() 用于 2 个活动，而不是多个活动

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-07-25T17:09:57.000

这通常也有效:)

```
navigateUpTo(new Intent(getBaseContext(), MainActivity.class)); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-13T08:00:24.760

而不是通过 startActivity 再次启动 MainActivity，而是在其他活动中调用 finish() 以返回 MainActivity... 因为 MainActivity 已经在堆栈中

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-13T08:06:04.707

在活动中的按钮单击上使用此代码，当返回到另一个活动时，只需通过在意图中设置标志来完成前一个活动，然后只将一个活动放入堆栈中并销毁前一个活动。

```
 Intent i=new Intent("this","YourClassName.Class");
  i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
  startActivity(i); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-10-13T10:51:54.753

我强烈建议阅读`Intent.FLAG_ACTIVITY_CLEAR_TOP`标志上的文档。使用它**不一定**会一直回到第一个 ( `main`) 活动。该标志只会删除所有现有活动，直到`Intent`. 这在文档中得到了很好的解释：

```
For example, consider a task consisting of the activities: A, B, C, D.
If D calls startActivity() with an Intent that resolves to the component of
activity B, then C and D will be finished and B receive the given Intent, 
resulting in the stack now being: A, B. 
```

请注意，活动可以设置为移动到前台（即清除其上的所有其他活动），然后也可以重新启动，或者只`onNewIntent()`调用 get 方法。

[**来源**](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-10T15:26:16.277

我只是这样做

```
public void retorna(View view)
    {
        Intent muda = new Intent(getApplicationContext(),MainActivity.class);

        muda.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

        startActivity(muda);
   } 
```

# java - 输入为“0000000000”的值，但显示为“0”时

> ID：14848591
> 
> 赞同：-1
> 
> 时间：2013-02-13T07:37:21.457
> 
> 标签：java, grails, input, controller

我在输入值和显示输入值时遇到了一些麻烦。发生的事情是我试图用字符串“00000000000000”将值输入到数据库中，但是当结果显示出来时，它显示为“0”。我正在使用 grails、MSSQL 作为数据库。有谁知道为什么？需要对此进行某种解释和解决方案。非常感谢你们:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:40:01.763

确保跟随！

*   您正在将字符串插入数据库。

*   该列是 Varchar 类型的。

*   您正在将其读取/显示为字符串。

# iphone - NSUrl FileUrlWith Path 在末尾附加“--file://localhost/”

> ID：14848596
> 
> 赞同：3
> 
> 时间：2013-02-13T07:37:34.827
> 
> 标签：iphone, ios, nsurl

我正在使用 MPMoviePlayerController 从 url 播放视频。为此，我从 Xml 解析器获取链接。这很好。

```
 NSString *path=[[self.items  objectAtIndex:videoIndex]objectForKey:@"link"]; 
```

我将该路径分配给 NSURL fileWithPath，如下所示。

```
 NSURL *mediaUrl = [NSURL fileURLWithPath:path]; 
```

打印 mediaUrl 时，NSLog 给出“ [http://example.com](http://example.com) -- file://localhost/ ”

为什么 --file://localhost/ 附加到 url，因为这个视频没有播放。任何帮助请。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T07:42:04.003

改变 ： `NSURL *mediaUrl = [NSURL fileURLWithPath:path];`

至 ： `NSURL *mediaUrl = [NSURL URLWithString:path];`

当您调用`fileURLWithPath`它时，它会附加`file://localhost/`到您的 URL 字符串中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-13T19:45:38.740

这可能有点旧，但是如果您传入的字符串不是有效的完整路径字符串，则 NSURL 会附加 --file:://localhost 。

在您的情况下，这可能是因为您没有以“/”开头的字符串（即：如您所见，“var/test”将附加 file://localhost，但如果您更改它到 "/var/test" 你会正确地得到一个带有 "file://localhost/var/test" 的 NSURL

如果您尝试创建相对路径，则可以从“~/somelink”开始，然后首先使用 stringByExpandingTildeInPath 来获取完整路径。

# ruby - 传递一个对象作为参数

> ID：14848598
> 
> 赞同：1
> 
> 时间：2013-02-13T07:37:43.480
> 
> 标签：ruby, arguments

我有以下方法太长了：

```
def combine_atoms
  @left.each do |chemical|
    chemical.chem_species.each do |atom|
      if @left_total[atom[0]].nil?
        @left_total[atom[0]] = atom[1]
      else
        @left_total[atom[0]] += atom[1]
      end
    end
  end

  @right.each do |chemical|
    chemical.chem_species.each do |atom|
      if @right_total[atom[0]].nil?
        @right_total[atom[0]] = atom[1]
      else
        @right_total[atom[0]] += atom[1]
      end
    end
  end
end 
```

一个人如何通过`@left`和`@left_total`作为参数，使用 ruby​​ 将代码行数减少一半？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:08:20.497

您可以使用如下参数将循环从`combine_atoms`方法分离到新方法：

```
def combine_atoms
  @left_total = combine_part(@left, @left_total)
  @right_total = combine_part(@right, @right_total)
end

def combine_part(part, total)
  part.each do |chemical|
    chemical.chem_species.each do |atom|
      if total[atom[0]].nil?
        total[atom[0]] = atom[1]
      else
        total[atom[0]] += atom[1]
      end
    end
  end
end 
```

# iphone - 如何在 Reference Outlet Collection 中自动有序排列项目？

> ID：14848599
> 
> 赞同：3
> 
> 时间：2013-02-13T07:37:44.727
> 
> 标签：iphone, uitextfield, iboutletcollection

我在 Xib 中将 UITextfields 的引用插座集合排列为一个在另一个之下。当我打印引用插座集合时，我发现它是无序的。我需要自动排列文本字段，即文本 fileld 在 UI 中排在第一位，应该在 Outlet Collection Array 中排在第一位。任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T07:42:44.830

这是一个不幸的事实`IBOutletCollection`。您可能想欺骗[rdar://12121242](http://openradar.appspot.com/12121242)。

您可以在 IB 中为每个视图设置一个标签，然后按 . 对集合进行排序`tag`。您还可以按帧原点对集合进行排序。无论哪种情况，您都必须手动执行此操作`viewDidLoad`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-03T08:39:25.853

假设您有一个名为 labelsArray 的 IBOutletCollection，并且您已将每个标签属性设置为所需的顺序，则代码为：

```
-(void)viewDidLoad {
    self.labelsArray = [self.labelsArray sortedArrayUsingDescriptors:@[[NSSortDescriptor sortDescriptorWithKey:@"tag" ascending:YES]]];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T07:51:56.003

是的，苹果在 IBOutletCollection 的帮助下为此提供了便利声明这样的属性

```
@property (nonatomic,retain) IBOutletCollection(UILabel) NSArray *labelsArray; 
```

连接所有具有上述属性的控件。

在加载 NIB 文件时自动为您实例化 labelsArray

现在只需在您的程序中使用 labelsArray 即可。为维护顺序设置控件的标签值，如你所愿

# asp.net-mvc - 网站和 Firefox 插件

> ID：14848600
> 
> 赞同：0
> 
> 时间：2013-02-13T07:37:57.460
> 
> 标签：asp.net-mvc, firefox-addon

我创建了一个从 Youtube 下载视频的网站。但现在我想把它作为一个 firefox 插件。

我从过去 2 天开始在谷歌搜索，但很难找到这些东西。所以请帮我将我的网站代码转换为 Firefox 插件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:32:19.477

看看[Add-on SDK](https://addons.mozilla.org/en-us/developers/builder)。这里是[文档](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/)，你也可以从[Github](http://github.com/mozilla/addon-sdk)下载。

我想说附加 SDK 文档的[入门](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/index.html#getting-started)部分是开始阅读的好地方。

如果您有任何疑问，您也可以加入 irc.mozilla.org 上的 IRC 频道 #jetpack 并直接向 SDK 团队寻求帮助！

# c# - 查询线程/多线程/线程总数

> ID：14848601
> 
> 赞同：0
> 
> 时间：2013-02-13T07:38:05.207
> 
> 标签：c#, multithreading, windows-services

我之前在这里有一个关于我的应用程序中的线程数的问题，但我没有澄清我的一些问题。因此，我在这里向您寻求专家的解释/对我卑微的询问的回答。

只是我的问题的背景，我正在调查我们的 Web 应用程序/Windows 服务中的线程是否存在问题/问题。所以我所做的是创建一个额外的日志文件来记录当前正在运行的线程数、当前等待的线程数和 CurrentProcess 中的线程总数。根据日志，应用程序空闲时总共有大约 40 个线程。

```
Process.GetCurrentProcess().Threads.Count 
```

我之前的问题是“这个线程数正常吗？” 我知道这是一个模糊的问题，这就是我得到这些答案的原因。

> 您的 CurrentProcess 是 IIS。是的，IIS 至少有少量线程是正常的。
> 
> 您的 ASP.NET 站点在应用程序池中运行，该应用程序池将具有一定数量的线程，并且如果需要可能会产生更多线程。每个请求都在单独的线程中处理，因此 IIS 将保留一些线程等待请求，因为使用现有线程比在需要时启动新线程更快。IIS 还将在线程池中有备用线程供您的应用程序使用。所以是的，IIS 有多个线程是正常的。

* * *

所以我所做的就是在我的windows服务启动时专门添加日志，以了解服务启动时的线程数以及之后的代码。

1.  在 Main() 开始时：15 个线程 - 这些线程是什么？根据我的日志，这些线程中有 14 个具有“等待”线程状态。这些线程是做什么用的？请有人能解释一下这个..
2.  初始化 ServiceHost 列表后 - 16 线程（增加 1）

样本：

```
this.myServiceHosts = new[]
{
    new ServiceHost(typeof(MyCachingService)),
    new ServiceHost(this._myAService),
    new ServiceHost(new myBService(new BManager()))
};

//Why is it increased by 1 with this code? Or this code does not have anything to do in the thread count increase? 
```

3\. 在我的 Windows 服务的 OnStart() 方法中，我打开了列表中的所有服务主机。我在一个循环中执行下面的代码：

```
myServiceHost.Open(); 
```

我注意到在执行一次上面的代码后（注意：我的列表中有 7 个 ServiceHost），线程数增加了 6 个，并且在执行下一个 6 个 ServiceHost.Open() 后不再增加。

注意：我的测试机有 4 个核心。如果我的问题对某人没有意义，我很抱歉。我只是想了解更多这些。

# django - Django CSRF Coo kie 未设置

> ID：14848603
> 
> 赞同：2
> 
> 时间：2013-02-13T07:38:30.463
> 
> 标签：django, csrf

我一直在尝试在我的 django 1.4.3 站点上的 POST 表单上设置 CSRF 保护，并且一直收到 403 CSRF cookie not set 错误。

我相信我已经详细遵循了文档，在许多论坛上遵循了建议，但都无济于事。我已经尽可能地剥离了代码，cookie 只是没有设置。csrfmiddlewaretoken 存在，所以这不是问题的根源。我无计可施。毫无疑问，答案非常简单，我只需要一双新鲜的眼睛向我指出……

所以这里有一些代码：

```
#urls.py
...
url(r'^csrf/$', csrf_test, name='csrf_test'),
...

#views.py
...
from django.views.decorators.csrf import csrf_protect

@csrf_protect
def csrf_test(request):
    c = {}
    c.update(csrf(request))
    return render_to_response('csrf.html', c)
...

<!-- csrf.html -->
<html>
<body>
<form action="" method="post">
{% csrf_token %}
<input name="Submit" value="Submit" type="submit"/>
</form>
</body>
</html>

#settings.py
...
MIDDLEWARE_CLASSES = (                
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    #for db transactions. Check middleware order if faulty
    'django.middleware.transaction.TransactionMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
    'debug_toolbar.middleware.DebugToolbarMiddleware',
)
...
TEMPLATE_CONTEXT_PROCESSORS = global_settings.TEMPLATE_CONTEXT_PROCESSORS + (
    'django.core.context_processors.csrf',
    'django.core.context_processors.request',
)
... 
```

我在 127.0.0.1:8000 上运行 django 开发服务器。

我在我的浏览器上启用了 cookie，并确认正在从其他网站设置 cookie。

我检查了 csrfmiddlewaretoken 是否作为 POST 变量传递。

我总是收到错误，这不是间歇性的。

当我禁用中间件/使用 @csrf_exempt 时，我对 POST 表单没有任何问题。

正如我所说，我已无计可施。我到底错过了什么？

谢谢

弥敦道

编辑：

它现在有效，但我不知道发生了什么变化。对于将来阅读本文的任何人，我创建了一个新项目和应用程序，它立即创建了 cookie。认为这一定是一个设置问题，我通过将 'django.middleware.csrf.CsrfViewMiddleware' 移到 'django.contrib.sessions.middleware.SessionMiddleware' 下面来更改我的 MIDDLEWARE_CLASSES 条目的顺序。我运行了原始应用程序并且它工作正常。但是，为了测试设置更改是否负责，我撤消了更改。它仍然有效。去搞清楚。

我希望这对未来的 FWIW 有所帮助。

弥敦道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:47:39.530

如果您使用的是 render_to_response 那么您可能应该使用[RequestContext](https://docs.djangoproject.com/en/dev/ref/templates/api/#django.template.RequestContext)

这将为您处理 csrf 保护 -

```
def csrf_test(request):
    render_to_response('csrf.html', context_instance=RequestContext(request)) 
```

你不需要包含`csrf_protect`装饰器，因为你有 csrf 中间件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T10:38:24.740

```
def csrf_test(request):
    .....
    return render(request, 'csrf.html', { ..... }) 
```

# magento - 主页 Magento 白屏

> ID：14848605
> 
> 赞同：0
> 
> 时间：2013-02-13T07:38:57.957
> 
> 标签：magento

我需要你的助手。我一直在我的magento商店工作并且遇到了问题。我创建了一个帐户一个会员帐户来测试一切是否正常，因为这样做我现在注意到我的主页上有一个空白的白色屏幕，它不会显示任何内容，这是空白主页的链接

[http://www.weldersdirect.com.au/](http://www.weldersdirect.com.au/)

对于我可以访问的所有页面，似乎只有主页是空白的。任何帮助将非常感激

感谢大家

阿里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:02:36.260

似乎您在 index.php 本身中都有无效的 php，但不太可能。或者错误位于 /app/design/frontend/(yourtheme)/default/template/page/1column.php

主页独有的东西导致它崩溃。您很可能只使用一栏作为主页。看起来其他页面都使用两列

# php - 文本区域的内容未发布

> ID：14848609
> 
> 赞同：2
> 
> 时间：2013-02-13T07:39:25.427
> 
> 标签：php, html, forms, post, textarea

我有一个位于[https://pnrbuilder.com/_popups/feedback_popup.html的表格](https://pnrbuilder.com/_popups/feedback_popup.html)

该表单使用 post 将输入传递给一个 php 页面，该页面发送一封包含帖子内容的电子邮件，然后重定向用户。

输入字段工作正常，但 textarea 内容无法发送到电子邮件。

知道我做错了什么吗？

PHP页面：

```
<?php
/*
This first bit sets the email address that you want the form to be submitted to.
You will need to change this value to a valid email address that you can access.
*/
$webmaster_email = "support@email.com";

/*
This bit sets the URLs of the supporting pages.
If you change the names of any of the pages, you will need to change the values here.
*/
$feedback_page = "feedback_form.html";
$error_page = "error_message.html";
$thankyou_page = "thank_you.html";

/*
This next bit loads the form field data into variables.
If you add a form field, you will need to add it here.
*/
$EmailAddress = $_POST['EmailAddress'] ;
$IssueType = $_POST['IssueType'] ;
$Comments = $_POST['Comments'] ;

/*
The following function checks for email injection.
Specifically, it checks for carriage returns - typically used by spammers to inject a CC list.
*/
function isInjected($str) {
    $injections = array('(\n+)',
    '(\r+)',
    '(\t+)',
    '(%0A+)',
    '(%0D+)',
    '(%08+)',
    '(%09+)'
    );
    $inject = join('|', $injections);
    $inject = "/$inject/i";
    if(preg_match($inject,$str)) {
        return true;
    }
    else {
        return false;
    }
}

// If email injection is detected, redirect to the error page.
if ( isInjected($EmailAddress) ) {
header( "Location: $error_page" );
}

// If we passed the previous test, send the email then redirect to the thank you page.
else {
mail( "$webmaster_email, test@email.com", "Feedback",
  $EmailAddress, $IssueType, $Comments );
header( "Location: $thankyou_page" );
}
?> 
```

如果我将下面的内容放在我的 php 页面的顶部，它会回显 textarea 的内容

```
echo $_POST["EmailAddress"];
echo $_POST["IssueType"];
echo $_POST["Comments"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:54:53.400

请检查 PHP`mail`函数的正确形式：

```
bool mail ( string $to , string $subject , string $message [, string $additional_headers [, string $additional_parameters ]] ) 
```

**参考： http:** [//php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

* * *

消息应该是第三个参数，不是吗？

你写的是：

```
mail( "$webmaster_email, designedondemandcorp@gmail.com", "Feedback",
  $EmailAddress, $IssueType, $Comments ); 
```

**像这样重写它：**

```
$messageBody = "Comments : ".$Comments." Issue : ".$IssueType;
mail("$webmaster_email, designedondemandcorp@gmail.com", "Feedback", $messageBody); 
```

只是想让它看看是否有问题`$_POST`，但我想我上面的代码将解决这个问题（只需将所有数据捆绑在一个`$messageBody`var 中并将其传递给`mail`函数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:57:41.333

**发送电子邮件**

您将错误的参数传递给`mail()`：

```
mail( "$webmaster_email, designedondemandcorp@gmail.com", "Feedback", $EmailAddress, $IssueType, $Comments); 
```

那应该是：

```
$contents = <<<EOM
Email: $emailAddress

Issue type: $IssueType

Comments:
$Comments
EOM;

mail( "$webmaster_email, designedondemandcorp@gmail.com", "Feedback", $contents); 
```

**电子邮件验证**

其次，您应该使用正确的电子邮件验证：

```
$emailAddress = filter_input(INPUT_POST, 'EmailAddress', FILTER_VALIDATE_EMAIL);
if ($emailAddress === false) {
    header( "Location: $error_page" );
} 
```

# grails - grails famfamfam 插件 http 404 错误

> ID：14848615
> 
> 赞同：0
> 
> 时间：2013-02-13T07:40:08.010
> 
> 标签：grails, spring-security

在我的 grails 应用程序中，我使用 spring-security-core:1.2.7.3 插件和 famfamfam:1.0.1 插件。

当我单击将我带到 Web 应用程序的链接时（并且我之前选择了 rememberme 复选框），它会将我带到安全页面，但不显示 famfamfam 图像。在 Firefox 中，我可以看到以下错误：

```
"NetworkError: 404 Not Found - http://localhost:8080/static/plugins/famfamfam-1.0.1/images/icons/user_suit.png;jsessionid=AB8FFF32A22F98573537A965694936AC" 
```

有什么方法可以防止将“jsessionid”附加到图像上？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T08:56:20.953

插件所有者的回复见此链接：[https](https://github.com/xiaochong/zkui/issues/118) ://github.com/xiaochong/zkui/issues/118 。

该问题似乎与资源插件有关。

我的解决方法是在 zk 项中使用空白图像：

```
`<z:menuitem label="Home" height="80px;" top="40px;"
href="${createLink(uri: '/')}" image="/images/blank.png" class="menu_house"/>` 
```

然后使用一个类来添加菜单图像： `.menu_house { background-image: url("../images/house.png"); background-repeat: no-repeat; background-position: left center; }`

我希望这有助于在未来节省一些时间。

# android - 屏幕方向更改后从发布的 Runnable 指向错误的 UI

> ID：14848620
> 
> 赞同：0
> 
> 时间：2013-02-13T07:40:22.693
> 
> 标签：android

这是我的小测试程序。我的问题是从**run()**方法访问错误（旧）活动的字段，该字段在屏幕方向更改后被破坏。有什么办法来处理这种情况？而且，顺便说一句，我必须重新创建我的活动，因为在实际应用程序中，纵向和横向模式有不同的布局！

```
public class MainActivity extends Activity {
    private EditText edit;
    private Button button;
    private ProgressDialog progressDialog;
    private boolean isLoginInProgress = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        edit = (EditText) findViewById(R.id.edit_timer);

        button = (Button) findViewById(R.id.btn_start);
        button.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                try {
                    if (edit.getText().toString().length() == 0) throw new Exception();
                    long dTime = Long.parseLong(edit.getText().toString());
                    new Handler().postDelayed(new Runnable() {
                        @Override
                        public void run() {
                            MainActivity.this.isLoginInProgress = false;
                            progressDialog.dismiss();
                        }
                }, dTime);

                    progressDialog.show();
                    isLoginInProgress = true;
                } catch (Exception e) {
                    Toast.makeText(MainActivity.this, "bad time value", Toast.LENGTH_SHORT).show();
                }

            }
        });

        progressDialog = new ProgressDialog(this);
        progressDialog.setMessage("loading");

        if (savedInstanceState != null) { // activity is restarted
            isLoginInProgress = savedInstanceState.getBoolean("fl_login");
            edit.setText(savedInstanceState.getString("edit"));
        }

        if (isLoginInProgress) { // Show dialog again
            progressDialog.show();
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        outState.putBoolean("fl_login", isLoginInProgress);
        outState.putString("edit", edit.getText().toString());
    }

    @Override
    public void onDestroy(){
        super.onDestroy();
        progressDialog.dismiss();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:56:11.597

您可以使用数据库（SQLITE）来存储您的值..

# java - 使用 CalDav API 集成 Yahoo 日历

> ID：14848621
> 
> 赞同：1
> 
> 时间：2013-02-13T07:40:23.923
> 
> 标签：java, google-calendar-api, caldav, ical4j, sardine

如果用户名和密码已知，我正在尝试访问用户的雅虎日历。我找到了一个使用 CalDav api 来完成任务的代码片段。代码使用 2 个库 sardine.jar 和 ical4j.jar。该代码的文档说该代码适用于谷歌日历和雅虎日历。只有我们必须相应地更改 CalDav 服务器的 url。代码适用于谷歌日历，但是当我更改雅虎日历的代码时，它不起作用。我收到以下错误：

Stacktrace:] 根本原因 net.fortuna.ical4j.data.ParserException：第 1 行错误：预期 [-3]，读取 [-1]

我认为这是由于 google 和 yahoo 的 ics 文件格式不匹配，或者没有为 yahoo 创建 ics 文件。当我从浏览器而不是雅虎使用这个 URL 时，我发现了一个谷歌日历的 ics 文件。

这是我使用的代码：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.Iterator;
import java.util.List;

import net.fortuna.ical4j.data.CalendarBuilder;
import net.fortuna.ical4j.data.ParserException;
import net.fortuna.ical4j.filter.Filter;
import net.fortuna.ical4j.filter.PeriodRule;
import net.fortuna.ical4j.model.Calendar;
import net.fortuna.ical4j.model.Component;
import net.fortuna.ical4j.model.DateTime;
import net.fortuna.ical4j.model.Period;
import net.fortuna.ical4j.model.Property;
import com.googlecode.sardine.Sardine;
import com.googlecode.sardine.SardineFactory;

public class sardineMain {
  @SuppressWarnings("deprecation")

 public static void main(String[] args) throws Exception {  

  Sardine sardine = SardineFactory.begin("Email","password");

  String url= "https://www.google.com/calendar/dav/emailid@gmail.com/events/";

   java.util.Calendar start = java.util.Calendar.getInstance();
   java.util.Calendar end = java.util.Calendar.getInstance();
   end.add(java.util.Calendar.MONTH, 1);

   //Fri May 25 08:56:36 KST 2012==Mon Jun 25 08:56:36 KST 2012

   Period period = new Period(new DateTime(start.getTime()),new DateTime(end.getTime()) );
   Filter filter = new Filter(new PeriodRule(period));

   //Collection<CalanderQueryOutput> results = new ArrayList<CalanderQueryOutput>();

   InputStream EventStream = sardine.get(url);
   BufferedReader br = new BufferedReader(new InputStreamReader(EventStream));
   CalendarBuilder builder = new CalendarBuilder();
   Calendar calendar = builder.build(br);

        List eventsToday = (List) filter.filter(calendar.getComponents(Component.VEVENT));
        CalanderQueryOutput caldavOutput = new CalanderQueryOutput();

   for (Iterator i = eventsToday.iterator(); i.hasNext();) {

     Component component = (Component) i.next();

     String CreatedS = component.getProperty(Property.CREATED).toString().trim();
 String SummaryS = component.getProperty(Property.SUMMARY).toString().trim();
 String StatusS = component.getProperty(Property.STATUS).toString().trim();
 String StartDateS = component.getProperty(Property.DTSTART).toString().trim();
 String EndDateS = component.getProperty(Property.DTEND).toString().trim(); 

 /*System.out.println(CreatedS);
 System.out.println(SummaryS);
 System.out.println(StatusS);
 System.out.println(StartDateS);
 System.out.println(EndDateS);*/
 System.out.println(component);

   }
       } 
```

这些是网址：

谷歌日历：[https](https://www.google.com/calendar/dav/) ://www.google.com/calendar/dav/ <>@gmail.com/events/

雅虎！日历：[https](https://caldav.calendar.yahoo.com/dav/) : //caldav.calendar.yahoo.com/dav/ <>@yahoo.es/Calendar//

请让我知道代码中的内容或如何以编程方式获取雅虎日历的 ics 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-13T22:15:47.037

使用以下 URL 格式：

[https://caldav.calendar.yahoo.com/dav/YOUR_USERNAME/Calendar/YOUR_CALENDAR_NAME](https://caldav.calendar.yahoo.com/dav/YOUR_USERNAME/Calendar/YOUR_CALENDAR_NAME)

**参考**

*   [与 Thunderbird/Lightning 同步日历](https://help.yahoo.com/kb/mozilla-lightning-sunbird-sln4704.html)
*   [日历 QA：CalDAV 支持](https://wiki.mozilla.org/Calendar:QA_CalDAV_Support)
*   [将 Yahoo 日历与移动设备或邮件客户端同步](https://help.yahoo.com/kb/synching-sln4707.html)

# php - 在 PHP 中使用带有多个分隔符和循环的explode() 时遇到问题

> ID：14848622
> 
> 赞同：0
> 
> 时间：2013-02-13T07:40:29.533
> 
> 标签：php, loops, explode, delimiter

我的字符串就是这样

```
$items = "2,1/3,5/2,5/3,2"; 
```

斜线 (/) 分隔的值是每个项目的顺序。

逗号 (,) 分隔的值是项目 ID 和数量。

我想创建一个循环来分隔 / 值，然后分隔 , 值，但我在这样做时遇到了麻烦。

```
$order_array = explode('/', $items);
    $order = '';
    foreach ($order_array as $item_array) {
        $item = explode(',', $item_array);
        foreach ($item as $key) {
            echo 'Item ID '.$key[0].' QTY'.$key[1];

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:45:59.337

完成后

```
$item = explode(',', $item_array); 
```

那么你在 $item[0] 和 $item[1] 中有你的值

去掉内

```
foreach ($item as $key) {
            echo 'Item ID '.$key[0].' 'QTY '.$key[1];

        } 
```

将值打印为

```
echo 'Item ID '.$item[0].' QTY '.$item[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:50:38.460

如前所述，在带有额外单引号的 echo 语句中存在语法错误。您也不需要最里面的 foreach 循环。

```
$order_array = explode('/', $items);
$order = '';
foreach ($order_array as $item_array) {
    $item = explode(',', $item_array);
    echo 'Item ID '.$item[0]. 'QTY '.$item[1];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:52:04.937

如果我没有错，下面是您要查找的代码。

```
<?php
$items = "2,1/3,5/2,5/3,2";
$order_array = explode('/', $items);
$order = '';
foreach ($order_array as $item_array)
{
    $item = explode(',', $item_array);
    echo 'Item ID '.$item[0].' QTY '.$item[1] .'<br />';
}
```

因为你正在做的是进入`$item`循环`foreach`并访问不存在`$key`的，所以它会抛出错误。`$key[0]`

# python - 如何使用 logging.BufferingFormatter

> ID：14848626
> 
> 赞同：0
> 
> 时间：2013-02-13T07:40:53.633
> 
> 标签：python, logging

Python日志教程[说](http://docs.python.org/2/howto/logging.html#useful-handlers)：

> 对于批量格式化多条消息，可以使用 BufferingFormatter 的实例。除了格式字符串（应用于批处理中的每条消息）之外，还提供了标题和尾格式字符串。

下面是如何`BufferingFormatter.format`实现的：

```
def format(self, records):
    """
    Format the specified records and return the result as a string.
    """
    rv = ""
    if len(records) > 0:
        rv = rv + self.formatHeader(records)
        for record in records:
            rv = rv + self.linefmt.format(record)
        rv = rv + self.formatFooter(records)
    return rv 
```

正如我们所看到的，它接受一堆记录而不是单个记录，因此每当您尝试将此格式化程序附加到任何处理程序时都会失败。此外，整个想法假设来自处理程序的一些特殊缓冲行为。

因此，我的问题是：这个格式化程序应该如何使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:46:29.990

您必须使用[`BufferingHandler`s](http://docs.python.org/2/library/logging.handlers.html#logging.handlers.BufferingHandler)才能使用相应`BufferingFormatter`的 s。

# entity-framework - EntityCommand 删除操作

> ID：14848627
> 
> 赞同：0
> 
> 时间：2013-02-13T07:41:00.737
> 
> 标签：entity-framework

是否可以在不使用 Stored Porcedures 的情况下使用 EntityCommand 进行删除操作？如果不是，那么仅使用实体键而不检索整个实体对象的可能性是什么。我不想使用 ObjectContext 的 Delete 方法！！LINQ to SQL DataContext 中的 ExecuteCommand 之类的东西？

我已经编写了一些代码如下，但语法不正确不会出现问题：请建议

```
using (EntityCommand command = new EntityCommand("DELETE VALUE e FROM objEntity.tblTable AS e WHERE e.Id="+int.Parse(TextBox1.Text)+"", objConn))
        { 
            command.CommandType = System.Data.CommandType.Text;
            command.ExecuteNonQuery();
         } 
```

# javascript - AngularJS - 推送 JSON 数据（结构正确，但缺少一些东西）

> ID：14848630
> 
> 赞同：0
> 
> 时间：2013-02-13T07:41:14.073
> 
> 标签：javascript, json, angularjs

我对 AngularJS 完全陌生，目前我正在转换一个小应用程序，尽管有一件事让我很不爽。

我的目标是向仪表板添加一个模块，如果我对 JSON 数据进行硬编码，一切都会正常工作，但是，在使用变量时似乎会出现问题。

我的服务：

```
var pushData = angular.toJson({"modID": "mod_rText_01", "sequence": 1, "group": 1, "dashboard": 1, "type": "text", "content": ["17%", "operating capacity"]});
console.log(' :: Module data pushed: ' + pushData);
$rootScope.$broadcast('locations', pushData); // broadcast to controller 
```

我的控制器：

```
// listen for service location updates
$scope.$on('locations', function(event, pushData) {
    console.log(' :: Module data received: ' + pushData);
    $scope.locations.push(pushData);
}); 
```

控制台日志：

```
:: Module data pushed: {"modID":"mod_rText_01","sequence":1,"group":1,"dashboard":1,"type":"text","content":["17%","operating capacity"]}
:: Module data received: {"modID":"mod_rText_01","sequence":1,"group":1,"dashboard":1,"type":"text","content":["17%","operating capacity"]} 
```

如前所述，如果我将控制器线更改为： `$scope.locations.push({"modID":"mod_rText_01","sequence":1,"group":1,"dashboard":1,"type":"text","content":["17%","operating capacity"]});`

它工作正常。我觉得我错过了什么！虽然，根据 console.log，变量“pushData”是正确的，但没有任何反应。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:51:33.640

问题是您将对象转换为 JSON。

你在这里做的是你实际上发送一个`STRING`，而不是一个对象。

`angular.toJson({"modID": "mod_rText_01", "sequence": 1, "group": 1, "dashboard": 1, "type": "text", "content": ["17%", "operating capacity"]});`

此字符串正在事件中发布并在控制器中获取。所以在下面的代码中，你实际上是在向数组添加一个字符串，而不是一个对象：

`$scope.locations.push(pushData);`

**解决方案：**只需发布常规 JavaScript 对象而不是字符串，它应该可以按预期工作。`$broadcast() and $on()`也能够处理真实的物体。

```
var dataObj = {"modID": "mod_rText_01", "sequence": 1, "group": 1, "dashboard": 1, "type": "text", "content": ["17%", "operating capacity"]};
$rootScope.$broadcast('locations', dataObj); 
```

# javascript - Javascript lastModified 日期

> ID：14848633
> 
> 赞同：1
> 
> 时间：2013-02-13T07:41:26.907
> 
> 标签：javascript

我的本地硬盘上有网页，这些网页使用 Javascript 来获取非 html 文件的 lastModified 日期并显示较新的条目。但是，它不适用于我家庭组中的其他计算机。我对 Javascript 非常陌生，并且知道的很少。在研究中发现它是概率。由于安全设置。是否有一种相对简单的编码方法，以便我的家庭组中的其他人可以看到这一点？（或者甚至是帮助我解决这个问题的链接？）我的 JavaScript 代码访问文件的 lastModified 日期并在列表条目旁边添加一个“更新的”.gif。家庭组中的所有 PC 都使用 Windows 7 和 Firefox 18。提前致谢！（如果需要，我会提供代码...）

# extjs - 当数据不包含“文本”节点时，嵌套列表出现问题

> ID：14848635
> 
> 赞同：0
> 
> 时间：2013-02-13T07:41:48.010
> 
> 标签：extjs, sencha-touch, sencha-touch-2, sencha-touch-2.1

我想渲染嵌套列表，以便当我向下钻取按钮时显示父节点的名称。我试过了，但看起来如果我得到的 JSON 没有带有 name 的节点`text`，它将无法工作。

这是本地数据的[小提琴](http://www.senchafiddle.com/#ECuRQ#CbW3N)（在我的应用程序中，我使用商店从服务中获取它，所以我无法控制节点的名称）

请注意后退按钮，当您下树时未填充标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:08:52.663

您可以在此`displayField`配置中`NestedList`指定`field`要使用的设置`title`和**项目 text**。默认情况下，它设置为，`text`但您可以将其指定为您的`model`字段之一。

这是基于您的示例的工作[小提琴。](http://www.senchafiddle.com/#ho8fi)只有`config`底部的 NestedList 有变化。

但是，如果您覆盖`getItemTextTpl` or `getTitleTextTpl`，则此配置将被忽略。

# java - 提取对象内部的值

> ID：14848637
> 
> 赞同：0
> 
> 时间：2013-02-13T07:41:56.443
> 
> 标签：java, jpa

我当前的代码

```
Object resultQuery;
EntityManagerFactory emf = Persistence.createEntityManagerFactory("TESTPU");
EntityManager em = emf.createEntityManager();
TypedQuery<Account> tp = em.createQuery("SELECT a FROM Account a WHERE a.email = :email AND a.pwd = :pwd AND a.role = 'admin'", Account.class);
tp.setParameter("email", this.username);
tp.setParameter("pwd", this.password);
resultQuery = tp.getSingleResult(); 
```

结果存储在`resultQuery`对象中，但我对如何提取对象内部的数据感到困惑。

假设我想从对象中提取`name`帐户表中的列`resultQuery`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T07:44:50.187

看起来问题出在`resultQuery`. 鉴于这`tp`是`TypedQuery<Account>`我*期望的类型：

```
Account result = tp.getSingleResult(); 
```

...在这一点上，大概很容易从`Account`. 例如：

```
String name = result.getName(); 
```

是否有任何理由`resultQuery`输入 as`Object`而不是`Account`在您的代码中？

我自己没有使用过`TypedQuery`，但[文档`getSingleResult()`](http://docs.oracle.com/javaee/6/api/javax/persistence/TypedQuery.html#getSingleResult%28%29)肯定表明这是正确的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:46:01.363

更新：

在这种情况下`tp.getSingleResult()`将返回一个`Account`对象。您可以将返回的值分配（不进行任何转换）给`Account`引用。

# ios - 分组 UITableViewCell 的 heightForRowAtIndexPath

> ID：14848639
> 
> 赞同：0
> 
> 时间：2013-02-13T07:42:09.200
> 
> 标签：ios, uitableview

我正在使用以下方法实现来计算`UITableViewCell`包含多行文本的 a 的高度：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
  if (indexPath.section == 1 && indexPath.row == 1) {
    NSDictionary *fields = self.messageDetailsDictionary[@"fields"];
    NSString *cellText = fields[@"message_detail"];
    UIFont *cellFont = [UIFont systemFontOfSize:14.0];
    CGSize constraintSize = CGSizeMake(250.0f, MAXFLOAT);
    CGSize labelSize = [cellText sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:NSLineBreakByWordWrapping];

    return labelSize.height + 20;

  } else {

    return tableView.rowHeight;  

  }

} 
```

为了完整起见，这里是`cellForRowAtIndexPath`该单元格的条目：

```
 UITableViewCell *cell = [[UITableViewCell new] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"DetailCell"];
  if (cell == nil) {
    cell = [[UITableViewCell new] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"DetailCell"];
  }
  cell.textLabel.lineBreakMode = NSLineBreakByWordWrapping;
  cell.textLabel.font = [UIFont systemFontOfSize:14.0];
  NSDictionary *fields = self.messageDetailsDictionary[@"fields"];
  cell.textLabel.numberOfLines = 0; // This means multiline
  cell.textLabel.text = fields[@"message_detail"];

  return cell; 
```

位于`UITableViewCell`Grouped`UITableView`中，这很重要，因为它会影响单元格的宽度。

这在某种程度上是有效的，它确实计算了一个足够大的单元格高度以容纳正在输入的文本，但它似乎有点太大了，因为单元格的顶部和底部有太多的空间。这取决于文本的数量，所以我认为它与`return labelSize.height + 20;`语句无关。我怀疑这取决于我使用的“250.0f”值，`CGSizeMake`但我不知道正确的值应该是什么。

最终我想要的是有一个单元格，在任何内容大小的文本上方和下方都有一致的填充。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:32:19.470

通过消除过程，结果证明幻数是 270.0f。tableView框架的宽度可以从self.tableView.frame.size.width中获取。这是 320.0f，从中取 50.0f（等于 270.0f）似乎会产生一致的结果。

所以方法应该如下：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{

  if (indexPath.section == 1 && indexPath.row == 1) {

    NSDictionary *fields = self.messageDetailsDictionary[@"fields"];
    NSString *cellText = fields[@"message_detail"];
    UIFont *cellFont = [UIFont systemFontOfSize:14.0];
    CGSize constraintSize = CGSizeMake(self.tableView.frame.size.width - 50.0f, MAXFLOAT);
    CGSize labelSize = [cellText sizeWithFont:cellFont constrainedToSize:constraintSize lineBreakMode:NSLineBreakByWordWrapping];

    return labelSize.height + 20.0f;

  } else {

    return tableView.rowHeight;  

  }

} 
```

我不确定为什么 50.0f 是正确的值，因为我不确定 50.0f 中有多少是从单元格边框到 tableView 边缘的距离以及有多少是单元格本身的内部填充但是除非您修改了这两个值中的任何一个，否则它会起作用。

# html - 将鼠标悬停在菜单列表上时展开整个 div 以及子菜单项

> ID：14848641
> 
> 赞同：0
> 
> 时间：2013-02-13T07:42:09.607
> 
> 标签：html, css

我将菜单栏保留在 div 中...当我在菜单项上滚动时，列表会出现..但我希望整个 div 与子菜单列表一起移动展开..请任何人帮忙.. . 这是我的完整代码..

```
*<doctype! html>
<html>
<head>
<style>
nav ul ul {
    display: none;
}
    nav ul li:hover > ul {
        display: block;
    }

    nav ul {
    background: #efefef; 
    background: linear-gradient(top, #efefef 0%, #bbbbbb 100%);  
    background: -moz-linear-gradient(top, #efefef 0%, #bbbbbb 100%); 
    background: -webkit-linear-gradient(top, #efefef 0%,#bbbbbb 100%); 
    box-shadow: 0px 0px 9px rgba(0,0,0,0.15);
    padding: 0 20px;
    border-radius: 10px;  
    list-style: none;
    position: relative;
    display: inline-table;
}
    nav ul:after {
        content: ""; clear: both; display: block;
    }
    nav ul li {
    float: left;
}
    nav ul li:hover {
        background: #4b545f;

    }
        nav ul li:hover a {
            color: #fff;
        }

    nav ul li a {
        display: block; padding: 25px 40px;
        color: #757575; text-decoration: none;
    }
    nav ul ul {
    background: #5f6975; border-radius: 0px; padding: 0;
    position: absolute; top: 100%;
}
    nav ul ul li {
        float: none; 
        border-top: 1px solid #6b727c;
        border-bottom: 1px solid #575f6a;
        position: relative;
    }
        nav ul ul li a {
            padding: 15px 40px;
            color: #fff;
        }   
            nav ul ul li a:hover {
                background: #4b545f;
            }
</style>
</head>
<body>
<div style="width:100%;background:blue;">
<nav>
    <ul>
        <li><a href="#">Home</a></li>
        <li><a href="#">Tutorials</a>
            <ul>
                <li><a href="#">Photoshop</a></li>
                <li><a href="#">Illustrator</a></li>
                <li><a href="#">Web Design</a>
                    <ul>
                        <li><a href="#">HTML</a></li>
                        <li><a href="#">CSS</a></li>
                    </ul>
                </li>
            </ul>
        </li>
        <li><a href="#">Articles</a>
            <ul>
                <li><a href="#">Web Design</a></li>
                <li><a href="#">User Experience</a></li>
            </ul>
        </li>
        <li><a href="#">Inspiration</a></li>
    </ul>
</nav>
</div>
</body>
</html>* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:02:44.883

我认为您可以通过在主菜单标签上强制固定宽度来确保子菜单的长度与主菜单标签相同，如下所示：

```
nav ul li { width: 170px; } 
```

我在[这里创建了一个实时片段](http://jsbin.com/ureyiy/1/edit)。但是，请注意，这样做会导致较长的标签被塞到第二行。

# assembly - 这个带有 IO 端口 0x61 和 0x20 的 x86 汇编语言代码有什么作用？

> ID：14848645
> 
> 赞同：5
> 
> 时间：2013-02-13T07:42:20.603
> 
> 标签：assembly, x86, interrupt

这是代码：

```
push ax
in al, 0x61
or al, 0x80  ; 10000000b
out 0x61, al
and al, 0x7F ; 01111111b
out 0x61, al
mov al, 0x20
out 0x20, al
pop ax 
```

它有什么作用？我只知道它连接到定时器中断。什么在`0x61`和`0x20`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T12:46:41.173

附近可能有`in al, 0x60`指示。

端口 0x60 和 0x61 与 PC 中的键盘控制器通信。端口 0x60 包含按下的键，而 0x61 包含状态位。

切换状态端口的高位表示您已获得密钥并想要下一个。

端口 0x20 是中断控制器，您可以在此处确认您已处理了中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T07:55:27.147

这与 C++ 无关。它是纯粹的 x86 汇编语言，带有编译器特定的包装器，以允许在编译器中进行内联汇编。编译器可以是 Turbo C、Turbo Pascal 或 Microsoft 编译器或任何遵循 Borland/Microsoft 内联汇编约定的编译器...

这是 IBM PC（和克隆）代码

端口 0x61 与使用 PIT（可编程间隔定时器）的 PC 扬声器相关

端口 0x20 与 PIC（可编程中断控制器）有关

寻找用 PC 扬声器（不是声卡）播放声音的代码，你会发现类似的代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T07:49:56.183

```
asm {
    push ax            //normal push opr
    in al, 0x61        // in for input. 0x61 is hexadecimal number. just like 14,15 as in decimal.in c++ we use 0x

    or al, 0x80 // 10000000b  //or operation b/w lower butes of accumulator and 0x80
    out 0x61, al  //output 
    and al, 0x7F // 01111111b  //and opr b/w al and 0x7f
    out 0x61, al  //
    mov al, 0x20   //move 0x20 into  lower bytes of accumulator(al) 
    out 0x20, al   
    pop ax      //remove accumulator from stack.
    } 
```

# javascript - Javascript + HTML 如何验证多维选择对象

> ID：14848650
> 
> 赞同：2
> 
> 时间：2013-02-13T07:42:27.110
> 
> 标签：javascript, html, multidimensional-array

我正在尝试验证所有材料下拉列表。但是我`frm.material is undefined`的系统出现错误。

**HTML 标记**

```
<form name="testFrm" id="textFrm">Material 1
    <select name="material[1][]" class="Form_dropdown material_dd">
        <option value="-1">Select</option>
        <option value="2">Fine Silk</option>
        <option value="10">NZ Wool</option>
        <option value="3">Thick Silk</option>
        <option value="1">Titbetan Wool</option>
    </select>
    <select name="material[1][]" class="Form_dropdown material_dd">
        <option value="-1">Select</option>
        <option value="2">Fine Silk</option>
        <option value="10">NZ Wool</option>
        <option value="3">Thick Silk</option>
        <option value="1">Titbetan Wool</option>
    </select>
    <br />Material 2
    <select name="material[2][]" class="Form_dropdown material_dd">
        <option value="-1">Select</option>
        <option value="2">Fine Silk</option>
        <option value="10">NZ Wool</option>
        <option value="3">Thick Silk</option>
        <option value="1">Titbetan Wool</option>
    </select>
    <br />Material 3
    <select name="material[3][]" class="Form_dropdown material_dd">
        <option value="-1">Select</option>
        <option value="2">Fine Silk</option>
        <option value="10">NZ Wool</option>
        <option value="3">Thick Silk</option>
        <option value="1">Titbetan Wool</option>
    </select>
    <select name="material[3][]" class="Form_dropdown material_dd">
        <option value="-1">Select</option>
        <option value="2">Fine Silk</option>
        <option value="10">NZ Wool</option>
        <option value="3">Thick Silk</option>
        <option value="1">Titbetan Wool</option>
    </select>
    <select name="material[3][]" class="Form_dropdown material_dd">
        <option value="-1">Select</option>
        <option value="2">Fine Silk</option>
        <option value="10">NZ Wool</option>
        <option value="3">Thick Silk</option>
        <option value="1">Titbetan Wool</option>
    </select>
    <br />
    <input type="button" onclick="return checkForm()" value="validate" />
</form> 
```

我创建了一个 jsFiddle，你可以在这里找到[http://jsfiddle.net/QgghZ/12/](http://jsfiddle.net/QgghZ/12/)

第一个选择选项的值是`<option value="-1">Select</option>`需要检查是否有任何下拉菜单未设置为选择。

我需要一个 js 函数来验证这些下拉列表。

提前谢谢大家的支持

**编辑**

感谢大家修复 jsFiddle 问题，但我需要一个可以迭代这些下拉列表的验证函数。

**编辑**

如果我使用以下 JS，它会显示名称

```
var boxes = document.getElementsByTagName('select');
    for(i = 0; i < boxes.length; i++){

           console.log(boxes[i].name);

    }

// Output: material[1][], material[1][], material[2][] .... someotherDropdowns 
```

**回答**

这是我获得所有值的方式

```
function checkForm(){
    var e = false;
    var boxes = document.getElementsByClassName('material_dd');
    for(i = 0; i < boxes.length; i++){
        if(boxes[i].value == '-1'){
           e = true;
        }          
    }
    if(e){
        alert('Please select a material');
        return false;
    } 
```

}

因此，即使还有其他选择框，它也只会检查材料下拉列表。我可以遍历该值以查看其中是否有-1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:13:31.520

除了表单名称上的拼写错误之外，您不会通过 frm.material 获得选择的数组，它们不会像这样分组，就像您在后端脚本中收到表单时一样。你可以用类似的东西来访问它们`frm["material[1][]"]`，但我会使用另一种方法来代替，`document.getElementsByClassName('material_dd')`这样你就可以知道那里有多少元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:53:12.740

我不明白为什么它不起作用，但是我稍微更改了您的代码，现在它可以工作了

```
[jsFiddle][1]

  [1]: http://jsfiddle.net/QgghZ/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:51:07.820

您的 jsfiddle 设置设置错误，以下是更新的链接：

```
<input type="button" onClick="checkForm()" value="validate" /> 
```

[http://jsfiddle.net/QgghZ/7/](http://jsfiddle.net/QgghZ/7/)

此外，您的表单标签为：

```
<form name="testFrm" id="textFrm">Material 1 
```

然后在你调用的脚本中：

```
 frm = document.getElementById("testFrm"); 
```

没有 ID 为 testFrm 的表单

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T07:54:36.760

代替 `frm = document.getElementById("testFrm");`

和 `frm = document.getElementById("textFrm");`

# objective-c - 更改 NSMutableArray 中的对象

> ID：14848653
> 
> 赞同：0
> 
> 时间：2013-02-13T07:42:37.513
> 
> 标签：objective-c, object, replace, nsmutablearray

我有一个 NSMutableArray。这是我的数组的结构：

```
{
Distance = 0;
Name = Name1;
Town = Town1;
}
{
Distance = 0;
Name = Name2;
Town = Town2;
} 
```

现在我想替换“距离”。例如，“距离 = 15”。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:44:39.213

好的，假设您的初始`NSMutableArray`值称为**初始**值（假设它包含`NSMutableDictionary`对象...

要更改第一个元素的`distance`值：

```
[[initial objectAtIndex:0] setValue:[NSNumber numberWithInt:15] 
                           forKey:@"Distance"]; 
```

* * *

**如果**您想对数组中的**每个**条目执行更正，只需这样做：

```
for (NSMutableDictionary* entry in initial)
{
     [entry setValue:[NSNumber numberWithInt:15] 
              forKey:@"Distance"];
} 
```

# java - 如何在 wicket 6.4 中从 AbstractRequestCycleListener 访问 WebSession？

> ID：14848654
> 
> 赞同：0
> 
> 时间：2013-02-13T07:42:39.937
> 
> 标签：java, wicket

我自己写了`RequestCycleListener`一些信息。如何`WebSession`从此类访问 wicket 对象？

```
public class MyRequestCycleListener extends AbstractRequestCycleListener {
    @Override
    public void onBeginRequest(RequestCycle cycle) {
        super.onBeginRequest(cycle);

    }

    @Override
    public void onEndRequest(RequestCycle cycle) {
        super.onEndRequest(cycle);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:49:27.027

在您的代码中的任何地方，您都应该能够通过以下方式访问当前会话：

```
WebSession session = WebSession.get(); 
```

# ruby-on-rails - 定制设计创建动作

> ID：14848655
> 
> 赞同：0
> 
> 时间：2013-02-13T07:42:40.437
> 
> 标签：ruby-on-rails, ruby, devise

在我的控制器中创建我有以下代码

```
def create
    params[:user].merge!(verified: true)
    super
  end 
```

在我的表单上，我有带有名称的复选框`tos_agreement`。如果我的 tos_agreement 值在 params != '1' 中，我如何强制设计不要在 super 中保存资源，而是通过向@user.errors 添加错误来渲染？

我不能使用模型方法来实现这样的复选框，所以我必须通过控制器处理它而不重写设计的超级方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:55:55.463

您可以`validates_acceptance_of`在 rails 内使用提供。[在这里](http://apidock.com/rails/ActiveModel/Validations/ClassMethods/validates_acceptance_of)查看

# python - PyQt：类对象删除，调用析构函数但内存不释放

> ID：14848660
> 
> 赞同：2
> 
> 时间：2013-02-13T07:43:07.240
> 
> 标签：python, qt, memory, memory-leaks, pyqt

我正在创建一个使用`pyQt`但面临内存泄漏问题的工具。

当我使用自己的垃圾从 UI 中删除包含 python 和 pyQt 成员变量的对象时，它会调用相应类的析构函数。但是当我从终端运行'top'命令时，只要我使用应用程序并最终崩溃，内存就不会被释放并继续占用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-09T18:54:53.787

我之前已经遇到过这个问题。我使用了这种方法，对我来说效果很好：

```
widget.setParent(None)
widget.deleteLater() 
```

希望能帮助到你！

编辑：

也请看这个：[https ://stackoverflow.com/a/30245816/6337523](https://stackoverflow.com/a/30245816/6337523 "邮政")

# php - 哪个更好用：Google APIs Client Library for PHP (OR) Online OAuth 2.0 for Login directly？

> ID：14848671
> 
> 赞同：2
> 
> 时间：2013-02-13T07:43:34.110
> 
> 标签：php, google-api, oauth-2.0, google-oauth, google-api-console

我目前正在尝试在我的 PHP 应用程序中实现[Google 的 OAuth 2.0 登录](https://developers.google.com/accounts/docs/OAuth2Login)：到目前为止，我已经能够实现 ** [this](http://techyyz.com/openid.html) **。

我已经在 Google API 控制台上注册了该应用程序，并从 Google 获得了用于 OAuth 2.0 API 的必要参数。

我想知道哪个是实施的最佳选择？[面向对象的方法使用用于 PHP 的 Google API 客户端库](https://code.google.com/p/google-api-php-client/)或[用于登录的 Google 的 OAuth 2.0](https://developers.google.com/accounts/docs/OAuth2Login)？

使用客户端库而不是直接在线 API 有什么好处，反之亦然？我正在寻找一个长期可维护的代码。因此，请记住这一点，并尽可能说明两种方法的优缺点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:10:12.043

在我看来，您正在做的事情正在发挥作用，所以有什么问题？除了简单的 OAuth 登录之外，大概 PHP 库还有很多其他的东西。如果您需要这些东西，那么您可能应该使用该库。

# jsf - 需要 使用分数或分隔符时抛出错误

> ID：14848675
> 
> 赞同：1
> 
> 时间：2013-02-13T07:43:52.497
> 
> 标签：jsf, converter

我有一个`InputText`连接到 int 类型的 Bean 属性的组件。但是，我被迫`NumberConverter`只使用

即使我指定`integerOnly = true`，它也会通过删除小数部分来接受双精度，并且在验证阶段不会引发错误

我的问题是，有没有办法`NumberConverter`抛出转换异常和错误消息（最好是客户端，我的意思是，当我退出该字段时）

我们正在使用 JSF 1.2

（实际上，NumberConverter 的 getAsObject() 有这段代码，当从 BigDecimal 转换为 Integer 时，当精度损失时应该抛出异常

```
GenericConverterFactory fac = GenericConverterFactory .getCurrentInstance();
      try
      {
        value = fac.convert(value, expectedType);
      }

) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T11:38:49.663

创建一个扩展默认值的自定义转换器，`NumberConverter`您可以在委托给之前检查字符串值`NumberConverter`，然后改用它。

```
public class MyNumberConverter extends NumberConverter {

    public MyNumberConverter() {
        setIntegerOnly(true);
    }

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String submittedValue) {
        if (submittedValue != null && !submittedValue.matches("[0-9]+")) {
            throw new ConverterException("Please enter digits only");
        }

        return super.getAsObject(context, component, submittedValue);
    }

} 
```

```
<f:converter converterId="myNumberConverter" /> 
```

# sql-server - 从数据库中删除 __MigrationHistory 表

> ID：14848686
> 
> 赞同：5
> 
> 时间：2013-02-13T07:45:13.217
> 
> 标签：sql-server, entity-framework, ef-code-first, database-migration, entity-framework-migrations

我想知道如果我`__MigrationHistory`从工作数据库中删除表会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T08:00:32.253

根据我的问题，我决定删除此表，应用程序启动并抛出一个已经存在于数据库`Exception`中的所有`Entity`内容`Entity`。因此，如果您已经部署了应用程序，请不要尝试删除此表。

# android - 安卓服务未启动

> ID：14848692
> 
> 赞同：0
> 
> 时间：2013-02-13T07:45:50.763
> 
> 标签：android

我正在我的应用程序中创建一项服务。这是我使用的代码。

```
public class LocationService extends Service{

@Override
public IBinder onBind(Intent intent) {
    return null;
}

@Override
public void onStart(Intent intent, int startId) {
    super.onStart(intent, startId);
    Log.e("Location Service", "onStrat of service");
}

@Override
public void onCreate() {
    super.onCreate();
    Log.e("Location Service", "onCreate of service");
    LocationOperations locationOperations = new LocationOperations(getBaseContext());
    locationOperations.retrieveLocation();
} 
```

}

也在清单文件中的应用程序标签内定义

```
<service android:name=".LocationService"
         android:process=":LocationService">
    </service> 
```

在 Activity 的 onCreate 方法中调用此 Service

```
Context context = this;
    Intent service = new Intent(context, LocationService.class);
    service.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startService(service); 
```

但是这个服务没有启动。我在 LogCat 窗口中看不到任何日志消息请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:54:42.453

```
 ServiceConnection serviceConnection = new ServiceConnection() {

                @Override
                public void onServiceDisconnected(ComponentName name) {
                                //do stuff when service disconnected
                }

                @Override
                public void onServiceConnected(ComponentName name, IBinder service) {
                                //do stuff when service connected
                }
            };

context.bindService(new Intent(context, LocationService.class), serviceConnection ,
                    Context.BIND_AUTO_CREATE); 
```

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:47:55.347

onStart() 已弃用，而是重写[OnStartCommand()](http://developer.android.com/reference/android/app/Service.html#onStartCommand%28android.content.Intent,%20int,%20int%29)，这应该是调用 startActivity() 时调用的函数。

另外，我不确定您为什么将`Intent.FLAG_ACTIVITY_NEW_TASK`标志添加到您的意图中。我认为这里不需要它。

# android - 膨胀 Google Maps v2 片段会导致 ClassNotFoundException

> ID：14848698
> 
> 赞同：1
> 
> 时间：2013-02-13T07:46:24.400
> 
> 标签：android, google-maps, google-maps-android-api-2, google-play-services

对不起，我发布了这个问题。我参考了很多链接。但仍然无法解决问题

1.  我已经链接了 google-play-services_lib 服务。
2.  将属性设置为 Google Inc.
3.  从谷歌控制台获取 API_KEY。

这是我的 Manifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.abc.xyz"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

 <permission
    android:name="com.example.mapdemo.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

     <uses-library android:name="com.google.android.maps"/>

    <activity
        android:name="com.abc.xyz.MapViews"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

     <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="removed" />

</application>

</manifest> 
```

这是我的 .java 文件：

```
public class MapViews extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map_views);
    }
} 
```

这是我的 map_views.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/map"
       android:name="com.google.android.gms.maps.SupportMapFragment"
       android:layout_width="wrap_content"
       android:layout_height="match_parent" /> 
```

添加我收到错误：

```
java.lang.RuntimeException: Unable to start activity \
    ComponentInfo{com.abc.xyz/com.abc.xyz.MapViews}: \
    android.view.InflateException: Binary XML file line #2: \
    Error inflating class fragment
 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
 at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
 at android.app.ActivityThread.access$2300(ActivityThread.java:125)
 at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
 at android.os.Handler.dispatchMessage(Handler.java:99)
 at android.os.Looper.loop(Looper.java:123)
 at android.app.ActivityThread.main(ActivityThread.java:4627)
 at java.lang.reflect.Method.invokeNative(Native Method)
 at java.lang.reflect.Method.invoke(Method.java:521)
 at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
 at dalvik.system.NativeStart.main(Native Method)

Caused by: android.view.InflateException: Binary XML file line #2: \
    Error inflating class fragment
 at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
 at android.view.LayoutInflater.inflate(LayoutInflater.java:385)
 at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
 at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
 at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
 at android.app.Activity.setContentView(Activity.java:1647)
 at com.abc.xyz.MapViews.onCreate(MapViews.java:12)
 at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
 ... 11 more

Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader \
    dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:\
    /data/app/com.abc.xyz-2.apk]
 at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
 at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
 at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
 at android.view.LayoutInflater.createView(LayoutInflater.java:466)
 at android.view.LayoutInflater.onCreateView(LayoutInflater.java:544)
 at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
 at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
 ... 19 more` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:33:31.280

如果您在旧设备（Honeycomb 之前）上使用 Fragment，则应始终将 Activity 从`FragmentActivity`.

因此，解决您的问题：将您的`MapViews`课程更改为 extend `FragmentActivity`。

```
import android.support.v4.app.FragmentActivity;

public class MapViews extends FragmentActivity {
  ... 
```

更多信息和完整示例： [http ://android-er.blogspot.co.uk/2012/12/using-supportmapfragment.html](http://android-er.blogspot.co.uk/2012/12/using-supportmapfragment.html)

**解释：**

这里重要的例外是：`java.lang.ClassNotFoundException: android.view.fragment`.

这样做的原因是，在 Honeycomb 之前的设备上，当 Activity 尝试加载 xml 布局时，它会找到`fragment`它无法理解的关键字，因此它会尝试将其加载为简单的内置视图类 ( `android.view.fragment`)。

如果您扩展`FragmentActivity`setContentView 方法将被覆盖，因此它可以处理`fragment`关键字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:51:25.187

你的布局有问题。只需尝试像这样定义 MapView ：

```
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="Your Maps API Key goes here"
/> 
```

# c# - 如何简化泛型方法的调用，我创建它以跨项目的不同层从一种类型转换为另一种类型

> ID：14848700
> 
> 赞同：2
> 
> 时间：2013-02-13T07:46:30.157
> 
> 标签：c#, generics

我希望第二个调用风格应该类似于第一个调用风格。请参阅我的代码中的详细信息。非常感谢任何帮助。

这是我正在使用的代码。

// 第一种方法的调用方式

```
 var source = db.ThinkFeeds.Single(tf => tf.ID == 1);
            var target = new MyProduct.UIEntities.ThinkFeed();
            TypeConverter.ConvertBlToUi(source, target); 
```

//调用第二种方法的样式。这真的是一种奇怪的调用方式。

```
 var source = MyProduct.UIEntities.Book.GetBookByID(1);
        var target = new MyProduct.DTOEntities.Book();
        TypeConverter.ConvertUiToDto<MyProduct.UIEntities.Book, MyProduct.DTOEntities.Book, Book>(source, target); 
```

//第一种方法

```
 public static void ConvertBlToUi<TBl, TUi>(TBl entitySource, TUi entityTarget)
    {

    } 
```

//第二种方法

```
 public static void ConvertUiToDto<TUi, TDto, TEntity>(TUi uiEntity, TDto dtoEntity)
        where TDto : DTOEntities.MyProductDTO<TEntity, TDto>
        where TEntity : EntityObject
    {

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T07:57:03.407

你不能。[通用方法](http://msdn.microsoft.com/en-gb/library/twcad0zb%28v=vs.110%29.aspx)，类型推断：

> 编译器可以根据你传入的方法参数来推断类型参数；它不能仅从约束或返回值推断类型参数。所以 ...

您展示的第一种样式是使用类型推断，但这只是一种方便的速记。有时（如这里）类型推断无法工作，因此您必须显式提供类型参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:57:26.397

in 中的`TEntity`类型参数`ConvertUiToDto`会阻止类型推断，并在调用此方法时强制您显式指定所有类型参数。不幸的是，此类型参数用于对 施加类型约束`TDto`：

```
where TDto : DTOEntities.LightsailDTO<TEntity, TDto> 
```

只要此约束仍然存在，您将无法`TEntity`从声明中删除并在调用时使用类型推断`ConvertUiToDto`。

现在对我来说问题是：为什么`LightsailDTO`需要`TEntity`类型参数？DTO 不应该允许传输实体数据而不必公开它们吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:21:11.487

我实际上问了一个类似的问题并自己提供了答案。

[是否有 C# 无法使用类型约束推断泛型类型参数的解决方法？](https://stackoverflow.com/questions/14004000/is-there-a-workaround-to-c-sharp-not-being-able-to-infer-generic-type-arguments)

基本上，您唯一的选择是传递 DTO 两次，让它分别推断每个泛型类型参数，如下所示：

```
public static void ConvertUiToDto<TUi, TDto, TEntity>(TUi uiEntity, TDto dtoEntity, DTOEntities.MyProductDTO<TEntity, TDto> dtoEntity2)
    where TDto : DTOEntities.MyProductDTO<TEntity, TDto>
    where TEntity : EntityObject
{

} 
```

并这样称呼它：

```
var source = MyProduct.UIEntities.Book.GetBookByID(1);
var target = new MyProduct.DTOEntities.Book();
TypeConverter.ConvertUiToDto(source, target, target); 
```

# batch-file - .BAT 从第一行文本复制和重命名文件以及修改日期？

> ID：14848704
> 
> 赞同：0
> 
> 时间：2013-02-13T07:46:58.143
> 
> 标签：batch-file, copy

我该怎么做呢？

我希望将文件 (myfile) 复制到另一个文件夹并使用其第一行以及修改或创建日期/时间 (yy-mm-dd--hh.mm_%firstline%.txt) 重命名。

那有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T09:45:33.287

我不知道 DIR 命令是否总是以相同的方式显示日期和时间，无论语言环境如何，但假设输出如下：

```
13/02/2013  10:19                 8 exitsave.txt 
```

我认为以下脚本应该可以完成这项工作。它还假定您的 exitsave.txt 文件的第一行不包含任何特殊字符，例如：或 /，这些字符在文件名中是被禁止的。

```
@echo off

REM  List the choices here.
ECHO 1\. Save and rename.
ECHO 2\. Do nothing and quit.

REM  Set the number of choices (ugly but it's not the worst thing here)
SET numchoice=2

:mainloop

    SET /P choice= Enter your choice : 

    FOR /L %%i IN (1, 1, %numchoice%) DO (
        IF "%choice%"=="%%i" (
            GOTO :choice_%%i
        )
    )
    GOTO mainloop

:choice_1

    SET filename=exitsave
    SET firstline=

    REM Read the first line of the file
    FOR /F "tokens=1* usebackq delims=" %%a IN (%filename%) DO (
        SET firstline=%%a
        REM  exit after reading the first line, or the FOR loop will read the entire file
        GOTO outofloop
    )

    :outofloop
    REM DIR /TC %1 lists the file and its creation date/time,
    REM we use FINDSTR to filter the output to just the line we need
    REM Assuming a DD/MM/YYYY format, this FOR loop splits the line into :
    REM %%i = DD, %%j = MM, %%k = YYYY and the rest of the line...

    FOR /F "delims=/ tokens=1,2,3* usebackq" %%i IN (`DIR /TC %filename% ^| FINDSTR %filename%`) DO (

        REM We need to split the %%k variable again, this time with the space delimiter :
        REM %%a = YYYY, %%b = rest of the line

        FOR /F "tokens=1,2*" %%a IN ("%%k") DO (

            REM Assuming a HH:MM format, again we split the %%b variable using the ":" delimiter :
            REM %%x = HH, %%y = MM

            FOR /F "delims=: tokens=1,2" %%x IN ("%%b") DO (

                REM finally, we can generate our new filename
                COPY %filename% SAVES\%%a-%%j-%%i-%%x.%%y--%firstline%.txt

            )
        )
    )
    ECHO Done!
    PAUSE
    EXIT

:choice_2

    REM  Put your code here

    PAUSE
    EXIT 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:10:21.100

围绕这些主题有很多问题和答案，尽管没有一个与您的完全相同。您可能应该在此处发布之前进行搜索。

但是，因为（就像我说的那样）我认为没有任何问题具有相同的细节，而且对于开始将它们全部放在一起的人来说可能很难，这里是代码：

```
@echo off & setlocal enabledelayedexpansion
for /f "delims=" %%i in (exitsave.txt) do (
    copy exitsave.txt %cd%\SAVES
    set title=!date:~12,2!-!date:~7,2!-!date:~4,2!--!time:~0,2!.!time:~3,2!_%%i && goto next
:next
ren %cd%\SAVES\exitsave.txt %title%.txt
if exist file_path echo procedure completed successfully
pause
exit 
```

您需要做的就是替换`file_path`为原始文件的路径以及`file_path2`您要放入的位置。

如果我遗漏了什么，请告诉我。

--EDIT--`file_path`通过提问者的更多输入（希望）更改为实际位置等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T10:34:54.677

好的，这是最终结果！哇哦！！！！我刚刚修改了@Miklos：

```
 SET filename=exitsave
    SET firstline=

REM Read the first line of the file
FOR /F "tokens=1* usebackq delims=" %%a IN (%filename%) DO (
    SET firstline=%%a
    REM  exit after reading the first line, or the FOR loop will read the entire file
    GOTO outofloop
)

:outofloop
REM DIR /TC %1 lists the file and its creation date/time,
REM we use FINDSTR to filter the output to just the line we need
REM Assuming a MM/DD/YYYY format, this FOR loop splits the line into :
REM %%i = MM, %%j = DD, %%k = YYYY + the rest of the line...

FOR /F "delims=/ tokens=1,2,3* usebackq" %%i IN (`DIR /TC %filename% ^| FINDSTR %filename%`) DO (

    REM So we need to split the %%k variable, this time with the space delimiter
    REM %%a = YYYY, %%b = HH:MM, %%c = rest of the line (for determining AM/PM)

    FOR /F "tokens=1,2,3*" %%a IN ("%%k") DO (

        REM Assuming a HH:MM format, again we split the %%b variable using the ":"
        delimiter
        REM %%x = HH, %%y = MM

        FOR /F "tokens=1,2 delims=:" %%x IN ("%%b") DO (

            REM finally, we can generate our new filename

      ECHO F | XCOPY %filename% "SAVES\(%%a-%%i-%%j@%%x.%%y%%c)__%firstline%.txt" /Q /Y

            )
        )
    )
)
PAUSE 
```

1.  我将他的脚本剪切成我需要拼接到我的实用程序文件中的基本内容。
2.  我的语言环境是 en-US，因此当使用 findstr 命令解析 dir /TC 命令时，我最终得到 MM/DD/YYYY，因此我相应地移动了我的变量以实现所需的文件名。
3.  我的最终目标是将完成的实用程序分发给朋友，所以我不知道如何为那些生活在其他国家的人解决语言环境问题......
4.  我意识到我需要将 AM/PM 签名附加到我的文件名中，因此我相应地添加了一个令牌。
5.  最后，我意识到有些人可能没有创建“SAVES”文件夹，所以为了简化实用程序，我选择了 XCOPY，它比复制功能强大得多；它可以复制文件以及文件夹结构或创建指定的文件夹结构。我使用的代码行取自[https://stackoverflow.com/a/3018371/2067486](https://stackoverflow.com/a/3018371/2067486)，因此用户无需告诉 XCOPY 任何内容。

编辑 2/15/13：我想出了如何在军队时间而不是 AM/PM 中保存文件。这样可以更好地对文件进行排序。将此代码放在 XCOPY 命令所在的位置，并用新的 XCOPY 覆盖旧的 XCOPY。！！重要的！！确保将 SETLOCAL ENABLEDELAYEDEXPANSION 放在整个脚本开头的某个位置，以便 FOR 命令可以处理 !variables!

```
SET clock=%%x
IF "%%c" == "PM" (
     SET /A army=!clock! + 12
) ELSE (
     SET /A army=0!clock! & SET army=!clock:~-2!
)

ECHO F | XCOPY %filename% "SAVES\(%%a-%%i-%%j@!army!.%%y)%firstline%.txt" /Q /Y 
```

# signalr - Autofac 和 Signalr

> ID：14848706
> 
> 赞同：1
> 
> 时间：2013-02-13T07:47:04.157
> 
> 标签：signalr, autofac

我已经在 Autofac 组上发布了这个，但没有运气。

我正在使用来自 Nuget 的 Autofac3,0.1、SignalR 1.0.0pre2 和 Autofac.SignalR.3.0.0 包。我正在使用 Autofac 注册类型，但在分辨率上我得到了

“没有为此对象定义无参数构造函数。”

错误

我的中心看起来像

```
public class UserHub : AuthenticatingHub
{
    private readonly IUserService _userService;

    public UserHub(IUserService userService)
    {
        _userService = userService;
    } 
```

我的容器构建器是这样的：

```
 var builder = new ContainerBuilder();
        builder.RegisterControllers(typeof(MvcApplication).Assembly);

        var serviceAssemblies = Assembly.Load("Services");
        builder.RegisterAssemblyTypes(serviceAssemblies).AsImplementedInterfaces();
        builder.RegisterType<UserHub>();

        var container = builder.Build();

        DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
        GlobalHost.DependencyResolver = new Autofac.Integration.SignalR.AutofacDependencyResolver(container); 
```

“服务”引用 IUserService 的位置

这是与以前版本的 SignalR 和 Autofac 一起使用但使用不同的 Autofac 依赖解析器的代码。欢迎任何指点，

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T09:53:25.907

请务必在路由集合上调用 MapHubs() 之前设置您的解析器，此时对解析器的引用将被传递到那里的基础设施中。在调用 MapHubs 后设置新的解析器不会做任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-24T05:07:18.997

互联网上的文档中缺少很多内容。我写了一篇关于同时使用 SignalR 2.0 和 Autofac 的文章，因为 Autofac 的文档不完整：

我写了一篇关于这个的博客，但我把那个网站写下来了，这是那篇博客文章的 HTML：

在 MVC 应用程序中通过 Autofac 大量使用 DI 并且在使用 Signalr 2.0 时遇到问题？

您是否遵循 Autofacs 文档并安装了 Autofac.SignalR Nuget 包： [https ://code.google.com/p/autofac/wiki/SignalRIntegration](https://code.google.com/p/autofac/wiki/SignalRIntegration)

Autofac 的文档存在多个问题，Autofac.Singalr Nuget 包适用于 SignalR 1.0。

所以首先，让我们使用 SignalR 2.0 进行修复。您只需将 Autofac.SignalR 包朝正确的方向轻推，将以下内容添加到您的 Web.config 中：

```
 <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">

        <dependentAssembly>

            <assemblyIdentity name="Microsoft.AspNet.SignalR.Core" publicKeyToken="31bf3856ad364e35" culture="" />

            <bindingRedirect oldVersion="1.0.0.0" newVersion="2.1.1.0" />

        </dependentAssembly>

    </assemblyBinding>

</runtime> 
```

现在实际工作的实际代码：

```
public interface IConversationHub

{

    System.Threading.Tasks.Task OnConnected();

    void SendNotifications(long _account_id, int _partition_id, List<long> _userIds,

        DTO.ConversationEventMessage _message);

}

[Authorize]

public class ConversationHub : Hub, IConversationHub

{

    readonly ILifetimeScope _hubLifetimeScope;

    private uTextAPP.AppLayer.IManageUsers _ManageUsers { get; set; }

    private uTextAPP.AppLayer.IManageUserConnections _ManageUserConnections { get; set; }

    private uTextDDD.ServiceLayer.IReportUserConnections _ReportUserConnections { get; set; }

    public ConversationHub(ILifetimeScope lifetimeScope)

    {

        // Create a lifetime scope for the hub.

        _hubLifetimeScope = lifetimeScope.BeginLifetimeScope();

        // Resolve dependencies from the hub lifetime scope.

        _ManageUsers = _hubLifetimeScope.Resolve<uTextAPP.AppLayer.IManageUsers>();

        _ManageUserConnections = _hubLifetimeScope.Resolve<uTextAPP.AppLayer.IManageUserConnections>();

        _ReportUserConnections = _hubLifetimeScope.Resolve<uTextDDD.ServiceLayer.IReportUserConnections>();

    }

    public override System.Threading.Tasks.Task OnConnected()

    {

        //var username = Context.User.Identity.Name; //this is the user_id!! yay!

        var user = _ManageUsers.GetCurrentUser();

        var _issues = new Issues();

        if (user == null || user.account_id == 0)

            return base.OnConnected();

        var conn = new user_connection

               {

                   connection_id = Context.ConnectionId,

                   user_id = user.user_id

               };

        _ManageUserConnections.CreateUserConnection(user.account_id, user.user_id, user.partition_id, conn, _issues);

        return base.OnConnected();

    }

    internal static void SendNotifications(long _account_id, int _partition_id, List<long> _userIds, DTO.ConversationEventMessage _message, IEnumerable<uTextDTO.AppLayer.user_connection> _connections )

    {

        IHubContext context = GlobalHost.ConnectionManager.GetHubContext<ConversationHub>();

        if (_connections == null) return;

        foreach (var c in _connections)

        {

            if (_userIds.Any(_userIds.Contains))

            {

                if (context.Clients.Client(c.connection_id) != null)

                {

                    context.Clients.Client(c.connection_id).receiveNotification(_message);

                }

            }

        }

    }

    public void SendNotifications(long _account_id, int _partition_id, List<long> _userIds, DTO.ConversationEventMessage _message)

    {

          var _issues = new Issues();

        SendMessage(_account_id, _partition_id, _userIds, _message, _ReportUserConnections.GetAllUserConnectionsByDaysBack(_account_id, -1L, _partition_id, 1, _issues))

        ;

    }

    public override Task OnDisconnected(bool stopCalled)

    {

        var user = _ManageUsers.GetCurrentUser();

        var _issues = new Issues();

        if (user == null || user.account_id == 0)

            return base.OnConnected();

        var original = _ManageUserConnections.GetUserConnectionByConnectionId(user.account_id, user.partition_id,

            user.partition_id, Context.ConnectionId, _issues);

        if (original != null && original.user_connection_id != 0L)

        {

            var mod = new user_connection().CopyModelExt(original);

            mod.is_active = false;

            _ManageUserConnections.UpdateUserConnection(user.account_id, user.user_id, user.partition_id, original.user_connection_id,mod, original, _issues);

        }

        return base.OnDisconnected(stopCalled);

    }

    protected override void Dispose(bool disposing)

    {

        // Dipose the hub lifetime scope when the hub is disposed.

        if (disposing && _hubLifetimeScope != null)

            _hubLifetimeScope.Dispose();

        base.Dispose(disposing);

    }

} 
```

首先，请注意上面的代码，公共覆盖 Task OnDisconnected 不可信，它不会触发并且不是管理与 SignalR 断开连接的可靠方法，此方法可能会捕获一些断开连接。幸运的是，对于我的要求，我可以忽略超过一天的连接。

接下来注意，使用上面的代码，内部静态 void SendNotifications。SendNotifications 必须是静态的，以便 SignalR 上下文在访问时不会引发运行时错误。

最后请注意，静态方法是从调用者传递的连接，即 SendNotifications 的公共公开方法。我需要 SendNotifications 中的 IReportUserConnections 实例，但 IReportUserConnections 不是静态的，也不能是静态的，无法由 Autofac 正确注入。所以我不能在静态 void SendNotifications 中使用 IReportsUserConnections，所以我用公共版本的 SendNotifications 解决了这个问题。

对于 Autofac 容器：

```
public static class SimpleInjectorInitializer

{

    public static IContainer Container;

    public static void Initialize()

    {

        var builder = new ContainerBuilder();

                   // Register the SignalR hubs.

                    builder.RegisterHubs(typeof(uTextAPP.SignalR.ConversationHub).Assembly);

        uTextMVC.RegisterMe.Register(builder);

        Container = builder.Build();

        DependencyResolver.SetResolver(new Autofac.Integration.Mvc.AutofacDependencyResolver(Container));

        var signalRDependencyResolver = new Autofac.Integration.SignalR.AutofacDependencyResolver(Container);

        GlobalHost.DependencyResolver = signalRDependencyResolver;

    }

} 
```

互联网上缺少的重要部分之一，如何实际使用您的 IoC 注入的 ConversationHub 发送通知：

```
public Lazy _ConversationHub { get; set; }
_ConversationHub.Value.SendNotifications(account.account_id, account.partition_id, userIds, convoEv); 
```

您必须确保在 Register.me 中使用 Autofac 注册 Hub，以便初始化 _ConversationHub：

```
 container.RegisterType<SignalR.ConversationHub>().As<SignalR.IConversationHub>().InstancePerLifetimeScope().PropertiesAutowired(); 
```

# c# - 类和列表

> ID：14848708
> 
> 赞同：0
> 
> 时间：2013-02-13T07:47:09.570
> 
> 标签：c#, list, class

所以，假设我有以下内容：

```
 public class CProperty : CTitledEntity
    {
        private int numberOfNodes;
        private int elementType;

        public CProperty(int id, string title, int numberOfNodes, int elementType, string descripton = "")
            : base(id, title, descripton)
        {
            this.numberOfNodes = numberOfNodes;
            this.elementType = elementType;
        }

        public string Property
        {
            get
            {
                CElement.ElementTypes enumDisplayStatus = ((CElement.ElementTypes)numberOfNodes);
                string stringValue = enumDisplayStatus.ToString();
                return stringValue + elementType;
            }
        }
    } 
```

和

```
 public CElement(int id, int numberOfNodes, int index, int[] nodes)
            : base(id)
        {
            this.NumberOfNodes = numberOfNodes;
            this.Nodes = new int[numberOfNodes];
            this.Index = index;
            for (int i = 0; i < numberOfNodes; i++)
                this.Nodes[i] = nodes[i];
        }
        public int NumberOfNodes { get; set; }
        public int[] Nodes { get; set; }
        public int Index { get; set; }
        public CProperty Property { get; set; } 
```

我有一个清单：

```
CEntityCollection<CProperty> properties = ReadProperty();
CEntityCollection<CElement> elements = ReadElement(); 
```

首先，我很抱歉我的英语不好。**我必须使用我从属性**中提供的 CPropety 参数在 CElement 类中创建构造函数。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:02:07.027

只需在您的 CElemenet 类中添加 CProperty 对象并将其添加到构造函数的参数中。

```
public CElement(int id, int numberOfNodes, int index, int[] nodes, CProperty property) : base(id)
    : base(id)
{
    this.NumberOfNodes = numberOfNodes;
    this.Nodes = new int[numberOfNodes];
    this.Index = index;
    for (int i = 0; i < numberOfNodes; i++)
        this.Nodes[i] = nodes[i];
    Property = property;
}

public CProperty Property { get; set; }
public int NumberOfNodes { get; set; }
public int[] Nodes { get; set; }
public int Index { get; set; }
public CProperty Property { get; set; } 
```

# ios - iphone - 每个组件的电池利用率

> ID：14848709
> 
> 赞同：0
> 
> 时间：2013-02-13T07:47:09.977
> 
> 标签：ios, iphone, ipad, ios4

有什么方法可以识别 iPhone 设备中运行的每个组件/进程的电池利用率？

我们可以通过代码获得 android 设备的相同细节。但是，iPhone 也有可能吗？

请分享您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:16:53.710

不，您无法在您的应用中访问这些信息。唯一的可能性是使用 Instruments。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:09:07.617

是的，在[http://gigaom.com/2010/08/04/apples-instruments-for-developers/](http://gigaom.com/2010/08/04/apples-instruments-for-developers/)页面中搜索“能源诊断”。
或者
您也可以在 XCode->orgniser->Documentation 中找到有关“Energy Diagnostics”的详细信息，然后搜索“Energy Diagnostics”，您会`Energy Usage Instrument`在`Tools Guides`. 它说：

*能源使用仪器捕获有关设备自启动以来的能源使用情况的信息。*

*平台：iOS*
*位置：库窗格（仅在连接 iOS 设备时出现）*

# c++ - Boost Serialization – 避免字符串长度输出？

> ID：14848713
> 
> 赞同：1
> 
> 时间：2013-02-13T07:47:26.623
> 
> 标签：c++, boost-serialization

我正在序列化来自项目的两个不同分支的一些数据。使用 .以文本存档形式输出数据`boost::serialization`。由于要在两个序列化文件之间进行差异，因此我还在每个序列化部分之间的序列化文件中添加了一些调试消息，以便更好地查看可能出现输出差异的点。

这是我当前使用的代码的广泛概述：

```
std::ofstream ofs("./SomeFile.txt"); // for brevity's sake, no actual path used
{
  boost::archive::text_oarchive oa(ofs);
  std::string debug_str;

  debug_str = "\n\nPart 1\n";
  oa & debug_str;

  // ... some other serialized parts ...

  debug_str = "\n\nPart 145\n";
  oa << debug_str;
} 
```

您会注意到，我首先认为使用的运算符 ( `&`vs `<<`) 对输出产生了影响，但事实并非如此，我得到以下文本文件：

```
22 serialization::archive 7 9 [CRLF]
[CRLF]
Part 1 [CRLF]
 11 [CRLF]
[CRLF]
Part 145 [CRLF] 
```

该`22 serialization::archive 7`部分是一个标准的 Boost 序列化标头，用于识别我猜的存档类型。然后是我想删除的部分，即`9`——经过一番追逐后，我发现这`9`是`"\n\nPart1\n"`字符串的长度！

这是预期的行为还是有办法绕过这个输出？在其他实际记录的情况下，没有明显使用其他此类“控制代码”、标记长度等。

添加一些调试输出会很有用，但是由于所述调试字符串的长度可能不同（因为在其中一个分支上发生了大量重构），因此差异会产生一些误报。

任何想法将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:01:49.717

我怀疑这是可能的。

您在这里面临的问题是需要将文本输出*解析回*以进行反序列化。结构化文本输出的主要方式有两种，因此可以轻松解析：

*   以长度为前缀的字符串
*   特殊字符（带有转义码）

例如，在 xml 存档中，标签用`<`and包围，`>`您不能自己使用这些字符，而是分别使用转义代码`&lt;`和`&gt;`。另一方面，如果您查看 Redis 格式，您会看到`13$Hello, World!`记录的长度是一串数字，然后是 $，然后是实际记录。

前一种方式（长度前缀字符串）效率更高，但人类可写性要低得多。

从 Boost::Serialization 文档中，我看到了两个不同的“人类可读”档案：

*   `boost::text_[i/o]archive`使用以长度为前缀的字符串（似乎）
*   `boost::xml_[i/o]archive`使用 xml 表示

您可能想要切换到`boost::xml_oarchive`.

# jquery - 将 gmap3 JS 插件与 gpxviewer/loadgpx 模块集成？如何从 gmap3 获取“地图”对象？

> ID：14848717
> 
> 赞同：1
> 
> 时间：2013-02-13T07:47:41.393
> 
> 标签：jquery, google-maps, gpx

我正在尝试集成 gmap3 JS 插件

[http://gmap3.net/](http://gmap3.net/)

使用 gpxviewer 模块

[https://github.com/peplin/gpxviewer](https://github.com/peplin/gpxviewer)

gpxviewer 文档使用

```
var map = new google.maps.Map(document.getElementById("map"),
    mapOptions);
loadGPXFileIntoGoogleMap(map, "pocotrail.xml"); 
```

用于创建地图，但是 gmap3 使用以下代码生成地图

```
$("#test").gmap3(); 
```

那么如何从 gmap3 获取真正的**地图**对象以将其传递给 loadGPXFileIntoGoogleMap() ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:58:31.290

它会做的伎俩：

```
var map = $("#test").gmap3("get"); 
```

# iphone - Tapku库-日视图中的日期格式是什么

> ID：14848719
> 
> 赞同：0
> 
> 时间：2013-02-13T07:47:43.047
> 
> 标签：iphone, date-format, tapku

我在我的应用程序中使用 Tapku 库。在显示日视图时，我从服务器获取`startDate`和`endDate`值。Tapku 库中使用的日期格式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:03:42.507

Tapku 库的格式是-

```
[YYYY-MM-DD hour:minute:second] 
```

例如@“2011-01-01 00:00:00 +0000”

欲了解更多信息，请访问此[Link-tapku 图书馆](http://developinginthedark.com/posts/iphone-tapku-calendar-markers#the-code)

# php - 当cakephp中的值为null时如何保存记录？

> ID：14848723
> 
> 赞同：2
> 
> 时间：2013-02-13T07:48:07.837
> 
> 标签：php, mysql, cakephp, cakephp-1.3, cakephp-2.0

我想保存记录，但是在for循环中，下一个id为null，我如何在这种情况下保存记录，当找到null并保存以前的记录时，循环将停止。

```
 foreach($record['ProductPlan'] as $value=>$key)

{
 $ProductsUser = array('product_plan_id'=>$key,'user_node_id'=>$userNodeId, 'is_active'=>1);
                            $this->$model->UserNode->ProductPlansUserNode->create();
                            $this->$model->UserNode->ProductPlansUserNode->save($ProductsUser);

                        } 
```

并且错误是违反完整性约束：1048 Column 'product_plan_id' cannot be null
and in the array

```
 '2'
array(
'product_plan_id' => '2',
'user_node_id' => '26',
'is_active' => (int) 1
)
'3'
array(
'product_plan_id' => '3',
'user_node_id' => '26',
'is_active' => (int) 1
)
'' // This is null how can i save previous records before null? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T07:50:48.523

只需使用普通 if 。这是示例代码：

```
 foreach ($record['ProductPlan'] as $value => $key) {
    if (isset($key) && $key) {
       $ProductsUser = array('product_plan_id' => $key, 'user_node_id' => $userNodeId, 'is_active' => 1);
       $this->$model->UserNode->ProductPlansUserNode->create();
       $this->$model->UserNode->ProductPlansUserNode->save($ProductsUser);
    }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T07:50:37.570

正如你的错误所说，

`Integrity constraint violation: 1048 Column 'product_plan_id' cannot be null`

您必须更改此字段以允许`null`在 db 中保存空记录。如果您希望 db 自行决定该列的唯一键，请创建它`AUTO_INCREMENT`。`null`因此，如果您通过该列，它将采用下一个键。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T09:59:06.253

我认为您对 $value 和 $key 感到困惑，反之亦然

您需要在插入表之前添加一个空数组或空数组的检查试试这个

```
 foreach($record['ProductPlan'] as $value=>$key){
   If($key){
   $ProductsUser = array('product_plan_id'=>$key,'user_node_id'=>$userNodeId, 'is_active'=>1);
   $this->$model->UserNode->ProductPlansUserNode->create();
   $this->$model->UserNode->ProductPlansUserNode->save($ProductsUser);  
  }

} 
```

# mysql - SQL 从 2 个不同的表中查询 cakePHP 1.2

> ID：14848725
> 
> 赞同：1
> 
> 时间：2013-02-13T07:48:10.630
> 
> 标签：mysql, cakephp, cakephp-1.2

在 cakephp 1.2 中，我有一个包含书籍列表的表格 (biblio)，还有一个包含标签列表的表格 (tematiche)。
我有这个代码来获取书籍列表：

```
if (isset($autore_diviso))
        {
            $dim=count($autore_diviso);
            $i=0;
            while ($i<$dim)
            {
                $conditions[]=array ('autori LIKE ?' => array(
                    '%' . $autore_diviso[$i][0] . '%'));
                $i++;
            }
        }
        else
            $conditions[]=array('autori LIKE' => "%$a%");
        if (!$anno&&!$anno2)    // Da sistemare.
            $conditions=$conditions;
        else {
        if (!$anno)
            $conditions[] = array('anno <=' => "$anno2");          
        if (!$anno2)
            $conditions[] = array('anno >=' => "$anno");
        }
        if ($anno&&$anno2)
            $conditions[] = array('anno BETWEEN ? AND ?' => array($anno,$anno2)); } 
```

现在我还需要获取一本书的标签，如何将其添加到此查询中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:54:21.827

尝试`Tag model`在控制器中绑定

**在控制器中**

```
<?php

$this->Book->bindModel(array
(
    'hasMany' => array
    (
        'Tag' => array
        (
            'foreignKey' => false,
            'conditions' => array
            (
                'Book.id = Tag.book_id'
            )
        )
    )
));

$books = $this->Book->find('all',array
(
    'conditions' => array
    (
        'Book.id' => 'SOME_ID'
    )
));

pr($books);
exit;
```

**以上调试结果**

```
Array
(
    [Book] => Array
    (
        [id] => SOMEID
        [name] => BOOKNAME
    )
    [Tag] => Array
    (
        [0] => Array
        (
            [id] => 1
            [name] => TAGNAME
            [book_id] => SOME_ID
        )
        [1] => Array
        (
            [id] => 2
            [name] => TAGNAME
            [book_id] => SOME_ID
        )
        [2] => Array
        (
            [id] => 4
            [name] => TAGNAME
            [book_id] => SOME_ID
        )
    )
)
```

# matlab - 在 MATLAB 中查找总和为特定数字的向量元素

> ID：14848731
> 
> 赞同：2
> 
> 时间：2013-02-13T07:48:25.533
> 
> 标签：matlab, combinatorics

让我们考虑我们有一个向量`VEC`。

有没有办法找到可以对哪些向量元素进行分组，以便它们在 MATLAB 中总和为给定的数字 NUM？

例如，如果`VEC = [2 5 7 10]`和`NUM = 17`

请求的算法应该提供子向量`[2 5 10]`和`[7 10]`总和的答案给定`NUM`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:19:08.320

这是解决此问题的一种方法[`conbntns`](http://www.mathworks.com/help/map/ref/combntns.html)，它是 Mapping Toolbox 中的一个函数，用于检索值集的所有可能组合（如果您没有此工具箱，则可以使用FEX 中的[组合器）。](http://www.mathworks.com/matlabcentral/fileexchange/24325-combinator-combinations-and-permutations)因此，例如对于 vector `A`，我们将找到给定长度（1 到 的长度`A`）的所有可能组合，然后将它们相加，看看哪个等于`NUM=17`：

```
NUM=17;
A=[2 5 7 10];
for ii=1:numel(A)
    B=combntns(A,ii);
    C=sum(B,2);
    D=find(C==NUM);
    if ~isempty(D)
        B(D,:)
    end
end

ans =
     7    10
ans =
     2     5    10 
```

当然，您可以将`B(D,:)`输出存储到单元格数组或其他任何内容中以供将来使用...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T14:46:23.480

这是另一种无需任何工具箱或第三方功能的方法。它逐步检查所有可能的值组合`VEC`并测试总和是否等于`NUM`。

```
VEC = [2 5 7 10]
NUM = 17;
n = length(VEC);
for i = 1:(2^n - 1)
    ndx = dec2bin(i,n) == '1';
    if sum(VEC(ndx)) == NUM
        VEC(ndx)
    end
end

ans =
     7    10
ans =
     2     5    10 
```

这类似于[natan 的答案](https://stackoverflow.com/a/14849174/1339280)，但没有使用`conbntns`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T08:37:45.707

如果我没记错的话，这个问题是 NP 难的。
但是一个有趣的方法可能是使用[`bintprog`](http://www.mathworks.com/help/optim/ug/bintprog.html)：

```
n = numel( VEC );
x0 = zeros( 1, n ); % one possible init guess
x = bintprog( zeros( n, 1 ), ...  % objective function meaningless, we look for feasibility
              [], [], ... % no inequality constraints
              VEC(:)', NUM, ... %' we want the sum of selected elements to equal NUM
              x0 ); % changing init x0 might result with different solutions
find( x ) 
```

二元向量`x`（ 中的优化解`bintprog`）选择总和为的相关元素`NUM`

# c++ - 没有 *.cpp 文件时的 Makefile .co

> ID：14848733
> 
> 赞同：0
> 
> 时间：2013-02-13T07:48:33.550
> 
> 标签：c++, c, templates, makefile

所以基本上。我的makefile有这个规则：

> .co :
> $(CC) $(CFLAGS) $(TESTFUNINCLUDE) -c $< -o $@

在我在新的 hpp 文件中添加一些新的模板函数之前，它工作得非常好......我把所有东西都放在我的 hpp 文件中，我的 cpp 完全是空的。但是，如果我删除我的 cpp 文件，gnu make 会说。

> 制作：***没有规则来制作目标“myfile_template.o”，“blahblahblah”需要

`myfile_template.cpp`我可以通过在文件夹中保留一个空文件来解决这个问题。但我觉得这是一个丑陋的解决方案。有更好的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:12:58.447

您似乎不太习惯编写 raw `Makefile`，因此我建议您切换到更高级的构建工具，例如[CMake](http://www.cmake.org)或[SCons](http://www.scons.org)。其他受欢迎的候选人是[tup](http://gittup.org/tup)、[Waf](http://code.google.com/p/waf/)、[Gyp](http://code.google.com/p/gyp)或[Premake](http://industriousone.com/premake)。

# asp.net - 在 mvc 中控制 Controller 的 Action 方法的可访问性

> ID：14848739
> 
> 赞同：0
> 
> 时间：2013-02-13T07:49:05.917
> 
> 标签：asp.net, asp.net-mvc-3, c#-4.0, controller

我有一个 MVC 3.0 应用程序，其中包含 3 个控制器和操作方法。该应用程序是基于登录的。一旦用户通过身份验证，他就会登陆主页，在那里他会看到 3 个菜单链接，这些链接映射到三个控制器的操作方法。用户可以单击链接或在地址栏中输入 url，并可以导航到相应的页面。

但是现在链接已经变成了基于角色的，比如，

如果 IsProductPageAllowed=true，则只有用户可以看到 ProductPage。

如果 IsMediaPageAllowed=true 则只有用户可以看到 MediaPage。

我已经根据属性 valuetrue/false 在主页视图中轻松处理链接的可见性。

但是如果他直接在地址栏中输入url并且值为false，则正在寻找一种正确的方法来阻止用户访问ProductPage。我可以通过检查 true false 属性在控制器的每个操作方法上轻松执行此操作，如果值为 false，则相应地重定向到 homePage。

我正在考虑一些更好的方法来做到这一点，比如在控制器本身中。

谢谢，

M。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:11:19.243

如果您使用的是 SimpleMembership，为什么不分配`Roles`给每个成员。这样，您可以这样做以限制对任何操作甚至整个控制器的访问。

```
[Authorize(Roles="Admin")] 
public ActionResult Contact()
{
   ViewBag.Message = "Your contact page.";
   return View();
} 
```

使用上面的代码，只有管理员用户才能访问该操作。如果要限制整个控制器，只需放在`[Authorize(Roles="Admin")]`控制器名称的顶部即可。

如果您需要有关如何将角色植入数据库的帮助，请[在此处阅读 Kevin 的博客](http://kevin-junghans.blogspot.ca/2013/01/seeding-customizing-aspnet-mvc.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:31:44.820

定义一个自定义安全过滤器，它将拦截所有请求并在处理之前对其进行授权。如果授权不成功，用户将被重定向到权限不足的错误页面。

权限将取决于特定角色是否可以调用控制器的特定操作。如果用户未登录，还将有一个基本授权将用户重定向到登录页面。

# php - 检查 db 值是否与当前 Select 选项匹配的函数

> ID：14848744
> 
> 赞同：3
> 
> 时间：2013-02-13T07:49:20.243
> 
> 标签：php, function, select, selected

我正在创建一个客户帐户页面，该页面显示数据库中的相关信息并允许客户编辑他们的信息。下面的代码从数据库中检索并显示客户的帐户信息，并预先选择与他们的信息匹配的值，但是由于有几百个选择和/或多选元素，我想创建一个函数来检查数据库是否value *(ie `$rows['gift_privacy']`)*匹配当前选项。

```
<?php   
try {  
$stmt = $conn->prepare("SELECT * FROM customer_info WHERE user_id = :user_id");  
$stmt->bindValue(':user_id', $user_id); 
$stmt->execute();
}catch(PDOException $e) {echo $e->getMessage();}
$row = $stmt->fetch();
?>
<form action="account_information-exec.php" method="post">
<select name="gift_privacy">
    <option value="Standard" <?php if($row['gift_privacy']=='Standard') echo "selected='selected'"; ?>>Standard</option>
    <option value="Gift_ID_Req" <?php if($row['gift_privacy']=='Gift_ID_Req') echo "selected='selected'"; ?>>Require program ID</option>
    <option value="Not_Enrolled" <?php if($row['gift_privacy']=='Not_Enrolled') echo "selected='selected'"; ?>>Do not enroll</option>
</select>
<input type="submit" value="submit">
</form> 
```

**编辑 -**多选元素的代码略有不同。元素名称后跟方括号*（即`name="notifications[]"`）*，值作为内爆数组插入到数据库中`implode(',', $_POST['notifications'])`。然后从获取的值中删除这些逗号，以便正确地将它们与选项的值进行比较`$row1 = str_replace(',', '', $row);`

*现有功能*

这个函数适用`selected="selected"`于正确的选项，但是对我来说使用这么多元素太麻烦了，我不确定如何修改代码以便可以轻松地将其应用于所有选择和/或多选元素。此外，由于该页面当前使用带有硬编码选项的标准选择元素，我希望有一个不需要为每个元素创建数组的解决方案。

```
<select name="gift_privacy">
    <?php
    $gifts = array("Standard" => "Standard", "Gift_ID_Req" => "Require Program ID", "Not_Enrolled" => "Do not Enroll");
    $gift = $row['gift_privacy'];
    foreach($gifts as $key => $value) {
    if($key == $gift) {
        echo '<option selected="selected" value="'. $key .'">'. $value .'</option>';
    } else {
        echo '<option value="'. $key .'">'. $value .'</option>';
    }
    }
    ?>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:06:45.860

我曾经遇到过同样的问题，并通过创建一个函数（或类静态方法）来处理我的选项列表来解决它。

要打印出您的选项，无论如何您都必须循环浏览它们，因此当您循环时，检查每个选项是否必须是当前选择的没有什么不好。

只需创建一个函数，如：

```
function printSelectOptions($dataArray, $currentSelection) {
    foreach ($dataArray as $key => $value) {
        echo '<option ' . (($key == $currentSelection) ? 'selected="selected"' : '') . ' value="' . $key . '">' . $value . '</option>';
    }
} 
```

给予`$dataArray`作为您的键/值选项数组，并`$currentSelection`作为所选选项的键。

因此，在您的代码中，您只需调用此函数，例如：

```
<select id='mySelect' name='mySelect'>
    <?php echo printSelectOptions($gifts, $gift); ?>
</select> 
```

这应该做的工作！

编辑：添加示例以使用选择多个...

```
<?php
$options = array(   1   =>  "Test 1",
                    2   =>  "Test 2",
                    3   =>  "Test 3");

$selected = array(1, 3);

function printSelectOptions($dataArray, $selectionArray) {
    foreach ($dataArray as $key => $value) {
        echo '<option ' . (in_array($key, $selectionArray) ? 'selected="selected"' : '') . ' value="' . $key . '">' . $value . '</option>';
    }
}
?>

<select multiple>
    <?php echo printSelectOptions($options, $selected); ?>
</select> 
```

诀窍是将所选值作为键数组而不是单个键传递。在示例中我提供了虚拟数组，但显然你必须从数据库构建你的...... :)

编辑：使用从问题中获取的数组选择多...

```
<?php
$gifts = array("Standard" => "Standard", "Gift_ID_Req" => "Require Program ID", "Not_Enrolled" => "Do not Enroll");
$gift = array($row['gift_privacy']);

function printSelectOptions($dataArray, $selectionArray) {
    foreach ($dataArray as $key => $value) {
        echo '<option ' . (in_array($key, $selectionArray) ? 'selected="selected"' : '') . ' value="' . $key . '">' . $value . '</option>';
    }
}
?>

<select multiple>
    <?php echo printSelectOptions($gifts, $gift); ?>
</select> 
```

编辑：分解多个选定的值

如果您有多个选定的值作为逗号分隔的字符串，则只需在传递给我提供的函数之前将其分解...

```
$selectedOptionsArray = explode(',', $selectedOptionsString); 
```

所以结束代码看起来像......

```
<?php
$gifts = array("Standard" => "Standard", "Gift_ID_Req" => "Require Program ID", "Not_Enrolled" => "Do not Enroll");
$gift = explode(',', $row['gift_privacy']);

function printSelectOptions($dataArray, $selectionArray) {
    foreach ($dataArray as $key => $value) {
        echo '<option ' . (in_array($key, $selectionArray) ? 'selected="selected"' : '') . ' value="' . $key . '">' . $value . '</option>';
    }
}
?>

<select multiple>
    <?php echo printSelectOptions($gifts, $gift); ?>
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:01:43.913

您可以使用这样的函数来简化它：

```
<?php
function renderOption($key, $value, $current) {
    echo '<option value="' . $key . '"' . ($key == $current ? ' selected="selected"' : '') . '>' . $value. '</option>';
}
?>

<select name="gift_privacy">
    <?php
    $gifts = array("Standard" => "Standard", "Gift_ID_Req" => "Require Program ID", "Not_Enrolled" => "Do not Enroll");
    $gift = $row['gift_privacy'];
    foreach($gifts as $key => $value) 
        renderOption($key, $value, $gift);
    ?>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:58:07.787

使用更简单的方法：

```
<?php
 echo '<option '.($key == $gift ? 'selected="selected" ' : '').'value="'. $key .'">'. $value .'</option>';
?> 
```

编辑：第二个选项

```
 echo '<option '.selected_option($key, $gift).'value="'. $key .'">'. $value .'</option>';

 function selected_option($val1, $val2){
  if($val1 == $val2){
   return 'selected="selected" ';
  }else{
   return '';
  }
 } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-13T07:59:13.233

你所拥有的没有任何问题，这个或非常相似的东西是解决这个问题的典型方法。

你会/可以将它包装在一个实际的函数中，说它`print_select( $array, $selected );`会/可以打印出整个函数，`<select>`包括选择本身。

最终代码可能是：

```
print_select( $gifts, $selected_gift );
print_select( $colors, $selected_color );
// etc 
```

# iphone - ios 6.1 注释视图，如标准地图

> ID：14848746
> 
> 赞同：0
> 
> 时间：2013-02-13T07:49:22.453
> 
> 标签：iphone, ios, objective-c, mkmapview, mkpinannotationview

关于自定义 mkannotaionviews 的标注气泡已经写了很多，但请允许我在这个问题上寻求帮助。

我想模仿 6.1 地图应用程序中的默认标注气泡，图像 + 文本而不是仅文本。

[截图在这里](http://i.stack.imgur.com/b6fUc.png)

我该怎么做？我可以以某种方式替换字幕字符串的视图吗？左右按钮工作，现在我想要字幕。

非常感谢，
El

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:30:15.183

The Apple iOS sample code project "MapCallouts" may help. Specifically, the MKAnnotation presented for "City" which is in the class `SFAnnotation`.

[https://developer.apple.com/library/ios/#samplecode/MapCallouts/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/MapCallouts/Introduction/Intro.html)

# eclipse - Eclipse 不显示红外5 服务器

> ID：14848748
> 
> 赞同：1
> 
> 时间：2013-02-13T07:49:31.503
> 
> 标签：eclipse, red5

我正在使用`windows 8 64-bit OS`. 我正在`Eclipse Indigo 32-bit`使用`red5`. 我已经安装了`red5`插件。我想构建一个动态 Web 项目并需要`Infrared5`服务器作为新的服务器运行时环境。但是当我点击新的运行时我找不到`Infrared5`选项。

有什么事？我错过了什么吗？请帮忙。

# r - 获取数据集的 difftime

> ID：14848750
> 
> 赞同：0
> 
> 时间：2013-02-13T07:49:39.887
> 
> 标签：r

我有一个根据 diff 或 difftime 的问题。

```
Equip <- c(1001,1001,1001,1002,1002,1002,1003,1003,1003,1003,1003,1003,1003,1003)
Notif <- c(321,322,322,319,319,345,495,495,495,441,441,441,471,471)
Job <- c("01.01.2011","05.01.2011","05.01.2011","05.01.2011","05.01.2011",
"15.01.2011","23.03.2011","23.03.2011","23.03.2011","27.03.2011","27.03.2011",
"27.03.2011","29.03.2011",
"29.03.2011")
Job <- as.Date(Job,format="%d. %m. %Y")
df <- data.frame(Equip,Notif,Job) 
```

我想在 data.frame 中有一个新列，时间差 [以天为单位] 应该是。

计算时差的条件如下：我现在要做的是，如果Equipnumber相同，但Notifnumber不同，我想要时差（Jobdate）

输出应该是这样的：

```
df$dd <- c(0,4,4,0,0,10,0,0,0,4,4,4,2,2) 
```

（对于Equipnumber中的第一个Notifnumber，dd为0，因为是第一次访问）

希望你能帮助我，我试着去做，但我不能像我想要的那样去做。

我只能使用没有任何软件包的标准 R 程序...

根据给定的链接，我创建了以下示例，该示例也不起作用：

也许你可以帮助我：

```
Equips <- c(10006250,10006252,10006252,10006252,10006252,10006252,10006252,
10006252,10006252,10006252,10006252,10006252,10006252,10006252,10006252,10006777)
Notifs <- c(306863771,306862774,306862774,306862774,306933440,
306933440,306998451,306998451,307024311,307024311,
307024311,307024311,307033136,307033136,307128754,307158697)
Jobs <- c("25.01.2011","23.06.2011","23.06.2011","23.06.2011","28.06.2011",
"28.06.2011","02.07.2011","02.07.2011","03.09.2011","03.09.2011",
"03.09.2011","03.09.2011","05.09.2011","05.09.2011","02.11.2011","05.05.2011")
Comps <- c("Service Boiler","General Boiler Components","Ignition and Flame Detection",
"Service Boiler!!!","Electrical Components","Gas Train Assembly",
"Control Box"," Ignition and Flame Detection","CH Components Active",
"CH Components Passive","CH Components Passive","DHW Components",
"DHW Components","Internal Pipeworks and Connections","not grouped in WCC",
"Service Boiler")
Category <- c("service_repair","service_repair","service_repair",
"service_repair","repair","repair","repair","repair","repair","repair",
"repair","repair","repair","repair","repair","service_repair")
Job <- as.Date(Job,format="%d. %m. %Y")
df <- data.frame(Equips,Notifs,Jobs,Comps,Category) 
```

我真的不知道为什么它不适用于此，但是根据第一篇文章中的数据，也许您可​​以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:35:11.887

这是使用基本软件包的有点长且可能令人费解的答案。具有更好知识的人`plyr`可能能够提供更优雅的解决方案。

```
> df
   Equip Notif        Job
1   1001   321 2011-01-01
2   1001   322 2011-01-05
3   1001   322 2011-01-05
4   1002   319 2011-01-05
5   1002   319 2011-01-05
6   1002   345 2011-01-15
7   1003   495 2011-03-23
8   1003   495 2011-03-23
9   1003   495 2011-03-23
10  1003   441 2011-03-27
11  1003   441 2011-03-27
12  1003   441 2011-03-27
13  1003   471 2011-03-29
14  1003   471 2011-03-29 
```

`diff`无条件先获取日期

```
> df$diff <- c(0,diff(df$Job))
> df
   Equip Notif        Job diff
1   1001   321 2011-01-01    0
2   1001   322 2011-01-05    4
3   1001   322 2011-01-05    0
4   1002   319 2011-01-05    0
5   1002   319 2011-01-05    0
6   1002   345 2011-01-15   10
7   1003   495 2011-03-23   67
8   1003   495 2011-03-23    0
9   1003   495 2011-03-23    0
10  1003   441 2011-03-27    4
11  1003   441 2011-03-27    0
12  1003   441 2011-03-27    0
13  1003   471 2011-03-29    2
14  1003   471 2011-03-29    0 
```

创建新列`diff1`，即`1`您的条件为真，`0`如果为假

```
> df$diff1 <- c(0, ifelse(diff(df$Equip) == 0 & diff(df$Notif) != 0, 1, 0))
> df
   Equip Notif        Job diff diff1
1   1001   321 2011-01-01    0     0
2   1001   322 2011-01-05    4     1
3   1001   322 2011-01-05    0     0
4   1002   319 2011-01-05    0     0
5   1002   319 2011-01-05    0     0
6   1002   345 2011-01-15   10     1
7   1003   495 2011-03-23   67     0
8   1003   495 2011-03-23    0     0
9   1003   495 2011-03-23    0     0
10  1003   441 2011-03-27    4     1
11  1003   441 2011-03-27    0     0
12  1003   441 2011-03-27    0     0
13  1003   471 2011-03-29    2     1
14  1003   471 2011-03-29    0     0 
```

仅当条件为真时，将结果相乘以获取 diff 列的值

```
> df$diff <- df$diff * df$diff1
> df$diff1 <- NULL
> df
   Equip Notif        Job diff
1   1001   321 2011-01-01    0
2   1001   322 2011-01-05    4
3   1001   322 2011-01-05    0
4   1002   319 2011-01-05    0
5   1002   319 2011-01-05    0
6   1002   345 2011-01-15   10
7   1003   495 2011-03-23    0
8   1003   495 2011-03-23    0
9   1003   495 2011-03-23    0
10  1003   441 2011-03-27    4
11  1003   441 2011-03-27    0
12  1003   441 2011-03-27    0
13  1003   471 2011-03-29    2
14  1003   471 2011-03-29    0 
```

如果重复读数，则将数据与其自身合并以重复值。（尽管如果数据集中有其他列，则可能需要更改此步骤）

```
> res <- merge(df[,1:3], df[df$diff!=0,], all.x=T)
> res
   Equip Notif        Job diff
1   1001   321 2011-01-01   NA
2   1001   322 2011-01-05    4
3   1001   322 2011-01-05    4
4   1002   319 2011-01-05   NA
5   1002   319 2011-01-05   NA
6   1002   345 2011-01-15   10
7   1003   441 2011-03-27    4
8   1003   441 2011-03-27    4
9   1003   441 2011-03-27    4
10  1003   471 2011-03-29    2
11  1003   471 2011-03-29    2
12  1003   495 2011-03-23   NA
13  1003   495 2011-03-23   NA
14  1003   495 2011-03-23   NA 
```

将 NA 替换为 0

```
> res[is.na(res)] <- 0
> res
   Equip Notif        Job diff
1   1001   321 2011-01-01    0
2   1001   322 2011-01-05    4
3   1001   322 2011-01-05    4
4   1002   319 2011-01-05    0
5   1002   319 2011-01-05    0
6   1002   345 2011-01-15   10
7   1003   441 2011-03-27    4
8   1003   441 2011-03-27    4
9   1003   441 2011-03-27    4
10  1003   471 2011-03-29    2
11  1003   471 2011-03-29    2
12  1003   495 2011-03-23    0
13  1003   495 2011-03-23    0
14  1003   495 2011-03-23    0 
```

对于具有更多列的第二个示例数据，将 2 个步骤替换为

```
res <- merge(df[,c('Equip', 'Notif', 'Job', 'Comps', 'Category')], df[ df$diff !=0    ,c('Equip', 'Notif', 'Job', 'diff')], all.x=T)
res[is.na(res)] <- 0
res
      Equip     Notif        Job                              Comps       Category diff
1  10006250 306863771 2011-01-25                     Service Boiler service_repair    0
2  10006252 306862774 2011-06-23          General Boiler Components service_repair    0
3  10006252 306862774 2011-06-23       Ignition and Flame Detection service_repair    0
4  10006252 306862774 2011-06-23                  Service Boiler!!! service_repair    0
5  10006252 306933440 2011-06-28              Electrical Components         repair    5
6  10006252 306933440 2011-06-28                 Gas Train Assembly         repair    5
7  10006252 306998451 2011-07-02                        Control Box         repair    4
8  10006252 306998451 2011-07-02       Ignition and Flame Detection         repair    4
9  10006252 307024311 2011-09-03               CH Components Active         repair   63
10 10006252 307024311 2011-09-03              CH Components Passive         repair   63
11 10006252 307024311 2011-09-03              CH Components Passive         repair   63
12 10006252 307024311 2011-09-03                     DHW Components         repair   63
13 10006252 307033136 2011-09-05                     DHW Components         repair    2
14 10006252 307033136 2011-09-05 Internal Pipeworks and Connections         repair    2
15 10006252 307128754 2011-11-02                 not grouped in WCC         repair   58
16 10006777 307158697 2011-05-05                     Service Boiler service_repair    0 
```

# android - Android Grid 根据屏幕密度查看图像大小

> ID：14848752
> 
> 赞同：0
> 
> 时间：2013-02-13T07:49:44.610
> 
> 标签：android, gridview, imageview

我的应用程序的网格视图有 4 行和 4 列。无论设备的屏幕尺寸如何，我都希望它填满半屏。如何相应地设置图像视图大小

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:06:47.897

在dp中定义图像视图的大小，它将根据屏幕密度设置大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:58:49.080

最简单的方法是在 dip 中设置 GridView 的大小（与设备无关的像素）。您可以通过您的 XML 布局文件，显式地或借助​​可视化编辑器来执行此操作。由于与设备无关的像素本质上是百分位数，Android 平台将根据设备显示的大小和密度为您处理大小调整。换句话说，android:layout_width="50dip" 的值在任何设备上看起来都是一样的。

# spring - 弹簧缓存配置

> ID：14848755
> 
> 赞同：1
> 
> 时间：2013-02-13T07:50:00.380
> 
> 标签：spring, caching

这似乎是一个简单的问题。当我尝试在 Eclipse 中运行或编译我的 Maven 项目时，我收到错误消息：

```
SEVERE: Servlet /articleservices threw load() exception
org.xml.sax.SAXParseException; lineNumber: 73; columnNumber: 32; The prefix "p" for attribute "p:name" associated with an element type "bean" is not bound.
    at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at org.apache.xerces.util.ErrorHandlerWrapper.fatalError(Unknown Source)
    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source).. 
```

注意我截断了错误消息，因为我相信这个根是不言自明的......但无论我环顾四周，我的配置文件似乎没有任何问题，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:cache="http://www.springframework.org/schema/cache"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context-3.1.xsd        
            http://www.springframework.org/schema/mvc 
            http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
            http://www.springframework.org/schema/aop 
            http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
            http://www.springframework.org/schema/cache
            http://www.springframework.org/schema/cache/spring-cache.xsd">

    <context:component-scan base-package="mylittlecacheproject" />

    <mvc:resources mapping="/**" location="/" />

    <!-- Enables the Spring MVC @Controller programming model -->
    <mvc:annotation-driven />

    <!-- annotation caching -->
    <cache:annotation-driven />

    <!-- Enables aspjectj model -->
    <aop:aspectj-autoproxy proxy-target-class="true" />

    <!-- Validator -->
    <bean id="validator"
        class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean" />

    <!-- Resolve logical view names to .jsp resources in the /WEB-INF/views 
        directory -->
    <bean
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
        <property name="order" value="3" />
    </bean>

    <!-- XMLConverter Injection -->
    <bean id="XMLConverter" class="mppiwebservices.utils.xml.XMLConverter">
        <property name="marshaller" ref="castorMarshaller" />
        <property name="unmarshaller" ref="castorMarshaller" />
    </bean>
    <bean id="castorMarshaller" class="org.springframework.oxm.castor.CastorMarshaller">
        <property name="mappingLocation" value="classpath:rssMapping.xml" />
        <property name="ignoreExtraElements" value="true" />
    </bean>

    <!-- generic cache manager -->
    <bean id="cacheManager" class="org.springframework.cache.support.SimpleCacheManager">
        <property name="caches">
            <set>
                <bean
                    class="org.springframework.cache.concurrent.ConcurrentCacheFactoryBean"
                    p:name="rsspassthrough" />
            </set>
        </property>
    </bean>

</beans> 
```

好吧，我只是懒得剪掉项目中使用的其他 bean，但我的问题是......我实际上是否为 spring 的缓存指定了正确的模式位置？或者我在这里错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T04:29:32.613

终于找到了，在spring文档中，这个namespace`xmlns:p="http://www.springframework.org/schema/p"`

未包含在示例配置中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:43:47.697

您确定要编写`p:name`以下代码吗？

```
<bean class="org.springframework.cache.concurrent.ConcurrentCacheFactoryBean" p:name="rsspassthrough" /> 
```

# android - Googlemap 显示空白网格

> ID：14848756
> 
> 赞同：0
> 
> 时间：2013-02-13T07:50:04.707
> 
> 标签：android

我已经按照教程中的代码进行了操作。我注册了 sha-1 指纹。然后生成密钥。在我的代码中应用它，然后在其余的过程中应用它。

请检查我的代码

**MapsSay.java**

```
 public class MapsSay extends MapActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

}

public boolean isRouteDisplayed(){
    return false;

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

**activity_main.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

   <com.google.android.maps.MapView
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:apiKey="AIzaSyArKRuc5Kba62hRSTMN-dlH_vvuJGKyT28"
    android:clickable="true" />

</LinearLayout> 
```

**MapsSay.manifest**

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.say.maps"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET"> </uses-permission>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <uses-library android:name="com.google.android.maps" />

    <activity
        android:name=".MapsSay"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:35:53.100

已经解决了！感谢阿努库尔。

我使用 MD5 而不是 SHA1 获得了我的密钥，因为在我的代码中我使用了 v1。

# oracle - 用于删除 Oracle 维度中特定列的索引的 SQL 脚本

> ID：14848760
> 
> 赞同：0
> 
> 时间：2013-02-13T07:50:29.133
> 
> 标签：oracle, indexing, data-warehouse, dimensions

假设如果我为一个或多个维度中的一组属性创建了索引。如何创建 SQL 脚本来删除索引。

示例：如果我有

```
 index1 created for (Attribute1,Attribute2) of Dimension1
               index2 -> (Attribute3,Attribute4) of Dimension2
               index3 -> (Attribute5,Attribute6) of Dimension3
               ...          ..........              ...
               indexn -> (Attribute2,Attribute3) of Dimensionn 
```

现在如何删除 index1、index2---indexn？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:06:53.040

您可以在匿名 PL/SQL 块中使用类似的东西：

```
FOR x IN ( SELECT 'drop index ' || index_name stmt
              FROM all_indexes
              where upper(index_name) like ('INDEX%'))
            LOOP
                    EXECUTE IMMEDIATE x.stmt;
            END LOOP; 
```

# ruby-on-rails - Ruby On Rails：第一次默认选中单选按钮

> ID：14848769
> 
> 赞同：1
> 
> 时间：2013-02-13T07:51:00.143
> 
> 标签：ruby-on-rails, radio-button

我是 RoR 的新手。我想知道我们如何在创建新记录时第一次默认选择单选按钮？

我试过

```
<%= radio_button_tag 'scheduler', 'now', true%> Now <br>
<%= radio_button_tag 'scheduler', 'future'%> Future<br> 
```

它使第一个单选按钮（现在有值）被选中，但是当我选择第二个单选按钮（未来）并将表单上的其他必填字段留空时，再次选择第一个单选而不是第二个。

如何解决这个问题。

**注意：**字段“scheduler”只是此表单上的一个虚拟字段，如果选择了“Future”选项，它将显示另一个包含 datetimepicker 的 HTML，并且 datetimepicker 字段“schedule_date”是模型的实际字段。如果发布选项“现在”，那么它会将当前日期和时间保存到该字段“schedule_date”的数据库表中。所以我只需要使用这些单选按钮来显示/隐藏 HTML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:59:27.040

当您说“将必填字段留空”时，我猜您正在提交表单并从服务器获取编辑表单并带有警告闪烁？我认为您需要在这里做的不是将 Now 字段设置为 true，而是在创建新表单时使用变量并将其设置为 true。然后，当您将表单提交到服务器时，控制器的创建方法应该查看参数哈希，设置变量，如果提交失败验证应该返回编辑表单，将 Now 变量设置为 false，Future 变量设置为 true

所以在控制器的创建方法中你有类似的东西

```
@now = params[:scheduler][:now] 
```

在控制器的新方法中，您拥有：

```
@now = true 
```

在视图中：

```
 <%= radio_button_tag 'scheduler', 'now', @now%> Now <br>
<%= radio_button_tag 'scheduler', 'future', !@now %> Future<br> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:06:17.233

这是真的，因为您已将第一个单选按钮设置为默认选中。因此，当您选择第二个单选按钮然后刷新/提交表单时，页面会回到原来的位置，丢失之前选择的第二个按钮。

这就像你输入表单域然后刷新表单或返回后再次返回表单时，你丢失了之前填写的数据。

解决方案：

我说获取选中的单选按钮值并使用 jquery 将其设置为-

```
 $('input[name="myradios"]').change(function() {
             alert($(this).val());
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:18:22.177

尝试：

```
<%= radio_button_tag 'scheduler', 'now', true %> Now <br>
<%= radio_button_tag 'scheduler', 'future', params[:scheduler].eql?("future") %> Future<br> 
```

# .net - 如何使用正则表达式验证数学公式表达式

> ID：14848772
> 
> 赞同：0
> 
> 时间：2013-02-13T07:51:19.070
> 
> 标签：.net, regex

我正在寻找使用正则表达式的数学公式验证。这是我正在使用的示例代码：-

```
 string equation = "(a+b)*10";

 bool b = false;

 Regex rx = new Regex(@"^((?<o1>[^-+*/()]+|\([^-+*/()]+\)|(?<p>\()+[^-+*/()]+|[^-+*/()]+(?<-p>\)))[-+*/])+(?<o2>[^-+*/()]+|\([^-+*/()]+\)|(?<p>\()+[^-+*/()]+|[^-+*/()]+(?<-p>\)))(?(p)(?!))$");

 if (rx.IsMatch(equation))
     {
      b = true;
     } 
```

使用“(a+b)*100”这样的表达式可以正常工作。我的意思是，如果我错误地放置“(a+b))*100”或“(a+b*100”或“(a+b)*100)”之类的大括号，它正在做完美的验证。但是，如果要引入我的用户定义函数，例如“Sum(1,2)”或 Sqrt(8)，则无法验证。

我希望这也可以验证我的功能。像“Sum(1,2)”、“Sum(1,2”、“Sum1,2)”、“Sum(1,2))”。我的意思是它应该注意正确使用牙套。

注意：- 我正在使用 ANTLR 来创建这些功能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:56:47.087

通用数学公式过于复杂，无法使用正则表达式进行解析。使用 ANTLR 编写可以解析出单个元素的语法。

# c# - 删除字典中的键

> ID：14848773
> 
> 赞同：0
> 
> 时间：2013-02-13T07:51:21.470
> 
> 标签：c#, idictionary

我将如何根据以下条件删除字典中的指定键？

```
foreach (var kvp in dict)
            {
                if (kvp.Key.Contains('/'))
                {
                    //delete the key
                }
            } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T07:54:08.400

你会这样做：

```
foreach(var keyToDelete in dict.Keys.Where(x => x.Contains('/')).ToList())
    dict.Remove(keyToDelete); 
```

这里重要的是`ToList()`调用`Where`. 这会将所有应该删除的键放入一个可以迭代的新列表中。
如果您在没有的情况下尝试此代码，`ToList()`您将获得`InvalidOperationException`：

> 收藏已修改；枚举操作可能无法执行。

请注意，此代码比当前接受的答案更有效。它只复制需要删除的键而不是完整的字典。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T08:27:16.060

问题是您不能在循环遍历集合元素时修改集合。解决方案是将要删除的键放在不同的集合中，然后循环遍历以删除元素。这就是丹尼尔的回答。

如果你不能/不想使用 LINQ，你可以这样做：

```
List<YourKeyType> toRemove = new List<YourKeyType>();
foreach (var kvp in dict)
{
    if (kvp.Key.Contains('/'))
        toRemove.Add(kvp.Key);
}
foreach (var aKey in toRemove)
    dict.Remove(aKey); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T08:20:20.047

根据您的数据集，在没有要丢弃的键的情况下创建新对象可能更有效：

```
dict = dict.Where(kvp => !kvp.Key.Contains('/'))
           .ToDictionary(kvp => kvp.Key, kvp => kvp.Value); 
```

我还可以争辩说，这比删除键更可取，因为它更清楚地传达了代码的意图，但这与我的个人编码风格密切相关，因此您的里程可能会有所不同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-13T08:37:50.067

我意识到这已经被标记为已回答，但我认为如果您只想从未指定最大大小的字典中删除一个键，则复制整个字典只是为了删除一个键不是一个好的解决方案！

要删除匹配键的一个条目，您可以这样做：

```
foreach (var kvp in dict)
{
    if (kvp.Key.Contains('/'))
    {
        dict.Remove(kvp.Key);
        break;
    }
} 
```

不需要整个字典的副本！

请注意，这假设只有一个密钥要删除。如果可能还有更多，请使用上面 Daniel 或 Francesco 的答案。

（实际上，我建议您只使用 Daniel 的答案，但我将在此处留下这个作为示例，而不使用 Linq。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T07:58:45.900

编辑：正如下面其他答案所说，下面代码中重要的是调用 ToList()。这将创建一个 dict 副本，您可以在从 dict 中删除项目时对其进行迭代，而无需更改您正在迭代的集合。

你可以通过使用类似的东西来做到这一点

```
 dict.ToList().ForEach(a => { if (a.Key.Contains('/') dict.Remove(a.Key); }); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-13T07:54:34.237

Foreach 可能会抛出异常。尝试使用 for 代替。

对于删除，请使用 Remove 方法。

# java - 使用 fractionDigits 对 BigDecimal 进行 JAXB 编组

> ID：14848776
> 
> 赞同：6
> 
> 时间：2013-02-13T07:51:34.330
> 
> 标签：java, xsd, jaxb, xjc, cxf-xjc-plugin

所以这是我的问题。我得到了一个 XSD，我生成的 XML 文件应该遵守该 XSD。我使用`org.apache.cxf.cxf-xjc-plugin`maven 插件和外部绑定文件生成源代码。但是当我尝试编组我的对象时，生成的 XML 不符合我的要求。

我的 XSD 包含以下内容：

```
<xsd:element maxOccurs="1" minOccurs="0" name="amount">
  <xsd:simpleType>
    <xsd:restriction base="xsd:decimal">
      <xsd:totalDigits value="13" />
      <xsd:fractionDigits value="2" />
    </xsd:restriction>
  </xsd:simpleType>
</xsd:element>
...
<xsd:element maxOccurs="1" minOccurs="0" name="rate">
  <xsd:simpleType>
    <xsd:restriction base="xsd:decimal">
      <xsd:totalDigits value="8" />
      <xsd:fractionDigits value="5" />
    </xsd:restriction>
  </xsd:simpleType>
</xsd:element> 
```

生成的 XML 片段如下所示：

```
<amount>109.5</amount>
...
<rate>10.25</rate> 
```

虽然我期待它是：

```
<amount>109.50</amount>
...
<rate>10.25000</rate> 
```

有没有办法以干净的方式解决这个问题？

*我宁愿不要为每个单独`totalDigits`的`fractionDigits`组合编写多个适配器。由于 XSD 可能会发生变化，我想保持生成的源代码不变。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T10:47:58.717

您将需要使用`XmlAdapter`此用例。下面是一个示例绑定文件，可帮助您生成它们。该逻辑将包含在一个`DecimalFormatter`包含所有不同所需格式的方法的类中。

```
<jxb:bindings xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:jxb="http://java.sun.com/xml/ns/jaxb" version="2.1">
    <jxb:bindings schemaLocation="schema.xsd">
        <jxb:bindings node="//xs:element[@name='amount']">
            <jxb:property>
                <jxb:baseType>
                    <jxb:javaType name="java.math.BigDecimal"
                        parseMethod="org.example.DecimalFormatter.parseDecimal"
                        printMethod="org.example.DecimalFormatter.printDecimal_2Places" />
                </jxb:baseType>
            </jxb:property>
        </jxb:bindings>
        <jxb:bindings node="//xs:element[@name='rate']">
            <jxb:property>
                <jxb:baseType>
                    <jxb:javaType name="java.math.BigDecimal"
                        parseMethod="org.example.DecimalFormatter.parseDecimal"
                        printMethod="org.example.DecimalFormatter.printDecimal_5Places" />
                </jxb:baseType>
            </jxb:property>
        </jxb:bindings>
    </jxb:bindings>
</jxb:bindings> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/08/xml-schema-to-java-generating.html](http://blog.bdoughan.com/2011/08/xml-schema-to-java-generating.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-28T11:45:26.967

例如，我创建了一些特殊的 XmlAdapter

```
public class BigDecimal8PlaceAdapter extends XmlAdapter<String, BigDecimal> {

@Override
public String marshal(BigDecimal v) throws Exception {
  DecimalFormatSymbols otherSymbols = new DecimalFormatSymbols();
  otherSymbols.setDecimalSeparator('.');
  DecimalFormat df = new DecimalFormat("#0.00000000",otherSymbols);
  return df.format(v);
}

@Override
public BigDecimal unmarshal(String v) throws Exception {
    Double d = Double.valueOf(v);
    return BigDecimal.valueOf(d);
}

} 
```

然后我在属性中添加 XmlAdapter：

```
@XmlElement(name = "rate", required = true)
@XmlJavaTypeAdapter(BigDecimal8PlaceAdapter.class)
protected BigDecimal rate; 
```

然后，用 2 位小数适配器做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:20:57.813

如果您可以将 XSD 更改为使用[此处](http://www.w3.org/TR/xsd-precisionDecimal)`precisionDecimal`记录的类型，您也许可以使用设置为相同值的和方面。`minScale``maxScale`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-22T22:00:58.557

我对保持尾随零可能获得什么感到困惑。

如果保留尾随零非常重要，则使用字符串值而不是数字并使用属性来指定其宽度和小数。

在任何情况下，尾随零都不会影响使用这些值中的任何一个的计算，并且您能够呈现它们的唯一方法是将结果转换为字符串并自己填充。如需帮助，您可能希望查看...

[CXF 客户端 SOAP 消息格式](https://stackoverflow.com/questions/20709505/cxf-client-soap-message-formatting/21294770#21294770)

# .net - .NET 应用程序上的 WaitForDebugEvent() API

> ID：14848777
> 
> 赞同：3
> 
> 时间：2013-02-13T07:51:34.780
> 
> 标签：.net, debugging, exception-handling, windbg

我有一个启动器应用程序，它创建一个进程并使用 WaitForDebugEvent/ContinueDebugEvent API 函数对其进行监视。该应用程序是用 C++ 编写的，它适用于非托管应用程序。

我还有一个随机崩溃的 .NET 应用程序。我想使用 laucher 应用程序来捕获异常，编写 minidump 并使用 WinDbg 检查它。但是，不幸的是，WaitForDebugEvent/ContinueDebugEvent 组合不适用于 .NET 应用程序。当异常发生时，.NET 应用程序会静默关闭，并且启动器应用程序根本不会报告任何异常，就像一切都很好。即使在这种情况下发生了一些异常，它也被我不知道的东西神秘地处理了。

是否有任何特殊的方式来处理.NET？一些用于捕获“特殊”.NET 异常等的特殊 API 调用……谷歌根本没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-02T16:13:09.157

您可以在 .Net 中为 AppDomain.UnhandledException 添加事件处理程序，并捕获所有由 .Net 引起的异常。

# php - 在 Web 服务器问题上部署 flex 应用程序

> ID：14848781
> 
> 赞同：2
> 
> 时间：2013-02-13T07:52:30.457
> 
> 标签：php, apache-flex, deployment, flex4

我有一个可以上传本地文件的简单 flex 应用程序。这是一个简单的按钮，点击事件会出现一个文件对话框。

然后，选定的文件由 PHP 脚本处理，在我的本地机器上运行良好。当我尝试将我的 flex-debug 或 flex-release 项目移动到远程服务器时，上传功能不再起作用。

如果检查网络，则执行 POST，但由于某些原因，它的状态为等待 1 分钟，但成功后运行不佳，如预期的那样，文件没有上传。

```
// file is a file:FileReference object
var uploadURL:URLRequest = new URLRequest();
var params:URLVariables = new URLVariables();
file.addEventListener(Event.COMPLETE, uploadComplete);
params.maxSize = maxSize;
uploadURL.method = URLRequestMethod.POST;
uploadURL.data = params;
uploadURL.url = uploadScript;
file.upload(uploadURL, IMAGE_FIELD);
file.addEventListener(DataEvent.UPLOAD_COMPLETE_DATA, uploadDataComplete);
file.addEventListener(Event.COMPLETE, uploadComplete); 
```

编辑：当我尝试将我从 Flash Builder 4.5 生成的调试文件夹从 C:\www 移动到 D:\www 上的第二个本地主机时，上传脚本不再起作用。也许我错过了一些部署选项，只能在我的 .mxml 所在的 C:\www 上看到它。

Edit2：远程服务器出现问题，即移动上传文件功能无法正常工作。问题出在upload.php 脚本上，毕竟不是Flex，感谢您的帮助，抱歉打扰了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T14:37:44.757

尝试使用：

```
var request : URLRequest = new URLRequest("http://{you_site_domain}/upload.php"); 
```

并检查

```
loader.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);
loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, ioErrorHandler); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:33:15.820

我想你应该检查几点-

1）您正在使用的服务路径，在浏览器地址栏中运行再次检查它。2）检查上传路径文件夹权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T08:27:43.827

1) 提供服务路径或类似示例。

2）上传的文件有多大，你测试过2Mb以下吗（默认php.ini只允许小文件大小）

3) 你得到的确切错误信息是什么？

4）你能听听ProgressEvent吗，也许你的上传速度很慢......而且你使用了一个大文件。

5) 监听 IOErrorEven.IO_ERROR 和 SecurityErrorEvent.SECURITY_ERROR

# xml - 如何使用 C# 从 Windows 窗体中的树文本生成 XSD 文件

> ID：14848782
> 
> 赞同：1
> 
> 时间：2013-02-13T07:52:31.627
> 
> 标签：xml, winforms, xsd, treeview

我需要从树视图生成 XSD 文件。也就是说，树节点文本应该是 XSD 文件的元素。例如。想象一下我有以下树。

章节

```
 Heading
       Section
           Paragraph
               Sentance 
```

在按钮上单击我的输出应该是

```
<xs:element name="Chapter" type="xs:string">
    <xs:element name="Heading" type="xs:string">
      <xs:element name="Session" type="xs:string">
        <xs:element name="Para" type="xs:string">         
        </xs:element>      
      </xs:element>    
    </xs:element>  
  </xs:element> 
```

我有以下代码，但它只返回第一行。谁能帮忙？

诠释 i = 0; 字符串 XSD = string.Empty;

```
 private void button1_Click(object sender, EventArgs e)
    {
       XSD=XSDString(XSD,tvMain.Nodes[0]);
       textBox1.Text = XSD.ToString(); 
    }

    private string XSDString(string XSD, TreeNode tnode)
    {
        for (i = 0; i < tnode.Nodes.Count; i++)
        {
            XSD = XSD + "<xs:element name=" + tnode.Nodes[i].Text + " "+ "type=" + "xs:string" + ">";
            XSDString(XSD, tnode.Nodes[i]);
            XSD = XSD + "</xs:element>";
        }
        return XSD;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:43:51.203

我得到了答案..我只需要 XSD 来保持价值..

XSD = XSDString(XSD, tnode.Nodes[i]);

# android - 使用 ksoap2 将大小为 5 mb 的字节数组传递给 Web 服务时出现内存不足错误

> ID：14848784
> 
> 赞同：0
> 
> 时间：2013-02-13T07:52:51.283
> 
> 标签：android, ksoap2, android-ksoap2

我已将我的 DB 文件转换为字节数组，并希望将其传递给我的 Web 服务以便保存在服务器上。我的数据库大小为 5 mb，但是在添加到 soap_request 时，它给出了内存不足的异常......我附上我的代码如下

```
File file = new File(filePath);
                int size = (int) file.length();
                byte[] bytes = new byte[size];

                Log.v(TAG, "File size in byte ==>"+size);
                try {
                    BufferedInputStream buf = new BufferedInputStream(new FileInputStream(file));
                    buf.read(bytes, 0, bytes.length);
                    buf.close();
                    Log.v(TAG, "ByteArray = "+bytes.length);
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

                    SoapObject soap_request = new SoapObject(NAMESPACE, METHOD_NAME);
                    fileName = "TraceBaleAndroid_"+UserID+"_"+backupDateTime+".db";
                    Log.v(TAG, "FileName = "+fileName);
                    soap_request.addProperty("_FileName", fileName);

                    soap_request.addProperty("_ByteArray",bytes);
                    soap_request.addProperty("UserID", UserID);

                    Log.v(TAG, "soap_request _FileName= >>"+soap_request.getProperty(0));
                    //Log.v(TAG, "soap_request _ByteArray= >>"+soap_request.getProperty(1));
                    Log.v(TAG, "soap_request UserID= >>"+soap_request.getProperty(2));

                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
                    new MarshalBase64().register(envelope);
                    envelope.setOutputSoapObject(soap_request);
                    envelope.dotNet = true;

                    Log.v(TAG,"Calling webservice....");
                    androidHttpTransportSE = new HttpTransportSE(URL);
                    androidHttpTransportSE.debug = true;
                    androidHttpTransportSE.call(SOAP_ACTION, envelope);

                    Log.v(TAG,"Getting result from webservice....");
                    SoapObject result = (SoapObject) envelope.bodyIn;
                    JSONObject response = new JSONObject(result.getProperty(0).toString());
                    Log.v(TAG, "Web Response...." + response.get(" Result "));

                    if (response.get(" Result ").equals("Uploading DataBase Backup To Server successfully"))
                    {
                        flag = true;
                        Log.v(TAG, "Database is uploaded .........");
                    }

            } catch (Exception e) {
                e.printStackTrace();
            }
            finally 
            {
                androidHttpTransportSE.reset();

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:02:03.933

带有 5MB 数据的 SOAP 请求对我来说真的很奇怪。但是，如果您确实确定需要这个，请查看以下问题的答案：[如何增加 android 应用程序的堆大小？](https://stackoverflow.com/questions/11275650/how-to-increase-heap-size-of-an-android-application) 所有这些建议也适用于您的情况。

# c# - “我的字节在哪里？” 或调查文件长度特征

> ID：14848786
> 
> 赞同：12
> 
> 时间：2013-02-13T07:52:55.967
> 
> 标签：c#, size, byte

这是我关于[以块下载文件的](https://stackoverflow.com/questions/14602186/download-file-in-chunks-windows-phone)问题的延续。解释会很大，所以我会尝试将它分成几个部分。

**1）我试图做什么？**

我正在为 Window-Phone 应用程序创建下载管理器。首先，我尝试解决下载大文件的问题（解释在上一个问题中）。不，我想添加*“可恢复下载”*功能。

**2）我已经做了什么。**

目前我有一个运行良好的下载管理器，它允许绕过 Windows Phone RAM 限制。这个管理器的情节是，它允许使用 HTTP Range 标头下载小块文件。

快速解释它的工作原理：

该文件以恒定大小的块下载。我们称这个大小为*“delta”*。文件块下载后，以追加模式保存到本地存储（硬盘，在 WP 上称为独立存储）（因此，下载的字节数组始终添加到文件末尾）。下载单个块后，语句

```
if (mediaFileLength >= delta) // mediaFileLength is a length of downloaded chunk 
```

被检查。如果它是真的，那意味着，还有一些东西要下载，并且这个方法被递归调用。否则，这意味着这个块是最后一个，并且没有任何东西可以下载。

**3）有什么问题？**

直到我在一次性下载中使用了这个逻辑（我的意思是一次性，当你开始下载文件并等到下载完成时）效果很好。但是，我决定，我需要*“恢复下载”* 功能。**所以，事实：**

**3.1）**我知道，文件块大小是一个常数。

**3.2）**我知道，文件何时完全下载。（这是我的应用程序逻辑的间接结果，不会让你厌烦解释，只是假设这是事实）

在这两个陈述的假设下，我可以证明，下载的块数等于 **(CurrentFileLength)/delta**。其中*CurrentFileLenght*是已下载文件的大小（以字节为单位）。

要恢复下载文件，我应该简单地设置所需的标题并调用下载方法。这似乎是逻辑，不是吗？我试图实现它：

```
 // Check file size
    using (IsolatedStorageFileStream fileStream = isolatedStorageFile.OpenFile("SomewhereInTheIsolatedStorage", FileMode.Open, FileAccess.Read))
    {
      int currentFileSize = Convert.ToInt32(fileStream.Length);
      int currentFileChunkIterator = currentFileSize / delta;
    } 
```

我看到的结果是什么？下载的文件长度等于**2432000**字节（**增量为 304160**，总文件大小约为**4.5 MB**，我们只下载了一半）。所以结果大约是**7,995**。（它实际上是 long/int 类型，所以它是 7，应该是 8！）为什么会这样？简单的数学告诉我们，文件长度应该是**2433280**，所以给定的值非常接近，但不相等。

进一步的调查表明，从 给出的所有值`fileStream.Length`都不准确，但都接近。

**为什么会这样？**我不确切知道，但也许 .Length 值是从文件元数据中获取的。也许，这种舍入对于这种方法是正常的。也许，当下载被中断时，文件并没有完全保存……（不，那真是太棒了，不可能）

所以问题就解决了——它是**“如何确定下载的块数”**。问题是如何解决它。

**4）我对解决问题的想法。**

我的第一个想法是在这里使用数学。设置一些*epsilon-neiborhood*`currentFileChunkIterator = currentFileSize / delta;`并在语句中使用它。但这将要求我们记住类型 I 和类型 II 错误（或误报和错过，如果您不喜欢统计术语）。也许，没有什么可下载的了。另外，我没有检查提供的值和真​​实值的差异是否应该永久增长或者会有周期性波动。对于小尺寸（大约 4-5 MB），我只看到了增长，但这并不能证明什么。

所以，我在这里寻求帮助，因为我不喜欢我的解决方案。

**5）我想听到的答案：**

*是什么导致了实际价值和收到的价值之间的差异？*

~~*有没有办法获得真正的价值？*~~

~~*如果不是，我的解决方案对这个问题有好处吗？*~~

~~*还有其他更好的解决方案吗？*~~

PS 我不会设置 Windows-Phone 标签，因为我不确定这个问题是否与操作系统相关。我使用独立存储工具检查下载文件的大小，它显示的值与收到的值相同（对于屏幕截图中的俄语，我很抱歉）：

![文件大小错误图片](../Images/58a0a4ca2527222ddc32c1736d9a7799.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:43:38.120

你听说过关于一个菜鸟程序员和 10 个大师级程序员的轶事吗？Guru 程序员试图在他的解决方案中找到错误，noob 已经找到了它，但没有告诉它，因为它是愚蠢的，我们害怕被嘲笑。

为什么我想起了这个？因为情况类似。

我的问题的解释很重，我决定不提一些我确信工作正确的小方面。（而且他们确实工作正常）

其中一个小方面是，下载的文件是通过 AES PKCS7 填充加密的。好吧，解密工作正常，我知道，那我为什么要提呢？而我没有。

所以，然后我试图找出究竟是什么导致了最后一个块的错误。最可信的版本是关于缓冲的问题，我试图找到我在哪里留下丢失的字节。我一次又一次地测试，但我找不到它们，因为每一块都在保存而没有任何损失。**有一天我领悟到：**

~~没有勺子~~

没有错误。

AES PKCS7 有什么意义？嗯，主要是它使解密的文件更小。不多，只有 16 个字节。而且我的解密方法和下载方法都考虑到了，应该没有问题吧？

但是，当下载过程中断时会发生什么？最后一个块将正确保存，缓冲或其他不会有错误。然后我们要继续下载。下载的块数将等于`currentFileChunkIterator = currentFileSize / delta;`

在这里我应该问自己：**“你为什么要做这么愚蠢的事情？”**

“您下载的一个块大小*不是 delta*。实际上，它小于 delta ”。（解密使块更小到 16 个字节，记得吗？）

增量本身由 10 个相等的部分组成，它们正在被解密。所以我们不应该除以 delta，而是除以**(delta - 16 * 10)**，即 (304160 - 160) = **304000**。

*我感觉到这里有一只老鼠*。让我们尝试找出下载的块的数量：

2432000 / 304000 = 8.*等等... OH SHI~*

* * *

所以，这就是故事的结局。

整个解决方案逻辑是正确的。

它失败的唯一原因是我认为，由于某种原因，下载的解密文件大小应该与下载的*加密*块的总和相同。

而且，当然，由于我没有提到解密（仅在上一个问题中提到，仅链接），所以你们谁也不能给我一个正确的答案。我对此感到非常抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:59:26.573

我正在回答您的更新：

到目前为止，这是我的理解：实际写入文件的长度（四舍五入到下一个 1KiB）比您实际写入的长度要长。这会导致您对“file.Length == 下载量”的假设是错误的。

一种解决方案是单独跟踪此信息。创建一些元数据结构（可以使用相同的存储机制进行持久化）以准确跟踪已下载的块以及文件的整个大小：

```
[DataContract] //< I forgot how serialization on the phone works, please forgive me if the tags differ
struct Metadata
{
     [DataMember]
     public int Length;
     [DataMember]
     public int NumBlocksDownloaded;
} 
```

假设您以连续的方式继续下载它们，这足以重建哪些块已下载，哪些尚未下载。

*编辑*

当然，在将数据写入流之前，您必须将代码从简单的追加更改为将流的位置移动到正确的块：

```
 file.Position = currentBlock * delta;
 file.Write(block, 0, block.Length); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T19:19:52.197

就像一个可能的错误一样。不要忘记验证文件是否在请求期间被修改。特别是在两者之间的长时间内，可能会在暂停/恢复时发生。错误可能很大，例如文件被修改为小尺寸并且您的计数变得“错误”，并且文件大小相同但内容已修改，这将留下损坏的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T10:42:00.463

在继续我的评论..

我从您的描述中了解到的原始文件大小为 2432000 字节。
块大小设置为 304160 字节（或每个“增量”为 304160）。

因此，发送文件的机器能够填充 7 个块并发送它们。
接收机器现在有 7 x 304160 字节 = 2129120 字节。

最后一个块不会被填充到最后，因为没有足够的字节来填充它。所以它将包含：2432000 - 2129120 = 302880 小于 304160

如果添加数字，您将得到 7x304160 + 1x302880 = 2432000 字节因此根据原始文件完整传输到目的地。

问题是您正在计算 8x304160 = 2433280 坚持认为即使是最后一块也必须完全填充 - 但是用什么？为什么？

谦虚地说..您是否陷入某种数学混乱或我误解了您的问题？
请回答，原始文件大小是多少，另一端收到的大小是多少？（总数！）

# ruby-on-rails - 在铁路应用程序的索引页面上未保存和显示的值

> ID：14848787
> 
> 赞同：0
> 
> 时间：2013-02-13T07:52:57.760
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

Rails 的新手，所以我正在实现一个基本的应用程序。

文本字段和一个提交按钮，单击提交按钮时，将显示在放置在索引页面提交按钮下方的 div 上的文本。

我尝试的代码和事情如下 -

网站网址 -`http://localhost:3000/lists/index`

列出控制器代码 -

```
class ListsController < ApplicationController
  def index
  List.all
  end

  def add
  @message = params[:todo_text]
  List.create(:title => @message)
  redirect_to '/lists/index', :notice => "Notice"
  end
end 
```

型号列表.rb -

```
class List < ActiveRecord::Base
attr_accessible :title
end 
```

查看列表 index.html.erb 代码 -

```
<div id="search">
<%= form_tag("/lists/add", :method=>"post") do %>
  <%= text_field_tag(:todo_text, '',:class=>"formtext" ) %>
  <%= submit_tag("Add Message", :class=>"submit") %>
<% end %>
</div> 
```

现在，当我提交一些文本时，它会重定向到相同的内容。但是数据不会恢复到页面。让我知道我做错了什么以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:50:44.250

**在控制器中**

```
def index
  @lists = List.all
end 
```

**在 index.html.erb 中**

```
<% @lists.each do |list| %> 
  ...
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:28:16.733

尝试

```
<%= form_for @list, :url => { :action => "add" } do |f| %> 
```

控制器

```
def index
@lists = List.all
end

def add
      @list = List.new(params[:title])
      redirect_to @lists, :notice => "Notice"
    end 
```

# r - 根据数据框中的 2 列对数据进行排序

> ID：14848791
> 
> 赞同：1
> 
> 时间：2013-02-13T07:53:08.087
> 
> 标签：r

我有一个数据框 x，其中包含 a、b、c 列。

我正在尝试根据列 a 和 c 对数据进行排序，并且我的排序标准是在 a 上升序并在 c 上降序。下面是我写的代码。

```
z <- x[order(x$a,-x$c),] 
```

这段代码给了我一个警告，如下所示。

```
Warning message:
In Ops.factor(x$c) : - not meaningful for factors 
```

此外，当我使用 head(z) 检查数据帧 z 时，它给了我错误的数据，如下所示：

```
30708908 0.3918980    NA
22061768 0.4022183    NA
21430343 0.4118651    NA
21429828 0.4134888    NA
21425966 0.4159323    NA
22057521 0.4173094    NA 
```

并且最初在数据框 x 中没有列 c 的任何 NA 值。我经历了很多线程，但找不到任何解决方案。任何人都可以请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:59:07.923

尝试这个

```
install.packages('plyr');
library('plyr');
z<-arrange(x,a,desc(c)); 
```

此外，您可以使用

```
options(stringsAsFactors = FALSE) 
```

在创建框架之前，或在创建“x”数据框架时，指定

```
stringsAsFactors = FALSE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:09:27.980

```
z <- x[order(x$a,-as.character(x$c) ), ]
z 
```

如果 Roman 怀疑您的因子级别中有数字，您可能需要按照他的建议进行操作并添加`as.numeric`，否则`9`将大于`10`

```
z <- x[order(x$a,-as.numeric(as.character(x$c)) ), ]
z 
```

但如果他们是角色，那么你将再次获得所有 NA，所以这实际上取决于级别的性质`x$c`

# python - 将参数传递给扭曲工厂以传递给会话

> ID：14848793
> 
> 赞同：5
> 
> 时间：2013-02-13T07:53:26.103
> 
> 标签：python, twisted

我已经编写了一个基于扭曲的 sshsimpleserver.py 的 sshdaemon，效果很好。

[http://twistedmatrix.com/documents/current/conch/examples/](http://twistedmatrix.com/documents/current/conch/examples/)

但我现在想将命令行参数传递给 EchoProtocol，以根据参数更改其行为。我怎样才能做到这一点？在这种情况下，我想将“options.test”参数传递给我的协议。

```
[...]

if __name__ == '__main__':
     parser = optparse.OptionParser()
     parser.add_option('-p', '--port', action = 'store', type = 'int', 
dest = 'port', default = 1235, help = 'server port')
     parser.add_option('-t', '--test', action = 'store', type = 
'string', dest = 'test', default = '123')
     (options, args) = parser.parse_args()

     components.registerAdapter(ExampleSession, ExampleAvatar, 
session.ISession)

     [...]

     reactor.listenTCP(options.port, ExampleFactory())
     reactor.run() 
```

由于会话实例是由工厂创建的，我似乎无法将额外的参数传递给会话构造函数和协议。我已经尝试将选项名称设为全局，但它在协议上下文/范围中不可见。

顺便提一句。我将协议类移动到它自己的文件中并将其导入到主文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T13:40:03.010

您可以创建自己的工厂并将参数传递给它。[查看文档](http://twistedmatrix.com/documents/12.2.0/core/howto/servers.html)中的示例

```
from twisted.internet.protocol import Factory, Protocol
from twisted.internet.endpoints import TCP4ServerEndpoint
from twisted.internet import reactor

class QOTD(Protocol):

    def connectionMade(self):
        # self.factory was set by the factory's default buildProtocol:
        self.transport.write(self.factory.quote + '\r\n')
        self.transport.loseConnection()

class QOTDFactory(Factory):

    # This will be used by the default buildProtocol to create new protocols:
    protocol = QOTD

    def __init__(self, quote=None):
        self.quote = quote or 'An apple a day keeps the doctor away'

endpoint = TCP4ServerEndpoint(reactor, 8007)
endpoint.listen(QOTDFactory("configurable quote"))
reactor.run() 
```

# google-app-engine - 如何通过键从 GAE 数据存储中删除多个实体

> ID：14848794
> 
> 赞同：4
> 
> 时间：2013-02-13T07:53:30.163
> 
> 标签：google-app-engine, google-cloud-datastore

我在本地主机上使用 Google App Engine。`Book`我在数据存储区中有 2000 个实体。我想删除第一个 1900（键范围从 1 到 1901）。我将如何从交互式控制台执行此操作？我正在使用`ndb`而不是`db`

也许有某种范围功能。

例如，我尝试以下操作，但没有任何反应。

```
from myddb import Book

list= Book.gql("WHERE ID < 193")

for entity in list:
  db.delete(entity) 
```

编辑：

根据@Lipis 的回复，以下内容正在运行

```
from myddb import Book

from google.appengine.ext import ndb

book_keys = Book.query().fetch(keys_only=True)
ndb.delete_multi(book_keys) 
```

但这会删除一切。我需要做的是通过`Key`aka `ID`like查询

```
book_keys = Book.query(Article._Key < 1901).fetch(keys_only=True) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T10:02:22.343

您应该使用`ndb.delete_multi()`：

```
from google.appengine.ext import ndb

book_keys = Book.query().fetch(keys_only=True)
ndb.delete_multi(book_keys) 
```

您应该通过[NDB 查询](https://developers.google.com/appengine/docs/python/ndb/queries)来查看您还有哪些其他选项以及可以实现的目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T08:58:27.993

**编辑**

我没有测试下面的解决方案，但测试它并让我知道。

[这也应该对ndb备忘单](https://docs.google.com/document/d/1AefylbadN456_Z7BZOpZEXDq8cR8LYu7QgI7bt5V0Iw/mobilebasic)有很大帮助

```
q = Book.query(default_options=QueryOptions(keys_only=True))

   if Book.ID < 1901:
      ndb.delete_multi([m.key for m in q.fetch(1900)]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T10:05:04.863

在`ndb you use q = Book.query('query').fetch('number')`

然后，迭代和删除。

# date - 使用 phing 修剪目录中的旧文件

> ID：14848796
> 
> 赞同：0
> 
> 时间：2013-02-13T07:53:38.883
> 
> 标签：date, phing

这个目标工作正常

```
<target name="cleanlogs">
   <echo msg="clean log do nothing !!!!not ready!!!!" />
  <fileset dir="/var/www/myapp/log" id="deleteLogs">
   <include name="**/debug*.log" />
  </fileset>
  <delete>
   <fileset refid="deleteLogs" />
  </delete>
 </target> 
```

我想添加类似的东西

```
<date datetime="xxxxxx" when="before"/> 
```

或者

```
<date seconds="xxxxxx" when="before"/> 
```

仅删除超过 5 天的日志

如何在 phing 中构建 xxxxx ？

```
<tstamp> 
```

不要返回“时间戳”：-/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:14:18.583

这是一个解决方案的提议

```
 <?xml version="1.0" encoding="UTF-8"?>
    <project name="Project" default="format"   basedir=".">
        <target name="format">
                <tstamp>
                        <format property="DATE" pattern="%s" />
                </tstamp>
                <php expression="${DATE}-(3600*24*5)" returnProperty="NEWDATE"/>
                <php expression="time()-(3600*24*5)" returnProperty="EVALUATEDTIME"/>

                <echo>DATE = ${DATE}</echo>
                <echo>NEWDATE = ${NEWDATE}</echo>
                <echo>EVALUATEDTIME = ${EVALUATEDTIME}</echo>

        </target>
    </project> 
```

实际上，您可以将任何内容放入 eval 中并直接计算您需要的任何内容。

# eclipse - Eclipse 显示代码更改，如 Netbeans

> ID：14848798
> 
> 赞同：1
> 
> 时间：2013-02-13T07:53:47.707
> 
> 标签：eclipse, subclipse

我正在从 Netbeans 过渡到 Eclipse。

在 Eclipse 上，我尝试安装 Subclipse，是的，如果我修改代码，我可以看到这些标记。但是当我按下保存时，所有这些标记都消失了。

不在 Netbeans 上，这些标记仍然存在，只有当我在 SVN 中提交更改时。

如何坚持这些标记？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:49:43.423

转到 Window --> Preferences --> General --> Editors --> Text Editors --> Quick diff。

选中标有“在概览标尺中显示差异”的复选框。

还将“使用此参考源”更改为“原始 SVN 复制”并单击“应用/确定”。

您还可以更改标记的颜色。

# ios - 使用预缓冲开始在 iOS 中播放 SoundCloud 音频流

> ID：14848801
> 
> 赞同：5
> 
> 时间：2013-02-13T07:54:07.227
> 
> 标签：ios, soundcloud

使用 SoundCloud Developers 页面中的以下代码示例，AVAudioPlayer 将在收到 SCRequest 响应后开始播放。根据请求文件的大小，这可能需要一些时间。

iOS SoundCloud API 是否提供预缓冲解决方案，以便可以在收到所有数据之前开始播放音频，或者我是否需要在 NSURLConnection 的帮助下实现自己的解决方案才能实现这一点？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
     NSDictionary *track = [self.tracks objectAtIndex:indexPath.row];
     NSString *streamURL = [track objectForKey:@"stream_url"];
     SCAccount *account = [SCSoundCloud account];

     [SCRequest performMethod:SCRequestMethodGET
                   onResource:[NSURL URLWithString:streamURL]
              usingParameters:nil
                  withAccount:account
       sendingProgressHandler:nil
              responseHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
             NSError *playerError;
             player = [[AVAudioPlayer alloc] initWithData:data error:&playerError];
             [player prepareToPlay];
             [player play];
         }];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-04T14:48:53.823

要从 SoundCloud 流式传输曲目，您只需将 URL 传递给带有客户端 ID 的 AVPlayer：

```
 NSString *urlString = [NSString stringWithFormat:@"%@?client_id=%@", track.streamURL, self.clientId];
player = [[AVPlayer alloc] initWithURL:[NSURL URLWithString:urlString]];
[player play]; 
```

使它成为渐进式下载需要一些额外的工作。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T23:21:50.187

afaik 目前没有预缓冲解决方案。如果您想为我们的 SoundCloud API 做出贡献，我们很乐意查看您关于此功能的 Pull Request。

这可能会影响[CocoaSoundCloudAPI](https://github.com/soundcloud/CocoaSoundCloudAPI)和[OAuth2Client](https://github.com/nxtbgthng/OAuth2Client)。

快乐编码！

# jquery-ui - 如何过滤具有洗牌动画效果的项目

> ID：14848803
> 
> 赞同：0
> 
> 时间：2013-02-13T07:54:28.163
> 
> 标签：jquery-ui, jquery, jquery-plugins

嗨，我想在我们单击过滤器时实现旋转 ajax 页面加载，如示例[http://demo.mattiaviviani.com/inbox/portfolio/themes](http://demo.mattiaviviani.com/inbox/portfolio/themes) .... 我不完全知道哪种 jquery 类型是它？请帮我！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:57:58.740

对源代码的简单一瞥显示了对 jQuery 的 PrettyPhoto 的引用： [http ://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:00:58.807

我认为 Fancybox 将帮助您实现这一目标。试试下面的链接。

[Jquery 花式盒子](http://fancybox.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:03:24.833

希望下面的链接和示例会有所帮助。

[http://www.gethifi.com/blog/a-jquery-plugin-to-create-an-interactive-filterable-portfolio-like-ours](http://www.gethifi.com/blog/a-jquery-plugin-to-create-an-interactive-filterable-portfolio-like-ours)

[http://blog.gabrieleromanato.com/jquery-responsive-sortable-portfolio/](http://blog.gabrieleromanato.com/jquery-responsive-sortable-portfolio/)

[http://razorjack.net/quicksand/](http://razorjack.net/quicksand/)

# scala - 为什么在Scala中使用参数调用大写时会调用charAt

> ID：14848810
> 
> 赞同：1
> 
> 时间：2013-02-13T07:54:50.303
> 
> 标签：scala

```
scala> "Foo".capitalize(2)    
res18: Char = o 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T07:58:55.850

复制自[StringLike 特征文档](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.StringLike)：

```
def capitalize: String
Returns this string with first character converted to upper case 
```

你实际上在做的是

“Foo”.capitalize.apply(2)

文档再次：

```
def apply(n: Int): Char
Return element at index n 
```

# vba - excel宏在vba中调用另一个excel宏

> ID：14848814
> 
> 赞同：0
> 
> 时间：2013-02-13T07:55:05.103
> 
> 标签：vba, excel, excel-2007

我制作了一个宏，它调用了我共享驱动器上保存的另一个宏。我从我问的上一个问题中给出的建议中得到了帮助。它正在处理我本地驱动器上的文件，但是一旦我从共享驱动器中的文件打开它，它就会停止工作。

宏名称是`mymacro.xla`

这些是代码：

```
Dim i As AddIn

Set i = Application.AddIns.Add("M:\nit\USER\nitin kumar\NQK\macro\run1.2.xla", True)

i.Installed = True 
```

我创建了一个按钮，其代码如下：

```
Dim CoBa As CommandBar
Dim Ctlconst As CommandBarControl
On Error Resume Next

Set CoBa = Application.CommandBars.Add(Name:="Quote Daily Report", temporary:=True)

With CoBa
    Set Ctlconst = .Controls.Add(Type:=msoControlButton)

    With Ctlconst
        .Caption = "Lexington Macro"
        .Style = msoButtonIconAndCaptionBelow
        .OnAction = "Accounts_Summary"
        .FaceId = 483
        .TooltipText = "NITIN"
    End With
    .Visible = True
    .Position = msoBarBottom
End With 
```

它不起作用任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:38:39.380

最省力的解决方案是在添加之前在本地复制 XLA。

根本原因可能是许多事情之一，锁定、只读文件夹或安全限制。最好不要弄乱它，这也会让您解决一系列潜在问题，例如：- 如果您在有人使用 xla 时更新 xla 会发生什么？

# java - 不带括号的 List 元素的字符串格式

> ID：14848815
> 
> 赞同：0
> 
> 时间：2013-02-13T07:55:06.247
> 
> 标签：java, string

考虑

```
 List<String> explanationsteps = new ArrayList<String>();
    explanationsteps.add("The prime factorization for each number is "); 
```

当我 sysout 时，字符串看起来是这样的：

```
[The prime factorization for each number is] 
```

由于 Array 类型，我想存储在本地 String 变量中，我可以在其中获得简单的输出，例如：

```
The prime factorization for each number is 
```

没有方括号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:56:07.497

这样做

```
explanationsteps.get(0).toString(); 
```

这是因为您正在使用其中`toString`方法被重载的集合来显示列表的内容。如果您将在其中包含多个字符串，那么它将是
`[sentence 1, sentence 2, sentence 3]`

如果您希望可以使用字符串数组

```
String[] explanationsteps = new String[100];  //size say 100 (as per your requirement)  
explanationsteps[0] = "your sentence"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:56:15.030

看起来您正在对 ArrayList 执行 toString()。结果，您将获得整个列表的 toString() 而不是 1 个元素。此外，如果列表中有多个元素，它们都将列在方括号内。不确定这是否是您最终想要的。

为了按原样打印字符串，请执行以下操作：

```
explanationsteps.get(0).toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:02:54.580

您可能正在使用它；

```
System.out.println(explanationsteps); 
```

但是，你必须尝试这个以获得你想要的输出；

```
System.out.println(explanationsteps.get(0)); 
```

# javascript - JS计算二维数组中相同元素的平均值

> ID：14848816
> 
> 赞同：7
> 
> 时间：2013-02-13T07:55:13.027
> 
> 标签：javascript

我有一个由两列表示为数组的“表”。第一列是从 1 到 20 的数字，它们是标签，第二列是对应的值（秒）：

```
my_array = [ [ 3,4,5,3,4,5,2 ],[ 12,14,16,11,12,10,20 ] ]; 
```

我需要每个标签的平均值（平均值）：

```
my_mean_array = [ [ 2,3,4,5 ],[ 20/1, (12+11)/2, (14+12)/2, (16+10)/2 ] ];
// edit: The mean should be a float - the notion above is just for clarification.
// Also the number 'labels' should remain as numbers/integers. 
```

我的尝试：

```
var a = my_array[0];
var b = my_array[1];
m = [];
n = [];
for( var i = 0; a.length; i++){
    m[ a[i] ] += b[i]; // accumulate the values in the corresponding place
    n[ a[i] ] += 1; // count the occurences
}
var o = [];
var p = [];
o = m / n;
p.push(n);
p.push(o); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:10:47.860

这个怎么样（原生 JS，不会在旧浏览器上中断）：

```
function arrayMean(ary) {
  var index = {}, i, label, value, result = [[],[]];

  for (i = 0; i < ary[0].length; i++) {
    label = ary[0][i];
    value = ary[1][i];
    if (!(label in index)) {
      index[label] = {sum: 0, occur: 0};
    }
    index[label].sum += value;
    index[label].occur++;
  }
  for (i in index) {
    if (index.hasOwnProperty(i)) {
      result[0].push(parseInt(i, 10));
      result[1].push(index[i].occur > 0 ? index[i].sum / index[i].occur : 0);
    }
  }
  return result;
} 
```

* * *

FWIW，如果您想花哨的话，我已经创建了其他一些方法来做到这一点。它们依赖于外部库，并且很可能比原生解决方案慢一个数量级。但是它们*看起来*更好看。

它可能看起来像这样，带有[underscore.js](http://underscorejs.org/)：

```
function arrayMeanUnderscore(ary) {
  return _.chain(ary[0])
    .zip(ary[1])
    .groupBy(function (item) { return item[0]; })
    .reduce(function(memo, items) {
      var values = _.pluck(items, 1),
          toSum = function (a, b) { return a + b; };

      memo[0].push(items[0][0]);
      memo[1].push(_(values).reduce(toSum) / values.length);
      return memo;
    }, [[], []])
    .value();
}

// --------------------------------------------

arrayMeanUnderscore([[3,4,5,3,4,5,2], [12,14,16,11,12,10,20]]);
// -> [[2,3,4,5], [20,11.5,13,13]] 
```

或者像这样，使用真正出色的[linq.js](http://linqjs.codeplex.com/)（我使用过 v2.2）：

```
function arrayMeanLinq(ary) {
  return Enumerable.From(ary[0])
    .Zip(ary[1], "[$, $$]")
    .GroupBy("$[0]")
    .Aggregate([[],[]], function (result, item) {
      result[0].push(item.Key());
      result[1].push(item.Average("$[1]"));
      return result;
    });
}

// --------------------------------------------

arrayMeanLinq([[3,4,5,3,4,5,2], [12,14,16,11,12,10,20]]);
// -> [[3,4,5,2], [11.5,13,13,20]] 
```

* * *

正如怀疑的那样，“花式”实现比原生实现慢一个数量级：[jsperf 比较](http://jsperf.com/js-calculate-mean-of-same-elements-in-2d-array)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:09:30.247

```
var temp = {}; 
my_array[0].map(function(label, i) {
  if (! temp[label])
  {
    temp[label] = [];
  }
  temp[label].push(my_array[1][i]);
});
var result = [ [], [] ];
for (var label in temp) {
  result[0].push(label);
  result[1].push(
    temp[label].reduce(function(p, v) { return p + v }) / temp[label].length
  );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:31:57.410

此函数不会像您的结果示例中那样对结果数组进行排序。如果您需要排序，请告诉我，我会添加它。

```
function getMeanArray(my_array)
{
    m = {}; //id={count,value}
    for( var i = 0; i<my_array[0].length; i++){
        if (m[my_array[0][i]]===undefined)
        { 
            m[my_array[0][i]]={count:0, value:0};
        }
        m[ my_array[0][i] ].value += my_array[1][i]; // accumulate the values in the corresponding place
        m[ my_array[0][i] ].count++; // count the occurences
    }
    var my_mean_array=[[],[]];
    for (var id in m)
    {
        my_mean_array[0].push(id);
        my_mean_array[1].push(m[id].count!=0?m[id].value/m[id].count:0);
    }
    return my_mean_array;
} 
```

# installshield - Installshield：是否可以在 MSI 升级表中使用 ProductVersion 属性？

> ID：14848819
> 
> 赞同：3
> 
> 时间：2013-02-13T07:55:20.360
> 
> 标签：installshield

InstallShield MSI 安装的典型“升级表”包含两条记录：“从任何版本到当前都是升级”和“从当前到任何是降级”。这需要在每次主要、次要或内部版本号发生更改时手动复制粘贴“当前版本”号，这不是很好。

目前我正在使用一个脚本来解析 .ism 项目文件并在构建之前替换升级表中的版本号。但这是一个肮脏的黑客。也许可以在升级表中使用“ProductVersion”MSI 属性，所以产品版本只存储**在**这个属性中？我尝试以多种方式输入此属性名称，例如`[ProductVersion]`or `##ProductVersion##`，但没有任何帮助 - 它没有被属性值替换，并且生成的 MSI 包含“##ProductVersion##”文本而不是“1.30.1264”属性值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T13:12:49.387

一个新项目应包含两条记录，旨在按照您的描述行事。但是，它们不应存储实际的产品版本，而应具有标记令牌，例如`***ALL_VERSIONS***`（抱歉，我现在不在我的 InstallShield 副本附近）。这个令牌的名字不是很好，因为真正发生的是当前 ProductVersion 在构建时替换它。

如果您已经将令牌更改为实际版本，则可以通过选择引用“我的版本”而不是实际版本的单选按钮，使用“友好”视图将其更改回。或者，您可以创建一个新项目来查看它，然后将其复制进去。令牌在所有最新版本的 InstallShield 中都可以在最小或最大字段中使用（但在某些旧版本中仅在最大字段中）。

# java - Java - 循环概念

> ID：14848820
> 
> 赞同：-5
> 
> 时间：2013-02-13T07:55:23.990
> 
> 标签：java, for-loop, string-concatenation

编写一个名为 repl 的方法，它接受一个字符串和多次重复作为参数，并返回多次连接的字符串。例如，调用`repl("hello", 3)`返回“hellohellohello”。如果重复次数为 0 或更少，则返回空字符串。

我努力了：

```
public String repl(String x,int y){
    if(y<=0){
        return null;
    }
    else{
        return x;
    }

} 
```

不知何故，我无法打印 hello 3 次。我的输出只有一次。有人能指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:16:09.367

好的，我要撤回我的`-1`投票，并会尝试解释（不解决问题），尽管它绝对与你在 java 方面的能力无关。这些都是简单的通用编程概念......如果你想*真正自学编程，你**应该*从头开始。

 *无论如何，所以你在这里：

### 试着分析你想让你的代码做什么

我的意思是，“好像”你在告诉**我**该怎么做。想想**你**会如何完成所要求的工作，这是你学习编程的唯一方法。

* * *

所以，你说你想输入`X`多少次就输入多少次（例如`Y`）。

这样做的编程方式是（让我们以两个人之间对话的形式进行）：

*   **人 A：**输入 3 次“你好”
*   **B 人：**好的。让我想想。
*   **B 人：** 1 个“你好”（我达到 3 次了吗？没有。所以，让我们继续吧）
*   **B 人：** 2 个“你好”（我达到 3 次了吗？没有。所以，让我们继续吧）
*   **B 人：** 3 个“你好”（我达到 3 次了吗？是的。好的，就是这样）

我不确定我是否有帮助，但我绝对希望如此。

* * *

**提示：**查看`for`语句和**循环**。

**旁注：**您的`if y<=0`逻辑*是*正确的，尽管它非常多余。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-13T08:05:02.840

```
public String repl(String x,int y){
    StringBuilder sb=new StringBuilder();
    for(int i=0;i<y;i++) sb.append(x);
    return sb.toString();
} 
```*

# c++ - 找到打印一切的功能？

> ID：14848822
> 
> 赞同：0
> 
> 时间：2013-02-13T07:55:33.900
> 
> 标签：c++, find

```
 if((tempTitle.find(tempTitleFind)))
                    {
                      blah blah

                    } 
```

当我有部分匹配时，所有内容都会打印出来，而不仅仅是部分匹配的那个，我这里的论点是否有误？我一遍又一遍地查看它，似乎我找不到一个。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T07:58:48.480

`std::string::find`如果未找到则返回`std::string::npos`，等于 -1。任何非 0 都等效于 boolean `true`，因此您会得到“误报”。将条件更改为：

```
if(tempTitle.find(tempTitleFind) != std::string::npos) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:02:51.817

tempTitle.find(tempTitleFind) 返回 tempTitleFind 在 tempTitle 中的位置，如果 tempTitleFind 没有出现在 tempTitle 中，则返回 std::string::npos。

要确定 tempTitleFind 是否出现在 tempTitle 中，您可以使用以下代码段：

```
if(tempTitle.find(tempTitleFind)!=std::string::npos)
{
...
} 
```

*顺便说一句：您应该在循环之前*将 titleFind 转换为小写，而不是在循环内。

# java - 向量：如何检查每个元素以查看它是否等于用户输入？

> ID：14848823
> 
> 赞同：0
> 
> 时间：2013-02-13T07:55:39.600
> 
> 标签：java

基本上这就是我所拥有的：

```
if(field1.getText().equals("")){
        label2.setForeground(Color.red);
        label2.setText("Please enter a pet type");
    }
    else if(field1.getText().equals(petList.get(z)){
        label2.setForeground(Color.red);
        label2.setText("The pet type already exists");
    }
    else{
        label2.setForeground(Color.red);
        label2.setText("Pet Type Added");
    String input = field1.getText();
    petList.add(j,input);
    j++;
    } 
```

我需要做的是检查 field1 以查看它是否等于向量 petList 中的任何元素。我怎样才能做到这一点？我已经尝试在 if 循环外部使用 for 循环，如下所示：`for(int z = 0; z < petList.size(); z++){`但它返回了一个数组索引超出范围错误。任何帮助都是极好的！我更愿意使用与我现在相同的基本结构来完成它，但如果它不能完成，那也没关系。如果有帮助，此代码位于按钮侦听器类中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:00:36.117

你看过 Vector 中的 contains 方法吗？petList.contains(field1.getText())

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:57:46.190

在不透露解决方案的情况下（因此不给您发展技能的机会）这里是一个提示！

您可以使用 for-each 循环。

[http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)

对于每次迭代，检查数组中当前位置的元素是否等于用户输入。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:02:46.783

替换这个

```
if(field1.getText().equals("")) 
```

和

```
if (contains(vect, field1.getText())) 
```

并输入以下方法：

```
private static boolean contains(Vector v, String s) {
     for (int i = 0; i < v.size(); ++i) {
         if (s.equals((String) v.elementAt(i))) {
            return true;
         }
     }
     return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T08:02:59.420

如果我的猜测是正确的，那么您将在行中获取数组索引超出范围错误 `petList.add(j,input);`而不是指定索引，为什么不在 for 循环之后添加此输入使用`petList.add(input);`

# openmp - openAcc : openMP 中是否有任何与 THREADPRIVATE 对应的指令

> ID：14848826
> 
> 赞同：0
> 
> 时间：2013-02-13T07:55:57.243
> 
> 标签：openmp, openacc

我正在尝试将openMp程序转换为openAcc程序。我遇到了threadprivate指令。如果openAcc中没有这样的指令，我需要知道openAcc中是否有这样的指令，如何处理这种情况..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:45:40.663

我的理解是，“private”和“threadprivate”的不同之处在于“threadprivate”允许每个线程拥有一个本地副本，该副本通过执行多个并行区域对线程持久。

使用 OpenACC 1.0，还没有办法确保这一点。

我的2美分...

# php - 直播视频文件

> ID：14848830
> 
> 赞同：3
> 
> 时间：2013-02-13T07:56:07.270
> 
> 标签：php, video-streaming

我必须在网站上创建剧院效果，以便需要流式传输视频，以便网站的所有用户都可以同时看到它。

我检查了 Ustream、Livstream 等，但它们允许我的网络摄像头在线流式传输。
我需要的功能类似于我们在网上看到的板球/足球比赛，所有用户都看到相同的剪辑。唯一的区别是我已经有一个需要流式传输的视频。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:26:52.627

使用 PHP 无法做到这一点，因为您无法在 PHP 脚本中处理多个 HTTP 请求。但是，您可以使用 node.js 轻松完成。您可以先将每个用户的 HTTP 请求和时间存储在一个数组中，然后找出第一个观看视频的用户。计算视频的经过时间并对视频进行切片。最后将视频发送回当前客户端。

**另一种解决方案（如果您决定使用 node.js）**

使用`setTimeout`当第一个用户请求视频时，在服务器端模拟视频的播放。然后当其他用户请求视频时，您将其切片并将其发送给客户端。因为是在服务器端模拟播放，所以不需要计算视频的播放时间。

使用 FFMpeg 可以轻松完成视频的切片。

# ruby-on-rails - 如何使用 Sorcery 将我的 Rails 应用程序暴露给外部源进行身份验证？

> ID：14848834
> 
> 赞同：0
> 
> 时间：2013-02-13T07:56:12.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, google-chrome-extension, sorcery

我有一个 Rails 应用程序，它使用 Sorcery gem 存储我的用户信息和数据，我想要一个我正在开发的 chrome 扩展程序，使用我的 rails 应用程序进行身份验证。

我似乎在 Sorcery 中找不到任何对 API 的引用，它允许我使用来自外部源的用户数据库进行身份验证。

如何将我的巫术驱动的 Rails 应用程序公开为 oauth 服务器，以便我可以存储一个密钥，当我对我的 api 进行 AJAX 时，我可以将它附加到我的 javascript 应用程序。

是否可以这样做，和/或跨站点身份验证的最佳做法是什么？比如我应该如何存储经过身份验证的用户信息等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:22:08.847

我不知道巫术是否支持令牌认证。

[设计](https://github.com/plataformatec/devise)确实如此，而且非常简单：

[https://github.com/plataformatec/devise/wiki/How-To:-Simple-Token-Authentication-Example](https://github.com/plataformatec/devise/wiki/How-To:-Simple-Token-Authentication-Example)

# winforms - 在 Windows 窗体之间保存值

> ID：14848845
> 
> 赞同：0
> 
> 时间：2013-02-13T07:56:33.337
> 
> 标签：winforms, c#-4.0

我在表单之间滚动时遇到了关于保存值的问题。我有两个 Windows 窗体。其中一个是 Main，另一个是 NewUser

当我在 Main 并单击**更改用户**按钮时：

```
NewUser yk = new NewUser();
        yk.ShowDialog(); 
```

当 NewUser 表单加载时：

```
private void NewUser_Load(object sender, EventArgs e)
    {
        if (impersonatedUser == null) 
        {
            txtNewUserName.Select();
            return;
        }

        btnRevert.Enabled = true; //user may revert back to the old user
        btnLogon.Enabled = false;
        txtNewUserName.Enabled = false;
        txtPassword.Enabled = false;
        btnRevert.Select();            
    } 
```

还原：

```
private void btnRevert_Click(object sender, EventArgs e)
    {
        // revert to previous user
        impersonatedUser.Undo();
        btnRevert.Enabled = false;
        btnLogon.Enabled = true;            
    } 
```

模拟用户后，我可以恢复为用户，但如果我关闭表单，然后单击 Main 中的更改用户按钮以恢复用户，我希望在此会话中已经模拟，因此 impersonatedUser 不为 null 并且 btnRevert.enabled = true; 但一切都始于创建一个新形式。因此我无法恢复如果我不想在 NewForm 中丢失变量我该怎么办？我应该使用**this.Visible = false**而不是**this.Close()**等吗？顺便说一句，我在模仿方面没有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:12:50.337

您的主要形式的代码

```
NewUser yk = newUser()
yk.ShowDialog() 
```

将始终创建一个新的`NewUser`形式对象。因此，如果您的对象`impersonatedUser`在类中声明，`NewUser`它将再次被初始化为新对象。

如果，我猜，对于你来说足以保存 object 的内存信息`impersonatedUser`，那么你可以创建一个`impersonatedUser`in `Main`form 的对象并将其传递给`NewUser`form。

以您的`Main`形式：

```
Private YourClassOfUser impersonatedUser; 
```

以你的`NewUser`形式：

```
Private YourClassOfUser impersonatedUser;
//Then create a custom constructor with parameter
Public void NewUser(YourClassOfUser inImpersonatedUser)
{
    this.impersonatedUser = inImpersonatedUser;
} 
```

然后在表单中用这个构造函数`Main`打开一个表单`NewUser`

```
NewUser yk = newUser(this.impersonatedUser);
yk.ShowDialog(); 
```

如果您可以显示一些有关如何以表单形式初始化`impersonatedUser`对象的代码，`NewUser`那么答案可能很少

# codeigniter - 为什么在 codeigniter 中链接两个页面时出现 404 错误或奇怪的 url？

> ID：14848856
> 
> 赞同：0
> 
> 时间：2013-02-13T07:57:20.720
> 
> 标签：codeigniter, view, hyperlink, controller

我正在尝试在 codeigniter 中链接两个页面（主页和关于页面）。但是当我点击关于页面链接时

```
<a href="aboutpage">Click here for the About page</a> 
```

显示 404 错误

当我将链接更改为

```
<a href="site/aboutpage">Click here for the About page</a> 
```

站点是控制器 - 当我单击关于页面中的主页链接时会生成一个奇怪的 url

```
http://www.mywebsite.com/site/site/site/site/site/homepage 
```

每次单击主页链接或关于页面链接时都会添加一个站点

以下是我的**控制器 site.php**：-

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); 
```

类站点扩展 CI_Controller {

```
public function index()
{
    $this->homepage();
}

public function homepage()
{
    $this->load->view('view_home');
}

public function aboutpage()
{
    $this->load->view('view_about');
} 
```

}

这是我的**view_home.php**

```
<div id="container">
<h1>Welcome to homepage</h1>

<div id="body">

    <p>This is Homepage</p>
    <br />

    <a href="aboutpage">Click here for the About page</a>
</div>

<p class="footer">Page rendered in <strong>{elapsed_time}</strong> seconds</p> 
```

这是我的**view_about.php**

```
<div id="container">
<h1>Welcome to About Page</h1>

<div id="body">

    <p>This is About Page</p>
    <br />

    <a href="homepage">Click here for the Homepage</a>
</div>

<p class="footer">Page rendered in <strong>{elapsed_time}</strong> seconds</p> 
```

我什至试图查看我的 .htaccess 文件是否有问题。但一切似乎都很好

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
# If we don't have mod_rewrite installed, all 404's
# can be sent to index.php, and everything works as normal.
# Submitted by: ElliotHaughin

ErrorDocument 404 /index.php
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:01:51.373

```
 <a href="<?php echo base_url();?>site/aboutpage" id="lnk_aboutus">About&nbsp;Us</a> 
```

开始使用 base_url 以确保形成的 url 是好的。

并确保你在 application/config/config.php 中设置你的 base_url 像这样

```
 $config['base_url'] = "http://".$_SERVER['HTTP_HOST']."/mysitename/"; 
```

# java - 如何在android中将离线字典与pdf阅读器集成

> ID：14848857
> 
> 赞同：0
> 
> 时间：2013-02-13T07:57:24.900
> 
> 标签：java, android, android-layout, dictionary, pdf-reader

我开始开发自己的支持字典的应用程序 pdf 阅读器，但我找不到将离线字典与 pdf 阅读器集成的有用方法。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-15T14:41:48.547

根据我们在评论中讨论的内容，这是一个可能的解决方案：

最困难的应该是pdf阅读器的实现。正如您告诉我的那样，您已经找到了一个适用于 android 的开放访问 pdf 阅读器，所以没问题。

为了使用您现有的 pdf 阅读器实现离线词典，我建议您这样做：

**1.** 修改您的pdf阅读器以捕捉单词点击（或长按）。你必须小心，因为我不知道你是如何实现 pdf 滚动的。因此，系统应该能够区分用户是否正在尝试滚动、缩放 pdf 或单击单词以查看定义。

**2.** 一旦你抓住了这个词点击，你将不得不使用点击的词并在你的离线词典中搜索。为此，创建一个 SQLite 数据库：请参阅：http: [//developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)并搜索点击的单词。

**3.** 一旦获得结果，您可以在对话框或其他视图中显示您的结果，如果您实现了此功能，甚至可以在您的pdf阅读器中显示您的结果。

# encoding - 删除空白行并对所有编码的文件进行排序（不区分大小写）的批处理文件

> ID：14848860
> 
> 赞同：0
> 
> 时间：2013-02-13T07:57:26.677
> 
> 标签：encoding, batch-file

我想制作一个批处理文件，删除所有空白行并将文件中的行排序为常规的不区分大小写的排序。

到目前为止，我得到了这个：

```
@echo off
IF [%1]==[] goto BAR_PAR

IF EXIST %1 (
    egrep -v "^[[:space:]]*$" %1 | sort > xxx
    mv -f xxx %1

) else (
    echo File doesn't exist
)
goto END

:BAR_PAR
echo No Parameter Passed

:END 
```

但这搞砸了我的编码 UCS-2 Little Endian 的文件。

有没有办法盲目处理所有编码？如果不是，我应该怎么做才能使这个 UCS-2 Little Endian 兼容？

**更新** 忘了提到我使用的是 Windows，但使用的是 Cygwin，所以我有通用的 linux shell 命令，如 grep、sed 等......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:38:20.820

Cygwin`sort -f`将通过将所有字符转换为大写来对文件进行不区分大小写的排序。

Cygwin`iconv`从一个字符集转换为另一个字符集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T15:18:23.660

```
grep -e '[[:graph:]]' foo.txt | sort -f 
```

简而言之，该命令查找任何至少有一个可见字符的行。因此，排除只有空格和制表符的行。

出于某种原因，我正在使用的文件没有响应我能想到的使用 '^' 和 '$' 的任何组合。

# linq - Linq 在列表中设置属性？

> ID：14848861
> 
> 赞同：1
> 
> 时间：2013-02-13T07:57:27.877
> 
> 标签：linq

模型

```
class MeterReadingTypes 
{
    int id { get; set;}
    bool isSelected { get; set; }
    string Name { get; set; } 
    .....
} 
```

林克

```
entity.MeterReadingTypes; 
```

有些记录具有真值或假值，我只想将一个值设置为真，其他值为假。

原始清单

```
id | isSelected | Name |
------------------------
 1 |      false |    A |
 2 |      false |    B |
 3 |       true |    C |
 3 |       true |    D |
 5 |      false |    E |
 6 |      false |    F |
 7 |       true |    G | 
```

我想将此列表设置为以下内容：

```
id | isSelected | .. |
-----------------
 1 |      false |    A |
 2 |      false |    B |
 3 |       true |    C |
 4 |      false |    D |
 5 |      false |    E |
 6 |      false |    F |
 7 |      false |    G | 
```

我可以这样做吗，我只想设置一个属性`true`？

**编辑**

我的解决方案

```
List<OsosPlus2.Core.DataAccess.MeterReadingTypes> types = new List<Core.DataAccess.MeterReadingTypes>();

foreach (var unselectedTypes in entity.MeterReadingTypes)
{
    if(unselectedTypes.Name == "C") unselectedTypes.IsSelected = true;
    unselectedTypes.IsSelected = false;
    types.Add(unselectedTypes);
}

return PartialView(types); 
```

有什么优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:01:46.070

LINQ 中的“Q”代表查询。查询不会更新任何内容，因此 LINQ 不是更新对象的正确方法。最简单和最简洁的解决方案是：

```
foreach(var type in entity.MeterReadingTypes)
    type.IsSelected = type.MeterType == typeId; 
```

如果你坚持使用一些 LINQ，你可以这样做：

```
foreach(var unselectedType in entity.MeterReadingTypes
                                    .Where(x => x.MeterType != typeId))
{
    unselectedType.IsSelected = false;
}

foreach(var selectedType in entity.MeterReadingTypes
                                  .Where(x => x.MeterType == typeId))
{
    selectedType.IsSelected = true;
} 
```

如您所见，它使代码更长。

另一种方法是：

```
entity.MeterReadingTypes.Select(x => { x.IsSelected = types.MeterType == typeId;
                                       return x; }); 
```

同样，简单`foreach`版本没有优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:47:06.670

您的解决方案会将所有项目设置为未选中，因为`unselectedTypes.IsSelected = false;`最后出现。你可以这样做：

```
foreach (var unselectedType in entity.MeterReadingTypes)
{
    unselectedType.IsSelected = (unselectedType.Name == "C");
} 
```

# scala - Scala中的符号“那个”是什么意思

> ID：14848863
> 
> 赞同：6
> 
> 时间：2013-02-13T07:57:32.140
> 
> 标签：scala, generics

我已经看到了几个使用泛型符号“That”的代码示例。IE

```
def map[B, That](f : (A) => B) : That 
```

但是，由于该词缺乏谷歌能力，我找不到任何关于它的作用或如何使用它的文档。

它只是一个普通类型的占位符，还是做了一些特别的事情？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T08:02:21.823

内部的任何标识符`[...]`都被视为类型参数。

因此，`def map[B, That](f : (A) => B) : That` `That`仅表示泛型返回类型。将其替换`Z`为例如：`def map[B, Z](f : (A) => B) : Z`将具有完全相同的效果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T08:14:37.637

翻译成Java，那将是：

```
public <B, That> That map(f: Function1<A, B>) 
```

或者，换句话说，`That`是一个泛型（或者，在 Scala 术语中，一个类型参数）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T12:14:22.763

正如您所说，它是一个“占位符”（即类型参数）；集合库中的约定`That`用于表示将要创建的集合的类型。（因此，您从 转换`this`为`That`。）

# batch-file - 如何从cmd批处理文件中的变量获取目录路径

> ID：14848870
> 
> 赞同：3
> 
> 时间：2013-02-13T07:57:55.283
> 
> 标签：batch-file, cmd, filepath

在我的批处理文件中，我有一个包含文件路径的变量：

```
SET VAR1=C:\Folder1\Folder2\File.txt 
```

我想提取目录结构并检索：

```
C:\Folder1\Folder2\ 
```

我已经阅读过这样的线程[，](https://stackoverflow.com/questions/7527529/how-to-get-a-part-of-the-directory-path-in-a-batch-file)我需要`%~dp0`在`0`我认为作为参数传递的地方使用。我已经尝试过`%~dpVAR1`，但这不起作用。如何获得我正在寻找的输出，但变量包含文件路径？

另外，为了让事情变得困难，我必须在一个`IF`条件下执行所有这些，这意味着一旦声明了变量，我需要用`!`而不是`%`（我已经`setlocal enableextensions enabledelayedexpansion`在脚本开头声明以允许这个）。

任何帮助深表感谢！

谢谢！

安德鲁

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T12:22:09.833

您正在尝试在环境变量上使用参数扩展语法 - 这不起作用。但是做你想做的事情相对容易。

使用 CALL（相对较慢）：

```
(...
  call :getPath "!var!" var
  ...
)
exit /b

:getPath
set "%2=%~dp1"
exit /b 
```

使用 FOR，假设变量不包含任何通配符（快速）

```
(...
  for %%F in ("!var!") do set "var=%%~dpF"
 ...
) 
```

使用 FOR，如果变量可能包含通配符（也很快）

```
(...
  for /f "delims=" %%F in ("!var!") do set "var=%%~dpF"
 ...
) 
```

注 1：如果变量不包含完整路径，则所有解决方案都会尝试将名称解析为绝对路径，并返回完整的绝对路径。例如，如果 var contains `foobar\test.txt`，则解决方案将包含当前目录的完整路径，即使未找到该文件也是如此。类似的东西`c:\pathToCurrentDirectory\foobar\`。

注意 2：上述所有解决方案都将从路径中删除所有引号。

注意 3：路径可能包含`!`字符，这会在扩展时`%~dp1`或`%%~dpF`因为您启用了延迟扩展而导致问题。延迟扩展将破坏两者`^`，`!`如果值包含`!`. 有一个解决方案涉及同时保护`!`和`^`。这是应用于上述最后一个解决方案的演示。保护需要正常扩展，并且由于您在代码块内，因此至少需要一个 CALL。它可以在没有子程序的情况下完成，但使用子程序更容易。该子例程假定变量名为`var`。

```
(...
  call :getPath
 ...
)
exit /b

:getPath
set "var=!var:"=!"
set "var=!var:^=^^^^!"
set "var=%var:!=^^^!%" !
for /f "delims=" %%F in ("!var!") do set "var=%%~dpF" !
exit /b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T08:32:56.290

我确实（再次）相信许多问题都在同一个主题上（字符串约束或拆分字符串）。

我不会给你整个代码，而是给你一个模板并解释为什么`%~dpVAR!`不起作用。

首先，为什么`%~dpVAR!`没有工作。

在我进入修饰符之前，让我们讨论一下参数。您可能知道批处理文件可以相互解析参数。可以通过在数字 0-9 前使用单个百分号 (%) 来调用这些参数。据我所知（有人可能已经为解析更多参数提供了一种方法），只能解析 9 个参数。您可能认为这是错误的（有 10 个参数对吗？）。参数 1-9 解析为批处理文件（或函数名），%0 为批处理文件的文件路径（或函数名）。如果你看，`%~dp0`与 %0 有一些（不是真的）相似之处。这将在下面讨论。

其次，这个词`%~dp0`有修饰语。修饰符是修改变量（仅在参数和`for`循环中声明的情况下，您知道带有双百分号的变量，如 %%i）和参数的东西。修饰符`d`仅将参数扩展为驱动器号，而仅`p`将参数扩展为路径。您可能认为这些会自相矛盾，但可以组合参数来创建极其古怪的格式。

因此，如您所见，您尝试用变量名替换 0 失败，因为它没有为这类事情指定。

现在，进入模板。

您可以像这样约束变量（并将它们放入其他变量中）： `set variable=!variable:~offset,amount!`

如果这看起来令人困惑，请不要担心，我将解释这些组件。

首先，请注意没有`/a`开关。这是因为这不是一个数学函数（不知道我为什么要添加这个）。所以，在我解释之前，这里有一个例子，说明它会对`numbers`具有 . 值的变量名做什么`0123456789`。

```
set numbers=!numbers:~5,1! 
```

通过使用那行代码，`numbers`现在等于`5`. 这是因为它正在使用原始值的较小版本重新创建变量（这很难解释）。如您所见，上面的模板中有一个`5`where `offset`was。这是因为它跳过了前 5 个字符并将变量设置为下一个`amount`或`1`字符（我真的希望你能得到这个）。

所以基本上，它将一个变量设置为一个不同（或相同）变量的较短值，该变量由偏移量和包含在其中的字符数量决定。

我真的希望这会有所帮助，因为我可能一个字都听不懂。

有人可以将这个可怜的家伙重定向到一个更好地解释这个的链接（我试过了，好的！）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-19T06:59:45.973

从变量中提取路径的完整示例：

```
@echo off
set /p Fullpath="Specify full path: "
call :getPath %Fullpath% filename folder
echo %filename%
echo %folder%
pause
exit /b

:getPath
set "%2=%~nx1"
set "%3=%~dp1"
exit /b 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-04-18T00:24:46.787

这会起作用吗：

```
SET VAR1=C:\Folder1\Folder2\File.txt
echo %var1% 
```

其中 Echo 是您的 exe 的名称。

%CD% 也可以工作：Echo %CD%

# eclipse - Eclipse 中的错误 --- java.lang.RuntimeException：无法启动 Selenium 会话：null

> ID：14848871
> 
> 赞同：0
> 
> 时间：2013-02-13T07:57:57.033
> 
> 标签：eclipse, selenium

使用*jdk 7 selenium-server-standalone-2.25.0.jar eclipse java indigosr1win32。*

当我通过 cmd 运行我的服务器时：

`java - jar selenium-server-standalone-2.25.0.jar 4444`

服务器在显示一些消息后自行停止，并得到下一个提示：

`server not working properly`.

当我运行我的程序时，我在 eclipse 中遇到了一个错误：

`java.lang.RuntimeException: Could not start Selenium session: null`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:23:53.790

不要指定端口号 4444 ...Selenium 服务器默认将在端口 4444 上运行。写在 CMD java - jar selenium-server-standalone-2.25.0.jar

如果你想给端口号...指定为 java - jar selenium-server-standalone-2.25.0.jar -port 4445

# nginx - ubuntu 12.04 上 rhodecode 和 redmine 的 nginx 配置

> ID：14848873
> 
> 赞同：1
> 
> 时间：2013-02-13T07:57:58.330
> 
> 标签：nginx, redmine, rhodecode

我正在尝试使用以下配置在 ubuntu 上设置 rhodecode + redmine

```
http://my_ip/redmine 
```

和

```
http://my_ip/rhodecode 
```

我使用 nginx 作为 web 服务器，redmine 在 localhost:3000 上运行，rhodecode 在 localhost:5000 上运行，不知何故我错过了配置 nginx.conf 的要点

我能够分别重定向端口 3000 上的 redmine（使用 webrick 测试时）和端口 5000 上的 rhodecode，但无法将它们设置为

```
http://my_ip/redmine 
```

和

```
http://my_ip/rhodecode 
```

以下是我的 nginx.conf 文件

```
worker_processes  1;   
events {
    worker_connections  1024;
}

http {
    passenger_root /usr/local/rvm/gems/ruby-1.9.3-p374/gems/passenger-3.0.19;
    passenger_ruby /usr/local/rvm/wrappers/ruby-1.9.3-p374/ruby;
upstream rhodecode {
        server  127.0.0.1:5000;
    }
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;

    server {
        listen       80;
        server_name  localhost;
    root /var/data/redmine/public;
    passenger_enabled on;
    client_max_body_size      25m; # Max attachemnt size
  location /rhodecode/ {
  try_files   $uri    @rhodecode;
  proxy_pass http://127.0.0.1:5000;

  }
 location /rhodecode {
            proxy_pass  http://127.0.0.1:5000;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:16:59.063

制作子域`redmine.yousite.com`和`rhodecode.yoursite.com`. 它也更漂亮、更敏捷——您可以轻松地将其中一个应用程序移动到另一台服务器。

# algorithm - 遗传算法和动态规划之间解决经典0-1背包的最佳方法是什么？

> ID：14848874
> 
> 赞同：6
> 
> 时间：2013-02-13T07:58:05.900
> 
> 标签：algorithm, dynamic, genetic, knapsack-problem

假设我有这样的问题：

*   背包容量=2000万
*   项目数 = 500
*   每个项目的重量是100到2000万之间的随机数
*   每个项目的利润是1到10之间的随机数

那么哪个是解决我的问题的最佳方法？遗传算法还是动态规划？

请给我一个简单的解释，因为我是这方面的新手..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T08:34:08.053

**动态规划（DP）：**

*   精确算法 - 找到全局最优解
*   运行时间长
*   占用大量内存
*   实现起来非常简单

**遗传算法（GA）：**

*   估计 - 不一定找到全局最优解
*   运行时间短
*   内存使用量取决于个人数量，但通常是可管理的
*   解决方案的质量取决于选择有效的表示+让它运行足够长的时间
*   实施起来相当简单，设计决策可能会稍微复杂一些，特别是如果您没有丰富的 GA 经验

**爬山：**

*   估计 - 不一定找到全局最优解。[比 GA 更容易在局部最优](http://en.wikipedia.org/wiki/Local_optimum)处停止，尽管有一些方法可以减少这种情况发生的机会
*   运行时间短
*   非常低的内存使用率
*   实现起来非常简单

DP（或任何用于 NP 完全问题的精确算法）通常仅适用于相当小的问题，或者如果找到全局最优是最重要的事情。

DP有两种方法：（有一个相当简单的优化，你只存储2行，我的内存使用分析假设使用了这个优化）

*   有一个项目 x 权重矩阵，单元格值是最大值

    > 矩阵大小 = 500 x 20 000 000
    > 
    > 运行时间 = O(500 * 20 000 000) = O(10 000 000 000)
    > 
    > 内存 = 最大值 10 * 500 -> 5 000 -> 短 = 2 字节 -> 2 * 20 000 000 * 2 = 80 000 000 < 80 MB
    > 
    > **说明： 下面的 A[i,j] 表示可从权重小于或等于**j的元素 1 到 i 的任何子集获得的最佳（最高）值。下面的更新规则意味着 - 在不包括当前元素（因此重量和值保持不变）或包括它之间找到最佳值（因此查找（当前重量减去当前项目的重量）的最佳值并添加当前项目的值给它）。然后只返回 A[500, 20000000]，它表示可从所有元素的任何子集中获得的最大值，其最大重量为背包大小。
    > 
    > 算法：

    ```
    A[0, 0..20000000] = 0
    for i = 1:500
    for x = 0:20000000
      A[i, x] = max(A[i-1, x], value(i) + A[i-1, x-weight(i)])
    // ignore value(i) + A[i-1, x-weight(i)] when weight(i) > x
    return A[500, 20000000] 
    ```

*   有一个项目 x 值矩阵，单元格值是最小权重

    > 矩阵大小 = 500 x 10*500
    > 
    > 运行时间 = O(500 * 10*500) = O(2 500 000)
    > 
    > 内存 = 最大值 20 000 000 -> int = 4 字节 -> 2 * 500 * 4 = 4 000 < 4 KB
    > 
    > 解释：下面的 A[i,j] 表示从元素 1 到 i 的任何子集可获得的最低权重，其值**等于**j。下面的更新规则意味着 - 在不包括当前元素（因此重量和值保持不变）或包括它（因此查找最佳值（当前值减去当前项目的值）之间找到最佳值并添加当前项目的重量）。任何单元格的值都是生成该值的子集的**确切**权重，因此我们需要查看所有单元格 A[500, x]，它表示任何值 x 的元素的最小权重子集。
    > 
    > 算法：

    ```
    A[0, 0] = 0
    A[0, 1..5000] = ∞
    for i = 1:500
    for x = 0:5000
      A[i, x] = min(A[i-1, x], weight(i) + A[i-1, x-value(i)])
    // interpret A[i-1, x-value(i)] as 0 when value(i) > x
    return largest x that A[500, x] <= 20000000 
    ```

所以，是的，复杂性几乎不言自明，第一种方式您将等待几个小时，但第二种方式只需几秒钟，并且内存使用量也有类似的差异（尽管 80 MB 仍然几乎可以忽略不计）（注意这与规则*相差甚远*，每个案例都需要单独分析）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T14:16:14.723

动态编程可以在时间`O(numItems * knapsackCapacity)`和`O(knapsackCapacity)`内存中运行。这意味着，对于您的规格，您将拥有：

*   关于`20.000.000 x 500 = 10.000.000.000`操作 - 可能会在几个小时内完成执行，具体取决于您的机器；
*   由于一件商品的利润最多为 10，而您最多可以拥有 500 件商品，这意味着您的最大理论利润不能超过`10 x 500 = 5000`. 这可以用 2 个字节（一个短字节）表示。所以你还需要`2 x 20.000.000 / 1024 / 1024 ~= 38 MB`内存来存储你的 DP 数组。再说一次，没那么多。

其他人已经提到了每个的优点和缺点。GA 会更快完成，但 DP 解决方案也应该在几个小时内完成，它会给你一个准确的答案。

就个人而言，如果等待几个小时解决问题不是问题，我会选择 DP。

**注意：**这是使用`O(knapsackCapacity)`内存运行的 DP：

```
dp[i] = maximum profit obtainable for weight i
for i = 1 to numItems do
  for j = knapsackCapacity down to items[i].weight do
    dp[j] = max(dp[j], dp[j - items[i].weight] + items[i].profit) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T08:31:36.307

没有“最好”的方法，每种方法都有其优点和缺点。
在这种情况下，权衡是在找到的解决方案的最优性之间 - GA 不以任何方式保证找到最佳解决方案。
计算解决方案所需的时间/空间 - 使用动态编程将为您节省一些冗余计算，但您仍然必须至少计算一次所有可能的组合才能找到最佳解决方案（甚至可能是任何解决方案）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T08:37:27.750

首先，您需要将动态规划视为一种精确算法，它可以保证答案将是最佳答案。另一方面，GA 是一种启发式算法，通常会收敛到局部最优值。背包有一个动态规划解决方案，如果它们是整数，则它是伪线性的 (O(capacity*number_of_items))。在您的情况下，您需要大约 1e10 的操作和内存。这对于单台计算机是可行的。因此，如果找到最佳答案对您很重要并且您有足够的时间（大约几个小时），您可以使用动态编程方法。否则，您可能更喜欢使用启发式算法，例如 GA。

# java - 调用Restful Webservice时Uri不是绝对异常

> ID：14848877
> 
> 赞同：22
> 
> 时间：2013-02-13T07:58:12.647
> 
> 标签：java, web-services, http, servlets, cas

下面的代码片段用于使用 RESTful API 调用我的 Web 服务。

```
ClientConfig config = new DefaultClientConfig();
    Client client = Client.create(config);
    String uri= "https://127.0.0.1:8443/cas-server-webapp-3.5.0/login";
    WebResource resource = client.resource(URLEncoder.encode(uri));
      MultivaluedMap<String, String> queryParams = new MultivaluedMapImpl();
       queryParams.add("username", "suresh");
       queryParams.add("password", "suresh");
       resource.queryParams(queryParams); 
       ClientResponse response = resource.type(
            "application/x-www-form-urlencoded").get(ClientResponse.class);
    String en = response.getEntity(String.class);
    System.out.println(en); 
```

并在运行上述代码时出现此异常

```
com.sun.jersey.api.client.ClientHandlerException: java.lang.IllegalArgumentException: URI is not absolute

    at com.sun.jersey.client.urlconnection.URLConnectionClientHandler.handle(URLConnectionClientHandler.java:151)
    at com.sun.jersey.api.client.Client.handle(Client.java:648)
    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:680) 
```

我用谷歌搜索了很多文章，并没有找到我做错的地方。

旁注：`cas-server-webapp-3.5.0` 在我的机器上部署了 Apache tomacat7 的战争

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T08:51:47.650

绝对 URI 指定方案；一个非绝对的 URI 被称为是相对的。

[http://docs.oracle.com/javase/8/docs/api/java/net/URI.html](http://docs.oracle.com/javase/8/docs/api/java/net/URI.html)

那么，也许您的 URLEncoder 没有按照您的预期工作（https 位）？

```
 URLEncoder.encode(uri) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-13T09:42:19.103

问题可能是您在已经是 URI 的东西上调用 URLEncoder.encode()。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-01-15T13:25:27.447

对于遇到此错误且与 OP 问题不是 100% 相关的其他人，请检查您是否传递了该值，并且在 spring-boot:@Value 注释的情况下它不为空。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-06T12:25:47.903

也许问题只在您的 IDE 编码设置中。尝试在任何地方设置 UTF-8：

[![在此处输入图像描述](../Images/127abdf2b79198133abcbad04572e8b3.png)](https://i.stack.imgur.com/sJg19.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-20T15:01:37.330

在 API 密钥授权场景中...

从第一个 REST 调用获得 AUTH_TOKEN 和 ENDPOINT_URL 后，您可能正在执行第二个 REST 调用。

检查“<ENDPOINT_URL> + <API_METHOD_URI>”的串联，您可能只发送 API_METHOD_URI。

这发生在我使用 Streamsets 集成平台尝试连接到 Oracle 的 Responsys API 时。

# php - 有没有办法用 xdebug 只记录比 X 慢的执行？

> ID：14848879
> 
> 赞同：5
> 
> 时间：2013-02-13T07:58:30.610
> 
> 标签：php, performance, debugging, xdebug, php-extension

我希望 xdebug 仅跟踪超过 X 毫秒或超过 Y KB RAM 的“跳转”，例如，每次执行时间超过 100 毫秒或内存使用量增加超过 100 KB。这将使我忽略数千条我不需要查看的跟踪行，并使优化变得更加容易 - 因为在 ZF2 中，臃肿的框架需要 1 秒才能从我们的企业项目中的 composer 自动加载器开始，结果在数千行中我真的没有用。沿着这条线的某个地方，我确实发现执行时间的跳跃更大，但不是在长时间滚动之后。

是否有默认选项来禁用“比 X 更快”执行的日志记录，或者如果没有，您是否知道可以将较慢的执行 grep 排除在外的辅助 shell/python 脚本？

为了澄清起见，我说的是通过在我的应用程序中运行 xdebug_start_trace() 获得的 .xt 文件的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:14:16.627

我对这些选项一无所知，但我可能建议使用配置文件而不是跟踪。

[这](http://blog.teamlazerbeez.com/2010/05/04/xdebug-quickstart-profiling-in-php/)是一篇如何使用它的文章。如果简短，请将这些行放在您的 php.ini 文件中：

```
xdebug.profiler_enable = 0
xdebug.profiler_enable_trigger = 1
xdebug.profiler_output_dir="c:\Projects" 
```

当你想启动分析器时，使用查询参数运行 url`?XDEBUG_PROFILE=1`

这将生成一个名为 like 的文件`cachegrind.out.*`并将其放入`profiler_output_dir`.

可以使用您操作系统的 CacheGrind 查看器查看该文件。上面的链接有一个应用程序列表，用于查看不同平台的这些文件。我正在使用 wincachegrind（用于 Windows）来分析 ZendFramework 应用程序。对我来说非常有用的工具。界面允许查看调用树、执行时间、调用次数等。好吧，但我看不到用它来测量内存使用情况的选项。

# php - 使用 php 和/javascript 监听网站上的事件

> ID：14848883
> 
> 赞同：2
> 
> 时间：2013-02-13T07:58:38.427
> 
> 标签：php, javascript, listener

我正在寻找这种情况是否可能 -

1.  我的网站托管了几个 mp3 文件。URL 看起来像 www.abc.com/.mp3 。
2.  假设我收到来自 iOS/android 用户的传入请求，使用他的浏览器访问我上面的 mp3 链接

我的问题是，我可以收听事件（我的网站 mp3 被访问的事件），然后发送另一个 mp3 给用户吗？

我正在考虑使用 PHP 和 javascript 来执行此操作。请指导我执行此操作的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T10:47:00.093

如果您想按照问题中所述使用 php 或 javascript，我可以为您在客户端（javascript）或服务器端（php）想象两种解决方案：

*   在客户端，使用 javascript，您可以将对 mp3 的调用包装在 javascript 函数中（可能通过 ajax）。此功能将检查浏览器并根据它获得正确的 mp3

*   在服务器端，使用 php，您可以将 mp3 查询包装在 PHP 脚本中，例如 getmp3.php?file=xxx.mp3。您的客户端页面不会直接获取 mp3，而是向这个 php 脚本询问。此脚本将检查用户代理并发送 mp3，内容如下：

    ```
    // Get the asked mp3
    $askedfile = _GET['file'];

    // Get browser info 
    $browser = get_browser(null);

    // Put filename to the proper mp3 file depending on the browser
    $filename = ...;

    // Put the proper content/type :
    header('Content-Type: audio/mp3');
    header('Content-Disposition: attachment; filename="$askedfile"');
    header('Content-Length: '.filesize($file));

    // Send the mp3
    readfile($filename); 
    ```

# macos - Mac OSX 默认提供哪些不同的脚本和编程语言？

> ID：14848900
> 
> 赞同：-1
> 
> 时间：2013-02-13T08:00:02.970
> 
> 标签：macos, scripting, programming-languages

这是为了知识和兴趣。我的一位同事从 Python 开始，想知道她可以用什么来在她的 Mac 上安装解释器。我告诉她，她不用担心，Mac OSX 已经默认有一个。我还向她提到了 php 也可以在 Mac 上使用。那种触发了我，我去检查 Perl 是否默认在 Mac OSX 上也可用。它是：O

Mac OSX 默认附带更多的编程语言和脚本语言吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:02:45.127

Ruby 和一些 shell（bash、tcsh、ksh、zsh）。

# ios - 是否可以使用分发配置文件安装 .ipa

> ID：14848905
> 
> 赞同：0
> 
> 时间：2013-02-13T08:00:31.413
> 
> 标签：ios, app-store

我已经生成了 .ipa 文件，其中包含从客户的开发人员帐户创建的分发配置文件。当我尝试在设备中安装 .ipa 文件时。我没有得到有效的配置文件。是否可以使用分发配置文件安装 .ipa？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:10:14.053

通过选择要安装的设备来创建**ADHOC** **分发配置文件。见下图**

![在此处输入图像描述](../Images/8573feec002bd79afdb6b28d4ba2bcb8.png)

# php - foreach 循环中 current() 的意外行为

> ID：14848910
> 
> 赞同：45
> 
> 时间：2013-02-13T08:00:49.133
> 
> 标签：php, arrays, loops, foreach

这是一个简单的循环

```
$list = array("A", "B", "C","D");
foreach ($list as $var) {
    print(current($list));
} 
```

输出（[演示](http://3v4l.org/sBDjl)）

```
 BBBB   // Output for 5.2.4 - 5.5.0alpha4
 BCD    // Output for 4.4.1
 AAAA   // Output for 4.3.0 - 4.4.0, 4.4.2 - 5.2.3 
```

问题 ：

*   有人可以解释发生了什么吗？
*   为什么我没有得到 ABCD
*   即使数组的副本是由我制作的，但在当前稳定版本中`foreach`应该得到但没有得到`AAAA``PHP`

注意*我知道我可以简单地使用`print $var`但来自 PHP DOC

> current — 返回数组中的当前元素[current()](http://php.net/manual/en/function.current.php)函数只返回当前由内部指针指向的数组元素的值。它不会以任何方式移动指针。如果内部指针指向元素列表末尾之外或数组为空，则 current() 返回 FALSE。

**更新 1 - 新观察**

感谢[**Daniel Figueroa**](https://stackoverflow.com/a/14849560/1226894)：只需包装`current`一个函数，您就会得到不同的结果

```
foreach ( $list as $var ) {
    print(item($list));
}

function item($list) {
    return current($list);
} 
```

输出（[演示](http://3v4l.org/AvLRc)）

```
 BCDA   // What the hell 
```

问题 ：

*   为什么不得到“BBBB”？
*   在函数中包装电流如何影响`foreach`输出？
*   多余的“A”从何而来？

**更新 2**

```
$list = array("A","B","C","D");
item2($list);
function item2($list) {
    foreach ( $list as $var ) {
        print(current($list));
    }
} 
```

输出（[见演示](http://3v4l.org/1aUpd)）

```
AAAA // No longer BBBB when using a function 
```

问题 ：

*   在函数中运行循环和在函数外运行它有什么不同，因为你在大多数 PHP 版本中都在函数`AAAA`之外和函数中运行`BBBB`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-13T09:05:48.527

**为什么以B开头？**

从 5.2开始（可靠地）在循环体开始*之前*`foreach`推进数组指针。另请参阅操作码。*[`FE_RESET`](http://www.php.net/manual/en/internals2.opcodes.fe-reset.php)*

 *```
$list = array("A", "B", "C","D");
foreach ($list as $var) {
    break;
}
var_dump(current($list)); 
```

输出：

```
B 
```

这可能与`ZEND_OP_DATA`伪操作码的工作方式有关（实际上并没有记录）。

**为什么`current()`总是给出相同的值？**

在循环开始之前，`foreach`创建对您正在循环的数组的内部引用。一旦进入循环，只要数组变量被修改或通过引用传递，内部引用就会通过复制数组结构（而不​​是元素）与变量解除关联。这个复制的值保留了数组指针（之前已被循环初始化修改）。

这种行为也表现在更具破坏性的`unset()`操作中：

```
$list = array('A', 'B', 'C', 'D');
foreach ($list as $key => $val) {
  echo $val;
  unset($list[1], $list[2], $list[3]);
}
echo "\n", print_r($list, true), "\n"; 
```

输出：

```
ABCD
Array
(
    [0] => A
) 
```

**将循环变量传递给函数**

这是另一个有趣的场景：

```
$list = array('A', 'B', 'C', 'D');
function itm($arr) 
{
    return current($arr);
}

foreach ($list as $item) {
    print itm($list);
}
var_dump(current($list)); 
```

输出：

```
BCDA
bool(false) 
```

这一次，数组是按值传递的，因此它的数组结构（而不​​是元素）被复制到函数的`$arr`参数中。与前面的示例不同，循环的内部引用和符号之间没有解除关联，`$list`因为复制发生在函数范围内。

*最后一个`"A"`呢？*

这是迄今为止最神秘的行为，`foreach`只能在这种情况下目睹。在最后一次循环迭代中，数组指针*似乎*倒回到了第一项；似乎是因为在循环结束时，它显然指向元素末尾之外（从输出的最后一行可以看到）。

这可能与[`SWITCH_FREE`](http://php.net/manual/en/internals2.opcodes.switch-free.php)在`foreach`.

**那么为什么放置`foreach`在一个函数中会使它变得不同呢？**

观察以下代码：

```
function item2($arr) 
{
    foreach ($arr as $var) {
        print(current($arr));
    }
    var_dump(current($arr));
}
$list = array("A","B","C","D");
item2($list); 
```

输出：

```
AAAA
string(1) "A" 
```

在这种情况下，`foreach`使用数组的副本初始化 的内部引用（因为它的 refcount > 1）并因此创建与`$arr`符号的立即解除关联。

**会变得更糟吗？**

当然！`foreach`当您开始使用引用或在同一个变量上嵌套多个循环时，您可以获得更奇怪的结果。

**那么我怎样才能得到一致的结果呢？**

使用[`Iterators`](http://www.php.net/iterator)或不依赖于在`foreach`操作期间通过引用数组变量获得一致的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T08:11:44.593

来自[PHP.net](http://php.net/manual/en/function.current.php)

> current() 函数只返回内部指针当前指向的数组元素的值。它不会以任何方式移动指针

然后：使用[下一个（）](http://php.net/manual/en/function.next.php)

```
$list = array("A", "B", "C","D");
foreach ($list as $var) {
    print(current($list));
    next($list);
} 
```

注意：不会打印第一个元素，因为 foreach 将指针移动到数组的第二个元素:)

这个例子将解释完整的行为：

```
$list = array("A", "B", "C","D");
foreach ($list as $var) {
   if(!isset($a)) reset($list); $a = 'isset';
   print(current($list));
   next($list);
} 
```

输出为 ABCD

另请注意：

> ```
> As foreach relies on the internal array pointer changing it within the loop 
> may lead to unexpected behavior. 
> ```
> 
> [前锋](http://php.net/manual/en/control-structures.foreach.php)

* * *

**编辑：我还想分享我新的令人困惑的发现！！！**

**示例 1：**

```
$list = array("A", "B", "C","D");
$list_copy = $list;
foreach ($list as $key => $val) {
  current($list_copy);
  echo current($list);
  //next($list);
} 
```

输出：AAA

**示例 2：**

```
$list = array("A", "B", "C","D");
$list_copy = $list;
foreach ($list as $key => $val) {
  current($list_copy);
  echo current($list);
  next($list);
} 
```

输出：ABCD

**当在 foreach 中调用 current() 函数时，即使是另一个数组，它也会影响 foreach 的行为......**

**示例 3：**

```
$list = array("A", "B", "C","D");

$refcopy = &$list;

foreach ($list as $key => $val) {
  if(!isset($a)) { $a = 'isset'; reset($list); }
  echo current($list);
  next($list);
} 
```

输出：ACD（哇！缺少**B**）

**示例：4**

```
$list = array("A", "B", "C","D");

$refcopy = &$list;

foreach ($list as $key => $val) {
  echo current($list);
  next($list);
} 
```

输出：BCD

无法确切决定在 foreach 循环中会发生什么！！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T08:46:27.620

好吧，我不知道为什么会这样，但我怀疑这可能与作业的评估/处理方式有关。为了好玩，我尝试了这个，它导致了另一种`incorrect`行为：

```
$arr = array('A', 'B', 'C', 'D');
function itm($val) {
    return current($val);
}

foreach ($arr as $item) {
    print itm($arr);
} 
```

结果：BCDA

所以我的猜测是，这里发生的事情是函数调用强制电流的评估以~正确的方式发生。另外，我得到 BCDA 而不是 ABCD 的原因可能是因为内部指针最初是递增的（指向 B），然后在 en 中它被重置回指向 A。

[PHP doc](http://php.net/manual/en/language.operators.assignment.php)中的这一行可能值得注意：

> 请注意，赋值会将原始变量复制到新变量（按值赋值），因此对一个变量的更改不会影响另一个。如果您需要在紧密循环内复制大型数组之类的内容，这也可能具有相关性。

我想这并不能算作一个答案，但我喜欢你的问题并想贡献一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T08:33:48.893

即使数组的副本是由 foreach 制作的，我也应该得到 AAAA，但在当前 PHP 稳定版本中没有得到

由于我在这里没有找到这个问题的答案，我将（尝试）解释一下。

在第一次迭代之前`foreach` `$list`实际上并没有复制。只有的[引用计数](http://php.net/manual/en/features.gc.refcounting-basics.php)会`$list`增加到 2。所以在第一次迭代中：第一个值`$list`将被复制到 中`$var`，指针将移动到的第二个元素，`$list`并进行实际*的复制*。`$list`因此，当您调用`current`指向第二个元素的指针但在第二次和更远的迭代中它永远不会被修改，因为存在的*实际副本*总是会输出第二个元素。`$list``current`

**编辑：**

我玩过`debug_zval_dump`以了解这种非常出乎意料的行为：

```
<pre>

<?php

$list = array("A", "B", "C","D");

echo '<h1>Ref count before entering foreach:</h1><br>';
debug_zval_dump($list); echo '<br><br>';

$i = 0;
echo '<h1>Ref count in foreach:</h1><br>';
foreach ($list as $var) {
    $i++;
    echo '<b>Iteration #'.$i.':</b> ';
    debug_zval_dump($list);
    echo '<br>';
}

$list = array("A", "B", "C","D"); //re-assign array to avoid confusion

echo '<h1>Ref count before entering foreach that calls method "item" and passes array by value:</h1><br>';
debug_zval_dump($list);
$i = 0;
echo '<h1>Ref count in foreach that calls method "item" and passes array by value:</h1><br>';
foreach ( $list as $var ) {
    $i++;
    item($list, $i);
}

function item($list, $i) {
    echo '<b>Iteration #'.$i.':</b> ';
    debug_zval_dump($list);
}

$list = array("A", "B", "C","D"); //re-assign array to avoid confusion

echo '<h1>Ref count before entering foreach that calls method "item" and passes array by reference:</h1><br>';
debug_zval_dump($list);
$i = 0;
echo '<h1>Ref count in foreach that calls method "item" and passes array by reference:</h1><br>';
foreach ( $list as $var ) {
    $i++;
    itemWithRef($list, $i);
}

function itemWithRef(&$list, $i) {
    echo '<b>Iteration #'.$i.':</b> ';
    debug_zval_dump($list);
} 
```

并得到以下输出：

```
进入foreach前的参考计数：
 array(4) refcount(2){
  [0]=>
  字符串（1）“A”引用计数（1）
  [1]=>
  字符串（1）“B”引用计数（1）
  [2]=>
  字符串（1）“C”引用计数（1）
  [3]=>
  字符串（1）“D”引用计数（1）
}

foreach 中的引用计数：
迭代 #1： array(4) refcount(3){
  [0]=>
  字符串（1）“A”引用计数（2）
  [1]=>
  字符串（1）“B”引用计数（1）
  [2]=>
  字符串（1）“C”引用计数（1）
  [3]=>
  字符串（1）“D”引用计数（1）
}

迭代#2： array(4) refcount(3){
  [0]=>
  字符串（1）“A”引用计数（1）
  [1]=>
  字符串（1）“B”引用计数（2）
  [2]=>
  字符串（1）“C”引用计数（1）
  [3]=>
  字符串（1）“D”引用计数（1）
}

迭代 #3： array(4) refcount(3){
  [0]=>
  字符串（1）“A”引用计数（1）
  [1]=>
  字符串（1）“B”引用计数（1）
  [2]=>
  字符串（1）“C”引用计数（2）
  [3]=>
  字符串（1）“D”引用计数（1）
}

迭代#4： array(4) refcount(3){
  [0]=>
  字符串（1）“A”引用计数（1）
  [1]=>
  字符串（1）“B”引用计数（1）
  [2]=>
  字符串（1）“C”引用计数（1）
  [3]=>
  字符串（1）“D”引用计数（2）
}

进入调用方法“item”并按值传递数组的foreach之前的引用计数：
 array（4）refcount（2）{
  [0]=>
  字符串（1）“A”引用计数（1）
  [1]=>
  字符串（1）“B”引用计数（1）
  [2]=>
  字符串（1）“C”引用计数（1）
  [3]=>
  字符串（1）“D”引用计数（1）
}
调用方法“item”并按值传递数组的foreach中的引用计数：
迭代＃1： array（4）refcount（5）{
  [0]=>
  字符串（1）“A”引用计数（2）
  [1]=>
  字符串（1）“B”引用计数（1）
  [2]=>
  字符串（1）“C”引用计数（1）
  [3]=>
  字符串（1）“D”引用计数（1）
}
迭代#2： array(4) refcount(5){
  [0]=>
  字符串（1）“A”引用计数（1）
  [1]=>
  字符串（1）“B”引用计数（2）
  [2]=>
  字符串（1）“C”引用计数（1）
  [3]=>
  字符串（1）“D”引用计数（1）
}
迭代#3： array(4) refcount(5){
  [0]=>
  字符串（1）“A”引用计数（1）
  [1]=>
  字符串（1）“B”引用计数（1）
  [2]=>
  字符串（1）“C”引用计数（2）
  [3]=>
  字符串（1）“D”引用计数（1）
}
迭代#4： array(4) refcount(5){
  [0]=>
  字符串（1）“A”引用计数（1）
  [1]=>
  字符串（1）“B”引用计数（1）
  [2]=>
  字符串（1）“C”引用计数（1）
  [3]=>
  字符串（1）“D”引用计数（2）
}
进入调用方法“item”并通过引用传递数组的foreach之前的引用计数：
 array(4) refcount(2){
  [0]=>
  字符串（1）“A”引用计数（1）
  [1]=>
  字符串（1）“B”引用计数（1）
  [2]=>
  字符串（1）“C”引用计数（1）
  [3]=>
  字符串（1）“D”引用计数（1）
}
调用方法“item”并通过引用传递数组的foreach中的引用计数：
迭代＃1： array（4）refcount（1）{
  [0]=>
  字符串（1）“A”引用计数（4）
  [1]=>
  字符串（1）“B”引用计数（3）
  [2]=>
  字符串（1）“C”引用计数（3）
  [3]=>
  字符串（1）“D”引用计数（3）
}
迭代#2： array(4) refcount(1){
  [0]=>
  字符串（1）“A”引用计数（3）
  [1]=>
  字符串（1）“B”引用计数（4）
  [2]=>
  字符串（1）“C”引用计数（3）
  [3]=>
  字符串（1）“D”引用计数（3）
}
迭代#3： array(4) refcount(1){
  [0]=>
  字符串（1）“A”引用计数（3）
  [1]=>
  字符串（1）“B”引用计数（3）
  [2]=>
  字符串（1）“C”引用计数（4）
  [3]=>
  字符串（1）“D”引用计数（3）
}
迭代#4： array(4) refcount(1){
  [0]=>
  字符串（1）“A”引用计数（3）
  [1]=>
  字符串（1）“B”引用计数（3）
  [2]=>
  字符串（1）“C”引用计数（3）
  [3]=>
  字符串（1）“D”引用计数（4）
}

```

输出有点混乱。

在第一个示例`foreach`中创建了内部副本，`$list`因此引用计数为 2（结果中为 4，因为`debug_zval_dump`添加了一个`refCount`）。在第二个示例中（按值传递）`refCount`增加到 3，因为`$list`被复制用于函数。在第三个示例中，计数保持为 1，因为`$list`按值传递。我需要一些时间来了解原因。如果你从这个结果分享中得到了意义。

我只能说，当我们通过值`foreach`传递数组时，传递的是迭代的数组，但是当通过引用传递时，它采用了*原始* `$list`的. 问题是：为什么要`foreach`传递那个数组？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T12:48:03.770

如果说谎，您使用的代码。即使从字面上看，它也可能看起来像相同的代码，但变量不是（[http://3v4l.org/jainJ](http://3v4l.org/jainJ)）。

要回答您的实际问题，请使用正确的工具以获得一致的结果。

如果您需要一个具有数组值的变量，请分配它：

```
$list = array(....); 
```

如果您需要获取该数组的当前值，请*在*以下之前*使用*`foreach`它：

```
$current = current($list); 
```

因为在`foreach`this 内部可能是相同的变量名，但值会不同（想象一下，您正在迭代！）。

如果每次迭代都需要*当前值，请使用它：*

```
foreach ($list as $current) {
    ...
} 
```

看到了`$current`吗？

哦，天哪，是的，就是这么简单。等等，我已经有了一致的结果。哦，不自欺欺人就这么容易。耶！;)

对于日志：将变量作为函数参数传递使其成为新变量。即使是参考（已解释）。

如有疑问，请不要使用 PHP 引用。甚至没有变量：http: [//3v4l.org/6p5nZ](http://3v4l.org/6p5nZ)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T08:49:00.150

很好的指出。但似乎不同版本的 php 存在内存指向问题。**current**也只给出你没有在任何地方增加（导航）的当前位置，所以没有得到正确的输出。由于不同版本的 php 以不同的方式解释数组的下一个和起点，因此解决方案可能是在循环内以某种条件**重置。**（顺便说一句，循环然后使用 current, next prev 不是一个好方法，因为 var 中已经有对象 :) 你的选择是什么）这是你可以让它工作的一种方法：

```
<?php
$list = array("A", "B", "C","D");
$flag =0;
foreach ($list as $var) {
    if($flag==0)
    {   
        reset($list);
        $flag=1;
    }
    print(current($list));
    next($list);
} 
```

输出为 ABCD。请参阅[http://3v4l.org/5Hm5Y](http://3v4l.org/5Hm5Y)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-13T08:03:38.480

```
$list = array("A", "B", "C","D");
foreach ($list as $var) {
    echo $var;
} 
```

应该这样做。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-02-13T10:32:39.213

使用这个你已经知道发生了什么！

```
$list = array('A', 'B', 'C','D');
foreach ($list as $var) {
 var_dump(current($list));
} 
```

可能是它帮助你！*

# ms-access - 超过 2 个联合语句访问的查询出错

> ID：14848912
> 
> 赞同：1
> 
> 时间：2013-02-13T08:00:51.413
> 
> 标签：ms-access

我在使用联合查询时遇到了这个问题。当我尝试使用超过 2 条 UNION 语句时，我发现了这个错误——“微软访问数据库引擎找不到对象”。确保对象名称存在并且您正确拼写其路径名称。” SQL 代码为：

```
 SELECT [Pt data 1].IDno, [Pt data 1].pt_name, [Expected visit date modified].[Visit day], [Expected visit date modified].[Visit Time], [Pt data 1].[visit_14d_st] AS Status
    FROM [Expected visit date modified] INNER JOIN [Pt data 1] ON [Expected visit date modified].IDno = [Pt data 1].IDno
    WHERE ((([Expected visit date modified].[Visit Time])="Day 14") AND (Not ([Pt data 1].[visit_14d_st])="Data Entered" And Not ([Pt data 1].[visit_14d_st])="Missed Visit"));
    UNION 
    SELECT [Pt data 1].IDno, [Pt data 1].pt_name, [Expected visit date modified].[Visit day], [Expected visit date modified].[Visit Time], [Pt data 1].[visit_28d_st] AS Status
    FROM [Expected visit date modified] INNER JOIN [Pt data 1] ON [Expected visit date modified].IDno = [Pt data 1].IDno
    WHERE ((([Expected visit date modified].[Visit Time])="Day 28") AND (Not ([Pt data 1].[visit_28d_st])="Data Entered" And Not ([Pt data 1].[visit_28d_st])="Missed Visit"));
    UNION 
    SELECT [Pt data 1].IDno, [Pt data 1].pt_name, [Expected visit date modified].[Visit day], [Expected visit date modified].[Visit Time], [Pt data 1].[visit_42d_st] AS Status
    FROM [Expected visit date modified] INNER JOIN [Pt data 1] ON [Expected visit date modified].IDno = [Pt data 1].IDno
    WHERE ((([Expected visit date modified].[Visit Time])="Day 42") AND (Not ([Pt data 1].[visit_42d_st])="Data Entered" And Not ([Pt data 1].[visit_42d_st])="Missed Visit")); 
```

问题是该查询适用于两个查询中的任何一个，但不适用于所有三个。我完全坚持这一点。请提供任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:46:52.773

UNION 查询很难阅读，也很难检查拼写错误。我建议您将每个语句放入已保存的查询中（例如“qryVisit_Day14”、“qryVisit_Day28”）。然后使您的 UNION 查询如下所示：

```
 SELECT * FROM qryVisit_Day14
UNION SELECT * FROM qryVisit_Day28
UNION SELECT * FROM qryVisit_Day42 
```

# php - PHP-Javascript 使用相同的密钥加密和解密

> ID：14848914
> 
> 赞同：0
> 
> 时间：2013-02-13T08:00:59.217
> 
> 标签：php, javascript, encryption

我正在开发一个前端在 javascript (backbone) 和后端在 codeigniter(php) 中的应用程序。我想要一种方法，我可以使用密钥在后端加密消息并使用相同的密钥从 javascript 解密该消息。基本上我需要这个流程来进行用户身份验证。

结果是运气不好，因为我无法在互联网上找到这样的组合。这个工作流程可以使用什么方式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:53:07.877

使用 HTTPS 几乎是唯一有意义的答案。依赖 Javascript 加密是不好的，因为恶意用户可以做各种令人讨厌的事情来注入脚本，从而使您的前端以明文形式发送密码，或者将密码发送到攻击者控制的服务器。

HTTPS 和 SSL/TLS 存在问题，但它是保护 Web 应用程序通信通道的标准机制。它已被该领域的专家广泛审查，并已针对各种故障模式和攻击场景进行了保护。

例如：在您的评论中听起来您将使用单个静态密钥进行加密。由于您需要将密钥发送给客户端，您将如何安全地执行此操作？是什么阻止了用户通过访问您的登录页面合法地获取密钥，然后使用它来解密任何其他用户的通信？当使用一个密钥发送了足够多的消息时，您移动到新密钥的机制是什么？

HTTPS 涵盖了这些类型的场景。如果你用你的 webapp 做一些“真实的”事情，你可能需要为证书支付几美元（现在真的只有几美元），但这确实是要走的路。

# java - 在多线程环境中使用缓存映射是否安全？

> ID：14848915
> 
> 赞同：1
> 
> 时间：2013-02-13T08:01:06.670
> 
> 标签：java, multithreading, caching, concurrency, lru

我正在使用 Commons Collections LRUMap（它基本上是一个经过少量修改的 LinkedHashMap）为用户的照片实现 LRU 缓存。findPhoto 方法可以在几秒钟内被调用数百次。

```
public class CacheHandler {
    private static final int MAX_ENTRIES = 1000;
    private static Map<Long, Photo> photoCache = Collections.synchronizedMap(new LRUMap(MAX_ENTRIES));

    public static Map<Long, Photo> getPhotoCache() {
        return photoCache;
    }
} 
```

用法：

```
public Photo findPhoto(Long userId){
    User user = userDAO.find(userId);
    if (user != null) {
        Map<Long, Photo> cache = CacheHandler.getPhotoCache();

        Photo photo = cache.get(userId);
        if(photo == null){
            if (user.isFromAD()) {
                try {
                    photo = LDAPService.getInstance().getPhoto(user.getLogin());
                } catch (LDAPSearchException e) {
                    throw new EJBException(e);
                }
            } else {
                log.debug("Fetching photo from DB for external user: " + user.getLogin());
                UserFile file = userDAO.findUserFile(user.getPhotoId());
                if (file != null) {
                    photo = new Photo(file.getFilename(), "image/png", file.getFileData());
                }
            }
            cache.put(userId, photo);
        }else{
            log.debug("Fetching photo from cache, user: " + user.getLogin());
        }
        return photo;

    }else{
        return null;
    }
} 
```

如您所见，我没有使用同步块。我假设这里最坏的情况是竞争条件导致两个线程为同一个 userId 运行 cache.put(userId, photo)。但是两个线程的数据是相同的，所以这不是问题。

我的推理在这里正确吗？如果没有，有没有办法使用同步块而不会对性能造成很大影响？一次只有 1 个线程访问地图感觉有点矫枉过正。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:28:26.037

Assylias 是对的，您所拥有的一切都会正常工作。

但是，如果您想避免多次获取图像，这也是可能的，但需要做更多的工作。洞察力是，如果一个线程出现，缓存未命中并开始加载图像，那么如果第二个线程在第一个线程完成加载之前想要相同的图像，那么它应该等待第一个线程，而不是自己去加载它。

使用 Java 的一些更简单的并发类很容易协调。

首先，让我重构您的示例以提取有趣的部分。这是你写的：

```
public Photo findPhoto(User user) {
    Map<Long, Photo> cache = CacheHandler.getPhotoCache();

    Photo photo = cache.get(user.getId());
    if (photo == null) {
        photo = loadPhoto(user);
        cache.put(user.getId(), photo);
    }
    return photo;
} 
```

这里，`loadPhoto`是一种执行加载照片的实际细节的方法，这里不相关。我假设用户的验证是在另一种调用此方法的方法中完成的。除此之外，这是您的代码。

我们要做的是：

```
public Photo findPhoto(final User user) throws InterruptedException, ExecutionException {
    Map<Long, Future<Photo>> cache = CacheHandler.getPhotoCache();

    Future<Photo> photo;
    FutureTask<Photo> task;

    synchronized (cache) {
        photo = cache.get(user.getId());
        if (photo == null) {
            task = new FutureTask<Photo>(new Callable<Photo>() {
                @Override
                public Photo call() throws Exception {
                    return loadPhoto(user);
                }
            });
            photo = task;
            cache.put(user.getId(), photo);
        }
        else {
            task = null;
        }
    }

    if (task != null) task.run();

    return photo.get();
} 
```

请注意，您需要更改类型`CacheHandler.photoCache`以适应包装`FutureTask`s。并且由于此代码执行显式锁定，因此您可以从中删除`synchronizedMap`。您还可以将 a`ConcurrentMap`用于缓存，这将允许使用 ，这[`putIfAbsent`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentMap.html#putIfAbsent%28K,%20V%29)是 lock/get/check for null/put/unlock 序列的更多并发替代方案。

希望这里发生的事情是相当明显的。从缓存中获取东西的基本模式，检查你得到的东西是否为空，如果是的话，把东西放回去仍然存在。但不是放入 a `Photo`，而是放入 a [`Future`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html)，它本质上是 a 的占位符，`Photo`当时可能不（或可能）在那里，但稍后将可用。`get`on 方法获取一个地方所持有的东西，`Future`如果需要，阻塞直到它到达。

此代码[`FutureTask`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html)用作`Future`; this 接受[`Callable`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html)能够产生 a`Photo`作为构造函数参数，并在调用它的`run`方法时调用它。调用`run`由一个测试保护，该测试基本上概括了`if (photo == null)`之前的测试，但在`synchronized`块之外（因为正如您所意识到的，您真的不希望在持有缓存锁的同时加载照片）。

这是我见过或需要几次的模式。遗憾的是它没有内置在某个地方的标准库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:25:06.510

是的，你是对的——如果照片创建是幂等的（总是返回同一张照片），最糟糕的情况是你将多次获取它并将其多次放入地图中。

# iphone - 当用户点击来自 Xtify 的通知时如何打开特定的视图控制器？

> ID：14848919
> 
> 赞同：0
> 
> 时间：2013-02-13T08:01:13.707
> 
> 标签：iphone, objective-c, push-notification, xtify

我正在使用 xtify 接收推送通知。我正在使用一些标签来获取推送通知，当我们激活标签时它会收到通知并打开我的标签相关视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:25:24.413

您可以附加一个 url 作为推送通知的额外属性，并使您的应用程序响应 url 方案。

例如，您在推送通知字典中添加一个额外的参数*url*，其值为

*myapp://ViewController1?bar=foo*

在您的应用程序委托中，您将解析 url 并实例化*ViewController1*并将属性*foo*设置为*bar*。

为了帮助您进行解析，您可以使用此[路由库](https://github.com/joeldev/JLRoutes)。

作为奖励，您可以使用您的自定义方案使您的应用程序响应传入的 url，因为它将重用与推送通知路由相同的逻辑。请参阅[文档](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AdvancedAppTricks/AdvancedAppTricks.html)以向您的应用添加自定义 url 支持。

# ios - 在 ANE for iOS 中添加静态库

> ID：14848920
> 
> 赞同：2
> 
> 时间：2013-02-13T08:01:19.220
> 
> 标签：ios, xcode, air-native-extension

我正在为 iOS 平台构建一个 ANE，我需要使用一个静态库：libBarcodeScanner.a。

我知道，当您使用不在 AIR 默认链接的框架列表中的框架或库时，您应该将其包含在以下内容中：

```
<platform xmlns="http://ns.adobe.com/air/extension/3.1">
     <sdkVersion>5.1</sdkVersion>
     <linkerOptions>
          <!-- to use the CoreMotion framework -->    
          <option>-framework CoreMotion<option>
          <!-- to link with the libiconv.dylib -->
          <option>-liconv</option>
     </linkerOptions>
</platform> 
```

但是，前面的代码是针对 XXX.framework 和 XXX.dylib 的。

我应该如何包含 XXX.a？

我尝试过使用 -libBarcodeScanner，但是在 Flash builder 中我导出版本时使用此 ANE 构建了一个应用程序，它说它找不到 libBarcodeScanner

提前致谢。

# android - 我应该怎么做才能自动检测到gsm位置并调用写入函数？

> ID：14848922
> 
> 赞同：0
> 
> 时间：2013-02-13T08:01:26.817
> 
> 标签：android

我只是想做如果 gsm 位置更新，写入 `cellid` 数据库。为了这个愿望，我尝试实现服务类，如下所示。问题我应该怎么做才能自动检测到gsm位置并编写函数即C（），工作是将cellid写入数据库被调用？

我的开始工作；

```
public class GpsCell extends Service{
TelephonyManager tel;

@Override
public void onCreate() {
    super.onCreate();

    tel = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);
    GsmCellLocation location = (GsmCellLocation)telephonyManager.getCellLocation();

}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Toast.makeText(this, "service starting", Toast.LENGTH_SHORT).show();
    return super.onStartCommand(intent, flags, startId);        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:08:12.590

您可以注册一个`PhoneStateListener.LISTEN_CELL_LOCATION`侦听器以获取 cellid 更新

```
public class GpsCellLogger extends Service{
  TelephonyManager tel;

  @Override
  public void onCreate() {
    super.onCreate();

    tel = (TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE);

    tel.listen(myListener , PhoneStateListener.LISTEN_CELL_LOCATION);

    GsmCellLocation location = (GsmCellLocation)telephonyManager.getCellLocation();

  }
  PhoneStateListener myListener = new PhoneStateListener() {
      public void onCellLocationChanged(CellLocation p_CellLocation)
      {
        //write to database
      }
 }

} 
```

# html - 我的项目应该使用哪个 Javascript MV* 平台/库？

> ID：14848923
> 
> 赞同：2
> 
> 时间：2013-02-13T08:01:29.803
> 
> 标签：html, jquery-mobile, backbone.js, knockout.js, angularjs

我们将开始开发一个使用以下内容的 Web 应用程序：

1.  Spring MVC 框架
2.  休眠
3.  MySql 或 MongoDB（或两者兼有）
4.  将在浏览器上运行的移动应用程序的 HTML5（这将是实际 Web 应用程序的次要部分）

我以前从未使用过任何 javascript MVC/MV* 框架。每当我需要时，我一直在使用普通的 jQuery 和其他库。

**Web 应用程序的要求：**

1.  正常登录等
2.  仪表板将显示分析、图表等。
3.  表单设计工具 - 例如，用户可以输入新行的可编辑表单，并且更改的实时预览应反映在与其相邻的类似移动设备的屏幕上。看看它在移动视图中的样子。用户可以添加、编辑和删除新行。所以它将是一个交互式表单构建界面。（这就是我认为 MV* 库/框架可以帮助我的地方。怎么说？或者 jQuery 可以解决问题？）

**HTML5 移动应用程序要求：**

1.  用户将从浏览器访问应用程序。
2.  它应该看起来像一个原生应用程序（但实际上它将是一个 HTML5 应用程序）
3.  它最多有 2-3 页（带有 NEXT 按钮）和用于输入的简单文本区域（例如电子邮件、电话号码等）和 SUBMIT 按钮。（使用 jQuery mobile 会是最好的解决方案吗？或者我应该使用 MV* 库或任何与 HTML5 很好结合的东西，这将使我的生活更轻松。使用什么？）

我对***Backbone.js、Ember.js、KnockoutJS、AngularJS 等***一系列框架和库感到有些困惑。

有人可以指导我。我将非常感激和感激。我并不期待最好的框架，我只需要针对上述情况的“最佳”框架。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T08:22:47.203

半年前，我坐在你的鞋子里。我一直在使用相同的堆栈，具有相同的设计原则。我去了`AngularJs`，再高兴不过了:)。

我一直在评估这组框架：

*   淘汰赛JS
*   骨干JS
*   发布订阅
*   蝙蝠侠
*   萨米 JS
*   芽核
*   JS MVC
*   角 JS

我正在评估这些条件：

*   多种型号？（我们可以有几个单独的控制器处理小块 DOM 分别在同一页面上顺利运行吗）
*   用户界面和数据绑定？（UI 的变化反映在对象状态中，反之亦然）
*   自动内容切换？（当您导航到`#dashboard`或`#posts`框架支持的内容更改 id 时）
*   模板？（无需使用 3rd 方库进行模板）
*   与不同框架集成？（如 jQuery）
*   支持 HTML 5 本地存储？（它支持本地存储还是集成在框架中）
*   单元测试支持（框架的性质是否使东西易于测试）

我列表中的大多数框架都支持或满足**所有这些条件**。这让我感到惊讶，因为我希望一个人能证明比另一个人更好。事实证明，它们都非常接近，所以在我的情况下，唯一的方法就是一个一个地尝试它们。在我学习了几个教程之后，我决定使用 AngularJs，这是我做过的最好的决定 :-)

老实说，几乎**所有的框架都会帮助你**。对您来说最重要的可能是视图和模型的声明式绑定。您选择的大多数框架都将支持它。

我建议您采用与我相同的方法。在其中 3 个中编写简单的应用程序，看看最适合您的编码风格的内容。

# c++ - 如何定义具有模板参数的函数指针的typedef

> ID：14848924
> 
> 赞同：21
> 
> 时间：2013-02-13T08:01:33.847
> 
> 标签：c++, templates, function-pointers, typedef

我想为以 stl 容器作为参数且该容器具有未知类型的函数指针创建 typedef。像这样的东西：

```
typedef void (* TouchCallBack)(GLRenderer*, const MotionEvent&, std::vector<T >); 
```

这是可能的？（尤其是在 c++ 03 中）

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-13T08:03:58.160

我不知道有任何完全类似的 C++03 解决方案，而且它没有内置在语言中，但是在 C++11 中，这可以通过`using`别名实现：

```
template<typename T>
using TouchCallBack = void (*)(GLRenderer*, const MotionEvent&, std::vector<T >); 
```

C++03 的一种解决方法是使用结构：

```
template<typename T>
struct TouchCallBack {
    typedef void (*type)(GLRenderer*, const MotionEvent&, std::vector<T >);
};

//use like TouchCallBack<int>::type 
```

# vb.net - 如何将 Mercurial 下的模块移动到另一个 VB.NET 项目？

> ID：14848928
> 
> 赞同：1
> 
> 时间：2013-02-13T08:01:44.637
> 
> 标签：vb.net, mercurial

我正在使用单个 Mercurial 存储库来跟踪我的 VB.NET 2010 解决方案 myVBsolution。这包含 2 个项目 projectA 和 projectB。我的模块“module1”在 projectA 中。我的 mercurial 存储库的顶部是 myVBsolution。

如何将它移动到 VB.NET 中的 projectB。保留模块 1 的更改历史记录？

我已经读到我需要您使用`hg mv`来执行复制，但不知道将移动与 VB.NET 集成所需的步骤。

现在的代码结构：

```
myVBsolution
  projectA  
    -module1  
  projectB 
```

通缉：

```
myVBsolution
  projectA
  projectB
    -module1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:59:04.303

您可以在`hg mv`Visual Studio 之外使用移动文件。之后，在 Visual Studio 中，删除现在丢失的文件`projectA`并使用`Add->Existing Item`on`projectB`将其添加到`projectB`.

* * *

但如果你使用[TortoiseHg](http://tortoisehg.bitbucket.io/)，那就更简单了：只需在 Visual Studio 中移动文件并使用[`Detect Renames`](http://tortoisehg.bitbucket.io/manual/2.3/guess.html)TortoiseHg 的功能（可以使用 100% 相似度）。

# ruby-on-rails - CSV 导入时的 ActiveRecord::AssociationTypeMismatch

> ID：14848930
> 
> 赞同：0
> 
> 时间：2013-02-13T08:01:46.037
> 
> 标签：ruby-on-rails, csv, heroku, import, csv-import

我正在导入一个 CSV，它有两列`name`和`boro`.

当我在开发中运行导入时，它工作正常。但是当我在 Heroku 上进行生产时，我收到了这个错误：

```
2013-02-13T07:53:43+00:00 app[web.1]: Started POST "/neighborhoods/import" for xx.xx0.xx.xx at 2013-02-13 07:53:43 +0000
2013-02-13T07:53:43+00:00 app[web.1]: 
2013-02-13T07:53:43+00:00 app[web.1]: ActiveRecord::AssociationTypeMismatch (Boro(#52915220) expected, got String(#18916260)):
2013-02-13T07:53:43+00:00 app[web.1]:   app/models/neighborhood.rb:20:in `block in import'
2013-02-13T07:53:43+00:00 app[web.1]:   app/models/neighborhood.rb:19:in `import'
2013-02-13T07:53:43+00:00 app[web.1]:   app/controllers/neighborhoods_controller.rb:85:in `import'
2013-02-13T07:53:43+00:00 app[web.1]: 
2013-02-13T07:53:43+00:00 app[web.1]: 
```

这是我的`models/neighborhood`，或者错误中提到的行：

```
 def self.import(file)
    CSV.foreach(file.path, headers: true) do |row|
      neighborhood = where(name: row["name"]).first_or_create!(row.to_hash.slice(*accessible_attributes))
      boro = Boro.find_by_name(row["boro"])
      neighborhood.boro = boro      
      neighborhood.save!
    end
  end 
```

这是我的`controllers/neighborhood#import`：

```
def import
  Neighborhood.import(params[:file])
  redirect_to imports_index_url, notice: "Neighborhoods imported."
end 
```

这是两个模型之间的关联：

`Neighborhood belongs_to :boro` `Boro has_many :neighborhoods`

这是 Neighborhood 的架构：

```
# Table name: neighborhoods
#
#  id         :integer          not null, primary key
#  name       :string(255)
#  created_at :datetime         not null
#  updated_at :datetime         not null
#  boro_id    :integer 
```

这是 Boro 的架构：

```
# Table name: boros
#
#  id         :integer          not null, primary key
#  name       :string(255)
#  created_at :datetime         not null
#  updated_at :datetime         not null 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:51:29.930

因此，我遇到的问题似乎与`:boro, :boro_id`可访问的属性和我更新该属性的方式有关。

一旦我摆脱了`:boro`我的`attr_accessible`清单：

```
attr_accessible :name, :listing_ids, :boro_id 
```

一旦我改变了它，并且没有尝试使用`update_attributes`（我也在这样做），那么上面的代码就可以正常工作了。

# php - 读取和解析超大文件的内容

> ID：14848933
> 
> 赞同：9
> 
> 时间：2013-02-13T08:01:52.523
> 
> 标签：php, file, file-get-contents

我正在尝试解析大小约为 1GB 的制表符分隔文件。

我在哪里运行我得到的脚本：

```
Fatal error: Allowed memory size of 1895825408 bytes exhausted  (tried to allocate 1029206974 bytes) ... 
```

我目前的脚本只是：

```
$file = file_get_contents('allCountries.txt') ;

$file = str_replace(array("\r\n", "\t"), array("[NEW*LINE]", "[tAbul*Ator]"), $file) ; 
```

我已将 php.ini 中的内存限制设置为 -1，然后给我：

```
Fatal error: Out of memory (allocated 1029963776) (tried to allocate 1029206974 bytes) 
```

无论如何要部分打开文件然后继续下一部分，以便一次使用更少的内存？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T08:04:18.013

是的，您可以逐行阅读：

```
$handle = @fopen("/tmp/inputfile.txt", "r");
if ($handle) {
    while (($buffer = fgets($handle, 4096)) !== false) {
        echo $buffer;
    }
    fclose($handle);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T08:07:43.207

您必须使用块来读取文件。检查这个问题的答案。 [https://stackoverflow.com/a/6564818/1572528](https://stackoverflow.com/a/6564818/1572528)

您也可以尝试将其用于较小的文件。

```
ini_set('memory_limit', '32M'); //max size 32m 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T08:06:13.770

您确定这`fopen`是失败而不是脚本的超时设置吗？默认值通常约为 30 秒左右，如果您的文件读取时间比读取时间长，则可能会导致问题。

要考虑的另一件事可能是脚本的内存限制 - 将文件读入数组可能会超出此限制，因此请检查错误日志以获取内存警告。

如果以上都不是您的问题，您可能会考虑使用[`fgets`](http://ie.php.net/fgets)逐行读取文件，随时处理。

```
$handle = fopen("/tmp/uploadfile.txt", "r") or die("Couldn't get handle");
if ($handle) {
    while (!feof($handle)) {
        $buffer = fgets($handle, 4096);
        // Process buffer here..
    }
    fclose($handle);
} 
```

**编辑**

> PHP似乎没有抛出错误，它只是返回false。

更正的路径`$rawfile`是否相对于脚本运行的位置？也许尝试在此处为文件名设置绝对路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T08:07:55.513

是的，为此使用 fopen 和 fread / fgets：

[http://www.php.net/manual/en/function.fread.php](http://www.php.net/manual/en/function.fread.php)

```
string fread ( resource $handle , int $length ) 
```

将 $length 设置为要读取的文件数量。然后 $handle 保存新读取的位置，使用 fseek 您还可以稍后设置位置....

# java - 为什么 java 是平台无关的，而 c/c++ 不是？

> ID：14848934
> 
> 赞同：0
> 
> 时间：2013-02-13T08:01:55.707
> 
> 标签：java, c++

我多次听说 java 最重要的优势之一是平台独立性。Thay 说：“如果有 JVM，你可以在任何地方运行 java 程序”。好的，我明白了，但是为什么，例如，c/c++ 的可移植性较差？我可以在任何存在 c/c++ 编译器的地方运行 c/c++ 程序。JVM更容易安装吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:04:25.893

不重新编译就不能使用相同的二进制文件——这就是重点。您必须为平台使用 C/C++ 编译器（例如 gcc/g++ 或 MSVC 编译器）

看看 Qt，它是一个基于 C++ 的跨平台框架——但你必须重新编译。在 Java 中，您只需创建**[字节码](http://en.wikipedia.org/wiki/Bytecode)**

# c# - 通过 wcf 在 Sharepoint 站点集合中获取网站

> ID：14848936
> 
> 赞同：0
> 
> 时间：2013-02-13T08:02:01.967
> 
> 标签：c#, wcf, sharepoint, service, svc

我想在 Sharepoint 2010（通过 svc）的站点集合中读出网站（标题）。我通过“listdata.svc”（[http://www.xxx/websites/Web1Site/_vti_bin/Listdata.svc](http://www.xxx/websites/Web1Site/_vti_bin/Listdata.svc)）获得列表信息。我如何获得网站？我正在寻找有关通过 sharepoint 使用 wcf 的良好资源。谢谢。

PS.：这是我当前的代码：

```
 c_1steWebsitesammlungDataContext dataContext = new c_1steWebsitesammlungDataContext
                (new Uri("http://www.xxx/websites/Web1Site/_vti_bin/listdata.svc/"));

            dataContext.Credentials = CredentialCache.DefaultNetworkCredentials;

            var result = from items in dataContext.BW_ScoreList01 select new 
             { Name = items.NrFrage, items.Fragetext, items.Antwort1Wahl0 };

            DataTable dt = new DataTable("myTable");
            DataColumn column;
            DataRow row;

            column = new DataColumn();
            //column.DataType = System.Type.GetType("String");
            column.ColumnName = "NrFrage";
            dt.Columns.Add(column);

            column = new DataColumn();
            //column.DataType = System.Type.GetType("String");
            column.ColumnName = "Fragetext";
            dt.Columns.Add(column);

            column = new DataColumn();
            //column.DataType = System.Type.GetType("String");
            column.ColumnName = "Antwort1Wahl0";
            dt.Columns.Add(column);

            string a;

            foreach (var item in result)
            {
                row = dt.NewRow();
                a = item.Name.ToString();
                row["NrFrage"] = a;
                a = item.Fragetext.ToString();
                row["Fragetext"] = a;
                a = item.Antwort1Wahl0.ToString();
                row["Antwort1Wahl0"] = a;
                dt.Rows.Add(row);
            }

            dataGridView.DataSource = dt; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:40:36.940

SPSite 对象是否适合您？您可以添加对 Microsoft.Sharepoint 的引用，并使用站点 url 构造对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T19:28:24.253

我认为您使用了错误的服务 - 如果目标是获取特定集合中的站点（网站）列表，那么您应该使用 websvcsites 服务。

[http://msdn.microsoft.com/en-us/library/websvcsites(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/websvcsites(v=office.14).aspx)

请注意一件事 - 当您使用 WCF 时，您必须确保您处于该站点的上下文中，否则权限可能会成为问题。即使在对象模型中也是如此 - 如果正在使用的帐户对其中一个没有权限，则获取站点下的所有 SPWeb 可能会失败。

# node.js - 如何保持expressjs中的会话不会过期

> ID：14848953
> 
> 赞同：5
> 
> 时间：2013-02-13T08:03:12.707
> 
> 标签：node.js

我使用 expressjs 框架在 nodejs 中编写了一个简单的 cms。我使用passportjs 使用twitter 进行身份验证。下面是我的 app.configure：

```
app.configure(function(){
//views
app.set('views', __dirname + '/views');
app.set('view engine', 'ejs');
//parse request bodies
app.use(express.bodyParser());
app.use(express.methodOverride());
// session support
app.use(express.cookieParser(cfg.cookie_secret));
app.use(express.session({
  key : 'whynode',
  store : sessionStore,
  cookie: { 
    expires: new Date(Date.now() + 60 * 10000), 
    maxAge: 60*10000
  }
}));
app.use(passport.initialize());
app.use(passport.session());
//pass user data
app.use(function(req, res, next) {
  res.locals.req_path = req.path;
  res.locals.user = req.user || false;
  next();
});
//get routers
app.use(app.router);
//serve asset files
app.use('/assets', express.static(__dirname + '/public'));
}); 
```

我将 redis 用于会话存储。完整的 app.js 代码可以在这里查看[full app.js](https://gist.github.com/yalamber/4942790) 我现在遇到的是当我让应用程序闲置几分钟，会话到期，我需要再次登录。我们如何使会话在至少 2-3 小时不活动时不会超时？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T08:21:02.010

调整此代码：

```
cookie: { 
  expires: new Date(Date.now() + 60 * 10000), 
  maxAge: 60*10000
} 
```

这会将您的会话的到期时间设置为 10 分钟。您不需要同时使用`maxAge`或`expires`，一个就足够了（不同之处在于`expires`使用 Date 实例并且`maxAge`仅表示`expire X milliseconds from now`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-01T09:54:51.600

对于[RedisStore](https://github.com/tj/connect-redis)，您可以设置`disableTTL`为`true`. 密钥将保留在 redis 中，直到被其他方式驱逐。

```
var sessionStore = new RedisStore({client: rClinet, disableTTL: true}) 
```

# ios - 收到 SKProductsRequest 的回复后更新 UIButton 标题以显示应用内购买价格

> ID：14848954
> 
> 赞同：0
> 
> 时间：2013-02-13T08:03:13.793
> 
> 标签：ios, uibutton, in-app-purchase

我正在尝试创建两个按钮，其标签最初设置为默认值。这两个按钮由 popOverViewController 管理，其中 viewDidLoad 方法初始化所有控件。我还有另一种称为 addButtons 的方法，它在从 Apple 的服务器接收到包含产品描述和价格的有效响应后由 AppDelegate 执行。

我的问题是我无法使用该方法更新标签。

我在 popOverViewController 中的 viewDidLoad 方法是：

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
// Add a label to the popover's view controller.
button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
button2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self
           action:@selector(button1Week:)
 forControlEvents:UIControlEventTouchDown];
NSString *priceWeekly = [NSString stringWithFormat:@"weekly subscription"];
[button setTitle:priceWeekly forState:UIControlStateNormal];
button.frame = CGRectMake(0.0, 0.0, 200.0, 50.0);
[button2 addTarget:self
            action:@selector(button1Month:)
  forControlEvents:UIControlEventTouchDown];
[button2 setTitle:@"monthly subscription" forState:UIControlStateNormal];
button2.frame = CGRectMake(0.0, 55.0, 200.0, 50.0);
[self.view addSubview:button];
[self.view addSubview:button2];
} 
```

我的更新标签方法，我确信它会在正确的时间被调用，是：

```
-(void)addButtons {
[self.button setTitle:@"updated label" forState:UIControlStateNormal];
[self.button2 setTitle:@"updated label 2" forState:UIControlStateNormal];
} 
```

你能检查我的代码并建议更新标签的正确方法吗？基本上，由于控件创建和服务器响应之间的等待时间，我想用默认标签初始化控件。

更新：

我已经按如下方式更新了代码，但是 addButtons 方法中的所有内容仍然被执行，因为我有一个 NSLog 要检查，但是按钮标题仍然保持在 viewdidload 中创建的状态

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
// Add a label to the popover's view controller.
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
UIButton *button2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
ilManifestoAppDelegate *delegate = (ilManifestoAppDelegate*)[[UIApplication sharedApplication] delegate];
[button addTarget:self
           action:@selector(button1Week:)
 forControlEvents:UIControlEventTouchDown];
//    [button setTitle:priceWeekly forState:UIControlStateNormal];
button.frame = CGRectMake(0.0, 0.0, 200.0, 50.0);
[button2 addTarget:self
            action:@selector(button1Month:)
  forControlEvents:UIControlEventTouchDown];
//    [button2 setTitle:@"monthly subscription" forState:UIControlStateNormal];
button2.frame = CGRectMake(0.0, 55.0, 200.0, 50.0);
//    [self addButtons];
NSString *weekPrice = [NSString stringWithFormat:@"settimanale a %@",delegate.priceWeek];
[button setTitle:weekPrice forState:UIControlStateNormal];
[button2 setTitle:@"updated label 2" forState:UIControlStateNormal];
NSLog(@"week price %@", weekPrice);
[self.view addSubview:button];
[self.view addSubview:button2];
}

-(void)addButtons {
UIButton *button = [UIButton buttonWithType:UIButtonTypeInfoDark];
[button setTitle:@"modificato" forState:UIControlStateNormal];
[self.view addSubview:button];
NSLog(@"addButtons executed");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:38:57.547

在`viewDidLoad`你使用`button`and `button2`。在`addButtons`你使用`self.button`and `self.button2`。您是否确保这些按钮是相同的？

如果您还没有这样做，还可以放置一个断点`addButtons`以查看它是否真的被调用。

如果您没有仅使用代码放置它们，您是否还创建了 xib 中按钮的出口。

# image - CFDocument 显示错误的图像

> ID：14848956
> 
> 赞同：2
> 
> 时间：2013-02-13T08:03:17.363
> 
> 标签：image, coldfusion, pdf-generation

我正在使用 ColdFusion 9 创建一个包含多个二维码的 PDF。

在生成 PDF 文档之前已成功创建图像。这些图像彼此不同，但它们具有相似的文件大小和分辨率。

现在，我为之前生成的每个图像生成 HTML 并将其放入 PDF 文档中。路径是正确的——我检查过了。

```
<cfset amount="6" />
<cfdocument
    format="pdf"
    unit="cm"
    marginTop="0.5"
    marginLeft="0.5"
    marginRight="0.5"
    marginBottom="0.5"
    pageType="A4"
    filename="#path##name#.pdf">
     <cfoutput>
        <cfloop from="1" to="#amount#" index="i">
            <cfset filename = "#name#_#i#" />
            <img src="file://#path#codes/#filename#.png" style="width: 3.58cm; margin: 0 0.2cm 0.5cm;">
            #path#codes/#filename#
        </cfloop>
    </cfoutput>
</cfdocument> 
```

但是有一个问题：只有第一张图片能正常显示。其他所有图像都是第一个图像的相同副本。所以我在这个 PDF 文档中得到了 6 张相同的图像。

让我指出路径是正确的。它不是同一条路径的 6 倍。

![示例](../Images/62019c1d31776b9026de43df74bd1dbb.png)

一些完全不同的图像正确显示。我认为 Coldfusion 在显示几乎相同（文件大小、分辨率）的图像方面存在一些问题。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:14:54.983

解决了这个问题。

ColdFusion 中存在 CFDocument 和 PNG 条形码图像的问题。我将它们转换为 JPG，一切都按预期工作。

```
<cfset amount="6" />
<cfdocument
    format="pdf"
    unit="cm"
    pageType="A4"
    filename="#path##name#.pdf">
     <cfoutput>
        <cfloop from="1" to="#amount#" index="i">
            <cfset filename = "#name#_#i#" />
            <cfimage
                action="convert"
                destination="#path#codes/#filename#.jpg"
                source="#path#codes/#filename#.png" />
            <img src="file://#path#codes/#filename#.jpg" style="width: 3.58cm; margin: 0 0.2cm 0.5cm;">
        </cfloop>
    </cfoutput>
</cfdocument> 
```

感谢您的帮助！

# c++ - 为什么类成员变量在 PPL 中不允许为 [ &A, &B ]

> ID：14848972
> 
> 赞同：1
> 
> 时间：2013-02-13T08:04:25.490
> 
> 标签：c++, parallel-processing, ppl

在编译VS之前说

错误成员“test::A”不是变量

错误成员“test::B”不是变量

代码：

```
#include <iostream>
#include <ppl.h>

using namespace concurrency;
using namespace std;

class test
{
        static double A[ 3 ][ 3 ];
        static double B[ 3 ][ 3 ];
public:
        int test_function();
};

double test::A[ 3 ][ 3 ] = { {  0.7,  -0.2,   -1   },
                             { -4,    -2,     -2   },
                             { -0.4,   1.7,   -1.8 } };

double test::B[ 3 ][ 3 ] = { {  0.6,  -1.2,    1.1 },
                             {  2,     3,     -2   },
                             { -1,     0.05,   0.05} };

int test::test_function()
{
    parallel_for ( 0, 100, [ &A, &B ]( int y ) {
        for ( int x = 0; x < 100; x++ ) {

            for ( int i = 0; i < 3; i++ )
                for ( int j = 0; j < 3; j++ )
                     A[ j ][ i ] += A[ j ][ i ] * B[ j ][ i ];

        }
    } );
}

int main()
{
        return 0;
} 
```

错误：

> 'test::A': lambda 捕获变量必须来自封闭函数范围
> 
> 'test::B': lambda 捕获变量必须来自封闭函数范围

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:15:00.553

捕获 static 没有意义，因为它们是*类 static*。在函数中定义的 lambda 与在其中定义的函数具有相同的可访问性。因此，在该函数中可见的变量（如类私有）在 lambda 中可见。

类静态成员仍然存在，即使函数被传递到别处或超出当前范围。

所以只需`[]`在你的 lambda 中使用而不是`[ <stuff> ]`.

# haskell - Haskell：显示实例歧义

> ID：14848978
> 
> 赞同：1
> 
> 时间：2013-02-13T08:05:00.387
> 
> 标签：haskell

我正在尝试编写一个显示实例来显示格式正确的公式，但是在模仿整个语法之后，我仍然面临与下面相同的错误。

```
Hugs> :load "C:\\Users\\Devil\\Desktop\\CASESTUDY1.hs"
ERROR file:.\CASESTUDY1.hs:15 - Ambiguous variable occurrence "show"
*** Could refer to: CASESTUDY1.show Hugs.Prelude.show 
```

下面是我的 .hs 文件的内容，包括数据类型和相关的显示实例。

```
module CASESTUDY1

where 

data Wff =   VAR String 
            | NEG Wff
            | AND Wff Wff 
            | OR Wff Wff
            | IMPL Wff Wff

instance Show Wff where
show (VAR x) = x
show (NEG x) = "~" ++ show(x)
show (AND x y) = "(" ++ show(x) ++ "^" ++ show(y) ++ ")"
show (OR x y) = "(" ++ show(x) ++ "v" ++ show(y) ++ ")"
show (IMPL x y) = "(" ++ show(x) ++ "-->" ++ show(y) ++ ")" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T08:13:07.513

在 haskell 中，空格很重要。您需要缩进`show`属于您的`Show`.

```
instance Show Wff where
   show (VAR x)     = show x
   show (NEG x)     = "~" ++ show x
   show (AND x y)   = "(" ++ show x ++ "^" ++ show y ++ ")"
   show (OR x y)    = "(" ++ show x ++ "v" ++ show y ++ ")"
   show (IMPL x y)  = "(" ++ show x ++ "-->" ++ show y ++ ")" 
```

此外，您不需要括号来传递要显示的参数。`show(x)`应该是`show x`。

* * *

如果您正在学习 haskell，我推荐这些特殊资源：

*   [向您学习 Haskell for Great Good](http://learnyouahaskell.com "向您学习 Haskell for Great Good")
*   [真实世界的 Haskell](http://book.realworldhaskell.org "真实世界的 Haskell")

# apple-push-notifications - Apple 推送通知服务费用

> ID：14848983
> 
> 赞同：1
> 
> 时间：2013-02-13T08:05:38.713
> 
> 标签：apple-push-notifications

我没有发现任何关于向我的 iPhone 应用程序推送通知的成本。我想向我的应用程序发送推送通知，但我没有找到任何关于价格的信息。

发送推送通知的费用是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:14:11.640

如果你有自己的服务器，你可以免费做。根据您使用的语言，有很好的库可用。例如，对于 JVM 语言，您可以使用[JavaPNS](http://code.google.com/p/javapns/)。

也可以使用专门从事此工作的外部公司。我发现[UrbanAirship](http://urbanairship.com)非常适合我的需求，并且有免费使用等级（我与他们没有任何关联）。

底线：如果您使用外部供应商，价格会有所不同，您可以在他们的网站上找到它们，或者通过询问。Apple 不会向您收取任何费用。自己做是免费的。

# javascript - 如何在淘汰赛js中设置json值？

> ID：14848986
> 
> 赞同：0
> 
> 时间：2013-02-13T08:05:52.233
> 
> 标签：javascript, jquery, ajax, json, knockout.js

我有一项任务要做 knockout.js。但我无法将文本框值创建为 json 对象。我有一个具有字段名称和年龄的模型学生。为了创建新学生，我无法将值设置为 json 对象。新列表.html.erb

```
 <script>
$(document).ready(function() {
var viewModel = {
    firstName: ko.observable(),

    _age: ko.observable(),
    validationMessage: ko.observable()
};
var self = this;
self.save = function() {
        var dataToSave =firstName: ko.observable();
                        _age: ko.observable();
                        alert("Could now send this to server: " + JSON.stringify(viewModel));
                        }
viewModel.Age = ko.dependentObservable({
    read: viewModel._age,
    write: function (value) {
        if (!isNaN(value)) {
            this._age(value);
            this.validationMessage("");
        }
        else {
            this.validationMessage("Age must be a number!");
        }
    },

    owner: viewModel

});

ko.applyBindings(viewModel);
});
</script>
<h1>Testing</h1>
Name: <input type="text" data-bind="
                                    value: firstName,
                                    valueUpdate : 'afterkeydown'
                                    "/>
<br />

Age: <input type="text" data-bind="value: Age, valueUpdate : 'afterkeydown'" />

<Br /> 
<span data-bind="text: validationMessage" style="color:Red"></span>

<Br />
<button data-bind='click: save'>Submit</button>
<Br /> 
```

但它显示了一些错误。如何创建一个 json 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:26:04.503

您可以通过以下方式将模型转换为 json

```
var dataToSave = {
                    firstName: viewModel.firstName(),
                    _age: viewModel._age()
                 } 
```

在这里您的任务已解决：[解决方案](http://jsfiddle.net/uMgWX/)

# c++ - 用strtok拼接cstrings，仅适用于第一次执行循环

> ID：14848987
> 
> 赞同：0
> 
> 时间：2013-02-13T08:05:58.590
> 
> 标签：c++, c, cstring, strtok, arrays

我正在尝试使用 strtok 将读入 cstring 的行拼接成单个字符串。是的，我知道使用字符串对象可以更轻松地完成此操作，但我不允许使用它们。当此代码执行时，它在第一行完美运行，然后它继续只在循环的每次迭代的同一行上运行。文件被成功读入'line'字符数组veriable，由 cout << line << endl; 证明。然而 strtok 和第二个 while 循环继续分割每次读取的第一行。每行包含一个 first_name last_name ID 和六个等级。我想我会重写它并在空白处使用 getline 定界并读取单个字符串，但是有谁知道为什么 strtok 只在循环的每次连续迭代中拼接第一个字符串？

*这是一个代码段，假设所有变量都在别处正确声明*

```
 while(!fin.eof())
    {//while open
    fin.getline(line, 40, '\n');
    cout << line << endl;
    ptr = strtok (line, " ");

    while(ptr != NULL)
        {
        if(c==0)
          sprintf(firstname, "%s", ptr);
        if(c==1)
          sprintf(lastname, "%s", ptr);
        if(c==2)
          sprintf(id, "%s", ptr);
        if(c==3)
          sprintf(grade1, "%s", ptr);
        if(c==4)
          sprintf(grade2, "%s", ptr);
        if(c==5)
          sprintf(grade3, "%s", ptr);
        if(c==6)
          sprintf(grade4, "%s", ptr);
        if(c==7)
          sprintf(grade5, "%s", ptr);
        if(c==8)
          sprintf(grade6, "%s", ptr);
        ptr = strtok (NULL, " ");
        if(ptr == NULL)
          break;
        c++;
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:11:56.750

`c`离开内部循环后，您不会重置变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:23:05.367

作为@Joachim Pileborg，主要问题是 reset `c`。在进入内部循环之前初始化它`c=0;`并`else`为每个`if`除了最后一个之外的每个添加和可能更明确。

# c# - 将 XML 文件中的单个节点读入 listBox（WP7、Silverlight、C#）

> ID：14848988
> 
> 赞同：2
> 
> 时间：2013-02-13T08:06:00.707
> 
> 标签：c#, xml, silverlight, windows-phone-7, linq-to-xml

我想从下面的 URL 中获取相似艺术家的名字，并将它们显示在 listBox 中。

[http://ws.audioscrobbler.com/2.0/?method=artist.getsimilar&artist=](http://ws.audioscrobbler.com/2.0/?method=artist.getsimilar&artist=) **ARTISTNAMEHERE** &api_key=ff1629a695c346cc4b2dd1c41fcd4054

到目前为止，从其他人的问题来看，我已经阅读了 XML 文件：

```
private void PhoneApplicationPage_Loaded(object sender, RoutedEventArgs e)
    {
        WebClient wc = new WebClient();
        wc.DownloadStringCompleted += HttpCompleted;
        wc.DownloadStringAsync(new Uri("http://ws.audioscrobbler.com/2.0/?method=artist.getsimilar&artist=ARTISTNAMEHERE&api_key=ff1629a695c346cc4b2dd1c41fcd4054"));
    }

    private void HttpCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error == null)
        {
            XDocument xdoc = XDocument.Parse(e.Result, LoadOptions.None);

            // do something with the XDocument here
        }
    } 
```

正如我之前所说，我想从该页面获取艺术家姓名，这是每个名称节点并将它们显示在列表框中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:12:53.647

这应该这样做：

```
 XElement artists = xdoc.Root.Element("similarartists");
        if (artists != null)
        {
            IEnumerable<string> names = artists
                .Elements("artist")
                .Select(el => el.Element("name").Value);
        } 
```

它使用`System.Xml.Linq`命名空间中的方法，这些方法用于通过使用 LINQ 检索 XML 数据。

# cuda - cudaMemset 行号

> ID：14848989
> 
> 赞同：0
> 
> 时间：2013-02-13T08:06:01.070
> 
> 标签：cuda, nsight

我写了一个 CUDA 应用程序。我的应用程序调用内核大约 40 次。在对其进行分析之后，在每个内核完成它的执行之后，都会有一个`cudaMemset()`. 而这些 cudaMemsets 正在消耗大量时间。`cudaMemset`但是，我的文件中没有任何`.cu`内容。CUDA API 是否在内部调用`cudaMemset`？还有什么方法可以知道 CUDA 分析器中的行号吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:09:55.893

Nsight Visual Studio Edition Trace Activity 支持在所有 CUDA Runtime 和 CUDA Driver API 调用上捕获调用堆栈。

**为 CUDA 运行时 API 调用启用调用堆栈跟踪**

1.  在**Nsight**菜单中执行**Start Performance Analysis**。（Nsight 中的**新分析活动< 3）**
2.  在 Activity Editor 中展开 Trace Settings 部分和 CUDA 部分。
3.  **在Runtime API Trace**旁边的 CUDA 部分中，将**Call Stack Trace**设置为**Always**。
4.  运行分析活动。

**查看 CUDA 运行时 API 调用的调用堆栈跟踪**

1.  在捕获的分析报告中，单击左上角的报告页面选择器并选择页面**CUDA Runtime API Calls**。
2.  在表中单击感兴趣的 API 调用。
3.  在报告页面左下方的相关窗格树中，单击**Stack Trace**。

上述过程可以对其他 API 域进行。相关窗格还可用于确定生成内核启动或内存副本的 API 调用和调用堆栈。

![Nsight Visual Studio Edition 3.0 RC1 分析报告显示调用堆栈跟踪](../Images/5ab98088a0abdb80298e3af61413c85a.png)

# android - Air iOS/Android 推送通知记住应用程序何时启动

> ID：14848997
> 
> 赞同：0
> 
> 时间：2013-02-13T08:06:17.297
> 
> 标签：android, ios, actionscript-3, air

我有一个为 iOS 和 Android 构建的应用程序，它有推送通知。一切都很好，但是我想知道是否有办法将推送通知的数据存储在应用程序中，以便当用户在收到通知后启动应用程序时，我可以再次向他们显示消息？

基本上我允许用户在他们的朋友之间分享信息和/或聊天。如果他们在应用程序处于后台时收到通知，它会作为正常的推送消息通过，但是当他们启动应用程序时，我想将他们引导到聊天功能以再次查看消息。

我将发送的消息存储在远程数据库中，但由于它们已经收到有效负载，因此应用程序调用远程数据库以检索相同的消息没有多大意义。

我在 AS3 和 Air 3.5 中使用 Distriqt 的扩展。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:12:48.260

几周前我问过 Distriqt 对同一件事的支持，他们解释说在应用程序关闭时无法获取推送通知消息的信息，所以他们建议这样做：-当用户打开应用程序时，你打电话给你的服务器检查他们是否没有遗漏任何东西，并从那里获取数据。如果有推送，您会显示推送消息，就好像它是在前台应用程序收到的一样。

这有点棘手，不是很令人满意，但它可以工作..只要用户遵循路径。如果您的用户收到推送并选择不打开您的应用程序，他下次打开时仍会在您的应用程序中收到推送消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T00:20:23.753

我也很难解决这个问题，但我找到了解决方案！基本上，如果用户通过 Invoke 事件中的通知启动应用程序（不在后台运行），而不是通常的 Notification 事件。所以这样做：

```
NativeApplication.nativeApplication.addEventListener(InvokeEvent.INVOKE, invoked);

private function invoked(evt:InvokeEvent):void
{
    if (evt.reason == InvokeEventReason.NOTIFICATION)
    {
        var payload:Object = Object(evt.arguments[0]);
        // do stuff
    }
} 
```

差不多就是这样。此博客文章中有更多详细信息：http: [//blogs.adobe.com/airodynamics/2012/05/29/push-notifications-support-in-ios/](http://blogs.adobe.com/airodynamics/2012/05/29/push-notifications-support-in-ios/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-05T05:06:44.327

```
NativeApplication.nativeApplication.addEventListener(InvokeEvent.INVOKE, invoked); 
```

不适用于 Android 推送通知。Android一直以InvokeEventReason.standard开头，所以收不到消息。它仅适用于 iOS。

# java - 为什么没有在构造函数上定义inheritedDoc？

> ID：14848999
> 
> 赞同：20
> 
> 时间：2013-02-13T08:06:24.800
> 
> 标签：java, documentation, javadoc

我想知道 javadoc 不支持inheritedDoc on 是否有任何正当理由`constructors`。假设我有

```
class A
{
/**
 * Constructor of A
 */
A(){}   

/**
 * Does something
 */
public void method(){}
}

class B extends A
{
/**
 * {@inheritDoc}
 */
B(){ super();}

/**
 * {@inheritDoc}
 */
public void method(){}
} 
```

对于方法`method`，我可以继承javadoc，但为什么不能申请`constructors`呢？除非我使用 inheritDoc 标记，否则 javadoc 不会被继承，这意味着我很清楚我想重用文档。什么应该阻止我这样做`constructors`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-13T08:11:48.680

> 什么应该阻止我为构造函数这样做？

大概是构造函数不是继承的事实。虽然它们*通常*最终具有与超类中的构造函数相同的参数（具有相同的含义），但它与方法之间的关系并不那么清晰。

我可以看到实际价值，但同样我可以看到为什么实际上没有继承的东西不应该`@inheritDoc`可用。如果您可以专门继承*一些*文档，那就太好了-例如，如果您要将参数值直接传递给超类构造函数，那么能够有效地链接到该文档会很好...

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-03-10T15:44:31.023

我喜欢使用以下符号来解决这个问题：

```
public class TestReflectionHelper extends TestReflectionHelperCommon {

    /**
     * @see TestReflectionHelperCommon#TestReflectionHelperCommon()
     */
    public TestReflectionHelper() {
        super();
    }

    /**
     * @see TestReflectionHelperCommon#TestReflectionHelperCommon(Class, String,
     *      Class...)
     */
    public TestReflectionHelper(final Class<?> targetClass,
            final String targetMethod, final Class<?>... parameterTypes) {
        super(targetClass, targetMethod, parameterTypes);
    }

    ...
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-13T08:11:26.810

好吧，这不是一个很好的理由，但这是我的理解：

如果您实现了一个接口或覆盖了一个方法，那么您实际上是在实现在其他地方（在接口或超类中）描述的东西，并且很有可能您没有任何东西可以添加到前面的描述中，所以您得到的`@inheritDoc`工具是让您重用该文本（如果需要，仍然可以添加）。

另一方面，构造函数是一种不同的动物：如果它正在创建接口的实现，那么该实现与另一个实现不同肯定是有原因的。如果您正在创建一个继承类，则必须将某些内容添加到父类中。

哦，顺便说一下，有一个2003 年的[功能请求](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4810216)；）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-13T12:49:34.850

这只是 JavaDoc 的一个限制。就像[Miquel 指出的那样](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4810216)，它有一个功能要求，但 10 年来没有人费心去实现它。纯粹的懒惰，我说。

因为构造函数不是在 Java 中继承的，所以你[被迫](https://stackoverflow.com/questions/1644317/java-constructor-inheritance)在子类中复制构造函数。这已经足够重复了，但是现在由于 JavaDoc，您也被迫复制文档。

一个好的文档工具应该可以帮助您消除重复，就像一门好的编程语言一样。