# StackOverflow 问答 14818000-14818999

# mysql - 删除表格中的所有行，但不删除最新的 X with 子句

> ID：14818003
> 
> 赞同：1
> 
> 时间：2013-02-11T17:58:14.627
> 
> 标签：mysql, sql

我有我的桌子`transfer`

```
| id  | fix | part |       created       |
|  +  |  +  |   +  |          +          |
|  +  |  +  |   +  |          +          |
| 238 |  1  |   1  | 2012-02-10 21:15:48 |
| 239 |  9  |   1  | 2012-02-11 12:36:17 |
| 240 |  1  |   2  | 2012-02-12 23:35:28 |
| 241 |  2  |   1  | 2012-02-13 06:17:35 |
| 242 |  4  |   2  | 2012-02-14 17:45:42 |
| 243 |  1  |   1  | 2012-02-15 20:32:58 |
| 244 |  2  |   2  | 2012-02-16 12:52:19 |
| 245 |  3  |   1  | 2012-02-17 22:35:56 |
| 246 |  1  |   2  | 2012-02-18 09:11:23 |
| 247 |  3  |   1  | 2012-02-19 19:46:44 |
| 248 |  1  |   1  | 2012-02-20 02:30:14 |
| 249 |  2  |   1  | 2012-02-21 13:36:49 |
| 250 |  1  |   3  | 2012-02-22 21:35:34 |
| 251 |  1  |   1  | 2012-02-23 19:25:12 |
| 252 |  1  |   2  | 2012-02-24 18:53:43 |
| 253 |  1  |   3  | 2012-02-25 21:05:28 |
| 254 |  3  |   1  | 2012-02-26 12:33:35 |
| 255 |  1  |   1  | 2012-02-27 18:35:18 |
| 256 |  4  |   1  | 2012-02-28 22:15:27 |
| 257 |  4  |   1  | 2012-03-01 12:22:17 |
| 258 |  2  |   2  | 2012-03-02 10:19:24 |
| 259 |  9  |   1  | 2012-03-03 18:45:46 |
| 260 |  1  |   2  | 2012-03-04 23:19:07 |
| 261 |  2  |   1  | 2012-03-05 09:11:11 |
| 262 |  1  |   1  | 2012-03-06 21:25:29 |
|  +  |  +  |   +  |          +          |
|  +  |  +  |   +  |          +          |
| 901 |  1  |   3  | 2012-04-30 22:15:27 |
| 902 |  3  |   1  | 2012-05-01 12:22:17 |
| 903 |  2  |   1  | 2012-05-02 10:19:24 |
| 904 |  1  |   1  | 2012-05-03 18:45:46 |
|  +  |  +  |   +  |          +          |
|  +  |  +  |   +  |          +          | 
```

并希望保持最新的 ( `created`) 3 行的每一个相同的`fix`列`part`，间隔为.. 例如 3 个月。如果只有 1 或 2 行，则显示它们！`id`（例如见242）

我尝试了几件事并在 stackoverflow 上进行了搜索，但没有找到带有额外列 ( `part`) 的解决方案。

处理后表格`transfer`应如下所示：

```
| id  | fix | part |       created       |
| 904 |  1  |   1  | 2012-05-03 18:45:46 |
| 262 |  1  |   1  | 2012-03-06 21:25:29 |
| 255 |  1  |   1  | 2012-02-27 18:35:18 |
| 260 |  1  |   2  | 2012-03-04 23:19:07 |
| 252 |  1  |   2  | 2012-02-24 18:53:43 |
| 246 |  1  |   2  | 2012-02-18 09:11:23 |
| 901 |  1  |   3  | 2012-04-30 22:15:27 |
| 253 |  1  |   3  | 2012-02-25 21:05:28 |
| 250 |  1  |   3  | 2012-02-22 21:35:34 |
| 903 |  2  |   1  | 2012-05-02 10:19:24 |
| 261 |  2  |   1  | 2012-03-05 09:11:11 |
| 249 |  2  |   1  | 2012-02-21 13:36:49 |
| 258 |  2  |   2  | 2012-03-02 10:19:24 |
| 244 |  2  |   2  | 2012-02-16 12:52:19 |
| 902 |  3  |   1  | 2012-05-01 12:22:17 |
| 254 |  3  |   1  | 2012-02-26 12:33:35 |
| 247 |  3  |   1  | 2012-02-19 19:46:44 |
| 257 |  4  |   1  | 2012-03-01 12:22:17 |
| 256 |  4  |   1  | 2012-02-28 22:15:27 |
| 242 |  4  |   2  | 2012-02-14 17:45:42 |
| 259 |  9  |   1  | 2012-03-03 18:45:46 |
| 239 |  9  |   1  | 2012-02-11 12:36:17 | 
```

为了更好地理解`fix`，我订购了这个例子。`part`

也许有人可以给我一个提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:15:55.530

你可以尝试这样的事情：

```
delete from transfer
where id not in (
  select id
  from (
    select id, fix, part, created,
    (select count(*) from transfer where created >= a.created and fix = a.fix and part = a.part) as rank
    from transfer a
  ) as t
  where rank <= 3
); 
```

我正在使用相关子查询对行进行排名，这将具有[三角形连接](http://www.sqlservercentral.com/articles/T-SQL/61539/)的固有性能缺陷（SQL Server 文章，但仍然适用）。

这是一个**[SqlFiddle 演示](http://www.sqlfiddle.com/#!2/4ba1a/1)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:22:07.757

您可以使用以下方法获取要删除的 id 列表：

```
select t.*,
       group_concat(id separator ',' order by created desc) as ids
from transfer
where created >= curdate - interval 3 month
group by fix, part 
```

您可以将其转换为删除：

```
delete from t
    where not exists (select 1
                  from (select fix, part,
                               group_concat(id separator ',' order by created desc) as ids
                        from transfer
                        where created >= curdate - interval 3 month
                        group by fix, part
                       ) t1
                  where t.id not in (substring_index(ids, 1), substring_index(ids, 2), substring_index(ids, 3))
                 ) 
```

尽管 MySQL 对在子查询中使用同一张表进行删除很挑剔，但它确实允许使用多个级别的子查询。

# struts2 - 如何启用 struts2 约定插件

> ID：14818010
> 
> 赞同：1
> 
> 时间：2013-02-11T17:58:43.117
> 
> 标签：struts2

这个问题似乎很愚蠢，因为我正确地误解了该文件。基本上我只想根据这个[指令](http://struts.apache.org/2.1.6/docs/convention-plugin.html)运行 hello-world 无操作示例，只需将 hello.jsp 文件添加到***WEB-INF/content 中***，然后运行***​​localhost:8080/test/hello***，但 Struts 一直显示异常***java.lang。 NoSuchMethodException：com.opensymphony.xwork2.ActionSupport.index()***。

所以我想知道在运行之前需要做任何配置。我找不到任何关于 hello-world 示例的配置的信息。

谁能建议我正确的方法？谢谢

***更新：***这里是项目树，没有任何动作，没有任何花哨。

```
├── pom.xml
└── src
    └── main
        ├── resources
        │   └── struts.xml
        └── webapp
            ├── WEB-INF
            │   ├── content
            │   │   └── hello.jsp
            │   └── web.xml
            └── index.jsp 
```

pom.xml 中的依赖项

```
<dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-core</artifactId>
        <version>2.3.8</version>
    </dependency>

    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-rest-plugin</artifactId>
        <version>2.3.8</version>
    </dependency>

    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-convention-plugin</artifactId>
        <version>2.3.8</version>
    </dependency>

    <dependency>
        <groupId>org.apache.struts</groupId>
        <artifactId>struts2-config-browser-plugin</artifactId>
        <version>2.3.8</version>
    </dependency>

    <dependency>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty</artifactId>
        <version>6.1.26</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T07:50:16.750

您已经将 Struts 2 Convention 插件与 Struts 2 REST 插件混合在一起，这就是 Struts 2 寻找名为 index() 的方法（REST 的默认方法）的原因。

删除 REST 插件 - `struts2-rest-plugin`- 一切都应该按预期工作。

如果您想将约定与 REST 混合，请参阅文档，例如。您可以`struts.rest.namespace`用来区分应用程序的 REST 部分和普通的 Web 应用程序部分。

**编辑**

如果你想混合使用双方——一个普通的 web 应用程序和 REST 端点——你可以考虑使用[PrefixBasedActionMapper](http://struts.apache.org/core-developers/action-mapper.html#prefixbasedactionmapper)，它允许每个 url 使用不同的映射器。另外，您应该使用`PrefixBasedActionProxyFactory`适当的工厂来构造与 url 匹配的操作。

# python - Python 2.7 和 Python 3.3 之间的函数类型检查

> ID：14818011
> 
> 赞同：1
> 
> 时间：2013-02-11T17:58:48.013
> 
> 标签：python, function, types, python-3.x, python-2.7

在我的函数中，我检查输入的类型以使其有效（例如 - 对于检查“n”素数的函数，我不希望将“n”作为字符串输入）。检查`long`s 和`int`s 时会出现问题。在 Python 3.3 中，他们删除了`long`-type 编号，因此出现了问题：

```
def isPrime(n):
    """Checks if 'n' is prime"""
    if not isinstance(n, int): raise TypeError('n must be int')
    # rest of code 
```

这适用于 v2.7 和 v3.3。但是，如果我在 Python 2.7 程序中导入此函数，并`long`为 'n' 输入一个 -type 数字，如下所示：`isPrime(123456789000)`，它显然会引发 a`TypeError`因为 'n' 的类型是`long`，而不是`int`。

`long`那么，我如何检查它对于s 和s 的v2.7 和 v3.3 是否都是有效输入`int`？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T18:06:53.410

我能想到的一个方法是：

```
from numbers import Integral

>>> blah = [1, 1.2, 1L]
>>> [i for i in blah if isinstance(i, Integral)]
[1, 1L] 
```

**编辑**（在@martineau 的富有洞察力的评论之后）

蟒蛇 2.7：

```
>>> map(type, [1, 1.2, 2**128])
[<type 'int'>, <type 'float'>, <type 'long'>] 
```

蟒蛇 3.3：

```
>>> list(map(type, [1, 1.2, 2**128]))
[<class 'int'>, <class 'float'>, <class 'int'>] 
```

该示例仍然使用`isinstance(n, numbers.Integral)`但更加连贯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:05:59.893

```
def isPrime(n):
    """Checks if 'n' is prime"""
    try:
        n = int(n)
    except:
        raise TypeError('n must be int')
    # rest of code 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-11T19:36:25.703

来自：[http ://docs.python.org/3.1/whatsnew/3.0.html#integers](http://docs.python.org/3.1/whatsnew/3.0.html#integers)

sys.maxint 常量已被删除，因为整数值不再有限制。但是，sys.maxsize 可以用作大于任何实际列表或字符串索引的整数。它符合实现的“自然”整数大小，并且通常与同一平台上先前版本中的 sys.maxint 相同（假设相同的构建选项）。

```
if not isinstance(n, int) or n > sys.maxsize: raise TypeError('n must be int') 
```

可能适用于区分 int 和 long。

# xcopy - 脚本：自动将文件从一个文件夹移动到另一个文件夹

> ID：14818012
> 
> 赞同：3
> 
> 时间：2013-02-11T17:58:49.133
> 
> 标签：xcopy

我想要一个脚本来监视文件夹，当添加 .mp3 或 .m4a 文件时，它会自动将其复制到另一个文件夹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:32:07.217

这可以简单地使用 PowerShell 完成。我假设您希望从源目录中删除复制的文件，以便尚未复制源目录中的任何文件。

语句`start-sleep -s 30`暂停 30 秒。

```
for (;;) {
    start-sleep -s 30
    move-item c:\source\*.mp3 c:\destination
    move-item c:\source\*.m4a c:\destination
} 
```

# ruby-on-rails - rails 不会将_data 作为文件发送

> ID：14818015
> 
> 赞同：12
> 
> 时间：2013-02-11T17:58:58.433
> 
> 标签：ruby-on-rails, ruby-on-rails-4

我在使用 Rails 方法时遇到问题：`send_data`

这是我的行动：

```
def export
  send_data(current_user.contacts.to_csv,
    type: 'text/csv; charset=utf-8; header=present',
    disposition: 'attachment; filename=contacts.csv'
  )
end 
```

这不会提示下载，它只是在屏幕上呈现结果。`pow`和`thin`服务器我都试过了。

我无法弄清楚我做错了什么？

我在用着`rails 4.0.0.beta`

编辑：

卷曲标题：

```
< HTTP/1.1 200 OK
< X-Frame-Options: SAMEORIGIN
< X-XSS-Protection: 1; mode=block
< X-Content-Type-Options: nosniff
< X-UA-Compatible: chrome=1
< X-XHR-Current-Location: /contacts/export
< Content-Disposition: attachment; filename=contacts.csv
< Content-Transfer-Encoding: binary
< Content-Type: text/csv; charset=utf-8; header=present
< Cache-Control: private
< ETag: "48d3d8bd1c8d25cafb82ab705e4875ab"
< Set-Cookie: request_method=GET; path=/
< X-Request-Id: c2588883-f3f9-4f68-8a8c-0de758c47288
< X-Runtime: 0.185206
< Connection: close
< Server: thin 1.5.0 codename Knife 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-05-09T13:12:47.373

这里的答案适用于 turbolinks classic。较新版本的 turbolinks 有一个较新的符号：

```
<a href="/" data-turbolinks="false">Disabled</a> 
```

[https://github.com/turbolinks/turbolinks#disabling-turbolinks-on-specific-links](https://github.com/turbolinks/turbolinks#disabling-turbolinks-on-specific-links)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-12T07:18:38.950

我想到了。

是涡轮链接把这一切搞砸了。我将 data-no-turbolink 添加到导出链接，现在它按预期工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T18:26:58.290

[send_data](http://apidock.com/rails/ActionController/Streaming/send_data)有一个选项散列，因此类型、处置和文件名需要在散列中设置：

```
def export
  send_data(current_user.contacts.to_csv,
  type: 'text/csv', disposition: 'attachment', filename: 'contacts.csv')
end 
```

# jquery - 失败时触发 JQuery 验证

> ID：14818019
> 
> 赞同：1
> 
> 时间：2013-02-11T17:59:06.400
> 
> 标签：jquery, 4d-database

好的，我这几天一直在尝试做一些感觉应该很简单的事情。基本上我有一个表单设置。目前需要检查 4d 数据库中的电子邮件地址，如果存在，则发布一条消息，说明该电子邮件地址已经存在。我正在尝试创建在发生这种情况时打开对话框的东西。所以基本上当所需电子邮件地址的规定失败时，对话框应该打开。

当单个字段条目成功或失败时发生某些事情时，是否有某种方式使用 JQuery UI 来发生这样的事情？如果有人可以简单地指出我正确的方向，那将是一个很大的帮助。

这是对话框。

```
$( "#emailDuplicateDialog" ).dialog({
resizable: false,
height:140,
width: 575,
modal: true,
    buttons: {
"Go to Login Page": function () {
$(this).dialog("close");
location = "Login.a4d"
},
} 
```

这是代码，这是基于我想废弃的 Jquerytools 版本，因为我一生都无法让它发挥作用，并且正在寻找一种替代方法。当然，如果有人能指出我的方向，使其发挥作用。我很乐意在这方面坚持到底。

```
$("#Signup_AgentEmail_T").bind("onFail", function(e, errors)  {

// we are only doing stuff when the form is submitted
if (e.originalEvent.type == 'Keyup') {

        $('#emailDuplicateDialog').dialog('open');  

} 
```

});

我之前使用 JQueryTools.org 示例中的 CSS 和 HTML 创建了一个 JSFiddle。原因是我网站上的表单是使用 Active4D 构建的，并且是从 4d 数据库中提取的，而不是使用 HTML 构建的。

[http://jsfiddle.net/vyJhz/3/](http://jsfiddle.net/vyJhz/3/)

# html - 将 css 应用于具有相同模式的元素

> ID：14818024
> 
> 赞同：3
> 
> 时间：2013-02-11T17:59:20.230
> 
> 标签：html, css, regex

我在 html 中有这个元素：

```
<div id="element0div0">
div 0
</div>
<div id="element1div1">
div 1
</div>
<div id="element2div2">
div 2
</div> 
```

我可以使用正则表达式之类的东西将 css 应用于元素 {n}div {n} 之类的元素吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T18:01:17.683

没有正则表达式可以区分数字和字母，但您绝对可以使用以下方法解决：

```
div[id^=element][id*=div] {
    /* css */
} 
```

这有缺陷，因为它将匹配以下（和更多）`id`字符串：

*   元素div
*   elementSomeOtherStringdiv
*   elementdivSomeOtherString

我建议，考虑到您问题的性质，对您希望应用通用样式的所有元素简单地使用通用类名会更明智。

参考：

*   [CSS 属性选择器](http://www.w3.org/TR/selectors/#attribute-selectors)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T18:00:57.937

是的，你可以，但你必须使用 JavaScript。

**使用 jQuery：**

```
$('div').filter(function() {
   return this.id.match(/element[\d]+div[\d]+/)
}).css({color:'red'}); 
```

**使用香草js：**

```
for (var divs=document.getElementsByTagName('div'), i=0; i<divs.length; i++) {
    if (divs[i].id.match(/element[\d]+div[\d]+/)) divs[i].style.color="red";
} 
```

这假设您*需要*执行您所要求的操作，即将样式应用于由应用到其 id 的正则表达式找到的元素。大多数情况下，您可以找到更简单的解决方案，例如在构建 HTML 时添加一个类。

# ember.js - 使用参数创建可重用的 Ember.Select 控件

> ID：14818026
> 
> 赞同：0
> 
> 时间：2013-02-11T17:59:40.257
> 
> 标签：ember.js

我想创建一个专门的选择控件视图，它应该只是添加一些功能。为简单起见，我只想添加一个标题。

控制/视图：

```
window.App.ControlsSelectView = Ember.View.extend({
    templateName: 'controls/SelectView',
    title:"Hello Control",
    contentBinding: null
 }); 
```

匹配的html：

```
<div class="sub_heading">
    <h2>{{title}}</h2>
</div>
<div class="inner_12 input_wrapper custom_select">
    {{view Ember.Select
           multiple="true"
           contentBinding= "contentBinding" // how to pass parameters through?
           selectionBinding="content.tempSelectedFunctions"
           optionLabelPath="content.displayname"
           optionValuePath="content.id"
    }}
</div> 
```

用法应该是这样的：

```
{{ view App.ControlsSelectView 
    contentBinding="content.data.responsibilities" 
    selectionBinding="content.tempSelectedFunctions"
    title="content.responsibilitTitle"
}} 
```

问题是，它不能那样工作。以上可能吗？还是有更好的模式来创建简单的可重用控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:11:33.167

这篇文章帮助我走上了正确的轨道：

[从 ContentBinding 获取视图中的内容](https://stackoverflow.com/questions/12493693/get-content-in-view-from-contentbinding)

在控件视图的 html 中，我需要使用 view.propertyname 引用视图参数

工作解决方案：

HTML：

```
<div class="sub_heading">
    <h2>{{view.title}}</h2>
</div>
{{#if view.content}}
    <div class="inner_12 input_wrapper custom_select">
        {{view Ember.Select
               multiple="view.multiple"
               contentBinding= "view.content"
               selectionBinding="view.selection"
               optionLabelPathBinding="view.optionLabelPath"
               optionValuePathBinding="view.optionValuePath"
        }}
    </div>
{{/if}} 
```

控制视图

```
window.App.ControlsSelectView = Ember.View.extend({
    templateName: 'controls/SelectView'

}); 
```

用法：

```
{{view App.ControlsSelectView
        title = "Function"
        multiple="true"
        contentBinding="content.data.functions"
        selectionBinding="content.tempSelectedFunctions"
        optionLabelPath="content.displayname"
        optionValuePath="content.id"

}} 
```

# clojure - 如何使用 Clojure 并行计算大量数字的总和

> ID：14818033
> 
> 赞同：9
> 
> 时间：2013-02-11T17:59:50.993
> 
> 标签：clojure, parallel-processing

我试图弄清楚如何使用 clojure 将一个简单的操作有效地并行应用于一个大序列。我希望能够使用并行解决方案来利用我机器上的多个内核来实现一些加速。

我正在尝试将 pmap 与 partition-all 结合使用，以减少为输入序列中的每个项目创建未来的开销。不幸的是，partition-all 强制对每个分区序列进行完整评估。这会在我的机器上导致 OutOfMemoryError。

```
(defn sum [vs]
  (reduce + vs))

(def workers
  (+ 2 (.. Runtime getRuntime availableProcessors)))

(let
  [n 80000000
   vs (range n)]

  (time (sum vs))
  (time (sum (pmap sum (partition-all (long (/ n workers)) vs))))) 
```

如何将 sum 应用于大型输入集，并超越串行实现的性能？

**解决方案**

感谢 @Arthur Ulfeldt 指出 reducers 库。这是使用减速器的解决方案。此代码显示了在多核机器上运行时预期的性能改进。（注意：我已将 vs 更改为一个函数，以使时间更准确）

```
(require '[clojure.core.reducers :as r])

(let
  [n 80000000
   vs #(range n)]

  (time (reduce + (vs)))
  (time (r/fold + (vs))) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T18:47:18.493

使用 pmap 时，我发现需要**相当大的块来克服切换和未来的开销，**尝试使用 10,000 的块大小来实现与`+`. 潜在收益受限于生成块的开销。这会产生一个平衡可用核心和制作块所需时间的最佳值。在这种情况下，`+`作为工作负载，我无法使其比单线程选项更快。

如果您有兴趣在没有 pmap 的情况下执行此操作并可能使用 fork/join，请查看新的（ish）[reducers 库](http://clojure.com/blog/2012/05/08/reducers-a-library-and-model-for-collection-processing.html)

OOM 情况来自第一个测试实现惰性序列`(range n)`，然后保留该惰性序列，以便将其传递给第二个序列。

如果我通过定义一个函数使 + 函数变得更慢，`slow+`并使用单线程、块上的 pmap 和带有 forkJoin 的减速器之间的差异变得可见：

```
user> *clojure-version*                                                             
{:major 1, :minor 5, :incremental 0, :qualifier "RC15"}
(require '[clojure.core.reducers :as r]) 

(def workers
  (+ 2 (.. Runtime getRuntime availableProcessors)))

(defn slow+
  ([] 0)
  ([x] x)
  ([x y] (reduce + (range 100000)) (+ x y)))

(defn run-test []
  (let [n 8000]
   (time (reduce slow+ (range n)))
   (time (reduce slow+ (pmap #(reduce slow+ %) (partition-all (* workers 100) (range n)))))
   (time (r/fold slow+ (vec (range n)))))) 

user> (run-test)
"Elapsed time: 28655.951241 msecs" ; one thread
"Elapsed time: 6975.488591 msecs"  ; pmap over chunks
"Elapsed time: 8170.254426 msecs"  ; using reducer 
```

# javascript - 数据库填充链式下拉菜单

> ID：14818037
> 
> 赞同：1
> 
> 时间：2013-02-11T18:00:04.063
> 
> 标签：javascript, jquery

我创建了这个 JSP 页面，其中所有的下拉菜单都是从数据库中填充的。这个功能很好用，我已经测试过了。但是现在我需要添加一个函数，以便第三个下拉菜单（即 Forecast ISC）仅在我从第一个菜单中选择某个字段“类型”时才可见。到目前为止，我还没有创建任何 java 脚本，因为那是我需要什么帮助！任何建议或意见都会有所帮助！

```
 <form:form action="/analysis/analysisSummary" modelAttribute="shipData"
    method="POST" onChange = 'checkType()'>
    <br>
    <table width="100%">
        <tr>
            <td width="20%"></td>
            <td width="20%">Type:<form:select id="type" path="type">
            <form:option value="All">------ All ------   </form:option>
        <form:options items="${analysisEvents}" itemLabel="description"
                        itemValue="code" />
                </form:select>
            </td>

            <td width="20%">Forecast ISC:<form:select id="iscCode"
                    path="iscCode">
                    <form:option value="All">ALL</form:option>
                    <form:options items="${iscCodes}" />
                </form:select>
            </td>

            <td width="30%"><div style="visibility: hidden">
                    Actual ISC: <form:select id="sctry"
                    path="iscCode">
                    <form:option value="All">ALL</form:option>
                    <form:options items="${iscCodes}" />
                </form:select>
                </div>
            </td> 
```

HTML：

```
 <form id="shipData" onChange="checkType()" action="/analysis/analysisSummary" method="POST">
    <br>
    <table width="100%">
        <tr>
            <td width="20%"></td>
            <td width="20%">Type:<select id="type" name="type">
                    <option value="All">------ All ------</option>
                    <option value="U">Unanalyzed</option><option value="H">Pending</option><option value="F">True Hit</option><option value="C">Return Reason</option><option value="S">Parcel Returned</option><option value="T">Long Term Pending</option><option value="Z">Value &gt;2500</option>
                </select>
            </td>

            <td width="20%">Forecast ISC:<select id="iscCode" name="iscCode">
                    <option value="All">ALL</option>
                    <option value="JFK">JFK</option><option value="LAX">LAX</option><option value="MIA">MIA</option><option value="ORD">ORD</option><option value="SFO">SFO</option>
                </select>
            </td>

            <td width="30%"><div style="visibility: hidden">
                    Actual ISC: <select id="sctry" name="iscCode">
                    <option value="All">ALL</option>
                    <option value="JFK">JFK</option><option value="LAX">LAX</option><option value="MIA">MIA</option><option value="ORD">ORD</option><option value="SFO">SFO</option>
                </select>
                </div>
            </td>
            <td width="8%"></td>
        </tr>
    </table>
    <br>
    <table width="100%">
        <tr>

            <td width="20%"></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:31:18.847

```
 $(document).ready(function () {
        $('#shipData').find('#type').change(function () {
            if ($(this).val() == 'T') {
                $('#shipData').find('#divIscCode').show();  //To  show only drop down
                //$('#shipData').find('#sctry').val('All'); //To initial value if required.
            } else {
                $('#shipData').find('#divIscCode').hide();
            }
        }).trigger('change');
    }); 
```

用于[演示](http://jsfiddle.net/nanoquantumtech/5fjHc/)

# ruby - 如何将降压范围转换为数组？

> ID：14818040
> 
> 赞同：0
> 
> 时间：2013-02-11T18:00:18.417
> 
> 标签：ruby

我有一个范围`(1000..0)`，我正在使用`each`，但它没有做任何事情。我试图将其转换为数组并得到一个空数组。

我也试过`(1000..0).step(-1).each`了，它告诉我`step cant be negative`...

有什么方法可以使用`(1000..0).each`，所以它会做重复，或者转换成一个像这样的数组`[1000,999,998,...,0]`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T18:14:09.030

```
1000.downto(0).each { |i| ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:10:07.823

`(0..1000).to_a.reverse` 这将创建所需的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:10:56.883

您可以通过两种方式来执行此操作：

```
(0..1000).each do |i|
  n = 1000 - i
  # Use n for all calculations
end

(0..1000).to_a.reverse.each do |n|
  # Involves creating temporary array, but overhead is usually minor for
  # relatively small numbers.
end 
```

不要忘记您也可以在没有范围的情况下执行此操作：

```
1001.times do |i|
  n = 1000 - i
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T19:16:50.483

```
#1000 item array
step_down_array = 1000.step(0, -1).to_a

#small enumerator:
step_down = 1000.step(0, -1) 
```

# ruby-on-rails - 如何将根据关系计数过滤的结果返回到 RAILS 中的视图？

> ID：14818068
> 
> 赞同：5
> 
> 时间：2013-02-11T18:01:29.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3

基本上，我在模型上定义了一个属性，它根据另一个表中的值返回 true 或 false。

我想要的是让我的 Index 操作在控制器中只返回那些满足这个条件的结果。

我试过这个：

```
#What I've tried on my Controller:
def index
   @projects = Project.where(:is_available?)
end

#What I've on my Controller:
def index
   @projects = Project.all
end

#What I've on my Model:
def is_available?
   workers.count<2 ? true : false
end 
```

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T18:13:11.467

**为什么你的代码不起作用？**

```
Project.where(:is_available?) 
```

在 where 方法中，您必须传递参数散列或 (SQL) 条件字符串。您在这里尝试做的是选择方法 is_available 的所有项目？返回真。问题是该方法`is_available?`是一个 Ruby 方法（在您的模型中定义）。由于它是一个 Ruby 函数，因此不能在 SQL 内部调用它。where 方法需要 SQL 条件，而不是 ruby​​ 代码。

（感谢@benzado 的评论）

* * *

**要解决您的问题：**

这就是您要查找的内容，仅在 db 级别计算：

```
Project.joins(:workers)
       .select('projects.*')
       .group('projects.id')
       .having('COUNT(workers.*) > 2') 
```

这应该返回至少有 2 名工作人员关联的所有项目。

* * *

**如何改善这一点？**

您可以设置此查询的**范围**，以便在任何地方轻松使用它：

```
#in your model
class Project < ActiveRecord::Base
  scope :having_more_than_x_workers, lambda do |workers_count|
    joins(:workers).select('projects.*').group('projects.id').having("COUNT(workers.*) > #{workers_count || 0}")
  end

end 
```

要使用它，例如在您的控制器中：

```
#in your controller
def index
   @projects = Project.having_more_than_x_workers(2)
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T18:21:14.917

Rails 查询方法（如`where`）通过创建数据库查询来工作；换句话说，`where`除非属性确实存在于您的数据模型中，否则您不能使用其中的属性。否则，数据库不知道它，无法为您执行过滤。

在您的情况下，您应该在`Project`执行“可用？”的类上定义一个方法。查询，因此您可以使用您的方法代替`where`. 你可以这样做：

```
class Project < ActiveRecord::Base
  def self.available_projects
     where('workers_count > 2')
  end
end 
```

有关如何编写查询或如何将其定义为命名范围的详细信息，请参阅[MrYoshiji 的答案。](https://stackoverflow.com/a/14818248/10947)

# jquery - 如果设置了请求变量，则设置 jQuery UI datepicker 日期

> ID：14818071
> 
> 赞同：1
> 
> 时间：2013-02-11T18:01:37.743
> 
> 标签：jquery, jquery-ui

我正在使用 jQuery UI datepicker 小部件，我想看看是否设置了请求变量。当有人选择日期时，请求变量`date`会使用`window.location.replace()`. 之后`replace()`，我想使用`setDate`方法设置日期，如果设置了`date`变量，则使用今天的日期。

# opencart - OpenCart：创建一个独立的 Ajax 页面

> ID：14818072
> 
> 赞同：0
> 
> 时间：2013-02-11T18:01:38.773
> 
> 标签：opencart

我正在开发一个 OpenCart 项目。我正在主页上的特殊产品上创建“快速查看”效果，如果人们将鼠标悬停在该项目上，则会显示一个弹出框，其中包括更大的图像和添加到购物车按钮。

我正在尝试创建一个 Ajax 页面，我可以在其中使用我的 js 来调用并获取产品的详细信息。

只要查看传递的查询字符串并返回一些数据，我的 ajax 文件就可以正常工作；我只是不知道如何包含我可以用来获取详细信息的 opencart 核心文件或模块文件。

我希望我说得通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:15:54.620

最简单和最好的方法是使用框架本身并简单地使用提供的方法来获取您想要的数据。假设您是 php 开发人员并基本掌握 OOP 和 MVC，您可以在[此处](https://stackoverflow.com/a/13484904/711273)阅读有关如何使用该框架的基础知识

# c - 函数“sleep()”的正确#include 是什么？

> ID：14818084
> 
> 赞同：146
> 
> 时间：2013-02-11T18:02:32.840
> 
> 标签：c, posix, sleep

我正在使用 Big Nerd Ranch 的《Objective-C Programming》一书，它首先让我们在前几章中用 C 语言编写。在我创建的一个程序中，我使用了睡眠功能。在书中它告诉我把它放在`#include <stdlib.h>`下面`#include <stdio.h>`。这应该消除“函数'sleep'的隐式声明在C99中无效”的警告。但是由于某种原因，我放`#include <stdlib.h>`了之后，警告并没有消失。这个问题并没有阻止程序运行良好，但我只是好奇`#include`我需要使用哪个！

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2013-02-11T18:03:35.520

sleep[手册页](http://linux.die.net/man/3/sleep)说它是在`<unistd.h>`.

概要：

```
#include <unistd.h> 
```

> **无符号整数睡眠（无符号整数秒）；**

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2013-02-11T18:03:57.973

`sleep`是一个非标准函数。

*   在 UNIX 上，您应包括`<unistd.h>`.
*   在 MS-Windows 上，`Sleep`相当来自`<windows.h>`.

在任何情况下，请检查文档。

* * *

## 回答 #3

> 赞同：72
> 
> 时间：2014-04-18T17:34:34.303

这是我用于跨平台代码的内容：

```
#ifdef _WIN32
#include <Windows.h>
#else
#include <unistd.h>
#endif

int main()
{
  pollingDelay = 100
  //do stuff

  //sleep:
  #ifdef _WIN32
  Sleep(pollingDelay);
  #else
  usleep(pollingDelay*1000);  /* sleep for 100 milliSeconds */
  #endif

  //do stuff again
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-02-11T18:04:47.077

> *函数“sleep()”的正确#include 是什么？*

`sleep()`不是标准 C，而是 POSIX，所以它应该是：

```
#include <unistd.h> 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-02-11T18:04:00.323

[`sleep(3)`](http://www.manpagez.com/man/3/Sleep/)是在`unistd.h`，不是`stdlib.h`。在命令行上键入`man 3 sleep`以确认您的机器，但我假设您使用的是 Mac，因为您正在学习 Objective-C，而在 Mac 上，您需要`unistd.h`.

# web-crawler - 仅抓取动态数据

> ID：14818085
> 
> 赞同：2
> 
> 时间：2013-02-11T18:02:35.540
> 
> 标签：web-crawler, crawler4j

我正在尝试爬取当地新闻报纸的档案并获得预期的结果。我有什么方法可以对爬虫进行编程，以使每个页面上都相同的静态按钮（例如主页、按钮及其页脚）不包含在爬虫中

这是我用来显示爬取数据的代码

```
System.out.println(Jsoup.parse(html).body().text_mod()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T08:37:19.920

我为您的问题看到了两种解决方案，一种是通用的，一种是临时的。

### 1 通用

要从网站获取内容，您可以使用诸如样板管道之类的工具删除样板 [代码](http://code.google.com/p/boilerpipe/)。这将导致获取由库提取的文本。但是，您几乎无法控制锅炉管内发生的事情。

### 2 临时

您可以使用 Jsoup 删除树中不需要的节点。为此，您将获得由 Jsoup 处理的文档：

```
Document doc = Jsoup.parse(html): 
```

然后使用 Jsoup 选择器获取要从页面中删除的节点。请参阅此处的文档：[Jsoup 选择器](http://jsoup.org/cookbook/extracting-data/selector-syntax)。选择节点后，使用 Element 类的 remove 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:25:18.313

shouldVisit 方法呢？您可以根据 URL 模式添加条件，例如：

```
 @Override
public boolean shouldVisit(WebURL url) {
    String href = url.getURL().toLowerCase();
    return (!href.contains("static/button/url/"));
} 
```

这对我行得通。

# meteor - 如何在 ubuntu 上远程查看我的 meteor.js 设置？

> ID：14818087
> 
> 赞同：1
> 
> 时间：2013-02-11T18:02:48.063
> 
> 标签：meteor, ping

我希望在 ubuntu 上远程测试meteor.js，但我的浏览器没有连接。ip很好，端口也很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:19:11.413

这可能不是 Meteor 的问题。我让 Meteor 在 EC2 上运行良好。很可能这是默认 AWS 安全组阻止端口 3000 的问题。您需要进入该端口并启用对该端口的访问。

# sql - 按位运算符会导致正常比较不会导致的锁吗？

> ID：14818091
> 
> 赞同：0
> 
> 时间：2013-02-11T18:03:10.030
> 
> 标签：sql, sql-server, sql-server-2008

我有一个导致死锁问题的 SQL 脚本，我想知道在执行按位操作时是否应用了某种特殊锁。

有问题的查询是这样的：

```
UPDATE pos.prices SET active = 1 WHERE NOT (Attributes & 1 = 1) 
```

列类型 active`BIT`和 Attributes `TINYINT`。

原因是大量其他脚本的更新不包括按位与 (&) 执行没有问题。这是此操作的唯一更新，它正在死锁。

它正在死锁的查询是一个大型的、周期性的选择，它具有多个正在获取`SCHEMA`锁的连接。

**编辑：**这个查询会避免表扫描吗？

```
UPDATE pos.prices SET active = 1 WHERE id in
(SELECT id FROM
(SELECT id, (Attributes & 1) as IsLocked FROM pos.prices) as t1
WHERE NOT IsLocked = 1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:11:00.677

对 where 子句中的列进行计算的任何操作都会阻止使用该列的索引。这会导致表扫描。虽然表扫描不一定会产生死锁，但它可以显着增加死锁的概率。

# ruby-on-rails-3 - Rails has_many belongs_to unique

> ID：14818092
> 
> 赞同：1
> 
> 时间：2013-02-11T18:03:12.373
> 
> 标签：ruby-on-rails-3

我有 2 个模型：

销售：

```
class Sale < ActiveRecord::Base

  attr_accessible :sale_item_ids, :subtotal, :tax_charge, :total

  has_many :sale_items

end 
```

销售项目：

```
class SaleItem < ActiveRecord::Base
  attr_accessible :discount, :price, :product, :quantity, :sale_id, :sum, :code

  belongs_to :sale
end 
```

首先我创建一个空销售，然后我开始将 sale_items 添加到该销售中。

如何验证 sale_item_ids 列的唯一性？我的意思是，我怎样才能使相同的 sale_item 不能用相同的 sale_id 创建两次？

我努力了：

```
has_many :sale_items, uniq: true 
```

但没用，我也试过：

```
validates_uniqueness_of :sale_item_ids 
```

但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:17:52.467

我相信你必须确定它的范围。[http://apidock.com/rails/ActiveRecord/Validations/ClassMethods/validates_uniqueness_of](http://apidock.com/rails/ActiveRecord/Validations/ClassMethods/validates_uniqueness_of) 试试这个：

`validates_uniqueness_of :sale_items_ids, :scope => :sale_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T22:52:57.577

我从一开始就错了，sale_item_ids 总是不同的，因为它是数据库中的一条新记录，所以它总是唯一的。

所以我所做的是验证其他一些列。

```
class SaleItem < ActiveRecord::Base
  validate :check_presence, :on => :create

attr_accessible :code, :discount, :price, :product, :quantity, :sum, :sale_id

  belongs_to :sale

  def check_presence
    # Get the sale where the item sale will be saved
    sale = Sale.find(self.sale_id)

    # Compare the code column
    sale.sale_items.each do |s|
      if s.code == self.code
        errors.add(:base, "Item already in the sale form.")
      end
    end
  end

end 
```

# javascript - 在 javascript 中访问扩展对象

> ID：14818097
> 
> 赞同：2
> 
> 时间：2013-02-11T18:03:30.230
> 
> 标签：javascript, jquery, object, instantiation

我在从另一个 JS 文件创建有用事物的实例时遇到了一些麻烦，我想更改实例的属性并使用这些方法。或者如果这是不可能的，你建议什么。这扩展了，这个结构让我感到困惑。

```
(function($) {

$.extend({
    usefulThings: new function() {
        this.defaults = {
            prop_path:'/la/lala',
            //OTHER STUFF
        };
        this.construct = function(options) {
            return this.each(function() {
                var setting;
                this.settings = {};
                settings = $.extend(this.settings, $.usefulThings.defaults, options);
                $this = $(this);

                //OTHER STUFF
                $.data(this, "usefulThings",settings);
                // FIRST METHOD CALL
                //OTHER STUFF
            });
        };
        //SOME METHODS
    }
});
$.fn.extend({
    usefulThings: $.usefulThings.construct
}); 
})(jQuery); 
```

我见过从脚本块调用的有用事物，如下所示：

```
$("#myDivName").usefulThings({
  prop_path: '/la/lala' //these seems to get overwritten in the above
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:07:31.710

首先，看一下[MDN 对`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)的介绍。在 jQuery 文档中为[`.each`](http://api.jquery.com/each/).

接下来，看看[jquery 链接是如何工作的？](https://stackoverflow.com/q/7475336/1048572)了解构造方法。

然后，您应该注意到`new`在这种情况下使用关键字是绝对不合适的。表达式应替换为简单的对象字面量：

```
{
    defaults: {
        prop_path:'/la/lala',
        // …
    },
    construct: function(options) {
        …
    },
    //SOME METHODS
} 
```

现在，[`jQuery.extend`](http://api.jquery.com/jQuery.extend/). 文档中的相关句子是

> 如果仅向 提供一个参数`$.extend()`，则表示该`target`参数被省略。在这种情况下，`jQuery`对象本身被假定为目标。通过这样做，您可以将新功能添加到`jQuery`命名空间。这对于希望向 JQuery 添加新方法的插件作者很有用。

对于`$.fn.extend`（实际上是`=== $.extend`）也是如此，它扩展了`jQuery.fn`作为 jQuery 原型对象的快捷方式的对象。

# javascript - 查询字符串参数的约定

> ID：14818101
> 
> 赞同：3
> 
> 时间：2013-02-11T18:03:47.013
> 
> 标签：javascript, html, url, query-string

当我有这样的网址时：

```
http://server/site?firstname=Jack&lastname=Daniels 
```

我知道在我的 JavaScript 中，对名字的查询应该返回“Jack”。

但是在以下情况下，firstname 的查询应该返回什么：

```
http://server/site?lastname=Daniels
http://server/site?firstname&lastname=Daniels
http://server/site?firstname=&lastname=Daniels 
```

[编辑]回答一些评论：以上都是合法的查询字符串，我的问题不是关于如何检索参数，而是如何解释它们。

作为记录，我使用以下涵盖所有情况的正则表达式解析查询字符串：

```
/([^?=&;]+)(?:=([^&;]*))?/g 
```

显然有[一个关于如何检索查询字符串参数的非常流行的问题](https://stackoverflow.com/q/901115/1048572)，但答案是不正确的（或者至少没有解决边缘情况）。

[更新] 我的选择基于@Bergi 和@zzzzBov 的回答：

```
http://server/site?lastname=Daniels                => firstname: undefined
http://server/site?firstname&lastname=Daniels      => firstname: true
http://server/site?firstname=&lastname=Daniels     => firstname: ""
http://server/site?firstname=Jack&lastname=Daniels => firstname: "Jack" 
```

一个副作用是我不得不稍微修改我的正则表达式，因为上面的规则`=`需要捕获符号：

```
/([^?=&;]+)(=[^&;]*)?/g 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:13:02.670

> 但是在以下情况下，firstname 的查询应该返回什么：
> 
> ```
> http://server/site?lastname=Daniels
> http://server/site?firstname&lastname=Daniels
> http://server/site?firstname=&lastname=Daniels 
> ```

查询字符串可以很容易地用 JavaScript 中的对象表示法表示。只需设置对象的查询字符串中存在的键即可。

这意味着对于`?lastname=Daniels`生成的对象应该是：

```
{
    lastname: 'Daniels'
} 
```

在存在键但没有给出值（没有等号）的情况下，应该将键设置为`null`表示“无值”的值。

这意味着对于`?firstname&lastname=Daniels`生成的对象应该是：

```
{
    firstname: null,
    lastname: 'Daniels'
} 
```

在存在键且提供的值为空（等号）的情况下，该值实际上是空字符串。

这意味着对于`?firstname=&lastname=Daniels`生成的对象应该是：

```
{
    firstname: '',
    lastname: 'Daniels'
} 
```

还有一个经常被忽视的情况，即多次使用同一个密钥。在传统的查询字符串语法（不是 PHP）中，可以按原样多次使用键来表示数组。

这意味着对于`?foo=bar&foo=baz`生成的对象应该是：

```
{
    foo: [
        'bar',
        'baz'
    ]
} 
```

<旁白>

在 PHP 领域，用于数组的键以 为后缀`[]`：

```
`?foo[]=bar&foo[]=baz` 
```

PHP 将自动转换查询字符串服务器端，以便：

```
$_GET['foo'] = array('bar', 'baz') 
```

</aside>

回到最初的问题，这意味着以下内容：

*   `?lastname=Daniels`键的值为`undefined`。`firstname`
*   `?firstname&lastname=Daniels`键的值为`null`。`firstname`
*   `?firstname=&lastname=Daniels`键的值为`''`。`firstname`

对于基于其存在将键用作布尔值的情况，您应该检查对象是否具有键集（并完全忽略该值，因为这无关紧要）。

通常这是用 来完成的`obj.hasOwnProperty('key')`，但是由于对象实际上更像是一个散列，[`Object.prototype.hasOwnProperty.call(obj, 'key')`因此是优选](http://www.devthought.com/2012/01/18/an-object-is-not-a-hash/)的，它可以被抽象为一个`has`函数：

```
has(obj, key) {
    return Object.prototype.hasOwnProperty.call(obj, key);
} 
```

如果您使用[underscore.js](http://underscorejs.org/)，那么您可以使用[`_.has(obj, key)`](http://underscorejs.org/#has)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:31:19.777

> 但是查询应该返回什么

那是你的决定，你需要什么？有几个不同复杂度的查询字符串评估函数。其中一些可以处理重复的、嵌套的、括号语法值，而另一些则不能。著名的可以在[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/q/901115/1048572)及其重复的问题。

但是，您要求约定：

> `http://server/site?lastname=Daniels`

结果应该是虚假的，以表示不存在`firstName`。您可以选择`null`或`undefined`。

> `http://server/site?firstname&lastname=Daniels`

这通常代表一些布尔参数，因此返回`true`是合法的。但是我确信有些库完全忽略了这种格式。

> `http://server/site?firstname=&lastname=Daniels`

这很明显是空字符串`""`。

# python - 如何使用相机参数在 OpenGL 中正确设置投影和模型视图矩阵

> ID：14818109
> 
> 赞同：3
> 
> 时间：2013-02-11T18:04:06.323
> 
> 标签：python, opengl, opencv, computer-vision, robotics

我有一组从范围扫描仪获取的点（3D）。样本数据可以在这里找到：http: [//pastebin.com/RBfQLm56](http://pastebin.com/RBfQLm56)

我还有扫描仪的以下参数：

```
camera matrix
[3871.88184, 0, 950.736938;
  0, 3871.88184, 976.1383059999999;
  0, 0, 1]

distortion coeffs
[0.020208003; -1.41251862; -0.00355229038; -0.00438868301; 6.55825615]

camera to reference point (transform)

[0.0225656671, 0.0194614234, 0.9995559233, 1.2656986283;

  -0.9994773883, -0.0227084301, 0.0230060289, 0.5798922567;

  0.0231460759, -0.99955269, 0.0189388219, -0.2110195758;

  0, 0, 0, 1] 
```

我正在尝试使用 opengl 正确渲染这些点，但渲染看起来不正确。设置openGL投影和模型视图矩阵的正确方法是什么？这就是我目前所做的 -

```
znear = 0.00001
zfar =  100
K = array([[3871.88184, 0, 950.736938],[0, 3871.88184, 976.1383059999999],[0, 0, 1]])
Rt =array([[0.0225656671, 0.0194614234, 0.9995559233, 1.2656986283],[-0.9994773883, -0.0227084301, 0.0230060289, 0.5798922567],[0.0231460759, -0.99955269, 0.0189388219, -0.2110195758]])
ren.set_projection(K,zfar,znear)
ren.set_projection_from_camera(Rt) 
```

正在使用的功能是：

```
def set_projection(self,K,zfar,znear):
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    f_x = K[0,0]
    f_y = K[1,1]
    c_x = K[0,2]
    c_y = K[1,2]
    fovY = 1/(float(f_x)/height * 2);
    aspectRatio = (float(width)/height) * (float(f_y)/f_x);
    near = zfar
    far = znear
    frustum_height = near * fovY;
    frustum_width = frustum_height * aspectRatio;
    offset_x = (width/2 - c_x)/width * frustum_width * 2;
    offset_y = (height/2 - c_y)/height * frustum_height * 2;
    glFrustum(-frustum_width - offset_x, frustum_width - offset_x, -frustum_height - offset_y, frustum_height - offset_y, near, far);

def set_modelview_from_camera(self,Rt):
    glMatrixMode(GL_MODELVIEW)
    glLoadIdentity()
    Rx = array([[1,0,0],[0,0,-1],[0,1,0]])
    R = Rt[:,:3]
    U,S,V = linalg.svd(R)
    R = dot(U,V)
    R[0,:]=-R[0,:]
    t=Rt[:,3]
    M=eye(4)
    M[:3,:3]=dot(R,Rx)
    M[:3,3]=t
    M=M.T
    m=M.flatten()
    glLoadMatrixf(m) 
```

然后我只是渲染点（粘贴片段）：

```
def renderLIDAR(self,filename):
    glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT)
    glPushMatrix();

    glEnable(GL_DEPTH_TEST)
    glClear(GL_DEPTH_BUFFER_BIT)
    glPointSize(1.0)
    f = open(filename,'r')
    f.readline() #Contains number of particles
    for line in f:
        line = line.split(' ')
        glBegin(GL_POINTS)
        glColor3f (0.0,1.0,0.0); 
        x = float(line[0])
        y = float(line[1])
        z = float(line[2])
        glVertex3f(x,y,z)
        #print x,y,z
        glEnd()

    glPopMatrix(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:38:43.923

你得到的矩阵，最值得注意的是你问题中的最后一个矩阵是OpenGL中的投影和模型视图的组合，也称为Modelviewprojection，即

MVP = P·M

只要您对执行照明计算不感兴趣，您就可以在顶点着色器中使用它，即

```
#version 330

uniform mat4 MVP;
in vec3 position;

void main()
{
    gl_Position = MVP * vec4(position, 1);
} 
```

顺便说一句，OpenGL 以及您可能正在使用的库也使用列主顺序，即内存中元素的顺序是

```
0 4 8 c
1 5 9 d
2 6 a e
3 7 b f 
```

所以用源代码写的东西必须被认为是“转置的”（当然不是）。由于您编写的矩阵遵循相同的方案，因此您可以将其按原样放入制服中。剩下的唯一问题是范围扫描器使用的 NDC 空间的边界。但这可以通过应用额外的矩阵来解决。OpenGL 使用范围 [-1, 1]^3，所以可能发生的最糟糕的事情是，如果它在另一个流行的 NDC 范围 [0, 1]^3 中，你会看到你的几何图形被挤到了左上角窗口的手角，如果 Z 轴进入另一个方向，则可能会“从里到外”。试试吧，我会说它已经匹配 OpenGL。

无论如何，如果您想将其与照明一起使用，则必须将其分解为投影和模型视图部分。说起来容易做起来难，但一个好的起点是对左上角的 3×3 子矩阵进行正交归一化，这会产生模型视图“M”的旋转部分。然后你必须找到一个矩阵 P，当它与 M 相乘时，得到原始矩阵。这是一组超定的线性方程组，所以 Gauss-Jordan 方案可以做到。如果我没有完全弄错的话，你已经以相机矩阵的形式得到的是分解的 M 或 P（我会选择 M）。

一旦你知道了，你可能也想将平移部分（第 4 列）放入模型视图矩阵中。

# web-services - 我应该如何持续观察 Web 服务提供的数据库查询？

> ID：14818114
> 
> 赞同：1
> 
> 时间：2013-02-11T18:04:24.553
> 
> 标签：web-services, asp.net-web-api, ravendb, signalr

我正在开发一个 Web 应用程序，它应该查询 Web 服务（ASP.NET Web API）以获取某些数据，并可视化结果。当客户端应用程序运行时，查询的数据可能会发生变化，因为项目可能会添加到相应的数据库集合中或从相应的数据库集合中删除。客户端本身或其他客户端都可以修改集合（通过 Web 服务）。数据库服务器[RavenDB](http://ravendb.net)能够将更改通知其客户端（Web 服务）。

我想知道的是，当 Web 服务中的数据发生变化时，客户端应该如何保持最新状态？具体来说，如果 Web 服务的数据库发生变化，导致客户端的数据视图变得过时，客户端应该会收到新的查询结果。保持与客户端的持久连接是否是个好主意，例如通过[SignalR](http://signalr.net/)，并在每次对数据库进行更改时简单地通知它们，以便每个客户端都可以重新查询数据？如果这些更改通知变得过于频繁，是否应该限制它们？

## 示例场景

该数据库包含以下项目（JSON 表示法）：

```
[{"Id": "2", "User": "usera"}, {"Id": "1", "User": "usera"},
    {"Id": "3", "User": "userb"}, {"Id": "4", "User": "usera"}] 
```

客户端 A 请求 User == "usera" 的项目，分页到最多 2 个项目并按 Id 排序；该服务返回以下集合：

```
[{"Id": "1", "User": "usera"}, {"Id": "2", "User": "usera"}] 
```

然后客户端 B 告诉服务删除以下项：`{"Id": "2", "User": "usera"}`，使数据库变为：

```
[{"Id": "1", "User": "usera"}, {"Id": "3", "User": "userb"},
    {"Id": "4", "User": "usera"}] 
```

现在的问题是，Web 服务如何通知客户端 A 它应该重新查询新数据？也就是说，客户端 A 应刷新其视图以包含以下内容：

```
[{"Id": "1", "User": "usera"}, {"Id": "4", "User": "usera"}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:05:04.590

你说的听起来很对。您可以同时托管 Web API 和 SignalR。您可以使用 Web API 检索数据并使用 SignalR 在数据更改时通知客户端。您可以通知客户端数据已更改，以便他们可以重新查询，或者您可以实际将更改发送给客户端，以便他们可以避免重新查询 API。

您还可以使用不同的模型，其中客户端每隔 15 或 30 秒轮询一次服务器并更新可视化结果。这具有不需要持久连接并且更容易实现的优点。但是更改将需要更长的时间才能传播到客户端，如果结果集很大或更改不频繁（因为无论是否实际有任何更改都会发生轮询），您最终可能会消耗更多的带宽。

# java - 在Java中通过多个字符串比较LinkedList

> ID：14818117
> 
> 赞同：0
> 
> 时间：2013-02-11T18:04:42.440
> 
> 标签：java, sorting, comparator

我有一个这样的自定义对象：

```
 Linkedlist<ClassInfo> classes = new LinkedList<ClassInfo>(); 
```

其中，有教师姓名、班级名称、房间号等的访问器。这些都是字符串。我遇到了这样一种情况，即 LinkedList 中的数据需要通过不同的参数（即教师姓名、班级名称、房间号等）显示。

任何人都可以提供如何做到这一点的快速实施吗？如果我使用 Compartor 接口，**我怎么能告诉它要根据哪个字符串字段对列表进行排序？**我的研究也让我找到了 Collat​​or，我想知道这是否有用。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T18:08:15.603

为每个字段编写不同的`Comparator`实现：

```
Comparator<ClassInfo> CLASS_NAME_COMPARATOR = new Comparator<ClassInfo>() {
  public int compare(ClassInfo class1, ClassInfo class2) {
    return class1.getClassName().compareTo(class2.getClassName());
  }
};
... // implementations for other fields 
```

...然后按合适的比较器排序：

```
Collections.sort(classes, CLASS_NAME_COMPARATOR); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:09:06.960

您必须为您需要将集合排序到的每个排序提供自定义比较器。例如：

```
class TeacherComparator implements Comparator<ClassInfo> {
  public int compare(ClassInfo c1, ClassInfo c2) {
    String teacher1 = c1.getTeacher();
    String teacher2 = c2.getTeacher();
    return teacher1.compareTo(teacher2);
  }
}

class ClassNameComparator implements Comparator<ClassInfo> {
  ...
} 
```

# php - MYSQL 查询无法正常工作

> ID：14818119
> 
> 赞同：3
> 
> 时间：2013-02-11T18:04:51.650
> 
> 标签：php, mysql, sql, database

```
$sql = "UPDATE `shows` SET `title` = '$title', `tagline` = '$tagline', `desc` = '$desc' , `img_src = '$imgsrc' WHERE id = $showid"; 
```

上面的查询不想工作，我只是在第 1 行的 '' 处得到一个 mysql_error 说错误；

知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T18:06:11.413

你错过了一个勾号：

```
 `img_src = '$imgsrc' WHERE id = $showid"; 
```

应该：

```
 `img_src` = '$imgsrc' WHERE id = $showid"; 
```

# node.js - node.js - 无法连接到本地主机

> ID：14818121
> 
> 赞同：0
> 
> 时间：2013-02-11T18:04:54.130
> 
> 标签：node.js

我创建了一个 node.js 聊天站点，代码如下：

```
var net = require("net");

var chatServer = net.createServer(),
clients = [];

chatServer.on('connection', function(client) {
   client.write('Welcome');
   console.log("Connection is received!");

   clients.push(client);

   client.on('data', function (data) {
       for(var i = 0; i < clients.length; i++) {
           clients[i].write(data + "\n");
       }
   });

   client.on('end', function() {
      client.end();
   });
});

chatServer.listen(8888); 
```

但是当我尝试连接到 localhost:8888 时，它只会保持负载直到服务器关闭。

我发现以下代码可以完美运行：

```
var net = require("net");

var chatServer = net.createServer();

chatServer.on('connection', function(client) {
    client.write('Hi!');

    client.end();
});

chatServer.listen(8888); 
```

那么我在聊天代码中做错了什么？

**编辑：**好的，所以我实际上发现，当我连接到服务器时，它实际上会记录“收到连接”，这意味着我可以连接到服务器，但我看到的是浏览器试图加载页面。而且我看不到实际的服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:09:21.283

您缺少此行，这将使服务器无响应。

```
client.end(); 
```

# oracle - 德瓦特甲骨文。插入并返回 ID

> ID：14818126
> 
> 赞同：1
> 
> 时间：2013-02-11T18:05:13.043
> 
> 标签：oracle, devart

我们正在试用 Devart Oracle 适配器，但在使用 Oracle 的 DataAccess DLL 的现有代码方面遇到了问题。我们收到以下示例错误`command.ExecuteNonQuery()`：

> ORA-01400: 无法将 NULL 插入 ("DatabaseName"."table_name"."col3")

这是一些示例代码：

```
const string query = @"INSERT INTO table_name (table_name_id, col1, col2, col3)
    VALUES(table_name_id_seq.nextval, :col1, :col2, :col3)
    RETURNING table_name_id INTO :output_id";
OracleParameter outputParam = new OracleParameter(":output_id", OracleDbType.Long, ParameterDirection.Output);
OracleParameter[] parameters = new OracleParameter[]
{
    outputParam,
    new OracleParameter(":col1", OracleDbType.VarChar, col1, ParameterDirection.Input),
    new OracleParameter(":col2", OracleDbType.VarChar, col2, ParameterDirection.Input),
    new OracleParameter(":col3", OracleDbType.Long, col3, ParameterDirection.Input)
}

using (OracleCommand command = connection.CreateCommand())
{
    command.CommandText = query;
    command.CommandType = CommandType.Text;
    command.Parameters.AddRange(parameters);
    command.ExecuteNonQuery();
    int outputId = Convert.ToInt32(outputParam.Value.ToString());
} 
```

我们做错了什么？我们正在尝试使用 PK 序列插入一行，并在一个查询中返回该行的 PK。

此外，如果我删除查询中的输出参数和返回行，查询运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:06:17.433

感谢您的报告。我们已重现该问题并正在对其进行调查。作为一种解决方法，请切换到直接模式：[http](http://www.devart.com/dotconnect/oracle/docs/?directmode.html) ://www.devart.com/dotconnect/oracle/docs/?directmode.html 。

# sql - 关于我的日期转换错误的一点见解

> ID：14818133
> 
> 赞同：-1
> 
> 时间：2013-02-11T18:05:56.723
> 
> 标签：sql, sql-server-2008

我一直在处理下面的查询，并且从这里的成员那里获得了一些见解，我终于让它运行而没有错误。

我现在的问题是我需要调整我的 YTD 列 2013 和 2012 的日期参数。在我尝试调整 YTD 列之前，下面的这个查询运行良好。

```
Select CLINIC_ID,SUMMARY_CATGRY,ENTRY_TYPE,
SUM(case when EntryMonth = 1 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Jan12],
SUM(case when EntryMonth = 2 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Feb12],
SUM(case when EntryMonth = 3 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Mar12],
SUM(case when EntryMonth = 4 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Apr12],
SUM(case when EntryMonth = 5 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [May12],
SUM(case when EntryMonth = 6 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Jun12],
SUM(case when EntryMonth = 7 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Jul12],
SUM(case when EntryMonth = 8 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Aug12],
SUM(case when EntryMonth = 9 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Sep12],
SUM(case when EntryMonth = 10 and EntryYear = 2012 then [sumofentry_amount] else 0 end)[Oct12],
SUM(case when EntryMonth = 11 and EntryYear = 2012 then [sumofentry_amount] else 0 end)[Nov12],
SUM(case when EntryMonth = 12 and EntryYear = 2012 then [sumofentry_amount] else 0 end)[Dec12],
**SUM(case when EntryYear = 2012 then [sumofentry_amount] else 0 end) [2012YTD],
SUM(case when EntryYear = 2011 then [sumofentry_amount] else 0 end) [2011YTD]**
From
(
    SELECT [Non_Recurring_Clinic_Step1].CLINIC_ID, 
        HR_FINAN_CLASS.SUMMARY_CATGRY, 
        [TABLE_LAYOUT].ENTRY_TYPE, 
        datepart(month,[entry_date]) EntryMonth,
        datepart(year,[entry_date]) EntryYear,
         ENTRY_AMOUNT as [sumofentry_amount] 

 FROM [TABLE_LAYOUT]
 Inner Join

(
SELECT [GROUPING_OF_CLINIC_ID].CLINIC_ID, OUTPAT_ACCT_REC.CHARGE_CLASS,[GROUPING_OF_CLINIC_ID].PATIENT_NUMBER, [GROUPING_OF_CLINIC_ID].REGISTRATION_CD, OUTPAT_REGISTER.PRIMARY_FINAN, OUTPAT_ACCT_REC.ENTRY_DATE, SUM(ENTRY_AMOUNT) AS ENTRY_AMOUNT 

FROM
OUTPAT_REGISTER
Left JOIN
OUTPAT_BILL_REF
ON(OUTPAT_REGISTER.PATIENT_NUMBER = OUTPAT_BILL_REF.PATIENT_NUMBER)
AND(OUTPAT_REGISTER.REGISTRATION_CD = OUTPAT_BILL_REF.REGISTRATION_CD)

Left JOIN
OUTPAT_ACCT_REC
ON(OUTPAT_BILL_REF.PATIENT_NUMBER = OUTPAT_ACCT_REC.PATIENT_NUMBER)
AND(OUTPAT_BILL_REF.BILL_REFERENCE = OUTPAT_ACCT_REC.REFERENCE_NUM)

Left JOIN
    (
SELECT CLINIC_ID, PATIENT_NUMBER, REGISTRATION_CD
FROM OP_VISIT_HISTRY
GROUP BY CLINIC_ID, PATIENT_NUMBER, REGISTRATION_CD
--ORDER BY CLINIC_ID
)AS [GROUPING_OF_CLINIC_ID]

ON(OUTPAT_REGISTER.PATIENT_NUMBER = [GROUPING_OF_CLINIC_ID].PATIENT_NUMBER)
AND(OUTPAT_REGISTER.REGISTRATION_CD =[GROUPING_OF_CLINIC_ID].REGISTRATION_CD)

GROUP BY [GROUPING_OF_CLINIC_ID].CLINIC_ID,OUTPAT_ACCT_REC.CHARGE_CLASS,[GROUPING_OF_CLINIC_ID].PATIENT_NUMBER,[GROUPING_OF_CLINIC_ID].REGISTRATION_CD,
OUTPAT_ACCT_REC.ENTRY_DATE,OUTPAT_REGISTER.PRIMARY_FINAN

HAVING OUTPAT_ACCT_REC.ENTRY_DATE >'12/31/2010'
)AS [Non_Recurring_Clinic_Step1]

On([TABLE_LAYOUT].ENTRY_CLASS = [Non_Recurring_Clinic_Step1].CHARGE_CLASS)

Inner Join
OUTPAT_REGISTER

On([Non_Recurring_Clinic_Step1].PATIENT_NUMBER = OUTPAT_REGISTER.PATIENT_NUMBER)
And([Non_Recurring_Clinic_Step1].REGISTRATION_CD = OUTPAT_REGISTER.REGISTRATION_CD)

Inner Join
OUTPAT_AREA_CDS
On(OUTPAT_REGISTER.REGISTER_AREA = OUTPAT_AREA_CDS.REGISTER_AREA)

Inner Join
HR_FINAN_CLASS
On(OUTPAT_REGISTER.PRIMARY_FINAN = HR_FINAN_CLASS.FINAN_CLASS_CD)

Where OUTPAT_AREA_CDS.REG_AREA_TYPE <>'RE'
        and datepart(year,[entry_date]) in (2011, 2012)
) src
group by CLINIC_ID, SUMMARY_CATGRY, ENTRY_TYPE 
```

我需要 YTD 2013 和 2012 列有另一个日期参数，所以我将 YTD 语法切换到下面，我收到了这个错误

> *消息 245，级别 16，状态 1，行 1
> 将 varchar 值“1/1/2013”​​转换为数据类型 int 时转换失败。*

我只想将这种类型的日期参数用于 YTD **"> = '1/1/2013' 和 Entryday <= '1/31/2013'"**

```
Select CLINIC_ID,SUMMARY_CATGRY,ENTRY_TYPE,
SUM(case when EntryMonth = 1 and EntryYear = 2013 then [sumofentry_amount] else 0 end) [Jan'13],
SUM(case when EntryMonth = 12 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Dec'12],
SUM(case when EntryMonth = 11 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Nov'12],
SUM(case when EntryMonth = 10 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Oct'12],
SUM(case when EntryMonth = 9 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Sept'12],
SUM(case when EntryMonth = 8 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Aug'12],
SUM(case when EntryMonth = 7 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Jul'12],
SUM(case when EntryMonth = 6 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [Jun'12],
SUM(case when EntryMonth = 5 and EntryYear = 2012 then [sumofentry_amount] else 0 end) [May'12],
SUM(case when EntryMonth = 4 and EntryYear = 2012 then [sumofentry_amount] else 0 end)[Apr'12],
SUM(case when EntryMonth = 3 and EntryYear = 2012 then [sumofentry_amount] else 0 end)[Mar'12],
SUM(case when EntryMonth = 2 and EntryYear = 2012 then [sumofentry_amount] else 0 end)[Feb'12],
SUM(case when EntryMonth = 1 and EntryYear = 2012 then [sumofentry_amount] else 0 end)[Jan'12],
**SUM(case when Entryday > = '1/1/2013' and Entryday <= '1/31/2013' then 
[sumofentry_amount] else 0 end) [2013YTD],
SUM(case when Entryday > = '1/1/2012' and Entryday <= '1/31/2012' then 
[sumofentry_amount] else 0 end) [2012YTD]**

From
(
    SELECT [Non_Recurring_Clinic_Step1].CLINIC_ID, 
        HR_FINAN_CLASS.SUMMARY_CATGRY, 
        [TABLE_LAYOUT].ENTRY_TYPE, 
        datepart(month,[entry_date]) EntryMonth,
        datepart(year,[entry_date]) EntryYear,
        datepart(day,[entry_date])  Entryday,
         ENTRY_AMOUNT as [sumofentry_amount] 

 FROM [TABLE_LAYOUT]
 Inner Join

(
SELECT [GROUPING_OF_CLINIC_ID].CLINIC_ID, OUTPAT_ACCT_REC.CHARGE_CLASS,[GROUPING_OF_CLINIC_ID].PATIENT_NUMBER, [GROUPING_OF_CLINIC_ID].REGISTRATION_CD, OUTPAT_REGISTER.PRIMARY_FINAN, OUTPAT_ACCT_REC.ENTRY_DATE, SUM(ENTRY_AMOUNT) AS ENTRY_AMOUNT 

FROM
OUTPAT_REGISTER
Left JOIN
OUTPAT_BILL_REF
ON(OUTPAT_REGISTER.PATIENT_NUMBER = OUTPAT_BILL_REF.PATIENT_NUMBER)
AND(OUTPAT_REGISTER.REGISTRATION_CD = OUTPAT_BILL_REF.REGISTRATION_CD)

Left JOIN
OUTPAT_ACCT_REC
ON(OUTPAT_BILL_REF.PATIENT_NUMBER = OUTPAT_ACCT_REC.PATIENT_NUMBER)
AND(OUTPAT_BILL_REF.BILL_REFERENCE = OUTPAT_ACCT_REC.REFERENCE_NUM)

Left JOIN
    (
SELECT CLINIC_ID, PATIENT_NUMBER, REGISTRATION_CD
FROM OP_VISIT_HISTRY
GROUP BY CLINIC_ID, PATIENT_NUMBER, REGISTRATION_CD
--ORDER BY CLINIC_ID
)AS [GROUPING_OF_CLINIC_ID]

ON(OUTPAT_REGISTER.PATIENT_NUMBER = [GROUPING_OF_CLINIC_ID].PATIENT_NUMBER)
AND(OUTPAT_REGISTER.REGISTRATION_CD =[GROUPING_OF_CLINIC_ID].REGISTRATION_CD)

GROUP BY [GROUPING_OF_CLINIC_ID].CLINIC_ID,OUTPAT_ACCT_REC.CHARGE_CLASS,[GROUPING_OF_CLINIC_ID].PATIENT_NUMBER,[GROUPING_OF_CLINIC_ID].REGISTRATION_CD,
OUTPAT_ACCT_REC.ENTRY_DATE,OUTPAT_REGISTER.PRIMARY_FINAN

HAVING OUTPAT_ACCT_REC.ENTRY_DATE >'12/31/2011'
)AS [Non_Recurring_Clinic_Step1]

On([TABLE_LAYOUT].ENTRY_CLASS = [Non_Recurring_Clinic_Step1].CHARGE_CLASS)

Inner Join
OUTPAT_REGISTER

On([Non_Recurring_Clinic_Step1].PATIENT_NUMBER = OUTPAT_REGISTER.PATIENT_NUMBER)
And([Non_Recurring_Clinic_Step1].REGISTRATION_CD = OUTPAT_REGISTER.REGISTRATION_CD)

Inner Join
OUTPAT_AREA_CDS
On(OUTPAT_REGISTER.REGISTER_AREA = OUTPAT_AREA_CDS.REGISTER_AREA)

Inner Join
HR_FINAN_CLASS
On(OUTPAT_REGISTER.PRIMARY_FINAN = HR_FINAN_CLASS.FINAN_CLASS_CD)

Where OUTPAT_AREA_CDS.REG_AREA_TYPE <>'RE'
        and datepart(year,[entry_date]) in (2012, 2013)
) src
group by CLINIC_ID, SUMMARY_CATGRY, ENTRY_TYPE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:14:57.457

`Entryday`将是一个整数[（见这里）](http://msdn.microsoft.com/en-us/library/ms174420.aspx)，这就是为什么你得到一个无效的演员表。您应该对整个`entry_date`.

您也可以对`EntryYear = 2013 AND EntryMonth = 1 AND EntryDay IS BETWEEN 1 AND 31`. 但是，如果您要比较整个日期，那么我会使用第一个选项来检查日期而不是每个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:16:11.073

问题是它`Entryday`是一个`int`并且你正在将它与一个不起作用的日期时间进行比较。返回 1 到 31 之间的[`DatePart(day, entry_date)`](http://msdn.microsoft.com/en-us/library/ms174420.aspx)数值。

而不是使用`datepart(day,[entry_date]) Entryday`，那么你应该只使用`entry_date`：

```
SELECT [Non_Recurring_Clinic_Step1].CLINIC_ID, 
    HR_FINAN_CLASS.SUMMARY_CATGRY, 
    [TABLE_LAYOUT].ENTRY_TYPE, 
    datepart(month,[entry_date]) EntryMonth,
    datepart(year,[entry_date]) EntryYear,
    [entry_date],
     ENTRY_AMOUNT as [sumofentry_amount] 
```

然后，当您获得总数时，您将使用：

```
SUM(case 
      when entry_date > = '1/1/2013' 
        and entry_date <= '1/31/2013' 
      then [sumofentry_amount] else 0 end) [2013YTD],
SUM(case 
      when entry_date > = '1/1/2012' 
        and entry_date <= '1/31/2012' 
    then [sumofentry_amount] else 0 end) [2012YTD] 
```

但要获得 YTD 值，您实际上只需要：

```
SUM(case when EntryYear = 2013 then [sumofentry_amount] else 0 end) [2013YTD],
SUM(case when EntryYear = 2012 then [sumofentry_amount] else 0 end) [2012YTD] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:16:29.753

好的，您正在尝试比较`Entryday`一个数字（1 到 31）和日期，这就是您收到错误的原因。您实际上根本不需要该列，您可以这样做：

```
SUM(case when EntryYear = '2013' AND EntryMonth = 1 
    then [sumofentry_amount] else 0 end) [2013YTD],
SUM(case when EntryYear = '2012' AND EntryMonth = 1 
    then [sumofentry_amount] else 0 end) [2012YTD] 
```

# java - XMLWriter 使用 zdef 扩展属性名称？

> ID：14818134
> 
> 赞同：4
> 
> 时间：2013-02-11T18:06:04.110
> 
> 标签：java, xml-serialization, jackson, xmlmapper, fasterxml

我尝试使用 XMLMapper 将一些配置类序列化为 xml 配置文件。但我在属性生成方面遇到了一些麻烦。实际上生成的 XML 是完美的，但是 XMLMapper 有时会在我的属性名称中添加一个前缀。

例如

```
<Config zdef-2031720317:value="0"> 
```

代替

```
<Config value="0"> 
```

这真的很糟糕，因为我不能再用 XOM 处理 xml 结构了:(

这种效果从何而来？我已经发现 xml 生成器似乎会自动修复名称空间以使属性独一无二。为什么这是必要的，我该如何避免？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T18:25:16.543

经常引起问题的一件事`XmlMapper`是底层 XML Stax 库——JDK 中包含的一个有时会添加不必要的名称空间前缀。解决方案是改用[Woodstox](http://woodstox.codehaus.org) Stax 实现，因为众所周知，它通常工作得更好，在这种特定情况下也是如此。

如果你使用 Maven，你可以在你的`pom.xml`:

```
<dependency>
  <groupId>org.codehaus.woodstox</groupId>
  <artifactId>woodstox-core-asl</artifactId>
  <version>4.1.4</version>
</dependency> 
```

你的问题可能会得到解决。作为一个额外的好处，这也是一个更快的 XML 解析器。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-11-01T13:25:36.813

对于那些正在寻找非伍德斯托克斯答案的人。这对我有用：

```
xmlMapper.getFactory().getXMLOutputFactory().setProperty("javax.xml.stream.isRepairingNamespaces", false); 
```

# ios - 使用 AFNetworking 获取图像时内存增长

> ID：14818137
> 
> 赞同：0
> 
> 时间：2013-02-11T18:06:23.800
> 
> 标签：ios, memory-management, instruments, afnetworking

我有我的 iOS 应用程序一次获取一个图像并将它们显示在屏幕上（非常像幻灯片）。我遇到了内存不足的情况。在运行 Allocations 时查看 Instruments，我发现内存一直在增长。调用树显示正在使用大量内存，但没有一行是我的代码，而且我在调试这些情况时没有足够的经验知道如何阅读它。

![来自 Instruments 的调用树](../Images/81f7d50435ee206d12dcb77326329345.png)

这是我用来获取图像的代码：

```
- (void)fetchLargeImage:(void (^)(UIImage *))completion
{

    // image doesn't exist yet, fetch it now
    NSURL *resourceURL = [NSURL URLWithString:[NSString stringWithFormat:@"http://path_to_image/%@", @"image_name.jpg"];
    NSURLRequest *request = [NSURLRequest requestWithURL:resourceURL];

    AFImageRequestOperation *operation = [AFImageRequestOperation imageRequestOperationWithRequest:request imageProcessingBlock:^UIImage *(UIImage *image) {
        return image;
    } success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {

        completion(image);

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
        // image wasn't loaded
    }];

    [operation start];

} 
```

在显示图像时，我存储最后 10 张图像，因为用户可以向后滑动以查看以前显示的图像。在我的清理方法中，我将图像视图和图像视图本身的图像归零，并将其从数组中删除。所以我不确定是什么还在坚持它并导致记忆继续增长。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:37:16.480

AFNetworking 的 UIImageView 类别方法将它们检索到的图像安静地存储在共享的 AFImageCache 对象中，该对象是 NSCache 的子类。这在性能方面很棒，但我想它可能会导致您的记忆问题。您将看到在每次成功的 AFImageRequestOperation 之后调用此行：

```
[[[self class] af_sharedImageCache] cacheImage:responseObject forRequest:urlRequest]; 
```

据我所知，类别方法似乎并没有对此提供太多控制。如果你觉得编辑 UIImageView+AFNetworking.m 中的代码很舒服，你可以注释掉上面的行，或者将这行添加到`af_sharedImageCache`类方法中以限制缓存的大小：

```
[_af_imageCache setCountLimit: 10]; // limits the number of cached images to 10 
```

我没有用 Instruments 测试过这个，所以我不能 100% 确定它会解决你的问题，但也许它有助于解释发生了什么。

# ios - 在 iOS 上的 PhoneGap 或 Cleaver (Cordova) 中加载远程 html

> ID：14818138
> 
> 赞同：9
> 
> 时间：2013-02-11T18:06:28.753
> 
> 标签：ios, cordova, uiwebview

我在本机 iOS 6 应用程序中使用了 Cordova 2.4 组件 Cleaver 和嵌入式视图。到目前为止，我已经成功地创建了项目结构，链接了 Cordova 库并设置了 Hello World 应用程序，该应用程序可以提供“设备就绪”反馈。

这一切都很好，但它从分布在应用程序本身的 www 存储库加载所有 html（包括所有 js 库）。

我真正想要你做的是：

1 - 在我的应用程序中弹出切割器组件（只不过是嵌入式 uiwebview）。容易 - 完成。

2 - 从指向我的远程服务器上的 servlet 的 URL 加载一些 html 内容。我有几个 servlet，当然需要能够分别加载它们中的每一个。

3-让第2步中生成的内容通过cordova javascript libscordova-2.4.0.js与我的本机应用程序交互-（如果它们是设备本地的，但html是从远程位置加载的，我该如何加载它们）。

我该如何设置？

附言

我比 Javascript 开发者更喜欢 Obj-C :)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-12T12:58:31.810

Here is the answer. What a joy...

[excellent article on dynamic page loading in PhoneGap and Cordova](https://www.ibm.com/developerworks/mydeveloperworks/blogs/94e7fded-7162-445e-8ceb-97a2140866a9/entry/dynamic_page_loading_for_phonegap1?lang=en)

Precisely what I needed. The second part of the project was to enable native code to force the loading of external web services - I accomplished this by called stringByEvaluatingJavaScriptFromString on the Cleaver web view .

`[webview stringByEvaluatingJavaScriptFromString:@"app.loadExternal('www.usatoday.com')];` is the code that works like a charm:)

Viola - I have a Cleaver view capable of loading external html content with complete two-way communication between the javascript app and the native container.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-11T19:18:35.023

在你的 index.html 文件中做这样的事情（对于第 2 点）

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
<meta charset="utf-8">
<script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js"></script>
<script type="text/javascript">
     function onBodyLoad(){     
        document.addEventListener("deviceready", onDeviceReady, false);
     }
     function onDeviceReady(){
         window.location.href = <your_remote_url>
     }
}
</script> 
```

对于第 3 点，您的远程内容应该导入 cordova.js，并且交互（本机/网络）将像本地内容一样工作。

# c# - 我可以在 foreach 中使用 StringBuilder 元素吗？

> ID：14818139
> 
> 赞同：5
> 
> 时间：2013-02-11T18:06:31.013
> 
> 标签：c#, .net, arrays, foreach, stringbuilder

由于我使用的是 .NET 1.1，因此我不能使用泛型字符串列表，因为泛型还不是该语言的一部分。所以我正在尝试使用 StringBuilder，但得到这个错误消息：

*“foreach 语句无法对 'System.Text.StringBuilder' 类型的变量进行操作，因为 'System.Text.StringBuilder' 不包含 'GetEnumerator' 的定义，或者无法访问”*

使用此代码：

```
public StringBuilder linesToSend;
. . .

foreach (string _line in this.linesToSend)
{
    serialPort.Write(_line);
} 
```

我的代码有什么问题，还是 foreach 循环真的不允许 StringBuilder？如果是后者，String[] 是我最好的办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-07-29T19:37:45.457

老问题，我知道，但一些可能有用的东西：

如果你的每个字符串都是用 .AppendLine 构建的，或者你插入了一个新行，你可以这样做

```
string[] delim = { Environment.NewLine, "\n" }; // "\n" added in case you manually appended a newline
string[] lines = StringBuilder.ToString().Split(delim, StringSplitOptions.None);
foreach(string line in lines){
    // Do something
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T18:08:37.113

A`StringBuilder`不存储您附加的行。它只是用于构建最终字符串。假设您已经添加了所有内容`StringBuilder`，您可以执行以下操作：

```
// Write the complete string to the serialPort
serialPort.Write(linesToSend.ToString()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T18:09:59.890

这是对的。正如其他人所说， A`StringBuilder`旨在帮助您构建一个最终输出字符串。

如果您需要处理可变数量的字符串，则可以使用 an`ArrayList`并对其进行迭代。

```
ArrayList strings = new ArrayList();
// populate the list
foreach (string str in strings) {
  // do what you need to.
} 
```

如果您担心数组列表可能包含其他对象（因为它不是强类型的），您可以安全地转换它：

```
foreach (object obj in strings) {
  string str = obj as string;
  // If null strings aren't allowed, you can use the following
  // to skip to the next element.
  if (str == null) {
    continue;
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T18:11:05.103

The `foreach` loop works by calling the `GetEnumerator` from the interface `IEnumerable` which will return an enumerator that `foreach` uses to get the next element of the object.

`StringBuilder` does not implement `IEnumerable` or `IEnumerable<T>` which would allow the `foreach` to work. You are better off using a `string[]` or `StringCollection` in this case and when you are done you can concatenate the collection using a `StringBuilder`.

ex:

```
StringBuilder stringBuilder = new StringBuilder();
foreach(string line in array)
{
    serialPort.Write(line);
    stringBuilder.Append(line);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-11T18:08:51.270

A`StringBuilder`只构建**一个**字符串，那么你怎么能`foreach`得到一个完整的字符串序列呢？

如果您需要逐行编写，可以使用 an `ArrayList`，将每行字符串添加到其中，并将`foreach`with`string`作为`foreach`变量类型（`Object`将被强制转换为`String`）。或者甚至更好，使用[`StringCollection`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.stringcollection%28v=vs.71%29.aspx)（感谢 Anthony Pegram 对原始问题的评论；我忘记了这门课）。

但是为什么不升级到较新版本的 .NET？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T18:14:27.967

如果您知道元素的数量，您正在寻找的是一个字符串数组，或者是一个字典。

# java - In a getter method, Should I clone a String being returned?

> ID：14818144
> 
> 赞同：0
> 
> 时间：2013-02-11T18:06:45.637
> 
> 标签：java, string, field, getter-setter, cloning

In Java, is it advisable to create another String when returning fields that are Strings in a getter method. my_name is a String field of a class.

```
public String getName()
{
    String rString = my_name.toString();
    return rString;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T18:08:07.840

> 在 Java 中，是否建议在 getter 方法中返回作为字符串的字段时创建另一个字符串。my_name 是一个类的字符串字段。

**不**，这样做没有意义。由于 Java 中的字符串是*不可变*的，当你尝试修改`getter`方法返回的字符串时（即重新分配当前指向字符串对象的字符串引用，分配给不同的字符串），它会创建一个新字符串，并分配一个引用将该字符串指向当前字符串引用，从而将其与原始字符串分离。

但是，如果您有`mutable`字段，例如`array`，那么在这种情况下，如果您希望您的对象是不可变的，则建议返回它的防御性副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T18:09:53.067

不。在 Java 中，字符串是不可变的，因此调用 getter 的任何人都无法修改它。

此外，由于 Java 将字符串池化以重用它们的方式，您的代码将执行与直接返回字段完全相同的操作。

# java - 修改 toString() 方法 JComboBox Swing

> ID：14818149
> 
> 赞同：5
> 
> 时间：2013-02-11T18:07:01.070
> 
> 标签：java, swing, jcombobox

我有一个带有 ID、名称、姓氏的 Proveedores 类，我想将此对象添加到组合框中。

```
 ListIterator listaNombre = listaProveedores.listIterator();
        listado = new Proveedores[listaProveedores.size()];
        int cont = 0;
        while (listaNombre.hasNext()) {
            prov = (Proveedores) listaNombre.next();
            listado[cont] = prov;
            cont++;
        }
this.vista.cArticuloFamilia.setModel(new javax.swing.DefaultComboBoxModel(listado)); 
```

使用此代码，我将不同的对象添加到组合框中。有用。但现在我想重写 toString 方法以仅显示 Name 属性。现在组合框向我显示了名称类 (Proveedores) 和 ID。

```
entidades.Proveedores[idProveedores=1] 
```

如何覆盖它以显示 Proveedores 名称？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T18:19:57.213

使用自定义[ListCellRenderer](http://www.java2s.com/Code/JavaAPI/javax.swing/JComboBoxsetRendererListCellRendereraRenderer.htm)来完成此操作。

您不应该定制 toString() 来为复杂对象生成 GUI 数据。它旨在为开发人员而不是用户提供内部数据表示。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-12T05:56:39.953

Java 使用**toString()**来获取对象的字符串表示，默认情况下它将返回完全限定的类名@，后跟对象的 hashCode。

使用[ListCellRenderer](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/ListCellRenderer.html)在 ComboBox 中显示 Proveedores 名称。

**示例代码：**

```
public static class ProveedoresRenderer extends DefaultListCellRenderer {
    public Component getListCellRendererComponent( JList list, Object value, int index, boolean isSelected, boolean cellHasFocus ) {
        Object item = value;

        // if the item to be rendered is Proveedores then display it's Name
        if( item instanceof Proveedores ) {
            item = ( ( Proveedores ) item ).getName();
        }
        return super.getListCellRendererComponent( list, item, index, isSelected, cellHasFocus);
    }
} 
```

然后将**ProveedoresRenderer**设置为**JComboBox**。

```
ListIterator listaNombre = listaProveedores.listIterator();
listado = new Proveedores[listaProveedores.size()];
int cont = 0;
while (listaNombre.hasNext()) {
    prov = (Proveedores) listaNombre.next();
    listado[cont] = prov;
    cont++;
}
this.vista.cArticuloFamilia.setModel(new javax.swing.DefaultComboBoxModel(listado));

// Set custom renderer to the combobox
this.vista.cArticuloFamilia.setRenderer( new ProveedoresRenderer() ); 
```

# c++ - 复制/移动 base-from-member 惯用语的构造函数

> ID：14818152
> 
> 赞同：0
> 
> 时间：2013-02-11T18:07:15.127
> 
> 标签：c++

我正在使用[base-from-member](http://en.wikibooks.org/wiki/More_C++_Idioms/Base-from-Member)惯用语，现在我坚持使用它们的复制/移动构造函数。假设以下代码：

```
#include <iostream>
#include <string>
#include <boost/lexical_cast.hpp>

using namespace std;

struct A // base class
{
    A(string &s) : s(s), c(0) { };
    A(const A &a) : s(a.s), c(a.c) { };
    void print() { cout << s << endl; c++; }
    int print_count() { return c; }

    string &s;
    int c;
};

struct B_base // this class will be initialized before A
{
    B_base(int i)
    {
        s = boost::lexical_cast<string>(i);
    }

    B_base(const B_base &other) : s(other.s) { };

    string s;
};

struct B : B_base, A // main class
{
    B(int i) : B_base(i), A(B_base::s) { }
    B(const B &other) : B_base(other), A(other) { } // <-- problem here 

    using A::print;
    using A::print_count;
};

int main()
{
    B b(10);
    b.print(); // prints '10'
    cout << b.print_count() << endl; // prints '1'

    B b1(b);
    b1.print(); // prints '10'

    A &a = b;
    a.s =  "FAIL"; // we modify b, not b1 here!

    b1.print(); // but b1 prints 'FAIL' here --- error (it should still print '10')
    cout << b.print_count() << " " << b1.print_count() << endl; // prints '1 3'

    return 0;
} 
```

这里的问题是引用`A.s`（指向`B_base::s`）从一个实例复制到另一个实例，而应该修改它以指向另一个实例`B_base::s`。如果前一个实例超出范围并以悬空引用结尾，情况可能会更糟。

我的问题是：如何使用 base-from-member 成语制作正确的类副本？（我认为移动构造函数将类似于复制一个，对吧？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:23:30.150

在这种情况下，您正在使用的 base-from-member 习语意味着：您希望必须使用(with is: ) 的成员来初始化 with的`class B`派生。`A``B``string s`

```
B b(10);
B b1(b); //   B(const B &other) : B_base(other), A(other) { }
         //   now A::s in b1 is a ref to b.s
A &a = b;//   and a.s is a ref to b.s too.
a.s =  "FAIL"; // we modify b, and A::s in b1 to! 
```

这个问题可以通过复制构造函数来解决：

```
B(const B &other) : B_base(other), A(B_base::s) { } 
```

此外，具有`A::s`和`B_base::s`同名，使事情更难理解。

编辑：作为类设计师，您必须决定复制构造函数的确切含义。
例如，在这种情况下，您可能希望（使用`A::c`）跟踪每个新创建对象的打印次数`A`。我建议的复制构造函数做到了。

但是如果你想跟踪原始字符串的所有打印，事情就更复杂了。请注意，如果您将旧的复制`A::c`到新的`A`，它将被正确初始化，当使用不同副本打印相同的原始字符串时，不会交叉实现`A`。如果这不是问题，您可以修改构造函数：

```
A(string &s, int _c=0) : s(s), c(_c) { }; 
```

...

```
B(const B &other) : B_base(other), A(B_base::s, other.c) { } 
```

# php - PhpExcel 工作簿

> ID：14818154
> 
> 赞同：0
> 
> 时间：2013-02-11T18:07:22.040
> 
> 标签：php, phpexcel

我目前有一个`.xlsx`包含多张带有文本和图像的工作簿的文件。

我需要将此数据导入我的**MySQL**数据库。

有谁知道任何教程或一些代码可以帮助我获取工作簿中的所有工作表并检索文本和图像，并将它们插入数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:00:27.837

查看[PHPExcel](http://phpexcel.codeplex.com/)。以下是您如何循环浏览床单。我不确定如何获取图像。

```
$reader = new PHPExcel_Reader_Excel2007();
$excel = $reader->load($filename);

foreach ($excel->getWorksheetIterator() as $worksheet){
    // Get the data from current worksheet
    // and store in DB as you like
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T23:31:44.313

```
$reader = new PHPExcel_Reader_Excel2007();
 $PHPExcel = $reader->load('test.xlsx');
 $worksheet = $PHPExcel->getActiveSheet();

 // extract images from worksheet and save files:  0.jpeg, 1.jpeg, 2.png, ...
 foreach ($worksheet->getDrawingCollection() as $i => $drawing) {
     $filename = $drawing->getPath();
     $imagesize = getimagesize($filename);

     switch ($imagesize[2]) {

     case 1:
         $image = imagecreatefromgif($filename);
         imagegif($image, "$i.gif");
         break;

     case 2:
         $image = imagecreatefromjpeg($filename);
         imagejpeg($image, "$i.jpeg");
         break;

     case 3:
         $image = imagecreatefrompng($filename);
         imagepng($image, "$i.png");
         break;

     default:
         continue 2;

     }
 } 
```

# javascript - 将表单数据传递给python

> ID：14818157
> 
> 赞同：3
> 
> 时间：2013-02-11T18:07:29.383
> 
> 标签：javascript, python, html

我有一个 HTML 表单，其中包含我想发送到我的 SVN 的数据。由于 HTML/JS 无法做到这一点，我想使用 Python 作为表单和 SVN 之间的链接。我的问题是我不知道如何将数据从 HTML/JS 发送到 Python，两者都是客户端（不涉及服务器）。

我想象会发生的是用户填写表单，然后按下“提交”按钮，该按钮将调用 Python 脚本并将其表单数据作为参数传递。

我一直在搜索，发现人们正在运行 Python 服务器端并从他们的 javascript 发布到它，但由于我没有服务器，我认为这对我来说是不可能的。

如果它们都是客户端，是否可以将数据从 HTML/JS 发送到 Python？

* * *

编辑：我应该补充一点，我在 Python 和 JS 方面确实有很好的背景

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:16:09.140

以下是一些将 Python 与 JavaScript 相结合的巧妙方法：

[将数据从 html/js 返回到 python](https://stackoverflow.com/questions/14778167/return-data-from-html-js-to-python/14778465#14778465)

**注意：**由于您提到您没有服务器，因此您使用 javascript 调用的请求必须指向运行 python 代码的套接字的侦听端口。简单的方法是使用 python 监听端口 80，然后进行常规调用，而无需考虑 JavaScript 中的 :80。

基本上，HTML 表单，使用 JavaScript`onSubmit()`或调用上面帖子中代码的**按钮**`AJAX`，然后让 Python 读取数据（根据链接顶部显示的`JSON`结构数据）`<form>``JSON format`

## 下面是关于如何通过 javascript 使用表单数据的简短介绍：

```
<HTML>
    <HEAD>
        <TITLE>Test Input</TITLE>
        <SCRIPT LANGUAGE="JavaScript">
        function testResults (form) {
            var TestVar = form.inputbox.value;
            alert ("You typed: " + TestVar);
        }
        </SCRIPT>
    </HEAD>
    <BODY>
        <FORM NAME="myform" ACTION="" METHOD="GET">Enter something in the box: <BR>
            <INPUT TYPE="text" NAME="inputbox" VALUE=""><P>
            <INPUT TYPE="button" NAME="button" Value="Click" onClick="testResults(this.form)">
        </FORM>
    </BODY>
</HTML> 
```

使用此原则收集您的信息，
然后在顶部提到的链接中构建 AJAX 部分。
完成此操作后，启动侦听这些调用的 python 脚本（也显示在链接中）。

**请记住：**要使用**JSON**，请正确格式化，`'`例如，它必须是`"`！

* * *

在我的链接中，这是将 GET 请求发送到“服务器”（python 脚本）的重要部分：

```
xmlhttp.open("GET","Form-data",true); 
```

* * *

## 这是python部分：

```
from socket import *
import json
s = socket()
s.bind(('', 80)) # <-- Since the GET request will be sent to port 80 most likely
s.listen(4)
ns, na = s.accept()

while 1:
    try:
        data = ns.recv(8192) # <-- Get the browser data
    except:
        ns.close()
        s.close()
        break

    ## ---------- NOTE ------------ ##
    ## "data" by default contains a bunch of HTTP headers
    ## You need to get rid of those and parse the HTML data,
    ## the best way is to either just "print data" and see
    ## what it contains, or just try to find a HTTP parser lib (server side)    

    data = json.loads(data)
    print data 
```

# javascript - highcharts：纪元时间未正确连接到 Xaxis

> ID：14818160
> 
> 赞同：0
> 
> 时间：2013-02-11T18:07:33.783
> 
> 标签：javascript, highcharts

当我有不一致的数据进入时（例如，当收集数据的服务器关闭时）highcharts 不会正确绘制 X。
它仍然像 X 上有数据而没有数据。
它应该在实际有数据时绘制正确的时间。
这是小提琴： http: [//jsfiddle.net/ZVwFK/](http://jsfiddle.net/ZVwFK/)
数据变量不一致！

有人可以告诉我如何纠正这个错误吗？

```
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'spline',
            margin: [50,130,90,100]
        },
        title: {
            text: 'Weather Today'
        },
        credits: {
            enabled: false
        },
        subtitle: {
            text: 'test'
        },
        xAxis: {
            type: 'datetime',
            dateTimeLabelFormats: {
                day: '%H:%M'
            },
            tickInterval: 3600 * 1000,
            labels: {
                rotation: -45,
                align: 'right',
                style: {
                    fontSize: '10px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }
        },
        yAxis: [{
            title: {
                text: 'Temperature C'
            },
            opposite: false,
            minorGridLineWidth: 0
            }, {
            title: {
                text: 'Humidity %'
            },
            minorGridLineWidth: 0,
            opposite: true
            }, {
            opposite: true,
            title: {
                text: 'Air Pressure hPa',
                minorGridLineWidth: 0,
            },
        }],
        tooltip: {
            formatter: function() {
                    if(this.series.name === 'Temperature')
                    {
                        return ''+ Highcharts.dateFormat('%H:%M',this.x) +': '+ this.y + ' C';
                    }
                    if(this.series.name === 'Humidity')
                    {
                        return ''+ Highcharts.dateFormat('%H:%M',this.x) +': '+ this.y + ' %';
                    }
                    if(this.series.name === 'Air Pressure')
                    {
                        return ''+ Highcharts.dateFormat('%H:%M',this.x) +': '+ this.y + ' hPa';
                    }
            }
        }, 
        plotOptions: {
            spline: {
                lineWidth: 4,
                states: {
                    hover: {
                        lineWidth: 3
                    }
                },
                marker: {
                    enabled: false,
                    states: {
                        hover: {
                            enabled: true,
                            symbol: 'circle',
                            radius: 3,
                            lineWidth: 1
                        }
                    }
                }
            }
        }, 
        series: [{
                name: 'Temperature',
                data: temp,
                type: 'spline',
                /* yAxis: 0, */
                shadow: true,
                showInLegend: true, 
                pointInterval: 60 * 1000, 
                /* pointStart: Date.UTC(2006, 0, 1),*/
                dashStyle: 'solid',  
                marker: {
                    enabled: false
                } 
                } , {
                name: 'Humidity',
                data: hum,
                yAxis: 1,
                shadow: false,
                showInLegend: true,
                pointInterval: 60 * 1000,
                type: 'line',
                dashStyle: 'dot',  
                marker: {
                    enabled: false
                } 
                }, {
                name: 'Air Pressure',
                data: bar,
                yAxis: 2,
                shadow: false,
                showInLegend: true,
                pointInterval: 60 * 1000,
                type: 'line',
                dashStyle: 'shortdot',  
                marker: {
                    enabled: false
                } 
        }],
        navigation: {
            menuItemStyle: {
                fontSize: '6px'
            }
        } 
    });
}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:02:07.730

有两种方法可以为 Highcharts 指定时间数据，我认为您使用了错误的方法来解决问题。这是您在数据中有空白时应该使用的第二种样式。

1.  一个没有间隙的紧凑数组，只包含每个时间点的值

    ```
    data: [2, 5, 3, 6, 1] 
    ```

    然后指定第一个度量的时间点和间隔。例如：

    ```
    pointStart: Date.UTC(2013,1,12), // start point in milliseconds
    pointInterval: 3600 // interval in milliseconds 
    ```

    这样，您不能在时间点之间有不同的长度。

2.  具有时间点和测量值的二维数组

    ```
    data: [[Date.UTC(2013,1,12), 2],
           [Date.UTC(2013,1,12), 5],
           [Date.UTC(2013,1,12), 3],
          ...] 
    ```

    这种指定数组的方式可能会在没有数据的地方出现间隙。

[请参阅此处](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/series/data-array-of-arrays-datetime/)的参考和[此处](http://api.highcharts.com/highcharts#series.data)的 示例。

# java - iPhone iWebDriver 和 Selenium 网格返回 org.openqa.selenium.WebDriverException：转发请求时出错输入字符串：“（null）”

> ID：14818161
> 
> 赞同：0
> 
> 时间：2013-02-11T18:07:34.160
> 
> 标签：java, selenium, selenium-grid

你好 StackOverflow 社区，

我正在尝试使用实际设备运行 Selenium 网格。当我使用安卓手机时，我的设置（有点）有效，但是当我使用 iPhone 时，它​​给了我以下错误消息

```
"Error forwarding the request For input string: "(null)" 
```

所以我的问题归结为：

1.  如何使用 Selenium Grid2 设置 iPhone WebDriver？

到目前为止我做了什么：

网格设置：

设置硒网格

```
java -jar selenium-server-standalone-2.28.0.jar -role hub 
```

设置 iPhone 节点

转到设置> iWebDriver

端口：3001

网格：localhost ip 地址和端口：4444

```
 java -jar selenium-server-standalone-2.28.0.jar -role webdriver -host [phone Host] -port 3001 -hub http://localhost:4444/grid/register -browser browserName=iPhone,platform=MAC 
```

然后我使用以下内容运行junit测试

```
 public void testIphoneDriver() throws Exception {
    DesiredCapabilities capability = DesiredCapabilities.iphone();
    WebDriver driver = new RemoteWebDriver(new URL("http://localhost:4444/wd/hub") , capability);
    driver.get("http://www.google.com");   } 
```

然后我收到一个错误“转发输入字符串的请求时出错：”（null）“奇怪的是，如果我直接连接到设备（用 iPhone IP 地址替换 localhost:4444）它工作正常。

下面是堆栈跟踪

> 引起：org.openqa.selenium.remote.ErrorHandler$UnknownServerException：转发新会话时出错 转发请求时出错输入字符串：“（null）”构建信息：版本：'2.28.0'，修订：'18309'，时间：'2012-12-11 15:53:30' 系统信息：os.name：'Windows 7'，os.arch：'x86'，os.version：'6.1'，java.version：'1.6.0_25 ' 驱动程序信息：driver.version：在 org.openqa.grid.web.servlet.DriverServlet.process(DriverServlet.java 的 org.openqa.grid.web.servlet.handler.RequestHandler.process(RequestHandler.java:111) 未知:84) 在 org.openqa.grid.web.servlet.DriverServlet.doPost(DriverServlet.java:68) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:727) 在 javax.servlet.http.HttpServlet。服务（HttpServlet.java:820）在组织。seleniumhq.jetty7.servlet.ServletHolder.handle(ServletHolder.java:565) at org.seleniumhq.jetty7.servlet.ServletHandler.doHandle(ServletHandler.java:479) at org.seleniumhq.jetty7.server.session.SessionHandler.doHandle( SessionHandler.java:225) 在 org.seleniumhq.jetty7.server.handler.ContextHandler.doHandle(ContextHandler.java:1031) 在 org.seleniumhq.jetty7.servlet.ServletHandler.doScope(ServletHandler.java:406) 在 org.seleniumhq .jetty7.server.session.SessionHandler.doScope(SessionHandler.java:186) 在 org.seleniumhq.jetty7.server.handler.ContextHandler.doScope(ContextHandler.java:965) 在 org.seleniumhq.jetty7.server.handler.ScopedHandler .handle(ScopedHandler.java:117) 在 org.seleniumhq.jetty7.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111) 在 org.seleniumhq.jetty7.server.Server。org.seleniumhq.jetty7.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:47) 的 org.seleniumhq.jetty7.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:47) 的句柄（Server.java:349）。 .jetty7.server.AbstractHttpConnection.content(AbstractHttpConnection.java:894) 在 org.seleniumhq.jetty7.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:948) 在 org.seleniumhq.jetty7.http.HttpParser.parseNext(HttpParser .java:857) 在 org.seleniumhq.jetty7.http.HttpParser.parseAvailable(HttpParser.java:235) 在 org.seleniumhq.jetty7.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:66) 在 org.seleniumhq.jetty7。 server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:254) 在 org.seleniumhq.jetty7。util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:599) at org.seleniumhq.jetty7.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:534) at java.lang.Thread.run(Unknown Source)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:39:41.803

We have provided some documentation on how to configure the connectivity and the Grid for the iPhone driver on the relevant wiki page for the Selenium project [http://code.google.com/p/selenium/wiki/IPhoneDriver](http://code.google.com/p/selenium/wiki/IPhoneDriver)

You might also test connectivity exists between your tests and the hub; and the hub and the iphone with webdriver running on it; using telnet or even a web browser to connect to the respective URLs e.g. to

```
http://localhost:4444/wd/hub 
```

if you're using a web browser on your machine that'll run the tests.

I hope that's sufficient to enable you and people in a similar predicament to get their tests working. Thanks for a detailed description of what you've done.

# python - Python 嵌套循环失败

> ID：14818162
> 
> 赞同：0
> 
> 时间：2013-02-11T18:07:34.367
> 
> 标签：python, for-loop, nested

我正在编写一个程序来执行目录中文件的文件完整性检查。代码中有3个嵌套循环。当我运行代码时，前两个循环运行良好，但第三个循环运行不止一次。

```
import hashlib
import logging as log
import optparse
import os
import re
import sys
import glob
import shutil

def md5(fileName):
    """Compute md5 hash of the specified file"""
    try:
        fileHandle = open(fileName, "rb")
    except IOError:
        return
    m5Hash = hashlib.md5()
    while True:
        data = fileHandle.read(8192)
        if not data:
            break
        m5Hash.update(data)
    fileHandle.close()
    return m5Hash.hexdigest()

req = open("requested.txt")
for reqline in req:
    reqName = reqline[reqline.rfind('/') + 1:len(reqline) - 1]
    reqDir = reqline[0:reqline.rfind('/') + 1] 
    ezfimlog = open("ezfimlog.txt", 'a')
    actFile = open("activefile.txt")
    tempFile = open("activetemp.txt", 'w') 
    for name in glob.glob(reqDir + reqName):    
        fileHash = md5(name) 

       actInt = 0
        if fileHash != None:
            print fileHash
            for actLine in actFile:
                actNameDir = actLine[0:actLine.rfind(' : ')]
                actHash = actLine[actLine.rfind(' : ') + 3:len(actLine) -1]  
                print (name + " " + actHash + " " + fileHash)  
                if actNameDir == name and actHash == fileHash:
                    tempFile.write(name + " : " + fileHash + "\n")
                    actInt = 1 
                if actNameDir == name and actHash != fileHash:
                    tempFile.write(name + " : " + actHash + "\n")         
                    actInt = 1
                    ezfimlog.write("EzFIM Log: The file " + name +  " was modified: " + actHash + "\n") 
            if actInt == 0: 
                ezfimlog.write("EzFIM Log: The file " + name +  " was created: " + fileHash + "\n")
                tempFile.write(name + " : " + fileHash + "\n")                       
    shutil.copyfile("activetemp.txt", "activefile.txt") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:13:36.007

您打开 actFile 一次，然后尝试多次读取它。每次要阅读时都需要打开它。

移动这一行：

```
actFile = open("activefile.txt") 
```

就在这一行之前：

```
 for actLine in actFile: 
```

# r - 在 R 中用 ggplot2 绘制多条线

> ID：14818163
> 
> 赞同：-1
> 
> 时间：2013-02-11T17:56:42.197
> 
> 标签：r, ggplot2

我有一些我想绘制的心理物理实验的数据。我的数据框包含来自三个实验范式中多个参与者的多个观察结果。

换句话说，每个参与者都参加了三个心理物理实验，我想将数据绘制在一张图表上。

目前，我的情节是这样的：

![在此处输入图像描述](../Images/a55a2f36cc516018ca75ed00269fb50b.png)

图右侧的数据来自其中一个实验 (1)，而左侧的大量数据来自另外两个实验 (2 和 3)。本质上，我试图以图形方式显示实验 1 产生的结果与实验 2 和 3 非常不同。

该图有两个参数，“probability_seen”和“visual_acuity”。我的数据框还包含另外两列：subject_initials 和experiment_type。如您所见，我正在按颜色区分主题。我还想为每个实验加入队列（上面的图实际上包含每个主题的三条曲线），但是如果我将 geom_line() 添加到我的图中，我会得到：

![在此处输入图像描述](../Images/f94e269831c3dcb704f9a143be020862.png)

显然，我没有要求 ggplot2 尊重“experiment_type”的状态。我该怎么做呢？

注意我目前使用以下代码调用该图：

```
qplot(visual_acuity, probability_seen, data = dframe1, colour = subject_initials,
xlab = "Visual acuity", ylab = "Probability seen") + geom_line() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T01:41:08.180

正如@Baptiste 所说，解决方案是添加`group = experiment_type`到 qplot 调用中。

# ruby - 查找网络节点之间的路径距离？

> ID：14818164
> 
> 赞同：0
> 
> 时间：2013-02-11T18:07:35.490
> 
> 标签：ruby, recursion, graph, distance

我正在编写一个网络爬虫，我需要找到两个 URL 之间的最小距离。

我用哈希表示网络。每个不在网络末端的节点都被键入到它所连接的节点的向量：

```
hash = {:v0 => [:v1,  :v2,  :v3],
        :v1 => [:v4,  :v5,  :v6], 
        :v2 => [:v7,  :v8,  :v9],
        :v3 => [:v10, :v11, :v12],
        :v4 => [:v13, :v14, :v15]} 
```

此解决方案不起作用。问题是我只在找到目标时增加距离（dist 变量），所以结果总是`1`：

```
def path src, target, hash, dist
    return -1 if hash[src] == nil # invalid distance if source is invalid
    return dist += 1 if hash[src].include? target

    arr = Array.new
    for i in hash[src] do
        arr.push path(i, target, hash, dist) 
    end
    arr = arr.delete_if {|x| x < 0} # delete invalid values
    return -1 if arr.empty?
    return arr.min # return the shortest distance
end 
```

我该如何修复它，使其在网络的每一层都增加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:15:27.260

我修好了它。这是代码，如果它对某人有帮助。

```
def distance src, target, hash
    return 0 if src == target
    return nil if hash[src].nil?
    dist = 1

    if hash[src].include? target
        return dist
    else
        arr = hash[src].map {|x| distance x, target, hash}
    end
    arr = arr.delete_if {|x| x.nil?}

    return dist + arr.min if !arr.empty?
    return nil
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T05:28:31.130

看来您还没有完全理解递归的概念。为此，首先写下您的“路径距离”的定义。我引用的原因是我希望你要么想要距离，要么想要路径（路径的长度就是距离），但我真的不知道你需要什么。

现在，重要的原因是，在这种情况下，它可能类似于“路径是从当前 URL 到目标 URL 的最短距离”。实现类似于“如果目标 URL 是直接邻居，则距离为 1，否则它是与任何邻居的最短距离加 1”。在您的情况下，您通过现有距离，这并不是真正的错误，而是不寻常的。接下来，如果您在 中找到 URL `hash[src]`，则增加该距离（是 Ruby 传递引用，顺便说一句？）*并*返回它。那时，我实际上希望您返回 1，因为这是当前位置和目标之间的距离。同样，稍后，您可能还需要`dist`在将其传递给递归调用之前递增。

现在，有一个完全不同的问题，那就是您的算法效率低下，以至于它在使用多个 URL 时将变得无用。让我们假设 URL 像“A - X - T”一样连接，X 是开始，T 是目标。如果你不走运，你会先下到 A，这可能是由数千个 URL 组成的云。在遍历整个图之后，它们中的每一个都将找到通往 T 的路径。看看广度优先搜索 (BFS) 和深度优先搜索 (DFS) 之间的区别，这将为您提供如何修复它的提示。

还有两件事：

*   考虑 A 和 A 之间的路径。我会说它们的距离为零，这是您的函数应该处理的。然后距离变为：如果 S=T，则距离为零，否则为一加到任何邻居的最短距离。
*   我会尽量避免使用 -1 表示“未找到”。我宁愿什么都不返回（nil？），因为这样你就不太可能不小心对其进行任何算术运算。

# java - 带有倒数计时器的 ProgressBar - Android

> ID：14818177
> 
> 赞同：5
> 
> 时间：2013-02-11T18:08:27.930
> 
> 标签：java, android, progress-bar, countdowntimer

我有一个 20 秒的倒数计时器成功地处理我的琐事游戏。我想在屏幕上添加`ProgressBar`（不是）。`ProgressDialog`我发现 Android 的开发人员指南令人困惑。我在 Google 上搜索了很多示例，并尝试将它们组合到我的代码中。现在，当我运行游戏时显示的所有内容都是一个空栏，在游戏的每个问题中都没有“进展”。

**QuestionView.java**

```
public class QuestionView extends Activity  {

    int correctAnswers = 0;
    int wrongAnswers = 0;
    int answer = 0;
    int i = 0;

    long score = 0;

    long startTime = 20000;
    long interval = 1000;
    long points;

    boolean timerHasStarted = false;

    String category;

    Button answer1, answer2, answer3, answer4;
    TextView question, pointCounter, questionNumber, timeCounter;

    ArrayList<Question> queries;
    Timer cdTimer;

    ProgressBar bar;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.questionviewmain);

        answer1 = (Button)findViewById(R.id.answer1);
        answer2 = (Button)findViewById(R.id.answer2);
        answer3 = (Button)findViewById(R.id.answer3);
        answer4 = (Button)findViewById(R.id.answer4);

        question = (TextView)findViewById(R.id.question);

        category = getIntent().getStringExtra("category");
        queries = getIntent().getParcelableArrayListExtra("queries");

        pointCounter = (TextView)findViewById(R.id.timer);
        questionNumber = (TextView)findViewById(R.id.timeElapsedView);
        timeCounter = (TextView)findViewById(R.id.timeCounter);

        cdTimer = new Timer(startTime, interval);

        bar = (ProgressBar)findViewById(R.id.progressbar);
        bar.setIndeterminate(false);
        bar.setMax(9);

        loadQuestion();
    }

    public void loadQuestion() {

            bar.setProgress(i);

        if(i == 10) {

            endQuiz();

        } else {

            if(!timerHasStarted) {
                cdTimer.start();
                timerHasStarted = true;
            } else {
                cdTimer.start();
                timerHasStarted = false;
            }

            answer = queries.get(i).getCorrectAnswer();

            question.setText(queries.get(i).getQuery());

            answer1.setText(queries.get(i).getA1());
            answer2.setText(queries.get(i).getA2());
            answer3.setText(queries.get(i).getA3());
            answer4.setText(queries.get(i).getA4());

            answer1.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    queries.get(i).setSelectedAnswer(0);
                    if(answer == 0) {
                        correctAnswers++;
                        nextQuestion();
                    } else {
                        wrongAnswers++;
                        nextQuestion();
                    }
                }
            });

            answer2.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    queries.get(i).setSelectedAnswer(1);
                    if(answer == 1) {
                        correctAnswers++;
                        nextQuestion();
                    } else {
                        wrongAnswers++;
                        nextQuestion();
                    }
                }
            });

            answer3.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    queries.get(i).setSelectedAnswer(2);
                    if(answer == 2) {
                        correctAnswers++;
                        nextQuestion();
                    } else {
                        wrongAnswers++;
                        nextQuestion();
                    }
                }
            });

            answer4.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    queries.get(i).setSelectedAnswer(3);
                    if(answer == 3) {
                        correctAnswers++;
                        nextQuestion();
                    } else {
                        wrongAnswers++;
                        nextQuestion();
                    }
                }
            });
        } 
    }

    public ArrayList<Question> getQueries() {
        return queries;
    }

    public void nextQuestion() {
        score = score + points;
        i++;
        loadQuestion();
    }

    public class Timer extends CountDownTimer {

        public void startCountdownTimer() {  
        }

        public Timer(long startTime, long interval) {
            super(startTime, interval);
        }

        @Override
        public void onFinish() {
            if(i >= 9) {
                cdTimer.cancel();
                endQuiz();
            } else {
                wrongAnswers++;
                nextQuestion();
            }
        }

        @Override
        public void onTick(long millisUntilFinished) {
            timeCounter.setText("Time remaining: " + (millisUntilFinished / 100));
            points = (millisUntilFinished / 100) / 2;
            pointCounter.setText("Points remaining: " + points);
            if(i < 10) {
                questionNumber.setText("Question " + (i + 1) + " of 10");
            }
        }
    }

    public void endQuiz() {
        Intent intent = new Intent(QuestionView.this, Results.class);
        intent.putExtra("correctAnswers", correctAnswers);
        intent.putExtra("wrongAnswers", wrongAnswers);
        intent.putExtra("score", score);
        intent.putParcelableArrayListExtra("queries", queries);
        intent.putExtra("category", category);
        startActivity(intent);
    }
} 
```

XML 代码

```
<ProgressBar 
                android:id="@+id/progressbar"
                android:layout_height="wrap_content" 
                android:layout_width="wrap_content"
                android:visibility="visible" 
                style="@android:style/Widget.ProgressBar.Horizontal" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T18:16:19.117

> 我正在寻找的是让 ProgressBar 缓慢下降，直到为每个问题分配给用户的 20 秒时间消失。

**新答案**
要做到这一点，让我们添加一个新行`onTick()`：

```
bar.setProgress((int) Math.round(millisUntilFinished / 1000.0)); 
```

（您可能需要调整数据类型，我远离我的编译器......我也不喜欢 CountDownTimer 类，它不准确并且经常跳过倒数第二个数字。我在这里写了一个替代类：[android CountDownTimer - 滴答之间的额外毫秒延迟](https://stackoverflow.com/q/12762272/1267661)）

* * *

**原始答案**
我有几个指示：

*   您是否为 ProgressBar 定义了最大值？

    ```
    bar.setMax(9); 
    ```

*   我建议加载`i`进度而不是常量值 10：

    ```
    bar.setProgress(i); 
    ```

*   如果您仍然没有看到任何进展，请确保您没有处于不确定模式：

    ```
    bar.setIndeterminate(false); 
    ```

    （这假设您正在使用可以[描述进度](https://developer.android.com/reference/android/widget/ProgressBar.html#setIndeterminate(boolean))的 ProgressBar 。）

* * *

**添加**
将此代码移动到`onCreate()`：

```
bar = (ProgressBar)findViewById(R.id.progressbar);
bar.setIndeterminate(false); // May not be necessary
bar.setMax(9); 
```

然后将此行移至`loadQuestion()`：

```
bar.setProgress(i); 
```

否则进度将永远不会更新，因为您只创建了一个 CountDownTimer 并且您从未真正调用过`startCountdownTimer()`.

# php - 使用 PHP-PDO->Prepare 语句将 HTML 代码插入 MySQL 数据库

> ID：14818182
> 
> 赞同：0
> 
> 时间：2013-02-11T18:08:38.977
> 
> 标签：php, html, mysql, pdo, prepared-statement

我有一个问题，我正在尝试将 html 数据插入到我的数据库中，但是当我插入它时，它会返回带有反斜杠的引号。（我认为这是一个 pdo 安全功能......但我怎么能禁用它呢？）。

PHP+PDO 代码是...

```
if(!empty($_POST['site_ads_right'])) {
  $update1 = $db->prepare("UPDATE ads SET custom_html = :html WHERE position = :pos");
  $update1->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
  $update1->bindValue(':html', $_POST['site_ads_right'], PDO::PARAM_STR);
  $update1->bindValue(':pos', 4, PDO::PARAM_INT);
  $update1->execute();
} 
```

我正在尝试使用名为 site_ads_right for ($_POST) 的 html 文本区域插入此代码

```
<a href='http://www.example.com/index.php' target='_BLANK'><img src='img/content/a46adedac744f8f98b385ed392f92b3d_lll.jpg'></a> 
```

但是当我插入它时，数据库的返回是......

```
<a href=\'http://www.example.com/index.php\' target=\'_BLANK\'><img src=\'img/content/a46adedac744f8f98b385ed392f92b3d_lll.jpg\'></a> 
```

我需要在没有过滤器的情况下插入它，什么会放反斜杠......

谢谢。

好的，与...

```
$update1 = $db->query("UPDATE ads SET custom_html = '".$_POST['site_ads_right']."' WHERE position = 4"); 
```

插入不带反斜杠的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:10:37.487

PDO is irrelevant here. It's security function doing its job flawless.

It's either [magic quotes](http://www.php.net/manual/en/security.magicquotes.disabling.php) of your own [general purpose sanitizing function](https://stackoverflow.com/questions/4223980/the-ultimate-clean-secure-function).
Just get rid of them both.

# objective-c - 特定于框架宽度的 NSString 字体大小

> ID：14818189
> 
> 赞同：3
> 
> 时间：2013-02-11T18:09:04.413
> 
> 标签：objective-c, nsstring, drawrect, sizewithfont

我正在使用`drawRect`文本显示，调用`NSString`. 我正在尝试使用`sizeWithFont`默认字体大小为 17 来自动调整字体大小（缩小）并使用循环将字体大小减小 1，如果它不适合宽度的大小。谁能帮助我如何实现这一点？现在的例子会很好，我只是将字体大小设置为 17.0

```
[[self.string displayName] drawAtPoint:CGPointMake(xcoord, ycoord) withFont:[UIFont boldSystemFontOfSize:17.0]];
CGSize size = [[self.patient displayName] sizeWithFont:[UIFont boldSystemFontOfSize:17.0]];
max_current_y = size.height > max_current_y ? size.height : max_current_y;
xcoord = xcoord + 3.0f + size.width; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T21:01:32.273

好吧，那算了。这是使用 NSString 为其返回字体的相同方法的修改版本：

```
 -(UIFont*)getFontForString:(NSString*)string
               toFitInRect:(CGRect)rect
                  seedFont:(UIFont*)seedFont{
    UIFont* returnFont = seedFont;
    CGSize stringSize = [string sizeWithAttributes:@{NSFontAttributeName : seedFont}];

    while(stringSize.width > rect.size.width){
        returnFont = [UIFont systemFontOfSize:returnFont.pointSize -1];
        stringSize = [string sizeWithAttributes:@{NSFontAttributeName : returnFont}];
    }

    return returnFont;
} 
```

以下是如何调用它：

```
NSString* stringToDraw = @"Test 123";

    CGRect rect = CGRectMake(100., 100., 100., 200.);
    UIFont* font = [self getFontForString:stringToDraw toFitInRect:rect seedFont:[UIFont systemFontOfSize:20]];
    [stringToDraw drawInRect:rect withFont:font]; 
```

代码适用于 iOS7+

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-11T18:53:04.240

尝试使用 1.0 步的字体大小可能会很慢。您可以通过对两种不同尺寸进行两种测量来极大地改进算法，然后使用线性近似来猜测与正确尺寸非常接近的尺寸。

如果结果不够接近，请使用猜测的大小而不是前两个之一重复计算，直到它足够好或停止变化：

```
// any values will do, prefer those near expected min and max
CGFloat size1 = 12.0, size2 = 56.0; 
CGFloat width1 = measure_for_size(size1);
CGFloat width2 = measure_for_size(size2);

while (1) {
    CGFloat guessed_size = size1 + (required_width - width1) * (size2 - size1) / (width2 - width1);

    width2 = measure_for_size(guessed_size);
    if ( fabs(guessed_size-size2) < some_epsilon || !is_close_enough(width2, required_width) ) {
        size2 = guessed_size;
        continue;
    }
    // round down to integer and clamp guessed_size as appropriate for your design
    return floor(clamp(guessed_size, 6.0, 24.0));
} 
```

`is_close_enough()`实施完全取决于您。鉴于文本宽度几乎与字体大小呈线性增长，您可以简单地删除它并进行 2-4 次迭代，这应该足够了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-17T14:39:43.667

我想尝试制作一个不必使用 do...while 循环反复检查字体大小的版本。相反，我假设字体点大小是线性比例，然后计算出所需框架宽度和实际框架宽度之间的大小差异，然后相应地调整字体大小。因此，我最终得到了这个功能：

```
+ (CGFloat)fontSizeToFitString:(NSString *)string inWidth:(float)width withFont:(UIFont *)font
{
    UILabel *label = [UILabel new];
    label.font = font;
    label.text = string;
    [label sizeToFit];

    float ratio = width / label.frame.size.width;
    return font.pointSize * ratio;
} 
```

传入任意大小的字体，以及字符串和所需的宽度，它将返回该字体的磅值。

我还想更进一步，找出多行字符串的字体大小，这样最长的行就可以不换行了：

```
+ (CGFloat)fontSizeToFitLongestLineOfString:(NSString *)string inWidth:(float)width withFont:(UIFont *)font
{
    NSArray *stringLines = [string componentsSeparatedByString:@"\n"];

    UILabel *label = [UILabel new];
    label.font = font;

    float maxWidth = 0;

    for(NSString *line in stringLines)
    {
        label.text = line;
        [label sizeToFit];
        maxWidth = MAX(maxWidth, label.frame.size.width);
    }

    float ratio = width / maxWidth;
    return font.pointSize * ratio;
} 
```

对我来说似乎工作得很好。希望它可以帮助别人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-25T21:53:59.017

原始海报没有说明他正在开发什么平台，但对于 Mavericks 上的 OSX 开发人员来说，`sizeWithFont:`不存在，应该使用`sizeWithAttributes`：

```
NSSize newSize = [aString sizeWithAttributes:
[NSDictionary dictionaryWithObjectsAndKeys:
           [NSFont fontWithName:@"Arial Rounded MT Bold" size:53.0],NSFontAttributeName,nil
]]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T19:02:48.523

这是一种可以返回适合矩形的字体的方法：

```
-(UIFont*)getFontToFitInRect:(CGRect)rect seedFont:(UIFont*)seedFont{
    UIFont* returnFont = seedFont;
    CGSize stringSize = [self sizeWithFont:returnFont];

    while(stringSize.width > rect.size.width){
        returnFont = [UIFont systemFontOfSize:returnFont.pointSize -1];
        stringSize = [self sizeWithFont:returnFont];
    }

    return returnFont;
} 
```

您可以将此方法添加到 NSString 类别。您可以在此处找到有关如何添加类别的更多信息：http: [//developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html#//apple_ref/doc/uid/TP40011210 -CH6-SW2](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html#//apple_ref/doc/uid/TP40011210-CH6-SW2)

如果您不想创建类别，可以将此方法添加到您的实用程序类之一，并传入您希望为其返回字体的字符串。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-07T07:28:11.907

这是另一种方法，受@puru020 和@jowie 答案的启发。希望它可以帮助某人

```
-(UIFont *) adjustedFontSizeForString:(NSString *)string forWidth:(float)originalWidth forFont:(UIFont *)font
{
    CGSize stringSize = [string sizeWithFont:font];
    if(stringSize.width <= originalWidth)
    {
        return font;
    }
    float ratio = originalWidth / stringSize.width;
    float fontSize = font.pointSize * ratio;
    return [font fontWithSize:fontSize];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-17T12:31:16.990

我对 @puru020 的解决方案进行了一些修改，添加了对属性的支持，并进行了一些改进：

**注意：**该方法应该被包裹在一个 NSString 类别中

```
- (UIFont*)requiredFontToFitInSize:(CGSize)size seedFont:(UIFont*)seedFont attributes:(NSDictionary*)attributes{
   UIFont *returnFont = [UIFont systemFontOfSize:seedFont.pointSize +1];
   NSMutableDictionary *mutableAttributes = attributes.mutableCopy;
   CGSize stringSize;

   do {
    returnFont = [UIFont systemFontOfSize:returnFont.pointSize -1];
    [mutableAttributes setObject:returnFont forKey:NSFontAttributeName];
    stringSize = [self sizeWithAttributes:mutableAttributes];
   } while (stringSize.width > size.width);

   return returnFont;
} 
```

# reporting-services - 在一个表达式中使用两个数据集的 SSRS 2005 语法

> ID：14818194
> 
> 赞同：1
> 
> 时间：2013-02-11T18:09:13.977
> 
> 标签：reporting-services, reportingservices-2005

我有以下表达式可以很好地添加两个值，正常时间和加班时间。

```
Sum(IIF(Fields!BillStatus.Value = "F", (CDec(Fields!RegHrs.Value) + CDec(Fields!OvtHrs.Value)),CDec(0)),"ReportDataset") 
```

我需要做的是为其添加第三个值，但是这第三个值将来自不同的数据集，我似乎找不到合适的语法。

不知何故，在 OvtHrs.Value 之后，我需要说一些...

```
+ (Fields!HoursWorked.Value, "RBaseJobBaseline") 
```

我如何将该值作为 IIF 的“真实”子句的一部分注入，因为它需要来自不同的数据集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:31:32.717

在 SSRS 中组合集合的唯一方法是

1.  查找 [msdn][1]
2.  查找集[msdn](http://technet.microsoft.com/en-us/library/ee240819.aspx)
3.  [多查询](http://technet.microsoft.com/en-us/library/ee210450.aspx)msdn

但是这些功能来自**MS SQL 2008R2 版本**的 SSRS ，不幸的是，*在 SSRS 2005 中*你不能这样做，你应该只在数据库级别组合数据集。

[1]：[http](http://technet.microsoft.com/en-us/library/ee210531.aspx) ://technet.microsoft.com/en-us/library/ee210531.aspx ????

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-28T00:28:37.957

将您的数据集（或 SQL 查询）组合成**一个查询。**

使用 SSRS2005 中的 DATASETS 选项（通过控件的属性）通过使用 FIRST()、SUM() 等报表聚合函数来捕获“根”或主数据集。

要报告**单个数据集**的详细信息，请使用 FIELDS 选项。

SSRS2005 一次只能处理一个数据集，除非您使用具有不同数据集的多个表（或查找参数等），但它们仍然完全相互独立。

# asp.net - 使用 powershell 在 asp.net 中运行 SSIS 包

> ID：14818198
> 
> 赞同：0
> 
> 时间：2013-02-11T18:09:27.727
> 
> 标签：asp.net, powershell, ssis, package

谁能告诉我如何在 asp.net 的服务器上使用 powershell 运行 SSIS 包。请注意，我还需要指定配置文件路径。

```
var processStartInfo = new ProcessStartInfo
                {
                    Arguments = "dtexec /F " + "\"" + pkgPath + packageName +"\"",
                    FileName = "C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe"
                };

                Process process = Process.Start(processStartInfo); 
```

如何在上面的代码中指定配置文件路径。

# android - 包含 webview 和另一个 relativelayout 的 RelativeLayout

> ID：14818199
> 
> 赞同：0
> 
> 时间：2013-02-11T18:09:31.290
> 
> 标签：android

我正在尝试制作一个底部有一个小栏，其高度`Activity`有刷新、后退、前进等按钮。我面临的问题是我想要消耗整个视图的高度除了底部。`WebView``40dp``WebView``40dp`

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <WebView
        android:id="@+id/id_web_view_browser"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_alignParentBottom="true"
        android:background="#000000"
        android:orientation="horizontal" >

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:layout_marginLeft="10dp"
            android:background="@drawable/ic_action_example"
            android:onClick="onClick"
            android:textSize="14sp" />
    </RelativeLayout>
</RelativeLayout> 
```

以上是我到目前为止所拥有的......现在浏览器具有整个屏幕的高度，`RelativeLayout`底部是（覆盖浏览器的一部分）。我还能做些什么来只留下底部`40dp`吗`RelativeLayout`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:29:00.913

弄清楚了。

我能够做到以下几点：

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <WebView
        android:id="@+id/id_web_view_browser"
        android:layout_above="@+id/id_web_view_bar"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" />

    <RelativeLayout
        android:id="@+id/id_web_view_bar"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_alignParentBottom="true"
        android:background="#000000"
        android:orientation="horizontal" >

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:layout_marginLeft="10dp"
            android:background="@drawable/icon_refresh"
            android:onClick="onClick"
            android:textSize="14sp" />
    </RelativeLayout>
</RelativeLayout> 
```

在`WebView`我设置以下属性：`android:layout_above="@+id/id_web_view_bar"`. 这保持了酒吧的底部`40dp`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:29:29.370

将 webview 放置在第二个相对布局之上。然后将相对布局更改为与父底部对齐。那应该行得通

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-07T18:13:19.343

有点晚了......但是可能会帮助任何其他人......

```
<RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
        <Button
           android:id="@+id/button_xs"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="10dp"
            android:layout_alignParentBottom="true"
            android:background="@drawable/ic_action_example"
            android:onClick="onClick"
            android:textSize="14sp" />
        <WebView
        android:id="@+id/id_web_view_browser"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentTop="true"
        android:layout_above="@+id/button_xs"/>
</RelativeLayout> 
```

在这种情况下，按钮或其他视图不需要指定任何高度，假设在 webview 之后。

# javascript - 如何在javascript中将字母转换为数字？

> ID：14818204
> 
> 赞同：0
> 
> 时间：2013-02-11T18:09:48.543
> 
> 标签：javascript, converters

我一直在尝试创建一个简单的 javascript 程序，用户可以在其中输入单词/句子，该程序会显示您在翻盖手机中输入的数字。例如，如果我输入“add”，它将输出“122”。

我该怎么做？我尝试了很多不同的东西，但没有任何效果。看起来它应该是一个简单的程序。你能帮我做这件事，或者把我链接到一个类似的程序吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:17:38.060

```
 function str2num(mystr) {
   mystr = mystr.toUpperCase();
   var conv = [];
   var l = mystr.length;
   for (var i=0; i conv[i] = mystr.charCodeAt(i)-65;
 }
   return conv;
 } 
```

[读这个](http://javascript.about.com/library/blstrconv.htm)

[http://www.yaldex.com/FSEquivalents/PhoneNumberConverter.htm](http://www.yaldex.com/FSEquivalents/PhoneNumberConverter.htm)用于电话转换器

万一链接中断，代码如下：

```
<script language="javascript" type="text/javascript">

<!-- Begin
 function convert(input) {
 var inputlength = input.length;
 input = input.toLowerCase();
 var phonenumber = "";
 for (i = 0; i < inputlength; i++) {
 var character = input.charAt(i);

 switch(character) {
 case '0': phonenumber+="0";break;
 case '1': phonenumber+="1";break;
 case '2': phonenumber+="2";break;
 case '3': phonenumber+="3";break;
 case '4': phonenumber+="4";break;
 case '5': phonenumber+="5";break;
 case '6': phonenumber+="6";break;
 case '7': phonenumber+="7";break;
 case '8': phonenumber+="8";break;
 case '9': phonenumber+="9";break;
 case '-': phonenumber+="-";break;
 case  'a': case 'b': case 'c': phonenumber+="2";break;
 case  'd': case 'e': case 'f': phonenumber+="3";break;
 case  'g': case 'h': case 'i': phonenumber+="4";break;
 case  'j': case 'k': case 'l': phonenumber+="5";break;
 case  'm': case 'n': case 'o': phonenumber+="6";break;
 case  'p': case 'q': case 'r': case 's': phonenumber+="7";break;
 case  't': case 'u': case 'v': phonenumber+="8";break;
 case  'w': case 'x': case 'y': case 'z': phonenumber+="9";break;
}
}
document.myform.number.value = phonenumber;
return true;
}
//  End -->
</script>
<form name=myform>
<table border=0>
<tr>
<td>Alphanumeric #:</td>
<td><input type=text size=20 maxlength=20 name=alphabet value="Rachel"></td>
</tr>
<tr>
<td>Converted #:</td>
<td><input type="text" size=20 maxlength=20 name="number"></td>
</tr>
<tr>
<td align=center colspan=2><input type=button value="Convert" onClick="return    convert(document.myform.alphabet.value)"></td>
</table>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:29:33.663

这应该做你想做的事：http: [//jsfiddle.net/qbFxs/1/](http://jsfiddle.net/qbFxs/1/)

```
var map = [' ',,'abc','def','ghi','jkl','mno','pqrs','tuv','wxyz'];

$("#input").keyup(function(e){
    var v = this.value.toLowerCase(),
        out = [];

    for(var i = 0; i < v.length; i++){
        for (var j = 0; j < map.length; j++){
            if (map[j] && map[j].indexOf(v[i]) > -1){
                out.push(j);
                break;
            }
        }
    }

    $("#output").text(out.join(''));
}); 
```

**注意：**我将空间映射到`0`，如果你不想要这个，你可以去掉 map 数组中的第一个元素。

# core-data - CFBitVector 存储为 coredata 对象的属性

> ID：14818206
> 
> 赞同：0
> 
> 时间：2013-02-11T18:09:53.123
> 
> 标签：core-data, nsmanagedobject, cfbitvector

我正在尝试为 coreData 中的对象创建指纹，并希望将其设置为对象的属性。我认为 CFBitArray 是要走的路。

我试图弄清楚如何保存每个对象：

这是一个例子

目的

属性：名称：指纹（“01010101010101010101010110”）等...

这用于尝试与主打印匹配

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:42:07.873

您必须将其转换为 Core Data 理解的内容，并保存转换后的值。有几种可能性，这两种可能性都涉及通过`CFBitVectorGetBits`. 一旦你有了它，你可以

*   将它们保存在`NSData`using中`+dataWithBytes:length:`，然后将其放入托管对象的二进制类型属性中。或者...
*   根据您使用的字节数，将它们保存在`NSNumber`using 之类的东西中`+numberWithLong:`（或者任何长度足以容纳位数的东西）。然后将其放入 Core Data 的整数类型之一中——再次选择适合您的位的任何大小。

您可以通过在`NSManagedObject`子类上使用自定义访问器方法或使用可*转换*的Core Data 属性类型和值转换器类来进行转换。对于后者，您将`NSValueTransformer`在那里继承并实现您的转换（Apple 提供了几个示例）。

根据您实际在做什么，您可能需要考虑使用`NSIndexSet`而不是`CFBitVectorRef`. 如果没有别的，它符合`NSCoding`-- 这意味着您可以使用可转换的属性，但依赖 Core Data 的默认值转换器，而不是自己编写。

您可能还会发现仅使用其中一种整数类型并依靠位运算符来确定是否设置了位要简单得多。然后你不需要对 Core Data 做任何特别的事情，你只需选择适当大小的整数类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:06:56.133

你为什么不只是存储`NSData`？`NSData`在内部存储二进制数据比在内部存储更容易`CFBitvectorRef`。

如果您尝试存储某物的*哈希*/*指纹*，我假设您正在使用,和创建**SHA-256**哈希。这些会给你一个所谓的摘要，它是你传递到.`CC_SHA256_Init``_Update``_Final``CC_SHA256_Update`

```
// Create the context:
CC_SHA256_CTX shaContext;
CC_SHA256_Init(&shaContext);
// For each value:
CC_SHA256_Update(&shaContext, &v, sizeof(v));
// Get the fingerprint / digest:
unsigned char digest[CC_SHA256_DIGEST_LENGTH];
CC_SHA256_Final(digest, &shaContext);
NSData *fingerprint = [NSData dataWithBytes:digest length:sizeof(digest)]; 
```

然后，您可以将该*指纹*存储到 Core Data 属性中，即*Binary Data*。

根据 的类型`v`，您可能必须将调用更改为`CC_SHA256_Update()`。如果您在 NSObject 上执行此操作，则需要为您感兴趣的每个实例变量调用它（这应该是指纹的一部分），例如，如果您有

```
@property (nonatomic) int32_t count;
@property (nonatomic, copy) NSString *name; 
```

你会的

```
int32_t v = self.count
CC_SHA256_Update(&shaContext, &v, sizeof(v));

NSData *d = [self.name dataUsingEncoding:NSUTF8Stringencoding];
CC_SHA256_Update(&shaContext, [data bytes], [data length]); 
```

# web-services - 在 Mule 上公开 WebService

> ID：14818208
> 
> 赞同：0
> 
> 时间：2013-02-11T18:09:59.130
> 
> 标签：web-services, wsdl, mule

我想**在 mule 上公开一个 WebService** 及其工作。

*   我担心的是，我不确定这是否是公开 Web 服务的正确方法。
*   因为我希望能够查看我的 Mule HTTP 入站端点 wsdl，即

> XXX:8084/HelloService?wsdl

，请注意实际服务在端口**8085**上运行。

```
 <flow name="WS_In" doc:name="WS_In">
    <http:inbound-endpoint address="http://localhost:8084/HelloService" exchange-pattern="request-response" doc:name="HTTP">
        <cxf:proxy-service wsdlLocation="http://localhost:8085/HelloService?WSDL" payload="envelope" namespace="http://example.org/HelloService"  service="Hello"/>
    </http:inbound-endpoint>        

    <http:outbound-endpoint exchange-pattern="request-response" host="localhost" port="8085" doc:name="HTTP" path="test"/>

</flow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:35:41.983

因此，您不是在*公开*服务，而只是在*代理*它吗？

为什么不使用现成的模式呢？请参阅： http: [//www.mulesoft.org/documentation/display/current/Web+Service+Proxy+Pattern](http://www.mulesoft.org/documentation/display/current/Web+Service+Proxy+Pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-12T01:37:37.780

代理 Web 服务是一种非常常见的做法，用于安全或审计等不同原因。这种模式允许对这种代理进行简短而简单的配置。

有了这个你可以

1.  转换 SOAP 信封（正文或标头）以添加或删除特定条目。
2.  重写远程 WSDL，使它们看起来绑定到公司防火墙内的服务。

Mule 已经以各种方式定义了这些代理转换器：参考：[https ://docs.mulesoft.com/mule-user-guide/v/3.7/web-service-proxy-pattern#wsdl-redirection](https://docs.mulesoft.com/mule-user-guide/v/3.7/web-service-proxy-pattern#wsdl-redirection)

# javascript - Randomizing multiple JavaScript arrays

> ID：14818212
> 
> 赞同：0
> 
> 时间：2013-02-11T18:10:23.527
> 
> 标签：javascript, arrays, random

Still working on JavaScript fundamentals. The following code prints out the correct images and attributes, but I want to randomise the images and I'm not sure how to do this. I found other articles about using the Fisher-Yates shuffle, but I can't seem to be able to implement it, and I'm not sure if it's the right decision.

```
var counter = 0;
var pictures = new Array();

    pictures[counter++] = ['http://example.com','img/pic1.jpg','Pic Logo'];
    pictures[counter++] = ['http://example2.com/','img/pic2.jpg','Pic 2 Logo'];
    pictures[counter++] = ['http://example3.com/','img/pic3.jpg','Pic 3 Logo'];

    function showImages() {
        var i = 0;
        for (var p = pictures.length-1; p >= 0; p--) {
            document.write('<div class="images"><a href="' + pictures[p][0] + '"><img src="' + pictures[p][1] + '" alt="' + pictures[p][2] + '" title="' + pictures[p][2] + '"  /></a></div>');
            i++;
        }
    } 
```

**Edit:** How can I access specific items in my pictures array, similar to my original code? - [http://jsfiddle.net/chris_s/eW9Tm/](http://jsfiddle.net/chris_s/eW9Tm/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:13:46.843

您可以使用 Jonas Silva 的[`shuffle`](http://dzone.com/snippets/array-shuffle-javascript)函数来随机化数组：

```
//+ Jonas Raoni Soares Silva
//@ http://jsfromhell.com/array/shuffle [v1.0]
function shuffle(o){ //v1.0
    for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
    return o;
}; 
```

你这样称呼它：`shuffle(pictures);`.

# php - 更新配置文件 php

> ID：14818213
> 
> 赞同：4
> 
> 时间：2013-02-11T18:10:35.460
> 
> 标签：php, sql, sql-update, insert-into

我在 php 中创建了一个个人资料页面。该页面包括地址和电话字段，并提示用户插入他们的数据。然后将数据保存在我的名为 profile 的表中。一切正常，但问题是表仅在已包含数据时才更新。我该如何修改它（可能是我的函数中的mysql查询），以便即使它是空的，数据也会被输入到表中。我可以使用类似 UPDATE OR INSERT INTO 语法的东西吗？谢谢

```
<?php

if ( isset($_GET['success']) === true && empty($_GET['success'])===true ){
echo'profile updated sucessfuly';
}else{

 if( empty($_POST) === false  &&  empty($errors) === true ){

    $update_data_profile = array(
                'address' => $_POST['address'],
                'telephone' => $_POST['telephone'],
                );

   update_user_profile($session_user_id, $update_data_profile);

   header('Location: profile_update.php?success');

   exit();

}else if ( empty($errors) === false ){
   echo output_errors($errors);
}

?> 
```

然后通过使用以下功能

```
function update_user_profile($user_id, $update_data_profile){

$update = array();

array_walk($update_data_profile, 'array_sanitize');

foreach($update_data_profile as $field => $data )
    {              
        $update[]='`' . $field . '` = \'' . $data . '\'';
}

     mysql_query(" UPDATE `profile` SET " . implode(',  ', $update) . " WHERE `user_id` = $user_id ") or die(mysql_error());

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:57:41.123

我是 psu 发布的答案的新手，并且肯定会对此进行检查，但是通过快速阅读，您在使用这些特殊语法时需要非常小心。

想到的 1 个原因：您不知道要插入或更新信息的表可能会发生什么。如果定义了多个唯一性，那么您可能会遇到严重的麻烦，这在扩展应用程序时很常见。

2 语法替换是我很少希望在我的应用程序中发生的功能。因为我不想从表中已经存在的行中丢失数据。

我并不是说他的回答是错误的，只是说明由于上述原因和可能的更多原因，在使用它时需要采取预防措施。

如第一篇文章所述，我可能是这样做的新手，但此时我更喜欢：

```
$result = mysql_query("select user_id from profile where user_id = $user_id limit 1");
if(mysql_num_rows($result) === 1){
    //do update like you did
}
else{
    /** 
     *  this next line is added after my comment, 
     *  you can now also leave the if(count()) part out, since the array will now alwayss
     *  hold data and the query won't get invalid because of an empty array
     **/
    $update_data_profile['user_id'] = $user_id;
    if(count($update_data_profile)){
        $columns = array();
        $values = array();
        foreach($update_data_profile as $field => $data){
            $columns[] = $field;
            $values[] = $data;
        }
        $sql = "insert into profile (" .  implode(",", $columns) .") values ('" . implode("','", $values) . "')" ;
        var_dump($sql); //remove this line, this was only to show what the code was doing
        /**update**/
        mysql_query($sql) or echo mysql_error();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:45:58.240

如果表中没有与 user_id 对应的任何数据，则无法更新表，这意味着您必须有一行包含 user_id 和 null 或其他字段的其他内容。

a）您可以尝试检查表是否包含数据，如果不插入则使用更新（不理想）

```
$result = mysql_query("UPDATE ...");       
if (mysql_affected_rows() == 0)    
    $result = mysql_query("INSERT ..."); 
```

b）查看此链接

[http://www.kavoir.com/2009/05/mysql-insert-if-doesnt-exist-otherwise-update-the-existing-row.html](http://www.kavoir.com/2009/05/mysql-insert-if-doesnt-exist-otherwise-update-the-existing-row.html)

[http://dev.mysql.com/doc/refman/5.0/en/replace.html](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

[http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T14:03:24.553

@Stefanos

您可以在 SQL 查询中使用“REPLACE INTO”命令代替“INSERT INTO”。

例如

假设您有插入查询

```
INSERT INTO EMPLOYEE (NAME,ADD) values ('ABC','XYZZ'); 
```

现在您可以使用以下查询作为插入和更新的组合

```
REPLACE INTO EMPLOYEE (NAME,ADD) values ('ABC','XYZZ'); 
```

希望这会有所帮助！

# php - 使用 PHP/AJAX 在后台写入文件

> ID：14818216
> 
> 赞同：0
> 
> 时间：2013-02-11T18:10:50.760
> 
> 标签：php, ajax, output

这一切有点新，但我试图在后台将文件写入服务器上的磁盘时显示网页。我让一个简单的页面加载，然后将 AJAX 响应发送到第二个脚本，该脚本处理实际的文件操作。我这样做是为了让用户在生成文件时不会等待 30 多秒来加载一个简单的页面，并试图避免浏览器超时。文件写入后，我想重定向到它。但是，该文件永远不会被创建，并且重定向会直接将您发送到 404，尽管 AJAX 请求总是返回成功的状态代码。

**例子**

**`index.php`**

```
<html>
  <head>
    <script src="js/jquery-1.8.3.min.js"></script>
  </head>
  <body>
    <script>
      $.ajax({
        url: "out.php",
        method: "get",
        data: { 'answer' : 42 },
        success: function(data, status, jqxhr) {
          alert(jqxhr.responseText);
          $("body").append("<meta http-equiv='refresh' content='0;out.log'>");
        }
      });
    </script>
  </body>
</html> 
```

**`out.php`**

```
<?php
  echo "WHAT IS HAPPENING....";
  $fd = fopen("out.log", "wb");
  fwrite($fd, "Not this... " . $_GET['answer']);
  fclose($fd);
?> 
```

`out.php`如果我使用 运行它，它会按我的预期工作`php-cgi out.php answer=42`，但同样，当通过浏览器访问时，什么都不会被写入。

有什么方法可以`out.php`创建和写入`out.log`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:17:18.623

事实证明，我根本没有权限在我试图使用的目录中写入文件......经过一点`chown`魔法，现在一切都为我工作了。

# eclipse - Eclipse/Glassfish running out of memory

> ID：14818217
> 
> 赞同：1
> 
> 时间：2013-02-11T18:10:53.897
> 
> 标签：eclipse, glassfish

I'm developing a web app using Eclipse/Glassfish on Windows 7, and I see this error at least a few times a day when deploying a new version of the app:

```
SEVERE: Exception while preparing the app : PermGen space
SEVERE: java.lang.OutOfMemoryError: PermGen space 
```

When I see it, I have to close Eclipse, use the Windows Task Manager to stop a Java process (which I suspect is Glassfish), and re-start Eclipse. It's a nuisance, and an unwelcome interruption.

Is there anything I can fix/configure that would make this error go away, or at least decrease its frequency? Or is this a memory leak I'm just going to have to live with?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-26T17:16:36.787

这是 Sun / Oracle JVM <= 7 中的内存泄漏，在使用 JPA 时经常发生。升级到[Oracle 的 JVM 8 应该可以解决这个问题](http://karunsubramanian.com/websphere/one-important-change-in-memory-management-in-java-8/)。

如果您绑定到 JVM 7 或更低版本，您可以在 Eclipse 中将以下 VM 参数添加到 Glassfish 的启动配置中以增加内存限制（在本示例中为 1024 MB），这会降低 OOM 的规律性：

```
-XX:MaxPermSize=1024M 
```

# python - python用正则表达式替换字符串

> ID：14818224
> 
> 赞同：0
> 
> 时间：2013-02-11T18:11:01.987
> 
> 标签：python

我正在寻找一个正则表达式来识别模板中的块，这样我就可以提供文本来替换整个块

```
<div>
 {% for link in links %}
     textext
 {% endfor %}
</div> 
```

得到这样的东西

```
<div>
 mytext
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:24:38.610

尝试：

```
re.sub('\{.*[\w\s]*.*\}','mytext',txt) 
```

输出：

```
'<div>\n mytext\n</div>' 
```

`\{`匹配第一个大括号，然后`.*[\w\s]*.*`匹配所有其余部分（包括空格和换行符），直到最后一个大括号`\}`。

您可以使用以下内容更具体：

```
re.sub('\{% for link in links.*[\w\s]*.*end for %\}','mytext',txt) 
```

然后您可以确定它只会匹配您指定类型的 for 循环。

编辑：eyquem 指出我的回答对于许多情况来说是不够的，特别是如果它在中间有符号。冒着天真地误解我的解决方案为什么不起作用的风险，我只是在我的模式中添加了一个额外的位，它甚至可以成功匹配他的测试用例，所以我们将看看它是否有效：

```
re.sub('\{.*[\W\w\s]*.*\}', 'mytext', txt) 
```

结果（`txt`eyquems 的 Pink Floyd 示例在哪里）：

```
"Pink Floyd"
<div>
 mytext
</div>
"Fleetwood Mac" 
```

所以，我认为添加所有非字母数字符号可以解决它。或者我可能在另一个案例中更明显地打破了它。我相信有人会指出来。:)'

EDIT2：还应该注意的是，如果页面上有多个`for`-loop，我们的两种解决方案都会失败。例子：

```
"Beatles"
<div>
 {% for link in links %}
    iiiY=uuu
    12345678
 {% endfor %}
</div>
"Tino Rossi"
{ for link in links % }
   asdfasdfas
{% endfor% } 
```

产量

```
"Beatles"
<div>
 mytext 
```

并通过匹配 AFTER 之后的下一组来删除其余部分。

编辑 2： eyquem 再次正确地修复了他的问题，如果后面有的话，不要删掉。他的修复也修复了我的：

```
re.sub('\{.*[\W\w\s]*?.*\}', 'mytext', txt) 
```

是新模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:22:18.297

我很遗憾地说，Logan 的回答在以下情况下不起作用：

```
import re

ss1 = '''"Pink Floyd"
<div>
 {% for link in links %}
    aaaY}eee
    12345678
 {% endfor %}
</div>
"Fleetwood Mac"'''

pat = '(\{.*)([\w\s]*)(.*)(\})'
print ss1
print '---------------------------'
for el in re.findall(pat,ss1):
    print el
print '---------------------------'
print re.sub(pat,':::::',ss1) 
```

结果

```
"Pink Floyd"
<div>
 {% for link in links %}
    aaaY}eee  # <--------- } here
    12345678
 {% endfor %}
</div>
"Fleetwood Mac"
---------------------------
('{% for link in links %}', '\n    aaaY', '', '}')
('{% endfor %', '', '', '}')
---------------------------
"Pink Floyd"
<div>
 :::::eee
    12345678
 :::::
</div>
"Fleetwood Mac" 
```

.
.

```
import re

ss2 = '''"Beatles"
<div>
 {% for link in links %}
    iiiY=uuu  # <-------- = here
    12345678
 {% endfor %}
</div>
"Tino Rossi"'''

pat = '(\{.*)([\w\s]*)(.*)(\})'
print ss2
print '---------------------------'
for el in re.findall(pat,ss2):
    print el
print '---------------------------'
print re.sub(pat,':::::',ss2) 
```

结果

```
"Beatles"
<div>
 {% for link in links %}
    iiiY=uuu
    12345678
 {% endfor %}
</div>
"Tino Rossi"
---------------------------
('{% for link in links %', '', '', '}')
('{% endfor %', '', '', '}')
---------------------------
"Beatles"
<div>
 :::::
    iiiY=uuu
    12345678
 :::::
</div>
"Tino Rossi" 
```

问题如下（我的代码中的**findall()**结果有助于理解）：

`.*`只要不遇到换行符，第一个就会运行。
然后`[\w\s]*`只要有这些类别的字符就运行： **字母、数字、下划线、空格**。
空格中有换行符，然后`[\w\s]*`可以从一行传递到下一行。
但是，如果遇到不在这些类别中的字符`[\w\s]*`，它将在该字符处停止。

如果是 a ，则在此之前`}`的最后一个`.*`匹配 项。 然后正则表达式搜索下一个匹配项。`''``}`

如果是 a `=`，则在到达下一个之前，最后一个`.*`无法匹配文本套件，`}`因为它无法传递下一个换行符。因此，结果与`}`文本中的 a 不同。

.

替换`.*`为`.+`不会改变任何内容，正如在上面的代码中`.*`替换为所看到的那样。`.+`

.

.

我的解决方案

我在这段代码中提出了模式：

```
import re
pat = ('\{%[^\r\n]+%\}'
       '.+?'
       '\{%[^\r\n]+%\}')

ss = '''"Pink Floyd"
<div>
 {% for link in links %}
    aaaY}eee
    12345678
 {% endfor %}
</div>
"Fleetwood Mac"
"Beth Hart"
"Jimmy Cliff"
"Led Zepelin"
Beatles"
<div>
 {% for link in links %}
    iiiY=uuu
    12345678
 {% endfor %}
</div>
"Tino Rossi"'''

print '\n',ss,'\n\n---------------------------\n'
print re.sub(pat,':::::',ss,flags=re.DOTALL) 
```

导致

```
"Pink Floyd"
<div>
 {% for link in links %}
    aaaY}eee
    12345678
 {% endfor %}
</div>
"Fleetwood Mac"
"Beth Hart"
"Jimmy Cliff"
"Led Zepelin"
Beatles"
<div>
 {% for link in links %}
    iiiY=uuu
    12345678
 {% endfor %}
</div>
"Tino Rossi" 

---------------------------

"Pink Floyd"
<div>
 :::::
</div>
"Fleetwood Mac"
"Beth Hart"
"Jimmy Cliff"
"Led Zepelin"
Beatles"
<div>
 :::::
</div>
"Tino Rossi" 
```

编辑

更简单：

```
pat = ('\{%[^}]+%\}'
       '.+?'
       '\{%[^}]+%\}') 
```

仅当法线`{%.....%}`不包含符号时`}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:21:58.563

大锤方法是：

```
In [540]: txt = """<div>
 {% for link in links %}
     textext
 {% endfor %}
</div>"""

In [541]: txt
Out[541]: '<div>\n {% for link in links %}\n     textext\n {% endfor %}\n</div>'

In [542]: re.sub("(?s)<div>.*?</div>", "<div>mytext</div>", txt)
Out[542]: '<div>mytext</div>' 
```

# php - Mysql Query Group By Display Using PHP

> ID：14818232
> 
> 赞同：0
> 
> 时间：2013-02-11T18:11:23.757
> 
> 标签：php, mysql, group-by

I want to display a table that looks like this from a Mysql query using PHP:

```
Vendor Name

Item Not to Drawing     Item Defective    Incorrect Item Received   Other

         9                    2                    3                  5

Vendor Name

Item Not to Drawing     Item Defective    Incorrect Item Received   Other

         2                    4                    5                  7 
```

etc..

Here is my code....

```
<?php
$con = mysql_connect("localhost","xxx","xxx");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("qa", $con);

$result = mysql_query("SELECT Vendor, Sum(draw), Sum(defective), Sun(received), Sum(other) FROM qa_reports Group by Vendor Order by Vendor ASC");
echo "<table>
<tr>
<th>Item not to Drawing</th>
<th>Item Defective</th>
<th>Incorrect Item Received</th>
<th>Other</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['Sum(draw)'] . "</td>";
  echo "<td>" . $row['Sum(defective)'] . "</td>";
  echo "<td>" . $row['Sum(received'] . "</td>";
  echo "<td'>" . $row['Sum(other)'] . "</td>";
  echo "</tr>";
  }
echo "</table>";
mysql_close($con);
?> 
```

Not sure how to get the above results formatted as such.

I've done this with CFML but am new to PHP and can not grasp how to list results in a table grouped by a field.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:13:44.797

您需要为列设置别名以便在`$row`数组中引用它们。

```
SELECT vendor, 
       Sum(draw)      AS draw, 
       Sum(defective) AS defective, 
       Sun(received)  AS received, 
       Sum(other)     AS other 
FROM   qa_reports ... 
```

然后你可以像这样引用它们：

```
$row['draw'];
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T18:15:04.803

`SELECT Vendor, Sum(draw) AS sumDraw, Sum(defective) AS sumDefective`...

`$row['sumDraw']`等等

# awk - 连续几次 awk substr

> ID：14818233
> 
> 赞同：2
> 
> 时间：2013-02-11T18:11:33.713
> 
> 标签：awk

我正在使用`awk substr()`从字符串中提取子字符串。

例如，如果我的字符串如下所示：

```
qwertyuiop 
```

我想提取 (1-3) & (6-9) 字符我用这个：

```
awk '{print (substr($1, 1, 3) substr($1, 6, 4))}'  
qweyui 
```

如何多次重复特定的减法？

例如，我想提取 (1-3) & (6-9)(6-9)(6-9) 字符以获得如下结果：

```
qweyuioyuioyuio 
```

当然我可以使用这样的命令：

```
awk '{print (substr($1, 1, 3) substr($1, 6, 4) substr($1, 6, 4) substr($1, 6, 4))}' 
```

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:54:44.093

如果你想提取不重叠的子字符串，你可以使用 gawk 的固定列宽选项：

```
echo "qwertyuiop" | gawk -v FIELDWIDTHS="3 2 4" '{ print $1 $3 $3 $3 }' 
```

您定义 3 列。第一个是 3 个字符宽（这与 substr($1, 1, 3) 相同）。第二个是 2 个字符宽（我们将忽略它）。第三个是您的第二个子字符串 (substr($1, 6, 4))。

您可以直接打印您定义的字段。

见[https://www.gnu.org/software/gawk/manual/gawk.html#Constant-Size](https://www.gnu.org/software/gawk/manual/gawk.html#Constant-Size)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:59:36.467

有一篇[令人愉快的帖子](http://ben-zine.livejournal.com/9258.html)解释了在 awk 中重复字符串的各种方法。

我将引用最明显的：

```
function rep1(s,n,      r) {
# O(n) allocate/appends
# 2 lines of code
# This is the simplest possible solution that will work:
# just repeatedly append the input string onto the value
# that will be passed back, decrementing the input count
# until it reaches zero.
        while (n-->0) r = r s;
        return r;
} 
```

PS：函数参数前的大空间`awk`表示该参数用作临时局部变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T23:33:06.620

是的。您可以简单地将子字符串保存到变量中，然后根据需要重新打印。不要忘记设置一个 null `OFS`：

```
awk '{ print substr($1, 1, 3), x = (substr($1, 6, 4)), x, x }' OFS= 
```

测试：

```
echo "qwertyuiop" | awk '{ print substr($1, 1, 3), x = (substr($1, 6, 4)), x, x }' OFS= 
```

结果：

```
qweyuioyuioyuio 
```

* * *

如果您需要打印超过三到四次的内容，则可能值得使用`for`循环：

```
echo "qwertyuiop" | awk '{ for(i=1;i<=5;i++) x = x substr($1, 6, 4); print substr($1, 1, 3), x }' OFS= 
```

结果：

```
qweyuioyuioyuioyuioyuio 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T20:24:18.083

这是此类问题的解决方案之一（混乱但有效）。

```
 echo qwertyuiop | awk '{m=substr($1, 6, 4); {while (count++<3) string=string m; 
 print substr($1, 1, 3) string}}' 

 qweyuioyuioyuio 
```

# ios - 手动迁移 iCloud Core Data

> ID：14818237
> 
> 赞同：1
> 
> 时间：2013-02-11T18:12:12.883
> 
> 标签：ios, core-data, upgrade, icloud

我有一个应用程序可以读取世界各地站点的风读数。我决定使用 iCloud 和 Core Data，使用鞋盒式应用程序。

风速读数每小时更新一次，在使用该应用程序几周后，我意识到这是一个坏主意，因为 iCloud/Core Data 只填满了兆字节的交易，并且恢复设备需要 10 分钟才能将商店下载到新设备。

我对此的解决方案是使用 Core Data 配置，以便“站点”存储在 iCloud 存储中，但每小时变化的“风读数”在 12 小时后被删除，存储在本地存储中。如果它更容易想象，它的工作方式类似于每小时更改的 RSS“站点”和“条目”。

这一切都很好，但我不知道如何为我的应用程序的 2.0 版本编写迁移代码。在阅读了配置是如何工作的之后，我不得不删除站点和风读数之间的父/子关系，并使用获取请求使用通用的 siteIdentifier UUID 将它们链接起来。

这样做我假设我不能使用轻量级迁移？加载版本化的 .momd 模型文件也只是给了我最新的模型，所以我如何获取原始模型文件来加载商店并手动完成所有操作。

另一方面，这是否太复杂了，我会更好地删除 iCloud 支持，或者您还有其他推荐的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:49:55.303

在这种情况下，您应该能够使用轻量级迁移。

原因是，就您的“iCloud”配置而言，您只是在删除一个实体并删除一个属性（即删除一个表和一列）。自动迁移可以处理得很好。

然而...

有一个问题。它不会首先将您拥有的数据复制到“本地”配置。因此，您需要在迁移之前手动执行此操作。以下是基本步骤：

1.  确定是否需要进行此迁移。
2.  将 sqlite 文件复制到“local.sqlite”。
3.  站起来 iCloud 配置，这将删除读数。
4.  站起来本地配置，这将删除站点。
5.  测试，测试，再测试，然后继续测试。

# java - Android SQLite Columns ..... are not unique

> ID：14818246
> 
> 赞同：2
> 
> 时间：2013-02-11T18:12:51.230
> 
> 标签：java, android, sql

I am using SQLite on android and am getting this error

```
02-11 18:05:37.224: E/SQLiteDatabase(26583): android.database.sqlite.SQLiteConstraintException: columns name, foreign_word are not unique (code 19) 
```

However, this is called right after onUpgrade() is called, so there should be nothing in the database itself. This is the SQL Statement used :

```
private static final String CREATE_DB_TB_2 = "CREATE TABLE "
        + TABLE_VOCAB_WORDS + "(" + COLUMN_NAME + " TEXT NOT NULL,"
        + COLUMN_WORD_FOREIGN + " TEXT NOT NULL," + COLUMN_WORD_ENGLISH
        + " TEXT NOT NULL," + COLUMN_CORRECT
        + " BYTE NOT NULL, PRIMARY KEY (" + COLUMN_NAME + ","
        + COLUMN_WORD_FOREIGN + "))"; 
```

As there is nothing in the database as I drop the table, why am I getting the error when I add something?? Furthermore, I am calling context.deleteDatabase(NAME); every time I run the app. The thing must be unique as the table is empty !

Thanks in advance

Full LogCat:

```
02-11 18:38:02.811: E/SQLiteDatabase(28631): Error inserting correct=0 english_meaning= tener prisa foreign_word=to be in a hurry  name=AQA GCSE Spanish Higher
02-11 18:38:02.811: E/SQLiteDatabase(28631): android.database.sqlite.SQLiteConstraintException: columns name, foreign_word are not unique (code 19)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at android.database.sqlite.SQLiteConnection.nativeExecuteForLastInsertedRowId(Native Method)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at android.database.sqlite.SQLiteConnection.executeForLastInsertedRowId(SQLiteConnection.java:775)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at android.database.sqlite.SQLiteSession.executeForLastInsertedRowId(SQLiteSession.java:788)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:86)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1525)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1395)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at com.sharma.gcsevocabtester.DatabaseManipulator.addWord(DatabaseManipulator.java:168)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at com.sharma.gcsevocabtester.DatabaseManipulator$ImportVocabList.onPostExecute(DatabaseManipulator.java:420)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at com.sharma.gcsevocabtester.DatabaseManipulator$ImportVocabList.onPostExecute(DatabaseManipulator.java:1)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at android.os.AsyncTask.finish(AsyncTask.java:631)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at android.os.AsyncTask.access$600(AsyncTask.java:177)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at android.os.Looper.loop(Looper.java:155)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at android.app.ActivityThread.main(ActivityThread.java:5454)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at java.lang.reflect.Method.invokeNative(Native Method)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at java.lang.reflect.Method.invoke(Method.java:511)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1029)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:796)
02-11 18:38:02.811: E/SQLiteDatabase(28631):    at dalvik.system.NativeStart.main(Native Method) 
```

Furthermore, I'm not sure if this will make a difference but I also have another table which is created using this String.

```
private static final String CREATE_DB_TB_1 = "CREATE TABLE "
        + TABLE_VOCAB_INFO + "(" + COLUMN_NAME
        + " TEXT NOT NULL PRIMARY KEY," + COLUMN_URL + " TEXT NOT NULL,"
        + COLUMN_DOWNLOADED + " TEXT NOT NULL)"; 
```

ImportVocabList is an Asynctask. This is the onPostExecute :

```
**
     * Method called after execution has happen, passing in the result
     * 
     * @Override
     */
    protected void onPostExecute(ArrayList<Word> result) {
        super.onPostExecute(result);
        progressDialog.dismiss();
        boolean b = false;
        open();
        for (Word w : result) {

            addWord(w, vlName);
        }
        if (getAllVocabListsWhere(DatabaseManipulator.COLUMN_DOWNLOADED,
                "false").size() == 0) {
            b = true;
        }
        close();
        if (b) {
            context.finish();
        }
    } 
```

The method addWord is as follows :

```
 public boolean addWord(Word w, String name) {
    try {
        ContentValues cv = new ContentValues();
        cv.put(COLUMN_NAME, name);
        cv.put(COLUMN_WORD_FOREIGN, w.getWordForeign());
        cv.put(COLUMN_WORD_ENGLISH, w.getWordEnglish());
        cv.put(COLUMN_CORRECT, w.getCorrect());
        database.insert(TABLE_VOCAB_WORDS, null, cv);
        return true;
    } catch (SQLiteException e) {
        System.out.println("SQL ERROR");
        return false;
    }
} 
```

The problem has been fixed - there were duplicate entries but they were ignored. Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:12:50.147

查看您的 AsyncTask 的`onPostExecute()`方法，我相信您在`result`. 只需从源中清除这些重复项。

或者您可以[告诉您的表](https://www.sqlite.org/lang_createtable.html)忽略具有重复条目的行并通过[“冲突子句”](https://www.sqlite.org/lang_conflict.html)继续：

```
private static final String CREATE_DB_TB_2 = "CREATE TABLE "
        + TABLE_VOCAB_WORDS + "(" + COLUMN_NAME + " TEXT NOT NULL,"
        + COLUMN_WORD_FOREIGN + " TEXT NOT NULL," + COLUMN_WORD_ENGLISH
        + " TEXT NOT NULL," + COLUMN_CORRECT
        + " BYTE NOT NULL, PRIMARY KEY (" + COLUMN_NAME + ","
        + COLUMN_WORD_FOREIGN + ") ON CONFLICT IGNORE)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-04T09:35:07.810

利用

```
db.insertOrThrow(TABLE_VOCAB_WORDS, null, cv); 
```

由于我忽略的原因，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:22:41.357

`name`并`foreign_word`在此表中构成您的主要（唯一！）键。您必须尝试插入重复的键控行。这两个字段的组合必须是唯一的。

# eclipse - Fetched from upstream eclipse github: java.lang.ClassNotFoundException

> ID：14818247
> 
> 赞同：2
> 
> 时间：2013-02-11T18:13:04.107
> 
> 标签：eclipse, git, github, classnotfoundexception, egit

I'm trying to revert to a previous commit. I'm using Juno eclipse and github/egit.

Reverting works: I can see my old code. But when I try to run it, I get this:

```
java.lang.NoClassDefFoundError: mmPackage/Main
Caused by: java.lang.ClassNotFoundException: mmPackage.Main
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source) 
```

Exception in thread "main"

My package is called mmPackage.

This exact code worked for me when I pushed it to github a few days ago. Now that I've revered to a previous commit, it just can't seem to find my class with a main method!

I have tried:

*   Building project
*   Making sure my src folder is in the build path

I also noticed my bin folder does not seem to contain any .class files. I tried deleting it using the file system browser and re-running, but no luck. And now I can't even see a bin folder in my file system!

Thank you!

# cuda - Share a variable across CPU and GPU-CUDA

> ID：14818250
> 
> 赞同：0
> 
> 时间：2013-02-11T18:13:17.470
> 
> 标签：cuda

I need to access a variable on CPU and CUDA GPU. Currently, I am transferring that variable to CPU after kernel finishes, but it is turning out to be bottleneck in my application. Is there any way faster way to access a variable on CPU after GPU finishes execution? Can pinned memory help me here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:39:53.187

您在问是否应该使用固定内存，因此我假设您没有使用它，这也意味着您没有执行异步 memcpy，因为这需要固定内存。

所以回答你的问题：是的，你应该使用固定内存并使用流和异步内存传输函数来尽快获得结果。

另请参阅[http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#asynchronous-concurrent-execution](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#asynchronous-concurrent-execution)和[http://docs.nvidia.com/cuda/cuda-c-programming -guide/index.html#page-locked-host-memory](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#page-locked-host-memory)

# django - Django search engine for tempates

> ID：14818251
> 
> 赞同：4
> 
> 时间：2013-02-11T18:13:22.910
> 
> 标签：django, search, django-templates, search-engine, django-haystack

I have a Django app that has an accompanying user guide. Page content for the user guide is stored in a directory of templates. [Haystack](http://haystacksearch.org/) seems to be the most popular Django search engine, but [it is only recommended for use on model data](http://django-haystack.readthedocs.org/en/latest/faq.html#when-should-i-not-be-using-haystack) and doesn't seem to provide template indexing.

What's the best method of indexing the Django template content for search? I could create a model which stores the rendered templates, and index that using Haystack. Is there any software out there that does this already? Or any alternative ways of doing this? Any solution needs should preferably include rendered content (i.e. can't just index the templates straight from disk). I also wish to avoid any external ad-supported search engines like Google Custom Search and Django integration is desirable.

Any suggestions would be much appreciated, thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:24:00.943

[haystack_static_pages](https://github.com/trapeze/haystack-static-pages)就是为此目的而制作的。

该应用程序旨在抓取和索引您自己网站上的指定呈现页面。您配置 URL 或 URL 名称，然后使用管理命令来抓取您的站点。

值得注意的是关于这方面的一些事情。Haystack 与 Django ORM 的耦合非常紧密，所以要做`haystack_static_pages`的是为静态内容添加一个模型，然后将爬取的内容转储到模型中，作为索引的前兆。它似乎也是围绕 Haystack 的 1.x 版本设计的。

# haskell - Haskell - using getOpt to parse arguments, why does ReqArg take multiple Arguments?

> ID：14818252
> 
> 赞同：2
> 
> 时间：2013-02-11T18:13:23.043
> 
> 标签：haskell, getopt

I got an argument parser working using `getOpt` which is great, but I do have one question. When using `ReqArg` in an option like:

```
Option ['c'] ["config"] (ReqArg (\f opts -> opts { configFile = f }) "FILE")
                     "use a custom configuration file" 
```

what does it use that second argument for (in this case, `"FILE"`)? I have not experienced any kind of difference in behavior when specifying another string.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T18:15:14.813

它用于自动生成的使用消息。与 OptArg 相同。在您的 OptDescr 列表上运行`usageInfo`，看看会返回什么。

# asp.net-mvc-3 - asp.net mvc 代码首先使用 db 上下文对象抛出空引用异常

> ID：14818253
> 
> 赞同：1
> 
> 时间：2013-02-11T18:13:25.587
> 
> 标签：asp.net-mvc-3, entity-framework, code-first, nullreferenceexception, dbcontext

我在不同的电脑上使用相同的代码有一个奇怪的问题。这是一个 mvc3 代码优先项目。

我从 svn 下载了我的项目。按下构建按钮。像往常一样，db 初始化方法已被调用并开始执行。它创建了一些包含一些数据的表。没问题。如你看到的 ：

[这是一些屏幕截图，代码的执行，抱歉不能在这里发布，因为我需要代表。图像#0-#1-#2)](http://imgur.com/a/Wp36f)

但是，要为应用程序创建用户，我决定在存储库类中进行。因此我在初始化程序中调用我的 create 方法，这是我的 usercreate 函数：

```
public MembershipUser CreateUser(string username, string firstname, string lastname, string password, string email)
    {
        using (KlmsnContext db = new KlmsnContext())
        {
            User user = new User();

            user.UserName = username;
            user.FirstName = firstname;
            user.LastName = lastname;
            user.Email = email;
            user.PasswordSalt = CreateSalt();
            user.Password = CreatePasswordHash(password, user.PasswordSalt);
            user.CreatedDate = DateTime.Now;
            user.IsActivated = false;
            user.IsLockedOut = false;
            user.LastLockedOutDate = DateTime.Now;
            user.LastLoginDate = DateTime.Now;

            db.Users.Add(user);

    db.SaveChanges();

            return GetUser(username);
        }
    } 
```

然而，在“使用块”（语句）中，当我仔细观察时，我的新 db 对象为每个实体抛出空引用，

[截图 img #3-#4](http://imgur.com/a/Wp36f)

**..并相应地添加用户失败，并出现相同的“对象引用未设置为对象的实例”错误。奇怪的是，完全相同的代码在另一台计算机上运行时不会出错。具有几乎相同的设置和操作系统。**

关于造成这种情况的任何想法？谢谢！

更新 #1：堆栈跟踪：

```
    （内部上下文 c）
   在 System.Data.Entity.Internal.RetryAction`1.PerformAction（TInput 输入）
    在 System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput 输入) 在
    System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1
    行动）
    在 System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase()
    在
    System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType（类型
    实体类型）
    在 System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
    在 System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
    在 System.Data.Entity.Internal.Linq.InternalSet`1.ActOnSet(Action action, EntityState newState, Object entity, String methodName) at System.Data.Entity.Internal.Linq.InternalSet`1.Add(Object entity) at System.Data.Entity.DbSet`1.Add(TEntity entity) at Klmsncamp.Models.UserRepository.CreateUser(String username, String firstname, String lastname, String password, String email) in C:\Users\Hp\Documents\Visual Studio 2010\Projects\Project2Klmsan\Klmsncamp\Models\UserRepository.cs:C:\Users\Hp\Documents\Visual Studio 2010\Projects\Project2Klmsan\Klmsncamp\DAL 中 Klmsncamp.DAL.KlmsnInitializer.Seed(KlmsnContext context) 的第 31 行\KlmsnInitializer.cs：System.Data.Entity.DropCreateDatabaseAlways 的第 212 行`1.InitializeDatabase（TContext
    语境）
    在
    System.Data.Entity.Database.c__DisplayClass2`1.b__0(DbContext
    C）
    在
    System.Data.Entity.Internal.InternalContext.c__DisplayClass5.b__3()
    在
    System.Data.Entity.Internal.InternalContext.PerformInitializationAction（动作
    行动）
    在
    System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization()
    在
    System.Data.Entity.Internal.LazyInternalContext.b__4(InternalContext
    C）
    在 System.Data.Entity.Internal.RetryAction`1.PerformAction（TInput 输入）

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-23T15:11:18.720

你能至少告诉我你的`DbContext`班级吗，我想你可能没有将你的属性设置为`DBset`Type

```
public class EnocDB : DbContext
  {
      public DbSet<EnocParcels> Parcels { get; set; }
      public DbSet<ReviewEnoc> Reviews { get; set; }
  } 
```

# java - 从链表中查找幂集

> ID：14818254
> 
> 赞同：0
> 
> 时间：2013-02-11T18:13:33.887
> 
> 标签：java, powerset

我正在为我的 Java 编程作业寻求一些帮助。使用链表，我需要打印出它的幂集。例如，集合 {1,2,3} 应打印出 {{},{1}{1,2}{1,3}{1,2,3}{2}{2,3}{3} }。幂集中的元素个数为 2^n。这需要通过调用 HeadNode.PrintPowerSet(); 来完成。
其中 HeadNode 是链表中的第一个元素。我已经尝试了一些东西，但没有什么效果那么好。我认为最好的方法是递归调用该方法，直到到达终点哨兵，然后向后工作，添加剩下的元素。抱歉，我无法发布更多代码或更多想法，因为我尝试过的任何东西都没有那么好。提前致谢。

编辑：这是非工作代码。它返回集合 {{1,2,3}{2,3}{3}}

```
public RSet powerSet() 
{
    if (this == EMPTY_SET)
        return EMPTY_SET;

    RSet q = new RSet();
    if (q != EMPTY_SET)
        q.next = next.powerSet();
    q = new RSet(this, n, q.next);

    return q;
} 
```

EMPTY_SET 是结束标记。我试过用手把它写出来。它有帮助，但我仍然无法得到它。同样，RSet 这个类本质上只是一个链表节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:29:40.147

只需迭代从 0 到 2^n - 1 的所有数字。每个数字都定义了幂集的一个元素：

该列表在您的集合上定义了一个固定索引。对于每个数字，创建一个新集合。考虑二进制格式的数字，如果索引 i 处的位为 1，则将原始集合中索引 i 处的项目添加到集合中，否则不添加。

然后，对于每个数字，您将拥有一个作为幂集元素的集合。

```
int n = list.size();

Set<Set<T>> powerSet = new HashSet<Set<T>>();

for( long i = 0; i < (1 << n - 1); i++) {
    Set<T> element = new HashSet<T>();
    for( int j = 0; j < n; j++ )
        if( (i >> j) % 2 == 1 ) element.add(list.get(j));
    powerSet.add(element); 
}

return powerSet; 
```

# javascript - 如何通过 CSS 禁用“向上”箭头

> ID：14818255
> 
> 赞同：0
> 
> 时间：2013-02-11T18:13:35.320
> 
> 标签：javascript, css

我不确定这是否可能。我有一个使用 javascript 和 css 构建的 UI，界面用户使用按键进行导航。用于每个客户端更改的布局的 Css，例如“皮肤”。Javascript 控制功能并监控用户按键。

该设置有 2 个菜单，一个较低的菜单和一个较高的菜单。当您加载它时，较低的焦点是集中的，您可以使用左箭头或右箭头在菜单项之间移动。

在正常情况下，您会按“向上”来获得上层菜单，但是这个客户根本不想要这个菜单。

问题是我们不能简单地编辑 javascript 来阻止它，因为所有客户端都使用相同的 javascript，只有根据选择的客户端加载不同的 css。

所以现在我隐藏了上面的菜单，但问题是javascript仍然允许你按下，但是现在由于顶部菜单不存在，你失去了焦点，没有突出显示。如果意外按下，最终用户不知道他们为什么或如何失去焦点。（因为他们不知道顶部菜单所在的不同设置，他们没有意识到他们应该按下，他们只知道当他们按下左/右时似乎什么都没有发生）

我想要做的是，在css中，以某种方式阻止用户按下。因为我们不能只是去改变javascript。

这可能吗？还是我修改javascript的唯一解决方案？

蒂亚！！

感谢所有提供建议的人，只是为了澄清一下，我们将发布一个新版本，其中包含检查客户是否需要这个其他菜单的功能，如果不需要，则禁用向上按钮，但这需要新版本的软件，并且完全通过 QA。只是想同时快速破解这个客户.. :)

我们的最终解决方案将在数据库中有一个布尔字段，如果它是真的，javascript 将忽略向上键，如果为假，则正常运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:19:39.257

更改代码，使其仅在元素不存在时对向上箭头按键起作用。

EG 添加一个`p`然后`class="noupkey"`停止触发事件，如：

```
if($('.nokeyup').length === 0) {
//Do normal behaviour
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:23:53.997

不幸的是，没有通过 css 禁用组件的正确方法，因为这种类型的功能适用于 javascript。

与我共事过的大多数程序员的理念是，您应该允许最终用户决定他们是否要使用新功能。

我的意思是，您应该在应用程序中留下一个选项，让用户自己禁用组件。这样，您可以为所有用户使用相同的 javascript 集，并且仍然以正确的方式禁用任何组件。这样做的真正好处是您不必再处理这张票，支持人员可以简单地引导任何客户完成重新创建请求的功能的操作。

但是，此解决方案中的大多数可能对您不可用。我知道改变你的工作场所惯例并不容易。

这里有一些可能更有用的东西，[如何使用 CSS 禁用表单字段？](https://stackoverflow.com/q/5963099/1363394)一些建议可能适用于任何组件，包括菜单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T18:52:00.077

实际上这是一个非常奇怪的解决方案，但可以通过一些棘手的解决方案来完成。

使用更多 z-index 制作一个透明 Div，在该 Up Button 的主体级别上使用 Absolute Position，对于其余应用程序，将 Pointer Events Css 属性应用为 none，以便您的鼠标事件将在 below Div 上完成。

然后，对于您要禁用该控件的情况，不要将指针事件提供给最重要的 div，它将因鼠标事件而被禁用。

注意：IE 中的指针事件存在一些问题。

# matlab - 从matlab中的excel表中读取

> ID：14818260
> 
> 赞同：0
> 
> 时间：2013-02-11T18:13:49.433
> 
> 标签：matlab, matlab-guide

我需要有关 Matlab 和 Excel 工作表的帮助。任何人都可以告诉如何使用 Matlab 仅读取 excel 表中的单元格的位置，也就是说，如果我在任何单元格中写入任何内容，让我们在“B3”处说。我想在我的代码中使用这个 B3。那么我应该如何获取数据的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:27:14.907

来自 Matlab 文档：

> 示例 3 - 选择数据范围
> 
> 要从工作表 1 中仅导入第 4 行和第 5 行，请将范围指定为“A4:B5”：

```
A = xlsread('testdata2.xls', 1, 'A4:B5')

A =
    4    9
    5   NaN 
```

# php - 谷歌地图 js v3 xml 为空

> ID：14818263
> 
> 赞同：-2
> 
> 时间：2013-02-11T18:14:03.807
> 
> 标签：php, javascript, mysql, xml, google-maps-api-3

我试图检索 XML 并将其放入 var 标记中，当我运行它时

```
var markers = xml.documentElement.getElementsByTagName("marker"); 
```

我收到一条错误消息，说 XML 为空，这是我在运行生成 XML 的文件时得到的 XML

```
This XML file does not appear to have any style information associated with it. The document tree is shown below.
  <markers>
 <marker name="funtimes" address="5451 Forest Cove Lane" lat="34.1519" lng="-118.774717" type="Basketball" desc="going to play fun times with fun people" date="2012-12-29" time="23:00:00" eventcap="4" eventcur="10" eventid="1" admin="true"/>
 <marker name="Event test" address="1231 fake st" lat="34.1517" lng="-118.77234" type="Cycling" desc="just a description" date="2013-01-31" time="12:00:00" eventcap="10" eventcur="4" eventid="2" admin="true"/>
 <marker name="Event test 2" address="1231 fake st" lat="34.1512" lng="-118.77421" type="Football" desc="just a description 2" date="2013-01-31" time="12:00:00" eventcap="10" eventcur="3" eventid="3" admin="true"/>
 <marker name="funtimes" address="5451 Forest Cove Lane" lat="34.1519" lng="-118.774717" type="Basketball" desc="going to play fun times with fun people" date="2012-12-29" time="23:00:00" eventcap="4" eventcur="10" eventid="1" admin="false"/>    
 <marker name="Event test" address="1231 fake st" lat="34.1517" lng="-118.77234" type="Cycling" desc="just a description" date="2013-01-31" time="12:00:00" eventcap="10" eventcur="4" eventid="2" admin="false"/>
 <marker name="Event test 2" address="1231 fake st" lat="34.1512" lng="-118.77421" type="Football" desc="just a description 2" date="2013-01-31" time="12:00:00" eventcap="10" eventcur="3" eventid="3" admin="false"/>
 <marker name="Event test 3" address="2142 fake st" lat="34.1602" lng="-118.77789" type="Football" desc="just a description 3" date="2013-01-28" time="13:00:00" eventcap="8" eventcur="2" eventid="4" admin="false"/>
 </markers> 
```

这是一些周围的代码

```
downloadUrl("mapXML2.php", function(data) {
var xml = data.responseXML;
var markers = xml.documentElement.getElementsByTagName("marker");

 function downloadUrl(url, callback) {
      var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:16:16.090

我已经使用我生成的 XML运行了[上一个问题中的代码，没有任何错误。](https://stackoverflow.com/questions/14586996/google-maps-not-loading-showing-just-a)如果`header("Content-type: text/xml")`在我的文件中删除了该行，我会收到错误`Uncaught TypeError: Cannot read property 'documentElement' of null`这表明您没有发送标头。请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。

尝试

```
header("Content-type: text/xml");
// Start XML file, create parent node
$dom = new DOMDocument("1.0");
$node = $dom->createElement("markers");
$parnode = $dom->appendChild($node);
//Connect to database 
```

# r - 使用带有 gmp 和机器限制的大整数

> ID：14818267
> 
> 赞同：4
> 
> 时间：2013-02-11T18:14:12.247
> 
> 标签：r, memory, gmp, bigint, mpfr

我想知道是否可以在 R 中使用大于`.Machine$double.xmax`( `~1.79e308`) 值的整数。我认为通过在 R 中使用 eg`Rmpfr`或`gmp`库，您可以分配任何大小的值，直到系统上的 RAM 限制？我认为这大于`.Machine$double.xmax`但显然不是。

```
> require( gmp )
> as.bigz( .Machine$double.xmax )
Big Integer ('bigz') :
[1] 179769313486231570814527423731704356798070567525844996598917476803157260780028538760589558632766878171540458953514382464234321326889464182768467546703537516986049910576551282076245490090389328944075868508455133942304583236903222948165808559332123348274797826204144723168738177180919299881250404026184124858368
> as.bigz( 1e309 )
Big Integer ('bigz') :
[1] NA
> 
```

有人可以解释为什么使用 64 位内存寻址的计算机不能存储大于 1.79e308 的值吗？抱歉 - 我没有计算机科学背景，但我正在努力学习。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-15T23:04:46.273

Rmpfr 可以使用[mpfr_set_str](http://www.mpfr.org/mpfr-current/mpfr.html)进行字符串转换...

```
val <- mpfr("1e309")

## 1 'mpfr' number of precision  17   bits 
## [1] 9.999997e308

# set a precision (assume base 10)...
est_prec <- function(e) floor( e/log10(2) ) + 1

val <- mpfr("1e309", est_prec(309) )

## 1 'mpfr' number of precision  1027   bits 
## [1]1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

.mpfr2bigz(val)

## Big Integer ('bigz') :
## [1] 1000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

# extract exponent from a scientific notation string
get_exp <- function( sci ) as.numeric( gsub("^.*e",'', sci) )

# Put it together
sci2bigz <- function( str ) {
  .mpfr2bigz( mpfr( str, est_prec( get_exp( str ) ) ) )
}

val <- sci2bigz( paste0( format( Const("pi", 1027) ), "e309") )

identical( val, .mpfr2bigz( Const("pi",1027)*mpfr(10,1027)^309 ) )

## [1] TRUE

## Big Integer ('bigz') :
## [1] 3141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117067982148086513282306647093844609550582231725359408128481117450284102701938521105559644622948954930381964428810975665933446128475648233786783165271201909145648566923460348610454326648213393607260249141273724587004 
```

* * *

至于为什么要存储大于 的数字`.Machine$double.xmax`，IEEE 规范、R 常见问题解答和维基百科中有关浮点编码的文档进入了所有行话，但我发现仅定义术语（使用`?'.Machine'`）很有帮助...

`double.xmax`（最大归一化浮点数）=
`(1 - double.neg.eps) * double.base ^ double.max.exp`其中

1.  `double.neg.eps`（一个小的正浮点数 x 使得 1 - x != 1）=`double.base ^ double.neg.ulp.digits`其中

    *   `double.neg.ulp.digits`= 最大的负整数，使得`1 - double.base ^ i != 1`和
2.  `double.max.exp`= double.base 溢出的最小正幂和
3.  `double.base`（浮点表示的基数）= 2（二进制）。

思考可以区分什么有限浮点数；IEEE 规范告诉我们，对于 binary64 数字，11 位用于指数，所以我们有一个最大指数，`2^(11-1)-1=1023`但我们想要*溢出*的最大指数，所以`double.max.exp`是 1024。

```
# Maximum number of representations
# double.base ^ double.max.exp
base <- mpfr(2, 2048)
max.exp <- mpfr( 1024, 2048 )

# This is where the big part of the 1.79... comes from
base^max.exp

## 1 'mpfr' number of precision  2048   bits 
## [1] 179769313486231590772930519078902473361797697894230657273430081157732675805500963132708477322407536021120113879871393357658789768814416622492847430639474124377767893424865485276302219601246094119453082952085005768838150682342462881473913110540827237163350510684586298239947245938479716304835356329624224137216

# Smallest definitive unit.
# Find the largest negative integer...
neg.ulp.digits <- -64; while( ( 1 - 2^neg.ulp.digits ) == 1 ) 
  neg.ulp.digits <<- neg.ulp.digits + 1

neg.ulp.digits

## [1] -53

# It makes a real small number...
neg.eps <- base^neg.ulp.digits

neg.eps

## 1 'mpfr' number of precision  2048   bits 
## [1] 1.11022302462515654042363166809082031250000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e-16

# Largest difinitive floating point number less than 1
# times the number of representations
xmax <- (1-neg.eps) * base^max.exp

xmax

## 1 'mpfr' number of precision  2048   bits 
## [1] 179769313486231570814527423731704356798070567525844996598917476803157260780028538760589558632766878171540458953514382464234321326889464182768467546703537516986049910576551282076245490090389328944075868508455133942304583236903222948165808559332123348274797826204144723168738177180919299881250404026184124858368

identical( asNumeric(xmax), .Machine$double.xmax )

## [1] TRUE 
```

# php - Leaflet.js 将我的 ajax json 数据作为带有坐标的数组返回

> ID：14818270
> 
> 赞同：1
> 
> 时间：2013-02-11T18:14:31.090
> 
> 标签：php, ajax, json, leaflet

如何从数组中获取坐标并将它们放入传单地图上的标记中？这是我的代码：

```
<div id="map">

<script>
var map = L.map('map').setView([39.76, -98.5], 4); 
L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png').addTo(map); 

    $(document).ready(function(){   
$.ajax({
  type: 'POST',     
  dataType: "json",
  url: '<?php echo matry::base_to('tests/map_it');?>',
  success: function (data) 
  {

//alert (data[0].first + " " + data[0].last + " " + data[0].trainer_address1 + ", " + data[0].CITY + " " + data[0].STATE);

for (var i=0;i<data.length;i++)
{
    document.write(data[i].first + ' ' + data[i].last + " " + data[i].trainer_address1 + ", " + data[i].CITY + " " + data[i].STATE + '<br />');

}

  }

  });
});

</script>

<?php
spl_autoload_register('autoload_lib');
// $mapit = sql::results("Select * from event.ACS.trainer where inactive is null or inactive=0");
// foreach ($mapit as $row)
// {
    // $return[] = json_encode($row, JSON_FORCE_OBJECT);
// }
// echo json_encode($return);

header('Content-Type: application/json');

$mapit = sql::results("Select * from event.ACS.trainer where inactive is null or inactive=0");
foreach ($mapit as $row)
{
    $return[] = $row;
}
//echo json_encode($return);

$array = array(array('addr1'=>'$data', 'city'=>'Carlsbad', 'state'=>'CA'),array('addr1'=>'42 Mer Gn', 'city'=>'dido', 'state'=>'CA'));

foreach ($array as $addr)
{
    $mapit = new MapIt($addr);
    print_r($mapit->send_request());
} 
```

这是最后一步，但我无法弄清楚。Leaflet 接受坐标而不是地址，所以我已经将地址转换为坐标。希望对这个问题提供一些指导。谢谢你。

```
Array
(
    [lat] => 33.158099
    [lng] => -117.349701
)
Array
(
    [lat] => 33.119202
    [lng] => -117.085602
) 
```

# java - 序列化，一个序列化对象中有很多方法是不是很糟糕

> ID：14818271
> 
> 赞同：1
> 
> 时间：2013-02-11T18:14:34.137
> 
> 标签：java, android

有人可以告诉我序列化如何为对象工作。我试过用谷歌搜索，但出于这个原因，我总是迷失在细节上。我只需要知道您何时序列化其类具有私有/公共变量、静态变量和私有/公共方法的对象。一切都被序列化还是只是变量？比如拥有一个包含许多方法的对象，这些方法将被序列化以跨活动传递，这是一个坏习惯吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T18:16:41.313

只有对象的*状态*被序列化——换句话说，就是字段。方法本身没有序列化。但是，生成的版本号实际上也是状态的一部分，这取决于存在的方法。诚然，您可以使用字段更改此行为[`serialVersionUid`](https://stackoverflow.com/questions/285793/what-is-a-serialversionuid-and-why-should-i-use-it)- 但这仍然很棘手。

我个人强烈建议*不要*使用 Java 二进制序列化 - 管理向后和向前兼容性最终非常棘手。还有很多其他可用的序列化框架，它们通常比 Java 序列化需要更多的工作才能开始，但最终更便携和可维护。就我个人而言，我是[Protocol Buffers](http://protobuf.googlecode.com)的粉丝，但我有偏见:)

# css - 基于浮动的布局中的行的 div - 何时需要？

> ID：14818273
> 
> 赞同：0
> 
> 时间：2013-02-11T18:14:42.113
> 
> 标签：css, css-float

当每行有三个 div（每个 33% 宽度）时，我想用基于浮动的行（固定宽度）来布局我的页面。我是否必须包含每一行 - 在另一个“行” div 中（假设我用一个 div 扭曲 - 所有行）？

据我了解，只有当每个“33% div”具有不同的高度，或者我希望某些行包含少于三个“33% div”时，才需要“行 div”......（例如 -有两个项目和一些空白区域的行...）。

总之 - 如果我所有的行都包含三个宽度为 33% 的 div，并且它们都具有相同的高度 - 那么我不需要为这些行添加包含 div 吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T18:37:10.803

如果你使用`inline-block`而不是浮动会更好，原因有几个：

1.  如果您为 1/3 宽度的单元格使用包装 div，那么如果您使用浮动，则包装 div 将被折叠。
2.  如果单元格具有不同的高度（您提到它们将具有相同的高度，但以防万一），那么浮动将产生一种非常糟糕的混搭对齐，整个事情将是一场大灾难.

另一方面，如果你使用它，事情会更干净，更容易扩展。包装 div 也不会折叠：

```
.cell {
  display: inline-block;
  vertical-align: middle; // or top/bottom. depends on your taste :)
  width: 33%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:28:53.753

假设这是你想要的

```
<html>
<head>
    <title></title>
    <style rel="stylesheet" type="text/css">

        #container{
            position:relative;
        }

        .row{
            float: left;
            clear: both;
            width: 100%;
        }

        .row > div{
            width: 33%;
            float: left;
        }

        .row:nth-child(even){
            background-color: pink;
        }
    </style>
</head>
<body>
    <div id="container">
        <div class="row">
            <div>foo</div>
            <div>bar<br/>big</div>
            <div>baz</div>
        </div>
        <div class="row">
            <div>foo</div>
            <div>bar<br/>another<br/>big<br/>one</div>
            <div>baz</div>
        </div>
        <div class="row">
            <div>foo</div>
            <div>shizzle<br/>for<br/>my<br/>nizzle</div>
            <div>baz</div>
        </div>
    </div>
</body>
</html> 
```

确保有一个容器位置：相对所以宽度百分比基于该容器宽度。和 clear:both （或仅留下）在每个新行上。

如果您询问是否可以将 div.row 排除在外，如果您清除每行的第一个元素，则可以，但是在单元格本身上使用背景颜色时会遇到麻烦。

希望这可以帮助

# ios - 媒体查询不适用于 iPhone 和 iPad

> ID：14818277
> 
> 赞同：2
> 
> 时间：2013-02-11T18:14:50.047
> 
> 标签：ios, css, cordova, media-queries, cordova-2.0.0

**@media查询在****iPhone 5 和 iPad 4 OS**的情况下不起作用。我使用以下**CSS**为不同屏幕设置每个操作系统和设备的样式。

我明确检查了我的 iPad 和 iPhone 的宽度和高度，并基于此，我只保留了媒体查询。这在 ANDROID OS 上运行**良好。**

```
/*@media print {*/
/* iPhone 5 (Portrait) */
@media screen and (max-device-height: 568px) and (orientation: portrait) {
     #map_canvas {
        border: 1px dashed #C0C0C0; 
        width: 290px;
        height: 473px;
      }
}

/* iPad 4 (Portrait) */
@media screen and (max-device-height: 1024px) and (orientation: portrait) {
 #map_canvas {
    border: 1px dashed #C0C0C0; 
    width: 735px;
    height: 929px;
  }
}

/* iPad 4 (Landscape) */
@media screen and (max-device-width: 1024px) and (orientation: landscape) {
  #map_canvas {
    border: 1px dashed #C0C0C0;
    width: 990px;
    height: 673px;
  }
}

/* Samsung 10.1 inch (Portrait) */
@media screen and (max-device-height: 1280px) and (orientation: portrait) {
 #map_canvas {
    border: 1px dashed #C0C0C0; 
    width: 790px;
    height: 1140px;
  }
}

/* Samsung 10.1 inch (Landscape) */
@media screen and (max-device-width: 1280px) and (orientation: landscape) {
 #map_canvas {
    border: 1px dashed #C0C0C0; 
    width: 1230px;
    height: 680px;
  }
}

/* Samsung 7.0 inch (Portrait) */
@media screen and (max-device-height: 1024px) and (orientation: portrait) {
 #map_canvas {
    border: 1px dashed #C0C0C0; 
    width: 570px;
    height: 875px;
  }
}

/* Samsung 7.0 inch (Landscape) */
@media screen and (max-device-width: 1024px) and (orientation: landscape) {
  #map_canvas {
    border: 1px dashed #C0C0C0;
    width: 990px;
    height: 455px;
  }
}

@media all and (orientation: landscape) {
  html, body {
    height: auto;
  }
} 
```

每次我在上面的代码中进行各种更改测试时，我都会得到 LAST CSS 被引用以应用样式。

我找到了一个链接，（我还没有尝试过，但会在 mac 可用时立即尝试）但对此也有疑问（[iphone/ipad 媒体查询问题](https://stackoverflow.com/questions/8910777/iphone-ipad-media-query-issues)）。谁能解释在这种情况下像素比很重要的原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T18:21:20.377

摘自[https://mislav.net/2010/04/targeted-css/](https://mislav.net/2010/04/targeted-css/)

> 您应该知道，方向媒体查询虽然在 iPad 上受支持，但在 iPhone 上不起作用（使用 v3.1.3 测试）。幸运的是，像 width 和 device-width 这样的尺寸查询可以工作，所以布局切换可以在没有 JavaScript 的情况下通过它们的某种组合来实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T18:20:36.413

原因是新的苹果设备具有更高的像素比密度。您应该将此元标记放在文档的头部，您的媒体查询将在任何地方工作：

```
<meta name="viewport" content="width=device-width"> 
```

顺便说一句，苹果新产品的像素比更高，被称为“视网膜显示屏”。

如果您确实可以访问 iPhone、ipad 等...尝试查看此网站：

[http://mattstow.com/viewport-size.html](http://mattstow.com/viewport-size.html)

在这些设备上**查看设备的视口大小**。然后，**添加元标记**，您会看到**视口大小发生了变化**。

# c - 为什么在 UDP 套接字的情况下连续的 recvfrom() 调用被阻塞

> ID：14818284
> 
> 赞同：0
> 
> 时间：2013-02-11T18:15:16.367
> 
> 标签：c, linux, sockets, io

在简单的客户端-服务器程序中，客户端发送 12 个字节的数据。我正在使用 recvfrom()，在连续调用中请求 2 和 10 个字节。如果第一次调用 recvfrom() 将返回 2 个字节。但是第二个电话被阻止了。为什么会这样？我认为 TCP 套接字不会发生这种情况，其中连续的读取调用返回可用字节（此处为 10）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T18:20:05.497

[手册页](http://linux.die.net/man/3/recvfrom)有以下相关信息（加粗）：

> 对于基于消息的套接字，例如 SOCK_RAW、SOCK_DGRAM 和 SOCK_SEQPACKET，应在单个操作中读取整个消息。如果消息太长而无法放入提供的缓冲区，并且标志参数中未设置 MSG_PEEK，**则应丢弃多余的字节**。

您需要在一次调用中阅读它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:29:22.587

我认为您`len`对 recvfrom 函数的第三个 ( ) 参数感到困惑。

```
ssize_t recvfrom(int s, void *buf, size_t len, int flags,
                 struct sockaddr *from, socklen_t *fromlen); 
```

后者表示缓冲区 ( `void *buf`) 有多大，而不是您要从数据包中提取多少字节。

在`UDP`类型套接字中，您必须读取其他对等方发送给您的整个数据包（`UDP`确保它不会分段到达）并避免像`TCP`模式一样多次读取发送的数据。

在您的情况下，如果您的缓冲区是 2 个字节，则其他 10 个字节将被丢弃（查看`recvfrom`手册页）

# php - 使用列表爆炸时未定义的偏移量

> ID：14818285
> 
> 赞同：1
> 
> 时间：2013-02-11T18:15:22.587
> 
> 标签：php, list, smarty, explode

我试图用列表爆炸对类别和子类别进行排序，但得到

> **未定义的偏移量：1**

这是代码的一部分

```
$squery = $_SERVER['QUERY_STRING'];
$smarty->assign('query', $squery);
list($str, $trash) = explode('&', $squery, 2);
list($category, $subcategory) = explode('=', $str, 2);
switch($category)
    {
        case 'locale':
            $_SESSION['locale'] = $subcategory;
            checklocale();
            header('Location:'.($_SERVER['HTTP_REFERER'] ? $_SERVER['HTTP_REFERER'] : '.'));
            break;
        default:
            include 'main.php';
            break;
    } 
```

你能告诉我我做错了什么吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:23:10.053

好像您的查询字符串中没有一个`&`，因此您的爆炸返回一个包含单个项目的数组，导致`list()`抛出通知。

您可能想要：

*   验证实际上有一个值`$_SERVER['QUERY_STRING']`
*   考虑使用类似的东西`parse_str()`来解析字符串中的变量
*   分别验证查询字符串中的值是否存在

您可能还需要考虑使用`$_GET`而不是`$_SERVER['QUERY_STRING']`更直接地访问参数的替代方法。如果参数以错误的顺序传递，您当前的方法很容易中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:22:49.023

> 你能告诉我我做错了什么吗

好吧，我知道大多数时候`Undefined offset:`，当您尝试在数组中定义未索引的字符时，会出现错误。例如，$var = "foo"; 现在，如果你来了，`echo $var[3];`你会得到同样的错误，因为当 3 是“foo”的偏移量时；它只有三个字符，即 from `0`to `2`;

事实上，你给出了一个有限的代码，我怀疑问题出在某个地方`explode('&', $squery, 2);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:26:09.417

您可以通过仅检查是否在 QUERY_STRING 上**设置区域设置来执行此操作**

像

```
if(isset($_GET['locale'])){
         $_SESSION['locale'] = $subcategory;
        checklocale();
        header('Location:'.($_SERVER['HTTP_REFERER'] ? $_SERVER['HTTP_REFERER'] : '.'));

}else{

     include 'main.php';
} 
```

# facebook - 为什么 facebook 在共享链接上显示错误的图像？

> ID：14818286
> 
> 赞同：1
> 
> 时间：2013-02-11T18:15:31.183
> 
> 标签：facebook, share, og-meta

我有一些像这样的网址

```
http://www.d10scup.com/notizia/122/ 
```

正如您在 fb linter 上看到的那样，其中包含 og 元标记

```
http://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.d10scup.com%2Fnotizia%2F122%2F 
```

问题是，当您在 facebook 上复制/粘贴此 url 时，它会显示错误的图像。我真的不明白问题可能是什么，因为调试器没有给出任何意外的结果。

希望可以有人帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T06:55:11.373

我认为 og:image 当用户喜欢该页面时效果很好。在共享的情况下，FB 会解析页面中的图像，并向用户显示选项。

我建议你尝试两件事：1）使用超过 1 个 og:image 标签，看看会发生什么。2）使用正确的图像作为页面中的最后一个图像并将其设置为隐藏。也许 FB 会解析它并将其显示为第一张图像。

# php - 附加 &showinfo=0 youtube api iframe src

> ID：14818298
> 
> 赞同：0
> 
> 时间：2013-02-11T18:16:27.343
> 
> 标签：php, jquery, youtube-api, append, joomla2.5

我花了一天的大部分时间试图找到一种方法来轻松地将 '&showinfo=0' 附加到 iframe src 属性的末尾 - 但失败了。

我正在使用使用 youtube-api 的 allvideos 插件构建一个 Joomla 站点。我想在没有信息栏的情况下加载视频，但除了将 &showinfo=0 添加到 iframe src 之外找不到删除它的方法 - 所以希望使用 jQuery 可以做到这一点，因为这是我习惯使用的，但我确实有一些有限的 php 经验 - 所以无论什么都有效。

编辑

我已经使用 jQuery 向 iframe 添加了一个类，然后尝试了

```
(".hide-info").attr("src" +="&showinfo=0"); 
```

加上这个主题的很多变化，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:12:54.480

问题是如果 iframe 已经存在，那么它已经加载了嵌入的视频，并且使用 jQuery 更改属性不会重新加载 iframe 中的内容。

我只是快速浏览了您提到的插件的源代码，编辑 PHP 以执行您想要的操作似乎很简单；寻找这个块：

```
 if($plg_tag=="youtube"){
                $tagsource = preg_replace("~(http|https):(.+?)youtube.com\/watch\?v=~s","",$tagsource);
                $tagsourceYoutube = explode('&',$tagsource);
                $tagsource = $tagsourceYoutube[0];

                if(strpos($tagsource,'?')!==false){
                    $tagsource = $tagsource.'&amp;rel=0&amp;fs=1&amp;wmode=transparent';
                } else {
                    $tagsource = $tagsource.'?rel=0&amp;fs=1&amp;wmode=transparent';
                }
                if($final_autoplay=='true'){
                    $tagsource = $tagsource.'&amp;autoplay=1';
                }
            } 
```

在 jw_allvideos.php 文件中。在最后一个 if 块之后，但在最后一个花括号之前，您可以添加以下内容：

```
$tagsource = $tagsource.'&amp;showinfo=0'; 
```

当然，这会导致插件与未来的更新不兼容，因此更可靠的方法是创建一个包含该代码的补丁，然后您可以在更新时应用该补丁，但这超出了这个问题的范围。

# vb.net - 在 CheckBox 勾选上将所有 Button 对象向下移动 100px？

> ID：14818301
> 
> 赞同：0
> 
> 时间：2013-02-11T18:16:35.830
> 
> 标签：vb.net, visual-studio-2010

我试图在选中文本框时将一组 30 个按钮向下移动 100 像素（然后在未选中该框时返回它们的原点）。如果用户需要，这是为按钮下方的一些标签提供空间......就像这里的“显示提示”框：[http ://www.phonemicchart.com/](http://www.phonemicchart.com/)

我有以下代码：

```
 Private Sub CheckBox1_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox1.CheckedChanged

    If CheckBox1.Checked = True Then

        Button5.Location = New Point(100, 100)
        Label1.Visible = False
    Else
        Button5.Location = New Point(300, 300)
        Label1.Visible = True
    End If
End Sub 
```

问题是 New Point() 函数。我想要的新点是相对于原点的 -100px，然后是 Else 语句，它是 Button5.Location = Origin。

我可以使用哪些命令来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:38:56.130

另一个想法...将所有按钮放在 a`Panel`中，然后更改`.Top`它的属性以移动其中的所有内容。

```
 Private Sub CheckBox1_CheckedChanged(ByVal sender As System.Object, _
                                       ByVal e As System.EventArgs) Handles CheckBox1.CheckedChanged
    If CheckBox1.Checked Then
      Panel1.Top += 100
    Else
      Panel1.Top -= 100
    End If
  End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:28:36.830

## 使用 Left 和 Top 代替，如：

[使用 VB.net 以编程方式更改 Windows 窗体上控件的位置？](https://stackoverflow.com/questions/535087/changing-the-location-of-a-control-on-a-windows-form-programatically-using-vb-ne)

```
Private Sub CheckBox1_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox1.CheckedChanged

    If CheckBox1.Checked = True Then

        Button5.Top = 100
        Button5.Left = 100
        Label1.Visible = False
    Else
        Button5.Top = 300
        Button5.Left = 300
        Label1.Visible = True
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:41:34.767

您可以遍历容器拥有的控件，并且如 mfarid 提供的那样，您可以使用 Top 属性

 `````
Private Sub CheckBox1_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox1.CheckedChanged
Dim ctrl As Control
For Each ctrl In container.Controls
  If CheckBox1.Checked = True Then  
    ctrl.Top += 100
  ElseIf
    ctrl.Top -= 100
  End If
Next
EndSub 
`````

# node.js - http.ServerResponse.write() 是否阻塞？

> ID：14818302
> 
> 赞同：2
> 
> 时间：2013-02-11T18:16:37.023
> 
> 标签：node.js, asynchronous, blocking, httpserver

是否可以编写非阻塞response.write？我编写了一个简单的测试来查看其他客户端是否可以在下载文件时连接：

```
var connect = require('connect');

var longString = 'a';
for (var i = 0; i < 29; i++) { // 512 MiB
   longString += longString;
}
console.log(longString.length)

function download(request, response) {
    response.setHeader("Content-Length", longString.length);
    response.setHeader("Content-Type", "application/force-download");
    response.setHeader("Content-Disposition", 'attachment; filename="file"');
    response.write(longString);
    response.end();
}

var app = connect().use(download);
connect.createServer(app).listen(80); 
```

而且好像`write`在阻塞！

难道我做错了什么？

**更新**所以，它不会阻塞，它会同时阻塞。从可以同时下载两个文件的意义上说，它不会阻塞。从某种意义上说，它会阻塞，因为创建缓冲区是一个漫长的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:27:25.187

任何严格在 JavaScript 中完成的处理都会阻塞。[`response.write()`](http://nodejs.org/docs/v0.8.19/api/http.html#http_response_write_chunk_encoding)，至少从 v0.8 开始，[也不例外](https://github.com/joyent/node/blob/v0.8.19/lib/http.js#L703-L739)：

> 第一次`response.write()`被调用，它会将缓冲的头部信息和第一个正文发送给客户端。第二次`response.write()`调用时，Node 假设您将要流式传输数据，并单独发送。也就是说，响应被缓冲到正文的第一块。
> 
> `true`如果整个数据已成功刷新到内核缓冲区，则返回。`false`如果全部或部分数据在用户内存中排队，则返回。`'drain'`当缓冲区再次空闲时将发出。

可以节省一些时间的是在尝试之前转换`longString`为，因为无论如何都会发生转换：`Buffer``write()`

```
var longString = 'a';
for (...) { ... }
longString = new Buffer(longString); 
```

但是，最好是[流式传输](http://nodejs.org/docs/v0.8.19/api/stream.html#stream_writable_stream)各个块`longString`而不是一次流式传输（注意：[流在 v0.10 中发生了变化](https://github.com/joyent/node/wiki/Api-changes-between-v0.8-and-v0.10)）：

```
var longString = 'a',
    chunkCount = Math.pow(2, 29),
    bufferSize = Buffer.byteLength(longString),
    longBuffer = new Buffer(longString);

function download(request, response) {
    var current = 0;

    response.setHeader("Content-Length", bufferSize * chunkCount);
    response.setHeader("Content-Type", "application/force-download");
    response.setHeader("Content-Disposition", 'attachment; filename="file"');

    function writeChunk() {
        if (current < chunkCount) {
            current++;

            if (response.write(longBuffer)) {
                process.nextTick(writeChunk);
            } else {
                response.once('drain', writeChunk);
            }
        } else {
            response.end();
        }
    }

    writeChunk();
} 
```

[`fs.createReadStream()`](http://nodejs.org/docs/v0.8.19/api/fs.html#fs_fs_createreadstream_path_options)而且，如果最终目标是从磁盘流式传输文件，使用and可以更容易[`stream.pipe()`](http://nodejs.org/docs/v0.8.19/api/stream.html#stream_stream_pipe_destination_options)：

```
function download(request, response) {
    // response.setHeader(...)
    // ...

    fs.createReadStream('./file-on-disk').pipe(response);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:40:09.027

不，它不会阻止，我从 IE 尝试了一个，从 firefox 尝试了另一个。我先做了IE，但仍然可以先从firefox下载文件。我尝试了 1 MB (i < 20)，它的工作速度更快。您应该知道，您创建的任何 longString 都需要内存分配。尝试为 i < 30（在 Windows 7 上）执行此操作，它会抛出 FATAL ERROR: JS Allocation failed - process out of memory。

内存分配/复制需要时间。由于它是一个巨大的文件，因此响应需要时间，并且您的下载看起来像是被阻塞了。自己尝试较小的值（i < 20 或其他值）

# javascript - 定向光三个js

> ID：14818303
> 
> 赞同：0
> 
> 时间：2013-02-11T18:16:37.377
> 
> 标签：javascript, three.js

我对three.js 相当陌生。我使用 r55 将一些东西放在一起并想添加灯光。我一直在尝试根据 Mrdoob 的文档添加 DirectionalLight - 运气不好......我尝试添加的灯光没有显示 - 添加了 shadowCameraVisible 用于调试，但它不会显示......任何人都知道什么我的代码可能有问题？？？我很感激任何意见！

```
function init() {
    container = document.createElement('div');
    document.body.appendChild(container);

    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);

    renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    container.appendChild(renderer.domElement);

    //CUBE
    var material = new THREE.MeshBasicMaterial({
        color: 0xff0000
    });
    var geometry = new THREE.CubeGeometry(x, y, z);
    cube = new THREE.Mesh(geometry, material);
    cube.position.z = z / 2;
    scene.add(cube);

    //FLOOR
    //floor color:
    var floorMaterial = new THREE.MeshBasicMaterial({
        color: 0xcccccc
    });
    //floor size:
    var floorGeometry = new THREE.PlaneGeometry(20, 20, 1, 1);
    var floor = new THREE.Mesh(floorGeometry, floorMaterial);
    floor.position.y = -0.5;
    floor.doubleSided = true;
    scene.add(floor);

    //LIGHTS
    var dLight = new THREE.DirectionalLight(0xffffff);
    dLight.position.set = (0, 0, 1);
    dLight.shadowCameraVisible = true;
    dLight.shadowCameraNear = 1;
    dLight.shadowCameraFar = 150;
    dLight.castshadow = true;
    scene.add(dLight);

    //CAMERA POSITION
    camera.position.z = 50;
    controls = new THREE.TrackballControls(camera);

    renderer.shadowMapEnabled = true;
    renderer.shadowMapType = THREE.PCFShadowMap;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:22:55.363

```
dLight.position.set = (0,0,1); 
```

哎呀，这看起来不对...运行后，灯光位置将不是 3D 矢量，它将`NaN`从对灯光位置进行的任何数学运算中生成。

```
dLight.position.set(0,0,1);
// or
dLight.position = new THREE.Vector3(0,0,1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:37:09.453

你设置的光

```
light.position.set (0,0,1); 
```

但我认为你的光在几何内部。看看[http://jsfiddle.net/aSt8c/](http://jsfiddle.net/aSt8c/)。它有一个带阴影的工作定向光。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-08T17:22:09.297

关键是，您的对象的材质必须是 MeshLambertMaterial 或 MeshPhongMaterial。其他材料不能反射光线。

`//CUBE var material = new THREE.MeshPhongMaterial({ color: 0xff0000 }); OR var material = new THREE.MeshLambertMaterial({ color: 0xff0000 });`

MeshPhongMaterial 可用于闪亮，MeshLambertMaterial 可用于非闪亮（朗伯）表面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-06T02:52:21.263

你需要设置这个： floor.receiveShadow = true;

# javascript - jquery jsonp不工作

> ID：14818305
> 
> 赞同：1
> 
> 时间：2013-02-11T18:16:43.227
> 
> 标签：javascript, jquery, json, jsonp

```
$(document).ready(function() {

$.getJSON('https://jira.atlassian.com/rest/api/latest/project?callback=?', function(data) {
    console.log("success");
});
}); 
```

为什么这段代码不起作用？它在浏览器中也没有给出错误。但是如 Inspect Element 工具所示，项目文件正在 Chrome 中作为脚本下载。如何从文件中获取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:22:16.057

看起来 Atlassian 使用`jsonp-callback`而不是`callback`作为 JSONP 回调的查询字符串中的参数。

[见这里](https://developer.atlassian.com/display/REST/Atlassian+REST+API+Design+Guidelines+version+1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:31:00.477

我建议您使用[jQuery.ajax API](http://api.jquery.com/jQuery.ajax/)配置您的 JSONP 调用，例如：

```
$(function() {
  $.ajax({
    type: "GET",
    url: "https://jira.atlassian.com/rest/api/latest/project",
    dataType: "jsonp",
    jsonp: "jsonp-callback",
    data: { /* additional parameters go here */ }
  }).done(function(data) {
    console.log("success");
  });
}); 
```

该选项`jsonp`将 JSONP 回调参数重命名为 API 建议的 @mccannf。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:37:05.970

此外，为了将来参考，您可能会考虑使用 jqXHR 对象来添加错误处理功能，这样您就可以判断 JSON 请求是否失败。请参阅 jQuery 的参考 ( [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/) )

```
$(document).ready(function() {
    var jq = $.getJSON('https://jira.atlassian.com/rest/api/latest/project?callback=?',
              function(data) {
                console.log("success");
              })
    .error(function() { console.log("error occurred"); });
}); 
```

# itextsharp - iTextSharp z-index

> ID：14818308
> 
> 赞同：2
> 
> 时间：2013-02-11T18:17:08.793
> 
> 标签：itextsharp

我正在使用 itextSharp 在 pdf 文档中添加注释。

我有一个 pdf 文档，其中已经包含保存在其中的图像，它是一个邮票。

因此，我在邮票中的这个 pdf 上画了一些笔触，当我在 WPF 中绘制它们时一切都很好，但是当我使用 iTextSharp 通过电子邮件发送 pdf 进行转换时，我画的线现在位于邮票下方。

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:19:37.623

您作为[答案](https://stackoverflow.com/a/14819470/1729265)发布的解释（顺便说一句，更恰当的是编辑您的问题以包含该数据）解释了该问题。

PDF 页面上有两种主要类型的对象可见：

1.  PDF 页面内容；
2.  与页面相关的注释。

注释总是显示在页面内容之上，如果它们被显示的话。

在您的情况下，您将图像添加到 PDF 页面内容（使用 OverContent 或 UnderContent 只会更改与您添加的其他 PDF 页面内容相关的位置）。另一方面，印章很可能是通过注释来实现的。因此，戳记注释始终高于您的添加。

如果您想让您的添加出现在图章上方，您要么必须将添加的内容添加为某种注释，要么您必须在添加内容之前将图章注释展平到页面内容中。

这些变体中哪个更好，取决于您的要求。是否有任何要求强制印章保留印章注释？是否有任何要求强制您添加的内容保留为内容的一部分？请详细说明您的要求。由于内容和注释在显示或打印时有一些不同的属性，请说明所有要求。

此外，请提供样本文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:32:29.710

所以就像我说的原始pdf里面保存了一个印章，如果我用acrobat reader打开pdf，我可以移动印章。

所以在这里我的代码写了一些笔画：

```
 using (var outputStream = new FileStream(outputPath, FileMode.Create, FileAccess.Write, FileShare.Read))
        using (var intputStream = new FileStream(pathPdf, FileMode.Open, FileAccess.Read, FileShare.Read))
        {
            PdfReader reader = new PdfReader(intputStream);
            using (var pdfStamper = new PdfStamper(reader, outputStream))
            {
                foreach (var page in pages)
                {                                                
                    if (page != null && page.ExportedImages.HasItems())
                    {                                                                                                                                            
                        PdfContentByte pdfContent = pdfStamper.GetOverContent(page.PageIndex);
                        Rectangle pageSize = reader.GetPageSizeWithRotation(page.PageIndex);                            
                        PdfLayer pdfLayer = new PdfLayer(string.Format(ANNOTATIONNAMEWITHPAGENAME, page.PageIndex), pdfContent.PdfWriter);

                        foreach (ExporterEditPageInfoImage exportedInfo in page.ExportedImages)
                        {
                            Image image = PngImage.GetImage(exportedInfo.Path);                                                                
                            image.Layer = pdfLayer;

                            if (quality == PublishQuality.Normal || quality == PublishQuality.Medium || quality == PublishQuality.High)
                            {
                                float width = (float)Math.Ceiling((image.Width / image.DpiX) * 72);
                                float height = (float)Math.Ceiling((image.Height / image.DpiY) * 72);
                                image.ScaleAbsolute(width, height);

                                float x = (float)(exportedInfo.HorizontalTile * (page.TileSize * (72 / 96d)));
                                float y = (float)Math.Max(0, (pageSize.Height - ((exportedInfo.VerticalTile + 1) * (page.TileSize * (72 / 96d)))));
                                image.SetAbsolutePosition(x, y);                                    
                            }
                            else
                                throw new NotSupportedException();

                            pdfContent.AddImage(image);                                
                            GC.Collect();
                            GC.WaitForPendingFinalizers();
                        }
                    }
                }

                pdfStamper.Close();
            }
        } 
```

所以我的笔画在 pdf 中保存得很好，邮票总是在一切之上，我认为这是正常的，所以我可以为此做一个解决方法吗？

# android - android模拟器上的奇怪错误消息

> ID：14818310
> 
> 赞同：0
> 
> 时间：2013-02-11T18:17:16.580
> 
> 标签：android, android-emulator

运行后我可以看到应用程序，但是当我重新启动模拟器并单击应用程序时，它只显示应用程序未安装。可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:41:51.307

仔细检查你的android AndroidManifest.xml 文件，可能有问题，比如你给了错误的权限或者两次添加了一个权限。如果没有，则将此用户权限添加到您的文件中

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

还要检查您是否在清单文件中正确指定了启动器

# objective-c - 访问数组Objective C的内容

> ID：14818314
> 
> 赞同：0
> 
> 时间：2013-02-11T18:17:29.300
> 
> 标签：objective-c, json

我有一个像这样的 json 结构，我正在尝试检查每个嵌套小部件数组中的“类型”。因此，如果它是某种类型，那么我正在尝试提取淡入淡出步骤、宽度、高度等属性。

有没有办法使用 for 循环来做到这一点？现在我正在这样做：

```
for (NSString *widgetArray in widgets)
{
    NSLog(@"%@", widgetArray);
} 
```

它打印内容，如何提取相应的值？for(NSDictionary *asset in [assets allValues]) { NSString *type = assets[@"type"];

```
 if ([type isEqualToString:@"gradient"])
    {
        [gradients addObject:asset];

    } 
```

这是帮助我访问字典内容的成员之一提供的伪代码，我无法将类似的逻辑应用于嵌套数组结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:22:49.407

要检查每个元素的类型，请使用`NSObject` `isKindOfClass:`方法。

所以，你可能有类似的东西：

```
if ([obj isKindOfClass:[NSDictionary class]]) { ... } 
```

或者

```
if ([obj isKindOfClass:[NSArray class]]) { ... } 
```

就像@H2CO3 说的，你`objectAtIndex:`用来访问数组元素和`objectForKey:`访问字典元素。

**编辑：**我刚刚意识到，“某种类型”的 OP 是指“类型”字段的值，而不是条目的objective-c 类。不过，在读取 JSON 数据以确定条目是数组还是字典时，它通常很有用，所以我将在此处留下答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:24:09.877

在最新的目标 C 中，您可以像 C 数组一样使用下标。例如，

```
NSLog(@"%@", widgetArray[i]); 
```

对于字典，您可以通过键提取：

```
NSString* id = myDict[@"id"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:59:27.967

由于问题是递归搜索，因此您必须使用**stack**。以下是步骤：

1.  创建`NSMutableArray`将用作堆栈。现在它是空的。
2.  取出根`widgets`数组并将其所有对象放入堆栈 ( `-addObjectsFromArray:`)。
3.  取出`NSDictionary`堆栈中的第一个小部件 ( )。**将其存储在变量中后**，请务必将其**从堆栈**( `-removeObjectAtIndex:`)中取出。
***   用那个变量做你的`type`比较和其他事情。*   就像*在步骤 2 中*一样，取出它的子小部件并将它们全部放入堆栈。*   如果堆栈中有东西，从*第 3 步*开始重复。否则，您处理了所有小部件。**

 **伪代码：

```
// 1
NSMutableArray *stack = [NSMutableArray array];
// 2
[stack addObjectsFromArray:rootWidgets];
while (stack.count > 0) {
    // 3
    NSDictionary *widgetDict = [stack objectAtIndex:0];
    [stack removeObjectAtIndex:0];
    // 4
    if ([[widgetDict objectForKey:@"type"] isEqualToString:...]) // Do whatever...
    // 5
    [stack addObjectsFromArray:[widgetDict objectForKey:@"widgets"]];
}
// 6
// You are done... 
```**

# python - 使用 Python 编码错误

> ID：14818316
> 
> 赞同：1
> 
> 时间：2013-02-11T18:17:43.093
> 
> 标签：python, encoding, character-encoding, non-ascii-characters

我编写了一个代码来连接 imap，然后解析正文信息并插入数据库。但是我在口音方面遇到了一些问题。

从电子邮件标题中，我得到了以下信息：

> 内容类型：文本/html；字符集=ISO-8859-1

但是，我不确定我是否可以相信这些信息......

电子邮件是用葡萄牙语写的，所以我们有很多带有口音的单词。例如，我从电子邮件源代码中提取以下短语（使用我的浏览器）：

> “...安装电子产品...”

所以，我连接到 imap 并获取了一些电子邮件：

> ... 典型值，数据 = M.fetch(num, '(RFC822)') ...

当我打印内容时，我得到以下单词：

```
print data[0][1] 
```

> ```
> instala+º+úo de eletr+¦nicos 
> ```

我尝试使用`.decode('utf-8')`但没有成功。

> instalaÃ§Ã£o de eletrÃ´nicos

我怎样才能使它成为人类可读的？我的数据库是 utf-8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:13:45.680

指定源代码编码对我有用。这是下面我的示例代码顶部的代码。这应该在 python 文件的顶部定义。

```
#!/usr/bin/python
# -*- coding: iso-8859-15 -*-

value = """...instalação de eletrônicos...""".decode("iso-8859-15")
print value
# prints: ...instalação de eletrônicos...

import unicodedata
value = unicodedata.normalize('NFKD', value).encode('ascii','ignore')
print value
# prints: ...instalacao de eletronicos... 
```

现在您也可以毫无例外地执行 str(value) 。

请参阅：[http ://docs.python.org/2/library/unicodedata.html](http://docs.python.org/2/library/unicodedata.html)

这似乎保留了所有的口音：

```
#!/usr/bin/python
# -*- coding: iso-8859-15 -*-
import unicodedata
value = """...instalação de eletrônicos...""".decode("iso-8859-15")
value = unicodedata.normalize('NFKC', value).encode('utf-8')
print value
print str(value)

# prints (without exceptions/errors):
# ...instalação de eletrônicos...
# ...instalação de eletrônicos... 
```

**编辑：**

请注意，对于最后一个版本，即使结果看起来相同，它也不返回等于 True。例如：

```
#!/usr/bin/python
# -*- coding: iso-8859-15 -*-
import unicodedata
inValue = """...instalação de eletrônicos...""".decode("iso-8859-15")
normalizedValue = unicodedata.normalize('NFKC', inValue).encode('utf-8')

try:
    print inValue == normalizedValue
except UnicodeWarning:
    pass
# False 
```

**编辑2：**

这将返回相同的结果：

```
normalizedValue = unicode("""...instalação de eletrônicos...""".decode("iso-8859-15")).encode('utf-8')
print normalizedValue 
print str(normalizedValue )

# prints (without exceptions/errors):
# ...instalação de eletrônicos...
# ...instalação de eletrônicos... 
```

虽然我不确定这对于 utf-8 编码的数据库是否真的有效。可能不是？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T02:14:03.933

感谢Martijn Pieters。我们发现电子邮件有两种不同的编码。我不得不分开这部分并单独对待。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:23:43.997

标头说它正在使用“ISO-8859-1”字符集。因此，您需要使用该编码解码字符串。

尝试这个：

```
data[0][1].decode('iso-8859-1') 
```

# json - 如何更改 NetBeans 格式化 JSON 数据的方式？

> ID：14818320
> 
> 赞同：1
> 
> 时间：2013-02-11T18:17:59.597
> 
> 标签：json, formatting, netbeans-7

我正在使用`NetBeans 7.2`并且在我的 JavaScript 文件中，我更喜欢将 JSON 格式设置为：

```
{text:'Serial Number: ',x:10, y:10, xtype:'label'},
{text:'Product Code: ',x:10, y:30, xtype:'label'},
.... 
```

但相反，当我应用 Format 命令 ( `Alt-Shift-F`) 时，它会将其格式化为：

```
{
    text:'Serial Number: ',
    x:10,
    y:10,
    xtype:'label'
},
{
    text:'Product Code: ',
    x:10, 
    y:30, 
    xtype:'label'
}, 
```

我到处找，但找对了地方。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-25T12:10:14.243

在 Netbeans 7.4（可能还有其他）下，您需要：

1.  选择菜单`Tools/Options`

2.  选择`Editor`部分

3.  选择`Formatting`标签

4.  选择`JSON`语言

5.  随意调整...更改类别以进行进一步设置

![示例设置](../Images/3e8f2cdc1b516d3822f7a76c5bcc202a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:39:52.977

看来这`NetBeans 7.3`正是我想要的。虽然我无法弄清楚如何自定义 JSON 格式，但 7.3 并没有像 7.2 那样破坏我的格式。

# ruby-on-rails - Rails 状态 406 POST 响应

> ID：14818321
> 
> 赞同：3
> 
> 时间：2013-02-11T18:18:10.453
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在过去的 4 个小时里，我一直在努力解决这个问题。每当我发送不带参数 (body="{}") 的 POST 请求时，我都会收到带有 406 HTTP 状态错误代码的响应。

我的控制器看起来很简单

```
def resetFixture

    respond_to do |format|
      format.json { render :json=>final_obj, :status=>:ok}
    end
  end 
```

路线：

```
match 'TESTAPI/resetFixture' => 'users#resetFixture', :via => :post 
```

我正在尝试使用“{errCode:1}”返回 JSON 响应

如果我使用 -d "" 发出 curl 请求，我会得到我想要的响应，但是如何修复此错误代码？我似乎已经指定了 JSON 和状态。

如果我还包括来自服务器的失败请求的调试日志，它可能会更直观：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:20:55.090

由于您无法请求 resetFixture.json，因此您需要将以下标头添加到您的请求中：

`Accept: application/json`

这将告诉 rails 您想要返回 JSON。

您可以通过添加以下参数来使用 curl 进行测试：`-H "Accept: application/json"`

或者，如果您希望 Rails 始终默认为 JSON，您可以将路由更改为：

`match 'TESTAPI/resetFixture' => 'users#resetFixture', :via => :post, :defaults => { :format => 'json' }`

# php - PHP 以 / 开头的路径使用它所在的 linux 机器的根目录。如何制作/参考网站根目录

> ID：14818323
> 
> 赞同：0
> 
> 时间：2013-02-11T18:18:26.330
> 
> 标签：php, apache, .htaccess, web

这将使包含文件变得更加容易。有没有这样做，例如在 .htaccess 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:34:05.147

PHP 将引用文件所在位置的文件，就像您所说的那样，PHP 通常不知道它正在使用的 URL。我建议使用 spl_autoloader ( [http://php.net/manual/en/function.spl-autoload.php](http://php.net/manual/en/function.spl-autoload.php) )，这样您只需包含一个文件，然后 spl_autoloader 将包含您的其余类。

另请查看：[https ://github.com/theseer/Autoload](https://github.com/theseer/Autoload)

# binding - Rebol 2 和 3 之间的绑定行为差异的总结是什么？

> ID：14818324
> 
> 赞同：10
> 
> 时间：2013-02-11T18:18:27.467
> 
> 标签：binding, bind, rebol, rebol3, rebol2

[当前关于变量绑定](http://www.rebol.net/wiki/Bindology)目标 Rebol 2的深入文档。有人可以提供 Rebol 2 和 3 之间差异的摘要吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-11T23:20:53.550

某处没有真正的总结，所以让我们回顾一下基础知识，也许比[Bindology](https://github.com/revault/rebol-wiki/wiki/Bindology "绑定学")更非正式一些。让拉迪斯拉夫为 R3 和 Red 写一篇新的论文。我们将按重要性顺序讨论基本差异。

## 对象和函数上下文

*这是最大的区别。*

在 R2 中，基本上有两种上下文：常规对象上下文和`system/words`. 两者都有静态绑定，这意味着一旦`bind`函数运行，单词绑定指向一个带有真实指针的特定对象。

`system/words`上下文可以在运行时扩展以包含新词，但所有其他对象都没有。函数使用常规对象上下文，当您递归调用函数时，使用一些技巧来切换值块。

该词`self`只是对象上下文中第一个词出现的常规词，具有显示技巧以不显示上下文中的第一个词；函数上下文没有那个词，所以它们没有正确显示第一个常规词。

*在 R3 中，几乎所有这些都不同。*

在 R3 中还有两种上下文：常规上下文和本地堆栈上下文。对象、模块、绑定循环、基本上除了函数之外的所有内容都使用常规上下文`use`，并且它们可以像`system/words`was 一样可扩展（是的，“was”，我们会谈到这一点）。旧的固定长度对象不见了。函数使用堆栈本地上下文，它（除非我们还没有看到任何错误）不应该是可扩展的，因为这会弄乱堆栈帧。与旧的一样，`system/words`您不能缩小上下文，因为从上下文中删除单词会破坏这些单词的任何绑定。

如果您想将单词添加到常规上下文中，您可以使用`bind/new`、`bind/set`、`resolve/extend`或`append`，或其他调用它们的函数，具体取决于您需要的行为。这是R3中`bind`and函数的新行为。`append`

与以前一样，单词与常规和堆栈本地上下文的绑定是静态的。值*查找*是另一回事。对于常规上下文，值查找非常直接，通过一个简单的指针间接指向一个静态值槽块来完成。对于堆栈本地上下文，值块由堆栈帧链接到并从那里引用，因此要找到正确的帧，您必须执行 O(stack-depth) 的堆栈遍历。有关详细信息，请参阅[错误 #1946](https://github.com/rebol/rebol-issues/issues/1946 "函数变量访问为 O(n)，具体取决于堆栈深度") - 我们稍后会讨论原因。

哦，`self`它不再是一个常规词，它是一个绑定技巧，一个关键字。当您将词块绑定到对象或模块上下文时，它会绑定`self`评估为对上下文的引用的关键字。但是，可以设置一个内部标志，表示上下文是“无私的”，从而关闭该`self`关键字。关闭该关键字后，您实际上可以将该词`self`用作上下文中的字段。绑定循环`use`和函数上下文为它们的上下文设置了无私标志，并且`selfless?`函数会对此进行检查。

这个模型在相当复杂的 CureCode 火焰战争中得到了改进和记录，就像 R2 的模型在 1999-2000 年被 REBOL 邮件列表火焰战争记录下来一样。:-)

## 函数与闭包

当我在上面谈论堆栈本地函数上下文时，我指的是`function!`类型函数使用的上下文。R3 有很多函数类型，但它们中的大多数都是本机函数，并且本机函数不使用这些堆栈本地上下文（尽管它们确实获取堆栈帧）。唯一适用于 Rebol 代码的函数类型是`function!`和一个新`closure!`类型。闭包与常规函数非常不同。

当您创建一个`function!`时，您正在创建一个函数。它构造一个堆栈本地上下文，将代码体绑定到它，并将代码体和规范捆绑在一起。当您调用该函数时，它会创建一个包含对该函数上下文的引用的堆栈帧并运行代码块。如果它在函数上下文中有访问字，它会进行堆栈遍历以找到正确的帧，然后从那里获取值。非常坦率的。

`closure!`另一方面，当您创建 builder 时，您会创建一个*function builder*。它设置*规范*和函数`function!`体几乎*与*在副本中。然后，当它复制主体时，所有闭包词引用与对象上下文的引用一样静态。*`bind/copy`*

 *两者之间的另一个区别在于它们在函数运行之前、函数运行时以及函数运行完成之后的行为方式。

在 R2中，`function!`当函数未运行时，上下文仍然存在，但函数顶层调用的值块仍然存在。只有递归调用才能获得新的值块，顶级调用保持一个持久的值块就像我说的，hackery。更糟糕的是，函数返回时不会清除顶级值块，因此您最好确保没有引用任何敏感内容或在函数返回时要回收（使用`also`函数清理，这就是我为）。

在 R3 中，`function!`当函数未运行时，上下文仍然存在，但值块根本不存在。所有函数调用的行为都类似于 R2 中的递归调用，但更好的是因为它一直是这样设计的，而是引用堆栈帧。该堆栈框架的范围是动态的（如果您需要它的历史，请跟踪一个 Lisp 粉丝），所以只要该函数在当前堆栈上运行（是的，“当前”，我们会解决这个问题），你可以使用其中一个词来获取该函数*最近一次调用*的值。一旦函数的所有嵌套调用都返回，范围内将没有任何值，您只会触发一个错误（错误的错误，但我们会修复它）。

绑定到我的待办事项列表中的范围外功能词也有一个无用的限制，很快就会修复。有关详细信息，请参阅[错误 #1893](https://github.com/rebol/rebol-issues/issues/1893 "BIND stuff function-bound-word 限制没有好处，应该去掉")。

对于`closure!`函数，在闭包运行之前*，上下文根本不存在*。一旦闭包开始运行，上下文就会被创建并持久存在。如果您再次或递归地调用闭包，则会创建*另一个*持久上下文。任何从闭包中泄露出来的词只指在闭包的特定运行期间创建的上下文。

当函数或闭包未运行时，您无法在 R3 中将单词绑定到函数或闭包上下文。对于函数，这是一个安全问题。对于闭包，这是一个定义问题。

闭包被认为非常有用，以至于 Ladislav 和我都将它们移植到 R2，在不同的时间独立地产生相似的代码，这很奇怪。我认为 Ladislav 的版本早于 R3，并作为 R3`closure!`类型的灵感来源；我的版本基于测试该类型的外部行为并尝试在 R2 中为 R2/Forward 复制它，所以有趣的是，`closure`最终的解决方案与 Ladislav 的原始解决方案非常相似，直到很久以后我才看到。我的版本从 2.7.7 开始包含在 R2 本身中，作为`closure`,`to-closure`和`closure?`函数，并且这个`closure!`词被分配了与 R2 中相同的类型值`function!`。

## 全球与本地环境

*这就是事情变得非常有趣的地方。*

在[Bindology](https://github.com/revault/rebol-wiki/wiki/Bindology "绑定学")中，有相当多的文章讨论了“全局”上下文（结果是`system/words`）和“本地”上下文之间的区别，这对于 R2 来说是一个相当重要的区别。在 R3 中，*这种区别是无关紧要的*。

在 R3 中，`system/words`消失*了*。没有一个“全局”上下文。就 R2 中的含义而言，所有常规上下文都是“本地”的，这使得“本地”的含义变得毫无用处。对于 R3，我们需要一组新的术语。

对于 R3，唯一重要的区别是上下文是否与*任务相关*，因此“全局”上下文的唯一有用含义是那些不直接与任务相关的上下文，而“本地”上下文是那些与任务相关的上下文. 在这种情况下，“任务”将是`task!`类型，它基本上是当前模型中的操作系统线程。

目前，在 R3 中，目前唯一（几乎）与任务相关的是堆栈变量，这意味着堆栈相关的函数上下文也应该是*任务相关的*。这就是为什么[堆栈遍历](https://github.com/rebol/rebol-issues/issues/1946 "函数变量访问为 O(n)，具体取决于堆栈深度")是必要的，因为否则我们需要在*每个函数上下文*中保留和维护 TLS 指针。所有*常规*上下文都是全局的。

另一件要考虑的事情是，根据计划（目前为止大部分都没有实现），用户上下文`system/contexts/user`和`system`它本身也应该是任务相关的，所以即使按照 R3 标准，它们也会被认为是“本地的”。由于`system/contexts/user`基本上是 R3 与 R2's 最接近的东西`system/words`，这意味着*脚本*认为是它们的“全局”上下文实际上应该是R3 中*的任务本地*。

R3 确实有几个称为`sys`and的系统全局上下文`lib`，尽管它们的使用方式与 R2 的全局上下文完全不同。此外，所有模块上下文都是全局的。

有可能（并且很常见）全局定义的上下文仅从任务本地根引用中引用，因此这将使这些上下文*间接地起作用 task-local*。这是从“用户代码”调用绑定循环、闭包或私有模块时通常发生的情况`use`，这基本上意味着非模块脚本，它们被绑定到`system/contexts/user`. 从技术上讲，从模块调用的函数也是如此（因为函数是堆栈本地的），但这些引用通常最终分配给模块字，它们是全局的。

不，我们还没有同步。尽管如此，这仍然是 R3 的设计最终应该拥有的模型，并且部分已经做到了。有关更多详细信息，请参阅[模块绑定文章](https://stackoverflow.com/questions/14420942/how-are-words-bound-within-a-rebol-module/14552755 "Rebol 模块中的单词是如何绑定的？")。

作为奖励，R3 现在有一个真实的符号表，而不是`system/words`用作临时符号表。这意味着 R2 用于快速达到的字数限制在 R3 中有效地消失了。我不知道有任何应用程序达到了新的限制，甚至没有确定限制有多高，尽管它显然远远超过了数百万个不同的符号。现在我们可以访问它，我们应该检查源以弄清楚这一点。

## 加载和使用

末节。该`use`函数用 初始化它的单词`none`而不是让它们未设置。而且因为没有像 R2 中那样的“全局”上下文，`load`所以根本不一定绑定单词。绑定到哪个上下文`load`取决于[模块绑定文章](https://stackoverflow.com/questions/14420942/how-are-words-bound-within-a-rebol-module/14552755 "Rebol 模块中的单词是如何绑定的？")中提到的情况，但除非您另外指定，否则它会显式地将单词绑定到`system/contexts/user`. 现在两者都是夹层功能。

## 拼写和别名

R3 在这方面与 R2 基本相同，默认情况下单词绑定不区分大小写。单词本身是保留大小写的，如果您使用区分大小写的方法比较它们，您会发现单词之间的差异仅在大小写上有所不同。

但是，在对象或函数上下文中，当一个词被映射到一个值槽时，另一个词被绑定到该上下文或在运行时查找，仅大小写不同的词被认为是有效的同一个词并映射到同一个词价值槽。

然而，我们发现显式创建的别名是用`alias`函数创建的，其中别名单词的拼写在其他方面有所不同，而不仅仅是大小写*破坏了对象和函数上下文*。在 R2 中，他们在 中解决了这些问题`system/words`，这使得`alias`除了演示之外的其他任何东西都很难使用，而不是非常危险。

因此，我们`alias`完全删除了外部可见功能。内部别名工具仍然有效，因为它只对通常被认为等效于上下文查找的单词进行别名，这意味着上下文不会中断。但是我们现在建议`alias`使用在演示中使用的本地化和其他技巧（如果从未在实践中使用过）使用老式方法为具有新拼写的另一个单词分配值。

## 单词类型

该`issue!`类型现在是单词类型。你可以绑定它。到目前为止，没有人利用能够绑定问题的优势，而只是利用提高的操作速度。

就是这样，对于有意的更改。其余大部分差异可能是上述的副作用，甚至可能是错误或尚未实现的功能。R3 中甚至可能存在一些类似 R2 的行为，这也是错误或尚未实现的功能的结果。如有疑问，请先询问。*

# c++ - 在paintEvent中创建两个QPainter

> ID：14818325
> 
> 赞同：0
> 
> 时间：2013-02-11T18:18:28.883
> 
> 标签：c++, qt, warnings

这是主程序的小案例：

```
void Widget::paintEvent(QPaintEvent *){
    QPainter *painter1 = new QPainter(this);
    QPainter *painter2 = new QPainter(this);

    delete painter1;

    painter2->drawLine(50,50,200,100);     
} 
```

它正在崩溃。如果删除最后一行，我会收到以下警告消息：

> QPaintDevice：无法销毁正在绘制的绘制设备

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:35:22.017

该`QPainter`对象与`QPaintDevice`. 在下面第三个链接的注释中，它讨论了`QPainter`对象在`QWidget::paintEvent()`.

[http://qt-project.org/doc/qt-4.8/qpainter.html#details](http://qt-project.org/doc/qt-4.8/qpainter.html#details)

[http://qt-project.org/doc/qt-4.8/paintsystem.html](http://qt-project.org/doc/qt-4.8/paintsystem.html)

[http://qt-project.org/doc/qt-4.8/qpainter.html#QPainter-2](http://qt-project.org/doc/qt-4.8/qpainter.html#QPainter-2)（第三个链接）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-18T19:12:37.697

*为了澄清phyatt*所说的一点，为了避免该错误，您应该在代码中添加：

```
painter2->end(); 
```

画完线后。
我还没有测试过，但我认为添加那行代码会对你有所帮助。

# mysql - DataGridView对应的Columns...用MySQL

> ID：14818327
> 
> 赞同：0
> 
> 时间：2013-02-11T18:18:44.937
> 
> 标签：mysql, vb.net, datagridview

我有一个 DataGridView，我想要在 CheckColumn（我将其命名为“chk”）中检查的所有行对应的“ID”是另一列（column1）

我需要这些信息来朗读 MySQL 命令以删除已检查的用户..

我什至不知道如何开始请帮助不要讨厌:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:47:27.050

我认为您不能仅使用 CheckColumn 'chk' 来做到这一点。相反，遍历 的所有行`DataGridView`，并找出 CheckColumn 的值是否为真。

这是一个可以帮助您入门的示例。想象一下，您有一个按钮单击例程来删除所有选中的行。在此例程中，当您遍历 中的每一行时，将 CheckColumn`DataGridView`值为 的行存储到. 在我的示例中，我假设 ID 列是第一列，而 CheckColumn 是第二列。您可以调整我的示例中的数组索引以满足您的需要，或者按名称而不是索引访问列。对于已检查的行，您可以调用执行 SQL 事务的函数。`True``List`

当您完成`DataGridView`整个.`True``DataGridView`

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    //Use a list to store all the rows you need to delete
    Dim RowsToDelete As New List(Of DataGridViewRow)

    //Go through each row and find all the ones who's values are checked
    For Each row As DataGridViewRow In DataGridView1.Rows
        //Assume column at index 0 is the ID and column at index 1 is the CheckColumn
        If row.Cells(1).Value = True Then
            DeleteRow(row.Cells(0).Value) //This will call your SQL stored procedure and pass it the ID
            RowsToDelete.Add(row)
        End If
    Next

    //Delete all the rows from the DataGridView that were checked
    For Each rowtodelete In RowsToDelete
        DataGridView1.Rows.Remove(rowtodelete)
    Next
End Sub

Private Sub DeleteRow(ByVal ID As Integer)
    //Call an SQL function here with the ID Value
    //To delete the record from the database
End Sub 
```

您可以通过将 ID 存储在表中并将表作为值传递给您的 SQL 过程来提高性能……我知道您可以在 SQL Server 2008 中执行此操作，但我不确定 MySQL。此外，如果 SQL 调用需要很长时间（在这种情况下似乎不会），您可能需要考虑在与用户界面不同的线程上运行 SQL 命令。但不要跳得太远，这应该足以让你开始。

# php - 使用 PHP 大量行和自动增量 ID 在 MySQL 中插入

> ID：14818331
> 
> 赞同：-2
> 
> 时间：2013-02-11T18:19:01.350
> 
> 标签：php, mysql, mysqli, mysql-insert-id

我通过 PHP 在 MySQL 中插入了大约 50k 个条目。表很简单，带有 ID（自动增量）和几个 VARCHAR 字段......

由于该系统允许多个用户同时登录并执行相同的插入数据操作，所以假设 USER1 开始“插入”并且在同一毫秒内 USER2 开始在同一个表中插入数据 - 我很好奇 MySQL 是否会等待USER1 完成处理，然后处理 USER2 条目，否则它会同时插入？

所以按照这个逻辑，USER1插入ID将从1到50k，USER2从50k-100k，或者另一方面它会洗牌吗？

...如果它会“洗牌”，有没有办法防止这种情况？

PS我知道-我可以添加带有user_id的附加字段，这样我就可以区分哪个用户进行了实际的“输入”，但是在这种情况下，我真的很想为USER1保留1-50k的空间，为USER2保留50k-100k的空间……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:23:45.873

要为您自己保留表格并因此自动增加 ID，您应该`LOCK`在开始插入之前保留表格。否则，很可能会“改组” id。

请注意，即使是锁定，也*不能*保证自动增量 ID 的连续性。我知道拥有一个具有连续 id 的插入块将是“一个不错的选择”，但这不是它们的用途，并且系统中没有保证可以做到这一点。所以不要以任何方式依赖它或期望它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:25:28.010

你不应该关心那个。
Id 只是一个唯一创建的标识符**，没有特殊含义**。
任何时候你在这个标识符上赋予特殊意义，你都会面临一场灾难。

# ruby-on-rails - Vagrant VM 和自动启动 Ruby on Rails 服务器

> ID：14818332
> 
> 赞同：0
> 
> 时间：2013-02-11T18:19:07.573
> 
> 标签：ruby-on-rails, vagrant

我们的团队刚刚开始尝试使用 Vagrant 作为一种跨非常多样化的团队（多个开发人员、设计师、UX 工程师和利益相关者）管理我们的开发环境的方式，因此它似乎是我们的完美解决方案。

由于团队的多样性，我希望能够避免 Vagrant 过程中用户需要通过 SSH 连接到 VM 以启动服务器的部分。我知道可以编辑 VM 的启动文件（我们使用 Ubuntu 作为 VM 基础），还可以编辑 Vagrant 插件，根据我正在阅读的内容，似乎两种可能的解决方案可以给我们想要的活动。我不知道什么被认为是这个问题的最佳实践。我对 Vagrant 空间很陌生，所以我伸出手来，希望有人能提供关于实现这一目标的最佳方法的见解。

或者，如果有人知道如何实现这个目标的可重用示例，那也将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:29:47.080

我们最终只是在项目的 Vagrantfile 中编写了 Vagrant 插件。也许不是最好的方法，但对我们的个人情况有效。

# eclipse - Hadoop Eclipse 插件错误：本地异常调用 localhost/127.0.0.1:54311 失败：java.io.EOFException

> ID：14818333
> 
> 赞同：0
> 
> 时间：2013-02-11T18:19:13.300
> 
> 标签：eclipse, hadoop, eclipse-plugin, mapreduce, hadoop-plugins

一年前我看到有人提出了类似的问题。这是链接： [看这里](https://stackoverflow.com/questions/9136859/eclipse-hadoop-plugin-says-java-io-eofexception-while-trying-to-connect)

我有类似的配置，但面临同样的`EOFException`错误。

Eclipse 的 Hadoop 插件有问题还是与我的 Hadoop 配置有关？（注意：我遵循标准配置；所以没有出错的机会；另外，当我运行 bin/start-all.sh 时，单节点 Hadoop 集群运行良好）

下面是 Eclipse 在连接到 HDFS 时的堆栈跟踪：

```
java.io.IOException: Call to localhost/127.0.0.1:54311 failed on local exception: java.io.EOFException
    at org.apache.hadoop.ipc.Client.wrapException(Client.java:775)
    at org.apache.hadoop.ipc.Client.call(Client.java:743)
    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:220)
    at org.apache.hadoop.mapred.$Proxy1.getProtocolVersion(Unknown Source)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:359)
    at org.apache.hadoop.mapred.JobClient.createRPCProxy(JobClient.java:470)
    at org.apache.hadoop.mapred.JobClient.init(JobClient.java:455)
    at org.apache.hadoop.mapred.JobClient.<init>(JobClient.java:442)
    at org.apache.hadoop.eclipse.server.HadoopServer.getJobClient(HadoopServer.java:473)
    at org.apache.hadoop.eclipse.server.HadoopServer$LocationStatusUpdater.run(HadoopServer.java:102)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)
Caused by: java.io.EOFException
    at java.io.DataInputStream.readInt(DataInputStream.java:392)
    at org.apache.hadoop.ipc.Client$Connection.receiveResponse(Client.java:501)
    at org.apache.hadoop.ipc.Client$Connection.run(Client.java:446) 
```

Hadoop NameNode 日志如下：

```
STARTUP_MSG: Starting NameNode STARTUP_MSG: host = somnath-laptop/127.0.1.1 STARTUP_MSG: args = [] STARTUP_MSG: version = 1.0.4 STARTUP_MSG: build = https://svn.apache.org/repos/asf/hadoop/common/branches/branch-1.0 -r 1393290; compiled by 'hortonfo' on Wed Oct 3 05:13:58 UTC 2012 ************************************************************/ 
2013-02-11 13:26:56,505 INFO org.apache.hadoop.metrics2.impl.MetricsConfig: loaded properties from hadoop-metrics2.properties 
2013-02-11 13:26:56,520 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source MetricsSystem,sub=Stats registered. 
2013-02-11 13:26:56,521 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Scheduled snapshot period at 10 second(s). 
2013-02-11 13:26:56,521 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: NameNode metrics system started 
2013-02-11 13:26:56,792 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source ugi registered. 
2013-02-11 13:26:56,797 WARN org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Source name ugi already exists! 
2013-02-11 13:26:56,807 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source jvm registered. 
2013-02-11 13:26:56,809 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source NameNode registered. 
2013-02-11 13:26:56,882 INFO org.apache.hadoop.hdfs.util.GSet: VM type = 64-bit 
2013-02-11 13:26:56,882 INFO org.apache.hadoop.hdfs.util.GSet: 2% max memory = 17.77875 MB 
2013-02-11 13:26:56,883 INFO org.apache.hadoop.hdfs.util.GSet: capacity = 2^21 = 2097152 entries 
2013-02-11 13:26:56,883 INFO org.apache.hadoop.hdfs.util.GSet: recommended=2097152, actual=2097152 
2013-02-11 13:26:56,914 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: fsOwner=hduser 
2013-02-11 13:26:56,914 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: supergroup=supergroup 
2013-02-11 13:26:56,914 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isPermissionEnabled=true   
2013-02-11 13:26:56,922 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: dfs.block.invalidate.limit=100 
2013-02-11 13:26:56,922 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isAccessTokenEnabled=false accessKeyUpdateInterval=0 min(s), accessTokenLifetime=0 min(s) 
2013-02-11 13:26:56,957 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Registered FSNamesystemStateMBean and NameNodeMXBean 
2013-02-11 13:26:57,023 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: Caching file names occuring more than 10 times 
2013-02-11 13:26:57,109 INFO org.apache.hadoop.hdfs.server.common.Storage: Number of files = 7 
2013-02-11 13:26:57,123 INFO org.apache.hadoop.hdfs.server.common.Storage: Number of files under construction = 0 
2013-02-11 13:26:57,124 INFO org.apache.hadoop.hdfs.server.common.Storage: Image file of size 654 loaded in 0 seconds. 
2013-02-11 13:26:57,124 INFO org.apache.hadoop.hdfs.server.common.Storage: Edits file /app/hadoop/tmp/dfs/name/current/edits of size 4 edits # 0 loaded in 0 seconds. 
2013-02-11 13:26:57,126 INFO org.apache.hadoop.hdfs.server.common.Storage: Image file of size 654 saved in 0 seconds. 
2013-02-11 13:26:57,548 INFO org.apache.hadoop.hdfs.server.common.Storage: Image file of size 654 saved in 0 seconds. 
2013-02-11 13:26:57,825 INFO org.apache.hadoop.hdfs.server.namenode.NameCache: initialized with 0 entries 0 lookups 
2013-02-11 13:26:57,825 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Finished loading FSImage in 923 msecs 
2013-02-11 13:26:57,830 INFO org.apache.hadoop.hdfs.StateChange: STATE* Safe mode ON. The ratio of reported blocks 0.0000 has not reached the threshold 0.9990\. Safe mode will be turned off automatically. 
2013-02-11 13:26:57,838 INFO org.apache.hadoop.util.HostsFileReader: Refreshing hosts (include/exclude) list 
2013-02-11 13:26:57,845 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source FSNamesystemMetrics registered. 
2013-02-11 13:26:57,870 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source RpcDetailedActivityForPort54310 registered. 
2013-02-11 13:26:57,871 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source RpcActivityForPort54310 registered. 
2013-02-11 13:26:57,873 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: Namenode up at: localhost/127.0.0.1:54310 
2013-02-11 13:26:57,879 INFO org.apache.hadoop.ipc.Server: Starting SocketReader 
2013-02-11 13:27:03,041 INFO org.mortbay.log: Logging to org.slf4j.impl.Log4jLoggerAdapter(org.mortbay.log) via org.mortbay.log.Slf4jLog 
2013-02-11 13:27:03,142 INFO org.apache.hadoop.http.HttpServer: Added global filtersafety (class=org.apache.hadoop.http.HttpServer$QuotingInputFilter) 
2013-02-11 13:27:03,156 INFO org.apache.hadoop.http.HttpServer: dfs.webhdfs.enabled = false 
2013-02-11 13:27:03,164 INFO org.apache.hadoop.http.HttpServer: Port returned by webServer.getConnectors()[0].getLocalPort() before open() is -1\. Opening the listener on 50070 
2013-02-11 13:27:03,165 INFO org.apache.hadoop.http.HttpServer: listener.getLocalPort() returned 50070 webServer.getConnectors()[0].getLocalPort() returned 50070 
2013-02-11 13:27:03,166 INFO org.apache.hadoop.http.HttpServer: Jetty bound to port 50070 
2013-02-11 13:27:03,166 INFO org.mortbay.log: jetty-6.1.26 
2013-02-11 13:27:03,585 INFO org.mortbay.log: Started SelectChannelConnector@0.0.0.0:50070 
2013-02-11 13:27:03,585 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: Web-server up at: 0.0.0.0:50070 
2013-02-11 13:27:03,586 INFO org.apache.hadoop.ipc.Server: IPC Server Responder: starting 
2013-02-11 13:27:03,587 INFO org.apache.hadoop.ipc.Server: IPC Server handler 0 on 54310: starting 
2013-02-11 13:27:03,587 INFO org.apache.hadoop.ipc.Server: IPC Server listener on 54310: starting 
2013-02-11 13:27:03,587 INFO org.apache.hadoop.ipc.Server: IPC Server handler 1 on 54310: starting 
2013-02-11 13:27:03,588 INFO org.apache.hadoop.ipc.Server: IPC Server handler 2 on 54310: starting 
2013-02-11 13:27:03,588 INFO org.apache.hadoop.ipc.Server: IPC Server handler 3 on 54310: starting 
2013-02-11 13:27:03,588 INFO org.apache.hadoop.ipc.Server: IPC Server handler 4 on 54310: starting 
2013-02-11 13:27:03,588 INFO org.apache.hadoop.ipc.Server: IPC Server handler 5 on 54310: starting 
2013-02-11 13:27:03,588 INFO org.apache.hadoop.ipc.Server: IPC Server handler 6 on 54310: starting 
2013-02-11 13:27:03,588 INFO org.apache.hadoop.ipc.Server: IPC Server handler 7 on 54310: starting 
2013-02-11 13:27:03,588 INFO org.apache.hadoop.ipc.Server: IPC Server handler 8 on 54310: starting 
2013-02-11 13:27:03,589 INFO org.apache.hadoop.ipc.Server: IPC Server handler 9 on 54310: starting 
2013-02-11 13:27:07,306 ERROR org.apache.hadoop.security.UserGroupInformation: PriviledgedActionException as:hduser cause:org.apache.hadoop.hdfs.server.namenode.SafeModeException: Cannot delete /app/hadoop/tmp/mapred/system. Name node is in safe mode. The ratio of reported blocks 0.0000 has not reached the threshold 0.9990\. Safe mode will be turned off automatically. 
2013-02-11 13:27:07,308 INFO org.apache.hadoop.ipc.Server: IPC Server handler 7 on 54310, call delete(/app/hadoop/tmp/mapred/system, true) from 127.0.0.1:51327: error:  
org.apache.hadoop.hdfs.server.namenode.SafeModeException: Cannot delete /app/hadoop/tmp/mapred/system. Name node is in safe mode. The ratio of reported blocks 0.0000 has not reached the threshold 0.9990\. Safe mode will be turned off automatically. 
org.apache.hadoop.hdfs.server.namenode.SafeModeException: Cannot delete /app/hadoop/tmp/mapred/system. Name node is in safe mode. The ratio of reported blocks 0.0000 has not reached the threshold 0.9990\. Safe mode will be turned off automatically. at 
org.apache.hadoop.hdfs.server.namenode.FSNamesystem.deleteInternal(FSNamesystem.java:1994) at 
org.apache.hadoop.hdfs.server.namenode.FSNamesystem.delete(FSNamesystem.java:1974) at 
org.apache.hadoop.hdfs.server.namenode.NameNode.delete(NameNode.java:792) at 
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:616) at 
org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563) at 
org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388) at 
org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384) at 
java.security.AccessController.doPrivileged(Native Method) at 
javax.security.auth.Subject.doAs(Subject.java:416) at 
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121) at 
org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382) 
2013-02-11 13:27:14,657 INFO org.apache.hadoop.hdfs.StateChange: BLOCK* NameSystem.registerDatanode: node registration from 127.0.0.1:50010 storage DS-747527201-127.0.1.1-50010-1360274163059 
2013-02-11 13:27:14,661 INFO org.apache.hadoop.net.NetworkTopology: Adding a new node: /default-rack/127.0.0.1:50010 
2013-02-11 13:27:14,687 INFO org.apache.hadoop.hdfs.StateChange: STATE* Safe mode extension entered. The ratio of reported blocks 1.0000 has reached the threshold 0.9990\. Safe mode will be turned off automatically in 29 seconds. 
2013-02-11 13:27:14,687 INFO org.apache.hadoop.hdfs.StateChange: *BLOCK* NameSystem.processReport: from 127.0.0.1:50010, blocks: 1, processing time: 3 msecs 
2013-02-11 13:27:15,988 WARN org.apache.hadoop.security.ShellBasedUnixGroupsMapping: got exception trying to get groups for user webuser org.apache.hadoop.util.Shell$ExitCodeException: id: webuser: No such user at org.apache.hadoop.util.Shell.runCommand(Shell.java:255) at 
org.apache.hadoop.util.Shell.run(Shell.java:182) at    
org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:375) at 
org.apache.hadoop.util.Shell.execCommand(Shell.java:461) at 
org.apache.hadoop.util.Shell.execCommand(Shell.java:444) at 
org.apache.hadoop.security.ShellBasedUnixGroupsMapping.getUnixGroups(ShellBasedUnixGroupsMapping.java:68) at 
org.apache.hadoop.security.ShellBasedUnixGroupsMapping.getGroups(ShellBasedUnixGroupsMapping.java:45) at 
org.apache.hadoop.security.Groups.getGroups(Groups.java:79) at 
org.apache.hadoop.security.UserGroupInformation.getGroupNames(UserGroupInformation.java:1026) at 
org.apache.hadoop.hdfs.server.namenode.FSPermissionChecker.(FSPermissionChecker.java:50) at 
org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkPermission(FSNamesystem.java:5210) at 
org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkTraverse(FSNamesystem.java:5193) at 
org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getFileInfo(FSNamesystem.java:2019) at 
org.apache.hadoop.hdfs.server.namenode.NameNode.getFileInfo(NameNode.java:848) at 
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at 

sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at 
java.lang.reflect.Method.invoke(Method.java:616) at 
org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563) at 
org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388) at 
org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384) at 
java.security.AccessController.doPrivileged(Native Method) at 
javax.security.auth.Subject.doAs(Subject.java:416) at 
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121) at 
org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382) 
2013-02-11 13:27:15,988 WARN org.apache.hadoop.security.UserGroupInformation: No groups available for user webuser 
2013-02-11 13:27:16,007 WARN org.apache.hadoop.security.ShellBasedUnixGroupsMapping: got exception trying to get groups for user webuser org.apache.hadoop.util.Shell$ExitCodeException: id: webuser: No such user at org.apache.hadoop.util.Shell.runCommand(Shell.java:255) at org.apache.hadoop.util.Shell.run(Shell.java:182) at 
org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:375) at 
org.apache.hadoop.util.Shell.execCommand(Shell.java:461) at 
org.apache.hadoop.util.Shell.execCommand(Shell.java:444) at 
org.apache.hadoop.security.ShellBasedUnixGroupsMapping.getUnixGroups(ShellBasedUnixGroupsMapping.java:68) at 
org.apache.hadoop.security.ShellBasedUnixGroupsMapping.getGroups(ShellBasedUnixGroupsMapping.java:45) at 
org.apache.hadoop.security.Groups.getGroups(Groups.java:79) at 
org.apache.hadoop.security.UserGroupInformation.getGroupNames(UserGroupInformation.java:1026) at 
org.apache.hadoop.hdfs.server.namenode.FSPermissionChecker.(FSPermissionChecker.java:50) at 
org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkPermission(FSNamesystem.java:5210) at 
org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkTraverse(FSNamesystem.java:5193) at 
org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getFileInfo(FSNamesystem.java:2019) at 
org.apache.hadoop.hdfs.server.namenode.NameNode.getFileInfo(NameNode.java:848) at 
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at 

sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at 
java.lang.reflect.Method.invoke(Method.java:616) at 
org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563) at 
org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388) at 
org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384) at 
java.security.AccessController.doPrivileged(Native Method) at 
javax.security.auth.Subject.doAs(Subject.java:416) at 
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121) at 
org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382) 
2013-02-11 13:27:16,008 WARN org.apache.hadoop.security.UserGroupInformation: No groups available for user webuser 
2013-02-11 13:27:16,023 WARN org.apache.hadoop.security.ShellBasedUnixGroupsMapping: got exception trying to get groups for user webuser org.apache.hadoop.util.Shell$ExitCodeException: id: webuser: No such user at 
org.apache.hadoop.util.Shell.runCommand(Shell.java:255) at 
org.apache.hadoop.util.Shell.run(Shell.java:182) at 
org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:375) at 
org.apache.hadoop.util.Shell.execCommand(Shell.java:461) at 
org.apache.hadoop.util.Shell.execCommand(Shell.java:444) at 
org.apache.hadoop.security.ShellBasedUnixGroupsMapping.getUnixGroups(ShellBasedUnixGroupsMapping.java:68) at 
org.apache.hadoop.security.ShellBasedUnixGroupsMapping.getGroups(ShellBasedUnixGroupsMapping.java:45) at 
org.apache.hadoop.security.Groups.getGroups(Groups.java:79) at 
org.apache.hadoop.security.UserGroupInformation.getGroupNames(UserGroupInformation.java:1026) at 
org.apache.hadoop.hdfs.server.namenode.FSPermissionChecker.(FSPermissionChecker.java:50) at 
org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkPermission(FSNamesystem.java:5210) at 
org.apache.hadoop.hdfs.server.namenode.FSNamesystem.checkPathAccess(FSNamesystem.java:5178) at 
org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getListing(FSNamesystem.java:2338) at 
org.apache.hadoop.hdfs.server.namenode.NameNode.getListing(NameNode.java:831) at 
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at 

sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at 
java.lang.reflect.Method.invoke(Method.java:616) at 
org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563) at 
org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388) at 
org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384) at 
java.security.AccessController.doPrivileged(Native Method) at 
javax.security.auth.Subject.doAs(Subject.java:416) at 
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121) at 
org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382) 
2013-02-11 13:27:16,024 WARN org.apache.hadoop.security.UserGroupInformation: No groups available for user webuser 
2013-02-11 13:27:17,327 ERROR org.apache.hadoop.security.UserGroupInformation: PriviledgedActionException as:hduser cause:org.apache.hadoop.hdfs.server.namenode.SafeModeException: Cannot delete /app/hadoop/tmp/mapred/system. Name node is in safe mode. The ratio of reported blocks 1.0000 has reached the threshold 0.9990\. Safe mode will be turned off automatically in 27 seconds. 
2013-02-11 13:27:17,327 INFO org.apache.hadoop.ipc.Server: IPC Server handler 7 on 54310, call delete(/app/hadoop/tmp/mapred/system, true) from 127.0.0.1:51335: error: 
org.apache.hadoop.hdfs.server.namenode.SafeModeException: Cannot delete /app/hadoop/tmp/mapred/system. Name node is in safe mode. The ratio of reported blocks 1.0000 has reached the threshold 0.9990\. Safe mode will be turned off automatically in 27 seconds. 
org.apache.hadoop.hdfs.server.namenode.SafeModeException: Cannot delete /app/hadoop/tmp/mapred/system. Name node is in safe mode. The ratio of reported blocks 1.0000 has reached the threshold 0.9990\. Safe mode will be turned off automatically in 27 seconds. at 
org.apache.hadoop.hdfs.server.namenode.FSNamesystem.deleteInternal(FSNamesystem.java:1994) at 
org.apache.hadoop.hdfs.server.namenode.FSNamesystem.delete(FSNamesystem.java:1974) at 
org.apache.hadoop.hdfs.server.namenode.NameNode.delete(NameNode.java:792) at 
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at 
java.lang.reflect.Method.invoke(Method.java:616) at 
org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563) at 
org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388) at 
org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384) at 
java.security.AccessController.doPrivileged(Native Method) at 
javax.security.auth.Subject.doAs(Subject.java:416) at 
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121) at 
org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382) 
2013-02-11 13:27:27,339 ERROR org.apache.hadoop.security.UserGroupInformation: PriviledgedActionException as:hduser cause:org.apache.hadoop.hdfs.server.namenode.SafeModeException: Cannot delete /app/hadoop/tmp/mapred/system. Name node is in safe mode. The ratio of reported blocks 1.0000 has reached the threshold 0.9990\. Safe mode will be turned off automatically in 17 seconds. 
2013-02-11 13:27:27,339 INFO org.apache.hadoop.ipc.Server: IPC Server handler 4 on 54310, call delete(/app/hadoop/tmp/mapred/system, true) from 127.0.0.1:51336: error: 
org.apache.hadoop.hdfs.server.namenode.SafeModeException: Cannot delete /app/hadoop/tmp/mapred/system. Name node is in safe mode. The ratio of reported blocks 1.0000 has reached the threshold 0.9990\. Safe mode will be turned off automatically in 17 seconds. 
org.apache.hadoop.hdfs.server.namenode.SafeModeException: Cannot delete /app/hadoop/tmp/mapred/system. Name node is in safe mode. The ratio of reported blocks 1.0000 has reached the threshold 0.9990\. Safe mode will be turned off automatically in 17 seconds. at 
org.apache.hadoop.hdfs.server.namenode.FSNamesystem.deleteInternal(FSNamesystem.java:1994) at 
org.apache.hadoop.hdfs.server.namenode.FSNamesystem.delete(FSNamesystem.java:1974) at 
org.apache.hadoop.hdfs.server.namenode.NameNode.delete(NameNode.java:792) at 
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at 
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) at 
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at 
java.lang.reflect.Method.invoke(Method.java:616) at 
org.apache.hadoop.ipc.RPC$Server.call(RPC.java:563) at 
org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1388) at 
org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1384) at 
java.security.AccessController.doPrivileged(Native Method) at 
javax.security.auth.Subject.doAs(Subject.java:416) at 
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121) at 
org.apache.hadoop.ipc.Server$Handler.run(Server.java:1382) 
```

任何快速帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T16:13:05.137

我有同样的问题，我解决了

*   通过`.jar`Eclipse 实现。
*   在 Hadoop 中运行`hadoop jar <jar_name> main_class_name`。

# sas - SAS：保留具有指定日期间隔的观察结果

> ID：14818339
> 
> 赞同：2
> 
> 时间：2013-02-11T18:19:33.823
> 
> 标签：sas, sas-macro

我有一个看起来像这样的数据集：

```
 Unique_ID Date    
    1         03/23/1995
    1         03/27/1995
    1         04/14/1995
    1         08/29/1995
    1         02/14/1996
    .         .
    .         .
    .         .
    1         03/19/1997
    2         10/20/1993
    .         .
    .         .
    .         .
    2         04/20/2000 
```

在每个 Unique_ID 中，我只需要保留从第一次观察开始的日期至少相隔 3 个月的观察（我的数据集按 Unique_ID 和日期排序）。例如，在 Unique_ID 1 内，我需要保留距 1995 年 3 月 23 日至少 90 天的下一个观测值，然后是距那一天 90 天的下一个观测值，依此类推。有人可以用宏或某种循环为我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:39:32.557

你可以尝试这样的事情：

```
data want;
   set have;
      by ID;
   retain date2find;
   if first.ID then do;
      output;   /* This statement will include the first obs from each    */
                /* set of IDs if desired.  If not, delete this statement. */
      date2find = DATE + 90;
      end;

   if DATE >= date2find then do;
      output;                /* Output the found record    */
      date2find = DATE + 90; /* Re-set to date to be found */
      end;
   drop date2find;
run; 
```

这取决于您的数据集按描述排序（按 ID 和日期）

# vb.net - Vb.Net 从 Windows 形式的 json 文件中获取收音机 1s

> ID：14818345
> 
> 赞同：0
> 
> 时间：2013-02-11T18:20:00.040
> 
> 标签：vb.net, json, winforms, radio

现在我正在制作一个广播节目，我遇到了这个[http://www.bbc.co.uk/radio1/developers/api/](http://www.bbc.co.uk/radio1/developers/api/)但我现在知道如何在我的节目中实现它。它使用 .json 文件。我知道如何使用 php 来做到这一点，但我展示了一些我不需要也不知道如何使用的东西。而且我不想托管一个 php 页面，因为我的托管有时很慢，并且不断的 ping 会使它变慢。那么有什么办法可以在程序中做到这一点。我将从 bbc 页面获取 .json。而json的东西是“艺术家”：，“图像”：和“标题”：提前谢谢你。哦，我还在上中学，所以我不是 vb.net 的专业人士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:58:40.723

尝试使用 json.net ( [http://james.newtonking.com/projects/json-net.aspx](http://james.newtonking.com/projects/json-net.aspx) ) 将数据解析为 .Net 类，然后在 VB 应用程序中使用生成的对象。

# java - android java 会在 java 8 中支持 lambda 表达式吗？

> ID：14818348
> 
> 赞同：57
> 
> 时间：2013-02-11T18:20:10.563
> 
> 标签：java, android, dalvik, java-8

我知道 dalvik vm 中的“java”在 API 和体系结构等方面与 Java se 不同。但语法一直是相同的。（如果我错了请纠正我）

现在[java 8中对lambda表达式](http://openjdk.java.net/projects/lambda/)的支持即将发布，android java会跟进吗？google 或 aosp 是否承诺让 dalvik 与 java se 保持一致？

更新：现在与 Android 4.4 Kit Kat (API 19) 一样，Java 7 语法已得到正式支持。[来源 android.com](http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Using-sourceCompatibility-1.7)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-11T19:45:15.627

Android 不使用 Oracle 的 Java SE 版本，[它基于 Apache Harmony 项目的一部分](https://stackoverflow.com/questions/7535385/how-does-androids-java-version-relate-to-a-java-se-version)，因此它甚至不支持 Java 7。Harmony 不再积极开发，也不支持 1.7。

除非 Google 决定将 Harmony 和 Android SDK 升级到更新的 Java 版本，否则 Android 中不会有任何 Java 7 或 Java 8 功能——即使新功能只是语法上的。*他们可以使用像OpenJDK*这样的替代实现，尽管我不知道这方面的任何计划。由于谷歌和甲骨文之间的诉讼，一些人认为使用 OpenJDK 的可能性不大。

* * *

[*Java 7 的*一些**](https://stackoverflow.com/a/13550632/897024)*特性，最值得注意的是：菱形运算符、多捕获、字符串切换以及 Android N 中的[一些 Java 8 特性](https://developer.android.com/preview/j8-jack.htm)，如 lambda 表达式，自编写此答案以来已在 Android 中实现。（感谢[罗斯](https://stackoverflow.com/users/150474/)和[斯特凡](https://stackoverflow.com/users/1439733/)在评论中提到它）。*

 *谷歌必须通过自己的努力来实现这些功能，而且似乎选择这样做主要是为了更受欢迎的功能。*

# asp.net-mvc - SignalR：Microsoft JScript 运行时错误

> ID：14818355
> 
> 赞同：0
> 
> 时间：2013-02-11T18:20:48.060
> 
> 标签：asp.net-mvc, signalr

我刚刚使用 ASP.NET MVC 4 和 SignalR 制作了一个新的 Web 应用程序，然后我在 4 台不同的机器上测试了我的应用程序，这些机器都在 Windows7 x64 和 Windows 8 以及 IE 9 和 10 中运行 VS2012。在两台机器上工作正常，但在另一台机器上2 一段时间后我收到以下错误：

```
Unhandled exception at line 1, column 9 in __http://localhost:4004/signalr?transport=foreverFrame&connectionId=739e3932-48f1-4e1d-8ef2-ea32e15d2929&connectionData=[{"name":"notificationhub"}]&messageId=B,77|C,0|D,0|E,0&tid=9&frameId=1

0x800a1391 - Microsoft JScript runtime error: 'r' is undefined 
```

出于好奇，这两台机器也安装了 VS2010，最初他们没有安装 VS2012 的更新 1，现在我在两台机器上都安装了更新 1，但仍然有错误。

有任何想法吗？

两台失败的机器都有 w7 x64，两台工作的机器有 w7 x64 合二为一，另一台有 w8 x64

**编辑：** 我在失败的计算机上安装了 IE9，在正常的计算机上安装了 IE10 和 9，还在其中一台失败的机器上测试了 Google Chrome 20，问题消失了，所以，它似乎与浏览器有关。所以，问题是：为什么我有一个 ie9 可以正常工作而另一个不能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:58:09.063

您使用的是 SignalR 1.0.0-rc2 吗？

看起来永远的帧前导码没有被发送：

```
<!DOCTYPE html><html><head><title>SignalR Forever Frame Transport Stream</title>
<script>
    var $ = window.parent.jQuery,
        ff = $ ? $.signalR.transports.foreverFrame : null,
        c =  ff ? ff.getConnection('1') : null,
        r = ff ? ff.receive : function() {};
        ff ? ff.started(c) : '';</script></head><body> 
```

如果没有此序言，当通过永久帧发送消息时，您将收到`'r' is undefined`错误消息：

```
<script>r(c, {"json": "message"});</script> 
```

在没有收到前导码的情况下，不可能通过永久帧接收消息，这就是为什么我问您使用的是哪个版本的 SignalR。

IE10 可能使用 WebSockets 传输，而非 IE 浏览器可能使用[服务器发送事件](http://en.wikipedia.org/wiki/Server-sent_events)，这可以解释为什么这些浏览器可以正常工作。

**编辑：**正如下面的 jcgalveza 评论，由于错误似乎特定于`foreverFrame`传输，因此可以在启动连接时有选择地禁用它，如下所示：

```
$.connection.hub.start({ transport: ['webSockets', 'serverSentEvents', 'longPolling'] }) //... 
```

这是安全的，因为 SignalR 支持的所有浏览器都支持长轮询。上面列出的三种传输是 SignalR 当前支持的所有传输，当然，`foreverFrame`.

# java - 使用大小或长度是否有经验法则？

> ID：14818356
> 
> 赞同：2
> 
> 时间：2013-02-11T18:20:50.977
> 
> 标签：java

当您在 Java 中编码时，是否有一个经验法则可以让您轻松知道使用哪一个（大小或长度）？

可以记住哪个数据结构有什么方法，但是有没有更简单的方法呢？

例如，如果您定义 Array of int 但您需要使用 ArrayList 的长度。

（我的经验法则是对数组使用长度，对集合和数组列表等数据结构使用大小）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T18:21:50.240

经验法则是使用 API 提供给您的字段或方法。就是这样。

如果您有一个像 Eclipse 这样的 IDE，您可以输入您的列表的名称，按一下`.`键，然后等待公共字段或访问器的列表出现，这样您就可以滚动浏览并找到正确的。这比记忆更容易（尽管从长远来看，记忆可能会更好地为您服务）。

*   原始数组使用`length`
*   `Strings`（存在[`CharSequence`）](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/CharSequence.html)使用`length()`
*   几乎所有其他东西都使用`size()`

（小附录：[s](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html)`size()`的函数只为您提供填充字段的数量，而不是分配给 的实际字段数量，每次超过其当前分配时，它都会加倍。）[`Collection`](http://docs.oracle.com/javase/6/docs/api/java/util/Collection.html)`Collection`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:26:56.090

我会向您推荐这个相关的 SO 帖子：

[集合中的计数 vs 长度 vs 大小](https://stackoverflow.com/questions/300522/count-vs-length-vs-size-in-a-collection)

它表明该约定基于语言的习语和细微差别以及直觉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:28:28.020

`Length`对于连续的事情很有用。比如列表和数组。

`Size`：它给出的大小可能等于也可能不等于长度。

更多在这里：[术语“长度”和“大小”之间是否存在技术差异（当然是在编程中）？](https://stackoverflow.com/questions/2203425/is-there-a-technical-difference-between-the-terms-length-and-size-in-progra)

# android - 使用按钮在 Android 中打开另一个活动

> ID：14818361
> 
> 赞同：3
> 
> 时间：2013-02-11T18:21:23.357
> 
> 标签：android, android-intent, android-activity

我一定做错了什么。我在第一个活动中有这个代码：

```
package com.Trenton.waziapp;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class WaziLoginScreen extends Activity implements OnClickListener{

EditText etUsername, etPassword;
Button bLogin;
Class ourClass;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.wazi_login_screen);

    etUsername = (EditText) findViewById(R.id.etUsername);
    etPassword = (EditText) findViewById(R.id.etPassword);
    bLogin = (Button) findViewById(R.id.bLogin);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.wazi_login_screen, menu);
    return true;
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId()){
    case R.id.bLogin:

        Intent a = new Intent(WaziLoginScreen.this, ProfileScreen.class);
        startActivity(a);
        break;

    }
} 
```

我在上面做错了什么来打开另一个 Activity，ProfileScreen？

我的清单文件包含这样的活动条目-

```
 <activity
        android:name=".ProfileScreen"
        android:label="@string/title_activity_profile_screen">
    </activity> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T18:34:49.543

你忘了设置 onclickListener ...试试这个

```
yourButtonObject.setOnClickListener(this); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T18:30:59.543

在 WaziLoginScreen 类中的 OnCreate 方法中编写以下代码-

```
yourButtonObject.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        Intent a = new Intent(WaziLoginScreen.this, ProfileScreen.class);
        startActivity(a);
    }
}); 
```

而已。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T18:33:52.347

**使用以下代码。**

```
package com.Trenton.waziapp;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class WaziLoginScreen extends Activity {

EditText etUsername, etPassword;
Button bLogin;
Class ourClass;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.wazi_login_screen);

    etUsername = (EditText) findViewById(R.id.etUsername);
    etPassword = (EditText) findViewById(R.id.etPassword);
    bLogin = (Button) findViewById(R.id.bLogin);

    bLogin.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        Intent a = new Intent(WaziLoginScreen.this, ProfileScreen.class);
        startActivity(a);
    }
 }); 
 }

          @Override
           public boolean onCreateOptionsMenu(Menu menu) {
                  // Inflate the menu; this adds items to the action bar if it is present.
                  getMenuInflater().inflate(R.menu.wazi_login_screen, menu);
                 return true;
          }

} 
```

**就是这样..享受朋友。**

# c++ - operator= 与转换运算符结合的歧义

> ID：14818362
> 
> 赞同：0
> 
> 时间：2013-02-11T18:21:26.167
> 
> 标签：c++, visual-c++, operator-overloading, ambiguity

我有以下情况：

```
 class B;

    class A {
    private:
        int n;
    public:
        A& operator=(const A& a) {
        }

        A& operator=(const int n) {
            this->n = n;
        }

        friend class B;
    };

    class B {
    private:
        A a;
    public:
        operator A&() {
            return a;
        }

        operator int&() {
            return a.n;
        }
    }; 
```

当我执行此代码时：

```
 A a;
    B b;
    int i = b;
    a = b;
    a = i; 
```

我有以下错误：

```
 error C2593: 'operator =' is ambiguous
    ..\CrossPPTest\TestProxy.cpp(40): could be 'A &A::operator =(const int)'
    ..\CrossPPTest\TestProxy.cpp(37): or       'A &A::operator =(const A &)'
    while trying to match the argument list '(A, B)' 
```

假设我无法添加，如何解决这种歧义

```
`A& operator =(const B&)`
```

到 A 类。

我必须完全这样做的原因很复杂，但如果这样的事情能奏效，那就太好了。

可能有一些优先级或类似操作员的显式关键字......任何建议都非常感谢。

更新：代码的第二部分不能使用任何类型的强制转换。问题是找到仅修改第一个代码部分的解决方案。

另一个更新：代码部分 #2 必须按原样编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:26:28.217

这看起来像是多态性的工作：

```
class B;

class A {
   int n;
   public:
      A& operator=(const A& a) {...}

    A& operator=(const int n) {
      this->n = n;
      return *this;
    }

    friend class B;
};

class B : public A {
   A a;
   public:
     operator int&() {
         return a.n;
     }
};

int main() {
    A a;
    B b;
    int i = b; // works
    a = b; // works
    a = i;
} 
```

***[演示](http://liveworkspace.org/code/zlu41%248)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:55:21.903

您提出的方式使问题基本上无法解决。

显然有两种方法可以将 a 分配给`A`a `B`，但没有一种是可取的。

唯一的解决方案（不涉及类）是显式转换，以便您强制必须进行哪种转换。

一般来说，赋值和转换是多余的：如果你承认隐式转换（to - with `U::operator T() const`- 或 from - with `T::T(const U&)`）你不必提供除默认值之外的赋值，如果你想要隐式异构赋值，你不能提供转换，或最多使它们`explicit`.

# asp.net-mvc-3 - MVC3 不显眼的验证在 IE 中不起作用

> ID：14818363
> 
> 赞同：8
> 
> 时间：2013-02-11T18:21:26.160
> 
> 标签：asp.net-mvc-3, unobtrusive-validation

我有 MVC3 应用程序，不显眼的验证在 FireFox 中运行良好，但在 IE 中无法运行。

任何想法为什么？

**更新**

似乎 MVC3 附带的 jQuery 不显眼的验证库与我正在使用的 jQuery 1.7.1 不完全兼容（引导模板附带）。适用于 Firefox，不适用于 IE 8（我拥有的那个）。

我开始将 jQuery 升级到它开始工作的版本（不确定其他东西是否不会破坏！）。

当我到达 1.8.1 时，它终于奏效了。

当我升级到 1.9.1 时，我继续升级 jQuery - 该死的东西再次停止工作:)

使用 MVC3 jQuery 不显眼验证对我有用的最新 jQuery 版本是 1.8.3。

看起来这也是与 MVC3 jQuery unobtrusive ajax 库一起使用的最新 jQuery 版本。

PS 使用 MVC3 不显眼的验证或 ajax 的人，不要使用高于 v 1.8.3 的 jQuery。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-14T19:14:38.400

我最近遇到了类似的问题，仅使用 IE7 和 IE8（使用 MVC4）。

为了让验证再次工作，我安装了以下版本：

jQuery：**1.8.3**

jQuery 验证：**1.9.0.1**

Microsoft Unobtrusive Validation：**2.0.30116.0**（最新于 2013 年 5 月 14 日）

我注意到迁移到*jQuery Validation* v1.10 是问题开始的地方。在撰写本文时，*JQuery Validation*是 v1.11.1，在 IE7/8 中不起作用。这也在*jQuery* 1.8.3 和 1.9.1 上进行了尝试，但都不适用于最新版本的*jQuery Validation*。

注意：对我来说，特别的问题是验证是触发和标记所有输入和复选框的错误，即使它们不是“需要数据”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-24T16:38:39.030

在撰写本文时（**2014 年 9 月**），我测试了以下组合，并且对我来说（使用**IE8**和惊喜，即使使用**IE7**！）这是有效的：

*   **jQuery 1.11.1**（最新的 1.x 版本）
*   **jQuery.Validation 1.10.0**
*   Microsoft.jQuery.Unobtrusive.Ajax **3.2.2**（最后一个可用版本）
*   Microsoft.jQuery.Unobtrusive.Validation **3.2.2**（最后一个可用版本）

请注意，**使用 IE 11**（边缘）有时我会得到（如果我用 F12 打开调试器）以下**错误**：

> SCRIPT5007：无法获取未定义或空引用的属性“调用”文件：jquery.validate.js，行：1234，列：5

但是**，如果我关闭调试器**并以普通用户的身份使用表单，**如果工作正常**。

还使用**IE10**和**IE9**（IE11 模拟这些）进行了测试。**到目前为止没有发现任何问题**。

如果由于出现依赖错误（jquery 1.4 左右）而无法更新（降级）nuget 包，请记住使用 -IgnoreDependencies 标志，例如：

```
Update-Package jQuery.Validation -Version 1.10.0 -IgnoreDependencies 
```

享受（好吧，支持 IE8 并不是真正享受，但如果您在这里，则意味着您正在与无法摆脱这个糟糕浏览器的客户合作......）。干杯；）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T11:38:11.873

我遇到了与所描述的问题非常相似的问题。使用 IE9（文档模式：IE9 标准）我收到脚本错误，因为它在任何其他浏览器（以及较低的 IE 文档标准）中都可以正常工作。

我通过使用[jquery.validate.js (1.11.0)缓解了这个问题](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/jquery.validate.min.js)

有了这个我可以使用[jQuery-1.9.1.js](http://code.jquery.com/jquery-1.9.1.min.js)和[MVC3.0 jquery.validate.unobtrusive](http://ajax.aspnetcdn.com/ajax/mvc/3.0/jquery.validate.unobtrusive.min.js)

# class - 如何调用另一个类的变量。

> ID：14818365
> 
> 赞同：0
> 
> 时间：2013-02-11T18:21:32.593
> 
> 标签：class, variables, methods, call, invoke

我在调用另一个类的变量时遇到问题。假设我们有 class1 和 class2，而 class2 有一个类似的方法：

```
public Class2{

public void method2 (Element ele, Grammar utterance, String user) {

String speech =................ 

         }
   } 
```

我的目的是获取这个“语音”变量并将其传递给 class1。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:45:34.933

你只需要在你的另一个 Class1 中有一个 Class2 的实例，所以例子是：

```
Class1 mySpeech = new Class1(); 
```

现在有权访问的对象`mySpeech`可以访问作为语音包含的字符串变量是一个公共变量。

```
mySpeech.speech 
```

但最好为此创建 getter/setter 方法，可以使用 eclipse 快捷方式创建：

```
Sources->Generate Getters and Setters 
```

同样在命名一个类时，第一个字母使用大写并调用骆驼大小写约定。所以当你命名一个类时，调用它`Class1`或`ClassOne`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:45:58.553

您必须在提供字符串的对象中具有某种公共可见性。然后要么将字符串从第一个对象传递给第二个对象，要么通过引用将对象传递给第二个对象（不太推荐）。

```
public FirstClass {
    private String speech = "I am the first object!";

    public String getSpeech() {
        return speech;
    }
}

public SecondClass {
    private string speechCopy;

    public void takeSpeech(string speechCopy) {
        this.speechCopy = speechCopy + " (not really, I'm a copy!)";
    }
} 
```

从这里，您只需调用方法来调用您想要的行为。您可以保留代码原样，但将 get/set 方法添加到每个对象，以便它们可以传递变量和引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:42:57.103

您可以将 void method2(...) 更改为 public String method2(...) 并返回语音。然后在您的第一堂课中，您有一个 class2 的实例，调用 class2.method2(...) 将为类 1 提供语音变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T18:50:14.817

-在方法之前声明：公共静态字符串语音 -在方法或外部初始化：speech="hi" -从其他类调用（静态范围）：Class1.speech

# php - MVC - 根据用户加载不同的视图或加载相同的视图？

> ID：14818367
> 
> 赞同：0
> 
> 时间：2013-02-11T18:21:37.960
> 
> 标签：php, codeigniter, templates

我正在建立一个有 3 个用户组的网站，让**X、Y 和 Z**。

在我的控制器上，我目前正在执行以下操作：

```
if(user_group="X"){
//logic goes here
load_view("X");
}
elseif(user_group="Y"){
//logic goes here
load_view("Y");
}
elseif(user_group="Z"){
//logic goes here
load_view("Z");
} 
```

我这样做的原因是因为每个用户都应该加载一个完全不同的页面，用户基本上不会分享他们所看到的任何共同点，所以我认为加载不同的视图看起来会更干净，具体取决于用户组。

我可以为不同的用户加载相同的视图：

```
if($user="X"){
//view HTML
}
elseif($user="Y"){
//view HTML
}
elseif($user="Z"){
//view HTML
} 
```

在这种情况下你会怎么做？加载不同的视图？加载相同的视图？我“长大”听说将编程逻辑排除在视图之外，所以我只是想知道社区认为什么更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:25:01.413

我假设视图足够不同，不同类型的用户可以合法地为每个用户需要单独的视图/HTML。

如果是这种情况，我会发现在控制器中加载适当的视图更容易。这将导致需要维护 3 个较小的 HTML/视图文件，而不是一个大的。

这实际上只是一个偏好问题。

> 我“长大”听说将编程逻辑排除在视图之外

是的，我也是……但是我们可以把这个想法推得太远……有时它是必不可少的和必要的，有时它很有用。我宁愿务实而不是教条。

# asp.net - 错误列不属于表

> ID：14818380
> 
> 赞同：1
> 
> 时间：2013-02-11T18:22:05.277
> 
> 标签：asp.net, gridview

您好，我有一个带有几个文本框的表格，当用户单击按钮时，它会被添加到网格视图中。它与 Shared dtValues As New DataTable() 一起工作得很好，但我遇到了其他问题，所以我将其更改为 Public ...。在按钮按下时，我得到错误 Column 'Qty' does not belongs to the table。有什么建议么？

aspx

```
 <asp:Table ID="tblPrice" runat="server" GridLines ="Both">
                <asp:TableRow>
                    <asp:TableCell>QTY.</asp:TableCell>
                    <asp:TableCell>MATERIAL</asp:TableCell>
                    <asp:TableCell>COST</asp:TableCell>
                    <asp:TableCell>PRICE</asp:TableCell>
                    <asp:TableCell>TOTAL</asp:TableCell>
                </asp:TableRow>
                <asp:TableRow>
                    <asp:TableCell>
                         <asp:TextBox ID="txtQty" runat="server" Width="40" Text = "1"></asp:TextBox>
                    </asp:TableCell>
                    <asp:TableCell>
                        <asp:TextBox ID="txtMaterials" runat="server"></asp:TextBox>
                    </asp:TableCell>
                    <asp:TableCell>
                        <asp:TextBox ID="txtCost" runat="server" Width="125" Text = "0" ></asp:TextBox>
                        <asp:MaskedEditExtender ID="meeCost1" runat="server" Mask="99,999,999.99" DisplayMoney="Left" TargetControlID="txtCost" MaskType="Number">
                        </asp:MaskedEditExtender>
                    </asp:TableCell>
                    <asp:TableCell>
                        <asp:TextBox ID="txtPrice" AutoPostBack="true" runat="server" Width="125" Text = "0" OnTextChanged = "PriceChange"></asp:TextBox>
                        <asp:MaskedEditExtender ID="meePrice1" runat="server" Mask="99,999,999.99" DisplayMoney="Left" TargetControlID="txtPrice" MaskType="Number">
                        </asp:MaskedEditExtender>
                    </asp:TableCell>
                    <asp:TableCell>
                        <asp:Label ID="lblTotal" runat="server" Text="$0.00"></asp:Label>
                    </asp:TableCell>                
                </asp:TableRow>
                <asp:TableRow>
                    <asp:TableCell>
                        <asp:Button ID="btnAddPurchase" runat="server" Text="Add Purchase" OnClick="btnAddPurchase_Click"  />
                    </asp:TableCell>
                </asp:TableRow>
            </asp:Table>
            <br />
            <asp:GridView ID="gvPurchases" runat="server" AutoGenerateColumns="False" 
                AutoGenerateDeleteButton="True" AutoGenerateEditButton="True" 
                AutoGenerateSelectButton="True" >
            </asp:GridView> 
```

后面的代码

```
Public Class _Default
Inherits System.Web.UI.Page
Public dtValues As New DataTable()

Protected Sub Page_Load(sender As Object, e As EventArgs)
    If Not IsPostBack Then
        CreateDataTable()
    End If
End Sub
 Protected Sub CreateDataTable()
    dtValues.Columns.Add(New DataColumn("Qty"))
    dtValues.Columns.Add(New DataColumn("Materials"))
    dtValues.Columns.Add(New DataColumn("Cost"))
    dtValues.Columns.Add(New DataColumn("Price"))
    dtValues.Columns.Add(New DataColumn("Total"))
End Sub 
```

Protected Sub btnAddPurchase_Click(sender As Object, e As EventArgs)

```
 Dim drValues As DataRow = dtValues.NewRow()

    drValues("Qty") = txtQty.Text
    drValues("Materials") = txtMaterials.Text
    drValues("Cost") = txtCost.Text
    drValues("Price") = txtPrice.Text

    dtValues.Rows.Add(drValues)

    gvPurchases.DataSource = dtValues
    gvPurchases.DataBind()

    txtQty.Text = "1"
    txtMaterials.Text = ""
    txtCost.Text = "0"
    txtPrice.Text = "0"
    lblTotal.Text = "$0.00"
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:30:02.443

发生这种情况是因为该表仅在初始页面加载时创建，并且当通过按钮单击回发时，表再次初始化但没有列，因为 IsPostBack 在 Page_Load 事件中为真。因此，通过删除 IsPostBack 条件，表对象被实例化为每个页面请求的列。

```
Protected Sub Page_Load(sender As Object, e As EventArgs)                 
    CreateDataTable()
End Sub 
```

# algorithm - 使用样本计算运行时间

> ID：14818381
> 
> 赞同：3
> 
> 时间：2013-02-11T18:22:07.933
> 
> 标签：algorithm, big-o, complexity-theory

假设您将程序时间作为 N 的函数并生成下表：

```
 N   seconds
-------------------
     4096      0.00
    16384      0.01
    65536      0.06    
   262144      0.51   
  1048576      4.41   
  4194304     38.10  
 16777216    329.13  
 67108864   2842.87 
```

将运行时间的增长顺序估计为 N 的函数。假设运行时间服从幂律 T(N) ~ a N^b。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T05:36:33.803

你的 N 都是 4 的连续幂。以 4 为基础的对数的连续比率，你会看到它们收敛到某个常数，称为“b”。当您将表格最后一项中的 N、T(N) 和 b 替换为幂律 (T(N) = a * N ^ b) 时，您将得到“a”。在您的情况下，倍率的 log4 收敛到 1.555，所以这就是“b”。

我猜你正在学习 Coursera 的“算法，第一部分”课程（就像我一样）。然后，这个线程必须对你可用：

[https://class.coursera.org/algs4partI-002/forum/thread?thread_id=149](https://class.coursera.org/algs4partI-002/forum/thread?thread_id=149)

或者，您可以参考从第 16 页开始的“算法分析”幻灯片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T18:24:51.650

您需要使用对数图 (logN)，然后取线的斜率。这将指示指数 b。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:31:48.360

您可以计算整个样本集的每两个样本之间的斜率。然后您可以递归地执行此操作（斜坡的斜率）。那应该给你`b`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T19:09:13.410

使用最小二乘拟合幂律：

[http://mathworld.wolfram.com/LeastSquaresFittingPowerLaw.html](http://mathworld.wolfram.com/LeastSquaresFittingPowerLaw.html)

这将为您提供最接近 a 和 b 的拟合，然后您可以使用它来推断新点的运行时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-27T01:37:15.670

对我来说，这样更清楚：

```
N           seconds     log(N, 2)   log(seconds, 2)  Y(n)-Y(n+1)/
                            or X     or Y            X(n)-X(n+1)
----------------------------------------------------------------------------
4096              0         12      #NUM!
16384          0.01         14      -6.64385619         1.29248125
65536          0.06         16      -4.058893689        1.543731421
262144         0.51         18      -0.9714308478       1.556104752
1048576        4.41         20      2.140778656         1.555470218
4194304        38.1         22      5.251719093         1.555397315
16777216     329.13         24      8.362513723         1.555309345 
67108864    2842.87         26      11.47313241 
```

答案：b 大约是 1.55

[将运行时间的增长顺序估计为 N 的函数。](https://docs.google.com/spreadsheets/d/13iyFrRWNcDJmgJRzM0NB1jpEQja1q0ZXJYSB_2b-cqY/edit?usp=sharing) 这是 google drive 版本...

# sum - Matlab中系列的双和

> ID：14818387
> 
> 赞同：-1
> 
> 时间：2013-02-11T18:22:24.673
> 
> 标签：sum, double, matlab, series

我是 MATLAB 新手。我想解决以下表示为“A”的双重求和。

```
A= sigma(j=1..n)sigma(k=1..m)x1_ik((x2_ijk - x3_ij(k-1))^2) 
```

我不明白循环是解决解决方案或其他问题的好方法。似乎 Matlab 没有任何用于双重求和的内置函数。我用于双重求和的内容：

```
sum2=0;
  for i=1:10
      for j=1:10  
         sum2=sum2+(i*j);
       end
   end 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:52:15.183

矢量化代码在 Matlab 中通常更快。您的循环可以像这样矢量化：

```
vec1 = 1:10;
vec2 = 1:10;

mat1 = repmat(vec1',1,length(vec2));
mat2 = repmat(vec2,length(vec1),1);

sum(sum(mat1.*mat2)) 
```

# android - Eclipse 中断点处的错误消息（JDI 线程评估遇到问题。）

> ID：14818390
> 
> 赞同：1
> 
> 时间：2013-02-11T18:22:43.217
> 
> 标签：android, eclipse

一段时间以来，每个项目中都出现了附加的错误消息。调试时发生错误，在调试器停止时的断点处。*Step over* and *Step into*然后不工作（一直通过推动 step over 或 into 弹出错误消息）。我能做些什么？我在 Eclipse 没有改变任何东西。这里的版本：Android 开发者工具构建：v21.0.0-519525 ![错误信息](../Images/444e0de3cb2a024f785449c9908645d2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T18:47:51.860

有时调试窗口中的某些表达式会导致此错误。我已经阅读了可能导致它的不同原因（变量返回 null、后台任务中的变量、尝试访问 xml 视图）。我仍然没有找到确切的原因，但似乎许多不同类型的表达式都会导致此错误。只需删除可能的问题表达式并再次运行您的程序，您应该会很好。

如果有人对为什么会发生这种情况有更好的解释，请随时编辑。

# c++ - 链表头插入

> ID：14818391
> 
> 赞同：0
> 
> 时间：2013-02-11T18:22:48.583
> 
> 标签：c++

```
template <class T>
void List<T>::insertAtHead(T item)
{
     ListItem<T> *node=new ListItem<T>(item);
     ListItem<T> *temp=head;
     if (temp==NULL)
     {                
         head=node;
     }
     else if (temp!=NULL)
     {
         node->next=temp;     
         temp->prev=node;
         head=node;
     }                                
 } 
```

我正在使用类创建一个链表。ListItem 是一个包含下一个和前一个指针的结构，每当创建一个新节点时，它们在结构中被指向 NULL。ListItem 具有数据类型 T 的值，可以是从 int 到的任何值字符串。我想知道这段代码有没有漏洞。它基本上是数据结构的分配，并且已经给了我们一个测试文件来测试我们的代码。但是当我运行那个测试文件时，它失败了。代码。我只是想知道这段代码有什么问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:31:49.190

我假设你有一个`head`变量作为你`List`输入的成员变量

另外，根据您的`next`/`prev`参考资料，我假设您有一个双向链表：

```
ListItem<T> *temp = head;

if (temp != NULL) {
    temp->prev = node;
    head = node;
    node->prev = NULL;
    node->next = temp;
} else {
    head = node;
    node->prev = NULL;
    node->next = NULL;
} 
```

# php - Magento 更改数据库表前缀

> ID：14818395
> 
> 赞同：5
> 
> 时间：2013-02-11T18:22:56.463
> 
> 标签：php, mysql, magento

我不小心安装了一个没有下划线作为表前缀的 Magento。是否有自动更改此选项的选项？我不喜欢手动更改 337 个表格 :-)

我尝试[了这个](http://www.yireo.com/tutorials/magento/magento-administration/648-renaming-the-magento-database-table-prefix)解决方案，但这似乎不起作用。

迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:56:46.467

您可以使用此选择创建 sql 以重命名所有表：

```
SELECT 'rename table '||table_name||' to '||'newprefix'||table_name||';'
FROM information_schema.tables 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T07:28:29.970

```
<?php
$database_host="localhost";
$database_user="root";
$database_password="";
$magento_database="test1";
$table_prefix="magtest_"; 
?>
<?php
$db=mysql_connect($database_host,$database_user,$database_password);
mysql_select_db($magento_database);
$query="SHOW TABLES";
$result=mysql_query($query) or die('Err');
while($row=mysql_fetch_array($result)){$old_table=$row[0];
if(preg_match('/'.$table_prefix.'/',$old_table)){echo"Table $old_table already done<br/>\n";continue;} 
$new_table=$table_prefix.$old_table;echo"Renaming $old_table to $new_table<br/>\n";
$query="RENAME TABLE `$old_table`  TO `$new_table`";mysql_query($query);} 
?> 
```

脚步：

1.  进行数据库备份。
2.  创建一个名为“rename_table_prefix.php”的文件并放在根目录下。
3.  将上面的脚本粘贴到其中。
4.  运行文件 http:www.domain.com/magento/rename_table_prefix.php
5.  所有表都将被重命名。
6.  转到 app/etc/local.xml
7.  按原样修改以下行
8.  你完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-18T08:01:48.617

我运行这个 php 脚本来更改 Magento DB 表前缀

```
// mege_rename_table_prefix.php
//New Prefix Name
$table_prefix = "test_";
//Magento Database Backup php script
    error_reporting(E_ALL ^ E_NOTICE);
    ini_set('display_errors', 1);
    ini_set('memory_limit', '1512M');
    // Get Magento Application
    require_once 'app/Mage.php';
    Mage::app();
  // Mage::app('default');
   //Mage::app('main');
    // get Magento config
    $config  = Mage::getConfig()->getResourceConnectionConfig("default_setup");
    $dbinfo = array(
        "host" => $config->host,
        "user" => $config->username,
        "pass" => $config->password,
        "dbname" => $config->dbname
    );
    // Database Config
    $db_host = $dbinfo["host"];
    $db_user = $dbinfo["user"];
    $db_pass = $dbinfo["pass"];
    $db_name = $dbinfo["dbname"];
//conect db
$db = mysql_connect($db_host, $db_user, $db_pass);
mysql_select_db($db_name);
$query = "SHOW TABLES";
$result = mysql_query($query) or die('Err');
while($row = mysql_fetch_array($result)) {
    $old_table = $row[0];
    if(preg_match('/'.$table_prefix.'/', $old_table)) {
        echo "Table $old_table already done<br/>\n";
        continue;
    }
    $new_table = $table_prefix.$old_table;
    echo "Renaming $old_table to $new_table<br/>\n";
    $query = "RENAME TABLE `$old_table`  TO `$new_table`";
    mysql_query($query);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-07T07:56:20.903

**第 1 步 - 更改 env.php 文件中的 table_prefix，如下面的屏幕截图所示**

[![表前缀 Magento 2](../Images/8e3335e5b1723d2b8e2d9ce917b47ee9.png)](https://i.stack.imgur.com/UYaSt.png)

**第 2 步 - 运行以下查询以获取 ALTER 语句以将前缀添加到现有表 -：**

```
SELECT Concat('ALTER TABLE ', TABLE_NAME, ' RENAME TO qa_',
TABLE_NAME, ';') FROM information_schema.tables WHERE table_schema =
'DB_NAME' 
```

**第 3 步 - 通过在 Magento 根文件夹上运行以下命令来升级 Magento 2 DB**

```
php bin/magento setup:upgrade 
```

如果出现问题，您可以从**env.php中删除****table_prefix**并在您的数据库实例上运行以下查询以将表重命名为原始表

 **```
SELECT Concat('ALTER TABLE  ', TABLE_NAME ,  '  RENAME TO ',
replace(TABLE_NAME,'qa_',''), ';') FROM information_schema.tables
WHERE table_schema = 'magento_2' 
```

希望它可以帮助某人！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-15T11:50:38.037

您可以在 PHPMyAdmin 中简单地更改它。

```
Click/open the database.

Click Structure at the top bar.
This will display all your tables. Note the existing prefix.

Scroll to the bottom, to the last table.

Click "Check all".
This will check all tables.

Click the drop down menu just next to it - the one with the default value "with selected".

Select "Replace table prefix:"
This will bring you to a new page with two text inputs.

Fill in your existing prefix, e.g. "oldPrefi_". Don't forget the underscore.

Fill in your new prefix, e.g. "newPrefi_". Don't forget the underscore.

Finally, click submit. 
```

您将被重定向到具有新前缀的表列表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-30T13:53:13.403

解决该问题的步骤（100% 可行，我有同样的问题，我已解决）

上述解决方案大多行不通，因为您可以 UPDATE 表名，但 FORIEGN 键映射会导致问题。所以下面是解决这个问题的最好方法。

1.  导出整个数据库（备份）
2.  从整个文件中删除 PREFIX 词。
3.  删除现有数据库并导入更新的数据库。
4.  从 env.php 文件中删除 PREFIX**

# php - 将变量加载到数组中

> ID：14818396
> 
> 赞同：1
> 
> 时间：2013-02-11T18:23:01.080
> 
> 标签：php, arrays, variables, echo

我有一个PHP代码如下：

1 个文件包含以下内容：

```
 <?php
$max=count($_SESSION['cart']);
?>
<div class="cartSummary">
<?php echo $lang['CARTSTATUS']; ?>
</div> 
```

另一个文件包含以下内容：

```
$lang['CARTSTATUS'] = "Tiene <a href='../cart/shoppingCart.php'>".$max." productos </a>en su cesta de compra"; 
```

问题是结果只显示纯文本，`$max`没有打印变量。

您是否发现将 $max 加载到我正在使用的数组 $lang 中有任何问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:36:56.070

当您设置时，`$lang['CARTSTATUS']`您已经`$max`定义了。通过您提取的代码，看起来您首先设置`$lang['CARTSTATUS']`然后`$max`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:17:27.877

让你的其他文件有这样的分配：

```
$lang['CARTSTATUS'] = 'Tiene <a href=\'../cart/shoppingCart.php\'> $max productos </a>en su cesta de compra'; 
```

然后在file1中有这样的代码：

```
<?php
    $max=count($_SESSION['cart']);
    $tmp = $lang['CARTSTATUS'];
    eval("\$tmp = \"$tmp\";");
    $lang['CARTSTATUS'] = $tmp;
?>
<div class="cartSummary">
<?php echo $lang['CARTSTATUS']; ?>
</div> 
```

它将输出您预期的字符串。

我通常不会在其中提供任何带有 eval 的答案，但这似乎是对 PHP 备受批评的[eval 函数](http://php.net/manual/en/function.eval.php)的安全使用。

# logging - 不同应用程序的 apache 自定义日志

> ID：14818404
> 
> 赞同：0
> 
> 时间：2013-02-11T18:23:32.603
> 
> 标签：logging, apache

在同一虚拟主机内的 apache 中，我有 2 条路径

```
www.xxx.com
www.xxx.com/app2/

```

我希望 app2 下的所有内容都记录在与默认文件不同的文件中。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:01:51.310

您可以根据几个不同的标准在 Apache 中分离日志。看看这个页面。

[http://httpd.apache.org/docs/2.2/mod/mod_log_config.html#customlog](http://httpd.apache.org/docs/2.2/mod/mod_log_config.html#customlog)

将此添加到您的 httpd.conf （我尝试将其添加到虚拟主机 conf 但它不起作用）

```
SetEnvIf Request_URI app2/ app2-log
CustomLog "Logs/app2.log" common env=app2-log

CustomLog "Logs/access.log" common env=!app2-log 
```

您可以使用几种不同的方法来分离日志。我正在使用的一种方法是归档 GoogleBots 访问权限

```
SetEnvIf REMOTE_ADDR 66.249.78.242 googlebot-log
CustomLog "Logs/googlebot.log" common env=googlebot-log

CustomLog "Logs/access.log" common env=!googlebot-log 
```

问题是我现在只能过滤一个 IP 但可能有更好的方法......

您可以使用此处列出的这些环境变量来过滤日志 [http://www.zytrax.com/tech/web/env_var.htm](http://www.zytrax.com/tech/web/env_var.htm)

我想改用 DNS，这样我就可以捕获所有以 googlebot.com 结尾的 DNS 并将它们放入单独的文件中。但我现在还不知道该怎么做。

/菲利普

**编辑**

我太愚蠢了。当然，当我将虚拟主机条目放入错误的conf时，它“不起作用”。哦！

# php - 通过ajax提交表单；如果禁用javascript，后备方法？

> ID：14818408
> 
> 赞同：4
> 
> 时间：2013-02-11T18:23:45.223
> 
> 标签：php, javascript, ajax

我有一个注册表单，用户提供电子邮件、重新输入电子邮件、密码、重新输入密码、出生月份、日期、年份。

用户点击“注册”。

```
If (Javascript is Enabled) {

submit the form using ajax

} elseif (Javascript is Disabled) {

automatically fallback to traditional methods.

} 
```

注意：请记住，如果用户正确填写了表单，这两种方法都需要验证数据库中不存在电子邮件地址。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T18:28:33.773

您可以采用纯 HTML/JS 方法来实现这一点。在表单中使用`onsubmit`事件处理程序。如果它执行，则意味着 JS 已启用。只是`return false`从它防止正常提交。`action`如果 JS 被禁用，表单将通过该属性正常提交。

```
<form action="nonAjaxSubmit.php" onsubmit="return ajaxSubmit();">...</form>

<script>
    function ajaxSubmit() { 
        // Submitting through ajax
        return false;
    }
</script> 
```

如果您以编程方式从 javascript`onsubmit`调用，则不会调用。`form.submit()`

# php - 联系表格 HTML 邮件样式

> ID：14818413
> 
> 赞同：0
> 
> 时间：2013-02-11T18:24:11.843
> 
> 标签：php, html, email, html-email, styling

我目前正在尝试对通过我自制的 php 联系表发送的传入电子邮件进行样式设置。

只有一个小问题，当我在收件箱中收到电子邮件时，html 显示为静态文本而不是代码。

谁能帮帮我？

```
<?php
$name = $_POST['name'];
$email = $_POST['email'];
$message = $_POST['message'];
$from = 'From: info@epicconcepts.nl'; 
$to = 'info@epicconcepts.nl'; 
$subject = 'Contact formulier bericht';
$human = $_POST['human'];

$headers = "From: " . strip_tags($_POST['req-email']) . "\r\n";
$headers .= "Reply-To: ". strip_tags($_POST['req-email']) . "\r\n";
$headers .= "CC: quincynorbert@live.nl\r\n";
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

$message = '<!DOCTYPE html>
            <html>
            <head>
            <style type="text/css">
                body{background: #EDEBEA;}
                #naam{background:#222222;border:4px solid #DDD;width:650px;}
                #mail{background:#222222;border:4px solid #DDD;width:650px;}
                #message{background:#222222;border:4px solid #DDD;width:650px;}
            </style>
            </head>
            <body>
            <div id="naam">'.$name.'</div>
            <div id="mail">'.$email.'</div>
            <div id="message">'.$message.'</div>
            </body>
            </html>';

if ($_POST['submit']) {
    if ($name != '' && $email != '') {
        if ($human == '4') {                 
            if (mail ($to, $subject, $message, $from)) { 
            echo '<p class="correct-message">Your message has been sent!</p>';
        } else { 
            echo '<p class="correct-message">Something went wrong, go back and try again!</p>'; 
        } 
    } else if ($_POST['submit'] && $human != '4') {
        echo '<p class="correct-message">You answered the anti-spam question incorrectly!</p>';
    }
    } else {
        echo '<p class="correct-message">You need to fill in all required fields!</p>';
    }
}
?> 
```

感谢您提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:27:27.397

您的标头包含在字符串中，`$headers`但您没有将其传递给 mail 函数，您正在传递`$from`，因此 HTML 和 MIME 标头永远不会发送，这就是您收到纯文本电子邮件的原因：

```
if (mail ($to, $subject, $message, $from)) {
//                                 ^ should be $headers 
```

改成：

```
if (mail ($to, $subject, $message, $headers)) { 
```

此外，您的 MIME 标头会删除当前的标头列表，因为您没有包含连接`.`字符，请更改为：

```
$headers .= 'MIME-Version: 1.0' . "\r\n";
//       ^ don't forget this 
```

最后，您应该避免`<style>`在 HTML 电子邮件中使用 CSS 块，并非所有电子邮件客户端都会读取 CSS 块，有些客户端只会读取`style=""`直接在元素上使用属性内联定义的 CSS。

编辑：要硬编码您的 From 标头，只需使用：

```
$headers = "From: info@mycompany.com\r\n"; 
```

请务必修复我上面指出的连接错误，否则您的`From`标头将被覆盖而不会发送。

# c++ - libspatialindex 是否需要重新序列化以进行简单更新？

> ID：14818414
> 
> 赞同：1
> 
> 时间：2013-02-11T18:24:12.260
> 
> 标签：c++, sqlite, spatial-index, spatial-query, r-tree

我正在寻找具有以下功能的桌面应用程序（没有服务器客户端，只需要编辑存储在磁盘中的数据）的 ac 或 c++ 库

*   将空间数据存储在虚拟内存中，因此空间查询速度很快
*   可以选择以智能方式在磁盘中维护等效数据进行更新。更新不必是即时的，但它们可以被缓冲。

. libspatialindex 似乎满足要求。但是从网页上看不清楚的一件事是，假设我从磁盘加载了大量数据，只想更新一个很小的对象。libspatialindex 是否重新序列化整个数据并将其写入磁盘，或者只更新需要更改的部分是否明智？

带有 RTree 的 sqlite 似乎正在实现这一点。但是，我想要一个简单的 c++ 库而不是整个 sql 的东西。

有没有其他的选择。GEOS 是否有任何智能磁盘映像更新功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:43:40.357

libspatialindex 的[DiskStorageManager 文档](http://libspatialindex.github.com/overview.html#diskstoragemanager)说：

> 磁盘存储管理器使用两个随机访问文件来存储信息。[...] .idx 文件在初始化期间加载到主内存中，并且仅在刷新存储管理器或在对象销毁期间写入磁盘。如果发生意外失败，对存储管理器的更改将由于过时的 .idx 文件而丢失。避免此类灾难是未来的工作。

...这意味着只要索引条目更改，数据文件中的相应页面就会更新。

这本质上类似于 SQLite 数据库，只是 SQLite 文件在崩溃后不会损坏。（SQLite 存储管理器似乎是 libspatialindex 的一个明显扩展。）

* * *

我建议考虑 SQLite；如果您不喜欢它的 C API，请使用包装它的框架，例如 Qt。

# gruntjs - 使用 grunt.js 连接错误

> ID：14818415
> 
> 赞同：2
> 
> 时间：2013-02-11T18:24:15.760
> 
> 标签：gruntjs

我第一次尝试 grunt.js 并且遇到了一些初学者问题。

我想连接 /foundation/ 文件夹中的所有 js 文件

我收到此错误：

```
Running "concat:options" (concat) task

TypeError: Cannot read property 'linefeed' of undefined
at Object.module.exports (....file path here...../_compass/javascripts/node_modules/grunt-contrib-concat/tasks/concat.js:19:28)
at Object.task.registerMultiTask.thisTask (/usr/local/lib/node_modules/grunt/lib/grunt/task.js:109:15)
at Object.task.registerTask.thisTask.fn (/usr/local/lib/node_modules/grunt/lib/grunt/task.js:58:16)
at Task.<anonymous> (/usr/local/lib/node_modules/grunt/lib/util/task.js:343:36)
at Task.<anonymous> (/usr/local/lib/node_modules/grunt/lib/util/task.js:319:9)
at Task.<anonymous> (/usr/local/lib/node_modules/grunt/lib/util/task.js:346:11)
at Task.<anonymous> (/usr/local/lib/node_modules/grunt/lib/util/task.js:319:9)
at Task.<anonymous> (/usr/local/lib/node_modules/grunt/lib/util/task.js:346:11)
at Task.start (/usr/local/lib/node_modules/grunt/lib/util/task.js:359:5)
at Object.grunt.tasks (/usr/local/lib/node_modules/grunt/lib/grunt.js:143:8) 
```

我的 grunt 文件看起来像这样

```
module.exports = function(grunt) {

// Project configuration.
grunt.initConfig({

    // Read in the project settings from the package.json file
    pkg: grunt.file.readJSON('package.json'),

    concat: {
        options: {
            separator: ';'
        },
        dist: {
            src: ['foundation/*.js'],
            dest: 'dist/<%= pkg.name %>.js'
        }
    },

});

// Load the plugin that provides the "concat" task.
grunt.loadNpmTasks('grunt-contrib-concat');

// Default task(s).
grunt.registerTask('default', ['concat']); 
```

};

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:32:08.653

为了解决这个问题，我卸载了 grunt，安装了最新的候选版本，使用 npm cache clean 清除缓存并安装了 concat 模块的最新候选版本。它现在正在工作。

# php - Postgres全文搜索DQL用户定义函数问题

> ID：14818418
> 
> 赞同：0
> 
> 时间：2013-02-11T18:24:21.147
> 
> 标签：php, postgresql, symfony, doctrine-orm, full-text-search

```
/**
 * PGSearchFunction ::= "PG_SEARCH" "(" StateFieldPathExpression "," StringPrimary ")"
 */
class PGSearch extends FunctionNode
{
    public $searchColumn = null;
    public $search = null;

    public function parse(Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);
        $this->searchColumn = $parser->StateFieldPathExpression();
        $parser->match(Lexer::T_COMMA);
        $this->search = $parser->StringPrimary(); 
        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }

    public function getSql(SqlWalker $sqlWalker)
    {
        return sprintf("%s @@ to_tsquery('english', %s)", $this->searchColumn->dispatch($sqlWalker), $this->search->dispatch($sqlWalker));

    }

} 
```

[语法错误] 第 0 行，列 -1：错误：预期 =、<、<=、<>、>、>=、!=，得到字符串结尾。关于如何防止学说将其视为标准 SQL 表达式的任何建议？顺便说一句，使用学说 2.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T07:36:05.170

你应该能够做到`$em->createQuery("SELECT i FROM MyBundle:Invoice i WHERE PG_SEARCH(i.search, 'virus') = true");`

# java - 停止窃取 ListView 焦点的按钮

> ID：14818424
> 
> 赞同：1
> 
> 时间：2013-02-11T18:24:46.693
> 
> 标签：java, android, xml, listview

我有以下 XML 布局：

![在此处输入图像描述](../Images/453f9453f8c80be3afef31e2f7e74ef2.png)

目前我只能单击 EditText 下方的“添加”按钮，即使我已经实现并覆盖了扩展 ListActivity 超类中的“OnListViewClick”方法。

我相信这是使用带有 ListView 的按钮时的焦点问题。

希望有人能告诉我如何设置 XML 布局，以便我可以同时单击按钮和 ListView。

OnItemListClick 方法代码：

```
package com.example.flybase2;

import android.app.AlertDialog;
import android.app.Dialog;
import android.app.ListActivity;
import android.app.AlertDialog.Builder;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.widget.SimpleCursorAdapter;
import android.text.Editable;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TextView;

public class ShoppingList extends ListActivity implements OnClickListener {

Button AddItem;
ListView showItems;
SimpleCursorAdapter cursorAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.shoppinglistlayout);

    AddItem = (Button) findViewById(R.id.btnAddItem);

    showItems = (ListView)findViewById(android.R.id.list);

    AddItem.setOnClickListener(this);

    setList();

}

@Override
public void onClick(View clickedAdd) {

    AlertDialog.Builder builder = new AlertDialog.Builder(ShoppingList.this);

        builder.setTitle("Enter Item Details:");

                            LinearLayout layout = new LinearLayout(this);
                            layout.setOrientation(LinearLayout.VERTICAL);

                            final EditText titleBox = new EditText(this);

                            titleBox.setHint("Item Name:");
                            layout.addView(titleBox);

                            final EditText quantityBox = new EditText(this);

                            quantityBox.setHint("Item Quantity");
                            layout.addView(quantityBox);

                            final EditText priceBox = new EditText(this);

                            priceBox.setHint("Item Price.");
                            layout.addView(priceBox);

                            builder.setView(layout);

                            builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int whichButton) {
                            try
                            {

                                Editable valueItem = titleBox.getText();
                                Editable valueAmount = quantityBox.getText();
                            Editable valuePrice = priceBox.getText();

                                String itemDescription = valueItem.toString();
                                String s = valueAmount.toString();
                                int itemAmount = Integer.parseInt(s);
                                String a = valuePrice.toString();
                                int itemPrice = Integer.parseInt(a);

                            DBHandlerShop addItem = new DBHandlerShop(ShoppingList.this, null, null);
                            addItem.open();
                            addItem.insertItems(itemDescription, itemAmount, itemPrice);
                            addItem.close();

                            }
                            catch(Exception e)
                            {
                            Dialog e1 = new Dialog(ShoppingList.this);
                            e1.setTitle("Item unsuccesfully added");
                            TextView txt = new TextView(ShoppingList.this);
                            txt.setText("Success");
                            e1.setContentView(txt);
                            e1.show();

                            }
                            finally
                            {
                                Dialog e = new Dialog(ShoppingList.this);
                            e.setTitle("Item succesfully added.");
                            TextView txt = new TextView(ShoppingList.this);
                            txt.setText("Success");
                            e.setContentView(txt);
                            e.show();

                        setList();
                            }

                              }

                            });

                            builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                              public void onClick(DialogInterface dialog, int whichButton) {

                              }
                            });

                            builder.show();

}

@Override
protected void onListItemClick(ListView l, View v, int position, long idd) {
    super.onListItemClick(l, v, position, idd);

final CharSequence[] items = {"Edit Appointment Details", "Delete Appointment"};

    Builder alertDialogBuilder = new AlertDialog.Builder(ShoppingList.this);

    alertDialogBuilder.setTitle("Appointment Options:");

    alertDialogBuilder.setItems(items, new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int item) {

            if (items[item].equals("Edit Appointment Details")) {

            }

            else if (items[item].equals("Delete Appointment")) {

            }

            }  

        });

    alertDialogBuilder.show();

}

private void setList() {

    DBHandlerShop DBShop = new DBHandlerShop(this, null, null);

    DBHandlerShop searchItems = new DBHandlerShop(this, null, null);

    searchItems.open();

    Cursor cursor = searchItems.getItems();

    startManagingCursor(cursor);

    String [] from = new String [] {DBShop.KEY_ITEMSHOP, DBShop.KEY_ITEMNUM, DBShop.KEY_ITEMPRICE};
    int [] to = new int [] {R.id.txtSetItem, R.id.txtSetAmount, R.id.txtSetPrice};

    cursorAdapter = new SimpleCursorAdapter(this, R.layout.setshoppinglist, cursor, from, to);
    showItems.setAdapter(cursorAdapter);

} 
```

}

这是我的 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="84dp"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/imgLink"
            android:layout_width="78dp"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:src="@drawable/viewcon" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="75dp"
            android:gravity="center"
            android:text="Shopping List"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textSize="35sp" />
    </LinearLayout>

    <TextView
        android:id="@+id/txtItemDes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Item To Add To The List:"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/inputAppointName"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:hint="Enter A Name" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/btnAddItem"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Add" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:05:15.800

在聊天中，您为 ListView 中的行发布了 XML。行布局中的一个 LinearLayouts 是可点击的（`android:clickable="true"`），这将消耗阻止它到达的触摸事件`onListItemClick()`。只需删除此行。

* * *

**另外**
，我建议采用稍微不同的方法。很明显，您需要一个可检查的自定义行布局（通过单击行上的任意位置）。我发布了一个详细的答案：[ListView 行中的 CheckedTextView 复选标记未显示](https://stackoverflow.com/q/12125792/1267661)，不久前，这里有一个[模糊的教程](http://tokudu.com/2010/android-checkable-linear-layout/)（您需要单击“Begemot”库的链接。）

# r - ggplot2 stat_summary 错误信息

> ID：14818425
> 
> 赞同：1
> 
> 时间：2013-02-11T18:24:46.223
> 
> 标签：r, ggplot2

我有一个包含三列的数据框。Site 和 Provider 是字符串，LOS 是连续的。我的数据集有超过 1500 行，所以我用种子对数据集进行了采样，以便于分析。使用这个数据框：

HECCSV：

```
Site Provider  LOS
SFH    ASAND  259
SFH    ASAND  343
SJH    LEI,   203
SFH    HARME  182
SJH    KHAN,  303
EMH    DELUH  145
SJH    VISSA  317
EMH    SURIA  266
SJH    MAKOW  113
SJH    HERNA  263
FRK    SMUKO  262
EMH    BRUCE  309
SFH    CESAR  197
FRK    SMUKO  217
SFH    SHALL  200
SJH    NASH,  258
SJH    DOUGH  391
SJH    LACRO  368
FRK    RICHB  196
SJH    DONIE  208
SJH    MONAW  245
SJH    STULL  307
SJH    SCHIL  330
SFH    ABERN  340
SJH    DELUH  420
SJH    DELUH  160
SFH    KORTB  328
SJH    FRAZI  150
FRK    BLANK  281
SJH    KRAUS  109
SJH    ROSIE  279
SJH    MURPH  200
SFH    ENGLI  231
SFH    SMUKO  205
SJH    JOHNS  360
SJH    DONIE  346
EMH    MAURE  102
SJH    MANTH  205
SJH    FRAZI  289
SJOC   MORAN  172
SFH    CESAR  112
SJH    HERNA  111
SJH    LACRO  211
SJH    HARME  343
SJH    DIXON   89
SFH    CULLE  165
SJH    WILSO  239
SJH    CULLE  200
SFH    SMUKO  178
SFH    BINDA   98
SJH    ABERN  178 
EMH    MAURE  352
SFH    BERGS  201
SJH    ANDER  255
SJH    HUBBA  107
SFH    ASAND 1102
EMH    MANTH  143
SJH    DELUH  213
EMH    RUVAL  258
SJH    VISSA  350
SJH    FRAZI  364
FRK    PILLA  228
SFH    WENNI  335
SFH    WILSO  214
SJH    CULLE  248
SJH    LACRO  298
TWHH   PARRI  135
SJH    SURIA  234
SFH    ABERN  317
FRK    KRAUS  223
SJH    SURIA  310
EMH    GLINS  318
SJH    ADAR,  308
SJH    MAKOW  253
SJH    MURPH  257
SFH    ABERN  262
SJH    STULL  514
SJH    ANDER  324
SJH    KHAN,  117
SJH    LACRO  151
EMH    PILLA  150
SJH    MUELL  295
SFH    RICHB  149
SFH    MANTH  315
FRK    HERNA  218
FRK    ASAND  167
EMH    DONOF  161
EMH    SWART  243
SJH    FRAZI  392
FRK    DONIE  213
SFH    SMUKO  276
SJH    MAURE  531
FRK    MAURE  241
SJH    LACRO  127
EMH    RUVAL  349
EMH    DONOF  346
SJH    CULLE  399
EMH    ANDER  243
SJH    MAKOW  175
SFH    HONNO  285 
```

我有兴趣绘制每个站点中每个提供商的 LOS 中值。我也想标记异常值。我想使用带有抖动的geom_point。根据其他人的在线评论，我创建了第二个数据框，称为 datJit。对于新的数据框，LOS 现在是指按站点和提供商划分的中间 LOS 组。我为按站点分组的中值 LOS 添加了 SM，xj 是 ggplot 的 x 轴抖动，对于我想在 ggplot 上标记的行，out 是 TRUE。代码如下所示：

```
data <- ddply(HECCSV, .(Site,Provider), function(x) median(x$LOS))
data <- ddply(data, .(Site), function(g) {g$SM <- quantile(g$V1,0.96);g})
colnames(data) <- c ("Site","Provider","LOS","SM")
datJit <- data
datJit$xj <- jitter(as.numeric(factor(data$Site)))
datJit <- ddply(datJit,.(LOS),.fun=function(g){ g$out <- g$LOS >= g$SM; g } ) 
```

datJit 数据框现在看起来像这样：

```
Site Provider   LOS     SM        xj   out
EMH    MANTH  36.0 312.60 0.8989241 FALSE
EMH    ANDER  62.0 312.60 1.1421376 FALSE
SJH    MAKOW  92.0 402.00 4.1620511 FALSE
FRK    BANIU 101.0 296.08 1.8130307 FALSE
EMH    HARME 104.0 312.60 0.9778059 FALSE
SJH    SMUKO 110.0 402.00 4.0529616 FALSE
SFH    ARBIT 117.5 571.20 2.9281353 FALSE
SJH    DIXON 122.0 402.00 4.0077163 FALSE
SFH    SHALL 124.0 571.20 2.8466912 FALSE
SFH    FELIC 135.0 571.20 3.0444518 FALSE
EMH    DELUH 145.0 312.60 1.0192006 FALSE
EMH    PILLA 150.0 312.60 0.8234848 FALSE
SJOC   SCERP 151.0 206.68 5.0967039 FALSE
SFH    ADAR, 155.0 571.20 3.1976121 FALSE
SJH    STULL 159.5 402.00 3.8986343 FALSE
SJH    DONIE 165.0 402.00 4.1175304 FALSE
EMH    STULL 167.0 312.60 0.8981766 FALSE
FRK    SURIA 177.0 296.08 1.8701017 FALSE
EMH    ROSIE 181.0 312.60 0.8141137 FALSE
FRK    GEDAN 182.0 296.08 1.8771275 FALSE
FRK    HONNO 186.0 296.08 2.1625728 FALSE
SJH    HUBBA 191.5 402.00 3.9899187 FALSE
SJH    SURIA 199.5 402.00 3.9287032 FALSE
FRK    DIXON 207.0 296.08 1.8887039 FALSE
SFH    CHESK 209.0 571.20 2.9543299 FALSE
SJOC   DONIE 209.0 206.68 5.0137046  TRUE
SFH    HICKS 210.0 571.20 2.8389316 FALSE
FRK    DONIE 213.0 296.08 2.1347646 FALSE
FRK    HERNA 218.0 296.08 2.1701933 FALSE
SJH    WENNI 219.0 402.00 4.0968437 FALSE
SJH    HARME 220.0 402.00 4.1628144 FALSE
SFH    ABERN 221.0 571.20 2.9650992 FALSE
SJH    GLINS 222.5 402.00 4.1643052 FALSE
SJH    HERNA 228.0 402.00 4.1503148 FALSE
SJH    KORTB 231.0 402.00 3.8981447 FALSE
SJH    MURPH 237.0 402.00 4.0250026 FALSE
SJH    WILSO 239.0 402.00 3.9719906 FALSE
FRK    MAURE 241.0 296.08 1.8193441 FALSE
SJH    FELIC 243.0 402.00 3.8967263 FALSE
SJH    ANDER 247.0 402.00 3.8460451 FALSE
EMH    RUVAL 247.5 312.60 1.0059763 FALSE
SJH    MANTH 254.5 402.00 4.1880197 FALSE
SJH    CLINE 260.0 402.00 4.0725797 FALSE
SFH    MANTH 262.0 571.20 3.1527713 FALSE
SFH    ROSIE 270.0 571.20 3.1446932 FALSE
SJH    FULA, 271.5 402.00 4.0326154 FALSE
EMH    ABERN 273.0 312.60 1.1911376 FALSE
SJH    DELUH 273.0 402.00 4.1119299 FALSE
EMH    BRUCE 276.0 312.60 1.1240272 FALSE
SJH    WOLF, 280.0 402.00 4.1061772 FALSE
SJH    BERGS 296.0 402.00 3.8062060 FALSE
SFH    NASH, 302.0 571.20 2.8628445 FALSE
SFH    KHAN, 306.0 571.20 3.0914843 FALSE
FRK    SMUKO 322.0 296.08 1.9476877  TRUE
SFH    DELUH 333.0 571.20 3.0930637 FALSE
SJH    FRAZI 333.0 402.00 4.1636525 FALSE
EMH    DONOF 337.0 312.60 1.1003078  TRUE
SFH    FULA, 343.5 571.20 2.9226700 FALSE
SJH    PILLA 361.0 402.00 3.8357858 FALSE
SFH    CESAR 373.0 571.20 3.0936832 FALSE
TWHH   KUMPR 398.5 398.50 5.8299727  TRUE
SJH    CULLE 402.0 402.00 4.0666768  TRUE
SJH    LACRO 411.0 402.00 3.8389552  TRUE
SFH    DONIE 500.0 571.20 2.9377945 FALSE
SFH    BLUM, 678.0 571.20 2.8202060  TRUE 
```

当我在没有 stat_summary 的情况下绘图时，绘图看起来不错，但我不断收到带有 stat_summary 的错误消息：

```
p <- ggplot(HECCSV,aes(x=Site,y=LOS)) + 
geom_point(data = datJit, alpha=0.8, aes(x=xj,colour=Site), size=4)+
stat_summary(fun.y = mean, fun.ymin = min, fun.ymax = max,colour = "red") +
geom_text(data = subset(datJit,out), aes(x=xj, label = Provider) ,hjust=1.1, size=4) +
labs(title="LOS by Site for Provider", y = "Median LOS (mins)" ) +
ggtitle(expression(atop("LOS by Site for Provider", atop(italic("Decemeber 2012"), ""))))
print(p) 
```

错误信息：

**错误：提供给连续刻度的离散值**

我究竟做错了什么？

# ruby-on-rails - 路线不起作用 - 非常混乱

> ID：14818426
> 
> 赞同：0
> 
> 时间：2013-02-11T18:24:47.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller, controller, routes

我理解路线的概念，但有时它们不能正常工作。在这种特定情况下，我试图让编辑项目的路线工作，但我收到以下错误消息：

```
No route matches [POST] "/projects/8/edit" 
```

**路线.rb：**

```
Ampta::Application.routes.draw do
  get "home/index"

  resources :sessions, only: [:new, :create, :destroy]

  match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete

  resources :projects do
    collection do
      get "manage" 
    end 
  end

  resources :projects
  resources :tickets
  resources :projects_users
  resources :users

  root :to => 'home#index'

end 
```

**控制器：**

```
class ProjectsController < ApplicationController
    def edit
        // no code yet
    end
end 
```

**看法：**

```
<% @users_projects.each do |project| %>
    <%= link_to project.title, project_path(project), :class => "manage_project_link" %>
    <%= button_to "Edit", edit_project_path(project), :class => "btn edit_button" %>
<% end %> 
```

怎么了？*运行rake 路由*时要找到该路由

 *```
 edit_project GET    /projects/:id/edit(.:format)       projects#edit 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:31:56.837

更仔细地查看错误消息：

`No route matches [POST] "/projects/8/edit"`

它实际上是使用动词`POST`而不是`GET`。这就是它找不到路径的原因。

您正在使用生成表单的[button_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to)助手，默认方法是`POST`.

您只需要更改`button_to`为`link_to`.*

# java - scheduleAtFixedRate 执行速度快

> ID：14818427
> 
> 赞同：0
> 
> 时间：2013-02-11T18:24:49.593
> 
> 标签：java, android, timer

我在我的程序（Timer 类）中使用方法 scheduleAtFixedRate。它每秒运行一次，但有时这种方法会变得非常快（每秒执行 3-4 次）。

但是我在网上做了一些研究，我发现了这个：

从android开发者页面复制：

> 使用固定速率执行，任务的每次连续运行的开始时间都会被安排，而不考虑上一次运行发生的时间。如果延迟阻止计时器按时启动任务，这可能会导致一系列聚集运行（一个接一个地立即启动）。

我需要固定计时器。它应该**每 x 次只运行一次，**没有任何快速执行。scheduleAtFixedRate 方法是否有任何替代方法，或者我需要对这种方法感到满意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:36:09.847

Timer 类中的方法 schedule 可以考虑，即使它不保证任务将在每个“x”时间段执行一次。

```
public void schedule(TimerTask task, Date firstTime,  long period) 
```

至少它不会像你说的那样重复执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:26:50.403

如果您的任务运行时间超过 1 秒，您可以尝试使用[ScheduledExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)，使用多个线程。

语法与 Timer 非常相似，但它是一个更健壮和灵活的 API。

# charts - Google Chart arrayToDataTable 格式的值不起作用

> ID：14818429
> 
> 赞同：2
> 
> 时间：2013-02-11T18:24:53.907
> 
> 标签：charts, formatting, google-visualization

我关注[arrayToDataTable](https://google-developers.appspot.com/chart/interactive/docs/datatables_dataviews?hl=en#arraytodatatable)的谷歌图表文档，示例说明我可以使用格式化值，如下所示：

```
var data = google.visualization.arrayToDataTable([
['Employee Name', 'Salary'],
['Mike', {v:22500, f:'18,500'}],
... 
```

其中**f:'18,500**是要显示的格式化值。我的代码看起来相同：

```
var data = google.visualization.arrayToDataTable([
['Category', 'Amount'],
['Food', {v:5595.819984, f:'5.595,82'}], 
['Home', {v:1890.530002, f:'1.890,53'}], 
['Mail', {v:8.380000, f:'8,38'}], 
['Train', {v:564.899998, f:'564,90'}], 
['Photo', {v:959.119995, f:'959,12'}], 
['Lego', {v:428.760004, f:'428,76'}], 
... 
```

但图表甚至没有显示，崩溃。如果我取出格式化的数据，它会完美运行。我做错了什么？如何使用更好看的版本来显示图表上的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T02:53:34.940

正如 Andrew 在评论中提到的那样，Google Docs 似乎就在这个上面。

`ArrayToDataTable()`如果你传入一个数组，效果很好。由于添加附加格式会在数组中创建一个数组，因此 Google 似乎不喜欢它。如果要使用格式，则应手动添加数据，如下所示。

**您的代码：**

```
var data = google.visualization.arrayToDataTable([
['Category', 'Amount'],
['Food', {v:5595.819984, f:'5.595,82'}], 
['Home', {v:1890.530002, f:'1.890,53'}], 
['Mail', {v:8.380000, f:'8,38'}], 
['Train', {v:564.899998, f:'564,90'}], 
['Photo', {v:959.119995, f:'959,12'}], 
['Lego', {v:428.760004, f:'428,76'}], 
```

**更新代码：**

```
var data = google.visualization.DataTable();
data.addColumn('string', 'Category');
data.addColumn('number', 'Amount');
data.addRows([
['Food', {v:5595.819984, f:'5.595,82'}], 
['Home', {v:1890.530002, f:'1.890,53'}], 
['Mail', {v:8.380000, f:'8,38'}], 
['Train', {v:564.899998, f:'564,90'}], 
['Photo', {v:959.119995, f:'959,12'}], 
['Lego', {v:428.760004, f:'428,76'}],
]); 
```

这不会使您的数据添加过于复杂，将以相同的结果结束，并且会更好地处理格式化的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-25T21:56:08.057

我也遇到了这个问题，但对手动添加数据不满意。经过大量挖掘，我发现了“PatternFormat”方法： [https ://developers.google.com/chart/interactive/docs/reference#patternformatter](https://developers.google.com/chart/interactive/docs/reference#patternformatter)

有了这个，您仍然不能使用数组对象中的格式化模式来使用 arrayToDataTable 方法来实例化表，但是您可以只包含值然后使用列上的 PatternFormat 方法来修改为所需的输出。

所以像：

```
var data = google.visualization.arrayToDataTable([
 ['Category', 'Amount'],
 ['Food', 5595.819984], 
 ['Home', 1890.530002], 
 ['Mail', 8.380000], 
 ['Train', 564.899998], 
 ['Photo', 959.119995}], 
 ['Lego', 428.760004}]
], false); //must specify 'false' to indicate first set is column header data

var formatter = new google.visualization.NumberFormat(
{pattern:'####.##'}
);

formatter.format(data, 1); // Apply formatter to second column 
```

我应该提醒一下，这种技术实际上不适用于上述原始用例，因为没有为每一行寻求一致的格式。

# button - Blackberry Cascades 中的重复操作栏按钮

> ID：14818434
> 
> 赞同：1
> 
> 时间：2013-02-11T18:25:23.220
> 
> 标签：button, blackberry-simulator, blackberry-10, blackberry-cascades

我的 Blackberry Cascades 应用程序有一个奇怪的问题。我试图向操作栏添加一个按钮（在应用程序的底部）。但是，当我在 Blackberry 10 Dev Alpha 模拟器 (BB10_0_10.261) 中对其进行测试时，似乎我有同一个按钮的 2 个（有时是 3 个）版本，如下图所示。虽然通常应该只有 1 个？

![按钮太多](../Images/f10733ced3db3a8338e006f46866b252.png)

所以我要做的是在 QML 中向我的页面添加一个按钮，如下所示：

```
NavigationPane {
    Page {
        Container {
            layout: StackLayout {
            }
            ListView {
                ...
            }
        }
        actions: [
            ActionItem {
                title: "New Event"
                ActionBar.placement: ActionBarPlacement.OnBar // HERE
                onTriggered: {
                    var page = newEventPage.createObject();
                    navigationPane.push(page);
                }
                attachedObjects: ComponentDefinition {
                    id: newEventPage
                    source: "addEvent.qml"
                }
            }
        ]
    }
    onPopTransitionEnded: {
        page.destroy();
    }
} 
```

这段代码只不过是添加一个按钮“New Event”，它将链接到我的“addEvent.qml”

但是，如果我删除（或注释）该行`Actionbar.placement: ActionBarPlacement.OnBar`（在上面的代码中标记`HERE`），我只会得到预期的 1 个按钮。但是这个按钮位于溢出菜单中，而我希望它位于底部的 ActionBar 上。

所有不同版本的按钮都做同样的事情（顺便说一下，预期的行为：打开 addEvent.qml）。

我已经尝试过：“清洁..”然后“重建”；这没有用。我还尝试将动作数组移动到其他地方，因为我认为这可能位于错误的位置，但这也无济于事。删除模拟器上的应用程序，然后重新安装。

我还在另一台计算机和其他模拟器上尝试过，因为我认为它可能是我的计算机。但我在那里遇到了同样的问题。

我不知道这是否是一个错误，但我想我做错了什么，因为我在 Cascades 开发方面没有很多经验。我到处找，但没有其他人有同样的问题。我还没有在真实设备上测试过，因为我还没有 BB10 设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T09:08:32.357

我在 Blackberry Cascades 论坛上问了这个问题，因为我认为大多数专家都会住在那里。显然，他们可以[回答](http://supportforums.blackberry.com/t5/Cascades-Development/Duplicate-actionbar-buttons/m-p/2157969#M14109)我的问题。

显然问题是我`qml->setContextProperty("model", model);` 在我的 C++ 代码中使用了。而且我认为这并没有太大的不同，所以我把这条线放在了这条线的后面。`AbstractPane *root = qml->createRootObject<AbstractPane>();` 但显然它确实有所作为，因为那样你会收到你的按钮 double 。

所以这个问题其实很容易解决，当你知道它的时候，只需将行移到`setContextProperty`行之前`createRootObject`，一切都解决了。

我有 3 个按钮的问题似乎是我有 2`setContextProperty`行代码，`createRootObject`在行后面。因此，对于每一`setContextProperty`行，按钮都是重复的。

# codeigniter - 分页中的 CodeIgniter 错误：您的链接数必须为正数

> ID：14818435
> 
> 赞同：0
> 
> 时间：2013-02-11T18:25:24.153
> 
> 标签：codeigniter

```
$config['num_links'] = 0; 
```

或者

```
$config['num_links'] = FALSE; 
```

在 Codeigniter 中抛出此错误：

**您的链接数必须是正数。**

如何禁用在分页中显示数字？

因为我只想要**下一个**和**上一个**：

```
< > 
```

并不是：

```
< 1 2 3 4 5 > 
```

如何在 Codeigniter 中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:37:56.437

利用`$config['display_pages'] = FALSE;`

# .net - 我可以将 DataVisualization.Charting.Chart 逆时针旋转 90° 吗？

> ID：14818437
> 
> 赞同：1
> 
> 时间：2013-02-11T18:25:32.667
> 
> 标签：.net, vb.net, mschart

我需要在水平和垂直方向上绘制激光束轮廓的直方图。

水平直方图通常绘制为 Y 与 X。

在使用 X 与 Y 绘制垂直直方图时，我接近解决方案。但是，由于我使用的是`SeriesChartType.Area`样式图表，因此该区域是从上到下而不是从右到左填充的。（注意垂直直方图暂时不与图像对齐，这是顺时针旋转）

![光束和直方图](../Images/02c2bfdcebd5dcd7023a5e1eb1769dc9.png)

绘制代码：

```
Dim series As Series

Me.chtHorizontal.Series.Clear()
series = New Series("Horizontal")
series.Points.DataBindXY(
    dictionaryOfHistogramHorizontal.Keys,
    String.Empty,
    dictionaryOfHistogramHorizontal.Values,
    String.Empty)
Me.chtHorizontal.Series.Add(series)

Me.chtVertical.Series.Clear()
series = New Series("Vertical")
series.Points.DataBindXY(
    dictionaryOfHistogramVertical.Values,
    String.Empty,
    dictionaryOfHistogramVertical.Keys,
    String.Empty)
    Me.chtVertical.Series.Add(series)
Me.chtVertical.Series.Add(series) 
```

我一直在寻找可以让我逆时针旋转的 ChartArea 属性，但找不到。这将是理想的，因为一切都将在全球范围内旋转。相反，我交换了 X 和 Y，因为它让我更接近解决方案。

我还寻找了该系列的一个属性，它允许我从右到左而不是默认的从上到下填充，但找不到。

我想要填充图表 ( `SeriesChartType.Area`)，但如果我不这样做，我可以只使用折线图。这不是我正在寻找的解决方案。

# javascript - 延迟 Javascript 悬停动作

> ID：14818438
> 
> 赞同：9
> 
> 时间：2013-02-11T18:25:33.157
> 
> 标签：javascript, jquery, hover, delay

我的网站上有一个图像，它分配了一个 jquery 悬停动作。但是很容易不小心将鼠标悬停在该区域上，如果您不止一次这样做，悬停会不断出现，消失，出现等，直到您每次将鼠标悬停在它上面时它会显示并消失一次。有没有办法做到这一点，除非你悬停几秒钟，否则动作不会触发？我不想只是延迟动作，因为它仍然会发生在每次鼠标悬停时，我想看看是否有一种方法鼠标悬停不计数，除非你在图像上停留几秒钟。

到目前为止的脚本：

```
$("img.badge").hover(
function() {
  $("h3.better").animate({"left": "125px"}, 1200);
},
function() {
  $("h3.better").animate({"left": "-500px"}, 800);
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-11T18:26:39.680

您可以使用`setTimeout`来启动操作并绑定调用事件`clearTimeout`的函数：`mouseout`

```
$('img.badge').hover(function(){
    window.mytimeout = setTimeout(function(){
        $("h3.better").animate({"left": "125px"}, 1200);
    }, 2000);
}, function(){
    clearTimeout(window.mytimeout);    
}); 
```

或者您可以为此使用插件，例如[hoverintent](http://cherne.net/brian/resources/jquery.hoverIntent.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:27:41.320

使用`.stop()`前动画，取消前一个动画。我相信这是您正在寻找的，并将解决您当前的问题。

```
$("img.badge").hover(
function() {
  $("h3.better").stop().animate({"left": "125px"}, 1200);
},
function() {
  $("h3.better").stop().animate({"left": "-500px"}, 800);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:29:54.553

您可以使用计时器不触发悬停动作，直到您像这样悬停了一定时间，然后，如果悬停在计时器触发之前离开，您清除计时器，因此如果您只是悬停，则不会发生任何事情短时间：

```
$("img.badge").hover(function() {
    var timer = $(this).data("hover");
    // if no timer set, set one otherwise if timer is already set, do nothing
    if (!timer) {
        // set timer that will fire the hover action after 2 seconds
        timer = setTimeout(function() {
            $("h3.better").stop(true).animate({"left": "125px"}, 1200);
            $(this).data("hover", null);
        }, 2000);
        // save timer
        $(this).data("hover", timer);
    }
}, function() {
    var timer = $(this).data("hover");
    if (timer) {
        clearTimeout(timer);
        $(this).data("hover", null);
    } else {
        // probably would be better to make this an absolute position rather
        // than a relative position
        $("h3.better").stop(true).animate({"left": "-500px"}, 800);
    }
}); 
```

注意：我还添加`.stop(true)`到您的动画中，因此动画永远不会堆积。

# c# - xUnit 测试引擎的 InlineDataAttribute + 可选方法参数

> ID：14818439
> 
> 赞同：5
> 
> 时间：2013-02-11T18:25:45.293
> 
> 标签：c#, unit-testing, optional-parameters, xunit, optional-arguments

当您不指定可选参数值时，是否可以使 xUnit 测试工作`InlineDataAttribute`？

例子：

```
[Theory]
[InlineData(1, true)] // works
[InlineData(2)]       // error
void Test(int num, bool fast=true){} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:59:14.793

是的。通过重新定义一些原始的 xunit 属性，有很多方法可以做到这一点。

下面的代码就是其中之一，它会给你一些想法。

```
[AttributeUsage(AttributeTargets.Method, AllowMultiple = true, Inherited = true)]
public class OptionalTheoryAttribute : TheoryAttribute
{
    protected override IEnumerable<ITestCommand> EnumerateTestCommands(IMethodInfo method)
    {
        var result = (List<ITestCommand>)base.EnumerateTestCommands(method);

        try
        {
            return TransferToSupportOptional(result, method);
        }
        catch (Exception ex)
        {
            result.Clear();
            result.Add(new LambdaTestCommand(method, () =>
                {
                    throw new InvalidOperationException(
                        String.Format("An exception was thrown while getting data for theory {0}.{1}:\r\n{2}",
                            method.TypeName, method.Name, ex)
                        );
                }));
        }
        return result;
    }

    private static IEnumerable<ITestCommand> TransferToSupportOptional(
        IEnumerable<ITestCommand> testCommands, IMethodInfo method)
    {
        var parameterInfos = method.MethodInfo.GetParameters();
        testCommands.OfType<TheoryCommand>().ToList().ForEach(
            testCommand => typeof(TheoryCommand)
                               .GetProperty("Parameters")
                               .SetValue(testCommand, GetParameterValues(testCommand, parameterInfos)));
        return testCommands;
    }

    private static object[] GetParameterValues(TheoryCommand testCommand, ParameterInfo[] parameterInfos)
    {
        var specifiedValues = testCommand.Parameters;
        var optionalValues = GetOptionalValues(testCommand, parameterInfos);

        return specifiedValues.Concat(optionalValues).ToArray();
    }

    private static IEnumerable<object> GetOptionalValues(TheoryCommand command, ParameterInfo[] parameterInfos)
    {
        return Enumerable.Range(command.Parameters.Length, parameterInfos.Length - command.Parameters.Length)
                         .ToList().Select(i =>
                             {
                                 EnsureIsOptional(parameterInfos[i]);
                                 return Type.Missing;
                             });
    }

    private static void EnsureIsOptional(ParameterInfo parameterInfo)
    {
        if (!parameterInfo.IsOptional)
        {
            throw new ArgumentException(string.Format(
                "The parameter '{0}' should be optional or specified from data attribute.",
                parameterInfo));
        }
    }
}

internal class LambdaTestCommand : TestCommand
{
    private readonly Assert.ThrowsDelegate lambda;

    public LambdaTestCommand(IMethodInfo method, Assert.ThrowsDelegate lambda)
        : base(method, null, 0)
    {
        this.lambda = lambda;
    }

    public override bool ShouldCreateInstance
    {
        get
        {
            return false;
        }
    }

    public override MethodResult Execute(object testClass)
    {
        try
        {
            lambda();
            return new PassedResult(testMethod, DisplayName);
        }
        catch (Exception ex)
        {
            return new FailedResult(testMethod, ex, DisplayName);
        }
    }
}

public class OptionalTheoryTest
{
    [OptionalTheory]
    [InlineData(1)]
    [InlineData(1, true)]
    public void TestMethod(int num, bool fast = true)
    {
        // Arrange
        // Act
        // Assert
        Assert.Equal(1, num);
        Assert.True(fast);
    }
} 
```

# jquery - 为什么 jQuery 说我的 ajax jsonp 调用失败了？

> ID：14818440
> 
> 赞同：0
> 
> 时间：2013-02-11T18:25:45.290
> 
> 标签：jquery, jsonp

不确定我在这里遗漏了什么，如果你看看这段代码 - 你会看到我正在对 flickr 进行 jsonp 调用并获得成功的响应。然而，jQuery 总是调用“失败”方法而不是成功方法。

为什么？

{{已编辑}}

```
$.ajax({
      url: 'http://api.flickr.com/services/feeds/photos_public.gne?format=json&tags=fun&tagmode=any',
      dataType: 'jsonp'
  })
  .done(function(data, status) {
    console.log( 'data count:', data.query.results.json.json.length );
    $('#result-count').text( JSON.stringify(data.query.results.json.json) );
  })
  .fail(function(xhr, err) {
    console.log( 'Sample of error data:', err );
    console.log("readyState: "+xhr.readyState+"\nstatus: "+xhr.status+"\nresponseText: "+xhr.responseText); });
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:27:30.310

它失败了，因为您使用了错误的 jsonp 回调。

```
...
type: 'GET',
jsonpCallback: 'jsonFlickrFeed'
... 
```

此外，在最新版本的 jQuery 中，jsonp 请求不会触发`fail`错误回调，`async:false`对于 jsonp 请求会被忽略，并且`crossDomain`不是必需的（jquery 为您设置）。

# php - 从迭代中连接 PHP 字符串

> ID：14818441
> 
> 赞同：1
> 
> 时间：2013-02-11T18:25:45.653
> 
> 标签：php, string, dictionary, iteration, concatenation

我正在研究一些数据库函数，出于某种原因，我制作了两个函数来制作简单的插入/选择，其中数组作为参数传递给 php 函数。问题从这里开始。

```
 // basic database functions, to aid the development :D
    static public function Insert($table, $items = array())
    {
        if(is_array($items) == false)
        {
            return false;
        }

        $header = 'INSERT INTO ' . $table . '(';
        $values = 'VALUES(';

        $count = count($items) - 1;
        $cur = 0;

        foreach($items as $key => $value)
        {
            $num = is_numeric($value);

            $header .= $key . ($cur < $count) ? ', ' : ' ';
            $values .= (($num) ? '' : '\'') . $value . (($num) ? '' : '\'') . (($cur < $count) ? ', ' : '');

            $cur ++;
        }

        $header .= ')';
        $values .= ')';

        self::Query($header . $values);
    }

        $pair = array('id' => null,
                      'name' => Database::EscapeString((string)$xml->ID),
                      'avatar_url' => Database::EscapeString((string)$xml->Avatar),
                      'personal_msg' => Database::EscapeString((string)$xml->AboutMe),
                      'level' => (int)$xml->Level,
                      'progress' => (int)$xml->Progress,
                      'trophies_total' => (int)$xml->Trophies->Total,
                      'trophies_platinum' => (int)$xml->Trophies->Platinum,
                      'trophies_gold' => (int)$xml->Trophies->Gold,
                      'trophies_silver' => (int)$xml->Trophies->Silver,
                      'trophies_bronze' => (int)$xml->Trophies->Bronze,
                      'country' => Database::EscapeString((string)$xml->Country->Culture),
                      'is_plus' => (string)$xml->Plus,
                      'points' => (int)$xml->LevelData->Points,
                      'floor' => (int)$xml->LevelData->Floor,
                      'ceiling' => (int)$xml->LevelData->Ceiling,
                      'game_completion' => (double)$xml->GameCompletion,
                      'background_color' => ((int)$xml->Background->R << 16) | ((int)$xml->Background->G << 8) | ((int)$xml->Background->B),
                      'jid' => (string)$xml->jid
                      );

        Insert('profiles', $pair); 
```

查询包含的数据不正确：

```
INSERT INTO profiles(, , , , , , , , , , , , , , , , , , , )VALUES('', 'AlmamuPP', 'http://static-resource.np.community.playstation.net/avatar/3RD/30004.png', 'EVE Online & DUST fan', 2, 17, 12, 0, 0, 6, 6, 'ES', 'false', 270, 200, 600, 12.5, 458759, 'AlmamuPP@a4.es.np.playstation.net') 
```

您可能会注意到，它只是忽略了字典中的所有键，但有趣的事实是，如果我添加

```
echo $key; 
```

在 foreach 中，键按应有的方式打印...关于那里可能发生的事情以及解决方法的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:31:51.147

您缺少括号：

```
$header .= $key . (($cur < $count) ? ', ' : ' '); 
```

像这样它会起作用。

# sql-server-2008 - 使用基于 CASE 生成列的 ORDER BY 在 SQL SELECT 中进行分页 - TSQL

> ID：14818442
> 
> 赞同：0
> 
> 时间：2013-02-11T18:25:49.600
> 
> 标签：sql-server-2008, pagination, sql-order-by, case

我正在使用 MS SQL SERVER 2008，并创建了以下查询（简化）；

```
SELECT DATE_A, DATE_B
CASE
WHEN DATEDIFF(day, DATE_A, GETDATE()) >= 1 THEN 1
WHEN DATEDIFF(day, DATE_B, GETDATE()) >= 1 AND DATEDIFF(day, DATE_A, GETDATE()) <1 THEN             2
ELSE 3
END AS sortPriority,
CASE
--deadline past
WHEN DATEDIFF(day, DATE_A, GETDATE()) >= 1 THEN DATE_A
--review only past
WHEN DATEDIFF(day, DATE_B, GETDATE()) >= 1 AND DATEDIFF(day, DATE_A()) <1 DATE_B
--anything else
ELSE DATE_B
END AS sortDate
FROM myTable
WHERE (DATEDIFF(day, DATE_A, GETDATE()) >=1 OR DATEDIFF(day, DATE_B, GETDATE()) >=1)
ORDER BY sortPriority, sortDate; 
```

该查询返回 DATE_A 或 DATE_B 早于今天日期的行。行先按 sortPriority 排序，然后按 sortDate。

我现在需要为此查询添加分页，但是当我在 ROW_NUMBER() 函数的 order by 子句中使用 sortPriority 或 sortDate 列时，查询失败；

```
WITH sortedTable AS
(
SELECT DATE_A, DATE_B,
CASE
WHEN DATEDIFF(day, DATE_A, GETDATE()) >= 1 THEN 1
WHEN DATEDIFF(day, DATE_B, GETDATE()) >= 1 AND DATEDIFF(day, DATE_A, GETDATE()) <1 THEN 2
ELSE 3
END AS sortPriority,
CASE
--deadline past
WHEN DATEDIFF(day, DATE_A, GETDATE()) >= 1 THEN DATE_A
--review only past
WHEN DATEDIFF(day, DATE_B, GETDATE()) >= 1 AND DATEDIFF(day, DATE_A()) <1 DATE_B
--anything else
ELSE DATE_B
END AS sortDate,
ROW_NUMBER() OVER (sortPriority, sortDate) AS 'RowNumber'
FROM myTable
WHERE (DATEDIFF(day, DATE_A, GETDATE()) >=1 OR DATEDIFF(day, DATE_B, GETDATE()) >=1)
)
SELECT * 
FROM sortedTable 
WHERE RowNumber BETWEEN 10 AND 20; 
```

我收到以下错误消息；

```
Msg 207, Level 16, State 1, Line 24
Invalid column name 'sortPriority'.
Msg 207, Level 16, State 1, Line 24
Invalid column name 'sortDate'. 
```

并且行号指的是我的示例代码的这一行；

```
ROW_NUMBER() OVER (sortPriority, sortDate) AS 'RowNumber' 
```

我怎样才能解决这个问题并获得所需的结果（原始排序完整的分页）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:35:26.820

未经测试：

```
WITH sortedTable AS
(
    SELECT DATE_A, DATE_B, sortPriority, sortDate,
           ROW_NUMBER() OVER (sortPriority, sortDate) AS 'RowNumber'
      FROM
          (
            SELECT DATE_A, DATE_B,
                   CASE WHEN DATEDIFF(day, DATE_A, GETDATE()) >= 1 THEN 1
                        WHEN DATEDIFF(day, DATE_B, GETDATE()) >= 1 AND DATEDIFF(day, DATE_A, GETDATE()) <1 THEN 2
                        ELSE 3
                    END AS sortPriority,
                   CASE
                        --deadline past
                        WHEN DATEDIFF(day, DATE_A, GETDATE()) >= 1 THEN DATE_A
                        --review only past
                        WHEN DATEDIFF(day, DATE_B, GETDATE()) >= 1 AND DATEDIFF(day, DATE_A()) <1 DATE_B
                        --anything else
                        ELSE DATE_B
                    END AS sortDate
               FROM myTable
              WHERE (DATEDIFF(day, DATE_A, GETDATE()) >=1 OR DATEDIFF(day, DATE_B, GETDATE()) >=1)
          ) T
)
SELECT * 
FROM sortedTable 
WHERE RowNumber BETWEEN 10 AND 20; 
```

# powershell - PowerShell：在 while true 循环中检查错误？

> ID：14818443
> 
> 赞同：3
> 
> 时间：2013-02-11T18:25:54.850
> 
> 标签：powershell

我在它的末尾有一个`while($true)`循环。**目的是以不同的用户**`start-sleep -s 60`身份启动外部 PowerShell 脚本，该脚本将通过服务器列表运行，检查事件日志以了解最后一分钟内的更改并做出相应反应。

 **由于我的 while 循环（如下）使用该`-credential`标志作为其他人运行脚本，因此我担心错误（例如帐户锁定、密码过期、文件丢失等）。

我尝试了一个`if ($error)`语句，并更改了外部脚本的文件名，但我从未收到警报。我在想这是因为它永远不会停止重新检查自己？

```
while($true) { 

    # Start the scan
    Start-Process powershell -Credential $credentials -ArgumentList '-noprofile -command & c:\batch\02-Scan.ps1'

    # Sleep 60 seconds
    start-sleep -s 60

} 
```

我想我可以将计划任务更改为每分钟运行一次，但到目前为止，这个循环似乎运行良好。只想在循环处于活动状态时引入错误检查。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:36:22.133

你试过 try/catch 块吗？错误的凭据是一个终止错误，因此 try 块中的其余代码不会在凭据错误后运行。当你抓住它时，你可以做任何你想做的事情......例如。

```
try { 
    Start-Process powershell -Credential $credentials -ArgumentList '-noprofile -command & c:\batch\02-Scan.ps1'
} catch {
    #Catches terminating exceptions and display it's message
    Write-Error $_.message
} 
```

如果要捕获所有错误，请添加`-ErrorAction Stop`到该`Start-Process`行。如前所述，凭据应该是一个终止错误，这使得`erroraction`参数变得不必要

**编辑**你为什么首先使用`Start-Process`运行脚本？我将其切换到`Invoke-Command`远程运行 powershell 脚本。当脚本文件丢失时，您将收到一个非终止错误。因为它是一个非终止错误，所以我们需要使用该`-ErrorAction Stop`参数。要捕获丢失文件错误和所有其他错误（如凭据），请使用以下内容：

```
try { Invoke-Command -ScriptBlock { & c:\batch\02-Scan.ps1 } -ErrorAction Stop
} catch {
    if ($_.Exception.GetType().Name -eq "CommandNotFoundException") {
        Write-Error "File is missing"
    } else {
        Write-Error "Something went wrong. Errormessage: $_"
        #or throw it directly:
        #throw $_
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:36:13.870

也许？

```
while($true) { 

# Start the scan
try{
Start-Process powershell -Credential $credentials -ArgumentList '-noprofile -command & c:\batch\02-Scan.ps1' -ErrorAction Stop
}
  catch {
          send-alert
          break
          }

# Sleep 60 seconds
start-sleep -s 60
} 
```**

# ios - 如何检测iphone是否还在？

> ID：14818444
> 
> 赞同：-2
> 
> 时间：2013-02-11T18:26:06.197
> 
> 标签：ios, objective-c, motionevent, image-stabilization

我必须制作一个用户只能在 iPhone 静止时拍照的应用程序。你能告诉我如何进行吗？任何帮助将不胜感激。

下面是我尝试过的代码，请提出改进​​建议，这段代码给出了生涩的输出

```
 _previousMotionValue = 0.0f;
            memset(xQueue, 0, sizeof(xQueue));
            memset(yQueue, 0, sizeof(yQueue));
            queueIndex = 0;

            [_motionManager startAccelerometerUpdatesToQueue:_motionManagerUpdatesQueue withHandler:^(CMAccelerometerData *accelerometerData, NSError *error) {

                if ([_motionManagerUpdatesQueue operationCount] > 1) {
                    return;
                }

                xQueue[queueIndex] = -accelerometerData.acceleration.x;
                yQueue[queueIndex] = accelerometerData.acceleration.y;

                queueIndex++;
                if (queueIndex >= QueueCapacity) {
                    queueIndex = 0;
                }

                float xSum = 0;
                float ySum = 0;

                int i = 0;

                while (i < QueueCapacity)
                {
                    xSum += xQueue[i];
                    ySum += yQueue[i];
                    i++;
                }

                ySum /= QueueCapacity;
                xSum /= QueueCapacity;

                    double motionValue = sqrt(xSum * xSum + ySum * ySum);
                    CGFloat difference = 50000.0 * ABS(motionValue - _previousMotionValue);
                    if (difference < 100)
                    {
                        //fire event for capture
                    }
                    [view setVibrationLevel:difference];
                    _previousMotionValue = motionValue;

            }]; 
```

根据振动水平，我设置了不同的图像，如绿色、黄色、红色。我选择了阈值 100。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:37:26.040

# hibernate - Hibernate 隐式连接的奇怪问题

> ID：14818450
> 
> 赞同：0
> 
> 时间：2013-02-11T18:26:34.297
> 
> 标签：hibernate, hql

我从 Hibernate 4.1.9 收到一个奇怪的错误。这是我的实体类结构：

```
@Entity
@Table( name = "security_grant", catalog = "security")
public class SecurityGrantDO implements Serializable
{
    private long id;
    private SecuritySubjectDO securitySubject;
    @Id
    @GeneratedValue( strategy = IDENTITY )
    @Column( name = "id", unique = true, nullable = false )
    public long getId()
    {
        return this.id;
    }
    public void setId( long id )
    {
        this.id = id;
    }
    @Column( name = "security_subject__id", nullable = false )
    public SecuritySubjectDO getSecuritySubject()
    {
        return securitySubject;
    }
    public void setSecuritySubject( SecuritySubjectDO securitySubject )
    {
        this.securitySubject = securitySubject;
    }
}

@Entity
@Table( name = "security_subject", catalog = "security")
public class SecuritySubjectDO implements Serializable
{
    private long id;
    private ObjectType domainObjectType;
    private long domainObjectId;
    @Id
    @GeneratedValue( strategy = IDENTITY )
    @Column( name = "id", unique = true, nullable = false )
    public long getId()
    {
        return this.id;
    }
    public void setId( long id )
    {
        this.id = id;
    }
    @Column( name = "domain_object_type", nullable = false )
    @Enumerated(EnumType.STRING)
    public ObjectType getDomainObjectType()
    {
        return domainObjectType;
    }
    public void setDomainObjectType( ObjectType domainObjectType )
    {
        this.domainObjectType = domainObjectType;
    }
    @Column( name = "domain_object__id", nullable = false)
    public long getDomainObjectId()
    {
        return domainObjectId;
    }
    public void setDomainObjectId( long domainObjectId )
    {
        this.domainObjectId = domainObjectId;
    }
} 
```

这是我的查询：

```
Query query = session.createQuery( "from SecurityGrantDO g where g.securitySubject.domainObjectId = :doid and " +
            "g.securitySubject.domainObjectType = :dot" ); 
```

当它执行时，Hibernate 会抛出：

org.hibernate.QueryException：无法解析属性：domainObjectId 的：com.jelli.phoenix.model.security.SecurityGrantDO [来自 com.jelli.phoenix.model.security.SecurityGrantDO g 其中 g.securitySubject.domainObjectId = :doid 和 g .securitySubject.domainObjectType = :dot]

嗯？domainObjectId 不是 SecurityGrantDO 的属性；它是 SecuritySubjectDO 的一个属性。我认为消息本身可能只是一个错误，但为什么隐式连接失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:38:58.100

没有从 映射`SecurityGrantDO`到 的关系`SecuritySubjectDO`。使用以下映射：

```
@Column( name = "security_subject__id", nullable = false )
public SecuritySubjectDO getSecuritySubject() 
```

Hibernate 试图将其视为 Serializable 的持久属性`SecurityGrantDO`并感到困惑。如果需要这两个实体之间的关系，可以采用以下方法：

```
@ManyToOne //or @OneToOne, depends about preferred domain model
@JoinColumn( name = "security_subject__id", nullable = false )
public SecuritySubjectDO getSecuritySubject() {
    return securitySubject;
} 
```

# asp.net-mvc - EF Code First - “对象引用未设置为对象的实例。” 在数据库创建期间

> ID：14818457
> 
> 赞同：0
> 
> 时间：2013-02-11T18:26:50.603
> 
> 标签：asp.net-mvc, database, linq, entity-framework, ef-code-first

今天我正在更改我的数据库模型。我修改了大约 2 个小时，没有编译它。

所以，我的应用程序中有这个：

```
Database.SetInitializer(new DropCreateDatabaseIfModelChanges<MyDb>()); 
```

通常，当我对模型进行更改时，这样做就足够了：

```
var tmp = new MyDb();
tmp.Categories.Any(); 
```

模型正在重新创造自己。但是现在，在我更改模型后，我收到了一个错误：

> 你调用的对象是空的。

我完全不知道这是什么意思，因为我正在调用 MyDb()，所以设置了这个实例。这里发生了什么？我怎样才能检查出什么问题？

**编辑：**我刚刚发现的事情是它甚至没有尝试重新创建数据库。我设置了这个：

```
 public class MyDatabaseInitializer : DropCreateDatabaseIfModelChanges<ScykDb>
    {
        protected override void Seed(ScykDb context)
        {
            base.Seed(context);
            (code...)
         }
     } 
```

进入我的 application_start：

```
Database.SetInitializer(new MyDatabaseInitializer()); 
```

我在这个方法中设置了一个断点，它甚至没有命中它！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-24T03:53:32.283

我只是遇到了这个，我以前没有。它让我发疯，直到我弄清楚我在做什么。如果您的模型具有另一个模型的列表，请确保您的模型上有一个构造函数来初始化列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:16:31.780

好的。对于进入这里的任何人，这是解决方案：

我不知道它是如何工作的，但我注释掉了我所有的 [ForeignKey] 属性和我所有的流利的 api 配置。然后我开始了这个项目，并通过仅使用流利的 api 修复了它抛出的错误。这有帮助。现在一切正常。

# jquery - How do I retrieve the contents of a tag?

> ID：14818461
> 
> 赞同：2
> 
> 时间：2013-02-11T18:26:59.493
> 
> 标签：jquery, attributes, tags

Say I have the following:

```
<div id="myid" class="myclass"></div> 
```

What I would like to do is find this tag via jQuery and get the stuff between <> for this div. In this case I would like for my output to be as follows:

```
div id="myid" class="myclass" 
```

Not looking for innerHTML, just what's in the tag. I know I can use jQuery to test for known attributes, but I'm really looking to be able to get the actual string here. It occurred to me that I could get the innerHTML of a parent tag and then do some parsing, but that seems messy and error prone. I would much rather be able to do something like the following

```
alert($('#myid').getTagContents()) 
```

and have it alert the bit above. Is this possible? Any idea on how to do it?

FYI, I see that this question has been marked as a duplicate, but the other question does not address my concerns. I don't want to loop through attributes. I want the literal string from the tag, so I can parse it myself.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:44:30.117

This should retrieve what you want.

```
alert($('#myId')[0].outerHTML.split('>')[0].substring(1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:39:28.447

You basically need to build something yourself. Made a real quick jQuery extension that returns the result.

[http://jsfiddle.net/aY4nG/](http://jsfiddle.net/aY4nG/)

```
$.fn.getTagContents = function () {
     var $this = $(this),
         tags  = $this[0].outerHTML,
         endLoc = '';

    endLoc = tags.indexOf('>') - 1;

    return tags.substr(1, endLoc);
};

var tags = $('#test').getTagContents();

console.log(tags);
// logs: div id="test" class="whatever" 
```

# sql-server - 如何在单元格中输入带有逗号的电子邮件地址？

> ID：14818464
> 
> 赞同：0
> 
> 时间：2013-02-11T18:27:08.497
> 
> 标签：sql-server, tsql, sql-server-2012

我正在尝试插入一个带有逗号的电子邮件地址（并且必须以这种方式输入），而我目前对如何正确地将确切的文本插入此单元格感到困惑。

需要输入的电子邮件地址/是：

`joe,.E.Blow@someemail.com`

我尝试的是在代码中使用不同的转义模式。例如，这...

`'''joe'''+','+'''.E.Blow@someemail.com'''`

被输入到数据库中...

`'joe','E.Blow@someemail.com'`

我尝试过使用单引号和双引号的不同组合，它甚至无法通过简单的解析而没有错误。

如上所述输入电子邮件地址的最佳方法是什么？我知道这很简单，但我只是在这里旋转我的轮子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:30:13.327

解决方案很简单：

例如：`joe,.E.Blow@someemail.com`

见[小提琴](http://sqlfiddle.com/#!6/0c6ab/1)

# c++ - 使用 Cholmod 和 Cholmod-Extra 计算稀疏矩阵的逆

> ID：14818465
> 
> 赞同：1
> 
> 时间：2013-02-11T18:27:10.200
> 
> 标签：c++, linear-algebra, sparse-matrix, matrix-inverse, suitesparse

我最近安装`Cholmod`是为了在一些 C++ 代码中执行稀疏 Cholesky 分解。然后我想使用 decomp 来计算矩阵逆（我有以下问题：

```
d^T . (A^-1 + B^-1)^-1 . d 
```

其中`d`是一个向量`^T`表示转置，`A`并且`B`是稀疏的）

我想计算 的实际倒数`B`，然后可以线性求解涉及总和的解。调用它的代码如下：

```
cholmod_common Common, *cm ;
cm = &Common ;
cholmod_start (cm) ;
cm->print=5;
Common.supernodal = CHOLMOD_SUPERNODAL ;
double *Tx, x;
int *Ti, *Tj, *Rdeg, *Cdeg,j;
cholmod_triplet *T ;
size_t nrow;           
size_t ncol;           
size_t nnz ;            

nrow=Csize;
ncol=Csize;
nnz=numpulsars*numpulsars*numcoeff;

T = cholmod_allocate_triplet(nrow,ncol,nnz,0,CHOLMOD_REAL, cm) ;
Ti=(int*)T->i;
Tj=(int*)T->j;
Tx=(double*)T->x;

for(int i=0;i<numpulsars;i++){      
            for(int j=0;j<numpulsars;j++){
                    if(i==j){
                            pcorr=1.0;
        }
                    else{   
                            angle=pulsarCartesian[i][0]*pulsarCartesian[j][0] +pulsarCartesian[i][1]*pulsarCartesian[j][1]+pulsarCartesian[i][2]*pulsarCartesian[j][2];
                            pcorr=(1.5*(0.5*(1-angle))*log(0.5*(1-angle)) - 0.25*0.5*(1-angle) + 0.5);
                    }

                    for(int c1=0; c1<numcoeff; c1++){
                                    val= pcorr*powercoeff[c1];
                Ti[T->nnz]=i*numcoeff+c1;
                Tj[T->nnz]=j*numcoeff+c1;
                Tx[T->nnz]=val;
                (T->nnz)++;

                    }
           }
    }

cholmod_sparse *PPFMSparse;
cholmod_factor *L ;
cholmod_dense *spinvK;
PPFMSparse=cholmod_triplet_to_sparse(T,T->nnz,cm);
//  cholmod_print_sparse(PPFMSparse, "PPFMSparse", cm); 
L = cholmod_analyze (PPFMSparse, cm) ;
cholmod_factorize (PPFMSparse, L, cm) ;

cholmod_sparse *PPFMinv; 

PPFMinv=cholmod_spinv(L,cm);
//  cholmod_print_sparse(PPFMinv, "PPFMinv", cm);
spinvK = cholmod_sparse_to_dense(PPFMinv, &Common) ;
cholmod_print_dense(spinvK, "spinvK", cm);
cholmod_free_sparse(&PPFMinv,cm);
cholmod_free_factor (&L, cm) ;
cholmod_free_sparse(&PPFMSparse,cm);
cholmod_free_triplet (&T, cm) ;
cholmod_free_dense (&spinvK, cm) ;
cholmod_finish(cm); 
```

我发现[https://cholmod-extra.readthedocs.org/en/latest/functions.html](https://cholmod-extra.readthedocs.org/en/latest/functions.html)这个函数是用来计算倒数的，但它给了我一些与倒数平方相关的东西，而不是倒数。我只是想知道是否有人有使用它的经验，或者在 C++ 中计算稀疏矩阵的逆矩阵的等价物。

干杯林德利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:39:02.643

我以前使用过[JAMA](http://math.nist.gov/tnt/download.html)。它具有 Cholesky 分解。

# c - 如何设置 gcc 以使用文件扩展名（.c 或 .cpp）来确定正确的编译器/链接器？

> ID：14818466
> 
> 赞同：2
> 
> 时间：2013-02-11T18:27:13.040
> 
> 标签：c, gcc

我有一个简单的、有代表性的 C 程序，存储在一个名为`hello.c`：

```
#include <stdio.h>
int main(void)
{
    printf('Hello, world\n');
    return 0;
} 
```

在我的 Linux 机器上，我尝试使用 gcc 编译程序：

```
gcc hello.c 
```

返回错误：

```
undefined reference to "___gxx_personality_v0" ... etc 
```

正如之前在 C++ 的上下文中[所](https://stackoverflow.com/q/203548/869912) [讨论](https://stackoverflow.com/q/6045809/869912)的，这个问题出现在链接阶段，当 gcc 尝试将 C 库链接到 C++ 程序时，会出现错误。在[其中一个答案](https://stackoverflow.com/a/1626030/869912)中，有人提到扩展名*确实*很重要，并且 gcc`.c`在编译 C 文件时需要扩展名，而在编译 C++ 文件时需要一些其他扩展名（例如`.cpp`）。

**问题：**我如何设置 gcc 以使用文件扩展名来确定使用哪个编译器，因为 gcc 在我的系统上似乎默认为 C++？仅通过文件扩展名指定语言似乎是不够的。如果我使用`-x`标志指定语言，gcc 会按预期运行。

```
gcc -x c hello.c 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:29:16.923

通常，您让自己`make`决定。

GNU Make 内置了隐式规则，可以自动选择正确的编译器。

尝试包含以下内容的 Makefile：

```
all: some_file.o some_other_file.o 
```

然后在同一个目录下放置一个`some_file.cpp`and `some_other_file.c`，gnu make会自动选择正确的编译器。链接器，您可能仍然需要自己提供。混合 C 和 C++ 时，通常最容易与 g++ 链接，如下所示：

```
program.exe: some_file.o some_other_file.o
    g++ -o $@ @^ 
```

这与以下内容相同：

```
program.exe: some_file.o some_other_file.o
    g++ -o program.exe some_file.o some_other_file.o 
```

# desire2learn - Desire2Learn API 验证用户到系统 PHP

> ID：14818475
> 
> 赞同：0
> 
> 时间：2013-02-11T18:27:57.877
> 
> 标签：desire2learn

我有我的 APP ID / APP 密钥并使用 PHP 示例文件对我们安装的 D2L 进行身份验证。我收到返回到示例页面的 UserID 和 UserKey。此时，我使用我的管理员用户 ID 和密码对系统进行身份验证，而不是为此的特定帐户。我可以执行 WhoAmI 和其他几件事，但是，我正在研究如何在此时为 SSO 验证特定用户进入系统？我们有一个自定义门户，我现在通过它向我们的 Angel LMS 验证用户。我希望为 D2L 执行此操作，验证门户已验证的用户并将其传递到 D2L 我的主页。多年来，我使用过各种 API，但这一个很困难，而且文档似乎有限。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:16:50.943

如果我理解正确，目前您的 LMS 用户使用 Angel LMS 作为身份提供者（即它实际上对用户进行身份验证），然后 D2L LMS 使用 IDP 的服务来验证用户身份？当 D2L LMS 使用另一个第三方服务作为 IDP 时，D2L 确实支持使用 Valence Learning Framework API，但环境配置可能有些棘手。

本质上，API 身份验证的入口点（API 客户端获取一组用户密钥必须采取的第一步）调用 D2L LMS 中的 URL，然后重定向到登录用户的过程，并传递一个`?target=`参数包含调用客户端在首次请求用户令牌时提供的回调 URL。

因此，为了让使用第三方 IDP 的 SSO 为 API 调用者工作，该`target`参数需要在用户身份验证链的每个阶段传递，并在每个阶段正确地进行 URL 编码。Valence 文档确实提供了[此过程的概述](http://docs.valence.desire2learn.com/admin/lmsauth.html#sso-authentication-scenarios)。

如果您的特定 LMS 需求与标准用户身份验证方案之一不同，最好让您的 LMS 管理员联系 D2L 的客户支持台并向他们提出事件，特别说明您希望确保您的 LMS 环境使用第三方-party 用户身份验证可以正确设置为使用 Valence 学习框架 API。

# list - 在 SML 中过滤两个列表的困难

> ID：14818478
> 
> 赞同：0
> 
> 时间：2013-02-11T18:28:11.273
> 
> 标签：list, sml

我正在尝试“双重”过滤两个列表，具体取决于痛苦地通过数据类型测试而不使用 HOP 进行递归。以下是我非常丑陋的解决方案尝试......

```
datatype 'a test = Test of ('a -> bool) * string;

fun foo xs lst = 
    let 
        fun foo_bar(x, ls) =
            let                
                val tests = (List.filter (fn (Test(f, str)) => (f x)) ls)
            in
                (List.map (fn (Test(f, str)) => str) tests)
            end 
    in
        (List.map (fn x => foo_bar(x, lst)) xs)
    end; 
```

```
allPass: 'a list -> 'a test list -> 'a test list; 
```

`allPass [1, 2, 40, 150] [positive, even]`应该返回字符串`"pos"`。

目前，我的函数正在返回一个嵌套列表：`[["pos"], ["pos even"], ["pos even"], ["pos even"]]`。有没有一种非递归的方法可以从这个结果中提取“pos”，还是我要以完全错误的方向解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:13:47.150

你正朝着正确的方向前进，但你还没有完全到达那里。这就是我认为你想要的。

获取价值列表和测试列表。返回*所有*值都通过的测试名称列表。

好的，所以我们需要：

1.  过滤测试列表。测试的谓词是所有值都必须通过。
2.  提取通过的测试的名称。

好的，那么我们如何确定列表中的所有值是否都通过了一项测试？很简单，我们使用`List.all`.

```
List.all    : ('a -> bool) -> 'a list -> bool 
```

我们可以定义一个函数：

```
fun allPassesTest xs (Test(f,s)) = List.all f xs 
```

`true`当且仅当 xs 中的所有值都通过测试时，这将返回。现在我们根据这个函数过滤测试列表：

```
fun allPass xs tests = List.filter allPassesTest xs tests 
```

但是，这会返回 a`'a test list`而不是 a `string list`，因此您需要提取名称。

```
fun name (Test(f,s)) = s
fun allPass xs tests = map name (List.filter allPassesTest xs tests) 
```

# eclipse - 如何轻松地将 Eclipse-Plugin Jars 添加到项目中？

> ID：14818482
> 
> 赞同：0
> 
> 时间：2013-02-11T18:28:22.987
> 
> 标签：eclipse, plugins, jar

安装 Eclipse 插件（即 Zest）后，我想知道如何将 Jar 的库添加到我的 Java 项目中。

当然，我可以使用“添加外部 JAR”在我的构建路径设置下添加它们，并在我的程序目录中搜索插件文件夹和 Jar。

但是没有更舒服的方法吗？我在想 Eclipse 中的一些项目菜单说“从插件 XYZ 添加所有库”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:32:49.413

你可以使用 maven 来管理库（很舒服）

# coldfusion - WriteOutput 不会在 html 源代码中产生回车换行

> ID：14818484
> 
> 赞同：1
> 
> 时间：2013-02-11T18:28:26.183
> 
> 标签：coldfusion, coldfusion-9

这太挑剔了，但是嘿...如果我`WriteOutput`在 cfscript 中使用该命令，它不会在输出中放置回车符/换行符。

问：有没有`WriteOutputln()`类似的？

现在，我手动添加`Chr(13)`&`Chr(10)`只是为了格式化源代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T22:35:58.110

在语言中拥有一个函数并没有真正的意义，`writeOutputLn()`因为大多数输出​​都是针对浏览器的，而 CRLF 实际上并不在浏览器中呈现，那么重点是什么？然后可以说“好吧，那就放一个`<br>`”。这使得它在输出标记以外*的情况下没有用处。*它应该是 a`<br>`还是 a `<br/>`？还是一个`<br />`？这非常挑剔，但这只是表明没有真正的单一等价物是“正确”的行为。

那和编写 UDF 是如此简单 - 并且可以根据使用的情况进行微调 - 没有意义。

我认为这回答了你关于为什么它不在语言中的问题。

# java - 类型转换为更具体的类型

> ID：14818486
> 
> 赞同：1
> 
> 时间：2013-02-11T18:28:28.483
> 
> 标签：java, class, inheritance

我有以下问题。假设我有以下两个课程：Bicycle a MountainBike。在 MountainBike 的标题中，我声明：`public class MountainBike extends Bicycle`. MountainBike 类添加了 Bicycle 中不存在的两个字段。因为我一一添加属性（因为我正在使用数据库），所以没有构造函数，而是一个函数，它设置给定字符串标识符和值的属性。我知道可能并非所有属性都已设置并且可能为空，但这对我来说没问题。

现在问题如下。在给定的一点上，我知道它是什么类型的自行车，它是其中一个领域。我想做的是：一旦我知道这个 Bicycle 对象实际上是 MountainBike，我想将它转换为 MountainBike: `MountainBike mb = (MountainBike) bicycle`，但是这会导致运行时 java.lang.ClassCastException: Bicycle cannot be投射到山地自行车。

我确信这是可能的（不使用将整个自行车作为参数的构造函数）。我怎样才能做到这一点？

谢谢！

赫克托

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T18:32:39.223

就像 Jon Skeet 在他的评论中所说的那样，如果它不是 a`MountainBike`并且只是一个 plain ，你就不能施放它`Bicycle`。您*可以*做的是创建一个构造函数，`MountainBike`该构造函数将`Bicycle`其作为参数：

```
public MountainBike(Bicycle bicycle) {
    // Copy bicycle's properties
} 
```

而是调用它：

```
MountainBike mb = new MountainBike(Bicycle bicycle); 
```

如果`MountainBike`由于某种原因无法修改类，还可以创建`static`工厂方法：

```
public class MountainBikeFactory {

    public static MountainBike createMountainBike(Bicycle bicycle) {
        MountainBike mb = new MountainBike();
        // Copy bicycle's properties
        return mb;
    }
} 
```

并称之为：

```
MountainBike mb = MountainBikeFactory.create(bicycle); 
```

**编辑：**查看您发布的作为对该问题的评论的信息后，您似乎可以尝试构建器模式。构建器将包含所有属性作为变量（是的，它将很长，有 100 多个变量），当您从文件中发现属性时，将它们设置在构建器上。然后，最后，当您调用构建器的`build()`方法时，让它解析要创建的自行车类型，并使用多态性来处理您创建的自行车的属性组。

例如：

```
public class BikeBuilder {
    private String model;
    private String wheelSize;
    private String shocks;
    private String racingHandleBarType;

    // returns "this" so you can chain calls, common in builders, not necessary
    public BikeBuilder setModel(String model) {
        this.model = model;
        return this;
    }

    // Other setters

    public Bike build() {
        Bike bike;
        // Determine which kind of bike it is and create it
        if (shocks != null) {
            bike = new MountainBike();
            handleMountainBike((MountainBike) bike);
        } else if (racingHandleBarType != null) {
            bike = new RacingBike();
            handleRacingBike((RacingBike) bike);
        } else {
            bike = new Bike();
        }
        handleCommonAttributes(bike);
        return bike;
    }

    // All bikes have these attributes
    private void handleCommonAttributes(Bike bike) {
        bike.setModel(model);
        bike.setWheelSize(wheelSize);
    }

    private void handleMountainBike(MountainBike bike) {
        bike.setShocks(shocks);
    }

    private void handleRacingBike(RacingBike bike) {
        bike.setRacingHandleBarType(racingHandleBarType);
    }
} 
```

这使您可以即时构建自行车并在读取文件结束时而不是开始时决定其类型。它充当一种容器。如果您有多种扩展类型，`Bike`您可以为它们创建新方法。这至少会让你开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T18:32:31.327

如果您怀疑施法之前可能会失败检查：

```
if (bike instanceof MountainBike) {
    MountainBike mb = (MountainBike) bike
} else {
    String msg = "Wrong bike, expected Mountainbike but was:" + bike.getClass();

    System.out.println(msg);
    throw new IllegalArgumentException(msg);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T18:36:44.540

您不能仅仅因为 MountainBike 扩展 Bike 就将 Bike 转换为 MountainBike。这是一个例子：

```
Bike bike = new MountainBike();
MountainBike mb = (MountainBike) bike; //works

Bike bike = new Bike();
MountainBike mb = (MountainBike) bike; //ClassCastException 
```

# vb6 - 将 VB6 程序编译为 Native 或 POSIX 应用程序？

> ID：14818490
> 
> 赞同：2
> 
> 时间：2013-02-11T18:28:40.217
> 
> 标签：vb6, compilation, linker, subsystem

最近我在我的旧 VB6 上进行试验，发现有一个奇怪的东西。
使用 ProcMon 我发现在编译时，VB6 使用如下参数运行 Link.exe：
`LINK "D:\Folder\Form1.OBJ" "D:\Folder\Project1.OBJ"... /SUBSYSTEM:WINDOWS,4.0 ...` 我`Link.exe /?`在 cmd 中编写并找到了

```
link.exe /?
usage: LINK [options] [files] [@commandfile]      
    options:      
    ...    
    /SUBSYSTEM:{NATIVE|WINDOWS|CONSOLE|WINDOWSCE|POSIX} 
```

默认情况下，VB6 使用参数 /SUBSYSTEM:WINDOWS 进行编译。
但是我可以将我的 VB6 代码编译为 Native 或 POSIX 子系统应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T21:34:47.910

这只是在生成的 exe 文件中设置了一点。Visual Basic 使用 Microsoft 的标准链接器，该链接器也用于 C/C++，这就是标志存在的原因。

所以是的，您可以使用这些设置编译它，但我确信生成的 exe 不会在本机模式或 Posix 子系统中运行。

有关这些设置的更多信息，您可能需要查看有关 PE 文件格式的信息并查看 DUMPBIN 和 EDITBIN 工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T00:39:30.477

VB 应用程序使用 Win32 调用，因此即使您使用仅控制台的应用程序，您的应用程序也不可能工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T21:54:23.260

控制台是唯一有用的替代子系统。Posix 甚至不存在，因为 Win2K 和 Native 用于内核模式驱动程序。

如果这对你来说是新闻，我想知道你为什么要玩 ProcMon？可怕的。

# css - Twitter Bootstrap：内联选择不对齐

> ID：14818491
> 
> 赞同：-2
> 
> 时间：2013-02-11T18:28:42.237
> 
> 标签：css, twitter-bootstrap

见：http: [//jsfiddle.net/aGy2P/](http://jsfiddle.net/aGy2P/)

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet">
    </head>
    <body>

<div class="container-fluid">
    <div class="row-fluid">
        <div class="span2">
            <form method="post" action="">
                <fieldset>
                    <div class="control-group">
                        <div class="controls">
                            <select class="span6" name="range-from:price" id="price_from">
                                <option value="">Min Price</option>                                 
                                <option value="2000">$2K</option>
                                <option value="4000">$4K</option>
                                <option value="6000">$6K</option>
                                <option value="8000">$8K</option>
                                <option value="10000">$10K</option>
                                <option value="15000">$15K</option>
                                <option value="20000">$20K</option>
                                <option value="25000">$25K</option>
                            </select>
                            <select class="span6 pull-right" name="range-to:price" id="price_to">
                                <option value="">Max Price</option>
                                    <option value="2000">$2K</option>
                                <option value="4000">$4K</option>
                                <option value="6000">$6K</option>
                                <option value="8000">$8K</option>
                                <option value="10000">$10K</option>
                                <option value="15000">$15K</option>
                                <option value="20000">$20K</option>
                                <option value="500000">$25K+</option>
                            </select>
                        </div>
                    </div>

                    <div class="control-group">
                        <div class="controls">
                            <select class="span6" name="range-from:model_year" id="model_year_from">
                                <option value="">Min Year</option>                                  
                                <option value="1990">1990</option>
                                <option value="2000">2000</option>
                                <option value="2005">2005</option>
                                <option value="2010">2010</option>
                                <option value="2011">2011</option>
                                <option value="2012">2012</option>
                                <option value="2013">2013</option>
                            </select>
                            <select class="span6 pull-right" name="range-to:model_year" id="model_year_to">
                                <option value="">Max Year</option>
                                <option value="1990">1990</option>
                                <option value="2000">2000</option>
                                <option value="2005">2005</option>
                                <option value="2010">2010</option>
                                <option value="2011">2011</option>
                                <option value="2012">2012</option>
                                <option value="2013">2013</option>
                            </select>
                        </div>
                    </div>
                </fieldset>
            </form>             
        </div>
        <div class="span8">
        </div>
        <div class="span2">         
        </div>
    </div>
</div>
    </body>
</html> 
```

如果您使结果窗格足够宽，您将看到选择字段尝试进入内联布局。我对此有一点问题，但在 JSFiddle 中并没有清楚地看到它。

我的屏幕截图

![铬合金](../Images/f67dd39b17534443f11b192d3882b9f6.png)<-- 来自 Chrome，正确对齐

但是，在FF和IE中，“Max Year”选择不与“Min Year”水平对齐；相反，它要低得多，如下所示：

![在此处输入图像描述](../Images/52edbbd566f86d1e7f94a4e49ee5e4a0.png)<-- 来自 FF

最初，我认为这可能与“Min Year”或“Max Year”的内容有关，所以我开始对其进行调整。但没有什么能解决它。当我删除“Min Price”和“Max Price”的节点时，“Min Year”和“Max Year”突然就OK了。

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:42:22.840

那么问题如下：

```
 <div class="span2">
    ...other code
        <div class="span6">
             your dropdown    
        </div>
     ...other code
    </div> 
```

您正在尝试将 span6 放入 span2 容器中，该容器不足以容纳它。

您需要将 span2 更改为 span12，如下所示：

[http://jsfiddle.net/3N754/](http://jsfiddle.net/3N754/)

或者请注意，如果您想将两个 span6 放在一个 span 2 中，您需要有更多`<div class='row-fluid'>`

例如

```
<div class="row-fluid">
  <div class="span12">
    Fluid 12
    <div class="row-fluid">
      <div class="span6">
        Fluid 6
        <div class="row-fluid">
          <div class="span6">Fluid 6</div>
          <div class="span6">Fluid 6</div>
        </div>
      </div>
      <div class="span6">Fluid 6</div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:01:39.840

我也相信问题是元素之间的空白（第二对`select`标签之间有一个）。它们在元素中确实很重要，`inline`因为`inline-block`当它们超出容器宽度时，它们会强制元素像单词一样换行。两个简单的解决方案是，要么删除元素之间的空格，要么`white-space:nowrap;`在父元素上添加规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T05:55:11.587

您包含的 bootstrap-combined.min.css 文件包括 Bootstrap Responsive。编译后的响应式样式对于 .span* 元素具有非常精确的宽度百分比。在使用 Chrome 中的代码和开发人员工具后，我能够看到不同的浏览器宽度确实会产生不同的结果。

前任。1：浏览器宽度至少1200px

![1200+像素视口](../Images/53b0168c6b59291658be50cd9ceffd2f.png)

前任。2：浏览器宽度在 786 到 969px 之间

![768-969px 视口](../Images/19e0f546b4c368a64ae1ea2050b0b269.png)

似乎这些宽度是为 div 制作的，没有考虑选择框的多余宽度。

css ninja 可能有比这更好的解决方案。但是将您的选择宽度设置得稍小一点应该可以解决问题，而不会使表单看起来太糟糕。

```
<style type="text/css">
  .row-fluid select.span6 {
    width: 48%;
  }
</style> 
```

48.0% 对我来说 select.span6 似乎不错，但由于这些是本机选择框，宽度可能因操作系统而异。（我使用的是 OSX。）使用上面的不同值，看看什么最适合所有可能的浏览器宽度。

此外，如果您不需要响应功能（即，如果您不关心您的网站是否针对移动设备进行了优化），请仅包含常规引导 css。然后，您的网站将针对所有视口以一种方式显示，您不必担心它在所有设备上的外观。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T23:33:03.013

这种问题通常是由元素之间的空间引起的。

因为如果一个元素占 50%，而第二个元素也占 50%，那么它们之间的简单空间会使它们大于 100%。

通常你可以：

*   删除元素之间的空格/分隔线（在这种情况下，您的选择）
*   将容器的字体大小设置为 0，以便空格“不占用空格”。:)

这可能不是您特定情况的解决方案，但可能是其他有相同问题的解决方案。

让我知道。

编辑：

请看这个修改过的小提琴：我在 MacOs 上使用 chrome，我们知道结果可能会有所不同，但是当我尝试你的示例时，每个选择都在不同的行上。

在此处的小提琴[http://jsfiddle.net/3nJYY/1/](http://jsfiddle.net/3nJYY/1/)中，我删除了第一组选择之间的空格 /breakline 。现在它们显示在同一行（您要查找的内容），而第二组中的选择被放置在不同的行上。

这是重要的部分，请注意，我已经删除了关闭选择和第二个选择之间的任何空格或断线：

```
<div class="control-group">
    <div class="controls">
        <select class="span6" name="range-from:price" id="price_from">
            ...
        </select><select class="span6 pull-right" name="range-to:price" id="price_to">
            ...
        </select>
    </div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T11:48:02.073

首先，您放置了一个不会重现您的问题的 Jsfiddle（还有另一个问题：widtch 太小），我不明白这一点。

无论如何，您将 span6 放在您的选择上：`<select class="span6"`

但是你没有把它们放在一个`<div class="row-fluid"></div>`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T17:01:21.127

我认为您的问题是，当您将 .span6 样式应用于选择时，浏览器将应用 48,.... 百分比大小，但随后会添加一些额外长度来呈现组件，使其太长而无法适应，因此滑到另一个下方。

作为一种解决方法，我建议将选择包装在 div 中，并将 .span6 类应用于 div，以便您确定浏览器呈现正确的长度。然后，您必须为您的选择添加 100% 的宽度以适合您的 div

[http://jsfiddle.net/SkMZ5/2/](http://jsfiddle.net/SkMZ5/2/)

例子 ：

```
<div class="controls">
    <div class="span6">
        <select style="width:100%" name="range-from:model_year" id="model_year_from">
            <option value="">Min Year</option>              
            <option value="1990">1990</option>
            <option value="2000">2000</option>
            <option value="2005">2005</option>
            <option value="2010">2010</option>
            <option value="2011">2011</option>
            <option value="2012">2012</option>
            <option value="2013">2013</option>
        </select>
    </div>

    <div class="span6 pull-right">
        <select style="width:100%" name="range-to:model_year" id="model_year_to">
            <option value="">Max Year</option>
            <option value="1990">1990</option>
            <option value="2000">2000</option>
            <option value="2005">2005</option>
            <option value="2010">2010</option>
            <option value="2011">2011</option>
            <option value="2012">2012</option>
            <option value="2013">2013</option>
        </select>
    </div>
</div> 
```

# jquery - 如何允许 CORS /Access-Control-Allow-Origin

> ID：14818498
> 
> 赞同：0
> 
> 时间：2013-02-11T18:29:16.063
> 
> 标签：jquery

抱歉这个愚蠢的问题，但我如何允许“访问控制允许来源？”

我希望页面 A（我从中获取内容的页面）允许页面 B（我需要将内容拉入的地方）访问。奇怪的是，它们都在同一台服务器上，一个是 wordpress 页面，一个是静态的。不知道代码应该去哪里才能实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:02:02.760

我建议将 url 选项修改为相对路径以避免此问题。

```
$.ajax(function(){
    url: /*"http://www.mydomain.com*/"/foo.html",
    ....
}); 
```

# xml - XSLT 只有一个模板匹配？

> ID：14818500
> 
> 赞同：0
> 
> 时间：2013-02-11T18:29:16.237
> 
> 标签：xml, xslt

我仍然对 XSLT 感到困惑，而且我在使用 XSLT 模板时遇到了麻烦。我正在尝试制作一个模板来匹配我的 XML 数据的每个缩进级别，但由于某种原因，无论我尝试应用模板调用的哪种变体，我都只能打印第一个缩进级别。 . 或者更确切地说，它只应用一个缩进级别，就好像它匹配出现的第一个模式并忽略其余部分。有人可以判断我的 XSLT 语法是否有问题吗？同样的方法也用于其他一些数据，并且效果很好。

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" omit-xml-declaration="no" indent="yes" />
    <xsl:strip-space elements="*" />

    <xsl:template match="/">
        <config>
            <xsl:apply-templates match="/Objects/*/*" /> <!-- Matches template #1 -->
            <xsl:apply-templates match="/Objects/*/*/*" /> <!-- Matches template #2 -->
            <xsl:apply-templates match="/Objects/*/*/*/*" /> <!-- Matches template #3 -->
            <xsl:apply-templates match="/Objects/*/*/*/*/*" /> <!-- Matches template #4 -->
            <xsl:apply-templates match="/Objects/*/*/*/*/*/*" /> <!-- Matches template #5 -->
            <xsl:apply-templates match="/Objects/*/*/*/*/*/*/*" /> <!-- Matches template #6 -->
        </config>
    </xsl:template>

    <!-- <xsl:template match="Object">
        <element>
            <typefield>Object</typefield>
            <xsl:call-template name="elementPrinter" />
        </element>
    </xsl:template> -->

    <!-- Begin Template #1 -->
    <xsl:template match="Object/*">
        <element>
            <typefield>
                <xsl:value-of select="@Name" />
            </typefield>
            <xsl:call-template name="elementPrinter" />
        </element>
    </xsl:template>
    <!-- End Template #1 -->

    <!-- Begin Template #2 -->
    <xsl:template match="Object/*/*">
        <element2>
            <typefield>
                <xsl:value-of select="@Name" />
            </typefield>
            <xsl:call-template name="parentIDPrinter" />
            <xsl:call-template name="elementPrinter" />
        </element2>
    </xsl:template>
    <!-- End Template #2 -->

    <!-- Begin Template #3 -->
    <xsl:template match="Object/*/*/*">
        <element>
            <typefield>
                <xsl:value-of select="@Name" />
            </typefield>
            <xsl:call-template name="gparentIDPrinter" />
            <xsl:call-template name="parentIDPrinter" />
            <xsl:call-template name="elementPrinter" />
        </element>
    </xsl:template>
    <!-- End Template #3 -->

    <!-- Begin Template #4 -->
    <xsl:template match="Object/*/*/*/*">
        <element>
            <typefield>
                <xsl:value-of select="@Name" />
            </typefield>
            <xsl:call-template name="gparentIDPrinter" />
            <xsl:call-template name="parentIDPrinter" />
            <xsl:call-template name="elementPrinter" />
        </element>
    </xsl:template>
    <!-- End Template #4 -->

    <!-- Begin Template #5 -->
    <xsl:template match="Object/*/*/*/*/*">
        <element>
            <typefield>
                <xsl:value-of select="@Name" />
            </typefield>
            <xsl:call-template name="gparentIDPrinter" />
            <xsl:call-template name="parentIDPrinter" />
            <xsl:call-template name="elementPrinter" />
        </element>
    </xsl:template>
    <!-- End Template #5 -->

    <!-- Begin Template #6 -->
    <xsl:template match="Object/*/*/*/*/*/*">
        <element>
            <typefield>
                <xsl:value-of select="@Name" />
            </typefield>
            <xsl:call-template name="gparentIDPrinter" />
            <xsl:call-template name="parentIDPrinter" />
            <xsl:call-template name="elementPrinter" />
        </element>
    </xsl:template>
    <!-- End Template #6 -->

    <!-- Prints all elements within the matching node. -->
    <xsl:template name="elementPrinter">
        <xsl:for-each select="*">
            <xsl:if test="text() != ''">
                <xsl:choose>
                    <xsl:when test="@Name">
                        <xsl:variable name="eName">
                            <xsl:value-of select="@Name" />
                        </xsl:variable>

                        <xsl:element name="{$eName}">
                            <xsl:value-of select="text()" />
                        </xsl:element>
                    </xsl:when>
                    <xsl:when test="not(@Name)">
                        <xsl:variable name="eName">
                            <xsl:value-of select="@Type" />
                        </xsl:variable>

                        <xsl:element name="{$eName}">
                            <xsl:value-of select="text()" />
                        </xsl:element>
                    </xsl:when>
                </xsl:choose>
            </xsl:if>
        </xsl:for-each>
    </xsl:template>

    <!-- Prints a tag containing the name of the node's parent. -->
    <xsl:template name="parentIDPrinter">
        <xsl:for-each select="../../*[1]">
            <xsl:choose>
                <xsl:when test="./@Name">
                    <xsl:variable name="pName">
                        <xsl:value-of select="@Name" />
                    </xsl:variable>

                    <xsl:element name="parent">
                        <xsl:value-of select="$pName" />
                    </xsl:element>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:variable name="pName">
                        <xsl:value-of select="@Type" />
                    </xsl:variable>

                    <xsl:element name="parent">
                        <xsl:value-of select="$pName" />
                    </xsl:element>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:for-each>
    </xsl:template>

    <!-- Prints a tag containing the name of the node's grandparent. -->
    <xsl:template name="gparentIDPrinter">
        <xsl:for-each select="../../../../*[1]">
            <xsl:choose>
                <xsl:when test="./@Name">
                    <xsl:variable name="pName">
                        <xsl:value-of select="@Name" />
                    </xsl:variable>

                    <xsl:element name="grandparent">
                        <xsl:value-of select="$pName" />
                    </xsl:element>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:variable name="pName">
                        <xsl:value-of select="@Type" />
                    </xsl:variable>

                    <xsl:element name="grandparent">
                        <xsl:value-of select="$pName" />
                    </xsl:element>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

不幸的是，我无法发布示例数据，但格式几乎就是这样。

```
<Objects>
    <Object>
        <Property Name="whatever">
            <Property Name="whatever1.1">whatever</Property>
            <Property Name="whatever1.2">whatever2</Property>
        </Property>
        <Property Name="whatever">
            <Property Name="whatever1.1">whatever</Property>
            <Property Name="whatever1.2">whatever2</Property>
        </Property>
    </Object>
    <Object>
        <Property Name="whatever">
            <Property Name="whatever1.1">whatever</Property>
            <Property Name="whatever1.2">whatever2</Property>
        </Property>
        <Property Name="whatever">
            <Property Name="whatever1.1">whatever</Property>
            <Property Name="whatever1.2">whatever2</Property>
        </Property>
    </Object>
</Objects> 
```

当我只留下第一个 apply-templates 调用时，它给了我第一层，我应该期待，这是所有第一层属性标签......但是如果我放入下一行，它应该匹配模板# 2，它所做的只是在模板 1 的模式之后打印完全相同的数据，而不是匹配模板 2 的模式数据。为什么它忽略了我的其他模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:54:32.993

您的 XSLT 无效 -`apply-templates`有一个`select`属性，而不是一个`match`属性。一旦修复，它会产生以下结果：

```
<config>
  <element>
    <typefield>whatever</typefield>
    <whatever1.1>whatever</whatever1.1>
    <whatever1.2>whatever2</whatever1.2>
  </element>
  <element>
    <typefield>whatever</typefield>
    <whatever1.1>whatever</whatever1.1>
    <whatever1.2>whatever2</whatever1.2>
  </element>
  <element>
    <typefield>whatever</typefield>
    <whatever1.1>whatever</whatever1.1>
    <whatever1.2>whatever2</whatever1.2>
  </element>
  <element>
    <typefield>whatever</typefield>
    <whatever1.1>whatever</whatever1.1>
    <whatever1.2>whatever2</whatever1.2>
  </element>
  <element2>
    <typefield>whatever1.1</typefield>
    <parent>whatever</parent>
  </element2>
  <element2>
    <typefield>whatever1.2</typefield>
    <parent>whatever</parent>
  </element2>
  <element2>
    <typefield>whatever1.1</typefield>
    <parent>whatever</parent>
  </element2>
  <element2>
    <typefield>whatever1.2</typefield>
    <parent>whatever</parent>
  </element2>
  <element2>
    <typefield>whatever1.1</typefield>
    <parent>whatever</parent>
  </element2>
  <element2>
    <typefield>whatever1.2</typefield>
    <parent>whatever</parent>
  </element2>
  <element2>
    <typefield>whatever1.1</typefield>
    <parent>whatever</parent>
  </element2>
  <element2>
    <typefield>whatever1.2</typefield>
    <parent>whatever</parent>
  </element2>
</config> 
```

正如您在此处看到的，正在使用您的第二个*模板*。有 8 个实例`<element2>`。也许您没有注意到它们，因为它们发生在所有`<element>`s. 所有先出现的原因`<elements>`是您先将模板应用于所有一级`<Property>`节点，然后将模板应用于下一级。如果您希望每个节点的子节点在其父节点之后列出，您应该像这样编写您的 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" omit-xml-declaration="no" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="/">
    <config>
      <xsl:apply-templates select="/Objects/*/*" />
      <!-- Matches template #1 -->
    </config>
  </xsl:template>

  <!-- <xsl:template match="Object">
        <element>
            <typefield>Object</typefield>
            <xsl:call-template name="elementPrinter" />
        </element>
    </xsl:template> -->

  <!-- Begin Template #1 -->
  <xsl:template match="Object/*">
    <element>
      <typefield>
        <xsl:value-of select="@Name" />
      </typefield>
      <xsl:call-template name="elementPrinter" />
    </element>
    <xsl:apply-templates select="*" />
  </xsl:template>
  <!-- End Template #1 -->

  <!-- Begin Template #2 -->
  <xsl:template match="Object/*/*">
    <element2>
      <typefield>
        <xsl:value-of select="@Name" />
      </typefield>
      <xsl:call-template name="parentIDPrinter" />
      <xsl:call-template name="elementPrinter" />
    </element2>
    <xsl:apply-templates select="*" />
  </xsl:template>
  <!-- End Template #2 -->

  <!-- Begin Template #3 -->
  <xsl:template match="Object/*/*/*">
    <element>
      <typefield>
        <xsl:value-of select="@Name" />
      </typefield>
      <xsl:call-template name="gparentIDPrinter" />
      <xsl:call-template name="parentIDPrinter" />
      <xsl:call-template name="elementPrinter" />
    </element>
    <xsl:apply-templates select="*" />
  </xsl:template>
  <!-- End Template #3 -->

  <!-- Begin Template #4 -->
  <xsl:template match="Object/*/*/*/*">
    <element>
      <typefield>
        <xsl:value-of select="@Name" />
      </typefield>
      <xsl:call-template name="gparentIDPrinter" />
      <xsl:call-template name="parentIDPrinter" />
      <xsl:call-template name="elementPrinter" />
    </element>
    <xsl:apply-templates select="*" />
  </xsl:template>
  <!-- End Template #4 -->

  <!-- Begin Template #5 -->
  <xsl:template match="Object/*/*/*/*/*">
    <element>
      <typefield>
        <xsl:value-of select="@Name" />
      </typefield>
      <xsl:call-template name="gparentIDPrinter" />
      <xsl:call-template name="parentIDPrinter" />
      <xsl:call-template name="elementPrinter" />
    </element>
    <xsl:apply-templates select="*" />
  </xsl:template>
  <!-- End Template #5 -->

  <!-- Begin Template #6 -->
  <xsl:template match="Object/*/*/*/*/*/*">
    <element>
      <typefield>
        <xsl:value-of select="@Name" />
      </typefield>
      <xsl:call-template name="gparentIDPrinter" />
      <xsl:call-template name="parentIDPrinter" />
      <xsl:call-template name="elementPrinter" />
    </element>
    <xsl:apply-templates select="*" />
  </xsl:template>
  <!-- End Template #6 -->

  <!-- Prints all elements within the matching node. -->
  <xsl:template name="elementPrinter">
    <xsl:for-each select="*">
      <xsl:if test="text() != ''">
        <xsl:choose>
          <xsl:when test="@Name">
            <xsl:variable name="eName">
              <xsl:value-of select="@Name" />
            </xsl:variable>

            <xsl:element name="{$eName}">
              <xsl:value-of select="text()" />
            </xsl:element>
          </xsl:when>
          <xsl:when test="not(@Name)">
            <xsl:variable name="eName">
              <xsl:value-of select="@Type" />
            </xsl:variable>

            <xsl:element name="{$eName}">
              <xsl:value-of select="text()" />
            </xsl:element>
          </xsl:when>
        </xsl:choose>
      </xsl:if>
    </xsl:for-each>
  </xsl:template>

  <!-- Prints a tag containing the name of the node's parent. -->
  <xsl:template name="parentIDPrinter">
    <xsl:for-each select="../../*[1]">
      <xsl:choose>
        <xsl:when test="./@Name">
          <xsl:variable name="pName">
            <xsl:value-of select="@Name" />
          </xsl:variable>

          <xsl:element name="parent">
            <xsl:value-of select="$pName" />
          </xsl:element>
        </xsl:when>
        <xsl:otherwise>
          <xsl:variable name="pName">
            <xsl:value-of select="@Type" />
          </xsl:variable>

          <xsl:element name="parent">
            <xsl:value-of select="$pName" />
          </xsl:element>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:for-each>
  </xsl:template>

  <!-- Prints a tag containing the name of the node's grandparent. -->
  <xsl:template name="gparentIDPrinter">
    <xsl:for-each select="../../../../*[1]">
      <xsl:choose>
        <xsl:when test="./@Name">
          <xsl:variable name="pName">
            <xsl:value-of select="@Name" />
          </xsl:variable>

          <xsl:element name="grandparent">
            <xsl:value-of select="$pName" />
          </xsl:element>
        </xsl:when>
        <xsl:otherwise>
          <xsl:variable name="pName">
            <xsl:value-of select="@Type" />
          </xsl:variable>

          <xsl:element name="grandparent">
            <xsl:value-of select="$pName" />
          </xsl:element>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:for-each>
  </xsl:template>
</xsl:stylesheet> 
```

`<xsl:apply-templates select="*" />`请注意我如何在您的 6 个模板的末尾添加一个。我认为还有其他方法可以改进此 XSLT，但由于它似乎只是一个示例，我将把它留给另一个问题。

我认为你的逻辑在这里也被打破了：

```
<xsl:for-each select="../../*[1]"> 
```

和这里：

```
<xsl:for-each select="../../../../*[1]"> 
```

如果你想切换到父母和祖父母的上下文，你应该使用：

```
<xsl:for-each select=".."> 
```

和

```
<xsl:for-each select="../.."> 
```

# php - 如何在 Zend 框架中下载 .zip？

> ID：14818501
> 
> 赞同：-3
> 
> 时间：2013-02-11T18:29:19.310
> 
> 标签：php

我正在使用现有的应用程序，我只能下载 .pdf 和 .ppt 文件。

我正在使用 Zend 1.11-6

我在哪里可以找到更改允许下载哪些文件的设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:35:40.517

这真的与 Zend Framework 无关。但...

在 PHP 中，当您想要将文件下载到服务器时，使用[file_get_contents](http://www.php.net/manual/en/function.file-get-contents.php)作为“数据”参数执行[file_put_contents 。](http://php.net/manual/en/function.file-put-contents.php)

# python - python程序中的错误

> ID：14818504
> 
> 赞同：-5
> 
> 时间：2013-02-11T18:29:30.650
> 
> 标签：python

我尝试了这个简单的 Python 程序：

```
x == 3
打印 x

```

但我收到此错误：

```
回溯（最近一次通话最后）：
  文件“”，第 1 行，在
NameError：名称“x”未定义

```

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T18:30:32.237

`==`是为了比较，不是赋值。你在问 x 是否等于 3，但还没有告诉 Python x 是什么。

你要这个：

```
x = 3
print x 
```

# android - 如何在 Emulator 的 ExternalStorage 上写入

> ID：14818507
> 
> 赞同：0
> 
> 时间：2013-02-11T18:29:44.530
> 
> 标签：android, android-file

我正在尝试在 mnt/sdcard/ 上写入文件夹（制作文件夹），但没有在模拟器外部存储上制作目录。

有什么方法可以在模拟器的外部存储上创建文件夹和文件

代码：

```
File file=new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/"+"myNewDir");
        success =file.mkdir(); 
```

如果（！成功）

//未创建

艾尔

//创建

# android - 罐子不匹配！动作栏 sherlock 和 facebook sdk

> ID：14818509
> 
> 赞同：3
> 
> 时间：2013-02-11T18:29:49.780
> 
> 标签：android, facebook

我正在编写一个使用 action bar sherlock 和 facebook sdk 的应用程序。因此我将这两个库导入到我的项目中，我得到并错误说我有两个 android-support-v4.jar 罐子

“在依赖列表中找到了2个版本的android-support-v4.jar，但并非所有版本都相同（检查仅基于SHA-1）。此时所有版本的库必须相同。 "

我能做些什么？我可以把其中一个罐子放进另一个图书馆吗？它们应该是相同的，但是它们的大小是不同的。我不想去更改/删除源代码中的库。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T11:44:32.767

发生 Jar 不匹配问题是因为`android-support-v4.jar`依赖列表中有 2 个版本，其中一个包含在`Facebook SDK`库中，另一个包含在库中`ActionBarSherlock`。

解决此问题的方法是`android-support-v4.jar`从这两个库中的一个中删除并复制另一个`android-support-v4.jar`而不是已删除的库，这样您将确保两个库中的 jar 文件版本相同，并且您将获得构建错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:07:22.167

添加一个作为罐子，另一个作为库。我仍然有两个不同的 android-support-v4.jar，但编译器似乎可以接受它。所以看起来每个库都使用自己的android-support-v4.jar。

# objective-c - UIScrollView 旋转后仅显示部分 UIView

> ID：14818511
> 
> 赞同：3
> 
> 时间：2013-02-11T18:29:54.967
> 
> 标签：objective-c, ios6, autolayout

这是我在 Stack Overflow 上的第一篇文章，我是 iOS 初学者，所以请多多包涵！

我有一个示例应用程序，其中在父 UIView（topView）中有三个 UIView（headerView、scrollViewContainer 和 bodyView），并且所有这些视图都是在代码中创建的。topView 被添加到在 storyboard 中创建的 UIScrollView (pageScrollView)。

pageScrollView 正在填充 iPhone 的全屏，我使用了 Autolayout。该应用程序仅包含下面所示的 ViewController.h 和伴随的 .m 文件，以及 Appdelegate.x。我想我是从单一视图应用程序模板开始的。我使用的是 iOS 6 和 Xcode 4.6，但我也尝试了 4.5。

我试图尽可能多地删除与此问题无关的其他代码。

问题：当应用程序启动时，它会正确显示所有视图，并且 scrollView 允许按预期查看所有三个视图。但是在旋转到横向后，scrollView 会以某种方式偏移内容。例如：留在顶部并旋转 = 内容看起来不错，但向下滚动一点并旋转会使内容的顶部不显示。

我尝试过的：我在网上搜索过帮助，但没有找到任何似乎对我有帮助的东西。我已经添加了各种数据的日志记录，例如 origin 和 contentSize，并且还尝试设置其中一些但没有成功。我还使用了 'po [[UIWindow keyWindow] _autolayoutTrace]' 来确保约束正常。

我看不出我做错了什么。我的代码中是否缺少任何明显的东西？

提前致谢！

这是 ViewController.m：

```
#import "ViewController.h"

@interface ViewController ()
{
    UIView *topView;
    UIView *headerView;
    UIView *bodyView;
    UIView *scrollViewContainer;

    UIInterfaceOrientation newOrientation;
    CGFloat bodyViewHeight;
    CGSize newBounds;
    float pictureScrollHeight;
}
@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    newBounds = [self sizeInOrientation:[UIApplication sharedApplication].statusBarOrientation];

    newOrientation = [UIApplication sharedApplication].statusBarOrientation;
    bodyViewHeight = 1200; // The height of the body view varies in size depending on orientation

    self.pageScrollView.translatesAutoresizingMaskIntoConstraints = NO;

    topView = [[UIView alloc] init];
    [topView setBackgroundColor:[UIColor clearColor]];
    topView.translatesAutoresizingMaskIntoConstraints = NO;
    [self.pageScrollView addSubview:topView];

    headerView = [[UIView alloc] init];
    [headerView setBackgroundColor:[UIColor redColor]];
    headerView.translatesAutoresizingMaskIntoConstraints = NO;
    [topView addSubview:headerView];

    scrollViewContainer = [[UIView alloc] init];
    [scrollViewContainer setBackgroundColor:[UIColor blueColor]];
    scrollViewContainer.translatesAutoresizingMaskIntoConstraints = NO;
    [topView addSubview:scrollViewContainer];

    bodyView = [[UIView alloc] init];
    [bodyView setBackgroundColor:[UIColor greenColor]];
    bodyView.translatesAutoresizingMaskIntoConstraints = NO;
    [topView addSubview:bodyView];

    [self updateViewConstraints];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)updateViewConstraints
{
    [super updateViewConstraints];

    // Remove old constraints
    [self.view removeConstraints:self.view.constraints];
    [self.pageScrollView removeConstraints:self.pageScrollView.constraints];
    [topView removeConstraints:topView.constraints];
    [scrollViewContainer removeConstraints:scrollViewContainer.constraints];

    if ((newOrientation == UIDeviceOrientationLandscapeLeft) || (newOrientation == UIDeviceOrientationLandscapeRight)) {
        pictureScrollHeight = 300;
    } else {
        pictureScrollHeight = 203;
    }

    [headerView setNeedsDisplay];
    [bodyView setNeedsDisplay];

    CGFloat topViewHeight = bodyViewHeight + 55 + pictureScrollHeight;

    //self.pageScrollView = _pageScrollView
    NSDictionary *viewsDict = NSDictionaryOfVariableBindings(_pageScrollView, topView, headerView, bodyView, scrollViewContainer);
    NSDictionary *metricsDict = @{@"topViewHeight": [NSNumber numberWithFloat:topViewHeight],
                                  @"newBoundsWidth": [NSNumber numberWithFloat:newBounds.width],
                                  @"pictureScrollHeight": [NSNumber numberWithFloat:pictureScrollHeight],
                                  @"bodyViewHeight": [NSNumber numberWithFloat:bodyViewHeight]};

    // pageScrollView - child to self.view
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-0-[_pageScrollView]-0-|" options:0 metrics:nil views:viewsDict]];
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-0-[_pageScrollView]-0-|" options:0 metrics:nil views:viewsDict]];

    // topView - child to pageScrollView
    [self.pageScrollView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-0-[topView(newBoundsWidth)]-0-|" options:0 metrics:metricsDict views:viewsDict]];
    [self.pageScrollView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-0-[topView(topViewHeight)]-0-|" options:0 metrics:metricsDict views:viewsDict]];

    // headerView - child to topView
    [topView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-0-[headerView]-0-|" options:0 metrics:nil views:viewsDict]];
    [topView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-0-[headerView(55.0)]" options:0 metrics:nil views:viewsDict]];

    // scrollViewContainer - child to topView
    [topView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-0-[scrollViewContainer]-0-|" options:0 metrics:nil views:viewsDict]];
    [topView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[headerView]-0-[scrollViewContainer(pictureScrollHeight)]" options:0 metrics:metricsDict views:viewsDict]];

    // bodyView - child to topView
    [topView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-0-[bodyView]-0-|" options:0 metrics:nil views:viewsDict]];
    [topView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[scrollViewContainer]-0-[bodyView(bodyViewHeight)]-0-|" options:0 metrics:metricsDict views:viewsDict]];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    newOrientation = toInterfaceOrientation;
    newBounds = [self sizeInOrientation:toInterfaceOrientation];
}

-(CGSize) sizeInOrientation:(UIInterfaceOrientation)orientation
{
    CGSize size = [UIScreen mainScreen].bounds.size;
    UIApplication *application = [UIApplication sharedApplication];
    if (UIInterfaceOrientationIsLandscape(orientation))
    {
        size = CGSizeMake(size.height, size.width);
    }
    if (application.statusBarHidden == NO)
    {
        size.height -= MIN(application.statusBarFrame.size.width, application.statusBarFrame.size.height);
    }
    return size;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T08:52:20.757

首先，您不需要在 -updateViewConstraints 方法中重新创建所有约束。你只需要在这个地方更新它们。要实现您的目标，请执行以下操作：

1.  只创建一次约束。例如在方法 -setupConstraints 中。并继续参考那些需要更新的内容。请参阅下面的代码。
2.  在方法 -updateViewConstraints 中，只更新 topView 的高度和宽度约束以及 scrollViewContainer 的高度。

ViewController.m 应该如下所示：

```
#import "ViewController.h"

@interface ViewController ()
@property (nonatomic, strong) IBOutlet UIScrollView* pageScrollView;
@property (nonatomic, strong) NSLayoutConstraint* pictureHeightConstraint;
@property (nonatomic, strong) NSLayoutConstraint* topViewWidthConstraint;
@property (nonatomic, strong) NSLayoutConstraint* topViewHeightConstraint;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    newBounds = [self sizeInOrientation:[UIApplication sharedApplication].statusBarOrientation];

    newOrientation = [UIApplication sharedApplication].statusBarOrientation;
    bodyViewHeight = 1200; // The height of the body view varies in size depending on orientation

    self.pageScrollView.translatesAutoresizingMaskIntoConstraints = NO;

    topView = [[UIView alloc] init];
    [topView setBackgroundColor:[UIColor clearColor]];
    topView.translatesAutoresizingMaskIntoConstraints = NO;
    [self.pageScrollView addSubview:topView];

    headerView = [[UIView alloc] init];
    [headerView setBackgroundColor:[UIColor redColor]];
    headerView.translatesAutoresizingMaskIntoConstraints = NO;
    [topView addSubview:headerView];

    scrollViewContainer = [[UIView alloc] init];
    [scrollViewContainer setBackgroundColor:[UIColor blueColor]];
    scrollViewContainer.translatesAutoresizingMaskIntoConstraints = NO;
    [topView addSubview:scrollViewContainer];

    bodyView = [[UIView alloc] init];
    [bodyView setBackgroundColor:[UIColor greenColor]];
    bodyView.translatesAutoresizingMaskIntoConstraints = NO;
    [topView addSubview:bodyView];

    [self setupConstraints];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)setupConstraints {
    // Remove old constraints
    [self.view removeConstraints:self.view.constraints];
    [self.pageScrollView removeConstraints:self.pageScrollView.constraints];
    [topView removeConstraints:topView.constraints];
    [scrollViewContainer removeConstraints:scrollViewContainer.constraints];

    if ((newOrientation == UIDeviceOrientationLandscapeLeft) || (newOrientation == UIDeviceOrientationLandscapeRight)) {
        pictureScrollHeight = 300;
    } else {
        pictureScrollHeight = 203;
    }

    [headerView setNeedsDisplay];
    [bodyView setNeedsDisplay];

    CGFloat topViewHeight = bodyViewHeight + 55 + pictureScrollHeight;

    //self.pageScrollView = _pageScrollView
    NSDictionary *viewsDict = NSDictionaryOfVariableBindings(_pageScrollView, topView, headerView, bodyView, scrollViewContainer);

    // pageScrollView - child to self.view
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-0-[_pageScrollView]-0-|" options:0 metrics:nil views:viewsDict]];
    [self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-0-    [_pageScrollView]-0-|" options:0 metrics:nil views:viewsDict]];

    // topView - child to pageScrollView
    [self.pageScrollView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-0-[topView]-0-|" options:0 metrics:nil views:viewsDict]];
    [self.pageScrollView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-0-[topView]-0-|" options:0 metrics:nil views:viewsDict]];
    NSLayoutConstraint* topViewWidthConstraint = [NSLayoutConstraint constraintWithItem:topView attribute:NSLayoutAttributeWidth relatedBy:NSLayoutRelationEqual toItem:nil attribute:NSLayoutAttributeNotAnAttribute multiplier:1 constant:newBounds.width];
    self.topViewWidthConstraint = topViewWidthConstraint;
    [topView addConstraint:self.topViewWidthConstraint];
    NSLayoutConstraint* topViewHeightConstraint = [NSLayoutConstraint constraintWithItem:topView attribute:NSLayoutAttributeHeight relatedBy:NSLayoutRelationEqual toItem:nil attribute:NSLayoutAttributeNotAnAttribute multiplier:1 constant:topViewHeight];
    self.topViewHeightConstraint = topViewHeightConstraint;
    [topView addConstraint:self.topViewHeightConstraint];

    // headerView - child to topView
    [topView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-0-[headerView]-0-|" options:0 metrics:nil views:viewsDict]];
    [topView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-0-[headerView(55.0)]" options:0 metrics:nil views:viewsDict]];

    // scrollViewContainer - child to topView
    [topView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-0-[scrollViewContainer]-0-|" options:0 metrics:nil views:viewsDict]];
    [topView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[headerView]-0-[scrollViewContainer]" options:0 metrics:nil views:viewsDict]];
    NSLayoutConstraint* pictureHeightConstraint = [NSLayoutConstraint constraintWithItem:scrollViewContainer attribute:NSLayoutAttributeHeight relatedBy:NSLayoutRelationEqual toItem:nil attribute:NSLayoutAttributeNotAnAttribute multiplier:1 constant:pictureScrollHeight];
    self.pictureHeightConstraint = pictureHeightConstraint;
    [scrollViewContainer addConstraint:self.pictureHeightConstraint];

    // bodyView - child to topView
    [topView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-0-[bodyView]-0-|" options:0 metrics:nil views:viewsDict]];
    [topView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:   [scrollViewContainer]-0-[bodyView]-0-|" options:0 metrics:nil views:viewsDict]];
}

- (void)updateViewConstraints
{
    [super updateViewConstraints];
    if ((newOrientation == UIDeviceOrientationLandscapeLeft) || (newOrientation == UIDeviceOrientationLandscapeRight)) {
        pictureScrollHeight = 300;
    } else {
        pictureScrollHeight = 203;
    }

    CGFloat topViewHeight = bodyViewHeight + 55 + pictureScrollHeight;
    self.pictureHeightConstraint.constant = pictureScrollHeight;
    self.topViewHeightConstraint.constant = topViewHeight;
    self.topViewWidthConstraint.constant = newBounds.width;
    [self.pageScrollView setNeedsUpdateConstraints];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    newBounds = [self sizeInOrientation:toInterfaceOrientation];
}

-(CGSize)sizeInOrientation:(UIInterfaceOrientation)orientation
{
    CGSize size = [UIScreen mainScreen].bounds.size;
    UIApplication *application = [UIApplication sharedApplication];
    if (UIInterfaceOrientationIsLandscape(orientation))
    {
        size = CGSizeMake(size.height, size.width);
    }
    if (application.statusBarHidden == NO)
    {
        size.height -= MIN(application.statusBarFrame.size.width, application.statusBarFrame.size.height);
    }
    return size;
}

@end 
```

ScrollView 根据添加到其中的子视图约束自动计算其内容大小。当然，它仅适用于自动布局环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:31:00.943

看起来你没有对 willRotateToInterfaceOrientation 中的 newBounds 做任何事情。你不应该在获得新的界限后调用你的 updateView 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:36:12.093

检查自动调整大小的蒙版。

```
[self.pageScrollView setAutoresizingMask:UIViewAutoresizingFlexibleHeight]; 
```

# ruby-on-rails - 已删除的迁移和 Heroku

> ID：14818517
> 
> 赞同：1
> 
> 时间：2013-02-11T18:30:15.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, migration

几天前，我为 rails 创建了一个迁移以添加 Paperclip 头像，但最终走向了不同的方向。作为 Rails 的新手，我不知道像我一样删除迁移文件是多么糟糕的想法。

我的应用程序在本地运行良好，但运行时`heroku run rake db:migrate`我得到这个：

```
undefined method `attachment' for #<ActiveRecord::ConnectionAdapters::Table:0x000000046092e0> 
```

这是因为它正在尝试运行一个名为 的迁移`AddAttachmentAvatarToVenues`，这是我愚蠢地删除的迁移。

它还为已删除的迁移中指定的头像添加了列`schema.rb`，但我创建了一个新的迁移来摆脱这些。新的迁移摆脱了它们，但没有改变 heroku 迁移错误。

知道如何解决这个问题吗？我已经做了很多谷歌搜索和环顾四周，虽然有很多人有类似的错误，但他们主要是他们使用的命令有问题。

这是在我的 heroku 迁移中尝试删除迁移后的输出。

```
==  AddAttachmentAvatarToVenues: migrating ====================================
-- change_table(:venues)
rake aborted!
An error has occurred, this and all later migrations canceled:

undefined method `attachment' for #<ActiveRecord::ConnectionAdapters::Table:0x00000003bdb7c8>
/app/db/migrate/20130206222434_add_attachment_avatar_to_venues.rb:4:in `block in up'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/schema_statements.rb:243:in `change_table'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:466:in `block in method_missing'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:438:in `block in say_with_time'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:438:in `say_with_time'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:458:in `method_missing'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:334:in `method_missing'
/app/db/migrate/20130206222434_add_attachment_avatar_to_venues.rb:3:in `up'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:370:in `up'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:410:in `block (2 levels) in migrate'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:410:in `block in migrate'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:129:in `with_connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:389:in `migrate'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:528:in `migrate'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:720:in `block (2 levels) in migrate'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:775:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:775:in `block in ddl_transaction'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/transactions.rb:208:in `transaction'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:775:in `ddl_transaction'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:719:in `block in migrate'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:700:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:700:in `migrate'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:570:in `up'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/migration.rb:551:in `migrate'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/railties/databases.rake:179:in `block (2 levels) in <top (required)>'
Tasks: TOP => db:migrate
(See full trace by running task with --trace) 
```

我确实看到了输出有什么问题，我只是不确定如何在不弄乱它的情况下修复它。

编辑：这是文件结构的一些截图：

![混帐](../Images/36313e74745947d71126a0221688a351.png)

（这两个名称相似的原因是因为我忘记删除一列，但这是在我遇到此问题之后并且没有影响它）

![结构体](../Images/60737eaec73e0cc54af0371add7a1521.png)

编辑2：

这是我的 git 历史记录中已删除的迁移。在此之后我添加了更多频道。它们只是几个字符串，但如果这能有所作为，我会找到一个更新的版本。

```
class AddAttachmentAvatarToVenues < ActiveRecord::Migration
  def self.up
    change_table :venues do |t|
      t.attachment :avatar
    end
  end

  def self.down
    drop_attached_file :venues, :avatar
  end
end 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:57:43.930

也许你应该看看这个：[How to empty DB in heroku](https://stackoverflow.com/questions/4820549/how-to-empty-db-in-heroku)

你所有的普通命令也可以在 heroku 中使用，唯一的区别是你必须把 heroku run 放在它前面。

如果您的应用程序尚未上线，您可以简单地重置数据库：

```
heroku pg:reset SHARED_DATABASE --confirm NAME_OF_THE_APP 
```

并重新创建它，使用：

```
heroku run rake db:migrate 
```

要为数据库播种：

```
heroku run rake db:seed 
```

最后，重启 Heroku：

```
heroku restart 
```

PS如果这些步骤没有帮助，您可以在删除数据库后尝试运行“heroku run rake db:setup”

# html - 在 IE6 中旋转 HTML 页面？

> ID：14818522
> 
> 赞同：0
> 
> 时间：2013-02-11T18:30:34.560
> 
> 标签：html, css, internet-explorer-6, transform

我有一个由两页组成的 HTML 文档。第一个是 A4 纵向尺寸，第二个是 A4 横向尺寸。我为 IE9 设置了此设置，以便在屏幕上以可读格式显示，但如果您打印它，它会将第二页旋转 -90 度（以便正确打印在 A4 上）使用

```
-ms-transform: rotate(-90deg) 
```

这也使用翻译来正确地重新定位页面。这适用于嵌入每个页面的 div。其中只是表格。

这在 IE9 中工作正常，但在 IE6（我假设 IE7 和 IE8）中这不起作用，因为早期版本不支持转换。在 IE6 中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:34:37.917

试一试。

```
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1); 
```

rotation=1 表示旋转 90 度。底数是 90，因此 2 = 180、3= 270 等等。

# asp.net - 在gridview中显示数据集单元格的子字符串

> ID：14818523
> 
> 赞同：0
> 
> 时间：2013-02-11T18:30:35.013
> 
> 标签：asp.net, gridview

我想用数据集创建一个gridview，我在数据绑定后隐藏了一些列。而且我还需要显示 Descriptin 列的前 50 个字符。我怎样才能做到这一点？这是我的代码

```
protected void grid_all_posts_DataBound(object sender, GridViewRowEventArgs e)
{
    e.Row.Cells[0].Visible = false;
    e.Row.Cells[1].Visible = false;

     // I want to display only substring in Gridview
     e.Row.Cells[3].Text = e.Row.Cells[3].Text.ToString().Substring(0,50);
} 
```

我希望很清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:48:09.713

`text-overflow`您可以考虑使用 CSS3属性，而不是只显示一组字符。使用此属性，您可以指定以像素为单位的最大宽度，并显示一个省略号以指示更多文本可用。

```
<div style="overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:150px">
    <span title="Put your full text here">
        This is some really long text. We want it to cut off after a specified number of pixels, and show the elipses to indicate that more text is available.
    </span>
</div> 
```

通过上面的示例，您可以将整个文本放在工具提示/标题中，当用户将鼠标悬停在文本上时可以查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:11:01.863

此错误适用于 SubString 方法。当字符串长度小于 50 时子字符串上升异常

用这个替换你的最后一行代码：

```
e.Row.Cells[3].Text = (e.Row.Cells[3].Text.Length>50) ? e.Row.Cells[3].Text.ToString().Substring(0,50) : e.Row.Cells[3].Text; 
```

此代码首先检查字符串的长度并在必要时调用子字符串。

# r - 在因子变量上绘制直方图

> ID：14818529
> 
> 赞同：17
> 
> 时间：2013-02-11T18:30:51.937
> 
> 标签：r, ggplot2

我正在尝试复制类似于以下的图表（最初在[此处](http://37signals.com/svn/posts/3019-the-rhythms-of-37signals)找到）
![堆叠直方图](../Images/d687c2fcb0c4bf169aba8a069baca631.png)

它在概念上很简单，但我对如何在 R 中做到这一点有点困惑。
总结一下：我想在每天的 24 小时内生成行为频率的直方图（24 级因子变量）星期。然后，我想将这些直方图堆叠在一起，以便可以轻松比较一天中一小时内的行为分布（再次参见示例）。

例如，我的数据可能如下所示：

```
 weekday hour    count
  Tuesday   15      553
   Monday    1       53
   Monday   10      539
   Monday   15      629
  Tuesday    9      281
 Saturday    4       11
   Monday    3       20
   Sunday    3       10
   Sunday    7        2
   Sunday    2       17 
```

我该如何实现上面链接中的图表？我很糟糕`ggplot`，但有一种感觉，这是可能的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-11T18:39:21.553

像这样的东西？

```
set.seed(1234)
df <- data.frame(weekday=rep(sort(unique(weekdays(.leap.seconds))), each=24), 
                       hour=rep(1:24, 7), count=sample(2:600, 24*7, replace=T))

df$weekday <- factor(df$weekday, levels=c("Monday", "Tuesday", "Wednesday", 
                      "Thursday", "Friday", "Saturday", "Sunday"), ordered=T)
df$hour <- factor(df$hour)

require(ggplot2)    
p <- ggplot(data = df, aes(x=hour)) 
p <- p + geom_histogram(aes(weights=count, fill=weekday))
p <- p + scale_fill_brewer(palette="Set3")
p <- p + facet_wrap( ~ weekday, ncol=1)
p 
```

![ggplot2_facet_histogram](../Images/20c2a5eeca21abfeac954304c5c53cae.png)

# android - 如何在 Android 上实现“两指拖动”手势？

> ID：14818530
> 
> 赞同：14
> 
> 时间：2013-02-11T18:30:57.933
> 
> 标签：android, android-layout, android-gesture

我是 Android 开发的新手，正在为盲人开展无障碍研究项目（Jelly Bean API 级别 17 项目）。我一直在尝试一些手势，而**两指拖动**手势真的很难实现。下图很好地捕捉到了我真正需要的东西。

![拖动手势](../Images/5e7e1c7a14684882d94348b5e847c852.png)

我希望盲人用户水平拖动两根手指（屏幕上的任何位置），他将获得他/她在 EditText 中键入的文本的音频输出。同样根据两根手指在拖动时移动的距离，我们分别输出每个单词。（下例）

> 示例：如果用户输入*“今天是美好的一天”*并将他的手指（x 值）向左拖动（例如）10 个单位，我们输出*“美好的一天”*，但如果他将手指向左拖动 20 个单位，我们将输出“*美好的一天”天”*，左 30 个单位*“是美好的一天”*等。

我偶然发现似乎检测到两指触摸：

```
TouchEvent(MotionEvent event) 
```

[此外，关于检测多次触摸](http://android-er.blogspot.in/2011/12/detect-multi-touch-for-10-pointers.html)的本教程似乎很有希望，但我需要它来处理**触摸**和**拖动**，我不确定是否可以像这样实现。

任何实现这一点的新建议或可以提供帮助的教程的指针都会很棒！

在此先感谢，阿迪特

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-14T11:36:09.463

好的，多亏了这里的 Gabe 和许多关于此的博客，我找到了解决问题的方法！

**首先，我在“Activity”类中初始化了我的变量**

```
int GLOBAL_TOUCH_POSITION_X = 0;
int GLOBAL_TOUCH_CURRENT_POSITION_X = 0; 
```

**接下来，在 onCreate() 内部：**

```
//Two-Finger Drag Gesture detection
    RelativeLayout TextLoggerLayout = (RelativeLayout)findViewById(R.id.ActivityrView);
    TextLoggerLayout.setOnTouchListener(
            new RelativeLayout.OnTouchListener(){

                @Override
                public boolean onTouch(View v, MotionEvent m) {
                    handleTouch(m); 
                    return true;
                }

    }); 
```

**现在定义函数handleTouch(m)如下**，它输出“双指触摸”的当前位置以及触摸的初始位置：

```
void handleTouch(MotionEvent m){
    //Number of touches
    int pointerCount = m.getPointerCount();
    if(pointerCount == 2){
        int action = m.getActionMasked();
        int actionIndex = m.getActionIndex();
        String actionString;
        TextView tv = (TextView) findViewById(R.id.testDiffText);
        switch (action)
        {
            case MotionEvent.ACTION_DOWN:                   
                GLOBAL_TOUCH_POSITION_X = (int) m.getX(1);
                actionString = "DOWN"+" current "+GLOBAL_TOUCH_CURRENT_POSITION_X+" prev "+GLOBAL_TOUCH_POSITION_X;
                tv.setText(actionString);
                break;
            case MotionEvent.ACTION_UP:                 
                GLOBAL_TOUCH_CURRENT_POSITION_X = 0;
                actionString = "UP"+" current "+GLOBAL_TOUCH_CURRENT_POSITION_X+" prev "+GLOBAL_TOUCH_POSITION_X;
                tv.setText(actionString);  
                break;  
            case MotionEvent.ACTION_MOVE:
                GLOBAL_TOUCH_CURRENT_POSITION_X = (int) m.getX(1);
                int diff = GLOBAL_TOUCH_POSITION_X-GLOBAL_TOUCH_CURRENT_POSITION_X;
                actionString = "Diff "+diff+" current "+GLOBAL_TOUCH_CURRENT_POSITION_X+" prev "+GLOBAL_TOUCH_POSITION_X;
                tv.setText(actionString);                   
                break;
            case MotionEvent.ACTION_POINTER_DOWN:
                GLOBAL_TOUCH_POSITION_X = (int) m.getX(1);
                actionString = "DOWN"+" current "+GLOBAL_TOUCH_CURRENT_POSITION_X+" prev "+GLOBAL_TOUCH_POSITION_X;
                tv.setText(actionString);
                break;
            default:
                actionString = "";
        }

        pointerCount = 0;
    }
    else {
        GLOBAL_TOUCH_POSITION_X = 0;
        GLOBAL_TOUCH_CURRENT_POSITION_X = 0;
    }
} 
```

你有它！“双指拖动”手势终于实现了。看起来，我也可以在上面写一篇小博文！！:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-13T20:59:22.690

我不知道现在添加一个答案对于这样一个老问题有多重要，但我一直在开发[一个库](http://github.com/championswimmer/SimpleFingerGestures_Android_Library)来支持 Android 上的基本 1 和 2 手指手势，功能非常简单。

大多数手势都可以轻松设置

```
view.setOn2FingerGestureListener ( new On2FingerGestureListener () {
@Override 
onSwipeup() {
}
onSwipedown() {
}
}); 
```

它是开源的，也可以作为 .jar 下载

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T18:51:04.960

触摸和拖动是一系列事件。首先你有一个下降，然后你有一个或多个动作，然后你有一个上升。您在向下检测到一个起点，然后在移动中发生拖动。阻力在上升时停止。

要进行 2 指拖动，请仅注意拖动 if `MotionEvent.getPointerCount() == 2`。

# .net - .NET 托管的等效 COM 组件类别？

> ID：14818533
> 
> 赞同：1
> 
> 时间：2013-02-11T18:31:02.850
> 
> 标签：.net, plugins, components

.NET 是否具有注册相关对象的规范机制？（即 .NET 的组件类别？）

# 背景

如果您有一堆 COM 对象，它们都是相关的，并且都实现了相同的接口，并且想要一个中心位置来注册所有这些对象，那么您可以使用**Component Categories**。

```
HKCR\Component Categories 
```

是可以注册一堆相关COM对象**的地方。**如果我的软件支持插件，我会创建一个*“类别”*，例如：

```
HKCR\Component Categories\{1628B80E-E735-481C-8EDA-FC13D92B5F36}
   409: REG_SZ = "Ian's super-cool application plugins" 
```

然后任何想要在我的应用程序中注册他们的插件的人都只需要提到他们通过创建一个名为**Implemented Categories**的条目来实现该类别：

```
HKCR\{EC05174F-F824-4888-9FDC-EE33080917DE}
   \ProgID
       default = "Stackoverflow.IansSuperCoolApp.1"
   \Implemented Categories
       \{1628B80E-E735-481C-8EDA-FC13D92B5F36} 
```

现在我知道在哪里可以找到它们。例如，微软有几十个图像转换过滤器，它们都注册在 category 下`{C501EDBE-9E70-11D1-9053-00C04FD9189D}`：

*   DXImageTransform.Microsoft.CrBlinds.1
*   DXImageTransform.Microsoft.Iris.1
*   DXImageTransform.Microsoft.AlphaImageLoader.1
*   DXImageTransform.Microsoft.RadialWipe.1
*   ...

还有 shell 扩展、SQL Server 冲突解决器；任何时候你需要一种方法来找到你想要的所有课程。

# 只有一种实现

现在，除了它是注册相关 COM 对象的规范位置之外，没有什么*特别之处。*`Component Categories`每个人都可以自由创建自己的课程注册方式。但是发明 COM 的人决定创建*“这个”*地方来做它。微软甚至提供了[一个 API 来帮助使用它](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680737%28v=vs.85%29.aspx)。

但是没有什么能阻止我声明自己的机制来注册包含我想要的功能的类：

*   我可以创建自己的`HKCR\Ian's Supercool Application plugins`
*   我可以有一个声明 ProgIDs 的 XML 文件

如果您要在组中注册 COM 对象，为什么不使用专为您的任务设计的地方。

# 但是.NET 呢？

如果我有几十个 .NET 程序集 (*.dll) 会发生什么；我应该怎么做才能注册这些？我不能*真正*使用 COM 组件类别，因为它们不是 COM 对象（即它们不是 COM 对象或 COM 可调用包装器）；它们是托管程序集。

.NET 中是否有规范的机制来注册程序集类别？

**注意：**您可以在第一行之后停止阅读所有内容；其余的只是绒毛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-21T22:55:53.020

问题的目的是创建插件。

由于 .NET 无法注册 dll，因此最好的技术是遵循[这个答案](https://stackoverflow.com/a/14282/12597)，您可以在其中加载所有可以找到的 DLL。迭代程序集中的所有类型，寻找有趣的类型。

在 .NET 3.5 中，Microsoft 将这种技术形式化为一个非常复杂的[`System.Addins`](http://msdn.microsoft.com/en-us/library/bb384171(v=vs.110).aspx)命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:09:49.790

如果我没看错你的问题，那么答案是 .NET 与 COM 对象不同。如果 COM 对象的存储是导致我们进入[.NET 旨在消除](http://msdn.microsoft.com/en-us/library/ms973843.aspx). 这是要避免的事情，而不是重复的事情。

也就是说，在[.NET 中，您可以将项目添加到 Global Assembly Cache](http://msdn.microsoft.com/en-us/library/dkkx7f79.aspx)。并且这样做的指导方针包括***将您的代码分组到简单有意义的命名空间中***。[Microsoft 在http://msdn.microsoft.com/en-us/library/vstudio/ms229042(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms229042(v=vs.100).aspx)上为此提供了指导。这***是***组织代码库的规范方式。

从告诉您如何使用 GAC 的文章中：

> 建议您仅在绝对必要时将 GAC 用于您自己的程序集。Microsoft 建议您通常应将程序集保存在应用程序文件夹中。

然而，通常情况下，最好的选择是***不***使用全局程序集缓存，而只是将您的 .dll 文件复制到应用程序中。这有助于避免 DLL Hell 情况，这是 .NET 之前 Microsoft 平台开发人员的祸根。

# ruby - 我可以检查什么以查看 rspec 是否正在运行？

> ID：14818534
> 
> 赞同：1
> 
> 时间：2013-02-11T18:31:08.410
> 
> 标签：ruby, rspec

因此，一些 ruby​​ 库使用以下技巧兼作可执行文件：

```
if __FILE__ == $0
  # act as executable...
end 
```

我正在编写一个迷你库，并且想知道是否有类似的技巧可以用来将我的 rspec 测试嵌入到文件中。某种常数或我可以检查的东西，例如：

```
if RSPEC_TARGET == $0
  describe 'Foo' do
    it "should foo" #...
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:56:25.553

`ARGV`包含脚本的名称。我在我的模块中使用以下内容：

```
if ARGV.include? File.basename(__FILE__)
    # unit tests here
end 
```

# excel - 尝试复制整个工作簿，公式仍链接到旧工作簿

> ID：14818540
> 
> 赞同：2
> 
> 时间：2013-02-11T18:31:29.057
> 
> 标签：excel, vba

我有以下代码可以使用 excel VBA 将模板工作簿中的工作表复制到新工作簿中：

```
Dim wkbSource As Workbook
Dim wkbDest As Workbook
Dim shtToCopy As Worksheet

'Opens Template file, and the new workbook.
            Set wkbSource = Workbooks.Open(MyPath & "Template.xlsx")
            Set wkbDest = Workbooks.Open(MyPath2 & "NewBook.xlsx")

            'Copys the "Approval sheet" Tab from the Template to the new workbook
            Set shtToCopy = wkbSource.Sheets(" Approval sheet")
            shtToCopy.Copy wkbDest.Sheets(1)

            'Copys the "ECL (1)" Tab from the Template to the new workbook
            Set shtToCopy = wkbSource.Sheets("ECL (1)")
            shtToCopy.Copy wkbDest.Sheets(2) 
```

问题是从模板工作簿中复制的任何公式都将链接回模板文件中的单元格，而不是链接到新工作簿中的单元格。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:42:56.493

您需要在一次操作中复制两张纸，如下所示

```
 wkbSource.Worksheets(Array(" Approval sheet", "ECL (1)")).Copy wkbDest.Sheets(2) 
```

# jquery - 如何打印在 jQuery 中手动创建的函数或类？

> ID：14818541
> 
> 赞同：-1
> 
> 时间：2013-02-11T18:31:32.483
> 
> 标签：jquery

我想打印出我在特定源文件上创建的函数和类。

例如，如果我们假设；

我的函数名称是 print()

`print_func(script.js)`*这必须在script.js*中打印出函数

 *`print_class(xyz.js)`这必须打印出*xyz.js中的类*

有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:33:26.777

您必须检查窗口对象的所有属性，然后在运行脚本后再次检查所有属性。

例如，这是您在运行脚本之前获取所有存在的函数的方式：

```
before=[];for (a in window) {if (typeof(window[a])=='function') before.push(a)   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:35:42.867

不，但是如果将功能分配给对象，则可以打印出所有可用功能。适当的命名空间将帮助您轻松实现这一目标。

请参阅[有没有办法在 javascript 中打印对象的所有方法？](https://stackoverflow.com/questions/152483/is-there-a-way-to-print-all-methods-of-an-object-in-javascript)

```
function getMethods(obj) {
  var result = [];
  for (var id in obj) {
    try {
      if (typeof(obj[id]) == "function") {
        result.push(id + ": " + obj[id].toString());
      }
    } catch (err) {
      result.push(id + ": inaccessible");
    }
  }
  return result;
} 
```

使用它：

```
alert(getMethods(document).join("\n")); 
```*

# c++ - 显示对话框时如何在 Qt 应用程序中禁用用户交互？

> ID：14818542
> 
> 赞同：1
> 
> 时间：2013-02-11T18:31:32.170
> 
> 标签：c++, qt, dialog, modeless

我有一个无模式的 QDialog 框，在我的 Qt 应用程序中弹出错误/警告，我想强制用户只关注该对话框，而不是单击应用程序中的任何内容，直到他们单击对话框上的 Ok。

我需要对话框保持无模式。隐藏主窗口或将其覆盖之类的解决方案是不可接受的。

目前我正在使用`setModal(true);`来解决我的问题。但我认为这种方法可能会阻止主应用程序执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:09:37.040

从[文档](http://doc.qt.io/qt-4.8/qdialog.html)中：

> 如果使用`show()`和`setModal(true)`一起执行长操作，则必须`QApplication::processEvents()`在处理过程中定期调用，以使用户能够与对话框进行交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:59:16.240

`QDialog`尝试使用代码`qDebug`中的语句或使用`qInstallMsgHandler`.

您也可以`QTextEdit`在此处实时显示并发布您的日志/错误消息。

[http://qt-project.org/doc/qt-4.8/debug.html](http://qt-project.org/doc/qt-4.8/debug.html)

[http://qt-project.org/doc/qt-4.8/qdebug.html#details](http://qt-project.org/doc/qt-4.8/qdebug.html#details)

[http://qt-project.org/doc/qt-4.8/qtglobal.html#qInstallMsgHandler](http://qt-project.org/doc/qt-4.8/qtglobal.html#qInstallMsgHandler)

[http://qt-project.org/doc/qt-4.8/qtextedit.html#details](http://qt-project.org/doc/qt-4.8/qtextedit.html#details)

如果您仍然真的想使用 QDialog 框调试错误，在伪模态对话框而不是模态对话框中，您可以尝试使用 eventFilters 来防止鼠标和键盘事件到达任何其他窗口，但允许例外只在 QDialog 结束，但它是可行的。

您还可以转到接受鼠标和键盘输入的一两个小部件，如果 QDialogBox 可见，则忽略输入。但是这两种显示错误的方式，但限制输入而不使其成为 Modal 真的很hacky，并且可能容易出错。

# java - 使用api查找已知地点的纬度和经度？

> ID：14818545
> 
> 赞同：2
> 
> 时间：2013-02-11T18:31:50.023
> 
> 标签：java, google-maps, location

有没有办法可以找到一个已知地方的纬度和经度，例如新加坡、吉隆坡/纽约等知名城市。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:36:01.930

地理编码

查看：[谷歌地理编码 API](https://developers.google.com/maps/documentation/geocoding/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:35:58.333

问谷歌。
例如

此 http 请求：http:
[//maps.google.com/maps/geo ?q=Singapore](http://maps.google.com/maps/geo?q=Singapore)

返回：

```
{
  "name": "Singapore",
  "Status": {
    "code": 200,
    "request": "geocode"
  },
  "Placemark": [ {
    "id": "p1",
    "address": "Singapur",
    "AddressDetails": {
   "Accuracy" : 1,
   "Country" : {
      "CountryName" : "Singapur",
      "CountryNameCode" : "SG"
   }
},
    "ExtendedData": {
      "LatLonBox": {
        "north": 1.4708809,
        "south": 1.1663980,
        "east": 104.0856805,
        "west": 103.6056246
      }
    },
    "Point": {
      "coordinates": [ 103.8198360, 1.3520830, 0 ]
    }
  } ]
} 
```

# regex - 为什么这个 sublimetext 构建文件不起作用？

> ID：14818549
> 
> 赞同：0
> 
> 时间：2013-02-11T18:31:59.630
> 
> 标签：regex, apache, ide, editor, sublimetext

我正在尝试捕获构建的输出，以打开带有语法错误的文件。

这是构建文件：

```
{
    "cmd": ["D:\\xampp\\apache\\conf\\buildApache.bat"],
    "file_regex": "of (.*?)(?=:)",
    "line_regex": "line ([0-9]*) ",
    "selector":"source.apacheconf"
} 
```

这是来自构建文件的响应

```
AH00526: Syntax error on line 19 of D:/xampp/apache/conf/extra/httpd-vhosts.conf:
Invalid command 'Liste', perhaps misspelled or defined by a module not included in the server configuration
[Finished in 0.3s] 
```

我想要做的是，当用户 dbl-click 错误时，它将在第 19 行打开文件。

如何编写构建文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T10:46:09.330

在 SublimeText 2 中，源代码文件名必须出现在构建输出中的行号之前。

这样，就不可能捕获输出。

# python - Bottle 应用程序的 Cork 身份验证问题：TypeError("'NoneType' object does not support item assignment",)

> ID：14818550
> 
> 赞同：0
> 
> 时间：2013-02-11T18:32:00.353
> 
> 标签：python, authentication, wsgi, bottle

我在使用 Bottle 应用程序实现 Cork 库时遇到了一些麻烦。我已经尝试设置示例应用程序，并进行了一些小的修改以使其在 WSGI 容器中运行。主要的变化是我改变了这个：

```
if __name__ == "__main__":
    main() 
```

对此：

```
application = default_app() 
```

当我使用管理员用户进行身份验证时，我得到以下信息：

```
Traceback (most recent call last):
  File "/path_to_app/lib/python2.7/bottle-0.11.4-py2.7.egg/bottle.py", line 763, in _handle
    return route.call(**args)
  File "/path_to_app/lib/python2.7/bottle-0.11.4-py2.7.egg/bottle.py", line 1572, in wrapper
    rv = callback(*a, **ka)
  File "/path_to_app/cork-example/simple_webapp.py", line 47, in login
    aaa.login(username, password, success_redirect='/', fail_redirect='/login')
  File "build/bdist.linux-x86_64/egg/cork/cork.py", line 209, in login
    self._setup_cookie(username)
  File "build/bdist.linux-x86_64/egg/cork/cork.py", line 610, in _setup_cookie
    session['username'] = username
TypeError: 'NoneType' object does not support item assignment 
```

当我尝试查看主页时，我收到此错误：

```
Traceback (most recent call last):
  File "/path_to_app/lib/python2.7/bottle-0.11.4-py2.7.egg/bottle.py", line 763, in _handle
    return route.call(**args)
  File "/path_to_app/lib/python2.7/bottle-0.11.4-py2.7.egg/bottle.py", line 1572, in wrapper
    rv = callback(*a, **ka)
  File "/path_to_app/cork-example/simple_webapp.py", line 90, in index
    aaa.require(fail_redirect='/login')
  File "build/bdist.linux-x86_64/egg/cork/cork.py", line 267, in require
    cu = self.current_user
  File "build/bdist.linux-x86_64/egg/cork/cork.py", line 417, in current_user
    username = session.get('username', None)
AttributeError: 'NoneType' object has no attribute 'get' 
```

我可能会犯一个新手错误吗？还是有其他问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:46:43.710

我想到了。这是一个新手错误。Bottle 文档说，如果你想在文件末尾使用 Bottle 和 mod_wsgi，你应该使用这个：

```
application = default_app() 
```

在更好地理解了这一切是如何工作的之后，我意识到我向 mod_wsgi 发送了错误的应用程序对象。相反，我应该使用这个：

```
application = app #app was defined earlier in the example application 
```

# javascript - Fancybox - 垂直的缩略图

> ID：14818552
> 
> 赞同：2
> 
> 时间：2013-02-11T18:32:05.640
> 
> 标签：javascript, jquery, fancybox, thumbnails

您如何使 Fancybox 中的缩略图沿侧面（最好是左侧）垂直而不是在底部水平？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-10T00:25:05.770

在`jquery.fancybox-thumbs.css`

```
#fancybox-thumbs ul li {
    float: left;
    padding: 1px;
    opacity: 0.5;
} 
```

应该

```
#fancybox-thumbs ul li {
    /*float: left;*/
    padding: 1px;
    opacity: 0.5;
} 
```

并`jquery.fancybox-thumbs.js`替换：

```
this.list.children().eq(0).outerWidth(true);
this.list.width(this.width * (obj.group.length + 1)).css('left', Math.floor($(window).width() * 0.5 - (obj.index * this.width + this.width * 0.5))); 
```

应该：

```
this.width = opts.width 
this.list.width(opts.width+2) 
```

再次在`jquery.fancybox-thumbs.js`

```
onUpdate: function (opts, obj) {
            if (this.list) {
                this.list.stop(true).animate({
                    'left': Math.floor($(window).width() * 0.5 - (obj.index * this.width + this.width * 0.5))
                }, 150);
            }
        } 
```

应该是（使缩略图 div 垂直居中）：

```
 onUpdate: function (opts, obj) {
        if (this.list) {
            var listpos=(obj.index+1) * (opts.height+2)-(opts.height+2) * 0.5

            if (listpos < Math.floor($(window).height()*0.5)) {
              var top_=0
            } else { 
              var top_= - (listpos-Math.floor($(window).height()*0.5))
            }

            this.list.stop(true).animate({
                'top': top_ 
            }, 150);
        }
    } 
```

还添加到“init”方法中以设置缩略图 div 的宽度（在 jquery.fancybox-thumbs.js 中）：

在此行之后修复：

`this.wrap = $('<div id="fancybox-thumbs"></div>').addClass(opts.position).appendTo('body');`

对此：

`this.wrap = $('<div id="fancybox-thumbs"></div>').addClass(opts.position).appendTo('body'); $("#fancybox-thumbs").width(opts.width);`

同样在 init 中你可以添加这个，鼠标滚轮将滚动 tmumbnails（必须包含 Jquery 鼠标滚轮插件）：

```
 $("#fancybox-thumbs").mousewheel(function(event, delta) {
              var current_top=parseInt($("#fancybox-thumbs").css('top'), 10)
              if (current_top+delta * 100<=2) {
                 $("#fancybox-thumbs").css('top',current_top+delta * 100)
              }

      event.preventDefault();

   }); 
```

# ios - RegEx 如何正确使用 OR 管道

> ID：14818557
> 
> 赞同：2
> 
> 时间：2013-02-11T18:32:35.590
> 
> 标签：ios, objective-c, regex, string, character

当涉及到单个字符和整个短语时，我需要知道如何正确使用“OR”...例如，我有代码可以检查在数组中找到的任意数量的字符或单词...

我想检查一些 unicode 字符以及一些 html 代码行。

我目前只是使用这个检查字符：

```
([\u200b\u200c\u200d\0\1\2\3\4\5\6\7]*) 
```

（反斜杠代表 unicode 字符`u+200b`-`u+200d`以及我软件中的特殊字符`\0-\7`（*它们都是单独的字符*），这些是 Objective-C 中的有效转义序列。）

现在，如果我想检查这些字符并检查诸如`<b>`或之类的短语怎么办？`<font color="#FF0000">`

我在做研究时发现了一些说要使用管道的东西，`|`但我不确定我是把它们放在单词之间还是放在单个字符之间，我不确定我是在单词周围加上引号还是什么不...在我把这件事搞砸之前我需要帮助哈哈！

（ps，不确定它是否会有所不同，但我也在这样做：

```
([^\u200b\u200c\u200d\0\1\2\3\4\5\6\7]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:38:15.647

有点像

```
/([^....]|\<b\/\>|\<font color .... \>)/ 
```

[不过，关于正则表达式和 html](https://stackoverflow.com/a/1732454/118068)的常见警告适用于此处。

至于将 放在哪里的困惑`|`，请考虑这个陈腐的例子：您想找到单词`color`，但也想适应英国的拼写，`colour`：

```
/(color|colour)/
/(colou?r)/
/(colo(r|ur))/ 
```

基本上都是等价的。

# c# - 使用带有嵌套数组的 JSON.net c# 读取 JSON

> ID：14818563
> 
> 赞同：1
> 
> 时间：2013-02-11T18:32:59.493
> 
> 标签：c#, json, json.net

我有一个 JSON 数据集并使用 C# JSON.net 库我试图将数据读取为连接字符串，但无法提取数据。数据有根元素，然后是行。对于“行”中的每一行，我想提取 ["conversionPathValue"]["nodeValue"] 值的列表并将它们连接在一起，然后将它们与原始值值连接。2行的示例代码如下：

```
 "rows": [
        [
          {
            "conversionPathValue": [
              {
                "interactionType": "CLICK",
                "nodeValue": "MET"
              }
            ]
          },
          {
            "primitiveValue": "20130122"
          },
          {
            "primitiveValue": "000"
          },
          {
            "primitiveValue": "000001"
          },
          {
            "primitiveValue": "000"
          },
          {
            "primitiveValue": "11"
          },
          {
            "primitiveValue": "7290.521799"
          }
        ],
        [
          {
            "conversionPathValue": [
              {
                "interactionType": "CLICK",
                "nodeValue": "MET"
              },
              {
                "interactionType": "CLICK",
                "nodeValue": "MET"
              },
              {
                "interactionType": "CLICK",
                "nodeValue": "MET"
              },
              {
                "interactionType": "CLICK",
                "nodeValue": "MET"
              },
              {
                "interactionType": "CLICK",
                "nodeValue": "MET"
              },
              {
                "interactionType": "CLICK",
                "nodeValue": "MET"
              },
              {
                "interactionType": "CLICK",
                "nodeValue": "MET"
              },
              {
                "interactionType": "CLICK",
                "nodeValue": "MET"
              },
              {
                "nodeValue": "(none)"
              },
              {
                "nodeValue": "(none)"
              },
              {
                "interactionType": "CLICK",
                "nodeValue": "organic"
              }
            ]
          },
          {
            "primitiveValue": "20130122"
          },
          {
            "primitiveValue": "000"
          },
          {
            "primitiveValue": "000011"
          },
          {
            "primitiveValue": "005"
          },
          {
            "primitiveValue": "1"
          },
          {
            "primitiveValue": "1628.0"
          }
        ],
                    .....etc........ 
```

使用以下代码：（jsonExtract 是一个 JObject）

```
 var rows = jsonExtract["root"]["rows"][0].Children();

            foreach (JToken result in rows)
            {
                var primitiveValues = result["primitiveValue"].Values<string>();
                var pathValues = result["conversionPathValue"].Values<string>();

                string joinedprimitiveValues = string.Join(",", primitiveValues);
                string joinedpathValues = string.Join("-", pathValues);

                file2.WriteLine(joinedpathValues + ", " + joinedprimitiveValues);

            } 
```

这会在设置primitiveValues 时出现“对象引用未设置为对象的实例”的错误。

我知道问题可能出在嵌套元素上，但我不知道如何解决这些问题。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:24:41.543

我认为您在代码中遇到的问题是您没有处理`primitiveValues`or`pathValues`为 null 的情况，由于您处理行的方式，这实际上会在每次迭代中发生。

例如，如果这是一行：

```
{
    "primitiveValue": "20130122"
}, 
```

然后`result["conversionPathValue"]`就要回去了`null`。

试试这个：

```
var obj = JObject.Parse(json);
var rows = obj["rows"].Children();

foreach (JToken row in rows)
{
    List<string> conversionPaths = new List<string>();
    List<string> primitiveValues = new List<string>();

    foreach (JToken value in row.Children())
    {
        var primitiveValue = value["primitiveValue"];

        if (primitiveValue != null)
        {
            primitiveValues.Add(primitiveValue.Value<string>());
        }

        var conversionPathValue = value["conversionPathValue"];

        if (conversionPathValue != null)
        {
            var paths = conversionPathValue.Children()
                .Where(t => t["nodeValue"] != null)
                .Select(t => t["nodeValue"].Value<string>());

            conversionPaths.AddRange(paths);
        }
    }

    Console.WriteLine("Primitive Values:");
    Console.WriteLine(string.Join(",", primitiveValues.ToArray()));
    Console.WriteLine("Conversion Paths:");
    Console.WriteLine(string.Join(",", conversionPaths.ToArray()) + "\n");
} 
```

当我在给定的 JSON 上运行它时，它会产生以下内容：

```
Primitive Values:
20130122,000,000001,000,11,7290.521799
Conversion Paths:
MET

Primitive Values:
20130122,000,000011,005,1,1628.0
Conversion Paths:
MET,MET,MET,MET,MET,MET,MET,MET,(none),(none),organic 
```

请注意，我添加`{`并`}`围绕 JSON 使其工作。

# node.js - 在代理服务器名称前不使用 http:// 设置 npm 代理

> ID：14818564
> 
> 赞同：4
> 
> 时间：2013-02-11T18:33:17.607
> 
> 标签：node.js, npm

我安装了 npm 并使用了几次，但不幸的是我不得不更改我的代理，我无法让它再次工作。

这是我过去的设置：（有效的设置）

npm 配置获取代理：`http://proxy-foo.foobar.com:8080`

npm config 获取 https 代理：`http://proxy-foo.foobar.com:8080`

现在我的代理是一个服务器名称，当我在浏览器中使用代理时它工作正常，但是当我在 npm 中设置配置时，它失败并显示“getaddrinfo ENOTFOUND”

当前的设置：

npm 配置获取代理：`http://servername:8080`

npm config 获取 https 代理：`http://servername:8080`

在我的浏览器代理中，我没有在服务器名称之前使用 http://，我认为这是导致它失败的原因。这可能是问题吗？如果是这样，有没有办法在 npm 中设置代理配置而不使用 http:// 之前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-16T14:20:18.900

你是对的; `npm`（更准确地说，`request`，它实际上进行了获取）**确实**关心`http://`代理名称之前的。

该`proxy`设置应该是您可以在浏览器中访问的完全限定 URL，例如，

`http://proxy.company.com:port/`

或者

`http://1.1.1.1:1234/`

如果指定为 IP 地址。

# c - 要缓冲的 Memcpy 整数

> ID：14818566
> 
> 赞同：1
> 
> 时间：2013-02-11T18:33:29.057
> 
> 标签：c

所以我有以下内容：

```
char * buffer = (char *) malloc(2*80 + 4);
uint32_t networkedRin = htonl(student->rin);

printf("RIN %u\n", student->rin);

//Clear all memory and copy the first last and rin into the new buffer
memset(buffer, '\0', 164);
memcpy(buffer, student->firstname, 80);
memcpy(buffer+80, student->lastname, 80);
memcpy(buffer+160, &networkedRin, 4);

printf("Networked rin: %u\n", networkedRin);

printf("L5: %s %s %u\n", buffer, buffer+80, buffer+160); 
```

我很困惑，因为当我最后打印时，预期值与之前打印的 Networked rin 值相同，但事实并非如此，实际上它是垃圾，因为它在每次运行时都在不断变化。现在我知道我应该使用 sizeof 或其他任何东西，但我们被告知只对 uint32 使用硬编码值 4 而不是。我不知道为什么在尝试显示缓冲区中的联网 rin 号时会出现垃圾。

例如，我在两次运行程序后收到此输出

```
RIN 60
Networked rin: 1006632960
L5: loller cats 16375984

RIN 60
Networked rin: 1006632960
L5: loller cats 10260656 
```

我确定它很简单，但我就是看不到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T18:36:32.187

`buffer+160`不是您正在寻找的价值。
`buffer+160`是指向你的***指针***`int`，而不是你`int`自己的指针。

您必须对指针进行类型转换和取消引用才能看到所需的值。

```
printf("L5: %s %s %u\n", buffer, buffer+80, *(uint32_t*)(buffer+160)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:38:40.067

```
printf("L5: %s %s %u\n", buffer, buffer+80, buffer+160); 
```

`buffer+160`是指向的指针`char`，因此您正在打印*地址*。

# php - 多边形算法中的点有时会给出错误的结果

> ID：14818567
> 
> 赞同：16
> 
> 时间：2013-02-11T18:33:31.177
> 
> 标签：php, polygon, pip, precision, point

我在 StackOverflow 上看到了我在 PHP 代码中实现的“多边形中的点”光线追踪算法。大多数时候，它运行良好，但在一些复杂的情况下，具有复杂的多边形和恶性点，它会失败，并且它说那个点不在多边形中。

例如：
您会在[这里](http://pastebin.com/cE9Af8ev)找到我的 Polygon 和 Point 类：pointInPolygon 方法在 Polygon 类中。在文件的末尾，有两个点应该位于给定的多边形内（在 Google 地球上为真）。第二个效果很好，但第一个有问题:(。

[您可以使用此 KML 文件](http://pastebin.com/ZT5SGNNB)轻松检查 Google 地球上的多边形。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-08-12T15:00:15.283

去过那里:-) 我还浏览了 Stackoverflow 的 PiP 建议，包括您的参考资料和[这个线程](https://stackoverflow.com/questions/5065039/find-point-in-polygon-php)。不幸的是，没有一个建议（至少我尝试过的建议）对于现实生活场景来说是完美的和足够的：比如用户在谷歌地图上徒手绘制复杂的多边形、“恶毒”的左右问题、负数等等。

PiP 算法必须适用于所有情况，即使多边形由数十万个点组成（如县界、自然公园等）——无论多边形多么“疯狂”。

所以我最终构建了一个新算法，基于天文学应用程序的一些来源：

```
//Point class, storage of lat/long-pairs
class Point {
    public $lat;
    public $long;
    function Point($lat, $long) {
        $this->lat = $lat;
        $this->long = $long;
    }
}

//the Point in Polygon function
function pointInPolygon($p, $polygon) {
    //if you operates with (hundred)thousands of points
    set_time_limit(60);
    $c = 0;
    $p1 = $polygon[0];
    $n = count($polygon);

    for ($i=1; $i<=$n; $i++) {
        $p2 = $polygon[$i % $n];
        if ($p->long > min($p1->long, $p2->long)
            && $p->long <= max($p1->long, $p2->long)
            && $p->lat <= max($p1->lat, $p2->lat)
            && $p1->long != $p2->long) {
                $xinters = ($p->long - $p1->long) * ($p2->lat - $p1->lat) / ($p2->long - $p1->long) + $p1->lat;
                if ($p1->lat == $p2->lat || $p->lat <= $xinters) {
                    $c++;
                }
        }
        $p1 = $p2;
    }
    // if the number of edges we passed through is even, then it's not in the poly.
    return $c%2!=0;
} 
```

**说明性测试**：

```
$polygon = array(
    new Point(1,1), 
    new Point(1,4),
    new Point(4,4),
    new Point(4,1)
);

function test($lat, $long) {
    global $polygon;
    $ll=$lat.','.$long;
    echo (pointInPolygon(new Point($lat,$long), $polygon)) ? $ll .' is inside polygon<br>' : $ll.' is outside<br>';
}

test(2, 2);
test(1, 1);
test(1.5333, 2.3434);
test(400, -100);
test(1.01, 1.01); 
```

输出：

```
2,2 is inside polygon 
1,1 is outside
1.5333,2.3434 is inside polygon 
400,-100 is outside
1.01,1.01 is inside polygon 
```

自从我在几个网站上切换到上述算法以来，已经一年多了。与“SO 算法”不同，到目前为止还没有任何投诉。[在此处](http://svampe.dk/soeg/)查看实际操作（国家真菌学数据库，对丹麦人感到抱歉）。您可以绘制一个多边形，或选择一个“kommune”（一个县） - 最终将一个多边形与数千个点与数千个记录进行比较）。

**更新** 注意，此算法的目标是地理数据 / lat,lngs，它可以非常精确（小数点后 n 位），因此将“多边形内”视为*多边形内*- 而不是*多边形的边界*。1,1 被认为是外部，因为它*在*边界上。1.0000000001,1.01 不是。

# emacs - Elisp 格式说明符与参数类型错误不匹配

> ID：14818568
> 
> 赞同：1
> 
> 时间：2013-02-11T18:33:37.153
> 
> 标签：emacs, arguments, elisp, conditional

尝试以交互方式运行我的主函数时，我收到“格式说明符与参数类型不匹配”错误。我的代码是：

```
(defun average(grade)
  (setq divide (/ grade 10))
  (cond ((= divide 10) "A")
        ((= divide 9) "A")
        ((= divide 8) "B")
        ((= divide 7) "C")
        ((= divide 6) "D")
        ("F")))

(defun main(g)
 (interactive "nGrade: ") 
 (message "%d" (average g ))) 
```

任何人都可以帮助我输入/输出错误吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T18:47:33.357

错误在格式行中

```
 (format "%d" (average g)) 
```

想要格式化一个整数，但你返回一个字符串，它应该是：

```
 (format "%s" (average g)) 
```

顺便说一句，`M-x ielm`在测试 elisp 时很有用。

# javascript - Javascript中字符的出现次数加倍

> ID：14818570
> 
> 赞同：-5
> 
> 时间：2013-02-11T18:33:42.547
> 
> 标签：javascript

输入字符串：abcd

输出字符串：aabbccdd

如果 'a' 'b' 'c' 'd' 是数组的元素，如何使用 Javascript 实现此目的..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:38:51.300

简单的正则表达式解决方案：

```
"abcd".replace(/[\S\s]/g, "$&$&"); 
```

阵列解决方案：

```
"abcd".split("").map(function(x){return x+x}).join(""); 
```

有关字符串重复的更通用解决方案（在数组解决方案中），请查看[Repeat String - Javascript](https://stackoverflow.com/q/202605/1048572)。

或者用循环做简约的方式：

```
var input = "abcd";
var output = "";
for (var i=0; i<input.length; i++) {
    var chr = input.charAt(i);
    for (var j=0; j<2; j++)
        output += chr;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:39:23.993

尝试这个...

```
var a = "abcd";
var b = "";
for(var i = 0; i < a.length; i++)
    b += a.charAt(i) + a.charAt(i); 
```

# java - Java 如何生成接受字符串和整数的泛型类？

> ID：14818571
> 
> 赞同：2
> 
> 时间：2013-02-11T18:33:43.327
> 
> 标签：java, class, generics

我正在尝试熟悉 java 中的泛型。我仍然不确定如何创建一个简单的类来获取两种类型（字符串、整数）。下面是在我的上下文中使用泛型的简单尝试。

```
public class Container <T>
{

  public T aString()
  {
     //Do i know I have a string?
  }

  public T anInt()
  {
    //How do I know I have an integer?
  }

  public Container<T>()
  {
    //What would the constructor look like?
  }

} 
```

我正在引用这个页面[oracle generics](http://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html)但我仍然不确定我在这里做什么。你首先弄清楚你在课堂上的“T”是什么类型吗？

泛型编程真的用于接口和抽象类吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T19:05:45.530

Container 类实际上可以保存 String、Integer 或任何类型，您只需正确使用它即可。像这样的东西：

```
public class Container<T> {
    private T element;

    public T getElement() {
        return element;
    }

    public void setElement(T element) {
        this.element = element;
    }

    public Container(T someElement) {
        this.element = someElement;
    }
} 
```

你可以像这样使用它：

```
Container<Integer> myIntContainer = new Container<Integer>();
myIntContainer.setElement(234); 
```

或者...

```
Container<String> myStringContainer = new Container<String>();
myStringContainer.setElement("TEST"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T18:41:35.370

如果该类对 String 和 Integer 做了显着不同的事情，也许它应该是两个类，每个类都专门针对其中一种类型。

我认为泛型对于可以以相同方式处理不同类型的引用的情况很有用。`ArrayList<String>`并且`ArrayList<Integer>`不需要任何特定于字符串或整数的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:36:46.923

如果你想使用`String`并且`Integer`你可能不得不使用`Object`作为类型。坦率地说，这消除了泛型的大部分好处，您可能应该检查您是否确实有一个健全的模型和交织字符串和整数的原因。

但是，是的，它对接口、自定义类和抽象很有用。这意味着您可以保证对象是正确的类型，并且无需为每种类型的事物每次都实现它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T18:37:27.263

```
Class type = Integer.class
Integer i = verifyType("100",type); 
```

对于整数，类似于字符串...

参考[具有类 <T> 的 Java 泛型](https://stackoverflow.com/questions/932090/java-generics-with-class-t)

# php - 使用脚本“RSSlib”(php) 如何对 RSS 提要中的项目进行排序，以便首先显示最旧的项目？

> ID：14818576
> 
> 赞同：0
> 
> 时间：2013-02-11T18:34:01.167
> 
> 标签：php, rss

我有两个页面，一个是脚本本身，另一个是调用它的页面。我可以很好地显示我的提要，但我需要以相反的顺序显示它。（最旧的在前）。我已经尝试了这两个 asort 和 arsort 函数，但我无法让它们工作。

这是代码：

```
 $RSS_Content = array();

function RSS_Tags($item, $type)
{
    $y = array();
    $tnl = $item->getElementsByTagName("title");
    $tnl = $tnl->item(0);
    $title = $tnl->firstChild->data;

    $tnl = $item->getElementsByTagName("link");
    $tnl = $tnl->item(0);
    $link = $tnl->firstChild->data;

    //$tnl = $item->getElementsByTagName("description");
//      $tnl = $tnl->item(0);
//      $description = $tnl->firstChild->data;

    $y["title"] = $title;
    $y["link"] = $link;
    //$y["description"] = $description;
    $y["type"] = $type;

    return $y;
}
function RSS_Channel($channel)
{
global $RSS_Content;

$items = $channel->getElementsByTagName("item");

// Processing channel

$y = RSS_Tags($channel, 0);     // get description of channel, type 0
array_push($RSS_Content, $y);

// Processing articles

foreach($items as $item)
{
    $y = RSS_Tags($item, 1);    // get description of article, type 1
    array_push($RSS_Content, $y);
}
}

function RSS_Retrieve($url)
{
global $RSS_Content;

$doc  = new DOMDocument();
$doc->load($url);

$channels = $doc->getElementsByTagName("channel");

$RSS_Content = array();

foreach($channels as $channel)
{
     RSS_Channel($channel);
}

}

function RSS_RetrieveLinks($url)
{
global $RSS_Content;

$doc  = new DOMDocument();
$doc->load($url);

$channels = $doc->getElementsByTagName("channel");

$RSS_Content = array();

foreach($channels as $channel)
{
    $items = $channel->getElementsByTagName("item");
    foreach($items as $item)
    {
$y = RSS_Tags($item, 1);    // get description of article, type 1
        array_push($RSS_Content, $y);
    }

}

}

function RSS_Links($url, $size)
{
global $RSS_Content;

$page = "<ul>";

RSS_RetrieveLinks($url);
if($size > 0)
    $recents = array_slice($RSS_Content, 0, $size);

foreach($recents as $article)
{
    $type = $article["type"];
    if($type == 0) continue;
    $title = $article["title"];
    $link = $article["link"];
    $page .= "<li><a href=\"$link\">$title</a></li>\n";         
}

$page .="</ul>\n";

return $page;

}

function RSS_Display($url, $size)
{
global $RSS_Content;
asort($RSS_Content);
$opened = false;
$page = "";

RSS_Retrieve($url);
if($size > 0)
    $recents = array_slice($RSS_Content, 0, $size);

foreach($recents as $article)
{
    $type = $article["type"];
    if($type == 0)
    {
        if($opened == true)
        {
            $page .="</ul>\n";
            $opened = false;
        }
        $page .="<b>";
    }
    else
    {
        if($opened == false) 
        {
            $page .= "<ul>\n";
            $opened = true;
        }
    }
    $title = $article["title"];
    $link = $article["link"];
//  $description = $article["description"];
    $page .= "<p><a href=\"$link\">$title</a>";
//  if($description != false)
    {
        //$page .= "<br>$description";
    }
    $page .= "</p>\n";          

    if($type==0)
    {
        $page .="</b><br />";
    }

}

if($opened == true)
{   
    $page .="</ul>\n";
}
return $page."\n";

} 
```

然后在第二页，我有这个：

```
$url = "feedurlhere.xml";
    echo RSS_Links($url, 10);
?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:40:01.300

感谢 Scriptol，答案是：将 array_push 的所有实例更改为 array_switch

干杯

# c# - WPF：转换器“捕获”转换方法的基类

> ID：14818580
> 
> 赞同：0
> 
> 时间：2013-02-11T18:34:07.200
> 
> 标签：c#, wpf, inheritance, converters

我想我的问题主题有点混乱。简而言之，我想要的是：

我的申请中有很多`Converters`。他们中的许多人没有实现该`ConvertBack`方法。所以我想要一个`BaseConverter`类，它提供一个简单的空实现`ConvertBack`以及我的所有其他转换器从`BaseConverter`.

我的想法`BaseConverter`：

```
public class BaseConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        // do nothing in this dummy implementation
        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        // do nothing in this dummy implementation
        return null;
    }
} 
```

还有我的一个疯狂转换器：

```
public class CrazyConverter : BaseConverter
{
    public new object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
       return ACrazyConverionOfTheValue(...);
    }
} 
```

但是，如果我这样尝试并使用 my `CrazyConverter`，我总是`Convert`以`BaseClass`. 我的新`Convert`方法永远不会被调用。我究竟做错了什么？

感谢您的回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:39:04.013

您需要在基类中创建方法`virtual`，而您的子类应该`override`使用它们（而不是`new`）。

```
public class BaseConverter : IValueConverter
{
    public virtual object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        // do nothing in this dummy implementation
        return null;
    }

    public virtual object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        // do nothing in this dummy implementation
        return null;
    }
}

public class CrazyConverter : BaseConverter
{
    public override object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
       return ACrazyConverionOfTheValue(...);
    }
} 
```

**编辑**：您可能还需要考虑重构它以要求`Convert`通过创建类和`Convert`抽象来覆盖它，如下所示：

```
public abstract class BaseConverter : IValueConverter
{
    public abstract object Convert(object value, Type targetType, object parameter, CultureInfo culture);

    public virtual object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        // do nothing in this dummy implementation
        return null;
    }
} 
```

# java - 哪个 Java HotSpot JIT 编译器正在运行？

> ID：14818584
> 
> 赞同：11
> 
> 时间：2013-02-11T18:34:22.633
> 
> 标签：java, jit, jvm-hotspot

我想知道我对 HotSpot Java 的无 VM 参数调用是否使用 -client、-server 或分层编译选项运行。当我不提供 VM 参数时，默认选择哪一个？有没有办法输出关于哪个 JIT 编译器正在运行的诊断信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T18:39:02.333

假设这是热点：

```
-XshowSettings:vm 
```

例如，在我的 Windows 机器上，我得到以下输出：

```
VM settings:
    Max. Heap Size (Estimated): 1.77G
    Ergonomics Machine Class: client
    Using VM: Java HotSpot(TM) 64-Bit Server VM 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T18:39:44.577

从运行的程序中，您可以查询`java.vm.name`属性以区分客户端和服务器模式。如果您使用了该选项，则在热点上它将包含“服务器”（例如：）`Java HotSpot(TM) 64-Bit Server VM`。

根据[此页面](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html)：

> 分层编译现在是服务器 VM 的默认模式。

注意：它现在可以工作，但可能不是最适合未来的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-01T20:33:30.070

确定正在使用哪个 JIT 编译器的更好的方法。

在具有 32 位 JDK8 的 Windows 机器上：

```
    $ java -版本
    java版本“1.8.0”
    Java(TM) SE 运行时环境 (build 1.8.0-b132)
    Java HotSpot(TM) 客户端虚拟机（build 25.0-b70，混合模式）

    $ java -XshowSettings -版本 2>&1 | grep sun.management.compiler
        sun.management.compiler = HotSpot 客户端编译器

    $ java -server -XshowSettings -版本 2>&1 | grep sun.management.compiler
        sun.management.compiler = HotSpot 分层编译器

```

因此，客户端编译器是 Windows 32 位 JDK8 的默认值，而“-server”选项为您提供 32 位分层编译器。

在具有 64 位 JDK8 的 Windows 机器上：

```
    $ java -版本
    java版本“1.8.0”
    Java(TM) SE 运行时环境 (build 1.8.0-b132)
    Java HotSpot(TM) 64 位服务器 VM（内部版本 25.0-b70，混合模式）

    $ java -XshowSettings -版本 2>&1 | grep sun.management.compiler
        sun.management.compiler = HotSpot 64 位分层编译器

```

因此，分层编译器是 Windows 64 位 JDK8 的默认设置。Oracle 不提供 64 位客户端 VM。

# ios - UITableViewCell 的子视图中的 UITapGestureRecognizer

> ID：14818589
> 
> 赞同：1
> 
> 时间：2013-02-11T18:34:35.900
> 
> 标签：ios, uitableview, uitapgesturerecognizer

我有两个子类`UITableViewCell`。第一个 (NormalCell) 用作默认的可重用单元格，第二个 (DetailCell) 仅在用户点击现有单元格时插入。DetailCell 中有许多子视图，`contentView`其中一些我以编程方式添加了`UITapGestureRecognizer`s。这一切都很好，但我有一个问题。

如果在详细信息单元格打开并且调用了其中一个手势识别器时，则在我删除详细信息单元格后，如果我点击另一个单元格，`didSelectRowAtIndexPath`则不会调用。如果我第二次点击它就会被调用。这可能是由添加的手势识别器引起的吗？我在这里看到有人说在`UITableViewCell`s 的子视图中添加手势识别器不是问题，所以我对此很好奇。

感谢您的帮助，在此先感谢。

**编辑**

当我从表格中删除单元格时，我尝试从子视图中删除手势识别器，但它没有改变任何东西。我的怀疑是使用手势识别器时会产生问题。

另外，我尝试将手势识别器的目标更改为另一个视图控制器，以查看是否是问题所在，但这也不起作用。我使用的手势识别器类型是点击识别器是否有问题？这是否与单元格的默认识别器冲突？

# python - 如何返回所有字符串

> ID：14818593
> 
> 赞同：0
> 
> 时间：2013-02-11T18:34:43.317
> 
> 标签：python, list, return

```
# -*- coding: utf-8 -*-
import os
import fbconsole
here = os.path.dirname(os.path.abspath(__file__))

def fbfeed():
    fbconsole.APP_ID = '588914247790498'
    fbconsole.AUTH_SCOPE = ['publish_stream', 'publish_checkins', 'read_stream', 'offline_access']
    fbconsole.authenticate()
    newsfeed = fbconsole.get('/me/home')
    newsfeedData = newsfeed["data"]
    for status in newsfeedData:
        fromn = [status['from']['name']]
        name = [status.get('name', None)]
        description = [status.get('description', None)]
        if description == name is None:
            return fromn
        elif description is None:
            return fromn.extend(name)
        elif name is None:
            return fromn.extend(description)
        else:
            return fromn + name + description 
```

我的代码只返回一个字符串，但是当我使用**print**而不是**return 时**- 它会打印所有结果。如何返回与**print**相同的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:36:29.303

当您使用 return 时，它会退出函数并且不会像使用 print 那样继续迭代循环。试试产量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:42:09.117

问题是当你的循环命中第一条`return`语句时，函数将退出并且循环不会继续。使用`print`将允许循环继续。

两个选项是在开始循环之前创建一个列表，将状态添加到循环中的列表中，然后在循环之后返回列表。

使用`yield`关键字而不是`return`将允许*其他*函数循环结果。`yield`可以在此处找到有关该关键字的更多详细信息： [“yield”关键字在 Python 中的作用是什么？](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained)（加上实际文档：[http](http://docs.python.org/2.7/reference/expressions.html?highlight=yield#yield-expressions) ://docs.python.org/2.7/reference/expressions.html?highlight=yield#yield-expressions ）。

# intellij-idea - 将 Play 2.0 添加到 Intellij

> ID：14818595
> 
> 赞同：12
> 
> 时间：2013-02-11T18:34:58.473
> 
> 标签：intellij-idea, playframework, playframework-2.0

我按照[http://blogs.jetbrains.com/idea/2012/12/getting-started-with-play-20-in-intellij-idea-12/](http://blogs.jetbrains.com/idea/2012/12/getting-started-with-play-20-in-intellij-idea-12/)上的说明集成`Play 2.0`到 Intellij。但是`Play`没有通过 Intellij 出现在存储库中。我打了`Browse Repository`又打了`Play`or `Play 2.0`。但什么也没有出现。

编辑：我在网上搜索。其他一些人也有同样的问题。但是当他们找到解决方案时，他们忘记了分享解决方案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T19:23:57.767

插件在存储库中可用，请尝试`Refresh`确保您运行的是兼容的 IDEA 版本（[12.0.3 版本](http://www.jetbrains.com/idea/download/index.html)）。

![玩 2.0 支持](../Images/82903a6c8a0cfab0ce92a31d424c585e.png)

请注意，Play 2.0 Support 插件**仅适用于 IntelliJ IDEA Ultimate** Edition。

[请参阅此表](http://www.jetbrains.com/idea/features/editions_comparison_matrix.html)以查看 Community Edition 中没有哪些功能。

如果你买不起 IDEA Ultimate，你还有 30 天的试用时间，或者你可以[申请开源许可证](http://www.jetbrains.com/eforms/openSourceRequest.action?licenseRequest=IIOSL)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-21T20:13:15.717

Play 插件在 Intellij 社区版中不可用。

您可以使用 SublimeText2 或 Eclipse 来替换 Intellij。

# string - SQL 逗号分隔的字符串总数

> ID：14818596
> 
> 赞同：8
> 
> 时间：2013-02-11T18:35:04.470
> 
> 标签：string, sql-server-2008, count

架构：

```
SubscriberId NewsletterIdCsv 
------------ --------------- 
1     48,51,94     
2     43,22
3     33,11
4     90,61 
```

我需要获取每行 NewsletterIdCsv 的计数，然后将它们全部相加以获得所有行的总数，对于基本行数，我正在执行以下操作：

```
SELECT newsletteridcsv, len(newsletteridcsv) - len(replace(newsletteridcsv, ',', '')) +1 IndividualCount
FROM DBTABLE 
```

这给了我结果：

```
NewsletterIdCsv IndividualCount
------------ --------------- 
48,51,94     3
43,22        2
33,11        2
90,61        2 
```

如何获得总计数（在本例中为 9）？

注意：这个表有 500 万条记录，我不认为使用临时表插入计数，然后最后通过临时表行来累积计数是一种优化的方式吗？我也完全反对使用游标来解决效率问题！

获得总数的最佳方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T18:38:48.500

您可以使用[`SUM`](http://msdn.microsoft.com/en-us/library/ms187810%28v=sql.100%29.aspx)将它们添加在一起：

```
SELECT SUM(len(newsletteridcsv) - len(replace(newsletteridcsv, ',', '')) +1) 
    AS TotalCount
FROM DBTABLE 
```

由于您只是要求总数，因此您甚至不需要`GROUP BY`任何东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T18:39:06.430

您已经完成了棘手的部分（len 减去逗号），现在只需运行总和：

```
SELECT sum(len(newsletteridcsv) - len(replace(newsletteridcsv, ',', '')) +1) as TotalCount
FROM DBTABLE 
```

# django - play 2.0 非阻塞模型 vs python tornado 非阻塞模型

> ID：14818597
> 
> 赞同：0
> 
> 时间：2013-02-11T18:35:06.310
> 
> 标签：django, web-applications, playframework-2.0, jetty, tornado

以下讨论已经成功地说明了非阻塞 Web 服务器不会对传统 Web 应用程序有任何好处/更好。

[在 Tornado Web 服务器上运行 Django 以获得 async + django admin + django orm 可能性的最佳方法是什么？](https://stackoverflow.com/questions/8733752/what-is-the-best-way-to-run-django-on-tornado-web-server-to-have-async-django)

```
Django is not asynchronous, so running Django in Tornado will remove most of the performance benefits you might get from Tornado. 
```

Play 框架中存在[非阻塞模型](https://github.com/playframework/Play20/wiki/ScalaAsync)，但它对 Web 服务器没有任何特殊要求（它给我的印象是任何 tomcat 或码头都可以工作，它本身不支持[Tornado 的](http://www.tornadoweb.org/)非阻塞模型）。我的问题是：像 Tomcat 这样的传统 Web 服务器如何使 Play 这样的非阻塞 Web 框架受益？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T09:21:57.437

HTTP 请求的异步服务（当一个线程可以服务多个 HTTP 请求时）从 Servlet API 3 开始[可用。Tomcat 7 和 Jetty 8 支持 Servlet API 3。](http://today.java.net/pub/a/today/2008/10/14/introduction-to-servlet-3.html#asynchronous-support)

在旧的 servlet 2 容器上运行 Play/Akka 应用程序没有太多好处，因为请求不会在其整个生命周期内释放为其分配的线程。然而，即使在这种情况下，异步特性和 Akka Actor 也可以很方便地用于一些后台处理任务。

Django 真的是非异步的。Tornado 内部是异步的，即它允许在单个线程中处理多个 TCP 连接，但是当`tornado.wsgi`用于与 Django 互操作时，它会为请求分配一个线程，在其中调用 WSGI 可调用的，并将该线程分配给这个单个请求以用于它的一生。WSGI 类似于 Servlet API 2。

# objective-c - 目标 c - 应用程序委托 - 类型转换

> ID：14818598
> 
> 赞同：0
> 
> 时间：2013-02-11T18:35:07.090
> 
> 标签：objective-c

我从代码示例中获得了以下代码。您能否根据目标 c 告诉我，这只是类型转换一个已经在会话中的 appdelegate 对象（或）创建一个新的 uiapplication 委托对象吗？抱歉，这是一个基本问题，因为我是目标 c 的新手，但我仍然想在继续之前说清楚。

```
AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:36:56.337

它只是访问由`delegate`返回的单例的属性`sharedApplication`。类型转换对于抑制编译器警告是必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:36:57.630

`delegate`只是一个吸气剂。此代码获取对`UIApplication`'`delegate`属性的引用......它不会创建任何新实例。

# macos - 无法在 mac 上的 qtcreator 中编写方括号和花括号

> ID：14818599
> 
> 赞同：1
> 
> 时间：2013-02-11T18:35:10.677
> 
> 标签：macos, qt-creator

我正在尝试在带有西班牙语键盘的 mac 机器上使用 QTCreator。我无法在编辑器中输入 { now [ 。我检查了是否有任何键盘快捷键“捕获”了用于键入这些的组合键，但要么我没有找到它，要么没有。在我放弃 QTCreator 之前，我们非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:53:46.220

I solved my problem by updating QTCreator to the latest version in the web. This is, in version 2.6.2 of QTCreator that comes with WT 5.0.0 the square and curly braces do not work, at least, for spanish keyboards. Updating to version 2.6.2, which comes with QT 5.0.1 they all seem to work fine.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T12:51:34.947

你可以试试：

CTRL + ALT + SHIFT + 8/9？

# php - CakePHP 2.3 的模板引擎

> ID：14818602
> 
> 赞同：4
> 
> 时间：2013-02-11T18:35:26.227
> 
> 标签：php, cakephp, smarty, laravel

我想在 CakePHP 2.3 中使用**Smarty**或**Blade** (Laravel) 模板引擎。这是可能的？

如果是，如何？

如果你知道 CakePHP 的其他模板引擎，请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T19:08:29.103

是的，有可能，您必须将供应商库包装在[扩展 CakePHP 的基本视图类的视图类中](http://book.cakephp.org/2.0/en/views.html#creating-your-own-view-classes)。

但是模板引擎是无用的开销，如果设计者必须学习诸如 {Foo.field} 与 echo $foo['field']; 之类的东西，这并不重要。

只需在谷歌上搜索“cakephp smarty”和“cakephp twig view”，您就会发现一些东西。如果你真的想要那个开销，即使它被缓存了，我也会选择 Smarty 上的树枝。

CakePHP 的基于 OOP 的现代视图解决方案是[https://github.com/jameswatts/cake-toolkit](https://github.com/jameswatts/cake-toolkit)，您可以构建自定义对象，根据需要继承它们，覆盖它们......通常的 OOP 东西。它甚至可以与模板引擎结合使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:19:57.680

这可能对你有帮助[http://bakery.cakephp.org/articles/tclineks/2006/10/27/how-to-use-smarty-with-cake-smartyview](http://bakery.cakephp.org/articles/tclineks/2006/10/27/how-to-use-smarty-with-cake-smartyview)

但是对于使用 Smarty 而不是传统的原生 PHP 模板的决定不应掉以轻心。尽管 Smarty 显然是用于简单模板的出色工具，但它的功能仍然只是大型项目中可能需要的功能的一个子集。尽管可以通过使用 {php } 和 {/php } 标签使用原生 PHP 对其进行扩展，但这样做首先违背了使用安全模板的目的。事实上，Smarty 自己的网站声明“非常不鼓励将 PHP 代码嵌入到模板中。” 在项目中与您合作的任何其他开发人员的技能和经验可能是决定因素。如果您是一个项目的唯一工程师，那么使用原生模板几乎肯定会更好。反过来，

# mongodb - MongoDB：将_id哈希为整数？

> ID：14818605
> 
> 赞同：3
> 
> 时间：2013-02-11T18:35:34.250
> 
> 标签：mongodb, hash

在 mongoDB 中使用大型集合时，对文档样本而不是整个集合进行分析通常很有帮助。一种干净的方法是通过将 ObjectId 映射到整数上的哈希函数运行 ObjectId，然后使用 $mod 选择文档的子样本。

要点是以一种有效随机的方式抽取文档样本：选择到集合中与我们可能关心的任何其他内容无关。

有没有好的方法来做到这一点？如果查询很快，则加分。

PS：我知道[随机属性](http://cookbook.mongodb.org/patterns/random-attribute/)的方法，但不太喜欢它，因为它浪费存储空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:48:40.070

难道你不能在一个数组中获取集合中文档的所有 objectId，对数组进行排序，然后在该数组中选择随机索引位置吗？

# spotify - 使用 libspotify 搜索播放列表：缺少结果

> ID：14818606
> 
> 赞同：2
> 
> 时间：2013-02-11T18:35:34.513
> 
> 标签：spotify, libspotify

我们正在尝试通过 libspotify 搜索播放列表。我们正在使用搜索功能通过以下功能按关键字搜索：

search.html#ga2f64dfbcc1313e7d5179998cb28208d4">https://developer.spotify.com/technologies/libspotify/docs/12.1.45/group_search.html#ga2f64dfbcc1313e7d5179998cb28208d4

大多数时候，我们正在取得成果。但是一些明显的播放列表似乎不匹配。

例如，我们在自己的帐户中创建了一个播放列表，其名称几乎是唯一的（我们确信不会有很多匹配项）。然后我们搜索它，尽管我们使用它的名称作为关键字，但它并没有出现在结果中。播放列表是公开的。

是否有某些播放列表不可搜索的原因？国家限制 ？它似乎与它的订阅者数量无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:47:37.500

Spotify 最近宣布，该服务上有超过[10 亿个播放列表](http://www.theverge.com/2012/12/6/3736140/spotify-five-million-paid-users)。

有了这么大的搜索池，“直播”播放列表搜索根本不切实际。我不确定具体细节，因为我不是该团队的一员，但我相当确定播放列表需要在服务上存在一段时间才能包含在搜索索引中。一旦您的播放列表在索引中，它应该会显示出来。

不幸的是，我没有任何可以分享的关于包含在搜索索引中的确切时间。

# macos - 运行 android ndk-build 时出现问题

> ID：14818607
> 
> 赞同：0
> 
> 时间：2013-02-11T18:35:38.147
> 
> 标签：macos, android-ndk, terminal, gnu-make

我正在尝试从 github 创建一个 google 的 tesserac 库的构建。

我在安装了 android sdk、android ndk、Xcode 和 eclipse 的 Mac Book Pro 上。以下是我在终端中所做的事情以及我得到的错误..这对我来说都是希腊语。

```
 Last login: Mon Feb 11 11:57:51 on ttys000
BOSelidd196775:~ elidd1$ cd /Users/elidd1/Documents/libraries/Tesseract\ Optical\ Character\ Recognition/tess-two-master/tess-two 
BOSelidd196775:tess-two elidd1$ ndk-build 
```

错误：找不到“制作”程序。请安装 Cygwin make 包或定义 GNUMAKE 变量指向它。BOSelidd196775:tess-两个 elidd1$

好的，问题已解决，我没有安装 xcode 命令行工具.. 只是 xcode。无论如何，解决了这个问题我得到了以下错误：

```
Last login: Mon Feb 11 14:35:59 on ttys000
BOSelidd196775:tess-two elidd1$ cd /Users/elidd1/Documents/libraries/TesseractOpticalCharacterRecognition/tess-two-master/tess-two
BOSelidd196775:tess-two elidd1$ ndk-build
make: /Users/elidd1/SDKS/android-ndk-r6b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/darwin-x86/bin/arm-linux-androideabi-gcc: Command not found
make: /Users/elidd1/SDKS/android-ndk-r6b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/darwin-x86/bin/arm-linux-androideabi-gcc: Command not found
make: /Users/elidd1/SDKS/android-ndk-r6b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/darwin-x86/bin/arm-linux-androideabi-gcc: Command not found
make: /Users/elidd1/SDKS/android-ndk-r6b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/darwin-x86/bin/arm-linux-androideabi-gcc: Command not found
make: /Users/elidd1/SDKS/android-ndk-r6b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/darwin-x86/bin/arm-linux-androideabi-gcc: Command not found
make: /Users/elidd1/SDKS/android-ndk-r6b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/darwin-x86/bin/arm-linux-androideabi-gcc: Command not found
make: /Users/elidd1/SDKS/android-ndk-r6b/toolchains/x86-4.4.3/prebuilt/darwin-x86/bin/i686-android-linux-gcc: Command not found
make: /Users/elidd1/SDKS/android-ndk-r6b/toolchains/x86-4.4.3/prebuilt/darwin-x86/bin/i686-android-linux-gcc: Command not found
make: /Users/elidd1/SDKS/android-ndk-r6b/toolchains/x86-4.4.3/prebuilt/darwin-x86/bin/i686-android-linux-gcc: Command not found
Compile thumb  : lept <= adaptmap.c
/bin/sh: /Users/elidd1/SDKS/android-ndk-r6b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/darwin-x86/bin/arm-linux-androideabi-gcc: No such file or directory
make: *** [/Users/elidd1/Documents/libraries/TesseractOpticalCharacterRecognition/tess-two-master/tess-two/obj/local/armeabi/objs/lept/src/src/adaptmap.o] Error 127
BOSelidd196775:tess-two elidd1$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T02:28:42.760

'ls /Users/elidd1/SDKS/android-ndk-r6b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/darwin-x86/bin/arm-linux-androideabi-gcc' 的输出是什么？听起来您的 ndk 安装不正确或 ANDROID_NDK_ROOT 环境变量指向不正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:59:31.573

我的路径没有在终端中正确设置

# ruby - ruby 使用带有开关的 mod

> ID：14818612
> 
> 赞同：0
> 
> 时间：2013-02-11T18:36:01.160
> 
> 标签：ruby

我正在尝试为一副纸牌创建散列，但我无法确定何时工作以使其成为王牌。我的所有密钥都没有显示为 A，仍在使用 JQK。显然我不明白红宝石中的开关是如何工作的。

```
def generateDeck
  d1 = Hash.new
  ['C', 'D', 'H', 'S'].each do |suite|
    case suite
    when 'D'
      loopStart = 14
      loopEnd   = 26
    when 'H'
      loopStart = 27
      loopEnd   = 39
    when 'S'
      loopStart = 40
      loopEnd   = 52
    else    
      loopStart = 1
      loopEnd   = 13
    end # of switch

    loopStart.upto(loopEnd) do |loop|
      puts("CurrentLoop: #{loop}")
      puts("Should Be Ace: #{loop % 13 == 1}")

      case loop
      when (loop % 13 == 1)
        d1['A' + suite] = loop
      when 11
        d1['J' + suite] = loop
      when 12
        d1['Q' + suite] = loop
      when 13
        d1['K' + suite] = loop
      else
        d1["#{loop}#{suite}"] = loop
      end # of switch
    end # of do
  end # of do

  d1['JA'] = 53
  d1['JB'] = 54
  return d1
end # of generateDecks

d1 = generateDeck 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:51:36.737

有一些更简单的方法可以生成一副纸牌，但要使您的方法有效，您的第二个案例陈述需要修改。由于您在各种循环中从 1 开始并转到 52，因此每第 13 张牌将是一张 K，因此无论何时`x % 13 == 0`。您可以对其他面卡做出相同的陈述，例如 Jack: `x % 13 == 11`。王牌是`x % 13 == 1`。常见的测试是`x % 13`，所以这就是你放在后面的内容`case`：

```
case loop % 13 
when 1
  d1['A' + suite] = loop
when 11
  d1['J' + suite] = loop
when 12
  d1['Q' + suite] = loop
when 0
  d1['K' + suite] = loop
else
  d1["#{loop % 13}#{suite}"] = loop
end 
```

既然你问了，这里有一个更简单的版本。这会迭代两个集合 - 套装和卡片值 - 并将每个组合插入到哈希中：

```
deck = {"JA" => 53, "JB" => 54}
%w(C D S H).each_with_index do |suit, s_index|
  %w(A 2 3 4 5 6 7 8 9 10 J Q K).each_with_index do |card, c_index|
    deck["#{card}#{suit}"] = 13 * s_index + 1 + c_index
  end
end 
```

# python - 将函数列表应用于单个变量

> ID：14818614
> 
> 赞同：1
> 
> 时间：2013-02-11T18:36:04.277
> 
> 标签：python

我将三个过滤器应用于一个数据结构，*一个接一个*地保存我的数据。我可以更整洁地做到这一点吗？就像对封装三个过滤器的类的一次调用或将其从一个过滤器传递到另一个过滤器（更像是一个协同程序）[后者](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CDYQFjAB&url=http://www.dabeaz.com/coroutines/Coroutines.pdf&ei=dTkZUeG9A4XsrAfbxIDYDA&usg=AFQjCNE4C2E-kSH8E3D4jVcJFXClBmkKpg&sig2=P4JwH5pTU-2ULQ3yBVz0Ig&bvm=bv.42080656,d.bmk)看起来相当可怕，所以我可以用前一个范例巧妙地做到这一点吗？

例如， **data_list**保存我的数据

```
def _filter1(elem):
    return elem < 0        

def _filter2(element):
    ...
def _filter3(element):
    ...

list = filter(_filter1,list)
list = filter(_filter2,list)
list = filter(_filter3,list) 
```

我想这将是最简单的表达方式：

```
filters = [_filter1, _filter2, _filter3]
list = apply_filters(*filters) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:41:28.620

你可以这样做[`functools.reduce`](http://docs.python.org/dev/library/functools.html#functools.reduce)：

```
from functools import reduce
list = reduce(lambda acc, pred: filter(pred, acc), filters, list) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:40:38.650

```
filters = (_filter1, _filter2, _filter3)
list_after = filter(lambda x: all(f(x) for f in filters), your_list) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:41:02.560

使用列表推导：

```
lst = [x for x in lst if _filter1(x) and _filter2(x) and _filter3(x)] 
```

使用组合所有过滤器的函数：

```
def apply_filters(lst, *filters):
    def _filter(elem):
        return all(f(elem) for f in filters)
    return filter(_filter, lst)

lst = apply_filters(lst, _filter1, _filter2, _filter3) 
```

作为旁注，不要`list`用作变量名，因为它会掩盖内置的。

# android - 相对布局重叠

> ID：14818620
> 
> 赞同：0
> 
> 时间：2013-02-11T18:36:19.280
> 
> 标签：android, android-relativelayout

祝大家好运。

当我遇到一个重叠的问题时，我正在研究一个简单的自定义 ArrayAdapter。

这是我的布局的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="@+id/label" />

    <EditText
        android:id="@+id/editText"
        android:hint="0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="10dp">
    </EditText>

</RelativeLayout> 
```

问题是，如果标签太长，它会与 edittext 元素重叠。

我也尝试过使用带有权重的水平布局，但是当标签太长时，edittext 会超出屏幕。

我已经阅读了 6 篇关于相对布局重叠的帖子，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:48:51.563

将 android:layout_toRightOf="@id/label" 添加到您的编辑文本中。这将使其始终出现在标签的右侧

# php - 使用 phpseclib 和 net_ssh 如何使用 $ssh->exec su 到 root

> ID：14818621
> 
> 赞同：6
> 
> 时间：2013-02-11T18:36:19.020
> 
> 标签：php, ssh, command-line-interface, phpseclib

所以我需要执行一个命令，但它只会在我 su 到 root （或 sudo ）时运行，但我似乎无法弄清楚如何将命令发送到 su 到 root

（我可以用 loginuser 很好地登录并执行其他命令）

[http://phpseclib.sourceforge.net/ssh/examples.html](http://phpseclib.sourceforge.net/ssh/examples.html)

我的代码如下

```
<?php
include('Net/SSH2.php');

$ssh = new Net_SSH2('255.255.255.255',22);
if (!$ssh->login('loginuser', 'fakepassword')) {
    exit('Login Failed');
}

echo $ssh->read('[prompt]');
echo $ssh->write("su\n");
echo $ssh->read('Password:');
echo $ssh->write("rootfakepassword");
echo $ssh->read('[prompt]');
echo $ssh->exec('cc get_wireless_status');
?> 
```

我也尝试过使用 exec 命令做大致相同的事情，但没有运气

有什么建议么？

代码的当前版本（不起作用）

```
<?php
    include('Net/SSH2.php');

    $ssh = new Net_SSH2('255.255.99.74',22);
    if (!$ssh->login('loginuser', 'password')) {
        exit('Login Failed');
    }

    echo $ssh->read('loginuser@intranet:/home/login >');
    $ssh->write("su\n");
    echo $ssh->read('Password:');
    $ssh->write("rootpassword\n");
    echo $ssh->read('intranet:/home/login #');
    $ssh->write("cc get_wireless_status\n");
    echo $ssh->read('[prompt]');
?> 
```

登录的腻子文本

```
login as: loginuser
loginuser@255.255.99.74's password:
Last login: Thu Feb 14 13:57:16 2013 from infong1045.lxa.perfora.net

Sophos UTM
(C) Copyrights by Astaro and by others 2000-2012.
For more copyright information look at /doc/astaro-license.txt
or http://www.astaro.com/doc/astaro-license.txt

NOTE: Any modifications done by root will void your support.
      Please use WebAdmin for any configuration changes.

loginuser@intranet:/home/login > su
Password:
intranet:/home/login # 
```

最新版本代码的响应

```
Last login: Thu Feb 14 14:00:00 2013 from 10.10.10.194 Sophos UTM (C) Copyrights by Astaro and by others 2000-2012\. For more copyright information look at /doc/astaro-license.txt or http://www.astaro.com/doc/astaro-license.txt NOTE: Any modifications done by root will void your support. Please use WebAdmin for any configuration changes. loginuser@intranet:/home/login > Last login: Tue Feb 19 11:09:18 2013 from infong1045.lxa.perfora.net Sophos UTM (C) Copyrights by Astaro and by others 2000-2012\. For more copyright information look at /doc/astaro-license.txt or http://www.astaro.com/doc/astaro-license.txt NOTE: Any modifications done by root will void your support. Please use WebAdmin for any configuration changes. loginuser@intranet:/home/login > su Password: intranet:/home/login # Last login: Tue Feb 19 11:09:23 2013 from infong1045.lxa.perfora.net Sophos UTM (C) Copyrights by Astaro and by others 2000-2012\. For more copyright information look at /doc/astaro-license.txt or http://www.astaro.com/doc/astaro-license.txt NOTE: Any modifications done by root will void your support. Please use WebAdmin for any configuration changes. loginuser@intranet:/home/login > cc get_wireless_status -bash: /usr/local/bin/confd-client.plx: Permission denied loginuser@intranet:/home/login > 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T03:19:15.063

这应该有效：

```
<?php
    include('Net/SSH2.php');

    $ssh = new Net_SSH2('www.domain.tld');
    if (!$ssh->login('username', 'password')) {
        exit('Login Failed');
    }

    echo $ssh->read('username@username:~$');
    $ssh->write("su\n");
    echo $ssh->read('Password:');
    $ssh->write("password\n");
    echo $ssh->read('username@username:~#');
    $ssh->write("cc get_wireless_status\n");
    echo $ssh->read('[prompt]');
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T03:06:17.893

```
<?php
    include('Net/SSH2.php');

    $ssh = new Net_SSH2('www.domain.tld');
    if (!$ssh->login('username', 'password')) {
        exit('Login Failed');
    }

    $ssh->setTimeout(5);
    echo $ssh->read('username@username:~$');
    $ssh->write("su\n");
    echo $ssh->read('Password:');
    $ssh->write("password\n");
    echo $ssh->read('username@username:~#');
    $ssh->write("cc get_wireless_status\n");
    echo $ssh->read('[prompt]');
?> 
```

我修改了您的代码片段以包含 setTimeout()。因此，如果对 read() 的一次调用失败，则该调用将超时并回显到该点为止的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T19:38:55.350

你可能需要做回声`$ssh->write("rootfakepassword\n");`

IE。注意\n。

当您在 putty 或任何您必须按 Enter 键中运行命令时。这一事实也需要反映在您通过 phpseclib 发送到服务器的内容中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:30:50.350

苏不是这里的路。相反，使用*sudo ，同时使用**NOPASSWD*标志将自己添加到*/etc/sudoers*文件中，然后简单地发出 sudo 命令。[您可以在此处](https://askubuntu.com/a/168470)了解如何执行此操作。

 *或者，您可以在 phpseclib 脚本中使用 expect 来生成 root shell（不推荐这样做，这是一个非常肮脏的技巧）：

```
echo $ssh->exec('expect -c \'log_user 0; set timeout -1; spawn /bin/su; expect "Password:"; send "rootpassword\r"; expect "\r\n"; send "/usr/bin/id\r\n"; log_user 1; expect "uid=0"\''); 
```

在我正在尝试的机器上，我得到以下输出：

> /usr/bin/id
> 
> root@machine:/home/user# /usr/bin/id uid=0(root) gid=0(root) groups=0(root)

同样，这种方法很脏，并且有很多不需要的输出，如果您阅读一些*期望* [文档](http://linux.die.net/man/1/expect)，我猜您可以对其进行修剪。很抱歉没有为您提供更清洁的解决方案，但恐怕这已经是最好的了。*

# .net - 一种使用 ASCII 编码 Unicode 字符的方法

> ID：14818623
> 
> 赞同：0
> 
> 时间：2013-02-11T18:36:25.950
> 
> 标签：.net, vb.net, sockets, encoding, character-encoding

我有这个代码：

```
' Connects to the server
Dim _tcpClient As New System.Net.Sockets._tcpClient
_tcpClient.Client.Connect(server, port)
' Open network stream
Dim _headerToSend As String = "POST evpost HTTP/1.0"... ' CityName = Čelpěkéy
Dim _networkStream As NetworkStream = _tcpClient.GetStream
Dim bytesToSend As Byte() = Encoding.ASCII.GetBytes(_headerToSend)
' Send the text to tcp server
_networkStream.Write(bytesToSend, 0, bytesToSend.Length) 
```

我正在尝试将值“ **Čelpěkéy** ”保存在数据库中，实际上已保存为“ **Celpekéy** ”。这是因为我正在使用`Encoding.ASCII`这些字符并且 ASCII 不支持这些字符。

注意事项：

*   另一面是“黑匣子”，所以如果我更改编码，它将不起作用（例如`Encoding.Unicode`）。
*   DB 中的列是*nvarchar*。如果我直接修改此字段，则正确保存值“Čelpěkéy”。
*   需要的字符是：[http](http://webdesign.about.com/od/localization/l/blhtmlcodes-cz.htm) ://webdesign.about.com/od/localization/l/blhtmlcodes-cz.htm 。

**更新**

你知道有什么技巧可以让我仍然使用 ASCII 编码来保存 Unicode 字符吗？
或者
您是否认为使用 ASCII 编码不可能做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:41:53.043

看起来你想要`Encoding.Unicode.GetBytes`的是 UTF8 版本，而不是 ASCII 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T11:04:15.797

```
Public Function DECODE(ByVal x As String) As String
        If x IsNot Nothing Then
            Dim b As Byte() = Encoding.GetEncoding(1250).GetBytes(x)
            Return Encoding.ASCII.GetString(b)
        Else
            Return x
        End If
End Function 
```

1250 是东欧（罗马尼亚）的代码。所以'Ceauşescu'将被翻译成'Ceausescu'

使用特定于您所在国家/地区的代码。

# android - Google Play 开发者控制台 - 无法更新应用程序，说应用程序标题已被包名使用...我自己的包名

> ID：14818625
> 
> 赞同：1
> 
> 时间：2013-02-11T18:36:26.890
> 
> 标签：android, console, google-play, updating

在 Google Play 开发者控制台上更新任何应用程序时遇到实际问题。

这是我做过2到3次的事情。。

*   增加清单中的版本代码
*   更改版本名称是清单以反映这一点
*   保持包装完全相同
*   尝试保持导出的 .apk 名称完全相同
*   尝试对导出的 .apk 名称收费
*   密钥库和密码完全相同
*   在控制台上，点击上传新应用，准确输入相同的标题，然后点击上传
*   出现错误说标题（我现有应用程序的）当前正在使用，我现有应用程序的包名称。
*   这对于英语，美国和英国都是一样的。

有一点，我可以成功更新一次，然后我更改了我的公司名称，从那以后我一直无法更新。

*   虽然我确实从头开始创建了一个新的测试应用程序，但使用新的密钥库将其导出。
*   尝试通过此过程进行更新，并且发生了完全相同的情况。

非常感谢您对此的任何帮助...这会加速一些新白发的到来！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T18:43:23.037

您不应该单击“上传新应用程序”。您需要单击左侧的 APK 部分，然后单击“上传新 APK”按钮。

# sorting - 根据对象参数按字母顺序添加的对象的 LinkedList

> ID：14818628
> 
> 赞同：0
> 
> 时间：2013-02-11T18:36:38.083
> 
> 标签：sorting, object, parameters, linked-list, alphabetical

按对象参数之一的字母顺序将对象添加到我的 LinkedList 的最佳方法是什么？我有一门课，它接受姓氏、名字和其他一些东西。我已经创建了该类的一个对象，并且参数都是用户提交的，并且我必须将每个创建的对象存储到 LinkedList 中。对象必须按照姓氏的字母顺序添加到链表中。最好的方法是什么？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:55:56.670

您可以使用“<a href="http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#compareTo%28java.lang .String%29" rel="nofollow">compareTo” 函数查找插入新值的正确索引。

二进制搜索包括将中间元素键值与给定键（在本例中为您的新元素）进行比较。如果你完成了键匹配，那就是正确的索引，如果它不匹配但值大于你的键值，你必须再次使用数组的左半部分进行搜索，相反，你进行搜索再次与右半边

# apache - 从 index.php?.... 重写为 index.php%3F....html

> ID：14818646
> 
> 赞同：1
> 
> 时间：2013-02-11T18:37:19.113
> 
> 标签：apache, mod-rewrite, wget

我正在尝试使用此 wget 行将静态站点设为 b2evolution 站点：

```
 wget -nv -b -m -k -p -E -erobots=off --tries=5 --exclude-directories=calendar,users,user --domains directory http://site.com 
```

它产生这样的文件：

```
 index.php?blog=2&cat=21.html 
```

尝试访问此网址：

```
 http://site.com/index.php?blog=2&cat=21.html 
```

我在浏览器上收到此错误：

```
 Not Found
  The requested URL /index.php was not found on this server. 
```

这在error.log上：

```
 [Mon Feb 10 19:02:49 2013] [error] [client xx.xx.xx.xx] script '/var/www/site.com/htdocs/index.php' not found or unable to stat, referer: http://site.com/index.php 
```

但我可以使用 %3F 代替“？”来访问：

```
 http://site.com/index.php%3Fblog=2&cat=21.html 
```

我的范围是允许使用 apache rewrite_mod 修改 '？使用“%3F”。我尝试过：

```
 RewriteRule ^index.php\? index.php\%3F [QSA,NE] 
```

但我在日志上收到此错误：

```
 Request exceeded the limit of 10 internal redirects due to probable configuration error. Use 'LimitInternalRecursion' to increase the limit if necessary. Use 'LogLevel debug' to get a backtrace. 
```

有什么想法可以用 mod_rewrite 或其他 wget 参数解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:54:04.787

如果文件名包含`?`.

```
RewriteEngine On
RewriteCond %{QUERY_STRING} (.+)
RewriteRule ^(index\.php)$ $1\%3F%1 [L] 
```

它的工作原理如下：

*   `RewriteRule`***首先***评估，匹配存储在 $0, $1, ...
*   成功后，`RewriteCond`进行评估并将匹配存储在 %0, %1, ...
*   最后，将两场比赛结合起来
*   文字`%`字符被转义为`\%`（必要的，因为`%n`用于 RewriteCond 反向引用）
*   `%3F`是 URL 编码形式`?`，否则表示查询字符串的开头
*   `.+`用于匹配非空查询字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T01:33:23.243

请参阅 --restrict-file-names 选项。虽然不完全用于此特定目的，但 --restrict-file-names=windows 可能会帮助您：

> --restrict-file-names=模式
> 
> 更改在生成本地文件名期间必须对远程 URL 中的哪些字符进行转义。[...]
> 
> 当给出“windows”时，Wget 会转义字符 \、|、/、:、?、"、*、<、> 以及 0--31 和 128--159 范围内的控制字符。除此之外, Windows 模式下的 wget 使用 + 代替 : 来分隔本地文件名中的主机和端口，并使用 @ 代替 ? 将文件名的查询部分与其余部分分隔。因此，将保存为 www 的 URL。 xemacs.org:4300/search.pl?input=blah 在 Unix 模式下将被保存为 www.xemacs.org+4300/search.pl@input=blah 在 Windows 模式下。

# xpages - 在使用时验证文件上传？

> ID：14818649
> 
> 赞同：0
> 
> 时间：2013-02-11T18:37:30.523
> 
> 标签：xpages

我希望能够在上传文件之前验证文件上传控件。我当然希望提供一个文件名，但更重要的是一个不包含任何空格的文件名。

如果我使用常规验证，则每次保存表单时都会验证控件。

有没有办法阻止用户选择我不想要的文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T21:56:06.290

我在我当前的项目中这样做。我使用 CSJS 在上传之前检查文件名。在此示例中，我使用一个按钮将文件上传控件和其他几个字段添加到新文档中。您可以更改它以检查特定文件名并检查空格。我的上传控件被命名为“fileUpload3”，你的就是你的名字。

```
var x=document.getElementById("#{id:fileUpload3}").value;

if (x==null || x=="" || x.slice(-3) != "pdf")
{
   alert("Store Transfer details in PDF format are required.");
   return false;
} 
```

# windows - 无法让 Windbg 加载符号

> ID：14818653
> 
> 赞同：0
> 
> 时间：2013-02-11T18:37:59.033
> 
> 标签：windows, debugging, stack-overflow, windbg

我承认对 Windbg 完全陌生，所以希望这是一个我在互联网上找不到答案的愚蠢问题。

无论如何，这是我的符号路径： SRV*c:\symbols* [http://msdl.microsoft.com/download/symbols](http://msdl.microsoft.com/download/symbols)

我有一个我制作的小命令行程序，所以我转到 File -> Open Executable

我选择 .exe 并从该屏幕给它两个参数。然后我转到命令窗口并按“g”运行我的程序。我得到以下输出。

```
CommandLine: C:\Users\me\devcode\folder\program\myprogram.exe input1 outputdir
Symbol search path is: SRV*c:\symbols*http://msdl.microsoft.com/download/symbols
Executable search path is: 
ModLoad: 01320000 01367000   image01320000
ModLoad: 779b0000 77b30000   ntdll.dll
ModLoad: 76e30000 76f40000   C:\Windows\syswow64\kernel32.dll
ModLoad: 76790000 767d7000   C:\Windows\syswow64\KERNELBASE.dll
(19a8.1cf0): Break instruction exception - code 80000003 (first chance)
eax=00000000 ebx=00000000 ecx=cb5b0000 edx=0026ddf8 esi=fffffffe edi=00000000
eip=77a50fab esp=001af830 ebp=001af85c iopl=0         nv up ei pl zr na pe nc
cs=0023  ss=002b  ds=002b  es=002b  fs=0053  gs=002b             efl=00000246
ntdll!LdrpDoDebuggerBreak+0x2c:
77a50fab cc              int     3
0:000> g
(19a8.1cf0): Stack overflow - code c00000fd (first chance)
First chance exceptions are reported before any exception handling.
This exception may be expected and handled.
*** ERROR: Module load completed but symbols could not be loaded for image01320000
eax=008872a8 ebx=7efde000 ecx=008872a8 edx=00887e60 esi=00000000 edi=00000000
eip=01327076 esp=000b2fe4 ebp=000b3028 iopl=0         nv up ei pl nz na pe nc
cs=0023  ss=002b  ds=002b  es=002b  fs=0053  gs=002b             efl=00010206
image01320000+0x7076:
01327076 53              push    ebx 
```

我最关心的是这样一行：

`*** ERROR: Module load completed but symbols could not be loaded for image01320000`

image01320000 来自哪里？这不应该是我的可执行文件的名称吗？我确实有创建的 .pdb 文件。

是的，我的程序是在调试模式下构建的。我只是想获得一个堆栈跟踪，以便找到它报告的堆栈溢出的来源。

谢谢！

# java - 如何使用共享键正确关联多个 BiMap 集合？

> ID：14818656
> 
> 赞同：0
> 
> 时间：2013-02-11T18:38:18.150
> 
> 标签：java, guava, bimap

我有以下 BiMap 集合：

```
BiMap<String,String> accessIds = HashBiMap.create();
accessIds.put("FOO","accessId 1"); //This access Id is common to both FOO and BAR

BiMap<String,String> merchants = HashBiMap.create();
merchants.put("FOO", "merchant 1"); //Both FOO and BAR each have unique merchants
merchants.put("BAR", "merchant 2"); 
```

这些是我目前拥有的 4 个总收藏中的 2 个。所有 4 个集合共享相同的键，但值不同。

我的问题是：**当我有一个 accessIds 键时****，如何确保我可以得到？`merchant 2``FOO`**

在有人指出这两个集合实际上并不共享相同的键之前，请记住 BiMap 强制执行唯一值，因此我无法`"BAR","accessId 1"`在集合中列出。

我不相信 BiMap 是正确的集合，但我确实使用了它的`inverse()`方法。如果有更适合的集合（或我忽略的其他方法），请告诉我。

仅供参考：我将 Guava-14.0-rc1 用于 BiMap 集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T10:59:40.177

根据您的评论，在您的工作流程中，访问 ID 是一个键，而不是一个值，在至少一种情况下，它具有多个关联的值而不是一个。

您可以将 a[`Multimap`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/index.html?com/google/common/collect/Multimap.html)用于您的 Access IDS，假设您可以选择保留哪个值作为访问其他`Map`s（或`BiMap`s，尽管通过您的示例不清楚为什么它们*是* `BiMap`s，但我想这是不相关的）。

```
ImmutableMultimap.Builder<String, String> builder = ImmutableMultimap.builder();
builder.put("FOO", "accessId 1");
builder.put("BAR", "accessId 1");
ImmutableMultimap<String, String> accessIds = builder.build();
ImmutableMultimap<String, String> byAccessIds = accessIds.inverse();

Collection<String> keys = byAccessIds.get("accessId 1"); // ["FOO", "BAR"]
String key = doSomething(keys); // "BAR" is chosen
String merchant = merchants.get(key); // "merchant 2" 
```

如果您不能使用不可变结构，您还可以构建一个正则`Multimap`for `accessIds`（例如使用 a [`HashMultimap`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/index.html?com/google/common/collect/HashMultimap.html)）并使用 反转它[`Multimaps.invertFrom()`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Multimaps.html#invertFrom%28com.google.common.collect.Multimap,%20M%29)。

# tostring - c# stringbuilder tostring双引号问题

> ID：14818658
> 
> 赞同：3
> 
> 时间：2013-02-11T18:38:28.267
> 
> 标签：tostring, stringbuilder, ansi-escape

将字符串从 stringbuilder 转换为字符串时出现问题。该问题与[此问题](https://stackoverflow.com/questions/4379262/c-sharp-stringbuilder-with-quotes-forjson)相似，但略有不同：

这是我的代码简化：

```
StringBuilder sb = new StringBuilder();
sb.Append("\"");
sb.Append("Hello World");
sb.Append("\"");

string test = sb.ToString(); 
```

现在在调试器中 sb 值为：

```
"Hello World" 
```

在调试器中，测试字符串值更改为：

```
\"Hello World\" 
```

当将测试字符串值返回给浏览器时，velue 仍然被转义：

```
\"Hello World\" 
```

我试过使用字符串替换：

```
test = test.Replace("\"", ""); 
```

不走运，我尝试附加 ASCII 字符而不是 \" 并且我还尝试了不同的附加

```
sb.Append('"'); 
```

所有这些都没有运气。有人可以指出我为什么仍然获得转义字符以及如何摆脱它的正确方向。

感谢并感谢任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:59:58.767

好的，似乎在 WCF 中 stringBuilder 会自动添加转义引号。这意味着您无法摆脱这一点。我也做错了。我试图返回一个我应该返回序列化 JSON 对象的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:21:50.487

我没有看到你描述的行为。用反斜杠转义双引号应该可以。以下代码片段

```
 var sb = new StringBuilder();
        sb.Append("Ed says, ");
        sb.Append("\"");
        sb.Append("Hello");
        sb.Append("\"");
        Console.WriteLine(sb.ToString());
        foreach (char c in sb.ToString()) Console.Write(c + "-");
        Console.ReadKey(); 
```

生产

```
Ed says, "Hello"
E-d- -s-a-y-s-,- -"-H-e-l-l-o-"- 
```

如果您在字符串的最终显示中获得实际的反斜杠字符，则可能是在 StringBuilder 和 ToString 代码之后添加的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-04T09:35:19.257

您可以在字符串之前使用逐字字符串文字“@”，然后输入两次引号。这消除了在字符串序列中使用转义的使用:)

```
StringBuilder sb = new StringBuilder();
sb.Append(@"""");
sb.Append("Hello World");
sb.Append(@"""");

string test = sb.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-12T16:37:44.467

在寻找解决方案时，这个问答线程不断出现。对我来说，困惑是调试器转义看起来与稍后我将字符串返回给客户端时应用的 JSON 序列化程序行为**完全相同。**所以线程顶部的代码（和我的代码）工作正常。

一旦我意识到这一点，我将我正在处理的代码转换为返回一个数组（在本例中为 string[]）并存储它而不是原始的字符串对象。随后 JSONResult 序列化程序处理了正确转换数组。

# api - Youtube api 认证错误

> ID：14818663
> 
> 赞同：1
> 
> 时间：2013-02-11T18:38:37.427
> 
> 标签：api, authentication, youtube

我正在尝试使用 youtube API 将视频上传到 youtube。使用以下代码段进行身份验证时收到错误消息

```
YouTubeService service = new YouTubeService("Oakland-YouTubeUploadClient-1", developerKey);
try {
    service.setUserCredentials(username, password);      
} catch (AuthenticationException e) {
    System.out.println("Invalid login credentials.");
    System.out.println("Auth excep. = " + e.getMessage());
    e.printStackTrace();
} catch (Exception e) {
    System.out.println("Excep. = " + e.getMessage());           
    e.printStackTrace();
} 
```

我得到的错误信息如下：

```
[2/11/13 13:09:42:041 EST] 00000056 SystemErr R com.google.gdata.util.AuthenticationException：连接登录 URI 时出错
[2/11/13 13:09:42:041 EST] 00000056 SystemErr R at com.google.gdata.client.GoogleAuthTokenFactory.getAuthToken(GoogleAuthTokenFactory.java:549)
[2/11/13 13:09:42:041 EST] 00000056 SystemErr R 在 com.google.gdata.client.GoogleAuthTokenFactory.setUserCredentials(GoogleAuthTokenFactory.java:397)
[2/11/13 13:09:42:041 EST] 00000056 SystemErr R 在 com.google.gdata.client.GoogleService.setUserCredentials(GoogleService.java:364)
[2/11/13 13:09:42:041 EST] 00000056 SystemErr R 在 com.google.gdata.client.GoogleService.setUserCredentials(GoogleService.java:319)
[2/11/13 13:09:42:041 EST] 00000056 SystemErr R 在 com.google.gdata.client.GoogleService.setUserCredentials(GoogleService.java:303)
[2/11/13 13:09:42:041 EST] 00000056 SystemErr R at com.oakland.egov.videogallery.YouTubeUploadClient.execute(YouTubeUploadClient.java:188)
[2/11/13 13:09:42:041 EST] 00000056 SystemErr R at com.oakland.egov.videogallery.VideoGalleryServlet.uploadFilesFromDisk(VideoGalleryServlet.java:3502)
[2/11/13 13:09:42:041 EST] 00000056 SystemErr R 在 com.oakland.egov.videogallery.VideoGalleryServlet.performTask(VideoGalleryServlet.java:2560)
[2/11/13 13:09:42:041 EST] 00000056 SystemErr R 在 com.oakland.egov.videogallery.VideoGalleryServlet.doPost(VideoGalleryServlet.java:4440)
[2/11/13 13:09:42:041 EST] 00000056 SystemErr R at javax.servlet.http.HttpServlet.service(HttpServlet.java:738)
[2/11/13 13:09:42:041 EST] 00000056 SystemErr R at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
[2/11/13 13:09:42:041 EST] 00000056 SystemErr R 在 com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1449)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R 在 com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:790)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R 在 com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:443)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R 在 com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:175)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R 在 com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R 在 com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:859)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R 在 com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1557)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R 在 com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:173)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R 在 com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:455)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R 在 com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:384)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R 在 com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R 在 com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R 在 com.ibm.io.async.AsyncChannelFuture.fireCompletionActions（AsyncChannelFuture.java:161）
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R 在 com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R 在 com.ibm.io.async.ResultHandler.complete(ResultHandler.java:202)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R 在 com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:766)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:896)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R 在 com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1527)
[2/11/13 13:09:42:057 EST] 00000056 SystemErr R 原因：javax.net.ssl.SSLHandshakeException：com.ibm.jsse2.util.g：PKIX 路径构建失败：java.security.cert。 CertPathBuilderException：PKIXCertPathBuilderImpl 无法构建有效的 CertPath。；内因是：
    java.security.cert.CertPathValidatorException: OU=Equifax Secure Certificate Authority, O=Equifax, C=US 颁发的证书不受信任；内因是：
    java.security.cert.CertPathValidatorException：证书链接错误
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R at com.ibm.jsse2.na(n.java:22)
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R at com.ibm.jsse2.tc.a(tc.java:465)
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R at com.ibm.jsse2.gb.a(gb.java:352)
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R at com.ibm.jsse2.gb.a(gb.java:95)
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R at com.ibm.jsse2.hb.a(hb.java:418)
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R at com.ibm.jsse2.hb.a(hb.java:56)
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R at com.ibm.jsse2.gb.n(gb.java:307)
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R at com.ibm.jsse2.gb.a(gb.java:181)
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R at com.ibm.jsse2.tc.a(tc.java:468)
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R at com.ibm.jsse2.tc.g(tc.java:208)
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R at com.ibm.jsse2.tc.a(tc.java:482)
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R at com.ibm.jsse2.tc.startHandshake(tc.java:597)
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R 在 com.ibm.net.ssl.www2.protocol.https.c.afterConnect(c.java:44)
[2/11/13 13:09:42:072 EST] com.ibm.net.ssl.www2.protocol.https.d.connect(d.java:36) 上的 00000056 SystemErr R
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R 在 sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1024)
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R 在 com.ibm.net.ssl.www2.protocol.https.b.getOutputStream(b.java:66)
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R 在 com.google.gdata.client.GoogleAuthTokenFactory.makePostRequest(GoogleAuthTokenFactory.java:611)
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R 在 com.google.gdata.client.GoogleAuthTokenFactory.getAuthToken(GoogleAuthTokenFactory.java:547)
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R ... 29 更多
[2/11/13 13:09:42:072 EST] 00000056 SystemErr R 原因：com.ibm.jsse2.util.g：PKIX 路径构建失败：java.security.cert.CertPathBuilderException：PKIXCertPathBuilderImpl 无法构建有效证书路径。内因是：
    java.security.cert.CertPathValidatorException: OU=Equifax Secure Certificate Authority, O=Equifax, C=US 颁发的证书不受信任；内因是：
    java.security.cert.CertPathValidatorException：证书链接错误
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R at com.ibm.jsse2.util.eb(e.java:45)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R at com.ibm.jsse2.util.eb(e.java:106)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R at com.ibm.jsse2.util.da(d.java:5)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R at com.ibm.jsse2.hc.a(hc.java:61)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R 在 com.ibm.jsse2.hc.checkServerTrusted(hc.java:10)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R 在 com.ibm.ws.ssl.core.WSX509TrustManager.checkServerTrusted(WSX509TrustManager.java:310)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R at com.ibm.jsse2.hb.a(hb.java:103)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R ... 42 更多
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R 原因：java.security.cert.CertPathBuilderException：PKIXCertPathBuilderImpl 无法构建有效的 CertPath。；内因是：
    java.security.cert.CertPathValidatorException: OU=Equifax Secure Certificate Authority, O=Equifax, C=US 颁发的证书不受信任；内因是：
    java.security.cert.CertPathValidatorException：证书链接错误
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R 在 com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPathBuilderImpl.java:411)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:258)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R at com.ibm.jsse2.util.eb(e.java:70)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R ... 还有 48 个
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R 原因：java.security.cert.CertPathValidatorException：OU=Equifax Secure Certificate Authority、O=Equifax、C=US 颁发的证书不受信任; 内因是：
    java.security.cert.CertPathValidatorException：证书链接错误
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R 在 com.ibm.security.cert.BasicChecker.(BasicChecker.java:111)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R 在 com.ibm.security.cert.PKIXCertPathValidatorImpl.engineValidate(PKIXCertPathValidatorImpl.java:176)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R 在 com.ibm.security.cert.PKIXCertPathBuilderImpl.myValidator(PKIXCertPathBuilderImpl.java:737)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R 在 com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertPathBuilderImpl.java:649)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R 在 com.ibm.security.cert.PKIXCertPathBuilderImpl.buildCertPath(PKIXCertPathBuilderImpl.java:595)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R 在 com.ibm.security.cert.PKIXCertPathBuilderImpl.engineBuild(PKIXCertPathBuilderImpl.java:357)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R ... 50 更多
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R 原因：java.security.cert.CertPathValidatorException：证书链接错误
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R 在 com.ibm.security.cert.CertPathUtil.findIssuer(CertPathUtil.java:298)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R 在 com.ibm.security.cert.BasicChecker.(BasicChecker.java:108)
[2/11/13 13:09:42:103 EST] 00000056 SystemErr R ... 55 更多

```

任何想法、帮助或建议将不胜感激。

# css - CSS在div中定位两个图像

> ID：14818666
> 
> 赞同：0
> 
> 时间：2013-02-11T18:38:40.427
> 
> 标签：css, image, position

我正在尝试以这种样式设置图像：**一个在顶部，另一个在 this 下方**。实际上我做错了什么，在我的结果图像中是一个在另一个之下。**这是** [jsFiddle](http://jsfiddle.net/MP6qN/)。

第二张图片被课堂隐藏`overflow:hidden`。`slider`

## 问题：

我在哪里犯错？我确信有简单的解决方案，但我浪费了一些时间并且找不到它。

**PS** *如果有可能我正在寻找仅更改css的解决方案。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:41:36.937

将图像的 css 更改为：

```
img{
    display:block;
} 
```

这样就行了。

评论后编辑：

```
img{
    position: absolute;
    z-index: -1;
    top: 0px;
    left:0;    
} 
```

这会将您的所有图像钉在左上角。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:43:52.807

我想你的img必须

```
img
{
display:block; /*if you want top to bottom use display:inline;*/

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T19:38:00.447

我看到你已经标记了一个答案，但我已经输入了这个，所以你去吧:)

您也可以通过删除浮动来稍微简化您的 CSS，如果您只为滑块使用图像（图像旁边没有文本），您甚至可以通过删除整个`.photo`div 来简化 HTML。

简化代码：

```
<div class="slider">
    <img src="http://lorempixel.com/754/453/" alt="Bottom Image" />
    <img src="http://placehold.it/754x453" alt="Top Image" />
</div>

.slider {
    overflow: hidden;
    position: absolute;
    top: 1px;
    left: 371px;
    width: 754px;
    height: 453px;
}
img{
    position: absolute;
    z-index: -1;
    top: 0px;
    left:0px;
} 
```

[http://jsfiddle.net/daCrosby/MP6qN/8/](http://jsfiddle.net/daCrosby/MP6qN/8/)

# python - Python dict：创建准备好的语句

> ID：14818667
> 
> 赞同：0
> 
> 时间：2013-02-11T18:38:41.917
> 
> 标签：python, postgresql, dictionary, prepared-statement

我正在用 python 编写一个网站，我需要使用 PostgreSQL 作为我的数据库。我想创建一个准备好的语句来更新表，并尝试创建`set`如下：

```
a=dict(b=3, c='d', x=10)
keys=a.keys()
print ",".join([keys[i] + "=$" + str(i + 1) for i in range(0, len(keys))]) 
```

输出如下

```
x=$1,c=$2,b=$3 
```

可用于生成准备好的更新语句。

我想知道：

*   有没有更好的选择呢？
*   这是一项代价高昂的操作吗（应该将 len(keys) 纳入变量还是一项`O(1)`操作）
*   内部是否有多个 for 循环运行？`a.keys()`是返回密钥的深层副本还是只是一个参考？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:53:40.013

你做得很好；我使用相同代码的可读性更高的版本：

```
a=dict(b=3, c='d', x=10)
print ",".join(['{0}=${1}'.format(k, i) for i, k in enumerate(sorted(a))]) 
```

我对键进行了排序（字典没有固定的顺序）。

Python PostgreSQL 数据库适配器遵循[DBAPI v2.0](http://www.python.org/dev/peps/pep-0249/)规范，该规范支持使用 SQL 参数并让数据库有机会为您准备语句。但是，它们使用不同的语法，通常是规范中命名的一个或两个变体。

# iphone - 无法将分段控件连接到其 IBOutlet

> ID：14818669
> 
> 赞同：3
> 
> 时间：2013-02-11T18:38:47.600
> 
> 标签：iphone, ios, objective-c, xcode4, ios6

我在界面生成器中创建了一个分段控件。

在我的 ViewController.h 中：

```
@interface ViewController : UIViewController <MKMapViewDelegate>
@property IBOutlet UISegmentedControl *Segment;
- (IBAction)switchMode:(id)sender;
@end 
```

我能做的是将分段控件与 IBAction 连接，但我无法将它与 IBOutlet 连接！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T21:43:48.217

*   将分段控件添加到 nib/Storyboard
*   将以下代码添加到 .h

`@property(nonatomic,retain) IBOutlet UISegmentedControl *Segment;`

*   在您的故事板或 xib 中，确保文件所有者的类名与您编写插座的类的类名相同
*   右键单击 segmantControl 并出现一个带有出口和操作的窗口
*   单击并拖动**引用插座** 并将其拖放到文件所有者上会**出现**一个新的弹出窗口，其中包括您用代码编写的插座选择它。

连接已建立

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:42:11.883

你忘了写属性的参数，像下面的代码一样更正它

```
@property(nonatomic,retain) IBOutlet UISegmentedControl *Segment; 
```

在此之后在 .m 文件中合成此属性，如下所示

```
@Synthesize Segment; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:18:38.443

似乎通过一些 xCode 更新，您无法再将某些插座连接到您的 .h。不过，您应该可以在 .m 中连接它：

```
@interface ViewController ()
@property (weak, nonatomic) IBOutlet UISegmentedControl *mySegmentedController;
@end 
```

我会阅读一些文档，看看它什么时候改变了。此外，确实没有理由将此属性连接到您的公共接口（因此不再允许它）。只有该类的 View Controller 才能控制它。

# python - 在python中返回多个值

> ID：14818673
> 
> 赞同：0
> 
> 时间：2013-02-11T18:38:59.780
> 
> 标签：python, syntax

我正在尝试分析和理解一个实现简单 map-reduce 想法的 python 程序。我在理解一些代码时有些困难。

```
Person = namedtuple('Person', ['name', 'gender', 'age', 'height'])

persons = [
    Person('mary', 'fem', 21, 60.2),
    Person('suzy', 'fem', 32, 70.1),
    Person('jane', 'fem', 27, 58.1),
    Person('jill', 'fem', 24, 69.1),
    Person('bess', 'fem', 43, 66.6),
    Person('john', 'mal', 25, 70.8),
    Person('jack', 'mal', 40, 59.1),
    Person('mike', 'mal', 42, 60.3),
    Person('zack', 'mal', 45, 63.7),
    Person('alma', 'fem', 34, 67.0),
    Person('bill', 'mal', 20, 62.1),
]

def height_by_gender_and_agegroup(p):
    key = p.gender, p.age //10
    val = p.height
    return key, val 
```

该函数`height_by_gender_and_agegroup(p)`似乎为每个返回两个值`p`。好像又回来了

```
<key,val> where key is p.gender and val is p.height
<key,val> where key is p.age and val is p.height 
```

我一直在用 C 和 C++ 编程，但对 python 还是很陌生。我的问题是如何在 Python 中按值返回多个对。即假设这就是这段代码正在做的事情。如果是，我如何处理返回值？

下面的答案似乎传达了这样一个事实，即在 python 中返回一个键值对类似于返回一个具有两个成员的结构。我理解那部分。

```
 key = p.gender, p.age //10 
```

我的问题在上面一行。Key 似乎有两个值`p.gender`和`p.age`。如果是这种情况，则需要为 P 的每个值返回两组。这是`<key,value>`如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:40:32.107

它返回的是两个项目的[元组。](http://docs.python.org/2/tutorial/datastructures.html#tuples-and-sequences)（它基本上相当于在 C 中返回一个具有两个字段的结构）。您可以像这样*解压缩*返回的元组：

```
key, val = height_by_gender_and_agegroup(person) 
```

以这种方式考虑它可能会有所帮助：

```
def height_by_gender_and_agegroup(p):
    key = p.gender, p.age //10
    val = p.height
    return (key, val)  # note the optional parentheses to denote a tuple

ret = height_by_gender_and_agegroup(person)
key = ret[0]
val = ret[1]  # "key, val =" is just a shortcut for this 
```

由于您案例中的密钥包含两个值，因此您可以进一步解包：

```
(gender, age), val = height_by_gender_and_agegroup(person) 
```

或者，如果您愿意：

```
key, val = height_by_gender_and_agegroup(person)
gender, age = key 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T18:40:51.047

该函数实际上是返回一个[元组](http://docs.python.org/2/library/functions.html#tuple)。

```
>>> def f(): return 1, 2
... 
>>> type(f())
<type 'tuple'> 
```

像任何元组一样，您可以通过下标或按顺序分配成员来访问其值：

```
>>> first, second = f()
>>> second
2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T18:41:13.340

你可以说：

```
 k,v = height_by_gender_and_agegroup(p) 
```

# java - 更改 Jtable 单元格值

> ID：14818681
> 
> 赞同：1
> 
> 时间：2013-02-11T18:39:23.800
> 
> 标签：java, swing, jtable

我有一个 jtable 保存书籍文件记录并显示它们。

我创建了一个“借用”按钮，当单击未借用的行时，该行的“借用状态”应更改为“是”。

我使用这个代码，但没有改变！

```
public class user_AllBooks extends AbstractTableModel{
BookInformation book_info=new BookInformation();
String[] columns=new String[]{"Book Name","Book Date", "Book ID","Borrow Status"};
ArrayList<BookInformation> bData=new ArrayList<BookInformation>();

public user_AllBooks(){
    try{
        BufferedReader br=new BufferedReader(new FileReader("AllBookRecords.txt"));
        String line;
        while((line = br.readLine()) != null){
            bData.add(initializeBookData(line));
        }
        br.close();
    }
    catch(IOException ioe){

    }
}

public BookInformation initializeBookData(String myline){
    BookInformation book_infos=new BookInformation();
    String[] celledLine=myline.split("     ");
    book_infos.setBookName(celledLine[0]);
    book_infos.setBookDate(celledLine[1]);
    book_infos.setBookID(celledLine[2]);
    book_infos.setBorrowStatus(celledLine[3]);
    return book_infos;
}

@Override
public String getColumnName(int col){
    return columns[col];
}

@Override
public int getRowCount() {
    if(bData != null){
        return bData.size();
    }
    else{
        return 0;
    }
}

@Override
public int getColumnCount() {
    return columns.length;
}

@Override
public Object getValueAt(int rowIndex, int columnIndex) {
    BookInformation bookInf=bData.get(rowIndex);
    Object value;

    switch(columnIndex){     
        case 0:
            value=bookInf.getBookName();
            break;
        case 1:
            value=bookInf.getBookDate();
            break;
        case 2:
            value=bookInf.getBookID();
            break;
        case 3:
            value=bookInf.getBorrowStatus();
            break;
        default :
            value="...";
    }
    return value;    
}
} 
```

二等：

```
public class user_AllBooksM extends JFrame implements ActionListener{
user_AllBooks uAllBooks=new user_AllBooks();
final JTable bTable=new JTable(uAllBooks);
JButton borrowButton;
public user_AllBooksM(){
    setTitle("All Books");
    exitButton=new JButton("Exit");
    borrowButton=new JButton("Borrow");
    borrowButton.addActionListener(this);
    JPanel Bpanel=new JPanel();
    Bpanel.setLayout(new FlowLayout());
    JScrollPane sp=new JScrollPane(bTable);
    Bpanel.add(sp);
    Bpanel.add(borrowButton);
    this.add(Bpanel);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setBounds(300, 60, 550, 550);
    this.setResizable(false);
    this.setVisible(true);
}

@Override
public void actionPerformed(ActionEvent event) {
        borrowInitialize(bTable.getSelectedRow());  
}

public void  borrowInitialize(int row){
    if(uAllBooks.getValueAt(row, 3).equals("yes")) {
        JOptionPane.showMessageDialog(null, "This Book Was Borrowed");
    }
    else{
        uAllBooks.setValueAt("Yes", row, 3);
        uAllBooks.fireTableRowsUpdated(row, row);
    }
}

public static void main(String[] args){
    new user_AllBooksM();
}

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T18:59:50.400

要覆盖`setValueAt`您应该使用：

```
@Override
public void setValueAt(Object value, int row, int col)
{
    BookInformation book_infos = bData.get(row);
    if (col==0)
    book_infos.setBookName((String)value);
    else if (col==1)
    book_infos.setBookDate((String)value);
    else if (col==2)
    book_infos.setBookID((String)value);
    else if (col==3)
    book_infos.setBorrowStatus((String)value);
    fireTableCellUpdated(row,col);
} 
```

在类中定义此方法`user_AllBooks`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T18:47:03.693

您已经覆盖了 getValueAt 方法。所以它总是从你的`bData`数组列表中返回值。

```
public Object getValueAt(int rowIndex, int columnIndex) {
    BookInformation bookInf=bData.get(rowIndex); 
```

因此，您还需要在表模型中实现 setValueAt 方法，以便更改数组列表中的实际数据`bData`。

另请注意，这`bTable.getSelectedRow()` 将为您提供视图方面的选定行。在模型中，如果表已排序，索引可能会有所不同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T19:16:26.910

您可以使用`TableModel#setValueAt`，但您也将负责更新表，这会破坏 MCV 模型。

相反，您可以向您的类添加一个`setBorrowed`方法。`user_AllBooks`

```
public void setBorrowed(int row, boolean borrowed) {
    BookInformation book = bData.get(row);
    book.setBorrowedState(borrowed);
    fireTableCellUpdated(row, 3);
} 
```

# jquery - 无法从文本框中获取文本以匹配正则表达式

> ID：14818685
> 
> 赞同：0
> 
> 时间：2013-02-11T18:39:36.803
> 
> 标签：jquery, regex, validation

无论我在 StreetAddress 中输入什么，它都不会匹配正则表达式。无论是 PO Box PO BOX 邮政信箱。我似乎无法让它工作。有任何想法吗？

```
 function valPoBox(sender, args) {
        var hasPObox = new RegExp('\b[P|p]*(OST|ost)*\.*\s*[O|o|0]*(ffice|FFICE)*\.*\s*[B|b][O|o|0][X|x]\b');
        var StreetAddress = $('.streetaddress').val();

        if (StreetAddress.match(hasPObox)) {
            args.IsValid = false;

            sender.ErrorMessage = "Address must not contain P.O. Box";
//            $('.valPoBox').attr("ErrorMessage", sender.ErrorMessage);
        }
        else {
            args.IsValid = true;
        }
        $('.valPoBox').attr("errormessage", sender.ErrorMessage);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:55:21.983

整个正则表达式太复杂了：

```
var poBoxRegex = /po?(st)? *(office)? box/gi; 
```

结果：

```
"34 po box 333".match(poBoxRegex);
["po box"]
"34 postoffice box 333".match(poBoxRegex);
["postoffice box"]
"34 post office box 333".match(poBoxRegex);
["post office box"] 
```

# configuration - 如何在 Wamp 上纠正这个虚拟主机设置？

> ID：14818692
> 
> 赞同：0
> 
> 时间：2013-02-11T18:40:04.023
> 
> 标签：configuration, virtualhost, wampserver

谁能帮我在我的 WAMP 服务器上设置这个虚拟主机？

我已经在线阅读了几篇文章和博客，但无法进行设置。

我按照这里建议的程序：[http ://www.ruifeio.com/2011/01/30/setting-up-virtual-hosts-on-wampserver/](http://www.ruifeio.com/2011/01/30/setting-up-virtual-hosts-on-wampserver/)

当我执行上述操作时，我的服务器挂断了。目前我将以下内容添加到我的 C:/windows/system32/drivers/etc/hosts 文件中

```
127.0.0.1 tsg.local 
```

我用 Listen 90 更改了我的 httpd.conf Apache 配置文件，因为我使用的是端口 90

另外，按照上述教程中的建议删除了 # 标签。

```
# Virtual hosts
Include conf/extra/httpd-vhosts.conf 
```

我还将以下内容添加到我的 httpd-vhosts.conf

```
<VirtualHost *:90>
ServerAdmin webmaster@localhost
DocumentRoot “C:\wamp\www\tsg\”
ServerName tsg.local
ErrorLog “C:\wamp\www\logs\tsg.log”
CustomLog “C:/wamp/www/logs/common.log” common
</VirtualHost> 
```

并更改： NameVirtualHost *:80 为**NameVirtualHost *:90**

感谢您提前提供帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:01:42.320

如果您的服务器在删除虚拟主机块后可以正常启动，请尝试修复您的报价。看起来您有一些“魔术引号”而不是直引号 - 可能来自教程中的复制和粘贴。试试这个：

```
<VirtualHost *:90>
ServerAdmin webmaster@localhost
DocumentRoot "C:\wamp\www\tsg\"
ServerName tsg.local
ErrorLog "C:\wamp\www\logs\tsg.log"
CustomLog "C:/wamp/www/logs/common.log" common
</VirtualHost> 
```

如果 80 不是一个选项，您可能还想选择一个更标准的端口来监听，8080 或 8888 而不是 90。

# vim - NERDTree：星号/粗体文件表示什么？

> ID：14818696
> 
> 赞同：2
> 
> 时间：2013-02-11T18:40:17.857
> 
> 标签：vim, nerdtree

在 NERDTree 中，文件星号/粗体是什么意思？对于缩小的 JavaScript 文件，有时对于可执行的 shell 脚本，这似乎发生了很多。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T19:22:03.187

带星号的文件是可执行文件。例如，您可以检查`/usr/bin`目录，您会看到该目录中的几乎所有文件都已加星标。

对于粗体，当前根为粗体。例如，如果您选择`/usr/bin/`然后键入`C`，您当前的根目录将是`/usr/bin`，并且会在您的 NERDTree 窗口顶部以粗体显示。

在这里，我没有看到文件名以粗体突出显示...

# arrays - 如何获取对 D 中数组元素的引用？

> ID：14818697
> 
> 赞同：2
> 
> 时间：2013-02-11T18:40:19.877
> 
> 标签：arrays, reference, pass-by-reference, d

我有这个用于从文件中读取数据的 D 代码：

```
int foo (SomeStruct[] somestruct_array)
{
  // get file_handle...
  for (uint i = 0; i < 1000; i++) {
    file_handle.readf ("%e %e %e %e %e %e\n",
            &(somestruct_array[i].pos_x), &(somestruct_array[i].pos_y),
            &(somestruct_array[i].pos_z), &(somestruct_array[i].vel_x),
            &(somestruct_array[i].vel_y), &(somestruct_array[i].vel_z));
  }
  return 0;
} 
```

如你所见，台词越来越长，我一直在重复`somestruct_array[i]`。这没什么大不了的，但我试图缩短它并写下：

```
int foo (SomeStruct[] somestruct_array)
{
  // get file_handle...
  for (uint i = 0; i < 1000; i++) {
    auto elem = somestruct_array[i];
    file_handle.readf ("%e %e %e %e %e %e\n",
            &(elem.pos_x), &(elem.pos_y),
            &(elem.pos_z), &(elem.vel_x),
            &(elem.vel_y), &(elem.vel_z));
  }
  return 0;
} 
```

这导致所有元素成员都是`nan`.

那么：是否可以获得对数组元素的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:28:55.763

问题是这`elem`是数组元素的*副本*`readf`，因此您传递给的指针是指向临时值的指针。

您在这里有两个选择，您可以使用指针：

```
for (uint i = 0; i < 1000; i++) {
    auto elem = &somestruct_array[i];
    file_handle.readf ("%e %e %e %e %e %e\n",
        &(elem.pos_x), &(elem.pos_y),
        &(elem.pos_z), &(elem.vel_x),
        &(elem.vel_y), &(elem.vel_z));
} 
```

或者，您可以通过引用迭代数组：

```
foreach (ref elem; somestruct_array[0..1000]) {
    file_handle.readf ("%e %e %e %e %e %e\n",
        &(elem.pos_x), &(elem.pos_y),
        &(elem.pos_z), &(elem.vel_x),
        &(elem.vel_y), &(elem.vel_z));
} 
```

请注意，如果数组的长度为 1000 个元素，您可以只写：

```
foreach (ref elem; somestruct_array) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:59:17.147

你要：

```
for (uint i = 0; i < 1000; i++) {
auto elem = &somestruct_array[i];
file_handle.readf ("%e %e %e %e %e %e\n",
        &(elem->pos_x), &(elem->pos_y),
        &(elem->pos_z), &(elem->vel_x),
        &(elem->vel_y), &(elem->vel_z));
} 
```

这样你处理的是实际的数组元素引用，而不是对局部自动变量的引用。

# facebook - 打开多个共享按钮的 Graph META 标签

> ID：14818698
> 
> 赞同：1
> 
> 时间：2013-02-11T18:40:22.183
> 
> 标签：facebook, meta-tags

有没有办法为每个 FB 分享按钮设置特定的 og 元标记？

```
<meta property="og:title" content="Youtube video 1" />
<meta property="og:description" content="First link to a youtube video" />
<meta property="og:image" content="http://www.plasticoperator.com/youtube_logo_black.png" />

<a href="http://www.facebook.com/sharer.php?u=http://www.youtube.com/watch?v=FXPXHK7I1iQ" onClick="return fbs_click(626, 305)" target="_blank" >SHARE 1</a>

    <a href="http://www.facebook.com/sharer.php?u=http://www.youtube.com/watch?v=FXPXHK7I1iQ" onClick="return fbs_click(626, 305)" target="_blank" >SHARE 2</a>

    <a href="http://www.facebook.com/sharer.php?u=http://www.youtube.com/watch?v=FXPXHK7I1iQ" onClick="return fbs_click(626, 305)" target="_blank" >SHARE 3</a> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:39:09.443

中没有元标记`<head>`，只需将其与 sharer.php 内联编写即可：

Stichoza 更新的代码

```
<a
    id="fb-share"
    style='text-decoration:none;'
    type="icon_link"
    onClick="window.open(
        'http://www.facebook.com/sharer.php?s=100&p[title]=YOUR_TITLE&p[summary]='
            + 'YOUR_DESCRIPTION&p[url]=YOUR_URL&p[images][0]=YOUR_IMAGE',
        'sharer',
        'toolbar=0,status=0,width=580,height=325');"
    href="javascript: void(0)"
>Share</a> 
```

# ios - CTCallCopyAddress - “架构 armv7 的未定义符号”

> ID：14818699
> 
> 赞同：0
> 
> 时间：2013-02-11T18:40:24.637
> 
> 标签：ios, objective-c, core-telephony, undefined-symbol

*首先 - 我正在开发越狱调整，因此使用私有 API。*

我在[这里](https://stackoverflow.com/questions/7326338/how-can-i-use-private-apis-to-block-incoming-calls-in-an-ios-application/8337642#8337642)关注代码但是，我收到以下编译器错误：

```
Undefined symbols for architecture armv7:
"CTCallCopyAddress(void*, CTCall*)", referenced from:
  telephonyEventCallback(__CFNotificationCenter*, void*, __CFString const*, void const*, __CFDictionary const*) in MyCode.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

当我遇到类似的警告/错误之前是由于在构建阶段丢失了库。然而，我检查了 CoreTelephony.framework 是否已添加。有人对我哪里出错有任何指示吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-29T22:29:24.160

您是在 obj-c 或 obj-c++ 代码中使用此代码吗？如果是后者，那么您需要像这样定义它`extern "C" NSString* CTCallCopyAddress(void*, CTCall*)`。我在 iOS 6 上使用这个 API，从来没有遇到过任何问题。

# iphone - HelloWorld for iOS 应用程序在创建 IOS 入门时，运行时出现未知异常

> ID：14818705
> 
> 赞同：0
> 
> 时间：2013-02-11T18:40:53.997
> 
> 标签：iphone, ios, xcode, ios6, cocos2d-iphone

我正在尝试在 XCode 4.6 上实现入门[helloWorld](https://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/chapters/RM_YourFirstApp_iOS/Articles/05_ConfiguringView.html#//apple_ref/doc/uid/TP40011343-TP40012323-CH7-SW3)，但我得到了这个 sigabart。该代码与苹果网站完全相同。没有产生错误，但在运行时我有这个：

```
2013-02-11 12:38:42.594 hellooWorld[1794:c07] *** Terminating app due to uncaught exception 'NSUnknownKeyException',
 reason: '[<ViewController 0x75562d0> setValue:forUndefinedKey:]: 
this class is not key value coding-compliant for the key greeting.'

*** First throw call stack:

(0x1c91012 0x10cee7e 0x1d19fb1 0xb7ae41 0xafc5f8 0xafc0e7 0xb26b58 0x230019 
0x10e2663 0x1c8c45a 0x22eb1c 0xf37e7 0xf3dc8 0xf3ff8 0xf4232 0x433d5 
0x4376f 0x43905 0x4c917 0x1096c 0x1194b 0x22cb5 0x23beb 0x15698 0x1becdf9
0x1becad0 0x1c06bf5 0x1c06962 0x1c37bb6 0x1c36f44 0x1c36e1b 0x1117a 0x12ffc 
0x267d 0x25a5)
libc++abi.dylib: terminate called throwing an exception 
```

我确实删除了连接并再次连接标签、文本字段和按钮以查看 controller.m 但得到相同的结果。我将文本文件连接到委托，但收到了相同的结果。

有人可以帮助阐明发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T08:04:15.820

在故事板连接检查器中检查对象或方法的链接。

# c# - 更新 ObservableCollection 对象更改的值

> ID：14818706
> 
> 赞同：2
> 
> 时间：2013-02-11T18:40:59.370
> 
> 标签：c#, wpf, notifications, observablecollection

我有一个`ObservableCollection`包含名称和平均值。

然后我有一个文本块，它使用转换器从上面的集合中获得这些平均值的平均值

这个想法是有类似的东西：

```
Name1  2.15 %
Name2  1.24 %
Name3  3.25 %

       2.21 % 
```

名称和平均值列表位于列表框上，来自集合，下面的平均值位于文本块上，该文本块通过对值进行平均的转换器绑定到同一集合。

所有这些都正常工作。现在，列表框中的平均值位于文本框中并且可以编辑，但是当它们被编辑时，平均值的平均值不会更新，因为只有对象内的属性发送属性更改通知，而不是集合本身.

当任何一条线上的平均值发生变化时，有没有办法告诉下面的值自行更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:57:34.340

我建议改变你的设计。

在您的 ViewModel 上创建一个表示您的集合平均值的属性，并将您的文本框绑定到该新属性。

例如...

放入get方法：

```
 //Get my objects and subscribe to their property change event
    MyObjects = GetMyObjects();
    foreach (var item in MyObjects)
    {
        item.PropertyChanged += (sender, e) =>
            {
                if (e.PropertyName == "Value")
                {
                    Average = MyObjects.Average(x.Value);
                }
            };
    } 
```

这是您的新视图模型属性：

```
 //Bind your textbox to this guy
    double _Average;
    public double Average
    {
        get { return _Average; }
        set
        {
            if (_Average != value)
            {
                _Average = value;
                OnNotifyPropertyChanged("Average");
            }
        }
    } 
```

# c++ - 在线程内创建 RInside 实例

> ID：14818708
> 
> 赞同：0
> 
> 时间：2013-02-11T18:41:09.167
> 
> 标签：c++, r, pthreads, rinside

我有兴趣编写一个能够运行 R 脚本的 c++ 程序。出于几个设计原因，我想创建一个 RInside 实例，执行脚本，获取结果，然后销毁该实例；都在一个线程中。我知道 R 不是多线程的，并且不能创建 RInside 的多个实例。但是我可以在隔离线程中创建单个实例吗？当我尝试这样做时，我的代码会编译，但在运行时出现以下错误：

```
Error: C stack usage is too close to the limit
Error: C stack usage is too close to the limit
terminate called after throwing an instance of 'Rcpp::binding_not_found'
  what():  binding not found: '.AutoloadEnv'
Aborted 
```

这是产生错误的代码：

```
#include <unistd.h>
#include <stdio.h>
#include <pthread.h>
#include <RInside.h>

void *thread_main(void *args){

   RInside R(0,NULL);

   /* hope to execute an R script here */

   printf("--printing from thread--\n");

   return NULL;
}

int main(int argc, char *argv[]){

   pthread_t tid; 
   if( pthread_create(&tid, NULL, thread_main, NULL) ){
      printf("failed to create thread\n");
      return -1;
   } 

   sleep(1); 

   return 0;
} 
```

我已尝试`R_CStackLimit = (uintptr_t)-1`按照编写 R 扩展中的建议进行设置，但无济于事。

我正在运行 ubuntu，R 版本 2.15.2，RInside 版本 0.2.10。

有可能做到这一点吗？还是我必须学习 Rserve 之类的东西？太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:00:16.553

R 是并且很可能仍然是单线程的。RInside 花了一些时间来确保它是作为单例创建的；如果你颠覆你得到上面看到的错误。在同一个可执行文件中，您只能获得一个 RInside 实例，因此每个线程一个将不起作用。正如你所经历的。

请参阅我在源代码中包含的示例，了解在使用多线程前端（例如 Qt 或 Wt 库 for webapps）时如何处理单线程后端。

从长远来看，我们可能能够做 Rserve 所做的事情并进行分叉。欢迎代码贡献，我可能没有时间处理这个问题。

# php - src 和 require 或 include 之间的区别（路径）

> ID：14818710
> 
> 赞同：4
> 
> 时间：2013-02-11T18:41:18.393
> 
> 标签：php, html, path, relative-path, src

如果我想调用 /ico 上发布的图像，请从网站上的任何文件中调用：

```
$arrow = "/ico/arrow.png"; 
```

没有做任何形式的../ico/ect。或 ./ico/等。

现在，如果我想包含一个保存在 /test 中的文件 header.php：

```
<?php
include "/test/header.php"; 
```

或者

```
require "/test/header.php"; 
```

或者

```
require_once "/test/header.php";
?> 
```

这行不通。我必须用 ../ 或 ./ 指定路径。

我无法理解这种差异！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:45:10.417

图片来源和链接href由客户端（浏览器）评估。这意味着它们相对于：

*   Web 根目录（如果 URL 以 开头`/`）。出于此答案的目的，这可以更容易地描述为：您的域。如果您在[http://www.yourpage.com/folder1/folder2/file.php](http://www.yourpage.com/folder1/folder2/file.php)并且您引用`/img/arrow.png`，则假定您的意思是[http://yourpage.com/img/arrow.png](http://yourpage.com/img/arrow.png)
*   当前目录（如果 URL 不以 开头`/`，或以 开头`./`）。如果您在[http://www.yourpage.com/folder1/folder2/file.php](http://www.yourpage.com/folder1/folder2/file.php)并且您引用`img/arrow.png`，则假定您的意思是[http://yourpage.com/folder1/folder2/img/arrow.png](http://yourpage.com/folder1/folder2/img/arrow.png)

另一方面，包含由服务器评估。这意味着它们相对于：

*   文件系统的根目录（如果路径以 a 开头`/`）
*   脚本的当前工作目录（如果路径不以 开头`/`，或以 开头`./`）

# javascript - 将子项添加到上下文菜单链接

> ID：14818714
> 
> 赞同：2
> 
> 时间：2013-02-11T18:41:34.927
> 
> 标签：javascript, google-chrome-extension, contextmenu

我正在尝试为我的上下文菜单添加子项，但由于某种原因它对我不起作用。这是我的代码：

```
var parent1 = chrome.contextMenus.create({"title": "Trigger Rank", "contexts":["link"]});

var child1 = chrome.contextMenus.create
(
    {"title": "Rank 1", "parentId": parent1, "onclick": genericOnClick}
);
var child2 = chrome.contextMenus.create
(
    {"title": "Rank 2", "parentId": parent1, "onclick": genericOnClick}
);
var child2 = chrome.contextMenus.create
(
    {"title": "Rank 3", "parentId": parent1, "onclick": genericOnClick}
);

var parent2 = chrome.contextMenus.create({"title": "Target Rank", "contexts":["link"]});
var child1 = chrome.contextMenus.create
(
    {"title": "Rank 1", "parentId": parent2, "onclick": genericOnClick}
);
var child2 = chrome.contextMenus.create
(
    {"title": "Rank 2", "parentId": parent2, "onclick": genericOnClick}
);
var child3 = chrome.contextMenus.create
(
    {"title": "Rank 3", "parentId": parent2, "onclick": genericOnClick}
); 
```

看起来很简单，但这是我的第一个 chrome 扩展，也是第一次用 javascript 编写。所以可能是我错过了一些东西。

目前，当右键单击链接时，只显示父母（而不是孩子）。

如果我的问题太“新手”，请提前致谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:27:28.383

您的父项已`contexts`设置为`["link"]`，但您的子项的默认`contexts`值为`["page"]`。所以：

*   当您右键单击链接时，父母会出现，但孩子不会，因为他们没有设置为显示在链接上。
*   当您右键单击链接以外的其他内容时，父母不会出现，因此孩子也不会出现。

您必须将孩子的`contexts`价值观设置为与父母的价值观相匹配`["link"]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T23:47:37.250

我刚刚遇到了一个类似但不完全相同的案例。

我正在创建一个需要支持多个上下文（链接、页面、选择）的菜单，并且子菜单仅显示在页面中。

上面的答案是正确的，因为您必须定义上下文，因为它是创建的可选参数。即使我仔细阅读了文档，这也是一个痛苦的发现：http: [//developer.chrome.com/extensions/contextMenus.html#method-create](http://developer.chrome.com/extensions/contextMenus.html#method-create)

> 上下文（“all”、“page”、“frame”、“selection”、“link”、“editable”、“image”、“video”、“audio”或“launcher”的可选枚举数组）此菜单项将出现的上下文。如果未指定，则默认为 ['page']。指定 ['all'] 等效于除 'launcher' 之外的所有其他上下文的组合。“启动器”上下文仅由应用程序支持，用于将菜单项添加到单击启动器/任务栏/停靠/等中的应用程序图标时出现的上下文菜单。不同的平台可能会限制启动器上下文菜单中实际支持的内容。

要明确回答，这是您的解决方案代码：

```
var child1 = chrome.contextMenus.create
(
    {"title": "Rank 1", "parentId": parent1, "onclick": genericOnClick, "contexts":["link"]}
);
var child2 = chrome.contextMenus.create
(
    {"title": "Rank 2", "parentId": parent1, "onclick": genericOnClick, "contexts":["link"]}
);
var child2 = chrome.contextMenus.create
(
    {"title": "Rank 3", "parentId": parent1, "onclick": genericOnClick, "contexts":["link"]}
); 
```

在我自己的情况下，我支持多个上下文并且所有都需要在创建中考虑（例如“上下文”：[“页面”，“链接”，“选择”]）

# spring-security - 通用匹配模式 ('/**') 在过滤器链中的其他模式之前定义，导致它们被忽略

> ID：14818719
> 
> 赞同：1
> 
> 时间：2013-02-11T18:41:53.740
> 
> 标签：spring-security

我在 Spring 3.1.3 版本和以下应用程序上下文文件中遇到了这个问题。我不太确定为什么会发生这种情况。已经查看了与此相关的大多数帖子。我不认为我有版本不匹配。

应用程序上下文文件：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:security="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
          http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
          http://www.springframework.org/schema/security
          http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<security:http auto-config='true' entry-point-ref="casEntryPoint" >
    <security:intercept-url pattern="/panelpipeline/**" access="ROLE_USER"/>
    <security:intercept-url pattern="/**" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
</security:http>

<bean id="serviceProperties" class="org.springframework.security.cas.ServiceProperties">
    <property name="service"
        value="https://seqdws1/cas/j_spring_cas_security_check" />
    <property name="sendRenew" value="false" />
</bean>

<security:http entry-point-ref="casEntryPoint">
    <security:custom-filter position="CAS_FILTER"
        ref="casFilter" />
</security:http>

<bean id="casFilter"
    class="org.springframework.security.cas.web.CasAuthenticationFilter">
    <property name="authenticationManager" ref="authenticationManager" />
</bean>

<bean id="casEntryPoint"
    class="org.springframework.security.cas.web.CasAuthenticationEntryPoint">
    <property name="loginUrl" value="https://seqdws1/cas/login" />
    <property name="serviceProperties" ref="serviceProperties" />
</bean>

<security:authentication-manager alias="authenticationManager">
    <security:authentication-provider
        ref="casAuthenticationProvider" />
</security:authentication-manager>

<bean id="casAuthenticationProvider"
    class="org.springframework.security.cas.authentication.CasAuthenticationProvider">
    <property name="userDetailsService" ref="userService" />
    <property name="serviceProperties" ref="serviceProperties" />
    <property name="ticketValidator">
        <bean class="org.jasig.cas.client.validation.Cas20ServiceTicketValidator">
            <constructor-arg index="0" value="https://seqdws1/cas" />
        </bean>
    </property>
    <property name="key" value="an_id_for_this_auth_provider_only" />
</bean>

<security:user-service id="userService">
    <security:user name="joe" password="joe" authorities="ROLE_USER" />     
</security:user-service>

<!-- <security:authentication-manager> <security:authentication-provider> 
    <security:user-service> <security:user name="jimi" password="jimispassword" 
    authorities="ROLE_USER, ROLE_ADMIN" /> <security:user name="bob" password="bobspassword" 
    authorities="ROLE_USER" /> </security:user-service> </security:authentication-provider> 
    </security:authentication-manager> --> 
```

POM 依赖项

```
<dependencies>
    <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-servlet</artifactId>
        <version>${gwtVersion}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-user</artifactId>
        <version>${gwtVersion}</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.7</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
        <classifier>sources</classifier>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-asm</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-expression</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-cas</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>

</dependencies> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T14:07:24.540

您发布的配置有两个`<http>`元素，它们都没有`pattern`属性，因此两者都被隐式定义以匹配所有请求。第二个将覆盖第一个。

这不一定能解释为什么您会看到此消息（因为它通常应该应用于单个链中的过滤器），但这绝对是一个错误。

`auto-config='true'`除非您确定需要它隐式添加的额外过滤器，否则您也应该删除。

# android - Android：如何使用受 OAuth 保护的服务器执行自动化集成测试

> ID：14818720
> 
> 赞同：0
> 
> 时间：2013-02-11T18:41:55.070
> 
> 标签：android, maven, continuous-integration, integration-testing, android-maven-plugin

我正在构建一个 android 应用程序，它从服务器获取一些数据，而服务器又控制 OAuth 的访问。（在我的例子中，Xing 可以是 Facebook 或其他不失一般性的东西）。构建由 Jenkins 和 maven-android-plugin 控制。

应用程序的正确集成测试需要我以某种方式将用户凭据传递给被测模拟器。假设我可以在构建时将凭据放入集成测试器应用程序（关于堆栈溢出的[单独问题](https://stackoverflow.com/questions/14585228/how-can-secret-api-keys-be-used-while-using-public-build-servers)），我将如何模拟用户在 OAuth 授权阶段启动的 Web 浏览器中键入和单击？

使问题更加复杂的是，我自己的应用程序（包 com.mycompany.myapp）和用于输入凭据的网络浏览器（com.android.browser）既不共享通用包也不共享签名，这似乎是 Robotium 所要求的（请参阅[https://code.google.com/p/robotium/wiki/QuestionsAndAnswers](https://code.google.com/p/robotium/wiki/QuestionsAndAnswers)，有关跨越两个应用程序的测试用例的问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T23:24:53.853

[Robotium](https://code.google.com/p/robotium/)可以模拟用户交互，例如向文本输入提供数据等，并将作为设备测试运行。

android-maven-plugin 示例项目有一些设置为使用 Robotium 的示例，并且可以很容易地用于在所有连接的设备和模拟器上执行这些测试。

# internet-explorer - Ace 和 IE：可编辑内容在第 2 行代码处被截断

> ID：14818724
> 
> 赞同：1
> 
> 时间：2013-02-11T18:42:07.420
> 
> 标签：internet-explorer, ace-editor, browser-feature-detection

编辑已解决：最初我的印象是，由于可编辑代码在第二行被切断，Ace 将完全无法使用。所以我想'我们甚至不要在 IE 中加载它'。我们的错误已修复，Ace 在 9 中工作得很好（或足够接近，但不如 FF 或 Chrome 中的好）。

原始问题：我发现自己不得不阻止 Ace 编辑器在 IE 中加载，并且想知道需要检测哪些特定的浏览器功能？试图避免浏览器嗅探。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T16:59:28.640

Browser feature detection can't work for this, because ace already does feature detection, and when it's broken, it's broken in a rather subtle way, because of a bug in ace code, not because of missing browser features.

So the best way is either to report a bug or use browser version sniffing.

# objective-c - 目标 C 确定值是否适合设置

> ID：14818726
> 
> 赞同：0
> 
> 时间：2013-02-11T18:42:08.923
> 
> 标签：objective-c

我在代码中有这个，但我想确定不仅对象响应选择器，而且值的类型与属性的类型相对应。

```
 if ([object respondsToSelector:NSSelectorFromString(propName)]) 
      [object setValue:value forKey:propName]; 
```

例如，如果 value 是 boolean 并且 property 是 string，我希望 if 短路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:25:21.007

您也可以通过覆盖您的设置器来完成此操作。这样您就不需要检查您设置属性的每个不同的地方。

```
- (void) setSomeString:(NSString *)someString {
    if (![someString isKindOfClass:[NSString class]]) return;

    _someString = someString;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:16:07.787

使用这个类别[NSObject+Properties](https://github.com/AlanQuatermain/aqtoolkit/tree/367b73a47e1a459a3758e138024d68dd92c7f33b/Extensions)，该类别扩展 NSObject 增加了检查的可能性，除其他外，如果一个对象有一个属性。

```
- (BOOL) hasPropertyNamed: (NSString *) name;
- (BOOL) hasPropertyNamed: (NSString *) name ofType: (const char *) type;
- (BOOL) hasPropertyForKVCKey: (NSString *) key; 
```

# javascript - 从循环下具有相同名称属性的html表单获取值

> ID：14818729
> 
> 赞同：1
> 
> 时间：2013-02-11T18:42:18.497
> 
> 标签：javascript, html, jsp

我有一个表单，它显示数据库中的多行，有 4 列。从这些记录中，我需要在第 4 列中写入一个新值并更新数据库记录。但是每当我尝试时，只能更新/读取第一行值。但不是其他行！这可能是由于相同的“名称=重定向”，因为它是从“for 循环”给每个。那么，我怎样才能从其他行中获取值呢？

```
for (int i=0; i<domains.size(); i++) {
domainprops = (String[]) domains.get(i);   
%>

<table cellspacing="0" cellpadding="10" border="0" class="tableview" width="100%">
<td width="150"><input type="text"  id="domains" name="domains" value="<%=domainprops[0]%>"></td>
<td width="160"><input type="text"  name="defaulturl" value="<%=domainprops[1]%>" size="30"></td>
<td width="160"><input type="text"  name="redirecturl" value="<%=domainprops[2]%>" size="30"></td>

<td width="160"> <input type="text" id="redirection" name="redirection"></td>

<td align="right"><a href="javascript:win2('recordUpdate.jsp?domains=<%=domainprops[0]%>
')">[Update]</a></td>

    </tr>
 </table>

<% } %> 
```

Javascript代码：

```
function win2(urlPath) {
    var winl = (screen.width-200)/2;
    var wint = (screen.height-100)/2;
    var settings = 'height=100,width=200,directories=no,resizable=no,status=no,scrollbars=no,menubar=no,location=no,top=' + wint + ',left=' + winl;

    var changeurls=document.getElementById("redirection").value;
    urlPath+='&rdirect='+changeurls
    editWin.focus();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:38:00.757

DOM 中的 ID 应该是唯一的。如果 DOM 中的任何元素都有 ID，则它不应被任何其他元素共享。

我建议做的是将循环计数器附加到 ID 的末尾。这将确保您在 DOM 中创建的每个元素都有自己的唯一 ID。

```
for (int i=0; i<domains.size(); i++) {
domainprops = (String[]) domains.get(i);   

...
<input type="text" id="domains_<%= i %>" name="domains" value="<%=domainprops[0]%>">
...
<input type="text" id="redirection_<%= i %>" name="redirection"></td>

</tr>
</table>

} 
```

接下来，将循环计数器传递给 win2 函数调用：

```
<td align="right"><a href="javascript:win2('recordUpdate.jsp?domains=<%=domainprops[0]%>
', <%= i %>)">[Update]</a></td> 
```

最后，调整功能本身...

```
function win2(urlPath, loopID) {
...
    var changeurls=document.getElementById("redirection_" + loopID).value;
    urlPath+='&rdirect='+changeurls
...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T19:04:09.550

编辑：请阅读有关具有相同 ID 的多个元素的答案。您不应该使用多个相同的 ID。

您可以使用 Javascript 来迭代重定向表单元素。

```
function loopThroughRedirection(form) {
    var result = "";

    for (var i = 0; i < form.elements.length; i++) {
        if (form.elements[i].name == 'redirection') {
            // Do something to retrieve the value of redirection
            result += form.elements[i].value
        }
    }

    return result;
} 
```

# java - KeyEvent#consume() 方法

> ID：14818731
> 
> 赞同：1
> 
> 时间：2013-02-11T18:42:20.647
> 
> 标签：java

由于我在网上找不到太多相关信息，任何人都可以解释什么是 consume() 方法及其用途吗？（对于像我这样的新手来说，这个例子可能是最好的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:49:59.873

该`consume`方法将事件标记为已处理。当您选择对输入进行操作时，通常会从您的程序代码执行此操作，例如，当您希望阻止文本输入接收击键时。

或者，以 Javadocs 中给出的示例为例：

> [`consume`方法] 允许侦听器和组件子类“消费”事件，以便源不会以默认方式处理它们。例如，`mousePressed`在组件上消费事件`Button`将阻止`Button`被激活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-10T02:50:27.327

假设您在玩 FIFA 游戏，例如您的球队是南非和俄罗斯。在正常情况下，如果正在标记俄罗斯球员并按下 T 键，它将调用 SlideTackle()，在俄罗斯球员身上滑动铲球功能。

但是，如果我只想让滑铲只能发生在他们是附近的对手玩家时，我会调用 consume() 方法，这样 SlidingTackle() 函数不会响应按键 T 时俄罗斯的对手并不接近。

这就是我最好的理解

# handler - PDF 处理程序：内容处置文件名

> ID：14818732
> 
> 赞同：18
> 
> 时间：2013-02-11T18:42:21.490
> 
> 标签：handler, filenames, ashx, content-disposition, save-as

我在 Web 浏览器 (IE8) 中输出 PDF 文件，`HttpContext.Response.writefile(fileName)`效果很好。当我尝试保存文件时，它会默认为我提供 ashx 处理程序的名称。我想实际传递真实姓名。

我尝试添加标题信息如下：

```
context.Response.AddHeader("content-disposition", "attachment; filename=" + fileInfo.Name); 
```

它可以工作，但我不希望用户必须在打开和保存之间进行选择，我希望文件正常打开，如果用户选择保存，那么对话框将为他/她提供默认文件名。

我也试过：

```
context.Response.AddHeader("content-disposition", "inline; filename=" + fileInfo.Name); 
```

或者就像[Scott Hanselman 在他的博客中建议的那样](http://www.hanselman.com/blog/TheContentDispositionSagaControllingTheSuggestedFileNameInTheBrowsersSaveAsDialog.aspx)。

```
context.Response.AddHeader("content-disposition", "filename=" + fileInfo.Name); 
```

这些都不适合我。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-12T08:18:42.353

[请参阅http://greenbytes.de/tech/tc2231/#inlwithasciifilenamepdf](http://greenbytes.de/tech/tc2231/#inlwithasciifilenamepdf)上的测试用例- 这似乎只是 IE 中缺少的功能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-03-30T16:15:15.410

我也遇到过这个问题。帮助我的是将内容类型设置为`application/pdf`（而不是`application/x-pdf`过时的）

```
response.setContentType("application/pdf");
response.setHeader("Content-disposition", "inline; filename=\"Report.pdf\""); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-27T12:23:33.133

在 INLINE 的情况下，似乎 Internet Explorer 正在使用 URL 中的最后一个参数来构建文件名。例如，如果您的网址是[http://doc.com/131231231，IE](http://doc.com/131231231) 会提示您将文件另存为 131231231.pdf 如果您需要文件名，例如 foo_131231231.pdf，您可以使用以下网址破解 IE：[http:// /doc.com/foo_131231231](http://doc.com/foo_131231231) 你可能会为了期待如此丑陋的参数而稍微改变你的应用程序，但最终你的应用程序会按你预期的那样工作。

# arrays - 如何从哈希哈希中提取所有数组值

> ID：14818735
> 
> 赞同：0
> 
> 时间：2013-02-11T18:42:44.290
> 
> 标签：arrays, perl, hash

新手来了 如果我缺少详细信息，请致歉。

在 perl 5 中

我有一个看起来像这样的文件

```
precedence = 2
new york
new jersey
florida
precedence = 3
kings
essex
dade
precedence = 1
brooklyn
newark
miami 
```

我可以毫无问题地遍历文件并创建一个保存优先级值的 $var 和一个保存行直到下一个“部分”（precedence = x）的数组（@tmp）

我需要按照偏好的顺序最终将所有部分推入最终数组

所以

```
print @final; 
```

结果是

```
 brooklyn
 .....
 new york
 .....
 kings
 ..... 
```

注意：我从来不知道会有多少部分或每个部分有多少行

我想也许可以做一个哈希哈希并将每个数组放在 HoH

```
push @{ $hash{"section_2"} }, @tmp ; 
```

但我不知道

a）如果每次我加载一个部分时重用@tmp数组会出现问题（在每个循环开始时将其消隐之后）

b）我不知道如何在键“section_2”中获取数组中的所有值并将它们推送到@final

当然可能有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:51:47.790

HoH 没有任何意义。如果您期望优先级有很大差异（1、1000000、1000000000），则可以使用 HoA，

```
my $precedence = 0;
my %data;
while (<>) {
   chomp;
   if (/precedence\s*=\s*([0-9]+)\z/) {
      $precedence = $1;
      next;
   }

   push @{ $data{$precedence} }, $_;
}

my @final = map @{ $data{$_} }, sort { $a <=> $b } keys %data; 
```

但 AoA 很可能更合适。

```
my $precedence = 0;
my @data;
while (<>) {
   chomp;
   if (/precedence\s*=\s*([0-9]+)\z/) {
      $precedence = $1;
      next;
   }

   push @{ $data[$precedence] }, $_;
}

my @final = map @$_, grep $_, @data; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:06:51.237

不太确定我是否完全理解您要完成的工作，但如果您想打印每个优先级值，然后打印其数组中的值，您可以试试这个：

```
my $hoh;

#This is not how you populate your HoH, I hard code it to simplify
@{$hoh->{2}->{'ARRAY'}} = ('new york', 'new jersey', 'florida');
@{$hoh->{3}->{'ARRAY'}} = ('kings', 'essex', 'dade');
@{$hoh->{1}->{'ARRAY'}} = ('brooklyn', 'newark', 'miami');

foreach my $prcdnc(keys(%$hoh))
{
    print "\nprcdnc = ".$prcdnc;

    my @prcdncAry = @{$hoh->{$prcdnc}->{'ARRAY'}};

    my $prcdncAryStr = join(",", @prcdncAry);

    print "\n\t".$prcdncAryStr;
} 
```

# sql - 在 SQLite 中，如何在一个表中选择不在另一个表中的元素？

> ID：14818736
> 
> 赞同：5
> 
> 时间：2013-02-11T18:42:45.153
> 
> 标签：sql, sqlite

我在 SQLite 中有两个表：

```
Table1:
-------
id
name

Table2:
-------
id
temp_name 
```

我的问题是，我如何编写一个 SQL 查询来返回`Table2`不在其中的名称`Table1`？

例如：

```
Table1:
-------
1, 'john'
2, 'boda',
3, 'cydo',
4, 'linus'

Table2:
-------
1123, 'boda'
2992, 'andy',
9331, 'sille',
2,    'cydo' 
```

在此示例中，SQL 查询应返回元素`andy`和`sille`from `Table2`，因为它们不在`Table1`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T18:45:47.920

这是如何在“明显”的标准 SQL 中做到这一点：

```
select *
from table2
where temp_name not in (select name from table1) 
```

还有其他方法，例如在子句中使用 , 和`left outer join`操作。`exists``where``except`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-02T15:36:17.343

我很好奇哪些选项最适合我的用例，并认为如果我分享我的结果可能对其他人有帮助：

简而言之，*选择*最快速的地方（对我来说！）。还值得注意的是，使用所有选项都会返回重复项，但*except 除外*。

```
Option 0: SELECT {c2} FROM {t2} WHERE {c2} not in (SELECT {c1} FROM {t1});
    Entries returned: 1098, Unique entries returned: 357
    Average: 1.8680 seconds
    Entries returned: 0, Unique entries returned: 0
    Average: 0.6664 seconds
Option 1: SELECT {c2} FROM {t2} EXCEPT SELECT {c1} FROM {t1};
    Entries returned: 357, Unique entries returned: 357
    Average: 3.9455 seconds
    Entries returned: 0, Unique entries returned: 0
    Average: 3.3074 seconds
Option 2: SELECT {t2}.{c2} FROM {t2} LEFT OUTER JOIN {t1} ON {t1}.{c1} = {t2}.{c2} WHERE {t1}.{c1} IS null;
    Entries returned: 1098, Unique entries returned: 357
    Average: 2.3330 seconds
    Entries returned: 0, Unique entries returned: 0
    Average: 1.1982 seconds
Option 3: SELECT {c2} FROM {t2} WHERE NOT EXISTS (SELECT 1 FROM {t1} WHERE {c1} = {t2}.{c2});
    Entries returned: 1098, Unique entries returned: 357
    Average: 2.6945 seconds
    Entries returned: 0, Unique entries returned: 0
    Average: 0.9737 seconds 
```

这是我用来运行数字的代码：

```
import sqlite3
import timeit

# Database path here
database = "database.db"

# Your table and column names here
t1, c1 = 'Table_1', 'name'
t2, c2 = 'Table_2', 'temp_name'

# Reverse the test
dbs = [{'t1': t1, 'c1':c1, 't2': t2, 'c2': c2},
       {'t1': t2, 'c1':c2, 't2': t1, 'c2': c1}]

commands = ["SELECT {c2} FROM {t2} WHERE {c2} not in (SELECT {c1} FROM {t1});",
"SELECT {c2} FROM {t2} EXCEPT SELECT {c1} FROM {t1};",
"SELECT {c2} FROM {t2} LEFT OUTER JOIN {t1} ON {t1}.{c1} = {t2}.{c2} WHERE {t2}.{c2} IS null;",
"SELECT {c2} FROM {t2} WHERE NOT EXISTS (SELECT 1 FROM {t1} WHERE {c1} = {t2}.{c2});",]

for i, c in enumerate(commands):
    print("Option {}: {}".format(i, c))
    for db in dbs:
        co = c.format(**db)
        foo = sqlite3.connect(database).execute(co).fetchall()
        # Sanity check that entries have been found and how many
        print("\tEntries returned: {}, Unique entries returned: {}".format(len(foo), len({a[0] for a in foo})))
        # Reconnect to the database each time - I can't remember if there's any caching
        t = timeit.repeat(lambda: sqlite3.connect(database).execute(co).fetchall(), repeat=5, number=1)
        print('\tAverage: {:.4f} seconds'.format(statistics.mean(t))) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T20:14:04.013

```
select name
from table2
except
select temp_name
from table1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T18:49:12.393

左连接版本：

```
select t2.* from Table2 t2
left outer join Table1 t1 on t1.name = t2.temp_name
where t2.temp_name is null 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T20:20:55.173

`EXISTS`戈登提到的方法：

```
SELECT *
FROM Table2
WHERE NOT EXISTS (SELECT 1
                  FROM Table1
                  WHERE Table1.name = Table2.temp_name) 
```

# user-interface - UI 工作流程：直观地创建一系列指令

> ID：14818737
> 
> 赞同：1
> 
> 时间：2013-02-11T18:42:46.490
> 
> 标签：user-interface, workflow, task, breadcrumbs, operations

关于允许用户为一组给定任务创建自己的工作流（一系列任务或操作形式的指令）的用户界面的任何建议？我正在考虑用户可以拖放任务并创建它们的线性序列的东西，例如面包屑线。我一直在寻找 jquery，但我对它很陌生。谢谢。

# python - Python - ConnectionError：超过最大重试次数

> ID：14818740
> 
> 赞同：11
> 
> 时间：2013-02-11T18:42:51.480
> 
> 标签：python, node.js, http, webserver

当我的服务器（称为服务器 A）向我的另一台服务器（全部是服务器 B）上的资源发出请求时，我偶尔会收到此错误：

`ConnectionError: HTTPConnectionPool(host='some_ip', port=some_port): Max retries exceeded with url: /some_url/ (Caused by : [Errno 111] Connection refused)`

异常中的消息是
`message : None: Max retries exceeded with url: /some_url/ (Caused by redirect)`
我包括在内的，因为它有额外的信息`(caused by redirect)`。

正如我所说，我控制了此请求中涉及的两台服务器，因此我可以对其中一个和/或两者进行更改。此外，该错误似乎是间歇性的，因为它并非每次都发生。

潜在相关信息——服务器 A 是运行 apache 的 Python 服务器，服务器 B 是 NodeJS 服务器。我不完全是一个网络服务器向导，所以除此之外，我不确定哪些信息是相关的。

有谁知道这个错误的确切含义，或者如何着手调查修复？或者，有谁知道哪台服务器可能是问题，发出请求的服务器，还是接收请求的服务器？

**编辑：**我们对外部网络资源的调用也开始发生错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-14T03:49:51.503

您在“some_ip”和端口上得到一个 CONN Refused。这可能是由于 - 没有服务器实际监听该端口/IP 组合 - 发送 Conn Refused 的防火墙设置（不太可能是原因！） - 第三 - 配置错误（更有可能）或繁忙的服务器，无法处理请求。

我相信当服务器 A 试图连接到服务器 B 时，您会收到该错误。（假设它是 Linux 和/或一些 unix 衍生产品） netstat -ln -tcp 在服务器上显示什么？（ man netstat 了解标志 - 我们在这里所做的是 - 试图找到所有程序正在侦听哪个端口）。如果这确实显示您的服务器 B 正在侦听 - iptables -L -n 以显示防火墙规则。如果那里没有任何问题 - 这很可能是侦听队列的错误配置。( [http://www.linuxjournal.com/files/linuxjournal.com/linuxjournal/articles/023/2333/2333s2.html](http://www.linuxjournal.com/files/linuxjournal.com/linuxjournal/articles/023/2333/2333s2.html) ) 或谷歌收听积压。

这很可能是您的服务器 B 上的错误配置问题。（注意：上面提到的重定向循环 - 未正确处理可能最终导致服务器繁忙！因此可能解决该问题也可以解决您的问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-08T18:58:46.993

如果您在 python 服务器上使用 gevent，则可能需要升级版本。看起来 gevent 的 DNS 解析存在一些错误。

这是来自请求库的讨论：[https ://github.com/kennethreitz/requests/issues/1202#issuecomment-13881265](https://github.com/kennethreitz/requests/issues/1202#issuecomment-13881265)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-15T15:01:24.597

这看起来像 Node 端的重定向循环。

您提到服务器 B 是节点服务器，如果您不正确地设置路由，您可能会意外创建重定向循环。例如，如果您在服务器 B（节点服务器）上使用 express，您可能有两个路由，并假设您将路由逻辑保存在单独的模块中：

```
var routes = require(__dirname + '/routes/router')(app);
//... express setup stuff like app.use & app.configure
app.post('/apicall1', routes.apicall1);
app.post('/apicall2', routes.apicall2); 
```

然后你的 routes/router.js 可能看起来像：

```
module.exports = Routes;

function Routes(app){
    var self = this;
    if (!(self instanceof Routes)) return new Routes(app);
    //... do stuff with app if you like
}

Routes.prototype.apicall1 = function(req, res){
    res.redirect('/apicall2');
}
Routes.prototype.apicall2 = function(req, res){
    res.redirect('/apicall1');
} 
```

这个例子很明显，但是您可能在其中一些路由的一堆条件中隐藏了一个重定向循环。我将从边缘情况开始，例如在相关路由中的条件结束时会发生什么，如果调用没有正确的参数，默认行为是什么，异常行为是什么？

顺便说一句，您可以使用 node-validator ( [https://github.com/chriso/node-validator](https://github.com/chriso/node-validator) ) 之类的东西来帮助确定和处理不正确的请求或发布参数

```
// Inside router/routes.js:
var check = require('validator').check;

function Routes(app){ /* setup stuff */ }

Routes.prototype.apicall1 = function(req, res){
    try{
        check(req.params.csrftoken, 'Invalid CSRF').len(6,255);
        // Handle it here, invoke appropriate business logic or model, 
        // or redirect, but be careful! res.redirect('/secure/apicall2');
    }catch(e){
        //Here you could Log the error, but don't accidentally create a redirect loop
        // send appropriate response instead
        res.send(401);
    }
} 
```

为了帮助确定它是否是一个重定向循环，你可以做几件事之一，你可以使用 curl 以相同的帖子参数点击 url（假设它是一个帖子，否则你可以只使用 chrome，它会出错如果控制台注意到重定向循环），或者您可以写入节点服务器上的标准输出或在有问题的路由内写入系统日志。

希望对您有所帮助，您提到了“由重定向引起”部分，这就是我认为的问题。

上面的示例情况使用 express 来描述情况，但当然，如果您根本不使用任何框架或库，则仅使用 connect、其他框架甚至您自己的处理程序代码也可能存在问题。无论哪种方式，我都会养成进行良好参数检查并始终测试您的边缘情况的习惯，当我过去很匆忙时，我就遇到了这个问题。

# mongodb - MongoDB+Nodejs 读取不会分布在副本集成员之间，readpreference 为 NEAREST

> ID：14818744
> 
> 赞同：0
> 
> 时间：2013-02-11T18:43:00.730
> 
> 标签：mongodb

我有一个具有主要/次要和读取偏好的副本集作为 NEAREST。通过*MongoStat*，我可以看到请求将发送到运行 mongod 实例和 nodejs 的副本集成员，而不是发送到不同 aws 实例上的其他成员。两者之间未启用 Pinging。我还可以通过更改读取首选项来验证另一个实例是否可以访问。与我的 java 客户端一起工作正常。另一个实例是否应该能够 ping 以进行读取共享？SecondaryAcceptableLatencyMS 设置为 500。这是我尝试执行的示例代码片段。

```
var replSet = new ReplSetServers( [
    new Server( "localhost", 27017, { auto_reconnect: true, native_parser: true, slaveOk: true } ),
    new Server( "<replmem1>", 27017, { auto_reconnect: true, native_parser: true, slaveOk: true } ),
    new Server( "<replmem2>", 27018, { auto_reconnect: true, native_parser: true, slaveOk: true } )
  ],
  {read_secondary:true, secondaryAcceptableLatencyMS:500 }
);

var dbCon = new Db("emails_" + postParams["campaign_id"], replSet, {safe: true, readPreference: mongo.ReadPreference.NEAREST});
    dbCon.open(function(err, db) { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:22:52.650

它还没有很好地记录，但是`strategy`在使用 NEAREST 时必须指定一个选项。

```
var replSet = new ReplSetServers( [
    new Server( "localhost", 27017, { auto_reconnect: true, native_parser: true, slaveOk: true } ),
    new Server( "<replmem1>", 27017, { auto_reconnect: true, native_parser: true, slaveOk: true } ),
    new Server( "<replmem2>", 27018, { auto_reconnect: true, native_parser: true, slaveOk: true } )
  ],
  {read_secondary:true, secondaryAcceptableLatencyMS:500, stragegy: 'ping' }
); 
```

[http://mongodb.github.com/node-mongodb-native/driver-articles/anintroductionto1_1and2_2.html#read-preferences](http://mongodb.github.com/node-mongodb-native/driver-articles/anintroductionto1_1and2_2.html#read-preferences)

# windows-phone-7 - 是否可以将 x509Certificates 导入 windows phone？

> ID：14818745
> 
> 赞同：1
> 
> 时间：2013-02-11T18:43:10.140
> 
> 标签：windows-phone-7, active-directory, windows-phone-8, x509certificate, x509

证书用于签署 pkcs 请求或在手机上创建的 pdf-s。有什么机制可以做到吗？我可以从 Windows Phone 应用程序连接到 AD 和 CA 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T00:38:56.390

是的，您可以通过电子邮件发送 CER 文件、下载 CER 文件或从您的应用程序启动它并在 WP8 上安装自定义证书。

请参阅我的先前答案中的代码示例[@TLS 连接：覆盖证书验证](https://stackoverflow.com/questions/13601799/tls-connection-override-certificate-validation/13617876#13617876)

# javascript - Valums 文件上传插件每次都显示上传失败消息

> ID：14818749
> 
> 赞同：0
> 
> 时间：2013-02-11T18:43:28.570
> 
> 标签：javascript, jquery, fine-uploader

我正在使用`valum file uploader`. 初始化插件的js代码为：

```
function Initializer() {
    var uploader = new qq.FileUploader({
        element: document.getElementById('file-uploader'),
        action: '/_Image/Upload',
        params: {},
        allowedExtensions: ['jpg', 'jpeg', 'png', 'gif'],
        debug: true,
        onSubmit: function (id, fileName) { },
        onProgress: function (id, fileName, loaded, total) { },
        onComplete: function (id, fileName, responseJSON) { },
        onCancel: function (id, fileName) { },
        onError: function (id, fileName, xhr) { },

        messages: {
            typeError: "{file} has invalid extension. Only {extensions} are allowed.",
            sizeError: "{file} is too large, maximum file size is {sizeLimit}.",
            minSizeError: "{file} is too small, minimum file size is {minSizeLimit}.",
            emptyError: "{file} is empty, please select files again without it.",
            allowedExtensionsError : "{file} is not allowed.",
            onLeave: "The files are being uploaded, if you leave now the upload will be cancelled."
        },
        showMessage: function (message) {
            alert(message);
        }
    });
} 
```

该文件已成功上传到服务器上，但插件`file uplode fail`每次都显示该消息。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:09:24.300

您很可能不会返回有效的 JSON 作为服务器响应。自述文件在许多地方都明确指出这是必需的。请看一下自述文件。

# ios - 基于 CFSteam 的连接中的代理身份验证 (iOS)

> ID：14818754
> 
> 赞同：2
> 
> 时间：2013-02-11T18:43:37.493
> 
> 标签：ios, proxy, cfnetwork, cfstream, proxy-authentication

我已经根据 CFNetwork 编程指南实现了基于 CFStream 的连接。如何获取经过身份验证的代理服务器的凭据？有没有一种方法可以让我获得系统对话框存储的共享用户名和密码，当在同一网络中使用 NSURLConnection 时会提示该对话框。

# java - 如何使用 Java Applet 连接到 AWS EC2 上的 mysql 服务器？

> ID：14818755
> 
> 赞同：4
> 
> 时间：2013-02-11T18:43:38.793
> 
> 标签：java, mysql, amazon-web-services, applet, amazon-ec2

我目前正在尝试让 Java Applet 连接到 MySQL 服务器。我已经测试了 MySQL 服务器并验证它可以工作（我可以连接 php）。但是，我似乎无法连接我的小程序。

现在，我正在使用 Eclipse 进行测试，下面列出了以下代码（这不是我自己的……目前只是想建立一个连接）。

但是，它给了我一个通信链接故障，并且无法连接。有人可以指导我如何在 EC2 上建立连接吗？我是 EC2 和 Java-MySQL 连接的新手，我不确定问题出在我的代码、端口配置还是 Eclipse。任何帮助将不胜感激！

```
import java.sql.*;
import javax.swing.*;
import java.util.Properties;

public class HelloWorld extends JApplet
{
  // The JDBC Connector Class.
  private static final String dbClassName = "com.mysql.jdbc.Driver";

  private static final String CONNECTION =
                      "jdbc:mysql://<IP of EC2>";

  public static void main(String[] args) throws
                         ClassNotFoundException,SQLException
  {
    System.out.println(dbClassName);
    // Class.forName(xxx) loads the jdbc classes and
    // creates a drivermanager class factory
    Class.forName(dbClassName);

    // Properties for user and password.
    Properties p = new Properties();
    p.put("user","<username>");
    p.put("password","<password>");

    // Now try to connect
    Connection c = DriverManager.getConnection(CONNECTION,p);

    System.out.println("It works !");

    c.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-18T18:22:11.070

（已经两年了。这需要从 Unanswered 中删除 - 请参阅解决方案的评论。）

# r - R：着色图

> ID：14818760
> 
> 赞同：0
> 
> 时间：2013-02-11T18:44:05.470
> 
> 标签：r, colors, plot

我有一些我想绘制的数据（例如`plot(x,y)`），但我有一些*我想*根据向量`z`中的值来着色的标准，看起来像`c(1, 0, 1, 1, 1, 1, 0, NA ,0 ,0, .....)`等等。

有什么方法可以选择`1`'s 的颜色和`0`'s 的颜色吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:10:15.573

我知道这已经得到解答，但这里有一些**非常**直观的代码，并附有图表供参考。

```
#Let's create some fictional data 
x = rbinom(100,1,.5)
x[round(runif(10)*100)] = NA

#Assign colors to 1's and 0's
colors = rep(NA,length(x))
colors[x==1] = "blue"
colors[x==0] = "red" 

#Plot the vector x
plot(x,bg=colors,pch=21) 
```

![在此处输入图像描述](../Images/2819735c4313059e1a11fb9470c02cf4.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T18:45:15.987

你想得到一个颜色的向量只要`x`和`y`向量，例如如下：

```
z[is.na(z)] = 2
zcol = c("red", "blue", "black")[z + 1] 
```

然后你可以简单地做：

```
plot(x, y, col=zcol) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T19:00:12.860

使用 ggplot2 包

```
require(ggplot2)

df <- data.frame(x = c(1, 2, 3, 4, 5), y = c(2, 3, 4, 6, 7), z = c(1, 0 , 1, 0 , NA))
df$z[is.na(df$z)] = 2
ggplot(df, aes(x, y, color = as.factor(z))) + geom_point() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T18:51:59.153

也许我错过了一些东西，但我认为你想要：

```
plot(x,y,col=ifelse(z==0,'zerocolour','onecolour')) 
```

`red`用and`blue`或其他替换这两种颜色。

我不认为`NA`会被策划，所以你不必担心这些。

对于更多颜色，您可以`data.frame`使用 的唯一值创建一个小映射`z`，然后`z`与`data.frame`. 这是一个有两种颜色的例子：

```
map<-data.frame(z=c(0,1),col=c('red','blue'))
plot(x,y,col=merge(z,map)$col) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T18:52:22.717

您可以为参数提供颜色矢量，`col=`然后使用 z 选择颜色。用于`paste()`将 NA 转换为字符，然后`as.factor()`将这些字符解释为 1、2 和 3。

```
x<-c(1,2,3,4,5)
y<-c(1,2,3,4,5)
z<-c(1,0,NA,1,1)
plot(x,y,col=c("red","green",'black')[as.factor(paste(z))],pch=19,cex=3)

str(as.factor(paste(z)))
Factor w/ 3 levels "0","1","NA": 2 1 3 2 2 
```

# iphone - UitextView中的文本被截断？如何正确地逐页滚动文本

> ID：14818761
> 
> 赞同：2
> 
> 时间：2013-02-11T18:44:08.533
> 
> 标签：iphone, uitextview

我试图在 uibuttons 的帮助下手动上下滚动 UITextView 中的文本。这就是我正在做的事情。

```
[storyTextView setContentOffset:CGPointMake(storyTextView.contentOffset.x, scrollPoint-scrollFraction) animated:NO]; 
```

在哪里

```
scrollPoint=storyTextView.frame.size.height; 
```

当我向上或向下滚动时，文本会被截断。

看这张图片：

![](../Images/cf9cd560f8fd2c399e3d7a0fd3101b0f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:06:06.313

默认情况下，UITextView 剪辑它的子视图，因此您可以调整 UITextView 的大小以尽可能多地填充，或者取消选中 xib 中的“剪辑子视图”，或者使用代码

```
[storyTextView setClipsToBounds:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:49:05.960

尝试这个

> [storyTextView setContentInset:UIEdgeInsetsMake(5, 0, 5, 0)];

好的，问题是这样的。您的字体很大，从数学上讲，您正在设置内容偏移量，但仅取决于 textview 框架而不是内容高度。

解决方案是找出适当的算法来使内容正确可见，然后应用内容偏移量，然后以该特定高度移动，以使文本正确显示。

# java - 围绕几个方法调用使用 System.nanoTime() 的经过时间提供的值低于每个方法中经过时间的总和？

> ID：14818765
> 
> 赞同：4
> 
> 时间：2013-02-11T18:44:20.543
> 
> 标签：java

我正在使用 System.nanoTime() 来测量调用几种方法所需的时间。在每种方法中，我都会做同样的事情来衡量每种方法需要多长时间。最后经过时间的总和应该小于总经过时间，或者我认为。然而，事实并非如此。

例子：

```
public static void main(String[] args){
  long startTime = System.nanoTime();
  method1();
  method2();
  method3();
  System.out.println( "Total Time: " + (System.nanoTime() - startTime) / 1000000);
}
private void method1(){
  long startTime = System.nanoTime();
  //Stuff
  System.out.println( "Method 1: " + (System.nanoTime() - startTime) / 1000000);
}
// same for all other methods 
```

在我的情况下，总时间大约为 950 毫秒，但每个经过时间的总和为 1300 毫秒以上。为什么是这样？

编辑：

好的，为了更清楚一点，我在多次写入数组时*没有出现这种行为（我只是作为测试做的）。*当我这样做时，我得到了非常精确的结果（+-1ms）。

我实际上在做的是：

我将两个非常大的文本文件读入字符串数组（第一个文件中 1000 * ~2000 个字符，第二个文件中 200 * ~100 个字符）。

然后我对读取第一个文件得到的字符串数组进行大量比较，并使用结果来计算一些概率。

EDIT2：我的错误，我在方法中调用方法并总结了那些已经包含在内的时间。没有这些双倍，这一切都加起来了。感谢您清除此问题！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T20:03:47.293

为了进一步研究这个东西，也许你可以打印出每个方法和全局过程的开始和结束时间。在这里，您只是打印每个人花费的时间和总时间，但您可以输出如下内容：

```
Global start   : (result of System.nanoTime() here)
Method 1 Start : ...
Method 1 End   : ....
Method 2 Start : ....
Method 2 End   : ....
Method 3 Start : ....
Method 3 End   : ....
Global end     : .... 
```

我建议你这样做的原因如下：你期望`GlobalEnd - GlobalStart`大于或等于`(End1-Start1) + (End2-Start2) + (End3-Start3)`. 但这种关系实际上源于这样一个事实，即如果一切都是顺序的，则以下情况成立：

```
GlobalStart <= Start1 <= End1 <= Start2 <= End2 <= Start3 <= End3 <= GlobalEnd 
```

不是吗？

那么对你来说有趣的是知道在这个不等式列表中什么是不正确的。这可能会给你一些见解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:00:25.483

我认为您的代码没有任何问题。在我的测试中，我从您的代码中得到了正确的经过时间。

这是我的输出：

方法 1：600 方法 2：500 方法 3：10 总时间：1110 构建成功（总时间：2 秒）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T20:30:16.713

尝试将您的 doe 更改为以下内容：

```
public static void main(String[] args)
{
    long elaspeTime = 0;
    elaspeTime += method1();
    elaspeTime += method2();
    elaspeTime += method3();
    System.out.println("Total Time: " + elaspeTime / 1000000);
}

private static long method1()
{
    long startTime = System.nanoTime();
    //Do some work here...
    System.out.println("Method 1: " + (System.nanoTime() - startTime) / 1000000);
    return System.nanoTime() - startTime;

} 
```

# html - 滚动 JSF 页面时如何始终显示 div

> ID：14818771
> 
> 赞同：0
> 
> 时间：2013-02-11T18:44:34.450
> 
> 标签：html, css, jsf, jsf-2

我在 JSF 页面中有一个 div 层：

```
<p:outputPanel id="outputComponent">
    <div style="position: absolute; background-color: black; left: 350px; top: 0px; width: 700px; padding: 10px; border-radius: 6px;">

        <div class="container">
            Component Profile
        </div>
        <br/>
        <!-- <h:outputText value="#{TreeViewController.initComponent()}" /> -->

        <table>
            <col width="280"/><col width="130"/>

            <ui:repeat var="ud" value="#{TreeViewController.componentData}">

                <tr>
                    <td>Component ID</td>
                    <td>
                        <h:outputText value="#{ud.componentStatsID}"/>
                    </td>
                </tr>
                <tr>
                    <td>Name</td>
                    <td>
                        <h:outputText value="#{ud.componentName}"/>
                    </td>
                </tr>

            </ui:repeat>
        </table>

    </div>
</p:outputPanel> 
```

我很感兴趣，即使我滚动页面，如何始终在显示屏的中心显示这个 div？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:26:50.250

您应该使用[position](http://www.w3schools.com/cssref/pr_class_position.asp)属性值`fixed`。我不确定您是否希望它垂直和水平居中，但此解决方案适用于两者。将宽度更改为您喜欢的任何内容，`top: 50%`具体取决于您的 div 的高度。

**CSS**

```
.static {
  position: fixed;
  background-color: #000;
  width: 50%;
  top: 50%;
  left: 25%;
  right: 25%;
  padding: 10px;
  border-radius: 6px 6px 6px 6px;
  color: #fff;
} 
```

在您的 div 上应用静态类并删除：`style="position: absolute; background-color: black; left: 350px; top: 0px; width: 700px; padding: 10px; border-radius: 6px;"`

jsfiddle：http: [//jsfiddle.net/HwHUS/1/](http://jsfiddle.net/HwHUS/1/)

# .htaccess - 长 .htaccess 重写规则

> ID：14818772
> 
> 赞同：1
> 
> 时间：2013-02-11T18:44:37.330
> 
> 标签：.htaccess

如何得到

> [http://nebulaproject.net/forum/topic/1](http://nebulaproject.net/forum/topic/1)

变成

> [http://nebulaproject.net/forum/topic.php?id=1](http://nebulaproject.net/forum/topic.php?id=1)

我想，

```
RewriteRule ^/forum/topic/(.*) /forum/topic.php?id=$1 [L] 
```

或者

```
RewriteRule ^/forum/(.*)/(.*) /forum/$1.php?id=$2 [L] 
```

可能会工作，但是......没有运气。我有其他设置，`RewriteRules`例如`/players/Haribo98``/player/index.php?username=Haribo98`

# java - 在普通 Java 应用程序中创建 JavaFX 初级阶段

> ID：14818776
> 
> 赞同：4
> 
> 时间：2013-02-11T18:45:14.240
> 
> 标签：java, javafx-2, javafx, stage

我有一个启动器和一个 JavaFX 类。启动器创建一个名为 JavaFXApplication1 的类。JavaFXApplication 包含整个 JavaFX 代码（在这种情况下只是一个小示例），并且应该设置一个具有一个主要阶段的窗口。

启动器具有静态主入口点 - 但我读到 JavaFX 并没有真正使用这个入口点。这解释了我的控制台输出（见文章结尾）

我不知道这是否可能（启动器创建一个 JavaFX 窗口 - 入口点**不在**表示类本身中）。我不想使用预加载器（我认为预加载器只是用于启动期间的重负载），因为启动器将整个程序表示为一个对象（演示、业务和持久性 - 一个 3 层程序）。入口点应该在演示类之外（在这个例子中，在启动器类中）

以下示例确实有效。但对我来说，这就像一块“黑魔法”

这是我的代码

启动器：

```
package javafxapplication1;

public class Launcher
{
    public static void main(String[] args)
    {
        System.out.println("main()");

        // Do some stuff and then create the UI class

        JavaFXApplication1 client = new JavaFXApplication1();
        client.caller(args);
    }
} 
```

JavaFX应用程序1：

```
package javafxapplication1;

import javafx.application.Application;
import javafx.stage.Stage;

public class JavaFXApplication1 extends Application
{ 
    @Override
    public void start(Stage primaryStage)
    {
        System.out.println("start()");
        primaryStage.setTitle("I am a JavaFX app");
        primaryStage.show();
    }

    public void caller(String[] args)
    {
        System.out.println("caller()");
        launch(args);
    }
    /* We call the main function from the client
    public static void main(String[] args)
    {
        launch(args);
    }*/
} 
```

该程序的输出是：

```
start() 
```

有没有办法创建这样的应用程序？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:00:29.813

这个问题的答案是创建一个java项目而不是JavaFX项目。在此之后，您可以添加一个 JavaFX 主类并编写一个方法（调用 launch() ）。

也许您必须从​​ /jdk_*/jre/lib 目录添加编译时库 deploy.jar、javaws.jar、jfxrt.jar 和 plugin.jar

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T17:56:36.830

我在 [一个类的main方法中运行JavaFX应用程序实例上写了一篇文章——MacDevig](https://macdevign.wordpress.com/2014/03/27/running-javafx-application-instance-in-the-main-method-of-a-class/)

会不会是你要找的东西？

代码很长，因此最好参考帖子，但用法很简单。请注意，init 和 stop 方法不使用启动器线程，因此请小心使用。

目的是在您的类的主要方法上运行一个虚拟 javafx 应用程序，以实现快速测试/实验目的。

要使用它，只需使用 lambda 在 main 方法中添加以下内容，或者您​​可以使用匿名内部类样式。

```
// using the start method of Application class
Utility.launchApp((app, stage) -> {
    // javafx code
}, arArgs); 
```

# php - PHP 多表单问题

> ID：14818778
> 
> 赞同：0
> 
> 时间：2013-02-11T18:45:19.747
> 
> 标签：php, html, forms

你好堆垛机，

PHP 新手，我正在从预先构建的代码中组合一个多页表单。

基本上，用户可以根据需要选择尽可能多的复选框......然后表单提交到这个辅助页面。这个二级页面回显了他们通过 .. 在页面顶部选择的复选框，`$check`然后他们可以输入他们的联系信息，所有信息都通过表单提交，连同`$check`信息。

除了`$check`没有输入表单消息外，一切都运行良好，但它在页面顶部运行，显示用户输入的选项。

任何帮助表示赞赏！

```
<?php
$emailOut = '';
if(!empty($_POST['choices'])) {
foreach($_POST['choices'] as $check) {
            echo $check; //echoes the value set in the HTML form for each checked checkbox.
                     //so, if I were to check 1, 3, and 5 it would echo value 1, value 3, value 5.
                     //in your case, it would echo whatever $row['Report ID'] is equivalent to.
            $emailOut .= $check."\n"; //any output you want
}
}
$errors = '';
$myemail = 'test@myemailHERE.com';//<-----Put Your email address here.
if(empty($_POST['name'])  || 
   empty($_POST['email']) || 
   empty($_POST['message']))
{
$errors .= "\n Error: all fields are required";
}

$name = $_POST['name']; 
$email_address = $_POST['email']; 
$message = $_POST['message']; 

if (!preg_match(
"/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", 
$email_address))
{
    $errors .= "\n Error: Invalid email address";
}

if( empty($errors))
{
$to = $myemail; 
$email_subject = "Contact form submission: $name";
$email_body = "You have received a new message. $check ".
" Here are the details:\n Name: $name \n Email: $email_address \n Message \n $message \n $emailOut"; 

$headers = "From: $myemail\n"; 
$headers .= "Reply-To: $email_address";

mail($to,$email_subject,$email_body,$headers);
//redirect to the 'thank you' page
header('Location: contact-form-thank-you.html');
} 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:03:34.257

在这种情况下，当您处理电子邮件时，`$check`会显示最后一个选项。您需要使用`foreach`语句来构建数组或电子邮件输出，例如

```
$emailOut = "";
foreach($_POST['choices'] as $check) {
        $emailOut .= $check."\n"; //any output you want
} 
```

然后以相同的方式使用您的电子邮件变量

```
$email_body = "You have received a new message. Here are the details:\n Name: $name \n Email: $email_address \n Message \n     $message \n $emailOut"; 
```

**更新**

从进一步调查和提交的更多代码来看，您似乎正在处理多表单提交问题。问题是您有表单 1（复选框）提交到表单 2（电子邮件）。

因为在复选框提交后进行检查时，没有给出姓名、电子邮件等，所以`$errors`没有给出任何电子邮件。填写电子邮件表单时，复选框没有再次发送，`$check`甚至`$_POST['choices']`没有值。

您可以将两种形式合二为一，也可以通过传递值并填充“隐藏”字段来寻找一种方法来保存值（`<input type='hidden' value='...'>)`或使用 PHP.

# css - 盒子阴影没有显示在顶部或底部

> ID：14818780
> 
> 赞同：14
> 
> 时间：2013-02-11T18:45:27.870
> 
> 标签：css

我正在开发一个网站，我在底部遇到了一个问题，三个不同部分的盒子阴影。我希望边框显示在所有三个周围，但它只显示在左侧和右侧。

这是该部分的 HTML：

```
<div class="three-cols-row">

<div class="three-cols-col three-cols">
<p style="text-align: center;"><img src="https://www.lytyx.com/subdomains/test/websites/mynaturerich.com/wp-content/uploads/2013/02/section01.jpg" alt="" /></p>
<p style="text-align: center;">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et. <a href="#">Read More</a></p>

</div>
<div class="three-cols-col three-cols">
<p style="text-align: center;"><img src="https://www.lytyx.com/subdomains/test/websites/mynaturerich.com/wp-content/uploads/2013/02/section02.jpg" alt="" /></p>
<p style="text-align: center;">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et. <a href="#">Read More</a></p>

</div>
<div class="three-cols-col three-cols">
<p style="text-align: center;"><img src="https://www.lytyx.com/subdomains/test/websites/mynaturerich.com/wp-content/uploads/2013/02/section03.jpg" alt="" /></p>
<p style="text-align: center;">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et. <a href="#">Read More</a></p>

</div>
</div>
<div class="clearboth"></div> 
```

这是该部分的 CSS：

```
.three-cols-col{ margin:0 16px 0 16px; overflow:hidden; float:left; display:inline; }
.three-cols-row { margin:0 auto; width:960px; overflow:hidden; }
.three-cols-row .three-cols-row { margin:0 -16px 0 -16px; width:auto; display:inline-block; }
.three-cols { width:248px; padding: 15px; background: #fff; -moz-box-shadow: 0 0 3px #d4d4d4;-webkit-box-shadow: 0 0 3px #d4d4d4; box-shadow: 0 0 3px #d4d4d4; } 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-11T18:48:50.407

你有两个选择：

1.  从所有父节点中删除`overflow: hidden`，因为这会剪切您的阴影。在您的情况下，将其从以下选择器中删除`.row`：`.column`和`.three-cols`.

2.  您可以在您的: 中添加一些垂直边距`.three-cols-col`。而不是:`margin: 0 16px 0 16px;`你可以放: `margin: 16px 16px 16px 16px;`.

两种选择都在 Google Chrome 上进行了测试。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-05-26T09:41:44.133

下面的语句决定了一个类似的问题：

```
position: relative; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T19:12:04.480

您的 3 个框 ( ) 的父元素`.three-cols-row`没有足够的空间来显示存在于其子元素顶部和底部的文本阴影。尝试添加一些填充：

```
.three-cols-row { padding-top: 10px; padding-bottom: 10px; } 
```

示例 JS 小提琴：http: [//jsfiddle.net/KatieK/zZhxr/1/](http://jsfiddle.net/KatieK/zZhxr/1/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-02-11T12:17:13.710

```
position: relative;
z-index: 2; 
```

# ruby-on-rails-3 - 渲染部分液体布局（Rails3）

> ID：14818785
> 
> 赞同：4
> 
> 时间：2013-02-11T18:45:57.023
> 
> 标签：ruby-on-rails-3, layout, partial, liquid

我有一个液体模板，我需要在其中渲染一个部分。

请注意`@current_page.page_layout.content`将从数据库加载内容。

我的液体布局文件如下：

```
#layouts/public.html.erb
<%= Liquid::Template.parse(@current_page.page_layout.content).
render('page_content' => yield, 'page_title' => yield(:title)) %> 
```

以下是我的代码，其中也包括部分代码

```
{{page_content}}

{% include 'this_is_the_partial_name' %} 
```

我收到了这个错误

```
Liquid error: This liquid context does not allow includes. 
```

我尝试在网上搜索并[找到了这个解决方案](https://groups.google.com/forum/?fromgroups=#!topic/liquid-templates/IJpYVFaPwRo)，但我仍然不确定要为这段代码输入什么：

```
Liquid::Template.file_system = 
Liquid::LocalFileSystem.new(template_path) 
liquid = Liquid::Template.parse(template) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-13T14:32:57.843

晚会有点晚了..但这就是你应该如何使用它：

在初始化程序（如 /config/initializers/liquid.rb）中添加：

```
template_path = Rails.root.join('app/views/snippets')
Liquid::Template.file_system = Liquid::LocalFileSystem.new(template_path) 
```

添加您的部分文件，例如。`app/views/snippets/_partial_name.liquid`.

现在在您的液体模板中使用：

```
{% include 'partial_name' %} 
```

# ios - iOS 自定义容器 VC 和需要特定方向的子级

> ID：14818788
> 
> 赞同：3
> 
> 时间：2013-02-11T18:46:07.493
> 
> 标签：ios, ipad, uiviewcontroller

我已经尝试了很多方法来寻找这个问题的答案，但是我看到的很多主要是`UINavigationController`在根视图控制器上用 s 锁定旋转问题。

在我的项目中，我有一个`UIViewController`使用 View Controller Containment 的自定义。我没有实现`-(BOOL)shouldAutomaticallyForwardAppearanceMethods`or`-(BOOL)shouldAutomaticallyForwardRotationMethods`方法，因为它们都是已经返回的默认实现`YES`。`-(BOOL)shouldAutorotate`已实施并返回`YES`。

第一个显示支持所有方向的视图控制器。这是按预期工作的。

在 segue 期间加载代替第一个视图控制器的第二个视图控制器具有条件方向。视图控制器本质上是一个视图控制器，其中包含一个`UIPageViewController`用于显示 PDF 页面的视图控制器。条件方向是 PDF 的方向。如果 PDF 为横向或PDF 为纵向，则该方法`-(NSUInteger)supportedInterfaceOrientations`返回。这个方法确实被调用了。然而，在我的 segue 中，我呼吁：`UIInterfaceOrientationMaskLandscape``UIInterfaceOrientationMaskPortrait`

```
[container transitionFromViewController:source 
           toViewController:dest 
           duration:1.0 
           options:UIViewAnimationOptionTransitionFlipFromRight 
           animations:^{} 
           completion:^(BOOL finished){/*relevant removal of vc's from parents*/}]; 
```

该方法需要我支持的方向，但似乎没有应用它们。我可以使用`[[UIDevice currentDevice] performSelector:@selector(setOrientation:) withObject:(__bridge id)(void *)[dest preferredInterfaceOrientationForPresentation];`，但这个应用程序可能会成为商店应用程序，所以我正在避免这种情况。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T03:32:57.097

在大多数情况下，UINavigationController 的答案应该可以帮助您进行设置。不过，我过去使用过一个技巧。在我的父 VC 中，我实现了以下方法：

```
- (UIViewController *)topViewController {
    return self.childViewControllers.lastObject;
}

- (BOOL)shouldAutorotate {
    return [[self topViewController] shouldAutorotate];
}

- (NSUInteger)supportedInterfaceOrientations {
    return [[self topViewController] supportedInterfaceOrientations];
} 
```

这会起作用，但您必须先旋转到支持的方向，然后它才会尊重第二个视图控制器的限制。诀窍是在调用`- (BOOL)shouldAutorotate`之前返回 NO 。`viewDidAppear:`像这样的东西：

```
- (BOOL)shouldAutorotate {
    return _viewDidShow ? YES : NO;
} 
```

然后在调用转换方法之前调用：

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeLeft animated:NO]; 
```

# asp.net - ASP/AJAX 选项卡控件未显示在网站上但在本地显示正常

> ID：14818789
> 
> 赞同：0
> 
> 时间：2013-02-11T18:46:16.687
> 
> 标签：asp.net, ajax, tabs

我只是从 ASP 编程开始。想知道，找出问题所在的最佳方法是什么？我从 ASP.NET/AJAX 控件工具包中添加了一个选项卡控件。它在本地工作得很好，但是当我将它上传到网站时，选项卡控件没有显示，并且繁忙的光标会持续约 10 秒。我没有从网站上看到任何详细信息/错误消息。部署时，正在上传工具包 dll。

# c - C 浮点数的标准要求

> ID：14818790
> 
> 赞同：0
> 
> 时间：2013-02-11T18:46:22.307
> 
> 标签：c, floating-point

在《C Primer Plus 5/e》一书中，看到作者写道：

> C 标准规定浮点数必须能够表示至少 6 个有效数字并允许范围至少`10^(-37)`为 `10^(+37)`.

但是要这样做并同时使用自然大小，则需要 4 个字节。所以事实上，一个罐子的范围从 10^(-63) 到 10^(+63)，见

[http://en.wikipedia.org/wiki/Floating_point#Internal_representation](http://en.wikipedia.org/wiki/Floating_point#Internal_representation)

于是我想到了一个问题：为什么 C 标准选择 range 的要求`at least 10^(-37) to 10^(+37)`。当然，可能会考虑计算速度。但除此之外，还有什么理由不使用完整的 32 位空间吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T18:57:29.383

C 标准以它的方式编写，以允许 C 语言在具有广泛硬件的各种机器上实现。通过限制 REQUIRED 的实际表示，有更多可能的机器可以“不违反规则”使用 C。

有些浮点处理器（尤其是 WERE）不一定使用 IEEE-754。

此外，我认为您的 10^(-63) .. 10^(+63) 是一种误解。32 位浮点数的范围为 2^(+/-127)，这意味着大约 10^(+/-37) (2^127 ~= 10^37)。

# tfs - 从 Board View 的 Burndown 中删除周末 (TFS 2012 - Scrum 2.0)

> ID：14818791
> 
> 赞同：72
> 
> 时间：2013-02-11T18:46:22.437
> 
> 标签：tfs, scrum

我想修改 TFS 2012 的 Scrum 2.0 模板中的燃尽图，以便不再显示周末。我已经看过[这篇文章](http://2e2ba.blogspot.com/2011/08/tfs-scrum-templates-and-burndown-report.html)，但不幸的是，当从 Board View 运行时，那里列出的解决方案不适用于燃尽图。

[![例子](../Images/04be627c4b34f0077513c410e954cf5d.png)](https://i.stack.imgur.com/7Gxqp.png)

有没有人建议我如何在 Board View 中修改它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-12T16:07:57.563

[更新](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2792800-burndown-chart-should-exclude-non-work-days)：燃尽图不包括 Visual Studio Online 的周末。今年晚些时候，此功能随 TFS 2013 Update 2 一起提供给本地客户。

[请参阅http://www.visualstudio.com/news/2014-jan-22-vso](http://www.visualstudio.com/news/2014-jan-22-vso)上的公告。

如果要配置团队的工作日，可以单击右上角的齿轮按钮，这将在新选项卡中打开管理区域。单击您的团队，然后选择“设置”选项卡。

~~uservoice 上的 TFS 团队最近解释说，他们开始研究此功能请求[Burndown 图表应排除非工作日](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2792800-burndown-chart-should-exclude-non-work-days)。~~

# apache-flex - 无法解决 到 Flex Mobile 项目中的组件实现

> ID：14818797
> 
> 赞同：0
> 
> 时间：2013-02-11T18:47:02.227
> 
> 标签：apache-flex, flex4, flash-builder

我刚刚创建了一个 Flex Mobile 项目，在使用 mx:LinkBut​​ton 时收到此错误：

```
Could not resolve <mx:LinkButton> to a component implementation. 
```

这是我的应用程序：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:mx="library://ns.adobe.com/flex/mx" 
               xmlns:s="library://ns.adobe.com/flex/spark">

    <mx:LinkButton id="contactButton" label="Contact" /> 
```

实际上，没有一个 mx 组件在工作？不是很好。

我正在使用 Flex 4.5.1A。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:08:43.467

看起来您必须手动将 mx.swc 添加到项目中（即使 Flex 4.5+ 中默认包含一些 mx 组件）。

无论如何，打开您的项目属性窗口并转到构建路径视图。单击添加 SWC 并浏览至：

```
[Flex Framework directory]\frameworks\libs\mx\mx.swc 
```

但是，您仍然可能会收到 100 个以下错误：

```
Definition mx.skins.spark:AccordionHeaderSkin could not be found. 
```

[在这种情况下，您需要按照此处](http://killerspaz.wordpress.com/2011/10/12/using-mx-components-on-flexair-mobile/)所述将源添加到皮肤中。单击添加源并浏览至：

```
\frameworks\projects\mx\src 
```

您可能还需要添加其他皮肤。单击添加源并浏览至：

```
/frameworks/projects/sparkskins/src 
```

# visual-studio-2012 - 如何关闭 Visual Studio 中“找到”的自动突出显示？

> ID：14818800
> 
> 赞同：1
> 
> 时间：2013-02-11T18:47:25.113
> 
> 标签：visual-studio-2012, replace, highlighting

我有一个巨大的 XML 文件要在 Visual Studio 中进行编辑。当我执行正则表达式 FIND 搜索时，VS 在搜索面板上的每次击键后都会进行搜索，这使得应用程序如此缓慢。如何禁用自动突出显示功能？

# tsql - 如何优化查找表？

> ID：14818805
> 
> 赞同：-1
> 
> 时间：2013-02-11T18:47:39.207
> 
> 标签：tsql, sql-server-2008-r2, left-join, lookup-tables

我正在使用 SSMS 2008 R2 开发一个 TSQL 查询，并且我想优化这个当前使用许多左连接的存储过程。有一个包含一行/查找值的查找表。所以我的 TSQL 代码如下所示：

```
Table A = main record table
Table B = Lookup Table
  row1 x unique_identifier, y varchar(100)
  row2 x unique_identifier, y varchar(100)
  row3 x unique_identifier, y varchar(100)
  row4 x unique_identifier, y varchar(100) 
```

所以这个查找表中的每一行都有两个值：一个是 unique_identifier，另一个是 varchar。所以目前我的 sproc 代码看起来像：

```
select *
FROM A
LEFT JOIN B ON B.X = A.X WHERE B.X = 123456
LEFT JOIN B2 ON B2.X = A.X WHERE B2.X = 123457
LEFT JOIN B3 ON B3.X = A.X WHERE B3.X = 123458
LEFT JOIN B4 ON B4.X = A.X WHERE B4.X = 123459
LEFT JOIN B5 ON B5.X = A.X WHERE B5.X = 123451 
```

我确信必须有一种更有效的方法来做到这一点。而我真正的 sproc 代码实际上加入了这个查找表 30 次而不是 5 次。我也尝试过使用临时表，但这似乎也没有优化它。有关如何替换所有 LEFT JOIN 的任何建议？

好的，所以我现在正在更新这个问题。这是我的确切查询：

```
SELECT DISTINCT 
    lut.[description] as UDT_Injuries,  
    lut2.[description] as abduction, 
    lut3.[description] as ARREST_PARENT
FROM evolv_cs.dbo.incident_header_x x with (nolock)
LEFT JOIN user_defined_lut_rv lut on lut.user_defined_lut_id = x.UDT_Injuries
LEFT JOIN user_defined_lut_rv lut2 on lut2.user_defined_lut_id = x.ABDUCTION
LEFT JOIN user_defined_lut_rv lut3 on lut3.user_defined_lut_id = x.ARREST_PARENT
WHERE lut.[description] IS NOT NULL OR lut2.[description] IS NOT NULL OR lut3.[description] IS NOT NULL 
```

以及此查询的前 10 行输出：

```
UDT_Injuries    abduction   ARREST_PARENT
NULL    NULL    Outside of facility
Client  NULL    NULL
Client  NULL    Outside of facility
None    NULL    NULL
None    NULL    Outside of facility
Other adult NULL    NULL
Other adult NULL    Outside of facility
Parent  NULL    NULL
Peer    NULL    NULL
Sibling NULL    NULL 
```

仅供参考，我查看了有关 PIVOT 和 UNPIVOT 的文章，但我不想汇总任何数据。相反，我想将 event_header_x 中的键 id 值转换为 user_defined_lut_rv 中的 varchar 值。

来自 event_header_x 的示例数据如下所示：

```
UDT_Injuries    ABDUCTION   ARREST_PARENT
5B84773B-99BF-4EB9-8545-EFC06A35FE29    NULL    NULL
NULL    4F18EDE9-BBBA-4430-9EF4-4E28EAC1E6D4    NULL
5B84773B-99BF-4EB9-8545-EFC06A35FE29    NULL    NULL
NULL    NULL    4F18EDE9-BBBA-4430-9EF4-4E28EAC1E6D4
NULL    NULL    5B84773B-99BF-4EB9-8545-EFC06A35FE29 
```

这对我想要实现的目标有意义吗？要将这些 id 值转换为 user_defined_lut_rv 查找表中的 varchar 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:30:53.230

由于连接条件始终相同，您似乎正在寻找一个支点： http: [//msdn.microsoft.com/en-us/library/ms177410 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx)

如果这不是您要查找的内容，请提供更多详细信息。示例数据和预期结果将是一个很好的开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T22:35:56.730

简而言之，不——没有更有效或不同的方法可以做到这一点。您是否遇到性能问题，或者您是否发现代码笨拙？

无论如何，您可能希望对“一个真正的查找表”进行一些研究，这看起来相似（不完全相同），以了解此设计中的缺点和优点。

# windows - Powershell 问题 - 32 位与 64 位

> ID：14818806
> 
> 赞同：0
> 
> 时间：2013-02-11T18:47:46.140
> 
> 标签：windows, powershell, 64-bit, 32bit-64bit, command-prompt

我在使用 PowerShell (x86) 的机器上遇到问题。如果我输入：

```
cmd 
```

我没有输出。但是，如果我将其键入 64 位 PowerShell，则会得到输出：

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved. 
```

知道为什么会这样吗？就好像 PowerShell (x86) 只是没有执行此命令。我正在运行 64 位 Windows 7。

编辑：`cmd`只是正在发生的事情的一个例子。当我想在某个随机文件夹中执行 foo.exe 时也会发生这种情况。我正在为在 32 位 PowerShell 中运行可执行文件的一般情况寻找解决方案。

编辑：如果有同样问题的人看到这个，我能够解决这个问题的方法是将我的 ComSpec 环境变量更改为：

`C:\Windows\SysWOW64\cmd.exe`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:54:39.640

要启动并打开 32 位命令提示符，您需要键入：

```
$env:windir\SysWoW64\cmd.exe 
```

# javascript - jQuery条件addClass不起作用

> ID：14818807
> 
> 赞同：0
> 
> 时间：2013-02-11T18:47:46.550
> 
> 标签：javascript, jquery, addclass

有点挂断 jQuery addClass。我的标记中有一个#story div，当它获得“离开”类时会缩小，然后在失去该类时重新弹出。

这是障碍：

```
$('#story div.x').on('click', function () {
  if (!$('#story').hasClass('away')) {
    $('#story').addClass('away');
  }
}); 
```

上面的代码只是在我的故事元素中添加了一个空白的 class=""，但是......

```
$('#story div.x').on('click', function () {
  if (!$('#story').hasClass('away')) {
    setTimeout(function () {
      $('#story').addClass('away');
    }, 1000);
  }
}); 
```

该代码添加了适当的 class="away" 属性。

是什么赋予了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:55:04.307

听起来有另一个事件正在更新类，或者元素可能尚未准备好但在 1 秒后可用，可能在 ajax 调用之后或 DOM 准备好时。

会是这样吗？

# php - Facebook PHP登录下降最终出现在Facebook而不是我的页面

> ID：14818808
> 
> 赞同：0
> 
> 时间：2013-02-11T18:47:50.727
> 
> 标签：php, facebook, login

我正在尝试实现一个简单的 Facebook 登录（连接）到我自己的网页。

我想看到的是：（1）FB对话框（2）如果用户接受，得到'yyyyy'（3）如果用户拒绝，得到'zzzzz'。

我看到的是：（1）带有 Go To App/Cancel 的 FB 对话框（2）如果用户接受，则获得“yyyyy”（3）如果用户拒绝，另一个带有 Go To App/Leave App 的 FB 对话框（4 ) 如果用户再次拒绝，进入FB。

这是代码（我在一开始隐藏了实际的 3 个值）：

```
<?php

session_start();

$app_id = 'xxxxxxxxxxxxxxx';
$app_secret = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx';
$my_url = 'xxxxxxxxxxxxxxxxxxxxxxxxx';

require_once("facebook.php");
$config = array();
$config['appId'] = $app_id;
$config['secret'] = $app_secret;
$config['fileUpload'] = false; // optional
$facebook = new Facebook($config);

$ok_to_continue = false;
$code = $_REQUEST["code"];

if(empty($code)) {
  $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection
  $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
    . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state=" . $_SESSION['state'];
  echo("<script> top.location.href='" . $dialog_url . "'</script>");
}
else { // $code not empty
  if($_SESSION['state'] && ($_SESSION['state'] === $_REQUEST['state'])) {
    $token_url = "https://graph.facebook.com/oauth/access_token?"
      . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
      . "&client_secret=" . $app_secret . "&code=" . $code;
    $response = file_get_contents_curl($token_url);
    $params = null;
    parse_str($response, $params);
    if (isset($params['access_token'])) {
      $_SESSION['access_token'] = $params['access_token'];
      $ok_to_continue = true;
    } else {
      oops('Error 2', '');
      echo ('<p>==='.$response.'===</p>');
    }
  } else {
    oops('Error 1', '');
  }
}

// Get user data:
if ($ok_to_continue) {
  $user_id = $facebook->getUser();
  if ($user_id) {
    try {
      $user_profile = $facebook->api('/me');
    } catch (FacebookApiException $e) {
      oops('Error 3', $e);
    }
  }
}

function file_get_contents_curl($url) {
  $ch = curl_init();
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
  $data = curl_exec($ch);
  curl_close($ch);
  return $data;
}

function oops($errmsg, $logmsg) {
  global $ok_to_continue;
  $ok_to_continue = false;
  if ($errmsg !== '') { echo('<p><b>' . $errmsg . '</b></p>'); }
  if ($logmsg !== '') { error_log($logmsg); }
}

?>

<?php if ($ok_to_continue): ?>

yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy

<?php else: ?>

zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz

<?php endif; ?> 
```

# overflow - 使用 BeforeShow/BeforeClose 隐藏 FancyBox 中的第二个滚动条

> ID：14818811
> 
> 赞同：1
> 
> 时间：2013-02-11T18:48:01.587
> 
> 标签：overflow, fancybox-2

我正在使用[Fancybox](http://www.fancyapps.com/fancybox/) JQuery 插件，但由于我的`html`和`body`CSS 属性而遇到问题。目前，该`overflow-y`属性设置为`scroll`试图隐藏调整页面长度的抖动动画。

因为 Fancybox 正在调用第二个 HTML 元素（我认为），所以在调用它时会出现第二个滚动条，这又会导致动画或效果抖动。

我正在尝试使用 Fancybox 的`beforeShow`和`beforeClose`回调来解决这个问题，它在某些方面似乎很有效。

回调无缝地工作，当`beforeShow`调用 Fancybox 时，不会出现第二个滚动条。然而`beforeClose`，回调在某种意义上确实有效，即返回了原始滚动属性，但是会出现一个小的“blip”，导致屏幕抖动，并且所有 body 的元素都会调整大小/重塑形状，就好像有第二个滚动条一样首先。

我不确定为什么会发生这种情况，因为从技术上讲，没有第二个滚动条，但关闭 Fancybox 就像有第二个滚动条一样。是否有我可以修改的 CSS 规则或不同的回调来防止这种情况？

我的 Fancybox 脚本：

```
 jQuery('.fancyboox').fancybox({
            fitToView   : false,
            width       : '90%',
            height      : '90%',
            autoSize    : false,
            closeClick  : false,
            openEffect  : 'none',
            closeEffect : 'none',
            beforeShow  : function() {
                $('body, html').css('overflowY','hidden');
            },
            afterClose   : function() {
                $('body, html').css('overflowY','auto');
            }
        }); 
```

模拟相同效果的演示 - [http://jsfiddle.net/NVHWw/](http://jsfiddle.net/NVHWw/) - 如果您注意到，第二个滚动条出现然后在关闭灯箱后很快消失。

非常感谢，所以。非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T04:37:11.150

只需添加`helpers`API 选项即可禁用`overlay`锁定，例如：

```
helpers: {
    overlay: {
        locked: false
    }
} 
```

...不需要`beforeShow`和/或`afterClose`回调。

见**[JSFIDDLE](http://jsfiddle.net/E2bQR/)**

# log4net - 在互联网上安全地使用 log4net

> ID：14818813
> 
> 赞同：0
> 
> 时间：2013-02-11T18:48:18.230
> 
> 标签：log4net, remoting

我正在研究在我的 VB.NET WinForms 应用程序和 ASP.NET 网站中使用 log4net。我想通过互联网将日志消息发送到服务器以集中我的日志（现在我要么在本地记录已安装的 WinForms 应用程序，要么发送电子邮件......很多电子邮件）。我还想加密传输中的消息，以便在日志服务器上解密。

如何将加密的 log4net 消息发送到日志服务器？

我找到了这个：

[https://log4netremotelogging.codeplex.com/](https://log4netremotelogging.codeplex.com/)

但我不确定这是否适用于互联网。我也不知道如何保护它。有没有我可以挂钩的事件来用公钥加密消息？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:41:44.263

没关系。我实际上找到了将 log4net 与 web 服务一起使用的代码。这要好得多，因为您可以相对轻松地使用 https 保护 Web 服务。这是代码：

[http://www.codeproject.com/Articles/16906/LOG4NET-WebServiceAppender](http://www.codeproject.com/Articles/16906/LOG4NET-WebServiceAppender)

我唯一的抱怨是他如何依赖他自己的自定义“框架”dll 来实现这一点。为了清楚起见，我更喜欢一个简单的例子。

# c++ - 错误 C3121：无法更改类“IFilter”的 GUID

> ID：14818814
> 
> 赞同：1
> 
> 时间：2013-02-11T18:48:18.903
> 
> 标签：c++, dll, namespaces

我正在使用 VS2012 和 C++。此错误发生在 .tlh 文件中。
我检查了头文件，并`#import "C:\\Windows\\system32\\abc.dll" no_namespace` 在开头找到了。
起初，我将这一行作为注释，没有 C3121 错误，但是找不到#define 变量。错误显示如下：`error C2065:undeclared identifier`。
有谁知道如何解决这个问题？
非常感谢！

# javascript - 如何将 JSON 插入到 zope chameleon 模板中的脚本标记中？

> ID：14818815
> 
> 赞同：2
> 
> 时间：2013-02-11T18:48:23.730
> 
> 标签：javascript, json, pyramid, zope, chameleon

我正在构建一个金字塔/python 应用程序，其中可调用某个模板的视图传入一个名为 data 的值。这个变量是一个数组，形式为`[[[x1,y1,z1,],...],[[v1,v2,v3],...]]`

在我的可视化中我有

```
import json

jsdata = json.dumps(data) 
```

我想将其放入模板的 javascript 脚本标记部分，以便：

```
<script>
data=${jsdata}
</script> 
```

但我很确定语法不正确。我怎样才能做到这一点？

编辑：从这里：[http](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/templates.html) : //docs.pylonsproject.org/projects/pyramid/en/latest/narr/templates.html 似乎Genshi风格的替代品是要走的路，我认为这意味着我上面有是正确的。但是，我仍然不确定是否应该区别对待，因为它位于 javascript 标记中。这是真的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:51:48.233

您想插入一个*JavaScript*数组，而不是 Python 列表。

在 Python 和 JavaScript 格式之间进行转换的最简单方法是使用该`json`模块。JSON 毕竟是数据的 JavaScript 子集：

```
import json

jsdata = (json.dumps(data)
            .replace(u'<', u'\\u003c')
            .replace(u'>', u'\\u003e')
            .replace(u'&', u'\\u0026')
            .replace(u"'", u'\\u0027')) 
```

然后传递`jsdata`给您的模板。这些`str.replace()`调用确保数据保持 HTML 安全。

在模板中，插入这个而不转义：

```
<script>
var data = ${structure:jsdata};
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:51:24.670

我不确定 Chameleon，但“经典”Zope 页面模板不允许在`script`标签内做任何事情——如果你没有看到你的变量被插值，那么 Chameleon 的行为很可能是一样的。据我了解，这样做的原因是为了避免这种类型的代码生成（您是通过模板从 Python 生成 JavaScript）。此外，ZPT 是一种基于 XML 的模板语言，`<script>`标签的内容不必是有效的 XML。

要解决此问题，您可以执行以下操作

```
jsdata = '<script type="text/javascript">var data = ' + json.dumps(data) + ';</script>' 
```

并在您的模板中插入整个内容：

```
<tal:myscript replace="structure jsdata" /> 
```

或者，你可以做类似的事情

```
<tal:lt replace="string:&lt;" />script>
   var data = <tal:script replace="structure jsdata" />;
<tal:lt replace="string:&lt;" />/script> 
```

这将隐藏`script`变色龙的标签。

尽量减少页面中生成的 JavaScript 数量是一个好习惯。

# php - 动态填充的下拉列表；$_POST 返回错误

> ID：14818816
> 
> 赞同：1
> 
> 时间：2013-02-11T18:48:33.707
> 
> 标签：php, mysql

```
<?php
mysql_connect("host", "user", "pw") or die(mysql_error());
mysql_select_db("db") or die(mysql_error());

$sql = "SELECT machine_id FROM machines";
$result = mysql_query($sql);

echo "<form action='results_send.php' method='post' >";
echo "<select name='machine_id'>";
while ($row = mysql_fetch_array($result)) {
    echo "<option value='" . $row['machine_id'] . "'>" . $row['machine_id'] . "</option>";
}
echo "</select></form>";
echo '<input type="submit" value="Submit">';

$machine = $_POST['machine_id'];

var_dump($machine);

?> 
```

返回：

```
<form action='results_send.php' method='post' ><select name='machine_id'><option value='2011 Honda'>2011 Honda</option><option value='1999 Toyota'>1999 Toyota</option><option value='1999 Honda'>1999 Honda</option><option value='1999 Honda'>1999 Honda</option><option value='2013 Toyota'>2013 Toyota</option><option value='2012 Ford'>2012 Ford</option><option value='2012 Ford'>2012 Ford</option><option value='2012 Ford'>2012 Ford</option><option value='2012 Ford'>2012 Ford</option></select></form><input type="submit" value="Submit">NULL 
```

所有这些都在同一个文档中：results_send.php

我只尝试了几天的 php/mysql —— 非常感谢耐心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T00:36:10.567

我不知道您希望 $_POST 如何返回任何值，甚至不希望我们了解您的问题，而您却没有解释如何提交表单。

您必须为您的案例使用两种解决方案之一：

*   使用 AJAX

*   将两个不同的表单与具有不同名称的提交按钮一起使用。然后使用 isset($_POST['name_of_button']) 检查发布时提交的表单。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:53:15.083

您有语法错误，您缺少`value`属性的开头引号：

改成：

```
echo "<option value=\""; 
```

或者

```
echo '<option value="'; 
```

您还缺少一个结束`</form>`标签。如果您正在 ajaxing 此脚本并将内容插入到有其他表单的页面中，那么缺少表单标记可能是一个问题。

`htmlspecialchars()`当您将数据输出到 HTML 时，还值得传递任何数据，以防止数据可能包含引号的 XSS 和语法错误。

# php - 正则表达式匹配一个精确的字符串

> ID：14818818
> 
> 赞同：0
> 
> 时间：2013-02-11T18:48:37.917
> 
> 标签：php, regex, string, preg-match

使用 php，匹配精确字符串的正则表达式是什么。

假设我们有文本：

```
Hello, world. 

How are you today?

Today is sunshine and snow wouldn't you know. 
```

我将如何使用正则表达式来匹配字符串？：

```
sunshine and snow 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:53:51.673

使用 preg_match：

```
<?php
// The "i" after the pattern delimiter indicates a case-insensitive search
if (preg_match("/php/i", "PHP is the web scripting language of choice.")) {
    echo "A match was found.";
} else {
    echo "A match was not found.";
}
?> 
```

使用 strpos：

```
<?php
$mystring = 'abc';
$findme   = 'a';
$pos = strpos($mystring, $findme);

// Note our use of ===.  Simply == would not work as expected
// because the position of 'a' was the 0th (first) character.
if ($pos === false) {
    echo "The string '$findme' was not found in the string '$mystring'";
} else {
    echo "The string '$findme' was found in the string '$mystring'";
    echo " and exists at position $pos";
}
?> 
```

# c# - 使用 form1 中的索引并在 form2 中使用

> ID：14818823
> 
> 赞同：0
> 
> 时间：2013-02-11T18:49:05.133
> 
> 标签：c#, winforms

所以在表格1中我有一个datagridview，当用户想要编辑任何客户端时，他选择一个并单击编辑按钮......并出现一个新窗口

在新窗口中，我希望文本框 1 是客户的姓名，文本框 2 是地址。

这是form1的代码

```
 public void Clientesgrid_Cellclick(object sender, DataGridViewCellEventArgs e)
    {
        int index = clientesgrid.SelectedRows[0].Index;
    } 
```

我在form1中缺少什么吗？如何将索引转换为另一种形式？帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:54:33.357

最直接的方法可能是将其包含在`Form2`. 所以`Form2`你会有这样的东西：

```
public Form2(int clientID)
{
    // Do something with the clientID
    // Most likely set it to a property on Form2, or a private member.
} 
```

然后，`Form1`当您创建它的实例时，`Form2`它可能看起来像这样：

```
var index = clientesgrid.SelectedRows[0].Index;
var editForm = new Form2(index);
editForm.Show(); 
```

*理想情况下*，您希望此参数成为客户端的标识符，*而*`DataGridView`不仅仅是从on 开始的行索引`Form1`。这样做的原因是因为如果它只是一个行索引并且该行包含您需要的数据然后`Form2`没有它需要的数据，它仍然依赖于`Form1`获取更多数据。

尽可能减少依赖。的任何实例都`Form2`应该在其构造函数中要求任何它需要的东西才能完成它的工作。然后任何其他形式都可以创建一个实例，`Form2`只要它可以提供它需要的东西。

如果`Form2` *总是*需要这个标识符，那么您可能会采取额外的步骤将其无参数构造函数设为私有：

```
private Form2() { } 
```

`Form2`这将防止其他表单在不提供所需值的情况下创建实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:51:43.257

您必须以某种方式将其传递给第二种形式，例如这样

```
public void Clientesgrid_Cellclick(object sender, DataGridViewCellEventArgs e)
{
    form2.RowIndex = clientesgrid.SelectedRows[0].Index;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:54:23.040

在 Form2 上创建一个`public`或属性/字段`internal`

```
class Form2
{
    internal int RowIndex; // or  internal int RowIndex {get; set;}
} 
```

像这样称呼它

```
public void Clientesgrid_Cellclick(object sender, DataGridViewCellEventArgs e)
{
    form2.RowIndex = clientesgrid.SelectedRows[0].Index;
} 
```

# iis - IIS7 在某些静态文件上返回 404，而不是其他文件

> ID：14818826
> 
> 赞同：7
> 
> 时间：2013-02-11T18:49:17.883
> 
> 标签：iis, http-status-code-404

我在一个目录中有一个css文件和一个js文件。css 文件返回 200 OK 而 js 文件返回 404 Not Found。

他们拥有相同的权限。IUSR、IIS_IUSRS、Internet 访客帐户都有（至少）读取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-30T10:54:07.467

将文件类型添加到 IIS MIME TYPES。它不会提供未知文件类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-01T03:52:40.250

将文件类型添加到 IIS MIME 类型对我有用。幸运的是，对于像我这样的穴居人来说，IIS 让您可以使用 UI 来完成这项工作。

来自[MS 网站](http://technet.microsoft.com/en-us/library/cc725608%28v=ws.10%29.aspx)

> 使用用户界面
> 
> 1.  打开 IIS 管理器并导航到要管理的级别。有关打开 IIS 管理器的信息，请参阅打开 IIS 管理器 (IIS 7)。有关导航到 UI 中的位置的信息，请参阅 IIS 管理器中的导航 (IIS 7)。
> 2.  在功能视图中，双击 MIME 类型。
> 3.  在“操作”窗格中，单击“添加”。
> 4.  在“添加 MIME 类型”对话框中，在“文件扩展名”文本框中键入文件扩展名。例如，键入 .xyz
> 5.  在 MIME 类型文本框中键入 MIME 类型。例如，键入“应用程序/八位字节流”

# scala - Slick SQL 的客户类型映射器

> ID：14818827
> 
> 赞同：11
> 
> 时间：2013-02-11T18:49:23.110
> 
> 标签：scala, slick

我从光滑的测试中找到了这个例子：
[https ://github.com/slick/slick/blob/master/slick-testkit/src/main/scala/com/typesafe/slick/testkit/tests/MapperTest.scala](https://github.com/slick/slick/blob/master/slick-testkit/src/main/scala/com/typesafe/slick/testkit/tests/MapperTest.scala)

```
sealed trait Bool
case object True extends Bool
case object False extends Bool

implicit val boolTypeMapper = MappedColumnType.base[Bool, String](
  { b =>
    assertNotNull(b)
    if(b == True) "y" else "n"
  }, { i =>
    assertNotNull(i)
    if(i == "y") True else False
  }
) 
```

但我正在尝试为 org.joda.time.DateTime 与 java.sql.Timestamp 创建一个 TypeMapper - 但没有太大成功。Bool 示例非常特殊，我无法适应它。Joda Time 非常常见 - 所以任何帮助将不胜感激。

为了清楚起见，我正在使用插值 sql"""select colA,colB from tableA where id = ${id}""" 等。在进行选择时，系统通过在隐式 GetResult 转换器中使用 jodaDate 类型运行良好。

但是，对于插入，似乎没有办法进行隐式转换，或者它忽略了答案 #1 中提供的以下代码 - 与以前相同的错误：找不到参数 pconv 的隐式值：scala.slick.jdbc .SetParameter[(Option[Int], String, String, Option[org.joda.time.DateTime])]

我没有使用带注释的 Table 对象的 Lifted 样式 Slick 配置，这可能就是它没有找到/使用 TypeMapper 的原因

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-11T18:56:19.627

我在我的代码中使用了以下内容，这也可能对您有用：

```
import java.sql.Timestamp
import org.joda.time.DateTime
import org.joda.time.DateTimeZone.UTC
import scala.slick.lifted.MappedTypeMapper.base
import scala.slick.lifted.TypeMapper

implicit val DateTimeMapper: TypeMapper[DateTime] = 
  base[DateTime, Timestamp](
    d => new Timestamp(d millis), 
    t => new DateTime(t getTime, UTC)) 
```

**编辑（编辑后 =^.~= ）：（**有点晚了，但我希望它仍然有帮助）

啊，好的，因为你没有使用提升嵌入，你必须定义不同的隐式值（如编译器的错误消息所示）。像下面这样的东西应该可以工作（虽然我自己没有尝试过）：

```
implicit val SetDateTime: SetParameter[DateTime] = new SetParameter { 
  def apply(d: DateTime, p: PositionedParameters): Unit =
    p setTimestamp (new Timestamp(d millis))
} 
```

反过来（检索 的结果`SELECT`），看起来您需要定义 a `GetResult`：

```
implicit val GetDateTime: GetResult[DateTime] = new GetResult {
  def apply(r: PositionedResult) = new DateTime(r.nextTimestamp getTime, UTC))
} 
```

所以，基本上这和提升嵌入是一样的，只是用不同的类型编码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-24T11:51:09.223

为什么不深入研究效果很好的东西？看着

[https://gist.github.com/dragisak/4756344](https://gist.github.com/dragisak/4756344)

和

[https://github.com/tototoshi/slick-joda-mapper](https://github.com/tototoshi/slick-joda-mapper)

首先你可以复制粘贴到你的项目中，第二个可以从 Maven 中心获得。

# javascript - 从按钮标签提交表单

> ID：14818829
> 
> 赞同：0
> 
> 时间：2013-02-11T18:49:32.850
> 
> 标签：javascript, html, forms, events, submit

我在提交表单时添加了一个事件监听器，代码如下：

```
var formo = document.getElementById("ing");
formo.addEventListener("submit", validation, false); 
```

但我正在提交带有按钮标签的表单，其中包含以下代码：

```
var enviar = document.getElementById("submit_btn");
enviar.addEventListener("click", envioFormulario, false);

function envioFormulario() {
  this.disabled = true;
  this.value = "Sending";
  this.form.submit();
} 
```

有了这个表单被提交，但提交事件（第一行代码）似乎不起作用我该怎么做才能让它起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:56:21.667

我同意@Mathletics 的评论。单击时进行验证，如果通过验证，则提交：

```
var enviar = document.getElementById("submit_btn");
enviar.addEventListener("click", envioFormulario, false);

function envioFormulario() {
  if (validation()) {
      this.disabled = true;
      this.value = "Sending";
      this.form.submit();
  } else {
      alert("Validation failed. Didn't submit");
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:00:19.377

您的问题可能与阻止默认行为发生有关。

您需要在处理程序函数中接收事件才能做到这一点。

```
function validation( event )
{
  if ( event.preventDefault ) event.preventDefault();
  event.returnValue = false;
  // continue validating
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:56:01.580

尝试在表单元素的“onsubmit”属性中设置函数名称。

# asp.net-mvc - 在 ViewModel 中设置默认值而不在 View 中列出属性 - 可能吗？MVC4

> ID：14818833
> 
> 赞同：1
> 
> 时间：2013-02-11T18:49:38.473
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有以下控制器：

```
[HttpGet]
public ActionResult Create(int setId)
{
    // create new viewModel
    var model = new CreateCardViewModel() {SetId = setId};

    return View(model);
}

[HttpPost]
public ActionResult Create(CreateCardViewModel viewModel)
{
    if (ModelState.IsValid)
    {
        var set = _db.Sets.Single(s => s.SetId == viewModel.SetId);
        var card = new Card
            {
                Set=set, 
                SetId = set.SetId, 
                Sides = viewModel.Sides, 
                DateCreated = viewModel.DateCreated, 
                IsReady = viewModel.IsReady, 
                Stage = viewModel.Stage
            };
        set.Cards.Add(card);

        _db.Save();

        return RedirectToAction("detail", "set", new {setId = viewModel.SetId});
    }
    return View(viewModel);
} 
```

使用以下 ViewModel：

```
public class CreateCardViewModel
    {
        public CreateCardViewModel()
        {
            DateCreated = DateTime.Now;
            Sides = new List<Side> {new Side() {Stage = 0, IsFront = true, IsReady = false, Content = "Blank Side"}};
            Stage = 0;
            IsReady = true;
        }

    [HiddenInput(DisplayValue = false)]
    public int SetId { get; set; }

    [Required]
    public IList<Side> Sides { get; set; }

    [Required]
    public int Stage { get; set; }

    [Required]
    [DataType(DataType.Date)]
    [HiddenInput(DisplayValue = false)]
    public DateTime? DateCreated { get; set; }

    [Required]
    public bool IsReady { get; set; }

} 
```

但是，当我从视图中发回时，我的数据`ViewModel`都不会返回到控制器，因为视图永远不会看到它。创建这些默认值而不必在 ? 中列出它们的最佳方法是`View`什么？在视图中列出参数似乎很不雅。也许我应该在`Controller`?

我的观点在这里：

```
@model Project.Models.CreateCardViewModel

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>CreateCardViewModel</legend>

        @for (var i = 0; i < Model.Sides.Count; i++)
        {
            <h3>Side @(i+1)</h3>
            @Html.EditorFor(x => x.Sides[i].Content)
        }

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
} 
```

# spring - jpa:repositories 标签的 Java 配置版本是什么？

> ID：14818836
> 
> 赞同：7
> 
> 时间：2013-02-11T18:49:48.637
> 
> 标签：spring, spring-data, spring-data-jpa

我正在尝试仅使用 Java 配置 JPA。

我知道@EnableJpaRepositories 相当于xml 中的jpa:repositories 标记，但我想不是这样吗？

我的xml中有这个：

```
<jpa:repositories base-package="com.myapp.bla.bla" /> 
```

但是，如果我将其删除并改为使用

```
@EnableJpaRepositories("com.myapp.bla.bla") 
```

在我的 java 配置中，我遇到了一个异常 - 我认为从 1.2.0 开始就可以使用 Java 配置 JPA？

编辑：

根本的例外是：

```
No bean named 'entityManagerFactory' is defined 
```

我认为异常与我的配置中的这个定义有关，但如前所述，如果我保留 xml 并将其导入我的 java 配置，一切正常。

```
@Bean
public LocalContainerEntityManagerFactoryBean entityManagerFactoryBean() throws ClassNotFoundException {
    LocalContainerEntityManagerFactoryBean factoryBean = new LocalContainerEntityManagerFactoryBean();

    factoryBean.setDataSource(dataSource());
    factoryBean.setPackagesToScan(new String[] { "com.myapp.bla.bla.model" });
    factoryBean.setPersistenceProviderClass(HibernatePersistence.class);
    Properties props = new Properties();
    props.put("hibernate.dialect", "org.hibernate.dialect.MySQL5InnoDBDialect");
    factoryBean.setJpaProperties(props);

    return factoryBean;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-12T06:56:46.677

问题是您当前的配置创建了一个名为*entityManagerFactoryBean*的 bean 。但是，根异常的错误消息表明找不到名为*entityManagerFactory的 bean。*

您有两种方法可以解决此问题（选择您最喜欢的一种）：

1.  将配置*LocalContainerEntityManagerFactoryBean*的方法名称从*entityManagerFactoryBean()*更改为*entityManagerFactory()*。这将创建一个名为*entityManagerFactory*的 bean 。
2.  将*@Bean*注解的名称属性设置为“entityManagerFactory”。换句话说，使用*@Bean(name="entityManagerFactory")*注解对配置方法进行注解。这样你就可以自己指定bean的名字，并确保被注解的方法的名字被忽略。

# mysql - 试图在数据库中插入数字信息

> ID：14818844
> 
> 赞同：0
> 
> 时间：2013-02-11T18:50:15.443
> 
> 标签：mysql

我正在尝试在我的 sql 数据库的字段中插入一个数字。表格是：

```
Create table IF NOT EXISTS LJugador(
Fecha date,
vm int,
totalpuntos int,
nom_jugador varchar(80),
FOREIGN KEY (nom_jugador) REFERENCES Jugadores(nombre),
PRIMARY KEY(Fecha, nom_jugador)
)engine=innodb; 
```

插入的 PHP 代码：

```
$ljuga_in = "INSERT INTO ljugador VALUE( now(), '{$jugadores[$m][2]}','{$jugadores[$m][3]}', '{$jugadores[$m][1]}' )"; 
```

当我做 echo of`$ljuga_in`查看它是否被正确插入时，我得到：

```
INSERT INTO ljugador VALUE( now(), '4.130.000','92', 'Osman' ); 
```

您可以看到数字被正确插入，但是当我进行选择查询以查看信息时，VM 有`4130`- 最后三个零不存在。

该字段是`int`，但我尝试过使用数字和双精度或浮点数，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:53:10.107

尝试使用 DECIMAL(n, p) 其中 n 是总位数， p 是逗号后的位数，例如 DECIMAL(10, 2) 可以表示的最大值为 99.999.999,99

# subgurim-maps - 使用 Subgurim 谷歌地图的风格地图

> ID：14818845
> 
> 赞同：0
> 
> 时间：2013-02-11T18:50:17.483
> 
> 标签：subgurim-maps

可以使用 Subgurim Google Map 控件创建样式地图吗？

这里的代码根据 Google Api V3。

```
var styles = [{
featureType: "all",
elementType: "all",
stylers: [
{ saturation: -100 }
]
}];

map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

var mapType = new google.maps.StyledMapType(styles);

map.mapTypes.set("mymap", mapType);

map.setMapTypeId("mymap"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:23:20.930

我是 Subgurim Maps 的开发人员之一，此功能将在我们的下一个版本中提供，希望在月底之前提供。一旦我们有了它，我会通过这个问题通知你。

# google-drive-api - 谷歌驱动器 api 不知道它保存文件的位置，但是当它被提取时它显示保存但不显示其他

> ID：14818848
> 
> 赞同：0
> 
> 时间：2013-02-11T18:50:24.523
> 
> 标签：google-drive-api

我使用谷歌驱动器 api 插入文本文件...

**构建服务**

```
function buildService() {

$DRIVE_SCOPE = 'https://www.googleapis.com/auth/drive';
$SERVICE_ACCOUNT_EMAIL = 'xxxx@developer.gserviceaccount.com';

if($_SERVER['HTTP_HOST'] == 'localhost')
$SERVICE_ACCOUNT_PKCS12_FILE_PATH = 'xxxxxxxx-privatekey.p12';
else
$SERVICE_ACCOUNT_PKCS12_FILE_PATH = $_SERVER['DOCUMENT_ROOT'].'/xxxxx-privatekey.p12';

  $key = file_get_contents($SERVICE_ACCOUNT_PKCS12_FILE_PATH);
  $auth = new Google_AssertionCredentials(
      $SERVICE_ACCOUNT_EMAIL,
      array($DRIVE_SCOPE),
      $key);
  $client = new Google_Client();
  $client->setUseObjects(true);
  $client->setAssertionCredentials($auth);
  return new Google_DriveService($client);
} 
```

**检索文件**

```
function retrieveAllFiles($service) {
  $result = array();
  $pageToken = NULL;

  do {
    try {
      $parameters = array();
      if ($pageToken) {
        $parameters['pageToken'] = $pageToken;
      }
      $files = $service->files->listFiles($parameters);

      $result = array_merge($result, $files->getItems());
      $pageToken = $files->getNextPageToken();
    } catch (Exception $e) {
      print "An error occurred: " . $e->getMessage();
      $pageToken = NULL;
    }
  } while ($pageToken);
  return $result;
} 
```

**创建实例并插入**

```
$service = buildService();

$file = new Google_DriveFile();
$file->setTitle('My document');
$file->setDescription('A test document');
$file->setMimeType('text/plain');

$data = "contents";

$createdFile = $service->files->insert($file, array('data' => $data,'mimeType' =>'text/plain',));

print_r($createdFile);

echo '<br>------<br>'; 
```

**检索文件**

```
$ret = retrieveAllFiles($service);

echo '<pre>';
print_r($ret); 
```

1.  在第一次通话中，我插入了一个文件......

2.  在第二次通话中，我试图列出所有文件......

3.  当我尝试列出时，我只能看到插入的文件，但看不到其他我可以通过登录 docs.google.com 在我的驱动器中看到的文件。我已经有 6 个在线文件

4.  根据文档，我使用私钥和服务帐户电子邮件创建了服务帐户。

**那么该文件将存储在哪里以及如何列出谷歌驱动器根目录中的所有其他文件？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T20:48:46.820

您正在将文件插入由服务帐户表示的应用程序拥有的帐户中。

If you want to manage (insert/list/...) files in another domain user's Drive account, you'll have to perform Domain-wide delegation: [https://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation)

# twig - 通过多个模板传递块

> ID：14818849
> 
> 赞同：2
> 
> 时间：2013-02-11T18:50:26.147
> 
> 标签：twig

我正在尝试设置一些我想在整个站点中使用的通用模板。从模板开始以呈现用户。我将其分为两个不同的子模板： users.html.twig（用于显示用户表的模板） user.html.twig（用于呈现单个用户的模板）

根据控制器，这个子模板是“包含的”，我可能想为每个用户添加一些按钮。

假设我有一个可以搜索用户的操作。此操作具有模板 search.html.twig 现在我想在我的 search.html.twig 中包含 users.html.twig，它本身包含 user.html.twig。棘手的部分是，我想在 search.html.twig 中定义一个在 user.html.twig 中呈现的单个块。我尝试使用嵌入，但不幸的是它什么也没渲染：

search.html.twig

```
{% embed 'StregoUserBundle:Entity:users.html.twig' with {'users': results, 'perRow' : 3} %}
            {% block user_additional %}
                    TOOOOOOOOOOOOP
            {% endblock user_additional %}
{% endembed %} 
```

users.html.twig

```
{% block user_table %}
    {% for user in users %} 
        <div >
                {% embed 'StregoUserBundle:Entity:user.html.twig' with {'user': user} %}
                    {% block user_additional %}
                           {{ parent()}}
                    {% endblock user_additional %}
                {% endembed %}  
        </div>
    {% endfor %}
{% endblock user_table %} 
```

用户.html.twig

```
{% block single_user %}
            <div class="people-list">
            <a href="{{ path('profile_show', { 'username': user.username }) }}">
                <img src="{{ user.profilePic  | imagine_filter('profile_thumb') }}" alt="{{ user.username }}" class="img-polaroid">
            </a>
            <a href="{{ path('profile_show', { 'username': user.username }) }}"><h3>{{ user.username }}</h3></a>
            <h3><small>{{ user.firstName }} {{ user.lastName }}</small></h3>
            {% block user_additional %}
            {% endblock user_additional %}

            </div> 

{% endblock single_user %} 
```

我尝试了 {{ block('XXX')}} 的几种组合，包括、嵌入、使用等......但没有找到解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-26T17:15:54.460

不应该

```
{% endembed %} 
```

是

```
 {% embeded %} 
```

# hadoop - 如何验证我在 Hadoop 上的任何工作？

> ID：14818852
> 
> 赞同：0
> 
> 时间：2013-02-11T18:50:45.610
> 
> 标签：hadoop, oozie

我目前正在解决 Oozie Coordinator 的问题，该问题汇集了 NameNode 以进行数据检查。作为一个案例研究，我了解到雅虎每天运行超过 15000 个工作岗位。因此，如果大多数作业都依赖于数据，这将是 NameNode 的开销。我目前正在研究一个有 3-4 个节点的集群，基本上是我们自己的笔记本电脑。但是我的教授问我如何才能在如此大规模的范围内验证我的工作。我必须向他提供一些分析，以证明我的解决方案可以在这种规模上发挥作用。请建议我做同样的一些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T06:12:23.573

可以使用[Mumak](http://svn.apache.org/repos/asf/hadoop/common/branches/branch-0.21/mapreduce/src/contrib/mumak/)模拟 Hadoop 集群。Mumak 的代码[在](http://svn.apache.org/repos/asf/hadoop/common/branches/branch-0.21/mapreduce/src/contrib/mumak/)0.21 版本中，而不是在主干中。它是一个贡献模块，因此围绕 Mumak 没有太多积极的工作或文档。这是相同的[JIRA](https://issues.apache.org/jira/browse/MAPREDUCE-728)。另外，看看[Ankus](http://mist.cs.wayne.edu/Ankus.html)项目，它参考了[mrsim](http://code.google.com/p/mrsim/)和[mrperf](http://research.cs.vt.edu/dssl/mrperf/)。

这是一个目前还不太关注的领域。但是，对于某人进行一些研究并获取一些代码来说，这将是一个不错的话题。

# web-applications - 限制 FatFractal 登录访问

> ID：14818854
> 
> 赞同：2
> 
> 时间：2013-02-11T18:50:50.390
> 
> 标签：web-applications, custom-backend

我正在使用 FatFractal Javascript SDK，我注意到 login() 函数即使对于以前没有在我的应用程序中注册的用户名也是成功的。我想强制用户在访问我的应用程序之前逐步完成注册过程。如果用户名之前没有在我的应用程序的后端注册，有没有办法限制登录访问？

编辑：这里有一些简化的代码片段来帮助说明问题......

相关变量：

```
ff = new FatFractal();
var pword = $("#login-input-pw").val();
var uname = $("#login-input-email").val(); 
```

我的登录功能连接到 HTML 表单：

```
function login(){
    ff.login(uname,pword,function(user){
        // do stuff (change page, load data, etc.)
    },function(statusCode, responseText){
        $("#loginError").html("Error: " + JSON.parse(responseText).statusMessage + ".");
        $("#login-input-pw").val('');
    });
} 
```

在输入尚未在我的应用程序中注册的用户名的情况下，我希望 ff.login() 失败回调函数能够执行。但是，对于所有新的登录尝试（显然，现有用户名 + 错误密码组合不起作用），成功回调函数将执行，并且用户被授予访问应用程序的权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T00:23:53.330

开箱即用的 FatFractal 应用程序允许“自动注册”，这就是您在此处看到的。这允许您的客户简化流程，但并不总是您想要的。

要更改行为，请打开您的`ff-config/application.ffdl`文件。你应该在顶部附近看到这样的一行：

```
SET ActivateUsersOnReg          true 
```

将其更改为`false`，然后通过 本地`ffef deploylocal`或通过 重新部署您的应用程序，然后`ffef deployFFFabric`您就可以开始了。

# spotify - 在 Spotify 上放慢和循环播放部分歌曲

> ID：14818857
> 
> 赞同：3
> 
> 时间：2013-02-11T18:51:10.877
> 
> 标签：spotify

我使用 Spotify 来满足我所有的音乐需求，并且想知道是否有某种方法可以编写一个应用程序，让我可以从 Spotify 访问音乐并放慢歌曲速度并循环播放部分歌曲。我是一名音乐家，这样的事情有助于练习。

如果可以做到，我将不胜感激我需要做的事情的简要概述。

另外，这合法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:53:48.063

您必须使用 libspotify 自己编写该应用程序。但是，我相当确定 libspotify 的服务条款不允许修改音频。我不确定放慢速度是否算作“修改”——这可能是律师的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T10:42:57.367

@iKenndac 是正确的，但我只想补充一点，修改 libspotify 提供的 PCM 流在技术上违反了法律条款和条件。但是，如果您不重新分发此类应用程序（即仅供个人和私人使用），您将不会遇到任何法律问题。

（免责声明：我为 Spotify 工作，但不是律师）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-13T08:10:49.103

您可以为此使用 Djay。Djay 有一个功能，因此您可以在 spotify 中以较慢或更快的速度播放歌曲。该功能称为键锁/时间拉伸，它似乎适用于在 OSX 10.9 或更高版本、iphone 4s 或更高版本、ipad 2 上运行的 mac或连接设备。希望它很快就会适用于更多设备。它不是世界上最便宜的应用程序，但它应该可以工作。

这是ipad版本的链接。

[djay 2 - algoriddim GmbH](https://itunes.apple.com/us/app/djay-2/id669196929?mt=8&uo=4&at=1l3vuyx)

苹果手机

[djay 2 for iPhone - algoriddim GmbH](https://itunes.apple.com/us/app/djay-2-for-iphone/id669198374?mt=8&uo=4&at=1l3vuyx)

和麦克

[djay Pro - algoriddim GmbH](https://itunes.apple.com/us/app/djay-pro/id947578651?mt=12&uo=4&at=1l3vuyx)

# java - 计算得出的亚马逊 MWS 签名不匹配

> ID：14818860
> 
> 赞同：0
> 
> 时间：2013-02-11T18:51:17.580
> 
> 标签：java, amazon-mws

我对 Java 比较陌生，并且已经被困了几天，试图让我的应用程序“发布”一个 HTTP 请求到亚马逊的 MWS API。我不断收到“SignatureDoesNotMatch”回复，但我不知道为什么。我已经广泛使用了亚马逊的 MWS 暂存器，使用它我在获得成功响应方面没有任何问题，所以我的密钥等都可以。暂存器生成的内容参数和 base64 签名与我的应用程序生成的相匹配，因此我确信我的应用程序正确编译了参数和签名。当我将暂存器生成的内容参数硬编码到我的应用程序中时，我收到“SignatureDoesNotMatch”错误响应。

我的代码的相关部分是：

```
/*
 * get amazon timestamp
 */
GetAmazonTimestamp timestampObj = new GetAmazonTimestamp();
String amazonTimestamp = null;
try {
    amazonTimestamp = timestampObj.getTimestamp();
    amazonTimestamp.replace(".000Z", "Z");
} catch (IOException e) {
    e.printStackTrace();
}

/*
 *  create http parameters and initialise the signature value
 */ 
String URLendpoint =  "https://mws.amazonservices.co.uk/orders/2011-01-01";         

String param1 = "AWSAccessKeyId";       String value1 = "AKIAIZXBKLVSGBBQQL2A";
String param2 = "Action";               String value2 = "ListOrders"; 
String param3 = "LastUpdatedAfter";     String value3 = "2013-02-01T00:00:00Z";
String param4 = "MarketplaceId.Id.1";   String value4 = "A1F83G8C2ARO7P";
String param5 = "SellerId";             String value5 = "A3A2272JFHXROO";
String param6 = "SignatureMethod";      String value6 = "HmacSHA256";
String param7 = "SignatureVersion";     String value7 = "2";
String param8 = "Timestamp";            String value8 = amazonTimestamp;
String param9 = "Version";              String value9 = "2011-01-01";
String param10 = "Signature";           String value10 = null;

/* 
 *  build sections of URL components for signature      
 */ 
String URLforSignature = "POST\n" + "mws.amazonservices.co.uk\n" + "/Orders/2011-01-01\n" +
    URLEncoder.encode(param1,"UTF-8") + "=" +
    URLEncoder.encode(value1,"UTF-8") + "&" + 
    URLEncoder.encode(param2,"UTF-8") + "=" +
    URLEncoder.encode(value2,"UTF-8") + "&" + 
    URLEncoder.encode(param3,"UTF-8") + "=" +
    URLEncoder.encode(value3,"UTF-8") + "&" + 
    URLEncoder.encode(param4,"UTF-8") + "=" +
    URLEncoder.encode(value4,"UTF-8") + "&" + 
    URLEncoder.encode(param5,"UTF-8") + "=" +
    URLEncoder.encode(value5,"UTF-8") + "&" + 
    URLEncoder.encode(param6,"UTF-8") + "=" +
    URLEncoder.encode(value6,"UTF-8") + "&" + 
    URLEncoder.encode(param7,"UTF-8") + "=" +
    URLEncoder.encode(value7,"UTF-8") + "&" + 
    URLEncoder.encode(param8,"UTF-8") + "=" +
    URLEncoder.encode(value8,"UTF-8") + "&" + 
    URLEncoder.encode(param9,"UTF-8") + "=" +
    URLEncoder.encode(value9,"UTF-8");

/*
 * hash and base64 encode the signature using the URLforSignature
 */
GetAmazonSignature signatureObj = new GetAmazonSignature();                 
value10 = signatureObj.getSignature(URLforSignature);

/*
 * create the http post
 */
HttpClient client = new DefaultHttpClient();
HttpPost post = new HttpPost(URLendpoint);

String line = null;

try {
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    post.addHeader("Content-Type", "application/x-www-form-urlencoded");
    nameValuePairs.add(new BasicNameValuePair(param1, value1));
    nameValuePairs.add(new BasicNameValuePair(param2, value2));
    nameValuePairs.add(new BasicNameValuePair(param3, value3));
    nameValuePairs.add(new BasicNameValuePair(param4, value4));
    nameValuePairs.add(new BasicNameValuePair(param5, value5));
    nameValuePairs.add(new BasicNameValuePair(param6, value6));
    nameValuePairs.add(new BasicNameValuePair(param7, value7));
    nameValuePairs.add(new BasicNameValuePair(param8, value8));
    nameValuePairs.add(new BasicNameValuePair(param9, value9));
    nameValuePairs.add(new BasicNameValuePair(param10, value10));

    post.setEntity(new UrlEncodedFormEntity(nameValuePairs, "UTF-8"));

    HttpResponse response = client.execute(post);
    BufferedReader rd = new BufferedReader(new InputStreamReader(
            response.getEntity().getContent()));
    line = "";

    while ((line = rd.readLine()) != null) {
        System.out.println(line);
    }
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:13:01.080

感谢那些帮助我的人，但我最终发现“ [https://mws.amazonservices.co.uk/orders/2011-01-01](https://mws.amazonservices.co.uk/orders/2011-01-01) ”在订单中需要一个大写“O”。亚马逊的开发支持人员同意“SignatureDoesNotMatch”错误消息在这种情况下不是很有帮助，并表示他们会对此进行调查。

再次感谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T03:39:17.400

为什么不使用亚马逊为 MWS 提供的 Java 客户端库？

转到[MWS](https://developer.amazonservices.co.uk/)并单击您感兴趣的 API。您将看到一个 Java 客户端库链接，您可以从中获取所需的文件。它们包含示例并将处理 URL 签名、解析和其他您通常必须自己完成的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T19:00:06.663

您构建的方式`URLforSignature`似乎还可以。

但是，您没有显示您的代码`GetAmazonSignature`。我怀疑这个缺陷在那里。您可能忘记对结果进行 base64 编码了吗？请注意，[MWS 暂存器](https://mws.amazonservices.com/scratchpad/index.html)在“请求详细信息”页面上显示了十六进制签名以及 base64 编码的签名。您应该能够通过将这些细节与您的函数结果进行比较来找到缺陷。

# java - 图像和按钮的 2D 滚动视图（在较小的屏幕上）

> ID：14818862
> 
> 赞同：0
> 
> 时间：2013-02-11T18:51:19.417
> 
> 标签：java, android

如何创建比 Android 中的屏幕空间更大的视图？

我正在尝试从我在 Android 中的 iOS 项目中重新创建一个视图。该视图由第一列静态图像和一个 20x13 的按钮网格（是的，总共 260 个！）组成，单击时将生成另一个活动：

![ipad屏幕](../Images/674bc4a97943ae3ed4871120b999f4ba.png)

每个按钮都会抛出一个整数，并且每天都会更改背景图像。

手机的问题在于屏幕空间。将所有内容都放在一个屏幕上会使按钮太小而无法正确触摸。在 iPhone 应用程序中，我在 ScrollView 中创建了更大的按钮设置在屏幕外，然后用户可以滚动到该按钮。据我所知，Android 不做 ScrollView 的 2d 版本。我曾尝试动态使用gridview，例如：

![网格视图示例](../Images/3f5bb34adaff3d16296129ee0eaaeb77.png)

但是，生成的动态按钮需要垂直移动，它们太小而无法在较小的屏幕上按下，并且只能向一个方向滚动。

我也一直在考虑 14 个垂直线性/相对布局，但我再次受限于屏幕尺寸，这会使按钮太小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:52:26.203

我确实从这个[链接](http://blog.gorges.us/2010/06/android-two-dimensional-scrollview/)实现了代码，效果很好。您创建一个自定义滚动视图，然后将其插入到您的 XML 文件中：

```
<RelativeLayout
android:id="@+id/scene_layout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:drawingCacheQuality="low"
android:orientation="horizontal" >

<com.example.yourappname.TwoDScrollView
android:id="@+id/scene_scroller"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:drawingCacheQuality="low" >

</com.example.yourappname.TwoDScrollView>
</RelativeLayout> 
```

然后，您可以将您的项目放入布局中，并确保根据您的需要对宽度/高度参数进行排序 - match_parent 会将您的布局固定到屏幕上。

# ocaml - OCaml sum 类型中的 int * int vs (int * int)

> ID：14818866
> 
> 赞同：10
> 
> 时间：2013-02-11T18:51:39.527
> 
> 标签：ocaml

```
type foo = A of int * int | B of (int * int) 
```

`int * int`和有什么区别`(int * int)`？我看到的唯一区别是模式匹配：

```
let test_foo = function
  | A (f, s) -> (f, s)
  | B b -> b 
```

它只是语法糖吗？你如何选择使用哪一个？这两种形式有什么性能差异吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T19:11:55.883

是的，存在性能差异：

在内存`A (23, 42)`中将包含一个将其标识为 a 的标签`A`和两个整数 23 和 42。`B (23, 42)`将包含一个将其标识为 a 的标签`B`和一个指向包含整数`23`和的元组的指针`42`。因此，在创建 a 时将有一个额外的内存分配，`B`而在访问 a 中的各个值时会有一个额外的间接级别`B`。因此，在您实际上不将构造函数参数用作元组的情况下， using`A`将比 using 涉及更少的开销`B`。

另一方面，您的`test_foo`函数每次使用`A`值调用时都会创建一个新元组，但是当使用值调用它时，`B`它只会返回内存中已经存在的元组。所以`test_foo`是一个`B`比它便宜的操作`A`。因此，如果您将构造函数的参数用作元组，并且您将多次使用相同的值，那么使用`B`会更便宜。

因此，如果您要将构造函数参数用作元组，那么使用带元组的构造函数是有意义的，因为您可以使用模式匹配用更少的代码获取元组，并且因为它可以避免必须从多次相同的值。在所有其他情况下，最好不要使用元组，因为它涉及更少的内存分配和更少的间接性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T20:29:21.007

如前所述，构造函数`A`采用两个`int`，而构造函数`B`采用有序对。

所以你可以写

```
let bar = A (1, 2) 
```

或者

```
let bar = B (1, 2) 
```

或者

```
let bar = (1, 2)
let baz = B bar 
```

但你不能写

```
let bar = (1, 2)
let baz = A bar 
```

此外，在您的模式匹配中，您仍然可以将 B 的内容匹配为两个 int，但您不能将 A 的内容匹配为绑定到有序对的值

```
let test_foo = function
  | A a -> a (* wrong *)
  | B (f, s) -> (f, s) (* ok *) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:32:08.710

它们是两种不同的类型。这种语法的解释在`*`运算符处是模棱两可的。它可以简化为以下形式：

`type x = Y * Z`其中 '*' 与`type`OCaml `int * int`中的关键字相关联，或者其中`*`用于构造元组的运算符的容量

默认优先级为前者。通过在 周围加上括号，`(int * int)`您可以覆盖默认优先级并强制执行后一种解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-12T02:23:24.777

这是 OCaml 语法中的棘手问题之一——即使看起来您正在声明一个具有元组数据类型 ( `A of int * int`) 的构造函数，并且即使当您使用构造函数时，看起来您正在给它一个元组 ( `A (2,3)`)，这实际上并不是正在发生的事情。

如果你实际构造了一个元组值并尝试将它传递给构造函数，它将无法编译 -- `let x = (2,3) in A x`。相反，`*`构造函数中的定义和`(,)`构造函数中的 use 表达式只是*多参数*构造函数的语法。该语法模仿带有元组参数的构造函数，但实际上是分开的。如果您想实际使用单个元组参数创建构造函数，则额外的括号是必需的。

# java - Java 日历变量格式

> ID：14818868
> 
> 赞同：0
> 
> 时间：2013-02-11T18:51:46.080
> 
> 标签：java, calendar

我是一名新的 Java 程序员，正在研究先前的建议，以生成一个可以接受 1-365 整数并给出月份和日期的计算器。我不确定如何将每个月解析为单独的变量。完全卡住了。任何帮助将不胜感激。

```
import java.util.Scanner;

public class principal {
    public static void maxn(String[] args) {
        Scanner input = new Scanner(System.in);

        int x = 0;
        int date;
        if (x < 30) {
            month = "January";
            date = x;
            System.out.println(month + " " + day);
        } else
            x += 31;
        if (31 < x < 58){
            String month = "February";
            day -= x;        

        if (31 < x < 58 < 89) {
            month = "March"
            day -= x;

            if (31 < x < 58 < 89 < 120) {
                month = "April"
                day -= x;

                if (31 < x < 58 < 89 < 120 < 150) ;
                {
                    month = "May"
                    day -= x;

                    if (31 < x < 58 < 89 < 120 < 150 < 180) ;
                    {
                        month = "June"
                        day -= x;

                        if (31 < x < 58 < 89 < 120 < 150 < 180 < 211) {
                            month = "July"
                            day -= x;

                            if (31 < x < 58 < 89 < 120 < 150 < 180 < 211 < 242) {
                                month = "August"
                                day -= x;

                                if (31 < x < 58 < 89 < 120 < 150 < 180 < 211 < 242 < 273) {
                                    month = "September" day -= x;

                                    if (31 < x < 58 < 89 < 120 < 150 < 180 < 211 < 242 < 273 < 303) {
                                        month = "October" day -= x;

                                        if (31 < x < 58 < 89 < 120 < 150 < 180 < 211 < 242 < 273 < 303 < 334) {
                                            month = "November"
                                            day -= x;

                                            if (31 < x < 58 < 89 < 120 < 150 < 180 < 211 < 242 < 273 < 303 < 365) {
                                                month = "December"
                                                day -= x;
                                            }

                                        }
                                    }
                                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:15:43.747

这里有两种完全不同的方式来做你想做的事。第一个假设当前年份（ito 闰年），第二个假设它不是闰年。

```
public static void main(String[] args) throws IOException
{
  BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
  String line = br.readLine();
  while (!line.isEmpty())
  {
     int i = Integer.parseInt(line);

     // way 1
     Calendar c = Calendar.getInstance();
     c.set(Calendar.DAY_OF_YEAR, i);
     System.out.println(c.get(Calendar.DAY_OF_MONTH) + " " +
                        DateFormatSymbols.getInstance().getMonths()[c.get(Calendar.MONTH)]);

     // way 2
     String[] months = {"JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"};
     int[] days = {31,28,31,30,31,30,31,31,30,31,30,31};
     int j = 0;
     while (i > days[j])
        i -= days[j++];
     System.out.println(i + " " + months[j]);

     line = br.readLine();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:10:18.193

根据我对你的问题的理解，你会想要这样的东西：

```
int yourInt = 325; // YOUR NUMBER HERE, BETWEEN 1 and 365
Calendar cal = Calendar.getInstance();
cal.set(Calendar.YEAR, 2013);  //depending on the year you want
cal.set(Calendar.DAY_OF_YEAR, yourInt);

SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
try {
    Date myDate = sdf.parse(sdf.format(cal.getTime()));
    System.out.println("date : " + myDate.toString());
    System.out.println("month : " + (cal.get(Calendar.MONTH) + 1)); //+1 because January is 0
    System.out.println("day of month : " + cal.get(Calendar.DAY_OF_MONTH));
} catch (ParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

改变年份当然会改变你得到的价值。

使用 325 作为整数，您将获得以下输出：

> 月 : 11 月中
> 的一天 : 21
> 日期 : Thu Nov 21 14:12:57 EST 2013

# javascript - 如何在不使用自定义触发器的情况下使用 jQuery 侦听插入到 DOM 中的元素？

> ID：14818875
> 
> 赞同：2
> 
> 时间：2013-02-11T18:52:04.600
> 
> 标签：javascript, jquery, dom, javascript-events

我想听另一段在页面中插入一些 html 的代码。我不控制那个代码，所以我不能`.trigger('custom_event')`做`$(document).on('custom_event')`

此外，我要监听的插入的 div 嵌套在插入的 html 中。

这是我现在拥有的：

```
$(document).on('DOMNodeInsertedIntoDocument', "#inserted", function () {
    console.log("Inserted into document:", $(this));
});

$(document).ready(function () {
    var new_node = $('<div><div id="inserted">New Div</div></div>');
    $("body").append(new_node);
}); 
```

[http://jsfiddle.net/AeHxQ/5/](http://jsfiddle.net/AeHxQ/5/)

为什么没有触发事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:10:43.080

您可以使用带有一点 JavaScript 的 CSS 动画来检测元素何时被添加到 DOM。该技术在这里解释：http: [//davidwalsh.name/detect-node-insertion](http://davidwalsh.name/detect-node-insertion)

# php - 一些 Laravel 4 PSR-0 问题？

> ID：14818877
> 
> 赞同：5
> 
> 时间：2013-02-11T18:52:09.390
> 
> 标签：php, laravel, composer-php

我注意到 Laravel 4 使用了一些[PSR](http://www.php-fig.org/)标准。我最近安装了 SensioLabs 工具 php-cs-fixer，当我们想要遵循 PHP 编码标准时，它可以检测并修复大多数问题。

我已经在我的裸 Laravel 4 副本中执行了命令，这是日志。

```
php-cs-fixer fix app/
! Class User in /home/javier/Code/laravel/app/models/User.php should have at least a vendor namespace according to PSR-0 rules
! Class DatabaseSeeder in /home/javier/Code/laravel/app/database/seeds/DatabaseSeeder.php should have at least a vendor namespace according to PSR-0 rules
! Class HomeController in /home/javier/Code/laravel/app/controllers/HomeController.php should have at least a vendor namespace according to PSR-0 rules
! Class BaseController in /home/javier/Code/laravel/app/controllers/BaseController.php should have at least a vendor namespace according to PSR-0 rules 
```

输出显示了与自动加载标准 PSR-0 相关的一些问题。
这里发生了什么 ？？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T10:08:36.017

在github laravel tracker 上报告*问题后，我得到了*[@javiervd](https://github.com/javiervd)的良好响应。

这是答案

> 问题是“app”文件夹中的类不遵循 PSR-0，这就是 composer 自动加载器使用类映射而不是 PSR-0 的原因。
> 
> 引用@daylerees
> 
> > 现在你可能会问自己，为什么 Laravel 不默认设置这个？
> > 
> > 好吧，Laravel 不知道你的项目叫什么，也不知道根命名空间是什么。它是一个零配置框架，这意味着它应该“开箱即用”。类映射是最明智的选择。

这很有道理。

# amazon-s3 - s3 永无止境的待处理音频请求

> ID：14818878
> 
> 赞同：6
> 
> 时间：2013-02-11T18:52:19.573
> 
> 标签：amazon-s3

我在 s3 上有一个 mp3 文件（并且体验过许多其他 mp3 文件），它不能在 chrome 中播放（以及其他浏览器：FF、safari 等）。chrome 中的网络对话框显示有一个挂起的请求似乎从未被 s3 响应，但是如果我对 URL 执行 wget，我会立即得到响应。

此外，如果我从运行 nginx 的服务器上提供完全相同的文件，我也可以立即访问 chrome 中的 URL。我知道 S3 确实支持字节范围请求，所以 chrome 的字节范围查询应该没有问题。此外，我已验证该文件是可访问的，并且其内容类型是音频/mpeg。

这是有问题的文件： http: [//s3.amazonaws.com/josh-tmdbucket/23/talks/ffcc525a0761cd9e7023ab51c81edb781077377d.mp3](http://s3.amazonaws.com/josh-tmdbucket/23/talks/ffcc525a0761cd9e7023ab51c81edb781077377d.mp3)

这是该 URL 的 chrome 中网络请求的屏幕截图：![在此处输入图像描述](../Images/7b67a4ea34c5dabc52620473ecab0d46.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-02T12:36:55.240

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-11T14:30:17.500

文件有同样的问题。

```
    原始网址看起来像这样 =>
    https://my-bucket-name.s3-eu-west-1.amazonaws.com/EIR.mp4

```

添加了 CloudFront 发行版，它解决了我所有的问题。

```
    网址只改变了一点：
    https://my-bucket-name.s3.amazonaws.com/EIR.mp4

```

（但您可以在创建[分发](https://console.aws.amazon.com/cloudfront/home?region=ap-southeast-1#distributions:)时对其进行一些修改/如果您愿意，甚至可以设置您自己的 DNS）。

# html - HTML5 中的实时 SQL 语法高亮显示

> ID：14818880
> 
> 赞同：13
> 
> 时间：2013-02-11T18:52:34.457
> 
> 标签：html, css, textarea, syntax-highlighting

我想使用用`<textarea>`JavaScript 编写的标记或替代方法，在我编写 SQL 语句时突出显示它们（实际上与 phpMyAdmin 的 SQL 部分相同，您可以在其中手动编写查询。）

请告诉我，这可以在不使用 HUGE 库的情况下实现，并且可以轻松定制。如果是这样，我应该使用哪个库以及如何使用？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-11T18:59:47.907

[http://codemirror.net/](http://codemirror.net/)

我想我找到了我想要的。虽然这看起来像一个大图书馆，但这会成功。谢谢大家。

# php - MySQL - 这个查询可以简化吗？- 子选择

> ID：14818886
> 
> 赞同：0
> 
> 时间：2013-02-11T18:53:12.320
> 
> 标签：php, mysql, vbulletin

这是表格和我当前的代码

[http://www.sqlfiddle.com/#!2/f1754/6](http://www.sqlfiddle.com/#!2/f1754/6)

照原样，它有效，但我觉得它可能是资源密集型的......有什么想法吗？

“网络”周围的其他人说“子选择”不受欢迎......

（创建数据库的代码）

```
CREATE TABLE IF NOT EXISTS `thread_classifieds` (
  `threadid` int(10) NOT NULL,
  `price` decimal(10,2) unsigned DEFAULT NULL,
  `obo` int(5) NOT NULL,
  `offer` int(5) NOT NULL,
  `state` varchar(100) NOT NULL,
  `location` varchar(100) NOT NULL,
  `area` varchar(150) NOT NULL,
  `posttype` varchar(50) NOT NULL,
  `posttype_firearm` varchar(50) NOT NULL,
  `caliber` varchar(100) NOT NULL,
  `manufacturer` varchar(100) NOT NULL,
  `action` varchar(50) NOT NULL,
  `type` varchar(50) NOT NULL,
  UNIQUE KEY `threadid` (`threadid`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `thread_classifieds` (`threadid`, `price`, `obo`, `offer`, `state`, `location`, `area`, `posttype`,     `posttype_firearm`, `caliber`, `manufacturer`, `action`, `type`) VALUES
(72, 750.00, 1, 0, 'Kentucky', 'louisville', 'Okolona', 'for-sale', 'handguns', '9mm-luger', 'springfield', 'double-single-action', 'pistol');

CREATE TABLE IF NOT EXISTS `thread_classifieds_action` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `type` int(10) NOT NULL,
  `short` varchar(100) NOT NULL,
  `long` varchar(100) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=21 ;

INSERT INTO `thread_classifieds_action` (`id`, `type`, `short`, `long`) VALUES
(2, 2, 'double-single-action', 'Double / Single Action');

CREATE TABLE IF NOT EXISTS `thread_classifieds_caliber` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `type` int(10) NOT NULL,
  `short` varchar(100) NOT NULL,
  `long` varchar(100) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=211 ;

INSERT INTO `thread_classifieds_caliber` (`id`, `type`, `short`, `long`) VALUES
(46, 2, '9mm-luger', '9mm Luger');

CREATE TABLE IF NOT EXISTS `thread_classifieds_locations` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `forumid` int(10) NOT NULL,
  `short` varchar(100) NOT NULL,
  `long` varchar(100) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=242 ;

INSERT INTO `thread_classifieds_locations` (`id`, `forumid`, `short`, `long`) VALUES
(92, 34, 'louisville', 'Louisville');

CREATE TABLE IF NOT EXISTS `thread_classifieds_manufacturer` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `type` int(10) NOT NULL,
  `short` varchar(100) NOT NULL,
  `long` varchar(100) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=222 ;

INSERT INTO `thread_classifieds_manufacturer` (`id`, `type`, `short`, `long`) VALUES
(67, 2, 'springfield', 'Springfield');

CREATE TABLE IF NOT EXISTS `thread_classifieds_posttype` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `short` varchar(100) NOT NULL,
  `long` varchar(100) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `short` (`short`),
  UNIQUE KEY `id` (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=11 ;

INSERT INTO `thread_classifieds_posttype` (`id`, `short`, `long`) VALUES
(2, 'for-sale', 'For Sale');

CREATE TABLE IF NOT EXISTS `thread_classifieds_posttype_firearm` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `short` varchar(100) NOT NULL,
  `long` varchar(100) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=7 ;

INSERT INTO `thread_classifieds_posttype_firearm` (`id`, `short`, `long`) VALUES
(2, 'handguns', 'Handguns');

CREATE TABLE IF NOT EXISTS `thread_classifieds_type` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `type` int(10) NOT NULL,
  `short` varchar(100) NOT NULL,
  `long` varchar(100) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ;

INSERT INTO `thread_classifieds_type` (`id`, `type`, `short`, `long`) VALUES
(2, 2, 'pistol', 'Pistol'); 
```

（这里是查询）

```
SELECT 
`price`,    
`obo`,    
`offer`,    
`state`,  
`location` AS `location_org`,  
(SELECT `long` FROM `thread_classifieds_locations` WHERE `short` = `thread_classifieds`.`location` &&     `thread_classifieds`.`threadid` = 72) AS `location_full`,     
`area`,    
(SELECT `long` FROM `thread_classifieds_posttype` WHERE `short` = `thread_classifieds`.`posttype` &&     `thread_classifieds`.`threadid` = 72) AS `posttype`, 
(SELECT `long` FROM `thread_classifieds_posttype_firearm` WHERE `short` = `thread_classifieds`.`posttype_firearm` && `thread_classifieds`.`threadid` = 72) AS `posttype_firearm`, 
(SELECT `id` FROM `thread_classifieds_posttype_firearm` WHERE `short` = `thread_classifieds`.`posttype_firearm` && `thread_classifieds`.`threadid` = 72) AS `typenum`,                                 
(SELECT `long` FROM `thread_classifieds_caliber` WHERE `short` = `thread_classifieds`.`caliber` && `thread_classifieds`.`threadid` = 72 && `thread_classifieds_caliber`.`type` = `typenum`) AS `caliber`,    
(SELECT `long` FROM `thread_classifieds_manufacturer` WHERE `short` = `thread_classifieds`.`manufacturer` && `thread_classifieds`.`threadid` = 72 && `thread_classifieds_manufacturer`.`type` = `typenum`) AS `manufacturer`,   
(SELECT `long` FROM `thread_classifieds_action` WHERE `short` = `thread_classifieds`.`action` && `thread_classifieds`.`threadid` = 72 && `thread_classifieds_action`.`type` = `typenum`) AS `action`,    
(SELECT `long` FROM `thread_classifieds_type` WHERE `short` = `thread_classifieds`.`type` && `thread_classifieds`.`threadid` = 72 && `thread_classifieds_type`.`type` = `typenum`) AS `type`    
FROM `thread_classifieds`    
WHERE `threadid` = 72 LIMIT 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:59:45.673

是的，您可以使用联接。我不会在这里重复你的“让我的眼睛流血”的问题，但基本上你有：

```
SELECT x, y, (SELECT z FROM othertable WHERE blah blah) 
```

作为一个加入，它会是

```
SELECT x, y, sometable.z
FROM sometable
JOIN othertable ON sometable.AAA = othertable.BBB 
```

其中 aaa/bbb 是将两个表关联在一起的字段。

* * *

大概是这样的：

```
SELECT ..., thread_classifeds_locations.long AS location_full
FROM thread_classifieds
LEFT JOIN thread_classifieds_locations ON thread_classifieds.long = thread_classifieds_locations.long
...
WHERE (thread_classifieds.threadid= 72) AND (thread_classifieds.location = 'short') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T19:17:39.270

您将希望用连接替换子查询：

```
select c.`price`,    
  c.`obo`,    
  c.`offer`,    
  c.`state`,  
  c.`location` AS `location_org`,
  l.`long` AS `location_full`,
  c.`area`,
  p.`long` AS `posttype`,
  pf.`long` AS `posttype_firearm`,
  pf.id AS `typenum`,
  cc.`long`  AS `caliber`,
  m.`long`  AS `manufacturer`,
  a.`long`  AS `action`,
  t.`long`  AS `type` 
from thread_classifieds c
left join thread_classifieds_locations l
  on c.location = l.short
left join thread_classifieds_posttype p
  on c.posttype = p.short
left join thread_classifieds_posttype_firearm pf
  on c.posttype_firearm = pf.short
left join thread_classifieds_caliber cc
  on c.caliber = cc.short
  and pf.id = cc.`type`
left join thread_classifieds_manufacturer m
  on c.manufacturer = m.short
  and pf.id = m.`type`
left join thread_classifieds_action a
  on c.action = a.short
  and pf.id = a.`type`
left join thread_classifieds_type t
  on c.type = t.short
  and pf.id = t.`type`
where c.`threadid` = 72 LIMIT 1; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/2a7bc/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:11:53.623

我将您的第一个选择重新设置为加入。应该让你开始

```
SELECT 
`price`,    
`obo`,    
`offer`,    
`state`,  
`location` AS `location_org`,
`posttype`.`long`,
(SELECT `long` FROM `thread_classifieds_locations` WHERE `short` =`thread_classifieds`.`location` && `thread_classifieds`.`threadid` = 72) AS  `location_full`,     
 `area`,    
 (SELECT `long` FROM `thread_classifieds_posttype_firearm` WHERE `short` =  `thread_classifieds`.`posttype_firearm` && `thread_classifieds`.`threadid` = 72) AS `posttype_firearm`, 
 (SELECT `id` FROM `thread_classifieds_posttype_firearm` WHERE `short` = `thread_classifieds`.`posttype_firearm` && `thread_classifieds`.`threadid` = 72) AS `typenum`,                                 
 (SELECT `long` FROM `thread_classifieds_caliber` WHERE `short` = `thread_classifieds`.`caliber` && `thread_classifieds`.`threadid` = 72 && `thread_classifieds_caliber`.`type` = `typenum`) AS `caliber`,    
 (SELECT `long` FROM `thread_classifieds_manufacturer` WHERE `short` = `thread_classifieds`.`manufacturer` && `thread_classifieds`.`threadid` = 72 && `thread_classifieds_manufacturer`.`type` = `typenum`) AS `manufacturer`,   
 (SELECT `long` FROM `thread_classifieds_action` WHERE `short` = `thread_classifieds`.`action` && `thread_classifieds`.`threadid` = 72 && `thread_classifieds_action`.`type` = `typenum`) AS `action`,    
 (SELECT `long` FROM `thread_classifieds_type` WHERE `short` = `thread_classifieds`.`type` && `thread_classifieds`.`threadid` = 72 && `thread_classifieds_type`.`type` = `typenum`) AS `type`    
 FROM `thread_classifieds` AS `thread_classifieds`
INNER JOIN `thread_classifieds_posttype` AS `posttype` ON  `posttype`.`short` = `thread_classifieds`.`posttype` && `thread_classifieds`.`threadid` = 72
WHERE `threadid` = 72 LIMIT 1 
```

# ios - iPad 上带有 SplitViewController 的 iOS Imagepicker

> ID：14818887
> 
> 赞同：1
> 
> 时间：2013-02-11T18:53:13.117
> 
> 标签：ios, ipad, uiimagepickercontroller, uisplitviewcontroller

我有一个带有主表视图和详细视图的拆分视图。在我的拆分视图的主视图的导航栏上，我有一个按钮，应该使用户能够通过 imagePicker 拍照。但是当我按下按钮时，我的程序不断崩溃。这是按下按钮时调用的 MasterViewController.m 的过程：

```
-(void) takePicture:(id) sender
{

UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
{
    [imagePicker setSourceType:UIImagePickerControllerSourceTypeCamera];
}
else
{
    [imagePicker setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
}

[imagePicker setDelegate:self];

//[self presentViewController:imagePicker animated:YES completion:nil];

if( UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
    UIPopoverController * popOverController = [[UIPopoverController alloc] initWithContentViewController:imagePicker];
    [popOverController presentPopoverFromRect:((UIButton *)sender).frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    //[popOverController presentPopoverFromRect:CGRectMake(700, 1000, 10, 10) inView:self.detailViewController.imageSpace permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

}else {

    [self presentViewController:imagePicker animated:YES completion:nil];
}

} 
```

这是错误消息：

```
2013-02-11 09:06:43.975 ImageSplit2[13044:c07] -[UIBarButtonItem frame]: unrecognized selector sent to instance 0x7183d00
2013-02-11 09:06:43.976 ImageSplit2[13044:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIBarButtonItem frame]: unrecognized selector sent to instance 0x7183d00' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:57:12.040

`sender`不是 a `UIButton`，它是 a `UIBarButtonItem`，它不是视图，因此它没有`frame`属性。

改变这个：

```
[popOverController presentPopoverFromRect:((UIButton *)sender).frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

至：

```
[popOverController presentPopoverFromBarButtonItem:(UIBarButtonItem *)sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

旁注：如果从照片库中选择图像，您必须在 iPad 上使用弹出框。但是，将基于摄像头的图像选择器呈现为全屏视图控制器是完全有效的。因此，您可能希望将您的`if`声明从：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) 
```

至：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad && imagePicker.sourceType != UIImagePickerControllerSourceTypeCamera) 
```

# mercurial - Mercurial：多个提交历史

> ID：14818890
> 
> 赞同：0
> 
> 时间：2013-02-11T18:53:27.280
> 
> 标签：mercurial, repository, revision-history

我们使用我们的“主”mercurial repo 与第三方（承包商）合作，为客户开展项目。看起来我们得到了一个非常混乱的提交历史（包括跟踪和错误）。我们想对客户隐藏这些细节（即不透露整个提交历史）。但是，与此同时，我们希望使用 repo 将我们的结果交付给客户（以有序且更“浓缩”的形式）。是否有适合此目的的推荐工作流程（和工具/hg 命令）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:14:00.320

没有好的/简单的方法可以做到这一点，但是有很多不好的/困难的方法可以做到这一点。这里有几个：

1.  在内部在 Mecurial Queues 中完成所有工作，然后仅在完成/完美时才完成变更集。允许他们访问 repo，但不能访问 mq repo（它们是可选的，单独的版本）

2.  在你喜欢它之后使用重写历史的东西`commit --ammend`或命令来改变它（缺点，你团队中的每个人都必须删除和重新克隆）`histedit``collapse`

3.  为他们创建一个完全独立的 repo，当你准备好`hg archive`从你的 repo 中给他们一个 drop 副本并提交时

我认为这些都不值得隐藏正常的软件开发工作的麻烦，但是你去吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T06:28:40.403

使用 MQ 是一个好方法，使用 TortoiseHG 的 MQ 也是重写历史的简单方法。

在您的情况下，您可以创建、拥有和维护两个相关的存储库：“Dirty”和“Clean”

*   Clean 可以创建为用于工作 Dirty 的克隆（并且在它之后不会克隆给开发人员）
*   在 Clean 中，您将启用 MQ 扩展并在 Mercurial 的 CLI（或[使用 TortoiseHG](http://unitstep.net/blog/2011/01/26/folding-changesets-with-the-mercurial-queues-extension/)）中[重写历史记录](http://mercurial.selenic.com/wiki/EditingHistory#Editing_recent_history_with_MQ)

# asp.net-mvc - asp mvc自定义验证如何获取其他值

> ID：14818893
> 
> 赞同：1
> 
> 时间：2013-02-11T18:53:37.187
> 
> 标签：asp.net-mvc, validation, mvvm, data-annotations

我正在使用自定义验证比较用户名。我正在检查它是否与旧值相同，或者它是否通过了正则表达式是可以接受的，但如果不是则抛出错误。如果可能，我如何从视图模型中获取用户 ID？

```
 [EmailValidation]
    public string Username{ get; set; }
    public int UserID { get; set; }

public class EmailValidationAttribute : ValidationAttribute
    {
         protected override ValidationResult IsValid(object value, ValidationContext validationContext)
         {

             User user= User.getUserByID(UserID); //How to get UserID?
             string username= value.ToString();
             if (user.Username== username || IsValid(username))
                {
                    return ValidationResult.Success;
                }
                else
                {
                    return new ValidationResult("Error");
                }

            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T18:59:21.853

`ObjectInstance`您可以从[ValidationContext](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validationcontext.objectinstance.aspx)获取 UserID 。在您的情况下，它将是您的 User 类的实例。

```
public class EmailValidationAttribute : ValidationAttribute
{
     protected override ValidationResult IsValid(object value, ValidationContext validationContext)
     {
         UserDto dto = (UserDto)validationContext.ObjectInstance;
         User user= User.getUserByID(dto.UserID);
         string username = value.ToString();
         if (user.Username == username || IsValid(username))
         {
            return ValidationResult.Success;
         }
         else
         {
            return new ValidationResult("Error");
         }

    }
} 
```

如果您想要更通用的东西，您可以添加指定属性名称的属性并使用反射来获取值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T19:02:30.030

最简单的方法是将验证移至类而不是字段验证器。

供参考：http: [//jeffhandley.com/archive/2009/10/16/validator.aspx](http://jeffhandley.com/archive/2009/10/16/validator.aspx)

```
class MyClass : IValidatableObject {
    public string EmailAddress { get; set; }
    public int UserID { get; set; }

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext) {
      User user= User.getUserByID(UserID); // UserID is available because this is a method on the object
      string username= value.ToString();
      if (user.Username== username || IsValid(username)) {
          // it's fine?
      } else {
          yield return new ValidationResult("Error");
      }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T18:56:27.780

我会在这里推荐一个两步过程，以便您将来可以将此属性与出现的任何新类一起使用：

1) 创建一个包含 UserID 的抽象类，并让任何具有此 EmailValidationAttribute 的类扩展该类。

2）在您的验证中，您可以`value`转换为抽象类类型，然后从那里获取 UserID。

# c# - 如何在 C# 中将 WORD 或 Nibble 解释为数字？

> ID：14818898
> 
> 赞同：1
> 
> 时间：2013-02-11T18:54:15.220
> 
> 标签：c#, binary, word, microprocessors

我不是来自低级开发背景，所以我不确定如何将以下指令转换为整数......

基本上我有一个微处理器，它告诉我哪些 IO 处于活动状态或处于非活动状态。我向设备发送一个 ASCII 命令，它会回复一个 WORD，说明 15 个 I/O 中的哪一个是打开/关闭的……指令如下：

*   单元回答“A0001/”仅用于 DIn0 开启，“A????/”用于所有输入激活
*   Awxyz/ - w=0 到 ? 中 MSB 的高半字节 ASCII 字符 0001=1, 1111=?, z=LSB 的低半字节。

归根结底，我只想能够将其转换回一个数字，该数字将告诉我 15 个（或 16 个？）输入中的哪一个处于活动状态。

我有东西连接到第 15 个 I/O 端口，我得到的回复是“A8000”，如果有帮助吗？有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T18:58:01.907

您可以使用[BitConverter](http://msdn.microsoft.com/en-us/library/system.bitconverter.aspx)类将字节数组转换为所需的整数格式。

如果您获得 16 位，[请将它们转换为 UInt16](http://msdn.microsoft.com/en-us/library/system.bitconverter.touint16.aspx)。

C# 没有定义[字节顺序](http://en.wikipedia.org/wiki/Endianness)。这取决于您运行的硬件。Intel 和 AMD 处理器是 little-endian。您可以使用[BitConverter.IsLittleEndian](http://msdn.microsoft.com/en-us/library/system.bitconverter.islittleendian.aspx)了解平台的字节序。如果运行 .NET 的计算机和提供数据的硬件不具有相同的字节序，则必须交换两个字节。

```
byte[] inputFromHardware = { 126, 42 };
ushort value = BitConverter.ToUInt16( inputFromHardware, index ); 
```

> 15 个（或 16 个？）输入中的哪一个处于活动状态

如果这些位是硬件标志，那么所有 16 位都用于表示某事是合理的。当位用于表示有符号数时，其中一位用于表示正与负。由于硬件提供状态位，因此不应将任何位解释为符号。

如果您想知道特定位是否处于活动状态，您可以使用位掩码和`&`运算符。例如，二进制掩码

> 0000 0000 0000 0100

对应十六进制数

> 0x0004

要了解右侧第三位是否打开，请使用

```
bool thirdBitFromRightIsOn = (value & 0x0004 != 0); 
```

**更新**

如果制造商说值 8000（我假设为十六进制）表示通道 15 处于活动状态，请查看如下：

你的位掩码

```
1000 0000 0000 0000  (binary)
 8    0    0    0    (hex) 
```

根据制造商提供的信息，最左边的位对应于通道 15。

您可以使用该掩码，例如：

```
bool channel15IsOn = (value & 0x8000 != 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:39:54.943

第二个选择（但仅适用于 Nibbles）是像这样使用数学库：

```
 string x = "A0001/"
  int y = 0;
  for (int i = 3; i >= 0; i--)
  {
      if (x[4-i] == '1')
      y += (int)Math.Pow(2,i);
  } 
```

使用通过仅使用括号将字符串视为字符数组的能力，并且通过强制转换将数字字符作为数字，您可以将位转换为硬编码的整数。这是一个新手解决方案，但我认为它也是正确的。

# google-apps-script - 更有效的方法是查找特定列中的最后一行？

> ID：14818902
> 
> 赞同：0
> 
> 时间：2013-02-11T18:54:30.743
> 
> 标签：google-apps-script, google-sheets

我正在编写一个应用程序，将列从一张表导入到另一张表。.getLastRow 方法仅适用于整个工作表，但不能用于获取列的最后一行。存在一个请求此功能的问题。

我在谷歌脚本示例中的 2D Array 库的帮助下写了一些东西：[https ://sites.google.com/site/scriptsexamples/custom-methods/2d-arrays-library](https://sites.google.com/site/scriptsexamples/custom-methods/2d-arrays-library)

我得到了一个工作版本，可以在特定列中找到最后一行，但我怀疑它相当低效。

```
function readRows() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Sheet1");
  var numRows = sheet.getLastRow();
  var numColumns = sheet.getLastColumn();
  var data = sheet.getRange(1, 1, numRows, numColumns).getValues();

//Get the Headers, Search for a value of the headers and index  
var headerArray = sheet.getRange(1, 1, 1, numColumns).getValues();
var flip = ArrayLib.transpose(headerArray)
var search = "Greens";
var whereGreen = ArrayLib.indexOf(flip, 0, search);

//Get the value of the column with matching headers, and looks up Column length. 
 var values = sheet.getRange(1, whereGreen +1, numRows, 1).getValues();

//finds last value, makes string
for(; values[numRows - 1] == "" && numRows > 0; numRows--) {}
   var lastValue = values[numRows - 1].toString();

//Indexes where the string is, which gives the value -1 of the last row in column.   
var lastRowCol = ArrayLib.indexOf(values, 0, lastValue);

 Logger.log(lastRowCol +1);

 } 
```

谁能帮我得到一个精简的版本？我确信 JavaScript 可以做到这一点，但我对我在该部门的知识相当了解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:13:45.907

通过减少对电子表格服务的调用次数，可以提高代码的效率。下面的代码要快得多：

```
function readRows() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Sheet1");
  var data = sheet.getDataRange().getValues();
  var numRows = data.length;

//Get the Headers, Search for a value of the headers and index  
  var headerRow = data[0];
  var search = "Greens";
  var whereGreen = headerRow.indexOf(search);

//finds last value, makes string
  while( data[numRows - 1][whereGreen] == "" && numRows > 0 ) {
    numRows--;
  }
  var lastValue = data[numRows - 1][whereGreen].toString();

  Logger.log( 'Last row: '+ numRows );
  Logger.log( 'Last value: '+ lastValue );

// Not clear what this does, what more information is needed?
//Indexes where the string is, which gives the value -1 of the last row in column.   
//var lastRowCol = ArrayLib.indexOf(values, 0, lastValue);
//  Logger.log(lastRowCol +1);
} 
```

我用 while 循环替换了 for 循环，但这不应该对效率产生太大影响，使它更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:16:26.477

在我看来，就效率而言，这与您的效率差不多。就更清洁的解决方案而言，我现在似乎想不出一个。如果我想到什么会更新。

# html - 响应式设计：网站没有缩小超过 763 像素

> ID：14818909
> 
> 赞同：0
> 
> 时间：2013-02-11T18:54:53.537
> 
> 标签：html, css, responsive-design, percentage

所以我无法让我的网站一直缩小到 763 像素以上。它都用百分比和ems而不是像素标记，但无论如何它似乎都被卡住了。页面上的主图像也没有缩小，相反，一旦视口开始缩小，它旁边的左侧浮动 div 开始重叠。

cimmanon 帮助解决了重叠问题，但我仍然在缩小图像及其嵌套的 div 时遇到问题。

[http://students.thenet.ca/jlandon/new/school/week5/](http://students.thenet.ca/jlandon/new/school/week5/)

HTML：

```
<!DOCTYPE html>
<html lang="en">

<head>
<link rel="stylesheet" type="text/css" href="http://meyerweb.com/eric/tools/css/reset/reset.css"/>
<link rel="stylesheet" type="text/css" href="week5_main.css" title="Main"/>
<title>Point Grey Realty</title>
<meta charset="UTF-8"/>
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700' rel='stylesheet' type='text/css'>
</head>
<body>
<div id="wrapper">
    <header>
        <h1>Point Grey Realty</h1>
    </header>
<div id="backer">
    <article>
        <header id="listing">
            <h2>Arthur Erickson's Golden Mile - $5,290,000</h2>
            <h3>3293 Point Grey Road, Vancouver</h3>
        </header>
    </article>
    <div id="main_image"><figure><img src="goldenmile_entrance2.jpg" alt="entrance"/></figure></div>
    <article id="listing_info">
        <h4>MLS:V940361</h4>
        <figure><img src="bryanyan.jpg"/></figure>
        <ul id="bryan">
            <li>Bryan Yan</li>
            <li>Telephone: 604-732-8322</li>
        </ul>
        <ul>
            <li>Building Type: House</li>
            <li>Bedrooms: 2</li>
            <li>Bathrooms: 2</li>
            <li>Finished Interior: 1,876 sf</li>
            <li>Floor Space: 2,347 sf</li>
            <li>Lot Size: 4,405 sf</li>
            <li>Year Built: ~1963</li>
            <li>2 Storeys</li>
            <li>Large Rec Room</li>
            <li>Age of Building: 50 years</li>
            <li>Land Size: 33.0 x 133.5</li>
            <li>Water, mountain &amp; city views</li>
            <li>Waterfront</li>
        </ul>
    </article>
    <article id="listing_history">
        <p>Designed in 1963, this was the area’s first multi-unit development. The materials chosen for this estate were brick or plaster for walls and structural bays, and pressure treated fir for the wood spans. These materials, along with brick or quarry tile flors, provide a relatively neutral background. The resulting expression is directly that of the sturdy but graceful nature of the masonry against the more tenuous and taut nature of the wood. The site commands a megnificent view of English Bay, the North Shore mountains of West Vancouver and the downtown Vancouver skyline to the east. Private south facing courtyards trap the sun and serve as entry courts from the strets. One outdoor and one indoor swimming pool were incorporated for individual owners as well as several roof gardens.</p>
        <h4>The Unit</h4>
        <p>This is a rare residential offer on the “Golden Mile” built during one of Erickson’s most creative periods. The home was the winner of the 1967 National Award for Design. As a Point Grey resident, he created this home to be perfect. To describe this masterpiece, a quote by the Concrete Poet: “Architecture has to be functional but it should allow another dimension than what people are usually content to think about. It should open the perspective of the visitor to something they haven’t experienced before. It shouldn’t be ordinary or pedestrian.” Kept in its precious originality and offered for the first and perhaps, last time...</p>
    </article>
    <div id="extra_images">
        <figure>
            <img src="goldenmile_entry_mini.jpg"/>
            <img src="goldenmile_kitchen_mini.jpg"/>
            <img src="goldenmile_dining2_mini.jpg"/>
            <img src="goldenmile_living2_mini.jpg"/>
            <img src="goldenmile_bedroom_mini.jpg"/>
            <img src="goldenmile_backyard3_mini.jpg"/>
            <img src="goldenmile_deck_mini.jpg"/>
            <img src="goldenmile_view_mini.jpg"/>
        </figure>
    </div>
</div>
</div> 
```

CSS

```
body {
background-color: #335942;
background-image: url('background.gif');
background-repeat: repeat-y;
font-family: 'PT Sans Narrow', sans-serif;
font-size: 0.875em;
color: #000000;
}

h1 {
color: #FFFFFF;
font-size: 4.5em;
}

h2 {
font-size: 2.25em;
}

h3 {
font-size: 1.5em;
}

h4 {
font-size: 1.142857142857143em;
padding-top: 5px;
}

#wrapper {
max-width: 90%;
margin-top: 2.12765957446809%;
margin-left: 2%;
margin-bottom: 2%;
}

#backer {
background-color: #FFFFFF;
max-width: 70%;
display: table;
padding: 2.12765957446809%;
}

#listing {
margin-bottom: 1%;
}

#main_image {
float: left;
max-width: 74.46808510638298%;
float: left;
}

#listing_info {
width: 15.95744680851064%;
float: right;
}

#bryan {
font-size: 1em;
}

#listing_history {
width: 100%;
clear: both;
padding-top: 10px;
}

#extra_images {
width: 100%;
padding-top: 10px;
text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T19:02:55.273

您首页上的图像是 700 像素宽。在祖先元素上添加所有边距/填充后，它最终会达到大约 763 像素。如果图像要随视口缩放，它们通常采用如下样式：

```
img {
    max-width: 100%;
} 
```

# c++ - 有史以来最简单的互斥锁。这个例子有效吗？它是线程安全的吗？

> ID：14818915
> 
> 赞同：5
> 
> 时间：2013-02-11T18:55:18.857
> 
> 标签：c++, multithreading, parallel-processing, global-variables, mutex

我想问一下最简单的多线程互斥方法。以下代码是线程安全的（快速n脏）吗？

```
class myclass
{
    bool locked;
    vector<double> vals;

    myclass();
    void add(double val);
};

void myclass::add(double val)
{
    if(!locked)
    {
        this->locked = 1;
        this->vals.push_back(val);
        this->locked = 0;
    }
    else
    {
        this->add(val);
    }
}

int main()
{
    myclass cls;
    //start parallelism
    cls.add(static_cast<double>(rand()));
} 
```

这行得通吗？它是线程安全的吗？我只是想了解如何编写最简单的互斥锁。

如果您对我的示例有任何建议，那就太好了。

谢谢你。

谢谢你说它不起作用。您能否建议一个独立于编译器的修复程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T19:00:02.820

> 它是线程安全的吗？

当然不是。如果一个线程在检查和设置锁之间被抢占，那么第二个线程可以获取该锁；如果控制权随后返回到第一个线程，那么两者都将获得它。（当然，在现代处理器上，两个或更多内核可以同时执行相同的指令以获得更多乐趣。）

至少，您需要一个原子的测试和设置操作来实现这样的锁。C++11 库提供了这样的东西：

```
std::atomic_flag locked;

if (!locked.test_and_set()) {
    vals.push_back(val);
    locked.clear();
} else {
    // I don't know exactly what to do here; 
    // but recursively calling add() is a very bad idea.
} 
```

或者更好：

```
std::mutex mutex;

std::lock_guard<std::mutex> lock(mutex);
vals.push_back(val); 
```

如果您有较旧的实现，那么您将不得不依赖任何可用的扩展/库，因为当时的语言或标准库没有任何帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-11T18:59:52.700

不，这不是线程安全的。之间有比赛

```
if(!locked) 
```

和

```
this->locked = 1; 
```

如果这两个语句之间有上下文切换，你的锁机制就会崩溃。您需要一个原子[`test and set`](http://en.cppreference.com/w/cpp/atomic/atomic_flag/test_and_set)指令，或者只是使用现有的[`mutex`](http://en.cppreference.com/w/cpp/thread/mutex).

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-11T19:03:41.183

此代码不提供`vals`向量的原子修改。考虑以下场景：

```
//<<< Suppose it's 0
if(!locked)
{   //<<< Thread 0 passes the check
    //<<< Context Switch - and Thread 1 is also there because locked is 0
    this->locked = 1;
    //<<< Now it's possible for one thread to be scheduled when another one is in
    //<<< the middle of modification of the vector
    this->vals.push_back(val);
    this->locked = 0;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T18:58:41.807

> 这行得通吗？它是线程安全的吗？

不，它有时会失败。

仅当其他线程在执行这两行之间不做任何事情**时**，您的互斥锁才会起作用：

```
if(!locked)
{
    this->locked = 1; 
```

...而您并没有确保这一点。

要了解互斥锁的编写方式，请参阅*此*[SO 帖子](https://stackoverflow.com/questions/1485924/how-are-mutexes-implemented)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-11T18:59:50.083

不，这不是线程安全的。

`myclass::add`考虑两个或多或少同时运行的线程。另外，假设 的`.locked`值为`false`。

第一个线程执行到并包括这一行：

```
if(!locked)
{ 
```

现在想象系统将上下文切换到第二个线程。它也执行到同一行。

现在我们有两个不同的线程，都认为它们具有独占访问权，并且都在`!locked`if 的条件内。

他们都会`vals.push_back()`或多或少同时打电话。

繁荣。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-11T19:05:25.860

其他人已经展示了你的互斥锁是如何失败的，所以我不会重复他们的观点。我只会添加一件事：*最简单*的互斥锁实现比您的代码复杂得多。

如果您对细节感兴趣（或者即使您不感兴趣 - 这是*每个*软件开发人员都应该知道的内容），您应该查看[Leslie Lamport 的烘焙算法](http://en.wikipedia.org/wiki/Lamport%27s_bakery_algorithm)并从那里开始。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-02T09:09:25.627

您不能在 C++ 中实现它。您必须使用 LOCK CMPXCHG。[这是我的](https://stackoverflow.com/questions/1485924/how-are-mutexes-implemented/54003648#54003648)回答：

```
; BL is the mutex id
; shared_val, a memory address

CMP [shared_val],BL ; Perhaps it is locked to us anyway
JZ .OutLoop2
.Loop1:
CMP [shared_val],0xFF ; Free
JZ .OutLoop1 ; Yes
pause ; equal to rep nop.
JMP .Loop1 ; Else, retry

.OutLoop1:

; Lock is free, grab it
MOV AL,0xFF
LOCK CMPXCHG [shared_val],BL
JNZ .Loop1 ; Write failed

.OutLoop2: ; Lock Acquired 
```

# html - 从 HTML Tables on Rails 生成可下载的 PDF

> ID：14818917
> 
> 赞同：0
> 
> 时间：2013-02-11T18:55:23.353
> 
> 标签：html, pdf, twitter-bootstrap-rails

我正在寻找一种从 HTML 表创建 PDF 的工具，该工具与 Rails 和 Twitter Bootstrap 兼容。

我知道虾，但我想知道其他工具。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:02:20.463

您也可以尝试其中一种：

*   [RTeX](http://rtex.rubyforge.org/)
*   [HTMLDOC](http://htmldoc.rubyforge.org/)
*   [PDFKit](https://github.com/pdfkit/pdfkit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:02:15.643

[Pdfkit](https://github.com/pdfkit/pdfkit)最近很流行。这很容易上手。

# javascript - 使用 firefox/safari/IE 获取 drop 输入

> ID：14818918
> 
> 赞同：0
> 
> 时间：2013-02-11T18:55:27.407
> 
> 标签：javascript, cross-browser

我写了一个小脚本来通过`div`在一个隐藏的`input`. 我的代码如下所示：

```
<!DOCTYPE html>
<html>
<head>
    <title>drop</title>
</head>
<body>

<div id="dropzone" style="height: 200px; width: 200px; background-color: green;">
drop here
</div>

<input type="file" id="file" class="hidden">

<script type="text/javascript" src="jquery-min.js"></script>
<script type="text/javascript" src="drop.js"></script>

</body>
</html> 
```

drop.js：

```
$(document).on("dragover drop", function(e) {
    e.preventDefault(); // allow dropping and don't navigate to file on drop
})
$("#dropzone").on("drop", function(e) {
    console.log("drop");
    $("#file").prop("files", e.originalEvent.dataTransfer.files); // put files into element
    this.style.backgroundColor='green';
});
$("#dropzone").on("dragover", function(e){
    console.log("dragover");
    this.style.backgroundColor='blue';
});
$("#dropzone").on("dragleave", function(e){
    console.log("dragleave");
    this.style.backgroundColor='green';
}); 
```

这适用于 Chrome，但不幸的是不适用于 firefox 和 safari，我希望也不适用于 IE ......我知道这是每个 Webdeveloper 都喜欢的东西，所以我应该坚持使用原生方式吗？还是有一个库可以帮助我处理跨浏览器的东西？所以我只需要这部分没有上传或其他只是将informatipn通过放置在输入字段中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:29:46.523

尝试查看预构建的包，例如[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:10:44.607

这个问题之前已经通过各种 javascript 库解决了，这些库也确保文件上传可以在所有浏览器中工作。就目前而言，您的脚本一旦完善，就只能在支持 File/Blob API 的浏览器中运行。这不包括 IE9 和更早版本，以及某些版本的 Android。

无需重新发明轮子。如果您坚持这样做，请为令人沮丧的考验做好准备。我推荐[Fine Uploader](http://fineuploader.com)，它将处理在支持 File API 的浏览器中删除的文件、在 Chrome 21+ 中删除的目录，并且会为不支持 File API 的浏览器使用文件输入元素。它还包括许多其他您可能会觉得有用的功能，例如分块、自动/手动重试失败的上传、自动恢复之前会话的失败或中断上传等。

# c# - WPF 错误的 KeyDown ASCII 码

> ID：14818934
> 
> 赞同：4
> 
> 时间：2013-02-11T18:56:32.583
> 
> 标签：c#, wpf

我需要根据[ASCII 表](http://www.asciitable.com/)获取键盘键的数值。由于 WPF 没有内置解决方案，我尝试了几种技巧：

**1.**这个只给出大写值。

```
 char res ;
        Char.TryParse(e.Key.ToString(),out res);
        Debug.WriteLine((int)res); 
```

**2**这个，尽管它在很多地方都列出了可能的解决方案，但给出了一个完全错误的数字。

```
 Debug.WriteLine(Convert.ToInt16(e.Key).ToString()); 
```

那么如何从 WPF 中的输入中获取大写和小写字母 ASCII 代码？

**更新**

在这里得到几个答案后，我想强调我的问题。我绝对必须从输入中获取小写和大写的 ASCII 代码。没有硬编码的字符比较或类似的东西。我正在寻找更通用的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T22:04:09.760

看看 KeyEventUtility.GetCharFromKey( e.Key )

更新：抱歉，这是我的一些库代码

```
 public static class KeyEventUtility
{
    // ReSharper disable InconsistentNaming
    public enum MapType : uint
    {
        MAPVK_VK_TO_VSC = 0x0,
        MAPVK_VSC_TO_VK = 0x1,
        MAPVK_VK_TO_CHAR = 0x2,
        MAPVK_VSC_TO_VK_EX = 0x3,
    }
    // ReSharper restore InconsistentNaming

    [DllImport( "user32.dll" )]
    public static extern int ToUnicode(
        uint wVirtKey,
        uint wScanCode,
        byte[] lpKeyState,
        [Out, MarshalAs( UnmanagedType.LPWStr, SizeParamIndex = 4 )] 
       StringBuilder pwszBuff,
    int cchBuff,
    uint wFlags );

[DllImport( "user32.dll" )]
public static extern bool GetKeyboardState( byte[] lpKeyState );

[DllImport( "user32.dll" )]
public static extern uint MapVirtualKey( uint uCode, MapType uMapType );

public static char GetCharFromKey( Key key )
    {
        char ch = ' ';

        int virtualKey = KeyInterop.VirtualKeyFromKey( key );
        var keyboardState = new byte[256];
        GetKeyboardState( keyboardState );

        uint scanCode = MapVirtualKey( (uint)virtualKey, MapType.MAPVK_VK_TO_VSC );
        var stringBuilder = new StringBuilder( 2 );

        int result = ToUnicode( (uint)virtualKey, scanCode, keyboardState, stringBuilder, stringBuilder.Capacity, 0 );
        switch ( result )
        {
        case -1:
            break;
        case 0:
            break;
        case 1:
            {
                ch = stringBuilder[0];
                break;
            }
        default:
            {
                ch = stringBuilder[0];
                break;
            }
        }
        return ch;
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T21:10:18.947

根据[此处](https://stackoverflow.com/questions/12591793/get-lowercase-with-keydown-wpf)提到的答案之一，我建议您使用`TextInput`（或`PreviewTextInput`）事件来按下字母。它应该为您提供大小写字母的正确值。

为了测试它，您可以使用与此类似的代码：

```
private void Window_PreviewTextInput(object sender, TextCompositionEventArgs e)
{
    Console.WriteLine(String.Format("letter: {0} (charcode: {1})", e.TextComposition.Text, (int)Convert.ToChar(e.TextComposition.Text)));
} 
```

让我知道这是否有帮助，或者您在使用此解决方案时是否有任何问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-12T01:29:13.867

这不是键盘的工作方式。世界上每台 PC 都有相同的键盘。按下一个键会生成一个*虚拟键值*，与世界上每个键盘上的值相同。您在 KeyDown 事件中获得的 e.Key 值。

这是功能键、光标键、Shift 键等键停止的地方。除非该键是产生字符的打字键。与字母 A 一样。在内部，KeyDown 事件由 Windows 处理并*转换*为字符。产生的实际字符取决于键盘布局。不同国家的用户有不同的键盘布局，偏爱在他们的语言中最常用的字形。或者就用户的个人喜好而言，程序员通常喜欢 Dvorak 布局。

产生的字符还取决于*键盘状态*。就像 Shift 键一样，按住它会产生一个 A，而不是按住它会产生一个 a。这在非英语键盘上可能会变得非常复杂，其他布局也有*死键*，按下时会改变下一次击键产生的字符。有很多变音符号的语言使用它们。

含义很清楚，翻译从 KeyDown 事件中获得的虚拟键是一项*非常*危险的工作。因此，您不应尝试这样做。而且您不必使用 TextInput 事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T19:01:17.540

```
if (e.Key == Key.A ) 
```

看看这个[页面](http://msdn.microsoft.com/en-us/library/system.windows.input.key.aspx)

# xcode - Xcode 4.6 调试器的奇怪问题。“po”命令不起作用

> ID：14818935
> 
> 赞同：7
> 
> 时间：2013-02-11T18:56:34.767
> 
> 标签：xcode, debugging, lldb, xcode4.6

我最近刚刚升级到 xcode 4.6，调试器发生了奇怪的事情。“po”命令有时会停止工作。一步一步的调试有时也不起作用。有没有其他人有同样的问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T16:25:13.013

我发现了这个问题。我在目标设置中检查了您的 Apple LLVM 编译器代码编译的优化级别，将其更改为无，现在调试工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:24:52.693

只需尝试从项目菜单中清理所有内容，从管理器中删除派生数据文件夹。退出并重新启动 XCode。它可能会清理一些垃圾内存并进行设置。我经历过它可以改善 po 一点。

# shell - 如何列出名称中第二个字符为元音的所有文件

> ID：14818940
> 
> 赞同：0
> 
> 时间：2013-02-11T18:57:02.613
> 
> 标签：shell, unix, wildcard

我创建了一个别名`ll="ls -laF"`并尝试使用`ll *[aeiou] [aeiou]*` 它，它只显示了所有包含两个文件的文件，其中两个文件中包含字母 aeiou。我也尝试过`ll *[aeiou]*`，我只是再次获得文件中所有内容的列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:10:39.410

这 ？匹配单个字符，因此您正在寻找 `ls -laF ?[aeiou]*`

# java - 不能从静态上下文中引用非静态方法 - JAVA

> ID：14818941
> 
> 赞同：-2
> 
> 时间：2013-02-11T18:57:02.033
> 
> 标签：java

我试图将值 t 从一个类传递给另一个类，但在我运行程序之前，我`non static method cannot be referenced from static context`从这行代码中得到：

```
t = (PrinterSettings.getT() * 60); 
```

我正在尝试从此代码中获取值 t ：

```
public int t = 1; //defualt value for amount of mintues in the future the job should wait untill sent

public int getT() {
            return (t);
        }

 public void setT(int t) {
            this.t = t;
         } 
```

我做错了什么？我怎样才能得到t

编辑 ：

我从中得到的整个代码

```
 public int t = 1; //defualt value for amount of seconds in the future the job should wait untill sent

    public int getT() {
        return (t);
    }

    public void setT(int t) {
        this.t = t;
    } 
```

这是我正在使用的类，它从上述类中调用 t 来使用：

```
public class DealyTillPrint {

    public int t;

    public String CompletefileName;
    private String printerindx;
    private static int s;
    private static int x;
    public static int SecondsTillRelase;

    public void countDown() {
        System.out.println("Countdown called");
        s = 1; // interval 
    t = ((new PrinterSettings().getT()) * 60); //(PrinterSettings.SecondsTillRelase); // number of seconds
        System.out.println("t is : " + t);
        while (t > 0) {
            System.out.println("Printing in : " + t);
            try {
                Thread.sleep(s * 1000);
            } catch (Exception e) {
            }
            t--;
        } 
```

这是我`t`使用微调器设置的地方

```
<p:spinner min="1" max="1000" value="#{printerSettings.t}"  size ="1">
                    <p:ajax update="NewTime"/>
                </p:spinner> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:59:33.517

您正在使用`PrinterSettings.getT()`但不能这样做，因为`PrinterSettings`它是一个类，而`getT()`方法是针对对象的。您需要先创建一个 PrinterSettings 对象，然后才能调用`getT()`.

```
PrinterSettings myObjectOfPrinterSettings = new PrinterSettings();
myObjectOfPrinterSettings.getT();  //this should work without the error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T18:59:43.357

您可以选择做 2 件事中的 1 件事：

1) 将 PrinterSettings 文件中的所有内容设为静态（并使 PrinterSettings 也设为静态）：

```
public static int t = 1; 

public static int getT() {
            return (t);
        }

 public static void setT(int t) {
            this.t = t;
         } 
```

2）不要更改打印机设置，只需为您的代码执行此操作：

```
//Put this somewhere at the beginning of your code:
PrinterSettings printerSettings = new PrinterSettings();

//Now have some code, which will include setT() at some point

//Then do this:
t = (printerSettings.getT() * 60); 
```

在我看来，后者会更可取。

编辑：我刚刚进行的编辑是因为如果您不保留您正在使用的 PrinterSettings 变量，那么`t`在新的 PrinterSettings 对象中新建一个将为 1。相反，请确保您在程序开始时实例化了一个 PrinterSettings 对象，并在整个过程中使用该对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:00:47.250

代替：

```
public int getT() {
            return (t);
        }
Write:

public static int getT() {
            return (t);
        } 
```

这将解决您的问题。通过此更改，您可以使用其类名访问此方法。作为类方法。

# c# - 条件中的 MSBuild 3.5 属性函数

> ID：14818943
> 
> 赞同：0
> 
> 时间：2013-02-11T18:57:09.760
> 
> 标签：c#, msbuild

我想在 C# 代码中获取 .Net 版本号，所以在 .csproj 文件中，我添加了以下行：

```
<DefineConstants Condition=" $(TargetFrameworkVersion.Replace('v', '')) &gt;= 3.5 ">$(DefineConstants);NET35_ABOVE</DefineConstants> 
```

然后在 C# 代码中，我可以使用“#if NET35_ABOVE”来检查当前的 .Net 版本是否高于 3.5。上面的行在 MSBuild 4.0 中工作正常，但 MSBuild 3.5 无法识别“替换”功能。如果我要以类似的方式动态检查 .Net 版本，我该如何在 MSBuild 3.5 中进行呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:26:56.907

您的示例似乎在 VS2010 中运行良好。

这是我尝试过的：

```
<PropertyGroup>
    <DefineConstants Condition=" $(TargetFrameworkVersion.Replace('v', '')) &gt;= 3.5 ">$(DefineConstants);TEST1</DefineConstants>
    <DefineConstants Condition=" $(TargetFrameworkVersion.SubString(1,3)) &gt;= 3.5 ">$(DefineConstants);TEST2</DefineConstants>
    <DefineConstants Condition=" $(TargetFrameworkVersion.SubString(1,3)) &gt;= 4.0 ">$(DefineConstants);TEST3</DefineConstants>
    <DefineConstants Condition=" $(TargetFrameworkVersion.SubString(1,3)) &gt;= 4.5 ">$(DefineConstants);TEST4</DefineConstants>
</PropertyGroup> 
```

编辑：

但是由于您使用的是 VS2008，因此您可以使用 the 并执行类似的操作

```
<Choose>
  <When Condition=" $(TargetFrameworkVersion) == 'v3.5' ">
  <PropertyGroup>
    <DefineConstants >$(DefineConstants);TEST1</DefineConstants>
  </PropertyGroup>
  </When>
</Choose> 
```

# php - 136 不是有效的 CURL 处理程序--PHP

> ID：14818946
> 
> 赞同：1
> 
> 时间：2013-02-11T18:57:17.957
> 
> 标签：php

这是我在 CURL 中设置的选项。

```
 curl_setopt($curlHandler[$j]->curl, CURLOPT_URL,$arr[$j]->URL);
      curl_setopt($curlHandler[$j]->curl, CURLOPT_FAILONERROR, true);
      curl_setopt($curlHandler[$j]->curl, CURLOPT_FOLLOWLOCATION, true);
      curl_setopt($curlHandler[$j]->curl, CURLOPT_AUTOREFERER, true);
      curl_setopt($curlHandler[$j]->curl, CURLOPT_RETURNTRANSFER,true);
      curl_setopt($curlHandler[$j]->curl, CURLOPT_CONNECTTIMEOUT, 10);
      curl_setopt($curlHandler[$j]->curl,10); 
```

当我执行 PHP curl。curl_getinfo 返回以下数组。

```
Array
(
    [url] => http://davidchartier.com/post/395028979/replies
    [content_type] => text/html; charset=UTF-8
    [http_code] => 404
    [header_size] => 669
    [request_size] => 224
    [filetime] => -1
    [ssl_verify_result] => 0
    [redirect_count] => 1
    [total_time] => 1.939753
    [namelookup_time] => 0.079254
    [connect_time] => 0.099593
    [pretransfer_time] => 0.099693
    [size_upload] => 0
    [size_download] => 21201
    [speed_download] => 10929
    [speed_upload] => 0
    [download_content_length] => 255
    [upload_content_length] => 0
    [starttransfer_time] => 1.759269
    [redirect_time] => 0.129832
    [certinfo] => Array
        (
        )

    [redirect_url] => 
)

<b>Warning</b>:  (null)(): 136 is not a valid cURL handle resource in <b>Unknown</b> on line <b>0</b><br />
<br /> 
```

请帮助我。感谢任何帮助。

# entity-framework-5 - 我需要在实体框架中按层次结构或类型混合表

> ID：14818947
> 
> 赞同：2
> 
> 时间：2013-02-11T18:57:27.860
> 
> 标签：entity-framework-5

我有 3 个实体，我想将它们用于 EF 作为 POCO：

TimeTable 是 Period 和 LessonPlanner 类的基类。

如何在 EF 5.0 或更高版本中使用/映射这 3 个类？

我想创建 2 个 sql 表：Period 和 LessonPlanner。

EF 仅支持每个层次结构的表或每个类型的表。

要么我得到一个包含所有属性作为字段的表，要么我得到 3 个单独的表。

我只想要 2 个表，无论我必须采取什么方法，我都不在乎：数据库/模型/代码优先...

```
public class TimeTable
{
    public int Id { get; set; }
    public int LessonNumber { get; set; }
    public string SchoolclassNumberForSunday { get; set; }
    public string SchoolclassNumberForMonday { get; set; }
    public string SchoolclassNumberForTuesday { get; set; }
    public string SchoolclassNumberForWednesday { get; set; }
    public string SchoolclassNumberForThursday { get; set; }
    public string SchoolclassNumberForFriday { get; set; }
    public string SchoolclassNumberForSaturday { get; set; }
}

public class Period : TimeTable
{        
    public enum WeekType
    {
        A,
        AB,
    }
}

public class LessonPlanner : TimeTable
{
    public DateTime LessonDate { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:53:01.270

首先在 Entity Framework 5 中使用代码，在 DbContext 派生类中，覆盖`OnModelCreating`并添加以下代码。我没有用你的类型尝试过，但我已经使用它的一个变体来为三个深度层次结构创建两个类。

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Period>()
                    .Map<Period>(p => p.MapInheritedProperties())
                    .ToTable("Period");

        modelBuilder.Entity<LessonPlanner>()
                    .Map<LessonPlanner>(lp => lp.MapInheritedProperties())
                    .ToTable("LessonPlanner");
    } 
```

# iphone - Cocos2d app 崩溃，spriteFrameName 无效

> ID：14818955
> 
> 赞同：0
> 
> 时间：2013-02-11T18:57:52.620
> 
> 标签：iphone, cocos2d-iphone, sprite

我正在尝试用 cocos2d 开发一个 iphone 游戏，我是一个初学者。我在尝试显示屏幕上边界的生命数时遇到了一些问题。所以我想从 3 条生命开始，并在每次错误时减少其中的一条。这是我的代码

```
-(void)life {
    NSMutableArray *position = [NSMutableArray
                                arrayWithObjects:@"460", @"440", @"420", nil];
    spriteLifeArray = [[NSMutableArray alloc] init];
    for (int i = 0; i<life; i++) {
        spriteLife = [CCSprite spriteWithSpriteFrameName:@"cuore.png"];
        [spriteLife setTag:i];
        spriteLife.scale = 0.5;
        spriteLife.position = ccp([[position objectAtIndex:i] floatValue], 305);
        [self addChild:spriteLife];
        [spriteLifeArray addObject:spriteLife];
    }
} 
```

这是我的游戏结束和生命移除的功能

```
-(void)gameOver:(int)value punteggio:(id)punti{
    if (value == 1) {
        // partita vinta
    } else if(value == 2) {
        if (life > 1) { // 1
            life = life - 1;
            for (CCSprite *spr in spriteLifeArray) {
                if (life == spr.tag) {
                    [self removeChild:spr cleanup:YES];
                    [self actionBlink];
                }
            }
        } else { 
            //  partita persa
        }
    }
} 
```

资源文件夹中存在一个名为“cuore.png”的文件，但是当我尝试编译时，在启动画面后应用程序崩溃。这是日志：

> 2013-02-11 19:55:06.635 QuizGame[6672:c07] cocos2d: cocos2d v1.0.1 2013-02-11 19:55:06.636 QuizGame[6672:c07] cocos2d：使用导演类型：CCDirectorDisplayLink 2013-02-11 19:55:06.664 QuizGame[6672:c07] cocos2d: 操作系统版本: 6.1 (0x06010000) 2013-02-11 19:55:06.664 QuizGame[6672:c07] cocos2d: GL_VENDOR: Apple Computer, Inc. 2013-02-11 19:55:06.665 QuizGame[6672:c07] cocos2d: GL_RENDERER: Apple Software Renderer 2013-02-11 19:55:06.666 QuizGame[6672:c07] cocos2d: GL_VERSION: OpenGL ES-CM 1.1 APPLE 2013-02-11 19 :55:06.667 QuizGame[6672:c07] cocos2d: GL_MAX_TEXTURE_SIZE: 4096 2013-02-11 19:55:06.667 QuizGame[6672:c07] cocos2d: GL_MAX_MODELVIEW_STACK_DEPTH: 16 2013-02-11 19:5672:6 c07] cocos2d: GL_MAX_SAMPLES: 4 2013-02-11 19:55:06.668 QuizGame[6672:c07] cocos2d: GL 支持 PVRTC: YES 2013-02-11 19:55:06。668 QuizGame[6672:c07] cocos2d：GL 支持 BGRA8888 纹理：YES 2013-02-11 19:55:06.669 QuizGame[6672:c07] cocos2d：GL 支持 NPOT 纹理：YES 2013-02-11 19:55:06.670 QuizGame [6672:c07] cocos2d：GL 支持 discard_framebuffer：是 2013-02-11 19:55:06.670 QuizGame[6672:c07] cocos2d：编译时支持 NPOT：否 2013-02-11 19:55:06.671 QuizGame[6672: c07] cocos2d：在 TextureAtlas 中使用 VBO 支持编译：是 2013-02-11 19:55:06.671 QuizGame[6672:c07] cocos2d：在 CCNode 中使用仿射矩阵变换编译：是 2013-02-11 19:55:06.672 QuizGame [6672:c07] cocos2d：使用分析支持编译：否 2013-02-11 19:55:06.695 QuizGame[6672:c07] cocos2d：CCSpriteFrameCache：未找到帧 'cuore.png' 2013-02-11 19:55： 06.695 问答游戏[6672:c07]是 2013-02-11 19:55:06.669 QuizGame[6672:c07] cocos2d：GL 支持 NPOT 纹理：是 2013-02-11 19:55:06.670 QuizGame[6672:c07] cocos2d：GL 支持 discard_framebuffer：是 2013- 02-11 19:55:06.670 QuizGame[6672:c07] cocos2d：编译时使用 NPOT 支持：否 2013-02-11 19:55:06.671 QuizGame[6672:c07] cocos2d：编译时使用 TextureAtlas 中的 VBO 支持：是 2013- 02-11 19:55:06.671 QuizGame[6672:c07] cocos2d：在 CCNode 中使用仿射矩阵变换编译：是 2013-02-11 19:55:06.672 QuizGame[6672:c07] cocos2d：编译时使用分析支持：否 2013 -02-11 19:55:06.695 QuizGame[6672:c07] cocos2d: CCSpriteFrameCache: Frame 'cuore.png' not found 2013-02-11 19:55:06.695 QuizGame[6672:c07]是 2013-02-11 19:55:06.669 QuizGame[6672:c07] cocos2d：GL 支持 NPOT 纹理：是 2013-02-11 19:55:06.670 QuizGame[6672:c07] cocos2d：GL 支持 discard_framebuffer：是 2013- 02-11 19:55:06.670 QuizGame[6672:c07] cocos2d：编译时使用 NPOT 支持：否 2013-02-11 19:55:06.671 QuizGame[6672:c07] cocos2d：编译时使用 TextureAtlas 中的 VBO 支持：是 2013- 02-11 19:55:06.671 QuizGame[6672:c07] cocos2d：在 CCNode 中使用仿射矩阵变换编译：是 2013-02-11 19:55:06.672 QuizGame[6672:c07] cocos2d：编译时使用分析支持：否 2013 -02-11 19:55:06.695 QuizGame[6672:c07] cocos2d: CCSpriteFrameCache: Frame 'cuore.png' not found 2013-02-11 19:55:06.695 QuizGame[6672:c07]c07] cocos2d: GL 支持discard_framebuffer: YES 2013-02-11 19:55:06.670 QuizGame[6672:c07] cocos2d: 编译时支持NPOT: NO 2013-02-11 19:55:06.671 QuizGame[6672:c07] cocos2d ：在 TextureAtlas 中使用 VBO 支持编译：是 2013-02-11 19:55:06.671 QuizGame[6672:c07] cocos2d：在 CCNode 中使用仿射矩阵变换编译：是 2013-02-11 19:55:06.672 QuizGame[6672: c07] cocos2d：使用 Profiling Support 编译：NO 2013-02-11 19:55:06.695 QuizGame[6672:c07] cocos2d: CCSpriteFrameCache: Frame 'cuore.png' not found 2013-02-11 19:55:06.695 QuizGame[ 6672:c07]c07] cocos2d: GL 支持discard_framebuffer: YES 2013-02-11 19:55:06.670 QuizGame[6672:c07] cocos2d: 编译时支持NPOT: NO 2013-02-11 19:55:06.671 QuizGame[6672:c07] cocos2d ：在 TextureAtlas 中使用 VBO 支持编译：是 2013-02-11 19:55:06.671 QuizGame[6672:c07] cocos2d：在 CCNode 中使用仿射矩阵变换编译：是 2013-02-11 19:55:06.672 QuizGame[6672: c07] cocos2d：使用 Profiling Support 编译：NO 2013-02-11 19:55:06.695 QuizGame[6672:c07] cocos2d: CCSpriteFrameCache: Frame 'cuore.png' not found 2013-02-11 19:55:06.695 QuizGame[ 6672:c07]06.671 QuizGame[6672:c07] cocos2d：在 CCNode 中使用仿射矩阵变换编译：是 2013-02-11 19:55:06.672 QuizGame[6672:c07] cocos2d：使用分析支持编译：否 2013-02-11 19:55 :06.695 QuizGame[6672:c07] cocos2d: CCSpriteFrameCache: Frame 'cuore.png' not found 2013-02-11 19:55:06.695 QuizGame[6672:c07]06.671 QuizGame[6672:c07] cocos2d：在 CCNode 中使用仿射矩阵变换编译：是 2013-02-11 19:55:06.672 QuizGame[6672:c07] cocos2d：使用分析支持编译：否 2013-02-11 19:55 :06.695 QuizGame[6672:c07] cocos2d: CCSpriteFrameCache: Frame 'cuore.png' not found 2013-02-11 19:55:06.695 QuizGame[6672:c07]*** +[CCSprite spriteWithSpriteFrameName:], /Users/alexbava/Desktop/QuizGame/QuizGame/libs/cocos2d/CCSprite.m:110 2013-02-11 19:55:06.696 QuizGame[6672:c07] 中的断言失败****终止应用程序由于未捕获的异常'NSInternalInconsistencyException'，理由是： '无效spriteFrameName：cuore.png' ** *第一掷调用堆栈：（0x2074012 0x1ca4e7e 0x2073e78 0x14e7665 0x6564e 0xc2bd7 0xc3229 0x40261 0xc1c4d 0xc12ec 0x9931af 0x9937a1 0x99494b 0x9a5cb5 0x9a6beb 0x998698 0x2d7cdf9 0x2d7cad0 0x1fe9bf5 0x1fe9962 0x201abb6 0x2019f44 0x2019e1b 0x99417a 0x995ffc 0xc0dcf 0x2665) libc++abi.dylib：终止调用抛出异常 (lldb)*

 *我想我犯了一个愚蠢的错误或遗漏了什么。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:02:28.383

您使用的 CCSprite 构造函数将在 CCSpriteFrame 缓存中查找 CCSpriteFrame 对象。如果您只想从名为“cuore.png”的文件中创建精灵，请使用构造函数：

```
CCSprite * spriteLife = [CCSprite spriteWithFile:@"cuore.png"]; 
```

Sprite 帧通常用于动画，或管理包含许多（有时是不相关的）纹理的大型纹理图集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:04:57.153

spriteWithSpriteFrameName 一般与 CCSpriteFrameCache 一起使用，请使用 'spriteWithFile'。:)*

# bash - 将命令行参数传递给 shell 脚本不起作用

> ID：14818956
> 
> 赞同：2
> 
> 时间：2013-02-11T18:58:00.533
> 
> 标签：bash, shell, scripting, csh

我想编写一个脚本，根据我的输入更改为不同的目录。像这样的东西：

```
test.sh:
#!/bin/bash
ssh machine001 '(chdir ~/dev$1; pwd)' 
```

但是当我运行`./test.sh 2`它时，它仍然会转到`~/dev`. 看来我的论点被忽略了。我在这里做了什么非常愚蠢的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T19:01:45.190

Bash 会忽略单引号 (') 字符串中的任何变量语法。您需要双引号（“）才能进行替换：

```
#!/bin/bash
ssh machine001 "(chdir ~/dev$1; pwd)" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T19:01:26.230

该参数用单引号括起来，因此不会在本地扩展。请改用双引号。

```
#!/bin/bash

ssh machine001 "chdir ~/dev$1; pwd" 
```

不需要`(...)`，因为您只运行这对命令然后退出。

# javascript - 为什么当我在 iPad 中按 GO 时，不关注下一个输入？

> ID：14818959
> 
> 赞同：0
> 
> 时间：2013-02-11T18:58:12.660
> 
> 标签：javascript, jquery, html, css, ipad

想象一下，我有很多 div `display: none;`，只有第一个在`visible`.

在视图中，您可以按 ENTER 或 GO（在 iPad 中）浏览每一个。所以当你想前进的时候，把当前的 div 改成`none`，下一个就改成`visible`。但现在我还想将焦点设置在有`focusable`类的输入元素中。但它并没有设置焦点。

这是我的代码：

```
var setFocus = function () {
    $("#question-container2").find("#question:visible").find('.focusable')[0].focus();
    $("#question-container2").find("#question:visible").find('.focusable')[0].setSelectionRange(0, 0);
};

var nextPage = function () {
    if ($currentPage < $totalPages) {
        $currentPage++;
        $("#question-container2").find("#question:visible").hide().next().show();
    }
};

$(".input-area").keypress(function (e) {
    if (e.keyCode == 13) {
        // Do something
        nextPage();
        setFocus();
        return false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:01:58.767

在元素中指定选项卡索引。这是一个浏览器可访问性属性，当您完成当前字段时，它将告诉浏览器下一步导航到哪里。

请参阅：[http ://reference.sitepoint.com/html/a/tabindex](http://reference.sitepoint.com/html/a/tabindex)

# html - html5 视频标签 .ogv 视频文件类型在 Firefox 上不起作用

> ID：14818960
> 
> 赞同：1
> 
> 时间：2013-02-11T18:58:16.357
> 
> 标签：html, wordpress, video

我在 Firefox 中播放 .ogv 文件时遇到问题。这是链接 [http://vectisgroup.com/](http://vectisgroup.com/)。我认为我的 html5 视频标签的语法是正确的，因为它在其他浏览器上播放。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:21:41.967

查看[W3Schools](http://www.w3schools.com/html/html5_video.asp)，通常只支持 3 种视频格式。它们是 MP4、WebM 和 Ogg。如果可能，请尝试将您的视频转换为其中一种格式，看看是否可以解决问题。

# java - 甲骨文休眠配置

> ID：14818975
> 
> 赞同：0
> 
> 时间：2013-02-11T18:59:27.797
> 
> 标签：java, oracle, hibernate

尝试启动休眠时出现此错误。我是一个冬眠新手，所以希望有人能指出我在 cfg 上犯的错误。我包括了错误，希望它是一个简单的修复，谢谢。

```
<?xml version='1.0' encoding='utf-8'?> 
```

```
 <!-- Database connection settings -->
    <property name="connection.driver_class">oracle.jdbc.driver.OracleDriver</property>
    <property name="connection.url">jdbc:oracle:thin:@localhost:1521:orcl"</property>
    <property name="connection.username">scott</property>
    <property name="connection.password">tiger</property>
    <property name="hibernate.dialect" value="org.hibernate.dialect.OracleDialect"/>
    <!-- Echo all executed SQL to stdout -->
    <property name="show_sql">true</property>
</session-factory> 
```

```
Exception in thread "main" org.hibernate.MappingException: invalid configuration
at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2241)
at org.hibernate.cfg.AnnotationConfiguration.doConfigure(AnnotationConfiguration.java:230)
at org.hibernate.cfg.AnnotationConfiguration.doConfigure(AnnotationConfiguration.java:71)
at org.hibernate.cfg.Configuration.configure(Configuration.java:2158)
at org.hibernate.cfg.AnnotationConfiguration.configure(AnnotationConfiguration.java:212)
at org.hibernate.cfg.AnnotationConfiguration.configure(AnnotationConfiguration.java:71)
at org.hibernate.cfg.Configuration.configure(Configuration.java:2137)
at org.hibernate.cfg.AnnotationConfiguration.configure(AnnotationConfiguration.java:206)
at HibernateContext.setConfiguration(HibernateContext.java:20)
at HibernateContext.addClass(HibernateContext.java:205)
at HibernateContext.addClasses(HibernateContext.java:216)
at main.main(main.java:8) 
```

引起：org.xml.sax.SAXParseException；行号：14；列号：89；必须为元素类型“property”声明属性“value”。com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source) at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(Unknown Source) at com.sun.org .apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source) at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source) at com.sun.org.apache.xerces.internal .impl.XMLErrorReporter.reportError(Unknown Source) at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.addDTDDefaultAttrsAndValidate(Unknown Source) at com.sun.org.apache.xerces.internal.impl.dtd .XMLDTDValidator.handleStartElement(Unknown Source) 在 com。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:13:26.007

改变 ：`connection.driver_class`

官方： `hibernate.connection.driver_class`

还阅读了这篇[文章](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:14:28.990

尝试使用 `<property name="hibernate.dialect">org.hibernate.dialect.OracleDialect</property>`

作为新手，您可以在 [http://www.hibernate.org/docs上阅读整个 hibernate 文档](http://www.hibernate.org/docs)

# r - 根据 R 中的特定规则进行数据模拟

> ID：14818978
> 
> 赞同：1
> 
> 时间：2013-02-11T18:59:33.337
> 
> 标签：r

我需要帮助模拟数据集。

它应该模拟信号检测理论任务的所有可能结果（向参与者展示试验并且必须决定他们是否检测到给定信号）。现在，我需要一个包含不同试验次数的所有可能值的数据集。

比如说，有 6 次试验，5 次有信号，5 次没有信号。我只对正确检测（命中）和误报（I 类错误）感兴趣。参与者可以正确检测 1（我不需要 0）和 5 之间的值，并发出相同数量的误报。对于所有可能的组合，这将是包含两个变量的数据集，每个变量有 5^2 个案例。更复杂的是，甚至试验次数也是可变的。信号和非信号试验的数量可以在 1 到 20 之间变化，但试验的总数不能少于 3（1 个 S 试验和 2 个非 S 试验，或相反）。并且对于每个可能的试验组合，都有一组可能的命中和误报组合。

我需要的是一个包含 5 个变量（总共 N、N 个 S 试验、N 个非 S 试验、N 个命中和 N 个误报）的数据集，其中包含所有可能的值。

**示例** 这里是总 N 为 4 的所有可能数据。注意 Signal + Noise = N_total 并且 N_Hit seq(1:Signal) 和 N_FA seq(1:Noise)

```
N_total   Signal   Noise  N_Hit  N_FA
  4         1        3      1     1
  4         1        3      1     2
  4         1        3      1     3
  4         2        2      1     1
  4         2        2      1     2
  4         2        2      2     1
  4         2        2      2     2
  4         3        1      1     1
  4         3        1      2     1
  4         3        1      3     1 
```

我是 R 新手，所以任何帮助都将不胜感激！

希望描述清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:25:44.057

我创建了一个函数，它使用试验次数作为参数。

```
myfunc <- function(n) {

  # create a data frame of all combinations
  grid <- expand.grid(rep(list(seq_len(n - 1)), 4))

  # remove invalid combinations (keep valid ones)
  grid <- grid[grid[3] <= grid[1] &         # number of hits <= number of signals
               grid[4] <= grid[2] &         # false alarms <= noise
               (grid[1] + grid[2]) == n , ] # signal and noise sum to total n

  # remove signal and noise > 20
  grid <- grid[!rowSums(grid[1:2] > 20), ]

  # sort rows
  grid <- grid[order(grid[1], grid[3], grid[4]), ]

  # add total number of trials
  res <- cbind(n, grid)

  # remove row names, add column names and return the object
  return(setNames("rownames<-"(res, NULL),
                  c("N_total", "Signal", "Noise", "N_Hit", "N_FA"))) 

} 
```

使用功能：

```
> myfunc(4)
   N_total Signal Noise N_Hit N_FA
1        4      1     3     1    1
2        4      1     3     1    2
3        4      1     3     1    3
4        4      2     2     1    1
5        4      2     2     1    2
6        4      2     2     2    1
7        4      2     2     2    2
8        4      3     1     1    1
9        4      3     1     2    1
10       4      3     1     3    1 
```

如何将此函数应用于值 3-40：

```
lapply(3:40, myfunc) 
```

这将返回一个数据框列表。

# vba - 2010 的问题另存为 dbf

> ID：14818983
> 
> 赞同：0
> 
> 时间：2013-02-11T18:59:43.070
> 
> 标签：vba, excel, dbf

下面是我正在尝试修复的代码。它适用于 Excel 2007，但不适用于 Excel 2010。

我相信它与 XlDBF4 部分有关。请帮忙。

```
Range("A1").Select
ActiveWorkbook.SaveAs Filename:=Range("SetUp!L34") & Range("SetUp!D28") & "_" & Range("SetUp!F28") & ".dbf", FileFormat:= _
    xlDBF4, CreateBackup:=False
ActiveWorkbook.SaveAs Filename:=Range("Setup!L28") & Range("SetUp!D28") & "_" & Range("SetUp!F28") & " " & Range("SetUp!D30") & ".xls", FileFormat:= _
    xlNormal, Password:="", WriteResPassword:="", ReadOnlyRecommended:=False _
    , CreateBackup:=False 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:19:16.477

试试这个代码：

```
Range("A1").Select
ActiveWorkbook.SaveAs Filename:=Range("SetUp!L34") & Range("SetUp!D28") & "_" & Range("SetUp!F28") & ".dbf", FileFormat:= _
    xlDBF4, CreateBackup:=False
ActiveWorkbook.SaveAs Filename:=Range("Setup!L28") & Range("SetUp!D28") & "_" & Range("SetUp!F28") & " " & Range("SetUp!D30") & ".xls", FileFormat:= _
    xlExcel8, Password:="", WriteResPassword:="", ReadOnlyRecommended:=False _
    , CreateBackup:=False 
```

我认为情况是`xlNormal`：如果你愿意`xls`- 你应该`xlExcel8`改用。奇怪的是您的代码有效 - 根本没有`xlNormal`常量：[XlFileFormat Enumeration (Excel)](http://msdn.microsoft.com/en-us/library/office/bb241279%28v=office.12%29.aspx)

# c# - 打开和关闭 FileSystemWatcher 以避免多个实例

> ID：14818992
> 
> 赞同：1
> 
> 时间：2013-02-11T19:00:00.397
> 
> 标签：c#, visual-studio-2010

新蜂警报。问题：我填充了一个组合框，用户进行了选择。然后我创建并启用 FSW。一切正常，直到用户重新访问组合框以进行替代选择。此时，另一个 FSW 被实例化，导致基于“文件正在使用”错误的 IO 异常。当用户在组合框中进行后续选择时，我需要关闭 FSW（或销毁实例化）。整个程序由带有组合框的 Winform 驱动。

当用户重新访问组合框并进行另一个选择时，如何打开/关闭 FSW，或破坏 FSW 实例并允许创建一个新的、类似的？

调用 FSW 实例化的代码：

```
 private void MinAndGo()
    {
        if (strLblPtr != null)
        {
            if(strLblPtr != "None")
            {
                if (!CheckMyPrinter(strLblPtr))
                {
                    MessageBox.Show(ForegroundWindow.Instance, "Printer is not ready. Make sure it's turned on "
                    + "and has paper loaded.", "Printer Not Ready");
                }
            }
            this.WindowState = FormWindowState.Minimized;
            this.Activate();
            bCreateWatcher = true;
            Watchit();
        }
    } 
```

WatchIt() 的代码。我打算使用 bool bCreateWatcher 来打开和关闭 FSW。

```
private static void Watchit()
    {
        List<string> list = new List<string>();
        list.Add("C:\\SAMMS\\pcl");
        list.Add("C:\\SAMMS\\lbl");
        foreach (string my_path in list)
        {
            Watch(my_path);
        }
    }
    private static void Watch(string watch_folder)
    {

        FileSystemWatcher watcher = new FileSystemWatcher();
        watcher.InternalBufferSize = 8192; //defaults to 4KB, need 8KB buffer
        watcher.Path = watch_folder;
        watcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite
       | NotifyFilters.FileName | NotifyFilters.DirectoryName;
        watcher.Filter = "*.*"; 
        watcher.Created += new FileSystemEventHandler(OnCreated);
        // Begin watching.
        try
        {
            if (bCreateWatcher)
            {
                watcher.EnableRaisingEvents = true;
            }
            else
            {
                watcher.EnableRaisingEvents = false;
            }
        }
        catch(Exception ex)
        {
            MessageBox.Show(ForegroundWindow.Instance, "FSW not set correctly" + ex, "FSW Error");
        }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:42:16.487

`FileSystemWatcher`工具`IDisposable`。_ 因此，您应该调用`Dispose`来销毁实例。

您可以在这里找到更多信息：

*   [http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.dispose(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.dispose(v=vs.80).aspx)
*   [http://msdn.microsoft.com/en-us/library/system.idisposable.aspx](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:19:21.990

好的，所以看起来你需要将你的观察者存储在某个地方，也许是一个在路径上键入的字典？您还需要拥有所有包含在 implement 中的类`IDisposable`，以便您可以正确调用`Dispose()`您当前打开的任何观察者，并且该类已被处置。（然后您应该确保包含的类也被正确处理。）

我会重构`Watch()`为这样的东西（可能会更好）：

```
private static IDictionary<string, FileSystemWatcher> _openWatchers
    = new Dictionary<string, FileSystemWatcher>();

private static void Watch(string watch_folder)
{
    if (!bCreateWatcher)
    {
        if (_openWatchers.ContainsKey(watch_folder))
        {
            _openWatchers[watch_folder].Dispose();
            _openWatchers.Remove(watch_folder);
        }
        return;
    }

    FileSystemWatcher watcher = new FileSystemWatcher();
    watcher.InternalBufferSize = 8192; //defaults to 4KB, need 8KB buffer
    watcher.Path = watch_folder;
    watcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite
   | NotifyFilters.FileName | NotifyFilters.DirectoryName;
    watcher.Filter = "*.*"; 
    watcher.Created += new FileSystemEventHandler(OnCreated);
    // Begin watching.
    try
    {
         watcher.EnableRaisingEvents = true;
         _openWatchers[watch_folder] = watcher;
    }
    catch(Exception ex)
    {
        MessageBox.Show(ForegroundWindow.Instance, "FSW not set correctly" + ex, "FSW Error");
    }
 } 
```

你的`Dispose()`方法：

```
 public void Dispose()
 {
     foreach (FileSystemWatcher fsw in _openWatchers.Values)
     {
          fsw.Dispose();
     }
 } 
```

# sql - 如何从 SQL 中的多个列中获取值的总和

> ID：14818995
> 
> 赞同：0
> 
> 时间：2013-02-11T19:00:08.890
> 
> 标签：sql, ms-access

我有下表：

```
Season  Name1   Goal1   Name2   Goal2   Name3   Goal3
1990    Smith   2       Abel    1       John    3
1990    Smith   1       Abel    1       John    1
1990    John    0       Smith   2       Abel    5
1991    John    1       Smith   1       Abel    2
1991    Abel    2       John    0       Smith   0
1992    Abel    3       John    0       Smith   1 
```

Season 表示一个足球赛季，name1，name2 表示球员在给定比赛中的位置 Goal1 表示 Name1 的进球数

我想为每个赛季的每个名字生成一个列表，他们打了多少次以及他们的进球数。像这样的东西：

```
Abel 1990 3 games played 7 goals scored
Abel 1991 2 games played 4 goals scored 
Abel 1992 1 games played 3 goals scored 
John 1990 3 games played 2 goals scored 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:53:31.010

```
SELECT
    sub.player,
    sub.Season,
    Count(*) AS games_played,
    Sum(sub.goals) AS SumOfgoals
FROM
    (
        SELECT Season, Name1 AS player, Goal1 AS goals
        FROM YourTable
        UNION ALL
        SELECT Season, Name2, Goal2
        FROM YourTable
        UNION ALL
        SELECT Season, Name3, Goal3
        FROM YourTable
    ) AS sub
GROUP BY sub.player, sub.Season
ORDER BY sub.player, sub.Season; 
```

请注意，您*必须*`UNION ALL`在该子查询中使用。如果您只是改为使用，则子查询结果集将只包含*Season*、*player*和*goal*`UNION`的每个组合的一行。但是，当一名球员在一个赛季的多场比赛中打进相同数量的进球时，您希望保留每一行，以便准确计算所参加的比赛和总进球数。

 ***使用 Access 2007 中的示例数据，该查询会生成此结果集。

```
player Season games_played SumOfgoals
Abel     1990            3          7
Abel     1991            2          4
Abel     1992            1          3
John     1990            3          4
John     1991            2          1
John     1992            1          0
Smith    1990            3          5
Smith    1991            2          1
Smith    1992            1          1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T19:09:05.777

好的，好吧，由于您没有共享您正在使用的 RDBMS，我认为这个（丑陋的）查询适用于其中的大多数：

```
SELECT  Name + ' ' + CAST(Season AS VARCHAR(4)) + ' ' +
        CAST(Games AS VARCHAR(4)) + ' games played ' + 
        CAST(Goals AS VARCHAR(4)) + ' goals scored' AS YourColumn
FROM (  SELECT Season, Name, SUM(Goals) AS Goals, COUNT(*) AS Games
        FROM (  SELECT Season, Name1 AS Name, Goal1 AS Goals
                FROM YourTable
                UNION ALL
                SELECT Season, Name2 AS Name, Goal2 AS Goals
                FROM YourTable
                UNION ALL
                SELECT Season, Name3 AS Name, Goal3 AS Goals
                FROM YourTable) AS A
        GROUP BY Season, Name) X 
```

免责声明：这是一个丑陋的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T19:10:31.250

这真的很令人费解，但您可以编写一个内联查询，将所有内容放入适当的表格格式中，这样您就可以进行通常的聚合和分组。继续为 1 到 x 添加联合，具体取决于有多少列。

```
SELECT Season, Name, Sum(Goals)
FROM (SELECT Season, Name1 as Name, Goals1 as Goals        
        FROM table
      UNION
      SELECT Season, Name2 as Name, Goals2 as Goals        
        FROM table
      UNION
      SELECT Season, Name3 as Name, Goals3 as Goals        
        FROM table) newtable
GROUP BY Season, Name 
```

* * ****