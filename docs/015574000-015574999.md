# StackOverflow 问答 15574000-15574999

# arrays - 数组中的变量 - Javascript

> ID：15574001
> 
> 赞同：-2
> 
> 时间：2013-03-22T15:24:48.803
> 
> 标签：arrays, variables

我正在尝试将变量cord1x 和cord1y 放入segments 数组中，但它不起作用。

这是我的代码：

```
var cord1x = 121; 
var cord1y = 446;  
segments = [{x: cord1x, y: cord1y}]; 
```

我如何成为分段字符串中的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:41:46.563

根据您的评论，也许[`Array#push`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/push)是您想要的：

```
segments = [];

//foreach point in some set
  // compute cord1x, cord1y
  segments.push({x: cord1x, y: cord1y}); 
```

然后`segment`变成一个对象数组，每个对象代表一个 2d 点，与您的示例一致`segments = [{x: 121, y: 446}, {x: 164, y: 384}, {x: 190, y: 271}, {x: 186, y:198}, {x: 180, y:60}]`

* * *

仅基于问题：

随着`segments = [{x: cord1x, y: cord1y}];`,`segments`成为一个包含一个匿名对象的数组。`cord1x`变得可访问 as`segments[0].x`并且`cord2x`变得可访问 as `segments[0].y`。

随着`segments = {x: cord1x, y: cord1y}`,`segments`成为具有 和 属性的`x`对象`y`。`cord1`变得可访问 as`segments.x`并且`cord2`变得可访问 as `segments.y`。

随着`segments = [cord1x, cord1y]`,`segments`成为两个整数的数组。`cord1x`变得可访问 as`segments[0]`并且`cord1y`变得可访问 as `segments[1]`。

用`segments = '{x: '+cord1x+', y: '+cord1y+'}'`,`segments`变成 形式的字符串`{x:121, y:446}`。不利的一面是，`cord1x`并且`cord1y`不容易检索。好处是`segments`现在可以通过使用来比较相等性，而不是身份`===`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:40:51.613

为此，您将使用 javascript 中的 push 方法。

```
var coordinate1 = Coordinates.getCoordinate(100, 200);
var coordinate2 = Coordinates.getCoordinate(200, 300);
var coordinate3 = Coordinates.getCoordinate(300, 400);
var coordinates = [coordinate1, coordinate2];
coordinates.push(coordinate3) 
```

您可以在 w3 学校了解更多信息[http://www.w3schools.com/jsref/jsref_push.asp](http://www.w3schools.com/jsref/jsref_push.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:50:14.243

这可能会奏效。

```
var Coordinates = function() {};

Coordinates.onLoad = function() {
    var coordinate1 = Coordinates.getCoordinate(100, 200);
    var coordinate2 = Coordinates.getCoordinate(200, 300);
    // access them like coordinate1.x, coordinate1.y 
};

Coordinates.getCoordinate = function(x, y) {
    var coordinate = {
        x: x,
    y: y
    };
    return coordinate;
}; 
```

# string - Scheme - 使用过滤器列出函数

> ID：15574003
> 
> 赞同：3
> 
> 时间：2013-03-22T15:24:55.693
> 
> 标签：string, list, map, filter, scheme

我目前正在使用 MIT 计划进行家庭作业，并且遇到了一些据说很短的问题，尽管我对如何实现其中一些有点困惑。

一个问题要求我编写一个函数，该函数返回一个删除了所有整数的列表。我确实设法解决了这个问题，

```
(define (f2a lst) (map (lambda(x) (remove number? x)) lst)) 
```

尽管我对如何将其重写为不使用 remove 而是使用过滤器感到困惑。*注：`(f2a '(("a" 1 "b") (2 "c") (-1 "d") (-2)))`退货`'(("a" "b") ("c") ("d"))`

其他两个问题是我没有找到任何解决方案的问题。

他们要求我编写一个函数，该函数返回一个列表，其中删除了所有正奇数和负偶数。例如，

```
(f2b '(("a" 1 "b") (2 "c") (-1 "d") (-2))) 
```

返回

```
(("a" "b") (2 "c") (-1 "d")) 
```

我有一些不正确的代码，但我觉得展示了我是如何尝试解决这个问题的：

```
(define (f2b lst)
  (lambda(x) 
    (cond ((and (positive? x) (odd? x)) (filter x lst))
      ((and (negative? x) (even? x)) (filter x lst))
      (else "this should never print")))) 
```

最后一个问题只是要求一个函数返回一个字符串，该字符串由附加在列表中的所有字符串组成。`(f2c '(("a" 1 "b") (2 "c") (-1 "d") (-2)))`返回“abcd”。

我几乎设法弄清楚了这一点，但是当它不断返回奇怪的值时就卡住了。这是我的代码：

```
(define (f2c lst)
  (lambda(x)
    (map (lambda (x) (filter string? x)) lst)
    (list x))
  (string-append (car lst) (cdr lst))) 
```

在高阶语法方面，我仅限于映射、过滤、累加和求和。我不是要直接回答，而是要一些帮助来帮助我弄清楚我需要做什么。我的代码做错了什么？非常感谢您对此提供的任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:31:55.567

在前两个问题中，输入和期望输出的结构是相同的；唯一不同的是关于何时/何时不删除元素的谓词。对于第二种情况，它将是：

```
(define (f2b lst) 
  (map (lambda (sublst)
        (remove (lambda (x)
                  (and (number? x)
                       (or (and (positive? x) (odd?  x))
                           (and (negative? x) (even? x)))))
                 sublst))
       lst)) 
```

由于只有谓词不同，您可以将其概括为：

```
 (define (f2x predicate)
    (lambda (lst)
      (map (lambda (sublst) (remove predicate sublst)) lst)))
  (define f2a (f2x number?))
  (define f2b (f2x (lambda (x) 
                     (and (number? x)
                          (or (and (positive? x) (odd?  x))
                              (and (negative? x) (even? x)))))) 
```

对于最后一个问题，您可以将第一个问题的结果用作：

```
(define (f2c lst)
  (apply string-append (apply append (f2a list)))) 
```

另外，请注意您的 f2b 和 f2a 语法不正确。您正在使用

```
(define (func arg) 
  (lambda (x) ...)) 
```

这意味着`(func arg)`返回的函数不是您想要的。

# javascript - .match 返回什么？

> ID：15574004
> 
> 赞同：-6
> 
> 时间：2013-03-22T15:25:00.180
> 
> 标签：javascript, jquery

我想知道 .match 返回什么 - 匹配的字符还是布尔值？

```
function feinNoRepeat(sender, args)
{
    fein = '11-1111111';
    atchThis = fein.replace("-","");
    rptRegex = '\b(\d)\1+\b';
    //would I compare it this way or would I ask if it's true or false?
    if (matchThis.match(rptRegex) = matchThis) 
    {
        args.IsValid = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:30:40.203

[来自 MDN 上的文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)

## 句法

```
var array = string.match(regexp); 
```

# 参数

**正则表达式**

一个正则表达式对象。如果传递了一个非正则表达式对象 obj，它会通过使用 new RegExp(obj) 隐式转换为正则表达式。

# 描述

如果正则表达式不包含 g 标志，则返回与 regexp.exec(string) 相同的结果。

如果正则表达式包含 g 标志，则该方法返回一个包含所有匹配项的 Array。如果没有匹配项，则该方法返回 null。

返回的 Array 有一个额外的输入属性，其中包含生成它的正则表达式。此外，它还有一个 index 属性，表示字符串中匹配项的从零开始的索引。

* * *

## 你想做什么

如果你想要一个真值或假值，你真正想要的是[regularExpression.test(string)](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)

```
if (rptRegex.test(matchThis)) {  //notice it is the regular expression being acted on, not the string
    args.IsValid = false;
} 
```

它也可以与 match 一起使用，因为可以测试 match 的结果是否为真值。

```
if (matchThis.match(rptRegex)) {
    args.IsValid = false;
} 
```

还是用test而不是match比较好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:27:07.457

匹配组值的数组

# ios - 通过日期/时间限制删除 tableview 的旧缓存和数据

> ID：15574005
> 
> 赞同：0
> 
> 时间：2013-03-22T15:25:02.013
> 
> 标签：ios, objective-c, xml, tableview

所以这是我一直在经历的一个个人挑战，我很想得到帮助。从 Big Nerd Ranch iOS 书（第 3 版）中，我目前正在研究编辑和改进他们的第 29 章 Nerdfeed 项目（我在下面附上了一个谷歌驱动器链接以下载整个项目）。我希望能够随意删除某个时间段之前的所有项目。假设（假设地）此应用程序的提要为您提供了昨天的帖子。我不希望这些帖子存储在我的应用程序中的任何位置，并希望确保只有今天创建的帖子才会显示在应用程序中。有谁知道该怎么做？我一直在尝试使用我编写的以下代码片段来删除旧的提要/项目。很遗憾，这段代码的放置变得很麻烦，我似乎无法摆脱所有东西（来自缓存、表数据和获取的数据）。真正的问题在尝试通过动画从 tableview 中删除项目时生效（一致的越界错误）。

```
if ([[[channelCopy items] lastObject] class] == [BNRItem class]) {

    NSDate *cutOffDate = [[NSDate date] dateByAddingTimeInterval:kfeedCutOff*24*60*60];
    NSLog(@"Response: %d",[[[[channelCopy items] lastObject] publishDate] compare:cutOffDate]);
    while (([[channelCopy items]lastObject] != NULL) && ([[[[channelCopy items] lastObject] publishDate] compare:cutOffDate] == NSOrderedAscending)) {
        NSLog(@"Removed: %@", [[channelCopy items] lastObject]);
        [[channelCopy items] removeLastObject];
    }
} 
```

在 fethEntries 中，我尝试添加以下片段：

```
int itemDelta = newItemCount - currentItemCount;
if (itemDelta > 0) {
    NSMutableArray *rows = [NSMutableArray array];
    for (int i = 0; i < itemDelta; i++) {
        NSIndexPath *ip = [NSIndexPath indexPathForRow:i inSection:0];
        [rows addObject:ip];
    }

    [[self tableView] insertRowsAtIndexPaths:rows withRowAnimation:UITableViewRowAnimationTop];
}
else if (itemDelta < 0) { //Removes outdated cells from the tableView
    NSLog(@"We have a problem");
    NSMutableArray *rows = [NSMutableArray array];
    for (int i = 0; i > itemDelta; i--) {
        NSIndexPath *ip = [NSIndexPath indexPathForRow:(i + currentItemCount) inSection:0];
        [rows addObject:ip];
    }
    [[self tableView] deleteRowsAtIndexPaths:rows withRowAnimation:UITableViewRowAnimationBottom];
} 
```

我听说如果您在零标记处删除 tableViews 至少需要插入一行...我也尝试过这样做。有什么想法吗？

[项目链接](https://docs.google.com/file/d/0B_1MmjVEMIQnS1NNMGdrbDM5NWc/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:16:00.153

因为，假设您的表格视图中只有日期；并且您想删除所有低于当前时间的日期。

```
NSDate* date            = [NSDate date];

// SELF will means "date" into the context. "SELF >=" equal to compare NSOrderedAscending
// predicate will be used into a mutable array of dates.
NSPredicate *predicate  = [NSPredicate predicateWithFormat:@"(SELF >= %@)", date];

// this array is used for the tableView display
[myMutableArrayForTableView filterUsingPredicate: predicate];

// Since tableview use myMutableArrayForTableView , now you can update the content:
[(UITableView*)self.view reloadData]; 
```

看，4行代码。您应该使用 NSpredicate ，因为您不需要重新发明轮子。但我已经宠坏了你，现在你知道答案了；）

# android - 当应用程序在前台运行时，在警报框中显示推送通知

> ID：15574014
> 
> 赞同：17
> 
> 时间：2013-03-22T15:25:14.533
> 
> 标签：android, push-notification, google-cloud-messaging

我正在由 GCM 触发的我的 android 应用程序中进行推送通知。如果应用程序正在警告框中运行，我想显示通知，如果应用程序未运行意味着不在前台仅显示状态栏通知，您如何确定应用程序是否正在运行并且在前台？是这可以显示这样的通知。现在正在使用此代码显示状态栏推送通知

```
 NotificationManager notificationManager = (NotificationManager)
                context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);

        String title = context.getString(R.string.app_name);

         Intent notificationIntent = new Intent(context, BottomActivity.class);
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        // Play default notification sound
        notification.defaults |= Notification.DEFAULT_SOUND;

        //notification.sound = Uri.parse("android.resource://" + context.getPackageName() + "your_sound_file_name.mp3");

        // Vibrate if vibrate is enabled
        notification.defaults |= Notification.DEFAULT_VIBRATE;
        notificationManager.notify(0, notification); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-24T18:21:33.237

您可以创建一个新的 Activity 和主题作为 Dialog 并检查前台活动。检查以下代码。

```
 ActivityManager activityManager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
        List<RunningTaskInfo> services = activityManager
                .getRunningTasks(Integer.MAX_VALUE);
        boolean isActivityFound = false;

        if (services.get(0).topActivity.getPackageName().toString()
                .equalsIgnoreCase(context.getPackageName().toString())) {
            isActivityFound = true;
        }

       if (isActivityFound) {
            resultIntent = new Intent(context, AlertDialogNotification.class);
            resultIntent.putExtra(EXTRA_ALERT_MESSAGE_BEAUTIFUL, "anyMessage");
            resultIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(resultIntent); 
        } 
```

在清单中将主题设为活动的对话框。希望能帮助到你。让我们知道您是否有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:26:34.073

你有多少活动？如果只有一个，很容易在 onResume() 和 onPause() （也就是它处于活动状态时）之间保持对它的单例引用，如果它是，则从接收器调用活动。如果你有很多活动，你可以通过为它们建立一个公共基类来实现类似的逻辑。像这样的东西：

```
class MyActivity: Activity
{
    static private MyActivity _Current = null;

    protected void onResume() //Activated
    {
        super.onResume();
        _Current = this;
    }

    protected void onPause() //Deactivated
    {
        super.onPause();
        _Current = null;
    }

    //This is for the receiver to call
    static public PopAlert()
    {
        if(_Current != null)
        {
            new AlertDialog.Builder(_Current)
                .setMessage("Hello world")
                //More alert setup; use _Current as a context object
                .create().show();
        }
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-12T06:58:34.447

请试试这些

```
public static boolean isAppIsInBackground(Context context) {

        boolean isInBackground = true;
        ActivityManager am = (ActivityManager)context.getSystemService(Context.ACTIVITY_SERVICE);
        if (Build.VERSION.SDK_INT > Build.VERSION_CODES.KITKAT_WATCH) {
            List<ActivityManager.RunningAppProcessInfo> runningProcesses = am.getRunningAppProcesses();
            for (ActivityManager.RunningAppProcessInfo processInfo : runningProcesses) {
                if (processInfo.importance == ActivityManager.RunningAppProcessInfo.IMPORTANCE_FOREGROUND) {
                    for (String activeProcess : processInfo.pkgList) {
                        if (activeProcess.equals(context.getPackageName()))
                            isInBackground = false;
                    }
                }
            }
        } else {
            List<ActivityManager.RunningTaskInfo> taskInfo = am.getRunningTasks(1);
            ComponentName componentInfo = taskInfo.get(0).topActivity;
            if (componentInfo.getPackageName().equals(context.getPackageName())) {
                isInBackground = false;
            }
        } 
```

# file - 列出目录内容时生成文件错误

> ID：15574018
> 
> 赞同：0
> 
> 时间：2013-03-22T15:25:25.457
> 
> 标签：file, makefile

当我尝试列出目录的所有内容（稍后用作依赖项）时，它会在列表末尾给出此错误（我的权限不是问题）：

gmake：execvp：文件名：权限被拒绝 gmake：*** [测试] 错误 127

我不太明白这一点，该文件是目录中的第一个文件，直到列表结束都可以，这确实列出了所有文件。我运行 gmake -n 来查看它是否试图执行并且它不针对这个目标。抱歉，如果我说错了，这是我第一次尝试复杂的 make 文件。

这是我的代码：

测试：$(通配符$(MY_DIR)/*.cpp)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:32:36.180

现在我*必须*弄清楚发生了什么事。是时候做更多的实验了。在工作目录中有一个`.cpp`文件，调用它`foo.cpp`，这个makefile：

```
SRC := $(wildcard *.cpp) 

$(info SRC is $(SRC))

test1: foo.cpp
    @echo $@ sees $^ 
```

试试`make`，告诉我们结果。

# oracle-adf - 术语“刷新”和“查询”对于 ADF 中的迭代器绑定意味着什么？

> ID：15574019
> 
> 赞同：0
> 
> 时间：2013-03-22T15:25:25.993
> 
> 标签：oracle-adf

我对 ADF 中使用的一些术语感到有些困惑，主要是关于*Iterator Binding*。

1.  ADF 中*迭代器绑定上的**Refresh*标志的用途是什么？
**   建议何时（在生命周期的哪个阶段）进行刷新，为什么？*   在 ADF-speak 中*刷新*迭代器和*查询*迭代器有什么区别？*

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T18:41:41.297

1.  Refresh 意味着将 Binding Layer 迭代器重新绑定到 VO 行集迭代器。当页面被重建并且绑定层在接收到页面请求时被重新创建时会发生这种情况。查询会导致 VO 重新查询数据源并重建行集迭代器。除非尚未创建 VO 行集，否则刷新不会导致（重新）查询。
2.  根据需要，可以在生命周期的不同点进行刷新。正常设置“延迟”通常很好（请参阅下面的文档）。
3.  Refresh 指示何时重新绑定迭代器。

来自文档：[ADF 文档](http://docs.oracle.com/cd/E29597_01/web.1111/e28164/bcdcpal.htm) 在运行时，可执行绑定根据其 Refresh 属性的值进行刷新。刷新迭代器绑定会将其重新连接到其基础 RowSetIterator 对象。刷新调用操作绑定会调用该操作。在刷新任何绑定之前，ADF 运行时会评估可执行文件中指定的任何 Refresh 和 RefreshCondition 属性。Refresh 属性指定应调用可执行文件的 ADF 生命周期阶段。RefreshCondition 属性指定应调用可执行文件的条件。您可以使用布尔 EL 表达式指定 RefreshCondition 值。如果您将 RefreshCondition 属性留空，则它的计算结果为真。默认情况下，刷新值设置为延迟。这意味着除非访问绑定的值（例如通过 JSF 页面上的 EL 表达式），否则绑定不会被执行。一旦调用，它将不会重新执行，除非绑定的任何参数值已更改，或者绑定本身已更改。￼￼￼￼在 Fusion Web 应用程序中使用 ADF 模型 12-29 创建 ADF 数据绑定 EL 表达式 ￼￼有关如何刷新绑定以及如何设置 Refresh 和 RefreshCondition 属性的更多信息，请参阅第 21.2 节，“JSF 和 ADF页面生命周期。”*

# javascript - Coffeescript 在 ruby 对象上的嵌套迭代

> ID：15574022
> 
> 赞同：0
> 
> 时间：2013-03-22T15:25:29.927
> 
> 标签：javascript, ruby-on-rails, coffeescript

我有一个包含多种产品的产品页面。当您单击产品时，会弹出一个灯箱，其中包含该产品和相关产品的列表。当您将鼠标悬停在相关产品列表上时，其图像的不透明度应该会发生变化。我用这个脚本为第一个产品工作：

```
 $(document).ready ->
   z = $(".related_products_image")
   z.each ->
     relid = $(this).data("imageid")      
     hover = $("#related_" + relid) 
     hover.mouseenter ->
      $(this).css("opacity", 1.0)
     hover.mouseleave ->
      $(this).css("opacity", 0.4) 
```

但它只适用于第一个产品。我相信因为我在页面上有很多相关产品的列表，而且我没有重复，所以它只是选择第一个。

我的 html/erb 看起来像这样：

```
<div id="product_popup_<%= product.id %>">
        <div class="related-products">
          <ul class="related_products_list" id="related_products_list_<%= product.id %>" data-listid="<%= product.id %>">
         <% @related_products.each do |related_product| %>
         <li class="related_products_item"><%= link_to large_image(related_product, :itemprop => "image", :data => {:imageid => related_product.id}, :id => "related_" + related_product.id.to_s, :class => "related_products_image"), url_for(related_product) %></li>
         <% end %>
    </ul> 
```

所以我尝试创建一个如下所示的嵌套迭代：

```
$(document).ready ->
 i = $(".related_products_list")
 i.each ->
  listid = $(this).data('listid')
  list = $("#related_products_list_" + listid + " li" + " img") 
  list.each ->
    z = $(".related_products_image")
    relid = $(this).data("imageid")      
    hover = $("#related_" + relid) 
    hover.mouseenter ->
      $(this).css("opacity", 1.0)
    hover.mouseleave ->
      $(this).css("opacity", 0.4) 
```

**编辑：上面的代码适用于第一个产品 ligutbox，但对于页面上的其余产品也没有任何作用。

# php - 就像 zend 框架 2 中的 where 查询一样

> ID：15574025
> 
> 赞同：5
> 
> 时间：2013-03-22T15:25:41.817
> 
> 标签：php, zend-framework2, zend-db

我正在使用 Zend 框架 2.x 并面临问题，因为我进行了很多搜索。我想在查询中使用like子句，但每次都给出错误：

这是我的努力：

```
$sql = new Sql($this->adapter);
$select = $sql->select()->columns(
array('user_profile_id', 'profile_login_name'))->from($this->table)->where->like(
       'profile_login_name', '%'.$strSearch.'%');
echo $select->getSqlString(); die; 
```

但这给出了错误：

> **致命错误：在第****131**行 的**/var/www/YAAB/branches/admin/models/Model/UserTable.php**中调用未定义的方法 Zend\Db\Sql\Where::getSqlString()

 **我也使用了 Zend\Db\Sql\Predicate 但这也给出了错误。

所以我的问题是

1.  如何在zend框架2的查询中使用like子句？
2.  我的代码有什么问题？

紧急请尽快回复。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T15:43:53.423

试试这个

```
$select = $sql->select(); // or new Select('table');
$where = new \Zend\Db\Sql\Where();

// Using predicates
$where->addPredicate(
    new \Zend\Db\Sql\Predicate\Like('my_field', '%test%')
);

// Alternatively, a shortcut
$where->like('my_field', '%test%'); // Alternatively, a shortcut.

$select->where($where);

// this part will depend on if you're using TableGateway or what ever

$stmt = $sql->prepareStatementForSqlObject($select);
$resultSet = new ResultSet();
$resultSet->initialize($stmt->execute()); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-10T18:19:36.870

您可以使用 Predicator 来使用 Like。

```
use Zend\Db\Sql\Predicate\Like

$where = new Where();
$where->like('my_field', '%' . $test . '%');

$select->where($where); 
```

注意：要使用 Not Like，您可以改用 Literal。

```
$where->literal('my_field NOT LIKE ?', '%' . $test . '%'); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-20T08:18:19.687

我这样使用会帮助我变得更简单。

```
 <?php

    namespace WebApp\Table;

    use Zend\Db\TableGateway\TableGateway;
    use Zend\Db\Sql\Where;
    use Zend\Db\Sql\Sql,
        Zend\Db\Adapter\Adapter;
    use Zend\Db\Sql\Expression;

    class ClassName
    {    

        public function sidebarJobByUser(\WebApp\Entity\User $user)
            {
                $userId  = $user->getId();
                $adapter = $this->tableGateway->getAdapter();
                $sql     = new Sql($adapter);

                $select = $sql->select();
                $select->from($this->table)
                       ->columns(array('user_profile_id', 'profile_login_name'))
                       ->where->like('profile_login_name', '%'.$strSearch.'%');

                $statement = $sql->getSqlStringForSqlObject($select);
                $results   = $adapter->query($statement, $adapter::QUERY_MODE_EXECUTE);

                return $results;
            }
    } 
```**

# javascript - 如何通过淘汰赛映射取回淘汰赛可观察到的绑定

> ID：15574032
> 
> 赞同：2
> 
> 时间：2013-03-22T15:26:01.090
> 
> 标签：javascript, jquery, json, knockout.js, knockout-mapping-plugin

我已经通过使用敲除映射插件将我的 json 数组绑定到敲除

JSON

```
{
   "info":[
      {
         "Name":"Noob Here",
         "Major":"Language",
         "Sex":"Male",
         "English":"15",
         "Japanese":"5",
         "Calculus":"0",
         "Geometry":"20"
      },
      {
         "Name":"Noob Here",
         "Major":"Calculus",
         "Sex":"Female",
         "English":"0.5",
         "Japanese":"40",
         "Calculus":"20",
         "Geometry":"05"
      }
   ]
} 
```

使用[敲除映射插件绑定](https://github.com/SteveSanderson/knockout.mapping)

```
var data = [];
$.each(data1.info, function (index, element) {
            data.push({
                English: element.English,
                Japanese: element.Japanese,
                Calculus: element.Calculus,
                Geometry: element.Geometry,
                name: element.Name,
                major: element.Major,
                sex: element.Sex
            });
        });

        dataFunction.prototype = function () {
            var getAllItems = function () {
                var self = this;
                ko.mapping.fromJS(data, {}, self.Items);
            }; 
```

现在我想提醒一下英语的价值。

`alert(this.English());`我在里面试过`dataFunction.prototype`，它不起作用。

如何提醒该值？

JS-Bin 代码：http: [//jsbin.com/ipeseq/4/edit](http://jsbin.com/ipeseq/4/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:00:56.887

# javascript - 如何将函数添加到特定的切换器 jQuery 以显示额外的 div？

> ID：15574034
> 
> 赞同：0
> 
> 时间：2013-03-22T15:26:04.593
> 
> 标签：javascript, jquery, toggle, show-hide

首先，我很抱歉，因为我对 Javascript 知之甚少，对 jQuery 更是知之甚少。

我已经能够使用在另一篇文章中找到的解决方案 jQuery 来显示/隐藏特定的 div。我希望做的是添加到此功能以搭载额外的 div。

根据选择的单选按钮，显示“个人”或“联合”会员金额。如果选择了“联合”单选按钮，我还想显示一个额外的 div，“联合信息”。由于页面布局的原因，这两位相关信息位于不同的 div 中，由未包含在函数中的内容分隔。（我正在使用 3rd 方软件，我只能传递一个“其他”数量，所以这似乎是一个解决方案。）

我使用了这个解决方案：

```
$(function() {
    $("[name=toggler]").click(function(){
            $('.toHide').hide();
            $("#blk-"+$(this).val()).show();
    });
 }); 
```

jsFiddle 在这里：http: [//jsfiddle.net/DC4jz/](http://jsfiddle.net/DC4jz/)

我非常感谢以清晰、简单的语言提供的任何帮助。我不是程序员，也不会在电视上播放，但我确实会为我的非营利组织尽力而为，我喜欢在这里找到的知识深度。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:32:53.800

改变

```
 <div id="JointInfo" class="toHide" style="display:none"> 
```

到

```
 <div id="JointInfo" class="joint-info" style="display:none"> 
```

and then add the following line to the `$("[name=toggler]").click(function(){` function

```
 $('.joint-info').css("display", $(this).val() == "Joint" ? "" : "none"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:34:54.307

```
$(function() {
    $("[name=toggler]").click(function(){
            $('.toHide').hide();
            $("#blk-"+$(this).val()).show();
        if($("#joint").is(":checked"))
        {
            $("#JointInfo").show();
        } else {
            $("#JointInfo").hide();
        }
    });
 }); 
```

Demo [http://jsfiddle.net/calder12/DC4jz/1/](http://jsfiddle.net/calder12/DC4jz/1/)

# reporting-services - 如何在 SSRS 中为 Gauge Pointer 编写表达式？

> ID：15574035
> 
> 赞同：1
> 
> 时间：2013-03-22T15:26:10.490
> 
> 标签：reporting-services, expression

我正在尝试使用 SQL Server 2012 SSRS 制作报告。我要显示的是，如果我的表格报告的任何列（MaxC、AvgC、MaxU）中的一个单元格变为红色（基于应用于值的阈值条件），仪表指针（表格上方）停留在红色区域，如果任何列中的任何单元格变为黄色，则仪表将停留在黄色区域，如果绿色则停留在绿色区域。怎么办 我为这个问题写了一个表达式。这就是我为 MaxC 列（值 2472）中的第一条记录所做的，它是黄色的。我能够显示仪表指针停留在黄色区域，但我不确定如何对我感兴趣的所有列中的所有记录应用类似的逻辑。谢谢

```
=Switch(Fields!MaxC.Value > 4000, "Red", Fields!MaxC.Value < 2000, "Green"
, true , "Gold") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:07:29.747

如果我理解正确，上述表达式适用于第一个单元格`MaxC`，默认情况下您可以让其他单元格单独工作吗？如果是这样，您现在关心的是在整个 tablix 上聚合它，即整个数据集？

如果是这样，我建议您`Max()`在有问题的数据集上使用一个函数，如下所示：

```
=Switch(Max(Fields!MaxC.Value, "DatasetA") > 4000, "Red", Max(Fields!MaxC.Value, "DatasetA") < 2000, "Green" , true , "Gold") 
```

如果您想将所有三个阈值合并为一个并且如果不同，我认为您可能会：

```
=Switch(Max(Fields!MaxC.Value, "DatasetA") > 4000 
    OR Max(Fields!AvgC.Value, "DatasetA") > 3000 
    OR Max(Fields!MaxU.Value, "DatasetA") > 2000 , "Red",
    Max(Fields!MaxC.Value, "DatasetA") < 2000 
    OR Max(Fields!AvgC.Value, "DatasetA") < 1000 
    OR Max(Fields!MaxU.Value, "DatasetA") < 500 , "Green",
    true , "Gold") 
```

**或者**

```
=Switch(Max(Fields!MaxC.Value, "DatasetA") > 4000 , "Red",
    Max(Fields!AvgC.Value, "DatasetA") > 3000 , "Red",
    Max(Fields!MaxU.Value, "DatasetA") > 2000 , "Red",
    Max(Fields!MaxC.Value, "DatasetA") < 2000 , "Green",
    Max(Fields!AvgC.Value, "DatasetA") < 1000 , "Green",
    Max(Fields!MaxU.Value, "DatasetA") < 500 , "Green",
    true , "Gold") 
```

# wpf - 未调用使用注入数据服务的中继命令

> ID：15574038
> 
> 赞同：0
> 
> 时间：2013-03-22T15:26:13.660
> 
> 标签：wpf, dependency-injection, lambda, mvvm-light, relaycommand

当我在定义中继命令处理程序的 lambda 语句中使用数据服务的注入实例时，该处理程序永远不会被调用（它与按钮相关联）。当我在 lambda 中声明数据服务的实例时，它工作正常。有任何想法吗？

编辑：创建类变量 _dataService 并在视图模型构造函数中对其进行初始化。在中继命令处理程序中使用类变量，一切正常。

```
 private IDataService _dataService;
    public MainViewModel(IDataService dataService)
    {
        _dataService = dataService;
        Batches = new ObservableCollection<Batch>();

        #region RefreshCommand
        RefreshCommand = new RelayCommand(
            () =>
            {
                var t1 = Task<ObservableCollection<Batch>>.Factory.StartNew(() =>
                {
                    // WHEN I UNCOMMENT AND COMMENT OUT BELOW, WORKS FINE.
                    //DataService test = new DataService();
                    //ObservableCollection<Batch> batches = test.GetBatchesToProcess();

                    //
                    // THIS NOW WORKS.
                    return _dataService.GetBatchesToProcess();
                });
                try
                {
                    t1.Wait();
                }
                catch (AggregateException ae)
                {
                    foreach (var e in ae.InnerExceptions)
                    {
                        if (e is SqlException)
                        {
                            MessageBox.Show("Sql Exception: " + e.Message);
                        }
                        else
                        {
                            MessageBox.Show("Unexpected error: " + e.Message);
                        }
                    }
                    return;
                }
                Batches = t1.Result;
            }
        );
        #endregion  
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T00:40:44.360

对 MainViewModel 构造函数使用 dataService 参数在中继命令处理程序中不起作用。使用在构造函数中初始化的私有类变量（_dataService）解决了这个难题。

# c++ - 将 Cuda 对象链接与 Cmake 一起使用

> ID：15574040
> 
> 赞同：5
> 
> 时间：2013-03-22T15:26:16.393
> 
> 标签：c++, cuda, cmake

现在我正在开发一个使用 Cuda 5 的对象链接功能的项目。由于项目开始变得复杂，我想改用 cmake 来编译代码。但是，我似乎无法让对象链接为我正常工作。

我最终创建了一个玩具版本的项目，它得到与原始项目相同类型的错误。该玩具项目由一个主文件 (TextureMain.cu) 组成，该文件调用内核函数以在 GPU 上运行。在每个 GPU 线程中，都会引用一个用户定义类 (TextureFunc) 的实例，其中该类存在于与主文件不同的文件夹中。该类由该文件夹中的 TextureFunc.cu 和 TextureFunc.h 文件组成。

这是我正在使用的 CMakeList.txt 文件：

在项目目录（包含 src 目录）中：

```
project(TextureMain)
cmake_minimum_required(VERSION 2.8)
find_package(CUDA REQUIRED)
#-------------------------------------------------------------------------------
set(CUDA_NVCC_FLAGS "-arch=compute_20; -code=sm_20; -rdc=true; -lcudadevrt")
include_directories(src/TextureFunc)
#-------------------------------------------------------------------------------
add_subdirectory(src/TextureFunc)
add_subdirectory(src) 
```

在 src 目录中（包含 TextureMain.cu 和 TextureFunc 目录）：

```
cuda_add_executable(TextureMain TextureMain.cu)
target_link_libraries(TextureMain TextureFunc)
install(TARGETS TextureMain DESTINATION bin) 
```

在 TextureFunc 目录（包含 TextureFunc.h 和 TextureFunc.cu）中：

```
cuda_add_library(TextureFunc TextureFunc.cu )
target_link_libraries(TextureFunc) 
```

当我尝试使用上述 CMakeList.txt 文件编译此代码时，我收到以下错误。

```
Linking CXX executable TextureMain
CMakeFiles/TextureMain.dir/./TextureMain_generated_TextureMain.cu.o: In function `__sti____cudaRegisterAll_46_tmpxft_00004c15_00000000_6_TextureMain_cpp1_ii_texRef':
/tmp/tmpxft_00004c15_00000000-3_TextureMain.cudafe1.stub.c:2: undefined reference to `__cudaRegisterLinkedBinary_46_tmpxft_00004c15_00000000_6_TextureMain_cpp1_ii_texRef'
TextureFunc/libTextureFunc.a(TextureFunc_generated_TextureFunc.cu.o): In function `__sti____cudaRegisterAll_46_tmpxft_00004bd8_00000000_6_TextureFunc_cpp1_ii_421ca072':
/tmp/tmpxft_00004bd8_00000000-3_TextureFunc.cudafe1.stub.c:8: undefined reference to `__cudaRegisterLinkedBinary_46_tmpxft_00004bd8_00000000_6_TextureFunc_cpp1_ii_421ca072'
collect2: ld returned 1 exit status
make[2]: *** [src/TextureMain] Error 1
make[1]: *** [src/CMakeFiles/TextureMain.dir/all] Error 2 
```

这显然是一个链接错误，它可能与我使用 cmake 编译代码的方式有关。我认为 nvcc 的标志是正确的，因为我能够使用具有相同标志的 Makefile 编译这个项目。但是，我不确定我还有什么做错的。我确实注意到错误消息引用了一些不存在的 .cpp 文件，但我不知道该怎么做。

任何可以提供的建议将不胜感激。我正在使用 cmake 2.8.8 版。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-06T00:09:03.243

`${CUDA_LIBRARIES}`使用 ` *.cu*文件链接到任何目标怎么样？

例如，在您的 src 目录中，您可以尝试：

```
cuda_add_executable(TextureMain TextureMain.cu)
target_link_libraries(TextureMain TextureFunc ${CUDA_LIBRARIES})
install(TARGETS TextureMain DESTINATION bin) 
```

# ruby-on-rails - 在一个视图中显示来自两个模型的数据

> ID：15574046
> 
> 赞同：0
> 
> 时间：2013-03-22T15:26:28.443
> 
> 标签：ruby-on-rails, associations

我有两个具有各自控制器和视图的模型：`Profile`和`Comment`.

我的应用程序的整个视图（整个网页）位于`Profile` `show.html.erb`. 在此页面上，用户应该能够创建评论，其中`belongs_to`一个`Profile`.

如何在无需导航到标准`/comments/new`页面的情况下完成此操作？

**编辑：** 遵循rails指南后，我实现了：

```
<%= simple_form_for([@profile, @profile.comment.build], html: {class: "form-inline"}) do |f| %>
  <%= f.error_notification %>

  <%= f.input :description, label: false, placeholder: 'Create an comment', input_html: { class: "span4" } %>
  <%= f.submit 'Submit', class: 'btn btn-small'%>

<% end %> 
```

评论控制器

```
 def create
  @profile = profile.find(params[:profile_id])
  @comment = @profile.comments.create(params[:comment])
  redirect_to profile_path(@profile) 
```

我收到了这个错误：

```
undefined method `comment' for #<Profile: 
```

**修复：**在构建语句中，注释需要是复数

```
@profile.comments.build 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:36:09.303

您需要做的就是将评论表单代码添加到 profile#show 中。然后在 profile_controller 的显示操作中执行以下操作：

```
def show
 @comment = Comment.new
end 
```

并在评论控制器中添加：

```
def create
 @comment = Comment.create(params[:comment])
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:00:57.173

您可能会考虑使用 AJAX 调用以及类似[Knockout](http://knockoutjs.com/)的方法来保存表单并更新页面。因此，在profiles/show.html.erb 中，制作一个常规（单独的）表格，仅用于发表评论。使用 jQuery 或类似的东西通过 AJAX 将表单发布到 /comments，因此它会在您的评论控制器中执行创建操作。让该控制器返回一个 JSON 响应，这将是保存的注释，或者看起来像 {:fieldname => 'too long'} 的错误消息哈希。

在客户端，解析 json 响应并显示保存的注释，或显示错误消息，解释为什么无法保存。你可以在普通的 jQuery 中完成所有这些，但是添加类似 Knockout 的东西会让这一切变得更简单一些。

# magento - 将变量传递给 Magento 小部件

> ID：15574048
> 
> 赞同：0
> 
> 时间：2013-03-22T15:26:36.933
> 
> 标签：magento, variables, widget, block

我正在尝试使用 setData 将变量传递给包含以下小部件的框：

```
$this->getChild('my_box')->setData('myvar', '123');
echo $this->getChildHtml('my_box'); 
```

或这个：

```
echo $this->getChild('my_box')->setData('myvar', '123')->toHtml(); 
```

“my_box”是与小部件链接的块，它位于页脚并在 local.xml 中定义：

```
<reference name="footer">
    <block type="core/text_list" name="my_box" as="my_box" translate="label">
        <label>My Box</label>
    </block>
</reference> 
```

但是，如果我尝试使用以下任何方法检索小部件中的值：

```
echo $this->getData('myvar');
echo $this->getMyVar();
echo $this->myvar; 
```

没有返回值，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T00:43:30.637

在重写之外，`"core/text_list"`是[`Mage_Core_Block_Text_List`(link)](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Block/Text/List.php#L33)的一个实例，并且没有模板供您调用代码。

不过，您可以验证基本功能是否正常工作：

```
$my_box = $this->getChild('my_box')->setData('myvar','123'); //if no error, my_box exists!

echo get_class($my_box); //Mage_Core_Block_Text_List

var_dump($my_box->debug()); //array() including 'myvar' => '123'

echo $my_box->getData('myvar')` //correct
echo $my_box->myvar //works, but unconventional
echo $my_box->getMyVar() //will not access the property you set; rather...
echo $my_box->getMyvar() //will work 
```

为了其他乐趣，您可以通过布局 XML 设置属性：

```
<reference name="footer">
    <block type="core/text_list" name="my_box" as="my_box" translate="label">
        <label>My Box</label>
        <action method="setMyvar">
            <arbitrary>123</arbitrary>
        </action>
        <!-- or <action method="setDatar">
            <name>myvar</name>
            <val>123</arbitrary>
        </action> -->
    </block>
</reference> 
```

另外，请注意默认情况下页脚块永久缓存在**block_html**缓存中。

# android - 如何使用 JSONParser 执行上传图像的功能？

> ID：15574050
> 
> 赞同：1
> 
> 时间：2013-03-22T15:26:48.557
> 
> 标签：android, json, image, upload

我一直在研究 Google 或 Stack Overflow 上`JSONParser`的许多帖子和教程，但没有人真正习惯于上传图片。我发现的所有代码都用于网站而不是 Android。

如何使用`JSONParser`上传图片？

我希望能够从画廊上传或通过相机拍照并直接上传到我的应用程序中。

该类`JSONParser`如下所示：

```
public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String result = "";
    static String json = "";

    // constructor
    public JSONParser() {

    }

    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST") {
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            } else if(method == "GET") {
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;
    }
} 
```

我们可以通过传入参数来做到这一点，但似乎没有人使用它。是不可能的还是实施中有错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:45:02.227

要将文件上传到服务器（图像、音频等），您可能需要使用 MultipartEntity。在线查找并下载这两个库：**httpmime-4.0.jar**和**apache-mime4j-0.4.jar**并将它们添加到项目中。以下是如何使用它的示例：

```
public void doUpload(File fileToUpload)
{
    HttpClient httpclient = new DefaultHttpClient();
    try {
        HttpPost httppost = new HttpPost(URL_UPLOAD_HERE);

        MultipartEntity entity = new MultipartEntity();
        entity.addPart("imgType", new StringBody(imgType));
        entity.addPart("imgFile", new FileBody(fileToUpload));

        httppost.setEntity(entity);

         //------------------ read the SERVER RESPONSE
        HttpResponse response = httpclient.execute(httppost);
        StatusLine statusLine = response.getStatusLine();
        Log.d("UploaderService", statusLine + "");
        int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) {
            HttpEntity resEntity = response.getEntity();
            InputStream content = resEntity.getContent();

            BufferedReader reader = new BufferedReader(new InputStreamReader(content));
            String line;
            while (( line = reader.readLine()) != null)
            {
                Log.i("Debug","Server Response " + line);

                // try parse the string to a JSON object
                try {
                    jObj = new JSONObject(line);
                } catch (JSONException e) {
                    Log.e("JSON Parser", "Error parsing data " + e.toString());
                }
            }
            reader.close();
        } else {
            Log.e(UploaderService.class.toString(), "Failed to upload file");
        }  

    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

在服务器端，您可以使用这些实体标识符的名称“imgFile”和“imgType”来检索文件并进行处理。请注意，使用这些库，您还可以像我在示例中所做的那样随文件一起发送另一个参数（将“imgType”字符串附加到实体）。

考虑在单独的线程中运行此代码，例如 AsyncTask

# c# - 单击时添加另外 2 个缓存数据的表单字段？.net c#

> ID：15574051
> 
> 赞同：0
> 
> 时间：2013-03-22T15:26:50.027
> 
> 标签：c#, .net

我在一个显示 X 数量字段的网站上工作，我在下面有一个按钮，允许用户单击并复制相同的字段 - 我有这个工作，唯一的问题是我的数据正在缓存，所以当你点击按钮，所有字段都包含克隆值。任何人都可以看到我可能会出错的地方吗？

```
private void NewDelegates()
{
    int NewDelegate = 2;
    if (ViewState["NewDelegate"] != null)
        NewDelegate = int.Parse(ViewState["NewDelegate"].ToString());
    else
        ViewState.Add("NewDelegate", 2);

    List<DelegateNoList> DelNo = new List<DelegateNoList>();
    for (int i = 0; i < NewDelegate; i++)
        DelNo.Add(new DelegateNoList { id = i });

    LV_Delegates.DataSource = DelNo;
    LV_Delegates.DataBind();
}

public class DelegateNoList
{
    public int id { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:45:40.890

因为你循环了两次

你的最大值是 2

```
int NewDelegate = 2; 
```

初始化状态为 0

```
for (int i = 0; i < NewDelegate; i++)
        DelNo.Add(new DelegateNoList { id = i }); 
```

# javascript - 如果语句给了我未定义的结果

> ID：15574054
> 
> 赞同：0
> 
> 时间：2013-03-22T15:26:53.670
> 
> 标签：javascript

我已经建立了一个表单，根据用户的选择显示结果。我正在尝试将 if 语句放在一起，该语句将在选择特定值时输出数据表 1。我想当有人选择 525、134 和 290 时给我数据表 1，否则给我数据表 3。这是我的代码：

```
<form name="test" id="test"">
    <label for="select1">Height in (mm)</label>
        <select name="division-select" id="height">
        <option label="Please Select"></option>
            <option value="525">525 or less</option>
            <option value="645">645 or less</option>
            <option value="1265">up to 1265</option>
            <option value="1270">more than 1265</option>
        </select>
        <label for="select1">Width in (mm)</label>
        <select name="division-select" id="width">
        <option label="Please Select"></option>
            <option value="134w">134 or less</option>
            <option value="190w">190 or less </option>
            <option value="290w">290 or less</option>
            <option value="328w">328 or less</option>
            <option value="420w">420 or more</option>
        </select>
        <Br>
        <br>
        <label for="select1">Depth in (mm)</label>
        <select name="division-select" id="depth">
        <option label="Please Select"></option>
            <option value="134d">134 or less</option>
            <option value="190d">190 or less </option>
            <option value="290d">290 or less</option>
            <option value="328d">328 or less</option>
            <option value="420d">420 or more</option>
        </select>
        <br><br>
        <h2>Or select by load</h2>
        <label for="select1">Load in (kN)</label>
        <select name="division-select" id="load">
            <option label="Please Select"></option>
            <option value="2-5">2.5 or less</option>
            <option value="5">5 or less </option>
            <option value="10">10 or less</option>
            <option value="25">25 or less</option>
            <option value="50">50 or more</option>
        </select>
        <br>
        <p><input type="button" onclick="calculate();" value="Find your Datasheet" /><input type="button" onclick="formReset()" value="Reset form"></p>

</form>
<div id="result">
</div>
<script type="text/javascript">
function calculate() {
    var height = document.getElementById('height').value;
    var width = document.getElementById('width').value;
    var depth = document.getElementById('depth').value;
    var load = document.getElementById('load').value;
    if (document.getElementById("height").value == "") {
        var heightmsg = "Please select your sample's height.";
        document.getElementById("result").innerHTML = heightmsg;
        return false;
    }
    if (document.getElementById("width").value == "") {
        var widthmsg = "Please select your sample's width.";
        document.getElementById("result").innerHTML = widthmsg;
        return false;
    }
    if (document.getElementById("depth").value == "") {
        var depthmsg = "Please select your sample's depth.";
        document.getElementById("result").innerHTML = depthmsg;
        return false;
    }
    if (height === "525" && width === "134" && depth === "290") {
        if (height === "525" && width === "290" && depth === "134") {
            var str = '<a href="#">Download your Datasheet 1</a>';
        } else {
            var str = '<a href="#">Download your Datasheet 3</a>';
        }
    } else if (height == 1270) {
        var str = "This configuration is beyond the standard range of top-load testers. Please contact Mecmesin Sales to discuss ways to meet your requirements.";
    }
    document.getElementById("result").innerHTML = str;
}

function formReset() {
    document.getElementById("test").reset();
}
</script> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:34:05.760

您的宽度和深度值以 w 和 d 结尾（例如`<option value="190d">`），但您没有在 if 条件（`if (height === "525" && width === "134" && depth === "290")`）中检查它。将 w 和 d 从值中取出，如下所示：

```
<select name="division-select" id="width">
    <option label="Please Select"></option>
    <option value="134">134 or less</option>
    <option value="190">190 or less</option>
    <option value="290">290 or less</option>
    <option value="328">328 or less</option>
    <option value="420">420 or more</option>
</select> 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/GPQqp/)**

旁注：您的情况似乎永远不可能为真：

```
if (height === "525" && width === "134" && depth === "290") {
    if (height === "525" && width === "290" && depth === "134")... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:37:10.360

```
if (height === "525" && width === "134" && depth === "290") {
    if (height === "525" && width === "290" && depth === "134") { 
```

没有意义。如果第一个条件为真，则第二个条件永远不可能。我猜你想要

```
if (height === "525" && width === "290" && depth === "134")
    var str = '<a href="#">Download your Datasheet 1</a>';
else if (height === "525" && width === "134" && depth === "290")
    var str = '<a href="#">Download your Datasheet 3</a>';
else if (height == 1270)
    var str = "This configuration is beyond the standard range of top-load testers. Please contact Mecmesin Sales to discuss ways to meet your requirements."; 
```

另请注意，您的`<option>`标签值以`w`and为后缀`d`，因此它们不等于无后缀的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T19:46:18.550

你使用了太多的 if 语句，如果你想为三个选择输入（宽度、高度、深度）中的每个选项指定一个单独的链接，你最终会得到 4x5x5 = 100 个 if 语句。解决这个问题的最简单方法是创建一个包含所有值和对应链接的 mysql 数据库，或者您可以使用 XML 或 JSON 数组。

对于空选择输入验证，您可以使用：

```
var height = document.getElementById('height'),
    width = document.getElementById('width'),
    depth = document.getElementById('depth'),
    load = document.getElementById('load'),
    result = document.getElementById('result'),
    arr = [height, width, depth],
    error = "Please select your sample's ";

for (var i = 0; i < arr.length; i++) {
    var t = arr[i].id;
    if (arr[i].value == "") result.innerHTML = error + t;
    return false;
} 
```

对于 JSON 示例，请参阅 jsfiddle 上的[演示](http://jsfiddle.net/CCU97/)。

# python - Import _nlopt.pyd error in OSX

> ID：15574062
> 
> 赞同：0
> 
> 时间：2013-03-22T15:27:06.463
> 
> 标签：python, macos, nlopt

I followed step with [nlopt](http://ab-initio.mit.edu/wiki/index.php/NLopt) and get a _nlopt.pyd

When i try to use nlopt.py(it's have code like follow)

```
import _nlopt 
```

and it's gives

```
ImportError: No module named _nlopt 
```

I am sure the _nlopt.pyd is in the folder

And it's work in Windows7

Any help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:37:35.253

Make sure you first configured with the `--enable-shared` flag before compiling

# java - Java：鼠标在图形界面中拖动和移动

> ID：15574065
> 
> 赞同：2
> 
> 时间：2013-03-22T15:27:11.137
> 
> 标签：java, swing, drag-and-drop, awt, paintcomponent

新手程序员在这里。

我正在制作一个程序，在笛卡尔坐标系中呈现用户输入的方程。目前，我在让用户在坐标中自由移动视图方面遇到了一些问题。目前使用 mouseDragged 用户可以稍微拖动视图，但是一旦用户释放鼠标并尝试再次移动视图，原点就会重新回到鼠标光标的当前位置。让用户自由移动的最佳方式是什么？提前致谢！

这是绘图区域的代码。

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.awt.geom.Line2D;
import java.awt.geom.Point2D;
import javax.swing.JPanel;
public class DrawingArea extends JPanel implements MouseMotionListener {

private final int x_panel = 350; // width of the panel
private final int y_panel = 400; // height of the panel
private int div_x; // width of one square
private int div_y; // height of one square

private int real_y;
private int real_x;
private Point origin; // the origin of the coordinate
private Point temp; // temporary point

private static int y = 0;
private static int x = 0;

DrawingArea() {
    setBackground(Color.WHITE);

    real_x = x_panel;
    real_y = y_panel;

    setDivisionDefault();
    setOrigin(new Point((real_x / 2), (real_y / 2)));

    setSize(x_panel, y_panel);
    addMouseMotionListener(this);

}

DrawingArea(Point origin, Point destination) {
     this.origin = origin;
     this.destination = destination;
     panel = new JPanel();
     panel.setSize(destination.x, destination.y);
     panel.setLocation(origin);
     this.panel.setBackground(Color.red);
     panel.setLayout(null);

}

@Override
public void paintComponent(Graphics g) {

    super.paintComponent(g);

    Graphics2D line = (Graphics2D) g;

    temp = new Point(origin.x, origin.y);

    line.setColor(Color.red);
    drawHelpLines(line);

    line.setColor(Color.blue);
    drawOrigin(line);

    line.setColor(Color.green);
    for (int i = 0; i < 100; i++) { // This is a test line
        //temp = this.suora();

        temp.x++;
        temp.y++;

        line.drawLine(temp.x, temp.y, temp.x, temp.y);

    }

}

public void setOrigin(Point p) {
    origin = p;

}

public void drawOrigin(Graphics2D line) {
    line.drawLine(origin.x, 0, origin.x, y_panel);
    line.drawLine(0, origin.y, x_panel, origin.y);
}

public void drawHelpLines(Graphics2D line) {

    int xhelp= origin.x;
    int yhelp= origin.y;
    for (int i = 0; i < 20; i++) {
        xhelp+= div_x;
        line.drawLine(xhelp, 0, xhelp, y_panel);
    }
    xhelp= origin.x;
    for (int i = 0; i < 20; i++) {
        xhelp-= div_x;

        line.drawLine(xhelp, 0, xhelp, y_panel);
    }

    for (int i = 0; i < 20; i++) {
        yhelp-= div_y;
        line.drawLine(0, yhelp,x_panel, yhelp);
    }
    yhelp= origin.y;
    for (int i = 0; i < 20; i++) {
        yhelp+= div_y;
        line.drawLine(0, yhelp, x_panel, yhelp);
    }

}

public void setDivisionDefault() {
    div_x = 20;
    div_y = 20;

}

@Override
public void mouseDragged(MouseEvent e) {

    //Point temp_point = new Point(mouse_x,mouse_y);
    Point coords = new Point(e.getX(), e.getY());

    setOrigin(coords);

    repaint();

}

@Override
public void mouseMoved(MouseEvent e) {
}
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-22T17:25:00.140

基于此[示例](https://stackoverflow.com/a/5312702/230513)，以下程序允许用户将轴的交点拖动到任意点，`origin`该点从面板的中心开始。

![图像](../Images/29b0065cd98bdc78496914bb72e41de6.png)

```
import java.awt.Cursor;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionAdapter;
import javax.swing.JFrame;
import javax.swing.JPanel;

/**
 * @see https://stackoverflow.com/a/15576413/230513
 * @see https://stackoverflow.com/a/5312702/230513
 */
public class MouseDragTest extends JPanel {

    private static final String TITLE = "Drag me!";
    private static final int W = 640;
    private static final int H = 480;
    private Point origin = new Point(W / 2, H / 2);
    private Point mousePt;

    public MouseDragTest() {
        this.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
        this.addMouseListener(new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent e) {
                mousePt = e.getPoint();
                repaint();
            }
        });
        this.addMouseMotionListener(new MouseMotionAdapter() {
            @Override
            public void mouseDragged(MouseEvent e) {
                int dx = e.getX() - mousePt.x;
                int dy = e.getY() - mousePt.y;
                origin.setLocation(origin.x + dx, origin.y + dy);
                mousePt = e.getPoint();
                repaint();
            }
        });
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(W, H);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawLine(0, origin.y, getWidth(), origin.y);
        g.drawLine(origin.x, 0, origin.x, getHeight());
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame f = new JFrame(TITLE);
                f.add(new MouseDragTest());
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.pack();
                f.setLocationRelativeTo(null);
                f.setVisible(true);
            }
        });
    }
} 
```

# ruby-on-rails - 使用nested_form gem的未定义方法`values_at'

> ID：15574066
> 
> 赞同：6
> 
> 时间：2013-03-22T15:27:11.270
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, nested-forms

我收到错误

```
ActionView::Template::Error (undefined method `values_at' for nil:NilClass): 
```

使用nested_form gem 时

这是我的代码

楷模

```
class Poll < ActiveRecord::Base

  attr_accessible :question, :poll_answers_attributes
  has_many  :poll_answers
  accepts_nested_attributes_for :poll_answers
end

class PollAnswer < ActiveRecord::Base
  belongs_to  :poll
  attr_accessible :answer
end 
```

看法

```
 =nested_form_for [:admin, @poll], mutipart: true, class: "form-horizontal" do |f|
    .span6
      .control-group
        =f.label :question, class: "control-label"
        .controls
          =f.text_field :question, rows: "5", class: "span5"
      = f.link_to_add "Add a Answer", :poll_answers
      =f.submit "Create Post", class: "btn btn-primary" 
```

堆栈跟踪

```
/home/abid/.bundler/ruby/1.9.1/nested_form-6232dd853c27/lib/nested_form/builder_mixin.rb:41:in `block in link_to_add'
/home/abid/.bundler/ruby/1.9.1/nested_form-6232dd853c27/lib/nested_form/view_helper.rb:53:in `call'
/home/abid/.bundler/ruby/1.9.1/nested_form-6232dd853c27/lib/nested_form/view_helper.rb:53:in `after_nested_form_callbacks'
/home/abid/.bundler/ruby/1.9.1/nested_form-6232dd853c27/lib/nested_form/view_helper.rb:8:in `block in nested_form_for' 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T18:22:06.947

**如nested_form gem**的文档中所述，您必须在**link_to_load**按钮之前提及嵌套对象的**field_for 。**我以前没有使用过这个 gem，但是在阅读了文档之后，我猜到了。

 **这里的表格看起来像

```
<%= nested_form_for [:admin, @poll], mutipart: true, class: "form-horizontal" do |f| %>
  <%= f.text_field :question %>
  <%= f.fields_for :poll_answers do |poll_ans_form| %>
    <%= poll_ans_form.text_field :name %>
    <%= poll_ans_form.link_to_remove "Remove this task" %>
  <% end %>
  <p><%= f.link_to_add "Add a Answer", :poll_answers %></p>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:39:30.537

您应该查看 simple_form 来执行这种类型的嵌套表单。这很容易。根据您发布的模型，这样的事情应该可以工作：

```
# controller
  def new
    @poll = Poll.new
  end

# new.html.erb
<%= simple_form_for @poll do |f| %>
  <%= f.simple_fields_for :poll_answer do |l| %>
    <%= l.input :answer, autofocus: true %>
    <%= l.submit "Add", class: 'small round button' %>
  <% end %>
<% end %> 
```

然后，如果您打开了路由，则该帖子应发送到 poll#create 控制器。从那里，您可以对其进行逻辑处理。

希望有帮助。**

# python - Robotframework + Selenium2Library Native Py 关键字 Run_on_failure

> ID：15574074
> 
> 赞同：0
> 
> 时间：2013-03-22T15:27:33.743
> 
> 标签：python, selenium-webdriver, robotframework

在使用自定义机器人框架关键字时，我在让 selenium2library 触发失败时运行时遇到了一些问题。

我在 python 中编写了一个按预期工作的关键字，除了当我引发 AssertionError 失败时，不会调用 Selenium2Library 的 Run_On_Failure 关键字。

我还尝试将此关键字包装在用户定义的 Robotframework 关键字中，但我仍然无法触发 Run_On_Failure。然而，当我导致 S2L 关键字失败时，Run_On_Failure 会按我的预期启动。

当我的 RFpy 关键字失败时，我需要调用 Run_On_Failure。有人有什么建议吗？

这是我的关键字

```
 def compare_text(self, actualString, expectedString):
    """Compares two strings of text, this differs from the Selenium2Library
    text compare routines because we do not require an element locator, just
    the `actual` and `expected` strings.  String matching failure will cause
    the test to Assert an error and the test to fail.
    """
    print("Actual Here: %s") % (actualString)
    print("Expected Here: %s") % (expectedString)
    if actualString != expectedString:
        raise AssertionError("ERROR: Actual and Expected strings don't match!") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:16:27.093

解决方案是一个内置的 RF 关键字，称为“如果测试失败则运行关键字”。

# javascript - 这个 Bind 函数......以及这些参数，还有这个 apply 方法......我不确定我是否理解它在这个例子中是如何工作的

> ID：15574075
> 
> 赞同：2
> 
> 时间：2013-03-22T15:27:39.190
> 
> 标签：javascript

取自[http://ejohn.org/apps/learn/#84](http://ejohn.org/apps/learn/#84)

```
function bind(context, name){ 
  return function(){ 
    return context[name].apply(context, arguments); 
  }; 
} 
```

我真的很想知道这是如何工作的。但是，如果您从最里面的函数 console.log 参数，则此函数有效，它们不存在。那么它们怎么可能用在调用它们的 apply 函数中呢？

换句话说：

```
function bind(context, name){ 
  console.log(arguments.length === 2, true);
  return function(){ 
    console.log(arguments.length === 0, true);
    return context[name].apply(context, arguments); 
  }; 
} 
```

您可以 console.log 外部函数中的参数并获取长度属性。但是从最里面的函数开始，arguments.length === 0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:36:53.487

现在忘记关闭以简化。

该函数`bind`返回一个函数，如：

```
function returnedFunction() {
    return context[name].apply(context, arguments);
} 
```

因此，如果我称`returnedFunction(1,2,3);`参数为`1, 2, 3`. 如果我打电话`returnedFunction()`，就没有论据。

现在我们必须担心哪些会在简化中`context`，那就是当您查看闭包并看到它们在外部函数中定义时。`name``undefined`

`arguments`并且`this`不是变量，因此它们不能被关闭。它们分别针对每个函数调用进行评估。`bind`无论您传递给什么参数，都会对它们`bind`进行评估，然后`returnedFunction`每次调用时都会对它们进行评估`returnedFunction`。

请注意，从返回的函数`bind`彼此没有关系。他们每个人都有自己独特的环境，具有不同的`context`绑定`name`。

# c# - CodeFirst EF - 手动注册模型

> ID：15574081
> 
> 赞同：0
> 
> 时间：2013-03-22T15:27:55.450
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-5, entity-framework-migrations

而不是这样做：

```
 public class MyContext : DbContext
 {
      DbSet<MyModel> MyModels {get;set;}
 } 
```

我只想创建一个上下文“来统治他们所有人”，如下所示。

```
 public class GenericContext : DbContext
 {
      public GenericContext(param type[] modelTypes){
           //How can I do something like the following line?
           base.ModelBuilder.RegisterAll(modelTypes) //PSEUDO CODE
      }
 } 
```

然后可以针对`Set<T>()`DbContext 的属性进行我所做的所有查询。

是否可以执行上述操作并同时创建迁移脚本？如果有怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:00:20.317

我认为这是不可能的，因为“代码优先”能够创建数据库本身，但在第一次运行时同时创建所有模式，这意味着它应该是静态的，因为它不会按需创建表。

# android - 端点和 AppEngine 1.7.6

> ID：15574085
> 
> 赞同：0
> 
> 时间：2013-03-22T15:28:08.083
> 
> 标签：android, google-app-engine, google-cloud-endpoints

我有一个连接到 Google Cloud Endpoints 的 Android 应用程序。如果我使用 AppEngine 1.7.5 项目构建客户端库，这一切都很好。但是，如果我升级到 AppEngine 1.7.6，Android 客户端无法连接到端点并出现以下错误：-

无法验证主机名“1.myappid.appsot.com”。

有没有人看到同样的问题？

谢谢，

瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T18:11:57.070

这是 1.7.6 中的错误，已在 1.7.7 中修复

# ios - 这个崩溃是我造成的还是 UIKit 本身造成的？

> ID：15574088
> 
> 赞同：3
> 
> 时间：2013-03-22T15:28:13.957
> 
> 标签：ios, crash, uikit, crash-reports

这份崩溃报告对我来说真的很难处理。我时不时地看到它，而且它几乎不可能修复，因为它并没有真正给我任何对我的代码工作的引用。

这是Apple造成的崩溃，我不必担心吗？

```
Date/Time:       2013-02-26 03:49:36 +0000
OS Version:      iPhone OS 6.1.2 (10B146)
Report Version:  104

Exception Type:  SIGTRAP
Exception Codes: #0 at 0x33973d24
Crashed Thread:  0

Thread 0 Crashed:
0   CoreFoundation                      0x33973d24 CFRetain + 8
1   UIKit                               0x359484f9 -[UIKeyboardCache displayView:imageWidth:withKey:fromLayout:] + 297
2   UIKit                               0x359483c7 -[UIKeyboardCache displayView:withKey:fromLayout:] + 91
3   UIKit                               0x35947b5b -[UIKBKeyplaneView displayLayer:] + 191
4   QuartzCore                          0x355f34f7 CA::Layer::display() + 95
5   QuartzCore                          0x355ea93b CA::Layer::display_if_needed(CA::Transaction*) + 203
6   QuartzCore                          0x355ea865 CA::Layer::layout_and_display_if_needed(CA::Transaction*) + 25
7   QuartzCore                          0x355ea243 CA::Context::commit_transaction(CA::Transaction*) + 239
8   QuartzCore                          0x355ea051 CA::Transaction::commit() + 317
9   QuartzCore                          0x355e9eb1 CA::Transaction::observer_callback(__CFRunLoopObserver*, unsigned long, void*) + 61
10  CoreFoundation                      0x33a096cd __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 21
11  CoreFoundation                      0x33a079c1 __CFRunLoopDoObservers + 277
12  CoreFoundation                      0x33a07d17 __CFRunLoopRun + 743
13  CoreFoundation                      0x3397aebd CFRunLoopRunSpecific + 357
14  CoreFoundation                      0x3397ad49 CFRunLoopRunInMode + 105
15  GraphicsServices                    0x3753c2eb GSEventRunModal + 75
16  UIKit                               0x35890301 UIApplicationMain + 1121
17  MyApp                               0x0004e60f main (main.m:16)

Thread 1:
0   libsystem_kernel.dylib              0x3bbbc648 kevent64 + 24
1   libdispatch.dylib                   0x3bae7df8 _dispatch_mgr_thread$VARIANT$up + 36

Thread 2:
0   libsystem_kernel.dylib              0x3bbbbeb4 mach_msg_trap + 20
1   CoreFoundation                      0x33a09045 __CFRunLoopServiceMachPort + 129
2   CoreFoundation                      0x33a07da3 __CFRunLoopRun + 883
3   CoreFoundation                      0x3397aebd CFRunLoopRunSpecific + 357
4   CoreFoundation                      0x3397ad49 CFRunLoopRunInMode + 105
5   WebCore                             0x3996f505 RunWebThread(void*) + 445
6   libsystem_c.dylib                   0x3bb25311 _pthread_start + 309

Thread 3:
0   libsystem_kernel.dylib              0x3bbbbeb4 mach_msg_trap + 20
1   CoreFoundation                      0x33a09045 __CFRunLoopServiceMachPort + 129
2   CoreFoundation                      0x33a07da3 __CFRunLoopRun + 883
3   CoreFoundation                      0x3397aebd CFRunLoopRunSpecific + 357
4   CoreFoundation                      0x3397ad49 CFRunLoopRunInMode + 105
5   Foundation                          0x3429df97 -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 255
6   Foundation                          0x34341865 -[NSRunLoop(NSRunLoop) run] + 81
7   MyApp                               0x0003f7b5 +[AFURLConnectionOperation networkRequestThreadEntryPoint:] (AFURLConnectionOperation.m:161)
8   Foundation                          0x3434ae85 __NSThread__main__ + 973
9   libsystem_c.dylib                   0x3bb25311 _pthread_start + 309

Thread 4:
0   libsystem_kernel.dylib              0x3bbbbeb4 mach_msg_trap + 20
1   CoreFoundation                      0x33a09045 __CFRunLoopServiceMachPort + 129
2   CoreFoundation                      0x33a07da3 __CFRunLoopRun + 883
3   CoreFoundation                      0x3397aebd CFRunLoopRunSpecific + 357
4   CoreFoundation                      0x3397ad49 CFRunLoopRunInMode + 105
5   Foundation                          0x342c73d5 +[NSURLConnection(Loader) _resourceLoadLoop:] + 309
6   Foundation                          0x3434ae85 __NSThread__main__ + 973
7   libsystem_c.dylib                   0x3bb25311 _pthread_start + 309

Thread 5:
0   libsystem_kernel.dylib              0x3bbcc594 __select + 20
1   libsystem_c.dylib                   0x3bb25311 _pthread_start + 309

Thread 6:
0   libsystem_kernel.dylib              0x3bbcc08c __psynch_cvwait + 24
1   libsystem_c.dylib                   0x3bb1daa5 pthread_cond_timedwait + 45
2   JavaScriptCore                      0x37932c75 WTF::ThreadCondition::timedWait(WTF::Mutex&, double) + 109
3   JavaScriptCore                      0x37a44557 JSC::BlockAllocator::blockFreeingThreadMain() + 83
4   JavaScriptCore                      0x37a56fab WTF::wtfThreadEntryPoint(void*) + 15
5   libsystem_c.dylib                   0x3bb25311 _pthread_start + 309

Thread 7:
0   libsystem_kernel.dylib              0x3bbbbeb4 mach_msg_trap + 20
1   CoreFoundation                      0x33a09045 __CFRunLoopServiceMachPort + 129
2   CoreFoundation                      0x33a07da3 __CFRunLoopRun + 883
3   CoreFoundation                      0x3397aebd CFRunLoopRunSpecific + 357
4   CoreFoundation                      0x3397ad49 CFRunLoopRunInMode + 105
5   AudioToolbox                        0x3345c703 GenericRunLoopThread::Entry(void*) + 139
6   AudioToolbox                        0x3343d885 CAPThread::Entry(CAPThread*) + 297
7   libsystem_c.dylib                   0x3bb25311 _pthread_start + 309

Thread 8:
0   libsystem_kernel.dylib              0x3bbccd98 __workq_kernreturn + 8
1   libsystem_c.dylib                   0x3bb1aa16 _pthread_wqthread + 366

Thread 9:
0   libsystem_kernel.dylib              0x3bbccd98 __workq_kernreturn + 8
1   libsystem_c.dylib                   0x3bb1aa16 _pthread_wqthread + 366 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-22T15:41:09.187

这不是苹果造成的。下面的行是崩溃的入口点。确保一些相关的对象/视图不会被释放。

```
 MyApp    0x0003f7b5 +[AFURLConnectionOperation networkRequestThreadEntryPoint:] (AFURLConnectionOperation.m:161 
```

更新：

我收回我的对象​​释放声明。我怀疑这种崩溃可能是由于在后台线程中创建\更新 UI 元素而发生的。我的意思是在网络回调方法中创建/更新的 UI 元素。

该问题的解决方案是添加一个`dispatch_async`来`main_queue`执行 UI 更新。

# java - LWJGL 纹理混合不起作用

> ID：15574095
> 
> 赞同：1
> 
> 时间：2013-03-22T15:28:31.467
> 
> 标签：java, opengl, textures, lwjgl, alphablending

我正在尝试绘制渐变，然后在其上绘制透明纹理。

这是我现在正在使用的代码：

```
GL11.glClearColor(0.0F, 0.0F, 0.0F, 0.0F);

// Draw the gradient
GL11.glBegin(GL11.GL_QUADS);
    GL11.glTexCoord2f(0.0f, 0.0f);
    GL11.glColor4f(1F, 1F, 1F, 0F);
    GL11.glVertex3f(0, 0, 0.0f);
    GL11.glTexCoord2f(1.0f, 0.0f);
    GL11.glColor4f(0F, 1F, 1F, 0F);
    GL11.glVertex3f(0 + gameWidth, 0, 0.0f);
    GL11.glTexCoord2f(1.0f, 1.0f);
    GL11.glColor4f(0F, 0F, 1F, 0F);
    GL11.glVertex3f(0 + gameWidth, 0 + gameHeight, 0.0f);
    GL11.glTexCoord2f(0.0f, 1.0f);
    GL11.glColor4f(1F, 0F, 1F, 0F);
    GL11.glVertex3f(0, 0 + gameHeight, 0.0f);
GL11.glEnd();
GL11.glColor4f(1F, 1F, 1F, 0F);

GL11.glEnable(GL11.GL_BLEND);
GL11.glBlendFunc(GL11.GL_ONE, GL11.GL_ONE_MINUS_SRC_ALPHA);

TexLoader.loadTex("/example.png"); // Loads and binds the texture, also enables GL_TEXTURE_2D
GL11.glBegin(GL11.GL_QUADS);
    GL11.glTexCoord2f(0.0f, 0.0f);
    GL11.glVertex3f(parX, parY, 0.0f);
    GL11.glTexCoord2f(1.0f, 0.0f);
    GL11.glVertex3f(parX + parWidth, parY, 0.0f);
    GL11.glTexCoord2f(1.0f, 1.0f);
    GL11.glVertex3f(parX + parWidth, parY + parHeight, 0.0f);
    GL11.glTexCoord2f(0.0f, 1.0f);
    GL11.glVertex3f(parX, parY + parHeight, 0.0f);
GL11.glEnd();
GL11.glDisable(GL11.GL_TEXTURE_2D);
GL11.glDisable(GL11.GL_BLEND); 
```

但是，它没有绘制纹理并隐藏透明像素，而是绘制了一个白色四边形。

我究竟做错了什么？

# scala - scala selenium dsl页面对象

> ID：15574100
> 
> 赞同：3
> 
> 时间：2013-03-22T15:28:50.957
> 
> 标签：scala, selenium-webdriver

我正在使用 Selenium dsl 并想使用 Page 对象。但是目前看来我必须在测试类中定义页面对象。我想要一个页面对象的原因是在测试之间共享共同的功能，所以这似乎有点毫无意义......有没有人使用 Selenium DSL 的页面对象模型？在同一个类中定义页面对象背后的想法是什么？如果我在测试类之外定义页面对象，怎么会出现编译器错误。难道我做错了什么？

我得到的编译器错误是：

预期 MySpec.this.type#Page，实际：MyPage

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T15:51:28.480

您可以像这样在测试类之外定义类：

```
class TwitterPage {
  val url = "http://twitter.com"
} 
```

然后，通过*混合*Page 特征在测试中使用它：

```
val page = new TwitterPage with Page
go to page
title should be ("Welcome to Twitter") 
```

这对我来说编译并工作得很好。

# javascript - 每次单击按钮时使表格中的数字上升

> ID：15574101
> 
> 赞同：0
> 
> 时间：2013-03-22T15:28:53.653
> 
> 标签：javascript, html, button

我对 HTML 和 JavaScript 很陌生，但我想知道是否有任何方法可以使文本框中的数值在每次按下按钮时增加一个。这需要对多个文本框进行，所以我想这可以用一个函数来完成。

```
<html>
<head>
function (add) {
function goes here
}
</head>
<input type="text">
<input type="button" value="Add One" onclick="add()">
</body>
</html> 
```

如果我的代码没有意义，我很抱歉，因为我不知道如何实现这一点。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:41:19.473

这很简单，真的。您的代码将需要以下元素：

*   按下按钮时调用的 Javascript 中的函数
*   一种获取文本框当前值的方法
*   一种将新值放回文本框中的方法

要引用页面中的特定元素，您需要给它一个 id。不要忘记给它一个默认值，无论是在代码中还是在 HTML 中，这样你就不会从一个空的文本框开始。例如：

```
<input type="text" value="0" id="textField"/> 
```

然后，您可以使用以下方法在 Javascript 中获取该文本字段的值：

```
var textField = document.getElementById( "textField" ); 
```

Javascript 变量`textField`现在包含对文本字段的引用，我们可以使用`textField.value`. `value`您还可以使用相同的变量写回内容。您还需要使用该`parseInt`函数将字段中的文本转换为数字，这样 Javascript 就不会只是尝试在其末尾添加字符“1”。

在`<HEAD>`页面的部分中，您将添加以下内容：

```
<script language="Javascript>
function handleButtonClick() {
    var textField = document.getElementById( "textField" );
    var currentValue = parseInt(textField.value);

    // Add one
    currentValue = currentValue + 1;

    // Put it back with the new +1'd value
    textField.value = currentValue;
}
</script> 
```

要在按下按钮时调用 Javascript 中的函数，您将使用事件处理程序，该事件处理程序会在浏览器中发生操作时向 Javascript 发出信号以运行特定的代码片段。在这种情况下，由于您希望在用户单击按钮时运行代码，因此您将使用`onClick`处理程序。您可以将其设置为脚本的一部分或在您的 HTML 代码中。在 Javascript 中执行它最终会更加健壮，但为简单起见，我将在 HTML 代码中执行它。

```
<input type="button" onClick="handleButtonClick()"/> 
```

就是这样。当您单击按钮时，假设您已正确连接它。

有关一些基本信息，请参阅[此页面](http://www.tizag.com/javascriptT/javascript-getelementbyid.php)[，](http://www.w3schools.com/js/js_htmldom_events.asp)有关可用于您的其他事件处理程序的一些基本信息，请参阅此页面。`getElementById`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:38:16.007

我会为此使用 jquery，所以你的 html 应该是这样的：

```
<input type="number" id="numbox">
<button type="button" id="button"> 
```

在您的 javascript 文件中添加一个事件处理程序：

```
$("#button").click(addOne); 
```

这意味着每当按下 id 为“button”的元素时，都会调用 addOne 函数。因此，从这里开始编写 addOne 函数，该函数获取数字文本框的值，将其加一，然后将文本框的值设置为新数字。

```
var addOneToEach = function() {
    $(":text").each(function(){
        var num = $(this).val();
        $(this).val(num + 1);
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T15:44:59.710

试试这个。

```
<script type="text/javascript">
function add() {
    var num = document.getElementById("mynum").value;
    if(num == '') num = 0;
    document.getElementById("mynum").value = parseInt(num ,10) + 1;
    }
</script>
<html>
<head>
function (add) {
function goes here
}
</head>
<div id='txt'></div>
<form action="" method="post">
<input type="text" id='mynum'>
<input type="button" onclick="add()">
</form>
</body>
</html> 
```

希望能帮到你

# java - jxl中的WritablewWorkbook.write()产生空0b的excel文件

> ID：15574104
> 
> 赞同：1
> 
> 时间：2013-03-22T15:28:59.050
> 
> 标签：java, jxl

我在这里做错了什么？JTextFields 的值是有效的，代码可以将结果打印到控制台。我在我的工作区中得到一个文件，但它的大小 = 0b 并显示一个空的电子表格。

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.IOException;

import javax.swing.JTextField;

import jxl.Cell;
import jxl.Sheet;
import jxl.Workbook;
import jxl.WorkbookSettings;
import jxl.format.CellFormat;
import jxl.read.biff.BiffException;
import jxl.write.Label;
import jxl.write.WritableCellFormat;
import jxl.write.WritableSheet;
import jxl.write.WritableWorkbook;
import jxl.write.WriteException;
import jxl.write.biff.RowsExceededException;

public class convertFileAction implements ActionListener {
    File _file;
    JTextField _filePath;
    JTextField _whichColumn;
    String _path;
    int _column;

    public convertFileAction(JTextField tfFilePath, JTextField tfWhichColumn) {
        _filePath = tfFilePath;
        _whichColumn = tfWhichColumn;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        _path = _filePath.getText();
        _file = new File(_path);
        _column = Integer.parseInt(_whichColumn.getText());
        _column = _column - 1;

        try {
            WorkbookSettings wbSettings = new WorkbookSettings();
            wbSettings.setUseTemporaryFileDuringWrite(true);
            Workbook workbook = Workbook.getWorkbook(_file);
            // System.out.println(""+_file.exists());
            Sheet sheet = workbook.getSheet(0);
            WritableWorkbook genWorkbook = Workbook.createWorkbook(new File(
                    "output.xls"));
            WritableSheet genSheet = genWorkbook.createSheet("Ad IDs", 0);
            Label headerIc = new Label(1, 1, "ifContexts");
            genSheet.addCell(headerIc);
            for (int i = 0; sheet.getCell(_column, i) != null; i++) {
                Cell c = sheet.getCell(_column, i);
                    CellFormat readFormat = c.getCellFormat();
                    WritableCellFormat writeFormat = new WritableCellFormat(
                            readFormat);
                    System.out.println(c.getContents());
                    String ifContext = c.getContents().toString();
                    Label labIfContext = new Label(1, i + 1, ifContext);
                    labIfContext.setCellFormat(writeFormat);
                    genSheet.addCell(labIfContext);
            }
            genWorkbook.write();
            workbook.close();
            genWorkbook.close();

        } catch (BiffException | IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (RowsExceededException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (WriteException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

    }

} 
```

我确实在控制台中收到了一个错误，但我不确定它是否相关。无论如何，这里是：

```
Exception in thread "AWT-EventQueue-1" jxl.common.AssertionFailed
    at jxl.common.Assert.verify(Assert.java:37)
    at jxl.biff.XFRecord.<init>(XFRecord.java:521)
    at jxl.write.biff.CellXFRecord.<init>(CellXFRecord.java:69)
    at jxl.write.WritableCellFormat.<init>(WritableCellFormat.java:96)
    at convertFileAction.actionPerformed(convertFileAction.java:54)
    at java.awt.Button.processActionEvent(Unknown Source)
    at java.awt.Button.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-17T07:45:38.510

尝试这个.....

```
 CellFormat readFormat = c.getCellFormat();
                System.out.println(c.getContents());
                String ifContext = c.getContents().toString();
                Label labIfContext = new Label(1, i + 1, ifContext);
                labIfContext.setCellFormat(readFormat);
                genSheet.addCell(labIfContext); 
```

# mod-rewrite - mod重写比较参数

> ID：15574105
> 
> 赞同：2
> 
> 时间：2013-03-22T15:29:04.803
> 
> 标签：mod-rewrite

我必须向 URL 添加一个参数，但前提是该参数尚未附加。

url: sub.mydomain.com final: sub.domain.com/sub 简单模式示例 -> (sub).mydomain.com/(sub)

如果 $1 != $2，我如何比较以应用以下规则：

```
RewriteCond %{HTTP_HOST} ^(.*?)\.(www\.)?mydomain\.com$ [NC]
RewriteRule ^.*$ http://%{HTTP_HOST}/%1%{REQUEST_URI} [PT,L] 
```

我的尝试不起作用

```
#RewriteCond %{HTTP_HOST} ^(?:www\.)?([^.]+).*?(?:[^/]+)?/(.*)?/ [NC]
#RewriteCond %1<->%2 !^$1<->$2 
```

# css - 新 ipod touch 5th gen 的媒体查询失败

> ID：15574106
> 
> 赞同：0
> 
> 时间：2013-03-22T15:29:06.973
> 
> 标签：css, media-queries, ipod-touch

**问题描述**

我想弄清楚新的 ipod touch 单元的宽度。我的 css 媒体查询在设备上失败了……出现的徽标很大。

我试着用谷歌搜索，发现了一些类似的文章： [http ://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

但到目前为止我没有尝试过任何工作。

**代码：**

这是我期望的媒体查询：

```
@media only screen and (max-width: 220px), only screen and (max-device-width: 480px) {} 
```

**到目前为止我已经尝试过：**

除了使用从 200 到 480 的最大宽度值之外，我还尝试使用 Firefox 中的响应式网页设计工具。当我使用此工具将视图大小更改为 320 x 480 时，会出现正确的徽标。但是当我使用我的 ipod 测试网站时，我得到了一个不同大小的徽标。

我还更改了查询，所以它看起来像：

```
@media (min-width: 320px) and (max-width: 480px) { 
```

或者

```
@media only screen and (max-device-width: 480px) { 
```

**附加问题**

您如何正确测试缓存问题？我试图确保在我的桌面上，我总是按 CTRL+F5 来刷新页面，但我不知道如何在我的 ipod 上做到这一点。这可能是问题吗？

我不确定我做错了什么。任何建议，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T19:42:03.220

我在未加载的徽标之后添加了 !important 关键字，现在它可以工作了。所以看起来我的特异性有问题。要去追捕那个

# .net - 如何使用 LINQ to SQL 类在 .NET 4 中的动态数据站点中实现搜索

> ID：15574117
> 
> 赞同：0
> 
> 时间：2013-03-22T15:29:38.100
> 
> 标签：.net, c#-4.0, asp.net-dynamic-data

我刚刚创建了一个默认动态数据​​站点。如何添加搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:29:38.100

您可以通过执行以下操作来添加搜索功能。

首先使用以下代码将 UI 添加到 List.aspx 页面

```
<fieldset id="MultiSearchFieldSet" class="DD" runat="server" visible="False">
 <asp:TextBox ID="txbMultiColumnSearch" CssClass="DDTextBox" runat="server" />
    <asp:Button ID="btnMultiColumnSearchSubmit" CssClass="DDControl" runat="server" Text="Search"
        OnClick="btnMultiColumnSearch_Click" />
    <asp:Button ID="btnMultiColumnSearchClear" CssClass="DDControl" runat="server" Text="Clear"
        OnClick="btnMultiColumnSearch_Click" />
</fieldset> 
```

接下来，我们要为 Button 添加代码隐藏，所以 List.aspx.cs 向下到

```
protected void btnMultiColumnSearch_Click(object sender, EventArgs e)
        {
        } 
```

并将其更改为

```
 protected void btnMultiColumnSearch_Click(object sender, EventArgs e)
        {
            var button = (Button)sender;
            if (button.ID == btnMultiColumnSearchClear.ID)
                txbMultiColumnSearch.Text = String.Empty;
            else
                using (PhoneListDataContext Data = new PhoneListDataContext())
                {
                    EmployeeNameString = txbMultiColumnSearch.Text;
                    var SearchResults = Data.Employees.Where
                       (Employee => (Employee.FirstName.Contains(EmployeeNameString) || (Employee.LastName.Contains(EmployeeNameString))));

                    GridView1.DataSourceID = ""; 
                    GridView1.DataSource = SearchResults;
                    GridView1.DataBind();

                }
        } 
```

最后，因为我们只搜索“Employees”表，我想过滤搜索框的可见性只对员工表。

所以我将此代码添加到**受保护的 void Page_Load**中的**List.aspx.cs**

 **```
 if (table.DisplayName == "Employees") { MultiSearchFieldSet.Visible = true; }     
            else
            { MultiSearchFieldSet.Visible = false; }; 
```

现在该页面是可搜索的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-12-27T14:54:09.820

***更简单的解决方案***

*   为您的 mything -table 创建文件夹，注意 DynamicData-system 使用您的表格的复数名称（mything ---> mythings）
    *   DynamicData\CustomPages\mythings\
*   将 DynamicData\PageTemplates\List.aspx 复制到 DynamicData\CustomPages\mythings\
*   编辑 DynamicData\CustomPages\mythings\List.aspx

**更改此行：**

```
 <h2 class="DDSubHeader"><%= table.DisplayName%></h2> 
```

对此：

```
<h2 class="DDSubHeader"><%= table.DisplayName%></h2>
 <!-- Custom: 
    - Added SearchTextBox and SearchButton. 
        - Attention: Requires SearchExpression to work, 
        see next Custom -comment later in this page. 
--> 
<table>
    <tr>
        <td>
            <asp:TextBox ID="SearchTextBox" runat="server" />
        </td>
        <td>
            <asp:Button ID="SearchButton" runat="server" Text="Search" />
        </td>
        <td>
            <div class="DDBottomHyperLink">
                <a  href="<%= HttpContext.Current.Request.Url.AbsoluteUri %>">Clear search filter</a>
            </div>
        </td>
    </tr>
</table>
<!-- Custom ends --> 
```

**更改查询扩展器**

由此：

```
 <asp:QueryExtender TargetControlID="GridDataSource" ID="GridQueryExtender" runat="server">
            <asp:DynamicFilterExpression ControlID="FilterRepeater" />
        </asp:QueryExtender> 
```

对此：

```
 <!-- Custom: edit QueryExtender --> 
        <asp:QueryExtender TargetControlID="GridDataSource" ID="GridQueryExtender" runat="server">
            <asp:DynamicFilterExpression ControlID="FilterRepeater" />
               <asp:SearchExpression SearchType="Contains" DataFields="myfirstfield,mysecondfield,myNthfield" >
               <asp:ControlParameter ControlID="SearchTextBox" />
            </asp:SearchExpression>
        </asp:QueryExtender>
        <!-- Custom ends --> 
```

***请注意***将*myfirstfield、mysecondfield、myNthfield更改为您的***神话**表中的文本字段名称。**

# java - 如何在我的 MVC 模式程序中更新我的表

> ID：15574119
> 
> 赞同：1
> 
> 时间：2013-03-22T15:29:38.317
> 
> 标签：java, multithreading, model-view-controller, user-interface, observer-pattern

我创建了一个使用 MVC 架构版本的程序。该代码的目的是抓取网页列表的 h1 标题并将结果返回到 JTable。

到目前为止，我的程序运行良好。它按照我想要的方式返回结果，但直到最后它才会更新表格。我希望它在结果出现时更新表格。我想以一种在我刚刚学习时考虑到最佳实践原则的方式来做到这一点。

我假设要根据需要更新它，我将不得不稍微更改我的代码。我不确定动态更新 GUI 的最佳方式（线程、观察者，还是其他东西？）。我什至不确定“这段代码应该放在我的 MVC 模式中的哪个位置？”这个问题。说得通？

无论如何，这是我的观点：

```
public class SearchView extends JFrame{
//Components
private JLabel selectElementLabel = new JLabel("Element Selector:");
private JTextField selectElement = new JTextField("h1");;
private JComboBox<String> selectLocale; 

private DefaultTableModel tableModel = new DefaultTableModel();
private JTable resultTable = new JTable(tableModel);

private JLabel statusLabel;
private JButton runButton = new JButton("Run");
private JButton clearButton = new JButton("Clear");

private SearchModel s_model;

//Constructor
public SearchView(SearchModel model) {
    //Set the Logic here(model)
    s_model = model;    

    //Initialise Components here(model)
    selectLocale = new JComboBox<>(s_model.getLocales());
    selectLocale.setSelectedIndex(13);

    //Layout Components
    JPanel userInputPanel = new JPanel();
    userInputPanel.setLayout(new BoxLayout(userInputPanel, BoxLayout.X_AXIS));
    userInputPanel.add(selectElementLabel);
    userInputPanel.add(selectElement);
    userInputPanel.add(selectLocale);

    tableModel.addColumn("Page");
    tableModel.addColumn("Data");
    resultTable.setFillsViewportHeight(true);

    JScrollPane resultScroller = new JScrollPane(resultTable);
    resultScroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
    resultScroller.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);
    resultScroller.setAlignmentX(Component.LEFT_ALIGNMENT);

    JPanel controlButtons = new JPanel();
    controlButtons.setLayout(new FlowLayout(FlowLayout.RIGHT));
    controlButtons.add(statusLabel = new JLabel(s_model.getState()));
    controlButtons.add(clearButton);
    controlButtons.add(runButton);

    this.setTitle("Element Searcher");
    this.add(BorderLayout.NORTH, userInputPanel);
    this.add(BorderLayout.CENTER, resultScroller);
    this.add(BorderLayout.SOUTH, controlButtons);
    this.setExtendedState(Frame.MAXIMIZED_BOTH); 
    this.setMinimumSize(new Dimension(900, 600));
    this.setVisible(true);  
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);        
}

void reset(){
    tableModel.setRowCount(0);
}

String getSelectedElement(){
    return selectElement.getText();
}

String getSelectedLocale(){
    return selectLocale.getSelectedItem().toString();
}

void setResults(Object[] result){
    tableModel.addRow(result);
}

void addRunListener(ActionListener run){
    runButton.addActionListener(run);
}

void addClearListerner(ActionListener clear){
    clearButton.addActionListener(clear);
}

} 
```

控制器：

```
public class SearchController {

private SearchModel s_model;
private SearchView s_view;

public SearchController(SearchModel model, SearchView view) {
    s_model = model;
    s_view = view;

    s_view.addRunListener(new RunListener());
    s_view.addClearListerner(new ClearListener());

}

class RunListener implements ActionListener{
    public void actionPerformed(ActionEvent e){
        String selectedLocale = null;
        try {
            selectedLocale = s_view.getSelectedLocale();
            s_model.setPageList(selectedLocale);
            for (String pageUrl : s_model.getPageList()){
                s_view.setResults(s_model.getResults(pageUrl));
            }
        } catch (Exception e1) {
            System.out.println(e1);
        }
    }
}

class ClearListener implements ActionListener{
    public void actionPerformed(ActionEvent e){
        s_model.reset();
        s_view.reset();
    }
}

} 
```

最后是我的模型：

```
public class SearchModel {
//Constants
private static final String[] localeStrings = { "cs-cz", "da-dk", "de-at", "de-ch", "de-de", "el-gr", "en-ae", "en-au", "en-ca", "en-gb", "en-ie", "en-in", "en-nz", "en-us", "en-za", "es-cl", "es-co", "es-es", "es-mx", "fi-fi", "fr-be", "fr-ca", "fr-ch", "fr-fr", "hu-hu", "it-it", "ja-jp", "ko-kr", "nb-no", "nl-be", "nl-nl", "pl-pl", "pt-br", "pt-pt", "ru-ru", "sk-sk", "sv-se", "zh-hk", "zh-sg", "zh-tw" };
private static final String INITIAL_STATE = "idle";
private HashSet<String> pageList;
private Object[] scrapeResult;
private String locale = "en-us";

//Search State
private String searchState;

public SearchModel() {
    reset();
}

public void setPageList(String loc){
    locale = loc;
    ScrapeXML scraper = new ScrapeXML(locale);
    pageList = scraper.getUrls();
}

public void setResults(String page){
    ScrapeElements scraper = new ScrapeElements(page, locale);
    scrapeResult = scraper.getResults();
}

public void reset(){
    searchState = INITIAL_STATE;
}

public String[] getLocales(){
    return localeStrings;
}

public String getState(){
    return searchState;
}

public HashSet<String> getPageList(){
    return pageList;
}

public Object[] getResults(String page){
    setResults(page);
    return scrapeResult;
}

} 
```

如果您对代码本身有任何意见或建议，请告诉我！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:09:17.933

如果没有双重调度，你就无法真正实现 MVC，这也称为侦听器模式。对于模型，您需要添加

```
 public void addListener(ModelListener listener) {
 } 
```

和（所以当“你的”模型发生变化时，你可以停止收听旧模型）

```
 public void removeListener(ModelListener listener) {
 } 
```

因此您可以让几乎未知的对象添加自己以接收模型更新，这些更新通常通过“侦听器”接口传递。

```
 public interface ModelListener {

   public void modelChanged(ModelChangeEvent event);

 } 
```

ModelChangeEvent 通常类似于

```
 public class ModelChangeEvent {

   private Model source;

   public ModelChangeEvent(Model source, <possibly other fields here>) {
     this.source = source;
   }

   public Model getSource() {
     return source;
   }
 } 
```

有了这个，听众可以像这样

```
 public ModelView implements ModelListener {

  ... stuff ...

   public void modelChanged(ModelChangeEvent event) {
     if (event.getSource() == model) {
       // this is my model!
       name = model.getName();
       age = model.getAge();
       ... and any other updates that this listener cares about ...
     }
   } 
```

监听器在更改处理程序中的行为有一定的灵活性，最重要的部分是灵活性包含在监听器的范围内，模型现在基本上可以忽略*正在*监听的内容，只关注*谁*在监听

```
 ... in the model class ...

  private void notifyListeners() {
    ModelChangeEvent event = new ModelChangeEvent(this);
    for (ModelListener listener : listeners) {
      listener.modelChanged(event);
    }
  } 
```

同样，通知侦听器的方式有很大程度的灵活性，但*关键*是当模型中可观察到的“元素”发生变化时，所有侦听对象都应该收到调用。它通常放在私有方法中的原因是因为它使重用模型变得更加容易，就像这样

```
 ... in the model class ...
  public void setName(String name) {
    this.name = name;
    notifyListeners();
  } 
```

并且在每个听力课程中，它可能会（或可能不会）读出名称，具体取决于它所显示的内容。

```
 ... in a name and age sensitive listening class ...
   public void modelChanged(ModelChangeEvent event) {
     if (event.getSource() == model) {
       name = model.getName();
       age = model.getAge();
     }
   }

  ... in a name insensitive listening class ...
   public void modelChanged(ModelChangeEvent event) {
     if (event.getSource() == model) {
       // this is my model!
       age = model.getAge();
     }
   } 
```

一旦你有了这样的东西，你的视图应该听你的模型，所以控制器不必对模型的可观察“元素”进行某种轮询，并结合定期刷新视图感兴趣的表示项目。

是的，这意味着您的视图通常在您的模型中有数据的副本，这是一件好事；因为，如果您决定需要修改演示文稿，您就有一份数据要修改。在“名称显示”视图中，您可能希望强制使用一致的大小写，如下所示

```
 ... in a name and age sensitive listening class ...
  ... note that _name_ is the name in the _view_ not the model! ...
   public void modelChanged(ModelChangeEvent event) {
     if (event.getSource() == model) {
       name = capitalize(model.getName());
       age = model.getAge();
     }
   } 
```

现在您的模型和视图将始终保持同步。这大大简化了控制器代码，现在它只需要处理命令。对于每个命令，它可能会执行以下一项（或多项）：

1.  调用模型中的方法（视图将自动更新）。
2.  Lookup and switch a view's model (like a button for "next customer", don't destroy the view, just set the view's model). This requires writing a `setModel(Model)` method in the View.
3.  Create or destroy views (possibly setting their models).

# jquery - 如何同时摆脱 for ... 每个循环和方法？

> ID：15574121
> 
> 赞同：0
> 
> 时间：2013-03-22T15:29:39.720
> 
> 标签：jquery, foreach, escaping, exit

我正在使用下面的代码，迭代选择选项。我检查了选项值是否已经输入。它从 for-each 中逃脱，但不从方法中退出。

```
yeniIlacBagla_ilacBagla: function(){
    $("#bagliIlaclar > option").each(function(){
        if(this.value===$("#baglanacakIlacID").val()){
            alert($("#baglanacakIlacAdi").val()+'\n adlı ilaç zaten bağlıdır!'); 
            return;
        }else{
            $("#bagliIlaclar").append($('<option></option>').val($("#baglanacakIlacID").val()).html($("#baglanacakIlacAdi").val()));
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T15:33:38.353

根据[jquery 的文档，](http://api.jquery.com/jQuery.each/)我发现以下内容

> **我们可以通过使回调函数返回 false**来在特定迭代中打破 $.each() 循环。返回非 false 与 for 循环中的 continue 语句相同；它将立即跳到下一次迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:34:23.687

从[http://api.jquery.com/each/](http://api.jquery.com/each/)的文档：

> 您可以通过返回从回调函数中停止循环`false.`

# postgresql - 我可以使用本地 C 盘作为服务器吗

> ID：15574125
> 
> 赞同：-4
> 
> 时间：2013-03-22T15:30:01.337
> 
> 标签：postgresql

我刚刚下载了 postgresql，我想在 pgAdmin 中添加一个服务器。出于学习目的，我如何连接到测试数据库，或者在本地 C 驱动器上创建一个并将其用作服务器？或者这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:32:10.370

是的，您可以在 C 盘上本地运行 PostgreSQL。只需安装 PostgreSQL，在 pgAdmin 中应该有一个“搜索数据库实例”功能。使用它，您的本地安装应该会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:34:50.040

如果它是用于测试目的，那很好，但只要确保服务器在网络上不可见（设置一些密码），特别是如果您使用公共 wifi！

# mercurial - 处理事先签入时意外遗漏的文件的最佳方法？

> ID：15574130
> 
> 赞同：0
> 
> 时间：2013-03-22T15:30:09.000
> 
> 标签：mercurial

处理这种情况的最佳方法是什么？“哎呀，我忘记在上次签到时包含几个文件”。. . ? 而不是用评论“糟糕，忘记这些文件”来跟进它。. . ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:11:35.693

**如果错误的提交已经被推送或拉到任何地方，则不应使用这些；他们重写历史并且在发布重写的提交时会引起问题。**

这两种解决方案都假设您没有进行任何干预提交。

取决于您是否正在运行足够新的 Mercurial 版本：

```
hg add <missing files>
hg commit --amend 
```

我不确定它是在哪个版本中引入的，顺便说一句。

替代`amend`方案是`rollback`：

```
hg rollback
hg add <missing files>
hg commit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:02:47.527

如果使用 mercurial 2.2 或更高版本，您可能应该使用 amend 标志`hg commit --amend`。从帮助：

> --amend 标志可用于使用新提交修改工作目录的父级，该提交包含父级中的更改，以及当前由 hg status 报告的更改（如果有的话）。旧的提交存储在 .hg/strip-backup 的备份包中（参见 hg help bundle 和 hg help unbundle 了解如何恢复它）。

否则，您可以使用回滚（不推荐，因为您正在重写历史记录）`hg rollback`：

> 应谨慎使用此命令。只有一级回滚，没有办法撤消回滚。它还将恢复上次事务时的 dirstate，丢失自那时以来的任何 dirstate 更改。此命令不会更改工作目录。

或使用`hg backout`：

> 在当前工作目录中准备一个具有 REV 撤消效果的新变更集。如果 REV 是工作目录的父目录，那么这个新的变更集会自动提交。否则， hg 需要合并更改并且合并的结果未提交。

# google-app-engine - GAE 数据上传（种子和备份/恢复）

> ID：15574131
> 
> 赞同：0
> 
> 时间：2013-03-22T15:30:15.663
> 
> 标签：google-app-engine, google-cloud-datastore, database-backups

由于 GAE 平台的频繁变化，我阅读了不同的文章并且有点困惑在 2013 年导出/上传数据的最佳方式是什么。批量上传工具并不是真正适用于高复制存储根据[文档](https://developers.google.com/appengine/docs/python/tools/uploadingdata)。

> 本文档适用于使用主/从数据存储的应用程序。如果您的应用使用 High Replication 数据存储，则可以从应用复制数据，但 Google 目前不支持此用例。

请评论以下具体场景。我打算使用 golang 运行时，但希望这不会影响备份/恢复。

1.  如何使用初始（种子/测试）数据加载数据存储。说，我可以以管理员身份登录，然后需要将数据从 csv/json 文件加载到数据存储区到命名空间。

2.  [数据存储区管理员](https://developers.google.com/appengine/docs/adminconsole/datastoreadmin)：我认为这个实验性功能是用于备份/恢复的。它适用于 GO 运行时吗？存储备份文件的格式。我可以用 json 做吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T02:27:16.433

我在 AppEngine 上运行了一些应用程序，根据我的经验，最初使用现有数据填充数据库的最简单方法是将 .json 文件与您的应用程序文件一起包含，然后使用：

```
with open( 'yourdata.json', 'r') as file :
    data = json.loads( file.read() ) 
```

获取您的数据，然后重新创建必要的数据库实体。您可以在下次上传应用程序时删除 .json 文件，因为不再需要这些文件。

关于备份，有 Datastore Admin，它允许您创建备份并将它们存储到`BlobStore`或其他一些云空间，但我发现它们真的不方便再次下载和重新上传 - 有几十个不同的文件，很容易忘记或错过一些东西。

因此，我建议您编写自己的备份例程，也将您的数据保存到`BlobStore`, 但在一个文件中，这样您就可以轻松下载并重新上传，而不必担心丢失/忘记文件。

备份文件的创建将非常简单——打开`BlobStore`文件进行写入，然后迭代您的模型并将它们转换为 .json 并写入（可选地使用 (g)zip 动态压缩）到`BlobStore`文件。

# javascript - Highcharts - 强制绘图线消耗可用宽度？

> ID：15574134
> 
> 赞同：1
> 
> 时间：2013-03-22T15:30:24.977
> 
> 标签：javascript, jquery, highcharts

我们的设计师要求我们的堆积面积图被渲染成绘图线占用 100% 的可用图表宽度，而不是在第一个/最后一个刻度线处开始/停止。这是我们的设计师提供的模型，说明了我们正在努力实现的目标：

[http://oi50.tinypic.com/25s2bzm.jpg](http://oi50.tinypic.com/25s2bzm.jpg)

目前图表呈现如下，注意绘图线不占用图表的宽度：

[http://jsfiddle.net/8pmVK/](http://jsfiddle.net/8pmVK/)

```
$(function () {
var chart;
$(document).ready(function() {
    Highcharts.setOptions({
        colors: ['#1FA5FF', '#9BD237', '#E6673B']
    });
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'area'
        },
        title: {
            text: null
        },
        exporting: {
            enabled: false
        },
        legend: {
            enabled: false
        },
        credits: {
            enabled: false
        },
        xAxis: {
            categories: ['Mar 2012', 'Apr 2012', 'May 2012', 'Jun 2012', 'Jul 2012', 'Aug 2012', 'Sep 2012'],
            tickmarkPlacement: 'on',
            title: {
                enabled: false
            }
        },
        yAxis: {
            title: {
                text: null
            }
        },
        plotOptions: {
            area: {
                fillOpacity: 0.3,
                stacking: 'normal',
                lineWidth: 3,
                marker: {
                    lineWidth: 3,
                    enabled: false
                }
            }
        },
        series: [{
            name: 'John',
            data: [30, 26, 18, 35, 30, 28, 40, 31]
        }, {
            name: 'Jane',
            data: [40, 35, 37, 33, 30, 42, 30, 26]
        }, {
            name: 'Bob',
            data: [26, 33, 28, 20, 35, 33, 35, 20]
        }]
    });
}); 
```

我查看了 API 并四处搜索，但我没有找到（或可能错过）我必须设置哪个选项来实现这一点，假设它甚至是可能的。提前感谢您的帮助。

**更新：**解决方案是设置 xAxis 的 min 和 max 属性，所以我更新了上面的内容以反映这一点。然而，这会截断图表数据，因为它排除了第一个和最后一个数据点，因此为了解决这个问题，我将虚拟值添加到类别和 series.data 数组中，并注意数据是我通过 Ajax 返回的对象构建图表：

```
data.categories.unshift('');
data.categories.push('');
for (var i = 0, len = data.series.length; i < len; i++) {
    data.series[i].data.unshift(0);
    data.series[i].data.push(0);
} 
```

然后将 xAxis 上的最小值/最大值设置如下：

```
xAxis: {
    min: 1,
    max: data.categories.length - 2 // 2nd to last index
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:37:32.487

您需要为您的 xAxis 找到正确的最小值/最大值。在您的示例中：

```
xAxys: {
 ...
 min: 1,
 max: 5
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T20:30:17.857

您可以在最小值和最大值中使用小数。

在您的情况下，最小 0.5 和最大 6.5 似乎可以解决问题：http: [//jsfiddle.net/jlbriggs/8pmVK/2/](http://jsfiddle.net/jlbriggs/8pmVK/2/)

```
min:0.5,
max:6.5, 
```

使用整数总是会留下空格或截断。如果需要，这可以通过调用 getExtremes()、相应地调整最小值和最大值以及调用 setExtremes() 来动态完成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-26T21:23:38.893

我确信上述项目已经完成，但也可以使用 Highstocks 代替 Highcharts（相同的许可证）并添加一个滚动条，如下所示：[ [http://jsfiddle.net/8pmVK/]](http://jsfiddle.net/8pmVK/])。

```
 scrollbar: {
            enabled: true
        }, 
```

此外，Highstock 包括 Highcharts 的所有功能。

# php - 在页脚中的小部件中获取帖子标题

> ID：15574135
> 
> 赞同：0
> 
> 时间：2013-03-22T15:30:31.233
> 
> 标签：php, wordpress

如何在页脚中的小部件中获取当前帖子标题？我假设循环将不可用。

我在简码中尝试了 get_the_title() 。当我在小部件中输入简码时，我看到的是简码文字而不是输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:54:40.527

我假设您正在谈论 WordPress 主题页脚...因此，如果您在帖子中（single.php），它将按预期工作：

$x = get_the_title(); // 为 $x 分配文章标题值

标题（）; // 直接回显标题

# git - git结账重载

> ID：15574136
> 
> 赞同：0
> 
> 时间：2013-03-22T15:30:33.197
> 
> 标签：git, git-checkout

TL;DR 如果分支名称相同，我无法使用 git checkout 还原文件。

* * *

当我发现一个有趣的问题时，我正在处理我的 GIT 存储库。我们有一个名为“build-upload”的分支，我们正在其中创建一个新的“上传”功能。我们还有一个名为“bin/build-upload”的文件，它是一个脚本，用于构建项目并将其上传到生产环境。

问题是我在“bin/”目录并修改了“build-upload”文件，我想恢复它。所以我输入

```
git checkout build-upload 
```

结果是

```
amatiasq:~/repo/bin$ git checkout build-upload
M   bin/build-upload
Switched to branch 'build-upload' 
```

我没有注意到结果，继续工作，却没有意识到我在另一个分支。幸运的是，在我提交新更改之前，我看到“bin/build-upload”已被修改，这导致我发现我切换了分支。

问题是。有没有办法防止这种歧义？如果我想切换分支或恢复文件，我如何在“结帐”时告诉 git？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T15:41:53.097

根据`git help checkout`，命令行中 a 之后的所有内容都`--`将被解释为路径，而不是分支或标签。所以，这可能应该做你需要的：

```
git checkout -- build-upload 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T15:42:15.410

您必须在路径部分之前放置一个“--”以消除分支名称的歧义。

```
git checkout <branch> -- <paths..> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T15:44:19.317

您可以`git checkout ./build-upload`确保将`build-upload`其视为文件名。这类似于经典的 Unix 技巧，例如消除由 option`rm ./-r`命名的文件的歧义。`-r``-r`

# objective-c - 自动布局约束抛出异常

> ID：15574138
> 
> 赞同：0
> 
> 时间：2013-03-22T15:30:34.840
> 
> 标签：objective-c, exception, constraints, autolayout, nslayoutconstraint

我正在加载到表格视图单元格中的字段上使用自动布局。对于每个单元格，我从 contentView 中清除所有子视图，并根据我需要的字段类型加载我自己的视图。大多数细胞都很好，但是当这个细胞出现时，我得到了一个例外。

这是单元格的代码：

```
UILabel *questionText = [[UILabel alloc] init];
questionText.text = self.field.questionText;
questionText.font = font;
questionText.numberOfLines = 0;
questionText.adjustsFontSizeToFitWidth = NO;
questionText.lineBreakMode = NSLineBreakByWordWrapping;
[questionText setTranslatesAutoresizingMaskIntoConstraints:NO];
[self.contentView addSubview:questionText];

UIView *listContainer = [[UIView alloc] init];
listContainer.backgroundColor = [UIColor whiteColor];
listContainer.layer.cornerRadius = 8;
listContainer.layer.borderWidth = 1.0;
[listContainer setTranslatesAutoresizingMaskIntoConstraints:NO];
[self.contentView addSubview:listContainer];

// Get the views dictionary
NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(questionText, listContainer);

//Create the constraints using the visual language format
NSString *format = @"V:|-10-[questionText]-10-[listContainer]-10-|";
NSArray *constraintsArray = [NSLayoutConstraint constraintsWithVisualFormat:format options:NSLayoutFormatAlignAllLeft metrics:nil views:viewsDictionary];
[self.contentView addConstraints:constraintsArray];

format = @"|-10-[questionText]-10-|";
constraintsArray = [NSLayoutConstraint constraintsWithVisualFormat:format options:NSLayoutFormatAlignAllLeft metrics:nil views:viewsDictionary];
[self.contentView addConstraints:constraintsArray];

format = @"|-10-[listContainer]-10-|";
constraintsArray = [NSLayoutConstraint constraintsWithVisualFormat:format options:NSLayoutFormatAlignAllLeft metrics:nil views:viewsDictionary];
[self.contentView addConstraints:constraintsArray];

ToggleButton *prevCheckbox;
ToggleButton *checkbox;

for (AssessmentAnswer *answer in self.field.answers)
{
    checkbox = [[ToggleButton alloc] initWithText:answer.text ofType:ToggleButtonTypeCheckbox];
    [checkbox setTranslatesAutoresizingMaskIntoConstraints:NO];
    [listContainer addSubview:checkbox];

    viewsDictionary = NSDictionaryOfVariableBindings(checkbox);
    format = @"|-10-[checkbox]-10-|";
    constraintsArray = [NSLayoutConstraint constraintsWithVisualFormat:format options:NSLayoutFormatAlignAllCenterY metrics:nil views:viewsDictionary];
    [listContainer addConstraints:constraintsArray];

    if (prevCheckbox)
    {
        // This is not the first item
        [listContainer addConstraint:[NSLayoutConstraint constraintWithItem:checkbox attribute:NSLayoutAttributeTop relatedBy:NSLayoutRelationEqual toItem:prevCheckbox attribute:NSLayoutAttributeBottom multiplier:1.0 constant:20.0]];
    }
    else
    {
        // This is the first item
        [listContainer addConstraint:[NSLayoutConstraint constraintWithItem:checkbox attribute:NSLayoutAttributeTop relatedBy:NSLayoutRelationEqual toItem:listContainer attribute:NSLayoutAttributeTop multiplier:1.0 constant:10.0]];
    }

    prevCheckbox = checkbox;
}

if (checkbox)
{
    // This is the last checkbox
    [listContainer addConstraint:[NSLayoutConstraint constraintWithItem:listContainer attribute:NSLayoutAttributeBottom relatedBy:NSLayoutRelationEqual toItem:checkbox attribute:NSLayoutAttributeBottom multiplier:1.0 constant:10.0]];
} 
```

在这种情况下， 中只有一项`self.field.answers`。字体与下面使用的值相同。

这是单元格高度的代码：

```
UIFont *font = [UIFont fontWithName:@"Helvetica" size:14.0];

//Find height of question text
CGFloat questionTextHeight = [field.questionText sizeWithFont:font constrainedToSize:CGSizeMake(width - (2 * PAD_X), CGFLOAT_MAX) lineBreakMode:NSLineBreakByWordWrapping].height;

//Find height of each row
CGFloat listHeight = 0.0;

for (AssessmentAnswer *answer in field.answers)
{
    listHeight += MAX([answer.text sizeWithFont:font constrainedToSize:CGSizeMake(width - 43.0 - [ToggleButton getImageWidth], CGFLOAT_MAX) lineBreakMode:NSLineBreakByWordWrapping].height, [ToggleButton getImageHeight]) + 20.0;
}

// Question text height + list height + spacers
return questionTextHeight + listHeight + 30.0; 
```

下面是创建 ToggleButton 内部的代码，它是一个 UIButton：

```
for (UIView *subview in self.subviews)
{
    [subview removeFromSuperview];
}

// Add the toggle button image
self.toggleImgView = [[UIImageView alloc] init];
[self.toggleImgView setTranslatesAutoresizingMaskIntoConstraints:NO];
[self addSubview:self.toggleImgView];

// Add the label
self.toggleLabel = [[UILabel alloc] init];
self.toggleLabel.font = [UIFont fontWithName:@"Helvetica" size:14.0f];
self.toggleLabel.numberOfLines = 0;
self.toggleLabel.adjustsFontSizeToFitWidth = NO;
self.toggleLabel.lineBreakMode = NSLineBreakByWordWrapping;
self.toggleLabel.backgroundColor = [UIColor clearColor];
[self.toggleLabel setTranslatesAutoresizingMaskIntoConstraints:NO];
[self addSubview:self.toggleLabel];

// Get the views dictionary
NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(_toggleImgView, _toggleLabel);

//Create the constraints using the visual language format
NSString *format = [NSString stringWithFormat:@"|-0-[_toggleImgView(%f)]-3-[_toggleLabel]-0-|", IMAGE_WIDTH];
NSArray *constraintsArray = [NSLayoutConstraint constraintsWithVisualFormat:format options:nil metrics:nil views:viewsDictionary];
[self addConstraints:constraintsArray];

viewsDictionary = NSDictionaryOfVariableBindings(_toggleLabel);
format = [NSString stringWithFormat:@"V:|-0-[_toggleLabel(>=%f)]-0-|", IMAGE_HEIGHT];
constraintsArray = [NSLayoutConstraint constraintsWithVisualFormat:format options:NSLayoutFormatAlignAllLeft metrics:nil views:viewsDictionary];
[self addConstraints:constraintsArray];

[self addConstraint:[NSLayoutConstraint constraintWithItem:self.toggleImgView attribute:NSLayoutAttributeHeight relatedBy:NSLayoutRelationEqual toItem:self.toggleImgView attribute:NSLayoutAttributeWidth multiplier:1.0 constant:0.0]];

[self addConstraint:[NSLayoutConstraint constraintWithItem:self.toggleImgView attribute:NSLayoutAttributeCenterY relatedBy:NSLayoutRelationEqual toItem:self.toggleLabel attribute:NSLayoutAttributeCenterY multiplier:1.0 constant:0.0]]; 
```

这是我得到的异常读数：

```
Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: 
(1) look at each constraint and try to figure out which you don't expect; 
(2) find the code that added the unwanted constraint or constraints and fix it. 
(Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, 
refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSLayoutConstraint:0x1f28c4f0 V:[UILabel:0x1f288f10(>=27)]>",
    "<NSLayoutConstraint:0x1f291460 V:[ToggleButton:0x1f068e50]-(10)-|   (Names: '|':UIView:0x1f0182a0 )>",
    "<NSLayoutConstraint:0x1f293830 V:[UILabel:0x1f288f10]-(0)-|   (Names: '|':ToggleButton:0x1f068e50 )>",
    "<NSLayoutConstraint:0x1f28b480 V:|-(10)-[UILabel:0x1f062890]   (Names: '|':UITableViewCellContentView:0x1f1c23d0 )>",
    "<NSLayoutConstraint:0x1f29b070 V:|-(10)-[ToggleButton:0x1f068e50]   (Names: '|':UIView:0x1f0182a0 )>",
    "<NSLayoutConstraint:0x1f289810 V:[UIView:0x1f0182a0]-(10)-|   (Names: '|':UITableViewCellContentView:0x1f1c23d0 )>",
    "<NSLayoutConstraint:0x1f292eb0 V:|-(0)-[UILabel:0x1f288f10]   (Names: '|':ToggleButton:0x1f068e50 )>",
    "<NSLayoutConstraint:0x1f28dc90 V:[UILabel:0x1f062890]-(10)-[UIView:0x1f0182a0]>",
    "<NSAutoresizingMaskLayoutConstraint:0x1f1e5ed0 h=--& v=--& V:[UITableViewCellContentView:0x1f1c23d0(60)]>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x1f293830 V:[UILabel:0x1f288f10]-(0)-|   (Names: '|':ToggleButton:0x1f068e50 )>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful. 
```

我不明白为什么我会得到例外，因为所有的高度都加起来了。这种情况发生在其他一些细胞类型上，因此任何见解都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:45:53.627

错误消息告诉您它不能满足要求 ToggleButton 内的 UILabel 高度大于或等于 27 的约束。大概在布局过程中的某个时刻，在保持您制定的其他垂直间距规则的同时，没有空间这样做。

有趣的是，我实际上并没有在您的代码中*看到*关于 UILabel 高度的约束；也许您将其设置在笔尖中？如果是这样，请尝试降低其优先级，或者为它设置一个插座并在笔尖加载后将其移除。从这里开始有点神秘，因为您没有解释 ToggleButton 是什么。但它内部似乎肯定有一个 UILabel，而 UILabel 肯定似乎有一个高度不等式，这是造成问题的原因。

# java - 在 Tomcat 上运行 SolrCloud 时出现 FileNotFoundException

> ID：15574139
> 
> 赞同：0
> 
> 时间：2013-03-22T15:30:38.747
> 
> 标签：java, tomcat, solr, apache-zookeeper

我有一个在 Tomcat 7.0 容器下运行的 Solr 4.2.0 服务器。我正在尝试将它与我的外部 zookeeper 连接（实际上，它也不适用于嵌入式 zookeeper）。

我试过这个java opts：

```
-Dbootstrap_confdir=./solr/collection1/conf 
-Dcollection.configName=myconf
-DzkRun
-DnumShards=2 
```

用于运行嵌入式 Zookeeper。

而且这个java选择：

```
-Dbootstrap_confdir=./solr/collection1/conf 
-Dcollection.configName=myconf
-DzkHost=localhost:2181
-DnumShards=2 
```

用于连接外部 Zookeeper

在这两种情况下，我都会继续遇到相同的异常：

```
java.io.FileNotFoundException: File '.\solr\collection1\conf \admin-extra.html' does not exist 
```

但问题是文件 admin-extra.html 存在并且它就在这里。而且我无法弄清楚问题是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:06:29.360

*从您的异常来看，您的路径似乎在配置*目录之后有一个空格。尝试在“”之间定义您的**bootstrap_configdir**，例如：

```
-Dbootstrap_confdir="./solr/collection1/conf" 
```

# jquery - jQuery 触发音频

> ID：15574140
> 
> 赞同：0
> 
> 时间：2013-03-22T15:30:39.177
> 
> 标签：jquery, html

这段代码有什么问题吗？加载网页时音频文件不播放。

```
$(document).ready(function() {

    var audioElement = document.createElement('audio');
    audioElement.setAttribute('src','content/audio/tune.mp3');
    audioElement.setAttribute('autoplay', 'autoplay');
    //audioElement.load()
    $.get();
    audioElement.addEventListener("load", function() {
    audioElement.play();
    }, true);

    audioElement.play();

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:31:55.907

缺少一个）；最后我相信。所以你关闭了准备功能。

# wordpress - Wordpress 管理员搜索帖子错误 - 无效的帖子类型

> ID：15574153
> 
> 赞同：4
> 
> 时间：2013-03-22T15:31:29.017
> 
> 标签：wordpress, search, post, admin, custom-post-type

我有一个网站，其中包含一些使用 Ultimate CMS 插件创建的自定义帖子类型。在管理区域，当我进行新搜索时，结果还可以，但之后，当我尝试进行第二次搜索时，它给我一个错误“无效的帖子类型”。

我也意识到网址不正确：

在第一次搜索中，网址是这样的： [http ://www.site.com/wp-admin/edit.php?s=SearchTerm1&post_status=all&post_type=post&action=-1&m=0&cat=0&paged=1&mode=list&action2=- 1](http://www.site.com/wp-admin/edit.php?s=SearchTerm1&post_status=all&post_type=post&action=-1&m=0&cat=0&paged=1&mode=list&action2=-1)

在第二次搜索中，网址类似于：

[http://www.site.com/wp-admin/edit.php?s=SearchTerm2&post_status=all&post_type=Array&_wpnonce=4d88f268e4&_wp_http_referer=%2Fwp-admin%2Fedit.php%3Fs%3DSearchTerm1%26post_status%3Dall%26post_type%3Dpost%26action %3D-1%26m%3D0%26cat%3D0%26paged%3D1%26mode%3Dlist%26action2%3D-1&action=-1&m=0&cat=0&paged=1&mode=list&action2=-1](http://www.site.com/wp-admin/edit.php?s=SearchTerm2&post_status=all&post_type=Array&_wpnonce=4d88f268e4&_wp_http_referer=%2Fwp-admin%2Fedit.php%3Fs%3DSearchTerm1%26post_status%3Dall%26post_type%3Dpost%26action%3D-1%26m%3D0%26cat%3D0%26paged%3D1%26mode%3Dlist%26action2%3D-1&action=-1&m=0&cat=0&paged=1&mode=list&action2=-1)

以及错误消息：“无效的帖子类型”。

我停用了所有插件，我将 wordpress 升级到最新版本 3.5.1，我将永久链接重置为默认值，但这个错误仍然存​​在。

任何帮助将非常感激！

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-02-02T20:09:18.013

我也遇到了这个问题，发现这是我的 functions.php 文件中的一个函数修改了全局 wordpress 查询参数的结果。

听起来您编辑了全局`$query`对象。如果您使用了诸如[“pre_get_posts”之](https://codex.wordpress.org/Plugin_API/Action_Reference/pre_get_posts)类的钩子并操作了`$query`对象并且您不排除管理区域，那么您对查询参数所做的任何更改也将应用于管理面板，并且在尝试添加时会显示该错误不适合您搜索的参数。

例如：

假设您的网站上有一个搜索功能，当用户输入搜索并转到搜索结果页面时，您只想显示名为 的自定义帖子类型的帖子`$searchable_posts`，那么您可以`functions.php`像这样在文件中添加一个钩子：

```
function searchfilter($query) {

  if ($query->is_search && $query->is_main_query() ) {

      $query->set('post_type', $searchable_posts);
  }
  return $query;
}

add_filter('pre_get_posts', 'searchfilter'); 
```

这样一来，任何全局默认值`$query`都将仅搜索具有匹配帖子类型的结果`$searchable_posts`。然而，上面写的方式意味着这也适用`$query`于管理面板中的任何全局。

解决此问题的方法是像这样构造您的查询：

```
function searchfilter($query) {

  if ($query->is_search && $query->is_main_query() && !is_admin() ) {

      $query->set('post_type', $searchable_posts);
  }
  return $query;
}

add_filter('pre_get_posts', 'searchfilter'); 
```

添加这`!is_admin()`意味着您的函数将排除后端管理面板中的任何内容（请参阅[is_admin](https://codex.wordpress.org/Function_Reference/is_admin)）。

或者，如果可以的话，一种更安全的方法`$query`是创建自己的新[WP_Query](https://codex.wordpress.org/Class_Reference/WP_Query)并使用它进行搜索，而不是使用全局默认值 - 法典有很好的示例来说明如何设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-16T06:15:27.823

我也遇到了和你一样的问题，最后我得到了解决方案。

我们必须添加**`$query->is_main_query()`**IF 条件。

下面是完整的代码。

```
 function acf_meta_value_filter() {
  global $typenow;
  global $wp_query;
    if ( $typenow == 'your_custom_post_type_name' ) { // Your custom post type meta_key_name

      $plugins = array( 'value1', 'value2', 'value3' ); // Options for the filter select field
      $current_plugin = '';
      if( isset( $_GET['meta_key_name'] ) ) {   
        $current_plugin = $_GET['meta_key_name']; // Check if option has been selected
      } ?>
      <select name="meta_key_name" id="meta_key_name">
        <option value="all" <?php selected( 'all', $current_plugin ); ?>><?php _e( 'All', '' ); ?></option>
        <?php foreach( $plugins as $key=>$value ) { ?>
          <option value="<?php echo esc_attr( $value ); ?>" <?php selected( $value, $current_plugin ); ?>><?php echo esc_attr( $value ); ?></option>
        <?php } ?>
      </select>
  <?php }
}
add_action( 'restrict_manage_posts', 'acf_meta_value_filter' );

function acf_meta_value_filter_by_slug( $query ) {
  global $pagenow;
  // Get the post type
  $post_type = isset( $_GET['post_type'] ) ? $_GET['post_type'] : '';
  if ( is_admin() && $pagenow=='edit.php' && $post_type == 'your_custom_post_type_name' && isset( $_GET['meta_key_name'] ) && $_GET['meta_key_name'] !='all' && $query->is_main_query()) {
    $query->query_vars['meta_key'] = 'meta_key_name';
    $query->query_vars['meta_value'] = $_GET['meta_key_name'];
    $query->query_vars['meta_compare'] = '=';

  }
}
add_filter( 'parse_query', 'acf_meta_value_filter_by_slug' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-05T12:28:42.083

我从其他开发人员那里接管的网站也遇到了类似的问题。

```
function anty_search_form( $query ) {
    if ( $query->is_search ) {
        $query->set( 'post_type', array('post', 'product') );
    }
    return $query;
}
add_filter( 'pre_get_posts', 'anty_search_form' ); 
```

有人忘记从 wp-admin 页面中排除此功能。所以改成这个有助于无效的帖子类型。

```
function anty_search_form( $query ) {
    if (!is_admin()){
        if ( $query->is_search ) {
            $query->set( 'post_type', array('post', 'product') );
        }
        return $query;
    }
}
add_filter( 'pre_get_posts', 'anty_search_form' ); 
```

# hadoop - 从 Pig 中的另一行减去一行的值

> ID：15574159
> 
> 赞同：1
> 
> 时间：2013-03-22T15:31:45.470
> 
> 标签：hadoop, apache-pig

我正在尝试使用 Pig 开发一个示例程序来分析一些日志文件。我想分析不同作业的运行时间。当我读入作业的日志文件时，我得到了作业的开始时间和结束时间，如下所示：

```
(Wed,03/20/13,01:03:37,EDT)
(Wed,03/20/13,01:05:00,EDT) 
```

现在，要计算经过的时间，我需要减去这两个时间戳，但由于两个时间戳都在同一个包中，我不确定如何比较它们。所以我正在寻找如何做到这一点的想法。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:47:32.580

两个日志行中的作业是否有唯一 ID？还有什么东西可以表明哪个事件是开始，哪个是结束？

如果是这样，您可以读取数据集两次，一次用于开始事件，一次用于结束事件，然后将两者连接在一起。然后，您将拥有一个包含两个事件的记录。

所以：

```
A = FOREACH logline GENERATE id, type, timestamp;
START = FILTER A BY (type == 'start');

END = FILTER A  BY (type == 'end');

JOINED = JOIN START by ID, END by ID;

DIFF = FOREACH JOINED GENERATE (START.timestamp - END.timestamp); // or whatever; 
```

# highcharts - 使用 VU Guage：在 needle 下方添加数值

> ID：15574161
> 
> 赞同：0
> 
> 时间：2013-03-22T15:31:47.733
> 
> 标签：highcharts

在 Highcharts 示例中，我看到速度计在针枢轴下方有一个数字指示器（[http://jsfiddle.net/radi8/kbvC3/497/](http://jsfiddle.net/radi8/kbvC3/497/)）。我将使用 VU 仪表，但想将此数字指示器添加到此仪表视图中。玩小提琴（[http://jsfiddle.net/radi8/Z2s77/1/](http://jsfiddle.net/radi8/Z2s77/1/)），我似乎无法显示这个元素。

有什么建议么？

我来自 jsFiddle 的似曾相识

```
$(function () {
    var chart = new Highcharts.Chart({

    chart: {
        renderTo: 'container',
        type: 'gauge',
        plotBorderWidth: 1,
        plotBackgroundColor: {
            linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1 },
            stops: [
                [0, '#FFF4C6'],
                [0.3, '#FFFFFF'],
                [1, '#FFF4C6']
            ]
        },
        plotBackgroundImage: null,
        height: 200
    },

    title: {
        text: 'Efficiencies'
    },

    pane: [{
        startAngle: -45,
        endAngle: 45,
        background: null,
        center: ['25%', '145%'],
        size: 300
    }, {
        startAngle: -45,
        endAngle: 45,
        background: null,
        center: ['75%', '145%'],
        size: 300
    }],                        

    yAxis: [{
        min: 0,
        max: 110,
        minorTickPosition: 'outside',
        tickPosition: 'outside',
        labels: {
            rotation: 'auto',
            distance: 20
        },
        plotBands: [{
            from: 0,
            to: 70,
            color: '#DF5353', // red
            innerRadius: '100%',
            outerRadius: '105%'
         }, {
            from: 70,
            to: 95,
             color: '#DDDF0D', // yellow
            innerRadius: '100%',
            outerRadius: '105%'
        }, {
            from: 95,
            to: 110,
            color: '#55BF3B', // green
            innerRadius: '100%',
            outerRadius: '105%'
        }],
        pane: 0,
        title: {
            text: 'OEE %<br/><span style="font-size:8px">Machine 001</span>',
            y: -40
        }
    }, {
        min: 0,
        max: 110,
        minorTickPosition: 'outside',
        tickPosition: 'outside',
        labels: {
            rotation: 'auto',
            distance: 20
        },
        plotBands: [{
            from: 0,
            to: 70,
            color: '#DF5353', // red
            innerRadius: '100%',
            outerRadius: '105%'
         }, {
            from: 70,
            to: 95,
             color: '#DDDF0D', // yellow
            innerRadius: '100%',
            outerRadius: '105%'
        }, {
            from: 95,
            to: 110,
            color: '#55BF3B', // green
            innerRadius: '100%',
            outerRadius: '105%'
        }],
        pane: 1,
        title: {
            text: 'Cycle Eff %<br/><span style="font-size:8px">Machine 001</span>',
            y: -40
        }
    }],

    plotOptions: {
        gauge: {
            dataLabels: {
                enabled: false
            },
            dial: {
                radius: '100%'
            }
        }
    },
    series: [{
        data: [80],
        yAxis: 0
    }, {
        data: [80],
        yAxis: 1
    }]

},

// Let the music play
function(chart) {
    setInterval(function() {
        var left = chart.series[0].points[0],
            right = chart.series[1].points[0],
            leftVal, 
            //inc = (Math.random() - 0.5) * 30;
            inc1 = Math.random() * (30) + 70;
            inc2 = Math.random() * (30) + 70;

        leftVal =  left.y + inc1;
        rightVal = right.y + inc2; // / 3;
        if (leftVal < 0 || leftVal > 110) {
            //leftVal = left.y - inc;
            leftVal = 110 - inc1;
        }
        if (rightVal < 0 || rightVal > 110) {
            rightVal = 110 - inc2;
        }

        left.update(leftVal,false);
        right.update(rightVal);//, false);
        chart.redraw();

    }, 1500);

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:57:34.940

您必须启用和定位 dataLabels（现在您有了 dataLabels: {enabled: false}）。

见：[http ://api.highcharts.com/highcharts#plotOptions.gauge.dataLabels](http://api.highcharts.com/highcharts#plotOptions.gauge.dataLabels)

# java - 如何将对象数组列表写入和检索到文件？

> ID：15574168
> 
> 赞同：0
> 
> 时间：2013-03-22T15:32:09.440
> 
> 标签：java, object, arraylist, get, add

我有一个对象数组列表，有人可以告诉我从文件中写入和检索对象的最有效方法吗？

谢谢。

我的尝试

```
 public static void LOLadd(String ab, String cd, int ef) throws IOException {
     MyShelf newS = new MyShelf();
     newS.Fbooks = ab;
     newS.Bbooks = cd;
     newS.Cbooks = ef;
     InfoList.add(newS);

         FileWriter fw;
                 fw = new FileWriter("UserInfo.out.txt");
             PrintWriter outt = new PrintWriter(eh);
                 for (int i = 0; i <InfoList.size(); i++)
                 {
                     String ax = InfoList.get(i).Fbooks;
                     String ay = InfoList.get(i).Bbooks;
                     int az = InfoList.get(i).Cbooks;
                     output.print(ax + " " + ay + " " + az);  //Output all the words to file // on the same line
                     output.println(""); //Make space
                 }
                 fw.close();
                 output.close();
} 
```

我尝试检索文件。另外，在检索文件后，如何读取每一列对象？例如，如果我有 ::::: Fictions, Dramas, Plays --- 我如何读取、获取、替换、删除和向 Dramas 列添加值？

```
public Object findUsername(String a) throws FileNotFoundException, IOException,     ClassNotFoundException  
{    
 ObjectInputStream sc = new ObjectInputStream(new FileInputStream("myShelf.out.txt"));

    //ArrayList<Object> List = new ArrayList<Object>();
    InfoList = null;
    Object  obj = (Object) sc.readObject();

    InfoList.add((UserInfo) obj);
    sc.close();

     for (int i=0; i <InfoList.size(); i++) {
          if (InfoList.get(i).user.equals(a)){
               return "something" + InfoList.get(i);
      }
   }
     return "doesn't exist"; 
 }

public static String lbooksMatching(String b)    {

    //Retrieve data from file
    //...

    for (int i=0; i<myShelf.size(); i++)       {
        if (myShelf.get(i).user.equals (b))   
        {
            return b;
        }
        else 
        {
            return "dfbgregd"; 
        }
   }
    return "dfgdfge"; 
}

public static String matching(String qp)    {
    for (int i=0; i<myShelf.size(); i++)       {
        if (myShelf.get(i).pass.equals (qp))   
        {
            return c;
        }
        else 
        {
            return "Begegne"; 
        }
   }
    return "Bdfge"; 
} 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:40:43.427

似乎您想要**序列化**一个对象并将**该**序列化形式保存到某种存储（在本例中为文件）。

这里有 2 条重要说明：

**序列化**

*内部java序列化*

*   Java 提供了自动序列化，它要求通过实现 java.io.Serializable 接口来标记对象。实现接口将类标记为“可以序列化”，然后 Java 在内部处理序列化。
*   有关如何将对象序列化/反序列化到字节的代码示例，请参见[这篇文章。](https://stackoverflow.com/questions/2836646/java-serializable-object-to-byte-array)

这可能永远是持久化对象的理想方式，因为您无法控制格式（由 java 处理），它不是人类可读的，并且如果您的对象发生更改，您可以控制版本问题。

*编组为 JSON 或 XML*

*   将对象序列化到磁盘的更好方法是使用另一种数据格式，如 XML 或 JSON。
*   可以在[此处](http://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/)找到有关如何将对象转换为 JSON 结构的示例。

**重要提示：**除非有很好的理由（我在这里看不到），否则我不会像您那样在代码中进行序列化。它很快就会变得混乱，并且当您的对象发生变化时会发生变化。我会选择一种更自动化的序列化方式。此外，当使用 JSON / XML 等格式时，您知道有大量 API 可用于读取/写入该格式，因此您不再需要实现所有这些序列化/反序列化逻辑。

**持久性**

由于各种原因（没有版本控制/并发问题/.....），将您的序列化对象写入文件并不总是一个好主意。

更好的方法是使用数据库。如果它是一个分层数据库，请查看 Hibernate 或 JPA 以使用很少的代码来持久化您的对象。如果它是像 MongoDB 这样的文档数据库，则可以持久化 JSON 序列化表示。

有大量的资源可用于将对象持久化到 Java 中的数据库。我建议查看[JPA](http://docs.oracle.com/javaee/6/tutorial/doc/bnbpz.html)，这是用于持久性和对象/关系映射的标准 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T07:24:33.727

这是另一个基本示例，它将让您深入了解 Arraylist、构造函数以及将输出写入文件： 运行此程序后，如果您使用 IDE 转到项目文件夹，您将在其中生成 *.txt 文件。

```
import java.io.*;
import java.util.List;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;

public class ListOfNumbers {

    private List<Integer> list;
    private static final int SIZE = 10;//whatever size you wish

    public ListOfNumbers () {
        list = new ArrayList<Integer>(SIZE);
        for (int i = 0; i < SIZE; i++) {
            list.add(new Integer(i));
        }
    }

    public void writeList() {
        PrintWriter out = null;
        try {
            out = new PrintWriter(new FileWriter("ManOutFile.txt"));
            for (int i = 0; i < SIZE; i++) {
                out.println("Value at: " + i + " = " + list.get(i));
            }
            out.close();
        } catch (IOException ex) {
            Logger.getLogger(ListOfNumbers.class.getName()).log(Level.SEVERE, null, ex);
        } finally {
            out.close();
        }
    }
public static void main(String[] args)
{
    ListOfNumbers lnum=new ListOfNumbers();
    lnum.writeList();
}
} 
```

# sql-server - 为 IN 子句使用 T-SQL XML 输入元素值

> ID：15574173
> 
> 赞同：1
> 
> 时间：2013-03-22T15:32:24.597
> 
> 标签：sql-server, tsql, sql-server-2008-r2

我正在尝试编写一个将用户从 Active Directory 同步到我的本地应用程序数据库的过程。从我的代码中，我将以下格式的 XML 传递给存储过程：

```
<AdUsers>
  <AdUser AccountSid="S-1-5-21-111111111-111111111-111111111-1111" DisplayName="Test User" EmailAddress="tuser@mail.local" ExchangeServerFk="4" ExchangeServer="https://mail.local" Department="" StatusFK="1" UserName="TUSER">
    <AccountSids>
      <Sid>S-1-5-21-111111111-111111111-111111111-1111</Sid>
    </AccountSids>
  </AdUser>
</AdUsers> 
```

我想使用以下存储过程在 XML 和 tb_Mailboxes 表中的行之间进行同步：

```
@adUsers XML, @lastSyncBy VARCHAR (50), @lastSyncOn DATETIME, @defaultProfileId INT, @adDomainId INT
AS

begin try
    BEGIN TRANSACTION
        --First delete all the mailboxes exist in the database but not in the xml.
        delete tb_Mailboxes
        where AccountSid not in (
            select 
                 rtrim(element.value('text()[1]', 'varchar(100)')) as AccountSid
            from 
                @adUsers.nodes('/AdUsers/AdUser/AccountSids/Sid') t(element)

        ) AND @adDomainId = AdDomainFk

        --Then insert or update existing accounts
        MERGE tb_Mailboxes as [target]
        USING 
        (
            select 
                 rtrim(element.value('data(@AccountSid)', 'varchar(100)')) as AccountSid
                ,rtrim(element.value('data(@DisplayName)', 'varchar(100)')) as DisplayName
                ,rtrim(element.value('data(@EmailAddress)', 'varchar(500)')) as EmailAddress
                ,rtrim(element.value('data(@ExchangeServerFk)', 'varchar(100)')) as ExchangeServerFk
                ,rtrim(element.value('data(@ExchangeServer)', 'varchar(150)')) as ExchangeServer
                ,rtrim(element.value('data(@Department)', 'varchar(100)')) as Department
                ,rtrim(element.value('data(@StatusFK)', 'varchar(100)')) as StatusFK
                ,rtrim(element.value('data(@UserName)', 'varchar(100)')) as UserName
                ,element.query('AccountSids') as SidList
            from 
                @adUsers.nodes('/AdUsers/AdUser') t(element)
        ) as [source] 
             on [target].AccountSid IN
             (
                SELECT rtrim(A.value('text()[1]', 'varchar(100)')) as CurSid 
                FROM [source].SidList.nodes('Sid') AS FN(A)
             )
        WHEN MATCHED THEN UPDATE SET
            DisplayName = [source].DisplayName
            ,EmailAddress = [source].EmailAddress
            ,ExchangeServerFk = [source].ExchangeServerFk
            ,ExchangeServer = [source].ExchangeServer
            ,Department = [source].Department
            ,UserName = [source].UserName   
            /*,StatusFK = [source].StatusFK*/
            ,LastSyncOn = @lastSyncOn
            ,LastSyncBy = @lastSyncBy
        WHEN NOT MATCHED THEN INSERT 
            (
                AdDomainFk, 
                UserName, 
                DisplayName, 
                Department, 
                EmailAddress, 
                ExchangeServerFk, 
                ExchangeServer, 
                AccountSid, 
                IsAutoDeleteEnabled, 
                ProfileFk, 
                Settings, 
                QueueLastPickedUp, 
                QueueLastProcessed, 
                QueueLastFinished, 
                LastSyncOn, 
                LastSyncBy,
                StatusFK
            )
            VALUES
            (
            @adDomainId
            ,[source].UserName
            ,[source].DisplayName
            ,[source].Department
            ,[source].EmailAddress
            ,[source].ExchangeServerFk
            ,[source].ExchangeServer
            ,[source].AccountSid
            ,0
            ,@defaultProfileId
            ,NULL
            ,NULL
            ,NULL
            ,NULL
            ,@lastSyncOn
            ,@lastSyncBy
            ,[source].StatusFK
            );

    COMMIT TRANSACTION
END TRY
BEGIN CATCH

    ROLLBACK TRANSACTION
END CATCH 
```

但是，删除部分中的“NOT IN”和匹配部分中的“IN”似乎不起作用。这种在 XML 中使用多个值的 IN 子句是否可行？有没有更好的方法来解决我缺少的这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T23:21:25.350

MERGE 查询的问题是 [source] 和 [target] 表之间的连接。而不是使用连接目标和源表

```
 ON [target].AccountSid IN
     (
        SELECT rtrim(A.value('text()[1]', 'varchar(100)')) as CurSid 
        FROM [source].SidList.nodes('Sid') AS FN(A)
     ) 
```

改用这个：

```
 ON [target].AccountSid = [source].AccountSid 
```

[来源] 将被具体化为一个表，您可以像加入任何其他表一样加入它。您的 IN 语句没有多大意义，因为它是一个完全不同的实体，因此相当于一种笛卡尔连接（FULL OUTER）。

我要提出的另一条评论是，为什么要使用单独的 DELETE 语句来删除 XML 中不再存在的邮箱？为什么不使用以下语句简单地将 DELETE 放在 MERGE 语句中？

```
WHEN NOT MATCHED BY SOURCE 
               THEN DELETE 
```

应用所有这些，您的 MERGE 语句变为：

```
MERGE tb_Mailboxes AS [target]
    USING 
        (SELECT RTRIM(element.value('data(@AccountSid)', 'varchar(100)')) AS AccountSid
              , RTRIM(element.value('data(@DisplayName)', 'varchar(100)')) AS DisplayName
              , RTRIM(element.value('data(@EmailAddress)', 'varchar(500)')) AS EmailAddress
              , RTRIM(element.value('data(@ExchangeServerFk)', 'varchar(100)')) AS ExchangeServerFk
              , RTRIM(element.value('data(@ExchangeServer)', 'varchar(150)')) AS ExchangeServer
              , RTRIM(element.value('data(@Department)', 'varchar(100)')) AS Department
              , RTRIM(element.value('data(@StatusFK)', 'varchar(100)')) AS StatusFK
              , RTRIM(element.value('data(@UserName)', 'varchar(100)')) AS UserName
         FROM   @adUsers.nodes('/AdUsers/AdUser') t (element)) AS [source]
    ON [target].AccountSid = [source].AccountSid
    WHEN MATCHED 
        THEN UPDATE
           SET      DisplayName = [source].DisplayName
                  , EmailAddress = [source].EmailAddress
                  , ExchangeServerFk = [source].ExchangeServerFk
                  , ExchangeServer = [source].ExchangeServer
                  , Department = [source].Department
                  , UserName = [source].UserName   
        /*,StatusFK = [source].StatusFK*/
                  , LastSyncOn = @lastSyncOn
                  , LastSyncBy = @lastSyncBy
    WHEN NOT MATCHED BY TARGET
        THEN INSERT (AdDomainFk
                   , UserName
                   , DisplayName
                   , Department
                   , EmailAddress
                   , ExchangeServerFk
                   , ExchangeServer
                   , AccountSid
                   , IsAutoDeleteEnabled
                   , ProfileFk
                   , Settings
                   , QueueLastPickedUp
                   , QueueLastProcessed
                   , QueueLastFinished
                   , LastSyncOn
                   , LastSyncBy
                   , StatusFK)
           VALUES   (@adDomainId
                   , [source].UserName
                   , [source].DisplayName
                   , [source].Department
                   , [source].EmailAddress
                   , [source].ExchangeServerFk
                   , [source].ExchangeServer
                   , [source].AccountSid
                   , 0
                   , @defaultProfileId
                   , NULL
                   , NULL
                   , NULL
                   , NULL
                   , @lastSyncOn
                   , @lastSyncBy
                   , [source].StatusFK)
     WHEN NOT MATCHED BY SOURCE 
         THEN DELETE; 
```

# php - 为什么 $this->data['foo'] 的 var_dump 不起作用而 $data['foo'] 是？

> ID：15574174
> 
> 赞同：0
> 
> 时间：2013-03-22T15:32:30.630
> 
> 标签：php, arrays, controller

在我的控制器中，我有这个：

```
$this->data['post'] = $this->mdl_posts->get_post_by_slug($slug);
var_dump($this->data['post']);
die(); 
```

输出为*空*

但是，当我将其更改为：

```
$data['post'] = $this->mdl_posts->get_post_by_slug($slug);
var_dump($data['post']);
die(); 
```

我得到了我想要的整个数组的漂亮 var_dump。

我的问题是为什么 var_dump 或 print_r 不能使用`$this->data['post']`并且只能使用`$data['post']`.

我使用 $this->data 而不是 $data 因为我将一些变量从构造函数发送到方法等，所以我需要像 $this->data 一样使用它...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:34:32.693

`$this->data`将意味着这`data`是您正在操作的班级的成员。 `data`必须是您正在操作的方法的本地变量，但不是您的类的成员。

```
class MyClass {

    private $member = "123";

    public function __construct() {
        $this->methodCall("abc");
    }

    public function methodCall($nonMember) {
        echo $nonMember;       // valid
        echo $this->member;    // valid
        echo $this->nonMember; // not valid
    }

} 
```

# java - 使用 Java 压缩 csv 文件会引发“至少一个 ZipEntry”

> ID：15574175
> 
> 赞同：0
> 
> 时间：2013-03-22T15:32:32.040
> 
> 标签：java, zip

我想要做的是压缩生成的 csv 文件。该文件确实可以毫无问题地生成，直到此处涉及此代码。所以代码在`zos.close()`这里抛出异常是代码

```
try {
    FileOutputStream fos = new FileOutputStream(file.getPath());
    ZipOutputStream zos = new ZipOutputStream(fos);
    FileInputStream in = new FileInputStream(file.getPath());
    String fullCSVFileName = file.getName();
    String fullFileName = fullCSVFileName.substring(0, fullCSVFileName.length()-3);
    String fullZipFileName = fullFileName + "zip";
    ZipEntry ze= new ZipEntry(fullZipFileName);
    if(ze != null) zos.putNextEntry(ze);
    fos = new FileOutputStream("C:\\sourceLocation\\"+fullZipFileName);
    zos = new ZipOutputStream(fos);

    byte[] buffer = new byte[1024];

    int len;// = in.read(buffer);
    while ((len = in.read(buffer)) > 0) {
        Logger.debug("in Loop, len = " + len);
        zos.write(buffer, 0, len);
    }
    in.close();
    zos.closeEntry();    
    zos.close();

    Logger.debug("Zipping complete!");

} catch(IOException ex) {
    Logger.error(ex);
} 
```

**更正的代码**

```
try{

    String fullCSVFileName = file.getName();
    String fullFileName = fullCSVFileName.substring(0, fullCSVFileName.length()-3);                     
    String fullZipFileName = fullFileName + "zip";                      
    FileOutputStream fos = new FileOutputStream("C:\\sourceLocation\\"+fullZipFileName);
    ZipOutputStream zos = new ZipOutputStream(fos);
    FileInputStream in = new FileInputStream(file.getPath());

    ZipEntry ze= new ZipEntry(fullZipFileName);
    if(ze != null){
        zos.putNextEntry(ze);
    }

    byte[] buffer = new byte[1024];

    int len;    
    while ((len = in.read(buffer)) > 0) {
        zos.write(buffer, 0, len);
    }

    in.close();
    zos.closeEntry();
    zos.close();

    Logger.debug("Zipping complete!");

}catch(IOException ex){
    Logger.error(ex);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:39:17.243

您在代码顶部创建`fos`和一次：`zos`

```
FileOutputStream fos = new FileOutputStream(file.getPath());
ZipOutputStream zos = new ZipOutputStream(fos); 
```

然后添加一个 ZipEntry：

```
if(ze != null) zos.putNextEntry(ze); 
```

然后稍后重新定义它们：

```
fos = new FileOutputStream("C:\\sourceLocation\\"+fullZipFileName);
zos = new ZipOutputStream(fos); 
```

然后关闭新的 zos。你从来没有关闭过，也没有写信给第一个 zos（它有一个 ZipEntry），也从来没有向第二个（你试图在没有任何东西的情况下关闭）添加一个 ZipEntry。因此，*至少一个 ZipEntry*错误。

**- - - - - - 编辑 - - - - - - -**

尝试添加`zos.finish()`，另外，您的`close()`方法应该在 finally 块中......

```
ZipOutputStream zos = null;
FileInputStream in = null;
try{

    String fullCSVFileName = file.getName();
    String fullFileName = fullCSVFileName.substring(0, fullCSVFileName.length()-3);                     
    String fullZipFileName = fullFileName + "zip";                      
    ZipOutputStream zos = new ZipOutputStream(
            new FileOutputStream("C:\\sourceLocation\\"+fullZipFileName));
    in = new FileInputStream(file.getPath());

    zos.putNextEntry( new ZipEntry(fullZipFileName) );

    byte[] buffer = new byte[1024];

    int len;    
    while ((len = in.read(buffer)) > 0) {
        zos.write(buffer, 0, len);
    }

    zos.finish();

    Logger.debug("Zipping complete!");

}catch(IOException ex){
    Logger.error(ex);
}finally {
    if ( zos != null ) {
        try {
            zos.close();
        } catch ( Exception e ) {}
    }
    if ( in != null ) {
        try {
            in.close();
        } catch ( Exception e ) {}
    }
} 
```

# php - 带有 xdebug 的 Netbeans 不突出显示已调试的行

> ID：15574176
> 
> 赞同：2
> 
> 时间：2013-03-22T15:32:33.053
> 
> 标签：php, netbeans, xdebug

我终于设法让 xdebug 工作，但现在我面临一个奇怪的问题。我可以看到变量，可以单步调试代码，但看不到我实际调试的是哪一行。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-13T09:37:37.970

如果您没有看到突出显示的行，则可能是项目设置配置不正确。

例如，当使用从根文件夹到文件夹 myapplication 的 htaccess 重定向时，请务必编辑 Project->Properties->Sources->Web Root 到重定向文件夹。

这为我解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-08T11:21:49.000

在 Netbeans > Project Properties > Sources 下，确保 Web Root 设置正确以引用运行页面所在的目录。这可能是问题的可能原因之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-07T22:11:35.490

我遇到了同样的问题，这是因为我没有在项目中设置路径映射。

项目 -> 运行配置 -> 高级

更多信息：[https ://blogs.oracle.com/netbeansphp/entry/path_mapping_in_php_debugger](https://blogs.oracle.com/netbeansphp/entry/path_mapping_in_php_debugger)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-03T22:25:27.020

在我的情况下，似乎已经解决的问题是右键单击文件（在我的情况下是 java 文件）选择“在项目中选择”然后它问我是否要打开项目（实际上这就是我认为正在发生的事情，我打开了文件但没有打开项目），我说是，然后 netbeans 开始在调试时向我显示该行。

# android - 适用于 Android 的较小按钮中的较大文本

> ID：15574179
> 
> 赞同：0
> 
> 时间：2013-03-22T15:32:42.937
> 
> 标签：android, android-layout

编辑 4：我通过创建一个更大的字体来解决它，一个填充空间的字体。请参阅下面发布的解决方案

编辑 3：我得出的结论是，我所说的问题无法解决。问题是字体没有填满图像空间，因为它们为像 j 这样的下行字母和大写字母上方的变音符号留出了空间。通过进一步搜索，我发现显然我需要的负填充是未定义的，因此可以做任何事情。

一种解决方案是创建填充整个图像空间的自定义字体。另一个是下面使用图像按钮的建议，但我增加的复杂性是既需要改变焦点颜色，又需要改变程序状态的基本图像，这使解决方案复杂化到我无法弄清楚的地步。

Edit2：添加了屏幕截图

编辑：在下面添加了可绘制代码。

我已经尝试了可以​​在 stackoverflow 上找到的每个示例以及 Google 的每个答案。昨晚我花了至少 3 个小时才放弃。如果有人知道答案，我当然可以在这方面使用一些帮助。

我在一个 Android 应用程序上有按钮，它的限制是按钮只能这么大，并且其中的文本需要在明亮的日光下可读，所以它们需要很大。解决方法很明显，让文本比按钮小一个像素。换句话说，使填充变小。android:paddingTop="-10sp" 什么都不做。我已经尝试了我能想到的一切。为了清楚起见，我希望按钮内文本的顶部和底部与按钮本身的边缘之间的空间很小。

这是我的一个按钮的示例：

```
 <Button
        android:id="@+id/buttonSetTgt"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/textHeader"
        android:layout_alignParentLeft="true"
        android:background="@drawable/button_start"
        android:textColor="@android:color/white"
        android:onClick="onSetTgt"
        android:paddingLeft="6sp"
        android:paddingRight="6sp"
        android:paddingTop="0sp"
        android:paddingBottom="0sp"
        android:text="&#x25CE;"
        android:textSize="@dimen/menu"
        android:textStyle="bold" /> 
```

button_start 有一些颜色和圆角定义。

它显示为零的顶部和底部填充，但负数不起作用，因此 0sp 或 -10sp 是等效的。

* * *

这是drawable的代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<selector
    xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_focused="true" >
    <shape xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="rectangle" >
         <solid android:color="#f07304"/> 
        <corners android:radius="7dp"/>
    </shape>
</item>
<item>
    <shape xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="rectangle">
        <solid android:color="#222222"/> 
        <corners android:radius="7dp"/>
    </shape>
</item> 
```

![在此处输入图像描述](../Images/fe519a94e3f91bc86d482acaa84d00c3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:19:46.380

提供了一个不错的设施...图像按钮...

根据需要设计图像（jpeg 或 png）...根据需要将文本放置在图像中的任何位置并简单地设置`android:src="@drawable/yourimage`

在这里，您将拥有您想要的外观...

您可以将 ImageButton 当作普通按钮处理

尝试实现这个......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:22:44.617

我发现您不能指定负填充，因此解决方案是使字体本身更大，几乎一直到填充开始的地方。这意味着 t 字体需要填充该区域，一直到重音区域的顶部，一直到下降区域的底部。我所做的是找到了一个由 CR8Software Solutions 开发的名为 Type 3.2 的程序。您加载您最喜欢的字体并复制其中一个缩放操作以获得大约 1.56 的缩放因子，对基线和字体边缘进行一些调整并保存。我可能会变得更大一点，实际上已经超过了口音线的顶部。如果我再做一次，我会加载一个表单字符字体来真正查看字体空间在哪里。试用版可让您节省最多大约大写的 R，所以在我的情况下，我只需要几个字母就可以了。现在我将字体加载到“assets”文件夹中，并在代码的 onCreate 部分添加代码，如下所示：

```
 Typeface tf = Typeface.createFromAsset(this.getAssets(), "startline.ttf");
    Button button = (Button) findViewById(R.id.buttonSync);
    button.setTypeface(tf);
    Button button2 = (Button) findViewById(R.id.buttonSetTgt);
    button2.setTypeface(tf);
    etc... 
```

这使我可以在不创建新图像和所有背景的情况下更改字体和按钮的大小，并且可以正常工作。

![在此处输入图像描述](../Images/8f52594496d4b1a3dea9455f8c5fb8a9.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:23:24.380

尝试使用边距而不是填充。此外，您的按钮背景是否可绘制足够宽以容纳文本同时保持其比例？

# java - Android 应用无法在模拟器上启动

> ID：15574186
> 
> 赞同：-1
> 
> 时间：2013-03-22T15:33:05.800
> 
> 标签：java, android, eclipse, android-emulator, emulation

调试器找不到任何错误，应用程序仍然无法启动：这是 logcat 和代码：

```
import android.os.Bundle;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnFocusChangeListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

@SuppressLint("UseValueOf") public  class MainActivity extends Activity  {
protected Double value1;
protected Double value2;
protected Double value3;
protected Double delta;
protected Double x1;
protected Double x2;
final EditText tf1 = (EditText)findViewById(R.id.editText1);
final EditText tf2 = (EditText)findViewById(R.id.editText2);
final EditText tf3 = (EditText)findViewById(R.id.editText3);
final TextView result1 = (TextView) findViewById(R.id.textView4);
final TextView result2 = (TextView) findViewById(R.id.textView6);
final Button caculate = (Button) findViewById(R.id.button1);

@SuppressLint("UseValueOf") @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    tf1.setOnFocusChangeListener(new OnFocusChangeListener() {          

        public void onFocusChange(View v, boolean hasFocus) {
            if(!hasFocus)
                setTextToString1();
        }
    });

    tf2.setOnFocusChangeListener(new OnFocusChangeListener() {          

        public void onFocusChange(View v, boolean hasFocus) {
            if(!hasFocus)
                setTextToString2();
        }
    });

    tf3.setOnFocusChangeListener(new OnFocusChangeListener()
    {          

        public void onFocusChange(View v, boolean hasFocus)
        {
            if(!hasFocus)
                setTextToString3();
        }

    }); 

caculate.setOnClickListener(null);
{
    if( !(value3.equals(null)&&value2.equals(null)&&value3.equals(null))  )
    {
        delta = new Double(caculateDelta(value1,value2,value3));
        x1 = caculateX(Math.sqrt(delta.doubleValue()));
        x2 =caculateX(-Math.sqrt(delta.doubleValue()));
        result1.setText(x1.toString());
        result2.setText(x2.toString());
    }
    else
    {
        result1.setText("Error");
        result2.setText("Error");
    }
}

}

public void setTextToString1()
{
    value1 = new Double(Integer.parseInt(tf1.getText().toString()));
}
@SuppressLint("UseValueOf") public void setTextToString2()
{
    value2 = new Double( Integer.parseInt(tf2.getText().toString()));   
    }
public void setTextToString3()
{
    value3 = new Double( Integer.parseInt(tf3.getText().toString()));
}

public double caculateDelta (double a, double b , double c)
{
    return b*b-(4*a*c);
}
public double caculateX (Double delta)
{
    return (-value2+delta.doubleValue()/(2*value1));
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

这是logcat，我删除了整个logcat并重新启动应用程序，然后复制了那个logcat：

```
03-22 19:57:47.946: D/AndroidRuntime(788): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
03-22 19:57:47.946: D/AndroidRuntime(788): CheckJNI is ON
03-22 19:57:48.036: D/dalvikvm(788): Trying to load lib libjavacore.so 0x0
03-22 19:57:48.057: D/dalvikvm(788): Added shared lib libjavacore.so 0x0
03-22 19:57:48.135: D/dalvikvm(788): Trying to load lib libnativehelper.so 0x0
03-22 19:57:48.135: D/dalvikvm(788): Added shared lib libnativehelper.so 0x0
03-22 19:57:49.786: D/AndroidRuntime(788): Calling main entry com.android.commands.pm.Pm
03-22 19:57:49.916: I/ActivityManager(299): Start proc com.android.defcontainer for service com.android.defcontainer/.DefaultContainerService: pid=799 uid=10009 gids={50009, 1015, 2001, 1028}
03-22 19:57:50.176: E/Trace(799): error opening trace file: No such file or directory (2)
03-22 19:57:50.446: W/ActivityManager(299): No content provider found for permission revoke: file:///data/local/tmp/SqureFunC.apk
03-22 19:57:50.836: W/ActivityManager(299): No content provider found for permission revoke: file:///data/local/tmp/SqureFunC.apk
03-22 19:57:50.836: I/PackageManager(299): Copying native libraries to /data/app-lib/vmdl1616084389
03-22 19:57:51.416: I/PackageManager(299): Removing non-system package:com.eilonudi.squrefunc
03-22 19:57:51.416: I/ActivityManager(299): Force stopping package com.eilonudi.squrefunc appid=10046 user=-1
03-22 19:57:52.027: I/PackageManager(299): Package com.eilonudi.squrefunc codePath changed from /data/app/com.eilonudi.squrefunc-2.apk to /data/app/com.eilonudi.squrefunc-1.apk; Retaining data and using new
03-22 19:57:52.081: I/PackageManager(299): Running dexopt on: com.eilonudi.squrefunc
03-22 19:57:54.766: D/dalvikvm(813): DexOpt: load 383ms, verify+opt 1197ms, 800436 bytes
03-22 19:57:55.036: I/ActivityManager(299): Force stopping package com.eilonudi.squrefunc appid=10046 user=-1
03-22 19:57:55.066: W/PackageManager(299): Code path for pkg : com.eilonudi.squrefunc changing from /data/app/com.eilonudi.squrefunc-2.apk to /data/app/com.eilonudi.squrefunc-1.apk
03-22 19:57:55.066: W/PackageManager(299): Resource path for pkg : com.eilonudi.squrefunc changing from /data/app/com.eilonudi.squrefunc-2.apk to /data/app/com.eilonudi.squrefunc-1.apk
03-22 19:57:55.926: D/dalvikvm(299): GC_CONCURRENT freed 529K, 25% free 5371K/7116K, paused 95ms+21ms, total 295ms
03-22 19:57:55.996: D/PackageManager(299): New package installed in /data/app/com.eilonudi.squrefunc-1.apk
03-22 19:57:56.266: I/ActivityManager(299): Force stopping package com.eilonudi.squrefunc appid=10046 user=0
03-22 19:57:56.566: D/dalvikvm(419): GC_EXPLICIT freed 106K, 16% free 3821K/4504K, paused 9ms+14ms, total 134ms
03-22 19:57:56.756: I/InputReader(299): Reconfiguring input devices.  changes=0x00000010
03-22 19:57:56.796: I/ActivityManager(299): Start proc com.android.keychain for broadcast com.android.keychain/.KeyChainBroadcastReceiver: pid=815 uid=1000 gids={41000, 1015, 1028, 3002, 3001, 3003}
03-22 19:57:57.126: E/Trace(815): error opening trace file: No such file or directory (2)
03-22 19:57:57.226: W/ContextImpl(815): Calling a method in the system process without a qualified user: android.app.ContextImpl.startService:1352 android.content.ContextWrapper.startService:450 android.content.ContextWrapper.startService:450 com.android.keychain.KeyChainBroadcastReceiver.onReceive:12 android.app.ActivityThread.handleReceiver:2376 
03-22 19:57:57.316: W/AccountTypeManager(602): No authenticator found for type=com.android.exchange, ignoring it.
03-22 19:57:57.326: I/AccountTypeManager(602): Loaded meta-data for 0 account types, 0 accounts in 12ms(wall) 6ms(cpu)
03-22 19:57:57.356: D/dalvikvm(453): GC_EXPLICIT freed 263K, 13% free 2708K/3108K, paused 13ms+14ms, total 1060ms
03-22 19:57:57.786: I/InputReader(299): Reconfiguring input devices.  changes=0x00000010
03-22 19:57:58.376: W/InputMethodManagerService(299): Found no subtypes in a system IME: com.android.inputmethod.pinyin
03-22 19:57:58.456: W/AccountTypeManager(602): No authenticator found for type=com.android.exchange, ignoring it.
03-22 19:57:58.466: I/AccountTypeManager(602): Loaded meta-data for 0 account types, 0 accounts in 14ms(wall) 7ms(cpu)
03-22 19:57:58.556: I/ActivityManager(299): Start proc com.svox.pico for broadcast com.svox.pico/.VoiceDataInstallerReceiver: pid=829 uid=10014 gids={50014, 1015, 1028}
03-22 19:57:58.796: D/dalvikvm(37): GC_EXPLICIT freed 38K, 8% free 2369K/2552K, paused 8ms+9ms, total 256ms
03-22 19:57:58.986: D/dalvikvm(37): GC_EXPLICIT freed <1K, 8% free 2369K/2552K, paused 13ms+18ms, total 190ms
03-22 19:57:59.096: E/Trace(829): error opening trace file: No such file or directory (2)
03-22 19:57:59.206: D/dalvikvm(37): GC_EXPLICIT freed <1K, 8% free 2369K/2552K, paused 23ms+19ms, total 217ms
03-22 19:58:00.916: D/dalvikvm(299): GC_EXPLICIT freed 629K, 25% free 5340K/7116K, paused 75ms+102ms, total 1519ms
03-22 19:58:01.216: D/AndroidRuntime(788): Shutting down VM
03-22 19:58:01.296: D/dalvikvm(788): GC_CONCURRENT freed 94K, 18% free 467K/564K, paused 11ms+2ms, total 52ms
03-22 19:58:01.296: D/jdwp(788): Got wake-up signal, bailing out of select
03-22 19:58:01.296: D/dalvikvm(788): Debugger has detached; object registry had 1 entries
03-22 19:58:01.878: I/ActivityManager(299): Start proc com.android.quicksearchbox for broadcast com.android.quicksearchbox/.CorporaUpdateReceiver: pid=848 uid=10001 gids={50001, 3003, 1028}
03-22 19:58:02.596: E/Trace(848): error opening trace file: No such file or directory (2)
03-22 19:58:03.256: D/AndroidRuntime(852): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
03-22 19:58:03.256: D/AndroidRuntime(852): CheckJNI is ON
03-22 19:58:03.436: D/dalvikvm(852): Trying to load lib libjavacore.so 0x0
03-22 19:58:03.487: D/dalvikvm(852): Added shared lib libjavacore.so 0x0
03-22 19:58:03.506: W/RecognitionManagerService(299): no available voice recognition services found for user 0
03-22 19:58:03.616: I/Choreographer(419): Skipped 1174 frames!  The application may be doing too much work on its main thread.
03-22 19:58:03.627: D/dalvikvm(852): Trying to load lib libnativehelper.so 0x0
03-22 19:58:03.627: D/dalvikvm(852): Added shared lib libnativehelper.so 0x0
03-22 19:58:03.996: I/Choreographer(419): Skipped 37 frames!  The application may be doing too much work on its main thread.
03-22 19:58:05.726: D/AndroidRuntime(852): Calling main entry com.android.commands.am.Am
03-22 19:58:05.746: D/dalvikvm(852): Note: class Landroid/app/ActivityManagerNative; has 157 unimplemented (abstract) methods
03-22 19:58:05.837: I/ActivityManager(299): START u0 {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.eilonudi.squrefunc/.MainActivity} from pid 852
03-22 19:58:05.909: D/PermissionCache(36): checking android.permission.READ_FRAME_BUFFER for uid=1000 => granted (14464 us)
03-22 19:58:05.926: W/WindowManager(299): Failure taking screenshot for (164x246) to layer 21005
03-22 19:58:06.017: D/AndroidRuntime(852): Shutting down VM
03-22 19:58:06.067: D/dalvikvm(873): Not late-enabling CheckJNI (already on)
03-22 19:58:06.117: I/ActivityManager(299): Start proc com.eilonudi.squrefunc for activity com.eilonudi.squrefunc/.MainActivity: pid=873 uid=10046 gids={50046, 1028}
03-22 19:58:06.117: D/dalvikvm(852): GC_CONCURRENT freed 95K, 17% free 499K/596K, paused 2ms+7ms, total 75ms
03-22 19:58:06.128: D/jdwp(852): Got wake-up signal, bailing out of select
03-22 19:58:06.128: D/dalvikvm(852): Debugger has detached; object registry had 1 entries
03-22 19:58:06.786: E/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property
03-22 19:58:07.046: I/Choreographer(299): Skipped 41 frames!  The application may be doing too much work on its main thread.
03-22 19:58:07.156: I/Choreographer(299): Skipped 46 frames!  The application may be doing too much work on its main thread.
03-22 19:58:07.366: E/Trace(873): error opening trace file: No such file or directory (2)
03-22 19:58:07.756: I/Choreographer(299): Skipped 34 frames!  The application may be doing too much work on its main thread.
03-22 19:58:08.046: I/Choreographer(419): Skipped 76 frames!  The application may be doing too much work on its main thread.
03-22 19:58:08.296: I/try(873): start view
03-22 19:58:08.336: D/AndroidRuntime(873): Shutting down VM
03-22 19:58:08.336: W/dalvikvm(873): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-22 19:58:08.376: E/AndroidRuntime(873): FATAL EXCEPTION: main
03-22 19:58:08.376: E/AndroidRuntime(873): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.eilonudi.squrefunc/com.eilonudi.squrefunc.MainActivity}: java.lang.NullPointerException
03-22 19:58:08.376: E/AndroidRuntime(873):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-22 19:58:08.376: E/AndroidRuntime(873):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-22 19:58:08.376: E/AndroidRuntime(873):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-22 19:58:08.376: E/AndroidRuntime(873):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-22 19:58:08.376: E/AndroidRuntime(873):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-22 19:58:08.376: E/AndroidRuntime(873):  at android.os.Looper.loop(Looper.java:137)
03-22 19:58:08.376: E/AndroidRuntime(873):  at android.app.ActivityThread.main(ActivityThread.java:5041)
03-22 19:58:08.376: E/AndroidRuntime(873):  at java.lang.reflect.Method.invokeNative(Native Method)
03-22 19:58:08.376: E/AndroidRuntime(873):  at java.lang.reflect.Method.invoke(Method.java:511)
03-22 19:58:08.376: E/AndroidRuntime(873):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-22 19:58:08.376: E/AndroidRuntime(873):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-22 19:58:08.376: E/AndroidRuntime(873):  at dalvik.system.NativeStart.main(Native Method)
03-22 19:58:08.376: E/AndroidRuntime(873): Caused by: java.lang.NullPointerException
03-22 19:58:08.376: E/AndroidRuntime(873):  at com.eilonudi.squrefunc.MainActivity.onCreate(MainActivity.java:69)
03-22 19:58:08.376: E/AndroidRuntime(873):  at android.app.Activity.performCreate(Activity.java:5104)
03-22 19:58:08.376: E/AndroidRuntime(873):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-22 19:58:08.376: E/AndroidRuntime(873):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-22 19:58:08.376: E/AndroidRuntime(873):  ... 11 more
03-22 19:58:08.416: W/ActivityManager(299):   Force finishing activity com.eilonudi.squrefunc/.MainActivity
03-22 19:58:08.486: W/WindowManager(299): Failure taking screenshot for (164x246) to layer 21010
03-22 19:58:09.016: W/ActivityManager(299): Activity pause timeout for ActivityRecord{40e98aa0 u0 com.eilonudi.squrefunc/.MainActivity}
03-22 19:58:09.066: I/Choreographer(299): Skipped 156 frames!  The application may be doing too much work on its main thread.
03-22 19:58:09.136: E/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property
03-22 19:58:09.526: I/Choreographer(419): Skipped 303 frames!  The application may be doing too much work on its main thread.
03-22 19:58:09.727: I/Choreographer(299): Skipped 63 frames!  The application may be doing too much work on its main thread.
03-22 19:58:09.826: I/ARMAssembler(36): generated scanline__00000077:03515104_00008001_00000000 [113 ipp] (134 ins) at [0x40eb3460:0x40eb3678] in 2950837 ns
03-22 19:58:09.896: I/Choreographer(299): Skipped 55 frames!  The application may be doing too much work on its main thread.
03-22 19:58:10.006: I/Choreographer(299): Skipped 50 frames!  The application may be doing too much work on its main thread.
03-22 19:58:10.216: E/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property
03-22 19:58:10.396: I/Choreographer(299): Skipped 46 frames!  The application may be doing too much work on its main thread.
03-22 19:58:10.416: I/Choreographer(299): Skipped 58 frames!  The application may be doing too much work on its main thread.
03-22 19:58:10.526: I/Choreographer(299): Skipped 47 frames!  The application may be doing too much work on its main thread.
03-22 19:58:10.586: I/Choreographer(299): Skipped 37 frames!  The application may be doing too much work on its main thread.
03-22 19:58:10.696: I/Choreographer(299): Skipped 72 frames!  The application may be doing too much work on its main thread.
03-22 19:58:10.776: I/Choreographer(299): Skipped 30 frames!  The application may be doing too much work on its main thread.
03-22 19:58:11.016: I/Choreographer(299): Skipped 36 frames!  The application may be doing too much work on its main thread.
03-22 19:58:11.086: I/Choreographer(299): Skipped 36 frames!  The application may be doing too much work on its main thread.
03-22 19:58:11.206: I/Choreographer(299): Skipped 66 frames!  The application may be doing too much work on its main thread.
03-22 19:58:11.326: D/dalvikvm(299): GC_CONCURRENT freed 208K, 19% free 5785K/7116K, paused 14ms+83ms, total 1881ms
03-22 19:58:11.326: I/Choreographer(299): Skipped 46 frames!  The application may be doing too much work on its main thread.
03-22 19:58:11.776: I/Choreographer(299): Skipped 33 frames!  The application may be doing too much work on its main thread.
03-22 19:58:11.806: I/Choreographer(299): Skipped 59 frames!  The application may be doing too much work on its main thread.
03-22 19:58:11.856: I/Choreographer(299): Skipped 49 frames!  The application may be doing too much work on its main thread.
03-22 19:58:11.896: D/dalvikvm(419): GC_FOR_ALLOC freed 201K, 16% free 3815K/4504K, paused 656ms, total 700ms
03-22 19:58:11.958: I/Choreographer(299): Skipped 63 frames!  The application may be doing too much work on its main thread.
03-22 19:58:11.996: I/Choreographer(299): Skipped 76 frames!  The application may be doing too much work on its main thread.
03-22 19:58:12.059: I/Choreographer(299): Skipped 53 frames!  The application may be doing too much work on its main thread.
03-22 19:58:12.086: I/Choreographer(299): Skipped 49 frames!  The application may be doing too much work on its main thread.
03-22 19:58:12.156: I/Process(873): Sending signal. PID: 873 SIG: 9
03-22 19:58:12.196: I/ActivityManager(299): Process com.eilonudi.squrefunc (pid 873) has died.
03-22 19:58:12.226: I/Choreographer(299): Skipped 122 frames!  The application may be doing too much work on its main thread.
03-22 19:58:12.366: I/Choreographer(299): Skipped 167 frames!  The application may be doing too much work on its main thread.
03-22 19:58:12.576: I/Choreographer(299): Skipped 55 frames!  The application may be doing too much work on its main thread.
03-22 19:58:12.756: I/Choreographer(299): Skipped 79 frames!  The application may be doing too much work on its main thread.
03-22 19:58:13.076: I/Choreographer(299): Skipped 35 frames!  The application may be doing too much work on its main thread.
03-22 19:58:13.236: W/InputMethodManagerService(299): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@4107b340 attribute=null, token = android.os.BinderProxy@40f8fbc8
03-22 19:58:18.206: D/ExchangeService(691): Received deviceId from Email app: null
03-22 19:58:18.206: D/ExchangeService(691): !!! deviceId unknown; stopping self and retrying 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:34:55.267

首先在 setContentView 之后的 onCreate 方法中写入这些行。

```
final EditText tf1 = (EditText)findViewById(R.id.editText1);
final EditText tf2 = (EditText)findViewById(R.id.editText2);
final EditText tf3 = (EditText)findViewById(R.id.editText3);
final TextView result1 = (TextView) findViewById(R.id.textView4);
final TextView result2 = (TextView) findViewById(R.id.textView6);
final Button caculate = (Button) findViewById(R.id.button1); 
```

并检查您的 AndroidManifest.xml 是否输入正确。

查看这些链接

[Android“未找到可撤销权限的内容提供者”](https://stackoverflow.com/questions/11550798/android-no-content-provider-found-for-permission-revoke)

[应用程序未安装在 android 4.0 ICS 中](https://stackoverflow.com/questions/12811933/application-not-installing-in-android-4-0-ics)

# python - 使用 django F() 对象更新多列

> ID：15574187
> 
> 赞同：5
> 
> 时间：2013-03-22T15:33:09.347
> 
> 标签：python, mysql, django

我有一个模型，它以每列一个整数统计数据为基础存储统计数据。我有一个处理上述统计信息更新的视图，如下所示：

```
class PlayerStats(models.Model):
    #In game stats - these represent the actual keys sent by the game
    NumberOfJumps = models.IntegerField(default=0)
    NumberOfDoubleJumps = models.IntegerField(default=0)
    NumberOfSilverPickups = models.IntegerField(default=0)
    NumberOfGoldPickups = models.IntegerField(default=0)
    NumberOfHealthPickups = models.IntegerField(default=0) 
```

我基本上得到了我需要**添加**到存储在数据库中的当前统计信息的统计信息的字典。

我真的不想从模型中提取所有数据然后再次更新它，因为如果可能的话，我想在数据库级别执行此操作。

一位同事建议我使用 django 的 F() 对象将其推出视图代码，主要是为了保持它的线程安全并避免任何 mysql 死锁（统计表可能会被不同的线程不断更新)

字典包含反映数据库中使用的键的键，所以目前我正在这样做：

```
def update_stats(new_stats):
    player_stats = PlayerStats(user=user, **new_stats)
    old_stats = player_stats.values()[0]
    updated_stats = {}
    for stat in new_stats:
        if old_stat[stat]:
            updated_stats[stat] = old_stats[stat] + new_stats[stat]
    PlayerStats.objects.filter(user=user).update(**updated_stats) 
```

有人对如何通过使用 F() 对象来实现这一点有任何指示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:53:52.493

要更新 using `models.F`，您需要构建类似的东西

```
qs.update(field_1=models.F('field_1')+field_1_delta,
          field_2=models.F('field_2')+field_2_delta, 
          ...) 
```

对于您的代码，它可能是

```
new_stats = {
    'NumberOfHealthPickups': 99
    # ...
}
updated_stats = {}
for stat in new_stats:
    updated_stats[stat] = models.F(stat) + new_stats[stat]
PlayerStats.objects.filter(user=user).update(**updated_stats) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T10:55:36.147

一种选择是逐个更新字段。

此代码*不会*一次更新所有字段（因此它可能很慢，db-access-wise），但它是安全的（没有死锁，没有丢失更新）。

```
user_stats = PlayerStats.objects.get(user=user)
for stat, increment in new_stats.iteritems():
    user_stats.update(**{ stat: F(stat) + increment }) 
```

# php - 如何将javascript动态添加到带有php代码的php页面

> ID：15574190
> 
> 赞同：-1
> 
> 时间：2013-03-22T15:33:31.677
> 
> 标签：php, javascript, jquery, mysql

解决了

```
<?php $startPage = $_COOKIE["currentPage"];?>
<script type="text/javascript">
var startPageVal = <?php echo $startPage; ?>;
<?php echo base64_decode($pajinate_js); ?>
</script> 
```

而 $pajinate_js 是下面的代码，而不是 startPage ： startPageVal

* * *

我无法弄清楚如何从表单中添加 JavaScript。基本上我有这样的代码（忽略脚本本身而不是一行（startPage）：

```
$(function(){
 /* initiate the plugin */
 $("div.holder").jPages({
     containerID  : "content",
     perPage      : 2,
     startPage    : <?php echo $_COOKIE["currentPage"]; ?>,
     startRange   : 1,
     midRange     : 5,
     endRange     : 1,
     }      
}); 
```

如果我立即将代码放在 PHP 页面中，我会得到 startPage : 3 （或我得到的任何值），但如果我通过 Textarea 在浏览器源代码中动态执行，我会得到纯文本：

```
startPage : <?php echo $_COOKIE["currentPage"]; ?> 
```

结果，这将导致整个事情不起作用。我正在使用 base64_decode 和 base64_encode 将其通过数据库，否则 mysql insert 语句不起作用。

希望你明白我的意思。有人知道如何绕过它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:43:22.337

伙计，我已经测试了这个例子并且它有效，尝试像这样合并 php 和 javascript：

```
<html>
<form  method="post" >
<input type="text" value="10" name="input">
<input type="submit" value='submit'>
</form>

<script type="text/javascript">
  var x = <?php echo $_POST['input']; ?> ;
  alert(x);
</script>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:43:34.790

这取决于您使用的报价。

```
<?php

$js = '$(function(){
 /* initiate the plugin */
 $("div.holder").jPages({
     containerID  : "content",
     perPage      : 2,
     startPage    : '.$_COOKIE["currentPage"].',
     startRange   : 1,
     midRange     : 5,
     endRange     : 1,
     }      
});';
echo $js;

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:40:05.860

好的，我想我明白了问题所在 - 抱歉花了几分钟才明白。你有你的脚本/模板或存储在数据库中的任何东西，需要 PHP 变量中的值 - 只有你无法解析该变量在写入数据库之前，因为它是特定于运行脚本的用户的 cookie 值。因此，您已经将 PHP 代码写入数据库，希望在运行数据库查询***后***对其进行评估？我对么？

这不是它的工作方式 - 虽然*“技术上”*可以通过这种方式将它破解在一起，但这是非常糟糕的做法，所以......

您真正想要做的是即时构建脚本。例如，您的脚本可以存储为带有一些描述**标签**的字符串，稍后您可以将其换出：

```
$(function(){
  /* initiate the plugin */
  $("div.holder").jPages({
  containerID  : "content",
  perPage      : 2,
  startPage    : %%COOKIEVAL%%,
  startRange   : 1,
  midRange     : 5,
  endRange     : 1,
  }      
}); 
```

然后从数据库中检索它后，您可以运行以下内容：

```
$script = val_from_db(); // whatever
echo str_replace('%%COOKIEVAL%%', $_COOKIE["currentPage"], $script); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:05:12.950

尝试这个：

```
<?php    
    $js = '<script>$(function(){
     /* initiate the plugin */
     $("div.holder").jPages({
         containerID  : "content",
         perPage      : 2,
         startPage    : '.$_COOKIE["currentPage"].',
         startRange   : 1,
         midRange     : 5,
         endRange     : 1,
         }      
    });<script>';
    echo $js;
?> 
```

# html - 在 1000% 宽度的容器内将几个链接居中？

> ID：15574192
> 
> 赞同：0
> 
> 时间：2013-03-22T15:33:32.007
> 
> 标签：html, css

我有一个导航项目列表，我希望最终能够浏览这些项目，因此我创建了一个无序列表，该列表最初的宽度为 1000% 用于测试，并且链接位于内联块中。如果有足够的链接来填满页面的整个宽度，这很有效，但是如果只有几个链接它们会卡在导航的左侧，理想情况下我想做的就是让这些居中。我尝试添加`text-align: center`到导航，但这会将链接集中在 1000% 宽的空间中，而不是 100% 的页面宽度。任何人都可以推荐一个解决方案，因为我认为这可以通过 CSS 来实现

**JS Fiddle**（只有几个链接）：http: [//jsfiddle.net/HS4VE/](http://jsfiddle.net/HS4VE/)

**CSS**

```
nav {
    padding: 10px 0;
    overflow: hidden;
    text-align: center;
    border: 1px solid #cccccc;
    border-left: 0;
    border-right: 0;
}

nav li {
    display: inline-block;
    vertical-align: middle;
    zoom: 1;
    margin-right: -4px;
    position: relative;
}

nav a {
    color: white;
    background-image: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #454545), color-stop(100%, #363636));
    background-image: -webkit-linear-gradient(#454545, #363636);
    background-image: -moz-linear-gradient(#454545, #363636);
    background-image: -o-linear-gradient(#454545, #363636);
    background-image: linear-gradient(#454545, #363636);
    font-size: 14px;
    height: 25px;
    line-height: 25px;
    padding: 0 15px;
    width: 186px;
    display: block;
    border-right: 1px solid white;
    text-align: center;
  }

nav a.is-active {
background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#fe57ae), to(#fe329b));
background-image: -webkit-linear-gradient(#fe57ae, #fe329b);
background-image: -moz-linear-gradient(#fe57ae, #fe329b);
background-image: -o-linear-gradient(#fe57ae, #fe329b);
background-image: linear-gradient(#fe57ae, #fe329b);
}

.inner {
    width: 1000%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:43:11.827

用这个：

```
.inner {
    white-space:nowrap;
    max-width: 1000%;
} 
```

演示：http: [//jsfiddle.net/HS4VE/3/](http://jsfiddle.net/HS4VE/3/)

# javascript - 检测用户点击与 jquery .click()

> ID：15574197
> 
> 赞同：1
> 
> 时间：2013-03-22T15:33:54.680
> 
> 标签：javascript, jquery, click

所以我`<a href="..`在页面上有一些标签，它们有一个内联`onclick`属性。如果用户点击了一个并且没有登录，他们将被提示登录，然后在页面上刷新 jquery 将触发`.click()`元素`<a>`将用户带到他们最初想去的地方。

由于弹出窗口阻止程序问题，如果 jquery 触发，`.click()`我会在同一窗口中打开链接。

但是，如果用户已经登录，我想单击链接以在新选项卡中打开。这是我在 Chrome 中运行良好的代码，但 FireFox 对此很生气 - 说“事件未定义”。

```
 <a href="#" onclick="genericActionComplete('12345', this, 'http://www.myurl.com', false, e)

function genericActionComplete(actionId, ctl, url, markComplete, e) {
    if(event.x != null){   // User Clicked - open url in new tab  
         window.open(url);
    }

    else{    // Click performed by script after logIn , open in same tab to prevent Pop-Up Blocker

     window.location = url;   
    }
} 
```

我尝试通过`this`并`e`尝试`event`在 firefox 中使用但没有运气，我正在检查 event.x 因为如果用户用鼠标单击链接，它将有一个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:41:04.047

当然事件是未定义的......传递给函数的最后一个参数是事件，由`e`函数定义中的变量引用。

```
function genericActionComplete(actionId, ctl, url, markComplete, e) 
```

但是将`e`HTML 作为参数传递不会传递`event`对象，它被称为`event`. 改变

```
<a href="#" onclick="genericActionComplete('12345', this, 'http://www.myurl.com', false, e)">
<!-- ===================================================================================/\ 
```

到

```
<a href="#" onclick="genericActionComplete('12345', this, 'http://www.myurl.com', false, event)">
<!-- ===================================================================================/\ 
```

你应该没事。您的代码在 chrome 上运行的原因很简单。为了尽可能兼容和宽容，chrome 确实有一个`window.event`属性，就像旧的 IE 一样。由于您的函数的第一行是错误的：

```
if(event.x != null){//should be e.x 
```

JavaScript 的范围扫描解析`event`为`window.event`- 在 IE 和 chrome 中有效，在 FF 中无效。
您应该可以使用那里的所有主要浏览器，但如果您想安全起见，请在检查之前将此行添加到函数中`e.x`：

```
e = e || window.event || {x: null}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T12:47:04.967

使用**不显眼的 javascript**怎么样？请参阅[突兀和不突兀的 javascript 之间的区别](https://stackoverflow.com/questions/8392374/difference-between-obtrusive-and-unobtrusive-javascript)以及[为什么在 HTML 中使用 onClick() 是一种不好的做法？](https://stackoverflow.com/questions/5871640/why-is-using-onclick-in-html-a-bad-practice)

然后你甚至可以“敢”做其他干净的事情。

不知道你会如何在 vanilla javascript 中处理它，但下面是一个使用 jQuery 的解决方案。

查看 jsbin 上的实时示例[http://jsbin.com/lidobarenaku/1/edit?html,js,console,output](http://jsbin.com/lidobarenaku/1/edit?html,js,console,output)

HTML：

```
<a href="#" class="js-hook-for-link">your link</a>
<br><br>
<div class="programmatical-click-on-link">
If you click on this text, the link "your link" will be programmatically triggered.
</div> 
```

**不显眼的 javascript**和 jQuery：

```
$('.js-hook-for-link').on('click', function(event, isProgrammaticalClick ){
  event.preventDefault() ; /* link behavior disabled for demo purpose */

  console.log("on click: "+(isProgrammaticalClick || "isHumanAction !" ));

  if ( isProgrammaticalClick ){ /* JS truthy/falsy value usage */
    /* .. do something on programmatical click ... */
    /* window.location = url;  open url in same tab in your case */
  }
  else {
    /* .. do something on human submission ... */
    /* window.open(url); open url in other tab in your case */
  }
});

$('.programmatical-click-on-link').on('click', function(){
  /* programmatically click on link (notice the flag param added) */
  $('.js-hook-for-link').trigger( 'click' , ['isProgrammaticalClick'] );
}); 
```

注意：我在本例中使用 jQuery 来“挂钩”类名，但没有什么能阻止您使用纯 javascript 或其他 javascript 选择器库（即[http://sizzlejs.com/](http://sizzlejs.com/)，[https://github.com /ded/qwery](https://github.com/ded/qwery)和更多[http://jster.net/category/selector-libraries](http://jster.net/category/selector-libraries) )

# javascript - 默认情况下，console.log 在哪里？

> ID：15574201
> 
> 赞同：3
> 
> 时间：2013-03-22T15:34:05.290
> 
> 标签：javascript

如果我不在其他浏览器中安装 firebug 或等效的，javascript console.log 语句去哪里？

如果没有用于输出的内置位置，该语言如何具有此内置功能？

理想的答案可以让您深入了解 console.log 的工作原理——控制台对象是什么以及它在 DOM 方面做什么，或者以其他方式寻找输出位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T15:35:45.310

`console`对象不是语言的一部分。它由浏览器本机支持（如 Chrome 和较新的 Firefox 版本）或由插件（如 Firebug）添加。

没有“默认”行为。如果您想知道如何`console`手动实现，请查看[Firebug Lite](https://getfirebug.com/firebuglite)。

# css - 使用 CSS 在 SharePoint 2013 的 TopBar 导航中并排（彼此相邻）的 DIV

> ID：15574204
> 
> 赞同：0
> 
> 时间：2013-03-22T15:34:11.293
> 
> 标签：css, sharepoint, html, css-float

我喜欢稍微更改 SharePoint 2013 中的 TopBar 导航。我喜欢只有一行而不是两行...

我喜欢做什么：

**1\. 我喜欢删除包含链接的绿色 DIV：Newsfeed、Skydrive、... (suiteBarLeft)**

A：这个我已经完成了`display: none;`

**2.我喜欢从黄色DIV“s4-ribbonrow”中得到一个相邻的蓝色DIV“suiteBarRight”。DIV“s4-ribbonrow”应该在左侧，DIV“suiteBarRight”应该在右侧，没有任何“宽度”定义......**

答：每次我遇到 DIV“suitebarRight”在 DIV“s4-ribbonrow”后面的问题，但我不能在这里使用“margin or width”标签...

知道我该怎么做吗？

**见下图：** [图片](http://www.projects.harter-web.de/sharepoint/images/SharePoint2013_Ribbon.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:51:47.573

如果您不向我们提供一些可使用的基本代码，就很难为您提供代码解决方案。那就是说...

这应该是您开始所需的大致内容......

```
#suiteBar { float: left; }
#s4-ribbonrow { float: left; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:53:29.017

我自己找到了解决方案：

我不得不使用：

```
overflow: hidden; 
```

感谢您的回答。

问候

# mysql - 糟糕的 SQL 性能

> ID：15574210
> 
> 赞同：1
> 
> 时间：2013-03-22T15:34:32.317
> 
> 标签：mysql, performance

这需要 72 秒：

```
SELECT distinct(meters.id)
FROM meters, meters_tags, houses_tags, tags
WHERE (
        tags.name = "xxx" AND ((
            meters_tags.tag_id = tags.id AND
            meters_tags.meter_id = meters.id
          ) OR (
            houses_tags.tag_id = tags.id AND
            houses_tags.house_id = meters.house_id
          )
        )
      ); 
```

这需要 0.00 秒：

```
SELECT distinct(meters.id)
FROM meters, meters_tags, houses_tags, tags
WHERE (
        tags.name = "xxx" AND ((
            meters_tags.tag_id = tags.id AND
            meters_tags.meter_id = meters.id
          )
        )
      ); 
```

这需要 0.00 秒：

```
SELECT distinct(meters.id)
FROM meters, meters_tags, houses_tags, tags
WHERE (
        tags.name = "xxx" AND ((
            houses_tags.tag_id = tags.id AND
            houses_tags.house_id = meters.house_id
          )
        )
      ); 
```

这两个查询中的每一个本身都不需要时间，但是将它们组合在一起需要 72 秒。我还尝试将其转换为 (query1) OR (query) 而不是 query0 AND ((query1) OR (query2)) 的形式，而且速度也很慢。

这是第一个（慢）查询的描述：

```
+----+-------------+-------------+-------+----------------------------------------------------------------------------------------------------+------------------------------------------+---------+-------+-------+-------------------------------------------------------+
| id | select_type | table       | type  | possible_keys                                                                                      | key                                      | key_len | ref   | rows  | Extra                                                 |
+----+-------------+-------------+-------+----------------------------------------------------------------------------------------------------+------------------------------------------+---------+-------+-------+-------------------------------------------------------+
|  1 | SIMPLE      | meters_tags | index | index_meters_tags_on_tag_id_and_meter_id,index_meters_tags_on_tag_id,index_meters_tags_on_meter_id | index_meters_tags_on_tag_id_and_meter_id | 10      | NULL  |     1 | Using index; Using temporary                          |
|  1 | SIMPLE      | tags        | ref   | PRIMARY,tags_name                                                                                  | tags_name                                | 258     | const |     1 | Using where; Using index                              |
|  1 | SIMPLE      | meters      | index | PRIMARY,index_meters_on_house_id                                                                   | index_meters_on_house_id                 | 5       | NULL  | 45389 | Using index; Using join buffer                        |
|  1 | SIMPLE      | houses_tags | index | index_houses_tags_on_tag_id_and_house_id                                                           | index_houses_tags_on_tag_id_and_house_id | 10      | NULL  |  7158 | Using where; Using index; Distinct; Using join buffer |
+----+-------------+-------------+-------+----------------------------------------------------------------------------------------------------+------------------------------------------+---------+-------+-------+-------------------------------------------------------+ 
```

这些表中没有一个大于 100k 行。当这两个查询单独运行得如此之快时，合并这两个查询可能需要这么长时间？似乎我需要的所有索引都存在，因为仅子查询就足够快了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:39:53.150

仔细查看您的组合查询；它计算houses_tags 与meters_tags 的交叉连接，排序和消除重复项，并将其连接到查询的其余部分。您的两个部分查询都会立即删除houses_tags 或meters_tags，并且只使用其他。因此，戏剧性的速度差异。

建议：学习和使用现代连接语法，如果没有其他原因，只是因为它可以帮助您避免这些病态情况，直到您学会识别它们。

# entity-framework - 实体类型“myViewModel”没有定义键。这不是昨天发生的

> ID：15574213
> 
> 赞同：0
> 
> 时间：2013-03-22T15:34:39.650
> 
> 标签：entity-framework, asp.net-mvc-4, repository, viewmodel, code-first

好的，所以我有点困惑。我有一个 mvc 4 应用程序，它已经运行了好几个星期，直到今天早上我尝试运行它（自昨天上次运行它以来没有进行任何更改），现在我收到这个错误说EntityType 'MyViewModel' 没有定义键。为此 EntityType 定义一个键。该错误在我的通用存储库类中弹出：

```
public virtual TEntity GetByID(object id)
    {
        return dbSet.Find(id);
    } 
```

我的应用程序使用 EF 代码优先方法生成数据库，当我查看表定义时，它会将 ID 属性识别为我的主键，所以我不知道这里发生了什么。

GenericRepository.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;
using System.Data;
using SourceMvc.Models;
using SourceMvc.DAL;
using System.Linq.Expressions;

namespace SourceMvc.DAL
{
public class GenericRepository<TEntity> where TEntity : class
{
    internal StqmContext context;
    internal DbSet<TEntity> dbSet;

    public GenericRepository(StqmContext context)
    {
        this.context = context;
        this.dbSet = context.Set<TEntity>();
    }

    public virtual IEnumerable<TEntity> Get(
        Expression<Func<TEntity, bool>> filter = null,
        Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null,
        string includeProperties = "")
    {
        IQueryable<TEntity> query = dbSet;

        if (filter != null)
        {
            query = query.Where(filter);
        }

        foreach (var includeProperty in includeProperties.Split
            (new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
        {
            query = query.Include(includeProperty);
        }

        if (orderBy != null)
        {
            return orderBy(query).ToList();
        }
        else
        {
            return query.ToList();
        }
    }
    public virtual TEntity GetByID(object id)
    {
        return dbSet.Find(id);
    }

    public virtual void Insert(TEntity entity)
    {
        dbSet.Add(entity);
    }

    public virtual void Delete(object id)
    {
        TEntity entityToDelete = dbSet.Find(id);
        Delete(entityToDelete);
    }

    public virtual void Delete(TEntity entityToDelete)
    {
        if (context.Entry(entityToDelete).State == EntityState.Detached)
        {
            dbSet.Attach(entityToDelete);
        }
        dbSet.Remove(entityToDelete);
    }

    public virtual void Update(TEntity entityToUpdate)
    {
        dbSet.Attach(entityToUpdate);
        context.Entry(entityToUpdate).State = EntityState.Modified;
    }

}
} 
```

我的视图模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using SourceMvc.Models;

namespace SourceMvc.DAL
{
public class QuotesViewModel
{
    //properties
    public General_Info     General_Info    { get; private set; }

    // Constructors

    public QuotesViewModel()
    {

    }

    public QuotesViewModel(General_Info general_info)
    {
        General_Info = general_info;
    } 
```

抛出错误时调用的控制器：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Routing;
using SourceMvc.Models;
using SourceMvc.DAL;

namespace SourceMvc.Controllers
{
    public class VendorController : Controller
    {

        UnitOfWork unitOfWork = new UnitOfWork();

        internal IGeneral_Info_Repository general_info_repository;

        public VendorController()
        {
            this.general_info_repository = new General_Info_Repository(new StqmContext());
        }

        internal VendorController(IGeneral_Info_Repository general_info_repository)
        {
            this.general_info_repository = general_info_repository;
        }

        //
        // GET: /Vendor/

        [HttpGet]
        public ActionResult InitiateQuote()
        {
            return View();

        }

        //
        // POST: /Vendor/
        [HttpPost]
        public ActionResult InitiateQuote(int id = 0)
        {
            /*
             * If the form is filled out correctly 
             * (i.e. an existing quote id # is entered)
             * redirect the user to Vendor/Details/id
             */
            if (ModelState.IsValid)
            {
                int ids = id;
                return RedirectToAction("Overview", "Vendor", new { id = ids });
            }

            return View();
        }

        ////WHEN I SUBIT THE QUOTE ID AND THE OVERVIEW PAGE IS SUPPOSED TO LOAD,
        ///THAT'S WHEN I GET THE ERROR
        //
        // GET: /Vendor/Overview/id

        public ActionResult Overview(int id = 0)
        {
            General_Info general_info = unitOfWork.General_Info_Repository.GetByID(id);
            return View(new QuotesViewModel(general_info));
        } 
```

老实说，我不知道是什么原因造成的，因为就像我说的，这在昨天有效，并且已经工作了数周。提前感谢任何试图提供帮助的人。

这是表格：

```
CREATE TABLE [dbo].[General_Info] (
[ID]              INT            IDENTITY (1, 1) NOT NULL,
[Open_Quote]      DATETIME       NOT NULL,
[Customer_Name]   NVARCHAR (MAX) NULL,
[OEM_Name]        NVARCHAR (MAX) NULL,
[Qty]             INT            NOT NULL,
[Quote_Num]       NVARCHAR (MAX) NULL,
[Fab_Drawing_Num] NVARCHAR (MAX) NULL,
[Rfq_Num]         NVARCHAR (MAX) NULL,
[Rev_Num]         NVARCHAR (MAX) NULL,
CONSTRAINT [PK_dbo.General_Info] PRIMARY KEY CLUSTERED ([ID] ASC)
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:26:01.613

在这种情况下，我认为您可能已经更改了视图模型或 sql 表中的主键约束；因为必须定义主键才能在 EF 生成的模型上使用 Find()。

# java - 如何获取特定的 JSON 数据？

> ID：15574215
> 
> 赞同：0
> 
> 时间：2013-03-22T15:34:45.783
> 
> 标签：java, json, parsing

嗨，我正在尝试从 ReST API 读取 JSON，但由于 mycode 不正确，我得到了一个空指针异常。

我有一个我正在读取的 JSON，看起来像这样：

```
processJSON({
"LocationList":{
  "noNamespaceSchemaLocation":"http://api.vasttrafik.se/v1/hafasRestLocation.xsd",
  "servertime":"16:13",
  "serverdate":"2013-03-22",
  "StopLocation":[{
    "name":"Brunnsparken, Göteborg",
    "lon":"11.967824",
    "lat":"57.706944",
    "id":"9021014001760000",
    "idx":"1"
    },{
    "name":"Brunnsgatan, Göteborg",
    "lon":"11.959455",
    "lat":"57.693766",
    "id":"9021014001745000",
    "idx":"4"
    },{
    "name":"Brunnslyckan, Lerum",
    "lon":"12.410219",
    "lat":"57.812073",
    "id":"9021014017260000",
    "idx":"5"
    }, 
```

现在我想要 JSON 文档中的名称，具体取决于用户输入的内容。

我如何用代码做到这一点？

我的错误代码是这样的：

```
import org.json.simple.JSONObject;
import org.json.simple.JSONValue;

    public class JSONReader {

        private String jsonData = "";

        public String getJsonData(String location){

            try {

                    URL url = new     URL("http://api.vasttrafik.se/bin/rest.exe/v1/location.name?authKey=secret&format=json&jsonpCallback=processJSON&input=" + URLEncoder.encode(location, "UTF-8"));
                    URLConnection connection = url.openConnection();
                    BufferedReader readJsonFile = new BufferedReader(new InputStreamReader(connection.getInputStream(), "UTF-8"));
                    String temp = "";
                    while((temp = readJsonFile.readLine()) != null){
                            jsonData += temp;
                    }
                    readJsonFile.close();

                    System.out.println(jsonData);
                    return jsonData;

            }

            catch (IOException e) {

            }
            return null;
    }

       public void JSONParsing(){

                String location = Planner.getPlanner().getStartingLocation();
                JSONObject obj =(JSONObject)JSONValue.parse(getJsonData(location));

                //Set the text into the JList

                if (obj.containsValue(location));
                obj.get("name");
                }
    } 
```

我想从 JSON 中获取与用户输入相同的位置名称。我如何用代码做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:41:10.667

我认为您是在问如何解析您的`JSONObject`并从中获取用户感兴趣的相应值。下面是一个示例，说明如何拆分`JSONObject`以创建`Map`其键为`String`id 的示例（因为名称不似乎是唯一的），其价值是整体`JSONObject`。您可以使用此映射来查找用户的输入，如果您对此感兴趣，则可以找到合适的 LLA。

```
public Map<String, JSONObject> createLocationMap(JSONObject jsonObj){
    Map<String, JSONObject> nameToLocationMap = new HashMap<String, JSONObject>();
    JSONObject locationList = (JSONObject) jsonObj.get("LocationList");
    JSONArray array = (JSONArray) locationList.get("StopLocation");
    for (int i = 0; i < array.length(); i++) {
        String name = (String) ((JSONObject) array.get(i)).get("id");
        nameToLocationMap.put(name, ((JSONObject)array.get(i)));
    }
    return nameToLocationMap;
} 
```

您可以根据需要调整此方法。例如，如果您对 the`id`和 the之间的关系感兴趣，`name`那么您可以创建一个类似的方法来使用这些值而不是`id`整个`JSONObject'`. 我希望这会有所帮助~

# jquery - Kinetic JQuery 对象 - 获取画布中每个元素的 X/Y

> ID：15574216
> 
> 赞同：0
> 
> 时间：2013-03-22T15:34:47.980
> 
> 标签：jquery, html, canvas, kineticjs

我有设置一个工具的简介，用户可以添加标记点来写关于图像的注释。

我已经使用 Kinetic 库设置了一个画布对象——它被放置在一个包含动态图像的 div 上——用户可以将标记拖到适当的位置。当他们完成添加标记后，我需要扫描画布并将每个元素的 x 和 y 位置写入数组或多个变量 - 这将用于创建注释 PDF 服务器端。

我已经创建了画布对象并且拖动功能工作正常 - 但我不知道如何在完成时扫描画布并循环遍历每个“latestElement”元素以返回 x/y 值 - 有人知道吗？

我的代码如下 -

```
 var stage = new Kinetic.Stage({
    container: 'container',
    width: 455,
    height: 500
  });
  var layer = new Kinetic.Layer();
  var rectX = stage.getWidth() / 2 - 50;
  var rectY = stage.getHeight() / 2 - 25;

  var box = new Kinetic.Circle({
    x: stage.getWidth() / 2,
    y: stage.getHeight() / 2,
    radius: 5,
    fill: 'red',
    stroke: 'black',
    strokeWidth: 4,
    draggable:true
  });

  // add cursor styling

  box.on('dragend', function() {
    var curposX = box.getAbsolutePosition().x;
    var curposY = box.getAbsolutePosition().y;

    alert(curposX  );
    alert(curposY)
  })

  box.on('mouseover', function() {
    document.body.style.cursor = 'pointer';
  });
  box.on('mouseout', function() {
    document.body.style.cursor = 'default';
  });
var curpos = box.getAbsolutePosition().x;
alert(curpos);

  layer.add(box);
  stage.add(layer);

 var countCirc;

function addBox(){
    alert('here')

    var latestElement = new Kinetic.Circle({
        x: stage.getWidth() / 2,
        y: stage.getHeight() / 2,
        radius: 10,
        fill: 'red',
        stroke: 'black',
        strokeWidth: 4,
        draggable:true,

    })
    latestElement.on('dragend', function() {
    var curposX = (this).getAbsolutePosition().x;
    var curposY = (this).getAbsolutePosition().y;

    alert(curposX  );
    alert(curposY)
  })

    layer.add(latestElement);
    latestElement.simulate('mousedown');
    layer.draw();
      } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:58:09.107

您可以使用 Layer.getChildren() 获取该层上的所有对象。

```
var children = layer.getChildren(); 
```

这将为您提供所有圈子的数组。

然后遍历每个子圈和 .getX() / .getY() 并推送到您的数组

```
Var myPoints=[];
For(var i=0; i<children.length; i++){
    var X=children[i].getX();
    var Y=children[i].getY();
    myPoints.push({ x:X, y:Y });
} 
```

# mysql - 在 BIRT 中使用 mysql IN 命令，变量为 301,90,96,121,139,367,291,296,298

> ID：15574221
> 
> 赞同：1
> 
> 时间：2013-03-22T15:34:57.513
> 
> 标签：mysql, birt

我对 BIRT 有疑问。我意识到我不能将 301,90,96,121,139,367,291,296,298 作为字符串传递到此查询“从菜肴中的菜肴中选择菜肴名称。”。但是我的数据库的结构必须使用逗号命名的 id。有没有办法解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:41:21.577

解决方法是使用 MySQL 函数[FIND_IN_SET()](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)：

```
SELECT dishes.name from dishes where FIND_IN_SET(dishes.id, ?) 
```

但请注意，这将非常糟糕。无法将搜索索引到以逗号分隔的值列表的中间。所以这必然会导致每次都进行表扫描。

如果您需要在列表中搜索单个值，更好的选择是[避免将列表存储为逗号分隔的字符串。](https://stackoverflow.com/questions/3653462/is-storing-a-delimited-list-in-a-database-column-really-that-bad/3653574#3653574)

* * *

回复您的评论：

标准化为默认值。然后进行非规范化以优化特定查询。请注意，非规范化优化了针对数据的一个查询，但以牺牲其他查询为代价。

例如，如果您有`books <--> authors`，您可以通过将一本书的作者作为逗号分隔的列表存储在 books 表中来进行非规范化。这样可以快速查询一本书的所有作者，因为您避免了连接。但这会降低查询给定作者的所有书籍的效率。

因此，您必须知道哪些查询需要最高效，哪些查询可以降低效率。这完全取决于您的应用程序。

如果您需要所有查询都同样有效，请将数据保持为规范化形式。

# javascript - 用于提交表单按钮的 Javascript

> ID：15574222
> 
> 赞同：0
> 
> 时间：2013-03-22T15:35:00.870
> 
> 标签：javascript, button, onclick

我想通过 Javascript 生成也可以执行表单功能的按钮。这是我正在做的事情，但是当我单击时我的表单功能不起作用。请帮我解决这个问题。

外部Javascript

```
var onef    
onef="Apple"    
var twof    
twof="Orange" 
```

现在这就是我在 HTML 页面中所做的

```
<script>
    document.write("<button>")      
    document.write(onef)    
    onClick=("this.form.T4.value++;")
</script>
<script>
    document.write("<button>")
    document.write(twof)
    onClick=("this.form.T5.value++;")
</script> 
```

该脚本工作正常，但 onClick 功能不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:46:11.120

我以前从未见过这样的代码来使用 JavaScript 创建按钮。我会选择更像这样的东西；

```
var onef ="Apple";
var twof ="Orange"; 

function createButton(context, func, text){
    var button = document.createElement("input");
    button.type = "button";
    button.value = text;
    button.onclick = func;
    context.appendChild(button);
}

createButton(document.body, function(){ this.form.T4.value++; }, onef);
createButton(document.body, function(){ this.form.T5.value++; }, twof); 
```

一个例子可以在这里看到[http://jsfiddle.net/4yV4V/](http://jsfiddle.net/4yV4V/)

这为您提供了一些可重用的代码来创建按钮并传递您想要的任何内容`onclick`。您也可以针对其他情况自定义此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:40:11.153

难道你不必这样做：

```
<script>
    document.write("<button ")      
    document.write('onClick="this.form.T4.value++;">')
    document.write(onef)    
    document.write("</button>")
</script> 
```

您在原始代码中所做的是构建字符串“<button>apple”并创建一个名为 onClick 的变量，其值为“this.form.T4.value++;”。我相信你需要做的是构建一个包含整个按钮标签的字符串，这就是上面的代码正在做的事情。

# android - eglsurface 在进入没有主题的活动时被破坏

> ID：15574223
> 
> 赞同：0
> 
> 时间：2013-03-22T15:35:01.940
> 
> 标签：android, surfaceview, egl

所以基本上我有一个应用程序，它可以进行一些开放式 gl 渲染，但也可以进行一些用户输入的活动来设置一些东西。

奇怪的事情，但是如果我进入一个没有以下属性的活动

android:theme="@style/ThemeDialog"

其中 ThemeDialog 基本上是一种将 parent 属性设置为的样式

@android:style/Theme.Holo.Dialog"

表面视图被破坏。一个与另一个到底是如何关联的？我似乎找不到合理的解释。你能帮我么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T21:23:10.020

默认主题使用不透明窗口。这意味着当您打开一个`Activity`没有在清单中指定的主题时，它会隐藏`Activity`包含您的`SurfaceView`. 当 an`Activity`被隐藏时，系统可以自由地回收表面。当您回到原来的`Activity`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T15:02:59.477

Let's say I have activities A B C D and E.

A B C D - all have the same theme, Theme.Holo.Dialog E - doesn't have any theme specified (so the default, opaque one)

A - this activity holds the surface that I draw on

If I open A, then B (over A), then C (over B), then D (over C), the surface is OK.

If I open A, then B (over A), then C (over B), then E (over C), the following happens: 1\. when switching from C to E, the surface is destroyed and 2\. when going back from E to C, the surface is restored (surface changed event)

As you can see, A is far behind this sequence of activities. So what does A's surface got to do with the fact that E has no theme? Why is A'surface being destroyed when switching from a themable activity (C) to a non themable one (E)?

# sql - 使用选择的正则表达式替换

> ID：15574225
> 
> 赞同：0
> 
> 时间：2013-03-22T15:35:09.243
> 
> 标签：sql, regex, sql-server-2012

我想使用正则表达式从表中删除特殊字符（！、"、#、$、%、&、/. (,)、=、?、|)

```
SELECT
  '|R!$#&2-_D%2' as Original, 
  UPPER
  (
    REPLACE
    (
      ( MDS_Demo.mdq.regexReplace
        ('|R!2- _D%2',
         '[!|”#$%&/()=?»«;,:._]', '', 0
        )
      )
    , '  ', ' '
    ) 
  ) as Correct 
```

要删除的字符和单词列表在一个表中，所以我想替换表达式中标识的字符列表，并使用一个选择表，其中列出了所有要删除的特殊字符。

```
SELECT
  '|R!$#&2-_D%2' as Original, 
  UPPER(REPLACE((MDS_Demo.mdq.regexReplace('|R!2- _D%2',
    < SELECT SPECIAL_CHARACTERS FROM TABLE01 >
    , '', 0)), '  ', ' ') ) as Correct 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T21:02:13.397

我相信您可以将任何字符串表达式替换为`(SELECT ...)`

即`SELECT ltrim( (SELECT ' trimmed') ) as test`在这里工作
[http://sqlfiddle.com/#!6/8222f/4](http://sqlfiddle.com/#!6/8222f/4)

..那么您`< SELECT SPECIAL_CHARACTERS FROM TABLE01 >`只需将所需的 SELECT 放在括号内就可以了吗？

# sql-server - 在两个表的同一列上查找缺失值

> ID：15574230
> 
> 赞同：5
> 
> 时间：2013-03-22T15:35:24.683
> 
> 标签：sql-server, tsql, compare, diff, missing-data

假设您在 SQL Server 数据库中有两个表，两个表的架构相同。我想比较两个表上的单个列，并找到 table1 中缺少但在 table2 中的值。在每个查询中获得一个不同的列表后，我一直在 Excel 中使用宏手动执行此操作，但如果我有查询，工作量会减少。如何通过 T-SQL 找到丢失的记录？我想对以下数据类型执行此操作：`datetime, nvarchar & bigint`.

```
SELECT DISTINCT [dbo].[table1].[column1]
FROM [dbo].[table1]
ORDER BY [dbo].[table1].[column1] DESC

SELECT DISTINCT [dbo].[table2].[column1]
FROM [dbo].[table2]
ORDER BY [dbo].[table2].[column1] DESC 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T15:37:32.330

有几种方法可以做到这一点......

`LEFT JOIN`：

```
SELECT DISTINCT t2.column1
FROM dbo.table2 t2
LEFT JOIN dbo.table1 t1
  ON t2.Column1 = t1.Column1
WHERE t1.Column1 IS NULL 
```

`NOT EXISTS`：

```
SELECT DISTINCT t2.column1
FROM dbo.table2 t2
WHERE NOT EXISTS (
  SELECT 1
  FROM dbo.table1 t1
  WHERE t1.column1 = t2.column1
) 
```

`NOT IN`：

```
SELECT DISTINCT t2.column1
FROM dbo.table2 t2
WHERE t2.column1 NOT IN (
  SELECT t1.column1
  FROM dbo.table1 t1
) 
```

这些方法的行为和效率略有不同...主要基于`NULL`列中值的存在，因此请尝试每种方法以找到最有效的方法，以提供您期望的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T15:38:48.520

```
SELECT DISTINCT [dbo].[table2].[column1]
FROM [dbo].[table2]
except
SELECT DISTINCT [dbo].[table1].[column1]
FROM [dbo].[table1] 
```

Table2 中 column1 的所有值，但 Table1 的 column1 中不存在

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T15:36:50.283

基本上，您可以使用`LEFT JOIN`.

`TableB`在这种情况下被设置为主表。通过`TableA`using加入它`LEFT JOIN`，在 a 上不匹配的记录`TableA`仍将在结果列表中，但它们的值为*NULL*。所以要过滤掉不匹配的记录，添加一个过滤条件，只选择tableA上具有*NULL值的记录。*

```
SELECT  b.*
FROM    tableB b
        LEFT JOIN tableA a
            ON a.column1 = b.column1
WHERE   a.column1 IS NULL 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T15:39:50.027

`SQL Server 2005`之后你可以使用`Except`

```
SELECT DISTINCT [dbo].[table2].[column1]
FROM [dbo].[table2]
Except
SELECT DISTINCT [dbo].[table1].[column1]
FROM [dbo].[table1] 
```

# php - PHP OOP 嵌套方法？

> ID：15574234
> 
> 赞同：-1
> 
> 时间：2013-03-22T15:35:44.113
> 
> 标签：php, function, nested

我知道您可以在 PHP 中使用嵌套函数。

这是问题：

我有这个代码：

```
 class ClassName
    {
        private $data;

        function __construct()
        {

        }

        public function myFunction()
        {
            if($condition1 != NULL)
            {
                if(!empty($condition2) && $this->data->condition3 == NULL)
                {

                    $this->do1($condition2);
                    $this->do3($condition2);
                    $this->do3($condition2);
                    $this->doBLAH();

                }
                elseif(empty($checkoutItem->rebillCheckoutItemId))
                {
                    $this->do1($condition2);
                    $this->do3($condition2);
                    $this->do3($condition2);
                    $this->doSomethingElse();

                }
            }               

        }

    } 
```

如您所见，这部分是多余的：

```
$this->do1($condition2);
$this->do3($condition2);
$this->do3($condition2); 
```

所以摆脱冗余，我可以创建一个新方法：

```
 private function doSomething($condition2)
    {
        $this->do1($condition2);
        $this->do3($condition2);
        $this->do3($condition2);        
    } 
```

但我不想。它可能真的把我的代码搞砸了。

只是想知道是否可以做类似的事情：

```
 public function myFunction()
        {
            if($condition1 != NULL)
            {
                if(!empty($condition2) && $this->data->condition3 == NULL)
                {

                    $this->doSomething($condition2);
                    $this->doBLAH();

                }
                elseif(empty($checkoutItem->rebillCheckoutItemId))
                {
                    $this->doSomething($condition2);
                    $this->doSomethingElse();

                }
            }
            function doSomething($condition2)
            {
                $this->do1($condition2);
                $this->do3($condition2);
                $this->do3($condition2);        
            }               

        } 
```

我试过了，但它抛出了一个`Fatal error: Call to undefined function doSomething()`. 有什么技巧吗？难道我做错了什么？

**更新**

我在 YII 框架中工作，它给了我一个例外：`BlahWidget and its behaviors do not have a method or closure named "doSomething"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:42:32.757

您可以改为在本地范围内定义匿名函数。否则，该函数仍将定义在全局范围或命名空间中。

这应该从 PHP 5.4 开始工作，因为 $this 在闭包中使用。在 5.3 中，您将需要做额外的体操。见下文。

```
 public function myFunction()
    {
        $do = function ($condition2) {
            $this->do1($condition2);
            $this->do3($condition2);
            $this->do3($condition2);        
        };

        if($condition1 != NULL)
        {
            if(!empty($condition2) && $this->data->condition3 == NULL)
            {

                $do($condition2);
                $this->doBLAH();

            }
            elseif(empty($checkoutItem->rebillCheckoutItemId))
            {
                $do($condition2);
                $this->doSomethingElse();

            }
        }               

    } 
```

现在是5.3版本。请注意，调用的函数需要是公共的。

```
 public function myFunction()
    {
        $that = $this;
        $do = function ($condition2) use ($that) {
            $that->do1($condition2);
            $that->do3($condition2);
            $that->do3($condition2);        
        };

        if($condition1 != NULL)
        {
            if(!empty($condition2) && $this->data->condition3 == NULL)
            {

                $do($condition2);
                $this->doBLAH();

            }
            elseif(empty($checkoutItem->rebillCheckoutItemId))
            {
                $do($condition2);
                $this->doSomethingElse();

            }
        }               

    } 
```

在这样的示例中，对于 5.3，我宁愿在类上创建一个私有方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:37:36.610

首先，你不能有一个名为`do()`. 它是[保留](http://www.php.net/manual/en/reserved.keywords.php)的。

因此，让我们将您的更改`do()`为`do_somthing()`. 然后你需要在`$this->do_something()`任何你想使用它的地方调用它。

# css - PrimeFaces 样式表未正确加载

> ID：15574243
> 
> 赞同：3
> 
> 时间：2013-03-22T15:36:09.203
> 
> 标签：css, jsf, primefaces, frontend

我正在用 Maven 开发一个 primeface 项目。primeface 包已加载到我的 POM 文件中。有时当我进入网站时，primeface 样式表无法正常工作。这意味着我无法选择复选框或进行任何前端交互。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T18:21:24.350

您可能忘记在遇到问题的页面中添加 < ***h:head /> 占位符。***核实。

# objective-c - STAssertTrue 没有像我预期的那样返回

> ID：15574247
> 
> 赞同：0
> 
> 时间：2013-03-22T15:36:15.313
> 
> 标签：objective-c, ocunit

我刚刚开始 OCUnitTesting。我不认为我的代码是错误的，但问题可能是我在某个地方犯了一个小错误。我有一个函数

```
- (BOOL)tooManyCouplesForER:(NSMutableArray *)startfield
{
    NSLog(@"Size %i", [startfield count]);
    if ([startfield count] > 7) {
        return true;
    } else{
        return false;
    }
} 
```

在我的 ViewController 里面`StartfieldTableViewController`。

我将 UnitTests 包含在我的项目中，并且`AppTests.h`我做到了

```
#import "StartfieldTableViewController.h" 
```

和

```
@property (strong, nonatomic) StartfieldTableViewController *start; 
```

在`AppTests.m`我写了一个测试

```
- (void)testTooManyCouplesForER
{
    NSMutableArray *testField = [[NSMutableArray alloc] initWithObjects:@"1", @"1", @"1", @"1", @"1", @"1", @"1", @"1", @"1", @"1", nil];
    BOOL sum = [self.start tooManyCouplesForER:testField];

    NSLog(@"BOOL = %@\n", (sum ? @"YES" : @"NO"));
    STAssertTrue(sum, @"This should have returned true, but it returned false");
} 
```

所以我希望测试能够通过，因为我给了它一个包含 10 个元素的数组。它失败。所以我做了NSLog，在测试中确实是NO，但是在运行时测试函数，使用相同的testField-array，这是真的。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:43:01.357

在单元测试中，执行前检查

```
 BOOL sum = [self.start tooManyCouplesForER:testField]; 
```

那 self.start 不是零。

```
 STAssertNotNil(self.start,@"You forgot to set the controller")
  BOOL sum = [self.start tooManyCouplesForER:testField]; 
```

我敢打赌它没有在单元测试中被初始化，所以 sum 为 nil，并且测试失败。

# javascript - 两个按钮显示相同的 div。一键提供更多选项可见性

> ID：15574250
> 
> 赞同：0
> 
> 时间：2013-03-22T15:36:28.400
> 
> 标签：javascript, jquery, html, css, asp.net

我有两个`<input type=Button>`。单击时，两者都将加载一个包含在 div 中的对话框。

我想在 div 中添加一个单独的按钮和文本，只有在单击第二个按钮时才能查看。而不是为 btn 1 重写这个，为 btn 2 重写一个。如果单击第二个 btn，我怎样才能使额外的文本和按钮可用？

```
<div id="LabourOrPlantDialog" title="Comments" style="display:none;">
   <table class="table">
      <tr>
         <th>Item</th>
      </tr>
      <tr>
         <td id="Item"></td>
      </tr>
   </table>
   <br />
   <textarea id="ExistingComments" type="text" runat="server" rows="7" cols="30" maxlength="2000"></textarea>
   <input id="SubmitComment" type="button" value="Submit" onclick="SubmitButton()" />

   <!-- BELOW IS THE TEXT AND BTN I ONLY WANT AVAILABLE WHEN 2ND BTN IS CLICKED -->

   <input type="text" name="BoqTextBox" />
   <input type="AddValueButton" value="+" onclick="Add(BoqTextBox)" />                          
</div> 
```

某种布尔我猜？以前从未这样做过......任何帮助都会很棒。谢谢

* * *

编辑：

```
<input id="SubmitCommentsForOne" type="button" value="Comments" onclick="ShowComment('<%: item.ItemCode %>')" />

<input id="SubmitCommentsForTwo" type="button" value="Comments" onclick="ShowComment('<%: item.Number %>')" /> 
```

```
var Code
function ShowCommentBoxForBOQ(Number) {
   Code = Number;
   Work.DisplayBoxForBOQ(Number);
   $("#LabourOrPlantDialog").dialog({ modal: true });
} 
```

`LabourOrPlantDialog`加载 div。

* * *

编辑：我可以提供任何其他有帮助的东西吗？有人知道个子高吗？感谢您的任何回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:57:38.133

1.  将其添加到您想要的新文本和按钮的任何位置：

    ```
    <div id="hiddenBox">
      <input type="text" name="BoqTextBox" />
      <input type="button" value="+" onclick="Add(BoqTextBox);" /> 
    </div> 
    ```

2.  在样式表的某处添加：

    ```
    #hiddenBox{display:none;} 
    ```

3.  在你的 javascript 中添加这个

    ```
    $("#SubmitCommentsForTwo").click(function(){
        $("#hiddenBox").show();  
    }); 
    ```

# css - Firefox 中的 CSS3 关键帧动画不起作用

> ID：15574252
> 
> 赞同：0
> 
> 时间：2013-03-22T15:36:37.350
> 
> 标签：css, firefox, css-animations

我有以下css3规则

```
#sun, #sun div { 
    position:absolute;
    border-radius:1000px;
    -webkit-border-radius:1000px;
    -moz-border-radius:1000px;
    -ms-border-radius:1000px;
    -o-border-radius:1000px;
    animation:sunrise 3.2s ease 0 infinite alternate;
    -webkit-animation:sunrise 3.2s ease 0 infinite alternate;
    -moz-animation:sunrise 3.2s ease 0 infinite alternate;
    -ms-animation:sunrise 3.2s ease 0 infinite alternate;
    -o-animation:sunrise 3.2s ease 0 infinite alternate;
}

@-moz-keyframes sunrise {
   0%  {background:rgba(255,255,204,.23);}
  75% { background:rgba(255,255,204,0.5); } 
  100% { background:''; }
} 
```

但是，Firefox 实现似乎不起作用。背景颜色均以 rgba 格式设置，但每个`#sun`div 具有不同的颜色。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:01:35.110

您发布的代码非常不完整，但是有很多东西是不好的。

*   你应该**总是****最后**写**无前缀**的版本，而不是在有前缀的版本之前。
***   `-ms-border-radius`并且`-o-border-radius` ***从未存在过***！而且除非你需要支持FF3.6，否则`-moz-border-radius`是没用的。`-webkit-border-radius`这些天也几乎没用 - 见[http://caniuse.com/#feat=border-radius](http://caniuse.com/#feat=border-radius)*   Firefox 16+（当前版本为 19）支持无前缀关键帧动画！见[http://caniuse.com/css-animation](http://caniuse.com/css-animation)*   `0s`，不`0`！加上延迟的默认值恰好是`0s`无论如何，所以你可以省略它并直接写`animation: sunrise 3.2s infinite alternate;`（同样的方式你可以省略`ease`，这是计时函数的初始值）*   `background: rgba(255,255,204,0)`，不`background: ''`！**

 **还有一个问题：为什么要使用这么大的`border-radius`？我的笔记本电脑屏幕比任何需要这么大的`border-radius`. 如果你只是为了制作一张光盘，请给你的元素 equal `width`and`height`和 set `border-radius: 50%`。**

# php - 使用 -> 运算符对受保护的属性调用 __get()？

> ID：15574253
> 
> 赞同：1
> 
> 时间：2013-03-22T15:36:39.830
> 
> 标签：php, magic-methods, lazy-loading

我的团队正在使用延迟加载技术从我们的数据库中加载子对象。为此，我们使用神奇的 __get() 方法并进行数据库调用。我们所有的属性都受到保护，所以 __get 方法是从对象外部调用的，但我们的问题是它不会在不使用的情况下从对象内部调用`$this->__get($name);`

所以我的问题是：是否可以强制 __get() 使用正常的链接运算符甚至从对象内部调用？

如果我想链接对象访问，我目前必须这样做：

```
$this->__get('subObject')->__get('subObject')->__get('subObject') 
```

是否可以编写以下内容，但仍然调用 __get()？

```
$this->subObject->subObject->subObject 
```

谢谢，乔丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:46:30.413

约旦，

PHP 不会调用该`__get()`方法，除非该属性不可访问——要么是因为它不存在，要么是因为可见性。当属性在调用范围内隐藏时，会调用 __get() 方法，因为该属性不可访问。当属性被引用并且可用于调用范围时，__get() 将*永远不会*触发。（这并不意味着为现有/可访问的财产开火。）

要解决此问题，您必须重命名内部属性。要么为它们加上一个名称、下划线，要么将它们存储在一个具有特殊名称的公共数组参数中。以下内容有些人为，但它应该展示您如何处理这种情况。

```
class MyObject {
   protected $lazyloads = array();

   protected function lazyload($relation) {
     // ...
   }

   public function __get($key) {
     if (isset($this->lazyloads[$key]) {
       return $this->lazyloads[$key];
     } else {
       return $this->lazyload($key);
     }
   }
} 
```

见：[http ://www.php.net/manual/language.oop5.overloading.php#object.get](http://www.php.net/manual/language.oop5.overloading.php#object.get)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:48:55.367

@Robert K 或者（例如）：

```
class A
{
    protected $objects = array();

    public function __get($name)
    {
        if(isset($this->objects[$name])) {
            return $this->objects[$name];
        }
        return null; // or throw \Exception
    }
}
class B
{
    protected $objects = array();

    public function __get($name)
    {
        // for example: $this->objects[$name] is type of A
        if(isset($this->objects[$name])) {
            return $this->objects[$name];
        }
        return null; // or throw \Exception
    }
} 
```

每个返回的对象都必须有一个返回对象的魔术方法`__get`。

# node.js - 是否有可能在猫鼬中有一系列替代子文档模式

> ID：15574262
> 
> 赞同：3
> 
> 时间：2013-03-22T15:37:00.000
> 
> 标签：node.js, mongodb, mongoose

**是否有可能在猫鼬中有一系列替代子文档模式？**

例如，假设这个场景：如果我有一个人的主模式，并且我有一个名为车辆类型数组的字段，我希望能够定义子文档模式，但是对于每种车辆类型（汽车、摩托车、自行车、公共汽车等）：

```
var car = new mongoose.Schema({
    make: { type: String, required: true, default: 'Ford', trim: true },
    model: { type: String, trim: true },
    wheels: Number,
});
var motorbike = new mongoose.Schema({
    make: { type: String, required: true, default: 'Honda', trim: true },
    model: { type: String, trim: true },
    seats: Number,
});
var bike = new mongoose.Schema({
    make: { type: String, required: true, default: 'MuddyFox', trim: true },
    model: { type: String, trim: true },
    lights: Number,
});
var bus = new mongoose.Schema({
    make: { type: String, required: true, default: 'MAN', trim: true },
    model: { type: String, trim: true },
    dents: Number,
});

/* person */
var person = new mongoose.Schema({
    name: { type: String, required: true, default: 'Joe Bloggs', trim: true },
    timeCreated: { type: Date, required: true, default: Date.now },
    vehicles: [car, motorbike, bike, bus] /* this is what i want to do */
});

db.model('person', person); 
```

注意人员模式。

因此，该人可以拥有任何这些车辆，但每辆车的数据仍会根据其自己的模式进行验证。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-31T13:19:37.110

有一个名为 mongoose-schema-extend 的 mongoose 插件，它允许您为 Mongoose 启用模式继承，基本上我认为，您正在寻找这个功能。

请检查 github 项目：

*   [https://github.com/briankircho/mongoose-schema-extend](https://github.com/briankircho/mongoose-schema-extend)

您可以创建一个`Vehicle`架构，将其作为数组添加到`Person`架构中，并`Vehicle`针对您不同类型的车辆进行扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-06T06:30:12.173

我找不到作为数组传递的多个嵌入式文档的任何示例。

也许你可以重新调整这样的事情：

```
var car = new mongoose.Schema({
    make: { type: String, required: true, default: 'Ford', trim: true },
    model: { type: String, trim: true },
    wheels: Number,
});
var motorbike = new mongoose.Schema({
    make: { type: String, required: true, default: 'Honda', trim: true },
    model: { type: String, trim: true },
    seats: Number,
});
var bike = new mongoose.Schema({
    make: { type: String, required: true, default: 'MuddyFox', trim: true },
    model: { type: String, trim: true },
    lights: Number,
});
var bus = new mongoose.Schema({
    make: { type: String, required: true, default: 'MAN', trim: true },
    model: { type: String, trim: true },
    dents: Number,
});

var transport = new mongoose.Schema({
    car: [car],
    motorbike: [motorbike],
    bike: [bike],
    bus: [bus]
});

/* person */
var person = new mongoose.Schema({
    name: { type: String, required: true, default: 'Joe Bloggs', trim: true },
    timeCreated: { type: Date, required: true, default: Date.now },
    vehicles: [transport]
});

db.model('person', person); 
```

如果这不起作用，那么如[this SO question](https://stackoverflow.com/questions/11137239/querying-nested-embedded-documents-with-mongoose)中所述，您可以使用[mongoose populate](http://mongoosejs.com/docs/populate.html)。[在 Mongoose Deep 3.6 中添加了深度种群后，](https://github.com/LearnBoost/mongoose/issues/1377#issuecomment-15911192)此方法现在更有效 。

所以你可以这样做：

```
var personSchema = Schema({
  _id     : Number,
  name    : String,
  age     : Number,
  stories : [{ type: Schema.Types.ObjectId, ref: 'Story' }]
});

var storySchema = Schema({
  _creator : { type: Number, ref: 'Person' },
  title    : String,
  fans     : [{ type: Number, ref: 'Person' }]
});

var Story  = mongoose.model('Story', storySchema);
var Person = mongoose.model('Person', personSchema); 
```

还有一个名为[mongoose-deep-populate](https://github.com/buunguyen/mongoose-deep-populate)的 mongoose 插件来辅助这个功能，它是最新的。

# javascript - 网页延迟android睡眠

> ID：15574266
> 
> 赞同：0
> 
> 时间：2013-03-22T15:37:18.457
> 
> 标签：javascript, android, jquery

我正在开发一个网页，上面有一些扬琴指法谱。在使用中，我的平板电脑将在我学习标签的过程中进入睡眠状态。是否可以在网页中延迟睡眠？不防。可能多花 10 或 15 分钟。最好使用jquery。再次感谢大家，托德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:41:50.603

我在这个时候非常怀疑。这将消耗大量资源，如果其他网站这样做，我将不会访问它们。

# php - PHP 会话 IDS 不同

> ID：15574270
> 
> 赞同：0
> 
> 时间：2013-03-22T15:37:26.440
> 
> 标签：php, session

我的会议工作正常，但今天却不行。

我已经调试了几个小时以尝试找出问题所在，并且我注意到每个页面上的 session_id() 都不同 - 所以我的问题是：

*   我想这就是为什么我的会话变量没有按预期返回的原因。我该如何纠正这个问题？
*   为什么它会在昨天（以及过去 7 天）工作，但问题现在出现了。我确定我没有更改任何相关代码。

谢谢

（已解决）：最终解决了问题-该行必须位于使用任何会话变量的每个页面的最顶部-实际上是第 1 行！

# javascript - DOM 对象构造函数不能作为函数调用

> ID：15574274
> 
> 赞同：6
> 
> 时间：2013-03-22T15:37:34.753
> 
> 标签：javascript, html, web-services

我在 javaScript 上有这个功能，可以在 Firefox 上使用，但在 google chrome 上没有

```
function sendInfo(userId, Code) {
            // text with all info to send to controller
            var values = {
                "token": Code,
                "code": userId
            }

            // POST THE CHANGE HERE TO THE DATABASE
            var url = "WSHolFacebook.asmx/saveToken";
            $.post(url, values, function (data) {
                if (window.ActiveXObject) { return data.xml; }
                var xmlString = XMLSerializer().serializeToString(data);
                var xml = xmlString,
                xmlDoc = $.parseXML(xml),
                $xml = $(xmlDoc),
                $title = $xml.find("string");
                var texto = $title.text();
                if ($title.text() == "Success") {
                    window.location = '<%=ConfigurationManager.AppSettings["successUrl"].ToString() %>'
                }
                else {
                    window.location = '<%=ConfigurationManager.AppSettings["errorUrl"].ToString() %>'
                }
            })
        } 
```

chrome中的错误是：

> *未捕获的 TypeError：DOM 对象构造函数不能作为函数调用。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T15:39:52.590

改变

```
var xmlString = XMLSerializer().serializeToString(data); 
```

到

```
var xmlString = new XMLSerializer().serializeToString(data); 
```

它引发错误的原因是因为您试图将 XMLSerializer 作为函数调用而不是实例化它。

# sql - SQL Server - 在 INSERT 语句中使用 WITH 子句

> ID：15574281
> 
> 赞同：40
> 
> 时间：2013-03-22T15:37:58.007
> 
> 标签：sql, sql-server, common-table-expression, with-clause

我想知道这是否可能。我有一个现有的查询，它使用该`WITH`子句将一些聚合数据应用于这样的`SELECT`查询：（大量简化）

```
;WITH alias (y,z)
AS
(
    SELECT y,z FROM tableb
)
SELECT y, z FROM alias 
```

我现在想把`INSERT`这个查询的结果放到另一个表中。

我尝试了以下方法：

```
INSERT INTO tablea(a,b)
;WITH alias (y,z)
AS
(
    SELECT y,z FROM tableb
)
SELECT y, z FROM alias 
```

但我得到了错误：

> ';' 附近的语法不正确。

因此，我尝试不使用分号，但出现错误：

> 关键字“WITH”附近的语法不正确。
> 
> 关键字“with”附近的语法不正确。如果此语句是公用表表达式或 xmlnamespaces 子句，则前面的语句必须以分号结束。

我正在尝试用不同的一些不同的语法来做可能的事情吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-22T15:38:48.863

您需要`INSERT INTO`在`CTE`. 所以代码将是：

```
;WITH alias (y,z)
AS
(
    SELECT y,z FROM tableb
)
INSERT INTO tablea(a,b)
SELECT y, z 
FROM alias 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/e7c2f/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:41:55.090

不使用 a 的另一种方法`CTE`是将其包装在子查询中，

```
INSERT INTO tablea(a,b)
SELECT y, z 
FROM 
(
    SELECT y,z FROM tableb
) alias 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T13:02:45.230

分号用于终止语句。因此，当您使用 ;WITH 时，会终止前一个语句。但是，这不是您在此处收到错误的原因。这里的问题在于您的 INSERT INTO 语句，该语句正在寻找 VALUES 或 SELECT 语法。

INSERT INTO 语句可以以两种方式使用 - 通过显式提供 VALUES 或通过使用 SELECT 语句提供结果集。

# javascript - 启用从 iframe 到父页面的自动完成表单

> ID：15574284
> 
> 赞同：1
> 
> 时间：2013-03-22T15:38:11.050
> 
> 标签：javascript, forms, iframe, form-submit

我有这个测试站点[http://itmjobs.ro/lidl/searching.php](http://itmjobs.ro/lidl/searching.php)。我可以从父级搜索到 iframe，这很好，但是.. iframe 表单具有自动完成功能，如果可能的话，我也想在我的父页面框上工作。如果您在 iframe 上选中“修改搜索”并尝试搜索，输入第二个字母后将自动完成文本。是否也可以使其在父页面上工作？

# hibernate - Spring MVC + Hibernate 创建关联表

> ID：15574286
> 
> 赞同：0
> 
> 时间：2013-03-22T15:38:12.393
> 
> 标签：hibernate, spring-mvc

假设我有一个注册实体，它持有

*   ID
*   学生卡
*   课程编号
*   学期

我已经写了

*   注册、课程、学生 - 域对象
*   RegistrationDao、CourseDao、StudentDao
*   注册BS，CourseBS，StudentBS

我的注册域对象如下：

```
class Registration {
    Student student;
    Course course;
    String semester;
} 
```

我有一个由两个组合框（学生和课程）组成的表格。

我将 student_id、course_id 和学期信息发布到 RegistrationController。

我需要从他们的 BS 中检索学生和课程对象吗？在这种情况下，如何避免事务范围问题？

而且，如果我使用纯 SQL，我不需要检索学生和课程。只是一个具有三个给定属性的插入 sql。如果我应该检索这些对象，这对 ORM 来说是个大问题，不是吗？或者我应该创建一个命名查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:24:30.740

如果我理解正确，您想知道如果您想使用 Hibernate 持久注册，是否需要检索学生和课程对象。对？

> 我需要从他们的 BS 中检索学生和课程对象吗？

如果您执行一个简单的 session.save(registration)，Hibernate 将在给定的注册中进行选择并检索学生/课程对象。

不幸的是，Hibernate 不支持通过 HQL 的标准 INSERT VALUES。它只支持 INSERT INTO FROM，对你没用。

# asp.net - IE10 和 DevExpress CallbackPanel 的问题

> ID：15574287
> 
> 赞同：1
> 
> 时间：2013-03-22T15:38:13.643
> 
> 标签：asp.net, devexpress, internet-explorer-10

好的，这就是我们遇到的问题。我们有一个使用 DevExpress 回调面板的网站。我们收到了来自使用 IE10 的用户的电话，称该页面为空白。

我用 IE10 设置了一台机器 - 尝试复制问题。登录生产网站时，我看到了同样的东西——页面是空白的，除了你可以在左上角看到一个空的 SpitterControl（表示一个没有任何内容的控件）。我检查了 f12 开发者工具，所有的标记都在那里。此外，当进入 quirks 模式或 IE9 模式时，页面呈现良好。

到目前为止这么好。下一步是在我的本地环境中复制该问题，以便我可以设置一些断点并尝试找出原因。这就是我难过的地方。本地开发环境完全没有问题；页面在 IE10 中呈现良好。我在我的机器上使用相同的 .NET 框架运行 IIS7。

所以，进入下一步。我们有一台机器，我们在其中暂存代码以进行 beta 测试——它的配置基本上反映了生产配置。同样的结果，所有 IE10 页面都渲染得很好。

我有点想不通了。我当然研究过文档类型，并强制使用 IE9 模式。我可以尝试所有的东西，但我只是对我所有的测试环境都无法破解这一事实感到困惑。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:22:10.450

尝试设置异地开发设置。可能是在您的域内。我知道在一种情况下，我们遇到了 devexpress 控件乱序加载的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T17:14:35.027

想通了-无论如何都可以解决。设置工作。只是对生产数据库进行这样的更改并不是那么简单 - 但我终于把它放在那里尝试了。天啊..多么痛苦！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T22:51:18.357

此链接中的 NuGet 包选项对我有用，因此我假设在服务器上安装修补程序也可以：

[http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

概括：

*   确保已安装 NuGet
*   右键单击项目，然后单击管理 NuGet 包
*   在线搜索“App_BrowsersUpdate”
*   我为.net 4安装了一个
*   重新发布

# javascript - 等宽字符的像素宽度

> ID：15574288
> 
> 赞同：22
> 
> 时间：2013-03-22T15:38:14.073
> 
> 标签：javascript, css, fonts

我想知道，是否可以计算等宽字体中字符的像素宽度？我正在使用等宽字体，因为我需要每个字符在我的 DIV 中占据相同的宽度，但我不确定如何可靠地获得它的实际像素宽度。我需要固定宽度以便在 JavaScript 中进行计算。这是我的CSS：

```
font-family: monospace;
font-size: 15px; 
```

这可能吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-22T15:53:45.330

我能想到的最好方法是创建一个`position: absolute; top: -100px;`包含单个字符的跨屏 ( )。然后您可以测量跨度的宽度以获得等宽字体中 1 个字符的宽度。但是，请确保将`padding`其设置为`0px`跨度，因为它包含在宽度中。

如果您只需要一个近似值，该`ex`单位通常很有帮助。`1ex`是小写“x”的高度。这通常与宽度大致相同。但这并不准确。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-05-30T13:59:20.490

我遇到了同样的问题并决定制作一个计算器））
使用带有 10000 个符号的测试跨度，它是`offsetWidth`；
运行下面的代码段，然后单击“确定”。

[提琴手](https://jsfiddle.net/OPTlMUS/x5qk608a/)

```
(function(){ 

let test = document.getElementById('test');
let font = document.getElementById('font');
let size = document.getElementById('size');

document.getElementById('le').innerText = "Test length: " + test.innerText.length + " symbols.";

document.getElementById('ok').addEventListener('click', function(){
  test.style.fontFamily = font.value;
  test.style.fontSize = parseFloat( size.value ) + 'px';
  document.getElementById('result').innerText = 'Your font-width: ' + test.offsetWidth / 10000 + 'px';
});

})();
```

```
<h2>Input Font-family and font-size:</h2>

<input id="font" placeholder="font-family:" value='"Lucida Console", Monaco'>
<input id="size" placeholder="font-size:" value="18">
<button id="ok">OK</button>
<p id="result"></p>

<p id="le"></p><span id="test">xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</span>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:54:18.820

我不确定是否可以在所有平台上绝对确定字母、等宽字符或其他字符的宽度甚至高度。font-size 上的 PX 后缀甚至不代表屏幕上的实际像素（查看[此处](http://inamidst.com/stuff/notes/csspx)了解更多信息）。

我怀疑唯一的方法是为每个字符使用固定的宽度跨度。

# sql - 使用 sql 为每个类别选择 1 个随机记录

> ID：15574290
> 
> 赞同：1
> 
> 时间：2013-03-22T15:38:22.410
> 
> 标签：sql, postgresql

我有一个方便地称为 的大表`mytable`，有三列：`id`、`cat_group`、`cat_other`。我想`cat_group`使用 SQL 从每个元素中选择一个随机元素。我该怎么做？

**示例数据**

```
| id | cat_group | cat_other |
+----+-----------+-----------+
|  1 | red       | fred      |
|  2 | blue      | sarah     |
|  3 | blue      | peter     |
|  4 | green     | spot      |
|  5 | red       | peter     | 
```

**可接受的结果**

```
| cat_group | id | cat_other |
+-----------+----+-----------+
| red       |  5 | peter     |
| blue      |  2 | sarah     |
| green     |  4 | spot      | 
```

**也很好**

```
| cat_group | id | cat_other |
+-----------+----+-----------+
| red       |  1 | fred      |
| blue      |  3 | peter     |
| green     |  4 | spot      | 
```

我在 SO 上看到了一些类似的问题，但是我迷失了实现细节。我正在使用 postgresql，但答案应该能够在不同的数据库中推广。

Sqlfiddle 在[http://sqlfiddle.com/#!1/b42c8/2](http://sqlfiddle.com/#!1/b42c8/2)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:40:28.623

这是一种方法，使用`row_number()`：

```
select cat_group, id, cat_other
from (select mytable.*,
             row_number() over (partition by cat_group order by random()) as seqnum
      from mytable
     ) as t
where seqnum = 1 
```

同样的想法也适用于其他数据库。但是，随机数函数可能不同。例如，在 SQL Server 中，`rand()`每个查询只返回一个值——而不是每行。在那里你会使用`newid()`.

# jquery - 试图理解 Jquery appendTO

> ID：15574291
> 
> 赞同：0
> 
> 时间：2013-03-22T15:38:23.280
> 
> 标签：jquery

我对 Jquery 有点陌生，正在尝试理解 appendTo()。

问题是当表单被提交时，没有任何东西附加到 div 中。只要没有选择任何值，代码脚本就可以正常工作，这意味着警报被触发。

```
$('#blankett_form').submit(function() {
    var id = $(this).find('.update:last').val();
    if (id == '') {
        alert('Välj land och region.'); 
    } else {
        var table = '<table class="table table-hover table-bordered"><thead><tr>    <td>blanketter.</td><td>datum tillagt.</td></tr></thead></table>'
        $(table).appendTo('#formsubmit');
    }
}); 
```

该表应附加到以下 div。

```
<div id="#formsubmit"> 

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:41:40.080

从 div id 中删除 #`<div id="#formsubmit">`

```
<div id="formsubmit"> 

</div> 
```

[小提琴](http://jsfiddle.net/wirey00/9TNL4/)

或者你必须逃避#

```
$(table).appendTo('#\\#formsubmit'); 
```

[小提琴](http://jsfiddle.net/wirey00/LhKyv/)

正如其他人所提到的，如果正在提交表单，那么页面可能会刷新并且您不会看到任何更改。

您可以返回 false 或在处理程序中使用[event.PreventDefault](http://api.jquery.com/event.preventDefault/)来停止默认提交操作

```
$('#blankett_form').submit(function(e) { // <-- event argument passed in
     e.preventDefault(); // prevent default action
     // your code here
} 
```

或者

```
$('#blankett_form').submit(function() {      
     // your code here
     return false;  
} 
```

# java - 我的循环出现错误。线程“主”java.util.NoSuchElementException 中的异常。错误是我的扫描仪？

> ID：15574292
> 
> 赞同：0
> 
> 时间：2013-03-22T15:38:31.790
> 
> 标签：java, arrays, java.util.scanner

好的，看起来我的主课遇到了一些问题。它在第二次运行时打破了我的循环并显示和错误。它说我的扫描仪从菜单中读取用户选择会产生错误？那是怎么回事，它在第一个循环中工作，但由于某种原因它不能再次运行。

```
"action = new Scanner(System.in).nextInt();" 
```

正在产生错误。有谁知道为什么会发生这种情况，因为在用户选择菜单选项时读取用户输入的整数非常重要。

```
import java.util.Scanner; 
import java.io.FileWriter; 
import java.io.IOException;
import java.io.PrintWriter;
import java.lang.String; 
import java.lang.System;  

public class MainActions {

    public static void main(String args[]) throws IOException {

        int action = 0;

        while (action != 6) {

            Contact.menu();

            new Scanner(System.in);

            action = new Scanner(System.in).nextInt();

            if (action <= 0 || action > 6) {
                System.out.println("Invalid selection. ");
            }

            switch (action) {
            case 1:
                MainActions.addContactInfo();
                break;

            case 2:
                break;

            case 3:
                break;

            case 4:
                break;

            case 5:
                break;
            }
        }
    }

    public static void addContactInfo() {

        Contact contact;
        contact = new Contact();

        Scanner reader = new Scanner(System.in);
        System.out.println("Enter Contact Last Name:");
        String lastname = reader.nextLine();
        contact.setLastName(lastname);
        System.out.println("Enter Contact First Name: ");
        contact.setFirstName(reader.nextLine());
        System.out.println("Enter Contact Street Address: ");
        contact.setHouseAddress(reader.nextLine());
        System.out.println("Enter Contact City: ");
        contact.setCity(reader.nextLine());
        System.out.println("Enter Contact Zip Code: ");
        contact.setZip(reader.nextLine());
        System.out.println("Enter Contact Email: ");
        contact.setEmail(reader.nextLine());
        System.out.println("Enter Contact Phone Number: ");
        contact.setPhone(reader.nextLine());
        System.out.println("Enter Contact Notes: ");
        contact.setNotes(reader.nextLine());

        if (lastname.trim().equals("")) {
            System.out.println("\nLast name was blank, contact not saved.");
            System.exit(0);
        } else {
            ContactList list;
            list = new ContactList();
            list.add(contact);
            list.save();
            Contact c = contact;
            try (PrintWriter output = new PrintWriter(new FileWriter("contactlist.csv", true))) {
                output.printf("%s\r\n", c);
            } catch (Exception e) {}
        }
        reader.close();
    }
} 
```

安慰：

```
1\. Enter a new person
2\. Print the contact list
3\. Retrieve a person's information by last name
4\. Retrieve a person's information by email address
5\. Retrieve all people who live in a given zip code
6\. Exit
1
Enter Contact Last Name:
asdf
Enter Contact First Name: 
asdf
Enter Contact Street Address: 
asdf
Enter Contact City: 
asdf
Enter Contact Zip Code: 
asdf
Enter Contact Email: 
asdf
Enter Contact Phone Number: 
asdf
Enter Contact Notes: 
asdf

Contact information has been saved.

Exception in thread "main" java.util.NoSuchElementException
at java.util.Scanner.throwFor(Unknown Source)
at java.util.Scanner.next(Unknown Source)
at java.util.Scanner.nextInt(Unknown Source)
at java.util.Scanner.nextInt(Unknown Source)
at MainActions.main(MainActions.java:33)
1\. Enter a new person
2\. Print the contact list
3\. Retrieve a person's information by last name
4\. Retrieve a person's information by email address
5\. Retrieve all people who live in a given zip code
6\. Exit 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:41:07.580

代替

```
new Scanner(System.in);

action = new Scanner(System.in).nextInt(); 
```

和

```
Scanner scan = new Scanner(System.in);

action = scan.nextInt(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:58:39.940

```
new Scanner(System.in); // Remove this. Not needed.
action = new Scanner(System.in).nextInt(); 
```

等等，这不是问题。这是实际的问题。

```
reader.close(); 
```

你的这条线`addContactInfo()`是**罪魁祸首**。删除它，您的代码将起作用。

这会在您的方法中`reader.close()`关闭您的`Scanner`（扫描`System.in`），因为两者都在扫描`System.in`。

希望这能解决您的问题。我只是碰巧[在 SO 上找到了这个问题](https://stackoverflow.com/q/13042008/2024761)。查看此内容以获取更详细的说明。

文档是这样说的：-

**public void close() 抛出 IOException**

> 关闭此输入流并释放与此流关联的所有系统资源。close 的一般约定是它关闭输入流。关闭的流不能执行输入操作，也不能重新打开。

# c# - RestSharp序列化没有正确序列化类名

> ID：15574293
> 
> 赞同：3
> 
> 时间：2013-03-22T15:38:38.100
> 
> 标签：c#, xml, serialization, restsharp

RestSharp 似乎没有注意我用以下方式装饰我的一个类名的“SerializeAs”属性：

**人**

```
[Serializable, SerializeAs(Name = "person")]
public class Person
{
    [SerializeAs(Name = "first-name")]
    public string FirstName { get; set; }

    [SerializeAs(Name = "contact-data")]
    public ContactData ContactData { get; set; }
} 
```

**联系人数据**

```
public class ContactData
{
    [SerializeAs(Name = "email-addresses")]
    public List<EmailAddress> EmailAddresses { get; set; }
} 
```

**电子邮件地址**

```
[SerializeAs(Name = "email-address")]
public class EmailAddress
{
    [SerializeAs(Name = "address")]
    public string Address { get; set; }

    [SerializeAs(Name = "location")]
    public string Location { get; set; }
} 
```

我正在使用以下代码来序列化 XML：

```
var request = new RestRequest("people/{id}.xml", Method.PUT);
request.AddParameter("id", person.Id, ParameterType.UrlSegment);
request.XmlSerializer = new XmlSerializer();
request.AddBody(person); 
```

但是，生成的 XML 如下所示：

```
<person>
    <first-name>Scott</first-name> 
    <contact-data>
        <email-adresses>
            <EmailAddress>
                <address>my@email.com</address> 
                <location>Work</location> 
             </EmailAddress>
        </email-adresses>
    </contact-data>
</person> 
```

您可以看到该`<EmailAddress>`元素似乎忽略了该`SerializeAs`属性，并且没有像我期望的那样序列化为“电子邮件地址”，而所有其他元素都可以正常工作。有谁知道为什么会发生这种情况或如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T22:45:54.290

在查看了 RestSharp 源代码后，我意识到这是 RestSharp 内置的 XmlSerializer 中的一个错误。我已经修复它并提交了一个[拉取请求](https://github.com/restsharp/RestSharp/pull/361)。

# java - 使用 RMI，是否可以反序列化对象（不在当前 JVM 类路径中的类）并转移到包含该类的其他 JVM

> ID：15574294
> 
> 赞同：0
> 
> 时间：2013-03-22T15:38:40.270
> 
> 标签：java, inputstream, rmi, xml-deserialization

我在 java.io.InputStream 中有一个序列化对象，而我当前的 JVM 类路径中没有这个类。是否可以使用 java.beans.XMLDecoder 检索此对象（无需将类添加到类路径）并将其传递给包含此类的不同 JVM（usign RMI）。

提前致谢。

示例代码：

```
java.beans.XMLDecoder decoder = new java.beans.XMLDecoder(inputStream);
Object object = decoder.readObject();
decoder.close();
return object; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:00:15.270

除非您有相应的可用类，否则您不能反序列化任何对象。

# durandal - 如何自定义 Durandal 优化器？

> ID：15574296
> 
> 赞同：1
> 
> 时间：2013-03-22T15:38:41.320
> 
> 标签：durandal, hottowel

如何自定义适用于名为 setup 而不是 main.js 的文件的 durandal 优化器，以及如何在 Web 应用程序中有多个 SPA 的情况下优化多个引导文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:56:34.910

截至目前，您无法告诉优化器使用`setup.js`而不是`main.js`. 没有挂钩选项，但该项目是开源的！欢呼！您可以拉下代码并更改配置并为您自己的自定义优化器构建它。

在 durandal 的 Optimizer 项目中，您可以更改它在[此处](https://github.com/BlueSpire/Durandal/blob/master/Optimizer/RJSConfigBuilder.cs#L30)找到主路径的位置。

如果我正确理解了您的问题，我认为您可能很幸运能够为多个 spa 优化多个引导文件。优化器确实有一个名为`source`used 的配置，如下所示：

```
optimizer.exe --source c:\project\spa1
optimizer.exe --source c:\project\spa2 
```

Where`spa1`和`spa2`are 包含您的应用程序源的文件夹的路径。这是文件所在的每个应用程序的根文件夹`setup.js`。

# java - 如何通过套接字连接发送实例？

> ID：15574299
> 
> 赞同：1
> 
> 时间：2013-03-22T15:38:47.287
> 
> 标签：java, class, sockets, instance

我正在尝试编写两个 Java 程序。一个模拟服务器，一个模拟客户端。

我怎样才能通过套接字发送 Response 类的实例？

Response 类表示服务器连接的状态代码。例如 404 Not Found 等

**不幸的是，我不允许使用序列化。**

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:44:32.410

在某种程度上，为了通过连接发送对象，必须进行序列化。我只能假设您关于不允许使用序列化的评论是指无法使用 Serializable 而不是全面禁止序列化（这没有意义）。实现此目的的一个非常简单的方法是使用外部序列化库，例如[gson](http://code.google.com/p/google-gson/)。Gson 将对象序列化为 JSON 字符串，您可以通过套接字传输该字符串，然后使用相同的库将其反序列化回另一端的对象。您当然可以使用任何您喜欢的序列化库和您喜欢的格式，例如。XML、json、YAML、...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:42:55.657

您不会发送 Response 类本身的实例。当通过网络发送东西时，客户端和服务器机器理解字节。您的应用程序可以理解的不仅仅是字节，它还可以理解特定的表示。例如，您的服务器可能会发送您的 Response 类的 JSON 表示，例如：

```
{
   "response" : {
       "code":404
   }
} 
```

那么你的客户必须能够理解这个字节序列的含义。这基本上就是协议的本质：两台机器如何通信。

无论服务器或客户端是用什么语言编写的，响应都是一个实体。在 Java 中你可以使用 a`Class`来表示它，在 C++ 中你可以使用`struct`. 但是，双方都需要知道，当您与外部 application.system 进行通信时，他们必须将其置于每个人都能理解的格式中，无论是 json、xml 还是任何其他格式。

至于通过套接字发送这个，Oracle 有一个很好的[教程在这里](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)。您`OutputStream` 从套接字中获取并开始编写您的表示。

# build - Gradle 构建失败错误：包 javax.servlet 不存在

> ID：15574304
> 
> 赞同：10
> 
> 时间：2013-03-22T15:39:01.850
> 
> 标签：build, gradle

我对 gradle 和构建系统非常陌生，我正在尝试使用 gradle 构建项目，但它找不到我在项目的几个类中使用的 Tomcat 服务器包。

我的构建配置：

```
apply plugin: 'java'
apply plugin: 'war'

repositories {
   flatDir { dirs "WebContent/WEB-INF/lib" }
   mavenCentral()
}

dependencies {
    compile group: 'com.orientechnologies', name: 'orient-commons', version: '1.3.0'
    compile group: 'com.orientechnologies', name: 'orientdb-client', version: '1.3.0'
    compile group: 'com.orientechnologies', name: 'orientdb-core', version: '1.3.0'
    compile group: 'com.orientechnologies', name: 'orientdb-graphdb', version: '1.3.0'
    compile group: 'com.orientechnologies', name: 'orientdb-enterprise', version: '1.3.0'
    compile group: 'com.tinkerpop.blueprints', name: 'blueprints-core', version: '2.3.0'
    compile group: 'com.tinkerpop.blueprints', name: 'blueprints-orient-graph', version: '2.3.0'
    compile group: 'com.tinkerpop', name: 'pipes', version: '2.3.0'
    compile group: 'com.tinkerpop.gremlin', name: 'gremlin-java', version: '2.3.0'
    compile group: 'com.tinkerpop.gremlin', name: 'gremlin-groovy', version: '2.3.0'

    testCompile group: 'junit', name: 'junit', version: '4.+'
    testCompile group: 'org.mockito', name: 'mockito-all', version: '1.9.5'

}
sourceSets {
    main {
        java {
            srcDir 'src'
        }
    }
    test {
        java {
            srcDir 'test'
        }
    }
}

task wrapper(type: Wrapper) {
    gradleVersion = '1.3'
}
war {
    from 'WebContent'
} 
```

当我启动 Gradle Task - Build 时发生错误：

```
OrientDBFilter.java:6: error: package javax.servlet does not exist
import javax.servlet.FilterChain;
OrientDBFilter.java:5: error: package javax.servlet does not exist
import javax.servlet.Filter; 
```

……

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-22T16:53:11.370

通常你会使用`providedCompile`. 就像是：

```
providedCompile group: 'javax.servlet', name: 'javax.servlet-api', version: '3.0.1' 
```

然后您的应用程序将编译，但 gradle 不会在最终的 war 文件中包含 servlet api。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-07T13:32:41.103

我遇到了同样的问题，解决方案`providedCompile`没有用，但
`compile group: 'javax.servlet', name: 'javax.servlet-api', version: '3.0.1'`确实有效。

如果有人有同样的问题，我只是想分享这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-22T12:57:11.510

我有同样的问题，这条线有效

```
compileOnly group: 'javax.servlet', name: 'javax.servlet-api', version: '4.0.1' 
```

# javascript - setAttribute('src','page.html') 不起作用

> ID：15574305
> 
> 赞同：1
> 
> 时间：2013-03-22T15:39:03.570
> 
> 标签：javascript

`iframe`我有以下 JavaScript每 5 秒旋转标签中的页面。

```
function setPage() {
    if (i == pages.length) {
        i = 0;
    }
    alert(pages[i]); //verify the right url is there
    var elmnt = document.getElementById('dashboard');
    elmnt.setAttribute('src', pages[i]);

    i++;
}
setInterval("setPage()", 5000); 
```

循环、间隔等正在工作。但是，我的标签的`src`属性没有任何变化。`iframe`

我测试了 IE8 和 Chrome。

我究竟做错了什么？我怎样才能做到这一点（没有jQuery ...）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:26:09.633

我建议你`elmnt.src = pages[i]`改用。

如果它仍然给您错误，那么很可能您正在尝试定位没有`src`属性的元素。检查`elemt.tagName`给你`IFRAME`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:41:42.820

您是否尝试过手动设置 iframe 的 src 属性？

```
document.getElementById('dashboard').src = pages[i]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T16:00:56.403

正如你现在所拥有的，每次`setPage`被调用时，`i`值为`undefined`; 如果您希望`i`从调用到调用的值保持不变，则需要将其设置在[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)中：

```
var setPage = (function () {
    var i = 0;
    return function () {
        if (i == pages.length) {
            i = 0;
        }
        var elmnt = document.getElementById('dashboard');
        elmnt.setAttribute('src', pages[i]);
        i++;
    }
}()); 
```

同样在设置间隔时，第一个参数应该只是函数的名称，没有引号或括号：

```
setInterval(setPage, 5000); 
```

您可以对其进行一些其他调整，但这应该可以使其运行。

# asp.net - CssClass 不适用于我的 asp 菜单 - 附加所有代码

> ID：15574306
> 
> 赞同：1
> 
> 时间：2013-03-22T15:39:04.480
> 
> 标签：asp.net, css, aspmenu

我将完全相同的 css 和 asp 代码复制并粘贴到另一个项目中，但 CSS 不会进入 asp:menu 控件，我无法弄清楚。此外，当我查看源代码时，菜单正在创建自己的样式块。

我很容易提供帮助，您可以在下面复制并粘贴整页代码和 CSS。非常感谢您的帮助。

这是完整的aspx页面：

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="testing.aspx.vb" Inherits="eCASVS2005.testing" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajaxToolKit" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head id="Head1" runat="server">
<title></title>

<%="" %>

<link href="eCASScripts/cssMasterPage.css" rel="stylesheet" type="text/css" />
<% If False Then%> <!-- fix for seeing css in design view and handling url after deployed -->
<link href="<%= Page.ResolveUrl("~/eCASScripts/cssMasterPage.css")%>" rel="stylesheet" type="text/css" />
<% End If%>

</head>

<body>

<form id="Form1" runat="server" enctype="multipart/form-data" method="post">

<div class="page">
    <div class="header left">
        <div class="title left">
            <h1>
                MLG Dispatch Manager
            </h1>
        </div>
        <div class="left">
            <asp:Menu ID="NavigationMenu" 
            runat="server" 
            CssClass="myMenu" 
            EnableViewState="false" 
            IncludeStyleBlock="false" 
            Orientation="Horizontal">
                <Items>
                    <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home"/>
                    <asp:MenuItem NavigateUrl="" Text="Dispatch">
                        <asp:MenuItem NavigateUrl="~/Dispatch/NewDispatchEntry.aspx" Text="New Entry" />
                        <asp:MenuItem NavigateUrl="~/Dispatch/SearchDispatchEntries.aspx" Text="Find Existing" />
                        <asp:MenuItem NavigateUrl="~/Dispatch/ViewDispatchHistory.aspx" Text="View History" />
                    </asp:MenuItem>
                    <asp:MenuItem NavigateUrl="" Text="Maintenance">
                        <asp:MenuItem NavigateUrl="~/Maintenance/EditTrailers.aspx" Text="Edit Trailers" />
                        <asp:MenuItem NavigateUrl="~/Maintenance/EditCarriers.aspx" Text="Edit Carriers" />
                        <asp:MenuItem NavigateUrl="~/Maintenance/EditDrivers.aspx" Text="Edit Drivers" />
                    </asp:MenuItem>
                    <asp:MenuItem NavigateUrl="~/UnderConstruction.aspx" Text="Help"/>
                </Items>
            </asp:Menu>
        </div>
        <div id="loggedInText" class="loginDisplay right" runat="server">
            logged in: [User Name]
        </div>
    </div>

</div>
</form>
</body>
</html> 
```

这是完整的CSS：

```
/* DEFAULTS
----------------------------------------------------------*/

body   
{
    background: #b6b7bc;
    font-size: .80em;
    font-family: "Helvetica Neue", "Lucida Grande", "Segoe UI", Arial, Helvetica, Verdana, sans-serif;
    margin: 0px;
    padding: 0px;
    color: #696969;
    height:100%;
}

a:link, a:visited
{
    color: #034af3;
}

a:hover
{
    color: #1d60ff;
    text-decoration: none;
}

a:active
{
    color: #034af3;
}

p
{
    margin-bottom: 10px;
    line-height: 1.6em;
}

table
{
    padding: 0px 0px 0px 0px;
    margin: 0px 0px 0px 0px;
}

/* HEADINGS   
----------------------------------------------------------*/

h1, h2, h3, h4, h5, h6
{
    font-size: 1.5em;
    color: #666666;
    /* font-variant: small-caps; */
    text-transform: none;
    font-weight: 200;
    margin-bottom: 0px;
}

h1
{
    font-size: 1.5em;
    padding-bottom: 0px;
    margin-bottom: 0px;
}

h2
{
    font-size: 1.5em;
    font-weight: 600;
}

h3
{
    font-size: 1.2em;
}

h4
{
    font-size: 1.1em;
}

h5, h6
{
    font-size: 1em;
}

/* this rule styles <h1> and <h2> tags that are the 
first child of the left and right table columns */
.rightColumn > h1, .rightColumn > h2, .leftColumn > h1, .leftColumn > h2
{
    margin-top: 0px;
}

.state
{
    width:116px;
}

/* PRIMARY LAYOUT ELEMENTS   
----------------------------------------------------------*/

.page
{
    width: 1020px;
    background-color: #fff;
    margin: 40px auto 0px auto;
    border: 1px solid #496077;
}

.widthFullPx
{
    width: 900px;
}

.header
{
    position: relative;
    margin: 0px;
    padding: 0px;
    background: #4b6c9e;
    width: 100%;
}

.header h1
{
    font-weight: 700;
    margin: 0px;
    padding: 0px 0px 0px 20px;
    color: #f9f9f9;
    border: none;
    line-height: 2em;
    font-size: 1.5em;
}

.main
{
    padding: 0px 12px;
    /*min-height:500%;*/
    min-height:100%;
    margin-right: 8px;
    margin-top: 10px;
    margin-bottom: 8px;
}

.leftCol
{
    padding: 6px 0px;
    margin: 12px 8px 8px 8px;
    width: 200px;
    min-height: 200px;
}

.footer
{
    color: #4e5766;
    padding: 8px 0px 0px 0px;
    margin: 0px auto;
    text-align: center;
    line-height: normal;
}

#headerSeparator
{
    background-color:White;
    width:1px;
    height:35px;
    margin:0px 0px 0px 10px;
}

/* TAB MENU   
----------------------------------------------------------*/

div.myMenu > ul > li
{ 
    display: inline-block;
    list-style: none; 
} 

div.myMenu ul li ul 
{ 
    display: none; 
}

div.hideSkiplink
{
    background-color:#3a4f63;
    width:100%;
}

div.myMenu
{
    padding: 5px 0px 5px 40px;
}

div.myMenu ul
{
    list-style: none;
    margin: 0px;
    padding: 0px;
    width: auto;
}

div.myMenu ul li a, div.myMenu ul li a:visited
{
    background-color: #465c71;
    border: 1px #4e667d solid;
    color: #dde4ec;
    display: block;
    line-height: 1.35em;
    padding: 4px 20px;
    text-decoration: none;
    white-space: nowrap;
}

div.myMenu ul li a:hover
{
    background-color: #bfcbd6;
    color: #465c71;
    text-decoration: none;
}

div.myMenu ul li a:active
{
    background-color: #465c71;
    color: #cfdbe6;
    text-decoration: none;
}

/* FORM ELEMENTS   
----------------------------------------------------------*/

fieldset
{
    margin: 1em 0px;
    padding: 1em;
    border: 1px solid #ccc;
}

bolFieldSet 
{
    background-color:Fuchsia;
    margin: 1em 0px 1 0;
    padding: 0em;
    border: 1px solid #ccc;
}

fieldset p 
{
    margin: 2px 12px 10px 10px;
}

fieldset.login label, fieldset.register label, fieldset.changePassword label
{
    display: block;
}

fieldset label.inline 
{
    display: inline;
}

legend 
{
    font-size: 1.1em;
    font-weight: 600;
    padding: 2px 4px 8px 4px;
}

input.textEntry 
{
    width: 320px;
    border: 1px solid #ccc;
}

input.passwordEntry 
{
    width: 320px;
    border: 1px solid #ccc;
}

div.accountInfo
{
    width: 42%;
}

/* MISC  
----------------------------------------------------------*/

.hidden{display: none;}

.autowidth
{
    width:auto;
}

.width100pct
{
    width:100%;
}

.largetext
{
    font-size:large;
}

.medtext
{
    font-size:medium;
}

.clear
{
    clear: both;
}

.center
{
    text-align: center;
    vertical-align:middle;
}

.left /* floats left */
{
    float:left;
}

.right /* floats right */
{
    float:right;
} 
```

就像我说的一样，这个完全相同的代码正在另一个项目中工作，我无法弄清楚这个。每个相同的css版本，2.1。谢谢。-泰勒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:17:37.490

多亏了这里用户的一些指导，我才发现了这个问题。检查菜单控件元素后`<table>`，它呈现为`<div>`

这是与其他有相同情况的人的链接：

[http://forums.asp.net/t/1613711.aspx](http://forums.asp.net/t/1613711.aspx)

对我来说简单的解决方案是将属性添加`RenderingMode="List"`到我的 asp:menu 中，它解决了我的问题。

感谢所有帮助过的人。

# nsarray - 目标 C：在每个索引位置使用不同对象漂亮地打印 NSArray

> ID：15574310
> 
> 赞同：1
> 
> 时间：2013-03-22T15:39:11.843
> 
> 标签：nsarray, objective-c++, nslog

我有一个不同对象的 NSArray，例如一个 NSString 和一个 NSNumber 整数。

我有一个特定的格式字符串，我想用它来打印对象内容，而不仅仅是使用

```
@"%@|%@" 
```

但是，例如

```
@"%-13s|%010d" 
```

我已经实现了以下操作来执行我在 StackOverflow 和其他地方找到的 @"%@|%@" 类型打印：

```
@implementation NSString (NSArrayFormatExtension)

+ (id) stringWithFormatFromNSArray: (NSString *) format array: (NSArray*) args;
{
  id *argList = malloc( sizeof( id )  * [args count] );
  [ args getObjects: argList ];

  NSString* result = [ [ [ NSString alloc ] initWithFormat: format arguments: (va_list) argList ] autorelease ];

  free(argList);

  return result; 
}

@end 
```

调用然后打印如下：

```
NSString *printstring = [ NSString stringWithFormatFromNSArray: nsFormatString array: nsarray_of_objects ] 
```

这将允许 @"%@ %@" 类型的 nsFormatStrings 打印对象内容，但不允许 @"%s %d" 类型的格式打印具有更详细格式的基础 C 类型。

我有两个问题和一些关于解决方案的想法，但不想在这里重新发明轮子。

1.) 我可以通过切换从 className 派生的类型来遍历 NSArray 项 - 当然 - 但我想知道是否有标准的方法来做到这一点。

这也意味着将格式字符串解构为单独的 % 实体（或将*其*作为数组传递并通过它进行处理 - 不是很干净，并且需要保留任何其他非格式化条目，如上面的管道分隔符）。

2.) 使用@"%@|%@" 的上述代码在 32 位 Linux 上使用 gcc / objc / objc++ 4.6.X 及更高版本，但在 64 位 Linux 上会出现段错误，我需要让它运行两个都。

根据我的阅读，这似乎是一些 Linux 系统上 va_list 的 64 位实现的一个相当普遍的问题。

即使我对对象格式感到满意，与特定的 C 类型格式相比，这仍然是错误的。有没有人可以解决这个问题？似乎它倾向于强制实施解决方案 1.) 在每种情况下都是可移植的，但那是

a.) 编码耗时 b.) 效率不高。

我真的需要能够进行详细的格式化以及从命令行程序打印的结果需要由完全不同的系统作为 CSV 文件或管道等读取。

我可能也想在字段之间使用不同的分隔符 - 例如

```
....|....;....,....#....^.... 
```

如果我能那样做，我会很好地嵌入我的格式字符串中。

因此，任何带有单个“连接”分隔符的格式也不是答案。

在 Perl 中做这种事情要容易得多 ;-) - 但是 - 这个特定的软件是用 Objc++ 编写的（与 C++ 库链接）。

感谢您的想法和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:15:57.407

您的程序在某些平台上无法运行的原因是它使用了不可移植的行为 - 将 C 样式的`id`s 数组转换`va_list`为不保证可以工作：

```
(va_list) argList 
```

这也是原语格式化`%010d`不起作用的原因：`NSArray`不能包含原语，所以 an用内部`int`表示。`NSNumber``int`

一般来说，C（以及扩展，Objective C）不支持动态创建变量参数列表。这就是为什么您不能使用需要可变参数列表的格式化方法。

不幸的是，您的最佳选择需要大量编码。做一个这样的方法：

```
+ (id) stringWithFormatsFromNSArray: (NSArray*) formats array: (NSArray*) args {
    // verify that formats and args have the same number of entries
    NSMutableString *res = [NSMutableString string];
    for (int i = 0 ; i != args.count ; i++) {
        id arg = [args objectAtIndex:i];
        id fmt = [formats objectAtIndex:i];
        if ([arg isKindOfClass:[NSNumber class]]) {
            // Apply fmt to NSNumberFormatter
            NSNumberFormatter *nf = [[NSNumberFormatter alloc] init];
            [nf setFormat:fmt];
            [res appendString:[nf stringFromNumber:arg]];
        } else {
            [res appendFormat:fmt, arg];
        }
    }
    return [res copy];
} 
```

此代码假定第一个参数是一个数组，而不是字符串。每个元素必须包含相应参数的格式。数字的格式将被传递给`NSNumberFormatter`，它允许您格式化表示数字的非原始对象。所有其他格式都将传递给`appendFormat`. 请注意，分隔符必须包含在相应对象的格式字符串中。您可以在除第一个对象之外的所有对象之前添加分隔符，或者在除尾随对象之外的所有对象之后添加分隔符。

# jquery - jQuery 生成并选择 id

> ID：15574314
> 
> 赞同：0
> 
> 时间：2013-03-22T15:39:22.400
> 
> 标签：jquery, html

我想通过将其html内容设置`.html()`为特定的id，在客户端使用jquery生成一些代码。这是显示我在做什么的示例：

[http://jsfiddle.net/dEJZF/4/](http://jsfiddle.net/dEJZF/4/)

对于我的班级`chat-links`，如果我在 HTML 下这样编码，它会提醒你好，但如果我通过在另一个 html 内容 ID 下设置同一行代码来生成它，它将不起作用 `chat-test`。我的问题是，我怎样才能生成那行代码，`chat-test`在这种情况下将其设置在 id 下，并且仍然能够使用类名`chat-links`而不是来识别它`chat-test`？或者有没有办法让我可以将 id 更改`chat-test`为`chat-links`？

所以基本上，我希望它能够在我点击 def 时提醒你。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T15:46:52.673

由于您正在向 DOM 动态添加元素，因此您需要使用`.on()`而不是`.click()`委托事件处理。

```
$(document).on('click', '.chat-links a', function () {
    alert("hi");
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/dEJZF/5/)**

# javascript - Google Chrome 中的 JavaScript window.open() 方法不支持可调整大小的选项

> ID：15574315
> 
> 赞同：2
> 
> 时间：2013-03-22T15:39:29.223
> 
> 标签：javascript, google-chrome, cross-browser

Google Chrome 25.x 是否**不**尊重 window.open() 方法参数列表中的“可调整大小”选项。以下代码在 IE9 和 IE10 中运行良好，不允许用户调整窗口大小，但在 Chrome 25.0.x 中它仍然允许我调整窗口大小。我试过 resizable=0 但没有区别。

```
<!DOCTYPE html>
<html>
<head>
<script>
function openWin()
{
myWindow=window.open('','','width=300,height=200,resizable=no');
myWindow.document.write("<p>This is 'myWindow'</p>");
myWindow.focus();
}
</script>
</head>
<body>

<input type="button" value="Open window" onclick="openWin()" />

</body>
</html> 
```

有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:52:02.737

基本上他们已经禁用它，因为它是为了可访问性。

[来自 MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/window.open)

## 窗口功能特性

# 可调整大小

如果启用此功能，新的辅助窗口将可调整大小。注意：从 1.4 版开始，基于 Mozilla 的浏览器在状态栏的右端有一个窗口大小调整功能，这确保即使网络作者要求此辅助窗口不可调整大小，用户也可以调整浏览器窗口大小。在这种情况下，窗口标题栏中的最大化/恢复图标将被禁用，并且窗口的边框将不允许调整大小，但窗口仍将通过状态栏中的那个夹子来调整大小。从 Firefox 3 开始，辅助窗口始终可以调整大小（错误 177838）

提示：出于可访问性的原因，强烈建议始终在 Mozilla 和 Firefox 上设置此功能，用户可以通过在 about:config 或其 user.js 文件中将 dom.disable_window_open_feature.resizable 设置为 true 来强制新窗口轻松调整大小。

# php - 从文件系统或远程替代服务

> ID：15574317
> 
> 赞同：0
> 
> 时间：2013-03-22T15:39:32.387
> 
> 标签：php, apache

请注意，以下内容用于开发目的，因此我不会过多关注安全性。

情况如下：

*   文件来自 assets.example.com
*   本地开发环境尝试从 localhost.assets.example.com 加载文件
*   我们希望 localhost.assets.example.com 和 assets.example.com 保持同步。
    *   有很多数据，所以将它们全部保存在本地是有问题的。
    *   需要在 localhost.assets.example.com 上提供替换文件或新文件，而不影响实时 assets.example.com

建议的解决方案：

*   当向 localhost.assets.example.com 发出请求时，如果存在则从本地文件系统提供文件，如果不存在则尝试从 assets.example.com 提供文件（如果存在）。否则 404。

这样做的效果是，只有更改的文件或新文件需要在开发机器上存在，并且在本地删除所有资产文件实际上会镜像实时资产。

我们已经在使用 PHP 5.3，因此可以将其用作解决方案的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:01:14.847

在阿帕奇：

```
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule (.*) http://assets.example.com/$1 [P] 
```

[`[P]`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_p)：

> [P] 标志的使用导致请求由 mod_proxy 处理，并通过代理请求处理。

# php - Mongo utf-8 异常处理

> ID：15574318
> 
> 赞同：1
> 
> 时间：2013-03-22T15:39:33.277
> 
> 标签：php, mongodb, encoding, utf-8

我在向 mongodb 插入数据时遇到问题。

```
$name = $_REQUEST['name']; // "Iñtërnâtiônàlizætiøn";
$db->table->insert(
   array('name' => $name)
); 
```

这给出了 mongo 异常“致命错误：未捕获的异常 'MongoException' 和消息 'non-utf8 string:....”

`$name = mb_convert_encoding($_REQUEST['name'], 'ISO-8859-1', 'UTF-8');`

有助于解决问题。但是有没有办法强制php将所有传入的数据设置为utf-8，所以我不需要对每个数据使用mb_convert_encoding？

我试过了

```
mb_internal_encoding('UTF-8');
iconv_set_encoding('input_encoding', 'UTF-8');
iconv_set_encoding('internal_encoding', 'UTF-8'); 
```

这些都没有帮助。

甚至

```
mb_detect_encoding($_REQUEST['title']); 
```

给出：'UTF-8'，但 mongo 异常仍然发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T13:55:33.633

如果数据来自浏览器，浏览器将以与您的页面声明相同的编码发送数据。但是对于公共服务器来说，任意数据可以来自任何地方，因此在做任何事情之前，您应该始终验证传入的数据都是格式正确的 UTF-8。像 Codeigniter 这样的框架可以做到这一点。

要声明页面编码，您可以使用 Content-Type http 标头：

```
header("Content-Type: text/html; charset=UTF-8"); 
```

请注意，这仅声明编码，它本身不会将任何内容转换为 UTF-8。为确保您的 PHP 字符串文字是 UTF-8，您需要以 UTF-8 编码保存您的 PHP 源文件。

不要使用`mb_detect_encoding`. 要查看某些内容是否为 UTF-8：

```
if( !mb_check_encoding($str, "UTF-8"))
{
    header("HTTP/1.1 400 Bad Request");
    die("Malformed UTF-8");
} 
```

但是根据评论，`mb_check_encoding`在 PHP <5.3 中存在错误：

> 在 PHP 5.2.0 和 5.2.6 之间解决了 mb_check_encoding($string,'UTF-8') 错误地为无效 UTF8 字节序列返回 true 的问题

# xaml - 从 ViewModel 中选择 ItemTemplate

> ID：15574322
> 
> 赞同：1
> 
> 时间：2013-03-22T15:39:49.370
> 
> 标签：xaml, mvvm, windows-8, microsoft-metro, windows-runtime

我正在开发一个包含配置文件视图的 Windows 8 商店应用程序。在配置文件视图中，我有一个 ListView，它绑定到 ViewModel 中的 Observable 对象集合。我在视图模型中还有一个名为 currentObject 的属性。

我需要做的是为集合中与 currentObject 具有相同 ID 的对象选择不同的项目模板。在视图模型中执行此操作的方法很简单，但是，我不确定如何触发该方法并将项目模板名称返回到视图模型中的列表视图模板选择器属性。

我正在使用 c#、MVVM 和 caliburn.micro，所以我更愿意将此代码保留在后面的代码之外。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T09:15:28.130

有一种比使用 DataTemplateSelector 更简单的方法，如上面评论中的答案所示，如果您在 XAML 中使用 DataTemplates，您可以使用 DataType 属性，您可以使用它来将 DataTemplate 关联到一个类型（它应该是一个视图模型）。因此，当渲染引擎遇到该类型时，它知道要选择哪个数据模板。

```
 <DataTemplate DataType="{x:Type vm:MyViewModel}">
 </DataTemplate> 
```

# android - 在文本视图上显示项目数组

> ID：15574327
> 
> 赞同：2
> 
> 时间：2013-03-22T15:39:54.497
> 
> 标签：android, for-loop, textview, runnable

我需要在 TextView 中显示数组中的许多字符串值。我为此使用 Runnable。但它只运行一次！如果我放一个 for 循环，代码会抛出错误。

```
Runnable hMyTimeTask = new Runnable() {
    public void run() {
        nCounter++;
        label.setText(rates[nCounter]);
    }
};

try {
    handler.removeCallbacks(hMyTimeTask);
    handler.postDelayed(hMyTimeTask, 1000); // delay 1 second
} catch (Exception e) {
    e.printStackTrace();
} 
```

使用 for 循环：

```
Runnable hMyTimeTask = new Runnable() {
    public void run() {
        for (int i = 0; i < rates.length; i++) {
            label.setText(rates[i]);
        }
    }
};

try {
    handler.removeCallbacks(hMyTimeTask);
    handler.postDelayed(hMyTimeTask, 1000); // delay 1 second
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:45:43.453

> 我为此使用runnable。但它只运行一次！

在您的 Runnable 中，您需要再次发布您的 Runnable 以重复它：

```
Runnable hMyTimeTask = new Runnable() {
    public void run() {
        nCounter++;
        if(nCounter >= rates.length)
            nCounter = 0;
        label.setText(rates[nCounter]);

        // Run this again
        handler.postDelayed(this, 1000); // delay 1 second
    }
}; 
```

# c++ - 如何使用 QPainter 添加新对象？

> ID：15574330
> 
> 赞同：0
> 
> 时间：2013-03-22T15:39:59.230
> 
> 标签：c++, user-interface, qt4

我只想绘制新对象而不是重绘整个图形。这是由 QPainter 绘制的，例如。PaintEvent() 事件中的 QWidget 或其他简单的 QPaintDevice。

但是我可以使用什么绘图设备或其他对象来为现有的点添加新点，而不是一遍又一遍地绘制所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T04:07:18.593

基本上是 Reto 所说的，还有以下额外的考虑：

1.  可以用作缓存的 PaintDevices：http: [//qt-project.org/doc/qt-4.8/qpaintdevice.html](http://qt-project.org/doc/qt-4.8/qpaintdevice.html)列出了可以使用 QPainter 绘制的 paintDevices 的可能选项。您正在寻找的可能是：QImage、QPixmap、QPicture 甚至与 OpenGL 相关的 PaintDevices，以防您使用硬件加速小部件。如果您要执行[blit](http://gamedev.tutsplus.com/articles/glossary/quick-tip-what-is-blitting/)并且需要直接访问像素数据，则建议使用 QImage，否则，对于简单的 QPainter 操作，QPixMap[更快](http://qt-project.org/doc/qt-4.8/qpixmap.html)。

2.  实际从缓存中绘制新点：查看[QPainter](http://qt-project.org/doc/qt-4.8/qpainter.html)的相关 draw{Image/Picture/Pixmap} api ，您可以使用它来绘制您首先缓存到的 PaintDevice。使用小部件的paintEvent调用中获得的paintEvent中的[QPaintEvent::region](http://qt-project.org/doc/qt-4.8/qpaintevent.html#region)来获取您需要从缓存中复制的矩形，请记住，如果您自己发送更新请求，请使用[适当](http://qt-project.org/doc/qt-4.8/qwidget.html#update-2)的更新函数来触发paintEvent。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:03:44.593

使用 QImage 作为缓存。因此，首先将初始“点”绘制到图像上，然后将图像绘制到小部件中。在获得新的“点”时，将新的“点”绘制到图像并将图像绘制到小部件。

# magento - 集合中的 EcomDev_PHPUnit 模拟 Magento 模型

> ID：15574331
> 
> 赞同：1
> 
> 时间：2013-03-22T15:40:07.403
> 
> 标签：magento, phpunit

我已经成功使用了 getModelMock() 和 replaceByMock('model', $model_path, $mock)。今天我试图重用这段代码来覆盖“保存”，但它不起作用。经过一番挖掘，我现在看到了为什么模型没有被嘲笑的区别。

成功使用模拟后，我的代码从一个新模型开始：

```
$model = Mage::getModel('test/model');
$model->setData('field', 'value');
$model->save(); //this gets mocked 
```

没有被嘲笑的代码我正在使用集合加载记录。简化：

```
$model = Mage::getModel('test/model')->getCollection()->getFirstItem();
$model->setData('field', 'value');
$model->save(); //this does NOT get mocked 
```

在这两种情况下，我都使用下面的代码来模拟模型：

```
$mock = $this->getModelMock('test/model', array('save'));

    $mock->expects($this->once())
        ->method('save')
        ->will($this->returnCallBack(function(){throw new Exception('Mock error');})
        );

    $this->replaceByMock('model', 'test/model', $mock); 
```

我还使用以下方法尝试了资源模型：

```
$mock = $this->getResourceModelMock('test/model', array('save'));

    $mock->expects($this->once())
        ->method('save')
        ->will($this->returnCallBack(function(){throw new Exception('Mock error');})
        );

    $this->replaceByMock('resource_model', 'test/model', $mock); 
```

在逐步完成代码之后，我想也许我只需要模拟资源模型。那没有用，也没有模拟模型和资源模型。我要测试的是在尝试使用 $model->save() 更新现有模型上的数据时捕获的异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:05:24.463

我找不到如何获得成功的模拟，所以这是一个解决方法。我更担心代码覆盖率，而不是实际测试这个“保存”异常。无论如何，我只是用下面的注释包装了实际代码，这告诉 phpunit 在分析代码覆盖率时忽略它：

```
// @codeCoverageIgnoreStart
[code goes here]
// @codeCoverageIgnoreEnd 
```

我不想捏造它，但代码非常简单，所以我真的不担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T17:42:25.657

那么你要模拟的模型也是被测组件吗？我会尝试改变这一点。

> 我要测试的是在尝试使用 $model->save() 更新现有模型上的数据时捕获的异常。

不确定我是否理解正确（测试代码会有所帮助），但看起来模拟资源模型通常是一个好主意。这也使您可以独立于数据库运行测试。

**你的出发点：**

```
$resourceModelMock = $this->getResourceModelMock('test/model');
$resourceModelMock->expects($this->once())
    ->method('save')
    ->will($this->throwException(...));
$this->replaceByMock('resource_model', 'test/model', $resourceModelMock); 
```

请注意，我从字面上理解了您的“异常被捕获”，并假设资源模型将引发您的模型应该*捕获*的异常。但是我怀疑你的意思是“扔”。在这种情况下，你的模拟应该返回一些有效的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-05T15:24:45.523

您可以为集合资源注册一个额外的 Mock。并且每个集合项都会成为一个 Mock 对象。

这是一个小例子：

```
class YourCompany_YourModule_Test_Model_CatalogProduct extends EcomDev_PHPUnit_Test_Case {

/**
 * Create product model mock and replace `getCollection` method with callback
 *
 * @return $this
 * @throws PHPUnit_Framework_Exception
 */
protected function _registerProductStub()
{
    $productModelMock = $this->getModelMock('catalog/product', array('getPrice', 'getCollection'));
    $productModelMock->expects($this->any())->method('getPrice')->will($this->returnCallback(array($this, 'callbackGetTestValue')));
    $productModelMock->expects($this->any())->method('getCollection')->will($this->returnCallback(array($this, 'callbackGetCollection')));
    $this->replaceByMock('model', 'catalog/product', $productModelMock);

    return $this;
}

/**
 * Create a product collection resource model with Mock and replace `getNewEmptyItem` method with callback
 *
 * @return $this
 * @throws PHPUnit_Framework_Exception
 */
protected function _registerProductCollectionStub()
{
    $productModelMockModelCollectionMock = $this->getResourceModelMock('catalog/product_collection', array('getNewEmptyItem'));
    $productModelMockModelCollectionMock->expects($this->any())->method('getNewEmptyItem')->will($this->returnCallback(array($this, 'callbackGetNewEmptyItem')));
    $this->replaceByMock('resource_model', 'catalog/product_collection', $productModelMockModelCollectionMock);

    return $this;
}

/**
 * Magento EAV checks that class of object is the same with predefined $this->_itemObjectClass
 * So we need to replace it too.
 */
public function callbackGetCollection()
{
    $model = Mage::getModel('catalog/product');
    $collection = $model->getResourceCollection();
    $collection->setItemObjectClass(get_class($model));
    $collection->getSelect()->limit(10);
    return $collection;
}

/**
 * We change a default functionality and
 * new empty object calling will return a mock object
 * in place of straight creating object trough `new ClassName`.
 * Magento will automatically add data to this object from your fixture or database.
 *
 * @return Mage_Catalog_Model_Product
 */
public function callbackGetNewEmptyItem()
{
    return Mage::getModel('catalog/product');
}

public function callbackGetTestValue()
{
    return 99.99;
}

/**
 * @test
 */
public function test_productModelIsMock()
{
    $this->_registerProductStub()
         ->_registerProductCollectionStub();

    $mockedProduct = Mage::getModel('catalog/product');
    $mockedProductFromCollection = Mage::getModel('catalog/product')->getCollection()->getFirstItem();

    $this->assertEquals(get_class($mockedProduct), get_class($mockedProductFromCollection));

    $this->assertEquals($mockedProduct->getPrice(), $mockedProductFromCollection->getPrice());
    $this->assertEquals($mockedProduct->getPrice(), 99.99);
} 
```

}

# regex - 如何编写一个简单的正则表达式以任何顺序在文本文件中搜索两个字符串？

> ID：15574333
> 
> 赞同：0
> 
> 时间：2013-03-22T15:40:08.683
> 
> 标签：regex, sublimetext2

如果我的文件内容是：`ABC DEF GHI JKL MNO PQR STU VWXYZ`，如何使用简单的正则表达式搜索此文件以查看它是否包含：`ABC`和`DEF`？

我需要以下两种情况：

1.  `ABC`, `DEF`[真]
2.  `BAC`, `ABC`[错误]
3.  `DEF`, `ABC`[真]
4.  `CDE`, `ABC`[错误]

最终，我正在搜索数千个文件以查看它们是否包含两个单词。我可以很容易地匹配一个，但不是两个。

**更新**

我还需要这个正则表达式来处理多行。因此，如果第一个字符串位于第 1 行，第二个位于第 100 行，我仍然需要正则表达式来匹配。我在我的文本编辑器中使用正则表达式的[Boost 语法：SublimeText2。](http://www.boost.org/doc/libs/1_47_0/libs/regex/doc/html/boost_regex/syntax/perl_syntax.html)

**更新 2**

回答：`(?s)(abc.*def|def.*abc)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:45:01.037

使用交替以任一顺序检查字符串，由任何内容分隔：

```
ABC.*DEF|DEF.*ABC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:50:01.117

如果您正在搜索不同的单词，使用单词边界很重要：

```
(\bABC\b.*?\bDEF\b|\bDEF\b.*?\bABC\b) 
```

否则你会匹配`ABCDEF`或`ABC DEFINITION`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T15:57:01.173

```
grep -P  -l -z -i 'abc[\w\s]*def|def[\w\s]*abc' * 
```

你应该能够使用类似上面的东西。

PCRE 的高级正则表达式功能需要 -P。

-l 将使其按名称列出匹配的文件。

-z 将使它忽略匹配中的行尾。

-i 将使其不区分大小写。

但是，根据您的需求细节，这可能有点矫枉过正。

同样，特定于使用 grep 的 PCRE 样式的正则表达式。

在其他工具中，您可能不需要取消 EOL 字符等。

没有考虑单词边界。

# .net - 针对 cURL 请求的 RestSharp POST 请求

> ID：15574334
> 
> 赞同：3
> 
> 时间：2013-03-22T15:40:09.027
> 
> 标签：.net, restsharp

我在 .net 中使用 Restsharp 作为 Web api 客户端。我尝试了多种排列，但仍然无法正常工作。它给出以下错误：

*连接失败 系统返回：（13）权限被拒绝。*

任何帮助都感激不尽。

```
curl -v -H "Content-Type: application/json; charset=UTF-8" -X POST -d "{\"name\":\"ask question from mediator1\",\"title\":\"ask question from mediator\",\"abstractText\":\"ask question from mediator\",\"editorialService\":\"CHINA\",\"plcRef\":\"a-000-2000\"}"  http://mynetworkserver:8081/ask/asset 
```

我正在使用的代码：

```
 RestClient client = new RestClient();
        client.BaseUrl = "http://mynetworkserver:8081/ask/asset"; // **Is this url correct?**
       RestRequest request = new RestRequest(Method.POST);
 var fQuestion = new FQuestion
            {
                name = "ask question from mediator 1",
                title = "ask question from mediator",
                abstractText = "ask question from mediator",
                editorialService = "CHINA",
                ref = "A-000-0023"
            };      
request.RequestFormat = DataFormat.Json;
        request.Resource = "asset"; **// What is this?**
        request.AddHeader("Content-Type", "application/json");
        request.AddBody(fQuestion);
        IRestResponse response = client.Execute(request); 
```

# javascript - 使用 Express 将 javascript 代码注入 html

> ID：15574335
> 
> 赞同：9
> 
> 时间：2013-03-22T15:40:10.343
> 
> 标签：javascript, html, express, impress.js

我正在使用`Express`框架编写一个 Web 应用程序来生成`Impress.js`演示文稿并在其上应用可视化编辑器。我已经设置了`app.js`只获取 .html 文件，但我想在 .html 文件的正文结束标记之前从单独的文件中注入 javascript 代码。

例如，我将有一个路由处理程序`/edit`，然后脚本将在注入 html 代码后触发。

```
var express = require('express');

var app = express();

app.configure(function(){
    app.use(express.static(__dirname + '/public'));
});

app.get('/:file', function(req, res) {
  res.sendfile(__dirname + '/public' + file);
});

app.listen(3000);
console.log('Listening on port 3000'); 
```

任何关于如何实现这一目标的想法都将受到欢迎！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-22T15:59:24.147

只是一个想法，但你可以使用类似[Cheerio](https://github.com/MatthewMueller/cheerio)的东西将脚本附加到正文

```
app.get('/:file', function(req, res) {
  var html = fs.readFileSync(__dirname + '/public' + file, 'utf8');
  var $ = cheerio.load(html);
  var scriptNode = '<script>alert("script appended!");</script>';
  $('body').append(scriptNode);
  res.send($.html());
}); 
```

# ruby-on-rails - 如何快速将代码从项目提取到 gem（将类从项目移动到 gem）

> ID：15574336
> 
> 赞同：1
> 
> 时间：2013-03-22T15:40:11.027
> 
> 标签：ruby-on-rails, rubygems, gem, rubymine

我有一个用 Ruby on Rails 编写的复杂项目。我需要将它拆分为较小的子项目。以及所有子项目中使用的一些代码，所以我想将它移到库（核心）并在重用库之后。

在 .NET 中，您可以轻松地将项目添加到您的解决方案中，项目将是库类型，然后将类放入该项目，编译器将编译 dll，这就是我们需要的。我需要一些在意识形态上相同但在 Ruby 中的东西。

我怎么能用最少的努力做到这一点？

我正在使用 Rubymine 5

* * *

*真正的问题只是如何将课程移至宝石。从技术上讲。我以前从来没有做过。所以没有分解之类的东西。只有机制如何从项目中获取类并以最简单的方式将其放入 gem。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:12:45.507

看看[http://guides.rubyonrails.org/plugins.html](http://guides.rubyonrails.org/plugins.html)

我建议看看流行的宝石，看看它们是如何做事的。确实没有一种正确的做事方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T16:09:56.403

通常，您需要在`Gemfile`. 对于本地开发，您可以使用类似

```
gem "mygem", :path => "path/to/gem/directory" 
```

然后，您可以简单地将您的类移动到 gem 中并确保它们是必需的。根据您的捆绑程序设置，这可能会自动完成。在您的 gem 中，您通常需要手动要求您的文件。

您应该查看一个或多个与您做类似事情的其他 gem，以获取有关如何构建它的灵感。

# perl - 如何解析以下html？

> ID：15574340
> 
> 赞同：0
> 
> 时间：2013-03-22T15:40:30.840
> 
> 标签：perl, dom, mojolicious, mojo

我有以下 html 我想提取信息并将它们重塑为类似表格的数据库：

```
<tr some parameters here>
<td more parameters here></div>
<div even more para>Var1</td>
<td params>observation 1</td>
<td params></td> 
</tr> 
<tr some parameters here>
<td more parameters here></div>
<div even more para>Var2</td>
<td params>observation 2</td>
<td params></td> 
</tr> 
```

var3 obs 3、var4 obs4 以此类推。

我被建议使用`Mojo::DOM`并给出以下高度结构化的代码：

```
#!/usr/bin/perl
use warnings;
use strict;
use Data::Dumper;
use lib './lib/lib/perl64';
use Mojo::DOM;
my $html = q(
<html>
<head><title>Some list</title>
</head>
<body>
<div>
<table>
<tr>
<td>Var1</td>
<td>Obs1</td>
</tr>
<tr>
<td>var2</td>
<td>obs2</td>
</table>
</div>
</body>
</html>
);
my $dom = Mojo::DOM->new($html);
my $table = $dom->at('table');
for my $record ($table->children('tr')->each) {
my %record = map { $_->text } $record->children('td')->each;
print Dumper(\%record), "\n";
} 
```

请假设我不知道任何编程。我将如何调整代码以便我可以在我的情况下使用它？在我看来，它离成为一个可行的脚本还很远。非常感谢您的帮助和提前感谢。

问候，嘘

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-06T12:40:14.320

`</tr>` 在以下之前缺少关闭`</table>`：

```
 <tr>
    <td>var2</td>
    <td>obs2</td>
  </tr>
</table> 
```

# opencv - OpenCV 中的高通滤波

> ID：15574346
> 
> 赞同：3
> 
> 时间：2013-03-22T15:40:46.777
> 
> 标签：opencv, image-processing

为了在 OpenCV 中制作 3x3 高通滤波器内核，我使用以下代码（适用于 Android）：

```
Mat kernel = new Mat(3, 3, CvType.CV_32FC1);
float[] data = {0, -1, 0, -1, 4, -1, 0, -1, 0};
kernel.put(0, 0, data); 
```

然后我使用内核过滤：

```
Imgproc.filter2D(image, image, -1, kernel); 
```

有没有办法在 OpenCV 中自动生成更大的高通内核？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T17:23:03.783

在 opencv 中实现了许多不同的高通滤波器。您为示例设置的是拉普拉斯算子：

```
0  1  0
1 -4  1
0  1  0 
```

您可以使用[`Laplacian`](http://docs.opencv.org/modules/imgproc/doc/filtering.html#laplacian)具有参数的opencv`ksize`函数。您必须能够通过操纵该参数来应用更大的拉普拉斯核。

如果你对其他高通滤波器感兴趣，opencv 有 Canny、Sobel 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:42:35.240

虽然我将使用 Safir 的答案，但我确实找到了一个函数[getDerivKernels()](http://opencv.willowgarage.com/documentation/cpp/imgproc_image_filtering.html#getDerivKernels)似乎可以自己生成内核矩阵，尽管它仅适用于 Sobel 或 Scharr 过滤器并且仅适用于特定大小。

# ios - 任何人都可以提供 Reskit 0.20 身份验证和 Rails 的示例代码吗？

> ID：15574356
> 
> 赞同：1
> 
> 时间：2013-03-22T15:41:16.267
> 
> 标签：ios, ruby-on-rails, restkit

任何人都可以帮助 Reskit 0.20 身份验证和 Rails 吗？我在这方面找不到任何东西。

# google-maps - 标记之间的距离 - 第一次点击没有结果

> ID：15574362
> 
> 赞同：2
> 
> 时间：2013-03-22T15:41:35.830
> 
> 标签：google-maps, google-maps-api-3

我有一个应用程序，可以在当前/单击的标记周围添加 50 英里半径（来自 mapMarkers []）。我知道所选标记的索引号及其 LatLng 位置为“myPosition”，其他标记的 LatLng 位置为 mapMarkers[i].point。

在地图上绘制完圆圈后，我调用以下简单函数来遍历所有 mapMarkers[] 以计算与当前标记的距离，然后计算有多少标记实际落在 50mi 半径内。很简单，对吧？

问题：以下例程在当前标记的第一次迭代（即第一次单击）时不会产生任何结果。但是会在第二次和后续点击当前标记时产生预期的结果。

```
function inCircle() {
    var j = 0;
    var myDistance = 0;
    for (var i = 0; i < mapMarkers.length; i++) {
        myDistance = google.maps.geometry.spherical.computeDistanceBetween(myPosition, mapMarkers[i].point);
        myDistance = parseInt(myDistance/1609.34)  //meters to miles
        if (myDistance <= 50) {
            j = j + 1;
            //Do more stuff...
        }
    }
    alert("Markers inside circle: " + j);
} 
```

我在将圆圈绑定到所选标记后调用此函数。“myPosition”在地图加载时声明。注释掉距离计算会在当前标记的第一次迭代中产生结果。

有什么想法可能导致这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:55:33.113

WRT 我上面的评论：我认为，几何库只是因为您提出了请求而加载。请参阅此处 developers.google.com/maps/documentation/javascript/libraries。当您调用谷歌地图 js（在页面加载期间）时，包括几何球体库。

例如：

```
 <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=drawing,geometry,weather"></script> 
```

# error-handling - 来自 DOS 的错误测试和控制

> ID：15574363
> 
> 赞同：0
> 
> 时间：2013-03-22T15:41:37.453
> 
> 标签：error-handling, batch-file, sqlcmd

我在 Windows 服务器企业系统 SP2 上运行 DOS 6.0.6002。SQL Server 2008 R2 (10.50.4000) 我在 DOS 中有一个主控制程序。我正在通过 sqlcmd 调用一个 sql 程序。简化版本如下所示：

```
set sqlsvr=myServer
set logfile=logfile.txt
sqlcmd -S %sqlsvr%  -d myDB -i import_some_stuff.sql > "%logfile%" 2>&1
echo error level = %ERRORLEVEL% 
```

我需要这个程序非常健壮。它必须每天针对大量文件和表运行。如果它失败了，我需要抓住它并通知系统管理员。现在，抓住它。

因此，为了测试这一点，我尝试了以下测试：

1）将文件重命名为不存在的文件。结果：它返回并且错误级别为 1（即它捕获了错误！）太棒了！

2）在sql程序的前面输入一些语法垃圾。结果：它在日志文件中打印错误消息，但它没有返回错误（因此 %ERRORLEVEL% 中的返回值为零。这对我来说似乎令人难以置信。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:47:11.533

尝试使用`-b`sqlcmd 选项：

> **-b**
> 
> 指定 sqlcmd 在发生错误时退出并返回 DOS ERRORLEVEL 值。当 SQL Server 错误消息的严重级别大于 10 时，返回给 DOS ERRORLEVEL 变量的值为 1；否则返回值为 0。如果除了 -b 之外还设置了 -V 选项，如果严重级别低于使用 -V 设置的值，则 sqlcmd 不会报告错误。命令提示符批处理文件可以测试 ERRORLEVEL 的值并适当地处理错误。sqlcmd 不报告严重级别为 10 的错误（信息性消息）。
> 
> 如果 sqlcmd 脚本包含不正确的注释、语法错误或缺少脚本变量，则返回的 ERRORLEVEL 为 1。

这是[文档](http://msdn.microsoft.com/en-us/library/ms162773.aspx)

# windows - 什么是 perl 的线程安全随机数生成器？

> ID：15574374
> 
> 赞同：0
> 
> 时间：2013-03-22T15:42:01.150
> 
> 标签：windows, multithreading, perl, random, thread-safety

核心 perl 函数 rand() 不是线程安全的，我需要在线程化的蒙特卡罗模拟中使用随机数。

我很难在 CPAN 中找到关于那里的各种随机数生成器的任何注释（如果有的话）是线程安全的，而且我所做的每个谷歌搜索都被 C/C++/python/除了 perl 之外的任何东西弄乱了。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:16:08.547

[`rand`不要在 Windows 上使用内置的](http://blog.nu42.com/2010/09/be-vary-of-using-built-in-rng-for.html)Monte Carlo 。至少，尝试：

```
my %r = map { rand() => undef } 1 .. 1_000_000;
print scalar keys %r, "\n"; 
```

如果没有任何变化，它应该打印`32768`完全不适合任何严肃工作的内容。而且，即使它确实打印了一个更大的数字，你最好还是坚持使用具有已知良好模拟质量的 PRNG。

您可以使用[Math::Random::MT](http://search.cpan.org/perldoc/Math%3a%3aRandom%3a%3aMT)。

`Math::Random::MT`您可以在每个线程中使用自己的种子数组实例化一个新对象。[Mersenne Twister](http://en.wikipedia.org/wiki/Mersenne_twister#Advantages)具有良好的模拟特性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:32:47.213

你`/dev/urandom`的系统上有吗？

```
BEGIN {
    open URANDOM, '<', '/dev/urandom';
}

sub urand {  # drop in replacement for rand.
    my $expr = shift || 1;
    my $x;
    read URANDOM, $x, 4;
    return $expr * unpack("I", $x) / (2**32);
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-22T16:47:20.800

rand 是线程安全的，我认为您对“线程安全”的含义有错误的定义，如果它不是“线程安全”，则意味着程序/函数正在修改其“共享”数据结构，使其在线程模式下执行不安全.

检查 Rand 函数文档，注意它以 EXPR 作为参数，在每个线程中您可以提供不同的 EXPR。

[http://perldoc.perl.org/functions/rand.html](http://perldoc.perl.org/functions/rand.html)

# php - 使用 getElementsByTagName 时在条件注释中包含标签

> ID：15574375
> 
> 赞同：0
> 
> 时间：2013-03-22T15:42:05.020
> 
> 标签：php, domdocument

我想使用 getElementsByTagName 在我的 HTML 中查找所有**脚本**标签，然后使用 src 属性。

我使用以下代码可以正常工作，但它忽略了条件注释中的标签。

```
foreach ($dom->getElementsByTagName('script') as $node) 
{
    if ($node->hasAttribute('src'))
    {
        echo $node->getAttribute('src');
    } 
} 
```

条件注释标记被忽略的示例：

```
<!--[if lt IE 9]>
<script src="js/html5shiv.js"></script>
<![endif]--> 
```

有没有办法在搜索中也包含这个？我在下面找到了线程，但是循环遍历所有子元素的建议并不完全理想。它们是其他解决方案吗？

[PHP DomDocument 更改条件注释](https://stackoverflow.com/questions/3879108/php-domdocument-alter-conditional-comments)

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:00:18.010

注释就是注释，因此其中的内容不会*在*`script`DOM 中生成元素。没有元素 == 没有选择。

如果您不喜欢其他线程的解决方案，那么您可以尝试在创建 DOM 对象之前使用正则表达式删除注释。但是如果这更可靠是值得怀疑的......遇到任何稍微畸形的HTML，这可能会比你预期的更多（或更少）。

# python - 在 Python 中解压缩数组

> ID：15574376
> 
> 赞同：0
> 
> 时间：2013-03-22T15:42:05.723
> 
> 标签：python, arrays, compression

我需要解压缩一个数组，但我不知道从哪里开始。

这是函数的输入

```
def main():
    # Test case for Decompress function
    B = [6, 2, 7, 1, 3, 5, 1, 9, 2, 0]
    A = Decompress(B)
    print(A) 
```

我要这个出来

```
A = [2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 5, 5, 5, 9, 0, 0] 
```

如果看不到图案，是出现了`B[1]`多少次，然后是出现了多少次，以此类推。`B[2]``A[]``B[3]``B[4]``A[]`

我该如何为此编写函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:47:04.360

`zip()`带有和的紧凑版本`itertools.chain.from_iterable`：

```
from itertools import chain

list(chain.from_iterable([v] * c for c, v in zip(*([iter(B)]*2)))) 
```

演示：

```
>>> B = [6, 2, 7, 1, 3, 5, 1, 9, 2, 0]
>>> from itertools import chain
>>> list(chain.from_iterable([v] * c for c, v in zip(*([iter(B)]*2))))
[2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 5, 5, 5, 9, 0, 0] 
```

打破这个：

*   `zip(*([iter(B)]*2)))`对计数与值：

    ```
    >>> zip(*([iter(B)]*2))
    [(6, 2), (7, 1), (3, 5), (1, 9), (2, 0)] 
    ```

    从输入可迭代中获取对是一个相当标准的 Python 技巧。

*   `([v] * c for c, v in zip(*([iter(B)]*2)))`是一个生成器表达式，它接受计数和值并生成具有重复计数次数的值的列表：

    ```
    >>> next([v] * c for c, v in zip(*([iter(B)]*2)))
    [2, 2, 2, 2, 2, 2] 
    ```

*   `chain.from_iterable`获取由生成器表达式生成的各种列表，并让您遍历它们，就好像它们是一个长列表一样。

*   `list()`把它全部变回一个列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:47:55.840

```
def unencodeRLE(i):
    i = list(i) #Copies the list to a new list, so the original one is not changed.
    r = []

    while i:
        count = i.pop(0)
        n = i.pop(0)
        r+= [n for _ in xrange(count)]
    return r 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T02:13:57.447

一个稍快的解决方案（使用 Python 2.7.3）：

```
A=list(chain.from_iterable( [ B[i]*[B[i+1]] for i in xrange(0,len(B),2) ] ) )

>>> timeit.Timer(
        setup='B=[6,2,7,1,3,5,1,9,2,0];from itertools import chain',
        stmt='A=list(chain.from_iterable( [ B[i]*[B[i+1]] for i in xrange(0,len(B),2) ] ) )').timeit(100000)
0.22841787338256836 
```

比较：

```
>>> timeit.Timer(
        setup='B=[6,2,7,1,3,5,1,9,2,0];from itertools import chain',
        stmt='A=list(chain.from_iterable([v] * c for c, v in zip(*([iter(B)]*2))))').timeit(100000)
0.31104111671447754 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:04:09.667

还有一个单行：

```
def decompress(vl):
    return sum([vl[i] * [vl[i+1]] for i in xrange(0, len(vl), 2)], []) 
```

1.  列表理解提取和解包对（`xrange(0, len(vl), 2)`遍历对的开始索引，`vl[i]`是重复次数，`vl[i+1]`是要重复的内容）。

2.  `sum()`将结果连接在一起（`[]`是解压缩列表按顺序添加到的初始值）。

# javascript - 有什么错误？

> ID：15574382
> 
> 赞同：-1
> 
> 时间：2013-03-22T15:42:33.613
> 
> 标签：javascript, html

我用一些 Javascript 代码制作了一个页面：

```
 function createNewWindow () {
      var userName = document.getElementById('user_name').value;
      var newPage = "<html><head><title>";
      newPage += userName;
      newPage += "</title></head><body>";
      newPage += "<p>Hello " + userName;
      newPage += "</p></body></html>";
      var j = window.open('');
     j.document.write(newPage);
     j.document.close();
     } 
```

现在dreamweaver 说行有错误：

```
 var userName = document.getElementById('user_name').value
  var newPage = "<html><head><title>" 
```

我没有看到错误，我搜索了整个互联网。有人来帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:44:24.410

您的代码在语法上是正确的。如果 DW 抱怨，那就是缺少分号：

```
function createNewWindow() {
    var userName = document.getElementById('user_name').value; // semi-colon here
    var newPage = "<html><head><title>"; // semi-colon here
    newPage += userName;
    newPage += "</title></head><body>";
    newPage += "<p>Hello " + userName;
    newPage += "</p></body></html>";
    var j = window.open(''); // semi-colon here
    j.document.write(newPage);
    j.document.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:44:30.887

你忘了放`;`：

```
 var userName = document.getElementById('user_name').value;
 var newPage = "<html><head><title>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:43:41.503

也许你错过了一个分号：

```
var userName = document.getElementById('user_name').value
var newPage = "<html><head><title>"
var j = window.open('') 
```

不 ？

它是否适用于：

```
var userName = document.getElementById('user_name').value;
var newPage = "<html><head><title>";
var j = window.open(''); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T15:43:44.140

你错过了缺少的分号

```
var userName = document.getElementById('user_name').value;
var newPage = "<html><head><title>"; 
```

# html - Blackberry Simulator OS 7 浏览器失真

> ID：15574385
> 
> 赞同：3
> 
> 时间：2013-03-22T15:42:46.813
> 
> 标签：html, jquery-mobile, mobile, blackberry, blackberry-simulator

我正在为各种移动设备测试我们的网络应用程序。在本例中，我正在运行一个 Blackberry 模拟器，该模拟器模拟运行 Blackberry OS 7 的 Blackberry Bold 9900。我的页面中没有任何异常。第一个页面不是特别特别，就是Html、jquery、jquerymobile。然而，黑莓模拟器的浏览器将我的页面显示为 1970 年代的彩电，需要调整其兔耳朵。

目前我无法使用真正的黑莓手机，但有人告诉我，我们的页面不会在真正的硬件上显示这种失真。

是否有任何解决方法可以让模拟器更好地反映真实硬件？我的 Html 中是否有一些东西弄乱了模拟器上的演示文稿？如果我不使用 jquerymobile，它看起来还不错（不管它值多少钱）。

我在 jquerymobile 演示站点上尝试了相同的实验。 [http://jquerymobile.com/demos/1.3.0/docs/intro/](http://jquerymobile.com/demos/1.3.0/docs/intro/) - 显示与我的应用程序相同的多彩混乱。请参阅下面的捕获图像。[http://forum.jquery.com/topic/jquery-mobile-demo-page-causes-blackberry-7-1-simulator-browser-to-crash](http://forum.jquery.com/topic/jquery-mobile-demo-page-causes-blackberry-7-1-simulator-browser-to-crash)有一位黑莓员工的有趣评论：

> 页面确实加载了，但并非没有一些非常重要的渲染伪影（内容顶部似乎有彩色的静态/噪声覆盖。）

该模拟器来自[黑莓网站](http://us.blackberry.com/sites/developers/resources/simulators.html)。

- - 更新

黑莓设备模拟器可以从[http://us.blackberry.com/sites/developers/resources/simulators.html](http://us.blackberry.com/sites/developers/resources/simulators.html)下载 您可以下载特定设备和操作系统版本的模拟器。似乎有些模拟器有问题，不支持 jQueryMobile。但是，我发现 Blackberry OS 7 的 Blackberry 9790 到目前为止运行良好。这是 7.0.0.592 (9790)。

![在此处输入图像描述](../Images/e1ca3353d2e7f288a893fcf31ac296de.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T09:49:12.193

我将此问题追溯到 CSS，更具体地说是以下标签：

```
 -webkit-perspective:
   -webkit-transform: 
```

当评论这些一切都很好。

**更新**：升级图形驱动程序似乎可以解决这个问题（它对我不起作用）：http:
[//supportforums.blackberry.com/t5/Testing-and-Deployment/Blackberry-7-emulators-bug/td -p/1409051](http://supportforums.blackberry.com/t5/Testing-and-Deployment/Blackberry-7-emulators-bug/td-p/1409051)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:23:21.510

这似乎是程序本身的错误，而不是您的 HTML。如果您的代码在真实的东西上运行良好，但在模拟器上却不行，那么它可能是模拟器。

# jquery - 等待ajax显示结果

> ID：15574386
> 
> 赞同：2
> 
> 时间：2013-03-22T15:42:46.953
> 
> 标签：jquery, deferred, promise

我很难完成以下任务。我有三个功能

```
function f1(param1) {
    var d = $.deferred();
    // ajax call with data param1
   d.resolve(res0, res1);
    return d.promise();
}
function f2(param2) {
    var d = $.deferred();
    // ajax call with data param2
    d.resolve(res2);
    return d.promise();
}

function f3(param3) {
   var d = $.deferred();
   // ajax call with data param3
   d.resolve(res3);
   return d.promise();
} 
```

我像这样运行它们：

```
$.when(f1(param1),f2(pram2),f3(param3)).done(function(res,res2,res3){

}); 
```

我的要求是：

如果 res2 是空运行`f2(res[1])`。完成后显示`res[0] + f2(res[1]) + res3`

否则显示`res[0] + res2 + res3`

有没有人可以使用 jQuery/promises 帮助我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:10:03.070

如果我理解正确，`res`并且`res3`彼此独立，但`res2` *可能*取决于*初始*调用是否`res[1]`产生空结果。*`f2`*

 *如果发生这种情况，您需要`f2`再次致电。

所以：

```
$.when( f1(p1), f2(p2), f3(p3)).then(function(res, res2, res3) {
    if (!res2) {             // substitute appropriate "empty" test
        res2 = f2(res[1]);   // call f2 again, getting a new promise
    }
    return $.when(res, res2, res3);  // create new compound promise
}).done(function(res, res2, res3) {
    // do your stuff
}); 
```

这个想法是内部调用`$.when()`将自动解决 if `res`，`res2`并且`res3`已经是“正常”返回值，但是 if`res2`被替换为 new调用`promise`将`$.when`等待*它*在继续之前解决。*

# php - 在 $_SESSION 中获取时间戳 mysql 值

> ID：15574394
> 
> 赞同：0
> 
> 时间：2013-03-22T15:43:07.140
> 
> 标签：php, mysql, session, timestamp

```
$qry = "SELECT user, TIME_FORMAT(last_login_time, '%H:%i') FROM login_attempts WHERE user = '".$username."'";
$result = mysql_query($qry,$this->connection);
if(!$result || mysql_num_rows($result) <= 0){
    mysql_query ("INSERT INTO login_attempts(userid, user, attempts, last_login_time) VALUES('', '$username', '{$_SESSION['count']}', '{$_SESSION['login_time']}')");           
}
else{                   
    $row = mysql_fetch_assoc($result);
    $_SESSION['login_time'] = $row["last_login_time"];
    mysql_query ("UPDATE login_attempts SET attempts = '" .$_SESSION['count']."' WHERE user = '".$username."'");            
} 
```

在上面的代码中，我将我的`$_SESSION['login_time']`值存储`login_attempts`在列名为“last_login_time”的“”表中。

现在我需要获取该值并将其存储回`$_SESSION['login_time']`数组中，以便了解用户上次尝试输入的时间。我该如何获取这个值？？？

列的数据类型`'last_login_time'`是`'timestamp'.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:47:07.447

您需要为您的`TIME_FORMAT`列加上别名才能引用它。

```
SELECT user, TIME_FORMAT(last_login_time, '%H:%i') AS last_login_time ... 
```

另外，为什么不`UPDATE`尝试登录`SET attempts = attempts + 1`？

# ant - 如果没有所需名称的属性，ANT 是否应用 prefixValues ？或者这是一个错误？（提供SSCCE）

> ID：15574395
> 
> 赞同：4
> 
> 时间：2013-03-22T15:43:11.547
> 
> 标签：ant, properties, prefix

我对和属性有这种奇怪的行为，`ant`我想知道你的想法。我不明白这个逻辑。这种行为可能很有用，但我想知道我是否可以依赖它或者这是否是一个错误。

如果没有所需名称的属性，则在扩展属性的右侧时，似乎 ant 正在应用前缀。这是SSCCE：

build.properties：

```
a=A
formula=${a} 
```

构建.xml：

```
<project default="test">
    <target name="test">
        <property name="test.a" value="[test.a has been used instead of a, why? prefixValues is false]" />
        <property file="build.properties" prefix="test" prefixValues="false" />
        <echo>${test.formula}</echo>
    </target>
</project> 
```

输出：

```
test:
    [echo] [test.a has been used instead of a, why? prefixValues is false]
BUILD SUCCESSFUL
Total time: 364 milliseconds 
```

如您所见，test.formula 应该使用“a”而不是“test.a”，但从未定义过“a”。是这个原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T17:00:44.260

的确，这似乎很奇怪。在我看来，输出应该是`${a}`

我做了一些测试，我注意到：

如果您`a`在`build.xml`而不是`build.properties`: 中定义它会按预期工作。即具有以下内容`build.xml`：

```
<project default="test">
<target name="test">
    <property name="a" value="A" />
    <property file="build.properties" prefix="test" prefixValues="false" />
    <echo>${test.formula}</echo>
</target>
</project> 
```

和 build.properties

```
formula=${a} 
```

输出是

```
A 
```

**但是**，如果你改变`prefixValues="true"`输出是：

```
${a} 
```

在我期待的时候：`${test.a}`

最后，如果您`<property name="test.a" value="some value" />`在 build.xml 中定义（始终使用`prefixValues="true"`）：输出现在（如预期的那样）

```
some value 
```

所以，我的结论：

*   只要*右侧*使用的属性未在同一属性文件中定义，prefixValues 就可以正常工作。

*   *对于右侧*使用并在同一属性文件中定义的属性，prefixValues 将被忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T19:41:48.537

看一下 Ant 代码，在属性相关的类中，在`org.apache.tools.ant.property.ResolvePropertyMap`类上：

```
public void resolveAllProperties(Map<String, Object> map, String prefix,
                                     boolean prefixValues) {
        // The map, prefix and prefixValues flag get used in the
        // getProperty callback
        this.map = map;
        this.prefix = prefix;
        this.prefixValues = prefixValues;

        for (String key : map.keySet()) {
            expandingLHS = true;
            Object result = getProperty(key);
            String value = result == null ? "" : result.toString();
            map.put(key, value);
        } 
```

然后，在`getProperty(String)`方法（片段）中：

```
 // If the property we are looking up is a key in the map
            // (first call into this method from resolveAllProperties)
            // or we've been asked to prefix the value side (later
            // recursive calls via the GetProperty interface) the
            // prefix must be prepended when looking up the property
            // outside of the map.
            String fullKey = name;
            if (prefix != null && (expandingLHS || prefixValues)) {
                fullKey = prefix + name;
            } 
```

因此，如您所见，如果属性文件中存在该属性，即使`prefixValues`为 false，它也会收到前缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T12:28:01.773

我又进行了一些测试，可能会得到很多不同的结果。

检查来源后，我认为在通过文件添加属性时查找属性时存在错误。通过修改一些 ant 源代码，我可以让它工作。

最后，我决定用建议的补丁填写错误报告（ [https://issues.apache.org/bugzilla/show_bug.cgi?id=54769 ）。](https://issues.apache.org/bugzilla/show_bug.cgi?id=54769)

谢谢你们。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-25T18:52:59.203

这是因为属性是不可变的。一旦设置好，它们就会在构建的其余部分中被卡住。 [查看 Ant 手册中的“属性”文档。](http://ant.apache.org/manual/Tasks/property.html) 对于某些人来说，这实际上是一个问题，所以[ant-contrib 的家伙们加入了一项新任务来模拟一个变量。](http://ant-contrib.sourceforge.net/tasks/tasks/variable_task.html)

如果您像这样更改构建：

```
<project default="test">
    <target name="test">
        <property file="build.properties" prefix="test" prefixValues="false" />
        <property name="test.a" value="[test.a has been used instead of a, why? prefixValues is false]" />
        <echo>${test.formula}</echo>
    </target>
</project> 
```

你在控制台上得到“A”。这是因为 test.a 和 test.formula 是在您对“test.a”的新（忽略）分配之前的第一次调用中定义的

# vb.net - 编辑 .rpt 文件

> ID：15574397
> 
> 赞同：0
> 
> 时间：2013-03-22T15:43:14.477
> 
> 标签：vb.net, visual-studio-2010, .net-4.0, crystal-reports

一家公司开发了一个用 VB.net 编写的小型 Web 界面，用于查询数据库并生成报告。该接口使用`CrystalDecisions.Shared`库。在代码中，它引用了这个：

```
 If rbExportType.SelectedValue = "PDF" Then
    Dim sda As New DB2DataAdapter(cmd)
    ReportName = "Reports/R002.rpt"
    rpt.Load(Server.MapPath(ReportName), CrystalDecisions.[Shared].OpenReportMethod.OpenReportByTempCopy)
    sda.Fill(ds.tbl_R002)
    rpt.SetDataSource(ds)
    rpt.SetParameterValue(0, ddDatabase.SelectedItem.Text)
    ExporttoPDF()
 Else 
```

现在，用户要求我在报告中添加一个简单的字段，`Date`. 我已编辑查询以提取此数据，但是当我运行报告时，该`Date`字段未显示在报告上。我假设必须编辑实际的 .rpt 文件以在报告中包含此字段。

尝试`Reports/R002.rpt`在文本编辑器中编辑时，只有数字/符号。

如何编辑此 .rpt 文件？Visual Studio 2010 的版本已经过了试用期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:51:59.433

Visual Studio 已经（或曾经）内置了一个 Crystal Reports 编辑器。我刚刚在我的 Visual Studio 2012 安装中找不到它，所以他们可能放弃了它以支持他们自己的 Reporting Services 平台，但我可能只是错过了它。如果在 Visual Studio 2010 副本中找不到编辑器，请尝试下载旧版本的 Visual Studio。

**更新：**

快速谷歌搜索表明它现在只是单独分发。
这是VS2012版本：[http](http://scn.sap.com/docs/DOC-35074)
://scn.sap.com/docs/DOC-35074 这是VS2010版本：[http ://scn.sap.com/docs/DOC-7824](http://scn.sap.com/docs/DOC-7824)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:16:09.970

CrystalReports 是一个专有软件，不会成为默认 VS 包的一部分。

是的，为了向报告中添加字段，您必须编辑报告本身。如果您有 CrystalReport 软件的副本，这没什么大不了的。

# css - 使用 css 具有单独图像和文本的液体水平导航按钮

> ID：15574401
> 
> 赞同：0
> 
> 时间：2013-03-22T12:45:09.493
> 
> 标签：css, image

是否可以有一个带有图像链接的液体导航栏。我正在尝试建立一个响应式链接，左侧是图像，右侧是文本。如果窗口的大小发生变化，那么按钮（链接）也会改变大小。我更喜欢用 CSS 来做这件事。

到目前为止，我尝试过的是：

```
<div style="height:62px;margin-left:60px;border:solid 1px #FFFFFF;">
    <ul class="main_nav">
        <li>
            <a href="#me">
                <img src="img/avatar/me.png" alt="me">
                Me
            </a>
        </li>

        <li>
            <a href="#guide">
                <img src="img/avatar/spotlight.png" alt="guide">
                Guide
            </a>
        </li>

        <li>
            <a href="#downloads">
                <img src="img/avatar/downloads.png" alt="downloads">
                Downloads
            </a>
        </li>
    </ul>
<div> 
```

# ios - 很难理解 resizableImageWithCapInsets

> ID：15574408
> 
> 赞同：0
> 
> 时间：2013-03-22T15:43:45.377
> 
> 标签：ios, uibutton

我有一个 UIButton，我正在尝试将可调整大小的图像设置为背景。图像大小为 25X25 点。我使用以下代码来设置图像。

```
UIImage *backgroundImage = [[UIImage imageNamed:@"barbutton_normal"] resizableImageWithCapInsets:UIEdgeInsetsMake(3, 2, 3, 2)];

    [self setBackgroundImage:backgroundImage forState:UIControlStateNormal];

    [self setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];

    [self setTitleEdgeInsets:UIEdgeInsetsMake(10,10, 10, 10)];

    self.layer.cornerRadius = 6.0;
    self.layer.masksToBounds = YES; 
```

但是按钮看起来像这样：

![在此处输入图像描述](../Images/3bb2145d1f5f4a0668f172abad795a72.png)

我究竟做错了什么？另外，我怎样才能使按钮的顶部和底部大一点，这样它就不会看起来挤满了文字。

# python - 如何将 App Engine 数据存储中的实体加载到我的 WTForms model_form 中？

> ID：15574411
> 
> 赞同：0
> 
> 时间：2013-03-22T15:43:50.760
> 
> 标签：python, google-app-engine, google-cloud-datastore, wtforms

我正在使用 WTForms 的 App Engine 扩展从我的数据存储模型生成表单。这对于添加新实体非常有用，但我也希望能够使用表单来编辑现有实体。

是否可以将现有数据存储实体加载到使用 GAE 数据存储模型中的 model_forms 创建的表单中？如果是这样，我该怎么做？如果没有，我应该采取什么方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T10:51:38.537

这是我更新谷歌数据存储的版本。

```
class AdminBlogEdit(MethodView):
    def __init__(self):
            self.blog_form = NewBlogEntryForm(csrf_enabled=False)

    def get(self,blog_key_id=None):
        if blog_key_id:
            self.blog_model = BlogEntryModel.get_by_id(blog_key_id)
            self.blog_form = NewBlogEntryForm(obj = self.blog_model)

        return render_template('admin/blog_edit.html', form=self.blog_form)

    def post(self,blog_key_id=None):
        if self.blog_form.validate():
            self.update_post(blog_key_id)
            self.blog_model.put()
            return redirect(url_for(".admin"))
        else:
            return render_template('admin/blog_edit.html', form=self.blog_form)     
        return redirect(url_for(".admin"))

    def update_post(self,blog_key_id):
        if blog_key_id: 
            self.blog_model = BlogEntryModel.get_by_id(blog_key_id)
            self.blog_form.populate_obj(self.blog_model)    
        else:
            self.blog_model = BlogEntryModel(title  =   self.blog_form.title.data, date_created = self.blog_form.date_created.data, 
                                                            entry = self.blog_form.entry.data) 
```

主要思想是在显示 GET 请求之前检索数据存储实体并填写表单数据。

对于 PUT 请求，再次检索数据存储实体并使用表单数据对其进行更新，然后对其调用 datastoremodel.put()

# workflow - 如何以编程方式添加 Memebres CRM 2011 后更新营销列表

> ID：15574413
> 
> 赞同：1
> 
> 时间：2013-03-22T15:43:52.147
> 
> 标签：workflow, dynamics-crm-2011, dynamics-crm

我创建了一个将成员插入营销列表的工作流。但是当这个过程完成时，我注意到营销列表成员计数器总是 = N -1

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Crm.Sdk.Messages;
using Microsoft.Xrm.Sdk;
using Microsoft.Xrm.Sdk.Workflow;
using System.Activities;

using System.IO;

namespace ContactToMarketingList
{
    public class ContactToMList : CodeActivity
    {
        [RequiredArgument]
        [Input("Contatto")]
        [ReferenceTarget("contact")]
        public InArgument<EntityReference> Contact { get; set; }

        [RequiredArgument]
        [Input("Marketing List")]
        [ReferenceTarget("list")]
        public InArgument<EntityReference> MList { get; set; }

        [RequiredArgument]
        [Input("Inserimento")]
        public InArgument<bool> Inserimento { get; set; }
        private static string _separatore = "\r\n";
        private static Log_Entity log = null; 

        protected override void Execute(CodeActivityContext executionContext)
        {
            //Entity myList = new Entity();
            //myList.LogicalName = "list"; 
            string _logs = string.Empty; 
            //string fileName = "c:\\temp\\" + DateTime.Now.ToString("HH:mm:ss.ffff");
            //if (!File.Exists(fileName))
            //    File.WriteAllText(fileName, string.Empty); 

            IExecutionContext context = executionContext.GetExtension<IExecutionContext>();
            IOrganizationServiceFactory serviceFactory = executionContext.GetExtension<IOrganizationServiceFactory>();
            IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);
            ITracingService tracer = executionContext.GetExtension<ITracingService>(); 

            if(log== null)
            log = new Log_Entity(service); 

            try
            {
                EntityReference contactiId = Contact.Get<EntityReference>(executionContext);
                log.addLogs(ref _logs, "ContactiId:::" + contactiId.Id.ToString()); 
                EntityReference listId = MList.Get<EntityReference>(executionContext);
                log.addLogs(ref _logs, "ListId:::" + listId.Id.ToString());
                Boolean inserimento = Inserimento.Get(executionContext);
                log.addLogs(ref _logs, "Boolean:::" + inserimento.ToString().ToUpper());
                XrmDataContext datacontext = new XrmDataContext(service);

                var members = (from m in datacontext.ListMemberSet where m.ListId.Id == MList.Get<EntityReference>(executionContext).Id select m.EntityId.Id).ToArray();

                Boolean _action = false;
                foreach (Guid id in members)
                    if (Contact.Get<EntityReference>(executionContext).Id == id)
                        _action = true;

                log.addLogs(ref _logs, "L'utente è già nella lista?" + _action.ToString().ToUpper()); 

                if (Inserimento.Get(executionContext) && !_action)
                {
                    log.addLogs(ref _logs, "Add to marketing List - Inizio"); 
                   // File.AppendAllText(fileName, "Inserimento.Get(executionContext) && !_action"); 
                    AddMemberListRequest AddMemberRequest = new AddMemberListRequest();

                    AddMemberRequest.ListId = MList.Get<EntityReference>(executionContext).Id;
                    AddMemberRequest.EntityId = Contact.Get<EntityReference>(executionContext).Id;
                    AddMemberListResponse AddMemberResponse = service.Execute(AddMemberRequest) as AddMemberListResponse;
                    log.addLogs(ref _logs, "Add to marketing List - Fine"); 

                }
                else if (!Inserimento.Get(executionContext) && _action)
                {
                    log.addLogs(ref _logs, "Remove from  marketing List - Inizio"); 

                    RemoveMemberListRequest RemoveMemberRequest = new RemoveMemberListRequest();
                    RemoveMemberRequest.ListId = MList.Get<EntityReference>(executionContext).Id;
                    RemoveMemberRequest.EntityId = Contact.Get<EntityReference>(executionContext).Id;                   
                    RemoveMemberListResponse RemoveMemberResponse = service.Execute(RemoveMemberRequest) as RemoveMemberListResponse;
                    log.addLogs(ref _logs, "Remove from  marketing List - Fine"); 

                }
                else
                {
                    log.addLogs(ref _logs, Inserimento.Get(executionContext) == true ? "L'utente è già presente nella Lista di Marketing." + _separatore : "L'utente non è presente nella Lista di Marketing." + _separatore); 
                }

                log.WriteLog( _logs);
                var MyList = (from l in datacontext.ListSet where l.Id == listId.Id select l).ToList().FirstOrDefault();
                service.Update(MyList); 

            }
            catch(Exception ex)
            {
                if (log == null)               
                    new Log_Entity(service).WriteLog( _logs, ex.Message); 
                else                
                    log.WriteLog( _logs, ex.Message);               
            } 

        }

    }
} 
```

在我的日志中，每次我调用 Service.Update() 时，我都会发现以下消息：

> EntityState 必须设置为 null、Created（对于 Create 消息）或 Changed（对于 Update 消息）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T00:09:14.570

在操作后注册插件（或者甚至异步，如果你觉得合适的话）。

# msbuild - 在 Team CIty 中构建时找不到 madExcept.obj

> ID：15574417
> 
> 赞同：1
> 
> 时间：2013-03-22T15:43:58.597
> 
> 标签：msbuild, teamcity, c++builder, madexcept

我使用*Team City构建了一个**C++ Builder 2010*项目，并注意到我在添加*madExcept*时遇到了问题。该构建抱怨找不到*MADEXCEPT.OBJ*。我的猜测是在*C++ Builder 2010 IDE中添加的**标准*包含路径不会传播到*Team City*构建。由于*.cbproj*文件没有提及*madExcept*的位置，因此构建失败。我是对的，我该如何最好地纠正这个问题？*在Build Agent*上的*IDE*中构建工作正常，甚至使用*RAD Studio 命令提示符*，就在************Team City*正在构建它失败了。更奇怪的是，在使用*RAD Studio 命令提示符*时没有设置指向*madExcept*的变量，但它仍然有效。***********

 **![在此处输入图像描述](../Images/8394ac6cd7b91783ce13622f395660da.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T10:59:18.420

问题似乎是*madExcept*和整个*mad 套件*添加了对包含文件和库的引用

```
HKEY_CURRENT_USER\SOFTWARE\Wow6432Node\CodeGear\BDS\7.0\... 
```

由于*TeamCity*构建代理作为另一个用户运行，因此该信息不可用。**

# eclipse - eclipse中的mvn安装错误

> ID：15574419
> 
> 赞同：1
> 
> 时间：2013-03-22T15:44:00.710
> 
> 标签：eclipse, maven

我尝试在 Eclipse 中执行 run-as -> mvn install，但随后出现错误，但我不知道如何解决。

这是错误：

```
Failed to execute goal org.apache.maven.plugins:maven-shade-plugin:2.0:shade (default) on project reminder: Execution default of goal org.apache.maven.plugins:maven-shade-plugin:2.0:shade failed: Plugin org.apache.maven.plugins:maven-shade-plugin:2.0 or one of its dependencies could not be resolved: Failed to collect dependencies for org.apache.maven.plugins:maven-shade-plugin:jar:2.0 (): Failed to read artifact descriptor for commons-io:commons-io:jar:1.3.2: Could not transfer artifact org.apache.commons:commons-parent:pom:3 from/to central (http://repo.maven.apache.org/maven2): No response received after 60000 -> [Help 1] 
```

我的 pom 看起来像这样：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>mednanny</groupId>
  <artifactId>reminder</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <name>Reminder</name>  
    <dependencies>           
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.24</version>
        </dependency>
        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4.6</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>
        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency> 
    </dependencies>
    <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>2.0</version>
        <executions>
          <execution>
            <phase>package</phase>
            <goals>
              <goal>shade</goal>
            </goals>
            <configuration>
              <transformers>
                <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                  <mainClass>Reminder.ReminderErinnerungJob</mainClass>
                </transformer>
              </transformers>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T06:52:15.993

For other folks who are facing same issue, mine got resolved by falling back to Maven version 3.0.x. Coz my project was not ready for the version 3.1.x.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:50:14.510

对我来说似乎是互联网连接问题：

```
Could not transfer artifact org.apache.commons:commons-parent:pom:3 
from/to central (http://repo.maven.apache.org/maven2): 
No response received after 60000 
```

如果你重复这个命令会发生什么？该文件应该在中央仓库中可用：[http ://search.maven.org/#artifactdetails%7Corg.apache.commons%7Ccommons-parent%7C3%7Cpom](http://search.maven.org/#artifactdetails%7Corg.apache.commons%7Ccommons-parent%7C3%7Cpom)

您可以尝试再次运行该命令吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T09:28:52.893

可能已经解决了这个问题，但是其他人，尝试将 maven-shade-plugin 更新到 2.1。您可以通过编辑 pom.xml 来做到这一点。

在这里找到了这个解决方案：[https ://issues.apache.org/jira/browse/CAMEL-6587](https://issues.apache.org/jira/browse/CAMEL-6587)

# c++ - 在 C++ 中对双精度使用 %

> ID：15574422
> 
> 赞同：2
> 
> 时间：2013-03-22T15:44:06.450
> 
> 标签：c++, operators, double

我试图在 c++ 中的 double 上使用 % 运算符，我在 java 中做了同样的事情，它工作正常。

我这里有什么遗漏或者这是不允许的吗，对不起，我是 C++ 新手，所以可能在这里犯了一个非常愚蠢的错误

```
 double i =  full_price_in_pence / 100.0;
    double j = full_price_in_pence % 100;
    int final_pounds = (int) i;
    int final_pence = (int) j; 
```

这些都是双重价值

```
full_price_in_pence
full_price_in_pounds 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T15:46:08.227

您应该使用 Standard 标头中的`std::fmod()`函数`<cmath>`：

```
#include <cmath>

// ...

double j = fmod(full_price_in_pence, 100); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T15:45:57.633

`%`仅适用于整数，您正在寻找`fmod`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T15:46:20.963

您不能将 % 运算符用于双变量。只允许 int 变量这样做。

您可以从另一个这样的问题中检查一些好的答案；你可以在[这里](https://stackoverflow.com/questions/12556946/how-does-the-modulus-operator-work)找到它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T15:46:13.937

不，这是不允许的。运算符的操作数`%`必须是整数类型。改为使用`std::fmod()`。

# sharepoint - SharePoint：自定义搜索结果优化面板

> ID：15574426
> 
> 赞同：0
> 
> 时间：2013-03-22T15:44:11.987
> 
> 标签：sharepoint, sharepoint-2010

我知道有一些关于对优化面板进行更改的线程，到目前为止它们非常有帮助，但现在我有一个问题需要更多帮助。

在搜索结果中，是否有一种方法可以将过滤器添加到细化平面，该过滤器将根据我在库中的列中使用的标签进行过滤？

例如，假设我有 3 个委员会每周开会，我有他们所有的会议记录。在我的搜索结果中，我可能想查找讨论过的关键字，但只对某个委员会感兴趣。这已经在库中的一列中确定了。

我该怎么做呢？我相信它与映射属性有关，但我需要愿意帮助的人采取一些步骤！泰:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T13:13:56.760

首先，您需要在您的搜索服务应用程序中添加一个新的映射属性，并将其映射到包含您要作为过滤依据的字段的已爬网属性。

然后，当您在搜索结果页面上编辑优化面板时，您可以参考此映射属性。

为此，请编辑您的搜索结果页面，然后编辑优化面板 Web 部件。在细化部分下，您需要编辑过滤器类别定义 XML，然后保存您的页面。

# jquery - 基于其他的变化价值

> ID：15574429
> 
> 赞同：2
> 
> 时间：2013-03-22T15:44:21.543
> 
> 标签：jquery, html

基本上我要做的是`<select>`根据内容更改＃2中的选项`<select>`，然后第二个`<select>`显示第三个`<select>`

我一直在试图使用我从上一个问题的答案中得到的东西，我曾问过在哪里`<select>`更改了使用 php 显示的页面。*但是*当我试图让它适应我现在想做的事情但它不起作用时，因为首先我会在一个表单中放置一个表单，这不是一个好主意，其次是它改变第二组的方法of content 是通过使用`onchange="this.form.submit()`which 提交整个表单，而不是仅仅更改第二个内容。

在做了一些研究之后，我在这个网站上发现了类似的查询，但我发现的那些人只想要两组内容，包括国家和州，这对我不起作用，因为我需要 3 组选择。

这是我需要的简化方式：

```
 <select name="topselect">
        <option>Select Something</option>
        <option value="1">Selecting this displays select1</option>
        <option value="2">Selecting this displays select2</option>
    </select> 
```

* * *

```
 <select name="select1">
        <option>This displays sub1select1</option>
        <option>this displays sub1select2</option>
    </select>
         <select name="sub1select1">
             <option>La Dee Da</option>
             <option>La Dee Da</option>
         </select>
         <select name="sub1select2">
             <option>La Dee Da</option>
             <option>La Dee Da</option>
         </select> 
```

* * *

```
 <select name="select2">
        <option>This displays sub2select1</option>
        <option>this displays sub2select2</option>
    </select>
         <select name="sub2select1">
             <option>La Dee Da</option>
             <option>La Dee Da</option>
         </select>
         <select name="sub2select2">
             <option>La Dee Da</option>
             <option>La Dee Da</option>
         </select> 
```

我确实找到了一种使用 jquery 执行此操作的方法，*但*它仅显示了如何使用 2 执行此操作`<select>`。我试图修改它无济于事。这是代码：

```
 $('select[name="topselect"]').change(function(){
        $('.hidden').hide();
        if(this.value == 1){
            $('select[name="select1"]').toggle();
        }
        else if(this.value == 2){
            $('select[name="select2"]').toggle();
        }
    }); 
```

我没有包括`class="hidden"`选择`display:none`。

感谢您的帮助！**谢谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:22:28.830

这是你的一个开始：**[jsFiddle 示例](http://jsfiddle.net/j08691/dT5sw/)**

我稍微修改了您的 HTML 以使其更直观。这是 HTML 和 jQuery：

**HTML**

```
<select name="topselect">
    <option>Select Something</option>
    <option value="1">Selecting this displays select1</option>
    <option value="2">Selecting this displays select2</option>
</select>
<select name="select1" class="hidden_1">
    <option>Select Something</option>
    <option>This displays sub1select1</option>
    <option>this displays sub1select2</option>
</select>
<select name="sub1select1" class="hidden_2">
    <option>sub1select1 La Dee Da</option>
    <option>sub1select1 La Dee Da</option>
</select>
<select name="sub1select2" class="hidden_2">
    <option>sub1select2 La Dee Da</option>
    <option>sub1select2 La Dee Da</option>
</select>
<select name="select2" class="hidden_1">
        <option>Select Something</option>

    <option>This displays sub2select1</option>
    <option>this displays sub2select2</option>
</select>
<select name="sub2select1" class="hidden_2">
    <option>sub2select1 La Dee Da</option>
    <option>sub2select1 La Dee Da</option>
</select>
<select name="sub2select2" class="hidden_2">
    <option>sub2select2 La Dee Da</option>
    <option>sub2select2 La Dee Da</option>
</select> 
```

**jQuery**

```
$('select[name="topselect"]').change(function () {
    $('.hidden, .hidden_1, .hidden_2').hide();
    if (this.value == 1) {
        $('select[name="select1"]').toggle();
    } else if (this.value == 2) {
        $('select[name="select2"]').toggle();
    }
});
$('select[name="select1"]').change(function () {
    $('.hidden_2').hide();

    if ($(':selected', this).index() == 1) {
        $('select[name="sub1select1"]').toggle();
    } else if ($(':selected', this).index() == 2) {
        $('select[name="sub1select2"]').toggle();
    }
});
$('select[name="select2"]').change(function () {
    $('.hidden_2').hide();

    if ($(':selected', this).index() == 1) {
        $('select[name="sub2select1"]').toggle();
    } else if ($(':selected', this).index() == 2) {
        $('select[name="sub2select2"]').toggle();
    }
}); 
```

根据您的确切需求，我想这可以简化一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:13:50.217

还稍微更改了您的 HTML。流线型。 [http://jsfiddle.net/mwk97/](http://jsfiddle.net/mwk97/)

## jQuery

```
$('document').ready(function() {
    var currentList;    
    $('select[name="topselect"]').on('change', function () {
        $('select:not("[name=topselect]")').hide();
        currentList = this.value;
        $('select[name="select'+currentList+'"]').show();
    });
    $('.subselect').on('change', function() {
        $('.subsub').hide();
        var nameSelector = '[name="sub' + currentList + 'select' + this.value + '"]';
        $('select'+nameSelector).show();
    });
}); 
```

## HTML

```
<select name="topselect">
    <option>Select Something</option>
    <option value="1">Selecting this displays select1</option>
    <option value="2">Selecting this displays select2</option>
</select>
<select name="select1" class="subselect">
    <option>Select Something</option>
    <option value="1">This displays sub1select1</option>
    <option value="2">this displays sub1select2</option>
</select>
<select name="sub1select1" class="subsub">
    <option>La Dee Da 11</option>
    <option>La Dee Da 11</option>
</select>
<select name="sub1select2" class="subsub">
    <option>La Dee Da 12</option>
    <option>La Dee Da 12</option>
</select>
<select name="select2" class="subselect">
    <option>Select Something</option>
    <option value="1">This displays sub2select1</option>
    <option value="2">this displays sub2select2</option>
</select>
<select name="sub2select1" class="subsub">
    <option>La Dee Da 21</option>
    <option>La Dee Da 21</option>
</select>
<select name="sub2select2" class="subsub">
    <option>La Dee Da 22</option>
    <option>La Dee Da 22</option>
</select> 
```

当然只是一点点...

## CSS

```
.subselect { display: none; }
.subsub { display: none; } 
```

# css - 如何在 twitter 引导导航栏中允许更大的头像（图像）

> ID：15574433
> 
> 赞同：2
> 
> 时间：2013-03-22T15:44:36.037
> 
> 标签：css, twitter-bootstrap

我想在 gmail、wordpress 和许多其他应用程序中创建一个下拉菜单，用户可以在其中单击他的头像来选择菜单项。

这是我所做的，只有当我将头像尺寸保持在 19x19 时才有效。如果我尝试增加它的大小，它会弄乱我的导航栏。

有什么建议么？

```
<ul class="nav pull-right" id="main-menu-right"  style='font-size:12px;'>
    <% if signed_in? %>
        <li id="fat-menu" class="dropdown">
            <a href="#" id="dropUser" role="button" class="dropdown-toggle" data-toggle="dropdown">

            <%= current_user.avatar_file_name.nil? ? raw("<i class='icon-user'></i>") : image_tag(current_user.avatar.url(:square_tiny), size: '19x19', class: "img-rounded") %>
            <b class="caret"></b>
            <ul class="dropdown-menu" role="menu" aria-labelledby="dropUser">       
                 <li><%= link_to raw("<i class='icon-user'></i> My Profile"), "/user_profiles/show", :tabindex => "-1" %></li>

                 <li class="divider"></li>
                 <li><%= link_to raw("<i class='icon-dashboard'></i> Admin dashboard"), admin_dashboard_path, :tabindex => "-1" if current_user.has_role? :admin %></li>
                 <li><%= link_to( raw("<i class='icon-off'></i> Logout"), destroy_user_session_path, :method => :delete) %></li>
            </ul>
              </a>
         </li>
    <% else %>   
        <li>
        <div class="btn-group">
            <%= link_to(raw("<i class='icon-lock'></i> Sign in"), new_user_session_path, :class => 'btn',  style: 'font-size:12px;') %> 
            <%= link_to(raw("Sign up"), new_registration_path(resource_name), :class => 'btn',  style: 'font-size:12px;') %>
        </div>
        </li>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-24T15:30:22.317

HTML：

```
 <div class="nav navbar-right">
            <div class="navbar-text">
                <img src="http://placehold.it/60x60" class="profile-image img-circle">
                <a href="#">Username</a>
            </div>
        </div> 
```

CSS：

```
.navbar .profile-image{
    margin: -10px 0px;
    height: 40px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T17:33:47.810

问题是因为菜单项的默认行高度。如果您像这样将化身从 UL 中移出，您能否使您的布局正常工作？[http://jsfiddle.net/panchroma/dJS2k/](http://jsfiddle.net/panchroma/dJS2k/)

我在头像左侧有个人资料链接，但没有理由不能将其放在下方。

我知道这与您所描述的不完全一样，但它可以让您使用任何大小的头像。一般的html是：

```
<navbar>
<img src="avatar.jpg" class="pull-right">
  <ul class="pull-right">
    <li class="dropdown"><li></li>
  </ul>
</navbar> 
```

# php - 如何在 php 中获取“yyyy-MM-ddTHH:mm:ss.fffZ”的格式？

> ID：15574434
> 
> 赞同：1
> 
> 时间：2013-03-22T15:44:43.483
> 
> 标签：php, date-format

我需要获取`yyyy-MM-ddTHH:mm:ss.fffZ`用于创建哈希以与 .NET 服务器通信的日期时间格式。我怎样才能在 PHP 中获得这种格式？我什至不知道“fffZ”是什么，试图自己解决这个问题并且无法在网上找到它。非常感谢您的帮助。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T15:50:21.527

使用 PHP，您可以通过以下方式获得它：

```
date('Y-m-dTH:i:s.uZ')  //for the current time 
```

[您可以在文档](http://php.net/manual/en/function.date.php)中找到每个字符。虽然我不确定`Z`这两种语言的含义是否相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T15:47:20.100

`.fffZ`指毫秒和时区。

`.fff`指定毫秒的 3 位小数。

`Z`是时区（+0000 UTC 等）。

您可能会发现此页面很有用：[链接](http://msdn.microsoft.com/en-us/library/system.datetime.millisecond.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T15:48:50.230

请参阅[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

> fff 日期和时间值中的毫秒数。说明符。

和

> "z" 与 UTC 偏移的小时数，没有前导零。

要在 PHP 中获取相应的格式，请参阅[`date`](http://www.php.net/manual/en/function.date.php).

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T15:48:55.150

根据 MSDN，fff 是毫秒：

[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

Z 将是时区。[您可以通过http://php.net/manual/en/datetime.gettimezone.php](http://php.net/manual/en/datetime.gettimezone.php)在 PHP 中处理。

其余的应该很简单。

编辑：实际上，忘记了 .NET 中的 Z 将从 UTC 偏移。似乎您可以从类似于[UTC Offset in PHP](https://stackoverflow.com/questions/193499/utc-offset-in-php)的东西中获得它。

# c - windows c webserver上的独占锁文件

> ID：15574440
> 
> 赞同：0
> 
> 时间：2013-03-22T15:45:05.513
> 
> 标签：c, httpserver, lockfile

我正在 Windows 上用 C 语言编写一个（非常小的）网络服务器。我在读取和写入文件时都需要独占锁定文件，我已经阅读了有关锁定等的 msdn 文档，并且我找到了`LockFileEx`具有`OVERLAPPED`结构和 an的函数`Event hEvent`，我还阅读了它们的工作原理，但问题是： - 在Web服务器我们有很多文件，当一个线程锁定例如文件“test.txt”（排他锁）时，因为有这个文件的请求，我如何同步另一个想要获得锁的线程文件？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:48:32.580

看看互斥对象的使用。他们应该为你解决这个问题。

需要访问锁文件的线程可以为其请求锁并排队。当当前线程完成时，它释放它的锁并且下一个请求线程被授予锁。

# postgresql - 使用 dbext（在 Vim 中）连接到 Postgres.app 的简单方法是什么？

> ID：15574443
> 
> 赞同：3
> 
> 时间：2013-03-22T15:45:24.750
> 
> 标签：postgresql, vim, rails-postgresql

当我尝试使用 dbext 连接到我的 Postgres.app 数据库时，我收到以下错误：

```
dbext:PostgreSQL requires a '$HOME/.pgpass' file in order to authenticate.  This file is 
missing.  The binary 'psql' does not accept commandline passwords. 
```

其他程序使用“本地”连接就可以很好地连接。（Postgres.app 使用我的用户 ID 运行。）

在 vim 中`:!which psql`正确打印 /opt/local/bin/psql （我已将其符号链接到 Postgres.app bin 目录中的那个）。而且 Postgres.app 设置为使用“本地”身份验证，并且无法清楚地知道 pg_hba.conf 文件的去向（应用程序包中没有 etc 目录）。此外，Postgres.app 的文档中没有任何关于更改访问配置的内容。

我试过`:DBPromptForBufferParameters`直接使用 dbext 以及 @tpope 的`vim-rails`插件（它通过`:Rdbext`.

那么我该怎么做才能让 dbext 使用“本地”连接进行连接？

注意 - 我花了很多时间试图弄清楚这一点而没有尝试明显的，因此即使我已经有了答案，也会发布帖子。我也很想知道其他人是否有不同的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:47:21.333

事实证明，您可以只创建一个空的 ~/.pgpass 文件（仅限制对您的用户 ID 的读写权限以避免警告）。这对我来说是违反直觉的（因为实际上没有密码），但我想回想起来很明显我应该尝试过。

我将在 dbext 问题跟踪器上指出这一点。

# node.js - 捕获并记录对服务器的 api 调用以及传递的数据和结果

> ID：15574450
> 
> 赞同：0
> 
> 时间：2013-03-22T15:45:41.893
> 
> 标签：node.js

我有一个用 node.js 编写的 api，它处理来自网站、桌面应用程序、iOS 应用程序等的调用。可能有 50 多个端点，每个端点可以接受从 1 个参数到可能 10-20 的任何地方，具体取决于意图来完成。这些可以是 GET/POST/PUT/DEL

我想开始对我的 API 进行负载测试并模拟用户活动。

我正在寻找的是有关如何捕获 API 调用以及以逻辑方式与其一起传递的参数的建议。

我永远使用来运行我的应用程序，所有内容都写入日志文件，所以我最初的反应是做一些事情，比如在快速路由中添加一个中间件，以捕获端点以及 req.params 和 req.body 但是然后我需要把这个中间件放在所有 50 多条路线中，有点乏味。

任何人以前都做过类似的事情，并且对如何使用这些调用捕获调用/数据以及可能捕获从我的 API 返回的内容有一个很好的想法。

也许一些模块？

我需要以可读的格式提供给其他人，以便他们可以构建一组虚假的调用......所以原始日志文件并没有真正的帮助，除非它们被输出......“漂亮”。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:52:05.297

您走在正确的轨道上——只需通过添加您的记录器中间件[`app.use`](http://expressjs.com/api.html#app.use)，它会在每个请求上运行中间件（而不是将其添加到每个路由）。

事实上，Express 文档给出了一个使用 logger 中间件的例子：

```
var express = require('express');
var app = express();

// simple logger
app.use(function(req, res, next){
  console.log('%s %s', req.method, req.url);
  next();
}); 
```

Connect（构建 Express 的基础上）提供了[logger middleware](http://www.senchalabs.org/connect/middleware-logger.html)，所以你可以这样做：

```
var logFile = fs.createWriteStream('./myLogFile.log', {flags: 'a'});    
app.use(express.logger({stream: logFile})); 
```

# javascript - 音频 - Chrome 移动设备 - Android

> ID：15574459
> 
> 赞同：2
> 
> 时间：2013-03-22T15:46:10.550
> 
> 标签：javascript, android, html, audio

我无法在 Android 上使用 Chrome Mobile 播放音频。是否限制播放音频（OGG）？

所以，我有一个 HTML 文档。在里面，是以下音频标签：

```
<audio id="audiotag1" src="beep.ogg" preload="auto"></audio> 
```

我还触发了用 JS 播放的音频：

```
 document.getElementById('audiotag1').play(); 
```

音频在 Chrome 桌面上可以正常播放，但在 Chrome 移动版中根本无法播放。我应该知道一些限制/标志吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T14:13:28.720

Chrome for Android 需要用户手势来播放声音音频文件。确保您的`play`调用是在诸如单击之类的事件上进行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T22:12:49.677

是的，我相信只有 Mozilla 真正支持移动设备上的这种格式

# c# - 创建新实例时如何在基类中使用 Copy 方法

> ID：15574461
> 
> 赞同：0
> 
> 时间：2013-03-22T15:46:11.830
> 
> 标签：c#

我有一个从另一个类 A 派生的 B 类。A 类实现了一个 Copy 方法。如何在使用 A.Copy() 的 B 类中实现 Copy 方法？

我没有使用 Clone 以及为什么我想要这种继承结构是有原因的（可能不是好的原因）。

```
class A 
{
    ... properties ...
    public A Copy()
    {
        ...copy properties....
    }
}

class B : A 
{
    ... one extra property ...
    public B Copy()
    {
        // how to copy base()??
        ...copy extra propertie....
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:50:56.373

一个常见的解决方案是定义一个从另一个实例复制所有属性的构造函数。然后派生类复制其类中定义的属性并调用基构造函数来复制基类的属性。

```
class A 
{
    // properties

    protected A(A other)
    {
        // copy properties
    }

    public A Clone()
    {
        A clone = CloneCore() as A;
        if (clone == null)
            throw new NotImplementedException("Clone Not Implemented Correctly");
        return clone;
    }

    protected virtual object CloneCore()
    {
        return new A(this);
    }
} 
```

```
class B : A 
{
    // one extra property

    protected B(B other) : base(other)
    {
        // copy extra property
    }

    public new B Clone()
    {
        B clone = CloneCore() as B;
        if (clone == null)
            throw new NotImplementedException("Clone Not Implemented Correctly");
        return clone;
    }

    protected override object CloneCore()
    {
        return new B(this);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:50:07.417

您经常通过受保护的复制构造函数来实现这一点。

这是一个演示的示例程序（它使用术语“克隆”而不是“复制”，但效果是一样的。

我意识到你说过你不想克隆，但复制实际上是一回事，至少在这种情况下。

无论如何，也许这会给你一些想法。如果需要，将所有出现的“克隆”更改为“复制”... ;)

此外，这些天不赞成使用 ICloneable。不过，这显示了一般方法。

注意：这是一个完整的可编译示例，它还使用具有属性的抽象基类，并实现 GetHashCode() - 所以它看起来相当复杂。因为如果你做的一切都正确，它确实会变得复杂......

```
using System;
using System.IO;
using System.Diagnostics;

/*

This code demonstrates a cloning pattern that you can use for class hierarchies.

The abstract base class specifies an abstract Clone() method which must be implemented by all derived classes.
Every class except the abstract base class must have a protected copy constructor. 

This protected copy constructor will:

(1) call the base class' copy constructor, and 
(2) set any new fields introduced in the derived class.

This code also demonstrates an implementation of Equals() and CopyFrom().

*/

namespace CloningPattern
{
    static class Program
    {
        static void Main()
        {
            Derived2 test = new Derived2()
            {
                IntValue = 1,
                StringValue = "s",
                DoubleValue = 2,
                ShortValue = 3
            };

            Derived2 copy = Clone(test);
            Console.WriteLine(copy);
        }

        static Derived2 Clone(AbstractBase item)
        {
            AbstractBase abstractBase = (AbstractBase) item.Clone();
            Derived2 result = abstractBase as Derived2;
            Debug.Assert(result != null);
            return result;
        }
    }

    public abstract class AbstractBase: ICloneable
    {
        // Sample data field.

        public int IntValue { get; set; }

        // Canonical way of providing a Clone() operation
        // (except that this is abstract rather than virtual, since this class
        // is itself abstract).

        public abstract object Clone();

        // Default constructor.

        protected AbstractBase(){}

        // Copy constructor.

        protected AbstractBase(AbstractBase other)
        {
            if (other == null)
            {
                throw new ArgumentNullException("other");
            }

            this.copyFrom(other);
        }

        // Copy from another instance over the top of an already existing instance.

        public virtual void CopyFrom(AbstractBase other)
        {
            if (other == null)
            {
                throw new ArgumentNullException("other");
            }

            this.copyFrom(other);
        }

        // Equality check.

        public override bool Equals(object obj)
        {
            if (obj == null)
            {
                return false;
            }

            if (object.ReferenceEquals(this, obj))
            {
                return true;
            }

            if (this.GetType() != obj.GetType())
            {
                return false;
            }

            AbstractBase other = (AbstractBase)obj;

            return (this.IntValue == other.IntValue);
        }

        // Get hash code.

        public override int GetHashCode()
        {
            return this.IntValue.GetHashCode();
        }

        // ToString() for debug purposes.

        public override string ToString()
        {
            return "IntValue = " + IntValue;
        }

        // Implement copying fields in a private non-virtual method, called from more than one place.

        private void copyFrom(AbstractBase other)  // 'other' cannot be null, so no check for nullness is made.
        {
            this.IntValue = other.IntValue;
        }
    }

    public abstract class AbstractDerived: AbstractBase
    {
        // Sample data field.

        public short ShortValue{ get; set; }

        // Default constructor.

        protected AbstractDerived(){}

        // Copy constructor.

        protected AbstractDerived(AbstractDerived other): base(other)
        {
            this.copyFrom(other);
        }

        // Copy from another instance over the top of an already existing instance.

        public override void CopyFrom(AbstractBase other)
        {
            base.CopyFrom(other);
            this.copyFrom(other as AbstractDerived);
        }

        // Comparison.

        public override bool Equals(object obj)
        {
            if (object.ReferenceEquals(this, obj))
            {
                return true;
            }

            if (!base.Equals(obj))
            {
                return false;
            }

            AbstractDerived other = (AbstractDerived)obj;  // This must succeed because if the types are different, base.Equals() returns false.

            return (this.IntValue == other.IntValue);
        }

        // Get hash code.

        public override int GetHashCode()
        {
            // "Standard" way of combining hash codes from subfields.

            int hash = 17;

            hash = hash * 23 + base.GetHashCode();
            hash = hash * 23 + this.ShortValue.GetHashCode();

            return hash;
        }

        // ToString() for debug purposes.

        public override string ToString()
        {
            return base.ToString() + ", ShortValue = " + ShortValue;
        }

        // This abstract class doesn't need to implement Clone() because no instances of it
        // can ever be created, on account of it being abstract and all that.
        // If you COULD, it would look like this (but you can't so this won't compile):

        // public override object Clone()
        // {
        //     return new AbstractDerived(this);
        // }

        // Implement copying fields in a private non-virtual method, called from more than one place.

        private void copyFrom(AbstractDerived other)  // Other could be null, so check for nullness.
        {
            if (other != null)
            {
                this.ShortValue = other.ShortValue;
            }
        }
    }

    public class Derived1: AbstractDerived
    {
        // Must declare a default constructor.

        public Derived1(){}

        // Sample data field.

        public string StringValue{ get; set; }

        // Implement Clone() by simply using this class' copy constructor.

        public override object Clone()
        {
            return new Derived1(this);
        }

        // Copy from another instance over the top of an already existing instance.

        public override void CopyFrom(AbstractBase other)
        {
            base.CopyFrom(other);
            this.copyFrom(other as Derived1);
        }

        // Equality check.

        public override bool Equals(object obj)
        {
            if (object.ReferenceEquals(this, obj))
            {
                return true;
            }

            if (!base.Equals(obj))
            {
                return false;
            }

            Derived1 other = (Derived1)obj;  // This must succeed because if the types are different, base.Equals() returns false.

            return (this.StringValue == other.StringValue);
        }

        // Get hash code.

        public override int GetHashCode()
        {
            // "Standard" way of combining hash codes from subfields.

            int hash = 17;

            hash = hash * 23 + base.GetHashCode();
            hash = hash * 23 + this.StringValue.GetHashCode();

            return hash;
        }

        // ToString() for debug purposes.

        public override string ToString()
        {
            return base.ToString() + ", StringValue = " + StringValue;
        }

        // Protected copy constructor. Used to implement Clone().
        // Also called by a derived class' copy constructor.

        protected Derived1(Derived1 other): base(other)
        {
            this.copyFrom(other);
        }

        // Implement copying fields in a private non-virtual method, called from more than one place.

        private void copyFrom(Derived1 other)  // Other could be null, so check for nullness.
        {
            if (other != null)
            {
                this.StringValue = other.StringValue;
            }
        }
    }

    public class Derived2: Derived1
    {
        // Must declare a default constructor.

        public Derived2(){}

        // Sample data field.

        public double DoubleValue{ get; set; }

        // Implement Clone() by simply using this class' copy constructor.

        public override object Clone()
        {
            return new Derived2(this);
        }

        // Copy from another instance over the top of an already existing instance.

        public override void CopyFrom(AbstractBase other)
        {
            base.CopyFrom(other);
            this.copyFrom(other as Derived2);
        }

        // Equality check.

        public override bool Equals(object obj)
        {
            if (object.ReferenceEquals(this, obj))
            {
                return true;
            }

            if (!base.Equals(obj))
            {
                return false;
            }

            Derived2 other = (Derived2)obj;  // This must succeed because if the types are different, base.Equals() returns false.

            return (this.DoubleValue == other.DoubleValue);
        }

        // Get hash code.

        public override int GetHashCode()
        {
            // "Standard" way of combining hash codes from subfields.

            int hash = 17;

            hash = hash * 23 + base.GetHashCode();
            hash = hash * 23 + this.DoubleValue.GetHashCode();

            return hash;
        }

        // ToString() for debug purposes.

        public override string ToString()
        {
            return base.ToString() + ", DoubleValue = " + DoubleValue;
        }

        // Protected copy constructor. Used to implement Clone().
        // Also called by a derived class' copy constructor.

        protected Derived2(Derived2 other): base(other)
        {
            // Canonical implementation: use ":base(other)" to copy all
            // the base fields (which recursively applies all the way to the ultimate base)
            // and then explicitly copy any of this class' fields here:

            this.copyFrom(other);
        }

        // Implement copying fields in a private non-virtual method, called from more than one place.

        private void copyFrom(Derived2 other)  // Other could be null, so check for nullness.
        {
            if (other != null)
            {
                this.DoubleValue = other.DoubleValue;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:49:14.453

您可以使用[base](http://msdn.microsoft.com/en-us/library/hfw7t1ce%28v=vs.110%29.aspx)关键字，该关键字用于访问父类的成员。

```
class B : A 
{
    ... extra properties ...
    public B Copy()
    {
        base.Copy();
        ... copy extra properties ...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:29:55.463

简短的回答：你不能。

由于`A.Copy()`返回类型`A`，它不能更改为返回 a `B`。

您的对象上已经有一个方法可以将所有字段复制到一个新对象中。它被称为`object.MemberwiseClone()`。不过要小心，因为它会执行**浅拷贝**。（意味着所有引用类型成员都将指向现有对象）。

根据我的发现，您通常需要一个**深拷贝**，不幸的是，这意味着您必须在*每个*可以包含的类中编写一个“深拷贝”方法`A`。

方法`Clone()`通常被理解为深拷贝。（评论总是有帮助的）而且，它返回`object`. 如果你想要一个`B`背部，这将需要一个演员。由于您无法更改继承方法的签名，因此没有真正的解决方法。

`new`还有一件事：定义函数时不要使用关键字。它破坏了多态性并可能导致难以发现的错误。

```
public class A : IClonable {
   public ReferenceType member1;
   public int member2;

   public object Clone() {
       var clone = this.MemberwiseClone() as A;  //shallow copy
       clone.CloneReferenceMembers();            //deep copy
       return clone;
   }
   public virtual void CloneReferenceMembers(){
      this.member1 = this.member1.Clone();
   }

}

public class B : A {
   public AnotherReferenceType member3;
   public int member4;

    public override void CloneReferenceMembers(){
       base.CloneReferenceMembers();
       this.member3 = this.member3.Clone();
   }
} 
```

# javascript - HTML / JavaScript中可用的分层下拉菜单？

> ID：15574472
> 
> 赞同：2
> 
> 时间：2013-03-22T15:46:52.310
> 
> 标签：javascript, html, usability, html-select, cascadingdropdown

我有一个主要的可用性问题。

我有一长串考古发现的等级类别（200+）。当用户发布他的发现时，他需要从此列表中选择一个类别：

*   青铜时代
*   *   家用工具
*   *   珠宝
*   *   军队
*   *   *   长矛
*   *   ...
*   中世纪
*   *   珠宝
*   *   宗教文物
*   *   ...
*   二战
*   *   德国
*   *   *   军队
*   *   *   *   徽章
*   *   *   *   *   步兵
*   ...

列表不能在没有信息丢失的情况下被剪切/划分，所以我想保持原样。

如何让它更实用？典型的 2 个用例是：

1.  **逐级**选择（首先确定是青铜时代、中世纪……然后是珠宝、军事……然后是矛……）
2.  **搜索**（用户知道是项链，但不知道是中世纪早期还是中世纪晚期等）

如何将这两者结合起来？有没有现成的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:08:51.720

如果这有帮助，要整理出第一个用例，您可以在 HTML 中执行以下操作：

```
Age: 
<select name='age' id='age' onchange="showRelevantRuleDropdown(this,1);">
     <option value='0'>Bronze Age</option>
     <option value='1'>Middle Age</option>
     ...
</select>

<select name='BronzeAge' id='BronzeAge' onchange="showRelevantRuleDropdown(this,1);">
     <option value='0'>Household tools</option>
     <option value='1'>Jewelry</option>
     ...
</select>

<select name='MiddleAge' id='MiddleAge' onchange="showRelevantRuleDropdown(this,1);">
     <option value='0'>Jewlery</option>
     <option value='1'>Religious artifacts</option>
     ...
</select>

...

<script language='JavaScript'>
showRelevantRuleDropdown(document.getElementById('age'),1);
</script> 
```

使用下面的 Javascript：

```
function showRelevantRuleDropdown(elem, restore) {
    // Show one SELECT element (elem) between Option 1 or Option 2
    // If the parameter restore is 1, the hidden element is restored to its default value
    if (elem.selectedIndex == 0) {
        document.getElementById('BronzeAge').style.display = 'none';
        document.getElementById('MiddleAge').style.display = 'inline';
        if (restore == 1) {
            document.getElementById('BronzeAge').getElementsByTagName('option')['0'].selected = 'selected';
        }
    }
    else {
        document.getElementById('MiddleAge').style.display = 'none';
        document.getElementById('BronzeAge').style.display = 'inline';
        if (restore == 1) {
            document.getElementById('MiddleAge').getElementsByTagName('option')['0'].selected = 'selected';
        }
    }
} 
```

这适用于一层深度，但可以轻松扩展。

如果你想使用它，我有 codepen 中的代码：http: [//codepen.io/ophintor/pen/FaHbh](http://codepen.io/ophintor/pen/FaHbh)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T13:17:55.277

好吧，您可以将自动完成模型与您需要使用的层次结构结合起来。见下图。

然后，用户不需要查找或导航整个树来选择他们想要选择的项目，而不会丢失层次结构上下文。我认为这满足了高级用户的需求。

不过，您应该提供一种在树中导航（显示整个树）的方法，以便让新手用户参与其中。也许可以在搜索框旁边放置一个图标/文本链接。

![线框示例](../Images/0740eb3b1b7e6442c54f34601d73323e.png)

不幸的是，我在任何地方都找不到类似的东西。

# java - 通过 ObjectStreams 发送的对象不保留其字段值？

> ID：15574485
> 
> 赞同：2
> 
> 时间：2013-03-22T15:47:28.107
> 
> 标签：java, networking, serialization, objectoutputstream, objectinputstream

我一直在开发一个聊天客户端/服务器来熟悉 java，但我遇到了一个我不理解的逻辑错误。

我正在通过 ObjectOutputStream （消息对象，请参见参考文献）发送一个对象，该对象包含字段和另一个对象，该对象具有 2 个字段（用户对象）。在发送之前，使用调试器，我知道每个字段都已正确设置。在接收端，一切都正确设置，除了 User 类的一个字段，它以某种方式重置为程序的另一个 User 对象的相同字段的值。我检查了他们是否由于某种原因没有共享引用，但是 UserReceived.equals(UserInProgram) 返回 false （没有覆盖 equals 方法）。

注意：客户端中用户的唯一其他实例（该伪字段似乎正在擦除由于某种原因收到的那个）在另一个包中，并设置为私有。

相关代码：

消息类，通过流发送和接收：http: [//codepaste.net/tiuxu7](http://codepaste.net/tiuxu7)

用户类，“伪”字段似乎由于某种原因被重置： http: [//codepaste.net/33m97j](http://codepaste.net/33m97j)

显示我如何发送/接收对象的代码： http: [//codepaste.net/frxcv7](http://codepaste.net/frxcv7)

这两者之间共享的服务器、客户端和库的完整源代码可以在 github.com/TisButMe 找到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:41:16.390

听起来正在重置的字段是一个`static`字段。`static`字段未序列化，因为它们属于类而不是对象。有关更多信息，请参阅[此](https://stackoverflow.com/questions/1008023/how-to-serialize-static-data-members-of-a-java-class)问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-19T23:37:52.863

稍晚了，但我刚刚遇到了这个问题并解决了它..只需致电`reset`您的`ObjectOutputStream`

# javascript - Angular 针对 Asp.Net WebApi，在服务器上实现 CSRF

> ID：15574486
> 
> 赞同：71
> 
> 时间：2013-03-22T15:47:29.677
> 
> 标签：javascript, asp.net, angularjs, asp.net-web-api, csrf

我正在使用 Angular.js 实现一个网站，该网站正在访问 ASP.NET WebAPI 后端。

Angular.js 有一些内置功能来帮助进行反 csrf 保护。在每个 http 请求上，它都会查找一个名为 "XSRF-TOKEN" 的 cookie，并将其作为一个名为 "X-XSRF-TOKEN" 的标头提交。

这依赖于网络服务器能够在验证用户身份后设置 XSRF-TOKEN cookie，然后检查传入请求的 X-XSRF-TOKEN 标头。

[Angular 文档](http://docs.angularjs.org/api/ng.%24http)指出：

> 为了利用这一点，您的服务器需要在第一个 HTTP GET 请求时在名为 XSRF-TOKEN 的 JavaScript 可读会话 cookie 中设置一个令牌。在随后的非 GET 请求中，服务器可以验证 cookie 是否与 X-XSRF-TOKEN HTTP 标头匹配，因此确保只有在您的域上运行的 JavaScript 才能读取该令牌。每个用户的令牌必须是唯一的，并且必须可由服务器验证（以防止 JavaScript 组成自己的令牌）。我们建议该令牌是您网站的身份验证 cookie 的摘要，并带有盐以增加安全性。

对于 ASP.NET WebAPI，我找不到任何好的示例，因此我在各种来源的帮助下自行开发。我的问题是 - 任何人都可以看到代码有什么问题吗？

首先我定义了一个简单的辅助类：

```
public class CsrfTokenHelper
{
    const string ConstantSalt = "<ARandomString>";

    public string GenerateCsrfTokenFromAuthToken(string authToken)
    {
        return GenerateCookieFriendlyHash(authToken);
    }

    public bool DoesCsrfTokenMatchAuthToken(string csrfToken, string authToken) 
    {
        return csrfToken == GenerateCookieFriendlyHash(authToken);
    }

    private static string GenerateCookieFriendlyHash(string authToken)
    {
        using (var sha = SHA256.Create())
        {
            var computedHash = sha.ComputeHash(Encoding.Unicode.GetBytes(authToken + ConstantSalt));
            var cookieFriendlyHash = HttpServerUtility.UrlTokenEncode(computedHash);
            return cookieFriendlyHash;
        }
    }
} 
```

然后我在我的授权控制器中有以下方法，我在调用 FormsAuthentication.SetAuthCookie() 后调用它：

```
 // http://www.asp.net/web-api/overview/security/preventing-cross-site-request-forgery-(csrf)-attacks
    // http://docs.angularjs.org/api/ng.$http
    private void SetCsrfCookie()
    {
        var authCookie = HttpContext.Current.Response.Cookies.Get(".ASPXAUTH");
        Debug.Assert(authCookie != null, "authCookie != null");
        var csrfToken = new CsrfTokenHelper().GenerateCsrfTokenFromAuthToken(authCookie.Value);
        var csrfCookie = new HttpCookie("XSRF-TOKEN", csrfToken) {HttpOnly = false};
        HttpContext.Current.Response.Cookies.Add(csrfCookie);
    } 
```

然后我有一个自定义属性，我可以将其添加到控制器中以使它们检查 csrf 标头：

```
public class CheckCsrfHeaderAttribute : AuthorizeAttribute
{
    //  http://stackoverflow.com/questions/11725988/problems-implementing-validatingantiforgerytoken-attribute-for-web-api-with-mvc
    protected override bool IsAuthorized(HttpActionContext context)
    {
        // get auth token from cookie
        var authCookie = HttpContext.Current.Request.Cookies[".ASPXAUTH"];
        if (authCookie == null) return false;
        var authToken = authCookie.Value;

        // get csrf token from header
        var csrfToken = context.Request.Headers.GetValues("X-XSRF-TOKEN").FirstOrDefault();
        if (String.IsNullOrEmpty(csrfToken)) return false;

        // Verify that csrf token was generated from auth token
        // Since the csrf token should have gone out as a cookie, only our site should have been able to get it (via javascript) and return it in a header. 
        // This proves that our site made the request.
        return new CsrfTokenHelper().DoesCsrfTokenMatchAuthToken(csrfToken, authToken);
    }
} 
```

最后，我在用户注销时清除 Csrf 令牌：

```
HttpContext.Current.Response.Cookies.Remove("XSRF-TOKEN"); 
```

任何人都可以发现这种方法有任何明显（或不那么明显）的问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-10T01:16:05.763

您的代码似乎很好。唯一的事情是，您不需要大部分代码，因为 web.api 在 asp.net mvc 的“顶部”运行，后者内置了对防伪令牌的支持。

在评论中 dbrunning 和 ccorrin 表示担心只有在使用 MVC html 帮助程序时才能使用内置 AntiForgery 令牌。这不是真的。助手可以只公开基于会话的一对令牌，您可以相互验证。详情见下文。

更新：

您可以从 AntiForgery 使用两种方法：

*   `AntiForgery.GetTokens`使用两个out参数返回cookie token和form token

*   `AntiForgery.Validate(cookieToken, formToken)`验证一对令牌是否有效

您完全可以重新利用这两种方法并将 formToken 用作 headerToken 并将 cookieToken 用作实际的 cookieToken。然后只需在属性内调用 validate 即可。

另一种解决方案是使用 JWT（检查例如[MembershipReboot](https://github.com/brockallen/BrockAllen.MembershipReboot)实施）

[此链接](http://www.asp.net/web-api/overview/security/preventing-cross-site-request-forgery-(csrf)-attacks)显示如何使用带有 ajax 的内置防伪令牌：

```
<script>
    @functions{
        public string TokenHeaderValue()
        {
            string cookieToken, formToken;
            AntiForgery.GetTokens(null, out cookieToken, out formToken);
            return cookieToken + ":" + formToken;                
        }
    }

    $.ajax("api/values", {
        type: "post",
        contentType: "application/json",
        data: {  }, // JSON data goes here
        dataType: "json",
        headers: {
            'RequestVerificationToken': '@TokenHeaderValue()'
        }
    });
</script>

void ValidateRequestHeader(HttpRequestMessage request)
{
    string cookieToken = "";
    string formToken = "";

    IEnumerable<string> tokenHeaders;
    if (request.Headers.TryGetValues("RequestVerificationToken", out tokenHeaders))
    {
        string[] tokens = tokenHeaders.First().Split(':');
        if (tokens.Length == 2)
        {
            cookieToken = tokens[0].Trim();
            formToken = tokens[1].Trim();
        }
    }
    AntiForgery.Validate(cookieToken, formToken);
} 
```

也看看这个问题[AngularJS can't find XSRF-TOKEN cookie](https://stackoverflow.com/questions/15444781/angularjs-cant-find-xsrf-token-cookie)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-07T02:40:28.390

我认为你的代码有缺陷。防止 CSRF 的整个想法是防止每个请求上的唯一令牌，而不是每个会话。如果防伪令牌是会话持久值，则执行 CSRF 的能力仍然存在。您需要为每个请求提供一个唯一的令牌...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-11T09:58:18.380

此解决方案并不安全，因为只要 Auth cookie 有效，CSRF 攻击仍然可能发生。当攻击者让您通过另一个站点执行请求时，auth 和 xsrf cookie 都将被发送到服务器，因此在用户进行“硬”注销之前，您仍然容易受到攻击。

每个请求或会话都应该有自己的唯一令牌，以真正防止 CRSF 攻击。但可能最好的解决方案是不使用基于 cookie 的身份验证，而是使用基于令牌的身份验证，例如 OAuth。这可以防止其他网站使用您的 cookie 来执行不需要的请求，因为这些令牌用于 http 标头而不是 cookie。并且 http 标头不会自动发送。

1.  [使用 ASP.NET Web API 2、Owin 和 Identity 的基于令牌的身份验证](http://bitoftech.net/2014/06/01/token-based-authentication-asp-net-web-api-2-owin-asp-net-identity/)
2.  [使用 ASP.NET Web API 2、Owin 和 Identity 的 AngularJS 令牌身份验证](http://bitoftech.net/2014/06/09/angularjs-token-authentication-using-asp-net-web-api-2-owin-asp-net-identity/)

这些优秀的博客文章包含有关如何为 WebAPI 实现 OAuth 的信息。博客文章还包含有关如何将其与 AngularJS 集成的重要信息。

Another solution might be to disable CORS and only accept incoming requests from whitelisted domains. However this won't work for non-website applications, such as mobile and/or desktop clients. Next to that once your website is vulnerable to a XSS attack the attacker will still be able to forge requests on your behalve.

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2015-01-07T04:53:26.273

代码没有指出任何问题，所以我认为问题已得到解答。

# php - 谷歌地图实施导致谷歌页面速度问题

> ID：15574488
> 
> 赞同：2
> 
> 时间：2013-03-22T15:47:36.210
> 
> 标签：php, javascript, performance, google-maps-api-3

我是一个相当新手的网站管理员，在这里从优秀的志愿者那里得到了大量的帮助，我感谢你们所有人。

最近这里有人（戴维）帮助我获得了谷歌地图来查询数据库并显示在网页上，但它导致了我自己似乎无法破解的页面速度问题。

我来总结一下；（通过从 https 中删除 1 t 来满足此处的算法故意破坏链接）使用此 URL：

[http://classifieds.your-adrenaline-fix.com/detail.php?fatherID=37&TypeID=42&ListingID=42](http://classifieds.your-adrenaline-fix.com/detail.php?fatherID=37&TypeID=42&ListingID=42)

谷歌页面速度说；（来自我的注意：以下网址的完整外观如下：

htps://mts0.googleapis.com/vt?lyrs=h@210000000&src=apiv3&hl=en-US&x=36&y=52&z=7&s=&style=api%7Csmartmaps)

以下资源具有相同的内容，但来自不同的 URL。从一致的 URL 提供这些资源以节省 10 个请求和 1.9KiB。

```
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
```

此外，我得到了；

以下资源缺少缓存验证器。未指定缓存验证器的资源无法有效刷新。指定 Last-Modified 或 ETag 标头以启用以下资源的缓存验证：

```
htp://www.google.com/.../brand?... 
htps://maps.googleapis.com/.../GeocodeService.Search?... 
htps://maps.googleapis.com/.../StaticMapService.GetMapImage?... 
htps://maps.googleapis.com/.../StaticMapService.GetMapImage?... 
htps://maps.googleapis.com/maps/api/js?sensor=true 
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts0.googleapis.com/vt?... 
htps://mts1.googleapis.com/.../ft?... 
htps://mts1.googleapis.com/.../ft?... 
htps://mts1.googleapis.com/.../ft?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
htps://mts1.googleapis.com/vt?... 
```

我希望这里有人熟悉这一点，并且可能对如何解决这些问题有所了解。

这是 detail.php 上的代码

```
$TypeID = isset($_GET['TypeID']) ? $_GET['TypeID'] : ''; 
            $ListingID = isset($_GET['ListingID']) ? $_GET['ListingID'] : ''; 
            $allowed_tables = array('tt_42', 'tt_43');
            $table ="tt_".$TypeID;
            $dbh = new PDO("mysql:host=$host;dbname=$db", $username, $password);
            $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

      try {
        if (in_array($table, $allowed_tables)) {
        $query = "SELECT `Address`, `City`, `State/Province`, `Zip/Postal`, `Country` FROM `$table` WHERE `ID` = ? AND `ExpireDate` > NOW()";
        }
                $stmt = $dbh->prepare($query);
                $stmt->bindParam(1,$ListingID);
                $stmt->setFetchMode(PDO::FETCH_ASSOC);
                $stmt->execute();

                $Address = $listing['Address'];
                $City = $listing['City'];
                $State = $listing['State/Province'];
                $Zip = $listing['Zip/Postal'];
                $Country = $listing['Country'];

                echo '<h2>Map of Surrounding Area With Navigational Aides</h2>';
                echo '<div class="CalloutBoxBlue">Hover over map and scroll, or use + and - in LH corner of map to zoom or expand viewing area. Alternatively, hold down mouse to manually move the map to a different geographical location, or drag the person icon to a specific location on the map for a street view.</div>';

                echo '<div id="GoogleMap">'; 
                echo '<iframe scrolling="no" style="width:480px; height:300px; border:0px;" frameborder="0" src="googlemap.php?Address='.$Address.'&amp;City='.$City.'&amp;State='.$State.'&amp;Zip='.$Zip.'&amp;Country='.$Country.'"></iframe>'; 
                echo '</div>'; 
            }

            catch(PDOException $e) {
                echo "Error in Displaying Google Map.". $e->getMessage() ;// Remove or modify after testing 
                //file_put_contents('PDOErrors.txt',date('[Y-m-d H:i:s]').", mapSelect.php, ". $e->getMessage()."\r\n", FILE_APPEND);  
             } 
```

另外，这是 googlemap.php 的代码

```
<!DOCTYPE html>
    <html>
    <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map { height: 100% }
    </style>

    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=true">
      var geocoder;
      var map;
     <?php
      // Get parameters from URL
      $Address = isset($_GET['Address']) ? $_GET['Address'] : ''; 
      $City = isset($_GET['City']) ? $_GET['City'] : ''; 
      $State = isset($_GET['State']) ? $_GET['State'] : ''; 
      $Zip = isset($_GET['Zip']) ? $_GET['Zip'] : ''; 
      $Country= isset($_GET['Country']) ? $_GET['Country'] : '';

      //Set javascript variables
      echo "var Address ='".$Address."';\n"; 
      echo "var City ='".$City."';\n"; 
      echo "var State ='".$State."';\n";
      echo "var Zip ='".$Zip."';\n"; 
      echo "var Country ='".$Country."';\n";
?>
  function initialize() {
        geocoder = new google.maps.Geocoder();
        var latlng = new google.maps.LatLng(0,0);
        var mapOptions = {
          zoom: 7,
          center: latlng,
          mapTypeId: google.maps.MapTypeId.HYBRID
        }
        map = new google.maps.Map(document.getElementById('map'), mapOptions);
        codeAddress();
      }

      function codeAddress() {
        var address = Address+','+City+','+State+','+Zip+','+Country;
        geocoder.geocode( { 'address': address}, function(results, status) {
          if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });
          } else {
            alert('Location not acquired for the following reason: ' + status);
          }
        });
      }
    </script>

  </head>
  <body onload ="initialize()">
    <div id="map" style="width:100%; height:100%"></div>
  </body>
</html> 
```

我不知道它是否真的 100% 相关，但我的 htaccess 中也有以下内容用于缓存资源：

```
<IfModule mod_expires.c>
# Enable expirations
ExpiresActive On 
# Default directive
ExpiresDefault "access plus 1 year"
# Favicon
ExpiresByType image/x-icon "access plus 1 year"
# Images
ExpiresByType image/gif "access plus 1 year"
ExpiresByType image/png "access plus 1 year"
ExpiresByType image/jpg "access plus 1 year"
ExpiresByType image/jpeg "access plus 1 year"
# CSS
ExpiresByType text/css "access 1 month"
# Javascript
ExpiresByType application/javascript "access plus 1 year"
</IfModule> 
```

我希望这只是需要向我的 htaccess 添加一行代码的问题。如果是这样，我不知道我会添加什么，如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T11:43:16.587

您无法影响您无法控制的资源的缓存标头，这些地图图块位于 Google 的域中，而不是您的域。我不知道为什么 Google 在提供地图图块时不遵循自己的建议，但归根结底，除了删除地图或尝试不同的地图解决方案之外，您无能为力。

它只是一个缓存标头，因此无论如何都不会使页面在初始加载时加载速度变慢。忘记它并继续前进。

# ruby-on-rails - Rails：调整从另一个页面链接的图像大小？

> ID：15574489
> 
> 赞同：0
> 
> 时间：2013-03-22T15:47:42.240
> 
> 标签：ruby-on-rails, resize, image-resizing

到目前为止，我一直使用这个：

```
<%= image_tag("thumb.png", size: "180x95") %> 
```

并且图像已调整大小。

现在我想改成这样：

`<%= image_tag(p.thumbnail, size: "180x95") %>`（其中 p.thumbnail 是[http://b.vimeocdn.com/ts/272/361/272361059_200.jpg](http://b.vimeocdn.com/ts/272/361/272361059_200.jpg)）

问题是图片不会使用新代码调整大小。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T09:46:01.937

好的，所以我找到了解决方案。您必须在 CSS 中设置高度和宽度才能使其正常工作。我不知道为什么，但它有效:)

查看文件：

```
<%= image_tag(p.thumbnail, class: "hoi") %> 
```

CSS：

```
.hoi{
    height: 100px;
    width: 160px;
} 
```

# tfs - Atlassian Jira 按需迁移到 TFS 2012

> ID：15574493
> 
> 赞同：2
> 
> 时间：2013-03-22T15:47:49.443
> 
> 标签：tfs, migration, jira, tfs-migration

是否有任何工具可用于从**Jira on Demand**迁移到 TFS 2012？我看到的所有工具都需要在我们的服务器上本地安装 Jira。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T15:45:59.160

我认为最简单的方法是编写一个 quick'n'dirty 脚本来使用按需实例的 REST API 将所有内容都刮掉。

它应该在所有按需实例上默认启用（除非明确关闭。）

API 记录在：

[http://docs.atlassian.com/jira/REST/latest/](http://docs.atlassian.com/jira/REST/latest/)

# jquery - 加载器元件始终处于中心位置

> ID：15574494
> 
> 赞同：0
> 
> 时间：2013-03-22T15:47:51.017
> 
> 标签：jquery, positioning

我有一个像这样的非常简单的加载器

```
<i class="icon-refresh icon-spin"></i> //font awesome 
```

我在所有 ajax 请求上都使用它。ajax请求的响应被插入`.html()`到请求本身定义的不同dom元素中，可以以最小的div作为整个页面。

我的问题是我想将加载器始终定位在目标元素的中间，中心宽度和中间高度。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:52:04.423

这更像是一个CSS问题：

```
.containerForAjaxContent { position: relative; }
.icon-refresh.icon-spin { position:absolute; top:50%; left:50%; } 
```

关于绝对定位的说明：

> 所以，让我们用一组简单的步骤来总结一下——找到一个包含 position:absolute 的元素的包含块，这就是你需要做的：
> 
> 查看绝对定位元素的父元素——该元素的位置属性是否具有相对、绝对或固定值之一？
> 
> 如果是这样，您已经找到了包含块。
> 
> 如果没有，则移动到父元素的父元素并从步骤 1 重复，直到找到包含块或用完祖先。
> 
> 如果您在没有找到定位祖先的情况下到达了 html 元素，那么包含块就是 html 元素。

来源：[http ://www.w3.org/wiki/CSS_absolute_and_fixed_positioning#Containing_blocks](http://www.w3.org/wiki/CSS_absolute_and_fixed_positioning#Containing_blocks)

# c++ - 编写可以使用 std::vector 或 std::set 的模板

> ID：15574499
> 
> 赞同：7
> 
> 时间：2013-03-22T15:48:04.510
> 
> 标签：c++, templates

我编写了一个异步作业队列类，它已经很好地工作了很长时间。它使用 a`std::vector`作为基础集合来保存作业，然后按照您的预期处理它们。当我添加一份工作时，它会`push_back`对此进行处理`vector`。

最近我决定要模板化它使用的底层集合类型以及我编写它的方式，这应该非常简单。现在这样声明：

```
template<typename J, typename CollectionT = std::vector<J>>
class async_jobqueue
{
public: 
```

只有一个障碍，对于矢量类型的容器，我想将东西推到集合的末尾并调用`push_back`，对于设置类型的容器，我想调用`insert`。我怎样才能做出关于调用哪个编译的决定？或者有没有我可以使用的方便的适配器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T15:58:57.817

我宁愿使用重载的辅助函数。下面的一个依赖于没有标准容器同时公开单参数`insert()`函数和`push_back()`函数的事实：

```
#include <utility>

template<typename C, typename T>
auto insert_in_container(C& c, T&& t) ->
    decltype(c.push_back(std::forward<T>(t)), void())
{
    c.push_back(std::forward<T>(t));
}

template<typename C, typename T>
auto insert_in_container(C& c, T&& t) ->
    decltype(c.insert(std::forward<T>(t)), void())
{
    c.insert(std::forward<T>(t));
} 
```

这是你将如何使用它们：

```
#include <set>
#include <vector>
#include <iostream>

int main()
{
    std::set<int> s;
    std::vector<int> v;

    insert_in_container(s, 5);
    insert_in_container(v, 5);

    std::cout << s.size() << " " << v.size();
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/N6QE5%2412)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T16:19:11.997

`insert(iterator, value_type)`重载和调用它怎么`end()`样？它在两者中都可用，应该做你想做的事！也可以使用`std::list`！

这里真的不需要类型调度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T16:05:00.870

由于[concepts-lite](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3580.pdf)应该有望在C++14 中及时出现，我不妨向您展示这将如何完成：

```
template<typename J, typename CollectionT = std::vector<J>>
class async_jobqueue
{
  public:

    requires Associative_container<CollectionT>()
    void adding_function(const J& item) {
      // Uses insert
    }

    requires Sequence_container<CollectionT>()
    void adding_function(const J& item) {
      // Uses push_back
    }
}; 
```

当然，这还不可能（而且可能永远不可能）。然而，concepts-lite 的接受度是相当积极的。

# jquery - 使用 requirejs 中的插件停止全局 jquery

> ID：15574500
> 
> 赞同：2
> 
> 时间：2013-03-22T15:48:09.267
> 
> 标签：jquery, jquery-plugins, global-variables, requirejs

我在下面正确地一起工作`jquery`。`jquery-cookie`我想做的是，这`jquery`不是全球性的。现在是。我尝试过的任何方法似乎都失败了`jquery-cookie`。

```
require.config({
    paths: {
        "jquery": '../components/jquery/jquery',
        "jquery-cookie": "../components/jquery-cookie/jquery.cookie",
    },
    shim: {
        "jquery-cookie": {
            deps: ['jquery']
        }
    }
});

require(["jquery", "jquery-cookie"], function($) {
    console.log($().jquery); // 1.7.2
    console.log($.cookie("hello")); // null
}); 
```

以下更改将使 jquery 本地化并破坏 cookie：

```
define("nc-jquery",['jquery'], function () {
    return jQuery.noConflict(true);
});

require(["nc-jquery", "jquery-cookie"], function($) {
    console.log($().jquery);
    console.log($.cookie("hello"));
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:47:01.180

jquery 和 jquery-cookie 都是 AMD 兼容的，所以不需要做任何 shim 配置。只要您定义了一个名为“jquery”的路径（您这样做），jquery-cookie 模块将需要它并在没有全局 $ 的情况下很好地加载依赖项。[请参阅jquery-cookie 源代码](https://github.com/carhartl/jquery-cookie/blob/master/jquery.cookie.js)中的这一行，它在其中查找名为“jquery”的模块：

```
if (typeof define === 'function' && define.amd) {
    // AMD. Register as anonymous module.
    define(['jquery'], factory); 
```

正如您在原始示例中所示，您可以将 jQuery 包装为 nc-query 以消除全局 $. 您可能需要做的另一件事是为您想要自动使用它的任何库创建一个“地图”条目。

因此，您的示例的修改版本将如下所示：

```
require.config({
    paths: {
        'jquery': '../components/jquery/jquery',
        'jquery-cookie': '../components/jquery-cookie/jquery.cookie'
    },
    map: {
        'jquery-cookie': { 'jquery': 'nc-jquery' }
    }
});

define('nc-jquery', ['jquery'], function (jq) {
    return jq.noConflict( true );
});

require(['nc-jquery', 'jquery-cookie'], function(myNonGlobaljQuery) {
    console.log(myNonGlobaljQuery().jquery);
    console.log(myNonGlobaljQuery.cookie("hello"));
}); 
```

这意味着当 jquery-cookie 请求 'jquery' 时，你给它 'nc-jquery' 代替。您可以根据需要为想要以这种方式工作的任何库创建任意数量的这些。请参阅[地图的 API 文档](http://requirejs.org/docs/api.html#config-map)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:57:49.200

我发现这行得通，我只是不认为这是最好的解决方案。

```
require(["jquery", "jquery-cookie"], function() {
    var $ = jQuery.noConflict(true);
    console.log($().jquery);
    console.log($.cookie("hello"));
}); 
```

我对这段代码及其工作原理的解释如下。在它的代码中`jquery-cookie`使用它，并且它是全局的，足以让 jquery 和 cookie 都加载。我将其设置为本地，noConflict 允许在此要求内使用。`$``$``$`

# facebook - 以编程方式查看谁喜欢页面

> ID：15574501
> 
> 赞同：-1
> 
> 时间：2013-03-22T15:48:29.550
> 
> 标签：facebook, facebook-graph-api

所以我的公司有一个 Facebook 页面，他们希望根据每个客户中有多少喜欢我公司的 Facebook 页面来支付销售人员奖金。

现在，我们营销部门的某个人正在手动检查、获取名称并逐个进行查询，以查看喜欢该页面的人是否是客户，如果是，他们是谁。

这似乎太乏味了。我的问题是......有没有办法自动化？我在 Graph API / Page 中看不到任何可以让你这样做的东西：

[https://developers.facebook.com/docs/reference/api/page/](https://developers.facebook.com/docs/reference/api/page/)

就此而言，我实际上并不完全确定我们的营销人员如何获得喜欢该页面的人的姓名。当我查看该页面时，我只会看到我的朋友中谁喜欢该页面。但是话又说回来，他们是管理员，而我目前不是（尽管如果我能证明拥有管理员访问权限将如何带来好处，我可以很容易地获得它[我敢肯定，这将有资格]）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:09:05.143

简短的回答，不。您无法以编程方式查看谁喜欢您的页面，如果您转到新的“喜欢”部分，则只能在您的 Facebook 页面上手动查看。

您可以创建一个页面应用程序，当用户喜欢您的页面时，它会提示他插入他的信息或类似的东西，但是您不会再次捕获直接在您的页面上进行的喜欢，只有在 de 应用程序中进行的喜欢

# c# - 如何删除json字符串中的空值

> ID：15574506
> 
> 赞同：16
> 
> 时间：2013-03-22T15:48:48.363
> 
> 标签：c#, asp.net, .net, json

嗨，我正在使用下面的课程

```
Public List<string> name;
Public List<string> midname; 
```

一旦我对其进行序列化，我将得到以下输出，例如

```
 {"name":[hari],"midname":null} 
```

但我希望我的答案是这样的

```
{"name":[hari]} 
```

它不应该显示具有空值的类属性，并且我正在使用 c# .net 框架。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-22T15:51:34.470

完整的答案取决于您如何序列化您的课程。

如果您使用数据协定来序列化您的类，请设置`EmitDefaultValue = false`

```
[DataContract]
class MyClass
{
    [DataMember(EmitDefaultValue = false)]
    public List<string> name;

    [DataMember(EmitDefaultValue = false)]
    public List<string> midname { get; set; }
} 
```

如果您使用的是[Json.Net](http://james.newtonking.com/projects/json-net.aspx)，请改用此方法

```
class MyClass
{
    [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
    public List<string> name;

    [JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
    public List<string> midname { get; set; }
} 
```

或者使用全局设置它`JsonSerializerSettings.NullValueHandling = NullValueHandling.Ignore`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-22T15:53:02.473

如果您正在使用，`Json.Net`那么您可以通过像这样装饰您的财产来尝试这个

```
[JsonProperty(NullValueHandling = NullValueHandling.Ignore)]
public List<string> name { get; set; } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-08-31T15:17:16.020

就像 pswg 所说，最好首先正确序列化。可以在[此处查看不带空值的序列化示例](https://stackoverflow.com/a/45984760/7335973)

例如

```
var json = JsonConvert.SerializeObject(
        objectToSerialize,
        new JsonSerializerSettings {NullValueHandling = NullValueHandling.Ignore}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-22T15:55:37.487

```
private class NullPropertiesConverter : JavaScriptConverter
{
    public override object Deserialize(IDictionary<string, object> dictionary, Type type, JavaScriptSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override IDictionary<string, object> Serialize(object obj, JavaScriptSerializer serializer)
    {
        var jsonExample = new Dictionary<string, object>();
        foreach (var prop in obj.GetType().GetProperties())
        {
            //check if decorated with ScriptIgnore attribute
            bool ignoreProp = prop.IsDefined(typeof(ScriptIgnoreAttribute), true);

            var value = prop.GetValue(obj, BindingFlags.Public, null, null, null);
            if (value != null && !ignoreProp)
                jsonExample.Add(prop.Name, value);
        }

        return jsonExample;
    }

    public override IEnumerable<Type> SupportedTypes
    {
        get { return GetType().Assembly.GetTypes(); }
    }
} 
```

以下是您将如何利用上述内容，它将忽略空值。

```
var serializer = new JavaScriptSerializer();
    serializer.RegisterConverters(new JavaScriptConverter[] { new NullPropertiesConverter() });
    return serializer.Serialize(someObjectToSerialize); 
```

[资源](https://stackoverflow.com/a/11569365/188246)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-18T06:26:54.390

字符串签名Json = JsonConvert.SerializeObject（签名，Newtonsoft.Json.Formatting.Indented，新 JsonSerializerSettings { NullValueHandling = NullValueHandling.Ignore }）；

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-09T06:13:05.567

您可以使用 Newtonsoft.json 中的 JsonConvert 而不是 JavaScriptSerializer

```
var result = JsonConvert.SerializeObject(obj, 
            new JsonSerializerSettings() 
            { 
                NullValueHandling = NullValueHandling.Ignore 
            }); 
```

# python-2.7 - 将极地立体数据转换为墨卡托投影的 Python 解决方案

> ID：15574507
> 
> 赞同：1
> 
> 时间：2013-03-22T15:48:49.130
> 
> 标签：python-2.7, numpy, matplotlib, scipy, matplotlib-basemap

我有极地立体投影的数据以及纬度和经度值。但我似乎找不到一种简单的方法将其转换为 Basemap 中的墨卡托（正方纬度和经度）投影。有没有人有一个简单的解决方案来解决这个问题？

感谢您对此的帮助，/M

# html - 有什么方法可以在 Selenium IDE 中使用类和标题

> ID：15574510
> 
> 赞同：1
> 
> 时间：2013-03-22T15:48:53.567
> 
> 标签：html, selenium, automated-tests, selenium-ide

所以，我尝试使用 XPath，但它一直在变化，我尝试使用 CSS，但由于某种原因，`click`它不起作用。我想要做的是点击一个元素。我有这个元素的类和标题，以及父 div 的类。FirePath 每次都给我一个不同的 XPath，所以我不能使用它。Class of div =' `dhtmlx_wins_btns_button dhtmlx_button_close_default`'
Title of div = ' `Close`'
Class of parent = ' `dhtmlx_wins_btns`'
我试图这样做：
`//[@class='dhtmlx_wins_btns_button dhtmlx_button_close_default' and @class='Close']` 但这没有用。如果有人能指出我正确的方向，那就太好了。
*****编辑*****
对不起，我似乎一次做太多事情。 我也
尝试过这样做： 但这没有用。虽然，单击***查找***
`//[@class='dhtmlx_wins_btns_button dhtmlx_button_close_default']`

`//[@title=Close]`
*IDE 中的按钮突出显示该项目。CSS 也是如此。我希望如果我把两个放在一起，它会起作用。
我以为同一个类有多个 div，但我可能一直在看别的东西。不管是谁给他们起名字，他们都用了太相似的名字来命名这些类。再次为混乱感到抱歉。*

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:54:14.373

您的 XPath 格式不正确。

一个）。试试这个 XPath，其中条件与类和标题都正确格式化。

```
//div[@class='dhtmlx_wins_btns_button dhtmlx_button_close_default' and @title='Close'] 
```

乙）。仅当第一个不起作用时才尝试此操作，并且在这里我将父标记视为 div

```
//div[@class='dhtmlx_wins_btns'/div[@class='dhtmlx_wins_btns_button dhtmlx_button_close_default' and @title='Close'] 
```*

# javascript - JavaScript：处理器速度和代码速度之间有什么关系？

> ID：15574514
> 
> 赞同：0
> 
> 时间：2013-03-22T15:49:03.660
> 
> 标签：javascript, performance, benchmarking

我希望我的处理器越快，我的代码运行得越快。

我可以使用毫秒精度测量代码。

```
new Date.getTime() 
```

两者之间有什么相关性？

我怎么能指望这与运行在 3.2 GHz 的处理器有关。

即使这是一个非常粗略的估计，任何人都可以量化这种关系吗？

```
// start_time

run some simple code to be timed.

// end_time 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:55:38.230

分配给 JS 脚本的 [EDIT: **CPU ] 时钟时间由许多因素决定，包括：**

*   浏览器/版本
*   操作系统
*   当前电源状态

在 Windows 8 的高级电源选项菜单中可以看到一个演示。展开 Internet Explorer 节点，您会注意到下面的条目是针对`JavaScript timer frequency`. 这正是你所想的——一个控制 JS 时钟“滴答”频率的设置。一秒钟内的滴答声越多，JS 引擎执行代码的频率就越高，执行的代码越多，消耗的功率就越多。

所以回答你的问题：是的，在一般意义上，处理器时钟速度可以确定特定 JS 的运行速度，但假设它是直接相关是错误的。

编辑（更多信息）：我无法挖掘链接，但如果我找到它，我会在这里更新。使用`setTimeout`or `setInterval`，您可以传递给那些实际将被兑现的方法的最小时间单位是 100(ms)。可能有比这更高的频率，但 100 毫秒是保证的全部

我在这篇文章中发现了一些与我的想法相近的东西：http: [//javascript.info/tutorial/settimeout-setinterval](http://javascript.info/tutorial/settimeout-setinterval)

本质上，在基于排队操作的 JavaScript 计时器中——您可以调用`setTimeout(fn, 10)`，并且您的请求将在 10 毫秒后排队执行，但这并不意味着它将*在*该时间后执行，只是它已排队执行所以。如果您测量预期和实际之间的差异（超过阈值，可能是 100 毫秒），您可以收集偏移数据来计算脚本运行的结果频率（或“时钟速度”）。有关以更精确的方式对 JS 进行基准测试的示例，请参阅[本文](http://updates.html5rocks.com/2012/07/How-to-measure-browser-graphics-performance)

从第二篇文章中，我们看到您可以获得的最小超时时间是 4 毫秒：

> 使用 setTimeout 来测量图形性能是另一个坏主意。setTimeout 间隔在浏览器中被限制为 4 毫秒，因此您最多可以得到 250 FPS。从历史上看，浏览器有不同的最小间隔，所以你可能有一个非常糟糕的琐碎绘制基准，显示浏览器 A 以 250 FPS（最小间隔 4 毫秒）运行，浏览器 B 以 100 FPS（最小间隔 10 毫秒）运行。显然A更快！不是！很可能 B 运行绘图代码的速度比 A 快，比如 A 用了 3 毫秒，B 用了 1 毫秒。不影响 FPS，因为绘制时间小于最小 setTimeout 间隔。如果浏览器异步渲染，所有的赌注都没有了。除非您知道自己在做什么，否则不要使用 setTimeout。

# spring - 让 Spring 了解 Jersey 过滤器

> ID：15574516
> 
> 赞同：3
> 
> 时间：2013-03-22T15:49:09.067 元素
> 
> 标签：spring, jersey, servlet-filters

我有一个实现 ContainerRequestFilter 的类，我想向其中注入一些 spring 依赖项，所以我需要让 Spring 知道 Jersey 过滤器。过滤器本身在我的 web.xml 中配置了 Jersey servlet

```
<servlet>
    <servlet-name>Jersey Spring Web Application</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.spi.container.ContainerRequestFilters</param-name>
        <param-value>com.MyFilter</param-value>
    </init-param>
</servlet> 
```

然后过滤器类尝试注入 Manager bean。为了让 spring 了解 Filter bean，我在 applicationContext.xml 中定义了 bean 并包含在内。

```
@Component
public class MyFilter implements ContainerRequestFilter {

@Autowired
private Manager manager; 
```

我试图通过强制 Spring 使用代理生成的类来使过滤器 bean 可见，但这不起作用

```
<mvc:annotation-driven />

<aop:aspect-autoproxy />    

<bean id="filter" class="com.MyFilter">
    <property name="manager" ref="Manager" />
</bean> 
```

关于如何编辑现有代码以允许过滤器看到 spring bean 的任何建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-11T04:27:40.197

[由于您使用的是 Jersey 的 Spring Servlet，因此可以使用注解@InjectParam](http://jersey.java.net/nonav/apidocs/1.5/jersey/com/sun/jersey/api/core/InjectParam.html)将 spring 依赖项注入到过滤器中

```
//@Component -> This is not required.
public class MyFilter implements ContainerRequestFilter {

@InjectParam
private Manager manager; 
```

我觉得这是一起使用 Jersey 和 Spring 的惯用方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T15:54:00.517

这对于 Spring Security 应用程序来说是很常见的。你应该利用[`DelegatingFilterProxy`](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/filter/DelegatingFilterProxy.html)这个。

您将通过`<filter>`标记将此过滤器添加到 web.xml，然后将其配置为应用程序容器中的 bean。然后，您可以使用它来委托给您在应用程序上下文中拥有的 Spring 配置过滤器。

我不熟悉泽西岛的`SpringServlet`工作方式，但这就是我委托给 Spring 配置的过滤器的方式。

# ruby - libpq.so.5：无法打开共享对象文件：没有这样的文件或目录 - /gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/pg-0.14.1/lib /pg_ext.so

> ID：15574525
> 
> 赞同：1
> 
> 时间：2013-03-22T15:49:40.430
> 
> 标签：ruby, linux, unix, shared-libraries, redhat

我正在尝试在 linux 服务器上运行脚本（ruby 脚本）。我收到以下错误：我不确定问题是什么，但它看起来像共享库问题。Linux 高手，请您指教可能是什么问题？

```
libpq.so.5: cannot open shared object file: No such file or directory - /gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/pg-0.14.1/lib/pg_ext.so
<internal:lib/rubygems/custom_require>:29:in `require'
<internal:lib/rubygems/custom_require>:29:in `require'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:239:in `block in require'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:225:in `block in load_dependency'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:596:in `new_constants_in'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:225:in `load_dependency'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:239:in `require'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/pg-0.14.1/lib/pg.rb:4:in `<top (required)>'
<internal:lib/rubygems/custom_require>:33:in `require'
<internal:lib/rubygems/custom_require>:33:in `rescue in require'
<internal:lib/rubygems/custom_require>:29:in `require'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:239:in `block in require'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:225:in `block in load_dependency'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:596:in `new_constants_in'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:225:in `load_dependency'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activesupport-3.0.5/lib/active_support/dependencies.rb:239:in `require'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/postgresql_adapter.rb:9:in `postgresql_connection'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:229:in `new_connection'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:237:in `checkout_new_connection'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:191:in `block (2 levels) in checkout'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:187:in `loop'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:187:in `block in checkout'
/gds/apps/ruby-1.9.2-p180/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:186:in `checkout'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:94:in `connection'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_pool.rb:317:in `retrieve_connection'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_specification.rb:97:in `retrieve_connection'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/connection_adapters/abstract/connection_specification.rb:89:in `connection'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/arel-2.0.2/lib/arel/table.rb:127:in `table_cache'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/arel-2.0.2/lib/arel/table.rb:122:in `tables'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/arel-2.0.2/lib/arel/table.rb:118:in `table_exists?'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/arel-2.0.2/lib/arel/table.rb:97:in `[]'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/relation/predicate_builder.rb:23:in `block in build_from_hash'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/relation/predicate_builder.rb:9:in `each'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/relation/predicate_builder.rb:9:in `map'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/relation/predicate_builder.rb:9:in `build_from_hash'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/relation/query_methods.rb:227:in `build_where'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/relation/query_methods.rb:77:in `where'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/relation.rb:221:in `destroy_all'
/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/activerecord-3.0.5/lib/active_record/base.rb:439:in `destroy_all'
./edx_vert_to_pg.rb:43:in `<main>' 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-06T15:14:50.753

libpq.so.5 无法读取此文件

/gds/apps/ruby-1.9.2-p180/lib/ruby/gems/1.9.1/gems/pg-0.14.1/lib/pg_ext.so

文件存在吗？该文件是否具有正确的权限以供您正在执行和失败的程序读取？

那应该让你去

# asp.net-mvc - 仅在使用 jQuery Mobile 的主页上禁用 AJAX

> ID：15574527
> 
> 赞同：0
> 
> 时间：2013-03-22T15:49:50.707
> 
> 标签：asp.net-mvc, jquery-mobile

我正在寻找一种仅在项目的主页上禁用 AJAX 的方法。我正在使用 MVC，因此在许多区域都有指向主页的链接。我想要整个网站的 AJAX，但在加载主页时不需要。原因是因为我使用脚本来动态设置 UI，它包含对象，并且这些对象在页面加载为硬刷新时加载，但在 jQuery Mobile 转换到页面时不加载。我正在寻找一种解决方案，我可以在主页上添加一个脚本，以便在引用它时禁用 AJAX。但是对于其余的解决方案仍然有 AJAX。这是一个非常独特的情况，但我还没有发现任何可以阻止一个页面通过 AJAX 加载的东西。有人知道吗？

如果可以的话，我只想在主页上做这样的事情

```
<script>
$(document).bind(function(){
    [some call to disable this page from being loaded with AJAX]
});
</script> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:31:35.733

不存在这样的事情。将 AJAX 想象成一个小型浏览器：如果 URL 返回响应，它就可以访问它。但是，如果检测到“AJAXy”请求标头，则*可以*根据 Home 操作中是否存在请求标头进行分支并返回类似 403 Forbidden 的内容。

例如，jQuery 会`X-Requested-With: XMLHttpRequest`随请求一起发送标头。如果此标头存在，则请求很可能来自 jQuery 中的 AJAX 方法（或可能使用相同方法的其他库）。如果需要，您还可以通过 AJAX 请求传递您自己的自定义标头。但是，所有这些都是特定于实现的，因此它在很大程度上取决于您团队中的所有开发人员以某种方式做事。例如，如果有人使用标准的 JavaScript XHR 对象发出请求，那么`X-Requested-With`标头将不存在。或者，如果您使用自定义标头，则每个开发人员都需要每次或再次传递该标头，逻辑就会崩溃。

如果您的业务规则规定不应通过 AJAX 请求主页，则处理该问题的最佳方法是在*业务*级别，即策略。您在实际代码中尝试的任何事情都可以轻松解决。

# c - 为 ARM 交叉编译 R (Raspberry Pi)

> ID：15574528
> 
> 赞同：1
> 
> 时间：2013-03-22T15:49:55.440
> 
> 标签：c, r, arm, fortran, raspberry-pi

我需要为在 Raspberry Pi 上运行的 Arch Linux ARM 构建 R ( [http://www.r-project.org/](http://www.r-project.org/) )。我在运行 ./configure 时遇到问题。我已经使用 crosstool-ng 构建了自己的工具链并且它确实有效，我已经用它编译了其他应用程序就好了。

问题似乎是我无法将 Fortran 库链接到 C 代码。这是配置失败的地方：

```
checking for Fortran 77 libraries of gfortran...  -L/home/njackson/bcm2708rpi-toolchain/lib -L/home/njackson/bcm2708rpi-toolchain/lib/gcc/arm-rpi-linux-gnueabi/4.7.3 -L/home/njackson/bcm2708rpi-toolchain/arm-rpi-linux-gnueabi/lib -L/usr/lib/gcc/x86_64-linux-gnu/4.6 -L/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/4.6/../../.. -lgfortran -lm /home/njackson/bcm2708rpi-toolchain/arm-rpi-linux-gnueabi/lib/libgfortran.a /home/njackson/bcm2708rpi-toolchain/lib/gcc/arm-rpi-linux-gnueabi/4.7.3/libgcc.a
checking for dummy main to link with Fortran 77 libraries... unknown
configure: error: in `/home/njackson/R-2.15.3':
configure: error: linking to Fortran libraries from C fails
See `config.log' for more details 
```

它在这里失败了。

我使用了以下配置命令：

```
./configure --host=arm-linux-gnueabihf CC=/home/njackson/bcm2708rpi-toolchain/bin/arm-rpi-linux-gnueabi-gcc CXX=/home/njackson/bcm2708rpi-toolchain/bin/arm-rpi-linux-gnueabi-g++ FC=/home/njackson/bcm2708rpi-toolchain/bin/arm-rpi-linux-gnueabi-gfortran MAIN_LD=/home/njackson/bcm2708rpi-toolchain/bin/arm-rpi-linux-gnueabi-ld --with-readline=no 
```

我很感激帮助编译这个。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:44:50.767

我想到了。

应该设置 F77=/path/to/gfortran 而不是 FC 变量。

# android - 发送带有 Intent 的 HTML 电子邮件

> ID：15574541
> 
> 赞同：1
> 
> 时间：2013-03-22T15:50:19.687
> 
> 标签：android, html, email, android-intent, share

当用户决定共享我的应用程序时，我想发送一封 HTML 电子邮件。我正在使用 HTML 来获得定制和具有吸引力的信息。

第一种方法，我尝试使用 Html.fromHtml 用我的 HTML（内联样式）创建一个字符串，但是当我收到电子邮件时，它是纯 txt，没有自定义。

第二种方法，发送附加的 HTML 文件。这种方法的问题是在用户打开附件之前不会显示 HTML。

最好的解决方案是什么，可能吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:00:41.480

您可以使用此方法完成任务`Html.fromHtml(String);`

```
Html.fromHtml("<font color='#ff123456'>text</font>") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T07:37:50.343

您可以在额外内容中传递跨区文本。为了确保意图只解析到处理电子邮件的活动（例如 Gmail 和电子邮件应用程序），您可以使用 ACTION_SENDTO 和以 mailto 方案开头的 Uri。如果您事先不知道收件人，这也将起作用：

```
final Intent shareIntent = new Intent(Intent.ACTION_SENDTO, Uri.parse("mailto:"));
shareIntent.putExtra(Intent.EXTRA_SUBJECT, "The Subject");
shareIntent.putExtra(
Intent.EXTRA_TEXT,
Html.fromHtml(new StringBuilder()
    .append("<p><b>Some Content</b></p>")
    .append("<small><p>More content</p></small>")
    .toString())
); 
```

# c# - C#为什么当我清除原始对象时我的列表项被清空？

> ID：15574542
> 
> 赞同：3
> 
> 时间：2013-03-22T15:50:20.447
> 
> 标签：c#, list, dictionary

我基本上有一个字典列表，例如：

```
List<Dictionary<string, string>> 
```

出于测试目的，我将 36 个字典项提取到列表中，然后在函数结束时返回列表。

奇怪的是，当我填充列表时，我可以看到字典的 Key=>Value 对被添加到 Visual Studio Inspector 的列表中，但是在清除用于填充我的列表的原始字典后，剩下的就是 36列表中的空项目。

是否发生了一些我不知道的奇怪的列表行为？下面包含一个代码片段以供参考...

```
 List<Dictionary<string, string>> allResults = new List<Dictionary<string, string>>();
    Dictionary<string, string> selectResult = new Dictionary<string, string>();

    MySqlCommand cmd = new MySqlCommand(query, conn);
    MySqlDataReader dataReader = cmd.ExecuteReader();

    try
    {
        while (dataReader.Read())
        {
            for (int i = 0; i < dataReader.FieldCount; i++)
            {
                selectResult.Add(dataReader.GetName(i).ToString(), dataReader.GetValue(i).ToString());
            }
            allResults.Add(selectResult);

            //Something to do with this next line seems to cause the List to also lose the values stored in the Dictionary, is clearing the dictionary not allowed at this point and the list is simply referencing the Dictionary rather than 'making a copy'?
            selectResult.Clear();
        }
        dataReader.Close();
    }

    catch { }

    this.Close();

    return allResults; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:52:39.523

您为每个循环在列表中添加相同的字典实例。
只希望当您清除字典时，每个都被清空

要解决问题，您需要将其添加到您的循环中

```
 while (dataReader.Read())
   {
        // at every loop, create a new instance of dictionary using the same variable
        Dictionary<string,string> selectResult = new Dictionary<string, string>();
        for (int i = 0; i < dataReader.FieldCount; i++)
        {
            selectResult.Add(dataReader.GetName(i).ToString(), dataReader.GetValue(i).ToString());
        }
        // Adding a different copy of the dictionary in the list
        allResults.Add(selectResult);
    } 
```

不过我需要问你。为什么要使用字典来存储列和行？您可以使用 DataTable 实现您的结果

```
 DataTable dt = new DataTable();
    dt.Load(dataReader); 
```

忘记列表和字典

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T15:51:58.793

因为你没有克隆它。你复制了第一个对象的地址。下次使用克隆。

[深度克隆对象](https://stackoverflow.com/questions/78536/deep-cloning-objects-in-c-sharp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:52:44.427

`Dictionary`是引用类型。您需要创建一个新的：`selectResult = new Dictionary<string, string>()`而不是调用`Clear`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T15:53:51.097

您正在添加对`Dictionary`列表的引用，因此原始字典中的更改也会反映在您通过列表访问的实例中。如果要添加 的*副本*，则`Dictionary`需要使用以下内容：

```
allResults.Add(new Dictionary<string, string>(selectResult)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T15:59:38.697

正如其他人所说，当您将字典添加到列表中时，您只是添加了对同一现有字典的附加引用。也就是说，我建议使用与复制它不同的解决方案。

问题是您的字典处于顶级范围。不应该。你试图一遍又一遍地重复使用同一个字典。最好在`while`循环内部的较低级别简单地定义字典：

```
List<Dictionary<string, string>> allResults = new List<Dictionary<string, string>>();

MySqlCommand cmd = new MySqlCommand(query, conn);
MySqlDataReader dataReader = cmd.ExecuteReader();

try
{
    while (dataReader.Read())
    {
        Dictionary<string, string> selectResult = new Dictionary<string, string>();
        for (int i = 0; i < dataReader.FieldCount; i++)
        {
            selectResult.Add(dataReader.GetName(i).ToString(), dataReader.GetValue(i).ToString());
        }
        allResults.Add(selectResult);
    }
    dataReader.Close();
}
//... 
```

请注意，我所做的唯一更改是移动`selectResult`.

通过为循环的每次迭代创建一个新字典，`while`您可以确保每次都添加一个新字典。

# android - 在我的控制台中转换为 Dalvik 格式失败

> ID：15574546
> 
> 赞同：2
> 
> 时间：2013-03-22T15:50:33.463
> 
> 标签：android, dalvik

我的 Android 项目有一个问题。我的项目编译，但是当我运行应用程序时，我收到此消息“转换为 Dalvik 格式失败：无法执行 dex：多个 dex 文件定义 Lbiz/source_code/base64Coder/Base64Coder；”

我也尝试清理我的项目，但没有。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:02:39.707

这通常是因为您在项目中添加了 2 个相同的库。

删除其中之一，问题将得到解决。

# magento-1.7 - Magento 1.7 无法重新索引产品平面数据

> ID：15574547
> 
> 赞同：2
> 
> 时间：2013-03-22T15:50:35.567
> 
> 标签：magento-1.7, reindex

## Magento 1.7 无法重新索引产品平面数据...尝试重新索引我的数据库时出现以下错误。

```
Product Flat Data index process unknown error:
exception 'PDOException' with message 'SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot          add or update a child row: a foreign key constraint fails (`d014505f`.<result 2 when explaining filename '#sql-1f6c_39a11d'>, CONSTRAINT `FK_CAT_PRD_FLAT_1_ENTT_ID_CAT_PRD_ENTT_ENTT_ID` FOREIGN KEY (`entity_id`) REFERENCES `catalog_product_entity` (`e)' in /www/htdocs/w00f5624/lib/Zend/Db/Statement/Pdo.php:228

Stack trace:#0 /www/htdocs/w00f5624/lib/Zend/Db/Statement/Pdo.php(228): PDOStatement-    >execute(Array)
#1 /www/htdocs/w00f5624/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#2 /www/htdocs/w00f5624/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#3 /www/htdocs/w00f5624/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#4 /www/htdocs/w00f5624/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('ALTER TABLE `ca...', Array)
#5 /www/htdocs/w00f5624/lib/Varien/Db/Adapter/Pdo/Mysql.php(419): Zend_Db_Adapter_Pdo_Abstract->query('ALTER TABLE `ca...', Array)
#6 /www/htdocs/w00f5624/lib/Varien/Db/Adapter/Pdo/Mysql.php(340): Varien_Db_Adapter_Pdo_Mysql->query('ALTER TABLE `ca...')
#7 /www/htdocs/w00f5624/lib/Varien/Db/Adapter/Pdo/Mysql.php(2569): Varien_Db_Adapter_Pdo_Mysql->raw_query('ALTER TABLE `ca...')
#8 /www/htdocs/w00f5624/app/code/core/Mage/Catalog/Model/Resource/Product/Flat/Indexer.php(816): Varien_Db_Adapter_Pdo_Mysql->addForeignKey('FK_CAT_PRD_FLAT...', 'catalog_product...', 'entity_id', 'catalog_product...', 'entity_id', 'CASCADE', 'CASCADE')
#9 /www/htdocs/w00f5624/app/code/core/Mage/Catalog/Model/Resource/Product/Flat/Indexer.php(1390): Mage_Catalog_Model_Resource_Product_Flat_Indexer->prepareFlatTable(1)
#10 /www/htdocs/w00f5624/app/code/core/Mage/Catalog/Model/Product/Flat/Indexer.php(296): Mage_Catalog_Model_Resource_Product_Flat_Indexer->reindexAll()
#11 /www/htdocs/w00f5624/app/code/core/Mage/Catalog/Model/Product/Indexer/Flat.php(336): Mage_Catalog_Model_Product_Flat_Indexer->reindexAll()
#12 /www/htdocs/w00f5624/app/code/core/Mage/Index/Model/Process.php(209): Mage_Catalog_Model_Product_Indexer_Flat->reindexAll()
#13 /www/htdocs/w00f5624/app/code/core/Mage/Index/Model/Process.php(255): Mage_Index_Model_Process->reindexAll()
#14 /www/htdocs/w00f5624/shell/indexer.php(158): Mage_Index_Model_Process->reindexEverything()
#15 /www/htdocs/w00f5624/shell/indexer.php(198): Mage_Shell_Compiler->run()
#16 {main} 
```

* * *

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T11:57:13.417

当您删除一些信息时，Magento 似乎没有清理表；所以你需要手动清理它，使用这个 SQL 查询：

```
TRUNCATE TABLE ´catalog_product_flat_1´; 
```

然后，运行重新索引过程。

清空那张桌子没关系；因为 Magento 使用 EAV 表来重新构建（重新索引）它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T08:20:41.780

magento 以编程方式重新索引

```
ID      Code

1       catalog_product_attribute

2       catalog_product_price

3       catalog_url

4       catalog_product_flat

5       catalog_category_flat

6       catalog_category_product

7       catalogsearch_stock

8       cataloginventory_stock

9       tag_summary 
```

```
for ($i = 1; $i <= 9; $i++) {
    $process = Mage::getModel('index/process')->load($i);
    $process->reindexAll();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-12T16:59:53.933

我今天遇到了同样的问题。要解决此问题，只需通过运行找到损坏的产品

```
SELECT cpf.entity_id FROM catalog_product_flat_1 AS cpf LEFT JOIN catalog_product_entity AS cpe ON cpf.entity_id = cpe.entity_id WHERE ISNULL(cpe.entity_id); 
```

你会得到类似的结果

```
+-----------+
| entity_id |
+-----------+
|     14029 |
|     14111 |
+-----------+
2 rows in set (0.01 sec) 
```

现在您可以通过运行删除这些产品

```
DELETE FROM catalog_product_flat_1 where entity_id IN (14029,14111); 
```

**注意：您可能需要更改“catalog_product_flat_1”表 - 错误消息会告诉您哪个表包含损坏的产品。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-24T20:35:22.433

我遇到了几乎相同的错误：（类似的）SQLSTATE [HY000]：一般错误：1005 无法创建表'databasename.#sql-4ebf-e07'（错误号：121）

然后我研究我有相同的外键'FK_CAT_PRD_FLAT_1_ENTT_ID_CAT_PRD_ENTT_ENTT_ID'

即使我像这样截断表格：

```
SET FOREIGN_KEY_CHECKS=0;
TRUNCATE TABLE catalog_product_flat_1;
SET FOREIGN_KEY_CHECKS=1; 
```

没有解决我的问题。

即使我删除了数据库中的所有表，我也不能只删除其中的 3 个：catalog_product_entity 和几个 eav_ 表（我不记得了）

只有一种方法帮助了我：

1.  备份当前数据库（在任何更改之前执行此操作，即使您有要重新索引的消息）
2.  删除 DB（不是所有表，而是直接 DB）
3.  创建数据库（检查您是否仍有权限）
4.  从备份中恢复数据库并检查管理面板。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-07T13:29:35.127

```
SET FOREIGN_KEY_CHECKS=0;
TRUNCATE TABLE catalog_product_flat_1;
TRUNCATE TABLE catalog_product_flat_2;
SET FOREIGN_KEY_CHECKS=1; 
```

为我工作。

之后我可以从 CLI 重新索引。

# groovy - SOAPUI 在请求中注释不需要的标签

> ID：15574548
> 
> 赞同：1
> 
> 时间：2013-03-22T15:50:46.497
> 
> 标签：groovy, soapui

我想在 SOAPUI 中进行数据驱动测试。因此，我试图将数据从 excel 文件输入脚本。在某种程度上我是成功的。我使用 groovy 脚本更新了所有测试脚本。

但是，有一个挑战，对于某些测试用例，我不想为几个标签提供数据。当我将其保留为空时，我的服务器会引发错误。这意味着标签应该有一个值，或者标签被排除在外，因为标签本身是可选的。

如果没有其他兄弟姐妹有任何价值，有没有办法排除标签，它的所有孩子甚至它的父母。

换句话说，我只想启用具有价值或强制性的标签。所有其他标签都应该被注释掉。

如何使用 groovy 脚本实现这一点？

例子：

```
<Record>
   <Employee>
      <Name>Alfa</Name>
      <Age>28</Age>
   </Employee>
   <Location>
      <LocName></LocName>
      <State></State>
   </Location>
</Record> 
```

在此代码中，Employee 标签包含信息。但位置标签不是。如果我为标签 LocName 和 State 传递空白值，我的服务器将抛出错误。但是标签 Location 本身是可选的。所以我希望我的请求是这样的

```
<Record>
   <Employee>
      <Name>Alfa</Name>
      <Age>28</Age>
   </Employee>
      <!--Location>
      <LocName></LocName>
      <State></State>
   </Location-->
</Record> 
```

如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T20:39:42.620

您可以使用 context.expand 函数。

在您的请求中，您需要添加您的行 ${=context.expand("variable#1")!=''?'What to add':''}

示例：DataSource#J1 和 DataSource#J2 来自我的数据源测试步骤

```
 ${=context.expand("${DataSource#J1}")!=''?'<rxas:OpeningHour>':''}
    ${=context.expand("${DataSource#J1}")!=''?'<rxas:HourFrom>'+context.expand("${DataSource#J1}")+'</rxas:HourFrom>':''}
    ${=context.expand("${DataSource#J2}")!=''?'<rxas:HourTo>'+context.expand("${DataSource#J2}")+'</rxas:HourTo>':''}
    ${=context.expand("${DataSource#J1}")!=''?'</rxas:OpeningHour>':''} 
```

如果您的变量为空 !=' ' 值 ?'example' 将不会被添加

# c# - asp.net mvc 3中的活动目录asp.net表单身份验证

> ID：15574550
> 
> 赞同：0
> 
> 时间：2013-03-22T15:50:51.480
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我必须实现这样的接口：

```
interface IMembershipWrapper
{
  Guid GetUserId();
  Guid GetUserId(string username, bool userIsOnline);
  bool ValidateUser(string userName, string password);
    …
} 
```

针对活动目录并使用 Unity 注入它。

我可能会为某些方法抛出 NotImplementedException 异常，但您认为这通常是可能的吗？你推荐什么策略？

我知道我可以通过 web.config 配置“活动目录 asp.net 表单身份验证”，如此处[所述](http://helios.ca/2009/05/04/aspnet-mvc-forms-authentication-with-active-directory/)。不幸的是，这不是一个选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:14:21.253

这应该是完全可能的，无需更改 web.config 中的身份验证系统。特别是如果您使用的是 .NET 3.5+。看看[System.DirectoryServices.AccountManagement](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)。

要实施`GetUserId(string username, bool userIsOnline)`，您可能想尝试以下方法：

```
public Guid GetUserId(string username, bool userIsOnline) {
    using(PrincipalContext pc = new PrincipalContext(ContextType.Domain, "[active directory domain here]")) {
        var user = UserPrincipal.FindByIdentity(pc, IdentityType.SamAccountName, username);
        if(user != null)
            return user.Guid.Value;
        else
            return null;
    }
} 
```

实现`ValidateUser(string userName, string password)`使用`ValidateCredentials()`_`PrinicalContext`

```
public bool ValidateUser(string userName, string password) {
    using (PrincipalContext pc = new PrincipalContext(ContextType.Domain, "[active directory domain here]"))
    {
        return pc.ValidateCredentials(userName, password);
    }
} 
```

如果没有有关您的实施的更多信息，我不确定如何实施`GetUserId()`，因为您似乎没有足够的信息来访问 Active Directory。

# c++ - 参考传递

> ID：15574551
> 
> 赞同：0
> 
> 时间：2013-03-22T15:50:52.457
> 
> 标签：c++

我正在阅读以下问题[的河内塔问题](https://stackoverflow.com/questions/4481224/towers-of-hanoi-question)。第一个答案说使用

```
stack<int>& 
```

我的问题是为什么会这样？记忆中发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:53:57.177

`stack`我们正在传递一个引用，这样就不会生成对象的副本。如果进行了复制，则对其进行修改不会影响`stack`传递给函数的原始对象。它只会影响函数本地的*副本。*

引用就像一个对象的别名；当声明为

```
stack<int>& source 
```

`source`现在指的是那个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T15:55:08.243

上述问题中使用的函数具有以下原型：

```
void Hanoi(int nDisks, stack<int> source, stack<int> intermed, stack<int> dest) 
```

即它`stack<int>`按值​​获取所有传递的对象。创建了传递的副本，`stack`并且在此函数的主体内对此对象所做的任何更改都会更改副本，而不是已传递给它的原始对象。

这就是为什么解决方案是`stack`通过引用而不是通过值传递这些对象。基本上引用（例如`stack<int>& dest`）允许您在函数`dest`内部处理`Hanoi`它的类型`stack<int>`，只是没有复制并且调用者可以看到更改:)

# c++ - 在 C++ 中测量执行时间：clock() 和 clock_gettime() 给出完全不同的结果

> ID：15574553
> 
> 赞同：1
> 
> 时间：2013-03-22T15:51:03.653
> 
> 标签：c++, time, clock

我正在尝试测量我的代码性能（这是 OpenCL 内核的执行），我真的需要了解加速。我尝试使用clock() 和clock_gettime() 函数。

在第一种情况下，我的代码简单明了，并且测量正确：

```
 struct timespec start_r, start_m, stop_r, stop_m;
    double realtime, monotonic;

    time_t start2 = clock();

    if(clock_gettime(CLOCK_REALTIME, &start_r) == -1) {
        cout << "clock realtime error!" << endl;
    }

    if(clock_gettime(CLOCK_MONOTONIC, &start_m) == -1) {
        cout << "clock realtime error!" << endl;
    }

        double res = 0.0;
        for(unsigned long i = 0; i < total; i++) {
            res += data[i];
        }

    cout << "res = " << res << endl;

    time_t end2 = clock();
    if(clock_gettime(CLOCK_REALTIME, &stop_r) == -1) {
        cout << "clock realtime error!" << endl;
    }

    if(clock_gettime(CLOCK_MONOTONIC, &stop_m) == -1) {
        cout << "clock realtime error!" << endl;
    }

    cout << "Time clock() = " << (end2 - start2)/(double)CLOCKS_PER_SEC << endl;

    realtime = (stop_r.tv_sec - start_r.tv_sec) + (double)(stop_r.tv_nsec - start_r.tv_nsec) / (double)BILLION;
    monotonic = (stop_m.tv_sec - start_m.tv_sec) + (double)(stop_m.tv_nsec - start_m.tv_nsec) / (double)BILLION;

    cout << "Realtime = " << realtime << endl << "Monotonic = " << monotonic << endl; 
```

它给出了可以理解的结果——所有三个结果几乎相同。

在测量 OpenCL 内核的执行时间时，我的做法完全相同，但我得到的结果很糟糕：

```
Time = 0.04
Realtime = 0.26113
Monotonic = 0.26113 
```

你能告诉我它有什么问题吗？如果这是衡量 OpenCL 内核性能的常见问题，您能否提出衡量它的最佳方法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:06:04.080

如果您可以访问 C++11 编译器，请考虑改用 std::chrono：[http ://en.cppreference.com/w/cpp/chrono](http://en.cppreference.com/w/cpp/chrono)

新的 C++ 标准中内置了三种时钟类型：

1.  std::steady_clock
2.  标准::系统时钟
3.  std::high_resolution_clock

此外，该库经过精心设计，可以处理不同级别的粒度，无论您想要微秒精度还是其他任何东西。对于我过去编写的软件（大型工业工程类型的模拟），我依靠 std::steady_clock 来完成我所有的计时工作，没有任何抱怨:-)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T16:24:53.890

在某些系统中，该函数`clock`将测量应用程序使用的 CPU 时间。如果您的应用程序使用 OpenCL，它可能会花费大部分时间等待显卡执行实际计算，因此`clock`不会给您“获得结果所需的实时时间”。它类似于`clock`从文件中读取数据时使用，例如 - 从文件中读取 100MB 所需的时间可能是 2 秒。但是当数据被硬盘控制器存储在内存中时，只需0.01s的CPU时间就可以将命令发送到硬盘并收集回数据。所以`clock`给出“0.01s”，而不是“2s”。

# html - iframe 内容拦截器

> ID：15574561
> 
> 赞同：0
> 
> 时间：2013-03-22T15:51:31.090
> 
> 标签：html, iframe, blocking

我正在建立一个页面，以引起人们对产品线可用零件和配件的关注，否则这些产品线将隐藏在我的网站中。零件图和检出功能始终位于我网站主要部分的同一位置，因此我将需要显示的部分放在 iFrame 中，从而限制了可查看的内容。但是，有一个部分会继续显示，因为它被设计为浮动到显示窗口的右侧。由于 iFrame 现在是显示窗口，因此这个浮动按钮会妨碍您。我正在开发的网站位于以下地址。

[http://www.snoscoot.com/fcaccessories/hondapowerequipment/test.html](http://www.snoscoot.com/fcaccessories/hondapowerequipment/test.html)

这是一个指向截图的链接，指出我需要能够消失的内容：http: [//i1193.photobucket.com/albums/aa354/pbucket10/buttontohide.jpg](http://i1193.photobucket.com/albums/aa354/pbucket10/buttontohide.jpg)

将在该 iFrame 中显示的页面始终具有“newsletter”的“div”类。有没有办法阻止某个 div “id”或“class”在 iFrame 中显示？不用担心我窃取内容或侵犯版权，这是我的网站（实际上归我工作的公司所有；我是他们的网络/代码猴子）。任何帮助将不胜感激; 我已经和这个摔跤了几天了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T17:35:33.723

Using javascript, you could use:

```
function hideID(){
document.getElementById("WhateverIdYouWantToGetRidOf").style.display="none";
} 
```

# dynamics-crm-2011 - 在自定义 HTML 弹出窗口中创建查找字段

> ID：15574564
> 
> 赞同：2
> 
> 时间：2013-03-22T15:51:42.983
> 
> 标签：dynamics-crm-2011

我创建了一个自定义 HTML 弹出窗口，我希望有一个帐户实体的查找字段，它的工作方式与常规表单上的一样。

这可能吗？如果是这样，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T00:06:14.043

自定义 HTML 不能有查找字段，因为查找字段不是 HTML 组件。但是，您可以做的是创建一组控件，它们的外观和行为都像查找。（事实上​​，这也是 CRM 中的做法——人们从未见过这种情况。）

这样做很古怪而且一点也不顺畅，因此您可能会考虑使用不完全是查找的字段（但行为类似于查找）或跳过自定义 HTML 并使用标准表单来解决它。

# shell - 如何以不同的用户身份运行“at”？

> ID：15574566
> 
> 赞同：1
> 
> 时间：2013-03-22T15:51:44.160
> 
> 标签：shell, environment-variables, sudo, su, at-job

我经常需要以不同的用户身份运行*作业*。我一直在做类似的事情

```
$ echo "$PWD/batchToRun -parameters" | sudo su - otheruser -c "at now" 
```

`batchToRun`还计划通过*otheruser*的 crontab 运行。这很有效，直到`batchToRun`开始取决于环境变量设置的微妙副作用——比如**LANG**（*排序*任何人？）——从运行的用户的环境中传入`sudo`。

我通常不想以*otheruser*身份登录；这是一个半特权帐户，我想要一个与其相关活动的“书面记录”，这样我就可以回去查看到底做了什么，由谁做的，什么时候做的等等。

除了明显的重写`batchToRun`以独立于此类设置之外，还有什么好方法可以确保 sudoer 的环境不会污染目标环境？

注意：这是在 FC7（sudo 版本 1.6.8p12）和其他旧发行版上，所以`sudo`/ `su`/的任何闪亮的新功能`at`（特别是通过 to 传递参数的能力`-i`）`sudo`都不在我的掌握范围内。

更新：事实证明，这`su - otheruser`实际上是用户之间的足够防火墙，并且我的污染来自交互式启动序列中的某些东西。不过，我仍然喜欢`env`编辑功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:33:08.900

您可以在运行之前剥离环境`at`：

```
echo "command ..." | env - PATH="$PATH" sudo su - otheruser -c "at now" 
```

您也可以`sudo`通过设置`env_reset`选项来安排为您执行此操作。例如，您可以授予您的用户`at`直接以 otheruser 身份运行命令的权限（而不是以`sudo`root 身份，然后以其他用户身份），然后使用`Defaults`该用户或该命令的命令设置 env_reset（请参阅 sudoers 手册页）。

但以上可能是最简单的解决方案，而不会改变您今天通常做事的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:58:13.350

环境的任何“污染”`otheruser`都应仅限于`at`命令环境。当实际运行时`batchToRun`，它将`otheruser`使用其典型的默认环境运行。也就是说，只有在命令`at now`生成的 shell 中运行。`su sudo`

# ios - 初始化'NSDate的不兼容指针类型

> ID：15574568
> 
> 赞同：1
> 
> 时间：2013-03-22T15:51:47.360
> 
> 标签：ios, objective-c, pointers, nsstring, nsdate

我正在设置一些常量，一个是 NSDate 但收到这条警告消息：

`NSDate *const __strong`使用类型表达式初始化的不兼容指针类型`NSString`

代码简单说明（imp文件）：

```
NSDate *const kPAPUserBirthdayKey = @"fbBirthday"; 
```

高级解释：我使用一个常量文件作为一个单例，为我写入的 API 保存常量变量。例如上面是一个日期字段，它将在连接到 Facebook 时保存 facebook 用户的生日。

然后在以下转换中使用它：

```
// Convert the DOB string into Date format
NSDateFormatter* df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"MM/dd/yyyy"];
NSDate* userDOB = [df dateFromString:user.birthday];
[[PFUser currentUser] setObject:userDOB forKey:kPAPUserBirthdayKey]; 
```

有人可以解释警告的实际含义以及此处应更改的内容吗？我在上面的最后一行得到同样的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:52:35.763

```
NSDate *const kPAPUserBirthdayKey = @"fbBirthday"; 
```

您正在为 NSDate 分配一个字符串。

更改`NSDate`为`NSString`。

**采用：**

```
NSString const *kPAPUserBirthdayKey = @"fbBirthday"; 
```

还要检查你需要什么？

[常量指针或指向常量的指针](https://stackoverflow.com/questions/10091825/constant-pointer-vs-pointer-on-a-constant-value)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:53:51.057

```
NSDate *const kPAPUserBirthdayKey                               = @"fbBirthday"; 
```

这`fbBirthday`是一个字符串而不是日期。警告是这样说的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:58:47.503

将常量的类型更改为 NSString。编译器告诉你你在不兼容的类型之间进行赋值，因为 NSString 不是 NSDate 的子类。

# c# - 图片框的可见属性在 C# 中的其他表单中不起作用

> ID：15574578
> 
> 赞同：0
> 
> 时间：2013-03-22T15:52:07.250
> 
> 标签：c#

嗨，我在 C# 中使用 Windows 窗体。我正在尝试将图片的可见属性从主窗体修改为另一个。最初，图片框的可见属性设置为 false。在从另一个窗体单击按钮时，图片框的可见属性被修改为 true。

这是用 Form2 方法编写的代码：

```
private void button_Click(object sender, EventArgs e)
{
    public Form1 frm1 = new Form1();
    frm1.pictureBox.Visible= true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:55:27.877

`Form1`是一个实例类型，所以当你这样做时

```
public Form1 frm1 = new Form1();
frm1.pictureBox.Visible= true; 
```

您实际上只是在创建一个`Form1`与原始 完全无关的新实例`Form1`，更改图片框的可见属性，然后将其丢弃。

* * *

您可以做的是`Form1`在您的`Form2`班级中引用“父母”。

这是一个例子

```
public partial class Form2 : Form
{
    public Form2(Form1 parent)
    {
        InitializeComponent();
        this.Parent = parent;
    }

    Form1 Parent;

    private void button1_Click(object sender, EventArgs e)
    {
        Parent.pictureBox.Visible= true;
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:58:20.617

在那里你创建一个表单的实例：

```
public Form1 frm1 = new Form1(); 
```

那么这显然不是您在页面中可能已经拥有的表单，您可以简单地通过其 ID 访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:11:02.923

根据您编写的代码，它将创建所需表单的新实例，而不是采用现有的打开表单。因此，要识别包含目标图片框的现有打开表单，您需要目标表单和控制表单通过父表单或 MDI 父表单相关联。假设 MDI 父窗体的情况（即控制窗体是目标窗体的 MDI 父窗体），您需要以下代码来识别现有的打开窗体：

```
foreach (Form frm in MdiChildren)
        {
            if (frm is myTargetForm)
            {
                //do your code to find control using id of picture box and change the required properties
            }

        } 
```

# d3.js - d3条形图轴对齐

> ID：15574579
> 
> 赞同：2
> 
> 时间：2013-03-22T15:52:10.417
> 
> 标签：d3.js

在绘制条形图时，我正在尝试使用[http://bl.ocks.org/mbostock/3019563中描述的边距约定。](http://bl.ocks.org/mbostock/3019563)但是，条形图与 x 轴不对齐，如您在此基本示例中所见：http: [//bl.ocks.org/kyrre/bbd29f225173825797e3](http://bl.ocks.org/kyrre/bbd29f225173825797e3)。我究竟做错了什么？

```
var data = [
            {x: "Differential Geometry", y: 10},
            {x: "Statistical Physics",   y: 5},
            {x: "Music", y: 3}
           ]

var margin = {top: 20, right: 10, bottom: 20, left: 50};

var width = 500 - margin.left - margin.right;
var height = 320 - margin.top - margin.bottom;

var y = d3.scale.linear()
          .domain([0, d3.max(data, function(x) {
              return x.y;
          })])
          .range([0, height]);

var x = d3.scale.ordinal()
          .domain(_.map(data, function(d) { return d.x;}))
          .rangeRoundBands([0, width], 0.10);

var xAxis = d3.svg.axis()
            .scale(x)
            .orient("bottom");

var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left");

var svg = d3.select("body")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var rect = svg.selectAll("rect")
              .data(data)
              .enter()
              .append("rect")
              .attr("x", function(d) {
                    return x(d.x);
              })
              .attr("y", 0)
              .attr("height", function(d) {
                  return y(d.y);
              })
              .attr("fill", function(d) { return "blue";})
              .attr("width", 20);

svg.append("g")
   .attr("class", "x axis")
   .attr("transform", "translate(0," + height + ")")
   .call(xAxis);

svg.append("g")
   .attr("class", "y axis")
   .attr("transform", "translate(0,0)")
   .call(yAxis); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T16:02:01.883

坐标从顶部开始计算`y`（即 0 位于图像顶部）。如果您设置`y`为总负高度，它应该可以工作。

```
.attr("y", function(d) { return (height - y(d.y)); }) 
```

# javascript - 如果应用程序离线，我如何使用 AngularJS 检测？

> ID：15574580
> 
> 赞同：3
> 
> 时间：2013-03-22T15:52:14.080
> 
> 标签：javascript, angularjs

我们在偏远地区有很多客户，并且经常失去连接。如何检测 javascript 应用程序是否离线？意思是无法到达服务器并加载模板。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T16:04:52.937

我终于找到了一个可以做到这一点的 JSFiddle：检查 Web 应用程序是否在线。它使用`window.navigator.onLine`.

JSFiddle：http: [//jsfiddle.net/rommsen/QY8w2/](http://jsfiddle.net/rommsen/QY8w2/)

来源：[https ://groups.google.com/d/msg/angular/ZncvSVUc9y4/S4jH1e_XgGoJ](https://groups.google.com/d/msg/angular/ZncvSVUc9y4/S4jH1e_XgGoJ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-12T14:07:11.773

```
$scope.online = $window.navigator.onLine;

$window.addEventListener("offline", function() {
    $scope.online = false;
});

$window.addEventListener("online", function() {
    $scope.online = true;
}); 
```

# android - NDK 错误：“无法解析 `.data.rel.ro.local'”

> ID：15574587
> 
> 赞同：0
> 
> 时间：2013-03-22T15:52:40.477
> 
> 标签：android, compiler-errors, android-ndk

Android/NDK 项目，使用 NDK 版本一直到 r8c。在 8d 和 8e 下，我在 armeabi-v7a 构建中收到一条编译错误消息：

```
Compile++ thumb  : myproject <= MyFile.cpp
C:\cygwin\tmp\ccFXOc2F.s: Assembler messages:
C:\cygwin\tmp\ccFXOc2F.s:1935: Error: can't resolve `.data.rel.ro.local' {.data.rel.ro.local section} - `.LPIC44' {*UND* section} 
```

同一项目的 armeabi、MIPS 和 x86 构建是成功的。

它可靠地弹出同一个文件。该文件没有什么特别之处 - vanilla C++，它可以在许多其他平台（iOS、Windows、NDK r8c 等）上编译和工作。没有 STL。不过，它确实定义了大量的字符串常量（AKA 初始化的只读数据）。会发生什么？

已经尝试过完全重建，甚至`obj`完全删除了该文件夹。

C++ 标志是：

```
LOCAL_CPPFLAGS := -fshort-wchar -fsigned-char -Wno-psabi 
```

我知道 NDK 带有多个版本的 GCC；工具链更改可能有帮助吗？具体如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:53:16.343

对我来说肯定看起来像一个编译器错误。它与对大量静态 const 数据的索引访问有关。当我稍微改写了一个完全无辜的声明时，错误消息就消失了。

以前是：

```
//In global scope
static const LPCWSTR Comments[] = {L"A lot of strings here", L"String 2", L"String 3" /* and many more */ }:

void SomeMethod()
{
    DoSomething(Comments[i]); //That was the offending line - commenting it out would get rid the error
} 
```

替换为：

```
void SomeMethod()
{
    static LPCWSTR pComments = 0;
    if(!pComments)
        pComments = Comments;

    DoSomething(pComments[i]); //Now it works.
} 
```

好可怕的东西。

# asp.net-mvc-3 - Telerik MVC 扩展网格聚合与 Ajax 绑定返回零

> ID：15574589
> 
> 赞同：1
> 
> 时间：2013-03-22T15:52:42.580
> 
> 标签：asp.net-mvc-3, telerik-mvc

好吧，我决定尝试一下 Telerik MVC Extensions v.2012.2.607.340

我在他们的网格中聚合十进制字段时遇到问题。

我正在使用 ajax 绑定。

我有一个返回 json 的动作

```
return Json(data); 
```

数据不过是一个列表。它可以毫无问题地转换为json。我的网格正在显示数据，但聚合不起作用。返回 0（零）。我在[这里按照他们的例子](http://demos.telerik.com/aspnet-mvc/razor/grid/aggregatesajax)

我去了他们的论坛/社区，但找不到任何解决方案。也许他们丢掉了球，因为他们把它变成了剑道的东西，他们为此付出了“大”的代价。

有人遇到过同样的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:33:25.150

您需要返回如下内容：

```
return Json(new { 
    Data = typeof(IEnumerable),
    Total = typeof(int),
    Aggregates = typeof(Dictionary<string, object>)
}); 
```

不过，您需要预先计算聚合。Dictionary 的键是字段的名称，其值是计算聚合。

# php - 生成错误

> ID：15574595
> 
> 赞同：0
> 
> 时间：2013-03-22T15:52:58.580
> 
> 标签：php, propel

执行时：**propel-gen om**我收到以下错误`propel-gen: 22: propel-gen: Bad substitution`。

我已经尝试升级和降级 Propel 以解决该问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:56:43.357

我终于弄明白了。我使用 SH 来运行脚本而不是 BASH。

# ios - NSDateFormatter 返回 Null

> ID：15574597
> 
> 赞同：0
> 
> 时间：2013-03-22T15:53:05.913
> 
> 标签：ios, nsdateformatter

我在一个对象上有这个方法：

```
 - (NSString *)formattedScheduledOn
  {
      NSDateFormatter *dateFormater = [[NSDateFormatter alloc] init];
      [dateFormater setDateFormat:@"MM/dd/yyyy hh:mm"];
      return [dateFormater stringFromDate:self.scheduledOn];
  } 
```

scheduleOn 是一个 NSDate 对象。将其显示为原始日期会产生类似：2013-03-22T09:44:28-07:00

但我总是从那个方法中得到 null 。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:57:10.970

确保您的日期不是`nil`. 试试下面的代码，看看你会得到什么回报

```
 NSDateFormatter *dateFormater = [[NSDateFormatter alloc] init];
  [dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
  [dateFormater setDateFormat:@"MM/dd/yyyy hh:mm"];
  return [dateFormater stringFromDate:[NSDate date]]; 
```

如果更改您将日期作为字符串传递，那么您应该根据传递的日期字符串设置格式。

```
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssz"];
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-22T15:59:32.277

为什么不做这样的事情？

将您的 datePicker 设置为选择或任何您想要的。

```
[pick addTarget:self action:@selector(updateDateLabel:) forControlEvents:UIControlEventValueChanged];

-(IBAction)updateDateLabel:(id)sender {
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateStyle:NSDateFormatterLongStyle];
    [formatter setTimeStyle:NSDateFormatterMediumStyle];
    dateLabel.text = [formatter stringFromDate:pick.date];
} 
```

# wordpress - 将 Wordpress 评论功能翻译成多种语言

> ID：15574599
> 
> 赞同：0
> 
> 时间：2013-03-22T15:53:11.520
> 
> 标签：wordpress, translation, translate, multiple-languages

我通常使用 Typo3 并且我不是一个经验丰富的 wordpress 玩家。

**启动：**
这是一个为弱视人士提供的网站（[http://www.tactuel.ch](http://www.tactuel.ch)）。
该网站是用 Wordpress 创建的。
单击右上角，用户可以在德语和法语之间切换。

**问题：**
在本网站的许多子网站上，您可以找到如下评论表：( [http://www.tactuel.ch/fr/bonjour/le-contenu-de-tactuel/](http://www.tactuel.ch/fr/bonjour/le-contenu-de-tactuel/) ) 这是本网站的法语版本。

评论表是灰色的，ID 为“comments”。

在灰色框中，您可以选择两个小“表单框”：

1.) “Benachrichtige mich über nachfolgende Kommentare via E-Mail”。
2.) “Benachrichtige mich über neue Beiträge via E-Mail”。

**除了“form-b​​oxes”旁边的那两个文本外，洞的commentform-b​​ox 已自动翻译成法语**

在后端，我没有找到任何可以配置的评论表单插件。

你知道我怎么翻译这两个文本吗？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:21:39.720

您应该查看您的主题文件夹并搜索：

*   评论模板（例如`comments.php`在 212 主题中）：搜索[`comment_form()`](http://codex.wordpress.org/Function_Reference/comment_form)函数调用，
*   并最终进入`functions.php`（因为可以使用过滤器修改评论表单）。

# c++ - 将 typeid().hash_code() 存储为 16 位整数

> ID：15574601
> 
> 赞同：0
> 
> 时间：2013-03-22T15:53:18.947
> 
> 标签：c++, hash, types, c++11, type-conversion

我想知道将 typeid().hash_code() 返回的 size_t 存储到一个恒定大小的 16 位无符号整数中是否被认为是安全的，或者这是否可能会产生冲突。执行此操作的最安全模式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T16:01:26.250

它是安全的，也可能产生碰撞。碰撞没有什么“不安全”的。碰撞只会稍微降低性能，因为如果散列发生碰撞，您必须比较更多完整的值。

不匹配的哈希码确保值无法匹配。匹配的哈希码仅意味着它们可能相同。哈希码用于减少所需的完整比较次数——您只需比较哈希码匹配的事物的值。

# android - 为什么特定设备在适用于 Android 的 Google Play 商店中标记为“不受支持”

> ID：15574602
> 
> 赞同：6
> 
> 时间：2013-03-22T15:53:19.603
> 
> 标签：android

有谁知道您如何看到为什么 Google Play 商店将您创建的应用程序的特定设备标记为“不兼容”？

我创建了一个应用程序，我的一个测试设备是 GalaxyTab2。在此设备上，当您使用 USB 电缆将 apk 放在设备上/或只是从网站下载它时，应用程序的所有功能都可以正常工作。

但是，当我将应用程序上传到 playstore 时，GalaxyTab2 被列为不受支持的设备。因此 GalaxyTab2 用户无法安装该应用程序。

在 Google Play 开发者控制台中，您可以查看不受支持的设备的概览。但您似乎无法获得“为什么”该设备不受支持的任何信息。当前列出了 1000 个设备。由于他们的Android版本太旧，其中很多将不受支持。但是从某些设备（如 GalaxyTab 2）我确信他们可以运行 apk 没问题。

我的清单的一些行：

```
<supports-screens android:smallScreens="true"
                  android:normalScreens="true"
                  android:largeScreens="true"
                  android:xlargeScreens="true" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.FLASHLIGHT" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="16" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T16:01:55.300

尝试添加：

```
<uses-feature android:name="android.hardware.camera.flash" android:required="false" />
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false" /> 
```

到你的清单。您的 FLASHLIGHT 权限可能意味着它是必需的功能，并且由于 Galaxy Tab 2 没有闪光灯，因此不兼容。正如@323go 所指出的，自动对焦也是如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T16:09:16.013

问题可能出在某些权限的功能要求上。

例如

```
<uses-permission android:name="android.permission.CAMERA" /> 
```

可能包括自动对焦的要求，所以我会尝试添加

```
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false" /> 
```

到`AndroidManifest.xml`.

还有权限

```
<uses-permission android:name="android.permission.FLASHLIGHT" /> 
```

可能包括闪存硬件的要求，所以我会添加

```
<uses-feature android:name="android.hardware.camera.flash" android:required="false" /> 
```

也是。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-28T16:40:43.860

在这里您可以找到一个列表，其中显示了暗示功能要求的所有权限

[http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-05T13:27:06.093

消除`android:allowBackup="true"`

# ruby-on-rails - RUby on rails if else 语法混乱

> ID：15574603
> 
> 赞同：0
> 
> 时间：2013-03-22T15:53:22.350
> 
> 标签：ruby-on-rails

if else 有问题——我认为这是一个语法问题，但我似乎无法理解。我使用了下面的建议，它仍然抛出 500 错误。我不知道确切的错误，因为有一条自定义错误消息，并且“a 500”是唯一给出的技术信息。是否有我可以在开发端启用的调试模式来提供更多信息？

我想要做的是显示一个下拉菜单，如果您是“DSD”则允许选择，否则下拉菜单应该被禁用，这就是我需要 IF 语句的原因。

这是我正在运行的当前 if 语句：

**更新**

```
 <% 
           if (sign_on.acctypw1.strip =="DS") 
               select_tag(:distributor_number_X,  options_for_select(distributors_array), {:style => "width:400px", :disabled => "true"}) 
           else (sign_on.acctypw1.strip =="DSD")               
               select_tag(:distributor_number_X, options_for_select(distributors_array), {:style => "width:400px" })
           end
        %> 
```

这是来自服务器日志的错误：

```
[Mon Mar 25 09:33:41 2013] [notice] caught SIGTERM, shutting down
[ pid=8710 thr=77929640 file=utils.rb:176 time=2013-03-25 09:33:42.922 ]: *** Exception SignalException in PhusionPassenger::ClassicRails::ApplicationSpawner (SIGTERM) (process 8710, thread #<Thread:0x94a3950>):
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/abstract_server.rb:343:in `select'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/abstract_server.rb:343:in `server_main_loop'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/abstract_server.rb:180:in `start'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/classic_rails/application_spawner.rb:149:in `start'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/spawn_manager.rb:219:in `block (2 levels) in spawn_rails_application'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/spawn_manager.rb:214:in `block in spawn_rails_application'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
from <internal:prelude>:10:in `synchronize'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/spawn_manager.rb:213:in `spawn_rails_application'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/spawn_manager.rb:132:in `spawn_application'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
from /usr/local/ruby/lib/ruby/gems/1.9.1/gems/passenger-3.0.1/helper-scripts/passenger-spawn-server:99:in `<main>'
[Mon Mar 25 09:35:50 2013] [notice] Apache/2.2.14 (Ubuntu) Phusion_Passenger/3.0.1 configured -- resuming normal operations
 [Mon Mar 25 10:03:31 2013] [notice] caught SIGTERM, shutting down
 [Mon Mar 25 10:03:47 2013] [notice] Apache/2.2.14 (Ubuntu) Phusion_Passenger/3.0.1 configured -- resuming normal operations 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:55:37.180

我假设这是在您的视图中（erb.html 文件）您的 if 和 else 语句也必须放在里面`<% %>`。

```
<% if sign_on.acctypw1.strip =="DS" %>
  <%= select_tag(:distributor_number_X, options_for_select(distributors_array), {:style => "width:400px", :disabled => "true"}) %>
<% else sign_on.acctypw1.strip =="DSD" %>             
  <%= select_tag(:distributor_number_X, options_for_select(distributors_array), {:style => "width:400px" })  %>
<% end %> 
```

还有一点要记住——

```
<% "This will be evaluated" %>
<%= "This will be evaluated and outputted to your view" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:55:08.383

你想使用`elsif`而不是 else 那里。

您还需要包装您`if/elsif/end`的`<% %>`标签，因为这是 ERB

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-22T16:03:12.070

```
<%= 
   if (sign_on.acctypw1.strip =="DS") 
       select_tag(:distributor_number_X,  options_for_select(distributors_array), {:style => "width:400px", :disabled => "true"}) 
   else (sign_on.acctypw1.strip =="DSD")               
       select_tag(:distributor_number_X, options_for_select(distributors_array), {:style => "width:400px" })
   end
%> 
```

# javascript - 将两个 div 并排对齐，然后将两个 div 水平和垂直居中

> ID：15574604
> 
> 赞同：1
> 
> 时间：2013-03-22T15:53:22.843
> 
> 标签：javascript, css, html

我试着环顾四周，但我真的想不出任何有用的东西。

正如标题所说，我需要将两个 div 对齐并并排居中。

```
<div id="wrapper">

<div id="dashboard" style="width: 70%;">

    <h3 id="dash" style="color:#99FF00; font-family:monospace;">

        <table style="color:#99FF00; font-family:monospace;" cellpadding="7">
            <tr>
                <td>generation</td>
                <td>1</td>
            </tr>
            <tr>
                <td>currently living</td>
                <td><p id="initial_current"></p></td>
            </tr>
            <tr>
                <td>recently newborn</td>
                <td>0</td>
            </tr>
            <tr>
                <td>recently died</td>
                <td>0</td>
            </tr>
            <tr>
                <td>recently surviving</td>
                <td>n/a</td>
            </tr>
        </table>

        <table style="color:#99FF00; font-family:monospace;" cellpadding="7">
            <tr>
                <td>total living</td>
                <td><p id="initial_total"></p></td>
            </tr>
            <tr>
                <td>total newborns</td>
                <td>0</td>
            </tr>
            <tr>
                <td>total deaths</td>
                <td>0</td>
            </tr>
            <tr>
                <td>total survived</td>
                <td>n/a</td>
            </tr>
            <tr>
                <td>the answer to life</td>
                <td>?</td>
            </tr>
        </table>
    </h3>
</div>

<div id="board" style="color:#99FF00; font-size:15pt; font-family:monospace;">
</div> 
```

基本上，“包装器”是父 div。我想将“仪表板”和“板”居中。我有 javascript 在“板”中生成文本。

我大致希望它看起来像这样：

![在此处输入图像描述](../Images/b80ed90c06f74197c21ba162432c570b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:58:00.767

使用绝对位置并声明边距如下，你很高兴

[**演示**](http://jsfiddle.net/33Fzu/1/)

```
<style>
.container {
   width: 300px;
   height: 100px;
   position: absolute;
   left: 50%;
   top: 50%;
   margin-left: -150px; /* Half of width */
   margin-top: -50px;    /* Half of height */
}

.left {
   float: left;
   width: 150px;
}

.right {
   float: right;
   width: 150px;
}
</style>

<div class="container">
    <div class="left"></div>
    <div class="right"></div>
</div> 
```

注意：不要忘记在容器 div 上使用`clear: both;`else清除浮动，目前正在使用，所以这里没有问题`overflow: hidden;``height: 100%;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T15:59:31.170

没有浮动的解决方案：http: [//jsfiddle.net/GzvJH/](http://jsfiddle.net/GzvJH/)

```
<div class="container">
   <div class="child"></div>
   <div class="child"></div>
 </div> 
```

和CSS：

```
.container{
   width: 500px;
   height: 500px;
   line-height: 500px;
   text-align:center;
   border:1px solid red;
}

.child{

   width:100px;
   height:100px;
   border:1px solid black;
   display:inline-block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:03:26.087

```
<style>
    .container {
        text-align:center;
    }
    .twocolumns {
        width:50%
        display:inline-block;
    }
</style>
<div class="container">

    <div class="twocolumns">
          <p>Look at me im in column 1</p>
    </div>

    <div class="twocolumns">
          <p>Look at me im in column 2</p>
    </div>
</div> 
```

我希望这会有所帮助！

# c# - 始终确保文本编辑器以 X 文本结尾

> ID：15574605
> 
> 赞同：0
> 
> 时间：2013-03-22T15:53:38.197
> 
> 标签：c#, winforms

我目前正在实现一个允许用户输入冗长消息的表单。对于此应用程序，用户的文本必须在末尾添加一些预设文本。

一个例子是：

`Hello, I'm a message. END`

如何在文本编辑器中添加“END”文本并强制它始终保留在文本的末尾？我想一直在那里显示它并禁止用户删除或编辑它。你知道这是否可能吗？

我最初的想法是在 TextChanged 事件上检查字符是否已经在末尾，如果不是，请删除它们。但是像这样的简单逻辑似乎必然会导致问题，我想知道是否有一种已知的方法可以做这样的事情，尽管看起来很不寻常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:08:02.743

您可以为[`KeyPress`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.keypress.aspx)事件添加处理程序，如果键表示您不想应用的编辑，则[`KeyPressEventArgs.Handled`](http://msdn.microsoft.com/en-us/library/system.windows.forms.keypresseventargs.handled.aspx)在返回之前将值设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:03:06.647

如果您需要在用户输入的文本末尾预定义文本，则在后面的代码中将该文本添加到消息末尾。使用用户很少输入的文本。喜欢`##END##`。所以你知道`##END##`是消息的结尾。当将该消息显示回编辑器子字符串消息时，直到`##END##`代码中的索引并仅向用户显示实际消息。

# python - 如何从 sqlite 表中填充 Kivy 树视图

> ID：15574607
> 
> 赞同：1
> 
> 时间：2013-03-22T15:53:41.460
> 
> 标签：python, sqlite, kivy

## 我有的

我有一个带有两个表的 sqlite 数据库。第一个有 42 项，包含 typeID、typeName、description、maxPrice 和 groupID 等字段，其中有 4 个不同的 groupID。然后还有另外 6 个左右的字段，稍后其他计算需要这些字段，但树视图不需要这些字段。第二个具有类似的结构，每个项目都有 typeID、groupID、typeName、description、price，然后是 8 个附加字段。关键是两个表都将项目集中在一起分组。

## 我想要的是

我想从这些表中的每一个填充一个[kivy 树视图。](http://kivy.org/docs/api-kivy.uix.treeview.html)groupID 字段应作为父级，所有具有该 groupID 的 typeID 应为子级。我可以硬编码，但我的数据可能会改变（并且将它们全部输入会很痛苦）所以我想保持这种动态，这样如果我的表格更新，我可以自动重新制作树视图。

## 大图

我的目标是让用户能够从从第一个表制作的树视图中选择一个项目，然后从第二个表制作的树视图中选择许多项目（包括特定项目的重复项）。我目前正在考虑这样做的方式是，当用户从第一个树视图中选择一个项目时，它会显示在其他一些小部件的顶部，然后当用户从第二个树视图中选择一个项目时，它会显示在下面该项目从第一个以及用户可以更改的数量计数器。限制是树视图 2 中所有项目的总价格不得超过树视图 1 中所选项目的 maxPrice。

一个粗略的示例如下所示：

```
Item 3 from Tree View 1 maxPrice 10000
Item 1 from Tree View 2 price 1000 Qty 2
Item 3 from Tree View 2 price 3000 Qty 1
Item 4 from Tree View 2 price 500 Qty 4
Item 9 from Tree View 2 price 1000 Qty 2
price remaining 1000 
```

在此示例中，价格为 (2*1000)+(1*3000)+(4*500)+(2*1000)=9000，低于 Tree View 1 中项目 3 的 maxPrice 10000，因此可以. 例如，如果用户现在尝试将第 3 项的数量从树视图 2 更改为 2，它应该显示剩余价格为 -2000（并且可能将其更改为红色或其他东西以使其突出。）

一旦我让两个树视图启动并运行，我想我可以弄清楚如何让其余的工作（或者我会发布另一个问题！）我只是想提供这个“大图”看看我的最终目标帮助为我的问题提供一些背景信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T05:07:26.210

我已经为此奋斗了几个小时，终于得到了一些大致有效的东西！我仍然很想听听如何简化它。此外，它在屏幕上相当笨拙，带有大按钮且没有滚动条（因此，当您打开一些子树时，树会从屏幕底部移出，您无法到达它。）哦，这就是 jsut对于我想要制作的两个树视图中的第二个，但它更难，所以另一个应该很容易从中制作。除了这些免责声明，这里是代码：

```
from kivy.uix.floatlayout import FloatLayout
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.widget import Widget
from kivy.uix.treeview import TreeView, TreeViewNode
from kivy.uix.treeview import TreeViewLabel
from kivy.app import App
from kivy.properties import ObjectProperty, StringProperty
from kivy.uix.button import Button
import sqlite3
import os

POSdb = "C:\Users\User\Path\To\My\Database.db"

class TreeViewButton(Button, TreeViewNode):
    pass

modGroups = []
modItems = []
modDict = dict()
modDictUnique = dict()

def populate_tree_view(tv):
    conn = sqlite3.connect(POSdb)
    conn.row_factory = sqlite3.Row
    c = conn.cursor()
    c.execute('select * from ModuleTable')
    r = c.fetchall()
    for entry in r:
        modGroups.append(entry['groupID'])
        modItems.append(entry['typeName'])
    modDict = zip(modGroups, modItems)
    for k, v in modDict:
        if k not in modDictUnique:
            modDictUnique[k] = [v]
        else:
            modDictUnique[k].append(v)
    sortedGroups = modDictUnique.keys()
    sortedGroups.sort()
    #print modItems
    #print modDictUnique
    n = tv.add_node(TreeViewLabel(text='POS Mods', is_open=True))
    for group in sortedGroups:
        g = tv.add_node(TreeViewLabel(text='%s' % group), n)
        for item in modDictUnique[group]:
            tv.add_node(TreeViewButton(text='%s' % item), g)

class POSFM(FloatLayout):
    def __init__(self, **kwargs):
        super(POSFM, self).__init__(**kwargs)

        tv = TreeView(root_options=dict(text='Tree One'),
                      hide_root=True,
                      indent_level=4)

        populate_tree_view(tv)

        self.add_widget(tv)

class POSFMApp(App):

    def build(self):
        return POSFM()

if __name__ == '__main__':
    POSFMApp(width=800).run() 
```

# html - 使用伪元素（：after，：before）与填充/背景定位的优点/缺点？

> ID：15574608
> 
> 赞同：3
> 
> 时间：2013-03-22T15:53:42.940
> 
> 标签：html, css, background, pseudo-element, css-content

我正在使用我正在使用的网站上挖掘一些旧代码**[iconize](http://pooliestudios.com/projects/iconize/)。**它似乎工作的方式是添加这样的类......

```
a[href=$='.pdf']{
    padding: 5px 20px 5px 0;
    background: transparent url('icon.gif') no-repeat center right;
} 
```

这样做比我这样做有什么好处吗？像这样的东西...

```
a[href=$='.pdf']:after{
    content: url('icon.gif');
    vertical-align: sub;
} 
```

这是一个演示它们的小提琴......

[JSFiddle](http://jsfiddle.net/ZBN5f/2/)

我的问题是......使用伪元素与标准填充和背景定位将图像附加/附加到元素有什么好处（如果有的话）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T16:11:10.920

只是一些最初和后来的想法。我可能还想再补充一些。

## 填充/背景

**好处）：**

1.  适用于 IE6-7（即旧版浏览器）。
2.  如果想要将图标与文本重叠，[特别是如果 centered](http://jsfiddle.net/ZBN5f/9/)，这将更容易实现。

**缺点：**

1.  实施需要更多的思考（必须计算一些因素）。
2.  对于较旧的浏览器，仅支持一种背景，因此如果需要另一种背景，则需要解决冲突。
3.  如果浏览器设置为不打印背景图像，则打印文本中仍将存在填充的“间隙”，但不会存在图像。这可以通过印刷媒体 css 解决。

## 伪元素

**好处）：**

1.  更容易实现（无需计算）。
2.  [如果需要，它可以有自己的`padding`, `border`,`opacity`等应用](http://jsfiddle.net/ZBN5f/4/)，就好像它是一个真实的元素一样。
3.  与 #2 相关，如果需要或需要，它实际上可以[移动到元素之外。](http://jsfiddle.net/ZBN5f/6/)
4.  从语义上讲，它正在以更合适的方式实施。图标并不是真正的“背景”，但它也不是内容`img`可能是 html 的重要组成部分，因此伪元素适合增强演示文稿的功能，但如果丢失也不会引起问题（在较旧的浏览器）。
5.  在 CSS3 浏览器（可能还有 CSS2）中，通常可以使用更少的代码在右对齐或左对齐图标之间切换（参见下面的“关于代码长度的讨论”）。

**缺点：**

1.  每个元素只允许一个（每种类型），所以如果元素上的其他东西需要它，那么你可能会发生冲突。
2.  旧浏览器不支持。
3.  某些元素（[替换元素](https://stackoverflow.com/tags/pseudo-element/info)）不能采用伪元素，因此这甚至不是一个选项。

## 关于代码长度的讨论

[EHLOVader](https://stackoverflow.com/users/704765/ehlovader)在对该问题的评论中指出，他的部分担忧是伪元素可能需要额外的编码，而不是如果想要切换到左侧图标的背景/填充。他给出了[这个 codepen 的例子](http://codepen.io/anon/full/Fwqlp)。但是，可以用更少的代码来做一个伪元素。假设`.iconleft`是一个用于将图标放在左边而不是右边`.iconit`的类，以及完全设置图标的类，那么下面的代码简洁地使得使用选择器**的 CSS3 浏览器**`:not()`发生这种情况（[这里是小提琴](http://jsfiddle.net/ZBN5f/11/)，使用的原始`.pseudo`类OP用于图标）：

```
.iconit:not(.iconleft):after,
.iconit.iconleft:before {
    content: url('http://www.jasonapollovoss.com/web/wp-content/uploads/2010/09/pdf_icon_small.png');
    vertical-align: sub;
} 
```

如果一个类用于显式地将图标设置在右侧或左侧（那时不需要类） **，CSS2 浏览器**也可以这样做：`iconright``iconleft``iconit`

```
.iconright:after,
.iconleft:before {
    content: url('http://www.jasonapollovoss.com/web/wp-content/uploads/2010/09/pdf_icon_small.png');
    vertical-align: sub;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T09:49:18.480

使伪类如此有用的原因在于它们允许您动态设置内容样式。在上面的示例中，我们能够描述用户与链接交互时链接的样式。正如我们将看到的，新的伪类允许我们根据内容在文档中的位置或其状态来动态设置内容样式 阅读更多[http://coding.smashingmagazine.com/2011/03/30/how-to-use -css3-伪类/](http://coding.smashingmagazine.com/2011/03/30/how-to-use-css3-pseudo-classes/)

# javascript - 如何在 xml 属性中获取字符串

> ID：15574610
> 
> 赞同：-1
> 
> 时间：2013-03-22T15:53:47.230
> 
> 标签：javascript, jquery, xml, regex, xhtml

```
<z:row ows_Title='What does UFO stand for?'
 ows_Body='<div class="ExternalClassAA6E0BD0783B483F81A1B5E0C8DF15A5">
              <p>Unidentified Flying Object.​&lt;/p></div>' /> 
```

如果我`var width=$(this).attr("ows_MetaInfo");`在 $(this) 指向 z:row 节点的地方做，我会得到 while 标记。我只想获取段落标签“不明飞行物”中的值

正则表达式是一种选择吗？谢谢你看看..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T15:55:47.920

据我所知，正则表达式不需要。您可以简单地尝试以下方法：

```
var p = $($(this).attr("ows_Body")).find("p").text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T15:55:36.153

使用 div 的`innerText`or`textContent`属性。

```
<div id="my-div">
    Flying UFOs
</div>

var d = document.getElementById('my-div');
alert(d.innerText); 
```

# php - php中成本值的点和逗号之间的差异

> ID：15574618
> 
> 赞同：1
> 
> 时间：2013-03-22T15:54:01.943
> 
> 标签：php, currency

我的客户（来自丹麦）在 php 中给出了在成本值中使用的值。

他说：“使用这个，成本是 50.000 Dkr 半成品，200.000 Dkr. 完整产品。”

我对逗号和点感到困惑？什么是正确的值？它的 50,000 或 50,000。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:58:22.617

这不是编码问题

英文约定中使用逗号分隔千位（50,000 = 五万。50.000 = 五十点零零零）

在欧洲大陆，逗号用作小数分隔符（50,5 = 五十个半​​）

请在下一个问题之前做一些研究。这个很容易回答[here](http://en.wikipedia.org/wiki/Decimal_mark)

# c++ - 如何解决将未知大小的二维数组传递给函数的问题？

> ID：15574620
> 
> 赞同：2
> 
> 时间：2013-03-22T15:54:04.940
> 
> 标签：c++, arrays, pointers, parameter-passing, multidimensional-array

我有一个程序，其中对象数组的大小是在运行时确定的，因此它是动态分配的（二维数组，从文件中读取）。我还有一个将这些对象作为参数的函数。问题是如果函数参数是传递给函数的二维数组，则应确定第二维。但是，就我而言，事实并非如此。我的程序无法编译，因为原型没有提到第二维。

这是我尝试过的：

```
//global variables
int residentCount=0;
int hospitalCount=0;
Resident** residents;
Hospital** hospitals;
bool readFromFiles(const string, const string, const int); //sizes are determined in here
void print(Hospital*[hospitalCount], Resident*[residentCount]); //declaration issue 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T16:19:57.843

***您正在使用 C++ 编程，因此您应该：***

*   尽可能避免动态分配和自行处理内存管理
    *   而是利用具有自动存储持续时间的对象，遵循[RAII 习惯用法](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)
*   避免使用 C 风格的数组，实际上避免编写通常可以编译为 C++ 的 C 代码
    *   使用 C++ 提供的强大功能，尤其是捆绑在 STL 中的功能
*   当本地等价物足够时避免使用全局变量

这就是它的样子：

```
typedef std::vector<Resident> Residents;
typedef std::vector<Hospital> Hospitals;

// passing by const reference:
void print(const std::vector<Hospitals>&, const std::vector<Residents>&);

int main()
{
    std::vector<Hospitals> hospitals;
    std::vector<Residents> residents;
    ...
} // <-- lifetime of automatics declared within main ends here 
```

请注意`hospitals`和`residents`将是具有自动存储持续时间的对象，其使用方式与您的 C 样式 2D 数组类似。当执行超出 的范围时`main`，这些向量将被破坏并自动清理其元素（包括其元素的元素）之前所在的内存。

另请注意，我建议您通过 const 引用传递，即`const std::vector<Hospitals>&`，这可以防止创建传递对象的副本，并且`const`关键字明确告诉调用者：*“尽管您通过引用传递此对象，但我不会更改它。”*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T16:07:57.830

只需将指针传递给数组的第一个元素和维度，就足够了，例如：

```
void PrintHospitals(Hospital* Hospitals, size_t HospitalRows, size_t HospitalColumns)
{
  size_t i, j;
  Hospital* hospital;

  for (i = 0; i < HospitalRows; i++)
    for (j = 0; j < HospitalColumns; j++)
    {
      hospital = Hospitals + HospitalColumns * i + j;
      PrintHospital(hospital);
    }
}

int main()
{
  Hospital hospitals[10][20];
  // ...
  PrintHospitals(&hospitals[0][0], 10, 20);
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:45:28.863

这是一个使用模板为现有数据创建二维数组包装器的解决方案：

```
template<typename T>
class Array2d {
  public:
  int Rows;
  int Cols;
  T** Data;

  Array2d(int rows, int cols, T** data) :
    Rows(rows),
    Cols(cols),
    Data(data) { }
};

void print(Array2d<Hospital> h, Array2d<Resident> r) {
  for (int i = 0; i < h.Rows; i++) {
    for (int j = 0; j < h.Cols; j++) {
      //Print Data[i][j] element here
    }
  }
  // Other print code
}

int main()
{
   Resident** residents;
   Hospital** hospitals;

   //Init data arrays

   Array2d<Hospital> h(10, 10, hospitals);
   Array2d<Resident> r(10, 10, residents);

   print(h, r);
} 
```

# c# - 如何在 WCF 服务调用中忽略区分大小写的属性名称？

> ID：15574621
> 
> 赞同：2
> 
> 时间：2013-03-22T15:54:08.470
> 
> 标签：c#, javascript, wcf

您好，我想知道从客户端调用 WCF 方法的可能性，什么会忽略区分大小写的属性名称（在客户端，我使用小写属性名称的 JSON，但在服务器端使用大写）。在这种情况下，WCF 无法映射属性。是否可以使用一些 WCF 属性等？

```
 public interface IMyWCF
    {
        [OperationContract]
        [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.WrappedRequest, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
        bool UpdateUser(User user);

}
    [Serializable]
    [DataContract]
    public class User : ICloneable  
    {
        [DataMember]
        [JsonProperty(PropertyName = "login")]
        [StringLength(40, ErrorMessage = "The Login value cannot exceed 40 characters. ")]
        [DefaultValue("")]
        public String Login { get; set; }

        [DataMember]
        [JsonProperty(PropertyName = "id")]
        public int UserId { get; set; }
 } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T16:20:05.220

您可以使用`Name`属性的`[DataMember]`属性来映射属性名称：

```
[DataContract]
public class User : ICloneable  
{
    [DataMember(Name = "login")]
    [JsonProperty(PropertyName = "login")]
    [StringLength(40, ErrorMessage = "The Login value cannot exceed 40 characters. ")]
    [DefaultValue("")]
    public String Login { get; set; }

    [DataMember(Name = "id")]
    [JsonProperty(PropertyName = "id")]
    public int UserId { get; set; }
} 
```

*更新以下评论*：没有任何旋钮可用于在 WCF 使用的默认序列化程序上启用不区分大小写的反序列化。不过，有一些选择（不理想）。您可以将序列化程序更改为使用 JSON.NET（可以这样做，请参阅[此博客文章](http://blogs.msdn.com/b/carlosfigueira/archive/2011/05/03/wcf-extensibility-message-formatters.aspx)，但不是很容易）并使用该序列化程序中的序列化程序设置来忽略大小写。我认为您还应该能够添加其他属性（可以是私有的，除非应用程序在部分信任下运行），以映射其他支持的案例；类似于下面的代码：

```
[DataContract]
public class User
{
    [DataMember]
    public String Login { get; set; }
    [DataMember]
    private String login { get { return this.Login; } set { this.Login = value; } }

    [DataMember]
    public int UserId { get; set; }
    [DataMember]
    private int id { get { return this.UserId; } set { this.UserId = value; } }
} 
```

# c# - 在字符串列表中合并同一对象的 2 个列表

> ID：15574625
> 
> 赞同：0
> 
> 时间：2013-03-22T15:54:24.437
> 
> 标签：c#, linq

我有一个对象`Object1`和这个对象的两个列表：

```
public class Object1
{
    public TimeSpan? Time { get; set; }
    public List<string> Parameters { get; set; }
}

List<Object1> List1 = List<Object1>();
List<Object1> List2 = List<Object1>(); 
```

现在，我想合并这两个列表，但这应该发生在`Parameters`对象内的列表上。（此列表中的每个字符串组合只能出现一次。）如果`Parameters`List1 和 List2 中都存在相同的字符串，则 List1中的字符串`Time`应该被 List2 中的字符串覆盖。

例如：

```
List1:               List2:
 Parameters   Time    Parameters   Time
 1;1          null    1;1          1:20
 1;2          null    1;2          0:51
 1;3          null
 2;5          0:30

Result:
 Parameters   Time
 1;1          1:20
 1;2          0:51
 1;3          null
 2;5          0:30 
```

这可能可以通过使用 for 循环来实现，但由于列表可能会变得非常大，因此它的性能可能不会那么好。

我已经尝试使用以下代码来执行此操作，但这似乎只是连接列表。

```
var query = List1.Concat(List2)
 .GroupBy(x => x.Parameters)
 .Select(g => g.OrderByDescending(x => x.Time).First())
 .ToList(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:19:35.080

我的解决方案使用 LINQ 和自定义的 Comparer 实例来比较 Parameters 成员，并对 Parameters 中的项目做出一些假设。但是，如果这些假设是正确的，您可以通过使用像[Max's answer](https://stackoverflow.com/a/15575922/516740 "麦克斯的回答")中建议的 Param 属性来简化实现。这是它的要点：

```
private static List<Object1> MergeLists(List<Object1> list1, List<Object1> list2)
{
    var parameterComparer = new ParameterComparer();

    var distinctParameters = list1.Select(o => o.Parameters)
        .Concat(list2.Select(o => o.Parameters))
        .Distinct(parameterComparer);

    return (from p in distinctParameters
            let o1 = list1.SingleOrDefault(o => parameterComparer.Equals(p, o.Parameters))
            let o2 = list2.SingleOrDefault(o => parameterComparer.Equals(p, o.Parameters))
            let result = o2 ?? o1
            select result).ToList();
} 
```

这是一个更完整的测试驱动答案。首先，Object1 声明——我添加了一个辅助构造函数以使声明更简洁：

```
public class Object1
{
    public TimeSpan? Time { get; set; }
    public List<string> Parameters { get; set; }

    public Object1(TimeSpan? time, params string[] parameters)
    {
        Time = time;
        Parameters = parameters.ToList();
    }
} 
```

接下来是测试方法。我定义了 Object1Comparer 以使测试的实现更简单——解决方案不需要它。

```
[TestMethod]
public void MergeListsTest()
{
    // Arrange
    var list1 = new List<Object1>
                    {
                        new Object1(null, "1", "1"),
                        new Object1(null, "1", "2"),
                        new Object1(null, "1", "3"),
                        new Object1(new TimeSpan(0, 0, 30), "2", "5")
                    };
    var list2 = new List<Object1>
                    {
                        new Object1(new TimeSpan(0, 1, 20), "1", "1"),
                        new Object1(new TimeSpan(0, 0, 51), "1", "2"),
                    };
    var expected = new List<Object1>
                        {
                            new Object1(new TimeSpan(0, 1, 20), "1", "1"),
                            new Object1(new TimeSpan(0, 0, 51), "1", "2"),
                            new Object1(null, "1", "3"),
                            new Object1(new TimeSpan(0, 0, 30), "2", "5")
                        };

    // Act
    List<Object1> actual = MergeLists(list1, list2);

    // Assert
    // Note: need to order the actual result to use CollectionAssert.AreEqual()
    List<Object1> orderedActual = actual.OrderBy(o => string.Join(";", o.Parameters)).ToList();
    CollectionAssert.AreEqual(expected, orderedActual, new Object1Comparer());
}

public class Object1Comparer : IComparer, IComparer<Object1>
{
    public int Compare(Object1 x, Object1 y)
    {
        if (x.Time == null && y.Time == null) return 0;
        if (x.Time == null || y.Time == null) return -1;
        int timeComparison = TimeSpan.Compare(x.Time.Value, y.Time.Value);
        if (timeComparison != 0) return timeComparison;

        if (x.Parameters == null && y.Parameters == null) return 0;
        if (x.Parameters == null || y.Parameters == null) return -1;
        if (x.Parameters.SequenceEqual(y.Parameters)) return 0;
        return -1;
    }

    public int Compare(object x, object y)
    {
        if (x is Object1 && y is Object1)
            return Compare(x as Object1, y as Object1);
        return -1;
    }
} 
```

最后，这是 MergeLists 的实现：

```
public class ParameterComparer : IEqualityComparer<List<string>>
{
    public bool Equals(List<string> x, List<string> y)
    {
        if (x == null && y == null) return true;
        if (x == null || y == null) return false;

        return x.SequenceEqual(y);
    }

    public int GetHashCode(List<string> obj)
    {
        if (obj == null) throw new ArgumentNullException("obj");

        // Note: this is not a safe way to get a hash code,
        // but if you're sure that the members are always ordered
        // and will never contain a semi-colon, then it will work.
        return string.Join(";", obj).GetHashCode();
    }
}

private static List<Object1> MergeLists(List<Object1> list1, List<Object1> list2)
{
    var parameterComparer = new ParameterComparer();

    var distinctParameters = list1.Select(o => o.Parameters)
        .Concat(list2.Select(o => o.Parameters))
        .Distinct(parameterComparer);

    return (from p in distinctParameters
            let o1 = list1.SingleOrDefault(o => parameterComparer.Equals(p, o.Parameters))
            let o2 = list2.SingleOrDefault(o => parameterComparer.Equals(p, o.Parameters))
            let result = o2 ?? o1
            select result).ToList();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:57:22.447

像这样修改你的 Object1

```
public class Object1
{
    public Object1()
    {
        this.Parameters = new List<string>();
    }

    public TimeSpan? Time { get; set; }

    public List<string> Parameters { get; set; }

    public string Param
    {
        get
        {
            return string.Join(",", this.Parameters.OrderBy(o => o).ToArray());
        }

    }
} 
```

像这样修改您的查询

```
var query = list1.Concat(list2)
             .GroupBy(x => x.Param) // <- Changed with the new properties
             .Select(g => g.OrderByDescending(x => x.Time).First())
             .ToList(); 
```

最大限度

# r - 根据列的百分比检查列值并打印/删除满足条件的行

> ID：15574630
> 
> 赞同：1
> 
> 时间：2013-03-22T15:54:41.687
> 
> 标签：r, if-statement, for-loop, rows

我有一个值矩阵，每行排列在不同的列中。我希望我的代码做什么：

1.  遍历一行 -> 检查列的值是否 < 阈值（例如 1）
2.  在该行内，如果有 80% 的列满足该条件，则保留该行；否则删除整行。

到目前为止的代码：

```
myfilt <- function(t,x){
             if ((length(which(t[x,] > 1)) / 60) >= 0.8){
               return(1)
             }else{
               return(0)
             }
          }

y=c()
for(i in 1:length(t[,1])){
   y = c(y,myfilt(t,i))
} 
```

但是当我打印`t[v,]`所有行具有相同的值时:(不知道我做错了什么。另外，如果有更短的方法可以做到这一点，请告诉我。

PS：这里的't'是我正在测试的矩阵的名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:02:42.553

这是一种方法：

```
## Parameters
threshold <- 0.8
perc.to.keep <- 0.5
## Example Matrix
set.seed(1337)
m <- matrix(rnorm(25,1,1),nrow=5,ncol=5)

#           [,1]      [,2]        [,3]       [,4]      [,5]
# [1,] 1.7122837 0.8383025 -0.02718379  2.2157099 2.1291008
# [2,] 0.2462742 2.4602621 -0.04117532 -0.6214087 1.4501467
# [3,] 1.0381899 3.0094584  0.12937698  0.9314247 1.0505864
# [4,] 2.1784211 0.9220618  1.85313022  0.9370171 0.8756698
# [5,] 0.8467962 2.3543421  0.37723981  2.0757077 1.9120115

test <- m < threshold
sel <- apply(test,1,function(v) sum(v)/length(v)) < perc
m[sel,]

#           [,1]      [,2]        [,3]      [,4]      [,5]
# [1,] 1.7122837 0.8383025 -0.02718379 2.2157099 2.1291008
# [2,] 1.0381899 3.0094584  0.12937698 0.9314247 1.0505864
# [3,] 2.1784211 0.9220618  1.85313022 0.9370171 0.8756698
# [4,] 0.8467962 2.3543421  0.37723981 2.0757077 1.9120115 
```

# excel - Excel vba 无法获取 Vlookup 属性

> ID：15574632
> 
> 赞同：1
> 
> 时间：2013-03-22T15:54:51.660
> 
> 标签：excel, vba

我知道这里有很多这样的问题，但我看不出哪里出了问题。

我有以下代码检查值是否在另一个工作簿的列中。

```
Dim masterWbk As Workbook
Dim oWbk As Workbook
Dim RowCount As Integer
Dim LookupRange As Range
Dim Exists As Variant
Dim a As Integer
Dim i As Integer
Dim jobnumber As String

    RowCount = WorksheetFunction.CountA(Sheets("Sheet1").Range("A1").EntireColumn)

    masterWbk.Activate

Set LookupRange = masterWbk.Sheets("Sheet1").Range("C1:C100")

    a = 0

    For i = 0 To RowCount - 1

        jobnumber = oWbk.Sheets("Sheet1").Range("A2").Offset(i, 0).Value

      '  On Error GoTo ExistsError:

        Exists = Application.WorksheetFunction.VLookup(jobnumber, LookupRange, 1, False) 
```

现在该值肯定在查找范围内，并且格式相同，但 Vlookup 不起作用。它作为一个excel公式工作得很好。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:10:06.003

使用 find 它看起来像这样 -

```
Dim masterWbk As Workbook
Dim oWbk As Workbook
Dim RowCount As Integer
Dim LookupRange As Range
Dim Exists As Variant
Dim a As Integer
Dim i As Integer
Dim jobnumber As String

    RowCount = WorksheetFunction.CountA(Sheets("Sheet1").Range("A1").EntireColumn)

    masterWbk.Activate

Set LookupRange = masterWbk.Sheets("Sheet1").Range("C1:C100")

  a = 0

  For i = 0 To RowCount - 1

  jobnumber = oWbk.Sheets("Sheet1").Range("A2").Offset(i, 0).Value
  If Trim(jobnumer) <> "" Then
    With lookuprange
        Set Rng = .Find(What:=jobnumber, _
                        After:=.Cells(.Cells.Count), _
                        LookIn:=xlValues, _
                        LookAt:=xlWhole, _
                        SearchOrder:=xlByRows, _
                        SearchDirection:=xlNext, _
                        MatchCase:=False)
        If Not Rng Is Nothing Then
            Exists = 1
        Else
            Exist = 0
        End If
    End With
  End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:18:43.073

我认为`WorksheetFunction.Vlookup`. 在我对 Excel 2007 的测试中，如果找到搜索字符串，则返回相应单元格的值。如果您搜索完全匹配，您会得到可怕的错误 1004。

如果你想使用 Vlookup，

```
...

Dim FoundText as String

...

FoundText=""

On Error Resume Next

FoundText=Application.WorksheetFunction.VLookup(jobnumber, LookupRange, 1, False)

On Error Goto 0

Exists= (FoundText <> "")

... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:42:18.087

这似乎在 Excel 2010 中工作正常......

我建议您使用 VLOOKUP 可能会出错，因为您已将尺寸标注`jobNumber`为字符串，并且尽管工作表/单元格“格式化”，但工作表中的作业编号可能存储为数值。

所以，问题在于“123”<> 123。测试 jobNumber 是否为数字，然后确保将正确类型的数据传递给函数。

```
If IsNumeric(jobNumber) Then
    Exists = Application.WorksheetFunction.VLookup(CLng(jobNumber), lookupRange, 1, False)
Else:
    Exists = Application.WorksheetFunction.VLookup(jobNumber, lookupRange, 1, False)
End If 
```

# c++ - 在 C++ 中返回向量是否追加？

> ID：15574634
> 
> 赞同：0
> 
> 时间：2013-03-22T15:55:07.900
> 
> 标签：c++, vector

我正在使用 C++ 中的向量，我想出了以下我不太了解的 MWE：

```
#include <iostream>  
#include <vector>

using namespace std;

vector<double> pb()
{
    vector<double> a;
    a.push_back(1);
    a.push_back(2);
    a.push_back(3);
    return a;
}

int main()
{
    vector<double> asd;
    asd = pb();
    cout << asd.size() << endl;

    asd = pb();
    cout << asd.size() << endl; //WHY DOES THIS GIVE 3, AND NOT 6? asd HAS NOT BEEN EMPTIED AT ANY POINT

    return 0;
} 
```

我不明白为什么我的向量`asd`每次调用时都会“初始化” `pb()`。我所期望的是，调用`pb()`只会附加到`asd`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:56:41.873

在函数中`pb`，您创建一个新向量并将三个项目推入其中，然后将其返回。然后将其复制到`asb`您的`main`函数中并删除旧内容。

该函数如何`pb`知道它应该附加到向量中？它没有。您必须将其传递给函数。

```
void pb(std::vector<double>& a)
{
    // Push back items...
}

int main()
{
    std::vector<double> asd;

    pb(asd);

    // ...
} 
```

如您所见，我将函数更改为*不*返回向量。相反，它作为*参考*参数传递。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T15:56:56.263

它不是每次都“初始化”；它使用函数调用的结果重新分配，其中包含 3 个项目。旧内容在重新分配时会被销毁。

如果要追加，请使用`append`成员函数而不是重新分配。或者，传递对函数的引用并附加到该函数，而不是新向量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T15:57:09.953

长话短说，这应该会给你你想要的答案：

```
vector<double> pb(vector<double> &a)
{
    a.push_back(1);
    a.push_back(2);
    a.push_back(3);
}

int main()
{
    vector<double> asd;
    pb( asd );
    cout << asd.size() << endl;

    pb( asd );
    cout << asd.size() << endl; //WHY DOES THIS GIVE 3, AND NOT 6? asd HAS NOT BEEN EMPTIED AT ANY POINT

    return 0;
} 
```

**更长的故事：** 每次调用`pb()`呈现的原始代码版本时，您都会*创建一个新* `std::vector`版本，然后推送到该新版本`vector`。`pb()`返回后，`asd`将*分配*给新创建的 & 填充`vector`，而不是附加到。

# winapi - 事后测量进程峰值内存使用情况

> ID：15574638
> 
> 赞同：0
> 
> 时间：2013-03-22T15:55:13.113
> 
> 标签：winapi

我正在开发一个基准工具，其中包括测量执行操作的外部进程使用的时间和内存。我最感兴趣的是峰值可分页内存大小（又名 PageFileBytesPeak 性能计数器 / Process.PeakPagedMemorySize64 / 峰值私有字节）。这是一个 .NET 项目，因此最好使用纯 .NET 解决方案，但这很可能是不可能的。

这里的问题是在进程退出之前我不会知道峰值内存使用量。当进程不再存在时，我无法读取进程的性能计数器。所以我可以在进程运行时轮询它。

但是，这并不可取，因为如果我轮询太频繁，我会干扰进程完成其工作所需的时间，如果轮询太少，结果将不准确（该进程很可能会达到其内存使用峰值就在它退出之前）。所以我希望有一些方法可以可靠地做到这一点，它比我迄今为止提出的解决方案更简单：

1.  将DLL注入进程，通过DLL_PROCESS_DETACH上的IPC机制报告值。
2.  目标进程中的Patch/Hook ExitProcess，在执行真正的ExitProcess之前通过IPC机制上报值。
3.  假装是调试器，测量 EXIT_PROCESS_DEBUG_EVENT 上的值（在调用 ContinueDebugEvent 之前，内核不会清理该进程）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:06:28.837

读取现存的 PerfMon 计数器应该是一个非常低开销的操作，尤其是。对于您想要使用的系统计数器，因为计数器通常（可能总是？不确定）使用共享内存块（映射文件）实现。

我会使用运行时可配置的时间间隔来实现轮询，并且只有在您发现这对您的应用程序产生重大影响时才使用更复杂的技术。如果您想首先对此进行全面检查，请设置 PerfMon 以监视感兴趣的计数器，并查看在以可用刷新间隔运行时是否会杀死您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T16:55:37.567

事实证明，只要您有一个活动句柄，即使在进程退出后[GetProcessMemoryInfo也可以工作。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683219%28v=vs.85%29.aspx)如果您碰巧需要，虚拟内存使用情况不可用这种方式。

唯一需要注意的是，值的大小取决于调用它的进程的位数，因此如果 32 位进程测量 64 位进程的内存使用情况，这些值可能会溢出。

例子：

```
[DllImport("psapi.dll", SetLastError=true)]
static extern bool GetProcessMemoryInfo(IntPtr hProcess, out PROCESS_MEMORY_COUNTERS counters, int size);

[StructLayout(LayoutKind.Sequential)]
private struct PROCESS_MEMORY_COUNTERS
{
    public uint cb;
    public uint PageFaultCount;
    public UIntPtr PeakWorkingSetSize;
    public UIntPtr WorkingSetSize;
    public UIntPtr QuotaPeakPagedPoolUsage;
    public UIntPtr QuotaPagedPoolUsage;
    public UIntPtr QuotaPeakNonPagedPoolUsage;
    public UIntPtr QuotaNonPagedPoolUsage;
    public UIntPtr PagefileUsage;
    public UIntPtr PeakPagefileUsage;
}

public long BenchmarkProcessMemoryUsage(string fileName, string arguments)
{
    ProcessStartInfo startInfo = new ProcessStartInfo(fileName, arguments);
    startInfo.UseShellExecute = false;
    Process process = Process.Start();
    process.WaitForExit();
    PROCESS_MEMORY_COUNTERS counters;
    if (!GetProcessMemoryInfo(process.Handle, out counters, Marshal.SizeOf(typeof(PROCESS_MEMORY_COUNTERS))))
        throw new System.ComponentModel.Win32Exception(Marshal.GetLastWin32Error());
    return (long)counters.PeakPagefileUsage;
} 
```

# bash - 在带有变量和正则表达式的 for 循环中使用 sed

> ID：15574641
> 
> 赞同：1
> 
> 时间：2013-03-22T15:55:19.507
> 
> 标签：bash, for-loop, sed

我正在尝试构建一个脚本，其中一部分利用“sed”将文件名标记到该文件中每一行的末尾，然后将输出转储到主列表。给我带来麻烦的脚本部分在这里是 sed：

```
DIR=/var/www/flatuser
FILES=$DIR/*
for f in $FILES
do
    echo "processing $f file...."
    sed -i "s/$/:$f/" $f
    cat $f >> $DIR/master.txt
done 
```

问题是“sed”语句在 for 循环之外工作正常，但是当我将它放在脚本中时，我相信它在解释美元符号时遇到了问题。我已经尝试了几乎所有我能想到的 " 和 ' 组合来解释变量，并且它不断地将 "$f" 放在每行的末尾，或者完全失败。

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T16:00:11.323

您只需要转义美元符号：

```
sed -i "s/\$/:$f/" "$f" 
```

以便外壳将其逐字传递给`sed`.

扩展 Charles Duffy 关于引用变量的观点：

```
DIR=/var/www/flatuser
for f in "$DIR"/*
do
    echo "processing $f file...."
    sed -i "s/\$/:${f##*/}/" "$f"
    cat "$f" >> "$DIR/master.txt"
done 
```

如果任何文件名包含空格，那么如果将文件名列表分配给`$FILES`;则为时已晚。您无法再区分属于文件名的空格和分隔文件名的空格。您可以改用数组，但将 glob 直接放在 for 循环中会更简单。以下是使用数组的方法：

```
DIR=/var/www/flatuser
FILES=( "$DIR"/* )
for f in "${FILES[@]}"
do
    echo "processing $f file...."
    sed -i "s/\$/:${f##*/}/" "$f"
    cat "$f" >> "$DIR/master.txt"
done 
```

对于`sed`不使用的版本，`-i`这是一种显式处理模拟就地编辑所需的临时文件的方法：

```
t=$(mktmp sXXXX); sed "s/\$/:$f/" "$f" > "$t"; mv "$t" "$f" && rm "$t" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T16:11:54.023

就个人而言，我会这样做：

```
dir=/var/www/flatuser
for f in "$dir"/*; do
  [[ $f = */master.txt ]] && continue
  while read -r; do printf '%s:%s\n' "$REPLY" "${f##*/}"; done <"$f"
done >/var/www/flatuser/master.txt 
```

它不会像这样就地修改您的文件`sed -i`，因此运行多次是安全的（该`sed -i`版本每次运行时都会将名称添加到您的文件中，因此您最终会得到每一行有多个文件名的副本）。

此外，`sed -i`POSIX 未指定，因此并非所有操作系统都有它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-16T08:09:39.713

它很旧，但也许它可以帮助某人。为什么不为文件命名以摆脱前导目录

```
DIR=/var/www/flatuser
FILES=( "$DIR"/* )
for f in "${FILES[@]}"
do
    echo "processing $f file...."
    b=`basename $f`
    sed -i "s/\$/:${b##*/}/" "$b"
    cat "$f" >> "$DIR/master.txt"
done 
```

没有测试...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:24:08.040

问题不在于美元符号。就是变量 $f 包含一个“/”字符，sed 使用它来分隔表达式。尝试使用“@”作为分隔符。

```
DIR=/var/www/flatuser
FILES=$DIR/*
for f in $FILES
do
    echo "processing $f file...."
    sed -i s@"$"@:"$f"@ $f
    cat $f >> $DIR/master.txt
done 
```

# ios - CGPathAddArc 是否包括圆的中心像素？

> ID：15574644
> 
> 赞同：1
> 
> 时间：2013-03-22T15:55:22.563
> 
> 标签：ios, core-graphics, screen, pixel, quartz-2d

我`CGPathAddArc`用来创建一个圆，如果半径是 5 像素，那么整个圆的宽度会是 10 像素还是 11 像素？

如果它最终有 10 个像素，也会令人困惑。在那种情况下，半径的中心是什么意思？

这里`CGPathAddArc`定义的：

```
void CGPathAddArc (
CGMutablePathRef path,
const CGAffineTransform *m,
CGFloat x,
CGFloat y,
CGFloat radius,
CGFloat startAngle,
CGFloat endAngle,
bool clockwise
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:53:12.923

它最终以 10 个像素作为直径，其中包括中心点。正如 Apple[参考文档](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Reference/CGPath/Reference/reference.html)所说：

> 调用此函数时，您需要提供中心点、半径和两个弧度角。Quartz 使用此信息来确定弧的端点

端点被确定为“包括”中心点，因此整个直径为 10。

# c++ - 2000000以下的素数和

> ID：15574648
> 
> 赞同：0
> 
> 时间：2013-03-22T15:55:27.777
> 
> 标签：c++

我正在尝试这个程序来找到所有低于 200 万的素数的总和，但由于某种原因，我得出的数字远低于我的预期。

这是我的代码。一位同事说我可能无法用我的程序捕捉所有素数，但他不懂 C++，我不明白我怎么会错过它们。

```
#include <iostream>

using namespace std;

int main()
{
    int a = 500000;
    int e = 0;

    // this is an array to hold all the prime number i find,
    // it's initialized to the arbitrarily high number of 500000
    int list[a]; 

    //here i am initializing the first members of my list to the first primes
    list[0] = 2; 
    list[1] = 3;
    list[2] = 5;
    a = 3; // i set a = 3 to catch the next coming prime of 7
    for (int c = 5; c < 2000000; c++)
    {
        // this bool is for prime catching, 
        // if d is false then the number will not be saved into the array
        bool d = false; 

        // this bool is for an exit statement in the following iterative loop, 
        // if it's false the loop will exit
        bool h = true; 
        for (int i = 0; list[i] < c/2 + 1 && h == true; i++)
        {
            // this checks to see if a number is evenly 
            // divisable by any of my primes so far
            if (c % list[i] == 0) 
            {
                d = false;
                h = false;
            }
        }
        if (d == true)
        {
            list[a] = c; // if i find a prime i save it into my array
            e += c; // if i find a prime i sum it to my total
            a++;
        }
    }
    cout << e; 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T15:57:38.907

`d`永远永远是假的。没有代码将其设置为`true`.

此外，您需要从`e`10 (2 + 3 + 5) 开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:11:23.270

试试这个 ：）

```
#include <iostream>
using namespace std;
int main(){
    bool prime;
    int num = 200000;
    int sum = 0;
    for (int i=3; i<=num; i++){
        prime = true;
        for(int j=2; j<=i/2; j++){
            if(i%j == 0) prime = false;
        }
        if(prime) sum+=i;
    }
    cout << sum;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T07:37:57.947

在我看来，找出数字是否为素数的最有效方法是：

*   检查数字是否小于 4 ( `<=3`)，则它是质数。假设只有正整数参与。
*   否则，检查它是否是偶数 - 那么它不是质数。
*   如果超过 3 并且不是偶数 - 检查从 3 到给定数字平方根的所有数字，跳过检查的所有偶数。如果它是任意数的倍数，则它不是质数。否则它是素数。

用 C++ 的话来说：

```
bool IsPrime(unsigned int nCheck)
{
   assert(nCheck>0);

   if(nCheck<=3)
     return true;

   if(nCheck%2==0)
     return false;

   for(int nCounter = 3; nCounter <= sqrt(nCheck); nCounter += 2) // Skip evens
   {
       if(nCheck % nCounter == 0)
          return false;
   }
   return true;
} 
```

任何数字都是该数字的 1 到平方根。例如，100 可以被最大 10 整除。即使它可以被 50 整除，它也可以被 5 整除。所以，只需检查 1 到 10。

# php - 重定向后让 SESSION 工作

> ID：15574649
> 
> 赞同：2
> 
> 时间：2013-03-22T15:55:30.140
> 
> 标签：php, session, instagram

我是 PHP 新手，甚至是 SESSIONS 新手

我正在使用 Instagram API，我成功地授权了一个应用程序，并重定向到一个页面来显示内容。

我的主文件夹叫做 Monkey，它有一个叫做 Instagram 的子文件夹。

我的 instagram 回调 url 是位于 instagram 文件夹中的 success.php。当我从 Instagram 成功检索访问令牌时，它会重定向到 Monkey 文件夹中的索引文件。

在我的成功页面上，我正在创建一个充满数据的数组，称为 instaArray。我正在尝试将数组从 instagram 文件夹中的 success.php 传递到猴子文件夹中的 index.php。

我的重定向很简单

```
header( 'Location: ../index.php' ); 
```

因为我是新的会话，我想我做错了什么。我认为这是直截了当的，但我想不是哈。

在success.php页面上，在我构建了数组之后，我有了这个

```
session_start();
$_SESSION['instagram'] = $instaArray; 
```

我认为应该创建一个包含我的数组 InstaArray 的会话。

然后，在 Monkey 的 index.php 页面上，我有这个

```
<?php
session_start();

$get_instagram = $_SESSION['instagram'];

print_r($get_instagram);

?> 
```

但绝对没有任何反应。我什至尝试将会话 instagram 设置为简单的数值或 1，$_SESSION['instagram'] = 1; 并在索引页面上获取它，它也不起作用。

我在做一些可怕的、非常错误的事情吗？我已经阅读了会议，但因为它是新的，它仍然有点令人困惑。

感谢您的帮助，我希望我能够正确解释一切。

**编辑：这是我的success.php完整页面**

```
<?php

require 'src/db.php';
require 'src/instagram.class.php';
require 'src/instagram.config.php';

// Receive OAuth code parameter
$code = $_GET['code'];

// Check whether the user has granted access
if (true === isset($code)) {

    // Receive OAuth token object
    $data = $instagram->getOAuthToken($code);
    // Take a look at the API response

    $username = $data->user->username;
    $fullname = $data->user->full_name;
    $id = $data->user->id;
    $token = $data->access_token;

    $user_id = mysql_query("select instagram_id from users where instagram_id='$id'");

    if(mysql_num_rows($user_id) == 0) { 
        mysql_query("insert into users(instagram_username,instagram_name,instagram_id,instagram_access_token) values('$username','$fullname','$id','$token')");
    }

    //Set Cookie
    $Month = 2592000 + time();
    setcookie(instagram, $id, $Month);

        // Set user access token
    $instagram->setAccessToken($token);

        // Retrive Data
    $instaData = $instagram->getUserFeed();

    // Create Instagram Array
    $instaArray = array();
    $count = 0;

    // For each Instagram Post
    foreach ($instaData->data as $post) {
        $instaArray[$count]['post_id'] = $post->id;
        $instaArray[$count]['name'] = $post->user->username;
        $instaArray[$count]['profile_img'] = $post->user->profile-picture;
        $instaArray[$count]['img_url'] = $post->images->standard_resolution->url;
        $instaArray[$count]['caption'] = $post->caption->text;
        $instaArray[$count]['like_count'] = $post->likes->count;
        $instaArray[$count]['comment_count'] = $post->comments->count;
        $instaArray[$count]['created_time'] = $post->created_time; //Unix Format
        $count++;
    }

    // Start Session For Array
    session_start();
    $_SESSION['instagram'] = serialize($instaArray);

    header( 'Location: ../index.php' ) ;

} else {
    // Check whether an error occurred
    if (true === isset($_GET['error']))  {
        echo 'An error occurred: '.$_GET['error_description'];
    }
} 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:03:08.450

为什么不使用 ID，然后使用 cookie 而不是会话 + 数据（通常存储在服务器上临时目录中的文本文件中）？并将所有数据保存在数据库中，而不是允许客户端访问数据。会话也是临时的。

注意，你知道你是否有“全局”吗？！

“请注意，在使用会话时，在使用 session_register() 函数注册变量或通过向 $_SESSION 超全局数组添加新键之前不会创建会话记录。无论会话是否具有已使用 session_start() 函数启动。”

参考：
[http ://www.php.net/manual/en/function.session-register.php](http://www.php.net/manual/en/function.session-register.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:03:11.147

在 php 之后创建 session_start() 第一行

```
 <?php
    session_start(); 
```

并将其从页面上的任何地方删除。

session_start() 应该是 index.php 中的第一行，也应该是 success.php

注意： session_start() 函数必须出现在标签之前：

参考：[http ://www.w3schools.com/php/php_sessions.asp](http://www.w3schools.com/php/php_sessions.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:35:48.767

我认为您需要在 index.php 中取消序列化（）您的数组。

```
$get_instagram = unserialize($_SESSION['instagram']); 
```

# c++ - 从内存中创建变量

> ID：15574659
> 
> 赞同：0
> 
> 时间：2013-03-22T15:55:44.557
> 
> 标签：c++, sfml

我正在使用 sfml。我需要编写一个函数来创建一个类型 sf::RectangleShape 并返回一个带有当前鼠标位置的新 sf::RectangleShape 并在我使用 window.draw() 后停留在那里现在我的代码是：

```
sf::RectangleShape functions::Map(sf::RectangleShape wall0){

    wall0.setPosition(0,0);
    wall0.setSize(sf::Vector2f(200,200));
    wall0.setFillColor(sf::Color::Green);
    wall0 = this->wall0;
    return wall0;
}

void functions::Draw(){

    window.clear();
    window.draw(logo);
    if (menu){

        window.draw(menuStart);
            window.draw(menuOptions);
            window.draw(menuExit);
    }
    if (playing){
       void Map();
       window.draw(wall0);
       if (sf::Mouse::isButtonPressed(sf::Mouse::Left)){

    }

} 
```

当按下鼠标左键时，我想用新的鼠标位置返回 wall0。我知道如何获取鼠标输入，但不知道如何绘制对象并将其保留在窗口上。在单击鼠标按钮时，我已经将它绘制到了绘制对象的位置，但它并没有停留。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:23:20.080

我不熟悉 sfml - 但简要查看您的代码，这是我认为您想要做的：

```
void functions::Map(sf::RectangleShape & wall0){

    wall0.setPosition(0,0);
    wall0.setSize(sf::Vector2f(200,200));
    wall0.setFillColor(sf::Color::Green);
} 
```

然后函数::Draw 方法：

```
...
if (playing){
   window.draw( Map(wall00) );
   if (sf::Mouse::isButtonPressed(sf::Mouse::Left)){
   ... 
```

# c# - LINQ to Entities 无法识别该方法，2 个存储库

> ID：15574665
> 
> 赞同：-1
> 
> 时间：2013-03-22T15:56:13.827
> 
> 标签：c#, linq, entity-framework

我的代码不断收到以下错误，并且无法理解为什么将其转换为查询时出现问题，这很简单。

我有 2 个存储库，`Album`并且`AlbumImage`，当我获取专辑时，我是否想要封面，这是`AlbumImages`. 我在这里做错了什么？

> LINQ to Entities 无法识别方法 'System.Linq.IQueryable`1[Sogaard.us.Cosplay.Data.AlbumImage] Get()' 方法，并且此方法无法转换为存储表达式。

专辑库

```
 public class AlbumRepository : IRepository<Album>
    {
        private CosplayEntities _entities;
        private IRepository<AlbumImage> _imageRepository;

        public AlbumRepository(CosplayEntities entities, IRepository<AlbumImage> imageRepository)
        {
            _entities = entities;
            _imageRepository = imageRepository;
        }

        public IQueryable<Album> Get()
        {
            return (from a in _entities.Albums
                    select new Album()
                        {
                            Id = a.Id,
                            UserId  = a.UserId,
                            Name  = a.Name,
                            Created  = a.Created,
                            LastEdit  = a.LastEdit,
                            Description  = a.Description,
                            Views  = a.Views,
                            Location  = a.Location,
                            Photoshoot  = a.Photoshoot,
                            Cover = (from ai in _imageRepository.Get() where ai.AlbumId == a.Id orderby ai.Cover descending, ai.Id ascending select ai).FirstOrDefault(),
                        });
        }
} 
```

专辑图片库

```
public class AlbumImageRepository : IRepository<AlbumImage>
{
    private CosplayEntities _entities;

    public AlbumImageRepository(CosplayEntities entities)
{
    _entities = entities;
}

public IQueryable<AlbumImage> Get()
{
    return (from ai in _entities.AlbumImages
            select new AlbumImage()
                {
                    Id = ai.Id,
                    AlbumId = ai.AlbumId,
                    UserId = ai.UserId,
                    Type = ai.Type,
                    Width = ai.Width,
                    Height = ai.Height,
                    Description = ai.Description,
                    Views = ai.Views,
                    Uploadet = ai.Uploadet,
                    LastView = ai.LastView,
                    Thumblink = ai.Thumblink,
                    Imagelink = ai.Imagelink,
                    Cover = ai.Cover
                });
} 
```

这是我收到错误的代码

```
 _albumImageRepository = new AlbumImageRepository(_entities);
    _albumRepository = new AlbumRepository(_entities, _albumImageRepository);
    _albumImagesTagRepository = new AlbumImagesTagRepository(_entities);
....

    var album = _albumRepository.Get().Where(x => x.Id == image.AlbumId).FirstOrDefault(); 
```

**更新：**我已经在我的 IQueryable Get() 中评论了 Cover = ... ，所以它是 2 个简单的选择作为对象。而且我仍然在简单的事情中遇到错误

```
 model.Albums = (from a in _albumRepository.Get()
                    orderby a.Id descending
                    select new AlbumDisplayModel()
                        {
                            Album = a,
                            ImageCount = _albumImageRepository.Get().Where(x => x.AlbumId == a.Id).Count(),
                            User = _userRepository.Get().Where(x => x.Id == a.UserId).FirstOrDefault()
                        })
                        .Skip(AlbumsPrPage * (page - 1))
                        .Take(AlbumsPrPage).ToList(); 
```

**更新 2：**如果我将 IQueryable Get() 重写为以下内容，它是否可以完美地工作，它的处理方式真的应该没有区别吗？

```
public IQueryable<Album> Get()
{
    return (from a in _entities.Albums
            select new Album()
                {
                    Id = a.Id,
                    UserId  = a.UserId,
                    Name  = a.Name,
                    Created  = a.Created,
                    LastEdit  = a.LastEdit,
                    Description  = a.Description,
                    Views  = a.Views,
                    Location  = a.Location,
                    Photoshoot  = a.Photoshoot,
                    Cover = (from ai in _entities.AlbumImages where ai.AlbumId == a.Id orderby ai.Cover descending, ai.Id ascending select new AlbumImage()
                    {
                        Id = ai.Id,
                        AlbumId = ai.AlbumId,
                        UserId = ai.UserId,
                        Type = ai.Type,
                        Width = ai.Width,
                        Height = ai.Height,
                        Description = ai.Description,
                        Views = ai.Views,
                        Uploadet = ai.Uploadet,
                        LastView = ai.LastView,
                        Thumblink = ai.Thumblink,
                        Imagelink = ai.Imagelink,
                        Cover = ai.Cover
                    }).FirstOrDefault(),
                });
} 
```

**更新3：**做了一点测试，问题似乎与实体框架有关，请查看以下代码，`var linqAlbum = testClass.LinqAlbumGet().ToList();`执行没有任何问题并返回正确的数据，`var eeAlbum = testClass.EEAlbumGet().ToList();`失败并出现异常

> LINQ to Entities 无法识别方法 'System.Linq.IQueryable`1[RepositoryTest.TestAlbumCover] EEImageGet()' 方法，并且此方法无法转换为存储表达式。

我的测试脚本

```
class Program
{
    static void Main(string[] args)
    {
        var linq = new LinqDataContext();
        var ee = new NewCosplayEntities();

        var testClass = new Test(linq, ee);

        var linqAlbum = testClass.LinqAlbumGet().ToList();
        var eeAlbum = testClass.EEAlbumGet().ToList();
    }
}

    public class Test
    {
        public NewCosplayEntities ee { get; set; }
        public LinqDataContext linq { get; set; }

        public Test(LinqDataContext linq, NewCosplayEntities ee)
        {
            this.linq = linq;
            this.ee = ee;
        }

        public IQueryable<TestAlbum> LinqAlbumGet()
        {
            return from a in linq.Albums
                   select new TestAlbum
                   {
                       Id = a.Id,
                       Name = a.Name,
                       Cover = (from i in LinqImageGet() where i.AlbumId == a.Id select i).FirstOrDefault()
                   };
        }

        public IQueryable<TestAlbumCover> LinqImageGet()
        {
            return from i in linq.AlbumImages
                   select new TestAlbumCover()
                   {
                       Id = i.Id,
                       AlbumId = i.AlbumId
                   };
        }

        public IQueryable<TestAlbum> EEAlbumGet()
        {
            return from a in ee.Albums
                   select new TestAlbum
                   {
                       Id = a.Id,
                       Name = a.Name,
                       Cover = (from i in EEImageGet() where i.AlbumId == a.Id select i).FirstOrDefault()
                   };
        }

        public IQueryable<TestAlbumCover> EEImageGet()
        {
            return from i in ee.AlbumImages
                   select new TestAlbumCover()
                   {
                       Id = i.Id,
                       AlbumId = i.AlbumId
                   };
        } 
    }

    public class TestAlbum
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public TestAlbumCover Cover { get; set; }
    }

    public class TestAlbumCover
    {
        public int Id { get; set; }

        public int AlbumId { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T15:58:22.693

可能是因为您将`Album`and包装`AlbumImage`在新的引用中。我会删除它并在您查询*后进行投影。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:46:03.017

我认为您不能投影到实体中并让每个投影使用来自另一个 IQueryable 的结果。如果你`IQueryable<AlbumImage> Get()`用这个替换了的内容，它可能会起作用：

```
from a in _entities.Albums
join c in _imageRepository.Get() on a.Id equals c.AlbumId into acJoin
from ac in acJoin.DefaultIfEmpty()
select new Album()
{
    Id = a.Id,
    etc..,
    etc..,
    Cover = ac
} 
```

我实际上相当确定您将需要调整这个徒手查询，但本质上它是加入 IQueryables，*然后将*这些结果投影到您的对象中，而不是投影到您的对象然后将 IQueryable 插入到这些结果中。这不是我所知道的最佳解释，但只需查找“LINQ Left Join”或“Linq Left Outer Join”即可查看我在此处描述的语法。[例子](http://msdn.microsoft.com/en-us/library/vstudio/bb397895.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T19:03:56.357

您的问题出现在 Albumn 的 ItemRepository 中。特别是因为 _entities 不知道 _imageRepository 类型，所以它不知道如何将该类型转换为适当的 TSQL 脚本。`_entities.Albums.ToList()`在尝试从水合对象的范围而不是直接在数据库实例上访问 _ImageRepository.Get() 之前，您可以强制将 IQueryable 转换为 IEnumerable。意识到您将看到对每个专辑的 AlbumImage 子对象的 n+1 个数据库请求的性能命中。

```
 public IQueryable<Album> Get()
    {
        return (from a in _entities.Albums
                select new Album()
                    {
                        Id = a.Id,
                        UserId  = a.UserId,
                        Name  = a.Name,
                        Created  = a.Created,
                        LastEdit  = a.LastEdit,
                        Description  = a.Description,
                        Views  = a.Views,
                        Location  = a.Location,
                        Photoshoot  = a.Photoshoot,
                        Cover = (from ai in _imageRepository.Get() where ai.AlbumId == a.Id orderby ai.Cover descending, ai.Id ascending select ai).FirstOrDefault(),
                    });
    } 
```

最终，问题在于您尝试使用 ActiveRecord 模式而不是真正的存储库。单个 IQueryable 中的所有内容都需要通过相同的数据库上下文实例获取，以进行解析和跟踪。

# haskell - Haskell 堆栈说明

> ID：15574666
> 
> 赞同：0
> 
> 时间：2013-03-22T15:56:21.253
> 
> 标签：haskell, stack

我在哪里可以找到关于 Haskell 中 Stack 的一个很好的解释。目前我所知道的是：

*   传统的抽象数据类型完全隐藏了数据的内部表示

*   可以使用列表实现多态堆栈，而无需告知消费者其内部工作原理。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-22T17:13:45.010

需要使用抽象堆栈接口的通常原因是内部表示支持我们想要隐藏的操作。例如，如果人们掌握了内部表示，可变链表或数组将允许人们更改堆栈中间的元素。

在 Haskell 中，您并没有真正遇到这个问题，因为列表是单链接且不可变的。您可以对它们执行的唯一操作是使用`:`构造函数创建一个新列表（本质上是“推送”操作）并模式匹配列表，取回列表的头部元素和尾部（本质上是“弹出”操作）。所有其他列表功能都是在这两个“推送和弹出”原语之上实现的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T16:22:32.643

使用 LYAH 中的 State monad 在 Haskell 中创建堆栈有一个很好的解释：

[http://learnyouahaskell.com/for-a-few-monads-more#state](http://learnyouahaskell.com/for-a-few-monads-more#state)

# vb.net - 图片在表单上不断变化，每个不同的groupbox上应该至少有5张图片使用循环

> ID：15574669
> 
> 赞同：0
> 
> 时间：2013-03-22T15:56:38.777
> 
> 标签：vb.net

我想要一种在每次刷新时加载 5 张图片的方法。我在数据库中有 300 多张图片，我希望它们在表单加载时每 5 张图片加载一次。然后他们在那里 sray 10 秒，然后接下来的 5 次加载 n 继续加载，直到所有图片都加载完毕，然后从头开始重新启动。它应该使用循环。因为我有一种动态的方式来加载我的图片和文本框。那么我怎么能加载 5 个图片，然后在第一个 5 个消失后的下一个 5 个。一切都应该发生在一种形式上。甚至可能使用 ashock.. 或任何其他方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:44:25.333

`or any other way.`

您可以这样做，首先获取所有这 300 张图片`load event`并将其存储在数据[**表**](http://msdn.microsoft.com/en-IN/library/system.data.datatable.aspx)中（使用`datatable`将减少多次连接到后端的可能性）。然后在您的表单中使用[**计时器**](http://msdn.microsoft.com/en-IN/library/system.timers.timer.aspx)并将其[**间隔**](http://msdn.microsoft.com/en-IN/library/system.timers.timer.interval.aspx)设置为 5000 毫秒（即 5 秒）。使用to 来跟踪显示的图片数量，每次调用[**tick 事件**](http://msdn.microsoft.com/en-IN/library/system.windows.forms.timer.tick%28v=vs.71%29.aspx)`global variable`时将其增加 5 （当您分配的时间间隔过去时将被触发。 - 例如：每 5 秒）。现在在里面，从数据表中获取五张图片（使用它来获取接下来的 5 张图片）。通过替换旧图像来显示这五个图像。一旦[](http://msdn.microsoft.com/en-IN/library/system.windows.forms.timer.tick%28v=vs.71%29.aspx)**`Tick event``tick event``global variable``global variable`再次达到 300 时将其重置为 0。仅当您[**停止**](http://msdn.microsoft.com/en-IN/library/system.timers.timer.stop.aspx)计时器时，此循环才会结束。**

 **希望这会给你一个想法来完成你的任务。**

# php - $_SERVER['PHP_SELF'] 不工作

> ID：15574673
> 
> 赞同：-1
> 
> 时间：2013-03-22T15:56:52.180
> 
> 标签：php, html, forms, jquery-mobile

如果以前有人问过这种问题，我很抱歉。但我花了很多时间寻找但我找不到解决方案。所以我在这里发帖。。

问题：我正在尝试将值发布到同一页面上（使用 Jquery 移动 UI）。所以我在页面中使用 $_SERVER['PHP_SELF'] 来处理我的表单。请检查动作的拼写（为actoin工作但不为动作工作）

当我使用它时，它会在同一页面上发布，我很高兴

```
<form method="POST" actoin="<?php echo $_SERVER['PHP_SELF'];?>"> 
```

请检查拼写以采取行动

但是，当我使用这个时`<form method="POST" action="<?php echo $_SERVER['PHP_SELF'];?>">`

它指向我的应用程序的 index.php。

谁能告诉我..为什么会这样..请注意我知道它的错字..

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T16:02:27.207

问题是`$_SERVER['PHP_SELF']`返回脚本的名称。你可能的意思是`$_SERVER['REQUEST_URI']`。它正在使用，`actoin`因为大多数浏览器在没有`action`属性时会将其提交到同一页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T15:59:44.367

action 不是 actoin ，你可以简单地写

```
 <form method="post"> 
```

不采取行动，它将在同一页面上发布值

# matlab - 删除录音中的滞后和尾随零

> ID：15574674
> 
> 赞同：0
> 
> 时间：2013-03-22T15:56:53.200
> 
> 标签：matlab, matlab-figure, matlab-deployment

有人向我提出了一个问题，要对“悲伤”这个词进行录音；一个。删除 dc 内容并使记录标准化 b. 删除我记录的样本中的滞后和尾随零。

这是我的两个疑问？1\. 是否删除滞后均值，从录音中删除零 2，是否删除此方法实现的尾随零

```
 new_signal_sad(52000:end)=[]; 
```

为什么我如此不确定是当我播放悲伤的录音时使用：

```
 sound(sad, 44100); 
```

它玩得很好。

当我使用此删除滞后和尾随零后播放录音时：

```
 sound(new_signal_sad, 44100); 
```

我听到的只是一个简短的“嘘”，然后很伤心，尽管它比第一个要快得多。

这是我程序的代码！！！

```
%Removing dc offset from sad signal
ip1=wavread('N:\Arutu Peter\sad.wav');
for channelNo = 1:size(ip1,2)
ip1(:, channelNo) = ip1(:, channelNo) - mean(ip1(:, channelNo));
end
%Normalizing the sad signal
sad=ip1/max(ip1);

%Now to remove trailing zeros and lagging from sad
frame_duration=0.1;
frame_len=fs*frame_duration;
N=length(sad);
num_frames=floor(N/frame_len);
new_signal_sad=zeros(N,1);
count=0;

%step1: Break the sound signal into frames
for k=1:num_frames
frame=sad( (k-1)*frame_len+1 :frame_len*k);
%step 2: Identifying the silent frames with maximum amplitude less than 0.02
max_val=max(frame);
if (max_val>0.02)
    %signal with no zeros
    count=count+1; 
    %step3: construct a new signal with no zeros
    new_signal_sad( (count-1)*frame_len+1:frame_len*count)=frame;
    %%Removing trailing zeros from the new_signal love
    new_signal_sad(52000:end)=[];
    subplot(4,2,1);
    plot(new_signal_sad);
    grid;
    title('sad');

 end

end 
```

# javascript - 添加到 JSON 字符串

> ID：15574679
> 
> 赞同：1
> 
> 时间：2013-03-22T15:57:10.440
> 
> 标签：javascript, json, knockout.js

我有一个 JSON 字符串，如下所示：

```
[
    {"TypeName":"Double","TypeID":14},
    {"TypeName":"Single","TypeID":43},
    {"TypeName":"Family","TypeID":7}
] 
```

在 KnockOut 中调用该函数后生成：

```
self.save = function() {
    var dataToSave = $.map(self.lines(), function(line) {
        return line.product() ? {
            TypeName: line.category().TypeName,
            TypeID: line.category().TypeID
            : undefined
});

alert(JSON.stringify(dataToSave)); 
```

但是，我想在模型中再添加 3 条信息，然后再将其发布回我的服务器 - 同时发送姓名、电子邮件和电话：

```
{
    "Name":"Mark",
    "Email":"me@me.com",
    "Tel":"0123456789",
    "Rooms":
        [
            {"TypeName":"Double","TypeID":14},
            {"TypeName":"Single","TypeID":43},
            {"TypeName":"Family","TypeID":7}
        ]
} 
```

是否有将此信息添加到 JSON 的正确方法，或者它是否简单：

```
var toSend = "{\"Name\":\"Mark\":\"Email\":\"me@me.com\", \"Tel\":\"0123456789\",\"Rooms\":"
+ JSON.stringify(dataToSave) + "}"; 
```

谢谢，

标记

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T15:58:55.393

将您的 JSON 字符串解析`JSON.parse`为有效的 JS 对象，根据需要将数据添加到对象中，然后`JSON.stringify`返回。JSON 字符串只是您的数据的一种表示形式，因此您不应依赖于直接对其进行修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T16:00:13.197

*当您可以将您真正*想要的结构传递给 JSON 编码器时，为什么要编码为 JSON，然后修改结果字符串？

```
var toSend = JSON.stringify({
    Name: "Mark",
    Email: "me@me.com",
    Tel: "0123456789",
    Rooms: dataToSave
}); 
```

# javascript - 使用查询引擎的动态主干查询

> ID：15574681
> 
> 赞同：-1
> 
> 时间：2013-03-22T15:57:19.080
> 
> 标签：javascript, json, object, backbone.js, query-engine

我刚开始使用[https://github.com/bevry/query-engine](https://github.com/bevry/query-engine)

我想知道如何在内部创建包含动态数据的查询。

这里有一个代码示例：

```
var query = "Berlin";
queryObject = '{"City":{$contains: "'+query+'"}}';
queryCollection.query(queryObject);

//TypeError: Object.keys called on non-object

queryObject = {"City":{$contains: "Berlin"}} ; 
queryCollectionquery.(queryObject);
//working as expected 
```

有任何想法吗？

[dfsq 是对的](https://stackoverflow.com/a/15575089/1111960)

编辑：这可以扩展到对象属性：

```
query = 'Berlin', 
filter = 'City', 
queryObject = {filter: {$contains: query}}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:17:42.923

Well`queryobject`必须是一个对象，而不是字符串。尝试这个：

```
var query = "Berlin",
queryObject = {City: {$contains: query}}; 
```

*注意：对象键周围的引号通常不是必需的*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T15:29:55.763

我想这就是你要找的。由于您想使用变量设置键，因此您需要使用括号表示法；如果您使用点表示法，过滤器将设置为“过滤器”，而不是存储在变量中的字符串。

```
var filter = 'City';
var query  = 'Berlin';

var queryObject = {};
queryObject[filter] = {$contains: query}; 
```

# jquery - 在循环中动态创建链接jquery mobile

> ID：15574682
> 
> 赞同：1
> 
> 时间：2013-03-22T15:57:22.893
> 
> 标签：jquery, jquery-mobile, each

考虑这个 json 对象：

```
[{"data":{"ID":"3","Category":"Career"}},{"data":{"ID":"5","Category":"Emotions"}},{"data":{"ID":"1","Category":"Finance"}},{"data":{"ID":"2","Category":"Health"}},{"data":{"ID":"6","Category":"Legacy"}},{"data":{"ID":"4","Category":"Relationships"}}] 
```

并考虑此客户端代码：

```
$(function (){ 

 $.ajax({                                      
  url: 'category.php',                         
  data: "",                        
   dataType: 'json',                      
  success: function(data)         
  {
     var output = '';
      $.each( data, function( key, obj) {
      $.each( obj, function( index, item) {
        //console.log(index+ ": " + item);
        url = "goal.php?catID=" + item.ID;
        output = '<li><a>' + item.Category+ '</a></li>';
        href = $('a').attr("href",url); $('a').append(href);
        $('#listview').append(output).listview('refresh');
       });
   });
   } 
});  }); 
```

```
<div data-role="page" id="home">
<div data-role="header"><h1>My Goals</h1></div>

<div data-role="listview" data-autodividers="true" data-inset="true">
  <ul data-role="listview" id="listview">    
  </ul>
</div> 
```

我在 JQuery mobile 中的第一次尝试，我试图遍历 JSON 并输出带有链接的类别 -

我几乎成功了，但它只是在 url 上附加最后一条记录 item.ID？

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:01:11.780

当你这样做

```
$('a').attr("href",url) 
```

您正在更改`a`页面的所有元素。最后一次迭代当然会获胜。

我建议你在你的循环中这样做：

```
$('#listview').append(
    $('<li/>').append($('</a>').attr('href', url).html(url))
).listview('refresh'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T16:14:49.720

尝试

```
$(function (){ 

    $.ajax({                                      
        url: 'category.php',                         
        data: "",                        
        dataType: 'json',                      
        success: function(data)         
        {
            $.each( data, function( key, obj) {
                var item = obj.data;
                $('<li></li>').append($('<a></a>', {
                    text: item.Category,
                    href: 'goal.php?catID=' + item.ID
                })).appendTo( $('#listview'))
            });

            $('#listview').listview('refresh');
        } 
    });  
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/qtGNJ/)

# visual-studio - WIZARD_ID 是什么？

> ID：15574683
> 
> 赞同：0
> 
> 时间：2013-03-22T15:57:25.067
> 
> 标签：visual-studio, wizard, visual-c++

win32console.vsz

```
VSWIZARD 7.0
Wizard=VsWizard.VsWizardEngine.10.0
Param="WIZARD_NAME = Application"
Param="RELATIVE_PATH = VCWizards\AppWiz\Generic"
Param="WIZARD_ID = 75" 
```

WIZARD_ID 是什么？任何官方文件或规范？

# python - 求和：递归是否必要，递归算法是什么样的？

> ID：15574685
> 
> 赞同：1
> 
> 时间：2013-03-22T15:57:30.450
> 
> 标签：python, algorithm, combinations

```
def numPens(n):
    """
    n is a non-negative integer

    Returns True if some non-negative integer combination of 5, 8 and 24 equals n
    Otherwise returns False.
    """
    if n < 5:
        return False
    N = n
    while N >= 0:
        if  N % 24 == 0 or N % 8 == 0 or N % 5 == 0: # if N / 24 is equal to 0 then we can buy N pens
            return True
        if N < 5:
            return False    # if N < 5 we cannot buy any pens

        if  N > 24:         # if N is greater than 24 , take away 24 and continue loop
            N -= 24
        elif N > 8:         # if N is greater than 8, take away 8 and continue loop
            N -= 8
        else:
            N -= 5          # else take away 5 and continue loop 
```

我必须为测试创建这个函数，我只是想知道问题是否可以递归排序或者什么是最有效的解决方案，我是编程新手，所以任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T16:08:53.853

```
if  N % 24 == 0 or N % 8 == 0 or N % 5 == 0 
```

如果您摆脱上述模数 ( `%`) 检查，那么您的算法就是所谓的[贪心算法](http://en.wikipedia.org/wiki/Greedy_algorithm)。它每次迭代都会减去最大的数字。您可能已经注意到，贪心算法不起作用。例如，它给出了**15** = 5 + 5 + 5 的错误答案。

```
 15 (-8) --> 7 (-5) --> 2 --> False 
```

通过添加模数检查，您改进了贪心算法，因为它现在可以正确处理 15。但它仍然有漏洞：例如，**26** = 8 + 8 + 5 + 5。

```
 26 (-24) --> 2 --> False 
```

为了正确解决这个问题，你必须放弃贪婪的方法。减去可能的最大数字并不总是足够的。要回答您的问题，是的，这里需要递归解决方案。

```
def numPens(n):
    """
    n is a non-negative integer

    Returns True if some non-negative integer combination of 5, 8 and 24 equals n
    Otherwise returns False.
    """
    # Base case: Negative numbers are by definition false.
    if n < 0:
        return False

    # Base case: 0 is true. It is formed by a combination of zero addends,
    # and zero is a non-negative integer.
    if n == 0:
        return True

    # General case: Try subtracting *each* of the possible numbers, not just
    # the largest one. No matter what n-x will always be smaller than n so
    # eventually we'll reach one of the base cases (either a negative number or 0).
    for x in (24, 8, 5):
        if numPens(n - x):
            return True

    return False 
```

这是解决问题的最直接的方法，并且对于较小的数字相当有效。对于大量数字，由于它多次评估相同数字的方式，它会很慢。留给读者的优化是使用[动态规划](http://en.wikipedia.org/wiki/Dynamic_programming)来消除重复计算。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-22T17:04:24.667

有更有效的 (O(1)) 算法。

例如，您可以添加

```
if n > 40: 
    return True 
```

作为您的基本案例之一！

您可以通过维护其余值 (n < 40) 的查找表来提高效率。

您可以这样做的原因是：[http ://en.wikipedia.org/wiki/Coin_problem#n_.3D_2](http://en.wikipedia.org/wiki/Coin_problem#n_.3D_2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T16:19:18.267

显然，这是一个递归问题，下面可能是最简单的代码：

```
def numPens(n):
    if n < 5:
        return False
    elif n==5 or n==8 or n==24:
        return True
    else:
        return numPens(n-5) or numPens(n-8) or numPens(n-24) 
```

如果您需要更高效和更健壮，您可以自己改进。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T17:00:59.137

`n=5a+8b+24c <=> n=5a+8(b+3c)`，因此你可以有一个功能：

```
def numPens(n):
    if n < 5:
        return False
    if n % 8 == 0 or n % 5 == 0:
        return True
    else:
        return numPens(n-8) or numPens(n-5) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T17:14:24.587

```
def numPens(n):
    global cantidad
    cantidad = cantidad + 1
    if n < 5:
        return False
    elif n%5==0 or n%8==0 or n%24==0:
        return True
    else:
        return numPens(n-5) or numPens(n-8) or numPens(n-24) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T17:38:34.947

[http://en.wikipedia.org/wiki/Recursive](http://en.wikipedia.org/wiki/Recursive)给出的递归的非正式定义将递归定义为：“当过程的步骤之一涉及调用过程本身时，递归是过程所经历的过程。” 另一方面，迭代被定义为：“迭代是指重复一个过程以接近预期目标、目标或结果的行为。过程的每次重复也称为“迭代”，一次迭代的结果被用作下一次迭代的起点。” [http://en.wikipedia.org/wiki/Iteration](http://en.wikipedia.org/wiki/Itteration)

As you can see the two processes are very similar. Any loop that is not infinite will be iterative, and could be written in a recursive manner, and any recursive call could be written as an iterative loop. However in many cases one method or the other is much easier to implement.

# ruby-on-rails - 让 Ruby on Rails 环境工作并安装 sqlite3

> ID：15574693
> 
> 赞同：4
> 
> 时间：2013-03-22T15:57:49.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sqlite, rubygems, ruby-on-rails-3.2

尝试升级到最新版本的 Ruby on Rails。我的 ruby​​ 和 rails 安装好了（我认为）。

```
C:\Users\benjaminw>ruby --version
ruby 2.0.0p0 (2013-02-24) [x64-mingw32]

C:\Users\benjaminw>rails -v
Rails 3.2.13 
```

我正在遵循 Ruby on Rails 书中的指导指南，但它有点过时了。下一步说下载 sqlite3 db 并将文件解压缩到以下文件夹 C:/Ruby200/bin

然后运行以下命令以确保 db 已正确安装

```
C:\Users\benjaminw>sqlite3 --version
3.7.16 2013-03-18 11:39:23 66d5f2b76750f3520eb7a495f6247206758f5b90 
```

这就是问题出现的地方。当我输入下一个命令时，我得到一个错误，似乎正确设置环境很重要。有谁知道以下是什么意思以及如何解决？哦，我在我的 Windows 7 计算机 DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe 上安装了这个版本的 devkit。

```
C:\Users\benjaminw>gem install sqlite3-ruby
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing sqlite3-ruby:
    ERROR: Failed to build gem native extension.

C:/Ruby200/bin/ruby.exe extconf.rb
checking for sqlite3.h... no
sqlite3.h is missing. Install SQLite3 from http://www.sqlite.org/ first.
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of necessary
libraries and/or headers.  Check the mkmf.log file for more details.  You may
need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=C:/Ruby200/bin/ruby
    --with-sqlite3-dir
    --without-sqlite3-dir
    --with-sqlite3-include
    --without-sqlite3-include=${sqlite3-dir}/include
    --with-sqlite3-lib
    --without-sqlite3-lib=${sqlite3-dir}/
    --enable-local
    --disable-local

Gem files will remain installed in C:/Ruby200/lib/ruby/gems/2.0.0/gems/sqlite3-1
.3.7 for inspection.
Results logged to C:/Ruby200/lib/ruby/gems/2.0.0/gems/sqlite3-1.3.7/ext/sqlite3/
gem_make.out 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:16:50.857

在糟糕的环境中运行铁轨会让你更头疼。依赖项将与您唯一的 ruby​​ 版本冲突，并让您考虑重新安装操作系统。

看起来您正在使用 Windows。我在一台全新的 Windows 8 计算机上安装了 rails 3.2。在整个 Windows 文件系统中随机处理配置文件几天后，我拿起一台安装了 Ubuntu 操作系统的旧笔记本电脑（只是因为 UEFI 阻止我格式化 Windows 8 并安装 ubuntu）。

帮自己一个忙！安装 Ubuntu。它使学习 Ruby 和 Rails 变得更容易，因为文件不会散落在一堆 Windows 文件夹中。

最后，了解 RVM 或 RBENV。通过轻松安装和更轻松地切换版本，它们将使您的生活更美好。还有其他一些离题的好处。

[RVM 安装](https://rvm.io/rvm/install/)<- 个人选择，但我没有尝试过 RBEnv。

[Github 上的 RBEnv](https://github.com/sstephenson/rbenv)

前几次安装 Rails 是一件令人头疼的事情。如果您希望使用上述选项之一进行安装，那只会让人头疼。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T03:15:38.123

由于编译 SQLITE.h，我对 Ruby 2.0 和 SQLite 绝对没有任何问题

# 解决方案

转到以下 URL 以解决这个问题，以便有人为希望使用 Windows 的其他 Rails 4 Ruby 爱好者采取下一步编译 gem 而不是预编译 gem 的人解决这个问题：[此链接](https://groups.google.com/forum/?fromgroups=#!topic/rubyinstaller/gedIaMryCFQ)。

使用命令之类的 `-with-opt-dir=<Path of Sqlite.3 bin, lib, include, and share folders>`命令。唯一棘手的部分是官方 sqlite3 网站提供的文件是预编译的，这很难认为是问题所在。

~~如果您在使用 Ruby 2.0 和 Rails 4.0.0.0beta1 进行此类操作时仍有任何问题，我可以为您提供进一步的说明。~~

对于 Sqlite3 和 Rails，现在在 Windows 上使用 Ruby 2.0 应该非常适合您。请注意在 Rails 4.0.0beta1 中避免使用 Ruby 2.0 64 位，因为 Rails 4 的依赖 gem 之一错误地标记您的计算机的 cpu 与其 gem 要求不兼容；这很快就会得到解决。

*编辑*：注意到我没有像我应该有更明确的指示那样乐于助人；已经花时间这样做的人为您提供了一个链接以及启动和运行所需的文件。

@Brian Petro：实际上，如果您知道 Gems 和 .h 文件在一天结束时有时如何与它们的构造一起工作，那么解决这个问题很容易。问题的根源在于 Ruby 2.0 如何处理*一些*gem。从 Ruby 2.0 开始，对于以前版本的 Ruby 很方便的预编译 gem，如果它们有 ABI Breakage，它们将无法工作；Sqlite3 gem 就是其中之一：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-17T02:38:48.383

有没有看到 ruby​​installer google 群里的话题，[New Knapsack package: sqlite (experimental)](https://groups.google.com/d/msg/rubyinstaller/gedIaMryCFQ/99NlyvecwmAJ)，可以使用新包安装gem。

我可以成功安装gem，您可以参考以下主题：

[Windows 上的 SQLite3 Ruby 2.0](https://www.ruby-forum.com/topic/4413168)

我的环境：

1.  操作系统：win 7 64位
2.  红宝石：红宝石 2.0.0p247 (2013-06-27) [i386-mingw32]
3.  宝石：2.0.5

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-01T12:26:37.623

This [link](https://stackoverflow.com/a/421341/1958355) will help.

First install **libsqlite3-dev** then try **sqlite3 using gem**.

Use package manager for libsqlite3-dev

and

```
sudo gem install sqlite3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T23:17:31.387

你试过[http://railsinstaller.org/](http://railsinstaller.org/)吗？从他们的网站：“RailsInstaller 拥有您开始运行所需的一切。在一个易于使用的安装程序中，您可以获得完整 Rails 堆栈所需的所有常用包。立即下载并编写（和运行）Rails 代码立刻。” 看起来它包括sqlite。

# python - VirtualEnv - Python 3.2 - 包给出 ImportError（但不在 2.7 中）

> ID：15574696
> 
> 赞同：1
> 
> 时间：2013-03-22T15:58:11.410
> 
> 标签：python, virtualenv, python-3.2

我是 virtualenv 的新手，但我遇到的错误对我来说没有任何意义。

当我`pip install MultiString`在我的 Python 2.7 virtualenv 中执行此操作时，我可以毫无问题地使用该包。

如果我在 Python 3.2 中执行相同操作，安装会按预期运行，但是在尝试导入时，我得到：

```
 File "<stdin>", line 1, in <module>
  File "/home/tom/p3/lib/python3.2/site-packages/multistring/__init__.py", line 1, in <module>
    from MultiString import MultiString
ImportError: No module named MultiString 
```

虽然：

```
(p3)tom@K9:~$ ls -alh /home/tom/p3/lib/python3.2/site-packages/multistring/
total 28K
drwxrwxr-x 3 tom tom 4.0K Mar 22 11:44 .
drwxrwxr-x 7 tom tom 4.0K Mar 22 11:43 ..
-rw-rw-r-- 1 tom tom   36 Mar 22 11:43 __init__.py
-rw-rw-r-- 1 tom tom  12K Mar 22 11:43 MultiString.py
drwxrwxr-x 2 tom tom 4.0K Mar 22 11:43 __pycache__ 
```

如果我`cd`进入该目录并`python __init__.py`从 p3 virtualenv 中执行，则没有问题。同样，如果我`cd`进入该目录并打开一个交互式会话，我就可以像往常一样导入和使用该库。

给出的错误消息表明它正在找到正确的包，但我不明白为什么它无法导入它。

我尝试添加`/home/tom/p3/lib/python3.2/site-packages`到`PATH`环境变量以防万一，但它并没有解决问题。

我正在尝试使用 tox 来测试我的库与 Python 3 的兼容性，并且我没有过多地使用 Python 3，但我觉得这更多是 virtualenv 的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T12:33:52.093

猜测一下，这是旧的（2.x）相对导入的问题。`__init__.py`可能有

```
from MultiString import MultiString 
```

虽然它应该是

```
from multistring.MultiString import MultiString 
```

或（我认为）

```
from .MultiString import MultiString 
```

但我相信绝对进口是首选。

这是我在 3.x 下安装 2.x 软件包时多次偶然发现的问题。我不知道 2to3 工具是否解决了这个问题（我已经手动破解了源代码）。

# memory-management - 估计 Cocos2d 游戏的内存使用情况

> ID：15574697
> 
> 赞同：5
> 
> 时间：2013-03-22T15:58:19.400
> 
> 标签：memory-management, cocos2d-iphone, automatic-ref-counting, instruments

我正在使用启用了 ARC 的 Cocos2d 2.0。我的游戏是一个随机生成的游戏，所以我需要在游戏中间的场景中加载/卸载纹理（spritesheet-batchnode）。我正在尝试从文件中删除 spriteframes 并删除我希望在中间卸载的 spritesheet 的键纹理。当我在卸载工作表后使用 dumpcachedtextureInfo 时，该 spritesheet 纹理不会显示在 dumpcachedtextureinfo 的日志中。

但是当我使用 Instruments/activity monitor 来分析我的应用程序时，卸载纹理和 spritesheet 后实际内存使用量不会下降。

有没有办法使 dumpcachedtextureinfo 不会显示仍在内存中的纹理？此外，分配中的我的 livebytes 列显示 4 MB。

另外，正如我在各个地方读到的那样，分配不显示纹理内存。

所以我的分配实时字节列显示为 4 MB，我的总纹理内存与 dumpcchedtextureinfo 的日志显示为 84MB，但内存监视器仍然显示实际内存使用量为 84+Spritesheet 大小+实时字节

我无法理解这种差异？

我没有退出场景，所以我不确定 ARC 是否持有内存或什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T03:20:50.243

一些有用的笔记给你

*   [这篇 Cocos2d 内存优化](http://www.learn-cocos2d.com/2012/11/optimize-memory-usage-bundle-size-cocos2d-app/)很好的解释了 Cocos2d 中的内存管理。

*   检查总内存分配使用：仪器->活动监视器。

![在此处输入图像描述](../Images/2648e968a37016df9ae43b91dcaee786.png)

![在此处输入图像描述](../Images/45a1ae3c70ac4df750980005ada74e43.png)

*   要检查内存泄漏，请使用：Instrument-> Leaks ![在此处输入图像描述](../Images/51818914c3193fff9c5424a7d3b0e9fe.png)

# c# - 在 GridView 中动态添加 lbl 字段的排序

> ID：15574699
> 
> 赞同：0
> 
> 时间：2013-03-22T15:58:21.940
> 
> 标签：c#, asp.net, sorting, gridview

如何启用排序以在 GridView 中动态设置 lbl 字段文本。下面是 GridView 和 .cs 代码的代码，我在其中设置动态标签字段的值。问题是，我无法对这个特定的 asp:template 应用类似于其他模板的排序表达式。

```
<asp:GridView ID="gvAlertsStatus" runat="server" AllowSorting="true"
    OnSorting="gvAlertsStatus_Sorting" AutoGenerateColumns="false"
    OnRowDataBound="gvAlertsStatus_RowDataBound">
    <Columns>
        <asp:TemplateField HeaderText="Owner" SortExpression="UsrName"
            ItemStyle-Width="120px">
            <ItemTemplate><%#Eval("UsrName") %></ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Last Result" SortExpression="lblLastResult"
            ItemStyle-Width="40px" ItemStyle-HorizontalAlign="Center">
            <ItemTemplate>
                <asp:Label runat="server" ID="lblLastResult" Font-Bold="true">
                </asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Active" SortExpression="Active"
            ItemStyle-Width="60px" >
            <ItemTemplate>
                <asp:Label runat="server" ID="lblActive"
                    Text='<%#Eval("Active") %>' >
                </asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

.aspx.cs 代码

```
public void gvAlertsStatus_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowIndex >= 0)
    {
         Label lblLastResult = (Label)e.Row.FindControl("lblLastResult");
        // Get the dates
        DateTime dtSuccess = (eScan.Lib.Shared.Utils.IsDate(lblSuccess.Text)) ?
            DateTime.Parse(lblSuccess.Text) : DateTime.MinValue;
        DateTime dtFailure = (eScan.Lib.Shared.Utils.IsDate(lblFailure.Text)) ?
            DateTime.Parse(lblFailure.Text) : DateTime.MinValue;
        DateTime dtDelay = (eScan.Lib.Shared.Utils.IsDate(lblDelay.Text)) ?
            DateTime.Parse(lblDelay.Text) : DateTime.MinValue;
        DateTime dtLastRun = (dtSuccess > dtFailure) ? dtSuccess : dtFailure;

        // Set up the Last Result label
        lblLastResult.Text = (dtSuccess > dtFailure) ? "Success" : "Fail";            
    }
}

protected void gvAlertsStatus_Sorting(object sender, GridViewSortEventArgs e)
{
    // Set up the sort direction
    SortDirection sd = SortDirection.Ascending;

    // If the same column is clicked, then alternate sort direction
    if (e.SortExpression.Equals(ViewState["SortExp"]))
    {
        sd = ((SortDirection)ViewState["SortDir"] == SortDirection.Descending) ?
            SortDirection.Ascending : SortDirection.Descending;
    }

    // Save the states
    ViewState["SortExp"] = e.SortExpression;
    ViewState["SortDir"] = sd;

    // Sort the view and rebind that 
    DataView dv = (DataView)gvAlertsStatus.DataSource;
    dv.Sort = e.SortExpression + " " +
        ((sd == SortDirection.Descending) ? "DESC" : "ASC");

    gvAlertsStatus.DataSource = dv;
    gvAlertsStatus.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:35:20.433

试试这个代码…………

```
protected void RadgvData_SortCommand(object sender, GridSortCommandEventArgs e)
        {
            GridTableView tableView = e.Item.OwnerTableView;
            e.Canceled = true;
            GridSortExpression expression = new GridSortExpression();
            expression.FieldName = e.SortExpression;
            if (tableView.SortExpressions.Count == 0 || tableView.SortExpressions[0].FieldName != e.SortExpression)
            {
                expression.SortOrder = GridSortOrder.Descending;
            }
            else if (tableView.SortExpressions[0].SortOrder == GridSortOrder.Descending)
            {
                expression.SortOrder = GridSortOrder.Ascending;
            }
            else if (tableView.SortExpressions[0].SortOrder == GridSortOrder.Ascending)
            {
                expression.SortOrder = GridSortOrder.Descending;
            }

            tableView.SortExpressions.AddSortExpression(expression);
            RadgvData.Rebind();

        } 
```

# algorithm - 插入红黑树

> ID：15574707
> 
> 赞同：3
> 
> 时间：2013-03-22T15:58:39.813
> 
> 标签：algorithm, insert, tree, red-black-tree

我正在学习算法课程，在我的课程幻灯片中，有一个插入红黑树的示例：

![在此处输入图像描述](../Images/faed0246e58b398071751206be202412.png)

我的问题是，为什么我们不让“2”成为这里的叶节点？看起来如果我们让它成为一个叶子节点，那么就不会违反红黑树的条件。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:38:59.770

问题不在于图像的第二棵树 2 的位置，而是不同节点的颜色。这是解释：

红黑树中[插入](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree#Insertion)的第一条规则是：新插入的节点必须始终是红色的。您属于案例 3 插入，其中节点 2 的父亲和叔叔都是红色。因此需要将它们重新着色为黑色，祖父将变为红色，但由于祖父是根，因此它将再次变为黑色。

所以新的树（插入2之后）应该是这样的（r和b表示颜色，.b是Nil节点）：

```
 5b
     /    \     
    1b     7b
  /   \    / \
 .b    2r .b  .b
       / \
      .b  .b 
```

为什么我们总是需要在彩铃中插入红色节点，你可能会问？答案是，第一个我们知道每个 NIL 节点在 RBT 中总是黑色的，第二个我们有规则 5。`Every simple path from a given node to any of its descendant leaves contains the same number of black nodes.`现在如果我们在最后插入一个黑色节点，树将违反此规则，只需将 2b 放在上面的树中而不是 2r 并保持颜色1 和 7 红色，然后计算从根到任何 Nil 节点的黑色节点，你会看到一些路径有 2 个后节点，一些路径有 3 个黑色节点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:05:58.220

红黑树的所有叶子都必须是`NIL` 检查属性[3](http://en.wikipedia.org/wiki/Red%E2%80%93black_tree)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T17:53:55.110

维基[百科文章](http://en.m.wikipedia.org/wiki/Red_Black_tree)，基于相同的想法，解释如下：

> 在树数据结构的许多表示中，一个节点可能只有一个子节点，而叶节点包含数据。在这种范式中可以呈现红黑树，但它改变了一些属性并使算法复杂化。为此，本文使用“空叶子”，

所以很明显，没有什么能阻止你按照自己的方式去做，但是你必须在你的算法中考虑到它，这使得它们变得更加复杂。也许这个问题可以通过使用 OOP 来缓解，其中叶子包含元素，但表现为具有空叶子的节点。

无论如何，这是一个权衡：您将在空间中获得什么（`NULL`在 C 中大约设置两个指针），您可能会在代码复杂性、计算时间或对象运行时表示（叶子的专用方法）方面失去。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-04T11:44:48.233

黑高不均匀。

如果计算从根节点搜索 NIL 节点的黑人节点的数量，5-1-2-nil 有 3 个，5-7-nil 或 5-1-nil 只有两个。

（规则：从给定节点到其任何后代 NIL 节点的每条路径都包含相同数量的黑色节点）

# c# - 如何使用不是第二个对象的主键的键创建导航属性？

> ID：15574708
> 
> 赞同：3
> 
> 时间：2013-03-22T15:58:41.383
> 
> 标签：c#, entity-framework, foreign-keys, composite-key, fluent-interface

在 EF5 中，使用代码优先方法和流畅的 API，如何根据不是其他表的主键的键创建导航属性（多对 1）？

我的数据库模型就是这样，**我无法更改它**：

*   表Foo1
    *   Foo1ID 整数（键）
    *   字段 1 整数
    *   值 varchar
*   表Foo2
    *   Foo2ID 整数（键）
    *   字段 1 整数
    *   值 varchar
*   表格栏
    *   BarID int（键）
    *   字段 1 整数
    *   值 varchar

我想要我的这些实体：

```
public class Foo1
{
    public int Foo1ID { get; set; }
    public int BarID { get; set; }    //It corresponds Bar.ID
    public string Value { get; set; }
    public Bar Bar { get; set; }
}

public class Foo2
{
    public int Foo2ID { get; set; }
    public int BarID { get; set; }    //It corresponds to Bar.Field1, NOT Bar.ID
    public string Value { get; set; }
    public Bar Bar { get; set; }
}

public class Bar
{
    public int ID { get; set; }
    public int Field1 { get; set; }
    public string Value { get; set; }
} 
```

这是我的地图（**第二张是不完整的**）：

```
public  class Foo1Map : EntityTypeConfiguration<Foo1>
{
    public Foo1Map()
    {
        this.HasKey(e => e.Foo1ID);

        // Links to Bar's Primary Key, yay, it's easy.
        this.HasRequired(e => e.Bar).WithMany().HasForeignKey(e => e.BarID);
    }
}

public  class Foo2Map : EntityTypeConfiguration<Foo2>
{
    public Foo2Map()
    {
        this.HasKey(e => e.Foo2ID);

        // No clues of how to links to Bar's other unique column, but not primary key.
        this.HasRequired(e => e.Bar).WithMany()........?
    }
}

public class BarMap : EntityTypeConfiguration<Bar>
{
    public BarMap()
    {
        this.HasKey(e => e.BarID);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:51:17.373

我在问题中提出的情况，在哪里`Foo1`以及`Foo2`两者都链接到`Bar`不同的键（在`Bar`侧面）不能在 EF5 中完成（帖子中的更多细节几乎是重复的）。但是，如果您的所有对象（`Foo1`和`Foo2`此处）都需要映射**到同一**列（具有唯一性约束），即使它不是`Bar`映射中其他对象（此处）的 PK，您也可以将该列设置为键。此外，如果您不想为`Foo1`and使用同一列`Foo2`，但在上下文的同一实例中永远不需要`Foo1`and `Foo2`，则可以使用动态映射，但它很危险并且有很多复杂性。

# git - git pull files 给出 500 错误

> ID：15574709
> 
> 赞同：1
> 
> 时间：2013-03-22T15:58:43.647
> 
> 标签：git, centos, file-permissions, chmod

在带有 WHM/cPanel 的 CentOS 6.3 服务器上：

直接上传文件时，我可以在浏览器中访问它们就好了，但是当我从存储库中提取它们时，它们下载但我无法访问它们（500 内部服务器错误）。

我认为这是一个所有权问题（在 Ubuntu 上，我曾经将 www-data 设置为所有者），但据我所知，这里没有 apache 用户，文件以用户本身身份运行。当我 git pull 文件时，他们拥有 644 权限的第一件事（文件夹是 755，但文件是 644）。

知道如何让 git 在 git pull 上使它们成为 755 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:43:29.817

最简单的做法是首先以适当的权限提交它们。Git 应该检测到您将模式从不可执行更改为可执行。如果你在一个缺少执行位的操作系统上——比如 Windows——你可以告诉 git 手动添加执行位：

```
git update-index --chmod=+x filename 
```

# ios - 如何在 applicationDidFinishLaunching 中呈现 ModalViewController？

> ID：15574712
> 
> 赞同：0
> 
> 时间：2013-03-22T15:58:53.160
> 
> 标签：ios, cocoa-touch, afnetworking, presentmodalviewcontroller, launching-application

这是我的情况：
我有一个需要 Internet 的 TaskListViewController(UITableView)。
所以在显示任务列表之前，我使用 AFNetworking 进行了一些登录工作（使用演示帐户和密码）。

现在我需要让用户设置他们的帐户和密码。
所以我只想在登录前展示一个模态视图（ZTCUserSettingsViewController）。

而且我花了很多时间，它仍然不起作用。

有没有办法解决这个问题？

谢谢你。

```
ZTCAPIClient : AFHTTPClient
ZTCTaskListViewController : UITableViewController 
```

代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [[AFNetworkActivityIndicatorManager sharedManager] setEnabled:YES];
    [ZTCAPIClient login];

    UITableViewController *viewController = [[ZTCTaskListViewController alloc] initWithStyle:UITableViewStylePlain];
    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:viewController];

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];
    self.window.rootViewController = nav;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:42:45.507

我看不到您的示例代码试图在哪里显示模态视图控制器。也许它发生在里面`-[ZTCAPIClient login]`.

一般来说，在呈现视图控制器的视图位于视图层次结构中之前，您不能呈现模态视图控制器。对于您的具体问题，这意味着您的程序需要在读取`[self.window makeKeyAndVisible];`. 如果您的程序之前尝试显示模态视图控制器，它将不起作用，事实上，您可能会看到一条错误消息记录到调试控制台。

附带说明一下，您应该注意不要让您的程序在`-application:didFinishLaunchingWithOptions:`. 如果您的程序花费的时间太长，系统可能会终止您的应用程序[iOS App Programming Guide](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW7)指出：

> 您的 application:willFinishLaunchingWithOptions: 和 application:didFinishLaunchingWithOptions: 方法应始终尽可能轻量级，以减少应用程序的启动时间。应用程序预计会在 5 秒内启动和初始化并开始处理事件。如果一个应用程序没有及时完成它的启动周期，系统会因为它没有响应而将其杀死。因此，任何可能减慢启动速度的任务（例如访问网络）都应该在辅助线程上异步执行。
> 
> 在启动到前台时，系统也会调用 applicationDidBecomeActive: 方法完成到前台的转换。因为在启动时和从后台转换时都会调用此方法，所以使用它来执行两个转换共有的任何任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:56:27.047

这是我的最终解决方案：

启动：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
[[AFNetworkActivityIndicatorManager sharedManager] setEnabled:YES];

UINavigationController *nav = [[UINavigationController alloc] init];

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
self.window.backgroundColor = [UIColor whiteColor];
self.window.rootViewController = nav;
[self.window makeKeyAndVisible];

//important!
[ZTCAPIClient registerUserInfo];

return YES;
} 
```

在 ZTCAPIClient.m 中：

```
+ (void) registerUserInfo {
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

NSString *account = [defaults stringForKey:@"account"];
if(!account) {
    // load default value
    [self performSelector:@selector(registerDefaultsFromSettingsBundle)];
    ZTCUserSettingsViewController *userSettingsView = [[ZTCUserSettingsViewController alloc] init];
    UINavigationController *usersSettingsNav = [[UINavigationController alloc] initWithRootViewController:userSettingsView];
    [[[[[UIApplication sharedApplication] delegate] window] rootViewController] presentModalViewController:usersSettingsNav animated:NO];
} else {
    DLog(@"**********************");
    if ([ZTCAPIClient loginWithAccount:[defaults stringForKey:@"account"] Password:[defaults stringForKey:@"password"] Mode:[defaults stringForKey:@"requestType"] BaseURL:[defaults stringForKey:@"url"]]) {
        DLog(@"Log in SUCCESS");
        UITableViewController *viewController = [[ZTCTaskListViewController alloc] initWithStyle:UITableViewStylePlain];
        UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:viewController];
        [[[[UIApplication sharedApplication] delegate] window] setRootViewController:nav];
    } else {
        DLog(@"Log in FAIL");
        ZTCUserSettingsViewController *userSettingsView = [[ZTCUserSettingsViewController alloc] init];
        UINavigationController *usersSettingsNav = [[UINavigationController alloc] initWithRootViewController:userSettingsView];
        [[[[[UIApplication sharedApplication] delegate] window] rootViewController] presentModalViewController:usersSettingsNav animated:NO];
    }
}
} 
```

# assembly - 汇编语言中的 PCI 设备检查

> ID：15574717
> 
> 赞同：1
> 
> 时间：2013-03-22T15:59:04.473
> 
> 标签：assembly, x86, bootloader, pci, yasm

我有一个简单的程序，必须读取`PCI configuration space`（仅适用于第一个 PCI 设备）。但它不起作用。雅思：

```
18: warning: value doesnt fit in 8 bit fild
19: warning: value doesnt fit in 8 bit fild 
```

这是代码：

```
 [use    32]
    [org    0x7c00]

start:
    mov     ah, 0x3
    int     0x10        ;clear screen
;forming the PCI address

    push    ax
    or      ah, 10000000b
    xor     al, al
    or      al, 00000001b
    shl     eax, 16
    pop     ax
    xor     al, al
    xor     ah, ah
    push    eax
    out     0xcf8, eax
    in      eax, 0xcfc
    mov     edi, field
    stosd   
    mov     si, di
    call    print_str
    ret
field:      
print_str:
;print a string in si
    mov     ax, 0xb800
    mov     es, ax
    xor     di, di
    mov     cx, 128
    rep     movsw
    ret

    times   510 - ($ - $$) db 0
    dw      0xaa55 
```

谢谢。

PS 我使用 Bochs 进行仿真，使用 YASM 作为汇编程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:03:46.180

您不能使用`out`or`in`与 16 位立即端口号。和 只能使用 8 位立即端口[`in`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/in.html)号[`out`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/out.html)。

因此，您需要将端口号存储到`dx`：

```
mov dx,0xcf8
输出 dx,eax
在 eax,dx

```

然后，在下面的块中有几个问题：

```
mov edi,字段
斯托德
莫西迪
调用 print_str
ret
场地：      
打印字符串：
; 在 si 中打印一个字符串
移动斧头，0xb800
移动，斧头
异或迪
mov cx, 128
代表 movsw
ret

```

**编辑：**修正错字，应该是：“不要保留”。已更正。

上面的块有几个问题。首先，我假设您想`edi`用作内存的索引，在哪里存储一些东西。但是由于您没有为此目的保留任何内存，因此您很乐意用您从端口读取的值覆盖`mov ax,0xb800`( `66 b8 00 b8`，正好是 4 个字节) （如果您首先修复了直接的 16 位端口号）。`eax``0xcf8`

其次，我不确定`es`引导加载程序代码中默认指向的位置，无论如何，可能需要先设置它：

```
推cs
流行音乐

```

要保留内存：

```
场地：
乘以 4 分贝 0 ; 保留 4 个字节（但您可能需要更多，
             ; 继续阅读以了解原因）

```

但这还不够。如果要将读取的数字打印`0xcfc`成`eax`with `rep movsw`，则需要先将其转换为字符串。在 x86 程序集中将数字转换为字符串（十进制或十六进制）在 SO 中经常被问到，因此请查看一些先前的答案以了解这个想法：

[此代码是否正确（数字加数字，然后打印结果）](https://stackoverflow.com/questions/9975848/is-this-code-correct-number-plus-number-then-print-the-result)

请注意，您需要与数字中的字符一样多的字节，或者如果您想使用 2 x 字符数`rep movsw`（见下文）。

然后在用于写入显存的代码中，您似乎无需任何转换即可将二进制值复制到显存。因此，在完成上述 2 个修复后，您可能会在第一行的前 64 个字符中获得一些彩色字符。请参阅[我最近对打印没有 OS 的字符串的 SO question 的回答](https://stackoverflow.com/questions/15462807/printing-a-string-without-os/15463548#15463548)，它有示例代码和两种不同的方法。

希望这可以帮助。

# javascript - 如何在 JavaScript 中发送专门的 XML 请求

> ID：15574719
> 
> 赞同：1
> 
> 时间：2013-03-22T15:59:10.067
> 
> 标签：javascript, xml, xml-rpc

我对 XML 还很陌生...

如何将以下 XML 发送到“ [https://www.exampleserver.com](https://www.exampleserver.com) ”？

```
<?xml version='1.0' encoding='UTF-8'?>
<methodCall>
  <methodName>ContactService.add</methodName>
  <params>
    <param>
      <value><string>privateKey</string></value>
    </param>
    <param>
      <value><struct>
        <member><name>FirstName</name>
          <value><string>John</string></value>
        </member>
        <member><name>LastName</name>
          <value><string>Doe</string></value>
        </member>
        <member><name>Email</name>
          <value><string>there_he_go@itsjohndoe.com</string></value>
        </member>
      </struct></value>
    </param>
  </params>
  </methodCall> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T18:13:31.273

不幸的是，使用**客户端**脚本，您只能将 XML 发送到与 Web 服务器所在的域相同的域。这是一项安全功能。但是，您可以将其发送到您自己的服务器并让您的服务器发送它。

要将其发送到您自己的服务器，您可以执行以下操作：

```
var xml = '' + 
'<?xml version='1.0' encoding='UTF-8'?>' +
'<methodCall>' +
  '<methodName>ContactService.add</methodName>' +
  '<params>' +
  '  <param>' +
  '    <value><string>privateKey</string></value>' +
  '  </param>' +
  '  <param>' +
  '    <value><struct>' +
  '      <member><name>FirstName</name>' +
  '        <value><string>John</string></value>' +
  '      </member>' +
  '      <member><name>LastName</name>' +
  '        <value><string>Doe</string></value>' +
  '      </member>' +
  '      <member><name>Email</name>' +
  '        <value><string>there_he_go@itsjohndoe.com</string></value>' +
  '      </member>' +
  '    </struct></value>' +
  '  </param>' +
  '</params>' +
  '</methodCall>';

var xmlhttp = new XMLHttpRequest();
xmlhttp.open("POST","https://www.yourdomain.com/thepage",true);
xmlhttp.send(escape(xml)); 
```

# iphone - 在 iPad 上的 iPhone 模式下，应用程序以横向显示

> ID：15574720
> 
> 赞同：0
> 
> 时间：2013-03-22T15:59:11.693
> 
> 标签：iphone, ios, objective-c, ipad, screen-orientation

当我的应用程序在 iPhone 上启动时，它应该是纵向显示的。当它以 iPhone 模式在 iPad 上启动时，如果以这种方式旋转，它将以横向显示。这是我的代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

-(BOOL)shouldAutorotate {
    return NO;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:04:11.733

在 Xcode 中选择您的目标之一，然后在摘要选项卡下确保您只选择了 UIpotrait 方向，其余所有这些都未选中，然后选择信息选项卡并查看“支持的界面方向”行下它应该只有 UIpotrait 方向。现在打开你的委托文件和 ios5 这个方法有效

`- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation { return (interfaceOrientation == UIInterfaceOrientationPortrait); }`

但此方法已被 iOS6 弃用，以便为 iOS6 覆盖它

-(BOOL) 应该自动旋转 {

```
return YES; 
```

}

-(NSUInteger)supportedInterfaceOrientations {

```
return UIInterfaceOrientationMaskPortrait; 
```

} - (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{

```
return UIInterfaceOrientationMaskPortrait; 
```

}

-(UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {

```
return UIInterfaceOrientationPortrait; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:34:23.003

在您的项目 info.plist 文件中，从支持的方向列表中删除横向标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:18:24.073

对于 iOS 6，您是否尝试过：

```
- (NSUInteger)supportedInterfaceOrientations {
return UIInterfaceOrientationMaskPortrait;
} 
```

# php - 使用 Codeigniters 模板解析器在 PHP 中生成值？

> ID：15574721
> 
> 赞同：0
> 
> 时间：2013-03-22T15:59:15.647
> 
> 标签：php, codeigniter, templates, date-format

我从数据库中获取内容，我得到一个`result_array()`. 然后我解析视图并将标签相应地放置在我的 HTML 中。但是，其中一个字段是日期时间类型字段，我希望对其进行一些格式化。通常我只会`date_format`在值上运行 a 并完成它，但是解析后的输出似乎不起作用。

这是一个例子：

```
{array_start}
  {title}
  <?=date_format({datetime_value}, 'Y-m-d')?>
  {body}
{/array_end} 
```

当我在它周围加上单引号时抛出一个致命错误，说“无法解析字符串 ({datetime_value})”，当我删除任何引号时，它会给我一个语法错误，因为 dt 值在该上下文中变为常量。

我怎样才能更好地处理这个问题？解析`{datetime_value}`后的文件本身就很好，我只是不知道如何在那种状态下格式化它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:01:21.827

只需使用常规 PHP，仅仅因为您使用的是模板系统并不意味着您不能。我的猜测是它只是填充了一个变量，而模板在花括号中呼应了该变量。

这应该有效：

```
<?=date_format($datetime_value, 'Y-m-d')?> 
```

# python - PAYE 税的 OpenERP 工资计算公式

> ID：15574730
> 
> 赞同：1
> 
> 时间：2013-03-22T15:59:46.460
> 
> 标签：python, openerp

我需要帮助来使用以下用于 OpenERP 的 python 公式来编译我的工资单。有人可以帮我正确地写下工资单吗？

```
if categories.BASIC < 120:
    result = 0
elif categories.BASIC < 180:
    result = - categories.BASIC - 120 * 0.05
elif categories.BASIC < 264:
    result = - categories.BASIC - 180 * 0.1 + 3
elif categories.BASIC < 2136:
    result = - categories.BASIC - 264 * 0.175 + 11.4
else: categories.BASIC > 2400:
    result = - categories.BASIC - 2400 * 0.25 + 214.55 
```

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:05:15.840

不要缩进，如果没有适当的缩进，python 将无法工作。

```
if categories.BASIC < 120:
    result = 0
elif categories.BASIC < 180:
    result = categories.BASIC - 120 * 0.05
elif categories.BASIC < 264:
    result = categories.BASIC - 180 * 0.1 + 3
elif categories.BASIC < 2136:
    result = categories.BASIC - 264 * 0.175 + 11.4
elif categories.BASIC > 2400: #the else statement can't have a condition
    result = categories.BASIC - 2400 * 0.25 + 214.55 
```

# linux - 打印到内核日志的限制

> ID：15574732
> 
> 赞同：3
> 
> 时间：2013-03-22T15:59:49.793
> 
> 标签：linux, linux-kernel, linux-device-driver, printk

我正在开发一个 linux 设备驱动程序（内核版本 2.6.32-37）。我主要通过打印到内核日志（使用 printk）来调试我的代码。一切顺利，直到我的电脑突然停止响应。我一遍又一遍地检查它，我的代码似乎是正确的。我的问题是：

内核日志打印过多是否可能导致计算机停止响应？

非常感谢！

奥马尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T16:16:19.527

我怀疑问题是由 引起的`printk`，当然使用`printk`本身会减慢整个代码的速度，但它不会使您的系统崩溃。

[这是来自Ubuntu Kernel Debugging Trick](https://wiki.ubuntu.com/Kernel/KernelDebuggingTricks)的引述： `The internal kernel console message buffer can sometimes be too small to capture all of the printk messages, especially when debug code generates a lot of printk messages. If the buffer fills up, it wraps around and one can lose valueable debug messages.`

正如您所读到的，当打印太多数据时，您只需开始覆盖一些您想在日志文件中看到的旧数据；这是一个问题，因为一些调试消息会消失，但不足以使整个事情崩溃。

我建议您再次仔细检查您的代码，尝试跟踪它何时/何​​处崩溃，如果您无法解决问题，请在此处或某些内核黑客邮件列表中发布问题。

PS还必须提到，您需要小心放置`printk`语句的位置，因为某些代码区域可能无法容忍由它引起的延迟，这可能会导致进一步的问题导致冻结/崩溃。

# jquery - 使用 jQuery Mobile 的 not 选择器

> ID：15574743
> 
> 赞同：1
> 
> 时间：2013-03-22T16:00:19.887
> 
> 标签：jquery, jquery-mobile

我执行以下操作：

$('ul').attr('data-role','listview');

这将我所有的无序列表默认为列表视图，但我想排除`<nav>`标签内的无序列表，例如：

```
<nav>
<ul>
<li><a href="#">One</a></li>
<li><a href="#">Two</a></li>
</ul>
</nav> 
```

问：如何更改我的选择器以不包含导航元素内部的那些无序列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T16:01:23.397

您可以通过执行以下操作仅过滤掉那些`ul`不是 a 的直接子级的 s `nav`：

```
$('ul').not('nav > ul').attr('data-role','listview'); 
```

# javascript - 使用 DataTables 的属性指定列数据类型

> ID：15574745
> 
> 赞同：3
> 
> 时间：2013-03-22T16:00:30.997
> 
> 标签：javascript, jquery, datatables

我们使用 DataTables jQuery 插件 ( [http://www.datatables.net](http://www.datatables.net) ) 创建可排序的表。该插件自动检测每列数据的数据类型。

当您想自己指定列的数据类型时，您在初始化数据表时添加“aoColumns”属性：

```
$('#accountTable').dataTable({
    "bPaginate": false,
    "sScrollX": "100%",
    "bScrollCollapse": true,
    "aoColumns": [
        null,
        null,
        { "sType": "currency" },
        { "sType": "currency" }
    ]
}); 
```

注意，我下载了数据表的货币数据类型插件。这很好用。

但是，我担心如果我们对表列进行更改，我们会忘记返回 JS 并更改数据表插件在该表上的初始化方式。

所以......根据需要直接在表中指定数据类型是理想的：

```
<table class="dataTables display">
    <thead>
        <tr>
        <th>Category</th>
        <th>Product</th>
        <th sType="currency">Cost</th>
        <th sType="currency">Retail</th>
        ... 
```

有没有办法做到这一点，或者使用 DataTables 的默认功能（我找不到）或使用 JS 循环或其他东西来循环表的标签并更新存在“sType”属性的 sType？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-19T20:11:44.303

这是一个非常**酷**的方法：

您的标题 HTML：

```
<table id="sorted-table">
    <thead>
        <tr>
            <th data-s-type="string">Number</th>
            <th data-s-type="html">Complex Name</th>
            <th>Price</th>
            <th data-b-sortable="false">Action</th>
         </tr>
     </thead>
... 
```

你的 JS：

```
$('#sorted-table').dataTable({
   ...
   "aoColumns": $('#sorted-table').find('thead tr th').map(function(){return $(this).data()})
}); 
```

注意：需要数据属性中的那些破折号。它们通过 jQuery 转换为**camelCase**形式，使其与数据表 API 兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:27:57.633

让你的 JS 循环并检查标题上的属性会起作用，但你不能只是发明一个`sType`属性并让它显示在 DOM 中。您必须颠覆一个有效但未使用的属性，例如`headers`（这可能会给屏幕阅读器带来麻烦；可能有更好的选择）。

**编辑：**

好的，在阅读了 CBroe 的评论后，我想**可以**给[元素一个任意属性。](http://www.javascriptkit.com/dhtmltutors/customattributes.shtml)

因此，如果您想符合 HTML5，您可以命名该属性`data-sType`，然后执行以下操作：

```
var aoColumns = [];

$('#accountTable > th').each(function() {
   var sType = $(this).getAttribute("data-sType");
   aoColumns.push(sType ? sType : null);
});

$('#accountTable').dataTable({
   ...
   "aoColumns": aoColumns
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T16:37:35.690

接受 CBroe 的评论，这正是我所做的。只需确保您的自定义属性以 为前缀`data-`，例如根据`data-stype='currency'`HTML[规范](http://www.javascriptkit.com/dhtmltutors/customattributes.shtml)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-22T21:03:47.080

感谢大家的帮助！我必须对 Russell Zahniser 的评论进行一些调整才能为我工作：

1.  将 $('#accountTable > th') 更改为 $('#accountTable thead th')
2.  将 aoColumns.push(sType ? sType : null) 更改为 aoColumns.push(sType ? { "sType" : "currency" } : null)

最终结果：

```
var aoColumns = [];

$('#accountTable thead th').each(function() {
   var sType = $(this).getAttribute("data-sType");
   aoColumns.push(sType ? { "sType" : "currency" } : null);
});

$('#accountTable').dataTable({
   ...
   "aoColumns": aoColumns
}); 
```

# c# - c# shadowcopy 示例

> ID：15574746
> 
> 赞同：0
> 
> 时间：2013-03-22T16:00:31.730
> 
> 标签：c#, visual-studio-2010, shadow-copy, appdomainsetup

我还需要使用链接的 dll 更新我的可执行文件。

我已经阅读了有关`AppDomainSetup.ShadowCopyFiles`但我在尝试正确的步骤来做我需要的事情时遇到了麻烦

问题是：

*   只有在通知更新或每次启动可执行文件时才需要创建卷影副本？
*   复制和更新 dll 和 .exe 的正确步骤是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:06:56.193

创建卷影副本不会更新您的应用程序。自动更新的一般顺序需要管理该过程的第三个应用程序。它看起来像这样。

1.  主应用程序找到更新并将更新文件下载到临时位置
2.  主应用程序启动更新程序应用程序并自行终止
3.  更新程序应用程序将更新文件复制到主应用程序文件上
4.  更新程序应用程序启动主应用程序并自行终止

显然，这将内置错误处理逻辑。但这是一般的想法。影子副本不在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:47:21.273

利用 .NET 的卷影复制功能并不是一个坏主意。它将允许您更新程序集而无需退出应用程序但您需要重新启动应用程序才能运行更新的版本。卷影副本只会让您覆盖程序集，而不是其他任何东西。

请注意，您不能在默认设置上启用卷影复制`AppDomain`。这意味着您将需要一个加载程序来创建`AppDomain`并执行您的应用程序。查看此[答案](https://stackoverflow.com/a/15343056/850119)以了解您需要采取的步骤和简单的实施。

如果您想要做的只是允许安装更新而不必退出应用程序，那么这是我能想到的最简单的方法。

您还应该看看 Microsoft 的[ClickOnce](https://en.wikipedia.org/wiki/ClickOnce)技术。它解决了部署和更新 .NET GUI 应用程序的许多常见问题。

# sql - SQL Server 查询为范围内的每个日期创建一个新列

> ID：15574748
> 
> 赞同：2
> 
> 时间：2013-03-22T16:00:35.857
> 
> 标签：sql, sql-server, date

我有一个程序让用户选择一个日期范围，然后它查询 SQL 服务器数据库以检索他们使用小时数的日期。我想将日期放在自己的列中，而不是全部放在同一个列中。例如：

```
Employee   Total Hours  Monday 3/10  Tuesday 3/11 ....
Doe, John    40             8             8 
```

这是现在的查询：

```
SELECT e.emp_fullname, t.tc_hours, t.punchDate 
FROM WaspTime.dbo.vEmployeeInfo as e, WaspTime.dbo.vTimeCards as t 
WHERE e.emp_id = t.tc_emp 
AND t.punchDate >= '03/10/2013'
AND t.punchDate <= '03/20/2013' 
```

这是结果：

```
Smith, Dan  8  2013-03-10 00:00:00.000
Smith, Dan  8 2013-03-11 00:00:00.000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:11:39.227

像这样的事情，无论你有多少时期都会重复。

我假设你会：

*   需要`SUM`（或`COUNT?`）您的工作时间？
*   使用某种`@period_start_date`参数，然后将每个周期偏移一天、2 天、3 天等...

在文本编辑器中手工完成，所以请原谅拼写错误，或者如果事情只是简单地不起作用 - 但我认为这个想法是清晰/合理的。

```
CREATE PROCEDURE GetHoursWorkedInPeriod @periodStartDate datetime = getdate() AS
SELECT 
e.emp_fullname, 
sum(t1.tc_hours) as 'Day1Hours', 
min(t1.punchDate) as 'Day1Date'.

sum(t2.tc_hours) as 'Day2Hours', 
min(t2.punchDate) as 'Day2Date',

sum(t3.tc_hours) as 'Day3Hours', 
min(t3.punchDate) as 'Day3Date',

...and so on

FROM 
WaspTime.dbo.vEmployeeInfo as e

inner join WaspTime.dbo.vTimeCards as t1
on e.emp_id = t1.tc_emp 
AND t1.punchDate >= DATEADD (day , 0 , @periodStartDate )
AND t1.punchDate < DATEADD (day , 1 , @periodStartDate )

inner join WaspTime.dbo.vTimeCards as t2
on e.emp_id = t2.tc_emp 
AND t2.punchDate >= DATEADD (day , 1 , @periodStartDate )
AND t2.punchDate < DATEADD (day , 2 , @periodStartDate )

inner join WaspTime.dbo.vTimeCards as t3
on e.emp_id = t3.tc_emp 
AND t3.punchDate >= DATEADD (day , 2 , @periodStartDate )
AND t3.punchDate < DATEADD (day , 3 , @periodStartDate )

...and so on.

GROUP BY
e.emp_fullname 
```

编辑以根据 OP 的要求将每个时间段限制为一天，并且还明确包括在结果集中应用小时数的日期。

# c# - 如何使常量字符串可用于我的代码和 DataGrid？

> ID：15574752
> 
> 赞同：0
> 
> 时间：2013-03-22T16:00:44.520
> 
> 标签：c#, wpf, binding, wpfdatagrid, datacontext

我有一个带有 DataGrid 的窗口。我的DataGrid 处理BeginningEdit 事件。我想根据列的名称运行一些可能取消BeginningEdit 事件的代码。例如：

```
private void tickerGrid_BeginningEdit(object sender, DataGridBeginningEditEventArgs e) {
    e.Cancel = (string)e.Column.Header != "Name";
} 
```

我的 DataGridTemplateColumn 标记看起来像：

```
<DataGridTemplateColumn Header="Name" IsReadOnly="False"> 
```

我想将“名称”作为常数存储在某处。我怎样才能做到这一点？我尝试制作一个公共 String 属性并像这样绑定 DataGridTemplateColumn Header：

```
<DataGridTemplateColumn Header="{Binding Path=ColName}" IsReadOnly="False"> 
```

但我认为 DataContext 是不同的，因为这对我不起作用。

如何创建一个对我的 C# 代码和 DataGridTemplateColumn 标题都可用的常量字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:05:28.797

创建一个静态类

```
public static class Constants
{
    public const string ColName = "ColName";
} 
```

在您的 xaml 文件顶部添加命名空间引用：

```
xmlns:customNamespace="clr-namespace:Namespace.Of.Your.Constants.Class" 
```

添加您的绑定：

```
<DataGridTemplateColumn Header="{Binding Path=ColName, Source={x:Static customNamespace:Constants}" IsReadOnly="False"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T19:21:24.393

试试这个（根据我们之前的讨论发布）......

`Header="{x:Static yourNamespace:Constants.ColName}"`

（并且`Constants.ColName`基于@mathieu 的回答 - 只需在代码中的任何位置定义一个具有静态属性的类 - 并获得正确的命名空间）

基本上你不需要`Binding`，因为你拥有的是一个 const 字符串，所以最简单的事情就是使用`x:Static`. （并且您可以在需要的地方添加类似的属性）。

另一种方法是在某处的 XAML 中“构造”一个​​字符串对象并使用`StaticResources`它。但这似乎更容易——你可以为类似的事情保留一个全局静态类。

# sql-server - 在其他数据库中重新设置标识列（不在当前正在使用的数据库中）

> ID：15574757
> 
> 赞同：1
> 
> 时间：2013-03-22T16:01:00.667
> 
> 标签：sql-server, sql-server-2008

我想在表中重新设置标识列，但不在当前正在使用的数据库中。

这有效：

```
use database;
DBCC CHECKIDENT ('table', reseed, 0); 
```

但是，我想做这样的事情：

```
DBCC CHECKIDENT (database.[dbo].table, reseed, 0); -- works not 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T16:03:05.947

```
EXEC database.sys.sp_executesql N'DBCC CHECKIDENT(N''dbo.table'', reseed, 0);'; 
```

甚至：

```
DECLARE @t nvarchar(513) = N'dbo.table';

EXEC database.sys.sp_executesql 
   N'DBCC CHECKIDENT(@t, reseed, 0);', 
   N'@t nvarchar(513)', @t; 
```

此外，如果表是空的*并且没有任何 FK 引用或其他限制*，您可以更轻松地使用...

```
TRUNCATE TABLE database.dbo.table; 
```

...碰巧也为该`IDENTITY`列重新播种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:05:37.253

使用 EXEC 执行 USE 和 CHECKIDENT 怎么样？

```
EXEC('USE database;DBCC CHECKIDENT (''dbo.table'', reseed, 0);') 
```

# javascript - 如何使用旋转矩阵旋转形状？

> ID：15574762
> 
> 赞同：3
> 
> 时间：2013-03-22T16:01:21.140
> 
> 标签：javascript, canvas, matrix, rotation, 2d

我正在尝试通过 javascript 使用[旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix)在画布中旋转一个正方形。这是我的代码。

```
function square() {
    this.cord=[[0,0],[-25,25],[25,25],[25,-25],[-25,-25]];  
}           

var a=new square();

function rotate() {
    var cos=Math.sqrt(2)/2;
    var sin=Math.sqrt(2)/2;
    for(var j=0;j<a.cord.length;j++) { 
        a.cord[j][0]=a.cord[j][0]*cos-(a.cord[j][1])*sin;
        a.cord[j][1]=a.cord[j][1]*cos+(a.cord[j][0])*sin;
    }
} 
```

但是奇怪的事情发生了，正方形逐渐缩小并且不能正确旋转。

我的代码有什么问题？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:13:30.733

您需要在计算之前提取`a.cord[j][0]`值`a.cord[j][1]`。您的计算`a.cord[j][1]`是基于新计算的新值，而不是原始值。

所以：

```
for(...)
{
    var x = a.cord[j][0];
    var y = a.cord[j][1];

    a.cord[j][0] = x*cos - y*sin;
    a.cord[j][1] = y*cos + x*sin;
} 
```

# javascript - 具有自动完成但没有默认值的 HTML 输入

> ID：15574766
> 
> 赞同：0
> 
> 时间：2013-03-22T16:01:26.453
> 
> 标签：javascript, html

我想在具有通常浏览器自动完成功能的表单内有一个输入元素，但我不希望浏览器为其设置默认值。

预期的行为将是输入始终呈现为空，并且当用户单击它时，浏览器自动完成会显示该字段先前输入的值。

我在[这个](http://www.wantworthy.com/login)登录页面中看到了类似的东西。

我尝试在页面加载时使用 javascript 清空输入值，但这不是一个非常干净的解决方案，因为有时我可以看到默认值出现然后被删除。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:10:13.627

我认为这将是您的答案... [http://liveweave.com/dnEfCD](http://liveweave.com/dnEfCD)

只需使用“占位符”属性。

```
 <form id="main">
<input id="email" type="text" placeholder="Email" name="email">
<input id="password" type="password" placeholder="Password" name="password">
 </form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:53:47.023

wantworthy.com/login 使用 JavaScript 创建页面。因此，当它加载时，输入字段不存在，浏览器无法填充它们。

如果您不想走得太远，您只能在页面加载后创建输入字段。也许更简单的事情，比如更改字段的名称可能是诀窍（之前的假名，页面加载后的真实名称）。但是您必须弄清楚浏览器何时填充这些字段：onDocumentReady、onLoad 甚至更晚。

如评论中所写，如果您根本不希望浏览器干预，您可以`autocomplete="off"`在表单标签中使用。但这也会关闭显示以前输入的值。

# stoppropagation - 表内 div 上的停止传播不起作用

> ID：15574767
> 
> 赞同：2
> 
> 时间：2013-03-22T16:01:30.593
> 
> 标签：stoppropagation

当点击表格内的 div 时，stoppropagation 直到点击冒泡到 tr 后才会触发。如何停止从 div 中冒泡？

[http://jsfiddle.net/tcbnW/](http://jsfiddle.net/tcbnW/)决定了我的问题

div点击了！→ tr 点击！→ 停止触发

我需要

div点击了！→ 停止触发

html代码如下

```
<table>
    <tr onclick="$('#INFO').append('tr clicked!<BR>');">
        <td>
            <div onclick="$('#INFO').append('div clicked!<BR>');" style="font-weight:bold;" class="STOP">test div</div>
        </td>
    </tr>
</table>
<div id="INFO" style="border:1px solid #F00;"></div> 
```

脚本

```
$(document).on('click','.STOP',function(event){
       $('#INFO').append('STOP triggered<BR>');
       event.stopPropagation();
       }); 
```

使用 jQuery 1.9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:21:27.287

你不应该像 jQuery 那样混合“传统”事件处理（*onfoo* HTML 属性）和“现代”事件处理（使用 addEventListener 等）——必然会出现意外结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:09:02.127

尝试从 div 中删除 onclick 事件。基本上，您有 2 个侦听器用于同一事件，一个嵌入在 onclick 中，第二个是 $(document).on

看看这个：[链接] [http://jsfiddle.net/tcbnW/1/](http://jsfiddle.net/tcbnW/1/)。这是一个补充

```
event.stopImmediatePropagation(); 
```

我认为这应该有效。

# javascript - Breeze createEntity 类型无法识别

> ID：15574770
> 
> 赞同：1
> 
> 时间：2013-03-22T16:01:35.610
> 
> 标签：javascript, breeze, durandal

我正在尝试使用 BreezeJS 对服务器进行调用，但无法使其正常工作。它说 tblMovie 无法识别。我找不到问题：S

当我想添加一部新电影时，它会这样说。

显示.js

```
self.viewAddMovieModal = function () {
        self.app.showModal(new self.addmovie()).then(function (result) {
            if (result != undefined) {
                var movie = dataservice.createMovie({
                    Title: result[0].title,
                    Director: result[0].director
                });
                if (movie.entityAspect.validateEntity()) {
                    self.movies.push(new movie(result[0].title, result[0].director));
                    dataservice.saveChanges();
                } else {
                    alert("Error");
                }
            }
        });
    }; 
```

我的 dataservice.js 层

```
/// <reference path="../../Scripts/breeze.debug.js"/>

define(["require"], function (require) {

    var Dataservice = (function () {
        function Dataservice(service) {
            this.serviceName = '';
            this._isSaving = false;
            this.serviceName = service;
            this.Manager = new breeze.EntityManager(this.serviceName);
            this.EntityQuery = new breeze.EntityQuery();
        }
        Dataservice.prototype.getAllMovies = function () {
            this.EntityQuery = breeze.EntityQuery.from("AllMovies");
            return this.Manager.executeQuery(this.EntityQuery);
        };

        Dataservice.prototype.createMovie = function (initialValues) {
            return this.Manager.createEntity('tblMovies', initialValues); //THis is where it goes wrong :(
        };

        Dataservice.prototype.saveChanges = function (suppressLogIfNothingToSave) {
            if (this.Manager.hasChanges()) {
                if (this._isSaving) {
                    setTimeout(this.saveChanges, 50);
                    return;
                }
                this.Manager.saveChanges().then(this.saveSucceeded).fail(this.saveFailed).fin(this.saveFinished);
            } else if (!suppressLogIfNothingToSave) {
            }
        };
        Dataservice.prototype.saveSucceeded = function (saveResult) {
            this._isSaving = false;
        };
        Dataservice.prototype.saveFailed = function (error) {
        };
        Dataservice.prototype.saveFinished = function () {
            this._isSaving = false;
        };
        return Dataservice;
    })();
    return Dataservice;
}) 
```

我确实有一个模型 tblMovie

```
using System;
using System.ComponentModel.DataAnnotations;

namespace DurandalMovieApp.Models
{
    public class tblMovie
    {
        [Key]
        public int MovieID { get; set; }
        public string Title { get; set; }
        public string Director { get; set; }
    }
} 
```

希望有人能帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:12:07.037

我认为问题在于您的实体是：tblMovie，而不是 tblMovies。

尝试更换：

```
return this.Manager.createEntity('tblMovies', initialValues); 
```

和：

```
return this.Manager.createEntity('tblMovie', initialValues); 
```

# asp.net-mvc - MVC 应用程序中基于 ACL 的安全性

> ID：15574771
> 
> 赞同：2
> 
> 时间：2013-03-22T16:01:42.173
> 
> 标签：asp.net-mvc, security, asp.net-mvc-4

您是否拥有或知道在 MVC 应用程序中使用基于 ACL 的安全性的示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:49:37.637

具体的例子我不知道，但是MVC自然是非常有利于ACL的。为模型分配一个 ACL（或两个或三个等）。ACL 可以根据您的需要静态或动态构建。将 ACL 存储在安全的地方（例如安全数据库）。让模型为视图提供方法，使其能够根据 ACL 很好地显示自己。让模型向控制器提供允许查询权限并根据需要向模型提供凭据的方法。除模型外，不允许应用的其他模块访问 ACL。这保留了 MVC 的神圣性。我建议考虑使用基于角色的 ACL 而不是基于用户的 ACL，以便将来在您的应用需要时提供更好的可扩展性。

# ios - NSMutableArray 中的 NSDictionary (iOS)

> ID：15574772
> 
> 赞同：6
> 
> 时间：2013-03-22T16:01:43.537
> 
> 标签：ios, objective-c, nsmutablearray, nsdictionary

结果，我需要以下内容：

```
(

    "some_key" = {
        "another_key" = "another_value";
    };

); 
```

为了做到这一点，我有这段代码，但它不起作用：

```
NSDictionary *dictionary = [[NSDictionary alloc] initWithObjectsAndKeys:@"another_value", @"another_key", nil];
NSMutableArray *array = [[NSMutableArray alloc] init];
[array setValue:dictionary forKey:@"some_key"]; 
```

任何的想法？谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-22T16:05:04.437

你的错误在这里：

```
NSMutableArray *array = [[NSMutableArray alloc] init];
[array setValue:dictionary forKey:@"some_key"]; 
```

------------^^^^^

您正在将其设置为数组。

试试这个：

```
NSDictionary *dictionary = [[NSDictionary alloc] initWithObjectsAndKeys:@"another_value", @"another_key", nil];
NSDictionary *outDict=[[NSDictionary alloc]initWithObjectsAndKeys:dictionary,@"some_key", nil];
NSMutableArray *array = [[NSMutableArray alloc] initWithObjects:outDict, nil]; 
```

在新的文字中：

```
NSDictionary *d=@{@"another_key":@"another_value"};
NSDictionary *c=@{@"some_key":d};
NSArray *array=@[c]; 
```

或嵌套创建：

```
NSArray *array=@[@{@"some_key":@{@"another_key":@"another_value"}}]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T16:09:32.247

`NSMutableArray`通常可以通过在末尾添加对象来构建。方法是`addObject:`

```
NSDictionary *dictionary = [[NSDictionary alloc] initWithObjectsAndKeys:@"another_value", @"another_key", nil];
NSMutableArray *array = [[NSMutableArray alloc] init];
[array addObject:dictionary]; 
```

另一方面，如果你想通过一个键（@“some_key”）来寻址字典，那么你也需要外部容器是一个字典：

```
NSDictionary *dictionary = [[NSDictionary alloc] initWithObjectsAndKeys:@"another_value", @"another_key", nil];
NSMutableDictionary *outerDict = [NSMutableDictionary dictionary];
[outerDict setObject:dictionary forKey:@"some_key"]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T16:15:58.040

从文档

> setValue:forKey: - 将给定键指定的接收者的属性设置为给定值。

那是`NSKeyValueCoding`协议。您使用错误的方法将对象添加到数组，`NSArray`是有序集合，而不是字典。做你需要的最简单的方法是：

```
NSDictionary* dic = @{@"some_key": @{@"another_key": @"another_value"}}; 
```

如您所见，输出`NSDictionary`不是 a `NSArray`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T16:19:37.940

数组不使用`setValue:forKey:`(nor `setObject:forKey:`) 并且数组不像字典那样具有关联性。

`setValue:forKey:`是KVC（键值编码）。

你想要一个字典的字典数组（下面是伪 plist 形式）

```
<array>
  <dict>
    <key>someKey</key>
    <dict>
      <key>someOtherKey</key>
      <string>someValue</string>
    </dict>
  </dict>
  <dict>
    <key>someKey</key>
    <dict>
      <key>someOtherKey</key>
      <string>someValue</string>
    </dict>
  </dict>
  <dict>
    <key>someKey</key>
    <dict>
      <key>someOtherKey</key>
      <string>someValue</string>
    </dict>
  </dict>
  <dict>
    <key>someKey</key>
    <dict>
      <key>someOtherKey</key>
      <string>someValue</string>
    </dict>
  </dict>
</array> 
```

`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-22T16:20:24.340

我认为您正在寻找这种结构

```
NSDictionary *anotherKeyValueDictionary = 
 [[NSDictionary alloc] initWithObjectsAndKeys:@"another_value", 
                                              @"another_key", nil];
NSDictionary *someKeyValueDictionary = 
 [[NSDictionary alloc] initWithObjectsAndKeys:@"anotherKeyValueDictionary", 
                                              @"some_key", nil];
NSMutableArray *array = [[NSMutableArray alloc] init];
[array addObject:someKeyValueDictionary]; 
```

# objective-c - 在if块中重新分配变量的objective-c错误

> ID：15574774
> 
> 赞同：0
> 
> 时间：2013-03-22T16:01:50.643
> 
> 标签：objective-c

我收到一个错误“Assigning to 'BNRItem' from cincompatible type 'id'”，试图将不同的对象分配给在 if 块之外声明的变量。为什么我在声明变量并为其赋值时没有收到相同的错误，但当我尝试在 if 语句中重新分配它时却出现错误？谢谢你的帮助 ！

```
BNRItem *p = [[[BNRItemStore sharedStore] getHighValueItems]    <== no error
                  objectAtIndex:[indexPath row]];

if(indexPath.section==1){
        *p = [[[BNRItemStore sharedStore] getLowValueItems] <== error 
                 objectAtIndex:[indexPath row]];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:12:01.990

像这样删除* ...

```
if(indexPath.section==1){
        p = [[[BNRItemStore sharedStore] getLowValueItems] objectAtIndex:[indexPath row]];
} 
```

您已经在 if 上方创建了指针，现在您只是在分配值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:16:44.950

仅在首次声明变量时才应使用取消引用运算符 (*)。

```
BNRItem *p = nil;

if(indexPath.section==1){
        p = [[[BNRItemStore sharedStore] getLowValueItems]
                 objectAtIndex:[indexPath row]];
} 
```

# jsp - 在一个jsp中设置变量的值并在另一个jsp中检索

> ID：15574775
> 
> 赞同：0
> 
> 时间：2013-03-22T16:01:51.423
> 
> 标签：jsp, jstl, jspinclude

在 jsp A 中，我有这样的声明：

```
<c:set var="prefix" value="fe" /> 
```

在 jsp A 中，我包含 jsp B，然后在 B 中，我这样做：
alert(${prefix});

我得到：`'fe' in undefined` 我怎样才能得到jsp B中变量前缀的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T16:04:29.640

您可以将变量的范围设置为请求：

```
<c:set var="prefix" value="fe" scope="request"/> 
```

此外，请确保您使用的是 include 指令而不是 include 标准操作。该指令发生在翻译时，因此包含文件中定义的变量可用于包含文件，但包含标准操作实际上在运行时插入来自包含文件的响应，因此无法访问包含文件中设置的变量。简单地说使用这个：

```
<%@include file="myinclude.jsp" %> 
```

而不是这个：

```
<jsp:include page="myinclude.jsp" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:30:27.507

**也许**，当 jsp 被渲染时，`alert(${perfix})`被评估为`alert(fe)`. 您收到的错误是 javascript 错误，因为`fe`您的代码中可能没有定义任何内容。

您可能想要做的是将其更改为

```
<c:set var="prefix" value="'fe'" /> 
```

所以它在Javascript中被评估为字符串。

# css - 重新设计下拉菜单的子菜单

> ID：15574779
> 
> 赞同：0
> 
> 时间：2013-03-22T16:01:58.423
> 
> 标签：css, drop-down-menu

在我基于 wp 的网站中，我有一个下拉菜单，子菜单继承了根菜单的所有属性。如果子菜单项有较大的文本，它会分成两行。就像在服务菜单下，子菜单软件开发分为两行

_软件

开发_

我想像“软件开发”这样的一条线

我试过这个

```
ul#mainmenu-menu li:hover ul.sub-menu {
  display: block;
  padding:2px;
}

ul#mainmenu-menu ul.sub-menu > li {
  border: none;
  display: block;
  float: none;
  font-weight: normal;

}
ul#mainmenu-menu ul.sub-menu > li > a {
  height: auto;

  line-height: 10px;
  padding:2px;  
} 
```

但没有用。我该如何解决它。

我的工作网站[http://aniyanetworks.net/Blog/](http://aniyanetworks.net/Blog/)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:25:09.957

使用可以使用

```
ul#mainmenu-menu ul.sub-menu li a {
   white-space: nowrap;
} 
```

# ajax - jQuery 历史插件的问题，或者更容易使用的替代方案？

> ID：15574781
> 
> 赞同：0
> 
> 时间：2013-03-22T16:02:08.893
> 
> 标签：ajax, history.js

我试图让我的 AJAX .load 函数具有返回/重新加载/书签功能。我正在使用 jquery 插件 history.js。

我的内容正在从另一个 html 文件中加载到我的内容 div 中，使用其中的锚点来指定从哪个 div 中选择信息（取决于单击的链接）。

目前，我已经设法让插件更改地址，但返回/重新加载功能不起作用。

这是我正在使用的插件代码：[https ://github.com/balupton/jquery-history/blob/master/scripts/jquery.history.js](https://github.com/balupton/jquery-history/blob/master/scripts/jquery.history.js)

头：

```
<script type="text/javascript" src="jquery.js"></script>  
<script type="text/javascript" src="core.js"></script>
<script type="text/javascript" src="path.js"></script>
<script type="text/javascript" src="back.js"></script> 
```

导航：

```
<div id="leftnav">
        <p class="leftnavtext">
            <a class="navlinks" id="about2" href="#/about">ABOUT</a> <br>
            <a class="navlinks" id="process2" href="#/process">PROCESS</a> <br>
            <a class="navlinks" id="materials2" href="#/materials">MATERIALS</a> <br>
            <a class="navlinks" id="pricing2" href="#/pricing">PRICING</a>
        </p> 
```

AJAX Javascript 代码：

```
$(document).ready(function(){
  $("#about2").click(function(){
    $("#content").load("content.html #about");
});
  $("#process2").click(function(){ 
    $("#content").load("content.html #process");
 });
  $("#materials2").click(function(){ 
    $("#content").load("content.html #materials");
});
  $("#pricing2").click(function(){
    $("#content").load("content.html #pricing");
 });
   $("#pricing3").click(function(){
    $("#content").load("content.html #pricing");
});
   $("#infinite1").click(function(){
    $("#content").load("content.html #infinite");
});

}); 
```

back.js 代码（path.js 是插件）：

```
function nav_event(hash) {
  // Some sort of navigation happened, update page
}

$(document).ready(function(){
  $.history.init(nav_event);
  $.history.load('#/about');
}

$(document).ready(function(){
  $.history.init(nav_event);
  $.history.load('#/process');
}

$(document).ready(function(){
  $.history.init(nav_event);
  $.history.load('#/materials');
}

$(document).ready(function(){
  $.history.init(nav_event);
  $.history.load('#/pricing');
}

$(document).ready(function(){
  $.history.init(nav_event);
  $.history.load('#/infinite');
} 
```

谁能看到我哪里出了问题？或者他们能推荐一个更好的插件来使用吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:08:34.337

```
if (navigator.userAgent.match('MSIE')!=null) {return false;} /*prevent IE crash*/

    window.addEventListener("popstate",   function(e) {window.location = lastURL;  });

    window.history.pushState({"html": newURL,"pageTitle": newURL},"", newURL); 
```

我从另一个答案中偷了这个。不幸的是，它在 IE 中不起作用。

进一步阅读：

[http://html5doctor.com/history-api/](http://html5doctor.com/history-api/)

[http://diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)

# java - 使用 ServletContextListener 和 Jetty

> ID：15574782
> 
> 赞同：9
> 
> 时间：2013-03-22T16:02:10.207
> 
> 标签：java, jetty, servlet-3.0

我想用嵌入式码头测试我的 ServletContextListener。它`contextDestroyed`在服务器停止时调用，但`contextInitialized`在服务器启动时不调用。我该如何解决？

```
Server server = new Server(PORT);
ServletContextListener myListener = ...;
WebAppContext webapp = new WebAppContext();
webapp.addEventListener(myListener);
webapp.setServer(server);
server.setHandler(webapp);
server.start(); -> doesnt call myListener.contextInitialized()

server.stop();  -> call myListener.contextDestroyed() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-23T08:38:15.437

我在 Jetty 9.3.10 上遇到了类似的问题

您是否尝试将扩展侦听器类型设置为 true？如果设置为 false（默认），则不会考虑 ServletContextListener 实现`org.eclipse.jetty.server.handler.ContextHandler.Context#checkListener`

```
 webapp.getServletContext().setExtendedListenerTypes(true); 
```

# c# - 将 ListBox 的选定项放入选定的 TextBox

> ID：15574785
> 
> 赞同：0
> 
> 时间：2013-03-22T16:02:26.537
> 
> 标签：c#, asp.net

我有一个 ListBox 对象，它允许多项选择，也允许删除所选项目。

现在我有一个额外的问题，它与一个列表框和 3 个文本框有关。我希望它能够工作，以便当我将焦点转移到任何文本框或将鼠标悬停在任何文本框上时，我希望将 ListBox 所选项目复制到接收焦点/鼠标悬停的文本框中。

我怎样才能做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T00:38:21.093

这就是您如何从列表框中获取一个选项项的方法，要获得多个选项，您必须遍历列表框中的选项项集合。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

  <head runat="server">
    <title></title>
    <script type="text/javascript">
      function GrabFromListbox() {
      window.document.getElementById("TextArea1").value += window.document.getElementById("lstFruits").options[window.document.getElementById("lstFruits").selectedIndex].text + "\n";
      }
    </script>
  </head>

  <body>
    <form id="form1" runat="server">
      <div>
        <select id="lstFruits" name="lstFruits" multiple="multiple" size="8">
          <option value="0" selected="selected">Please select</option>
          <option value="1">Apples</option>
          <option value="2">Pears</option>
          <option value="3">Bananas</option>
          <option value="4">Oranges</option>
        </select><br /><br />
        <input type="text" id="TextArea1" name="TextArea1" value="" onmouseover="GrabFromListbox()" />
      </div>
    </form>
  </body>
</html> 
```

# scala - 使用 Scala Slick 可靠地解决您的数据库故障

> ID：15574793
> 
> 赞同：0
> 
> 时间：2013-03-22T16:02:37.560
> 
> 标签：scala, jdbc, slick

我正在使用 Scala slick 来处理我的 Mysql 数据库。

我正在使用 scala.util.Try 包装所有调用

我想根据问题有不同的行为

*   如果数据库已关闭，最终我希望我的 webapp 返回 503

*   如果一个奇怪的查询通过我的数据库层并且我的代码有一个错误，那么我想返回一个 500

经过一番谷歌搜索后，您似乎可以获得各种带有错误代码的不同异常，我不确定要查找什么。

使用 slick 我正在使用 com.mysql.jdbc.driver

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T17:00:20.450

Slick/MySQL 会`MySQLSyntaxErrorException`在语法错误和`CommunicationsException`无法访问数据库时抛出异常。

这是一个快速示例，它将捕获这两种类型的异常：

```
try {
    Database.forURL("jdbc:mysql://some-host:3306/db-name", 
                    driver = "com.mysql.jdbc.Driver", 
                    user="", 
                    password="") withSession { session: Session =>
      implicit val s = session
      ...
    }
} catch {
    case e: MySQLSyntaxErrorException =>
        ... handle the syntax error ...
        // You may want to define your own Exception that wraps the MySQL one
        // and adds more context
    case e: CommunicationsException =>
        ... handle the connection error ...
} 
```

然后，在您的 webapp 代码中，您需要捕获自定义异常（请参阅代码中的注释）并相应地返回 HTTP 代码。

# javascript - 使用 odata 和 jquery 从 Dynamics Crm 中的实体检索记录

> ID：15574805
> 
> 赞同：1
> 
> 时间：2013-03-22T16:03:12.790
> 
> 标签：javascript, dynamics-crm-2011, crm

我想在警报消息中打印从我的实体检索到的值。我将值存储在相关产品数组中我想打印这些值。当它尝试打印它们时，它会给出未定义的消息。请帮助我

```
 relatedProducts = [];

    function onload() {
       var oDataUri="https://yanceyworksllc.crm.dynamics.com/xrmservices/2011/OrganizationData.svc/ProductSet?$select=new_price,ProductId&$filter=new_TaxInformation/Value eq 1";
       GetRecords(oDataUri);
       var totalRecords = relatedProducts .length;
    }

    function GetRecords(url) {
        jQuery.ajax({
            type: "GET",
            contentType: "application/json; charset=utf-8",
            datatype: "json",
            url: url,
            async: false,
            beforeSend: function (XMLHttpRequest) {
             var x=   XMLHttpRequest.setRequestHeader("Accept", "application/json");

            },
            success: function (data, textStatus, XmlHttpRequest) {
                if (data && data.d != null && data.d.results != null) {
                    AddRecordsToArray(data.d.results);
                    FetchRecordsCallBack(data.d);
                }
            },
            error: function (XmlHttpRequest, textStatus, errorThrown) {
             //  FetchRecordsCallBack(data.d);
                alert("Error :  has occured during retrieval of the records ");
            }
        });
    }

    function AddRecordsToArray(records) {
        for (var i = 0; i < records.length; i++) {
            relatedProducts .push(records[i]);
           alert(relatedProducts[i].Value) ;

        }

    }

    function FetchRecordsCallBack(records) {
        if (records.__next != null) {
            var url = records.__next;
            GetRecords(url);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-28T21:03:02.567

对 OData 调用进行故障排除的一种非常简单的方法是将 URI 复制到浏览器中并导航到该页面。如果它没有将您带到包含数据的页面，则意味着您的 uri 错误。如果是这样，那么您正在错误地处理结果数据（即，如果调试器在 GetRecords 中命中成功块，则您的 AddRecordsToArray 或 FetchRecordsCallBack 已损坏）。

旁注 - 我从未见过“。[属性名称]”之前的空格。这甚至是有效的 JavaScript 语法吗（如您的 relatedProducts .push 或 relatedProducts .length 中）？

# android - Android：获取屏幕分辨率或丢失 API 版本

> ID：15574807
> 
> 赞同：0
> 
> 时间：2013-03-22T16:03:23.260
> 
> 标签：android, api

我尝试以编程方式读出设备的屏幕分辨率。我希望我的应用程序支持从 4 开始的所有 API 版本。不幸的是，读取分辨率的 API 已从版本 12 更改为 13。

这是我的代码：

```
int Measuredwidth = 0;
int Measuredheight = 0;

WindowManager w = getWindowManager();
if (Build.VERSION.SDK_INT >= 13) {
  Point size = new Point();
  w.getDefaultDisplay().getSize(size);
  Measuredwidth = size.x;
  Measuredheight = size.y;
} else {
  Display d = w.getDefaultDisplay();
  Measuredwidth = d.getWidth();
  Measuredheight = d.getHeight();
} 
```

它不编译。:(

```
Call requires API level 13 (current min is 4): android.view.Display#getSize 
```

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:20:41.003

这个“编译错误”实际上是一个 Lint 错误。

[Lint API Check](http://tools.android.com/recent/lintapicheck)文章提供了大量信息。

您可以通过简单地使用 @TargetApi 批注对代码进行批注，将代码“标记”为针对 API 的较新版本。

这样你就可以保留你的 minSdkVersion 并支持旧版本的 Android。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-22T16:22:32.317

你可以这样做：

```
int Measuredwidth = 0;
int Measuredheight = 0;

Display d = getWindowManager().getDefaultDisplay();
Point size = new Point();
try {
    Method method = d.getClass().getMethod("getSize", Point.class);
    method.invoke(defaultDisplay, point);
    Measuredwidth = size.x;
    Measuredheight = size.y;

} catch (Exception e) {

}
if (Measuredwidth == 0){
    Measuredwidth = d.getWidth();
    Measuredheight = d.getHeight();
} 
```

# javascript - 编辑图表后更新 HighChart 上的系列数组

> ID：15574809
> 
> 赞同：2
> 
> 时间：2013-03-22T16:03:26.180
> 
> 标签：javascript, jquery, highcharts

我有一个 areaspline HighChart，我在其中实现它的方式可以在 Y 轴上上下拖动系列点并返回新的点。我按照这个例子[http://jsfiddle.net/highcharts/AyUbx/](http://jsfiddle.net/highcharts/AyUbx/)。该系列点是从以下数组创建的`data = [6,4,13,6,21,22]`

在我的代码中有以下功能：

```
 drop: function() {
 $('#drop').html(
 this.series.name + '</b> to</b> was set to <b>' + 
 Highcharts.numberFormat(this.y, 2) + '</b>'
 ),
} 
```

这是在我停止拖动点后用新值更新我选择移动的点的功能。

但是，我正在努力解决一两件事。首先，比如说我在数组中移动点 4，然后将值增加到 8。当我在移动这个点后记录数组时，新数组与 x 坐标以及新的坐标一起返回该点的值，例如返回的数组是 now `data = [6,1(or this.x value),8(new this.y value), 6,21,22]`。或者，如果我记录`series.data`，它会返回：

```
 series.data = [object, Object],[object, Object],[object, Object],[object, Object],[object, Object],[object, Object] 
```

我假设它返回 x 坐标值的原因是图形可以正确获取您选择移动的点的新位置。

如何只返回具有更新的 this.y 值的数组？那么在上面的示例中，返回的数组将是`data = [6,8,13,6,21,22]`还是只是将值返回`Object`到数组中？

其次，当我在完成编辑后记录数组输出时，它会记录两次输出。这有什么特别的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:25:01.047

您可以在以下位置找到所有 yData：`series.yData`和示例：[jSfiddle](http://jsfiddle.net/Fusher/AyUbx/724/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:29:42.803

我想通了。这可能是一种迂回的方式，但它确实有效。

因此，更多地研究这个问题，我更新后一个点的新值作为数组返回`[Xpos, Ypos]`。所以在上面的例子中，`data = [6,8,13,6,21,22]`是我开始的数组和返回的新数组：`data = [6,8,13,[Xpos,Ypos],21,22]`。

因此，要删除新返回数组中的 Xpos 值，我必须在更新后遍历数组，并且对于该数组中的每个元素，检查它是否是数组的实例。如果它是一个数组的实例，我将该元素设置为等于 Ypos 元素。这会自行返回该点的新值。

因此，在此示例中的 drop 函数中完成了此操作：

```
 function drop(e) {
        if (dragPoint) {
            if (e) {
                var deltaX = dragX,// - e.pageX,
                    deltaY = dragY - e.pageY,
                    newPlotX = dragPlotX - deltaX, //dragPoint.series.xAxis.minPixelPadding,
                    newPlotY = chart.plotHeight - dragPlotY + deltaY,
                    series = dragPoint.series,
                    newX = dragX === undefined ? dragPoint.x : dragPoint.series.xAxis.translate(newPlotX, true),
                    newY = dragY === undefined ? dragPoint.y : dragPoint.series.yAxis.translate(newPlotY, true);

                newX = filterRange(newX, series, 'X');
                newY = filterRange(newY, series, 'Y');
                dragPoint.update([newX, newY]);
            }   

         //My code to remove the newX from after the dragPoint.update([newX, newY]);             
         for (var i = 0; i<data.length; i++)
                    {
                        if(data[i] instanceof Array)
                        {
                            data[i] = data[i][1];

                        }
                        else
                        {
                            data[i] = data[i];
                        }                            
                    } 
```

# android - 为 7 英寸平板电脑创建特定布局以进行纵向/横向更改布局

> ID：15574814
> 
> 赞同：1
> 
> 时间：2013-03-22T16:04:09.150
> 
> 标签：android, layout, rotation, screen, tablet

我正在开发带有片段的典型平板电脑应用程序：左侧的元素列表和右侧的内容。对于智能手机版本，我只展示了一个带有元素列表的片段，对于平板电脑，我展示了 2 个带有列表和内容的片段。

为了处理屏幕旋转，我正在处理我的应用程序的旋转。当用户旋转屏幕并且我在右侧显示图像或一些文本时，我会全屏显示：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    Log.i(TAG, "onConfigurationChanged");
    if(MainFragmentActivity.isTablet)
    {   
        FragmentManager fm = getSupportFragmentManager();
        if(newConfig.orientation==Configuration.ORIENTATION_LANDSCAPE && !frameTabs.isShown()) //Show again the tabs fragment
        {
            Utils.goNormalScreen(this);
            frameTabs.setVisibility(View.VISIBLE);
        }
        else if(newConfig.orientation==Configuration.ORIENTATION_PORTRAIT && (fm.findFragmentByTag(Utils.SHOW_IMAGE_TAG) != null || fm.findFragmentByTag(Utils.SHOW_TEXT_TAG) != null 
                || fm.findFragmentByTag(Utils.SHOW_WEB_TAG) != null)) //Hide tabs fragment
        {
            Log.i(TAG, "Detected showing image");
            Utils.goFullScreen(this);
            frameTabs.setVisibility(View.GONE);
        }
    }
} 
```

问题是 7 英寸平板电脑：在纵向模式下，我想显示智能手机版本（1 个带有列表的片段），在横向模式下，我想显示带有 2 个片段的平板电脑版本。

所以在 onConfigurationChanged() 中我需要检测 7 英寸平板电脑并重新创建活动以更改布局，不是吗？怎么做？还有其他更好的方法可以让它工作吗？

我应该重新创建从服务器（ListView）再次获取所有数据的活动，还是将数据保存在捆绑包中并在旋转时重用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:09:02.523

首先，停止处理配置更改，然后将 2 个片段布局放入`layout-sw600dp-land`并保留其他片段布局。现在 Android 将决定在旋转时自动使用该布局。

# java - 在 IE7 和 IE8 中提交响应后无法创建会话

> ID：15574818
> 
> 赞同：1
> 
> 时间：2013-03-22T16:04:18.120
> 
> 标签：java, servlets, spring-security, ntlm, jespa

我正在使用一个允许用户同时使用 NTLM 登录和表单登录的应用程序。我的意思是用户可以使用他们的 Windows 凭据（使用 jespa）登录，但可以注销并使用检查数据库中的用户/密码的公式。如果您使用 IE8（构建大于 8.0.6001.18702）、IE9、Firefox 或 Chrome，它可以正常工作，但是当您使用 IE7（至少使用 7.0.5730.13）和 IE8（构建 8.0.6001.18702）时。

问题是注销后，当用户尝试使用有效用户重新登录时，会出现以下错误：

```
java.lang.IllegalStateException: Cannot create a session after the response has been committed
at org.apache.catalina.connector.Request.doGetSession(Request.java:2433)
at org.apache.catalina.connector.Request.getSession(Request.java:2153)
at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:833)
at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:216)
at org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy.onAuthentication(SessionFixationProtectionStrategy.java:91)
at org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy.onAuthentication(ConcurrentSessionControlStrategy.java:63)
at webapp.security.RedirectConcurrentSessionControlStrategy.onAuthentication(RedirectConcurrentSessionControlStrategy.java:33)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:204)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at webapp.security.jespa.filter.NtlmSecurityFilter$1.doFilter(NtlmSecurityFilter.java:170)
at jespa.http.HttpSecurityService.doFilter(HttpSecurityService.java:1465)
at webapp.security.jespa.filter.NtlmSecurityFilter.doFilter(NtlmSecurityFilter.java:178)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.session.ConcurrentSessionFilter.doFilter(ConcurrentSessionFilter.java:109)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:381)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:168)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:83)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:470)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.valves.RequestDumperValve.invoke(RequestDumperValve.java:156)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:291)
at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
at java.lang.Thread.run(Thread.java:662) 
```

securityContext.xml 如下：

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
         xmlns:beans="http://www.springframework.org/schema/beans"
         xmlns:p="http://www.springframework.org/schema/p"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:util="http://www.springframework.org/schema/util"
         xmlns:crypt="http://code.google.com/p/spring-crypto-utils/schema/crypt"
         xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
    http://code.google.com/p/spring-crypto-utils/schema/crypt http://code.google.com/p/spring-crypto-utils/schema/crypt.xsd"
         default-lazy-init="true">
<bean id="ntlmEntryPoint" class="webapp.security.jespa.authentication.NtlmAuthenticationEntryPoint"
      xmlns="http://www.springframework.org/schema/beans"/>
<bean id="loginEntryPoint" class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint" p:loginFormUrl="/login.html"
      xmlns="http://www.springframework.org/schema/beans"/>

<bean id="basicAuthenticationFilter" class="org.springframework.security.web.authentication.www.BasicAuthenticationFilter"
      xmlns="http://www.springframework.org/schema/beans">
    <property name="authenticationManager" ref="authenticationManager"/>
    <property name="authenticationEntryPoint" ref="basicAuthenticationEntryPoint"/>
</bean>

<bean id="basicAuthenticationEntryPoint" class="org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint"
      xmlns="http://www.springframework.org/schema/beans">
    <property name="realmName" value="remote eFrame"/>
</bean>

<http access-decision-manager-ref="accessDecisionManager" entry-point-ref="ntlmEntryPoint" security-context-repository-ref="securityContextRepository">
    <anonymous/>
    <intercept-url pattern="/**" access="PERMISSION_SYSTEM"/>
    <custom-filter ref="basicAuthenticationFilter" before="PRE_AUTH_FILTER"/>
    <custom-filter ref="concurrentSessionFilter" position="CONCURRENT_SESSION_FILTER"/>
    <custom-filter ref="${security.sso}ProcessingFilter" position="PRE_AUTH_FILTER"/>
    <!-- TODO make these URLs configurable -->
    <form-login login-page="/login.html" default-target-url="/index.html?formlogin=true" always-use-default-target="false"
                login-processing-url="/j_spring_security_check" authentication-failure-url="/login.html?login_error=1"
                authentication-success-handler-ref="postAuthenticationSuccessHandler"
                authentication-failure-handler-ref="postAuthenticationFailureHandler"/>
    <session-management invalid-session-url="/sessionExpired.html"
                        session-authentication-strategy-ref="redirectConcurrentSessionControlStrategy"/>
</http>

<bean id="postAuthenticationSuccessHandler" class="webapp.security.PostAuthenticationSuccessHandler"
      xmlns="http://www.springframework.org/schema/beans">
    <property name="defaultTargetUrl" value="/index.html?formlogin=true"/>
    <property name="alwaysUseDefaultTargetUrl" value="true"/>
</bean>

<bean id="postAuthenticationFailureHandler" class="webapp.security.PostAuthenticationFailureHandler"
      p:defaultFailureUrl="/login.html?login_error=1"
      xmlns="http://www.springframework.org/schema/beans"/>

<bean id="sessionRegistry" class="org.springframework.security.core.session.SessionRegistryImpl"
      xmlns="http://www.springframework.org/schema/beans"/>

<bean id="ajaxRedirectStrategy" class="webapp.security.AjaxRedirectStrategy"
      xmlns="http://www.springframework.org/schema/beans"/>

<bean id="concurrentSessionFilter" class="org.springframework.security.web.session.ConcurrentSessionFilter"
      xmlns="http://www.springframework.org/schema/beans">
    <property name="sessionRegistry" ref="sessionRegistry"/>
    <property name="expiredUrl" value="/sessionExpired.html"/>
    <property name="redirectStrategy" ref="ajaxRedirectStrategy"/>
</bean>

<bean id="redirectConcurrentSessionControlStrategy" class="webapp.security.RedirectConcurrentSessionControlStrategy"
      xmlns="http://www.springframework.org/schema/beans">
    <constructor-arg ref="sessionRegistry"/>
</bean>

<bean id="securityContextRepository" class="webapp.security.SecurityContextRepositoryDecorator" xmlns="http://www.springframework.org/schema/beans">
    <property name="target">
        <bean class="org.springframework.security.web.context.HttpSessionSecurityContextRepository">
        </bean>
    </property>
    <property name="sessionRegistry" ref="sessionRegistry"/>
</bean>

<authentication-manager alias="authenticationManager">
    <authentication-provider ref="ntlmAuthenticationProvider"/>
    <authentication-provider ref="databaseAuthenticationProvider"/>
</authentication-manager>

<!-- DATABASE Security Provider -->

<bean id="databaseAuthenticationProvider" class="webapp.security.db.DBAuthenticationProvider"
      xmlns="http://www.springframework.org/schema/beans">
    <property name="userDetailsService" ref="databaseUserDetailsService"/>
    <property name="fallbackPasswordEncoder">
        <bean class="org.springframework.security.authentication.encoding.ShaPasswordEncoder"/>
    </property>
    <property name="passwordEncoder" ref="passwordEncoder"/>
</bean>

<bean id="databaseUserDetailsService" class="webapp.security.DBUserDetailsService"
      xmlns="http://www.springframework.org/schema/beans"/>

<!-- NTLM provider -->

<bean id="ntlmAuthenticationProvider" class="webapp.security.jespa.provider.NtlmAuthenticationProvider"
      xmlns="http://www.springframework.org/schema/beans"/>

<bean id="ntlmProcessingFilter" class="webapp.security.jespa.filter.NtlmSecurityFilter"
      p:authenticationEntryPoint-ref="ntlmEntryPoint"
      p:authenticationManager-ref="authenticationManager" p:properties-ref="ntlmProperties"
      p:authenticationSuccessHandler-ref="postAuthenticationSuccessHandler"
      xmlns="http://www.springframework.org/schema/beans"/>

<bean id="ntlmProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean"
      xmlns="http://www.springframework.org/schema/beans">
    <property name="ignoreResourceNotFound" value="true"/>
    <property name="localOverride" value="true"/>
    <property name="properties">
        <props>
            <prop key="jespa.bindstr">${jespa.bindstr}</prop>
            <prop key="jespa.dns.servers">${jespa.dns.servers}</prop>
            <prop key="jespa.dns.site">${jespa.dns.site}</prop>
            <prop key="jespa.service.acctname">${jespa.service.acctname}</prop>
            <prop key="jespa.service.password">${jespa.service.password}</prop>
            <prop key="jespa.log.level">${jespa.log.level}</prop>
            <prop key="jespa.account.canonicalForm">${jespa.account.canonicalForm}</prop>
            <prop key="fallback.location">${fallback.location}</prop>
            <prop key="http.parameter.anonymous.name">formlogin</prop>
            <prop key="excludes">/j_spring_security_check,/login.html,/sessionExpired.html,logout.html,/images/*,/css/*,/styles/*,/js/*
            </prop>
        </props>
    </property>
</bean>

<global-method-security jsr250-annotations="enabled" access-decision-manager-ref="accessDecisionManager"/>

<bean id="accessDecisionManager" class="org.springframework.security.access.vote.UnanimousBased"
      xmlns="http://www.springframework.org/schema/beans">
    <property name="allowIfAllAbstainDecisions" value="false"/>
    <property name="decisionVoters">
        <list>
            <bean id="authenticatedVoter" class="org.springframework.security.access.vote.AuthenticatedVoter"/>
            <bean id="roleVoter" class="org.springframework.security.access.vote.RoleVoter">
                <property name="rolePrefix" value="PERMISSION_"/>
            </bean>
            <bean id="jsr250Voter" class="org.springframework.security.access.annotation.Jsr250Voter"/>
            <bean id="dataTypeVoter" class="webapp.DataTypeAccessVoter"/>
        </list>
    </property>
</bean> 
```

最后一个失败的方法是：

```
 public void doFilter(final ServletRequest request, final ServletResponse response, final FilterChain chain) throws IOException, ServletException {

    // nest inside the HttpSecurityService to get access to the authenticated SecurityProvider
    FilterChain nestedChain = new FilterChain() {

        public void doFilter(final ServletRequest servletRequest, final ServletResponse servletResponse) throws IOException, ServletException {
            final HttpServletResponse httpResponse = (HttpServletResponse) response;

            if (servletRequest instanceof HttpSecurityServletRequest) {
                final HttpSecurityServletRequest securityRequest = (HttpSecurityServletRequest) servletRequest;
                SecurityPrincipal principal = (SecurityPrincipal) securityRequest.getUserPrincipal();

                setCookie("NTLM-Auth-Capable", "true", (HttpServletRequest) request, httpResponse);
                try {
                    if (authenticationIsRequired(securityRequest, principal)) {
                        SecurityProvider securityProvider = securityRequest.getSecurityProvider();
                        NtlmAuthenticationToken authenticationToken = createNtlmAuthenticationToken(principal, securityProvider);

                        Authentication authResult = authenticationManager.authenticate(authenticationToken);
                            LOG.debug("Authentication success: {}", authResult.toString());
                        setCookie("NTLM-Auth-Enabled", "true", (HttpServletRequest) request, httpResponse);

                        SecurityContextHolder.getContext().setAuthentication(authResult);
                        onSuccessfulAuthentication((HttpServletRequest) servletRequest, httpResponse, authResult);
                    }
                } catch (AuthenticationException e) {
                    LOG.debug("Authentication request for NTLM principal [{}] failed: ", principal, e.getMessage());
                    SecurityContextHolder.getContext().setAuthentication(null);
                    onUnsuccessfulAuthentication((HttpServletRequest) servletRequest, httpResponse, e);
                    authenticationEntryPoint.commence(securityRequest, httpResponse, e);
                    return;
                } catch (SecurityProviderException e) {
                    LOG.debug("Authentication request for NTLM principal [{}] failed: ", principal, e.getMessage());
                    SecurityContextHolder.getContext().setAuthentication(null);
                }
            }
            // do not use wrapped (Jespa) instance, instead use the originals (Spring wrapped) versions.
            chain.doFilter(request, response);
        }
    };

    // call the super doFilter with the nested chain, which should call the code above.
    httpSecurityService.doFilter(request, response, nestedChain);
} 
```

在该方法中，当它检查 servletRequest 类时： **if (servletRequest instanceof HttpSecurityServletRequest) {**

使用**失败的 servletRequest 的 IE7 和 IE8**是 jespa.http.HttpSecurityServletRequest，但是使用**没有失败的 IE8 构建，IE9、FF 和 Chrome**的 servlet 请求不是那个。因此，出于某种原因，令人讨厌的 IE 版本似乎继续发送 NTLM 信息，因此 SpringSecurity 尝试进行身份验证。

Spring的版本是3.1.2（核心和安全），jespa是1.1.7，jcifs是1.3.15。

你们中有人遇到过这个问题吗？如果是这样，你做了什么来解决它？

非常感谢！

# django - Django 依靠 ForeignKey

> ID：15574821
> 
> 赞同：0
> 
> 时间：2013-03-22T16:04:28.323
> 
> 标签：django, django-models

我需要获取属于一个**组的所有****联系人**的总数，但是从名为**批处理**的模型中获取......

 ****这将有助于解释

**型号（未完整显示）**

```
class Batch(models.Model):
    #FK
    group = models.ForeignKey(Group, null=True, blank=True)

class Group(models.Model):
    name = models.CharField(max_length=60)

class Contact(models.Model):

    first_name = models.CharField(max_length=60)
    group = models.ForeignKey(Group) 
```

所以在批处理中我想做这样的事情......

```
 def get_contact_count(self):
        return len(self.group.contacts) 
```

但是由于小组的关系相反，我正在挣扎。

有什么选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T16:08:08.730

```
return self.group.contact_set.count() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:10:20.123

```
def get_contact_count(self):
    return Contact.objects.filter(group=self.group).count() 
```****

# javascript - 相对于容器的字体大小

> ID：15574823
> 
> 赞同：1
> 
> 时间：2013-03-22T16:04:37.277
> 
> 标签：javascript, jquery, html, css, font-size

我正在设计一个可以根据窗口大小调整自身的站点，并且我需要使文本大小相对于它的容器（一个 div）。我搜索了关于用css做的事情，发现这是不可能的。所以我正在尝试使用 JavaScript，但我不是 JavaScript 程序员。所以我搜索了我需要的每一段代码并将其编译为：

```
<script type="text/javascript">
    $(document).ready(function() {
        while(true) {
            document.getElementById("text").style.fontSize = $("container").height();
        }
    });
</script> 
```

（考虑到用户可能会重新调整窗口大小，“while”是不断调整大小）

我将脚本放在“head”标签中，但它不起作用。我不知道脚本是否错误，或者它是否没有运行。我究竟做错了什么？另外我想在脚本的末尾延迟，以避免它像疯了一样运行，但我不知道该怎么做。

提前致谢，

卢卡

感谢答案，但没有任何效果。我猜脚本没有运行，有什么问题？？？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:17:01.430

[http://jsfiddle.net/AyRMC/](http://jsfiddle.net/AyRMC/)

您可以使用视口单位：

```
.vw{
    font-size:3vw;
    color:red;
}
.vh{
    font-size:3vh;
    color:green;
}
.vmin{
    font-size:3vmin;
    color:blue;
} 
```

目前还没有*完全*支持，但 IE10、Chrome、Firefox 和 Safari 都支持它。

一个缺点（或可能的优点）是，至少在 chrome 中，文本不会随着视口大小的调整而缩放。

兼容性：[http ://caniuse.com/viewport-units](http://caniuse.com/viewport-units)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:10:06.687

如果您的意思是您正在制作一个响应式网站，那么您可以根据`document.documentElement.clientWidth`窗口调整大小处理程序的内部来更改字体大小。

此外，您可以使用`em`可缩放且适合移动设备的单位而不是像素。

CSS3 也有一个新的有趣的“根 em”单元：

> CSS3 引入了一些新的单位，包括代表“根 em”的 rem 单位。如果这还没有让你入睡，那么让我们看看 rem 是如何工作的。
> 
> em 单位与父级的字体大小相关，这会导致复合问题。rem 单位是相对于根元素或 html 元素的。这意味着我们可以在 html 元素上定义单个字体大小，并将所有 rem 单位定义为其百分比。

[http://snook.ca/archives/html_and_css/font-size-with-rem](http://snook.ca/archives/html_and_css/font-size-with-rem)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T16:11:04.647

你应该尝试这样的事情（如果我理解正确你想要做什么）：

```
$(".container").each(function(){ //if container is a class
    $('.text', $(this)).css({'font-size': $(this).height()+"px"}); //you should only have 1 #text in your document, instead, use class
}); 
```

或者更像这样的东西

```
$(window).resize(function(){
    $('.text').css({'font-size': $('#container').height()+"px"});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:12:02.910

试试这个：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(window).resize(function() {
            document.getElementById("text").style.fontSize = $(".container").height(); 
            // let container is a class 
        });
    });
</script> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-22T16:12:13.633

您可以使用 .resize() 事件处理程序，该处理程序仅在调整窗口大小时触发

```
var constant = [Some magic number]    

$(window).resize(function() {
    var fontSize = $(this).height()*$(this).width()*constant;
    $(html).css("font-size",fontSize)
} 
```

使用常量根据新的宽度/高度计算字体大小

# javascript - 如果我只需要支持 IE10 及更高版本（以及其他现代浏览器），HTML 选项卡是最好的方式

> ID：15574827
> 
> 赞同：0
> 
> 时间：2013-03-22T16:04:41.653
> 
> 标签：javascript, html, css, internet-explorer-10

我们只为 Windows 8 用户制作内部工具，这就是为什么 IE10 是硬性要求。

我想创建标签 - 并且想知道是否有更简单的方法（无 javascript？）来制作它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:35:32.703

是的，您可以使用三种方法：

*   `:focus`方法（即使在 IE7 中也可以使用，尽管那里有点奇怪） -[示例](http://www.cssplay.co.uk/menu/cssplay-focus.html)
*   `:target`方法 -[示例](http://www.cssplay.co.uk/menu/cssplay-tabbed-pages.html)
*   复选框 hack 方法（适用于 IE9+，与前两个相比的优点是不会破坏后退按钮的行为） -[示例](http://www.cssplay.co.uk/menu/cssplay-radio-tabs.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T21:23:21.490

注意：不是代码的所有者（从某个地方得到的，不记得了）

HTML：

```
<div class="tabs">
  <div class="tab">
    <input type="radio" id="tab-1" name="tab-group-1" checked>
     <label for="tab-1">Tab One</label>
     <div class="content">stuff</div>
  </div>
  <div class="tab">
    <input type="radio" id="tab-2" name="tab-group-1">
    <label for="tab-2">Tab Two</label>
    <div class="content">more stuff</label></div>
  </div>
</div> 
```

CSS：

```
.tabs {
  position: relative;   
  min-height: 200px; /* This part sucks */
  clear: both;
  margin: 25px 0;
}
.tab {
  float: left;
}
.tab label {
  background: #eee; 
  padding: 10px; 
  border: 1px solid #ccc; 
  margin-left: -1px; 
  position: relative;
  left: 1px; 
}
.tab [type=radio] {
  display: none;   
}
.content {
  position: absolute;
  top: 28px;
  left: 0;
  background: white;
  right: 0;
  bottom: 0;
  padding: 20px;
  border: 1px solid #ccc; 
}
[type=radio]:checked ~ label {
  background: white;
  border-bottom: 1px solid white;
  z-index: 2;
}
[type=radio]:checked ~ label ~ .content {
  z-index: 1;
} 
```

# java - 使用 ASP .NET 中的 Servlet

> ID：15574838
> 
> 赞同：1
> 
> 时间：2013-03-22T16:05:15.517
> 
> 标签：java, asp.net, servlets

有没有办法从我的 aspx 页面使用 Servlet？我的应用程序正在 IIS 服务器上运行。我希望单击按钮能够运行 Servlet 方法中存在的 Java 代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:58:51.620

是的，有办法。

1.  以通常的方式将 servlet 部署到 servlet 容器，例如在同一台服务器上。这样，ASP.NET 程序可以在 servlet 的 URL 上调用 HTTP Web 请求，并以流或字符串的形式获取其 HTTP 响应主体。

2.  将 servlet 的代码重构为一个独立的 Java 类，您可以通过嵌入在页面上的小程序或通过命令运行时（如`java com.example.SomeClass`.

3.  将 Java 代码移植到 C#/.NET 代码，以便它可以在与 ASP.NET 程序相同的上下文中运行。

# iphone - 如何截取已转换的视图的屏幕截图？

> ID：15574845
> 
> 赞同：1
> 
> 时间：2013-03-22T16:05:32.813
> 
> 标签：iphone, objective-c, quartz-graphics

我可以使用此代码裁剪视图

```
- (UIImage *)captureScreenInRect:(CGRect)captureFrame {
    CALayer *layer;
    layer = self.view.layer;
    UIGraphicsBeginImageContext(self.view.bounds.size);
    CGContextClipToRect (UIGraphicsGetCurrentContext(),captureFrame);
    [layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *screenImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return screenImage;
} 
```

但是我有一个用变换放大的图像视图，它没有按比例显示。

如何准确捕捉*用户*在屏幕上看到的内容

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:17:32.757

Stack Overflow 问题[“renderInContext:”和 CATransform3D](https://stackoverflow.com/questions/9530250/renderincontext-and-catransform3d)有更多信息，但要点是：

> QCCompositionLayer、CAOpenGLLayer 和 QTMovieLayer 图层不会被渲染。此外，不会渲染使用 3D 变换的图层，也不会渲染指定背景过滤器、过滤器、合成过滤器或遮罩值的图层。

（来自[CALayer 文档](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html)）。

此技术问答中还提供了更多信息：http: [//developer.apple.com/library/ios/#qa/qa1703/_index.html](http://developer.apple.com/library/ios/#qa/qa1703/_index.html)

如果您的应用没有进入应用商店，您可以使用未记录的`UIGetScreenImage`API：

```
// Define at top of implementation file
CGImageRef UIGetScreenImage(void);

...

- (void)buttonPressed:(UIButton *)button
{
  // Capture screen here...
  CGImageRef screen = UIGetScreenImage();
  UIImage* image = [UIImage imageWithCGImage:screen];
  CGImageRelease(screen);

  // Save the captured image to photo album
  UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);
} 
```

（来自[约翰·穆肖](http://mobiledevelopertips.com/user-interface/screen-capture-using-uigetscreenimage.html)）

但是，使用此 API 会使您的应用无法获得批准。

我一直找不到任何其他解决方法。

# javascript - 受污染的画布，跨域数据

> ID：15574848
> 
> 赞同：1
> 
> 时间：2013-03-22T16:05:43.690
> 
> 标签：javascript, jquery, image

我正在尝试使用[color-thief.js](http://lokeshdhakar.com/projects/color-thief/)从网络上的图像中获取颜色数据。

```
myImage = $('#myImage');
dominantColor = getDominantColor(myImage);
paletteArray = createPalette(myImage, 10); 
```

Chrome 抱怨安全问题：

```
Unable to get image data from canvas because 
the canvas has been tainted by cross-origin data. 
```

这是[jsFiddle](http://jsfiddle.net/mrcactu5/d6Qka/)。（为什么我只有一个`<img>`标签时它有两个苹果？？）

这个问题以前有过解答，但我无法理解。
例如[，将图像从数据 URL 绘制到](https://stackoverflow.com/questions/4773966/drawing-an-image-from-a-data-url-to-a-canvas)似乎特定于 HTML5 Canvas 的画布上。

# java - Java JButton 无响应

> ID：15574849
> 
> 赞同：-2
> 
> 时间：2013-03-22T16:05:45.953
> 
> 标签：java, swing, jbutton

我有一个简单的程序，它应该接受来自文本字段或按钮的输入。

但是，该按钮完全没有响应。我错过了一些明显的东西吗？

```
public class BoxDiagram extends GraphicsProgram {

private static final int MAX_CHARS = 25;

public void init() {
    addActionListeners();
    nameField = new JTextField(MAX_CHARS);
    nameField.addActionListener(this);
    addButton = new JButton("Add");
    add(nameField, SOUTH);
    add(addButton, SOUTH);
}

public void actionPerformed(ActionEvent e) {
    Object source = e.getSource();
    if (source == addButton || source == nameField) {
        add(new GLabel("hello", getWidth() / 2, getHeight() / 2));
    }
}

private JTextField nameField;
private JButton addButton;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:09:54.280

缺少此语句：`addButton.addActionListener(this);`您仅将其添加到名称字段中。

# c# - 触发键盘按键事件而不按键盘上的键

> ID：15574850
> 
> 赞同：8
> 
> 时间：2013-03-22T16:05:47.317
> 
> 标签：c#, wpf, keyboard-events

如何在不按键盘按键的情况下触发按键事件？我尝试使用[此处](https://stackoverflow.com/questions/1645815/how-can-i-programmatically-generate-keypress-events-in-c)的解决方案，但出现以下异常：

> 'System.Windows.PresentationSource.FromVisual(System.Windows.Media.Visual)' 的最佳重载方法匹配有一些无效参数。

考虑`Shift+A`包含来自键盘的 2 个按键事件，我怎样才能在不按下键盘的情况下做到这一点？（让，只需在按钮单击的文本框中打印大写 A）

**我的代码**

```
var key = Key.A;                    // Key to send
var target = Keyboard.FocusedElement;    // Target element
var routedEvent = Keyboard.KeyDownEvent; // Event to send

target.RaiseEvent(new System.Windows.Input.KeyEventArgs(Keyboard.PrimaryDevice, System.Windows.PresentationSource.FromVisual(target), 0, key) { RoutedEvent = routedEvent }); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T19:13:46.653

`System.Windows.Forms.SendKeys.Send()`为我成功了。

有关高级说明和可用代码列表，请参阅[方法文档](https://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys.send%28v=vs.110%29.aspx)。

例如，要发送`Shift`+`A`我使用了`SendKeys.Send("+(a)")`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T16:54:54.503

您需要转换为`Visual`：

```
var key = Key.A;                    // Key to send
var target = Keyboard.FocusedElement;    // Target element
var routedEvent = Keyboard.KeyDownEvent; // Event to send

target.RaiseEvent(new System.Windows.Input.KeyEventArgs(Keyboard.PrimaryDevice,
 System.Windows.PresentationSource.FromVisual((Visual)target), 0, key) { RoutedEvent = routedEvent }); 
```

您还可以指定您的目标是特定的文本框，例如：

```
var target = textBox1;    // Target element 
```

代码实际所做的是触发特定元素的 keydown 事件。所以有一个 keydown 处理程序是有意义的：

```
private void textBox1_KeyDown(object sender, System.Windows.Input.KeyEventArgs e)
{

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:09:57.017

模拟键盘事件的简单可靠的方法是使用 keybd_event api

你可以在这里得到参考

[http://www.pinvoke.net/default.aspx/user32.keybd_event](http://www.pinvoke.net/default.aspx/user32.keybd_event)

这里有更多关于它的文章

[http://www.codeproject.com/Articles/7305/Keyboard-Events-Simulation-using-keybd_event-funct](http://www.codeproject.com/Articles/7305/Keyboard-Events-Simulation-using-keybd_event-funct)

# javascript - Wordpress - Javascript 切换 Div 元素显示样式

> ID：15574858
> 
> 赞同：0
> 
> 时间：2013-03-22T16:06:18.173
> 
> 标签：javascript, html, css, wordpress

我有一个正在处理的代码，它有一个标题标签和一个向右浮动的箭头，当您单击该箭头时，它会显示隐藏元素的内容并将向下箭头更改为向上箭头。一切似乎都工作正常，除了我在切换中图像下的链接不起作用。由于某种原因，我无法突出显示文本，所以我假设我的编码中某处存在重叠。

JavaScript

```
 function toggleDisplayNewark() {
    document.getElementById("toggleMe").style.display == "none";
    if(document.getElementById("toggleMe").style.display == "none" ) {
        document.getElementById("toggleMe").style.display = "inline";
        document.getElementById("toggleMe").style.visibility = "visible";
        document.getElementById("arrow").style.background = "url(img/up.png) no-repeat";
    } else {
        document.getElementById("toggleMe").style.display = "none";
        document.getElementById("arrow").style.background = "url(img/down.png) no-repeat";
    }
} 
```

的HTML

```
 <div id='newark'>
                    <div class='text-heading'>
                        <h2>Newark</h2>
                        <a href="#newark" onclick="toggleDisplayNewark();">
                            <div id='arrow'></div>
                        </a>    
                    </div>
                    <div id='toggleMe' style='display: none;'>  
                        <div class='alignleft thumb-imgs'>
                            <img src='img/excercise.png' />
                            <a href='http://exercise.com/' target='_blank'>Exercise Institute</a>
                        </div>                      
                        <div class='clear'></div>   
                    </div>
                </div> 
```

CSS

```
#arrow {background: url(http://emf-websolutions.com/wp-content/uploads/2013/03/down.png) no-repeat; height: 27px; width: 29px; float: right; margin: -30px 10px 0 0;}   
#toggleMe {display: none;}
.text-heading {-webkit-border-radius: 5px; border-radius: 5px; margin: 10px 0; width: 640px; padding: 5px 0px; background: #333; border: 1px solid red;}
.clear {clear: both;}
.thumb-imgs {width: 204px; height: 210px; padding: 5px 5px 40px 5px;} 
```

在将其放入 wordpress 之前，我将其构建在一个 html 文件中，以便确保它正常工作。我似乎无法找到问题所在。我已经删除了编码，这样它就不会占用太多空间。这样做的想法是在右侧有一个带有箭头的标题，以下拉此框，其中包含 3 张图像，每行下都有一个链接。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T19:57:41.963

[http://jsfiddle.net/QXSXC/](http://jsfiddle.net/QXSXC/)

删除onclick

```
<a href="#newark" > 
```

并使用 jQuery：

```
$('#newark').click(function() {
    document.getElementById("toggleMe10").style.display == "none";
    if(document.getElementById("toggleMe10").style.display == "none" ) {
        document.getElementById("toggleMe10").style.display = "inline";
        document.getElementById("toggleMe10").style.visibility = "visible";
        document.getElementById("arrow10").style.background = "url(img/up.png) no-repeat";
    } else {
        document.getElementById("toggleMe10").style.display = "none";
        document.getElementById("arrow10").style.background = "url(img/down.png) no-repeat";
    }
}); 
```

`#newark`如果您不能使用 jQuery，您可以使用纯 JS google分配一个处理程序

# javascript - 活跃班级问题

> ID：15574860
> 
> 赞同：0
> 
> 时间：2013-03-22T16:06:27.147
> 
> 标签：javascript

我设置了一个*活动*类，如果 href 类似于“gallery.htm”或适当的网页，它会很好地工作。但是在我更改布局后，我更喜欢为每个链接目标设置一个 ID，以便用户仅被定向到同一页面中的目标，而不是在页面之间切换。

我想这个问题太简单了，我在谷歌上找不到任何相关的东西。无论如何，请不要介意；我还不擅长javascript。

现在的问题是无法使用此脚本设置活动类。

```
var url = window.location.pathname,
    urlRegExp = new RegExp(url.replace(/\/$/, '') + "$");
$('a').each(function () {
    if (urlRegExp.test(this.href.replace(/\/$/, ''))) {
        $(this).addClass('active1st');
    }
}); 
```

[这里](http://jsfiddle.net/R65Gd/1/)是示例。

那么有什么地方不对劲吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:09:04.040

没有与路径匹配的元素或元素集`'#Menu div span #Menu1st a'`。

您的标识符是`a`and `b`，并且无处出现`Menu`或`Menu1st`出现。

编辑：

现在随着您的更新，您的标识符`a`和`b`是`div`元素，而不是`a`（链接）元素；您也没有在选择器中指定`a`标识符，而只是尝试将其应用于所有`a` *元素*。如果你在选择器的前面放了一个哈希，这样选择器是`#a`，那么它将为具有*该标识符的**那个*元素执行，但正如我所说，这不是一个链接，也没有一个，因此会中断；而且，即使它*是*一个链接并且逻辑*会*执行，那么它*仍然会**`href``this.href.replace`***由于您应用的类的拼写错误而被破坏（例如，它在您的样式表中不存在！）。****

 ***上面总结了几个问题。我不确定人们需要告诉他们这些东西，只要注意——或者如果你盯着这样的东西太久了，就休息 10 分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:14:42.847

未经测试，但我也认为这是一个选择器问题。

如果我错了，请纠正我，但几个 id 选择器总是会导致问题。

在不知道您的完整 html 的情况下，我想这会起作用：

```
$(#Menu1st a') 
```***

# python - 如何使用 PIL 库从字符串中读取 Exiftags？

> ID：15574862
> 
> 赞同：2
> 
> 时间：2013-03-22T16:06:31.633
> 
> 标签：python, python-imaging-library

我正在做一个项目，我将 exiftags 元数据（包括图像系统以及自定义数据）作为 API 端点的一部分。如果标签作为字符串接收，我需要知道如何提取/解析 exiftags。我指的是[用于 python 的 Exif 操作库](https://stackoverflow.com/questions/765396/exif-manipulation-library-for-python)

但对我来说，我没有图像。我将信息作为端点的一部分获得，如下所示：

```
消息：“描述在这里”，
元数据："a:7:{s:4:"exif";a:27:"postgroup";a:1:{s:3:"key";s:5:"41926";}s:3: "键";s:5:"41926";i:1;s:5:"41926";}",
攻击性：0.......

```

如果有人可以给我一些关于从字符串中检索 exiftags 的指导，我将非常感激，如果可能的话，在 python 中使用 PIL 库。提前致谢。

# visual-studio-2012 - Visual Studio 2012 内存峰值和挂起

> ID：15574863
> 
> 赞同：10
> 
> 时间：2013-03-22T16:06:32.080
> 
> 标签：visual-studio-2012

最近，Visual Studio 2012 一直在行动。在开发 ASP .NET 应用程序时，我经常在浏览器 (Chrome) 和 Visual Studio IDE 之间使用选项卡。有时，当我尝试返回 Visual Studio 时，窗口不会出现。那时，如果我查看我的任务管理器，我会发现该`devenv.exe`进程正在使用大约 10% 到 20% 的 CPU 时间，并且正在为自己收集越来越多的内存。这会持续大约 20 秒左右，然后 IDE 才会响应并再次可用。最终，IDE 无法恢复，我需要终止该进程。

我的桌面是 64 位四核 i7 @ 3.4GHz，具有 8 GB RAM，运行 Windows 7 操作系统。通常`devenv.exe`将使用大约 500 MB 的 RAM。当上述问题开始发生时，它会迅速上升到 1.5 GB，并已高达 2 GB。

我使用的唯一插件是 ReSharper 7.1。除了内置的深色方案外，我没有进一步的 IDE 自定义。

**编辑**——我尝试禁用和删除对这个问题没有影响的 R#。

**编辑**——关于 Microsoft Connect 的[错误报告](https://connect.microsoft.com/VisualStudio/feedback/details/781936/visual-studio-2012-memory-spike-and-hanging)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-06T15:39:08.247

在我安装了 VS 2012 更新 4 之前，我一直都有这个问题，然后一切都消失了。我也只使用 resharper（版本 8）。

# sql - 使用相同的键组合行中的数据

> ID：15574864
> 
> 赞同：1
> 
> 时间：2013-03-22T16:06:32.623
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我的 sql 语句看起来像这样。

```
SELECT fe.AdmSiteID,A.SiteDescription, 
        '' AS SNAP, ''  AS TANF, '' AS Foster, ''   AS FDPIR, ''    AS Homeless, '' AS Migrant, ''  AS Runaway, 
        '' AS HeadStart, '' AS EvenStart, ''    AS DirectCertified,  '' AS NoApplication, '' AS FreeIncome, '' AS ReducedIncome, 
        ''  AS RefusedBenefits,''   AS DeniedIncome, '' AS DeniedVerification,  ''  AS DeniedNotValid, ''   AS TempFreeGrace, ''    AS TempReducedGrace, 
        ''  AS DeniedInactive, ''   AS DNQ, '' AS ExpiredGrace 
FROM FarEligibilityEnrollmentCounts fe 
inner join AdmSites A on fe.AdmSiteID = A.AdmSiteID 
GROUP BY fe.AdmSiteID,A.SiteDescription 
union
select fe.AdmSiteID,A.SiteDescription,sum(PatronCount) as SNAP, ''  AS TANF, '' AS Foster, ''   AS FDPIR, ''    AS Homeless, '' AS Migrant, ''  AS Runaway, 
        '' AS HeadStart, '' AS EvenStart, ''    AS DirectCertified,  '' AS NoApplication, '' AS FreeIncome, '' AS ReducedIncome, 
        ''  AS RefusedBenefits,''   AS DeniedIncome, '' AS DeniedVerification,  ''  AS DeniedNotValid, ''   AS TempFreeGrace, ''    AS TempReducedGrace, 
        ''  AS DeniedInactive, ''   AS DNQ, '' AS ExpiredGrace
        from FarEligibilityEnrollmentCounts fe 
        inner join AdmSites A on fe.AdmSiteID = A.AdmSiteID 
        where fe.FarStudentCaseID = '4FA4AED1-75C9-4CB4-9FF2-102C2D964CC1'
        Group BY fe.AdmSiteID,A.SiteDescription       
union 
select fe.AdmSiteID,A.SiteDescription,'' as SNAP, sum(PatronCount)  AS TANF, '' AS Foster, ''   AS FDPIR, ''    AS Homeless, '' AS Migrant, ''  AS Runaway, 
        '' AS HeadStart, '' AS EvenStart, ''    AS DirectCertified,  '' AS NoApplication, '' AS FreeIncome, '' AS ReducedIncome, 
        ''  AS RefusedBenefits,''   AS DeniedIncome, '' AS DeniedVerification,  ''  AS DeniedNotValid, ''   AS TempFreeGrace, ''    AS TempReducedGrace, 
        ''  AS DeniedInactive, ''   AS DNQ, '' AS ExpiredGrace
        from FarEligibilityEnrollmentCounts fe 
        inner join AdmSites A on fe.AdmSiteID = A.AdmSiteID 
        where fe.FarStudentCaseID = 'B348D33C-5C32-4CFE-B508-1E0CE2A9D428'
        Group BY fe.AdmSiteID,A.SiteDescription 
```

查询返回如下所示的数据。

```
AE1EF8E3-A093-410D-A02A-2B6DB334C758    Dowell Middle School    0       0
0359AF48-882F-4D54-B39D-341B17D64403    Evans Middle School     0       0
0359AF48-882F-4D54-B39D-341B17D64403    Evans Middle School     0       1595
0359AF48-882F-4D54-B39D-341B17D64403    Evans Middle School     1045    0 
```

我正在尝试合并 3 Evans Middle School 列，所以最终结果应该看起来像

```
AE1EF8E3-A093-410D-A02A-2B6DB334C758    Dowell Middle School    0       0
0359AF48-882F-4D54-B39D-341B17D64403    Evans Middle School     1045    1595 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:08:37.930

```
select  AdmSiteID
,       SiteDescription
,       sum(SNAP) as TotalSNAP
,       sum(TANF) as TotalTANF
,       ... Other Sums Here ...
from    (
        ...  Your Query With Unions Here ...
        ) as SubQueryAlias
group by
        AdmSiteID
,       SiteDescription 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:25:50.943

```
DECLARE @tab TABLE(Guids VARCHAR(100),School VARCHAR(30),Snap INT,Tnaf INT)
INSERT INTO @tab
VALUES('AE1EF8E3-A093-410D-A02A-2B6DB334C758','Dowell Middle School',0,0)
  ,('0359AF48-882F-4D54-B39D-341B17D64403','Evans Middle School',0,0)
  ,('0359AF48-882F-4D54-B39D-341B17D64403','Evans Middle School',0,1595)
  ,('0359AF48-882F-4D54-B39D-341B17D64403','Evans Middle School',1045,0)

SELECT *
FROM @tab 

SELECT DISTINCT Guids
,School
      ,SUM(Snap) OVER(PARTITION BY Guids,School) AS TtlSnap
      ,SUM(Tnaf) OVER(PARTITION BY Guids,School) AS TtlTnaf
FROM @tab
ORDER BY School 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:34:15.940

使用[CTE选项](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)

```
 ;WITH cte AS
 (
  SELECT AdmSiteID, SiteDescription, sum(PatronCount) as SNAP, '' AS TANF
  FROM FarEligibilityEnrollmentCounts JOIN ...  
  GROUP BY AdmSiteID, SiteDescription 
  UNION 
  SELECT AdmSiteID, SiteDescription, '' as SNAP, sum(PatronCount)  AS TANF
  FROM FarEligibilityEnrollmentCounts JOIN ... 
  GROUP BY AdmSiteID, SiteDescription
  ) 
  SELECT AdmSiteID, SiteDescription, MAX(SNAP), MAX(TANF)
  FROM cte
  GROUP BY AdmSiteID, SiteDescription 
```

您也可以在没有过多联合的情况下尝试此脚本

```
select fe.AdmSiteID,A.SiteDescription,
       ISNULL(SUM(CASE WHEN fe.FarStudentCaseID = '4FA4AED1-75C9-4CB4-9FF2-102C2D964CC1' THEN PatronCount END), 0) AS SNAP,
       ISNULL(SUM(CASE WHEN fe.FarStudentCaseID = 'B348D33C-5C32-4CFE-B508-1E0CE2A9D428' THEN PatronCount END), 0) AS TANF,
       '' AS Foster, ''   AS FDPIR, ''    AS Homeless, '' AS Migrant, ''  AS Runaway, 
       '' AS HeadStart, '' AS EvenStart, ''    AS DirectCertified,  '' AS NoApplication, '' AS FreeIncome, '' AS ReducedIncome, 
       '' AS RefusedBenefits,''   AS DeniedIncome, '' AS DeniedVerification,  ''  AS DeniedNotValid, ''   AS TempFreeGrace, ''    AS TempReducedGrace, 
       '' AS DeniedInactive, ''   AS DNQ, '' AS ExpiredGrace
from FarEligibilityEnrollmentCounts fe 
  inner join AdmSites A on fe.AdmSiteID = A.AdmSiteID       
Group BY fe.AdmSiteID,A.SiteDescription 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/f3c56/1)上的简单演示[](http://sqlfiddle.com/#!3/f3c56/1)

# c# - 使用 WebBrowser 登录网站后使用 WebClient 下载文件

> ID：15574880
> 
> 赞同：2
> 
> 时间：2013-03-22T16:07:52.083
> 
> 标签：c#, browser, download, webclient

我使用 WebBrowser 类登录网站并获取我想要的下载网址。我无法通过 WebBrowser 获取下载，因为我无法以编程方式与下载对话框通信。

根据我的研究，我似乎必须使用 WebClient 来处理我的下载。如何将“经过身份验证的”cookie 从 WebBrowser 传递到 WebClient 并在不打扰对话框的情况下获取我的下载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:10:10.950

您可以使用 InternetGetCookieEx API 获取 WebBrowser 的凭据。然后，您可以将 cookie 集合附加到 HTTPWebRequest 并使用来自 WebBrowser 控件的凭据填充它。

话虽如此，当您说“无法以编程方式与下载对话框通信”时，您是什么意思？您希望进行什么样的交流？

# jsf - 如何在 JSF 中显示还需要可编辑的字符串列表？

> ID：15574881
> 
> 赞同：0
> 
> 时间：2013-03-22T16:07:53.067
> 
> 标签：jsf

我有一个支持 bean，它有一个名为 List cites 的属性，其中 Cite 有一个名为 "value" 的字符串属性。在 init 方法中，我获取存储为逗号分隔字符串的值，将它们拆分为单个字符串，构建一个列表并显示引用列表。但我也想让用户能够在现有引用的基础上添加更多引用/编辑现有引用内容。我怎样才能做到这一点 ？下面的代码是xhtml中的jsf，但它对我不起作用..

```
<div style="margin-top: 10px; padding: 3px 3px;">
                    <fieldset>                          
                        <legend>Cites Affected</legend>
                        <h:dataTable value="#{dataEntry.cites}" var="citeAffected">
                            <h:column>
                            <f:facet name="header" >
                                <h:outputText value="Cite"/>
                            </f:facet>    
                            <h:inputText value="#{citeAffected.value}"/>
                            </h:column>
                        </h:dataTable>
                    <h:commandButton value="Add cite" process="@this" action="#{dataEntry.addCite}"/>                       
                    </fieldset>
                </div> 
```

在支持豆中..这就是我所拥有的

```
DataEntry
{
private List<CiteAffected> cites = new ArrayList<CiteAffected>();

public void addCite()
{
cites.add(new CiteAffected());
} 

public void editMetadata()
{
//update the db object 
}
private void init()
{

// get the value from database as a comma separated string
for(String citeAffected : Arrays.asList(sourceManualLoadProperties.getCitesAffected().split(",")))
            {
                CiteAffected cite = new CiteAffected();
                cite.setValue(citeAffected);
                this.cites.add(cite);
}           }
} 
```

我得到的错误是..只要我点击命令按钮“添加引用”，当我希望它简单地添加另一个文本框但也显示现有值时，所有现有值都会消失..

```
public class CiteAffected
{
    private String value;

    /**
     *
     * @return the cite affected
     */
    public String getValue()
    {
        return value;
    }

    /**
     *
     * @param value the cite affected
     */
    public void setValue(final String value)
    {
        this.value = value;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:14:40.670

只需删除`process="@this"`from并至少`<h:commandButton>`包含您的托管 bean 。`@ViewScoped`

JSF 代码：

```
<h:form>
    <h:dataTable id="dtCites" value="#{dataEntry.cites}" var="citeAffected">
         <!-- content... -->
    </h:dataTable>
    <h:commandButton value="Add cite" action="#{dataEntry.addCite}">
        <f:ajax render="dtCites" />
    </h:commandButton>
</h:form> 
```

托管豆：

```
@ManagedBean
@ViewScoped
public class DataEntry {
    //...
} 
```

# windows-8 - Windows 8 应用的广告提供商

> ID：15574885
> 
> 赞同：2
> 
> 时间：2013-03-22T16:08:02.680
> 
> 标签：windows-8, ads

除了 MS 和 AdDuplex，还有人知道 Windows 8 应用程序的广告提供商吗？我很想再找一个，因为 AdDuplex 根本不起作用。我目前正在实现 ih-house 应用程序功能，但宁愿使用像 AdMob 那样的现成应用程序功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T14:35:02.187

也可以使用 Leadbolt：http: [//www.leadbolt.com/blog/2013/06/official-launch-of-leadbolt-windows-8-sdk](http://www.leadbolt.com/blog/2013/06/official-launch-of-leadbolt-windows-8-sdk)

如果您使用了其中的一些，请分享您获得的结果（填充率、eCPM）。

谢谢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-22T00:05:39.970

在 Windows 8 上，您仅支持

*   酒吧中心
*   加双工
*   移动电话

其余所有“当前”仅适用于 Windows Phone

但是在 AdRotator 中，我们能够通过他们的 WebAPI 获得大部分列表，并且我们计划将 WebAPI 支持扩展到 AdRotator V2 ( [http://getadrotator.codeplex.com](http://getadrotator.codeplex.com) )中的所有平台

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-19T10:35:00.697

据我所知，只有 Microsoft pub center 和 adduplex 可用。现在 inmobi 也为 w8 (js+xaml) 的广告提供 SDK

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:33:09.123

请参阅下面的列表。更多信息在这里。

[AdRotator](http://wp7adrotator.codeplex.com/)
Microsoft
PubCenter AdDuplex
Google AdMob
Inner-Active / Nokia Ad Exchange MobFox
Smaato（不适用于非位置感知项目，请参阅上面的链接） 默认房屋广告 - 开发人员实施的基于项目的广告（文档待定） 支持无广告显示 两者都位置感知和非位置感知库现在可用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-11T17:06:32.847

上周我一直在使用铅螺栓，结果如下：

观看次数/展示点击次数 ECPM EPC CTR 收入

12,600 128 $0.00 $0.00 1.02% $0.00

总结一下：12600 次展示，0 收入。

我很快就会尝试 inmobi，我会告诉你的！！！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-09T19:22:36.353

MediaBrix、Inmobi、MS ads、LeadBolt 等都有广告。[在http://services.windowsstore.com](http://services.windowsstore.com)查看列表并按广告过滤。

另请注意，ADTECH 最近在他们的网站上提到他们有一个新的 Windows 8 SDK。 [http://www.adtech.com/en/](http://www.adtech.com/en/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-03T19:50:27.217

我使用 Leadbolt 和 PubCenter 已经有一段时间了，收入结果很差。几周前，我发现了 DesktopAd (www.desktopad.com)，它给我带来的收入是 PubCenter 的 10 倍，而且填充率几乎是 100%。对于 Windows 8 开发人员来说，值得一试。

# javascript - 是否可以创建一个使用 c 库进行 monetdb 连接的 node.js 模块？

> ID：15574886
> 
> 赞同：5
> 
> 时间：2013-03-22T16:08:04.193
> 
> 标签：javascript, node.js, database, monetdb, node-ffi

我正在尝试`monetdb`与`node.js`. 我有一个简单的（20 行）c 程序，可以`moentdb`使用 mapi 库进行查询。

我可以使用这些库来构建`node.js`使用这些库并连接到的东西（模块/插件）`monetdb`吗？

（使用 odbc 是一种选择，但它有其自身的缺点。）

**更新 1 ：**
node-ffi 非常棒。我能够很容易地创建一个获取表程序。（例如，我添加了我的工作代码。）

因此，如果我有 3 个选项
1\. ODBC
2\. node-ffi
3\. ac 程序来获取数据库数据并通过套接字监听来自 node.js 的连接

就性能而言，这是更好的实现选择，如果我有更少的时间来开发 node.js 的插件

```
var ffi = require("ffi");
var libmylibrary = ffi.Library('/usr/local/lib/libmapi.so', {
    "mapi_connect":["int",["string",'int',"string","string","string","string"]],
    "mapi_query":['int',["int","string"]],
    "mapi_fetch_row":["int",["int"]],
    "mapi_fetch_field":["string",["int","int"]]
});

var res = libmylibrary.mapi_connect("localhost", 50000,"monetdb", "monetdb", "sql", "demo");
console.log(res);
var ret=libmylibrary.mapi_query(res,"select * from table");
while(libmylibrary.mapi_fetch_row(ret)){
    console.log(libmylibrary.mapi_fetch_field(ret,0));
    console.log(libmylibrary.mapi_fetch_field(ret,1));
} 
```

**更新 2：**
不建议将上述代码用于生产用途...它不使用 node.js 的异步功能，因此请在婴儿步骤中使用它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:38:22.580

虽然 FFI 使调用本机代码变得容易，但您确实不应该将它用于您必须经常做的事情，例如调用数据库库。从文档：

> 与 FFI 调用相关的开销非常重要。将 strtoul() 的硬编码绑定版本与 strtoul() 的 FFI 版本进行比较表明，本机硬编码绑定的速度要快几个数量级。所以不要仅仅因为它更快就使用 C 版本的函数。FFI 调用的成本很高，所以让它们物有所值。

换句话说，FFI 可以工作，但速度很*慢*。如果您只需要拨打几个电话，这很好，但如果您需要经常拨打电话，则非常坏消息。

您需要做的是编写一个[插件](http://nodejs.org/api/addons.html)。插件是为 C 和 C++ 库提供胶水的 C++ 模块。（仅仅因为你必须用 C++ 编写插件并不意味着你不能从插件中调用纯 C 代码！）

节点[文档](http://nodejs.org/api/addons.html)提供了大量示例，可以帮助您入门。如果您使用的是 Windows，[这里有一些](https://stackoverflow.com/a/9625030/201952)设置 VS 的提示。

如果对 C 库的调用被阻塞，则需要使它们异步。 [libuv 提供了一个线程池，你可以在上面进行工作。](http://nikhilm.github.com/uvbook/threads.html#libuv-work-queue)

# javascript - 您如何获得对模块中定义的 angularjs 控制器的引用？

> ID：15574887
> 
> 赞同：4
> 
> 时间：2013-03-22T16:08:05.650
> 
> 标签：javascript, angularjs, jasmine

我有一个 jasmine 测试，但我无法获得对控制器构造函数的引用，因为它是在模块中定义的。在这里查看我的要点[https://gist.github.com/hcabnettek/5222429](https://gist.github.com/hcabnettek/5222429)

我需要对定义的控制器进行单元测试

```
angular.module('foo', []).controller('fooCtrl', function($scope){ $scope.foo = 'bar'; }); 
```

任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:58:53.447

[http://www.itaware.eu/2012/10/19/angularjs-unit-tests-and-end-to-end-tests/](http://www.itaware.eu/2012/10/19/angularjs-unit-tests-and-end-to-end-tests/)

关键是 angular-mocks 中的 module() 函数。现在它使用模块内定义的字符串控制器名称工作。

# javascript - 为什么easelJS 会缩放我的精灵？

> ID：15574890
> 
> 赞同：3
> 
> 时间：2013-03-22T16:08:27.453
> 
> 标签：javascript, canvas, sprite, easeljs, createjs

我正在使用 EaselJS 在 Canvas 中创建动画背景。我想知道为什么一旦我将画布设置为窗口大小，我的精灵就会被缩放......图像看起来很拉伸......

> $('body').append(''); $('#backgroundCanvas').height($(window).height()); $('#backgroundCanvas').width($(window).width());

* * *

```
var sprite = new createjs.SpriteSheet({
          "animations":
            {
                "run": [0, 6, "run", frequency]},
                "images": [url],
                "frames":
                    {
                        "height": height,
                        "width":width,
                        "regX": 0,
                        "regY": 0,
                        "count": count
                    }
            });
                    var item = new createjs.BitmapAnimation(sprite);    
                    item.height = height;       
                    item.width = width;             
                    //item.scale = item.scaleY = item.scaleX= 0.5;  
                    item.x = positionX;         
                    item.y = positionY;
                    item.dirX = 1;  
                    item.dirY = 1;      
                    item.vX = 4;            
                    item.vY = 4;

                    item.gotoAndPlay("run");

                    stage.addChild(item); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T00:08:28.810

当您使用 CSS 缩放画布时，它会缩放内容，因为它的像素数相同。用 JavaScript 缩放它（设置宽度和高度属性），它会改变像素的数量，并且不会拉伸你的内容。

干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-29T11:47:07.200

重要的是要知道画布对象从 html attr 宽度和高度获取其宽度和高度 更改 CSS 的宽度和高度只会缩放画布对象

所以你有 2 个解决方案：使用这个 html

```
<canvas id="backgroundCanvas" width="968" height="358"></canvas> 
```

或将您的代码更改为：

```
$('#backgroundCanvas').attr("height",$(window).height());
$('#backgroundCanvas').attr("width",$(window).width()); 
```

现在我可以告诉你干杯;）

# jquery-mobile - 在最新的 jQuery Mobile 1.3 中使用 jQuery 2.0 beta 有多安全？

> ID：15574901
> 
> 赞同：1
> 
> 时间：2013-03-22T16:08:48.983
> 
> 标签：jquery-mobile

我正在探索 jQuery Mobile，所以我所做的并不接近生产。

问：可以将 jQuery 2.0 与 jQuery Mobile 一起使用，还是应该像他们在[下载页面](http://jquerymobile.com/download/)上所说的那样坚持使用 1.8.2 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:12:07.437

根据我的经验，它是安全的。我将 jQuery 2.0.0b1 与 jQuery Mobile 1.3 一起使用，目前我没有发现问题。

基本上 2.0 是 1.9，但不支持 IE 6 和 7。老实说，jQuery Mobile 不需要它们。1.9 只是 jQuery 1.8 的一个更干净、更苗条、更现代的 API 升级。

另一方面，就像 Omar 在他的评论中告诉你的那样，坚持 jQ 1.8.3。更高的版本不会为您提供更快或更好的代码执行。他们只会让您学会放弃所有已弃用的代码，例如 bind、live、delegate .... 等等。

**编辑 ：**

我忘了，如果你想使用 2.0 版，你需要学习将你的事件与一个函数绑定**在**. 这非常重要，因为 90% 的 jQuery Mobile 示例使用**live**或**bind**进行事件绑定。

# wpf - ListCollectionView.CurrentPosition 设置器

> ID：15574902
> 
> 赞同：0
> 
> 时间：2013-03-22T16:08:50.377
> 
> 标签：wpf, view, setter, listcollectionview

ListCollectionView 有一个获取当前位置的属性（CurrentPosition）：

[http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.currentposition.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.currentposition.aspx)

但是这个属性是只读的。

*获取 CurrentItem 在（可选地排序和过滤的）视图中的序号位置。*

那么如何*设置*当前位置呢？我希望这不涉及行为...

我需要滚动到 ListView 或 DataGrid 的顶部，在我看来，应该可以轻松地设置一个属性来实现它，而无需进入视图的内部。

提前致谢。

**更新：**

目前这是我自己的解决方法 - 但它有点令人讨厌 - 当一个人想要使用 MVVM（使用 F#）时：

```
let linesControl = context.Window.FindName("ObjectListView") :?> ListView
let scrollBorder = VisualTreeHelper.GetChild(linesControl, 0) :?> Border
let scrollViewer = scrollBorder.Child :?> ScrollViewer
scrollViewer.ScrollToVerticalOffset(0.0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T18:01:42.063

我使用的基本上是`attached property`解决只读、不可绑定的属性（即使大多数时候你不需要写，绑定失败）..

这篇文章解决了类似的问题`ActualWidth`/ `ActualHeight`...

[http://meleak.wordpress.com/2011/08/28/onewaytosource-binding-for-readonly-dependency-property/](http://meleak.wordpress.com/2011/08/28/onewaytosource-binding-for-readonly-dependency-property/)

...您可以在那里下载代码/示例（或[http://dl.dropbox.com/u/39657172/Blog/PushBindingInStyleDemo.zip](http://dl.dropbox.com/u/39657172/Blog/PushBindingInStyleDemo.zip)）。

你用来绑定的东西是......

```
<pb:PushBindingManager.PushBindings>
    <pb:PushBinding TargetProperty="CurrentPosition" Path="YourPositionProperty"/>
</pb:PushBindingManager.PushBindings> 
```

我并没有真正在您的示例中尝试过 - 但从外观上看 - 如果`CurrentPosition`已经有的话，它应该以同样的方式工作。

* * *

另外，如果需要，请查看此较早的帖子以获取更多详细信息（如何在 Style 等中处理此问题）...

[在子菜单 WPF 中获取焦点 MenuItem](https://stackoverflow.com/questions/15367161/get-focused-menuitem-in-submenu-wpf/15367642#15367642)

（免责声明：不是我的文章——我只是一个感恩的用户：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:19:11.840

您可以使用

1）`MoveCurrentToPosition(int position)` 见：[msdn](http://msdn.microsoft.com/en-us/library/system.windows.data.listcollectionview.movecurrenttoposition.aspx)

2）`MoveCurrentTo(Object item)` 见：[msdn](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.movecurrentto.aspx)

3)`MoveCurrentToFirst()`

4)`MoveCurrentToLast()`

...

# php - 携带一个 php 数组到 javascript 和 Plot witjh jqplot

> ID：15574912
> 
> 赞同：1
> 
> 时间：2013-03-22T16:09:12.420
> 
> 标签：php, arrays, jqplot

我正在使用 jqplot 并且我已经绘制了来自数组 php 的数据但是当我尝试从 javascript 绘制时不起作用

这是代码php：

```
$array= array();
$array[] = 34.890;
$array[] = 25.090; 
```

现在代码吸收：

```
 <script>
 $(function() {

    var array = new Array();

    <?php
        for( $i=0; $i<count($array); $i++){
           echo "\narray[$i] = '$array[$i]';"; 
         }
   ?>
   graficar(  array  );
 });
 </script> 
```

函数 graficar 是：

```
function graficar( array )
{

    var plot2 = $.jqplot('lienzo',
        [
            array
        ],
        {
            seriesDefaults: {
                renderer: $.jqplot.BarRenderer,
                // Show point labels to the right ('e'ast) of each bar.
                // edgeTolerance of -15 allows labels flow outside the grid
                // up to 15 pixels.  If they flow out more than that, they
                // will be hidden.
                pointLabels: {show: true, location: 'e', edgeTolerance: -15},
                // Rotate the bar shadow as if bar is lit from top right.
                shadowAngle: 135,
                // Here's where we tell the chart it is oriented horizontally.
                rendererOptions: {
                    barDirection: 'horizontal',
                    barWidth:18
                }
            },
            axes: {
                yaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer
                }
            }
        }
   );

 } 
```

我得到的错误是：

```
TypeError: this[r]._ticks[0] is undefined
[Break On This Error]   

 ...{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAt... 
```

图表显示：

![在此处输入图像描述](../Images/a9bd71e5f27fc1391dc9cb8ac1dbd5ad.png)

如何解决我的麻烦？

坦克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T16:25:26.623

你的“数组”有问题，就像我的代码一样，当

```
array = ["0","0","0","0"] 
```

或者

```
array = ["w","r","o","n","g"] 
```

发生错误，那么我应该首先使用 parseInt 方法将字符串元素解析为整数。如果

```
array = ["1","2","3","4"] 
```

无需将字符串元素解析为数组中的整数，jqplot 会为您完成，但如果数组与前两个一样，则会出现错误。

# nlp - 斯坦福核心 NLP 如何获得概率和误差幅度

> ID：15574915
> 
> 赞同：9
> 
> 时间：2013-03-22T16:09:17.290
> 
> 标签：nlp, stanford-nlp, pos-tagger

在使用解析器或核心 NLP 中的任何注释时，有没有办法访问概率或误差范围？

为了将我的问题置于上下文中，我试图了解是否有一种以编程方式检测歧义情况的方法。例如，在下面的句子中，动词的*欲望*被检测为名词。我希望能够知道我可以从 Core NLP APi 访问或计算的此类度量，以告诉我可能存在歧义。

```
(NP (NP (NNP Whereas)) (, ,) (NP (NNP users) (NN desire) (S (VP (TO to) (VP (VB sell)))))) 
```

# css - CSS 捆绑缩小替换 Unicode 字符

> ID：15574920
> 
> 赞同：4
> 
> 时间：2013-03-22T15:44:42.467
> 
> 标签：css, visual-studio-2012, minify

我在 VS2012 中看到一个问题，它替换了我缩小的 CSS 代码中的 Unicode 字符。

```
font-family: "FontAwesome";
content: "\f002"; 
```

这在创建的未缩小的捆绑 css 文件中很好，但是，\f002 正在被缩小的捆绑 css 文件中替换。

```
font-family:"FontAwesome";content:""; 
```

我可以使用某种逃避来阻止这种情况的发生吗？

# c# - 将 HTML 表格转换为图像文件

> ID：15574922
> 
> 赞同：2
> 
> 时间：2013-03-22T16:09:42.620
> 
> 标签：c#, asp.net, image

有没有办法将 HTML 表格转换为图像文件？我有一个 HTML 表，其中包含标签、GridView 和 CheckBoxes 等控件。我们如何将此表转换为图像文件以创建 PDF 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:29:17.800

如果这是一次性的，请将其加载到浏览器中并截取屏幕截图（Windows 上的 Alt-PrtScr 仅适用于当前应用程序）

如果您需要重复/以自动化方式执行此操作，您可以自动化[浏览器控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)，也可以使用无头浏览器

您还应该查看[WebKit2Png](http://www.paulhammond.org/webkit2png/)，它将以与 Chrome/其他 webkit 浏览器相同的方式呈现页面，然后将其保存为 png。它也可以选择模拟 javascript/etc

同样，有一个适用于所有平台的[wkhtmltopdf](https://code.google.com/p/wkhtmltopdf/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T16:29:47.180

这不是一项微不足道的任务。最终，您需要一个 HTML 渲染器来将 HTML 转换为像素。

幸运的是，您不需要自己编写。您可以使用[WebBrowser 控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)。

[您可以在文章Creating Website Thumbnails in ASP.NET](http://www.blackbeltcoder.com/Articles/graphics/creating-website-thumbnails-in-asp-net)中看到我为从给定 URL 提取缩略图图像而编写的一些代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-24T06:03:21.527

将 HTML 表格转换为图像文件

```
 $("#selfAssessmentPowerPointDownload").on('mouseover', function () {
                var element = $("#html-content-holder"); // global variable
                var getCanvas; // global variable
                html2canvas(element, {
                    onrendered: function (canvas) {
                        getCanvas = canvas;
                        var imgageData = getCanvas.toDataURL("image/png");
                        var newData = imgageData.replace(/^data:image\/png/, "data:application/octet-stream");
                        $("#selfAssessmentPowerPointDownload").attr("download", "gridData.png").attr("href", newData);
                    }
                });
            });
```

```
<button id="selfAssessmentPowerPointDownload">Download</button>

<table id="html-content-holder"></table>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-24T06:59:32.237

[Datatables](https://datatables.net/)是一个用于处理表格的强大 jquery 插件。数据表提供的选项之一是从您的​​表格中制作 pdf 或 excel。你可以在它的网站上找到很多例子。

# google-apps-script - 谷歌电子表格计算

> ID：15574924
> 
> 赞同：0
> 
> 时间：2013-03-22T16:09:52.493
> 
> 标签：google-apps-script, google-sheets, google-spreadsheet-api

如何计算：

```
0-10 hours = 100 pr. hour
11-20 hours = 80 pr. hour
21+   hours = 70 pr. hour

If ex. I have 23 hours:
10 hours - 100 pr. hour
10 hours -  80 pr. hour
 3 hours -  70 pr. hour 
```

如果我只有总小时数，是否可以在 Google 电子表格中编写一个函数来计算总金额。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-08T22:15:30.840

您可以将其表示为公式。考虑有以下三种情况：

1.  如果超过 20 小时，则费率为 (10 x 100 + 10 x 80) + (小时 - 20) x 70

2.  如果少于 21 小时但多于 10 小时，则费率为 (10 x 100) + (小时 - 10) x 80

3.  如果少于 11 小时，费率为小时 x 100

如果我们在 cell 中有我们的时间`A1`，这是公式：

```
=if(A1>20,(A1-20)*70+1800,if(A1>10,(A1-10)*80+1000,A1*100)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-15T06:11:21.140

是的，可以为此编写一个函数。这是一个示例代码。

```
function amount(x) {
  if(!x){
    return "no hours provided";
  } else {
    if(x<=10){
      return x*100;
    } else if (x<=20){
      return 10*100+(x-10)*80;
    } else {
      return 10*100+10*80+(x-20)*70;
    }
  }
} 
```

您可以在电子表格中的任何位置将其用作自定义函数。例如，如果

```
A1 = 23;
//You can put below line in any cell. A2 is just being given as an example
A2 = amount(A1) //answer will be 2010 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-23T17:16:05.977

我正在编写 4 年以上的 gsheet 公式。恕我直言，您需要创建额外的表“费率”

小时从 | 营业时间 | 速度

0 | 10 | 100

11 | 20 | 80

21 | 9999 | 70

比您可以编写适用于任何地方的灵活公式： = filter(rates!C:C, rates!A:A>A1, rates!B:B

一开始它可能看起来有点复杂，但后来你会很容易地阅读你的公式，你将能够在“比率”表中的一个地方更改你的数据，而无需搜索引用此数据的所有公式。

# javascript - 在while循环中使用带有ajax调用的分页

> ID：15574931
> 
> 赞同：1
> 
> 时间：2013-03-22T16:10:03.943
> 
> 标签：javascript, jquery, pagination

在一个 javascript 函数中，我调用服务器并获取 10 条记录的批次。我需要这样做，直到我有所有的记录。

首先我做了一个while循环，在ajax调用的错误回调中我将结束while循环。

中途我开始意识到那是行不通的，因为 ajax 调用是异步的，因此我会在循环中触发大量请求。我确定有一个标准模式可以做到这一点，但我不知道如何。

只要调用不返回错误，我如何在循环中执行 ajax 调用并执行它？我正在构建的伪代码：

```
var stillRecordsAvailable = true;

while (stillRecordsAvailable) {
  // get the next batch of records
  $.ajax({
    url: '/getrecords.json',
    data: {data_set_id: dataset.id},
    type: 'GET',
    success: function(data, textStatus, xhr) {
      // do something
    },
    error: function(xhr, textStatus, errorThrown) {
      // nothing left to do
      stillRecordsAvailable = false;
    }
  }); 
```

感谢您为我指明正确的方向

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T16:22:36.127

您可能只想将 ajax 调用包装在一个在 ajax 成功回调上调用的函数中：

```
function getRecords(data, textStatus, xhr) {

  if (data) {}; // do something...

  $.ajax({
    url: '/getrecords.json',
     data: {data_set_id: dataset.id},
     type: 'GET',
     success: getRecords
  });

} 
```

这仅在您的服务器/API 在没有更多记录时返回错误时才有效；但是，这可能不是最好的模式。跟踪异步事件状态的一种更优雅的方法是通过延迟/承诺模式。jQuery 有一个很好的实现：[http ://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)

# jquery - 如何使我的 jquery 动画更流畅？

> ID：15574935
> 
> 赞同：0
> 
> 时间：2013-03-22T16:10:13.570
> 
> 标签：jquery, jquery-animate

我正在建立一个社交网站，我对它有很高的要求，所以我需要一些帮助来使动画更好、更流畅。我不得不承认我是一名后端开发人员，并没有真正做太多前端的事情，但这就是我得到的：我有一个按钮，当用户按下按钮时，我需要向用户展示一个漂亮的表单。我一直在为这个[http://jsfiddle.net/bTZ5D/1/](http://jsfiddle.net/bTZ5D/1/)制作动画。我觉得还可以，但不是真正的 WOW 材料，如果有人可以让它变得更好或建议如何让它变得更好，我将不胜感激。这是我的 js 代码：

```
jQuery(function($){
    $('body').on('click', '#ask-question', function() {
        var container = $('.ask-question-wrapper');

        $(this).fadeOut('fast', function() {
            $(this).hide();
            container.show();
            container.animate({ height: "265px" }).animate({  
               height: "245px" });;

        });
    });
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:20:22.117

> 更平滑

使用**wirey**发布的代码和：http `('slow')`: [//jsfiddle.net/MfdBw/](http://jsfiddle.net/MfdBw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:25:52.220

编辑：此外，您还可以使用缓动库。

或一种不透明动画：

```
jQuery(function($){
    $('body').on('click', '#ask-question', function() {
        var container = $('.ask-question-wrapper');

        container.css('opacity', '0');

        $(this).fadeOut('fast', function() {
            $(this).hide();
            container.show();
            container.animate({ height: "265px",
                                opacity: 1}).animate({  
            height: "245px" });

        });
    });
}) 
```

[http://jsfiddle.net/zp6fA/](http://jsfiddle.net/zp6fA/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:21:34.717

只需使用[jQuery **Ui**](http://jqueryui.com/show/)并添加一些显示选项，例如`container.show('clip');`

# php - 找到最低的 x 和 y

> ID：15574938
> 
> 赞同：2
> 
> 时间：2013-03-22T16:10:16.283
> 
> 标签：php, math

我有一个 X 和 y 坐标数组，我怎样才能找到离 0,0 最近的点并从离 0,0 的最近到最远的点对它们进行排序？

```
 <?php
        $array = array(array("x" => 10,
                             "y" => 10),

                       array("x" => 120,
                             "y" => 560),

                       array("x" => 950,
                             "y" => 23),

                       array("x" => 78,
                             "y" => 40),);
    ?> 
```

提前感谢，对不起我的英语：|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:37:41.473

使用 usort：

```
<?php
//your array
$array = array(array("x" => 10,
                     "y" => 10),

               array("x" => 120,
                     "y" => 560),

               array("x" => 950,
                     "y" => 23),

               array("x" => 78,
                     "y" => 40),);

//define a compare function
function cmp($a,$b){
    //get the squared distance of a and b
    $distA_SQ = $a['x']*$a['x']+$a['y']*$a['y'];
    $distB_SQ = $b['x']*$b['x']+$b['y']*$b['y'];

    //if squared distances are the same, return 0
    if($distA_SQ==$distB_SQ)return 0;

    //distances are not the same so return 1 if a larger than b or -1 if b larger than a
    return $distA_SQ>$distB_SQ?1:-1;
}

//run the sort function
usort($array, 'cmp');

//output the array
var_dump($array); 
```

[http://codepad.org/OBH1cskb](http://codepad.org/OBH1cskb)

并且要确定点 A 的距离是否大于 B，您不需要计算距离。这是昂贵且不必要的。

编辑：在下面的代码和解释中添加了注释

这使用[usort](http://www.php.net/usort)，它使用用户定义的比较函数。usort 将通过调用您的比较函数并一次传入两个值（通常作为 $a 和 $b 传入）来查看执行快速排序的数组，并希望您的比较函数在 $a 小于 $b 时返回 -1 , 如果 $a 等于 $b，则为 0，如果 $a 大于 $b，则为 1。[您可以在手册](http://www.php.net/usort)中阅读有关 usort 的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:16:36.807

创建一个新数组并将 x、y 及其与 (0,0) 的距离放入其中。

```
$distArray = array();
foreach($distArray as $point):
$distArray[] = array($point['x'],$point['y'],dist($point['x'],$point['y']));
endforeach; 
```

现在按该数组的第三个元素对该数组进行排序。我相信编写 dist() 函数会很容易。

编辑：我建议将 x 和 y 保留在数组中，这样当您对结果数组进行排序时，您就知道哪个项目是哪个点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:16:59.067

查看[http://www.ltcconline.net/greenl/courses/154/factor/circle.htm](http://www.ltcconline.net/greenl/courses/154/factor/circle.htm)

```
function calculateDistance($x,$y)
{
    //apply formula
    return sqrt(pow($x, 2) + pow($y, 2)); //<--Sammitch pointed out directly 
}
$data = array();
foreach($array as $key=>$distance)
{//this is better because you can have points that have the same distance
   $data[calculateDistance($distance['x'],$distance['y'])][] = $key;
}
    ksort($data); 
```

结果

```
 in:
$array = array(array("x" => 10,
                             "y" => 10),

                       array("x" => 120,
                             "y" => 560),
                       array("x" => 120,
                             "y" => 560),
                       array("x" => 950,
                             "y" => 23),

                       array("x" => 78,
                             "y" => 40));
    output:
    array (size=4)
      14 =>  //<--key is the distance and the value are the keys from your array
        array (size=1)
          0 => int 0
      87 => 
        array (size=1)
          0 => int 4
      572 => 
        array (size=2)
          0 => int 1
          1 => int 2
      950 => 
        array (size=1)
          0 => int 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:18:13.157

试试这个

```
<?php
$array = array(array("x" => 10,
                     "y" => 10),

               array("x" => 120,
                     "y" => 560),

               array("x" => 950,
                     "y" => 23),

               array("x" => 78,
                     "y" => 40),);

$distance = array();
 $req_array = array();
 foreach($array as $subArray)
{
 $distance[] = sqrt(pow(($subArray[x],2)+pow(($subArray[y],2));
}

asort($distance);

foreach($distance as $key=>$value)
{
  $req_array[] = $array[$key];
}

print_r($distance);
print_r($req_array);

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-22T16:25:27.303

```
$array = array(
    array("x" => 10, "y" => 10),

    array("x" => 120, "y" => 560),

    array("x" => 950, "y" => 23),

    array("x" => 78, "y" => 40)
);

$start_point_array = $array;
$end_point_array = $array;
$farthest_points = array();
$farthest_distance = 0;

foreach($start_point_array as $index => $start_point) {
    for($i = $index + 1; $i < count($end_point_array); $i++) {
        $end_point = $end_point_array[$i];
        $distance = sqrt(pow($end_point['x'] - $start_point['x'], 2) + pow($end_point['y'] - $start_point['y'], 2));
        if($distance > $farthest_distance) {
            $farthest_distance = $distance;
            $farthest_points = array($start_point, $end_point); // Or whatever
        }
    }
} 
```

# matlab - MATLAB 的 NaiveBayses 'posterior' 函数解读

> ID：15574939
> 
> 赞同：1
> 
> 时间：2013-03-22T16:10:19.857
> 
> 标签：matlab, probability, classification

在我们创建了一个朴素贝叶斯分类器对象`nb`（例如，具有多元多项式 ( `mvmn`) 分布）之后，我们可以使用对象调用`posterior`测试数据的函数。`nb`该函数有 3 个输出参数：

> [post,cpre,logp] = 后验(nb,test)

我了解如何`post`计算及其含义，也是`cpre`基于每个类的最大后验概率的预测类。

问题是关于`logp`。很清楚它是如何计算的（测试中每个模式的 PDF 的对数），但我不明白这个度量的含义以及如何在朴素贝叶斯程序的上下文中使用它。非常感谢您对此的任何了解。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T18:59:22.297

`logp`您指的是对数[似然](http://en.wikipedia.org/wiki/Log_likelihood)性，这是衡量模型拟合程度的一种方法。我们使用对数概率来防止计算机在非常小的浮点数上下溢，而且还因为加法比乘法快。

如果你用不同的起点多次学习分类器，你会得到不同的结果，因为似然函数不是对数凹的，这意味着你会陷入局部最大值。如果你计算原始后验的可能性数据你会得到模型的可能性。尽管可能性可以很好地衡量一组参数与另一组参数的拟合程度，但您需要注意不要[过度拟合](http://en.wikipedia.org/wiki/Overfitting)。

在您的情况下，您正在计算一些未观察到的（测试）数据的可能性，这让您了解您学习的分类器对数据的拟合程度。如果您尝试基于测试集学习此模型，您将根据最高测试似然度选择参数；但是一般来说，当您这样做时，最好使用[验证集](http://en.wikipedia.org/wiki/Test_set)。你在这里做的是计算[预测可能性](http://en.wikipedia.org/wiki/Posterior_predictive_distribution)。

计算对数似然不限于朴素贝叶斯分类器，实际上可以为任何贝叶斯模型（高斯混合、潜在狄利克雷分配等）计算。

# java - 根据客户提供不同的 ssl 证书

> ID：15574942
> 
> 赞同：1
> 
> 时间：2013-03-22T16:10:23.723
> 
> 标签：java, ssl, sbt, artifactory

我正在为我的 Artifactory-repo 使用来自 startssl.com 的免费 SSL 证书。在我的浏览器中，一切都是绿色和漂亮的，但当然不是来自 Java。所以我用这个方便的脚本安装了 cacerts：

[http://www.ailis.de/~k/uploads/scripts/import-startssl](http://www.ailis.de/~k/uploads/scripts/import-startssl)

但我仍然得到：

```
Server access Error: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException 
```

错误。JAVA_HOME 设置正确。任何建议都非常感谢！

更多信息：

它来自 SBT 0.12.2 的常春藤（使用 pualp 的脚本[https://github.com/paulp/sbt-extras](https://github.com/paulp/sbt-extras)）在证书上大吵大闹：

```
[info] Resolving net.liftmodules#omniauth_2.10;2.5-SNAPSHOT-0.7-SNAPSHOT ...
[error] Server access Error: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target url=https://repo.woodenstake.se/all/net/liftmodules/omniauth_2.10/2.5-SNAPSHOT-0.7-SNAPSHOT/maven-metadata.xml 
```

- 更新：

这个问题似乎与 Java 本身无关。从浏览器访问该页面会产生一个绿色证书，我可以看到它从 StartSSL 签名的信息。但即使是 wget 或 curl 也会窒息并告诉我这是一个自签名证书。似乎根据客户提供不同的证书。

回购位于[https://repo.woodenstake.se/](https://repo.woodenstake.se/) - 如果您将其粘贴到浏览器中，我猜您会获得 StartSSL-cert。但是如果你 wget [https://repo.woodenstake.se/](https://repo.woodenstake.se/)你会得到一些我不知道它来自哪里的旧的自签名证书。

-- 更新更新：

所以问题是我正在为一些 *.woodenstake.se 形式的站点提供服务。我觉得可以拥有不同的证书，例如：

```
server {
    listen 443;
    server_name site1.woodenstake.se;
    client_max_body_size 512m;
    ssl on;
    ssl_certificate cert1.crt;
    ssl_certificate_key cert1.key;
    location / {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        if (!-f $request_filename) {
            proxy_pass http://server1;
            break;
        }
    }
}

server {
    listen 443;
    server_name site2.woodenstake.se;
    client_max_body_size 512m;
    ssl on;
    ssl_certificate cert2.crt;
    ssl_certificate_key cert2.key;
    location / {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        if (!-f $request_filename) {
            proxy_pass http://server2;
            break;
        }
    }
} 
```

它在我所有的浏览器中都可以正常工作。

但是，它不适用于 wget 或 JDK6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T16:13:34.023

问题是完全不同的东西。显然，您不能在同一个 IP 上拥有多个证书，并确保所有客户端都可以处理它。我在这台机器上有一些工具，我的 nginx-config 引用了该站点的 StartSSL 证书，还引用了其他一些站点的自签名（snakeoil）证书。

我的 nginx 支持 TLS SNI：

```
~ $ sudo nginx -V
nginx version: nginx/0.7.65
TLS SNI support enabled 
```

但显然 wget 和 Java 客户端不处理它。我所有的浏览器都可以。

也许可以做类似的事情：

[http://library.linode.com/security/ssl-certificates/subject-alternate-names](http://library.linode.com/security/ssl-certificates/subject-alternate-names)

但我不知道是否可以让 StartSSL 对其进行签名。

更多信息在这里：

[http://www.carloscastillo.com.ar/2011/05/multiple-ssl-certificates-on-same-ip.html](http://www.carloscastillo.com.ar/2011/05/multiple-ssl-certificates-on-same-ip.html)

在我的 Ubuntu 桌面上进行 Wget 测试：

```
viktor@hedefalk-i7:~$ wget https://bob.sni.velox.ch/
--2013-03-25 17:07:19--  https://bob.sni.velox.ch/
Resolving bob.sni.velox.ch (bob.sni.velox.ch)... 62.75.148.60
Connecting to bob.sni.velox.ch (bob.sni.velox.ch)|62.75.148.60|:443... connected.
ERROR: no certificate subject alternative name matches
    requested host name `bob.sni.velox.ch'.
To connect to bob.sni.velox.ch insecurely, use `--no-check-certificate' 
```

所以我认为我的问题的答案是

您的 Java 版本（或全部，但它可能在 JDK7 中工作：http: [//docs.oracle.com/javase/7/docs/technotes/guides/security/enhancements-7.html](http://docs.oracle.com/javase/7/docs/technotes/guides/security/enhancements-7.html)）不支持 TLS SNI 所以nginx 无法确定要提供哪个证书，因为这是在 http 之前协商的。从那个男人那里用真钱购买通配符证书，或者大哭一场。

# c++ - 如何调整 boost::property_map 以便像 ublas::vector 一样使用它？

> ID：15574944
> 
> 赞同：1
> 
> 时间：2013-03-22T16:10:29.030
> 
> 标签：c++, boost, boost-graph, boost-ublas

我正在寻找一种将**Boost Graph Library**与**Boost uBLAS**结合使用的智能方法。更准确地说，我需要通过使用图形**邻接矩阵**和包含每个顶点的一些其他**顶点属性的向量之间的****标量积**的结果来更新每个顶点的给定顶点属性。让我给你一个（不幸的是冗长的）最小的例子来说明这个问题：

 ****```
#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/iteration_macros.hpp>
#include <boost/numeric/ublas/matrix.hpp>
#include <boost/numeric/ublas/io.hpp>

using namespace boost;
namespace ublas = boost::numeric::ublas;

struct Vertex {             //Using bundled vertex properties

        double old_potential; 
        double new_potential; 
};

typedef adjacency_list< listS, vecS, directedS, Vertex > Graph;

int main(){ 

  //[Prepare a graph with two vertex property maps and initialize
  Graph graph; 
  add_edge (0, 1, graph); 
  add_edge (0, 3, graph); 
  add_edge (1, 2, graph); 

  auto  v_old_potential = boost::get( &Vertex::old_potential, graph );
  auto  v_new_potential = boost::get( &Vertex::new_potential, graph );

  unsigned int source_strength = 0;

  BGL_FORALL_VERTICES( v, graph, Graph )    {

    v_old_potential[v] = source_strength++;
    v_new_potential[v] = 0;
  }
  //]  

  //[ Extracting the adjacency matrix by iteration through all edges --> uBLAS matrix
  ublas::zero_matrix<int> zero_matrix( num_vertices(graph) , num_vertices(graph) ); 
  ublas::matrix<int> adjacency_matrix( zero_matrix );       //initialize properly

  BGL_FORALL_EDGES( e, graph, Graph )   {

     adjacency_matrix( source(e,graph), target(e,graph) ) = 1;
     adjacency_matrix( target(e,graph), source(e,graph) ) = 1;
  }
  //]

  //[ Extracting the old potentials by iteration through all vertices --> uBLAS vector
  ublas::zero_vector<double> zero_vector( num_vertices(graph) );
  ublas::vector<double> old_potential_vector( zero_vector );    //initialize properly
  ublas::vector<double> new_potential_vector( zero_vector );    //initialize properly

  BGL_FORALL_VERTICES(v, graph, Graph)    {

        old_potential_vector( vertex(v,graph) ) = v_old_potential[v];
  }
  //]

  //[ Compute new potentials = A . old potentials ! 
  new_potential_vector = ublas::prod ( adjacency_matrix, old_potential_vector );        //     new = A.old
  //]

  //[ Updating the property map for the new potentials with the newly computed values from above
  BGL_FORALL_VERTICES(v, graph, Graph)    {

        v_new_potential[v] = old_potential_vector( vertex(v,graph) );
  }
  //]

  std::cout << adjacency_matrix << std::endl;       //output = [4,4]((0,1,0,1),(1,0,1,0),(0,1,0,0),(1,0,0,0))
  std::cout << old_potential_vector << std::endl;   //output = [4](0,1,2,3)
  std::cout << new_potential_vector << std::endl;   //output = [4](4,2,1,0)

} 
```

现在，虽然我的建议是一个可能的解决方案，但我对它不太满意。问题是，**（a）**我将整个`old_potential`属性映射复制到关联`ublas::vector`以计算标量积。并且**(b)**我还需要遍历`new_potential`属性映射以将新计算的值返回到图中。我怀疑这些操作会在我的应用程序中重复*很多*次，这就是为什么我希望从一开始就尽可能干净地完成这部分。

理想情况下，我希望完成所有这些来回复制，而是使用某种**适配器**来制作`boost::property_map`工作作为`ublas::vector`. `prod()`使用这样的东西会很棒：

```
adapter(new_potential) = ublas::prod( adjacency_matrix, adapter(old_potential) ); 
```

如果有人知道如何实现此类功能或如何改进我的解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T17:57:47.107

```
#include <iostream>
#include <memory>
#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/iteration_macros.hpp>
#include <boost/numeric/ublas/matrix.hpp>
#include <boost/numeric/ublas/io.hpp>

using namespace boost;
namespace ublas = boost::numeric::ublas;

enum vertex_old_potential_t { vertex_old_potential };
enum vertex_new_potential_t { vertex_new_potential };

namespace boost
{
  BOOST_INSTALL_PROPERTY(vertex, new_potential);
  BOOST_INSTALL_PROPERTY(vertex, old_potential);
}

typedef property<vertex_new_potential_t, double, property<vertex_old_potential_t,double> > Vertex;

typedef adjacency_list< listS, vecS, directedS, Vertex > Graph;

struct ublas_vector_map;

namespace boost {
  template<>
  struct property_map< Graph, vertex_new_potential_t > {
    typedef ublas_vector_map type;
    typedef ublas_vector_map const_type;
  };

  template<>
  struct property_map< Graph, vertex_old_potential_t > {
    typedef ublas_vector_map type;
    typedef ublas_vector_map const_type;
  };
}

struct ublas_vector_map : put_get_helper<double&,ublas_vector_map> {
  typedef double value_type;
  typedef value_type& reference;
  typedef typename graph_traits<Graph>::vertex_descriptor key_type;
  typedef boost::lvalue_property_map_tag category;

  ublas_vector_map(Graph* g, vertex_old_potential_t&):vec(new ublas::vector<double>(num_vertices(*g),0.0)){}
  ublas_vector_map(Graph* g, vertex_new_potential_t&):vec(new ublas::vector<double>(num_vertices(*g),0.0)){}

  reference operator[](key_type v) const {
    return (*vec)(v);
  }

  ublas::vector<double>& vector() { return *vec; }

  private:
   std::unique_ptr<ublas::vector<double> > vec;
};

int main(){ 

  //[Prepare a graph with two vertex property maps and initialize
  Graph graph; 
  add_edge (0, 1, graph); 
  add_edge (0, 3, graph); 
  add_edge (1, 2, graph); 

  auto  v_old_potential = boost::get( vertex_old_potential, graph );
  auto  v_new_potential = boost::get( vertex_new_potential, graph );

  unsigned int source_strength = 0;

  BGL_FORALL_VERTICES( v, graph, Graph )    {

    v_old_potential[v] = source_strength++;
  }
  //]  

  //[ Extracting the adjacency matrix by iteration through all edges --> uBLAS matrix
  ublas::zero_matrix<int> zero_matrix( num_vertices(graph) , num_vertices(graph) ); 
  ublas::matrix<int> adjacency_matrix( zero_matrix );       //initialize properly

  BGL_FORALL_EDGES( e, graph, Graph )   {

     adjacency_matrix( source(e,graph), target(e,graph) ) = 1;
     adjacency_matrix( target(e,graph), source(e,graph) ) = 1;
  }
  //]

  //[ Compute new potentials = A . old potentials ! 
  v_new_potential.vector() = ublas::prod ( adjacency_matrix, v_old_potential.vector() );        //     new = A.old
  //]

  std::cout << adjacency_matrix << std::endl;       //output = [4,4]((0,1,0,1),(1,0,1,0),(0,1,0,0),(1,0,0,0))
  std::cout << v_old_potential.vector() << std::endl;   //output = [4](0,1,2,3)
  std::cout << v_new_potential.vector() << std::endl;   //output = [4](4,2,1,0)

  //You must access the properties via v_new_potential and v_old_potential, if you use get... again it resets
  std::cout << v_new_potential[0] << std::endl;
  std::cout << get(vertex_new_potential, graph)[0] << std::endl;

} 
```****

# eclipse - Aptana Studio（插件和独立）正在使用系统范围的 Ruby 而不是 RVM Ruby

> ID：15574945
> 
> 赞同：0
> 
> 时间：2013-03-22T16:10:30.810
> 
> 标签：eclipse, eclipse-plugin, rvm, aptana

我刚刚安装了带有 Aptana 插件的 Eclipse Juno。我将 Rails 应用程序作为新项目导入，第一次将鼠标指针悬停在 Rake 弹出菜单（右键单击应用程序资源管理器）上时它是空的，然后如果将鼠标从 Rake 菜单项上移开则禁用. Aptana Studio（独立）也会发生这种情况。

我在 Linux Ubuntu 机器上使用 RVM 和 Ruby 1.9.3。OS X 中的相同设置（相同的项目和 RVM 版本）正确显示了 Rake 子菜单。你有过这种经历吗？是否有任何地方（日志文件）可以查找以进行故障排除？

提前致谢。

# exception-handling - 可以在http CreateErrorResponse 中返回复杂的对象内容吗？

> ID：15574946
> 
> 赞同：3
> 
> 时间：2013-03-22T16:10:34.250
> 
> 标签：exception-handling, automation, asp.net-web-api

所以我们有一个 Web Api，对于一些第 3 方自动化，第 3 方将调用我们的 API 尝试更新一些项目。

我们的 Web Api 将检查项目是否存在以及在执行实际更新过程之前还需要更新的一些依赖项（xaml/json 中的复杂对象）。

所以这里的问题是，如果我们发现一些客户端没有提供的依赖项，我希望能够向客户端响应一个错误响应消息，其中包含需要提供的异常和依赖项。

所以客户端可以调用Api try update，如果客户端得到这个错误响应和这个错误代码并且内容是这些依赖，客户端可以用这些依赖做自动化。

有可能做到吗？

因为我尝试使用`CreateErrorResponse`，但它不允许我提供类似`CreateResponse(statusCode, complexObject)`....的内容。

或者使用这个的最佳实践是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-22T19:07:13.283

您不限于使用 CreateErrorResponse。它只是通过使用已经提供的 HttpError 类来简化工作：

[http://msdn.microsoft.com/en-us/library/system.web.http.httperror%28v=vs.108%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.http.httperror%28v=vs.108%29.aspx)

此类可以包含可以在响应正文中发送的附加键/值对集。

但是，您始终可以定义自己的错误类（即 ApiError），其中将包含您需要的确切数据，然后通过调用返回该类，即：

```
Request.CreateResponse(HttpStatusCode.BadRequest, error); 
```

其中 error 是您的 ApiError 类的实例。

# c# - “不在”的 Lambda 表达式？

> ID：15574952
> 
> 赞同：20
> 
> 时间：2013-03-22T16:10:50.830
> 
> 标签：c#, compact-framework, lambda

我有一个`detailcollection`收藏，其中的每一个细节都有

```
code, price, name 
```

还有一个带有一些代码的字符串

```
string codes = "1,2,3"; 
```

我知道我可以使用`string.Split()`

```
string[] codesarray = codes.Split(','); 
```

但是我怎样才能得到不在的产品`codes`呢？

```
// the idea I have, but I would not like to have a loop
for (int i = 0; i < codesarray.Length; i++)
{
    detailcollection.Where(x => x.ope_idsku == codesarray[i])
} 
```

我想要类似的东西：

```
detailcollection.Where(x => x.ope_idsku not in (codesarray)) 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-22T16:11:43.587

id 不在的选定详细信息集合项`codesarray`：

```
detailcollection.Where (x=> !codesarray.Contains(x.ope_idsku)) 
```

# mysql - limit length of each GROUP_CONCAT values

> ID：15574957
> 
> 赞同：0
> 
> 时间：2013-03-22T16:11:09.547
> 
> 标签：mysql

If I have per example the following table

```
cliente.nome
peter sampras
john mark
monalisa 
```

the result with

```
GROUP_CONCAT(DISTINCT cliente.nome ORDER BY cliente.nome SEPARATOR ', ') as client 
```

will be:

```
peter sampras,john mark,monalisa 
```

Is possible to limit the length of each item so the result is:

```
pete,john,mona 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:16:46.583

Yes, you can use `SUBSTRING` or `LEFT` in your `GROUP_CONCAT` call -- I prefer using LEFT for this:

```
GROUP_CONCAT(DISTINCT LEFT(cliente.nome,4)) 
```

[SQL Fiddle Demo](http://sqlfiddle.com/#!2/5d21f/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:13:12.147

```
GROUP_CONCAT(DISTINCT SUBSTRING(cliente.nome,1,4)) 
```

# c# - 需要帮助了解 MEF

> ID：15574959
> 
> 赞同：-1
> 
> 时间：2013-03-22T16:11:12.910
> 
> 标签：c#, interface, mef

我正在尝试了解如何使用 MEF。

有人可以指出我或提供从目录加载多个 .dll 的示例。这些 dll 中的每一个都将具有相同的 void 方法。无效的开始（）。没有需要返回的值。

此外，我需要确保将 .dll 放入文件夹中，如果它们不属于，则不要尝试加载/运行。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:38:02.963

你可以看这个教程，很简单

链接： http: [//www.codeproject.com/Articles/432069/Simple-MEF-Application-for-Beginners](http://www.codeproject.com/Articles/432069/Simple-MEF-Application-for-Beginners)

为了了解 MEF 的兴趣，我建议您阅读有关`PRISM WPF Development With MEF`

我发表了关于主题的文章，链接：[http ://aghilasyakoub.wordpress.com/category/mef-managed-extensibility-framework/](http://aghilasyakoub.wordpress.com/category/mef-managed-extensibility-framework/)

# sql-server - 使用 REST 的浮点精度

> ID：15574960
> 
> 赞同：0
> 
> 时间：2013-03-22T16:11:17.393
> 
> 标签：sql-server, rest, floating-point, floating-accuracy

我正在使用 REST 从 MS-SQL 数据库中提取时间序列数据。当我使用 REST 检索数据时，我发现浮点精度从 0.00166667 之类的值下降到 0.002，但使用数据库设计器自己的工具，精度保持不变。

这是 REST 方法的限制，还是特定于实现的东西？

澄清一下——我的工作是使用以 MS-SQL 作为其主干的专有数据库。它不是开源的，所以我无法查看请求是如何处理的。

提供了一个 SOAP 方法，我将尝试实现以进行比较，但我更关心这是否是 REST 问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T18:41:51.267

Representational State Transfer 只是客户端-服务器架构的一般风格。它没有指定任何几乎如此详细的内容，例如对浮点值的适当处理。它施加的唯一限制是通信应该是“无状态的”。因此，REST 的概念存在于更高的抽象层次上，您看到的问题一定是特定于提供浮点值的服务的实现。

# math - 配置 Texmacs 以使用 Pari/GP

> ID：15574961
> 
> 赞同：0
> 
> 时间：2013-03-22T16:11:20.287
> 
> 标签：math, configure

我正在尝试 Pari/GP，这是一个执行数学计算的程序。它很强大，但它的界面非常糟糕。在他们的网站上，他们建议使用其他 GUI，例如 Texmacs，但他们没有提供太多细节。我无法让它工作。

我已经安装了 Pari 和 Texmacs。从 Texmacs 我尝试过 Insert->session-> 我写了 Pari 或 pari 但它不起作用它说“错误，连接 pari 尚未声明”我不知道在哪里配置它。我已经定义了一个针对 PARI 安装文件夹的环境变量 PARI。或任何其他图形用户界面？我也尝试过 MathGuide，但也没有用。

如何配置或运行它？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:54:33.310

将我评论的相关部分变成答案：

Sessions 菜单中的 Pari 项仅在 pari 可以使用其裸可执行文件名称启动时可用，即如果它的可执行文件可以在`PATH`. 为此，您必须在`PATH`变量中包含 Pari 目录。

# jquery - 使用 jQuery 脚本根据第一个单元格中的文本将单元格添加到表格

> ID：15574967
> 
> 赞同：0
> 
> 时间：2013-03-22T16:11:33.177
> 
> 标签：jquery

我有这张桌子...

```
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="test-class"> 
 <tr> 
  <td rowspan="6">TEST123<script type="text/javascript">if(window.VCompare){VCompare('TEST123', 4);}</script></td>
  <td rowspan="6"><img src="/images/clear1x1.gif" width="5" height="5"></td> 
  <td rowspan="6" background="/images/test.gif"><img src="/images/clear1x1.gif" width="1" height="1"></td>
  <td rowspan="4"><img src="/images/clear1x1.gif" width="5" height="5"></td>
  <td colspan="9"><img src="/images/clear1x1.gif" width="5" height="5"></td>
 </tr> 
</table> 
```

我需要在没有脚本标签的情况下获取第一个单元格的值，然后在我获得文本的第一个单元格之前添加一个单元格。我试过像..

```
var matchtext = "TEST123";
jQuery("tr").each(function() {
 var data = jQuery(this).find("td:eq(0)").text();
 var data = jQuery.trim(data);
 if (data == matchtext){
    jQuery(this).before("<td class='testclass' rowspan='6'>test inserted!</td>");
 }
}); 
```

并在桌子上循环，但那个脚本让我失望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:14:20.263

尝试换行：

```
if (data == matchtext){ 
```

至

```
if (data.match(matchtext)) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:21:25.327

如果您登录`data`到 firebug 控制台，您会看到字符串是“TEST123if(window.VCompare){VCompare('TEST123', 4);}”，而不仅仅是“TEST123”，因为 javascript 部分也算作文本。

将 JS 部分移出表格，请参阅[此小提琴](http://jsfiddle.net/ZXw9f/2/)：

```
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="test-class"> 
 <tr> 
  <td rowspan="6">TEST123</td>
  <td rowspan="6"><img src="/images/clear1x1.gif" width="5" height="5"></td> 
  <td rowspan="6" background="/images/test.gif"><img src="/images/clear1x1.gif" width="1" height="1"></td>
  <td rowspan="4"><img src="/images/clear1x1.gif" width="5" height="5"></td>
  <td colspan="9"><img src="/images/clear1x1.gif" width="5" height="5"></td>
 </tr> 
</table>
<script type="text/javascript">if(window.VCompare){VCompare('TEST123', 4);}</script> 
```

此外，您的 JS 代码并不完全符合您的预期，工作代码：

```
var matchtext = "TEST123";
$("tr").each(function() {
 var $this = $(this),
     data = $.trim($this.children(':first-child').text());

 if (data == matchtext){
     $this.prepend("<td class='testclass' rowspan='6'>test inserted!</td>");
 }
}); 
```

# linux - Bash将尾值分配给变量

> ID：15574975
> 
> 赞同：1
> 
> 时间：2013-03-22T16:11:44.427
> 
> 标签：linux, bash, unix, variables, tail

尝试使用不时更新的“输出”文件创建工作流。

```
 #!/bin/bash

echo "start flow"

tail -n output.txt 
```

因此，当“output.txt”的最后一行被创建时，它应该是一个变量，如下所示：

假设“output.txt”中的最后一行是 youtubelink。（例如）那么代码应该是这样的：

```
firefox $'the_last_line_in_output.txt' 
```

真的不知道该怎么做，所以如果有人可以帮助我，那就太棒了:)

/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:13:51.153

使用子shell替换：

```
firefox $(tail -1 output.txt) 
```

# c# - C# 泛型中的通配符等效项

> ID：15574977
> 
> 赞同：28
> 
> 时间：2013-03-22T16:11:56.390
> 
> 标签：c#, .net, arrays, generics, wildcard

假设我有一个通用类，如下所示：

```
public class GeneralPropertyMap<T>
{
} 
```

在其他一些类中，我有一个方法，它接受一个数组`GeneralPropertyMap<T>`。在 Java 中，为了接收包含任何类型`GeneralPropertyMap`方法的数组，如下所示：

```
private void TakeGeneralPropertyMap(GeneralPropertyMap<?>[] maps)
{
} 
```

我们使用通配符，以便稍后我们可以调用为每个`TakeGeneralPropertyMap`传递一堆`GeneralPropertyMap`任何类型的`T`，如下所示：

```
GeneralPropertyMap<?>[] maps = new GeneralPropertyMap<?>[3];
maps[0] = new GeneralPropertyMap<String>();
maps[1] = new GeneralPropertyMap<Integer>();
maps[2] = new GeneralPropertyMap<Double>();
//And finally pass the array in.
TakeGeneralPropertyMap(maps); 
```

我试图找出 C# 中的等价物，但没有成功。有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-22T16:18:28.433

C# 中的泛型比 Java 中的泛型提供更强的保证。因此，要在 C# 中做你想做的事，你必须让`GeneralPropertyMap<T>`类继承自该类（或接口）的非泛型版本。

```
public class GeneralPropertyMap<T> : GeneralPropertyMap
{
}

public class GeneralPropertyMap
{
    // Only you can implement it:
    internal GeneralPropertyMap() { }
} 
```

现在你可以这样做：

```
private void TakeGeneralPropertyMap(GeneralPropertyMap[] maps)
{
} 
```

和：

```
GeneralPropertyMap[] maps = new GeneralPropertyMap[3];
maps[0] = new GeneralPropertyMap<String>();
maps[1] = new GeneralPropertyMap<Integer>();
maps[2] = new GeneralPropertyMap<Double>();
TakeGeneralPropertyMap(maps); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-22T16:36:40.233

虽然，正如其他人所指出的，在 c# 中没有与通配符完全对应，但它们的一些用例可以用[covariance/contravariance](http://msdn.microsoft.com/en-us/library/ee207183.aspx)覆盖。

```
public interface IGeneralPropertyMap<out T> {} // a class can't be covariant, so 
                                        // we need to introduce an interface...

public class GeneralPropertyMap<T> : IGeneralPropertyMap<T> {} // .. and have our class
                                                            // inherit from it

//now our method becomes something like
private void TakeGeneralPropertyMap<T>(IList<IGeneralPropertyMap<T>> maps){}

// and you can do
    var maps = new List<IGeneralPropertyMap<Object>> {
        new GeneralPropertyMap<String>(),
        new GeneralPropertyMap<Regex>()
    };
    //And finally pass the array in.
    TakeGeneralPropertyMap<Object>(maps); 
```

需要注意的是，你不能对值类型使用协方差，所以`GeneralPropertyMap<int>()`在我们的列表中添加一个新的在编译时会失败。

```
cannot convert from 'GeneralPropertyMap<int>' to 'IGeneralPropertyMap<object>' 
```

`GeneralPropertyMap`如果您想限制可以包含的类型，这种方法可能比使用非泛型版本的类/接口更方便。在这种情况下：

```
public interface IMyType {}
public class A : IMyType {}
public class B : IMyType {}
public class C : IMyType {}

public interface IGeneralPropertyMap<out T> where T : IMyType {} 
```

让您拥有：

```
var maps = new List<IGeneralPropertyMap<IMyType>> {
    new GeneralPropertyMap<A>(),
    new GeneralPropertyMap<B>() ,
    new GeneralPropertyMap<C>() 
};
TakeGeneralPropertyMap(maps); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-22T16:14:50.657

在 C# 中没有直接的等价物。

在 C# 中，这通常通过让泛型类实现非泛型接口或基类来完成：

```
interface IPropertyMap
{
   // Shared properties
}

public class GeneralPropertyMap<T> : IPropertyMap
{
} 
```

然后，您可以传递这些数组：

```
IPropertyMap[] maps = new IPropertyMap[3];
// ...

TakePropertyMap(maps); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T16:19:27.397

`GeneralPropertyMap`从( )的成员中创建一个接口`IGeneralPropertyMap`，然后将 an`IGeneralPropertyMap[]`作为参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-28T09:08:24.640

实际上，您可以通过使用动态来非常接近通配符。如果您有一个非泛型超类，这也很有效。

例如：

```
public class A
{
  // ...
}

public class B<T> : A
{
  // ...
}

public class Program
{
  public static A MakeA() { return new A(); }

  public static A MakeB() { return new B<string>(); }

  public static void Visit<T>(B<T> b)
  {
    Console.WriteLine("This is B with type "+typeof(T).FullName);
  }

  public static void Visit(A a)
  {
    Console.WriteLine("This is A");
  }

  public static void Main()
  {
    A instA = MakeA();
    A instB = MakeB();

    // This calls the appropriate methods.
    Visit((dynamic)instA);
    Visit((dynamic)instB);

    // This calls Visit(A a) twice.
    Visit(instA);
    Visit(instB);
  }
} 
```

[此处](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/types/using-type-dynamic#overload-resolution-with-arguments-of-type-dynamic)的 C# 文档解释了其工作原理。

# mootools - 仅限火狐：TypeError：切换器未定义

> ID：15574980
> 
> 赞同：2
> 
> 时间：2013-03-22T16:11:58.517
> 
> 标签：mootools, accordion

我拼凑了一些工作了几年的 mootools 手风琴代码，但突然间我注意到 Firefox 破坏了它——在 safari、chrome 或 IE 中没有问题。

[http://jordanrossfilms.com](http://jordanrossfilms.com)

控制台显示：TypeError：togger 在此处未定义：

toggler.setStyle('color', '#666');

我想这很简单，但是对于这个新手，我不知道是怎么回事？有什么帮助吗？完整代码如下：

```
window.addEvent('domready', function() {
var myAccordion = new Accordion($('accordion'), 'h1.toggler', 'div.element', {
    display: -1,
    opacity: true,
    alwaysHide: true,
    onActive: function(toggler, element){
        toggler.setStyle('color', '#df1a00');

        //remove the toggler hover events to clear out its events when it was inactive
        toggler.removeEvents('mouseenter');
        toggler.removeEvents('mouseleave');

        //then add your events again
        toggler.addEvent('mouseenter',function()
        {
          //...
        });
    },
    onBackground: function(toggler, element){
        toggler.setStyle('color', '#666');

        //remove the toggler hover events to clear out its events when it was active
        toggler.removeEvents('mouseenter');
        toggler.removeEvents('mouseleave');

        //then add your events again
        toggler.addEvent('mouseenter',function()
        {this.setStyle('color', '#df1a00');

        toggler.addEvent('mouseleave',function()
        {this.setStyle('color', '#666');

        });

        });
    }

}); 
```

var myAccordion2 = new Accordion($('accordion2'), 'h4.toggler', 'div.element2', { display: -1, opacity: true, alwaysHide: true, onActive: function(toggler, element){ 切换器。 setStyle('颜色', '#df1a00');

```
 //remove the toggler hover events to clear out its events when it was inactive
        toggler.removeEvents('mouseenter');
        toggler.removeEvents('mouseleave');

        //then add your events again
        toggler.addEvent('mouseenter',function()
        {
          //...
        });
    },
    onBackground: function(toggler, element){
        toggler.setStyle('color', '#666');

        //remove the toggler hover events to clear out its events when it was active
        toggler.removeEvents('mouseenter');
        toggler.removeEvents('mouseleave');

        //then add your events again
        toggler.addEvent('mouseenter',function()
        {this.setStyle('color', '#df1a00');

        toggler.addEvent('mouseleave',function()
        {this.setStyle('color', '#666');

        });

        });
    }

});

var myAccordion = new Accordion($('accordion3'), 'h5.toggler', 'div.element3', {
    display: -1,
    opacity: true,
    alwaysHide: true,
    onActive: function(toggler, element){
        toggler.setStyle('color', '#df1a00');

        //remove the toggler hover events to clear out its events when it was inactive
        toggler.removeEvents('mouseenter');
        toggler.removeEvents('mouseleave');

        //then add your events again
        toggler.addEvent('mouseenter',function()
        {
          //...
        });
    },
    onBackground: function(toggler, element){
        toggler.setStyle('color', '#666');

        //remove the toggler hover events to clear out its events when it was active
        toggler.removeEvents('mouseenter');
        toggler.removeEvents('mouseleave');

        //then add your events again
        toggler.addEvent('mouseenter',function()
        {this.setStyle('color', '#df1a00');

        toggler.addEvent('mouseleave',function()
        {this.setStyle('color', '#666');

        });

        });
    }

}); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:25:55.137

我看到您正在使用 mootools 1.2 mootools 最近发布了对 1.2 的修复，由于新的 firefox 和 mootools 与 String.concat 冲突，导致 firefox 出错。

您可以查看有关它的[博客文章](http://mootools.net/blog/2013/02/19/mootools-1-2-6-released/)。无论如何尝试更新到新的1.2版本，看看它是否解决了问题

# android - 将目录从 Assets 复制到本地目录

> ID：15574983
> 
> 赞同：23
> 
> 时间：2013-03-22T16:12:02.323
> 
> 标签：android

我正在尝试使用资产文件夹中的目录并将其作为`File`. 是否可以访问 Assets 目录中的某些内容`File`？如果没有，如何将目录从 Assets 文件夹复制到应用程序的本地目录？

我会像这样复制一个文件：

```
 try
    {
        InputStream stream = this.getAssets().open("myFile");
        OutputStream output = new BufferedOutputStream(new FileOutputStream(this.getFilesDir() + "/myNewFile"));

        byte data[] = new byte[1024];
        int count;

        while((count = stream.read(data)) != -1)
        {
            output.write(data, 0, count);
        }

        output.flush();
        output.close();
        stream.close();
    }
    catch(IOException e)
    {
        e.printStackTrace();
    } 
```

但是，我不确定如何为目录执行此操作。

我宁愿不围绕不起作用的东西构建我的基础架构，那么我如何将目录从 Assets 复制到本地目录，或者是否可以将我的 Assets 中的目录作为`File`?

***编辑***

这就是我为自己的项目解决它的方法：

```
InputStream stream = null;
OutputStream output = null;

for(String fileName : this.getAssets().list("demopass"))
{
    stream = this.getAssets().open("directoryName/" + fileName);
    output = new BufferedOutputStream(new FileOutputStream(this.getFilesDir() + "/newDirectory/" + fileName));

    byte data[] = new byte[1024];
    int count;

    while((count = stream.read(data)) != -1)
    {
        output.write(data, 0, count);
    }

    output.flush();
    output.close();
    stream.close();

    stream = null;
    output = null;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-22T16:51:48.120

正如 dmaxi 在上面的评论中所建议的，您可以使用他的链接，使用以下代码：

```
 void displayFiles (AssetManager mgr, String path) {
        try {
            String list[] = mgr.list(path);
            if (list != null)
                for (int i=0; i<list.length; ++i)
                {
                    Log.v("Assets:", path +"/"+ list[i]);
                    displayFiles(mgr, path + "/" + list[i]);
                }
        } catch (IOException e) {
             Log.v("List error:", "can't list" + path);
        }
     } 
```

我把它放在[这个链接](https://stackoverflow.com/questions/1495585/how-can-i-get-a-directory-listing-of-resources-from-my-android-app?lq=1)上。也许您可以将此代码与先例结合起来。

**编辑：**另见[AssetManager](http://developer.android.com/reference/android/content/res/AssetManager.html)。

```
private void copyFolder(String name) {
            // "Name" is the name of your folder!
    AssetManager assetManager = getAssets();
    String[] files = null;

    String state = Environment.getExternalStorageState();

    if (Environment.MEDIA_MOUNTED.equals(state)) {
        // We can read and write the media
        // Checking file on assets subfolder
        try {
            files = assetManager.list(name);
        } catch (IOException e) {
            Log.e("ERROR", "Failed to get asset file list.", e);
        }
        // Analyzing all file on assets subfolder
        for(String filename : files) {
            InputStream in = null;
            OutputStream out = null;
            // First: checking if there is already a target folder
            File folder = new File(Environment.getExternalStorageDirectory() + "/yourTargetFolder/" + name);
            boolean success = true;
            if (!folder.exists()) {
                success = folder.mkdir();
            }
            if (success) {
                // Moving all the files on external SD
                try {
                    in = assetManager.open(name + "/" +filename);
                    out = new FileOutputStream(Environment.getExternalStorageDirectory() + "/yourTargetFolder/" + name + "/" + filename);
                    Log.i("WEBVIEW", Environment.getExternalStorageDirectory() + "/yourTargetFolder/" + name + "/" + filename);
                    copyFile(in, out);
                    in.close();
                    in = null;
                    out.flush();
                    out.close();
                    out = null;
                } catch(IOException e) {
                    Log.e("ERROR", "Failed to copy asset file: " + filename, e);
                } finally {
                    // Edit 3 (after MMs comment)
                    in.close();
                    in = null;
                    out.flush();
                    out.close();
                    out = null;
                }
            }
            else {
                // Do something else on failure
            }       
        }
    } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        // We can only read the media
    } else {
        // Something else is wrong. It may be one of many other states, but all we need
        // is to know is we can neither read nor write
    }
}

// Method used by copyAssets() on purpose to copy a file.
private void copyFile(InputStream in, OutputStream out) throws IOException {
    byte[] buffer = new byte[1024];
    int read;
    while((read = in.read(buffer)) != -1) {
        out.write(buffer, 0, read);
    }
} 
```

**编辑 2：**我在上面添加了一个示例：这段代码仅将特定文件夹从资产复制到 sd 卡。让我知道它是否有效！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-03-15T13:38:52.503

这是执行此操作的递归函数 - `copyAssetFolder`。

```
public static boolean copyAssetFolder(Context context, String srcName, String dstName) {
    try {
        boolean result = true;
        String fileList[] = context.getAssets().list(srcName);
        if (fileList == null) return false;

        if (fileList.length == 0) {
            result = copyAssetFile(context, srcName, dstName);
        } else {
            File file = new File(dstName);
            result = file.mkdirs();
            for (String filename : fileList) {
                result &= copyAssetFolder(context, srcName + File.separator + filename, dstName + File.separator + filename);
            }
        }
        return result;
    } catch (IOException e) {
        e.printStackTrace();
        return false;
    }
}

public static boolean copyAssetFile(Context context, String srcName, String dstName) {
    try {
        InputStream in = context.getAssets().open(srcName);
        File outFile = new File(dstName);
        OutputStream out = new FileOutputStream(outFile);
        byte[] buffer = new byte[1024];
        int read;
        while ((read = in.read(buffer)) != -1) {
            out.write(buffer, 0, read);
        }
        in.close();
        out.close();
        return true;
    } catch (IOException e) {
        e.printStackTrace();
        return false;
    }
} 
```

或者在**Kotlin中也一样**

```
fun AssetManager.copyAssetFolder(srcName: String, dstName: String): Boolean {
    return try {
        var result = true
        val fileList = this.list(srcName) ?: return false
        if (fileList.isEmpty()) {
            result = copyAssetFile(srcName, dstName)
        } else {
            val file = File(dstName)
            result = file.mkdirs()
            for (filename in fileList) {
                result = result and copyAssetFolder(
                    srcName + separator.toString() + filename,
                    dstName + separator.toString() + filename
                )
            }
        }
        result
    } catch (e: IOException) {
        e.printStackTrace()
        false
    }
}

fun AssetManager.copyAssetFile(srcName: String, dstName: String): Boolean {
    return try {
        val inStream = this.open(srcName)
        val outFile = File(dstName)
        val out: OutputStream = FileOutputStream(outFile)
        val buffer = ByteArray(1024)
        var read: Int
        while (inStream.read(buffer).also { read = it } != -1) {
            out.write(buffer, 0, read)
        }
        inStream.close()
        out.close()
        true
    } catch (e: IOException) {
        e.printStackTrace()
        false
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-07T06:09:40.677

您可以使用以下方法将资产文件夹复制到 SD 卡中的某个位置。从您的调用方法只需调用 moveAssetToStorageDir("") 即可移动整个资产文件夹。如果是子文件夹，您可以指定资产文件夹内的相对路径。

```
public void moveAssetToStorageDir(String path){
    File file = getExternalFilesDir(null);
    String rootPath = file.getPath() + "/" + path;
    try{
        String [] paths = getAssets().list(path);
        for(int i=0; i<paths.length; i++){
            if(paths[i].indexOf(".")==-1){
                File dir = new File(rootPath + paths[i]);
                dir.mkdir();
                moveAssetToStorageDir(paths[i]);
            }else {
                File dest = null;
                InputStream in = null;
                if(path.length() == 0) {
                    dest = new File(rootPath + paths[i]);
                    in = getAssets().open(paths[i]);
                }else{
                    dest = new File(rootPath + "/" + paths[i]);
                    in = getAssets().open(path + "/" + paths[i]);
                }
                dest.createNewFile();
                FileOutputStream out = new FileOutputStream(dest);
                byte [] buff = new byte[in.available()];
                in.read(buff);
                out.write(buff);
                out.close();
                in.close();
            }
        }
    }catch (Exception exp){
        exp.printStackTrace();
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-06T15:41:22.753

这是OP答案的干净版本。

```
public void copyAssetFolderToFolder(Context activity, String assetsFolder, File destinationFolder) {
  InputStream stream = null;
  OutputStream output = null;
  try {
    for (String fileName : activity.getAssets().list(assetsFolder)) {
      stream = activity.getAssets().open(assetsFolder + ((assetsFolder.endsWith(File.pathSeparator))?"":File.pathSeparator) + fileName);
      output = new BufferedOutputStream(new FileOutputStream(new File(destinationFolder, fileName)));

      byte data[] = new byte[1024];
      int count;

      while ((count = stream.read(data)) != -1) {
        output.write(data, 0, count);
      }

      output.flush();
      output.close();
      stream.close();

      stream = null;
      output = null;
    }
  } catch (/*any*/Exception e){e.printStackTrace();}
} 
```

以供将来参考，请为大家省去麻烦并发布上下文完整的源列表。只要您发布完整的答案，这个网站对于初学者和专家来说都是一个很好的编码资源。不能假设其他任何人“理解”随机代码块所属的位置，或者代码应该在其中执行的上下文。

此示例调用包含`getAssets()`方法的活动的上下文。在 android 平台中，它们是除此之外`Activity`可以提供此上下文的其他类。一个例子是（通用引用）`Service`类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-23T12:27:16.190

## 从资产中移动任意目录和文件文件夹

问题是……资产是特殊的。您不能将其包装在`File`对象中并询问`isDirectory()`，也不能将这些资产传递到 NDK。所以最好将它们包装起来并将它们移动到缓存目录或 SDCard 上，这就是你在这里的原因。

我已经看到了许多 SO 答案，这些答案涉及通过一系列 fileOrDirectoryName 字符串滚动，然后创建目录，然后进行递归调用并复制单个文件。这会导致您创建一个文件夹或文件，而您无法从资产中分辨出您拥有的资产。

### 将其设为 Zip 文件

我的建议是将您要发送到 SDCard 或内部缓存文件夹的每个任意资产集合并将其压缩。问题的结构更符合资产概念。

```
AssetManager assetManager = context.getAssets();
String fullAssetPath = fromAssetPath + "/" + zipFilename;
String toPath = "/wherever/I/want";

try {
    InputStream inputStream = assetManager.open(fullAssetPath);
    ZipInputStream zipInputStream = new ZipInputStream(new BufferedInputStream(inputStream));

    ZipEntry zipEntry;
    byte[] buffer = new byte[8192];
    while ((zipEntry = zipInputStream.getNextEntry()) != null) {
        String fileOrDirectory = zipEntry.getName();

        Uri.Builder builder = new Uri.Builder();
        builder.scheme("file");
        builder.appendPath(toPath);
        builder.appendPath(fileOrDirectory);
        String fullToPath = builder.build().getPath();

        if (zipEntry.isDirectory()) {
            File directory = new File(fullToPath);
            directory.mkdirs();
            continue;
        }   

        FileOutputStream fileOutputStream = new FileOutputStream(fullToPath);
        while ((count = zipInputStream.read(buffer)) != -1) {
            fileOutputStream.write(buffer, 0, count);
        }
        fileOutputStream.close();
        zipInputStream.closeEntry();
    }

    zipInputStream.close();

} catch (IOException e) {
    Log.e(TAG, e.getLocalizedMessage());
} 
```

### 关于缓冲区大小的小说明

我见过很多涉及非常小的缓冲区大小的示例，例如 1024。除非您只是想浪费时间，否则请随意尝试更大的字节缓冲区大小。即使是我选择的 8192 在现代硬件上也可能很小。

### 避免 Stringy 路径

注意`Uri.Builder`构造路径的使用。我更喜欢这种风格的路径构造而不是`directory`+ "/" + `file`。然后你在做生意，为了保持一致性，避免分配`String d = "myDirectory/"`或`String f = "/file.txt"`其他类似的字符串黑客废话。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-02T09:34:36.837

这是复制资产文件夹的代码，其中目录和文件都复制到 sdcard 文件夹中……这对我来说非常适合……

```
public void copyFileOrDir(String path) {
AssetManager assetManager = this.getAssets();
String assets[] = null;
try {
    assets = assetManager.list(path);
    if (assets.length == 0) {
        copyFile(path);
    } else {
        String fullPath = "/data/data/" + this.getPackageName() + "/" + path;
        File dir = new File(fullPath);
        if (!dir.exists())
            dir.mkdir();
        for (int i = 0; i < assets.length; ++i) {
            copyFileOrDir(path + "/" + assets[i]);
        }
    }
} catch (IOException ex) {
    Log.e("tag", "I/O Exception", ex);
}
}

private void copyFile(String filename) {
AssetManager assetManager = this.getAssets();

InputStream in = null;
OutputStream out = null;
try {
    in = assetManager.open(filename);
    String newFileName = "/data/data/" + this.getPackageName() + "/" + filename;
    out = new FileOutputStream(newFileName);

    byte[] buffer = new byte[1024];
    int read;
    while ((read = in.read(buffer)) != -1) {
        out.write(buffer, 0, read);
    }
    in.close();
    in = null;
    out.flush();
    out.close();
    out = null;
} catch (Exception e) {
    Log.e("tag", e.getMessage());
}

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-08T11:43:51.653

这是一个用 kotlin 编写的递归解决方案。它适用于文件和目录。

用法 -`copyAssetDir(context, "<asset path>", "<dest dir>")`

```
import android.content.Context
import java.io.File
import java.io.FileOutputStream

fun copyAssetDir(context: Context, assetPath: String, destDirPath: String) {
    walkAssetDir(context, assetPath) {
        copyAssetFile(context, it, "$destDirPath/$it")
    }
}

fun walkAssetDir(context: Context, assetPath: String, callback: ((String) -> Unit)) {
    val children = context.assets.list(assetPath) ?: return
    if (children.isEmpty()) {
        callback(assetPath)
    } else {
        for (child in children) {
            walkAssetDir(context, "$assetPath/$child", callback)
        }
    }
}

fun copyAssetFile(context: Context, assetPath: String, destPath: String): File {
    val destFile = File(destPath)
    File(destFile.parent).mkdirs()
    destFile.createNewFile()

    context.assets.open(assetPath).use { src ->
        FileOutputStream(destFile).use { dest ->
            src.copyTo(dest)
        }
    }

    return destFile
} 
```

# php - 数据库中的 CodeIgniter 设置可在所有页面上访问

> ID：15574985
> 
> 赞同：0
> 
> 时间：2013-03-22T16:12:04.983
> 
> 标签：php, codeigniter, codeigniter-2

我的数据库中有一个名为 settings 的表，其结构如下 {id, name, value}。我希望一个变量在所有页面上都可用，例如 $setting[name] => value.... 我尝试将它放在助手上并自动加载它，但助手无法访问数据库。还有其他想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:32:02.823

[http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

创建一个名为 MY_Controller 的类，它扩展 CI_Controller 并将其保存在 application 下的 core 文件夹中。然后让所有其他类扩展 MY_Controller 而不是 CI_Controller。

然后你可以在 MY_Controller 的构造函数中设置你的值

```
<?PHP
class MY_Controller extends CI_Controller
{

    function __construct()
    {
        parent::__construct();
        $settings = $this->db->get('settings');
    } 
```

这将使您的所有控制器都可以使用 $settings，就像您想要的那样。只要记住您需要这些设置的控制器必须扩展 MY_Controller！

```
class A_new_controller extends MY_Controller { 
```

# c - 简单的状态机。switch() 何时击败 if - else if - else

> ID：15574989
> 
> 赞同：0
> 
> 时间：2013-03-22T16:12:15.087
> 
> 标签：c, conditional-statements

***在 if - else if - else 和 switch - case 之间做出决定时可以遵循哪些准则？***

等效结构对的一些示例。还是他们？

```
int a;
#define const1 42
#define const2 666 
```

* * *

```
if(a == const1){};

switch(a){  
    case const1: {} 
    break;  
} 
```

* * *

```
if(a == const1){}
else {}

switch(a){  
    case const1: {} 
    break;  

    default: {}
    break;
} 
```

* * *

```
if(a == const1){}
else if(a == const2){}
else {}

switch(a){  
    case const1: {} 
    break;  

    case const2: {} 
    break;  

    default: {}
    break;
} 
```

从这里开始，我认为switch在可读性和性能方面绝对是优越的。

事实上，我目前处于最后的境地，正在努力决定走哪条路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T16:27:51.047

如果他们只涉及评估一个变量，测试它并根据它执行一条语句，那么逻辑上没有区别，任何体面的编译器都可以看到这一点。

`32`我用 an`if`和 a和 gcc尝试了相同的测试（检查） `switch`，即使所有优化都关闭了生成：

对于`if`：

```
movl    a(%rip), %eax
cmpl    $32, %eax
jne .L2
movl    $1, %eax
jmp .L3 
```

对于`switch`：

```
movl    a(%rip), %eax
cmpl    $32, %eax
jne .L6
movl    $1, %eax
jmp .L3 
```

当然，如果您要为许多值测试相同的整数，a`switch`更具可读性——这就是它的用途。

# android - E/SpannableStringBuilder(18909)：SPAN_EXCLUSIVE_EXCLUSIVE 跨度不能有零长度

> ID：15574990
> 
> 赞同：7
> 
> 时间：2013-03-22T16:12:17.730
> 
> 标签：android

在 log cat 中出现上述错误，我在 google 中发现了很多关于此的点击，但它们似乎不适用于我的案例。

目前我不知道从哪里开始寻找或发布什么代码/布局来获得你们的帮助。

那么我应该在我的代码中的哪里开始寻找摆脱这个错误？该应用程序似乎可以正常工作，但我仍然想摆脱错误 - 你永远不知道......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T05:50:44.753

只需将此属性添加到您的编辑文本中，您的问题肯定会得到解决

```
 android:inputType="textNoSuggestions" 
```

将上述属性添加到应用程序中使用的每个编辑文本中，或者仅添加到该编辑文本中出现错误的位置。

当你完成它或有更多疑问时告诉我？谢谢

# php - 带有别名的 SUM() 字段上的学说 orderBy

> ID：15574991
> 
> 赞同：11
> 
> 时间：2013-03-22T16:12:20.940
> 
> 标签：php, doctrine-orm, doctrine, doctrine-query

我试图在教义上做一个简单的查询，但很挣扎。

```
$query->select(array(
    'app_title' => 'u.title',
    'user_name' => 'u.user_name',
    'first_used' => 'MIN(u.creation_time)',
    'last_used' => 'MAX(u.stop_time)',
    'total_usage' => 'SUM(u.stream_seconds)',
))
->from(self::USAGE_TABLE, 'u')
->orderBy('total_usage', 'DESC'); 
```

显然，我收到关于列名未知的错误，因为 Doctrine 正在使用它自己的别名 (sclr4)。

但是，如果我尝试按实际值订购；SUM(u.stream_seconds)，然后我在 order by 子句中得到一个意外的括号，我很确定 SQL 不支持这个。

所以，我只是想把数据放在一个表中并处理列的排序。这看起来很简单，我该怎么做？有任何想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-23T15:39:35.907

1.  您可以通过使用别名结果在查询投影中列出 SUM 结果字段来排序`AS`。
2.  如果要使用聚合函数，例如`MIN()`, `MAX()`, `AVG()`，则必须使用`GROUP BY`.

尝试与此类似，这对我来说非常有效（顺便说一句，而不是`select`方法中的关联数组）：

```
$q = $this->em()->createQueryBuilder();

$q->select(['product.id', 'product.title'])
  ->addSelect('SUM(product.price) AS HIDDEN stat_sum_realised')
  ->from('ModuleAdmin\Entity\ProductEntity', 'product')
  ->groupBy('product.id');

$q->orderBy('stat_sum_realised', 'DESC'); 
```

此处详细介绍了聚合函数（例如 MySQL）： [http ://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

从 Doctrine ORM 2.3 开始，您还可以使用`HIDDEN`关键字，这将避免（在这种情况下）`stat_sum_realised`将水合到您的结果集中。

# php - 通过作曲家自己的项目

> ID：15574992
> 
> 赞同：8
> 
> 时间：2013-03-22T16:12:23.380
> 
> 标签：php, composer-php

我已经通过作曲家加载了一些库，我想知道是否可以在 /vendor 映射中添加我自己的库，然后让作曲家自动加载器加载它？该结构类似于 /vendor/mylibrary/，然后是命名空间 mylibrary。

这可能吗？也可以向作曲家自动加载器添加不同的地图吗？例如 /app/src/ 然后让它加载该文件夹中的所有类？还是我必须为此制作自己的装载机？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-22T16:23:31.787

阅读[作曲家文档](http://getcomposer.org/doc/01-basic-usage.md#autoloading)：

> 您甚至可以通过将自动加载字段添加到 composer.json 来将您自己的代码添加到自动加载器。
> 
> ```
> {
>     "autoload": {
>         "psr-0": {"Acme": "src/"}
>     } 
> ```
> 
> }
> 
> Composer 将为 Acme 命名空间注册一个 PSR-0 自动加载器。您定义从命名空间到目录的映射。src 目录将位于您的项目根目录中，与供应商目录处于同一级别。一个示例文件名是包含 Acme\Foo 类的 src/Acme/Foo.php。
> 
> 添加 autoload 字段后，您必须重新运行 install 以重新生成 vendor/autoload.php 文件。

所以基本上，您只需要[遵循 PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)，并通过将该行添加到您的 composer.json 来告诉作曲家在哪里可以找到您的库

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-23T01:29:04.163

是的。你可以实现它。如下配置您的 composer.json 文件：

```
{
    "autoload": {
        "classmap": [ "classes" ]
} 
```

这里的 classes 是您拥有所有与应用程序相关的类的目录的名称。与供应商相关的类也应该被自动检测到。只需添加以下行即可同时实现两者：

```
require 'vendor/autoload.php'; 
```

您可以使用命名空间来引用您的类，如下所示：

```
use classes\Model\Article; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T16:29:12.960

是的，当然可以添加自己的库，您应该感到非常鼓励这样做。如果您的图书馆是公开的，您只需在 packagist.org 上注册即可。如果不是，它会更复杂一些，但并非不可能。

如果您的项目不遵循 PSR-0 标准，composer 将为您创建一个类映射。不支持自定义自动加载器。

如果您遇到问题，我建议您阅读有关所有这些的（非常出色的）文档并返回。

[http://getcomposer.org/doc/](http://getcomposer.org/doc/)

# javascript - 在javascript中排序时，new RegExp(filter, "i"))中的i有什么意义？

> ID：15574999
> 
> 赞同：1
> 
> 时间：2013-03-22T16:12:49.963
> 
> 标签：javascript, regex

我正在使用 javascript 对一些内容进行排序，并且试图弄清楚每一行代码的确切作用，以便我可以修复它以按照我的意愿工作。

我只是想知道它的意义`i` 是什么

```
(new RegExp(filter, "i")) < 0 
```

我知道过滤器是我给排序变量起的名字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T16:14:01.857

这是不区分大小写的标志。“g”是全局标志。你可以使用一个或另一个或两者或不使用...“i”或“g”或“gi”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:14:27.707

“i”是正则表达式的标志，表示忽略大小写

例如：

`new RegExp("abc", "i")`将生成正则表达式`/abc/i`

`new RegExp("abc"`) 将生成正则表达式`/abc/`

一个提示，如果你可以从字面上构建你的正则表达式，你可以直接声明表达式，例如：`var regexp = /abc/i`; 如果您需要通过组合部件来构建它，您可以使用函数构造函数作为示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T16:14:34.790

你也可以这样做：

```
var reg = /...../i; 
```

达到同样的效果。