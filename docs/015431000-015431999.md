# StackOverflow 问答 15431000-15431999

# c# - ASP.net c# 数据库调用

> ID：15431000
> 
> 赞同：0
> 
> 时间：2013-03-15T11:17:04.497
> 
> 标签：c#, asp.net, sql

我想知道是否有人可以帮助我解决这个问题。

基本上我有一个 Web 应用程序，它根据 UID 在数据库中搜索一个人。找到名称后，我打开另一个 db conn 并搜索他们的经理电子邮件地址。

但是我收到“对象引用未设置为实例”错误，我假设某些内容为空并且它不喜欢它？那是正确的。

这是我的代码。

```
public partial class Leaver : System.Web.UI.Page
{

        string Managers_Name = null;
        string Managers_Email = null;

protected void Page_Load(object sender, EventArgs e)
{

}

    protected void Button1_SearchDB(object sender, EventArgs e)
{
    SqlDataReader reader = null;
    SqlConnection conn = null;

    try
    {
        conn = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["App_NewStarterConnectionString"].ConnectionString);

        {
            conn.Open();
            using (SqlCommand cmd =
                new SqlCommand("SELECT * FROM dbo.tb_starters WHERE Payrol = @Payrol", conn))
            {
                cmd.Parameters.AddWithValue("@Payrol", Payrol.Value);
                reader = cmd.ExecuteReader();

                while (reader.Read())
                {
                   Fname.Value = reader["FirstName"].ToString();
                   Lname.Value = reader["LastName"].ToString();
                   Payrol.Value = reader["Payrol"].ToString();
                   section.Value = reader["Section"].ToString();
                   Managers_Name = reader["Manager"].ToString();

                }

            }

        }

    }
    catch (Exception ee)
    {
        throw ee;
    }
    finally {

        GetManagersEmail();

        if (reader != null)
            reader.Close();

        if (conn.State == ConnectionState.Open)
            conn.Close();
    }

}

protected void GetManagersEmail()
{
    SqlDataReader reader_new = null;
    SqlConnection conn_new = null;

    try
    {
        conn_new = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["App_NewStarterConnectionString"].ConnectionString);
        {
            conn_new.Open();
            using (SqlCommand cmd = new SqlCommand("SELECT Email FROM dbo.tb_starters WHERE FullName = @ManagersName", conn_new))
            {
                cmd.Parameters.AddWithValue("@ManagersName", Managers_Name);
                while (reader_new.Read())
                {
                    Managers_Email = reader_new["Email"].ToString();
                    Response.Write(Managers_Email);
                }
            }

        }

    }
    catch (Exception ee)
    {
        throw ee;
    }
    finally
    {

        if (reader_new != null)
            reader_new.Close();

        if (conn_new.State == ConnectionState.Open)
            conn_new.Close();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:21:03.163

您是否像在`reader = cmd.ExecuteReader();`

尝试

```
reader_new = cmd.ExecuteReader(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:21:18.997

> 但是我收到“对象引用未设置为实例”错误，我假设某些内容为空并且它不喜欢它？那是正确的。

正确的。对对象执行操作`NULL`会引发该错误。

没有堆栈跟踪，这是一个猜测。

可能，您的错误就在这里：

```
Fname.Value = reader["FirstName"].ToString();
Lname.Value = reader["LastName"].ToString();
Payrol.Value = reader["Payrol"].ToString();
section.Value = reader["Section"].ToString();
Managers_Name = reader["Manager"].ToString(); 
```

如果这些值之一是`NULL`，`Object reference not set to an instance`则会抛出 an 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:21:29.770

不要在开始时为您的 SqlDataReader 和 SqlConnection 分配空值，只需将它们定义为

```
 SqlDataReader reader;
    SqlConnection conn ; 
```

这可能是问题！

# php - SOAP 请求无响应

> ID：15431004
> 
> 赞同：1
> 
> 时间：2013-03-15T11:17:10.753
> 
> 标签：php, xml, soap

你能帮我或指出正确的方向吗，我正在尝试对 WSDL 提要执行肥皂请求，但我没有得到任何回报。

当我使用标准 XML 时，一切似乎都可以正常工作 - 我将如何将以下内容写入数组：

```
<?xml version="1.0" encoding="utf-8"?> 
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body> 
<SupplierDirectorySearch xmlns="SOAPREQUEST"> 
<SupplierSearchDetails ClassVersion="1.0"> 
<Identification> 
<SchemeOperatorRef>59582</SchemeOperatorRef> 
<SecurityToken>MYTOKEN</SecurityToken>
</Identification>
  <ApprovedServices ServiceRepair="Y" MOT="" Tyres="" CollectionDelivery="" CourtesyCar="" WhileUWait="" Callout24Hour="" BreakdownCover="" CollectionDeliveryNotes="" CourtesyCarNotes="" Inspections=""/>
  <SupplierLocation>BB1</SupplierLocation> 
  <SearchRadiusMiles>300</SearchRadiusMiles> 
  <Preference>P</Preference> 
  <MaxReturnNumber>5</MaxReturnNumber> 
  <PageNo>0</PageNo> 
 </SupplierSearchDetails> 
 </SupplierDirectorySearch> 
</soap:Body> 
</soap:Envelope>'; 
```

我写了以下肥皂请求：

```
$client = new SoapClient("URL?WSDL", $option);
$res = $client->SupplierDirectorySearch(
array('SupplierSearchDetails'=> 
  array('Identification' => array('SchemeOperatorRef'=>'61', 'SecurityToken'=>'MYTOKEN'),
    'ApprovedServices' => array(
    'ServiceRepair'=>'Y',
    'MOT'=>'',
    'Tyres'=>'',
    'CollectionDelivery'=>'',
    'CourtesyCar'=>'',
    'WhileUWait'=>'',
    'Callout24Hour'=>'',
    'BreakdownCover'=>'',
    'CollectionDeliveryNotes'=>'',
    'CourtesyCarNotes'=>'',
    'Inspections'=>'',
      ),  
    'SupplierLocation' => 'BB1',
    'SearchRadiusMiles' => '2',
    'Preference' => 'P',
    'MaxReturnNumber' => '5',
    'PageNo' => '0'
  )
  )
); 
```

什么都没有回来，我已经启用了跟踪，这就是请求中传递的内容：

```
REQUEST:
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"    xmlns:ns1="OneLink_ServiceBookingComponent">
<SOAP-ENV:Body><ns1:SupplierDirectorySearch>            
<ns1:SupplierSearchDetails>
<ns1:Identification>
 <ns1:SchemeOperatorRef>61</ns1:SchemeOperatorRef>
 <ns1:SecurityToken>MYTOKEN</ns1:SecurityToken>
</ns1:Identification>  

<ns1:SupplierLocation>BB1</ns1:SupplierLocation>
<ns1:SearchRadiusMiles>2</ns1:SearchRadiusMiles>
<ns1:Preference>P</ns1:Preference> 
<ns1:ApprovedServices ServiceRepair="Y" MOT="" Tyres="" CollectionDelivery=""  CourtesyCar="" WhileUWait="" Callout24Hour="" BreakdownCover="" CollectionDeliveryNotes="" CourtesyCarNotes="" Inspections=""/>
<ns1:MaxReturnNumber>5</ns1:MaxReturnNumber>
<ns1:PageNo>0</ns1:PageNo>
</ns1:SupplierSearchDetails>
</ns1:SupplierDirectorySearch>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

任何人都可以对此有所了解，这让我绞尽脑汁！！

* * *

我一直在寻找，你认为我将不得不像这样对部分进行编码：

```
<?php 
  $amount['_'] = 25; 
  $amount['currencyId'] = 'GBP'; 
  $encodded = new SoapVar($amount, SOAP_ENC_OBJECT); 

?> 
```

斯科特

# c# - 检测两个移动手指的位置

> ID：15431007
> 
> 赞同：1
> 
> 时间：2013-03-15T11:17:16.007
> 
> 标签：c#, computer-vision, aforge, motion-detection

我试图用我的网络摄像头检测移动的物体，我想检测我两根手指移动的位置，所以我可以根据手指的移动缩放图像，就像它是触摸屏一样，但我想要通过相机和检测移动手指来实现这一点，所以如果我将两个手指相互移动，图像会变小，如果我将它们彼此远离，图像会变大。
这是我的代码：

```
MotionDetector detector;
BlobCountingObjectsProcessing motionProcessing;
motionProcessing = new BlobCountingObjectsProcessing();
detector = new MotionDetector(new TwoFramesDifferenceDetector(), motionProcessing); 
```

我得到的是每个手指周围的许多矩形。如何分别识别每个手指？
非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:56:08.803

使用 RANSAC 使两条线穿过矩形的质心，每个手指一条。两条线之间的斜率差异将告诉您它们相距多远。所以斜率差异的梯度会告诉你如何缩放图像以及缩放多少。

# c# - Web 应用程序抛出 'Cannot INSERT null.... 列不允许 NULLS

> ID：15431010
> 
> 赞同：-1
> 
> 时间：2013-03-15T11:17:30.363
> 
> 标签：c#, asp.net, entity-framework-4, identity-column

上下文：Web 应用程序 (asp.net) 使用 FormView 编辑学生数据并将其插入 SQL Server DB。错误：

> System.Data.SqlClient.SqlException：无法将值 NULL 插入列 'txtSchoolID'、表 'iSAMS.dbo.TblPupilManagementPupils'；列不允许空值。插入失败。

我有一个包含`FormView`控件的 aspx 页面，该控件包含（编辑、插入和只读）模板和按钮（用于更新和插入数据）。插入使用 onclick 事件处理程序在`TblPupilManagementPupils`表中插入新行。

此表包含（在其他列中）具有以下属性的主键：

```
身份：真
身份种子：1
身份增量：1
数据类型：int
主键：真
允许空值：false

```

在代码隐藏文件中，我使用 objectcontext 来注册实体集合并提交新对象。见下文：

```
protected void btnInsertCandidate_onClick(object sender, EventArgs e)
{
            //string SchoolCode = ((Label)selectedCandidateFormView.FindControl("lblCandidateKey")).Text;
            string FirstName = ((TextBox)selectedCandidateFormView.FindControl("txbFirstName")).Text;
            string LastName = ((TextBox)selectedCandidateFormView.FindControl("txbLastName")).Text;
            string PreName = ((TextBox)selectedCandidateFormView.FindControl("txbPreName")).Text;
            string Gender = ((TextBox)selectedCandidateFormView.FindControl("txbGender")).Text;
            string DOB = ((TextBox)selectedCandidateFormView.FindControl("txbCandidateDOB")).Text;
            string YoE = ((TextBox)selectedCandidateFormView.FindControl("txbCandidateYearOfEntry")).Text;
            string NCEY = ((DropDownList)selectedCandidateFormView.FindControl("ddlCandidateNCEntryYear")).SelectedValue.ToString();
            string BoardingType = ((DropDownList)selectedCandidateFormView.FindControl("ddlCandidateBoardingType")).SelectedValue.ToString();
            string Languages = ((TextBox)selectedCandidateFormView.FindControl("txbCandidateLanguage")).Text;
            string Nationalities = ((TextBox)selectedCandidateFormView.FindControl("txbCandidateNationality")).Text;

            // insert a new candidate into iSAMS (pupil record) via LINQ. Effectively copying a candidate from Admissions into a new pupil row in iSAMS.
            using (AdmissionsVerificationApplication.iSAMSEntities iSAMSContext = new AdmissionsVerificationApplication.iSAMSEntities())
            {
                TblPupilManagementPupil pupil = new TblPupilManagementPupil()
                {
                    txtForename = FirstName,
                    txtSurname = LastName,
                    txtPreName = PreName,
                    txtGender = Gender,
                    txtDOB = Convert.ToDateTime(DOB),
                    intEnrolmentSchoolYear = Convert.ToInt32(YoE),
                    intEnrolmentNCYear = Convert.ToInt32(NCEY),
                    txtType = BoardingType,
                    txtLanguage = Languages,
                    txtNationality = Nationalities
                };       

                iSAMSContext.TblPupilManagementPupils.AddObject(pupil);
                iSAMSContext.SaveChanges();
        }
} 
```

我还检查了 .edmx 文件以确保 ID 列在 edmx:StorageModels 标记下具有正确的属性：

```
 <EntityType Name="TblPupilManagementPupils">
      <Key>
        <PropertyRef Name="TblPupilManagementPupilsID" />
      </Key>
      <Property Name="TblPupilManagementPupilsID" Type="int" Nullable="false" StoreGeneratedPattern="Identity" /> 
```

……

为了完整起见（我认为！），这是生成的 edmx 设计器文件中的相关部分：

```
public partial class TblPupilManagementPupil : EntityObject
{
    #region Factory Method

    /// <summary>
    /// Create a new TblPupilManagementPupil object.
    /// </summary>
    /// <param name="tblPupilManagementPupilsID">Initial value of the TblPupilManagementPupilsID property.</param>
    /// <param name="txtSchoolID">Initial value of the txtSchoolID property.</param>
    public static TblPupilManagementPupil CreateTblPupilManagementPupil(global::System.Int32 tblPupilManagementPupilsID, global::System.String txtSchoolID)
    {
        TblPupilManagementPupil tblPupilManagementPupil = new TblPupilManagementPupil();
        tblPupilManagementPupil.TblPupilManagementPupilsID = tblPupilManagementPupilsID;
        tblPupilManagementPupil.txtSchoolID = txtSchoolID;
        return tblPupilManagementPupil;
    }

    #endregion
    #region Primitive Properties

    /// <summary>
    /// No Metadata Documentation available.
    /// </summary>
    [EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.Int32 TblPupilManagementPupilsID
    {
        get
        {
            return _TblPupilManagementPupilsID;
        }
        set
        {
            if (_TblPupilManagementPupilsID != value)
            {
                OnTblPupilManagementPupilsIDChanging(value);
                ReportPropertyChanging("TblPupilManagementPupilsID");
                _TblPupilManagementPupilsID = StructuralObject.SetValidValue(value);
                ReportPropertyChanged("TblPupilManagementPupilsID");
                OnTblPupilManagementPupilsIDChanged();
            }
        }
    }
    private global::System.Int32 _TblPupilManagementPupilsID;
    partial void OnTblPupilManagementPupilsIDChanging(global::System.Int32 value);
    partial void OnTblPupilManagementPupilsIDChanged(); 
```

......

我在某处读到可能需要设置属性 IsDBGenerated 以指示映射使用 DB 生成 ID .... 但由于这是一个生成的文件，我不确定如何添加该属性。如果确实是这个问题。

任何帮助都将受到极大的欢迎。

问候

巴里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:23:26.263

原因是没有设置`iSAMS.dbo.TblPupilManagementPupils`表的属性。`txtSchoolID`您需要设置学校 ID 或将列设置为允许`NULL`。

# ember.js - {{action}} 辅助键盘事件不起作用？

> ID：15431011
> 
> 赞同：2
> 
> 时间：2013-03-15T11:17:32.953
> 
> 标签：ember.js

我以某种方式期望它可以工作：

```
<input {{action save this on="keyPress"}}> 
```

但什么也没有发生。

但是，将其更改为这样的鼠标事件非常有效：

```
<input {{action save this on="mouseDown"}}> 
```

我是不是误会了什么？

注意：如果我将`keyPress()`-hook 添加到相应的视图中，一切都会按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:44:36.170

推荐的方法是使用自定义视图并处理视图中的事件。

```
App.TextField = Em.TextField.extend({
  keyUp: function(){ alert( 1 ); }
}); 
```

然后在您将使用的模板中：

```
{{view App.TextField}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T17:44:55.130

我对此的修复刚刚合并到 Ember 中：[https ://github.com/emberjs/ember.js/commit/567aafa8f0de6b29d90d8638f2166b8df6275f9c](https://github.com/emberjs/ember.js/commit/567aafa8f0de6b29d90d8638f2166b8df6275f9c)

# jquery - jQuery悬停动画不会隐藏文本

> ID：15431012
> 
> 赞同：3
> 
> 时间：2013-03-15T11:17:36.617
> 
> 标签：jquery, css

我正在使用 jQuery 悬停效果。我计划从现在的状态扩展它，但我遇到了问题。问题是我想隐藏一些文本，直到您将鼠标悬停在该 div 上，然后它将显示它。那么一旦你移动到不同的 div 它会再次隐藏它？

这就是我到目前为止所拥有的。[http://jsfiddle.net/UDFw7/](http://jsfiddle.net/UDFw7/)

**CSS**

```
.divname {
height: 20px;
width: 300px;
border: 1px solid black;
} 
```

**javascript**

```
$('.divname').hover(function() {
$(this).animate({
    height: '40px'
}, 300);
},function() {
$(this).animate({
    height: '20px'
}, 300);
}); 
```

**HTML**

```
<div class='divname'>Text Here</div>
<div class='divname'>Text Here <br /> Hidden text until hover over</div>
<div class='divname'>Text Here</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T11:20:08.567

添加`overflow: hidden;`到`.divname`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:20:44.940

**CSS**

```
.divname {
height: 20px;
width: 300px;
border: 1px solid black;
}

.divname span {
    display: hidden;
 } 
```

**javascript**

```
$('.divname').hover(function() {
    $(this).animate({
        height: '40px'
    }, 300);
    $('span', this).css("display", "block");
},function() {
    $(this).animate({
        height: '20px'
    }, 300);
    $('span', this).css("display", "none");
}); 
```

**HTML**

```
<div class='divname'>Text Here</div>
<div class='divname'>Text Here <br /> <span> Hidden text until hover over<spa></div>
<div class='divname'>Text Here</div> 
```

演示：http: [//jsfiddle.net/UDFw7/14/](http://jsfiddle.net/UDFw7/14/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:23:44.640

您需要一个新的隐藏文本 CSS 类，例如：

```
.divname p.hidden {
    display:none;
} 
```

然后，当您将鼠标悬停在该类上时，您想要显示该文本，因此您需要在 javascript 中使用它：

```
 $(this).children().show(); 
```

这将更改显示属性以显示隐藏的文本。

我做了一个快速的小提琴，它并不完美，但它是一个开始：http: [//jsfiddle.net/UDFw7/3/](http://jsfiddle.net/UDFw7/3/)

您需要在其中添加一些内容，以便在您将鼠标悬停时“重新隐藏”该元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T11:24:25.763

如下更改 CSS

```
.divname {
height: 20px;
width: 300px;
border: 1px solid black;
overflow-y: hidden; 
```

}

# c# - FileUpload 不适用于 Razor 网页 2

> ID：15431020
> 
> 赞同：0
> 
> 时间：2013-03-15T11:18:07.357
> 
> 标签：c#, file-upload, asp.net-webpages, razor-2

我尝试在 IIS 上安装 MVC3、MVC4 和 Webpages 2，但它一直告诉我`@FileUpload.GetHTML`不存在...

> “/”应用程序中的服务器错误。
> 
> 编译错误
> 
> 说明：编译服务>此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：CS0103：当前上下文中不存在名称“FileUpload”
> 
> 源错误：

```
Line 17:     <body>
Line 18:     <h1>FileUpload - Single-File Example</h1>
Line 19:     @FileUpload.GetHtml(                     <---- RED LINE
Line 20:         initialNumberOfFiles:1,
Line 21:         allowMoreFilesToBeAdded:false, 
```

我试图手动复制 dll 以确保它们是正确的版本等。

*   System.Web.Helpers.dll
*   System.Web.Razor.dll
*   System.Web.WebPages.dll
*   System.Web.WebPages.Deloyment.dll
*   System.Web.WebPages.Razor.dll

Microsoft 的示例似乎包括 Microsoft.Web.Helpers ??? 在 Razor (v2) 中的任何地方都找不到...

FileUpload 不是 Razor V2 中 Helpers 的一部分吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T11:42:25.080

`@FileUpload.GetHTML`不是`System.Web.Helpers`程序集的一部分。它[`Microsoft.AspNet.Web.Helpers.Mvc`](http://nuget.org/packages/Microsoft.AspNet.Web.Helpers.Mvc/)是您必须在项目中安装的 NuGet 的一部分：

```
Install-Package Microsoft.AspNet.Web.Helpers.Mvc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T11:39:45.950

找到了！最后！NuGet 包丢失。

Microsoft.Web.Helpers 不属于 MVC3、MVC4、Razor v2、WebMatrix 2。

您只需要添加名为“ASP.NET Web Helpers Library”的 NuGet 打包（为什么它称为 ASP.NET 而不是 Microsoft 对我来说有点愚蠢，但这就是您需要获取 FileUpload.GetHTML 帮助程序来帮助的那个） .

我没有注意它，因为它在 NuGet 中指出：

> 此软件包包含 Web 帮助程序，可轻松向您的网站添加功能，例如验证码验证、Twitter 个人资料和搜索框、Gravatars、视频、Bing 搜索、网站分析或主题。

所以，弄清楚 UPLOAD 也是其中的一部分，对我来说并不是很清楚。

以为我会与其他困惑者分享这个:-)

# osx-mountain-lion - 将 jZMQ 绑定与 Java SDK 6 而不是 7

> ID：15431024
> 
> 赞同：0
> 
> 时间：2013-03-15T11:18:14.923
> 
> 标签：osx-mountain-lion, jmonkeyengine, jzmq

我正在尝试使用以下配置/要求运行ZeroMQ [http://www.zeromq.org/ ：](http://www.zeromq.org/)

*   内置 Java SDK 7 的 OS X 10.8
*   ZMQ 的 Java 绑定
*   需要使用 SDK 6

显然jzmq是用Java SDK 7的头文件编译的，但我真的需要用SDK 6的头文件编译它们。那是因为我想使用目前只支持SDK 6的[http://jmonkeyengine.org/ 。](http://jmonkeyengine.org/)

所以我的一般问题是，如何让它工作，或者只是提示在哪里获取 SDK 6 头文件以及如何用它们编译 jzmq。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T04:19:54.430

我是 JZMQ ZeroMQ 绑定的维护者之一。

我会在这里发布一个问题：[https](https://github.com/zeromq/jzmq/issues?state=open) ://github.com/zeromq/jzmq/issues?state= open，我一定会尽快削减一个使用 Java6 构建的新版本。

# android - 签署apk文件后，在模拟器上安装会强制关闭

> ID：15431025
> 
> 赞同：0
> 
> 时间：2013-03-15T11:18:17.110
> 
> 标签：android, classnotfoundexception

我已经发布了一个成功的应用程序，但是在升级应用程序后，当我签署并对齐应用程序并将其安装在模拟器/真实设备上时，它会强制关闭并给我`ClassNotFound`异常。

```
03-15 16:09:08.280: E/AndroidRuntime(7122): java.lang.RuntimeException: Unable to instantiate application william.shakespeare.MyBaseClass: java.lang.ClassNotFoundException: william.shakespeare.MyBaseClass
03-15 16:09:08.280: E/AndroidRuntime(7122):     at android.app.LoadedApk.makeApplication(LoadedApk.java:482)
03-15 16:09:08.280: E/AndroidRuntime(7122):     at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3909)
03-15 16:09:08.280: E/AndroidRuntime(7122):     at android.app.ActivityThread.access$1300(ActivityThread.java:122)
03-15 16:09:08.280: E/AndroidRuntime(7122):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1184)
03-15 16:09:08.280: E/AndroidRuntime(7122):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-15 16:09:08.280: E/AndroidRuntime(7122):     at android.os.Looper.loop(Looper.java:137)
03-15 16:09:08.280: E/AndroidRuntime(7122):     at android.app.ActivityThread.main(ActivityThread.java:4340)
03-15 16:09:08.280: E/AndroidRuntime(7122):     at java.lang.reflect.Method.invokeNative(Native Method)
03-15 16:09:08.280: E/AndroidRuntime(7122):     at java.lang.reflect.Method.invoke(Method.java:511)
03-15 16:09:08.280: E/AndroidRuntime(7122):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-15 16:09:08.280: E/AndroidRuntime(7122):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-15 16:09:08.280: E/AndroidRuntime(7122):     at dalvik.system.NativeStart.main(Native Method)
03-15 16:09:08.280: E/AndroidRuntime(7122): Caused by: java.lang.ClassNotFoundException: william.shakespeare.MyBaseClass
03-15 16:09:08.280: E/AndroidRuntime(7122):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
03-15 16:09:08.280: E/AndroidRuntime(7122):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
03-15 16:09:08.280: E/AndroidRuntime(7122):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
03-15 16:09:08.280: E/AndroidRuntime(7122):     at android.app.Instrumentation.newApplication(Instrumentation.java:942)
03-15 16:09:08.280: E/AndroidRuntime(7122):     at android.app.LoadedApk.makeApplication(LoadedApk.java:477)
03-15 16:09:08.280: E/AndroidRuntime(7122):     ... 11 more 
```

这是我的清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="william.shakespeare"
    android:versionCode="2"
    android:versionName="1.1" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="14" />

    <uses-permission android:name="android.permission.VIBRATE"/>
    <uses-permission android:name="android.permission.ACTION_SEND"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.BLUETOOTH"/>
    <user-permission android:name="android.permission.WRITE_SETTINGS" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.GET_TASKS"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:theme="@android:style/Theme.Holo.NoActionBar"
        android:label="William Shakespeare Quotes"
        android:launchMode="singleInstance"
        android:name="william.shakespeare.MyBaseClass"
        >

        <activity
            android:name=".Splash_Screen"
            android:label="@string/title_activity_splash__screen"
            android:launchMode="singleInstance"
            android:screenOrientation="portrait"

             >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".AboutUs" android:launchMode="singleInstance" android:screenOrientation="portrait"></activity>
        <activity android:name=".Biography" android:launchMode="singleInstance" android:screenOrientation="portrait" ></activity>
        <activity android:name=".Category_List" android:launchMode="singleInstance" android:screenOrientation="portrait" ></activity>
        <activity android:name=".Favourite_Quote" android:launchMode="singleInstance" android:screenOrientation="portrait"></activity>
        <activity android:name=".Favourite_Single_Quote" android:launchMode="singleInstance" android:screenOrientation="portrait" ></activity>
        <activity android:name=".Help" android:launchMode="singleInstance" android:screenOrientation="portrait" ></activity>
        <activity android:name=".MainMenu" android:launchMode="singleInstance" android:screenOrientation="portrait" ></activity>
        <activity android:name=".MyCustomActionBar" android:launchMode="singleInstance" android:screenOrientation="portrait"></activity>
        <activity android:name=".Quote_List" android:launchMode="singleInstance" android:screenOrientation="portrait" ></activity>
        <activity android:name=".QuotesIn_Category" android:launchMode="singleInstance" android:screenOrientation="portrait" ></activity>
        <activity android:name=".SearchFrom" android:launchMode="singleInstance" android:screenOrientation="portrait"></activity>
        <activity android:name=".Settings" android:launchMode="singleInstance" android:screenOrientation="portrait" ></activity>
        <activity android:name=".Single_Category" android:launchMode="singleInstance" android:screenOrientation="portrait"></activity>
        <activity android:name=".Single_Quote" android:launchMode="singleInstance" android:screenOrientation="portrait" ></activity>

        <activity android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>

        <receiver android:name=".Quote_Of_Day"/>
        <receiver android:name=".Notification_Quote"/>
        <receiver android:name=".Boot_Receiver">
    <intent-filter>  
        <action android:name="android.intent.action.BOOT_COMPLETED" />  
    </intent-filter>  
</receiver>
 </application>   
 </manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:23:39.760

ClassNotFound 异常意味着在您的清单文件中您错过了 Activity，或者您可能没有给出正确的 Activity 名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:24:13.550

你用过 ProGuard 吗？它可能混淆了一些不应该混淆的类，因为它们在 xml 文件（`AndroidManifest.xml`例如）或其他东西中被引用。更多关于 ProGuard 的信息可以在[这里](http://developer.android.com/tools/help/proguard.html)找到。

# python - 使用正则表达式将每行的第一个字母大写

> ID：15431026
> 
> 赞同：1
> 
> 时间：2013-03-15T11:18:21.703
> 
> 标签：python, regex, string

我正在尝试使每行的第一个字母大写

我正在使用以下正则表达式

```
ModCon = re.sub('^[a-z]{1}', lambda x: x.upper(), ModCon) 
```

当我运行程序时没有任何反应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:23:52.760

锚点只匹配输入字符串的`^`开头。如果您希望它在每个换行符之后匹配，您还需要给它`re.M`or`re.MULTILINE`标志：

```
ModCon = re.sub('^[a-z]', lambda x: x.group().upper(), ModCon, flags=re.M) 
```

我删除了该`{1}`部分；它是隐式的，没有重复指示符，字符集只匹配*一个*字符。

替换函数传递了一个[`Match`对象](http://docs.python.org/2/library/re.html#match-objects)`.group()`，所以你需要通过调用该方法来拉出匹配的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:34:41.387

lambda 函数中的变量 x 不是字符串类型，而是一个 <type '_sre.SRE_Match'>。为了获得匹配的字符串，您需要`call x.group()`.

因此（也使用其他答案中的提示），以下脚本可以正常工作：

```
import re
ModCon= "what is your favorite color?\nred"
ModCon = re.sub('^[a-z]', lambda x: x.group().upper(), ModCon, flags=re.M)
print (ModCon) 
```

# mysql - sql重复查询结果

> ID：15431027
> 
> 赞同：1
> 
> 时间：2013-03-15T11:18:23.427
> 
> 标签：mysql, sql

您好，我有如下表格：

```
Table: port 
tid    leftside    rightside 
1      2           3          
2      3           2
3      2           4
4      4           2
5      4           3
6      3           4
7      4           5
8      5           4
9      3           6
10     6           3 
```

当我运行这个查询

```
SELECT * 
FROM port pt JOIN port p 
  ON (pt.leftside = p.rightside 
     and p.leftside <> 2) 
WHERE pt.rightside = 2 
```

我得到了这个结果

```
tid    leftside    rightside 
6      3           4 
5      4           3
8      5           4
10     6           3 
```

前两行表示相同的关系，尽管它们位于相对的两侧。如果有重复的记录，我希望我的查询只检索一行。例如：查询应返回以下行

```
tid    leftside    rightside 
6      3           4 
```

代替

```
tid    leftside    rightside 
6      3           4 
5      4           3 
```

这些行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:42:10.663

另一种方法是交换`leftside`，`rightside`只要`leftside`大于`rightside`。然后使用`PARTITION BY`and`RANK`删除重复项：

```
SELECT tid,
       leftside,
       rightside
FROM
(
  SELECT p.tid,
         CASE WHEN p.leftside <= p.rightside
              THEN p.leftside
              ELSE p.rightside
         END AS leftside,
         CASE WHEN p.leftside > p.rightside
              THEN p.leftside
              ELSE p.rightside
         END AS rightside,
         RANK() OVER
         (PARTITION BY CASE WHEN p.leftside <= p.rightside
                            THEN p.leftside
                            ELSE p.rightside
                       END,
                       CASE WHEN p.leftside > p.rightside
                            THEN p.leftside
                            ELSE p.rightside
                       END
          ORDER BY p.tid ASC) AS rank
  FROM port pt JOIN port p 
    ON (pt.leftside = p.rightside
        AND p.leftside <> 2)
  WHERE pt.rightside = 2  
) subquery
WHERE rank = 1; 
```

请参阅[SQL Fiddle 演示](http://www.sqlfiddle.com/#!6/cf1dc/23)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:05:02.953

我在 MS SQL 中玩过它

```
with port as
(
select 1 as tid, 2 as leftside, 3 as rightside
UNION ALL
select 2, 3, 2
UNION ALL
select 3, 2, 4
UNION ALL
select 4, 4, 2
UNION ALL
select 5, 4, 3
UNION ALL
select 6, 3, 4
UNION ALL
select 7, 4, 5
UNION ALL
select 8, 5, 4
UNION ALL
select 9, 3, 6
UNION ALL
select 10, 6, 3
)
SELECT * 
FROM port pt JOIN port p 
  ON (pt.leftside = p.rightside 
     and p.leftside <> 2) 
WHERE pt.rightside = 2 
```

并得到了这些结果-

```
(pt.tid pt.leftside pt.rightside p.tid p.leftside p.rightside)
2   3   2   5   4   3
4   4   2   6   3   4
4   4   2   8   5   4
2   3   2   10  6   3 
```

`in (subquery)`通过在 WHERE 子句中添加一个...

```
SELECT *
FROM port pt JOIN port p 
  ON (pt.leftside = p.rightside 
    and p.leftside <> 2) 
WHERE (pt.rightside = 2)
   AND p.tid in (SELECT max(chk.tid) FROM port chk
                 GROUP BY Case when leftside>rightside
                             then rightside else leftside end,
                          Case when leftside<rightside
                             then rightside else leftside end
                ) 
```

它摆脱了 p.tid=5 的行，因为它不是匹配对的较高（最大值）值。

解释：这列出了所有 10 行，左侧和右侧按低/高顺序排列。

```
SELECT tid,
  Case when leftside>rightside then rightside else leftside end as lower,
  Case when leftside<rightside then rightside else leftside end as higher
FROM port 
```

因此，通过对 lower&higher 进行 GROUPing，并检索 max(tid)，我们得到匹配对的较高 tid。

# unity3d - 统一射击弹丸总是返回空异常

> ID：15431029
> 
> 赞同：1
> 
> 时间：2013-03-15T11:18:26.280
> 
> 标签：unity3d, nullreferenceexception, rigid-bodies, projectile

所以我目前正在使用 unity3D 开发我的游戏项目，我遇到了这个奇怪的错误。

我正在尝试实例化并向前发射弹丸。这是我的更新代码：

```
if (Input.GetButtonUp("Fire1")){
        Vector3 frontDir = transform.TransformDirection(Vector3.forward * arrowShotForce);

        if (chosenProj){
            Rigidbody shotProj = Instantiate(chosenProj, transform.position, transform.rotation) as Rigidbody;
            shotProj.AddForce(frontDir);
        }
    } 
```

当我尝试播放脚本时，shotProj.AddForce(frontDir) 出现错误，提示 **NullReferenceException** **: Object reference not set to an instance of an object**

我检查了“chosenProj”游戏对象并为其分配了弹丸模型，但仍然出现此错误。弹丸不会向前飞，我感到很愚蠢，因为我已经和unity一起工作了一个月了

知道为什么吗？

THX b4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T11:23:41.450

你的代码，你`NullReferenceException`在最后一行得到一个：

```
Rigidbody shotProj = Instantiate(
    chosenProj, transform.position, transform.rotation)
    as Rigidbody;
shotProj.AddForce(frontDir); 
```

在最后一行中，某些东西必须是`null`，否则您将不会得到异常。由于`frontDir`是`Vector3`值类型，唯一可以是的引用类型`null`是`shotProj`.

怎么可能`null`？好吧，当 的返回值`Instantiate()`不能转换为 a`Rigidbody`时，`as Rigidbody`表达式将返回`null`。

* * *

因此，我得出结论，您`chosenProj`的*不是*`RigidBody`. 它实际上是一个`GameObject`上面有一个刚体组件。要获得`RigidBody`，请使用以下命令：

```
GameObject shotProj = (GameObject)Instantiate(chosenProj, transform.position, transform.rotation);
shotProj.rigidbody.AddForce(frontDir); 
```

[`GameObject`类](http://docs.unity3d.com/Documentation/ScriptReference/GameObject.html)文档有更多关于如何从游戏对象中获取组件的信息。

# sql - SQL 查询 - 从特定行过滤值到结果中

> ID：15431033
> 
> 赞同：3
> 
> 时间：2013-03-15T11:18:36.200
> 
> 标签：sql, sql-server

我有一张桌子，用于存储乏燃料发票和汽车加油的公里数，结构如下：

![在此处输入图像描述](../Images/0e43b1bc553a3ca2718f67f666de898b.png)

我的目标是获得如下结果，这样我就可以计算出发票之间的公里数。

![在此处输入图像描述](../Images/ca55e7875534a0d95222599c2dac1b92.png)

关于如何构建查询以获得所需结果的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:28:18.830

```
;WITH Invoices AS 
(
    SELECT 456 AS Invoice, '2013-03-01' AS [Date], 145000 AS Kms
    UNION ALL
    SELECT 658 AS Invoice, '2013-03-04' AS [Date], 145618 AS Kms
    UNION ALL
    SELECT 756 AS Invoice, '2013-03-06' AS [Date], 146234 AS Kms
), OrderedInvoices AS
(
    SELECT Invoice, [Date], Kms, ROW_NUMBER() OVER(ORDER BY [Date]) AS RowNum
    FROM Invoices
)

SELECT i1.[Date], i2.Kms AS StartKms, i1.Kms AS FinishKms
FROM OrderedInvoices AS i1
LEFT JOIN OrderedInvoices AS i2
    ON i1.RowNum = i2.RowNum + 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T11:45:08.640

```
SELECT Date,
       (SELECT MAX(Kms) FROM invoices i2 WHERE i2.Kms < i1.Kms) AS StartKm,
        Kms AS FinishKm
FROM invoices i1
ORDER BY Kms 
```

请参阅：[SQL 小提琴演示](http://www.sqlfiddle.com/#!3/7f631/1)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T11:29:37.853

使用`CTE`和`Row_number()`：

```
;with cte as (
   select Invoice, [Date], kms, row_number() over(order by [date]) rn
   from yourTable
)

select c1.[Date], c2.kms StartKms, c1.kms EndKms
from cte c1 left join cte c2 on c1.rn  = c2.rn +1
order by c1.[Date] 
```

# ios - 附加到进程后 Xcode 控制台为空

> ID：15431036
> 
> 赞同：34
> 
> 时间：2013-03-15T11:18:49.670
> 
> 标签：ios, xcode

我在我的 iPhone 上构建了一个应用程序，退出它，再次启动它，然后我成功地附加到 Xcode 中的进程。现在我在日志导航器中有一个正在运行的调试，但我的控制台只是空的。我不应该在那里看到所有常用的控制台输出吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-10T05:18:48.953

您可以在设备日志中查看日志。打开 xcode 窗口--> 设备（选择设备）--> 设备日志。单击“向上”箭头按钮查看控制台。它显示开发/临时/应用商店应用程序中的每个日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T18:06:11.350

Xcode 中的控制台将只显示应用程序进程的输出，而不是在通用设备控制台中显示的输出流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T18:35:26.760

我最近也遇到了这个问题，当我强制退出 xcode 并尝试清理构建时发现它可以工作。它的adhock，但它的工作原理。玩得开心。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2014-04-29T17:40:27.520

检查您是否更改了 XCode 控制台的左下角参数

尝试选择默认值“所有输出”

![在此处输入图像描述](../Images/940bfc9c0dc8b5ab9bebbde79bb9d658.png)

# iphone - 拍照后如何重复使用相机？

> ID：15431042
> 
> 赞同：0
> 
> 时间：2013-03-15T11:18:59.363
> 
> 标签：iphone, ios, uiimagepickercontroller

我有一个简单的问题：拍照后如何再次使用（显示）相机？

我使用 UIImagePickeController 并在拍摄照片时（点击使用按钮）我们去委托：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

如何告诉相机再出现一个？

# python - 我可以为 requests.request 设置 max_retries 吗？

> ID：15431044
> 
> 赞同：262
> 
> 时间：2013-03-15T11:19:02.853
> 
> 标签：python, python-requests

Python requests 模块简单而优雅，但有一件事让我很烦恼。可以通过如下消息获取*requests.exception.ConnectionError*：

```
Max retries exceeded with url: ... 
```

这意味着请求可以尝试多次访问数据。但是文档中的任何地方都没有提到这种可能性。查看源代码，我没有找到可以更改默认值（大概为 0）的任何地方。

那么是否有可能以某种方式设置请求的最大重试次数？

* * *

## 回答 #1

> 赞同：351
> 
> 时间：2016-02-19T11:50:58.540

这不仅会改变*max_retries*还会启用退避策略，使对所有*http://*地址的请求在重试之前休眠一段时间（总共 5 次）：

```
import requests

from requests.adapters import HTTPAdapter, Retry

s = requests.Session()

retries = Retry(total=5,
                backoff_factor=0.1,
                status_forcelist=[ 500, 502, 503, 504 ])

s.mount('http://', HTTPAdapter(max_retries=retries))

s.get('http://httpstat.us/500') 
```

根据[文档`Retry`](http://urllib3.readthedocs.io/en/latest/reference/urllib3.util.html#module-urllib3.util.retry)：如果 backoff_factor 为*0.1*，则 sleep() 将在重试之间休眠 [0.05s, 0.1s, 0.2s, 0.4s, ...] 。*如果返回的状态码是500*、*502*、*503*或*504* ，它也会强制重试。

`Retry`允许更精细控制的各种其他选项：

*   *total* – 允许的重试总数。
*   *connect* – 重试多少个与连接相关的错误。
*   *read* – 重试读取错误的次数。
*   *redirect* – 要执行多少次重定向。
*   *method_whitelist* – 我们应该重试的一组大写 HTTP 方法动词。
*   *status_forcelist* – 我们应该强制重试的一组 HTTP 状态代码。
*   *backoff_factor* – 在尝试之间应用的退避因子。
*   *raise_on_redirect* – 如果重定向次数用尽，是否引发 a`MaxRetryError`或返回响应代码在*3xx*范围内的响应。
*   raise_on_status - 与 raise_on_redirect 类似的含义*：如果状态落在**status_forcelist*范围内并且重试已用尽，我们是否应该引发异常或返回响应。

~~**注意**：*raise_on_status*相对较新，还没有发布到 urllib3 或 requests 中。~~raise_on_status关键字参数似乎最多在 python 3.6 版中进入了标准库*。*

要在特定 HTTP 状态代码上重试请求，请使用*status_forcelist*。例如，*status_forcelist=[503]*将重试状态码*503*（服务不可用）。

默认情况下，重试仅在以下情况下触发：

*   无法从池中获得连接。
*   `TimeoutError`
*   `HTTPException`提出（来自Python 3 中的*http.client其他**httplib*）。这似乎是低级 HTTP 异常，例如 URL 或协议格式不正确。
*   `SocketError`
*   `ProtocolError`

请注意，这些都是阻止接收常规 HTTP 响应的所有异常。如果生成**任何**常规响应，则不进行重试。如果不使用*status_forcelist*，即使是状态为 500 的响应也不会被重试。

为了使其以更直观的方式与远程 API 或 Web 服务器一起工作，我将使用上面的代码片段，它强制重试状态*500*、*502*、*503*和*504*，所有这些在web 并且（可能）在足够大的退避期的情况下可恢复。

* * *

## 回答 #2

> 赞同：208
> 
> 时间：2013-03-15T11:33:22.577

重试是底层`urllib3`库。要设置不同的最大重试次数，请使用[替代传输适配器](https://requests.readthedocs.io/en/latest/user/advanced/#transport-adapters)：

```
from requests.adapters import HTTPAdapter

s = requests.Session()
s.mount('http://stackoverflow.com', HTTPAdapter(max_retries=5)) 
```

参数采用`max_retries`整数或[`Retry()`对象](http://urllib3.readthedocs.io/en/latest/reference/urllib3.util.html#urllib3.util.retry.Retry)；后者使您可以对重试哪些类型的故障进行细粒度控制（整数值转换为`Retry()`仅处理连接故障的实例；默认情况下不处理连接后的错误，因为这些可能会导致副作用） .

* * *

*旧答案，早于请求 1.2.1 的发布*：

该`requests`库并没有真正做到这一点，也没有打算这样做（参见[这个拉取请求](https://github.com/kennethreitz/requests/pull/1219)）。当前（请求 1.1），重试次数设置为 0。如果您真的想将其设置为更高的值，则必须全局设置：

```
import requests

requests.adapters.DEFAULT_RETRIES = 5 
```

这个常数没有记录；使用它需要您自担风险，因为未来的版本可能会改变处理方式。

**更新**：这*确实*改变了；在 1.2.1 版本中，添加了在[类上](https://requests.readthedocs.io/en/latest/api/#requests.adapters.HTTPAdapter)[设置`max_retries`参数](https://github.com/kennethreitz/requests/commit/36dcce1a06fe0a82d8522c7d4287fb3623722c6c)的选项，因此现在您必须使用替代传输适配器，见上文。猴子补丁方法不再有效，除非您也修补默认值（非常不推荐）。[`HTTPAdapter()`](https://requests.readthedocs.io/en/latest/api/#requests.adapters.HTTPAdapter)`HTTPAdapter.__init__()`

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2013-08-12T15:03:10.123

请注意，Martijn Pieters 的答案不适合 1.2.1+ 版本。如果不修补库，则无法全局设置它。

你可以这样做：

```
import requests
from requests.adapters import HTTPAdapter

s = requests.Session()
s.mount('http://www.github.com', HTTPAdapter(max_retries=5))
s.mount('https://www.github.com', HTTPAdapter(max_retries=5)) 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2017-11-06T21:52:16.843

在与这里的一些答案苦苦挣扎之后，我发现了一个名为[backoff](https://pypi.python.org/pypi/backoff)的库，它更适合我的情况。一个基本的例子：

```
import backoff

@backoff.on_exception(
    backoff.expo,
    requests.exceptions.RequestException,
    max_tries=5,
    giveup=lambda e: e.response is not None and e.response.status_code < 500
)
def publish(self, data):
    r = requests.post(url, timeout=10, json=data)
    r.raise_for_status() 
```

我仍然建议尝试一下库的本机功能，但如果您遇到任何问题或需要更广泛的控制，退避是一种选择。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-02-15T11:46:32.457

获得更高控制权的一种更简洁的方法可能是将重试内容打包到一个函数中，并使用装饰器使该函数可重试，并将异常列入白名单。

我在这里创建了相同的：http: [//www.praddy.in/retry-decorator-whitelisted-exceptions/](http://www.praddy.in/retry-decorator-whitelisted-exceptions/)

复制该链接中的代码：

```
def retry(exceptions, delay=0, times=2):
"""
A decorator for retrying a function call with a specified delay in case of a set of exceptions

Parameter List
-------------
:param exceptions:  A tuple of all exceptions that need to be caught for retry
                                    e.g. retry(exception_list = (Timeout, Readtimeout))
:param delay: Amount of delay (seconds) needed between successive retries.
:param times: no of times the function should be retried

"""
def outer_wrapper(function):
    @functools.wraps(function)
    def inner_wrapper(*args, **kwargs):
        final_excep = None  
        for counter in xrange(times):
            if counter > 0:
                time.sleep(delay)
            final_excep = None
            try:
                value = function(*args, **kwargs)
                return value
            except (exceptions) as e:
                final_excep = e
                pass #or log it

        if final_excep is not None:
            raise final_excep
    return inner_wrapper

return outer_wrapper

@retry(exceptions=(TimeoutError, ConnectTimeoutError), delay=0, times=3)
def call_api(): 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-12-13T14:43:49.657

您可以使用 requests 库一次性完成所有操作。如果您收到 429,500,502,503 或 504 状态码，以下代码将重试 3 次，每次都通过“backoff_factor”设置更长的延迟。有关不错的教程，请参阅[https://findwork.dev/blog/advanced-usage-python-requests-timeouts-retries-hooks/](https://findwork.dev/blog/advanced-usage-python-requests-timeouts-retries-hooks/)。

```
from requests.adapters import HTTPAdapter
from requests.packages.urllib3.util.retry import Retry

retry_strategy = Retry(
    total=3,
    backoff_factor=1,
    status_forcelist=[429, 500, 502, 503, 504],
    method_whitelist=["HEAD", "GET", "OPTIONS"]
)
adapter = HTTPAdapter(max_retries=retry_strategy)
http = requests.Session()
http.mount("https://", adapter)
http.mount("http://", adapter)

response = http.get("https://en.wikipedia.org/w/api.php") 
```

# html - HTML CSS UL 菜单样式

> ID：15431046
> 
> 赞同：2
> 
> 时间：2013-03-15T11:19:06.177
> 
> 标签：html, css, html-lists

关于如何在 HTML / CSS UL 菜单上实现一些样式的小问题。

我有一个标准的 UL 菜单，但是在如何获得某种样式的外观时遇到了一些问题。目前的 UL 菜单如下所示：

[http://jsfiddle.net/WMQqt/](http://jsfiddle.net/WMQqt/)

(HTML)

```
<ul id="nav">
    <li><a href="#">CONTACT US</a>
    </li>
    <li><a href="#">HOME</a>
    </li>
</ul> 
```

(CSS)

```
#nav {
    list-style: none;
    margin-bottom: 10px;
    */ margin-top: -6px;
    position: relative;
    right: 286px;
    z-index: 9;
    height: 26px;
    padding: 4px 4px 4px 4px;
    font-weight: bold;
}
    #nav li {
    float: right;
    margin-right: 10px;
}

#nav a {
    display: block;
    padding: 5px;
    color: #444444;
    background: #fff;
    text-decoration: none;
    border: 1px solid grey;
}

#nav a:hover {
    color: #fff;
    background: #04B431;
} 
```

我希望菜单按钮有一个 1px 的小边框，但是在背景颜色开始之前会有一些大约 3px 的空白填充。

类似于它的外观：

[http://jsfiddle.net/6PY7z/](http://jsfiddle.net/6PY7z/)

这可以使用 UL 菜单方法完成吗？

感谢您的任何建议，我不是 HTML / CSS 专家。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T11:21:20.213

添加`margin`到`a`标签并将边框移动到`li`

```
#nav li
{
    float: right;
    margin-right: 10px;

    border: 1px solid grey;
}

    #nav a
    {
        display: block;
        padding: 5px;
        color: #444444;
        background: #ccc;
        text-decoration: none;
        margin:3px;    
    } 
```

**[演示](http://jsfiddle.net/WMQqt/3/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T11:27:41.287

您可以使用以下样式来实现您想要的：

```
#nav li
{
    float: right;
    margin-right: 10px;
border: 1px solid grey; /*put original border here*/
}

#nav a
{
    display: block;
    padding: 5px;
    color: #444444;
    background: #d8d8d8; /*new background-color*/
    text-decoration: none;  
    border: 3px solid white; /*add white padding here*/
} 
```

[http://jsfiddle.net/WMQqt/4/](http://jsfiddle.net/WMQqt/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-01T22:31:45.510

行

在 html 中去

```
<dl><div><dt>F</dt><dd>T</dd></div>
     <div><dt>F</dt><dd>T</dd></div>
     <div><dt>F</dt><dd>T</dd></div>
     <div><dt>F</dt><dd>T</dd></div>
</dl> 
```

在 CSS 中

```
dl { display: flex;
flex-direction: column;} 
```

一些提示...

dt 向左浮动和 dd 向右浮动

# php - PHP连接错误

> ID：15431056
> 
> 赞同：-5
> 
> 时间：2013-03-15T11:19:30.813
> 
> 标签：php, mysql

我是 PHP 新手，我正在尝试通过我的 Bluehost 帐户通过 phpmyadmin 实现与 mysql 数据库的网络通信。现在我编写了以下 php 脚本来检查我是否可以连接但我无法连接：

```
 <?php  
          $mysql_host='localhost';
          $mysql_user='xxx';
          $mysql_pass ='xxx';

          mysql_connect ('localhost', '$mysql_user', '$mysql_pass')
          or die ('I cannot connect to the database.');
           //echo 'hello';

          ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:20:38.237

尝试这个：

```
mysql_connect ('localhost', $mysql_user, $mysql_pass) 
```

代替：

```
mysql_connect ('localhost', '$mysql_user', '$mysql_pass') 
```

您在这里不需要单引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:38:11.457

引号使您的变量变为字符串！并且永远不要发布您的通行证和用户...甚至是本地使用

```
mysql_connect ( $mysql_host, $mysql_user, $mysql_pass); 
```

不要使用`die()`，使用错误日志。

最好是一个 pdo 连接，它给你更多的舒适和安全。

make shure pdo 在 mysql 配置中启用，大多数情况下默认启用。

您可以设置一个 pdo 连接，例如

```
$dsn = 'mysql:dbname=<databasename>;host=<hostname>';
  $user = '<user>';
  $password = '<passwd>';

try {                                                                         
    $dbh = new PDO($dsn, $user, $password);
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
} catch (PDOException $e) {
    $_SESSION['error'] .= 'Verbindung fehlgeschlagen: ' . $e->getMessage();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T11:50:42.237

您必须在以下变量中删除引号`mysql_connect`：

```
mysql_connect ('localhost', $mysql_user, $mysql_pass) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T11:21:16.203

不计算单引号之间的变量

```
 mysql_connect ('localhost', '$mysql_user', '$mysql_pass') 
```

尝试这个：

```
 mysql_connect ('localhost', $mysql_user, $mysql_pass) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T12:38:35.510

你应该了解php中的diff bet单引号和双引号。单引号按原样输出字符串。和双引号在输出前解析字符串。

# xpath - 当您知道使用路径的属性时节点的名称？

> ID：15431057
> 
> 赞同：0
> 
> 时间：2013-03-15T11:19:38.937
> 
> 标签：xpath

我有一些 XML，我知道一个属性（在我的例子中是一个 ID#）。我可以使用 //*[@id='v6969482'] 获取我正在寻找的节点。但是没有办法告诉我这个id的名字吗？（我试图让它返回'title'或者，在我的情况下。我知道它与使用name（）有关，但是当我有id时，我似乎无法获得返回名称的正确语法属性。

```
<?xml version="1.0" encoding="UTF-8"?>

<topic id="v6969481">
  <title id="v6969482">CR - ASE | AXX2500>Engines>EIOA>EIOAn>GMACn>Ingress</title>
  <body id="v6969483">
    <p id="v6969484">
      <table id="v6153057" frame="all" colsep="1" rowsep="1">
        <desc id="v6049915">Global ingress attributes for EIOA engine GMAC ports.</desc> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:27:39.580

您需要属性的父节点的名称，它的父元素：

```
name(//*[@id='v6969482']) 
```

# unity-container - 使用统一属性注入注入一个简单的字符串

> ID：15431059
> 
> 赞同：0
> 
> 时间：2013-03-15T11:19:41.043
> 
> 标签：unity-container

我想使用 Unity 将字符串值注入到属性中。我找不到有效的语法。在这种情况下，PutBunniesHere

在这种情况下，错误是它没有将“类型”识别为值的有效属性。我补充说，因为它以前无法解析类型。

该类具有以下属性：

```
 [Dependency("PutBunniesHere")]
    public string PutBunniesHere { get; set; } 
```

这是我用于统一的配置。

```
<?xml version="1.0" encoding="utf-8" ?>
  <unity2 xmlns="http://schemas.microsoft.com/practices/2010/unity">
  <alias alias="IInjectMe1" type="CommonLib.IInjectMe1, CommonLib"/>
  <alias alias="singleton" type="Microsoft.Practices.Unity.ContainerControlledLifetimeManager, Microsoft.Practices.Unity" />
  <container name="unity2">
    <register type="CommonLib.IInjectMe2, CommonLib" name="Injected2" mapTo="CommonLib.InjectMe2, CommonLib">
      <lifetime type="singleton"/>
      <constructor>
        <param name="theDependency" dependencyType="IInjectMe1" />
      </constructor>
      <property name="PutBunniesHere">
        <value value="my bunnies" type="System.String"/>
      </property>
    </register>
  </container>
</unity2> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:56:13.910

好的，解决了问题。再一次，在 register 元素上有一个名字是个问题。这使得 value 元素上的 value 具有不同的含义。value 表示已注册类型的名称，或者如果父 register 元素上有 name 属性，则表示类型。取出名称和值意味着一个值（也可能是一个类型）

玉。

# ruby-on-rails - 连接中所有记录的条件为真

> ID：15431060
> 
> 赞同：1
> 
> 时间：2013-03-15T11:19:43.610
> 
> 标签：ruby-on-rails, activerecord, arel

我正在尝试从 A 返回记录，其中来自 B 的所有匹配记录都满足条件。目前，我的查询返回来自 A 的记录，其中有来自 B 的任何记录满足条件。让我把它放到一个真实世界的场景中。

```
Post.joins(:categories)
    .where(:categories => { :type => "foo" }) 
```

这将返回`Post`具有“foo”类型类别的 s，我想要的是`Post`s，其类别都是“foo”类型！

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:09:31.753

使用您在 IRC 上 #rubyonrails 中发布的 db/schema.rb，例如：

```
Incident.select("incidents.id").
joins("INNER JOIN category_incidents ON category_incidents.incident_id = incidents.id").
joins("INNER JOIN category_marks ON category_marks.category_id = category_incidents.category_id").
where(:category_marks => { :user_group_id => current_user.user_group_id }).
group("incidents.id").
having("SUM(CASE WHEN category_marks.inc = 1 THEN 1 ELSE 0 END) = count(category_indicents.incident_id)") 
```

会成功的。

它连接 current_user 的 category_marks 并检查 .inc = 1 的记录计数是否等于所有连接记录的计数。

请注意，这只获取 event.id

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:10:34.370

我会在此查询的末尾添加一个选择，以检查所有类别是否都具有 foo 类型。我还将通过向 Category 模型添加一个实例方法来简化该检查。

```
Post.joins(:categories).select{|p| p.categories.all?(&:type_foo?)} 
```

类别模型

```
 def type_foo?
   type == "foo"
 end 
```

添加：这有点“hacky”，但您可以通过这种方式将其设为范围。

```
class Post < ActiveRecord::Base
  scope :category_type_foo, lambda{ 
    post_ids = Post.all.collect{|p| p.id if p.categories.all?(&:type_foo?).compact
    Post.where(id: post_ids) }
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:30:26.033

您是否尝试过反方向的查询？IE

```
Categories.where(type: 'foo').joins(:posts) 
```

不过我可能误解了你的问题。

另一种选择是

```
Post.joins(:classifications).where(type: 'foo') 
```

# mysql - INSERT 更改 auto_increment，但 UPDATE 不更改 auto_increment？

> ID：15431072
> 
> 赞同：0
> 
> 时间：2013-03-15T11:20:52.990
> 
> 标签：mysql, sql

我们有一张桌子：

```
id int(11) auto_increment
name varchar(255) 
```

auto_increment 等于 1。插入行：

```
INSERT INTO `projects` ( `id` , `name`) VALUES ('350',  'project one'); 
```

现在`auto_increment`等于 351。更新行：

```
UPDATE `projects` SET `id` = '351' WHERE `id` = 350 LIMIT 1 ; 
```

`auto_increment`仍然等于 351。如果尝试插入一行，我们会得到错误：

```
#1062 - Duplicate entry '351' for key 1 
```

我们如何看到`INSERT`变化 auto_increment 而`UPDATE`不是 changes `auto_increment`。

我的目标是更新 row 并设置`id`更大 then `auto_increment`。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:31:18.873

首先，您为什么要设置自动增量值？让它完成它的工作（提示 - 它是自动的）。

所以最好的解决方案是当您插入一行时，让自动增量为您选择适当的值，并让该值成为该行生命周期的不变量。

否则，只需`auto_increment`从表定义中删除该位并自己实现适当的系统。

# jquery - jQuery：单击按钮时显示/隐藏下拉菜单

> ID：15431073
> 
> 赞同：0
> 
> 时间：2013-03-15T11:20:54.670
> 
> 标签：jquery, html, drop-down-menu

当我点击一个按钮时，我想打开一个下拉菜单。

我尝试了很多代码，但最接近的是以下代码：

```
<input id="hide" value="+" type="button" />

$(document).ready(function () { 

    $('#hide').click(
        function () {
            //show its submenu
            $('rightMenu', this).stop().slideDown(500);

        }, 
        function () {
            //hide its submenu
            $('rightMenu', this).stop().slideUp(500);          
        }
    ); 
```

我要显示/隐藏的菜单位于`<div id="rightMenu">`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:27:11.747

`$('rightMenu', this)`是相同的`$(this).find("rightMenu")`

因此，这将搜索带有标签的元素，该标签`rightMenu`嵌套在您的`hide`输入元素中。

这显然是不对的，因为您的元素中没有嵌套任何元素`input`，并且几乎可以肯定不会有任何`rightMenu`元素，因为这是无效类型。

> 菜单在 div rightMenu 中。

查看您对此答案的评论，您的选择器实际上应该是：

```
$("#rightMenu") 
```

此外`click()`不能接受 2 个参数。而是将其更改为 1 功能并用于`slideToggle()`在 Up 和 Down 之间交替。

因此，您的代码应该是：

```
$(document).ready(function () { 

$('#hide').click(
    function () {
        //show its submenu
        $("#rightMenu").stop().slideToggle(500);    
    }
);

}); 
```

***现场演示：http:** [//jsfiddle.net/7aCFk/](http://jsfiddle.net/7aCFk/)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:26:07.587

你能用slideToggle试试吗

```
 $('#hide').click(
    function () {
    //show its submenu
    $('.rightMenu').slideToggle(500);

}
); 
```

# javascript - 如何在开发或金丝雀频道上启用“chrome.downloads”api？

> ID：15431075
> 
> 赞同：0
> 
> 时间：2013-03-15T11:20:59.743
> 
> 标签：javascript, api, google-chrome, google-chrome-extension

我希望对`chrome.downloads`api 做一些实验。我下载了 Chrome 的 dev 和 canary 版本，并创建了一个具有`downloads`权限的新扩展，以及`<all_urls>`.

当我加载扩展程序时，“权限”链接显示我有权“下载文件”，因此权限已成功加载。

当我在调试器中检查“chrome”对象时，`chrome.downloads`设置为`undefined`. 如果我去使用该对象，它会导致扩展卸载。它还会导致屏幕角落出现一个空通知，但由于它没有任何内容，我无法判断这是否是一条消息，通知我我没有做我需要做的事情。

此外，我下载了示例扩展程序[Downloads Overwrite Existing Files](https://developer.chrome.com/dev/extensions/samples.html#f48c39bd36dd5dce891f05be06f6dc13)，它也无法在 dev 或 canary 上运行。

有谁知道如何让这个工作？据我所知，我已经完成了所需的一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T03:50:59.780

您可能会看到两个不相关的错误在起作用。空通知是[https://code.google.com/p/chromium/issues/detail?id=181191](https://code.google.com/p/chromium/issues/detail?id=181191)，这会阻止您看到内容：“下载覆盖现有文件已崩溃。单击此气球以重新加载扩展程序。” 这个错误是最近才出现的，我们现在正在研究它。

正如您可能已经猜到的那样，另一个错误是崩溃。我刚刚在这里提交：[https](https://code.google.com/p/chromium/issues/detail?id=197926) ://code.google.com/p/chromium/issues/detail?id=197926 。

抱歉，添麻烦了。这是在一些更“令人兴奋”的频道上运行的乐趣的一部分。这是对您的问题的一个非常蹩脚的答案，因为它不会让您畅通无阻，但它是对正在发生的事情的正确解释。

# r - R：ggplot2：获取有关 geom_bar() 或 stat_bin() 生成的 bin 中数据的统计信息的最快方法

> ID：15431080
> 
> 赞同：1
> 
> 时间：2013-03-15T11:21:09.493
> 
> 标签：r, ggplot2

例如，假设我有以下情节：

```
library(ggplot2)
df = diamonds
dfs = df[sample(nrow(df), 100, replace = FALSE),]
ggplot(dfs, aes(x = carat)) +
    geom_bar(breaks = seq(0,2, by = 0.5), colour = 'white') 
```

获得每个箱子的最常见`cut`、平均`depth`或中位数`price`（等）的最快/最优雅的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:12:16.240

```
df <- diamonds
set.seed(42)
dfs <- df[sample(nrow(df), 100, replace = FALSE),]

library(data.table)

DT <- as.data.table(dfs)
DT[,bins:=findInterval(carat,seq(0,2, by = 0.5))]
setkey(DT,bins)

#most common cut
DT[,names(which.max(table(cut))),by=bins]

#   bins      V1
#1:    1   Ideal
#2:    2 Premium
#3:    3   Ideal
#4:    4 Premium
#5:    5   Ideal

#note that there is a carat==2.01, which you did not plot 
```

# android - 如何在android中创建覆盖布局

> ID：15431089
> 
> 赞同：0
> 
> 时间：2013-03-15T11:21:26.850
> 
> 标签：android

我怎样才能创建像我在背景中作为正常任何布局附加的布局。当我单击任何布局或返回该布局时，从该布局中，覆盖布局应该带有任何表单字段按钮或文本......任何

提前致谢。

![在此处输入图像描述](../Images/1276f0edd58a5691aa816247c1d29109.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T11:23:59.090

使用RelativeLayout 或FrameLayout。最后一个子视图将覆盖其他所有内容。

为确保覆盖视图位于顶部，您可以调用`ViewGroup.bringChildViewToFront()`相对布局。

例子：

```
<FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/root_view">

    <EditText
        android:layout_width="fill_parent"
        android:id="@+id/editText1"
        android:layout_height="fill_parent">
    </EditText>

    <EditText
        android:layout_width="fill_parent"
        android:id="@+id/editText2"
        android:layout_height="fill_parent">
        <requestFocus></requestFocus>
    </EditText>

</FrameLayout> 
```

在此布局中，editText2 将覆盖 editText1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:23:38.477

我相信你应该使用`FrameLayout`，你可以在另一个前面添加对象。请在文档中阅读有关它的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-07T23:43:43.740

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/root_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

        <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >
        <!-- other actual layout stuff here  -->

       </LinearLayout>

    <LinearLayout
    android:id="@+id/overlay"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right" >
    </LinearLayout>

    </FrameLayout> 
```

现在，您在 LinearLayout 下添加的任何视图都`android:id = "@+id/overlay"` 将显示为具有重力 = 右的叠加层

希望这会帮助你

# c# - 对象属性的文化格式

> ID：15431090
> 
> 赞同：1
> 
> 时间：2013-03-15T11:21:26.950
> 
> 标签：c#, asp.net, culture, object-properties

我有一个带有数字属性（双精度）的对象，并且没有特定的文化集。当用户登录网站时，此属性来自数据库。数据库中的文化格式为 en-GB。

当属性被调用并返回到网站上的标签时，数字会以其当地文化格式显示。

我的问题是，**对象属性是否保留 en-GB 文化格式并且浏览器仅以本地文化格式显示它**，或者，**对象实际上是否将该属性存储在用户本地文化格式中？**

我在处理不同文化（多语言网站）的数字格式时遇到了很多麻烦，我想知道我应该如何处理这些属性，因为我必须根据这些数字和用户输入的其他数字进行计算该网站以本地格式显示给用户，但始终以本地格式 (en-GB) 将数据提交回我们的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:33:12.530

酒店不储存文化。格式基于`Thread.CurrentUICulture`，这是服务器端的文化。

假设您正在开发一个 ASP.NET 网站：

```
CultureInfo culture = new CultureInfo(Request.UserLanguages[0]);
return double.Parse("1.5", culture.NumberFormat); 
```

这将使用客户端提供的文化设置转换双精度。

欲了解更多信息：[http ://www.hanselman.com/blog/GlobalizationInternationalizationAndLocalizationInASPNETMVC3JavaScriptAndJQueryPart1.aspx](http://www.hanselman.com/blog/GlobalizationInternationalizationAndLocalizationInASPNETMVC3JavaScriptAndJQueryPart1.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:38:40.100

数值本身只是一个数字。数字的格式取决于您如何向用户呈现该数字的文本表示。

从用户输入中解析数字值将再次取决于您允许用户输入值的方式。只要您知道输入字符串的文化，就可以将其解析回一个与文化无关的实际数字。

# sql - 如何隔离不同客户的 SQL 数据？

> ID：15431094
> 
> 赞同：2
> 
> 时间：2013-03-15T11:21:33.890
> 
> 标签：sql, sql-server, wcf, azure, multi-tenant

我目前正在使用 WCF 为应用程序开发服务。我想在 windows-azure 上托管这些数据，它应该托管来自不同用户的数据。我正在寻找我的数据库的正确设计。在我看来，只有两种不同的可能性：

*   为每个客户创建一个新数据库
*   将客户 ID 存储到每个表（或当每个表通过实体连接时的主表）

第一种方法具有非常好的速度和隔离性，但它在 Windows azure 上非常广泛（或者我是否理解一些[azure 定价](http://www.windowsazure.com/en-us/pricing/calculator/?scenario=data-management)错误？）。此外，我不知道如何以这种方式配置 WCF 服务，因为它总是使用另一个数据库。

第二种方法速度慢，隔离性差。但它易于实施且成本更低。

现在我的问题是：有没有其他方法可以使用 azure 实现数据的高度隔离以及轻松集成到 WCF 服务中？我应该使用什么设计，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:06:41.497

您有两个额外的选择：在数据库中构建多个模式容器（请参阅我关于此技术的[博客文章），或者甚至更好地使用 SQL 数据库联合（您可以使用我的名为](http://geekswithblogs.net/hroggero/archive/2011/10/05/solving-schema-separation-challenges.aspx)[Enzo SQL Shard](http://enzosqlshard.codeplex.com/)的开源项目来访问联合）。我提供的链接也使您可以访问其他选项。

最后，这是一个相当复杂的决策，涉及性能、安全性和可管理性的权衡。我通常推荐联邦，即使它有[自己的一组限制](http://msdn.microsoft.com/en-us/library/windowsazure/hh597469.aspx)，因为它是云的灵活多租户选项，具有自动过滤数据的选项。查看开源项目 - 您将了解如何实现独立于物理存储的客户数据的良好分离。

# c# - 列表框 WPF 项目背景颜色

> ID：15431097
> 
> 赞同：5
> 
> 时间：2013-03-15T11:21:39.103
> 
> 标签：c#, wpf, xaml

我想更改 ListBoxItem 的背景颜色

搜索后我决定使用这个

```
<ListBox>
        <ListBox.Resources>
            <!-- Background of selected item when focussed -->
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"
                             Color="Blue" />
            <!-- Background of selected item when not focussed -->
            <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}"
                             Color="Blue" />

        </ListBox.Resources>
        <TextBlock>fdfsdf1</TextBlock>
        <TextBlock>fdfsdf3</TextBlock>
        <TextBlock>fdfsdf5</TextBlock>
        <TextBlock>fdfsdf3</TextBlock>
        <TextBlock>fdfsdf4</TextBlock>
    </ListBox> 
```

当listBoxItem集中时，背景是蓝色的，但是当所选的ListBoxItem失去焦点时，背景会变为灰色。失去焦点时如何使背景保持蓝色？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-15T11:30:38.103

如果您的意思是当它被选中但处于非活动状态时尝试`InactiveSelectionHighlightBrushKey`

```
 <ListBox.Resources>
        <!-- Background of selected item when focussed -->
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}"
                         Color="Blue" />
        <!-- Background of selected item when not focussed -->
        <SolidColorBrush x:Key="{x:Static SystemColors.InactiveSelectionHighlightBrushKey}"
                         Color="Blue" />

    </ListBox.Resources> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T11:33:04.233

试试这个

```
<ListBox>
        <ListBox.Resources>
            <Style TargetType="ListBoxItem">
                <Setter Property="Background" Value="Blue" />
            </Style>
        </ListBox.Resources>
        <TextBlock>fdfsdf1</TextBlock>
        <TextBlock>fdfsdf3</TextBlock>
        <TextBlock>fdfsdf5</TextBlock>
        <TextBlock>fdfsdf3</TextBlock>
        <TextBlock>fdfsdf4</TextBlock>
    </ListBox> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T11:38:38.887

如果您认为系统颜色键不适合您，那么您可以通过为 ListboxItems 创建新样式来强制它，如下所示。

```
 <Style TargetType="{x:Type ListBoxItem}">
            <Setter Property="Background" Value="Silver"/>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="Red"/>
                </Trigger>
            </Style.Triggers>
        </Style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-27T12:57:42.490

这是我用来为 ListBox 的活动/非活动项选择颜色的方法：

```
<ListBox Name="lbExample" SelectionMode="Multiple">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <...>
        </DataTemplate>
    </ListBox.ItemTemplate>
    <ListBox.Resources>
            <!-- Background of selected item when not focussed -->
            <Style TargetType="{x:Type ListBoxItem}">
                <Setter Property="Background" Value="AntiqueWhite" />
            </Style>

            <!-- Background of selected item when focussed -->
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="LightGreen" />
    </ListBox.Resources>
</ListBox> 
```

# matlab - 重叠特征值和高效的特征计算

> ID：15431103
> 
> 赞同：0
> 
> 时间：2013-03-15T11:22:00.057
> 
> 标签：matlab

如果我有一个矩阵

```
F=[ 24 3  17 1;
    28 31 19 1;
    24 13 25 2;
    47 43 39 1;
    56 41 39 2]; 
```

在前三列中，我有特征值，第四列用于类标签。我的问题是当特定值的类标签不同时摆脱相同的特征值。

就像 F 矩阵一样，我必须删除第 1、3、4 和 5 行，因为对于第一列，第四列有 2 个不同的值，第三列（39 和 39）也是如此，因为类标签再次被更改。所以输出应该看起来像

```
 F=[28 31 19 1]; 
```

另一个问题是每个特征计算的效率每个特征的效率被定义为该特征可分离的所有剩余点的分数。我该怎么做。请帮助我???等待及时回复

# github - Github 的 JIRA 票证整合：添加评论

> ID：15431106
> 
> 赞同：1
> 
> 时间：2013-03-15T11:22:08.550
> 
> 标签：github, jira

我已经设置了 github 提供的 JIRA 插件，它运行良好，提交消息如下：

```
I made the thing work! [#PROJ-57 transition:21] 
```

它会进行这种过渡（在我的情况下，这是一个“关闭问题”的过渡），但我真的很希望它也可以在票证上发布一个赞扬，比如“通过 github 关闭：我让这件事成功了！”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:50:52.480

Not sure which plugin did you use, but using [JIRA DVCS Connector for Bitbucket and GitHub](https://marketplace.atlassian.com/plugins/com.atlassian.jira.plugins.jira-bitbucket-connector-plugin#versions) you can use the following:

```
PROJ-57 #comment Closed by via github: I made the thing work! #close-issue 
```

check [Processing JIRA issues with commit messages](https://confluence.atlassian.com/display/BITBUCKET/Processing+JIRA+issues+with+commit+messages) for more info.

# html - CSS：横幅和菜单位置

> ID：15431110
> 
> 赞同：0
> 
> 时间：2013-03-15T11:22:17.747
> 
> 标签：html, css

情况的简短草图：我正在制作一个网站（显然:)）所以我有我的标题，然后是我的横幅，在横幅下方我有我的菜单栏。但是，横幅与我的标题重叠了一点（这就是意图；））现在我想直接在横幅下方添加菜单栏。

这是我的 CSS 代码：

```
.header_container{
background-color: #e5e5e5;
height: 200px;
overflow: hidden;
}

.banner {
position: relative;
top: -90px;
background: url(../images/banner.png) no-repeat top center;
height: 210px;
}

.menu {
background: url(../images/menubalk.png) no-repeat top center;

} 
```

如果横幅没有重叠，则菜单栏位于我应该在的位置。

我刚刚想出了一些小问题，这可能会解决我的整个问题。如果我要让我的标题成为一个盒子，然后我的主要内容是一个盒子（它包含横幅、内容和页脚）并制作所有不同的东西，比如那个盒子里的横幅子项？当我使用继承或其他功能时，这不会解决我的整个问题吗？

先感谢您！亲切的问候，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:28:16.203

在您的情况下，一种解决方案是将您的菜单绝对定位在`bottom:-120px`. 它不是最优雅的，但它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:35:56.510

您还应该为菜单分配一个相对位置。与横幅具有相同的最高价值

```
 .menu {
    ....
    ....
    position: relative;
    top:-90px;
  } 
```

您看到的空间是因为在正常文档流中，菜单位于横幅所在位置的正下方。（从**实际位置**向上移动 90 像素）

小提琴[在这里](http://jsfiddle.net/Fico/xHJML/)

我使用背景颜色代替了您的图像您可以将菜单放在横幅的底部或您需要的任何地方。然后记住菜单后面的元素会在他的真实位置看到菜单。在这种情况下，低于 90 像素。许多解决方案都可以解决所有这些问题，因此不会影响其余的页面元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T11:48:28.010

有人建议这样做的一种方法是使用菜单元素的相对定位。

例如：

```
<div class="header_container">
    Le Header Container
</div>
<div class="banner">
    Le Banner
</div>
<div class="menu">
    Le Menu
</div> 
```

CSS看起来像：

```
.header_container{
background-color: #e5e5e5;
height: 200px;
overflow: hidden;
}

.banner {
background-color: yellow;
position: relative;
top: -90px;
height: 210px;
}

.menu {
background-color: red;
position: relative;
top: -90px;
height: 50px;
} 
```

首先，这是一个小提琴：http: [//jsfiddle.net/audetwebdesign/9gvTG/](http://jsfiddle.net/audetwebdesign/9gvTG/)

**替代方法**
您可以通过使用负边距来实现类似的效果：

```
.header_container{
background-color: #e5e5e5;
height: 200px;
overflow: hidden;
margin-bottom: -90px; // only need to adjust this property
}

.banner {
background-color: yellow;
position: relative;
height: 210px;
}

.menu {
background-color: red;
position: relative;
height: 50px;
} 
```

这种方式的好处是，如果改变了header，后续元素的定位不需要调整，需要通过banner元素修改重叠度。

了解这两种方法是件好事。

# c# - 列表中的 foreach [C#]

> ID：15431111
> 
> 赞同：6
> 
> 时间：2013-03-15T11:22:20.250
> 
> 标签：c#, casting, foreach, polymorphism

```
MonoBehavior[] list; // This is from Unity3d but think of it as Object, 
                     // all classes inherit from it. 
```

清单里有很多东西，有些是 Alpha，来自 Alpha 类，还有一些来自其他类。

```
foreach(Alpha a in list) // Alpha is a script. 
  a.doSomething(); 
```

我假设我的 foreach 会以这种方式工作：在列表中找到的 Foreach Alpha 脚本做某事，忽略所有其他组件。

我认为这是一个选角问题。请帮助我更好地理解铸造/多态性。

我在执行期间收到此错误： **无法从源类型转换为目标类型**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-15T11:34:00.740

您正在以错误的方式进行多态性：虽然 Alpha 是派生类型，但并非 MonoBehavior 类型列表中的所有其他对象都是。因此，有些人会失败 foreach 正在执行的隐式类型转换。如果您的环境中可用，您可以使用“OfType()”扩展：

```
foreach(Alpha a in list.OfType<Alpha>()) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-15T11:33:03.713

您可以尝试以下方法：

```
foreach(Alpha a in list.Where(x => x is Alpha)) // Alpha is a script. 
  a.doSomething(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T11:32:52.330

使用[OfType](http://msdn.microsoft.com/en-us/library/bb360913.aspx)仅迭代指定类型的元素

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T11:33:48.210

如果您希望循环仅对`Alpha`类型进行操作，则需要重写如下：

```
foreach (var item in list)
{
  if (item is Alpha)
  {
    ((Alpha) item).doSomething();
  }
} 
```

编辑：Maarten 的回答使用更简洁的 LINQ，所以我推荐那个。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-16T04:51:57.480

我就是这样做的，我确信它会在 Unity3d 中编译。顺便说一句，OfType 不在 Unity 中，TypeOf 是，但正如*taras.roshko*所说，使用`is`更好。

```
MonoBehavior[] list;

foreach(MonoBehavior current in list) // Search the whole list for MonoBehaviors.
    if (current  is Alpha)            // Check if current is an Alpha type.
        current.doSomething();        // current is a valid Alpha type script. 
```

将`foreach`尝试转换列表中的所有元素，并且由于 Alpha 是 MonoBehavior 但 MonoBehavior 不是 Alpha，因此您无法正确运行它。因此，您检查 current 是否为 Alpha，然后检查是否可以随意使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T11:24:18.827

您的`foreach`语句将尝试将其中的每个对象转换为`Alpha`. 如果他们有一个共同的超类，您可以使用它，否则使用`Object`该类。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-15T11:36:57.527

如果您的列表包含基本类型列表并且您只是获取每个元素并尝试认为它是 Alpha 类型而不是非法尝试下面

```
foreach(Unity3d a in list) // Alpha is a script. 
     a.doSomething(); 
```

假设在 Unity3d 中定义了 doSomething()

# c# - 重新加载表单而不丢失变量值

> ID：15431116
> 
> 赞同：0
> 
> 时间：2013-03-15T11:22:29.830
> 
> 标签：c#, .net, winforms

当我单击一个按钮时，我的表单需要重新加载，而不会丢失一些变量。

例如：

一场比赛需要重置，但高分变量需要保留以与下一场比赛一起计数。 `"Application.Reset();"`确实重置了`form1`，但也重置了所有变量。有没有不使用数据库的出路，因为我们还没有学会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:27:33.573

**它可以通过**

> 1.保存数据库中的数据
> 
> 2.XML文件（读写）
> 
> 3.设置类的属性
> 
> 4.使用静态变量**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:27:09.527

您需要创建一个类并在其中包含属性和方法并将其传递给表单。退出表单后，使用表单上更改的值更新您的 Class 值。

之后，您将需要弄清楚将类“存储”在某种 Stream 中，并能够从该流中重新加载您的类。（XML、Binary、Protobuf、JSON）有很多方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:28:06.497

您可以使用设置：

[http://msdn.microsoft.com/en-us/library/bb397750.aspx](http://msdn.microsoft.com/en-us/library/bb397750.aspx)

并在重置/关闭时保存您的数据

# java - Struts 2 验证方法在没有 XML 的情况下无法工作

> ID：15431117
> 
> 赞同：2
> 
> 时间：2013-03-15T11:22:31.100
> 
> 标签：java, jsp, validation, struts2, ognl

我正在使用 Struts 2 开发 Web 应用程序。我有行动类实施`ActionSupport`。我的问题是当我输入一些文本错误消息时没有被清除，表单也没有被提交。

这是我所拥有的：

**`CustomerAction.java`：**

```
public class CustomerAction extends ActionSupport
    {
    private Customer customer = new Customer();

    private String customerName;

    private String emailID;

    public String getCustomerName() {
            return customerName;
        }

        public void setCustomerName(String customerName) {
            this.customerName = customerName;
        }
    public Customer getCustomer() {
            return customer;
        }

        /**
         * @param customer
         */
        public void setCustomer(Customer customer) {
            this.customer = customer;
        }

    public String getEmailID() {
            return emailID;
        }

        public void setEmailID(String emailID) {
            this.emailID = emailID;
        }

    public void validate()
        {

            if (customerName == null)
            {

                addFieldError("customer.customerName","Required");

            }

            if (emailID == null || emailID.trim().equals(""))
            {
                addFieldError("customer.emailID","Email is Required");
                }

        } 
```

**`Struts.xml`：**

```
 <action name="addCustomer" class="com.yell.hibu.action.CustomerAction" method="execute">
    <interceptor-ref name="params">

    <param name="excludeParams">dojo\..*,^struts\..*</param>

    </interceptor-ref>

    <interceptor-ref name="validation">

    <param name="excludeMethods">input,back,cancel,browse</param></interceptor-ref>

    <interceptor-ref name="workflow">

    <param name="excludeMethods">input,back,cancel,browse</param>

   </interceptor-ref>
  <result name="input">/registration.jsp</result>
 <result name="success">/success.jsp</result>
</action>
</package>
</struts> 
```

**`regisration.jsp`：**

```
 <%@ taglib prefix="s" uri="/struts-tags"%>

    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>

 <title>Customer Registration Form</title>
  <s:head/>
 </head>
<body>
    <br>
    <br>
    <center>
<table width="450" align="center">
            <tr>
<td align="center" height="40"><font
style="color: #003300; font-family: fantasy !important;"><strong
                        style="color: #003300 !important;">Registration Form</strong></font></td></tr>

<tr>
<td width="1000" align="center"><br> <font color="#003300"><s:actionerror/>
<s:form action="addCustomer" id="register-form" method="post" theme="xhtml" enctype="multipart/form-data">

<s:textfield name="customer.customerID" label="Customer ID" size="15"  />
<s:textfield name="customer.customerName" label="Customer Name:" maxlength="10"/>
</s:form>
</body>
</head>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:28:46.273

消除

```
private String customerName;

private String emailID; 
```

来自 Action（连同 getter 和 setter），并确保相同的字段（连同 CustomerID）在`Customer`带有 getter 和 setter 的对象内部。

然后，检查您发布`CustomerID`和`CustomerName`从页面的原因，但检查`EmailID`并`CustomerName`在操作中。

添加`EmailID`JSP，或从验证方法中删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:47:40.923

要获得提交的表单，您需要传递`validate`方法而不是在其中添加错误。如果您添加错误或通过 xml 验证添加错误，则默认情况下框架将返回`input`结果。它`/registration.jsp`在你的行动中。该`execute`方法未执行。由于操作字段未初始化，您会添加错误。在 JSP 中，您引用对象`customer`并使用 OGNL 表示法，值将由其中的`params`拦截器设置。因此，要验证此值，您应该编写

```
public void validate() {
 if (customer.getCustomerName() == null || customer.getCustomerName().trim().equals("")) {
   addFieldError("customer.customerName", "Required");
 }
} 
```

如果您不使用`customer`JSP 中的对象，那么您应该对引用操作属性的字段名称使用 OGNL 表示法。

然后验证

```
public void validate() {
 if (customerName == null || customerName.trim().equals("")) {
   addFieldError("customerName", "Required");
 }
 // the same for email ID
} 
```

以为你有这个想法。

# c++ - 使用 openCV 声明具有相同值的矩阵

> ID：15431118
> 
> 赞同：0
> 
> 时间：2013-03-15T11:22:31.703
> 
> 标签：c++, visual-studio-2010, opencv

我已经声明了一个包含等于 1 的值的矩阵： cv::Mat mat_cal = cv::Mat::ones(width, height, CV_8U);

现在我想乘以一个常数，我的意思是，一个矩阵的值等于 A=0.3 然后我写： cv::Mat mat_cal = cv::Mat::ones(width, height, CV_8U)*A ;

但是，结果呢？0 0 0 0 0 0 0 0 的矩阵......

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:38:54.097

您的部分问题是您的矩阵类型是`CV_8U`一个 8 位无符号整数 - 因此`0.3`被截断为`0`. 而是将其设置为`CV_32F`（32 位浮点）。

另外，如果我记得，当乘以标量时，您可以执行以下操作。将 2 个矩阵相乘的工作方式不同：

```
float A = 0.3;
cv::Mat mat_cal = cv::Mat::ones(width, height, CV_32F)*A; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:38:35.963

```
char i = 1;
i *= 0.3; 
```

结果 ？0

这只是普通的旧整数舍入。

如果您想要具有 double 或 float 值的 Mat，请首先使用正确的类型：

```
cv::Mat::ones(width, height, CV_32F)*0.3f; // float 
```

或者：

```
cv::Mat::ones(width, height, CV_64F)*0.3;  // double 
```

# mysql - 年龄计算查询-优化返回时间

> ID：15431119
> 
> 赞同：0
> 
> 时间：2013-03-15T11:22:34.037
> 
> 标签：mysql, sql

我的查询是为了：

*   过滤人们不正确的日期，以便它只计算具有正确日期“DAY-MONTH-YEAR”的人（1986 年 12 月 2 日）
*   计算两个参数之间的年龄。

我不知道 1.029 SECs 对于这种类型的查询是否正常，或者我做错了什么，使得速度有点慢。如果我做了一些可以优化的事情，谁能给我建议？

就目前而言，我的查询需要`( 870,968 total, Query took 1.0297 sec)` ，实际查询是

```
SELECT  DATE_FORMAT(FROM_DAYS(TO_DAYS(NOW())-TO_DAYS(STR_TO_DATE(m.m_dob, '%d-%b-%Y'))), '%Y')+0 AS age  
FROM impressions AS i, mariners AS m  
WHERE STR_TO_DATE(m.m_dob, '%d-%b-%Y') IS NOT NULL 
  AND m_dob != '' 
  AND DATE_FORMAT(FROM_DAYS(TO_DAYS(NOW())-TO_DAYS(STR_TO_DATE(m.m_dob, '%d-%b-%Y'))), '%Y')+0 BETWEEN 13 AND 50 
ORDER BY `age`  DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:42:42.013

根据您的评论和当前查询，您实际上并没有加入您的表。这两个表需要连接：

```
SELECT DATE_FORMAT(FROM_DAYS(TO_DAYS(NOW())-TO_DAYS(STR_TO_DATE(m.m_dob, '%d-%b-%Y'))), '%Y')+0 AS age  
FROM impressions AS i   
INNER JOIN mariners AS m  
  ON i.SessionId = m.ID
WHERE i.impression =1
  AND STR_TO_DATE(m.m_dob, '%d-%b-%Y') IS NOT NULL 
  AND m_dob != '' 
  AND DATE_FORMAT(FROM_DAYS(TO_DAYS(NOW())-TO_DAYS(STR_TO_DATE(m.m_dob, '%d-%b-%Y'))), '%Y')+0 BETWEEN 13 AND 50 
ORDER BY `age` DESC 
```

您当前的查询返回日期的[笛卡尔结果](http://en.wikipedia.org/wiki/Join_%28SQL%29#Cross_join)。

# magento - getData 在 Mage_Core_Block_Template 自定义块中不起作用

> ID：15431120
> 
> 赞同：0
> 
> 时间：2013-03-15T11:22:34.550
> 
> 标签：magento

我以这种方式定义了一个自定义块：

```
<frontend>
    <layout>
        <updates>
            <categorylist module="mymodule">
                <file>mymodule.xml</file>
            </categorylist>
        </updates>
    </layout>
</frontend>

<global>
    <blocks>
      <categorylist>
    <class>Alias_CategoryList_Block</class>
      </categorylist>
  </blocks>
 </global> 
```

然后我以这种方式定义了块类

```
class Alias_CategoryList_Block_List extends Mage_Core_Block_Template
{
    public $idCategory = NULL;

    // Contructor
    public function __construct()
{

        echo $this->getData('categoryid'); 
}
} 
```

和这样的布局：

```
<default translate="label">
<block type="categorylist/list" name="categorylist.list" output="toHtml" after="-" template="mymodule.phtml"/> 
```

我以这种方式将块放入 CMS 中：

```
{{block type="categorylist/list" categoryid="10"}} 
```

但遗憾的是 $this->getData('categoryid'); 什么都不检索。无法弄清楚出了什么问题？我什至尝试过 $this->getCategoryid; 但甚至什么都没有。任何人都可以帮忙吗？

我正在使用 Magento 1.7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T01:40:59.523

添加具有以下内容的视图（phtml）模板文件会很愚蠢吗

```
<?php echo $this->getCategoryId(); ?> 
```

而不是试图在构造函数中完成它？此外，您不需要自己的代码隐藏文件，您可以使用`core/template`.

所以你的 cms 会是

```
{{block type="core/template" template="awesome.phtml" cateogryid="10"}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:19:02.087

问题是我假设布局更新配置将扩展 CMS 中的代码，但 CMS 中的代码不应该有块名称和模板参数用于我的目的。所以我修复了它，清除了构造函数中的模板并删除了配置中的布局更新（因为我不需要该块来覆盖现有块）：

```
// Contructor
public function __construct()
{
    $this->setTemplate('mymodule.xml'); 
} 
```

# android - Android 设备无法连接到本地服务器

> ID：15431121
> 
> 赞同：0
> 
> 时间：2013-03-15T11:22:38.127
> 
> 标签：android, localhost, wamp

我制作了一个连接到 php 文件的应用程序。该代码使用 AVD 正常工作。现在，当我在我的 android 设备中尝试该应用程序时，它会强制关闭。我的 android 设备通过 wifi 网络连接。我在 Windows 7 上使用 wamp 服务器。

我已经查明了问题，但我无法解决它。我希望你们中的一个好人可以帮助我。这是我的罪魁祸首（192.168.1.100 是机器 IP）：

```
private static String url_all_products = "http://192.168.1.100/android_connect/get_all_products.php"; 
```

如何解决？100% 在 AVD 中工作，但不能在实际的 android 设备中工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:48:39.150

@droidH 如果您在本地服务器上工作，请将您的 url 更改为 10.0.2.2 到您的 IP 地址

转到此链接它可以工作
[http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T17:01:55.813

做这个：

*   首先，将您的 android 设备和计算机放入[此处描述的同一网络中](https://stackoverflow.com/questions/6176609/connect-an-android-device-to-a-web-service-on-local-host/8666128#comment33616171_8666128)
*   然后，让您的设备通过其在该网络中的 IP 直接连接到您的计算机（在[此处](https://stackoverflow.com/questions/4779963/how-can-i-access-my-localhost-from-my-android-device/16510143#16510143)找到 IP ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T07:15:01.123

您需要检查两件事：

*   您的外部 IP 地址，即如果您使用 Windows，请使用命令“ipconfig”并获取 IPv4 地址。
*   在 AndroidManifest 中检查您的权限：

> ```
> uses-permission android:name="android.permission.INTERNET" 
> ```

另请检查：[https ://stackoverflow.com/a/16510143/644011](https://stackoverflow.com/a/16510143/644011)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-03T17:16:43.400

1.  尝试将您的手机连接到与计算机相同的网络。我使用虚拟路由器使我的手机与我的笔记本电脑在同一个网络中
2.  然后使用您计算机的 IP 地址从您的手机访问您的计算机网络服务器。

# mysql - 按日期时间字段准确分页

> ID：15431122
> 
> 赞同：1
> 
> 时间：2013-03-15T11:22:39.027
> 
> 标签：mysql, database, architecture, web, pagination

我有一个数据库表，例如“项目”。我有这些项目的时间表，按字段ascended_at（日期时间）排序。我需要为这样的时间线制作一个分页 api。所以，我的第一个版本是：

```
HTTP GET /items/timeline?page=[PAGE_NUM] 
```

哪个会触发

```
SELECT * FROM items LIMIT 10 OFFSET [0, 10, 20, ...] ORDER BY ascended_at; 
```

但问题是：当新商品到货时，所有页面每 1 件商品都会移动。为了避免这种情况，我添加了 from_asc_at 参数：

```
HTTP GET /items/timeline?page=[PAGE_NUM]&from_asc_at=123123123 
```

哪个会触发

```
SELECT * FROM items WHERE ascended_at <= [asc_at_parameter] LIMIT 10 OFFSET [0, 10, 20, ...] ORDER BY ascended_at; 
```

但这并不准确，因为可能有两个项目具有相同的ascended_at，并且您可以在两个不同的页面中看到相同的项目（但不应该）。

所以，我的问题是：有什么可能的解决方案？

*   使用 ID（因为它是唯一的）？但是如果不是按ID排序怎么办？
*   还有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:45:32.820

如果您的项目 ID 是自动递增的，您可以在第一次检索项目时（在分页之前）检查下一个“自动递增”值是多少。

将该值持久存储（可能在会话变量中）直到下一次搜索，`< {maximumID}`并向您的 SQL 查询添加一个过滤器，以提高用户分页时的“结果集稳定性”（在初始搜索和分页之间创建的所有新项目都不会' t 被检索）。

编辑

要处理**项目删除**，您必须执行“软删除”：不要立即从数据库中删除项目，而是在日期时间字段中存储删除日期，以便项目在数据库中仍然存在一段时间。

当发出新的搜索时，您将在会话中存储当前服务器时间，并添加一个条件（例如`date_deleted IS NULL OR date_deleted > {searchDate}`），以便在搜索后删除的所有项目仍将针对该特定搜索显示。

您将不得不创建一个计划作业，以便在延迟一段时间后“真正”从数据库中删除项目。

# iphone - 使用核心蓝牙框架将mac mini设置为外围设备

> ID：15431123
> 
> 赞同：0
> 
> 时间：2013-03-15T11:22:39.463
> 
> 标签：iphone, ios, core-bluetooth

我正在使用核心蓝牙框架。我想将我的 BLE 启用设备的 mac mini 设置为宣传数据的蓝牙外围设备。我试图为相同的创建mac应用程序：我的应用程序实现**了CBPeripheralDelegate**协议，并且在查看didDidLoad方法中我实现了以下代码：

```
peripheralManager=[[CBPeripheral alloc]init];
peripheralManager.delegate=self; 
```

但它不工作。这足够了吗？或者真的 OSx 应用程序支持外围模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:34:50.820

您在代码中初始化 CBPeripheral 而不是 CBPeripheralManager。

这是我正在从事的一个项目的示例：

```
//Initializes peripheral manager
-(CBPeripheralManager *)peripheralManager
{
  if (_peripheralManager == nil)
  {
    _peripheralManager = [[CBPeripheralManager alloc]initWithDelegate:self queue:nil];
  }
  return _peripheralManager;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T17:02:18.290

OS X 目前不支持外围模式——只支持中央模式。然而，iOS 可以充当外围设备或中央设备。

# angularjs - Angular - 使用表单输入指令时的表单验证问题

> ID：15431130
> 
> 赞同：4
> 
> 时间：2013-03-15T11:22:57.667
> 
> 标签：angularjs, validation

我一直在尝试构建一个表单输入指令，它将根据模型和模型属性生成表单输入。例如，

1.  如果字段是名称并且类型是文本，指令将返回一个输入 html 控件，
2.  如果该字段是一个列表，那么它将返回一个选择框，依此类推

这些输入是在视图中使用 ng-repeat 生成的。输入绑定到范围内的模型。这工作正常。但是，表单验证失败；即如果输入控件无效，主窗体仍然显示窗体有效。

我提出了一个简单的 plunkr 来说明这个问题 - [http://plnkr.co/edit/R3NTJK?p=preview](http://plnkr.co/edit/R3NTJK?p=preview)

注意：我实际上已经嵌套了表单，因为输入名称字段也是从范围模型动态生成的。

从过去的 2 天开始，我一直在努力控制这一点，这真的让我发疯了。

我不确定我是否遗漏了什么。

如果有人能帮助我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:09:06.863

**更新**：使用以下链接功能：

```
link: function linkFn(scope,elem,attr){
   var jqLiteWrappedElement = 
       angular.element('<input type="url" name="socialUrl" ng-model="social.url">');
   elem.replaceWith(jqLiteWrappedElement);
   $compile(jqLiteWrappedElement)(scope);
} 
```

[笨蛋](http://plnkr.co/edit/pH5YIM?p=preview)。

由于我不明白的原因，`replaceWith()`必须在调用 $compile 之前执行。如果有人能解释为什么会这样，我们将不胜感激！

Update2：在下面的评论中，Artem 提到必须在调用链接函数之前修改 DOM，所以这也有效：

```
var myElem = angular.element('some html');
var linkFn = $compile(myElem);
element.replaceWith(myElem);
linkFn(scope); 
```

* * *

原答案：

而不是链接功能，只需在指令中使用模板：

```
template: '<input type="url" name="socialUrl" ng-model="social.url">' 
```

# jquery - 修复 Jquery Ui 多选的大小

> ID：15431132
> 
> 赞同：4
> 
> 时间：2013-03-15T11:23:00.870
> 
> 标签：jquery, jquery-plugins, multi-select

我正在使用这个 Jquery Ui 多选插件[http://quasipartikel.at/multiselect_next/](http://quasipartikel.at/multiselect_next/)。我试图把这个多选放在一个`html`表格单元格中，但它的大小`multiselect`变得太小了。任何有关如何调整整体大小`multiselect`以便可以在表格中显示的帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-13T18:17:12.613

Jquery Ui 多选插件似乎使用您调用它的选择项的高度和宽度值。

例如，如果您有如下选择：

```
<select id="locations" class="multiselect" multiple="multiple" name="locations[]" style="width:300px; height:300px;"> 
```

然后调用：

```
$(".multiselect").multiselect(); 
```

您的新多选将具有 300x300 尺寸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-17T18:10:52.857

问题似乎是，默认情况下多选的最小高度为 200，或一些预定义的最小高度设置。为了解决这个问题，我在下面做了这个无论如何对我有用。希望它可以帮助别人。

```
 $("#ddl_MMS").multiselect({ columns: 1, placeholder: "@Report.ALLMMS", selectAll: true, minHeight:40 }); 
```

# php - Php Mailer 不适用于批处理文件电子邮件？

> ID：15431134
> 
> 赞同：1
> 
> 时间：2013-03-15T11:23:01.947
> 
> 标签：php, wampserver

当我尝试从批处理文件执行*php mailer时显示此错误，*

```
SMTP -> ERROR: Failed to connect to server: Unable to find
the socket transport "ssl" - did you forget to enable it when you
configured PHP? (24) <br />SMTP Error: Could not connect to SMTP host.
Mailer Error: SMTP Error: Could not connect to SMTP host 
```

# objective-c - 杀死启动守护进程

> ID：15431136
> 
> 赞同：0
> 
> 时间：2013-03-15T11:23:02.910
> 
> 标签：objective-c, macos, cocoa

我的应用程序运行一个启动守护程序，因此主应用程序可以与 iTunes 同步启动。守护程序运行没有问题。

但是，当我禁用守护程序在登录时启动时，守护程序已经启动并继续打开主应用程序，直到用户重新启动计算机并且守护程序关闭。

如何终止我的守护进程？因为它是一个没有界面的进程，所以应用程序是没有`NSRunningApplication`.

* * *

## 编辑

值得一提的是，该应用程序必须被沙盒化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:11:32.567

好的，通过从守护程序服务列表中删除帮助应用程序，该应用程序会自动被终止。

* * *

## 代码

```
- (void)setLaunchHelperAtLogin:(BOOL)launchHelperAtLogin {
    if (launchHelperAtLogin != self.launchHelperAtLogin) {
        // Creating helper app complete URL
        NSURL *bundleURL = [[NSBundle mainBundle] bundleURL];
        NSURL *url = [bundleURL URLByAppendingPathComponent:kHelperPath];

        // Registering helper app
        OSStatus status = LSRegisterURL((__bridge CFURLRef)url, true);
        if (status != noErr) {
            NSError *error = [NSError errorWithDomain:NSOSStatusErrorDomain code:status userInfo:nil];
            NSLog(@"%@", error);
        }

        // Setting login
        if (!SMLoginItemSetEnabled((CFStringRef)kHelperBundleIdentifier, launchHelperAtLogin)) {
            NSLog(@"SMLoginItemSetEnabled failed!");
        }
    }
} 
```

# java - 在 Java 客户端应用程序中调用存储过程

> ID：15431137
> 
> 赞同：0
> 
> 时间：2013-03-15T11:23:03.703
> 
> 标签：java, rest, stored-procedures, jersey, apache-httpclient-4.x

所以，我的问题是：我在**Glassfish 3.1.2中****使用 Jersey 开发了一些 REST 服务**，这些服务是从我的**MySQL 数据库**生成的。然后我实现了基本身份验证。这一切都很好。

 ****现在，我正在开发一个**客户端应用程序**来使用这些服务。我已经习惯`Apache HttpClient`了身份验证，并且我已经尝试过 GET 方法和 PUT 方法。我可以在 JSON 对象的帮助下从我的数据库中获取值并更新其他值。

但是如何使用我的数据库中的**存储过程来执行 PUT/POST 并更新我的数据库？**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:31:16.993

您将需要使用 JDBC，像这样

```
cs = this.con.prepareCall("{call SHOW_SUPPLIERS()}");
ResultSet rs = cs.executeQuery();

while (rs.next()) 
{
    String supplier = rs.getString("SUP_NAME");
    String coffee = rs.getString("COF_NAME");
    System.out.println(supplier + ": " + coffee);
} 
```

例如，请参阅以下文档（我从中获得上述代码）

[http://docs.oracle.com/javase/tutorial/jdbc/basics/storedprocedures.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/storedprocedures.html)****

# java - java程序使用斯坦福解析器获取句子的解析分数

> ID：15431139
> 
> 赞同：4
> 
> 时间：2013-03-15T11:23:11.870
> 
> 标签：java, parsing, nlp, stanford-nlp

我能够得到“我的名字是拉胡尔”这样的句子的标签和单词的输出。作为

> My/PRP$, name/NN, is/VBZ, Rahul/NNP, ./.]

与程序：

```
LexicalizedParser lp = LexicalizedParser.loadModel(
    "edu/stanford/nlp/models/lexparser/englishPCFG.ser.gz"
);
lp.setOptionFlags(new String[]{"-maxLength", "80", "-retainTmpSubcategories"});

String sent = "My name is Rahul";
Tree parse = (Tree) lp.apply(sent);

List taggedWords = parse.taggedYield();
System.out.println(taggedWords); 
```

但是，我还需要得到句子的解析分数。我可以对我的程序进行任何修改以获得解析分数吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T13:06:29.317

该类`Tree`有一个[score](http://nlp.stanford.edu/nlp/javadoc/javanlp/edu/stanford/nlp/trees/Tree.html#score%28%29)方法，您可以调用它来获取句子的分数。

```
double score = parse.score(); 
```

# java - 使用 apache fileutil.copyfile 复制文件

> ID：15431141
> 
> 赞同：7
> 
> 时间：2013-03-15T11:23:19.157
> 
> 标签：java, file, file-io, copy

我正在使用 apache util 将文件复制到使用`fileutil.copyFile(src, dest)`

我正在复制的文件由外部供应商每 2 秒更新一次，我真的不想锁定它（我的应用程序在 Windows 中运行——这会导致各种问题）。我希望有人可以帮助我建议在不锁定源文件的情况下复制甚至读取文件的最安全方法是什么？

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T18:29:34.667

因为您没有在复制操作之前明确锁定整个文件，所以默认的 os 文件锁定机制正在工作。

我运行了一个快速测试程序来查看当您在外部进程每 2 秒写入文件时复制源文件时在 Windows 机器上会发生什么。

写入文件的进程从未遇到过问题。

```
public static void main(String[] args) {
    File f = new File("..\\test.txt");
    long startTime = System.currentTimeMillis();
    long elapsedTime = 0;
    while (elapsedTime < 1000 * 60) {
        try {
            FileUtils.writeStringToFile(f, System.currentTimeMillis()+" : Data Write\r\n", true);
            Thread.sleep(2000);
        } catch (IOException ex) {
            Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);
        } catch (InterruptedException ex){
            Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);
        }
        elapsedTime = System.currentTimeMillis() - startTime;
    }
} 
```

如果在源文件更改长度之前没有完成复制，复制文件的进程将抛出异常。看来，此异常更像是文件的复制版本不完整的警告。当我同步时间以防止在写入文件的同时读取文件时，不会引发此异常。

```
public static void main(String[] args) {
    File f = new File("..\\test.txt");
    long startTime = System.currentTimeMillis();
    long elapsedTime = 0;
    while (elapsedTime < 1000 * 60) {
        try {
            FileUtils.copyFile(f, new File("..\\test\\test.txt"));
            Thread.sleep(2000);
        } catch (IOException ex) {
            Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);
        } catch (InterruptedException ex){
            Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);
        }
        elapsedTime = System.currentTimeMillis() - startTime;
    }
} 
```

基于这个测试，我不会担心写作过程会发生什么。`java.io.IOException: Failed to copy full contents from '..\test.txt' to '..\test\test.txt'`当被抛出时，我会做一些事情来处理这个案子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:51:22.983

[这是How to Cache a File in Java](http://www.cacheonix.com/articles/How_to_Cache_a_File_in_Java.htm)的摘录，更多内容可以在此处找到。

**在 Java 中缓存文件**

* * *

从磁盘读取文件可能会很慢，尤其是当应用程序多次读取同一个文件时。缓存通过将经常访问的文件保存在内存中来解决这个问题。这允许应用程序从快速本地内存而不是慢速硬盘驱动器读取内容。在 Java 中缓存文件的设计包括三个要素：

1.  缓存文件的算法
2.  用于保存缓存内容的数据结构
3.  用于存储缓存文件的缓存 API

**缓存文件的算法**

* * *

缓存文件的通用算法必须考虑文件修改，并由以下步骤组成：

1.  使用完全限定的文件路径作为键从缓存中获取值。
2.  如果未找到密钥，则读取文件内容并将其放入缓存中。
3.  如果找到密钥，则检查缓存内容的时间戳是否与文件时间戳匹配。
4.  如果时间戳相等，则返回缓存的内容。
5.  如果时间戳不相等，则通过读取文件并将其放入缓存来刷新缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:27:06.553

看看[http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html)。

也许这会对你有所帮助。

# android - 如何从我们的服务器 android 和 iOS 下载应用内购买项目

> ID：15431145
> 
> 赞同：1
> 
> 时间：2013-03-15T11:23:28.487
> 
> 标签：android, iphone, ios, in-app-purchase

我需要一些关于应用内购买应用的信息。我想同时为 android 和 iPhone 开发 Inapp 购买应用程序。我只需要知道一些关于 InApp 系统的事情。

阅读文档和堆栈溢出后，我知道可以在我们自己的服务器上上传 Inapp 购买数据项（如视频、音乐），我们只需要在 google play for android 或 app store 上管理购买项目列表即可苹果手机。我只需要知道购买商品后，“字符串或值或数据或响应”应用程序服务器向我们发送的“purchase_item_id 或 username_id”是什么，以便我可以将此值发送到我自己的服务器以从我的服务器下载特定的购买项目服务器到特定用户。

感谢您宝贵的时间！任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T22:25:38.157

Apple 的 In App Purchase 文档包含您需要的所有答案。当您在 iTunes Connect 上创建应用内购买时，Apple 将为该购买分配一个产品 ID。如果 In App Purchase 成功，您可以使用此产品 ID 了解从服务器下载的内容。

[https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html)

# php - 在 PHP 函数之间传递值

> ID：15431153
> 
> 赞同：0
> 
> 时间：2013-03-15T11:23:48.623
> 
> 标签：php

假设我有以下功能：

```
public static function checkRunin($fieldPickup) {
    // CODE

    return self::getFare();
} 
```

我想传递`$fieldPickup`给`getFare()`下面的函数：

```
private static function getFare($int_terminate) {
    // CODE
} 
```

但是`getFare()`已经有一个函数通过 AJAX 请求传递给它，所以你不能像这样传递`return self::getFare($fieldPickup);`

你会怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:29:14.793

只用这个

```
return self::getFare($fieldPickup); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:37:07.747

要么定义`$fieldPickup`为[静态类变量](http://php.net/manual/en/language.oop5.static.php)，要么像 Yogesh 建议的那样，`$fieldPickup`作为参数传递给 method `getFare()`。

# c# - 如何在 C# 中更改部分字符串

> ID：15431157
> 
> 赞同：0
> 
> 时间：2013-03-15T11:23:54.180
> 
> 标签：c#, wpf, string

我正在编写从 rss 提要获取信息的 ac# wpf 应用程序。我得到了一个带有“<'b>Bold Text</'/b> and <'i>Italic Text</'/i> and <'u>Underline text</'/u>”的字符串，需要将字体样式更改为当我想将字符串用于标签或文本框时的正确样式。现在的输出将类似于 Label: <'b>Text</'/b> 而不是 Text 是 BOLD。需要帮助以找到解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:28:51.507

假设您收到以下文本：

```
<b>Bold</b><i>Italic</i> 
```

您需要分解文本并将它们放入 WPF 标记中。WPF 中的文本必须如下所示：

```
<TextBlock>
    <Run Text="Bold" FontWeight="Bold" />
    <Run Text="Italic" FontStyle="Italic" />
</TextBlock> 
```

如果你用谷歌搜索 HTML 到 XAML 的转换，你应该找到一些你可以使用的 API 或示例：

[XAML 到 HTML 转换演示](http://msdn.microsoft.com/en-us/library/aa972129.aspx)

[HTML-XAML 转换器](http://blogs.msdn.com/b/llobo/archive/2006/07/26/html_2d00_xaml-converter.aspx)

# android - 如何在android中动态启用窗口动画

> ID：15431162
> 
> 赞同：1
> 
> 时间：2013-03-15T11:24:04.703
> 
> 标签：android, animation

我想在我的应用程序中启用动画，我正在这样做但没有效果。

```
Settings.System.putInt(getContentResolver(), Settings.System.WINDOW_ANIMATION_SCALE, 1);
Settings.System.putInt(getContentResolver(), Settings.System.TRANSITION_ANIMATION_SCALE, 1); 
```

我也在清单中给予了许可，

```
uses-permission android:name="android.permission.WRITE_SETTINGS" 
```

请指教，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:03:59.713

在您完成并重新创建活动之前，这些设置可能不起作用。我知道这是更改本地化设置的情况，并且您尝试设置的设置可能相同？

此外，仅出于调试目的，您可以调用`Settings.System.getInt`after`putInt`检查系统是否实际存储了正确的设置值。

# excel - VBA Excel 工作表更改自动调整行

> ID：15431174
> 
> 赞同：0
> 
> 时间：2013-03-15T11:24:42.113
> 
> 标签：excel, vba

我在一个标准模块中有这个代码，它工作正常：

```
Public Sub AutofitRows()
ThisWorkbook.Worksheets("Data").Cells.EntireRow.AutoFit
End Sub 
```

然后我在数据工作表模块中有这段代码，由于某种原因它不会自动调整所有行：

```
Private Sub Worksheet_Change(ByVal Target As Range)

If Target.Address = "$B$3" Then

Call AutofitRows

End If

End Sub 
```

有人可以解释如何纠正这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:00:43.893

试试下面的代码：

```
Public Sub AutofitRows()
    Dim rng As Range
    Set rng = ThisWorkbook.Worksheets("Data").Rows("3:3")
    rng.AutoFit
End Sub 
```

假设您的以下代码位于 Worksheets("Data") 上。当单元格 B3 中的值发生变化时，也会调用该过程。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Target.Address = "$B$3" Then
        Call AutofitRows
    End If
End Sub 
```

# javascript - 如何在数组中找到数组并将其删除？

> ID：15431175
> 
> 赞同：1
> 
> 时间：2013-03-15T11:24:43.273
> 
> 标签：javascript, jquery, arrays, find, matching

```
var arr = [["test","1"],["demo","2"]];

// $.inArray() ???
// .splice() ???
// $.each() ???

$("code").html(JSON.stringify(arr)); 
```

**如果我将通过“test”**（唯一）关键字找到匹配的数组，我将删除`["test","1"]`

所以`arr`删除后会`[["demo","2"]]`

我怎样才能做到这一点 ？

**游乐场：http:** [//jsbin.com/ojoxuy/1/edit](http://jsbin.com/ojoxuy/1/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:33:51.820

这[`filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)是为了：

```
newArr = arr.filter(function(item) { return item[0] != "test" }) 
```

如果您想修改现有数组而不是创建新数组，只需将其分配回去：

```
arr = arr.filter(function(item) { return item[0] != "test" }) 
```

修改器方法，例如`splice`使代码更难阅读和调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:29:50.557

你可以这样做：

```
function remove(oldArray, itemName) {
    var new_array = [];

    for(var i = 0, len = oldArray.length; i < len; i++) {
        var arr = oldArray[i];

        if (arr[0] != itemName) new_array.push(arr);
    }

    return new_array;
} 
```

并这样称呼它：

```
var arr = [["test","1"],["demo","2"]];
var new_arr = remove(arr,'test'); 
```

我在这里做假设，没有做任何真正的错误检查，但你明白了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T11:30:11.207

也许是这样的：

```
for(var i = 0; i < arr.length; i++) {
  if(arr[i][0] == "test") {
   arr.splice(i, 1);
   break;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T11:42:42.080

检查这个

```
function rmEl(a,v)
{
for(var i=0;i<a.length;i++)
    {

      if(a[i][0]==v)
      {
        a.splice(i,i+1);
        i=-1;
      }
      $("code").html(JSON.stringify(a));       
    }
 return a;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T11:53:44.653

```
var arr = [["test","1"],["demo","2"]];

function checkArrayElements(a, index, arr) {
  if(a[0]=="test"){
    delete arr[index];
    arr.splice(index,index+1);
  }
}
arr.forEach(checkArrayElements);
$("code").html(JSON.stringify(arr)); 
```

注意：这将删除 arr 中任何带有 0 元素 = "test" 的内部数组

# iphone - 如何在我的 ios 应用程序中使用私有框架

> ID：15431177
> 
> 赞同：-1
> 
> 时间：2013-03-15T11:24:46.917
> 
> 标签：iphone, ios, core-bluetooth

我正在以编程方式从 iphone 应用程序更改蓝牙设置。我知道有一个名为 BluetoothManager 的私有框架满足我的要求。但由于它是一个私有框架，我可以像导入其他框架一样导入它。如何将私有框架导入我的 iphone 应用程序？此外，没有任何苹果提供的头文件，我们如何从这些私有框架访问功能。有人可以建议我吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:36:26.950

在您的项目中复制新框架，然后在您的项目中导入单击添加其他按钮并从您已经在文件中复制的项目中选择![在此处输入图像描述](../Images/dd1c5ac61cd3149e2515576c08291d8f.png)

# oracle - Oracle中nvarchar可以存储多少字节

> ID：15431178
> 
> 赞同：0
> 
> 时间：2013-03-15T11:24:47.217
> 
> 标签：oracle, byte

我在 Oracle 中有一个 nvarchar 字段，我想知道：如果它的长度为 178，它可以容纳多少字节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:31:56.837

[从手册：](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements001.htm#i45685)

> *字符数据类型 NVARCHAR2 的宽度规格是指字符数。允许的最大列大小为 4000 字节。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:27:49.370

这取决于您的`NLS_LANG`设置。

检查[http://docs.oracle.com/cd/B28359_01/server.111/b28298/ch6unicode.htm#g1008281](http://docs.oracle.com/cd/B28359_01/server.111/b28298/ch6unicode.htm#g1008281)

# java - 为@PathVariable 类型不匹配配置错误页面

> ID：15431180
> 
> 赞同：2
> 
> 时间：2013-03-15T11:24:50.323
> 
> 标签：java, spring, servlets, custom-error-pages

假设我有一个控制器：

```
@Controller

public class SomeController {

    @RequestMapping(value = "{id}/object.do")
    public String showObject(@PathVariable("id") Integer id,
                            HttpServletRequest request) {
            //do smth
            return "somePage";
        }
} 
```

当“id”不是数字，而是像“aaa/object.do”这样的字符串时，Tomcat 会显示一个错误 - “客户端发送的请求在语法上不正确。”

有没有办法配置仅当“id”路径变量类型不正确时才会显示的错误页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T11:38:47.443

您可以使用[@ExceptionHandler](http://static.springsource.org/spring/docs/3.0.x/reference/mvc.html#mvc-ann-exceptionhandler)处理此特定错误（我怀疑它是[TypeMismatchException](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/beans/TypeMismatchException.html)）

```
@ExceptionHandler(TypeMismatchException.class)
public ModelAndView handleTypeMismatchException(TypeMismatchException ex) {
    //TODO log
    // Return something reasonable to the end user.
    ...
} 
```

请注意，`@ExceptionHandler`与通常的处理程序一样，它基本上具有几乎相同的功能：

> 与使用 @RequestMapping 注解注解的标准控制器方法非常相似，@ExceptionHandler 方法的方法参数和返回值非常灵活。

# javascript - 条形宽度的Javascript百分比计算

> ID：15431181
> 
> 赞同：3
> 
> 时间：2013-03-15T11:24:56.887
> 
> 标签：javascript, jquery, percentage

我需要计算当前值的百分比以将其附加到条形宽度：

```
<div class="bar"><span class="bar-inside" data-value="120"></span></div>
<div class="bar"><span class="bar-inside" data-value="1320"></span></div>
<div class="bar"><span class="bar-inside" data-value="670"></span></div> 
```

我需要找到最大值（在本例中为 1320），最大值为 100%，并根据该值计算其他条形宽度的百分比。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T11:47:23.663

```
var max = 0;
$('.bar').each(function() {
    max = Math.max(max, $('.bar-inside', this).data('value'));
})
.css('width', function() {
    return ($('.bar-inside', this).data('value') * 100 / max) + '%';
}); 
```

[http://jsfiddle.net/8nmhY/](http://jsfiddle.net/8nmhY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:29:10.150

这应该这样做：（[小提琴](http://jsfiddle.net/DuWUJ/)）

```
var max = 0; 

$('.bar-inside').each(function(){ max = Math.max(max, $(this).data("value")); }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T11:35:54.293

使用`map`函数然后`Math.max`.

```
var values = $.map($("span.bar-inside"), function(el, index) { return parseInt($(el).data('value')); });
var max = Math.max.apply(null, values); 
```

以上将输出`1320`预期结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T11:32:56.667

```
var max = -Infinity;

var maxEle = $(".bar").each(function() {
    if (+this.attr('data-value') > max) +this.attr('data-value', max) ;
}).filter(function() {
    return this.attr('data-value') == max;
});

if (maxEle.length > 1) maxEle = maxEle.eq(Math.floor(Math.random() * maxEle.length)); 
```

# rebol - REBOL 更改背景图片和文字

> ID：15431182
> 
> 赞同：1
> 
> 时间：2013-03-15T11:25:06.590
> 
> 标签：rebol

REBOL 我目前正在尝试重做我在 Delphi 中制作的一个小应用程序。此应用程序在 n 中显示背景图像，在 n 中显示文本，但我无法更改图像或文本，图像和文本的更改是通过按钮 >> 完成的。

这是没有随机部分的简化代码，因为我发现了它：

```
Rebol[
Title: "You have a message !"
Version: 1.0.0
Needs: [1.2.115]
]

the-imag1: load %"/C/MyFile/Cours CD/Affiche/Images/Vague9.jpg"
the-imag2: load %"/C/MyFile/Cours CD/Affiche/Images/Vague3.jpg"
the-image: the-imag1
text1: "Your banner text here" 

view xx1: layout [
size the-image/size
b1: backdrop the-image

at b1/offset + 110x120
box  350x150 font-size 20 font-color black [align: 'center] text1

    at b1/offset + 530x370
    btn ">>" [the-image: the-imag2 ; new image
              text1: "Hello"       ; new text
               show xx1] effect [multiply 90]
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:40:39.183

您正在重新定义面孔，而不仅仅是内容。只需重新定义您需要的字段。试试这个：

```
Rebol[
    Title: "You have a message !"
    Version: 1.0.0
    Needs: [1.2.115]
]

the-imag1: load %"/C/MyFile/Cours CD/Affiche/Images/Vague9.jpg"
the-imag2: load %"/C/MyFile/Cours CD/Affiche/Images/Vague3.jpg"
the-image: the-imag1
text1: "Your banner text here" 

view xx1: layout [
size the-image/size
b1: backdrop the-image

at b1/offset + 110x120
t1: text text1

    at b1/offset + 530x370
    btn ">>" [
        b1/image: the-imag2       ; new image
        t1/text: "Hello"       ; new text
        show xx1
    ] effect [multiply 90]
] 
```

# iphone - 比较相等的 NSDates 将它们返回为不相等

> ID：15431184
> 
> 赞同：2
> 
> 时间：2013-03-15T11:25:17.307
> 
> 标签：iphone, ios, objective-c, nsdate

我取一个日期并为其创建一个新指针，然后将其与另一个具有相同价值的日期进行比较。它将此报告为同一日期，但声称它们不匹配：

```
NSDate *date2 = [[NSDate alloc] initWithTimeIntervalSince1970:[date1 timeIntervalSince1970]];
NSLog(@"date 2: %@", date2);
NSLog(@"date 3: %@", date3);
NSLog(@"equal: %i", [date2 isEqualToDate:date3]); 
```

这是 NSLog：

```
date 2: 2013-03-15 11:12:24 +0000
date 3: 2013-03-15 11:12:24 +0000
equal: 0 
```

知道为什么这些返回不相等吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:29:16.107

尝试这个..

```
NSComparisonResult result = [date1 compare:date2]; // comparing two dates
switch (result) {
  case NSOrderedAscending:
    InfoLog(@"date1 is less");
    break;
  case NSOrderedDescending:
    InfoLog(@"date1 is greater");
    break;
  case NSOrderedSame:
    InfoLog(@"same date");
    break;
  default:
    break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:31:51.173

请检查：

```
NSCalendar *calendar         = [NSCalendar currentCalendar];
NSDateComponents *components = [calendar components:(NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit) fromDate:date2];
NSDate *date2New             = [calendar dateFromComponents:components];
components                   = [calendar components:(NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit) fromDate:date3];
NSDate *date3New             = [calendar dateFromComponents:components];

if([date2New isEqualToDate:date3New])
{
   //do stuffs
} 
```

我认为您的代码中的问题是， isEqualToDate: 将检查完全相同的日期（亚秒级差异也会导致条件失败）

根据[NSDate](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)：

> **isEqualToDate：**
> 
> 返回一个布尔值，指示给定对象是否是 NSDate 对象并且完全等于接收者。 `- (BOOL)isEqualToDate:(NSDate *)anotherDate`
> 
> ***参数***
> 
> **另一个日期**
> 
> ```
> The date to compare with the receiver. 
> ```
> 
> **返回值**
> 
> 如果 anotherDate 是一个 NSDate 对象并且完全等于接收者，则为 YES，否则为 NO。
> 
> ***讨论***
> 
> **此方法检测日期之间的亚秒级差异。如果要比较粒度较小的日期，请使用 timeIntervalSinceDate: 比较两个日期**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:38:07.870

它也与微秒进行比较，因此它给出的值类似于 0。 `timeIntervalSinceDate:`此方法用于日期在微秒、秒等范围内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T19:10:50.660

`date2`并`date3`以毫秒为单位关闭。

比较然后使用第二精度这样做：

```
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *comps = [calendar components:NSSecondCalendarUnit fromDate:date2 toDate:date3 options:0];
if (comps.second == 0) {
    //do something
} 
```

# android - TabActivity 内的 Activity 组中的对话框不起作用

> ID：15431189
> 
> 赞同：0
> 
> 时间：2013-03-15T11:25:35.720
> 
> 标签：android, dialog, activitygroup, android-tabactivity

我正在尝试`ActivityGroup`在另一个中运行嵌入 `ActivityGroup`。（例如：一个`ActivityGroup`里面的 a `TabActivity`）

这似乎可以正确显示，但是当我尝试显示模态框（如`AlertDialog`.

```
TabActivity 
```

*   `Tab1`
*   `Tab2`
*   `MyGroupActivity`
*   *   `ChildActivity1`
*   *   `ChildActivity2`

如果 childActivity1 或 2 尝试显示一个`DialogBox`我得到这个 `exception`：

```
ERROR/AndroidRuntime(2449): 
android.view.WindowManager$BadTokenException: Unable to add window -- 
token android.app.LocalActivityManager$LocalActivityRecord@43424620 is 
not valid; is your activity running? 
```

如果有人知道请回复...

这是我的对话框代码

```
 final Dialog dialog = new Dialog(EditDeleteReqCardList.this);
  dialog.setContentView(R.layout.customdialougbox);
        dialog.setTitle("Request Card - "+reqid);

        // set the custom dialog components - text, image and button
        TextView text = (TextView) dialog.findViewById(R.id.text);
        text.setText("Do You Want to Delete This request Card ?");
        ImageView image = (ImageView) dialog.findViewById(R.id.image);
        image.setImageResource(R.drawable.dialougimage);

    Button dialogButton = (Button)    dialog.findViewById(R.id.dialogButtonOK);
        Button cancelbutton = (Button) dialog.findViewById(R.id.cancel);
        dialogButton.setText("Yes");
                   dialog.show(); 
```

我的小组活动

```
 public class RequestcardList  extends ActivityGroup  {

 private ArrayList<String> mIdList;

protected static final int SUB_ACTIVITY_REQUEST_CODE = 100;

int finalresultlengt1;
  String[][] outputString=null;
  String upid="";
  String group_id="";
  String result="";
  String travel_date="";
  String travel_from="";
  String travel_to="";
  String travel_start_time="";
  String ampm="";
 String card_type="";
  String vacancycard_id="";
  private ArrayList<HashMap<String,String>> list;
  String FIRST_COLUMN = Constant.FIRST_COLUMN;
  String SECOND_COLUMN = Constant.SECOND_COLUMN;
  String THIRD_COLUMN = Constant.THIRD_COLUMN;
  String FOURTH_COLUMN = Constant.FOURTH_COLUMN;
  String vacanyid_seat="";
  int groupid =0;
public void onCreate(Bundle savedInstanceState) 

{

    super.onCreate(savedInstanceState);
    setContentView(R.layout.request_mainlist);

    if (mIdList == null) mIdList = new ArrayList<String>();

         final ListView lview = (ListView) findViewById(R.id.listView);

         TextView heading=(TextView)findViewById(R.id.heading);
         TextView column1=(TextView)findViewById(R.id.column1);
         TextView column2=(TextView)findViewById(R.id.column2);
        /*populateList();
        listviewAdapter adapter = new listviewAdapter(this, list);
        lview.setAdapter(adapter);*/

     SharedPreferences myprefs1= getSharedPreferences("user", MODE_WORLD_READABLE);
     upid= myprefs1.getString("id",null);
     String group_id=myprefs1.getString("group_id", null);
     int groupid = Integer.parseInt(group_id);
     System.out.println("group id"+group_id);
     System.out.println("up id"+upid);

     if(groupid==1)
     {
         heading.setText("REQUEST CARD LIST");
         column1.setText("ReqID");
         column2.setText("Requested Date");
         System.out.println("1");
         card_type="Requestcard";
         vacanyid_seat="vacancycard_id";
          System.out.println("card_type"+card_type);

     }
     else
     {
         heading.setText("VACANCY CARD LIST");
         column1.setText("VacID");
         column2.setText("Vacant Date");
         System.out.println("2");
         card_type="vacancycards" ;
         vacanyid_seat="seats_available";
         System.out.println("card_type"+card_type);
     }
     HttpClient client = new DefaultHttpClient();
        HttpConnectionParams.setConnectionTimeout(client.getParams(), 10000); //Timeout Limit
        HttpResponse response;
        //String url= "http://10.0.2.2/Mebuddie/logins/login11";

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("upid", upid));
        nameValuePairs.add(new BasicNameValuePair("cardtype", card_type));

             try{
                 HttpClient httpclient = new DefaultHttpClient();
                   HttpPost httppost = new HttpPost("http://10.0.2.2/Mebuddie/userprofiles/cardsJson");

                   httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs, HTTP.UTF_8));
                    response = httpclient.execute(httppost);
                    StringBuilder builder = new StringBuilder();
                 BufferedReader   reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));

                    for (String line = null; (line = reader.readLine()) != null;) {
                        builder.append(line).append("\n");
                        System.out.println("builderrrrrrrr"+builder.toString());
                    }

                 JSONTokener tokener = new JSONTokener(builder.toString());

                  JSONArray finalResult = new JSONArray(tokener);
                   finalresultlengt1=finalResult.length();
                   System.out.println("tokener"+tokener.toString());
              System.out.println("final result length"+finalresultlengt1);
                    Object type = new Object();
                    if (finalResult.length() == 0 && type.equals("both")) 
                    {
                        System.out.println("null value in the json array");

                    }
                    else {
                        int i,j;

                        outputString= new String[finalresultlengt1][8];
                         JSONObject json_data = new JSONObject();

                            for (i = 0; i < finalresultlengt1; i++) 
                            {

                                 json_data = finalResult.getJSONObject(i);
                                 JSONObject menuObject = json_data.getJSONObject(card_type);
                                  upid=   menuObject.getString("id");   
                                  travel_date=   menuObject.getString("travel_date");   
                                  travel_from=   menuObject.getString("travel_from");   
                                  travel_to=   menuObject.getString("travel_to");   
                                  travel_start_time=   menuObject.getString("travel_start_time");   
                                  ampm=   menuObject.getString("ampm"); 

                                  vacancycard_id=   menuObject.getString(vacanyid_seat);    

                                // System.out.println("value of i"+i);

                             //   System.out.println("json dataa"+json_data.names().toString());

                            /* System.out.println(upid);
                              System.out.println(travel_date);
                              System.out.println(travel_from);
                              System.out.println(travel_to);
                              System.out.println(travel_start_time);
                              System.out.println(ampm);
                              System.out.println(vacancycard_id);

                              outputString[i][j]=upid;
                                         System.out.println("value of j after upid"+j);
                                        outputString[i][j]=travel_date;
                                        outputString[i][j]=travel_from;
                                        outputString[i][j]=travel_to;
                                        outputString[i][j]=travel_start_time;
                                        outputString[i][j]=ampm;
                                        outputString[i][j]=vacancycard_id;

                                       System.out.println(outputString[i][j]); 

                              */

                                        outputString[i][0]=upid;
                                        // System.out.println("value of j after upid"+j);
                                        outputString[i][1]=travel_date;
                                        outputString[i][2]=travel_from;
                                        outputString[i][3]=travel_to;
                                        outputString[i][4]=travel_start_time;
                                        outputString[i][5]=ampm;
                                        outputString[i][6]=vacancycard_id;

                                      // System.out.println(i+outputString[i][5]); 

                             //  System.out.println(outputString[i][j]);   

                            }

                               System.out.println("length of mdialoug"+outputString.length);
                               System.out.println("value at 5th position "+outputString[0][5]); 

                          //    Toast.makeText(RequestcardList.this,result,Toast.LENGTH_LONG).show();
                              int a,b;
                            list = new ArrayList<HashMap<String,String>>();
                            for ( a=0; a<outputString.length;a++)
                            {

                                    HashMap<String,String> temp1 = new HashMap<String,String>();
                                        temp1.put(FIRST_COLUMN,outputString[a][0]);
                                        temp1.put(SECOND_COLUMN, outputString[a][1]);
                                        temp1.put(THIRD_COLUMN, outputString[a][4]);
                                        temp1.put(FOURTH_COLUMN, outputString[a][5]);
                                    list.add(temp1);
                                     //System.out.println("outputString"+ outputString[a][b]);
                            }

                            listviewAdapter adapter = new listviewAdapter(this, list);
                            lview.setAdapter(adapter);
                          lview.setOnItemClickListener(new OnItemClickListener() {

                            @Override
                            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

                                 HashMap<String, String> map = (HashMap<String, String>) parent.getItemAtPosition(position);

                                  String selectedId = map.get(FIRST_COLUMN);
                                 String two = map.get(FOURTH_COLUMN);

                                long s=lview.getItemIdAtPosition(position);
                                System.out.println(s);
                                int pos=(int)s;

                            String reqid=outputString[pos][0];
                            String tdate=outputString[pos][1];
                            String tfrom=outputString[pos][2];
                            String tTo=  outputString[pos][3];
                            String stime=outputString[pos][4];
                            String time= outputString[pos][5];
                            String vid=  outputString[pos][6];

                           Intent i=new Intent( RequestcardList.this,EditDeleteReqCardList.class);

                           Bundle reqdetails = new Bundle();
                            reqdetails.putString("reqid", reqid);
                            reqdetails.putString("tdate", tdate);
                            reqdetails.putString("tfrom", tfrom);
                            reqdetails.putString("tTo", tTo);
                            reqdetails.putString("stime",stime);
                            reqdetails.putString("time", time);
                            reqdetails.putString("vid", vid);
                           reqdetails.putString("cardtype", card_type);

                         i.putExtras(reqdetails);
                        startChildActivity("EditDeleteReqCardList", i);

                            Toast.makeText(RequestcardList.this,two,Toast.LENGTH_SHORT).show();

                            //startActivity(i);

                            }
                        });

                    }

             }

         catch (Exception e) {

      Toast.makeText(RequestcardList.this,"no card presents",Toast.LENGTH_LONG).show();
                 e.printStackTrace();
                    }

}

@Override
  public void finishFromChild(Activity child) {
      LocalActivityManager manager = getLocalActivityManager();
      int index = mIdList.size()-1;

      if (index < 1) {
              finish();
              return;
          }

          manager.destroyActivity(mIdList.get(index), true);
          mIdList.remove(index);
          index--;
          String lastId = mIdList.get(index);
          Intent lastIntent = manager.getActivity(lastId).getIntent();
          Window newWindow = manager.startActivity(lastId, lastIntent);
          setContentView(newWindow.getDecorView());
  }

public void startChildActivity(String Id, Intent intent) {     
      Window window = getLocalActivityManager().startActivity(Id,intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
      if (window != null) {
          mIdList.add(Id);
          setContentView(window.getDecorView()); 
      }    
  }

@Override
  public boolean onKeyDown(int keyCode, KeyEvent event) {
      if (keyCode == KeyEvent.KEYCODE_BACK) {
          //preventing default implementation previous to android.os.Build.VERSION_CODES.ECLAIR
          return true;
      }
      return super.onKeyDown(keyCode, event);
  }
@Override
  public boolean onKeyUp(int keyCode, KeyEvent event) {
      if (keyCode == KeyEvent.KEYCODE_BACK) {
          onBackPressed();
          return true;
      }
      return super.onKeyUp(keyCode, event);
  }

 @Override
  public void  onBackPressed  () {
      int length = mIdList.size();
      if ( length >=1) {
          Activity current = getLocalActivityManager().getActivity(mIdList.get(length-1));
          current.finish();
      }
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T11:31:19.783

采用 `final Dialog dialog = new Dialog(getParent());`

# jquery - jQuery：定位 div 的下一个实例

> ID：15431190
> 
> 赞同：0
> 
> 时间：2013-03-15T11:25:43.517
> 
> 标签：jquery, html, jquery-masonry, next

我试图在点击函数中定位某个 div 的下一个实例。
这是一个 jsfiddle：http: [//jsfiddle.net/wUEkE/1/](http://jsfiddle.net/wUEkE/1/)
jQuery：

```
$(document).ready(function(){

 $(".listings-item").click(function() {
 $('.hidden').next($('.hidden').removeClass('hidden').addClass('preview-listing').hide().delay(400).fadeIn("slow"));
 $('#listings-wrap').masonry('reload');
 });

}); 
```

所以我想要实现的是通过单击一个`.listing-item`将针对下一个实例`.hidden`并更改类以将其显示在砌体网格中。但目前，在点击时，两个实例`.hidden`都被显示，而不仅仅是相关的下一个实例。我不明白为什么会这样。我很快就会将内容附加到这个相关的 div 中，但现在我只是想让它工作，但我做不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:39:57.493

为此，您可以使用该[`nextAll`](http://api.jquery.com/nextAll/)函数，该函数返回所有下一个兄弟姐妹。如果您为第一个隐藏元素添加一个选择器，那么您将获得与`div`单击的元素相关的下一个隐藏元素。

像这样：

```
$(this).nextAll('.hidden:first') 
```

在您的示例中充分使用如下所示：

```
$(".listings-item").click(function() {
    $(this).nextAll('.hidden:first').removeClass('hidden').addClass('preview-listing').hide().delay(400).fadeIn("slow");
    $('#listings-wrap').masonry('reload');
}); 
```

[这是您更新的示例](http://jsfiddle.net/musefan/wUEkE/6/)

# java - 找不到 Spring MVC 带注释的控制器

> ID：15431194
> 
> 赞同：0
> 
> 时间：2013-03-15T11:26:01.223
> 
> 标签：java, spring, spring-mvc

我有一个非常烦人的问题......我没有定义控制器处理程序映射器，因此我正在使用`DefaultAnnotationHandlerMapping`该类。我的问题似乎与控制器 bean 名称映射到控制器类有关，例如

对调度程序的传入请求 -> index.htm

使用以下控制器类：

```
@Controller
public class IndexController { 
    @RequestMapping(value = "/index.htm", method = RequestMethod.GET)
    public String loginForm(ModelMap model) {
        return "index";
    }  
} 
```

应该将 index.htm 映射到 indexController bean，然后映射到 IndexController 类。我可以从日志中看到 Spring 已将 bean 注册到容器中，但是我收到以下错误：

```
org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [xxx.controller.IndexController] 
```

我确定该类存在（因为 bean 名称是从它派生的）。

奇怪的是，如果我将控制器命名为与 bean 名称相同的名称（例如 indexController），一切都很好！（显然我不希望我的班级有一个小写的首字母！！）

请注意，我在 dispatcher-servlet.xml 中使用了以下内容：

```
<mvc:annotation-driven />
<context:component-scan base-package="xxx" /> 
```

爱

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:04:46.997

这个错误通常意味着你的类没有被捆绑在war文件中。解压缩war文件并检查您的类是否正确包含。

我怀疑您在某个时候成功捆绑了“indexController.class”，但之前的打包尝试失败了。你还没有说明你是如何打包你的应用程序的，如果你正在使用其中之一，请检查你的 Maven/Ant 配置。请注意在 IDE 和构建脚本之间共享构建目录，因为它们有时会相互冲突。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T11:56:42.147

我建议你下载[STS](http://www.springsource.org/downloads/sts-ggts)并创建新的 Spring MVC 项目模板，看看 Spring 3 MVC 是如何工作的。

# sql-server - SQL Server 如何链接这些表？

> ID：15431199
> 
> 赞同：0
> 
> 时间：2013-03-15T11:26:24.810
> 
> 标签：sql-server

我正在尝试从两个不太匹配的表中获取信息

在`table1`我有这样的销售数据：

```
OrderNo   Qty  Price 
--------------------
12345      2    123 
```

在`table2`我有与同一订单相关的数据中，但不是一条数量为两个的行，而是两条单独的行：

```
OrderNo   Line   Qty   SerialNo
--------------------------------
12345      1      1      6789
12345      2      1      6790 
```

我想看到的是两个表中的信息 - 我有定价数据`Table1`和序列号，`Table2`我正在尝试创建一个报告，显示总订单的定价以及每个单独行的序列号。

到目前为止，使用左连接，我只能得到带有重复记录的数据，上面的示例返回四行，每个序列号两行。

对于上面的例子，我想看到的是三行；一个标题行包含两行的总价格`table1`（带有 null `serialNo`）和另外两行`Table2`带有 Nulls 的价格，这可能吗？

这是一个例子....

ADEPT.dbo.SM_MOVEMENTS 是我的 table1 - SAM.dbo.productspurchased 是 table2

```
 ` select

Adept.dbo.STK_MOVEMENTS.SM_REFERENCE,
SAM.dbo.productspurchased.adeptref,
Adept.dbo.STK_MOVEMENTS.SM_costprice,
Adept.dbo.STK_MOVEMENTS.SM_Quantity,
Adept.dbo.STK_MOVEMENTS.SM_Stock_code,
SAM.dbo.productspurchased.fullproductcode,
SAM.dbo.productspurchased.SerialNo

from

adept.dbo.STK_MOVEMENTS left join SAM.dbo.productspurchased on
Adept.dbo.STK_MOVEMENTS.SM_REFERENCE COLLATE sql_latin1_general_cp1_ci_as = SAM.dbo.productspurchased.adeptref COLLATE sql_latin1_general_cp1_ci_as

where 

SM_REFERENCE = '184913'` 
```

对于此示例，订单 184913 在 ADEPT 中的数量为 3，在 SAM 中的数量为 3 行。

我得到以下结果...

```
SM_REFERENCE    adeptref    SM_costprice    SM_Quantity SM_Stock_code   fullproductcode SerialNo
184913  184913  89.72   1   I-EN-M-SOC  I-EN-M-SOC    2071639819 | PRODUCT KEY: LBB6V-UKJ3D-NC6EN-3G3C3-RQJQH
184913  184913  89.72   1   I-EN-M-SOC  I-EN-M-SOC    2071639819 | PRODUCT KEY: LBB6V-UKJ3D-NC6EN-3G3C3-RQJQH
184913  184913  89.72   1   I-EN-M-SOC  I-EN-M-SOC    2071639819 | PRODUCT KEY: LBB6V-UKJ3D-NC6EN-3G3C3-RQJQH
184913  184913  89.72   1   I-EN-M-SOC  I-EN-M-SOC  Serial Number:  2071639820 | Product Key: SJVBS-GJ7J5-8VP4H-9RQPP-R6RWN
184913  184913  89.72   1   I-EN-M-SOC  I-EN-M-SOC  Serial Number:  2071639820 | Product Key: SJVBS-GJ7J5-8VP4H-9RQPP-R6RWN
184913  184913  89.72   1   I-EN-M-SOC  I-EN-M-SOC  Serial Number:  2071639820 | Product Key: SJVBS-GJ7J5-8VP4H-9RQPP-R6RWN
184913  184913  89.72   1   I-EN-M-SOC  I-EN-M-SOC  Serial Number:  2071639819 | Product Key: LBB6V-UKJ3D-NC6EN-3G3C3-RQJQH
184913  184913  89.72   1   I-EN-M-SOC  I-EN-M-SOC  Serial Number:  2071639819 | Product Key: LBB6V-UKJ3D-NC6EN-3G3C3-RQJQH
184913  184913  89.72   1   I-EN-M-SOC  I-EN-M-SOC  Serial Number:  2071639819 | Product Key: LBB6V-UKJ3D-NC6EN-3G3C3-RQJQH 
```

如您所见，总共有九行。

我不是很擅长加入！

# git - 自动将新的 Git 分支添加到 Trac

> ID：15431202
> 
> 赞同：0
> 
> 时间：2013-03-15T11:26:29.040
> 
> 标签：git, trac

我如何告诉 Trac 新添加的 Git 分支？由于谈论 Git 会很快让人感到困惑，这里有一个具体的例子：假设我有一个“中央”Git 服务器 foo.example.com，我的 Trac 安装导出，并且在某个主机上我：

```
$ git clone git@foo.example.com:/path/to/repo.git
$ cd repo
$ git checkout -b test_branch
$ git push -u origin test_branch 
```

我现在在中央服务器上有一个名为“test_branch”的新分支，但无法从 Trac 访问。我怎样才能 1）使其可访问（例如在“访问”下拉框下）和 2）使任何新分支自动发生这种情况？

更新：也许我应该提到 Trac 导出的存储库不是“中央存储库”。它归另一个用户所有，当前网络服务器用户无权访问。相反，Web 服务器用户拥有并导出了一个单独的存储库。不过，中央存储库和 Web 服务器恰好位于同一台机器上。

广播电台

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:33:05.857

在权威的 wiki 文档中阅读有关[Trac 存储库管理的信息。](http://trac.edgewall.org/wiki/TracRepositoryAdmin)

在给定路径中肯定没有像自动发现存储库这样的事情。如果您不喜欢通过管理员 Web-UI 执行此操作，您可以从终端使用 trac-admin 调用来添加新的存储库。并确保为每个存储库[获得正确的存储库同步。](http://trac.edgewall.org/wiki/TracRepositoryAdmin#ExplicitSync)

如果这是一个重复的任务，您可能需要编写一个简单的 Python 脚本来更有效地完成这一切。

# java - 使用 SSH 从 Java 应用程序连接到 Hadoop

> ID：15431207
> 
> 赞同：1
> 
> 时间：2013-03-15T11:26:39.707
> 
> 标签：java, scala, hadoop, ssh, hdfs

我正在尝试连接到仅通过 HDFS 无法访问的远程 hadoop 集群。现在它正在以这种方式使用：用户通过 SSH 连接到 Jump box（例如 ssh user@somejumboxhost.com），然后从 jump box 服务器我们也使用 ssh 连接到 hadoop（例如 ssh user@realhadoopcluster1.com）。我要做的是使用 HDFS 客户端从我的 Scala/Java 应用程序访问文件。现在我感觉就像在 Matrix 中一样——“我必须更深入”并且不知道如何访问服务器。

可能有人有类似的经历？现在我正在尝试从我的应用程序使用 SSH 客户端连接到第一台服务器，但是我不知道如何调用 HDFS 客户端。

任何想法将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T06:43:13.610

我能想到这样的事情。有“ganymed-ssh2”api 可以帮助您使用 ssh 连接到某个服务器并从那里运行 unix 命令。使用它，您可以连接到您的 jumo box。

从那里你可以运行命令“ssh user@realhadoopcluster1.com hadoop fs somthing”

因为我们可以像这样使用 ssh 运行命令。

从您的跳转框中，为您的 hadoopcluster 机器设置一个无密码的 ssh。或者您可以使用带密码的 sshpass。

您可以访问以下链接以检查如何使用此 api：

[http://souravgulati.webs.com/apps/forums/topics/show/8116298-how-to-execute-unix-command-from-java-](http://souravgulati.webs.com/apps/forums/topics/show/8116298-how-to-execute-unix-command-from-java-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T14:21:21.707

Hadoop 是用 Java 实现的，因此您可以直接从您的应用程序运行 Hadoop 集群。如果是远程集群，请使用 Java RMI。你试图做的这个额外的管道是没有意义的。

# .net - WIX 相对路径最终太长

> ID：15431210
> 
> 赞同：3
> 
> 时间：2013-03-15T11:26:46.187
> 
> 标签：.net, windows, filesystems, wix

我收到错误`light.exe`，表明在我的安装项目中定位文件之一时遇到问题。结果在有问题的 PC 上，我使用的相对路径超过 260 个字符。目前 Wix 的设置如下：

```
<File Id='FoobarEXE' Name='FoobarAppl10.exe' DiskId='1' Source='..\..\Path\To\Built\Executable\FoobarAppl10.exe' KeyPath='yes'/> 
```

我遇到的问题是 Wix 安装项目位于文件夹中，`D:\Path\To\ProjectFolder\WixInstaller\WixInstallerProject`并且`\Path\To\Built\Executable\FoobarAppl10.exe`存在于该`D:\Path\To\ProjectFolder`文件夹下。当`light.exe`尝试解析路径时，最终结果是`D:\Path\To\ProjectFolder\WixInstaller\WixInstallerProject\..\..\Path\To\Built\Executable\FoobarAppl10.exe`在我的特定情况下恰好超过 260 个字符。exe 的正确绝对路径`D:\Path\To\ProjectFolder\Path\To\Built\Executable\FoobarAppl10.exe`在我的情况下将是 260 个字符以下，但由于不必要地包含`WixInstaller\WixInstallerProject\..\..\`了路径的一部分，所以它超过了这个限制。

有什么方法可以`light.exe`解决`..\..\Path\To\Built\Executable\FoobarAppl10.exe`，`D:\Path\To\ProjectFolder\Path\To\Built\Executable\FoobarAppl10.exe`而不是`D:\Path\To\ProjectFolder\WixInstaller\WixInstallerProject\..\..\Path\To\Built\Executable\FoobarAppl10.exe`？

我很欣赏这不是 Wix 本身的限制，更多的是构建 Wix 设计使用的 API 的方式的潜在限制，但是我需要一个解决问题的方法，让我可以在我的`.wxs`文件中解决这个问题。是的，缩短路径会起作用，但问题并不在于路径太长（因为它不是），而是相对路径的语法添加了不必要的中间部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T14:33:39.710

今天没有任何东西`light.exe`可以自定义评估路径，以便 Path.Combine() 在整个内容超过 260 个字符时不会阻塞。正如您所注意到的，这是 .NET Framework 中的一个令人沮丧的限制（Windows Installer API 也会阻塞）。

要解决此问题，我建议您查看`bind paths`. 您可以将代码更改为：

```
<File Id='FoobarEXE' Source='!(bindpath.FooBarApp)\FoobarAppl10.exe' /> 
```

在命令行上执行以下操作：

```
light.exe -b FooBarApp=D:\Path\To\ProjectFolder\Path\To\Built\Executable 
```

这将创建最短路径。您也可以将相对路径从命令行移动到`File/@Source`（例如，移动`Built\Executable`路径的一部分）。我想你会发现它非常灵活。

# angularjs - ng-switch 和 ng-repeat 干扰同一元素

> ID：15431212
> 
> 赞同：12
> 
> 时间：2013-03-15T11:26:51.037
> 
> 标签：angularjs, ng-repeat, ng-switch

我在 Angular 中遇到了我没想到的行为，这篇文章的目的是找出这是一个错误还是有意为之，并可能解释为什么它是有意的。

首先看到这个 Plunkr：[http](http://plnkr.co/edit/CB7k9r?p=preview) ://plnkr.co/edit/CB7k9r?p=preview 。在示例中，我创建了一个名为 array 的数组，其中包含三个对象条目。此外，我根据输入字段的内容（称为切换）创建了一个 ng-switch。当 toggle 的值为 1 时，它应该打印数组中所有以“1”为前缀的对象名称，否则以“other”为前缀。

这不能按预期工作，并显示错误：

```
Error: Argument '?' is required at assertArg 
```

然而，相同的示例重写（[http://plnkr.co/edit/68Mfux?p=preview](http://plnkr.co/edit/68Mfux?p=preview)）在列表周围有一个额外的 div，ng-switch 移动到这个 div 和 ng-switch-when 从 li 移动到ul（将 ng-repeat 和 ng-switch-when 分开）确实按预期工作。

有人可以解释这是为什么吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-15T13:46:55.453

这是“有意的”，因为它是 angular 如何处理 ng-repeat 的产物。本质上，标记的多个副本被克隆（ng-repeat 中的标记用作模板）并为您正在迭代的每个元素单独编译。因此，angular 基本上是在编译 3`<li ng-switch-when='1' ....>`和 3 `<li ng-switch-default ....>`，但是这样做是脱离上下文的——没有 ng-switch-on 元素可以比较。

您可以通过检查生成的标记来看到这种情况：

```
<ul ng-switch="" on="toggle">  
  <!-- ngRepeat: entry in array -->
  <!-- ngSwitchWhen: 1 -->
  <!-- ngSwitchWhen: 1 -->
  <!-- ngSwitchWhen: 1 -->
  <!-- ngRepeat: entry in array -->
  <!-- ngSwitchDefault:  -->
  <!-- ngSwitchDefault:  -->
  <!-- ngSwitchDefault:  -->        
</ul> 
```

这两个指令 - ng-repeat 和 ng-switch - 都应该小心处理，因为它们（与 ng-show 或 ng-hide 不同）严重影响结构。第二个（工作）Plunker 是要走的路 - 只在 ng-switch 逻辑之后（结构方面，内部）使用指令。

# android - 使用 Flex 移动代码将提示文本传递给 Android 应用程序

> ID：15431224
> 
> 赞同：0
> 
> 时间：2013-03-15T11:27:26.087
> 
> 标签：android, apache-flex, mobile, tablet

我有一个 Flex 移动应用程序，它在 7" 平板电脑上以横向模式运行。当我使用 Flex 代码调用默认键盘时，键盘隐藏了整个屏幕，无法分辨用户正在输入数据的字段在没有编写我自己的自定义键盘的情况下，有人知道是否有办法将空文本发送到键盘，以便用户可以知道他们正在为哪个字段输入数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:25:56.613

这应该使用`EditText`视图的提示来工作。像这样在你所有的 s 上设置它`EditText`：

```
<EditText
  ...
  android:hint="Phone Number"
  .... /> 
```

我已经在三星 Galaxy Note II 和三星 Galaxy S3 上进行过这项工作。当键盘全屏且字段为空时，输入字段应显示提示。

# php - 检查产品密钥是否已经存在于数据库中？

> ID：15431238
> 
> 赞同：-1
> 
> 时间：2013-03-15T11:28:08.290
> 
> 标签：php, html, database

我遇到了一段代码的问题。我有一个将信息提交到 MySQL 数据库的表单。我已经在数据库中保存了产品密钥。我想检查数据库中是否存在密钥。我正在使用以下代码：

```
 $namecheck = mysql_query("SELECT key FROM license_key WHERE key ='$userEnteredProductKey'");
    $count = mysql_num_rows($namecheck);        
    if($count)
        {
            die("FAILURE - <b>$product_name</b> has <b>NOT</b> been added because the reference number already exists.");
        } 
```

如果我运行程序，它会给我错误：

```
 Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given in code. 
```

希望这是有道理的，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:31:15.043

试试这个 ：

```
$namecheck = mysql_query("SELECT `key` FROM license_key WHERE `key` ='$userEnteredProductKey'"); 
```

`key`是mysql中的保留关键字，所以最好不要使用它或将它包装在side `

参考：[KEY 关键字是什么意思？](https://stackoverflow.com/questions/924265/what-does-the-key-keyword-mean)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:34:45.323

使用这个 if($count) 试试这个 if($count == 1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:43:43.837

像这样使用

```
$namecheck = mysql_query("SELECT `key` FROM license_key WHERE `key` ='".$userEnteredProductKey."'"); 
```

# sql - 错误原因 DataTime-varchar(10)

> ID：15431239
> 
> 赞同：1
> 
> 时间：2013-03-15T11:28:09.227
> 
> 标签：sql, sql-server-2005

我有一个数据库表，其中有一列`OccurDate`datatype `DateTime`。

数据是这样的...

```
06-03-2013 06:47:49
06-03-2013 16:47:49 
```

我必须找到 InTime、OutTime、WorkDuration。

我正在使用这样的查询

```
Min(convert(varchar(10),OccurDateTime,108)) AS InTime,
Max(convert(varchar(10),OccurDateTime,108)) AS OutTime, 
```

但我在计算时遇到`workDuration`了问题，因为

```
workDuration = 16:30:00 - InTime    //16:30:00 means 4:30 pm 
```

而银泰现在是`varchar(10)`这样，它不能减去`Datetime`......

我正在使用的查询..

```
SELECT UserID AS EmpCode,FirstName,LastName,Department,convert(varchar(10),OccurDateTime,103) AS Date,Min(convert(varchar(10),OccurDateTime,108)) AS InTime,
Max(convert(DateTime,OccurDateTime,108)) AS OutTime,
convert(varchar(10),(Max(convert(DateTime,OccurDateTime,108))- Min(convert(DateTime,OccurDateTime,108))),108) as Work,

FROM TTransactionLog1
WHERE convert(varchar(10),OccurDateTime,103) = '14/03/2013'
GROUP BY UserID, FirstName, convert(varchar(10),OccurDateTime,103),LastName,Department 
```

所以你们有什么想法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:03:18.323

您应该寻找的`Min/Max Dates` **不是**`Min/Max of varchar`. 因此，在将它们转换为 varchar 之前检查 Dates 并将它们转换为所需格式的最终​​结果。

此外，您必须使用`Datediff`函数来获取*`difference of Max and Min dates`*，当您将字符串作为日期传递时，请使用`ISO format`( *`'yyyymmdd'`*)，即*`NOT culture specific`*. 否则，您的查询可能无法在具有不同文化设置的服务器中工作。

我认为以下查询应该有效：

```
SELECT UserID AS EmpCode, FirstName, LastName, Department,
       --Convert(varchar(10), OccurDateTime, 103) AS  Date,
       Convert(varchar(10), Min(OccurDateTime), 108) AS InTime,
       Convert(varchar(10), Max(OccurDateTime), 108) AS OutTime,
       Convert(varchar(10), 
           Datediff(day,Min(OccurDateTime), Max(OccurDateTime)),108) as Work
FROM TTransactionLog1
WHERE OccurDateTime  = '20130314' --Note: ISO format 
GROUP BY UserID, FirstName, --OccurDateTime, 
        LastName, Department 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:00:19.427

```
WITH A AS (SELECT CONVERT(DATETIME, '16:25:00') InTime)
SELECT
CONVERT(varchar(10),CONVERT(DATETIME, '16:30:00') - InTime,108) workDuration
FROM A 
```

**输出**：我相信双重转换会导致`00:05:00`
你*先*`datetime`计算后计算*。**`convert``varchar`*

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:00:04.077

如果要计算两个日期时间之间的间隔，请使用 datediff()。**

# ms-access - ExecCmd 在调用其他函数后工作但并非没有

> ID：15431244
> 
> 赞同：0
> 
> 时间：2013-03-15T11:28:17.940
> 
> 标签：ms-access

我的代码有问题，我不知道出了什么问题以及如何解决它。我正在使用 Access 2007。我有以下函数 ExecCmd，其目的是执行参数中的 cmdline，并等到执行完成后将控制权交还给 Access。当我调用此函数时，它返回 2 而不是 0 的退出代码，并且我要执行的批处理文件未执行。

```
Private Type STARTUPINFO
      cb As Long
      lpReserved As String
      lpDesktop As String
      lpTitle As String
      dwX As Long
      dwY As Long
      dwXSize As Long
      dwYSize As Long
      dwXCountChars As Long
      dwYCountChars As Long
      dwFillAttribute As Long
      dwFlags As Long
      wShowWindow As Integer
      cbReserved2 As Integer
      lpReserved2 As Long
      hStdInput As Long
      hStdOutput As Long
      hStdError As Long
   End Type

   Private Type PROCESS_INFORMATION
      hProcess As Long
      hThread As Long
      dwProcessID As Long
      dwThreadID As Long
   End Type

   Private Declare Function WaitForSingleObject Lib "kernel32" (ByVal _
      hHandle As Long, ByVal dwMilliseconds As Long) As Long

   Private Declare Function CreateProcessA Lib "kernel32" (ByVal _
      lpApplicationName As String, ByVal lpCommandLine As String, ByVal _
      lpProcessAttributes As Long, ByVal lpThreadAttributes As Long, _
      ByVal bInheritHandles As Long, ByVal dwCreationFlags As Long, _
      ByVal lpEnvironment As Long, ByVal lpCurrentDirectory As String, _
      lpStartupInfo As STARTUPINFO, lpProcessInformation As _
      PROCESS_INFORMATION) As Long

   Private Declare Function CloseHandle Lib "kernel32" _
      (ByVal hObject As Long) As Long

   Private Declare Function GetExitCodeProcess Lib "kernel32" _
      (ByVal hProcess As Long, lpExitCode As Long) As Long

   Private Const NORMAL_PRIORITY_CLASS = &H20&
   Private Const INFINITE = -1&
   Private Const SW_HIDE = 0
   Private Const STARTF_USESHOWWINDOW = &H1

   Public Function ExecCmd(cmdline$)

      Dim proc As PROCESS_INFORMATION
      Dim start As STARTUPINFO
      Dim Ret&
      ' Initialize the STARTUPINFO structure:
      start.cb = Len(start)
      start.dwFlags = STARTF_USESHOWWINDOW
      start.wShowWindow = SW_HIDE
      ' Start the shelled application:
      Ret& = CreateProcessA(vbNullString, cmdline$, 0&, 0&, 1&, _
         NORMAL_PRIORITY_CLASS, 0&, vbNullString, start, proc)

      ' Wait for the shelled application to finish:
         Ret& = WaitForSingleObject(proc.hProcess, INFINITE)
         Call GetExitCodeProcess(proc.hProcess, Ret&)
         Call CloseHandle(proc.hThread)
         Call CloseHandle(proc.hProcess)
         ExecCmd = Ret&
   End Function 
```

真正奇怪的是，如果我在调用 ExecCmd 之前调用以下函数 OuvrirUnFichier 一切正常。

```
 ' Déclaration de l'API
Private Declare Sub PathStripPath Lib "shlwapi.dll" Alias "PathStripPathA" (ByVal pszPath As String)
Private Declare Function GetOpenFileName Lib "comdlg32.dll" Alias _
                   "GetOpenFileNameA" (pOpenfilename As OPENFILENAME) As Long
 ' Structure du fichier
Private Type OPENFILENAME
    lStructSize As Long
    hwndOwner As Long
    hInstance As Long
    lpstrFilter As String
    lpstrCustomFilter As String
    nMaxCustFilter As Long
    nFilterIndex As Long
    lpstrFile As String
    nMaxFile As Long
    lpstrFileTitle As String
    nMaxFileTitle As Long
    lpstrInitialDir As String
    lpstrTitle As String
    flags As Long
    nFileOffset As Integer
    nFileExtension As Integer
    lpstrDefExt As String
    lCustData As Long
    lpfnHook As Long
    lpTemplateName As String
End Type
 ' Constantes
Private Const OFN_READONLY = &H1
Private Const OFN_OVERWRITEPROMPT = &H2
Private Const OFN_HIDEREADONLY = &H4
Private Const OFN_NOCHANGEDIR = &H8
Private Const OFN_SHOWHELP = &H10
Private Const OFN_ENABLEHOOK = &H20
Private Const OFN_ENABLETEMPLATE = &H40
Private Const OFN_ENABLETEMPLATEHANDLE = &H80
Private Const OFN_NOVALIDATE = &H100
Private Const OFN_ALLOWMULTISELECT = &H200
Private Const OFN_EXTENSIONDIFFERENT = &H400
Private Const OFN_PATHMUSTEXIST = &H800
Private Const OFN_FILEMUSTEXIST = &H1000
Private Const OFN_CREATEPROMPT = &H2000
Private Const OFN_SHAREAWARE = &H4000
Private Const OFN_NOREADONLYRETURN = &H8000
Private Const OFN_NOTESTFILECREATE = &H10000

Private Const OFN_SHAREFALLTHROUGH = 2
Private Const OFN_SHARENOWARN = 1
Private Const OFN_SHAREWARN = 0

Public Function OuvrirUnFichier(Handle As Long, _
                                titre As String, _
                                TypeRetour As Byte, _
                                Optional TitreFiltre As String, _
                                Optional TypeFichier As String, _
                                Optional RepParDefaut As String) As String
 ' OuvrirUnFichier est la fonction à utiliser dans votre formulaire pour ouvrir _
 ' la boîte de dialogue de sélection d'un fichier.
 ' Explication des paramètres
    ' Handle = le handle de la fenêtre
    ' Titre = titre de la boîte de dialogue
    ' TypeRetour (définit la valeur, de type String, renvoyée par la fonction)
        ' 1 = chemin complet + nom du fichier
        ' 2 = nom fichier seulement
    ' TitreFiltre = titre du filtre
        ' Exemple: fichier Access
        ' N'utilisez pas cet argument si vous ne voulez spécifier aucun filtre
    ' TypeFichier = extention du fichier (sans le .)
        ' Exemple: MDB
        ' N'utilisez pas cet argument si vous ne voulez spécifier aucun filtre
    ' RepParDefaut = répertoire d'ouverture par défaut
        ' Exemple: C:\windows\system32
        ' Si vous laissez l'argument vide, par défaut il se place dans le répertoire de votre application

Dim StructFile As OPENFILENAME
Dim sFiltre As String

 ' Construction du filtre en fonction des arguments spécifiés
If Len(TitreFiltre) > 0 And Len(TypeFichier) > 0 Then
  sFiltre = TitreFiltre & " (" & TypeFichier & ")" & Chr$(0) & "*." & TypeFichier & Chr$(0)
End If
sFiltre = sFiltre & "Tous (*.*)" & Chr$(0) & "*.*" & Chr$(0)

 ' Configuration de la boîte de dialogue
  With StructFile
    .lStructSize = Len(StructFile) ' Initialisation de la grosseur de la structure
    .hwndOwner = Handle ' Identification du handle de la fenêtre
    .lpstrFilter = sFiltre ' Application du filtre
    .lpstrFile = String$(254, vbNullChar) ' Initialisation du fichier '0' x 254
    .nMaxFile = 254 ' Taille maximale du fichier
    .lpstrFileTitle = String$(254, vbNullChar) ' Initialisation du nom du fichier '0' x 254
    .nMaxFileTitle = 254  ' Taille maximale du nom du fichier
    .lpstrTitle = titre ' Titre de la boîte de dialogue
    .flags = OFN_HIDEREADONLY  ' Option de la boite de dialogue
    If ((IsNull(RepParDefaut)) Or (RepParDefaut = "")) Then
        RepParDefaut = CurrentDb.Name
        PathStripPath (RepParDefaut)
        .lpstrInitialDir = Left(CurrentDb.Name, Len(CurrentDb.Name) - Len(Mid$(RepParDefaut, 1, _
InStr(1, RepParDefaut, vbNullChar) - 1)))
        Else: .lpstrInitialDir = RepParDefaut
    End If
  End With
If (GetOpenFileName(StructFile)) Then ' Si un fichier est sélectionné
    Select Case TypeRetour
      Case 1: OuvrirUnFichier = Trim$(Left(StructFile.lpstrFile, InStr(1, StructFile.lpstrFile, vbNullChar) - 1))
      Case 2: OuvrirUnFichier = Trim$(Left(StructFile.lpstrFileTitle, InStr(1, StructFile.lpstrFileTitle, vbNullChar) - 1))
    End Select
  End If
End Function 
```

有谁知道问题出在哪里？发生了什么或如何解决？是什么让 OuvrirUnFichier 解决了这个问题？非常感谢

我尝试使用 calc.exe 并且确实有效，但我想做的是执行我使用此代码创建的批处理文件：

```
Open vPath & "\FtpComm.txt" For Output As fNum
Connexion (fNum) 'function that prints lines to connect to FTP server
Print #fNum, "put " & vFile & " Temp.mdb" 'upload local filename to server file 
Deconnexion (fNum) 'function that prints lines to disconnect from FTP server
Close fNum
Open vPath & "\doFtp.bat" For Output As batFileHandle
Print #batFileHandle, "ftp -s:FtpComm.txt >output.txt" '
Close batFileHandle

RetVal = ExecCmd(vPath & "\doFtp.bat") 
```

.bat 文件已正确创建，如果我手动单击它，它会执行并在使用 ExecCmd 执行它时执行我想要的操作，但它不会

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T15:26:47.787

I found the solution to my problem. Access had troubles knowing where to look for the files I created. The function OuvrirUnFichier allowed him to be in the right directory and thus to function properly. I changed the code to create the .txt and .bat files into this:

```
 Open vPath & "\FtpComm.txt" For Output As fNum
Connexion (fNum)
Print #fNum, "get " & Fichier & " " & vPath & "\Temp.mdb" 'upload local filename to server file  : LocalFile [RemoteFile] LocalFile
Deconnexion (fNum)
Close fNum
Open vPath & "\doFtp.bat" For Output As batFileHandle
Print #batFileHandle, "ftp -s:" & vPath & "\FtpComm.txt >" & vPath & "\output.txt" 'execute le fichier batch et écrit les output dans le fichier output
Close batFileHandle
RetVal = ExecCmd(vPath & "\doFtp.bat") 
```

And it now works perfectly! :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:36:49.943

我尝试`ExecCmd()`在 32 位 Vista 上使用带有 Access_2010 的函数来运行一个简单的“Hello world”批处理文件，但它所做的只是挂起 Access（即使我使用了`cmd.exe /c hello.bat`. 对于您的特殊要求，我认为使用以下`Run`方法会更好地为您服务`Wscript.Shell`：

```
Public Function myExecCmd(cmdstr As String) As Long
Dim wsh As Object
Set wsh = CreateObject("Wscript.Shell")
myExecCmd = wsh.Run(cmdstr, 1, True)
End Function 
```

此外，您的原始方法在 64 位 Access 上无法“开箱即用”（因为 32 位 API 调用），但这种方法在 32 位和 64 位版本的 Access 下都可以正常工作. 有关该`Run`方法的更多信息，请查看[此处](http://msdn.microsoft.com/en-us/library/d5fk67ky%28v=vs.84%29.aspx)。

# codeigniter - Codeigniter - Facebook 登录和注册 sing PHP SDK

> ID：15431249
> 
> 赞同：1
> 
> 时间：2013-03-15T11:28:40.810
> 
> 标签：codeigniter, facebook-php-sdk

我正在使用带有 Codeigniter 的 Facebook PHP SDK 来使用 Facebook 进行登录和注册。为此，我正在使用[本](http://kentislearningcodeigniter.com/facebook_connect)教程

我的控制器“facebooktest.php”代码是：

```
<?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Facebooktest extends CI_Controller {
    function __construct() {
        parent::__construct();
        $this->load->library('input');
        $this->load->library('session');
        $this->load->helper(array('form', 'url'));
        $this->load->library('form_validation');
        $this->load->library('security');
    }

    function Facebooktest() {
        parent::Controller();
        $cookies = $this->load->model('facebook_model');
    }
    function index() {
        $this->load->view('facebooktest/test2');
    }

    function test1() {
        $data = array();
                $data['user'] = $this->facebook_model->get_facebook_cookie();
        $this->load->view('facebooktest/test1', $data);
    }

    function test2() {    
        $data['friends'] = $this->facebook_model->get_facebook_cookie();
        $this->load->view('facebooktest/test2', $data);
    }
}
/* End of file welcome.php */
/* Location: ./application/controllers/welcome.php */
?> 
```

查看“test2.php”的代码为：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Kent is Learning CodeIgniter - Test 2</title>
</head>
<body>
<fb:login-button autologoutlink="true" 
            onlogin="window.location.reload(true);"></fb:login-button>
<div style="width:600px;"> 
<? 
if(isset($friends)){
foreach($friends as $friend){ 
?>
        <img src="http://graph.facebook.com/<?=$friend['id'];?>/picture" title="<?=$friend['name'];?>" />
<? 
    }   
}
?>
</div>
<p><?=anchor('facebook_connect/page4','Go back to page 4 of the tutorial');?></p>
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js"></script>
<script>
  FB.init({appId: '457228377680583', status: true, cookie: true, xfbml: true});
  FB.Event.subscribe('auth.sessionChange', function(response) {
    if (response.session) {
      // A user has logged in, and a new cookie has been saved
    window.location.reload(true);
    } else {
      // The user has logged out, and the cookie has been cleared
    }
  });
</script>
</body>
</html> 
```

模型“facebook_model.php”有代码：

```
<?php

class Facebook_model extends CI_Model {

    function __construct() {
        parent::__construct();
    }
    function get_facebook_cookie() {
        $app_id = '457228377680583';
        $application_secret = '01f660b73bc085f0b78cd22322556495';

        if (isset($_COOKIE['fbs_' . $app_id])) {
            echo "dfgdsf";exit;
            $args = array();
            parse_str(trim($_COOKIE['fbs_' . $app_id], '\\"'), $args);
            ksort($args);
            $payload = '';
            foreach ($args as $key => $value) {
                if ($key != 'sig') {
                    $payload .= $key . '=' . $value;
                }
            }
            if (md5($payload . $application_secret) != $args['sig']) {

                return null;
            }
            return $args;
        } else {
            return null;
        }
    }

    function getUser() {
        $cookie = $this->get_facebook_cookie();
        $user = @json_decode(file_get_contents(
                                'https://graph.facebook.com/me?access_token=' .
                                $cookie['access_token']), true);
        return $user;
    }

    function getFriendIds($include_self = TRUE) {
        $cookie = $this->get_facebook_cookie();
        $friends = @json_decode(file_get_contents(
                                'https://graph.facebook.com/me/friends?access_token=' .
                                $cookie['access_token']), true);
        $friend_ids = array();
        foreach ($friends['data'] as $friend) {
            $friend_ids[] = $friend['id'];
        }
        if ($include_self == TRUE) {
            $friend_ids[] = $cookie['uid'];
        }

        return $friend_ids;
    }

    function getFriends($include_self = TRUE) {
        $cookie = $this->get_facebook_cookie();
        print_r($cookie);

        $friends = @json_decode(file_get_contents(
                                'https://graph.facebook.com/me/friends?access_token=' .
                                $cookie['access_token']), true);

        if ($include_self == TRUE) {
            $friends['data'][] = array(
                'name' => 'You',
                'id' => $cookie['uid']
            );
        }         
        return $friends['data'];
    }

    function getFriendArray($include_self = TRUE) {
        $cookie = $this->get_facebook_cookie();
        $friendlist = @json_decode(file_get_contents(
                                'https://graph.facebook.com/me/friends?access_token=' .
                                $cookie['access_token']), true);
        $friends = array();
        foreach ($friendlist['data'] as $friend) {
              $friends[$friend['id']] = array(
                'name' => $friend['name'],
                'picture' => 'http://graph.facebook.com/'.$friend['id'].'/picture'
        );
        }
        if ($include_self == TRUE) {
            $friends[$cookie['uid']] = 'You';
        }
        return $friends;
    }

}

?> 
```

问题是，在模型中，它来自“getFriends()”。从那里它进入'get_facebook_cookie（）'。但它不会进入内部`if(isset($_COOKIE['fbs_' . $app_id]))`），因此，它也不会显示我想要的数据。

所以，如果可能的话，请让我知道我的代码有什么问题。提前致谢....

# php - fnServerData 不工作

> ID：15431253
> 
> 赞同：3
> 
> 时间：2013-03-15T11:29:00.200
> 
> 标签：php, jquery, datatables

让我在 server_processing.php 上让它变得非常简单

```
$aColumns = array('is_active','CompanyName', 'email', 'phone_no', 'web_address','id' );
$sIndexColumn = "id";
$sTable = "inf_company"; 
```

还设置连接到 db 现在 jquery 函数是

```
"sAjaxSource": "server_processing.php",
                "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
  // Bold the grade for all 'A' grade browsers
  if ( aData[0] != 0 )
  {
  $('td:eq(0)', nRow).html( '<input type="checkbox" name="delid[]" value="'+ aData[5] +'" />' );
  }
  if ( aData[5] != 0 )
  {
   // $('td:eq(4)', nRow).html( '<b>A</b>' ); // You can add your link here!!
 $('td:eq(5)', nRow).html( '<a href=addsubcat.php?id='+ aData[5] +'><img src="./images /edit.png" alt="edit"></a><a href="subcatList.php?del=1&id='+ aData[5] +' "><img  src="./images/del.png" alt="delete"></a>' );
   }
   return nRow;
},
                "fnServerParams": function ( aoData ) {
aoData.push( { "name": "CompanyName",
               "value": "NATIONAL" } );

} 
```

很简单，我想搜索公司名称 National..但它不起作用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:35:19.973

当我查看[`fnServerData`](http://datatables.net/ref#fnServerData)datatables.net 中的示例时，将发布的参数（即*aoData*）被组装[`fnServerParams`](http://datatables.net/ref#fnServerParams)而不是 fnServerData 本身。所以我认为你应该移动以下内容：

```
"fnServerParams": function ( aoData ) {
    aoData.push( { "name": "as_strno",
                   "value": $('#strno').val() },
                 { "name": "as_temp_ref",
                   "value": $('#as_temp_ref').val() });
    aoData.push( { "name": "dateaddedSto",
                   "value": $('#listings_row #dateaddedSto').val() });
} 
```

# javascript - FabricJS - 如何显示单独的旋转手柄？

> ID：15431255
> 
> 赞同：0
> 
> 时间：2013-03-15T11:29:08.357
> 
> 标签：javascript, html, fabricjs

我已经开始使用 FabricJS，并且在所有演示中都看到旋转手柄位于对象上方并与调整大小分开。

但是在我的页面中，这个旋转手柄是不可见的，我只能使用调整大小手柄来旋转。我试过添加：`hasRotatingPoint: true`但它没有做任何事情。我正在使用 FabricJS 0.9.15。

问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:42:23.973

我看到您使用的是 0.9.15...“hasRotatingPoint”属性存在于 1.0+ 版本中，因此您可能需要升级 :)

[https://github.com/kangax/fabric.js/tree/master/dist](https://github.com/kangax/fabric.js/tree/master/dist)

# google-chrome - 在chrome中访问历史记录html？

> ID：15431256
> 
> 赞同：0
> 
> 时间：2013-03-15T11:29:08.960
> 
> 标签：google-chrome, webkit

chrome是否也存储了一些之前访问过的网页的html代码？我可以以某种方式访问​​它们吗？我想恢复我昨天访问过的网站的一些 html，现在它被删除了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:33:12.253

我不这么认为。那将是一种安全漏洞（如果远程网站可以访问它）。这会比整个 Refferer 的事情更糟。

# android - Android滑动手势不起作用

> ID：15431260
> 
> 赞同：1
> 
> 时间：2013-03-15T11:29:26.810
> 
> 标签：android, swipe, gesture, galaxy

在我的应用程序中，**滑动手势的代码在模拟器上运行良好**。但是当我在物理设备（Galaxy 选项卡）上测试它时，相同的代码会崩溃。我正在分享一些代码和日志猫结果。任何帮助表示赞赏。

这是我的活动中实现滑动的类。

```
 package com.example.testflashfile;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.view.GestureDetector;
import android.view.GestureDetector.SimpleOnGestureListener;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.widget.Button;
import android.widget.TextView;
import android.view.MotionEvent;
import com.example.testflashfile.GlobalVariables;

public class MainActivity extends Activity
{
    Button nextButton;
    Button playButton;
    Button backButton;
    Context contextObject;
    GestureDetector gestureDetector;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
        setContentView(R.layout.activity_main);

        ReadText readText=new ReadText(this);
        TextView helloTxt = (TextView)findViewById(R.id.displaytext);

        String fileName="textone";
        helloTxt.setText(readText.readTxt(fileName));

        gestureDetector = new GestureDetector(this.getApplicationContext(),new MyGestureDetector());
        View mainview = (View) findViewById(R.id.mainView);

        // Set the touch listener for the main view to be our custom gesture listener
        mainview.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                if (gestureDetector.onTouchEvent(event)) {
                    return true;
                }
                return false;
            }
        });

        playButton=(Button)findViewById(R.id.play);
        playButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent startAnimation=new Intent(MainActivity.this,PlayAnimationActivity.class);
                startAnimation.putExtra("SWF_NAME","a");
                startActivity(startAnimation);
            }
        });

        nextButton=(Button)findViewById(R.id.next);
        nextButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent=new Intent(MainActivity.this,SecondActivity.class);
                startActivity(intent);

            }
        });

        backButton=(Button)findViewById(R.id.back);
        backButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent=new Intent(MainActivity.this,FifthActivity.class);
                startActivity(intent);

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public class MyGestureDetector extends SimpleOnGestureListener
    {

        @Override
        public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY) {

            if (Math.abs(e1.getY() - e2.getY()) > GlobalVariables.SWIPE_MAX_OFF_PATH) {
                return false;
            }

            // right to left swipe
            if(e1.getX() - e2.getX() > GlobalVariables.SWIPE_MIN_DISTANCE && Math.abs(velocityX) > GlobalVariables.SWIPE_THRESHOLD_VELOCITY) {

                Intent i= new Intent(MainActivity.this,SecondActivity.class);
                startActivity(i);

                //  left to right  swipe
            }  else if (e2.getX() - e1.getX() > GlobalVariables.SWIPE_MIN_DISTANCE && Math.abs(velocityX) > GlobalVariables.SWIPE_THRESHOLD_VELOCITY) {

                Intent i= new Intent(MainActivity.this,FifthActivity.class);
                startActivity(i);

            }

            return false;
        }

        @Override
        public boolean onDown(MotionEvent e) {
            return true;
        }

    }

} 
```

日志猫的结果是：

```
03-15 11:25:39.369: D/OpenGLRenderer(10179): Enabling debug mode 0
03-15 11:25:42.611: E/InputEventReceiver(10179): Exception dispatching input event.
03-15 11:25:42.611: D/AndroidRuntime(10179): Shutting down VM
03-15 11:25:42.611: W/dalvikvm(10179): threadid=1: thread exiting with uncaught exception (group=0x419442a0)
03-15 11:25:42.619: E/AndroidRuntime(10179): FATAL EXCEPTION: main
03-15 11:25:42.619: E/AndroidRuntime(10179): java.lang.IllegalArgumentException: pointerIndex out of range
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.MotionEvent.nativeGetAxisValue(Native Method)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.MotionEvent.getY(MotionEvent.java:2090)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.widget.ScrollView.onTouchEvent(ScrollView.java:848)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.View.dispatchTouchEvent(View.java:7340)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2181)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1914)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2187)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1929)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2187)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1929)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2187)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1929)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2187)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1929)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:2113)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1466)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.app.Activity.dispatchTouchEvent(Activity.java:2468)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:2061)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.View.dispatchPointerEvent(View.java:7525)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3370)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3302)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4394)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4372)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4476)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:171)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.InputEventReceiver.nativeConsumeBatchedInputEvents(Native Method)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.InputEventReceiver.consumeBatchedInputEvents(InputEventReceiver.java:163)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.ViewRootImpl.doConsumeBatchedInput(ViewRootImpl.java:4444)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.ViewRootImpl$ConsumeBatchedInputRunnable.run(ViewRootImpl.java:4495)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.Choreographer.doFrame(Choreographer.java:523)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.os.Handler.handleCallback(Handler.java:615)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.os.Looper.loop(Looper.java:137)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at android.app.ActivityThread.main(ActivityThread.java:4895)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at java.lang.reflect.Method.invokeNative(Native Method)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at java.lang.reflect.Method.invoke(Method.java:511)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
03-15 11:25:42.619: E/AndroidRuntime(10179):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T06:58:34.000

```
mainview.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                if (gestureDetector.onTouchEvent(event)) {
                    return false;
                }
                return true;
            }
        }); 
```

**这是正确的做法。它现在可以在设备上运行。** 但我仍然不明白它是如何在模拟器上工作的。如果有人能弄清楚，请告诉我。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:05:23.927

您将 null 作为输入传递给 `readTxt(null);`Read 类，而是在构造函数中发送文件名并将文件名传递给 readTxt 或**在 Read 类中删除 readTxt(null)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:22:10.640

问题就在这里

```
 public class ReadText {
    Context context;
    public ReadText(Context c) {
        context = c;
        readTxt(null);
    } 
```

null 是java中的一个关键字..所以你需要首先更改你的assts文件夹（null.txt）中的文件名，然后在你的代码中使用该文件名......

# javascript - 淘汰赛不起作用：来自外部 Json 文件的值

> ID：15431265
> 
> 赞同：1
> 
> 时间：2013-03-15T11:29:43.500
> 
> 标签：javascript, jquery, json, knockout.js, getjson

我试图使用敲除创建一种电子表格的公式操作，但敲除不起作用。

我的数据来自外部 Json 文件

json文件

```
{
    "info": [
        {
            "Name":"Noob Here",
            "Major":"Language",
            "Sex":"Male",
        "English":"15",
        "Japanese":"5",
        "Calculus":"0",
        "Geometry":"20" 
        }
    ]
} 
```

代码

```
<script type="text/javascript">
    function loadData(fileName) {
        // getting json from a remote file
        // by returning the jqXHR object we can use the .done() function on it
        // so the callback gets executed as soon as the request returns successfully
        var data = $.getJSON(fileName + ".json");
        return (data);

    }

    function fillDataTable(data) {
        // iterate over each entry in the data.info array
        $.each(data.info, function(index, element) {
            // append it to the table 
            $("#div1").append("<tr><td>" + element.Name + "</td><td>" + element.Major + "</td><td>" + element.Sex + "</td><td>" + "<input data-bind='value: eng' value=" + element.English + "></td><td>" + "<input data-bind='value: jap' value=" + element.Japanese + "></td><td>" + "<input data-bind='value: cal' value=" + element.Calculus + "></td><td>" + "<input data-bind='value: geo' value=" + element.Geometry + "></td><td>" + "<strong data-bind='text: total'></td>")
        });
    }

    $(document).ready(function() {

        // the file's name. "Data" in this example.
        var myFile = "Data2";

        loadData(myFile).done(function(data) {
            // check if we acutally get something back and if the data has the info property
            if (data && data.info) {
                // now fill the data table with our data
                fillDataTable(data)
            }
        });

        // This is a simple *viewmodel* - JavaScript that defines the data and behavior of your UI
        function AppViewModel() {
            this.eng = ko.observable("0");
            this.jap = ko.observable("0");
            this.cal = ko.observable("0");
            this.geo = ko.observable("0");

            this.total = ko.computed(function() {
                var tot = parseFloat(this.eng()) + parseFloat(this.jap()) + parseFloat(this.cal()) + parseFloat(this.geo());
                return (tot);
            }, this);

        }

        // Activates knockout.js
        ko.applyBindings(new AppViewModel());
    });
</script> 
```

我的 HTML

```
<table cellspacing="1" id="div1">
    <thead>
        <tr>
            <th>Name</th>
            <th>Major</th>
            <th>Sex</th>
            <th>English</th>
            <th>Japanese</th>
            <th>Calculus</th>
            <th>Geometry</th>
            <th>Total</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table> 
```

我正在从 json 文件中获取数据。但是淘汰赛不起作用。

摆弄代码：http: [//jsfiddle.net/KGKpw/](http://jsfiddle.net/KGKpw/)

注意：我添加小提琴只是为了整齐地显示代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:53:01.020

更常见的做法是将数据复制到视图模型上的可观察属性中，然后将它们绑定到 html 元素。您正在 js 中创建 html，而不是在前端使用敲除（如果您有多个结果要为其创建行，则使用 foreach）。同样，当您绑定它们时，您可以使用您的数据对象直接在 html 中设置值。猜测一下，绑定是*在*您在 html 中设置值之后执行的，并且由于所有可观察值都设置为零，这将覆盖您直接在 html 中设置的值。

尝试将 html 移动到您的视图中，而不是在您的视图模型中，将您的数据从 js 对象复制到您的视图模型，然后仅使用敲除绑定将视图链接到您的视图模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:00:12.790

您需要`data-bind`在 html 中使用将视图模型绑定到视图。

更新了你的小提琴：http: [//jsfiddle.net/KGKpw/1/](http://jsfiddle.net/KGKpw/1/)

# android - 在 Android 设备中设置应用程序名称

> ID：15431269
> 
> 赞同：3
> 
> 时间：2013-03-15T11:30:00.583
> 
> 标签：android, android-widget

我实现了一个名为 'vignesh' 的 android 项目，其中我的源包为 com.example.learn.android。在我卸载应用程序的选项卡中，它显示 com.example.learn 而不是单独的项目名称。请指教..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:35:27.620

您可以在`AndroidManifest.xml`

```
<application 
  android:label="@string/app_name"
  ...>

</application> 
```

在上面的示例中，您必须`app_name`在`res/strings.xml`

```
<string name="app_name">My app name</string> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:36:42.973

如果这在 AndroidManifest.xml 文件中不起作用：

```
<application 
    android:label="@string/app_name"
    ...>

</application> 
```

查找启动活动（带有 android.intent.action.MAIN & android.intent.category.LAUNCHER 的活动），例如：

```
<activity
   android:name=".SplashScreen"
   android:label="com.example.learn"
   android:noHistory="true"
   android:screenOrientation="landscape"
   android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
   <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
   </intent-filter>
</activity> 
```

您可能已经像上面的示例一样提到了 android:label。奇怪的是，Android 将您的第一个活动的名称（标签）作为应用程序名称（我不知道为什么）。

如果您只是删除（或重命名） android:label="com.example.learn" 行应该没问题。删除该行可确保应用程序将查找在`<application>`AndroidManifest.xml 文件部分中定义的 android:label 标记。

# plsql - 检查物化视图是否包含任何行的最快方法

> ID：15431270
> 
> 赞同：0
> 
> 时间：2013-03-15T11:30:07.727
> 
> 标签：plsql, oracle11g

我有一个 Oracle 11g 数据库的物化视图，它应该包含很多很多行。

找出视图中是否有任何行的最快方法是什么？我对有多少行不感兴趣，只要它包含一行或多行。

我正在执行 COUNT(*) 查询，但这需要很长时间才能运行。有什么建议么？

请注意，这个问题与另一个问题并不完全不同：[检查数据库表中是否有某些记录的最快方法？](https://stackoverflow.com/questions/2131168/the-fastest-way-to-check-if-some-records-in-a-database-table)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:37:22.407

您提供的参考答案对您有用，或者：

```
select /*+ NO_REWRITE */ count(*) from your_mview where rownum = 1; 
```

一旦找到 1 行，它将停止扫描。

# linq - LiNQ连接两个表进行减法SUM

> ID：15431275
> 
> 赞同：0
> 
> 时间：2013-03-15T11:30:17.853
> 
> 标签：linq

场景：视图应该有所有利润的总和，所有成本的总和，余额=利润-成本

```
public ProfitAndCostViewModel getTotalBalance()
    {
        var totalProfit = db.Profits.Where(p=>p.IdUser.UserId == WebSecurity.CurrentUserId).Sum(p=>p.Value);

        var totalCost = db.Costs.Where(c=>c.IdUser.UserId == WebSecurity.CurrentUserId).Sum(c=>c.Value);

        var balance = totalProfit - totalCost ;
        return new ProfitAndCostViewModel { FinalBalance = balance };
    } 
```

控制器：

```
 public ActionResult Index()
        {

      var pcv = new ProfitAndCostViewModel();
          pcv.ProfModel =getProfitSum();
            pcv.CostModel =getCostSum();
            pcv.TOTALBALANCE = getTotalBalance();
             return View(pcv);

        } 
```

看法：

```
@model WHFM.ViewModels.ProfitAndCostViewModel
@Model.FinalBalance.FinalBalance 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:31:17.103

尝试

```
public ProfitAndCostViewModel getTotalBalance()
{
    var totalProfit = db.Profits.Where(p=>p.IdUser.UserId == WebSecurity.CurrentUserId).Sum(p=>p.Value);

    var totalCost = db.Costs.Where(c=>c.IdUser.UserId == WebSecurity.CurrentUserId).Sum(c=>c.Value);

    var balance = totalProfit - totalCost ;
    return new ProfitAndCostViewModel{ FinalBalance = balance};
} 
```

据我所知，您只是在寻找当前用户的最终余额，对吗？如果是这样，则不需要返回 ProfitAndCostViewModel 的 IEnumerable。

如果您想要多对多用户余额输出（ProfitAndCostViewModel 的 IEnumerable），请尝试：

```
 public IEnumerable<ProfitAndCostViewModel> getTotalBalance()
 {
    var result = from p in db.Profits
                       group p by p.IdUser.UserId
                       into g
                       join c in db.Costs on g.Key equals c.IdUser.UserId
                       group new {g,c} by g.Key into h
                       select new ProfitAndCostViewModel
                           {
                               FinalBalance = h.Select(x=>x.g.Sum(y=>y.Value)).First() - h.Sum(x=>x.c.Value),
                                                       UserId = h.Key
                           };

    return result;
} 
```

我只在列表上测试了这个，而不是数据库变量，所以它可能不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:33:18.860

试试这个：

场景：视图应该有所有利润的总和，所有成本的总和，余额=利润-成本

```
public double getProfitSum()
{
    return db.Profits.Where(p=>p.IdUser.UserId == WebSecurity.CurrentUserId).Sum(p=>p.Value);
}        

public double getCostSum()
{
    return db.Costs.Where(c=>c.IdUser.UserId == WebSecurity.CurrentUserId).Sum(c=>c.Value);
} 
```

控制器：

```
 public ActionResult Index()
 {

      var pcv = new ProfitAndCostViewModel();
      pcv.ProfModel = getProfitSum();  //This should be a double
      pcv.CostModel =getCostSum();   //This should be a double
      return View(pcv);       
 } 
```

模型：

```
public class ProfitAndCostViewModel
{
    public double ProfModel {get;set;}
    public double CostModel {get;set;}
    public FinalBalance {get{ return ProfModel - CostModel;} }
} 
```

看法：

```
@model WHFM.ViewModels.ProfitAndCostViewModel
@Model.FinalBalance - This show now be correct 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:33:52.457

```
public IEnumerable<ProfitAndCostViewModel> getTotalBalance()
{
    var total = from p in db.Profits
                join c in db.Costs on p.IdUser.UserId equals c.IdUser.UserId
                group new { p, c } by p.IdUser.UserId into g
                select new ProfitAndCostViewModel
                {
                    FinalBalance = g.Sum(i => i.p.Value) - g.Sum(i => i.c.Value);
                };
    return total;        
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:07:49.570

尝试

```
 public IEnumerable<ProfitAndCostViewModel> getTotalBalance()
 {
     var total = from p in db.Profits
                 join c in db.Costs on p.IdUser.UserId equals c.IdUser.UserId
                 where p.IdUser.UserId == WebSecurity.CurrentUserId
                 group new { p, c } by p.IdUser.UserId into g
                 select new ProfitAndCostViewModel
                 {
                    FinalBalance = g.Sum(i => i.p.Value) - g.Sum(i => i.c.Value)
                 };
     return total;       
  } 
```

# scala - 隐式值的隐式转换能否满足隐式参数？

> ID：15431278
> 
> 赞同：1
> 
> 时间：2013-03-15T11:30:35.817
> 
> 标签：scala, implicit-conversion, implicit-parameters

我正在定义一些 Scala 隐式，以便更轻松地使用一组特定的不可更改的 Java 类。以下 Scala 代码是一个简化的示例，显然看起来很疯狂，在现实世界中，我试图从 Monkey、Tree 和 Duck 中隐式获取特定资源（而不是数字年龄），以用于各种方法，例如`purchaseCandles()`：

```
// actually 3 Java classes I can not change:
case class Monkey(bananas: Int) 
case class Tree(rings: Int)
case class Duck(quacks: Seq[String])

// implicits I created to make my life easier...
implicit def monkey2Age(monkey: Monkey): Int = monkey.bananas / 1000
implicit def tree2Age(tree: Tree): Int = tree.rings
implicit def duck2Age(duck: Duck): Int = duck.quacks.size / 100000

// one of several helper methods that I would like to define only once,
// only useful if they can use an implicit parameter.
def purchaseCandles()(implicit age: Int) = {
  println(s"I'm going to buy $age candles!")
}

// examples of usage
{
  implicit val guest = Monkey(10000)

  purchaseCandles()
}

{
  implicit val guest = Tree(50)

  purchaseCandles()
}

{
  implicit val guest = Duck(Seq("quack", "quack", "quack"))

  purchaseCandles()
} 
```

编译器错误，发生 3 次：

```
could not find implicit value for parameter age: Int 
purchaseCandles()
               ^ 
```

抛开这个示例代码疯狂的许多不同方式，我真正的问题是：隐式值的隐式转换能否满足 Scala 中的隐式参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T11:37:10.983

简短的回答：没有。Scala 的编译器只会应用单个隐式，因此如果它未能发现`implicit int`周围存在的问题，它将停止并放弃。

但是，您可以编写`purchaseCandles`方法来对可以转换为 的类型进行操作`Int`，并且需要该类型的参数：

```
def purchaseCandles[A <% Int]()(implicit age : A) = {
  val asAge : Int = age
  println(s"I'm going to buy $asAge candles!")
} 
```

该`asAge`部分是强制应用隐式转换所必需的。

到目前为止，我似乎需要`A`在这种情况下指定类型，尽管我不知道为什么：因为不应该有其他类型的值可以隐式转换为`Int`（这发生在全新的类型上同样，所以它不是普遍存在的`Int`。）但是你可以这样做：

```
{
  implicit val guest = Monkey(10000)

  purchaseCandles[Monkey]()
} 
```

然而，这种隐式的使用可能是个坏主意！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-11T23:26:47.123

您实际上可以这样做：您只需要将隐式转换的参数也标记为隐式：

```
implicit def monkey2Age(implicit monkey: Monkey): Int = monkey.bananas / 1000
implicit def tree2Age(implicit tree: Tree): Int = tree.rings
implicit def duck2Age(implicit duck: Duck): Int = duck.quacks.size / 100000 
```

这将以您想要的方式链接它们的隐含。

与往常一样：当心，它也会在您不希望它出现的地方这样做。顺便说一句，我强烈建议不要使用类型的隐式参数`Int`（或其隐式值）。它太笼统了。（我有点假设这就像你的例子一样）。

# spring - 我们可以在 REST url 中传递多个 JSON 对象并使用 Spring @RequestBody 捕获它吗？

> ID：15431282
> 
> 赞同：0
> 
> 时间：2013-03-15T11:30:43.157
> 
> 标签：spring

有没有更好的方法来传递多个 JSON 对象并在 Spring 3 的 @RequestBody 中捕获它？我已经提到[了这个](https://stackoverflow.com/questions/5726583/spring-rest-multiple-requestbody-parameters-possible)，但不希望为该问题中解释的目的定义新的包装类？是 Spring 的限制还是 REST 的限制（根据我的理解，应该不是这样）？迫切需要答案，并且由于我无法在同一问题中发表其他评论（已被删除），因此将其发布在这里。

谢谢，
稻田

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T04:57:09.463

对于每个模型使用 @JsonIgnoreProperties(ignoreUnknown = true)

```
 @RequestMapping(value = "/users/testBean", method = RequestMethod.POST, consumes={"application/json","application/xml"}, produces={"application/json","application/xml"}) 
public @ResponseBody List<User> testBean(@RequestBody Object object) {
    System.out.println("testBean called");
    System.out.println(object.toString());

    ObjectMapper mapper=new ObjectMapper();

    User user =mapper.convertValue(object, User.class);
    Tree tree =mapper.convertValue(object, Tree.class);

    System.out.println("User:"+user.toString());
    System.out.println("Tree:"+tree.toString());
    return userService.findAll();
} 
```

# go - 从字节中删除 NUL 字符

> ID：15431283
> 
> 赞同：33
> 
> 时间：2013-03-15T11:30:44.973
> 
> 标签：go

为了自学 Go，我正在构建一个简单的服务器，它接受一些输入、进行一些处理并将输出发送回客户端（包括原始输入）。

输入的长度可以从大约 5 到 13 个字符 + 结束行以及客户端发送的任何其他内容不等。

输入被读入字节数组，然后转换为字符串进行一些处理。另一个字符串附加到该字符串，整个内容被转换回字节数组以发送回客户端。

问题是输入填充了一堆 NUL 字符，我不知道如何摆脱它们。

所以我可以遍历数组，当我遇到一个 nul 字符时，记下长度 (n)，创建一个该长度的新字节数组，然后将前 n 个字符复制到新字节数组并使用它。这是最好的方法，还是有什么可以让我更轻松？

一些精简的代码：

```
data := make([]byte, 16)
c.Read(data)

s := strings.Replace(string(data[:]), "an", "", -1)
s = strings.Replace(s, "\r", "", -1)
s += "some other string"
response := []byte(s)
c.Write(response)
c.close() 
```

此外，如果我在这里做任何其他明显愚蠢的事情，我会很高兴知道。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-03-15T11:43:26.593

在包“bytes”中，[`func Trim(s []byte, cutset string) []byte`](http://golang.org/pkg/bytes/#Trim)是你的朋友：

> Trim 通过切掉 cutset 中包含的所有前导和尾随 UTF-8 编码的 Unicode 代码点来返回 s 的子切片。

```
// Remove any NULL characters from 'b'
b = bytes.Trim(b, "\x00") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T11:38:38.003

你的方法听起来基本正确。一些备注：

1.  找到第一个 nul 字节的索引后`data`，不需要复制，只需截断切片：`data[:idx]`。

2.  [bytes.Index](http://golang.org/pkg/bytes/#Index)应该能够为您找到该索引。

3.  还有，`bytes.Replace`所以你不需要转换为字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-04-17T00:33:38.113

io.Reader[文档](https://pkg.go.dev/io#Reader)说：

> Read 最多将 len(p) 个字节读入 p。它返回读取的字节数 (0 <= n <= len(p)) 和遇到的任何错误。

如果应用程序中对 Read 的调用未读取 16 个字节，`data`则将有尾随零字节。使用读取的字节数来修剪缓冲区中的零字节。

```
data := make([]byte, 16)
n, err := c.Read(data)
if err != nil {
   // handle error
}
data = data[:n] 
```

还有一个问题。不能保证 Read 会吞下对等方发送的所有“消息”。应用程序可能需要多次调用 Read 才能获得完整的消息。

您在问题中提到了结尾。如果来自客户端的消息被终止但换行符，则使用[bufio.Scanner](https://pkg.go.dev/bufio#Scanner)从连接中读取行：

```
 s := bufio.NewScanner(c)
 if s.Scan() {
     data = s.Bytes() // data is next line, not including end lines, etc.
 }
 if s.Err() != nil {
     // handle error
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-10T03:44:39.180

您可以利用的返回值`Read`：

```
package main
import "strings"

func main() {
   r, b := strings.NewReader("north east south west"), make([]byte, 16)
   n, e := r.Read(b)
   if e != nil {
      panic(e)
   }
   b = b[:n]
   println(string(b) == "north east south")
} 
```

[https://golang.org/pkg/io#Reader](https://golang.org/pkg/io#Reader)

# c# - 在一个事务中调用多个 SQL Server 存储过程

> ID：15431285
> 
> 赞同：13
> 
> 时间：2013-03-15T11:30:46.043
> 
> 标签：c#, sql-server, asynchronous, .net-3.5, transactions

为了在我当前的项目中使用，我创建了一个允许我异步调用 SQL Server 的类。

我的代码如下所示：

```
internal class CommandAndCallback<TCallback, TError>
{
    public SqlCommand Sql { get; set; }
    public TCallback Callback { get; set; }
    public TError Error { get; set; }
}

class MyCodes:SingletonBase<MyCodes>
{
    private static string _connString = @"Data Source=MyDB;Initial Catalog=ED;Integrated Security=True;Asynchronous Processing=true;Connection Timeout=0;Application Name=TEST";

    private MyCodes() { }

    public void SetSystem(bool production)
    {
        _connString =
            string.Format(@"Data Source=MyDB;Initial Catalog={0};Integrated Security=True;Asynchronous Processing=true;Connection Timeout=0;Application Name=TEST", production ? "ED" : "TEST_ED");
    }

    public void Add(string newCode, Action<int> callback, Action<string> error)
    {
        var conn = new SqlConnection(_connString);
        SqlCommand cmd = conn.CreateCommand();
        cmd.CommandTimeout = 0;
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.CommandText = @"ADD_CODE";
        cmd.Parameters.Add("@NEW", SqlDbType.NVarChar).Value = newCode;
        cmd.Parameters.Add("@NewId", SqlDbType.Int).Direction = ParameterDirection.Output;

        try
        {
            cmd.Connection.Open();
        }
        catch (Exception ex)
        {
            error(ex.ToString());
            return;
        }

        var ar = new CommandAndCallback<Action<int>, Action<string>> { Callback = callback, Error = error, Sql = cmd };
        cmd.BeginExecuteReader(Add_Handler, ar, CommandBehavior.CloseConnection);
    }

    private static void Add_Handler(IAsyncResult result)
    {
        var ar = (CommandAndCallback<Action<int>, Action<string>>)result.AsyncState;
        if (result.IsCompleted)
        {
            try
            {
                ar.Sql.EndExecuteReader(result);
                ar.Callback(Convert.ToInt32(ar.Sql.Parameters["@NewId"].Value));
            }
            catch (Exception ex)
            {
                ar.Error(ex.Message);
            }
        }
        else
        {
            ar.Error("Error executing SQL");
        }
    }

public void Update(int codeId, string newCode, Action callback, Action<string> error)
    {
        var conn = new SqlConnection(_connString);
        SqlCommand cmd = conn.CreateCommand();
        cmd.CommandTimeout = 0;
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.CommandText = @"UPDATE_CODE";
        cmd.Parameters.Add("@CODE_ID", SqlDbType.Int).Value = codeId;
        cmd.Parameters.Add("@NEW", SqlDbType.NVarChar).Value = newCode;

        try
        {
            cmd.Connection.Open();
        }
        catch (Exception ex)
        {
            error(ex.ToString());
            return;
        }

        var ar = new CommandAndCallback<Action, Action<string>> { Callback = callback, Error = error, Sql = cmd };
        cmd.BeginExecuteReader(Update_Handler, ar, CommandBehavior.CloseConnection);
    }

    private static void Update_Handler(IAsyncResult result)
    {
        var ar = (CommandAndCallback<Action, Action<string>>)result.AsyncState;
        if (result.IsCompleted)
        {
            try
            {
                ar.Sql.EndExecuteReader(result);
                ar.Callback();
            }
            catch (Exception ex)
            {
                ar.Error(ex.Message);
            }
        }
        else
        {
            ar.Error("Error executing SQL");
        }
    }

} 
```

这可能看起来像太多的代码，但它让我这样称呼它：

```
private void Add_Click(object sender, EventArgs e)
{
   MyCodes.Instance.Add("Test",Success,Error)
}

private void Success(int newId)
{
   MessageBox.Show(newId.ToString(), "Success", MessageBoxButtons.OK, MessageBoxIcon.Information);
}

private void Error(string error)
{
   MessageBox.Show(error, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
} 
```

上面的代码对我来说很好，我可以异步执行每个调用。

我现在遇到的问题是将多个调用作为事务进行 - 我想更新 2 个代码并添加一个新代码。

通常我会调用更新，然后在成功处理程序中调用第二次更新，在第二次更新的处理程序中我会调用 add 来返回新的 id。

就像是：

```
-UPDATE CODE
 |-UPDATE CODE
   |-ADD CODE (only this one return something) 
```

但我想将所有这些都称为事务，因此如果添加代码会破坏更新，则会回滚。

问题：

是否可以将多个异步查询作为事务调用？

我可以将上述方法称为事务还是必须创建单独的方法来将我的程序称为一个？（我想避免这个，因为它只是将相同的代码从一种方法复制到另一种方法）

我想补充一点，我使用 .NET 3.5，所以 await 和其他不错的功能不是一个选项。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-10T12:14:51.643

```
 string cnnString =WebConfigurationManager.ConnectionStrings["MyString"].ConnectionString;
    SqlConnection cnn = new SqlConnection(cnnString);
    SqlTransaction transaction;

    cnn.Open();
    transaction = cnn.BeginTransaction();

    try
    {

        // Command Objects for the transaction
        SqlCommand cmd1 = new SqlCommand("sproc1", cnn);
        SqlCommand cmd2 = new SqlCommand("sproc2", cnn);

        cmd1.CommandType = CommandType.StoredProcedure;
        cmd2.CommandType = CommandType.StoredProcedure;

        cmd1.Parameters.Add(new SqlParameter("@Param1", SqlDbType.NVarChar, 50));
        cmd1.Parameters["@Param1"].Value = paramValue1;

        cmd1.Parameters.Add(new SqlParameter("@Param2", SqlDbType.NVarChar, 50));
        cmd1.Parameters["@Param2"].Value = paramValue2;

        cmd2.Parameters.Add(new SqlParameter("@Param3", SqlDbType.NVarChar, 50));
        cmd2.Parameters["@Param3"].Value = paramValue3;

        cmd2.Parameters.Add(new SqlParameter("@Param4", SqlDbType.NVarChar, 50));
        cmd2.Parameters["@Param4"].Value = paramValue4;

        cmd1.ExecuteNonQuery();
        cmd2.ExecuteNonQuery();

        transaction.Commit();
    }

    catch (SqlException sqlEx)
    {
        transaction.Rollback();
    }

    finally
    {
        cnn.Close();
        cnn.Dispose();
    } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-15T11:49:57.667

对的，这是可能的。只需[`SqlConnection.BeginTransaction`](http://msdn.microsoft.com/en-us/library/86773566.aspx)在您第一次打电话之前打电话。确保将返回的[`SqlTransaction`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.aspx)对象分配给[`SqlCommand.Transaction`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.transaction.aspx)链中的每个对象并[`SqlTransaction.Commit()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.commit.aspx)在最后调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-06T05:50:52.063

```
public class Command
{
    public string sql { get; set; }
    public CommandType cmdType { get; set; }
    public Dictionary<string, object> parameter { get; set; } = null;
}

    private Command insertInvoice(Invoice invoice)
    {
        try
        {
            Dictionary<string, object> parameterLocal = new Dictionary<string, object>();

            parameterLocal.Add("p_customerId", invoice.customerId);
            parameterLocal.Add("p_invoiceNo", invoice.invoiceNo);
            parameterLocal.Add("p_invoiceDate", invoice.invoiceDate);
            parameterLocal.Add("p_invoiceAmount", invoice.invoiceAmount);                
            parameterLocal.Add("p_withInvoice", invoice.withInvoice);

            return (new Command { sql = "sp_insertInvoice", cmdType = CommandType.StoredProcedure, parameter = parameterLocal });
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }

    private Command insertInvoiceModel(InvoiceModel invoiceModel)
    {
        try
        {
            Dictionary<string, object> parameterLocal = new Dictionary<string, object>();

            parameterLocal.Add("p_invoiceNo", invoiceModel.invoiceNo);
            parameterLocal.Add("p_model", invoiceModel.model);
            parameterLocal.Add("p_quantity", invoiceModel.quantity);
            parameterLocal.Add("p_unitPrice", invoiceModel.unitPrice);

            return (new Command { sql = "sp_insertInvoiceModel", cmdType = CommandType.StoredProcedure, parameter = parameterLocal });
        }
        catch (Exception ex)
        {
            throw ex;
        }
    }

 List<Command> commandList = new List<Command>();

 cmd = insertInvoice(invoicesave);

 commandList.Add(cmd);

 cmd = insertInvoiceModel(invoiceModelSave);

 commandList.Add(cmd);

        try
        {
            erplibmain.erpDac.runOleDbTransaction(commandList);
        }
        catch (Exception ex)
        {
            throw ex;
        }

    public void runOleDbTransaction(List<Command> commandList)
    {
        OleDbConnection erpConnection = new OleDbConnection(ErpDalMain.connectionstring);
        erpConnection.Open();

        OleDbCommand erpCommand = erpConnection.CreateCommand();
        OleDbTransaction erpTrans;

        // Start a local transaction
        erpTrans = erpConnection.BeginTransaction();
        // Assign transaction object for a pending local transaction
        erpCommand.Connection = erpConnection;
        erpCommand.Transaction = erpTrans;

        try
        {
            foreach (Command cmd in commandList)
            {
                erpCommand.CommandText = cmd.sql;
                erpCommand.CommandType = cmd.cmdType;

                foreach (KeyValuePair<string, object> entry in cmd.parameter)
                {
                    erpCommand.Parameters.AddWithValue(entry.Key, entry.Value);
                }

                erpCommand.ExecuteNonQuery();

                erpCommand.Parameters.Clear();
            }

            erpTrans.Commit();
        }
        catch (Exception e)
        {
            try
            {
                erpTrans.Rollback();
            }
            catch (OleDbException ex)
            {
                if (erpTrans.Connection != null)
                {
                    throw ex;
                }
            }

            throw e;
        }
        finally
        {
            erpConnection.Close();
        }
    } 
```

# visual-studio-2012 - 添加 Outlook 2013 邮件项上下文菜单。VS 2012 C#

> ID：15431286
> 
> 赞同：5
> 
> 时间：2013-03-15T11:30:51.793
> 
> 标签：visual-studio-2012, outlook-addin

嗨，我想在 Outlook 2013 mailitem 上下文菜单中添加一个新按钮。我使用 VS 2012 C#。

我搜索了互联网，但找不到这样做的方法，我升级了一个修改了上下文菜单的 Outlook 2010 插件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T12:38:54.047

在项目的视觉工作室中选择添加新项目。选择功能区 (XML)。

在 XML 文件中添加以下内容：

```
<contextMenus>
    <contextMenu idMso="ContextMenuMailItem">
     <menu id="ArcIT" label="ArcIT">
       <button id="MyContextMenuMailItem"
           label="ContextMenuMailItem"
           onAction="OnMyButtonClick"/>
     </menu >
   </contextMenu>
  </contextMenus> 
```

在ribbon.cs 类中添加以下方法

```
public void OnMyButtonClick(Office.IRibbonControl control)
    {

        if (control.Context is Outlook.Selection)
        {
            Outlook.Selection sel = control.Context as Outlook.Selection;
            Outlook.MailItem mail = sel[1];
            MessageBox.Show(mail.Subject.ToString());

        }
    } 
```

方法必须是公开的。此方法显示一个框，其中包含您右键单击的邮件中的主题。

# android - 在ant中解压apk文件时出错

> ID：15431287
> 
> 赞同：1
> 
> 时间：2013-03-15T11:30:52.827
> 
> 标签：android, ant, unzip

我用ant解压了一个apk文件，但是出现了这样的错误：

```
<unzip src="test.apk" dest="testdir" > 
```

错误消息：java.lang.RuntimeException：从 0 开始的数据格式未知

我用谷歌搜索了它，并添加了属性 encoding="native-encoding" ，它仍然是错误的。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:31:23.563

好的，最后我使用 java ziputil 编写了一个自定义 ant 任务来解压缩 apk 文件。它运作良好。

# c++ - c ++删除派生类的指针，该指针分配给基类的指针

> ID：15431288
> 
> 赞同：0
> 
> 时间：2013-03-15T11:30:57.513
> 
> 标签：c++, visual-studio, pointers

我有以下代码：

```
/* Example OOPBEI03.CPP  */
#include <iostream>

using namespace std;

typedef char item;

class stack
{
private:
    int p;
protected:
    item *st;
public:
    stack(int m=100)
    {
        st = new item[m];
        p = 0;
    }

    ~stack()
    {
        delete [] st;
    }

    void push(item v)
    {
        st[p++] = v;
    }

    item pop()
    {
        return st[--p];
    }

    int empty()
    {
        return !p;
    }
};

class queue : public stack
{
private:
    int q;
    item *qp;
public:
    queue(int m=50):stack(m)
    {
        q = 0;
        qp = st;
    }

    ~queue()
    {
        delete qp;
    }

    item deque()
    {
        return qp[q++];
    }
};

int main()
{
    stack s(50);
    queue q(20);

    s.push('a');
    q.push('b');
    s.push('c');
    q.push('d');

    cout<<"pop   "<<s.pop()<<endl;
    cout<<"pop   "<<s.pop()<<endl;
    cout<<"deque "<<q.deque()<<endl;
    cout<<"deque "<<q.deque()<<endl;
    cout<<"empty queue? "<<q.empty()<<endl;
    cout<<"empty stack? "<<s.empty()<<endl;

    getchar();
    return 0;
} 
```

我在 Visual Studio 中的 main() 末尾出现以下错误：“调试断言失败！... _BLOCK_TYPE_IS_VALID(pHead->nBlockUse)”。

如果我在类队列或堆栈的析构函数中取消注释删除操作（我只取消注释一个操作！），我没有问题。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:37:35.157

您正在删除堆栈基类和队列派生类中的指针。

让您的堆栈类处理所有权，不要在队列中删除它

顺便说一句，您应该将复制构造和复制分配私有化，或者处理它（称为“三规则”）；否则这些类很容易以不好的方式使用......

* * *

在不只是用于学习的代码中，只需使用`std::stack`而`std::queue`不是自己实现这些类

`std::stack`并且`std::queue`是具有可定制的底层容器类型的类模板

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:37:43.037

删除`qp`应该与更新相同（这是我的术语）））。

```
delete [] qp;
       ^^ 
```

但在这种特殊情况下`qp`，应该完全删除删除

# sql-server - SSMS 网页界面

> ID：15431296
> 
> 赞同：16
> 
> 时间：2013-03-15T11:31:14.357
> 
> 标签：sql-server, ssms

有谁知道是否有一个工具允许您通过 Web 浏览器对 SQL Server 数据库运行查询（例如，通过浏览器提供的 SSMS 功能）？

我问，因为我们有一个庞大的支持团队，他们在调查问题时严重依赖运行数据库查询。由于我们的数据中心（托管数据库的地方）位于我们办公室的远程位置，而且我们的许多支持人员都通过 VPN 在海外工作，因此允许他们访问托管在数据中心的客户端会很有帮助。一种解决方案是将 SSMS 托管在终端服务器上，但如果存在 Web 前端，则会更直接。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2016-03-16T17:54:44.403

你可能喜欢[sqlpad](https://github.com/rickbergfalk/sqlpad)。

这是一个 Node.js Web 应用程序，用于编写和运行 SQL 查询并可视化结果。支持 Postgres、MySQL、**SQL Server**、Crate 和 Vertica。

它有许多贡献者，并且一直在更新。

# IIS / iisnode 细节

您可能正在将 IIS 与 iisnode 一起使用。这也行得通。您只需更改 /lib/config.js 第 12 行中的端口配置即可使用`process.env.PORT`.

当您想使用 Google 身份验证时。你需要在你的 web.config 中有这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <appSettings>
      <add key="GOOGLE_CLIENT_ID" value="..." />
      <add key="GOOGLE_CLIENT_SECRET" value="..." />
      <add key="PUBLIC_URL" value="https://example.com" />
      <add key="DISABLE_USERPASS_AUTH" value="true" />
  </appSettings>
</configuration> 
```

*PS：当您只想允许谷歌登录时，最后一个键是可选的*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T11:36:35.573

Microsoft 没有，但有可用的第 3 方工具，例如 myLittleAdmin。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-15T11:36:45.743

你想要像[SQL Web Data Admin](http://sqlwebadmin.codeplex.com/)这样的东西。

它没有提供 SSMS 的所有功能，但足以支持/管理远程 sql server。

还有其他基于此项目的基于 codeplex 的其他工具，它们添加了额外的功能。

# asynchronous - plc modbus ascii 多条指令

> ID：15431303
> 
> 赞同：1
> 
> 时间：2013-03-15T11:31:38.583
> 
> 标签：asynchronous, plc, modbus

我正在做一个使用 Modbus ASCII 协议 (RS485) 的应用程序。

客户端将与 PLC 服务通信，该服务将通过串行端口与 PLC 通信。

我不确定每次发送一个命令是否有任何限制，或者在发送下一个命令之前是否需要等待来自 PLC 的响应。

这将影响 PLC 服务的体系结构，因为如果一次只能处理一条指令，我的类的设计将支持一个异步方法调用，并将公开 IsBusy 属性。否则我将不得不支持并发方法调用并为每个调用传入 stateId（我将使用 EAP：基于事件的异步模式）

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:16:37.650

协议是同步的。像 comli 所以是的，你只能发送一个命令并且必须等待回复 - 我还仔细检查了一些旧代码以确保，已经很久了......

[您还可以在此处](http://www.modbus.org/docs/PI_MBUS_300.pdf)阅读有关该协议的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:16:15.673

Modbus 协议一次处理一个命令，因此请等到您有响应后再发送下一个命令。

# c# - 字符串未被识别为有效的 DateTime

> ID：15431306
> 
> 赞同：0
> 
> 时间：2013-03-15T11:31:52.073
> 
> 标签：c#, datetime

这是我在这里的第一篇文章。该应用程序是一个 winform 我已将应用程序的文化设置为 en-GB 但是在检查和保存时我将其转换回 en-US 我得到这个错误字符串没有被重新识别为有效的 DateTime

```
CultureInfo currentCulture = new CultureInfo("en-US");
string strCheckDate = CheckConvertCulture(input);
string date = DateTime.Now.ToString("M/d/yyyy");

if (DateTime.ParseExact(strCheckDate,currentCulture.ToString(),null)> DateTime.ParseExact(date,currentCulture.ToString(),null))
{
      return false;
}
else
{
      return true;
} 
```

我在这里做错了什么

这是我的 converCurrentCulture 代码

```
string strdate = string.Empty;
CultureInfo currentCulture = CultureInfo.CurrentCulture;
System.Globalization.DateTimeFormatInfo usDtfi = new System.Globalization.CultureInfo("en-US", false).DateTimeFormat;
if (currentCulture.ToString() != "en-US")
{
    strdate = Convert.ToDateTime(Culturedate).ToString(usDtfi.ShortDatePattern);
}
else
{
    strdate = Culturedate;
}

    return strdate; 
```

这是我为了让它工作而做的，但是如果用户选择了一个无效的日期，比如 29/02/2013，它是否会工作不确定，

```
CultureInfo currentCulture = new CultureInfo("en-GB");
string date = DateTime.Now.ToString("dd/MM/yyyy", currentCulture); 
```

由于应用程序默认为**en-GB**

```
if (DateTime.Parse(input) > DateTime.Parse(date))
{
  return false;
}
else
{
  return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:10:19.430

如果这实际上是您的代码：

```
CultureInfo currentCulture = new CultureInfo("en-US");
string strCheckDate = CheckConvertCulture(input);

if (DateTime.ParseExact(strCheckDate,currentCulture.ToString(),null) 
```

那么问题出在你的 ParseExact 中，它转化为

```
if (DateTime.ParseExact(strCheckDate, "en-US", null)) 
```

您最好以特定格式指定日期并解析：

```
string format = "MM/dd/yyyy HH:mm:ss";
string strCheckDate = input.ToString(format);

// See note below about "why are you doing this?    
if (DateTime.ParseExact(strCheckDate, format)) 
```

我最大的问题是——你为什么要这样做？如果您有两个日期，为什么要将它们都转换为字符串，然后将它们转换回日期以进行比较？

```
return (input > date); 
```

请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/w2sa9yss%28v=vs.100%29.aspx)以正确使用 DateTime.ParseExact。

# jasper-reports - 交替行颜色

> ID：15431308
> 
> 赞同：1
> 
> 时间：2013-03-15T11:31:56.370
> 
> 标签：jasper-reports, report, ireport

我使用*JasperReport*作为 Web 应用程序的报告工具。（JSP + 小服务程序）

我使用*iReport*开发了一个示例报告，我想在其中为行设置替代颜色。

我在*Detail* Band 中拍摄了一个具有以下属性的*框架：*

 **   **setOpaque** =*真*
*   **背景**颜色=*灰色*
*   **当表达式=**时打印***`new Boolean( $V{PAGE_COUNT}.intValue() % 2 ==0)`***

 **然后我在*Detail* Band 中使用了一个具有以下属性的*TextField ：*

 **   *setOpaque* =假

![在此处输入图像描述](../Images/65d1fb4e9d2877667b9ed64af149bc71.png)

现在，当我从*iReport运行此报告时，它会以**PDF*格式提供正确的输出，但是当它在浏览器中以*HTML*格式执行时，它不会在交替行上显示灰色。

**更新 1：** 如果我选择预览作为*XHTML 预览*，那么它也会在 Web 浏览器中显示所需的输出。所以不存在浏览器兼容性的问题。那么，无法正确显示为*HTML Preview*的原因可能是什么？

因此，如果我在这里遗漏了一些技巧，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:25:53.717

我想知道为什么**Print when expression** : new Boolean( $V{ **PAGE_COUNT** }.intValue() % 2 == 0)。我认为它应该是 ($V{ **REPORT_COUNT** } % 2) == 0。我用 HTML 预览进行了测试，并且能够看到一个灰色的矩形交替显示和隐藏。****

# nunit - NUnit + ServiceStack 的 Funq AutoWire 问题

> ID：15431310
> 
> 赞同：3
> 
> 时间：2013-03-15T11:31:57.167
> 
> 标签：nunit, servicestack, funq

我一直在 ServiceStack 3.9.38 项目中测试我的业务逻辑，并且在单独运行单元测试会导致成功时遇到问题，而同时运行测试会导致其中一个失败。几个小时后，我进行了可重现的单元测试。如果您运行整个夹具，第二次测试将失败。分别运行测试使它们通过。

```
using Funq;
using NUnit.Framework;

[TestFixture]
public class Test
{
    interface IBar {}
    class Bar : IBar {}
    class TestFoo { public IBar Bar { get; set; } }

    [Test]
    public void Test1()
    {
        var container = new Container();
        var m = new TestFoo();
        container.Register<IBar>(new Bar());
        Assert.NotNull(container.Resolve<IBar>(), "Resolve");
        container.AutoWire(m);
        Assert.NotNull(m.Bar, "Autowire");
    }

    [Test]
    public void Test2()
    {
        var container = new Container();
        var m = new TestFoo();
        container.AutoWire(m);
        Assert.Throws<ResolutionException>(() => container.Resolve<IBar>());
        Assert.IsNull(m.Bar); // FAILS HERE
    }
} 
```

这是 Funq.Container 配置的问题吗？或者这是一个错误？任何解决方法？

编辑：我在 GitHub 上发布了一个问题：[https ://github.com/ServiceStack/ServiceStack/issues/521](https://github.com/ServiceStack/ServiceStack/issues/521)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:18:36.333

AutoWireHelpers.cs 中有一个**私有静态字典 autoWireCache** [，](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/Funq/AutoWireHelpers.cs#L17)它正在缓存您的分辨率。当您对它们运行两次测试时，将从缓存中提取值并且您的测试失败。我相信缓存是 ServiceStack 为提高性能而定制的 funq 的一项功能。

没有用于清除该缓存的公共界面，因此我认为没有快速解决方案可以解决您设置测试的方式。

# javascript - 在没有activexobject的java脚本中运行系统命令

> ID：15431315
> 
> 赞同：0
> 
> 时间：2013-03-15T11:32:16.360
> 
> 标签：javascript, windows, shell, command

我想通过客户端的 Web 应用程序运行系统命令。

那么如何在javascript中执行命令以使其工作？

尝试使用 ActiveXObject 但它不起作用，而且它只支持 Internet Explorer。我想要一些可以跨浏览器运行并执行 windows 命令的东西。

var shell = new ActiveXObject("WScript.Shell"); shell.run("javac a.java");

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:41:20.963

撇开你可能想要做这样的事情的原因不谈，我能想到的唯一方法是使用类似[Firebreath](http://www.firebreath.org/display/documentation/FireBreath+Home)的东西自己创建一个浏览器插件。然后，该插件可以向页面公开一个 JavaScript 接口，该页面可以在客户端机器上执行您想要的任何代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:50:48.373

[Chrome](https://chrome.google.com/webstore/detail/activex-for-chrome/lgllffgicojgllpmdbemgglaponefajn?hl=en)有一个`ActiveXObject`插件，但除此之外我什么也没找到。由于`ActiveXObject`s 的固有安全缺陷，通常不鼓励使用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:09:07.077

首先，什么场景需要调用系统命令？

我猜需要在服务器上执行一些命令，就像有问题的代码一样。

因此，更好的方法是调用后面的代码并从代码（Java 或 .Net）中执行系统命令。对于 Java，您可能会发现[此链接很有用](https://stackoverflow.com/questions/8963413/how-to-run-windows-commands-in-java-and-return-the-result-text-as-a-string)。对于其他语言，它可以被谷歌搜索。

# android - 如何在 Monodroid 中获得一次性 GPS 位置

> ID：15431316
> 
> 赞同：0
> 
> 时间：2013-03-15T11:32:20.430
> 
> 标签：android, gps, xamarin.android

我正在编写一个应用程序，该应用程序要求在采取特定行动时获取准确的 GPS 位置 - 具体而言，根据法律，当我们说我们在时，我们必须证明我们在某人家中。

我已经实现了一个位置侦听器来更新位置以进行实时跟踪，但我还需要设备 GPS 的按需更新。

使用*GetLastKnownLocation*似乎不会强制 GPS 设备更新 - 相反，我正在获取从*onLocationChanged*事件收到的最后一个位置。

有没有办法强制设备更新并获取**当前**位置，而不是获取最后一个已知位置或等待另一个*onLocationChanged*事件触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:56:33.367

尝试使用以特定时间间隔运行并获取位置数据的线程..以便您以后可以使用它..

# asp.net - ASP.NET 限制应用程序

> ID：15431319
> 
> 赞同：0
> 
> 时间：2013-03-15T11:32:32.013
> 
> 标签：asp.net, security, licensing, asp.net-4.5

目前，我作为第三方（外包）从事多个项目，我无法控制托管。我的应用程序是模块化的，可以随时更改，所需要的只是在 Html / CSS 中进行轻微编辑，它将成为一个全新的站点。

我不希望我的专有代码在未经我同意的情况下泄露到网络上。

由于我的合同只在几个特定的​​域上工作，我希望将它们“锁定”下来，因为不会有同一个应用程序的多个实例在野外运行。

我想到了域锁定，但这将是相当严格的，因为我的客户将来将不再能够更改域。

还有其他便宜的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:36:12.710

您可以尝试在某个地方安装一个注册服务器，该服务器需要系统中的各种库不经常注册。

# java - 在多线程中锁定对象

> ID：15431321
> 
> 赞同：0
> 
> 时间：2013-03-15T11:32:34.043
> 
> 标签：java

我在java中的**对象锁定**中有一个问题。前任。代码：

```
public class A 
{
    private static A a = null; // singleton instance

    private A()
    {

    }

    public static synchronized A getInst()
    {
        if (a == null)
        {
            a = new A();
        }
        return a;
    }

    public synchronized void method1()
    {
        //some action
    }

    public synchronized void method2()
    {
        //some action
    }
} 
```

当一个线程（比如*thread-1*）在里面工作时，`method1()`thread *-1*会在单例对象上获得**锁。**但是另一个线程（比如*thread-2*）想要进入，`method2()`然后它将进入**而不等待** *thread-1*释放锁。*thread-1*和*thread-2*如何共享此锁？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:36:29.180

> 但是另一个线程（比如线程 2）想要进入方法 2，然后它将进入而不等待线程 1 释放锁。

它不会。

一次只有一个线程可以获取对象上的锁。

因此，除非`thread-1`释放锁，否则`thread-2`无法执行`method2`.

读[这个](http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/thread_basics.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:36:32.940

您应该使用`synchronized`使用特定锁定对象的块而不是同步方法。在这种情况下，也很容易阻塞需要锁的方法的特定部分，如果您不需要同步整个方法，这可能会加速多线程访问。

例如

```
Object lock = new Object;
public void method1() {
    synchronized(lock) {
      // do stuff here
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:42:21.700

在单例类中，只有一个实例可用。因此，当调用同步方法时，它将锁定该单个实例。如果存在多个同步方法，则一次只执行一个方法。其他需要等待之前的方法释放锁。所以基本上这个单例类只存在一个线程。

如果您希望其他方法不会因为其他方法锁定而受到影响，请在单例类中使用带对象锁定的同步块。

```
private final Object object1 = new Object();
private final Object object2 = new Object();

public void method1 {
    synchronized(object1) {
    ....
    }
}

public void method2 {
    synchronized(object2) {
    ....
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T11:42:44.647

两个**同步**方法都是*实例方法，因此如果所有线程都引用**同一个实例*，则多个线程将无法同时访问它们。在你的情况下这是真的，因为你只有一个类的实例（**单例**模式），因此如果一个线程正在访问`method1()`，那么其他线程访问`method2()`将进入等待状态，直到 thread1 释放锁或`method1()`完全执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T11:44:07.160

> 但是另一个线程（比如线程 2）想要进入方法 2，然后它将进入而不等待线程 1 释放锁。

虽然 thread1`method1()`使用 A 的*实例*同步执行，但 thread2 将等待它执行`method2()`，这也使用 A 的同一*实例*同步（因为它是**Singleton**）

您可以将其视为同步**代码块**（*关键部分*）而不是同步方法，例如：

```
public void method1()
{
    synchronized (this)
    {
        //some action
    }
}

public void method2()
{
    synchronized (this)
    {
        //some action
    }
} 
```

考虑到这一点，您可以看到两种方法都`this`引用**同一个实例（对象锁）**

# c# - .NET CF 为组合框设置“DroppedDown”

> ID：15431322
> 
> 赞同：4
> 
> 时间：2013-03-15T11:32:36.063
> 
> 标签：c#, combobox, compact-framework

我想在移动程序（.net cf 3.5）上从我的程序中打开一个组合框。

但不存在像`cmbBox.DroppedDown`紧凑框架中 的属性[访问 WinCE ComboBox DroppedDown 属性（.NET CF 2.0）](https://stackoverflow.com/questions/2853847/accesing-wince-combobox-droppeddown-property-net-cf-2-0) 但我不想获得当前状态，而是设置它。

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T12:13:17.747

使用`CB_SHOWDROPDOWN = 0x014F`消息：

```
 public const int CB_GETDROPPEDSTATE = 0x0157;
    public static bool GetDroppedDown(ComboBox comboBox)
    {
        Message comboBoxDroppedMsg = Message.Create(comboBox.Handle, CB_GETDROPPEDSTATE, IntPtr.Zero, IntPtr.Zero);
        MessageWindow.SendMessage(ref comboBoxDroppedMsg);
        return comboBoxDroppedMsg.Result != IntPtr.Zero;
    }

    public const int CB_SHOWDROPDOWN = 0x014F;
    public static bool ToogleDropDown(ComboBox comboBox)
    {
        int expand = GetDroppedDown(comboBox) ? 0 : 1;
        int size = Marshal.SizeOf(new Int32());
        IntPtr pBool = Marshal.AllocHGlobal(size);
        Marshal.WriteInt32(pBool, 0, expand);  // last parameter 0 (FALSE), 1 (TRUE)
        Message comboBoxDroppedMsg = Message.Create(comboBox.Handle, CB_SHOWDROPDOWN, pBool, IntPtr.Zero);
        MessageWindow.SendMessage(ref comboBoxDroppedMsg);
        Marshal.FreeHGlobal(pBool);
        return comboBoxDroppedMsg.Result != IntPtr.Zero;
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T12:09:37.850

您可以采用与参考文章中相同的方法并向其发送消息。

而是`const int CB_SHOWDROPDOWN = 0x14F`用于您的消息。

从该参考示例中，进行了一些修改：

```
Message.Create(comboBox.Handle, CB_SHOWDROPDOWN , (IntPtr)1, IntPtr.Zero); // to open

Message.Create(comboBox.Handle, CB_SHOWDROPDOWN , (IntPtr)0, IntPtr.Zero); // to close 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-09T11:24:56.230

再改进一点：

```
public bool ToogleDropDown()
{
    int expand = GetDroppedDown() ? 0 : 1;
    //int size = Marshal.SizeOf(new Int32());
    //IntPtr pBool = Marshal.AllocHGlobal(size);
    //Marshal.WriteInt32(pBool, 0, expand);  // last parameter 0 (FALSE), 1 (TRUE)
    Message comboBoxDroppedMsg = Message.Create(this.Handle, CB_SHOWDROPDOWN, (IntPtr)expand, IntPtr.Zero);
    MessageWindow.SendMessage(ref comboBoxDroppedMsg);
    //Marshal.FreeHGlobal(pBool);
    return comboBoxDroppedMsg.Result != IntPtr.Zero;
} 
```

# django - 在服务器和客户端 django 应用程序之间链接时非自愿注销

> ID：15431335
> 
> 赞同：1
> 
> 时间：2013-03-15T11:33:05.013
> 
> 标签：django, session, logout

我正在构建一个应用程序客户端和另一个应用程序服务器（带有迷你 Flash 游戏）。我需要在客户端登录才能获得一个按钮，该按钮能够使用带有 iFrame 的 html 页面，而 iFrame 又要求下载其中的游戏。到目前为止，一切都很好。在服务器端，来自客户端的请求需要检查用户是否存在，如果存在则开始发送游戏。好吧，游戏开始发送但停止并且客户端自动注销...我为注销方法（@ **init** .py）设置了断点，但它确实到达了那里...任何人都已经遇到了同样的问题。我是 Django 的新手，也许这是一个已知问题，但到目前为止我还没有找到类似的东西。谢谢！

# google-drive-api - 在 OAuth2 流中检测到多个帐户时是否提供刷新令牌？

> ID：15431337
> 
> 赞同：0
> 
> 时间：2013-03-15T11:33:10.827
> 
> 标签：google-drive-api, google-oauth

通过调试已安装的 Google Drive 应用程序，我注意到在选择其中一个已记录的 Google 帐户打开/创建新文档后未提供刷新令牌。当检测到多帐户时，总是要求选择一个用户来打开/创建文档，但由于没有找到刷新令牌，访问令牌似乎在一段时间后过期，并且 AppEngine 服务（根据 DrEdit python 应用程序）是无法在谷歌驱动器上保存数据（内部错误 500）。

这是一个问题还是我的应用程序应该以不同的方式处理多帐户？

# php - 如何在php中使用curl调用restful zend控制器？

> ID：15431339
> 
> 赞同：0
> 
> 时间：2013-03-15T11:33:12.360
> 
> 标签：php, zend-framework, rest, curl, call

```
<?php
require_once 'Zend/Session/Namespace.php';
class ApiController extends Zend_Rest_Controller
    {
     public function init()
     {
     $this->_helper->layout->disableLayout();
     $this->_helper->viewRenderer->setNoRender(true);
     }
  public function indexAction()
     {
      $query=$this->getRequest()->getParam('query');
      $this->getResponse()
      ->appendBody("hi");
      $this->getResponse()->setHttpResponseCode(200);
     }
 public function getAction()
     {
     $query=$this->getRequest()->getParam('id');
     $this->getResponse()
          ->appendBody($query);
     }
 public function postAction()
     {
      $this->getResponse()
           ->setHttpResponseCode(200)
           ->appendBody("From postAction() creating the requested article");
     }
 public function putAction()
     {
      $this->getResponse()
           ->appendBody("From putAction() updating the requested article");
     }
 public function deleteAction()
     {
      $this->getResponse()
           ->appendBody("From deleteAction() deleting the requested article");
     } 
} 
```

以上是我试图从 php curl 调用它的**REST API**，但我不知道如何调用 post 方法。我还使用休息路线在引导程序中进入默认模块\。

> 这是我的代码片段：

```
<?php
    $ch = curl_init('http://apanel3.newfront.local/api');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,FALSE);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_TIMEOUT, 4);
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT     5.1)");
    $curlresult = curl_exec($curl_connection);
    print_r($curlresult);
?> 
```

我正在尝试使用以下 curl 代码调用我的 api。它正在调用 indexAction。即使我已经将 curlopt_post 设置为 true，我也没有得到想要的输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:31:31.133

我相信 php curl + post 有很多例子。您知道如何访问您的操作（通常进行 http 调用，不使用 curl）吗？

这是类似问题的链接的另一个[答案。](https://stackoverflow.com/questions/2138527/php-curl-http-post-sample-code)

如果您尝试从另一个基于 zend 的应用程序访问您的 API 并想使用 zend 内置方法，那么您应该检查[Zend_Http_Client](http://framework.zend.com/manual/1.12/en/zend.http.client.html)如果您想专门使用 curl 适配器[，](http://framework.zend.com/manual/1.12/en/zend.http.client.adapters.html#zend.http.client.adapters.curl)是否有一个curl 适配器。

**`EDIT:`**

*在您的客户端：*

```
<?php

//
// A very simple PHP example that sends a HTTP POST to a remote site
//

$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, "'http://apanel3.newfront.local/api'");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, "query='where post_parameter = query'");

// receive server response ...
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$server_output = curl_exec($ch);

curl_close($ch);

// further processing ....
if($server_output == 'OK') {
    echo 'Test passed';
} else {
    echo $server_output;
}
?> 
```

*在 indexAction 的 API 端：*

 ~~~~```
public function indexAction()
    {
        $query=$this->getRequest()->getParam('query');
        if($this->getRequest()->isPost()) {

          // method == post, do your processing whatever required here ....

            $this->_forward('post',null,null,$query);
        } elseif ($this->getRequest()->getMethod() == 'GET') {
            // method == get
            $this->_forward('get',null,null,$query);
        }else {               
           // bad request response code 400

            $this->getResponse()
                ->appendBody("not a valid request");
            $this->getResponse()->setHttpResponseCode(400);
        }

    } 
```~~  ~~```
Edit: 
```

我的错误我没有意识到您正在扩展 Zend_Rest_Controller，您的控制器代码似乎很好。现在您可能知道如何通过 PHP 发出 curl 请求了。

关于如何提出**PUT**请求，请[检查这个问题](https://stackoverflow.com/questions/5429675/making-a-put-request-with-php-and-curl)~~~~

# javascript - 使用 Ext JS 切换菜单

> ID：15431342
> 
> 赞同：0
> 
> 时间：2013-03-15T11:33:21.383
> 
> 标签：javascript, extjs

我在这个问题上工作了几个小时，但我没有找到任何答案。我有一个带有按钮和菜单的工具栏：

```
new Ext.Toolbar({
    items: [
        {
            text: 'button1',
            toggleGroup: "draw",
            allowDepress: false,
            pressed: true,
        },
        {
            text: 'button2',
            toggleGroup: "draw",
            allowDepress: false,
            pressed: false,
        },
        {
            text: 'menu',
            enableToggle: true,
            menu: {
                items: [
                    {
                        text: 'menuButton1',
                        toggleGroup: "draw",
                        allowDepress: false,
                    },
                    {
                        text: 'menuButton2',
                        toggleGroup: "draw",
                        allowDepress: false,
                    }
                ]

            }
        }
    ]
}) 
```

（这只是一个非常接近我的代码的例子）

问题：切换不起作用。我只想选择 4 个按钮中的一个。使用 button1 和 button2 进行切换是有效的，但不是使用菜单按钮。问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:50:09.337

默认情况下，extjs 中的菜单不可切换，如果您仍想使用菜单，则可以使用`Ext.menu.CheckItem`并使用选中属性来初始呈现为选中项

# python - 我必须在 settings.py 中设置哪个变量来重定向 nova 服务 url？

> ID：15431346
> 
> 赞同：2
> 
> 时间：2013-03-15T11:33:37.150
> 
> 标签：python, openstack, openstack-horizon

我正在安装[openstack Horizo​​n](http://docs.openstack.org/developer/horizon/)。

当我检查 git hub 上的文档时，他们提到

运行所需的最低 OpenStack 服务集包括：

*   Nova（计算、API、调度程序、网络和卷服务）
*   一目了然
*   基石

但是我的 nova、keystone 和 Glance 服务正在其他机器上运行。

例如：Horizo​​n 在 192.168.1.1 上运行，keystone、nova 和 Glance 在 192.168.1.2 上运行。

```
[root@localhost ~]# keystone service-list
+----------------------------------+----------+----------+---------------------------+
|                id                |   name   |   type   |        description        |
+----------------------------------+----------+----------+---------------------------+
| 5cb184a0a6be458e9ae6319d3f592d22 | keystone | identity | Keystone Identity Service |
| 759d0f09bdcc4537bb981de9889b778d | quantum  | network  |      Network Service      |
| 8c3b1ab783fa492ba7d004ec38af7a49 |   nova   | compute  |    Nova Compute Service   |
| c5ca826057a8483bb68aba8dd81b5126 |  glance  |  image   |    Glance Image Service   |
| fd35e426172146008a1b20dd7b2b5f6d |  cinder  |  volume  |       Cinder Service      |
+----------------------------------+----------+----------+---------------------------+

[root@localhost ~]# keystone endpoint-list
+----------------------------------+--------+---------------------------------------------+------------------------------------------+------------------------------------------+----------------------------------+
|                id                | region |                  publicurl                  |               internalurl                |                 adminurl                 |            service_id            |
+----------------------------------+--------+---------------------------------------------+------------------------------------------+------------------------------------------+----------------------------------+
| 12e0810eb2774f8cb437afcdd903c431 |  test  |             http://*.*.*.*:9292/v1          |         http://127.0.0.1:9292/v1         |         http://127.0.0.1:9292/v1         | c5ca826057a8483bb68aba8dd81b5126 |
| 13e767828adc4add92cec572d220508d |  test  |     http://*.*.*.*:8774/v1.1/% (tenant_id)s | http://127.0.0.1:8774/v1.1/%(tenant_id)s | http://127.0.0.1:8774/v1.1/%(tenant_id)s | 8c3b1ab783fa492ba7d004ec38af7a49 |
| 18b1360d5d0e4d1cbfd4a5076c56d30b |  test  |      http://*.*.*.*:8776/v1/%(tenant_id)s   |  http://127.0.0.1:8776/v1/%(tenant_id)s  |  http://127.0.0.1:8776/v1/%(tenant_id)s  | fd35e426172146008a1b20dd7b2b5f6d |
| 244a4f0323f94017a9de913090811523 |  test  |            http://*.*.*.*:5000/v2.0         |        http://127.0.0.1:5000/v2.0        |          http://*.*.*.*:35357/v2.0       | 5cb184a0a6be458e9ae6319d3f592d22 |
| f98ebb649df54e71a91851cb101af3d6 |  test  |              http://*.*.*.*:9696/           |          http://127.0.0.1:9696/          |          http://127.0.0.1:9696/          | 759d0f09bdcc4537bb981de9889b778d |
+----------------------------------+--------+---------------------------------------------+------------------------------------------+------------------------------------------+----------------------------------+ 
```

我必须设置哪个变量`settings.py`来指向该网址？

我试过`OPENSTACK_KEYSTONE_URL`但没有用:(。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T20:35:30.610

没有“NOVA_URL”设置。所有服务（nova、swift、glance 等）端点均由 Keystone 提供。在 settings.py 中只需要 OPENSTACK_KEYSTONE_URL。

从文档：

> Keystone 还充当**服务目录**，让其他 OpenStack 系统知道 OpenStack 服务的相关 API 端点存在于何处。尤其是 OpenStack Dashboard，它大量使用服务目录，必须对其进行配置才能使 OpenStack Dashboard 正常运行。

您必须首先在 keystone 中定义所有服务：http: [//docs.openstack.org/developer/keystone/configuringservices.html](http://docs.openstack.org/developer/keystone/configuringservices.html)

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:45:56.637

要配置 Horizo​​n 以访问来自另一台主机的数据，您可以`OPENSTACK_HOST`设置`openstack_dashboard/local/local_settings.py`

此常量的默认值为

```
OPENSTACK_HOST = "127.0.0.1" 
```

如果您想从中获取数据，`192.168.1.2`请将其更改为

```
OPENSTACK_HOST = "192.168.1.2" 
```

并重新启动地平线，它将从另一台主机返回数据。

# c# - 如何使用查询 Twitter API 的 Windows 8 Metro 应用程序创建单元测试（来自 linqtotwitter nuGet）

> ID：15431354
> 
> 赞同：1
> 
> 时间：2013-03-15T11:33:52.373
> 
> 标签：c#, api, unit-testing, twitter, windows-8

我正在 Windows 8 中开发一个通过 linqtotwitter nuGet 查询 Twitter API 的应用程序。所以，我有一些功能，如`getFollowers()`, `getFollowing()`, `getScreenName()` `getUserInformation()`. 我所有的函数都在查询 Twitter，我不知道如何使用这些函数创建单元测试。

有人可以给我一个例子吗？

例如我的 getFollowers() 函数：

```
 public List<string> RecupererFollower()
    {
        _log.Info("Fonction récupérer follower");
        _log.Info("On recherche les follower de "+MainPage.texte);
        _log.Info("Cette fonction va créer une liste des id des follower de"+MainPage.texte);

        List<string> idFollowers=new List<string>();
        var followers =
            (from follower in MainPage.twitterCtxProp.SocialGraph
             where follower.Type == SocialGraphType.Followers &&
                   follower.ScreenName == MainPage.texte 
             select follower)
             .ToList();
        idFollowers = followers[0].IDs;

        return idFollowers;

    } 
```

如何使用它创建测试？什么是模拟对象？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:20:20.813

我会看看您使用的 Twitter API 是否实现了一个接口（它可能实现了）。如果是这样，那么您应该能够模拟该连接并测试您的代码是否符合您的预期，然后它使用预期参数调用 API 方法。

[Mock 对象](http://en.wikipedia.org/wiki/Mock_object)本质上是一种将被测代码与更复杂或运行缓慢的代码或连接到另一个系统（如数据库或在本例中为 twitter）的代码断开连接的方法。

如果您不熟悉模拟框架，请查看以下任一建议框架的文档：[RhinoMocks](http://www.hibernatingrhinos.com/oss/rhino-mocks)或[Moq](https://code.google.com/p/moq/)。就个人而言，我更喜欢 Rhino，并且发现它有更好的文档。但是有很多选择。

对于上面的示例，您将使用类似以下内容“模拟”对 twitter API 的调用，然后您的代码将使用您提供的结果，就好像它调用了 twitter。

```
mockTwitterAPI.Setup(x => x.SocialGraph).Returns(MyCustomDataForThisTest()); 
```

# c# - 从字符串 C# 构建层次结构

> ID：15431356
> 
> 赞同：-1
> 
> 时间：2013-03-15T11:33:58.150
> 
> 标签：c#, string, lambda

我有一个字符串集合：

```
"Alberton;Johannesburg"
"Allendale;Phoenix"
"Brackenhurst;Alberton"
"Cape Town;"
"Durban;"
"Johannesburg;"
"Mayville;Durban"
"Phoenix;Durban"
"Sandton;Johannesburg" 
```

我想以最快的方式构造成层次结构，例如：

*   约翰内斯堡

    *   艾伯顿
        *   蕨菜赫斯特
    *   桑顿
*   开普敦

*   德班

    *   凤凰
        *   阿朗代尔
    *   梅维尔

目前我已经嵌套了 for 循环和检查，但希望我可以通过单个 LAMBDA 查询来实现这一点？

上面提到的字符串在一个列表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:52:47.707

您没有指定任何特定的数据结构，所以我只是使用了一个名为 Area 的类，其中包含一个其自身的子级列表。此外，它在 2 行 linq 中。也没有检查一个区域是否是 2 个不同父母的孩子，因为代码是。这是我使用的测试代码（等号注释之间的相关行）：

```
[TestFixture]
public class CitiesTest
{
    [Test]
    public void Test()
    {
        var strings = new List<string>
            {
                "Alberton;Johannesburg",
                "Allendale;Phoenix",
                "Brackenhurst;Alberton",
                "Cape Town;",
                "Durban;",
                "Johannesburg;",
                "Mayville;Durban",
                "Phoenix;Durban",
                "Sandton;Johannesburg"
            };

        //===================================================
        var allAreas = strings.SelectMany(x=>x.Split(';')).Where(x=>!string.IsNullOrWhiteSpace(x)).Distinct().ToDictionary(x=>x, x=>new Area{Name = x});

        strings.ForEach(area =>
            {
                var areas = area.Split(';');

                if (string.IsNullOrWhiteSpace(areas[1]))
                    return;

                var childArea = allAreas[areas[0]];
                if (!allAreas[areas[1]].Children.Contains(childArea))
                    allAreas[areas[1]].Children.Add(childArea);

                childArea.IsParent = false;
            });

        var result = allAreas.Select(x=>x.Value).Where(x => x.IsParent);
        //===================================================
    }

    public class Area
    {
        public string Name;
        public bool IsParent;
        public List<Area> Children { get; set; }

        public Area()
        {
            Children = new List<Area>();
            IsParent = true;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:53:27.503

我准备了类似 lambda 的解决方案，但是您应该真正考虑一下它是否比您当前的解决方案更具可读性/效率：

助手扩展方法：

```
public static class ChildrenGroupExtensions
{
    public static List<CityInfo> GetChildren(this IEnumerable<IGrouping<string, City>> source, string parentName)
    {
        var cities = source.SingleOrDefault(g => g.Key == parentName);
        if (cities == null)
            return new List<CityInfo>();

        return cities.Select(c => new CityInfo { Name = c.Name, Children = source.GetChildren(c.Name) }).ToList();
    }
} 
```

助手类：

```
public class City
{
    public string Name { get; set; }
    public string Parent { get; set; }
}

public class CityInfo
{
    public string Name { get; set; }
    public List<CityInfo> Children { get; set; }
} 
```

用法：

```
var groups = (from i in items
                let s = i.Split(new[] { ';' })
                select new City { Name = s[0], Parent = s[1] }).GroupBy(e => e.Parent);

var root = groups.GetChildren(string.Empty); 
```

`items`你在哪里`List<string>`

您可以使用类似的简单辅助方法查看结果：

```
private static void PrintTree(List<CityInfo> source, int level)
{
    if (source != null)
    {
        source.ForEach(c =>
        {
            Enumerable.Range(1, level).ToList().ForEach(i => Console.Write("\t"));
            Console.WriteLine(c.Name);
            PrintTree(c.Children, level + 1);
        });
    }
} 
```

结果是：

```
Cape Town
Durban
        Mayville
        Phoenix
                Allendale
Johannesburg
        Alberton
                Brackenhurst
        Sandton 
```

# mysql - 使用子查询选择最小值

> ID：15431358
> 
> 赞同：2
> 
> 时间：2013-03-15T11:34:09.180
> 
> 标签：mysql, database, join, subquery

我需要编写一个查询来从每个商家那里获取最低价格并输出价格链接（p_link）和一些其他信息，例如商家名称+评级。

我们有一个价格表 (tgmp_prices)、一个商家表 (tgmp_merchants) 和一个附属产品 ID 表 (tgmp_affiliates)

我已经得到查询来获取我需要的所有价格和数据：

```
SELECT p_id, p_m_id, p_prod_label, a_platform, p_link, p_price, m_title, m_link, m_avg_rating 
FROM tgmp_affiliates ga 
JOIN tgmp_prices p 
    ON ga.a_code = p.p_gtin 
        AND ga.a_code != '' 
JOIN tgmp_merchants m 
    ON m.m_id = p.p_m_id 
WHERE ga.site_id = '34' 
    AND p.site_id = '34' 
    AND ga.a_parent = '25573' 
    AND p_type = 'games' 
    AND m.m_hide = 0 
ORDER BY p.p_price ASC 
```

我只需要按商家 ID（p.p_m_id 或 m.m_id）对价格进行分组，然后为每个商家选择最低价格。

```
SELECT p_id, p_m_id, p_prod_label, a_platform, p_link, p_price, m_title, m_link, m_avg_rating 
FROM tgmp_affiliates ga 
JOIN tgmp_prices p 
    ON ga.a_code = p.p_gtin 
        AND ga.a_code != '' 
JOIN tgmp_merchants m 
    ON m.m_id = p.p_m_id 
WHERE ga.site_id = '34' 
    AND p.site_id = '34' 
    AND ga.a_parent = '25573' 
    AND p_type = 'games' 
    AND m.m_hide = 0 
GROUP BY m.m_id
ORDER BY p.p_price ASC 
```

如果我在 ORDER BY 之前添加 GROUP BY m.m_id 我会得到 16 个结果，每个商家 1 个。我只需要使这个价格最低。所以我尝试添加一个子查询，其中价格表（tgmp_prices）是这样连接的：

```
SELECT p_id, p_m_id, p_prod_label, a_platform, p_link, p_price, m_title, m_link, m_avg_rating 
FROM tgmp_affiliates ga 
JOIN tgmp_prices p 
    ON ga.a_code = p.p_gtin 
        AND ga.a_code != '' 
        AND p.p_price = ( 
            SELECT MIN(p.p_price) 
            FROM tgmp_prices 
            WHERE p.p_m_id = m.m_id
        ) 
JOIN tgmp_merchants m 
    ON m.m_id = p.p_m_id 
WHERE ga.site_id = '34' 
    AND p.site_id = '34' 
    AND ga.a_parent = '25573' 
    AND p_type = 'games' 
    AND m.m_hide = 0 
GROUP BY m.m_id
ORDER BY p.p_price ASC 
```

这并没有给我正确的结果 - 我认为问题可能是运行子查询时 m.m_id 不可用，所以我尝试在子查询中加入商家表，但我仍然结束具有相同的结果集。

DDL如下：

```
CREATE TABLE IF NOT EXISTS `tgmp_affiliates` (
    `a_id` int(8) NOT NULL AUTO_INCREMENT,
    `site_id` int(6) NOT NULL,
    `a_parent` int(8) NOT NULL,
    `a_code` varchar(32) NOT NULL,
    `a_type` varchar(32) NOT NULL,
    `a_platform` varchar(12) NOT NULL,
    PRIMARY KEY (`a_id`),
    UNIQUE KEY `site_id` (`site_id`,`a_parent`,`a_code`,`a_type`,`a_platform`),
    KEY `a_code` (`a_code`),
    KEY `a_parent` (`a_parent`),
    KEY `a_platform` (`a_platform`),
    KEY `a_type` (`a_type`),
    KEY `site_id_2` (`site_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 ;

-- --------------------------------------------------------

--
-- Table structure for table `tgmp_merchants`
--

CREATE TABLE IF NOT EXISTS `tgmp_merchants` (
    `m_id` int(8) NOT NULL AUTO_INCREMENT,
    `site_id` int(6) NOT NULL,
    `m_title` varchar(128) NOT NULL,
    `m_url` text NOT NULL,
    `m_link` varchar(128) NOT NULL,
    `m_favicon` text NOT NULL,
    `m_avg_rating` tinyint(1) NOT NULL,
    `m_hide` tinyint(1) NOT NULL DEFAULT '0',
    PRIMARY KEY (`m_id`),
    UNIQUE KEY `m_title` (`m_title`,`m_link`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 ;

-- --------------------------------------------------------

--
-- Table structure for table `tgmp_prices`
--

CREATE TABLE IF NOT EXISTS `tgmp_prices` (
    `p_id` int(8) NOT NULL AUTO_INCREMENT,
    `site_id` int(6) NOT NULL,
    `p_m_id` int(8) NOT NULL,
    `p_prod_label` varchar(128) NOT NULL,
    `p_gtin` varchar(64) NOT NULL,
    `p_parent` int(8) NOT NULL,
    `p_link` text NOT NULL,
    `p_price` decimal(8,2) NOT NULL,
    `p_delivery` decimal(8,2) NOT NULL,
    `p_currencey` varchar(10) NOT NULL,
    `p_avail` varchar(32) NOT NULL,
    `p_condition` varchar(32) NOT NULL,
    `p_when` datetime NOT NULL,
    `p_type` varchar(32) NOT NULL,
    `p_hide` tinyint(1) NOT NULL DEFAULT '0',
    PRIMARY KEY (`p_id`),
    UNIQUE KEY `p_gtin` (`p_gtin`,`p_m_id`,`p_price`,`p_delivery`),
    KEY `p_price` (`p_price`),
    KEY `p_parent` (`p_parent`),
    KEY `site_id` (`site_id`),
    KEY `p_gtin_2` (`p_gtin`),
    KEY `p_type` (`p_type`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 ; 
```

我现在已将查询修改为以下内容：

```
SELECT p_id, p_m_id, p_prod_label, a_platform, p_link, p_price, m_title, m_link, m_avg_rating 
FROM tgmp_affiliates ga 
JOIN tgmp_prices p 
    ON ga.a_code = p.p_gtin 
        AND ga.a_code != '' 
        AND p.p_price = (
            SELECT MIN(tp.p_price) FROM tgmp_prices tp
                WHERE tp.p_m_id = m.m_id
                AND tp.p_parent = '25573'
    )
JOIN tgmp_merchants m 
    ON m.m_id = p.p_m_id 
WHERE ga.site_id = '34' 
    AND p.site_id = '34' 
    AND ga.a_parent = '25573' 
    AND p_type = 'games' 
    AND m.m_hide = 0 
GROUP BY m.m_id
ORDER BY p.p_price ASC 
```

这给出了正确数量的结果，它们非常接近正确的结果集，但我仍然没有得到每个商家的最低价格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:17:12.143

也许 ？：

```
SELECT p_id,
       p_m_id,
       p_prod_label,
       a_platform,
       p_link,
       p_price,
       m_title,
       m_link,
       m_avg_rating
FROM tgmp_affiliates ga
JOIN tgmp_prices p ON ga.a_code = p.p_gtin
AND ga.a_code != ''
JOIN tgmp_merchants m ON m.m_id = p.p_m_id
WHERE ga.site_id = '34'
  AND p.site_id = '34'
  AND ga.a_parent = '25573'
  AND p_type = 'games'
  AND m.m_hide = 0
  AND p.p_price = (SELECT MIN(p2.p_price) 
                   FROM tgmp_prices p2
                   WHERE p2.p_m_id = m.m_id)
ORDER BY p.p_price ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T12:03:18.490

您使用子查询作为标准，而不是将其添加为额外的记录源。这是一个调整：

```
SELECT p_id, p_m_id, p_prod_label, a_platform
       , p_link, p_price, m_title, m_link, m_avg_rating, MinPrice
FROM tgmp_affiliates ga 
JOIN tgmp_prices p 
    ON ga.a_code = p.p_gtin 
        AND ga.a_code != ''
JOIN tgmp_merchants m 
    ON m.m_id = p.p_m_id 

JOIN
    (
        SELECT tp.p_m_id as lp_m_id, MIN(tp.p_price) AS MinPrice FROM tgmp_prices tp
            WHERE tp.p_parent = '25573'
            GROUP BY tp.p_m_id
    ) LowestPriceForEachMerchant
    ON m.m_id = LowestPriceForEachMerchant.lp_m_id

WHERE ga.site_id = '34' 
    AND p.site_id = '34' 
    AND ga.a_parent = '25573' 
    AND p_type = 'games' 
    AND m.m_hide = 0 
GROUP BY m.m_id
ORDER BY p.p_price ASC 
```

# php - file_exists() 在没有开启安全模式的情况下失败

> ID：15431359
> 
> 赞同：1
> 
> 时间：2013-03-15T11:34:13.260
> 
> 标签：php

```
 spl_autoload_register(function ($className) 
        {
            if (file_exists($className . '.php'))
            {
                require_once($className . '.php');
            }
            else
            {
                throw new Exception('Could not load class: ' . $className);
            }
        });

        //Load models and save them in variable instances
        try 
        {
            $this->database = new Database  (
                                                $config['DB']['HOST_IP'], 
                                                $config['DB']['DATABASE_NAME'], 
                                                $config['DB']['USERNAME'], 
                                                $config['DB']['PASSWORD']
                                            );
            //Set the initial language for our template model.
            Template::setLanguage();
        }
        catch (Exception $e) 
        {
            echo $e->getMessage();
        } 
```

如果我擦除脚本有效`file_exists`，但`file_exists`无论如何都会返回 false。

这可能是什么原因造成的？

另外，我收到一条错误消息：`Uncaught exception 'Exception' with message 'Could not load class: Template'`. 是因为模板类是静态的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:41:48.913

您的代码有 2 个错误。

1.  而不是有意义和合理的系统错误消息，您正在生态只是无用和笼统的错误消息，它不能帮助你
2.  您`try-catch`只是用来回显一条消息。这是致命的错误。

因此，只需删除代码中的所有 try-catch 块并再次运行它。如果您不打算*处理*错误，则
永远不要使用`try..catch`

 *而不是设置错误报告以便能够看到错误消息

```
error_reporting(E_ALL);
ini_set('display_errors',1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T02:31:23.600

问题是我的 PHP 文件有两个扩展名。（例如 index.php.php） 遗憾的是，windows 环境没有配置，所以我很难找到问题所在。*

# google-apps-script - 数组中的错误：第一行的最后一个值为“真”

> ID：15431362
> 
> 赞同：0
> 
> 时间：2013-03-15T11:34:16.980
> 
> 标签：google-apps-script, google-sheets

我想创建一个脚本 - 存档从工作表“注册”到“存档”离开建筑物的人 - 删除空行或清除离开的人的行（单元格在 OUT 中不为空）

这里是我的脚本：

```
 function archive() {
  //variables pour la feuille registre
  var registre = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Registre"); // le script se positionne sur la feuille Registre
  var lastRowReg = registre.getLastRow();   // obtenir le numero de la dernière ligne éditée
  var data = registre.getRange(2, 1, lastRowReg-1,7 ).getValues();
  //variables pour la feuille archive
  var archive = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Archive");
  var lastRowArch = archive.getLastRow();
  var target = new Array();
  //recherche
  for (var i = 0; i < data.length; ++i) { //création de la boucle qui va analyser chaque ligne du tableau

    if (data[i][6]=!'') { //pour les lignes la cellule heure de sortie est vide, 
      target.push(data[i]);
      egistre.getRange(i+2,1,1,7).clearContent();
      }
    if(target.length>0){
    archive.getRange(lastRowArch+1, 1, target.length,target[0].length).setValues(target); 
    }
  }

} 
```

调试：数据=

> [[“小姐”，“muss”，“gh”，“bazar”，“da45adazd54”，“13h00”，真]，[“小姐”，“muss”，“gh”，“bazar”，“da45adazd54”， "13h00", "14h00"]]

为什么是真的而不是 13h45？

[文档链接](https://docs.google.com/spreadsheet/ccc?key=0AudqNmp-I3KsdC1WLUN5YTdqQzlYWnlKYzU5ME9sWXc&usp=sharing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:39:19.480

请这样尝试：

```
function archive() {
  //variables pour la feuille registre
  var registre = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Registre"); // le script se positionne sur la feuille Registre
  var lastRowReg = registre.getLastRow();   // obtenir le numero de la dernière ligne éditée
  var data = registre.getRange(2, 1, lastRowReg-1,7 ).getValues();
  //variables pour la feuille archive
  var archive = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Archive");
  var lastRowArch = archive.getLastRow();
  var target = new Array();
  //recherche
  for (var i = 0; i < data.length; ++i) { //création de la boucle qui va analyser chaque ligne du tableau

    if (data[i][6]=='') { //pour les lignes la cellule heure de sortie est vide, 
      target.push(data[i]);
      registre.getRange(i+2,1,1,7).clearContent();
      }
    }
    if(target.length>0){
    archive.getRange(lastRowArch+1, 1, target.length,target[0].length).setValues(target); 
  }
} 
```

1.  从数组回写到工作表必须放在循环之外
2.  if 语句是错误的（至少与您的评论和描述不符......）

I test on a copy of your doc and it seems to work as expected... I didn't have the 'true' value.

* * *

**EDIT following your comments:**

Now I think I understood correctly what you were willing to do. I used a slightly different approach that works faster and more clearly (in my opinion)

I used 2 arrays, one with data for sheet 2 (archive) and one for the rows to keep (I called it newsource) so now I can clear the whole source sheet (except headers) and write the whole data in one shot without blank rows.

Here is the code, tested and working.

```
function archive() {
  //variables pour la feuille registre
  var registre = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Registre"); // le script se positionne sur la feuille Registre
  var lastRowReg = registre.getLastRow();   // obtenir le numero de la dernière ligne éditée
  var data = registre.getRange(2, 1, lastRowReg-1,7 ).getValues();
  //variables pour la feuille archive
  var archive = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Archive");
  var lastRowArch = archive.getLastRow();
  var target = new Array();
  var newsource = new Array();
  //recherche
  for (var i = 0; i < data.length; ++i) { //création de la boucle qui va analyser chaque ligne du tableau

    if (data[i][6]!='') { //pour les lignes la cellule heure de sortie est vide, 
      target.push(data[i]);
      }else{
      newsource.push(data[i]);
    }
  }
  if(target.length>0){
   archive.getRange(lastRowArch+1, 1, target.length,target[0].length).setValues(target); 
   }
  Logger.log(lastRowReg-1+' = '+newsource.length+' + '+target.length)
  registre.getRange(2, 1, lastRowReg-1,7 ).clearContent();
   if(newsource.length>0){
     registre.getRange(2,1,newsource.length,newsource[0].length).setValues(newsource);
    }
} 
```

I added a Logger.log that shows a sort of "verification" of row counts to be sure no row is lost...

# c++ - cudaMemcpy 分段错误

> ID：15431365
> 
> 赞同：12
> 
> 时间：2013-03-15T11:34:25.897
> 
> 标签：c++, cuda, segmentation-fault

我已经被这个错误困扰了很长一段时间，所以我决定在这里发布它。

调用 cudaMemcpy 时会发生此分段错误：

```
CurrentGrid->cdata[i] = new float[size];
cudaMemcpy(CurrentGrid->cdata[i], Grid_dev->cdata[i], size*sizeof(float),\
                cudaMemcpyDeviceToHost); 
```

`CurrentGrid`并且`Grid_dev`分别是指向`grid`主机和设备上的类对象的指针，在此上下文中 i=0。类成员`cdata`是一个浮点型指针数组。为了调试，就在调用 cudaMemcpy 之前，我打印了 的每个元素的值、和`Grid_Dev->cdata[i]`的地址`CurrentGrid->cdata[i]`以及`Grid_dev->cdata[i]`的值`size`，看起来都不错。但它仍然以“Segmentation fault (core dumped)”告终，这是唯一的错误消息。cuda-memcheck 只给出“进程没有成功终止”。我目前无法使用 cuda-gdb。关于去哪里有什么建议吗？

**更新**：现在看来我已经通过 cudaMalloc 解决了这个问题，设备上的另一个浮点指针 A 和 cudaMemcpy Grid_dev->cdata[i] 的值到 A，然后 cudaMemcpy A 到主机。所以上面写的这段代码就变成了：

```
float * A;
cudaMalloc((void**)&A, sizeof(float));
...
...
cudaMemcpy(&A, &(Grid_dev->cdata[i]), sizeof(float *), cudaMemcpyDeviceToHost);    
CurrentGrid->cdata[i] = new float[size];
cudaMemcpy(CurrentGrid->cdata[i], A, size*sizeof(float), cudaMemcpyDeviceToHost); 
```

我这样做是因为 valgrind 弹出“大小为 8 的无效读取”，我认为这是指`Grid_dev->cdata[i]`. 我用 gdb 再次检查它，打印出`Grid_dev->cdata[i]`为 NULL 的值。所以我想即使在这个 cudaMemcpy 调用中我也不能直接取消引用设备指针。但为什么 ？[根据该线程](https://stackoverflow.com/questions/14790999/how-to-pass-a-c-class-with-array-of-pointers-to-cuda)底部的评论，我们应该能够在 cudaMemcpy 函数中取消引用设备指针。

另外，我不知道 cudaMalloc 和 cudaMemcpy 如何工作的底层机制，但我认为通过 cudaMalloc 一个指针，在这里说 A，我们实际上分配这个指针指向设备上的某个地址。并且通过 cudaMemcpy`Grid_dev->cdata[i]`到 A 如上面修改的代码中，我们重新分配指针 A 以指向数组。那我们在cudaMalloced时不就丢失了A指向的上一个地址的轨迹吗？这会导致内存泄漏还是什么？如果是，我应该如何正确解决这种情况？谢谢！

作为参考，我将发生此错误的完整函数的代码放在下面。

非常感谢！

```
__global__ void Print(grid *, int);
__global__ void Printcell(grid *, int);
void CopyDataToHost(param_t p, grid * CurrentGrid, grid * Grid_dev){

    cudaMemcpy(CurrentGrid, Grid_dev, sizeof(grid), cudaMemcpyDeviceToHost);
#if DEBUG_DEV
    cudaCheckErrors("cudaMemcpy1 error");
#endif
    printf("\nBefore copy cell data\n");
    Print<<<1,1>>>(Grid_dev, 0);            //Print out some Grid_dev information for 
    cudaDeviceSynchronize();                //debug 
    int NumberOfBaryonFields = CurrentGrid->ReturnNumberOfBaryonFields();
    int size = CurrentGrid->ReturnSize();
    int vsize = CurrentGrid->ReturnVSize();
    CurrentGrid->FieldType = NULL;
    CurrentGrid->FieldType = new int[NumberOfBaryonFields];
    printf("CurrentGrid size is %d\n", size);
    for( int i = 0; i < p.NumberOfFields; i++){
        CurrentGrid->cdata[i] = NULL;
        CurrentGrid->vdata[i] = NULL;
        CurrentGrid->cdata[i] = new float[size];
        CurrentGrid->vdata[i] = new float[vsize];

        Printcell<<<1,1>>>(Grid_dev, i);//Print out element value of Grid_dev->cdata[i]
        cudaDeviceSynchronize();        

        cudaMemcpy(CurrentGrid->cdata[i], Grid_dev->cdata[i], size*sizeof(float),\
                cudaMemcpyDeviceToHost);               //where error occurs
#if DEBUG_DEV
        cudaCheckErrors("cudaMemcpy2 error");
#endif
        printf("\nAfter copy cell data\n");
        Print<<<1,1>>>(Grid_dev, i);
        cudaDeviceSynchronize();
        cudaMemcpy(CurrentGrid->vdata[i], Grid_dev->vdata[i], vsize*sizeof(float),\
                cudaMemcpyDeviceToHost);
#if DEBUG_DEV
        cudaCheckErrors("cudaMemcpy3 error");
#endif
    }
    cudaMemcpy(CurrentGrid->FieldType, Grid_dev->FieldType,\
            NumberOfBaryonFields*sizeof(int), cudaMemcpyDeviceToHost);
#if DEBUG_DEV
    cudaCheckErrors("cudaMemcpy4 error");
#endif
} 
```

编辑：这是来自 valgrind 的信息，我试图从中找出内存泄漏发生的位置。

```
==19340== Warning: set address range perms: large range [0x800000000, 0xd00000000) (noaccess)
==19340== Warning: set address range perms: large range [0x200000000, 0x400000000) (noaccess)
==19340== Invalid read of size 8
==19340==    at 0x402C79: CopyDataToHost(param_t, grid*, grid*) (CheckDevice.cu:48)
==19340==    by 0x403646: CheckDevice(param_t, grid*, grid*) (CheckDevice.cu:186)
==19340==    by 0x40A6CD: main (Transport.cu:81)
==19340==  Address 0x2003000c0 is not stack'd, malloc'd or (recently) free'd
==19340== 
==19340== 
==19340== Process terminating with default action of signal 11 (SIGSEGV)
==19340==  Bad permissions for mapped region at address 0x2003000C0
==19340==    at 0x402C79: CopyDataToHost(param_t, grid*, grid*) (CheckDevice.cu:48)
==19340==    by 0x403646: CheckDevice(param_t, grid*, grid*) (CheckDevice.cu:186)
==19340==    by 0x40A6CD: main (Transport.cu:81)
==19340== 
==19340== HEAP SUMMARY:
==19340==     in use at exit: 2,611,365 bytes in 5,017 blocks
==19340==   total heap usage: 5,879 allocs, 862 frees, 4,332,278 bytes allocated
==19340== 
==19340== LEAK SUMMARY:
==19340==    definitely lost: 0 bytes in 0 blocks
==19340==    indirectly lost: 0 bytes in 0 blocks
==19340==      possibly lost: 37,416 bytes in 274 blocks
==19340==    still reachable: 2,573,949 bytes in 4,743 blocks
==19340==         suppressed: 0 bytes in 0 blocks
==19340== Rerun with --leak-check=full to see details of leaked memory
==19340== 
==19340== For counts of detected and suppressed errors, rerun with: -v
==19340== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 2 from 2) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-15T15:00:28.337

我相信我知道问题出在哪里，但要确认它，查看您用于在设备上设置类的代码会很有用`Grid_dev`。

当要在设备上使用一个类或其他数据结构时，并且该类中有指针，这些指针指向内存中的其他对象或缓冲区（可能在设备内存中，对于将在设备上使用的类），然后使这个顶级类在设备上可用的过程变得更加复杂。

假设我有这样的课程：

```
class myclass{
  int myval;
  int *myptr;
  } 
```

我可以在主机上实例化上面的类，然后`malloc`一个数组`int`并将该指针分配给`myptr`，一切都会好起来的。要使此类仅在设备上可用且仅在设备上可用，过程可能相似。我可以：

1.  cudaMalloc 指向将保存的设备内存的指针`myclass`
2.  `myclass`（可选）使用 cudaMemcpy 将主机上的实例化对象从步骤 1 复制到设备指针
3.  在设备上，使用`malloc`或`new`分配设备存储空间`myptr`

如果我不想访问`myptr`在主机上分配的存储，上述顺序很好。但是，如果我*确实*希望主机可以看到该存储，我需要一个不同的顺序：

1.  cudaMalloc 指向将保存的设备内存的指针`myclass`，我们称之为`mydevobj`
2.  （可选）使用 cudaMemcpy将主机上的实例化对象从步骤 1 复制`myclass`到设备指针`mydevobj`
3.  在宿主机上创建一个单独的int指针，我们称之为`myhostptr`
4.  设备上的cudaMalloc`int`存储用于`myhostptr`
5.  cudaMemcpy从主机到设备指针的*指针值*`myhostptr``&(mydevobj->myptr)`

之后，您可以`cudaMemcpy`将嵌入指针指向的数据指向`myptr`分配的区域（通过`cudaMalloc`）`myhostptr`

请注意，在第 5 步中，由于我正在获取此指针位置的地址，因此此 cudaMemcpy 操作只需要`mydevobj`主机上的指针，这在 cudaMemcpy 操作中有效（仅）。

然后将正确设置设备指针的值`myint`以执行您尝试执行的操作。如果您想将 cudaMemcpy 数据传入和传出主机，请在任何 cudaMemcpy 调用中`myint`使用指针，*而不是*. 如果我们尝试使用，则需要取消引用，然后使用它来检索存储在 中的指针，然后将该指针用作到/从位置的副本。这在主机代码中是不可接受的。如果你尝试这样做，你会得到一个段错误。（请注意，通过类比，我的就像你的，我的就像你的）`myhostptr` *`mydevobj->myptr``mydevobj->myptr``mydevobj``myptr``mydevobj``Grid_dev``myptr``cdata`*

 *总的来说，这是一个在你第一次遇到它时需要仔细考虑的概念，所以像这样的问题在 SO 上出现了一些频率。您可能想研究其中一些问题以查看代码示例（因为您尚未提供设置的代码`Grid_dev`）：

1.  [示例 1](https://stackoverflow.com/questions/14790999/how-to-pass-a-c-class-with-array-of-pointers-to-cuda/14791979#14791979)
2.  [示例 2](https://stackoverflow.com/questions/14284964/cuda-how-to-allocate-memory-for-data-member-of-a-class/14286341#14286341)
3.  [示例 3](https://stackoverflow.com/questions/30082991/memory-allocation-on-gpu-for-dynamic-array-of-structs)*

# javascript - 避免在锚点（html）中更改位置

> ID：15431367
> 
> 赞同：0
> 
> 时间：2013-03-15T11:34:33.177
> 
> 标签：javascript, html

我正在考虑处理单击事件的最佳解决方案，以避免更改浏览器中的位置（#）。

这是两种情况：

```
1\. <a class="someclass" href="#">Click me</a>
   (This is ok, but adds a "#" in the url)  

2\.  <a class="someclass" href="javascript:void(0)">Click me</a>
   (Seems to be better, the url never changes, but I don't know about compatibility in all browsers, or even when javascript is disabled) 
```

哪一个是最好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:38:24.160

据我所知，该`href`参数不是必需的。只需将其删除，仍然可以连接您需要的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:38:54.470

在第一种方法中..只需添加`return false`您处理点击事件的位置。然后它不会添加`#`到 URL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:40:45.570

使用`Javascript:void(0);`.

`void`操作员几乎只能强制点击什么都不做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T11:44:24.227

您应该使用`href="javascript:void(0)"`与相邻，`onClick`因为它会阻止浏览器加载新页面。如果您想使用`onCLick`超链接并要求客户端在单击超链接后不直接进入新页面，请返回 void(0) 以下`href='javascript:void(0)'`将防止这种情况发生。

# java - 注入枚举（Spring）

> ID：15431372
> 
> 赞同：2
> 
> 时间：2013-03-15T11:34:41.683
> 
> 标签：java, spring

我有一个`enum` ，我需要用spring bean注入它。

我的枚举是：

```
public enum Status {

IN_PROCESS(1,"In process"),
DONE(0,"Successful"), 
CANNOT_DONE(2,"Unsuccessful");

private final int code;
private final String description;

private Status(int code, String description){
    this.code = code;
    this.description = description;
}

public int getCode() {
    return code;
}

public String getDescription() {
    return description;
}

} 
```

我`bean.xml`应该是什么样子的`enum`..

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:23:53.057

从技术上讲，您可以尝试将 enum 注册为这样的 bean：

```
@Configuration
class EnumProducer {
   @Bean
   Status inProgress() {
        return Status.IN_PROGRESS;
   }
} 
```

然后像这样注入它：

```
@Autowired("inProgress") Status status. 
```

但是这样做**没有任何意义**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:32:23.933

你不能通过它的构造函数从这个 Enum 之外（不是在 java 中也不是在 Spring 中）创建一个 Enum，因为 Enum 值是常量！

只能从 Enum 声明本身调用 Enum 构造函数。

当然你可以使用这个 Enum 的实例，即使在 Spring 中，但你不能创建它：

```
public Class Entity {    
    public Entity(Status status) {...}
}

<bean name="entity" class="package.Entity">
   <property name="status" value="IN_PROCESS" />
</bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:27:19.830

在这里查看：http `<util:constant/>`:
[//static.springsource.org/spring/docs/3.0.x/reference/xsd-config.html](http://static.springsource.org/spring/docs/3.0.x/reference/xsd-config.html)

# dns - DNSCMD命令生成的dns文件的编码格式是什么

> ID：15431376
> 
> 赞同：0
> 
> 时间：2013-03-15T11:35:09.180
> 
> 标签：dns, mdns

我的 DNS 区域中有一些 Unicode Host A 记录名称（如 abcáxyz）。当我使用 dnscmd /zoneexport 时，它会创建一个区域文件。当我在记事本或任何文本编辑器中打开此文件时，它会显示记录名称为 abc\303\241xyz。我想通过程序读取这个文件，我想知道 dnscmd 在写入文件时使用哪种类型的编码来将此类（á）字符表示为 \303\241。

我尝试使用以下编码格式

ISO-8859-1、ISO-8859-15、ISO-8859-9、windows-1252、windows-1254。一切都为我工作，但我不确定使用哪一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:24:39.983

我也在微软论坛上发布了这个问题，从那里我得到了答案

[http://social.technet.microsoft.com/Forums/en-US/winserverNIS/thread/35f954c9-2372-4175-9ef0-4fa4839fe408](http://social.technet.microsoft.com/Forums/en-US/winserverNIS/thread/35f954c9-2372-4175-9ef0-4fa4839fe408)

# ios - 从电子邮件中的附件启动 ipad 应用程序

> ID：15431378
> 
> 赞同：0
> 
> 时间：2013-03-15T11:35:14.133
> 
> 标签：ios, mfmailcomposeviewcontroller, zipfile, file-manager, custom-url

我正在发送一个包含图像和文本文件的 zip 文件作为 ipad 中的电子邮件附件。现在我需要的功能是当用户点击附件以下载并将 zip 文件保存在应用程序的文档文件夹中时，我想启动我的应用程序。我怎样才能完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:38:42.673

您无法通过单击电子邮件中的附件链接来启动您的 iPhone/iPad 应用程序。但是，您可以通过为您的应用设置自定义 URL 来打开您的应用。

有关为您的应用设置自定义 URL 的更多信息，您可以查看以下问题，可能通过这种方式可以实现您的目标：

[如何使用 Xcode 4 注册自定义应用程序打开 URL 方案？](https://stackoverflow.com/questions/8201724/how-to-register-a-custom-app-opening-url-scheme-with-xcode-4)

# c# - WCF MVC 字段保持空白...为什么？

> ID：15431380
> 
> 赞同：0
> 
> 时间：2013-03-15T11:35:22.127
> 
> 标签：c#, asp.net-mvc, web-services

**测试**

```
public string username { get; set; }
public void Test(string test)
{
    this.username = test;
}
public string Get()
{
     return this.username   
} 
```

**测试**

```
[OperationContract]
public string Get();

[OperationContract]
public void Test(string test); 
```

**测试项目**

```
var webapi3 = new v3.TestClient("BasicHttpBinding_IProductData1");
webapi3.Test("TestString");
var u = webapi3.Get(); 
```

**问题**

为什么`u`仍然是空的，不管我尝试什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T11:39:07.733

`public void Test(string test) { this.username = test; // test not username? }`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:38:33.427

第二个调用`Get()`可能会在另一个线程上接听。如果要在服务器上设置状态，则需要设置为`username`静态。

您正在通过 HTTP（一种无状态协议）进行通信。

除了使字段静态之外，还有其他选择，但这至少可以通过测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:41:31.233

我假设

```
public void Test(string test)
{
   this.username = username;
} 
```

应该：

```
public void Test(string test)
{
   this.username = test;
} 
```

# iphone - AFJSONRequestOperation 因“数据参数为 nil”而崩溃 NSJSONSerialization 错误

> ID：15431381
> 
> 赞同：2
> 
> 时间：2013-03-15T11:35:23.930
> 
> 标签：iphone, ios, objective-c, afnetworking

我之前问过一个类似的问题，但没有得到太多帮助，现在已经进一步调查，但仍然不明白为什么我有问题。

```
NSURL *url = [NSURL URLWithString:@"http://datapoint.metoffice.gov.uk/public/data/val/wxfcs/all/json/sitelist?res=daily&key=<MY API KEY>"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"Success");
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"Fail");
}];
[operation start]; 
```

这失败了以下

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'data parameter is nil' 
```

我相信问题是由于返回的 JSON 类型`ISO-8859-1`，我设法`NSJSONSerialization`通过将重新调整的字符串编码为`NSUTF8StringEncoding`

例子...

```
NSString *string = [NSString stringWithContentsOfURL:kMetOfficeAllSites encoding:NSISOLatin1StringEncoding error:&error];
NSData *metOfficeData = [string dataUsingEncoding:NSUTF8StringEncoding];
id jsonObject = [NSJSONSerialization JSONObjectWithData:metOfficeData options:kNilOptions error:&error];
if (error) {
    //Error handling
} else {
    //use JSON 
```

`responseJSON`所以我看着`AFJSONRequestOperation.m`

```
- (id)responseJSON {
[self.lock lock];
if (!_responseJSON && [self.responseData length] > 0 && [self isFinished] && !self.JSONError) {
    NSError *error = nil;

    // Workaround for behavior of Rails to return a single space for `head :ok` (a workaround for a bug in Safari), which is not interpreted as valid input by NSJSONSerialization.
    // See https://github.com/rails/rails/issues/1742
    if ([self.responseData length] == 0 || [self.responseString isEqualToString:@" "]) {
        self.responseJSON = nil;
    } else {
        // Workaround for a bug in NSJSONSerialization when Unicode character escape codes are used instead of the actual character
        // See http://stackoverflow.com/a/12843465/157142
        NSData *JSONData = [self.responseString dataUsingEncoding:self.responseStringEncoding];
        self.responseJSON = [NSJSONSerialization JSONObjectWithData:JSONData options:self.JSONReadingOptions error:&error];
    }

    self.JSONError = error;
}
[self.lock unlock];

return _responseJSON;
} 
```

代码在语句中崩溃了`else`，但这似乎正在做我之前在`NSJSONSerialization`直接使用并重新编码 responseString 时所做的事情。

我什至硬编码`dataUsingEncoding`，`NSUTF8StringEncoding`但它仍然崩溃，我不明白为什么？

注意：以上内容适用于其他 JSON 提要，也适用于其他提要

[http://datapoint.metoffice.gov.uk/](http://datapoint.metoffice.gov.uk/)但是

[http://datapoint.metoffice.gov.uk/public/data/val/wxfcs/all/json/sitelist?res=daily&key=](http://datapoint.metoffice.gov.uk/public/data/val/wxfcs/all/json/sitelist?res=daily&key=%3CMy%20Key%3E)

`Sóil Chaorainn`包括导致问题的地名

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:05:37.357

问题似乎是响应的文本编码错误。有些字符无法使用`ISO-8859-1`. 这就是该`responseString`方法（参见 AFURLConnectionOperation.m）返回 nil 并且 JSON 序列化失败的原因。

要解决此问题，您可以通过这种方式进行子类化`AFJSONRequestOperation`和覆盖`responseStringEncoding`以强制执行 UTF-8 编码：

```
- (NSStringEncoding)responseStringEncoding {
    [self.lock lock];
    if (!_responseStringEncoding && self.response) {
        self.responseStringEncoding = NSUTF8StringEncoding;
    }
    [self.lock unlock];

    return _responseStringEncoding;
} 
```

# cordova - 移动 Web 应用程序性能取决于规模大小

> ID：15431388
> 
> 赞同：1
> 
> 时间：2013-03-15T11:35:37.933
> 
> 标签：cordova, mobile, view, web

我有一个关于移动应用程序的问题。

我正在使用 PhoneGap 为移动平台设计一个应用程序。

所以我想知道，最好是设计一个应用程序，让我们说`480x320`并为使用 的大型设备扩展它`initial-scale`，还是我可以为 iPhone 分辨率设计`960x640`并缩小应用程序？

移动浏览器是否足够智能，可以对未显示的像素进行下采样，或者它们是否仍占用处理/渲染时间？那`480x320`一个会跑得更快吗？

谢谢！

# android - 如何从一个基于 Worklight 的混合应用程序向另一个基于 Worklight 的混合应用程序发送推送通知

> ID：15431391
> 
> 赞同：0
> 
> 时间：2013-03-15T11:35:43.930
> 
> 标签：android, push-notification, ibm-mobilefirst, google-cloud-messaging

我在 Worklight 服务器上运行推送通知示例代码及其工作。现在我想将通知从一台设备发送到另一台设备，那么适配器需要进行哪些更改？

适配器 XML：

```
<displayName>PushAdapter</displayName>
<description>PushAdapter</description>
<connectivity>
    <connectionPolicy xsi:type="http:HTTPConnectionPolicyType">
        <protocol>http</protocol>
        <domain>https://android.apis.google.com</domain>
        <port>8080</port>           
    </connectionPolicy>
    <loadConstraints maxConcurrentConnectionsPerNode="2"/>
</connectivity> 
```

我是否应该更改域和端口，我必须先在 google play 上上传应用程序，以便我能够接收或发送通知。我应该在 GCM 上为 android 设备创建一个密钥吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:59:43.197

Worklight 中的推送通知（我相信大体上也是如此）本身不会从一台设备发送到另一台设备；这样考虑：

您有两个应用程序：

*   一个管理应用
*   接收应用程序

用户 A 正在运行管理应用程序 - 此应用程序能够向服务器发送请求，服务器告诉它向其他用户发送通知。

用户 B 正在运行接收应用程序 - 此应用程序能够接收通知。

*   所有这一切都与 Google Play 商店无关。
*   是的，这两个应用程序都需要 GCM senderId 和 Key 值才能拥有任何推送通知功能。

至于实现所有这些......没有示例可以执行此操作，但您已经拥有部分解决方案（示例应用程序能够接收通知）。您现在需要做的是让管理应用程序能够检索/特定用户名列表，并创建一个过程，该过程将调用函数以根据您检索到的用户名发送通知。

# vb.net - VB.NET WinForms 日期时间选择器更改事件运行两次？

> ID：15431394
> 
> 赞同：0
> 
> 时间：2013-03-15T11:35:55.280
> 
> 标签：vb.net, winforms, datepicker, controls

当用户更改我的“结束”日期 DateTinePicker 控件上的日期时，我有以下代码运行：

```
Private Sub dtpEndDate_ValueChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles dtpEndDate.ValueChanged
    If dtpEndDate.Value.Date < dtpStartDate.Value.Date Then
        MessageBox.Show("The end date should be after the start date", Me.Text, MessageBoxButtons.OK, MessageBoxIcon.Error)
        dtpEndDate.Value = Today
    End If
End Sub 
```

这个过程似乎运行了两次，因为消息框显示了两次。

我有错误的事件，还是有更好的方法来管理这个？

我尝试按照建议使用变量对其进行编辑：

```
Private Sub dtpEndDate_ValueChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles dtpEndDate.ValueChanged

If m_blndtpEndDateIsDone = False Then
    If dtpEndDate.Value.Date < dtpStartDate.Value.Date Then
        MessageBox.Show("The end date should be after the start date", Me.Text, MessageBoxButtons.OK, MessageBoxIcon.Error)
        m_blndtpEndDateIsDone = True
        dtpEndDate.Value = Today
    Else
        m_blndtpEndDateIsDone = False
    End If
Else
    m_blndtpEndDateIsDone = False
End If
wnd sub 
```

不幸的是，它仍然发射了两次......

我希望每次修改结束日期 dtpicker 并且日期在开始日期之前触发一次。

谢谢

菲利普

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:39:49.043

MessageBox 可能会像这样很麻烦。它将焦点从控件上移开并泵出自己的消息循环。这可能会导致*重入*问题，使 DoEvents() 如此臭名昭著。DateTimePicker 控件不是为了很好地处理这个问题而编写的，它通常是一种笨拙的控件。

一个简单的解决方法是避免面对面的错误报告。ErrorProvider 组件可以很好地做到这一点。在你的表单上放一个，让你的代码看起来像这样：

```
Private Sub dtpEndDate_ValueChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles dtpEndDate.ValueChanged
    If dtpEndDate.Value.Date < dtpStartDate.Value.Date Then
        ErrorProvider1.SetError(dtpEndDate, "The end date should be after the start date")
        dtpEndDate.Value = Today
    Else
        ErrorProvider1.SetError(dtpEndDate, "")
    End If
End Sub 
```

实际上，您可以避免 MessageBox 创建的重入问题，您可以在 DateTimePicker 完成自己的事件处理之后通过*稍后显示它来做到这一点。*使用 Control.BeginInvoke() 在 Winforms 中优雅地完成。让它看起来像这样：

```
Private Sub dtpEndDate_ValueChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles dtpEndDate.ValueChanged
    If dtpEndDate.Value.Date < dtpStartDate.Value.Date Then
        Me.BeginInvoke(New MethodInvoker(AddressOf reportDateProblem))
        dtpEndDate.Value = Today
    End If
End Sub

Private Sub reportDateProblem()
    MessageBox.Show("The end date should be after the start date", Me.Text, MessageBoxButtons.OK, MessageBoxIcon.Error)
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:50:10.060

这曾经发生在我身上。

您可以证明您至少在**WebForms**中的两个地方处理了一个事件：在 asp 页面中和在后面的代码中。如果我在后面代码中的“dtpEndDate_ValueChanged”方法的签名之后有语法“Handles dtpEndDate.ValueChanged”，那么我不必在我的aspx中写“OnClick =“dtpEndDate_ValueChanged”或类似的东西。

当您在**WinForms**而不是 WebForms 中时，请确保您没有

<< **AddHandler dtpEndDate.ValueChanged, AddressOf Me.dtpEndDate_ValueChanged** >>

或在 Load 方法或其他地方的某处类似的东西。

希望能帮助到你，

伊夫

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T11:52:28.660

您可以使用**dtpEndDate_Validating**事件

```
Private Sub dtpEndDate_Validating(sender As Object, e As CancelEventArgs)
    If dtpEndDate.Value.[Date] < dtpStartDate.Value.[Date] Then
        MessageBox.Show("The end date should be after the start date", Me.Text, MessageBoxButtons.OK, MessageBoxIcon.[Error])
    End If
   e.Cancel = True
End Sub 
```

**或者**

如果您想使用您的事件（dtpEndDate_ValueChanged），请在表单中定义一个布尔变量并将值设置为 false。在您执行第一次消息框后的事件中，将变量设置为 true。并检查这个变量

```
Dim isDone As Boolean = False

Private Sub dtpEndDate_ValueChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles dtpEndDate.ValueChanged
If Not isDone Then
 If dtpEndDate.Value.Date < dtpStartDate.Value.Date Then
    MessageBox.Show("The end date should be after the start date", Me.Text, MessageBoxButtons.OK, MessageBoxIcon.Error)
    IsDone = True
    dtpEndDate.Value = Today
 End If
End If 
```

结束子

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T12:13:36.587

试试这个，

```
Private Sub dtpEndDate_ValueChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles dtpEndDate.ValueChanged

     If (dtpEndDate.Value.Date < dtpStartDate.Value.Date) And Not dtpEndDate.Value = Today Then
            MessageBox.Show("The end date should be after the start date", Me.Text, MessageBoxButtons.OK, MessageBoxIcon.Error)
            dtpEndDate.Value = Today
     End If

 End Sub 
```

您将日期重置`dtpEndDate`为`today's date`，因此您的日期`dtpStartDate`应该小于`today`，因此使用上述代码不会发生逻辑冲突。

# android - wpa_supplicant 错误 RX ctrl_iface - hexdump_ascii(len=11)

> ID：15431398
> 
> 赞同：4
> 
> 时间：2013-03-15T11:36:06.257
> 
> 标签：android, android-logcat

我有相对较新的 Sony Xperia U 用于测试应用程序。

当电话和 WiFi 处于活动状态时，每秒都会在 LogCat 中收到以下错误：

```
03-15 11:29:36.637: E/wpa_supplicant(6663): RX ctrl_iface - hexdump_ascii(len=11):
03-15 11:29:36.637: E/wpa_supplicant(6663):      53 49 47 4e 41 4c 5f 50 4f 4c 4c                  SIGNAL_POLL     
03-15 11:29:36.637: D/wpa_supplicant(6663): Command received: SIGNAL_POLL
03-15 11:29:36.637: D/wpa_supplicant(6663): nl80211: survey data missing! 
```

我读过这与WiFi有关。好吧，如果我关闭 WiFi，它确实会停止。

有谁知道这是什么以及如何阻止它？

# php - 在查询的同时更新表列？

> ID：15431400
> 
> 赞同：-1
> 
> 时间：2013-03-15T11:36:17.010
> 
> 标签：php, mysql

我在表中将 id 设置为自动递增列，并且我试图将列 id 中的数据复制到列 user_id。

下面的查询插入数据并自动递增列 id，但是我希望列 user_id 具有与 id 相同的值，所以如果 id 自动递增到 31，那么 user_id 也将是 31。

这是我正在使用的查询：

```
$query="INSERT INTO ptb_users (user_id,
id,
first_name,
last_name,
email )
VALUES('NULL',
'NULL',
'".$firstname."',
'".$lastname."',
'".$email."'
)";
$result = mysql_query("UPDATE ptb_users SET user_id=id");
mysql_query($query) or die(); 
```

我遇到的问题是 id 和 user_id 之间的更新/复制只会在另一个用户注册后/第二次运行查询后发生在当前注册中。

所以说 id 31 需要被复制到列 user_id 这不会发生，直到另一个用户第二次注册/运行查询。如果新注册的人是 id 32，那么在 id 32 注册/运行第二次查询之前，之前用户（id 31）的 id 和 user_id 之间的更新不会发生。

我如何才能在查询或查询完成后立即进行更新，以便当 id 31 注册/运行查询时，id 和 user_id 之间的更新会在查询运行的同时发生？

真的我更喜欢将 id 和 user_id 作为自动增量，但因为不可能有两个自动增量字段我试图将自动增量结果从 id 复制到 user_id 并且我需要这样做，因为我的代码在我的网站上交叉引用两列以确保安全。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T11:41:47.713

您的更新查询首先运行，替换调用命令。

```
...    
mysql_query($query) or die();
$result = mysql_query("UPDATE ptb_users SET user_id=id");
... 
```

我不知道你为什么在你的代码中使用这样的动作，同样的事情有很多更好的方法。但是请在您的更新语句中添加 where 条件，因为您的查询会更新所有表并且它会运行缓慢，并且它**不是最佳解决方案。**

# ms-access - 在 MS Access 中扩展号码范围

> ID：15431401
> 
> 赞同：0
> 
> 时间：2013-03-15T11:36:17.213
> 
> 标签：ms-access

我有一系列需要扩展的数字范围。我已将它们放入一个表格中，该表格分为范围（包括）的开始、结束和大小以及关联的范围 ID

例如：

```
Start       End         Size ID
01234567890 01234567892 3    001
01234567900 01234567999 100  002
etc 
```

我想创建一个数据库，允许扩展这些数字并将范围 ID 应用于新表中的每个数字，例如

```
Number      ID
01234567890 001
01234567891 001
01234567892 001
01234567900 002
01234567901 002 
```

ETC

这需要是 MS 访问权限，因为我将把它提供给业务的其他领域。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:42:26.367

您将无法通过查询来执行此操作；你需要VBA。

基本上，您的函数可能如下所示（伪代码）：

```
Open a recordset of your first table
Loop through the records:
    For i = 0 to Size - 1:
        Insert into second table (Number + i, ID)
Close recordset 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:48:05.173

您可以利用数字表。这些很容易创建，并且应该包含从 0 到您需要的最高数字的整数，比如 1000。然后您可以说：

```
SELECT [Start]+[Number] AS Expanded, tbx.Size, tbx.ID
INTO Expanded
FROM Numbers, tbx
WHERE Numbers.Number<=[End]-[Start] 
```

tbx 是您现有的表，Numbers 是 numbers 表， Expanded 是正在创建的表。

# xml - 如何正确使用 xml.Utility.unescape？

> ID：15431402
> 
> 赞同：4
> 
> 时间：2013-03-15T11:36:18.603
> 
> 标签：xml, scala

在我阅读了`xml.Utility.unescape`的 SDK 文档后，我认为这是 的相反操作`xml.Utility.escape`，但它似乎根本没有做任何事情：

```
scala> xml.Utility.escape("& <")
res0: String = &amp; &lt;

scala> val sb = new StringBuilder
sb: StringBuilder = 

scala> xml.Utility.unescape("&amp; &lt;", sb)
res1: StringBuilder = null

scala> sb.toString
res2: String = "" 
```

如何正确使用`xml.Utility.unescape`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T11:47:38.730

我查看了`unescape`文档，我很失望......

> 将未转义的字符串附加到 s，amp 变为 &，lt 变为 < 等等。
> 
> **如果 ref 不是预定义的实体，则**返回null。****

 **所以它似乎`unescape`是为了将单个字符附加到`StringBuilder`. 它认为那`"&amp; &lt;"`是“不是预定义的实体”，所以它返回`null`了您的`res1`.

REPL 中的一些测试：

```
scala> unescape("amp", sb)
res9: StringBuilder = &

scala> unescape("lt", sb)
res10: StringBuilder = &<

scala> unescape(" ", sb)
res11: StringBuilder = null 
```**

# oracle10g - 如何使用 CONCAT 运算符连接三个字符串

> ID：15431410
> 
> 赞同：0
> 
> 时间：2013-03-15T11:36:33.467
> 
> 标签：oracle10g, oracle11g

如何使用 CONCAT 运算符连接三个字符串。

```
select concat('today',To_Char(Rts,'dd/mm/yy hh24:mi:ss'),'date')  From  Mbl_Dishtv Partition(P_03dec2012) Where Aid=501604 
```

请向 CONCAT 运营商提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:13:07.770

如果你真的想使用`CONCAT`，你需要打两个电话

```
SELECT concat( 'today',
               concat( to_char( rts, 'dd/mm/yy hh24:mi:ss'),
                       'date' ))
  FROM Mbl_Dishtv Partition(P_03dec2012) 
 WHERE Aid=501604 
```

但是，使用运算符会更有意义，`||`因为它会产生更清晰的代码

```
SELECT 'today' ||
        to_char( rts, 'dd/mm/yy hh24:mi:ss') ||
        'date'
  FROM Mbl_Dishtv Partition(P_03dec2012) 
 WHERE Aid=501604 
```

使用语法也很少有意义`Partition(P_03dec2012)`。如果表是按日期分区的，那么在您用于分区的任何日期列上添加谓词会更有意义。

# c# - 手动注册 UnityServiceLocator 时，Unity 不尊重 HierarchicalLifetimeManager

> ID：15431411
> 
> 赞同：1
> 
> 时间：2013-03-15T11:36:33.717
> 
> 标签：c#, unity-container

在`IServiceLocator`使用`HierarchicalLifetimeManager`.

我所看到的表明 Unity`UnityServiceLocator`在您注册具体类型时将其视为一种特殊情况。它将类型视为静态单例，即使它不应该这样做。这种行为似乎对`UnityServiceLocator`.

背景：我正在逐步淘汰`ServiceLocator`我们代码中存在的几个地方的“静态”。第一步是`IServiceLocator`在 Unity 中注册，然后将其作为依赖项注入到使用它的那些类中。

在下面的代码中，我注册了一个注入工厂来创建一个新的`UnityServiceLocator`. 我还将其范围`HierarchicalLifetimeManager`设置为每个子容器给我一个实例：

```
private static void Main(string[] args)
{
    var container = new UnityContainer();
    container.RegisterType<IServiceLocator>(
        new HierarchicalLifetimeManager(),
        new InjectionFactory(
            c =>
                {
                    Console.WriteLine("InjectionFactory invoked with container: " + c.GetHashCode());
                    return new UnityServiceLocator(c);
                }));

    container.Resolve<IServiceLocator>(); // expect to see console output here
    container.Resolve<IServiceLocator>(); // don't expect to see console output here

    var child = container.CreateChildContainer();
    child.Resolve<IServiceLocator>(); // expect to see console output here
    container.Resolve<IServiceLocator>(); // don't expect to see console output here

    var anotherChildContainer = container.CreateChildContainer();
    anotherChildContainer.Resolve<IServiceLocator>(); // expect to see console output here
    anotherChildContainer.Resolve<IServiceLocator>(); // don't expect to see console output here
} 
```

我希望上面的代码调用工厂，创建`UnityServiceLocator`实例并写出控制台输出三次，每个容器一次。它没有——它只做了一次，就好像我把它注册为一个单例一样：

> 使用容器调用的 InjectionFactory：20903718

情况变得更糟：

如果我现在让我自己的类实现`IServiceLocator`（从字面上看，实现接口，一个接受 的 ctor `IUnityContainer`，并让所有方法都 throw `NotImplementedException`），然后换行

```
 return new UnityServiceLocator(c); 
```

和

```
 return new MyUnityServiceLocator(c); 
```

这开始表现出我期望的方式：

```
InjectionFactory invoked with container: 20903718 
InjectionFactory invoked with container: 51746094 
InjectionFactory invoked with container: 41215084 
```

`UnityServiceLocator`除非 Unity 将其视为特殊情况，否则我无法理解这种行为。有没有人对这种行为有任何其他解释？我是否遗漏了一些明显的东西，还是 Unity 在内部将 UnityServiceLocator 视为一种特殊情况并忽略了我指定的生命周期策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T08:43:19.463

事实证明这`UnityServiceLocator`是一种特殊情况——它在第一次创建时在自己的构造函数中*注册*。`ExternallyControlledLifetimeManager`

有关更多信息，请参阅 Randy Levy 的评论：[unity.codeplex.com/workitem/12727](https://web.archive.org/web/20160628030927/unity.codeplex.com/workitem/12727)

# html - 指定和属性

> ID：15431413
> 
> 赞同：-1
> 
> 时间：2013-03-15T11:36:39.240
> 
> 标签：html, doctype

启动 html 文档时，我总是写

```
<!doctype html>
<html> 
```

但是有很多网站把它写成

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

像我这样做会有危险吗？所有额外属性的好处是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:39:59.413

您正在使用 HTML5 文档类型，请参阅[http://ejohn.org/blog/html5-doctype/](http://ejohn.org/blog/html5-doctype/)和[http://alistapart.com/article/doctype/](http://alistapart.com/article/doctype/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:40:30.610

您将文档类型设置为 HTML5。您看到的其他版本适用于较低的（HTML4.01 等）版本。

据我所知，除非人们在旧版（IE6 或更低版本）浏览器上查看您的网站，否则使用 HTML 5 标记会导致太多问题。

您可以在此处找到更全面的指南：http: [//www.w3schools.com/tags/tag_doctype.asp](http://www.w3schools.com/tags/tag_doctype.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:40:42.497

这些网站在 html5 版本之前使用。但您使用的是 html5 版本。在 html5 中，您可以简单地指定文档类型，例如

```
<!doctype html> 
```

但是在以前的版本中（在 html5 之前）我们有 doctype

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T11:40:49.320

通常使用`<!DOCTYPE>`声明来区分 HTMLish 语言的版本（在本例中为 HTML 或 XHTML）。

不同的标记语言会有不同的表现。例如身高：100%

> 注意：（这很重要）：不要将 HTML 与 XHTML 混合

您会注意到组件的高度完全不同，并且文件之间的唯一区别！！！！

# android - 如何从android中的内部联系人获取电子邮件？

> ID：15431417
> 
> 赞同：0
> 
> 时间：2013-03-15T11:36:49.577
> 
> 标签：android, android-contacts, contactscontract

我正在开发一个应用程序，我需要从内部电话簿中获取联系人和电子邮件..

在谷歌搜索后，我找到了以下获取电话号码和名称的代码。

主.java

```
Cursor numcur = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null,null, null);
    if (numcur != null) {
        while (numcur.moveToNext()) {
            name = numcur.getString(numcur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
            number = numcur.getString(numcur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
            phonenumarray.add(number);
            displaynamearray.add(name);

        }
    } 
```

但是在这里获取电子邮件ID，他们使用单独的光标，如下所示..

```
Cursor emailcur = getContentResolver().query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, null, null,null, null);
    if (emailcur != null) {
        while (emailcur.moveToNext()) {
            email = emailcur.getString(emailcur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA1));
                emailarray.add(email);  

        }
    } 
```

在这里，我们在向 listview 添加值时分别获取值，contact2 显示的是 contact7 邮件 id，而 contact3 显示的是 contat5 邮件 id，如下图所示。 ![在此处输入图像描述](../Images/68bffd129b505cb90a9d64cdb66f0210.png)

那么，任何人都可以帮助我如何获取同一联系人的电话号码，邮件ID..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:02:48.613

试试这样

```
Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);
    while (phones.moveToNext()) {
    String name = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));  
    String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

    ContactBean objContact = new ContactBean();   
    objContact.setName(name);    
    objContact.setPhoneNo(phoneNumber);   
    list.add(objContact); 
```

看这个[如何获取 Android 设备的主电子邮件地址](https://stackoverflow.com/questions/2112965/how-to-get-the-android-devices-primary-e-mail-address)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:02:58.587

该方法是使用 http://developer.android.com/guide/topics/providers/contacts-provider.html 中解释的[LOOKUP_KEY](http://developer.android.com/guide/topics/providers/contacts-provider.html)

可以在这里找到一个示例 [http://android-er.blogspot.in/2012/12/access-contactscontractcommondatakindsp.html](http://android-er.blogspot.in/2012/12/access-contactscontractcommondatakindsp.html)

您还可以引入 CursorJoiner 概念以获得更好的性能 [http://asyncindicator.blogspot.in/2012/12/cursorjoiner-and-matrixcursor.html](http://asyncindicator.blogspot.in/2012/12/cursorjoiner-and-matrixcursor.html)

# c++ - qfilesystemwatcher 在文件编辑时发出 2 次 directorychanged 信号

> ID：15431422
> 
> 赞同：2
> 
> 时间：2013-03-15T11:36:58.867
> 
> 标签：c++, qt, qt4

我需要在 qt 中查看目录。创建了连接。但是当文件编辑时，发件人会发出两次目录更改信号。filechanged 信号也同时发出。两次发射信号有什么用？有没有办法知道哪个文件/文件夹被更改了？请帮忙..这是连接代码

```
QFileSystemWatcher *watcher = new QFileSystemWatcher;
watcher->addPath("/home/user/directory/");
connect(watcher, SIGNAL(directoryChanged(QString)), this, SLOT(directoryChangedHandler(QString))); 
```

和功能

```
void MainWindow::directoryChangedHandler(QString path)
{
    QMessageBox::information(0, "Directory Changed", "Directory Changed at " + path);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T05:45:28.723

我解决了这个问题。普通编辑器从磁盘中删除并再次写入文件。所以删除文件和添加文件的两个信号。我尝试使用`nano`编辑器编辑文件`Ubuntu`。它不发出任何`directoryChanged`信号，而是发出`fileChanged`信号。这意味着它不会删除和添加文件，而是编辑同一个文件。有助于得出这一结论的另一件事是，在使用普通编辑器时，路径已从`watcher`. 这意味着，该文件暂时不存在。我必须再次手动添加该路径。使用`nano`. 由于我再次编​​写了添加路径的代码，因此显示错误“ `QFileSystemWatcher: failed to add paths: /home/user/directory/file`”。因为路径已经在`watcher`.

# java - FTP客户端子目录创建

> ID：15431430
> 
> 赞同：0
> 
> 时间：2013-03-15T11:37:21.950
> 
> 标签：java, ftp, archive, ftp-client, ftp-server

我正在使用 FTPClient 在 FTP 服务器中创建子目录。我想在“Root”下创建一个目录“Archive”。我使用以下函数来创建子目录。

```
boolean s = ftNew.makeDirectory("/"+folderName+"/Archive"); 
```

但它返回 false 并且无法创建子目录“存档”。如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T17:37:10.040

1.  用户可能没有创建目录的权限（至少在这个特定的地方）。
2.  “文件夹名称”描述的目录是否存在？如果不是，那么您将在一次调用中创建整个目录层次结构（即/{folderName}/Archive）时遇到一些困难。确保“文件夹名称”存在或在单独的步骤中创建它。

FTPClient 的 makeDirectory 返回 true 或 false，它不是很有用，而且结果很模棱两可。幸运的是，您可以改进代码以报告精确的 FTP 状态消息。

这是您需要的：

```
private static void showServerReply(FTPClient ftpClient) {
    String[] replies = ftpClient.getReplyStrings();
    if (replies != null && replies.length > 0) {
        for (String aReply : replies) {
            System.out.println("SERVER: " + aReply);
        }
    }
} 
```

在每个 FTPClient 方法之后调用它，例如：

```
package apachenet.ftp;

import java.io.IOException;
import org.apache.commons.net.ftp.FTPClient;

public class App {
    public static void main( String[] args ) {
        FTPClient client = new FTPClient(); 
        FileInputStream fis = null;
        try {
            client.connect("127.0.0.1");
            showServerReply(client);
            client.login("pwyrwinski", "secret");
            showServerReply(client);
            System.out.println("Current working directory is: " + client.printWorkingDirectory());
            String someDirectory = "nonexistentDir";
            client.makeDirectory("/" + someDirectory + "/Archive");
            showServerReply(client);

            client.logout();
            showServerReply(client);
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (fis != null) {
                    fis.close();
                }
                client.disconnect();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    private static void showServerReply(FTPClient ftpClient) {
        // ... 
    }
} 
```

我的机器上的结果：

```
SERVER: 220 (vsFTPd 2.3.5)
SERVER: 230 Login successful.
Current working directory is: "/home/pwyrwinski"
SERVER: 550 Create directory operation failed.
SERVER: 221 Goodbye. 
```

当我改为`String someDirectory`“home/pwyrwinski”时：

```
SERVER: 220 (vsFTPd 2.3.5)
SERVER: 230 Login successful.
Current working directory is: "/home/pwyrwinski"
SERVER: 257 "/home/pwyrwinski/Archive" created
SERVER: 221 Goodbye. 
```

`550`是允许或拒绝访问的代码，这个代码和其他代码很容易用谷歌搜索。
我希望这能帮到您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-20T08:02:25.777

您应该逐步创建目录。否则，您将获得创建目录错误。有一个示例供您使用。[http://www.codejava.net/java-se/networking/ftp/creating-nested-directory-structure-on-a-ftp-server](http://www.codejava.net/java-se/networking/ftp/creating-nested-directory-structure-on-a-ftp-server)

# python - Django中的复杂过滤

> ID：15431433
> 
> 赞同：1
> 
> 时间：2013-03-15T11:37:24.790
> 
> 标签：python, django, django-templates, django-views

我有一个（简化的）Django 模型，类似于以下内容：

**模型.py**

```
# python
class Hotel(models.Model):
     name = models.Charfield()

class RoomType(models.Model):
     hotel=models.ForeignKey(Hotel, related_name="roomtypes")
     price=models.IntegerField() # really  a currency field

class Room(models.Model):
     hotel = models.ForeignKey(Hotel)
     roomType = models.ForeignKey(RoomType, related_name="rooms")

class Reservation(models.Model):
     room = models.ForeignKey(Room)
     date = models.DateField() 
```

所以我的模板需要的层次结构是`Hotel->RoomType->Room`每个都被过滤的地方。

**视图.py**

```
# only get available rooms that meet the user supplied criteria in q
q = Q() # complex query building omitted
rooms = Room.objects.filter(q) 

# only get roomtypes that have rooms meeting criteria in q
roomTypesValues = rooms.values_list('roomType', flat=True)
roomTypes = RoomType.objects.filter(pk__in=list(roomTypesValues))

# only get hotels that have rooms meeting criteria in q
hotelsValues = roomTypes.values_list('hotel', flat=True)
hotels = Hotel.objects.filter(pk__in=list(hotelsValues))

c=RequestContext(request, {'hotels': hotels}) 
```

在某种程度上，这些查询中的每一个都有效。我还没有弄清楚如何在模板中使用它们。

我试图让这样的东西工作（HTML简化）：

**模板.html**

```
{% for hotel in hotels %}
<h1>{{hotel.name}}</h1>

   <ul>
   {% for roomtype in hotel.roomtypes %}
     <li>
       {{roomtype.name]}, {{roomtype.price}}
       {% for room in roomtype.rooms %}
            <!-- not really needed for this -->
       {% endfor %}
     </li>
   {% endfor %}
   </ul>
{% endfor %} 
```

如何将对象传递给模板，以便以与上述类似的方式处理它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:48:23.753

您的第一个片段可以简化为这个单一的调用：

```
hotels = Hotel.objects.filter(roomtype__room=<whatever your criteria are>) 
```

您不能在模板中执行此查询，但您可以将该查询集传递`hotels`给模板以在那里呈现。

# c - 使用 WIN32 API (C) 中的 sendmessage() 函数通过编辑框获取整数输入

> ID：15431440
> 
> 赞同：0
> 
> 时间：2013-03-15T11:37:46.043
> 
> 标签：c, windows, winapi, sendmessage

我正在使用 WIN32 API。我想取一个整数，让我们假设 1000 作为通过编辑框的输入。我正在使用 sendmessage() 函数进行输入，但它只能接受字符串输入。如何将整数作为输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:43:05.957

您需要将编辑框中输入的字符串转换为这样的整数，例如：

```
int n = atoi(myString); 
```

# android - 无法阻止 Activity 重启

> ID：15431443
> 
> 赞同：0
> 
> 时间：2013-03-15T11:37:49.073
> 
> 标签：android, android-activity, orientation

我想防止系统在设备`orientation`更改时重新启动我的活动。`minSdkVersion`必须是 10，至少`targetSdkVersion`必须是 15。我无法使用`configChanges="orientation|screenSize"`，因为最低 SDK 版本为 10，并且此属性的“screenSize”值仅在 SDK 版本 13 后出现。

请问有什么建议吗？

我知道已经回答了类似的问题，但问题仍然没有为我解决。请不要建议将最低 SDK 版本设置为高于 10，因为这会切断运行 2.3.x 的设备，即 43% 的市场。目标 SDK 必须至少为 15。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T11:44:48.117

正如 android 开发者网站上所描述的那样

[http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange](http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange)

你必须指定

```
android:configChanges="orientation|keyboardHidden" 
```

如果您的目标是 API 级别 12 或更低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:41:19.953

`mainfest.xml`试试这个，在你的每个活动中添加这个代码

```
android:configChanges="keyboardHidden|orientation" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:52:35.213

如果你不需要特别 configChanges="orientation|screenSize" 你可以试试这个 android:configChanges="orientation|keyboardHidden"。

默认情况下，当 Android 上发生某些关键配置更改（常见示例是方向更改）时，Android 会完全重新启动正在运行的 Activity 以帮助其适应此类更改。

当您在 AndroidManifest 中定义 android:configChanges="keyboardHidden|orientation" 时，您是在告诉 Android：“请不要在拔出键盘或旋转手机时进行默认重置；我想自己处理。是的，我知道我在做什么”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:51:36.673

如果你`targetSdkVersion`是 15 或更大，那么你需要指定

```
android:configChanges="orientation|keyboardHidden|screenSize" 
```

这适用于所有设备。

# c# - 子类对父类上定义的属性可见？

> ID：15431445
> 
> 赞同：1
> 
> 时间：2013-03-15T11:37:55.323
> 
> 标签：c#, .net, inheritance, attributes

```
[SomeAttribute(typeof(Child))]
public sealed class Parent
{
    public sealed class Child
    {
    }
} 
```

这怎么可能？它会破坏属性实现中的某些内容吗？我只是嵌套 Child 因为我坚持每个文件一个类的规则。如果 Child 是在外部定义的，我就不必担心用无限循环破坏属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:41:57.363

要回答您的问题：

> 这怎么可能？

这一切都与班级的知名度有关。您的`Child`课程在同一个程序集中，因此`SomeAttribute`仍然可以访问它（无论它是内部/私有等）。

它会破坏属性实现中的某些内容吗？

不

> 我只是嵌套`Child`，因为我坚持每个文件一个类的规则。

从技术上讲，您*不会*坚持每个文件 1 个类的规则，因为现在有 2 个类（不管它是否嵌套）。通常你会嵌套一个类，如果它是外部类的实现细节，我收集到你的情况不是。

如果`Child`是一个公共类，那么把它放在它自己的单元中，你在这里嵌套的例子不会给你带来任何好处，也没有任何意义。如果`Child`该类*应*与该类紧密耦合`Parent`并纯粹在其内部使用，则应将其标记为`internal`或`private`。

# php - 卡在 array_merge 中，需要在 foreach 循环中进行特定的键值排列

> ID：15431446
> 
> 赞同：0
> 
> 时间：2013-03-15T11:38:00.300
> 
> 标签：php

我有以下 PHP 代码：

```
$age = array_merge($age,array(get_user_meta($comment->user_id, 'wsl_user_age', true))); 
```

这会产生：

```
Array
(
    [0] => 26
    [1] => 
    [2] => 18
    [3] => 28
    [4] => 22
    [5] => 21
    [6] => 26
    [7] => 
    [8] => 
    [9] => 
    [10] => 
    [11] => 
    [12] =>
    [13] =>
    [14] =>
    [15] =>
    [16] =>
    [17] =>
    [18] =>
    [19] =>
    [20] =>
) 
```

我想要的是 26 18 等作为键。并重视它重复的次数，本质上是重复计数。

我试过：

```
$age = array_merge($age,array(get_user_meta($comment->user_id, 'wsl_user_age', true)=> "")) 
```

但这产生了绝对的废话。

我应该尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:40:17.947

我想你正在寻找`array_count_values`

```
$cnt_array = array_count_values($your_array);

echo "<pre>";
print_r($cnt_array); 
```

参考：[http ://www.php.net/manual/en/function.array-count-values.php](http://www.php.net/manual/en/function.array-count-values.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:52:04.530

这是您可能正在寻找的东西[http://codepad.org/RDUhltQ7](http://codepad.org/RDUhltQ7)

看一看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:52:37.400

```
$foo = Array
(   26,
    18,
    28,
    22,
    21,
    26,
    '',
    ''
);

$foo = array_filter($foo);
$foo = array_count_values($foo);

print_r($foo); 
```

[http://sandbox.onlinephpfunctions.com/code/a1875256f4680b06b9d909bdb3329cfcd64d44de](http://sandbox.onlinephpfunctions.com/code/a1875256f4680b06b9d909bdb3329cfcd64d44de)

# asp.net-mvc - oracle 数据库和 ASP MVC 3

> ID：15431449
> 
> 赞同：0
> 
> 时间：2013-03-15T11:38:07.683
> 
> 标签：asp.net-mvc, oracle

我正在构建一个 ASP MVC 应用程序，当我连接到 Oracle 数据库时出现错误 ORA-06413。连接打不开！

我有 8.1.7 客户端。

这是我的测试代码：

```
OleDbConnection c = new OleDbConnection("Provider=msdaora; Data Source=AGILEDSV; user id=reader; password=reader;");
        try
        {
            c.Open();
            c.Close();
        }
        catch (Exception e)
        {
            throw;
        } 
```

令人惊讶的是，这段代码与控制台应用程序配合得很好

# algorithm - 树的深度和直径有什么区别？

> ID：15431453
> 
> 赞同：0
> 
> 时间：2013-03-15T11:38:15.187
> 
> 标签：algorithm, tree, terminology

嗨，我对树的深度和直径之间的差异有点困惑。对不起，如果它已经问过但我找不到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T11:46:55.300

*   节点的**深度**是从节点到树根节点的边数。
    根节点的深度为 0。

*   节点的**高度**是从节点到叶子的*最长路径*上的边数。
    叶节点的高度为 0。

*   树的**直径**（或**宽度）是任意两个叶***节点*之间最长路径上的节点数。下面的树的直径为 6 个节点。

![一棵树，每个节点的高度和深度](../Images/e9db046a40394e2d3a0e4b6f8b14db81.png)

* * *

顺便说一句，我已经看到树的直径（或宽度）以一种非常好的方式展示：想象你的树是按钮（或圆盘）和（等长）字符串的真实对象。选择任何节点/按钮并将树悬在空中。现在挂在最低点的按钮离您所持有的节点最远。现在按住那个最低的按钮，然后放开另一个。现在挂在最低处的按钮是离您所持有的最远的节点。直径是您持有的节点和最低节点之间的节点数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:42:06.313

从今天的[crackinterview](http://crackinterviewtoday.wordpress.com/2010/03/11/diameter-of-a-binary-tree/)，

> **树的直径**定义为树中两个叶子之间最长路径上的节点数。

但是**深度**是从根节点到节点的边数。

# c# - 一个项目中的多个 edmx

> ID：15431455
> 
> 赞同：0
> 
> 时间：2013-03-15T11:38:24.140
> 
> 标签：c#, wcf, entity-framework

我有一个带有一个 edmx 文件的项目。测试类工作正常。当我添加具有不同名称和命名空间的 edmx，但连接到类似的基本结构时，添加后，在代理类停止工作之前，我收到消息：

```
 Mapping and metadata information could not be found for EntityType
 (InvalidOperationException) 
```

删除添加的 edmx 后，项目运行正常。是否有可能将两个 edmx 文件添加到单个项目中，以免出现对元数据的错误引用？

**目前我使用这个连接字符串**：

```
<add name="MSSQLEntities" connectionString="metadata=res://*/RiskEntityModel.csdl|res://*/RiskModelLibrary.Lib.RiskEntityModel.MSSQL.ssdl|res://*/RiskEntityModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=_DBSERVERNAME_;User ID=_DBUSERNAME_;Password=_DBPASSWORD_;Initial Catalog=_DBPATH_;Trusted_Connection=False;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:46:40.790

您必须`EntityConnectionDescription`手动构建并将其传递给您的自定义实现`ObjectContext`。

因此，基本上，您可以创建自己的而不是标准的 EF 上下文构建功能（从应用程序配置中读取）。

# python - 如何在python中使用的tkinter中打印标签或id

> ID：15431464
> 
> 赞同：0
> 
> 时间：2013-03-15T11:38:44.580
> 
> 标签：python, user-interface, tkinter

我正在使用 tkinter 生成一个 gui。

```
from Tkinter import *
root = Tk()
root.title("explorer")
f=Canvas(root, width=1200, height=768)
f.grid()
main_line = f.create_line(200,300,300,300, tags="main_line_tag", width=5)
mainloop() 
```

在上面的示例中，我想在该行旁边打印标签和 ID。我该怎么做。

**更新**

```
main_line = f.create_line(200,300,300,300, tags="main_line_tag", width=5)
tags_text = ', '.join(f.gettags(main_line))
line_text = "%s: %s" % (main_line, tags_text)
f.create_text(220,320, text=line_text) 
```

解决方案有效，但我的实际要求是

```
f=Canvas(root, width=1200, height=768)
f.grid()
class Create:
      def __init__(self,xy,t):
          self.xy=self.xy
          self.t=t
          for i in range(1, self.t+1):
              exec 'main_line%d = f.create_line(200,300,300,300, tags="main_line_tag%d")' %(i,i)
    #end of class Create
def update(t,newxy):
    for i in range(1,t+1):
         exec'f.coord(main_line%d, *newxy)'%i
mainloop() 
```

在上面的示例代码中，当我运行代码时，我试图更新线的坐标，我得到 main_line1 未定义..即使对于标签也是如此。如何解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:00:16.827

只需绘制一个文本项，然后使用 ID 和[`gettags`](http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.gettags-method)Canvas 方法来创建您的文本。

```
main_line = f.create_line(200,300,300,300, tags="main_line_tag", width=5)
tags_text = ', '.join(f.gettags(main_line))
line_text = "%s: %s" % (main_line, tags_text)
f.create_text(220,320, text=line_text) 
```

**更新**

问题`exec 'main_line%d = ...`是您正在创建行，但没有存储参考。但是，使用`exec`是一个不推荐的解决方案，还有另一种方法可以使用简单的列表来做同样的事情：

```
lines = []
def update(t, newxy):
    for line in lines:
        f.coord(line, *newxy)

class Create:
    def __init__(self, xy, t):
        self.xy = xy
        self.t = t
        for i in xrange(self.t):
            new_line = f.create_line(200,300,300,300, tags="main_line_tag%d" % (i+1))
            lines.append(new_line) 
```

# php - .htaccess 重定向规则从 url 中删除特定部分

> ID：15431465
> 
> 赞同：1
> 
> 时间：2013-03-15T11:38:47.177
> 
> 标签：php, regex, .htaccess, redirect, url-redirection

我必须为我所有的网址做 301 重定向

```
http://www.example.com.au/website-blog/item/121-itemName 
```

到

```
http://www.example.com.au/website-blog/itemName 
```

需要`item/(itemId)-`从所有网址中删除部分。

我试过了

```
RewriteRule ^item/[\d]+-(.*)$ /$1 [L,R=301,QSA]. 
```

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T11:55:46.687

使用`(.+)`并相应地替换项目名称。将以下规则放入`/.htaccess`：

```
RewriteRule ^website-blog/item/\d+-(.+) /website-blog/$1 [R,L] 
```

笔记：

*   测试`R`后更改`R=301`
*   在这种`QSA`情况下不需要标志

# ruby-on-rails - ruby 中相同对象值的不同哈希值

> ID：15431467
> 
> 赞同：7
> 
> 时间：2013-03-15T11:38:53.550
> 
> 标签：ruby-on-rails, ruby

我对来自 ruby​​ 的“哈希”方法有疑问：http: [//apidock.com/ruby/v1_8_7_330/Hash/hash](http://apidock.com/ruby/v1_8_7_330/Hash/hash)

我使用它来比较具有相同内容的两个不同对象，以查找数据库对象和具有相同属性的新元素之间的冲突。

它显然已经工作了很长时间（超过一年），但它突然停止在我的开发计算机中工作。

如果我在 Rails 控制台中尝试这个：

```
a = {:a => 'a', :b=>'b'}
b = {:a => 'a', :b=>'b'}
a.hash
b.hash 
```

`-3820017043059270405`我在同一个控制台中为 a.hash 和 b.hash ( ) 获得了相同的值。`-1865824882785682267`问题是，如果我更改为另一个控制台，它会返回与第一个控制台 ( )不同的值。

**它不**应该返回相同的哈希吗？

提前致谢。

编辑：由于 ree 1.8.7 版本，它在生产中运行良好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T11:57:10.950

不，不应该！

不同的 Ruby 实现（如 jRuby、Rubinius、MRI 1.8.x、MRI 1.9.x 等）使用不同的方式来生成哈希。例如，对于某些对象（例如您拥有的类或 Hash 实例），运行时将在创建此对象时分配 uniq 和随机 id。如果我没记错的话，MRI 紧密使用基于内存地址的哈希：[http ://rxr.whitequark.org/mri/source/gc.c?v=1.8.7-p370#2111](http://rxr.whitequark.org/mri/source/gc.c?v=1.8.7-p370#2111)

因此，您不能保证每次运行代码都会使用相同的随机值或相同的内存地址。

我还建议使用 ruby​​-doc 而不是 apidock 用于 Ruby 内部：[http ://ruby-doc.org/core-2.0/Object.html#method-i-hash](http://ruby-doc.org/core-2.0/Object.html#method-i-hash)

> 对象的哈希值在 ruby​​ 的调用或实现中可能不同。如果您需要跨 ruby​​ 调用和实现的稳定标识符，则需要使用自定义方法生成一个。

希望对您有所帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T11:43:41.153

来自：[http ://ruby-doc.org/core-2.0/Object.html#method-i-hash](http://ruby-doc.org/core-2.0/Object.html#method-i-hash)

> 对象的哈希值在 ruby​​ 的调用或实现中可能不同。如果您需要跨 ruby​​ 调用和实现的稳定标识符，则需要使用自定义方法生成一个。

虽然这是来自 Ruby 2.0 的文档，但我相信这种情况已经有一段时间了——也就是说，一般来说，你不能保证使用 .eql 的 Ruby 对象是等价的？将在不同的 Ruby 进程中计算出相同的哈希值。

当您调用 Hash.hash 时，我的理解是，它返回从用作键的对象和哈希对象中的值计算的哈希值的*组合，因此受制于相同的文档。*

# asp.net-mvc - 向 MSBuild 任务添加自定义属性

> ID：15431470
> 
> 赞同：5
> 
> 时间：2013-03-15T11:38:59.133
> 
> 标签：asp.net-mvc, msbuild, msbuild-task, aspnet-compiler

我让 TeamCity 为 ASP.NET MVC 3 应用程序运行 MSBuild 任务。现在时不时地（似乎是随机地）它抛出“ASPNETCOMPILER：错误 ASPRUNTIME：正在运行线程的应用程序域已被卸载。”。它发生在 MSBuild 执行“MvcBuildViews”并运行 aspnet_compiler.exe 时。

现在我知道 aspnet_compiler.exe ( [http://msdn.microsoft.com/en-us/library/ms229863(vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms229863(vs.80).aspx) ) 有一个“-errorstack”开关，可以为我提供有关此的堆栈跟踪信息错误，但似乎 AspNetCompiler Task 没有公开设置此属性的可能性（[http://msdn.microsoft.com/en-us/library/ms164291.aspx](http://msdn.microsoft.com/en-us/library/ms164291.aspx)）。

所以我的问题是 - 有没有办法将任何自定义属性传递给现有的 MSBuild 任务，或者我必须在 MSBuild 之外手动运行 aspnet_compiler.exe 以启用 -errorstack 功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:02:06.283

我们找到了导致此错误的原因（但不是真正如何将自定义属性添加到 MSBuild 任务）。当构建服务器的内存不足时，似乎会发生此异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-21T06:51:12.850

您可以通过在您的 csproj 文件中使用`Exec`MSBuild 任务来实现此目的。例如原始任务：

```
<AspNetCompiler VirtualPath="temp" PhysicalPath="$(WebProjectOutputDir)" /> 
```

变成：

```
<Exec Command="$(MSBuildFrameworkToolsPath)\aspnet_compiler.exe -v temp -errorstack -p $(WebProjectOutputDir)" /> 
```

# .htaccess - 将 url blog.php/?slug=test-blog 重写为 blog/test-blog

> ID：15431475
> 
> 赞同：0
> 
> 时间：2013-03-15T11:39:16.267
> 
> 标签：.htaccess, url-rewriting, rewrite

如何使用 htaccess 中的重写规则将 url blog.php/?slug=test-blog 重写为 blog/test-blog？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:31:40.167

您必须在 a 中捕获部分查询字符串[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)并在[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

```
RewriteEngine on

# prevent endless loop    
RewriteCond %{ENV:REDIRECT_STATUS} 200
RewriteRule ^ - [L]

# redirect to pretty url
RewriteCond %{QUERY_STRING} slug=(.+)
RewriteRule ^blog.php$ /blog/%1? [R,L]

# serve real content
RewriteRule ^blog/(.+)$ /blog.php?slug=$1 [L] 
```

# jquery - 如何发布使用上传的图像不使用表单的提交按钮？

> ID：15431477
> 
> 赞同：3
> 
> 时间：2013-03-15T11:39:24.190
> 
> 标签：jquery, html, post

这可以作为正常形式正常工作：

```
<form id="frm1" enctype="multipart/form-data" action="form_handler_post.php" method="POST">
    <input type="hidden" name="MAX_FILE_SIZE" value="300000" />     
    Send this file: <input name="userfile" type="file" />
    <input type="text" name="theRefNum" />
    <input type="submit" value="Send File" />
</form> 
```

...但我想使用 jQuery 发布表单的内容（即图像），因为我有很多其他数据要同时发布并且不想将其包含在与图片上传。例如

```
$.post("form_handler_post.php", { name: "John", time: "2pm", otherData: "Friday", image:#######}); 
```

我试过了`image:userfile`，`image:'userfile'`但`image:$('userfile').val()`无济于事。

如何在数据部分包含图像文件 - 即如何访问图像`value`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:46:12.023

你不能通过使用普通的ajax来做到这一点。您必须使用一些可用的插件。大多数插件在后端使用 iframe。看到这个[http://jquerybyexample.blogspot.com/2012/08/5-best-jquery-file-upload-plugin.html](http://jquerybyexample.blogspot.com/2012/08/5-best-jquery-file-upload-plugin.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:48:05.127

```
$("input[name='userfile']").on("change", function(){
    readURL($(this).get(0));
})
function readURL(input) {
    if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function (e) {
            $('.somepicholder img').attr('src', e.target.result);
        }
        reader.readAsDataURL(input.files[0]);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:48:51.973

您需要将文件提交到 iframe，因为您无法在 jQuery 中通过 AJAX 提交文件：

```
$('#frm1 input[type="submit"]').click(function(e) {
    /* Prevent this from submitting the form */
    e.preventDefault();

    /* Create an iframe. */
    var iframeName = "iframe" + (new Date()).getTime(),
        iframe = $('<iframe id="' + iframeName  + '" name="' + iframeName  + '"></iframe>');

    /* Add the iframe to the page and hide it. */
    $(this).append(iframe);
    $(iframe).hide();

    /* Set the form's target to point to the iframe. */
    $(this).attr({
        "action": "mypage.ext",
        "method": "post",
        "enctype": "multipart/form-data",
        "encoding": "multipart/form-data",
        "target": iframeName  
    });

    /* Call the modified form's submit function. */
    $(this).submit();
}) 
```

此代码在页面上创建一个 iframe，并确保它具有唯一的 ID 和名称。然后它将表单提交到隐藏的 iframe。

然后，您可以使用 iframe 的`onload`函数回调父页面（前提是它位于同一域中）。使用类似`window.parent.parentFunction("Successfully uploaded!")`.

# oracle - 我是否必须考虑要保存在我的数据库设计中的数据字节？

> ID：15431479
> 
> 赞同：1
> 
> 时间：2013-03-15T11:39:32.257
> 
> 标签：oracle, encoding

假设我有四个使用 GB18030（4 字节（字节）编码方案）编码的繁体中文字符，可以将其保存在我的数据库（Oracle）中长度 = 4 的 nvarchar 字段中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:43:44.303

您可以按字节或按字符指定列的大小，因此对于您的情况，4 个字节就足够了 m 以获取更多信息，请检查此问题： [BYTE and CHAR in column datatypes 的区别](https://stackoverflow.com/questions/81448/difference-between-byte-and-char-in-column-datatypes)

# ios - 新 Facebook SDK 3.2 中的注销问题

> ID：15431480
> 
> 赞同：1
> 
> 时间：2013-03-15T11:39:32.143
> 
> 标签：ios, facebook

我在我的 iphone 应用程序中使用 Facebook SDK 3.2，我使用 FBLoginView 从 Facebook 登录和注销。和两个按钮：第一个在用户的墙上发布内容，第二个在朋友的墙上发布内容。在这两个中我都在使用 FBWebDialog。当用户启动应用程序登录页面打开（在 safari 中）并且一切正常。

但我面临以下问题：

1.  如果用户想使用另一个 facebook id 登录，则没有选项可以这样做，第一个用户必须从他在 safari 中的第一个 facebook 帐户注销，当他返回应用程序时，用户才会获得 Facebook 登录页面登录再次。

2.  当用户点击 FBLoginView 时，它将打开 safari，但在点击 loginView 后，如果用户想在不登录的情况下返回应用程序，则没有选项可以这样做。

3.  在发布操作时，我正在使用 FBWebDialog，如果我没有登录并尝试打开 FBWebDialog，那么在对话框中它会显示 Facebook 登录页面首先登录，但在输入 Facebook 的用户信息和密码后，它会显示一条消息“发生错误。请稍后再试。” 在对话框中，如果我们点击“确定”按钮，它会显示用户已登录，但不会显示共享内容的页面。真是奇怪的行为。

请帮忙！！！！

任何帮助将不胜感激。

# java - 未创建类文件

> ID：15431482
> 
> 赞同：0
> 
> 时间：2013-03-15T11:39:40.087
> 
> 标签：java, noclassdeffounderror

我使用emacs编写java并在Mac上通过终端编译和运行。我收到此错误消息：

```
Exception in thread "main" java.lang.NoClassDefFoundError: xxx
    at Testprogram2.<init>(Task.java:86)
    at Task.main(Task.java:12)
Caused by: java.lang.ClassNotFoundException: xxx
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 2 more 
```

我什至更改了 xxx 类的名称，但它仍然不会创建这个类。创建了大约其他 20 个类，但没有这个类。如何解决这个问题？

编辑：

类是这样定义的（没什么特别的）：

```
class xxx extends superXXX{

     xxx(String number, double price){
          super(number,price);
     }

     //other methods here

}

class superXXX implements onlyXXX{

    String number;
    double price;
    double result;

    superXXX(String number, double price){
        this.number = number;
        this.price = price;
        double p = calculatePrice();
        result = p;
    }

   //other methods here

} 
```

我先写“java Task.java”，然后在终端上写“javac Task”并遇到创建xxx对象的行后收到此错误消息：

```
xxx pb1 = new xxx("Reg1", 5000.0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:11:36.317

我不确定您是否已经这样做了（通过阅读上面的示例），但我还将您的代码拆分为每个类和接口的单独文件。

您还需要确保这些类是公共的，以便其他包中的类可以根据需要使用。（显然，如果需要，请确保方法和成员是私有的或受保护的！）

（编辑：还有其他人之前正确回答过你需要先上“课”

```
superXXX implements onlyXXX{... 
```

所以应该是

```
class superXXX implements onlyXXX{... 
```

但由于某种原因，答案不再存在......）

# wpf - 如何在 WPF 中的 WinForm/ActiveX（由 WindowsFormsHost 托管）控件自己的上下文菜单上添加上下文菜单项

> ID：15431483
> 
> 赞同：1
> 
> 时间：2013-03-15T11:39:41.197
> 
> 标签：wpf, contextmenu, windowsformshost

我们正在创建一些 WPF UserControl，它将通过使用 WindowsFormsHost 来利用一些 WinForms 或 ActiveX 控件。例如，在一个 UC 中，我们有这样的代码：

```
<WindowsFormsHost Name="windowsFormsHost1" Height="Auto" MinHeight="400" MinWidth="400">
    <viewer:ReportViewer x:Name="viewerInstance" />
</WindowsFormsHost> 
```

ReportViewer 可以在 Microsoft.Reporting.WinForms 中找到。

在另一个 UC 中，代码是这样的：

```
<WindowsFormsHost Name="windowsFormsHost1" Height="Auto" MinHeight="400" MinWidth="400">
    <AxOWC:AxPivotTable x:Name="pivotTable" />               
</WindowsFormsHost> 
```

AxPivotTable 可以在 AxMicrosoft.Office.Interop.Owc11 中找到

ReportViewer 和 AxPivotTable 控件都有自己的上下文菜单，其中包括许多使用功能。我想保留它们。但我还需要添加一些新功能。换句话说，我想设计一个增强的上下文菜单，默认上下文菜单是其中的一部分，而我的自定义菜单项是其他部分。

问题来了：我真的不知道在哪里添加我的自定义上下文菜单项。我试图将上下文菜单对象添加到 WindowsFormsHost。但结果是这个自定义菜单根本不会显示。我进一步将 WindowsFormsHost.ContextMenu.IsOpen 设置为 true，这一次的结果是我的自定义菜单将隐藏控件的默认上下文菜单。

我还尝试从代码隐藏中添加菜单项。例如，ReportViewer 派生自 WindowsForms（不是 WPF 程序集），它有一个名为 ContextMenu 的成员。但是当我检查 viewInstance.ContextMenu.MenuItems 时，我发现它实际上有零计数集合，这意味着默认上下文菜单在这个级别上不存在。那么我怎样才能找到默认的上下文菜单并添加我的自定义菜单项呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:36:40.550

您不能将 WPF 内容与非 WPF 内容重叠（除非您使用的是 D3DImage）

# android - 用手指沿路径移动对象

> ID：15431489
> 
> 赞同：0
> 
> 时间：2013-03-15T11:39:54.970
> 
> 标签：android, path, drag-and-drop, move, custom-draw

[按照Android 沿路径移动对象](https://stackoverflow.com/questions/6154370/android-move-object-along-a-path)的解释，我绘制了一个圆形路径，并可以沿它为对象设置动画

现在我需要使用手指沿着相同的路径移动相同的对象。基本上它应该像拖放一样，但使用路径作为指南。

我怎么能做这样的事情？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T09:32:20.283

您可以尝试获取触摸点的像素颜色，然后您可以检查该颜色是否与预定义的路径颜色匹配。我有同样的问题，发现这非常有用。

# android - 图片上传问题

> ID：15431492
> 
> 赞同：0
> 
> 时间：2013-03-15T11:40:17.083
> 
> 标签：android, encoding, picturegallery

我有这个活动，用户可以从图库中选择一张图片，也可以只拍照并（连同其他数据）将其上传到网站。

到目前为止，我遇到了 2 个不同的问题：

**1）**如果我用图库中的图片尝试它，我会得到一个带有消息的 IOException /external/images/media/2305: open failed: ENOENT (No such file or directory) 打开文件流时会发生这种情况。

**2）**如果我通过拍照来尝试，它可以，但是编码的数据字符串由“AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA”（真的更长，但只有A）组成，我想这不是一个好兆头。这只是一个猜测，因为我仍然无法将其正确上传到网站，但显示相同数据字符串的不同图片闻起来很有趣。

这里的代码

```
@Override

public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode) {
    case TAKE_PICTURE:
        if (resultCode == Activity.RESULT_OK) {
            //Uri selectedImage = imageUri;
            loadImage(imageUri);

    }
    break;
case SELECT_PHOTO:
    if(resultCode == Activity.RESULT_OK){  
        imageUri = data.getData();
        loadImage(imageUri);
    }
}
} 
```

这就是我将图像（拍摄的图片或从图库中获取的图片）加载到 ImageView 上的方式。它工作正常。

```
public void loadImage(Uri selectedImage){
    mActivity.getContentResolver().notifyChange(selectedImage, null);

    ContentResolver cr = mActivity.getContentResolver();
    Bitmap bitmap;
    try {
        bitmap = android.provider.MediaStore.Images.Media
                .getBitmap(cr, selectedImage);

        ivPicture.setImageBitmap(bitmap);
        ivPicture.setVisibility(View.VISIBLE);
        mActivity.croutonInfo(selectedImage.toString());

    } catch (Exception e) {
        mActivity.croutonAlert("Failed to load");
        e("Camera " + e.toString());
    }
} 
```

这是我用来模拟数据上传的方法。当我得到 API 时，它将有一个异步任务来处理 http 传输，到目前为止它只将数据放入一个无逻辑的传输对象中

```
public void uploadTapa() throws IOException{
    mActivity.croutonInfo("subiendo tapa ");
    d("uploadTapa new ");
    TapaUploadParametros tup = new TapaUploadParametros();
    d("uploadTapa bar: " + nombreBar);
    tup.setBarNombre(etBarName.getText().toString());
    d("uploadTapa tapa: " + nombreTapa);
    tup.setNombre(etTapaName.getText().toString());
    d("uploadTapa municipio: " + municipio);
    tup.setLocalidad(municipio);
    d("uploadTapa provincia: " + provincia);
    tup.setProvincia(provincia);
    d("uploadTapa tipologiaId: " + tipologiaId);
    tup.setTipo(tipologiaId);
    d("uploadTapa precioId: " + precioId);
    tup.setPrecio(precioId);

    String encodedImage = encodeImgForHTTP(imageUri);
    d("uploadTapa encoded image: " + encodedImage);
    tup.setPic(encodedImage);
    d("uploadTapa direccionBar: " + direccionBar);
    tup.setBarDireccion(direccionBar);
} 
```

这是对图像进行编码以进行 http 传输的方法。画廊中的图像在“打开流之前”之后失败

```
 private String encodeImgForHTTP (Uri imageUri) throws IOException{
        ContentResolver cr = mActivity.getContentResolver();
        d("encodeImgForHTTP before opening stream ");
        FileInputStream fis = new FileInputStream(imageUri.getPath());
        d("encodeImgForHTTP after opening stream ");
        // Get binary bytes for encode
        byte[] imageBytes = new byte[fis.available()];
        d("encodeImgForHTTP after getting byte array ");
        // base 64 encode for text transmission (HTTP)
        d("encodeImgForHTTP pre 64: " + imageBytes);
        String data_string = Base64.encodeToString(imageBytes, Base64.URL_SAFE); 
        d("encodeImgForHTTP before returning the encoded data string " + data_string);
        return data_string;
    } 
```

我对画廊图像做错了什么？为什么不同图片的编码看起来一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:09:33.937

我认为您应该将输入流缓冲到较小的字节数组中，并且不要使用该`available`函数，因为它是您的编码函数中的估计值。

为了拍照，您必须确定要保存图像的路径，并将其作为额外的 Intent 传递，例如：

```
private void capture(){
    String directoryPath = Environment.getExternalStorageDirectory() + "/" + IMAGE_DIRECTORY + "/";
    String filePath = directoryPath+Long.toHexString(System.currentTimeMillis())+".jpg";
    File directory = new File(directoryPath);
    if (!directory.exists()) {
        directory.mkdirs();
    }
    this.capturePath = filePath; // you will process the image from this path if the capture goes well
    Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra( MediaStore.EXTRA_OUTPUT, Uri.fromFile( new File(filePath) ) );
    startActivityForResult(intent, REQUEST_CAPTURE);                

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:54:46.200

我想我终于让它工作了。首先，我使用了 Emil 的建议并保存了图像。DCIM_PATH 是 DCIM 文件夹的路径。

```
public void takePhoto() {
    String directoryPath = DCIM_PATH;
    d("takePhoto directoryPath: " + directoryPath);
    this.pictureFileName = Long.toHexString(System.currentTimeMillis())+".jpg";
    String filePath = directoryPath + pictureFileName ;
    File directory = new File(directoryPath);
    if (!directory.exists()) { // in case there's no DCIM folder
        directory.mkdirs(); // just create it
    }
    d("takePhoto filePath: " + filePath);
    this.imageUri = Uri.parse(filePath);
    d("takePhoto imageUri: " + filePath);
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            // here's where I tell the intent where to save the file
    intent.putExtra( 
            MediaStore.EXTRA_OUTPUT,Uri.fromFile( new File(filePath) )
            );

    startActivityForResult(intent, TAKE_PICTURE);

} 
```

我不得不使用两种不同的方法将图片加载到 imageview。如果是刚拍的照片，我用这个：

```
public void loadImageJustTaken(Uri selectedImage) {
    mActivity.getContentResolver().notifyChange(selectedImage, null);

    Bitmap bitmap = 
            BitmapFactory.decodeFile(imageUri.getPath());

    ivPicture.setImageBitmap(bitmap);
    ivPicture.setVisibility(View.VISIBLE);
} 
```

但是要使用画廊中的一个，我必须使用 contentResolver

```
public void loadImage(Uri selectedImage){

    imageUri = selectedImage;
    mActivity.getContentResolver().notifyChange(selectedImage, null);

    ContentResolver cr = mActivity.getContentResolver();
    Bitmap bitmap;
    try {
        bitmap = android.provider.MediaStore.Images.Media
                .getBitmap(cr, imageUri);

        ivPicture.setImageBitmap(bitmap);
        ivPicture.setVisibility(View.VISIBLE);

        mActivity.croutonInfo(imageUri.getPath());

    } catch (Exception e) {
        e("Camera " + e.toString());
    }
} 
```

当我想上传图像时，我必须对其进行编码。只要您提供正确的文件路径，此方法就可以工作

```
 private String encodeImgForHTTP (Uri imageUri) throws IOException{
    String realPicPath = getPath(imageUri);
    d("encodeImgForHTTP before opening stream " + realPicPath);
    FileInputStream fis = new FileInputStream(realPicPath);
    d("encodeImgForHTTP after opening stream ");
    // Get binary bytes for encode
    byte[] imageBytes = IOUtils.toByteArray(fis);
    d("encodeImgForHTTP after getting byte array ");

    // base 64 encode for text transmission (HTTP)
    //String data_string = Base64.encodeToString(data, Base64.URL_SAFE);
    d("encodeImgForHTTP pre 64: " + imageBytes);
    String data_string = Base64.encodeToString(imageBytes, Base64.URL_SAFE); 
    d("encodeImgForHTTP before returning the encoded data string " + data_string);
    return data_string;
} 
```

这就是我如何获得图片的“真实路径”：

```
public String getPath(Uri uri) throws IOException {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = mActivity.
            managedQuery(uri, projection, null, null, null);
    if (cursor == null){ // with pictures just taken, the uri returned by the onActivityResult makes cursor to be null. Following method takes care of that
        uri = saveMediaEntry(imageUri.getPath(), pictureFileName, "");
        d("cursor nulo, segundo cursor con uri " + uri.getPath());
        cursor = mActivity.
                managedQuery(uri, projection, null, null, null);
    }
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

方法 saveMediaEntry 为设备的媒体数据库创建一个条目，返回其 Uri。使用那个 Uri，光标现在将指向我们想要的图片文件

```
 private Uri saveMediaEntry(
        String imagePath,String title,String description) throws IOException {

    ExifInterface exif = new ExifInterface(imagePath);

    ContentValues v = new ContentValues();
    v.put(Images.Media.TITLE, title);
    v.put(Images.Media.DISPLAY_NAME, title);
    v.put(Images.Media.DESCRIPTION, description);
    v.put(Images.Media.DATE_ADDED, System.currentTimeMillis());
    v.put(Images.Media.DATE_TAKEN, exif.getAttribute(ExifInterface.TAG_DATETIME));
    //v.put(Images.Media.DATE_MODIFIED, dateTaken) ;
    v.put(Images.Media.MIME_TYPE, "image/jpeg");
    v.put(Images.Media.ORIENTATION, exif.getAttribute(ExifInterface.TAG_ORIENTATION));
    File f = new File(imagePath) ;
    File parent = f.getParentFile() ;
    String path = parent.toString().toLowerCase() ;
    String name = parent.getName().toLowerCase() ;
    v.put(Images.ImageColumns.BUCKET_ID, path.hashCode());
    v.put(Images.ImageColumns.BUCKET_DISPLAY_NAME, name);
    v.put(Images.Media.SIZE,f.length()) ;
    f = null ;

    v.put(Images.Media.LATITUDE, exif.getAttribute(ExifInterface.TAG_GPS_LATITUDE));
    v.put(Images.Media.LONGITUDE, exif.getAttribute(ExifInterface.TAG_GPS_LONGITUDE));

    v.put("_data",imagePath) ;
    ContentResolver c = mActivity.getContentResolver() ;
    return c.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, v);
} 
```

毕竟，图片可以正常加载，并且 Base64.encodeToString 对于不同的图片返回是不同的:)

希望它可以帮助某人:)

# sql-server - 如何计算工作日中两个日期之间的差异

> ID：15431498
> 
> 赞同：-1
> 
> 时间：2013-03-15T11:40:22.830
> 
> 标签：sql-server

我需要计算两个日期之间的工作日差异。SQL Server 中是否有内置函数？有人可以提供一个如何做到这一点的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:43:21.033

这是我快速写的东西。只需将其封装成一个函数或任何你需要的东西。

```
declare @StartDate datetime
declare @EndDate datetime

declare @TotalDiff int
declare @NumberOfWeekends int

SET @StartDate = '3/12/2013'
SET @EndDate = '3/22/2013'
SET @NumberOfWeekends = 0
SET @TotalDiff = DATEDIFF(d,@StartDate, @EndDate)

If @TotalDiff > 7 
    SET @NumberOfWeekends = @TotalDiff / 7
else if DATEPART(dd, @EndDate) < DATEPART(DD, @StartDate)
    SET @NumberOfWeekends = 1

select (@TotalDiff - 2*@NumberOfWeekends) as TotalWorkDays 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:57:02.920

不，SQL Server 没有任何内置功能可以直接为您提供两个日期之间的工作日数，但是有一些内置函数可以让您编写一个。

首先，一些注意事项

*   世界不能同意什么是“工作日”。对于我们大多数人来说，这是周六和周日。中东大部分地区是周五和周六（周日是正常工作日）

*   世界肯定不能就什么构成公共假期达成一致，因为公共假期几乎总是被认为是非工作日。

您还没有指定如何处理这些情况，所以让我们做一些假设：

*   周六和周日将是非工作日
*   公众假期不计算在内

现在，在 sql 中确定特定日期是星期六还是星期日很容易，给定 a`@date`类型`DateTime`：

```
IF DATENAME(dw,@date) IN ('Saturday','Sunday') 
```

考虑到这一点，给定开始和结束日期，您可以从`@startDate`到递增计数`@endDate`

```
DECLARE @startDate DATETIME = '2013-01-01'
DECLARE @endDate DATETIME = '2013-01-20'

DECLARE @currDate DATETIME = @startDate
DECLARE @numDays INT = 0
WHILE @currDate<@endDate
BEGIN
   IF DATENAME(dw,@currDate) NOT IN ('Saturday','Sunday')
     SET @numDays = @numDays + 1

   SET @currDate = DATEADD(day,1,@currDate)
END
SELECT @numDays 
```

注意：这是不包括在内的，所以不会计算在内`@endDate`。您可以通过更改`WHILE @currDate<@endDate`为`WHILE @currDate<=@endDate`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-30T17:00:47.790

我的解决方案不计算@EndDate，所以如果您需要更改它，只需在@d2 中加1。

首先，我计算从“初始”日（恰好是 1900 年 1 月 1 日，星期一）到 @StartDate 和 @EndDate 的天数：

```
DECLARE @d1 int = DATEDIFF(Day, 0, @StartDate);
DECLARE @d2 int = DATEDIFF(Day, 0, @EndDate); 
```

那么，@StartDate 和 @EndDate 之间的总天数为：

```
@d2 - @d1 
```

从中减去间隔中的星期日数和星期六数，每个计算为与总天数相似的差异，但现在是整周（7 天）。为了获得整周的数量，我使用整数除以 7 以及“初始”日 (0) 是星期一这一事实。间隔中的星期日数为

```
@d2/7 - @d1/7 
```

星期六的数量是

```
(@d2+1)/7 - (@d1+1)/7 
```

综上所述，我的解决方案是：

```
DECLARE @StartDate DATETIME = '20180101'
DECLARE @EndDate DATETIME = '20180201'

DECLARE @d1 int = DATEDIFF(Day, 0, @StartDate)
DECLARE @d2 int = DATEDIFF(Day, 0, @EndDate)

SELECT @d2 - @d1 - (@d2/7 - @d1/7) - ((@d2+1)/7 - (@d1+1)/7) AS workdays 
```

# php - apache日志找出php文件/函数做了什么

> ID：15431500
> 
> 赞同：0
> 
> 时间：2013-03-15T11:40:28.943
> 
> 标签：php, apache, logging

有没有办法记录执行 php 文件/函数时发生的情况？假设我编写了一个 php 脚本（create.php）来动态创建文件夹/目录，那么 apache 会记录这个并告诉我是（create.php）创建了文件夹.. 这种日志记录也已经完成由阿帕奇？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:46:36.327

简单的答案是 Apache 不会记录 PHP 所做的任何事情。

您可能希望查看[log4php](http://logging.apache.org/log4php)来开展业务。

# java - JAVAFX - 无法将项目添加到列表视图

> ID：15431510
> 
> 赞同：1
> 
> 时间：2013-03-15T11:40:46.680
> 
> 标签：java, javafx-2, javafx

我有一个`Tab`电话聊天。在此选项卡中，我有一个用户列表，即`ListView<string>`. 其内容`ListView`是从 FXML 文件中加载的：

```
FXMLLoader.load(getClass().getResource("chat.fxml")) 
```

我正在尝试`listview`使用 java 添加项目，但是当我打开 GUI、聊天选项卡时，我添加的项目不会显示在 users 中`listview`。

我尝试的方法之一是：

```
List<String> values = Arrays.asList("one", "two", "three");
listOfUsers.setItems(FXCollections.observableList(values)); 
```

我也尝试过其他方法，但似乎没有任何效果。我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T14:29:41.877

谢谢大家..
问题是我的用户列表视图是由FXML加载器创建的，然后我错误地在java代码中再次初始化它，所以只需要删除该行：

```
listOfUsers=new ListView<String>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:51:51.260

文件 chat.fxml 有 fx:controller?!

你需要...

```
xmlns:fx="http://javafx.com/fxml" fx:controller="DIRECTORY.FILE" //FILE.java 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-15T13:35:01.170

试试这个

```
BorderPane pane = null;
    try {
        pane = (BorderPane) FXMLLoader.load(HERENAMECLASS.class.getResource("chat.fxml"));
        pane.getStyleClass().add("main");
    } catch (IOException ex) {

        Logger.getLogger(HERENAMECLASS.class.getName()).log(Level.SEVERE, null, ex);
        System.exit(-1);
    } 
```

# objective-c - 如何使用非 nil parentContext 创建 NSManagedObjectContext？

> ID：15431517
> 
> 赞同：0
> 
> 时间：2013-03-15T11:41:03.683
> 
> 标签：objective-c, cocoa, core-data, nsmanagedobjectcontext, uimanageddocument

你如何创建一个在不同队列/线程上运行`NSManagedObjectContext`的非？`nil` `parentContext`

`UIManagedDocument`的 managedObjectContext 确实有这个，但我不知道如何在不使用`UIManagedDocument`.

这是我正在使用的代码，其结果是`managedObjectContext`其`parentContext`属性为`nil`.

```
-(NSManagedObjectContext *)context{

    if (_context == nil){
        _context = [[NSManagedObjectContext alloc] init];
        _context.persistentStoreCoordinator = self.storeCoordinator;
    }
    return _context;
}

-(NSPersistentStoreCoordinator *) storeCoordinator{
    if (_storeCoordinator == nil) {
        _storeCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:self.model];

        NSError *err = nil;
        if (![_storeCoordinator addPersistentStoreWithType:NSSQLiteStoreType
                                             configuration:nil
                                                       URL:self.dbURL
                                                   options:nil
                                                     error:&err ]) {

            NSLog(@"Error while adding a Store: %@", err);
            return nil;

        }
    }
    return _storeCoordinator;
}

-(NSManagedObjectModel *) model{

    if (_model == nil) {
        _model = [[NSManagedObjectModel alloc] initWithContentsOfURL:self.modelURL];
    }
    return _model;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T17:03:45.923

您只需分配它并设置其父上下文即可创建子上下文：

```
NSManagedObjectContext *childContext = [[NSManagedObjectContext alloc] init];
[childContext setParentContext:[self managedObjectContext]]; 
```

持久存储协调器是从父上下文继承的，因此这就是创建子上下文所需的全部内容。**但是**父上下文**必须**使用一种基于队列的并发类型。这意味着您在上面创建上下文的代码必须更改为：

```
_context = [[NSManagedObjectContext alloc] initWithConcurrencyType: NSMainQueueConcurrencyType]; 
```

还有`NSPrivateQueueConcurrencyType`。哪个更好取决于您的应用程序的设计。

不过，*在不同的队列/线程上运行*是另一回事。这从来都不是自动的。您的代码在您调用它的任何队列或线程上运行。Core Data 的直接支持仅限于使用一种基于队列的并发类型——但是您需要确保使用`performBlock:`或`performBlockAndWait:`确保上下文的操作实际上发生在正确的队列上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:25:42.160

创建后，`NSManagedObjectContext`如果您需要将其作为子上下文，则必须分配父上下文。

```
[newContext setParentContext:mainThreadManagedObjectContext]; 
```

在这种情况下，您甚至不必分配持久存储。从文档：

> 您现在可以使用 setParentContext: 指定父托管对象上下文，而不是为托管对象上下文指定持久存储协调器。这意味着获取和保存操作由父上下文而不是协调器进行调解。

# r - 在 R 中填充 3D 数组：如何避免强制列出？

> ID：15431518
> 
> 赞同：0
> 
> 时间：2013-03-15T11:41:05.400
> 
> 标签：r, list, multidimensional-array, coercion

我已经预先分配了一个 3D 数组并尝试用数据填充它。但是，每当我使用先前定义的 data.frame 列执行此操作时，数组就会神秘地转换为列表，这会搞砸一切。将 data.frame 列转换为向量无济于事。

例子：

```
exampleArray <- array(dim=c(3,4,6))
exampleArray[2,3,] <- c(1:6) # direct filling works perfectly

exampleArray
str(exampleArray) # output as expected 
```

问题：

```
exampleArray <- array(dim=c(3,4,6))
exampleContent <- as.vector(as.data.frame(c(1:6)))
exampleArray[2,3,] <- exampleContent # filling array from a data.frame column
# no errors or warnings

exampleArray    
str(exampleArray)  # list-like output! 
```

有什么办法可以解决这个问题并正常填满我的数组吗？

感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:46:34.040

尝试这个：

```
exampleArray <- array(dim=c(3,4,6))
exampleContent <- as.data.frame(c(1:6))
> exampleContent[,1]
[1] 1 2 3 4 5 6
exampleArray[2,3,] <- exampleContent[,1] # take the desired column
# no errors or warnings
str(exampleArray)
int [1:3, 1:4, 1:6] NA NA NA NA NA NA NA 1 NA NA ... 
```

您试图在数组中插入数据框，这是行不通的。您应该使用`dataframe$column`or`dataframe[,1]`代替。

此外， as.vector 在 ) 中没有做任何事情`as.vector(as.data.frame(c(1:6))`，您可能在 之后`as.vector(as.data.frame(c(1:6)))`，尽管这不起作用：

```
as.vector(as.data.frame(c(1:6)))
Error: (list) object cannot be coerced to type 'double' 
```

# git - 使用 git 推送标签被拒绝为非快进

> ID：15431520
> 
> 赞同：5
> 
> 时间：2013-03-15T11:41:09.637
> 
> 标签：git

Git pull 作品没有显示任何更新：

```
sh-3.2$ git pull
Already up-to-date. 
```

当我执行 git push 时出现错误：

```
sh-3.2$ git push --tags
To user@example.com:some/git/repo
 ! [rejected]        DEVEL_BLEEDINGEDGE -> DEVEL_BLEEDINGEDGE (non-fast-forward)
error: failed to push some refs to 'user@example.com:some/git/repo'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

变基给出相同的结果：

```
sh-3.2$ git pull --rebase
Current branch devel is up to date. 
```

DEVEL_BLEEDINGEDGE 标签用于我的日常自动构建脚本，每次我需要使用这些脚本部署一些新内容时，我都会使用以下代码移动该标签：

```
git tag -f DEVEL_BLEEDINGEDGE 
```

那么，为什么我不能推回我的标签呢？

对于我也不移动的其他标签，我时不时会收到此错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T12:23:23.210

看起来您想移动标签。标签旨在标记项目的特定状态，例如 1.0 版。这不应该每天都改变。如果你想改变（移动）一个标签，你可以使用 -f （强制）开关两次：

```
git tag -f TAG_I_MOVE
git push --tags -f 
```

在您的情况下，我会使用分支来标记“开发人员最前沿”

```
git branch -f DEVEL_BLEEDINGEDGE HEAD
git push --tags 
```

只要您在同一历史路径中向前移动您的 DEVEL_BLEEDINGEDGE 分支，这里不需要“-f”开关进行推送。

# sql-server-2008 - 查询以查找 Sql Server 中存储过程或函数中的参数数量？

> ID：15431523
> 
> 赞同：5
> 
> 时间：2013-03-15T11:41:18.843
> 
> 标签：sql-server-2008, tsql, stored-procedures

好吧，如果我想在 SQL SERVER 中查找任何存储过程或函数的参数计数，那么正确的方法是什么。

您的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T11:47:21.007

尝试以下查询以获取存储过程的所有参数的列表。如果您只想要参数的数量，请将选择更改为 COUNT(*)。

```
SELECT 
    p.name AS Parameter,        
    t.name AS [Type]
FROM sys.procedures sp
JOIN sys.parameters p 
    ON sp.object_id = p.object_id
JOIN sys.types t
    ON p.system_type_id = t.system_type_id
WHERE sp.name = '<name>' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T11:48:30.213

`INFORMATION_SCHEMA.PARAMETERS`应该是你所需要的...

```
SELECT  *
FROM    INFORMATION_SCHEMA.PARAMETERS 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-05T08:10:24.043

```
SELECT  *
FROM    INFORMATION_SCHEMA.PARAMETERS where SPECIFIC_NAME = 'YourProcedureName' 
```

# android - 将高度设置为 WRAP_CONTENT 到 ViewPager 没有发生

> ID：15431529
> 
> 赞同：0
> 
> 时间：2013-03-15T11:41:43.160
> 
> 标签：android, android-viewpager, android-pageradapter

我在 ViewPager 中有图像。我读过我们不能将 Wrap_CONTENT 设置为 ViewPager 的高度，因为它不起作用。那么我应该怎么做才能以适当的纵横比显示图像，因为图像大小可能会有所不同。那么我能做些什么来实现这一点。

请提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T12:25:58.750

您需要使用 view.setImageResource 而不是 view.setBackgroundResource，您应用的属性未在“背景”上设置

```
@Override
public Object instantiateItem(View container, int position) {
    ImageView view = new ImageView(activity);
    view.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.MATCH_PARENT));
    view.setAdjustViewBounds(true);
    view.setScaleType(ScaleType.FIT_CENTER);
    view.setImageResource(imageArray[position]);
    ((ViewPager) container).addView(view, 0);
    return view;
} 
```

# c# - 为什么在 MSpec 中对 FakeItEasy 对象的 MustHaveHappened 调用失败？

> ID：15431542
> 
> 赞同：2
> 
> 时间：2013-03-15T11:42:21.277
> 
> 标签：c#, unit-testing, mspec, fakeiteasy

运行以下测试时，所有断言都失败。无法弄清楚它们为什么会失败，因为实际的实现确实调用了对象。

这是一个已知的错误？因为其他一些测试确实成功了。

```
[Subject("Pst Cleanup")]
public class When_running_Pst_CleanUp
{
    Establish context = () =>
    {
        _folders = A.Fake<IOutlookFolderParameters>();
        _processor = A.Fake<IOutlookPstCleaner>();
    };

    Because of = () => _processor.Cleanup(_folders);

    It should_cleanup_the_mail_folder = () => A.CallTo(() => _folders.EmailFolder).MustHaveHappened();
    It should_cleanup_tasks_folder = () => A.CallTo(() => _folders.TaskFolder).MustHaveHappened();
    It should_cleanup_appointments_folder = () => A.CallTo(() => _folders.AppointmentFolder).MustHaveHappened();

    private static IOutlookPstCleaner _processor;
    private static IOutlookFolderParameters _folders;
} 
```

> 以下调用的断言失败：Outlook.Contracts.IOutlookFolderParameters.get_NotificationsFolder() 预计至少会找到一次，但没有对假对象进行调用。
> 
> 在 FakeItEasy.Core.FakeAsserter.AssertWasCalled(Func `2　callPredicate,　String　callDescription,　Func`2 repeatPredicate, String repeatDescription) 在 FakeItEasy.Configuration.RuleBuilder.MustHaveHappened(Repeated repeatConstraint) 在 UnitTests.When_running_Pst_CleanUp.<.ctor>b__2() 在 When_running_Pst_CleanUp.cs：第 19 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T06:59:43.867

这是 FakeItEasy 绝对正确的行为。您需要使用真正的实现`IOutlookPstCleaner`来使您的测试成功。始终确保您伪造正确的东西，并且不要意外伪造您的 SUT。

通过对刚刚调用的属性进行测试，您绝对不会测试任何有价值的东西。我也可以只写这个实现`IOutlookPstCleaner`，你的测试就会成功：

```
public class Cleaner : IOutlookPstCleaner 
{
    public void Cleanup(IOutlookFolderParameters folders)
    {
        var email = folders.EmailFolder;
        var task = folders.TaskFolder;
        var appointment = folders.AppointmentFolder;
    }
} 
```

如果您发布您的实现，`IOutlookPstCleaner`我很乐意帮助您找到正确的测试对象。

# jquery - jquery第二次加载部分视图？

> ID：15431545
> 
> 赞同：0
> 
> 时间：2013-03-15T11:42:25.913
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我尝试使用**`jquery.load("/home/CreateEdit")`** 网格中的按钮，所以每次，我想编辑一行，我使用这个 jquery.load 加载一个 partialView。
问题是，在我编辑了一些日期之后，我想再次调用加载函数，并没有返回服务器，重新加载新修改的日期。为什么？
这是加载的目的吗？只有一次去服务器？我是否必须使用 get/post jquery 调用，或者解决方案是什么？

PS：动作是这样的

```
[HttpGet]
    public ActionResult CreateEdit(int id=0)
    {
        if (id != 0)
        {
            var model = _tallyMeasurementRepository.GetById(id);
            return PartialView("_CreateEdit", AutoMapper.Mapper.Map<TallyMeasurement, TallyMeasurementViewModel>(model));
        }
        else
        {
            return PartialView("_CreateEdit", new TallyMeasurementViewModel());
        }

    }

    [HttpPost]
    public ActionResult CreateEdit(TallyMeasurementViewModel viewModel)
    {
        if (viewModel != null)
        {
            _tallyMeasurementRepository.Update(AutoMapper.Mapper.Map<TallyMeasurementViewModel,TallyMeasurement >(viewModel));
        }
        return RedirectToAction("Measurementt");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:55:08.740

在服务器返回重定向结果后，客户端应进行任何后续调用。在客户端请求之前，服务器不会发送额外的数据。

因此，在您的 jquery 结果处理程序代码中，检查响应是否为重定向；如果是进行后续调用。

或者，如果您知道要返回的记录的 id，则始终可以简单地返回不同的结果。

```
[HttpPost]
public ActionResult CreateEdit(TallyMeasurementViewModel viewModel)
{
    if (viewModel != null)
    {
        _tallyMeasurementRepository.Update(AutoMapper.Mapper.Map<TallyMeasurementViewModel,TallyMeasurement >(viewModel));
    }
    return CreateEdit(id); // WHERE id is the value to load
} 
```

# objective-c - NSPanel 未收到鼠标拖动事件

> ID：15431559
> 
> 赞同：4
> 
> 时间：2013-03-15T11:43:04.530
> 
> 标签：objective-c, xcode, cocoa, draggable, nswindow

我有一个无边框的 NSPanel，当我第一次启动它并且它有焦点时，我可以拖动它并且正确触发 mousedragged 方法，但是当我将焦点切换到另一个应用程序然后返回到 NSPanel（使用 NSNonactivatingPanelMask 设置）我不再收到鼠标拖动事件。

我仍然收到 mouseup 和 mousedown 事件，所以我不知道为什么不执行 mousedragged 事件。

有任何想法吗？

以下是它的初始化方式：

```
 _panel  = [[MyPanel alloc] initWithContentRect:frame
              styleMask:NSBorderlessWindowMask | NSNonactivatingPanelMask
              backing:NSBackingStoreBuffered
              defer:NO]; 
```

我还尝试将所有这些方法添加到我的面板类中：

```
- (BOOL)canBecomeKeyWindow {
    return YES;
}

- (BOOL)canBecomeMainWindow
{
    return YES;
}

- (BOOL)canBecomeFirstResponder {
    return YES;
}

- (BOOL)acceptsFirstResponder
{
    return YES;
}

- (BOOL)acceptsFirstMouse
{
    return YES;
} 
```

并使其成为鼠标按下的第一响应者（它仍然接收）：

```
- (void)mouseDown:(NSEvent *)theEvent
{
    [self makeFirstResponder:self];
    [self makeKeyWindow];
    [self setBackgroundColor:[NSColor redColor]];
    [self display];
} 
```

mousedragged 只包含以下内容：

```
- (void)mouseDragged:(NSEvent *)theEvent
{
    [self setBackgroundColor:[NSColor greenColor]];
    [self display];
    NSLog(@"dragged");
} 
```

我不希望窗口获得焦点。（重点应放在下面的第三方应用程序上）。

**更新：我添加了一个示例项目，在这里下载：http: [//users.telenet.be/prullen/MovingPanel.zip](http://users.telenet.be/prullen/MovingPanel.zip)**

如您所见，当您第一次运行应用程序时，拖动它会在console.log 中连续输出“dragged”（背景颜色为绿色）。如果您然后切换到另一个应用程序，然后再返回到移动面板应用程序，则拖动将不再输出任何内容。（并且背景颜色将是红色，这是在 mousedown 事件处理程序中设置的）。

如果没有 NSNonactivatingPanelMask，它可以正常工作，但我的面板下方的窗口保持活动状态至关重要。如果有其他方法可以做到这一点，请分享。

我还注意到一件事，如果你双击面板（快速），然后拖动，它会变成绿色（所以 mousedragged: 被调用），但它没有移动......不知道该怎么想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T01:14:08.147

我还注意到，如果我这样做 [self setMovableByWindowBackground:NO]; 那么它也将正常工作。我敢打赌 setMovableByWindowBackground 的工作方式会干扰被调用的 mouseDragged。它可能是一个被调用的错误。

我猜想一种可能的解决方案是实现自己的窗口拖动。

如果您真正感兴趣的是在窗口移动时做出响应，那么这个问答可能会提供您所需要的。

[鼠标移动窗口时如何接收通知？](https://stackoverflow.com/questions/10495037/how-to-receive-notifications-when-moving-window-by-mouse)

# ruby-on-rails - 测试写在seeds.rb文件中的方法

> ID：15431563
> 
> 赞同：1
> 
> 时间：2013-03-15T11:43:24.107
> 
> 标签：ruby-on-rails, unit-testing, testing, ruby-on-rails-3.2

我在种子.rb 文件中编写了一个带有一些方法的 ruby​​ 类，该文件
负责在数据库的不同表中上传内容。
现在我已经为该类中的方法编写了一些测试..但是在运行我的测试之后我得到了像
--------error-------这样的错误------------
未捕获的异常：未初始化的常量“ModelName”

```
---------------test file -----------------

    require_relative "../../db/seeds"
    require "minitest_helper"
    it "should  create a object" do
        object = class_name.new('file_name.csv')
        object1 = object.find_and_create_object('Region', :name => 'region_name')
        object1.id.wont_be_nil
    end
--------------------seeds.rb file ---------------
  module Gen
    def find_or_create_object(model_name, attributes)
     target_model = model_name.classify.constantize
     target_model.where(attributes).first_or_create
    end
  end
  class class_name
    include Gen 
    def create_object
         find_or_create_object('modelname',{value_hash})
    end
  end
but if i am running db:seed then everything is working ...(no error) --- 
```

# algorithm - 是否有一种特定的算法来生成 n 个元素的所有组合，一次取 n-1

> ID：15431564
> 
> 赞同：0
> 
> 时间：2013-03-15T11:43:26.177
> 
> 标签：algorithm, language-agnostic

我知道一般情况下的算法（例如，一次生成所有 n 个元素的组合），但我想知道是否有专门为 m=n-1 的情况设计的更快的算法。另外，如果存在这样的算法，任何人都可以指出 C/C++ 实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T11:44:47.733

这很容易——使用一个简单的循环遍历所有元素。在这个循环中构造一个新集合，该集合由除一个（循环中的索引指向的那个）之外的所有元素组成。

注意：一些注释，以便您可以实现`O(N)`复杂性（`C++`例如，我将使用，但您可以使用任何其他具有类似矢量容器的语言）。

在`C++`：假设你有一个`vector<int> a`包含所有数字的：

```
vector<int> a;
... initialize a ....
vector<int> b(a.begin()+1, a.size()); // Now b will have all elements of a but the first one.

for (int i=0;i<a.size() - 1;++i) {
  b.push_back(a[i]);
  swap(b[i], b[b.size()-1]);
  b.pop_back();
} 
```

使用上面的代码 b 将依次迭代所有组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:46:35.160

如果一个集合有

*   2 个元素 {1,2} 子集将有 2^2 个元素 {},{1},{2},{1,2}
*   3 个元素 {1,2,3} 子集将有 2^3 个元素 {}、{1}、{2}、{3}、{1,2}、{1,3}、{2,3}、{ 1,2,3}
*   4 个元素 {1,2,3,4} 子集将有 2^4 个元素 {}, {1},{2},{3},{4},{1,2},{1,3}, { 1,4}{2,3},{2,4},{3,4},{1,2,3},{1,2,4},{1,3,4},{2,3 ,4},{1,2,3,4}

所以我认为上面的设置可以使用 2 个循环来实现

也在**组合中**

令 U 为具有 n 个元素的集合；我们想计算集合 U 中恰好有 j 个元素的不同子集的数量。这可以写成 N!/J! *（新泽西州）！

注意：可以删除空元素子集，公式变为 2^n-1

这是我的回答，如果这有帮助的话

*   如果 N=2 {1},{2}
*   对于 N=3 在 N=2 个元素 {1,3}{2,3} 的末尾添加 3 并混合 N=2 个元素 {1,2}
*   对于 N=4 在 N=3 个元素 {1,3,4}{2,3,4} {1,2,4} 的末尾添加 4 并混合 N=3 个元素 {1,2,3}

希望这可以帮助！！！

# bash - 已安装 Gem，但 Ruby 找不到？

> ID：15431575
> 
> 赞同：0
> 
> 时间：2013-03-15T11:43:59.473
> 
> 标签：bash, ssh, capistrano

我有以下 Capistrano 片段：

```
namespace :bundle do
    task :install do
        run "gem list && bundle -v"
    end
end 
```

当我跑

```
cap bundle:install 
```

我得到以下输出：

```
 ** [out :: ....compute-1.amazonaws.com]
 ** [out :: ....compute-1.amazonaws.com] *** LOCAL GEMS ***
 ** [out :: ....compute-1.amazonaws.com]
 ** [out :: ....compute-1.amazonaws.com]
 ** [out :: ....compute-1.amazonaws.com] bundler (1.3.4)
 ** [out :: ....compute-1.amazonaws.com] rake (10.0.3)
 ** [out :: ....compute-1.amazonaws.com] rubygems-bundler (1.1.1)
 ** [out :: ....compute-1.amazonaws.com] rvm (1.11.3.6)
 ** [out :: ....compute-1.amazonaws.com]
 ** [out :: ....compute-1.amazonaws.com] ERROR: Gem bundler is not installed, run `gem install bundler` first. 
```

gem 显示 bundler 已安装，但是当我尝试运行 bundle -v 时，我得到一个矛盾的错误，说它不是？我不明白为什么？

我尝试的另一件事是通过终端登录到服务器，当我在那里运行 bundle -v 时，它工作正常吗？

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T02:54:17.380

你使用[rvm-capistrano gem](https://github.com/wayneeseguin/rvm-capistrano)吗？它将为您加载 RVM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:53:17.033

我设法通过添加一些环境变量来使我的脚本工作：

```
set :default_environment, {
    :PATH => "/home/ubuntu/.rvm/gems/ruby-1.9.2-p320@my_gemset/bin:" +
        "/home/ubuntu/.rvm/gems/ruby-1.9.2-p320@global/bin:" +
        "/home/ubuntu/.rvm/rubies/ruby-1.9.2-p320/bin:" +
        "/home/ubuntu/.rvm/bin:" +
        "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
    :RUBY_VERSION => 'ruby-1.9.2-p320',
    :GEM_HOME => '/home/ubuntu/.rvm/gems/ruby-1.9.2-p320@my_gemset',
    :GEM_PATH => '/home/ubuntu/.rvm/gems/ruby-1.9.2-p320@my_gemset:/home/ubuntu/.rvm/gems/ruby-1.9.2-p320@global'
} 
```

# r - 在数字 <= 9 前面放一个 0（for 循环在 r 中仅适用于最后一个实例）

> ID：15431581
> 
> 赞同：2
> 
> 时间：2013-03-15T11:44:13.273
> 
> 标签：r, for-loop, gsub

我写这个是为了找到“1：”到“9：”的任何实例，并将其替换为“01：”到“09：”，同时保持“10：”或更大的完整。这是一个示例脚本：

```
region = c("18:1-100","16:1-100","X:1-100","2:1-100","4:1-100")

to.replace=grep("^[[:digit:]]:", region)
replacement=grep("^[[:digit:]]:", region, value=T)
replacement=paste(0,replacement,sep="")

for (i in length(to.replace)){
  region[to.replace[i]]=replacement[i]
} 
```

它仅适用于“区域”中的最后一次出现，因此我认为我的 for 循环有问题，我只是不知道是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T11:52:12.133

只需将您的 for 循环替换为：

```
region[to.replace] <- replacement 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:56:46.967

你可以通过它运行`lapply`...

```
region = c("18:1-100","16:1-100","X:1-100","2:1-100","4:1-100")
lapply( region , function(x){ r <- grepl("^[[:digit:]]:", x) ; ifelse( r , paste0( 0 , grep("^[[:digit:]]:", x , value=T) ) , x ) } ) 
```

# linux - 如何使用 shell 在 Linux 中删除超过 7 天的文件

> ID：15431587
> 
> 赞同：0
> 
> 时间：2013-03-15T11:44:36.830
> 
> 标签：linux, bash, shell

我想使用 shell 删除 Linux 中超过 7 天的文件。我正在使用此代码来做到这一点，对吗？

```
find $OUTPUTDIR -type f -mtime +7 -delete 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:49:33.537

这是正确的。但是，我刚刚对此进行了测试，看起来它不仅依赖于日期信息，还依赖于小时和分钟。**然后+7**将删除超过**168**小时的文件。我有一些类似的设置，请看一下：

```
root@it-pbx01:/var/lib/asterisk/backups/BACKUP# date
Fri Mar 15 12:51:03 CET 2013
root@it-pbx01:/var/lib/asterisk/backups/BACKUP# ls -l
total 872780
-rw-rw-r-- 1 asterisk asterisk 128513903 Mar  8 18:01 20130308.18.00.02.tar.gz
-rw-rw-r-- 1 asterisk asterisk 128517514 Mar  9 18:01 20130309.18.00.01.tar.gz
-rw-rw-r-- 1 asterisk asterisk 128517659 Mar 10 18:01 20130310.18.00.01.tar.gz
-rw-rw-r-- 1 asterisk asterisk 126791825 Mar 11 18:01 20130311.18.00.01.tar.gz
-rw-rw-r-- 1 asterisk asterisk 126791573 Mar 12 18:01 20130312.18.00.01.tar.gz
-rw-r--r-- 1 asterisk asterisk 126791404 Mar 13 18:01 20130313.18.00.02.tar.gz
-rw-r--r-- 1 asterisk asterisk 126871966 Mar 14 18:01 20130314.18.00.01.tar.gz
root@it-pbx01:/var/lib/asterisk/backups/BACKUP# find . -type f -mtime +7
root@it-pbx01:/var/lib/asterisk/backups/BACKUP# find . -type f -mtime +6
root@it-pbx01:/var/lib/asterisk/backups/BACKUP# find . -type f -mtime +5
./20130308.18.00.02.tar.gz
root@it-pbx01:/var/lib/asterisk/backups/BACKUP# find . -type f -mtime +4
./20130309.18.00.01.tar.gz
./20130308.18.00.02.tar.gz
root@it-pbx01:/var/lib/asterisk/backups/BACKUP# find . -type f -mtime +3
./20130309.18.00.01.tar.gz
./20130310.18.00.01.tar.gz
./20130308.18.00.02.tar.gz
root@it-pbx01:/var/lib/asterisk/backups/BACKUP# find . -type f -mtime +2
./20130309.18.00.01.tar.gz
./20130311.18.00.01.tar.gz
./20130310.18.00.01.tar.gz
./20130308.18.00.02.tar.gz
root@it-pbx01:/var/lib/asterisk/backups/BACKUP# find . -type f -mtime +1
./20130309.18.00.01.tar.gz
./20130311.18.00.01.tar.gz
./20130312.18.00.01.tar.gz
./20130310.18.00.01.tar.gz
./20130308.18.00.02.tar.gz
root@it-pbx01:/var/lib/asterisk/backups/BACKUP# find . -type f -mtime +0
./20130309.18.00.01.tar.gz
./20130311.18.00.01.tar.gz
./20130312.18.00.01.tar.gz
./20130313.18.00.02.tar.gz
./20130310.18.00.01.tar.gz
./20130308.18.00.02.tar.gz
root@it-pbx01:/var/lib/asterisk/backups/BACKUP# find . -type f -mtime 0
./20130314.18.00.01.tar.gz 
```

# php - setcookie ajax php问题

> ID：15431588
> 
> 赞同：0
> 
> 时间：2013-03-15T11:44:39.310
> 
> 标签：php, jquery

我想通过 AJAX 设置 cookie。但我收到警告“无法修改标题”有什么想法吗？

```
<?php 

if($_POST['name']){
   setcookie("autosave_blogo_id", "value", time()+10800, '/');
}

?>
$("#button").click(function(){
                    $.ajax({
                    var indata = $('#b_pav').val();
                        type: "POST",
                        url:  "<?php echo "http://" . $_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']; ?>",
                        data: indata,
                        success: function(msg){
            alert(msg);
                        }
                    });
                    return false;
                }); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T11:45:47.033

您需要在脚本输出任何其他内容之前设置 cookie。

# jquery - jquery移动对话框中的Mobiscroll插件

> ID：15431600
> 
> 赞同：1
> 
> 时间：2013-03-15T11:45:12.047
> 
> 标签：jquery, jquery-mobile, mobiscroll

是否可以将[日期和时间滚动](http://mobiscroll.com/component/datetime)插件与[jQuery Mobile Dialog](http://view.jquerymobile.com/1.3.0/docs/widgets/dialog/)小部件一起使用？问题是对话框小部件解析来自其他页面的数据`<div data-role="page" id="page">`，并且包含在标题中的 js 文件不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:50:32.243

看看我几分钟前给出的答案：[https ://stackoverflow.com/a/15431229/1848600](https://stackoverflow.com/a/15431229/1848600)

您的问题不在于 Mobiscroll 实现或 jQuery Mobile Dialog 小部件。如果您从另一个文件加载对话框小部件，它将像普通页面一样工作。jQuery Mobile 将只加载它的 BODY 内容，其余的将被丢弃。为了解决这个问题，所有用于对话框的 js 代码都应该加载到第一个 HTML 文件中。

# optimization - 是否可以将针对大小优化的模块与针对 GCC 的速度优化的模块链接起来？

> ID：15431601
> 
> 赞同：0
> 
> 时间：2013-03-15T11:45:18.970
> 
> 标签：optimization, gcc, linker

在 GCC 中是否可以使用 -Os 编译一些模块，而使用 -Ofast 编译一些模块？

这些是嵌入式 ARM cortex-M3 系统中的 C 模块

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:56:13.543

一般来说，没有。在实践中，大多数时候它会工作得很好。请记住，`-Os`定义`__OPTIMIZE_SIZE__`和`-Ofast`（特别是`-ffast-math`）定义`__FAST_MATH__`，因此您可能会意外地违反单一定义规则。

# sharepoint-2010 - 使用 SharePoint 客户端对象模型重命名文件？

> ID：15431602
> 
> 赞同：2
> 
> 时间：2013-03-15T11:45:22.447
> 
> 标签：sharepoint-2010, sharepointdocumentlibrary, sharepoint-clientobject

这似乎是一个愚蠢的问题，但我似乎无法在谷歌上找到任何答案。

我编写了一个方法来查询 SharePoint 并根据我指定的文档名称参数重命名文档。我使用了类似的方法来重命名文件夹，并且效果很好，但是当我尝试重命名文件时，我得到了 ArgumentOutOfRangeException

这是我的代码：

```
public bool RenameFileInDocumentLibrary(string documentName, string newDocumentName, ClientContext clientContext)
        {
            {
                bool isDocumentRenamed = false;

                string url = "MySharePointSite";

                List list = clientContext.Web.Lists.GetByTitle("MyDocLib");

                CamlQuery query = new CamlQuery();
                query.ViewXml = "<View Scope=\"RecursiveAll\"> " +
                            "<Query>" +
                                "<Where>" +
                                    "<And>" +
                                        "<Eq>" +
                                            "<FieldRef Name=\"FSObjType\" />" +
                                            "<Value Type=\"Integer\">2</Value>" +
                                         "</Eq>" +
                                          "<Eq>" +
                                            "<FieldRef Name=\"Title\"/>" +
                                            "<Value Type=\"Text\">" + documentName + "</Value>" +
                                          "</Eq>" +
                                    "</And>" +
                                 "</Where>" +
                            "</Query>" +
                            "</View>";

                var files = list.GetItems(query);

                clientContext.Load(list);
                clientContext.Load(list.Fields);
                clientContext.Load(files, fs => fs.Include(fi => fi["Title"],
                    fi => fi["DisplayName"],
                    fi => fi["FileLeafRef"]));
                clientContext.ExecuteQuery();

                if (files.Count == 0)
                {
                    files[0]["Title"] = newDocumentName;
                    files[0]["FileLeafRef"] = newDocumentName;
                    files[0].Update();
                    clientContext.ExecuteQuery();
                    isDocumentRenamed = true;
                }

                return isDocumentRenamed;
            }
        }
    } 
```

对此的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T15:17:56.833

您需要使用 ListItems File 成员：

```
string newPath = files[0]["FileDirRef"] + "/" + "MyNewFileName" + ".extension";
files[0].File.MoveTo(newPath, MoveOperations.Overwrite);
files[0].Update();
clientContext.ExecuteQuery(); 
```

# ruby-on-rails-3 - Rails 回形针内容类型验证与 client_side_validations

> ID：15431605
> 
> 赞同：1
> 
> 时间：2013-03-15T11:45:31.510
> 
> 标签：ruby-on-rails-3, paperclip

我正在使用回形针来拍摄图像。我想确保只上传图像文件（jpeg/png）。这是我的回形针验证规则。

```
validates_attachment :photo, :presence => { :message => "is required" }, :content_type => { :content_type => ['image/jpeg', 'image/jpg', 'image/png'], :message => "Invalid content type" } 
```

如果用户上传非图像文件，则验证有效并且不会保存记录。但是错误消息存储在 @news.errors.messages[: **photo_content_type** ] 而不是 @news.errors.messages[: **photo** ]

我正在使用客户端验证 gem 来显示错误消息。由于无效的内容类型消息附加到 : **photo_content_type**，它不会内联显示。

现在我显示的消息如下：

```
<% if @news.errors.messages[:photo_content_type] %>
    <div class="field_with_errors">
        <%= f.file_field :photo %>
        <label for="" class="validation-error-message">
            <%= @news.errors.messages[:photo_content_type][0] %>
        </label>
    </div>
<% else %>
    <%= f.file_field :photo %>
<% end %> 
```

有没有更好的方法，如果用户上传非图像文件，消息会被添加到 @news.errors.messages[:photo]

 **我在验证回调后添加的**更新：****

 **```
after_validation :join_img_errors

def join_img_errors
  if errors.messages.has_key?(:photo_content_type)
    errors.messages[:photo] = errors.messages[:photo_content_type]
  end
end 
```

这样，我不必修改视图代码。但是我仍然需要为所有使用回形针的模型添加回调。**

# java - VisualVM 内存泄漏？

> ID：15431615
> 
> 赞同：1
> 
> 时间：2013-03-15T11:46:13.490
> 
> 标签：java, memory-leaks, profiling, visualvm, jvisualvm

我正在尝试使用`VisualVM`. 我正在使用`VisualVM 1.3.5`.

我按照本教程中应该说的步骤[http://rejeev.blogspot.in/2009/04/analyzing-memory-leak-in-java.html](http://rejeev.blogspot.in/2009/04/analyzing-memory-leak-in-java.html)

完成这些步骤后，我不知道我必须从哪里开始编辑我的代码。有没有办法找到java类和内存泄漏的行号来纠正代码。

或者任何人建议我使用`VisualVM`.

好的答案绝对值得赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T11:49:31.927

任何分析工具都不会为您提供发生潜在内存泄漏的行。

分析应用程序需要更多的努力。例如，通常，像 VisualVM 这样的工具会向您显示最常实例化的对象类型，这可以指出问题出在哪里。

例如，如果正在创建大量 byte[] 对象，也许您没有关闭正在创建的输入/输出流？

找到内存泄漏没有灵丹妙药，它需要努力和一些练习，并且完全依赖于应用程序。

话虽如此，此链接也可能有所帮助：

[http://www.kdgregory.com/index.php?page=java.outOfMemory](http://www.kdgregory.com/index.php?page=java.outOfMemory)

# iphone - 强制 iOS 用户输入自己的 ID 以使用设备

> ID：15431617
> 
> 赞同：-2
> 
> 时间：2013-03-15T11:46:33.763
> 
> 标签：iphone, ios, objective-c, xcode, ios6

我正在尝试一种方法（如果存在），使用该设备的每个用户都将输入他的 ID，这样只有经过身份验证的用户才能使用该设备。为什么？
我的部门有一些 iOS 设备，我希望能够监控最后使用该设备的人，因此如果它在我部门的人员中丢失，则更容易跟踪它。
有任何想法吗？
有没有办法编写一个合适的应用程序来做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:51:41.217

如果没有越狱和做一些真正定制的应用程序开发，就没有办法做到这一点。操作系统没有为您提供拦截用户凭据的选项。

您可以编写一个应用程序来简单地根据 Web 服务对一个人进行身份验证并将身份验证信息存储在那里。然后，只需将始终启动该应用程序并在将设备用于其他任何事情之前登录成为一项政策。

我有几个做类似事情的企业应用程序。每个用户在轮班开始时登录，然后在结束时注销。

# css - jQuery mobile，带有复选框的 Listview

> ID：15431621
> 
> 赞同：1
> 
> 时间：2013-03-15T11:46:38.540
> 
> 标签：css, jquery-mobile

有一个看起来像这样的列表视图：http: [//jquerymobile.com/demos/1.3.0/docs/examples/swipe/swipe-list.html#demo-page](http://jquerymobile.com/demos/1.3.0/docs/examples/swipe/swipe-list.html#demo-page)

它包含两个可点击区域。

我搜索了一个在列表视图中有复选框的示例，一个很好的例子是：[jsfiddle.net/yakirmanor/d8KNF/](http://jsfiddle.net/yakirmanor/d8KNF/)

但我不希望有一个占据所有区域的大“标签”。我希望我的文字成为一个链接。但这似乎很难，我一直在寻找解决方案，但最终导致复选框占据了自己的位置。我试着做一个`<div>`并拥有`float="left"`，但它看起来并不像我想要的那样。

在我的第一个示例链接中，我有 2 个区域，右侧的一个可能是一个复选框。但似乎需要一个链接才能获得该区域。

有什么好的解决办法吗？还是我需要自己做一条线？

所有这些都将用于收件箱视图。我在左侧或右侧的复选框将选择要删除的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:00:06.093

抱歉迟到了！

我现在在另一行有复选框。但实际上我希望它在我的信息旁边。当您选择要删除的项目时，它们通常位于设备的收件箱中。

```
 <div data-role="content">
        <ul data-role="listview" data-inset="false" data-icon="false" data-split-icon="delete" data-filter="true">
            <li data-role="list-divider">Details</li>
            @foreach (var message in Model.MessageList)
            {
                <li data-role="fieldcontain"><a href="/Message/Detail?messageRef=@message.MessageRef">
                    <h3>@message.FromPersonName</h3>
                    <h2>@message.MessageHeader</h2>
                    <p>
                        My information about</p>
                </a>
                    <label style="border-top-width: 0px; margin-top: 0px; border-bottom-width: 0px; margin-bottom: 0px;
                        border-left-width: 0px; border-right-width: 0px;" data-corners="false">
                        <fieldset data-role="controlgroup">
                            <input id="@("cbx" + message.MessageRef)" class="markedForDelete" name="CheckboxToDelete" type="checkbox"
                               value=@message.MessageRef />
                        </fieldset>
                    </label>
                </li>
            }
        </ul>
    </div> 
```

正如我在第一条消息中的第二个示例链接中所示。有一个解决方案。但是他们将所有消息文本作为“标签”。我想将它分开，该消息将是一个链接，就像在我的示例中一样。

# cordova - Hello World 应用程序 Blackberry10 原生 sdk with Phonegap

> ID：15431623
> 
> 赞同：0
> 
> 时间：2013-03-15T11:46:51.370
> 
> 标签：cordova, blackberry-10

我刚刚开始Blackberry10的开发。所以我想知道是否有任何方法可以从一种“Hello World”应用程序开始使用Phonegap（比如2.5）开始使用Blackberry10原生SDK。

我已阅读 Phonegap 文档，但必要的步骤尚不清楚。

配置如下：

*   Blackberry10 dev alpha 模拟器
*   适用于 BlackBerry 10 Native SDK 的 QNX Momentics IDE（版本 - 10.0.9）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:37:48.683

我可能是错的，我也刚刚开始，但根据这个页面（[http://docs.phonegap.com/en/2.3.0/guide_getting-started_blackberry_index.md.html](http://docs.phonegap.com/en/2.3.0/guide_getting-started_blackberry_index.md.html)）我的理解是你不不需要使用 phonegap 开发 HTML5 应用程序的 momentics IDE。

您可以复制 cordova/phonegap 示例项目，并通过执行以下命令进行编译：

`ant qnx build`

（当然在调整`qnx.bbwp.dir`后`project.properties`）

您还需要调整 project.properties 文件来设置模拟器 ip 地址和密码。然后你可以执行：

`ant qnx load-simulator`

在模拟器中安装应用程序。

# xml - 如何构建分层部分/子部分/段落“路径”

> ID：15431627
> 
> 赞同：2
> 
> 时间：2013-03-15T11:47:00.460
> 
> 标签：xml, xslt

我知道这与原始问题不同，但这是我为达到以下预期结果而考虑的一个思考过程：

XML 输入：

```
<section hangIndent="no" indent="arabic 1 digit"
isProposedAmendment="no" label="2A">
<title>AAA</title>
<body>
 BBB<subSection label="1">
  <body>
    <para hangIndent="yes" indent="loweralpha 1 character"
     isProposedAmendment="no" label="a">
      <body>
        CCC
      </body>
    </para>
    <para hangIndent="yes" indent="loweralpha 1 character"
      isProposedAmendment="no" label="b">
      <body>
        DDD
      </body>
    </para>
    <para hangIndent="yes" indent="loweralpha 1 character"
     isProposedAmendment="no" label="c">
      <body>
        EEE
      </body>
    </para>
  </body>
</subSection>
</body>
<annotation isProposedAmendment="no">
FFFFF
</annotation>
</section> 
```

所需的输出：我根据每个节点的标签构建一个 xmlpath 名称，并将其插入每个端点。

```
<nm:xmlpath name ="2A" />
<section hangIndent="no" indent="arabic 1 digit"
isProposedAmendment="no" label="2A">
<title>AAA</title>
<body>
 BBB
<nm:xmlpath name ="2A 1" /> 
<subSection label="1">
  <body>
    <nm:xmlpath name ="2A 1(a)" />
    <para hangIndent="yes" indent="loweralpha 1 character"
isProposedAmendment="no" label="a">
      <body>
        CCC
      </body>
    </para>
    <nm:xmlpath name ="2A 1(b)" />
    <para hangIndent="yes" indent="loweralpha 1 character"
  isProposedAmendment="no" label="b">
      <body>
        DDD
      </body>
    </para>
    <nm:xmlpath name ="2A 1(c)" />
    <para hangIndent="yes" indent="loweralpha 1 character"
  isProposedAmendment="no" label="c">
      <body>
        EEE
      </body>
    </para>
  </body>
</subSection>
</body>
<annotation isProposedAmendment="no">
FFFFF
</annotation>
</section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:49:06.170

基本方法是使用一个模板来匹配具有`label`属性的任何元素，并在该元素之前插入一个由您在父母、祖父母等身上找到`nm:xmlpath`的所有属性构成的模板。`label`

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0"
                xmlns:nm="urn:nm-namespace">

  <xsl:template match="@*|node()" name="identity">
    <xsl:copy><xsl:apply-templates select="@*|node()" /></xsl:copy>
  </xsl:template>

  <xsl:template match="*[@label]">
    <nm:xmlpath>
      <xsl:attribute name="name">
        <xsl:apply-templates select="." mode="xmlpath" />
      </xsl:attribute>
    </nm:xmlpath>
    <xsl:call-template name="identity" />
  </xsl:template>

  <!-- templates to construct the xmlpath, these should produce text nodes -->

  <!-- general case - path is the enclosing path (if any), followed by space,
       followed by our own @label -->
  <xsl:template match="*" mode="xmlpath">
    <xsl:if test="ancestor::*[@label]">
      <xsl:apply-templates select="ancestor::*[@label][1]" mode="xmlpath" />
      <xsl:text> </xsl:text>
    </xsl:if>
    <xsl:value-of select="@label" />
  </xsl:template>

  <!-- special case for para - no space after enclosing path, and surround
       our label with () -->
  <xsl:template match="para" mode="xmlpath">
    <xsl:apply-templates select="ancestor::*[@label][1]" mode="xmlpath" />
    <xsl:value-of select="concat('(', @label, ')')" />
  </xsl:template>

</xsl:stylesheet> 
```

为了生成格式良好的 XML，输入文档的根元素*不能*有`label`属性——如果有，我们会尝试`nm:xmlpath`在它之前插入一个属性，为输出文档提供两个根级元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:03:28.163

```
<xsl:template match="/">
  <xsl:apply-templates select="//*"/>
</xsl:template>

<xsl:template match="*">
  <xsl:copy>
    <xsl:value-of select="text()[1]"/>
  </xsl:copy>
</xsl:template> 
```

应该足够了。

# java - 如何停止 JComboBox 禁用自身

> ID：15431628
> 
> 赞同：-2
> 
> 时间：2013-03-15T11:47:02.490
> 
> 标签：java

我的程序中有问题`JComboBox`。没有附加到`ComboBox`. 我使用 a`DefaultComboBoxModel`来设置值。

当我最初将东西添加到列表/模型中时，该框填充得很好，我可以将它放下没有问题。只有我在一开始就这样做。

一旦我在我的程序中单击任何其他可用的项目（文本字段、按钮、JLists），它们就不会再下拉。但是如果你点击它，你可以使用箭头来改变里面的值。以前有人遇到过这个问题吗？我检查了我所有的侦听器方法，没有启用或禁用这些框。

JDateChooser 也有类似的问题。我可以选择一次日期，但它也不再下拉。

我正在使用 net beans 作为我的 IDE。

对此的任何帮助将不胜感激

/* 向条件数组列表和组合框模型添加条件的方法 */ private void addConActionPerformed(java.awt.event.ActionEvent evt) {

```
 //ensures if nothing was entered to print errors
    if(entConName.getText().equals("")) 
    {
        addConError.setEnabled(true);
        addConError.setText("Enter Condition Name");
    }

    else
    {
        String n = entConName.getText(); //Takes user input
        conditionList.add(n);            //adds to condition array list
        addConError.setEnabled(false);
        addConError.setText("");
        conditionModel = new DefaultComboBoxModel(conditionList.toArray()); //sets up the combobox model
        entCondition.setModel(conditionModel);
        entConName.setText("");
    }
} 
```

这很好用，并且在我的任何代码中都没有 entCondition ComboBox 被禁用

以为这可能是一个已知问题...猜不

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:54:51.840

我不完全确定，但问题可能是因为您将它添加到`RootPane`而不是 contentPane。

> 不要尝试添加到 JFrame 的 RootPane。添加到内容窗格。

# ios - 如何允许图像调整 4 英寸 iphone 5 的大小

> ID：15431631
> 
> 赞同：1
> 
> 时间：2013-03-15T11:47:10.963
> 
> 标签：ios, resize, retina-display, autoresizingmask

我有一个图像视图，在它下面有一个 webview。在 3.5 英寸屏幕上查看时，它们之间的垂直距离很小，但是当我应用retina 4 Form Factor 时，图像视图会扩展（实际图像大小是固定的），因此它与下面的 webview 之间似乎有很大的差距. 图像视图和屏幕顶部之间也存在间隙。我已经尝试了约束，但似乎无法改变事物，以便它是垂直扩展的 webview，在它和 imageview 之间留下一个小间隙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T11:53:08.930

您需要设置`UIImageView` `autosizing`属性：

![在此处输入图像描述](../Images/80bfb566b3dad83e048cf17799b8861a.png)

**或者**您可以使用以编程方式设置它

```
imageView.autoresizingMask = UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

如果这不能解决您的问题，您有两种可能的解决方案。下面列出：

1.在 UIVIew 属性检查器的“模拟指标”部分，您可以选择 3,5" 或 4" 尺寸。选择 3,5"，并使您的视图和子视图可调整大小。这将使其自动缩放您的视图以适应 iPhone 5 的屏幕。

2.或者您可以使用自动布局（约束）和iOS 6+的部署目标。

希望这能解决问题。

# java - 在 Java 中使用 CTRL + A 选择更多文本字段

> ID：15431633
> 
> 赞同：1
> 
> 时间：2013-03-15T11:47:13.630
> 
> 标签：java, selection, textfield

我在 Java 中有更多的文本字段。当我按`CTRL`+时`A`，我希望所有的文本字段都被选中。我尝试过这种方式，但只有具有焦点的文本字段被选中。

你能帮我吗？

```
class Main{

public JTextField[] textFields;

private TextFieldSelected(int byteCount) {

    textFields = new JTextField[byteCount];
    for (int i = 0; i < textFields.length; i++) {
        textFields[i] = new JTextField(3);

    }

private class CtrlAAdapter extends KeyAdapter {

    public void keyPressed(KeyEvent e) {
        //JTextField textField = (JTextField) e.getComponent();

        if(KeyEvent.VK_CONTROL == e.getKeyCode() && e.getModifiers() == 0)
            if(KeyEvent.VK_A == e.getKeyCode() && e.getModifiers() ==0)

                new SelectAllListener();}}

            //  for(int i=0; i < textFields.length; i++) textFields[i].selectAll();

         class SelectAllListener implements ActionListener {  

             public void actionPerformed(ActionEvent ev) {  
                 for(int i=0; i < textFields.length; i++){
                     //JTextField field = textFields[i];
                    // String text=textFields[i].getText();
                    // textArea.append(text);
                     textFields[i].selectAll();  
                 }

         }
//      reset();
        //  e.consume();
         } 
```

}

我改了，还是不行：

```
for (int i = 0; i < textFields.length; i++) {
         JTextField textField = textFields[i];
        textField.getDocument().addDocumentListener(documentListener);
        KeyBindings keybindings = new KeyBindings(textField);

    } 
```

类键绑定{

```
 public KeyBindings(JTextField textField){
        Action action = new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent e) {

                for(int i=0;i < textFields.length; i++){
                    JTextField textField = textFields[i];

                    for(int j=0;j < textFields.length; j++){

                            textFields[j].selectAll();
                            textFields[j].transferFocus();
                            }
                }
            }
        };

        String keyStrokeAndKey = "control A";
        KeyStroke keyStroke = KeyStroke.getKeyStroke(keyStrokeAndKey);
        textField.getInputMap().put(keyStroke, keyStrokeAndKey);
        textField.getActionMap().put(keyStrokeAndKey, action);

    }
} 
```

**以及如何使未聚焦的字段也显示选择？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:37:13.357

`KeyListener`有一个奇妙的限制。它注册的组件在接收关键事件之前必须具有焦点并且是可聚焦的

为了接收这个，你应该使用[key bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html) API

基本上，`KeyStroke`在包含文本字段的容器中注册 a，一定要使用`WHEN_IN_FOCUSED_WINDOW`. 遍历组件列表，查找`JTextField`并调用`selectAll`字段

您可能遇到的另一个问题是未聚焦的字段可能不会显示选择

# javascript - 日期考虑每月 31 天

> ID：15431634
> 
> 赞同：0
> 
> 时间：2013-03-15T11:47:13.847
> 
> 标签：javascript, datetime

在处理日期差异时，当我以某种方式使用下面的代码时，函数假设所有月份都有 31 天。例如。如果我用 2 月 28 日减去 3 月 1 日，则差值为 4 天。有什么简单的方法可以解决这个问题。任何帮助将不胜感激。

```
function myFunction()
{

var sysdt = "02/28/2013";
var year = sysdt.substring(6,10);
var mon = sysdt.substring(0,2);
var date = sysdt.substring(3,5);
var n = Date.UTC(year,mon,date);

var userdt = "03/01/2013"
var yr = userdt.substring(6,10);
var mn = userdt.substring(0,2);
var dd = userdt.substring(3,5);
var n1 = Date.UTC(yr,mn,dd);

var x = document.getElementById("demo");
x.innerHTML=(n1-n)/(1000*24*60*60);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:53:16.603

这将为您提供两个日期之间的差异，以毫秒为单位

```
var diff = Math.abs(date1 - date2); 
```

例如，它会是

```
var diff = Math.abs(new Date() - compareDate); 
```

您需要确保 compareDate 是有效的 Date 对象。

像这样的东西可能对你有用

```
var diff = Math.abs(new Date() - new Date(dateStr.replace(/-/g,'/'))); 
```

即将“2011-02-07 15:13:06”转换为新日期（'2011/02/07 15:13:06'），这是日期构造函数可以理解的格式。

你可以像这样减去——

```
var d1 = new Date(); //"now"
var d2 = new Date("2011/02/01")  // some date
var diff = Math.abs(d1-d2);  // difference in milliseconds
var days = diff*24*60*60*1000; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:56:08.657

您的代码实际上是从 4 月 1 日减去 3 月 1 日，因为 JavaScript 日期中的月份是从 0 开始的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:11:10.707

```
var sysdt = "02/28/2013";
var date1 = new Date(sysdt);

var userdt = "03/01/2013"
var date2 = new Date(userdt);

var days = (date2-date1)/(1000*24*60*60); 
```

或从代码中的月份减去 1

```
var sysdt = "02/28/2013";
var year = sysdt.substring(6,10);
var mon = sysdt.substring(0,2)-1; // months are from 0 to 11
var date = sysdt.substring(3,5);
var n = Date.UTC(year,mon,date);

var userdt = "03/01/2013"
var yr = userdt.substring(6,10);
var mn = userdt.substring(0,2)-1; // months are from 0 to 11
var dd = userdt.substring(3,5);
var n1 = Date.UTC(yr,mn,dd);

var days = (n1-n)/(1000*24*60*60); 
```

# android - 更改或完全删除 Android 上 Google Maps v2 的 InfoWindow 的突出显示颜色

> ID：15431638
> 
> 赞同：8
> 
> 时间：2013-03-15T11:47:20.670
> 
> 标签：android, google-maps, highlight, google-maps-api-2, infowindow

是否有可能更改 Android 版 Google Maps v2 组件中 InfoWindow 的突出显示颜色？我已经接受了这样一个事实，即没有通用方法为驻留在通过自定义 InfoWindowAdapter 传递的自定义 InfoWindow 视图中的小部件应用自定义新闻亮点，因为视图被地图控件重新呈现为位图（[https://developers.google .com/maps/documentation/android/marker#info_windows](https://developers.google.com/maps/documentation/android/marker#info_windows)见注）。在同一个网站的最底部（[https://developers.google.com/maps/documentation/android/marker#info_window_click_events](https://developers.google.com/maps/documentation/android/marker#info_window_click_events)）有一个提示，上面写着

> 当用户单击信息窗口时，将调用 onInfoWindowClick(Marker) 并以默认突出显示颜色突出显示信息窗口（运行 Ice Cream Sandwich 和更新版本的设备为全蓝色，早期版本的 Android 为橙色）。

所以我尝试为我的应用程序覆盖以下主题值

```
<item name="android:colorForeground">@color/black</item>
<item name="android:colorForegroundInverse">@color/white</item>
<item name="android:colorBackground">@color/white</item>
<item name="android:cacheColorHint">@color/white</item>

<item name="android:colorPressedHighlight">@color/white</item>
<item name="android:colorLongPressedHighlight">@color/white</item>
<item name="android:colorFocusedHighlight">@color/white</item>
<item name="android:colorMultiSelectHighlight">@color/white</item>
<item name="android:colorActivatedHighlight">@color/white</item> 
```

那应该用白色覆盖所有默认的突出显示颜色。不幸的是，它根本没有效果：/

我现在的假设是默认的高亮颜色是由谷歌地图硬编码的，因此不会从应用程序主题的值中检索到。这意味着将无法更改突出显示的颜色。我希望我错了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T19:18:04.847

我认为这还不可能，gmaps-api-issues 中有一个公认的问题：

[https://code.google.com/p/gmaps-api-issues/issues/detail?id=4783](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4783)

# android - OpenCv C++ 到数据类型 OpenCv4Android 类比

> ID：15431641
> 
> 赞同：0
> 
> 时间：2013-03-15T11:47:23.993
> 
> 标签：android, opencv

我正在尝试使用最新的 OpenCv4Android-2.4.4 API 将 OpenCv C++ 代码转换为 OpenCv4Android。我对从 C++ 到 Java 的数据类型类比感到非常困惑。请帮助我消除我的困惑。

一些令人困惑的类比——

C++ - 爪哇

Point2f - 点 Point3f- 点

在java中是什么？

MatOfPoint2f、MatOfPoint3f、MatOfByte、MatOfFloat... 等？有什么 C++ 同义词。

这对我来说是一个很大的帮助，因为我正在尝试将我的 C++ 工作代码移植到 java。目前我无法弄清楚为少数 C++ 指令使用什么数据类型。

提前致谢

# ms-access - 如何在 Access 2010 中获取嵌套 for 循环和立即 for 循环的当前值

> ID：15431644
> 
> 赞同：0
> 
> 时间：2013-03-15T11:47:32.363
> 
> 标签：ms-access, vba

我有一个库存表，其中填充了我们库存中信息的 ID。还有其他表具有这些类别的名称和 ID。我希望使用 for 循环根据我们的库存使用 ID 填充当前库存数据。

我希望使用 for 循环将数据填充到 InventoryNow 表中。我正在考虑做这样的事情。

```
For location.location_ID <= EOF
{ 
   For years.years_ID <= EOF
   {
        insert into inventoryNow (wine_ID, years_ID, type_ID,language_ID, Amount)
        values (2,currentvalue(years.years_ID), 1,1,currentvalue(locatio.location_ID,2))
   }
} 
```

Access 2010 中是否有执行此操作的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:01:24.030

在没有看到您的数据的情况下，如果您计划对位置和年份表中的所有记录执行追加查询，我认为这可能更适合追加查询。但是，它可以通过循环使用 2 个记录集来完成，类似于您所描述的，使用类似于以下代码的内容：

```
Dim dbs As DAO.Database
Dim rstLoc as DAO.Recordset
Dim rstYears as DAO.Recordset

Set dbs = CurrentDb
Set rstLoc = dbs.OpenRecordset("SELECT location_ID FROM location")
Set rstYears = dbs.OpenRecordset("SELECT years_ID FROM years")

If rstLoc.RecordCount > 0 And rstYears.RecordCount > 0 Then
    rstLoc.MoveFirst
    Do Until rstLoc.EOF
        rstYears.MoveFirst
        Do Until rstYears.EOF
            DoCmd.RunSQL "INSERT INTO InventoryNow (wine_ID, years_ID, type_ID, language_ID, localtion_ID, Amount) VALUES (2, " & rstYears!years_ID & ", 1, 1, " & rstLoc.location_ID & ", 2)"
            rstYears.MoveNext
        Loop
        rstLoc.MoveNext
    Loop
End If
rstLoc.Close
Set rstLoc = Nothing

rstYears.Close
Set rstYears = Nothing

dbs.Close
Set dbs = Nothing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:06:38.050

您可以将 SQL 与 MS Access 结合使用，并利用[交叉](http://en.wikipedia.org/wiki/Join_%28SQL%29#Cross_join)联接为每年和位置创建条目：

```
SELECT wines.wine_ID, wines.type_ID, 
    wines.language_ID, wines.Amount, 
    years.years_ID, location.location_id 
INTO AllWines
FROM wines, years, location 
```

例如，有 2 种葡萄酒（和 2）、2 年（2010 年和 2011 年）和 2 个地点（1 和 2），您将得到

```
wine_ID type_ID language_ID Amount  years_ID    location_id
1       1       1           10      2010        1
2       2       2           20      2010        1
1       1       1           10      2011        1
2       2       2           20      2011        1
1       1       1           10      2010        2
2       2       2           20      2010        2
1       1       1           10      2011        2
2       2       2           20      2011        2 
```

# sql-server - 两个 SQLExceptions 之间的区别（“传输级错误..”和“网络相关或 ...”）

> ID：15431650
> 
> 赞同：2
> 
> 时间：2013-03-15T11:47:46.560
> 
> 标签：sql-server, sqlexception

我的 WPF/Linq2SQL 应用程序上有一群用户，我将他们的所有异常记录在一个单独的连接中的数据库中（我在抛出异常后创建）。

有时我会收到 SQLExceptions：

1.  与 SQL Server 建立连接时发生与网络相关或特定于实例的错误
2.  从服务器接收结果时发生传输级错误

对我来说，它们都意味着 Linq2SQL 无法连接到数据库或已断开连接。但我认为它们之间存在一些差异，因为微软不屑于同时拥有它们。

注意：问题不是服务器或数据库。一名用户可能会崩溃，而其他 10 名用户则继续愉快地工作。

我知道一个事实，即 2) 偶尔会发生并且我什么也没有记录（因为我在同一服务器/数据库上登录了一个表），从逻辑上讲，如果连接中断，我也无法保存到错误日志表。但是这两种类型的 SQLExceptions 都会偶尔记录，这意味着新连接能够连接。

用户的设置是具有有线和无线连接的膝上型计算机。他们运行窗户。当机器有电缆连接时，有时我会忘记禁用笔记本电脑上的无线网络。我被告知这可能会引起麻烦。偶尔记得禁用无线，但随后他们会完全断开笔记本电脑与网络的连接以参加会议（他们重新连接）。

我需要帮助来确定程序应该忽略哪些异常，哪些异常重要到足以让程序崩溃。如果我应该在让程序崩溃之前重试该操作。

所以..基本上我想知道这两个例外之间的区别。

# azure - 使用异地复制存储的 Azure 虚拟机的灾难恢复

> ID：15431652
> 
> 赞同：1
> 
> 时间：2013-03-15T11:47:54.287
> 
> 标签：azure, azure-sql-database, azure-storage

我们使用 Azure 虚拟机在云中托管我们的应用程序。几个虚拟机托管 Web 前端（无状态），一个虚拟机托管 SQL Server（数据存储在数据磁盘中）。

众所周知，这些虚拟机由 OS Disk 和 Data Disk（可选）组成，它们使用存储在 blob 存储中的 VHD 文件。我们正在使用存储这些 VHD 文件的异地冗余 blob 存储。

我们现在正计划为我们的云应用程序进行灾难恢复。因此，如果 Microsoft 数据中心出现故障，是否可以借助存储在异地复制存储中的 OS Disk 和 Data Disk 来启动另一个数据中心的虚拟机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-17T17:09:12.780

您不应该将异地复制存储与 SQL Server 数据磁盘一起使用。这记录在[https://msdn.microsoft.com/library/azure/dn133149.aspx](https://msdn.microsoft.com/library/azure/dn133149.aspx)中。具体来说，该文档指出“在创建存储帐户时，请禁用异地复制，因为不能保证跨多个磁盘的一致写入顺序。相反，请考虑在两个 Azure 数据中心之间配置 SQL Server 灾难恢复技术”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:40:10.680

目前，您无法控制 Microsoft 是否/何时故障转移到辅助（异地复制）存储帐户。微软控制着它。

据我了解，如果 Microsoft 确实宣布发生灾难并进行故障转移，那么您的虚拟机仍然可以工作。也许您必须从​​ VHD 再次创建 VM，但数据会在那里（减去自上次同步到存储以来丢失的任何内容）。

# actionscript-3 - 更改帧时调整影片剪辑的大小

> ID：15431659
> 
> 赞同：0
> 
> 时间：2013-03-15T11:48:20.037
> 
> 标签：actionscript-3, flash

请帮忙，我有以下代码（两帧，登录的帧转到第 2 帧并停止。）。

我所追求的是将整个影片剪辑的大小更改为它在 frame2 中的非常小的大小。非常感谢任何建议。

```
stop();

stage.addEventListener(MouseEvent.RIGHT_CLICK, function(e:Event){});

login_btn.buttonMode = true; // show hand cursor

//adding event listener
login_btn.addEventListener(MouseEvent.CLICK, loginUser);

function loginUser(e:MouseEvent):void{
    //if username & password are correct allow entry
    if(IDTxt.text == "wixlab"){
        gotoAndStop(2);
    }
    if(IDTxt.text == "hello"){
        gotoAndStop(2);
    }
    if(IDTxt.text == "hello"){
        gotoAndStop(2);

    }else {
        //otherwise show an error message
        var alert:TextFormat = new TextFormat();
        alert.color = 0xff0000; //red font
        messageTxt.text = "Incorrect ID, Please try again.";
        messageTxt.setTextFormat(alert);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T01:09:47.343

如果你想摆脱按钮，有很多方法可以做到：

永久摆脱按钮

```
removeChild(login_btn); 
```

如果您实际上只是想缩小按钮以使其看不到

```
login_btn.scaleX = 0; 
```

如果您希望按钮仍然存在但看不到它：

```
login_btn.x = -1000; 
```

# ios - 如何在 iOS 中复制图像？

> ID：15431660
> 
> 赞同：0
> 
> 时间：2013-03-15T11:48:20.777
> 
> 标签：ios, uiscrollview, uiimageview, uiimage

我有 UIImageVeiw。它的高度必须通过滚动视图内容大小高度动态变化。当我调整大小时，它正在改变图像质量。如何复制图像直到它与滚动视图高度匹配？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:08:45.110

为此，您必须使用图案图像：

```
UIColor *patternColor = [UIColor colorWithPatternImage:@"<your pattern image name>"];
<your view>.backgroundColor = patternColor; 
```

# iphone - 我的应用程序没有改变方向

> ID：15431668
> 
> 赞同：0
> 
> 时间：2013-03-15T11:48:42.447
> 
> 标签：iphone, ios, orientation

我正在使用 XCode 4.6 和 iOS 6.1。但我的应用程序不会改变方向。我已将我的应用程序设置为支持 pList 中的方向并添加了方向更改方法。但该应用程序仍然没有改变方向。

![在此处输入图像描述](../Images/eb93713feadd14fe48a19ffcf4aaf134.png)

![在此处输入图像描述](../Images/74b7ac6549db7549c9cb1ed2ca30cc6d.png)

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);

} 
```

我正在使用 TabBarController，并使用此代码添加它。

```
self.window.rootViewController = self.tabController; 
```

在 iOS 6 模拟器中一切正常，但在 iOS 5 中它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:04:22.147

**检查方向的代码是否有效？**

代码 ：：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged) name:@"UIDeviceOrientationDidChangeNotification" object:nil];
    ......
} 
```

检查方法::

```
-(void)orientationChanged {

   NSLog(@"Orientation Changed..!!");
} 
```

**方向改变方法的代码**

在 PCH 文件中，

```
#define IOS_OLDER_THAN_6        ( [ [ [ UIDevice currentDevice ] systemVersion ] floatValue ] < 6.0 )
#define IOS_NEWER_OR_EQUAL_TO_6 ( [ [ [ UIDevice currentDevice ] systemVersion ] floatValue ] >= 6.0 ) 
```

在 .m 文件中，

```
//For Less than IOS 6

#ifdef IOS_OLDER_THAN_6
- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)toInterfaceOrientation
{
   return toInterfaceOrientation;
}
#endif

// For Newer than IOS 6.
#ifdef IOS_NEWER_OR_EQUAL_TO_6
-(BOOL)shouldAutorotate
{
   return YES;
}
- (NSUInteger)supportedInterfaceOrientations
{
   return (UIInterfaceOrientationMaskAll);
}
#endif 
```

希望对您有所帮助。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:49:57.900

您需要使用这两种新方法来控制和配置 viewControllers 的方向更改：

```
- (BOOL)shouldAutorotate {
    return YES;    
}

- (NSUInteger)supportedInterfaceOrientations {    
    return (UIInterfaceOrientationMaskPortrait | 
            UIInterfaceOrientationMaskPortraitUpsideDown);
} 
```

您正在实施的方法适用于 iOS 5.x ，但此答案中提到的方法适用于 iOS 6.x。如果你想要两个操作系统版本的兼容性，那么你需要在你的 viewController 中实现这两个方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:34:32.287

在最顶层的导航控制器中，定义：

`-(BOOL)shouldAutorotate {return [self.visibleViewController shouldAutorotate];}`

在你的下一个视图控制器中：

`-(BOOL)shouldAutorotate {return YES;}`

```
-(NSUInteger)supportedInterfaceOrientations {  
return (UIInterfaceOrientationMaskPortrait | 
        UIInterfaceOrientationMaskPortraitUpsideDown);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T05:29:49.053

您正在使用tabBar，因此将此代码放在@end 底部的AppDelegate 中。

```
@implementation UITabBarController (Rotation)

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{   
    if ([self.selectedViewController isKindOfClass:[UINavigationController class]]) {
        UIViewController *rootController = [((UINavigationController *)self.selectedViewController).viewControllers objectAtIndex:0];
        return [rootController shouldAutorotateToInterfaceOrientation:interfaceOrientation];
    }
    return [self.selectedViewController shouldAutorotateToInterfaceOrientation:interfaceOrientation];
}

@end 
```

希望这会有所帮助。

# sqlite - SQLite3 数据“损坏”

> ID：15431669
> 
> 赞同：0
> 
> 时间：2013-03-15T11:48:49.257
> 
> 标签：sqlite, 64-bit

我正在开发一个 Delphi XE3 应用程序。在 Windows 7 **64 位**上。它写入 SQLite3 数据库并读回数据。

如果我使用 dos cmdline 读取数据，那很好。

但是，通过 Delpih 中的 dbExpress 控件或使用 SQLiteExpert 返回的数据是垃圾。我怀疑它归结为使用 64 位 Windows，但我完全被难住了。

[SQLiteExpert 截图](http://www.flickr.com/photos/94039122@N05/8558339892/)

有什么想法吗？

命令行 sqlite3 显示敏感数据：

```
sqlite> select distinct * from flight;
1|38926|Wed, 13 Mar 2013 15:54:19 GMT|EE35|38927|EGBB|EGPD|ofp|100720
2|38926|Wed, 13 Mar 2013 15:54:19 GMT|EE35|38927|EGBB|EGPD|ofp|100720 
```

Delphi 代码（也尝试过同样问题的 TSQLQuery）：

```
qrySelect := TSQLDataSet.Create(nil);
qrySelect.CommandType := ctQuery;
qrySelect.SQLConnection := conn;
qrySelect.CommandText := 'select distinct flight_brief_id, brief_id, brief_date from flight';

qrySelect.Open;
try
showmessage(inttostr(qryselect.Fields.Count)); // returns 3 as expected
qrySelect.First;
while not qrySelect.Eof do
begin
    strA := qryselect.Fields[0].AsString; 
    strB := qryselect.Fields[1].AsString;
    strC := qryselect.Fields[2].AsString;
    qrySelect.Next;
end;
finally
  qrySelect.Close;
end; 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:03:40.203

好的，没有这样回答，但我有一个解决方法，并且可以更好地了解问题所在，以防有人对我有一些想法！

我清理了一个 win XP 盒子，发现完全相同的问题，所以这不是 64 位问题。好的！

所以，我从插入 TSQLQuery 中删除了参数

```
example of usage : qryInsert.Params.CreateParam(ftString, 'BriefID', ptInput); 
```

并替换为

```
qryInsert.SQL.Text := 'insert into flight (brief_id, brief_date, flightno, '+
                    ' flight_brief_id, pod, poa, ofp, flight_date) '+
                    ' values ( '''+
                      brief_id+''', '''+
                      brief_date+''', '''+
                      flightno+''', '''+
                      flight_brief_id+''', '''+
                      pod+''', '''+
                      poa+''', ''ofp'', '''+
                      flight_date+''' )'; 
```

不漂亮，但它的工作。并且在 64 位系统上。所以这与参数有关，但不知道是什么！

# visual-c++ - 如何使用 OpenCV 进行二维傅里叶变换？

> ID：15431673
> 
> 赞同：0
> 
> 时间：2013-03-15T11:49:06.260
> 
> 标签：visual-c++, opencv

我是图像处理的新手，但想知道如何使用 OpenCV 对图像进行简单的 2D 傅里叶变换？

我基本上只是想用 OpenCv 来做这个 Java 小程序[http://www.brainflux.org/java/classes/FFT2DApplet.html](http://www.brainflux.org/java/classes/FFT2DApplet.html) - 如果可能的话，我想要一个完整的例子`doDFT(Mat imagein, Mat result)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:06:04.160

您可以在官方文档中找到使用 OpenCV 的 2d DFT 的完整示例：

[http://docs.opencv.org/doc/tutorials/core/discrete_fourier_transform/discrete_fourier_transform.html#discretfouriertransform](http://docs.opencv.org/doc/tutorials/core/discrete_fourier_transform/discrete_fourier_transform.html#discretfouriertransform)

# java - 如何解决 Swing GUI 错误？

> ID：15431674
> 
> 赞同：0
> 
> 时间：2013-03-15T11:49:13.003
> 
> 标签：java, swing, user-interface, jinternalframe

我正在开发一个摇摆应用程序，一切似乎都运行良好，但最近我遇到了一些 GUI 问题。问题是，当我在另一个内部打开 JinternalFrame 时，它​​工作正常，但是当我再次打开它时，子 JintenalFrame 失去了对自身的控制，布局丢失或可能被破坏，我得到了一些可以清楚地解释问题的照片：

![在此处输入图像描述](../Images/519dda09cbcd7861d1b5ab38c2b34fe8.png)

这是第一个 JinternalFrame，当我单击更新按钮时，第二个出现在其中，如下所示：

![在此处输入图像描述](../Images/48cf4b4ae23f74e4e4e6c48080aba185.png)

但是当我关闭第二个并再次打开它时，问题看起来像这样： ![在此处输入图像描述](../Images/364281aaaf2a196d84fecf47388931a5.png)

IDE 触发 NPE 提及：

```
Hibernate: select modalite0_.id_mod as id1_6_, modalite0_.libele as libele6_ from   
Modalite modalite0_
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at javax.swing.JTable.prepareRenderer(JTable.java:5735)
at javax.swing.plaf.basic.BasicTableUI.paintCell(BasicTableUI.java:2114)
at javax.swing.plaf.basic.BasicTableUI.paintCells(BasicTableUI.java:2016)
at javax.swing.plaf.basic.BasicTableUI.paint(BasicTableUI.java:1812)
at javax.swing.plaf.ComponentUI.update(ComponentUI.java:161)
at javax.swing.JComponent.paintComponent(JComponent.java:778)
at javax.swing.JComponent.paint(JComponent.java:1054)
at javax.swing.JComponent.paintChildren(JComponent.java:887)
at javax.swing.JComponent.paint(JComponent.java:1063)
at javax.swing.JViewport.paint(JViewport.java:731)
at javax.swing.JComponent.paintChildren(JComponent.java:887)
at javax.swing.JComponent.paint(JComponent.java:1063)
at javax.swing.JComponent.paintChildren(JComponent.java:887)
at javax.swing.JComponent.paint(JComponent.java:1063)
at javax.swing.JComponent.paintChildren(JComponent.java:887)
at javax.swing.JComponent.paint(JComponent.java:1063)
at javax.swing.JComponent.paintChildren(JComponent.java:887)
at javax.swing.JComponent.paint(JComponent.java:1063)
at javax.swing.JLayeredPane.paint(JLayeredPane.java:585)
at javax.swing.JComponent.paintChildren(JComponent.java:887)
at javax.swing.JComponent.paint(JComponent.java:1063)
at javax.swing.JComponent.paintChildren(JComponent.java:887)
at javax.swing.JComponent.paint(JComponent.java:1063)
at javax.swing.JComponent.paintChildren(JComponent.java:887)
at javax.swing.JComponent.paint(JComponent.java:1063)
at javax.swing.JLayeredPane.paint(JLayeredPane.java:585)
at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221) 
```

所以我问是否有办法追踪这个错误？

我使用 Netbeans7.2 作为 jre 7 的 ide。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:43:51.957

@Zakaria Marrah

*   `JDialog`为弹出窗口创建`JDialog`，整个JVM实例只有一个，假设在某一时刻只能看到一个弹出窗口，设置正确`JDialog.setDefaultCloseOperations(HIDE_ON_CLOSE)`

*   创建`JPanel`嵌套的所有`JComponents`

*   添加/初始化`XxxTableModel`到`JTable`，错误编码的渲染器和空模型导致`exceptions`所有`prepareRenderer`硬编码链接，铸件，值比较，然后必须测试模型是否包含数据，`prepareRenderer`如果通过，然后让渲染器中的任何东西工作

*   错误编码`renderer`以及 EDT 之外的更新导致`prepareRenderer`所有硬编码链接、铸件、值比较的异常，

* * *

*   现在你将只玩可见的 for`JDialog`及其内容

*   隐藏`JDialog`，

*   在视图少的情况下使用`CardLayout`，设置，切换到合适的卡片，

*   从 (s)中删除所有值`JComponent`，或从 (s) 中删除所有数据`model`，

*   永远不要在对象上重置、重新初始化或重新创建任何对象，

*   用于`SwingWorker`来自任何外部源的数据，通过 using 监听`PropertyChangeListener`，[必须测试，`exceptions by using get()`在 done()中检查](https://stackoverflow.com/questions/7053865/cant-get-arrayindexoutofboundsexception-from-future-and-swingworker-if-threa)

*   将值（或通过使用批处理 in `process`, `publish`）`done()`设置为`JComponent`s，它`model`的 s

*   然后调用`JDialog.pack()`，移动`JDialog`到屏幕上的正确坐标（相对于`JComponents`），移动到`Point`，然后显示`JDialog`包裹在`invokeLater(required)`

* * *

*   用于生产代码`Runnable#Thread`，但是所有到 Swing GUI 的输出都必须被包装到`invokeLater`，你可以忽略一些方法被声明为`Swing as thread safe`

# android - 在 Eclipse 中的 Android 开发中，Visual Studio 相当于 Ctrl + Shift + O 快捷方式是什么？

> ID：15431689
> 
> 赞同：7
> 
> 时间：2013-03-15T11:50:04.170
> 
> 标签：android, vb.net, eclipse, keyboard-shortcuts

我一直在做一些 Android 开发，发现 Ctrl+Shift+O 快捷键对于像我这样仍然习惯于屏幕上不同对象所需的导入的人来说非常方便。我也一直在 Visual Studio 2008 中进行 vb.net 开发，并且错误地尝试了该快捷方式，但它尝试打开表单或类似的东西。所以我的问题是：是否有一个快捷方式可以让我们在 Visual Studio 2008 中导入所有缺失的引用或删除不必要的引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:49:28.637

## 删除不必要的导入指令

我可以确认，在 Visual Studio 2012 和 Visual Studio 2010 中，代码编辑器有一个上下文菜单选项，可以使用 Visual Basic.NET 或 C# 中的指令进行删除、排序或删除和排序。我实际上从未使用过 Visual Studio 2008，但快速搜索显示它在 2008 年也是可能的（[来源](http://msdn.microsoft.com/en-us/library/bb514114%28v=vs.90%29.aspx)）。

![..](../Images/41bd6f0d965cf338d27d619485cddd8a.png)

为了将此功能与热键挂钩，您需要做的就是：

1.  转到工具 > 选项
2.  展开注释为“环境”的根节点，然后单击注释为“键盘”的节点
3.  搜索*Edit.RemoveAndSort*并指定您选择的热键。

## 添加未知导入指令

我使用这个名为[ReSharper](http://www.jetbrains.com/resharper/)的插件，当我引用一个没有适当导入指令的类时，它会为我提供这样的界面：

![在此处输入图像描述](../Images/cf27817e8fbc63e6acf395b52dcf501e.png)

如果您不想使用 ReSharper（它非常昂贵），那么 Visual Studio 的工作效率稍低，但界面同样有效。您应该看到带有红色下划线的类引用，如果您将鼠标悬停在红线上，您应该会看到一个小对话框，其中显示了添加对命名空间的引用的选项。您也可以按`CTRL + .`快速显示对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T14:51:26.637

从这个链接：

[自动命名空间导入](https://stackoverflow.com/questions/186895/automatic-namespaces-import)

看起来`Shift + ALT + F10`会做的伎俩。

# libgdx - 如何在 libgdx 中为 mac 和 ubuntu 制作可执行文件

> ID：15431690
> 
> 赞同：1
> 
> 时间：2013-03-15T11:50:04.733
> 
> 标签：libgdx

我从来没有将程序变成 mac 或 ubuntu 的可执行文件，我一直在研究如何做到这一点，但没有得到任何结果。我已经能够为 android、ios、windows（.exe）构建我的游戏，但对 mac osx（.app 文件）或 ubuntu（.deb 文件）一无所知。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-16T03:04:00.333

如果您使用的是 eclipse，您可以导出为跨平台 jar（然后适用于 mac、linux 和 windows）

Eclipse 让这变得非常简单：文件 -> 导出 ... -> Java -> 可运行的 Jar 文件。可能需要额外的步骤才能将应用的图像和声音等资产包含到此 .jar 文件中。

顺便说一句，你是怎么把它变成windows exe的？

# android - 如何从android中的异步任务返回值？

> ID：15431691
> 
> 赞同：0
> 
> 时间：2013-03-15T11:50:05.483
> 
> 标签：android, android-asynctask

我有一个单独的异步任务类。如何将值从异步任务类返回到主类。谁能帮我？

**在 Main 类中调用异步任务类**

```
String product_id,av_quantity;
Stock_updatetask = new Stock_update();
Stock_updatetask.execute(product_id,av_quantity); 
```

**异步任务类**

```
public class Stock_update extends AsyncTask<String, Void, String> {

JSONObject json = new JSONObject();

JSONArray jsonarray;

String stock_update;

protected String doInBackground(String... params) {

    try {

        // checkInternetConnection();

        HttpClient client = new DefaultHttpClient();
        HttpConnectionParams.setConnectionTimeout(client.getParams(),20000);
        HttpConnectionParams.setSoTimeout(client.getParams(), 20000);

        HttpResponse response;

        HttpPost post = new HttpPost("http://www.name.in/cakefoodnew/customer/stockUpdate?json=");

        json.put("submenu_id", "" + params[0]);
        json.put("available_quantity", "" + params[1]);
        // Log.v("id", ""+json);

        post.setHeader("json", json.toString());
        StringEntity se = new StringEntity(json.toString());

        se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE,"application/json"));
        post.setEntity(se);
        response = client.execute(post);

        if (response != null) {
            // get a data
            InputStream in = response.getEntity().getContent();
            String a = convertStreamToString(in);
            // Log.v("id", ""+a);

            try {

                jsonarray = new JSONArray("[" + a + "]");
                json = jsonarray.getJSONObject(0);
                stock_update = (json.getString("Success")); 
```

如何将**stock_update**字符串值返回给主类。

```
} catch (Exception e) {

            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    return null;
}

protected void onPostExecute(String result) {

    /*
     * if (stock_update.equalsIgnoreCase("1")) {
     * 
     * progressDialog.dismiss();
     * Toast.makeText(getApplicationContext(),"Stock updated",
     * 700).show();
     * 
     * }
     * 
     * else if (stock_update.equalsIgnoreCase("0")){
     * 
     * progressDialog.dismiss();
     * Toast.makeText(getApplicationContext(),"Stock not updated",
     * 700).show();
     * 
     * }
     */
}

// Json response
private String convertStreamToString(InputStream is) {
        // TODO Auto-generated method stub
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        StringBuilder sb = new StringBuilder();

        String line = null;

        try {
            while ((line = reader.readLine()) != null) {

                sb.append(line + "\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                is.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:52:56.793

您可以创建一个传递给异步类的接口，也可以为该变量创建一个简单的 get 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:54:43.113

通常我`AsyncTasks`在`main class`. 但是如果你有它在不同的文件中，你可以在你的`asynctask`. 您可以添加一个`OnPostExecuteListener`，当它被调用时，您调用成员方法来获取结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T14:08:43.907

回调方法呢？

您将主类作为参数传递。然后，在 onPostExecute() 中调用主类的某些方法

# flash - 部分播放影片剪辑（as2 flash）

> ID：15431693
> 
> 赞同：0
> 
> 时间：2013-03-15T11:50:15.637
> 
> 标签：flash, actionscript-2, playback, movieclip

我有一个时间线，里面有一个总共 60 帧的电影剪辑。

这 60 帧可以分为 20 帧组，它们总共形成一个循环运动。

也有 2 个按钮。一个前进按钮和一个后退按钮。

我怎样才能让按钮使按钮播放 20 帧影片剪辑然后停止？下一次单击，下 20 帧，下一次单击，下 20 帧。对于后退按钮，offcourse 也是相反的。

我对 ActionScript 很陌生，发现很难用谷歌搜索我需要的东西！

希望你们能帮我解决这个问题。这似乎是一个简单的任务......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T04:40:46.217

```
var frame = 1;
backwardBtn.onRelease = function(){
    if(frame != 1){
        frame -= 1;
    }
}

forwardBtn.onRelease = function(){
    if(frame != 60){
        frame += 1;
    }
}

mc.onEnterFrame = function(){
    gotoAndStop(frame);
} 
```

# iphone - 将 Flash 游戏移植到 Mac OS X dmg / App Store 和 iOS App Store 的步骤是什么？

> ID：15431697
> 
> 赞同：0
> 
> 时间：2013-03-15T11:50:27.903
> 
> 标签：iphone, ios, macos, flash, iad

我开发了一个 Flash 游戏，我想为 Mac OS X 和 iOS (iPad) 发布。该游戏由多个 SWF 文件组成，当最终用户从我的网站（作为 dmg 或 pkg 安装程序）或从 App Store 下载它时，我希望将它们很好地打包。我也可能会开始在 Mac App Store 和 iOS App Store 上销售我的游戏，但在此之前我可能会考虑投放一些广告。对于广告，如果我使用 App Store，我唯一的选择似乎是 Apple 的 iAd 广告平台，所以我必须以某种方式在 Flash 内容上叠加广告。理想情况下，用户无需安装任何第三方软件即可在 Mac 上玩游戏。

我知道这是可能的。这方面的例子不胜枚举。最突出的是 Machinarium 游戏，它是用 Flash 开发的，后来移植到 Mac 和 iOS。我只是不知道他们是怎么做到的。我已经对 Xcode 和 Objective-C 有了一些基本的了解。

那么我应该按照哪些步骤将我的 Flash 游戏移植到 Mac OS X dmg / App Store 和 iOS App Store，也许允许 iAds？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T12:06:58.003

据我所知，以非 ObjectiveC 语言编写的软件不允许在 AppStore 上发布。

您可以创建一个 Flash 投影仪，大概是一个 .app 文件，然后将外部 SWF 放入该包中，然后使用一些 DMG 制造商将其发布到您的网站上。

# oracle - Oracle：如何使用不同的 where 子句进行多次计数？

> ID：15431698
> 
> 赞同：12
> 
> 时间：2013-03-15T11:50:31.083
> 
> 标签：oracle, count, where-clause, multiple-columns

我需要计算同一个表中具有不同 where 子句的行。以下是我需要的输出

```
Bu   #A   #B  #C  #D #E #F #G  #H  #J  #K  #L   #M  #N
GB01 267  284 84  45 35 32 458 801 111 899 892  56  99
NL01 132  844 65  28 26 12 627 321 56  681 1062 127 128 
```

每列都有自己的标准，到目前为止，我有以下 SQL，但它已经看起来很难看，并且不能完全返回我需要的内容

```
SELECT *  FROM (
  SELECT
    c_unit_code,
    COUNT(*) AS ADVICE_EXPORT,
    0 AS CONFIRMATION_EXPORT,
    0 AS ISSUANCE_STANDBY
  FROM EXIMTRX.EPLC_MASTER
  WHERE (CLS_FLG NOT LIKE 'YES' OR CLS_FLG IS NULL) AND (
    form_of_lc LIKE 'IRREVOCABLE' OR
    form_of_lc LIKE 'REVOCABLE' OR
    form_of_lc LIKE 'IRREVOCABLE TRANSFERABLE' OR
    form_of_lc LIKE 'REVOCABLE TRANSFERABLE') AND our_eng LIKE 'ADVICE'
    GROUP BY c_unit_code
UNION
  SELECT
    c_unit_code,
    0 AS ADVICE_EXPORT,
    COUNT(*) AS CONFIRMATION_EXPORT,
    0 AS ISSUANCE_STANDBY
  FROM EXIMTRX.EPLC_MASTER
  WHERE (CLS_FLG NOT LIKE 'YES' OR CLS_FLG IS NULL) AND (
    form_of_lc LIKE 'IRREVOCABLE' OR
    form_of_lc LIKE 'REVOCABLE' OR
    form_of_lc LIKE 'IRREVOCABLE TRANSFERABLE' OR
    form_of_lc LIKE 'REVOCABLE TRANSFERABLE') AND our_eng LIKE 'CONFIRMATION'
    GROUP BY c_unit_code
UNION
  SELECT 
    c_unit_code,
    0 AS ADVICE_EXPORT,
    0 AS CONFIRMATION_EXPORT,
    COUNT(*) AS ISSUANCE_STANDBY
  FROM EXIMTRX.EPLC_MASTER
  WHERE (CLS_FLG NOT LIKE 'YES' OR CLS_FLG IS NULL) AND (
    form_of_lc LIKE 'IRREVOCABLE STANDBY' OR
    form_of_lc LIKE 'REVOCABLE STANDBY' OR
    form_of_lc LIKE 'IRREVOC TRANS STANDBY')
    GROUP BY c_unit_code
); 
```

这就是它返回的内容

```
GB01    0   0   17
GB01    0   39  0
GB01    80  0   0
NL01    0   0   32
NL01    0   159 0
NL01    341 0   0 
```

任何想法，我怎样才能实现我所需要的？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-15T12:01:00.370

```
 SELECT
    c_unit_code,
    COUNT(case when YOUR_CONDITIONS_FOR_ADVICE_EXPORT then 1 end) AS ADVICE_EXPORT,
    COUNT(case when YOUR_CONDITIONS_FOR_CONFIRMATION_EXPORT then 1 end) AS CONFIRMATION_EXPORT,
    COUNT(case when YOUR_CONDITIONS_FOR_ISSUANCE_STANDBY then 1 end) AS ISSUANCE_STANDBY
  FROM EXIMTRX.EPLC_MASTER
  GROUP BY c_unit_code 
```

# java - 虚拟文件系统映射到本地文件

> ID：15431701
> 
> 赞同：1
> 
> 时间：2013-03-15T11:50:34.247
> 
> 标签：java, filesystems, remote-access

如何装饰一些远程文件系统，例如 java 中的目录路径？例如这样的：

```
File decoratorFileSystem = new File("ftp://host/path"); // this does not work of course
...
File file1 = new File(decoratorFileSystem, "somefile1");
File file2 = new File(decoratorFileSystem, "somefile2"); 
```

因此，当我将使用`file1`,`file2`或其他修饰文件时，我可以从修饰文件系统访问远程文件，就好像它具有相应限制的本地文件一样。

我想使用“org.apache.commons.vfs2.provider....”中的虚拟文件系统，但我不确定这是不是正确的方式...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:33:29.160

Java 中的 A`File`只能引用操作系统安装的文件系统上的真实文件（即操作系统知道是文件的东西）。

虚拟文件系统不能以这种方式访问​​（除非它是由操作系统处理的，即如果你在 Linux 下直接挂载一个 FTP 目录，你可以使用 a `File`）。

NIO2的[新`Path`类](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html)（在 Java 7 及更高版本中可用）在设计时明确考虑了虚拟文件系统。

查看[本](http://docs.oracle.com/javase/7/docs/api/java/nio/file/spi/FileSystemProvider.html)[教程](http://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/filesystemprovider.html)和[课程](http://docs.oracle.com/javase/7/docs/api/java/nio/file/spi/FileSystemProvider.html)，了解如何定义自己的虚拟文件系统。[Zip 文件系统提供程序](http://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/zipfilesystemprovider.html)是一个示例实现。[`FileSystemProvider`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/spi/FileSystemProvider.html)

# html - em的上下文是什么？

> ID：15431702
> 
> 赞同：58
> 
> 时间：2013-03-15T11:50:34.910
> 
> 标签：html, css, responsive-design, em

在这个例子中：

**CSS**

```
h1 { font-size: 2em; }
.smaller { font-size: 0.5em; } 
```

**HTML**

```
<h1>Hi, I am a <span class="smaller">toad</span></h1> 
```

“toad”这个词是 0.5 乘以 16px（浏览器的标准字体大小）还是 0.5 乘以 2em（h1 的字体大小）？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-15T11:52:47.543

它等于使用它的元素的“font-size”属性的**计算**值。继承沿着文档树向下运行。

要回答您的问题，它将是 2em 的 0.5 倍，而无论 h1 的父级计算出的字体大小是多少，这都是 2 倍。*唷*。

同样重要的是要注意，如果您`em`在其他 CSS 属性上使用，例如`width`or `height`，则结果将根据您应用or`font-size`的任何元素的计算来计算，等等...`width``height`

在我看来，以下文章`em`很好地描述了该单元的使用和上下文，以及其他一些阅读材料和资源……`rem`您可能也会对这些单元感兴趣。

1.  [http://www.impressivewebs.com/understanding-em-units-css/](http://www.impressivewebs.com/understanding-em-units-css/)
2.  [http://snook.ca/archives/html_and_css/font-size-with-rem](http://snook.ca/archives/html_and_css/font-size-with-rem)
3.  [http://caniuse.com/rem](http://caniuse.com/rem)

你可能还想看看这个小提琴，看看它是如何更清晰的：

[http://jsfiddle.net/HpJjt/3/](http://jsfiddle.net/HpJjt/3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T12:25:31.537

[`em`单位](http://www.w3.org/TR/CSS21/syndata.html#value-def-length)表示元素的字体大小，除非在`font-size`属性值中使用，它表示父元素的字体大小。从这个意义上说，在所呈现的情况下，上下文是父元素。

在本例中，单词“toad”的字体大小因此等于`h1`. 从给定的数据中无法推断出它的具体价值。

当计算字体大小时，`h1`在处理这个构造时，已经计算了父级的字体大小；我们称之为*s*。首先`h1`计算s 的字体大小，将*s*（父元素的字体大小）乘以 2。然后`span`计算元素的字体大小，将其父元素的字体大小乘以 0.5，得到*s*。从理论上讲，舍入误差可能会导致此类过程中的最小偏差，但可以假设在计算机中乘以 2 和 0.5 是精确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T12:06:33.567

它将是上下文中 h1 元素的 2em 的 0.5 倍。

要强制它相对于 16px，您必须首先将 h1 的父级设置为 font-size 16px。

.wrapper{字体大小：16px；} h1 { 字体大小：2em；} .smaller { 字体大小：0.5em; }

```
<div class="wrapper"><h1>Hi, I am a <span class="smaller">toad</span></h1></div> 
```

所以在这种情况下，

*   wrapper 的字体大小为 16px
*   h1 的字体大小为 2em 为 16px
*   span.smaller 的字体大小为 1em（继承自 h1 的 .wrapper（.5em of 2em））为 16px

请注意，em 是上下文的相对度量，名义上基于当前字体中的 M 个字符高度。对于所有意图，h1 的大小为 32px，span.smaller 的大小为 16px。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T12:10:13.533

它取决于父元素的像素大小。如果你的父元素像素大小是 16px

`.5em`将等于您的基本像素的一半，因此它将是`8px`并且`2em`对于 h1 将等于`32px`。

这完全取决于您如何在 CSS 中设置父元素像素大小。

[**http://pxtoem.com/**](http://pxtoem.com/)

# erlang - 如何在 yaws 中处理对 out(A) 的多个请求？

> ID：15431706
> 
> 赞同：2
> 
> 时间：2013-03-15T11:50:57.267
> 
> 标签：erlang, yaws, erlangweb

最近，我开始在 erlang & Yaws 中开发 REST api。我不明白 yaws 和我的模块如何处理多个请求。

我确实有 api 模块收集所有请求：

```
appmods = </, api> 
```

和我的测试模块：

```
-module(api).
out(_Arg) ->
    io:format("my pid  ~p ~n", [self()]),
    loop(200000000),
    [{status, 200}, {header, {"Vary", "Accept"}},
     {content, "application/json", ""}]. 
```

在这一点上，我的理解是 yaws 只生成我的 api 模块的一个实例并将所有请求发送到那里。因此，在任何给定时间只能处理一个请求。

有没有办法产生更多的 api 模块进程并在它们之间传播请求？

或者我应该为每种类型的 API 请求做更多的 appmods 吗？

或者我对偏航如何工作的理解是根本错误的？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T12:33:23.690

Yaws 在内部保留了一个接受器进程池。在这些进程上处理请求。Yaws 不会为每个 appmod 生成一个新进程，并将对给定 appmod 的所有请求定向到其进程。相反，一个接受器处理一个新连接，读取该连接上的请求并分派它们，然后发送响应。一旦连接关闭，要么是由于客户端关闭它，要么是由于存在“Connection: close” HTTP 标头，是由于 HTTP 1.0 请求（默认情况下需要在每次请求/响应后关闭连接），或者由于客户端不活动导致服务器关闭它，接受器进程返回池。

上面评论中链接的输出的 JPEG 图像显示处理所有请求的相同 pid 可能是由于您的客户端保持连接打开并在同一连接上发送每个新请求，导致处理所有这些请求的同一服务器进程。如果您改为尝试像[Apache Bench](http://httpd.apache.org/docs/2.2/programs/ab.html)（也称为“ab”）这样的客户端，它默认为 HTTP 1.0，因此每个请求都有一个新连接，您将看到处理每个请求的不同进程。

顺便说一下，对于 appmod 需要注意的一点是，如果您使用执行尾递归循环的状态保持进程来实现它们，`gen_server`例如循环进程的pid。换句话说，该请求最初将在如前所述的 Yaws 接受器进程中处理，但`gen_server`一旦 appmod 调用它，它就会跨入该进程。这种对单个进程的请求序列化与 Yaws 无关，而是与 appmod 的实现方式有关——您可能想阅读[我发表的一篇关于此的文章](http://steve.vinoski.net/pdf/IC-Erlang_Web_Process_Bottlenecks.pdf)以了解更多详细信息。简而言之，除非您的应用程序可以接受这样的请求序列化，否则不要以这种方式编写 appmod。

# delphi - VCL中TRAdioGroup的双向活绑定

> ID：15431707
> 
> 赞同：4
> 
> 时间：2013-03-15T11:50:57.840
> 
> 标签：delphi, delphi-xe3, livebindings

Livebindings 的新手，到目前为止，这并不是一帆风顺的旅程。我正在尝试将一个 TRAdioGroup.ItemIndex 链接到一个整数的 TObject 属性。

所以我知道绑定列表/适配器没问题，因为对象中的其他属性正确且双向绑定到 TEdit、TStringGrid（对象列表）等。

我应该采取的步骤：

1.  所以我放弃了一个 TRadioGroup
2.  在 Visual Livebindings 中，我单击 (...) 并使 ItemIndex 属性“可绑定”
3.  我拖动 Radio 的 ItemIndex 和 AdapterBindSource 的 Integer 字段之间的链接。

问题：这只是一种方式，VLB 中的箭头表示这一点。Radio 工作，但我无法通过 RadioButtons 更改对象的值，只能从 TObject 更新 RadioButtons。

所以我虽然（再次）我应该：

1.  删除链接 创建一个新的 BindingExpression
2.  方向=双向
3.  控制组件/表达式：MyRadioGroup/ItemIndex
4.  源组件/表达式：MyAdapterBindSource/MyIntegerField

但后来我得到错误：

```
"Unable to cast or find converters between types TBindSourceAdapterReadWriteField<System.Integer> and Integer" 
```

# java - 在 Jetty 测试中重用 ServletContainerInitializer

> ID：15431708
> 
> 赞同：0
> 
> 时间：2013-03-15T11:50:58.817
> 
> 标签：java, testing, jetty, servlet-3.0

`I`我在扩展类中有我的 servlets 配置`ServletContainerInitializer`。我在那里注册 servlet 并定义映射。我不想在我的集成测试中做同样的工作。`I`在我的码头测试中是否有常见的方法来重用配置？

所以我有`I`

```
public class I implements ServletContainerInitializer {
    public void onStartup(Set<Class<?>> c, ServletContext ctx) throws ServletException   {
        Servlet servlet = new MyServlet();
        ctx.addServlet("foo", servlet).addMapping("/*");
   }
} 
```

和测试像

```
 Server server = new Server(0);
    Context servletContext = new Context(server, "/", Context.SESSIONS);

    Servlet servlet = new MyServlet();                           //Duplicated
    servletContext.addServlet(new ServletHolder(servlet), "/*"); //Duplicated

    server.start(); 
```

我怎样才能做到不重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T14:45:00.587

您需要在码头的生命周期中添加一个侦听器

```
public class JettyStartingListener extends AbstractLifeCycleListener {

    private final ServletContext sc;

    public JettyStartingListener(ServletContext sc){
        this.sc = sc;
    }

    @Override
    public void lifeCycleStarting(LifeCycle event) {
        try {
            new I().onStartup(new HashSet<Class<?>>(), sc);
        } catch (ServletException e) {
            throw new RuntimeException(e);
        }
    }

}

Server server = new Server(8080);
ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS);
context.setContextPath("/");
server.setHandler(context);
context.addLifeCycleListener(new JettyStartingListener(context.getServletContext()));
server.start();
server.join(); 
```

在 jetty-8.1.5.v20120716 上测试

# c# - 如何在 c#.net 中的 dataList 中的 LinkBut ton 事件上传递值？

> ID：15431710
> 
> 赞同：1
> 
> 时间：2013-03-15T11:51:01.297
> 
> 标签：c#, asp.net, .net

我一直在为一个项目设计代码，我想在其中获取“ProductId” `OnClick="LinkButton1_Click"`事件。

**这是代码：**

```
 <asp:DataList ID="DataList1" runat="server" RepeatColumns="4">
                                <ItemTemplate>
                                    <table>
                                        <tr><td><%#Eval("ProductId")%>

           <asp:LinkButton ID="LinkButton1" runat="server" OnClick="LinkButton1_Click">
   <img src='<%#Eval("Image")%>' style="width: 220px; height: 146px" alt="" />
                                            </asp:LinkButton></td>
                                        </tr>
                                        <tr>
                                            <td style="text-align: center">
                                                <%#Eval("ArtName")%>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="text-align: center">
                                                <%#Eval("Price")%>
                                            </td>
                                        </tr>
                                    </table>
                                </ItemTemplate>
                            </asp:DataList> 
```

请有任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:00:47.153

您必须使用 itemcommand 模式。

一个例子：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemcommand%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.datalist.itemcommand%28v=vs.110%29.aspx)

基本上，您可以：

*   关闭您的 LinkBut​​ton 上的 OnClick
*   在按钮上设置 CommandName（例如“LBClick”）和 CommandArgument（您的值）
*   订阅 DataLIst ItemCommand 事件
*   在 ItemCommand 处理程序中处理您的按钮单击（如果 e.CommandName == "LBClick"，则以 e.CommandArgument 作为值运行代码）

希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:01:48.143

您可以使用`OnItemCommand event on your DataList`

并尝试`CommandArgument`和`CommandName`

```
void Item_Command(Object sender, DataListCommandEventArgs e) 
      {
           if(e.CommandName ="Select")
           {
              var e = e.CommandArgument;
              .... 
           }

      } 
```

看法 ：

```
<asp:LinkButton ID="LinkButton1" runat="server" CommandName="Select" CommandArgument='<%# DataBinder.Eval(Container.DataItem, "ProductId")%>' /> 
```

注意：在您的数据列表中添加 OnItemCommand

# php - 如何在 Blah 上嵌入链接并在 CodeIgniter 中单击时调用函数

> ID：15431711
> 
> 赞同：0
> 
> 时间：2013-03-15T11:51:05.270
> 
> 标签：php, html, codeigniter, phpmyadmin, html-table

我正在使用codeIgnitor 的类从数据库表（即类别）创建HTML 表。

这是我的控制器：

**测试页面.php**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class Testpagi extends CI_Controller{

function __construct(){
    parent::__construct();
}
public function index($offset = 0){

  $search_query = $this->db->get('Categories');
  $count_records = $search_query->num_rows();

    // Load the tables library
    $this->load->library('table');

    // Load Pagination
    $this->load->library('pagination');

    // Config setup
    $config['base_url'] = base_url().'/testpagi/index/';
    $config['total_rows'] = $count_records;
    $config['per_page'] = 10;
    // I added this extra one to control the number of links to show up at each page.
    $config['num_links'] = 5;
    // Initialize
    $this->pagination->initialize($config);

    // Query the database and get results
     $data['categories'] = $this->db->get('Categories', 10, $offset);

    // Create custom headers
    $header = array('S. No', 'Category Name', 'Status', 'Date Added', 'Last Modified');
    // Set the headings
    $this->table->set_heading($header);
    // Load the view and send the results

    $tmpl = array (
                'table_open'=> '<table width="600px" bgcolor="#F7F7F7" align="center" border="2" cellpadding="4" cellspacing="0">',

                'heading_row_start'   => '<tr>',
                'heading_row_end'     => '</tr>',
                'heading_cell_start'  => '<th bgcolor="#0B548C" style="color:#FFFFFF">',
                'heading_cell_end'    => '</th>',

                'row_start'           => '<tr>',
                'row_end'             => '</tr>',
                'cell_start'          => '<td bgcolor="#D4620E"  >',
                'cell_end'            => '</td>',

                'row_alt_start'       => '<tr>',
                'row_alt_end'         => '</tr>',
                'cell_alt_start'      => '<td bgcolor="#B2D593">',
                'cell_alt_end'        => '</td>',

                'table_close'         => '</table>'
          );

        $this->table->set_template($tmpl);      

    $data['message'] = 'Not Exist';
    $this->load->view('books_view', $data);
}
}
?> 
```

这是我的观点：

**book_view.php**

```
<html>
<body>
    <div id='results' align="center">
    <?
            echo $this->table->generate($categories); 
            echo $this->pagination->create_links();

    ?>    

    </div>
</body>
</html> 
```

**注意**我正在使用`$this->table->set_template($tmpl);`我的表格样式。

1.  我很困惑我应该在哪里放置`<a href=" '#' onclick="`. 什么应该在这里`" ">`使`<td>`可点击。我搜索了很多，但找不到解决方案。
2.  如何`<td>blah</td>`在 CodeIgniter 中单击时嵌入链接并调用函数？

这是图像：

![在此处输入图像描述](../Images/713b834bb40146e354c2b30c328e1a83.png)

我想在突出显示的类别上添加链接`Yellow`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:22:30.043

只是一个想法，使用 Jquery ，首先将 class 或 id 添加到您`<td>`的 $tmpl 数组中，然后使用它：

```
<script type="text/javascript">
   $(document)ready(function(){
     $('your-class').click(function(){
        window.location.replace('your link');
     });
   });
</script> 
```

祝你好运 ！。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:08:15.810

我建议你使用 html 而不是 javascript

您只需对控制器和查看代码稍作调整即可完成此操作：

```
 public function index($offset = 0){

      $search_query = $this->db->get('Categories');
      $count_records = $search_query->num_rows();

        // Load the tables library
        $this->load->library('table');

        // Load Pagination
        $this->load->library('pagination');

        // Config setup
        $config['base_url'] = base_url().'/testpagi/index/';
        $config['total_rows'] = $count_records;
        $config['per_page'] = 10;
        // I added this extra one to control the number of links to show up at each page.
        $config['num_links'] = 5;
        // Initialize
        $this->pagination->initialize($config);

        // Query the database and get results
        //CHANGE THIS
         $categories = $this->db->get('Categories', 10, $offset)->result_array();

        // Create custom headers
        $header = array('S. No', 'Category Name', 'Status', 'Date Added', 'Last Modified');
        // Set the headings
        $this->table->set_heading($header);
        // Load the view and send the results

        $tmpl = array (
                    'table_open'=> '<table width="600px" bgcolor="#F7F7F7" align="center" border="2" cellpadding="4" cellspacing="0">',

                    'heading_row_start'   => '<tr>',
                    'heading_row_end'     => '</tr>',
                    'heading_cell_start'  => '<th bgcolor="#0B548C" style="color:#FFFFFF">',
                    'heading_cell_end'    => '</th>',

                    'row_start'           => '<tr>',
                    'row_end'             => '</tr>',
                    'cell_start'          => '<td bgcolor="#D4620E"  >',
                    'cell_end'            => '</td>',

                    'row_alt_start'       => '<tr>',
                    'row_alt_end'         => '</tr>',
                    'cell_alt_start'      => '<td bgcolor="#B2D593">',
                    'cell_alt_end'        => '</td>',

                    'table_close'         => '</table>'
              );

            $this->table->set_template($tmpl);
        //AND ADD THIS CODE      
        foreach($categories as $category){
           $this->table->row(array($category['id'], '<a href="'.site_url('contoller/method/'.$category['id']).'">'.$category['category_name'].'</a>', $category['status'], $category['date_added'], $category['last_modified']));
//remember to change the keys of $category (id,category_name,status,date_added,last_modified) for the ones that you have in your database
        }
        $data['message'] = 'Not Exist';
        $this->load->view('books_view', $data);
    } 
```

现在在您看来，只需从生成函数中删除 $categories ：

```
<html>
<body>
    <div id='results' align="center">
    <?
            echo $this->table->generate(); 
            echo $this->pagination->create_links();

    ?>    

    </div>
</body>
</html> 
```

# javascript - 如何创建仅在鼠标悬停在图像顶部时显示的菜单或链接

> ID：15431712
> 
> 赞同：0
> 
> 时间：2013-03-15T11:51:08.247
> 
> 标签：javascript, jquery, html, css

我有一个图片库，其中包含可供用户使用的插入/替换/删除图片选项。我已经在每个图像的顶部显示了这些选项（替换图像和删除图像）。并且该选项仅在鼠标悬停特定图像时显示。

鼠标悬停时如何使选项显示缓慢

CSS

```
.wrap{
    position:relative;
    display:inline-block;
    }

.toggle
{   font-weight:bold;
    position:absolute;
    top:1px;  
    right:0;

    padding:0px;
    width:100%;

    text-align:right;
    /*visibility:hidden;*/
    display:none;

}   

.toggle a
{   
    text-decoration:none;
     background:#000;
    padding:0;    
    font-size:10px;  
    color:white;
    line-height:100%;
    cursor:arrow;
}

.wrap:hover .toggle
{
    /*visibility:visible;  */
    display: block;
} 
```

HTML

```
 <div class="wrap">
<A name=1 href="image.php?imageid=<?php echo $imageid ?>&imageindex=<?php echo ((($page-1)*15)+$index-1) ;  ?> "><IMG  border=0 src="<?php echo $thumbpath; ?>" height="75" width="75" alt="<?php echo $caption ?>" title="<?php echo $caption ?>" ></A><BR>
<div class="toggle">
<?php
echo "<a href='delete.php?delete=yes&imageid=".$imageid.'&page='.$page."'>Delete </a>"
?>
<br>
<?php
echo "<a href='replace.php?update=yes&imageid=".$imageid.'&page='.$page."'>Replace </a>"
?>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:57:19.057

需要切换的 div 的使用`display:none`和属性。`position:absolute`

**HTML**

```
<div class="wrap">
    <img src="http://static.adzerk.net/Advertisers/d18eea9d28f3490b8dcbfa9e38f8336e.jpg" />
    <div class="toggle"><a href="#">REPLACE IMAGE</a> <a href="#"> DELETE IMAGE</a></div>
</div> 
```

**CSS**

```
.wrap{
    position:relative;
    display:inline-block
}
.toggle{
    position:absolute;
    top:0;  
    background:Black;
    padding:4px;
    width:100%;
    display:none
}
a{
    background:red;
    padding:2px;    
    font-size:12px;  
}
.wrap:hover .toggle{
    display:block
} 
```

**[演示](http://jsfiddle.net/Z9SUR/1/)**

# objective-c - 如何从现有对象的不同类调用方法（Obj C）

> ID：15431717
> 
> 赞同：0
> 
> 时间：2013-03-15T11:51:14.987
> 
> 标签：objective-c, xcode, uiviewcontroller

我对 Objective C 和 Xcode 很陌生，可能只是做一些愚蠢的错误，但我尝试了很多不同的建议，但无法让它们发挥作用。

简而言之，当在不同的 UIViewController 中按下按钮时，我想在现有的 UIViewController 上调用一个方法。

（有点背景：两个屏幕是一个**主屏幕**和一个**菜单屏幕**。用户向上滑动以查看菜单，然后当按下完成按钮时，我希望菜单屏幕发送一个字符串变量（在这种情况下为 URL）到主屏幕中的方法，然后主屏幕在 UIWebView 中显示 URL）。

我尝试将方法/URL 变量放在 AppDelegate/MainViewController 中并合成它们。我还尝试使 MenuViewController 成为 MainViewCONtroller 的子类，并使用 [super readFile:url] 调用该方法，该方法确实编译但我认为它没有调用现有的 MainViewController 对象，因为 webview 没有出现。

我将在下面粘贴我的代码的相关位：（感谢您的帮助！）

**主视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface MainViewController : UIViewController {
IBOutlet UIWebView *vCodeView;
}

- (void)readFile:(NSString *)newURL;

@end 
```

**主视图控制器.m**

```
#import "MainViewController.h"
#import "MenuViewController.h"

@interface MainViewController ()

@end

@implementation MainViewController

- (void)readFile:(NSString *)newURL {
    vCodeView.hidden = NO;

    // seperate url by full stops
    NSArray *splitURL = [newURL componentsSeparatedByString:@"."];
    // find extension of file
    NSString *extension = [splitURL objectAtIndex:([splitURL count]-1)];

    // DO SOME OTHER STUFF WITH URL THEN DISPLAY CONTENT IN UIWEBVIEW
}

- (void)swipeUpRecognised {
    MenuViewController *menuView = [[MenuViewController alloc] initWithNibName:@"MenuViewController" bundle:nil];
    menuView.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self presentViewController:menuView animated:YES completion:nil];
} 
```

**菜单视图控制器.h**

```
#import <UIKit/UIKit.h>
#import "MainViewController.h"

@interface MenuViewController : UIViewController {
    IBOutlet UIBarButtonItem *bDone;
    IBOutlet UITextField *fUser;
    IBOutlet UITextField *fPass;
    IBOutlet UITextField *fAddress;
    IBOutlet UITextField *fAutoConnectAddress;
}

- (IBAction)bDonePressed;

@end 
```

**菜单视图控制器.m**

```
#import "MenuViewController.h"
#import "MainViewController.h"

@interface MenuViewController ()

@end

@implementation MenuViewController

- (IBAction)bDonePressed {

    NSString *user = @"admin";
    NSString *pass = @"password";
    NSString *path = @"54.246.90.95/repos/project1/trunk/dir1/test.c";

    // url of file
    NSArray *pathArray = [[NSArray alloc] initWithObjects:@"http://", user, @":", pass, @"@", path, nil];
    NSString *url = [pathArray componentsJoinedByString:@""];

    //call the method here passing in url

    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:06:44.117

在这种特殊情况下，您可以在`dismissViewControllerAnimated`调用之前输入以下内容，它应该可以工作：

```
if(self.presentingViewController && [self.presentingViewController respondsToSelector:@selector(readFile:)]) {
    [(id)self.presentingViewController readFile:url];
} 
```

通常，您真正想要的称为[委托](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html)。

所以，为了更简洁的实现，试试这个：

### 菜单视图控制器.h

```
@protocol MenuViewControllerDelegate <NSObject>
    - (void)menuViewControllerFinishedWithURL:(NSURL *)url;
@end

@interface MenuViewController : UIViewController {
    @property id<MenuViewControllerDelegate> delegate;
// ... 
```

### 菜单视图控制器.m

```
- (IBAction)bDonePressed {
    // ...

    if(self.delegate) {
        [self.delegate menuViewControllerFinishedWithURL:url];
    }

    [self.presentingViewController dismissViewControllerAnimated:YES completion:nil];
} 
```

### 主视图控制器.m

```
@interface MainViewController () <MenuViewControllerDelegate>

@end

// ...

- (void)swipeUpRecognised {
    MenuViewController *menuView = [[MenuViewController alloc] initWithNibName:@"MenuViewController" bundle:nil];
    menuView.delegate = self;
    menuView.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self presentViewController:menuView animated:YES completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:02:34.023

为了调用 MainViewController 方法，应该很容易：

1.  将 MainViewController.h 包含到 MenuViewController.h 中。
2.  在你想要的地方调用这个片段：

    ```
    NSString * vcid = @""; //put id you have assigned to your MainViewController. This should be in your storyboard. If it is empty, fill it with proper name, then use it here.
    UIStoryboard *storybord = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    MainViewController *mainvc =[storybord instantiateviewcontrollerwithidentifier:vcid];
    [mainvc method]; 
    ```

请注意，`method`必须在 MainViewController.h 文件中声明它才能被调用。

也就是说，我想知道您是否真的需要为菜单设置单独的视图控制器。如果您想为用户提供一组按钮以供选择，请考虑包含所有按钮的 UIView。这个 UIView 然后应该在你的`swipeUpRecognised`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:09:53.793

这段代码对你有用......像这样修改你的代码......

**主视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface MainViewController : UIViewController {
IBOutlet UIWebView *vCodeView;
}

- (void)readFile:(NSString *)newURL;

@end 
```

**主视图控制器.m**

```
#import "MainViewController.h"
#import "MenuViewController.h"

@interface MainViewController ()

@end

@implementation MainViewController

- (void)readFile:(NSString *)newURL {
    vCodeView.hidden = NO;

    // seperate url by full stops
    NSArray *splitURL = [newURL componentsSeparatedByString:@"."];
    // find extension of file
    NSString *extension = [splitURL objectAtIndex:([splitURL count]-1)];

    // DO SOME OTHER STUFF WITH URL THEN DISPLAY CONTENT IN UIWEBVIEW
}

- (void)swipeUpRecognised {
    MenuViewController *menuView = [[MenuViewController alloc] initWithNibName:@"MenuViewController" bundle:nil];
menuView.delegate = self;
    menuView.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self presentViewController:menuView animated:YES completion:nil];
} 
```

**菜单视图控制器.h**

```
#import <UIKit/UIKit.h>
#import "MainViewController.h"

@interface MenuViewController : UIViewController {
    IBOutlet UIBarButtonItem *bDone;
    IBOutlet UITextField *fUser;
    IBOutlet UITextField *fPass;
    IBOutlet UITextField *fAddress;
    IBOutlet UITextField *fAutoConnectAddress;
}
@property(nonatomic, retain) MainViewController *delegate;
- (IBAction)bDonePressed;

@end 
```

**菜单视图控制器.m**

```
#import "MenuViewController.h"
#import "MainViewController.h"

@interface MenuViewController ()

@end

@implementation MenuViewController
@synthesize delegate = _delegate;
- (IBAction)bDonePressed {

    NSString *user = @"admin";
    NSString *pass = @"password";
    NSString *path = @"54.246.90.95/repos/project1/trunk/dir1/test.c";

    // url of file
    NSArray *pathArray = [[NSArray alloc] initWithObjects:@"http://", user, @":", pass, @"@", path, nil];
    NSString *url = [pathArray componentsJoinedByString:@""];

    //call the method here passing in url
    [self.delegate readFile:url];

    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

# magento - 体面的 magento soap v2 文档

> ID：15431718
> 
> 赞同：1
> 
> 时间：2013-03-15T11:51:19.397
> 
> 标签：magento, soap

我正在寻找一个存在 magento soap v2 文档的站点。

现在，即使是最基本的文档，原始的 magento 站点也**严重缺乏。**

我想要的很简单：所有可能的肥皂方法的概述以及我需要传递给它们的参数类型以获取有用的东西或在商店中存储有用的东西。

我已经在谷歌上搜索了两个星期，尝试了我能想到的一切，我唯一发现的是其他沮丧的程序员抱怨同样的事情。

有谁知道任何资源至少可以概述可以传递给他们的可能的肥皂方法和参数？

给出好的答案的人将在两天内获得 200 分（如果有人给出好的答案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T06:17:33.483

也许这可能是一个好的开始：

*   [http://incho.net/ecommerce/magento/magento-v2-soap-demystified/](http://inchoo.net/ecommerce/magento/magento-v2-soap-demystified/)

*   [http://inhoo.net/ecommerce/magento/magento-api-v2/](http://inchoo.net/ecommerce/magento/magento-api-v2/)

*   [http://incho.net/ecommerce/magento/magento-api-v2-soap-unit-testing/](http://inchoo.net/ecommerce/magento/magento-api-v2-soap-unit-testing/)

对于在哪里可以找到所有可能的带有在 Magento SOAP API 中实现的参数的 SOAP 方法的部分，答案再简单不过了：

请不要在谷歌上搜索，而是使用浏览器打开您的 Magento SOAP wsdl 文件或将其保存在磁盘上。然后使用一些可以对 wsdl 文件进行更漂亮查看的工具打开它，您将找到所有方法以及所需的参数. [http://inchoo.net/ecommerce/magento/magento-v2-soap-demystified/](http://inchoo.net/ecommerce/magento/magento-v2-soap-demystified/)在这里你可以找到关于 wsdl 的一小部分。能够开始使用 SOAP API 就足够了。您的 WSDL 网址应如下所示：

*   [http://yourmagentodomain.com/api/v2_soap/?wsdl=1](http://yourmagentodomain.com/api/v2_soap/?wsdl=1)

# c# - 使用 LINQ 从 XML 中检索元素

> ID：15431719
> 
> 赞同：0
> 
> 时间：2013-03-15T11:51:19.853
> 
> 标签：c#, xml, linq, linq-to-xml

我有以下 XML

```
<Group>
    <Id>2</Id>
    <GroupName>Fizzy Drinks</GroupName>
    <DateCreated>0001-01-01T00:00:00</DateCreated>
    <DateModified>0001-01-01T00:00:00</DateModified>
    <Person>
      <PersonId>78</PersonId>
      <PersonName>Francesca</PersonName>
      <PersonSurname>Andrews</PersonSurname>
      <PersonAge>59</PersonAge>
    </Person>
    <Products>
      <ProductId>2</ProductId>
      <ProductName>Oranges</ProductName>
      <CategoryId>4</CategoryId>
      <CategoryName></CategoryName>
      <SubCategoryId>7</SubCategoryId>
      <SubCategoryName>Bread</SubCategoryName>
    </Products>
    <Products>
      <ProductId>12</ProductId>
      <ProductName>Pepsi</ProductName>
      <CategoryId>4</CategoryId>
      <CategoryName></CategoryName>
      <SubCategoryId>8</SubCategoryId>
      <SubCategoryName>Dairy</SubCategoryName>
    </Products>
    <Products>
      <ProductId>14</ProductId>
      <ProductName>Multiwheat Bread</ProductName>
      <CategoryId>4</CategoryId>
      <CategoryName></CategoryName>
      <SubCategoryId>7</SubCategoryId>
      <SubCategoryName>Bread</SubCategoryName>
    </Products>
</Group> 
```

我希望在 Group 对象中检索以下内容。

我有以下代码：-

```
 foreach (XElement xe in xdoc.Descendants("Group"))
        {
            int id = Convert.ToInt32(xe.Element("Id").Value);

            var group = from g in xdoc.Descendants("Group")
                        where (int)g.Element("Id") == id // filtering groups here
                        select new Group
                        {
                            Id = (int)g.Element("Id"),
                            GroupName = (string)g.Element("GroupName"),
                            DateCreated = (DateTime)g.Element("DateCreated"),
                            DateModified = (DateTime)g.Element("DateModified"),
                            Person = from d in g.Descendants("Person")
                                     select new Person
                                         {
                                             Id = (int)d.Element("PersonId"),
                                             Name = (string)d.Element("PersonName"),
                                             Surname = (string)d.Element("PersonSurname"),
                                             Age = (int)d.Element("PersonAge"),
                                         },

                            PersonId = (int)g.Element("PersonId"),
                            PersonName = (string)g.Element("PersonName"),
                            PersonSurname = (string)g.Element("PersonSurname"),
                            PersonAge = (int)g.Element("PersonAge"),
                            Products = g.Elements("Products")
                                .Select(p => new Product
                                {
                                    Id = (int)p.Element("ProductId"),
                                    ProductName = (string)p.Element("ProductName")
                                }).ToList()
                        };

            foreach (var g in group)
            {
                GroupList.Add(g);
            }

        } 
```

但是我收到一个错误，因为 Person 不是 IEnumerable。但是，由于我每组只有 1 人，因此我不希望将其设为 IEnumerable。有没有解决的办法？

感谢您的帮助和时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:53:28.380

最好声明新的范围变量，它将保存`<Person>`元素并在以后使用它

```
var group = from g in xdoc.Descendants("Group")
            let person = g.Element("Person") // here
            where (int)g.Element("Id") == id
            select new Group {
               ...
            } 
```

并使用它：

```
 Person = new Person {
            Id = (int)person.Element("PersonId"),
            Name = (string)person.Element("PersonName"),
            Surname = (string)person.Element("PersonSurname"),
            Age = (int)person.Element("PersonAge")
          }, 
```

`null`如果您的 xml 中可能没有 person 元素，您还可以添加检查：

```
 Person = (person == null) ? null : 
           new Person {
              Id = (int)person.Element("PersonId"),
              Name = (string)person.Element("PersonName"),
              Surname = (string)person.Element("PersonSurname"),
              Age = (int)person.Element("PersonAge")
           }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:54:19.100

听起来你*可以*这样做：

```
Person = (from d in g.Elements("Person")
          select new Person
          {
              Id = (int)d.Element("PersonId"),
              Name = (string)d.Element("PersonName"),
              Surname = (string)d.Element("PersonSurname"),
              Age = (int)d.Element("PersonAge"),
          }).First() 
```

但最好写：

```
Person = Person.FromXElement(g.Element("Person")) 
```

`FromXElement`像这样的静态方法在哪里`Person`：

```
public static Person FromXElement(XElement element)
{
    return new Person
    {
        Id = (int) element.Element("PersonId"),
        Name = (string) element.Element("PersonName"),
        Surname = (string) element.Element("PersonSurname"),
        Age = (int) element.Element("PersonAge")
    };
} 
```

这样你的查询会更清晰。

# apache - 从规则中排除 url 或模式

> ID：15431720
> 
> 赞同：1
> 
> 时间：2013-03-15T11:51:20.653
> 
> 标签：apache, .htaccess, rewrite

我想从规则中排除某些 url，但由于我对 apache 的了解绝对为 0，我似乎无法确定条件。

```
RewriteEngine On
RewriteCond %{HTTP:X_FORWARDED_PROTO} https
#RewriteCond %{REQUEST_URI} !^/(account|checkout|login) 
RewriteCond %{REQUEST_URI} !/account/login.html
RewriteCond %{REQUEST_URI} !/index.php?main_page=password_forgotten
RewriteCond %{REQUEST_URI} !/account/
RewriteCond %{REQUEST_URI} !/account/edit.html
RewriteCond %{REQUEST_URI} !/account/address-book/
RewriteCond %{REQUEST_URI} !^/account/change-password.html
RewriteCond %{REQUEST_URI} !^/account/notifications/
RewriteCond %{REQUEST_URI} !^/index.php?main_page=checkout&fecaction=null
RewriteCond %{REQUEST_URI} !^/index.php?main_page=checkout_shipping_address
RewriteRule ^(.*)$ http://%{HTTP_HOST}/$1 [R=301,L] 
```

我相信应该有一种方法可以排除所有包含 /account/ 或 =checkout 但我不知道如何的网址。

也有人可以解释一下 ^ ， (.*) ， $ 是什么？我认为他们是操作员，但我似乎找不到任何信息，现在也没有时间学习 apache。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:51:01.157

所有这些奇怪的字符都是正则表达式的一部分。有关详细信息，请参见此处[`mod_rewrite Introduction- Regular Expressions`](http://httpd.apache.org/docs/current/rewrite/intro.html#regex)。

你可以省略所有

```
RewriteCond %{REQUEST_URI} !/account/login.html
RewriteCond %{REQUEST_URI} !/account/edit.html
RewriteCond %{REQUEST_URI} !/account/address-book/
RewriteCond %{REQUEST_URI} !^/account/change-password.html
RewriteCond %{REQUEST_URI} !^/account/notifications/ 
```

因为

```
RewriteCond %{REQUEST_URI} !/account/ 
```

已经涵盖了所有这些。

测试`=checkout`不同，因为这不是 URL 路径的一部分，而是查询字符串的一部分。排除每个请求，包括`=checkout`在查询字符串中

```
RewriteCond %{QUERY_STRING} !.=checkout 
```

# mysql - 唯一访客查询

> ID：15431721
> 
> 赞同：1
> 
> 时间：2013-03-15T11:51:25.220
> 
> 标签：mysql, sql

我需要找出每天唯一访客的数量，我有这样的数据库：

```
UID   clicks date
6046    9   2013-03-06
6449    7   2013-03-06
6450    41  2013-03-06
664     2   2013-03-07
2432    36  2013-03-07
3246    11  2013-03-07
6031    52  2013-03-07 
```

现在我需要找到每天的唯一访问者数量。我发现这一点以及当天的点击次数。所以查询是这样的：

```
SELECT date,SUM(clicks) as new_clicks,COUNT(DISTINCT uID) as unique_clicks 
FROM uc_user 
WHERE date <='2013-03-15' GROUP BY date; 
```

但是在这里我得到了错误的结果。计数与我使用相同间隔计算的计数不同

```
SELECT date, COUNT(DISTINCT uID ) AS unique_clicks
FROM uc_user
WHERE date <= '2013-03-15'
GROUP BY date
LIMIT 0 , 30 
```

这些查询之间有什么区别，哪一个对于显示唯一访问者的数量是正确的？

实际上我在 PHP 中的实际查询是这样的：

```
 SELECT date,SUM(clicks) as new_clicks,COUNT(uID) as unique_clicks 
 FROM currencyclick_user 
 WHERE date BETWEEN '$from' AND '$to' 
 GROUP BY date 
```

和

```
 SELECT SUM(clicks) as total_new_clicks,
        COUNT(DISTINCT uID) as total_new_uniqueclicks  
 FROM currencyclick_user 
 WHERE date BETWEEN '$from' AND '$to' 
```

但对于相同的范围，它显示不同的值。我的意思是总和查询显示的总数比我通过在第一个查询中添加计数得到的值错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:05:09.283

由于您更新了问题，因此问题最下方的两个查询非常不同，因为在第一个查询中，您已按日期对记录进行分组，而第二个查询则没有。第一个查询将每天返回不同的记录，而第二个查询将只返回一条记录，因为您没有指定查询要对哪一列进行分组。

如果在不包含 GROUP BY 子句的语句中使用分组函数，则相当于对所有行进行分组。

*   [GROUP BY（聚合）函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)
*   [MySQL 对 GROUP BY 的扩展](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)

* * *

**更新 1**

```
SELECT  SUM(new_clicks) totalClicks,
        SUM(unique_clicks) totalUnique
FROM
    (
        SELECT  date,
                SUM(clicks) as new_clicks,
                COUNT(uID) as unique_clicks 
        FROM    currencyclick_user 
        WHERE   date BETWEEN '$from' AND '$to' 
        GROUP   BY date
    ) subQ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:28:44.783

要查找范围内的唯一访问总数，请尝试此查询

```
SELECT  SUM(clicks) totalClicks,
    count(distinct UID) totalUnique
FROM
(
    SELECT UID,dtm,clicks
    FROM    currencyclick_user 
    WHERE   dtm BETWEEN '2013-03-06' AND '2013-03-07' 
) as allclicks 
```

# c++ - C++ - 编写一个 exe 文件

> ID：15431723
> 
> 赞同：-1
> 
> 时间：2013-03-15T11:51:34.857
> 
> 标签：c++, c, compiler-construction

我创建了一个简单的程序，可以从创建的项目中生成 exe 文件，也许它可以调用`How to make a compiler`但我想知道**c++**如何编写 exe 文件，简单地说..

```
----------------------------------------- 
```

与 Python 一样，Python 是一种用 c 编写的编程语言。所以它的编译器是用`c`yes 创建的？

也许你比我更专家，帮帮我！

我该怎么做以及我应该使用什么功能？我是 C++ 的新手，我为自己的编程语言开发了一个 IDE！

之前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:02:22.080

在谈到编写编译器时，我认为您不应该使用“简单”这个词。它需要一些关于 C++、汇编和系统架构的严肃知识。为 C++ 编写编译器是一个庞大的工程，想想必须实现标准库！

如果你真的很想为自己的语言编写编译器，我会从为一种非常非常简单的语言编写解释器开始。当你完成这项工作后，编写一个程序将代码从你的语言翻译成 C/C++，并使用现有的编译器生成你的可执行文件。然后，您可以通过对您的语言中的新概念重复这些步骤来开始扩展该语言。但实际上，我会远离它。

# c# - XPath 不返回任何内容，在其他任何地方都可以使用

> ID：15431724
> 
> 赞同：-1
> 
> 时间：2013-03-15T11:51:39.740
> 
> 标签：c#, html, xpath, html-agility-pack

尝试使用 XPath 解析此代码：[http](http://pastebin.com/Un9x1BRX) ://pastebin.com/Un9x1BRX 实际页面：http://fonix.dyndns.org: 40000/ [soasc /](http://fonix.dyndns.org:40000/soasc/)

我想从这部分得到作曲家的名字：

```
 <td>
            <div class="hl3">
              <a href=
              "index.php?av=0&amp;sb=SOASC&amp;sc=Markus+Pyykk%F6+%28Mankeli%29&amp;clist=1&amp;did=">
              +</a>
            </div><a href=
            "index.php?av=0&amp;sb=SOASC&amp;sc=Markus+Pyykk%F6+%28Mankeli%29&amp;clist=1&amp;did=">Markus
            Pyykk&#246; (Mankeli)</a>
          </td> 
```

让它返回`Markus Pyykkö (Mankeli)`。

我的 XPath`./tr[@class = 'table1' or @class = 'table2']/td/a`在每个在线验证器中都能正常工作，但 SelectNodes() 什么也不返回。这是我的错还是敏捷包坏了？？

编辑：我正在循环播放这样的曲目：

```
HtmlNodeCollection songs = doc.DocumentNode.SelectNodes("//*[@class = 'table1' or @class = 'table2']");

            foreach (HtmlNode song in songs)
            {
and so on 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:02:06.040

你确定？下面的代码适用于我，

```
var w = new HtmlWeb();
var d = w.Load("http://fonix.dyndns.org:40000/soasc/");
var xpath = "//tr[@class ='table1' or @class = 'table2']/td/a";
var anchors = d.DocumentNode.SelectNodes(xpath); 
```

# asp.net-mvc - asp.net mvc中的加密视图状态

> ID：15431727
> 
> 赞同：1
> 
> 时间：2013-03-15T11:51:57.520
> 
> 标签：asp.net-mvc

我知道视图状态在 mvc 中不存在。我正在寻找类似于 asp.net 网络表单中的加密视图状态模式的东西。我想在请求中隐藏一些数据。

我想要实现的是将一些数据传递给响应并将**其隐藏在用户面前**。我不知道用户能够修改数据或查看它。通过将这些数据隐藏在客户端，我想减少服务调用，因为我不能使用会话来保留这些数据。

数据根本不会显示。我只需要稍后将其传递给服务即可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T06:30:45.763

所以我找到了我的问题的答案。有[MVC3Futures 项目](http://nuget.org/packages/Mvc3Futures/)添加了所需的行为。

可以序列化实体模型并对其进行加密。

```
@Html.Serialize("Transfer", Model, SerializationMode.EncryptedAndSigned) 
```

通过放置反序列化属性来自动绑定控制器。

```
public ActionResult Transfer(string id,[Deserialize(SerializationMode.EncryptedAndSigned)]Transfer transfer) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:34:33.810

您只需要在将值放入隐藏的输入字段之前对其进行加密，然后在发布时在服务器上对其进行解密。

查看如何在 C# 中进行简单的加密/解密。这里有一些很好的实现：

[http://www.joshrharrison.com/archive/2009/01/28/c-encryption.aspx](http://www.joshrharrison.com/archive/2009/01/28/c-encryption.aspx)

[https://stackoverflow.com/a/5518092/160823](https://stackoverflow.com/a/5518092/160823)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:44:25.640

1.  虽然我真的不知道你在加密什么。但是如果你想避免 CSRF 或数据篡改，那就去吧。

您可以`AntiForgeryToken()`用于再次验证被篡改的数据。防伪令牌可用于帮助保护您的应用程序免受跨站点请求伪造。要使用此功能，请从表单调用 AntiForgeryToken 方法，并将 ValidateAntiForgeryTokenAttribute 特性添加到要保护的操作方法中。

考虑像这样使用 [AntiForgeryToken](http://msdn.microsoft.com/en-us/library/dd470175%28v=vs.108%29.aspx)

```
@Html.AntiForgeryToken() 
```

在控制器中

```
[ValidateAntiForgeryToken]
Public ActionResult SomeAction()
{
  return view()
} 
```

# maven - 用于部署和运行 osgi 包的 Maven 命令

> ID：15431730
> 
> 赞同：0
> 
> 时间：2013-03-15T11:52:10.693
> 
> 标签：maven, osgi, equinox

我已经构建了我的 osgi 包。我想知道是否有任何 maven 命令可用于在 equinox 中部署和运行这些包，就像我们对 jboss-as (mvn jboss-as:deploy & mvn jboss-as:undeploy) 所做的那样？如果是的话，有什么好的教程吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T23:05:34.360

您可以将 Pax Runner 支持添加到构建包的 Maven 项目中（当整个基于包的应用程序通过反应器 POM 构建时效果最佳），并用于`mvn install pax:provision`通过 Maven pax 的正确配置在 Equinox 中部署和运行包插入。

Maven 食谱第[1.2 节。Generate an OSGi Project with Maven](http://www.sonatype.com/books/mcookbook/reference/sect-osgi-generate-project.html)描述了如何使用 Pax Runner 支持创建一个新的空项目，并且[通过一些工作，您可以将其配置改进为现有项目](http://pbrada.tumblr.com/post/46708711391/retrofitting-an-osgi-eclipse-project-to-maven-and-pax)——描述有点长，所以我把它移到了一个单独的博客邮政。

[osgi](/questions/tagged/osgi "显示标记为“osgi”的问题") [maven](/questions/tagged/maven "显示标记为“maven”的问题")

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T11:55:52.463

试试`install <bundle-jar>`。这应该有效。有关详细信息，请参阅[http://www.javacodegeeks.com/2011/06/osgi-using-maven-equinox.html](http://www.javacodegeeks.com/2011/06/osgi-using-maven-equinox.html)

# c# - 从内容页面设置母版页的属性，并从 asp.net 中的另一个内容页面获取该属性值

> ID：15431733
> 
> 赞同：5
> 
> 时间：2013-03-15T11:52:13.143
> 
> 标签：c#, asp.net

我有一个具有一种属性名称事件类型的母版页。现在我想从内容页面设置此属性，然后该属性值应该可用于另一个内容页面。

这可能与 asp.net 吗？如果是，请帮助我。

是的，我的内容页面已经继承了另一个非主页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:01:52.140

如果此属性是您添加到母版页的自定义属性，那么您必须向`MasterType`包含它的页面添加声明。

```
<%@ MasterType 
    virtualpath="~/Path/To/Your.master" 
%> 
```

这允许网站或应用程序在编译时知道母版页的特定类型，并允许您像访问控件中的任何其他属性一样访问它。

```
Page.Master.MyCustomerProperty = someValue; 
```

*编辑：作为旁注，在将此属性下放到您的下一个控件时，最好创建（并引发）一个自定义事件，指示该属性已更改。这样，许多控件可以订阅事件并“自我更新”，而不必关心设置属性的时间。*

**示例：**在您的母版页中，您可以将事件定义为“全局”变量。然后在您的财产中，您可以提出此事件。

```
public event EventHandler myPropertyChanged;
public delegate void MyPropertyChanged(object sender, EventArgs e);

//...

public string MyProperty
{
    get
    {
       return _myProperty;
    }
    set
    {
        _myProperty = value;
        if (myPropertyChanged != null)
            myPropertyChanged(this, new EventArgs());
    }
} 
```

然后在您的其他控件中，您可以订阅此事件以了解它何时更改：

```
protected void Page_Load(object sender, EventArgs e) 
{
    Page.Master.MyPropertyChanged += new EventHandler(MasterPropertyChanged);
}

protected void MasterPropertyChanged(object sender, EventArgs e) 
    //Rememeber you need the VirtualType in order for this event to be recognized
    SomeLocalValue = Page.Master.MyProperty;
} 
```

[可以在CodeProject](http://www.codeproject.com/Articles/5041/Step-by-Step-Event-handling-in-VB-NET)上找到有关此过程的良好分步教程。可以在[MSDN](http://msdn.microsoft.com/en-us/library/9aackb16%28v=vs.100%29.aspx)上找到一个很好的 c# 自定义事件教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T22:02:05.670

如果您的页面来自不同的请求，则主属性将不起作用。母版页不是静态的，每个请求都有一个不同的页面，这意味着您设置值的实例在您尝试检索它时已经消失。`Session`字典是您应该放置要在请求之间保留的用户内容的地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-03T15:30:57.140

向母版页添加属性：

```
public string lblBannerText { get { return lblBanner.Text; } set { lblBanner.Text = value; } } 
```

然后，获取页面的 master 并将其转换为 master 类类型：

```
((MyMaster)Page.Master).lblBannerText = "banner text"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-21T08:38:32.693

获取或设置 MasterPage 属性的简单方法，就像 this.in 内容页面一样，请执行以下操作。

```
protected override void Render(HtmlTextWriter writer)
{
    var master = this.Master as Site;
    master.SiteName += "|网站首页";
    base.Render(writer);
} 
```

并在母版页中定义属性

```
public partial class Site : System.Web.UI.MasterPage
{
    public string MetaDescription { get; set; }
    public string MetaKeywords { get; set; }
    public string SiteName { get; set; }
    public SiteSettings siteSettings { get; set; }
    protected void Page_Load(object sender, EventArgs e)
    {
        siteSettings = SettingsFactory<SiteSettings>.Get();
        MetaDescription = siteSettings.SearchMetaDescription;
        MetaKeywords = siteSettings.SearchMetaKeywords;
        SiteName = siteSettings.SiteName;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T11:55:22.150

您可以使用`Master property`您的页面并访问您的财产

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.page.master.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.page.master.aspx)

样本

```
ContentPlaceHolder mpContentPlaceHolder;
    TextBox mpTextBox;
    mpContentPlaceHolder = 
      (ContentPlaceHolder)Master.FindControl("ContentPlaceHolder1");
    if(mpContentPlaceHolder != null)
    {
        mpTextBox = 
            (TextBox) mpContentPlaceHolder.FindControl("TextBox1");
        if(mpTextBox != null)
        {
            mpTextBox.Text = "TextBox found!";
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T11:56:55.850

你可以试试这个

在母版页中创建一个属性，然后从内容页访问它：

母版页：

```
public partial class BasePage : System.Web.UI.MasterPage
{ 
   private string[] _RequiredRoles = null;

   public string[] RequiredRoles
   {
     get { return _RequiredRoles; }
     set { _RequiredRoles = value; }
   }
 } 
```

内容页：

```
 public partial class _Default : System.Web.UI.Page
{
  protected void Page_Load()
  {
    Master.RequiredRoles = new string[] { //set appropriate roles };
   }
 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-30T13:20:14.050

我有一个类似的问题。这是我所做的：

```
//Id the form tag and place a runat server
  <form id="form1" runat="server" >

//In C# Masterpage.cs - Expose the forms properties
 public System.Web.UI.HtmlControls.HtmlForm Form1 {
            get { return form1; }
            set { form1 = value;
            } }
//In C# Consuming page add this to pageLoad using UniqueId
 ((SiteMaster)Page.Master).Form1.DefaultButton = btnSearchUsersLink.UniqueID; 
```

# c# - 比较双精度值

> ID：15431734
> 
> 赞同：1
> 
> 时间：2013-03-15T11:52:16.673
> 
> 标签：c#, asp.net

我有一个双精度值，我动态获得，值为 0.94289988675，我还得到另一个双精度值，值为 0.94289988777。我只需要比较这两个值。但它说它们不一样。我如何比较这些值的前四位数字。

**代码**：

```
for (z = 0; z < something.Count(); z++)
{
    if (largest == Math.Round(0.94289988675 [z],4))
    {
        //proceed
    }
} 
```

最大 = 0.94289988675 0.94289988675[z] 为 0.94289988777。z 是。

它不会进入循环。请帮帮我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T11:57:44.007

> 我怎样才能比较到前四位

我假设您的意思是 4 位数字，而不是 4 位。

只需取差值的绝对值：

```
if (Math.Abs(largest - 0.94289988675) < 0.0001) 
{
    //proceed
} 
```

平等是浮点类型的一个非常困难的概念，永远不要使用简单的`==`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T12:01:13.873

您永远不会测试浮点值是否相等。曾经。在任何编程语言中。处理这个问题的最常见方法是从另一个中减去一个，并将这个差异与一个通常称为 Epsilon 的小数进行比较。在您的情况下，前四位数字 0.001 可能是合适的。如果两个数字的差小于您的 Epsilon 值，则认为它们相等。

```
double x = ?;
double y = ?;
double epsilon = 0.001;

var difference = Math.Abs(x - y);

var isEqual = difference < espilon; 
```

请注意，您不应**为此**使用常量`Double.Epsilon`。这只是一个糟糕的命名，它是完全不相关的东西。

# facebook - 按故事打开图表见解

> ID：15431736
> 
> 赞同：2
> 
> 时间：2013-03-15T11:52:19.367
> 
> 标签：facebook, facebook-graph-api, facebook-insights

是否可以通过开放图表故事获得印象数？当前洞察按操作显示 Feed、Ticker 和 Timeline 印象。

我对故事而不是行动更感兴趣。这可能吗？我尝试了不同的 FQL 表和图形 API，但没有成功。

# caching - Symfony2 app.php 有效，但 app_dev.php 无效

> ID：15431738
> 
> 赞同：4
> 
> 时间：2013-03-15T11:52:21.597
> 
> 标签：caching, symfony, deployment, permissions, capifony

我已将 Symfony2 项目部署到我的开发服务器并希望运行开发环境。

如果我使用 /app.php，一切都运行良好，但如果我尝试 app_dev.php，我会收到 404 错误：

在此服务器上未找到请求的 URL /app_dev.php。

下面是我的 .htaccess 文件的副本：

```
<IfModule mod_rewrite.c>
    Options +FollowSymlinks
    RewriteEngine On

    # Explicitly disable rewriting for front controllers
    RewriteRule ^app_dev.php - [L]
    RewriteRule ^app.php - [L]

    RewriteCond %{REQUEST_FILENAME} !-f

    # Change below before deploying to production
    #RewriteRule ^(.*)$ app.php [QSA,L]
    RewriteRule ^(.*)$ app_dev.php [QSA,L]
</IfModule> 
```

它在我的本地机器上运行良好，只是在我的开发服务器上运行良好，有什么想法吗？

我的 /cache 和 /logs 目录都具有 777 权限，并由 www-data 拥有：

```
drwxrwxrwx+ 4 www-data www-data 4096 Mar 15 11:46 cache
drwxrwxrwx+ 2 www-data www-data 4096 Mar 15 11:05 logs 
```

这些目录中的 dev 和 prod 完全相同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T12:47:32.353

检查您的 app_dev.php，它有一个限制，即拒绝从服务器本身以外的其他计算机访问开发环境。

这是出于安全原因，如果您部署到生产服务器并且用户可以访问 dev env，那么他/她可以对您的应用程序了解很多。

```
// This check prevents access to debug front controllers that are deployed by accident to production servers.
// Feel free to remove this, extend it, or make something more sophisticated.
if (isset($_SERVER['HTTP_CLIENT_IP'])
    || isset($_SERVER['HTTP_X_FORWARDED_FOR'])
    || !in_array(@$_SERVER['REMOTE_ADDR'], array('127.0.0.1', 'fe80::1', '::1'))
) {
    header('HTTP/1.0 403 Forbidden');
    exit('You are not allowed to access this file. Check '.basename(__FILE__).' for more information.');
} 
```

您必须将您的 IP 添加到该阵列，或删除整个事情（我不会推荐）。

永远记住将 dev 变量传递给 AppKernel。`$kernel = new AppKernel('dev', true);`

# php - PHP 通过 UITextFields 发布到 MySQL

> ID：15431740
> 
> 赞同：0
> 
> 时间：2013-03-15T11:52:30.550
> 
> 标签：php, mysql, xcode, post

我有一个联系表格，我用 php 编写，并将内容发布到我的数据库中。

它有 4 个标签——姓名、文字、地点和联系方式。

我的 PHP 代码如下所示：

```
<?php header("Location: feed.php"); ?>
<?php 

define ( 'DB_NAME','database_name');
define ( 'DB_USER','user');
define ( 'DB_PASSWORD','root');
define ( 'DB_HOST','localhost');

$link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);

if (!link) {
die('Could not connect: ' .mysql_error());
}

$db_selected = mysql_select_db(DB_NAME, $link);

if (!$db_selected) {
die('Can\'t use ' . DB_NAME . ': ' . mysql_error());
}

$value1 = $_REQUEST['name'];
$value2 = $_REQUEST['text'];
$value3 = $_REQUEST['place'];
$value4 = $_REQUEST['contact'];

$sql = "INSERT INTO content (`name`, `text`, `place`, `contact`) VALUES ('$value1', '$value2', '$value3', '$value4')";

 if (!mysql_query($sql)) {
die('Error: ' . mysql_error());
}
    echo "You've just posted your text!";
mysql_close();
?> 
```

我现在要做的是，我在 Xcode 中有 4 个 UITextField：

```
IBOutlet UITextField *who;
IBOutlet UITextField *what;
IBOutlet UITextField *where;
IBOutlet UITextField *contact; 
```

然后我尝试使用此代码通过 Xcode 中的表单发布：

```
- (IBAction)post:(id)sender
{
    NSLog(@"%@", who);
    NSLog(@"%@", what);
    NSLog(@"%@", where);
    NSLog(@"%@", contact);
    // create string contains url address for php file, the file name is post.php, it receives parameter :name
    NSString *strURL = [NSString stringWithFormat:@"http://website.com/post.php?who=%@&what=%@&where=%@&contact=%@",who, what, where, contact];

    // to execute php code
    NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

    // to receive the returend value
    NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];

    NSLog(@"%@", strResult);
} 
```

但是 NSLog 中的输出是：

```
<UITextField: 0x745f230; frame = (66 277; 187 30); text = 'fsdmfsfsf'; clipsToBounds = YES; opaque = NO; autoresize = RM+BM; gestureRecognizers = <NSArray: 0x7185a00>; layer = <CALayer: 0x745f3d0>> 
```

谁能解释一下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:27:58.060

如果我了解您要做什么，那么您的两个代码块似乎没有意义。从您的 PHP 中，您尝试获取以下变量：

*   姓名
*   文本
*   地方
*   接触

但是在您的 XCode 示例中，您将 4 个不同的变量发布到 URL：

*   谁
*   什么
*   在哪里
*   接触

所以首先要做的就是纠正一个或另一个。我会选择 PHP，所以这就是我认为你想要做的事情（假设你在数据库中得到了正确的列名）：

```
 $value1 = $_GET['who'];
 $value2 = $_GET['what'];
 $value3 = $_GET['where'];
 $value4 = $_GET['contact'];

 $sql = "INSERT INTO content (`name`, `text`, `place`, `contact`) VALUES ('$value1',       '$value2', '$value3', '$value4')"; 
```

所以至少现在你是 XCode/PHP 是有道理的（至少对我来说，就我所知，这可能完全是错误的）。

编辑：刚刚注意到您的 PHP 正在使用正在贬值的 mysql_* 函数，您应该使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。

# akka - 为 Akka 2 类型的 actor 设置超时

> ID：15431743
> 
> 赞同：0
> 
> 时间：2013-03-15T11:52:35.980
> 
> 标签：akka

如何更改 Akka 2 类型演员的默认超时 5 秒？

`TypedProps`提到的构造函数`timeout`是`protected[TypedProps]`（我不知道那是什么意思）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-19T21:15:31.197

如果您想更改类型化 Actor 的默认超时，您可以`akka.actor.typed.timeout`在 Akka 配置中设置该值。例如：

```
akka.actor.typed.timeout=60s 
```

根据[文档](http://doc.akka.io/docs/akka/snapshot/general/configuration.html#akka-actor)，这是“*具有非 void 返回类型的类型化参与者方法的默认超时*”。

如果您只想更改单个类型演员的超时时间，Robin Green 的回答就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:56:10.437

`TypedProps[Foo]().withTimeout(timeout)`

# java - 将自定义 jQuery 类传递给 Spring 控制器

> ID：15431753
> 
> 赞同：0
> 
> 时间：2013-03-15T11:52:57.407
> 
> 标签：java, jquery, spring-mvc

我创建了一个对象并添加到 Jquery 中的数组中，如下所示

```
function CharacterData(name,value,type) {
    this.name = name;
    this.value = value;
    this.type = type;
}

var characters = new Array();
characters[0]=new CharacterData("0","1","2");
characters[1]=new CharacterData("0","1","2");
$.ajax({
    type: "POST",
    url: "xxyyzz.action",
    data: {
        characters:characters
    },
    success:function(response) {
        alert("GOOD");
    }
}); 
```

现在我需要将此值传递给我的 Spring MVC 控制器，如下所示

```
@ResponseBody
@RequestMapping(value = "xxyyzz.action", method = {RequestMethod.POST})
public MyClass getxxyyzzPage(
        final CharacterDataList characters) {
            return null;
        } 
```

POJO如下

```
 public class CharacterDataList {

    private List<CharacterData> characterData;

    public List<CharacterData> getCharacterData() {
        return characterData;
    }

    public void setCharacterData(
            final List<CharacterData> characterData) {
        this.characterData = characterData;
    }
} 
```

下一个

```
public class CharacterData {

    private String name, value, type;

    public String getName() {
        return name;
    }

    public void setName(final String name) {
        this.name = name;
    }

    public String getValue() {
        return value;
    }

    public void setValue(final String value) {
        this.value = value;
    }

    public String getType() {
        return type;
    }

    public void setType(final String type) {
        this.type = type;
    }
} 
```

但在控制器中，我得到“characters！=null”但“characters.characterData=null”。请让我知道如何传递这些值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:42:17.207

我认为您不需要 CharacterDataList。我认为问题在于解组器正在寻找具有成员“characterData”的值“characters”。你有一个“字符”数组，其中只有一堆恰好是 CharacterData 类型的对象。

您是否尝试过将控制器方法更改为列表？

# debugging - Mingw-w64 调试和分析：不完整的调用堆栈

> ID：15431754
> 
> 赞同：1
> 
> 时间：2013-03-15T11:52:58.553
> 
> 标签：debugging, gcc, stack, mingw, symbols

我正在使用 mingw-w64 4.6.3 在 windows 下编译。

在 QtCreator 中调试代码时，我没有正确显示调用堆栈（显示的是?? 而不是调用者列表）。当前函数名正确显示，局部变量也正常工作。此外，当使用非常困倦进行分析时，我无法在函数统计信息中获取有关调用者的信息。

另一方面，当使用 MinGW 32 位（4.4）编译时，一切正常（调试和分析）。

在这两种情况下，我都使用 -g 编译并使用 -Wl,-s 链接

您知道为什么在使用 MinGW-w64 进行调试时调用堆栈不可用吗？

谢谢，

艾蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-23T15:29:05.580

> -s：从可执行文件中删除所有符号表和重定位信息。

删除 -Wl,-s。

[https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html](https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)

# javascript - 请解释 RegExp javascript 行为

> ID：15431759
> 
> 赞同：0
> 
> 时间：2013-03-15T11:53:15.563
> 
> 标签：javascript, regex, string

我遇到了一些关于 javascript RegExp 行为的理解问题。请帮助我了解这些东西是如何工作的。

```
var str = "_prefix_123 blah blah _prefix_321 blah blah blah _prefix_100500";
var prefix = "_prefix_";
var exp = new RegExp (prefix+"\d*","gm");

str1 = str.replace(exp,"hello");
alert(str1);

str2 = str.replace(/_prefix_\d*/gm, "hello");
alert(str2); 
```

**在这里检查小提琴[http://jsfiddle.net/6PSdg/4/](http://jsfiddle.net/6PSdg/4/)**

由于某种原因，两个相同（至少它们看起来像）的正则表达式模式返回不同的结果。谁能解释发生了什么？))

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:55:00.503

不同之处在于，当您使用`RegExp`构造函数时，您传递的是一个*字符串*，而字符串文字中的反斜杠被解释为*字符串*转义。因此，要将反斜杠实际传递给正则表达式引擎，您必须确保字符串中的反斜杠被转义（通过在其前面放置反斜杠）：

```
var exp = new RegExp (prefix+"\\d*","gm");
// Here ----------------------^ 
```

[更新小提琴](http://jsfiddle.net/6PSdg/5/)

# iphone - 用于 iphone 的 Google API 获取位置不起作用？

> ID：15431767
> 
> 赞同：0
> 
> 时间：2013-03-15T11:53:30.737
> 
> 标签：iphone, xcode, google-maps

您好，我正在使用 google api 和这种方法来搜索位置，但现在它显示 (610,0,0,0) 作为响应？

这是我的代码：

```
-(CLLocationCoordinate2D) addressLocation {
NSString *urlString = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@&output=csv", 
                [addressField.text stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSString *locationString = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlString]];
NSArray *listItems = [locationString componentsSeparatedByString:@","];

double latitude = 0.0;
double longitude = 0.0;

if([listItems count] >= 4 && [[listItems objectAtIndex:0] isEqualToString:@"200"]) {
    latitude = [[listItems objectAtIndex:2] doubleValue];
    longitude = [[listItems objectAtIndex:3] doubleValue];
}
else {
     //Show error
}
CLLocationCoordinate2D location;
location.latitude = latitude;
location.longitude = longitude;

return location;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:00:14.507

试试这个 ：：

```
- (CLLocationCoordinate2D) geoCodeUsingAddress:(NSString *)address
{
   double latitude = 0.0;
   double longitude = 0.0;

   NSString *esc_addr =  [address stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
   NSString *req = [NSString stringWithFormat:@"http://maps.google.com/maps/api/geocode/json?sensor=false&address=%@", esc_addr];

   NSDictionary *googleResponse = [[NSString stringWithContentsOfURL: [NSURL URLWithString: req] encoding: NSUTF8StringEncoding error: NULL] JSONValue];

   NSDictionary    *resultsDict = [googleResponse valueForKey:  @"results"];   // get the results dictionary
   NSDictionary   *geometryDict = [resultsDict valueForKey: @"geometry"];   // geometry dictionary within the  results dictionary
   NSDictionary   *locationDict = [geometryDict valueForKey: @"location"];   // location dictionary within the geometry dictionary

   NSArray *latArray = [locationDict valueForKey: @"lat"];
   NSString *latString = [latArray lastObject];     // (one element) array entries provided by the json parser

   NSArray *lngArray = [locationDict valueForKey: @"lng"];
   NSString *lngString = [lngArray lastObject];     // (one element) array entries provided by the json parser

   CLLocationCoordinate2D location;
   location.latitude = [latString doubleValue];// latitude;
   location.longitude = [lngString doubleValue]; //longitude;

   return location;
} 
```

我之前发现了同样的问题。

可能存在有关 Google API 服务的问题。

希望这对你来说是 htlp。

谢谢。

# android - 如何使用 Otto 事件总线将事件从服务发送到活动？

> ID：15431768
> 
> 赞同：58
> 
> 时间：2013-03-15T11:53:31.340
> 
> 标签：android, otto

简单`BusProvider.getInstance().post()`不带异常`main thread`。如何使用 Otto 事件总线将事件从服务发送到活动？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-03-15T13:09:29.700

要从任何线程（主线程或后台）发布并在主线程上接收，请尝试类似

```
public class MainThreadBus extends Bus {
  private final Handler mHandler = new Handler(Looper.getMainLooper());

  @Override
  public void post(final Object event) {
    if (Looper.myLooper() == Looper.getMainLooper()) {
      super.post(event);
    } else {
      mHandler.post(new Runnable() {
        @Override
        public void run() {
          MainThreadBus.super.post(event);
        }
      });
    }
  }
} 
```

[注意：一般方法要归功于 Jake Wharton 和https://github.com/square/otto/issues/38](https://github.com/square/otto/issues/38)上的“pommedeterresaute” 。我只是用包装类而不是子类来实现它。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-02-27T09:13:50.590

要从任何线程（主线程或后台）发布并在主线程上接收，请使用以下内容`MainThreadBus`而不是原版`Bus`

```
public class MainThreadBus extends Bus {
     private final Handler handler = new Handler(Looper.getMainLooper());

     @Override public void post(final Object event) {
        if (Looper.myLooper() == Looper.getMainLooper()) {
            super.post(event);
        } else {
            handler.post(new Runnable() {
                @Override
                public void run() {
                    MainThreadBus.super.post(event);
                }
            });
        }
    }
} 
```

这是基于安迪丹尼的回答。

没有必要同时扩展和包装一个`Bus`对象，做一个或另一个。在丹尼的回答中，它实际上是一个包装器，`Bus`基类只是像接口一样被使用，所有的功能都被覆盖了。

即使您删除了`Bus`基类，它也会起作用，除非您碰巧`MainThreadBus`通过`Bus`引用引用了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-25T04:06:19.427

或者，如果您确定您是从非主线程发布的，则只需执行此操作：

```
new Handler(Looper.getMainLooper()).post(new Runnable() {
                    @Override
                    public void run() {
                        mBus.post(new myEvent());
                    }
                }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-04T10:55:41.707

总线 = 新总线（ThreadEnforcer.ANY）；是这个问题的明确解决方案。它的所有你必须做的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-14T10:31:35.660

对我来说最好的实现自定义总线类

```
public class AndroidBus extends Bus {
    private final Handler mainThread = new Handler(Looper.getMainLooper());

    @Override
    public void post(final Object event) {
        if (Looper.myLooper() == Looper.getMainLooper()) {
            super.post(event);
        } else {
            mainThread.post(() -> AndroidBus.super.post(event));
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-19T14:01:24.630

我做的很简单：

```
Handler handler = new Handler(Looper.getMainLooper());
        handler.post(new Runnable() {
            @Override
            public void run() {
                bus.post(event);
            }

        }); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-04-22T21:55:15.767

只需创建`BasicBus`with`ThreadEnforcer.NONE`即可从非主线程发布事件。提到`ThreadEnforcer.MAIN`的是完全相反（和默认），它只接受来自主线程的帖子。

# php - 使用会话将表单数据存储在数组中

> ID：15431776
> 
> 赞同：0
> 
> 时间：2013-03-15T11:53:56.897
> 
> 标签：php, arrays, session

我想使用会话将表单数据添加到数组中。
我该怎么做，请帮助我。
我的 HTML 表单是：

```
 <form action="#" method="post">
    Roll No:<input type="text" name="rollno" value="" id="rollno"  />
    <input type="submit" name="submit" value="Submit" />
    </form> 
```

我的PHP代码是：

```
 <?php
      session_start();
      $_SESSION['rollno'] = isset($_POST['rollno']);
      echo $_SESSION['rollno'];              
    ?> 
```

我想将卷号插入数组。

我有10个学生的记录。当我插入第一个学生卷号时，它会打印卷号，但是当我插入第二个学生卷号时，它会覆盖第一个学生记录。

我想在同一页面上显示所有 10 个学生卷号。
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:57:06.640

1.  在向页面输出任何内容之前开始会话，即在 html 代码之前

2.  使会话成为一个多维数组

3.  `isset`从中删除`isset($_POST['rollno']);`

    ```
    <?php
          session_start();
          $_SESSION['rollno'][] = $_POST['rollno'];
          print_r($_SESSION['rollno']);              
    ?> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:59:18.147

`$_SESSION['rollno']`应该是一个数组而不是一个简单的变量。

像这样的东西：

```
 <?php
  //Define somewhere $_SESSION['rollno'] as array. ONLY ONCE. Note that session must be started.
  session_start();
  if (!isset($_SESSION['rollno'])){
      $_SESSION['rollno'] = array();
  }

  if(isset($_POST['rollno'])){
       array_push($_SESSION['rollno'],$_POST['rollno']);
  }
  foreach ($_SESSION['rollno'] as $item){
        echo $item;  
  }   
  ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:03:35.090

我知道 ！

我们试试看 ：

```
<?php
session_start();
$_SESSION['rollno'] = Array();
$_SESSION['rollno'][] = $_POST['rollno']; 
$_SESSION['rollno'][] = $_POST['rollno'];
var_dump($_SESSION['rollno']);
?> 
```

你也可以从循环中访问它..祝你好运

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T11:57:20.203

```
session_start();
if(isset($_POST['submit'])){
  if(isset($_POST['rollno'])){
      $_SESSION['rollno'] = $_POST['rollno'];
      echo $_SESSION['rollno'];        
  } 
} 
```

首先检查是否提交了表单，然后设置滚动，如果是，将其分配给会话变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T11:57:59.517

差不多好了

```
<?php
  session_start();
  !isset($_SESSION['rollno']){$_SESSION['rollno']=array();}
  $_SESSION['rollno'][] = $_POST['rollno'];
?> 
```

另外，建议对某事设置操作：

```
echo("<form action={$_SERVER['PHP_SELF']} method='post'>"); 
```

有些人不喜欢使用 PHP_SELF，建议对其进行硬编码

# java - 带有 Trident 动画的 JScrollPane 出现错误？

> ID：15431778
> 
> 赞同：0
> 
> 时间：2013-03-15T11:53:58.333
> 
> 标签：java, swing, animation

我正在使用[**Trident Java Animation Library**](http://kenai.com/projects/trident/pages/Home)，因为我想要一个伪手风琴效果`JScrollPane`。

**这是我的 SSCCE：[http](http://pastebin.com/5xfBLmV5)**
*://pastebin.com/5xfBLmV5您需要下载[Trident JAR](http://kenai.com/projects/trident/downloads/download/version%201.3%20-%20stable/trident.jar)。*

# 问题

*   My`JScrollPane`有一个`JTextArea`.
*   我希望`JFrame`以最小化的文本视图打开。
*   A `JButton`，当单击时，正向或反向播放动画。
*   `JFrame using` 我在BorderLayout.SOUTH的底部添加了一个标签

`JScrollPane` **没有正确计算 的实际高度**，因此`JTextArea`文本被截断并且该区域不可滚动。

这是正在发生的事情：

# 前

![扩张前](../Images/b8f57a36d72c558a27a5b17ffd746707.png)

# 单击“显示详细信息...”后

![扩张后](../Images/72c6c8a1becf33371c7cd51d671b27f7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T20:16:30.977

基本上，使用正确的布局管理器并确保父容器无效应该会给你想要的结果。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.UUID;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;
import org.pushingpixels.trident.Timeline;
import org.pushingpixels.trident.ease.Spline;

public class ButtonFg extends JFrame {

    private JScrollPane jsp;

    public ButtonFg() {
        JButton button = new JButton("sample");
        button.setForeground(Color.blue);

        JPanel panel = new JPanel(new GridBagLayout());
        this.add(panel);

        String s = UUID.randomUUID().toString();
        for (int i = 0; i < 20; i++) {
            s += "\n" + UUID.randomUUID().toString();

        }
        final JTextArea textArea = new JTextArea(s);
        textArea.setLineWrap(true);
        jsp = new JScrollPane(textArea);

        final JButton label = new JButton("Show details...");
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.weightx = 1;
        gbc.fill = GridBagConstraints.HORIZONTAL;
        gbc.gridwidth = GridBagConstraints.REMAINDER;
        panel.add(label, gbc);

        gbc.weighty = 1;
        gbc.anchor = GridBagConstraints.NORTH;
        panel.add(jsp, gbc);

        gbc.weighty = 0;
        gbc.anchor = GridBagConstraints.SOUTH;
        panel.add(new JLabel("End of panel"), gbc);

        final Timeline rolloverTimeline = new Timeline(this);
        rolloverTimeline.addPropertyToInterpolate("animate", new Dimension(400, 15), new Dimension(400, 200));
        rolloverTimeline.setEase(new Spline(0.8f));

        rolloverTimeline.setDuration(1000);
        rolloverTimeline.setInitialDelay(50);

        label.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if (label.getText().toLowerCase().contains("show")) {
                    rolloverTimeline.play();
                    label.setText("Hide details...");
                } else {
                    rolloverTimeline.playReverse();
                    label.setText("Show details...");
                }
            }

        });

        rolloverTimeline.playReverse();

        this.setSize(400, 500);
        this.setLocationRelativeTo(null);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public void setAnimate(Dimension size) {
        jsp.setPreferredSize(size);
        jsp.getParent().revalidate();
        repaint();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new ButtonFg().setVisible(true);
            }

        });
    }

} 
```

# java - 变量声明 - 尽可能使用修饰符“final”。是的，类和方法是怎么回事？

> ID：15431781
> 
> 赞同：2
> 
> 时间：2013-03-15T11:54:06.730
> 
> 标签：java, eclipse, coding-style, formatting

我正在完成一个项目，它有 100-150 个类和...puff..很多很多方法。对于开发，我从一开始就使用了“在可能的情况下使用修饰符'final'”保存操作。但这让我的方法（以及我手动而不是使用助手创建的类）没有他们应得的 final/abstract 关键字。真的，我不想通过每个类和方法声明来手动完成它们。我确信有一种方法可以告诉 eclipse 以最严格的方式为我做这件事（即，如果一个类从未被实例化，则将其设置为抽象类，否则，如果从未扩展，则将其设置为 final，否则什么也没有，以及类似的东西 - 显然没有抽象部分 - 用于方法）。

我对吗？如果是这样，那是哪种方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:12:03.733

强制执行您的启发式方法可能会有问题。这可能是eclipse没有实现它们的原因。

将所有未在代码中扩展的类设置为`final`- IDE 如何知道它们是否打算在其他地方扩展？`final`仅当您确实打算禁止扩展时才制作它们。

这同样适用`abstract`- IDE 无法知道您是在编写一个框架，还是只是一个域模型`.jar`，其中永远不会有任何初始化。自动制作实体`abstract`可能会在以后击中你的脚。

变量很少出现这种情况，因此这种启发式 Eclipse 可以做到。

**编辑**我想我必须详细说明我的推理。

添加`final`修饰符对变量没有问题，因为它们大多是本地化的——它们存在于您控制的代码范围内。很少有可修改的变量对 3rd 方代码可见，并且可以在不调用方法的情况下进行修改。

如果`final`变量上的修饰符过多，它的影响将仅限于您的代码，您可能会很快注意到它。所以最坏的情况是你必须打开文件并删除修改器。

类的情况有所不同——其中许多是公共的，因此可以被 3rd 方代码访问。如果您将所有未在代码中实例化的类声明为`abstract`，您将有效地禁止其他人实例化它——这一次您甚至都不知道。所以这里最糟糕的情况是其他人将无法使用您的代码。这就是我不会自动化它的原因——大多数时候，您希望 3rd 方代码能够实例化您定义的类。

`final`然而，当一个类只有静态方法时，有一个关于何时创建类的启发式方法。一些工具，如 PMD 和 Checkstyle 知道这一点，并会告诉你。这个选项实际上很适合 eclipse，但不幸的是没有实现。

至于`final`默认设置类对象——andersoj 和许多其他人坚持“为继承而设计或禁止它”的原则——我认为它是由 Joshua Bloch 在他的“Effective Java”一书中介绍的。其他人则认为，默认情况下“密封”所有类将违反开放封闭原则。我倾向于后者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T12:21:27.243

在 final 类的情况下，你只需要标记类 final，你不需要标记每个方法......也许这有点帮助。与 kostja 的回答相反，我会说默认情况下将您的类标记为 final，并且只有在您明确设计用于扩展时才离开 final。无论如何，这应该是例外情况（“[更喜欢组合而不是扩展](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)”），除非您正在做一些专门的事情。

# java - 从字符串中删除正则表达式

> ID：15431782
> 
> 赞同：1
> 
> 时间：2013-03-15T11:54:07.010
> 
> 标签：java, regex, string

我有以下字符串：

`/home/user/Documents/something/`

我想删除`*/`它末尾的部分。在这种情况下，这是`something/`. 我怎样才能用java实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T11:55:42.513

尝试这个

```
str =    str.replaceAll("[^/]*/$",""); 
```

没有测试，应该可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T11:57:21.333

您不需要正则表达式来执行此操作，以下是使用字符串操作方法的非正则表达式解决方案：

```
 String s = "/home/user/Documents/something/";
    String sub =s.substring(0, s.lastIndexOf("/"));
    System.out.println(sub.substring(0,sub.lastIndexOf("/")+1)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:58:49.747

您可以使用以下代码。它将从您的 String 中删除最后一个过去：

```
 String str = "/home/user/Documents/something/";

    Pattern pattern1 = Pattern.compile("(/.+?/)(\\w+?/$)");
    Matcher matcher1 = pattern1.matcher(str);

    while (matcher1.find()) {
        System.out.println(matcher1.group(1));
    } 
```

# html - HTML：Chrome 保存密码

> ID：15431783
> 
> 赞同：4
> 
> 时间：2013-03-15T11:54:09.063
> 
> 标签：html, google-chrome, login, passwords

Firefox 和 IE 要求我保存密码。为什么 Chrome 不问我？我必须改变什么？

```
<body>
    <form action="" name="formlogin" id="formlogin">
        Username: <input type="text" name="username" id="username" />   
        Password: <input type="password" name="password" id="password"/> 
        <input type="submit" name="Submit" value="Submit" />
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-29T21:24:25.963

您的表单需要一个目的地。只需分配*action*。例如创建一个名为“test.html”的文件，然后：

```
<body>
    <form action="test.html" name="formlogin" id="formlogin">
        Username: <input type="text" name="username" id="username" />    
        Password: <input type="password" name="password" id="password"/> 
        <input type="submit" name="Submit" value="Submit" />
    </form>
</body> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T12:04:53.943

我相信这个问题已经在[这里解决了。](https://stackoverflow.com/questions/2891719/remember-passowrd-works-in-ff-but-not-in-ie-and-chrome)

```
<form name="formlogin" id="formlogin" action="" method="POST" onsubmit="handleFunction('action_login', document.getElementById('username').value, document.getElementById('password').value); return false;">
        Username: <input name="username" id="username" size="16" maxlength="16" value="" type="text">
        Password: <input name="password" id="password" size="16" maxlength="16" type="password">
        <input type="submit" name="submit" value="Submit">
</form> <!-- login_form --> 
```

# linux - 自动重新创建许多不同的链接到重命名的目录或文件

> ID：15431785
> 
> 赞同：1
> 
> 时间：2013-03-15T11:54:14.073
> 
> 标签：linux, perl, shell, solaris, ksh

我需要重命名我的 Linux/Solaris 机器中的很多目录和文件。有许多指向这些目录/文件的链接。

因此，首先我创建以下脚本以查找我要重命名的所有目录（例如`DOMAIN.city.country`等 `DOMAIN.type.country`）及其链接。

该脚本从文件文件中获取节点的旧名称和新名称`info.file`。每行的第一个字段代表旧目录名称，第二个字段代表新目录名称。

文件`find_and_recreate_link_to_new_dir.ksh`

```
while read -r line ; do 

[[ -z $line ]] && continue

name_old_dir=` echo $line | awk '{print $1}' `
name_new_dir=` echo $line | awk '{print $2}' `

find / -type l -exec ls -l 2>/dev/null '{}' \; |  perl -ne'BEGIN { $str = shift(@ARGV); }     print if /\Q$str\E/; ' $name_old_dir

done  < /tmp/test/info.file 
```

文件`/tmp/test/info.file`

```
 DOMAIN.city.country DOMAIN.world.country
    DOMAIN.city1.country DOMAIN.world1.country
    ... 
```

当我运行我的脚本时，我得到了这个输出

```
lrwxrwxrwx 1 root root 19 Mar 15 11:22 /var/test/info.domain2.com -> DOMAIN.city.country
lrwxrwxrwx 1 root root 19 Mar 15 11:22 /var/test/info.domain.com -> DOMAIN.city.country
lrwxrwxrwx 1 root root 19 Mar 15 11:22 /var/test/info.domain1.com -> DOMAIN.city.country
lrwxrwxrwx 1 root root 5 Mar 15 11:57 /var/test/DOMAIN.type.country -> mkdir
lrwxrwxrwx 1 root root 19 Mar 15 11:58 /var/test/info.tyep.com -> DOMAIN.type.country
... 
```

现在我需要在这个脚本中添加一个部分，该部分将重新创建指向新目录的当前链接。例如

```
/var/test/info.domain2.com -> DOMAIN.world.country 
```

请告知自动重新创建指向新目录的当前链接的最佳解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:38:09.030

如果我正确理解了这个问题，您希望根据来自`find_and_recreate_link_to_new_dir.ksh`.

所以如果你得到

```
lrwxrwxrwx 1 root root 19 Mar 15 11:22 /var/test/info.domain2.com -> DOMAIN.city.country 
```

您将要创建链接

```
/var/test/info.domain2.com -> DOMAIN.city.country 
```

在这种情况下，我建议您存储两个参数并`ln -s`使用它们调用。将数据保存在文件中可能会很有趣，比如说 FILE_WITH_NEW_DATA：

```
find / -type l -exec ls -l 2>/dev/null '{}' \; |  perl -ne'BEGIN { $str = shift(@ARGV); }     print if /\Q$str\E/; ' $name_old_dir >> FILE_WITH_NEW_DATA 
```

然后，给定字符串

```
lrwxrwxrwx 1 root root 19 Mar 15 11:22 /var/test/info.domain2.com -> DOMAIN.city.country 
```

您可以通过以下方式获取参数：

```
link = $(awk 'N=NF-2 {print $N}')
file = $(awk '{print $NF}') 
```

然后用 . 创建符号链接`ln -s $file $link`。

全部一起，

```
... 

find / -type l -exec ls -l 2>/dev/null '{}' \; |  perl -ne'BEGIN { $str = shift(@ARGV); }     print if /\Q$str\E/; ' $name_old_dir >> FILE_WITH_DATA

...

while read -r line ; do 

  [[ -z $line ]] && continue

  link = $(echo $line | awk 'N=NF-2 {print $N}')
  file = $(echo $line | awk '{print $NF}')

  # begin OPTION 1) we delete previous link
  rm $link
  ln -s $file $link
  # end OPTION 1)

  # begin OPTION 2) we force the link to be created and replace the older one
  ln -s -f $file $link
  # end OPTION 2)

done  < FILE_WITH_NEW_DATA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:06:17.480

您的脚本效率不高。对于每个要映射的文件，它运行`awk`两次（与下面的相比，这是一个小错误），然后`find`在整个机器上运行以寻找符号链接，并`ls`为每个符号链接运行，只选择旧名称出现的链接。

遍历整个文件系统非常慢；你只能负担得起一次。

我认为您应该使用更复杂的 Perl 脚本（因为您已经在使用 Perl）来完成大部分工作，但是您可以保留该`find`命令，尽管也可以使用 Perl 的 File::Find (core) 模块。

Perl 脚本将被赋予映射文件 ( `/tmp/test/info.file`) 作为参数，以及来自您的`find`命令的符号链接：

*   从文件中读取行
*   相应地重命名文件
*   还要在哈希中记录旧名称和新名称以进行映射

*   读取符号链接名称的标准输入

*   使用 readlink 读取符号链接的目标
*   如果链接匹配任何旧名称
    *   删除旧链接
    *   创建新链接

shell 脚本变为：

```
find / -type l -print | perl rebuild.links.pl /tmp/test/info.file 
```

Perl 脚本变成（警告——未经测试的代码）：

```
#!/usr/bin/env perl
use strict;
use warnings;

my %map;

die "Usage: $0 map-file\n" unless @ARGV == 1;

{
    open my $fh, '<', $ARGV[0] or die "Unable to open $ARGV[0] for reading\n";
    while (<$fh>)
    {
        chomp;
        next if m/^\s*$/;  # Skip blank lines
        next if m/^#/;     # Skip comment lines
        my($old, $new) = split /\s+/, $_;
        if (-f $old)
        {
            $map{$old} = $new;
            rename $old, $new or die "Failed to rename $old to $new\n";
        }
    }
    close $fh;
}

shift @ARGV;  # Lose the file name

# Read standard input for symlink names
while (my $source = <>)
{
     chomp $source;
     my $oldlink = readlink $_;
     MAP:
     for my $old (keys %map)
     {
         if ($oldlink =~ m%$old%)
         {
             my $target = $oldlink;
             $target =~ s%$old%$map{$old}%;
             die "Mapped name $target does not exist for symlink $source (old link $oldlink)\n"
                 unless -e $target;
             unlink $source or die "Failed to remove symlink $source\n";
             symlink $target, $source or die "Failed to create symlink $source for $target\n";
             last MAP;
         }
     }
} 
```

显示的代码编译 ( `perl -c`) 但尚未运行。将其视为我认为您的代码应该是什么样子的改进大纲。在考虑对其进行测试之前，您应该确保自己理解的问题包括：

*   此脚本处理时名称是否`/tmp/test/info.file`正确？它们是绝对名称，还是相对于当前目录的简单名称？
*   显示的映射会正常工作吗？

为了调试代码，我可能会：

*   `use constant debug => 1;`在顶部添加。
*   使用条件打印而不是执行`unlink`、、`symlink`等。`rename``if debug;`
*   `find`在子目录上运行命令，而不是`/`直到我确定我知道发生了什么。

小心——这是危险的东西。

# bash - sed，在匹配后删除一些行数

> ID：15431790
> 
> 赞同：0
> 
> 时间：2013-03-15T11:54:32.627
> 
> 标签：bash, sed

sed 可以在与 match 匹配后删除一些行数

```
sed -e /regexp/,+<number_of_lines> 
```

但是除了这第 10 行之外，如何删除

更新

好吧，这不是确切的问题。

匹配后需要删除第二、三、四、六行并匹配自身

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:57:13.190

如果你有`GNU sed`，你可以在比赛之后*（包括）*`sed '/regexp/,+10d' file`删除 10 行。您可以删除比赛之后*（包括）*第 4 行加上第 10 行。*`sed '/regexp/,+4d;10d' file`*

# ios - cellForRowAtIndexPath：StoryBoard 和 XIB 行为和单元缓存机制？

> ID：15431791
> 
> 赞同：-2
> 
> 时间：2013-03-15T11:54:35.767
> 
> 标签：ios, objective-c, uitableview

我是 iOS 开发的新手。我不明白 tableView 的行为。
为了测试它，我制作了两个简单的 tableView 应用程序，如果用户向下滚动到 tableView 的末尾，我在两种情况下都使用标准代码片段加载了 99999 行的 tableView。

**应用 1：TableViewWithStoryBoard cellForRowAtIndexPath：代码片段**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; // for StoryBoard

if (cell == nil)
{
    static int i;
    NSLog(@"New Cells created: %d ",++i);    

  cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

// Configure the cell...

cell.textLabel.text = [self.tableData objectAtIndex:indexPath.row];

return cell; 
```

}

**问题1：** 如果我删除

```
forIndexPath:indexPath from 
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; // for StoryBoard 
```

那么 StoryBoard 在模拟器中仍然可以正常工作吗？那为什么提供呢？

**问题2：** 为什么NSLog(@"New Cells created: %d",++i); 即使我向下滚动到 tableView 末尾的 99999 行，也永远不会打印？在什么情况下 NSLog 会打印一些值？

**应用 2：TableViewWithNib cellForRowAtIndexPath：代码片段**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
// for Nib File

if (cell == nil)
{

    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

// Configure the cell...

cell.textLabel.text = [self.tableData objectAtIndex:indexPath.row];

return cell; 
```

}

**问题3：** 如果我添加

```
forIndexPath:indexPath 
```

在 XIB 版本中，然后我的应用程序崩溃并引发异常？为什么会这样？

异常或错误：由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法使具有标识符 Cell 的单元格出列 - 必须为标识符注册 nib 或类或连接情节提要中的原型单元格”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:08:15.440

**问题 2：**`NSLog`在创建第一行时第一次打印（我已经使用示例项目进行了测试，并且在 iPad 上打印了 24 次），其余时间没有打印，因为单元格已经存在并重复使用它们.

**问题1&3：**在iOS 6`forIndexPath:indexPath`中`dequeueReusableCellWithIdentifier`是新的，您必须为标识符注册一个单元格`xib`或自定义`UITableViewCell`类，或者在情节提要中连接一个原型单元格才能使用它。

# ios - 如何创建半透明（后面有内容）UITabBar

> ID：15431795
> 
> 赞同：3
> 
> 时间：2013-03-15T11:54:50.060
> 
> 标签：ios, uitabbarcontroller, uitabbar

我将 UITabBar 子类化并覆盖 drawRect: 方法以使其透明（并使其看起来像我需要的那样）。我遇到的问题是添加到 UITabBarController 的视图没有覆盖整个屏幕，而是在底部上方 49 像素处结束，所以即使我有透明的标签栏，我也看不到它后面的东西。

有没有正确的方法可以在 UITabBarController 中设置 UIView 的大小以覆盖整个屏幕？

PS：我知道在标签栏后面显示内容不是一个好主意。我不想在那里显示任何内容，只是艺术，这是特定于每个视图的，需要通过标签栏可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:09:26.880

如果你想在后面有内容`UITabBar`，我看到两个选项：

*   不要使用`UITabBarController`- 这肯定会起作用，因为您可以根据需要定位视图，并且实现它并不*难*。

*   **尝试**关闭`clipsToBounds`视图并将一些视图放在他的范围之外。

    ```
    // UIViewController contained in UITabBarController:
    self.view.clipsToBounds = NO;
    UIView *viewBehindTabBar = [[UIView alloc] init];
    viewBehindTabBar.frame = CGRectMake(0, self.view.bounds.size.height,
                                        self.view.bounds.size.width, 49);
    // autoresizing mask, background color, ...
    [self.view addSubview:viewBehindTabBar]; 
    ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T12:46:40.027

您可以简单地创建一个 UITabBar 或 UITabBarController 类别并设置它`Alpha`。

就像是 ：-

```
@implementation UITabBarController (Translucent)
- (void)createImage
{
     [self.tabBar setAlpha:0.1];
}
@end 
```

您甚至可以在 Drawrect 中设置 Alpha。

# php - php在通过循环的数据之间集成广告？

> ID：15431797
> 
> 赞同：0
> 
> 时间：2013-03-15T11:54:52.430
> 
> 标签：php

只是我假设如何在循环获取的数据之间放置广告。例如 ：

```
<?php   
 $i=0;
    while($i<11){
    echo $i."<br/>";
    $i++;
    }
?> 
```

结果是：

```
 1
    2
    3
    4
    5
    6
    7
    8
    9
    10 
```

我想要这个结果：

```
 1
    2
    3
    4
    5
    -----my advertisement------
    6
    7
    8
    9
    10 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T11:57:30.210

尝试：

```
for ( $i = 0; $i < 10; $i++ ) {
  echo ($i + 1) + '<br/>';
  if ( $i == 5 ) {
    echo '-----my advertisement------';
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T11:59:04.383

尝试这个

```
 <?php   
$i=0;
while($i<11){

if($i == 6)
{
   'place your advertisement';
}
 echo $i."<br/>";
$i++;
}
?> 
```

# javascript - 如果我异步加载图像，Firefox 选项卡加载微调器将永远运行

> ID：15431798
> 
> 赞同：10
> 
> 时间：2013-03-15T11:54:57.957
> 
> 标签：javascript, jquery, firefox, twitter-bootstrap, carousel

所以我在我的数据库中获取图像 url，通过 AJAX 获取数据并像这样加载图像：（更新以显示所有步骤）

```
//GET urls from server
$.get("/homeBanners", null, function(data){
        $.each(data, function(i, banner){
          console.log(i); 
          generateSlide(banner, i);
        });

});

//Generate a slide for loaded URL
function generateSlide(banner, index){
   var li = $('<li>').attr('data-target', '#slideCarousel').attr('data-slide-to', index);
   var div = $('<div>').attr('class', 'item');
   if(index == 0){
     li.addClass('active');
     div.addClass('active')
   }
   li.appendTo('.carousel-indicators');
   div.appendTo('.carousel-inner');

   var img = $('<img />').attr('src', banner.image_url).on('load', function() {
        if (!this.complete || typeof this.naturalWidth == "undefined" || this.naturalWidth == 0) {
            alert('broken image!');
        } else {
            //div.append(img);
            img.appendTo(div);
            //$('#slideCarousel').before('<div id="nav"></div>').carousel().removeClass('hidden');
            $('#slideCarousel').carousel().removeClass('hidden');
        }
    });

 } 
```

代码运行良好，图像看起来很好。但在 Firefox 中，选项卡加载微调器永远不会停止。在 chrome 中，这个问题不会发生。

如果我评论附加行：

//img.appendTo(div);

或 Bootstrap Carousel 行：

```
> //$('#slideCarousel').before('<div id="nav">').carousel().removeClass('hidden'); 
```

微调器停止。所以我真的不知道为什么会这样。我很感激任何帮助。

更新：

它发生在没有缓存的第一次。我正在使用 Firefox 17。

轮播 HTML：

```
<div id="slideshow">
               <div class="container_12"><div id="nav"></div>
                 <div id="slideCarousel" class="grid_12 carousel slide hidden">
                   <ol class="carousel-indicators">
                      <!-- AJAX -->
                   </ol>
                   <!-- Carousel items -->
                   <div class="carousel-inner">
                     <!-- AJAX -->
                   </div>
                   <!-- Carousel nav -->
                   <a class="carousel-control left" href="#slideCarousel" data-slide="prev">&lsaquo;</a>
                   <a class="carousel-control right" href="#slideCarousel" data-slide="next">&rsaquo;</a>
                </div>

              </div> 
           </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T18:13:57.970

经过一些测试，似乎该`.on()`事件是罪魁祸首。使用从[这个问题](https://stackoverflow.com/questions/1977871/check-if-an-image-is-loaded-no-errors-in-javascript#answer-1978021)接受的答案，执行以下操作：

```
//Generate a slide for loaded URL
function generateSlide(banner, index){
   var li = $('<li>').attr('data-target', '#slideCarousel').attr('data-slide-to', index);
   var div = $('<div>').attr('class', 'item');
   if(index == 0){
     li.addClass('active');
     div.addClass('active')
   }
   li.appendTo('.carousel-indicators');
   div.appendTo('.carousel-inner');
   $('<img/>').error(function() { alert('broken image!'); })
              .attr('src', banner.image_url)
              .appendTo(div);
   //$('#slideCarousel').before('<div id="nav"></div>').carousel().removeClass('hidden');
   $('#slideCarousel').carousel().removeClass('hidden');
 } 
```

我还提供了一个显示损坏图像的演示：http: [//jsfiddle.net/dirtyd77/SLGdE/28/](http://jsfiddle.net/dirtyd77/SLGdE/28/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:56:24.957

您正在使用 WEBrick，可能存在问题，因为它还没有准备好用于制作，您应该[尝试](http://code.macournoyer.com/thin/)在`Gemfile`.

# excel - 如何在Excel VBA中删除多行而没有循环

> ID：15431801
> 
> 赞同：3
> 
> 时间：2013-03-15T11:55:06.490
> 
> 标签：excel, vba

我们经常被问到如何根据一个或多个列中的条件删除行，我们可以为此使用 SpecialCells 技巧吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-01-12T13:06:58.490

这将删除通过函数传递的行号 m 到 n

```
Sub Delete_Multiple_Rows (m as Integer, n as Integer) 

    Rows(m & ":" & n).EntireRow.Delete 

End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T11:55:06.490

首先，让我明确地说**，循环没有任何问题**——它们当然有自己的位置！

最近我们遇到了以下情况：

```
400000  |  Smith, John| 2.4   | 5.66|   =C1+D1
400001  |  Q, Suzy    | 4.6   | 5.47|   =C2+D2
400002  |  Schmoe, Joe| 3.8   | 0.14|   =C3+D3
Blank   |             |       |     |   #VALUE
Blank   |             |       |     |   #VALUE 
```

OP 想要删除 A 列为空白的行，但 E 列中有一个值。

我建议这是一个示例，我们可以使用 SpecialCells 和临时*错误列*来识别要删除的行。

考虑一下您可能会添加一个列 H 来尝试识别这些行；在该行中，您可以使用如下公式：

```
=IF(AND(A:A="",E:E<>""),"DELETE THIS ROW","LEAVE THIS ROW") 
```

现在，可以让该公式将错误放在我测试返回 True 的行中。我们这样做的原因是 Excel 的一个称为 SpecialCells 的功能。

在 Excel 中选择任何空单元格，然后在编辑栏中键入

```
=NA() 
```

接下来，按 F5 或 CTRL+G（**编辑**菜单上的*转到...*），然后单击*特殊*按钮以显示 SpecialCells 对话框。

 ***在该对话框中，单击“公式”旁边的单选并在下方清除复选框，以便仅选择**错误**。现在点击确定

Excel 应该选择了工作表中包含错误 ( **#N/A** ) 的所有单元格。

下面的代码通过在 H 列中创建一个公式来利用这个技巧，该公式将在您要删除的所有行中放置一个**#N/A ，然后调用 SpecialCells 来查找这些行，并清除（删除）它们......**

```
 Sub clearCells()
    '
    Dim sFormula As String
    '
    ' this formula put's an error if the test returns true, 
    ' so we can use SpecialCells function to highlight the
    ' rows to be deleted! 
```

创建一个公式，当公式返回 TRUE 时将返回**#NA**

```
sFormula = "=IF(AND(A:A="""",E:E<>""""),NA(),"""")" 
```

将该公式放在 H 列中，以查找要删除的行...

```
Range("H5:H" & Range("E65536").End(xlUp).Row).Formula = sFormula 
```

现在使用 SpecialCells 突出显示要删除的行：

```
Range("H5:H" & Range("E65536").End(xlUp).Row).SpecialCells(xlCellTypeFormulas, xlErrors).entirerow.select 
```

这行代码将通过使用**OFFSET**仅突出显示 A 列，以防万一您不想删除整行，而是要放入一些文本或清除它

```
Range("H5:H" & Range("E65536").End(xlUp).Row).SpecialCells(xlCellTypeFormulas, xlErrors).Offset(0, -7).select 
```

并且下面的代码行将删除整行**，因为我们可以:)**

```
Range("H5:H" & Range("E65536").End(xlUp).Row).SpecialCells(xlCellTypeFormulas, xlErrors).EntireRow.Delete shift:=xlup

' clean up the formula
Range("H5:H" & Range("E65536").End(xlUp).Row).Clear
'
End Sub 
```

顺便说一句，如果您真的想要一个**循环**，也可以使用循环:)

**还有一件事，在 Excel 2010 之前，有 8192 行的限制**（我认为是因为此功能*可能一直追溯到 8 位版本的 Excel*）

VBA 传奇人物 Ron de Bruin（我首先在他的网站上[了解到这种技术）对此有话要说](http://www.rondebruin.nl/specialcells.htm)

菲利普

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-16T06:46:26.253

或者，您可以使用自动过滤器：

```
Sub clearCells()
'
' Example code for StackOverflow post
'http://stackoverflow.com/questions/15431801/how-to-delete-multiple-rows-without-a-loop-in-excel-vba
'
Dim rngTable As Range
Dim ws As Worksheet
Dim StartCell As Range

Const ColumntoFilter1 As Integer = 1
Const FilterCriteria1 As String = "="
Const ColumntoFilter2 As Integer = 5
Const FilterCriteria2 As String = "<>"

Set ws = ActiveSheet
'Set the starting position (Top-left most position) of your data range
Set StartCell = ws.Range("A1")

'Turn off autofilter in case it's already active
ws.AutoFilterMode = False
'Define data table
Set rngTable = StartCell.CurrentRegion
'Filter and delete data
With rngTable
    .AutoFilter Field:=ColumntoFilter1, Criteria1:=FilterCriteria1
    .AutoFilter Field:=ColumntoFilter2, Criteria1:=FilterCriteria2
    .Offset(1, 0).EntireRow.Delete
End With

'Turn filters off again
ws.AutoFilterMode = False

Set rngTable = Nothing
Set StartCell = Nothing
Set ws = Nothing
End Sub 
```***

# windows-phone-7 - SelectionChanged 获取文本块文本/ID

> ID：15431803
> 
> 赞同：1
> 
> 时间：2013-03-15T11:55:07.100
> 
> 标签：windows-phone-7, listbox, selectionchanged, navigationservice

我有 som 列表框，我需要 som 帮助才能从 SelectionChanged 上的 x:Name="ThisID" 获取文本。

我做过类似 (sender as ListBox).SelectedItem 但除此之外，我不知道该怎么做。

```
<ListBox ItemsSource="{Binding}"  x:Name="ListBoxD" SelectionChanged="ListBoxD_SelectionChanged" toolkit:TiltEffect.IsTiltEnabled="True" Margin="10,0,0,0">
<ListBox.ItemTemplate><DataTemplate>
<StackPanel Orientation="Horizontal" Margin="0,0,0,10">
<Border Width="80" Height="80" VerticalAlignment="Top" Background="{StaticResource PhoneAccentBrush}" Margin="0,5,0,0" Padding="5,0,5,10">
    <TextBlock Text="{Binding DeliveryNumber}" Foreground="{StaticResource PhoneContrastBackgroundBrush}" VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="72" />
 </Border>
 <StackPanel x:Name="StackPanelD" Orientation="Vertical" Margin="10,0,0,0">
     <TextBlock x:Name="ThisID" Text="{Binding ID}" Visibility="Collapsed"/>
     <TextBlock Text="{Binding Name}"/>
     <TextBlock TextWrapping="Wrap" FontSize="23" FontWeight="Bold" Text="{Binding AddressLine}"/>                               
  </StackPanel>

</StackPanel></DataTemplate>
</ListBox.ItemTemplate>
</ListBox>

private void ListBoxDeliveryTo_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
NavigationService.Navigate(new Uri("/Page.xaml?ID=" + ID, UriKind.Relative));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:50:53.787

假设您`ListBox`绑定到类型为 的项目集合，`MyCustomItem`这些项目具有以下属性：`DeliveryNumber`, `ID`（`Name`我可以从您的 中得知`DataTemplate`）。

实际上，当`SelectionChanged`发生这种情况时，您可以直接检索被选中的项目：

```
MyCustomItem item = (MyCustomItem)lstItems.SelectedItem; 
```

然后，你可以得到它的名字。确保检查所选项目是否为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T07:47:35.010

嗨，如果你有这样的代码，让我们在 FirstPage.xamal 中试试这个

```
 <ListBox x:Name="FirstListBox" Margin="0,0,-12,0" ItemsSource="{Binding Items}" SelectionChanged="FirstListBox_SelectionChanged" >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                      <StackPanel>
                          <TextBlock Text="{Binding Data}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}" />
                      </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate></ListBox> 
```

在 Firtpage.xaml.cs

```
 private void FirstListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        NavigationService.Navigate(new Uri("/newmessage.xaml?selectedItem=" + FirstListBox.SelectedIndex, UriKind.Relative));
        FirstListBox.SelectedIndex = -1;
    } 
```

现在转到 Secondpage.xaml

在网格中添加这个

```
 <TextBox x:Name="textbox1" HorizontalAlignment="Left" Text="{Binding Data}" /> 
```

在 Secondpage.xaml.cs 添加这段代码

```
 int index = 0;
    protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {

        string selectedIndex = "";
        if (NavigationContext.QueryString.TryGetValue("selectedItem", out selectedIndex))
        {
            index = int.Parse(selectedIndex);
            DataContext = App.ViewModel.Items[index];
        }
        base.OnNavigatedTo(e);

    } 
```

# c - 在C中读取计算器的字符串输入

> ID：15431815
> 
> 赞同：1
> 
> 时间：2013-03-15T11:55:44.217
> 
> 标签：c, calculator

基本上我试图从用户那里获取一个字符串，格式为： 3 + 2 ，作为单个字符串，单独检查字符串的组成部分并进行计算。我已经有使用命令行输入的计算器程序，但是如果他们不使用命令行，我需要从用户那里获取和读取字符串输入

这就是我到目前为止所拥有的。请见鬼 :(

```
#include <stdio.h>
#include <math.h>

int main(int argc, char *argv[]) {
int num1, num2;
float ans;
char operator;
int i = 0, j = 0;
char s[100] = " ";
char s1[100], s2[100];

if (argc==4) {
sscanf(argv[1], "%d", &num1);
sscanf(argv[2], "%c", &operator);
sscanf(argv[3], "%d", &num2);

switch (operator) {
  case '+': ans = num1+num2;
    printf("%d %c %d = %.2f\n", num1, operator, num2, ans);
        break;
  case '-': ans = num1-num2;
    printf("%d %c %d = %.2f\n", num1, operator, num2, ans);
        break;
  case 'x':
  case 'X': ans = num1*num2;
        printf("%d %c %d = %.2f\n", num1, operator, num2, ans);
            break;
  case '^': ans = pow(num1, num2);
            printf("%d %c %d = %.2f\n", num1, operator, num2, ans);
            break;

  case '/': if (num2 == 0) {
      printf("Error! Division by Zero!\n");
    }
    else {
      ans = num1/num2;
      printf("%d %c %d = %.2f\n", num1, operator, num2, ans);
    }           
        break;
  default: printf("%c is not a valid operator!\n", operator);
  }}
 else
 if (argc==3) {
sscanf(argv[1], "%c", &operator);
sscanf(argv[2], "%d", &num1);

switch (operator) {
  case 'n':
  case 'N': ans = -num1;
        printf("-(%d) = %.2f\n", num1, ans);
        break;
  case 'a':
  case 'A': ans = fabs(num1);
        printf("|%d| = %.2f\n", num1, ans);
    break;

  case 's':
  case 'S': if (num1 < 0) {
      printf("Can't find square root of negative number\n");
    }
    else {
      ans = sqrt(num1);
      printf("Sqrt(%d) = %.2f\n", num1, ans);
    }
        break;
  default: printf("%c is not a valid operator!\n", operator);
} }

else if ((argc!=3) || (argc!=4)) {

printf("Enter the string you want to calculate: ");
gets(s);

while (s[i] != '\0') {

s[i] = argv[1];

i++;

} 

 while 
(s[i] != '\0') {

s[i] = argv[2];

i++;

}
 while 
 (s[i] != '\0') {

 s[i] = argv[3];

 i++;

 }}

}
else 
printf("Input Error!!!\n");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:10:33.673

首先，您应该使用它[`fgets`](http://en.cppreference.com/w/c/io/fgets)来读取输入，因为`gets`它容易受到缓冲区溢出的影响：

```
fgets(s, sizeof(s), stdin); 
```

然后你可以简单地使用`sscanf`来获取你需要的数据：

```
sscanf(s, "%d %c %d", &num1, &operator, &num2); 
```

# macos - 为卸载程序使用 OS X 产品构建

> ID：15431820
> 
> 赞同：6
> 
> 时间：2013-03-15T11:56:03.180
> 
> 标签：macos, productbuild, pkgbuild

我的产品安装程序使用 pkgbuild 和 productbuild 运行良好。但是，现在我正试图弄清楚如何使我的安装程序也可以用作卸载程序。我可以通过修改我的 distribution.xml 文件为用户显示卸载选择，如下所示：

```
<choices-outline>
    <line choice="install"/>
    <line choice="uninstall"/>
</choices-outline>
<choice id="install" visible="true" title="Install" description="Installation description goes here">
    <pkg-ref id="com.prosc.RemoteExecution.install.pkg">#installer.pkg</pkg-ref>
</choice>
<choice id="uninstall" visible="true" title="Uninstall" description="Uninstaller description goes here" start_selected="false">
    <pkg-ref id="com.prosc.RemoteExecution.uninstall.pkg">#installer.pkg</pkg-ref>
</choice> 
```

但是当他们选择卸载时，我需要我的安装后脚本以某种方式知道他们选择了哪个选项。我看不到安装后脚本有任何方法知道这一点 - 环境变量中没有任何内容可以表明这一点，也没有包含在传递给我的脚本的参数中。

我突然想到，我可以编写一个单独的卸载包，使用它自己的单独的安装后脚本，然后将它作为一个组件包含在我的整个产品中，但这似乎是很多额外的设置工作。

如果基于用户做出的安装选择存在细微的行为差异怎么办？我需要为每个选择制作一个单独的包组件吗？

是否有一个不需要额外组件包的好解决方案，或者我应该只制作单独的组件包以进行安装/卸载？

# java - 如何安装 JRE 或 JDK 以在 Windows 7 上运行 Android 开发人员工具？

> ID：15431822
> 
> 赞同：40
> 
> 时间：2013-03-15T11:56:04.683
> 
> 标签：java, android, android-emulator

我正在尝试在我的 Windows 7 计算机上安装 Android 开发人员工具，以便我可以使用 Android 模拟器来测试网站。

Android 开发者网站，“[设置 ADT 包](http://developer.android.com/sdk/installing/bundle.html)”：

> ADT Bundle 提供了您开始开发应用程序所需的一切……如果您还没有，请下载 Android ADT Bundle。
> 
> ...
> 
> ### 安装 SDK 和 Eclipse IDE
> 
> 解压缩 ZIP 文件（名为 adt-bundle-.zip）并将其保存到适当的位置，例如主目录中的“开发”目录。打开 adt-bundle-/eclipse/ 目录并启动 eclipse。就是这样！IDE 已经加载了 Android 开发者工具插件，并且 SDK 已准备就绪。

我的电脑，在我执行了这些确切的步骤之后：

> 必须有 Java 运行时环境 (JRE) 或 Java 开发工具包 (JDK) 才能运行 Eclipse。搜索以下位置后未找到 Java 虚拟机：
> C:\Development\adt-bundle-windows-x86_64-20130219\eclipse\jre\bin\javaw.exe
> javaw.exe in your current PATH

如何获得可以让我运行 Android 开发人员工具包的 Java 运行时环境或 Java 开发工具包？

（而且，对于奖励积分，如果下载旨在提供“开始开发应用程序所需的一切”，为什么它不包含在下载中？）

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-15T12:01:11.927

你可以去[这里](http://www.java.com/en/download/index.jsp)下载 Java JRE。

你可以去[这里](http://www.oracle.com/technetwork/java/javase/downloads/index.html)下载 Java JDK。

之后，您需要在 Windows 中设置环境变量：

1.  右键单击**我的电脑**
2.  单击**属性**
3.  转到**高级系统设置**
4.  单击**高级**选项卡
5.  点击**环境变量**

**编辑：**查看环境变量的屏幕截图

![在此处输入图像描述](../Images/18ac1d70e3dc88d7f71e5b9b88e0aa98.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-19T10:31:20.760

下载jre1.7.0_45，然后解压到Eclipse文件夹，将jre1.7.0_45文件夹重命名为jre，Eclipse就会运行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T12:00:51.817

你需要`jdk`从[这里下载并安装](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-12T03:46:20.413

如果使用win7 64位操作系统：

安装最新的 JDK 后，请确保将 jre 文件夹从安装位置 { `C:\Program Files\Java\jdk1.7.0_40`} 直接复制到 eclipse 文件夹中，因为即使是路径，它在 win7 上也没有任何作用。

疯狂的

编辑：

文件夹名称上的实际 jdk 版本号会随着新版本的发布而变化

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-12T03:51:23.913

您的问题是您`eclipse`运行的是 64 位，但您有 32 位`JRE`。所以请下载`JRE`64 位`windows`并让它安装在默认位置。最后将该路径添加到您的 PATH 变量中的 bin 。试试应该可以。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-26T10:26:08.823

Eclipse：创建java虚拟机失败-消息框

1.  用 Eclipse.exe 打开文件夹，找到 eclipse.ini 文件

2.  将 -vmargs 替换为您当前的 javaw.exe 真实路径

    ```
    -vm "c:\Program Files\Java\jdk1.7.0_07\bin\javaw.exe" 
    ```

    或者如果您只安装了 jre：

    ```
    -vm "C:\Program Files\Java\jre7\bin\javaw.exe" 
    ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-03T17:26:47.033

Java Runtime Environment JRE 或 Java Development Kit JDK 最可能的原因是它归 Oracle 而不是 Google 所有，如果您知道两家公司之间有一些历史，他们将需要重新分发协议。

幸运的是，在被 Oracle 收购之前，Sun Microsystems 开源 Java 和 MySQL 对我们这些小家伙来说是一个胜利……谢谢 Sun！

谷歌可能应该有一个警告说你可能还需要 JRE 或 JDK

# windows - 在excel工作簿中连续复制表格数据

> ID：15431826
> 
> 赞同：-1
> 
> 时间：2013-03-15T11:56:19.560
> 
> 标签：windows, windows-7, excel, vba

我有表格格式的数据，范围从 A2:O30

我需要通过单击宏按钮将这个表数据复制到 Q2:A33 等范围内

我用了这段代码

```
Sub Button1_Click()
  If Range("Q2").Value = "" Then
      Range("Q2:AE33").Value = Range("A2:O33").Value
  Else
      Range("Q2:A33" & ActiveSheet.Rows.Count).End(xlUp) _
      .Offset(0, 1).Value = Range("A2:O33").Value
  End If
End Sub 
```

它复制得很好，但是当我下次单击该按钮时，它会显示一个错误。从我们下次按下按钮时，它应该复制 AE 旁边的表格范围，即从 AG2:AU33

它应该通过单击按钮连续复制。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T14:08:26.057

您在 Else 语句中错误地定义了范围。此外，使用范围变量来节省不得不说`Range("A2:O33")`的所有时间 - 像这样：

```
Dim rngCopy as Range
Set rngCopy = Range("A2:O33")

Cells("A" & Activesheet.Rows.Count).End(xlUp).Offset(0, 1).Resize(rngCopy.Rows.Count, rngCopy.Columns.Count).Value = rngCopy.Value 
```

# memory-leaks - WP8 LongListSelector 内存泄漏

> ID：15431827
> 
> 赞同：3
> 
> 时间：2013-03-15T11:56:20.403
> 
> 标签：memory-leaks, windows-phone-8, longlistselector

我做了一个测试应用程序：

[https://dl.dropbox.com/u/16063542/TestImageMemory.zip](https://dl.dropbox.com/u/16063542/TestImageMemory.zip)

它由三个页面组成：

1.  起始页。

2.  使用 ListBox 显示图像列表的页面

3.  使用 LongListSelector 显示图像列表的页面

相同的图像，第 2,3 页上的相同 DataTemplate：

```
<DataTemplate>
                    <Grid Height="300">
                        <Image local:LowProfileImageLoader.UriSource="{Binding}" />
                    </Grid>
                </DataTemplate> 
```

我正在使用 LowProfileImageLoader，每个为 WP 开发任何东西的人都知道。

现在，我正在执行一个测试：

*   启动应用程序。

*   转到 ListBoxPage 并返回 20 次。

内存消耗不会增加并停留在 appx。50 mb 级别。

然后我对 LongListSelector 页面做同样的事情。

应用程序在第 13 次导航时崩溃。

有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:54:01.067

问题显然出在您的 LowProfileImageLoader 中。把它扔掉，一切都会好起来的。我刚刚检查了没有它的应用程序，并且 LongListSelector 页面上的内存消耗也没有超过 50 兆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:45:45.253

到目前为止，我从微软那里得到的唯一意见是：不要使用 WP8 LongListSelector。

# sql-server - 如何从 MSSQL 连接查询中的字段中获取表名？（mysql_field_table 等效）

> ID：15431830
> 
> 赞同：9
> 
> 时间：2013-03-15T11:56:31.953
> 
> 标签：sql-server, delphi, ado, tablename

我正在使用 Delphi 做一个查询管理器`ADO`，我需要知道查询将返回的所有字段，不管它们有多复杂和有多少连接。我想调用一个函数，该函数返回给我，将在特定查询中返回的所有字段，以及字段信息，例如该字段来自什么表。

在带有 php 的 mysql 中，我有命令`mysql_field_table`，在这个命令中我传递结果对象和字段索引，这个命令为我返回表名。

好吧，那是我的梦想，从查询中的字段索引中获取表名，例如：

```
SELECT * FROM TableOne Left Join Table2 ON Table2.MasterField = Table1.KeyField 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T12:19:17.927

您可以使用 a`TADODataSet`来获取`Recordset`，迭代`Fields`集合，并像这样获取表/字段名称：

```
for I := 0 to ADODataSet1.Recordset.Fields.Count - 1 do
begin
  TableName := ADODataSet1.Recordset.Fields[i].Properties['BASETABLENAME'].Value;
  FieldName := ADODataSet1.Recordset.Fields[i].Properties['BASECOLUMNNAME'].Value;
end; 
```

# algorithm - 中间平方法的一个很好的起始数字

> ID：15431834
> 
> 赞同：0
> 
> 时间：2013-03-15T11:56:42.187
> 
> 标签：algorithm, math

我想使用中间平方方法生成 10,000（一万）**个小数点后 6**位的大于 1（例如 785633）和小于 1（例如 0.434367）的起始数字。这两种情况是否有任何起始数字可以生成 10,000 个不同的数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:14:56.897

您通常需要一个相当大的数字作为中间方格，例如五十位左右。当您选择六位数时（它们可以是数字中间部分的任何部分），您可以将它们用作六位数或除以一百万并将它们用作十进制数。

您应该知道，middle-square 不再被认为是生成随机数的好方法。一个简单的线性同余生成器更快更好，并且还有许多其他类型的随机数生成器。

# jquery - 如何将样式应用于具有 jQuery 边框属性的表格？

> ID：15431850
> 
> 赞同：0
> 
> 时间：2013-03-15T11:57:18.967
> 
> 标签：jquery

我有 2 个表，并希望（使用 jQuery）将类：**border-width-1**添加到表的所有**td**元素，其中**边框**属性不为 0。在下面的示例中，此代码将添加类：**border-width-1到表****id="table-1"**中的 所有**td**元素

 **```
 Having these tables 
        <table border="1" id="table-1">
        <tr>
        <td>row 1, cell 1</td>
        <td>row 1, cell 2</td>
        </tr>
        </table>

           <table border="0" id="table-2">
            <tr>
            <td>row 1, cell 1</td>
            <td>row 1, cell 2</td>
            </tr>
            </table>

        After execution this would be the results: 
            <table border="1" id="table-1">
            <tr>
            <td class="border-width-1">row 1, cell 1</td>
            <td class="border-width-1">row 1, cell 2</td>
            </tr>
            </table> 
```

我不知道如何使用 jquery 定位元素属性。这就是为什么我不能开始编写函数的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:04:08.980

那是你的代码：

```
 jQuery('table[border!="0"] td').addClass('border-width-1'); 
```**

# javascript - if/else 语句中的语法错误

> ID：15431855
> 
> 赞同：0
> 
> 时间：2013-03-15T11:57:24.733
> 
> 标签：javascript, jquery, function, logic, syntax-error

我收到此代码的语法错误，但我不知道为什么。

```
$(".choose-one .monthly, .choose-one .yearly").live("click", function() {
    billing_selection();
});

function billing_selection() {
    if($(this).hasClass("yearly") {
        $(this).addClass("selected");
        $(".billing-options-hidden option:eq(1)").attr('selected', 'selected');
    } else {
        $(this).addClass("doSomething");
    }
} 
```

这是我的第一篇文章，请温柔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:57:54.307

添加缺少的括号：

```
// --------------------------v
if($(this).hasClass("yearly")) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:58:18.367

你右`missed`括号

```
 if($(this).hasClass("yearly"))
                               ^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:59:04.227

你没有`if`正确关闭

```
 function billing_selection() {
    if($(this).hasClass("yearly") ){
        $(this).addClass("selected");
        $(".billing-options-hidden option:eq(1)").attr('selected', 'selected');
    } else {
        $(this).addClass("doSomething");
    }
} 
```

# ios - 我必须对从不同帧的循环生成的单个 UIButton 执行切换

> ID：15431857
> 
> 赞同：0
> 
> 时间：2013-03-15T11:57:25.260
> 
> 标签：ios, loops, uibutton, toggle

在我的 iOS 应用程序中，我必须根据按钮单击更改图像。我必须对从不同帧的循环生成的单个 UIButton 执行切换

如果我对单个按钮执行操作，它工作正常，如果我对多个按钮执行操作，则图像没有按照按钮操作正确更改

这是我的按钮

```
btnFullScreen = [[UIButton alloc] init];
    [btnFullScreen setBackgroundImage:[UIImage imageNamed:@"open icon.png"] forState:UIControlStateNormal];
    [btnFullScreen setFrame:CGRectMake(self.view.frame.size.width-30,8,16,14)];
    [btnFullScreen setBackgroundImage:[UIImage imageNamed:@"close icon.png"] forState:UIControlStateSelected];
    [btnFullScreen addTarget:self action:@selector(showPopUp:) forControlEvents:UIControlEventTouchUpInside];
    btnFullScreen.autoresizingMask=UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleBottomMargin;
    [self.view addSubview:btnFullScreen]; 
```

这是我的按钮操作代码

```
-(void)showPopUp:(id)sender{
if ([sender isSelected]) {
    [sender setImage:[UIImage imageNamed:@"open icon.png"] forState:UIControlStateNormal];
    [sender setSelected:NO];
}else {
    [sender setImage:[UIImage imageNamed:@"close icon.png"] forState:UIControlStateSelected];
    [sender setSelected:YES];
}
[self.parent.parent addPopOversExcept:self.parent]; 
```

}

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:31:10.380

我以前在我的一个应用程序中做过这个。
我在每个 tableview 单元格中创建按钮。

因此，将此代码作为`Reference`.

1.具体方法。

```
- (void)methodName:(UIButton *)sender
 {
int i = [sender.titleLabel.text intValue];
NSNumber *numb;
if(i == 0)
{
    numb = [NSNumber numberWithBool:NO];
    sender.titleLabel.text = @"1";
    [sender setImage:[UIImage imageNamed:@"down.png"] forState:UIControlStateNormal];
    [sender setImage:[UIImage imageNamed:@"up.png"] forState:UIControlStateHighlighted];
}
else
{
    numb = [NSNumber numberWithBool:YES];
    sender.titleLabel.text = @"0";
    [sender setImage:[UIImage imageNamed:@"up.png"] forState:UIControlStateNormal];
    [sender setImage:[UIImage imageNamed:@"down.png"] forState:UIControlStateHighlighted];
}
} 
```

2.在UITabelview viewForHeaderInSection中以编程方式设置UIButton。

```
UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(240, 20, 30, 30)];

[button addTarget:self
           action:@selector(methodName:)
 forControlEvents:UIControlEventTouchDown];
button.tag = section;
if([[sectionsArray objectAtIndex:section] boolValue])
{
    [button setImage:[UIImage imageNamed:@"up.png"] forState:UIControlStateNormal];
    [button setImage:[UIImage imageNamed:@"down.png"] forState:UIControlStateHighlighted];
    button.titleLabel.text = @"0";
}
else
{
    [button setImage:[UIImage imageNamed:@"down.png"] forState:UIControlStateNormal];
    [button setImage:[UIImage imageNamed:@"up.png"] forState:UIControlStateHighlighted];
    button.titleLabel.text = @"1";
} 
```

# r - 从R中列标题中的字符串获取值

> ID：15431860
> 
> 赞同：-4
> 
> 时间：2013-03-15T11:57:36.557
> 
> 标签：r

我有一个如下所示的文本文件

```
DateTime               height0.1               height0.2
2009-01-01 00:00          1                     1
2009-01-02 00:00          2                     4
2009-01-03 00:00          10                    1 
```

显然这只是一个示例，实际文件包含更多数据，即包含大约 100 列，并且标题可以具有小数形式的值。我可以使用以下命令将文件读入 R：

```
dat <- read.table(file,header = TRUE, sep = "\t") 
```

其中文件是表的路径。这会在名为 dat 的工作区中创建一个 data.frame。我现在想从这个 data.frame 生成一个名为 'vars' 的变量，它是一个由列标题中的数字组成的数组（除了 DateTime 之外，它是第一列）。

例如，在这里我会有 vars = 1,2

基本上我想获取标题字符串中的数字，然后将其存储在一个单独的变量中。我意识到这对某些人来说非常容易，但任何建议都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:03:47.710

如果您的所有数字都在名称的末尾，例如，not like `h984mm19`，那么您可以使用删除除数字和标点符号之外的所有内容`gsub`并将其转换为`numeric`向量，如下所示：

```
# just give all names except the first column
my_var <- as.numeric(gsub("[^0-9[:punct:]]", "", names(dat)[-1]))
# [1] 0.1 0.2 
```

# wpf - WPF XCEED DataGrid 在一列中有多个属性

> ID：15431863
> 
> 赞同：2
> 
> 时间：2013-03-15T11:57:43.523
> 
> 标签：wpf, datagrid

我有一个有两个级别的集合的类。该软件是关于工资支付的。这个想法是由多个有偿员工组成的支付行为。每个员工都可以多次减薪。对象看起来像：

```
Payment -->Payment Object
  Date
  ID
  Employees: -->ObservableCollection of EmpPayment Objects
     Emp A   -->And EmpPayment Object
        Name
        TotalCut --> An Integer Readonly Property that sums the Cuts.
        Cuts   --> Collection of Cut object
           Cut1  --> Cut object 1
           Cut2  --> Cut object 2
     Emp B
        Name
        TotalCuts
        Cuts
           Cut1
           Cut2 
```

我正在使用超出 DataGrid。到目前为止一切顺利，除了我想使用 CellContentTemplate 在一列中显示两个值，即 Cuts 和 TotalCut。所以数据网格看起来像：

```
Employee | Cuts
Emp A    | [The Total Cut]
           Cut 1
           Cut 2
Emp B    | [The Total Cut]
           Cut 1
           Cut 2 
```

在剪辑栏，我想使用 Xceed DropDownButton 来显示总数，用户可以通过编辑下拉内容来编辑剪辑。到目前为止，我为员工 ObservableCollection 制作的 XAML：

```
<xcdg:DataGridControl x:Name="GridEmployees" ItemsSource="{Binding Employees}" AutoCreateColumns="False">
    <xcdg:DataGridControl.Columns>
        <xcdg:Column FieldName="Name" Title="Employee"/>

        <xcdg:Column FieldName="Cuts" Title="Cuts">
            <xcdg:Column.CellContentTemplate>
                <DataTemplate>
                    <xctk:DropDownButton Content="{Binding Path=TOTALCUT}">
                        <xctk:DropDownButton.DropDownContent>
                            <ListBox ItemsSource="{Binding}">
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBox Text="{Binding CutDescription}"/>
                                            <TextBox Text="{Binding Amount}"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
                        </xctk:DropDownButton.DropDownContent>
                    </xctk:DropDownButton>
                </DataTemplate>
            </xcdg:Column.CellContentTemplate>
        </xcdg:Column>

    </xcdg:DataGridControl.Columns>
</xcdg:DataGridControl> 
```

绑定到 Cuts ObservableCollection 效果很好，但不是 TotalCut。如何将 TotalCut [特意用上面所有大写字母写成] 绑定到同一列？使用两列是可能的，但不会很漂亮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T03:04:02.247

忘记 XCeed DataGridControl，欢迎使用标准 DataGrid。只需在那里使用 DataGridTemplateColumn 。

另一种选择是在 XCeed DataGridControl 中使用两列，这不是很漂亮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-05T12:04:09.237

您所要做的就是提供您自己的单元格编辑器和 CellTemplate，它们将绑定到相应的属性。这是我的工作解决方案：

```
 <xcdg:DataGridControl AutoCreateColumns="False" ItemsSource="{Binding Items}">
    <xcdg:DataGridControl.View>
        <xcdg:TableflowView ScrollingAnimationDuration="0" ContainerHeight="44"/>
    </xcdg:DataGridControl.View>
    <xcdg:DataGridControl.Resources>
        <DataTemplate x:Key="EditDataTemplate"  DataType="wpfApplication1:State">
            <StackPanel>
                <TextBox Text="{Binding Path=Name}"/>
                <TextBox Text="{Binding Path=Post}"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="ReadDataTemplate"  DataType="wpfApplication1:State">
            <StackPanel>
                <TextBlock HorizontalAlignment="Right" Text="{Binding Path=Name}"/>
                <TextBlock HorizontalAlignment="Right" Text="{Binding Path=Post}"/>
            </StackPanel>
        </DataTemplate>
    </xcdg:DataGridControl.Resources>
    <xcdg:DataGridControl.Columns>
        <xcdg:Column FieldName="Zip" Title="Zip"/>
        <xcdg:Column FieldName="Stat" Title="Zip2"
                     CellContentTemplate="{StaticResource ReadDataTemplate}">
            <xcdg:Column.CellEditor>
                <xcdg:CellEditor EditTemplate="{StaticResource EditDataTemplate}"/>
            </xcdg:Column.CellEditor>
        </xcdg:Column>    
    </xcdg:DataGridControl.Columns>
</xcdg:DataGridControl> 
```

和“数据对象”的代码隐藏：

```
public class User
{
    private string _zip;

    public string Zip
    {
        get { return _zip; }
        set
        {
            _zip = value;
            Stat = new State();
            Stat.Name = "stat: " + value;
        }
    }

    public State Stat { get; set; }
}

public class State
{
    public string Name { get; set; }
    public string Post { get; set; }
} 
```

[完整的解决方案代码](https://docs.google.com/file/d/0B6Tey4prC11RUkJPc3BsRFc0QXc/edit?usp=sharing "解决方案")

# eclipse - Aptana UI 主题

> ID：15431865
> 
> 赞同：7
> 
> 时间：2013-03-15T11:57:50.723
> 
> 标签：eclipse, user-interface, themes, aptana

我刚开始使用 Aptana，我很喜欢它。我喜欢默认的黑暗主题。

![适体](../Images/7c3491efc8459ac2a1aa7e0c7221e904.png)

只有一件事。注意编辑器是如何漂亮和黑暗的，但 UI 不是？显然，Aptana 是基于 Eclipse 的，所以我一直在网上浏览 Eclipse UI 的深色主题。

我发现这个问题有一个合适的答案：[Eclipse IDE for Java - Full Dark Theme](https://stackoverflow.com/questions/5053834/eclipse-ide-for-java-full-dark-theme)

当我尝试安装建议的主题之一时，出现错误：

```
Missing requirement: Eclipse Darker Theme 1.0.0.201302081116
(eclipse.themes.darker.feature.feature.group 1.0.0.201302081116)
requires org.eclipse.osgi.services 3.3.100' but it could not be found 
```

当然，我可以只安装依赖项，但我不知道去哪里找。

**我只想让我的 Aptana 完全变暗。我必须做什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T20:06:46.493

几个小时前我刚刚遇到了一个类似的问题，我想安装一个 Magento 插件。

在 Aptana 中，单击“帮助”菜单下的“安装新软件...”项。然后，您需要为一个 Eclipse 版本添加存储库 url。Juno 似乎是最新版本。

[http://download.eclipse.org/releases/juno/](http://download.eclipse.org/releases/juno/)

然后在过滤器中使用 osgi 类型来查看可用的内容。我猜那个不是“孵化”的人是你最好的选择。

干杯

# ubuntu - 什么是“qemu：不支持的系统调用：369”

> ID：15431867
> 
> 赞同：2
> 
> 时间：2013-03-15T11:57:52.027
> 
> 标签：ubuntu, build, arm, qemu

我在我的 Ubuntu 12.04 上使用 gbs build(arm architecture) 并且不断收到以下消息：

```
qemu: Unsupported syscall: 369 
```

这导致构建非常缓慢。知道这是什么，我该如何避免这种情况？

# javascript - 单击事件在 Jquery Mobile 中的 IE9 上不起作用

> ID：15431872
> 
> 赞同：-1
> 
> 时间：2013-03-15T11:58:03.203
> 
> 标签：javascript, jquery, jquery-mobile, button, click

我正在尝试在按钮上添加点击事件，但它不适用于 IE9。

```
$('#proceed_btn').click(function(){ alert('test');
        handleWelcomePage();
        $('a.prev').show();
    }); 
```

上面是JS代码，下面是按钮代码。

```
<button id="proceed_btn" type="submit" data-theme="a">Proceed</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:05:01.743

```
$(function() {
   $('#proceed_btn').on("change", function(){ 
        alert('test');
        handleWelcomePage();
        $('a.prev').show();
    });
}); 
```

试试上面的代码

# nhibernate - 查询单个对象时的 NHibernate Fetch

> ID：15431876
> 
> 赞同：0
> 
> 时间：2013-03-15T11:58:15.050
> 
> 标签：nhibernate, linq-to-nhibernate

我正在尝试优化 NHibernate 查询：

```
var profile = dc.Profiles.FirstOrDefault(p => p.IdProfile == idProfile); 
```

我希望它加载权利集合。我这样做了：

```
var profile = dc.Profiles.Fetch(x => x.Rights).FirstOrDefault(p => p.IdProfile == idProfile); 
```

结果与我的预期完全不同 - 而不是获得具有权限的单个配置文件，而是获得具有单个权限的单个配置文件！

我该如何解决？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-15T12:01:00.503

你可以这样使用

```
var profile = dc.Profiles.Where(p => p.IdProfile == idProfile).Select(x => x.Rights); 
```

# sql-server - 如何使用 C# 中的脚本将当前日期插入到我的 SQL Server 表中

> ID：15431878
> 
> 赞同：1
> 
> 时间：2013-03-15T11:58:26.210
> 
> 标签：sql-server

我有以下 SQL：

```
public const string application =
@"SET IDENTITY_INSERT Application ON
INSERT INTO Application(ApplicationId, Name, ModifiedDate) VALUES (1, 'xx', );
INSERT INTO Application(ApplicationId, Name, ModifiedDate) VALUES (2, 'xx', );
INSERT INTO Application(ApplicationId, Name, ModifiedDate) VALUES (3, 'xx', );
SET IDENTITY_INSERT Application OFF
DBCC CHECKIDENT( 'Application', RESEED )"; 
```

我刚刚在表中添加了一个 ModifiedDate 列，但由于它不是 NULL，所以它需要我更改 SQL。有人可以向我解释如何获取当前日期并将其插入到我的字符串中。我知道 C# 和 SQL 处理日期的方式有不同的格式。我需要转换成不同的格式吗？如果我只想使用日期“2000 年 1 月 1 日”，是否需要使用特定的格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:02:33.863

您不必在 C# 本身中“创建”日期。SQL Server 将处理查询，因此您可以在 sql 中简单地使用 getdate()。或者您可以更改表，将默认约束添加到您的列作为 getdate() 并在 sql 中跳过它。

# angularjs - ng-repeat 键不使用 JSON 数据显示

> ID：15431882
> 
> 赞同：2
> 
> 时间：2013-03-15T11:58:40.157
> 
> 标签：angularjs, angularjs-ng-repeat

我的服务抓取 JSON 数据并将数据成功返回到控制器，但是我在使用 ng-repeat 迭代键名时遇到问题。

我想将页面上的键名称显示为列表，因为它们是类别名称。

目前 ng-repeat 迭代正确的次数，但它不显示键名。

**控制器：**

```
app.controller('getNav', function(getJSONData, $scope) {
    var path = 'json/navigation';
    getJSONData.async(path).then(function(d) {
        $scope.data = d;    
    });
}); 
```

**服务：**

```
app.factory('getJSONData', function($http) {
  var getJSONData = {
    async: function(path) {
      var promise = $http.get(path).then(function (response) {
        return response.data;
      });
      return promise;
    }
  };
  return getJSONData;
}); 
```

**JSON数据：**

```
{ 
     "data": {
         "category_a": ["a", "b", "c", "d"], 
         "category_b": ["e", "f", "g"], 
         "category_c": ["h", "i", "j"]
     }, 
     "response": "Navigation"
} 
```

**看法：**

```
<ul ng-controller="getNav">
   <li data-ng-repeat="(key, value) in data.data">Category name is: {{key}}</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T12:51:59.993

好的，希望我能帮助将来遇到同样问题的人。我浪费了一天的时间把头发拉在这该死的东西上。从我的谷歌应用程序引擎中分离出文件后，我发现这些文件可以在简单的 MAMP localhost 上运行，但不能在谷歌应用程序引擎上运行。

经过一番搜索，我发现这是因为 Angular 和 DJango 使用 {{}} 的模板标签冲突。所以只需设置角度来使用不同的东西，问题就会得到解决，见这里：

[AngularJS 与 Django - 模板标签冲突](https://stackoverflow.com/questions/8302928/angularjs-with-django-conflicting-template-tags)

# java - 在 Lift 框架中添加更多页面和 .scala 类

> ID：15431883
> 
> 赞同：1
> 
> 时间：2013-03-15T11:58:44.010
> 
> 标签：java, eclipse, scala, lift

我正在使用升降框架工作。我从 github.com 下载了一个示例应用程序，我正在尝试在其中添加更多行。我在 src/main/webapp 中有一个 index.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><meta content="text/html; charset=UTF-8" http-equiv="content-type" />   <title>Home</title></head>
<body class="lift:content_id=main">
 <div id="main" class="lift:surround?with=default;at=content">
  <h2>Welcome to your project!</h2>
  <p>
<span class="lift:helloWorld.howdy">
  Welcome to your Lift app at <span id="time">Time goes here</span>
</span>
  </p>
 </div>
</body>
</html> 
```

我正在尝试在其中添加以下行

```
<span class="lift:helloWorld.newHowdy">
  Welcome to your Lift app at <span id="newTime"></span>
</span> 
```

我在代码片段文件夹的 helloworld 类中编写了 newHowdy 方法。但是在浏览器中显示一个错误，例如，错误处理片段：helloWorld.newHowdy 原因：未找到方法 XML 导致此错误：

我该如何解决这个问题？以及如何在片段中添加更多页面和 .scala 文件并提前从 html pages..thanx 访问它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:21:37.993

是的，当然，您可以拥有任意数量的类和 html-s。

您是否严格将 "howdy" 方法复制粘贴到 "newHowdy" ？

此外，标签应该一个接一个地放置，而不是放在里面。能否请您分享完整的新 HTML 代码和代码段？

# iphone - 如何使用 NSUrl 参数调整 NSString？

> ID：15431888
> 
> 赞同：0
> 
> 时间：2013-03-15T11:58:55.207
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

如您所知`URL`，在参数的单词之间不包含空格，我想传递 `MyString=@"hello every body"`给我的`URL`参数，就像这样

```
[@"http://www.site.com/index.php?contenu=" stringByAppendingString:MyString]; 
```

而且我不知道如何将 MyString 转换为 URL 的有效格式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:01:25.797

**尝试以下代码：**

```
NSString *urlString = [NSString stringWithFormat:@"http://www.site.com/index.php?contenu=%@", MyString];
NSURL *myURL = [NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

[另请阅读有关字符串格式说明符的官方文档。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:02:03.810

你为什么不以这种方式做整件事呢？

首先通过以下方式制作一个带参数的字符串：

```
NSString *stringURL = [NSString stringWithFormat:@"http://www.site.com/index.php?contenu=%@",MyString]; 
```

将字符串转换为 URL：

`NSURL *url = [NSURL URLWithString:MyString];`

现在您可以安全地使用该网址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:02:10.700

对于空间你应该使用 %20，为此使用 url 编码 [试试这个](https://stackoverflow.com/questions/8088473/url-encode-a-nsstring)

或使用 stringByReplacingPercentEscapesUsingEncoding

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:03:10.923

试试这样

```
NSString *encodedUrlString = [urlString stringByReplacingOccurrencesOfString:@" " withString:@"%20"]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T12:14:03.417

**您可以通过用%20**替换空间来尝试此操作

 **代码 ：：

```
NSString *reqString;
reqString = [NSString stringWithFormat:@"%s%@", Server_URL, your_paramater];
reqString = [reqString stringByReplacingOccurrencesOfString:@" " withString:@"%20"];
NSLog(@"... URL :::: %@", reqString); 
```

尝试一次，它可能对你有帮助。

谢谢。**

# php - 如何使用 IP 地址打开打印机连接？

> ID：15431895
> 
> 赞同：0
> 
> 时间：2013-03-15T11:59:24.627
> 
> 标签：php, printing

```
<?php

$fh = fopen($file_name.".pdf", "rb");
$content = fread($fh, filesize($file_name.".pdf"));
fclose($fh);

**$handle = printer_open("192.168.1.252\\Deskjet-D2600-series");**

printer_set_option($handle,PRINTER_MODE,"raw");
printer_write($handle,$content);
printer_close($handle);

?> 
```

我无法连接到 IP 打印机。请给我解决问题的方法。

# jquery - 单击外部按钮时将代码添加到CKeditor

> ID：15431897
> 
> 赞同：2
> 
> 时间：2013-03-15T11:59:45.923
> 
> 标签：jquery, textarea, ckeditor

这是场景：用户正在输入 CKeditor，就在编辑器之外有一个按钮，当按下 jQuery 时会启动 $(".button").click(function... 这会附加一些文本或任何由按钮到用户在 CKeditor 中输入的位置。

如果这是可能的，有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:56:06.363

可能且简单。

```
CKEDITOR.instances.editor1.insertText("Magical ponies await!")
CKEDITOR.instances.editor1.insertHtml("<hr/>"); 
```

获得对编辑器的引用是微不足道的（我希望如此）。例如，此示例在官方 CKEditor 演示中有效。

CKEditor 4 API 有很好的文档记录。请参阅[http://docs.ckeditor.com/#!/api/CKEDITOR.editor-method-insertHtml](http://docs.ckeditor.com/#!/api/CKEDITOR.editor-method-insertHtml)`insertHtml()`的文档

* * *

此外，您添加的内容必须在 CKEditor 的高级内容过滤器功能中允许。[请参阅http://docs.ckeditor.com/#!/guide/dev_advanced_content_filter](http://docs.ckeditor.com/#!/guide/dev_advanced_content_filter)上的文档

如果您不关心 ACF 并且只希望一切正常，您可以通过将配置值设置为`true`with来设置 ACF 配置以允许所有内容`config.allowedContent = true;`。

# html - 将样式限制为第一级元素

> ID：15431898
> 
> 赞同：0
> 
> 时间：2013-03-15T11:59:50.937
> 
> 标签：html, css

我正在使用以下样式和 html 代码列出一些项目

```
li.DC a > ins.jstree-icon{
height:22px; width:350px; border:#999999 1px solid; margin-bottom:2px; list-style:none; background-color:red; 
```

}

```
<li class="DC">
    <a><ins class="jstree-icon"></ins>HelloName</a>
    <ul>
        <li>
            <a><ins class="jstree-icon"></ins>HelloName</a>
        </li>
    </ul>
</li> 
```

我想将样式应用于 jstree-icon 的第一级出现，现在该样式也应用于第二级。任何人都可以建议相同的CSS吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:01:38.427

您需要更改选择器位置

您的选择器说的是标签的第一类名称`a`（无效），但您需要的是.`a``li`

```
li.DC > a ins.jstree-icon{
    height:22px; width:350px; border:#999999 1px solid; margin-bottom:2px; list-style:none; background-color:red;} 
```

**[演示](http://jsfiddle.net/R87Un/)**

# oracle - PL/SQL 将 Oracle 表假脱机到一个 csv 文件

> ID：15431901
> 
> 赞同：-1
> 
> 时间：2013-03-15T11:59:59.360
> 
> 标签：oracle, csv, plsql

是否可以将多个 Oracle 表假脱机到一个 csv 文件（在不同的工作表中）？我这样，怎么办？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T12:44:29.297

以下是如何使用 SQL*Plus 将一张表假脱机到一张 CSV。如前所述，每个表/查询都需要一个单独的 CSV - 这就是 CSV 和 Excel 的工作方式。

`HR.Employees`此示例从 Oracle示例表中假脱机一些表。表格如下所示：

```
SQL> desc hr.employees
 Name            Null?    Type
 --------------- -------- -------------
 EMPLOYEE_ID     NOT NULL NUMBER(6)
 FIRST_NAME               VARCHAR2(20)
 LAST_NAME       NOT NULL VARCHAR2(25)
 EMAIL           NOT NULL VARCHAR2(25)
 PHONE_NUMBER             VARCHAR2(20)
 HIRE_DATE       NOT NULL DATE
 JOB_ID          NOT NULL VARCHAR2(10)
 SALARY                   NUMBER(8,2)
 COMMISSION_PCT           NUMBER(2,2)
 MANAGER_ID               NUMBER(6)
 DEPARTMENT_ID            NUMBER(4) 
```

这是一个假脱机一些列的 SQL 脚本`HR`。它包括数字、字符和日期值：

```
-- SpoolEmployeesToCSV.sql
SET ECHO OFF
SET TERMOUT OFF
SET TRIMSPOOL ON
SET PAGESIZE 0
SET LINESIZE 2000
SET FEEDBACK OFF
SPOOL c:\Business\HREmployees.csv

SELECT
  TO_CHAR(Employee_ID) || ',' ||
  '"' || REPLACE(First_Name, '"', '""') || '"' ||
  ',"' || REPLACE(Last_Name, '"', '""') || '",' ||
  ',' || TO_CHAR(Hire_Date, 'MM/DD/YYYY') ||
  ',' || TO_CHAR(Salary)
FROM HR.Employees

SPOOL OFF 
```

这个脚本恰好被命名为`SpoolEmployeesToCSV.sql`. 要从 SQL*Plus 调用它，只需像这样：

```
SQL>@SpoolEmployeesToCSV.sql 
```

就这样。您可能需要尝试不同的日期和数字格式，但是关于假脱机到文件的主要内容是`SET`脚本顶部的所有命令，以及*所有*命令都在脚本中的事实 - 如果您尝试直接从 SQL*Plus 命令行执行它们，它们将在假脱机输出中结束。

[编辑] 还有一件事 - `SET LINESIZE 2000`. 您必须将值设置为大于预期的行大小。它可能会大很多，因为它`SET TRIMSPOOL ON`会将每条线切成一定的大小。

# java - 名称属性未在 Liferay Portlet 中呈现

> ID：15431909
> 
> 赞同：0
> 
> 时间：2013-03-15T12:00:16.833
> 
> 标签：java, request, liferay, liferay-6

我正在创建一个简单的 Liferay Portlet，但我无法在输入框中获取要呈现的名称。主要的 Portlet 类是：

```
public class MyHelloWorldPortlet extends GenericPortlet {

public void init() {
    editJSP = "/html/myhelloworldportlet/edit.jsp";
    viewJSP = "/html/myhelloworldportlet/view.jsp";
}

public void processAction(
        ActionRequest actionRequest, ActionResponse actionResponse)
    throws IOException, PortletException {

    String name = actionRequest.getParameter("name");
    PortletPreferences prefs = actionRequest.getPreferences();

    prefs.setValue("Name", name);
    prefs.store();

    actionResponse.setPortletMode(PortletMode.VIEW);
}

public void doEdit(
        RenderRequest renderRequest, RenderResponse renderResponse)
    throws IOException, PortletException {

    include(editJSP, renderRequest, renderResponse);
}

public void doView(
        RenderRequest renderRequest, RenderResponse renderResponse)
    throws IOException, PortletException {

    PortletPreferences prefs = renderRequest.getPreferences();
    String defaultValue = "";
    String name = prefs.getValue("NAME", defaultValue);

    renderRequest.setAttribute("ATTRIBUTE_NAME", name);

    include(viewJSP, renderRequest, renderResponse);
}

protected void include(
        String path, RenderRequest renderRequest,
        RenderResponse renderResponse)
    throws IOException, PortletException {

    PortletRequestDispatcher portletRequestDispatcher =
        getPortletContext().getRequestDispatcher(path);

    if (portletRequestDispatcher == null) {
        _log.error(path + " is not a valid include");
    }
    else {
        portletRequestDispatcher.include(renderRequest, renderResponse);
    }
}

protected String editJSP;
protected String viewJSP;

private static Log _log = LogFactoryUtil.getLog(MyHelloWorldPortlet.class); 
```

}

edit.jsp 文件是：

```
<form action="<portlet:actionURL/>" method="post" name="<portlet:namespace/>fm">
<label for="<portlet:namespace/>name">Name:</label>
<input name="<portlet:namespace/>name" type="text">
<br/><br/>

<input type="submit" value="Add Name">
</form> 
```

view.jsp 文件是：

```
<%
String name = (String)request.getAttribute("ATTRIBUTE_NAME");
%>

<p>Hello <%= name %>!</p> 
```

问题是视图上的输出始终是 Hello!。尽管用户在输入框中输入了一个名称，但没有将任何名称传递给输出。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:29:16.810

更改您的 doView 方法：

```
public void doView(
    RenderRequest renderRequest, RenderResponse renderResponse)
throws IOException, PortletException {

    PortletPreferences prefs = renderRequest.getPreferences();
    String defaultValue = "";
    // you need to recover the preference using the same name you used when you set it
    String name = prefs.getValue("Name", defaultValue);

    renderRequest.setAttribute("ATTRIBUTE_NAME", name);

    include(viewJSP, renderRequest, renderResponse); 
```

}

在我看来，您的其余代码都很好。

# c# - 是否可以查询接口属性？

> ID：15431912
> 
> 赞同：4
> 
> 时间：2013-03-15T12:00:24.597
> 
> 标签：c#, entity-framework, entity-framework-5

我有以下课程：

```
public class BicycleSellerListing : IUserName
{
    public UserProfile UserProfile { get; set; }

    /// <summary>
    /// IUserName interface property
    /// </summary>
    public string UserName
    {
        get
        {
            return UserProfile.UserName;
        }
    }
} 
```

界面：

```
public interface IUserName
{
    string UserName { get; }
} 
```

这个查询：

```
public static List<T> GetList<T>(string userName) where T : class, IUserName
{
    using (SqlUnitOfWork work = new SqlUnitOfWork())
    {
        return work.GetList<T>(row => row.UserName == userName)
            .ToList();
    }
} 
```

当我执行这个查询时，我得到以下异常：

> LINQ to Entities 不支持指定的类型成员“用户名”。仅支持初始化程序、实体成员和实体导航属性。

我明白为什么会出现异常，但我想知道是否有办法使用该界面执行此查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:07:08.850

回答你的问题：

> ```
> Is it possible to query on an interface property? 
> ```

是的。没问题。你得到的错误不是因为接口。

问题是您*无法*使用 Linq 2 实体查询不是映射的属性

[其他人](https://stackoverflow.com/questions/2241643/how-to-use-a-custom-property-in-a-linq-to-entities-query)也有这个问题。

底层表达式构建器无法区分映射到数据库的属性和未映射到数据库的属性。

这是一个问题，因为编译器无法帮助您。在 Linq to object 中，没有问题，所以编译器不会抛出任何错误/警告

您应该尝试明确此属性未映射 - 可能是通过前缀或包含所有“自定义”属性的嵌套类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:13:58.013

除了现有的答案之外，您还可以在内存中执行 where，但这意味着检索整个表。

通常我不会推荐这个。

```
public static List<T> GetList<T>(string userName) where T : class, IUserName
{
    using (SqlUnitOfWork work = new SqlUnitOfWork())
    {
        return work.GetList<T>()
            .AsEnumerable()
            .Where(row => row.UserName == userName)
            .ToList();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:30:58.527

一些解决方法：

*   您可以尝试在运行时确定底层实体类型，
    然后动态编译并调用使用该类型执行查询的通用方法。

*   可以使用 Expression 类在运行时手动组装此查询

*   您可以尝试使用 Entity SQL 查询语法而不是 Linq

# java - 计算一系列值的斜率

> ID：15431914
> 
> 赞同：9
> 
> 时间：2013-03-15T12:00:33.350
> 
> 标签：java, math, graphing

我有 2 个长度相等的数组。以下函数尝试使用这些数组计算斜率。它返回每个点之间的斜率的平均值。对于以下数据集，我似乎得到了与 Excel 和 Google Docs 不同的值。

```
 double[] x_values = { 1932, 1936, 1948, 1952, 1956, 1960, 1964, 1968,
            1972, 1976, 1980 };
    double[] y_values = { 197, 203, 198, 204, 212, 216, 218, 224, 223, 225,
            236 };

public static double getSlope(double[] x_values, double[] y_values)
        throws Exception {

    if (x_values.length != y_values.length)
        throw new Exception();

    double slope = 0;

    for (int i = 0; i < (x_values.length - 1); i++) {
        double y_2 = y_values[i + 1];
        double y_1 = y_values[i];

        double delta_y = y_2 - y_1;

        double x_2 = x_values[i + 1];
        double x_1 = x_values[i];

        double delta_x = x_2 - x_1;

        slope += delta_y / delta_x;
    }

    System.out.println(x_values.length);
    return slope / (x_values.length);
} 
```

输出

> 谷歌：0.755
> 
> getSlope(): 0.962121212121212
> 
> Excel：0.7501

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T12:30:15.857

我敢打赌，其他两种方法正在计算[最小二乘拟合](http://en.wikipedia.org/wiki/Least_squares)，而您不是。

[当我使用R](http://www.r-project.org/)验证这个猜想时，我也得到了大约 0.755 的斜率：

```
> summary(lm(y~x))

Call:
lm(formula = y ~ x)

Coefficients:
              Estimate Std. Error t value Pr(>|t|)    
(Intercept) -1.265e+03  1.793e+02  -7.053 5.97e-05 ***
x            7.551e-01  9.155e-02   8.247 1.73e-05 *** 
```

相关号码是`7.551e-01`。还值得注意的是，这条线的截距约为 -1265。

这是最小二乘拟合的图片：

![适合](../Images/3ada888234630940ae45e23bf92ca1e3.png)

至于在您的代码中实现这一点，请参阅[使用 java 计算最小二乘](https://stackoverflow.com/questions/14608998/compute-least-squares-using-java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T12:24:01.807

这个函数对你帮助不大，因为它没有考虑到各个线段的宽度。考虑将其应用于点 (0,0)、(1000,1000) 和 (1001, 2000) 与 (0,0)、(1,1) 和 (2, 1001) 之间的差异。这两种情况都有连续的斜率 1 和 1000，但它们看起来却大不相同。

您需要实现最小二乘法：[http](http://en.wikipedia.org/wiki/Least_squares) ://en.wikipedia.org/wiki/Least_squares以找到最接近您的数据集的线。

还有一条建议：永远不要抛出`java.lang.Exception`. 始终选择更具体的异常，即使您必须自己编写类。使用您的代码的人将需要处理`java.lang.Exception`，这会严重干扰他们的其他代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-24T10:37:23.137

编辑：如果可以的话，使用 Apache Commons Math 类[SimpleRegression 。](http://commons.apache.org/proper/commons-math/javadocs/api-3.6.1/org/apache/commons/math3/stat/regression/SimpleRegression.html)否则，这是一种计算斜率和截距的方法，应该产生与 excel 和 apache 相同的结果：

```
private static double intercept(List<Double> yList, List<Double> xList) {
    if (yList.size() != xList.size())
        throw new IllegalArgumentException("Number of y and x must be the same");
    if (yList.size() < 2)
        throw new IllegalArgumentException("Need at least 2 y, x");

    double yAvg = average(yList);
    double xAvg = average(xList);

    double sumNumerator = 0d;
    double sumDenominator = 0d;
    for (int i = 0; i < yList.size(); i++) {
        double y = yList.get(i);
        double x = xList.get(i);
        double yDiff = y - yAvg;
        double xDiff = x - xAvg;
        double numerator = xDiff * yDiff;
        double denominator = xDiff * xDiff;
        sumNumerator += numerator;
        sumDenominator += denominator;
    }

    double slope = sumNumerator / sumDenominator;
    double intercept = yAvg - (slope * xAvg);
    return intercept;
}

private static double average(Collection<Double> doubles) {
    return doubles.stream().collect(Collectors.averagingDouble(d -> d));
} 
```

资料来源： [Excel doc for SLOPE](https://support.office.com/en-us/article/SLOPE-function-11FB8F97-3117-4813-98AA-61D7E01276B9) [Excel doc for INTERCEPT](https://support.microsoft.com/en-us/office/intercept-function-2a9b74e2-9d47-4772-b663-3bca70bf63ef?ui=en-us&rs=en-us&ad=us)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T12:04:45.720

你应该除以`x_values.length - 1`。斜率的数量是成对的。

编辑：我评论中的 Wiki 示例显示了如何计算确定线性回归线斜率的 alpha 和 beta。

# android - 如何知道一个应用程序将在 android 中被卸载？

> ID：15431922
> 
> 赞同：9
> 
> 时间：2013-03-15T12:01:01.463
> 
> 标签：android, android-intent, intentfilter

我想实现类似 AppLock 应用程序正在做的事情。
如果在其设置中设置为锁定应用程序卸载/安装，那么在卸载任何应用程序时（精确地单击“**卸载**”按钮）会出现一个要求输入密码/模式的锁定屏幕。
只有在输入密码后，用户才被允许卸载应用程序。

**单击“卸载”按钮**时会得到什么意图（或任何东西，我认为这是一个意图但不确定）？

另外**我不想让它成为设备管理员，因为我提到的应用程序确实需要成为设备管理员。**
如果他们能做到，那就有办法了。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T04:52:17.710

我找到了一种方法。

1.  当您转到**设置**->**管理应用程序**->**单击任何应用程序时**。
    你会收到一个带有附加包名称的广播。

2.  当您单击该屏幕上的**卸载**按钮时，将始终打开一个活动 name **`com.android.uninstaller.UnistallerActivity`**。

所以这个问题的解决方案是上面提到的1和2步骤的组合方式。

当您获得第一步中提到的意图并且附加内容包含您的应用程序的包名称时，启动一个活动观察器`PackageManager`，您可以使用它获得最可见的活动及其包。
因此，现在如果启动了卸载程序活动，那么您可以确定用户想要卸载您的应用程序。

在那之后，您可以采取必要的行动来阻止他这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:58:30.580

try catching below intent in the broadcast reciver and fire up ur activity warning activity or processing what u want to carry on.

"android.intent.action.UNINSTALL_PACKAGE"

this intent will not given or broadcasted to same app which is about to get uninstalled

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-26T08:32:00.950

试试这个代码

请尝试通过 ActivityManager 获取任务中的 top Activity，并检查是否为卸载 Activity。

```
 ComponentName topActivity = mActivityManager.getRunningTasks(1).get(0).topActivity;
String packageName = topActivity.getPackageName();
String className = topActivity.getClassName();
Log.v(TAG, "packageName" + packageName);
Log.v(TAG, "className" + className);

if ("com.android.packageinstaller".equals(packageName)
    && "com.android.packageinstaller.UninstallerActivity".equals(className)) {
//Do anything you want here
} 
```

孤单

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T16:46:23.283

看起来这已经经历了很多变化。的默认广播`PACKAGE_REMOVED`无法按预期工作。我遇到了这个讨论，并没有真正实施它，但人们说它对他们有用。试试这个

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/aX5-fMbdPR8](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/aX5-fMbdPR8)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T12:06:40.400

改为使其成为设备管理员。这将自动阻止用户卸载它。如果用户尝试从“安全”>“设备管理员”列表中将其停用以将其卸载，则您的应用可以要求输入密码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T12:08:32.203

您可以拦截应用程序卸载的意图。只需将以下代码放入清单文件中：

```
<uses-permission android:name="android.permission.INSTALL_PACKAGES" />
<uses-permission android:name="android.permission.DELETE_PACKAGES" />
<uses-permission android:name="android.permission.CLEAR_APP_CACHE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.CLEAR_APP_USER_DATA" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".UninstallActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <action android:name="android.intent.action.DELETE" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="package" android:pathPattern="com.package.yourapp" />
        </intent-filter>            
    </activity>
</application> 
```

在此之后，您可以以某种方式处理您的应用程序将被删除，并调用包管理器卸载程序。

# r - 关于情节的一般问题

> ID：15431924
> 
> 赞同：8
> 
> 时间：2013-03-15T12:01:05.040
> 
> 标签：r, plot

使用`R`，我绘制了一个与[此类](https://stackoverflow.com/questions/15385063/easiest-way-to-plot-inequalities-with-hatched-fill)似的阴影图。我想做以下四件事`R`

1.  添加图例，如链接所示。
2.  用 delta 的希腊符号替换 x 轴名称
3.  提到情节上的各个交叉点。例如，在 x=0.75 处，几条曲线与 x 轴相交，我想将值放在该`0.75`点附近。
4.  如果你看到曲线，它们并不平滑。如何使它们光滑？即使是 excel 也能绘制出更平滑的曲线。

如何做到这一点？

这是情节。

![阴谋](../Images/eaa47c41aa0d86347dbd9956815a0193.png)

以下代码用于绘制绘图。

```
plot(NA,xlim=c(0,1),ylim=c(0,1),xlab="delta",ylab="K", xaxs="i",yaxs="i") # Empty plot
a1 <- curve((x+x^7-x^2-x^4)/(1+x-x^3-x^4), from=0, n=450000, add = TRUE) # First curve
a2 <- curve((x^2+x^3-x-x^5)/(x+x^2), to=0.9, n=45000, add = TRUE)
a3 <- curve((x+x^7-x^2-x^4)/(1+x-x^2-x^3-x^4+x^7),from=0, n=45000, add = TRUE)
a4 <- curve((x+x^8-x^3-x^5)/(x+x^8-x^3-x^5+1-x^4),from=0, to=0.9, n=45000, add = TRUE)
a5 <- curve((x+x^8-x^3-x^5)/(1+x-x^5-x^4),from=0, n=45000, add = TRUE)
a6 <- curve((x+x^2-x^4-1)/(x-x^4), to=0.84, n=45000, add = TRUE)
a7 <- curve((x+x^6-x^3-x^4)/(1+x-x^3-x^4), from=0.83 ,to=1,  n=45000, add = TRUE)
a8 <- curve((1+x^7-x^2-x^4)/(1+x^3-x-x^4), from=0.819, n=45000, add = TRUE)
a9 <- curve((x)/(1+x), n=45000,from=0.819, to =1, add = TRUE)

names(a1) <- c('xA1','yA1')
names(a2) <- c('xA2','yA2')
names(a3) <- c('xA3','yA3')
names(a4) <- c('xA4','yA4')
names(a5) <- c('xA5','yA5')
names(a6) <- c('xA6','yA6')
names(a7) <- c('xA7','yA7')
names(a8) <- c('xA8','yA8')
names(a9) <- c('xA9','yA9')

with(as.list(c(a1,a2,a3,a4,a5,a6,a7,a8,a9)),{

idA <- yA3 >=0
idB <- yA2 >=0 & yA2 <= yA4
idC <- yA4 >= yA2

idD <- yA5 >=0

idE <- yA6 >=0 & yA6 <= yA7
idF <- yA7 <= yA6

idG <- yA8 >=0 & yA8 <= yA9 
idH <- xA9 >= xA8 &  xA9 >0.8

idI <- xA1 >=0 & xA1 <= 0.755
idJ <- xA3 >=0 & xA3 <= 0.755

 polygon(x = c(xA3[idA],xA2[idB],rev(xA4[idC])),
        y = c(yA3[idA],yA2[idB],rev(yA4[idC])), 
        density=20, angle=90, border=NULL)

 polygon(x = c(xA5[idD],1,1,0),
        y = c(yA5[idD],0,1,1), 
        density=20, angle=0, border=NULL)

 polygon(x = c(xA6,xA7),
        y = c(yA6,yA7), 
        density=20, angle=45, border=NULL)

 polygon(x = c(rev(xA8[idG]),xA9[idH],1),
        y = c(rev(yA8[idG]),yA9[idH],0), 
        density=20, angle=135, border=NULL)

 polygon(x = c(xA1[idI],rev(xA3[idJ])),
        y = c(yA1[idI],rev(yA3[idJ])), 
        col="black", border=NULL)

 }) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T12:37:26.520

```
layout(matrix(c(1,2),nrow=1),
       width=c(4,1)) #Divide your plotting region in two inequal part
par(mar=c(5,4,4,0)) #Get rid of the margin on the right side
plot(NA,xlim=c(0,1),ylim=c(0,1),
     xlab=expression(delta),ylab="K", xaxs="i",yaxs="i") # Here's your delta
a1 <- curve((x+x^7-x^2-x^4)/(1+x-x^3-x^4), from=0, n=450000, add = TRUE)

...

par(mar=c(5,0,4,2)) #No margin on the left side
plot(c(0,1),type="n", axes=F, xlab="", ylab="") #Empty plot
legend("top",legend=c("1","2","3","4","5"), 
       density=c(20,20,20,20,NA), angle=c(90,0,45,135,NA), 
       col=c(NA,NA,NA,NA,"black"), bty="n", cex=1.5) 
```

![在此处输入图像描述](../Images/02ad6a24ab3bde9ab50155c34e64215c.png)

至于要标记的点，要么使用函数`text`（或`mtext`）“以编程方式”进行，要么`locator`以交互方式进行。

**编辑**：或者（正如我在评论中所说），这也可以将您的图例放在情节区域之外，并且可能更简单：

```
par(mar=c(5,4,4,8))
plot(NA,xlim=c(0,1),ylim=c(0,1),
     xlab=expression(delta),ylab="K", xaxs="i",yaxs="i") # Here's your delta
     a1 <- curve((x+x^7-x^2-x^4)/(1+x-x^3-x^4), from=0, n=450000, add = TRUE)

...

legend(1,1,legend=c("1","2","3","4","5"), 
   density=c(20,20,20,20,NA), angle=c(90,0,45,135,NA), 
   col=c(NA,NA,NA,NA,"black"), bty="n", cex=1.5, xpd=TRUE) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-15T12:24:54.697

传统的图形系统提供了 legend() 函数来为绘图添加图例或键。图例通常在绘图区域内绘制，并且相对于用户坐标定位。

该函数有很多参数，这里我们需要使用**角度**和**密度**参数来区分散列区域。

```
legend(0.5, 0.8, paste("region", 1:5),
       density=c(20,20,20,20,0),
       angle=c(90,0,45,135,0)) 
```

![在此处输入图像描述](../Images/3610630c599b76e480d706fdf428cec1.png)

# android - Android：在横向屏幕时，重新计算图像的大小

> ID：15431926
> 
> 赞同：1
> 
> 时间：2013-03-15T12:01:07.527
> 
> 标签：android, android-layout

我是 android 新手，目前手头有项目。我确实从 Google 和 StackOverflow 搜索了一些解决方案。我真的不知道该怎么做。

在项目中，我确实指定了持有人图像的大小，以便在列表视图渲染图像期间很好地显示。除此之外，我确实计算了列表视图中项目的大小，以便在滚动视图中扩展列表视图。但是当涉及到横向时，我希望重新计算我指定的大小，以便 listview 的子项（例如 textView）可以扩展。我在纵向中指定的图像也可以横向扩展（全屏）。

请帮忙！我需要采取哪些步骤来重新计算它？还是有其他解决方案？

下面是我的布局示例，横向图像的大小与纵向相同，即，正如我指定的那样。那么，一旦我改变视图模式，我可以调用哪些函数？谢谢。

```
 ___________________
|...................|  ________________________________
|.                 .| |      ....................      |
|.Image Full Screen.| |      .                  .      |
|.                 .| |      . Image could not  .      |  
|...................| |      .   full screen    .      |
|                   | |      ....................      |
| Portrait mode     | |                                |
|                   | |       Land scape mode          |
|                   | |                                |
|                   | |________________________________|
|___________________| 
```

# java - Java并发模式到任务的并行部分

> ID：15431931
> 
> 赞同：1
> 
> 时间：2013-03-15T12:01:14.233
> 
> 标签：java, design-patterns, concurrency

我从文件中读取行，当然是在一个线程中。行是按键排序的。

然后我收集具有相同键的行（15-20行），进行解析，大计算等，并将结果对象推送到统计类。

我想并行我的程序以在一个线程中读取，在多个线程中进行解析和计算，并将结果连接到一个线程中以写入 stat 类。

java7框架中是否有针对此问题的现成模式或解决方案？

我通过执行器实现多线程、推送到blockingQueue以及在另一个线程中读取队列，但我认为我的代码很糟糕并且会产生错误

非常感谢

更新：

我无法映射内存中的所有文件 - 它非常大

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:44:11.087

您已经记住了主要的方法类别。CountDownLatch、Thread.join、Executors、Fork/Join。另一种选择是 Akka 框架，它的消息传递开销在 1-2 微秒内测量，并且是开源的。但是，让我分享另一种通常优于上述方法并且更简单的方法，这种方法源于许多公司在 Java 中处理批处理文件加载。

假设您拆分工作的目标是表现，而不是学习。以从开始到结束需要多长时间来衡量的性能。然后，通常很难使其比内存映射文件更快，并且在已固定到单个内核的单个线程中处理。它也提供了更简单的代码。双赢。

这可能与直觉相反，但是处理文件的速度几乎总是受到文件加载效率的限制。不是处理的并行程度。因此，内存映射文件是一个巨大的胜利。一旦内存映射，我们希望算法在执行文件加载时与硬件的争用较低。现代硬件倾向于将 IO 控制器和内存控制器与 CPU 放在同一个插槽上；当与 CPU 本身中的预取器结合使用时，当从单个线程以有序方式处理文件时，会带来非常高的效率。这可能非常极端，以至于并行运行实际上可能要慢得多。将线程固定到内核通常会将内存绑定算法的速度提高 5 倍。这就是内存映射部分如此重要的原因。

如果您还没有，请尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T19:26:25.057

没有事实和数字，很难给你建议。所以让我们从头开始：

1.  您必须确定瓶颈。您真的需要并行执行计算还是您的工作受 IO 限制？尽可能避免并发，它可能会更快。
2.  如果计算必须并行完成，您必须决定您的任务必须是细粒度还是粗粒度。您需要测量您的计算和任务才能确定它们的大小。避免创建太多任务
3.  您应该有一个 IO 线程、几个工人和一个“数据收集器”线程。没有可变数据。
4.  一定不要因为任务提交而拖慢IO线程。否则，您应该使用更粗粒度的任务或使用更好的任务调度程序（谁说[破坏者](http://lmax-exchange.github.com/disruptor/)？）
5.  “数据收集器”线程应该是唯一改变最终状态的线程
6.  避免不必要的数据复制和对象创建。很多时候，在对大文件进行迭代时，瓶颈是 GC。上周，我用享元模式替换标准 scala 对象实现了 6 倍的加速。您还应该尝试预先分配所有内容并使用大缓冲区（页面大小）。
7.  避免磁盘寻道。

话虽如此，您应该是正确的轨道之一。您可以从使用适当大小的任务的 Executor 开始。任务写入数据结构，如您的阻塞队列，在工作人员和“数据收集器”线程之间共享。这种线程模型非常简单、高效且不易出错。它通常足够有效。如果您仍然需要更好的性能，那么您必须分析您的应用程序并了解瓶颈。然后你可以决定要走的路：优化你的任务规模，使用像disruptor/Akka这样更快的工具，改进IO，创建更少的对象，调整你的代码，购买更大的机器或更快的磁盘，迁移到Hadoop等。固定每个线程到核心（需要特定于平台的代码）也可以提供显着的提升。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:31:33.017

如果您在尝试时被要求拆分工作，我会这样做：

```
public class App {

    public static class Statistics {
    }

    public static class StatisticsCalculator implements Callable<Statistics> {

        private final List<String> lines;

        public StatisticsCalculator(List<String> lines) {
            this.lines = lines;
        }

        @Override
        public Statistics call() throws Exception {
            //do stuff with lines
            return new Statistics();
        }
    }

    public static void main(String[] args) {
        final File file = new File("path/to/my/file");
        final List<List<String>> partitionedWork = partitionWork(readLines(file), 10);
        final List<Callable<Statistics>> callables = new LinkedList<>();
        for (final List<String> work : partitionedWork) {
            callables.add(new StatisticsCalculator(work));
        }
        final ExecutorService executorService = Executors.newFixedThreadPool(Math.min(partitionedWork.size(), 10));
        final List<Future<Statistics>> futures;
        try {
            futures = executorService.invokeAll(callables);
        } catch (InterruptedException ex) {
            throw new RuntimeException(ex);
        }
        try {
            for (final Future<Statistics> future : futures) {
                final Statistics statistics = future.get();
                //do whatever to aggregate the individual
            }
        } catch (InterruptedException | ExecutionException ex) {
            throw new RuntimeException(ex);
        }
        executorService.shutdown();
        try {
            executorService.awaitTermination(1, TimeUnit.DAYS);
        } catch (InterruptedException ex) {
            throw new RuntimeException(ex);
        }
    }

    static List<String> readLines(final File file) {
        //read lines
        return new ArrayList<>();
    }

    static List<List<String>> partitionWork(final List<String> lines, final int blockSize) {
        //divide up the incoming list into a number of chunks
        final List<List<String>> partitionedWork = new LinkedList<>();
        for (int i = lines.size(); i > 0; i -= blockSize) {
            int start = i > blockSize ? i - blockSize : 0;
            partitionedWork.add(lines.subList(start, i));
        }
        return partitionedWork;
    }
} 
```

我创建了一个`Statistics`对象，它保存了完成工作的结果。

有一个`StatisticsCalculator`对象是 a `Callable<Statistics>`- 这会进行计算。它被赋予 a`List<String>`并处理行并创建`Statistics`.

`readLines`我留给你实施的方法。

在许多方面最重要的方法是`partitionWork`方法，它将`List<String>`文件中所有行的传入划分为`List<List<String>>`使用`blockSize`. 这基本上决定了每个线程应该有多少工作，`blockSize`参数的调整非常重要。好像每件作品只有一行，那么开销可能会超过优势，而如果每件作品有一万行，那么你只有一个工作`Thread`。

最后，操作的核心是`main`方法。这将调用读取然后分区方法。它产生一个`ExecutorService`线程数等于工作位数但最多 10 个的线程。您可以通过方法使其等于您拥有的内核数。

然后，该`main`方法将`List`所有`Callable`s 中的一个（每个块一个）提交给`executorService`. 该`invokeAll`方法阻塞，直到工作完成。

该方法现在遍历每个返回`List<Future>`并获取每个生成的`Statistics`对象；准备聚合。

之后不要忘记关闭它，`executorService`因为它会阻止您的申请表退出。

**编辑**

OP想要逐行阅读所以这里是一个修改过的`main`

```
 public static void main(String[] args) throws IOException {
    final File file = new File("path/to/my/file");
    final ExecutorService executorService = Executors.newFixedThreadPool(10);
    final List<Future<Statistics>> futures = new LinkedList<>();
    try (final BufferedReader reader = new BufferedReader(new FileReader(file))) {
        List<String> tmp = new LinkedList<>();
        String line = null;
        while ((line = reader.readLine()) != null) {
            tmp.add(line);
            if (tmp.size() == 100) {
                futures.add(executorService.submit(new StatisticsCalculator(tmp)));
                tmp = new LinkedList<>();
            }
        }
        if (!tmp.isEmpty()) {
            futures.add(executorService.submit(new StatisticsCalculator(tmp)));
        }
    }
    try {
        for (final Future<Statistics> future : futures) {
            final Statistics statistics = future.get();
            //do whatever to aggregate the individual
        }
    } catch (InterruptedException | ExecutionException ex) {
        throw new RuntimeException(ex);
    }
    executorService.shutdown();
    try {
        executorService.awaitTermination(1, TimeUnit.DAYS);
    } catch (InterruptedException ex) {
        throw new RuntimeException(ex);
    }
} 
```

这将逐行流式传输文件，并且在给定数量的行之后触发一个新任务以将行处理到执行程序。

`clear`完成后，您需要调用`List<String>`in ，`Callable`因为实例是它们返回`Callable`的 s 的引用。`Future`如果您在完成后清除`List`s ，这应该会大大减少内存占用。

进一步的增强可能是使用[这里](https://stackoverflow.com/questions/2001086/how-to-make-threadpoolexecutors-submit-method-block-if-it-is-saturated)的建议来阻塞直到有一个备用线程 - 这将保证如果您在 s 完成时清除s ，那么一次内存中的行`ExecutorService`数不会超过s 。`threads*blocksize``List``Callable`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:23:28.483

您可以使用 CountDownLatch [http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CountDownLatch.html](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CountDownLatch.html)

同步线程的启动和加入。这比在线程集上循环并在每个线程引用上调用 join() 更好。

# pointers - iOS：弹回parentView时指针丢失

> ID：15431935
> 
> 赞同：0
> 
> 时间：2013-03-15T12:01:25.990
> 
> 标签：pointers, ios6, nsmutablearray, automatic-ref-counting

我使用 ARC 为 iOS 6.1 编写代码，但我遇到的问题是 nsmutablearray 中的对象“丢失”了。我将更详细地解释它：

1.  有一个父视图，它有一个 NSMutableArray 应该保存一些对象（地址）
2.  每次我点击按钮时，数组的数据都会用 NSLog 显示，然后导航控制器推送到 ChildView
3.  childview 生成一个新的地址对象

如果我这样做然后按下视图中的后退按钮并想尝试相同的情况（再次按下按钮），则数组中的数据将丢失并且我得到一个 EXC_BAD_ACCESS

我的假设：当我回到 parentView 时，ARC 会释放第二个视图及其中的所有内容。但是我的地址对象将从数组中引用，因此该对象的 ARC 计数器不应为 0。

谁能帮我？这是具体的代码

父视图控制器 h：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
@property (nonatomic, strong) NSMutableArray *adresses;
@property int count;
-(void)goFurther;
@end 
```

ParentViews 控制器 m:

```
#import "ViewController.h"
#import "SecondViewController.h"
#import "Address.h"

@interface ViewController ()
@end

@implementation ViewController

- (void)viewDidLoad
{
    self.title=@"First View";
    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithTitle:@"Add address" style:UIBarButtonItemStylePlain
                                                                 target:self action:@selector(goFurther)];
    [self.navigationItem setLeftBarButtonItem:addButton];
    self.adresses=[[NSMutableArray alloc] init];
    self.count=0;
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void) goFurther{
    for (Address *a in self.adresses) {
        NSLog(@"Adresse:");
        NSLog(a.street);
        NSLog(a.door);
    }
    self.count++;
    SecondViewController *second=[[SecondViewController alloc]initWithView:self];

   [self.navigationController pushViewController:second animated:true];
}

@end 
```

ChildViews 控制器 h：

```
#import <UIKit/UIKit.h>
#import "ViewController.h"

@interface SecondViewController : UIViewController
@property ViewController * viewCon;
-(id) initWithView: (ViewController*) view;
@end 
```

ChildViews 控制器 m:

```
#import "SecondViewController.h"
#import "Address.h"

@interface SecondViewController ()

@end

@implementation SecondViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

-(id) initWithView: (ViewController*) view{
    self = [super init];
    self.viewCon=view;
    Address *a=[Address alloc];
    a.street=[NSString stringWithFormat:@"Street %d", self.viewCon.count];
    a.door=@"Door";
    [self.viewCon.adresses addObject: a];
    return self;
}

- (void)viewDidLoad
{
    self.title=@"Second View";
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T20:15:16.283

在关闭子视图之前，您必须将数据发送回父视图。

`ChildControllerDelegate`在您的子控制器`.h`文件中声明一个@protocol（例如，称为），`didDismissWithData:`并使用适合您的某种数据类型（可能是字符串或字典）的方法。让父视图控制器符合协议。创建一个名为`delegate`类型的子的@property`id<ChildControllerDelegate>`

然后在解雇孩子之前，打电话给

```
[self.delegate didDismissWithData:newData]; 
```

在父控制器中，处理此消息并保存您的新地址。

# xml - 带有属性的 XML 模式限制

> ID：15431937
> 
> 赞同：4
> 
> 时间：2013-03-15T12:01:29.207
> 
> 标签：xml, xsd

在 XML Schema 中，如何使元素`Age`必须`restriction`允许写入最大值为 10 和最小值为 1 的整数，在元素内部`Age`但元素也`Age`必须具有属性？

```
<xsd:element name="Age">
  <xsd:complexType>
here i want to have restriction to control max and min value inside Age element
    <xsd:attribute name="type" type="xsd:string" use="required" />
  </xsd:complexType>
</xsd:element> 
```

没有警告的 XML 代码

```
<Age type="sth">
 5 
</Age> 
```

带有警告的 XML 代码

```
<Age type="sth">
 22
</Age> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T12:50:10.817

这被称为“内容简单的复杂类型”。这是一个例子：

```
<xs:complexType>
  <xs:simpleContent>
    <xs:extension base="one-to-ten">
      <xs:attribute name="type" type="xs:string" use="required"/>
    </
  </
</

<xs:simpleType name="one-to-ten">
  <xs:restriction base="xs:integer">
    <xs:minInclusive value="1"/>
    <xs:maxInclusive value="10"/>
  </
</ 
```

# c# - 在使用不使用 IoC 的库的应用程序中使用 IoC

> ID：15431938
> 
> 赞同：1
> 
> 时间：2013-03-15T12:01:29.770
> 
> 标签：c#, inversion-of-control, ninject, console-application, service-locator

我目前正在使用一个库（SuperWebSocket），它是一个 websocket 服务器库，它使用一个引导程序，它知道从配置文件中加载哪些实例。我已经为此实现了一个引导类（但是没有使用 IoC 加载实例）。来自该服务器的命令也是从程序集反射加载的。我想将此服务器与使用 IoC 的 DAL 和服务层结合使用。**我的主要问题是我无法找到一种方法将这个控制台应用程序（服务器）和与 lib 的合作放在 IoC 场景中，而不必最终使用 ServiceLocator。**

通常内核（Ninject）应该位于组合根（看起来是许多周围的最佳实践..），在这种情况下这是不可能做到的，或者至少我没有找到为什么我在这里。这些命令也是从程序集反射加载的。我可以实现一个 CommandLoader 但这仍然是一个问题，因为它们都继承自同一个接口（可能是多重绑定？）。我可以为它们中的每一个制作自定义界面，但我仍然找不到自动加载它们的方法。即使我找到了加载它们的方法，我仍然必须能够从不容易做到的属性中获取服务。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T22:47:35.190

如果我正确理解了您的问题，那么图书馆就是完成所有工作的入口点。在这种情况下，它取决于框架要做什么。以下是您可以做的一些事情，第一件事是首选：

1.  检查库并找到一些方法来挂钩框架以拦截对象的创建。
2.  `kernel.Inject(this)`在库创建对象后调用。看看`Ninject.Web`扩展名。在那里我们添加了一些基类，例如`NinjectWebPage`for `WebPage`。这个新的基类在创建后调用 kernel.Inject。现在可以从该基类派生新网页，并使用属性注入来获取依赖项。
3.  使用`ServiceLocator`库创建的对象中的模式。但就在这个层面。任何更深的东西都应该使用依赖注入。

# .net - 用户未通过身份验证

> ID：15431939
> 
> 赞同：1
> 
> 时间：2013-03-15T12:01:33.967
> 
> 标签：.net, silverlight, authentication, web-config

我在同一主机上有 2 个 Silverlight 应用程序，例如：

> [http://website.com/APP1](http://website.com/APP1)
> 
> [http://website.com/APP2](http://website.com/APP2)

我可以登录到他们每个人。但是在此之后，当我尝试打开任何 TAB/MENU/POPUP 时，我遇到了这个错误：

> 用户未通过身份验证

我猜这是因为cookie和会话而发生的。

以防万一我会放`web.config`零件...

```
 <authentication mode="Forms"  >
      <forms timeout="50000000"/> </authentication>
      <sessionState mode="InProc" timeout="15" cookieName="App2"/> 
```

任何线索如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:56:08.720

好的..这是一个解决方案。只是使用不同的`name`.

```
<authentication mode="Forms"  >
      <forms name="App1" timeout="50000000"/> </authentication> 
```

而且我们也不需要

```
<sessionState mode="InProc" timeout="15" cookieName="App2"/> 
```

就是这样！

# iphone - 通过命令行启动 iPhone 模拟器

> ID：15431947
> 
> 赞同：4
> 
> 时间：2013-03-15T12:01:54.270
> 
> 标签：iphone, ios-simulator

我可以通过以下命令从命令行启动 iPhone 模拟器：

`/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone Simulator.app/Contents/MacOS/iPhone Simulator -SimulateApplication /TestBuild/testApp.app`

模拟器启动但退出并显示“模拟应用程序退出”消息

有谁知道如何解决这个问题？请帮助提前谢谢。

# php - 自动提交表单和 MYSQL 重新查询

> ID：15431952
> 
> 赞同：-1
> 
> 时间：2013-03-15T12:02:11.840
> 
> 标签：php, jquery, mysql, ajax

我一直在使用此代码在我的网站上显示一些推荐。

这是到目前为止的代码：

```
// Select testimonials from database 
$q = "SELECT testimonial, city_name, name, web_address, image_name, membership_type
        FROM testimonials 
        INNER JOIN city ON city.city_id = testimonials.city_id
        ORDER BY date_added DESC LIMIT $start, $display";

$r = mysqli_query($dbc, $q); 

if ( $records >= 1 ) {

    while ( $row = mysqli_fetch_array( $r, MYSQLI_ASSOC)) {
        $testimonial = $row['testimonial'];
        //echo $testimonial;
        $mytestimonial = nl2br($testimonial);
        $city               = $row['city_name'];
        $name               = $row['name'];
        $url                = $row['web_address'];
        $imageName      = $row['image_name'];
        $type               = $row['membership_type'];

        echo '<div class="testimonial-row">
                    <div class="testimonial-image">
                        <img src="'.UPLOAD_DIR.$imageName.'" />
                    </div>
                    <div class="testimonial">
                        <h2>'.$name.'</h2>
                        <h3>';
                        if($type==1){
                            echo 'A teacher';
                        }elseif($type==2){
                            echo 'An Institute';
                        }elseif($type==3){
                            echo 'A Student';
                        }
                        echo " from <strong>$city</strong></h3>
                        <blockquote>$mytestimonial</blockquote>
                        <p class='user-url'><a href=''>$url</a></p>
                    </div>                  
                </div>";    
    }
} else {
    echo "There is no any testimonial to display at this time. Please try again later.";
} 
```

运行上述代码后，我可以显示我的所有推荐。我有 3 种不同类型的推荐，目前在我的页面中显示所有类型的推荐。

现在我将使用一个选择框来根据其类型过滤和显示它们的解决方案。

这是我的选择框：

```
<select class="select" name="type">
    <option value="1">Tutor</option>
    <option value="2">Institute</option>
    <option value="3">Student</option>
</select> 
```

从选择框中选择一个选项时，我的过滤应该发生在使用所选类型重新查询我的原始查询时。我得到了一个带有 jquery 显示/隐藏功能的解决方案，但它与所需的结果不匹配。

注意：我不能在这个选择框上使用提交按钮。这就是为什么我正在寻找 Ajax 或 Jquery 的解决方案。

谁能告诉我这可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:20:03.570

这可能是解决方案......像这样传递你的价值：

```
 <select name="jumpMenu" class="sort-by-select" id="jumpMenu" onchange="MM_jumpMenu('parent',this,0)">
                      <option value=""> Select type </option>
                      <option value ="yourpage?type=1">Tutor</option>
                      <option value ="yourpage?type=2">Institute</option>
                      <option value ="yourpage?type=3">Student</option>

                    </select>

 <script type="text/javascript">
function MM_jumpMenu(targ,selObj,restore) //v3.0
{ 
    eval(targ+".location='"+selObj.options[selObj.selectedIndex].value+"'");
    if (restore) selObj.selectedIndex=0;
}
</script> 
```

之后得到这样的价值..

```
 if(isset($_GET['type']) && $_GET['type'] != "")
 {
$Q = $_GET['type'];
  } 
```

将此值放入 Query

```
 SELECT testimonial, city_name, name, web_address, image_name, membership_type
    FROM testimonials 
    INNER JOIN city ON city.city_id = testimonials.city_id where membership_type='$Q'
    ORDER BY date_added DESC LIMIT $start, $display 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:35:56.887

这是代码示例代码，可以让您了解我向您建议的内容..

```
$(document).ready(function(){

 $('#type').change(function(){
   var data = $("#type").val();
$.ajax({

         url : "yourdomain/yourfilterpage.php",
         data: {'type':data},
         type : 'POST' ,
         success : function(data){ $('#divtoshowdata').html(data)}
     });
 })

})

 <select class="select" name="type" id='type'>
 <option value="1">Tutor</option>
<option value="2">Institute</option> 
<option value="3">Student</option> 
```

在 yourfilterpage.php 上获取过滤结果

# c# - 在编辑gridview时，我得到空数据键以及空新值

> ID：15431955
> 
> 赞同：0
> 
> 时间：2013-03-15T12:02:25.637
> 
> 标签：c#, asp.net, gridview

我有网格视图的aspx代码如下..

**ASPX**：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
                    AutoGenerateEditButton="True" BackColor="White" BorderColor="#CC9966" 
                    BorderStyle="None" BorderWidth="1px" CellPadding="4" 
                    DataKeyNames="Machine no." EnableModelValidation="True" 
                    onrowcancelingedit="GridView1_RowCancelingEdit" 
                    onrowediting="GridView1_RowEditing" onrowupdating="GridView1_RowUpdating">
                    <Columns>
                        <asp:BoundField DataField="Machine no." HeaderText="Machine no." 
                            ReadOnly="True" SortExpression="Machine no." />
                        <asp:BoundField DataField="Machine Name" HeaderText="Machine Name" 
                            SortExpression="Machine Name" />
                        <asp:TemplateField HeaderText="Is active?" SortExpression="Is active?">
                            <ItemTemplate>
                                <asp:Label ID="Label1" runat="server" Text='<%# Bind("[Is active?]") %>'></asp:Label>
                            </ItemTemplate>
                            <EditItemTemplate>
                                <asp:DropDownList ID="DropDownList1" runat="server" 
                                    SelectedValue='<%# Bind("[Is active?]") %>'>
                                    <asp:ListItem Value="0">Inactive</asp:ListItem>
                                    <asp:ListItem Value="1">Active</asp:ListItem>
                                </asp:DropDownList>
                            </EditItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                    <FooterStyle BackColor="#FFFFCC" ForeColor="#330099" />
                    <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="#FFFFCC" />
                    <PagerStyle BackColor="#FFFFCC" ForeColor="#330099" HorizontalAlign="Center" />
                    <RowStyle BackColor="White" ForeColor="#330099" />
                    <SelectedRowStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="#663399" />
                </asp:GridView> 
```

我在后面的代码中定义了如下逻辑..

**代码隐藏**：

```
protected void Page_Load(object sender, EventArgs e)
{
     if (!Page.IsPostBack)
     {
          bindgrid();
     }

}
void bindgrid()
{
     string q = "SELECT machineno AS 'Machine no.',machinename AS 'Machine Name',active AS 'Is active?' FROM machinedetails";
     DataTable dt = dtu.table(q, out error);
     GridView1.DataSource = dt;
     GridView1.DataBind();
}
protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
     GridView1.EditIndex = e.NewEditIndex;
     bindgrid();
}
protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
{
     GridView1.EditIndex = -1;
     bindgrid();
}
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
     string mno = e.Keys[0].ToString();
     string mname = e.NewValues[0].ToString();
     string active = e.NewValues[1].ToString();
     string q = "update machinedetails set machinename = '"+mname+"',active='"+active+"' where machineno =" + mno;
     Response.Write(q);
     e.Cancel=true;
     GridView1.EditIndex = -1;
     bindgrid();
} 
```

但它会引发错误：-

```
 Index was out of range. Must be non-negative and less than the size of the collection.
   Parameter name: index 
```

谁能帮我这个？？

史蒂夫->根据您的问题，我将逻辑更改如下

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
     string mno = GridView1.DataKeys[e.RowIndex][0].ToString();
     GridView gv = (GridView)sender;
     for (int i = 0; i < gv.Columns.Count; i++)
     {
          DataControlFieldCell cell = gv.Rows[e.RowIndex].Cells[i] as DataControlFieldCell;
          gv.Columns[i].ExtractValuesFromCell(e.NewValues, cell, DataControlRowState.Edit, true);
     }
     string mname = e.NewValues[0].ToString();
     string active = e.NewValues[1].ToString();
     string q = "update machinedetails set machinename = '" + mname + "',active='" + active + "' where machineno =" + mno;
     Response.Write(q);
     e.Cancel=true;
     GridView1.EditIndex = -1;
     bindgrid();
} 
```

现在我没有收到任何错误，但 mname 与 datakey 相同，我的 response.write 代码使用以下输出 -->update machinedetails set machinename = '2',active='0' where machineno =2

machinename = '2' 应该是我在文本框中输入的值。下拉列表值正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:41:01.310

我想我可以解释为什么你会得到`MachineNo`in的价值`mname`。

你在说：

```
 for (int i = 0; i < gv.Columns.Count; i++)
 {
      DataControlFieldCell cell = gv.Rows[e.RowIndex].Cells[i] as DataControlFieldCell;
      gv.Columns[i].ExtractValuesFromCell(e.NewValues, cell, DataControlRowState.Edit, true);
 } 
```

然后你说

```
 string mname = e.NewValues[0].ToString(); 
```

但是会发生什么`Column[0]`？它是`Machine No`：

```
 <asp:BoundField DataField="Machine no." HeaderText="Machine no."                             ReadOnly="True" SortExpression="Machine no." /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:35:31.733

我通过将所有字段转换为模板字段解决了这个问题。但仍然不知道为什么会这样。

# html - 打开包含特殊字符的链接

> ID：15431961
> 
> 赞同：1
> 
> 时间：2013-03-15T12:02:49.223
> 
> 标签：html

我有一个名为 SharkFinningReport10!@#$%^.pdf 的 pdf 文件。它在目录“文件”中。我需要通过单击链接在浏览器中打开此文件。我的代码如下

```
<body>
    <a href="./file/SharkFinningReport10!@#$%^.pdf">click</a>
</body> 
```

由于 pdf 包含特殊字符，我无法打开它。

任何人都知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:10:28.863

您需要使用 HTML 转义字符来表示特殊字符

```
 <a href="./file/SharkFinningReport10&#33&#64&#35&#36&#37&#94.pdf">Click</a> 
```

可以在此处找到列表：[Ascii 表](http://www.asciitable.com/)

# dll - 为什么隐式链接到 DLL 需要 Windows 上的 lib 文件

> ID：15431963
> 
> 赞同：2
> 
> 时间：2013-03-15T12:02:51.353
> 
> 标签：dll, linker, shared-libraries

在 Linux 平台上，当您想隐式链接到 .so 文件时，您只需要它。为什么 Microsoft 开发了您还需要 .lib 文件的方法。DLL 不包含链接器能够链接到它的所有信息吗？

根据我的经验，当您想要混合不同的编译器和链接器时，“Windows 方式”更加笨拙并且会产生问题。

# javascript - 使用 Jquery 更改文件扩展名

> ID：15431970
> 
> 赞同：0
> 
> 时间：2013-03-15T12:03:27.930
> 
> 标签：javascript, jquery

我在扩展名为 .JPG 的文件夹中有一些图像。我想以编程方式将图像扩展名更改为 .PNG。我之前的帖子在这里：[https](https://stackoverflow.com/questions/15428521/read-a-file-extension-and-change-that-extension) ://stackoverflow.com/questions/15428521/read-a-file-extension-and-change-that-extension 。

```
$.ajax({
    type: "GET",
    url: "aa.jpg",
    dataType: "snapshot",
    success: function (snapshot) 
    {
        try
        {
            var src = $(this).attr("url"); 
            $(src).attr('src',$(this).attr('url').replace('.jpg','png'));
        } 
        catch(ex)
        {
            alert(ex);
        }               
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:19:21.347

在阅读了您的两个问题后，我意识到您想重命名客户端上的文件。这不能单独使用 jQuery 来完成。普通的 javascript 引擎不允许访问客户端的文件系统。

您需要更强大的东西——在作为 ActiveX 对象的窗口上。如果您使用的是其他操作系统，或者浏览器不支持 ActiveX，我不知道如何为您提供帮助。

[在这里](http://www.wangarific.com/rewrite-rename-filenames-using-javascript/)你可以找到一个例子。

# java - 从请求对象的地址栏中获取值

> ID：15431980
> 
> 赞同：0
> 
> 时间：2013-03-15T12:03:50.987
> 
> 标签：java, rest, jboss

我在我的服务器上部署了一个 Rest API，比如 A。我有 2 个 Web 应用程序，比如 www.B.com 和 www.C.com。B 和 C 都调用部署在服务器 A 上的 API。现在想想小场景，

> 用户 Rob 登录 B.com，用户 andrew 登录 C.com。现在他们的一些事件触发器对服务器 A 进行 API 调用。我的问题是，我将如何识别来自 B.com 或 C.com 的特定请求。

此信息仅在 bowser 的地址栏中，但 api 调用是 ajax 调用。有必要提一下，我不想对 java 脚本或前端（在应用程序 B.com 或 C.com 中的任何一个上）进行任何更改。更改应在服务 A 上。任何解决此问题的提示将不胜感激。我正在使用 Java、resteasy、jboss。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:08:03.390

假设您从 B 和 C 接收 API 调用作为 HttpServletRequest：

```
String ipAddress = httpServletRequest.getRemoteAddr(); 
```

然后将 IP 地址与服务器 B 和 C 的已知 IP 地址进行比较。

如果 AJAX 调用直接从浏览器到 A，那么我认为没有办法在不更改 B 或 C 的情况下使其工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:19:39.393

您可以在进行 REST 调用时设置标头（键值对）

在标头中设置一些身份验证令牌。

在暴露 REST API 的服务器中验证令牌

# jquery - 您如何使用相同的代码 jquery 分配单个 .hover

> ID：15431981
> 
> 赞同：0
> 
> 时间：2013-03-15T12:03:52.130
> 
> 标签：jquery

我已经使用 jquery 创建了以下滑动效果 - 但我希望它在每次悬停时工作一次。

```
 // Get a reference to the container.
            var container = $( ".container" );
            // Bind the link to toggle the slide.
            $("a.hover-btn" ).hover(
                function( e ){
                    // Prevent the default event.
                    e.preventDefault();
                    // Toggle the slide based on its current
                    // visibility.
                    if (container.is( ":visible" )){

                        // Hide - slide up.
                        container.slideUp( 200 );
                        $('a.hover-btn').addClass('off');
                        $('a.hover-btn').removeClass('on');

                    } else {

                        // Show - slide down.
                        container.slideDown( 200 );
                        $('a.hover-btn').addClass('on');
                        $('a.hover-btn').removeClass('off');

                    }
                }
            ); 
```

[http://jsfiddle.net/zidski/XtBPQ/](http://jsfiddle.net/zidski/XtBPQ/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:06:22.293

这应该可以解决问题，因为您不能取消绑定相等的 jQuery 函数本身（据我所知）：

```
$('a.hover-btn').unbind('mouseenter').unbind('mouseleave'); 
```

这实际上是取消绑定 jQuery 放在标签上的本机绑定（侦听器）。

对于某些浏览器，上述代码效果更好，对于某些浏览器，此代码效果更好：

```
$('a.hover-btn').unbind('mouseenter mouseleave'); 
```

尝试最适合您的方法。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:08:39.533

用于`.siblings()`获取所需的容器：

```
// Bind the link to toggle the slide.
$("a.hover-btn").hover(

function (e) {
    // Prevent the default event.
    e.preventDefault();
    // Toggle the slide based on its current
    // visibility.
    // Get a reference to the container.
    var container = $(this).siblings(".container");
    if (container.is(":visible")) {

        // Hide - slide up.
        container.slideUp(200);
        $('a.hover-btn').addClass('off');
        $('a.hover-btn').removeClass('on');

    } else {

        // Show - slide down.
        container.slideDown(200);
        $('a.hover-btn').addClass('on');
        $('a.hover-btn').removeClass('off');

    }
}); 
```

演示：http: [//jsfiddle.net/XtBPQ/2/](http://jsfiddle.net/XtBPQ/2/)

但我建议使用`mouseenter`and `mouseleave`，更好地控制这种方式：

```
// Bind the link to toggle the slide.
$("a.hover-btn").on('mouseenter', function () {
    var $btn = $(this);

    // Get a reference to the container.
    var $container = $btn.siblings(".container");

    $container.slideDown(200);
    $btn.addClass('on');
    $btn.removeClass('off');
})
.on('mouseleave', function () {
    var $btn = $(this);

    // Get a reference to the container.
    var $container = $btn.siblings(".container");

    // Hide - slide up.
    $container.slideUp(200);
    $btn.addClass('off');
    $btn.removeClass('on');
}); 
```

演示：http: [//jsfiddle.net/XtBPQ/6/](http://jsfiddle.net/XtBPQ/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:10:39.533

导航到父 div，然后找到 .container..

```
// Get a reference to the container.

// Bind the link to toggle the slide.
$("a.hover-btn" ).hover(
    function( e ){
        // Prevent the default event.
        e.preventDefault();
        // Toggle the slide based on its current
        // visibility.
        var current_container = $(this).parent('.sliderContent').children('.container');
        if (current_container.is( ":visible" )){

            // Hide - slide up.
           current_container.slideUp( 200 );
            $(this).addClass('off');
            $(this).removeClass('on');

        } else {

            // Show - slide down.
            current_container.slideDown( 200 );
            $(this).addClass('on');
            $(this).removeClass('off');

        }
    }
); 
```

或者代替

`var current_container = $(this).parent('.sliderContent').children('.container');`

你可以做其他海报所做的事情

`var current_container = $(this).siblings(".container");`

演示：http: [//jsfiddle.net/XtBPQ/4/](http://jsfiddle.net/XtBPQ/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:12:40.637

**编辑**O im 到迟到 xD

```
$("a.hover-btn").hover(

function (e) {
    // Prevent the default event.
    e.preventDefault();
    // Toggle the slide based on its current
    // visibility.
    // Get a reference to the container.
    var container = $(this).siblings(".container");
    if (container.is(":visible")) {

        // Hide - slide up.
        container.slideUp(200);
        $('a.hover-btn').addClass('off');
        $('a.hover-btn').removeClass('on');

    } else {

        // Show - slide down.
        container.slideDown(200);
        $('a.hover-btn').addClass('on');
        $('a.hover-btn').removeClass('off');

    }
}); 
```

您确实告诉 Jquery var 容器与类容器（所有容器）是相同的。使用 var container = $(this).siblings(".container"); 您只选择与您的 div 悬停匹配的容器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T12:19:33.977

试试这个，看看这是否是你想要实现的目标：

```
$("a.hover-btn").hover(function (e) {
   e.preventDefault();
   $(this).siblings().removeClass('on').slideDown(200);
   $(this).addClass('on');
}, function () {
   $(this).removeClass('on').siblings().slideUp(200);
}); 
```

### [检查小提琴](http://jsfiddle.net/XtBPQ/7/)

但是就性能而言，您可以缓存对象：

```
var $this = $(this);
$("a.hover-btn").hover(function (e) {
   e.preventDefault();
   $this.siblings().removeClass('on').slideDown(200);
   $this.addClass('on');
}, function () {
   $this.removeClass('on').siblings().slideUp(200);
}); 
```

# java - 一个计算正方形、圆形、矩形和三角形周长的java程序

> ID：15431985
> 
> 赞同：-1
> 
> 时间：2013-03-15T12:04:02.557
> 
> 标签：java

通过设计一个计算不同形状周长的程序，我被分配在 Java 中执行继承中的方法重载，我设计了如下所示的代码，但是当我尝试编译时，出现错误。

```
import java.io.*;
import java.util.*;
public class Perimeter {
public double getperimeter(int constant,double pi,double radius){
return(constant*pi*radius);
}
public double getperimeter(int sconstant,double length){
return(sconstant*length);
}
public double getperimeter(int rconstant,double rlength,double widith){
return(rconstant*(rlength+widith));
}
public double getperimeter(double base,double height,double hypotenuse){
return(base+height+hypotenuse);
}
public void main (String args []){
final double pi=22/7;
final int constant=2;
double raduius;

final int sconstant=4;
double length;

final int rconstant=2;
double rlength;
double widith;

double base;
double height;
double hypotenuse;

Perimeter g= new Perimeter();
Scanner s=new scanner(System.in);
 System.out.println("Enter The Radius");
 g.radius=s.nextDouble();
 System.out.println("Enter The Square Length");
 g.lenght=s.nextInt();
 System.out.println("Enter The Rectangle Lenght");
 g.rlength=s.nextInt();
 System.out.println("Enter The Rectangle widith");
 g.widith=s.nextInt();
 System.out.println("Enter The Triangle Base");
 g.base=s.nextInt();
 System.out.println("Enter The Triangle height");
 g.height=s.nextInt();
 System.out.println("Enter The Triangle hypotenuse");
 g.hypotenuse=s.nextInt();

System.out.println("Perimeter = " + g.getperimeter(constant,pi,radius));
System.out.println("Perimeter = " + g.getperimeter(sconstant,length));
System.out.println("Perimeter = " + g.getperimeter(rconstant,rlength,widith));
System.out.println("Perimeter = " + g.getperimeter(base,height,hypotenuse)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T12:22:04.640

这是学者们喜爱的“经典”压倒一切的问题。（其他涉及动物或车辆。）

从一个`Shape`界面开始：

```
public interface Shape {
    double getPerimeter();
} 
```

然后让子类以自己的方式实现它：

```
public class Rectangle implements Shape {
    private double height;
    private double width;

    public Rectangle(double w, double h) {
        this.width = w;
        this.height = h;
    }

    public double getPerimeter() { return 2.0*(this.width + this.height); }
}

public class Circle implements Shape {
    private double radius; 

    public Circle(double r) {
        this.radius = r; 
    }

    public double getPerimeter() { return 2.0*Math.PI*this.radius; }
} 
```

您将能够执行以下操作：

```
List<Shape> shapes = new ArrayList<Shape>();
shapes.add(new Rectangle(1.0, 2.0));
shapes.add(new Circle(10.0));
for (Shape shape : shapes) {
    System.out.println(shape.getPerimeter()); // every Shape will do it their own way
} 
```

添加一个新的 Shape 实现，您的原始代码仍然可以正常工作。它是多态性和动态绑定的本质。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T12:08:38.363

您在一个类中定义了两个具有相同签名的方法。这是一个错误。你的方法：

```
double getperimeter(int constant,double pi,double radius);
double getperimeter(int rconstant,double rlength,double widith); 
```

此外，您的主要方法必须声明为静态

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:18:38.283

您似乎对 java 仍然不熟悉，因此开始帮助：

*   主要方法是静态的，即首先执行。

*   您正在使用重载方法 getperimeter，您可以在其中轻松混淆 int 和 double。也许选择一个独特的名字。Java 约定是使用有趣的驼峰式案例：getPerimeter。

    ```
    import java.util.*;

    public class Perimeter {

    public static void main(String args[]) {
        new Perimeter().execute();
    }

    public double getperimeter(int constant, double pi, double radius) {
        return (constant * pi * radius);
    }

    public double getperimeter(int sconstant, double length) {
        return (sconstant * length);
    }

    public double getperimeterRLenghtWidith(int rconstant, double rlength, double widith) {
        return (rconstant * (rlength + widith));
    }

    public double getperimeter(double base, double height, double hypotenuse) {
        return (base + height + hypotenuse);
    }

    private void execute() {
        final double pi = Math.PI; //22 / 7;
        final int constant = 2;
        double radius;

        final int sconstant = 4;
        double length;

        final int rconstant = 2;
        double rlength;
        double widith;

        double base;
        double height;
        double hypotenuse;

        Scanner s = new Scanner(System.in);
        System.out.println("Enter The Radius");
        radius = s.nextDouble();
        System.out.println("Enter The Square Length");
        length = s.nextInt();
        System.out.println("Enter The Rectangle Lenght");
        rlength = s.nextInt();
        System.out.println("Ener The Rectangle widith");
        widith = s.nextInt();
        System.out.println("Enter The Triangle Base");
        base = s.nextInt();
        System.out.println("Enter The Triangle height");
        height = s.nextInt();
        System.out.println("Enter The Triangle hypotenuse");
        hypotenuse = s.nextInt();

        System.out.println("Perimeter = " + getperimeter(constant, pi, radius));
        System.out.println("Perimeter = " + getperimeter(sconstant, length));
        System.out.println("Perimeter = " + getperimeterRLenghtWidith(rconstant, rlength, widith));
        System.out.println("Perimeter = " + getperimeter(base, height, hypotenuse));

    }
    } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:15:47.450

嗨，您应该在不同的文件中有一个 Perimeter 类。我看到缺少关闭类 Perimeter 的括号。也像 Xavier 提到的那样，您有两种具有相同签名的方法。您还将从 Scanner 读取值到 Perimeter 实例变量，然后将未初始化的值传递给 Perimeter 方法。所以我会分离 Perimeter 类，主要将值读取到局部变量并将它们传递给 Perimeter 方法。

```
public void main (String args []){
final double pi=22/7;
final int constant=2;
double raduius;

final int sconstant=4;
double length;

final int rconstant=2;
double rlength;
double widith;

double base;
double height;
double hypotenuse;

Perimeter g= new Perimeter();
Scanner s=new scanner(System.in);
 System.out.println("Enter The Radius");
 radius=s.nextDouble();
 System.out.println("Enter The Square Length");
 lenght=s.nextInt();
 System.out.println("Enter The Rectangle Lenght");
 rlength=s.nextInt();
 System.out.println("Enter The Rectangle widith");
 widith=s.nextInt();
 System.out.println("Enter The Triangle Base");
 base=s.nextInt();
 System.out.println("Enter The Triangle height");
 height=s.nextInt();
 System.out.println("Enter The Triangle hypotenuse");
 hypotenuse=s.nextInt();

System.out.println("Perimeter = " + g.getperimeter(constant,pi,radius));
System.out.println("Perimeter = " + g.getperimeter(sconstant,length));
System.out.println("Perimeter = " + g.getperimeter(rconstant,rlength,widith));
System.out.println("Perimeter = " + g.getperimeter(base,height,hypotenuse)); 
```

# udp - UDP 空缓冲区 ReceiveAsync

> ID：15431987
> 
> 赞同：0
> 
> 时间：2013-03-15T12:04:12.997
> 
> 标签：udp, buffer, socketasynceventargs

[我使用了这个线程](https://stackoverflow.com/questions/11539922/windows-phone-7-receive-udp-packet-broadcast-or-unicast-over-wifi)中的 SocketClient.cs和 msdn 中的非常相似。

有人能告诉我为什么收到数据包后缓冲区是空的吗？

我在 Windows 8 上有主机应用程序，然后我从带有某种信息的电话数据包发送。然后主机用新数据包回复我。方法“接收”接收空信息。缓冲区为空。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T11:24:05.930

如果您没有对 SAEA 对象的 Completed 事件做出反应，则没有收到任何数据。如果是，那么您收到一条空消息，或者您的缓冲区大小为 0。这就是文档告诉您的内容。

我查看了您链接中的代码，发现它正在使用带有 SendToAsync 方法的 ManualResetEvent。我不知道它为什么这样做，但这可能是一个原因，具体取决于指定的超时时间。

我猜不是每个人都在阅读 SAEA 对象的文档，但您必须将其视为线程同步对象。它被发送到一个线程，在那里完成它的工作并发出信号完成，这就是它。也许这是您链接帖子中代码的问题，应该从 SAEA 对象接收信号的线程在调用 Reset 方法之前一直很忙。如果是这样，来自在另一个线程中工作的 SAEA 对象的任何事件都不会通过。

另请注意，如果结果在调用时可用，则 SendToAsync 可能会立即返回 false。您可以立即检查结果。所以你可以安全地称之为

```
if (!_socket.SendToAsync(myEventArgs))
  ProcessResult(myEventArgs); 
```

所以基本思想是：如果你使用 SocketAsyncEventArgs，不要使用线程。异步套接字方法尝试使线程对用户透明，您只需在此之上添加一个线程层。这很可能会给你带来麻烦。

# c# - MySQL - 当类似的 CREATE TABLE 没有时，CREATE TABLE 会引发错误

> ID：15431989
> 
> 赞同：0
> 
> 时间：2013-03-15T12:04:15.200
> 
> 标签：c#, asp.net, mysql, primary-key, create-table

我现在正在制作一个 ASP.NET 网站。在 Global.asax 中，如果某些表不存在，我有代码用于初始化它们。代码的 init blog_post 和 booking_dates 部分正确执行并创建表，但 init image_info 没有。它们非常相似，我找不到 MySQL 语法有什么问题。

错误信息：
您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''description' TEXT, PRIMARY KEY(id))' 附近使用正确的语法

```
 //init blog_post
        using (MySqlCommand cmd = new MySqlCommand("CREATE TABLE IF NOT EXISTS `blog_post` (" +
            "`id` INT AUTO_INCREMENT," +
            "`header` VARCHAR(255)," +
            "`bbcode` TEXT," +
            "`author` VARCHAR(255)," +
            "`time_posted` DATETIME, " +
            "PRIMARY KEY(id));", con))
        {
            cmd.ExecuteNonQuery();
            cmd.Dispose();
        }

        //init booked_dates
        using (MySqlCommand cmd = new MySqlCommand("CREATE TABLE IF NOT EXISTS `booked_dates` (" +
            "`id` INT AUTO_INCREMENT," +
            "`author` VARCHAR(255)," +
            "`start_time` DATETIME," +
            "`end_time` DATETIME," +
            "`time_booked` DATETIME, " +
            "PRIMARY KEY(id));", con))
        {
            cmd.ExecuteNonQuery();
            cmd.Dispose();
        }

        //init image_info
        using (MySqlCommand cmd = new MySqlCommand("CREATE TABLE IF NOT EXISTS `image_info` (" +
            "`id` INT AUTO_INCREMENT," +
            "`author` VARCHAR(255)," +
            "`file_name` TEXT," +
            "`title` TEXT," +
            "`album` TEXT, " +
            "'description' TEXT, " +
            "PRIMARY KEY(id));", con))
        {
            cmd.ExecuteNonQuery();
            cmd.Dispose();
        } 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:07:57.180

您没有`backticks`在创建表代码中使用。

```
"'description' TEXT, " 
```

应该

```
"`description` TEXT, " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T12:06:58.930

您在描述周围使用了不同的引号，`'`它应该是另一个

```
`description` 
```

或者由于`description`不是保留词，因此您可以根据需要省略引号。您的查询应该是：

```
using (MySqlCommand cmd = new MySqlCommand("CREATE TABLE IF NOT EXISTS `image_info` (" +
            "`id` INT AUTO_INCREMENT," +
            "`author` VARCHAR(255)," +
            "`file_name` TEXT," +
            "`title` TEXT," +
            "`album` TEXT, " +
            "`description` TEXT, " +
            "PRIMARY KEY(id));", con)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T12:07:06.713

`backticks`应该被用来代替`single quote`

```
"'description' TEXT, " + 
```

本来应该

```
"`description` TEXT, " + 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:07:37.493

`"'description' TEXT, " +`有其他报价！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-25T07:26:03.303

无论如何都不需要引用/反引号。

# android - android webapp远程框架？

> ID：15431992
> 
> 赞同：0
> 
> 时间：2013-03-15T12:04:25.453
> 
> 标签：android, cordova, client, remote-access

对于某种学生/教师/电子学习场景，我有以下问题：我有十个 android 设备（学生），运行基于 phonegap/html5/javascript/jquery 的 webapp。

我想要一台 PC（老师）
- 从设备中获取数据
- 将数据/文件发送到设备
（ - 远程控制 webapp）

我想避免
的： - 需要在 PC 上运行和管理网络服务器（例如 apache）或类似复杂的设置工具

任何人都可以帮忙，我可能会寻找什么技术、工具或框架？

webapp 本身类似于调查/测验。就我个人而言，我会选择安装 apache 服务器，但老师需要一个更易于处理的解决方案。
提前感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:21:30.760

你需要一个服务器来发送数据。

如果您自己无法提供此功能，则可以使用其他人的 Web 服务来解决一些简单的问题。例如保管箱（公共文件夹）、Google Drive、电子邮件等。

# c++ - 指针问题将其作为常量发送

> ID：15431993
> 
> 赞同：0
> 
> 时间：2013-03-15T12:04:28.450
> 
> 标签：c++, pointers, constants

一段时间以来，我再次使用 c++，我怀疑将指针作为函数中的参数发送。

我想将一个对象指针发送到一个函数但具有 const 状态，以知道指针指向的对象不会随时被修改。所以我这样做了：

```
int hi(const SomeObject* so)
{
    so->SayHi();
}

SomeObject* so = new SomeObject();
hi(so); 
```

但它没有用。它说不兼容的类型...

另外，如果我也将 const 添加到函数中会有所不同吗？像：

```
int hi(const SomeObject* so) const; 
```

谁能解释我这个疑问？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:09:21.953

```
int hi(const SomeObject* so) 
```

你已经声明`SomeObject`是不变的。如果 sayHi 也没有声明为 const，这将导致编译器错误。

```
class SomeObject {
  void sayHi(void) const;
} 
```

如果您的意图是使指针保持不变（而不是它指向的对象），它应该如下所示：

```
int hi(SomeObject* const so) 
```

[在这里](http://www.thegeekstuff.com/2012/06/c-constant-pointers/)您可以阅读有关指针和常量指针的信息